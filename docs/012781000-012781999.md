# StackOverflow 问答 12781000-12781999

# android - Android GCM 项目id，是哪一个？

> ID：12781003
> 
> 赞同：7
> 
> 时间：2012-10-08T11:40:32.763
> 
> 标签：android, google-cloud-messaging

休息后，我返回查看 Android GCM 服务，并对“入门”指南中描述的项目 ID 感到困惑：

> 单击创建项目。您的浏览器 URL 将更改为：
> 
> [https://code.google.com/apis/console/#project:4815162342](https://code.google.com/apis/console/#project:4815162342)
> 
> 记下#project 后面的值：（本例中为 4815162342）。这是您的项目 ID，稍后将用作 GCM 发件人 ID。

我们称之为**ID_1**

我忘记了我的项目 ID 可以在浏览器的控制台 API 链接上看到，所以我以为我没有项目 ID，我通过 Google API 控制台注册了项目并单击了“注册”链接。我必须选择一个 ID，所以现在当我查看我的项目的控制台仪表板时，我会看到以下形式：

仪表板

```
Project Summary Name    MYGCMProject
Project ID              i-picked-this-id-2-11b-36
Owners                  me@myemail - you 
```

让我们将“i-picked-this”值称为**ID_2**

所以我的问题是我在客户端的 registerClient 代码中使用哪个值（ID_1 或 ID_2）

```
GCMRegistrar.register(this, PROJECT_ID); 
```

?

如果还是ID_1，那么我通过API控制台注册项目时选择的ID有什么用？

（我已经看到这个问题[Android GCM-Register Id and Project Id](https://stackoverflow.com/questions/12367792/android-gcm-register-id-and-project-id)是最接近的类似问题，它对我的​​查询没有任何启示）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T11:41:33.197

```
4815 1623 42 this one and it should be **twelve digit** 
```

从 URL = [https://code.google.com/apis/console/#project:4815162342](https://code.google.com/apis/console/#project:4815162342) <---

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-02T09:36:28.540

有两种方法可以识别您的项目：“项目编号”和“项目 ID”。

项目 ID 是一个可选标识符，您可以将其分配给您自己的项目。当 Google Cloud SQL 等服务需要访问您的项目资源时，它们会使用它。

在启用需要 ID 的服务之一之前，您无需为项目分配 ID。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-09T21:33:40.143

登录到 Google API 控制台后，单击左上角的汉堡按钮并切换到“IAM & Admin”。然后从左侧的侧边栏菜单中选择“设置”，并记下右侧的项目编号。

# eclipse - 使用命令行编译项目但在 Eclipse 中调试？

> ID：12781006
> 
> 赞同：0
> 
> 时间：2012-10-08T11:40:45.370
> 
> 标签：eclipse, debugging, command-line, compilation, maven-plugin

我有一个大项目，我可以在命令行中使用 Maven 编译和运行。

我想将其导入 eclipse 以深入了解代码并更好地理解它，但是有很多不支持的插件。

![在此处输入图像描述](../Images/6f26b6b8e940385854627aba668c4bf9.png)

有没有办法通过命令行导入整个项目，包括目标文件夹和编译的类，但在 Eclipse 中调试它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T06:25:18.473

I assume you are using m2e. Those unresolved plugins should not really matter. If you do a Maven build from inside Eclipse, Maven will download all those needed plugins during the process and then the errors shown in the POM files will just vanish, as m2e now recognizes the newly available plugins.

# c# - 通过 C# 使用 MongoDB 聚合框架时的性能问题

> ID：12781011
> 
> 赞同：2
> 
> 时间：2012-10-08T11:41:01.997
> 
> 标签：c#, mongodb, mongodb-.net-driver

通过 C# 使用 MongoDB 聚合框架时，我遇到了性能问题。当使用 C# 执行时，通过 Mongo shell 快速工作的聚合需要永远。

在尝试通过 C# 调用框架之前，我通过 Mongo shell 执行了以下聚合以检查一切是否正常：

```
db.runCommand(
    {
        aggregate: "actions", 
        pipeline : 
        [
            { $match : { CustomerAppId : "f5357224-b1a8-4f1a-8ea2-a06a00ca597a", ActionName : "install"}}, 
            { $group : { _id : { CustomerAppId:"$CustomerAppId",ActionDate:"$ActionDate" }, count : { $sum : 1 } }}
        ]
    }); 
```

该脚本**在 < 500 毫秒内执行**并返回预期的大约 200 个结果（CustomerAppId 在数据库中定义为字符串。不能将 GUID 与聚合框架一起使用。）。

然后，我将相同的脚本移植到 C#：

```
var pipeline = new BsonArray
        {
            new BsonDocument
                {
                    {
                        "$match", 
                        new BsonDocument
                            {
                                {"CustomerAppId", "f5357224-b1a8-4f1a-8ea2-a06a00ca597a"},
                                {"ActionName", "install"}
                            }
                    },
                    { "$group", 
                        new BsonDocument
                            {
                                { "_id", new BsonDocument
                                             {
                                                 {
                                                     "CustomerAppId","$CustomerAppId"
                                                 },
                                                 {
                                                     "ActionName","$ActionName"
                                                 }
                                             } 

                                },
                                {
                                    "Count", new BsonDocument
                                                 {
                                                     {
                                                         "$sum", 1
                                                     }
                                                 }
                                }
                            } 
                  }
            }
        };

var command = new CommandDocument
{
    { "aggregate", "actions" },
    { "pipeline", pipeline }
}; 
```

（如果有更简单的方法在 C# 中编写聚合，请告诉我:)）

我正在执行这样的操作：

```
var result = db.RunCommand(command); 
```

问题是**它会杀死服务器**：CPU 和内存使用率上升。当我检查 db.currentOp() 时，我可以看到聚合操作，但我最终必须使用 db.killOp(1281546) 来终止它：

```
"opid" : 1281546,
"active" : true,
"secs_running" : 294,
"op" : "query",
"ns" : "database.actions",
"query" : {
        "aggregate" : "actions",
        "pipeline" : [
                {
                        "$match" : {
                                "CustomerAppId" : "f5357224-b1a8-4f1a-8ea2-a06a00ca597a",
                                "ActionName" : "install"
                        },
                        "$group" : {
                                "_id" : {
                                        "CustomerAppId" : "$CustomerAppId",
                                        "ActionName" : "$ActionName"
                                },
                                "Count" : {
                                        "$sum" : 1
                                }
                        }
                }
        ]
}, 
```

对我来说，该操作看起来非常好，并且类似于我直接从 mongo shell 运行的脚本。感觉就像通过 C# 运行聚合会导致 MongoDB 错过索引，并且它正在对集合中的所有约 600 万个文档进行表扫描。

有任何想法吗？

**更新：日志**

感谢 cirrus 的建议，我启用了详细日志记录，然后使用 tail 获取查询。他们**是不同的**！所以我认为我的 C# 端口有问题。关于如何正确格式化查询的任何想法？

通过**shell**执行时的查询：

```
Mon Oct  8 15:00:13 [conn1] run command database.$cmd { aggregate: "actions", pipeline: [ { $match: { CustomerAppId: "f5357224-b1a8-4f1a-8ea2-a06a00ca597a", ActionName: "install" } }, { $group: { _id: { CustomerAppId: "$CustomerAppId", ActionDate: "$ActionDate" }, count: { $sum: 1.0 } } } ] }
Mon Oct  8 15:00:13 [conn1] command database.$cmd command: { aggregate: "actions", pipeline: [ { $match: { CustomerAppId: "f5357224-b1a8-4f1a-8ea2-a06a00ca597a", ActionName: "install" } }, { $group: { _id: { CustomerAppId: "$CustomerAppId", ActionDate: "$ActionDate" }, count: { $sum: 1.0 } } } ] } ntoreturn:1 keyUpdates:0 locks(micros) r:27944 reslen:12705 29ms 
```

以及通过 C# 执行时的查询：

```
Mon Oct  8 15:00:16 [conn8] run command database.$cmd { aggregate: "actions", pipeline: [ { $match: { CustomerAppId: "f5357224-b1a8-4f1a-8ea2-a06a00ca597a", ActionName: "install" }, $group: { _id: { CustomerAppId: "$CustomerAppId", ActionDate: "$ActionDate" }, Count: { $sum: 1 } } } ] } 
```

第二行丢失了，我想是因为查询没有完成。

为了便于比较，这里再次列出日志。脚本启动，C# 停止：

```
Mon Oct  8 15:00:13 [conn1] run command database.$cmd { aggregate: "actions", pipeline: [ { $match: { CustomerAppId: "f5357224-b1a8-4f1a-8ea2-a06a00ca597a", ActionName: "install" } }, { $group: { _id: { CustomerAppId: "$CustomerAppId", ActionDate: "$ActionDate" }, count: { $sum: 1.0 } } } ] }
Mon Oct  8 15:00:16 [conn8] run command database.$cmd { aggregate: "actions", pipeline: [ { $match: { CustomerAppId: "f5357224-b1a8-4f1a-8ea2-a06a00ca597a", ActionName: "install" }, $group: { _id: { CustomerAppId: "$CustomerAppId", ActionDate: "$ActionDate" }, Count: { $sum: 1 } } } ] } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T15:16:23.733

原来我错误地格式化了管道对象。$match 和 $group 都必须在它们自己的 BsonDocument 实例中。以下代码似乎产生了正确的输出：

```
var pipeline = new BsonArray
        {
            new BsonDocument
                {
                    {
                        "$match", 
                        new BsonDocument
                            {
                                {"CustomerAppId", "f5357224-b1a8-4f1a-8ea2-a06a00ca597a"},
                                {"ActionName", "install"}
                            }
                    }
            },
            new BsonDocument
                {
                    { "$group", 
                        new BsonDocument
                            {
                                { "_id", new BsonDocument
                                             {
                                                 {
                                                     "CustomerAppId","$CustomerAppId"
                                                 },
                                                 {
                                                     "ActionDate","$ActionDate"
                                                 }
                                             } 

                                },
                                {
                                    "Count", new BsonDocument
                                                 {
                                                     {
                                                         "$sum", 1
                                                     }
                                                 }
                                }
                            } 
                  }
                }
        }; 
```

我真的希望管道中有一个用于 MongoDB 聚合框架的 C# Linq 提供程序 :)

# c++ - 如何创建加密的挂载文件夹

> ID：12781013
> 
> 赞同：2
> 
> 时间：2012-10-08T11:41:09.257
> 
> 标签：c++, qt, winapi, driver, directory

我想创建一个挂载的文件夹以便稍后加密，我的观点是创建一个普通目录（`C:\path\to\myfolder`）并将其挂载到驱动器（`I:\`），因此两个路径都会发生任何更改，我的目标是如果添加的任何文件`I:\`将自动加密在`C:\path\to\myfolder`

问题：

*   如何在不接触驱动器下的文件或目录的情况下监视已安装的文件夹并加密其子项（文件或目录）。
*   有没有办法从一开始就创建这个挂载的文件夹，这样添加的任何文件都会在文件夹下自动加密并在驱动器下解密，如果我挂载它时它已经存在，文件将在关联驱动器下解密。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T04:54:03.653

如果你想使用 NTFS 加密，那么你可以使用[`EncryptFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364021%28v=vs.85%29.aspx)API 来加密现有的文件/目录。如果提供了目录，则添加到其中的任何新文件都将被加密。

[处理加密文件和目录](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365005%28v=vs.85%29.aspx)中的更多信息

或者您想实现自己的加密驱动程序？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:33:10.010

在 Linux 下，有一个名为 encfs（加密文件系统）的实用程序，它允许拥有一个加密文件夹并将该文件夹的解密版本挂载到其他文件夹中。

有一个可用的 Windows 端口（http://members.ferrara.linux.it/freddy77/encfs.html），但我从未使用过它。

请注意，此解决方案在操作系统本身中，但如果需要，您应该能够以编程方式访问这两个文件夹，并且可能还可以使用应用程序中的系统调用来挂载/卸载文件夹。

# html - 如何将数据附加到 MVC4 中的下拉列表？

> ID：12781018
> 
> 赞同：0
> 
> 时间：2012-10-08T11:41:33.217
> 
> 标签：html, asp.net-mvc-4, append

大家好，我在我的应用程序中动态地将数据附加到下拉列表，但我在这里有一个错误，下拉列表已创建，但值绑定在下拉列表之外，任何人都可以在这里纠正我我做错了什么

```
 if(product.oPTIONS.length>0)
            {
            alert(product.oPTIONS.length);
            $.each(product.oPTIONS, function (idx, options) {                    
                $("#productdetails").append('<label>' + options.OptionName + '</label>');
                if(options.value.length>0)
                {
                    var stringBuilder = [];                      
                    $("#productdetails").append('<select>');
                    $.each(options.value, function (idx, values) {
                        stringBuilder.push('<option id="' + values.OptionvalueID + '">' + values.OptionValue + '</option>');                    
                    });
                     stringBuilder.push('</select>');
                    $("#productdetails").append(stringBuilder.join(''));
                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:42:36.350

根据您所说的，我猜您已经使用 Html.DropDownListFor 为元素 productdetails 创建了一个带有下拉列表的模型，并且您希望从 ajax 调用中填充它。

所以你想像这样进行 jQuery ajax 调用

```
$.ajax({
                url: "/SomeController/SomeDetails",
                type: "GET",
                success: function (data) {
                    $("#productdetails option").remove();
                    $.each(data, function (key, value) {
                        $('#productdetails')
                                    .append($("<option></option>")
                                    .attr("value", key)
                                    .text(value));
                    });
                }
            }); 
```

如果您不想删除选择的旧值，则只需删除 $("#productdetails option").remove(); 行

另请注意，我的控制器方法返回选项元素的键值对的 JSON 对象。

# python - xmodem协议中getc方法提供的size值是多少？

> ID：12781023
> 
> 赞同：1
> 
> 时间：2012-10-08T11:41:56.113
> 
> 标签：python, xmodem

我正在尝试使用**XMODEM**协议传输文件。

我看到但不理解中提供的解决方案：[我可以将 xmodem 协议与 PySerial 一起使用吗？](https://stackoverflow.com/questions/1834247/can-I-use-the-xmodem-protocol-with-pyserial)

我看到了[xmodem 包链接](http://pypi.python.org/pypi/xmodem)。

1.  `size`为方法提供的价值是什么`getc`？它没有被赋予第[一个链接](https://stackoverflow.com/questions/1834247/can-I-use-the-xmodem-protocol-with-pyserial)中给出的任何值。
2.  当我使用[第二个链接](http://pypi.python.org/pypi/xmodem)中解释的简单方法时，我最终得到了错误：`No handlers could be found for logger "xmodem"`。

这是我发送文件的代码。

```
import serial
from xmodem import XMODEM, CRC
from time import sleep
def getc(size, timeout=1):
    return port.read(size)
def putc(data, timeout=1):
    port.write(data)
    sleep(0.001) # give device time to send ACK
port = serial.Serial(port='COM10',parity=serial.PARITY_NONE,bytesize=serial.EIGHTBITS,stopbits=serial.STOPBITS_ONE,timeout=0,xonxoff=0,rtscts=0,dsrdtr=0,baudrate=9600)

sleep(2) # give device time to handle command
stream = open('..\\stream\\myfile.bin','rb')
modem = XMODEM(getc, putc)
modem.send(stream, quiet = 0) 
```

我得到错误：`No handlers could be found for logger "xmodem"`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:32:14.910

这是第一个问题的解决方案，XMODEM 使用**getc**和**putc分别从端口读取***大小*字节数并将*数据*写入端口。它们需要由用户定义并提供给 XMODEM 对象。XMODEM 在内部使用*size*调用**getc**。

# tridion - 使用实例名称 (JDBC) 动态发布到 Tridion Broker 数据库时的连接问题？

> ID：12781025
> 
> 赞同：8
> 
> 时间：2012-10-08T11:42:04.200
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

提交阶段总是失败并出现以下错误：

```
Committing Deployment Failed
Phase: Deployment Prepare Commit Phase failed, Unable to prepare transaction: tcm:0515104-66560,
org.hibernate.exception.JDBCConnectionException: Cannot open connection,
org.hibernate.exception.JDBCConnectionException: Cannot open connection, Unable to prepare transaction: tcm:0-515104-66560, 
org.hibernate.exception.JDBCConnectionException: Cannot open connection,
org.hibernate.exception.JDBCConnectionException: Cannot open connection 
```

这是适用于具有默认实例 (DEV/UAT) 的数据库的配置：

```
<Storage Type="persistence" Id="brokerdb" dialect="MSSQL" Class="com.tridion.storage.persistence.JPADAOFactory">
            <Pool Type="jdbc" Size="5" MonitorInterval="60" IdleTimeout="120" CheckoutTimeout="120" />
            <DataSource Class="com.microsoft.sqlserver.jdbc.SQLServerDataSource">
                <Property Name="serverName" Value="ourServerName" />
                <Property Name="portNumber" Value="1433" />
                <Property Name="databaseName" Value="Tridion_Broker" />
                <Property Name="user" Value="TridionBrokerUser" />
                <Property Name="password" Value="xxxxxxxxpassxx" />
            </DataSource>
        </Storage> 
```

但是，对于我们的生产，使用命名实例是不可避免的。所以我们尝试了这个配置来传递实例的名称，但无济于事；我们仍然得到错误。

```
<Storage Type="persistence" Class="com.tridion.storage.persistence.JPADAOFactory" 
    Id="brokerdb"
    Url="jdbc:sqlserver://ourServerName/Tridion_Broker;instanceName=THE_INSTANCE_NAME;domain=DOMAIN_NAME" 
    Username="TridionBrokerUser" 
    Password="xxxxxxxxpassxx" 
    Driver="com.microsoft.sqlserver.jdbc.SQLServerDataSource">
    <Pool Type="jdbc" Size="5" MonitorInterval="60" IdleTimeout="120" CheckoutTimeout="120"/>
</Storage> 
```

连接字符串有什么问题吗？或者有没有办法使用第一个模式传递实例名称；比如说`<Property Name="instanceName" Value="THE_INSTANCE_NAME" />`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-09T06:13:58.587

Both Nikoli and Gertjan's [reference](http://msdn.microsoft.com/en-us/library/ms378428.aspx) made me realize that the instance name is not required. **An alternative is to specify the port to which the instance is running on.**

This [article](http://dbamohsin.wordpress.com/2011/02/08/quickest-way-to-find-a-sql-server-instance-port-number/) showed me how to know which port is being used for the instance.

This configuration worked:

```
<Storage Type="persistence" Id="brokerdb" dialect="MSSQL" Class="com.tridion.storage.persistence.JPADAOFactory">
        <Pool Type="jdbc" Size="5" MonitorInterval="60" IdleTimeout="120" CheckoutTimeout="120" />
        <DataSource Class="com.microsoft.sqlserver.jdbc.SQLServerDataSource">
            <Property Name="serverName" Value="ourServerName" />
            <Property Name="portNumber" Value="43333" />
            <Property Name="databaseName" Value="Tridion_Broker" />
            <Property Name="user" Value="TridionBrokerUser" />
            <Property Name="password" Value="xxxxxxxxpassxx" />
        </DataSource>
    </Storage> 
```

I also tried the connection string approach and it worked, too:

```
<Storage Type="persistence" Class="com.tridion.storage.persistence.JPADAOFactory" 
    dialect="MSSQL" 
    Id="brokerdb" 
    Url="jdbc:sqlserver://ourServerName:43333;databaseName=Tridion_Broker;" 
    Username="TridionBrokerUser" Password="xxxxxxxxpassxx" 
    Driver="com.microsoft.sqlserver.jdbc.SQLServerDataSource">
    <Pool Type="jdbc2" Size="5" MonitorInterval="60" IdleTimeout="120" CheckoutTimeout="120"/>
</Storage> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T11:50:42.320

您可以尝试以下方法：

```
<Property Name="serverName" Value="ourServerName\ourInstanceName" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T12:33:33.190

您指定 URL 的原始语法是正确的，但是，在检查[文档](http://msdn.microsoft.com/en-us/library/ms378428%28v=sql.105%29.aspx)后，我似乎找不到名为“域”的有效属性。这可能是你的罪魁祸首。尝试使用“\”在用户名中指定域。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-08T13:55:53.647

根据这篇msdn文章：http: [//msdn.microsoft.com/en-us/library/ms378428.aspx](http://msdn.microsoft.com/en-us/library/ms378428.aspx)

你应该像这样配置它：

```
jdbc:sqlserver://[serverName[\instanceName][:portNumber]][;property=value[;property=value]] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T21:21:21.287

# nutch - Nutch readlinkdb 不输出任何东西

> ID：12781027
> 
> 赞同：3
> 
> 时间：2012-10-08T11:42:06.710
> 
> 标签：nutch, web-crawler

我使用 Nutch 1.5 进行爬网（使用了 crawl 命令），发布这个 readlinkdb 转储什么都不包含。此外，在索引过滤器中，链接为空。是什么导致链接为空？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T17:08:04.773

也许您只是在索引一个特定的站点。在这种情况下，如果`db.ignore.internal.links`in`nutch-default.xml`为真，nutch 将不会存储内部链接。将其设置为 false in `nutch-site.xml`，您的链接数据库将开始增长。

```
<property>
  <name>db.ignore.internal.links</name>
  <value>false</value>
  <description>If true, when adding new links to a page, links from
  the same host are ignored.  This is an effective way to limit the
  size of the link database, keeping only the highest quality
  links.
  </description>
</property> 
```

# javascript - HTML5 视频 - 画布上的图像

> ID：12781028
> 
> 赞同：3
> 
> 时间：2012-10-08T11:42:12.360
> 
> 标签：javascript, html, html5-video, html5-canvas

我正在尝试将视频帧捕获为图像，如下所示：

[http://appcropolis.com/using-html5-canvas-to-capture-frames-from-a-video/](http://appcropolis.com/using-html5-canvas-to-capture-frames-from-a-video/)

我的简单代码：

```
var video = document.getElementById("video");
var bottom = document.getElementById("bottom"); 

var canvas = document.createElement('canvas');

canvas.width  = 500;
canvas.height = 282;

var ctx = canvas.getContext('2d');
ctx.drawImage(video, 0, 0, 500, 282); 

bottom.innerHTML = '';
bottom.appendChild(canvas); 
```

在 IE 上效果很好，但在 Chrome 上我总是有黑色画布......

演示在这里：

[http://html5-canvas-test.vipserv.org/](http://html5-canvas-test.vipserv.org/)

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:45:29.563

对我来说在 Chrome 中完美运行！

**但是你需要启动视频**，如果视频没有启动你会得到一个黑屏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T19:25:29.207

您必须使用“寻找”事件！

```
$(video).seeked(function() {
    ctx.drawImage(video, 0, 0, 500, 282); 
}); 
```

对不起我的英语我是法国人

# symfony - symfony 表单域中的国籍

> ID：12781030
> 
> 赞同：0
> 
> 时间：2012-10-08T11:42:13.803
> 
> 标签：symfony, symfony-forms, symfony-2.1

**我正在尝试使用 Symfony2.1 从现场创建国籍：**

```
public function buildForm(FormBuilderInterface $builder, array $options){
    parent::buildForm($builder, $options);
    $builder->add('nationality','country');
} 
```

我设法显示国家：

```
{{user.nationality | country  }} 
```

每个国家的“值”是两个字母的国家代码。

**有没有办法从 2 个字母的国家代码中显示国籍？**

我不认为有一个树枝过滤器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:15:37.030

您可以创建一个 Twig 过滤器来执行以下操作：

```
use Symfony\Component\Locale\Locale;

return Locale::getDisplayCountries($locale)[$countryCode]; 
```

# syntax-highlighting - 突出显示 php 文件中的 js 代码

> ID：12781037
> 
> 赞同：9
> 
> 时间：2012-10-08T11:42:42.653
> 
> 标签：syntax-highlighting, phpstorm

我有一个文件`script.js.php`。它包含`PHP`和`JavaScript`代码（`js`取决于`php`）。它将作为 js 文件包含在页面中。

```
<script type="text/javascript" src="script.js.php"></script> 
```

script.js.php 示例

```
<?php
    require_once 'functions.php'
?>
var vars = {
    var1: 'value1',
    var2: 'value2',
    var2: '<?php echo phpFunction(); ?>'
} 
```

有谁知道，是否可以在不使用-tag`PhpStorm`的情况下在 PHP 文件中制作高亮 JavaScript 代码？`script`

也许有某种伪标签不会影响最终的 html/js，但会使 PhpStorm 高亮代码“正确”，例如

```
<!-- <section language="javascript">--> 
    js goes here 
<!-- </section> --> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-08T12:04:19.843

**设置 | 模板数据语言**——找到您的文件或文件夹并分配`JavaScript`给它们（而不是默认的 HTML）。

如果您的东西井井有条，那么您将受益于将所有`*.js.php`文件保存在单独的子文件夹下——这允许对整个文件夹（以及其中的所有文件）进行单一分配，而不是对单个文件进行多次分配。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-08T11:47:36.807

*   将光标放在 JavaScript 部分
*   按`Alt + Enter`
*   选择`Inject Language`
*   选择`JavaScript`

例如：

```
<?php
echo "<script>/* CURSOR HERE*/
    alert('Hello World');
    </script>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-17T20:53:33.593

如果您使用硬编码的“JS”heredoc，它会知道它是 Javascript 并为您提供该片段的自动完成功能：

```
$javascript_code = <<<JS
  function test(){
  console.log('hello!');    
}
JS; 
```

# jquery - 搜索颜色选择器 jquery 插件

> ID：12781038
> 
> 赞同：0
> 
> 时间：2012-10-08T11:42:58.863
> 
> 标签：jquery, colors, picker

我正在寻找一个颜色选择器 jquery 插件，但不像这一切： [http ://www.jquery4u.com/plugins/10-color-pickers-plugin/#.UHK6XU1mKa8](http://www.jquery4u.com/plugins/10-color-pickers-plugin/#.UHK6XU1mKa8)

当您可以对图像中任何像素的颜色进行采样时，我想要一个像 Photoshop 中的工具。

我正在为 html + css 页面的 jquery 中寻找这样的工具。

有人知道这样的事情吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:05:06.937

这项任务并不像看起来那么困难。甚至你可以自己实现它。为此，您应该使用该`<canvas>`元素（它有可能获取像素数据）。

首先，您可以截取 HTML 内容并将其传输到`<canvas>`. 为此，您可以使用**[html2canvas](http://html2canvas.hertzen.com/)**库。

然后，您应该使用`<canvas>`数据来获取颜色。这是一个简短的解决方案：

```
var img = new Image(),
    cbox = $("div"),
    canvas = $("canvas"),
    context = canvas.get(0).getContext("2d");

img.src = "/img/logo.png";
context.drawImage(img, 0, 0);

canvas.on("mousemove", function(e) {
    var data = context.getImageData(e.offsetX, e.offsetY, 1, 1).data,
        arr = $.makeArray(data);

    cbox.css("background-color", "rgba(" + arr.join(",") + ")");
}); 
```

**​演示：http:** [//jsfiddle.net/Fd3pZ/](http://jsfiddle.net/Fd3pZ/)

但是，您应该考虑到提供的解决方案仅适用于支持CSS 颜色模式的浏览器（`<canvas>`尽管可以使用）。`rgba()``rgb()`

* * *

这是嵌入**html2canvas**库后的完整解决方案。

```
$("body").on("mousemove", "canvas", function(e) {
    var data = this.getContext("2d").getImageData(e.offsetX, e.offsetY, 1, 1).data,
        arr = $.makeArray(data);

    $("#color").css("background-color", "rgba(" + arr.join(",") + ")");
});

$("#content").html2canvas();​ 
```

**演示：http:** [//jsfiddle.net/Fd3pZ/1/](http://jsfiddle.net/Fd3pZ/1/)

# php - 在会话超时和浏览器关闭的情况下记录用户的注销时间

> ID：12781040
> 
> 赞同：-1
> 
> 时间：2012-10-08T11:43:06.443
> 
> 标签：php, mysql, session, browser, session-timeout

> **可能重复：**
> [定时自动注销和浏览器关闭](https://stackoverflow.com/questions/6312478/timed-auto-logout-and-browser-close)

我将网站的用户使用情况存储在 mysql 表中，并且我能够在登录时使用插入查询来捕获和存储登录时间，如果用户选择通过注销，我也会捕获注销时间注销按钮。

但是如果用户只是关闭浏览器，那么我该如何触发注销时间的查询。

到目前为止我得到的是这个，但是有了这个我可以解决会话超时问题，但不能解决“浏览器关闭”

```
if (isset($_SESSION['LAST_ACTIVITY']) && (time() - $_SESSION['LAST_ACTIVITY'] > 1800)) 

   {

    // last request was more than 30 minates ago
      session_unset();     // unset $_SESSION variable for the runtime 
      session_destroy();   // destroy session data in storage

   }

  $_SESSION['LAST_ACTIVITY'] = time(); // update last activity time stamp 
```

请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T11:53:38.623

没有可靠的方法可以知道用户是否关闭了浏览器或从您的站点导航到其他地方 - 这是因为 HTTP 的无状态特性，这意味着一旦下载内容，服务器和浏览器（大部分）。

您可能会使用一些 ajax 请求来“ping”您的服务器 - 一旦 ping 下降，您可以假设他们已经关闭了您网站的所有页面。这很糟糕，因为它无用地增加了网络流量，并且意味着您的服务器将处理更多的请求而没有真正的功能增益。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T12:00:44.490

`beforeunload`使用浏览器事件可以减少一种资源使用和更少的中继过程。

在浏览器事件上向服务器发送 ajax 请求 `beforeunload`并插入用户注销时间。

[SLAKS](https://stackoverflow.com/users/34397/slaks)关于[如何捕获浏览器窗口关闭事件的](https://stackoverflow.com/questions/1631959/browser-window-close-event)一个很好的答案？** 是

> 每当用户出于任何原因离开您的页面时，都会触发该`beforeunload`事件。
> 
> 例如，如果用户提交表单、单击链接、关闭窗口（或选项卡）或使用地址栏、搜索框或书签进入新页面，它将被触发。
> 
> 您可以使用以下代码排除表单提交和超链接（其他框架除外）：
> 
> ```
> var inFormOrLink;
> $('a').live('click', function() { inFormOrLink = true; });
> $('form').bind('submit', function() { inFormOrLink = true; });
> 
> $(window).bind("beforeunload", function() { 
>     return inFormOrLink || confirm("Do you really want to close?"); 
> }) 
> ```
> 
> *该`live`方法不适用于`submit`事件，因此如果您添加一个新表单，您还需要将处理程序绑定到它。请注意，如果不同的事件处理程序取消提交或导航，如果稍后实际关闭窗口，您将丢失确认提示。您可以通过在提交和点击事件中记录时间来解决这个问题，并检查是否在`beforeunload`几秒钟后发生。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T12:28:41.537

您无法跟踪浏览器的关闭。您可以跟踪选项卡的弹出或关闭。

你不能依赖`beforeunload`。我认为它与浏览器不兼容。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-08T11:49:44.943

这是我测试过的，当浏览器关闭时它对我有用

```
session_start();
    if (!isset($_SESSION['LAST_ACTIVITY'])) {
        // initiate value
        $_SESSION['LAST_ACTIVITY'] = time();
    }
    if (time() - $_SESSION['LAST_ACTIVITY'] > 1800) {
        // last activity is more than 10 minutes ago
        session_destroy();
    } else {
        // update last activity timestamp
        $_SESSION['LAST_ACTIVITY'] = time();
    } 
```

在这里，我存储了用户每个活动的时间戳。当那个时间超过 30 分钟前，我正在注销（销毁会话）。

不确定您的应用程序是否允许这样做，但据我所知，这是我过去在这类场景中实现的方式

查看评论后编辑

关闭浏览器不会触发对服务器的任何请求，因此您无法知道用户关闭了他的浏览器。您可以使用侦听器来让会话超时，然后在发生这种情况时存储当前时间

当浏览器关闭时，您可以通过对 window.onbeforeunload 或 window.onunload 进行 ajax 调用来与服务器通信

我上面的解决方案将允许您在某些活动后时间到期时自动注销用户

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-08T11:47:30.247

当用户关闭浏览器时，会话无论如何都会被销毁。所以你不必破坏它。

# iphone - cordova 如何为不同平台进行 API 调用

> ID：12781044
> 
> 赞同：1
> 
> 时间：2012-10-08T11:43:23.900
> 
> 标签：iphone, cordova

我是移动应用开发 Phone-Gap 框架的初学者。我知道我们可以使用 Cordova 为每个平台从 JavaScript 执行本机 API 调用。

我想知道如何使用 JavaScript 通过 Cordova 执行本机调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:48:33.583

您是在问 PhoneGap 一般是如何工作的吗？如果是这样，请记住 Cordova（开源项目）是开源的。您可以查看代码并亲自查看。通常，cordova.js 文件在您的 HTML/JS 代码和与本机设备交互的插件之间提供了一个接口。因此，例如在 iPhone 上，通用联系人 API 与 iOS 特定插件交互以获取您的联系人数据，而在 Android 上，相同的 JS API 与 Android 原生插件交互。基本思想是 - 提供相同的 JS 钩子，但与设备特定的代码集对话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:50:44.187

应用程序在容器中运行，它可以将 javascript 调用“翻译”为本机调用。

应用程序与其 Cordova 容器“对话”，并且容器将本机调用发送到设备的操作系统（iOS、Android 等）

# c# - 当 null 值返回为 Nullable 时，“指定的强制转换无效”

> ID：12781045
> 
> 赞同：1
> 
> 时间：2012-10-08T11:43:29.420
> 
> 标签：c#, .net, sql-server, linq-to-sql

在我的 SQL 数据库中，我有以下视图：

```
CREATE VIEW MyView AS
(SELECT ChangeType FROM MyTable) UNION ALL
(SELECT NULL AS ChangeType FROM MyTable) 
```

哪里`ChangeType`有类型`TINYINT`。然后在我的 C# 代码中，我有以下类：

```
[Table(Name = "MyView")]
public class MyView
{
    [Column]
    public Nullable<int> ChangeType;
} 
```

使用如下：

```
var table = dataContext.GetTable<MyView>();
var elements = table.ToArray(); 
```

当这段代码运行时，我得到以下异常：

```
[InvalidCastException: Specified cast is not valid.]
System.Data.SqlClient.SqlBuffer.get_Int32() +6393860
Read_MyView(ObjectMaterializer`1 ) +3404
System.Data.Linq.SqlClient.ObjectReader`2.MoveNext() +42
System.Linq.Buffer`1..ctor(IEnumerable`1 source) +488
System.Linq.Enumerable.ToArray(IEnumerable`1 source) +104
MyCodeHere 
```

如果我将第二部分更改`UNION`如下：

```
(SELECT CONVERT(INT,NULL) AS ChangeType FROM MyTable) 
```

相同的代码运行得很好。

为什么那里的“演员无效”？为什么不将`TINYINT`just 代替阅读`int`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T11:49:40.437

> 为什么不只读取 TINYINT 来代替 int？

因为`TINYINT`映射到`short`或`sbyte`。

编辑：[查了一下](http://msdn.microsoft.com/en-us/library/ms187745%28v=sql.105%29.aspx)，它是一个无符号字节，所以使用`byte`.

```
[Column]
public Nullable<byte> ChangeType; 
```

您的堆栈跟踪显示 Linq2Sql 映射器调用`.get_Int32()`. 假设这类似于[`SqlDataReader.GetInt32()`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getint32.aspx)then 这意味着它将尝试读取 32 位值，不应用任何转换。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T11:50:15.967

尝试使用

```
[Column]
    public Nullable<Int32> ChangeType; //for int type
    public Nullable<Int16> ChangeType; //for smallint type 
```

# c++ - 采用 Enum 参数的工厂函数

> ID：12781047
> 
> 赞同：1
> 
> 时间：2012-10-08T11:43:31.317
> 
> 标签：c++

如何避免并非所有控制路径都在此处返回 Container 的事实：

```
 enum Type {Int, String};

        Container containerFactory(Type type)
        {
            switch(type)
            {
            case Int:
                return Container (std::vector<int>());
            case String: 
                return Container (std::vector<std::string>());
            }
        } 
```

**更新：** 我在想我可以在这里抛出一个异常，但我不能对它进行单元测试，因为不可能将无效的类型传递给函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T11:54:00.783

我倾向于`assert()`在底部添加一个：

```
Container containerFactory(Type type)
{
    // ...
    assert( !"Unreachable code hit!" );
    return Container();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T11:52:52.190

显然，传递一个无效值是一个编程错误。在“我的世界”/rulebook/whatever 中，编程错误会导致断言失败，而不是异常。

编辑：出于这个原因，我实际上至少有两个主要的断言语句：一个在发布版本中被删除，另一个没有。大多数最终会留在代码中，以防触发错误，但有时断言可能过于昂贵，不值得在发布版本中使用。

如果您的编译器无法将断言识别为“不会返回的东西”，您可以返回任何您想要关闭它的东西。除非您想向调用接口添加错误检查，否则无论如何都没有“良好的回报”，因为您不知道调用者希望从他的“759843682”未初始化请求中获得什么类型的容器:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T11:52:50.737

要么`throw`，默认返回其中一种`Enum`类型，要么返回一个`null_ptr`.

# xpages - 对具有重复数字的文档集合进行排序

> ID：12781049
> 
> 赞同：0
> 
> 时间：2012-10-08T11:43:33.913
> 
> 标签：xpages, xpages-ssjs

我有一个带有重复编号（1,1,1,1,2,2,2,2,3,4,5 等）的数字字段，它定义了数据在视图中的位置。我想在执行 database.search 时保留这种排序或对数据进行排序，这将返回一个 NotesDocumentCollection。

Ulrick Krause 发布了使用 Treemap 的解决方案，但 Treemap 不允许重复：[http ://openntf.org/XSnippets.nsf/snippet.xsp?id=sort-notesdocumentcollection-by-itemname](http://openntf.org/XSnippets.nsf/snippet.xsp?id=sort-notesdocumentcollection-by-itemname)

非常感谢服务器端 JS 中的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:59:23.467

您可以使用 Vector 而不是仅添加文档。像这样的东西：

```
var tm:java.util.TreeMap = new java.util.TreeMap();

while (doc != null) {
  var v:java.util.Vector;
  if (tm.containsKey(doc.getItemValueString(iName))) {
     v = tm.get(doc.getItemValueString(iName));
  }else{
     v = new java.util.Vector();
  }
  v.add(doc);
  tm.put(doc.getItemValueString(iName), v);       

  doc = col.getNextDocument(doc);
} 
```

然后，您必须迭代 Map 和包含的 Vectors 才能对结果进行排序。

**编辑：**

这就是您创建结果向量的方式：

```
var rl:java.util.Vector = new java.util.Vector();  
var tCol:java.util.Collection = tm.values();
var tIt:java.util.Iterator  = tCol.iterator();

while (tIt.hasNext()) {
    v = tIt.next();
    for( var i=0; i<v.size(); i++ )
       rl.add( v.get(i) );
}

return rl; 
```

# salesforce - 定期执行 Apex 代码还是根据时间触发？

> ID：12781050
> 
> 赞同：1
> 
> 时间：2012-10-08T11:43:44.133
> 
> 标签：salesforce, apex-code

我正在构建一个时间记录应用程序，用于记录用户在项目中花费的时间。

不，我们必须开发一项功能来检查某个人是否接近特定项目的最长时间，以便 Salesforce 可以通知项目经理。

起初我想从外部信息中汇集这些信息，但是......如果有一种方法可以在 salesforce 中每小时执行某项任务，那么这可能是最好的解决方案。

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T22:35:44.207

您正在寻找的是[预定的顶点](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_scheduler.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T23:07:16.153

是的，预定 Apex 是您正在寻找的工具。这里有一些示例代码可以帮助您入门：

```
global with sharing class YourScheduleClass implements Schedulable
{
    public static String CRON_EXP = '0 0 0-23 * * ?';

    global void execute(SchedulableContext ctx) 
    {
        // Usually best to call another class from here rather than implementing
        // logic directly in the schedule class
    }

    // Just to show how it's called...
    static testMethod void testExecute()
    {
        Test.startTest();
        String tmpId = System.schedule('ScheduleTest', YourScheduleClass.CRON_EXP, new YourScheduleClass());
        Test.stopTest();
    }
} 
```

# c# - C#中的文本字段数组

> ID：12781056
> 
> 赞同：2
> 
> 时间：2012-10-08T11:44:04.927
> 
> 标签：c#, arrays, text

是否可以在中使用文本字段、按钮和其他元素的数组`C#`？

例如，我有 25 个文本字段，我不想将它们命名为 txt1、txt2 等，而是使用 txt[i=1,25] 形式的内容。

我记得在`VB 6.0.`

如果不可能，有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T11:46:54.100

```
 List<TextBox> list = new List<TextBox>();
  for (int i = 0; i < 10; i++)
  {
  list.Add(new TextBox(){ID ="txtBox" +i};
  Form.Controls.Add(list[i]); // add this line if you want to actually display the textboxes on your page.
  } 
```

上面的代码片段将向您的集合中添加 10 个文本框，每个文本框都有自己的 ID。

你当然可以用数组做同样的事情，但我认为列表更灵活。除了制作文本框列表，您还可以制作控件列表。就像是：

`List<Control> x = new List<Control>();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:48:53.323

干得好，

```
 List<TextBox> list = new List<TextBox>();
 for (int i = 0; i < 25; i++)
 {
     list.Add(new TextBox(){ID ="txtBox" +i};
 } 
```

**注意：**您可以使用任何东西代替`TextBox`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T11:49:09.310

这是一个例子：

```
TextBox[] textboxes = new TextBox[n];
for (int i = 0; i < n; i++)
{
   textboxes[i] = new TextBox();
   textboxes[i].Name = string.Format("txtBox{0}", i);
} 
```

# ruby-on-rails - Ruby on Rails by Michael Hartl 第 9.41 章

> ID：12781057
> 
> 赞同：0
> 
> 时间：2012-10-08T11:44:09.783
> 
> 标签：ruby-on-rails

我正在使用 Michael Hartl 的教程。当我运行测试时，我收到此错误：

```
 1) Authentication authorization for non-signed-in users when attempting to visit a   
protected page as non-admin user submitting a DELETE request to the Users#destroy action
Failure/Error: specify { response.should redirect_to(root_path) } 
Expected response to be a redirect to <http://www.example.com/> but
was a redirect to <http://www.example.com/users>
# ./spec/requests/authentication_pages_spec.rb:81:in `block (7 levels)
in <top required)>' 
```

这是我的 authentication_pages_spec.rb。代码可能与教程示例中显示的略有不同。这些变化对于通过最近的测试是必要的。到目前为止，一切都很完美。

```
require 'spec_helper'

describe "Authentication" do
  let(:user) { FactoryGirl.create(:user) } 
    subject { page }

  describe "signin page" do
    before { visit signin_path }

    it { should have_selector('h1', text: 'Sign in') }
    it { should have_selector('title', text: 'Sign in') }
  end

  describe "signin" do

    before { visit signin_path } 

    describe "with invalid information" do
      before { click_button "Sign in" }

      it { should have_selector('title', text: 'Sign in') }
      it { should have_selector('div.alert.alert-error', text: 'Invalid') }

      describe "after visiting another page" do
          before { click_link "Home"}
          it { should have_selector('div.alert.alert-error') }
      end
    end

      describe "with valid information" do     
      let(:user) { FactoryGirl.create(:user) } 
      before do
        fill_in "Email",    with: user.email
        fill_in "Password", with: user.password
        click_button "Sign in"
      end

      it { should have_selector('title',    text: user.name) }

      it { should have_link('Users',        href: users_path) }
      it { should have_link('Profile',      href: user_path(user)) }
      it { should have_link('Settings',     href: edit_user_path(user)) }
      it { should have_link('Sign out',     href: signout_path) }

      it { should_not have_link('Sign in',  href: signin_path) } 

      describe "followed by signout" do
        before { click_link "Sign out" }
        it { should have_link('Sign in') }
      end
    end
  end

  describe "authorization" do

    describe "for non-signed-in users" do
      let(:user) { FactoryGirl.create(:user) }

      describe "when attempting to visit a protected page" do
        before do
          visit edit_user_path(user)
          fill_in "Email",    with: user.email
          fill_in "Password", with: user.password
          click_button "Sign in"
        end

        describe "after signing in" do

          it "should render the desired protected page" do
            page.should have_selector('title', text: 'Edit user')
          end          
       end
        describe "as non-admin user" do
          let(:user)  { FactoryGirl.create(:user) }
          let(:non_admin) { FactoryGirl.create(:user) }

          before { sign_in non_admin }

          describe "submitting a DELETE request to the Users#destroy action" do
            before { delete user_path(user) }
            specify { response.should redirect_to(root_path) }
          end
        end        
      end
    end

    describe "in the Users controller" do

      describe "visiting the edit page" do
        before { visit edit_user_path(user) }
        it { should have_selector('title', text: "Sign in") }
      end

      describe "submitting to the update action" do
        before { put user_path(user) }
        specify { response.should redirect_to(signin_path) }
      end

      describe "visiting the user index" do
        before {visit users_path }
        it { should have_selector('title', text: 'Sign in') }
      end
    end

     describe "as wrong user" do
       let(:user) { FactoryGirl.create(:user) }
       let(:wrong_user) { FactoryGirl.create(:user, email: "wrong@example.com") }
       before { sign_in user }

       describe "visiting User#edit page" do
         before { visit edit_user_path(wrong_user) }
         it { should_not have_selector('title', text: full_title('Edit user')) }
       end

       describe "submitting a PUT request to the User#update action" do
         before { put user_path(wrong_user) }
         specify { response.should redirect_to(root_path) } 
       end
    end    
  end
end 
```

有人知道吗？感谢您的帮助和兴趣！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T12:09:24.147

在您的 users_controller#destroy 中，您已经重定向到`users_path`而不是`root_path`（您期望的）。你能展示你的#destroy 动作吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-28T19:13:35.083

我刚刚浏览了这一章并遇到了同样的问题，但我认为接受的答案不正确，原因如下：

用户控制器中的销毁操作***应该***重定向到 users_path，而不是 root_path，因为我们希望管理员在删除用户后返回到用户列表，并且我们希望重定向任何试图发出 DELETE 的非管理员请求返回主页。

重新阅读该部分后，我意识到我在用户控制器中错过了之前的过滤器：

```
before_action :admin_user, only: :destroy 
```

添加它使测试通过。

# c# - 如何知道键盘在文本输入上是否处于活动状态

> ID：12781059
> 
> 赞同：1
> 
> 时间：2012-10-08T11:44:23.210
> 
> 标签：c#, .net, winapi, hook, keyboard-hook

我有一个像屏幕键盘一样的应用程序，我需要它知道是否有键盘光标（插入符号）在任何地方处于活动状态，因此键盘将设置为活动状态。

我已经搜索了键盘挂钩和 winapi，但找不到正确的使用方法。

为了简化我的问题，如果用户可以按下真实键盘并在计算机上打印文本，我需要激活我的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T05:54:18.567

通过搜索插入符号位置很容易，因为它应该大于 0

```
 GUITHREADINFO lpgui = new GUITHREADINFO();
    IntPtr fore = GetForegroundWindow();
    uint tpid = GetWindowThreadProcessId(fore, IntPtr.Zero);
    lpgui.cbSize = Marshal.SizeOf(lpgui.GetType());
    bool flag = GetGUIThreadInfo(tpid, out lpgui);
    WINDOWINFO pwi = new WINDOWINFO();
    pwi.cbSize = (uint)Marshal.SizeOf(pwi.GetType());
    GetWindowInfo((IntPtr)lpgui.hwndCaret, ref pwi);

    if (flag)
    {
        if (!(lpgui.rcCaret.Location.X == 0 && lpgui.rcCaret.Location.Y == 0))
        {

            //TODO

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:36:08.303

定义一个`DLLImport`，以便您可以获得当前聚焦的窗口句柄：

```
[DllImport("user32.dll")]
static extern IntPtr GetFocus(); 
```

现在，如果键盘有焦点，你可以运行它来获取窗口句柄：

```
public static bool ControlIsFocused() 
{
    // To get hold of the focused control: 
    IntPtr focusedHandle = GetFocus(); 
    return focusedHandle != IntPtr.Zero;
} 
```

所以，除非它是一个允许键盘焦点的控件，否则这个方法应该返回`IntPtr.Zero`。

这是[Windows API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646294%28v=vs.85%29.aspx)的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:21:34.210

一种解决方法，但如果您可以在您的环境中订阅 OnFocusChange 事件，那么您可以检查新获得焦点的控件类型。根据它是否为“可键盘输入”类型（或派生自“可键盘输入”类型），您可以显示或隐藏屏幕键盘。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T12:30:16.343

这是关于制作自定义屏幕键盘的 MSDN 文章：http: [//msdn.microsoft.com/en-us/magazine/hh708756.aspx](http://msdn.microsoft.com/en-us/magazine/hh708756.aspx)

# qt - 只读 QT 表格

> ID：12781062
> 
> 赞同：0
> 
> 时间：2012-10-08T11:44:51.667
> 
> 标签：qt, widget, readonly

我希望将 QT 表单设为只读，但未禁用。我想要实现的是用户仍然能够使用它上面的控件，例如查看组合框中有哪些元素，或者滚动到列表框的末尾，但不应该能够更改这些组件的值。由于禁用的表单不​​允许任何交互，并且我在 API 中没有找到任何与将表单设置为只读相关的内容，我想知道这个问题有什么可能的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:54:16.217

做到这一点的唯一方法是连接到有`currentIndexChanged`问题的 QComboBox 的信号，并防止它改变你想要的样子。如果这是你想做的很多事情，你可以考虑将 QComboBox 子类化；但是没有什么可以让您在默认框架中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T10:16:50.983

我选择了在我的 Form 类中有一个特殊方法的方法：

*   使文本编辑只读
*   组合/检查/列表，禁用其他控件
*   允许导航的控件已启用

# android - android相机图像压缩

> ID：12781064
> 
> 赞同：1
> 
> 时间：2012-10-08T11:44:59.293
> 
> 标签：android, android-camera

我正在制作一个相机应用程序。而且我必须在相机点击到服务器后保存图像，因为捕获的图像的大小总是非常大（以 Mb 为单位）。所以我总是很难将大尺寸的图像保存在服务器上。保存之前有没有压缩图像的。？

而且我只能使用android原生相机

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T11:49:46.430

在将位图实际上传到服务器之前，您需要调整其大小。此代码返回调整大小的位图。将位图减小到所需的宽度和高度 - 这将导致图像文件更小。

```
public static Bitmap getBitmapImages(final String imagePath, final int requiredWidth, final int requiredHeight)
{
    System.out.println(" --- image_path in getBitmapForCameraImages --- "+imagePath+" - reqWidth & reqHeight "+requiredWidth+" "+requiredHeight);
    Bitmap bitmap = null;
    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inScaled = true;
    options.inJustDecodeBounds = true;

    // First decode with inJustDecodeBounds=true to check dimensions
    bitmap = BitmapFactory.decodeFile(imagePath, options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, requiredWidth, requiredHeight);

    options.inJustDecodeBounds = false;

    // Decode bitmap with inSampleSize set
    bitmap = BitmapFactory.decodeFile(imagePath, options);

    return bitmap;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:01:40.967

另一种方法是直接制作较小的图片。这样做的好处是您使用的内存更少，但您可能需要在应用程序的另一部分有大图景。

这可以按如下方式完成：

```
public void surfaceChanged(SurfaceHolder holder, int format, int width, int height){
...
   Camera.Parameters mParameters = mCamera.getParameters();
   List<Size> sizes = mParameters.getSupportedPictureSizes();
   Size optimalSize = getOptimalSize(sizes, width, height);
   if (optimalSize != null && !mParameters.getPictureSize().equals(optimalSize))
        mParameters.setPictureSize(optimalSize.width, optimalSize.height);
...
} 
```

要选择最佳尺寸，您可以使用任何您想要的标准。我试图使其尽可能接近屏幕尺寸：

```
 private Size getOptimalSize(List<Size> sizes, int w, int h){

    final double ASPECT_TOLERANCE = 0.05;
    double targetRatio = (double) w / h;
    if (sizes == null)
        return null;

    Size optimalSize = null;
    double minDiff = Double.MAX_VALUE;

    int targetHeight = h;

    for (Size size: sizes)
    {
        double ratio = (double) size.width / size.height;
        if (Math.abs(ratio - targetRatio) > ASPECT_TOLERANCE)
            continue;
        if (Math.abs(size.height - targetHeight) < minDiff)
        {
            optimalSize = size;
            minDiff = Math.abs(size.height - targetHeight);
        }
    }

    if (optimalSize == null)
    {
        minDiff = Double.MAX_VALUE;
        for (Size size: sizes)
        {
            if (Math.abs(size.height - targetHeight) < minDiff)
            {
                optimalSize = size;
                minDiff = Math.abs(size.height - targetHeight);
            }
        }
    }

    return optimalSize;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T11:53:28.670

尝试这个

```
 Bitmap bmp = (Bitmap) data.getExtras().get("data");

            ByteArrayOutputStream stream = new ByteArrayOutputStream();
            bmp.compress(Bitmap.CompressFormat.PNG, 100, stream); 
```

# android - CONTENT_FILTER_URI 和 CONTENT_URI 有什么区别？

> ID：12781069
> 
> 赞同：6
> 
> 时间：2012-10-08T11:45:23.510
> 
> 标签：android

android中这两个**Contacts.CONTENT_FILTER_URI**和 **Contacts.CONTENT_URI**有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:48:00.090

你试过在网上找吗？它在这里解释：http: [//developer.android.com/reference/android/provider/ContactsContract.Contacts.html](http://developer.android.com/reference/android/provider/ContactsContract.Contacts.html)

# android - AChartEngine，动态线图，崩溃

> ID：12781073
> 
> 赞同：2
> 
> 时间：2012-10-08T11:45:37.923
> 
> 标签：android, dynamic, line, achartengine

我是android编程应用程序的新手。我正在尝试使用 achartengine 绘制实时数据。问题是应用程序在一段时间后崩溃。问题是重绘方法并向图形添加新数据，应该是线程问题。如何控制线程，或找到更好的解决方案来绘制图形。如果你能帮助我，那就太好了。

```
public class Plot2Activity extends Activity {

private static GraphicalView view;
private LineGraph line = new LineGraph();
private static Thread thread;
private static int x=0;
private static boolean mrepainted = false;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    view = line.getView(this);
    setContentView(view);     

    thread = new Thread() {
        public void run() {
            /*for (int i = 0; i < 1000; i++) {
                try {
                    Thread.sleep(50);
                } catch (InterruptedException e) {

                    e.printStackTrace();
                }
                Point p = MockData.getDataFromReceiver(x++); // new data
                line.addNewPoints(p); // add it to our graph
                view.repaint();
            }*/

            while (true) {
                try {
                    Thread.sleep(50);
                } catch (InterruptedException e) {

                    e.printStackTrace();
                }
                Point p = MockData.getDataFromReceiver(x++); // new data
                line.addNewPoints(p); // add it to our graph 
```

// Log.e("PLOT", "PLOT:"+x); view.repaint();

```
 }

        }
    };
    thread.start();

}

@Override
protected void onStart() {
    super.onStart();
    //view = line.getView(this);
    //setContentView(view);        

}

@Override
protected void onResume() {
    super.onResume();
} 
```

}

日志猫：

> 10-08 13:23:22.012：E/AndroidRuntime(9267)：致命异常：主要 10-08 13:23:22.012：E/AndroidRuntime(9267)：java.util.ConcurrentModificationException 10-08 13:23:22.012： E/AndroidRuntime(9267): 在 java.util.TreeMap$MapIterator.stepForward(TreeMap.java:883) 10-08 13:23:22.012: E/AndroidRuntime(9267): 在 java.util.TreeMap$BoundedMap$BoundedIterator .stepForward(TreeMap.java:1485) 10-08 13:23:22.012: E/AndroidRuntime(9267): 在 java.util.TreeMap$BoundedMap$BoundedEntrySet$1.next(TreeMap.java:1513) 10-08 13: 23:22.012: E/AndroidRuntime(9267): at java.util.TreeMap$BoundedMap$BoundedEntrySet$1.next(TreeMap.java:1511) 10-08 13:23:22.012: E/AndroidRuntime(9267): at org. achartengine.chart.XYChart.draw(XYChart.java:250) 10-08 13:23:22.012: E/AndroidRuntime(9267): at org.achartengine.GraphicalView。onDraw(GraphicalView.java:166) 10-08 13:23:22.012: E/AndroidRuntime(9267): 在 android.view.View.draw(View.java:13458) 10-08 13:23:22.012: E/ AndroidRuntime(9267): 在 android.view.View.draw(View.java:13342) 10-08 13:23:22.012: E/AndroidRuntime(9267): 在 android.view.ViewGroup.drawChild(ViewGroup.java:2929 ) 10-08 13:23:22.012: E/AndroidRuntime(9267): 在 android.view.ViewGroup.dispatchDraw(ViewGroup.java:2799) 10-08 13:23:22.012: E/AndroidRuntime(9267): 在 android .view.View.draw(View.java:13340) 10-08 13:23:22.012: E/AndroidRuntime(9267): 在 android.view.ViewGroup.drawChild(ViewGroup.java:2929) 10-08 13:23 :22.012: E/AndroidRuntime(9267): 在 android.view.ViewGroup.dispatchDraw(ViewGroup.java:2799) 10-08 13:23:22.012: E/AndroidRuntime(9267): 在 android.view.View.draw( View.java:13340) 10-08 13:23:22。012: E/AndroidRuntime(9267): 在 android.view.ViewGroup.drawChild(ViewGroup.java:2929) 10-08 13:23:22.012: E/AndroidRuntime(9267): 在 android.view.ViewGroup.dispatchDraw(ViewGroup .java:2799) 10-08 13:23:22.012: E/AndroidRuntime(9267): 在 android.view.View.draw(View.java:13461) 10-08 13:23:22.012: E/AndroidRuntime(9267) ): 在 android.widget.FrameLayout.draw(FrameLayout.java:467) 10-08 13:23:22.012: E/AndroidRuntime(9267): 在 com.android.internal.policy.impl.PhoneWindow$DecorView.draw( PhoneWindow.java:2183) 10-08 13:23:22.012: E/AndroidRuntime(9267): 在 android.view.ViewRootImpl.drawSoftware(ViewRootImpl.java:2256) 10-08 13:23:22.012: E/AndroidRuntime( 9267): 在 android.view.ViewRootImpl.draw(ViewRootImpl.java:2151) 10-08 13:23:22.012: E/AndroidRuntime(9267): 在 android.view.ViewRootImpl。performDraw(ViewRootImpl.java:2019) 10-08 13:23:22.012: E/AndroidRuntime(9267): 在 android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1830) 10-08 13:23:22.012: E/ AndroidRuntime(9267): 在 android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:998) 10-08 13:23:22.012: E/AndroidRuntime(9267): 在 android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java :4212) 10-08 13:23:22.012: E/AndroidRuntime(9267): 在 android.view.Choreographer$CallbackRecord.run(Choreographer.java:725) 10-08 13:23:22.012: E/AndroidRuntime(9267) ): 在 android.view.Choreographer.doCallbacks(Choreographer.java:555) 10-08 13:23:22.012: E/AndroidRuntime(9267): 在 android.view.Choreographer.doFrame(Choreographer.java:525) 10- 08 13:23:22.012：E/AndroidRuntime（9267）：在 android.view。Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711) 10-08 13:23:22.012: E/AndroidRuntime(9267): 在 android.os.Handler.handleCallback(Handler.java:615) 10-08 13:23: 22.012: E/AndroidRuntime(9267): 在 android.os.Handler.dispatchMessage(Handler.java:92) 10-08 13:23:22.012: E/AndroidRuntime(9267): 在 android.os.Looper.loop(Looper .java:137) 10-08 13:23:22.012: E/AndroidRuntime(9267): 在 android.app.ActivityThread.main(ActivityThread.java:4745) 10-08 13:23:22.012: E/AndroidRuntime(9267) ): 在 java.lang.reflect.Method.invokeNative(Native Method) 10-08 13:23:22.012: E/AndroidRuntime(9267): 在 java.lang.reflect.Method.invoke(Method.java:511) 10 -08 13:23:22.012: E/AndroidRuntime(9267): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786) 10-08 13:23:22.012:E/AndroidRuntime(9267): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553) 10-08 13:23:22.012: E/AndroidRuntime(9267): 在 dalvik.system.NativeStart.main （本机方法）

# php - Javascript 元素 .value 没有像我预期的那样改变

> ID：12781081
> 
> 赞同：2
> 
> 时间：2012-10-08T11:46:11.230
> 
> 标签：php, javascript, function

我是该网站的长期访问者，但第一次发帖。

我是 JavaScript 新手，并且已尽我所能制作一个脚本，该脚本将根据所选参数动态更新表单。当用户选择（在这种情况下）零件编号时，他们可以单击“更新”按钮，该按钮将相应地更改其他七个字段。万一出现错误，我已经创建了一个重置​​按钮来重置零件编号字段并且（这是它损坏的地方）然后如果您再次单击“更新”按钮，其他七个字段也应该重置。我希望这是有道理的。大约在零件编号列表的一半时，我尝试了该功能并且效果很好，但是在某个地方它坏了。现在唯一重置它应该的方式的部分是“oempma.value”。

无论如何，对不起，冗长的帖子，我会继续下去。这是我的表单代码（new.php）：

这是调用该函数的 dynamicupdate.js 文件：

```
function dynamicupdate(form, prefix, part_number, flight_control, lat_position, long_position, vert_position, location, material, oempma) 
    {
        if(form)
            {
                if(part_number.value === "C6CF1124-1")
                    {
                    flight_control.value = "Aileron";
                    lat_position.value = "Left";
                    long_position.value = "Fwd";
                    vert_position.value = "N/A";
                    location.value = "Wing";
                    material.value = "Carbon Steel";                    
                }

                if(part_number.value === "C6CW1031-1")
                    {
                    flight_control.value = "Aileron";
                    lat_position.value = "";
                    long_position.value = "N/A";
                    vert_position.value = "";
                    location.value = "Wing";
                    material.value = "Carbon Steel";                    
                    }
                        if (part_number.value === "C6CW1031-1" && lat_position.value === "" && vert_position.value === "")
                        {
                        alert ("You must manually enter the \"Lat Position\" and \"Vert Position\" for this cable.");
                        }

            }

        else 
            {
            flight_control.value = "";
            lat_position.value = "";
            long_position.value = "";
            vert_position.value = "";
            location.value = "";
            material.value = "";
            }

        if(prefix.value === "PDM" || prefix.value === "TB" || prefix.value === "JNL")
            {
            oempma.value = "PMA";
            }
        else if(part_number.value === "")
            {
            oempma.value = "";
            }
        else
            {
            oempma.value = "OEM";
            }

        return;
    } 
```

这个函数也位于 dynamicupdate.js 文件中，但由于某种原因，我无法让它留在上面的代码块中。

```
function resetsome(form, prefix, part_number)
    {
    part_number.value = "";
    prefix.value = "";
    } 
```

我已经尝试了几种方法来解决这个问题，包括将一些大块的 .js 文件删除到它曾经工作的地方，以防万一我把事情弄得更糟，但这并没有解决它。我还阅读了大量适用于这种情况的 JavaScript 语言，但我可以看到我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:03:14.270

你的代码有很多问题，不，我不是在考虑长度或代码结构。

首先，如果你不需要一些参数，你不应该在函数中定义它们，如果你定义了它们，你应该使用它们，你在`resetsome`函数中的表单参数是未使用的，应该删除或使用。

其次， 的值`this`是你所在的对象（函数）。例如，试试这个：

```
this.foo = 'bar';
function that()
{
    this.foo = 'loremipsum';
}
that();
alert(this.foo); 
```

你就会明白我的意思。

而不是使用 this 的成员，您应该创建变量并将值存储在那里。我相信如果你这样做，你的代码应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:18:39.020

我想问题是这样的：

```
if(form){/*...*/} 
```

当表单为真时，不会执行重置字段的代码。

试试这个：

```
 function dynamicupdate(form, prefix, part_number, flight_control, lat_position, long_position, vert_position, location, material, oempma) 
    {
      if(!form)return;

        if(part_number.value !== ""){
                if(part_number.value === "C6CF1124-1")
                    {
                    flight_control.value = "Aileron";
                    lat_position.value = "Left";
                    long_position.value = "Fwd";
                    vert_position.value = "N/A";
                    location.value = "Wing";
                    material.value = "Carbon Steel";                    
                }

                if(part_number.value === "C6CW1031-1")
                    {
                    flight_control.value = "Aileron";
                    lat_position.value = "";
                    long_position.value = "N/A";
                    vert_position.value = "";
                    location.value = "Wing";
                    material.value = "Carbon Steel";                    
                    }
                        if (part_number.value === "C6CW1031-1" && lat_position.value === "" && vert_position.value === "")
                        {
                        alert ("You must manually enter the \"Lat Position\" and \"Vert Position\" for this cable.");
                        }

            }

        else {//when part_number.value is empty reset the fields
            flight_control.value = "";
            lat_position.value = "";
            long_position.value = "";
            vert_position.value = "";
            location.value = "";
            material.value = "";
            }

        if(prefix.value === "PDM" || prefix.value === "TB" || prefix.value === "JNL")
            {
            oempma.value = "PMA";
            }
        else if(part_number.value === "")
            {
            oempma.value = "";
            }
        else
            {
            oempma.value = "OEM";
            }

        return;
    } 
```

# gwt - 在 GXT 中设置视口的最小宽度

> ID：12781084
> 
> 赞同：0
> 
> 时间：2012-10-08T11:46:19.647
> 
> 标签：gwt, viewport, gxt

有没有办法可以设置视口的最小宽度？视口应该在这个宽度之外像往常一样工作。我在项目中使用 GXT 2.2.5 和 GWT 2.4。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:19:51.050

像往常一样：设置类似

```
body {
  min-width: 1000px;
} 
```

在您的 CSS 文件中。

如果您使用的是 RootLayoutPanel 或其他绝对定位的东西，则在该容器上设置最小宽度，例如

```
// Java:

  RootLayoutPanel.get().addStyleName("requires-min-width");

// CSS:

  .requires-min-width {
    min-width: 1000px;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:15:02.160

直接取自 GXT 2.2.5 源代码的类级别 javadoc 的第一句；

> 一个 LayoutContainer 填充浏览器窗口并监视窗口大小调整。

因此，您不必设置最小宽度。它将填满浏览器窗口。然后，如果浏览器窗口调整大小，它应该随之调整大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-14T15:03:33.390

我自己也遇到了这个。GWT 2.8 和 GXT 4.0.1

扩展 Viewport 类并覆盖 onWindowResize 和 doLayout 方法如下

```
 Viewport viewport = new Viewport() {

            @Override
            protected void onWindowResize(int width, int height) {
                int minWidthChecked = Math.max(width, MIN_WIDTH);
                int minHeightChecked = Math.max(height, MIN_HEIGHT);

                super.onWindowResize(minWidthChecked, minHeightChecked);
            }

            @Override
            protected void doLayout() {
                Size size = getContainerTarget().getStyleSize();
                size.setWidth(Math.max(size.getWidth(), MIN_WIDTH));
                size.setHeight(Math.max(size.getHeight(), MIN_HEIGHT));
                getContainerTarget().setSize(size);

                super.doLayout();
            }

        }; 
```

这样，实现 RequiresResize 的所有视口子项都将获得正确的宽度和高度。如果页面小于分钟，则需要覆盖 doLayout 以更正初始加载时的大小。

最后确保应用了以下样式

```
html {
   overflow: auto !Important;
}

body {
   min-width: 1024px;
   min-height: 800px;
} 
```

出于某种原因，我认为 GWT 将溢出隐藏添加到 html 中。另一个好主意是使用 GSS 的 @eval 构造来引用 MIN_WIDTH 和 MIN_HEIGHT 的值，就像它在一个地方定义的那样。

# vim - vim 映射不适用于 slimv 插件

> ID：12781085
> 
> 赞同：1
> 
> 时间：2012-10-08T11:46:23.813
> 
> 标签：vim, lisp, read-eval-print-loop, swank, slimv

以下映射位于我的 .vimrc 中，用于在使用 :vsp 创建的垂直拆分窗格和使用 :sp 创建的拆分窗格之间快速导航。

```
" Smart way to move between windows
map <up> <C-w><up>
map <down> <C-w><down>
map <left> <C-w><left>
map <right> <C-w><right> 
```

这似乎不适用于 slimv 插件。当我按下`,c`在水平拆分窗格中打开 REPL`<down>`并且`<up>`不在 REPL 中工作时；但是，`<left>`并按`<right>`预期工作。

从原始窗口中，我可以在所有四个方向上导航并进入 REPL 窗口。来自 REPL，只有`<left>`和`<right>`作品。`<up>`并`<down>`导致在窗口内上下移动光标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T14:12:23.967

Slimv 试图通过设置 Vim 的`wrap`选项来模拟 REPL 缓冲区中的控制台输出。这样，长于`textwidth`将显示在多个屏幕行中的行。Vim 的光标移动键（j、k、<Down>、<Up>）通常通过缓冲行而不是屏幕行来定位光标。Slimv 通过重新定义那些光标键（例如，'k' 到 'gk'，'j' 到 'gj'）来模拟屏幕行光标移动。

您可以`wrap`通过将此行添加到您的`.vimrc`：

`let g:slimv_repl_wrap=0`

这样 <Up> 和 <Down> （以及其他一些）键将不会被重新映射。但是请注意，长线不会被换行，只会显示它们的第一部分，您需要水平滚动屏幕才能查看其余部分。

# cassandra - Cassandra - 重新插入已删除的列

> ID：12781087
> 
> 赞同：2
> 
> 时间：2012-10-08T11:46:27.923
> 
> 标签：cassandra, pelops

我只是在我创建的列族上运行了一些简单的测试（插入和删除）。我观察到，虽然针对行键插入新列，但最近删除的列没有插入。

例如：

rowkey1 :: name1-val1
                 name2-val2

删除name1后，如果我再次尝试插入它，我仍然得到

rowkey1 :: name2-val2 并且不会恢复为 name1-val1、name2-val2。

当我尝试通过我的代码插入它时出现问题（使用 Pelops Java 客户端）以下是我用于插入的代码片段：

```
 Mutator mutator = Pelops.createMutator("poolname");
            Column column = new Column(bufcolname);
            column.setValue(bufcolval);
            column.setTimestamp(new Date().getTime());
            mutator.writeColumn("MyColumnFamily",userId, column);
            mutator.execute(ConsistencyLevel.ONE); 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T17:25:56.783

这很可能是时间戳问题。

如果写入冲突，cassandra 使用时间戳来决定获胜者。在上面的代码中，您使用毫秒设置时间戳，但按照惯例，cassandra 使用微秒为单位的[时间戳](http://wiki.apache.org/cassandra/DataModel)。

> 时间戳可以是任何你喜欢的，但自 1970 年以来的微秒是一个惯例。

因此，您的删除可能使用微秒的时间戳，该时间戳大于您添加的 ms 时间戳，因此添加将始终被删除所掩盖。

# c++ - C++ 库包含矩阵的伪逆？

> ID：12781092
> 
> 赞同：3
> 
> 时间：2012-10-08T11:46:50.987
> 
> 标签：c++, matlab, armadillo, matrix-inverse

我正在寻找一个包含 pinv（MATLAB 中的伪逆矩阵运算）的 C++ 库。我尝试使用 Armadillo，但它缺少多线程调试 DLL(/MDd)，但我的项目需要那种类型的 lib。检查[这个](http://www.fi.muni.cz/~xsvobod2/misc/lapack/)。

如果您可以共享该版本的 lib 或提出替代的轻量级库，我会很高兴。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T11:51:49.793

您可以使用[OpenCV的](http://sourceforge.net/projects/opencvlibrary/files/latest/download?source=files)[cv::invert](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?#invert) 函数来计算矩阵的伪逆。

该库是多线程的，并使用英特尔线程构建模块来加速处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T14:50:13.680

[Armadillo 很](http://arma.sourceforge.net)乐意使用多线程 LAPACK 库。无需使用标准 LAPACK，只需与具有多线程的 LAPACK 版本链接即可。例如，英特尔的[数学内核库 (MKL)](http://software.intel.com/en-us/intel-mkl/)。

# java - Spring DI 的线程安全含义

> ID：12781095
> 
> 赞同：8
> 
> 时间：2012-10-08T11:46:56.963
> 
> 标签：java, spring, dependency-injection, thread-safety

在我设计的示例中，关于 teamMembers 列表对线程安全有什么影响？

我可以依靠`run()`方法看到的列表状态保持一致吗？

假设

1.  该`setATeamMembers`方法只被调用一次，在 spring 创建`ATeamEpisode`bean时

2.  该`init`方法在 #1 之后由 spring (init-method) 调用

3.  `ATeamMember`类是不可变的

    *   我需要申报`teamMembers` `volatile`或类似吗？

    *   我忽略了这种方法还有其他可怕的问题吗？

如果这很明显，或者 rtfm 明显失败，请道歉

谢谢并恭祝安康

埃德

```
package aTeam;

import java.util.ArrayList;
import java.util.List;
import java.util.Random;

public class ATeamEpisode implements Runnable{

    private List<ATeamMember> teamMembers;

    /* DI by spring */
    public void setATeamMembers(List<ATeamMember> teamMembers){
        this.teamMembers = new ArrayList<ATeamMember>(teamMembers);    
    }

    private Thread skirmishThread;

    public synchronized void init(){
        System.out.println("Starting skirmish");
        destroy();
        (skirmishThread = new Thread(this,"SkirmishThread")).start();
    }
    public synchronized void destroy(){
        if (skirmishThread != null){
            skirmishThread.interrupt();
            skirmishThread=null;
        }
    }

    private void firesWildlyIntoTheAir(ATeamMember teamMember){
        System.out.println(teamMember.getName()+" sprays the sky..");
    }

    @Override
    public void run() {
        try {
            Random rnd = new Random();
            while(! Thread.interrupted()){
                firesWildlyIntoTheAir(teamMembers.get(rnd.nextInt(teamMembers.size())));
                Thread.sleep(1000 * rnd.nextInt(5));
            }
        } catch (InterruptedException e) {
            System.out.println("End of skirmish");
            /* edit as per Adam's suggestion */
           // Thread.currentThread().interrupt();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T12:06:25.927

如果，如您所说， setATeamMembers 仅调用一次，并且您的代码的任何其他部分都没有替换此集合，那么将其设置为 volatile 是没有意义的。Volatile 表示一个成员可以被不同的线程**写入。**

考虑到您的代码似乎也没有任何部分正在更新此集合，您可能需要考虑使集合显式*不可修改*，例如使用 Collections.unmodifiableList()。这让您和其他人清楚，该集合不会被修改，并且如果您尝试修改它，则会在您的脸上抛出一个大异常。

Spring 的延迟初始化是，AFAIR，线程安全的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T12:08:29.390

也许。这样的`List`接口不是线程安全的，无论你做什么，它都不能*在消费者端成为线程安全的*。

您需要做的是创建一个线程安全列表（Java 运行时有几个实现）并将其中一个用于`teamMembers`bean。

通过字段访问 bean`teamMembers`不是问题，因为其他线程不会创建新实例，它们会更改 bean 的*状态*（即内部的数据）`teamMembers`。

因此 bean 必须确保对其*内部结构*的更改正确同步。

在您的情况下，您将需要一个特殊的列表实现，它从列表中返回一个随机元素。为什么？因为调用时的值`teamMembers.size()`可能已经改变`teamMembers.get()`。

实现此目的的一种简单方法是在此代码中包装所有方法调用：

```
 synchronized(teamMembers) { ... } 
```

但你必须确定你真的抓住了所有这些。实现这一目标的最简单方法是，正如我上面所说，编写您自己的列表，其中提供您需要的所有特殊方法。这样，您可以`synchronized`根据需要使用锁或方法内部。

# sql - Oracle SQL 与月底的日期差异

> ID：12781102
> 
> 赞同：-1
> 
> 时间：2012-10-08T11:47:59.000
> 
> 标签：sql, oracle

```
select pdat
      ,ac_no
      , bal
 from dummy_table;

PDATE     | AC_NO | BAL  
========================    
14/02/2012| abcd  | 1200    
15/02/2012| abcd  | 1300
27/02/2012| abcd  | 1300 
```

我的问题是如何制作`result set to fetch`

```
PDATE     | AC_NO | BAL  | Difference
=====================================
14/02/2012| abcd  | 1200 |    8
22/02/2012| abcd  | 1300 |    7 
```

第一行的差异是根据 计算的`22/02/2012-14/02/2012`。但是如何计算最后日期与当月结束日期的差异？在这种情况下`29th Feb 2012`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T12:23:17.617

这里的关键是`LEAD function`- 阅读有关 的文档`analytical functions in SQL`，它们是非常强大的工具。`LEAD(pdat) OVER (ORDER BY pdat)`让您获得 pdat 的价值，`next row`其中`ascending order of pdat`. 然后`nvl function`关心在`last date`哪里`no next date`- 它使用`last_day(pdat)`函数调用返回一个月的最后一天 pdat 落入。

如果您想处理几个月 - 您需要进行一些分析`DECODE function`以检测 pdat 是否`LEAD(pdat) OVER (ORDER BY pdat)`属于同一月份，并使用`LEAD(pdat) OVER (ORDER BY pdat)`或者 last_day(pdat) 作为您要比较的日期。我会把它作为你的作业。

```
 create table dummy_table(pdat date, ac_no varchar2(10), bal number);

 insert into dummy_table values ('14-FEB-2012', 'abcd', 1200);
 insert into dummy_table values ('15-FEB-2012', 'abcd', 1300);
 insert into dummy_table values ('27-FEB-2012', 'abcd', 1300);

 select pdat
     , ac_no
     , bal
     , nvl(lead(pdat) over (order by pdat) - pdat, last_day(pdat) - pdat) 
  from dummy_table;

 2/14/2012 abcd 1200  1
 2/15/2012 abcd 1300 12
 2/27/2012 abcd 1300  2 
```

# iphone - 如何在 iPhone 的弹出窗口中显示 DatePicker？

> ID：12781104
> 
> 赞同：1
> 
> 时间：2012-10-08T11:48:10.760
> 
> 标签：iphone, xcode4, datepicker

我是 Objective-C 的新手

我想`UIDatePicker`在按钮单击后在弹出窗口中显示 ..

我有一个按钮，当我单击该按钮时，我的弹出窗口应该与 DatePicker 一起出现，然后在选择日期后弹出窗口应该关闭并在文本框中设置选定的日期。

我怎样才能做到这一点 ？

为了创建一个日期选择器，我编写了这段代码..

```
UIDatePicker *datePicker=[[[UIDatePicker alloc] init] autorelease];
datePicker.datePickerMode=UIDatePickerModeDate;
[self.view addSubview:datePicker]; 
```

但我不知道如何在按钮单击的弹出窗口中显示它..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:02:35.450

试试这个，这可以帮助你

```
-(IBAction)DatePickerAction:(id)sender
{

     UIActionSheet *menu = [[UIActionSheet alloc] initWithTitle:@"Date Picker" 
                                                          delegate:self
                                                 cancelButtonTitle:@"Cancel"
                                            destructiveButtonTitle:nil
                                                 otherButtonTitles:nil];

        // Add the picker
        UIDatePicker *pickerView = [[UIDatePicker alloc] init];
        pickerView.datePickerMode = UIDatePickerModeDate;
        [menu addSubview:pickerView];
        [menu showInView:self.view];        
        [menu setBounds:CGRectMake(0,0,320, 500)];

        CGRect pickerRect = pickerView.bounds;
        pickerRect.origin.y = -100;
        pickerView.bounds = pickerRect;

        [pickerView release];
        [menu release];

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:02:53.040

您可以将文本字段的 .inputView 属性设置为日期选择器。

所以`myTextField.inputView = datePicker;`

这将替换 datePicker 的键盘输入视图。

更深入一点，您需要为日期选择器的值更改时添加一个目标（因此它会更新文本字段）

让我知道这是否是您想要的方式。

如果您仍然想要弹出窗口，我不确定您是否可以为此子类化`UIAlertView`..

或者您可以将 datePicker 添加到一个`UIView`实例中，然后使用一些精美的动画等将其添加到屏幕上......

有很多选择，我很乐意为您提供帮助...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T12:15:42.147

**.h 文件中的声明**

```
UIActionSheet *aac;  
UIDatePicker *theDatePicker; 
```

**.m 文件中的实现**

**// 在注释后添加代码**

```
-(void)DatePickerDoneClick:(id)sender {

        NSDateFormatter *df=[[[NSDateFormatter alloc]init] autorelease];
        df.dateFormat = @"MM/dd/yyyy";
        NSArray *temp=[[NSString stringWithFormat:@"%@",[df stringFromDate:theDatePicker.date]] componentsSeparatedByString:@""];

        [dateString1 release];
        dateString1=nil;
        dateString1 = [[NSString alloc]initWithString:[temp objectAtIndex:0]];
    UITextField* BirthDayTxtLBl.text = [NSString stringWithFormat:@" %@",dateString1];

NSString *theTime = [NSString stringWithFormat:@"%@",BirthDayTxtLBl.text];
        NSLog(@"%@",theTime);
        [aac dismissWithClickedButtonIndex:0 animated:YES];

        }     

- (void)DatePickercancelClick:(id)sender{

    [aac dismissWithClickedButtonIndex:0 animated:YES];
}

-(IBAction)AddTheTimePicker:(id)sendar {

    aac = [[UIActionSheet alloc] initWithTitle:[self isViewPortrait]?@"\n\n":nil  delegate:self cancelButtonTitle:nil destructiveButtonTitle:nil otherButtonTitles:nil];
    theDatePicker = [[UIDatePicker alloc] initWithFrame:CGRectMake(0.0, 44.0, 0.0, 0.0)];
    theDatePicker.datePickerMode=UIDatePickerModeDateAndTime;
    UIToolbar *pickerDateToolbar = [[UIToolbar alloc] initWithFrame:[self isViewPortrait]?CGRectMake(0, 0, 320, 44):CGRectMake(0, 0, 320, 44)];
    pickerDateToolbar.barStyle = UIBarStyleBlackOpaque;
    [pickerDateToolbar sizeToFit];

    NSMutableArray *barItems = [[NSMutableArray alloc] init];

    UIBarButtonItem *doneBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(DatePickerDoneClick:)];
    //doneBtn.tag = tagID;
    [barItems addObject:doneBtn];

    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];

    UILabel *toolBarItemlabel;
    if([self interfaceOrientation] == UIInterfaceOrientationPortraitUpsideDown || [self interfaceOrientation] == UIInterfaceOrientationPortrait)
        toolBarItemlabel= [[UILabel alloc]initWithFrame:CGRectMake(0, 0, 180,30)];
    else
        toolBarItemlabel = [[UILabel alloc]initWithFrame:CGRectMake(0, 0, 200,30)];

    [toolBarItemlabel setTextAlignment:UITextAlignmentCenter];  
    [toolBarItemlabel setTextColor:[UIColor whiteColor]];   
    [toolBarItemlabel setFont:[UIFont boldSystemFontOfSize:16]];    
    [toolBarItemlabel setBackgroundColor:[UIColor clearColor]]; 
    toolBarItemlabel.text = [NSString stringWithFormat:@"Select Start Time"];

    UIBarButtonItem *buttonLabel =[[UIBarButtonItem alloc]initWithCustomView:toolBarItemlabel];
    [toolBarItemlabel release]; 
    [barItems addObject:buttonLabel];   
    [buttonLabel release];  

    [barItems addObject:flexSpace];

    UIBarButtonItem *SelectBtn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(DatePickercancelClick:)];
    [barItems addObject:SelectBtn];

    [pickerDateToolbar setItems:barItems animated:YES];
    [aac addSubview:pickerDateToolbar];
    [aac addSubview:theDatePicker];

    CGRect myImageRect = CGRectMake(0.0f, 300.0f, 320.0f, 175.0f);;
    [aac showFromRect:myImageRect inView:self.view animated:YES ];

    [UIView beginAnimations:nil context:nil];
    if([self interfaceOrientation] == UIInterfaceOrientationPortraitUpsideDown || [self interfaceOrientation] == UIInterfaceOrientationPortrait)
        [aac setBounds:CGRectMake(0,0,320, 464)];
    else
        [aac setBounds:CGRectMake(0,0,480, 400)];       

    [UIView commitAnimations];

}

// Add this if you wish to add support Orientation support for picker
  - (BOOL) isViewPortrait {
     UIInterfaceOrientation currentOrientation = [UIApplication sharedApplication].statusBarOrientation;
     return (currentOrientation == UIInterfaceOrientationPortrait || currentOrientation == UIInterfaceOrientationPortraitUpsideDown);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T12:22:18.393

写在你的 Button Click 方法中

```
 self.DatePicker= [[UIDatePicker alloc] initWithFrame:CGRectMake(0, 0, 320, 216)];
    self.DatePicker.datePickerMode = UIDatePickerModeDate;
    [self.DatePicker addTarget:self
                   action:@selector(SetDatePickerTime:)
         forControlEvents:UIControlEventValueChanged];
    [self.view addSubview:self.DatePicker];

- (void)SetDatePickerTime:(id)sender
{
     [self.DatePicker removeFromSuperview];
    NSDateFormatter *outputFormatter = [[NSDateFormatter alloc] init];
    [outputFormatter setDateFormat:@"dd:MM:yyyy"];

    NSLog(@"%@",[outputFormatter stringFromDate:self.DatePicker.date]);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T13:21:11.143

最好的方法是创建类似的动画..我尝试使用**扩展**至 uiview..

在要在正常实现上方显示弹出窗口的 .m 文件中尝试以下操作

```
@interface UIView (AlertAnimation)

- (void)doPopInAnimation;

@end

const NSTimeInterval kAnimationDuration = 0.3f;

@implementation UIView (AlertAnimation)

- (void) doPopInAnimation {
    CALayer *viewLayer = self.layer;
    CAKeyframeAnimation *popInAnimation = [CAKeyframeAnimation animationWithKeyPath:@"transform.scale"];

    popInAnimation.duration = 0.3f;
    popInAnimation.values = [NSArray arrayWithObjects:[NSNumber numberWithFloat:0.6], [NSNumber numberWithFloat:1.2], [NSNumber numberWithFloat:0.9], [NSNumber numberWithFloat:1], nil];
    popInAnimation.keyTimes = [NSArray arrayWithObjects:[NSNumber numberWithFloat:0.0], [NSNumber numberWithFloat:0.6], [NSNumber numberWithFloat:0.8], [NSNumber numberWithFloat:1.0], nil];    

    [viewLayer addAnimation:popInAnimation forKey:@"transform.scale"];
}

@end 
```

进一步把这条神奇的线放在你想要弹出的事件上

```
[yourPickerView doPopInAnimation]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T11:34:38.573

参考这段代码

```
 startDatePicker = [[UIDatePicker alloc] init];
    startDatePicker.datePickerMode = UIDatePickerModeDate;
    [startDatePicker addTarget:self action:@selector(startLabelChange:)forControlEvents:UIControlEventValueChanged];
    CGSize pickerSize = [startDatePicker sizeThatFits:CGSizeZero];
    startDatePicker.frame = CGRectMake(-40, -20, pickerSize.width, pickerSize.height);
    startDatePicker.transform = CGAffineTransformMakeScale(0.750f, 0.750f);

    UIViewController *pickerController = [[UIViewController alloc] init];
    [pickerController.view addSubview:startDatePicker];
    [startDatePicker release];
    [pickerController setContentSizeForViewInPopover:CGSizeMake(240, 180)];
    UIPopoverController *pickerPopover = [[UIPopoverController alloc] initWithContentViewController:pickerController];
    [pickerPopover presentPopoverFromRect:startDatelabel.frame
                                   inView:rightSideView
                 permittedArrowDirections:UIPopoverArrowDirectionLeft
                                 animated:YES];
    pickerPopover.delegate = self;
    self.popover = pickerPopover;
    [pickerController release];
    [pickerPopover release]; 
```

# java - 我应该使用哪个集合在 java 中存储一个键和三个值？

> ID：12781108
> 
> 赞同：1
> 
> 时间：2012-10-08T11:48:17.203
> 
> 标签：java, collections

我正在尝试存储一个名称和特定视图的相应左、右、上、下尺寸。我尝试使用 hashmap 仅存储（键、值）。请有人告诉我应该使用哪个 Collection 来满足我的要求。

```
for (int i = 0; i < numberOfFaceDetected; i++) {
    android.media.FaceDetector.Face face = myFace[i];
    Log.i("FACE","FACE TAGGING   : "+myFace[i].toString());
    String facename = myFace[i].toString();
    PointF myMidPoint = new PointF();
    face.getMidPoint(myMidPoint);
    myEyesDistance = face.eyesDistance();
    dx = (int) (myMidPoint.x - myEyesDistance);
    dy = (int) (myMidPoint.y - myEyesDistance);
    dz = (int) (myMidPoint.x + myEyesDistance);
    dt = (int) (myMidPoint.y + myEyesDistance);
    //here i want to store facename,dx,dy,dz,dt values in  same  collection
    canvas.drawRect((int) dx, dy, dz, dt, myPaint);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T11:51:54.360

怎么样`Map<YourKeyClass, YourValuesClass>`？

例如。

```
class YourValuesClass
{
    int dx, dy, dz, dt;

    // getters and setters
    // ...
}

Map<String,YourValueClass> map = new HashMap<String,YourValueClass>(); 
```

干杯，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:55:39.653

我认为使用 a`HashMap`将是您最好的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T12:06:40.277

我建议你使用[HashMap](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html)，但是你有 4 个值对应一个键（faceName）。创建一个`DTO`具有四个属性的数据传输对象 ( ) 来携带数据并将它们放到地图上，例如`hashMap.put("myface",myDto);`

例如，

```
class Position
{
    private int left;
    private int right;
    private int top;
    private int bottom;
    public int getLeft() {
        return left;
    }
    public void setLeft(int left) {
        this.left = left;
    }
    public int getRight() {
        return right;
    }
    public void setRight(int right) {
        this.right = right;
    }
    public int getTop() {
        return top;
    }
    public void setTop(int top) {
        this.top = top;
    }
    public int getBottom() {
        return bottom;
    }
    public void setBottom(int bottom) {
        this.bottom = bottom;
    }

} 
```

`Map<String, Position>`人脸图 =`new HashMap<String, Position>();`

在你的 for 循环中，

```
Position facePosition = new Position();

facePosition.setLeft(((int) (myMidPoint.x - myEyesDistance))); 
```

然后设置所有属性`faceMap.put("myface",facePosition);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T11:54:31.940

我更喜欢制作一个表示维度（三个值）的对象并使用 hashmap key=facename value=faceDimension (your object) 来充实面向对象编程的概念；）

```
public class FaceDimension {
    private int dx;
    private int dy;
    private int dz;
    private int dt;

    public FaceDimension(int dx, int dy, int dz, int dt) {
        super();
        this.dx = dx;
        this.dy = dy;
        this.dz = dz;
        this.dt = dt;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T11:51:07.017

> 我尝试使用 hashmap 仅存储（键，值）

是的，但那`value`可以是任何类型的权利？所以，在你的 .. 中使用 a`List`作为一个值`HashMap`。所以，你可以存储多个值..

```
Map<Integer, List<String>> mapping = new HashMap<Integer, List<String>>(); 
```

我**假设**类型为`key`，`Integer`值类型为`String`.. 您可以使用适当的类型..

**或者如果你有`4-fixed`价值观，我刚刚看到你有**..你可以创建你的`Custom Type`..只是有一个包含所有这些价值观的类，然后使用**`HashMap<Integer, YourCustomClass>`**

```
public class MyDimension {
    private int top; 
    private int bottom;
    private int right;
    private int left;

    // Your Constructor

    // Use only getters, to make the object immutable..
} 
```

现在，将 a**`HashMap<Integer, MyDimension>`**与`MyDimension`存储所有 4 个值的对象一起使用。

# google-chrome - 位置：固定在 chrome 22 中不起作用

> ID：12781115
> 
> 赞同：4
> 
> 时间：2012-10-08T11:48:32.570
> 
> 标签：google-chrome, css-position

我是 html5 和 css3 的新手。我上个月发布了我的第一个网站，现在我发现它在新的 chrome 版本 (22) 中运行不佳：所有固定元素都不再固定...例如屏幕顶部的导航栏。一周前还好，我不知道为什么现在不行。这是网站：[www.biofilter.co.il](http://www.biofilter.co.il)

据我所知，它在 Firefox 和 IE 中仍然可以正常工作。

有谁知道发生了什么，可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T11:28:49.207

您的问题可能是由 Chrome 重新处理`position:fixed`元素*处理*. `z-index`进行了更改，`Chrome v22`因此如果您在 v21 上构建并使用`position:fixed`，您可能会遇到问题。

他们建议通过在浏览器中点击 Chrome 特殊 URL 进行测试`about:flags`，并将其设置`Fixed position elements create stacking contexts.`为 true（对于 v22+）或 false（对于 v21）。

通过确保`position:fixed`元素正确堆叠，可以重做 CSS。不幸的是，它有点复杂，所以建议您阅读这些以获得更好的解释：

*   [堆叠变化即将到位：固定元素](http://updates.html5rocks.com/2012/09/Stacking-Changes-Coming-to-position-fixed-elements)
*   [堆叠上下文的详细描述](https://plus.google.com/103238735625031210015/posts/PXDRAukeZvd)

# javascript - 连续/无限滚动

> ID：12781123
> 
> 赞同：0
> 
> 时间：2012-10-08T11:48:55.690
> 
> 标签：javascript, jquery, css

我一直在寻找一个插件/脚本，当到达底部时，它会从一开始就继续滚动网站，就像一个连续的循环。

示例：[http](http://unfold.no/) ://unfold.no/和[http://www.aquiesdonde.com.ar/](http://www.aquiesdonde.com.ar/)

我尝试过逆向工程，但还没有得出结论。谁能**引导我朝着正确的方向**寻找这样的插件？

我只倾向于找到在向下滚动时不断扩展页面/添加内容的脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:24:11.610

它只是一个 if 语句，它告诉文档在 x 处的像素数量是否到达顶部 y。

代码来自：[http ://www.aquiesdonde.com.ar/](http://www.aquiesdonde.com.ar/)

```
/*Scroll*/
var mov = 0;
function handle(delta) {
/*Scroll Action*/
    if (delta < 0){
        if(mov==-10500){
            mov=0;
            moverDown();
        }else{
            moverDown();
        }
    }else{
        if(mov==0){
            mov=-10440;
            moverUp();
        }else{
            moverUp();
        }
    }
}; 
```

加上使滚动无缝的 moverUp/moverDown 函数：

```
/*Scroll Top*/
function moverUp(){
    $('.layout').css( "top", mov+=30 );
};

/*Scroll Down*/
function moverDown(){
    $('.layout').css( "top", mov-=30 );
};

/*Function Scroll*/
function wheel(event){
    var delta = 0;
    if (!event) event = window.event;
    if (event.wheelDelta) {
        delta = event.wheelDelta/120; 
        if (window.opera) delta = -delta;
    } else if (event.detail) {
        delta = -event.detail/3;
    }
    if (delta)
        handle(delta);
        if (event.preventDefault)
                event.preventDefault();
        event.returnValue = false;
}; 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-08T11:57:05.253

尝试使用此脚本：[https ://github.com/paulirish/infinite-scroll](https://github.com/paulirish/infinite-scroll)

这就是您想要使用 JQuery 框架用 JS 编写的内容。

# iphone - iOS Native Facebook Share 无互联网回调

> ID：12781124
> 
> 赞同：2
> 
> 时间：2012-10-08T11:48:57.500
> 
> 标签：iphone, ios, facebook

我正在尝试为 iOS 6 实现本机 facebook 共享，并且需要检查共享是否成功。这是我使用的代码：

```
BOOL displayedNativeDialog =
    [FBNativeDialogs
     presentShareDialogModallyFrom:delegate
     initialText:@"test"
     image:nil
     url:nil
     handler:^(FBNativeDialogResult result, NSError *error) {
         if (error) {
             /* handle failure */
             NSLog(@"error:%@, %@", error, [error localizedDescription]);
         } else {
             if (result == FBNativeDialogResultSucceeded) {
                 /* handle success */
                 NSLog(@"handle success");
             } else {
                 /* handle user cancel */
                 NSLog(@"user cancel");
             }
         }
     }];
    if (!displayedNativeDialog) {
        /* handle fallback to native dialog  */
    } 
```

我的问题是，当我在没有可用互联网连接的情况下尝试此操作时，我仍然得到 FBNativeDialogResultSucceeded

当没有可用的互联网连接时，您似乎应该收到一个错误，但它似乎不是那样工作的。如果有一些解决方案我不需要使用可达性 SDK，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T03:12:49.367

此时您可能必须使用可达性 SDK。Facebook SDK 构建在 SLComposeViewController 之上以实现本机功能。该视图控制器返回两个可能的选择：

*   SLComposeViewControllerResultCancelled
*   SLComposeViewControllerResultDone

SLComposeViewControllerResultDone：视图控制器被关闭，消息正在后台发送。当用户选择完成时会发生这种情况。

因此，由于 Facebook 反映了这一点，成功案例意味着用户点击完成并且消息已在后台发送。

但是，如果您运行此程序并且没有 Internet 连接，用户仍应看到一个弹出窗口，指示由于连接失败而无法发送帖子。

# emacs - 如何从覆盖下获得面子？

> ID：12781127
> 
> 赞同：3
> 
> 时间：2012-10-08T11:49:08.680
> 
> 标签：emacs, elisp, overlay, emacs-faces

情况如下：我需要检索点边界下的人脸，但如果我使用高亮当前行模式，则该人脸会覆盖我感兴趣的人脸。

`face-at-point`或者`(get-char-property (point) 'face)`只会给我列表中的第一张脸，它将是当前行叠加层中的一张。如何获得底层面孔？

编辑：

这或多或少是我最终做的：

```
(defun haxe-face-at-point ()
  "This is like `face-at-point' except we will only look for faces
which are relevant to haxe-mode. This will also look under overlays
created by minor modes like ispel or highlight current line."
  (interactive)
  (let ((props (text-properties-at (point))))
    (catch 't
      (while props
        (when (eql (car props) 'face)
          (throw 't
                 (when (member (cadr props)
                               '(font-lock-string-face
                                 font-lock-keyword-face
                                 font-lock-variable-name-face
                                 font-lock-comment-face
                                 font-lock-preprocessor-face
                                 font-lock-type-face
                                 default))
                   (cadr props))))
        (setq props (cdr props)))))) 
```

我只需要找出是否有列表之一。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T14:31:28.023

遗憾的是，没有为此提供给 Elisp 代码的良好设施。我可以为您提供的最好的方法是使用`overlays-at`然后循环遍历结果，使用`overlay-get`来查看哪些覆盖指定了 a`face`并最终用于`get-text-property`获取`face`text-properties 指定的（如果有的话）。显示引擎结合了所有这些。

# r - 在 PowerPoint 中嵌入 R 动画 3D 绘图

> ID：12781129
> 
> 赞同：12
> 
> 时间：2012-10-08T11:49:20.287
> 
> 标签：r, 3d, powerpoint, presentation

`rgl`R 包允许绘制交互式 3D 图形并将这些图形保存在 html 文档中（使用函数`writeWebGL()`）。

我想将这样一个交互式 3D 图形放在 PowerPoint 演示文稿中。可能吗 ？

**编辑：**在 Google 的帮助下研究了 Dieter Menne 的答案后，我的结论如下：

*   目前 Luke Tierney 将 3D 图形转换为 U3D 文件和/或 Asymptote 文件的方法仅适用于使用`misc3d`包创建的图形，不适用于`rgl`包。
*   将 3D rgl 图形导出为[VRML/X3D](http://en.wikipedia.org/wiki/VRML)文件已被宣布为未来计划。也许这将允许将 3D rgl 图形嵌入到 Powerpoint 和/或 LaTeX 演示文稿中。

**编辑**：[相关讨论](https://stackoverflow.com/questions/7663982/r-using-rgl-to-generate-3d-rotatable-plots-that-can-be-viewed-in-a-web-browser)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-07T19:22:43.430

如果将其放入 HTML 文档中，您可能可以使用该`IWebBrowser2`对象在幻灯片中打开 HTML。我不确定 3d 图形将如何呈现，而且我不熟悉 R 或无法提供任何进一步的建议，但您可以先尝试在幻灯片中简单地创建一个 WebBrowser 对象，然后告诉它导航到 HTML 文件。

```
Sub InsertHTMLFrame()
Dim sld as Slide
Dim shp as Shape
Dim wb as Object
Set sld = ActivePresentation.Slides(1) '## Modify as needed

'## Create the shape container, you will need to modify the L/T/W/H to fit your document
Set shp = sld.Shapes.AddOLEObject(100, 200, 200, 150, _
    "Shell.Explorer.2")
shp.Name = "3dgraphic"
Set wb = shp.OLEFormat.Object

wb.Navigate "C:\Users\you\Desktop\exported3dgraphic.html"
End Sub 
```

在幻灯片模式期间控制此流程可能有点棘手，但它是可行的，只要图形像这样通过 IE 正确呈现。

**如何安装此宏**

1.  打开 PowerPoint 演示文稿，然后单击 Alt+F11 以调出 Visual Basic 项目。
2.  右键单击左窗格中的项目，然后插入模块：

![在此处输入图像描述](../Images/cbe94245dd6708cad76839c38188d843.png)

3.  将我的答案中的代码粘贴到此模块中。
4.  在说`wb.Navigate "C:\..."`将其修改为 HTML 文件的正确文件路径的行中。这可以在您的计算机上或共享网络文件夹等中。

浏览器在幻灯片模式下应该能够显示 HTML 页面，但不会在正常或预览模式下呈现它们。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T12:47:07.043

如果您传输 Powerpoint 演示文稿（或者，甚至更多 R-ish，使用 beamer/latex），并按照 Luke Tierney 的文章中所述嵌入 3D 绘图，这是可能的

[http://homepage.stat.uiowa.edu/~luke/R/misc3d/misc3d-pdf/misc3d-pdf.pdf](http://homepage.stat.uiowa.edu/~luke/R/misc3d/misc3d-pdf/misc3d-pdf.pdf)

# php - 队列类在 php 中有意义吗？

> ID：12781134
> 
> 赞同：-2
> 
> 时间：2012-10-08T11:49:38.540
> 
> 标签：php, class, queue

> **可能重复：**
> [类定义的顺序在 PHP 中是否重要？](https://stackoverflow.com/questions/3458756/does-the-order-of-class-definition-matter-in-php)

```
class a {
    function __construct () {
        $obj = new b();
        echo $obj->sum();
    }
}

 class b  {

    function sum () {
        return 3+4;
    }

 }

$obj_a = new a(); 
```

这段代码有效，但我感兴趣的是这段代码有多少合理性？即：第一次写a类，在他里面我们叫b类，但是b类写在a之后。在这个例子中，在a之前写b类会更好吗？还是没有意义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T11:52:23.087

不，在源文件中定义这两个类的顺序无关紧要。只要两者都在同一个文件中定义，您就可以随意移动它们。

如果类没有在同一个文件中定义，那么事情[会变得更复杂一些](https://stackoverflow.com/questions/12617188/derived-class-defined-later-in-the-same-file-does-not-exist/12618376#12618376)，但不会影响这种代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T11:52:54.660

该特定代码包含我们称之为“魔术”的元素。您无法从代码本身推断出它需要`b`定义类。

要遵循的一般规则是，您永远不应该提前阅读以了解您的代码是做什么的。

所以从这个意义上说，是的。`b` **应该**首先定义Class （应该是 PHP 不关心，它只是为了便于阅读），然后是 Class `a`，然后是对象调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T11:52:42.757

您不必颠倒顺序。PHP 在运行之前编译代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T11:53:02.703

类在文件中的放置顺序无关紧要。对于放置在不同文件中的类，请查看[此答案](https://stackoverflow.com/questions/3458756/does-the-order-of-class-definition-matter-in-php)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T11:54:23.857

当我们运行一个文件时，它正在搜索第一个执行行，这一行是

```
$obj_a = new a(); 
```

它不依赖于类或函数初始化。因此，您的代码可以按任何顺序运行。

# javascript - 在 gmail 中显示视觉事件

> ID：12781140
> 
> 赞同：1
> 
> 时间：2012-10-08T11:50:05.317
> 
> 标签：javascript, google-chrome-extension, gmail

我正在尝试为 gmail 创建一个 chrome 扩展，我希望在某些鼠标手势上进行下一个/旧的转换。

这是我的内容脚本

```
{
   "name": "DemoApp",
   "version": "1.0",
   "manifest_version": 2,
   "description": "Demo.",
   "content_scripts":[
    {
      "matches":["*://mail.google.com/*"],
      "css": ["mystyles.css"],
      "js": ["jquery.js", "popup.js"],
      "all_frames":true
    }
  ],
  "permissions": [
    "*://mail.google.com/*"
  ]
} 
```

我使用了视觉事件[http://www.sprymedia.co.uk/article/Visual+Event+2](http://www.sprymedia.co.uk/article/Visual+Event+2)但它没有显示任何附加到下一个/旧转换 div 的事件

请帮助我，因为我是 chrome 扩展的新手

# php - 致命错误：找不到 PHP 类“COM”。Win7 - 阿帕奇 - PHP

> ID：12781145
> 
> 赞同：6
> 
> 时间：2012-10-08T11:50:26.330
> 
> 标签：php, windows, com

```
$myapp = new COM("word.application");
// returns a fatal error: "Class 'COM' not found in c:/www/comConnector.php"

shell_exec("whoami");
//returns "NT authority/system" 
```

## 我的系统设置

*   Win7专业版
*   Apache服务器版本：Apache/2.2.23 (Win32)
*   PHP

    > PHP 5.3.16 (cli) (build: Aug 15 2012 20:06:57)
    > 版权所有 (c) 1997-2012 The PHP Group
    > Zend Engine v2.3.0, 版权所有 (c) 1998-2012 Zend Technologies

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-08T11:54:41.197

在 php.ini 中添加 COM 支持：

```
 [COM_DOT_NET]
     extension=php_com_dotnet.dll 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:04:42.407

由于您使用的是 PHP 5.3.16，因此请确保您指向全局命名空间：

```
$myapp = new \COM("word.application"); 
```

即使您的 PHP 文件可能已经在全局命名空间中，但这是一个很好的做法。

# linux - 将数据从一台服务器迁移到另一台服务器

> ID：12781149
> 
> 赞同：0
> 
> 时间：2012-10-08T11:50:57.627
> 
> 标签：linux

我买了一台新服务器，我想将所有数据（目录、子目录、用户、密码等）从旧服务器移到它。

有没有办法做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:56:50.503

对于目录和文件，请使用您服务器上的 FTP 客户端，如果它允许，则只需将所有内容下载到您的计算机并将其上传到新服务器。

对于用户和密码，我猜他们在数据库中，使用 SSH、telnet 或 MysqlAdmin 或任何 RMDB 客户端系统连接到数据库并导出转储文件，然后登录到新服务器的 SQL 系统并导入该转储文件.

无论如何，您应该提供两台服务器的更多详细信息，以便我们为您提供帮助，例如，它们是共享主机还是专用机器？你对他们有什么样的访问权限，他们的操作系统会帮助人们准确地回复你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:01:13.790

原则上，是的。

如果硬件相似（= 只是更多的 RAM、磁盘空间但相同的 CPU 架构且没有特殊的显卡驱动程序），您可能能够复制每个文件，然后再次安装引导加载程序（引导加载程序配置通常会在硬盘大小变化）。

或者您可以创建您使用的所有服务的列表，确定每个服务使用哪些配置文件，然后复制这些文件。理想情况下，您不应该复制它们，而是比较旧版本和新版本并将它们合并。

最密集的工作方式是使用像[puppet](http://puppetlabs.com/)这样的工具。简而言之，puppet 允许为服务创建安装脚本（以及您需要的所有配置）。因此，如果您需要再次安装服务（新硬件、第二台服务器），您只需告诉 puppet 安装即可。从好的方面来说，您的整个安装也将被记录在案。如果您想知道为什么会这样，您可以查看 puppet 文件。

当然，这种方法需要大量时间和纪律，因此在您的情况下可能不值得。应用常识。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T23:02:39.587

您对两台服务器都有物理访问权限吗？如果是这样，您可以使用[dd](http://www.backuphowto.info/linux-backup-hard-disk-clone-dd)命令将磁盘从旧服务器克隆到要进入新服务器的磁盘。

但是，为了做到这一点，两个硬盘驱动器都必须安装在其中一台服务器中。

您还可以使用[netcat](http://www.cyberciti.biz/tips/howto-copy-compressed-drive-image-over-network.html)并`dd`通过网络克隆磁盘。

# java - java.lang.NoClassDefFoundError 错误

> ID：12781151
> 
> 赞同：0
> 
> 时间：2012-10-08T11:51:00.573
> 
> 标签：java, android, noclassdeffounderror

我收到以下错误：

```
java.lang.NoClassDefFoundError: com.test.library.R$drawable 
```

这是出错的那一行：

```
int icon = com.test.library.R.drawable.notification_icon; 
```

我想要做的是以下。我围绕 GCM 推送通知系统编写了自己的库（这样我就可以在多个应用程序中使用它，而无需编写相同的代码。我把它放在一个库中，因为除了 GCM，它还需要做一些其他的事情）。

无论如何，我创建了一个库的 .jar 文件，并将其导入到我的测试应用程序中，但它给了我这个错误。我尝试了 StackOverflow 上给出的解决方案，但它们似乎不起作用。此外，我真的希望能够将库放入 .jar 文件并导入它（说来话长，所以请接受我需要它以这种方式工作。谢谢！）。

我究竟做错了什么？

编辑：
我在这里发现了问题。我忘记在我的库的 .jar 文件中包含 R.java 文件。除了它现在给出另一个错误：

```
android.app.RemoteServiceException: Bad notification posted from package
com.test.app: Coulding create icon:
StatusBarIcon(pkg=com.test.app
id=0x7f020002 level=0 visible=true num=0 ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:00:19.827

好吧，您的 jar 文件不包含可绘制对象。

包括图书馆项目

**项目首选项 >> Android 选项卡**

并在底部单击**添加**按钮并选择您的库项目。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:00:41.603

从此链接尝试：

[android中的ClassDefNotFound错误](https://stackoverflow.com/a/12511271/964741)

库问题会发生此错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-08T11:59:09.233

```
java.lang.NoClassDefFoundError: com.test.library.R$drawable 
```

当 Java 虚拟机或 ClassLoader 实例尝试加载类的定义（作为正常方法调用的一部分或作为使用 new 表达式创建新实例的一部分）并且没有类的定义时，会发生此异常成立。
这意味着您的 jar 的类路径设置不正确，因此在运行时找不到您的类。

# algorithm - 平衡分区

> ID：12781159
> 
> 赞同：10
> 
> 时间：2012-10-08T11:51:21.987
> 
> 标签：algorithm

我知道这在这里讨论了很多，但我正在努力解决这个问题。

我们有一组数字，例如 [3, 1, 1, 2, 2, 1]，我们需要将其分成两个子集，因此每个和都相等或差异最小。

我看过[wikipedia entry](http://en.wikipedia.org/wiki/Partition_problem)、 this [page](http://people.csail.mit.edu/bdean/6.046/dp/) (problem 7) 和[blog entry](http://ronzii.wordpress.com/2012/03/19/balanced-partition-problem/)。

但是列出的每个算法都只给出 YES/NO 结果，我真的不明白如何使用它们来打印出两个子集（例如 S1 = {5, 4} 和 S2 = {5, 3, 3}）。我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T12:05:13.860

伪多项式算法旨在为*决策问题*提供答案，而不是*优化问题*。但是，请注意，[示例](http://en.wikipedia.org/wiki/Partition_problem#Example)中布尔值表中的最后一行表示当前集合能够总计为 N/2。

在最后一行中，取布尔值所在的第一列`true`。然后，您可以检查给定列中集合的实际值是多少。如果集合总和值为 N/2，则您已找到分区的第一组。否则，您必须检查哪个集合能够与 N/2 不同。您可以使用与上述相同的方法，这次是差异*d*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-29T18:13:59.013

这将是**O(2^N)**。这里没有使用动态规划。执行函数后可以打印result1、result2和差异。我希望这有帮助。

```
vector<int> p1,p2;
vector<int> result1,result2;
vector<int> array={12,323,432,4,55,223,45,67,332,78,334,23,5,98,34,67,4,3,86,99,78,1};

void partition(unsigned int i,long &diffsofar, long sum1,long sum2)
{
    if(i==array.size())
    {
        long diff= abs(sum1 - sum2);
        if(diffsofar > diff)
        {
            result1 =  p1;
            result2 = p2;
            diffsofar = diff;
        }
        return;
    }

    p1.push_back(array[i]);
    partition(i+1,diffsofar,sum1+array[i],sum2);
    p1.pop_back();

    p2.push_back(array[i]);
    partition(i+1,diffsofar,sum1,sum2+array[i]);
    p2.pop_back();

    return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-30T01:02:30.207

我最近遇到了同样的问题，我发布了一个关于它的问题（这里：[Variant of Knapsack](https://stackoverflow.com/questions/35088778/variant-of-knapsack/)）。在我的情况下，不同之处在于结果子集的大小必须相同（如果原始集合具有偶数个元素）。为了确保这一点，我在@Sandesh Kobal 的答案中添加了几行；

```
void partition(unsigned int i,long &diffsofar, long sum1,long sum2)
{
    int maxsize = (array.size()+1)/2;

    if(p1.size()>maxsize)
        return;

    if(p2.size()>maxsize)
        return;

    if(i==array.size())
    {
        ... 
```

此外，在两次调用之后`partition`，我添加了`if(diffsofar==0) return;`. 如果我们已经找到了最佳解决方案，那么继续搜索是没有意义的……

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-19T06:53:51.657

我看过的所有文章都采用动态编程方法。我们真的需要一个吗？

假设给定的数组是`arr`

使用以下算法：

1.  按降序对数组进行排序

2.  创建两个空数组，`a = []`然后`b = []`

3.  `sum_a = sum_b = 0`

```
for x in arr:
    if sum_a > sum_b:
        b.append(x)
        sum_b += x
    else:
        a.append(x)
        sum_a += x 
```

`sum_a`和之间的绝对差异`sum_b`是两个子集之间可能的最小差异。

考虑`arr = [3,1,1,2,2,1]`

对数组进行排序：`arr = [3,2,2,1,1,1]`

```
a = [], b = []
a = [3], b = []
a = [3], b = [2]
a = [3], b = [2,2]
a = [3,1], b = [2,2]
a = [3,1,1], b = [2,2]
a = [3,1,1], b = [2,2,1] 
```

`sa = 5, sb = 5`

最小差异：`5 - 5 = 0`

# python - Bash to Python：展平目录树

> ID：12781161
> 
> 赞同：4
> 
> 时间：2012-10-08T11:51:25.240
> 
> 标签：python, bash

在类 Unix 系统上，我使用这个脚本，我想要一些关于移植到 Python 以在 Windows 主机上执行的帮助：

* * *

```
#!/bin/bash

SENTINEL_FILENAME='__sentinel__'
SENTINEL_MD5_CHECKSUM=''
SENTINEL_SHA_CHECKSUM=''

function is_directory_to_be_flattened() {

  local -r directory_to_consider="$1"
  local -r sentinel_filepath="${directory_to_consider}/${SENTINEL_FILENAME}"

  if [ ! -f "${sentinel_filepath}" ]; then
    return 1
  fi

  if [[
      "$(
         md5 "${sentinel_filepath}" \
           | awk '{ print $NF }' 2> /dev/null
       )" \
        == "${SENTINEL_MD5_CHECKSUM}"
    && \
      "$(
         shasum -a 512 "${sentinel_filepath}" \
           | awk '{ print $1 }' 2> /dev/null
       )" \
        == "${SENTINEL_SHA_CHECKSUM}"
  ]]; then
    return 0
  else
    return 1
  fi
}

function conditionally_flatten() {

  local -r directory_to_flatten="$1"
  local -r flatten_into_directory="$2"

  if is_directory_to_be_flattened "${directory_to_flatten}"; then

    if [ ! -d "${flatten_into_directory}" ]; then
      mkdir -v "${flatten_into_directory}"
    fi

    for file_to_move in $(find ${directory_to_flatten} -type f -maxdepth 1); do
      mv \
        -v \
        -n \
        "${file_to_move}" \
        "${flatten_into_directory}"
    done
  fi
}

function flatten_directory() {

  local -r directory_to_flatten="$1"
  local -r descend_depth="$2"

  local -r flattened_directory="${directory_to_flatten}/__flattened__"

  if [ ! -d "${directory_to_flatten}" ]; then
    printf "The argument '%s' does not seem to be a directory.\n" \
      "${directory_to_flatten}" \
      >&2
    return
  fi

  find "${directory_to_flatten}" \
    -type d \
    -maxdepth "${descend_depth}" \
  | \
    while read directory_path; do
      conditionally_flatten \
        "${directory_path}" \
        "${flattened_directory}"
    done
}

n_arguments="$#"

if [ "${n_arguments}" -eq 1 ]; then
  flatten_directory "$1" '1' # maybe use a constant, not a "magic #" here?
else
  echo usage: "$0" /path/to/directory/to/flatten
fi

unset is_directory_to_be_flattened
unset conditionally_flatten
unset flatten_directory 
```

* * *

您将如何将其移植到 Win Python？我是 Python 和 Bash 脚本的初学者。

如果您发现它也缺少任何方式，请在移植时随意升级我的实现，请说明理由。这不是“代码审查”，而是对我在 Bash 中的努力的“赞许/反对”会让我感觉到我是在进步还是应该完全改变我的学习方式......

* * *

好了，我在 Python 中的尝试：（如果需要，请严厉批评，这是我学习的唯一方法！*）*

* * *

```
#!/usr/bin/env python2.7

import sys
import os
import shutil

SENTINEL_FILENAME=''
SENTINEL_MD5_CHECKSUM=''
SENTINEL_SHA_CHECKSUM=''

DEFAULT_DEPTH = 1
FLATTED_DIRECTORY_NAME = '__flattened__'

def is_directory_to_be_flattened(directory_to_consider):
  sentinel_location = os.path.join(directory_to_consider, SENTINEL_FILENAME)
  if not os.path.isfile(sentinel_location):
    return False
  import hashlib
  with open(sentinel_location) as sentinel_file:
    file_contents = sentinel_file.read()
    return (hashlib.md5(file_contents).hexdigest() == SENTINEL_MD5_CHECKSUM
      and hashlib.sha512(file_contents).hexdigest() == SENTINEL_SHA_CHECKSUM)

def flatten(directory, depth, to_directory, do_files_here):
  if depth < 0:
    return
  contained_filenames = [f for f in os.listdir(directory)]
  if do_files_here:
    for filename in contained_filenames:
      if filename == SENTINEL_FILENAME:
        continue
      filepath = os.path.join(directory, filename)
      if not os.path.isfile(filepath):
        continue
      file_to = os.path.join(to_directory, filename)
      if not os.path.isdir(to_directory):
        os.makedirs(to_directory)
      if not os.path.isfile(file_to):
        print "Moving: '{}' -> '{}'".format(filepath, file_to)
        shutil.move(filepath, file_to)
      else:
    sys.stderr.write('Error: {} exists already.\n'.format(file_to))
  next_depth = depth - 1
  for subdirectory in (d for d in contained_filenames if os.path.isdir(d)):
    if is_directory_to_be_flattened(subdirectory):
      flatten(subdirectory, next_depth, to_directory, True)

def flatten_directory(to_flatten, depth):
  to_directory = os.path.join(to_flatten, FLATTED_DIRECTORY_NAME)
  if not os.path.isdir(to_flatten):
    sys.stderr.write(
      'The argument {} does not seem to be a directory.\n'.format(
      to_flatten))
    return
  flatten(to_flatten, depth, to_directory, False)

def main():
  if len(sys.argv) == 2:
    flatten_directory(sys.argv[1], DEFAULT_DEPTH)
  else:
    print 'usage: {} /path/to/directory/to/flatten'.format(sys.argv[0])

if __name__ == '__main__':
  main() 
```

* * *

虽然从代码中很明显，但意图是：

*   从给定目录开始
*   下降到一定深度
*   当且仅当以下情况考虑子目录并移动其中的所有文件：
    *   该目录包含一个具有给定文件名的“哨兵文件”
    *   哨兵文件*实际上*是哨兵文件，而不仅仅是重命名为同名的文件
*   整理`__flattened__`搜索开始目录下的目录中的文件

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-08T12:03:55.303

Python 中的大多数文件处理函数都在模块“os”中——你会在其中找到 os.rename（用于重命名或移动目录条目）、os.listdir——它为你提供目录中的文件名列表，作为第一个参数传递, os.walk - 递归遍历目录结构 os.path.walk, 做同样的事情, 但使用回调, os.path.exists, os.path.isdir, os.mkdir, 是其他可能的便利。

对于“快速而肮脏”的翻译，您还可以查看“os.system”。它允许您执行 shell 命令，就像它在 shell 中键入一样，而 os.popen - 允许访问所述进程的标准输入和标准输出。更仔细的翻译，艰难，需要使用另一个模块：“子进程”，它可以完全控制作为子进程执行的 shell 命令（尽管如果你需要`find`，例如，它在 Windows 上不可用）

其他感兴趣的模块是`sys`（sys.argv 是传递给脚本的参数）和`shutil`（与复制、rmtree 等类似的东西）

您的脚本会进行一些错误检查，这很简单，因为上面的“os”和基本 Python 中的函数名称可以添加它们 - 但是 Python 中的一个简短的“只是做”脚本可能只是：

```
import os, sys

dir_to_flatten = sys.argv[1]

for dirpath, dirnames, filenames in os.walk(dir_to_flatten):
    for filename in filenames:
        try:
            os.rename(os.path.join(dirpath, filename), os.path.join(dir_to_flatten, filename))
        except OSError:
            print ("Could not move %s " % os.path.join(dirpath, filename)) 
```

# javascript - 当用户放大或缩小时防止背景图像缩放

> ID：12781163
> 
> 赞同：9
> 
> 时间：2012-10-08T11:51:30.683
> 
> 标签：javascript, jquery, html, css, image

我有这个透明的类似光栅的背景覆盖：[链接到图像](http://i.imgur.com/e3GYhK9.png)<--尝试缩小浏览器以查看效果

当放大或缩小时（尤其是在移动设备上经常发生这种情况），图像往往看起来很脏而且很难看。有没有办法让这个背景图像在屏幕上的大小始终为 10 x 10 像素，无论页面如何缩放，所以它总是看起来很清晰？

做了一些搜索，我发现这可能是一项艰巨的任务。如果不可能：有没有办法改变缩放滤镜，使图像在缩小或缩小时看起来更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:15:32.280

在高分辨率显示器上，就像移动设备的显示器一样，​​由于小尺寸屏幕上的高分辨率导致高像素密度，您将始终有模糊的效果。

有一个解决方法来解决这个问题：

*   创建一个双倍大小的背景图片：你的图片是 10px 10px，创建一个 20px 20px 的。

*   使用所需大小应用背景图像：`background-size: 10px 10px;`

有了这个技巧，在高分辨率显示器上放大或查看图像时，图像将不再显得模糊。

根据评论中的要求，这里是使背景大小适应缩放的代码：

**JAVASCRIPT：**

```
if (window.addEventListener){           
    window.addEventListener('resize', setBackground, false);
} else {
    window.attachEvent('onresize', setBackground);
}

function setBackground(){
    document.body.style.backgroundSize =
        (((( window.screen.width / ( window.screen.width / getImageWidth() )) / 10) > 1 ) ? (( window.screen.width / ( window.screen.width / getImageWidth() )) / 10) : 1) + "%";
}

function getImageWidth(){

    var imageSrc = document
                    .body
                     .style
                      .backgroundImage
                       .replace(/url\((['"])(.*?)\1\)/gi, '$2')
                        .split(',')[0];

    var image = new Image();
    image.src = imageSrc;

    var width = image.width;

    return width;

} 
```

**HTML：**

```
<body onLoad="javascript:setBackground();" style="background: url(bkg.jpg) repeat;"> 
```

# c# - C# 中的 DataAdapter.Update() 方法出错

> ID：12781171
> 
> 赞同：0
> 
> 时间：2012-10-08T11:51:55.193
> 
> 标签：c#

我正在尝试按照 Insert Command 进行操作。但它不起作用，也没有显示任何异常。谁能告诉我我在哪里做错事？

```
using System;
using System.Data;
using System.Data.SqlTypes;
using Microsoft.SqlServer.Server;
using System.Security.Principal;

public partial class StoredProcedures
{
   [Microsoft.SqlServer.Server.SqlProcedure]
   public static void USP_tempSP()
   {   
       DataTable objDataTable = new DataTable();
       using (SqlConnection objConn = new SqlConnection("context connection=true"))
       {
           objConn.Open();
           SqlCommand objCmd = new SqlCommand();
           objCmd.CommandType = CommandType.Text;

           objCmd.Connection = objConn;
           objCmd.CommandText = "select * from temp"; 
           /*table Structure
            *CREATE TABLE [dbo].[temp]([empname] [varchar](20)  NULL,[createdon] [datetime] NULL,[emp_id] [varchar](4) NULL
           ) 
           */
           SqlDataAdapter objDataAdapter = new SqlDataAdapter(objCmd.CommandText, objConn);
           objDataAdapter.Fill(objDataTable);

           SqlCommand objCmd1 = new SqlCommand();
           objCmd1.CommandType = CommandType.Text;
           objCmd1.UpdatedRowSource = UpdateRowSource.None;
           objCmd.CommandText = "Insert into tempCopy " +
                               " values(@empname,@createdon)";
           /*table Structure
            *CREATE TABLE [dbo].[tempCopy]([empname] [varchar](20)  NULL,[createdon] [datetime] NULL
            ) 
           */
           objCmd.Parameters.Add("@empname", SqlDbType.VarChar, 20, objDataTable.Columns["empname"].ColumnName);
           objCmd.Parameters.Add("@createdon", SqlDbType.DateTime, 8, objDataTable.Columns["createdon"].ColumnName);

           SqlDataAdapter adpt = new SqlDataAdapter();
           adpt.InsertCommand = objCmd;
           adpt.UpdateBatchSize = objDataTable.Rows.Count;
           try
           {
               int recordsInserted = adpt.Update(objDataTable);
           }
           catch(Exception ex)
           {
               //
           }

           objConn.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:38:02.210

我真的认为这是因为您在跟踪其自身更改的表上使用**更新方法。**问题是什么都没有改变。设置`AcceptChangesDuringFill = false`以便将行标记为已添加到表中。

```
 objConn.Open();
       /* This doesn't really do anything.
       SqlCommand objCmd = new SqlCommand();
       objCmd.CommandType = CommandType.Text;

       objCmd.Connection = objConn;
       objCmd.CommandText = "select * from temp"; */
       /*table Structure
        *CREATE TABLE [dbo].[temp]([empname] [varchar](20)  NULL,[createdon] [datetime] NULL,[emp_id] [varchar](4) NULL
       ) 
       */
       SqlDataAdapter objDataAdapter = new SqlDataAdapter("select * from temp", objConn);
       //Make sure we don't mark the new rows as unchanged
       objDataAdapter.AcceptChangesDuringFill = false;
       objDataAdapter.Fill(objDataTable);

       SqlCommand objCmd1 = new SqlCommand();
       objCmd1.CommandType = CommandType.Text;
       objCmd1.UpdatedRowSource = UpdateRowSource.None;
       //This is supposed to be objCmd1 !!
       objCmd1.CommandText = "Insert into tempCopy " +
                           " values(@empname,@createdon)";
       /*table Structure
        *CREATE TABLE [dbo].[tempCopy]([empname] [varchar](20)  NULL,[createdon] [datetime] NULL
        ) 
       */
       //This is supposed to be objCmd1 !!
       objCmd1.Parameters.Add("@empname", SqlDbType.VarChar, 20, objDataTable.Columns["empname"].ColumnName);
       objCmd1.Parameters.Add("@createdon", SqlDbType.DateTime, 8, objDataTable.Columns["createdon"].ColumnName);

       SqlDataAdapter adpt = new SqlDataAdapter();
       //This is supposed to be objCmd1 !!
       adpt.InsertCommand = objCmd1;
       adpt.UpdateBatchSize = objDataTable.Rows.Count;
       try
       {
           int recordsInserted = adpt.Update(objDataTable);
       }
       catch(Exception ex)
       {
           //
       }

       objConn.Close(); 
```

我认为这应该可行，您需要更加小心变量命名。objCmd 相当没有意义。如果命令是 cmdSelectData 和 cmdInsertData 它会更清晰。几乎所有东西都是一个对象，所以**obj**只是把代码弄乱了。

# c# - 无法从 WCF Rest 服务返回图像

> ID：12781173
> 
> 赞同：3
> 
> 时间：2012-10-08T11:52:00.090
> 
> 标签：c#, wcf, image, rest

正如主题所说，我从 Wcf 休息服务接收图像时遇到问题。端点似乎没问题，但我只得到空数据。

网络配置：

```
 <service name="RestService.RestServiceImpl" behaviorConfiguration="ServiceBehaviour">
    <endpoint address ="" binding="webHttpBinding"                     contract="RestService.IRestServiceImpl" behaviorConfiguration="web"/>
      <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service> 
```

SVC：

```
 [OperationContract]
    [WebGet(UriTemplate = "GetImage", RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml, BodyStyle = WebMessageBodyStyle.Bare)]
    Stream GetImage();

    public Stream GetImage()
    {
        var ms = new MemoryStream();
        Resource1.batman.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
        WebOperationContext.Current.OutgoingResponse.ContentType = "image/png";
        return ms;
    } 
```

标记：

```
<%@ ServiceHost Language="C#" Debug="true" Service="RestService.RestServiceImpl" CodeBehind="RestServiceImpl.svc.cs" Factory="System.ServiceModel.Activation.WebServiceHostFactory"%> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T20:30:30.820

在返回之前尝试将内存流的位置设置回 0。

# ios - 获取也使用 spotify 的 Facebook 好友

> ID：12781176
> 
> 赞同：1
> 
> 时间：2012-10-08T11:52:03.777
> 
> 标签：ios, facebook, spotify, cocoalibspotify-2.0

我正在使用需要与我的 Spotify 朋友交流的 Spotify API 构建一个 iOS 应用程序。我开始意识到实际上是 facebook 的朋友也在使用 Spotify，而要做到这一点，您需要通过 facebook 进行身份验证才能获得任何类似的信息。因此，接下来我想弄清楚但陷入困境的几件事是：

1.  使用 Spotify SDK，有没有办法判断它是否与您的 Facebook 帐户相关联（因为它不是必需的）。如果是这样，您是否必须进行单独的身份验证？我猜是的。
2.  使用 facebook open graph api，有没有办法获取您也使用 Spotify 的朋友的列表。我知道您可以使用已验证您的应用程序的朋友来结交朋友，但还没有找到了解其他人的方法。不确定是否可能。

根据我在[这里](https://stackoverflow.com/questions/10440689/libstpotify-api-how-can-i-use-a-single-sign-in-process-to-connect-to-both-spot)读到的内容，我正在尝试做的事情是不可能的。或者，如果这是一个巨大的痛苦。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:59:19.820

1.  没有。但是，使用 CocoaLib Spotify，如果用户使用电子邮件地址登录，您可以确定它是 Facebook 帐户，因为普通的 Spotify 用户名不是电子邮件地址。

2.  没有。不过，您可以使用 Facebook API 查看每个朋友的公开收听情况，但这并不理想。

# java - 水平移动 JScrollPane 会导致文本模糊

> ID：12781179
> 
> 赞同：5
> 
> 时间：2012-10-08T11:52:15.090
> 
> 标签：java, swing, jscrollpane, ubuntu-12.04, visual-artifacts

我在标准 JPanel 内的 JScrollPane 内有一个 TextArea。

```
 JPanel panelMain = new JPanel();
    panelMain.setBorder(titledBorder1);
    panelMain.setBounds(new Rectangle(2, 5, 970, 700));
    panelMain.setLayout(null);

    JTextArea fieldBody = new JTextArea();
    JScrollPane fieldBodyScrollPane = new JScrollPane(fieldBody);
    fieldBodyScrollPane.setBounds(70, 140, 790, 500);
    panelMain.add(fieldBodyScrollPane); 
```

当我在一行中输入足够多的文本时，会出现水平旋钮 - 到目前为止还不错。但是当我开始左右移动旋钮时，文本变得模糊（见图）。有趣的是，当我上下移动 textarea 时，并没有发生什么奇怪的事情。

![水平滚动时jscrollpane中的文本模糊](../Images/0c3ce5c7d0de4dca2032b8230c96d239.png)

我使用带有 Unity 的 Ubuntu 12.04。这个图形工件以前从未出现在我面前。任何提示可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T12:13:13.267

```
import java.awt.GridLayout;
import javax.swing.*;
import javax.swing.border.*;

public class CaseForLayoutsNumber547 {

    CaseForLayoutsNumber547() {
        Border titledBorder1 = new TitledBorder("Case for Layouts #547");
        // START: code snippet variant
        JPanel panelMain = new JPanel(new GridLayout());
        panelMain.setBorder(titledBorder1);

        JTextArea fieldBody = new JTextArea(5,40);
        JScrollPane fieldBodyScrollPane = new JScrollPane(fieldBody);
        panelMain.add(fieldBodyScrollPane);
        // END: code snippet variant
        JOptionPane.showMessageDialog(null, panelMain);
    }

    public static void main(String[] args) {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                new CaseForLayoutsNumber547();
            }
        };
        SwingUtilities.invokeLater(r);
    }
} 
```

我在这个 SSCCE 中没有看到任何滚动工件。你？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T18:04:37.100

这是@Andrew 的 SSCCE 展示自己；它看起来与*Ambience*或*Radiance*相同。

![图片](../Images/9f4338e882b8970aa8e6dba067f08004.png)

```
$ lsb_release -a
没有可用的 LSB 模块。
经销商编号：Ubuntu
说明：Ubuntu 12.04.1 LTS
发布时间：12.04
代号：精确
$ java -版本
java版本“1.6.0_24”
OpenJDK 运行时环境 (IcedTea6 1.11.4) (6b24-1.11.4-1ubuntu0.12.04.1)
OpenJDK Client VM（build 20.0-b12，混合模式，共享）

```

附录：仔细查看您的屏幕截图，未能遵守[opacity](http://www.oracle.com/technetwork/java/painting-140037.html#props)属性可能会导致此类渲染伪影，并且默认设置可能因 Look & Feel 实现而异。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T23:50:26.313

此问题发生在 OpenJDK（至少 6 和 7；并且至少在 Linux 上）中，而不会发生在 Oracle Java 6 和 7（在 Linux 上）中。

mKorbel 建议的解决方法对我有用：

```
scrollPane.getViewport().setScrollMode(JViewport.SIMPLE_SCROLL_MODE); 
```

所以我猜这是 OpenJDK 中的一个错误。

# ios - 将图片发布到 Facebook 相册而不贴上关于它的壁纸？

> ID：12781180
> 
> 赞同：0
> 
> 时间：2012-10-08T11:52:15.573
> 
> 标签：ios, facebook, facebook-opengraph, image-uploading

我正在考虑一个两步 OpenGraph 图像上传解决方法（发布到相册，获取照片链接，使用图像 url 调用 OpenGraph），但我需要从用户的墙上隐藏相册帖子。

如果我的怀疑是正确的，我不能沿着 OpenGraph 对象上传图像（这就是我想要解决的问题）。

**那么可以从用户的墙上隐藏相册上传吗？**

还是原来的问题，**可以沿着 OpenGraph 对象上传图像文件吗？**

# c# - 使用 BufferBlock 的好处 在数据流网络中

> ID：12781181
> 
> 赞同：24
> 
> 时间：2012-10-08T11:52:15.597
> 
> 标签：c#, .net, task-parallel-library, tpl-dataflow

我想知道使用链接到一个或多个 ActionBlock 的 BufferBlock 是否有好处，除了节流（使用 BoundedCapacity），而不是直接发布到 ActionBlock（只要不需要节流）。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-08T12:30:03.200

如果您只想将项目从一个块转发到其他几个块，则不需要`BufferBlock`.

但肯定有它有用的情况。例如，如果您有一个复杂的数据流网络，您可能希望从较小的子网络构建它，每个子网络都以自己的方法创建。为此，您需要某种方式来表示一组块。在您提到的情况下，从方法中返回该单曲`BufferBlock`（可能为`ITargetBlock`）将是一个简单的解决方案。

另一个`BufferBlock`有用的示例是，如果您想将项目从多个源块发送到多个目标块。如果您用作`BufferBlock`中介，则不必将每个源块连接到每个目标块。

我敢肯定还有许多其他示例可以使用`BufferBlock`. 当然，如果你看不出有任何理由在你的情况下使用它，那就不要。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-12-03T21:26:36.570

为了补充 svick 的答案，缓冲块还有另一个好处。如果您有一个具有多个输出链接的块并希望在它们之间保持平衡，则必须将输出块变为有界容量 1 并添加一个缓冲块来处理排队。

这是我们计划做的：

*   一些代码块将使用它的 Post(T t) 方法将数据发布到 BufferBlock。
*   此 BufferBlock 使用 BufferBlock 的 LinkTo t) 方法链接到 3 个 ActionBlock 实例。

请注意，BufferBlock 不会将输入数据的副本移交给它链接到的所有目标块。相反，它只对一个目标块这样做。这里我们期望当一个目标忙于处理请求时。它将被移交给另一个目标。现在让我们参考下面的代码：

```
static void Main(string[] args)
{
    BufferBlock<int> bb = new BufferBlock<int>();

    ActionBlock<int> a1 = new ActionBlock<int>(a =>
    {
        Thread.Sleep(100);
        Console.WriteLine("Action A1 executing with value {0}", a);
    });

    ActionBlock<int> a2 = new ActionBlock<int>(a =>
    {
        Thread.Sleep(50);
        Console.WriteLine("Action A2 executing with value {0}", a);
    });

    ActionBlock<int> a3 = new ActionBlock<int>(a =>
    {
        Thread.Sleep(50);
        Console.WriteLine("Action A3 executing with value {0}", a);
    });

    bb.LinkTo(a1);
    bb.LinkTo(a2);
    bb.LinkTo(a3);

    Task t = new Task(() =>
        {
            int i = 0;
            while (i < 10)
            {
                Thread.Sleep(50);
                i++;
                bb.Post(i);
            }
        }
    );

    t.Start();
    Console.Read();
} 
```

执行时会产生以下输出：

*   以值 1 执行的动作 A1
*   以值 2 执行的动作 A1
*   以值 3 执行的动作 A1
*   以值 4 执行的动作 A1
*   以值 5 执行的动作 A1
*   以值 6 执行的动作 A1
*   以值 7 执行的动作 A1
*   以值 8 执行的动作 A1
*   以值 9 执行的动作 A1
*   以值 10 执行的动作 A1

这表明只有一个目标实际上在执行所有数据，即使它很忙（由于有意添加的 Thread.Sleep(100)）。为什么？

这是因为默认情况下，所有目标块本质上都是贪婪的，并且即使它们无法处理数据也会缓冲输入。为了改变这种行为，我们在初始化 ActionBlock 时将 DataFlowBlockOptions 中的 Bounded Capacity 设置为 1，如下所示。

```
static void Main(string[] args)
{
    BufferBlock<int> bb = new BufferBlock<int>();
    ActionBlock<int> a1 = new ActionBlock<int>(a =>
        {
            Thread.Sleep(100);
            Console.WriteLine("Action A1 executing with value {0}", a);
        }
        , new ExecutionDataflowBlockOptions {BoundedCapacity = 1});
    ActionBlock<int> a2 = new ActionBlock<int>(a =>
        {
            Thread.Sleep(50);
            Console.WriteLine("Action A2 executing with value {0}", a);
        }
        , new ExecutionDataflowBlockOptions {BoundedCapacity = 1});
    ActionBlock<int> a3 = new ActionBlock<int>(a =>
        {
            Thread.Sleep(50);
            Console.WriteLine("Action A3 executing with value {0}", a);
        }
        , new ExecutionDataflowBlockOptions {BoundedCapacity = 1});

    bb.LinkTo(a1);
    bb.LinkTo(a2);
    bb.LinkTo(a3);

    Task t = new Task(() =>
    {
        int i = 0;
        while (i < 10)
        {
            Thread.Sleep(50);
            i++;
            bb.Post(i);
        }
    });

    t.Start();
    Console.Read();
} 
```

这个程序的输出是：

*   以值 1 执行的动作 A1
*   以值 3 执行的动作 A2
*   以值 2 执行的动作 A1
*   以值 6 执行的动作 A3
*   以值 7 执行的动作 A3
*   以值 8 执行的动作 A3
*   以值 5 执行的动作 A2
*   以值 9 执行的动作 A3
*   以值 4 执行的动作 A1
*   以值 10 执行的动作 A2

这显然是数据在三个 ActionBlock(s) 中的预期分布。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-02-25T19:51:12.677

不，第二个示例由于多种原因无法编译： 只能为“分组”数据流块设置 greedy=false - 而不是为执行块设置；然后必须通过 GroupingDataflowBlockOptions 设置 - 而不是 DataflowBlockOptions；然后将其设置为属性值“{ Greedy = false }”而不是构造函数参数。

如果要限制操作块的容量，请通过设置 DataflowBlockOptions 的 BoundedCapacity 属性的值来实现（尽管正如 OP 所述，他们已经知道此选项）。像这样：

```
var a1 = new ActionBlock<int>(
            i => doSomeWork(i), 
            new ExecutionDataflowBlockOptions {BoundedCapacity = 1}
        ); 
```

# svg - 全局存储 SVG 剪辑路径的最佳实践

> ID：12781185
> 
> 赞同：1
> 
> 时间：2012-10-08T11:52:34.683
> 
> 标签：svg

我在不同的内联 SVG 中使用相同的 clipPath：

[http://jsfiddle.net/meo/4nBnS/](http://jsfiddle.net/meo/4nBnS/)

```
<svg class="svg-graphic" width="0" height="0" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" version="1.1">
    <clipPath id="hex-mask">
        <polygon points="270,0 0,160 0,485 270,645 560,485 560,160"></polygon>
    </clipPath>
</svg>

<svg class="svg-graphic" width="180" height="200" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" version="1.1">
    <rect clip-path="url(#hex-mask)" x="0" y="0" width="100%" height="100%" fill="purple"  />
</svg>

<svg class="svg-graphic" width="180" height="200" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" version="1.1">
    <rect clip-path="url(#hex-mask)" x="0" y="0" width="100%" height="100%" fill="red"  />
</svg> 
```

使用我想使用的所有路径制作 0x0px SVG 元素是一个好习惯吗？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:08:43.230

通常，您会在 <defs> 元素内（在页面上的 <svg> 元素之一中）定义可重用组件。<defs> 放置在哪个 <svg> 元素中并不重要，但我建议您将其作为第一个子元素放在页面上的第一个 svg 中（因为可以解析引用首次使用时直接使用）。

# python - 使用 web2py 从 POST ajax 调用中获取数据

> ID：12781187
> 
> 赞同：2
> 
> 时间：2012-10-08T11:52:36.847
> 
> 标签：python, ajax, web2py

我正在对 python 函数进行 AJAX 调用。该函数根据发送给该函数的信息进行数据库查询。

我不知道如何获取发送到函数的变量。

我正在使用 request.vars.variableName，并且我知道该函数是有效的，它只是没有接收到正确使用的变量。如何使用 web2py 从 python 函数获取 POST 发送的变量？

ETA：这是我使用的代码

```
jQuery.ajax(
        {type: "POST",
        url: '../../Printed/printedballoons/cost.json', //python function
        data: typeSelected,//data sent to server
        dataType: 'json',
        error: function(msg){$("#ajaxerror").html(msg);},
        success: function(data){
            balloonPrice = data.cost;
        },
        timeout: 2000}
    ); 
```

错误出现在“数据：typeSelected”行中，变量名称未与任何数据关联，因此 python 查询：

```
cost=db(db.balloonprices.type==request.vars.typeSelected).select(db.balloonprices.cost) 
```

正在寻找“”，而不是数据库中实际存在的任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T20:40:14.767

这对我有用：

AJAX 调用：

```
 $.ajax({
          type: "POST",
          url: "/app/func",
          data: "array="+JSON.stringify(tempArray)
       }).done(function( msg ) { }); 
```

控制器：

```
def func():    
   temparray = json.loads(request.post_vars.array) 
```

希望它会帮助你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T22:19:02.953

```
request.post_vars 
```

`request.vars`如果没有 request.get_vars ，它们也会被复制到

# c# - 使用具有外部 xmlns 引用的 XmlSerializer 反序列化

> ID：12781188
> 
> 赞同：0
> 
> 时间：2012-10-08T11:52:38.727
> 
> 标签：c#, xml, serialization, xsitype

我需要阅读越来越多的 XML 格式的 BCP (t-sql) 格式文件。我使用 xsd.exe 和一些 BCP 格式文件创建 xsd 文件，并尝试将 xml 文件作为对象读取。但它失败了：

未处理的异常：System.InvalidOperationException：XMLdocument (4, 6) 中存在错误。---> System.InvalidOperationException：无法识别指定的类型：name='CharTerm'，namespace='http://schemas.microsoft.com/sqlserver/2004/bulkload/format'，在。

XML 文件是这样的：

```
<?xml version="1.0" encoding="utf-8" ?>
<BCPFORMAT xmlns="http://schemas.microsoft.com/sqlserver/2004/bulkload/format" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <RECORD>
    <FIELD ID="1" xsi:type="CharTerm" TERMINATOR=";" MAX_LENGTH="32"/>
    <FIELD ID="2" xsi:type="CharTerm" TERMINATOR=";" MAX_LENGTH="4"/>
    <FIELD ID="3" xsi:type="CharTerm" TERMINATOR=";" MAX_LENGTH="4"/>
    <FIELD ID="4" xsi:type="CharTerm" TERMINATOR=";" MAX_LENGTH="20"/>
    <FIELD ID="5" xsi:type="CharTerm" TERMINATOR="\r\n" MAX_LENGTH="16"/>
  </RECORD>
  <ROW>
    <COLUMN SOURCE="1" NAME="col1" xsi:type="SQLNVARCHAR"/>
    <COLUMN SOURCE="2" NAME="col2" xsi:type="SQLINT"/>
    <COLUMN SOURCE="3" NAME="col3" xsi:type="SQLINT"/>
    <COLUMN SOURCE="4" NAME="col4" xsi:type="SQLNVARCHAR"/>
    <COLUMN SOURCE="5" NAME="col5" xsi:type="SQLFLT4"/>
  </ROW>
</BCPFORMAT> 
```

我像这样阅读 XML 文件：

```
 FileStream fs = File.OpenRead(formatFileName);
        XmlSerializer serializer = new XmlSerializer(typeof(FormatSchemasXml.BCPFORMAT));
        FormatSchemasXml.BCPFORMAT bcp_format = (FormatSchemasXml.BCPFORMAT)serializer.Deserialize(fs);
        fs.Close(); 
```

似乎没有使用外部 xmlns 引用。我搜索了很多文档，但没有看到如何解决这个问题。最好不必修改 BCP XML 格式文件（我想按原样使用它们）。

建议？

# c++ - C ++查找和擦除多图元素

> ID：12781201
> 
> 赞同：1
> 
> 时间：2012-10-08T11:53:38.873
> 
> 标签：c++, indexing, iterator, multimap, erase

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T11:57:50.213

Not that I favour your approach, but if the `int` is distance between `begin()` and the iterator in question, you can just use

```
c.begin() + int_value 
```

or

```
std::advance(c.begin(), int_value) 
```

to get the iterator. The second version is needed for iterators which are not random-access-iterators.

In the interest of your personal sanity (and the program's speed), I'd suggest you return the iterator directly in some form.

There are many possible interfaces that solve this one way or the other. What I would call the "old C way" would be returning by an out parameter:

```
bool find_stuff(stuff, container::iterator* out_iter) {
 ...
 if(found && out_iter)
   *out_iter = found_iter;
 return found;
} 
```

use it:

```
container::iterator the_iter;
if(find_stuff(the_stuff, &the_iter)) ... 
```

or

```
if(find_stuff(the_stuff, 0)) // if you don't need the iterator 
```

This is not idiomatic C++, but Linus would be pleased with it.

The second possible and theoretically sound version is using something like `boost::optional` to return the value. This way, you return either some value or none.

```
boost::optional<container::iterator> find_stuff(stuff) {
 ...
 if(found && out_iter)
   return found_iter;
 return boost::none;
} 
```

Use:

```
boost::optional<container::iterator> found = find_stuff(the_stuff);
if(found) {
  do something with *found, which is the iterator.
} 
```

or

```
if(find_stuff(the_stuff)) ... 
```

Third possible solution would be going the `std::set::insert` way, ie. returning a pair consisting of a flag and a value:

```
std::pair<bool, container::iterator> find_stuff(stuff) {
 ...
 return std::make_pair(found, found_iter);
} 
```

Use:

```
std::pair<bool, container::iterator> found = find_stuff(the_stuff);
if(found.first) ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T12:20:54.027

Consider to change your `mulitmap<Person,Hoobby>` to `set<pair<Person,Hobby> >` - then you will not have problems you have now. Or consider to change to `map<Person, set<Hobby> >`. Both options will not allow to insert duplicate pairs.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T12:42:51.700

Use 2 sets(not multi sets) one for hobbies and one for persons, these two acts as filters so you don't add the same person twice(or hobbie). the insert opertations on these sets gives the iterator for the element that is inserted(or the "right" iterator for element if it allready was inserted). The two iterators you get from inserting into hobbies_set and person_set are now used as key and value in a multimap

Using a third set(not multi_set) for the relation instead of a multi_map, may give the advantage of not needing to check before inserting a relation if it is allready there it will not be added again, and if it's not there it will be added. In both ways it will return an iterator and bool(tells if it was allready there or if it was added)

datastructures:

```
typedef std::set<Hobbie> Hobbies;
typedef std::set<Person> Persons;
typedef std::pair<Hobbies::iterator,bool> HobbiesInsertRes;
typedef std::pair<Persons::iterator,bool> PersonsInsertRes;
struct Relation {
  Hobbies::iterator hobbieIter;
  Persons::iterator personIter;
  // needed operator<(left for the as an exercies for the reader);
};
typedef set<Relation> Relations;

Hobbies hobbies;
Persons persons;
Relations relations; 
```

insert:

```
HobbiesInsertRes hres = hobbies.insert(Hobbie("foo"));
PersonsInsertRes pres = persons.insert(Person("bar"));
relations.insert(Relation(hres.first, pres.first));
// adds the relation if does not exists, if it allready did exist, well you only paid the same amount of time that you would have if you would to do a check first. 
```

lookup:

```
// for a concrete Person-Hobbie lookup use 
relations.find(Relation(Hobbie("foo"),Person("Bar")));

// to find all Hobbies of Person X you will need to do some work.
// the easy way, iterate all elements of relations
std::vector<Hobbie> hobbiesOfX;
Persons::iterator personX = persons.find(Person("bar"));
std::for_each(relations.begin(), relations.end(), [&hobbiesOfBar, personX](Relation r){
  if(r.personIter = personX)
    hobbiesOfX.push_back(r.hobbieIter);
});

// other way to lookup all hobbies of person X
Persons::iterator personX = persons.find(Person("bar"));  
relations.lower_bound(Relation(personX,Hobbies.begin()); 
relations.upper_bound(Relation(personX,Hobbies.end());
// this needs operator< on Relation to be implemented in a way that does ordering on Person first, Hobbie second. 
```

# javascript - 使用 CKEditor 动态添加文本区域

> ID：12781203
> 
> 赞同：4
> 
> 时间：2012-10-08T11:53:41.777
> 
> 标签：javascript, ckeditor, dynamically-generated

我正在尝试创建一个动态表单，您可以在其中添加新的“章节”，点击最多 10 个按钮。这会很“容易”，但我也希望文本字段能够实现 CKEditor，但我无法让它工作。我很顺利地添加了章节，我只能编辑它们的最后一个实例。此外，如果我编辑最后一个并单击“添加新章节”，最后一个将被删除。我的尝试基于[这个线程](http://cksource.com/forums/viewtopic.php?t=24039)。

到目前为止我得到的 Javascript 代码：

```
num_chapter = 1;
var editor = new Array();

function createEditor()
  {
  if (num_chapter <= 10)
    {
    var num=num_chapter+1;
    document.getElementById('editor').innerHTML += "<br><br><h3 style='display:inline'>Chapter " + num + ": </h3><input style='display:inline' type='text' name='titlechapter_" + num + "' placeholder='Title for chapter " + num + "'><br><br>";    

    // Create a new editor inside the <div id="editor">, setting its value to html
    var config = {};
    editor[num_chapter] = CKEDITOR.appendTo( 'editor' , config, '' );
    }
  else
    {
    document.getElementById('chapters').innerHTML += "<br />Maximum is 10 chapters.";
    }
  num_chapter += 1;
  } 
```

HTML 代码：

```
<h3 style='display:inline'>Chapter 1: </h3> <input style='display:inline' type="text" name="titlechapter_1" placeholder="Title chapter 1"><br><br>
<textarea class="ckeditor" onChange="editing('Chapter 1');" name="chapter_1"></textarea>
  <div id="editor">
  </div><br>
  <input type="button" onclick="createEditor(); editing('Chapter 1');" value=" Add chapter "> 
```

如您所见，我试图将编辑器对象放入一个数组中，但没有成功。我不太懂 Javascript（不是说几乎什么都没有），所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T12:52:09.210

我终于解决了，总共花了 3 到 4 个小时。这比我想象的要容易，但并不那么优雅。这可以通过 php 和 javascript 来实现，使其“稍微”更优雅，但如果您的文本字段很少，只需简单的旧 html 和 Javascript 也可以解决问题。

首先，HTML/PHP：

```
<h3 style='display:inline'>Chapter 1: </h3> 
  <input style='display:inline' type="text" name="titlechapter_1" placeholder="Title chapter 1"><br><br>
  <textarea class="ckeditor" onChange="editing('Chapter 1');" name="chapter_1"></textarea>
  <?php for ($i=2; $i<=10; $i++)
    echo "<div id='div_editor_".$i."' style='display:none;'><textarea id='editor_".$i."' name='editor".$i."'></textarea></div>"; ?>
  <br><br>
  <input type="button" onclick="createEditor();" value=" Add chapter ">
<br><br> 
```

意识到它创建了所有的 div，但由于其中没有任何内容，因此它们不会出现。然后，Javascript：

```
num_chapter = 2;
var editor = new Array();

function createEditor()
  {
  if (num_chapter <= 10)
    {
    toggle_visibility('div_editor_' + num_chapter );

    document.getElementById('div_editor_' + num_chapter).insertAdjacentHTML( "afterbegin", "<br><br><h3 style='display:inline'>Chapter " + num_chapter + ": </h3><input style='display:inline' type='text' name='titlechapter_" + num_chapter + "' placeholder='Title for chapter " + num_chapter + "'><br><br>");

    // Create a new editor inside the <div id="editor">, setting its value to html
    CKEDITOR.replace( 'editor_' + num_chapter );

    num_chapter += 1;
    }
  else
    {
    alert("Sorry, maximum is 10 chapters.");
    }
  } 
```

这段代码将生成 10 章与 CKeditor 一起正常工作的章节。如果尝试创建第 11 个，则会在弹出窗口中显示警告。重要的是这条线`for ($i=1; $i<10; $i++)`、这条线`num_chapter < 10`和这条线`num_chapter == 10`都具有相同的值（在我的例子中是 10）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-03T01:46:02.263

经过一番反复试验，我终于找到了解决这个问题的方法。

这是为了回答可能像我一样出现在这里的搜索，寻找“如何动态创建 ckeditor 实例”。

诀窍是除了 ckeditor.js 库之外，还要在 html 脚本中包含 CKEDITOR 中包含的适配器库

```
ckeditor/adapters/jquery.js 
```

并在您的 javascript 中初始化这些元素

```
 var elem = $(this).find('.your_selector')
 elem.ckeditor() 
```

（确保 .your_selector 是 textarea 的类，它将被转换为 ckeditor 实例）

希望这对可能仍在寻找此线程的人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-27T09:34:41.633

**将CKEditor 4**动态附加到创建 CKEditor 的多个实例的元素

Javascript

```
function createNewEditor(targetElement) {
  var element = document.createElement("textarea");
  $(element)
    .addClass(".ckeditor")
    .appendTo(targetElement);
  return CKEDITOR.replace(element);
}

$(document).ready(function() {
  $(".ckeditor").each(function(_, ckeditor) {
    CKEDITOR.replace(ckeditor);
  });

  $(".chapter-video").each(function(_, chapterVideo) {
    var chapterVideoInput = $(chapterVideo).find(".file-input");
    var chapterFileUploadName = $(chapterVideo).find(".upload-file-name");
    $(chapterVideoInput).on("change", function(e) {
      var filesLength = e.target.files.length;
      if (filesLength) {
        $(chapterFileUploadName)
          .find("span")
          .text(e.target.files[0].name);
      }
    });
  });
  $(".add-chapter-para").each(function(_, addParaBtn) {
    var addTo = $(addParaBtn).data("add-to");
    $(addParaBtn).on("click", function() {
      createNewEditor(addTo);
    });
  });
}); 
```

HTML

```
<div class="container">
  <form action="#">
    <div class="" id="main-container">
      <div class="editor">
        <textarea class="ckeditor" name="chapterContent[]"></textarea>
      </div>
    </div>
    <div class="my-2">
      <button class="btn btn-primary">Submit</button>
    </div>
  </form>
</div>

<hr />
<button
  class="btn btn-danger add-chapter-para"
  data-add-to="#main-container"
  type="button"
>
  Add Paragraph
</button> 
```

Button Element 有一个`data-attribute`我们想要添加 ckeditor 的元素。

[工作 Codepen 链接](https://codepen.io/chandrashekhar/pen/WNbWbQo?editors=1010)

# php - 不使用 HTML 的富文本编辑器

> ID：12781204
> 
> 赞同：0
> 
> 时间：2012-10-08T11:53:48.670
> 
> 标签：php, javascript, textfield

我希望在我的应用程序中添加一个轻量级文本编辑器（在 php/js 中），就像在 stackoverflow、维基百科、论坛等中找到的那样，以获取用户的输入。

我不想使用像 TinyMCE 这样的解决方案，因为它们只是来回发送 HTML。然后需要对 HTML 进行清理，这已经浪费了很多资源。

有谁知道可以商用的吗？免费或付费。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:57:07.607

Stackoverflow 使用降价。我相信我在我的网站[https://github.com/derobins/wmd](https://github.com/derobins/wmd)上使用了这个版本，这用于 C# 后端[http://code.google.com/p/markdownsharp/](http://code.google.com/p/markdownsharp/)我确实记得需要调整 javascript 设置和css/html 但它不是很难

# javascript - 实时检测浏览器大小 - jQuery / JavaScript

> ID：12781205
> 
> 赞同：20
> 
> 时间：2012-10-08T11:53:53.953
> 
> 标签：javascript, jquery, browser

是否有 jQuery 插件或使用直接 JavaScript 来检测浏览器大小的方法。

我更喜欢结果是“实时”的，所以如果宽度或高度发生变化，结果也会发生变化。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-10-08T12:37:27.060

**JavaScript**

```
function jsUpdateSize(){
    // Get the dimensions of the viewport
    var width = window.innerWidth ||
                document.documentElement.clientWidth ||
                document.body.clientWidth;
    var height = window.innerHeight ||
                 document.documentElement.clientHeight ||
                 document.body.clientHeight;

    document.getElementById('jsWidth').innerHTML = width;  // Display the width
    document.getElementById('jsHeight').innerHTML = height;// Display the height
};
window.onload = jsUpdateSize;       // When the page first loads
window.onresize = jsUpdateSize;     // When the browser changes size 
```

**jQuery**

```
function jqUpdateSize(){
    // Get the dimensions of the viewport
    var width = $(window).width();
    var height = $(window).height();

    $('#jqWidth').html(width);      // Display the width
    $('#jqHeight').html(height);    // Display the height
};
$(document).ready(jqUpdateSize);    // When the page first loads
$(window).resize(jqUpdateSize);     // When the browser changes size 
```

[jsfiddle 演示](http://jsfiddle.net/Matt_Coughlin/Uvh6e/1/)

**编辑：**更新了 JavaScript 代码以支持 IE8 和更早版本。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-08T11:56:11.353

您可以使用

```
function onresize (){
   var h = $(window).height(), w= $(window).width();
   $('#resultboxid').html('height= ' + h + ' width: ' w);
}
 $(window).resize(onresize ); 

 onresize ();// first time; 
```

html:

```
<span id=resultboxid></span> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T11:55:21.067

这应该返回可见区域：

```
document.body.offsetWidth
document.body.offsetHeight 
```

我猜这总是等于浏览器的大小？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-22T06:02:58.180

在任何你想要的地方使用宽度和高度变量......当浏览器大小改变时，它也会改变变量值......

```
$(window).resize(function() {
    width = $(this).width());
    height = $(this).height());
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T11:56:01.550

你的意思是这样的吗`window.innerHeight; window.innerWidth` `$(window).height(); $(window).width()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T11:58:21.457

您可以尝试在重新调整大小时添加甚至监听器，例如

```
window.addEventListener('resize',CheckBrowserSize,false);
function CheckBrowserSize() 
{
    var ResX= document.body.offsetHeight;
    var ResY= document.body.offsetWidth;
} 
```

# java - 在java中压缩和解压缩7z文件

> ID：12781207
> 
> 赞同：18
> 
> 时间：2012-10-08T11:54:01.777
> 
> 标签：java, compression, 7zip

我想使用 java 代码将文件压缩成 zip、rar 和 7z 格式。我还想在指定位置解压缩这些文件。谁能告诉我如何在java中使用7-zip压缩和解压缩文件？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-04T09:12:01.473

我用过：sevenzipjbinding.jar Sevenzipjbinding-Allplatforms.jar

我现在可以使用这些 jar 解压缩文件。

试试这个链接解压：http: [//sourceforge.net/projects/sevenzipjbind/forums/forum/757964/topic/3844899](http://sourceforge.net/projects/sevenzipjbind/forums/forum/757964/topic/3844899)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-06T08:47:37.053

[SevenZipBinding](http://sevenzipjbind.sourceforge.net/)非常适合解压缩，它甚至可以自动检测格式。问题是它不能压缩。[您可以使用ZIP4J](http://www.lingala.net/zip4j/)创建 zip 存档。然而，它只提供普通的拉链。LZMA 显然可以将单个文件压缩成 7z 的档案，但我还没有尝试过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-31T10:31:50.570

您还可以编写批处理脚本或只是从 java 调用的内联命令执行来提取和压缩。请注意，此选项仅适用于 Windows 平台，并且需要一些管理技能。7zip 提供了一个 exe 文件来促进这一点。我已经将它用于我的一个实用程序并且工作得很好。如果您有兴趣，我可以将代码发送给您。

# android - Roboguice 在 JUnit 测试中不起作用

> ID：12781209
> 
> 赞同：1
> 
> 时间：2012-10-08T11:54:09.223
> 
> 标签：android, unit-testing, junit, guice, roboguice

我正在尝试使用使用 roboguice 的类编写一些测试。不幸的是，guice 似乎根本没有注入任何东西。

我的设置是这样的...

*   我正在使用 Intellij
*   我有 2 个 intellij 模块（1 个用于代码，1 个用于测试）
*   我有 2 个单独的模块类，它们扩展了定义绑定的 AbstractModule(roboguice 类)
*   我有 2 个 roboguice.xml 文件指向这样的包...

> ```
>  <?xml version="1.0" encoding="utf-8"?>
>          <resources>
>              <string-array name="roboguice_modules">
>                 <item>com.evertaletest</item>
>              </string-array>
>          </resources> 
> ```

这个设置看起来正确吗？任何注入的类目前都是空的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T06:37:28.090

我相信`<item>`条目需要给出你的模块类的名称，而不仅仅是包。

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <string-array name="roboguice_modules">
    <item>com.evertaletest.YourModuleForCode</item>
  </string-array>
</resources> 
```

但这仅与您的生产代码相关。对于测试，您必须在代码中设置模块，而不是使用 XML。

在您的测试设置中：

```
RoboGuice.setBaseApplicationInjector(application, 
    RoboGuice.DEFAULT_STAGE, new YourModuleForTest()); 
```

# macos - 使用自定义主文件夹设置创建混合 Mac 和 Windows ISO

> ID：12781214
> 
> 赞同：1
> 
> 时间：2012-10-08T11:54:23.980
> 
> 标签：macos, terminal, iso, autorun, hybrid

我正在尝试创建能够在 Windows 机器上自动运行并在 Mac OSX 上使用自定义背景自动打开主文件夹的混合 CD。CD 必须在 Flash 中启动一个应用程序，同时显示一些 PDF 文件。

这里是 CD 文件和文件夹的方案：

```
application.exe <-- the app for windows
autorun.inf <-- the autorun file for windows
application.app <-- the app for mac osx
/documents <-- the folder which contains the PDF files for both the applications
/background <-- the folder which contains the background image for Mac OSX 
```

按照这个[答案](https://stackoverflow.com/questions/452289/creating-a-dual-mac-win-autorun-cd)，我能够为 mac 设置背景文件夹图像并使用以下命令创建第一个混合 ISO：

```
hdiutil makehybrid -o [image.iso] [my_project_folder] -iso -hfs -hide-iso [file to hide on windows] -hide-hfs [file to hide on mac] 
```

不幸的是，使用此命令我无法隐藏多个文件；对于 mac，我至少需要 2 个（.exe 和 .inf）。即使
当我打开 ISO 时背景结果正确设置为我的原始文件夹，它似乎也会丢失它以及其他设置，如窗口和图标尺寸。

* * *

**更新：**

hdiutil 命令隐藏多个文件的正确语法如下：

```
hdiutil makehybrid -o image.iso source_folder -iso -hfs -hide-iso cd_folder/application.app -hide-hfs "{cd_folder/application.exe,cd_folder/autorun.inf}" 
```

不幸的是，文件夹背景图像、窗口尺寸和图标位置仍然在 iso 文件中消失。可以再次重新设置它们，但每次弹出iso并重新安装OSX似乎忘记了我的偏好......

* * *

**解决方案：**

经过多次尝试，我终于找到了原因： Mountain Lion 上的
读写挂载命令`hdiutil attach -readwrite myCD.iso`不起作用
因此操作系统没有保存/记住我的偏好。
我注意到这种行为也试图用`Toast`;创建混合图像 当我尝试安装`myCD.toast`和更改图标位置时，它是不允许的（我意识到了这个问题）。

因此，我用我的旧雪豹复制了这个过程，一切都很完美！
此外，使用 Toast 创建混合 CD 确实更容易且完全可定制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:32:16.277

我要做的是制作一个可读写的磁盘映像，设置背景图片、图标大小等，卸载映像，并确保它在重新安装时正确恢复。为了在安装映像时打开指定的文件夹，我使用`bless`命令。一旦读写图像按我的意愿工作，我就使用读写图像作为源来制作混合图像。我制作了一[组 AppleScript 程序](http://www.jwwalker.com/pages/hybrid-cd.html)来简化这个过程。

# sql - 数据库/数据仓库中的多个冲突事实

> ID：12781215
> 
> 赞同：3
> 
> 时间：2012-10-08T11:54:29.187
> 
> 标签：sql, data-warehouse, business-intelligence

我们的组织目前正在构建一个新的数据仓库。我们实际上可以使用从 DW 社区借来的一些技术，例如 ETL 处理来整合数据、“kimbal”风格的非规范化维度等。总体而言，数据仓库对我们的组织来说仍然是相当新的，但我们我们正在学习这些概念。

问题：我们有多种数据来源，而事实来源往往相互矛盾。例如，我们有一个 Master Person Index，我们在 ETL 期间使用基于分数的匹配算法将入站人员与现有人员进行匹配，因此即使入站记录不完全匹配，我们也可以根据其他事物进行评分比如邮政编码半径。

问题来了：处理来自两个或多个来源的多个版本的事实的标准方法是什么？

我了解数据仓库的主要思想之一是保留我们正在做的任何事实的运行历史。当记录由一个入站来源维护时，这一切都很好，我们会随着时间的推移保留该事实的历史。当两个不同的来源可能每天更新有两个不同的事实时，就会出现问题，例如来源 A 说名字是 Mary Smith，来源 B 说名字是 Mary Jane 每天都在改变这个值！基于匹配算法，我们确信它是同一个人，但由于我们的历史样式表，它基本上每天都在两个名字之间来回切换，因为它从每个数据源读取名字作为“变化”。

一个示例表：

```
first_name  last_name    source    last_updated
Mary        Smith        A         5/2/12 1:00am
Mary        Jane         B         5/2/12 2:00am
Mary        Smith        A         5/3/12 1:00am
Mary        Jane         B         5/3/12 2:00am
Mary        Smith        A         5/4/12 1:00am
Mary        Jane         B         5/4/12 2:00am
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T12:23:19.997

拥有一张存储您的外部数据的表：

```
 id | first_name | last_name | source | external_unique_id | import_date
----+------------+-----------+--------+--------------------+-------------
  1 | Mary       | Smith     |    A   |     abcdefg123     | 5/2/12 1:00am
  2 | Mary       | Jane      |    B   |     1234567abc     | 5/2/12 2:00am 
```

然后有一个包含清理数据的第二个表：

```
 id | first_name | last_name 
----+------------+-----------
  1 | Mary       | Jane-Smith     (or whatever) 
```

然后有一个两者之间的映射表。

```
 local_person_id | foreign_person_id
-----------------+-------------------
       1         |        1 
       1         |        2 
```

或大致相似的东西。

目标是从您的来源加载事实一次，并保留它们。

然后使用您的模糊逻辑将它们与某处的主记录相关联。只有在加载新事实或更改旧事实时才需要这样做。

不过，您可以选择使用什么`last_name`。但在没有确定数据的情况下，这几乎是任意的。例如：从最近加载的事实中选择姓氏。

您仍然可以快速简单地将主数据与子事实、它们的来源和相应的数据相关联。但是您的仓库中有一个统一的实体来挂载这些外部事实。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T13:44:00.307

关于术语的一件事-您列出的是“属性”，而不是“事实”。事实是您对一组维度属性采取的度量。（例如，此“人”下的订单，或此客户最近订单的美元价值等）。在这种情况下，您有多个维度属性来源，每个来源都被认为是“相同的”。

@Dems 方法是一种方法（也是一种很好的方法），可以将清理后的数据与暂存/操作数据集分开。

另一个，如果您需要在报告中访问两个数据集，同时仍保持“干净”版本，则将所有属性放在您的人员/客户维度上：

```
 FIRST_NAME
   LAST_NAME
   SOURCE1_FIRST_NAME
   SOURCE1_LAST_NAME
   SOURCE2_FIRST_NAME
   SOURCE2_LAST_NAME 
```

对于用户社区期望从源 2 中看到名称的度量报告，您可以使用 source2 属性。对于期待来源 1 的人，请使用它。对于寻找“符合”名称的处理结果的人，请使用 main 属性。

# android - 亚马逊 iap 在发布模式下不起作用

> ID：12781217
> 
> 赞同：1
> 
> 时间：2012-10-08T11:54:34.907
> 
> 标签：android, amazon, in-app-purchase

我正在将亚马逊 iap 集成到我的 android 应用程序中。准备提交（签名和混淆）的发布版本在我的手机上以沙盒模式运行良好。

但是，在提交应用程序并从亚马逊市场安装后，付款不起作用。

我可以看到`PurchasingManager.initiateGetUserIdRequest()`成功返回用户对象，但没有显示我想要购买的项目所需的对话框。

我真的很困惑。有什么建议么 ？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-08T05:42:42.057

检查你的proguard ..不要混淆他们的任何代码。在您的 proguard 条目中准确写下他们所说的内容， [https://developer.amazon.com/sdk/in-app-purchasing/sample-code/code-obfuscation.html](https://developer.amazon.com/sdk/in-app-purchasing/sample-code/code-obfuscation.html)

# c# - 如何检查已选中的 datagridview 复选框

> ID：12781218
> 
> 赞同：0
> 
> 时间：2012-10-08T11:54:34.373
> 
> 标签：c#, datagridview

我进行了艰苦的搜索，但无法找到如何检查已选中的 datagridview 复选框

我正在使用 C# 代码，我想知道如何检查已选中哪些复选框并保存行索引，以便我可以查看数据网格视图信息

我已经添加了复选框

到目前为止，这是我的代码“

```
dataGridView1.ColumnCount = 3;
            dataGridView1.Columns[0].Name = "Product ID";
            dataGridView1.Columns[1].Name = "Product Name";
            dataGridView1.Columns[2].Name = "Product Price";

            string[] row = new string[] { "1", "Product 1", "1000" };
            dataGridView1.Rows.Add(row);
            row = new string[] { "2", "Product 2", "2000" };
            dataGridView1.Rows.Add(row);
            row = new string[] { "3", "Product 3", "3000" };
            dataGridView1.Rows.Add(row);
            row = new string[] { "4", "Product 4", "4000" };
            dataGridView1.Rows.Add(row);

            DataGridViewCheckBoxColumn chk = new DataGridViewCheckBoxColumn();
            dataGridView1.Columns.Add(chk);
            chk.HeaderText = "Check Data";
            chk.Name = "chk"; 
```

"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:32:56.470

尝试使用此代码：

```
for (int i = 0; i <= GridView1.Rows.Count - 1; i++)
        {

            GridViewRow row = GridView1.Rows[i];
            CheckBox Ckbox = (CheckBox)row.FindControl("CheckBox2");
            if (Ckbox.Checked)
            {
               //........

            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:37:47.130

```
foreach(DataGridViewRow row in datagridview.Rows)
{
    foreach(DataGridViewCell cell in row.Cells)
    {
        if(cell is DataGridViewCheckBoxCell)
        {
            isChecked = (datagridview.GetChildByPoint(new Point(cell.ColumnIndex, cell.RowIndex)) as CheckBox).Checked;
        }
    }
} 
```

这可能会解决您的问题。如果您设置了列的 TrueValue 和 FalseValue，那么您可以更轻松地根据这些值检查当前值并推断其检查状态。

# ios - ShareKit 2.0 脸书分享网址

> ID：12781219
> 
> 赞同：0
> 
> 时间：2012-10-08T11:54:36.097
> 
> 标签：ios, xcode, facebook, sharekit

我有以下代码用于使用 ShareKit 与 facebook 共享：

```
-(void)buttonAction:(id)sender
{
[SHK setRootViewController:self];
SHKItem *facebookItem = [[SHKItem alloc] init];

    facebookItem = [SHKItem URL:[NSURL URLWithString:@"www.google.com"] title:@"Some test title"];

    facebookItem.facebookURLSharePictureURI = @"www.myTestPicture.com";

   facebookItem.facebookURLShareDescription = @"Custom share description";

    [SHKFacebook shareItem:facebookItem];
} 
```

除了一种情况外，一切正常。我的应用程序有一个注销按钮。点击此按钮后，保存在 NSUserDefaults 中的所有数据都会被删除。所以，我登录然后在 facebook 上发帖。然后，我注销（删除所有数据），然后用 facebook 重新登录。到目前为止一切正常。但是，如果我此时尝试在 facebook 上发布另一个帖子，我的应用程序会崩溃，并且控制台中不会显示任何错误。如果我重新启动应用程序并尝试再次发布相同的帖子，它会起作用。它只是在注销、重新登录（使用 facebook）然后尝试发布帖子后崩溃。有什么线索吗？谢谢。

编辑：似乎它在第 341 行的 FBDialog 中崩溃了：

```
_webView = [[UIWebView alloc] initWithFrame:CGRectMake(kPadding, kPadding, 480, 480)]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:27:54.670

好的，经过一番挖掘，这似乎是苹果在 iOS 5.1 中的错误，根据[为什么在创建 UIWebView 时清除 NSUserDefaults 会导致 EXC_CRASH？](https://stackoverflow.com/questions/9679163/why-does-clearing-nsuserdefaults-cause-exc-crash-later-when-creating-a-uiwebview)

# .net - V8/Chakra vs CLR - TypeScript 的影响是什么

> ID：12781225
> 
> 赞同：0
> 
> 时间：2012-10-08T11:55:02.563
> 
> 标签：.net, typescript

观看有关 TypeScript 的各种演示文稿，在我看来，如果 V8、Chakra 或任何 javascript 引擎匹配（接近？）CLR 的性能（有人知道他们是否这样做？），这肯定会侵犯 .Net空间？

静态类型似乎是 .Net 开发世界和 js 世界之间的一大区别。鉴于现在 TypeScript 具有以下优点

*   静态类型
*   跨平台
*   访问js生态系统（以静态类型的方式）
*   （鉴于编译器在 TypeScript 中（有一个可用的 .d 文件），我不确定你是否几乎得到了“编译器即服务”）

我想知道是否有人可以解释使用 .Net 工具集/生态系统更好地解决问题空间？还是更多地取决于“一个人在哪里”/习惯于什么？

谢谢

小号

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T13:40:35.940

C# 和 Java 开发平台是 50 年来语言设计和软件工程不断发展的结果。它们可能是当今编写大量程序代码（例如 25,000 行以上）的最佳平台。

TypeScript 只是解决了在大规模开发中采用 JavaScript 时的两个问题，即强类型和面向对象的扩展。作为一名 C# 程序员，我想要 LINQ、Generics 和 CodeContracts。TypeScript 不能作为替代品，但它确实大大改变了 JavaScript 和 C# 最佳使用位置的界限。

我这样说是作为一个 C# 程序员，他将 TypeScript 视为自 LINQ 以来最重要的新闻事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:10:54.947

使用 Typescript 并没有什么新鲜事。它只是一个语言翻译器，不包括 VM 实现。输出是常规的 Javascript，它不会比手工编写的 JS 运行得更快或更慢。

Typescript 最重要的附加值是开发时的改进。由于打字可以尽早发现错误，但它仍然是可选的、可靠的自动完成和重构支持。您需要信任一种语言才能在仍然可维护的大型项目中使用的一切。是的，编译器即服务的各个方面都在那里，Anders 很好地证明了他在 Google 的 Chrome 中运行 Typescript，Typescript 在左窗格中，生成的 Javascript 在右窗格中，在键入时立即生成。

# wcf - Fiddler - 更改 HTTP 请求标头

> ID：12781230
> 
> 赞同：1
> 
> 时间：2012-10-08T11:55:17.890
> 
> 标签：wcf, fiddler

我希望 使用 Fiddler创建一个 HTTP**请求标头。**

我有一个正在运行的服务，它公开了一个具有对象参数的方法。该对象如下所示：

```
 [DataMember]
    public string Name { get; set; }
    [DataMember]
    public string Data { get; set; }
    [DataMember]
    public string Details { get; set; }
    .... 
```

有谁知道我如何填充这些对象并将它们发送到我的 WCFServices？我正在使用本地主机。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T14:19:58.877

解决者：

打开 Fiddler，点击 Composer，添加：

`Content-Type: application/json; charset=utf-8`在已解析选项卡中。

以及请求正文中的密钥对值，例如：

```
{
   "Name" : "Arnold",
   "Data" : "SomeDataHere"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:12:38.373

> 我如何填充这些对象

查看[SOAP UI](http://www.soapui.org/)或[WCF 测试客户端](http://msdn.microsoft.com/en-us/library/bb552364.aspx)。

# asp.net - FLV 视频未在浏览器中运行，在 ASP.Net 中没有错误

> ID：12781236
> 
> 赞同：1
> 
> 时间：2012-10-08T11:55:40.910
> 
> 标签：asp.net, iis-7, iis-7.5, windows-server-2008-r2

我正在尝试将当前在 Windows Server 2003 32 位和 IIS6 上运行的 ASP.NET 应用程序部署到运行 Windows Server 2008 R2 和 IIS7 的新服务器。我的应用程序使用 ASP.NET 4.0 版并且在 2003 机器上运行良好。

我的问题是：

**我已经部署了应用程序，它工作正常，只是 .flv 视频没有在浏览器中播放**

**我已经添加了所有必需的 mime 设置，但仍然没有运气**

当我尝试运行视频时，我没有收到任何错误，只是一个空白屏幕显示没有视频。

相同的配置在以前的机器上运行，并且新服务器在从较早的机器上运行时也能够播放视频。

如果您有任何解决方案，请帮助我。

* * *

我刚刚发现当我尝试运行视频时会记录一个事件错误条目。如下：

```
 Event code: 3005 
    Event message: An unhandled exception has occurred.
    Event time: 10/9/2012 1:07:14 PM 
    Event time (UTC): 10/9/2012 8:07:14 PM 
    Event ID: 09303bdb94d64235a5ab118955416895 
    Event sequence: 12 
    Event occurrence: 1 
    Event detail code: 0 

    Application information: 
        Application domain: /LM/W3SVC/1/ROOT/BYPL-1-129942868205521131 
        Trust level: Full 
        Application Virtual Path: /BYPL 
        Application Path: F:\BYPL_Simulator_26_Sept_2012\ 
        Machine name: BYPL-APP-SERVER 

    Process information: 
        Process ID: 2536 
        Process name: w3wp.exe 
        Account name: BYPL-APP-SERVER\Administrator 

    Exception information: 
        Exception type: HttpException 
        Exception message: Could not load type 'FLVStreaming'.
        at System.Web.Compilation.BuildManager.GetType(String typeName, Boolean  throwOnError, Boolean ignoreCase)
        at System.Web.Configuration.HandlerFactoryCache.GetTypeWithAssert(String type)
        at System.Web.Configuration.HandlerFactoryCache.GetHandlerType(String type)
        at System.Web.Configuration.HandlerFactoryCache..ctor(String type)
        at System.Web.HttpApplication.GetFactory(String type)
        at           System.Web.HttpApplication.MaterializeHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
        at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

    Request information: 
        Request URL: http://localhost/BYPL/Administrator/MeterManagement/Installation/video/634655271233125000.flv
        Request path: /BYPL/Administrator/MeterManagement/Installation/video/634655271233125000.flv 
        User host address: 127.0.0.1 
        User: bypl 
        Is authenticated: True 
        Authentication Type: Forms 
        Thread account name: BYPL-APP-SERVER\Administrator 

        Thread information: 
        Thread ID: 5 
        Thread account name: BYPL-APP-SERVER\Administrator 
        Is impersonating: False 
        Stack trace:    at System.Web.Compilation.BuildManager.GetType(String typeName, Boolean throwOnError, Boolean ignoreCase)
        at System.Web.Configuration.HandlerFactoryCache.GetTypeWithAssert(String type)
        at System.Web.Configuration.HandlerFactoryCache.GetHandlerType(String type)
        at System.Web.Configuration.HandlerFactoryCache..ctor(String type)
        at System.Web.HttpApplication.GetFactory(String type)
        at System.Web.HttpApplication.MaterializeHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
        at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T09:41:13.360

我自己找到了答案。

我在 app_code 文件夹中添加了一个名为 FLVStreaming.cs 的文件，然后重新发布了应用程序，该文件包含以下代码：

```
using System.Web;
public class FLVStreaming : IHttpHandler
{   // FLV header
public FLVStreaming()
{}
public void ProcessRequest(HttpContext context)
{ try{
        int pos;
        int length;
        // Check start parameter if present
        string filename = Path.GetFileName(context.Request.FilePath);
        using (FileStream fs = new   FileStream(context.Server.MapPath(filename), FileMode.Open, FileAccess.Read, FileShare.Read))
        {
            string qs = context.Request.Params["start"];
            if (string.IsNullOrEmpty(qs))
            {
                pos = 0;
                length = Convert.ToInt32(fs.Length);
            }
            else
            {
                pos = Convert.ToInt32(qs);
                length = Convert.ToInt32(fs.Length - pos) + _flvheader.Length;
            }
            // Add HTTP header stuff: cache, content type and length        
            context.Response.Cache.SetCacheability(HttpCacheability.Public);
            context.Response.Cache.SetLastModified(DateTime.Now);
            context.Response.AppendHeader("Content-Type", "video/x-flv");
            context.Response.AppendHeader("Content-Length", length.ToString());
            // Append FLV header when sending partial file
            if (pos > 0)
            {
                context.Response.OutputStream.Write(_flvheader, 0, _flvheader.Length);
                fs.Position = pos;
            }
            // Read buffer and write stream to the response stream
            const int buffersize = 16384;
            byte[] buffer = new byte[buffersize];
            int count = fs.Read(buffer, 0, buffersize);
            while (count > 0)
            {
                if (context.Response.IsClientConnected)
                {
                    context.Response.OutputStream.Write(buffer, 0, count);
                    count = fs.Read(buffer, 0, buffersize);
                }
                else
                {
                    count = -1;
                }
            }
        }
    }
    catch (Exception ex)
    {
        System.Diagnostics.Debug.WriteLine(ex.ToString());
    }
}
public bool IsReusable
{   get { return true; }
}
private static byte[] HexToByte(string hexString)
{ 
    byte[] returnBytes = new byte[hexString.Length / 2];
    for (int i = 0; i < returnBytes.Length; i++)
        returnBytes[i] = Convert.ToByte(hexString.Substring(i * 2, 2), 16);
    return returnBytes;
}
} 
```

看起来这个文件被转换成一个 .ddl 文件，并且这个 dll 文件版本根据机器架构不匹配。

# html - 为什么我的桌子的上下边框是不可见的？

> ID：12781243
> 
> 赞同：0
> 
> 时间：2012-10-08T11:55:59.413
> 
> 标签：html, css

为什么右下边界不可见？

这是我的桌子：http: [//jsfiddle.net/dFu5e/](http://jsfiddle.net/dFu5e/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T11:58:28.130

您正在表格边框上书写白色 TD 边框。

您可以通过将表格边框设置为 2 像素来解决此问题。

[演示](http://jsfiddle.net/JZLtJ/)

但是，我建议下次使用 CSS 来代替所有这些边框定义。有许多工具可以帮助您为您的目标定义表格的 CSS。例如 ：

*   [http://www.somacon.com/p141.php](http://www.somacon.com/p141.php)
*   [http://www.css-generators.com/css-tools/css-table-generator](http://www.css-generators.com/css-tools/css-table-generator)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:57:46.857

删除 tr 和 td 边框。使用border="1"和cellpadding="0"和cellspacing="0"作为表格标签：

```
<table border="1" cellpadding="0" cellspacing="0">
....
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T11:59:59.443

或者您可以`overflow: hidden`从表中删除 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T12:00:36.703

这是因为您正在使用`overflow:hidden`. [修改过的jsfiddle](http://jsfiddle.net/dFu5e/6/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T12:01:11.750

`overflow: hidden;`从你的`table`风格中删除，[**在这里**](http://jsfiddle.net/gnel/dFu5e/7/)摆弄。

# pdf - 可以在 Flash Player VB 中播放 pdf 文件吗？

> ID：12781250
> 
> 赞同：0
> 
> 时间：2012-10-08T11:56:23.050
> 
> 标签：pdf, vb6, flash, pdf-conversion

> **可能重复：**
> [在 Flash Player 中打开 PDF 或文件夹](https://stackoverflow.com/questions/6950774/open-pdf-or-folder-in-flash-player)

**在我的 VB windows 应用程序中，用户将上传 pdf 文件，我必须在 flash 播放器中显示它。所以，我想将 pdf 转换为 exe 文件，然后我可以通过调用openwith**对话框轻松地玩 flash 播放器下面的**shell**命令。

```
Shell("rundll32.exe shell32.dll, OpenAs_RunDLL " & exePath); 
```

但我不知道是否可以通过 VB 将 pdf 文件转换为 exe 文件。如果没有，请建议我在 Flash 播放器中播放 pdf 的好方法...

或者有什么办法可以将 pdf 文件播放到 flash 播放器中？

# python - 使用 Python 仅获取网页中链接列表的第一个元素

> ID：12781252
> 
> 赞同：1
> 
> 时间：2012-10-08T11:56:26.860
> 
> 标签：python, file, hyperlink, urllib2, webpage

如果我有一个包含如下链接列表的网页：

```
Device  Type    Filename    Size    Date Added
/        /      link1.zip        /          /
/        /      link2.zip        /          /
                    .
                    .
                    . 
```

如何仅获取第一个链接并将其放入变量（url）中，以便能够通过带有 urllib2 的 HTTP 请求下载它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T11:59:36.597

您需要解析 HTML。查看[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)以获得常用的、健壮的 HTML 解析器。

# birt - 格式为 excel 时在 BIRT 中隐藏交叉表列

> ID：12781260
> 
> 赞同：0
> 
> 时间：2012-10-08T11:56:40.207
> 
> 标签：birt

我想根据某些条件隐藏两个交叉表列。我已经能够通过使用来实现它

```
 function onPrepareCell( cell, reportContext )
 if(some condition){
    if( cell.getCellID() == cell#){
    cell.getStyle().setDisplay("none");
    }
  } 
```

在交叉表的 onPrepare 事件中。它在 PDF、HTML 格式中运行良好，但当格式为 Excel 时，列不会被隐藏。我需要尽快完成这项工作，请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T05:55:19.143

我从 BIRT exchange 得到了答案，我在这里发布答案，以便对其他人有所帮助

在交叉表的 onPrepare() 事件中，您可以编写如下代码

函数onPrepareCrosstab（交叉表，reportContext）{
如果（某些条件）{reportContext.getDesignHandle().getElementByID(ElementId#).setStringProperty("width","0px"); }

}

这里 ElementId# 是您要隐藏的单元格的 Id#。如您所见，我们还可以使用它来动态更改单元格的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T23:33:25.883

在 OnCreateCell 事件中尝试您的代码。

# variables - Corona SDK 导演类在场景之间传递变量

> ID：12781265
> 
> 赞同：1
> 
> 时间：2012-10-08T11:56:51.033
> 
> 标签：variables, sdk, coronasdk

我正在尝试使用 Corona SDK 中的导演类在场景之间传递变量，但它不起作用。我需要做的是为用户提供一组选项，即按钮 1、按钮 2、按钮 3。如果用户选择按钮 1，那么我需要将变量传递给下一个场景以通过 if 语句访问。因此，如果按钮 1 则显示 blue.jpg，如果按钮 2 显示 Yellow.jpg。我真的很感激这方面的帮助。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T08:53:10.850

如果要在 Rauber 的 Director Class 中的场景之间传递变量，只需将它们传递到场景 1 中的数组中即可：

```
local parameters = {p1="some text", p2="some more text"}

director:changeScene(parameters, "sceneName") 
```

在场景 2 中，使新函数接受参数：

```
function new(parameters)
    print(parameters.p1, parameters.p2) --> some text   some more text
end 
```

# java - Java 服务器可以使用套接字处理 Java 和 Objective C 对象吗？

> ID：12781267
> 
> 赞同：1
> 
> 时间：2012-10-08T11:57:04.840
> 
> 标签：java, android, objective-c, push

我计划开发一个 Java 服务器来在 Android 设备之间共享信息（序列化对象）。我需要推送技术，我将在服务器中使用观察者模式来实现它，注册所有活动设备。当然，我会使用可序列化的 Java 对象，这里应该没有问题......

但是，如果我也想在 Apple 设备上使用同一台服务器，我会遇到问题吗？还是这种架构只能在 Java 环境中工作？我不知道服务器套接字是否能够处理接收`ObjectInputStream`到`ObjectOutputStream`的 Objective C 对象，以及 Apple 设备是否能够处理服务器发送的 Java 对象。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:01:49.013

java 流仅适用于 java 平台。您不能使用带有目标 C 的 ObjectInputStream/ObjectOutStream 传输对象。但是您可以使用其他解决方案来连接目标 c，例如您可以通过 XMLfiles 发送文本数据，您可以使用 SOA 架构，使用 HTTP 协议通过 Web 发送和接收数据服务和数据格式可以是 xml/json，两种平台都可以理解

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:00:22.313

您应该考虑使用 REST 或 SOAP，那里有大量的 API，而不是 Object Streams - 因为 Java 和 Objective-C 都不能处理非本机序列化对象，所以这些都不起作用。

# eclipse-rcp - 带有 windowtester pro 的 tycho surefire 无法打开正确的窗口

> ID：12781268
> 
> 赞同：1
> 
> 时间：2012-10-08T11:57:06.417
> 
> 标签：eclipse-rcp, tycho, window-tester, tycho-surefire-plugin

我正在尝试使用 windowtester pro 建立一个 UI 测试系统。我想通过使用 Tycho 插件将这些测试链接到 maven 构建过程中。为了练习目的，我目前正在使用一个示例项目。

现在，当我构建我的项目时，一切似乎都可以正常编译，但是当测试开始时，我收到以下消息并弹出一个默认的 Eclipse 窗口。然后在该窗口上执行测试并且 -suprise- 失败。

> 框架论据：
> 
> -application org.eclipse.tycho.surefire.osgibooter.uitest -testproperties C:\Users\jla\workspace\com.example.addressbook.test\target \surefire.properties
> 
> -product com.example.addressbook.bundle.product
> 
> 命令行参数：
> -debug -consolelog -data C:\Users\jla\workspace\com.example.addressbook.test\target\work\data -dev file:/C:/Users/jla/workspace/com.example .addressbook.test/target/dev.properties -application org.eclipse.tycho.surefire.osgibooter.uitest -testproperties C:\Users\jla\workspace\com.example.addressbook.test\target \surefire.properties -product com .example.addressbook.bundle.product
> 
> ```
> !ENTRY org.eclipse.ui 4 4 2012-10-12 16:00:36.984
> !MESSAGE Exception in org.eclipse.ui.internal.FolderLayout.addView(String): 
> ```
> 
> org.eclipse.ui.PartInitException：未找到视图描述符：org.eclipse.ui.navigator.ProjectExplorer
> 
> ```
> !ENTRY org.eclipse.ui 4 4 2012-10-12 16:00:36.990
> !MESSAGE Exception in org.eclipse.ui.internal.FolderLayout.addView(String): 
> ```
> 
> org.eclipse.ui.PartInitException：未找到视图描述符：org.eclipse.ui.navigator.ProjectExplorer！STACK 1 org.eclipse.ui.PartInitException：未找到视图描述符：org.eclipse.ui.navigator.ProjectExplorer

这是我的测试项目的 Pom.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
<project
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
  xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <modelVersion>4.0.0</modelVersion>

  <parent>
    <groupId>com.example.addressbook</groupId>
    <artifactId>com.example.addressbook.build</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <relativePath>../com.example.addressbook.build</relativePath>
  </parent>

  <artifactId>com.example.addressbook.test</artifactId>
  <packaging>eclipse-test-plugin</packaging>

  <build>
        <plugins>
            <plugin>
                <groupId>org.eclipse.tycho</groupId>
                <artifactId>tycho-surefire-plugin</artifactId>
                <version>${tycho-version}</version>

                <configuration>
                    <testSuite>com.example.addressbook.test</testSuite>
                    <testClass>com.example.addressbook.test.AppTest001</testClass>

                    <useUIHarness>true</useUIHarness>
                    <useUIThread>true</useUIThread>
                    <!-- use our product and application to launch the tests -->
                    <product>com.example.addressbook.bundle.product</product>
                    <!--  <application>org.eclipse.ui.ide.workbench</application>-->

                    <dependencies>
                        <dependency>
                            <type>p2-installable-unit</type>
                            <artifactId>com.windowtester.runtime.feature.group</artifactId>
                            <version>0.0.0</version>
                        </dependency>
                    </dependencies>
                </configuration>

            </plugin>
        </plugins>
    </build>

 </project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:36:52.537

我终于找到了让它工作的方法。由于 tycho 使用的是 eclipse 创建的项目信息，因此有必要在 MANIFEST.MF 文件中引用应该测试的项目。

这是我的 MANIFEST.MF 文件：

```
 Bundle-Name: Test Bundle
Bundle-Version: 1.0.0.qualifier
Bundle-SymbolicName: com.example.addressbook.test
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-RequiredExecutionEnvironment: JavaSE-1.6
Require-Bundle: org.junit,
 com.windowtester.runtime,
 com.windowtester.swt.runtime,
 com.windowtester.swing.runtime,
 org.eclipse.jface,
 org.eclipse.core.runtime,
 org.eclipse.swt,
 com.example.addressbook.bundle,
 com.example.addressbook.services 
```

这就是我的 pom.xml 的样子。注意：我刚刚在产品标签下添加了一个应用程序标签。

```
 <?xml version="1.0" encoding="UTF-8"?>
<project
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
  xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <modelVersion>4.0.0</modelVersion>

  <parent>
    <groupId>com.example.addressbook</groupId>
    <artifactId>com.example.addressbook.build</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <relativePath>../com.example.addressbook.build</relativePath>
  </parent>

  <artifactId>com.example.addressbook.test</artifactId>
  <packaging>eclipse-test-plugin</packaging>

  <build>
        <plugins>
            <plugin>
                <groupId>org.eclipse.tycho</groupId>
                <artifactId>tycho-surefire-plugin</artifactId>
                <version>${tycho-version}</version>

                <configuration>
                    <testSuite>com.example.addressbook.test</testSuite>
                    <testClass>com.example.addressbook.test.AppTest01</testClass>

                    <useUIHarness>true</useUIHarness>
                    <useUIThread>true</useUIThread>
                    <!-- use our product and application to launch the tests -->
                    <product>com.example.addressbook.bundle.product</product>
                    <application>com.example.addressbook.bundle.application</application>

                    <dependencies>
                        <dependency>
                            <type>p2-installable-unit</type>
                            <artifactId>com.windowtester.runtime.feature.group</artifactId>
                            <version>0.0.0</version>
                        </dependency>
                    </dependencies>
                </configuration>

            </plugin>
        </plugins>
    </build>

 </project> 
```

# python - Django 在多个请求期间不会重置模块变量

> ID：12781271
> 
> 赞同：0
> 
> 时间：2012-10-08T11:57:17.753
> 
> 标签：python, django, django-views

似乎模块变量与进程一样长，并且在进程重新启动之前不会重置。

这是我的代码，我希望它以另一种方式表现它现在的表现：

我有一个模块负责各种 SEO 功能，如面包屑和标题、文件 fancy/utils.py：

```
class Seo:
    title = ['project name'] 
```

稍后在我的视图中，我可以将项目添加到 Seo.title（例如 news.views）：

```
from fancy.utils import Seo

def index(request, news_id):
    title.append('some specific title')
    ... 
```

关键是变量*Seo.title*实际上不会在每次请求时重置，因此它会继续将项目附加到自身，这对我来说看起来很奇怪（因为我来自 PHP）。

最终，如果我在同一页面上按 F5，标题总是会变得又大又长。

发生了什么事，我该怎么办？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:35:24.527

从您的评论看来，您完全误解了 Django 的执行模型。

您不能拥有可以从代码中的任何位置以某种方式访问​​的请求的本地数据。如果您需要与特定请求关联的数据，您应该将其存储在运行该请求的代码可以检索它的地方：可能在会话中，可能在添加到请求对象本身的临时字典中。您全局存储的任何内容都将是全局的：对在同一进程中运行的任何请求都是可见的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:08:14.223

你`title`是一个类属性而不是一个`instance`属性。如果您想跨多个请求保留设置，您可以在[会话](https://docs.djangoproject.com/en/dev/topics/http/sessions/)中保留对它的引用。

例如

```
class Seo(object):
    def __init__(self):
        self.title = ['project name']

...

def index(request, news_id):
    seo = request.session.get('seo', Seo())
    seo.title.append('some specific title') 
```

# user-interface - 使用 haxe 的多平台基于表单的 gui 应用程序的最佳实践

> ID：12781272
> 
> 赞同：1
> 
> 时间：2012-10-08T11:57:21.163
> 
> 标签：user-interface, cross-platform, haxe

我目前正在探索如何编写具有输入字段形式的平台无关软件（java 或 dotnet 中的胖客户端以及 asp.net 或 java jsf 中的 web 应用程序）。

我偶然发现了
[2009 年的最新更新：is-haxe-worth-learning](https://stackoverflow.com/questions/1384647/is-haxe-worth-learning)

我阅读了一些[haxe 教程](http://haxelearning.wikispaces.com)和[关于 haxe 的维基百科文章](http://haxelearning.wikispaces.com) ，它看起来很有希望。

*   是否有任何最佳实践如何将 haxe-businesslogic 与 platform-dependent-gui-logic 分开？
*   或者甚至有一个 haxe-gui-abstraction 层？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:13:15.897

目前为跨平台 NME 使用开发了一个库。你可以[在 GitHub 上](https://github.com/MatthijsKamstra/haXe-NME-UI)查看。

它仍处于开发阶段并且有一些待办事项：它可以使用一些帮助。

如果您对做单源跨平台的事情感兴趣，您还可以查看[条件编译](http://haxe.org/ref/conditionals)和带有[“**交叉**”标签的 haxelibs](http://lib.haxe.org/t/cross)。

Haxe 中还有一些 MVC 框架，例如[MMVC](http://lib.haxe.org/p/mmvc)，它是[AS3 Robotlegs](http://www.robotlegs.org/)的一个端口。

祝你好运，并与社区分享你正在做的事情 =)

# java - SimpleDateFormat 类中可用的日期格式有哪些？

> ID：12781273
> 
> 赞同：93
> 
> 时间：2012-10-08T11:57:27.437
> 
> 标签：java, date, simpledateformat

谁能告诉我 SimpleDateFormat 类中可用的日期格式。

我已经通过 api 但找不到令人满意的答案。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2012-10-08T11:59:13.913

日期和时间格式在下面有很好的描述

[SimpleDateFormat (Java Platform SE 7) - 日期和时间模式](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

您可以`n`制作多种格式。ex -`dd/MM/yyyy`或者`YYYY-'W'ww-u`您可以混合和匹配字母以实现您所需的模式。图案字母如下。

*   `G`- 时代代号 (AD)
*   `y`- 年份 (1996; 96)
*   `Y`- 周年 (2009; 09)
*   `M`- 一年中的月份（7 月；7 月；07）
*   `w`- 一年中的一周 (27)
*   `W`- 每月的一周 (2)
*   `D`- 一年中的一天 (189)
*   `d`- 月中的一天 (10)
*   `F`- 月中的星期几 (2)
*   `E`- 一周中的日期名称（星期二；星期二）
*   `u`- 星期几（1 = 星期一，...，7 = 星期日）
*   `a`- 上午/下午标记
*   `H`- 一天中的小时（0-23）
*   `k`- 一天中的小时（1-24）
*   `K`- 上午/下午的小时（0-11）
*   `h`- 上午/下午的时间 (1-12)
*   `m`- 分钟 (30)
*   `s`- 分秒 (55)
*   `S`- 毫秒 (978)
*   `z`- 一般时区（太平洋标准时间；太平洋标准时间；GMT-08:00）
*   `Z`- RFC 822 时区 (-0800)
*   `X`- ISO 8601 时区（-08；-0800；-08:00）

解析：

> 2000-01-23T04:56:07.000+0000

利用： `new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ");`

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-10-08T12:26:52.483

让我抛出一些我从[http://www3.ntu.edu.sg/home/ehchua/programming/java/DateTimeCalendar.html](http://www3.ntu.edu.sg/home/ehchua/programming/java/DateTimeCalendar.html)获得的示例代码 然后你可以尝试不同的选项，直到你理解它。

```
import java.text.SimpleDateFormat;
import java.util.Date;

public class DateTest {
   public static void main(String[] args) {
       Date now = new Date();

       //This is just Date's toString method and doesn't involve SimpleDateFormat
       System.out.println("toString(): " + now);  // dow mon dd hh:mm:ss zzz yyyy
       //Shows  "Mon Oct 08 08:17:06 EDT 2012"

       SimpleDateFormat dateFormatter = new SimpleDateFormat("E, y-M-d 'at' h:m:s a z");
       System.out.println("Format 1:   " + dateFormatter.format(now));
       // Shows  "Mon, 2012-10-8 at 8:17:6 AM EDT"

       dateFormatter = new SimpleDateFormat("E yyyy.MM.dd 'at' hh:mm:ss a zzz");
       System.out.println("Format 2:   " + dateFormatter.format(now));
       // Shows  "Mon 2012.10.08 at 08:17:06 AM EDT"

       dateFormatter = new SimpleDateFormat("EEEE, MMMM d, yyyy");
       System.out.println("Format 3:   " + dateFormatter.format(now));
       // Shows  "Monday, October 8, 2012"

       // SimpleDateFormat can be used to control the date/time display format:
       //   E (day of week): 3E or fewer (in text xxx), >3E (in full text)
       //   M (month): M (in number), MM (in number with leading zero)
       //              3M: (in text xxx), >3M: (in full text full)
       //   h (hour): h, hh (with leading zero)
       //   m (minute)
       //   s (second)
       //   a (AM/PM)
       //   H (hour in 0 to 23)
       //   z (time zone)
       //  (there may be more listed under the API - I didn't check)

   } 
```

}

祝你好运！

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-11-05T15:49:12.703

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-06-13T06:56:38.737

检查这里的格式 [http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

**主要的**

```
System.out.println("date  : " + new classname().getMyDate("2014-01-09 14:06", "dd-MMM-yyyy E hh:mm a z", "yyyy-MM-dd HH:mm")); 
```

**方法**

```
 public String getMyDate(String myDate, String returnFormat, String myFormat)
            {
                DateFormat dateFormat = new SimpleDateFormat(returnFormat);
                Date date=null;
                String returnValue="";
                try {
                    date = new SimpleDateFormat(myFormat, Locale.ENGLISH).parse(myDate);
                    returnValue = dateFormat.format(date);
                } catch (ParseException e) {
                    returnValue= myDate;
                    System.out.println("failed");
                    e.printStackTrace();
                }

            return returnValue;
            } 
```

# php - 如何在作曲家中定义自定义自动加载器？

> ID：12781276
> 
> 赞同：6
> 
> 时间：2012-10-08T11:57:37.360
> 
> 标签：php, composer-php, autoloader

我正在使用使用自己的自动加载器的 Nette 框架。如何定义自定义自动加载器或仅从作曲家中排除标准自动加载器，以便我可以使用自己的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-05-15T16:59:53.687

或者，如果你想要一个*额外*的自动加载器，你可以[更新`composer.json`](https://getcomposer.org/doc/04-schema.md#files)：

```
{
    "autoload": {
        "files": ["src/extra/autoloader.php"]
    }
} 
```

然后运行`composer dump-autoload`重建它。现在，当您包含`vendor/autoload.php`它时，它也会加载您的自动加载器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T19:49:13.570

如果您不想使用它，请不要包含它。请记住，您必须自己处理自动加载。

如果您的自动加载器可以使用它，您可以使用 composer 生成的命名空间文件：

> Composer 提供了自己的自动加载器。如果你不想使用那个，你可以只包含 vendor/composer/autoload_namespaces.php，它返回一个关联数组，将命名空间映射到目录。

参考：[作曲家文档中的自动加载](http://getcomposer.org/doc/01-basic-usage.md#autoloading)。

# html - 为什么有些开发者将脚本标签放在文档底部？

> ID：12781277
> 
> 赞同：4
> 
> 时间：2012-10-08T11:57:39.200
> 
> 标签：html

> **可能重复：**
> [将JS文件放在网页底部实际上好吗？](https://stackoverflow.com/questions/9814301/is-it-practically-good-to-put-js-files-at-the-bottom-of-webpage)

我见过开发人员将`<script src="xxx">`标签放在文档底部的 HTML 文档，我想知道为什么。

我刚刚阅读了有关[script 标签](http://www.w3.org/TR/1998/REC-html40-19980424/interact/scripts.html#h-18.2.1)的 HTML4 规范。它没有说明何时以及如何加载脚本。因此，由网络浏览器来处理它认为合适的事情。

认为浏览器作者应该意识到同步加载脚本或以任何其他方式阻碍文档呈现会影响浏览体验是否合理？

即，我们作为 Web 开发人员不是最好将脚本放在`<head>`标签中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T11:58:30.020

将脚本标签放在文档顶部会阻止页面其余部分的加载；横幅广告脚本尤其如此。如果第三方脚本的加载时间过长，那么之后的任何 DOM 元素都会被延迟，从而导致页面出现空白/格式错误，直到请求超时或最终加载内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T12:01:43.180

脚本需要解释（可能相对昂贵），并且可能需要通过另一个 HTTP 请求进行检索。将它们放在文档的末尾允许首先加载页面的其余部分。

> 在浏览器继续解析页面之前，会立即获取并执行没有 async 或 defer 属性的脚本。

[https://developer.mozilla.org/en-US/docs/HTML/Element/script](https://developer.mozilla.org/en-US/docs/HTML/Element/script)

另请参阅[http://dev.w3.org/html5/spec/the-script-element.html](http://dev.w3.org/html5/spec/the-script-element.html)，特别是详细介绍的准备/阻塞区域。请注意，这是一个不断变化的编辑草稿；其中一些规则可能不在最终规范中或由所有用户代理强制执行。

作为旁注，这种阻塞行为不是坏的/错误的。想想像[Modernizr](http://modernizr.com/)这样的库，它*确实*属于`head`. 它以允许正确应用 CSS 的方式更改 DOM；如果它并行执行，结果将不正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:03:41.087

1.  JS 脚本在页面加载时执行。如果它位于页面顶部，则页面的其余部分在运行时不会加载，这意味着它将无法访问页面中的任何元素。

2.  如果脚本需要时间来运行（例如，它有一个缓慢的循环，或者抛出一个`alert()`盒子，或者做任何其他阻止执行的事情），那么页面加载的其余部分将被延迟，直到它完成。如果脚本在 中`<head>`，这可能会导致用户在脚本执行此操作时看到空白页。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T11:59:55.447

这样，文档将在 JavaScript 代码启动**之前**完全显示。如果脚本需要时间或不起作用或无法访问，它不会让用户坐在空白页面前。

此外，在 body 元素完全加载之前执行 DOM 操作可能会产生错误 IE。

# java - 使用 DynamicJasper API 生成的 html 报告输出中没有图像

> ID：12781282
> 
> 赞同：1
> 
> 时间：2012-10-08T11:58:05.120
> 
> 标签：java, jasper-reports, dynamic-jasper

我正在使用*DynamicJasper API*构建报告，并且想在列中插入图像。

我有：

```
FastReportBuilder drb = new FastReportBuilder();
drb.addImageColumn("Image", "image", "java.awt.Image", 500,false, ImageScaleMode.NO_RESIZE, detailStyle); 
```

“图像”的属性是从 URL 构建的：

```
Image image = ImageIO.read(new URL(pathToImage)); 
```

我遇到的问题是图像显示在*PDF*输出中，但不在*HTML*输出中。检查生成的源代码，我看到以下内容：

```
<img src="nullimg_0_0_16" style="height: 50px" alt=""> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T07:50:00.793

谢谢 Alex K，但这不适用于 HTML 输出。

需要使用 jasper 的 ImageServlet。解决方案记录在这里：

[http://dynamicjasper.com/2010/10/06/how-to-export-to-html/](http://dynamicjasper.com/2010/10/06/how-to-export-to-html/)

# jquery - jQuery：通过 $.getScript 即时更新 jQuery 版本

> ID：12781290
> 
> 赞同：1
> 
> 时间：2012-10-08T11:58:31.593
> 
> 标签：jquery, on-the-fly, dynamic-script-loading

如果您在以 jQuery 1.7.x 开始的环境中，运行和加载最新版本的 jQuery (1.8.3)**是否有任何风险？**`$.getScript`

它会正确覆盖更新的功能还是**会发生任何冲突**？

```
$.getScript('http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T16:56:33.350

以下是如何使用 noconflict AND getscript 在包含的块中加载较新版本的 jquery/jqueryui，以防您在已经加载其他版本的上下文中工作。

[http://www.ipreferjim.com/2011/06/loading-newer-versions-of-jquery-and-jquery-ui-noconflict/](http://www.ipreferjim.com/2011/06/loading-newer-versions-of-jquery-and-jquery-ui-noconflict/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:57:54.833

它可能会搞砸你所有的事件绑定，就像你以正常方式包含两个版本的 jQuery 一样。

这将是异步的，因此您的所有其他脚本将在 getScript 完成之前执行。这对您的插件来说尤其麻烦，因为它们将自己绑定到 jQuery.fn 命名空间。加载新脚本后，它将重新创建 jquery 对象并清除对插件的引用。

您实际上将对 jquery 对象执行出厂重置。

话虽如此，您*可以*将初始化代码放在 getScript 回调中，但您只能使用核心 jQuery 而不能使用任何插件。

```
$.getScript('http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js', function() {
    console.log("Hi there");
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T17:08:16.237

您可以 $.noConflict jquery 走出大门，这应该删除 window.$，然后使用 jQuery.getScript 将最新的 jquery 加载到 window.$ 中。

也许？这纯粹是一个建议，我以前从未这样做过。

[jQuery没有冲突](http://api.jquery.com/jQuery.noConflict/)

# symfony - 使用 Symfony 和 Twig 创建上次访问列表

> ID：12781291
> 
> 赞同：0
> 
> 时间：2012-10-08T11:58:39.483
> 
> 标签：symfony, twig, symfony-2.1

我想用 Symfony 和 Twig 创建一个“最后访问的页面”列表。

为此，我编写了一个历史服务来保存会话中最后访问的路线。

但是我只有路由名称，没有用户体验的别名。

所以路线`country_info`应该包含一个像“国家信息”这样的字符串。是否可以在 中定义别名`routing.yml`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T02:51:48.413

不，不可能在`routing.yml`. 路由系统并不打算这样做。

如果您有固定数量的页面，您可以只读取控制器中的会话值并翻译每个路由名称，以便稍后使用 Twig 打印它。

假设您将上次访问的页面路由存储在数组中，您可以尝试以下操作：

在您的控制器操作中：

```
// Read session 
$page_routes = $session->get('last_visited_routes_array');

$output_array=array();

foreach ($page_routes as $route){
  // Translate route to name
  switch($route){
    case "country_info":
      $output_array['country_info'] = "Country Information";
    break;

    // ... Add more Cases here ...  

  }
}

// Return generated array so it can be used by Twig
return array('output_array' => $output_array); 
```

在您的 Twig 模板中：

```
{% for page_route, page_name in output_array %}
    <a href="{{ path('page_route') }}">{{page_name}}</a>
{% endfor %} 
```

希望能帮助到你。

# highstock - StockChart 不显示预览

> ID：12781292
> 
> 赞同：0
> 
> 时间：2012-10-08T11:58:40.597
> 
> 标签：highstock

![在此处输入图像描述](../Images/92bca4e46d085e349baa0ba28825cf88.png)

我想在图表的底部显示一个预览，就像在这个例子中一样：

![在此处输入图像描述](../Images/d4801fb4b77b3e7c230db2ed0173776c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T06:40:17.210

我有一个类似的问题。在初始化图表后设置数据时会发生这种情况。您将不得不手动更新导航器。初始化图表时，请确保给导航器一个 id。

```
navigator = { 
        series: {   
            id: 'navigator'
        }
} 
```

更新数据后，通过它的 id 获取导航器并将数据设置为导航器。这将更新“预览”图表。

```
chart.get("navigator").setData([data that you updated the chart with]); 
```

遗憾的是，Highcharts 不支持以这种方式更新数据。如果您使用数据对其进行初始化，则效果最佳。最好在数据准备好后销毁图表并重新创建它。并不总是我所知道的最佳选择。

希望这可以帮助

# ios - mapView的frame是错误的

> ID：12781299
> 
> 赞同：1
> 
> 时间：2012-10-08T11:59:28.130
> 
> 标签：ios, uiview, mkmapview

我在连接到 Outlet 的 xib 中有一个 MapView。我通过代码为纵向和横向设置框架。帧是正确的，但输出是错误的。为什么？

这是我在 MapViewController.h 中的代码：

```
 @interface MapViewController : UIViewController <MKMapViewDelegate>{

  }

  @property (nonatomic, strong)UIImageView * imageView;
  @property (nonatomic, strong)IBOutlet UIButton * buttonHome;
  @property (nonatomic, strong)IBOutlet UIButton * buttonMap;
  @property (nonatomic, strong)IBOutlet UIButton * buttonFavorites;
  @property (nonatomic, strong)IBOutlet UILabel * labelTitle;
  @property (nonatomic, strong)IBOutlet MKMapView *mapView; 
```

和 MapViewController.m

```
 @implementation MapViewController

  @synthesize imageView;
  @synthesize buttonFavorites;
  @synthesize buttonHome;
  @synthesize buttonMap;
  @synthesize labelTitle;
  @synthesize mapView;

  - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
  {
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
 }

 -(void) layoutPortrait {

self.imageView= [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"bar_V.png"]];
self.imageView.frame= CGRectMake(self.view.bounds.origin.x, self.view.bounds.origin.y, self.view.bounds.size.width, 80);
self.imageView.autoresizingMask = UIViewAutoresizingFlexibleWidth;
self.labelTitle.frame =CGRectMake(14, 83, 121, 54);
self.buttonFavorites.frame= CGRectMake(109, 485, 33, 33);
self.buttonHome.frame =CGRectMake(14, 485, 33, 33);
self.buttonMap.frame=CGRectMake(61, 485, 33, 33);
self.mapView.frame = CGRectMake(0, 140, 320, 310);

}

-(void) layoutLandscape {

self. imageView= [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"bar_O.png"]];
self.imageView.frame= CGRectMake(self.view.bounds.origin.x, self.view.bounds.origin.y,self.view.bounds.size.width,70 );
self.imageView.autoresizingMask = UIViewAutoresizingFlexibleWidth;
self.labelTitle.frame =CGRectMake(20,72,140,48);

self.buttonFavorites.frame= CGRectMake(107,237,33,33);
self.buttonHome.frame =CGRectMake(11,237,33,33);
self.buttonMap.frame=CGRectMake(59,237,33,33);
self.mapView.frame = CGRectMake(201,65,367,227);

}

 - (void)viewDidLoad
{
[super viewDidLoad];

UIInterfaceOrientation deviceOrientation= self.interfaceOrientation;

if(deviceOrientation == UIInterfaceOrientationPortrait || deviceOrientation== UIInterfaceOrientationPortraitUpsideDown) {
    [self layoutPortrait];

}
else if (deviceOrientation== UIInterfaceOrientationLandscapeRight){
    [self layoutLandscape];

}
else if (deviceOrientation==UIInterfaceOrientationLandscapeLeft){

    [self layoutLandscape];

}

[self.view addSubview:self.imageView];
[self.view addSubview:self.mapView];
[self.view addSubview:self.labelTitle];
[self.view addSubview:self.buttonHome];
[self.view addSubview:self.buttonMap];
[self.view addSubview:self.buttonFavorites];

self.mapView.delegate=self;
}

 -(void) willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration {
[super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];
UIDeviceOrientation deviceOrientation = [[UIDevice currentDevice]orientation];

if(self.imageView){
    [self.imageView removeFromSuperview];

}

if(deviceOrientation == UIInterfaceOrientationPortrait || deviceOrientation== UIInterfaceOrientationPortraitUpsideDown) {
    [self layoutPortrait];

}
else if (deviceOrientation== UIInterfaceOrientationLandscapeRight){
    [self layoutLandscape];

}
else if (deviceOrientation==UIInterfaceOrientationLandscapeLeft){

    [self layoutLandscape];

}

[self.view addSubview:self.mapView];
[self.view addSubview:self.labelTitle];
[self.view addSubview:self.imageView];
[self.view addSubview:self.buttonFavorites];
[self.view addSubview:self.buttonHome];
[self.view addSubview:self.buttonMap];

 } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:07:49.020

有几件事：

1）你`MKMapView`的xib文件有自动调整大小吗？这可能会干扰您在代码上所做的事情。

2）您应该在正确的位置处理旋转逻辑，而不是在`viewDidLoad`. 在[UIViewController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)中，检查部分**处理视图旋转**，这样您就可以看到将代码放在哪里。

# performance - In XQuery, how do I avoid deteriorating performance in a paged simple query?

> ID：12781301
> 
> 赞同：1
> 
> 时间：2012-10-08T11:59:37.227
> 
> 标签：performance, xpath, xquery, marklogic

I have a ML database with a few tens of thousands of documents in it, and a query that returns some simple calculated values for either all or a subset of those documents. The document count has grown to the point that the "all documents" option no longer reliably runs without timing out, and is only going to get worse as the document count grows. The obvious solution is for the client application to use the other form and paginate the results. It's an offline batch process, so overall speed isn't an issue - we'd just like to keep individual requests sane.

The paged version of the query is very simple:

```
declare namespace ns = "http://some.namespace/here"

declare variable $fromCount external;
declare variable $toCount external;

<response> {
  for $doc in fn:doc()/ns:entity[$fromCount to $toCount]
  return
  <doc> omitted for brevity </doc>
} </response> 
```

The problem is that the query is slower the further through the document set the requested page is; presumably because it's having to load every document in order, check whether it's the right type and iterate until its found `$fromCount` `ns:entity`s before it even begins building the response.

One wrinkle is that there are other types of document in the database, so just using fn:doc isn't a realistic option (although, they are in different directories, so `xdmp:directory()` might be an option; something I'll look into.)

There also isn't currently an index on the `ns:entity` element; would that help? It's always the root-node of a document, and the documents are quite large, so I'm concerned about the size of the index. Also, (the slow part of) this query isn't interested in the *value* of the element, just that it exists.

I thought about using the `search:` api for it's built-in paging, but it seems overkill for a query that is intended to match all documents; surely it's possible to manually construct the query that `search:search()` would build internally.

It seems like what I really need is an efficient list of all root-nodes of a certain type in the database. Does Marklogic maintain such a thing? If Not would an index solve the problem?

* * *

**Edit:** It turns out that the answer in my case is use the `xdmp:directory()` option, since ML apparently stores a fast, in-memory list of all documents. Still, if there *is* a more general solution to the problem, it's bound to be of interest, so I'll leave the question here.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:37:15.547

Your analysis is correct:

> presumably because it's having to load every document in order, check whether it's the right type and iterate until its found $fromCount ns:entitys before it even begins building the response

The usual answer is `cts:search` plus the `unfiltered` option. You found that `xdmp:directory` was faster, but you should still be able to measure pagination times as O(n) even if the scale is smaller. See [http://docs.marklogic.com/guide/performance/unfiltered#chapter](http://docs.marklogic.com/guide/performance/unfiltered#chapter) - basically the database is guarding against returning false positives, unless you tell it not to.

Another approach might be to use `cts:uris` and its `limit` option, but this might require managing pagination state in terms of start values rather than page counts. For example if the last item on page 1 was "cat", you would use "cat" as arg2 when calling `cts:uris` for the next page. You could still use pagination start-stop values, too. That would still be O(n) - but at a much smaller scale.

# java - 不区分大小写的 XPath 查询

> ID：12781304
> 
> 赞同：0
> 
> 时间：2012-10-08T11:59:55.910
> 
> 标签：java, xml, xpath

我有一个这样的 XML

```
<Authors>
<Author name='Some Author'>
<Book>B1</Book>
<Book>B2</Book>
<Book>B3</Book>
</Author>
</Authors> 
```

我想通过使用 Book 对此 xml 进行 xpath 查询并显示作者姓名，并且 xpath 查询应该不区分大小写。

我试着用

`Author[translate(Book,'ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz')='b1'`

但是只有当我使用 b1 查询时，此查询才会返回值。如果查询使用 b2 或 b3，则返回 null。

我在java中这样做：

```
XPathFactory xPathFactory = XPathFactory.newInstance();
XPath xPath = xPathFactory.newXPath();
XPathExpression xPathExpression = xPath.compile(
      "Authors/Author[translate(Book,'ABCDEFGHIJKLMNOPQRSTUVWXYZ'," +
      "'abcd‌​efghijklmnopqrstuvwxyz')='b2']");
ret_nodelist = (NodeList) xPathExpression.evaluate(doc,XPathConstants.NODESET); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T12:08:38.653

该`translate`函数对字符串进行操作，因此它首先将其参数强制转换为字符串，然后转换结果。`Book`在您使用它的上下文中，有一个由三个节点组成的节点集，并且节点集的字符串值是其*第一个成员*的值，因此您的表达式作为一个整体意味着“查找第一个 Book 子节点为 b1 的所有作者（不区分大小写）”。

相反，您需要类似的东西

```
Author[Book[translate(.,'ABCDEFGHIJKLMNOPQRSTUVWXYZ','abcdefghijklmnopqrstuvwxyz')='b1']] 
```

“查找所有拥有值为 b1 的 Book 子项的所有作者（不区分大小写）*”*

# javascript - OnKeyPress ENTER 重新加载页面

> ID：12781308
> 
> 赞同：2
> 
> 时间：2012-10-08T12:00:11.187
> 
> 标签：javascript, onkeypress

```
<input type="text" onkeypress="if (event.keyCode==13){ func_name(this.value);}"    id="userinput"/> 
```

我有一个文本字段，我在按 ENTER 键时调用了一个函数。问题是页面被重新加载，而它不应该这样，因为我只调用一个 js 函数。请告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T12:03:57.670

表单正在通过按 Enter 提交。您可以将`onsubmit`事件附加到表单，并返回 false 以阻止提交（并返回 true 以提交）。您可以使用此功能在提交之前验证数据，或拦截您的`keypress`事件。

或者，如下所述，您可以使用 event.preventDefault() 来防止按下回车触发提交。

像这样的东西...

```
<form action=".">
    <input type="text" onkeypress="console.log('happy days'); event.preventDefault()">
</form> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-09T13:34:34.273

我知道这是一条旧消息，但我通过添加“return false”解决了它：

```
<input type="text" onkeypress="if (event.keyCode==13){ func_name(this.value);return false;}" id="userinput"/> 
```

也许它对其他有类似问题的人有用。

# jquery - Jquery BlockUI 导致视口四处移动

> ID：12781311
> 
> 赞同：2
> 
> 时间：2012-10-08T12:00:22.790
> 
> 标签：jquery, blockui, jquery-blockui

我有几个屏幕长`div`，顶部和底部都有按钮。每当单击这些按钮时，都会阻止 UI；这会导致视口位置跳到`div`.

有没有办法防止这种情况发生并`'Loading...'`在屏幕中间显示消息而不跳动视口？

# regex - 正则表达式替换：匹配中的多个替换

> ID：12781312
> 
> 赞同：6
> 
> 时间：2012-10-08T12:00:31.947
> 
> 标签：regex, notepad++, replace, t4mvc

我正在将我们的 MVC3 项目转换为使用 T4MVC。而且我想替换 java-script 包含也可以与 T4MVC 一起使用。所以我需要更换

```
"~/Scripts/DataTables/TableTools/TableTools.min.js"
"~/Scripts/jquery-ui-1.8.24.min.js" 
```

进入

```
Scripts.DataTables.TableTools.TableTools_min_js
Scripts.jquery_ui_1_8_24_min_js 
```

我目前正在使用 Notepad++ 作为正则表达式工具，它正在使用 POSIX 正则表达式。我可以找到脚本名称并将其替换为这些正则表达式：

寻找：`\("~/Scripts/(.*)"\)`

用。。。来代替`\(Scripts.\1\)`

但是我不知道如何将文件名中的点和破折号替换为下划线并将正斜杠替换为点。

我可以用这个检查 js-filename 的名称中是否有点或破折号

```
 \("~/Scripts/(?=\.*)(?=\-*).*"\) 
```

但是如何替换组内的组？

需要在组内进行非贪婪替换，并且这些替换按顺序进行，因此转换为点的正斜杠之后不会转换为下划线。

这是一个非关键问题，我已经手动完成了所有替换，但我认为我对正则表达式很好，所以这个问题困扰着我！！

ps 首选工具是 Notepad++，但任何 POSIX 正则表达式解决方案都可以 -)

pps[这里你可以得到一个](http://pastebin.com/Av3mTbyn)要替换的东西 的样本[这里是目标文本](http://pastebin.com/PvgEmJNr)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T21:28:38.427

这是一个普通的 Notepad++ 解决方案，但它肯定不是最优雅的解决方案。我设法通过对文件的几次传递来进行转换。

## 第一关

替换`.`和。`-`_`_`

寻找：`("~/Scripts[^"]*?)[.-]`

用。。。来代替：`\1_`

不幸的是，我找不到**只**`.`匹配or的方法`-`，因为它需要一个lookbehind，这显然不被 Notepad++ 支持。因此，每次执行替换时，只会替换脚本名称中的第一个`.`或第`-`一个（因为匹配项不能重叠）。因此，您必须多次运行此替换，直到不再进行替换（在您的示例输入中，这将是 8 次）。

## 第二遍

替换`/`为`.`。

寻找：`("~/Scripts[^"]*?)/`

用。。。来代替：`\1.`

这与第一遍基本相同，只是字符不同（对于示例文件，您必须这样做 3 次）。按此顺序进行传递可确保没有斜线最终成为下划线。

## 第三关

删除周围的字符。

寻找：`"~/(Scripts[^"]*?)"`

用。。。来代替：`\1`

现在，这将匹配仍然由`"~/`and包围的所有脚本名称`"`，捕获中间的内容并输出。

请注意，通过在前两遍的查找模式中包含这些周围的字符，您可以避免转换`.`已经是新格式的 in 字符串。

正如我所说，这不是最方便的方法。特别是，由于必须多次手动执行第一遍和第二遍。但是它仍然可以为大文件节省大量时间，而且我想不出一种方法来获取所有文件 - 仅在正确的字符串中 - 一次通过，没有后视功能。当然，我非常欢迎提出改进此解决方案的建议 :)。我希望我至少可以给你（以及任何有类似问题的人）一个起点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T23:24:34.057

如果如您的问题所示，您想使用 N++，请使用 N++ Python 脚本。设置脚本并分配一个快捷键，然后您就拥有一个只需要打开、修改和保存的单通道解决方案......没有比这更简单的了。

我认为部分问题在于 N++**不是**正则表达式工具，有时需要使用专用的正则表达式工具，甚至是搜索/替换解决方案。使用用于文本处理和编辑的工具，您可能会在速度和*时间价值方面做得更好。*

[脚本编辑]:: 更改以匹配修改后的输入/输出预期。

```
# Substitute & Replace within matched group.
from Npp import *
import re

def repl(m):
    return "(Scripts." + re.sub( "[-.]", "_", m.group(1) ).replace( "/", "." ) + ")"

editor.pyreplace( '(?:[(].*?Scripts.)(.*?)(?:"?[)])',  repl ) 
```

1.  安装:: 插件 -> 插件管理器 -> Python 脚本
2.  新脚本:: 插件 -> Python 脚本 -> script-name.py
3.  选择目标选项卡。
4.  运行:: 插件 -> Python 脚本 -> 脚本 -> 脚本名称

* * *

[编辑：一个扩展的单行 PythonScript 命令]

由于需要 Python 的新 regex 模块（我希望替换 re），我尝试并编译了它以与 N++ PythonScript 插件一起使用，并决定在您的示例集上对其进行测试。

控制台上的两个命令最终在编辑器中得到了正确的结果。

```
import regex as re
editor.setText( (re.compile( r'(?<=.*Content[(].*)((?<omit>["~]+?([~])[/]|["])|(?<toUnderscore>[-.]+)|(?<toDot>[/]+))+(?=.*[)]".*)' ) ).sub(lambda m: {'omit':'','toDot':'.','toUnderscore':'_'}[[ key for key, value in m.groupdict().items() if value != None ][0]], editor.getText() ) ) 
```

**很甜！**

使用它的其他真正酷`regex`之处`re`在于我能够在 Expresso 中构建表达式并按原样使用它！这允许对其进行详细解释，只需将`r''`字符串部分复制粘贴到 Expresso 中即可。

其简写为：：

```
Match a prefix but exclude it from the capture. [.*Content[(].*]
[1]: A numbered capture group. [(?<omit>["~]+?([~])[/]|["])|(?<toUnderscore>[-.]+)|(?<toDot>[/]+)], one or more repetitions
    Select from 3 alternatives
         [omit]: A named capture group. [["~]+?([~])[/]|["]]
             Select from 2 alternatives
                 ["~]+?([~])[/]
                 Any character in this class: ["]
         [toUnderscore]: A named capture group. [[-.]+]
         [toDot]: A named capture group. [[/]+]
Match a suffix but exclude it from the capture. [.*[)]".*] 
```

命令分解相当漂亮，我们告诉 Scintilla 将完整的缓冲区内容设置为编译的正则表达式替换命令的结果，方法是基本上使用非空组名称的“开关”。

希望 Dave（PythonScript 作者）将正则表达式模块添加到项目的[ExtraPythonLibs](http://sourceforge.net/projects/npppythonscript/files/)部分。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-11T00:23:04.613

我只会使用像[RegexHero这样的网站](http://regexhero.net/tester/)

1.  您可以将代码粘贴到目标字符串框中，然后`(?<=(~/Script).*)[.-](?=(.*"[)]"))`放入`Regular Expression`框中，`_` 在`Replacement String`框中。

2.  替换完成后，单击`Final String`底部的 ，然后选择`Move to target string and start a new expression`。

3.  从那里，粘贴`(?<=(<script).*)("~/)(?=(.*[)]" ))|(?<=(Url.).*)(")(?=(.*(\)" )))`到`Regular Expression`框中，然后将`Replacement String`框留空。

4.  替换完成后，单击`Final String`底部的 ，然后选择`Move to target string and start a new expression`。

5.  从那里粘贴`(?<=(Script).*)[/](?=(.*[)]"))`到`Regular Expression`盒子和`.`盒子里`Replacement String`。

之后，`Final String`盒子里就会有你要找的东西。我不确定您可以解析多少文本的上限，但如果这是一个问题，它可能会被分解。我确信可能有更好的方法来做到这一点，但这往往是我处理此类事情的方式。我喜欢这个网站的一个原因是因为我不需要安装任何东西，所以我可以在任何地方快速完成。

编辑 1：根据评论，我已将第 3 步移至第 5 步，并添加了新的第 3 步和第 4 步。我必须这样做，因为新的第 5 步会用 a替换`/`in ，从而破坏. 我还必须更改第 5 步的代码以说明更改的开头`"~/Scripts``.``"~/``Script`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-12T14:30:14.790

或者，您可以使用一个脚本来完成它，并完全避免复制粘贴和其余的手工劳动。考虑使用以下脚本：

```
$_.gsub!(%r{(?:"~/)?Scripts/([a-z0-9./-]+)"?}i) do |i| 
    'Scripts.' + $1.split('/').map { |i| i.gsub(/[.-]/, '_') }.join('.')
end 
```

并像这样运行它：

```
$ ruby -pi.bak script.rb *.ext 
```

所有带有扩展名的文件`.ext`都将被就地编辑，原始文件将以`.ext.bak`扩展名保存。如果您使用修订控制（并且您应该），那么您可以使用一些视觉差异工具轻松查看更改，必要时更正它们并在之后提交它们。

# php - 在 Drupal 中向用户添加新选项卡

> ID：12781315
> 
> 赞同：1
> 
> 时间：2012-10-08T12:00:36.080
> 
> 标签：php, drupal-7

如何将新选项卡添加到用户配置文件。我想添加例如管理员和用户本身（而不是其他人）可以看到的新用户选项卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T04:43:00.683

嗨朋友谢谢你帮助我....我在代码下完成了

`function downloaded_menu(){ $items['user/%user/downloaded'] = array( 'title' => 'Downloaded', 'page callback' => 'downloaded_content_page', 'access arguments' => array('access content'), 'type' => MENU_LOCAL_TASK, 'weight' => 10, ); return $items; }`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:22:29.020

您可以通过视图模块实现这一点，而无需进行自定义编码。

设置一个新的视图页面，路径为 'user/%' 设置上下文过滤器为 'user:uid'

将您的页面内容设置为“用户”或“字段”或您想要呈现的任何内容。这会将标准的 drupal 页面“劫持”为视图渲染。

现在，您可以通过添加视图页面并将路径设置为“user/%/path_of_your_tab”来添加任意数量的附加选项卡。将每个选项卡的菜单项设置为“菜单选项卡”和“用户菜单”

然后，您可以在视图中为每个选项卡设置访问权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T12:45:23.867

如果您想创建自己的模块，代码将如下所示：

```
<?php
// Define callback for tab.
function user_tab_menu(){
    return array(
        'user/%/new_tab' => array(
            'title' => 'New tab',
            'page callback' => 'user_tab_page',
            'page arguments' => array(1),
            'access callback' => 'user_tab_access',
            'access arguments' => array(1),
            'type' => MENU_LOCAL_TASK,
        ),
    );
}

// Show the page
function user_tab_page($uid){
    return 'New tab';
}

// Check if user has permission, or views its own page
function user_tab_access($uid){
    return ($uid == $GLOBALS['user']->uid) || user_access('view user tabs');
}

// Define permission for administrators
function user_tab_perm(){
    return array(
        'view user tabs' => array(
            'title' => t('View user tabs'), 
            'description' => t('View user tabs'),
        ),
    );
} 
```

# c - 如何在 C 中使用 for 循环创建模式

> ID：12781317
> 
> 赞同：1
> 
> 时间：2012-10-08T12:00:40.783
> 
> 标签：c, design-patterns

我被这个问题难住了。我需要创建一个模式，例如：

```
1
21
221
2221
22221 
```

使用嵌套的 for 循环。我有一些事情可以做（A）

```
222221
222221
222221
222221
222221 
```

并且曾经做过一些事情（B）

/* 1 * 21 * 221 * 2221 * 22221 * 222221 * 2222222 */

```
#include <stdio.h>

main()
{
    int n, c, k;

    printf("Enter number of rows\n");
    scanf("%d",&n);

    for ( c = 1 ; c <= n ; c++ )
    {
        printf("1\n");

        for( k = 1 ; k <= c ; k++ )
        printf("2");

    }

    return 0;
} 
```

任何提示都会有所帮助。

解决方案 - 感谢决定提供帮助的聪明人。我感谢您的帮助！

```
#include <stdio.h>

main()
{
    int n, c, k;

    printf("Enter number of rows");
    scanf("%d",&n);

    for ( c = 1 ; c <= n ; c++ )
    {

        for( k = 1 ; k < c ; k++ )
        {
            printf("2");
        }

        printf("1\n");
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:12:34.003

这是一些生成您的第一个模式的代码。

```
#include <stdio.h>

#define NUMLINES 5

int main(void) {
    int i, j;
    for(i=0; i<NUMLINES; i++) {
        for(j=0; j<i; j++) {
             printf("2");
        }
        printf("1\n");
    }
    return 0;
} 
```

重要的部分是内部`for`循环直到达到外部循环的当前值（`j<i`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:15:52.007

这可以使用嵌套的 for 循环来完成。让我们检查一行输出的公式：

**第 1 行**：

> 1

可以使用这样的简单 for 循环来制作：

```
for (int i = 0; i < 1; i++)
{
    putc('1', stdout);
    putc('\n', stdout);
} 
```

**第 2 行**：

> 21

嗯，这需要改变我们的结构，因为我们不能破坏迭代 #1 的输出，但我们仍然需要能够在其中添加“2”......这样的事情应该可以工作：

```
for (int i = 0; i < 2; i++)
{
    if (i > 0)
       putc('2', stdout);

    putc('1', stdout);
    putc('\n', stdout);
} 
```

**第 3 行：**

> 221

等等，现在我们需要两个'2'！我们如何在不破坏线的 2 和 3 的情况下做到这一点？那么这样的事情应该这样做：

```
 for (int i = 0; i < 3; i++)
 {
     int j = i;
     while (j--)
     {
         putc('2', stdout);
     }

     putc('1', stdout);
     putc('\n', stdout);
 } 
```

请注意，我使用了`while`循环而不是 for 循环。读者可以通过练习来弄清楚如何将 while 循环转换为 for 循环。

希望这可以帮助您了解在未来解决类似问题的过程 - 因为这是一项重要的编程技能。

# javascript - 如何通过 jquery UI 滑块从具有动态更改值的输入中获取值？

> ID：12781322
> 
> 赞同：0
> 
> 时间：2012-10-08T12:00:58.513
> 
> 标签：javascript, jquery, jquery-ui-slider

我通过 jquery UI 滑块输入了具有动态更改值的文本。如何 `$("#scope_input")`通过jquery获取价值？`.change`事件仅通过键盘上的手动按键起作用，滑动时没有任何价值：

```
$("#scope_input").change(function() {
    console.log($(this).val());
});

$("#scope_slider").slider({
    range: "min",
    min: 1,
    max: 100,
    value: 10,
    slide: function(event, ui) {
    $("#scope_input").val(ui.value);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:06:00.610

您需要手动触发更改事件：

```
$("#scope_input").val(ui.value).change(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:09:21.807

当您更新幻灯片事件中的字段时，触发输入的更改

```
$("#scope_slider").slider({
    range: "min",
    min: 1,
    max: 100,
    value: 10,
    slide: function(event, ui) {
    $("#scope_input").val(ui.value).change();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:11:12.540

你试过了吗

```
$("#scope_slider").bind("slidechange", function(event, ui) {
    $("#scope_input").val(ui.value);
}); 
```

# python - 使用 Python 存储和访问大数据

> ID：12781328
> 
> 赞同：3
> 
> 时间：2012-10-08T12:01:14.350
> 
> 标签：python, bigdata

我即将开始处理大小约为 500 GB 的数据。我希望能够在任何给定时间使用 Python 访问数据的小部分。我正在考虑将 PyTables 或 MongoDB 与 PyMongo（或 Hadoop - 感谢[Drahkar](https://stackoverflow.com/users/908210/drahkar)）一起使用。我应该考虑其他文件结构/数据库吗？

我将要做的一些操作是计算从一个点到另一个点的距离。根据布尔测试等的索引提取数据。结果可能会在线上用于网站，但目前它仅用于桌面进行分析。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:08:42.310

如果您正在认真研究大数据流程的数据处理，我强烈建议您研究 Hadoop。Cloudera ( [http://www.cloudera.com/](http://www.cloudera.com/) ) 是一个提供商。它是一个非常强大的平台，其中包含许多用于数据处理的工具。包括 Python 在内的许多语言都有用于访问数据的模块，而且一旦您为它构建了各种 mapreduce、Hive 和 hbase 作业，hadoop 集群就可以为您完成大量的处理工作。

# ruby-on-rails - Paperclip - 获取没有 ActiveRecord 模型的图像路径

> ID：12781329
> 
> 赞同：4
> 
> 时间：2012-10-08T12:01:38.920
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip

在特定视图中，我正在渲染从 SQL 查询创建的 PORO 数组（这是出于性能原因，此处使用 ActiveRecord 模型将是一个主要的性能问题）。

在该视图中，我需要显示使用回形针上传的图像，但找不到让回形针返回没有 ActiveRecord（附件）实例的图像 url 的方法。我也可以从数据库（“image.jpg”）和模型名称（“用户”）中获取图像的名称。

我需要像 url("image.jpg", :user, :thumb) 这样的东西。

我可以硬编码路径，但我不希望这样，让回形针处理这个。

这可能吗？

谢谢，里卡多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T08:28:34.700

[我在这里](https://gist.github.com/basgys/5712426)创建了一个要点

基本上你的对象需要实现一些 ActiveModel 模块来满足 Paperclip 的要求，因为这个库与 ActiveRecord 是强耦合的。

# javascript - Wordpress：我可以启动在同一页面上声明的小型 javascript 吗？或者如何将 .js 文件上传到 Wordpress？

> ID：12781334
> 
> 赞同：1
> 
> 时间：2012-10-08T12:01:47.483
> 
> 标签：javascript, wordpress

我对 wordpress 完全陌生。我只想在页面上使用单个 javascript 片段。例如：

```
<script>
function myFunction(){
//do something
}
</script>
// a bit later
<input type="button" name="testButton" onclick="myFunction()"> 
```

在 Chrome 的开发人员控制台中，我收到一个错误：`"Refused to execute a JavaScript script. Source code of script found within request."`

我已经做了一些研究，我认为我知道它的来源 - 似乎我必须在我的`javascript`代码中添加一个外部文件。糟糕的是，尽管过去几个小时进行了研究，但我实际上不知道该怎么做。也许这很容易，我错过了简单的解决方案，但我只是不知道如何上传 .js 文件。我遇到了一些话题，说我必须使用 php 函数，`wp_enqueue_script()`但它仍然需要将 .js 文件上传到`wordpress`服务器。我必须将其上传为媒体、页面还是什么？而且，如果我`javascript`每次想要更改某些东西时都必须上传一个文件，那么应用程序开发将是一件很痛苦的事情......

那么是否有一种简单的方法可以将我的`javascript`函数定义放在使用该函数的同一文件中？这可能是最简单的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:03:10.083

将整个代码添加到 WordPress 的 header.php 文件中并添加

```
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js'></script> 
```

在你的代码之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:06:05.707

添加外部Javascript文件可能是要走的路。如果这是一个常规的 HTML 站点，您将使用相同的方式上传它们（即使用 FTP 或类似的东西）。

然后您可以在 header.php 文件中引用它（可在 Wordpress 中的外观 -> 编辑器下访问）。

某些主题允许您将 Javascript 添加到每个页面的顶部/底部，您可能需要检查您的主题是否允许这样做。（查看带有主题或他们支持的手册）。

# hadoop - nutch2.0 hadoop 输入路径不存在

> ID：12781338
> 
> 赞同：0
> 
> 时间：2012-10-08T12:02:16.397
> 
> 标签：hadoop, hbase, nutch

```
Exception in thread "main" org.apache.hadoop.mapreduce.lib.input.InvalidInputException: Input path does not exist: hdfs://yuqing-namenode:9000/user/yuqing/2
at org.apache.hadoop.mapreduce.lib.input.FileInputFormat.listStatus(FileInputFormat.java:235)
at org.apache.hadoop.mapreduce.lib.input.FileInputFormat.getSplits(FileInputFormat.java:252)
at org.apache.hadoop.mapred.JobClient.writeNewSplits(JobClient.java:962)
at org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:979)
at org.apache.hadoop.mapred.JobClient.access$600(JobClient.java:174)
at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:897)
at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:850)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:415)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:850)
at org.apache.hadoop.mapreduce.Job.submit(Job.java:500)
at org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:530)
at org.apache.nutch.util.NutchJob.waitForCompletion(NutchJob.java:50)
at org.apache.nutch.crawl.InjectorJob.run(InjectorJob.java:219)
at org.apache.nutch.crawl.Crawler.runTool(Crawler.java:68)
at org.apache.nutch.crawl.Crawler.run(Crawler.java:136)
at org.apache.nutch.crawl.Crawler.run(Crawler.java:250)
at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
at org.apache.nutch.crawl.Crawler.main(Crawler.java:257) 
```

当我从 nutch conf 中删除 hadoop 的配置文件时，第一行错误变为：

```
Exception in thread "main" org.apache.hadoop.mapreduce.lib.input.InvalidInputException: Input path does not exist: file:/home/yuqing/workspace/nutch2.0/2 
```

一旦我用 hbase 运行 Nutch2.0 成功，但现在完整的分发不工作。完整发行版中的 Hbase 运行正常，我可以在 shell 中运行它。接下来我在nutch2.0中创建一个文件夹，然后爬虫可以运行，但是控制台的输出似乎不正常。现在我得吃饭了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:27:57.770

看起来你没有输入路径。正如hadoop所说。检查， hdfs dfs -ls /user/yuqing/2 返回一些东西（2应该是文件或目录）

至于第二部分，当您删除 hadoop 配置时，hadoop 库使用内部配置（您可以在分发中找到它们，名称为 *-default.xml、fe core-default.xml），以及在“本地”模式下的 hadoop 函数。在“本地”模式下，所有路径都是本地的（在本地文件系统中）。所以，当你在'hdfs'模式下引用文件时，fe hdfs dfs -ls /some/file，hadoop会在hdfs（hdfs://namenode.ip/some/file）中查找文件，但在本地模式下会搜索文件相对（通常是文件：/home/user/some/file）。您可以在输出中看到：file:/home/yuqing/workspace/nutch2.0/2

# sql - 如何在单个查询中选择具有计数和限制的 postgres 中的数据

> ID：12781339
> 
> 赞同：1
> 
> 时间：2012-10-08T12:02:18.603
> 
> 标签：sql, postgresql, postgresql-9.1, psql

包含格式数据的 PostgreSQL 表

表名是 tbl1 tbl1

```
id -- RCODE -- CCODE -- LDATA
1     123      50        p1
2     124      51        p2
3     126      50        p3 
```

.....................................................................

```
23     116      56        p3
24     126      50        p9
25     126      50        p3
26     136      56        p5
27     126      50        p3
28     146      52        p7 
```

我的问题是如何`CCODE =50`从数据库的最后 7 条记录中找到计数`RCODE =126`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:10:08.123

使用子查询生成一个中间表`a`，其中包含*RCODE=126 的数据库的最后 7 条记录*。然后跑`COUNT`过去`WHERE CCODE=50`。询问：

```
SELECT COUNT(*)
FROM (
    SELECT CCODE
    FROM tbl1
    WHERE RCODE = 126
    ORDER BY id DESC LIMIT 7
) AS a
WHERE CCODE = 50 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:08:37.047

```
select count(*) as total
from (
    select CCODE
    from tbl1
    where RCODE = 126
    order by id desc
    limit 7
    ) s
where CCODE = 50 
```

# php - 检查提供的日期时间值是否位于某个时间间隔之间

> ID：12781340
> 
> 赞同：2
> 
> 时间：2012-10-08T12:02:20.720
> 
> 标签：php, mysql

***设想***

**UDPATE**

请忽略评论部分。在考虑了替代方案后，我想出了这个：

假设我有

```
$date = '2012-10-03 13:00:00' 
```

时间间隔范围为

```
2012-10-03 12:00:00 to 2012-10-03 14:00:00 
```

现在`$date`落在上述时间范围之间。关于如何将日期时间与日期时间范围进行比较的任何想法？我遇到过比较日期或时间但不能同时比较两者的函数。非常感谢任何帮助。

```
/*I'm building a school timetable and want to make sure that a room cannot be assigned to two different periods if it is already occupied. I have datetime values of **`2012-10-03 13:00:00`** (the start time of a period. Let's call it **abc** for reference) and **`2012-10-03 13:30:00`** (the end time of a period. Let's call it **xyz** for reference). 

My database table contains columns for room number assigned for a period and the start and end time of that period. Something like this:

    room_no | start_time          | end_time
       5      2012-10-03 13:00:00   2012-10-03 14:30:00

This means for October 3, 2012 room 5 is occupied between 1pm and 2:30pm. So the datetime values that I have (abc & xyz) will have to be assigned to a room other than 5.

I'm at a loss of ideas on how to go about validating this scenario, i.e. make sure that the period with time interval between abc & xyz cannot be assigned room number 5.

Any help would be appreciated. Thanks in advance

PS : I'm not asking for code. I'm looking for ideas on how to proceed with the issue at hand. Also, is there a way a query can be build to return a row if `abc` or `xyz` lie between `start_time` and `end_time` as that would be great and reduce a lot of workload. I could simply use the number of rows returned to validate (if greater than 0, then get the room number and exclude it from the result)*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:07:21.710

```
if(StartTime - BookingTime < 0 && BookingTime - EndTime < 0)
{
  // Booking time is already taken
} 
```

您可以使用 TIMEDIFF() 在 SQL 中执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:06:11.110

我正在研究类似的东西，也许是一种更简单的编码方法，它不是使用时间而是使用时间段？我想这样做的方式是桌子预订（日期，槽ID，房间）桌子槽（可能有槽ID和时间）并且每次预订使用一定数量的槽..然后当你寻找房间什么时候可用它会按日期向您显示哪些插槽是免费的.. 只是一个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:33:01.897

基本上我认为您需要将第一个可用的 room_no 分配给您的 abc-xyz 时间跨度。因此，您应该获取不在已预订集合中的第一个良好价值。示例查询可能是这样的

```
select room_no
  from
  bookings
  where
  room_no not in (
    select
    room_no
    from bookings
    where start_time >= 'abc' and end_time <='xyz'
  )
  limit 1 
```

# css - Google Chrome 开发者工具 - 无法编辑 CSS

> ID：12781341
> 
> 赞同：1
> 
> 时间：2012-10-08T12:02:23.020
> 
> 标签：css, google-chrome

我正在使用 Google Chrome 开发人员工具在 localhost 站点上尝试不同的 CSS 值，例如将“border-width: 1px”更改为“border-width:2px”。

由于某种原因，我无法编辑。如果我点击“1px”，我可以输入一个新值，例如“2px”，但是一旦我点击返回，该值就会返回到“1px”。

出于某种原因，它只影响一个站点 - 我可以编辑的所有其他站点。

任何想法可能是什么问题？

早些时候，我在顶部看到“在调试器中暂停”通知，页面变灰。这可能与问题有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:34:59.360

我发现问题是在站点的样式表中使用了@import，特别是：

```
@import url('http://fonts.googleapis.com/css?family=Open+Sans'); 
```

一旦这被注释掉，我就可以再次编辑 CSS。

# javascript - 从刚刚单击的 URL 中添加参数

> ID：12781345
> 
> 赞同：8
> 
> 时间：2012-10-08T12:02:43.253
> 
> 标签：javascript

 这个场景是很多 html 文件，它们之间有很多链接。当我调用其中的第一个（它将是索引）时，链接会通过 URL 传递几个参数（我们可以称它们为首选项）。 

现在我希望，当单击页面的多个链接中的任何一个时，将添加这些参数。所以这个问题将与另一个类似（[如何将参数添加到已经包含其他参数和可能是锚点的 URL](https://stackoverflow.com/questions/6953944/how-to-add-parameters-to-a-url-that-already-contains-other-parameters-and-maybe)），但在单击链接后才执行此操作。

我知道一个解决方案可能是更改每个链接上的***onclick***事件，但由于可能有数千个，没有常规的 url 格式......我正在寻找一个可以在头部脚本上的解决方案；也许与***onbeforeunload***事件有关。

无论如何，我找不到该怎么做。有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T13:15:17.317

这将在单击时将字符串附加到包含 href 属性的任何内容：

```
window.addEventListener("click", function(e) {
    var href = e.target.getAttribute("href");
    if(href) {
        location.href = href + "?q=stackoverflow";
        e.preventDefault();
    }
});​ 
```

这里的例子：http: [//jsfiddle.net/E5Q7P/](http://jsfiddle.net/E5Q7P/)

不适用于 < IE9

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:09:31.010

我想一种方法是在页面加载时将 clickevent-listener 附加到所有锚元素，而不是更改每个链接的 onclick 属性或使用 onbeforeunload 事件。然后回调可以拦截浏览器的默认行为以跟随链接。然后，您可以获得`src`刚刚单击的 a 元素的属性，将所需的首选项添加到 URL，然后通过设置`window.location.href`正确的 URL 将用户发送到正确的位置（包括首选项）。

MDN 上有一篇关于事件监听器的[精彩文章](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)，我相信它会对您有所帮助。*特别注意关于旧版本 IE 的部分*

**一个非常粗略的例子：**

```
function callback(e){
  // Get the src of the clicked a-element
  var src = this.src;
  // Add preferences to the url, this need 
  // improvement depending on your needs
  src += "?somesetting=foo";
  // Send user to the url with preferences
  window.location.href = src;
}

// Get all anchors on page
var anchors = document.getElementsByTagName("a");

// Loop over the elements and attach listener
for(i=0 ; i < anchors.length ; i++){
  // Extend with support for older IE if needed
  anchors[i].addEventListener("click", callback, false});
}​ 
```

# c# - 调用具有反射和配置依赖关系的 DLL

> ID：12781348
> 
> 赞同：2
> 
> 时间：2012-10-08T12:02:46.197
> 
> 标签：c#, asp.net, reflection, dll, configuration

我有一个通过反射调用其他库中的方法的服务。但是，其中一些库具有外部依赖项，例如有时用于执行其工作的 app.config 文件。

有没有关于如何做到这一点的最佳实践，或者任何可以帮助解决这种情况的库？

例如：如果我的服务应该在方法 foo() 上调用外部 dll，则 foo() 会使用 app.config 获取字符串列表，但直接与反射一起使用时会崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-16T18:34:09.480

您必须创建一个新的 AppDomain 来调用您的外部应用程序。

定义一个接口来实现您的外部应用程序使用。

创建一个从 MarshallByRefObject 派生的类并标记为可序列化并实现对外部应用程序的调用。

定义一个没有足够设置（配置文件等）的 AppDomain

CreateInstanceAndUnwrap 实现为您接口并调用它。

# c# - AuthorizeAttribute.AuthorizeCore 方法中的 Session 怎么可能为空？

> ID：12781351
> 
> 赞同：2
> 
> 时间：2012-10-08T12:02:59.550
> 
> 标签：c#, asp.net-mvc, session, asp.net-mvc-migration

我有一个自定义属性类，它继承自`AuthorizeAttribute`. 有时参数`httpContext.Session`为空。这怎么可能？只要我登录/活跃，会话就应该是活跃的，对吗？我没有浏览 20 分钟或更长时间，实际上我只是浏览了 0-2 分钟，有时 Session 属性为空。

自从我们从 MVC 2 (.NET 3.5) 切换到 MVC 4.5 (.Net 4.5) 后，我们就有了这个错误。这可能是问题的原因吗？

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:41:02.937

> 这怎么可能？

如果您禁用了会话状态，则可能会发生这种情况。为了禁用会话状态，您可以在 web.config 中包含以下内容：

```
<sessionState mode="Off" /> 
```

或者您可以使用以下`[SessionState]`属性装饰您的控制器/基本控制器/动作：

```
[SessionState(SessionStateBehavior.Disabled)]
public class HomeController : Controller
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-09T13:32:44.907

这可能是一个缓存问题。尝试覆盖：

```
OnCacheAuthorization 
```

在过滤器中。或删除：

```
OutputCache 
```

来自控制器中动作的属性。

# actionscript-3 - 使用 creationPolicy = "auto" 在 Actionscript 中创建 ViewStack

> ID：12781356
> 
> 赞同：2
> 
> 时间：2012-10-08T12:03:21.900
> 
> 标签：actionscript-3, flex4

在 MXML 中，当我将组件添加到`ViewStack`和`creationPolicy`is`auto`时，组件在我切换到它们之前不会被实例化。说，我有以下代码：

```
<mx:ViewStack creationPolicy="auto">
    <s:NavigatorContent>
        <s:DataGrid id="dg1" width="300"/>
    </s:NavigatorContent>
    <s:NavigatorContent>
        <s:DataGrid id="dg2" width="100"/>
    </s:NavigatorContent>
</mx:ViewStack> 
```

如何在 ActionScript 中复制此行为？问题是我的 DataGrids 包含大量数据，因此我不希望同时创建它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T01:28:20.570

看起来 ViewStack 类上有一个 creationPolicy 属性。像这样的东西应该工作

```
var v:ViewStack = new ViewStack();
v.creationPolicy = "auto";

var t1:NavigatorContent = new NavigatorContent();
t1.addElement(new DataGrid());

v.addElement(t1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:28:36.170

请试试这个

```
var v:ViewStack = new ViewStack();
v.creationPolicy = "auto";

var container:SkinnableContainer = new SkinnableContainer();
container.creationPolicy = "none";

var dg:DataGrid = new DataGrid();
container.addElement(dg);

var t1:NavigatorContent = new NavigatorContent();
t1.addElement(container);

v.addElement(t1); 
```

在 viewstack_change 处理程序之后，我们需要调用

`container.createDeferredContent()`根据您要查看的索引视图。

更多细节[使用 createDeferredContent() 方法](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7aee.html#top)

# c# - XNA 列表元素

> ID：12781358
> 
> 赞同：0
> 
> 时间：2012-10-08T12:03:24.043
> 
> 标签：c#, list, xna

我正在使用一个`List`平台。我需要做一些`platforms.get(i).X` 我发现类似的事情，它被称为`elementAt`，但它只允许你做`platforms.elementAt(i).draw()`。如何检查列表中特定对象的变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T20:53:18.883

您可以使用数组索引表示法访问列表元素。

```
int x = platforms[i].X; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:30:12.723

您可以将委托用于类似 yourlist.Exists

```
if (stringlist.Exists(
                delegate(String s)
                {
                    return (s == "what you want to be found"); //this returns true if it is found.
                }
                ))
            {
                //What you want to do if it is found.
            } 
```

查找有关使用列表和委托的更多信息，您应该偶然发现可以使用它来解决您的问题的方法。

# android - 在 android 上的 Google Map 应用程序中设置自定义缩放按钮意外停止

> ID：12781359
> 
> 赞同：0
> 
> 时间：2012-10-08T12:03:31.027
> 
> 标签：android, google-maps-api-3, android-mapview

我使用以下代码[在 Android 中使用 Google Maps](http://mobiforge.com/developing/story/using-google-maps-android)使用 googlemaps api 创建应用程序，但出现异常错误。

```
mapView = (MapView) findViewById(R.id.mapView);
LinearLayout zoomLayout = (LinearLayout) findViewById(R.id.zoom);
View zoomView = mapView.getZoomControls();
zoomLayout.removeAllViews();
zoomLayout.addView(zoomView, new LinearLayout.LayoutParams(
        android.widget.LinearLayout.LayoutParams.WRAP_CONTENT,
        android.widget.LinearLayout.LayoutParams.WRAP_CONTENT));
mapView.displayZoomControls(true); 
```

mapView 在`public class MapsActivity extends MapActivity`. 在`View zoomView = mapView.getZoomControls();`Eclipse 中显示此警告：**不推荐使用 MapView 类型的方法 getZoomControls()** logCat 是：

```
10-08 15:27:47.606: D/dalvikvm(428): GC_FOR_MALLOC freed 4774 objects / 299864 bytes in 88ms
10-08 15:27:47.826: D/dalvikvm(428): GC_FOR_MALLOC freed 9901 objects / 603608 bytes in 68ms
10-08 15:27:48.016: D/dalvikvm(428): GC_FOR_MALLOC freed 4954 objects / 323936 bytes in 67ms
10-08 15:27:48.226: D/dalvikvm(428): GC_FOR_MALLOC freed 6199 objects / 378152 bytes in 67ms
10-08 15:27:48.466: D/dalvikvm(428): GC_FOR_MALLOC freed 8551 objects / 651664 bytes in 63ms
10-08 15:27:48.676: D/dalvikvm(428): GC_FOR_MALLOC freed 6074 objects / 370080 bytes in 60ms
10-08 15:27:48.716: D/AndroidRuntime(428): Shutting down VM
10-08 15:27:48.716: W/dalvikvm(428): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
10-08 15:27:48.736: E/AndroidRuntime(428): FATAL EXCEPTION: main
10-08 15:27:48.736: E/AndroidRuntime(428): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.avizhegroup.googlemaps/com.avizhegroup.googlemaps.MapsActivity}: android.view.InflateException: Binary XML file line #14: Error inflating class linearLayout
10-08 15:27:48.736: E/AndroidRuntime(428):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
10-08 15:27:48.736: E/AndroidRuntime(428):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
10-08 15:27:48.736: E/AndroidRuntime(428):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
10-08 15:27:48.736: E/AndroidRuntime(428):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
10-08 15:27:48.736: E/AndroidRuntime(428):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-08 15:27:48.736: E/AndroidRuntime(428):  at android.os.Looper.loop(Looper.java:123)
10-08 15:27:48.736: E/AndroidRuntime(428):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-08 15:27:48.736: E/AndroidRuntime(428):  at java.lang.reflect.Method.invokeNative(Native Method)
10-08 15:27:48.736: E/AndroidRuntime(428):  at java.lang.reflect.Method.invoke(Method.java:521)
10-08 15:27:48.736: E/AndroidRuntime(428):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-08 15:27:48.736: E/AndroidRuntime(428):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-08 15:27:48.736: E/AndroidRuntime(428):  at dalvik.system.NativeStart.main(Native Method)
10-08 15:27:48.736: E/AndroidRuntime(428): Caused by: android.view.InflateException: Binary XML file line #14: Error inflating class linearLayout
10-08 15:27:48.736: E/AndroidRuntime(428):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
10-08 15:27:48.736: E/AndroidRuntime(428):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
10-08 15:27:48.736: E/AndroidRuntime(428):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
10-08 15:27:48.736: E/AndroidRuntime(428):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
10-08 15:27:48.736: E/AndroidRuntime(428):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
10-08 15:27:48.736: E/AndroidRuntime(428):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
10-08 15:27:48.736: E/AndroidRuntime(428):  at android.app.Activity.setContentView(Activity.java:1647)
10-08 15:27:48.736: E/AndroidRuntime(428):  at com.avizhegroup.googlemaps.MapsActivity.onCreate(MapsActivity.java:33)
10-08 15:27:48.736: E/AndroidRuntime(428):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-08 15:27:48.736: E/AndroidRuntime(428):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
10-08 15:27:48.736: E/AndroidRuntime(428):  ... 11 more
10-08 15:27:48.736: E/AndroidRuntime(428): Caused by: java.lang.ClassNotFoundException: android.view.linearLayout in loader dalvik.system.PathClassLoader[/system/framework/com.google.android.maps.jar:/data/app/com.avizhegroup.googlemaps-1.apk]
10-08 15:27:48.736: E/AndroidRuntime(428):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
10-08 15:27:48.736: E/AndroidRuntime(428):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
10-08 15:27:48.736: E/AndroidRuntime(428):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
10-08 15:27:48.736: E/AndroidRuntime(428):  at android.view.LayoutInflater.createView(LayoutInflater.java:466)
10-08 15:27:48.736: E/AndroidRuntime(428):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:544)
10-08 15:27:48.736: E/AndroidRuntime(428):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
10-08 15:27:48.736: E/AndroidRuntime(428):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
10-08 15:27:48.736: E/AndroidRuntime(428):  ... 20 more
10-08 15:27:50.956: I/Process(428): Sending signal. PID: 428 SIG: 9 
```

在自定义缩放按钮地图运行并正确显示之前。我怎样才能解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:07:42.890

```
map.setBuiltInZoomControls(true); 
```

试试看。

# objective-c - 为什么我的 NSArray 会被释放？

> ID：12781366
> 
> 赞同：2
> 
> 时间：2012-10-08T12:03:57.597
> 
> 标签：objective-c, ios, automatic-ref-counting

我正在尝试理解自动引用计数，因为我来自高级编程语言 (Python)，并且我正在开发一个使用 Objective-C 的此功能的项目。我经常遇到 ARC 释放对象的问题，我稍后需要，但现在我得到了一个具体的例子，我希望我能得到一个解释。

```
- (void) animateGun:(UIImageView *)gun withFilmStrip:(UIImage *)filmstrip{
  NSMutableArray *frames = [[NSMutableArray alloc] init];
  NSInteger framesno = filmstrip.size.width / gun_width;
  for (int x=0; x<framesno; x++){
    CGImageRef cFrame = CGImageCreateWithImageInRect(filmstrip.CGImage, CGRectMake(x * gun_width, 0, gun_width, gun_height));
    [frames addObject:[UIImage imageWithCGImage:cFrame]];
    CGImageRelease(cFrame);
  }
  gun.image = [frames objectAtIndex:0];
  gun.animationImages = frames;
  gun.animationDuration = .8;
  gun.animationRepeatCount = 1;
  [gun startAnimating];
  dispatch_after(dispatch_time(DISPATCH_TIME_NOW,(arc4random() % 300)/100 * NSEC_PER_SEC), dispatch_get_current_queue(),^{
    [self animateGun:leftGun withFilmStrip:[self getFilmStripForAction:gunShoot andTeam:nil withWeapon:nil]];
  });
} 
```

这段代码背后的想法很简单：我有一个随机时间`(UIImageView*)gun`用存储在 中的图像进行动画处理。只是一个包含将用于动画的所有帧的图像。动画的第一次迭代有效，但问题出现在第二次迭代中，我得到or or 。这发生在`(NSMutableArray *)frames``(UIImage *)filmstrip``-[UIImage _isResizable]: message sent to deallocated instance ...``-[UIImage _contentStretchInPixels]: message sent to deallocated instance ...``-[NSArrayI release]: message sent to deallocated instance ...`

```
gun.animationImages = frames; 
```

但我不明白为什么。我不是要求修复我的问题，只是为了帮助我了解这里发生的事情。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:21:37.140

ARC 是一种无需手动保留/释放对象的机制。这是一个很好的网站，它解释了它是如何工作的：http: [//longweekendmobile.com/2011/09/07/objc-automatic-reference-counting-in-xcode-explained/](http://longweekendmobile.com/2011/09/07/objc-automatic-reference-counting-in-xcode-explained/)

尝试将“leftGun”更改为“gun”。如果您通过 ivar 使用它，我认为这可能是在某个时候被释放的那个。否则，leftGun 根本不在范围内。

它应该是这样的：

在您的 .h 文件中：

```
@property (nonatomic, strong) IBOutlet UIImageView *leftGun; 
```

在您的 .m 文件中：

```
 dispatch_after(dispatch_time(DISPATCH_TIME_NOW,(arc4random() % 300)/100 * NSEC_PER_SEC), dispatch_get_current_queue(),^{
    [self animateGun:gun withFilmStrip:[self getFilmStripForAction:gunShoot andTeam:nil withWeapon:nil]];
  }); 
```

此外，不太确定“gunShoot”的来源。那应该是一个枚举吗？

**编辑**

`leftGun`添加了应如何定义属性的示例。在 ivar 上使用属性的原因是出于内存管理的目的。如果您想释放或销毁作为属性的对象，只需将其设置为 nil ，如果必须，该属性将负责释放该对象。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-08T13:34:05.683

# c# - MySQL 中具有多个 SELECT 的 IF 语句

> ID：12781374
> 
> 赞同：1
> 
> 时间：2012-10-08T12:04:18.560
> 
> 标签：c#, mysql

我将 MySQL 与 Visual Studio 2010 C# 语言一起使用。

我需要查询。

```
SELECT a field, if this field is null or equals to 0 
```

制作另一个`SELECT`，如果它`<>`不同于`null`or `0`。再做一个`SELECT`。

我也尝试遵循您在上面写标题时出现的建议，但没有。

就像是：

```
SELECT cart.cod_dependent (if cart.cod_dependent <> 0, Select ass.matricula, ass.nome, ass.situacao_social, ass.categoria, ELSE IF cart.cod_dependent = null Make another select) 
```

每个选择将在不同的表中，但都在同一个数据库中。

------ 更新 10/08/2012 09:59 -------- 现在我正在尝试你所说的**Radu Bompa**，但它说“在执行命令期间出现致命错误”=\ 。

```
 MySqlCommand cmd = new MySqlCommand();
  string sql = @"SELECT @cod_dep = cart.cod_dependente FROM carteiras as cart
  IF @cod_dep IS NULL
  BEGIN
  SELECT ass.matricula, ass.nome, ass.situacao_social, ass.categoria FROM associados AS ass INNER JOIN categorias AS cat ON cat.codigo = ass.categoria,
  INNER JOIN situacoes_social AS ss ON ass.situacao_social = ss.codigo
  END
  ELSE
  BEGIN
  SELECT dep.nome, dep.matricula, dep.situacao_social, ss.descricao FROM dependentes INNER JOIN situacao_social as ss dep.situacao_social = ss.codigo
  END
  WHERE cart.numero = @carteira";
  cmd.CommandText = sql;
  cmd.CommandType = CommandType.Text;
  string dependente = "";
  cmd.Parameters.Add(new MySqlParameter("@carteira", MySqlDbType.Int32)).Value = carteira;
  DataSet ds = _dal.Consultar(cmd); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:46:04.703

也许这样的事情可以工作：

```
SELECT @SomeValue = cart.cod_dependent FROM cart   
--@SomeValue is a variable, declared for this purpose
IF @SomeValue IS NULL
BEGIN
  SELECT ass.matricula, ass.nome, ass.situacao_social, ass.categoria FROM table2
END
ELSE
BEGIN
  SELECT field FROM table3
END 
```

您也可以尝试使用[存储过程](http://msdn.microsoft.com/en-us/library/aa174792%28v=sql.80%29.aspx)。

# sql - COUNT_BIG() 返回为 1，即使它应该为 0

> ID：12781376
> 
> 赞同：0
> 
> 时间：2012-10-08T12:04:29.550
> 
> 标签：sql

我有以下查询：

```
SELECT     dbo.Enquiries.EnquiryID, COUNT_BIG(dbo.Enquiries.EnquiryID) AS AttachedLines
FROM         dbo.Enquiries INNER JOIN
                      dbo.QuoteLines ON dbo.Enquiries.EnquiryID = dbo.QuoteLines.EnquiryID
GROUP BY dbo.Enquiries.EnquiryID 
```

我的一些查询`QuoteLines`附加了 0，但在我看来，它们返回为 1？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:06:50.050

更改`COUNT_BIG(*)`为按列计数，例如`COUNT_BIG(SomeColumn)`- 这将跳过列中的 NULL。我假设您的实际查询使用的是`LEFT JOIN`.

对于你的情况，你说

> 我的一些查询附加了 0 QuoteLines，但在我看来，它们返回为 1？

这会使 INNER JOIN 失败。所以你要么显示了错误的查询，要么语句不正确。无论哪种情况，您都可以使用以下查询进行故障排除：

```
SELECT dbo.Enquiries.EnquiryID,
       dbo.QuoteLines.*
FROM   dbo.DayBookEnquiries INNER JOIN
       dbo.QuoteLines ON dbo.Enquiries.EnquiryID = dbo.QuoteLines.EnquiryID 
```

它将显示来自 QuoteLines 的至少一条记录。

# android - Robotium 和 Sherlock - NoClassDefFoundError

> ID：12781381
> 
> 赞同：1
> 
> 时间：2012-10-08T12:04:51.380
> 
> 标签：android, exception, testing, android-actionbar, robotium

我在项目中遇到了测试问题。我已经正确配置了依赖项，但我无法使用 Robotium 运行测试。当我的活动仅扩展活动时-一切都很好，当我添加“扩展 SherlockActivity”时，我得到了

```
java.lang.RuntimeException: Exception during suite construction
at android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests.testSuiteConstructionFailed(TestSuiteBuilder.java:238)

Caused by: java.lang.NoClassDefFoundError: com.calculator.Main (example project from Robotium www). 
```

我曾尝试在 Intellij 和 Eclipse 中运行测试。两个 IDE 都给出了相同的结果。

编辑：这是我的清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.calculator.test"
      android:versionCode="1"
      android:versionName="1.0">
    <application android:icon="@drawable/icon" android:label="@string/app_name">

    <uses-library android:name="android.test.runner" />
    </application>
    <uses-sdk android:minSdkVersion="8" />
    <instrumentation android:targetPackage="com.calculator" android:name="android.test.InstrumentationTestRunner" />
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:29:24.297

看起来您使用正确的依赖项编译了您的类，但没有在运行时指定它们。由于 IntelliJ 和 Eclipse 都应该使用相同的配置来运行类似编译，所以问题是：您是如何运行测试的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:23:02.997

您使用的任何编辑器都没有问题。

这是从 adb shell 启动任何活动的一般语法：

```
adb shell am start -a android.intent.action.MAIN -n com.package.name/com.package.name.ActivityName 
```

因此，当您从机器人调用任何活动时，它必须“扩展活动”。

并且“ extends SherlockActivity ”不适用于robotium，因为上述语法仅需要活动名称。因此，如果您扩展任何其他内容，它将无法正常工作。

笔记 ：

[1] 首先尝试使用以下语法打开您的活动

```
adb shell am start -a android.intent.action.MAIN -n com.calculator/com.calculator.Main 
```

这里“ Main ”是您的包“ com.calculator ”中的活动。

[2] 如果这对您有用，那么它将适用于机器人。

我希望这个概念对你有所帮助。谢谢。

# android - 区分两条不同 SMS 的发送报告

> ID：12781383
> 
> 赞同：6
> 
> 时间：2012-10-08T12:04:55.613
> 
> 标签：android, sms, report

在一个服务中，当广播接收器在一个循环中发送短信时，监听发送报告，如何区分每个发送的短信的发送报告？这类似于： [How to get Delivery Report of each SMS sent in loop android?](https://stackoverflow.com/questions/10975792/how-to-get-delivery-report-of-each-sms-sent-in-loop-android)

除了我认为他在活动中使用它而我在 getIntent() 无用的服务中使用它。

编辑 2：发布我的代码

```
public class CheckServer extends Service
{
  public String snumber[] = new String[10];

  public JSONArray array;

  public int onStartCommand(Intent intent,int flags, int startid)
  {
    // Do useful things.

  ServiceAction SA = new ServiceAction();
  SA.execute();

  try 
  {
      SA.get();
  } 
  catch (InterruptedException e) 
  {
      e.printStackTrace();
  } 
  catch (ExecutionException e) 
  {
      e.printStackTrace();
  }

  new startSending().execute();

  scheduleNextUpdate();

   return START_STICKY;
}

public class startSending extends AsyncTask<Void,Void,Void>
{
    @Override
    protected Void doInBackground(Void... params) 
    {
        String no,message;

          try 
            {
                for (int i = 0; i < array.length(); i++) 
                {
                      JSONObject row;
                      row = array.getJSONObject(i);
                      snumber[i] = row.getString("sno");
                      no = row.getString("no");
                      message = row.getString("message");
                      sendSMS(no,message,snumber[i]);
                }
            } 
            catch (IllegalStateException e) 
            {
                e.printStackTrace();
            } 
            catch (JSONException e) 
            {
                e.printStackTrace();
            }

        return null;
    }
}

private void scheduleNextUpdate()
{
  Intent intent = new Intent(this, this.getClass());
  PendingIntent pendingIntent = PendingIntent.getService(this, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);

// The update frequency should often be user configurable.  This is not.

long currentTimeMillis = System.currentTimeMillis();
long nextUpdateTimeMillis = currentTimeMillis + 1 * DateUtils.MINUTE_IN_MILLIS;
Time nextUpdateTime = new Time();
nextUpdateTime.set(nextUpdateTimeMillis);

  AlarmManager alarmManager = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
  alarmManager.set(AlarmManager.RTC, nextUpdateTimeMillis, pendingIntent);
}

public class ServiceAction extends AsyncTask<Void,Void,Void>
{
@Override
protected Void doInBackground(Void... arg0) 
{
      HttpResponse response = null;
      HttpClient client = new DefaultHttpClient();
      HttpGet request = new HttpGet();
      try 
      {
        request.setURI(new URI("http://www.somesite.com/sms/getsms"));
        response = client.execute(request);
        String result = convertStreamToString(response.getEntity().getContent());
        array = new JSONArray(result);
      } 
      catch (URISyntaxException e) 
      {
        e.printStackTrace();
      } 
      catch (ClientProtocolException e) 
      {
        e.printStackTrace();
      } 
      catch (IOException e) 
      {
        e.printStackTrace();
      } 
      catch (JSONException e) 
      {
        e.printStackTrace();
      }

    return null;
}
}

public static String convertStreamToString(InputStream inputStream) throws IOException
{
  if (inputStream != null)
  {
      Writer writer = new StringWriter();

      char[] buffer = new char[1024];
      try
      {
          Reader reader = new BufferedReader(new InputStreamReader(inputStream, "UTF-8"),1024);
          int n;
          while ((n = reader.read(buffer)) != -1)
          {
              writer.write(buffer, 0, n);
          }
      }
      finally
      {
          inputStream.close();
      }
      return writer.toString();
  }
  else
  {
      return "";
  }
}

public void sendSMS(String number,String message,String serialnum) 
{   
  String SENT = "SMS_SENT";

  PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
      new Intent(SENT), 0);

  //---when the SMS has been sent---
  registerReceiver(new BroadcastReceiver()
    {
      @Override
      public void onReceive(Context arg0, Intent arg1) {
          switch (getResultCode())
          {
              case Activity.RESULT_OK:
                  Toast.makeText(getBaseContext(), "SMS sent", 
                          Toast.LENGTH_SHORT).show();
                  break;
              case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                  Toast.makeText(getBaseContext(), "Generic failure", 
                          Toast.LENGTH_SHORT).show();
                  break;
              case SmsManager.RESULT_ERROR_NO_SERVICE:
                  Toast.makeText(getBaseContext(), "No service", 
                          Toast.LENGTH_SHORT).show();
                  break;
              case SmsManager.RESULT_ERROR_NULL_PDU:
                  Toast.makeText(getBaseContext(), "Null PDU", 
                          Toast.LENGTH_SHORT).show();
                  break;
              case SmsManager.RESULT_ERROR_RADIO_OFF:
                  Toast.makeText(getBaseContext(), "Radio off", 
                          Toast.LENGTH_SHORT).show();
                  break;
          }

          unregisterReceiver(this);
      }
  }, new IntentFilter(SENT));

  String DELIVERED = "SMS_DELIVERED";

  Intent delivered = new Intent(DELIVERED);
  delivered.putExtra("MsgNum", serialnum);
  PendingIntent deliveredPI = PendingIntent.getBroadcast(this, Integer.parseInt(serialnum), delivered, 0);

    //---when the SMS has been delivered---
    registerReceiver(new BroadcastReceiver()
        {   
            @Override
           public void onReceive(Context context, Intent intent)
           {
                       switch (getResultCode())
                       {
                           case Activity.RESULT_OK:

                               Toast.makeText(getBaseContext(), "SMS delivered",Toast.LENGTH_SHORT).show();

                               updateSMSStatus USS =  new updateSMSStatus();

                               USS.execute(intent.getStringExtra("Msgnum"));

                               break;

                           case Activity.RESULT_CANCELED:

                               Toast.makeText(getBaseContext(), "SMS not delivered",Toast.LENGTH_SHORT).show();

                               break;                        
                       }

                     unregisterReceiver(this);
            }

        },
        new IntentFilter(DELIVERED)); 

    ContentValues values = new ContentValues();
    values.put("address", number);
    values.put("body", message);
    getContentResolver().insert(Uri.parse("content://sms/sent"), values);

    SmsManager smsMngr = SmsManager.getDefault();
    smsMngr.sendTextMessage(number, null, message, sentPI, deliveredPI);

}

public class updateSMSStatus extends AsyncTask<String,Void,Void>
{
    @Override
    protected Void doInBackground(String... params) {

          HttpResponse response = null;
          HttpClient client = new DefaultHttpClient();
          HttpGet request = new HttpGet();
          try 
          {
            Log.i("SMS APP", "MyClass.getView() — Serial Number = " + params[0]);
            request.setURI(new URI("http://www.somesite.com/sms/updatesmsstatus?uname=someone&sno="+params[0]));
            response = client.execute(request);
            String result = convertStreamToString(response.getEntity().getContent());
            Log.i("SMS APP","Update SMS Status is :"+result);
          } 
          catch (URISyntaxException e)
          {
            e.printStackTrace();
          } 
          catch (ClientProtocolException e) 
          {
            e.printStackTrace();
          } 
          catch (IOException e) 
          {
            e.printStackTrace();
          }

        return null;
    }
}

  @Override
  public IBinder onBind(Intent intent) 
  {
     return null;
  }

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-10T10:43:48.670

您将消息编号额外添加到 Intent 中，如下所示：

```
delivered.putExtra("MsgNum", serialnum); 
```

你尝试像这样提取它：

```
USS.execute(intent.getStringExtra("Msgnum")); 
```

如果`putExtra()`你有**大写的 "N"**，`getStringExtra()`你使用**小写的 "n"**。

这就是为什么你应该**总是**对这样的东西使用常量。它可以防止您花费数小时尝试查找由印刷错误引起的错误。

试试这个：

```
public static final String EXTRA_MSGNUM = "MsgNum"; 
```

然后使用：

```
delivered.putExtra(EXTRA_MSGNUM, serialnum); 
```

和：

```
USS.execute(intent.getStringExtra(EXTRA_MSGNUM)); 
```

**编辑：`PendingIntent`根据 OP 的评论添加一些关于生成不同 s 的内容**

OP 在评论中写道：

> 我对错字不利，因此感觉像一只羊，我对其进行了测试，它现在没有给出空值，相反，它给了我在循环中发送的所有消息的第一条消息的序列号，如果我发送17 20 24 21 25 27，它只给我 17 的所有交货报告

你的问题是工作方式`PendingIntent`。系统管理一个`PendingIntent`s 池。当您的代码执行以下操作时：

```
String DELIVERED = "SMS_DELIVERED";
Intent delivered = new Intent(DELIVERED);
delivered.putExtra("MsgNum", serialnum);
PendingIntent deliveredPI = PendingIntent.getBroadcast(this,
                    Integer.parseInt(serialnum), delivered, 0); 
```

这会导致系统搜索`PendingIntent`与您传入的参数匹配的 a（在本例中为您的`Intent`）。但是，`PendingIntent`使用的匹配算法仅比较 的某些字段`Intent`以确定它是否是您要查找的字段。特别是，**它不比较 extras**。所以这意味着在你创建了第一个`PendingIntent`之后，调用`PendingIntent.getBroadcast()`总是会`PendingIntent`从池中返回相同的（而不是创建一个新的，这是你想要的）。

为了使每次调用都`PendingIntent.getBroadcast()`创建一个新的调用，请尝试使您传递给调用的参数唯一（例如：通过使 ACTION 中的唯一）。此外，由于这些s 中的每一个都只会在你应该设置 FLAG_ONE_SHOT 时使用，所以当你获得这样的：`PendingIntent``Intent``PendingIntent``PendingIntent`

```
String DELIVERED = "SMS_DELIVERED" + serialnum; // Unique ACTION every time
Intent delivered = new Intent(DELIVERED);
delivered.putExtra("MsgNum", serialnum);
PendingIntent deliveredPI = PendingIntent.getBroadcast(this,
                    Integer.parseInt(serialnum), delivered,
                    PendingIntent.FLAG_ONE_SHOT); 
```

由于每次调用的 ACTION 都会有所不同`PendingIntent.getBroadcast()`，这应该可以解决您的问题。

**EDIT2：根据评论中的讨论添加注册广播接收器的替代方法**

如果您创建一个扩展 BroadcastReceiver 的类，您可以将其添加到清单中，然后您根本不需要显式注册广播接收器。像这样的东西：

```
public class MessageStatusReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        // This is called when the status of your SMS changes (delivery or send status)
        // .. put your code here ..
   }
} 
```

在清单中声明接收者：

```
<receiver android:name=".MessageStatusReceiver" /> 
```

在发送 SMS 的代码中，执行以下操作：

```
String DELIVERED = "SMS_DELIVERED" + serialnum; // Unique ACTION every time
Intent delivered = new Intent(context, MessageStatusReceiver.class);
delivered.setAction(DELIVERED ); // Set action to ensure unique PendingIntent
delivered.putExtra("MsgNum", serialnum);
PendingIntent deliveredPI = PendingIntent.getBroadcast(this,
                    Integer.parseInt(serialnum), delivered,
                    PendingIntent.FLAG_ONE_SHOT); 
```

# file - AS 400 - 未写入顺序文件。状态没有错误。COBOL 400

> ID：12781391
> 
> 赞同：1
> 
> 时间：2012-10-08T12:05:26.167
> 
> 标签：file, ibm-midrange, cobol, sequential

我正在声明一个顺序文件：

```
 SELECT   F-MYFILE ASSIGN       DATABASE-MYFILE
                      ORGANIZATION SEQUENTIAL          
                      ACCESS       SEQUENTIAL          
                      STATUS       WW-STS-MYFILE. 
```

在我的 COBOL 程序中，我将其打开为：

```
 OPEN extend F-MYFILE
    IF WW-STS-MYFILE NOT="00"  
       GO TO  FINISH
    END-IF                

    INITIALIZE MYFILE
    MOVE "abcd" TO CONTENT OF MYFILE
    WRITE MYFILE. 
```

在我写记录时，文件在状态 WW-STS-MYFILE 中没有显示任何错误，它是“00”。但是记录仍然没有被写入。你能说出同样的可能原因吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:13:02.970

我对 AS/400 不是很熟悉，因为我是 z/OS 开发人员，但我遵循的经验法则是您读取文件，但写入记录。如果 MYFILE 是文件名而不是该文件的记录布局，那么您正在尝试写入文件而不是该文件的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T18:01:17.007

您的程序是否关闭文件？文件是否受承诺控制？如果您正在使用提交控制，并且您没有执行 COMMIT 或 CLOSE，则记录将在程序结束时自动回滚。

如果您在程序仍在运行时尝试查看文件，在它关闭文件之前，这可能是文件缓冲问题。

# spring - Spring Security 3 - 向（角色）选民添加信息

> ID：12781394
> 
> 赞同：1
> 
> 时间：2012-10-08T12:05:40.457
> 
> 标签：spring, spring-security, roles

我对 Spring 安全性很陌生，只是通过参考，做一些例子。我非常想念的一个功能（我想知道几乎没有其他人似乎想念它）是向用户提供自定义信息，为什么或出于什么原因拒绝访问。例如，我想通知用户他无权访问模块 A，或者他需要被授予角色访问权限 B 等。

我看了一下角色界面，但这个信息似乎丢失了：

```
int vote(Authentication authentication, Object object, List<ConfigAttribute> config); 
```

[Spring Security Access Denied logging with missing role](https://stackoverflow.com/questions/9704783/spring-security-access-denied-logging-with-missing-role) 这就是说，我必须提供*AccessDecisionManager*的自定义实现。

但是，如果访问被拒绝，实际实现会如何提供特定信息？以及如何将其与 Spring Security 挂钩？对于初学者来说，简单的基于角色的访问就足够了。任何人都可以提供任何例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:53:15.250

看看`AffirmativeBased`- DecisionManager。您可以增强它并向`AccessDeniedException`. 但是从`Voter`他们拒绝访问的原因中找出原因似乎并不容易。（我希望你能找到一些命名模式，或者你甚至需要扩展选民）。

这是一个如何配置您的自定义 DecisionManager 的示例

```
 <security:http auto-config="true" access-decision-manager-ref="myDecisionManager">

 <bean id="myAccessDecisionManager"
    class="MyAffirmativeBasedDecisionManager">
    <constructor-arg name="decisionVoters">
        <list>
            <ref bean="roleVoter" />
            <ref bean="authenticatedVoter" />
            <ref bean="preAdviceVoter" />
        </list>
    </constructor-arg>
</bean>

<bean id="roleVoter" class="org.springframework.security.access.vote.RoleVoter" />

<bean id="authenticatedVoter"
    class="org.springframework.security.access.vote.AuthenticatedVoter" />

<bean id="preAdviceVoter"
    class="org.springframework.security.access.prepost.PreInvocationAuthorizationAdviceVoter">
    <constructor-arg ref="exprPreInvocationAdvice" />
</bean>

    <bean
    class="org.springframework.security.access.expression.method.ExpressionBasedPreInvocationAdvice"
    id="exprPreInvocationAdvice">
    <property name="expressionHandler" ref="methodExprHandler" />
</bean>

<bean id="methodExprHandler"
    class="org.springframework.security.access.expression.method.ExtensibleMethodSecurityExpressionHandler">
    <property name="methodSecurityExpressionRootFactory">
            <bean
            class="com.queomedia.infrastructure.security.spring.MethodSecurityExpressionRootFactoryImpl" />
    </property>
</bean> 
```

# c# - 直接更改 DataGridView 中的值

> ID：12781406
> 
> 赞同：2
> 
> 时间：2012-10-08T12:06:25.637
> 
> 标签：c#, datagridview, cell, windows-forms-designer

如何更改`DataGridView`Windows 窗体中所有单元格的值？我想直接在 Windows 窗体中进行更改，比如直接在单元格中输入

我有一张像这样的桌子：

```
AA    BB    CC
--------------
1     aa    ac
2     bb    fd// I type here and change the value to kk 
```

代码：

```
DataGridViewTextBoxColumn AA= new DataGridViewTextBoxColumn();
MsgIDHex.HeaderText = "AA";
MsgIDHex.DataPropertyName = "AA";
DataGridViewTextBoxColumn BB= new DataGridViewTextBoxColumn();
MsgIDHex.HeaderText = "BB";
MsgIDHex.DataPropertyName = "BB";
DataGridViewTextBoxColumn CC= new DataGridViewTextBoxColumn();
MsgIDHex.HeaderText = "CC";
MsgIDHex.DataPropertyName = "CC;
dataGridView1.DataSource = result;
dataGridView1.Columns.AddRange(AA, BB, CC}; 
```

我应该做些什么`DataGridViewTextBoxEditingControl`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T12:09:19.683

您可以简单地执行此操作（假设您想以编程方式更改一个值）：

```
dataGridView1.Rows[RowNumber].Cells[CC.Index].Value = newValue; 
```

以及如何启用某些单元格的编辑已[在此处](https://stackoverflow.com/questions/1814423/datagridview-how-to-set-a-cell-in-editing-mode)进行了说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:18:22.600

如果要将数据源设置为对象，则链接到某个字段的属性必须具有设置器才能更改值。否则，它是只读属性，将被视为只读属性。不确定这是否有帮助，它有点不清楚你在追求什么，以及你正在使用什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:11:48.920

```
// Retrieve the cell value for the cell in the Name column at row 4.
String testValue2 = (String)dataGridView1["Name", 4].Value; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-25T09:33:58.073

```
public void UpdateDataGridView(int cindex, string value)
{
    if (InvokeRequired)
    {
        this.Invoke(new Action<int,string>(UpdateDataGridView), new object[] { cindex, value });
        return;
    }

    int selectedRowIndex = dataGridView1.SelectedRows[0].Index;
    dataGridView1.Rows[selectedRowIndex].Cells[cindex].Value = value;
} 
```

# qt - 随着更多的小部件被放置在里面，我如何调整 QScrollArea 的内容

> ID：12781407
> 
> 赞同：30
> 
> 时间：2012-10-08T12:06:29.420
> 
> 标签：qt, pyside, qscrollarea

我有一个[QScrollArea](http://doc.qt.digia.com/4.7-snapshot/qscrollarea.html)小部件，它开始为空；

![空 QScrollArea](../Images/5c91a566127e4a51799259f8ea84d459.png)

它有一个垂直布局，带有一个 QGridLayout 和一个垂直间隔以将其保持在顶部，并防止它延伸到整个滚动区域；

![Qt 设计器中的 QScrollArea](../Images/e37a83013e3575aa18aba571e097bd3f.png)

在程序的其他地方，有一个 QTextEdit，它在更改时会扫描其内容以查找“物种”元素，然后将它们添加到 QGridLayout。任何已被移除的物种元素也会被移除。这一点有效；

![带有奇怪滚动条的 QScrollArea](../Images/cdd91780917554e92f5c19cf03461475.png)

我一直打开垂直滚动条，这样当它出现时它就不会位于其他东西的顶部。请注意，尽管不需要，滚动条已经比滚动框大。

这就是问题。滚动区域似乎是预设的，我无法更改它。如果我向 QGridLayout 添加更多行，则滚动区域的大小不会增加。

相反，它保持相同的大小，并挤压 QGridLayout，使其看起来很丑（起初）；

![压扁的 QGridLayout](../Images/850ee6c4e06c349ad35435e3eda5e12e.png)

然后在添加更多之后它变得无法使用；

![不可用的行编辑](../Images/0dda214fdbd218d5338b9f725319d85a.png)

请注意，滚动条的大小仍与之前的图像相同。前两张图片来自 Qt Designer，后三张来自正在运行的程序。

如果我调整窗口大小以使 QScrollArea 增长，那么我会看到：

![愚蠢的太小布局](../Images/7e61211a3ea7ac42c3c20608059f7ec7.png)

表示滚动区域内的某些布局未正确调整大小。

我的问题是；**当我从 QGridLayout 添加和删除时，我需要做什么才能使小部件的可滚动区域动态调整大小？**

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2016-10-19T18:49:36.270

如果您从 Google 来到这里，但没有得到接受的答案，那是因为您错过了另一个秘密调用：`QScrollArea::setWidget`. 您必须创建并*明确*标识要滚动的单个小部件。仅将项目添加为子项是不够的！将多个项目直接添加到`ScrollArea`也不起作用。

这个脚本演示了一个简单的 QScrollArea 工作示例：

```
from PySide.QtGui import *

app = QApplication([])

scroll = QScrollArea()
scroll.setWidgetResizable(True) # CRITICAL

inner = QFrame(scroll)
inner.setLayout(QVBoxLayout())

scroll.setWidget(inner) # CRITICAL

for i in range(40):
    b = QPushButton(inner)
    b.setText(str(i))
    inner.layout().addWidget(b)

scroll.show()
app.exec_() 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-10-08T12:26:03.473

该[文档](http://doc.qt.io/qt-5/qscrollarea.html#widgetResizable-prop)提供了一个答案：

> **widgetResizable : bool**
> 此属性保存滚动区域是否应调整视图小部件的大小。如果此属性设置为 false（默认值），则滚动区域遵循其小部件的大小。

将其设置为真。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-30T10:34:11.850

为什么不对行使用 QListView，它会为您管理所有问题？只需确保在添加后单击类（设计器的右上角窗口）并分配布局，否则它不会正确展开。

我在 QScrollArea 中使用 QLIstWidget 来制作可滚动的图像列表

尝试将其他对象添加到列表中，这就是我将图像添加到列表中的方式。

```
QImage& qim = myclass.getQTImage();

QImage iconImage = copyImageToSquareRegion(qim, ui->display_image->palette().color(QWidget::backgroundRole()));

QListWidgetItem* pItem = new QListWidgetItem(QIcon(QPixmap::fromImage(iconImage)), NULL);

pItem->setData(Qt::UserRole, "thumb" + QString::number(ui->ImageThumbList->count()));  // probably not necessary for you

QString strTooltip = "a tooltip"

pItem->setToolTip(strTooltip);

ui->ImageThumbList->addItem(pItem); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-04T18:44:05.707

更新[Artfunkel 的回答](https://stackoverflow.com/a/40139336/6163904)：

这是一个 PySide6 演示，它使用“**填充**”按钮运行 for 循环，将项目添加到滚动区域。单击时，每个按钮也会自行删除。

```
from PySide6.QtWidgets import *

app = QApplication([])

scroll = QScrollArea()
scroll.setWidgetResizable(True) # CRITICAL

inner = QFrame(scroll)
inner.setLayout(QVBoxLayout())

scroll.setWidget(inner)  # CRITICAL

def on_remove_widget(button):
    button.deleteLater()

def populate():
    for i in range(40):
        b = QPushButton(inner)
        b.setText(str(i))
        b.clicked.connect(b.deleteLater)
        inner.layout().addWidget(b)

b = QPushButton(inner)
b.setText("Populate")
b.clicked.connect(populate)
inner.layout().addWidget(b)

scroll.show()
app.exec() 
```

# button - 自动时间更新

> ID：12781410
> 
> 赞同：1
> 
> 时间：2012-10-08T12:06:37.847
> 
> 标签：button, sencha-touch, extjs, sencha-touch-2, clock

我在 Sencha-2 的一个按钮上显示当前时间。时间在更新，但只有一次。我要持续更新

以下是我的代码： -

```
 Ext.define("Stackoverflow.view.Demo", {
    extend: "Ext.Container",
    alias: "widget.demo",
    config: {

            items: [{
                xtype: "toolbar",
                id: 'clocktool',
                docked: "bottom",
                items: [
                    {
                        xtype: 'button',
                        itemId: "clock",
                        id:'clock',
                        text: Ext.Date.format(new Date(),'g:i:s A')

                    }
                ]
            }]

        },  

        initialize: function(){
        console.log("initializing main view");
        Ext.defer(this.refreshDate, 1000, this);

        },
        refreshDate: function() {
        console.log("refreshing date");
        var btn = Ext.getCmp('clock');
        btn.setText(Ext.Date.format(new Date(),'g:i:s A'));
        console.log("done");
        }

    }); 
```

提前致谢。也欢迎任何其他在 sencha-2 中显示时间的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:07:13.760

当包含按钮的视图启动时，只需执行以下操作：

```
Ext.defer(this.refreshDate, 1000, this); 
```

然后创建一个名为 refreshDate 的函数：

```
refreshDate: function() {
  var btn = ... // get your button

  btn.setText(Ext.Date.format(new Date(),'g:i:s A'));

  Ext.defer(this.refreshDate, 1000, this);
} 
```

希望这可以帮助

# paypal - 如何验证贝宝参考交易已启用

> ID：12781411
> 
> 赞同：2
> 
> 时间：2012-10-08T12:06:38.083
> 
> 标签：paypal

嗨，我正在为客户设置 paypal pro。我需要参考交易才能工作，因为我们必须每月向客户收费，有时金额可能会有所不同。

**信用卡支付** 代码流已经用paypal沙箱测试过，完全可以用。但是使用真实帐户，我们会收到以下错误。“此交易无法处理。请联系贝宝客服。”

**Paypal 帐户付款/快速结帐** 由于未启用参考交易，它也不适用于 paypal 沙箱。我也面临与 paypal pro 帐户类似的情况。我收到错误“商家未启用参考交易”

我们向贝宝发送了一个请求，要求他们启用参考交易。他们回复保证他们做到了，但我仍然得到同样的错误。我什至尝试删除当前的 api 签名并重新创建一个新的。但我仍然得到同样的错误。

有没有人遇到过类似的情况？

是否有任何确定的方法可以验证是否启用了参考交易？

如果不是，除了通过贝宝的客户服务之外，还有其他方法可以启用它（这太可怕了）？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-22T22:52:24.470

是的，这很容易。

只需尝试使用帐单协议付款即可。

就在 PayPal 网站上的确认消息上方，它将显示：

> 将来使用 PayPal 向 XXX Inc. 付款。除非您选择首选付款方式，否则将使用您的默认付款方式付款。要进行更改，请转到您个人资料中的我的钱，然后更新我的预先批准的付款部分。

如果您没有看到该消息，则它们未启用（或您的请求错误）。但当然，您可以检查沙箱以确保请求是正确的。

# android - 检查 SQL 整数字段是否为空

> ID：12781417
> 
> 赞同：0
> 
> 时间：2012-10-08T12:06:57.483
> 
> 标签：android, sql, integer, field

我尝试从我的 android 中的 SQL 数据库中获取一个项目，一切顺利，我唯一苦苦挣扎的是获取 INTEGER 值是数据库中没有填充任何内容（null？）

所以我首先初始化它，然后从数据库中获取整数值，然后将它分配给我的类的一个实例。曾经有人告诉我，如果它不会从数据库中得到任何东西，它将保留初始化值，但这可能是错误的？我现在用：

```
int score = 100;
score = c.getInt(11);
q.setScore(score); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:27:10.027

*曾经有人告诉我，如果它不会从数据库中得到任何东西，它将保留初始化值*

嵌入式 SQL 也是如此。您似乎正在使用结果集对象，所以这是不正确的。如果您尝试从列中获取数字空值，则结果集对象通常返回 0。

用于`c.wasNull()`检查您刚刚读取的值是否`null`为`0`.

**编辑**（添加了杰克评论中的代码）：

```
int score; 
if (c.isNull(11)) { 
  score = 100; 
} else { 
  score = c.getInt(11); 
} 
q.setScore(score); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:30:34.263

[http://developer.android.com/reference/android/database/Cursor.html#getInt(int](http://developer.android.com/reference/android/database/Cursor.html#getInt(int) )

> *public abstract int **getInt** (int columnIndex) 自：API 级别 1 以 int 形式返回所请求列的值。当列值为空、列类型不是整数类型或整数值超出范围 [Integer.MIN_VALUE, Integer.MAX_VALUE] 时，结果以及此方法是否引发异常由实现定义。参数 columnIndex 目标列的从零开始的索引。以 int 形式返回该列的值。*

# java - Java 基础初学者：Java 中的“参数”是什么意思

> ID：12781421
> 
> 赞同：6
> 
> 时间：2012-10-08T12:07:05.900
> 
> 标签：java, arguments

在过去的两天里，我一直在尝试学习基本的 Java 编程，但在查看以下代码时遇到了一个我无法解决的问题：

```
class DayCounter {
    public static void main(String[] arguments) {

        int yearIn = 2008;
        int monthIn = 1;
        if (arguments.length > 0)
            monthIn = Integer.parseInt(arguments[0]);
        if (arguments.length > 1)
            yearIn = Integer.parseInt(arguments[1]);
        System.out.println(monthIn + "/" + yearIn + " has "
            + countDays(monthIn, yearIn) + " days.");
    }
} 
```

我看不懂这条线`if (arguments.length > 0)` 是什么`arguments`意思？价值从何而来？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T12:10:21.087

> 我无法理解“if (arguments.length > 0)”这行“参数”是什么意思？它的价值从何而来？

它来自方法声明：

```
public static void main(String[] arguments) { 
```

这声明了一个*名为*`arguments`. 对于普通的方法调用，调用者指定*参数*，这成为参数的初始值。例如：

```
int foo(int x) {
    System.out.println(x);
}
...
foo(10); 
```

这里，10 是方法的*参数*，所以它是参数的初始值`x`。

`main`现在，在 Java 中调用的公共静态 void 方法是一个*入口点*- 所以当你运行时：

```
java MyClass x y z 
```

JVM使用包含*命令行参数*`main`的数组调用您的方法- 在这里，它将是一个长度为 3 的数组，其值为“x”、“y”和“z”。

 *有关更多详细信息，请参阅 Java 教程的相关部分：

*   [将信息传递给方法或构造函数](http://docs.oracle.com/javase/tutorial/java/javaOO/arguments.html)
*   [命令行参数](http://docs.oracle.com/javase/tutorial/essential/environment/cmdLineArgs.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T12:09:06.133

`arguments`是运行时提供给您的 java 程序的命令行选项。它们存储在一个数组中，因此调用`arguments.length`会为您的程序提供命令行输入的数量。

他们在执行时像这样传递

```
java program argument1, argument2, argument3 
```

在这种情况下`arguments.length`，将返回 3，因为有 3 个命令行参数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T12:19:02.693

在这种情况下，参数是用于您在执行时作为输入提供的字符串数组的变量名称，

IE

```
java DayCounter 1 2010 
```

在以下代码摘录中：

```
public static void main(String[] arguments) 
```

`String[]`表示变量名称为 的字符串数组`arguments`。Java 使用此函数原型作为 main 作为默认值。请参阅此处获取教程：[http ://docs.oracle.com/javase/tutorial/getStarted/application/index.html](http://docs.oracle.com/javase/tutorial/getStarted/application/index.html)

因此，当您`length`在`arguments`( `arguments.length`) 中引用时，您正在查看字符串数组的“内部”，以查找数组的长度（使用 Java 字符串的内置函数来执行此操作）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-08T12:09:02.620

它们来自命令提示符。当你开始运行一个程序时，你可以说：

```
java program arg1 arg2 ...argN 
```

args 紧跟在程序名称之后。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-08T12:32:55.357

**-**通常参数和参数可以互换使用，但它们是不同的。

**我将举一个例子来解释这一点：**

```
public class Test{

   public void go(String s){

   }

   public static void main(String[] args){

      Test t = new Test();
      t.go("Hello");

    }

} 
```

**-**在上面的代码变量中，该行`s`中的类型是.`String``public void go(String s)``Parameter`

**-**`"Hello"`行中字符串类型的as`t.go("Hello")`是`Argument`.

**-****方法定义或声明**中的元素**是，方法调用中传递**`Parameters`的元素是。**`Arguments`**

 *** * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-08T12:09:18.340

参数被传递给主方法

```
 public static void main(String[] arguments) 
```

在这种情况下，它意味着可以传递给此方法的值数组。通常这是您从命令行或快捷方式传递给程序的参数，然后您可以在程序中使用它们来更改逻辑流程。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-08T12:09:28.460

参数是可以在启动时传递给 Java 程序的参数列表。

if (arguments.length > 0) 检查是否提供了任何参数。

否则，您将尝试访问空数组并获取和索引越界异常。

还有很多教程，可以帮助你。

查看[Oracle 的基本指南，这里是关于 CMD Line Arguments](http://docs.oracle.com/javase/tutorial/essential/environment/cmdLineArgs.html)的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-08T12:23:04.213

首先了解手头代码的含义。它告诉您一年中给定月份的天数。所以很明显，当您运行代码时，您需要将年份值和月份值作为给定值。

在这种情况下，在代码执行期间提供的月份值和年份值成为参数。在这种情况下，“参数”一词被使用，但您可以使用 x 或 y 或 xyz 来命名变量，如您所知。

Java 接受参数作为字符串数组。因此，在将它们用作 Integer 之前，您需要解析它们，这就是上面代码中所做的。

例如

```
 class WelcomeYouself{

    public static void main(String[] args){ //Here insted of arguments,the word args is used. 

    System.out.println("Hello " + args[0]);
  }
} 
```

现在，当您运行它时，您将自己的名字作为参数传递。

```
 java WelcomeYourself Feynman; 

 // This how you run or execute the java code passing your name as the "argument". Of course it is presumed you are Feynman. 
```***

# php - 为什么 stdClass 是命名空间的？

> ID：12781422
> 
> 赞同：1
> 
> 时间：2012-10-08T12:07:19.450
> 
> 标签：php, namespaces, stdclass

> 传递给 nms\aclass::__construct() 的参数 1 必须是 nms\stdClass 的实例，给定的 stdClass 的实例

该`__construct()`功能看起来像`public function __construct(stdClass $aclass)`

我得到了错误，我从全局命名空间中传入了一个 stdClass 的实例，而不是来自同一个命名空间中的一个实例，

我也得到了解决方案：`public function __construct(\stdClass $aclass)`

但我不明白**为什么**？我认为甚至不可能覆盖 stdClass 是吗？`\stdClass`那么和有什么区别`\nms\stdClass`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:02:45.590

当然可以`stdClass`在命名空间内覆盖。

```
namespace Example;

class stdClass {
    public function __construct() {
        echo "Overridden!";
    }
}

$global = new \stdClass();
$local = new stdClass; 
```

输出：

```
Overridden! 
```

* * *

因此，如果您想要原始文件，则需要使用`/stdClass`全局命名空间。很像`/Exception`s。

# jquery - 在悬停时打开一个 div，然后在悬停在 div 上时保持 div 打开

> ID：12781426
> 
> 赞同：1
> 
> 时间：2012-10-08T12:07:25.523
> 
> 标签：jquery

对不起这个问题的标题，它不是很清楚，但不知道如何描述它！

基本上我遇到的问题就是这个。我正在制作培训课程的报名表。有许多帮助图像可以在悬停时打开一个带有附加信息的 div。如果您将鼠标悬停在 div 本身上，我需要的是帮助框保持打开状态。目前，当您离开帮助图像时，div 会关闭，这使得无法单击框中的任何链接。我希望 div 在悬停在帮助图像或 div 上时保持打开状态，但在您移到页面的另一部分时关闭。

HTML在这里：

```
<a href="#" id="pohelplink" class="helplinks">
 <img src="images/help.png" class="helpimage" id="pohelpimage" />
</a>
<div class="helpbox" id="pohelp">
 <h4>Purchase Order</h4>
 <p>If your company requires purchase orders to be raised, we'll need to know the PO Number so we can include it on our invoice. Please type the number into this box.</p>
 <p>If your organisation doesn't use purchase orders then you can simply leave this area blank.</p>
</div> 
```

和jQuery：

```
$("#pohelplink").hover(function(){
 $("#pohelplink").css({"z-index":"1110"});
 $("#pohelp").fadeIn();
 },
function(){
 $("#pohelp").fadeOut();
 $("#pohelplink").css({"z-index":"1095"});
}); 
```

非常感谢任何帮助。

PS 对 z-index 的更改是为了在帮助 div 弹出时保持帮助图像可见，因为两者重叠。我认为它与这个特定问题无关，但为了完整起见，我想将其包括在内。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T12:16:00.743

以下代码可能会解决您的问题：[jsfiddle](http://jsfiddle.net/RXvqc/)

```
 $("#pohelplink, #pohelp").mouseenter(function () {// show pohelp 
        $("#pohelplink").css({
            "z-index": "1110"
        });
        $("#pohelp").fadeIn();
    });
 $("#pohelp").mouseleave(function(){ // show pohelp tile mouseleave from pohelp
       $("#pohelp").fadeOut();
      $("#pohelplink").css({"z-index":"1095"});
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:11:47.187

请参阅jQuery [HoverIntent 插件](http://cherne.net/brian/resources/jquery.hoverIntent.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:14:49.760

像这样

```
 $("#pohelplink,#pohelp").hover(function(){
     $("#pohelplink").css({"z-index":"1110"});
     $("#pohelp").fadeIn();
     },
    function(){
     $("#pohelp").fadeOut();
     $("#pohelplink").css({"z-index":"1095"});
    });​ 
```

检查这个[演示](http://jsfiddle.net/vHWrY/)

# jquery - Kendoui Combobox 在触发更改时有第二个

> ID：12781428
> 
> 赞同：0
> 
> 时间：2012-10-08T12:07:37.600
> 
> 标签：jquery, data-binding, combobox, kendo-ui

我有三个组合框（部门、类别和子类别），请参阅附加的 jsfiddle 示例：http: [//jsfiddle.net/cFLQr/1/](http://jsfiddle.net/cFLQr/1/)

当我选择第二个组合框（类别）时，会触发更改事件，但是由于某种原因，如果我随后立即单击第三个组合框（页面上没有任何其他交互），我会收到错误消息“无法读取属性‘值’不明确的”。

但是，如果我做的事情略有不同并选择第二个组合框（类别）然后单击页面上的其他位置，则该事件被触发两次（一次更改，一次单击页面上的其他位置）。第二个更改事件停止上述错误并传递正确的信息。

请你能帮我理解为什么点击页面上的其他地方会有第二个更改事件，以及为什么第一个更改事件不能完成第二个更改事件的工作。：-/

非常感谢丰富

PS 值得一提的是，我已经将一些虚拟数据放入其中以供小提琴使用。我在本地环境中动态调用数据

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:17:32.927

基本上问题是您正在使用客户端对象公开的**selectedIndex**字段 - 这实际上不是公共字段。它是供内部使用的。

如果您想在更改事件发生时获取值和/或文本，您需要使用相应的方法 - [**text()**和**value()**](http://docs.kendoui.com/api/web/combobox#text)。

在**更改**事件处理程序中， **this**指向客户端对象。

因此您可以键入`this.text()`以获取文本并`this.value()`获取值:)

这是一个更新的jsfiddle

[http://jsfiddle.net/cFLQr/4/](http://jsfiddle.net/cFLQr/4/)

# database - 使用 Doctrine 2 使用连接表连接两个表的工作示例

> ID：12781431
> 
> 赞同：1
> 
> 时间：2012-10-08T12:07:43.413
> 
> 标签：database, doctrine-orm

Doctrine 有一些很好的文档，但在某些时候，我觉得对于想要进入教义的人来说，要习惯映射的东西是一场小小的战斗。我是属于这个部分的人之一。我已经浏览了大部分的映射文件文档，例如[this](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html)和理论官方网站中的其他链接，但对我来说，这些文档看起来像是要遵循的点点滴滴。我是针对我的情况说的。

是否有一个示例显示如何将两个表与第三个连接表连接起来，我想知道这个模式的基本映射。

假设我有两张桌子：Fruits 和 Country。

关系是一个国家生产多种水果，可以说是一对多的关系。除此之外，我想使用第三张表进行关联，比如 countryFruits。

```
Fruits Table
-- fruitsId (PK, AI)
-- fruitName

Country Table
-- countryId (PK, AI)
-- countryName

countryFruits Table
-- fruitsId (PK, FK)
-- countryId (PK, FK) 
```

这就是 MySQL 中的表的外观，并且已经设计好了。现在我可以用学说填充水果表，而在填充国家表时，我遇到了一个混乱的映射问题。

```
/**
 * @ORM\Entity
 * @ORM\Table(name="fruits")
 * @property string $fruitName
 * @property int $fruitId
 */
class Fruits
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer", name="fruitId", unique=true);
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $fruitId;

    /**
     * @ORM\Column(type="string")
     */
    protected $fruitName;

    /**
     * @ORM\OneToMany(targetEntity="Country", mappedBy="fruits", cascade={"persist"})
     */
    protected $country;

    public function __get($property)
    {
        return $this->$property;
    }

    public function __set($property, $value)
    {
        $this->$property = $value;
    }

}

/**
 * @ORM\Entity
 * @ORM\Table(name="country")
 * @property string $countryName
 * @property int $countryId
 */
class Country
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer", name="countryId", unique=true);
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $countryId;

    /**
     * @ORM\Column(type="string")
     */
    protected $countryName;

    /**
     * @ORM\OneToMany(targetEntity="Fruits", mappedBy="country", cascade={"persist"})
     */
    protected $countries;

    public function __get($property)
    {
        return $this->$property;
    }

    public function __set($property, $value)
    {
        $this->$property = $value;
    }

}

/**     
 * @ORM\Entity
 * @ORM\Table(name="countryFruits ")
 * @property int $fruitId
 * @property int $countryId
 */
class countryFruits
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer", name="fruitId", nullable=false)
     * @ORM\GeneratedValue(strategy="NONE")
     */
    protected $fruitId;

    /**
     * @ORM\Id
     * @ORM\Column(type="integer", name="countryId", nullable=false)
     * @ORM\GeneratedValue(strategy="NONE")
     */
    protected $countryId;

    /**
     * @ORM\ManyToOne(targetEntity="Country", inversedBy="fruits", cascade={"persist"})
     * @ORM\JoinColumn(name="countryId", referencedColumnName="countryId")
     */
    protected $country;

    /**
     * @ORM\ManyToOne(targetEntity="Fruits", inversedBy="country", cascade={"persist"})
     * @ORM\JoinColumn(name="fruitId", referencedColumnName="fruitId")
     */
    protected $fruits;

    /**
     * Set fruits
     *
     * @param Fruits $fruits
     */
    public function setFruits($fruits)
    {
        $this->fruits = $fruits;
    }

    /**
     * ´Get fruits
     *
     * @param Fruits $fruits
     */
    public function getFruits()
    {
        return $this->fruits;
    }

    /**
     * Set country
     *
     * @param Country $country
     */
    public function setCountry($country)
    {
        $this->country = $country;
    }

    /**
     * Get country
     *
     * @param Country $country
     */
    public function getCountry($country)
    {
        $this->country = $country;
    }
} 
```

有人可以交叉检查一下，让我知道我的映射是否以正确的方式完成。以防万一，是否有可能获得一小段代码如何将实体持久保存到我的数据库中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T18:52:46.980

你不需要`countryFruits`上课。您正在寻找的是 ManyToMany 关系！您也不想以复数形式命名实体，因为实体始终代表表中的单个对象/行。

**水果实体**

```
/**
 * @ORM\Entity
 * @ORM\Table(name="fruits")
 * @property string $fruitName
 * @property int $fruitId
 */
class Fruit
{
    /**
      * @ORM\ManyToMany(targetEntity="Country")
      * @ORM\JoinTable(name="country_fruits",
      *         joinColumns={@ORM\JoinColumn(name="country_id", referencedColumnName="id")},
      *         inverseJoinColumns={@ORM\JoinColumn(name="fruit_id", referencedColumnName="id")}
      * ) 
      * @var Country[]
      */
      protected $countries;
} 
```

**国家实体**

```
/**
 * @ORM\Entity
 * @ORM\Table(name="country")
 * @property string $countryName
 * @property int $countryId
 */
class Country
{
    /**
      * @ORM\ManyToMany(targetEntity="Fruit")
      * @ORM\JoinTable(name="country_fruits",
      *         joinColumns={@ORM\JoinColumn(name="fruit_id", referencedColumnName="id")},
      *         inverseJoinColumns={@ORM\JoinColumn(name="country_id", referencedColumnName="id")}
      * ) 
      * @var Fruit[]
      */
      protected $fruits;
 } 
```

请注意，您不需要 countryFruits 类，但表 country_fruits 是必需的！

# delphi - 为什么 Delphi 和 Free Pascal 通常更喜欢有符号整数数据类型而不是无符号数据类型？

> ID：12781434
> 
> 赞同：18
> 
> 时间：2012-10-08T12:07:58.550
> 
> 标签：delphi, pascal, freepascal

我不是 Pascal 新手，但直到现在我仍然不知道为什么[Delphi](http://en.wikipedia.org/wiki/Embarcadero_Delphi)和[Free Pascal](http://en.wikipedia.org/wiki/Free_Pascal)通常将参数和返回值声明为有符号整数，而我认为它们应该始终为正数。例如：

*   `Pos()`返回整数类型。有可能是负数吗？
*   `SetLength()`将参数声明`NewLength`为整数类型。字符串是否有负长度？
*   `System.THandle`宣布为 Longint。手柄有负数吗？

Delphi 和 Free Pascal 中有许多类似的决定。这背后有哪些考虑？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-08T12:43:59.017

在 Pascal 中，整数（有符号）是基本类型。所有其他整数类型都是整数的子范围。（这在 Borland 方言中并不完全正确，在 TP 中给出了 longint，在 Delphi 中给出了 int64，但足够接近）。

一个重要的原因是，如果计算的中间结果为负，并且您使用无符号整数进行计算，则会触发范围检查错误，并且由于大多数较旧的编程语言不假设 2-complement 整数，结果（范围检查关闭）甚至可能是腐败的。

Thandle 案例要简单得多。Delphi 在 D4 之前没有适当的 32 位无符号，但只有 31 位基数。（由于 32 位无符号整数不是整数的子范围，所以后来的无符号整数是 int64 的子集，这将问题转移到了 uint64，它仅在 D2010 左右添加）

因此，在标头中的许多地方，在 winapi 使用无符号类型的地方使用了有符号类型，可能是为了避免第 32 位在这些版本中意外损坏，并且自定义卡住了。

但是winapi案例与一般案例不同。

***稍后添加***一些 Pascal（和 Modula2/3）实现通过将整数设置为大于字大小的大小来规避此陷阱，并要求所有数字类型声明适当的子范围，如下面的程序所示。

第一个假设一切都是整数的子集，第二个允许编译器再次缩小几乎所有内容以适应寄存器，特别是如果 CPU 有一些大于字操作的操作。（比如 x86，其中 32 位 * 32 位 mul 给出 64 位结果，或者可以使用状态位检测字大小溢出（例如，在不执行完整的 2*字大小相加的情况下为相加生成范围异常）

```
 var x : 0..20;
       y : -10..10;

   begin
     // any expression of x and y has a range -10..20 
```

Turbo Pascal 和 Delphi 在其 16 位和 32 位产品中模拟两倍字长的整数类型。最高无符号类型的处理充其量是hacky。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-08T12:20:24.667

好吧，首先`THandle`声明不正确。它在 Windows 标头中未签名，在 Delphi 中也应如此。事实上，我认为这在最近发布的 Delphi 中得到了纠正。

我想签名而不是未签名的偏好在很大程度上是历史性的，并不是特别重要。但是，我可以想到一个重要的例子。考虑 for 循环：

```
for i := 0 to Count-1 do 
```

如果`i`是无符号且`Count`为 0，则此循环从 0 运行到`$FFFFFFFF`这不是您想要的。使用有符号整数循环变量可以避免这个问题。

Pascal 是其语法的受害者。等效的 C 或 C++ 循环没有这样的麻烦

```
for (unsigned int i=0; i<Count; i++) 
```

由于语法差异和使用比较运算符作为停止条件。

这也可能是`Length()`字符串或动态数组返回有符号值的原因。所以为了一致性，`SetLength()`应该接受有符号的值。并且鉴于 的返回值`Pos()`用于索引字符串，它也应该被签名。

这是关于该主题的另一个 Stack Overflow 讨论：[我应该使用无符号整数来计算成员吗？](https://stackoverflow.com/questions/797484/should-i-use-unsigned-integers-for-count-members)

当然，我在这里胡乱猜测。也许没有设计，只是出于习惯，使用有符号值的先例被设定并被奉为神圣。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-08T12:21:47.560

*   一些与字符串相关的搜索函数在未找到任何内容时返回 -1。
*   我相信这背后的原因是 MaxInt 是 2GB，这是 32 位 Delphi 中字符串的最大大小。这是因为[单个进程最多可以拥有 2GB 内存](https://stackoverflow.com/a/639562/800214)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-08T18:29:19.723

使用有符号整数的原因有很多，甚至在您不打算返回负值时也可能适用。

想象一下，我编写了调用 Pos 的代码，并且我想对结果进行数学运算。你宁愿让一个否定的结果`(Pos('x',s)-5)`引发范围检查异常、下溢并成为一个非常大的无符号数，大约 40 亿，或者如果`Pos('x',s)`返回，则为负数`1`？对于很少考虑这些情况的新用户来说，任何一个都是问题的根源，但**长期以来的传统**是，通过使用`Integer`结果，您的工作是检查负数和零结果，而不是将它们用作字符串偏移量。对于初学者和高级程序员来说，使用整数有一个优势，并且不会让“负”值滚动并变成大的无符号值或引发范围异常。

其次，请记住，在开始编程时，通常会`Integer`在引入无符号类型（如`Cardinal`. 初学者经常使用诸如`Pos`之类的函数，使用会产生最不友好的副作用集的类型是有意义的。范围大于您绝对需要的范围没有负面影响（Pos 可能需要的范围是 1 到 maximum-string-length-in-delphi）。在 32 位 Delphi 中使用`Cardinal`Pos 类型的好处为零，选择它肯定有缺点。

Once you get to 64-bit delphi, however, you could *theoretically* have strings LARGER than an Integer can hold, and moving to Cardinal wouldn't fix all your potential problems. However, the chance of anyone having a 2+ GB string is probably nil, and Delphi 64-bit compiler doesn't allow a `>2 GB` string, anyway. In my testing, I can achieve an almost 1 GB String in 64 bit Delphi. So the practical length limit for a Win64 string is about a billion (1073741814) characters, which is using nearly 2 GB of actual RAM. At that limit, I either get `EIntOverflow` or `EAccessViolation`, and it seems I am hitting Delphi run time library (RTL) bugs, not properly defined limits, so your mileage may vary.

# java - Java IO 缓冲区导航

> ID：12781438
> 
> 赞同：0
> 
> 时间：2012-10-08T12:08:07.647
> 
> 标签：java, io

我从[这里](http://tutorials.jenkov.com/java-io/streams.html)读到，Java IO 和 Java NIO 的一个很大区别在于，首先我们只能在创建缓冲区之后从数据中导航（例如，我认为使用 BufferedInputStreamer 对象）。在第二种情况下，从通道读取的数据直接存储在缓冲区中。

请问，任何人都可以编写一些代码片段来展示如何从旧的 IO 缓冲区来回导航并使用新的 IO API 进行相同的翻译吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-05T19:30:56.277

跳过1024，读取下一个1024，寻回0的例子；

蔚来：

```
int i=1024;
Path p = Paths.get("./","file.txt");
SeekableByteChannel sbc = Files.newByteChannel(p, StandardOpenOption.READ);
sbc.position((long)i);
ByteBuffer bf = ByteBuffer.allocate(i);
sbc.read(bf);
byte[] b = bf.array();
sbc.position(0L); 
```

IO：

```
int i=1024;
File f = new File("./file.txt");
BufferedInputStream bis = new BufferedInputStream(new FileInputStream(f));
bis.mark(i*2);
bis.skip((long)i);
byte[] b = new byte[i];
bis.read(byte[] b);
bis.reset(); 
```

# multithreading - System.timers.timer - 无法随着时间的推移更新标签

> ID：12781442
> 
> 赞同：1
> 
> 时间：2012-10-08T12:08:22.467
> 
> 标签：multithreading, timer, thread-safety

我想在 Windows 窗体上的标签控件上显示经过的时间。为此，我正在使用 System.Timers.timer 但无法使用按钮单击事件的经过时间来更新标签。

例如

```
Private Shared mtimer As System.Timers.Timer

Private Sub btnprocess_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnprocess.Click

'Counter to Calculate time as Process Starts
 mDate = Date.Now
 ''Create a timer with  second interval
 mtimer = New System.Timers.Timer()
 ''Hook the Elapsed event
 **AddHandler mtimer.Elapsed, AddressOf Processtick**
 mtimer.Start()
'set the interval 1 second 
 mtimer.Interval = 1000
 mtimer.Enabled = True

 ''Some functions 

   end sub 

Private Sub Processtick(ByVal source As Object, ByVal e As ElapsedEventArgs)

Dim ts As TimeSpan = DateTime.Now.Subtract(mDate)
lblelapsed.Text = ts.Hours & ":" & ts.Minutes & ":" & ts.Seconds

End sub 
```

尝试了上面的代码，但它不起作用，我想在用户单击“处理”按钮后立即更新标签控件上的经过时间，
直到所有功能在按钮单击时执行。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:10:37.163

由于`System.Timers.Timer`在单独的线程上运行，它不能直接更新 GUI。您需要使用`BeginInvoke`控件将更新转发到 GUI 线程。不幸的是，我对 vb.net 不是很熟悉，但您可以在此处找到如何操作的示例：http: [//msdn.microsoft.com/en-us/library/0b1bf3y3.aspx](http://msdn.microsoft.com/en-us/library/0b1bf3y3.aspx)

# ios - iOS Facebook SDK 3.1 的设置按钮不起作用

> ID：12781447
> 
> 赞同：15
> 
> 时间：2012-10-08T12:08:41.400
> 
> 标签：ios, facebook, button, sdk, settings

我已经完成了这里解释的所有步骤：[https ://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/](https://developers.facebook.com/docs/getting-started/facebook-sdk-for-ios/3.1/)

我已经测试了演示项目并且失败了和我的项目一样。（您可以在 HelloFacebookSample 项目上对其进行测试）。

当您没有配置任何 Facebook 帐户时，您无法在 facebook 上分享内容，或上传图片等（与 twitter 框架相同）。因此，框架会向您显示一条消息，告诉您：

没有配置 Facebook 帐户。您可以在“设置”中添加或创建 Facebook 帐户。

您单击设置，但唯一发生的事情是该对话框被隐藏，但框架没有打开“设置”选项卡（例如在 twitter 框架上工作）。

有谁知道如何解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:20:43.047

请使用`SLComposeViewController`Facebook 分享类，为您设置按钮工作。

```
if([SLComposeViewController class])
{
    SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
    [controller setInitialText:text];
    [controller addURL:[NSURL URLWithString:encod]];
    [self presentViewController:controller animated:YES completion:Nil];
    //[message release];

    SLComposeViewControllerCompletionHandler myBlock = ^(SLComposeViewControllerResult result)
    {
        NSString *output= nil;
        switch (result)
        {
            case SLComposeViewControllerResultCancelled:
                output= @"Action Cancelled";
                break;
            case SLComposeViewControllerResultDone:
                output= @"Post Succesfull";
                [self displayText:@"done"];
                break;
            default:
                break;
        }

     };
    controller.completionHandler =myBlock;
} 
```

这段代码对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:00:47.260

你为什么不使用***UIActivityViewController***？iOS 6 对**UIActivityViewController的支持最好**

```
UIActivityViewController *ActivityView = [[UIActivityViewController alloc] initWithActivityItems:Items applicationActivities:nil]; 
```

Facebook、Twitter 和短信服务的最佳集成

# java - 横向和纵向android的不同设计

> ID：12781449
> 
> 赞同：14
> 
> 时间：2012-10-08T12:08:52.200
> 
> 标签：java, android, android-layout, android-screen

我们可以为横向设置不同的xml，为纵向设置不同的xml吗？

我正在开发一个简单的应用程序，按钮和文本视图很少，xml 在纵向上看起来不错，但是当我检查横向时使用相同的 xml，设计看起来不太好。

任何建议表示赞赏.. 谢谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-08T12:10:15.370

是的当然。

您将必须创建两个版本的 xml 文件并将其放入 res 文件夹中的 layout-port 和 layout-land 文件夹。

例如：

```
res/layout [Portrait Mode; default]
 main.xml
res/layout-land [Landscape Mode]
 main.xml 
```

[您可以在http://developer.android.com/training/basics/supporting-devices/screens.html](http://developer.android.com/training/basics/supporting-devices/screens.html)上进一步参考

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T12:10:45.480

如果您想为横向制作另一种布局，请将其放入

`res -> layout-land`文件夹 。

xml 的名称必须相同，用于纵向和横向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T12:11:16.377

您应该为横向制作一个不同的 xml 文件。下面的链接可以帮助你

[http://developer.android.com/training/basics/supporting-devices/screens.html](http://developer.android.com/training/basics/supporting-devices/screens.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-09T08:26:11.990

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_screen_orientation_app);
   if(getResources().getDisplayMetrics().widthPixels>getResources().getDisplayMetrics().
            heightPixels) 
        {  
            Toast.makeText(this,"Screen switched to Landscape mode",Toast.LENGTH_SHORT).show(); 
        } 
        else 
        { 
            Toast.makeText(this,"Screen switched to Portrait mode",Toast.LENGTH_SHORT).show(); 
        }
    } 
```

# jaxb - 如果名称包含 - 则无法使用 JAXB 解析 xml -

> ID：12781461
> 
> 赞同：4
> 
> 时间：2012-10-08T12:09:32.243
> 
> 标签：jaxb

我正在使用 JAXB 注释来解析`test-results.xml`由 testNG 生成的。

我可以使用提取任何属性，`@XmlAttribute(name="someName")`但 JAXB 无法使用`-`(like `@XmlAttribute(name="some-name")`)读取属性

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:51:15.737

以下是如何映射到包含破折号的 XML 属性`-`。

```
@XmlAttribute(name="some-name")
public String getSomeName() {
    return someName;
}

public void setSomeName(String someName) {
    this.someName = someName;
} 
```

# three.js - 如何使材质显示在球体上

> ID：12781476
> 
> 赞同：0
> 
> 时间：2012-10-08T12:10:14.103
> 
> 标签：three.js

```
// set the scene size
var WIDTH = 1650,
    HEIGHT = 700;

// set some camera attributes
var VIEW_ANGLE = 100,
    ASPECT = WIDTH / HEIGHT,
    NEAR = 0.1,
    FAR = 10000;

// get the DOM element to attach to
// - assume we've got jQuery to hand
var $container = $('#container');

// create a WebGL renderer, camera
// and a scene
var renderer = new THREE.WebGLRenderer();
var camera = new THREE.PerspectiveCamera(  VIEW_ANGLE,
                                ASPECT,
                                NEAR,
                                FAR  );

//camera.lookAt(new THREE.Vector3( 0, 0, 0 ));

var scene = new THREE.Scene();

// the camera starts at 0,0,0 so pull it back
camera.position.x = 200;
camera.position.y = 200;
camera.position.z = 300;

// start the renderer
renderer.setSize(WIDTH, HEIGHT);

// attach the render-supplied DOM element
$container.append(renderer.domElement);

// create the sphere's material
var sphereMaterial = new THREE.MeshLambertMaterial(
{
    color: 0xCC0000
});

// set up the sphere vars
var radius = 60, segments = 20, rings = 20;

// create a new mesh with sphere geometry -
// we will cover the sphereMaterial next!
var sphere = new THREE.Mesh(
   new THREE.SphereGeometry(radius, segments, rings),
   img);

// add the sphere to the scene
scene.add(sphere);

// and the camera
scene.add(camera);

// create a point light
var pointLight = new THREE.PointLight( 0xFFFFFF );

// set its position
pointLight.position.x = 50;
pointLight.position.y = 100;
pointLight.position.z = 180;

// add to the scene
scene.add(pointLight);

// add a base plane
var planeGeo = new THREE.PlaneGeometry(500, 500,8, 8);
var planeMat = new THREE.MeshLambertMaterial({color: 0x666699});
var plane = new THREE.Mesh(planeGeo, planeMat);

plane.position.x = 160;
plane.position.y = 0;
plane.position.z = 20;

//rotate it to correct position
plane.rotation.x = -Math.PI/2;
scene.add(plane);

// add 3D img

var img = new THREE.MeshBasicMaterial({
map:THREE.ImageUtils.loadTexture('cube.png')
});
img.map.needsUpdate = true;

// draw!
renderer.render(scene, camera); 
```

我已经将 var img 作为球体的材料，但每次我渲染它时都会自动改变颜色......我该怎么做才能拥有我想要的图像......不是所有的颜色？我可能会把img放在飞机上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T05:37:36.550

您需要使用 loadTexture 函数的回调。如果您参考[源代码，`THREE.ImageUtils`](https://github.com/mrdoob/three.js/blob/master/src/extras/ImageUtils.js)您会看到 loadTexture 函数定义为

```
loadTexture: function ( url, mapping, onLoad, onError ) {

        var image = new Image();
        var texture = new THREE.Texture( image, mapping );

        var loader = new THREE.ImageLoader();

        loader.addEventListener( 'load', function ( event ) {

            texture.image = event.content;
            texture.needsUpdate = true;

            if ( onLoad ) onLoad( texture );

        } );

        loader.addEventListener( 'error', function ( event ) {

            if ( onError ) onError( event.message );

        } );

        loader.crossOrigin = this.crossOrigin;
        loader.load( url, image );

        return texture;

    }, 
```

这里只需要 url 参数。纹理映射可以作为 null 传入。最后两个参数是回调。您可以为每个函数传入一个函数，该函数将在相应的加载和错误事件中调用。您遇到的问题很可能是由于three.js 试图在您的纹理正确加载之前应用您的材质。为了解决这个问题，您应该只在作为 onLoad 回调传递的函数中执行此操作（仅在加载图像后调用）。此外，您应该始终在将材质应用于对象之前创建材质。

所以你应该改变你的代码：

```
// set up the sphere vars
var radius = 60, segments = 20, rings = 20;

// create a new mesh with sphere geometry -
// we will cover the sphereMaterial next!
var sphere = new THREE.Mesh(
   new THREE.SphereGeometry(radius, segments, rings),
   img);

// add the sphere to the scene
scene.add(sphere); 
```

类似于：

```
var sphereGeo, sphereTex, sphereMat, sphereMesh;
var radius = 60, segments = 20, rings = 20;

sphereGeo = new THREE.SphereGeometry(radius, segments, rings);
sphereTex = THREE.ImageUtils.loadTexture('cube.png', null, function () {
    sphereMat = new THREE.MeshBasicMaterial({map: sphereTex});
    sphereMesh = new THREE.Mesh(sphereGeo, sphereMat);
    scene.add(sphereMesh);
}); 
```

# android - 如何解决 TransactionTooLargeException 错误？

> ID：12781482
> 
> 赞同：2
> 
> 时间：2012-10-08T12:10:47.327
> 
> 标签：android

当我单击列表视图的选定单元格时出现此 TransactionTooLargeException，请任何人指导我如何解决此问题...？

我的错误日志是：-

```
Exception when starting activity   com.app.Login/com.app.New_Site_Risk_Assessment.Show_Selected_Images
10- android.os.TransactionTooLargeException
at android.os.BinderProxy.transact(Native Method)

at android.app.ApplicationThreadProxy.scheduleLaunchActivity(ApplicationThreadNative.java:660)

at com.android.server.am.ActivityStack.realStartActivityLocked(ActivityStack.java:615)

at com.android.server.am.ActivityStack.startSpecificActivityLocked
at com.android.server.am.ActivityStack.resumeTopActivityLocked
at com.android.server.am.ActivityStack.completePauseLocked
at com.android.server.am.ActivityStack.activityPaused
at com.android.server.am.ActivityManagerService.activityPaused(ActivityManagerService.java:4131)

at android.app.ActivityManagerNative.onTransact(ActivityManagerNative.java:371)

at com.android.server.am.ActivityManagerService.onTransact(ActivityManagerService.java:1548)
at android.os.Binder.execTransact(Binder.java:338)
at dalvik.system.NativeStart.run(Native Method)
Force removing ActivityRecord{41261b98 com.app.Login/com.app.New_Site_Risk_Assessment.Show_Selected_Images}: app died, no saved state

Force removing ActivityRecord{413329a8 com.app.Login/com.app.Qoute_Inbox.Qoute_Inbox_Display_Data}: app died, no saved state 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-10-16T22:19:20.687

**通过 Intent 发送数据时，应注意将数据大小限制为几 KB**。

发送过多数据会导致系统抛出 TransactionTooLargeException 异常。

# dll - 调用 dll 管理的 C++ 中存在的类构造函数

> ID：12781484
> 
> 赞同：0
> 
> 时间：2012-10-08T12:10:56.533
> 
> 标签：dll, managed-c++

我在 DLL 中创建了一个类（它使用 /clr 运行时，ManagedC++），并在该类中定义了一个构造函数。代码如下：

```
//Following is defined in something.h//

namespace ABC
{
public ref Class XYZ
{
public: int a;
public: XYZ();
};

//In something.cpp, I've the below code to define the constructor of the class created//

#include something.h

namespace ABC
{
 XYZ::XYZ()
  {
     a = 100;
  }
} 
```

> 上面的项目内置在一个 DLL 中

在另一个项目中，我尝试使用 XYZ 类，如下所示：

```
#include something.h
using namespace ABC;

//inside main, I've following code

{
ABC::XYZ^ prq = gcnew ABC:XYZ();
prq->a=200;

......
...
} 
```

在这，我得到一个错误说 -

```
unresolved token (06000001) ABC.XYZ::.ctor 
```

你能帮忙看看这里有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:21:36.127

问题是链接器找不到构造函数的定义。它位于另一个 DLL 中。在托管项目中，您可以通过添加对程序集的引用来解决这个问题。右键单击您的项目、属性、通用属性、框架和引用。单击添加新引用按钮。如果项目位于同一解决方案中，请使用“项目”选项卡。浏览选项卡，否则。

Also note that you now no longer need the .h file anymore. Declarations are imported from the metadata in the assembly.

# android - Android以编程方式设置LinearLayout背景

> ID：12781501
> 
> 赞同：9
> 
> 时间：2012-10-08T12:11:49.247
> 
> 标签：android, layout

我有一种情况，我需要以编程方式在 LinearLayout 上设置背景。

在我的布局中，我使用 `android:background="?android:attr/activatedBackgroundIndicator" 设置背景，但我想以编程方式设置：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/myLayoutId"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:gravity="left|center"
    android:paddingBottom="5dip"
    android:paddingLeft="5dip"
    android:background="?android:attr/activatedBackgroundIndicator"
    android:paddingTop="5dip" > 
```

我试过使用：

```
Drawable d = getActivity().getResources().getDrawable(android.R.attr.activatedBackgroundIndicator);
rootLayout.setBackgroundDrawable(d); 
```

但它崩溃了。有任何想法吗？

编辑：我也尝试过使用：

```
rootLayout.setBackgroundResource(android.R.attr.activatedBackgroundIndicator);

10-08 15:23:19.018: E/AndroidRuntime(11133): android.content.res.Resources$NotFoundException: Resource ID #0x10102fd 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-19T11:30:04.927

我有同样的问题，我用这段代码修复了它。

android.R.attr.* 是指向主题中的指针，而不是指向定义的实际可绘制资源。您必须使用[TypedArray](http://developer.android.com/reference/android/content/res/TypedArray.html)来访问 id。

```
theView = this.inflater.inflate(R.layout.list_row_job_favorited, null);

if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.HONEYCOMB) {
  TypedArray a = mContext.obtainStyledAttributes(new int[] { android.R.attr.activatedBackgroundIndicator });
  int resource = a.getResourceId(0, 0);
  //first 0 is the index in the array, second is the   default value
  a.recycle();

  theView.setBackground(mContext.getResources().getDrawable(resource));
} 
```

当检测到 SDK 上限并且工作正常时，我在我的自定义列表适配器中使用了它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-08T12:13:19.533

试试这条线

```
rootLayout.setBackgroundResource(d); 
```

代替

```
rootLayout.setBackgroundDrawable(d); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-08T12:17:21.320

试试这个

```
rootLayout.setBackgroundResource(R.drawable.image); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-21T14:21:28.117

按照公认的答案告诉您的方式来做是个坏主意。问题是您还需要调用列表`onItemCheckedStateChanged`来更新所需的内容（例如操作栏标题）。

在这种情况下，您只需`getListView().setItemChecked(position, true);`在检查项目和`getListView().setItemChecked(position, false);`未检查项目时调用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-10-24T09:55:13.333

请尝试以下代码。

```
LinearLayout layout=(LinearLayout) findViewById(R.id.layoutImage);
layout.setBackgroundResource(R.drawable.bg); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-17T18:54:50.383

你可以使用这样的东西

`TypedValue outValue = new TypedValue(); context.getTheme().resolveAttribute(android.R.attr.selectableItemBackgroun d, outValue, true); view.setBackgroundResource(outValue.resourceId);`

# fortran - 如何强制fortran编译器在子例程违反“intent（in）”的情况下生成错误，而忽略了意图

> ID：12781506
> 
> 赞同：4
> 
> 时间：2012-10-08T12:12:05.917
> 
> 标签：fortran

这个问题与我之前的问题有关：[如何强制编译器将省略的意图解释为 intent(inout)](https://stackoverflow.com/questions/12727556/how-to-force-fortran-compiler-to-interpret-omitted-intent-as-intentinout)。将遗漏的意图解释为意图（inout）似乎是不可能的，因此违反意图（in）的问题仍然存在。

同样的例子：

```
module test
  implicit none
  contains

  subroutine fun1(x)
    real(8), intent(in)::x
    call fun2(x)               
  end subroutine

  subroutine fun2(x)
   real(8) :: x
   x = 10
  end subroutine
end module 
```

gfortran 和 ifort 可以编译此代码而不会出现任何错误/警告。所以我的问题是：

当意图（in）变量传递给具有省略意图（但声明接口）的子例程时，如何强制fortran编译器生成错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:51:13.873

正如 IanH 所说，您需要一个可以为您处理的处理器（即编译器）。例如，如果你给它正确的标志，NAG 编译器会（免责声明 - 我为 NAG 工作）。我稍微修改了您的代码以使其可移植，并添加了一个驱动程序来显示这一点：

```
$ cat t.f90 
module test
  implicit none

  Integer, Parameter :: wp = Selected_real_kind( 12, 70 )

  contains

  subroutine fun1(x)
    real(wp), intent(in)::x
    call fun2(x)               
  end subroutine

  subroutine fun2(x)
   real(wp) :: x
   x = 10
  end subroutine
end module

Program test_test

  Use test

  Implicit None

  Real( wp ) :: x

  x = 5.0_wp

  Call fun1( x ) 

End Program test_test
$ nagfor t.f90
NAG Fortran Compiler Release 5.3.1 pre-release(904)
[NAG Fortran Compiler normal termination]
$ ./a.out
$ nagfor -C=all -C=undefined t.f90 
NAG Fortran Compiler Release 5.3.1 pre-release(904)
[NAG Fortran Compiler normal termination]
$ ./a.out
Runtime Error: t.f90, line 15: Dummy argument X is associated with an expression - cannot assign
Program terminated by fatal error
Aborted (core dumped)
$ 
```

所以搜索标志，可能会有一些帮助 - 如果不是向提供编译器的人抱怨！

# android - 恐慌：缺少特定于架构的仿真器程序：C:\Program Files (x86)\Android\android-sdk\tools/emulator-mips.exe

> ID：12781507
> 
> 赞同：3
> 
> 时间：2012-10-08T12:12:26.610
> 
> 标签：android, eclipse, avd

我只是在我的 Android SDK 管理器中安装 mips 系统映像。当我使用 CPU/ABI 运行 AVD 时 - 使用 mips 系统映像。它给了我错误并且 AVD 没有启动。请看一下图像。

还有谁能告诉我什么是 mips 系统映像。![在此处输入图像描述](../Images/29018b82fb1aa0a4a0f57eeceeeae321.png)

![在此处输入图像描述](../Images/e337070ed773a0becbe84f2717b080a1.png)

------------- 另见我的 SDK 管理器 --------

它说 mips 系统映像已安装在您的系统上。

-![在此处输入图像描述](../Images/453aa2f175f31fa9558f648729f882c1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T21:22:20.197

这可能是由于运行了 20 或更早版本的 SDK 工具。他们将 mips 添加到预览频道中的 21 中。要启用预览通道，您只需打开 SDK 管理器，单击工具->选项，然后选中启用预览工具。

[http://developer.mips.com/android/download-android-sdk/](http://developer.mips.com/android/download-android-sdk/)

[http://tools.android.com/preview-channel](http://tools.android.com/preview-channel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T15:56:31.503

查看您的 .exe 文件是否在防病毒隔离区中

1- 从[https://developer.android.com/tools/sdk](https://developer.android.com/tools/sdk)再次下载 adt-bundle 。2- 打开压缩文件。3- 从文件夹“\sdk\tools”复制丢失的 .exe 文件。4- 将复制的文件粘贴到“Android\sdk\tools”目录中。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-20T03:27:51.663

请前往

*   使用 Eclipse IDE 的 Android 虚拟设备管理器。

*   Windows -> AVD 管理器。

*   从列表中选择所需的 AVD，然后单击“开始”按钮。

# iphone - 如何使用“didSelectRowAtIndexPath”显示特定相册中的照片

> ID：12781508
> 
> 赞同：0
> 
> 时间：2012-10-08T12:12:28.513
> 
> 标签：iphone, uitableview

我已经设置了一个表格视图，显示设备中的用户相册。我`ALAssets`用来填充表格视图。

现在如何在另一个视图中显示特定相册中的照片？...

我看过有关`NSDictionaries`...的教程，但是它需要修复“键”和“值”...然后它会加载相应的数据。

但是有没有其他方法可以做到这一点......，一种更动态的一种......因为每个用户的设备中的专辑名称可能不同......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:05:15.140

最简单的方法是使用导航控制器并推送视图控制器的新实例（专用于显示专辑的新实例或相同的新实例，具体取决于偏好）。该视图控制器提供有关要显示哪个组的信息，并可能还交给它`AL`。

# regex - Preg_match 从内容中获取日期

> ID：12781509
> 
> 赞同：-1
> 
> 时间：2012-10-08T12:12:30.333
> 
> 标签：regex, date, html, preg-match

嗨，我正在尝试从此内容中获取日期：

```
<div class="article-meta">
  <h1>Kelkraščiu ir prieš eismą</h1>
  <div class="clear"></div>
  <ul>
    <li>
      <strong>Publikuota:</strong>
       2012 spalio 8d.
    </li>
    <li>
      <strong>Autorius:</strong>

                                    Vardas, Pavardė                            
    </li>
    <li>
      <strong>Rubrika:</strong>
      <a href="/ikrauk/naujienos/fotopolicija/" title="Fotopolicija">Fotopolicija</a>
    </li>
  </ul>
  <div class="clear"></div>
</div> 
```

我需要把它`2012 spalio 8d.`放入变量中。

我正在尝试`preg_match`但现在不知道如何完成模式。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:35:07.627

尝试这个：

```
preg_match_all('/Publikuota:<\/[^>]+>\s*(\d+\s*\w+\s*\w+)/i', $html, $out);
print_r($out[1]); 
```

# c++ - Linking static library into R

> ID：12781518
> 
> 赞同：2
> 
> 时间：2012-10-08T12:12:46.543
> 
> 标签：c++, r, static-libraries

I have a static library which I am trying to use inside my R package. This is only for internal use.

The libq.a for now is just within ./src folder. I was trying to add the following to src/Makevars:

```
PKG_LIBS="-l/path/to/lib/libq.a" 
```

Where /path/to/lib is an absolute path to the libq.a location (for testing purposes only). But that doesn't seem to help. Do I have to do anything else in order to load that static library?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T12:43:39.307

That should work -- make sure you see the library used on the final link statement when the package is built. Mind you, though, that -L is for the patch and -lq should be all.

Static libraries can also be added directly so try `/path/to/lib/libq.a` as is as an argument to `PKG_LIBS`.

# haskell - Haskell - 模式中的解析错误

> ID：12781519
> 
> 赞同：1
> 
> 时间：2012-10-08T12:12:50.913
> 
> 标签：haskell, pattern-matching, parse-error

这段代码：

```
validate :: Matrix-> Bool
validate x: [] = length x
validate x: xs = (length x == lenght.head $ xs) == (validate tail xs) 
```

产生此错误：

```
Parse error in pattern: validate 
```

为什么？

如果矩阵的模式正确，我的目标是返回 true，即所有行中的列数相等，反之亦然。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-08T12:16:28.497

函数应用的优先级高于`:`. 所以编译器认为：

```
validate x:[] 
```

方法：

```
(validate x):[] = .. 
```

这当然是错误的。

因此，您应该使用括号明确地消除歧义：

```
validate (x:[]) = .. 
```

同样对于第二行：

```
validate (x:xs) = .. 
```

此外，如果您在函数应用程序中未提供任何括号，则假定它是左关联的，因此：

```
validate tail xs 
```

等同于：

```
(validate tail) xs 
```

并不是：

```
validate (tail xs) 
```

一种常见的做法是使用`$`运算符，如下所示：

```
validate $ tail xs 
```

# java - 找到 BST 的方法仍然不起作用

> ID：12781524
> 
> 赞同：0
> 
> 时间：2012-10-08T12:13:01.867
> 
> 标签：java, binary-search-tree

这些是我的领域：

```
public class BSTSet <E> extends AbstractSet <E> {

// Data fields
private BSTNode root;
private int count = 0;
private Comparator<E> comp;   // default comparator

/** Private class for the nodes.
 *  Has public fields so methods in BSTSet can access fields directly. 
 */
private class BSTNode {

    // Data fields

    public E value;
    public BSTNode left = null;
    public BSTNode right = null;

    // Constructor

    public BSTNode(E v) {
        value = v;
    }

}

// Constructors - can either use a default comparator or provide one

public BSTSet() {
    comp = new ComparableComparator();      // Declared below
}

public BSTSet(Comparator <E> c) {
    comp = c;
}

// Methods

/** Return true iff the set is empty */
public boolean isEmpty() {
    return count == 0;
}

/** Return the number of elements in set */

public int size() {
    return count;
} 
```

这是我要解决的方法：

```
 /** Return true iff (if and only if) the set contains an item
 * (the item must be non null) 
 */
public boolean contains(Object item) {
    // YOUR CODE HERE

    //changes item to E so it can be used in the comparator
    E value1 = (E) item;

    if (root.value.equals(item)){
        return true;
    }

    int s = comp.compare(value1,root.value);
    if(s<0){
        if (root.left == null)
            return false;
        else
            return root.left.contains(item);
    }
    else if(s>0){
        if (root.right == null)
            return false;
        else
            return root.right.contains(item);
    }

} 
```

到目前为止，一切似乎都还不错，但是在 return root.left.contains(item); 失败了 并说它找不到符号 - 方法包含。我该如何解决这个问题，以便我可以运行我的 contains 方法，该方法应该返回值是否在 BST 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:28:43.987

`left`和都`right`被声明为`BSTNode`实例。 `BSTNode`没有一个名为 的方法`contains`，所以你需要添加一个：

```
public boolean contains(Object item) {
    return value.equals(item);
} 
```

理想情况下，您希望您的节点和集合都实现相同的接口，因此您不知道实际调用的是哪个实现。

# android - Android - 为什么 SaxParser 可以在本地 XML 文件上工作，但不能在 URL 上的 XML 上工作？

> ID：12781526
> 
> 赞同：1
> 
> 时间：2012-10-08T12:13:09.700
> 
> 标签：android, xml-parsing, saxparser

我已经在我的应用程序中成功实现了 SaxParser 来解析 XML 文件。我的应用程序适用于其他在线 XML 文件，但不适用于特定文件。我在浏览器上打开了这个特定的 XML 文件，而不是转到“页面源”，复制所有内容并粘贴到我的项目中的本地 XML 文件中，然后解析器工作。

当我尝试从 Internet 上的源解析此文件时，在 Logcat 上我收到错误消息：

```
org.apache.harmony.xml.ExpatParser$ParseException: At line 1, column 0: syntax error 
```

我唯一想到的是，源文件的 url 类似于“example.com/showxml”。所以 url 不以 .xml 扩展名结尾。

这可能是错误的原因吗？

提前致谢！

注意事项：
1\. Internet 权限列在我的清单中。
2\. 我认为 XML 文件中没有语法错误，因为它在我将它复制并粘贴到本地文件时有效。

更新：

我将 XML 文件上传到另一个网站，以便尝试是否可以从那里访问它。它奏效了。似乎我的问题是由我试图从中获取原始文件的域引起的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:34:53.213

将文件转储到 android 中，可能您的代码使用了错误的字符编码、错误的 bof 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T11:51:14.420

不幸的是，我犯了一个巨大的错误。该文件不是 XML 文件，而是 JSON。但不知何故，Firefox 以 XML 格式显示它，这让我非常困惑。我猜我调用的 URL 是某种 Web 服务，它能够以 XML 和 JSON 格式返回数据。总之，问题解决了。感谢所有在这里度过一分钟的人。

# qml - 黑莓10中的Coverflow

> ID：12781531
> 
> 赞同：0
> 
> 时间：2012-10-08T12:13:20.423
> 
> 标签：qml, coverflow, blackberry-10

我正在使用本机 SDK 在 blackbery10 中开发应用程序。而且我想在我的应用程序中显示封面流。但是我没有找到用于进行封面流的组件。如何通过 QML 在 Blackberry10 中进行 Cover-flow。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:33:52.140

不是真正像苹果一样的封面流程，但您可以像以下示例一样创建图像轮播：[https ://github.com/blackberry/Cascades-Community-Samples/tree/master/stumpers/bbjamcarousel](https://github.com/blackberry/Cascades-Community-Samples/tree/master/stumpers/bbjamcarousel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:45:20.023

您应该使用 PathView 元素来实现类似覆盖流的效果。文档[here](http://qt-project.org/doc/qt-4.8/qml-pathview.html)和一些示例[here](https://idlebox.net/2010/apidocs/qt-everywhere-opensource-4.7.0.zip/declarative-modelviews-pathview.html)和[here](http://www.developer.nokia.com/Community/Wiki/PathView_QML_Element)

# jira - 如何在 JIRA 中查找或搜索附件问题？

> ID：12781532
> 
> 赞同：1
> 
> 时间：2012-10-08T12:13:23.473
> 
> 标签：jira

我想查找或搜索带有附件的问题列表。

有人可以让我知道如何搜索吗？

提前致谢， 凯瑟尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:24:11.790

您可以使用 JIRA 工具包插件来做到这一点。

[https://studio.plugins.atlassian.com/wiki/display/JTOOL/JIRA+Toolkit+Plugin](https://studio.plugins.atlassian.com/wiki/display/JTOOL/JIRA+Toolkit+Plugin)

> 评论和附件数量 | 您现在还可以显示和搜索问题的评论和附件数量。您还可以对其中任何一个执行范围搜索。

# javascript - Javascript Regex.test 方法在 Blackberry OS 4.6 上给出错误输出

> ID：12781535
> 
> 赞同：1
> 
> 时间：2012-10-08T12:13:42.360
> 
> 标签：javascript, regex, blackberry

下面的 Javascript 代码检查给定的输入是否是字母数字。在所有浏览器中，它都会给出预期的输出，即“alpha numaric”，但在 Blackberry OS 4.6 上，它会返回“No alpha numaric”。

```
var oRegX = new RegExp(/^[a-zA-Z0-9]+$/);

if(!oRegX.test('iAmAlphaNumric123'))
{
    alert('No alpha numaric');
}
else
{
    alert('alpha numaric');
} 
```

上面写的代码只是一个例子。实际上，regex.test 方法为任何 regex 和 Blackberry OS 4.6 浏览器上的输入提供相反的结果

我对此进行了谷歌搜索，但找不到与此问题相关的任何材料。这是 Blackberry OS 4.6 浏览器中的错误还是我做错了什么。

# html - div 的高度 = 其宽度，以百分比为单位，因此 div 看起来像一个正方形，容器元素的形状不是正方形（仅限 CSS）

> ID：12781536
> 
> 赞同：5
> 
> 时间：2012-10-08T12:13:43.740
> 
> 标签：html, css

我已将元素的宽度和高度设置为百分比，以便它们在更大的屏幕上看起来更大一些，而在普通屏幕上看起来正常。我还设置了`min-height`，`min-width`以便在屏幕太小时查看时布局不会失真。我希望我的一个元素显示为正方形，但我无法想出一个纯 CSS 的解决方案来实现它。

这是我尝试过的：[http://jsfiddle.net/5VTTD/](http://jsfiddle.net/5VTTD/)，但它没有用。

这有效：http: [//jsfiddle.net/5VTTD/1/](http://jsfiddle.net/5VTTD/1/)，但它使用 JS。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T12:34:36.367

您将需要一个外部`<div>`容器作为容器，然后需要一个内部容器作为正方形。

我为正方形使用了 50% 的尺寸，但您可以使用您想要的尺寸：它将相对于父`<div>`容器。

我还给了它一个黑色的背景颜色来突出它：这里有一个[DEMO](http://jsfiddle.net/wwvcH/)。

诀窍在于`padding-bottom: 100%`parent `<div>`。

CSS：

```
#container {
  position: relative;
  width: 100%;
  padding-bottom: 100%;
}

#square {
  position: absolute;
  width: 50%;
  height: 50%;
  background-color: #000000;
} 
```

HTML：

```
<div id="container">
  <div id="square">
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:28:47.857

看看这个：http: [//jsfiddle.net/5VTTD/9/](http://jsfiddle.net/5VTTD/9/)

# iphone - 带有目标的标签到另一个视图

> ID：12781538
> 
> 赞同：0
> 
> 时间：2012-10-08T12:13:51.757
> 
> 标签：iphone, objective-c, ios

我想要一个类似于[此屏幕截图](http://goo.gl/KUA74)的登录：

![截屏](../Images/f525924386c23d574792129165245b9e.png)

问题是我不知道如何做底部，这两个选项。当我推送时，我想放另一个视图——注册视图或重置密码视图——但我不知道如何做这些元素（它们是标签吗？）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T12:16:14.823

它们可以是`UIButton`自定义类型和文本值：

![在此处输入图像描述](../Images/b4342d3f9e6712f7e588f8e23682b74c.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T12:19:08.810

为此，首先您需要`UILabel`显示“Tumblr”选项。然后你创建一个`UITableView`. 此 TableView 将包含 2 个部分，例如“电子邮件”和“密码”。使 UITableView 的边缘使用圆角

`TableView.layer.cornerRadius = 10;`

现在要推送到另一个视图，您只需在`UITableViewCells`in 中写入任何数据

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

并使用

`- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`

您可以将该信息传递给您同样提到的重置密码选项的下一个视图。创建一个`UIButton`并将其命名为“登录”。

我这就是你想要达到的目标？？有任何疑问请告诉。谢谢 ：）

**编辑：**

对于下面的选项，您可以做的是将其设置`UIButtons`为*自定义*并将其文本写入“重置密码”等。然后在他们单击时，您可以打开下一个视图或同一视图本身的 presentModalViewController，您可以在其中将能够进行您的登录并重置内容。希望能帮助到你 ！！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T12:18:15.957

它是一个标签，您可以将它与操作方法链接起来。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T13:00:53.733

```
//using   UITapGestureRecognizer to easy to set target to another view

 UITapGestureRecognizer *tab_1 = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(action_1)];
    tab_1.delegate = self;
    [label1 addGestureRecognizer: tab_1];

    UITapGestureRecognizer *tab_2 = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(action_2)];
    tab_2.delegate = self;
    [label2 addGestureRecognizer: tab_2];

    -(void)action_1{
    //your action or view;
    }

    -(void)action_2{
    //your action or view;
    } 
```

# c# - 联合词典

> ID：12781542
> 
> 赞同：2
> 
> 时间：2012-10-08T12:14:06.817
> 
> 标签：c#, linq, dictionary

我有两个`Dictionary<Person,Boolean>`。dict a 包含：

```
Person A -> false
Person B -> true,
Person C -> false; 
```

字典 b 包含：

```
Person A -> true;
Person D -> false; 
```

如果一个人在两个列表之一中包含一个真值，我想要一个结果，它包含一次所有的人，并将布尔值设置为真。

我该如何解决这个问题`dict.Union()`？

谢谢库奇

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T12:17:36.203

听起来你可以使用：

```
var result = first.Union(second)
                  .GroupBy(x => x.Key)                // Group by dictionary keys
                  .ToDictionary(g => g.Key,           // Key for new dictionary
                                g => g.Any(p => p.Value)); // Any true values? 
```

# translation - 如何在没有文本域的情况下使用 Zf2 翻译？

> ID：12781543
> 
> 赞同：2
> 
> 时间：2012-10-08T12:14:07.833
> 
> 标签：translation, zend-framework2

我的模块适用于

```
'translator' => array(  'locale' => 'de_DE',
            'translation_file_patterns' => array(
                    array(
                    'type'     => 'gettext',
                    'base_dir' => __DIR__ . '/../language',
                    'pattern'  => '%s.mo', 
```

只有当我使用像 DE.mo EN.mo 这样的 MO 文件，但是当文件是 en_US.mo ， de_DE.mo 我需要添加到 congik`'text_domain' => __NAMESPACE__`时，在我看来我`$this->translate('some message',__NAMESPACE__)` 怎样才能摆脱这种差异？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T12:11:20.213

您**可以**使用文本域，但它们不是强制性的。所以：

```
'translator' => array('locale' => 'de_DE',
    'translation_file_patterns' => array(
        array(
            'type'     => 'gettext',
            'base_dir' => __DIR__ . '/../language',
            'pattern'  => '%s.mo',
        ),
    ),
) 
```

在您的视图脚本中：

```
<?php echo $this->translate('My Foo'); ?> 
```

**如果**您使用文本域，则**必须**在配置**和**视图助手中使用它们：

```
'translator' => array('locale' => 'de_DE',
    'translation_file_patterns' => array(
        array(
            'type'        => 'gettext',
            'base_dir'    => __DIR__ . '/../language',
            'pattern'     => '%s.mo',
            'text_domain' => 'domain-1'
        ),
    ),
) 
```

然后你**必须**这样做：

```
<?php 
    $this->plugin('translate')->setTranslatorTextDomain('domain-1');
    echo $this->translate('My Foo') 
?> 
```

但任何一种方式都是可能的。您不需要为特定语言环境使用文本域。

# asp.net-mvc-3 - MVC3 中的远程验证属性无效获取格式

> ID：12781546
> 
> 赞同：0
> 
> 时间：2012-10-08T12:14:34.533
> 
> 标签：asp.net-mvc-3, remote-validation

我第一次尝试使用远程验证，但是在传递到远程验证方法的参数时遇到了问题。

我的模型如下：

```
public class PerinatalWomanView : IPerinatalWoman
{
[Required(ErrorMessage = "The woman's postcode is required")]
    [Display(Name = "Woman's postcode")]
    [Remote("PostcodeCheck", "Validation", "Validation")]
    [RegularExpression("^[a-zA-Z]{1,2}[0-9][0-9A-Za-z]{0,1} [0-9][A-Za-z]{2}$", ErrorMessage = "A valid postcode is required")]
    public string Postcode { get; set; } 
```

视图片段是：

```
<div class="editor-label control-label">
  @Html.LabelFor(m => m.perinatalWomanView.Postcode)
</div>
div class="editor-field controls">
  @Html.EditorFor(m => m.perinatalWomanView.Postcode)
  @Html.ValidationMessageFor(m => m.perinatalWomanView.Postcode)
</div> 
```

验证控制器是：

```
public class ValidationController : Controller
{
    //
    // GET: /Validation/Validation/

    [HttpGet]
    public JsonResult PostcodeCheck(string Postcode)
    {

        //  postcode has already been checked for correct format
        //  now look it up to see if it exists

        string mbrraceCommonCodeEntitiesConnectionString = ConfigurationManager.ConnectionStrings["MbrraceCommonCodeEntities"].ConnectionString;
        if (PostcodeChecks.CheckPostcodeExists(mbrraceCommonCodeEntitiesConnectionString, Postcode))
        { return Json(true, JsonRequestBehavior.AllowGet); }

        return Json("This postcode was not found in the database", JsonRequestBehavior.AllowGet);

    } 
```

当控制器被调用时， Postcode 的值为空。来自 Firebug 的实际调用是：

```
http://localhost:57881/Validation/Validation /PostcodeCheck?perinatalWomanView.Postcode=OX4+1SU 
```

我如何正确读取邮政编码字符串参数，因为它显然不为空？

帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:17:25.097

你可以有一个像这样的视图模型：

```
public class AddressViewModel
{
    public string Postcode { get; set; }
} 
```

然后通过使用属性[`Prefix`](http://msdn.microsoft.com/en-us/library/system.web.mvc.bindattribute.prefix.aspx)装饰参数来指定：[`[Bind]`](http://msdn.microsoft.com/en-us/library/system.web.mvc.bindattribute.aspx)

```
[HttpGet]
public ActionResult PostcodeCheck(
    [Bind(Prefix = "perinatalWomanView")]AddressViewModel model
)
{
    // use model.Postcode here ...
} 
```

或者如果您不想使用该`Bind`属性，请使用以下模型：

```
public class MyViewModel
{
    public AddressViewModel PerinatalWomanView { get; set; }
}

public class AddressViewModel
{
    public string Postcode { get; set; }
} 
```

然后让您的控制器操作采用视图模型：

```
[HttpGet]
public ActionResult PostcodeCheck(MyViewModel model)
{
    // use model.PerinatalWomanView.Postcode here ...
} 
```

# jquery - 更改 jQuery 中的绑定事件

> ID：12781548
> 
> 赞同：0
> 
> 时间：2012-10-08T12:14:37.843
> 
> 标签：jquery, bind

我正在使用 jQuery 插件在鼠标悬停时叠加图像效果。因为我不想让它们仅在鼠标悬停时显示效果，而是在网站加载时直接显示，所以我正在尝试更改该代码：

```
//binding events for mouseover
$(this).parent().bind('click',function(){
    if(settings.hoverEffect=='normal')
    {
        ...... 
```

棘手的部分是：

```
$(this).parent().bind('click',function(){ 
```

我需要一种摆脱“点击”功能的方法，我试过“准备好”，但它不起作用。谁能帮我解决这个问题？我基本上只需要在页面加载时运行该功能，或者更好的是效果将应用于 (this).parent 的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:21:20.483

```
$(document).ready(function () {
    $(this).parent().bind('click',function(){
        if(settings.hoverEffect=='normal') {
            ......
        }
     });
     $(this).parent().trigger('click');
}); 
```

`trigger`模拟点击指定元素并触发该功能。这样做你不必创建双倍的功能

# c++ - ODBC 写入 blob 示例 Oracle C++

> ID：12781553
> 
> 赞同：2
> 
> 时间：2012-10-08T12:15:10.560
> 
> 标签：c++, oracle, insert, odbc, blob

您能给我一个`blob`使用 ODBC API 在 Oracle 数据库中插入 a 的 c++ 示例吗？这是我第一次使用`BLOB`类型，所以它对我来说是抽象的。我对互联网进行了很多研究，现在我脑子里一片混乱。一个例子真的会帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:27:30.763

我在 C 中有一个简短的（ish）示例。通过 ODBC 插入 blob 的基本原则是：

```
SQLPrepare("insert into mytable (mycolumne) values(?)");
SQLBindParameter(1, other_args, indicator SQL_LEN_DATA_AT_EXEC(size));
SQLExecute will return SQL_NEED_DATA
  call SQLParamData to find which parameter data is required for
  call SQLPutData as much as you like in chunks to insert data
  call SQLParamData again to find the next parameter requiring data 
```

在此处的示例代码中，您必须编写自己的 do_a_error() 函数，但它只调用 SQLGetDiagRec。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#if defined (WIN32)
# include <windows.h>
# include <io.h>
#else
# include <unistd.h>
#endif

#include <stdio.h>
#include <sql.h>
#include <sqlext.h>

#include "helper.h" /* contained do_a_error() defn etc - you won't have this header */

#ifdef WIN32
# define F_OK 0
# define W_OK 2
# define R_OK 4
# define access _access                          /* file check */
#endif

static SQLUINTEGER      array_row_counts;
static SQLUINTEGER      array_selects;
static SQLUINTEGER      static_ca1;
static SQLUINTEGER      static_ca2;

unsigned int            debug=0;
const char              fixed_data_source[] = "example";

#define TEST_FILE "easycd.jpg"
#define DISPLAY_GIF "/usr/X11/bin/xv"

static short insert_into_table(
    SQLHDBC *hdbc,
    typeinfo_t typeinfo);

/************************************************************************/
/*                                                                      */
/*  main                                                                */
/*  ====                                                                */
/*                                                                      */
/************************************************************************/
int main(int argc, char *argv[], char *envp[])
{
    SQLHENV         henv;                   /* environment handle */
    SQLHDBC         hdbc;                   /* database handle */
    char            *data_source_name;      /* chosen datasource */
    SQLRETURN       ret;                    /* function return status */
    char            in_connection_string[512]; /* SQLDriverConnect string */
    char            out_connection_string[512]; /* returned connection string */
    SQLSMALLINT     out_connection_string_len; /* ... and length */
    unsigned int        i;                      /* loop variable */
    typeinfo_t          typeinfo[100];          /* data type information */
    int                 type_element = -1;
    SQLINTEGER          max_column_size = 0;    /* largest column */

    /*
     *  Get the datasource name.
     */
    if (argc > 1)
    {
        for (i = 1; i < argc; i++)
        {
            if (!strcmp (argv[i], "-d")) debug = 1;
        }
        if (((argc > 2) && debug) ||
            ((argc > 1) && !debug))
            data_source_name = argv[argc - 1];
    }
    else
    {
        data_source_name = fixed_data_source;
    }
    sprintf(in_connection_string, "DSN=%s;", data_source_name);

    /*
     *  Allocate and set up the environment and connection.
     */
    if (SQLAllocHandle(SQL_HANDLE_ENV, NULL, &henv) != SQL_SUCCESS)
    {
        fprintf(stderr, "** Failed to allocate environment **\n");
        exit(1);
    }
    if (SQLSetEnvAttr(henv, SQL_ATTR_ODBC_VERSION,
                      (SQLPOINTER)SQL_OV_ODBC3, 0) != SQL_SUCCESS)
    {
        do_a_error(SQL_HANDLE_ENV, henv, "SQLSetEnvAttr");
        SQLFreeHandle(SQL_HANDLE_ENV, henv);
        exit(2);
    }
    if (SQLAllocHandle(SQL_HANDLE_DBC, henv, &hdbc) != SQL_SUCCESS)
    {
        do_a_error(SQL_HANDLE_ENV, henv, "SQLAllocHandle");
        SQLFreeHandle(SQL_HANDLE_ENV, henv);
        exit(3);
    }

    ret = SQLDriverConnect(hdbc, NULL,
                           (SQLCHAR *)in_connection_string, SQL_NTS,
                           (SQLCHAR *)out_connection_string,
                           sizeof(out_connection_string),
                           &out_connection_string_len, SQL_DRIVER_COMPLETE);
    if (!SQL_SUCCEEDED(ret))
    {
        do_a_error(SQL_HANDLE_DBC, hdbc, "SQLDriverConnect");
        SQLFreeHandle(SQL_HANDLE_DBC, hdbc);
        SQLFreeHandle(SQL_HANDLE_ENV, henv);
        exit(4);
    }
    if (out_connection_string_len > sizeof(out_connection_string))
    {
        out_connection_string[sizeof(out_connection_string) - 1] = '\0';
    }
    else
    {
        out_connection_string[out_connection_string_len] ='\0';
    }
    printf("%s\n", out_connection_string);
    if (ret == SQL_SUCCESS_WITH_INFO)
    {
        do_a_error(SQL_HANDLE_DBC, hdbc, "SQLDriverConnect");
    }
    /*
     *  Get a list of the types supported.
     */
    memset(typeinfo, '\0', sizeof(typeinfo));
    do_get_info(hdbc, &array_row_counts, &array_selects,
                &static_ca1, &static_ca2);

    if (!SQL_SUCCEEDED(do_type_info(hdbc, typeinfo)))
    {
        SQLFreeHandle(SQL_HANDLE_DBC, hdbc);
        SQLFreeHandle(SQL_HANDLE_ENV, henv);
        exit(5);
    }
    /*
     *  Find a type big enough for our gif image.
     */
    for (i = 0; strlen(typeinfo[i].type_name); i++)
    {
        if ((typeinfo[i].column_size > max_column_size) &&
            (max_column_size != SQL_NO_TOTAL))
        {
            max_column_size = typeinfo[i].column_size;
            type_element = i;
        }
        else
        {
            if (typeinfo[i].column_size == SQL_NO_TOTAL)
            {
                if (max_column_size != SQL_NO_TOTAL)
                {
                    max_column_size = SQL_NO_TOTAL;
                    type_element = i;
                }
            }
        }
    }
    if (type_element < 0) abort();
    if (debug)
        printf("\t Biggest type is %s at %ld in size, requiring \"%s\"\n",
               typeinfo[type_element].type_name,
               typeinfo[type_element].column_size,
               typeinfo[type_element].create_params);

    /*
     *  Delete existing table and create a new one.
     */
    ret = do_create_table(hdbc, "\"blob\"", CREATE_TABLE_BIGCOL,
                          typeinfo[type_element].column_size,
                          typeinfo[type_element].type_name,
                          typeinfo[type_element].create_params);
    if (!SQL_SUCCEEDED(ret))
    {
        SQLFreeHandle(SQL_HANDLE_DBC, hdbc);
        SQLFreeHandle(SQL_HANDLE_ENV, henv);
        exit(4);
    }

    insert_into_table(hdbc, typeinfo[type_element]);

    SQLDisconnect(hdbc);
    SQLFreeHandle(SQL_HANDLE_DBC, hdbc);
    SQLFreeHandle(SQL_HANDLE_ENV, henv);

    return 0;

}

/************************************************************************/
/*                                                                      */
/*  insert_into_table                                                   */
/*  =================                                                   */
/*                                                                      */
/************************************************************************/
static short insert_into_table(
    SQLHDBC *hdbc,
    typeinfo_t typeinfo)
{
    SQLINTEGER      len_ind[2];             /* parameter lengths */
    SQLINTEGER      p1;                     /* first parameter array */
    SQLCHAR         p2[50000];              /* second parameter array */
    SQLINTEGER          row_counts;             /* rows affected */
    SQLRETURN       ret;                    /* function status return */
    unsigned int        row;                    /* current row */
    SQLHSTMT            hstmt;                  /* statement handle */
    char                qbuf[1024];             /* query buffer */
    FILE                *fp;                    /* test file file ptr */
    size_t              readb;                  /* bytes read from test file */
    size_t              writeb;                 /* bytes written to test file */
    SQLINTEGER          retrieved;              /* data retrieved from GetData */
    unsigned int        pos;                    /* position in GetData buffer */

    printf("---------- insert_into_table ----------\n");
    printf("-- Creating rows with BIG column data --\n");

    if (access(TEST_FILE, R_OK))
    {
        fprintf(stderr, "Can't find test binary %s\n", TEST_FILE);
        return SQL_ERROR;
    }
    if (!(fp = fopen(TEST_FILE, "rb")))
    {
        fprintf(stderr, "Failed to open %s for reading\n", TEST_FILE);
        return SQL_ERROR;
    }
    clearerr(fp);
    readb = fread(p2, 1, sizeof(p2), fp);
    if ((readb == 0) || ferror(fp))
    {
        fprintf(stderr, "Failed to read data from %s\n", TEST_FILE);
        return SQL_ERROR;
    }
    if (readb >= sizeof(p2))
    {
        fprintf(stderr, "%s is too big a file\n", TEST_FILE);
        return SQL_ERROR;
    }
    fclose(fp);

    if (SQLAllocHandle(SQL_HANDLE_STMT, hdbc, &hstmt) != SQL_SUCCESS)
    {
        do_a_error(SQL_HANDLE_DBC, hdbc, "SQLAllocHandle");
        return SQL_ERROR;
    }
    /*
     *  Delete all the rows.
     */
    sprintf(qbuf, "delete from \"blob\"");
    printf("\"%s\"\n", qbuf);
    ret = SQLExecDirect(hstmt, (SQLCHAR *)qbuf, SQL_NTS);
    if (ret != SQL_SUCCESS)
        do_a_error(SQL_HANDLE_STMT, hstmt, "SQLExecDirect");

    /*
     *  Create the rows.
     */
    sprintf(qbuf, "insert into \"blob\" (a,b) values(?,?)");
    printf("\"%s\"\n", qbuf);
    if (SQLPrepare(hstmt, (SQLCHAR *)qbuf, SQL_NTS) != SQL_SUCCESS)
    {
        do_a_error(SQL_HANDLE_STMT, hstmt, "SQLPrepare");
        return SQL_ERROR;
    }

    /*
     *  Bind Parameters
     */
    ret = SQLBindParameter(hstmt, 1, SQL_PARAM_INPUT, SQL_C_LONG, SQL_INTEGER,
                           5, 0, &p1, 0, &len_ind[0]);
    if (!SQL_SUCCEEDED(ret))
    {
        do_a_error(SQL_HANDLE_STMT, hstmt, "SQLBindParameter");
        return ret;
    }
    ret = SQLBindParameter(hstmt, 2, SQL_PARAM_INPUT, SQL_C_BINARY,
                           typeinfo.sql_data_type,
                           sizeof(p2), 0, (SQLPOINTER)2, 0,
                           &len_ind[1]);
    if (!SQL_SUCCEEDED(ret))
    {
        do_a_error(SQL_HANDLE_STMT, hstmt, "SQLBindParameter");
        return ret;
    }
    printf("\tInserting rows into table\n");
    for (row = 0; row < 1; row++)
    {
        /* a */
        p1 = row;
        len_ind[0] = sizeof(p1);

        /* b */
        len_ind[1] = SQL_LEN_DATA_AT_EXEC(readb);

        ret = SQLExecute(hstmt);
        if (ret == SQL_NEED_DATA)
        {
            SQLPOINTER  val;

            ret = SQLParamData(hstmt, &val);
            if (ret != SQL_NEED_DATA)
            {
                fprintf(stderr,
                        "** SQLParamData returned %d, "
                        "expected SQL_NEED_DATA **\n", ret);
                do_a_error(SQL_HANDLE_STMT, hstmt, "SQLParamData");
                return SQL_ERROR;
            }
            if (val != (SQLPOINTER)2)
            {
                fprintf(stderr,
                        "** SQLParamData said it required data for parameter "
                        "marker %p, and we expected 2 **\n", val);
                return SQL_ERROR;
            }
            ret = SQLPutData(hstmt, p2, readb);
            if (!SQL_SUCCEEDED(ret))
            {
                do_a_error(SQL_HANDLE_STMT, hstmt, "SQLPutData");
                return SQL_ERROR;
            }
            ret = SQLParamData(hstmt, &val);
            if (!SQL_SUCCEEDED(ret))
            {
                fprintf(stderr,
                        "** Second SQLParamData returned %d, "
                        "We though all data was sent **\n", ret);
                do_a_error(SQL_HANDLE_STMT, hstmt, "SQLParamData");
                return SQL_ERROR;
            }
        }
        else if (!SQL_SUCCEEDED(ret))
        {
            fprintf(stderr,
                    "** Driver returned a successful state for SQLExecute "
                    "buf there were data-at-exec parameters **\n");
            do_a_error(SQL_HANDLE_STMT, hstmt, "SQLExecute");
            return SQL_ERROR;
        }
        else
        {
            do_a_error(SQL_HANDLE_STMT, hstmt, "SQLExecute");
        }
        if (!SQL_SUCCEEDED(SQLRowCount(hstmt, &row_counts)))
        {
            do_a_error(SQL_HANDLE_STMT, hstmt, "SQLRowCount");
        }
        if (row_counts != 1)
        {
            fprintf(stderr, "** RowCount=%ld, expected 1 **\n", row_counts);
        }

        printf(".");
        fflush(stdout);
    }
    printf("\n");

    /*
     *  Now get it back to check we sent it OK.
     */
    memset(p2, '\0', sizeof(p2));
    sprintf(qbuf, "select * from \"blob\"");
    if (!SQL_SUCCEEDED(ret = SQLPrepare(hstmt, (SQLCHAR *)qbuf, SQL_NTS)))
    {
        do_a_error(SQL_HANDLE_STMT, hstmt, "SQLPrepare");
        return SQL_ERROR;
    }
    if (!SQL_SUCCEEDED(ret = SQLExecute(hstmt)))
    {
        do_a_error(SQL_HANDLE_STMT, hstmt, "SQLExecute");
    }
    if (!SQL_SUCCEEDED(ret = SQLFetch(hstmt)))
    {
        do_a_error(SQL_HANDLE_STMT, hstmt, "SQLFetch");
    }
    pos = 0;
    while(SQL_SUCCEEDED(ret = SQLGetData(hstmt, 2, SQL_C_BINARY,
                                         &p2[pos], sizeof(p2), &retrieved)))
    {
        if (retrieved == SQL_NO_TOTAL) abort();
        if (retrieved == SQL_NULL_DATA) abort();
        pos += retrieved;
    }
    if (ret != SQL_NO_DATA)
    {
        fprintf(stderr,
                "** SQLGetData finished with a status other than SQL_NO_DATA **\n");
        do_a_error(SQL_HANDLE_STMT, hstmt, "SQLGetData");
        return SQL_ERROR;
    }
    if (!SQL_SUCCEEDED(SQLCloseCursor(hstmt)))
    {
        do_a_error(SQL_HANDLE_STMT, hstmt, "SQLCloseCursor");
    }

    if (!(fp = fopen("out.jpg", "w")))
    {
        fprintf(stderr, "** Failed to open out.jpg for writing **\n");
        return SQL_ERROR;
    }
    writeb = fwrite(p2, 1, pos, fp);
    if (writeb != pos)
    {
        fprintf(stderr, "** Failed to write out.jpg **\n");
        return SQL_ERROR;
    }
    fclose(fp);
    system(DISPLAY_GIF" out.jpg");

    printf("\tResetting parameters\n");
    if (!SQL_SUCCEEDED(SQLFreeStmt(hstmt, SQL_RESET_PARAMS)))
    {
        do_a_error(SQL_HANDLE_STMT, hstmt, "SQLFreeStmt");
    }

    printf("\tClosing statement\n");
    if (!SQL_SUCCEEDED(SQLFreeStmt(hstmt, SQL_CLOSE)))
    {
        do_a_error(SQL_HANDLE_STMT, hstmt, "SQLFreeStmt");
    }

    printf("\tDropping Statement\n");
    ret = SQLFreeStmt(hstmt, SQL_DROP);
    if (!SQL_SUCCEEDED(ret))
    {
        do_a_error(SQL_HANDLE_STMT, hstmt, "SQLFreeStmt");
    }

    return ret;
} 
```

# jquery - Jquery：如何创建一个简单的 AJAX 图像滑块

> ID：12781554
> 
> 赞同：1
> 
> 时间：2012-10-08T12:15:16.080
> 
> 标签：jquery

> **可能重复：**
> [jQuery/Ajax：图像滑块](https://stackoverflow.com/questions/7252497/jquery-ajax-image-slider)

我是 Jquery 的新手，但我想要创建一个简单的滑块，用 Ajax 加载图像。

*   如何**创建循环**
*   如何设置循环时间速度
*   如何使用 Ajax 请求加载图像

假设我有一个 index.php ：

```
<div id="output"></div>

 <script type="text/javascript">
    //<![CDATA[

    jQuery(document).ready(function($) {

        $.ajax({
            type: "POST",
            url: "<?php echo $this->getUrl('somewhere/index/testajax') ?>",
            data: "id=1",
            success: function(response){
                $("#output").html(response);
            }
        });
    });
    //]]> 
```

如何创建一个复制 AJAX 调用的循环？

# facebook - Facebook 实时更新多个帖子

> ID：12781557
> 
> 赞同：0
> 
> 时间：2012-10-08T12:15:31.127
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, real-time-updates

我正在 Facebook 上对我的应用程序进行一些测试，其中一项测试是连续发布大量帖子，以查看应用程序的行为，但有些帖子没有触发实时更新事件，而其他帖子是弄错现场时间。

> 示例：我收到的一个事件带有 time=1349694666，但在 Facebook 表中显示为 1349694665，因此当我对其进行查询时，它不会返回提要。

你们能知道为什么，或者你能指出我的答案吗？

问候，
埃尔卡斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:42:03.623

这很简单。不要对表状态执行 FQL，而是对流一执行。这些价值观一直都在，至少对我来说直到现在。

# tomcat - MaxClient (httpd)、maxThreads (tomcat) 和 acceptCount (tomcat)

> ID：12781563
> 
> 赞同：1
> 
> 时间：2012-10-08T12:15:55.877
> 
> 标签：tomcat, apache2, apache, httpd.conf, mod-jk

在我的项目中，我确实有 2 个 Web 服务器 (httpd) 和两个应用程序服务器 (tomcat)。每个 httpd 和 tomcat 都在不同的机器上。DNS（硬件）对两个 Web 服务器的请求进行均衡负载，如果任何 httpd 关闭，所有请求都会转到活动的 httpd。每个 Web 服务器都可以将请求转发给任何一个 tomcat。带有 httpd 的 mod jk 连接器在两个 tomcat 之间平均分配负载。如果一个 tomcat 出现故障，所有请求都会转到活动的 tomcat。

我的问题与 apache 参数的调整有关。在这两个 tomcat 上，我都设置了**acceptCount 100**和**maxThreads 260**。在每个 httpd 上，**MaxClient**的值为**360** (260+100)。请让我知道这些参数的上述值是否对您来说是可行的。或者我能做些什么更好的事情？

提前谢谢了。如果需要更多信息，请告诉我。

# sencha-touch - Sencha 生产版本适用于计算机浏览器，但不适用于手机？

> ID：12781564
> 
> 赞同：0
> 
> 时间：2012-10-08T12:15:56.143
> 
> 标签：sencha-touch, extjs, mobile-application

我正在尝试创建一个生产版本来将我的应用程序作为 Web 应用程序运行。起初我在尝试进行生产构建时遇到了一大堆错误，但我已经解决了这些错误，现在它在我的计算机 Web 浏览器中构建和运行，没有错误（控制台中没有错误或警告）。一切正常运行。

但是，当我尝试通过手机上的浏览器（iPhone、Safari）访问它时，除了蓝屏之外什么也没有。如果我上传整个（未缩小的）项目，我可以将它加载到我的手机上（大约 2 分钟后），但当我运行“sencha app build production”或“sencha app build testing”时不能。

知道可能是什么原因造成的，或者我该如何找出答案？

谢谢！

# postgresql - 加载共享库时出错：libpq.so.5：无法打开共享对象文件：没有这样的文件或目录

> ID：12781566
> 
> 赞同：36
> 
> 时间：2012-10-08T12:16:02.180
> 
> 标签：postgresql, debian

我正在尝试`pg_dump`在 Debian 上运行的 PostgreSQL 9.0.4 服务器上执行，但出现以下错误：

```
./pg_dump: error while loading shared libraries: libpq.so.5: cannot open shared object file: No such file or directory 
```

`libpq.so.5`是一个链接，`libpq.so.5.3`如下所示

```
lrwxrwxrwx 1 root root     12 Jun 27 16:24 libpq.so.5 -> libpq.so.5.3
-rwxr-xr-x 1 root root 180749 Jun 21 02:43 libpq.so.5.3 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2015-03-12T13:48:01.343

尝试这个：

1：了解路径`libpq.so.5`

```
find / -name libpq.so.5 
```

输出示例： `/usr/pgsql-9.4/lib/libpq.so.5` 如果什么也没找到，请检查您是否已经为您的 postgresql 版本和操作系统平台安装了合适的 postgresql-libs

2：该库在“众所周知”的库路径中的符号链接，例如`/usr/lib`：

```
ln -s /usr/pgsql-9.4/lib/libpq.so.5 /usr/lib/libpq.so.5 
```

注意：如果您的平台是 64 位，您还必须符号链接到 64 位库路径：

```
ln -s /usr/pgsql-9.4/lib/libpq.so.5 /usr/lib64/libpq.so.5 
```

3：开心！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-08T12:18:39.537

这些`libpq`文件在哪个目录中？您可以尝试将环境变量设置`LD_LIBRARY_PATH`为指向此目录或确保它位于标准位置。

另外，为什么`libpq.so.5`“如下所示”部分中没有显示链接？也许你应该跑`ldconfig`？

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-10-23T07:00:01.223

我在 RHEL 6.5 上的 Postgres 9.5 上收到了相同的错误消息，这导致了我这篇文章。但是对该文件的查找`libpq.so.5`没有返回任何内容，这让事情变得更加混乱。

最后，以下符号链接使其运行

```
ln -s /opt/rh/rh-postgresql95/root/usr/lib64/libpq.so.rh-postgresql95-5  /usr/lib64/libpq.so.rh-postgresql95-5 
ln -s /opt/rh/rh-postgresql95/root/usr/lib64/libpq.so.rh-postgresql95-5  /usr/lib/libpq.so.rh-postgresql95-5 
```

这些路径适用于 RHEL，用于`find / -name libpq.so`定位您的安装并将其添加到相同的目标文件夹`/usr/lib/`并`/usr/lib64/`使用原始文件名。

根本原因似乎是安装没有将此文件放入共享位置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-09-20T21:10:24.757

`$LD_LIBRARY_PATH`由于未设置环境变量，可能会发生此错误。

当您使用前缀 ( ) 从源代码安装应用程序时`./configure --prefix=/some/path`，您必须告知您的`lib/`路径在哪里。我刚刚找到了一个[解决方案](https://stackoverflow.com/a/45679500/4094939)，并将这个变量添加到 postgres 用户初始化 bash 脚本中：

```
printf 'export PATH=$PATH:/opt/apl/pgsql/bin\nexport LD_LIBRARY_PATH=/opt/apl/pgsql/lib:$LD_LIBRARY_PATH\n' > /etc/profile.d/postgres.sh 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-11T14:34:56.677

redhat 7 安装后缺少几个步骤`yum install pgadmin4`：

```
sudo ln -s /usr/lib64/pgdg-libpq5/lib/libpq.so /usr/lib64/libpq.so.5
sudo ln -s /usr/lib64/pgdg-libpq5/lib/libpq.so /usr/lib/libpq.so.5
sudo chown -R apache:apache  /var/lib/pgadmin4/ 
```

然后你可以运行

```
sudo python3 /usr/lib/python3.6/site-packages/pgadmin4-web/setup.py 
```

如果一切顺利：

```
systemctl start httpd
systemctl status httpd
apachectl configtest 
```

并确保 httpd 启动正常

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-04-05T07:35:28.783

我在安装 pg 9.6 时遇到了完全相同的问题。我是这样修好的。相当恼人的是安装程序没有考虑到这一点。

```
***********post yum install & running initdb *********
Success. You can now start the database server using:

    /opt/rh/rh-postgresql96/root/usr/bin/pg_ctl -D /var/opt/rh/rh-postgresql96/lib/pgsql/data -l logfile start

-bash-4.2$ /opt/rh/rh-postgresql96/root/usr/bin/pg_ctl -D /var/opt/rh/rh-postgresql96/lib/pgsql/data -l logfile start
/opt/rh/rh-postgresql96/root/usr/bin/pg_ctl: **error while loading shared libraries: libpq.so.rh-postgresql96-5: cannot open shared object file: No such file or directory**

-bash-4.2$ id
uid=26(postgres) gid=26(postgres) groups=26(postgres) context=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023

**************
-bash-4.2$ cat LibFix
ln -s /opt/rh/rh-postgresql96/root/usr/lib64/libpq.so.rh-postgresql96-5  /usr/lib64/libpq.so.rh-postgresql96-5
ln -s /opt/rh/rh-postgresql96/root/usr/lib64/libpq.so.rh-postgresql96-5  /usr/lib/libpq.so.rh-postgresql96-5
**************

[root@****lab ~]# ln -s /opt/rh/rh-postgresql96/root/usr/lib64/libpq.so.rh-postgresql96-5  /usr/lib64/libpq.so.rh-postgresql96-5
[root@****lab ~]# ln -s /opt/rh/rh-postgresql96/root/usr/lib64/libpq.so.rh-postgresql96-5  /usr/lib/libpq.so.rh-postgresql96-5

[root@****lab ~]# su - postgres
Last login: Thu Apr  5 08:57:21 CEST 2018 on pts/0

-bash-4.2$ /opt/rh/rh-postgresql96/root/usr/bin/pg_ctl -D /var/opt/rh/rh-postgresql96/lib/pgsql/data -l logfile start
server starting

-bash-4.2$ ps -ef | grep postgres
root     12778  7883  0 09:07 pts/0    00:00:00 su - postgres
postgres 12779 12778  0 09:07 pts/0    00:00:00 -bash
postgres 12802     1  0 09:08 pts/0    00:00:00 /opt/rh/rh-postgresql96/root/usr/bin/postgres -D /var/opt/rh/rh-postgresql96/lib/pgsql/data
postgres 12803 12802  0 09:08 ?        00:00:00 postgres: logger process
postgres 12805 12802  0 09:08 ?        00:00:00 postgres: checkpointer process
postgres 12806 12802  0 09:08 ?        00:00:00 postgres: writer process
postgres 12807 12802  0 09:08 ?        00:00:00 postgres: wal writer process
postgres 12808 12802  0 09:08 ?        00:00:00 postgres: autovacuum launcher process
postgres 12809 12802  0 09:08 ?        00:00:00 postgres: stats collector process
postgres 12810 12779  0 09:08 pts/0    00:00:00 ps -ef

-bash-4.2$ id
uid=26(postgres) gid=26(postgres) groups=26(postgres) context=unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023
-bash-4.2$ psql
psql (9.6.5)

postgres=# \conninfo

You are connected to database "postgres" as user "postgres" via socket in "/var/run/postgresql" at port "5432". 
```

# wpf - 在组合框上设置默认字符串名称

> ID：12781576
> 
> 赞同：0
> 
> 时间：2012-10-08T12:16:34.520
> 
> 标签：wpf, xaml, combobox, wpf-controls

我正在使用一个 Combobox，它的 ItemSource 是 ObservableCollection(ie ConversationList) 类型。

```
<ComboBox x:Name="ConvId"
                  Grid.Row="2"
                  Width="75"
                  Height="23"
                  Margin="6,94,0,0"
                  HorizontalAlignment="Left"
                  VerticalAlignment="Top"
                  ItemsSource="{Binding ConversationList,
                                        UpdateSourceTrigger=PropertyChanged}"
                  SelectedItem="{Binding SelectedId,
                                         Mode=TwoWay}"> 
```

我的要求是：当 Collection 中没有 int 值时，Combobox 左侧应显示“ConvId ![在此处输入图像描述](../Images/54711ff49ab46b55bdc5220d5ccdcb15.png)”，这是一个字符串。图如下所示

我有解决方法，即将集合从 int 转换为字符串并将“ConvId”放在第 0 个位置并标记 SelectedIndex=0。但这不是我们想要的。我是否必须为此使用一些自定义控件。有没有什么可以在 XAML 中实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:38:54.360

这个 Stack 线程似乎用转换器干净地做你想做的事。 [如何在 WPF 页面加载的组合框中显示默认文本“--Select Team --”？](https://stackoverflow.com/questions/1426050/how-to-display-default-text-select-team-in-combo-box-on-pageload-in-wpf)

我所指的答案是从这个开始的：

```
<Grid>
    <ComboBox
        x:Name="comboBox1"
        ItemsSource="{Binding MyItemSource}"  />
    <TextBlock
        Visibility="{Binding SelectedItem, ElementName=comboBox1, Converter={StaticResource NullToVisibilityConverter}}"
        IsHitTestVisible="False"
        Text="... Select Team ..." />
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:46:43.117

在您的组合框下方有下面的文本块，并确保组合框和文本块相互重叠（即它们应该在同一网格行中）

```
<TextBlock Text="ConvID"
           IsHitTestVisible="False">
                <TextBlock.Style>
                    <Style
                            TargetType="TextBlock">
                        <Setter
                                Property="Visibility"
                                Value="Collapsed" />
                        <Style.Triggers>
                            <DataTrigger
                                    Binding="{Binding ConversationList.Count}"
                                    Value="0">
                                <Setter
                                        Property="Visibility"
                                        Value="Visible" />
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
                </TextBlock> 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T06:31:08.360

看看 John Myczek 的[WatermarkService](https://stackoverflow.com/questions/833943/watermark-textbox-in-wpf/836463#836463)。如果在 ComboBox 中未选择任何项目，您可以让它显示默认字符串。在我链接到的答案中，ComboBox 存在一些问题，但是如果您进一步往下看，则可以解决此问题。

# android - 重命名应用程序

> ID：12781577
> 
> 赞同：0
> 
> 时间：2012-10-08T12:16:42.990
> 
> 标签：android, eclipse

我在 android 中创建了一个名为“myProject”的示例项目。但是，当我在手机中安装我的手机名称时，例如“com.project.myProject”。知道如何重命名它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T12:22:03.177

打开您的 AndroidManifest.xml。

设置应用程序名称的属性是`android:label`.

您可以在 2 个节点中使用它：

*   首先是在`<application>`. 它在 Android 设置的“应用程序”部分中定义了您的应用程序的名称。
*   二是在`<activity>`。定义您拥有 LAUNCHER 类别的名称以在抽屉中设置应用程序标题。

请注意 Eclipse`@string/app_name`默认使用这些值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:19:33.597

转到您找到应用程序名称的这个 strings.xml 文件，然后您可以更改它。

安卓`Project > res -> values -> strings.xml -> <string name="app_name">`

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:23:19.947

如果您的根文件夹中有 build.xml 文件，则`project`像这样更改节点的属性：

```
<project name="YOUR_APP_NAME" default="help"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T12:23:55.663

转到项目的 Values 文件夹，您将找到一个 strings.xml 文件，将应用程序的任何名称赋予“app_name”属性，并将相同的属性设置为应用程序选项卡中的 manifest.xml 文件。希望这会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T12:27:05.640

转到 app 的 res 文件夹和 Value 文件夹的 strings.xml 文件中，有一个元素 app_name 用于 Android 清单文件中的 level 字段作为应用程序名称。您将更改 app_name 的名称，因为您想显示应用程序名称并保存然后运行应用程序。

# jquery - 敲除文本框的访问键

> ID：12781580
> 
> 赞同：0
> 
> 时间：2012-10-08T12:17:02.443
> 
> 标签：jquery, knockout.js

我正在将我的淘汰赛用于我的 html 控件

```
<!-- ko foreach: myMode().tasks -->
<input class="txtbox-size" type="text" data-bind="value: taskname" />
<!-- /ko --> 
```

我需要单独为第一个文本框设置访问密钥。当我尝试将其添加到 doucument.ready

```
 var Target = $('.txtbox-size:first'); 
```

并尝试为 Target 设置属性，但它已应用于所有文本框。任何人都可以告诉我为什么会这样。ko 有没有办法单独为第一个文本框设置访问密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:33:55.090

您可以使用`$index`object 检测第一个标签，然后使用`attr`绑定：

```
<!-- ko foreach: myMode().tasks -->
<input type="text" data-bind="value: taskname, attr: { accesskey: $index() == 0? 'Your Access Key': ''}"/>
<!-- /ko --> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:40:59.110

Artem 很接近，但我认为，因为这是一个 html 属性，knockout 没有本机支持，所以你必须使用[`attr`](http://knockoutjs.com/documentation/attr-binding.html)

```
<!-- ko foreach: myMode().tasks -->
<input type="text" data-bind="value: taskname, attr: { 'accesskey': $index() == 0? 'Your Access Key': '' }"/>
<!-- /ko --> 
```

# asp.net - jquery ajax调用后如何重新加载asp.net GridView？

> ID：12781581
> 
> 赞同：2
> 
> 时间：2012-10-08T12:17:15.467
> 
> 标签：asp.net, web-services, jquery, webforms

我有 GridView、文本框、一个 html 按钮。它所做的是文本框包含一个值，该值将在单击 html 按钮后保存在数据库中。

```
Here is the code for the page:

<div>
        <div id="Gridview-container">
            <asp:GridView ID="GridView1" runat="server">
            </asp:GridView>
        </div>
        <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
        <input type="button" id="btn" value="insert" />

    </div>
    </form>

    <script type="text/javascript">

        $("#btn").click(function () {
            var a = $("#TextBox1").val();

            $.ajax({
                url: 'WebService.asmx/insert',
                data: "{ 'name': '" + a + "' }",
                dataType: "json",
                contentType: "application/json; charset=utf-8",
                type: "POST",
                success: function () {

                    //alert('insert was performed.');
                    $("#Gridview-container").empty();

                }
            });

        });

    </script> 
```

这是该页面背后的代码：

```
public partial class GridViewCourses : System.Web.UI.Page
{
    Database db = new Database();

    protected void Page_Load(object sender, EventArgs e)
    {
        GridView1.DataSource = db.LoadCourses();
        GridView1.DataBind();
    }
} 
```

这是网络服务的代码：

```
public class WebService : System.Web.Services.WebService {

    public WebService () {

        //Uncomment the following line if using designed components 
        //InitializeComponent(); 

    }

    [WebMethod]
    public string HelloWorld() {

        return "Hello World";
    }

    [WebMethod]
    public void insert(string name)
    {
        Database db = new Database();
        db.Add(name);
    }

} 
```

我想要与 GridView.DataBind() 具有相同效果的东西，这样当我执行删除和更新时，GridView 会根据数据库中的记录重新加载。

先生/女士，您的回答会很有帮助。谢谢++

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:39:01.273

您可以使用 an`UpdatePanel`并将其`GridView`放入其中。然后，为了从 javascript 中发起回发，您必须使用`__doPostBack`并定位您的 UpdatePanel。

这里的一些信息应该可以帮助您实现这一点：[http ://encosia.com/easy-refresh-an-updatepanel-using-javascript/](http://encosia.com/easily-refresh-an-updatepanel-using-javascript/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:55:38.173

您必须将 GridView 放在更新面板中并以某种方式从客户端刷新它。如果您想在客户端做所有事情，您可以重新发明轮子并使用 jTables 之类的东西并创建自己的网格，但我不建议这样做

1.  您可以使用`__doPostback`Javascript
2.  或者在您的页面上放置一个隐藏的按钮字段并在您的关闭按钮客户端调用其点击事件，例如

> document.getElementById('yourButton').click();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-04T15:20:04.163

我意识到它有点老论坛。但是，我在按钮上使用 UseSubmitBehavior = false 。当然，使按钮成为 asp:Button。并且，声明 Onclick 和 OnClientClcik 事件。这样，它会首先触发 onclientclick 事件，然后触发 onclick 事件。

斯里兰卡

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T12:45:44.523

您以单独的方法编写 gridview 绑定代码。像这样

```
public void dataBind() 
```

{

```
GridView1.DataSource = db.LoadCourses();
GridView1.DataBind(); 
```

}

```
[WebMethod]
public void insert(string name)
{
    Database db = new Database();
    db.Add(name);
    //after successful insertion call dataBind

    dataBind() //this method will update the grdivew with new data

} 
```

如果需要，可以在代码隐藏中将 webmethod 定义为 pagemethod。

希望这可以帮助..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-20T07:21:34.440

将下面的行添加到 jQuery 的末尾：

```
$("#YourGridView").load(location.href + " #YourGridView"); 
```

# wix - WIX：从一个 textbox1 中获取文本并将其连接到 textbox2 中的其他文本

> ID：12781582
> 
> 赞同：-2
> 
> 时间：2012-10-08T12:17:17.453
> 
> 标签：wix

我有这两个文本框：

```
<Control Id="textBox1" Type="Edit" Height="15" Width="180" X="150" Y="133" Property="P1" />

<Control Id="textBox2" Type="Edit" Height="15" Width="180" X="150" Y="158" Property="P2" />

<Property Id="P1" Value="" Secure="yes" Hidden="yes"/>
<Property Id="P2" Value="x" Secure="yes" Hidden="yes"/> 
```

一旦用户在 textbox1 中输入内容，我想从 textbox1 获取文本并将其连接到 textbox2。有谁知道如何做到这一点？

例如：textbox1：p textbox2：xp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:00:21.973

```
 <SetProperty Id="P1" Value="[P2]" After="LaunchConditions"></SetProperty> 
```

尝试它可能会工作..在适合您的安装程序的任何地方对其进行排序..:) 您是否正在寻找要立即更新的文本框，据我所知这是不可能的，因此双对话框将是您实现目标的最佳选择正在寻找。

# iphone - 在 Xcode 4.5 中向项目添加逻辑测试

> ID：12781589
> 
> 赞同：1
> 
> 时间：2012-10-08T12:17:38.913
> 
> 标签：iphone, objective-c, xcode, unit-testing

我正在使用 xcode 4.5 并尝试将逻辑测试添加到项目中。（这实际上是一个测试，新创建的项目没有单元测试）。我正在关注本指南： http: [//developer.apple.com/library/mac/#documentation/developertools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html](http://developer.apple.com/library/mac/#documentation/developertools/Conceptual/UnitTesting/02-Setting_Up_Unit_Tests_in_a_Project/setting_up.html) 所以，到目前为止我做了什么：

1.  创建了一个新项目（基于视图的应用程序模板）
2.  点击 File -> New- CocoaTouchUnitTestBundle 就是这样。测试（如文档所述）已准备好使用。但我有以下问题： SenTestinKit.framework 显示为红色 ![在此处输入图像描述](../Images/0b65dde61a7a4d369a6503a1b3a332b8.png)

如果我按下测试按钮问题导航器什么也不显示： ![在此处输入图像描述](../Images/0222e2ba89531363b16182b93bb0e3a8.png)

如果我在这里选择另一个调试器（默认为 LLDB，尝试选择 GDB）：

![在此处输入图像描述](../Images/f8da61ffe91adbb2c24b50ce64e588ea.png)

Xcode 只是闲逛： ![在此处输入图像描述](../Images/cd0dc8eb3e8c7e2bc02c012a79617d58.png)

PS我还尝试删除 SenTestingKit.framework （红色）并添加新的。没有改变。

我究竟做错了什么 ？？我想看到这样的东西（来自苹果指南的截图）： ![在此处输入图像描述](../Images/ed6fd05d439b661950bc90c2e62064fb.png)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-08T14:34:26.890

实际上，您的代码现在可以工作了。

我不知道为什么 Xcode 在您创建测试包时最初没有正确添加 SenTestingKit 框架。

但是现在为您自动生成的代码“testExample”正在运行，它通过给您一个错误来告诉您添加一些真实的测试。这就是 STFail 所做的。

所以，如果你去掉那条线，开始编写你自己的测试，你应该没问题。

# php - CURL 在不同时间为同一页面返回响应代码 200 和 0

> ID：12781590
> 
> 赞同：1
> 
> 时间：2012-10-08T12:17:40.383
> 
> 标签：php, http, codeigniter, url, curl

我正面临一种不寻常的卷曲行为。对于给定的页面，有时我得到 HTTP 响应代码为 200，有时我得到 0 作为 HTTP 响应代码。我无法理解此页面是否有效。如果您尝试给定的代码，请尝试至少 5-10 次，以便您看到差异。

```
function print_info()
{
    $url = 'bart.no';
    $arr = array(
    'bart.no',
    'bolandirekt.nu',
    'ekompassen.com',
    'ekompassen.nu',
    );

    foreach ($arr as $url)
    {
        echo "<br/>URL: " . $url;
        $temp = str_replace(array("www.", "http://", "https://"), "", strtolower($url));

        // From this array it will be decided which is to prepend
        $pre_array = array("", "www.", "https://", "http://", "https://www.", "http://www.");
        $status_code = array();

        // For each Value Status will be stored
        foreach ($pre_array as $pre)
        {

            $options = array(
                CURLOPT_RETURNTRANSFER => TRUE, // return web page
                CURLOPT_HEADER => TRUE, // don't return headers
                CURLOPT_FOLLOWLOCATION => FALSE, // follow redirects
                CURLOPT_ENCODING => "", // handle all encodings
                CURLOPT_USERAGENT => "spider", // who am i
                CURLOPT_AUTOREFERER => FALSE, // set referer on redirect
                CURLOPT_SSL_VERIFYHOST => FALSE, //ssl verify host
                CURLOPT_SSL_VERIFYPEER => FALSE, //ssl verify peer
                CURLOPT_NOBODY => FALSE,
                CURLOPT_CONNECTTIMEOUT => 20, // timeout on connect
                CURLOPT_TIMEOUT => 20, // timeout on response
            );

            // Initializing Curl
            $ch = curl_init($pre . $temp);
            // Set Curl Options
            curl_setopt_array($ch, $options);
            // Execute Curl
            $content = curl_exec($ch);

            $code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
            echo "<pre/>";
            if ($code == 200)
            {
                print_r(curl_getinfo($ch));
                break;
            }           
                            curl_close($ch);
        }
    }
} 
```

所以我的最后一个疑问是：为什么我会为不存在或未在浏览器中打开的页面获得响应代码 200？另外，即使我保持请求之间的时间间隔，为什么有时我会得到同一页面的响应代码 0 和有时响应代码 200？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:31:13.140

CURL 请求未完成，因此没有响应代码。其原因可能是无效的主机名（无法解析）、格式错误的 URL、超时等。

您应该能够在 CodeCaster 的评论和 curl_error / curl_errno 文档中获得 CURL 错误代码。

一旦 CURL 请求正确完成，响应代码（来自服务器）应该可用且有意义。

# javascript - 如何更改动态创建的按钮调用的函数？

> ID：12781596
> 
> 赞同：1
> 
> 时间：2012-10-08T12:18:11.367
> 
> 标签：javascript, function, button, input

当我遇到问题时，我正在用 JavaScript 制作一个小游戏。在这个游戏中，我使用 for() 循环创建了一百个按钮。最终，我希望每个按钮都调用一个名为“click”的函数并向其发送一个 int，以便它知道按下了哪个按钮。因此，例如，当按下按钮四时，就会调用 click(4)。首先我尝试了这个：

```
object.onclick = "click(4)"; 
```

这显然没有用，所以我搜索了互联网并在您的网站上找到了这个问题的答案。

```
object.onclick = function() {click("4");} 
```

我试过了（最后有和没有';'），但它似乎不起作用。

虚拟代码的更完整概述：

```
<script type="text/javascript">
   document.getElementById('myContainer').innerHTML += '<input id="tmp" type="button" value="button">';
   documengetElementById('tmp').onclick = function() {tmpFunc("bla");}

function tmpFunc(vari){
   alert(vari);
}

</script> 
```

**元素 myContainer 是 100% 空的！**

请记住，这只是用于尝试的虚拟代码。我可以更轻松地做到这一点，但我首先尝试简化它，这样您就不必查看我凌乱的代码。

**那么从您在 for 循环中创建的按钮调用函数的最佳方法是什么？**如果您知道一种与我使用的方法完全不同的方法，只需发布​​它，我不在乎它是如何解决的！虽然我也希望有人解释为什么这不起作用。

希望我没有问一个已经回答的问题，据我所知，我正在使用在另一篇文章中为这个问题提供的解决方案。

**- - - - - - 更新 - - - - - - -**

在得到某人的回答后稍微改变了它。这是当前代码，按下按钮时不会执行 select()。这是完整的 JavaScript 代码，因此如果您想使用它，可以复制粘贴它。

```
<script type="text/javascript">

function addButtons(){

    var disabled = false;

    for(var i = 1; i <= 100; i++){

        currentButton = '<input id="tmp" type="button" onclick="select(\''+i+'\')">'
        document.getElementById('myContainer').innerHTML += currentButton;
        document.getElementById('tmp').id = 'btn'+i;
        gb(i).disabled = disabled;
        gb(i).style.width = "60px";
        gb(i).style.height = "60px";
        gb(i).style.fontSize = "25pt";

        function alerts(nr){
            alert("test");
        }

        if(i%10 == 0){
            document.getElementById('myContainer').innerHTML = document.getElementById('myContainer').innerHTML + '<br />';
        }else{
            if(disabled){
                disabled = false;
            }else{
                disabled = true;
            }
        }

        if(i == 60){
            gb(i).value = 'O';
            gb(i).style.color = "blue";
        }

        if(((i-1)%10 == 0) && !(gb(i).disabled)){
            gb(i).value = 'X';
            gb(i).style.color = "red";
        }
    }
}

function select(nr){
    alert("Bla!"+nr);
    gb(nr).style.height = "100px";
}

function gb(ButtonNrVanHetButton){
    return document.getElementById('btn'+ButtonNrVanHetButton);
}

addButtons();

</script> 
```

大多数部分对于解决问题（风格等）并不是很有趣。它应该看起来像一个棋盘。

**- - - - - - 更新 - - - - - - -**

**解决了！**不要使用 javascript 库已经用于其他内容的函数，例如：'select()'。感谢所有试图提供帮助的人！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T12:27:42.113

如果您正在循环创建按钮，为什么不向按钮添加 onclick 呢？

例如

```
<script>
// your function
function tmpFunc(vari)
{
   alert(vari);
}
// end your function

// define xBUTTONS
xBUTTONS = '';
for (i=0; i<100; i++)
{
    // loop buttons
    xBUTTONS += '<input id="tmp" type="button" value="button" onclick="tmpFunc(\''+i+'\')">';
}

// insert buttons into myContainer
document.getElementById('myContainer').innerHTML = xBUTTONS;
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T12:39:55.693

首先，始终使用 . 附加事件`addEventListener`。其次，如果您向动态生成的按钮添加 id，您可以执行以下操作；

```
function click(){
    alert(this.id+" clicked");
}
var but;
for (var i=0,e=100,i<e;++i){
    but=document.createElement("input");
    but.id=i;
    ...//make it into your button
    but.addEventListener("click", click, false);
    document.body.appendChild(but);
} 
```

# java - 查询中的 MyBatis 内存泄漏，其结果是 avg 列表。30k 行

> ID：12781603
> 
> 赞同：5
> 
> 时间：2012-10-08T12:18:41.523
> 
> 标签：java, memory, ibatis, mybatis

我在 NetBeans Profiler 中观察到，在执行查询后，Surviving Generations 不断增加：

```
@Select("SELECT * FROM ais_dynamic WHERE rep_time >= #{from} AND rep_time <= #{to} AND ais_system = #{sys}")    
@Options(useCache=false,fetchSize=8192)
List<AisDynamic> getRecords(
        @Param("from") Timestamp from,
        @Param("to") Timestamp to,
        @Param("sys") int sys); 
```

就好像列表中的对象永远不会被释放，尽管它​​们没有在其他任何地方使用，并且应该随着后台线程运行查询并处理其结果而死。

下面是 NetBeans Profiler 返回的实时结果： ![NetBeans Profiler 的实时结果](../Images/70835d66195ba830b43c560a7b6cf367.png)

**我的问题：**

1.  如何防止内存泄漏？
2.  我怎样才能优化这个查询，因为可以看到我开始玩`Options`虽然这并不能防止内存泄漏？

如果需要什么，请告诉我什么，我会提供。

**更新：**

经过更多测试后，我更担心问题在于 MyBatis 持有对检索结果的引用，因此它们不会随着时间的推移而被垃圾收集。在进行了 20 次查询调用然后等待后，我观察到即使在 30 分钟后也没有垃圾收集。我所做的就是调用该方法：`List<AisDynamic> adList = mapper.getRecords(from, to, sys);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:50:33.947

我在周末对其进行了测试，看来我解决了这个问题。感谢@partlov 的建议，尽管它不是让我再次测试问题的解决方案，而且我发现了真正的问题。

问题是我负责处理来自用户的查询请求的客户正在堆积线程（正在执行查询）。由于在我对客户端进行压力测试时请求非常频繁，因此当上一个查询未完成时，下一个查询正在启动，即使我通过在`run()`查询方法中设置和检查标志来取消它们。当查询的会话仍然与数据库交谈时，这在情况下出现在情况下，例如选择30k +结果。因此，尽管提出了取消标志，但尚未检查它，因为查询正在从数据库中检索结果。这对于启动下一个查询来说已经足够了，所以如果它也有很多结果，那么客户端实际上会堆积线程，从而消耗越来越多的内存。

由于似乎没有办法（据我所知）取消与数据库（在 中`MyBatis`）对话的会话（例如选择查询），因此我必须自己实现一种机制来保护它。我在客户端中实现的机制确保下一个查询在前一个查询（为同一用户执行）完成之前不会开始。因此，现在一个查询会在它退出其方法时通知客户端，`run()`然后才可能启动同一用户的下一个查询。

* * *

**更新**我从经验中了解到，中止/取消长时间检索事务的唯一且有点脏的方法（根据我的喜好）是调用事务使用`close()`的`SqlSession`实例的方法。这将导致必须按预期捕获和处理的异常（下面的示例）。

```
org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: java.lang.NullPointerException
### The error may exist in YourMapper.java (best guess)
### The error may involve methodOfTheHandlerInvolved
### The error occurred while handling results
### SQL: sqlOfYourQuery
### Cause: java.lang.NullPointerException
... (and a trace follows) ... 
```

# preferences - 共享偏好在三星手机 Galaxy Nexus 和三星 GT P7500 中不起作用

> ID：12781606
> 
> 赞同：2
> 
> 时间：2012-10-08T12:18:44.143
> 
> 标签：preferences, shared

我试图在**共享首选项**中存储一些键和值，并试图从首选项中检索，相同的代码在包括 HTC、摩托罗拉、LG 手机在内的所有设备中都可以正常工作，但在三星手机中不工作。
数据未正确存储或未从上述三星手机的共享偏好中检索。这是三星手机中的一个已知问题吗？还是有一种特定的方法来处理三星手机中的共享偏好？

# cloud-foundry - CloudFoundry 客户端库中使用的 Rest Template setter

> ID：12781607
> 
> 赞同：0
> 
> 时间：2012-10-08T12:19:00.307
> 
> 标签：cloud-foundry

我们正在尝试使用`CloudFoundryClient`(org.cloudfoundry.client.lib) 来利用该`REST`接口来添加应用程序、创建服务等

我们在尝试访问 setRestTemplate 方法的`getToken`方法中看到了一个问题`org.cloudfoundry.client.lib.oauth2.OauthClient``org.springramework.security.oauth2.client.token.grant.implicit.ImplicitAccessTokenProvider.`

在查找源代码时，我们看到`RestTemplate`in 的设置器`ImplicitAccessTokenProvider`已在 8 月 29 日被删除，这就是造成这种不一致的原因。

您能否建议并让我们知道我们是否应该`oauth`在此更改之前尝试使用 spring-security- 版本以及我们可以在其中找到它的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:13:27.093

cloudfoundry-client-lib 使用 spring-security-oauth 的 1.0.0.RC1，此方法可用。请参考[SPRING SECURITY OAUTH 1.0.0.RC1 IS RELEASED](http://www.springsource.org/node/3611)

# jquery - 使用Jquery隐藏ul下的列表

> ID：12781608
> 
> 赞同：0
> 
> 时间：2012-10-08T12:19:00.360
> 
> 标签：jquery, asp.net-mvc-3, jquery-selectors, telerik-mvc

我试图使用 Jquery 隐藏 HTML 列表。请告诉我我做错了什么的建议。

这是渲染的代码：

```
<div id="TabStrip_3" class="t-widget t-tabstrip t-header">
    <ul class="t-reset t-tabstrip-items">
        <li class="t-item t-state-default t-state-active">
            <a class="t-link" href="#TabStrip_3-1">Details</a>
        </li>
        <li id="3" class="t-item t-state-default">
            <a class="t-link" href="/Acquisition/PoDetails/Create/3">Create New Detail</a>
        </li>
    </ul>
</div> 
```

我需要使用其 ID 隐藏 li。请为此提供帮助。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:28:00.320

根据[HTML 规范](http://www.w3.org/TR/html401/types.html#type-name)，您不能`id`以数字开头属性。

要隐藏`li`特定元素下的所有内容，请使用：

```
$('#TabStrip_3').find('li').hide()​ 
```

在你的情况下，你应该改变你的`id`，然后你可以简单地隐藏它：

```
$('#my-li-id').hide() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:21:24.200

试试这个代码：

```
$(document).ready(function () {
    $('#3').hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:21:33.333

使用 jQuery 过滤器。[jsfiddle](http://jsfiddle.net/CPcBY/)

```
var tlen = $("#TabStrip_3 ul.t-reset li").length;
$("#TabStrip_3 ul.t-reset li").filter(function(index){

 return tlen-index < 4;
}).hide();​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T12:24:21.367

```
$('#TabStrip_3 li').hide()​ 
```

这隐藏了 div 中的所有 lis。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T12:47:28.967

由于您只需要隐藏 id 为“3”的列表，您可以使用 jquery [.hide()](http://api.jquery.com/hide/)。

```
$('#3').hide();​ 
```

**小提琴链接**：http: [//jsfiddle.net/j5wAp/](http://jsfiddle.net/j5wAp/)

# parsing - 从 PSD 格式读取透明度

> ID：12781617
> 
> 赞同：0
> 
> 时间：2012-10-08T12:19:32.130
> 
> 标签：parsing, adobe, transparency, alpha, psd

我正在尝试从 PSD 格式读取合并的 RGBA 数据。“图像数据”部分包含通道（RGBAA ... 其中第一个 A 可能是合并的透明度或 Alpha 蒙版）。有人可以告诉我如何知道第一个 A 中存储的内容吗？我注意到：

*   当图像不包含透明度，但至少有一个 Alpha 蒙版时，第一个 Alpha 通道将包含该 Alpha 蒙版
*   当图像包含透明度时，第一个 Alpha 通道将包含合并的透明度，其他 Alpha 通道将包含 Alpha 蒙版

那么如何在第一个 Alpha 通道中可靠地区分透明度和 Alpha 蒙版？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:23:14.070

来自 PSD 规范：

> 层数。如果为负数，则其绝对值为层数，第一个 Alpha 通道包含合并结果的透明度数据。

如此简单 (layerCount < 0) 告诉我第一个 A 是透明度还是 Alpha-mask。

# javascript - 在数据库中存储表单模式和函数

> ID：12781619
> 
> 赞同：1
> 
> 时间：2012-10-08T12:19:38.653
> 
> 标签：javascript, node.js, mongodb, mongoose

我和我的同事正在构建一个后端相对复杂的 Web 应用程序。在不泄露产品理念的情况下，我们有数百个表单模式与它们的返回函数配对，这些函数在提交表单时被调用。模式是在客户端动态创建表单的 JSON 对象。当表单中的数据被提交时，链接的函数可能会对该数据执行各种不同的操作。

目前，这些表单模式和链接函数托管在 GitHub 上的私有存储库中。这是最好的方法还是可以将它们保存在诸如 mongodb 之类的数据库中？

我知道 mongodb 存储表单模式没有问题，但是函数和函数依赖关系呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:33:01.847

将其存储到数据库中（作为字符串）并在客户端请求时将其提供给客户端（将变成函数）。如果您想在后端（节点）上使用该代码，您可以评估它或创建一个函数 new Function(functionString) 并在服务器端进行验证。/edit 或者将每个模式放在一个文件中，并在需要时向服务器/客户端请求它。为这样的事情进行 DB 回合是昂贵的。

# java - 带有内联附件的多部分电子邮件：Excel 工作表的一部分被视为图像

> ID：12781620
> 
> 赞同：0
> 
> 时间：2012-10-08T12:20:05.423
> 
> 标签：java, excel, email, apache-poi, apache-commons-email

关于使用 apache 公共库的附件的 .INLINE 部分的快速问题。

基本上我应该通过邮件发送部分excel表，在邮件正文中显示所述部分，如果我没记错的话，应该这样写：

```
attachment.setDisposition(EmailAttachment.INLINE); 
```

现在问题来了：使用我的代码，我可以轻松地发送只是附件的附件，**如果**它们是图像，我也可以将它们内联。

有什么方法可以获取xml文件的一部分，因为它是使用apache POI格式化的？（我发现了关于 VBA 的类似主题 - excel，但我有点需要在我的程序中实现这一点。如果可能的话，我想发送选择，因为它是格式化的，因为它非常好看，感谢 POI 。 )

最终结果应该类似于从邮件正文中出现的 xml 文件的选定单元格中复制/粘贴，但是，由于它不是图像，如果我只使用 .INLINE 语句，它将无法正确显示..I '甚至尝试对 JTable 组件进行快照，但没有任何有用的结果。

以下是发送电子邮件的代码（如果有帮助）：

```
class SendEmail {
    public SendEmail() {

        // Create the attachment
        EmailAttachment attachment = new EmailAttachment();
        attachment.setPath("pathToFile");
        attachment.setDisposition(EmailAttachment.INLINE);
        attachment.setDescription("Xml File");
        attachment.setName("file.ods);

        // Create the email message
        MultiPartEmail email = new MultiPartEmail();
        email.setHostName("smtp.googlemail.com");
        email.setSmtpPort(587);
        email.setAuthenticator(new DefaultAuthenticator(
                "gmailAccount", "gmailAccountPwd"));
        email.setSSL(true);

        try {
            email.addTo("toRecipient");

            email.setFrom("fromRecipient");

            email.setSubject("Attached Mail Test");
            email.setMsg("This line should be followed by something..hopefully");

            // add the attachment
            email.attach(attachment);
            email.setTLS(true);

            // send the email
            email.send();

        } catch (EmailException e) {
            e.printStackTrace();
        }
    }
} 
```

PS：请注意发送附件或内联图像没有问题..这是apache commons的限制还是我只是没有经验？（尽管 XD，后者仍然不在主题范围内）

# c# - 在 WP7 应用中添加两个音乐源

> ID：12781621
> 
> 赞同：0
> 
> 时间：2012-10-08T12:20:08.877
> 
> 标签：c#, windows-phone-7, mediaelement

在我的`WP7`游戏应用程序中，我想要运行两个音乐文件。一种是背景音乐，另一种是跟随用户的动作，比如用户杀死敌人。我`MediaElement`用来做这个。我面临两个问题。

1) 如何循环播放背景音乐？

2）第二首音乐一开始，第一首音乐就停止，当第二首音乐停止时不会重新开始。我不想背景音乐停止，它们应该重叠。这个怎么做 ？

我正在使用银光。

**XAML**

```
<MediaElement x:Name="stroke"   AutoPlay="False" />
<MediaElement x:Name="bmusic"   AutoPlay="True" /> 
```

**C＃**

```
 protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);

        var settings = IsolatedStorageSettings.ApplicationSettings;
        if (settings.Contains("bm"))
        {
            string hy=(string)settings["bm"];
            //check if user has disabled music play
            if (hy == "1")
            {
                bmplay = 1;
                // play background music
                bmusic.Source = new Uri("bmusic.mp3", UriKind.Relative);

                bmusic.Play();

            }
            else
            {
                bmplay = 0;
            }
        }
        else
        {
            bmplay = 1;
            // play b music
            bmusic.Source = new Uri("bmusic.mp3", UriKind.Relative);

            bmusic.Play();
        }

        if (NavigationContext.QueryString.TryGetValue("msg", out msg))
        {
           //  textBox1.Text +=" "+ msg;
             find_move();
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:38:57.800

对于重复音乐，您可以使用它：

```
Song s = Song.FromUri("song", new Uri(path));
FrameworkDispatcher.Update();
MediaPlayer.IsRepeating = repeat;
MediaPlayer.Play(s); 
```

并尝试将 SoundEffect 用于声音，它们可以与背景音乐同时播放。
[windows phone 7 中的音效](https://stackoverflow.com/questions/6966017/sound-effect-in-windows-phone-7)

# python - scipy 使用“COBYLA”方法的最小化函数是否接受界限？

> ID：12781622
> 
> 赞同：6
> 
> 时间：2012-10-08T12:20:12.507
> 
> 标签：python, scipy

我`'COBYLA'`在 scipy 的`optimize.minimize`函数中使用该算法（为 cygwin 构建的 v.0.11）。我观察到`bounds`在这种情况下似乎没有使用该参数。例如，简单的例子：

```
from scipy.optimize import minimize

def f(x):
    return -sum(x)

minimize(f, x0=1, method='COBYLA', bounds=(-2,2)) 
```

返回：

```
status: 2.0
nfev: 1000
maxcv: 0.0
success: False
fun: -1000.0
x: array(1000.0)
message: 'Maximum number of function evaluations has been exceeded.' 
```

而不是预期`2`的`x`.

有没有人意识到同样的问题？是否存在已知的错误或文档错误？**在 scipy 0.11 文档中， COBYLA**算法不排除此选项。实际上该函数`fmin_cobyla`没有`bounds`参数。感谢您的任何提示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-01-20T10:45:03.750

您可以以约束的形式制定边界

```
import scipy
#function to minimize
def f(x):
    return -sum(x)
#initial values
initial_point=[1.,1.,1.]    
#lower and upper bound for variables
bounds=[ [-2,2],[-1,1],[-3,3]   ]

#construct the bounds in the form of constraints
cons = []
for factor in range(len(bounds)):
    lower, upper = bounds[factor]
    l = {'type': 'ineq',
         'fun': lambda x, lb=lower, i=factor: x[i] - lb}
    u = {'type': 'ineq',
         'fun': lambda x, ub=upper, i=factor: ub - x[i]}
    cons.append(l)
    cons.append(u)

#similarly aditional constrains can be added

#run optimization
res = scipy.optimize.minimize(f,initial_point,constraints=cons,method='COBYLA')
#print result
print res 
```

请注意，最小化函数将为函数提供设计变量。在这种情况下，3 个输入变量给出了 3 个上限和下限。结果产生：

```
 fun: -6.0
   maxcv: -0.0
 message: 'Optimization terminated successfully.'
    nfev: 21
  status: 1
 success: True
       x: array([ 2.,  1.,  3.]) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-30T20:46:31.273

原始*COBYLA(2)* FORTRAN 算法不明确支持变量边界，您必须在一般约束的上下文中制定边界。

[在此处查看](https://github.com/scipy/scipy/blob/master/scipy/optimize/_minimize.py)*SciPy* `minimize`接口的当前源代码，很明显*SciPy*尚未采取任何措施来处理此限制。

 *因此，为了在*SciPy函数中应用**cobyla*算法的边界*，*您需要将变量边界公式化为不等式约束，并将它们包含在相关的*约束*参数中。 **`minimize`**

 ***（源代码摘录）

```
// bounds set to anything else than None yields warning
if meth is 'cobyla' and bounds is not None:
    warn('Method %s cannot handle bounds.' % method,
         RuntimeWarning)
...
// No bounds argument in the internal call to the COBYLA function
elif meth == 'cobyla':
    return _minimize_cobyla(fun, x0, args, constraints, **options) 
```****

# php - Zend Framework 2：导航

> ID：12781623
> 
> 赞同：5
> 
> 时间：2012-10-08T12:20:16.813
> 
> 标签：php, zend-framework2

在我的控制器中，我创建 Navigation 对象并将其传递给视图

```
$navigation = new \Zend\Navigation\Navigation(array(
    array(
            'label' => 'Album',
            'controller' => 'album',
            'action' => 'index',
            'route' => 'album',
        ),
    )); 
```

那里试图使用它

```
<?php echo $this->navigation($this->navigation)->menu() ?> 
```

并得到错误：

> 致命错误：Zend\Navigation\Exception\DomainException: Zend\Navigation\Page\Mvc::getHref 无法执行，因为 Zend\Mvc\Router\RouteStackInterface 实例在第 471 行的 Zend\View\Helper\Navigation\AbstractHelper.php 中组成

但是我在布局中使用的导航，如下所示：http: [//adam.lundrigan.ca/2012/07/quick-and-dirty-zf2-zend-navigation/](http://adam.lundrigan.ca/2012/07/quick-and-dirty-zf2-zend-navigation/)有效。我的错误是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T12:01:24.070

问题是缺少路由器（或更准确地说，是 a `Zend\Mvc\Router\RouteStackInterface`）。路由堆栈是路由的集合，可以使用路由名称将其转换为 url。基本上它接受一个路由名称并为您创建一个 url：

```
$url = $routeStack->assemble('my/route'); 
```

这也发生在 MVC 页面内部`Zend\Navigation`。该页面有一个`route`参数，当有可用的路由器时，该页面将组装它自己的 url（或`Zend\Navigation`术语，一个`href`）。如果您不提供路由器，则它无法组装路由并因此引发异常。

您必须在导航的每个页面中注入路由器：

```
$navigation = new Navigation($config);
$router     = $serviceLocator->get('router');

function injectRouter($navigation, $router) {
  foreach ($navigation->getPages() as $page) {
    if ($page instanceof MvcPage) {
      $page->setRouter($router);
    }

    if ($page->hasPages()) {
      injectRouter($page, $router);
    }
  }
} 
```

如您所见，它是一个递归函数，将路由器注入每个页面。乏味！因此，有一家工厂可以为您做这件事。有**四个简单的步骤**可以做到这一点。

**第一步**

首先将导航配置放入您的模块配置中。就像您有`default`导航一样，您可以创建第二个导航`secondary`。

```
'navigation' => array(
    'secondary' => array(
        'page-1' => array(
            'label' => 'First page',
            'route' => 'route-1'
        ),
        'page-2' => array(
            'label' => 'Second page',
            'route' => 'route-2'
        ),
    ),
), 
```

您有通往第一页 ( `route-1`) 和第二页 ( `route-2`) 的路线。

**第二步**

工厂会将其转换为导航对象结构，您需要先为此创建一个类。`SecondaryNavigationFactory.php`在 MyModule/Navigation/Service 目录中创建一个文件。

```
namespace MyModule\Navigation\Service;

use Zend\Navigation\Service\DefaultNavigationFactory;

class SecondaryNavigationFactory extends DefaultNavigationFactory
{
    protected function getName()
    {
        return 'secondary';
    }
} 
```

看我把名字放在`secondary`这里，和你的导航键一样。

**第三步**

您必须将此工厂注册到服务管理器。然后工厂可以完成它的工作并将配置文件变成一个`Zend\Navigation`对象。您可以在 module.config.php 中执行此操作：

```
'service_manager' => array(
    'factories' => array(
        'secondary_navigation' => 'MyModule\Navigation\Service\SecondaryNavigationFactory'
    ),
) 
```

看我在`secondary_navigation`这里做了一个服务，`Zend\Navigation`然后工厂将返回一个实例。如果你现在这样做`$sm->get('secondary_navigation')`，你会看到那是一个`Zend\Navigation\Navigation`对象。

**第四步**

告诉视图助手使用这个导航而不是默认导航。导航视图助手接受一个“导航”参数，您可以在其中声明您想要的导航。在这种情况下，服务管理器有一项服务`secondary_navigation`，这就是我们需要的服务。

```
<?= $this->navigation('secondary_navigation')->menu() ?> 
```

现在您将拥有`secondary`此视图助手中使用的导航。

*披露：这个答案与我在这个问题上给出的答案相同：[https ://stackoverflow.com/a/12973806/434223](https://stackoverflow.com/a/12973806/434223)*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T18:40:35.560

顺便提一句。你不需要定义`controller`，`action`如果你定义了 a `route`，只有当你的路由是通用的并且控制器/动作是可变段时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-29T15:44:03.307

问题确实是没有路由器就无法解决路由。我希望导航类能够解决这个问题，但显然你必须自己做。我刚刚写了一个视图助手来介绍带有 MVC 页面的路由器。

这是我在视图中使用它的方式：

```
$navigation = $this->navigation();
$navigation->addPage(
    array(
        'route' => 'language',
        'label' => 'language.list.nav'
    )
);
$this->registerNavigationRouter($navigation);
echo $navigation->menu()->render(); 
```

视图助手：

```
<?php
namespace JarJar\View\Helper;

use Zend\View\Helper\AbstractHelper;
use Zend\View\Helper\Navigation;
use Zend\ServiceManager\ServiceLocatorAwareInterface;
use Zend\ServiceManager\ServiceLocatorInterface;
use Zend\Navigation\Page\Mvc;

class RegisterNavigationRouter extends AbstractHelper implements ServiceLocatorAwareInterface
{
    protected $serviceLocator;

    public function setServiceLocator(ServiceLocatorInterface $serviceLocator)
    {
        $this->serviceLocator = $serviceLocator;
    }

    public function getServiceLocator()
    {
        return $this->serviceLocator;
    }

    public function __invoke(Navigation $navigation)
    {
        $router = $this->getRouter();
        foreach ($navigation->getPages() as $page) {
            if ($page instanceof Mvc) {
                $page->setRouter($router);
            }
        }
    }

    protected function getRouter()
    {
        $router = $this->getServiceLocator()->getServiceLocator()->get('router');
        return $router;
    }
} 
```

不要忘记在配置中添加视图助手作为可调用实例：

```
'view_helpers' => array(
    'invokables' => array(
        'registerNavigationRouter' => 'JarJar\View\Helper\RegisterNavigationRouter'
    )
), 
```

这不是一个很好的解决方案，但它有效。

# .htaccess - WordPress 喜欢 .htacces 不错的网址

> ID：12781624
> 
> 赞同：0
> 
> 时间：2012-10-08T12:20:17.060
> 
> 标签：.htaccess

> **可能重复：**
> [.htacces 创建友好的 URL。需要帮助](https://stackoverflow.com/questions/3033407/htacces-to-create-friendly-urls-help-needed)

我想为“漂亮的 url”构建一个像 WordPress 这样的脚本，我复制了 .htaccess 行并进行了一些修改，但是在 PHP 方面我不知道如何构建它。

我不明白它是如何工作的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:34:28.497

在 Daniel A White 的帮助下，我在 WordPress 文件中找到了这个类。

WP_Rewrite：http: [//xref.wordpress.org/trunk/WordPress/Rewrite/WP_Rewrite.html](http://xref.wordpress.org/trunk/WordPress/Rewrite/WP_Rewrite.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:40:26.037

从设置重写引擎开始并遵循符号链接

```
RewriteEngine On

# Drop the .php --  or any other extension you use.
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

#Forces the site to switch to www.site.com - change the site/TDL below
RewriteCond %{HTTP_HOST} ^insuranceiwant\.com$
RewriteRule (.*) http://www.insuranceiwant.com/$1 [R=301,L] 
```

现在将您的页面命名为有用的名称，例如 site.com/contact-us 如果您要从数据库中提取动态页面，还请添加以下内容：

```
Options +FollowSymLinks
Options +Indexes
RewriteRule ^([A-Za-z_]+)_([A-Z]+)/([A-Za-z0-9_-]+)$ /Resources/city.php?state=$1&region=$2&city=$3 
```

该示例显示动态页面具有州名、州缩写和从数据库中提取并显示页面的城市，如下所示： insuranceiwant.com/California_CA/Los_Angeles

有关页面名称正则表达式的更多信息，请查看这个有用的网站： [http ://www.regular-expressions.info/](http://www.regular-expressions.info/)

# jquery - 获取 JQuery 中的最后一个元素 ID 号并加一

> ID：12781625
> 
> 赞同：0
> 
> 时间：2012-10-08T12:20:17.357
> 
> 标签：jquery

如何动态获取以下代码的最后一个 ID 号？（在此代码中 = obj_9）

```
 <div id="objects">
            <div class="obj_item"><img id="obj_1" class="ui-widget-content" src="elements/abstract_celtic_knot_in_blue_tattoo_design.png" /></div>
            <div class="obj_item"><img id="obj_2" class="ui-widget-content" src="elements/anchor_tears_the_skin_tatoo_design.png" /></div>
            <div class="obj_item"><img id="obj_3" class="ui-widget-content" src="elements/armband_tattoo_with_cross_in_the_center_idea.png" /></div>
            <div class="obj_item"><img id="obj_4" class="ui-widget-content" src="elements/armband_tribal_sign_tattoo_design.png" /></div>
            <div class="obj_item"><img id="obj_5" class="ui-widget-content" src="elements/bat_covered_by_the_wings_tattoo_design.png" /></div>
            <div class="obj_item"><img id="obj_6" class="ui-widget-content" src="elements/black_eye_tattoo_idea.png" /></div>
            <div class="obj_item"><img id="obj_7" class="ui-widget-content" src="elements/black_sketch_of_native_indian_chief_tattoo_design.png" /></div>
            <div class="obj_item"><img id="obj_8" class="ui-widget-content" src="elements/clown_with_two_knives_tattoo_idea.png" /></div>
            <div class="obj_item"><img id="obj_9" class="ui-widget-content" src="elements/eagle_is_catching_prey_tattoo_design.png" /></div>
            </div> 
```

最后将 id 转换为 int 数字并将其加一。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:23:58.810

假设它们按数字顺序排列，这将获得最后一个图像元素 ID 的数值 + 1 ...

```
parseInt($("#objects .obj_item:last img").attr("ID").split("_")[1], 10) + 1; 
```

如果元素可能出现故障，那么这将不起作用，您需要全部解析它们并找到最高值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:22:13.660

如果你总是开始分配`id`from`1`并且中间没有丢失 id ，试试

```
var newID = "obj_" + ( $('#objects > div').length + 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:23:05.537

这个应该做...

sudo 选择器 :last 是关键。

```
var id = parseInt($('#objects .ob_item:last').find('.ui-widget-content').attr('id'));
id = id + 1;

//Or id++ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T12:23:25.580

这是代码：

```
$(document).ready(function(){
    var last_id = $('#objects div.obj_item > img').last().attr('id');
}); 
```

你也可以这样做：

```
$(document).ready(function(){
    var last_id = $('#objects div.obj_item > img:last').attr('id');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T12:23:36.507

我的头顶上有一点伪代码......

```
 var id = "";
$(".obj_item").each(function(index){
var amount = $(".obj_item").length;
if(index == amount-1){

id = $(this).find("img").attr("id");
    alert(parseInt(id.replace("obj_","")));
}
});​ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T12:27:41.617

你首先需要找到最后一个元素。有很多方法可以切蛋糕。我更喜欢

```
var id = $("#objects .obj_item:last img").attr("ID"); 
```

你需要提取号码

```
var num = parseInt(id.substring(3),10); 
```

add 你可以加 1 到 num

parseInt 的最后一个参数是告诉运行时将字符串解析为十进制数的基数。如果不提供此参数，您可能会得到一些意想不到的结果。是否会出现这些情况取决于您如何生成 ID，但始终提供基数是一个好习惯。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-08T12:28:03.270

使用正则表达式：

```
$("#objects >div:last img")[0].id.replace(/[a-z]+_/gi,"") 
```

# ruby-on-rails - 修复 github rails 部署

> ID：12781627
> 
> 赞同：2
> 
> 时间：2012-10-08T12:20:20.703
> 
> 标签：ruby-on-rails, git, deployment, github

我刚开始了解 Rails 部署，如果这个问题听起来很愚蠢，请原谅我。我（在我的本地机器上）创建了一个 rails 应用程序，对其进行了修改，启动了 git，将其推送（源 -> 主到私人仓库），然后将其克隆到 VPS 上。但是，在那之后，由于服务器的特殊性，我不得不修改服务器上的几个文件，现在 repos 显然不匹配。我想开始使用 Capistrano，但事实上，我无能为力（我什至没有赶上本地机器上的变化）。所以，我有几个问题。

a) 最好的解决方法是什么？我可以删除 github 存储库，然后通过从 VPS 推送创建另一个并在我的本地计算机上克隆它吗？如果是这样，我应该先“删除”（删除 .git 文件夹）服务器上的存储库吗？或者是将应用程序目录复制到本地计算机然后再次执行所有这些的最佳方法？

b) 就我而言，服务器和开发机器之间唯一不同的文件是 database.yml 文件，我是否必须将其添加到 .gitignore 中，如果是，是否会在下一个被删除我什么时候从主人那里拉变化？

c）如果（一开始）我将它从 VPS 推送到 github 作为源，我是否可以在之后更改角色，因为每次我从本地机器推送更改到主服务器时它都会更改？

d) 如果有另一种方法可以自动提取更改，那么使用 Capistrano 是否有意义（我听说有些人以某种方式使用提交挂钩）？因为此时我只想让 VPS 上的 app 文件夹与 github 上的内容保持最新，而 capfile 和 deploy.rb 似乎提供了太多选项。一点都不优雅。

感谢您的关注，祝您有美好的一天。此致，尤金。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:46:03.900

a），您不能将组合差异作为差异文件并应用于本地代码吗？或者只是从那里提交？然后，您将在 github 存储库中进行更改。（忽略暴露私人信息的更改，`git add -p`在关键文件上使用）

对于 b)，database.yml 文件已配置为每个环境（开发/生产）具有不同的配置。如果您需要更多内容，可以使用 ERB 读取环境变量（在生产机器中设置它们）：

[无法访问“database.yml”文件中的环境变量](https://stackoverflow.com/questions/8686215/failing-to-access-environment-variables-within-database-yml-file)

另一方面，如果将 database.yml 添加到被忽略的文件中，则需要其他方式来生成它。

c) 对我来说没有意义。VPS 的仓库将配置一个默认的远程仓库，您的本地仓库也是如此，您可以从任何您想要的地方推送和拉取。

d) capistrano 已经足够好了，记住不要用很多钩子等使配置过载，这可能会变得难以管理。通过 capistrano 部署只需几秒钟，我不会担心。

# perl - 如何在 Perl 中将 ASCII 格式转换为 UTF8

> ID：12781629
> 
> 赞同：2
> 
> 时间：2012-10-08T12:20:24.617
> 
> 标签：perl, utf-8

例如：`&#233;`进入`é`

有时用户获取 ascii 格式字符集而不是法语字符集......所以任何人都可以帮助我 perl 中是否有任何函数可以将 ascii 转换为 UTF-8

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T12:40:31.100

听起来您想将 HTML 实体转换为 UTF-8。为此，请使用[HTML::Entities](https://www.metacpan.org/module/HTML::Entities)和`decode_entities`函数。

这将为您提供一个没有附加特定编码的 Perl 字符串。以 UTF-8 编码输出字符串：

```
print Encode::encode_utf8(decode_entities($html_string)); 
```

或者，在 STDOUT 上设置 UTF-8 PerlIO 层，Perl 将为您编码 UTF-8 中的所有内容 - 在输出多个字符串时很有用。

```
binmode STDOUT, ':utf8';
print decode_entities($html_string); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T12:29:00.633

这最好由 Perl 的内置[`Encode`](http://perldoc.perl.org/Encode.html)模块处理。下面是一个如何转换字符串的简单示例：

```
my $standard_string = decode("ascii", $ascii_string); 
```

（`$standard_string`然后将使用您系统上的任何 Perl 标准编码。换句话说，从那时起您不必担心它）。

链接的文档提供了许多您可以做的事情的其他示例 - 例如设置输入文件的编码。一个相关的有用模块是[`Encode::Guess`](http://perldoc.perl.org/Encode/Guess.html)，它可以帮助您确定未知的字符编码。

# javascript - javascript 'this' 作为值参数传递

> ID：12781631
> 
> 赞同：0
> 
> 时间：2012-10-08T12:20:40.197
> 
> 标签：javascript

我有这一行：

```
echo "<td style='width:11%' id='client_quote_tr' name='client_quote_tr' onclick='changeColorTaskClientQuote(this);'>".$r['task']."</td>"; 
```

' ' 的值是`this`多少？我的意思是它获取属性名称的值，还是其他什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:22:33.443

调试它。添加一个 console.log 行。打开控制台。点击 td 看看会出现什么。

```
function changeColorTaskClientQuote(obj) {
    console.log(obj);
} 
```

您将看到它传递了对您单击的元素的引用。非常便利。

[jsFiddle 示例](http://jsfiddle.net/V2VHz/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:22:23.087

`this`，它是函数执行的上下文，是附加了事件处理程序的元素。所以在这种精确的情况下，这将是`td`元素。

如果要在函数中使用名称，则为`this.name`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T12:29:59.727

内联事件处理程序中的“this”将引用触发事件的 DOM 元素，在本例中是您的“td”元素。有关更多信息，请查看[http://www.quirksmode.org/js/events_early.html](http://www.quirksmode.org/js/events_early.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T12:22:22.723

`This`是`td`您的 HTML 元素`table`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T12:22:24.387

这是对执行事件的 DOM 元素的引用。在这种情况下`<td>`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T12:22:44.923

在您的情况下 - 引用 TD DOM 元素。

# apache-camel - Camel smpp 消费者机上交易所持续增长

> ID：12781651
> 
> 赞同：2
> 
> 时间：2012-10-08T12:21:50.663
> 
> 标签：apache-camel, smpp, jsmpp

我配置了一个监听传入 SMS 的路由。这条路线收到了很多短信，除了两件事之外，一切似乎都很顺利：

1.  机上交换的数量增长缓慢但不断（在正常运行 55 小时后，我有 250 个机上交换。

2.  机上交换的数量似乎与以下错误有关：

我正在使用**骆驼 2.10.0**。

这显然是不正常的，我想知道是否有人遇到过同样的问题。

任何帮助，将不胜感激。

```
>  2012-10-08 12:11:51,039 WARN [pool-27-thread-3]
> o.a.c.c.s.SmppConsumer [CamelLogger.java:224] Caused by:
> [java.lang.NullPointerException - null] 
> java.lang.NullPointerException: null 
>         at java.lang.String.<init>(String.java:515) ~[na:1.6.0_31] 
>         at org.apache.camel.component.smpp.SmppMessage.createBody(SmppMessage.java:81)
> ~[camel-smpp-2.10.0.jar:2.10.0] 
>         at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:41)
> ~[camel-core-2.10.0.jar:2.10.0] 
>         at org.apache.camel.impl.MessageSupport.copyFrom(MessageSupport.java:135)
> ~[camel-core-2.10.0.jar:2.10.0] 
>         at org.apache.camel.impl.MessageSupport.copy(MessageSupport.java:124)
> ~[camel-core-2.10.0.jar:2.10.0] 
>         at org.apache.camel.impl.DefaultUnitOfWork.<init>(DefaultUnitOfWork.java:91)
> ~[camel-core-2.10.0.jar:2.10.0] 
>         at org.apache.camel.impl.DefaultUnitOfWork.<init>(DefaultUnitOfWork.java:71)
> ~[camel-core-2.10.0.jar:2.10.0] 
>         at org.apache.camel.processor.UnitOfWorkProcessor.createUnitOfWork(UnitOfWorkProcessor.java:190)
> ~[camel-core-2.10.0.jar:2.10.0] 
>         at org.apache.camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:102)
> ~[camel-core-2.10.0.jar:2.10.0] 
>         at org.apache.camel.processor.RouteInflightRepositoryProcessor.processNext(RouteInflightRepositoryProcessor.java:48)
> ~[camel-core-2.10.0.jar:2.10.0] 
>         at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
> ~[camel-core-2.10.0.jar:2.10.0] 
>         at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
> ~[camel-core-2.10.0.jar:2.10.0] 
>         at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)
> ~[camel-core-2.10.0.jar:2.10.0] 
>         at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
> ~[camel-core-2.10.0.jar:2.10.0] 
>         at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:73)
> ~[camel-core-2.10.0.jar:2.10.0] 
>         at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:99)
> ~[camel-core-2.10.0.jar:2.10.0] 
>         at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:86)
> ~[camel-core-2.10.0.jar:2.10.0] 
>         at org.apache.camel.component.smpp.MessageReceiverListenerImpl.onAcceptDeliverSm(MessageReceiverListenerImpl.java:71)
> ~[camel-smpp-2.10.0.jar:2.10.0] 
>         at org.jsmpp.session.SMPPSession.fireAcceptDeliverSm(SMPPSession.java:445)
> [org.apache.servicemix.bundles.jsmpp-2.1.0_4.jar:na] 
>         at org.jsmpp.session.SMPPSession.access$0(SMPPSession.java:443)
> [org.apache.servicemix.bundles.jsmpp-2.1.0_4.jar:na] 
>         at org.jsmpp.session.SMPPSession$ResponseHandlerImpl.processDeliverSm(SMPPSession.java:462)
> [org.apache.servicemix.bundles.jsmpp-2.1.0_4.jar:na] 
>         at org.jsmpp.session.state.SMPPSessionBoundRX.processDeliverSm0(SMPPSessionBoundRX.java:109)
> [org.apache.servicemix.bundles.jsmpp-2.1.0_4.jar:na] 
>         at org.jsmpp.session.state.SMPPSessionBoundRX.processDeliverSm(SMPPSessionBoundRX.java:51)
> [org.apache.servicemix.bundles.jsmpp-2.1.0_4.jar:na] 
>         at org.jsmpp.session.PDUProcessTask.run(PDUProcessTask.java:81)
> [org.apache.servicemix.bundles.jsmpp-2.1.0_4.jar:na] 
>         at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
> [na:1.6.0_31] 
>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
> [na:1.6.0_31] 
>         at java.lang.Thread.run(Thread.java:662) [na:1.6.0_31] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:54:51.570

这就是骆驼队的速度和反应速度：

创建并修复了错误 [https://issues.apache.org/jira/browse/CAMEL-5693](https://issues.apache.org/jira/browse/CAMEL-5693)

谢谢克劳斯。

# jquery-mobile - jQueryMobile：多选将所有值发送到服务器

> ID：12781658
> 
> 赞同：0
> 
> 时间：2012-10-08T12:22:15.797
> 
> 标签：jquery-mobile, multiple-select

我想在 jQuery-Mobile 中使用多选字段。然而，只有最后选择的值被发送到服务器。这是我的代码：

```
 <select name="myValues"
     data-native-menu="false" data-mini="true" multiple="multiple">
        <option>Select one or more</option>
     <?php 
     foreach ($propPosValues AS $posValue) {    
             <option value="<?= $field['Id'] ?>"><?= $field['Value'] ?></option>
     <?php } ?>

    </select> 
```

不要打扰php代码。它确实有效。UI 显示在另一个窗口中打开的多项选择。但只有最后一个 selected-Value 被发送到服务器。但我显然想要所有这些。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:26:46.983

名称标签必须是 name="myValues[]"。括号“[]”表示这是一个值数组。

# asp.net - SMTP 服务器名称和端口

> ID：12781668
> 
> 赞同：3
> 
> 时间：2012-10-08T12:22:47.093
> 
> 标签：asp.net, smtp

我正在尝试使用 asp.net 中的一个简单按钮发送电子邮件。但我收到以下错误 - `"The transport failed to connect to the server"`。

```
 SmtpMail.SmtpServer = "localhost"; 
```

我用过`localhost`，因为，我不知道`smtp server`我的电脑名称.. 我该如何解决？我怎么知道`SMTP server`名字？？我`os`是`win xp` 希望有人可以帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:28:56.857

要在本地测试电子邮件，请在您的 C:\ 驱动器上设置一个名为“maildrop”的[投递文件夹](http://msdn.microsoft.com/en-us/library/ms164241.aspx)，并将以下内容添加到您的 Web.Config 文件中：

```
<system.net>
    <mailSettings>
        <smtp deliveryMethod='SpecifiedPickupDirectory'>
            <specifiedPickupDirectory pickupDirectoryLocation="c:\maildrop" />
        </smtp>
    </mailSettings>
</system.net> 
```

[ASP.NET：使用分拣目录发送电子邮件](http://weblogs.asp.net/gunnarpeipman/archive/2010/05/27/asp-net-using-pickup-directory-for-outgoing-e-mails.aspx)

**更新：**

您应该使用较新的电子邮件库...

**使用 System.Net.Mail；**

```
MailMessage msg = new MailMessage(); 
msg.To = "sudheej.j800@outlook.com"; 
msg.From = "sudheej.j800@gmail.com"; 
msg.Subject = "hi"; 
msg.Body = "yes"; 

SmtpClient smtpClient = new SmtpClient("localhost");
smtpClient.Send(msg); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:25:34.783

标准 SMTP 在端口 25 上运行。如果您的机器上的端口 25 上没有任何监听，那么您可能没有运行 SMTP 服务器。尝试：

```
telnet localhost 25 
```

看看这是否与某事有关。我怀疑不是（即您在本地主机上没有 SMTP 服务器）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:27:35.813

在执行此操作之前，您的机器上需要一个 SMTP 服务器。

# sql-server-2008 - 如何将本地 sql server 或数据库转移到另一台计算机

> ID：12781677
> 
> 赞同：0
> 
> 时间：2012-10-08T12:23:06.037
> 
> 标签：sql-server-2008, sql-server-2008-r2

我正在和其他 4 个人一起做一个项目，我们正在开发一个带有数据库的 android 应用程序。现在，我们将为我们的 SQL Server 使用本地主机，我希望能够从我的笔记本电脑中获取数据库并将其复制到其他人的计算机上。我正在使用 SQL Server 2008 Management Studio。

关于如何做的任何想法？如果可以的话，我不介意复制整个 localhost 服务器。

顺便说一句，我试图通过右键单击数据库（创建的`.bak`文件）来备份笔记本电脑上的数据库，但另一台计算机上没有恢复选项。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:24:30.480

备份您的数据库并在其他机器中恢复

**编辑**

如果您没有找到恢复选项，请尝试使用 sql 脚本

前任：

```
RESTORE DATABASE nwind_new FROM DISK = 'c:\backups\northwind\nwind.bak'
WITH
MOVE 'northwind' TO 'd:\Program Files\Microsoft SQL 
Server\Data\nwind_new.mdf'
MOVE 'northwind_log' TO 'd:\Program Files\Microsoft SQL
Server\Data\nwind_new_log.ldf' 
```

你可以试试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:26:32.910

请参阅以下有关备份和还原的链接：

[http://technet.microsoft.com/en-us/library/cc966495.aspx](http://technet.microsoft.com/en-us/library/cc966495.aspx)

和

[http://blogs.msdn.com/b/sreekarm/archive/2009/09/11/move-a-database-from-one-server-to-another-server-in-sql-server-2008.aspx](http://blogs.msdn.com/b/sreekarm/archive/2009/09/11/move-a-database-from-one-server-to-another-server-in-sql-server-2008.aspx)

* * *

要恢复您的数据库，请参阅这个有用的链接：

[http://msdn.microsoft.com/en-us/library/ms177429(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms177429(v=sql.100).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:39:03.323

奇怪的是你没有看到恢复选项。您可以尝试从其位置分离数据库，将文件（数据库和日志）复制到新位置并将其附加到那里。

[MSDN](http://msdn.microsoft.com/en-us/library/ms190794%28v=sql.100%29.aspx)

# php - 在 Linux 中将 .PPT (2007-x) 转换为 JPEG/GIF

> ID：12781683
> 
> 赞同：1
> 
> 时间：2012-10-08T12:23:25.203
> 
> 标签：php, linux, shell, powerpoint, jpeg

我在寻找将**Powerpoint 文档转换为 JPEG**的解决方案时遇到问题。

> *   **Imagick**无法处理 .PPT
>     
>     
> *   所以我使用**了 unoconv**，它处理 .ppt 文件，但只能到 ppt.(97/2003/XP)**而不是**2007，尽管它说输入是。它告诉我它无法处理源。

是否有能够做到这一点的命令行解决方案或库？

PS：unoconv 基于 openoffice lib。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T19:32:40.093

您可以尝试[JODConverter](https://github.com/mirkonasato/jodconverter)和最新版本的 OpenOffice。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:32:46.630

首先尝试使用 unoconv v0.6，并确保您阅读了自述文件，其中包含许多解决问题的技巧。问题的发生通常是因为例如没有为特定文档格式安装所有必需的软件包，或者现有的办公流程导致错误。

故障排除部分应该是首先要看的：

*   [https://github.com/dagwieers/unoconv#troubleshooting-instructions](https://github.com/dagwieers/unoconv#troubleshooting-instructions)

# java - 如果 JDialog 可见，则 JLabel 更改文本

> ID：12781691
> 
> 赞同：0
> 
> 时间：2012-10-08T12:23:52.037
> 
> 标签：java, jlabel, actionlistener

单击按钮时，我想更改 JDialog（其他类）上的 Jlabels 的文本。

这段代码有点长，因为我是 java 新手。请多多包涵

```
import javax.swing.*;
import javax.swing.border.CompoundBorder;
import java.awt.*;
import java.awt.event.*;
public class HotelRoomsGUI extends JPanel{
    private JTabbedPane mainJTP;
    private JPanel classicTab,deluxeTab,presidentialTab,classicSubPanel,deluxeSubPanel,presidentialSubPanel;
    private String classicRoomNo[] = {"101","102","103","104","105","106","107","108","109","101","111","112"};
    private String deluxeRoomNo[] = {"201","202","203","204","205","206","207","208","209","201","211","212"};
    private String presidentialRoomNo[] = {"301","302","303","304","305","306","307","308","309","301","311","312"};
    private JButton[] classicRoom, deluxeRoom, presidentialRoom;
    private JLabel[] inputLabels;
    ButtonHandler bh;
    public HotelRoomsGUI(){

        setLayout(null);
        setBackground(new Color(90,90,90));
        add(tabbedPane());

    }
    public JPanel classic()
    {
        classicTab = new JPanel();
        classicTab.setBackground(new Color(70,70,70));
        classicTab.setLayout(null);
        classicSubPanel();
        return classicTab;
    }
    public JPanel classicSubPanel()
    {
        classicSubPanel = new JPanel();
        classicSubPanel.setBounds(10,10,605,455);
        classicSubPanel.setLayout(new GridLayout(4,3,10,10));
        classicSubPanel.setBackground(new Color(70,70,70));
        classicTab.add(classicSubPanel);
        return classicTab;
    }
    public JPanel deluxe()
    {
        deluxeTab = new JPanel();
        deluxeTab.setBackground(new Color(70,70,70));
        deluxeTab.setLayout(null);
        deluxeSubPanel();
        return deluxeTab;
    }
    public JPanel deluxeSubPanel()
    {
        deluxeSubPanel = new JPanel();
        deluxeSubPanel.setBounds(10,10,605,455);
        deluxeSubPanel.setLayout(new GridLayout(4,3,10,10));
        deluxeSubPanel.setBackground(new Color(70,70,70));
        deluxeTab.add(deluxeSubPanel);
        return deluxeSubPanel;
    }
    public JPanel presidential()
    {
        presidentialTab = new JPanel();
        presidentialTab.setBackground(new Color(70,70,70));
        presidentialTab.setLayout(null);
        presidentialSubPanel();
        return presidentialTab;
    }
    public JPanel presidentialSubPanel()
    {
        presidentialSubPanel = new JPanel();
        presidentialSubPanel.setBounds(10,10,605,455);
        presidentialSubPanel.setLayout(new GridLayout(4,3,10,10));
        presidentialSubPanel.setBackground(new Color(70,70,70));
        presidentialTab.add(presidentialSubPanel);
        return presidentialSubPanel;
    }
    //Holder of buttons
    public JTabbedPane tabbedPane()
    {
        UIManager.put("TabbedPane.selected", Color.ORANGE); 
        mainJTP = new JTabbedPane();
        mainJTP.setBackground(Color.WHITE); 
        mainJTP.setBounds(3,1,630,500);
        mainJTP.addTab("Classic",classic());
        mainJTP.addTab("Deluxe",deluxe());
        mainJTP.addTab("Presidential",presidential());
        rooms();
        return mainJTP;
    }
    //Labels that will be display on the RoomProfile class
    public JLabel[] inputLabels()
    {
        inputLabels = new JLabel[10];
        for(int x = 0; x<inputLabels.length;x++)
        {
            inputLabels[x] = new JLabel();
            inputLabels[x].setForeground(Color.WHITE);
        }
        return inputLabels;
    }
    public void rooms()
    {
        bh = new ButtonHandler();
        presidentialRoom = new JButton[presidentialRoomNo.length];      
        deluxeRoom = new JButton[deluxeRoomNo.length];
        classicRoom = new JButton[classicRoomNo.length];
        for(int x = 0;x<classicRoomNo.length;x++){
            //classic rooms
            ImageIcon imageC = new ImageIcon("C:\\Users\\John\\workspace" +
                    "\\SystemTest\\src\\Images\\classicRooms.JPG"); // image
            classicRoom[x] = new JButton(classicRoomNo[x],imageC);
            classicRoom[x].setBackground(Color.WHITE);
            classicRoom[x].setBorder(new CompoundBorder(BorderFactory.createEtchedBorder(Color.WHITE,Color.GRAY),
                    BorderFactory.createEtchedBorder(Color.WHITE,Color.GRAY)));
            classicRoom[x].addActionListener(bh);
            classicSubPanel.add(classicRoom[x]);
            //deluxe rooms
            ImageIcon imageD = new ImageIcon("C:\\Users\\John\\workspace" +
                    "\\SystemTest\\src\\Images\\deluxeRooms.JPG"); // image
            deluxeRoom[x] = new JButton(deluxeRoomNo[x],imageD);
            deluxeRoom[x].setBackground(Color.WHITE);
            deluxeRoom[x].setBorder(new CompoundBorder(BorderFactory.createEtchedBorder(Color.WHITE,Color.GRAY),
                    BorderFactory.createEtchedBorder(Color.WHITE,Color.GRAY)));
            deluxeRoom[x].addActionListener(bh);
            deluxeSubPanel.add(deluxeRoom[x]);
            //presidential rooms
            ImageIcon imageP = new ImageIcon("C:\\Users\\John\\workspace" +
                    "\\SystemTest\\src\\Images\\presidentialRooms.JPG"); // image
            presidentialRoom[x] = new JButton(presidentialRoomNo[x],imageP);
            presidentialRoom[x].setBackground(Color.WHITE);
            presidentialRoom[x].setBorder(new CompoundBorder(BorderFactory.createEtchedBorder(Color.WHITE,Color.GRAY),
                    BorderFactory.createEtchedBorder(Color.WHITE,Color.GRAY)));
            presidentialRoom[x].addActionListener(bh);
            presidentialSubPanel.add(presidentialRoom[x]);

        }
    }
    public class ButtonHandler implements ActionListener
    {
        public void actionPerformed(ActionEvent e)
        {
            //to get what button is accessed
            Room room = new Room(e.getActionCommand());
            //get all info using the room no. got from getActionCommand();
            GuestsInfo info = new GuestsInfo(room.getGuestID());
            String data[] = {info.getFirstName()+" "+info.getLastName(),info.getAge(),info.getGender(),
                    info.getContactNo(),"Today",info.getTime(),"Tomorrow",room.getRoomNo(),room.getRoomType()};
            RoomProfile prof = new RoomProfile();
            if(prof.isVisible())
            {
                System.out.print("test");
            }
            else
            {

                //setting text on label
                prof.setVisible(true);
                inputLabels();
                for(int i = 0; i<data.length; i++){
                    inputLabels[i].setText(" "+data[i]);
                    System.out.println(""+data[i]);
                }
            }
        }
    }

} 
```

这是 RoomProfile 类的代码

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class RoomProfile extends JDialog{

    private JLabel[] labels;
    JLabel inputLabels[];
    private String topTextLabels[] = {"Fullname","Age","Gender","Address","Contact No","Arrival", "Time in", "Departure","Room No","Room Type"};
    private JButton okB;
    private JPanel subFrame,topPanel, bottomLeftPanel,bottomRightPanel;
    private JLabel designLabel;
    private ButtonHandler bh;
    private HotelRoomsGUI label = new HotelRoomsGUI();
    public RoomProfile() {
        setLayout(null);
        setModal(true);
        setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE); 
        setBackground(new Color(80,80,80));
        setContentPane(setSubFrame());
        setSize(600,500);
        setLocationRelativeTo(null);
    }
    public JPanel setSubFrame()
    {
        createLabels();
        buttons();
        designLabel();
        subFrame = new JPanel();
        subFrame.setBounds(0,0,600,500);
        subFrame.setBackground(new Color(90,90,90));
        subFrame.setLayout(null);
        subFrame.add(setTopPanel());
        subFrame.add(setBottomRightPanel());
        subFrame.add(setBottomLeftPanel());
        subFrame.add(okB);
        subFrame.add(designLabel);
        return subFrame;
    }
    public void designLabel()
    {
        ImageIcon img = new ImageIcon("C:\\Documents and Settings\\Janpol\\workspace\\HotelGUI\\src\\Images\\Account.JPG");
        designLabel = new JLabel(img);
        designLabel.setBounds(380,27,190,190);
        designLabel.setBorder(BorderFactory.createEtchedBorder(Color.GRAY,Color.BLACK));

    }
    // this is where i added some of the labels
    public JPanel setTopPanel()
    {
        topPanel = new JPanel();
        topPanel.setLayout(new GridLayout(5,1));
        topPanel.setBounds(20,20,350,200);
        topPanel.setBackground(new Color(90,90,90));
        topPanel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(Color.GRAY,Color.BLACK)
                ,"Personal Information",1,2,new Font("Arial",Font.BOLD,13),Color.ORANGE));
        JLabel[] top = label.inputLabels();
        for(int x = 0; x<5; x++)
        {
            topPanel.add(labels[x]);
            topPanel.add(top[x]);
        }

        return topPanel;
    }
    // also here
    public JPanel setBottomLeftPanel()
    {
        bottomLeftPanel = new JPanel();
        bottomLeftPanel.setLayout(new GridLayout(3,2));
        bottomLeftPanel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(Color.GRAY,Color.BLACK)
                ,"Stay Information",1,2,new Font("Arial",Font.BOLD,13),Color.ORANGE));
        bottomLeftPanel.setBackground(new Color(90,90,90));
        bottomLeftPanel.setBounds(20,250,300,140);
        JLabel[] bot = label.inputLabels();
        for(int x = 5; x<8; x++)
        {
            bottomLeftPanel.add(labels[x]);
            bottomLeftPanel.add(bot[x]);
        }
        return bottomLeftPanel;
    }
    // lastly here
    public JPanel setBottomRightPanel()
    {
        bottomRightPanel = new JPanel();
        bottomRightPanel.setLayout(new GridLayout(2,2));
        bottomRightPanel.setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(Color.GRAY,Color.BLACK)
                ,"Personal Information",1,2,new Font("Arial",Font.BOLD,13),Color.ORANGE));
        bottomRightPanel.setBackground(new Color(90,90,90));
        bottomRightPanel.setBounds(350,250,200,140);
        JLabel[] right = label.inputLabels();
        for(int x = 8; x<10; x++)
        {
            bottomRightPanel.add(labels[x]);
            bottomRightPanel.add(right[x]);
        }
        return bottomRightPanel;
    }

    public JLabel[] createLabels()
    {
        labels = new JLabel[topTextLabels.length];

        for(int x = 0; x<topTextLabels.length;x++)
        {
            labels[x] = new JLabel(topTextLabels[x]);
            labels[x].setForeground(Color.WHITE);
                    }
        return labels;
    }
    public void buttons()
    {
        bh = new ButtonHandler();
        okB = new JButton("Ok");
        okB.setBounds(400,400,100,50);
        okB.addActionListener(bh);
    }

    public class ButtonHandler implements ActionListener
    {
        public void actionPerformed(ActionEvent e)
        {
                dispose();
        }
    }

} 
```

这里是教室

```
import java.sql.*;

public class Room 
{

    private String roomType, availability, roomNo, Rate;
    private int  guestID;

    private Connection con;
    private PreparedStatement statement = null;

    public Room(){
        try {
             Class.forName("com.mysql.jdbc.Driver");
             con = DriverManager.getConnection(
                            "jdbc:mysql://localhost:3306/3moronsdb","root","");

        } 
        catch (Exception e) {
             e.printStackTrace();
        }
    }
    public Room(int id)
    {
        this();
        try{
            statement = con.prepareStatement("SELECT * FROM room WHERE guestID=?");
            statement.setInt(1, id);
            ResultSet rs = statement.executeQuery();
            while(rs.next()){
                this.guestID = rs.getInt(1);
                this.roomType = rs.getString(2);
                this.roomNo = rs.getString(3);
                this.Rate = rs.getString(4);
                this.availability= rs.getString(5);
            }
        }catch(Exception e){
            System.out.print(e);
        }
    }
    //Constructor for setting rate
    public Room(String roomTypeL, String roomNoL , String RateL, String availabilityL)
    {
        this();
        try
        {   
            statement = con.prepareStatement("Insert into room(roomType, roomNo, rate,availability) values(?,?,?,?)");
                statement.setString(1, roomTypeL);
                statement.setString(2, roomNoL);
                statement.setString(3, RateL);
                statement.setString(4, availabilityL);
                statement.executeUpdate();
        }
        catch(Exception e)
        {
            e.printStackTrace();        
            return;
        }
    }
    public Room(String roomNo){
        this();
        try{
            statement = con.prepareStatement("SELECT * FROM room WHERE roomNo=?");
            statement.setString(1, roomNo);
            ResultSet rs = statement.executeQuery();
            while(rs.next()){
                this.guestID = rs.getInt(1);
                this.roomType = rs.getString(2);
                this.roomNo = rs.getString(3);
                this.Rate = rs.getString(4);
                this.availability= rs.getString(5);
            }
        }
        catch(Exception e)
        {
            e.printStackTrace();
            return;
        }
    }
    //get guestID from the database
    public int getGuestID(){
        return this.guestID;
    }   
    //getting roomType
    public String getRoomType(){
        return this.roomType;
    }
    //getting roomNo
    public String getRoomNo(){
        return this.roomNo; 
    }
    //getting rate
    public String getRate(){
        return this.Rate; 
    }
    //getting availability  
    public String getAvailability(){
        return this.availability; 
    }
} 
```

这是GuestInformation的课程

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

public class GuestsInfo
{
    private String  firstName, lastName, gender, address, time, deposit, age, contactNo, stay;
    private int  guestID;
    private Connection con;
    private PreparedStatement statement;
    //default constructor
    public GuestsInfo()
    {
        try {
             Class.forName("com.mysql.jdbc.Driver");
             con = DriverManager.getConnection(
                            "jdbc:mysql://localhost:3306/3moronsdb","root","");

        } 
        catch (Exception e) {
             e.printStackTrace();
        }
    }
    public GuestsInfo(int guestID)
    {
        this();
        try{
            statement = con.prepareStatement("SELECT * FROM guest WHERE guestID=?");
            statement.setInt(1, guestID);
            ResultSet rs = statement.executeQuery();
            while(rs.next()){
                this.guestID = rs.getInt(1);
                this.firstName = rs.getString(2);
                this.lastName = rs.getString(3);
                this.age = rs.getString(4);
                this.gender= rs.getString(5);
                this.address= rs.getString(6);
                this.contactNo = rs.getString(7);
                this.time= rs.getString(8);
                this.stay = rs.getString(9);
                this.deposit = rs.getString(10);
                System.out.print(firstName +""+ lastName +""+ age +""+ gender +""+ address +""+ contactNo +""+ 
                        time +""+ stay +""+ deposit);
            }   
        }catch(Exception e){}
    }
    public GuestsInfo(String firstName, String lastName, String age, String gender,
            String address, String contactNo, String time, String stay,  String deposit)
    {
        this();
        try
        {   
            statement = con.prepareStatement("Insert into guest(firstName,lastName,age,gender,address,contactNo,time,stay,deposit)values(?,?,?,?,?,?,?,?,?)");  

                statement.setString(1, firstName);
                statement.setString(2, lastName);
                statement.setString(3, age);
                statement.setString(4, gender);
                statement.setString(5, address);
                statement.setString(6, contactNo);
                statement.setString(7, time);
                statement.setString(8, stay);
                statement.setString(9, deposit);
                statement.executeUpdate();
        }
        catch(Exception e)
        {
            e.printStackTrace();
            return;
        }   
    }
    //get guestID from the database
    public int getGuestID(){
        return guestID;
    }   
    //get firstName from the database
    public String getFirstName(){
        return this.firstName;
    }

    //get lastName from the database
    public String getLastName(){    
        return lastName;
    }
    //get age from the database
    public String getAge(){

        return this.age;
    }

    //get gender from the database
    public String getGender(){
        return this.gender;
    }
    //get address from database
    public String getAddress(){
        return this.address;
    }
    //get contactNo from the database
    public String getContactNo(){
        return this.contactNo;
    }
    //get time from database
    public String getTime()
    {
        return this.time;
    }
    //get stay from database
    public String getStay()
    {
        return this.stay;
    }
    //get roomType from database
    public String getDeposit()
    {
        return this.deposit;
    }
} 
```

我不知道为什么标签不显示文字。请帮我。提前谢谢你，也谢谢你对我的包容

感谢那些帮助我的人。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:05:11.067

这是我的猜测：在您的`actionPerformed()`处理程序中，您调用`inputLabels();`. 这似乎实例化了新的`JLabel`对象数组并将其分配给`inputLabels`字段。但是，它**不会**将这些对象添加到面板中。这仅在`setBottomLeftPanel()`第一次创建标签时在 中完成。

因此，请确保`actionPerformed()`调用`setText()`中定义的标签上的代码`setBottomLeftPanel()`（并且已经包含在面板中）。

**编辑**（发布完整代码后）：

有很多事情是错误的。现在，要解决您的问题：

1) 在`RoomProfile`中，创建一个字段`JLabel[] bottomLeftPanelFields;`并将您创建的标签分配`setBottomRightPanel()`给它。

2) 在该字段上创建一个吸气剂 ( `getBottomLeftPanelFields()`)

3）修改你`actionPerformed()`的：

```
...
JLabel[] bottomLeftFields = prof.getBottomLeftPanelFields();
for(int i = 0; i<data.length; i++){
                 bottomLeftFields[i].setText(" "+data[i]);
             }

                //setting text on label
                prof.setVisible(true);
... 
```

也就是说，在您调用之前设置字段`setVisible()`（这是您以模态方式显示您的房间对话框的地方）。从这一刻起，应该显示标签。

一些进一步的位：

a）可能对其他标签（顶部等）做类似的事情。

b）摆脱这两个`inputLabels`领域。在实例化时，每次调用`inputLabels()`3 次都会重写一次`RoomProfile`。其他根本不需要。另请注意，您的`inputLables()`方法总是创建 10 个对象，即使您每次需要不同数量的标签。

c) 或许可以获得有关 Swing 和 Java 设计模式的教程（Oracle 网站上有一些）。这有助于理解如何构建事物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:28:54.830

我认为问题在于这一行：

```
 JLabel[] bot = label.inputLabels(); 
```

这是在将所有这些标签添加到面板之前重新实例化它们。尝试：

```
 JLabel[] bot = inputLabels; 
```

这里令人困惑的是，很难从您的摘录中分辨出首先执行的是什么，但我认为这是您发生意外行为的地方。

# python - 错误：AttributeError：事务实例没有属性“trans_handle”

> ID：12781696
> 
> 赞同：0
> 
> 时间：2012-10-08T12:23:59.093
> 
> 标签：python, sql, database, firebird

我编写了在元数据描述符上创建 Firebird 数据库的程序

```
import pyodbc
#import kinterbasdb
import firebirdsql
import os
import json,sqlite3,sql
con = sqlite3.connect('borey.db')
sampling_tables=con.cursor()
sampling_fields=con.cursor()
sampling_constraints=con.cursor()
sampling_constraints_fields=con.cursor()
sampling_indices=con.cursor()
sampling_indices_fields=con.cursor()
sampling_indices_props=con.cursor()
sampling_fields_from_constraints=con.cursor()
js=[]

sampling_tables.execute(sql.sqltables)

for table in sampling_tables:
    tabledict=dict(inform_about_table='?', fields='?', constraints='?', indices='?')
    information_about_table_dict=dict(name=table[1], description=table[2], can_add=table[3], can_edit=table[4], can_delete=table[5])
    #print(js_information_about_table)
    tabledict['inform_about_table']=information_about_table_dict
    #print(tabledict)
    table_id=table[0]
    sampling_fields.execute(sql.sqlfields,(table_id,))
    listfields=[]
    for field in sampling_fields:
        fielddict=dict(position=field[0], name=field[1], description=field[2], datatype=field[3], char_length=field[4], can_input=field[5], can_edit=field[6], show_in_grid=field[7],
                      is_mean=field[8], autocalculated=field[9], required=field[10])
        listfields.append(fielddict)
    tabledict['fields']=listfields
    #print(tabledict)
    sampling_constraints.execute(sql.sqlconstraints,(table_id,))
    listconstraints=[]
    for constraint in sampling_constraints:
        constraintdict=dict(name=constraint[1], constrtype=constraint[2], items='?', reference=constraint[3])
        sampling_constraints_fields.execute(sql.sql_constr_det,(constraint[0],table_id))
        listitems=[]
        for constr_det in sampling_constraints_fields:
            listitems.append(constr_det[0])
        constraintdict['items']=listitems
        listconstraints.append(constraintdict)
    tabledict['constraints']=listconstraints
    #print(tabledict)
    sampling_indices.execute(sql.sqlindices,(table_id,))
    listindices=[]
    for index in sampling_indices:
        indexdict=dict(name=index[1], items='?', position='?', props='?')
        index_id=index[0]
        sampling_indices_fields.execute(sql.sql_indices_fields,(table_id,index_id))
        #sampling_indices_props.execute(sql.sql_indices_descend,(table_id,index_id, ))
        listfields=[]
        listpositions=[]
        listprops=[]
        for index_det in sampling_indices_fields:
            listfields.append(index_det[0])
            listpositions.append(index_det[1])
            fieldinindex=index_det[0]
        sampling_indices_props.execute(sql.sql_indices_descend,(table_id,index_id,fieldinindex))            
        for index_desc in sampling_indices_props:
            listprops.append(index_desc[0])
        indexdict['items']=listfields
        indexdict['position']=listpositions
        indexdict['props']=listprops
        listindices.append(indexdict)
    tabledict['indices']=listindices
    print(tabledict)
    js.append(tabledict)
os.remove('D:/ThirdTask/test.fdb')
conn=firebirdsql.create_database(dsn='localhost/3050:/test.fdb', user='sysdba', password='masterkey')
#conn=firebirdsql.connect(host='localhost',database='D:/ThirdTask/test.fdb', user='sysdba', password='masterkey')
cur=conn.cursor()
for nametable in js:
    s=''
    s+='create table '+nametable['inform_about_table']['name']+'\n'
    s+='('+'\n'
    countfield=0
    for namefield in nametable['fields']:
        s+='   '
        if namefield['name']=='COUNT':
            s+='QUANTITY'
        else:
            if namefield['name']=='MINIMUM QUANTITY FOR ORDER REPETITION':
                s+='MINIMUM_QUANTITY'
            else:
                if namefield['name']=='PRICE ACCORDING TO THE PRICE-LIST':
                    s+='LIST_PRICE'
                else:
                    if (namefield['name'].count(' ')!=0) or (namefield['name'].count('-')!=0) or (namefield['name'].count('/')!=0):
                        s+='"'+namefield['name']+'"'
                    else:                    
                        s+=namefield['name']
        if namefield['datatype']=='FMTBCD':
            s+='   '+' INTEGER NOT NULL'
        else:
            if namefield['datatype']=='STRING': 
                s+='   '+'VARCHAR'
            else:
                if namefield['datatype']=='MEMO':
                    s+='   '+'BLOB SUB_TYPE 1'
                else:            
                    if namefield['datatype']=='LARGEINT':
                        s+='   '+'INTEGER'
                    else:
                        if namefield['datatype']=='SMALLINT':
                            s+='   '+'INTEGER'
                        else:
                            if namefield['datatype']=='CURRENCY':
                                s+='   '+'NUMERIC(18,2)'
                            else:
                                if namefield['datatype']=='BOOLEAN':
                                    s+='   '+'INTEGER'
                                else:    
                                    s+='   '+namefield['datatype']           
        if namefield['datatype']=='STRING':
            s+='('+str(namefield['char_length'])+')'
        countfield+=1
        #if countfield!=len(nametable['fields']):
        s+=','+'\n'
        #else:
            #s+='\n'
            #s+='\n'
    for nameconstraint in nametable['constraints']:
        if nameconstraint['constrtype']=='PRIMARY':
            s+='   CONSTRAINT '+nameconstraint['name']+ ' PRIMARY KEY('
            countfieldinconstr=0
            for namefield in nameconstraint['items']:
                countfieldinconstr+=1
                if countfieldinconstr!=len(nameconstraint['items']):
                        if (namefield.count(' ')!=0) or (namefield.count('-')!=0) or (namefield.count('/')!=0):
                            s+='"'+namefield+'"'+','
                        else:
                            if namefield=='COUNT':
                                s+='QUANTITY'+','
                            else:    
                                s+=namefield+','
                else:
                        if (namefield.count(' ')!=0) or (namefield.count('-')!=0) or (namefield.count('/')!=0):
                            s+='"'+namefield+'"'+')'+'\n'
                        else:
                            if namefield=='COUNT':
                                s+='QUANTITY'+')'+'\n'
                            else:       
                                s+=namefield+')'+'\n'
    s+=');'+'\n'
    print s
    cur.execute(s)
    conn.commit()
    for nameindex in nametable['indices']:
        #print 'nameidex[props] ', nameindex['props']
        s=''
        for prop in nameindex['props']:
            if prop==0:
                if (nameindex['name'].count(' ')!=0) or (nameindex['name'].count('-')!=0) or (nameindex['name'].count('/')!=0):
                    s+='create ascending index "'+nameindex['name'] + '" on '+nametable['inform_about_table']['name']+' ('
                else:
                    if nameindex['name']=='IDX_INFORMATION_ABOUT_ORDER_INVENTORY_ID':
                        s+='create ascending index ' + 'IDX_INVENTORY_ID' + ' on '+nametable['inform_about_table']['name']+' ('
                    else:
                        if nameindex['name']=='IDX_INFORMATION_ABOUT_ORDER_ORDERDETAILS':
                            s+='create ascending index ' + 'IDX_ORDERDETAILS' + ' on '+nametable['inform_about_table']['name']+' ('
                        else:    
                            if nameindex['name'].count('INFORMATION_ABOUT_ORDER_')!=0:
                                s+='create ascending index ' + nameindex['name'][1:4]+nameindex['name'][-len(nameindex['name'])+28:] + ' on '+nametable['inform_about_table']['name']+' ('
                            else:
                                s+='create ascending index '+nameindex['name'] + ' on '+nametable['inform_about_table']['name']+' ('
            countitem=0
            for nameitem in nameindex['items']:
                if countitem!=len(nameindex['items'])-1:
                        if (nameitem.count(' ')!=0) or (nameitem.count('-')!=0) or (nameitem.count('/')!=0):
                            s+='"'+nameitem+'"'+', '
                        else:
                            if nameitem=='COUNT':
                                s+='QUANTITY'+', '
                            else:  
                                s+=nameitem+', '
                else:
                        if (nameitem.count(' ')!=0) or (nameitem.count('-')!=0) or (nameitem.count('/')!=0):
                            s+='"'+nameitem+'"'+');'+'\n'
                        else:
                            if nameitem=='COUNT':
                                s+='QUANTITY'+');'+'\n'
                            else:  
                                s+=nameitem+');'+'\n'
                countitem+=1
        print s
        cur.execute(s)
        conn.commit()
for nametable in js:
    for nameconstraint in nametable['constraints']:
        if nameconstraint['constrtype']=='FOREIGN':
            s=''
            s+='ALTER TABLE '+nametable['inform_about_table']['name']+'\n'
            s+='  '+'ADD CONSTRAINT '+nameconstraint['name']+' FOREIGN KEY ('  
            for namefield in nameconstraint['items']:
                if (namefield.count(' ')!=0) or (namefield.count('-')!=0) or (namefield.count('/')!=0):
                    s+='"'+namefield+'")'+'\n'
                else:
                    s+=namefield+')'+'\n'
            s+='      '+'REFERENCES '+nameconstraint['reference']
            sampling_fields_from_constraints.execute(sql.sql_fields, (nameconstraint['reference'],))
            for fields in sampling_fields_from_constraints:
                field=fields[0]
                if (field.count(' ')!=0) or (field.count('-')!=0) or (field.count('/')!=0):
                    s+=' ("'+field+'");'+'\n'
                else:
                    s+=' ('+field+');'+'\n'
            print s
            cur.execute(s)
            conn.commit()            
s="""
create table CLIENTS
(
   ID   INTEGER NOT NULL,
   COMPANY   VARCHAR(50),
   "LAST NAME"   VARCHAR(50),
   "FIRST NAME"   VARCHAR(50),
   "E-MAIL ADDRESS"   VARCHAR(50),
   "JOB TITLE"   VARCHAR(50),
   "BUSINESS PHONE"    VARCHAR(25),
   "HOME PHONE"   VARCHAR(25),
   "MOBILE PHONE"   VARCHAR(25),
   "FAX NUMBER"   VARCHAR(25),
   ADDRESS   BLOB SUB_TYPE 1,
   CITY   VARCHAR(50),
   "STATE/PROVINCE"   VARCHAR(50),
   "ZIP/POSTAL CODE"   VARCHAR(15),
   "COUNTRY/REGION"   VARCHAR(50),
   "WEB-SITE"   VARCHAR(25),
   NOTES   BLOB SUB_TYPE 1,
   INCLUDING   BLOB
);
"""
s1='create ascending index IDX_CLIENTS_CITY on CLIENTS (CITY);'
"""db = 'D:/ThirdTask/Northwind.accdb' 
connaccess = win32com.client.Dispatch(r'ADODB.Connection')
DSN = ('PROVIDER = Microsoft.Jet.OLEDB.4.0;DATA SOURCE = ' + db +  ';') 
connaccess.Open(DSN) 
rs = win32com.client.Dispatch(r'ADODB.Recordset') 
strsql = "select * from deer" 
rs.Open(strsql, conn, 1, 3) 
t = rs.GetRows() 
connaccess.Close() 
"""

#print s
#cur.execute(s)
#conn.commit()
#cur.execute(s1)
#conn.commit()
#cur=con.cursor()
con.close()
conn.close()
#print "Connect succesfully" 
```

结果我收到了错误程序中画面对应的结论是通过print s的方式进行的

```
create table CLIENTS
(
   ID    INTEGER NOT NULL,
   COMPANY   VARCHAR(50),
   "LAST NAME"   VARCHAR(50),
   "FIRST NAME"   VARCHAR(50),
   "E-MAIL ADDRESS"   VARCHAR(50),
   "JOB TITLE"   VARCHAR(50),
   "BUSINESS PHONE"   VARCHAR(25),
   "HOME PHONE"   VARCHAR(25),
   "MOBILE PHONE"   VARCHAR(25),
   "FAX NUMBER"   VARCHAR(25),
   ADDRESS   BLOB SUB_TYPE 1,
   CITY   VARCHAR(50),
   "STATE/PROVINCE"   VARCHAR(50),
   "ZIP/POSTAL CODE"   VARCHAR(15),
   "COUNTRY/REGION"   VARCHAR(50),
   "WEB-SITE"   VARCHAR(25),
   NOTES   BLOB SUB_TYPE 1,
   INCLUDING   BLOB,
   CONSTRAINT PK_CLIENTS_ID PRIMARY KEY(ID)
);

create ascending index IDX_CLIENTS_CITY on CLIENTS (CITY);

Traceback (most recent call last):
  File "D:\ThirdTask\connect.py", line 188, in <module>
    cur.execute(s)
  File "C:\Python27\lib\site-packages\firebirdsql\fbcore.py", line 495, in execute
    stmt_type, stmt_handle = self._execute(query, params)
  File "C:\Python27\lib\site-packages\firebirdsql\fbcore.py", line 456, in _execute
    self.transaction.trans_handle, query)
AttributeError: Transaction instance has no attribute 'trans_handle' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:57:30.093

您必须在提交之前开始交易。

首先`commit()`关闭您获得 corsor 时打开的事务。因此，如果您想进行更多提交，则必须`conn.begin()`在提交后调用或调用。`commit(retaining=True)`

# ios - 我想在 TAB 加载另一个 ViewController 时立即执行操作

> ID：12781704
> 
> 赞同：0
> 
> 时间：2012-10-08T12:24:31.663
> 
> 标签：ios, xcode, tabbar

我按照故事板教程并使用 IB 制作了一个 iPhone 应用程序，其标签栏控制器连接到 3 个导航控制器，称为主页、脚本和设置。Home 是第一位的，因此，在一开始，viewDidLoad 就完成了它的工作。然后 TAB 到脚本或设置并做其他事情。在 TAB Home 上，我希望应用程序立即进行一些更改，可能基于其他 TAB 中的更改。有人发布 viewWillAppear 将使用 TAB 执行，但不是这样。

```
- (void)viewWillAppear {
    NSLog(@"Back Home.\n");
} 
```

这永远不会在 TAB Home 上执行。请告诉我我缺少一些简单的东西。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:28:26.873

确保使用正确的方法签名：

`- (void)viewWillAppear:(BOOL)animated`

尝试以这种方式实现您的方法：

```
- (void)viewWillAppear:(BOOL) animated {
    [super viewWillAppear: animated];
    NSLog(@"Back Home.\n");
} 
```

# webview - QML + Meego + webview 无法点击任何网站上的任何内容

> ID：12781712
> 
> 赞同：3
> 
> 时间：2012-10-08T12:24:56.233
> 
> 标签：webview, qml, pyside, meego

在过去的 5 天里，我一直在尝试许多“解决方案”来尝试“打开”点击 QML webview 对象，但我似乎仍然无法点击任何页面上的任何链接。

我正在嵌入贝宝结帐页面，这可能是我错过的非常简单的事情。我尝试了一个只有 webview 的空页面，除了宽度 + 高度 + javascripts（并且没有 js）之外没有任何选项，我尝试了下面的代码（以及许多其他东西），仍然没有点击。尝试在 IRC 上询问并得到回复“它应该总是可以点击，即使是最基本的 webview 设置”。我在下面的代码中将 url 从包含真正 ap-key 的 url 更改为仅 dev 登录页面，但问题是相同的，无论它是 paypal 的 google.com 还是任何其他站点。

拜托，有人知道我如何点击任何东西吗？我也不能点击表格，弹出一个键盘来填写表格，或者任何点击。

我在 Meego 平台上运行 QML + PySide。我从 main.qml 将以下页面/矩形加载到 Loader 对象中。

任何帮助将不胜感激。

注意：我确实在 qt-developer 网络上问过同样的问题，但还没有得到回应。在这里尝试，这个论坛的人数更多，所以希望有这个问题经验的人会阅读（我注意到我不是唯一一个遇到这些问题的人“应该工作”）。

```
import QtQuick 1.1
import QtWebKit 1.1
import com.nokia.meego 1.1

Rectangle {
 Image {
  id: background
  source: "./images/bg.png"
  anchors.fill: parent
  Text {
   id: logo
   text: "My Fancy Logo"
   x: 2
   y: 2
   font.pixelSize: 24
   font.bold: true
   font.italic: true
   color: "white"
   style: Text.Raised
   styleColor: "black"
   smooth: true
  }
  Rectangle {
  id: rect
   x: 0
   y: 60
   width: background.width
   height: background.height - 70
   Flickable {
    id: flickable
    width: parent.width
    height: parent.height
    contentWidth: Math.max(parent.width,webView.width)
    contentHeight: Math.max(parent.height,webView.height)
    flickableDirection: Flickable.HorizontalAndVerticalFlick
    anchors.top: parent.top
    anchors.bottom: parent.bottom
    anchors.left: parent.left
    anchors.right: parent.right
    boundsBehavior: Flickable.DragOverBounds
    clip:true
    pressDelay: 200

    WebView {
     id: webView
     settings.javascriptEnabled: true
     settings.pluginsEnabled: true
     url: "https://developer.paypal.com/"
     anchors.top: parent.top
     anchors.bottom: parent.bottom
     anchors.left: parent.left
     anchors.right: parent.right
     transformOrigin: Item.Top
     smooth: false
     focus: true

     preferredWidth: flickable.width
     preferredHeight: flickable.height
     PinchArea {
   id: pinchArea
   property real minScale:  1.0
   anchors.fill: parent
   property real lastScale: 1.0
   pinch.target: webView
   pinch.minimumScale: minScale
   pinch.maximumScale: 3.0

   onPinchFinished: {
    flickable.returnToBounds();
    flickable.contentWidth = (flickable.width + flickable.width) * webView.scale;
       flickable.contentHeight = (flickable.height + flickable.height) * webView.scale;
      }
     }
    }
   }
  }
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T06:38:44.207

在您的 QML 标记中，PinchArea 元素是 WebView 的子元素，因此在 WebView 之前获取鼠标/触摸按下事件。如果您将 PinchArea 移动到元素层次结构中 WebView 的“后面”，则链接将变为可点击（登录框下方的三个除外，因为它们试图打开新的浏览器窗口）。

# php - 表达式引擎 SafeCracker 格式 Datepicker

> ID：12781715
> 
> 赞同：0
> 
> 时间：2012-10-08T12:25:05.557
> 
> 标签：php, javascript, datepicker, expressionengine, safecracker

嗨，我正在使用 safecracker 在表达式引擎中制作一个表单，我的一个名为“出生日期”的字段使用日期字段类型。jQuery datapicker 由表达式引擎自动添加，但我看不到如何添加任何选项或格式，我通常会在创建此类字段时添加到 datepicker。

**我的正常代码：**

```
 $(function() {
    $( "#datepicker" ).datepicker({
        changeMonth: true,
        changeYear: true,
        dateFormat: 'dd/mm/yy',
        maxDate: new Date()
    });
 }); 
```

我能想到的唯一选择是将此字段设置为文本输入并自己在模板中添加日期选择器，但这会删除它在此字段类型上执行的 EE 日期验证。

是否有向此字段类型添加额外的日期选择器选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:03:16.067

好吧，您可以`datepicker="no"`在[Safecracker 标记](http://expressionengine.com/user_guide/modules/safecracker/index.html#datepicker)中设置，然后手动添加您的 javascript。但是：您不能使用上面显示的自定义格式-对于要验证为本地 EE 日期字段的输入，它必须使用 datePicker 格式`yy-mm-dd`，**加上**格式中的当前时间`HH:MM AM/PM`- datePicker 本身不这样做. （[请参阅 EE 的一位开发人员的这篇文章，](http://www.derekallard.com/blog/post/adding-time-to-jquery-ui-datepicker)了解他们是如何做到这一点的。）

另一种方法是使用 EEvent Helper 日期字段，因为它不需要时间部分来验证（尽管它也需要`yy-mm-dd`）。但是，`datepicker="no"`仅影响*本机*日期字段，因此您必须设置`safecracker_head="no"`- 但是您也会丢失表单中其他字段类型所需的任何 javascript 或 CSS。

回复：使用纯文本字段：除了验证问题之外，您的数据将被存储为输入的任何内容（mm/dd/yy），而不是被转换为时间戳，这更加有用和便携。

唯一真正的解决方案是为此编写您自己的日期字段类型。不会很困难。

# java - 根据hashmap的value字段对hashmap的arraylist进行排序

> ID：12781717
> 
> 赞同：0
> 
> 时间：2012-10-08T12:25:12.820
> 
> 标签：java, arraylist, hashmap, sorting

基本上，我有一个声明如下的arraylist：

```
private ArrayList<HashMap<String, String>> songsList = 
                             new ArrayList<HashMap<String, String>>(); 
```

现在我想做的是，对于每个键，我想给出两个值字段。能做到吗？？

其次我想根据值对对键值对进行排序。那么如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:36:28.323

那是很多`String`对象。您是否考虑过使用`Object`, 而不是复杂的字符串集合来封装您的数据结构？例如，假设您的地图键是一首歌曲：

```
public Song implements Comparable<Song> {
    private String title;
    private String artist;
    private String album;

    public Song(String title, String artist, String album) {
       ...
    }

    public int compareTo(Song s) {
        // sorting logic
    }

    ... // getters, setters, equals & hashCode
} 
```

然后，创建您的歌曲列表：

```
List<Song> songs = new ArrayList<Song>();
songs.add(new Song("Dancing Queen", "Abba", "Arrival"); // I had to find this on Wikipedia
... 
```

然后对它们进行排序：

```
Collections.sort(songs); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:39:49.523

您可以为您的排序问题实现可比较的接口。对于地图中的值具有多个值，请使用 getter 和 setter 创建一个具有所需值的类。并将类用作键的值。

# php - YouTube 链接未提供视频 ID

> ID：12781726
> 
> 赞同：0
> 
> 时间：2012-10-08T12:26:04.800
> 
> 标签：php, algorithm, youtube

我已经尝试过了，但它失败了：

```
$whereIsMyCake = '';

//
// put all the links here
//
$url =  "http://www.youtube.com/embed/more_yougooglelink";

$url =  "http://www.youtube.com/v/..." // works
$url =  "http://www.youtube.com/watch?v=ue1mLnyEd90"; // WORKS
$url =  "http://youtu.be/we_youGoogle_u"; // WORKS

parse_str( parse_url( $url, PHP_URL_QUERY ), $my_array_of_vars );
if($my_array_of_vars['v']=='') { 
  preg_match(
    "#(?<=v=)[a-zA-Z0-9-]+(?=&)|(?<=v\/)[^&\n]+(?=\?)|(?<=v=)[^&\n]+|(?<=youtu.be/)[^&\n]+#",
    $url, 
    $matches);

  $whereIsMyCake = $matches[0];
} else {
  $whereIsMyCake = $my_array_of_vars['v'];
}

echo $whereIsMyCake; 
```

问题：现在`youtube.com/embed/videoid is here`似乎不起作用，如果 youtube 建立新链接，我们必须不断改变我们的算法怎么办？为了`youtube.com/embed/embed.weareruling/embed/embed/googleisboss/findmenow/video id is here ?`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:49:18.540

您可以使用更完整的正则表达式，如本答案所述：[https](https://stackoverflow.com/a/6556662/921739) ://stackoverflow.com/a/6556662/921739 。该答案还谈到了 YouTube 的 oembed 服务，您可能会发现它很有用。

此外，您可以使用 YouTube API [https://developers.google.com/youtube/2.0/developers_guide_php](https://developers.google.com/youtube/2.0/developers_guide_php)。这样，如果格式发生变化，你仍然是黄金。

作为减轻您对 YouTube 网址更改的担忧的说明：想想所有带有 YouTube 视频链接的博客、网站和电子邮件。如果在不支持旧格式的情况下更改 URL 格式，所有这些链接都会损坏。Google 有充分的理由不经常更改其 URL。（这并不是说他们不会……）

* * *

编辑

使用我提供的 SO 链接中的代码，以您需要的所有格式从 URL 中提取 ID：

```
function youtube_id_from_url($url) {
    $pattern = 
        '%^# Match any youtube URL
        (?:https?://)?  # Optional scheme. Either http or https
        (?:www\.)?      # Optional www subdomain
        (?:             # Group host alternatives
          youtu\.be/    # Either youtu.be,
        | youtube\.com  # or youtube.com
          (?:           # Group path alternatives
            /embed/     # Either /embed/
          | /v/         # or /v/
          | /watch\?v=  # or /watch\?v=
          )             # End path alternatives.
        )               # End host alternatives.
        ([\w-]{10,12})  # Allow 10-12 for 11 char youtube id.
        $%x'
        ;
    $result = preg_match($pattern, $url, $matches);
    if (false !== $result) {
        return $matches[1];
    }
    return false;
}

$urls[] = "http://www.youtube.com/embed/ue1mLnyEd90";
$urls[] = "http://www.youtube.com/v/ue1mLnyEd90";
$urls[] = "http://www.youtube.com/watch?v=ue1mLnyEd90";
$urls[] = "http://youtu.be/ue1mLnyEd90";

foreach ($urls as $url) {
    assert(youtube_id_from_url($url) === 'ue1mLnyEd90'); # Passes
} 
```

# css - CSS 从无背景颜色过渡到渐变

> ID：12781730
> 
> 赞同：0
> 
> 时间：2012-10-08T12:26:41.007
> 
> 标签：css, css-transitions

是否可以从没有背景的 div 过渡到具有渐变背景的 div？

```
div { background-color:none;}

div:hover {
background:#D74413; background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#D74413), to(#8A2D0D)); 
background: -webkit-linear-gradient(top, #D74413, #8A2D0D); background: -moz-linear-gradient(top, #D74413, #8A2D0D); 
background: -ms-linear-gradient(top, #D74413, #8A2D0D); background: -o-linear-gradient(top, #D74413, #8A2D0D);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T13:44:10.047

动画渐变并不简单，它涉及到渐变的背景大小和位置。例如此处显示：

[http://www.impressivewebs.com/animating-css3-gradients/](http://www.impressivewebs.com/animating-css3-gradients/)

一个对我有用的简单解决方法是将渐变放在 div 的一个孩子上，并像这里一样为其不透明度设置动画：

[http://jsfiddle.net/willemvb/rWpZN/](http://jsfiddle.net/willemvb/rWpZN/)

* * *

HTML：

```
<div id="container">
  <div id="back"></div>
</div>​ 
```

CSS（适用于 webkit，但如果您添加变体，也适用于其他现代浏览器）

```
#container { 
  position: relative;
  width: 500px; height: 500px;
  background: transparent;
}    

#back { 
  position: absolute;
  width: 100%; height: 100%;
  top: 0; left: 0;
  opacity: 0;
  background: -webkit-linear-gradient(top, #ccc, #999);     
  z-index: -1;
  -webkit-transition: opacity 3s ease-out;
}    

#container:hover #back {
  opacity: 1;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:22:45.847

使用本网站：

[终极 CSS 渐变生成器](http://colorzilla.com/gradient-editor/)

# matlab - 如何在Matlab中提取具有条件的矩阵的一部分

> ID：12781736
> 
> 赞同：0
> 
> 时间：2012-10-08T12:26:59.183
> 
> 标签：matlab, matrix, extract

我有一组矩阵，我只想提取满足条件的矩阵的一部分。

例如：`150x180`矩阵的值从`0`to 到`2.80`，我只想要介于之间的值`1.66`，`1.77` 我想将范围内的值保留在原始矩阵中的原始位置，并将另一个设置为零。

任何人都可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T12:38:07.217

您可以使用逻辑索引。首先，找到`A`不满足您条件的条目。接下来，使用`A(idx)`将它们更改为 0：

```
% example matrix
A = 2.8*rand(150, 180);

% find entries meeting some criterion
idx = A<1.66 | A>1.77;
A(idx) = 0; 
```

或者更简单，正如 Rody Oldenhuis 建议的那样，您可以将逻辑表达式直接包含在矩阵引用中：

```
A(A<1.66 | A>1.77) = 0; 
```

这会产生更短、更简洁的代码，但不是更快的代码：MATLAB 仍然显式创建逻辑索引变量，但随后将其清除。

# ios - 在 TabBarController 堆栈中嵌入 UIPageControl

> ID：12781737
> 
> 赞同：0
> 
> 时间：2012-10-08T12:27:02.123
> 
> 标签：ios, uinavigationcontroller, uipagecontrol

我正在构建一个在顶层有一个 TabBarController 的应用程序。Contained within one of the tabs there is a tableview, and when a row is selected, I'd like to go to a set of 5 views, controlled via a UIScrollViewDelegate and UIPageControl.

我已经使用 UIScrollViewDelegate 和 UIPageControl 构建了一个基本应用程序，基于 Derek Bredensteiner 在此答案中的代码：[如何使用 UIPageControl 创建多个视图？](https://stackoverflow.com/questions/1816144/uipagecontrol-help)

它可以作为一个独立的应用程序正常工作，即：当 ViewController 代码通过 AppDelegate 直接调用时：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible]; 
```

但是当我尝试从我的 tableview 代码中调用相同的代码时，我得到了一个黑屏。我也尝试过使用**presentModelViewController**并得到 UIPageViewControl 点，但其余部分是黑色的。

```
LearnPageViewController *phoneContentController = [[LearnPageViewController alloc] init] ;
//  [self presentModalViewController:phoneContentController animated:YES];
[self.navigationController pushViewController:phoneContentController animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T12:41:18.933

我设法通过添加一个新的窗口属性 @property (nonatomic, retain) IBOutlet UIWindow *window; 让它工作。但这听起来不对。AppDelegate 上有一个窗口属性，现在又有一个 2 级。

# ajax - Wicket：使用可重用组件和 AjaxButton 提交表单

> ID：12781738
> 
> 赞同：1
> 
> 时间：2012-10-08T12:27:04.020
> 
> 标签：ajax, wicket

我正在使用 wicket 版本 6。

我有一个表格。作为表单的内容，我有一个*FormComponentPanel*，其中包含两个*DateTimeField*（*org.apache.wicket.extensions.yui.calendar*）。

在包含表单的类中，我有一个 AjaxButton 和一个 AjaxLink，它们都在做同样的事情：读取模型、创建一个新对象并将其发送到某个服务器进行处理。

无论如何，

*   单击链接时，我的新对象将使用正确的值创建，但使用日期选择器选择的新日期**除外**

*   单击按钮时出现一些错误（**[AjaxRequestHandler@1701777932 responseObject [org.apache.wicket.ajax.AjaxRequestHandler$1@3e1]**），但没有关于错误的更多信息

好吧，我解决了第一个问题（链接），尝试向其添加 ajax 更新行为，如此处所建议[，](http://apache-wicket.1842946.n4.nabble.com/DateField-and-AjaxFormComponentUpdatingBehavior-in-wicket-1-5-5-td4551607.html)但所选日期未在模型中更新

只需调用另一个方法和*target.add(form)*即可创建 AjaxButton 并覆盖*onSubmit*；也*setOutputMarkupId*设置为**true**，但似乎仍然缺少一些东西

 ****为了让它工作，我只需要解决其中一个问题，但如果有人能解决这两个问题，那就太好了。提前致谢。

**编辑**

```
public MyPanelIncludingForm() {
  // ...
  form.add(getRangePanel()); // creates a new TimeRangePanel and returns the instance
  form.add(getSubmitButton());
  // ...
}

private FormComponent<String> getSubmitButton() {
  FormComponent<String> submitBtn = new AjaxButton("submitBtn", form) {
  private static final long serialVersionUID = 3005L;

    @Override
    protected void onSubmit(AjaxRequestTarget target, Form<?> form) {
      System.out.println("submit QT ajax button");
      setResponsePage(HomePage.class);
      sendQuery();
      target.add(form);
    }

    @Override
    protected void onError(AjaxRequestTarget target, Form<?> form) {
      System.err.println("error occurred. " + target);
      target.add(feedback);
    }
  };
  submitBtn.setOutputMarkupId(true);
  return submitBtn;
}

// separate FormComponentModel for timeRange

public class TimeRangePanel extends FormComponentPanel<MyRange> {

MyRange range;
PropertyModel<Date> dpFromPM = new PropertyModel<Date>(this, "range.start");
PropertyModel<Date> dpToPM = new PropertyModel<Date>(this, "range.stop");
public RangePanel(String id, IModel<MyRange> model) {
  super(id, model);

dpFrom = new DateTimeField("dpFrom", dpFromPM) {
  private static final long serialVersionUID = 3006L;

  @Override
  protected DateTextField newDateTextField(String id, PropertyModel<Date> model) {

    DateTextField dtf = super.newDateTextField(id, model);

    AjaxFormComponentUpdatingBehavior a = new AjaxFormComponentUpdatingBehavior("onChange") {
      private static final long serialVersionUID = 3006L;
      @Override
      protected void onUpdate(AjaxRequestTarget target) {
        System.out.println("here u " + dpFrom.getModelObject().toString());
      }
    };
    dtf.add(a);
    return dtf;
  }
};

// second DateTimeField as dpFrom

} // end of constructor

@Override
protected void onBeforeRender() {
  range = getModelObject();
  super.onBeforeRender();
}

} // end of class 
```

**编辑2**

这是 wicket ajax 调试窗口正在打印的内容：

```
INFO: focus removed from 
INFO: focus set on submitBtn11
INFO: Received ajax response (299 characters)
INFO:
<div wicket:id="feedbackQuery" class="feedback" id="feedbackQuery1c"><wicket:panel>
  <ul wicket:id="feedbackul" class="feedbackPanel">
    <li wicket:id="messages" class="feedbackPanelERROR">
      <span wicket:id="message" class="feedbackPanelERROR"></span>
    </li>
  </ul>
</wicket:panel></div>
INFO: returned focused element: [object HTMLInputElement]
INFO: returned focused element: [object HTMLInputElement]
INFO: Response processed successfully.
INFO: refocus last focused component not needed/allowed
INFO: focus removed from submitBtn11 
```

**编辑3**

正如我在评论中所写：

我删除了可重用的组件（*FormComponentPanel*），现在我没有收到 AjaxButton 错误。无论如何，这很奇怪，我认为可重用组件应该可以工作，即使使用 Ajax；模型也被正确分配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:03:59.463

> 单击按钮时出现一些错误（[AjaxRequestHandler@1701777932 responseObject [org.apache.wicket.ajax.AjaxRequestHandler$1@3e1]），但没有关于该错误的更多信息

=> 您应该在开发模式下运行 Wicket 以获得更详细的跟踪。

您可以简单地在表单中添加一个名为：

range.start

range.stop

并使用 Object MyRange 作为属性模型，而不是为每个字段创建一个新模型。实际上不需要那个额外的循环。如果您为每个属性创建新的 PropertyModel，我认为 Wicket 不会将信息写回 MyRange 对象。

例如： http: [//svn.apache.org/viewvc/incubator/openmeetings/trunk/singlewebapp/src/org/apache/openmeetings/web/components/admin/users/UserForm.java](http://svn.apache.org/viewvc/incubator/openmeetings/trunk/singlewebapp/src/org/apache/openmeetings/web/components/admin/users/UserForm.java?view=markup) ?view=markup 第276行

和相应的 HTML [http://svn.apache.org/viewvc/incubator/openmeetings/trunk/singlewebapp/src/org/apache/openmeetings/web/components/admin/users/UsersPanel.html?view=markup](http://svn.apache.org/viewvc/incubator/openmeetings/trunk/singlewebapp/src/org/apache/openmeetings/web/components/admin/users/UsersPanel.html?view=markup) 第82行

塞巴斯蒂安****

# java - 将自定义事件侦听器添加到 java bean 中以供 setter

> ID：12781740
> 
> 赞同：1
> 
> 时间：2012-10-08T12:27:06.657
> 
> 标签：java, jsf-2, javabeans, addeventlistener

我有一个 bean，它有很多属性，其中一半是 n 对 n 关系。我还添加了额外的瞬态“ ***isEdited*** ”布尔值，以确保用户已经完成了一些更改，这样我就可以减少所有实体的 db 获取。我当前的问题有时我需要序列化我的 bean 并希望将属性与真实实例进行比较。我尝试的第一个解决方案来自**apache commons-lang** =>`EqualsBuilder.reflectEqual();`方法，它对我来说效果不佳，因为一些继承的项目没有以正确的方式实现 equals 方法，我无法编辑它们。我知道我可以添加 ajax 侦听器来更新已编辑的属性，或者我可以更新每个 setter 方法或新的 equals 实现。但我正在寻找更实用和通用的方式，这样我将来也可以使用这个实现。

所以我想要什么：（假设我有一个简单的 bean）：

```
public class Foo {

    private String prop1;

    private String prop2;

    /**
     * @return the prop1
     */
    public String getProp1() {
        return prop1;
    }

    /**
     * @param prop1 the prop1 to set
     */
    public void setProp1(String prop1) {
        this.prop1 = prop1;
    }

    /**
     * @return the prop2
     */
    public String getProp2() {
        return prop2;
    }

    /**
     * @param prop2 the prop2 to set
     */
    public void setProp2(String prop2) {
        this.prop2 = prop2;
    }

} 
```

比我的 bean 将实现一个`EventListener`接口，这个侦听器将处理所有设置器。如果调用任何 setter 方法（在初始化之后），则编辑的属性将设置为 true。

所以我的问题是添加动作/事件监听器来处理设置器的正确方法是什么？

**编辑****我试过[PropertyChangeListener](http://www.kodejava.org/examples/343.html)但没有得到任何事件输出。如果我添加每个 setters`pcs.firePropertyChange();`方法，那么我可以通过这些方法直接设置**isEdited是没有意义的。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:28:07.980

你不能有一个`Map<String,Boolean>`并用每个​​二传手更新它吗？以`prop1`为例：

```
public void setProp1(String prop1) { 
    if(!prop1.equals(this.prop1))
        updateMap.put("prop1", true);
    this.prop1 = prop1;
} 
```

这样，在保存实体时，您将拥有一个包含该“元数据”的地图。

*编辑：*有一个缺陷很难，因为如果用户设置一个值，然后返回到原来的地图将保持真实。您可以通过使用另一个地图（或克隆您的对象）与原始值来比较两者来避免这种情况：

```
public void setProp1(String prop1) { 
    if(!prop1.equals(this.prop1) && !prop1.equals(ORIGINAL_VALUE))
        updateMap.put("prop1", true);
    else
        updateMap.put("prop1", false);
    this.prop1 = prop1;
} 
```

*编辑：*亚当在方面是正确的，确实这是一个可能会花费你一些时间的改变。此外，如果您想使用反射，还有另一个问题，因为您与方法的结构有关。将来，如果您想更改方法的名称或类型，您也必须更新该反射助手类。

我建议在保存它们之前更新时间值，以便您可以将它们与原始值进行比较，但是如果您在没有 getter 的情况下直接访问字段/对象，这将涉及更改您的方法。

最后，第三种选择（总是有第三种）我认为您可能愿意做的就是`valueChangeListener`在您的组件中使用 's。例如：

```
<h:inputText id="prop1Input" value="#{bean.prop1}" valueChangeListener="#{bean.changesListener}"/> 
```

你的 bean 应该有一个具有这种结构的方法：

```
public void changesListener(ValueChangeEvent e) {
    //Get the new value
    Object o = e.getNewValue();
    //get the component's id
    String componentId = e.getComponent().getId();
    //Cast the value and compare it, after that you should update a map. You are
    //going to need one anyway to know which field changed.
    boolean valueChanged = //compare against original value
    if(componentId.equals("prop1Input"));
    map.put("prop1", valueChanged);
} 
```

关于这种方法的一个重要说明是，侦听器将在验证阶段执行。此侦听器的目的是能够处理新旧值，这似乎是您的情况。因为您也可以知道触发它的组件，所以您应该没问题。

# eclipse - 我的 JSP 文件中没有找到类定义错误

> ID：12781742
> 
> 赞同：0
> 
> 时间：2012-10-08T12:27:13.937
> 
> 标签：eclipse, google-app-engine, jsp, classpath, noclassdeffounderror

我有一个名为 AddBidding.jsp 的 jsp 文件，它为设施添加投标。我正在使用 Google App Engine 的数据存储区（objectify）。当我尝试使用`localhost:8888/AddBidding.jsp`. 但是，它一直给我`NoClassDefinitionFound`错误。我能知道是什么导致了这个错误吗？我知道这是由于类路径，但如何在 Eclipse GAE 中修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:17:36.093

右键单击项目资源管理器视图上的项目>“配置构建路径”

*   在源 [选项卡] 确保您的默认输出文件夹是正确的
*   在 Libraries [tab] 中，您有 Web App Libraries
    *   如果不添加库...

那应该让你工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:43:38.610

我在这里做了一些假设，因为没有太多关于哪个类给你`NoClassDefFound`错误的细节。只需确保您使用的所有外部（附加）JAR 也存在于该`WEB-INF\lib`文件夹中。例如，将所有 Objectify 和相关 JAR 放入`WEB-INF\lib`文件夹中，然后尝试。

# php - 简单的 preg 表达式，根据空格将名称分成两部分

> ID：12781743
> 
> 赞同：-2
> 
> 时间：2012-10-08T12:27:14.410
> 
> 标签：php, regex

我有一个名为“名称”的表单字段 - 但我想使用 preg 表达式将提交作为名字和姓氏保存到数据库中。

有人可以说明如果我在字段中输入名称“约翰史密斯”，正则表达式将如何将其剥离为名字 - 约翰姓氏 - 史密斯

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:31:56.197

```
$names = explode(" ", $POST['name']);
$firstName = $name[0];
$lastName = $name[1]; 
```

然而，这是一个绝对残酷的想法。只需创建一个名字和姓氏表单字段。我保证在某些时候，有人会使用 Alfred E Newman 之类的东西，而你最终会以他们的首字母或中间名作为姓氏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T12:30:20.150

对于简单的情况，您可能只想用空格分割名称：

```
$name = "John Smith";
$nameParts = explode(' ',$name);
var_dump($nameParts); 
```

更复杂的情况（例如标题/中间名）可能会迫使您使用多个输入字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:33:41.523

使用`explode`：

```
<?php
$fullname='John Smith';

list ($firstName,$lastName)=explode(' ',$fullname);

echo 'First name: '.$firstName.PHP_EOL;
echo 'Last name: '.$lastName.PHP_EOL; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T13:00:19.850

刚刚创建了这个功能，以防其他人有类似的问题 - 感谢所有的建议家伙！

[http://ideone.com/gxvi9](http://ideone.com/gxvi9)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T12:29:12.677

首选使用`split`（版本 php < 5.3.0）或者`explode`是`split`函数的别名，在你的情况下，你只需要用空格字符分割你的全名`' '`

```
var $fullname = "John Smith";
var $splitfullname = $fullname.split(' ');

var $firstname = $splitfullname[0];
var $lastname = $splitfullname[1]; 
```

-

```
var $fullname = "John Smith";
var $splitfullname = explode(' ', $fullname);

var $firstname = $splitfullname[0];
var $lastname = $splitfullname[1]; 
```

如果您构建捕获名字和全名的表单，我建议您将全名输入字段拆分为两个输入字段（名字和姓氏）。

# export-to-excel - 使用显示标签导出excel时如何设置工作表名称？

> ID：12781744
> 
> 赞同：0
> 
> 时间：2012-10-08T12:27:15.657
> 
> 标签：export-to-excel, displaytag

我正在使用显示标签导出 excel 工作表。我可以将 excel 文件的名称设置为我想要的任何名称。

但我也想在文件中设置 excel 表的名称。现在默认情况下它设置为' - '这没有任何意义。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T18:26:36.047

在属性名称标签中传递，例如 ${RequiredString/bean property / value from session}

例如。我正在做的是 ${applicationName}

这里的“应用程序名称”是我在动作类中声明的属性，每次提交请求时都会设置。

# android - 操作位图以获得最佳 ocr 检测

> ID：12781745
> 
> 赞同：3
> 
> 时间：2012-10-08T12:27:17.763
> 
> 标签：android, bitmap, tesseract

我正在使用 Tesseract ORC 库从屏幕上拍摄的图像中提取文本。问题是大多数现代相机在拍照时也会捕捉显示屏上的像素。

无论如何，是否可以像过滤器或对位图进行阈值处理以将文本“提取”到更清晰的文本以获得更好的 tesseract 效果？

例如，在处理之前： ![在此处输入图像描述](../Images/ee1ff098899225c900c3ab7695aaef79.png)

处理后（photoshop中的阈值效果）： ![在此处输入图像描述](../Images/fba8cf6bc65743f3bd773f37a346858c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:45:12.003

Tesseract 有一个内置的阈值方法，`TessBaseAPI#ThresholdRect`. 你试过吗？如果是这样，您遇到了什么问题？

如果它在某些图片上效果不佳，您可能想尝试查找一些“平均”或“自适应”阈值算法，因为看起来 Tesseract 是一个直接阈值，因此它可能无法很好地适应较暗/较亮图像没有一些调整。

# android - 如何为 CalendarView 设置 OnClickListener？

> ID：12781747
> 
> 赞同：3
> 
> 时间：2012-10-08T12:27:18.770
> 
> 标签：android

我一直在开发一些Android应用程序，并且有以下代码：

```
 final CalendarView calendarView=(CalendarView)layout.findViewById(R.id.calendarView);
    calendarView.setClickable(true);
    calendarView.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Log.e("event", "click");
    });
    calendarView.setOnLongClickListener(new OnLongClickListener() {

            @Override
            public boolean onLongClick(View v) {
                Log.e("event", "long click");
                return false;
            }

    });
    calendarView.setOnDateChangeListener(new OnDateChangeListener(){

            @Override
            public void onSelectedDayChange(CalendarView view, int year,
                    int month, int dayOfMonth) {
                Log.e("event", "datachanged");
            }

    }); 
```

我需要捕捉“OnClick”事件，但我只捕捉“OnDataChange”事件。我不明白为什么。请帮我。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:42:43.753

由于日历是对话框而不是视图，因此使用 DialogInterface.OnClickListener 而不是 View.OnclickListener

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:35:43.543

我猜“CalendarView”有一些子视图，您可以在这些子视图上注册一个“OnClickListener”，而不是在“CalendarView”上。

看看[这里](http://developer.android.com/reference/android/widget/CalendarView.html)，看看它扩展了“FrameLayout”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-06T16:37:21.487

OnGlobalLayoutListener 可以解决问题。

```
calendarView.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener(){
            @Override
            public void onGlobalLayout()
            {
                  //your code here
            }
        }); 
```

# time-series - Matlab，计量经济学工具箱 - 用确定性时变方差模拟 ARIMA

> ID：12781748
> 
> 赞同：0
> 
> 时间：2012-10-08T12:27:23.987
> 
> 标签：time-series, matlab, simulate

**免责声明：**此问题仅适用于那些可以访问 Matlab 中的计量经济学工具箱的人。

**情况：**我想使用 Matlab`N`使用计量经济学工具箱来模拟来自 ARIMA(p, d, q) 模型的观察结果。有什么困难？我希望用确定性的、时变的方差来模拟创新。

**问题 1）**我可以使用内置的 matlab`simulate`函数*而不自己更改它*吗？据我所知，这是不可能的。根据我对文档的阅读，创新可以指定为具有恒定方差（即每个创新的方差相同），也可以指定为随机随时间变化的（例如 GARCH 模型），但它们不能是确定性的时间-变化，我，用户，选择他们的值（除了在平凡的常数情况下）。

**问题 2）**如果**问题 1**的答案是“否”，那么是否有人看到我无法从计量经济学工具箱中编辑函数的任何原因`simulate`，如下所示：a）更改序言以使函数不会抛出错误如果`Variance`输入中的字段`model`设置为数值向量而不是数值标量。b) 将第 310 行更改`simulate`为：

```
E(:,(maxPQ + 1:end)) = Z * sqrt(variance); 
```

至

```
E(:,(maxPQ + 1:end)) = (ones(NumPath, 1) * sqrt(variance)) .* Z; 
```

其中`NumPath`是要模拟的路径的数量，并且可以假设我已经包含了一个错误陷阱以确保存储的（输入）确定性方差路径`variance`的长度正确（即等于要观察的数量每条路径模拟）。

非常感激任何的帮助。抱歉，如果这个问题看起来很基本，我只是以前从未编辑过 Mathwork 自己的函数之一，也不想做一些愚蠢的事情。

**更新（2012-10-18）：**我相信我上面建议的代码编辑是有效的，而且我最有信心它不会破坏其他任何东西。然而事实证明，由于文件权限，实施该解决方案并非易事。我目前正在与 Mathworks 讨论实现目标的最佳方式。获得结果后，我将在此处发布结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T08:32:56.663

已经一个半星期没有答案了，所以我想我现在可以发布我自己的答案了。

在回答我的**问题 1)**时，不，我还没有找到使用内置的 matlab 函数来做到这一点。

在回答我的**问题 2)**时，是的，我发布的内容将起作用。但是，由于 matlab 文件权限，它比我想象的要复杂一些。这是一个分步指南：

**i)**在您的 matlab 路径中的某处，创建目录`@arima_Custom`。

**ii)**在命令窗口中，键入`edit arima`。将此文件的文本复制到一个新的 m 文件中，并将其保存在文件名为 的目录`@arima_Custom`中`arima_Custom.m`。

**iii)**在您的机器上找到计量经济学工具箱。找到后，`@arima`在工具箱中查找目录。该目录可能位于（在 Linux 机器上）类似的位置`$MATLAB_ROOT/toolbox/econ/econ/@arima`（在我的机器上，$MATLAB_ROOT 位于 /usr/local/Matlab/R2012b）。复制`@arima`to的内容`@arima_Custom`，但不要复制文件`arima.m`。

**iv)**打开`arima_Custom`编辑，即`edit arima_Custom`. 在此文件中，将第 1 行更改为：

```
classdef (Sealed) arima < internal.econ.LagIndexableTimeSeries 
```

至

```
classdef (Sealed) arima_Custom < internal.econ.LagIndexableTimeSeries 
```

接下来，将第 406 行从：

```
function OBJ = arima(varargin) 
```

至

```
function OBJ = arima_Custom(varargin) 
```

现在，将第 993 行从：

```
if isa(OBJ.Variance, 'double') && (OBJ.Variance <= 0) 
```

至

```
if isa(OBJ.Variance, 'double') && (sum(OBJ.Variance <= 0) > 0) 
```

**v）**打开`simulate.m`位于`@arima_Custom`进行编辑（我们在步骤 iii 中将其复制到那里）。最好通过在“当前文件夹”窗口中手动导航到该文件来打开此文件，以确保`simulate.m`打开正确的文件。在此文件中，将第 310 行更改为：

```
E(:,(maxPQ + 1:end)) = Z * sqrt(variance); 
```

至

```
%Check that the input variance is of the right length (if it isn't scalar)
if isscalar(variance) == 0
    if size(variance, 2) ~= 1
        error('Deterministic variance must be a column vector');
    end
    if size(variance, 1) ~= numObs
        error('Deterministic variance vector is incorrect length relative to number of observations');
    end
else
    variance = variance(ones(numObs, 1));
end
%Scale innovations using deterministic variance
E(:,(maxPQ + 1:end)) =  sqrt(ones(numPaths, 1) * variance') .* Z; 
```

我们完成了！

您现在应该能够使用`arima_Custom`该类来模拟具有确定性的时变方差，例如（对于 ARIMA(0,1,0)）：

```
ARIMAModel = arima_Custom('D', 1, 'Variance', ScalarVariance, 'Constant', 0);
ARIMAModel.Variance = TimeVaryingVarianceVector;
[X, e, VarianceVector] = simulate(ARIMAModel, NumObs, 'numPaths', NumPaths); 
```

此外，您还应该能够使用 matlab 的原始`arima`类，因为我们没有更改它。

# c# - 确定 begindate 是否为周末

> ID：12781751
> 
> 赞同：7
> 
> 时间：2012-10-08T12:27:33.620
> 
> 标签：c#

我需要检查从日期选择器中选择的日期是否不在周末。该函数需要不断检查新的开始日期是否为周末。如果周末发生，还需要在开始日期中添加天数。

代码应该是这样的：

```
int startday = Datepicker1.SelectedDate;
if (startdate = weekendday, startdate++)
{
 startdate++ //or if a sunday +2
}
else
{
 return startdate
} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-08T12:30:17.917

```
if (startdate.DayOfWeek == DayOfWeek.Saturday)
    startdate = startdate.AddDays(2);
else if (startdate.DayOfWeek == DayOfWeek.Sunday)
    startdate = startdate.AddDays(1); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T12:33:45.023

使用该`DayOfWeek`属性，您可以明确检查周末。像这样的东西：

```
if ((startDate.DayOfWeek == DayOfWeek.Saturday) ||
    (startDate.DayOfWeek == DayOfWeek.Sunday)) 
```

当然，这对于一个条件来说有点长。将其抽象为辅助方法使其更简洁：

```
private bool IsWeekend(DateTime date)
{
    return (date.DayOfWeek == DayOfWeek.Saturday) ||
           (date.DayOfWeek == DayOfWeek.Sunday)
} 
```

像这样使用：

```
if (IsWeekend(startDate)) 
```

或者，也许更简洁一点，您可以为以下内容编写扩展方法`DateTime`：

```
public static bool IsWeekend(this DateTime date)
{
    return (date.DayOfWeek == DayOfWeek.Saturday) ||
           (date.DayOfWeek == DayOfWeek.Sunday)
} 
```

你会像这样使用它：

```
if (startDate.IsWeekend()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:29:27.817

看看`DateTime.DayOfWeek`记录[在这里](http://msdn.microsoft.com/en-us/library/system.datetime.dayofweek.aspx)。

```
while(startday.DayOfWeek == DayOfWeek.Saturday 
         || startday.DayOfWeek == DayOfWeek.Sunday)
{
   startday = startday.AddDays(1);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T12:29:34.717

您可以简单地使用`DateTime.DayOfWeek`属性。来自 MSDN 的好例子：http: [//msdn.microsoft.com/en-us/library/system.datetime.dayofweek.aspx](http://msdn.microsoft.com/en-us/library/system.datetime.dayofweek.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T12:31:02.600

查看该[`DateTime.DayOfWeek`](http://msdn.microsoft.com/en-us/library/system.datetime.dayofweek.aspx)属性 - 它会为您提供 DateTime 对象所在的星期几。

# objective-c - UICollectionView 删除按钮

> ID：12781763
> 
> 赞同：12
> 
> 时间：2012-10-08T12:28:23.440
> 
> 标签：objective-c, uicollectionview

我有一个 UICollectionView 显示几个项目。我在屏幕工具栏中也有一个编辑按钮。

当我按下工具栏编辑按钮时，如何在每个 UICollectionViewCell 上显示删除图标？

目前谷歌上的例子很少，所以如果有人能指出我正确的方向，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-08T12:57:50.263

在 s 中编辑项目`UICollectionView`的方式与在`UITableView`. 在表格视图中，有一个编辑模式会显示删除按钮。但是对于集合视图，您必须自己处理。

最初，我是这样解决的：

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath {   
    if (self.editing) {
        // Open an action sheet with the possible editing actions
    }
} 
```

但在那之后，我删除了编辑按钮并`UILongPressGestureRecognizer`在`UICollectionView`. 当长按一个项目时，我会`UIActionSheet`显示可能的操作。

其中一个选项对您来说可能是一种可能性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:14:23.917

您的代码定义了集合视图中的单元格的外观。您可以向数据源提供的单元格的 contentView 添加删除图标/按钮。

# typescript - TypeScript：使类仅在模块内可见

> ID：12781767
> 
> 赞同：12
> 
> 时间：2012-10-08T12:28:29.753
> 
> 标签：typescript

看看下面的代码：

```
module MyModule {
    class MyPrivateClass {
        ...
    }

    export class MyPublicClass {
        private var: MyPrivateClass; // MyPrivateClass is unknown
    }
} 
```

我希望*MyPrivateClass*仅在*MyModule*中可见，特别是在*MyPublicClass*内部使用。*在MyModule*之外，只有*MyPublicClass*应该是可见的。我认为上面的布局应该可以，但是 VS 抱怨*MyPrivateClass在**MyPublicClass*中不可见。*在MyPrivateClass*的定义之前添加 export使其对*MyPublicClass*可见，但随后从外部也可见。

有没有办法让它只对*MyPublicClass*可见？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-12T16:32:08.747

这是一个工作示例，显示了私有类，公共类，使用来自公共类的私有类并尝试使用私有类，这会产生错误。

如果您仍然收到错误，您是否能够披露您尝试用于导致问题的模块的名称？

```
module MyModule {
    class MyPrivateClass {
        doSomething() {
            return 1;
        }
    }

    export class MyPublicClass {
        private x = new MyPrivateClass();

        someFunction() {
            return this.x.doSomething();
        }
    }
}

var examplePublic = new MyModule.MyPublicClass();
var result = examplePublic.someFunction(); // 1

var examplePrivate = new MyModule.MyPrivateClass(); // error 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T16:39:55.220

如果您希望它在发出的 JavaScript 中是私有的，您可以通过将私有 clas 实例移动到模块内部来做到这一点，而不是在导出的类内部。

```
module MyModule {
    class MyPrivateClass {
        prop1: number = 1;
    }

    var foo: MyPrivateClass = new MyPrivateClass();

    export class MyPublicClass {
        someMethod(){
            var bar = foo.prop1;
        }
    }
}

var x = new MyModule.MyPublicClass(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:40:26.217

嗯，我看不出有什么问题，但是别忘了初始化字段值，否则编译器不会生成字段：

```
module MyModule {
    class MyPrivateClass {

    }

    export class MyPublicClass {
        private instance: MyPrivateClass; // MyPrivateClass is unknown
        constructor() {
           this.instance = new MyPrivateClass();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-19T12:15:53.093

您在其中一条评论中说：

> 很奇怪：如果我粘贴上面的代码（你的或我的），那很好。但是一旦我将模块的名称更改为它的真实名称，就会出现我描述的错误

这听起来与我遇到的问题非常相似。这是因为我一直在使用各种引用路径来导入模块。结果模块内的成员不能互相访问。

对不起，我不记得更多细节了，我无法重现您（或我）的错误。这可能没用，但我想我还是会分享我的经验：混合引用路径和模块似乎会导致非常奇怪的错误。

此外，有时 VisualStudio 的行为相当奇怪。我目前正在和一个朋友一起做一个打字稿项目。代码存储在 github 存储库中。我们都提取了相同的版本。我为我工作得很好，并且为他撒了错误信息。相同的操作系统，相同版本的 Typescript，相同版本的 VisualStudio，......有趣的是，错误也与模块有关。导入的模块似乎是“空的”。所有试图使用该模块内容的代码都被标记为红色。他重新启动了 VisualStudio，突然间，代码被认为是有效的。我们没有改变任何东西！它编译也没有问题。

# javascript - 更改 html 元素的 ID

> ID：12781774
> 
> 赞同：0
> 
> 时间：2012-10-08T12:28:57.853
> 
> 标签：javascript, html

我有一个表单，它允许用户动态添加元素（可能是字段集或文本框）。添加时我可以为元素分配一个新的 ID，但我无法按顺序创建它，因为用户也可以在两者之间添加元素。

例如，有一个名为 XXX1 的 Id，用户在其后添加了一个新元素，即 xxx2。现在如果用户在 XXX1 之后再次添加一个新元素，它就会出现为 XXX3。所以元素的顺序是XXX1，XXX3，XXX2。添加名称时我无法控制名称。所以我试图在添加后重新分配名称。

我正在尝试获取数组中的所有元素并按如下方式更改 ID

```
document.getElementById('xxx3').setAttribute('id', 'xxx2'); 
```

但这不起作用，因为另一个元素的 ID XXX2 已经存在。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:45:40.993

为什么不从最后一个元素到第一个元素（在您要插入的位置之后的那个）并将一个添加到 ID 中？

例如：

```
var insertAt = 2; // for an element to be called xxx2
var els = [...]; // an array with all of the elements
if(els.length >= insertAt){
  for(var i = els.length-1; i >= insertAt-1; --i){
    els[i].setAttribute('id', 'xxx'+(i+2));
  }
}
// Add the new element here which will be called xxx2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:33:55.293

那么为什么不`xxx2`先更改 ID，将其移开，然后再将其放回原处呢？

```
document.getElementById('xxx2').setAttribute('id', 'temporaryId');
document.getElementById('xxx3').setAttribute('id', 'xxx2');
document.getElementById('temporaryId').setAttribute('id', 'xxx3'); 
```

# windows - windows phone 7 中的 SOAP 解析

> ID：12781775
> 
> 赞同：0
> 
> 时间：2012-10-08T12:28:59.010
> 
> 标签：windows, windows-phone-7

我将从 10 天开始搜索，但我在 wp7 中的肥皂解析中没有成功。

我的代码如下。我得到远程服务器返回错误：未找到。和 System.Net.WebException。

代码如下：

```
 private const string AuthServiceUri = "http://manarws.org/WS/manarService.asmx";
    private const string AuthEnvelope =
                       @"<?xml version=""1.0"" encoding=""utf-8""?>
                    <soap:Envelope xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema"" xmlns:soap=""http://schemas.xmlsoap.org/soap/envelope/"">
                        <soap:Body>
                            <fnGetNewsResponse xmlns=""http://tempuri.org/"">
                               <fnGetNewsResult></fnGetNewsResult>
                               </fnGetNewsResponse>                
                        </soap:Body>
                    </soap:Envelope>";

 public void Authenticate()
    {
        HttpWebRequest spAuthReq = HttpWebRequest.Create(AuthServiceUri) as HttpWebRequest;
        spAuthReq.Headers["SOAPAction"] = "http://tempuri.org/fnGetNews";
        spAuthReq.ContentType = "text/xml; charset=utf-8";
        spAuthReq.Method = "POST";
        spAuthReq.BeginGetRequestStream(new AsyncCallback(spAuthReqCallBack), spAuthReq);
    }

 private void spAuthReqCallBack(IAsyncResult asyncResult)
    {
        UTF8Encoding encoding = new UTF8Encoding();
        HttpWebRequest request = (HttpWebRequest)asyncResult.AsyncState;
        System.Diagnostics.Debug.WriteLine("REquest is :" + request.Headers);
        Stream _body = request.EndGetRequestStream(asyncResult);
        string envelope = string.Format(AuthEnvelope,"","");
        System.Diagnostics.Debug.WriteLine("Envelope is :" + envelope);
        byte[] formBytes = encoding.GetBytes(envelope);
        _body.Write(formBytes, 0, formBytes.Length);
        _body.Close();
        request.BeginGetResponse(new AsyncCallback(ResponseCallback), request);
    }

 private void ResponseCallback(IAsyncResult asyncResult)
    {
        System.Diagnostics.Debug.WriteLine("Async Result is :" + asyncResult);

        HttpWebRequest request = (HttpWebRequest)asyncResult.AsyncState;
        HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asyncResult);

        System.Diagnostics.Debug.WriteLine("Response is :::::::::::::::::::----" + request.EndGetResponse(asyncResult));

        if (request != null && response != null)
        {
            if (response.StatusCode == HttpStatusCode.OK)
            {
                StreamReader reader = new StreamReader(response.GetResponseStream());
                string responseString = reader.ReadToEnd();
            }
        }
    } 
```

我得到了`HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asyncResult);`在线错误...

所以，请帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:31:06.610

也许我遗漏了一些东西，但为什么不只是添加一个服务参考？

位于“ [http://manarws.org/WS/manarService.asmx](http://manarws.org/WS/manarService.asmx) ”的服务是经典的Web 服务，您可以浏览wsdl。您可以在 Visual Studio 中添加引用。它将生成一个代理类来调用此 Web 服务。手动肥皂解析是相当痛苦的。

**编辑 ：**

1）右键单击项目中的服务参考。

![第1步](../Images/7e21661acb47ccfb0529e7bcf8ad2e23.png)

2) 输入您的服务网址。然后点击前往。

![第2步](../Images/cc0eb31078872349edc69d00e27e1b4a.png)

3）您的项目中将有新的课程。

随心所欲地使用它们。例子：

```
public void GetBranches()
{
    ManarServiceReference.manarServiceSoapClient client = new ManarServiceReference.manarServiceSoapClient();
    client.fnGetBranchesCompleted += new EventHandler<ManarServiceReference.fnGetBranchesCompletedEventArgs>(client_fnGetBranchesCompleted);
    client.fnGetBranchesAsync();
}

void client_fnGetBranchesCompleted(object sender, ManarServiceReference.fnGetBranchesCompletedEventArgs e)
{
    //TODO
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:51:42.247

按照以下步骤了解如何使用 SOAP 服务

```
-- Create a new project.
-- Right-click on the Project name and click on "Add Service Reference"...
   Then provide address as "http://manarws.org/WS/manarService.asmx?wsdl" and click Go.
-- Once service information is downloaded, provide Namespace something like
   "MyMemberService" at the bottom and click Ok. 
```

现在你的代理类应该已经准备好了。
转到您的 Mainpage.xaml.cs 并在那里键入“client”..您可能应该得到一个名为“ManarServiceClient”的类。

如果你明白了，然后尝试调用该类的合适方法。

例如，

```
ManarServiceClient client = new ManarServiceClient();
client.fnGetNewsResponseCompleted += new EventHandler<fnGetNewsResponseCompletedEventArgs>(client_fnGetNewsResponseCompleted);
client.fnGetNewsResponseAsync(); 
```

注意：我没有使用我的工作系统，所以不能给你确切的代码。以上所有内容都是猜测的代码，将为您指明正确的方向。将测试我的代码并尽快更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-23T23:45:41.663

如果您创建一个 asmx Web 服务。第一次通话非常慢。

# javascript - 大型 NodeJS 应用程序特有的潜在复杂性/问题是什么

> ID：12781776
> 
> 赞同：15
> 
> 时间：2012-10-08T12:28:59.323
> 
> 标签：javascript, node.js

我来自“传统 Web 应用程序”背景：想想 Java、.NET、PHP、ColdFusion 等。

在评估将 NodeJS 用作重要应用程序的主要服务器端技术时，我想知道开发人员和运维人员团队可能会面临哪些复杂性、问题和挑战，这些都是 NodeJS 独有的。简而言之，我想减少我的未知数。一些（不是全部）示例：

*   它在多大程度上适合大型团队开发？对于 Node 来说，在 20 或 50 或 200 名开发人员的团队中存在哪些独特的挑战？
*   在数据库访问方面存在哪些独特的挑战？“企业”数据访问问题主要在 Java 中处理（连接池、安全性等通过 Spring）。Node是这种情况吗？
*   报告繁重的应用程序通常需要 Excel、PDF 甚至 PNG 导出...... Node 在这种类型的应用程序中表现如何？
*   Node 在开发时调试方面是否存在任何独特的挑战？
*   存在哪些独特的运营挑战？从服务器重新启动/热代码交换/负载平衡到用于监视和管理生产集群的工具的一切。

等等。开发、维护和生产管理 100+K LoC 代码库，部署在服务器场中，由数十名开发人员接触，有哪些经验教训？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T13:05:30.897

我会尝试回答你的一些问题

**它在多大程度上适合大型团队开发？对于 Node 来说，在 20 或 50 或 200 名开发人员的团队中存在哪些独特的挑战？**

*   它的作用与其他所有语言一样；没有什么！程序员团队通常使用 git、svn、mercurial 等版本控制系统来处理处理相同文件的同事

**在数据库访问方面存在哪些独特的挑战？“企业”数据访问问题主要在 Java 中处理（连接池、安全性等通过 Spring）。Node是这种情况吗？**

*   节点与数据库无关。您可以将任何数据库与节点一起使用，其中存在驱动程序/包装器（与 PHP 相同）。有许多用于关系数据库（MySQL、SQLite）和 NoSQL（MongoDB）的驱动程序/包装器

**报告繁重的应用程序通常需要 Excel、PDF 甚至 PNG 导出...... Node 在这种类型的应用程序中表现如何？**

*   Node 可以像 php 和其他人一样访问普通的 shell。因此，如果您使用 php 处理图像，则您使用的是 ImageMagick 或 GD 的包装器。GD 需要安装在 WebServer 上才能工作，因为 php 将命令发送到命令行。与节点相同；找到一个包装器 (http://search.npmjs.org) 并使用您想要的功能。

**Node 在开发时调试方面是否存在任何独特的挑战？**

*   Node 是 Javascript，所以它不会编译，但会 JIT。因此，只有在执行失败时才会检测到失败。您需要为您的登台/开发机器和实时服务器旁边的每个开发人员提供一个本地环境，以便他们可以在将代码提交到登台服务器之前对其进行测试

**存在哪些独特的运营挑战？从服务器重新启动/热代码交换/负载平衡到用于监视和管理生产集群的工具的一切。**

*   我知道没有“独特”的挑战。您将像处理所有其他语言一样处理监控/心跳（是的，有些语言可以这样做，例如 Erlang）。您将需要像 forever 或 supervisord 这样的服务来在服务器重新启动时启动节点，但这与 Apache+PHP/Perl 相同。
*   （Node 有一个 Cluster 模块，可以帮助您处理多个工作人员（用于多核服务器））

查看 Git 来管理您的代码。并根据你想做的事情选择语言（高并发、可扩展性）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T13:24:20.807

我将评论我有资格的事情：

1.  **与数据源的连接池。** 标准 Node HTTP(S) 服务器工具默认实现池化，您可以配置一些旋钮来提高或控制性能。社区非常活跃，有许多其他项目（如[poolee](https://github.com/dannycoates/poolee "池子")）实现通用或专用连接池。你需要环顾四周。事实上，鉴于您的传统 Webdev 背景...

    1.1**旁注：第三方库** 使用 Node 开发时，您可能会发现自己使用*了大量*的第三方库。根据您的特定背景，这可能看起来很奇怪。要了解原因，请考虑 .NET 或 Java：这些平台的标准库非常*庞大*。因此，在使用这些平台时，您可能会选择很少的第三方工具或插件来帮助您完成工作。相比之下，Node 有一个*有意缩小*且严格控制的标准库。为了服务器性能而统一“事物的编写方式”所需的所有 API 都在那里，但仅此而已。

    为了帮助管理第三方库，`npm`包管理器很早就被设计并包含在 node.js 中。众所周知，它的质量很高。作者清楚地预见到了很多第三方的使用。

2.  **计算能力** 您提到了图像导出。存在所有这些东西的 Javascript 库，所以就“它可以轻松完成”而言，它可以。请记住，如果您有一项计算繁重的任务，Javascript 可能不是实现核心计算的最有效语言。如果需要，v8 引擎允许您使用 C 语言编写模块，但是将请求转发到专门的后端服务器是 Node 做得非常好的事情。

3.  **运营挑战** Node.js 不会扩展到您的硬件。如果您的服务器有多个内核（现在肯定有），您将需要在同一物理硬件上运行多个服务器进程以实现高利用率。这可能会为操作提供不同的画面：比您通常看到的更多进程，这些进程可按物理机或虚拟机分组。

    顺便说一句，将你的服务器分成进程对可靠性来说并不是一件坏事：一个大型的传统进程会因未处理的异常而崩溃，从而导致八个（或其他）核心价值的活动会话崩溃。多个节点进程仍会单独崩溃，但影响较小。考虑到性能和可监控性，可能还有探讨“多少进程太多？”这一点的空间。实际上，每台服务器使用比可用内核更多的 Node 进程可能是值得的。

# ruby - 块注释的确切规范

> ID：12781778
> 
> 赞同：2
> 
> 时间：2012-10-08T12:29:00.600
> 
> 标签：ruby, comments, block-comments

块注释的确切规范是什么？`=begin`第一行和最后一行必须完全以and开头，这似乎是真的`=end`。但除此之外，还有一点不明确。一些描述说`=begin`并且`=end`必须是相应行的唯一内容，但这似乎不是真的。运行 Ruby 1.9.3 MRI，我得到以下结果。

添加空白字符似乎仍然有效：

```
=begin \t\t   \t
  This is not a Ruby command and should raise an exception if read.
=end \t\t\t   \t\t\t\t
# => no problem 
```

此外，似乎我可以在一个或多个空格字符后添加任意字符串（不包括“\n”），仍然可以：

```
=begin \t\t   \tblah blah blah
  This is not a Ruby command and should raise an exception if read.
=end \t\t\t   \t\t\t\tThis is some scribble
# => no problem 
```

`=begin`我可以在块注释的中间添加一行：

```
=begin
  This is not a Ruby command and should raise an exception if read.
=begin
  So as this one.
=end
# => no problem 
```

但不是有资格作为评论最后一行的行：

```
=begin
  This is not a Ruby command and should raise an exception if read.
=end blah blah
  So as this one.
=end
# => error 
```

是这个规范，还是依赖于实现的行为？为清楚起见，有人可以用正则表达式描述 Ruby 块注释语法的确切规范吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T13:02:44.657

Ruby 编程语言，第 26 页：“Ruby 支持另一种风格的多行注释，称为*嵌入式文档*。（...）

出现在评论之后`=begin`或`=end`作为评论一部分的任何文本也会被忽略，但额外的文本必须与`=begin`and分隔`=end`至少一个空格。(...)

嵌入式文档通常由在 Ruby 源代码上运行的某些后处理工具使用，并且通常`=begin`带有一个标识符，该标识符指示注释针对的是哪个工具。”

另一种使用方式：

```
=begin Please fix this!
non working code #this is a comment line
=end non working code

#=begin Please fix this!
non working code #now this line gets run
#=end non working code 
```

# formatting - Go 语言中的打印格式列表

> ID：12781781
> 
> 赞同：16
> 
> 时间：2012-10-08T12:29:01.630
> 
> 标签：formatting, go

只想知道使用 fmt 包的功能的打印格式列表。

例如，像：

%v 用于打印值。%T 可以打印值的类型。

还有什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-08T12:31:25.793

[**fmt 包**](http://golang.org/pkg/fmt/)的文档中提供了格式“动词”的列表：

**一般的：**

```
%v  the value in a default format.
    when printing structs, the plus flag (%+v) adds field names
%#v a Go-syntax representation of the value
%T  a Go-syntax representation of the type of the value
%%  a literal percent sign; consumes no value 
```

**布尔值：**

```
%t  the word true or false 
```

**整数：**

```
%b  base 2
%c  the character represented by the corresponding Unicode code point
%d  base 10
%o  base 8
%q  a single-quoted character literal safely escaped with Go syntax.
%x  base 16, with lower-case letters for a-f
%X  base 16, with upper-case letters for A-F
%U  Unicode format: U+1234; same as "U+%04X" 
```

**浮点数和复数成分：**

```
%b  decimalless scientific notation with exponent a power of two,
    in the manner of strconv.FormatFloat with the 'b' format,
    e.g. -123456p-78
%e  scientific notation, e.g. -1234.456e+78
%E  scientific notation, e.g. -1234.456E+78
%f  decimal point but no exponent, e.g. 123.456
%g  whichever of %e or %f produces more compact output
%G  whichever of %E or %f produces more compact output 
```

**字符串和字节片：**

```
%s  the uninterpreted bytes of the string or slice
%q  a double-quoted string safely escaped with Go syntax
%x  base 16, lower-case, two characters per byte
%X  base 16, upper-case, two characters per byte 
```

**指针：**

```
%p  base 16 notation, with leading 0x 
```

**其他标志：**

```
+   always print a sign for numeric values;
    guarantee ASCII-only output for %q (%+q)
-   pad with spaces on the right rather than the left (left-justify the field)
#   alternate format: add leading 0 for octal (%#o), 0x for hex (%#x);
    0X for hex (%#X); suppress 0x for %p (%#p);
    print a raw (backquoted) string if possible for %q (%#q);
    write e.g. U+0078 'x' if the character is printable for %U (%#U).
' ' (space) leave a space for elided sign in numbers (% d);
    put spaces between bytes printing strings or slices in hex (% x, % X)
0   pad with leading zeros rather than spaces 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-30T07:45:02.090

您可以了解更多信息，请查看[http://golang.org/pkg/fmt/](http://golang.org/pkg/fmt/)

并运行

```
$ godoc -http=0.0.0.0:8080 
```

浏览器打开 localhost:8080 以获取整个离线 go 网站（还包括您的 go src 和 doc）

# mysql - MySQL GROUP_CONCAT 多个字段

> ID：12781784
> 
> 赞同：5
> 
> 时间：2012-10-08T12:29:12.177
> 
> 标签：mysql, concat, group-concat

我可能有一个无脑的时刻。

我想使用 GROUP_CONCAT 从我的数据库中的两个字段返回一系列数字。到目前为止，我已经使用以下方法完成了此操作：

```
SELECT t_id,
CONCAT(GROUP_CONCAT(DISTINCT s_id),',',IFNULL(GROUP_CONCAT(DISTINCT i_id),'')) AS all_ids
FROM mytable GROUP BY t_id 
```

这很好用，但如果 i_id 为 NULL，那么我当然会得到一个不必要的逗号。有没有更好的方法来做到这一点，所以如果 i_id 为 NULL，我最后不会以逗号结尾？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-08T12:32:27.010

您需要使用[CONCAT_WS](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html)来避免额外`comma`的`NULL`值，试试这个：

```
SELECT t_id,
       CONCAT_WS(',', GROUP_CONCAT(DISTINCT s_id),
                 GROUP_CONCAT(DISTINCT i_id)) AS all_ids
FROM mytable
GROUP BY t_id; 
```

# javascript - Mozilla Persona/BrowserID email address and cookies

> ID：12781787
> 
> 赞同：3
> 
> 时间：2012-10-08T12:29:25.920
> 
> 标签：javascript, authentication, session-cookies, mozilla, browserid

Sorry for the generic title. I'm playing around with Mozilla's Persona at the moment. I'm using Express.js with the [express-persona](http://jbuck.github.com/express-persona/) middleware so setting everything up was incredibly simple. The client-side part is easy too, but I'm having a hard time understanding one particular part of the documentation. It says:

> *loggedInUser:* The email address of the user currently logged into your site from this computer, or *null* if noone is logged in. **For example, you might examine the browser's cookies to determine who is signed in.** [...] Persona will compare the email address you've passed into *loggedInUser* with its own knowledge of whether a user is currently logged in, and who they are. If these don't match, it may automatically invoke *onlogin* or *onlogout* on page load. ([Source](https://developer.mozilla.org/en-US/docs/Persona/Quick_Setup#Step_3.3A_Watch_for_login_and_logout_actions))

express-persona sets a cookie which includes (I guess) the crypto-foo that acts as a password replacement. Am I supposed to store the email address returned by the backend in a separate cookie? That doesn't seem to be a very good idea. Maybe one of you guys knows how that's supposed to work.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T15:11:16.700

You wouldn't store the email address in a cookie for Persona, any more than you'd store the username in a cookie for a password-driven login.

No, basically you do the same thing with Persona: Use a session, stored on your server, keyed from a cookie. The only difference is that your site went through the Persona auth process, instead of verifying a username + password.

The example on the page you linked to has a currentUser variable. Well, in a real web site, that variable would be filled in as a template from the server side. Do whatever you would do to support a login session, find the currently authenticated user, insert that user's email address.

# iphone - 如何在应用程序启动时加载所有选项卡视图控制器？

> ID：12781789
> 
> 赞同：0
> 
> 时间：2012-10-08T12:29:27.263
> 
> 标签：iphone, uitabbarcontroller, loadview

基本上，当我启动我的应用程序时，我会显示选项卡视图控制器，它会显示第一个选项卡，并且只加载第一个选项卡。我想同时预加载其余的视图控制器。我找到了这篇文章 -[加载所有 TabBar 视图](https://stackoverflow.com/questions/9202737/load-all-tabbar-views)

但我收到错误。我调用标签栏控制器`[subcontroller view]`的`viewDidLoad`方法。我正在使用故事板。问题是我收到错误 - 无法在包中加载 NIB：'NSBundle'

我错过了什么？

编辑：

我会尽量简洁——Tabbar 有 4 个视图控制器，对应 4 个不同的选项卡。当用户按下选项卡时，会加载相应的视图控制器。首次启动应用程序时，仅加载第一个视图控制器。其他视图控制器未加载，它们在用户点击其选项卡后加载。我希望所有这些控制器都加载到内存中，以便我可以对它们做一些事情（它们没有显示在屏幕上）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:25:57.740

// 加载项目中 appdelegate.h 文件中的所有视图控制器

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
 ViewController1 *view1=[[ViewController1 alloc]initWithNibName:nil bundle:nil   ];
 view1.tabBarItem.image = [UIImage imageNamed:@"1.jpg"];
 UINavigationController *navi1=[[UINavigationController alloc]initWithRootViewController:view1];

ViewController2 *view2=[[ViewController2 alloc]initWithNibName:nil bundle:nil   ];
 view1.tabBarItem.image = [UIImage imageNamed:@"1.jpg"];
 UINavigationController *navi2=[[UINavigationController alloc]initWithRootViewController:view2];
  NSArray *navi= [[NSArray alloc]initWithObjects:navi1,navi2,navi3,navi4,nil];

 UITabBarController * bar=[[UITabBarController alloc]init];
 NSArray *navi= [[NSArray alloc]initWithObjects:view1,view2,nil];
 bar.viewControllers=navi;
 [self.bar setViewControllers:navi animated:YES];
 self.window.rootViewController=self.bar;
 [self.window addSubview:bar.view];
  [self.window makeKeyAndVisible];
  return YES;

}

} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-08T12:34:53.717

就像我所理解的那样，您想加载所有其他视图并在您按下水龙头时将其设置为准备午餐:) 如果您想要的是，您可以加载它并在后台构建它并将其添加到视图中，但您需要隐藏它直到你按下你显示你想要的视图并隐藏其他视图。

如果您构建自定义选项卡，此答案将起作用:)

# shell - Shell 脚本：在邮件日志中搜索目录中的每个文件夹名称

> ID：12781792
> 
> 赞同：0
> 
> 时间：2012-10-08T12:29:47.370
> 
> 标签：shell

我有一个包含子文件夹的文件夹：

```
/example.org
  /account1
  /account2
  /account3 
```

我想搜索 /var/log/maillog、/var/log/maillog.1、/var/log/maillog.2 等，以查找帐户文件夹名称的出现。

如果没有出现，我想将其记录到文件中。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:42:38.487

我会用 grep 来做。

首先，您必须获得要“搜索”的模式。这些帐户（在您的情况下为子目录名称）。您可以使用`find`or`ls`获取这些子目录名称，每行。例如：`ls -l |grep "^d"|awk '{print $8}'`

所以模式文件看起来像：（比如，保存为 pattern.txt）

```
account1
account2
account3 
```

那么你可以：

```
grep -FL -f pattern.txt /var/log/maillog* 
```

这将列出那些在您的 pattern.txt 中不包含帐户的 maillog* 文件。

如果您希望将这些输出保存为文件，只需重定向`> file`

请注意，以上所有内容都没有经过测试，只是关于如何解决问题的想法。希望能帮助到你。

# php - get_headers 不一致

> ID：12781795
> 
> 赞同：4
> 
> 时间：2012-10-08T12:30:10.000
> 
> 标签：php, validation

运行以下代码

```
var_dump(get_headers("http://www.domainnnnnnnnnnnnnnnnnnnnnnnnnnnn.com/CraxyFile.jpg")); 
```

**对于任何不存在的域或 URL，返回 HTTP 200 而不是 404**

```
Array
(
    [0] => HTTP/1.1 200 OK
    [1] => Server: nginx/1.1.15
    [2] => Date: Mon, 08 Oct 2012 12:29:13 GMT
    [3] => Content-Type: text/html; charset=utf-8
    [4] => Connection: close
    [5] => Set-Cookie: PHPSESSID=3iucojet7bt2peub72rgo0iu21; path=/; HttpOnly
    [6] => Expires: Thu, 19 Nov 1981 08:52:00 GMT
    [7] => Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
    [8] => Pragma: no-cache
    [9] => Set-Cookie: bypassStaticCache=deleted; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; httponly
    [10] => Set-Cookie: bypassStaticCache=deleted; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/; httponly
    [11] => Vary: Accept
) 
```

如果你跑

```
var_dump(get_headers("http://www.domain.com/CraxyFile.jpg")); 
```

你得到

```
Array
(
    [0] => HTTP/1.1 404 Not Found
    [1] => Date: Mon, 08 Oct 2012 12:32:18 GMT
    [2] => Content-Type: text/html
    [3] => Content-Length: 8727
    [4] => Connection: close
    [5] => Server: Apache
    [6] => Vary: Accept-Encoding
) 
```

它们有很多实例`get_headers`已被证明是验证现有 URL 的解决方案

*   [检查 PHP 中是否存在 URL 的最佳方法是什么？](https://stackoverflow.com/questions/4437223/what-is-the-best-way-to-check-if-a-url-exists-in-php)
*   [如何通过 PHP 检查 URL 是否存在？](https://stackoverflow.com/questions/2280394/check-if-an-url-exists-in-php)

### 这是错误还是 get_headers 不是验证 URL 的可靠方法

[观看现场演示](http://codepad.viper-7.com/7PamCe)

### 更新 1

必须发现 CURL 也有同样的问题

```
$curl = curl_init();
curl_setopt_array($curl, array(CURLOPT_RETURNTRANSFER => true,CURLOPT_URL => 'idontexist.tld'));
curl_exec($curl);
$info = curl_getinfo($curl);
curl_close($curl);
var_dump($info); 
```

[也返回相同的结果](http://codepad.viper-7.com/iLIYGX)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T13:02:33.313

问题与域名的长度无关，只是域名是否存在。

您正在使用将不存在的域解析为服务器的 DNS 服务，该服务器为您提供“友好”错误页面，并返回 200 响应代码。这意味着它也不是`get_headers()`具体的问题，它是任何潜在地依赖于合理的 DNS 查找的程序。

一种无需为您工作的每个环境硬编码变通的方法即可处理此问题的方法可能如下所示：

```
// A domain that definitely does not exist. The easiest way to guarantee that
// this continues to work is to use an illegal top-level domain (TLD) suffix
$testDomain = 'idontexist.tld';

// If this resolves to an IP, we know that we are behind a service such as this
// We can simply compare the actual domain we test with the result of this
$badIP = gethostbyname($testDomain);

// Then when you want to get_headers()
$url = 'http://www.domainnnnnnnnnnnnnnnnnnnnnnnnnnnn.com/CraxyFile.jpg';

$host = parse_url($url, PHP_URL_HOST);
if (gethostbyname($host) === $badIP) {
  // The domain does not exist - probably handle this as if it were a 404
} else {
  // do the actual get_headers() stuff here
} 
```

您可能希望以某种方式缓存第一次调用的返回值`gethostbyname()`，因为您知道您正在查找一个不存在的名称，这通常需要几秒钟。

# .htaccess - htaccess：托管在子目录中的域

> ID：12781800
> 
> 赞同：0
> 
> 时间：2012-10-08T12:30:25.203
> 
> 标签：.htaccess, redirect

我有一个托管在 www.mydomain.com/myniceweb 下的网站，我购买了域名 www.myniceweb.com

它工作正常，但我不希望访问者能够看到子文件夹（www.mydomain.com/myniceweb），我不希望谷歌认为有 2 个不同的网站具有相同的内容......

我尝试修改 .htaccess 文件但没有结果：

```
RewriteEngine on

RewriteCond %{HTTP_HOST} ^(www.)?myniceweb.com$
RewriteCond %{REQUEST_URI} !^/myniceweb/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /myniceweb/$1

RewriteCond %{HTTP_HOST} ^(www.)?myniceweb.com$
RewriteRule ^(/)?$ myniceweb/index.php [L] 
```

我想将访问 www.mydomain.com/myniceweb 的用户“重定向”到 www.myniceweb.com 我该怎么做？

我将不胜感激您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:14:40.740

好吧，我终于做到了，我想与你们分享......它可能会帮助有同样问题的人：

```
RedirectMatch 301 ^/farmaciagimeno.com(.*)$ http://www.farmaciagimeno.com$1 
```

将其写入您的 .htaccess（位于 /myniceweb 文件夹中的那个，而不是根文件夹），对 yourdomain.com/myniceweb 的任何请求都将被重定向到 www.myniceweb.com

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:41:41.880

> 我有一个托管在 www.mydomain.com/myniceweb 下的网站，我购买了域名 www.myniceweb.com
> 
> 它工作正常，但我不希望访问者能够看到子文件夹（www.mydomain.com/myniceweb）

我不明白你的问题。您有一个域**www.myniceweb.com**并且您网站的内容位于根文件夹**/myniceweb**下，对吗？

为什么看到您的访问者链接**www.mydomain.com/myniceweb** ??

如果您不想在子文件夹中使用 Google Robots 等，请将您的 robots.txt 更改为以下内容：

```
User-Agent: *
Disallow: /myniceweb 
```

您可以在 htaccess 中进行这样的 301 重定向：

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule (.*) http://www.myniceweb.com/$1 [R=301,L] 
```

如果您使用 PHP 作为脚本语言，您可以将此代码放在标题的顶部：

```
<?php 
$file=$_SERVER['PHP_SELF']; 
if(substr(dirname($file),1)=="myniceweb") {
Header( "HTTP/1.1 301 Moved Permanently" ); 
Header( "Location: http://www.myniceweb.com" ); 
} 
?> 
```

它会检查您的文档文件夹是否 == myniceweb，然后您将被重定向到**www.myniceweb.com**否则什么也不做

# csv - 通过cmake用逗号定义值

> ID：12781802
> 
> 赞同：2
> 
> 时间：2012-10-08T12:30:29.273
> 
> 标签：csv, cmake, c-preprocessor, conditional-compilation

我曾经有这样的定义：

```
#define MY_CLSID {0xc9955517, 0x6ca4, 0x439f, {0x86, 0xb7, 0xdd, 0xc5, 0xb6, 0x45, 0xe7, 0x6c}} 
```

现在我想通过cmake做到这一点，但到目前为止我失败了。有谁知道该怎么做？

PS：那是我的尝试：

```
add_definitions(/D MY_CLSID={0x87f8774f,0xb485,0x47e2,{0xa7,0x55,0xa4,0xa,0x8a,0x5e,0x88,0x6c}}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:48:02.743

Of course, arrowdodger's answer is correct and if you have only a few of those defines, I would recommend it as well. In case of lots of (more complex) defines, the use of [configure_file](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:configure_file) can be a good alternative:

```
// In Your_CLSID.h.in
#cmakedefine {0xc9955517, 0x6ca4, 0x439f, {0x86, 0xb7, 0xdd, 0xc5, 0xb6, 0x45, 0xe7, 0x6c}}
// end of Your_CLSID.h.in 
```

and generate a "Your_CLSID.h" with

```
configure_file( ${CMAKE_SOURCE_DIR}/Your_CLSID_Config.h.in ${CMAKE_BINARY_DIR}/common/Your_CLSID.h ) 
```

Of course, you will have to add your binary dir to the include-directories:

```
include_directories( ${CMAKE_BINARY_DIR}/common ) 
```

See also my similar answers to the following questions:

*   [how-to-read-a-cmake-variable-in-c-source-code](https://stackoverflow.com/questions/7900661/how-to-read-a-cmake-variable-in-c-source-code/7900862#7900862)
*   [how-to-create-a-c-define-for-a-certain-target-using-cmake](https://stackoverflow.com/questions/5352074/how-to-create-a-c-define-for-a-certain-target-using-cmake/5353747#5353747)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:08:24.753

用引号为我工作：

```
add_definitions(
  /D MY_CLSID="{0x87f8774f,0xb485,0x47e2,{0xa7,0x55,0xa4,0xa,0x8a,0x5e,0x88,0x6c}}"
) 
```

# eclipse - Groovy Eclipse 无法启动 junit 测试

> ID：12781806
> 
> 赞同：17
> 
> 时间：2012-10-08T12:30:48.477
> 
> 标签：eclipse, groovy, junit

在带有 groovy 插件的 Eclipse 中，我尝试启动测试`@Test public void testToLaunch() {...}`，但出现错误：

> 启动配置的输入类型不存在

![在此处输入图像描述](../Images/78e18eb657fa25f4f8932858dfd4d1db.png)

**`input type` **启动配置的上下文是什么****？**（在启动配置窗口中找不到这样的条目）**

 **注意：我尝试 sts 2.8.1 和 e3.7

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-04-23T18:11:40.650

如果 groovy 类有问题，也会发生这种情况。需要检查的几件事：

1）确保类名与文件名完全匹配（filename = `MyTest.groovy`）

```
package com.mypackage;
import groovy.util.GroovyTestCase;

class MyTest extends GroovyTestCase {} 
```

2) 确保文件中定义的包与文件实际所在的包匹配。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-08T12:33:25.993

当存在测试用例的文件夹不是源文件夹时，通常会发生这种情况，请同时检查[此帖子](http://www.coderanch.com/t/105810/vc/Error-launching-JUnit)。希望有帮助！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-10-30T17:33:23.327

在 Eclipse 中你可以做

```
Right click ->  properties -> Java build path 
```

注意测试文件夹在源代码中不可用。添加它。

```
Add folder -> Select test -> OK 
```

现在重新运行您的单元测试用例。

[![在此处输入图像描述](../Images/a7de6af594dc76ce4406f5d219e7e343.png)](https://i.stack.imgur.com/AqQtw.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-24T18:11:34.840

这发生在我身上，我刚刚重新启动了 Eclipse (GGTS)，一切又好了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-10-02T06:14:06.677

我有一个拼写错误导致该错误消息。我的测试类文件名为`JUnit5Test.java`（使用 upper `U`），类本身被命名`Junit5Test`（使用 lower `u`）。

我使用的是 Spring Tool Suite 4 (4.8.0.RELEASE)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-31T17:29:03.600

这也发生在我身上。但是这些测试是用 Groovy 编写的。我遇到的问题与 IDE（Eclipse Kepler，Java EE）在执行“mvn eclipse:eclipse”后如何首先打开一个 Groovy 项目有关。

构建路径没有正确引用 Groovy 源文件。

为了解决，我：

1.  右键单击项目，选择“构建路径”>“配置构建路径...”
2.  选择“来源”选项卡
3.  对于 test 和 src 文件夹（.../src/main/groovy 和 .../src/test/groovy）
4.  确保“**/*.groovy”设置为“包含模式”，而不是“**/*.java”

希望这可以为某人节省时间。

干杯!

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-10-13T15:26:58.837

当我领导在主 Java 源文件夹和 testsrc 文件夹中重复的测试类时，我收到了相同的错误消息。删除主 Java 源文件夹中放置不正确的文件夹为我解决了这个问题。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-08-27T03:48:57.327

2019 年更新：即使使用最新的 Eclipse 和全新安装（Mac、Grails 4、Gradle 5.1.1、Java 8），这也让我疯狂了好几天。上面的一些例子让我找到了解决方案。

我的问题更多的是我正在测试的代码包含 groovy 和 java src/main 代码的混合。当我将 Spec 作为 JUnit 运行时，它在 .groovy 类上给了我 NoClassDefFound。

解决方案：我必须修改我的运行/调试配置以包含 build/classes/groovy/main。然后它起作用了。对于每个新配置，记住这一点有点痛苦，但是，它让我继续前进。我希望它对你有帮助。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-10-19T09:43:58.550

每当您在 Eclipse 中创建 Junit 测试时，请确保您的**Junit 测试文件位于** `src/test/java`文件夹内。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-17T09:54:44.757

找到了另一种导致此消息的方法。原因竟然是一个空的副本，以及真正的一个`MyTest.java`under 。`src/main/java``src/test/java`

认为空文件是一些重构的后遗症，并且奇怪地也没有导致编译错误。删除它可以使测试再次运行。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-07-20T10:11:04.670

我有一个类似的问题。就像其他人已经指出的那样，它是关于源文件夹的。我不得不更改我的源文件夹设置。在我右键单击它并从构建路径菜单中选择“从构建路径中删除”后，有一个空的 src 文件夹消失了。之后，我右键单击 java/src 和 java/test 文件夹并选择构建路径 > 用作源文件夹。突然间我的测试变成了 JUnited！

在类似情况下，我建议您从构建路径中删除所有源文件夹，并在您确定自己拥有正确的文件夹时再次添加它们。您的源文件夹应该是那些在其下具有 Java 包结构的文件夹。在 proj/java/test/com/stackoverflow/main 的情况下，它是“测试”文件夹。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-02-09T17:58:44.083

这就是为我解决的问题`(Eclipse Oxygen)`。我已经按照罗伯特在之前的帖子中提出的建议做了。我仍然收到错误消息。当我去编辑 junit 启动的配置时，我看到 Test Class 字段只有类名。我不得不点击右边的搜索按钮。测试类字段现在具有类的完整名称

```
com.mycompany.mypackage.MyClass 
```

有了这个，我可以运行`JUnit`. 但是我必须为每次运行都修复这个问题。**

# android - android usb requestWait 不返回

> ID：12781807
> 
> 赞同：11
> 
> 时间：2012-10-08T12:31:00.180
> 
> 标签：android, request

```
ByteBuffer byteBuffer = ByteBuffer.allocate(9);;    
UsbRequest request = new UsbRequest();
request.initialize(mConnection,mEndpointIntr);
boolean b = request.queue(byteBuffer, 9);
Log.d(TAG, "start the request wait");
UsbRequest ur = mConnection.requestWait(); 
```

我想使用 Android USB 中断。上面的代码是从我自己的 USB 板接收数据的线程。但是当我尝试调用`UsbRequest ur = mConnection.requestWait();`该函数不返回时，它总是会遇到`requestWait()`. 为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T02:45:12.930

您的`requestWait()`代码中的 将等待结果`request.queue(byteBuffer, 9)`

以下是它不返回的一些可能原因：

1.  您的请求队列与您的 USB 设备实际发送数据的端点不同。仔细检查您是否正在侦听正确的接口和端点。

2.  在 USB 设备固件方面，不要在 HID 等通用接口类上创建中断端点。创建一个新的供应商特定接口，否则如果它是 HID，内核可能会控制该接口并且请求队列可能会失败，这就是发生在我身上的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T22:03:37.630

在我自己的带有两个端点（IN 和 OUT）连接到 MK802 的 USB HID 设备上，我遇到了同样的问题（排队请求返回 false）。我用 false 调用了 claimInterface。设置以下有帮助，我可以收到数据。

```
c.claimInterface(device.getInterface(0), true); 
```

# c# - 如何在 C# 中从 XML 中删除选定的节点？

> ID：12781809
> 
> 赞同：0
> 
> 时间：2012-10-08T12:31:15.557
> 
> 标签：c#, xml, visual-studio-2010, xmlnode

我是 C# 的新手我有问题...我想`selected node`从我的`XMl`文件中删除我刚刚尝试使用此代码但我没有得到任何人的帮助

```
private void btnDelete_Click(object sender, EventArgs e)
{
    xdoc.Load(strFilename);
    string Xpath = string.Format("root/{0}/{1}",_strProCat,_strProdType);
    xdoc.SelectSingleNode(Xpath).RemoveAll();

    xdoc.Save(strFilename);
    MessageBox.Show("Deleted Successfully");
} 
```

这是我的 Xml 文件

```
<root>
  <product category="Soaps">
   <product type="Washing">
     <product name="Rin">
      <Id>100</Id>
      <AvailProducts>30</AvailProducts>
      <Cost>20.00</Cost>
   </product>
  <product name="Tide">
    <Id>101</Id>
    <AvailProducts>30</AvailProducts>
    <Cost>15.00</Cost>
  </product>
 </product>
</product>
</root> 
```

只是我想删除节点哪个产品`name="Tide"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:46:54.843

您可以简单地使用以下代码：

```
private void btnDelete_Click(object sender, EventArgs e)
{
    var xDoc = XDocument.Load(strFilename);

    foreach (var elem in xDoc.Document.Descendants("product"))
    {
        foreach (var attr in elem.Attributes("name"))
        {
            if (attr.Value.Equals("Tide"))
                elem.RemoveAll();
        }
    }

    xDoc.Save(destinationFilename);
    MessageBox.Show("Deleted Successfully");
} 
```

快乐的编码...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:47:08.307

这样的事情应该这样做：

```
xdoc.Elements("product").Where(x=> x.Element("name").Value == "Tide").FirstOrDefault().Remove(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T12:52:56.833

如果你想要`XPath`，`XmlDocument`那么下面就是这样做的方法..

```
XmlDocument xdoc = new XmlDocument();
xdoc.Load(strFilename);
string Xpath = string.Format("root/product[@category='{0}']/product[@type='{1}']/product[@name='{2}']", "Soaps", "Washing", "Tide");
xdoc.SelectSingleNode(Xpath).RemoveAll();
xdoc.Save(strFilename); 
```

**更新**

根据您的要求`To Remove the empty node`，尝试以下代码将空节点删除为

```
XmlNodeList emptyElements = xdoc.SelectNodes(@"//*[not(node())]");
for (int i = emptyElements.Count - 1; i > -1; i--)
{
     XmlNode nodeToBeRemoved = emptyElements[i];
     nodeToBeRemoved.ParentNode.RemoveChild(nodeToBeRemoved);
} 
```

*现在你最终的完整肉体代码看起来像*

```
string Xpath = string.Format("root/product[@category='{0}']/product[@type='{1}']/product[@name='{2}']", "Soaps", "Washing", "Tide");                      
xdoc.SelectSingleNode(Xpath).RemoveAll();
XmlNodeList emptyElements = xdoc.SelectNodes(@"//*[not(node())]");

for (int i = emptyElements.Count - 1; i > -1; i--)
{
      XmlNode nodeToBeRemoved = emptyElements[i];
      nodeToBeRemoved.ParentNode.RemoveChild(nodeToBeRemoved);
}
xdoc.Save(strFilename); 
```

# objective-c - Cocoa-Touch - 将动画链接在一起

> ID：12781812
> 
> 赞同：0
> 
> 时间：2012-10-08T12:31:26.870
> 
> 标签：objective-c, ios, cocoa-touch, animation, uipickerview

这听起来可能比实际更难。我实际上是在尝试将一些动画链接在一起以使其看起来流畅。我正在做的是`UIPickerView`从屏幕底部滑动的一些基本动画，当它被关闭时，它会滑回屏幕底部。我用两种方法处理这个功能`- (void)showPicker`，`- (void)hidePicker`

在选择器被隐藏后我想直接显示键盘，但我不想在选择器被隐藏**之前显示键盘。**

我也想反过来，在键盘被隐藏后我想直接显示`UIPickerView`. 我知道我可以观察`UIKeyboardDidShowNotification`和`UIKeyboardDidHideNotification`

那么处理这个问题的最佳方法是什么，以便这些动画以一种平滑的方式链接在一起呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:59:53.843

对于路径选择器->键盘尝试

```
[UIView animateWithDuration:0.3
                 animations:^{
                     [self hidePicker];
                 }
                 completion:^(BOOL finished){
                     [yourInputView becomeFirstResponder];
                 }]; 
```

反过来听 UIKeyboardDidHideNotification 并`showPicker`在回调中调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:51:52.567

您是否将您的选择器显示为在字段或其他内容中输入一些信息的一种方式？如果是这样，您最好使用 的`inputView`属性，`UITextField`以便它的行为与普通的 TextField 非常相似，但使用您的`UIPickerView`而不是标准键盘。

这是执行此操作的标准方法（显示选择器代替键盘），您不必为链接动画而烦恼。

# java - Amazon S3 上传挂起 100%

> ID：12781813
> 
> 赞同：3
> 
> 时间：2012-10-08T12:31:27.100
> 
> 标签：java, amazon-s3, amazon-web-services

我正在使用 Amazon 提供[的高级 API](http://docs.amazonwebservices.com/AmazonS3/latest/dev/HLuploadFileJava.html)将文件上传到 Amazon S3。我使用提供的示例的轻微修改版本：

```
public Upload uploadFile() {

    transferManager = new TransferManager(new BasicAWSCredentials("KEY", "SECRETKEY"));
    upload = transferManager.upload(existingBucketName, keyName, new File(filePath));
    return upload;
} 
```

同时，从另一个线程，我正在衡量它的进度：

```
while (!upload.isDone()) {
        System.out.println("upload prog " + upload.getProgress().getPercentTransfered() + " state " + upload.getState());
        Thread.sleep(200);
} 
```

进度报告本身似乎运行良好，因为我正在取得有意义的进展。但是，一旦达到 100%，上传就会停止。看起来很像对 isDone() 的调用是阻塞的，因为它根本不会更新。

## 输出

```
upload prog 91.9009559586608 state InProgress
upload prog 95.31523296022095 state InProgress
upload prog 99.01403304524446 state InProgress
upload prog 100.0 state InProgress
upload prog 100.0 state InProgress 
```

该百分比一旦达到 100%，将不会再次更新。它似乎更新了两次然后挂起。

如果我使用 Cyber​​duck 从外部检查文件是否存在，它似乎已成功上传文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T23:51:17.417

从您的代码片段中，您不会再获得任何更新，因为您已经陷入循环，因为这`upload.isDone()`是真的。如果添加：

```
System.out.println("upload prog " + upload.getProgress().getPercentTransfered() + " state " + upload.getState()); 
```

循环结束后，您将看到该`Completed`消息。您可能会看到多条 100% 消息，因为 TransferManager 正在等待上传完成。

# magento - 如何在 Magento 中获取送货地址和订单状态？

> ID：12781821
> 
> 赞同：2
> 
> 时间：2012-10-08T12:31:57.427
> 
> 标签：magento

我有这个代码：

```
$session = Mage::getSingleton('checkout/session');

foreach ($session->getQuote()->getAllItems() as $item) {
    echo $item->getName();
    echo $item->getId();
    echo Mage::helper('core')->formatPrice($item->getPrice());
} 
```

但我想获取我订购的每件商品的送货地址和订单状态。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T12:41:28.487

获取当前登录客户的所有订单

```
$customerId = Mage::getSingleton('customer/session')->getCustomer()->getId();

$_orders = Mage::getModel("sales/order")->getCollection()
                   ->addAttributeToSelect('*')
                   ->addFieldToFilter('customer_id', $customerId);
                   /* to get last order only -- uncomment
                   ->setOrder('created_at', Varien_Data_Collection_Db::SORT_ORDER_DESC)
                   ->setPageSize(1);
                   */

foreach($_orders as $order) {
    foreach($order->getAllItems() as $item){
        echo $item->getName();
        echo $item->getId();
        echo Mage::helper('core')->formatPrice($item->getPrice());
    }

  //display status
  echo $order->getStatusLabel();
  //display shipping address
  print_r($order->getShippingAddress()->getData());
} 
```

要通过 order_id 获取特定订单的订单信息，然后

```
$order_id = 123; // put your order id here
$_order = Mage::getModel('sales/order')->load($order_id);

if(!$_order->getID()){
    echo 'Order not found.';
}
else{

   //display shipping address
   print_r($_order->getShippingAddress()->getData());

   foreach($_order->getAllItems() as $order) {
     echo $order->getName();
     echo $order->getId();
     echo Mage::helper('core')->formatPrice($order->getPrice());
     echo $order->getStatusLabel();

   }
} 
```

此代码获取客户购物车（所以这是在您下订单之前）

```
$session = Mage::getSingleton('checkout/session'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-26T11:34:59.803

通过订单 ID 获取运输详细信息

```
$order_id = 2314; //use your own order id

$order = Mage::getModel("sales/order")->load($order_id); //load order by order id

$shipping_address = $order->getShippingAddress();

echo $shipping_address->getTelephone();

echo $shipping_address->getPostcode(); //use print_r($shipping_address->getData()); to get all the available elements of the object 
```

# security - 如何识别访问者是唯一的？

> ID：12781827
> 
> 赞同：-2
> 
> 时间：2012-10-08T12:32:30.523
> 
> 标签：security, anti-cheat

我尝试做一个互联网投票服务，但问题是互联网很容易通过创建多个帐户和投票同一件事来作弊。验证码和电子邮件无济于事，因为人类只需 3 秒即可通过。可以通过代理更改IP。如果我们在选民浏览器上放一些 cookie，他下次会清理它。

我创建了这个问题来寻求帮助我们可以使用所有浏览器（javascript等）的基本期货的方法，以防止我们的服务被轻易欺骗。

我自己的第一个想法是，我的网站有可能通过访问我的网站来访问用户浏览器上的所有 cookie 吗？因为当他们通过 CCleaner 为新帐户清理所有内容时，我可以理解浏览器是空的，所以这个人可能是个骗子，因为大多数真实用户来到我的网站时总是至少有几个来自不同网站的 cookie

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:42:52.293

***根据定义*，如果不走出虚拟系统，就无法解决唯一标识真实世界资产（此处为人类）的问题。**

有多种方法可以确保“*一个人到一个虚拟身份*”映射的更高可靠性，但没有一种方法是万无一失的。

*   最方便的方法是通过**智能手机**应用程序来完成。一个人通常只有一部智能手机（和一个电话号码）。
*   另一种方法是向他们发送蜗牛邮件到他们的**真实地址**，并附上密码，您需要他们在您的虚拟系统中输入密码。
*   或**社会保险号**
*   或他们的**指纹**作为登录凭据

清单可以继续，但重点是，这些东西都与**物理世界**绑定在一起。如果你**结合**更多这样的元素，你会得到更高的准确性（但绝不是 100% 的确定性）。

# java - Java空值检查

> ID：12781828
> 
> 赞同：4
> 
> 时间：2012-10-08T12:32:33.287
> 
> 标签：java, concurrency, null

我有一个`thread1`：

```
if(object != null){
   object.play();
} 
```

另一个`thread2`可以随时写入`null`参考`object`。

我将同时运行这些线程。我知道`thread2`可以在检查后重写`object`引用`null`，这会抛出`NullPointerException`. 检查后是否可以`thread2`重写`object`参考`NullPointerException`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T12:34:32.957

> 在 NullPointerException 检查后是否可以让 thread2 重写对象引用？

绝对 - 它可以改变方法执行`object`时的值`play()`，如果这就是你的意思。这本身不会导致错误。

请注意，如果没有同步或其他内存屏障，线程 2 可能会在`object`不确定的时间段内更改线程 1 的值而不会注意到。

如果不了解代码的更大目标，很难说你应该做什么。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T12:54:24.907

简单的`synchronized`例子：

```
/**
To maintain thread safety, only access this through getter and setter
or other synchronized method
**/
private ObjectType object;

public synchronized void setObject(ObjectType object) {
  this.object = object;
}

public synchronized ObjectType getObject() {
  return object;
}

public void doPlay() {
  final ObjectType obj = getObject();
  //here, thread 2 can change "object", but it's not going to affect this thread
  //as we already safely got our reference to "object" in "obj".
  if(obj != null){ 
   obj.play(); 
  }
}

public synchronized void alterativeDoPlay() {
  //the difference here is that another thread won't be able to change "object"
  //until the object's play() method has completed.
  //depending on the code in play, this has potential for deadlocks, where as
  //the other `doPlay` has zero deadlock potential.
  if(object != null){
   object.play(); 
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T12:35:02.360

您可以在此处使用[CountDownLatch](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/CountDownLatch.html)。其中 Thread1 将等待 Thread2 倒计时，您可以在 thread2 中执行任务并停止倒计时。

代码片段 -

```
CountDownLatch latch = new CountDownLatch(1);
new Thread1(latch).start();
new Thread2(latch).start();
public class Thread1 extends Thread {
  private final CountDownLatch startLatch;

  public Thread1(CountDownLatch startLatch) {
    this.startLatch = startLatch;
  }
  public void run() {
    try {
      startLatch.await();
      // ... perform task
    } catch (InterruptedException iex) {}
  }
}

public class Thread1 extends Thread {
  private final CountDownLatch stopLatch;

  public Thread1(CountDownLatch stopLatch) {
    this.stopLatch = stopLatch;
  }
  public void run() {
    try {
      // perform task
    } finally {
      stopLatch.countDown();
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T12:40:05.333

如果`object`是一个实例变量或一个可以从多个线程更改的静态变量，它的值可以在您在`if`语句中测试它的时间和调用它的实例方法的时间之间发生变化。

您可以通过将对象复制到局部变量中来修改代码以避免此问题，如下所示：

```
Playable objectCopy = object;
if(objectCopy != null) {
    objectCopy.play();
} 
```

由于`objectCopy`是一个局部变量，它的值不能在测试和调用之间改变`play`。当然，可玩对象本身的状态是可以改变的，但这不是通过`null`检查就能解决的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-08T12:45:10.747

根据**布赖恩定律**：

`When we write a variable, which next has to be read by another thread, or when we are reading a variable which has lately been written by another thread, then use synchronization. Synchronize the atomic statements or getter/setters which has access to the crucial state of data with the same monitor lock.`

**-**使用`synchronization`。

**-**你可以使用`CountDownLatch`从`java.util.concurrent`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T12:37:04.173

您将需要使用某种形式的同步原语来解决这个问题。[请参阅此处](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)的“同步语句” 。在您的情况下，您将需要包装整个`if`块以及任何使用或更新的线程中的任何位置`object2`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-08T12:47:39.767

正如我的教授所说：“并发是一个非常不稳定的人。我们永远不知道对他有什么期望。” 提出您的问题：

> 在 NullPointerException 检查之后，thread2 是否可以重写对象引用？

是的

在线程 1 出现 1 次期间，线程 2 可以多次访问该对象。或者反过来。thread1 可能出现多次，而 thread2 访问对象。

如果你使用简单

> System.out.println();

在代码中的许多地方，您可能会注意到控制台中的输出显示在 NullPointerException 错误之后（如果没有被捕获）。

# asp.net-mvc - VB.NET 将查询字符串解析为数组

> ID：12781829
> 
> 赞同：3
> 
> 时间：2012-10-08T12:32:37.240
> 
> 标签：asp.net-mvc, vb.net, json

我有这个字符串：

```
1=True&2=150+minutes&3=True&4=True&5=Continuing+to+smoke 
```

我怎样才能将它放入这样的数组或对象中：

```
[1] => True
[2] => "150 minutes"
etc? 
```

我试过这个：

```
<HttpPost()>
Function GetQuizScore(ByVal data As String) As JsonResult

    'Debug.Print(data)

    Dim jss = New JavaScriptSerializer

    Dim dict = jss.Deserialize(Of List(Of String))(data)

    Debug.Print(String.Join(", ", dict))

    Return Json(data)

End Function 
```

但是，它给了我一个错误，上面写着：

> 无效的 JSON 原语：True&2=150+minutes&3=True&4=True&5=Continuing+to+smoke。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T12:36:44.573

您拥有的字符串是**QueryString**，而不是 JSON 字符串。因此，您可以使用

*   [HttpUtility.ParseQueryString](http://msdn.microsoft.com/en-us/library/ms150046.aspx)

将其转换为 NameValueCollection。

* * *

例子：

```
Dim s = "1=True&2=150+minutes&3=True&4=True&5=Continuing+to+smoke"

Dim parsed = HttpUtility.ParseQueryString(s)

For Each key In parsed
    Console.WriteLine(key & ": " & parsed(key))
Next 
```

输出：

```
1: True
2: 150 minutes
3: True
4: True
5: Continuing to smoke 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T12:50:22.893

首先，您的错误发生是因为您尝试将键/值对字符串解析为 JSON 对象（显然不是）。其次，您使用 MVC，应该不需要任何手动序列化服务器端，让 ASP.NET MVC 模型绑定器为您完成。为您的操作引入视图模型，例如

```
Public Class QuizScoreViewModel

    Property Property1 As String
    Property Property2 As String
    ...

End Class 
```

然后更新您的操作参数以期望`QuizScoreViewModel`例如

```
<HttpPost()>
Function GetQuizScore(ByVal viewModel As QuizScoreViewModel) As JsonResult

    Debug.Print(viewModel.Property1)
    ...

End Function 
```

# android - Android Grid View 上的 Radio Group 实现

> ID：12781830
> 
> 赞同：3
> 
> 时间：2012-10-08T12:32:38.043
> 
> 标签：android, android-gridview

我希望在 GridView 上实现 Radio Group，以便在网格的元素中只能选择单个项目。

请帮忙。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-11T11:03:39.237

限制从网格中选择元素的目的可以如下实现：

1.创建网格元素。

```
<LinearLayout
    android:id="@+id/item_layout"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" 
      android:gravity="center">

    <ImageView
        android:id="@+id/imageView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher" />

    <RadioButton
        android:id="@+id/radiobtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Image" />

</LinearLayout> 
```

2.在自定义适配器的getView()方法中对这个xml进行膨胀。

```
public class MyAdapter extends BaseAdapter {

    Context mCtx;
    int[] mImg;
    LayoutInflater layoutInflater;
    RadioGroup rgp;
    private RadioButton mSelectedRB;
    private int mSelectedPosition = -1;

    public MyAdapter(Context context, int[] img) {
        this.mCtx = context;
        this.mImg = img;
        rgp = new RadioGroup(context);
        layoutInflater = (LayoutInflater) mCtx
                .getSystemService(LAYOUT_INFLATER_SERVICE);

    }

    @Override
    public int getCount() {

        return mImg.length;
    }

    @Override
    public Object getItem(int position) {

        return null;
    }

    @Override
    public long getItemId(int position) {

        return 0;
    }

    @Override
    public View getView(final int position, View convertView,
            ViewGroup parent) {
        View view = convertView;
        Holder holder;

        if (view == null) {
            view = layoutInflater.inflate(R.layout.element, null);
            holder = new Holder();
            holder.image = (ImageView) view.findViewById(R.id.imageView);
            holder.radioButton = (RadioButton) view
                    .findViewById(R.id.radiobtn);
            view.setTag(holder);

        } else {

            holder = (Holder) view.getTag();
        }

        holder.radioButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                if ((position != mSelectedPosition && mSelectedRB != null)) {
                    mSelectedRB.setChecked(false);
                }

                mSelectedPosition = position;
                mSelectedRB = (RadioButton) v;
            }
        });

        if (mSelectedPosition != position) {
            holder.radioButton.setChecked(false);
        } else {
            holder.radioButton.setChecked(true);
            if (mSelectedRB != null && holder.radioButton != mSelectedRB) {
                mSelectedRB = holder.radioButton;
            }
        }

        return view;
    }

}

private class Holder {

    ImageView image;
    RadioButton radioButton;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-23T19:06:02.040

另一种方法是创建您自己的子类，`RadioButton`该子类具有额外的 XML 属性（例如`group`）。这指定（作为字符串）按钮所属的组。然后，在子类中，确保在任何特定组中，只选择一个单选按钮。

您可以按如下方式执行此操作：

首先创建`res/values/attrs.xml`包含以下内容的文件：

```
<resources>
  <declare-styleable name="GroupedRadioButton">
    <attr name="group" format="string"/>
  </declare-styleable>
</resources> 
```

然后创建你的子类，`GroupedRadioButton`：

```
public class GroupedRadioButton extends RadioButton {

  public GroupedRadioButton(Context context, AttributeSet attrs) {
    super(context, attrs);
    processAttributes(context, attrs);
    setOnClickListener(internalListener, true);
  }

  ...
} 
```

一旦充实（见下文），您就可以在布局文件中使用这个新类，如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:custom="http://schemas.android.com/apk/res/com.example.app"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="vertical" >

<com.example.app.GroupedRadioButton
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Option 1"
    custom:group="group1" />

<com.example.app.GroupedRadioButton
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Option 2"
    custom:group="group1" />

<com.example.app.GroupedRadioButton
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Option 3"
    custom:group="group1" />

<com.example.app.GroupedRadioButton
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Option A"
    custom:group="group2" />

<com.example.app.GroupedRadioButton
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="Option B"
    custom:group="group2" />

... 
```

单选按钮可以位于布局中的任何位置（例如，在 a 中`GridView`）。请注意，`xmlns:custom`标签是必需的，因为我们使用的是自定义属性。

上面的布局将使选项 1、2 和 3 互斥，选项 A 和 B 互斥。

这是通过跟踪（静态）`GroupedRadioButton`每个组中当前选择的对象来实现的：

```
public class GroupedRadioButton extends RadioButton {

  private static Map<String, WeakReference<GroupedRadioButton>> buttonMap;

  static {
    buttonMap = new HashMap<String, WeakReference<GroupedRadioButton>>();
  }

  ...
} 
```

请注意，我们必须在这里小心，以确保我们不会保留对按钮的强引用，否则它们将永远不会被垃圾收集。

上面构造函数中指定的`processAttributes()`方法从我们指定的 XML 中挖掘出`group`属性并将其设置为实例数据：

```
private void processAttributes(Context context, AttributeSet attrs) {
  TypedArray attributes = context.obtainStyledAttributes(attrs,
    R.styleable.GroupedRadioButton);
    int attributeCount = attributes.getIndexCount();
    for (int i = 0; i < attributeCount; ++i) {
      int attr = attributes.getIndex(i);
      switch (attr) {
      case R.styleable.GroupedRadioButton_group:
        this.groupName = attributes.getString(attr);
        break;
    }
  }
  attributes.recycle();
} 
```

我们为这个类定义了 main `OnClickListener`。

```
private OnClickListener internalListener = new OnClickListener() {

  @Override
  public void onClick(View view) {
    processButtonClick(view);
  }
}; 
```

调用：

```
private void processButtonClick(View view) {
  if (!(view instanceof GroupedRadioButton))
    return;

  GroupedRadioButton clickedButton = (GroupedRadioButton) view;
  String groupName = clickedButton.groupName;
  WeakReference<GroupedRadioButton> selectedButtonReference = buttonMap.get(groupName);
  GroupedRadioButton selectedButton = selectedButtonReference == null ? null : selectedButtonReference.get();
  if (selectedButton != clickedButton) {
    if (selectedButton != null)
      selectedButton.setChecked(false);
    clickedButton.setChecked(true);
    buttonMap.put(groupName, new WeakReference<GroupedRadioButton>(clickedButton));
  }
  if (externalListener != null)
    externalListener.onClick(view);
} 
```

这有两件事。它确保在选择新按钮之前取消选择旧的组按钮（假设旧按钮和新按钮不同）。然后它调用`onClick()`提供的一个`externalListener`which 以便该类的用户可以添加他们自己的“点击”功能。

构造函数中的`setOnClickListener()`调用是对我们自己的方法如下：

```
private void setOnClickListener(OnClickListener listener, boolean internal) {
  if (internal)
    super.setOnClickListener(internalListener);
  else
    this.externalListener = listener;
} 
```

这会将 设置`internalListener`为官方`OnClickListener`并将实例数据设置为适合外部侦听器。`View.setOnClickListener()`然后可以按如下方式覆盖该方法：

```
@Override
public void setOnClickListener(OnClickListener listener) {
  setOnClickListener(listener, false);
} 
```

为这个答案的长度道歉，但我希望它可以帮助你和其他尝试做同样事情的人。`RadioGroup`如果 a递归地应用于它的孩子，它当然根本不需要！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:37:13.560

当您选择网格的一个元素时，请检查您想要在您的单选组中的其他元素是否未被选中，如果它们被取消选择它们......

# ruby-on-rails - 如何重定向到炼油厂仪表板页面而不是应用程序根到页面

> ID：12781832
> 
> 赞同：1
> 
> 时间：2012-10-08T12:32:41.430
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, refinerycms

我有一个使用 devise 2.0.0 进行身份验证的 rails 3.2.8 应用程序我将 refinerycms 与此应用程序集成，它现在已成功集成，问题是当用户点击

`localhost/refinery`它带我进入炼油厂登录页面，但在成功登录后它重定向回我的应用程序主页，而不是炼油厂的仪表板页面。

所以我想知道在炼油厂成功登录程序后如何重定向到炼油厂仪表板。我有路线挂载`Refinery::Core::Engine`，

```
:at => '/' root to:'projects#index' 
```

ETC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T02:57:21.670

创建一个自定义设计控制器，在用户登录后将其重定向到您想要的位置：

创建自定义控制器：controllers/users/sessions_controller.rb

```
 class Users::SessionsController < Devise::SessionsController

  before_filter :authenticate_user!, :only => [:destroy] 

  def new 
    super
  end

  def create
      #Can edit this for custom redirect
      super
  end

  def destroy
    super
  end

  protected

  def stub_options(resource)
     methods = resource_class.authentication_keys.dup
     methods = methods.keys if methods.is_a?(Hash)
     methods << :password if resource.respond_to?(:password)
     { :methods => methods, :only => [:password] }
  end

  def after_sign_in_path_for(resource)
      #Can edit this for custom redirect
      super
  end

  def after_sign_out_path_for(resource)
    super
  end

  private

end 
```

然后告诉设计在你的 routes.rb 中使用该控制器：

```
devise_for :users, :controllers => {:sessions => "users/sessions"} 
```

# php - 即使地点存在也无法打开流

> ID：12781839
> 
> 赞同：1
> 
> 时间：2012-10-08T12:33:23.543
> 
> 标签：php

我正在尝试使用以下方法包含文件：

```
require_once '../config/configVARS.php'; 
```

但我得到了错误：

```
Warning: require_once(../config/configVARS.php): failed to open stream: No such file or directory in ..../classes/FileHandler.php on line 2

Fatal error: require_once(): Failed opening required '../config/configVARS.php' (include_path='.:/opt/lampp/lib/php') in ..../classes/FileHandler.php on line 2 
```

如果我尝试在同一个文件夹中包含一个文件，我没有任何错误（例如，当我将 configVARS 文件复制到同一个文件夹时，我可以包含它）。

我检查了权限，但不是这样（没有所有权）。

有任何想法吗？什么会导致它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:59:56.997

检查文件是否确实存在，如果您不确定是否使用了正确的文件名，请使用绝对路径而不是相对路径。

魔术[常量`__DIR__`^(*Docs*)](http://php.net/manual/en/language.constants.predefined.php)包含您写入的文件的绝对位置，所以

```
require_once __DIR__ . '/concrete/path/to/file.php'; 
```

通常更明显，因为您实际上似乎知道文件的确切位置 - 似乎不需要在其中查看的预配置包含目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:40:01.840

相对包含始终是一个棘手的主题，相对路径可能与您认为的不同，具体取决于您包含它的文件。最佳实践是使用绝对引用，通常通过使用定义的常量作为前缀，例如：

```
define('BASE_PATH', $_SERVER['DOCUMENT_ROOT']);

require_once(BASE_PATH . 'path_to_include'); 
```

在这里更好地解释：

[http://yagudaev.com/posts/resolving-php-relative-path-problem/](http://yagudaev.com/posts/resolving-php-relative-path-problem/)

# gtk - GTK - 如何更新 gtktextview/gtkentry？＃C

> ID：12781851
> 
> 赞同：1
> 
> 时间：2012-10-08T12:34:00.050
> 
> 标签：gtk, gtkentry, gtktextview

我正在为 CubeSat 创建一个基本的地面控制站，将其分为两部分：命令（没有问题）和遥测。我正在使用 C 代码和 GTK；在遥测窗口中，每次收到遥测数据包时，我都需要显示一些信息，因此我尝试对每个信息使用 gtkview/gtkentry，但我不知道如何更新其中显示的消息。

具体来说，一个例子是：

```
//View PACKET NUMBER    
 view = gtk_text_view_new();
 frame = gtk_frame_new("Packet number");    
 gtk_container_add(GTK_CONTAINER(frame), view);
 gtk_text_view_set_editable(GTK_TEXT_VIEW(view),FALSE);
 gtk_table_attach(GTK_TABLE(table2),frame,0,1,0,1,GTK_FILL,GTK_FILL,5,5);
 buff = gtk_text_view_get_buffer(GTK_TEXT_VIEW(view));
 gtk_text_buffer_get_iter_at_offset(buff, &iter, 0);
 gtk_text_buffer_insert(buff, &iter,"waiting", -1); 
```

所以，首先是文本“WAITING”，然后当收到一个数据包时，我想更新该文本：我该怎么做？

我尝试重复此代码，但使用引用“数据包号”的变量更改“等待”，但我获得了*核心转储*

我也试过这段代码，但我总是遇到同样的问题。

```
viewprova = gtk_entry_new();
frameprova = gtk_frame_new("Packet number");
gtk_container_add(GTK_CONTAINER(frameprova), viewprova);
gtk_entry_set_editable(GTK_ENTRY(viewprova),FALSE);
gtk_table_attach(GTK_TABLE(table2),frameprova,0,1,0,1,GTK_FILL,GTK_FILL,5,5);
gtk_entry_set_text(GTK_ENTRY(viewprova),"waiting");

frameprova = gtk_frame_new("Packet number");    
viewprova = gtk_label_new ("waiting");
gtk_container_add(GTK_CONTAINER(frameprova), viewprova);
gtk_table_attach(GTK_TABLE(table2),frameprova,0,1,0,1,GTK_FILL,GTK_FILL,5,5); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:49:14.703

诸如`gtk_label_new()`接受 C 字符串的函数不能取整数，C 函数不是多态的。您需要构建一个字符串表示并传递它，例如使用`snprintf()`将数字格式化为字符串缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T07:47:28.893

好的，如果我理解正确，您知道如何设置文本显示小部件，但不知道如何用新内容填充它们，对吗？看看你的代码，看看你在做什么。首先，您正在创建一个文本小部件。然后用初始文本填充它。第二部分是您重复的部分：

的情况下`GtkEntry`，`gtk_entry_set_text(GTK_ENTRY(viewprova), "My new text");`

如果`GtkTextView`（实际上您正在使用底层`TextBuffer`），`gtk_text_buffer_set_text(buff, "My new text", -1);`

# android - 比较两张图片

> ID：12781852
> 
> 赞同：1
> 
> 时间：2012-10-08T12:34:06.323
> 
> 标签：android, database, android-camera

![在此处输入图像描述](../Images/a2fb3f47a0dfb7ff17338a8e748a9ba7.png)

我有`Android`在数据库中存储图片的代码。如何将存储的照片与拍摄的照片进行比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:57:34.757

可能有几个正确的答案，具体取决于您要查找的内容。

如果您正在谈论比较使用设备上相机制作的新照片，那么它几乎不可能与任何现有文件进行逐字节匹配。

如果您想从可能有副本的来源中检测完全匹配，请查看两个图像的文件大小和尺寸。如果它们完全相同，那么您可以查看字节。为了节省时间，请将内容的数字签名（例如，MD5 或 SHA1）哈希与图像一起存储在数据库中。

如果您想确定图像在外观上是否相似，那么您必须找到某种方法来表征图像。我不是这方面的专家，但在我幼稚的方法中，我会做一些事情，比如将图像分成固定数量的区域，并测量每个区域中红色、绿色和蓝色的数量。当找到近似匹配时，您甚至可以在越来越小的区域上递归地执行此操作。比较整个图像比找到部分匹配要容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:40:18.800

你可以一点一点地阅读它并在它之间进行比较:)如果它是相同的。就像您知道从 0 和 1 构建的每个文件一样，因此您可以像二进制文件一样打开它并进行比较。

另一种解决方案。您可以阅读保存在图像文件中的图像和属性（例如：大小、宽度、高度、类型）...

我希望我能帮上忙；）

# android - 如何在Android（ActionbarSherlock）中自定义ActionBar？

> ID：12781853
> 
> 赞同：1
> 
> 时间：2012-10-08T12:34:08.740
> 
> 标签：android, android-actionbar, actionbarsherlock, android-ui

我在我的应用程序中使用了 ActionBarSherlock 来为预蜂窝设备提供 ActionBar。我想在其中使用 Light.DarkActionBar 主题，如何为部分 ActionBar 自定义以下内容（见图）

1.  ActionBar的背景颜色
2.  ActionBar 标签栏的背景图片
3.  代表所选选项卡的底线
4.  选项卡之间的分隔线...

![在此处输入图像描述](../Images/ee567613f82374c69e0cb3340b154f1a.png)

我尝试使用以下设置，虽然我取得了一些成功，但结果看起来并不像预期的那样，

```
<item name="android:background">@drawable/bg_title_bar</item>
<item name="background">@drawable/bg_title_bar</item>
<item name="actionModeSplitBackground">@drawable/bg_tab_bar</item>
<item name="android:actionModeSplitBackground">@drawable/bg_tab_bar</item> 
```

我应该使用哪些其他设置？谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-10T12:06:11.583

**这就是我这样做的方式，以防将来有人有类似的要求。**

[我从Style Genarator](http://jgilfelt.github.com/android-actionbarstylegenerator/)下载了一个示例 zip 文件...解压缩并仔细查看内容表明我需要以下属性，

1.  用于 ActionBar 的背景颜色

    ```
    <item name="background">@drawable/title_bg</item>
    <item name="android:background">@drawable/title_bg</item> 
    ```

2.ActionBar标签栏的背景图片

```
 <item name="backgroundStacked">@drawable/tab_bg</item>
    <item name="android:backgroundStacked">@drawable/tab_bg</item> 
```

3.对于代表所选选项卡的底线

```
 i. I created a style as follows
                    <style name="ActionBar.TabStyle" parent="@style/Widget.Sherlock.Light.ActionBar.TabView">
                    <item name="background">@drawable/ab_tab_indicator</item>
                    <item name="android:background">@drawable/ab_tab_indicator</item>
                </style>
               ii. I used that style in the theme as follows
                 <item name="actionBarTabStyle">@style/ActionBar.TabStyle</item>
                 <item name="android:actionBarTabStyle">@style/ActionBar.TabStyle</item> 
```

4 用于选项卡之间的分隔线...

在主题中我添加了两行..

```
 <item name="actionBarTabBarStyle">@style/My.ActionBar.TabBar</item>
  <item name="android:actionBarTabBarStyle">@style/My.ActionBar.TabBar</item> 
```

比

```
<style name="My.ActionBar.TabBar" parent="@android:style/Widget.Holo.ActionBar.TabBar">
    <item name="divider">@drawable/tab_divider</item>
    <item name="android:showDividers">middle</item>
    <item name="android:divider">@drawable/tab_divider</item>
    <item name="android:dividerHeight">24dp</item>
    <item name="android:dividerPadding">8dp</item>
    <!-- <item name="android:background">@drawable/tab_unselected</item> -->
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T16:59:26.533

这是一个[链接](http://jgilfelt.github.io/android-actionbarstylegenerator/)！使用此样式生成器，根据需要进行自定义。下载文件，将所有可绘制对象复制到相应的目录，将 style.xml 复制到 values 目录下。并在相应活动的清单中使用给定的主题名称作为您的主题。

希望这对你有用

# delphi - 如何在 onMouseDown 事件中获取鼠标光标下的控件？

> ID：12781856
> 
> 赞同：4
> 
> 时间：2012-10-08T12:34:22.577
> 
> 标签：delphi, firemonkey, mousedown, mouse-position, childcontrol

我有一个 TGridLayout ，其中填充了**Firemonkey HD Application**中的一些图像。在 gridLayout 的 onMouseDown 事件中，我想获取用户单击的图像对象，但我只有鼠标坐标。

为每个图像实现 onMouseDown 事件不是一种选择，因为如果从网格布局中删除图像，则会留下空白空间。在这种情况下，我还想知道用户是否点击了这个空白区域。

Firemonkey 中是否有某种“getChildAtPos”或“FindVCLWindow”**模拟**？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T13:30:56.120

[TForm.ObjectAtPoint](http://docwiki.embarcadero.com/Libraries/XE3/en/FMX.Forms.TCommonCustomForm.ObjectAtPoint)应该可以解决问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-08T13:17:53.717

[FindVCLWindow 可以满足](http://docs.embarcadero.com/products/rad_studio/delphiAndcpp2009/HelpUpdate2/EN/html/delphivclwin32/Controls_FindVCLWindow.html)您的需要。您需要指定控件所在的点，在您的情况下，它是鼠标位置。

# php - PHP更改第二页上的页面宽度（mPDF）

> ID：12781858
> 
> 赞同：0
> 
> 时间：2012-10-08T12:34:28.043
> 
> 标签：php, mpdf

谁能告诉我如何使用`mpdf`. 我的页面大小是 A4（`mpdf`默认）。

我想动态更改报告第二页的宽度，因为它是表格的动态内容（例如列数未定义）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T21:19:34.480

如果您知道第一页的结束位置，则可以使用 AddPage() 函数更改下一页的格式。

```
 $mpdf=new mPDF();
 $mpdf->WriteHTML('Your Introduction');
 $mpdf->AddPage('L','','','','',50,50,50,50,10,10);
 $mpdf->WriteHTML('Your Book text');
 $mpdf->AddPage('P','','','','',50,50,50,50,10,10); 
```

# python - 处理长表示字符串

> ID：12781862
> 
> 赞同：0
> 
> 时间：2012-10-08T12:34:50.310
> 
> 标签：python, repr

你会如何处理长`__repr__`字符串？有最佳实践吗？可以说我有以下内容。

```
class Foo(object):
    def __init__(self, bar):
        self.bar = bar
    def __repr__(self):
        return 'Foo(bar={0!r})'.format(self.bar)

foo = Foo(largedict)
print repr(foo) 
```

在表示字符串中添加换行符是否有用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:49:36.357

您可能会发现[santdard](http://docs.python.org/library/pprint.html)库中的 pprint 很有用。

# java - 使用由定义的属性 在工厂方法中

> ID：12781868
> 
> 赞同：3
> 
> 时间：2012-10-08T12:35:03.050
> 
> 标签：java, spring, properties

我编写了一个工厂 bean，它根据应用程序特定属性文件中配置的属性创建缓存管理器。

这个概念是可以选择多个实现，每个实现都使用其他配置属性。

例如：

*   noop 缓存，无参数，
*   具有#max 个对象的 ehcache
*   配置了多个 ips 和端口的 memcache。

我认为最好不要在 中指定所有缓存应用程序特定的参数`application-context.xml`，而是从现有的属性源中读取它们。

我的尝试是使用`EnvironementAware`接口来访问`Environement`. 但似乎使用配置的属性文件`<context:property-placeholder>`不包含在`PropertiesSources`.

例子.properties

```
cache.implementation=memcached
cache.memcached.servers=server1:11211,server2:11211 
```

应用程序上下文.xml

```
<context:property-placeholder location="example.properties"/>
<bean id="cacheManager" class="com.example.CacheManagerFactory"/> 
```

在 CacheManagerFactory.java

```
public class CacheManagerFactory implements FactoryBean<CacheManager>, EnvironmentAware {

    private Environement env;

    @Override
    public CacheManager getObject() throws Exception {
        String impl = env.getRequiredProperty("cache.implementation"); // this fails
    //Do something based on impl, which requires more properties.
    }

    @Override
    public void setEnvironment(Environment env) {
        this.env = env;
    }

    @Override
    public Class<?> getObjectType() {
        return CacheManager.class;
    }

    @Override
    public boolean isSingleton() {
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T12:45:10.890

在这样的配置文件中：

```
 <context:property-placeholder location="classpath:your.properties" ignore-unresolvable="true"/>
  ...
 <property name="email" value="${property1.email}"/>
 <!-- or -->
 <property name="email">
   <value>${property1.email}</value>
 </property> 
```

或在代码中：

```
@Value("${cities}")
private String cities; 
```

your.properties 包含以下内容：

```
cities = my test string 
property1.email = answer@stackvoerflow.com 
```

# c# - How should I reference sn.exe in msbuild script?

> ID：12781870
> 
> 赞同：4
> 
> 时间：2012-10-08T12:35:07.060
> 
> 标签：c#, .net, msbuild, code-signing, assembly-signing

I need to re-sign my assembly after the build has finished (and I've done some other things to it), so I started by adding an `<Exec>` Task that called `C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A\bin\NETFX 4.0 Tools\sn.exe`. This has to work for other developers/environments, so I was hoping I could just copy `sn.exe` and `sn.exe.config` from that folder and store it in our code repository so I could always call a common version of it from a known location.

`sn.exe` crashes in isolation outside of the sdk directory, so I'm wondering how I can reference it without knowing what path it will be under. Different people have different environments (x86 vs x64, different install directories, different versions), so I would like to be able to easily reference the latest version of the tool (or perhaps any version). Seems like a simple enough tool, perhaps there is another way to sign an assembly with another tool/command/msbuild task? Any help would be appreciated.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T14:59:03.310

Turns out there's a task called "GetFrameworkSdkPath" that will get the Windows SDK location. From there, I had to test to see if sn.exe existed directly in the `bin` folder, or if it's in `bin\NETFX 4.0 Tools\`. Seems reliable so far.

```
<PropertyGroup>
  <SNExePath>NotSet</SNExePath>
</PropertyGroup>

<!-- Sometimes theres nothing in the WindowsSdkPath dir and there's stuff in a deeper folder called 'NETFX 4.0 Tools'. -->
<Target Name="GetSNPath" BeforeTargets="AfterBuild">
  <GetFrameworkSdkPath>
    <Output TaskParameter="Path" PropertyName="WindowsSdkPath" />
  </GetFrameworkSdkPath>
  <PropertyGroup>
    <SNExePath>$(WindowsSdkPath)bin\sn.exe</SNExePath>
  </PropertyGroup>
  <PropertyGroup>
    <SNExePath Condition="!Exists($(SNExePath))">$(WindowsSdkPath)bin\NETFX 4.0 Tools\sn.exe</SNExePath>
  </PropertyGroup>
</Target>  

<Target Name="AfterBuild">
  <Exec Command="$(SNExePath) -R $(TargetPath) $(SignatureFile)" />
</Target> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-12T17:49:28.080

To properly reference a tool like `sn` or `sqlmetal` (what I am after) in an msbuild script in the way that will work for the most people, you must take into consideration different aspects of the operating environment and framework implementation. There are two main cases: Microsoft Windows and Microsoft’s implementation of the framework followed by everything else (by which I mean Mono/unix). An example of the correct approach which supports the situations I can think of is listed at the end.

## Microsoft

The proper way to find where `sn` or other similar tools live in Windows is to start with the [GetFrameworkSdkPath task](http://msdn.microsoft.com/en-us/library/ms164298), as [already mentioned](https://stackoverflow.com/a/12822416/429091).

However, as the question suggests, the exact location within the FrameworkSdkPath that `sn` or another tool lives cannot be determined directly. The referenced answer suggests that the only possible folders under FrameworkSdkPath for tools to reside in are `bin` and `bin/NETFX 4.0 Tools`. However, other values are possible (Visual Studio 2013 Preview uses `bin/NETFX 4.5.1 Tools`). Thus, the only proper way to search for `sn` is to use a glob expression or recursively search for it. I have trouble figuring out how to do glob expansion with MSBuild and the built-in MSBuild tasks do not seem to support searching under FrameworkSdkPath for particular utilities. However, cmd’s [`WHERE`](http://ss64.com/nt/where.html) has this functionality and can be used to do the search. The result is something like the following msbuild code:

```
<Target Name="GetSNPath" BeforeTargets="AfterBuild">
  <GetFrameworkSdkPath>
    <Output TaskParameter="Path" PropertyName="WindowsSdkPath" />
  </GetFrameworkSdkPath>
  <Exec Command="WHERE /r &quot;$(WindowsSdkPath.TrimEnd('\\'))&quot; sn &gt; sn-path.txt"  />
  <ReadLinesFromFile File="sn-path.txt">
    <Output TaskParameter="Lines" PropertyName="SNPath"/>
  </ReadLinesFromFile>
  <Delete Files="sn-path.txt" />
  <PropertyGroup>
    <SNPath>$([System.Text.RegularExpressions.Regex]::Replace('$(SNPath)', ';.*', ''))</SNPath>
  </PropertyGroup>
</Target> 
```

(See [Property Functions](http://msdn.microsoft.com/en-us/library/dd633440#BKMK_String) to see why I can use `String.TrimEnd` here. `WHERE` doesn’t like trailing slashes. EDIT: I added use of Property Functions to access `Regex.Replace()` to delete all but the first found path in the `SNPath` property. One of my friend’s machines’s `WHERE` invocations would output multiple results for certain commands and broke any attempt to `<Exec/>` the fond tool. This change ensures that only one result is found and that `<Exec/>`s actually succeed.)

Now you can invoke `sn` with `<Exec Command="&quot;$(SNPath)&quot;" />`.

## Portable

Unsurprisingly, resolving the path to `sn` is much simpler on any operating system other than Windows. On Mac OSX and any distribution of Linux, I find `sn` in the PATH. Using `GetFrameworkSdkPath` does not help in such a situation; in fact, this seems to return a path under which `sn` cannot be found, at least for the old versions of mono-2.10 I tested while using xbuild:

*   On Mac OSX `FrameworkSdkPath` is `/Library/Frameworks/Mono.framework/Versions/2.10.5/lib/mono/2.0` and `/usr/bin/sn` is a symlink to `/Library/Frameworks/Mono.framework/Commands/sn`.
*   On a certain Linux install, `FrameworkSdkPath` is `/usr/lib64/mono/2.0` and `sn` is `/usr/bin/sn` (which is a shell script invoking `/usr/lib64/mono/4.0/sn.exe` with `mono`).

Thus, all we need to do is try to execute `sn`. Any unix users placing their `sn` implementations in non-standard places already know to update PATH appropriately, so the build script has no need to ever search for it. Also, `WHERE` does not exist in unix. Thus, in the unix case, we want to replace the first `<Exec/>` call with something that will output just `sn` on unix and still do the full search when run on Windows. To differentiate unix-like and Windows environments, we use a trick which takes advantage of unix shells’ shortcut for the `true` commmand and cmd’s label syntax. As a short example, the following script will output `I’m unix!` in a unix shellout and `I’m Windows :-/` on a Windows shellout.

```
:; echo 'I’m unix!'; exit $?
echo I’m Windows :-/ 
```

Taking advantage of this, our resulting `GetSNPath` Task looks like:

```
<Target Name="GetSNPath" BeforeTargets="AfterBuild">
  <GetFrameworkSdkPath>
    <Output TaskParameter="Path" PropertyName="WindowsSdkPath" />
  </GetFrameworkSdkPath>
  <Exec Command=":; echo sn &gt; sn-path.txt; exit $?
WHERE /r &quot;$(WindowsSdkPath.TrimEnd('\\'))&quot; sn &gt; sn-path.txt"  />
  <ReadLinesFromFile File="sn-path.txt">
    <Output TaskParameter="Lines" PropertyName="SNPath"/>
  </ReadLinesFromFile>
  <Delete Files="sn-path.txt" />
  <PropertyGroup>
    <SNPath>$([System.Text.RegularExpressions.Regex]::Replace('$(SNPath)', ';.*', ''))</SNPath>
  </PropertyGroup>
</Target> 
```

The result is a portable method for finding the string required to invoke `sn`. This last solution lets you support both Microsoft and its msbuild and every other platform using xbuild. It also overcomes hardcoding `bin\NETFX 4.0 Tools` into .csproj files to support future and current versions of Microsoft tools simultaneously.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-03T17:02:07.430

The method I'm using at the moment involves using a property function to perform a search for SN.exe underneath the framework SDK path - ala:

```
<GetFrameworkSDKPath>
  <Output TaskParameter="Path" PropertyName="DotNetFrameworkDir"/>
</GetFrameworkSDKPath>

<PropertyGroup>
  <SNPath>$([System.IO.Directory]::GetFiles("$(DotNetFrameworkDir)", "sn.exe", SearchOption.AllDirectories)[0])</SNPath>
</PropertyGroup> 
```

So far I've only tested this personally on Visual Studio 2013, but the documentation implies it ought to work back to Visual Studio 2010.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-09T02:23:07.363

You can create an environment variable on each development machine that references the executable, which MSBuild lets you reference as a property.

So, create the environment variable via the advanced tab of system properties. I usually just create a system environment variable as opposed to one scoped to the current user. You will have to restart Visual Studio for it to pick it up.

Then, reference it in MSBuild:

```
<Exec Command="$(SnExe)"> 
```

Where `SnExe` is the environment variable you defined.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-20T02:11:55.037

For what its worth the $(SDK40ToolsPath) variable worked for me in a similar situation. This negates the need to know which specific version of the tools are installed eg:

```
 <PropertyGroup>
    <XsdExePath>$(SDK40ToolsPath)xsd.exe</XsdExePath>
  </PropertyGroup>
  <Target Name="BeforeBuild">
    <ItemGroup>
      <xsd Include="Objects.xsd" />
    </ItemGroup>
    <Exec Command="&quot;$(XsdExePath)&quot; @(xsd) /c /namespace:Blah.Objects" />
  </Target> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-03T08:09:46.680

Path to a .NET Framwork tool like sn.exe is actually a combination of using GetFramworkSDKPath (as described above) and (almost) the TargetFrameworkVersion (as is specified in the project file). You basically need to remove the initial "v" from TargetFrameworkVersion and concatenate together the pieces to to form the path to the tool, for instance

```
<Target Name="GetSNPath" BeforeTargets="AfterBuild">
  <GetFrameworkSdkPath>
    <Output TaskParameter="Path" PropertyName="WindowsSdkPath" />
  </GetFrameworkSdkPath>
  <PropertyGroup>

   <FrameworkVersion>$([System.Text.RegularExpressions.Regex]::Replace('$(TargetFrameworkVersilon)', 'v', ''))</FrameworkVersion>
    <NETFXVersion>NETFX $(FrameworkVersion) Tools</NETFXVersion>
    <SNPath>$(WindowsSdkPath)bin\$(NETFXVersion)\sn.exe</SNPath>
  </PropertyGroup>
</Target> 
```

# java - 如何在Java（Android）中将字节数组转换为字符串

> ID：12781872
> 
> 赞同：1
> 
> 时间：2012-10-08T12:35:14.107
> 
> 标签：java, android

我通过以下方式将字节数组转换为字符串：

```
public static String byteArrayToString(byte[] bytes)
{
    return new String(bytes);
} 
```

但是这种方法需要很多时间。有什么有效的方法将字节数组转换为字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T12:37:48.043

我知道没有更好的方法。而且您应该始终使用带有编码的构造函数，或者如果您处理英语以外的任何语言，它几乎可以保证您最终会得到搞砸的字符。即：您确实应该使用`new String(bytes, "UTF-8")`（显然用您的 byte[] 用来表示文本的任何编码替换 UTF-8）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-21T11:07:36.650

字符串头=新字符串（字节数组，“ISO-8859-1”）；

# objective-c - 在图像的特定区域进行平滑处理

> ID：12781874
> 
> 赞同：2
> 
> 时间：2012-10-08T12:35:16.843
> 
> 标签：objective-c, ios, image-processing, opencv

> **可能重复：**
> [如何在 OpenCV 中设置 ROI？](https://stackoverflow.com/questions/8206466/how-to-set-roi-in-opencv)

我正在尝试在图像上使用平滑/模糊滤镜，但仅限于源的特定路径/区域。（目前使用openCV）

怎么可能呢？

现在我正在做类似的事情

```
cv::GaussianBlur(im, newim, cv::Size(5,5),1.5); 
```

但我想做

```
cv::GaussianBlur(im, newim, cv::Size(5,5),1.5,MyClosedPath); 
```

如果更容易，我也可以使用任何 ios 类。（也没有找到方法）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T12:55:54.327

您可以从原始矩阵中获取子矩阵，例如：

```
cv::Mat subMat = originalMatrix(cv::Rect(x, y, width, height)); 
```

其中 x,y, width, height 是子图像的位置。然后在子矩阵上执行高斯模糊。

[编辑]如果你想模糊复杂的形状，一种方法是模糊整个图像，然后使用 mat.copyTo 与你的模糊部分的面具：

```
cv::Mat mask = ?; // this should be a CV_8U image with 0 pixels everywhere but where you want to blur the original image
cv::Mat blurred;
cv::gaussianBlur(image, blurred, cv::Size(5,5),1.5);
cv::Mat output = image.clone();
blurred.copyTo(output, mask); 
```

# php - 通过 PHP cURL 获取文件内容

> ID：12781876
> 
> 赞同：19
> 
> 时间：2012-10-08T12:35:42.397
> 
> 标签：php, curl

我有一个网站。让我们称之为`http://www.domain.com`。现在，在这个 domain.com 上，我想显示`http://www.adserversite.com/ads.php`. 如何使用 cURL 或其他方法做到这一点？我不想使用`iframe`.

谢谢

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-10-08T12:49:06.550

你可以`file_get_contents`像 Petr 所说的那样使用，但你需要[`allow_url_fopen`](http://php.net/manual/en/filesystem.configuration.php)在你的主机中激活`php.ini`，也许你的主机不允许你改变它。

如果您更喜欢使用 CURL 而不是`file_get_contents`，请尝试以下代码：

```
<?php
$url = 'http://www.adserversite.com/ads.php';
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_HEADER, false);
$data = curl_exec($curl);
curl_close($curl); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-08T12:39:04.097

```
echo file_get_contents('http://www.adserversite.com/ads.php'); 
```

谁需要 curl 来完成这个简单的任务？

# codeigniter - CodeIgniter：控制器隐藏时的多语言

> ID：12781879
> 
> 赞同：1
> 
> 时间：2012-10-08T12:35:49.923
> 
> 标签：codeigniter, internationalization, routes, controllers

请帮我。我的情况是当我像这样在 url 上隐藏 index.php 和控制器名称时：

localhost/ctc/index.php/controllers/function/ ==> localhost/ctc/function

它工作正常，之后，我想在我的网站中使用多语言并使用该网站的教程：http: [//maestric.com/doc/php/codeigniter_i18n](http://maestric.com/doc/php/codeigniter_i18n)，我的网址转到：

localhost/ctc/function ==> localhost/ctc/en/function 或 localhost/ctc/fr/function

问题是，当我将语言从法国更改为英语时，当前页面会变成英语（当然），但是当我点击其他页面时，语言又回到默认语言是法国，我不知道为什么。

这是我的 routes.php：

```
 $route['default_controller'] = "main/main_page";
    $route['en/main/(:any)'] = "main/$1";
    $route['fr/main/(:any)'] = "main/$1";
    $route['en/(:any)'] = "main/$1";
    $route['fr/(:any)'] = "main/$1";
    $route['(:any)'] = "main/$1";
    $route['^(en|fr)/(.+)$'] = "$1";
    $route['^(en|fr)$'] = $route['default_controller'];
    $route['404_override'] = ''; 
```

# asp-classic - 从 Amazon Route 53 的有效 URL 返回 404 错误

> ID：12781881
> 
> 赞同：1
> 
> 时间：2012-10-08T12:35:53.307
> 
> 标签：asp-classic, amazon-web-services, amazon-route53

我正在尝试使用来自 Classic ASP 的 Amazon Route 53 服务器 API，但是当我发布请求时，`HTTP 404 Not Found`即使发送的 URL 是有效的，如果我将其粘贴到浏览器中，我也会收到错误消息。Classic ASP 不能调用 Route 53 还是我的代码有错误？

```
Dim linebreak, gmt, timestamp, urlparams, amazonserver, stringtosign, signature, signedURL, sha256
const versionDate="2009-07-01"
amazonserver="https://route53.amazonaws.com/2012-02-29/xxxxxxxxxx"
linebreak=chr(13)

const secretkey="my secret key"
gmt=DateAdd("H", 0, Now)

timestamp = return_RFC822_Date(Now(), "GMT")

set sha256=GetObject("script:"&Server.MapPath("sha256.wsc"))

stringtosign = timestamp

signature=sha256.b64_hmac_sha256(secretkey, stringtosign)

header = "AWS3-HTTPS AWSAccessKeyId=ky access id,Algorithm=HMANSHA256,Signature="&signature

Set sha256=nothing

signedURL=amazonserver&"/onca/xml?"&urlparams&"&Signature="&Server.URLEncode(signature)
response.write signedURL

Set xmlHttp = Server.Createobject("Microsoft.XMLHTTP")
xmlHttp.Open "POST", signedUrl, False
    response.write strURL&"<br>"
xmlHttp.setRequestHeader "User-Agent", "asp httprequest"
xmlHttp.setRequestHeader "Host", "route53.amazonaws.com"
xmlHttp.setRequestHeader "content-type", "text/plain"
    xmlHttp.setRequestHeader "X-Amzn-Authorization", signature
xmlHttp.Send()
    if xmlHttp.Status >= 400 And xmlHttp.Status <= 599 Then
        response.write "Error Occurred : " & xmlHttp.Status & " - " & xmlHttp.statusText
    else
        getXML = xmlHttp.responseText
    end if

xmlHttp.abort()
set xmlHttp = Nothing 
```

# javascript - jQuery添加和添加

> ID：12781886
> 
> 赞同：7
> 
> 时间：2012-10-08T12:36:26.990
> 
> 标签：javascript, jquery

如何使用 jQuery 添加`<thead>`这个`<tbody>`？

问题是我的表有 1 或 2 行？

```
$('#myTable tr:has(th)').wrap('<thead></thead>'); 
```

* * *

```
<table id="myTable">

<tr><th>1</th><th>2</th><th>3</th><th>4</th></tr>
<tr><th>1</th><th>2</th><th>3</th><th>4</th></tr>

<tr><td>1</td><td>2</td><td>3</td><td>4</td></tr>
<tr><td>1</td><td>2</td><td>3</td><td>4</td></tr>
<tr><td>1</td><td>2</td><td>3</td><td>4</td></tr>
<tr><td>1</td><td>2</td><td>3</td><td>4</td></tr>
<tr><td>1</td><td>2</td><td>3</td><td>4</td></tr>  
</table> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-08T12:42:46.683

您需要做的是删除行并将它们附加到 thead 元素

```
var myTable = jQuery("#myTable");
var thead = myTable.find("thead");
var thRows =  myTable.find("tr:has(th)");

if (thead.length===0){  //if there is no thead element, add one.
    thead = jQuery("<thead></thead>").appendTo(myTable);    
}

var copy = thRows.clone(true).appendTo("thead");
thRows.remove(); 
```

[jsFiddle 示例](http://jsfiddle.net/B4bv6/) ​</p>

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-08T12:42:34.307

使用 wrapAll 而不是 wrap

```
$('#myTable tr:has(th)').wrapAll('<thead></thead>');​
$("#myTable thead").prependTo("#myTable") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-11T12:51:40.607

```
function createTable(data) {
    var str = "";
    str += '<table><thead>';
    str += '<tr><td>Pos</td><td>Ref</td></tr></thead><tbody>';
    for (var item in data.recentList) {
        str += '<tr>';
        for (idata in data.recentList[item]) {
            str += '<td>' + data.recentList[item][idata] + '</td>';
        }
        str += '</tr>';
    }
    str += '</tbody></table>';
    $('body').append(str);
} 
```

从数组创建表的工作版本

# c# - 对于 csv 转换列表 成字节数组

> ID：12781889
> 
> 赞同：0
> 
> 时间：2012-10-08T12:36:31.723
> 
> 标签：c#, asp.net-mvc-3, list, csv

我有一个动作

```
 public FileContentResult DownloadCSV()
    {
        var people = new List<Person> { new Person("Matt", "Abbott"), new Person("John","Smith") };
        string csv = "Charlie, Chaplin, Chuckles";
        Extensions.ToCSV(new DataTable());
        return File(new System.Text.UTF8Encoding().GetBytes(csv), "text/csv", "Report123.csv");
    } 
```

和一堂课

```
public static class Extensions
{
    public static string ToCSV(DataTable table)
    {
        var result = new StringBuilder();
        for (int i = 0; i < table.Columns.Count; i++)
        {
            result.Append(table.Columns[i].ColumnName);
            result.Append(i == table.Columns.Count - 1 ? "\n" : ",");
        }

        foreach (DataRow row in table.Rows)
        {
            for (int i = 0; i < table.Columns.Count; i++)
            {
                result.Append(row[i].ToString());
                result.Append(i == table.Columns.Count - 1 ? "\n" : ",");
            }
        }

        return result.ToString();
    }
}

new System.Text.UTF8Encoding().GetBytes(csv) 
```

创造

```
string csv = "Charlie, Chaplin, Chuckles" 
```

成字节数组如何转换

```
var people = new List<Person> { new Person("Matt", "Abbott"), new Person("John","Smith") }; 
```

转换为带有 csv 格式标头的字节数组

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:44:20.803

我不明白你想要什么。但是根据我对您之前提出的问题的理解，以下是将对象转换为字节 [] 的方法。

```
static void Main(string[] args)
{
  Person p1 = new Person();
  p1.ID = 1;
  p1.Name = "Test";

  byte[] bytes = ObjectToByteArray(p1);
}

private byte[] ObjectToByteArray(Object obj) 
{ 
  if(obj == null) 
    return null; 
  BinaryFormatter bf = new BinaryFormatter(); 
  MemoryStream ms = new MemoryStream(); 
  bf.Serialize(ms, obj); 
  return ms.ToArray(); 
}

[Serializable]
public class Person
{
  public int ID { get; set; }
  public string Name { get; set; }
} 
```

# android - Android 连接超时异常

> ID：12781890
> 
> 赞同：0
> 
> 时间：2012-10-08T12:36:36.393
> 
> 标签：android, web-services, http, timeout

以下是我遇到异常（超时）的代码，请提供任何解决方案或教程。在 4.0.4 api 级别设备上使用

```
 HttpClient client = new DefaultHttpClient();

HttpPost request = new HttpPost(url);

 List<NameValuePair> params = new LinkedList<NameValuePair>();

> param has some values and a string of bitmap.

 HttpResponse response = client.execute(request);

StringBuilder receivedData = new StringBuilder();

BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

String line = null;

while ((line = reader.readLine()) != null) 
{

receivedData.append(line);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:58:44.383

尝试这个：

```
HttpConnectionParams.setConnectionTimeout(httpParams,
        TIMEOUT_MILLISEC);
HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-21T11:02:57.937

首先你需要了解什么是connectiontimeoutexception：

连接到 HTTP 服务器或等待来自 HttpConnectionManager 的可用连接时超时。

所以这意味着您设备的互联网无法与 HTTP 服务器建立连接并且请求超时。你可以做以下两件事来避免这种情况：

1.  在使用以下方法进行 HTTP 调用之前检查活动的 Internet 连接：

    ```
    public static Boolean checkActiveInternet(Context activity) {
    ConnectivityManager cm = (ConnectivityManager) activity.getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        if (netInfo != null && netInfo.isConnectedOrConnecting()) {
            return true;
        } else if (netInfo != null&& (netInfo.getState() == NetworkInfo.State.DISCONNECTED|| netInfo.getState() == NetworkInfo.State.DISCONNECTING|| netInfo.getState() == NetworkInfo.State.SUSPENDED || netInfo.getState() == NetworkInfo.State.UNKNOWN)) {
            return false;
        } else {
            return false;
        } 
    ```

    }

2.  为您的 HTTP 请求设置更大的超时时间，如下所示：

    公共静态字符串连接（字符串 url）抛出 IOException {

    ```
    HttpGet httpget = new HttpGet(url);
    HttpResponse response;
    HttpParams httpParameters = new BasicHttpParams();
    int timeoutConnection = 60 * 1000;
    HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
    int timeoutSocket = 60 * 1000;

    HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
    HttpClient httpclient = new DefaultHttpClient(httpParameters);
    try {

        response = httpclient.execute(httpget);

        HttpEntity entity = response.getEntity();
        if (entity != null) {
            InputStream instream = entity.getContent();
            result = convertStreamToString(instream);
            // instream.close();
        }
    } catch (ClientProtocolException e) {
        Utilities.showDLog("connect", "ClientProtocolException:-" + e);
    } catch (IOException e) {
        Utilities.showDLog("connect", "IOException:-" + e);
    }
    return result; 
    ```

    }

# ios5 - webView loadHTMLString 完成？

> ID：12781893
> 
> 赞同：6
> 
> 时间：2012-10-08T12:36:51.233
> 
> 标签：ios5, uiviewcontroller, uiwebview, ios6

关于这个有几个问题，它有一个关于嵌入在 html 字符串中的脚本的解决方案。不是我的情况。

我有一个 ios5/6 应用程序。我试图将加载代码放入`initWithNibName`坏主意，`viewDidLoad`已弃用，所以`viewWillAppear`离开了。

```
- (void) viewWillAppear:(BOOL)animated
{

    NSString* detailHtml = [Storage getDetailHtml: -1];// get the last one
    //NSLog(@"detailHtml: %@", detailHtml);
    if(detailHtml == nil){
        NSLog(@"Can't load the detail");
        detailHtml = @"<html><body>Some text here</body></html>";
    }   
    [webView loadHTMLString:detailHtml baseURL:nil];

    [super viewWillAppear:animated];
} 
```

此代码的问题是闪烁。它出现了 UIViewContoller，带有一个白色的 webView，而不是在 1-2 秒后显示 html。HTML 有一些文本，但也有 base64 编码的图像，有时它大约是 3Mb 甚至 5MB 内容。这里没有 javascript，只有内联 CSS（没有外部文件）、文本和 base 64 编码图像。

我可以预加载到`detailHtml`文本中，但我认为显示需要更多时间。

是否可以不显示 ViewController，直到 webView 尚未完成加载 html ？- 一些回调？

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T16:04:25.200

加载默认的 HTML 字符串需要一点时间。但如果一切正常，你为什么不放`UIActivityIndicator`，这样可以让用户与应用程序保持互动。甚至比保持空白要好得多

**这是一种委托方法`UIWebView`：**

```
- (void)webViewDidFinishLoad:(UIWebView *)webView 
{
//And stop your indicator over here
   [indicator stopAnimating];
} 
```

# c# - 如何映射字典 ?

> ID：12781894
> 
> 赞同：0
> 
> 时间：2012-10-08T12:36:51.623
> 
> 标签：c#, nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

如何使用 FluentNHibernate 映射字典？

```
IDictionary<SomeEnum, bool> 
```

和..

```
IDictionary<string, bool> 
```

?

像：

```
public class SomeClass
{    
   public int Id {get;set;}
   public IDictionary<SomeEnum, bool> Dictionary2 {get;set;} 
   public IDictionary<string, bool> Dictionary1 {get;set;} 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:18:08.050

似乎 Dictionary 的映射可以如下完成：

```
// IDictionary<string, bool>
HasMany(x => x.Dictionary1).AsMap<string>("keyColumn").Element("Enabled");

// IDictionary<SomeEnum, bool>  (Enum will be mapped as int)
HasMany(x => x.Dictionary2).AsMap("SomeEnum").Element("Enabled");  

// IDictionary<Entity, string>
HasMany(x => x.Dictionary3).AsEntityMap().Element("valueColumn"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:19:59.910

据我所知，您无法将字典映射到数据库。此外，SQL Server 中没有枚举的等效项。要实现`IDictionary<string, bool>`，我猜，您需要创建单独的表，其中将包含 Id、您的字符串、布尔值和 FK 到 SomeClass（多对一关系）。与 enum 字典是相同的情况，但外部表的内容取决于您的需要。

# c# - 如何在 C# 中更新和删除 datagridview？

> ID：12781895
> 
> 赞同：0
> 
> 时间：2012-10-08T12:36:55.800
> 
> 标签：c#, visual-studio-2010, ado.net, three-tier

我是 C# 的初学者并使用三层编程。我无法通过数据网格视图更新或删除记录。以下是我的代码。请帮我。

**达尔**

```
 namespace DAL
    {
        public class TblkalaDal
        {
            SqlConnection cn=new SqlConnection("Data Source=(local); Initial Catalog=store;Integrated Security=True");
            public DataTable Getdata()
            {
                try
                {
                    DataSet ds=new DataSet();
                    SqlDataAdapter da = new SqlDataAdapter("Sptblkala_getdata",cn);
                    da.SelectCommand.CommandType = CommandType.StoredProcedure;
                    da.Fill(ds, "Sptblkala_getdata");
                    return ds.Tables["Sptblkala_getdata"];
                }
                catch (Exception)
                {
                    return null;
                    throw;
                }
            }
    public string createkala(int kala_id,string kala_name,int kala_qty,int kala_orderpoint)
    {
        try
        {
            SqlCommand cmd = new SqlCommand("Sptblkala_insert", cn);
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.AddWithValue("@kala_id", kala_id);
            cmd.Parameters.AddWithValue("@kala_name", kala_name);
            cmd.Parameters.AddWithValue("@kala_qty", kala_qty);
            cmd.Parameters.AddWithValue("@kala_orderpoint", kala_orderpoint);
            cn.Open();
            cmd.ExecuteNonQuery();
            cn.Close();
            return "true";
        }
        catch (Exception ex)
        {
            return ex.Message;
            throw;
        }

    }
            public string Deletekala(int kala_id)
            {
                try
                {
                    SqlCommand dm = new SqlCommand("Sptblkala_delete", cn);
                    dm.CommandType = CommandType.StoredProcedure;
                    dm.Parameters.AddWithValue("@kala_id", kala_id);
                    cn.Open();
                    dm.ExecuteNonQuery();
                    cn.Close();
                    return "true";
                }
                catch (Exception ex)
                {
                 return   ex.Message;
                    throw;
                }

            }

            public string updatekala(int kala_id,string kala_name,int kala_qty,int kala_orderpoint)
            {
                try
                {
                    SqlCommand uk = new SqlCommand("Sptblkala_update", cn);
                    uk.CommandType = CommandType.StoredProcedure;
                    uk.Parameters.AddWithValue("@kala_id", kala_id);
                    uk.Parameters.AddWithValue("@kala_name", kala_name);
                    uk.Parameters.AddWithValue("@kala_qty", kala_qty);
                    uk.Parameters.AddWithValue("@kala_orderpoint", kala_orderpoint);
                    cn.Open();
                    uk.ExecuteNonQuery();
                    cn.Close();
                    return "true";
                }
                catch (Exception)
                {

                    throw;
                }
            }
        }
    } 
```

**BLL**

```
namespace BLL
{
    public class bllkala
    {
        TblkalaDal tk=new TblkalaDal();
        public string createkala(int kala_id,string kala_name,int kala_qty,int kala_orderpoint)
        {
            return tk.createkala(kala_id, kala_name, kala_qty, kala_orderpoint);
        }
        public string deletekala(int kala_id)
        {
            return tk.Deletekala(kala_id);
        }
        public string updatekala(int kala_id,string kala_name,int kala_qty,int kala_orderpoint)
        {
            return tk.updatekala(kala_id, kala_name, kala_qty, kala_orderpoint);
        }
        public DataTable Getdata()
        {
          return  tk.Getdata();
        }
    }
} 
```

介绍

```
namespace store
{
    public partial class kala : Form
    {
        public kala()
        {
            InitializeComponent();
        }

       bllkala bk=new bllkala();
        DataTable dt=new DataTable();

        private void btnkalainsert_Click(object sender, EventArgs e)
        {
            string check = bk.createkala(int.Parse(txtkalacode.Text), txtkalaname.Text, int.Parse(txtkqty.Text),
                                         int.Parse(txtkalapoint.Text));
            if (check=="true")
            {
                dt = bk.Getdata();
                dataGridViewkala.DataSource = dt;
            }
            else
            {
                MessageBox.Show(check);
            }
        }

        private void kala_Load(object sender, EventArgs e)
        {
            dt = bk.Getdata();
            dataGridViewkala.DataSource = dt;
        }

        private void btnkaladel_Click(object sender, EventArgs e)
        {
            dataGridViewkala.Rows.RemoveAt(dataGridViewkala.CurrentRow.Index);
            dt = bk.deletekala(int.Parse(txtkalacode.Text));
            dataGridViewkala.DataSource = dt;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:14:50.583

这种语法通常有效：[http://www.w3schools.com/sql/sql_update.asp](http://www.w3schools.com/sql/sql_update.asp) 基本上构建一个 sql 查询并让数据库执行它。这种方法的好处是您可以先在数据库管理程序中测试查询。

```
class Database
{
    DataGridView grid = new DataGridView();
    System.Data.SqlClient.SqlConnection cn = new System.Data.SqlClient.SqlConnection();

    public Database()
    {
        grid.CellEndEdit += new DataGridViewCellEventHandler(grid_CellEndEdit);
        grid.UserDeletedRow += new DataGridViewRowEventHandler(grid_UserDeletedRow);
    }

    void grid_CellEndEdit(object sender, DataGridViewCellEventArgs e)
    {
        string query = string.Format(
            "UPDATE Sptblkala {0}='{1}' WHERE kala_id={2}",
            grid.Columns[e.ColumnIndex].Name, grid[e.ColumnIndex, e.RowIndex].Value,
            grid[0, e.RowIndex].Value);

        try
        {
            System.Data.SqlClient.SqlCommand cmd = new System.Data.SqlClient.SqlCommand(query,cn);
            cmd.CommandType = System.Data.CommandType.Text;
            cn.Open();
            cmd.ExecuteScalar();
            cn.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.StackTrace);
        }
    }

    void grid_UserDeletedRow(object sender, DataGridViewRowEventArgs e)
    {
        string query = "DELETE FROM Sptblkala WHERE kala_id=" + e.Row.Cells[0].Value;

        try
        {
            System.Data.SqlClient.SqlCommand cmd = new System.Data.SqlClient.SqlCommand(query, cn);
            cmd.CommandType = System.Data.CommandType.Text;
            cn.Open();
            cmd.ExecuteScalar();
            cn.Close();
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.StackTrace);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T15:33:20.623

我在表示层找到了代码：

```
private void btnkaladel_Click(object sender, EventArgs e)
        {
            if (MessageBox.Show("Are you sure to delete?", "Deleting...", MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {

                dataGridViewkala.Rows.RemoveAt(dataGridViewkala.CurrentRow.Index);
                bk.deletekala(int.Parse(txtkalacode.Text));
                dataGridViewkala.DataSource = dt;
                txtkalacode.Text = null;
                txtkalaname.Text = null;
                txtkalapoint.Text = null;
                txtkqty.Text = null;
            }
        }

        private void dataGridViewkala_CellClick(object sender, DataGridViewCellEventArgs e)
        {
            txtkalacode.Text = dataGridViewkala.Rows[e.RowIndex].Cells[0].Value.ToString();
            txtkalaname.Text = dataGridViewkala.Rows[e.RowIndex].Cells[1].Value.ToString();
            txtkqty.Text = dataGridViewkala.Rows[e.RowIndex].Cells[2].Value.ToString();
            txtkalapoint.Text = dataGridViewkala.Rows[e.RowIndex].Cells[3].Value.ToString();
        }

        private void btnedit_Click(object sender, EventArgs e)
        {
            if (MessageBox.Show("Are you sure to edit?", "editing...", MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
            {
                bk.updatekala(int.Parse(txtkalacode.Text), txtkalaname.Text, int.Parse(txtkqty.Text),
                              int.Parse(txtkalapoint.Text));
                dt = bk.Getdata();
                dataGridViewkala.DataSource = dt;
                txtkalacode.Text = null;
                txtkalaname.Text = null;
                txtkalapoint.Text = null;
                txtkqty.Text = null;
            }
        }

    } 
```

# ios - UIWindow rootviewcontroller - 方向错误

> ID：12781898
> 
> 赞同：0
> 
> 时间：2012-10-08T12:37:03.480
> 
> 标签：ios, ipad, uiviewcontroller, uiwindow

我正在开发一个 iPad 应用程序，如果用户输入密码，用户就可以（在某些情况下）打开应用程序。因此我需要像 LoginViewController 这样的东西。但首先，让我们处理常见的情况，应用程序只需要显示 HomeViewController：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{  
    //...
    self.controllerHomeView = [[HomeViewController alloc] initWithNibName:@"HomeView" bundle:nil];
    self.controllerHomeView.showInitialGuide = isFirstLaunch;
    self.window.rootViewController = controllerHomeView;
    [self.window makeKeyAndVisible];
    //..
} 
```

但是，就像我之前说的，有些用户可能已经定义了密码，如果是这样，我们需要显示一个登录屏幕。这就是我为启用此类功能所做的事情：

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    //---
    if(isAppPinSecured && !loginIsAlreadyDisplaying) {
        LoginBackgroundViewController *controllerLoginBG = [[LoginBackgroundViewController alloc] initWithNibName:@"LoginBackgroundView" bundle:nil];
        self.appPinInputBG = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Default-Landscape@2x~ipad.png"]];
        self.appPinInputBG.frame = CGRectMake(0, 0, 1024, 748);
        self.appPinInputBG.userInteractionEnabled = YES;
        [controllerLoginBG.view addSubview:self.appPinInputBG];
        //present new root = background
        self.window.rootViewController = controllerLoginBG;
        //...
    }
} 
```

我正在做的是，将根视图控制器更改为 LoginViewController ，如果用户输入正确的密码，则从**LoginViewController**更改回**HomeViewController**。

到目前为止一切正常，除了方向。如果当前界面方向未知，因为 iPad 例如正放在桌子上，**LoginViewController**方向是**LandscapeRight**而不是**HomeViewController** ( **LandscapeLeft** ) 中的方向。如果将 iPad 握在手中，它可以正常工作，但否则就不行。

有关如何解决该问题的任何建议？我确实在 plist 文件（横向左）中设置了我的应用程序方向。我确实在 Home- 和 LoginViewController 中都使用 UIInterfaceOrientationIsLandscape(...) 实现了 shouldAutorotate。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:15:34.320

啊，问题是，我试图在调用 viewDidAppear 之前以模态方式推送视图控制器 - >你不应该这样做......

由于此错误而更改了我的代码后，它就像一个魅力

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:17:18.097

我认为正在发生的事情是在初始根控制器上设置了首选方向 - 当您将其切换出来时，它不会被设置。

我建议您考虑始终将 HomeViewController 设为根控制器。并且不要切换根控制器，而是推送 LoginViewController（如果您希望它立即显示，则不要动画）：

```
 [self.navigationController pushViewController:controllerLoginBG animated:NO] 
```

这样您就可以执行诸如注销和弹出到 HomeViewController 之类的操作。它还将使您的视图控制器导航保持一致。

# jquery - 为什么我的 jquery json each() 循环返回未定义？

> ID：12781901
> 
> 赞同：1
> 
> 时间：2012-10-08T12:37:09.603
> 
> 标签：jquery, json

这是我在 Jsonlint 中验证的本地 Json。

```
{
"messages": {
    "count": "0",
    "items": [
        {
            "MessageID": "1",
            "Starred": 0,
            "BodyPrev": "You wouldn't believe what has just happenedYou wouldn't believe what has ",
            "FromUserID": "1",
            "FromName": "Daisy Purdye",
            "FromUN": "daisypurdye",
            "Subject": "Yeayeah",
            "Body": "You wouldn't believe what has just happenedYou wouldn't believe what has just happenedYou wouldn't believe what has just happenedYou wouldn't believe what has just happenedYou wouldn't believe what has just happenedYou wouldn't believe what has just happened",
            "Ctime": "10/4/2012",
            "isRead": "1"
        },
        {
            "MessageID": "2",
            "Starred": 1,
            "BodyPrev": "Whatever",
            "FromUserID": "1",
            "FromName": "Daisy Purdye",
            "FromUN": "daisypurdye",
            "Subject": "Not true mate",
            "Body": "Whatever",
            "Ctime": "5/3/2012",
            "isRead": "1"
        }
    ]
} 
```

}

这是打印消息的jQuery...

```
 <script>
    $.getJSON("/json/messages.json",function(result){
        $.each(result, function(i, messages){
            console.log(messages.items.Subject)
        });
      });
   </script> 
```

它只是返回未定义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T12:39:00.763

`$.each`应该接收一个数组，然后将根对象传递给它，它不是数组，因为您的消息数组位于`result.messages.items`.

要遍历消息，您应该这样做

```
 $.getJSON("/json/messages.json",function(result){
    $.each(result.messages.items, function(i, message){
        console.log(message.Subject)
    });
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:39:21.473

Items 本身就是一个数组，所以我猜你至少需要像这样访问它：

```
messages.items[0].Subject 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:39:47.933

项目是一个数组。您应该遍历它以获取所有项目。

```
 <script>
    $.getJSON("/json/messages.json",function(result){
        $.each(result, function(i, messages){
          $.each(messages.items, function(index, item){
                 console.log(item.Subject)
           });

        });
      });
   </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T12:41:17.083

该`items`属性是一个数组，因此您不能使用`items.Subject`.

循环遍历数组中的项目，而不是遍历根对象中的属性：

```
$.getJSON("/json/messages.json",function(result){
  $.each(result.messages.items, function(i, item){
    console.log(item.Subject)
  });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T12:42:09.877

好像逻辑有问题。试试这个：

```
<script>
        $.getJSON("/json/messages.json",function(result){
            $.each(result.items, function(i, item){
                console.log(item.Subject)
            });
          });
       </script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T12:46:31.460

您的对象以这种形式存在

```
MainObj---> messages -----> items---->Subject 
```

因此，如果您需要打印主题，那么您必须以与它们存在的方式相同的方式访问

```
result.messages.items.Subject 
```

# php - 在 PHP 5.3 中使用 end(explode($delim, $str)) 是否正确？

> ID：12781907
> 
> 赞同：0
> 
> 时间：2012-10-08T12:37:43.090
> 
> 标签：php

关于返回结果的手册摘录：

> 数组。这个数组是通过引用传递的，因为它被函数修改了。这意味着您必须将一个实变量传递给它，而不是一个返回数组的函数，因为只有实际变量可以通过引用传递。

我使用`end(explode(`它并且它在没有任何警告或通知的情况下工作，但我在本地主机上有*PHP 5.4*并且产品要求是“ *PHP 5.3 或更高版本*”。我阅读了 5.4 中出现的函数数组解引用，但我认为它仅适用于方括号数组元素解引用。

有人可以帮我解决这个问题吗？或者至少给我一些关于 PHP 内部工作原理的链接。有一个方便的 JavaScript 技术参考资料，我可以为 PHP 使用类似的技术参考资料。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:43:05.063

`As of PHP 5.4 it is possible to array dereference the result of a function or method call directly. Before it was only possible using a temporary variable.`

它会自动创建临时变量

# java - 有没有办法保留或修改代码内基数信息？

> ID：12781911
> 
> 赞同：1
> 
> 时间：2012-10-08T12:37:59.657
> 
> 标签：java, parsing, radix

假设我有以下代码：

```
int two = 2;
String twoInBinary = Integer.toString(two, 2); 
```

`twoInBinary`String 现在将保存value `10`。但似乎基数信息在这种转换中完全丢失了。因此，如果我`twoInBinary`作为 XML 文件的一部分通过网络发送并希望将其反序列化为整数格式，就像这样......

```
int deserializedTwo = Integer.parseInt(twoInBinary); 
```

...然后`deserializedTwo`将等于`10`而不是`2`（十进制）。

我知道有`Integer.parseInt(String s, int radix)`，但是在一个复杂的系统中，对许多不同的字符串使用许多不同的基数，是否可以保留基数信息而不必为您的值保留一个单独的、同步的日志？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:40:33.003

简短的回答：不，不是在标准 Java 中。然而，编写一个`Serializable`可以通过网络传输值和基数信息的类是微不足道的。

```
class ValueWithRadix implements Serializable
{
    int radix;
    String value;
}

int deserializedTwo = Integer.parseInt( valueWithRadix.getValue() , valueWithRadix.getRadix() ); 
```

编辑：为了进一步澄清，网络上的 XML 可能看起来像

```
<ValueWithRadix>
  <value>10</value>
  <radix>2</radix>
</ValueWithRadix> 
```

而不仅仅是

```
<value>10</value> 
```

这当然不保留基数信息。

干杯，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T12:46:14.017

如果您将其作为 XML 文件的一部分发送，则必须使用正确的数据类型定义。XML 模式支持[许多不同的内置](http://www.w3.org/TR/xmlschema-2/#built-in-datatypes)类型来准确描述您的类型。

所以`<value>10</value>`目前可能正在描述一个`integer`，它被定义为以 10 为底。您可以很容易地描述一种新的简单类型，它将数字表示为以 2 为底。

# android - 无法更新版本代码

> ID：12781912
> 
> 赞同：1
> 
> 时间：2012-10-08T12:38:05.843
> 
> 标签：android, android-manifest, publish, publishing

我在 15 天前在 Google Play 上发布了一个应用程序，我对应用程序进行了一些修改，现在我想再次发布它。

当我尝试在不更改 VersionCode="1" 的情况下上传 apk 时，Google 开发者控制台给了我一个错误：带有 versionCode="1" 的应用程序已经存在。

然后我尝试将版本代码更改为 2 并导出 apk，不幸的是，版本代码总是恢复为“1”。

请帮忙解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T15:01:52.257

确保您**没有**使用它，`bin/manifest`因为这是内置的，并且会在构建/导出时不断更改。

使用`manifest`可以在项目的根目录中找到的正确的。

我也这样做了一段时间，不小心打开了 bin 文件夹并感到困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T13:01:36.377

我有同样的问题。我已经更改了 3 个版本，直到完成。有很多可能性。您没有正确输入密钥（密码），第二次尝试停用第一个版本，然后上传新版本。尽量不要忘记更改版本代码和版本名称，并将 APK 导出为第一次。希望它会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-16T05:57:34.320

即使通常在从不同机器编辑项目时编辑正确的清单文件（不是 bin/manifest），我也遇到了这个问题。

在 Eclipse 中，尝试“清理”项目并重新构建。下次安装时应使用正确的版本更新 APK。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-21T23:57:44.547

If you are using gradle to build you must change it on build.gradle: android { compileSdkVersion 21 buildToolsVersion "21.1.2"

```
defaultConfig {
    applicationId "com.xx.sadsa"
    minSdkVersion 15
    targetSdkVersion 21
    versionCode 3
    versionName "1.0"
} 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-20T02:39:19.323

此外，如果您在 Android Studio 中： `Build`>`Generate Signed APK...`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-30T06:13:33.413

经过大量搜索后，我无法将apk上传到google play控制台（注意：我已经更新了build.gradle中的版本名称和版本代码），只是清理项目就足够了，我能够将apk上传到控制台。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-14T13:21:19.453

以上都不适用于我的情况。转到文件-> 使缓存无效/为我重新启动工作

# c# - BinaryWriter 在 AppendMode 的开头写入脏字符

> ID：12781915
> 
> 赞同：1
> 
> 时间：2012-10-08T12:38:10.937
> 
> 标签：c#, .net, file-io, binarywriter

> **可能重复：**
> [为什么 BinaryWriter 会在流的开头添加乱码？你如何避免它？](https://stackoverflow.com/questions/1488486/why-does-binarywriter-prepend-gibberish-to-the-start-of-a-stream-how-do-you-avo)

该问题发生在 NTService 的执行过程中，该 NTService 在文件中写入了许多报告。这是我使用的简单代码：

```
 FileStream fsw = new FileStream(fileName, FileMode.Append, FileAccess.Write, FileShare.Write);
            BinaryWriter w = new BinaryWriter(fsw);
            w.Write(report);
            w.Flush();
            fsw.Flush();
            w.Close();
            fsw.Close(); 
```

输出在文件中正确刷新，但在每次写入开始时会出现两个奇怪的字符 (ï¿½)。我在多台机器上部署了该服务，但问题仍然存在。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:21:05.947

尝试这个：

```
 BinaryWriter w = new BinaryWriter(fsw);

    w.Write(UTF8Encoding.Default.GetBytes(report)); 
```

# jquery - jQuery Datepicker，单击输入框不显示日历但显示在div中

> ID：12781920
> 
> 赞同：0
> 
> 时间：2012-10-08T12:38:36.593
> 
> 标签：jquery

我正在尝试运行与此页面相同的代码以将日期选择器添加到我的输入中：http: [//jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/) 如果单击输入框，则在此页面上显示日期选择器表. 这是我页面的代码：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/jquery.js"></script>
        <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/datepicker.js"></script>
        <script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/widget.js"></script>   
        <link rel="icon" 
              type="image/png" 
              href="#{facesContext.externalContext.requestContextPath}/resources/images/askbirdfavicon.png"/>
        <link href="#{facesContext.externalContext.requestContextPath}/resources/css/form.css" rel="stylesheet" type="text/css" />
        <link href="#{facesContext.externalContext.requestContextPath}/resources/css/datepicker.css" rel="stylesheet" type="text/css" />
        <link href="#{facesContext.externalContext.requestContextPath}/resources/css/adminnavbar.css" rel="stylesheet" type="text/css" />
    <link href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery.ui.all.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.8.24/themes/base/jquery-ui.css" type="text/css" media="all"/>
    <link rel="stylesheet" href="http://static.jquery.com/ui/css/demo-docs-theme/ui.theme.css" type="text/css" media="all"/>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
    <script src="http://code.jquery.com/ui/1.8.24/jquery-ui.min.js" type="text/javascript"></script>
    <script src="http://jquery-ui.googlecode.com/svn/tags/latest/external/jquery.bgiframe-2.1.2.js" type="text/javascript"></script>
    <script src="http://jquery-ui.googlecode.com/svn/tags/latest/ui/minified/i18n/jquery-ui-i18n.min.js" type="text/javascript"></script>
        <title>AskBird</title>
    </h:head>
<h:body>
        <h:form id="form" >                                  
                <script>
                    $(function() {
                        $( "#datepicker" ).datepicker();
                    });
                </script>
                <div class="demo">

                    Date: <input type="text" id="datepicker" class="hasDatepicker"/>

                </div><!-- End demo -->               
            <script>

                $(document).ready(function () {
                    $("p").text("The DOM is now loaded and can be manipulated.");
                });                                
            </script>
            <p>Not loaded yet.</p>    
</h:form>
    </h:body>
</html> 
```

我的 jquery 库肯定已加载，因为从下图中可以看出“DOM 已加载”消息在我的段落元素中显示，而不是“未加载”。

![在此处输入图像描述](../Images/12fcc39241d056d022b62651fceb5755.png)

此外，为了确保我的 datepicker.js 库已加载，我将一个 ID 为“datepicker”的空 div 放入代码中，以查看在我的页面上显示的日历。（您再次在图片中看到它）。问题是通过单击我的输入，没有弹出任何内容。因为这就是它在我上面提供的页面中的工作方式。你觉得我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:42:21.010

jquery-ui JS 和 Css 文件的引用在哪里？

也尝试包装您的代码：

```
$(文档).ready(函数()
{
    $( "#datepicker" ).datepicker();
});

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:43:34.263

您已经加载**了 JS，但没有加载 CSS。**

您还没有加载 jquery ui css 文件，这就是问题所在，加载它就可以了。

添加这个：[https](https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery.ui.all.css) ://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery.ui.all.css 或者从 jquery ui 站点下载 css 和图像。

编辑：我也没有看到 jquery ui-core js 文件？你包括了吗？

[http://jqueryui.com/download](http://jqueryui.com/download)，请阅读此链接，日期选择器需要一些必要的文件才能工作。

工作示例：http: [//jsfiddle.net/tbYPf/30/](http://jsfiddle.net/tbYPf/30/)

# java - 如何构造 basicdbobject 查询以删除深度数组文档？

> ID：12781921
> 
> 赞同：0
> 
> 时间：2012-10-08T12:38:38.923
> 
> 标签：java, mongodb

我有如下的 mongo 文件

```
 "_id" : ObjectId("5072b33aa4e8dd3e359b8e94"), 
  "menus" : { 
    "5072b8dda4e8dd3e359b8ea8" :
     { 
        "_id" : ObjectId("5072b8dda4e8dd3e359b8ea8"), 
        "description" : "hfghfgh",
         "MenuItems" : 
            [   
                {   
                "name" : "dfgdfg",  
                "description" : "dgdfgd", 
                "_id" : ObjectId("5072b91ba4e8dd3e359b8eaa")
                 },     
                { 
                "name" : "fgdfgdf",     
                "description" : "gdfgg",
                 "_id" : ObjectId("5072bb92a4e8204e51de1084") 
                }
            ]
    }
} 
```

实际上我曾尝试删除**menuItems中的以下对象**

```
 { 
    "name" : "fgdfgdf",     
    "description" : "gdfgg",
    "_id" : ObjectId("5072bb92a4e8204e51de1084") 
    } 
```

我的查询如下，但它不起作用。

```
 BasicDBObject query=new BasicDBObject("_id",objectId("...");

  BasicDBObject document = new     BasicDBObject("menus.5072b8dda4e8dd3e359b8ea8.menuItems.$._id", ObjectId("5072bb92a4e8204e51de1084") );
  BasicDBObject updateOps=new BasicDBObject("$pull", document); 
```

我有**menuItems的ID“_id”：ObjectId（“5072bb92a4e8204e51de1084”），菜单ID“_id”：ObjectId（“5072b8dda4e8dd3e359b8ea8”）和顶级文档的ID“_id”：ObjectId（“5072b33aa4e8dd3e359b8e94”），**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:45:46.157

```
 BasicDBObject query=new BasicDBObject("_id",new ObjectId(".....");

BasicDBObject document = new BasicDBObject("menus.5072b8dda4e8dd3e359b8ea8.menuItems",
new  BasicDBObject("_id":ObjectId("5072bb92a4e8204e51de1084") );

BasicDBObject updateOps=new BasicDBObject("$pull", document);

 db.collection.update(query,updateOps); 
```

# wpf - 线程是使用不接受参数的 ThreadStart 委托创建的

> ID：12781922
> 
> 赞同：2
> 
> 时间：2012-10-08T12:38:43.130
> 
> 标签：wpf, vb.net, multithreading, xaml

我对 vb.net 中的 ThreadStart 委托有疑问。我正在接手一个高级程序员的项目，他比我更有经验，所以我对他想做的事情有点迷茫。我正在尝试对线程进行一些研究，但是关于这个主题有很多，并且不想浪费我的时间在与我的错误无关的东西上。我将发布整个异常消息，希望有人可以指出我可以阅读的文章的方向以了解更多信息。

```
System.InvalidOperationException was unhandled
  Message=The thread was created with a ThreadStart delegate that does not accept a parameter.
  Source=mscorlib
  StackTrace:
       at System.Threading.Thread.Start(Object parameter)
       at LabelLibrary.LabelPrinter.Print(PrintQueue queue) in C:\Documents and Settings\bjorandb\Desktop\LabelPrintingService\LabelTemplates\clsLabelPrinter.vb:line 94
       at LabelLibrary.LabelPrinter.Print() in C:\Documents and Settings\bjorandb\Desktop\LabelPrintingService\LabelTemplates\clsLabelPrinter.vb:line 53
       at PrintApplyApplication.HomeController.PrintThread.Print() in C:\Documents and Settings\bjorandb\Desktop\LabelPrintingService\PrintApplyApplication\Controllers\HomeController.vb:line 85
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.runTryCode(Object userData)
       at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

这是引发错误的函数，但我不知道它本身会有多大帮助。

```
Public Function Print(ByVal queue As PrintQueue) As PrintResult
    Dim result As PrintResult = Nothing
    Dim job As PrintSystemJobInfo = Nothing
    Dim thread As Threading.Thread = Nothing

    result = New PrintResult
    If queue Is Nothing Then
        result.Status = "Can not find printer " & queue.Name & "."
    ElseIf PrintFilePath Is Nothing Then
        result.Status = "Print File Path Cannot be nothing."
    Else
        Try
            thread = New Threading.Thread(AddressOf AddJob)
            thread.SetApartmentState(Threading.ApartmentState.STA)
            thread.Start(queue) <--- (Exception is being thrown here!!)
            result.Status &= "Print Sent Successfully"
        Catch ex As PrintJobException
            If ex.InnerException.Message = "File contains corrupted data." Then
                result.Status &= "Could not generate a label with given xps file. Check the xps file format and if it is corrupted."
            End If
            result.Status &= "There was an error printing."
            result.ErrorMessage = ex.Message
        End Try
        If queue.IsOutOfPaper Then
            result.Status &= "The printer is out of Paper."
        End If
        If queue.IsPaperJammed Then
            result.Status &= "The Printer is jammed."
        End If
        If (queue.IsOutOfMemory) Then
            result.Status &= "The Printer is out of memory."
        End If
    End If
    Return result
End Function 
```

这是 AddJob 方法

```
Private Sub AddJob()
    Dim job As PrintSystemJobInfo = Nothing

    Try
        job = LocalPrintServer.GetDefaultPrintQueue.AddJob("Text", PrintFilePath, False)
        job.Refresh()
        While Not (job.IsCompleted Or job.IsDeleted)
            job.Refresh()
        End While
    Catch ex As PrintJobException
    End Try
    If System.IO.File.Exists(PrintFilePath) Then
        System.IO.File.Delete(PrintFilePath)
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:02:50.707

如果没有代码，我只能推测您正在使用创建线程`ThreadStart`，然后调用它的重载`Start`需要一个参数。

您应该使用`ParameterizedThreadStart`或直接调用`Start`不带参数的方法。

**编辑**：就像我说的，线程启动方法调用与`AddJob`. 只需使用`Thread.Start()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:16:19.943

AddJob 方法没有正确的签名，它需要正好有 1 个对象参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T13:20:22.033

您的`AddJob`sub 不接受参数。如果你想让它接受一个参数，你需要改变它的签名来接受一个 type 的参数`Object`。当然，您将需要修改消息的正文以*使用*该参数以使其具有任何实际效果。

# php - 如何将链接值带到这么多页面？

> ID：12781926
> 
> 赞同：-1
> 
> 时间：2012-10-08T12:38:51.850
> 
> 标签：php, mysql

我有一个链接：

```
 <a href="All.php?city2=Newyork">Newyork</a> 
```

我有一个传递给该页面的值：

```
 <?= $_GET['city2']; ?> 
```

我还有其他页面，例如 All.php、Today.php、Tomorrow.php 等...

我想将此值 ('city2') 用于所有页面，例如 All.php、Today.php、Tomorrow.php 等……我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:40:36.427

存储`$_GET['city2']`in变量，然后您可以在任何页面`session`中获取 的值。`city2`

像这样的东西，

```
// start the session !
session_start();
// store session data
$_SESSION["city2"] = $_GET['city2']; 
```

现在您可以`city2`在任何页面中获取值，例如：`echo $_SESSION["city2"];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T12:52:19.890

在一个页面的会话中设置城市，例如：

```
session_start();
if(isset($_GET['city2'])){
    $_session['city2'] = $_GET['city2'];
} 
```

然后在其他页面中调用会话，例如：

```
echo $_session['city2']; 
```

# .net - 如何在 Bdc 服务中加载外部数据

> ID：12781927
> 
> 赞同：0
> 
> 时间：2012-10-08T12:38:52.420
> 
> 标签：.net, sharepoint

请帮我解决我的问题。

我想通过`BDC Service`有时将外部数据加载到Sharepoint并更新它，但我没有经验，`Sharepoint`所以我不知道该怎么做。

在 msdn 中，我发现 BDC 服务放置在此地址上`http://<\site>/_vti_bin/Bdcadminservice.svc`（我无法从我的客户端计算机打开链接）。但是有[http://msdn.microsoft.com/en-us/library/ee538665.aspx](http://msdn.microsoft.com/en-us/library/ee538665.aspx)页面，显示这个服务是供内部使用的。

我可以看到另一种方法 - 使用[托管客户端对象模型](http://msdn.microsoft.com/en-us/library/ee537247.aspx)，但我很困惑它使用了安装`Microsoft.Sharepoint.dll`附带的一些库（.. 和任何其他库） 。`Sharepoint Server`我找不到任何sdk，这很糟糕。

还有其他方法可以执行此任务吗？

或者，也许我从上面理解了错误的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:48:31.667

如果我理解正确，您应该创建 BDC 模型。在这种情况下，Sharepoint 将调用您的自定义方法（获取外部数据），您可以在 Sharepoint 外部列表中看到它。

您可以从这里开始：http: [//msdn.microsoft.com/en-us/sp2010devtrainingcourse_businessconectivityserviceslab_topic4.aspx](http://msdn.microsoft.com/en-us/sp2010devtrainingcourse_businessconectivityserviceslab_topic4.aspx)

您也可以观看此视频：http: [//msdn.microsoft.com/en-us/vstudio/ff623022.aspx](http://msdn.microsoft.com/en-us/vstudio/ff623022.aspx)

如果还不够，请告诉我，我会尽力为您提供更多详细信息。

**更新1：**如果所有这些软件都应该在客户端运行是强制性的。我可以看到两种方法（在这两种方法中，您都不需要在客户端使用额外的 SP dll）：

1.  使用我上面建议的 BDC 模型，但模型将只是客户端代码的代理，并且来自此模型的代码将调用客户端（例如使用 WebServices）。在这种情况下，当用户需要新数据（例如通过单击外部列表）时，SP 会调用 BDC 模型中的代码，从而调用客户端计算机。也就是说，获取数据的发起者是SP，顺序是：**User -> SP -> BDC model -> Client Data。**
2.  您可以在 SP 中创建自定义 WebService 以在客户需要时更新其列表。在这种情况下，您的客户端收到了新数据，并且知道必须在 SP 中更新它。在此之后，它通过您在 SP 端的自定义 WebService 进行调用，它使用 SP 对象模型将新数据添加到 SP。换句话说，更新的发起者是客户端。序列看起来很简单：**客户端数据 -> 自定义 SP WebService，它会在 SP 端更新此数据。**

在第一种情况下，您可以在 SP 端组织缓存（例如，每天不经常调用客户端一次）。

但是你要注意，当你有大量数据时，在 SP 中复制它（使用第二种方式）通常不是一个好主意，并且可能需要额外的努力来管理它（何时更新，哪些数据已经更新，如果部分数据被更新，而其他数据没有及时更新，用户获取数据时会得到不一致的数据等等）。

# python - 如何在 Windows 7 上升级我的 Python 版本而无需重新安装所有软件包？

> ID：12781929
> 
> 赞同：2
> 
> 时间：2012-10-08T12:38:54.480
> 
> 标签：python, windows, upgrade

在我的 Windows 7 x64 系统上升级我现有的 Python 安装（在我的情况下从版本 3.2.2 到 3.3.0）有哪些可能性，而不必重新安装我的所有包？有没有方便/自动化的解决方案来做到这一点？我希望我的系统上只有一个 Python 版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T12:57:38.503

问题主要在于用 C 编写的包：它们将与 3.2 Python 代码链接。这可能只是重新链接它们的问题，但我遇到了流行的软件包问题，比如`numpy`（我目前无法在 3.3 上编译）。

理论上，纯 Python 包可能还可以，但老实说，值得冒险吗？

每次加载 3.3 版本的包会更安全。坚持使用 3.2，直到您可以升级所有内容。您可以在 Windows 上加载多个版本的 Python，我有 2.6、2.7、3.2 和 3.3 并存。您只需要小心 %PATH%、assoc 和 ftype。

# windows-phone-7 - 在 windows phone 7 中的列表框上实现本机搜索功能

> ID：12781936
> 
> 赞同：0
> 
> 时间：2012-10-08T12:39:08.217
> 
> 标签：windows-phone-7, search, listbox

我目前有一个被填充的列表框，并且想知道如何轻松地合并在“人”应用程序中看到的本机 Windows 搜索功能。

有[一篇较旧的帖子](https://stackoverflow.com/questions/8373294/implement-search-like-the-people-search)处理相同的问题，但似乎已接受答案指向的示例不再存在。

我想在 clickHandler 上弹出搜索功能.. 自然。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:30:28.697

恐怕在这种情况下你必须实现一些自定义的东西。

如果您只想按第一个字母过滤项目，那么您可以使用 LongListSelector，如下所述[http://www.windowsphonegeek.com/articles/LongListSelector-walkthrough](http://www.windowsphonegeek.com/articles/LongListSelector-walkthrough)

如果您想要一个基于文本框的搜索过滤器，那么您必须对文本框中的每个 TextChanged 事件执行搜索命令（搜索条件的输入区域）。搜索命令将遍历项目并过滤与输入条件相对应的项目。

# iphone - ios 6：使用自动布局约束垂直居中 UILabel

> ID：12781937
> 
> 赞同：5
> 
> 时间：2012-10-08T12:39:10.027
> 
> 标签：iphone, ios, ios6, centering, autolayout

我有一个`UILabel`我有时想在一个单元格中垂直居中。这必须以编程方式完成。我尝试添加以下约束以使其居中（locName 是 UILabel）：

```
[cell addConstraint:[NSLayoutConstraint constraintWithItem:cell
attribute:NSLayoutAttributeCenterY relatedBy:0 toItem:cell.locName 
attribute:NSLayoutAttributeCenterY multiplier:1 constant:0]]; 
```

这是我得到的结果：

![在此处输入图像描述](../Images/6f85d88f0ecbc8cac7280fc3fb206831.png)

它看起来像它的居中，但也许改变了或什么的高度`UILabel`？

这是 IB 中的视图控制器：

![在此处输入图像描述](../Images/51dbe8d274223ca3c45c38e38fd60fd4.png)

如何以编程方式实现垂直居中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T16:15:22.073

怎么样：除了居中约束之外，为 cell.locName 添加一个高度约束以使其更高。

```
[cell.contentView addConstraint:
    [NSLayoutConstraint constraintWithItem:cell.locName
                                 attribute:NSLayoutAttributeHeight
                                 relatedBy:NSLayoutRelationGreaterThanOrEqual
                                    toItem:nil
                                 attribute:NSLayoutAttributeNotAnAttribute
                                multiplier:1
                                  constant:20]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T08:56:29.330

您可能遇到了单元格中已经存在的其他约束。添加约束不会使其他约束消失 - 例如，如果您在顶部和底部标签之间有间距，为了满足这个和新的居中约束，顶部标签的高度将不得不缩小。

您可能需要为这些其他约束创建出口并删除它们以实现居中设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:44:32.387

尝试在居中后达到 UIlabel 高度？？？

或者您可以以编程方式在您的自定义单元格中重新分配标签位置。

# security - Erlang SASL AUTH PROTOCOL 实现

> ID：12781942
> 
> 赞同：0
> 
> 时间：2012-10-08T12:39:30.033
> 
> 标签：security, authentication, erlang, couchdb, sasl

许多系统开始使用这个[SASLAuthProtocol](http://en.wikipedia.org/wiki/Simple_Authentication_and_Security_Layer)（参见[RFC4422](https://www.rfc-editor.org/rfc/rfc4422)）在 RESTFUL 交互中对客户端进行身份验证。例如：Couchbase Server 2.0、Memcached 等 我想知道这个身份验证协议是否有一个完整的 erlang 实现。[Java 实现](http://docs.oracle.com/javase/6/docs/technotes/guides/security/sasl/sasl-refguide.html)是我正在寻找的一个很好的例子。这个[Python 代码](https://github.com/membase/ep-engine/blob/master/management/mc_bin_client.py)似乎是这个协议的 Python 实现。是否有我可以快速使用的 Erlang 库在我的应用程序中支持 SASLAuth？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T14:08:20.067

我没有尝试过，但它看起来像是为 Erlang 实现了 SASL：

[https://github.com/mikma/esasl](https://github.com/mikma/esasl)

在搜索这种东西时，请注意避免 Erlang 中的 SASL，即 System Architecture Support Libraries——“这些不是您要查找的 SASL”...

# c - pthread_mutex_lock 返回无效参数

> ID：12781944
> 
> 赞同：6
> 
> 时间：2012-10-08T12:39:33.707
> 
> 标签：c, debugging, pthreads, mutex

我正在处理一些 C 代码并且在锁定互斥锁时遇到问题。该代码调用了一个函数，并且该函数锁定了一个互斥锁以确保文件指针不会被覆盖，这对于几个实例都可以正常工作，可能大约 10-20 次单独调用被调用的函数，但在下一次调用, pthread_mutex_lock 将返回 22 的结果。然后我将此结果放入 strerror(); 并得到无效的论点。

无效参数是什么意思，感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T13:02:45.653

22 是`ENVAL`错误代码，表示参数无效。确保你已经初始化了你的互斥锁，或者如果在某个时候你已经在某个地方单元化了它。

[man pthread_mutex_lock](http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_mutex_lock.html)还说：

> **EINVAL**
> 
> 互斥体是使用值为 PTHREAD_PRIO_PROTECT 的协议属性创建的，并且调用线程的优先级高于互斥体的当前优先级上限。

我不太明白这一点，但这可能意味着您需要更改线程的优先级。我不确定。也许其他人可以照亮它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T12:43:05.407

听起来您*在程序的其他地方*遇到了线程问题或存在问题。尝试打印互斥指针的值。尝试让另一个线程简单地锁定互斥体，然后将时间和锁定成功打印到日志文件，然后解锁互斥体。我怀疑问题不在于您正在寻找的地方。

此外，正如其他人在这里所说，最好的办法是创建一个非常小的测试程序来演示问题并将其发布在这里。您可能无法让那个小程序来演示错误。然后慢慢将你所有的原始代码添加到小程序中，直到错误返回。如果它返回，您现在知道导致问题的原因。如果它没有返回，你就完成了。

# c# - 如何从'System.Linq.IQueryable 转换 列出

> ID：12781949
> 
> 赞同：2
> 
> 时间：2012-10-08T12:39:54.127
> 
> 标签：c#, ef-code-first, entity-framework-5

如何检索模型中的列表？

这就是我正在尝试的：

```
private void cbxPlayers_SelectedValueChanged(object sender, EventArgs e)
        {
            List<Record> records = new List<Record>();
            string selectedPlayer = cbxPlayers.SelectedItem.ToString();
            using (ProgressRecordContext context = new ProgressRecordContext())
            {
                records = (from Player in context.Players
                          where Player.Name == selectedPlayer
                          select Player.Records).ToList<Record>();
            }
        } 
```

但是，这不起作用，我错过了什么？

这些是需要时的模型：

```
public class Player
    {
        [Key][DatabaseGenerated(DatabaseGeneratedOption.None)]
        public int AccountNumberId { get; set; }

        public string Name { get; set; }

        public virtual List<Record> Records { get; set; }
    }

public class Record
    {
        public int RecordId { get; set; }
        public int AccountNumberId { get; set; }

        public double Level { get; set; }
        public int Economy { get; set; }
        public int Fleet { get; set; }
        public int Technology { get; set; }
        public int Experience { get; set; }

        public DateTime TimeStamp { get; set; }

        public virtual Player Player { get; set; }
    } 
```

编辑：这是错误消息：

错误 1“System.Linq.IQueryable>”不包含“ToList”的定义，并且最佳扩展方法重载“System.Linq.ParallelEnumerable.ToList(System.Linq.ParallelQuery)”有一些无效参数

错误 2 实例参数：无法从“System.Linq.IQueryable>”转换为“System.Linq.ParallelQuery”

编辑：

我看到我可能不太清楚我想要做什么。我最终想出了一种方法来做我想做的事，这就是：

```
private void cbxPlayers_SelectedValueChanged(object sender, EventArgs e)
        {
            lstvRecords.Items.Clear();
            if(cbxPlayers.SelectedIndex == -1)
            {
                return;
            }
            string selectedPlayer = cbxPlayers.SelectedItem.ToString();
            using (ProgressRecordContext context = new ProgressRecordContext())
            {
                var records = from Player in context.Players
                          from Record in context.Records
                          where Player.Name == selectedPlayer &&
                          Player.AccountNumberId == Record.AccountNumberId
                          select new
                          {
                              Level = Record.Level,
                              Economy = Record.Economy,
                              Fleet = Record.Fleet,
                              Technology = Record.Technology,
                              Experience = Record.Experience,
                              TimeStamp = Record.TimeStamp
                          };

                foreach (var element in records)
                {
                    string[] elements = {element.Level.ToString(),
                                            element.Economy.ToString(),
                                            element.Fleet.ToString(),
                                            element.Technology.ToString(),
                                            element.Experience.ToString(),
                                            element.TimeStamp.ToString()
                                        };
                    ListViewItem lvi = new ListViewItem(elements);
                    lstvRecords.Items.Add(lvi);
                }
            }
        } 
```

有没有更好的方法来编写该查询，或者我这样做的方式是否正确？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T12:43:10.290

不知道你为什么会得到`ParallelQuery`- 除非你的源文件中有一些古怪`using`的 s 。

在任何情况下，您似乎都有一个可枚举的枚举 - 尝试`SelectMany`（请注意，您也需要`using System.Linq;`将此作为扩展方法）：

```
records = (from Player in context.Players 
           where Player.Name == selectedPlayer 
           select Player.Records).SelectMany(r => r).ToList(); 
```

另外-除非您打算在该列表中添加/删除，否则您应该只使用一个数组，即使用`.ToArray()`.

正如@Tim S (+1) 所指出的那样-如果您希望这里只有一个玩家，那么您应该使用`SingleOrDefault()`该玩家来获取单个玩家-`Records`然后您将其变成一个数组/列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T13:18:57.453

您的问题是`Player.Records`a `List<Record>`，并且您`IEnumerable<List<Record>>`从查询中得到一个（即 0 到许多玩家的记录），所以`.ToList()`得到一个`List<List<Record>>`. 如果有多个同名玩家并且您希望它收集所有玩家的记录，请使用 Andras Zoltan 的解决方案。如果您想确保（通过在有 0 个或多于 1 个结果时抛出异常）只有一个玩家具有给定名称，并且只返回他的记录，请使用以下解决方案之一：（key change being [`.Single()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.single.aspx)- also take a看看[`SingleOrDefault`](http://msdn.microsoft.com/en-us/library/bb494540.aspx)它是否更适合您的需求）

```
//I prefer this solution for its conciseness and clarity.
records = context.Players.Single(Player => Player.Name == selectedPlayer).Records;

//if you'd like to use the LINQ query format, I'd recommend this.
records = (from Player in context.Players
          where Player.Name == selectedPlayer
          select Player).Single().Records;

//this is more similar to your original query.
records = (from Player in context.Players
          where Player.Name == selectedPlayer
          select Player.Records).Single().ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:45:05.407

如果你改变

```
 List<Record> records = new List<Record>(); 
```

至

```
 var records = new List<List<Record>>(); 
```

它有效吗？如果播放器有一个记录列表，看起来您的查询正在返回一个记录列表列表。

编辑：在那里，修复了返回列表......无论哪种方式，这可能都不是您正在寻找的解决方案，只是突出问题所在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T14:37:35.677

您可以尝试重构您的查询

```
records = context.Players.First(player => player.Name == selectedPlayer).Records.ToList(); 
```

# jdbc - 如何修复滚动敏感结果集更新期间引发的错误？

> ID：12781951
> 
> 赞同：2
> 
> 时间：2012-10-08T12:39:56.287
> 
> 标签：jdbc

我正在尝试更新 ResultSet 中的一行，但它抛出了一个错误。我将常量值传递`ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE`给 createStatement。

这是我的代码：

```
public void modifyPrice(float percentage) throws SQLException {
    try {
        con = util.connectdb();
        con.setAutoCommit(false);
        st = con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,
                ResultSet.CONCUR_UPDATABLE);
        ResultSet rs = st.executeQuery("select * from " + util.dbName
                + ".COFFEES");
        while (rs.next()) {
            float f = rs.getFloat("PRICE");
            rs.updateFloat("PRICE", f * percentage);
            rs.updateRow();
        }
    } catch (SQLException e) {
        e.printStackTrace();
    } catch (ClassNotFoundException e) {

        e.printStackTrace();
    } finally {
        if (st != null) {
            st.close();
            con.close();
        }
    }

} 
```

当我执行这个代码块时，下面的堆栈被打印在控制台上。

```
java.sql.SQLException: Invalid operation for read only resultset: updateFloat
at oracle.jdbc.driver.SQLStateMapping.newSQLException(SQLStateMapping.java:70)
at oracle.jdbc.driver.DatabaseError.newSQLException(DatabaseError.java:131)
at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:197)
at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:261)
at oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:269)
at oracle.jdbc.driver.BaseResultSet.updateFloat(BaseResultSet.java:236)
at oracle.jdbc.driver.OracleResultSet.updateFloat(OracleResultSet.java:677)
at tutorial.ModifyResultSet.modifyPrice(ModifyResultSet.java:29)
at tutorial.ModifyResultSet.main(ModifyResultSet.java:15) 
```

谁能帮我解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:35:58.537

根据这些链接 [http://www.coderanch.com/t/301466/JDBC/databases/Invalid-operation-read-only-resultset](http://www.coderanch.com/t/301466/JDBC/databases/Invalid-operation-read-only-resultset) [http://www.coderanch.com/t/295932/JDBC/databases/updateXXX -function-ResultSet](http://www.coderanch.com/t/295932/JDBC/databases/updateXXX-function-ResultSet)

而不是“select * from”，您应该使用“select my_column_name from”语句。看看有没有什么区别。

# c - 在c中处理输入文件

> ID：12781954
> 
> 赞同：-2
> 
> 时间：2012-10-08T12:40:08.237
> 
> 标签：c, file, parsing, input

所以我只是想知道一些关于进行调度程序模拟的技巧。

到目前为止，我只想在命令行输入一个文件，即 /.scheduler in.file

in.file 包含以下信息：

```
./Job1.txt
./Job2.txt
./Job3.txt
./Job4.txt 
```

每个 Job .txt 文件都有随机的代码行。只有第一行很重要。第一行是开始“滴答”时间。

工作一：

```
10
1fi
3sdkfj
4ksdkk
5kdkfk
6kdkjf
7dkjkfd
9dkkf
10dku 
```

目前我只想获取 in.file 并按照到达时间的顺序排列“作业”文件，即第一行。

到目前为止我的代码：

```
#include <errno.h>
#include <limits.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>

#include "projscheduler.h"

/* I/O Files */
//static char *inputFile;
char * in;
static FILE *input;

/*Scheduled jobs indexed by PID*/
struct job list[20];

/* the next job to schedule */
//static struct job *job_next = NULL;

/* Time */
time clock;

/*Initialises job list*/
static void initialise_list(void) {
    for(int i = 0; i < sizeof(list)/sizeof(list[0]); i++) {
        list[i].parameters.pid = -1;
    }
}

/** Read and parse input from input file */
static void parse_input(void) 
{
    char    buffer[BUFSIZ];
    //int   jobs;

    initialise_list();

    while( fgets(buffer, sizeof(buffer), input) )   
    {
        pid j_pid;
        sscanf(buffer, "./%d.txt", &j_pid);

    } 

}   

int main(int argc, char **argv) 
{

    if ( (input = fopen(in, "r")) == NULL ) {
        fprintf(stderr, "cannot open %s\n", argv[1]);
    }

    parse_input(); 

    return EXIT_SUCCESS;
} 
```

头文件：

```
/**
 * Simulation of a process scheduler
*/

//#ifndef SCHEDULER_H_
#define SCHEDULER_H_

#include <stddef.h>

/* types */
/** units of time */
typedef long time;
/** process identifier */
typedef int pid;

/** Information about a job of interest to the task scheduler */
struct job_data {

/* pid of this process */
    pid pid;
    /* time process starts */
    time start;
    /* time needed to finish */
    time finish;
    /* time spent processing so far */
    time scheduled;
    /* size of the process */
    size_t size;

};

struct job {

    /* Various parameters used by the scheduler */
    char job_name[BUFSIZ];
    struct job_data parameters;
    /* next job to be scheduled */
    //struct job *next;

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T12:47:35.623

我不确定您到底遇到了什么问题，但我可以在代码中看到以下错误：

*   在`initialise_list()`函数中，`for`循环将迭代太多次并超出数组的范围：

    ```
    for(int i = 0; i < sizeof(list); i++) { 
    ```

as`sizeof(list)`将返回数组占用的字节数`20 * sizeof(struct job)`。改成：

```
 for(int i = 0; i < sizeof(list) / sizeof(list[0]); i++) { 
```

*   这是`fopen()`尝试中缺少的左括号（意味着发布的代码无法编译）：

    ```
    if( (input = fopen(inputfile, "r") == NULL ) 
    ```

应该：

```
 if( (input = fopen(inputfile, "r")) == NULL ) 
```

*   `proj`是一个初始化的`char*`，这很可能会导致分段错误：

    ```
    char *proj;
    sscanf(buffer, "./%s.txt", proj); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T15:12:03.607

```
#include <errno.h>
#include <limits.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <ctype.h>

#include "projscheduler.h"

/* I/O Files */
//static char *inputFile;
char * in;
static FILE *input;
static FILE *cur;
/*Scheduled jobs indexed by PID*/
struct job list[20];

/* the next job to schedule */
//static struct job *job_next = NULL;

/* Time */
time clock;

/*Initialises job list*/
static void initialise_list(void) {
    for(int i = 0; i < sizeof(list)/sizeof(list[0]); i++) {
        list[i].parameters.pid = -1;
    }
}

/*Order Jobs*/
/*=static void order_jobs(void)
{
    for(int i=0; i < sizeof(list)/sizeof(list[0]); i++)
    {

}
*/

/** Read and parse input from input file */
static void parse_input(void) 
{
    char    buffer[BUFSIZ];
    char    lines[BUFSIZ];
    int jobs = 0;
    struct  job *current;

    initialise_list();

    while( fgets(buffer, sizeof(buffer), input) )   
    {

        time start;
        char  buf[20];
        sscanf(buffer,"./%s/", buf);
        cur = fopen(buf, "r" );

        fgets(lines, sizeof(lines), cur);
        sscanf(lines,"%ld", &start);

        current = &list[jobs];

        current->job_id = buf;
        current->parameters.start = start;

        jobs++;

    } 

    for (int i = 0; i < jobs; i++)
    {
        printf("%s starts at %ld\n", list[i].job_id, list[i].parameters.start);
    }   

}   

int main(int argc, char **argv) 
{
    in = argv[1];
    if ( (input = fopen(in, "r")) == NULL ) {
        fprintf(stderr, "cannot open %s\n", argv[1]);
    }

    parse_input();

    return EXIT_SUCCESS;
} 
```

上面，我成功读取了 in.file 并从每个代表文本文件的地址中提取了第一行。

上面的代码与以下标头相关联：

```
/**
 * Simulation of a process scheduler
*/

//#ifndef SCHEDULER_H_
#define SCHEDULER_H_

#include <stddef.h>

/* types */
/** units of time */
typedef long time;
/** process identifier */
typedef int pid;

/** Information about a job of interest to the task scheduler */
struct job_data {

/* pid of this process */
    pid pid;
    /* time process starts */
    time start;
    /* time needed to finish */
    time finish;
    /* time spent processing so far */
    time scheduled;
    /* size of the process */
    size_t size;

};

struct job {

    /* Various parameters used by the scheduler */
    char * job_id;
    struct job_data parameters;
    /* next job to be scheduled */
    //struct job *next;

}; 
```

# pyrocms - pyrocms 文件插件变量

> ID：12781961
> 
> 赞同：2
> 
> 时间：2012-10-08T12:40:23.393
> 
> 标签：pyrocms

我想将一个 url 段变量拉入 pyrocms 文件插件调用中。它看起来像

> {{files:listing folder="[segment(2)]"}}

或类似的东西。嵌入的技巧是什么

```
{{url:segments..}} 
```

里面

```
{{files:listing folder="…}} 
```

我正在尝试将此设置为照片库的条件查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T15:06:45.557

如果您查看[PyroCMS 标签](http://docs.pyrocms.com/2.1/manual/concepts/pyrocms-tags)文档，您将在“标签属性”部分中清楚地看到这一点。

> 您也可以将其他标签的输出用作标签中的属性值。例如，如果您希望 url 段默认为当前查看页面的 slug，您可以这样做：
> 
> {{ url:segments segment="1" default=page:slug }}
> 
> 这是一个示例，显示了当用作属性值的标记本身具有属性时正确使用引号和大括号。
> 
> {{ url:segments segment="1" default={foo:bar value="baz"} }}
> 
> 提示：使用标签作为属性值时，请省略引号和大括号。唯一的例外是当您用作属性值的标记具有自己的属性时。

因此，您可以通过以下方式轻松做到这一点：

```
{{ files:listing folder={url:segments segment="2"} }} 
```

基本上你不需要假装它不是一个字符串。您可以只发送 foo:bar 参数，但如果它具有属性，您可以通过单个 { 和 } 将属性与调用“分组”。

简单吧？:)

# c# - 动态启用 WCF 日志记录

> ID：12781968
> 
> 赞同：3
> 
> 时间：2012-10-08T12:40:35.930
> 
> 标签：c#, xml, wcf

有没有办法通过修改和重新加载 app.config 来动态启用/禁用 wcf 日志记录？我希望能够在我的应用程序中切换它以促进场景设计（以及相关消息的记录），以便稍后在负载测试中使用它们。

我之前读过，如果修改了 web.config，IIS 必须重新加载应用程序池，但我的项目没有，wcf 层已完全编码，并且在 app.config 中启用了 WCF 日志记录，使用可用的标准片段在 MSDN 上：

```
<system.diagnostics >
 <sources>
   <source
       name="System.ServiceModel.MessageLogging"
       switchValue="Information, ActivityTracing" >
     <listeners>
       <add name="yourTrace"
            type="System.Diagnostics.XmlWriterTraceListener"
            initializeData="C:\Users\rfr\Desktop\Logs\YourMessageLog.svclog">
         <filter type="" />
       </add>
     </listeners>
   </source>
</sources>
<trace autoflush="true" />
</system.diagnostics>
<system.serviceModel>
 <diagnostics>
   <messageLogging
         logMessagesAtTransportLevel="false"
         logMessagesAtServiceLevel="true"
         logMalformedMessages="true"
         logEntireMessage="true"
         maxSizeOfMessageToLog="65535000" maxMessagesToLog="5000" />
 </diagnostics>
</system.serviceModel> 
```

我猜将诊断键更改为 false 会关闭日志记录。这里的任何人都知道如何正确地做到这一点？

# java - Java序列化：每个文件一个对象

> ID：12781971
> 
> 赞同：0
> 
> 时间：2012-10-08T12:40:39.033
> 
> 标签：java, serialization

对于这个特定的项目，我需要将我的实体层（由 POJO 制成）序列化为文件。由于我需要更新特定对象，我想每个序列化对象使用一个文件。

示例：客户 --ArrayList-> 订单 --ArrayList-> 产品

当我编辑一个客户，然后使用 java.io.Serializable 接口对其进行序列化时，所有字段及其字段（**如有错误请纠正我**）进行序列化。

我将如何以每个文件只使用一个对象的方式应用序列化？我已经给每个对象一个唯一的 UUID，它在序列化时用作文件名。

如果有任何框架可以执行基于文件的 ORM，那就更好了；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T12:47:12.277

您始终可以使用`readObject`和读取和写入可序列化对象`writeObject`。以下是示例代码：

```
import java.io.*;
import java.util.*;
import java.util.logging.*;

public class ExerciseSerializable {

  public static void main(String... aArguments) {
    //create a Serializable List
    List<String> quarks = Arrays.asList(
      "up", "down", "strange", "charm", "top", "bottom"
    );

    //serialize the List
    //note the use of abstract base class references

    try{
      //use buffering
      OutputStream file = new FileOutputStream( "quarks.ser" );
      OutputStream buffer = new BufferedOutputStream( file );
      ObjectOutput output = new ObjectOutputStream( buffer );
      try{
        output.writeObject(quarks);
      }
      finally{
        output.close();
      }
    }  
    catch(IOException ex){
      fLogger.log(Level.SEVERE, "Cannot perform output.", ex);
    }

    //deserialize the quarks.ser file
    //note the use of abstract base class references

    try{
      //use buffering
      InputStream file = new FileInputStream( "quarks.ser" );
      InputStream buffer = new BufferedInputStream( file );
      ObjectInput input = new ObjectInputStream ( buffer );
      try{
        //deserialize the List
        List<String> recoveredQuarks = (List<String>)input.readObject();
        //display its data
        for(String quark: recoveredQuarks){
          System.out.println("Recovered Quark: " + quark);
        }
      }
      finally{
        input.close();
      }
    }
    catch(ClassNotFoundException ex){
      fLogger.log(Level.SEVERE, "Cannot perform input. Class not found.", ex);
    }
    catch(IOException ex){
      fLogger.log(Level.SEVERE, "Cannot perform input.", ex);
    }
  }

  // PRIVATE //

  //Use Java's logging facilities to record exceptions.
  //The behavior of the logger can be configured through a
  //text file, or programmatically through the logging API.
  private static final Logger fLogger =
    Logger.getLogger(ExerciseSerializable.class.getPackage().getName())
  ;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T13:05:54.933

我不熟悉这样的框架。
您可以做的是使用其他框架，例如 apache [BeanUtils](http://commons.apache.org/beanutils/)来执行以下递归算法：
A. 对于每个对象获取其属性（假设对象是 Java bean）。
B. 对于每个原始字段，将所有原始字段写入文件（您可以使用反射来确定字段是否为原始字段）。
C. 对于每个非原始文件，在文件中写入一个特殊部分，指向将包含作为字段值的对象的文件名。
D. 递归调用每个非原始字段的算法。

可以对集合执行类似的方法 -
HashMap、ArrayList 等。

原始元素的序列化代码可以是@Anshu提供的代码

# iphone - 在 Xcode 4 中排除文件夹引用下的特定文件

> ID：12781972
> 
> 赞同：4
> 
> 时间：2012-10-08T12:40:48.917
> 
> 标签：iphone, xcode4, resources, hierarchy, app-bundle

[根据这个问题](https://stackoverflow.com/questions/1401338/include-a-resource-directory-hierarchy-into-app-bundle)，我添加了一个资源目录作为对应用程序包的文件夹引用。我想排除一些基础文件，因为我的应用程序中不需要它们。

根文件夹下的每个文件都禁用“删除”上下文菜单项。如果我使用“创建组”添加文件，它们将被添加平面，没有任何层次结构。

是否可以删除文件夹引用下的特定文件？有没有另一种方法来添加文件并保持层次结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T12:54:50.403

顾名思义，它是对文件夹的引用，而不是对文件的引用。该文件夹包含在您的捆绑包中。如果您不想要捆绑包中的某些文件，则必须将它们从文件夹中删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T20:46:28.497

您可以创建指向该文件夹的符号链接，添加指向该链接的组，然后删除对组中任何不需要的文件的引用。

# python - 在程序空闲给定时间后调用函数

> ID：12781979
> 
> 赞同：1
> 
> 时间：2012-10-08T12:41:08.707
> 
> 标签：python, events, tkinter

我的基于 Tkinter 的程序需要定期执行一些“繁重”的维护功能。由于它是一个连续运行的程序，我想在给定的空闲时间后才启动这些功能。

你如何在 Tkinter 中做到这一点？[我在http://etutorials.org/Programming/Python+tutorial/Part+III+Python+Library+and+Extension+Modules/Chapter+16.+Tkinter+GUIs/16.9+Tkinter+Events/](http://etutorials.org/Programming/Python+tutorial/Part+III+Python+Library+and+Extension+Modules/Chapter+16.+Tkinter+GUIs/16.9+Tkinter+Events/)中找到了关于 after_idle 的信息，但是只有*在事件循环空闲时*才会调用它。我需要它来运行我的功能，比如说，在 10 分钟的空闲时间之后。

~~~

Mr.Steak 给出了我需要的答案——我只是稍微修改了一下，以便能够使用*idletime*变量以不同的时间间隔执行不同的任务：

```
import time
from Tkinter import *

root = Tk()

def resetidle(*ignore): 
    global idletime
    for k in idletime: k['tlast']=None

def tick(*ignore):
    global idletime 
    t=time.time()   # the time in seconds since the epoch as a floating point number
    for k in idletime:
        if not k['tlast']:
            k['tlast'] = t
        else:
            if t-k['tlast']>k['tmax']:
                k['proc']()
                k['tlast'] = None
    root.after(5000, tick)   # reset the checks every 5''

idletime=[{'tlast':None,'tmax':60,'proc':test1},               # every 1'
      {'tlast':None,'tmax':3600,'proc':test2}]    # every 1h
root.after(5000, tick)
root.bind('<Key>', reset)
root.bind('<Button-1>', reset)
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T13:04:34.847

在以下示例中，该`tick`函数每秒调用一次。5 秒后，将打印一条消息，除非按下键或鼠标按钮 1。

```
import time
from Tkinter import *

root = Tk()
running = None

def reset(*ignore): 
    global running
    running = None

def tick(*ignore):
    global running
    if not running:
        running = time.time()
    elif time.time() - running > 5:
        print 'I waited 5 seconds...'
        running = None
    root.after(1000, tick)   

root.after(1000, tick)    
root.bind('<Key>', reset)
root.bind('<Button-1>', reset)
root.mainloop() 
```

# java - 在不刷新项目的情况下渲染新图像并重新启动tomcat

> ID：12781981
> 
> 赞同：0
> 
> 时间：2012-10-08T12:41:12.287
> 
> 标签：java, tomcat, tomcat6

> **可能重复：**
> [Tomcat 不返回图像资源](https://stackoverflow.com/questions/12770989/tomcat-doesnt-return-image-resources)

我有这个 java 代码，它在 /images 目录中存储一个新图像

```
BufferedImage new_image = ImageIO.read(image);

File outputfile = new File("/prova/WebContent/images/image.png");
ImageIO.write(new_image, "png", outputfile);

out.println("<body>" +
            "<img src=\"/prova/images/image.png\">" +
            "</body>"); 
```

但我有一个问题。之后，我需要在生成的 JSP 中显示我的图像。但它不会返回我的图像。只有当我在 Eclipse 中刷新我的项目时，它才会给我图像。

任何想法自动解决？

# sql - SQL Server 2008 时的情况

> ID：12781988
> 
> 赞同：0
> 
> 时间：2012-10-08T12:41:33.183
> 
> 标签：sql, sql-server-2008, case

我有一个没有关系的表。当字段countyName 是零长度字符串时，我需要`Statewide`在结果集中。否则，我需要该字段的值保持原样，例如：![在此处输入图像描述](../Images/a12b916d47b93c9f754aad64d2fa4c76.png)注意第二列中如何存在“Statewide”和“countyName”。CountyName 应该是实际存储在数据库中的原始值。

```
`countyName`  `address`
               blah blah
Jackson        blah blah 
```

需要（两个示例的第一行都是列名）

```
countyName     address
Statewide      blah blah
Jackson        blah blah 
```

这是我尝试过的，您可以忽略此示例中的其余字段

```
select case servicetype
       when 'cr' then 'Community Resource'
       when 'ed' then 'Education'
       when 'fb' then 'Faith-based'
       when 'me' then 'Medical Equipment'
       when 'hc' then 'Health Care'
       else 'Other' 
       end as serviceType

       ,case countyName
       when '' then 'Statewide'
       else 'countyname' end

       ,name
       ,physicaladdress
       ,city
       ,statelocation
       ,zip
       ,phone
       ,website
       from main

      order by countyName, servicetype, name 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T12:45:34.297

尽管没有确切说明您期望的结果，但我的**猜测**是您不想返回“县名”的文字。你想要的是列中的值。

所以尝试用...替换当前的case语句

```
,case countyName
when '' then 'Statewide'
else countyName end 
```

作为额外的安全网，您还可以`NULL`使用`ISNULL`...检查值

```
,case ISNULL(countyName,'')
when '' then 'Statewide'
else countyName end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:46:29.937

试试这个：

```
case when isnull(countyName,'') = '' then 'Statewide' else countyname end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T12:45:02.510

我猜您正在寻找“IFNULL”功能。

只需以这种方式使用它：`SELECT ...,ISNULL( column, "fallback value" ),...`在您的情况下

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T12:53:06.327

试试这个... IsNULL 应该检查。

`case ISNULL(countyName,'') when '' then 'Statewide' else 'countyname' end`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-16T05:40:07.957

```
SELECT   ProductNumber, Category =
      CASE ProductLine
         WHEN 'R' THEN 'Road'
         WHEN 'M' THEN 'Mountain'
         WHEN 'T' THEN 'Touring'
         WHEN 'S' THEN 'Other sale items'
         ELSE 'Not for sale'
      END,
   Name
FROM Production.Product
ORDER BY ProductNumber; 
```

去

# hadoop - php脚本可以用来写hadoop pig的UDF吗？

> ID：12781990
> 
> 赞同：0
> 
> 时间：2012-10-08T12:41:53.027
> 
> 标签：hadoop, apache-pig

php脚本可以用来写hadoop pig的udf吗？Hadoop pig 支持 python 和 javascript 到 UDF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T08:05:15.517

UDF 不能在 PHP 中，但`stream x through y`如果有帮助，您可以使用 pig 的构造通过任何类型的程序流式传输数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T12:57:47.760

自 0.10.0 起，唯一受支持的语言是 Java、Python、Ruby 和 JavaScript。似乎经常添加新语言（JavaScript 和 Ruby），但我怀疑 PHP 是否会被考虑。

[http://pig.apache.org/docs/r0.10.0/udf.html](http://pig.apache.org/docs/r0.10.0/udf.html)

# jquery - iframe 中的 jquery.post 结果

> ID：12781993
> 
> 赞同：0
> 
> 时间：2012-10-08T12:41:58.260
> 
> 标签：jquery, post, iframe

我有一个 iframe

```
<iframe class="browser" scrolling="no" name="navigation"></iframe> 
```

当一个特定的事件被触发时，一个 POST 请求被发送到一个 servlet

```
$.post("LoggerServlet", { sharedSessionId: $('#sharedSessionId').val(), level: $('#level').val(), goTo: this.href} ); 
```

是否可以将 POST 响应定位到 iframe？

PS我认为可以使用一种解决方法，比如创建一个隐藏表单，动态填充它并使用 submit() 方法，但如果可能的话，我更喜欢“jQuery-native”解决方案。

聚苯乙烯

我也尝试过这样的事情

```
$.post("LoggerServlet", { 
sharedSessionId: $('#sharedSessionId').val(), level: $('#level').val(), goTo: this.href
}).success(function(data) { alert(data); }); 
```

和

```
$.post("LoggerServlet", { 
sharedSessionId: $('#sharedSessionId').val(), level: $('#level').val(), goTo: this.href}, 
function(data) { alert(data); }); 
```

和

```
$.post("LoggerServlet", { 
sharedSessionId: $('#sharedSessionId').val(), level: $('#level').val(), goTo: this.href
}).success(function(data) {
    var iframe = $(".browser")[0].contentWindow.document;
    iframe.open();
    iframe.empty(); //just to see if the callback is called
    iframe.close();
    });
}); 
```

结果是一样的：没有:(

我有个疑问：

对发布消息的响应（由萤火虫查看）是一个 html 页面

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>[...]</body></html> 
```

我们确定 function(data) 中的 data 参数会得到这种响应，而不仅仅是类似 Json 的响应吗？

有什么建议吗？谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:11:23.063

您可以在传递变量时使用 .load 在 iF​​rame 中打开目标文件。

注意：在 iFrame 上使用 .load 会导致函数触发两次；通过从 iFrame 本身调用函数来修复。- 看到[jQuery iframe load() 事件？](https://stackoverflow.com/questions/5788499/jquery-iframe-load-event)

# python - PyPdf合并错误

> ID：12781994
> 
> 赞同：1
> 
> 时间：2012-10-08T12:41:58.593
> 
> 标签：python, pypdf

当我使用 PyPdf 将几个 Pdf 页面合并为一个页面`mergeTranslatedPage`时，我得到了一些未知字符，这些未知方块是最后一个合并页面中未包含的字符，经过一些研究，我认为该方法`_merge_ressources`效果不佳，因为后者页面可能会覆盖旧页面的资源，我`page1.compressContentStreams()`在每次合并后都尝试过，但没有结果。

在[此链接](https://docs.google.com/folder/d/0BwyGQjPp56zjRzIzTG5oZGdRbUE/edit)中，您将看到已合并的 PDF 示例和 PDF 结果。

请提供任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T20:06:35.007

以下解决方案使用[pdfjam](http://www2.warwick.ac.uk/fac/sci/statistics/staff/academic-research/firth/software/pdfjam/)命令将多个 pdf 页面合并为一个 pdf 页面。这是一个非常强大的命令，具有许多不同的选项和良好的文档。我在您提供的两个文件 4_P7.pdf 和 4_P13.pdf 上测试了解决方案。您可以查看[merged.pdf](https://dl.dropbox.com/u/25840964/stackoverflow/merged.pdf)以验证所有字符的格式是否正确。下面的代码默认使用 2x2 网格，但您可以通过在调用合并时设置网格参数来更改它。

```
from subprocess import check_output

def merge(inputs, output, grid='2x2'):
    check_output(['pdfjam'] + inputs + ['--nup', grid, '--outfile', output])

merge(['4_P7.pdf', '4_P13.pdf'], 'merged.pdf') 
```

下面的评论中有一个问题，即是否可以像问题示例文件中那样完成自定义职位。下面实现了问题中提供的相同布局。它首先构造顶部布局，这是一个 4x2 布局，然后是底部 2x6 布局，最后将这两个布局合并到[final.pdf](https://dl.dropbox.com/u/25840964/stackoverflow/final.pdf)中。可以[在此处找到](https://dl.dropbox.com/u/25840964/stackoverflow/layout.zip)以下示例中使用的 pdf 。

```
from subprocess import check_output

def merge(inputs, output, grid='2x2'):
    return check_output(['pdfjam'] + inputs + ['--nup', grid, '--outfile', output])

files = ['1.pdf', '2.pdf', '3.pdf', '4.pdf', '1.pdf', '2.pdf', '3.pdf', '4.pdf']
merge(files, 'top.pdf', '4x2')

files = ['1.pdf', '2.pdf', '3.pdf', '4.pdf', '5.pdf', '6.pdf', '1.pdf', '2.pdf',
    '3.pdf', '4.pdf', '5.pdf', '6.pdf']
merge(files, 'bottom.pdf', '2x6')

merge(['top.pdf', 'bottom.pdf'], 'final.pdf', '1x2') 
```

# ruby-on-rails - 用黄瓜编码::InvalidByteSequenceError

> ID：12781999
> 
> 赞同：0
> 
> 时间：2012-10-08T12:42:26.397
> 
> 标签：ruby-on-rails, json, cucumber

我有一个项目正在尝试在运行 Bamboo 的持续集成服务器上设置。一切都很好，直到我尝试运行黄瓜测试，我得到这个错误：

```
RAILS_ENV=test bundle exec cucumber 
/home/BAMBOO/bamboo-home/xml-data/build-dir/LIMS-PLAN-JOB1/
vendor/bundle/ruby/1.9.1/gems/json-1.7.5/lib/json/common.rb:155:in 
`encode': "\xD8" on US-ASCII (Encoding::InvalidByteSequenceError) 
```

现在，我已经用谷歌搜索了这个，每个人的解决方案似乎都是 export LANG=en_US.utf8 并且它突然起作用了。不是我的情况。

我已经尝试了迄今为止在谷歌搜索、不同论坛、github 问题等中看到的所有建议。似乎没有任何效果，我无法将其归结为任何东西。Cucumber 当然适用于这个项目的我的 mac 和我的 linux 桌面，并且据我所知，具有相同的语言环境设置。

这是我的语言环境-a，如果有帮助的话。如果您需要其他东西，请走开。

```
C
C.utf8
POSIX
en_AG
en_AU.utf8
en_BW.utf8
en_CA.utf8
en_DK.utf8
en_GB
en_GB.utf8
en_HK.utf8
en_IE.utf8
en_IN
en_NG
en_NZ.utf8
en_PH.utf8
en_SG.utf8
en_US.utf8
en_ZA.utf8
en_ZW.utf8 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:37:32.000

疯狂的时机......但我*认为*更新到几个小时前刚刚发布的小黄瓜 2.11.3 就成功了。