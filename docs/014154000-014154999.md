# StackOverflow 问答 14154000-14154999

# codeigniter - 如果 CI 中的一个控制器中有 2 个表单（2 个提交按钮）的条件

> ID：14154004
> 
> 赞同：1
> 
> 时间：2013-01-04T09:01:04.583
> 
> 标签：codeigniter

我有一个控制器**身份验证**，有 2 种方法登录和注册。

它运行良好。

但是，我需要另一个名为**login_and_register**的函数，该函数将有一个 if 条件来确定将执行哪个部分。如果登录部分（基本上来自登录方法的代码）或注册部分（来自注册方法的代码）。

if 条件应该检查​​单击了哪个提交按钮。

但问题就在这里。

我需要两个表单（登录和注册）的 form_open 保持这样：

```
<?php echo form_open('auth/login_and_register'); ?> 
```

这不能更改为例如 auth/login_and_register_log 或 auth/login_and_register_reg 或 auth/login_and_register/log 或 auth/login_and_register/reg 等。

登录和注册表单在同一个视图中，按下提交后，auth 控制器中的这个函数 login_and_register 被执行。

我在想我可以根据提交值的名称来制作 if 条件，因为对于登录表单，它称为**submitlog**，对于注册表单，它称为**submitreg**。

所以，也许是这样的：

```
if( isset($this->form_validation->set_value('submitlog')) ) {
   //code for login part
}
elseif ( isset($this->form_validation->set_value('submitreg')) ) {
   //code for registration part
}
else {
   //code for redirect to homepage
} 
```

但它不起作用。知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:35:42.647

查询提交按钮名称是个好主意。这是一段有效的代码：

```
if ($this->input->post("submitlog") !== false) {
    //code for login part
} elseif ($this->input->post("submitreg") !== false) {
    //code for registration part
} else {
    //code for redirect
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:13:01.987

取而代之的是，您可以在两个表单中使用相应表单名称的值保留一个隐藏字段。在控制器中，您可以检查此字段值并确定提交的表单。然后你可以重定向到所需的功能..

# asp.net - 将 asp.net 应用程序迁移到会员模型

> ID：14154005
> 
> 赞同：0
> 
> 时间：2013-01-04T09:01:10.243
> 
> 标签：asp.net, oauth, oauth-2.0, membership

到目前为止，我一直使用 asp.net 创建个人 Web 应用程序，例如，我在 MS SQL Server 数据库或客户管理和支持系统中维护待办事项的应用程序。我通过 web.config 使用基本身份验证，我可以在其中创建另一个可以查看和使用此类数据库的用户，但是所有数据都在他和我之间共享。

但现在我想将此应用程序转换为会员模式，用户在其中注册并可以使用他自己的个人待办事项列表。我可以想到以下方法。如果我在某些方面错了或者我遗漏了什么，请纠正我。

脚步：

1.  添加一个会员用户表并使用该表的主键来访问我需要添加此列的其他表，在这种情况下是待办事项列表。

2.  接下来，我需要编写登录、注册和用户管理逻辑来维护用户表。在这里，我希望找到一些工作示例，但所有搜索都只给我 ASP.NET MVC 成员资格示例。我不想使用 MVC，因为我使用的是第三方 asp.net 组件。据我所知，我不能将 MVC 与这些组件一起使用。任何与 MVC 类似但针对 asp.net 的现成示例的链接？

3.  我还希望用户能够使用他们的 google id、dropbox id 等登录。在我自己的登录/注册时这可能吗？那么用户表如何变化？电子邮件地址是连接所有这些东西的唯一数据吗？例如，如果有人使用 google id 登录，我使用 Google oauth 2 API 进行身份验证，但使用电子邮件地址作为数据来添加或定位该用户以向他提供他的数据表。我对这种用户表的外观感到困惑，其中各种登录以及自定义登录都是可能的。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:19:00.080

[http://www.shiningstar.net/ASPNet_Articles/SqlMembershipProvider.aspx](http://www.shiningstar.net/ASPNet_Articles/SqlMembershipProvider.aspx) 这应该可以帮助您了解您需要做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T02:04:09.503

我得到了将成员资格与 oauth 相结合并内置于 ASP.NET 4.5 中的确切解决方案。更重要的是，有一个视频演示了这一切！

[http://www.asp.net/vnext/overview/aspnet/oauth-in-the-default-aspnet-45-templates](http://www.asp.net/vnext/overview/aspnet/oauth-in-the-default-aspnet-45-templates)

# haskell - 在 MinGW 中使用 cabal 编译 SDL

> ID：14154007
> 
> 赞同：5
> 
> 时间：2013-01-04T09:01:13.917
> 
> 标签：haskell, mingw, sdl, cabal, sdl-1.2

我正在尝试在 MinGW 中为 Haskell 的 cabal 安装 SDL，但我遇到了一些问题。cabal 找不到 C 库，我也不知道为什么。这里有一些信息：

*   我已经下载了 SDL1.2 的开发库和运行时库；
*   对于开发版本，我`make native`它：它安装在`/usr/include/SDL`and `/usr/lib`;
*   我试过了`cabal install SDL`，它失败了，因为它找不到头文件和lib；
*   然后，我再试一次`cabal install SDL --extra-include-dirs=/usr/include/SDL --extra-lib-dirs=/usr/lib`。它找到了头文件，但仍然没有找到 lib ；
*   我把运行库复制`SDL.dll`进去了`/usr/lib`，还是一样的麻烦；
*   最后，我添加`/usr/lib`了`PATH`and `LD_LIBRARY_PATH`，仍然找不到 @!#* C lib。

你有想法吗？

# spring - @cachable 问题 - 方法不缓存

> ID：14154008
> 
> 赞同：0
> 
> 时间：2013-01-04T09:01:46.630
> 
> 标签：spring, spring-mvc, ehcache

我有一个使用@Cachable 的方法

```
@Cacheable(value="airport", key="#filter")
public static String getAirport(String filter, SessionFactory sessionFactory){
    String airportsDisplay = "";
    Session session = sessionFactory.openSession();
    airportsDisplay = (String) session.createQuery("select iata from Airports a where a.displaystr = :accfilter").setString("accfilter", filter.toUpperCase()).uniqueResult();
    session.close();
    return airportsDisplay;
} 
```

它所做的只是使用给定过滤器进行数据库查询并返回机场名称。

xml配置是

```
<cache name="airport"
   maxElementsInMemory="100"
   eternal="false"
   timeToIdleSeconds="1200"
   timeToLiveSeconds="1200"
   overflowToDisk="true"
   maxElementsOnDisk="10000000"
   diskPersistent="true"
   diskExpiryThreadIntervalSeconds="1200"
   memoryStoreEvictionPolicy="LRU"/> 
```

问题是它不缓存结果！

在部署时，airport.data 会正常创建，但无论我从 Web 应用程序调用该方法多少次，它总是为空。

有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T09:07:48.037

此方法是静态的，因此它不是 Spring bean 的一部分，Spring 无法拦截对该方法的调用并返回缓存结果而不是调用它。只有 Spring bean 方法可以被缓存。

# php - 使用会话从数据库中检索数据

> ID：14154009
> 
> 赞同：0
> 
> 时间：2013-01-04T09:01:48.700
> 
> 标签：php, session, fetch

嗨，我在这里阅读了主题并尝试以不同的方式进行操作，但我的问题仍未解决。我尝试存储会话并使用它再次从数据库中检索数据。我使用会话 idmember 并将其设置为变量，然后将其用于查询以回显他/她的名字和姓氏。我可以进入主页，但用户名没有回显。在这里总结一下它是如何工作的。索引 > 验证（验证） > 学生/index.php

函数.php

```
<?php 

function sec_session_start() {
        $session_name = 'sec_session_id'; // Set a custom session name
        $secure = true; // Set to true if using https.
        $httponly = true; // This stops javascript being able to access the session id. 

        ini_set('session.use_only_cookies', 1); // Forces sessions to only use cookies. 
        $cookieParams = session_get_cookie_params(); // Gets current cookies params.
        session_set_cookie_params($cookieParams["lifetime"], $cookieParams["path"], $cookieParams["domain"], $secure, $httponly); 
        session_name($session_name); // Sets the session name to the one set above.
        session_start(); // Start the php session
        session_regenerate_id(); // regenerated the session, delete the old one.     
}

?> 
```

index.php（主页）

```
<?php 
include ('include/functions.php');
sec_session_start();
include ('header.php');
?>
<title>Students Portal</title>
<div id="upper_row"><b>Announcement:</b></div>
    <div id="l_column"></div>

      <div id="r_column">
      <form action="authenticate.php" method="POST" name="loginform">
  <table width="100%">
      <tr>
        <th colspan="3" align="left">USER LOGIN<br /><hr /></th>
      </tr>
      <tr>
        <td width="72">Username:</td>
        <td width="212">
             <script type="text/javascript">
            function blank(a) { if(a.value == a.defaultValue) a.value = ""; }
            function unblank(a) { if(a.value == "") a.value = a.defaultValue; }
            </script> 
        <input type="text" value="Enter your School ID here" onfocus="blank(this)" onblur="unblank(this)" name="id" />
        </td>

      </tr>
      <tr>
         <td>Password:</td>
         <td><script type="text/javascript">
        function blank(a) { if(a.value == a.defaultValue) a.value = ""; }
        function unblank(a) { if(a.value == "") a.value = a.defaultValue; }
        </script> 
        <input type="password" value="Password" onfocus="blank(this)" onblur="unblank(this)" name="password" /></td>
      </tr>
      <tr>
        <td></td>
      <td rowspan="3" align="center"><input type="submit" name="login" value="Login" /></td>
      </tr>
  </table>

      </form>
      </div>

  <?php 
include "footer.php";
?> 
```

认证.php

```
<?php
include ('include/conn.php');
include ('include/functions.php');
sec_session_start();
// username and password sent from form
if(isset($_POST['login'])) {    
        $user=$_POST['id'];
        $pass=$_POST['password'];

        // To protect MySQL injection (more detail about MySQL injection)
        $user = stripslashes($user);
        $pass = stripslashes($pass);
        $user = mysql_real_escape_string($user);
        $pass = mysql_real_escape_string($pass);
        $crypt_pass=md5($pass);
        //query from database
        $result=mysql_query("SELECT username,user_pass,user_id FROM tbl_user WHERE username ='$user' and user_pass='$crypt_pass'");
        $result2=mysql_fetch_row($result);
        // Mysql_num_row is counting table row
        $count=mysql_num_rows($result);

        //First Step of Validation
        //get the ip address of the user then the attempts
        $iptocheck = $_SERVER['REMOTE_ADDR'];
        $iptocheck = mysql_real_escape_string($iptocheck);
        $resultip = mysql_query("SELECT ip_address,login_attempts,username FROM tbl_sec_login WHERE ip_address = '$iptocheck' AND username='$user'");
        $ipcount = mysql_num_rows($resultip);
        $rowx = mysql_fetch_row($resultip);

        if(mysql_num_rows($resultip) > 1) {
            //Already has some IP address records in the database
            //Get the total failed login attempts associated with this IP address
            if ($rowx['1'] > 3) {
                header("Location: index.php");
            }
        }
        //If none then insert it to the table
        else if ($ipcount == 0) {
            $loginattempts = 0;

            mysql_query("INSERT INTO tbl_sec_login (ip_address,login_attempts,username) VALUES ('$iptocheck','$loginattempts','$user')");
        }
        //Second step of validation
        //if count is equal to 1 then proceed to next condition
        if($count==1){
                //Third Step of Validation
                // If result matched $user and $crypt_pass, table row must be 1 row

                if ($user==$result2[0] AND $crypt_pass==$result2[1]){
                    $_SESSION['idmember'] = $_POST['id'];

                    $loginattempts = 0;
                    mysql_query("DELETE FROM tbl_sec_login WHERE ip_address = '$iptocheck' AND username='$user'");

                    if($result2[2]==3) {
                    header("Location: student/index.php?id=$user");
                    }elseif ($result2[2]==2) {
                    header("Location: epersonnel/index.php");
                    }elseif ($result2[2]==1) {
                    header("Location: admin/index.php");
                    }

                }else{
                    $loginattempts = $rowx['1'] + 1;

                    mysql_query("UPDATE tbl_sec_login SET login_attempts = '$loginattempts' WHERE ip_address = '$iptocheck' AND username='$user'");
                    header("Location: login.php");
                }

            } 
            else {
                $loginattempts = $rowx['1'] + 1;

                mysql_query("UPDATE tbl_sec_login SET login_attempts = '$loginattempts' WHERE ip_address = '$iptocheck' AND username='$user'");
                header("Location: login.php");
            }
        }

        else {
            header("Location: index.php");
            }

?> 
```

* * *

学生/index.php

```
<?php
session_start(); 

if(!empty($_SESSION['idmember'])){
    header("Location: login.php");
}
require 'include/conn.php';
$id = $_SESSION['idmember'];
$query="SELECT first_name,last_name FROM tbl_studentmasterlist WHERE sid ='$id'";
$result=mysql_query($query);
$row = mysql_fetch_array($result);

include "header.php";
?>
<div id="s_l_column">
    <div id="i_location">
    Welcome, <br />
    <center><img name="" src="" width="185" height="135" alt=""> <br />
    &raquo; <?php echo $row['first_name']." ".$row['last_name'];?> </center>
    <hr />
    </div>

    <div id="side_menubar">
    </div>
</div>

<div id="s_r_column">

    <div class="menubar">
        <ul>
            <li><a href="#" class="leftEdge clearBorder">Home</a></li>
            <li><a href="#">Account Setting</a></li>
            <li><a href="#">Enrollment Guide</a></li>
            <li><a href="#">Enroll</a></li>
            <li><a href="#" class="rightEdge">Logout</a></li>
        </ul>                
    </div>

    <div id="b_contianer">

    </div>

</div>

<?php 
include "footer.php";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:30:17.373

当您已经设置了 $_SESSION['idmember'] 变量时，为什么要重定向到 login.php 页面？这没有多大意义。

您的代码执行以下操作：

当您第一次调用 index.php 站点时，您的会话变量 'idmember' 未设置，因此不会显示名字和姓氏，因为您的查询不会返回任何结果。

这里的问题在于以下代码行（index.php）：

```
if(!empty($_SESSION['idmember'])){
    header("Location: login.php");
} 
```

在这里检查，如果您的会话变量 'idmember' 不为空。因此，每次您调用 index.php 并设置“idmember”时，您都会被重定向到 login.php。

要解决此问题，只需将您的代码替换为以下代码：

```
if (!isset($_SESSION['idmember'])){
    header("Location: login.php");
} 
```

这将检查是否未设置会话变量“idmember”并将用户重定向到 login.php 页面，如果是的话。用户成功登录后，用户再次调用 index.php，您的查询将返回一个结果（前提是实际存在具有 'idmember' 值的用户......）。最后，应该显示名字和姓氏。

# javascript - kineticjs 和 iOS 资源限制

> ID：14154010
> 
> 赞同：0
> 
> 时间：2013-01-04T09:01:57.670
> 
> 标签：javascript, ios, resources, kineticjs

我想知道是否有人遇到过这个问题，什么时候发生？我正在做一个项目，在不同的图层上有一个 90mb 的 om 图像。我想知道这将如何在 iOS 上做出反应，以及我已经可以采取哪些措施来防止这种情况发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T10:00:13.423

除了明显的加载时间之外，我没有看到任何问题。如果 90MB 包含 1000 个您想要同时制作动画的小图像，那么是的，您会遇到问题。

与其他移动设备相比，我发现 iPad 和 iPhone 的性能相当不错。

# objective-c - ios - 从文档目录中删除任何文件，但不是所有文件

> ID：14154011
> 
> 赞同：-3
> 
> 时间：2013-01-04T09:01:58.170
> 
> 标签：objective-c, ios, nsfilemanager, nsdocumentdirectory

我有这段代码，它允许我指定要从我的文档目录中删除的特定文件。

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectoryPath = [[paths objectAtIndex:0] stringByAppendingString:@"/Podcasts"];

    NSString* checkIfFileExists = [documentsDirectoryPath stringByAppendingPathComponent:_fileName];

    NSFileManager *fileManager = [NSFileManager defaultManager];
    [fileManager removeItemAtPath:checkIfFileExists error:NULL]; 
```

如果您想使用按钮删除文件，我可以看到这很有用，但不想只删除特定文件，如何引用`removeItemAtPath:`来处理数组中的任何文件？我不希望它一次删除所有文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:25:42.863

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectoryPath = [[paths objectAtIndex:0] stringByAppendingString:@"/Podcasts"];
NSString* checkIfFileExists = [documentsDirectoryPath stringByAppendingPathComponent:_fileName];
NSFileManager *fileManager = [NSFileManager defaultManager];
BOOL isMyFileThere = [[NSFileManager defaultManager] fileExistsAtPath:checkIfFileExists];
if(isMyFileThere){

          [fileManager removeItemAtPath:checkIfFileExists error:NULL];
}
else{
          //file dont exists
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:06:56.350

您可以使用 of 获取目录的`- (NSArray *)contentsOfDirectoryAtPath:(NSString *)path error:(NSError **)error`内容`NSFileManager`。

[https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html)

然后遍历数组并一个一个删除文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T09:09:54.367

您可以使用相同的代码。

但需要像这样添加文件名：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectoryPath = [[paths objectAtIndex:0] stringByAppendingString:@"/Podcasts"];
NSString *file = [documentsDirectoryPath stringByAppendingString:@"%@",[yourFileNamesArray objectAtIndex:0];

NSString* checkIfFileExists = [file stringByAppendingPathComponent:_fileName];

NSFileManager *fileManager = [NSFileManager defaultManager];
[fileManager removeItemAtPath:checkIfFileExists error:NULL]; 
```

# facebook - 除非登录，否则 Facebook 应用程序不会显示

> ID：14154013
> 
> 赞同：0
> 
> 时间：2013-01-04T09:02:09.137
> 
> 标签：facebook, facebook-apps

我为公司 Facebook 页面 ( [https://www.facebook.com/CresserMotorGroup](https://www.facebook.com/CresserMotorGroup) ) 开发了一些 iframe 应用程序。不幸的是，除非您登录 Facebook，否则应用程序页面无法正常工作。

我检查了应用程序设置，似乎找不到任何会导致这种情况的东西。

这是故意的吗？

谢谢。

# php - 每次激活查询时将特定列值减 1

> ID：14154022
> 
> 赞同：0
> 
> 时间：2013-01-04T09:03:18.513
> 
> 标签：php, mysql

表**leave_details**包含以下列

> 1.员工姓名
> 
> 2.员工证
> 
> 3.离开
> 
> 4.离开
> 
> 5.Leavetype **（带薪休假/病假）**
> 
> 6.Leavestatus **（批准/拒绝）**

每当员工申请休假时，经理都会批准或拒绝。查询审批

> "UPDATE leave_details join managerlogin on managerlogin.manager_id=leave_details.manager_id SET leave_details.leave_status='Approved' where (employee_id='$myemployee_id' and managerlogin.manager_id='".$_SESSION['mymanager_id']."' )";

这会将**leave_status**列更改为**“已批准”**

我有另一个名为**员工**的表，其中包含员工的总**带薪休假**和**病假**余额。员工表具有以下列

> 1.员工姓名
> 
> 2.员工证
> 
> 3.带薪休假（例如20）
> 
> 4.病假（例5）

当他申请休假并且当**leave_status****获得批准**时，**员工表**中的**带薪休假**和**病假**列应**减少 1**（例如，如果他申请**带薪休假**，则该特定员工列的值应**减少 1** [此处20-1=19] ，当他下次申请时 [19-1=18] 应该继续）。

 ******怎么做。请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:12:33.663

更新员工表中的休假权利是一个糟糕的设计 - 因为一旦更改，您就没有关于它们是什么的进一步参考；并且没有关于何时采取的时间参考。

所以我建议将`leave_details`表状态中的记录更改为已使用 - 然后计算从 leave_details 表中使用的天数以确定剩余的休假天数，例如查找 2011 年休假的天数

```
select sum(datediff(leaveto,leavefrom)) as days_leave_taken 
from leave_details 
where employeeid = 1000
      and leavefrom between '2011-01-01' and '2011-12-31 23:59' 
```

但是，如果您必须更新员工表；

```
UPDATE Employee SET EarnedLeave = EarnedLeave - 1 WHERE EmployeeID = <Id> 
```

会成功的。******

# java - hibernate JPA 查询仅适用于命名空间

> ID：14154024
> 
> 赞同：0
> 
> 时间：2013-01-04T09:03:34.363
> 
> 标签：java, hibernate, jpa-2.0

我有一个 JAR，它只包含我的模型，这些模型是带注释的类。然后是加载 JAR 的应用程序。

在应用程序的 persistence.xml 中，我有：

`<jar-file> my jar </jar-file>`

在属性中：

`<property name="hibernate.archive.autodetection" value="class" />`

这样可行。检测到实体并且此查询工作正常：

```
List<Event> events = em.createQuery(
"from com.my.namespace.model.Event", Event.class).getResultList(); 
```

但是我绝对需要在查询中包含命名空间......如果我这样做：

```
List<Event> events = em.createQuery("from Event", Event.class).getResultList(); 
```

然后我得到这个异常：

```
Event is not mapped [from Event] 
```

更令人沮丧的是，我将类 Event.class 作为调用的第二个参数提供给 JPA。Java 代码导入正确的包。

如何让 JPAQL/HQL “导入”正确的包以查看该实体，而无需显式键入命名空间？

**更新：**如果有帮助，这里是 Event.java .. 它是微不足道的：

```
package com.my.namespace.model;

import javax.persistence.*;

@Entity(name="events")
@SequenceGenerator(name="events_id_seq", sequenceName="events_id_seq")
public class Event {

    @Id @Column(name="id") @GeneratedValue(generator="events_id_seq")
    private Long mId;

    @Column(name="title")
    private String mTitle;

    public Long getId() {
        return mId;
    }

    public String getTitle() {
        return mTitle;
    }

    public void setTitle(String title) {
        mTitle = title;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:13:21.890

`@Entity(name="events")`是罪魁祸首

它一定要是

```
 @Entity
          @Table(name="events") 
```

如果您打算将事件作为数据库表名。否则`events`在您的查询中使用，而不是`Event`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T09:13:31.350

由于您的实体名称是“events”（来自@Entity(name="events")），您应该从“events”而不是“event”中选择。

```
List<Event> events = em.createQuery("from events", Event.class).getResultList(); 
```

因此应该工作

# python - 需要 ctypes char* 指针

> ID：14154026
> 
> 赞同：4
> 
> 时间：2013-01-04T09:03:38.000
> 
> 标签：python, pointers, ctypes

我有一个返回字符串 (char *) 的 C 函数，我们称之为`foo()`. 在 python 中，我想调用它并使用它的返回值，当我完成后，我想调用另一个 C 函数来释放`foo`返回的字符串。

如何获取指针和字符串本身？如果我这样做：

```
fooFunc = foolib.foo
fooFunc.restype = c_char_p
r = fooFunc() 
```

然后我得到了字符串，但没有得到指针。如果我在不指定 的情况下执行此操作`restype`，我会得到一个似乎是正确地址的 int，但是每当我尝试将其强制转换为 sting 时，`c_char_p(<address>)`它就会因分段错误而崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:34:25.990

我很惊讶你不能只将`c_char_p`实例传回第二个函数，但我手头没有工具来验证它为什么会失败。

但是，作为替代方案，我相信您可以尝试：

*   将 指定`restype`为简单指针 ( `c_void_p`)
*   当你想操作字符串时，使用[`ctypes.string_at`](http://docs.python.org/2/library/ctypes.html#ctypes.string_at)来构建它
*   将最初返回的指针传递给释放函数。

# android - 在 Pandaboard 上安装 Busybox

> ID：14154028
> 
> 赞同：2
> 
> 时间：2013-01-04T09:03:51.830
> 
> 标签：android, embedded-linux, busybox, pandaboard

我正在尝试在具有 ICS android 内核的熊猫板上安装繁忙的盒子

步骤低于我使用的

1.  下载的熊猫板支持的二进制文件

2.  将其推入 system/busybox/ 文件夹

3.  通过在引导的文件系统上执行以下命令，在目标上安装 busybox 命令行工具：

    ```
     pc> ./adb shell
                     target$ cd /system/busybox
                     target$ ./busybox --install .
                     target$ ./sh  #here i am getting error like ./sh: precmd: not found 
    ```

4.  通过重命名保存原始 sh 可执行文件，然后创建一个到 busybox sh 的软链接：

    ```
     target$ cd /system/bin
     target$ mv sh sh.android
     target$ ln -s /system/busybox/sh sh 
    ```

5.  之后导出

    导出 PATH=$PATH:/system/busybox:/sbin:/vendor/bin:/system/sbin:/system/bin:/system/xbin

我想将 Busybox shell 作为默认 shell，这样我就可以在 Panda board 上运行脚本，但是在我在那里提到的第 3 步中出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:07:24.683

该`precmd`错误似乎是由于提示。尝试通过执行以下操作重置提示：

```
$ unset PS1 PROMPT_COMMAND 
```

# php - Smarty：if 语句中自定义函数的语法

> ID：14154029
> 
> 赞同：2
> 
> 时间：2013-01-04T09:04:03.333
> 
> 标签：php, smarty

我有一个聪明的自定义函数，我必须像这样调用

`[{ oxcontent ident="oxhomepagefootertextblock" }]`

现在我必须检查函数是否返回真值或值。我正在尝试使用这样的 if 条件：

```
[{if oxcontent ident="oxhomepagefootertextblock"}]
    I'm true
[{/if}] 
```

虽然这里有一个类似的例子 (http://forum.oxid-esales.com/showthread.php?t=782#post4754) smarty 停止执行。

有人能告诉我正确的语法是什么吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-26T14:36:08.773

我的回答可能会晚一点，但另一种解决方案是使用 {capture} 函数，例如：

```
{capture name="oxcontentValue"}{oxcontent ident="oxhomepagefootertextblock"}{/capture}

{if $smarty.capture.oxcontentValue == true}
    {* do something *}
{else}
    {* do something else *}
{/if} 
```

参考： [http ://www.smarty.net/docs/en/language.function.capture.tpl](http://www.smarty.net/docs/en/language.function.capture.tpl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:00:14.760

您应该能够将结果分配给`oxcontent ident="oxhomepagefootertextblock"`smarty 中的变量（[参考](http://www.smarty.net/docs/en/language.function.assign.tpl)）。然后，您应该能够使用`{if myvar}{/if}`.

# mysql - 如何在我的 sql 中检索具有多个联接的数据？

> ID：14154030
> 
> 赞同：1
> 
> 时间：2013-01-04T09:04:09.433
> 
> 标签：mysql, sql, database, inner-join

我的 SQL 数据库中有下表

用户_

```
userId | userName 
```

组织_

```
org_id | parent_org_id_ | name 
```

角色_

```
roleId | roleName 
```

用户角色

```
userId | roleId 
```

users_organization

```
userId |  organizationId 
```

...现在我想要的是来自 org_Id= ？和角色名称=？我想从与具有特定角色名称的组织相关的 user_ 表中检索用户的名称。所以谁能告诉我.. 怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:10:15.807

尝试 ：：

```
Select *
from
user_ u
INNER JOIN user_roles ur on (u.userId = ur.userId)
INNER JOIN role_ r on (ur.roleId = r.roleId)

INNER JOIN users_organization uo (u.userId = uo.userId)
INNER JOIN organization_ o on (uo.organizationId= o.orgId)
where uo.org_id =? and  r.role_name=? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:14:42.247

如果我理解正确（您的问题缺少表格关系）：

```
SELECT U.userId
    , U.userName
    FROM user_ U
    INNER JOIN users_organization UO ON UO.userId = U.userId
    INNER JOIN user_roles UR ON UR.userId = U.userId
    WHERE UO.organizationId = organizationId
        AND UR.roleName = roleName; 
```

参数为`organizationId`和`roleName`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T09:16:22.457

试试下面的建议。

```
SELECT u.userName
FROM user_ u
   , role_ r
   , users_organization uo
   , user_roles ur
WHERE r.roleName = ?
  AND uo.organizationId = ?
  AND ur.userId = u.userId 
  AND ur.roleId = r.roleId 
  AND u.userId = uo.userId 
```

# css - 并排样式列表层次结构

> ID：14154032
> 
> 赞同：0
> 
> 时间：2013-01-04T09:04:12.600
> 
> 标签：css, nested-lists

我正在尝试考虑设置列表的最佳方法，以使每个 ul 在页面上处于相同的物理高度级别。因此，例如，如果我有：

```
<ul>
    <li>1</li>
    <li>2
        <ul>
            <li>2.1</li>
            <li>2.2</li>
        </ul>
    </li>
    <li>3</li>
</ul> 
```

它会显示为：

```
1   2.1
2   2.2
3 
```

我想出的唯一方法是将每个绝对定位`<ul>`到相对定位的容器的顶部，但我希望容器保持其子容器的大小。想了很久，还没想出好的解决办法。如果我`float`是他们，或者`display:inline-block;`，每个子集列表将继承其父级的顶部，所以它会显示如下：

```
1
2   2.1
3   2.2 
```

话虽这么说……救命！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:48:52.337

在此处发布整个代码。稍微编辑了您的html。

```
<ul class="menu">
    <li><span>1</span></li>
    <li><span>2</span>
        <ul class="sub_menu">
            <li>2.1</li>
            <li>2.2</li>
        </ul>
    </li>
    <li><span>3</span></li>
</ul>​ 
```

您可以编辑 css（背景颜色、颜色、宽度等以满足您的需要）

```
.menu li span{
    display:block;
    float:left;
    width: 20px;
    background-color:#ddd;
    padding:2px;
}
.menu li ul{
    float:left;
}

.menu ul li{
    padding:2px;
    float:left;
    margin:0px 5px;
    background-color:#eee;
}

.menu ul{
    clear:right;
    overflow:auto;    
}

.menu > li{
    clear:both;
    background-color:#ccc;
    overflow:auto;
    width:100px;
}
​ 
```

这是 JSFIDDLE 的链接 [http://jsfiddle.net/zTygm/1](http://jsfiddle.net/zTygm/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:35:37.990

Looks incredibly tricky. Is there a reason the data cannot be separated into two lists that are not connected by child-parent relationship? maybe even using some javascript to pull out the child lists on the client side.

something similar to this in jQuery:

```
var childLists = $("ul > li > ul");
$(".listsContainer").append(childLists);
$("ul > li > ul").remove(); 
```

And then just use some basic css to move the new lists into position, probably best to 'append' them into their own sub container to make stacking on top of each other easier.

**edit:** working example [http://jsfiddle.net/3HqxL/](http://jsfiddle.net/3HqxL/) (css does not have to be in javascript)

# java - 没有 db 或文件系统的 java 常用存储选项

> ID：14154033
> 
> 赞同：0
> 
> 时间：2013-01-04T09:04:12.343
> 
> 标签：java, persistence

我正在设计一个银行 Web 应用程序，我想在其中存储一些在用户/会话之间共享的通用数据。我想保留数据，但没有任何使用数据库或文件系统的选项。要求是每当修改公共数据时，它都应该立即对所有人可见。我会很感激一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:17:14.143

您可以使用 hsql db jdbc 驱动程序，它支持创建内存数据库 checkout hsql db documentation for in-memory db support

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:06:01.047

尝试使用[POJO](http://en.wikipedia.org/wiki/Plain_Old_Java_Object)。然后将所有 POJO 存储在 List 或 Map 中。

例如

```
//this is your pojo
public class User{
     private String name;
     private int age;

     public void setName(String name){
           this.name = name;
     }

     public String getName(){
           return this.name;
     }

     public void setAge(int age){
           this.age = age;
     }

     public int getAge(){
           return this.age;
     }
}

public class TestUser{

     public static void main(String args[]){
           //to populate record, create object user
           User user1 = new User();
           user1.setName = "name1";
           user1.setAge = "20";//then so on

           //after creating object, store it in a <a href="http://tutorials.jenkov.com/java-collections/index.html"collection</a>. Depends on what you want.
           List<User> myList = new ArrayList<User>();
           //then add it to your collection
           myList.add(user1); //and so on
           //you can access now your record on your list
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T09:07:22.203

我建议您使用`Caches` **（Oracle Coherence，简单地图）**有很多可用的选项。如果您想永久保留数据，那么除了`Database/Filesystem`.

**缓存**

*   [缓存](http://ehcache.org/)
*   [甲骨文一致性](http://www.oracle.com/technetwork/middleware/coherence/overview/index.html)
*   [JCS](http://commons.apache.org/jcs/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T09:14:32.203

您可以使用像 Memcached 这样的缓存。

或者你可以使用像 HSqlDB 这样的内存数据库。

# android - 线颜色被覆盖在android中的第一行颜色

> ID：14154034
> 
> 赞同：0
> 
> 时间：2013-01-04T09:04:12.430
> 
> 标签：android, fingerprinting

我正在尝试用手指画线，我想用多色画线，一切都很好。但是发生的情况是，当我第一次画一条线时，它工作正常，但在那之后，如果我画另一条线，那么第一条线的颜色会因此而丢失，它会变成一条单色线。

任何参考链接也很感激..!!!!

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T09:48:35.357

我只能假设颜色之间的差异取决于`hue`属性，该属性是从`pointsToDraw`.

```
// set paint to whatever color you want
float hue = (float)i /pointsToDraw.size(); 
```

您在屏幕上绘制的每条线都不是之前的精确副本，对吧？因此它们的`pointsToDraw`大小会有所不同，因此`hue`不同的线会有不同的值。

并且由于`hue`在生成线条颜色时使用了 ，因此每条新线条都将具有唯一的颜色。

```
mPaint.setColor(Color.HSVToColor(
      new float[] {
           hue*360, 1, 1
      })); 
```

要测试这个假设，请尝试为 分配一个常数值`hue`，并查看是否有任何差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T16:59:24.677

您的代码所做的只是在绘制每条路径的新段时平滑地更改颜色。这是按行完成的：

```
float hue = (float)i /pointsToDraw.size();  
mPaint.setColor(Color.HSVToColor(
                                new float[] {
                                        hue*360, 1, 1
                                })); 
```

`hue`平滑变化，因为 i 是您的迭代变量。`hue`您的代码的问题在于，您使用的值取决于屏幕上的路径数（即`pointsToDraw.size()`），而不是使用某个常数值作为除数来计算。

所以我认为下面的代码会做到这一点。（我所做的只是将除数更改为计算`hue`

```
@Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        if(clearCanvas)
        {  // Choose the colour you want to clear with.
            canvas.drawColor(Color.TRANSPARENT, PorterDuff.Mode.CLEAR);
            clearCanvas = false;
            fl.invalidate();
        }else {

            synchronized(pointsToDraw)
            {
                for (ArrayList<Point> paths : pointsToDraw) {

                    for (int i=0; i<paths.size()-1; ++i) {

                        // set paint to whatever color you want
                        float hue = (float)i /(paths.get(0).x+paths.get(0).y);  
                        mPaint.setColor(Color.HSVToColor(
                                new float[] {
                                        hue*360, 1, 1
                                }));
                        canvas.drawLine(paths.get(i).x, paths.get(i).y, paths.get(i+1).x, paths.get(i+1).y, mPaint);
                    }
                }
            }
        }
    } 
```

# android - 显示异常的“更好”方式？

> ID：14154035
> 
> 赞同：1
> 
> 时间：2013-01-04T09:04:13.577
> 
> 标签：android, error-handling

我目前正在玩Android中的应用内计费流程，在购买过程中可能会出现无数的异常和问题。看起来我并不完全理解处理程序错误的概念，因为我的应用程序只显示“[App] 必须关闭”。

但是，在 LogCat 中，我看到了代码中定义的异常消息：

```
throw new IllegalStateException("Billing is not set up. Can't perform operation: " + operation); 
```

为什么不以这种方式向用户显示此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:10:03.463

如果您想为您的用户提供出色而清晰的错误消息，您应该尝试使用 crouton。这可以让你制作美丽的信息：看看他们的项目网站： [Crouton Homepage](http://johnkil.github.com/Android-AppMsg/)

* * *

回到您的问题，关键是您正在执行只能在 Logcatlog 中找到的错误消息。如果您想向用户显示它，请尝试 Toast Message 或 Alertmessage。不管我想看看@Crouton！

最好的祝福

苹果浏览器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:31:52.527

如果在某些情况下会出现异常，那么您真的应该通过实现 try catch（有时是 finally）块来编写防御性代码。看看这个资源 - [Java Exceptions](http://docs.oracle.com/javase/tutorial/essential/exceptions/putItTogether.html)

指定您期望的错误并相应地处理它。我希望应用程序返回一个“Toast”弹出窗口或重定向到计费设置。

注意：只捕获所有异常而不关心抛出异常的原因是非常糟糕的做法，请尝试在异常捕获中具体化。有时我宁愿我的应用程序崩溃而不是接受付款而不交付货物。

```
try {

    // your billing code

} catch (IllegalStateException e) {

    //Handle exception - Would probably want to match the contents of e to your message 
    defined to ensure it is the correct exception (In case you've defined many of the same type)

} 
```

# uitableview - UITableView 的延迟加载图片

> ID：14154039
> 
> 赞同：3
> 
> 时间：2013-01-04T09:04:45.893
> 
> 标签：uitableview, xamarin.ios, uiimage, lazy-loading

我有一个`UITableView`不同的部分，每个单元格都有一个图像。因为图像是为每个单元格单独下载的，所以我正在寻找延迟加载解决方案。

在 iOS Developer Library 上，它们是解决我的问题的好方法，但它在 Objective-c 中。（[链接到 LazyTableImages](https://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html "关联")）

我已经在 Xamarin 网站 ( [Link](http://docs2.xamarin.com/ios/Samples/Details/LazyTableImages) ) 上尝试过这个示例，但它的部分速度不快且有问题。

我找到了这个（[UrlImageStore](https://github.com/sichy/UrlImageStore)）解决方案，但我无法让它与`UITableView`.

有人对此有提示/解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T10:20:05.640

只是为了不重新发明轮子，Xamarin 在此创建了一个示例。它也更新了。

[只需在monotouch 示例](https://github.com/xamarin/monotouch-samples)中搜索**LazyTableImages**项目。

我提供了示例的主页，因为它可能对您有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T12:45:05.647

UrlImageStore 是一个非常好的解决方案。您不应该尝试使用 UITableView 进行此操作，而应使用自定义单元格或元素。

我使用[TweetStation](https://github.com/migueldeicaza/TweetStation)作为参考，并根据他的代码创建了自己的解决方案。

# python-2.7 - 在这里，我对 Python 包安装有些困惑

> ID：14154040
> 
> 赞同：0
> 
> 时间：2013-01-04T09:04:45.927
> 
> 标签：python-2.7, beautifulsoup, xlrd, xlwt

嗨，我刚刚安装`Python 2.7`，因为我对代码有一些要求。现在我也有兴趣根据我的要求安装一些 python 包。

我已经从各自的站点下载了一些`tar.zip`包，如、`beautifulsoup4`和。现在我将它们解压缩到现在如果我从这个文件夹运行它对我有用吗？表示所有必需的文件都将下载到其各自的文件夹中。`xlrd 0.8.0``xlwt 0.7.4``beautifulsoup4 4.1.3``C:\Python27\``python setup.py install`

请指导我理解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:29:04.150

所需的文件已经在文件夹中，该命令会安装它。您必须输入每个解压缩的文件夹并运行`python setup.py install`. 如果现在一切正常，您将这些模块安装在 python 可以找到它们的位置。

有关更多信息，请阅读此链接： http: [//www.blog.pythonlibrary.org/2011/11/24/python-101-setting-up-python-on-windows/](http://www.blog.pythonlibrary.org/2011/11/24/python-101-setting-up-python-on-windows/)

# c++ - 了解 C++

> ID：14154042
> 
> 赞同：0
> 
> 时间：2013-01-04T09:05:10.060
> 
> 标签：c++

> **可能重复：**
> [权威 C++ 书籍指南和列表](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)

我一直在阅读 Alex Alllain 的“Jumping Into C++”。我理解了前几章的基础知识，一直到函数。一旦它开始谈论将变量传递给函数并继续讨论数组、结构和枚举，我就不能很容易地理解这本书。事实上，只有大约 25% 的最后一章练习可以在不从其他人那里找到答案的情况下完成。

我的问题是：是否有更好的 C++ 书籍或在线参考资料可供我继续自学？我只是觉得它没有以我能理解的方式向我解释。我不知道这是因为我根本无法掌握它，还是我可以使用其他资源可能会改变我对它的看法。

任何建议都会非常有帮助，感谢您的任何意见！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:07:52.843

您可以查看[*The C++ Programming Language*](http://www.stroustrup.com/3rd.html)，它就像是 C++ 程序员的圣经™，至少对于新手来说。

# mysql - 想要解析 MySQL 中的 XML 文件（使用预定义的函数/过程）并将其插入到表中

> ID：14154047
> 
> 赞同：1
> 
> 时间：2013-01-04T09:05:42.853
> 
> 标签：mysql, xml-parsing

我在下面粘贴了一个 XML 文件。我想在 MySQL 中解析它。

1) 我提到了一些链接[1]，首先我们必须加载 XML 文件并将其插入表中。

[1] - [https://dev.mysql.com/doc/refman/5.5/en/load-xml.html](https://dev.mysql.com/doc/refman/5.5/en/load-xml.html)

2）我还读到使用 ExtractValue 函数获取值，但我得到的输出为 NULL

`ExtractValue(@xml, -here-node-path);`

## 这是 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<ItemData>
    <Rows>
        <VRow ID="ba3c4fd9-6691-49ee-996a-9841810d8264" ItemType="Pulse" />
        <VRow ID="401682df-9839-456e-b08f-563361392530" ItemType="Height" />
        <VRow ID="c39ee7ab-7217-4750-bc0d-9cec495fdd41" ItemType="Weight" />
        <VRow ID="effabbcb-718f-4b0c-8f81-6d0bf4ba5028" ItemType="BloodPressure" />
        <VRow ID="eb6451d3-646a-4447-919a-f778daf6fdc5" ItemType="BodyMassIndex" />
    </Rows>
    <Groups>
        <VGroup ID="4535bf31-da00-47e8-8975-f21a1b3fdb62" ReadingDate="2009-07-24T14:26:28.50Z">
            <Notes />
            <Readings>
                <VitalReading ID="af0af8e1-41d4-4cc9-a042-7a33876b643e" ItemType="Pulse">
                    <Values>
                        <ValueItem Type="{302DABB8-BF22-4da1-BE2F-8213F8A191D8}" ID="f46322d9-2e15-4542-ad33-d37395dfe31b" Initialized="True">
                            <Pulse>80</Pulse>
                        </ValueItem>
                    </Values>
                </VitalReading>                 
            </Readings>
        </VGroup>
    </Groups>
</ItemData> 
```

谁能建议我解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-02-22T12:39:57.253

您可能不知道每次运行将导入多少条记录。因此，行计数对于能够迭代每个 XML 行是必不可少的。在 while 循环中，我们必须将行索引加一以检索当前 XML 行。可以使用方括号 [n] 获取一个特定的行，其中 n 是 v_row_index。最后一个正斜杠后的 @* 告诉 ExtractValue() 获取节点的全部内容。然后我们可以以与行相同的方式访问每个属性，再次使用方括号 [n]。我在这里使用的 Insert 语句语法不包括列名。因此，每个参数都按顺序插入。

```
 declare v_row_index int unsigned default 0;   
    while v_row_index < v_row_count do                
        set v_row_index = v_row_index + 1;        
        set v_xpath_row = concat(node, '[', v_row_index, ']/@*');

        insert into applicants values (
            extractValue(xml_content, concat(v_xpath_row, '[1]')),
            extractValue(xml_content, concat(v_xpath_row, '[2]')),
            extractValue(xml_content, concat(v_xpath_row, '[3]'))
        );
    end while;
Here is the full proc code:

DELIMITER $$
CREATE DEFINER=`root`@`localhost` PROCEDURE `import_applicant_xml`(path varchar(255), node varchar(255))
BEGIN
    declare xml_content text;
    declare v_row_index int unsigned default 0;   
    declare v_row_count int unsigned;  
    declare v_xpath_row varchar(255); 

    set xml_content = load_file(path);

    -- calculate the number of row elements.   
    set v_row_count  = extractValue(xml_content, concat('count(', node, ')')); 

    -- loop through all the row elements    
    while v_row_index < v_row_count do                
        set v_row_index = v_row_index + 1;        
        set v_xpath_row = concat(node, '[', v_row_index, ']/@*');
        insert into applicants values (
            extractValue(xml_content, concat(v_xpath_row, '[1]')),
            extractValue(xml_content, concat(v_xpath_row, '[2]')),
            extractValue(xml_content, concat(v_xpath_row, '[3]'))
        );
    end while;
END
Performing a Test Run

Calling the proc is just a matter of using the call command with the proc name and two input parameters.   (Remember to escape backslashes in the file path on Windows platforms.)

MySQL> call import_applicants_xml('C:\\applicants1.xml', '/applicant_list/applicant');
MySQL> select * from applicants;
+---+----------+-------------+
 |1  |Rob       |Gravelle     |
 +---+----------+-------------+
 |2  |Al        |Bundy        |
 +---+----------+-------------+
 |3  |Little    |Richard      |
 +---+----------+-------------+
 3 row(s) returned 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:24:47.803

这是一个教程，它清楚地解释了如何使用 MySQL 预定义的 xml 函数

[参考链接](http://dev.mysql.com/doc/refman/5.1/en/xml-functions.html)

其他 stackoverflow 显示这个[stackoverflow 链接](https://stackoverflow.com/questions/902678/parse-an-xml-string-in-mysql)

# github - 在不同的分支上关闭 GitHub 问题

> ID：14154054
> 
> 赞同：18
> 
> 时间：2013-01-04T09:06:21.103
> 
> 标签：github, branch, issue-tracking

我*不在**Master*分支上工作。我正在研究另一种*newFeature*，它也发布在 github 上。

我知道在主分支上工作时如何关闭问题：`Closes #XXX`.

但是，这仅在我在主分支上工作时才有效，如果我切换到另一个分支或另一个分支并使用`Closes #XXX`它进行提交并不会解决问题。

我的问题是：有可能做到这一点，你是怎么做到的？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-04T16:25:06.987

我很确定 github 问题与分支无关。

您是在谈论本地分支机构还是跟踪分支机构？如果您没有专门跟踪 github 上的分支，则不会推送该分支 - 因此 github 将看不到您的`close #XXX`命令。这是 progit 书[http://git-scm.com/book/en/Git-Branching-Remote-Branches中有关远程分支的一些信息](http://git-scm.com/book/en/Git-Branching-Remote-Branches)

## 更新

我将此问题通过电子邮件发送给 github 支持人员，他们确认这是预期行为。这是我从他们那里得到的回复：

> 这是因为我们最近做出的改变。仅当提交合并到存储库的默认分支时，问题才会关闭。我很抱歉造成混乱。

# c# - Monodroid：从 assets 或 Resources/drawable 中的文件设置 imageview 图像以配置 SampleSize

> ID：14154056
> 
> 赞同：0
> 
> 时间：2013-01-04T09:06:33.730
> 
> 标签：c#, android, xamarin.android

我想在将图像设置为`imageview`. 问题是，如果我将图像直接设置为`imageview`. （因为需要太多内存！？）

这是我的代码：

```
ImageView iv = FindViewById<ImageView>(Resource.Id.imagePusher);
Android.Graphics.BitmapFactory.Options options = new Android.Graphics.BitmapFactory.Options();
options.InSampleSize = 2;

Android.Graphics.Bitmap bMap = Android.Graphics.BitmapFactory.DecodeFile("the_path_I_want_to_know/image.jpg", options);

iv.SetImageBitmap(bMap); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:05:56.273

感谢 Candide 的帮助，现在它可以使用以下代码：

```
ImageView iv = FindViewById<ImageView>(Resource.Id.imagePusher);

Android.Graphics.BitmapFactory.Options options = new Android.Graphics.BitmapFactory.Options();
options.InSampleSize = 2;

Stream bitmap = Assets.Open("myimage.jpg");

Android.Graphics.Bitmap bMap = Android.Graphics.BitmapFactory.DecodeStream(bitmap, null, options);

iv.SetImageBitmap(bMap); 
```

# networking - 服务原语如何连接层

> ID：14154058
> 
> 赞同：-1
> 
> 时间：2013-01-04T09:06:52.873
> 
> 标签：networking

服务原语如何连接层？我的意思是我知道每一层都为它上面的层提供服务。但我只是不明白它是如何工作的。假设我们有一个简单的“连接，发送”服务，它们是如何工作的以及它们之间是什么？我在大多数书中看到它们看起来像是在两台不同的机器而不是层之间工作。我的意思是在服务器和客户端之间建立连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:43:01.793

在网络链接中，总是有 2 个活动方，每个活动方都根据[OSI 模型](http://en.wikipedia.org/wiki/OSI_model)独立实现网络堆栈（我假设您指的是这个网络架构）。

对于每个参与方，网络堆栈由上述链接中描述的层组成。每一层都必须为其上一层提供服务（根据规范），并且可以使用下一层的服务（根据规范）。

每一层都实现了不同的协议来维护与第二参与方中相应层的链接。例如，`MAC layer`与 a交谈`MAC layer`和`transport layer`与 a 交谈`transport layer`。

数据包发送从`application layer`（网络堆栈的上层）开始，下到传输层，然后到网络层，以此类推，直到物理层。每层添加与该层相关的特定数据。`Physical layer`通过介质（电缆、空气或其他任何方式）将数据发送给另一方。当接收到时，过程是相反的：接收器的物理层将数据向上传播到堆栈，直到到达应用层。在接收到数据后，每一层都会剥离与层相关的数据（由发送者的网络堆栈中的相应层添加）并将数据包向上传播直到到达应用层。

# android - 如何更改db文件存储的位置

> ID：14154065
> 
> 赞同：-3
> 
> 时间：2013-01-04T09:07:24.397
> 
> 标签：android, android-ndk, android-sqlite

> **可能重复：**
> [如何更改android数据库存储路径？](https://stackoverflow.com/questions/3911123/how-to-change-the-android-database-storage-path)

如果我的应用程序名为，你好，那么 db 文件将存储在`/data/hello/data/database`. 现在，我想更改要存储文件的位置。我是否更改了 android 操作系统的来源？或任何其他想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:14:40.540

在所需路径中创建数据库，如下所示：

```
 File db = new File(DB_PATH, DB_NAME); 
```

在哪里

```
 DB_PATH =  Environment.getExternalStorageDirectory()//if you want to create a database in SD Card
  DB_NAME = "hello.db"; 
```

# asterisk - 如何获取通话时间并将其保存到拨号计划中的变量中？

> ID：14154067
> 
> 赞同：3
> 
> 时间：2013-01-04T09:07:35.817
> 
> 标签：asterisk

```
exten => 3333,10,hangup

exten => 3333,11,Set(x=${CDR(billsec)})

exten => 3333,12,noop(${x}) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T17:37:32.637

呼叫因“HangUp()”命令而终止，呼叫处理停止。结果，没有达到优先级 11 和 12。但是，我们可以使用特殊的扩展“h”来“延长”挂断条件之后的通话寿命。请尝试按如下方式更改您的代码：

```
exten => 3333,10,HangUp()

exten => h,1,Set(x=${CDR(billsec)})
 same => n,NoOp(${x}) 
```

...让我知道这是否适合你。

推荐阅读：[https ://wiki.asterisk.org/wiki/display/AST/Handling+Special+Extensions](https://wiki.asterisk.org/wiki/display/AST/Handling+Special+Extensions)

# visual-c++ - c ++编译错误/语法错误？错误原因未知

> ID：14154069
> 
> 赞同：0
> 
> 时间：2013-01-04T09:07:48.443
> 
> 标签：visual-c++

所以老实说，我不知道我的代码有什么问题。任何建议都会有所帮助。查看我评论的代码部分（朝向中间）。计算机给了我一个错误，说应该是“；”。支架有问题，或者我在其他地方搞砸了，只是找不到。

```
//Experiment2
//Creating functions and recalling them.
#include <iostream>
using namespace std;

void a()
{
cout<<"You try running but trip and fall and the crazy man kills you!!!!                     HAAHAHAHHAHA.";
}

void b()
{
cout<<"You stop drop and roll and the crazy man is confused by this and leaves you alone!";
}

void c()
{
cout<<"you try fighting the man but end up losing sorry!";
}

int main()
{
int a;
int b;
int c;
int d;
a=1;
b=2;
c=3;

cout<< "Once upon a time you was walking to school,\n";
cout<< " when all of the sudden some crazy guy comes running at you!!!!"<<endl;
cout<< " (This is the begining of your interactive story)"<<endl;
cout<< "Enter in the number according to what you want to do.\n";
cout<< " 1: run away, 2:stop drop and roll, or 3: fight the man."<<endl;
cin>>d;
void checkd()
//i dont know whats wrong with the bracket! the computer gives me an error saying expected a";"
{
    if(d==1)

    {
        void a();
    }

    if(d==2)

    {
        void b();
    }

    if(d==3)

    {
        void c();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:10:36.260

您不能在另一个函数中定义一个函数。您在函数`checkd()`内部定义了一个`main`函数。

将函数体移到外部，`main`然后从以下位置调用函数`main`：

```
checkd(d); 
```

可能，您还希望函数采用它需要比较的参数。

还，

```
void a(); 
```

不调用函数`a()`它只是声明函数，调用你需要的函数：

```
a(); 
```

* * *

```
void checkd(int d)

{
    if(d==1)

    {
        a();
    }

    if(d==2)

    {
        b();
    }

    if(d==3)
    {
        c();
    }
}
int main()
{
    ....
    ....
    cout<< " 1: run away, 2:stop drop and roll, or 3: fight the man."<<endl;
    cin>>d;
    checkd();

    return 0;
} 
```

# javascript - 衡量 Javascript 性能

> ID：14154071
> 
> 赞同：4
> 
> 时间：2013-01-04T09:07:58.473
> 
> 标签：javascript, jquery, performance, optimization, profiling

我正在尝试对我们的前端进行全面分析，我想知道是否有任何工具可以自动测量 Javascript。

例如：

*   执行功能（无需我手动将日期对象放在之前/之后来记录）
*   我页面上的哪个脚本最慢以及为什么
*   找出我需要优化的功能
*   我可以做任何 jQuery 改进吗（除了通过 John Resig 的`jquery-profile.js`）
    *   我可以使用更好的选择器
    *   在某些对象上记忆
    *   使用更好的功能（例如：使用 find 因为它更快）

除了 Firebug、Chrome 开发工具、Yslow/Page speed 插件等之外，我几乎正在为我的 JS 寻找一个分析器（以及一些也可以分析 jQuery 的东西）。我正在寻找比 JSlint 更好的东西或jsPerf。

我在我的应用程序上运行了 New Relic，但它并没有告诉我我的脚本在哪里缺少。

我希望有一种比手动更简单的方法来分析我的 JS。我需要一个可以进行全面分析并为我提供包含指标的报告的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T09:19:24.937

我想你正在寻找这样的东西：

[https://developers.google.com/web-toolkit/speedtracer/](https://developers.google.com/web-toolkit/speedtracer/)

从文档介绍到此：

> 使用 Speed Tracer，您可以更好地了解您的应用程序中花费的时间。这包括由 JavaScript 解析和执行、布局、CSS 样式重新计算和选择器匹配、DOM 事件处理、网络资源加载、计时器触发、XMLHttpRequest 回调、绘画等引起的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-27T03:01:02.187

我最近遇到了这个，应该有助于衡量你的 javascript 代码性能 - [http://www.html5rocks.com/en/tutorials/webperformance/usertiming/](http://www.html5rocks.com/en/tutorials/webperformance/usertiming/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-07T09:39:19.060

您还可以查看 Yahoo [Boomrang](https://github.com/yahoo/boomerang)提供的 javascript 库。它是捕获信标服务器上的用户体验并对其进行分类/分析的绝佳工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-26T12:41:37.380

这是我创建的一个工具：http: [//yellowlab.tools](http://yellowlab.tools)

它使用 PhantomJS 加载页面并在页面加载时分析许多内容。启动测试，然后单击“JS Timeline”选项卡。您将找到与 DOM 交互的每个 JS 函数的日志，包括 jQuery 函数。

我用它来为我的客户审核 JS 代码，当您需要解开一些意大利面条代码或了解一些缩小的第三方小部件时，它是最好的现有工具！

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-04T09:14:56.073

我真的怀疑您是否可以自动执行此操作，否则聘请高级开发人员来识别此类问题是没有意义的 :) 您可以做的是使用 Chrome 开发工具并使用 CPU 分析器和时间线工具手动检查您的页面，以查看正在运行的内容缓慢或造成内存泄漏的原因。

祝你好运

# php - 如何从php中的数组中获取具有相同值的一组键

> ID：14154072
> 
> 赞同：0
> 
> 时间：2013-01-04T09:08:00.877
> 
> 标签：php, arrays

我想知道所有值相同的键。

我有以下数组：

```
[monday] => 10:00 - 11:00, 
[tuesday] => 11:00 - 12:00,
[wednesday] => 10:00 - 11:00,
[friday] => 10:00 - 11:00,
[saturday] => 11:00 - 12:00,
[sunday] => 14:00 - 15:00, 
```

周一/周三/周五 = 10:00 - 11:00。

周二/周六 = 11:00 - 12:00。

星期日 = 14:00 - 15:00。

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T09:12:54.150

您可以执行一个简单的`foreach`循环并根据值加入一个新数组：

```
<?php

$worktimes = array(
    'monday' => '10:00 - 11:00', 
    'tuesday' => '11:00 - 12:00',
    'wednesday' => '10:00 - 11:00',
    'friday' => '10:00 - 11:00',
    'saturday' => '11:00 - 12:00',
    'sunday' => '14:00 - 15:00'
);

$combined = array();
foreach ( $worktimes as $key => $value ) {
    $combined[$value][] = $key;
}

print_r( $combined );

?> 
```

现在你有了一个新的数组来保存`key`所有`values`匹配它的东西。

# c - 如何回到父进程....？

> ID：14154074
> 
> 赞同：-3
> 
> 时间：2013-01-04T09:08:09.723
> 
> 标签：c

如何从正在运行另一个程序（在 while 循环中）的子进程（使用 exec 调用）返回父进程。

示例代码在这里

```
do
{
     if(fork() == 0)
     { 
        exec("running a program in while loop..") 
     }
     else
     {
        wait();
        printf("do you want to cont..\n"); // bk pt. 
        scanf(" %c",ch); //yes/no           
     }
}while(ch == 'y'); 
```

现在，如果我运行上面的 pgm..its 执行 exec 并运行另一个 pgm..但我想切换到父进程并从 wait() 之后的语句继续；。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:11:01.263

您不能，因为 exec* 函数将程序代码替换为作为参数传递的代码。只需使用叉子（和刀）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:11:16.817

你不需要“切换”，在创建一个孩子之后，你有*两个* 并行执行的线程（至少从逻辑上讲）。

如果子进程退出，父进程应该继续执行 之后的代码`wait()`，假设这确实是对`[wait()](http://linux.die.net/man/2/wait)`函数的有效调用。

# port - 如何仅通过一个端口使用 ftp？

> ID：14154080
> 
> 赞同：1
> 
> 时间：2013-01-04T09:08:37.897
> 
> 标签：port

```
listen=80
port_enable=yes
pasv_enable=no 
```

我已经在我的服务器中设置了一个 ftp 服务器。我希望我的同学使用宿舍的ftp。但是80端口是唯一可以使用的。20,21端口和其他端口都无法使用。我尽力使它工作。但是我失败了。请告诉我如何配置只有80的ftp端口。谢谢 :) 我禁用了 pasv 模式。对吗？我的服务器是基于centos的。我使用vsftpd。我已经关闭了 iptables 和 seLinux。防火墙在我的服务器前面。此防火墙禁用其他端口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:15:02.063

恐怕你无法使用真正的 FTP 来做到这一点 - 不幸的是，FTP 协议对防火墙不是很友好，因为它确实需要一个命令通道端口（默认为 20）和数据端口范围（尽可能多的端口）支持并行连接），即使在被动模式下也是如此。

为了解决您的问题，您可以设置 WebDAV 服务，例如使用[Apache mod_dav](http://httpd.apache.org/docs/2.2/mod/mod_dav.html)。

Windows 支持开箱即用的 WebDAV。WebDAV 允许客户端像真正的文件共享一样挂载共享，并读取/写入内容。对你来说最好的消息，它只需要一个端口（比如 80）就可以工作。

# asp.net-mvc-3 - 如何使用asp.net mvc 3在注册按钮单击时重定向到贝宝页面

> ID：14154081
> 
> 赞同：0
> 
> 时间：2013-01-04T09:08:38.067
> 
> 标签：asp.net-mvc-3, paypal, payment-gateway, paypal-ipn

当用户单击 asp.net mvc 3 上的注册按钮时，我需要重定向到 paypal 付款页面，并且我需要将 pay pal 页面与我的 mvc 项目集成我该怎么做。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:29:11.110

你谷歌这个问题吗？

[在 ASP.NET MVC 站点上集成 PayPal 的简单解决方案](https://stackoverflow.com/questions/4029624/simple-solution-to-integrate-paypal-on-asp-net-mvc-site)

[带有 ASP.NET MVC 的 PayPal API](https://stackoverflow.com/questions/4494745/paypal-api-with-asp-net-mvc)

[http://www.superstarcoders.com/blogs/posts/paypal-with-asp-net-mvc.aspx](http://www.superstarcoders.com/blogs/posts/paypal-with-asp-net-mvc.aspx)

# python - 使用 eval 时出现“SyntaxError：无效语法”

> ID：14154084
> 
> 赞同：-3
> 
> 时间：2013-01-04T09:08:54.707
> 
> 标签：python, dictionary

我有非常奇怪的语法错误。在第一次代码工作正常，但之后它不工作。

```
MailName={}
string = ""
#pdb.set_trace()
fp=open("C:\\Users\\Dvir\\Dropbox\\chat\\cred.txt","a+")
#pdb.set_trace()

try:
    string=fp.read()

except:
    string=""

if (string !=""):
    MailName = eval(string) 
```

有问题的代码是：

```
MailName = eval(string) 
```

语法错误：

> > ```
> > MailName = eval(string)   File "<string>", line 2
> > {'familyname': 'josh', 'pass': 'UGGlXJCpl', 'email': 'chat@gmail.com', 'n ame': 'justin'} 
> > ```
> 
> ```
> ^ SyntaxError: invalid syntax 
> ```

当我第一次使用那部分代码时，它可以完美地工作，但之后它会向我显示语法错误，这很奇怪，因为它是一个有效的字典。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T09:12:55.373

我会将数据存储在 JSON 中并使用它加载它[`json.load(file object)`](http://docs.python.org/2/library/json.html#json.load)- 这比使用更安全`eval()`

* * *

[从这个答案](https://stackoverflow.com/a/661128/1129194)中引用：

> eval() 将允许恶意数据破坏您的整个系统，杀死您的猫，吃掉您的狗并与您的妻子做爱。
> 
> 最近在 python-dev 列表上有一个关于如何安全地做这种事情的线程，结论是：
> 
> ```
> It's really hard to do this properly.
> It requires patches to the python interpreter to block many classes of attacks.
> Don't do it unless you really want to. 
> ```

* * *

您可以按如下方式格式化文本文件：（cred.txt）

```
{
    "familyname": "josh", 
    "email": "chat@gmail.com", 
    "name": "justin", 
    "pass": "UGGlXJCpl"
} 
```

然后像这样加载它：

```
>>> with open('cred.txt', 'rb') as f:
>>>     data = json.load(f)
>>>     print data
{'familyname': 'josh', 'pass': 'UGGlXJCpl', 'email': 'chat@gmail.com', 'name': 'justin'} 
```

# c# - 使用 xml 替换另一个更大的 xml C# 中的节点

> ID：14154086
> 
> 赞同：-3
> 
> 时间：2013-01-04T09:09:10.093
> 
> 标签：c#, xml

嗨，我必须将某些节点从 1 XML 替换为更大的`web.config`.

```
<?xml version="1.0" encoding="Windows-1252" standalone="yes"?>
  <VFPData>
    <site>
      <sitename></sitename>
      <appname></appname>
      <cookie>.cookiename</cookie>
      <host></host>
      <port>1234</port>
      <database></database>
      <userid></userid>
      <password></password>
    </site>
  </VFPData> 
```

所以我必须复制过来`<port>`说`web.config`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:33:58.160

如果要将两个文件都视为文本文件，可以使用 StreamWriter 和 StreamReader。

```
using System;
using System.IO;

class Test 
{
    public static void Main() 
    {
        string path = @"c:\temp\MyTest.txt";
        // This text is added only once to the file. 
        if (!File.Exists(path)) 
        {
            // Create a file to write to. 
            using (StreamWriter sw = File.CreateText(path)) 
            {
                sw.WriteLine("Hello");
                sw.WriteLine("And");
                sw.WriteLine("Welcome");
            }   
        }

        // This text is always added, making the file longer over time 
        // if it is not deleted. 
        using (StreamWriter sw = File.AppendText(path)) 
        {
            sw.WriteLine("This");
            sw.WriteLine("is Extra");
            sw.WriteLine("Text");
        }   

        // Open the file to read from. 
        using (StreamReader sr = File.OpenText(path)) 
        {
            string s = "";
            while ((s = sr.ReadLine()) != null) 
            {
                Console.WriteLine(s);
            }
        }
    }
} 
```

[来源](http://msdn.microsoft.com/en-gb/library/system.io.file.appendtext.aspx)

是的，这涵盖了流，并且非常适合文本。但是，您正在编辑 XML，因此可以更进一步。由于两者都在 XML 中，您可以使用[XDocument](http://msdn.microsoft.com/en-us/library/cc838349%28v=vs.95%29.aspx)对象（这将允许 Linq）。这将允许您读取原始流，将要复制的节点存储为变量，然后打开 web.config 文件并添加节点。

# mysql - 如果最大查询返回 NULL，则返回值“无行”

> ID：14154087
> 
> 赞同：6
> 
> 时间：2013-01-04T09:09:19.417
> 
> 标签：mysql, null, max

我有一张桌子。从那我需要返回一个字段的最大值。如果该行为空或不满足某些条件，则查询将返回`NULL`。如果最大值返回 a ，我需要返回 NO ROWS `NULL`。我该怎么做？我试过[IS NULL](http://dev.mysql.com/doc/refman/5.0/en/working-with-null.html)，[IF](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html)，[COALESCE](http://dev.mysql.com/doc/refman/5.6/en/comparison-operators.html#function_coalesce)但我无法得到我需要的东西。

对不起，是我的错。我不是说“NO ROWS”这个词，更清楚地说，如果它返回，我不想得到任何行（不应该返回任何行）`NULL`。我再次为我的错误道歉。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-04T10:26:35.273

你必须使用 HAVING，像这样：

```
SELECT MAX(field)
FROM yourtable
-- GROUP BY somefileds
HAVING MAX(field) is not null 
```

HAVING 为聚合列的值指定条件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T09:19:26.007

试试这个 ：：

```
SELECT IFNULL(MAX(field), 'NO ROWS') FROM table 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-04T09:18:05.377

在您的选择中使用 IF 函数

`SELECT IF(MAX(field) IS NULL, 'NO ROWS', MAX(field)) FROM table`

# extjs - 按钮未显示在 ExtJS 消息框中

> ID：14154089
> 
> 赞同：1
> 
> 时间：2013-01-04T09:09:22.370
> 
> 标签：extjs

我是 ExtJS 初学者，下面是从教程中截取的非常简单的代码片段：

```
<head>
 <title>Getting Started Example</title>
 <link rel="stylesheet" type="text/css"
   href="extjs/resources/css/ext-all.css" />
 <script src="extjs/adapter/ext/ext-base.js"></script>
 <script src="extjs/ext-all-debug.js"></script>
 <script>
  Ext.onReady(function(){

   Ext.Msg.show({
    title:'Milton',
    msg:'Have you seen my stapler?',
    buttons:{
    yes:true,
    no:true,
    cancel:true
       }
     });
  });
</script>
</head> 
```

我突然想到消息框中不会显示任何按钮，任何专家可以帮助我调试吗？我检查了很多次，代码与教程完全相同。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:25:24.690

试试这个 -

```
Ext.onReady(function(){

       Ext.Msg.show({
        title:'Milton',
        msg:'Have you seen my stapler?',
        buttons: Ext.MessageBox.YESNOCANCEL
         });
  }); 
```

# html - HTML5 网络摄像头允许事件处理程序

> ID：14154091
> 
> 赞同：1
> 
> 时间：2013-01-04T09:09:29.253
> 
> 标签：html, events, event-handling, webcam

有什么方法可以捕捉用户使用 chrome 中的 HTML5 网络摄像头点击“允许”摄像头的事件？如果是这样，你能给我举个例子吗？

更具体地说，我想知道用户是否单击以允许或拒绝使用网络摄像头。例如，当用户单击“允许”时，我想在屏幕上显示一条大消息，说明他正在允许网络摄像头。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:20:02.783

不，你不能听那些点击事件。您甚至不能假设显示了这样的对话框，或者单击事件将是选择选项的原因 - 它可以很容易地成为某种基于滑动的 UI 或手机或平板电脑。请求许可的实际机制是规范有意留给实现者的实现细节。

但是你可以假设如果你的成功回调`getUserMedia()`被调用，那么用户已经选择了允许。如果你[在错误回调中得到](http://dev.w3.org/2011/webrtc/editor/getusermedia.html#navigatorusermediaerror-and-navigatorusermediaerrorcallback)[一个`PERMISSION_DENIED`](http://dev.w3.org/2011/webrtc/editor/getusermedia.html#navigatorusermediaerror-and-navigatorusermediaerrorcallback)，那么你可以确定用户选择了拒绝。

# android - 为什么 ExpandableListView 多次调用 getView

> ID：14154092
> 
> 赞同：4
> 
> 时间：2013-01-04T09:09:40.890
> 
> 标签：android, performance, expandablelistadapter

我不知道为什么我的可扩展组件多次调用 getChildView() 和 getGroupView()。该问题会影响应用程序的性能。请帮帮我，这是这个适配器。

```
public class ResultsExpandableAdapter extends BaseExpandableListAdapter {
private Context mContext;
private ArrayList<TraceGroupObject> groups;
private int displayMode;
private String TAG = "EXPAND LIST NUTRIENT";

public ResultsExpandableAdapter(Context context,
        ArrayList<TraceGroupObject> groups, int displayMode) {
    this.mContext = context;
    this.groups = groups;
    this.displayMode = displayMode;
}

@Override
public Object getChild(int groupPosition, int childPosition) {
    ArrayList<TraceObject> group = groups.get(groupPosition).getItems();
    return group.get(childPosition);
}

@Override
public long getChildId(int groupPosition, int childPosition) {
    // TODO Auto-generated method stub
    return childPosition;
} 
```

代码getChildView

```
// bug
@Override
public View getChildView(int groupPosition, int childPosition,
        boolean isLastChild, View convertView, ViewGroup parent) {
    // Log.i(TAG, "Child View (" + groupPosition + "," + childPosition
    // + ") ->" + convertView);
    final TraceObject trace = (TraceObject) getChild(groupPosition,
            childPosition);
    View row;
    if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater) mContext
                .getSystemService(mContext.LAYOUT_INFLATER_SERVICE);
        row = inflater.inflate(R.layout.expandable_row_item, null);
        // Log.i(TAG, "Created View ->" + convertView);
    } else
        row = convertView;

    // init tracebar
    ...

    // implement
    return row;
} 
```

嗨嗨嗨

```
@Override
public int getChildrenCount(int groupPosition) {
    ArrayList<TraceObject> rows = groups.get(groupPosition).getItems();
    return rows.size();
}

@Override
public Object getGroup(int groupPosition) {
    // TODO Auto-generated method stub
    return groups.get(groupPosition);
}

@Override
public int getGroupCount() {
    // TODO Auto-generated method stub
    return groups.size();
}

@Override
public long getGroupId(int groupPosition) {
    // TODO Auto-generated method stub
    return groupPosition;
} 
```

ac ac getGroupView

```
@Override
public View getGroupView(int groupPosition, boolean isExpanded,
        View convertView, ViewGroup parent) {
    // Log.i(TAG, "Group View "+groupPosition +"->" +convertView);
    TraceGroupObject group = (TraceGroupObject) getGroup(groupPosition);

    // create view
    View row;
    if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater) mContext
                .getSystemService(mContext.LAYOUT_INFLATER_SERVICE);
        row = inflater.inflate(R.layout.expandable_group_item, null);
        // Log.i(TAG, "Created View ->" +convertView);
    } else
        row = convertView;

    // change icon expand
    ...

    return row;
}

@Override
public boolean hasStableIds() {
    // TODO Auto-generated method stub
    return true;
}

@Override
public boolean isChildSelectable(int groupPosition, int childPosition) {
    // TODO Auto-generated method stub
    return false;
} 
```

# emacs - sql-set-sqli-buffer "没有合适的 sqli 缓冲区"

> ID：14154093
> 
> 赞同：10
> 
> 时间：2013-01-04T09:09:53.863
> 
> 标签：emacs, elisp, sql-mode

我是 emacs 的新手，不太习惯 lisp，所以这可能是一个新错误，但我找不到解决方案。

我尝试安装 sql 模式以与我的 mysql DB 交互。

为此，我修改了 sql.el 文件以精确设置 sql-user、sql-password、sql-database、sql-server 和 sql-port 选项，并在 sql-mysql-login-params 中添加了端口

我启动 emacs 和 Mx sql-mysql

模式更改为 SQLi[MySQL]:run

我更改缓冲区，Mx 查找文件 myfile.sql

此缓冲区处于 SQL[ANSI] 模式

然后我抄送一条 sql 语句并出现错误“没有启动 SQL 进程”

正如某处所说，我 Mx sql-set-sqli-buffer 但我有错误“没有合适的 SQLi 缓冲区”

为此，我找不到解决方案......我错过了什么？

我使用 emacs 24.2.1

编辑：当我直接在 SQLi[MySQL]:run 缓冲区中执行 select 语句时，它会按预期返回行...

其他缓冲区不应该处于 SQL[MySQL] 模式吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-14T16:39:59.057

我认为你是对的，sql-set-sqli-buffer 没有找到合适的 SQLi 缓冲区的原因是因为它在遍历打开的缓冲区列表时考虑了 SQL 模式缓冲区的产品子类型。

这是我的 sql.el 副本中的缓冲区测试代码，它与我的 emacs 一起提供（版本 - GNU emacs 24.2.1

```
(defun sql-find-sqli-buffer (&optional product connection)
  "Returns the name of the current default SQLi buffer or nil.
In order to qualify, the SQLi buffer must be alive, be in
`sql-interactive-mode' and have a process."
  (let ((buf  sql-buffer)
        (prod (or product sql-product)))
    (or
     ;; Current sql-buffer, if there is one.
     (and (sql-buffer-live-p buf prod connection)
          buf)
     ;; Global sql-buffer
     (and (setq buf (default-value 'sql-buffer))
          (sql-buffer-live-p buf prod connection)
          buf)
     ;; Look thru each buffer
     (car (apply 'append
                 (mapcar (lambda (b)
                           (and (sql-buffer-live-p b prod connection)
                                (list (buffer-name b))))
                         (buffer-list))))))) 
```

主要用于测试资格的两个值是缓冲区和标识产品类型的符号。此符号作为参数传入，或默认为 sql-product 的值。似乎 sql-product，除非以其他方式设置，否则默认为 'ansi，这就是为什么您的编辑缓冲区是 SQL [ANSI]。

`M-x sql-set-product`在尝试将 SQLi 缓冲区与查询缓冲区关联之前，您应该尝试在此缓冲区中设置产品类型（例如，使用）。如果您希望默认值始终为“mysql”，您可以在初始化文件中设置它，或者使用自定义它`M-x customize-variable`

SQL 模式是相当有序的，依赖于使用正确的局部变量设置缓冲区，以便有一个有效的关联 iSQL 会话。

我用来启动 iSQL 缓冲区并在我已经编辑的另一个缓冲区中进行查询的典型序列如下

1.  切换到包含 SQL 文本的缓冲区，可能通​​过访问文件，或使用`C-x b`创建临时缓冲区。
2.  将此缓冲区设置为正确的 SQL 类型，`M-x sql-set-product`然后在提示符处输入已知类型，例如“mysql”。
3.  点击`C-c <TAB>`（绑定到`sql-product-interactive`）以切换到与此缓冲区关联的 iSQL 缓冲区，可能通​​过定位或创建新的 comint 进程

可能值得阅读`M-x sql-help`命令的输出。SQL 模式的文档非常简单。我已经弄清楚了我对它的了解很少，主要是通过阅读源代码。

# android - 图像加解密

> ID：14154096
> 
> 赞同：1
> 
> 时间：2013-01-04T09:10:04.667
> 
> 标签：android

我想加密和解密图像，

该活动将有两个用于加密和解密的按钮

主要活动是

```
 ctx = this;

     btn_Dec = (Button)findViewById(R.id.btn_Dec);
            btn_In = (Button)findViewById(R.id.btn_In);
            btn_Dec.setOnClickListener(btnDecListner);
            btn_In.setOnClickListener(btnInListner);

        }

        public OnClickListener btnInListner = new OnClickListener() {

            public void onClick(View v) {
                CryptClass simpleCrypto = new CryptClass();
                 System.out.println("Start Encrypting");
                try {
                    // encrypt audio file send as second argument and corresponding key in first argument.
                      incrept = simpleCrypto.encrypt(KEY, getImageFile());

                      //Store encrypted file in SD card of your mobile with name vincent.mp3.
                    FileOutputStream fos = new FileOutputStream(new File("/sdcard/abc.jpg"));
                       fos.write(incrept);
                       fos.close();

                } catch (Exception e) {  
                    e.printStackTrace();
                }
            }
        };

           public OnClickListener btnDecListner = new OnClickListener() {

                public void onClick(View v) {
                    CryptClass simpleCrypto = new CryptClass();

                    try {

                        // decrypt the file here first argument is key and second is encrypted file which we get from SD card.
                        decrpt = simpleCrypto.decrypt(KEY, getImageFileFromSdCard());

                        //play decrypted audio file.
                        ///playMp3(decrpt);

                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                } 
            };

            /**
             * 
             * @return byte array for encryption.
             * @throws FileNotFoundException
             */

        public byte[]   getImageFile() throws FileNotFoundException
            {
              byte[] Image_data = null;
              byte[] inarry = null;

               AssetManager am = ctx.getAssets();
                try {
                    InputStream is = am.open("abc.jpg "); // use recorded file instead of getting file from assets folder.
                    int length = is.available();
                    Image_data = new byte[length];

                    int bytesRead;
                    ByteArrayOutputStream output = new ByteArrayOutputStream();
                    while ((bytesRead = is.read(Image_data)) != -1)
                    {
                        output.write(Image_data, 0, bytesRead);
                    }
                  inarry = output.toByteArray();

                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            return inarry;
            }

        /**
         * This method fetch encrypted file which is save in sd card and convert it in byte array after that this  file will be decrept.
         * @return byte array of encrypted data for decription.
         * @throws FileNotFoundException
         */
        public byte[]   getImageFileFromSdCard() throws FileNotFoundException
        {

          byte[] inarry = null;

            try {
                //getting root path where encrypted file is stored.
                File sdcard  = Environment.getExternalStorageDirectory();
                File file = new File(sdcard,"abc.jpg"); //Creating file object

                //Convert file into array of bytes.
                FileInputStream fileInputStream=null;
                byte[] bFile = new byte[(int) file.length()]; 
                fileInputStream = new FileInputStream(file);
                fileInputStream.read(bFile);
                fileInputStream.close();
                inarry = bFile;

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        return inarry;
        } 
```

还有另一个类执行密钥生成、加密、解密和所有这些操作的操作......

```
public  byte[] encrypt(String seed, byte[] cleartext) throws Exception {

    byte[] rawKey = getRawKey(seed.getBytes());
        byte[] result = encrypt(rawKey, cleartext);
      //  return toHex(result);
        return result;
}

public  byte[] decrypt(String seed, byte[] encrypted) throws Exception {
        byte[] rawKey = getRawKey(seed.getBytes());
        byte[] enc = encrypted;
        byte[] result = decrypt(rawKey, enc);

        return result;
}

//done
private  byte[] getRawKey(byte[] seed) throws Exception {
        KeyGenerator kgen = KeyGenerator.getInstance("AES");
        SecureRandom sr = SecureRandom.getInstance("SHA1PRNG");
        sr.setSeed(seed);
    kgen.init(128, sr); 
    SecretKey skey = kgen.generateKey();
    byte[] raw = skey.getEncoded();
    return raw;
} 

private  byte[] encrypt(byte[] raw, byte[] clear) throws Exception {
    SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
        Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
    byte[] encrypted = cipher.doFinal(clear);
        return encrypted;
}

private  byte[] decrypt(byte[] raw, byte[] encrypted) throws Exception {
    SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
        Cipher cipher = Cipher.getInstance("AES");
    cipher.init(Cipher.DECRYPT_MODE, skeySpec);
    byte[] decrypted = cipher.doFinal(encrypted);
        return decrypted;
} 
```

它显示在资产中找不到文件的错误...我已经将 abc.jpg 文件放在资产文件夹中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:32:20.120

通过使用解决了问题

```
 InputStream is = getAssets().open("abc.jpg"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:17:03.997

以下行中有一个额外的空白，

```
am.open("abc.jpg "); 
```

# orbeon - Orbeon 3.9.1 PE 工具箱中没有新的重复按钮

> ID：14154097
> 
> 赞同：0
> 
> 时间：2013-01-04T09:10:10.720
> 
> 标签：orbeon

我正在使用 Orbeon 3.9.1 PE。我不会在表单生成器中找到带有工具箱的“新重复”控件。我已经更改了 resources.xml，并且在表单生成器中获得了“新重复”控件标签。然后我在 toolbox.xml 中添加这段代码——

```
<xforms:group context="$current-top-level-block" ref="instance('fb-variables')/grids-triggers" appearance="xxforms:internal">
      <xhtml:div class="fb-tool">
            <fr:button appearance="full">
                <xforms:label>
                    <xhtml:img src="/apps/fr/style/images/silk/table_add.png" alt=""/>
                    <xhtml:span><xforms:output value="$form-resources/new-repeat/label"/></xhtml:span>
                </xforms:label>
                <xforms:action ev:event="DOMActivate">

                    <xforms:insert context="$current-top-level-block" nodeset="fr:section | fr:repeat | fr:grid"
                                   at="index('fb-section-content-repeat')" position="after"
                                   origin="......"/>

                </xforms:action>                  
            </fr:button>
     </xhtml:div>
</xforms:group> 
```

我在 model.xml 文件中找到了

对重复的焦点做出反应，但它是空的-- <

xforms:action ev:event="DOMFocusIn" ev:target="fb-section-content-grid-td-repeat" > TODO：这里有什么？<

/xforms:动作>

谁能建议我如何使用 orbeon 3.9.1 PE 在表单构建器中使用工具箱内的“新重复”控制按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:37:52.527

Form Builder 中的重复是[Orbeon Forms 4.0 的一项新功能](http://wiki.orbeon.com/forms/doc/developer-guide/release-notes/40#TOC-Scope-of-the-4.0-release)，因此您将无法在 3.9 中使用它们。在撰写本文时，4.0 的最终版本尚未发布，但您已经可以使用或试验[4.0 里程碑版本](http://www.orbeon.com/forms/download)。

# android - 如何在 Android 的 Notification 的 RemoteView 中设置 ImageView 的背景？

> ID：14154102
> 
> 赞同：1
> 
> 时间：2013-01-04T09:10:17.600
> 
> 标签：android, background, imageview, remoteview

我移植了Android的Notification，如何在Notification的RemoteView中设置ImageView的背景，并设置为透明？

我试过了

```
remoteViews.setInt(R.id.icon, "setBackgroundResource", 0x00000000); 
```

但它没有奏效。

我认为问题是我无法在另一个应用程序进程中从 Android 框架获取 R.id.yourFrame。所以上面的代码只适用于当前的小部件进程。

那么如何将编译后的 R.id.icon 作为 int 获取呢？我想以这种方式尝试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-24T08:40:38.587

您还可以使用以下方法为远程视图设置 ImageView 的背景

```
remoteView.setInt(R.id.imgViewFollowed, "setBackgroundResource", R.drawable.icon_followed); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T09:27:06.023

尝试这个

`remoteView.setBackgroundColor(0x0000FF00);`

或者

```
remoteView.setInt(R.id.yourFrame, "setBackgroundColor",
    android.R.color.transparent); 
```

或者

```
remoteView.setInt(R.id.yourFrame,"setBackgroundColor",
    android.graphics.Color.TRANSPARENT); 
```

您还可以通过在 XML 中添加以下代码来设置任何布局或任何视图或任何组件的背景透明：

```
android:background="@android:color/transparent" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-30T11:42:05.227

```
 RemoteViews views = new RemoteViews(context.getPackageName(),R.layout.activity_main);

views.setInt(R.id.image1, "setBackgroundResource", android.R.color.holo_blue_bright); 
```

它对我来说很好用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-04T03:32:32.523

首先，您需要通过以下方式更改视图的颜色

```
remoteview.setInt(R.id.viewId, "setBackgroundColor", color) 
```

然后您通过以下方式更新对 RemoteViews 的更改

```
val notificationManager: NotificationManager = getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager
notificationManager.notify(ID.SERVICE_ID, notification) 
```

希望对您有所帮助。

# android - 如何在 Android 中拍照、保存和获取照片

> ID：14154104
> 
> 赞同：9
> 
> 时间：2013-01-04T09:10:29.457
> 
> 标签：android, android-intent, bitmap, uri, android-camera

我一直在寻找拍摄照片的简单示例，并使用 URI 保存并检索照片以进行图像处理，我尝试了很多示例代码，但没有一个能顺利进行。

有人有示例代码吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-04T09:23:04.443

像这样定义一个变量

```
protected static final int CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE = 0; 
```

使用从android调用相机的代码。

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
imageUri = Uri.fromFile(new File(Environment.getExternalStorageDirectory(),"fname_" +        
                        String.valueOf(System.currentTimeMillis()) + ".jpg"));
intent.putExtra(android.provider.MediaStore.EXTRA_OUTPUT, imageUri);
startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE); 
```

并在调用它的类中覆盖 onActivityResult 函数并输入下面的代码。

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (resultCode == RESULT_OK) {
        if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {

            //use imageUri here to access the image

            Bundle extras = data.getExtras();

            Log.e("URI",imageUri.toString());

            Bitmap bmp = (Bitmap) extras.get("data");

            // here you will get the image as bitmap

        } 
          else if (resultCode == RESULT_CANCELED) {
            Toast.makeText(this, "Picture was not taken", Toast.LENGTH_SHORT);
           } 
         }

    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-04T09:23:52.943

有几个示例可以捕获图像并将其存储并打开它...

[1\. Android Camera API - 教程](http://www.vogella.com/articles/AndroidCamera/article.html)

[2.安卓开发者](http://developer.android.com/guide/topics/media/camera.html)

[3\. Github 上的相机示例](https://github.com/josnidhin/Android-Camera-Example)

[4\. 另一个例子](http://android-helper.blogspot.in/2012/04/android-camera-example.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-08T22:25:16.200

我有同样的问题。

我正在测试互联网上的一些代码，但找不到任何代码。然后，我从 developer.android 学习了一些基础代码。之后，我混合了两种不同的代码，我的一个工作了！来了！

```
public class MainActivity extends AppCompatActivity {

    static final int PICTURE_RESULT = 1;
    String mCurrentPhotoPath;
    ContentValues values;
    private Uri file;
    ImageView imageView;
    Bitmap help1;

    ThumbnailUtils thumbnail;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        imageView = (ImageView) findViewById(R.id.imageView);
        values = new ContentValues();
    }

    public void launch_camera(View v) {
        // the intent is my camera
        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        //getting uri of the file
        file = Uri.fromFile(getFile());

        //Setting the file Uri to my photo
        intent.putExtra(MediaStore.EXTRA_OUTPUT,file);

        if(intent.resolveActivity(getPackageManager())!=null)
        {
            startActivityForResult(intent, PICTURE_RESULT);
        }
    }

    //this method will create and return the path to the image file
    private File getFile() {
        File folder = Environment.getExternalStoragePublicDirectory("/From_camera/imagens");// the file path

        //if it doesn't exist the folder will be created
        if(!folder.exists())
        {folder.mkdir();}

        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
        String imageFileName = "JPEG_"+ timeStamp + "_";
        File image_file = null;

        try {
            image_file = File.createTempFile(imageFileName,".jpg",folder);
        } catch (IOException e) {
            e.printStackTrace();
        }

        mCurrentPhotoPath = image_file.getAbsolutePath();
        return image_file;
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if(requestCode == PICTURE_RESULT) {
            if(resultCode == Activity.RESULT_OK) {
                try {
                    help1 = MediaStore.Images.Media.getBitmap(getContentResolver(),file);
                    imageView.setImageBitmap( thumbnail.extractThumbnail(help1,help1.getWidth(),help1.getHeight()));
                }catch (Exception e){
                    e.printStackTrace(); 
                }
            }
        }
    }
} 
```

XML 文件只有一个 Button 和一个 ImageView 并且不要忘记在你的 android manifest 中声明权限：

```
<uses-feature android:name="android.hardware.camera"    android:required="true" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"  /> 
```

有关更多信息，建议： [https ://developer.android.com/training/camera/photobasics.html#TaskPhotoView](https://developer.android.com/training/camera/photobasics.html#TaskPhotoView) [https://www.youtube.com/watch?v=je9bdkdNQqg](https://www.youtube.com/watch?v=je9bdkdNQqg)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-04T09:22:04.227

please use the following code.

```
package com.example.stackoverflow;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.math.BigInteger;
import java.security.SecureRandom;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.view.View;
import android.widget.Button;
import android.widget.GridView;
import android.widget.ImageView;

public class MyCameraActivity extends Activity {
    private static final int CAMERA_REQUEST = 1888; 

    static String str_Camera_Photo_ImagePath = "";
    private static File f;
    private static int Take_Photo = 2;
    private static String str_randomnumber = "";
    static String str_Camera_Photo_ImageName = "";
    public static String str_SaveFolderName;
    private static File wallpaperDirectory;
    Bitmap bitmap;
    int storeposition = 0;
    public static GridView gridview;
    public static ImageView imageView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.ccccc);
        this.imageView = (ImageView)this.findViewById(R.id.imageView1);
        Button photoButton = (Button) this.findViewById(R.id.button1);
        photoButton.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                str_SaveFolderName = Environment
                        .getExternalStorageDirectory()
                        .getAbsolutePath()
                        + "/rajeshsample";
                str_randomnumber = String.valueOf(nextSessionId());
                wallpaperDirectory = new File(str_SaveFolderName);
                if (!wallpaperDirectory.exists())
                    wallpaperDirectory.mkdirs();
                str_Camera_Photo_ImageName = str_randomnumber
                        + ".jpg";
                str_Camera_Photo_ImagePath = str_SaveFolderName
                        + "/" + str_randomnumber + ".jpg";
                System.err.println(" str_Camera_Photo_ImagePath  "
                        + str_Camera_Photo_ImagePath);
                f = new File(str_Camera_Photo_ImagePath);
                startActivityForResult(new Intent(
                        MediaStore.ACTION_IMAGE_CAPTURE).putExtra(
                        MediaStore.EXTRA_OUTPUT, Uri.fromFile(f)),
                        Take_Photo);
                System.err.println("f  " + f);
            }
        });
    }

    // used to create randon numbers
    public String nextSessionId() {
        SecureRandom random = new SecureRandom();
        return new BigInteger(130, random).toString(32);
    }

    protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
        if (requestCode == Take_Photo) {
            String filePath = null;

            filePath = str_Camera_Photo_ImagePath;
            if (filePath != null) {
                Bitmap faceView = ( new_decode(new File(
                                filePath))); // ========================> good
                                                // lines

                imageView.setImageBitmap(faceView);

            } else {
                bitmap = null;
            }
        }
    } 

    public static Bitmap new_decode(File f) {

        // decode image size

        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        o.inDither = false; // Disable Dithering mode

        o.inPurgeable = true; // Tell to gc that whether it needs free memory,
                                // the Bitmap can be cleared

        o.inInputShareable = true; // Which kind of reference will be used to
                                    // recover the Bitmap data after being
                                    // clear, when it will be used in the future
        try {
            BitmapFactory.decodeStream(new FileInputStream(f), null, o);
        } catch (FileNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        // Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE = 300;
        int width_tmp = o.outWidth, height_tmp = o.outHeight;
        int scale = 1;
        while (true) {
            if (width_tmp / 1.5 < REQUIRED_SIZE && height_tmp / 1.5 < REQUIRED_SIZE)
                break;
            width_tmp /= 1.5;
            height_tmp /= 1.5;
            scale *= 1.5;
        }

        // decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        // o2.inSampleSize=scale;
        o.inDither = false; // Disable Dithering mode

        o.inPurgeable = true; // Tell to gc that whether it needs free memory,
                                // the Bitmap can be cleared

        o.inInputShareable = true; // Which kind of reference will be used to
                                    // recover the Bitmap data after being
                                    // clear, when it will be used in the future
        // return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        try {

//          return BitmapFactory.decodeStream(new FileInputStream(f), null,
//                  null);
            Bitmap bitmap= BitmapFactory.decodeStream(new FileInputStream(f), null, null);
            System.out.println(" IW " + width_tmp);
            System.out.println("IHH " + height_tmp);           
               int iW = width_tmp;
                int iH = height_tmp;

               return Bitmap.createScaledBitmap(bitmap, iW, iH, true);

        } catch (OutOfMemoryError e) {
            // TODO: handle exception
            e.printStackTrace();
            // clearCache();

            // System.out.println("bitmap creating success");
            System.gc();
            return null;
            // System.runFinalization();
            // Runtime.getRuntime().gc();
            // System.gc();
            // decodeFile(f);
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            return null;
        }

    }

} 
```

XML :

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="photo" >
    </Button>

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_action_search" >
    </ImageView>

</LinearLayout> 
```

# php - 如何在变量第二个变量值中使用变量给出单个 qutaion？

> ID：14154109
> 
> 赞同：-5
> 
> 时间：2013-01-04T09:10:38.717
> 
> 标签：php, codeigniter

```
$cod=set_value('code')  ;   

$where='`code`= '.$cod ' '; 
```

结果应该是这样`code ='some value'`，但是当我打印时给出错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:16:31.620

我没有正确理解你的问题，但我认为这是你需要的......

```
$where="'code=".$cod."'";

Or

$where="code='".$cod."'"; 
```

# c# - 在 Fluent NHibernate 中使用遗留数据库和 SchemaAction

> ID：14154113
> 
> 赞同：0
> 
> 时间：2013-01-04T09:11:03.180
> 
> 标签：c#, nhibernate, fluent-nhibernate

我有两节课：

```
public class User
{
  public virtual int Id { get; set; }
  public virtual string Name { get; set; }
}

public class Report
{
  public virtual int Id { get; set; }
  public virtual string Name { get; set; }
  public virtual User User { get; set; }
} 
```

...其中类`User`已经是数据库中的现有表。现在，我想将`Report`表添加到数据库中，为此我计划使用 Fluent NHibernate。我正在映射`User`和`Report`，因为我希望`User`可以从`Report`课堂上访问。`User`和之间存在一对多的关系`Report`。

我已经有将 SQL 脚本导出到数据库并`User`包含在其中的测试。现在我还想导出 FNH 生成的脚本，但我不希望 FNH 生成`User`，因为它已经在数据库中。

因此，我可以`SchemaAction.None()`在映射中指定`User`. 这使得 FNH 不会为 生成脚本`User`，只为`Result`. 唯一的问题是，表中没有生成外键`Report`。如何使 FNH 不导出生成的脚本`User`但仍导出表的外键`Report`？

如果我只是不指定 SchemaAction，则创建表`User`并`Report`生成外键`Report`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T09:00:20.103

1.  将旧/现有模式复制到新数据库中
2.  使用您的映射和现有数据库创建 NHibernate 配置
3.  使用此代码将更新脚本写入文件

    ```
    using (var file = new StreamWriter("SchemaUpdateScript.txt"))
    {
        new SchemaUpdate(config).Execute(file.WriteLine, false);
    } 
    ```

4.  仔细检查更新脚本是否真的做了你想要的

第 1 点是可选的。我强烈建议不要在生产环境中直接使用 SchemaUpdate。

# python - matplotlib 3D 图中的虚线箭头

> ID：14154115
> 
> 赞同：4
> 
> 时间：2013-01-04T09:11:05.400
> 
> 标签：python, matplotlib

我正在绘制一个 3D 图，并思考对于给定的一组坐标，将箭头从一个点绘制到另一个点的最佳方法是什么。

我在这个论坛找到了一个方法。我想知道在此 [示例中是否可以使用虚线箭头而不是实线箭头](https://stackoverflow.com/questions/11140163/python-matplotlib-plotting-a-3d-cube-a-sphere-and-a-vector)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T10:21:11.063

我发现我们可以将选项作为 linestyle="dashed" 添加到 Arrow3D 中的相同示例

```
a = Arrow3D([0,1],[0,1],[0,1], mutation_scale=20, lw=1, arrowstyle="-|>", color="k", linestyle="dashed") 
```

`linestyle = "--"`[由于论坛中提到的](http://matplotlib.1069221.n5.nabble.com/linestyle-option-for-FancyArrowPatch-and-similar-commands-td39913.html)原因而不起作用。

# google-chrome - 网站上的谷歌浏览器扩展串口

> ID：14154123
> 
> 赞同：9
> 
> 时间：2013-01-04T09:11:27.743
> 
> 标签：google-chrome, google-chrome-extension, serial-port

我使用 chrome.serial 与 COM 端口上的设备通信，我需要在我的网站上为 javascript 提供基本的 api。第一次尝试是使用 content_script + 消息传递，但我不能使用`serial`权限，`content_script`因为其中一个需要扩展才能打包应用程序，另一个需要扩展。我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-04T09:48:42.210

您可以通过[`chrome extension`](https://developer.chrome.com/extensions/getstarted.html)支持[**内容脚本**](https://developer.chrome.com/extensions/content_scripts.html)和使用[外部消息通信](https://developer.chrome.com/extensions/extension.html#method-connect)[`packaged app`](http://developer.chrome.com/apps/about_apps.html)进行[**串行端口通信来解决此问题**](http://developer.chrome.com/apps/serial.html)

[使用管理 API](https://developer.chrome.com/extensions/management.html#method-getAll)获取您的扩展 ID并建立单消息[通信](https://developer.chrome.com/extensions/extension.html#method-sendMessage)[连接](https://developer.chrome.com/extensions/extension.html#method-connect)。

[**On Message External**](https://developer.chrome.com/extensions/extension.html#event-onMessageExternal)在从另一个扩展发送消息时触发。

## 参考

*   [内容脚本](https://developer.chrome.com/extensions/content_scripts.html)
*   [串行 API](http://developer.chrome.com/apps/serial.html)
*   [打包APP](http://developer.chrome.com/apps/about_apps.html)
*   [Chrome 扩展程序](https://developer.chrome.com/extensions/getstarted.html)
*   [管理 API](https://developer.chrome.com/extensions/management.html)
*   [扩展 API](https://developer.chrome.com/extensions/extension.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-09-19T19:04:19.970

索引.html

```
<button>Connect</button>
<script src="main.js"></script> 
```

main.js

```
var connectionId;

/* Converts a string to UTF-8 encoding in a Uint8Array; returns the array */

var str2ab = function(str) {
   var encodedString = unescape(encodeURIComponent(str));
   var bytes = new Uint8Array(encodedString.length);
   for (var i = 0; i < encodedString.length; ++i) {
      bytes[i] = encodedString.charCodeAt(i);
   }
   return bytes.buffer;
};

var options = {
  'bitrate': 115200,
  'dataBits': 'eight',
  'parityBit': 'no',
  'stopBits': 'one'
}

document.addEventListener('DOMContentLoaded', function () {
  document.querySelector('button').addEventListener('click', btnSend);
  chrome.serial.connect('COM3', options, function(info) {
    connectionId = info.connectionId;
    console.log("Connection established.");
  });
});

var btnSend = function() {
  var msg = "hello printer 123456\n";
  chrome.serial.send(connectionId, str2ab(msg), function() {} );
} 
```

清单.json

```
{
  "name": "Printer at COM3 test",
  "version": "1",
  "manifest_version": 2,
  "permissions": ["serial"],
  "minimum_chrome_version": "23",
  "icons": {
    "16": "icon_16.png",
    "128": "icon_128.png"
  },
  "app": {
    "background": {
      "scripts": ["launch.js"]
    }
  }
} 
```

启动.js

```
chrome.app.runtime.onLaunched.addListener(function() {
  chrome.app.window.create('index.html', {
    id: "mainwin",
    innerBounds: {
      width: 320,
      height: 240
    }
  });
}); 
```

# asp.net - 限制 pdf 文件由用户下载，但可以由 aspx 或 asp 执行

> ID：14154124
> 
> 赞同：2
> 
> 时间：2013-01-04T09:11:34.687
> 
> 标签：asp.net, iis, asp-classic

我正在寻找一种限制 .pdf 文件由用户下载但可由 aspx 或 asp 检索的解决方案，我尝试将以下行添加到网站根目录中 system.web 标记内的 web.config 文件中：

```
<httpHandlers>
    <add verb="*" path="*.pdf" type="System.Web.HttpForbiddenHandler" />
</httpHandlers> 
```

但是当我访问该网站时发生内部服务器错误。有谁知道如何做到这一点，我正在 Windows 7 上的 IIS 7 上对其进行测试。

***更新***
我已成功配置：

```
<add name="NoPdfAllowed" verb="*" path="download/*.pdf" 
   type="System.Web.HttpForbiddenHandler" />
</handlers> 
```

但是我有一个 java 小程序插件（一个 html/asp/aspx 页面），在我在 web.config 文件中添加上述行后无法打开 pdf。是否可以启用能够加载 pdf 的 java 小程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T09:19:56.617

将pdf文件放在web目录之外怎么样？

创建一个名为 C:\pdf-files\ 的目录，并在此目录中授予互联网用户读取权限。这样，您的 asp 和 aspx 文件可以将这些文件用于您需要的任何内容，但访问该站点的用户无法访问它们？

但是，如果您使用 adostream 或类似的功能，用户可能仍然能够下载流式传输的内容......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T09:45:02.993

如果我理解您的问题，您希望禁止通过“直接”url 下载 pdf 文件，但无论如何都允许通过客户端下载它们（java 小程序）。这是一种如何制作圆圆的方法:)

我在我的爱好废弃软件网站上使用这个系统来下载 zip 文件：

*   将 pdf 文件从网站目录中删除或像您已经做的那样禁止它们的扩展名
*   当使用 java 小程序为 .aspx 页面提供服务时，生成包含唯一标识符和 pdf 文件名的唯一令牌（比如说新的 guid），将其存储在 http 缓存中（如果您使用单框作为服务器）或 db/scaleout（网络农场），将此令牌标识符传递给小程序，此令牌应该只有有限的生命周期
*   创建将提供 pdf 文件的 HttpHandler，此处理程序将（在提供 pdf 之前）通过令牌 id 检查令牌是否存在且仍然有效，并在提供 pdf 文件后使此令牌无效
*   您还可以检查 Referrer 是否与您的域匹配，但我不建议这样做，某些浏览器没有正确设置该域名

这样用户仍然可以下载 pdf 文件，但下载链接只能使用一次，因此他们无法链接您的内容（至少不那么容易）。

# android - 从通过蓝牙接收的字节数组创建位图并将位图保存在 sdcard 中

> ID：14154126
> 
> 赞同：1
> 
> 时间：2013-01-04T09:11:36.573
> 
> 标签：android, bluetooth

我必须实现一个代码，在该代码中我从外部硬件接收字节数组。设备，最后我必须从字节数组创建位图图像并将该位图存储在 sdcard 中。

```
File file=new File(Environment.getExternalStorageDirectory(), "file.jpeg");

        if (file.exists()) {
            file.delete();
        }

        try {
            fos = new FileOutputStream(file.getPath());
        } catch (FileNotFoundException e1) {
            e1.printStackTrace();
        }
        try {
            fos.write(buffer);
            //bitmap.compress(Bitmap.CompressFormat.JPEG, 100, fos);
            fos.close();
            //bitmap = BitmapFactory.decodeByteArray(buffer , 0, buffer.length);

        } catch (OutOfMemoryError e) {
            e.printStackTrace();
        }catch (Exception e) {
            e.printStackTrace();
        } 
```

文件是在 sdcard 中创建的，但该文件未显示图像。

```
bitmap = BitmapFactory.decodeByteArray(buffer , 0, buffer.length);
            OutputStream stream = new FileOutputStream("/sdcard/test.jpg");
            bitmap.compress(CompressFormat.JPEG, 100, stream); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:26:47.860

试试这个让`image`包含位图图像

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
ImageIO.write(img, "png", baos);
baos.flush();
byte[] imageInByte = baos.toByteArray();
baos.close(); 
```

`imageInByte`现在包含位图图像的字节数据。

用于转换反向

`Bitmap bp = BitmapFactory.decodeByteArray(imgArray, 0,imgArray.length);` 希望这可以帮助你

**更新 ：**

*将数据存储在 SD 卡上*

```
Bitmap bmp = createBitmap();
OutputStream stream = new FileOutputStream("/sdcard/test.jpg");
bmp.compress(CompressFormat.JPEG, 100, stream); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:15:52.467

尝试这样的事情：

```
FileInputStream in;    
BufferedInputStream buf;    
try {      
    in = new FileInputStream("/sdcard/pictures/1.jpg");    
    buf = new BufferedInputStream(in,1070);    
    byte[] bMapArray= new byte[buf.available()];   
    buf.read(bMapArray);     
    Bitmap bMap = BitmapFactory.decodeByteArray(bMapArray, 0, bMapArray.length); 
}catch (Exception e) {        
    Log.e("Error reading file", e.toString());      
} 
```

# java - 集合排序（列表 ,Comparator ) 方法示例

> ID：14154127
> 
> 赞同：66
> 
> 时间：2013-01-04T09:11:39.830
> 
> 标签：java

> **可能重复：**
> [使用多个键对 Java 对象进行排序](https://stackoverflow.com/questions/8036429/sorting-java-objects-using-multiple-keys)

我找不到任何使用此方法的示例，所有示例都给出了第二个参数“null”。我听说这种方法用于根据多个标准对类进行排序，但没有找到示例。

```
public class Student implements Comparable<Student> {
String name;
int age;

public Student(String name, int age) {
    this.name = name;
    this.age = age;
}

@Override
public String toString() {
    return name + ":" + age;
}

@Override
public int compareTo(Student o) {
    Integer myAge = age;
    Integer oAge = o.age;
    return myAge.compareTo(oAge);
} 
```

}

对于此类，如果我想根据学生的姓名和年龄对学生列表进行排序，我该如何使用方法 Collections sort(List,Comparator)

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-01-04T09:36:15.033

在您现有的*Student*课程的基础上，这就是我通常的做法，尤其是在我需要多个比较器的情况下。

```
public class Student implements Comparable<Student> {

    String name;
    int age;

    public Student(String name, int age) {
       this.name = name;
       this.age = age;
    }

    @Override
    public String toString() {
        return name + ":" + age;
    }

    @Override
    public int compareTo(Student o) {
        return Comparators.NAME.compare(this, o);
    }

    public static class Comparators {

        public static Comparator<Student> NAME = new Comparator<Student>() {
            @Override
            public int compare(Student o1, Student o2) {
                return o1.name.compareTo(o2.name);
            }
        };
        public static Comparator<Student> AGE = new Comparator<Student>() {
            @Override
            public int compare(Student o1, Student o2) {
                return o1.age - o2.age;
            }
        };
        public static Comparator<Student> NAMEANDAGE = new Comparator<Student>() {
            @Override
            public int compare(Student o1, Student o2) {
                int i = o1.name.compareTo(o2.name);
                if (i == 0) {
                    i = o1.age - o2.age;
                }
                return i;
            }
        };
    }
} 
```

用法：

```
List<Student> studentList = new LinkedList<>();
Collections.sort(studentList, Student.Comparators.AGE); 
```

**编辑**

自 Java 8 发布以来，内部类`Comparators`可以使用 lambdas 大大简化。`Comparator`Java 8 还为object引入了一种新方法，`thenComparing`在嵌套它们时无需手动检查每个比较器。`Student.Comparators`下面是考虑了这些更改的类的 Java 8 实现。

```
public static class Comparators {
    public static final Comparator<Student> NAME = (Student o1, Student o2) -> o1.name.compareTo(o2.name);
    public static final Comparator<Student> AGE = (Student o1, Student o2) -> Integer.compare(o1.age, o2.age);
    public static final Comparator<Student> NAMEANDAGE = (Student o1, Student o2) -> NAME.thenComparing(AGE).compare(o1, o2);
} 
```

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2013-01-04T09:15:16.827

这可能是最简单的方法 -

```
Collections.sort(listOfStudent,new Comparator<Student>(){
                     public int compare(Student s1,Student s2){
                           // Write your logic here.
                     }}); 
```

使用 Java 8（lambda 表达式） -

```
listOfStudent.sort((s1, s2) -> s1.age - s2.age); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-01-04T09:21:33.110

你可能想要这样的东西：

```
Collections.sort(students, new Comparator<Student>() {
                     public int compare(Student s1, Student s2) {
                           if(s1.getName() != null && s2.getName() != null && s1.getName().comareTo(s1.getName()) != 0) {
                               return s1.getName().compareTo(s2.getName());
                           } else {
                             return s1.getAge().compareTo(s2.getAge());
                          }
                      }
); 
```

这首先按学生的姓名对学生进行排序。如果缺少一个名字，或者两个学生有相同的名字，他们将按年龄排序。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-04T09:15:31.283

要使用 Collections sort(List,Comparator) ，您需要创建一个实现 Comparator 接口的类，并通过[Comparator 接口在其中创建 compare() 的代码](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html)

你可以这样做：

```
class StudentComparator implements Comparator
{
    public int compare (Student s1 Student s2)
    {
        // code to compare 2 students
    }
} 
```

要进行排序，请执行以下操作：

```
 Collections.sort(List,new StudentComparator()) 
```

# android - 在sencha touch 2中解析json

> ID：14154128
> 
> 赞同：1
> 
> 时间：2013-01-04T09:11:43.593
> 
> 标签：android, json, extjs

我试图解析 json 数据，列出 android app 响应如下

```
{"records":[{"reg_no":"444444","name":"xyz, pqr","address":"Kathmandu-64, Kathmandu","sex":"Male","qualification":"B..E","university":"T.U","year":"2010","faculty":"Computer","date":"2012-08-17 11:29:38"}]} 
```

煎茶代码如下

```
{
                    xtype: 'nestedlist',
                    title: 'List',
                    iconCls: 'star',
                    displayField: 'name',

                    store: {
                        type: 'tree',

                        fields: [
                            'name', 'reg_no', 'faculty', 'address', 'university',
                            {name: 'leaf', defaultValue: true}
                        ],

                        root: {
                            leaf: false
                        },

                        proxy: {
                            type: 'jsonp',
                            url: 'http://timus.com/api.php?name=serish',
                            reader: {
                                type: 'json',
                                rootProperty: 'records'
                            }
                        }
                    },

                    detailCard: {
                        xtype: 'panel',
                        scrollable: true,
                        styleHtmlContent: true
                    },

                    listeners: {
                        itemtap: function(nestedList, list, index, element, post) {
                            this.getDetailCard().setHtml(post.get('university'));
                        }
                    }
                } 
```

但没有解析json ..后续错误即将到来

**`uncaught syntax error : unexpected token`**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:14:50.420

我遇到了同样的问题，阅读了一些文章，我意识到如果 url 是一个安静的服务，代理类型必须是“rest”。

我看到：[http ://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.reader.Reader](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.reader.Reader)

# sql - SQL - 在一行 SQL 中设置两个不同的值

> ID：14154130
> 
> 赞同：2
> 
> 时间：2013-01-04T09:11:55.680
> 
> 标签：sql, sql-server-2008

我有以下完全符合预期的 SQL：

```
UPDATE Zones 
SET Zones.Zone = (SELECT Zone FROM Zones_New WHERE Zones_New.ZONENO = ZONES.ZONENO) 
```

但是，这会更新表`Zones`并将字段设置为表`Zone`中的`Zone`名称，`Zones_New`并通过`ZoneNo`.

同时我想做完全相同的事情，但也将`Name`字段设置`Zone`为 table 中的名称`Zones_New`。

所以基本上我正在设置`Zone`&是表中`Name`的值`Zone``Zones_New`

我只是无法弄清楚SQL，所以我会很感激任何帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T09:15:36.820

```
UPDATE Zones
SET Zones.Zone = Zones_New.Zone,
    Zones.Name = Zones_New.Name
FROM Zones
INNER JOIN Zones_New ON Zones.ZONENO = Zones_New.ZONENO 
```

请注意，如果您想故意为不匹配的行设置空值，则可以改用 LEFT JOIN。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:17:33.327

```
UPDATE Zones
SET Zones.Zone = Zones_New.Zone,
    Zones.Name = Zones_New.Name
FROM Zones, Zones_New
WHERE Zones.ZONENO = Zones_New.ZONENO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T09:14:21.473

您可以像这样运行子查询两次：

```
UPDATE Zones 
 SET Zones.Zone = (SELECT Zone 
                   FROM Zones_New 
                   WHERE Zones_New.ZONENO = ZONES.ZONENO),
     Zones.Name = (SELECT Zone 
                   FROM Zones_New 
                   WHERE Zones_New.ZONENO = ZONES.ZONENO) 
```

或者你可以加入

```
UPDATE Zones 
 SET Zones.Zone = Zones_New.Zone
     Zones.Name = Zones_New.Zone
FROM Zones
  LEFT OUTER JOIN Zones_New 
    ON Zones_New.ZONENO = ZONES.ZONENO 
```

如果在表`null`中未找到相应的记录，则这两个查询都将获取数据。`Zones_New`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T09:14:30.227

最简单的就是...

```
UPDATE Zones 
SET Zones.Zone = (SELECT Zone FROM Zones_New WHERE Zones_New.ZONENO = ZONES.ZONENO),
    Zones.Name = (SELECT Zone FROM Zones_New WHERE Zones_New.ZONENO = ZONES.ZONENO) 
```

更复杂的可能是......

```
UPDATE Z
SET Zones.Zone = ZN.Zone
FROM Zones Z
  LEFT JOIN Zones_New ZN
    ON Z.ZONENO = ZN.ZONENO 
```

# java - 用于输出的 java 最小内存使用量

> ID：14154131
> 
> 赞同：0
> 
> 时间：2013-01-04T09:11:55.400
> 
> 标签：java, output

我正在尝试解决一个问题，但得到内存限制我认为这是在输出之前缓冲的原因我有整数，我怎样才能以最少的内存使用量输出它们？现在我正在使用 PrintWriter。还有其他更好的方法吗？

```
import java.io.*;
import java.util.*;

class stack_ {
public char index;
public int value;

public stack_(char ind, int val) {
    index = ind;
    value = val;
}
}

public class timous {
public static void main(String[] args) throws IOException {
    StreamTokenizer in = new StreamTokenizer( new BufferedReader (new InputStreamReader(System.in)) );
    Vector<stack_> numbers = new Vector<stack_>();
    PrintWriter out = new PrintWriter(System.out);

    in.nextToken();
    char num = (char)in.nval;
    for (char i = 0, k; i<num; i++) {
        in.nextToken();
        if (in.sval.equals("POP")) {
            k = (char)(numbers.size()-1);
            in.nextToken();
            while (numbers.elementAt(k).index!=(char) in.nval)
                k--;
            out.println(numbers.elementAt(k).value);
            numbers.removeElementAt(k);
        }               
        else {
            in.nextToken();
            k = (char)in.nval;
            in.nextToken();
            numbers.add(new stack_(k, (int) in.nval));
        }
    }
    out.flush();
}
} 
```

内存限制测试3；时间 0.078; 内存 834 KB

```
import java.io.*;
import java.util.*;

public class timous {
    public static void main(String[] args) throws IOException {
        StreamTokenizer in = new StreamTokenizer( new BufferedReader (new InputStreamReader(System.in)) );
        int[] numbers_int = new int[20000];
        char[] numbers_char = new char[20000];
        PrintWriter out = new PrintWriter(System.out,true);

        in.nextToken();
        char num = (char)in.nval;
        for (char i = 0, k, cur=0; i<num; i++) {
            in.nextToken();
            if (in.sval.charAt(1)=='O') {
                k = cur;
                k--;
                in.nextToken();
                while (numbers_char[k]!=(char) in.nval)
                    k--;
                out.println(numbers_int[k]);
                for (; k<19999; k++){
                    numbers_int[k] = numbers_int[k+1];
                    numbers_char[k] = numbers_char[k+1];
                }
                cur--;
            }               
            else {
                in.nextToken();
                numbers_char[cur] = (char)in.nval;
                in.nextToken();
                numbers_int[cur] = (int)in.nval;
                cur++;
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:28:56.000

创建缓冲区时，缓冲区的大小是固定的。这意味着无论您如何使用它或填充它，它都不会使用更多内存。默认为 8 KB，这不太可能是您内存不足的原因。

它更有可能是堆栈对象的 Vector（集合的一个奇怪选择），尽管您必须创建数百万个这样的对象才能导致问题

顺便说一句，如果没有至少 1.1 MB 的堆（这是该大小程序的一小部分），Java 7 将无法启动。即你甚至不能打印它的版本。

```
$ java -mx1000k -version
Error occurred during initialization of VM
Too small initial heap for new size specified

$ java -mx1100k -version
java version "1.7.0_07"
Java(TM) SE Runtime Environment (build 1.7.0_07-b11)
Java HotSpot(TM) Client VM (build 23.3-b01, mixed mode, sharing) 
```

如果您想知道为什么 Java “需要这么多内存”，我会说这些天对于大多数运行 Java 的系统来说都不算什么。您可以花 200 美元购买 32 GB，因此 1 MB 仅值 0.6 美分并且可以重复使用。

* * *

鉴于它确实与问题有关，您可以使用这些方法解析和输出 int 值。

```
static int readInt() throws IOException {
    int num = 0, ch;
    while ((ch = System.in.read()) > 0)
        if (ch > ' ')
            break;
    if (ch < 0)
        return -1;
    do {
        num = num * 10 + ch - '0';
        ch = System.in.read();
    } while (ch > ' ');
    return num;
}

static void writeInt(int i) {
    if (i == 0) {
        System.out.write('0');
        System.out.write('\n');
        return;
    } else if (i < 0) {
        System.out.write('-');
        writeInt(-i);
        return;
    }
    int tens = 1000000000;
    for (; tens > i; tens /= 10) ;
    for (; tens > 0; tens /= 10)
        System.out.write((char) ('0' + i / tens % 10));
    System.out.write('\n');
}

public static void main(String... args) throws IOException {
    int count = readInt();
    for (int i = 0; i < count; i++) {
        int pushPop = readInt();
        switch (pushPop) {
            case -1: // OEF
                return;
            case 36074: // PUSH
            case 71626: // push
                push(readInt(), readInt());
                break;

            case 3542: // PUSH
            case 7094: // pop
                writeInt(pop(readInt()));
                break;
        }
    }
} 
```

# css - 尝试将 Firefox 的按钮垂直居中会导致 chrome 中的菜单不均匀。我究竟做错了什么？

> ID：14154133
> 
> 赞同：0
> 
> 时间：2013-01-04T09:11:57.853
> 
> 标签：css, google-chrome, firefox, rss, menubar

我一直在尝试在 css 中格式化 RSS 按钮的外观，并且由于某种原因，浏览器之间存在很大差异。Chrome 将它完美呈现，就好像我根本不需要弄乱它一样。但在 Firefox 和 IE9 上，它与菜单的其余部分不平衡。所以我添加了填充以使其均匀，并将悬停颜色拉长到菜单栏的底部。这解决了 Firefox 上的问题，但它使菜单在 Chrome 上以相反的方式不均匀。突然，该栏对于其他菜单项来说太长了。

```
.menunav a {
padding-right: 6px;
    padding-top: 3px;
    padding-bottom: 3px;
padding-left: 6px;
font-size: 100%;

}   
.menunav-rss:hover {
    background: #ff6600;
    font-size: 100%;
    padding-top: 3px;
    padding-bottom:3px;
} 
```

这来自一个 wordpress 网站。我对 css 或编码很陌生，所以我不完全确定如何修改它。修复一个似乎会使另一个变得更糟，我不确定为什么只有 rss 按钮不均匀。

作为参考，这是 Firefox 和 Chrome 上没有任何填充的菜单栏。

任何帮助，将不胜感激。如果您需要更多信息，我可以轻松提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:26:53.173

这是由于浏览器具有不同的“预设”值。把它想象成每个浏览器都有自己的样式表，在你之前应用。

唯一的解决方法是使用 CSS 重置。[Eric Mayers](http://meyerweb.com/eric/tools/css/reset/)被认为是“goto”，几乎涵盖了您想要的所有内容。

只需在您自己的样式之前加载重置，然后您应该能够调整所有内容以在所有浏览器中看起来或多或少相同。

必须这样做有点痛苦，但您不应该真正依赖浏览器内置的默认样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T06:15:02.400

我多次遇到同样的问题。我发现该设置`vertical-align: top`使它在 FF 和 chrome 中看起来相同（可能也是 IE9，尽管我还没有测试过），之后您可以添加`padding-top`以将文本定位在您想要的位置。

# php - AJAX 调用返回时图像未出现

> ID：14154134
> 
> 赞同：3
> 
> 时间：2013-01-04T09:11:57.997
> 
> 标签：php, javascript, ajax, image

我有这个 AJAX 搜索功能，它搜索表中的文件列表，然后根据用户的输入更新结果。现在，我在表格中的文件名旁边有一个下载按钮（这是一个图像），使用户能够下载文件。问题是当 AJAX 调用返回时，它只是拒绝显示图像。我不知道我是否有语法错误，或者这根本不可行。代码在这里：

```
echo "<tr>

<td class='tlong'>".$state['title']."</td>

<td style='font-size:11px;' class=''>".$state['filesize']."
<a style='padding-left:px;' href='../downloads/".$state["filename"]."'><img src='../images/footer/downloadImage.png' alt='' style='width:10px;height:10px;'/></a>
</td>

</tr>";
} 
```

这是 AJAX 方法中的代码。我首先从数据库中提取标题，然后是文件大小，然后它应该显示使用户能够下载该文件旁边的图像。但图像只是没有显示。但是，当我指定一个时，它会放置替代文本。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:17:19.353

检查图像src的路径和运行AJAX请求的页面。换句话说，如果您直接将图像插入该页面，图像是否正确呈现？

```
// In the page that run AJAX
<img src='../images/footer/downloadImage.png' /> 
```

假设以下目录结构：

```
request.html
js/ajax_target.html
js/imgs/downloadImage.png 
```

如果 downloadImage 将在 ajax_target.html 中呈现，它的 src 将是*imgs/downloadImage.png*，但如果它将从 request.html 呈现，它应该是*js/imgs/downloadImage.png*

# java - 比较和循环未按预期工作

> ID：14154135
> 
> 赞同：0
> 
> 时间：2013-01-04T09:11:59.877
> 
> 标签：java, date, loops, do-while

我正在用 Java 编写一个程序，它基本上可以找到 2 个特定日期之间的天数。用户输入 DD/MM/YYYY 格式的两个日期，我取日/月/年的子字符串并计算 2 之间的天数。我还做了一种验证，如果格式错误（例如 d/mm/yyyy）然后该人必须以正确的格式重写日期。我通过确保日期中的 / 处于正确位置来做到这一点。如果 4 / 匹配，那么一个布尔变量给我真，程序继续，如果不是，它给我假，它再次询问日期。

问题是它总是给我错误，即使那样，它也没有重新循环。

```
import java.util.*;
 public class DateDifference {
 int day1, day2, month1, month2, year1, year2;
 String startdate, enddate, day1S, day2S, month1S, month2S, year1S, year2S;
 String datevalidation = "/";
 boolean dval;
public static void main(String args[]){
    DateDifference difference = new DateDifference();
}
DateDifference() {
    Calendar cal1 = Calendar.getInstance();
    Calendar cal2 = Calendar.getInstance();

    Scanner sc = new Scanner (System.in);
    do {
    System.out.println("Enter Start Date [dd/mm/yyyy]:");
    startdate = sc.next();
    System.out.println("Enter End Date [dd/mm/yyyy]:");
    enddate = sc.next();

    int l1 = startdate.length();
    int l2 = enddate.length();
    day1S = startdate.substring(0,2);
    month1S = startdate.substring(3,5);
    year1S = startdate.substring(6,l1);

    day2S = enddate.substring(0,2);
    month2S = enddate.substring(3,5);
    year2S = enddate.substring(6,l2);

    if (startdate.substring(2,3).equals(datevalidation) & startdate.substring(5,6).equals(datevalidation) & enddate.substring(2,3).equals(datevalidation) & enddate.substring(5,6).equals(datevalidation)) 
        dval = true;

    else 
        dval = false;
        System.out.println("Wrong date format. Try again");

   } while (dval = false);

   day1 = Integer.parseInt(day1S);
   month1 = Integer.parseInt(month1S);
   year1 = Integer.parseInt(year1S);
   day2 = Integer.parseInt(day2S);
   month2 = Integer.parseInt(month2S);
   year2 = Integer.parseInt(year2S);

    cal1.set(year1, month1 - 1, day1); 
    cal2.set(year2, month2 - 1,day2);
    System.out.println("Days= "+daysBetween(cal1.getTime(),cal2.getTime()));
}
public int daysBetween(Date cal1, Date cal2){
    return (int)( (cal2.getTime() - cal1.getTime()) / (1000 * 60 * 60 * 24));
} 
```

}

以下是一些关于它是如何工作的图片：

输入正确时：http: [//vvcap.net/db/2100RYdaSM1T6EXLqgq5.png](http://vvcap.net/db/2100RYdaSM1T6EXLqgq5.png)

当输入不正确时：http: [//vvcap.net/db/9qSEwDKSTIdLAWmxS_Cy.png](http://vvcap.net/db/9qSEwDKSTIdLAWmxS_Cy.png)

如果不正确，它只会在尝试将 1/ 设为整数时卡住，我可以理解。

有什么帮助吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:32:43.480

据我所知，您的问题是您何时选择`substring()`日期。您正在检查位置是否等于“/”但您正在占据 2 个位置（因此错误显示您要转换为的字符串和 int 是错误代码中的“1/”。

尝试更改所有 If 语句行，如下所示：

从

```
 if (startdate.substring(2,3).equals(datevalidation) & startdate.substr...
       dval = true;
 ... 
```

至

```
 if ( !startdate.substring(2,3).contains(datevalidation) &
      !startdate.substring(5,6).contains(datevalidation) &
      !enddate.substring(2,3).contains(datevalidation) &
      !enddate.substring(5,6).contains(datevalidation)) 
       dval = true;
 ... 
```

AND`while()`语句不应该`==`只是`=`. 您正在设置它，而不是检查循环的每次迭代。

您现在不是检查 2 个字符是否等于 1 个字符（例如“1/”.equals(“/”)），而是检查这 2 个字符是否不包含分隔符。

此外，您还需要一个检查器或一个 try-catch 块，以防输入的两位数字不是数字来阻止`NumberFormatExcpetion`返回。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:49:41.677

您在这一行中有错字

```
 } while (dval = false); 
```

操作`dval = false`总是`false`这样你`do .. while`只运行一次。我想你打算使用

```
 } while (dval == false); 
```

有真正的循环。

* * *

要验证循环行为，您可以运行此测试并查看会发生什么：

```
@Test
public void testLoop() {

    int iteration = 0;
    boolean flag;
    do {
        flag = false; // unused assignment
        ++iteration; // iteration counter
        System.out.println( "Running iteration " + iteration );
    } while ( flag = false );

    System.out.println( "Loop finished. Total number of iterations is " + iteration );
} 
```

# ajax - 意外的标记

> ID：14154136
> 
> 赞同：1
> 
> 时间：2013-01-04T09:12:04.203
> 
> 标签：ajax, jquery

我有以下功能：

```
 function LogEvent(ID,description) {
            var userName = document.getElementById('ctl00_ContentPlaceHolder1_username').value;
            var download_link = document.getElementById('ctl00_ContentPlaceHolder1_url_download').value;

             $.ajax({
                        type: "GET",
                        url: "Logger.aspx",
                        data: { person: userName, item: ID, desc: description },
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: {  
                               $.fileDownload(download_link);
                            }                                
                     });

    } 
```

现在我收到一条错误消息`$.fileDownload(download_link);`。

```
Uncaught SyntaxError: Unexpected token . 
```

如果我删除整个成功部分，它可以正常工作，如果我将 $.file... 替换为 alert('hi'); 我收到类似的错误。

请注意，文件下载功能是 jquery.download 插件，但我知道问题更普遍，如使用警报时所述 - 这也不起作用。

我不确定这段代码哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T09:15:24.550

它应该是

```
success: function() {
    $.fileDownload(download_link);
} 
```

事实上，解析器可能假设

```
{
    $.fileDownload(download_link);
} 
```

是一个对象，这没有意义，因为对象应该是键值对。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T09:15:37.573

您忘记了`function()`回调函数的部分，或者您正在混合对象和函数符号。

```
success: function() {  
    $.fileDownload(download_link);
} 
```

# iphone - 嵌入在链接上的视频不适用于 iOS6 模拟器或设备的 UIWebview

> ID：14154137
> 
> 赞同：0
> 
> 时间：2013-01-04T09:12:05.350
> 
> 标签：iphone, ios, video, uiwebview, ios6

iOS 6 webview 是否存在呈现视频的问题？:(

我的代码是对 webview 的 loadRequest 方法的简单调用：

```
 self.webview.scalesPageToFit = YES;
[self.webview loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.youtube.com/watch?v=3WEpUAQ7fa8"]]]; 
```

cosole 说：

```
[MPAVController] Autoplay: Enabling autoplay
[MPAVController] Autoplay: Disabling autoplay for pause
[MPAVController] Autoplay: Disabling autoplay
[MPAVController] Autoplay: Ending background task assertion (8) for playback stall
[MPAVController] Autoplay: _streamLikelyToKeepUp: 0 -> 1
[MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 1, on player: 1) 
```

我提到了[这个答案](https://stackoverflow.com/questions/12660857/uiwebview-movie-player-getting-dismissed-ios-6-bug)，但徒劳无功。

请提出一个答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:42:56.633

嗨，因为你不能使用 MPMoviePlayerController，你必须使用 Webview，而不是使用

```
self.webview.scalesPageToFit = YES;
[self.webview loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.youtube.com/watch?v=3WEpUAQ7fa8"]]]; 
```

[试试这种方式嵌入，](https://stackoverflow.com/questions/5117617/embedding-youtube-videos-on-ios)

# android - 删除无效后应用程序无法打开

> ID：14154138
> 
> 赞同：0
> 
> 时间：2013-01-04T09:12:21.373
> 
> 标签：android, intellij-idea

我刚开始使用 android，我有我的 MainActivity 类，其中有一个 void 'addItem'，每次我删除应用程序强制关闭的 void 时我想移动到不同的类

如何在不干扰应用程序运行的情况下消除空白？我已经搜索了项目的路径，但找不到任何对它的引用，所以我不知道为什么它不起作用。

如果有帮助，我在 Windows 7 上使用 IntelliJ

****更新****

更详细一点，目前应用程序中没有太多内容；这是ActivityMain：

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;

public class ActivityMain extends Activity {
    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout_main);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.menu_main, menu);
        return true;
    }

    public void addItem(MenuItem menuItem) {

    } 
```

我创建了另一个类，其中将有 addItem void，但是当我从这里删除它并尝试运行应用程序时它会停止

**这是logcat错误**

```
01-04 09:15:04.268: ERROR/AndroidRuntime(2179): FATAL EXCEPTION: main
        android.view.InflateException: Couldn't resolve menu item onClick handler addItem in class com.spences10apps.SScript.ActivityMain
        at android.view.MenuInflater$InflatedOnMenuItemClickListener.<init>(MenuInflater.java:217)
        at android.view.MenuInflater$MenuState.setItem(MenuInflater.java:417)
        at android.view.MenuInflater$MenuState.addItem(MenuInflater.java:451)
        at android.view.MenuInflater.parseMenu(MenuInflater.java:188)
        at android.view.MenuInflater.inflate(MenuInflater.java:110)
        at com.spences10apps.SScript.ActivityMain.onCreateOptionsMenu(ActivityMain.java:25)
        at android.app.Activity.onCreatePanelMenu(Activity.java:2490)
        at com.android.internal.policy.impl.PhoneWindow.preparePanel(PhoneWindow.java:407)
        at com.android.internal.policy.impl.PhoneWindow.doInvalidatePanelMenu(PhoneWindow.java:769)
        at com.android.internal.policy.impl.PhoneWindow$1.run(PhoneWindow.java:201)
        at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
        at android.view.Choreographer.doCallbacks(Choreographer.java:562)
        at android.view.Choreographer.doFrame(Choreographer.java:531)
        at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
        at android.os.Handler.handleCallback(Handler.java:725)
        at android.os.Handler.dispatchMessage(Handler.java:92)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:5191)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
        at dalvik.system.NativeStart.main(Native Method)
        Caused by: java.lang.NoSuchMethodException: addItem [interface android.view.MenuItem]
        at java.lang.Class.getConstructorOrMethod(Class.java:460)
        at java.lang.Class.getMethod(Class.java:915)
        at android.view.MenuInflater$InflatedOnMenuItemClickListener.<init>(MenuInflater.java:215)
        ... 22 more
01-04 09:15:04.275: WARN/ActivityManager(426): Force finishing activity com.spences10apps.SScript/.ActivityMain
01-04 09:15:04.361: DEBUG/dalvikvm(426): GC_CONCURRENT freed 833K, 23% free 6881K/8840K, paused 7ms+6ms, total 87ms
01-04 09:15:04.361: DEBUG/dalvikvm(426): WAIT_FOR_CONCURRENT_GC blocked 37ms
01-04 09:15:04.424: DEBUG/dalvikvm(426): GC_FOR_ALLOC freed 42K, 18% free 7335K/8840K, paused 41ms, total 41ms
01-04 09:15:04.424: INFO/dalvikvm-heap(426): Grow heap (frag case) to 8.481MB for 1127536-byte allocation
01-04 09:15:04.463: DEBUG/dalvikvm(426): GC_FOR_ALLOC freed 2K, 16% free 8434K/9944K, paused 41ms, total 41ms
01-04 09:15:04.861: WARN/ActivityManager(426): Activity pause timeout for ActivityRecord{4143dab8 u0 com.spences10apps.SScript/.ActivityMain}
01-04 09:15:05.041: INFO/ActivityManager(426): No longer want com.google.android.talk (pid 1381): empty #17 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:30:23.403

找到了

```
 android:onClick="addItem" 
```

在 menu_main.xml 文件中需要删除

# transactions - Java EE @TransactionManagement.BEAN - 它如何与容器管理的 bean 结合使用？

> ID：14154142
> 
> 赞同：2
> 
> 时间：2013-01-04T09:12:33.953
> 
> 标签：transactions, java-ee-6, session-bean

在 callSessionBean2() 中启动的事务在以下场景中将如何表现？是否暂停？如果在 SessionBean2 中抛出异常会发生什么？SessionBean2 设置为 BEAN 事务管理类型，因为它不与任何数据库通信，仅通过 LDAP 与 AD 服务器通信。

我之所以问，是因为在部署后的几周内，我在生产服务器中遇到问题，对 SessionBean2 的调用开始挂起，事务超时是唯一的错误。我认为这个设置可能是一件坏事，有人能解释一下吗？

```
@Stateless
@TransactionManagement(TransactionManagementType.CONTAINER)
public class SessionBean1 {
    @Inject private SessionBean2 sessionBean2;

    @TransactionAttribute(TransactionAttributeType.REQUIRED)
    public void callSessionBean2(){
        sessionBean2.doThingsThatMightCauseException();
    }
}

@Singleton
@TransactionManagement(TransactionManagementType.BEAN)
public class SessionBean2 {
    public void doThingsThatMightCauseException(){...}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T11:28:40.120

正如 EJB 3.1 规范（§13.6.1）中所声明的，调用者的事务将被暂停：

> 如果客户端请求与事务 T1 相关联，而实例未与事务相关联，则容器将挂起客户端的事务关联并调用具有未指定事务上下文的方法。当方法（连同任何关联的拦截器方法）完成时，容器会恢复客户端的事务关联 (T1)。

因此，与关联的事务`SessionBean1`被挂起，`SessionBean2`在任何一种情况下抛出的异常都将由调用 bean 处理，具有适当的语义（即由 CMT 会话处理）

您的代码是正确的，但我宁愿使用：

```
@TransactionManagement(TransactionManagementType.CONTAINER)
@TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED)
public class SessionBean2 {
    public void doThingsThatMightCauseException(){...}
} 
```

达到同样的效果。

您遇到的问题可能与`@Singleton`注释有关，根据 §4.8.5.3 和 §4.8.5.3 默认 bean 为：

```
@ConcurrencyManagement(ConcurrencyManagementType.CONTAINER)
@Lock(LockType.WRITE) 
```

这会序列化 的调用`doThingsThatMightCauseException`，从而导致随机`ConcurrentAccessTimeoutException`. 虽然并发访问超时可通过 配置`@AccessTimeout`，但如果（序列化）访问延迟超过为 CMT 事务定义的超时，则会导致事务超时`doThingsThatMightCauseException`（请记住，与之关联的 CMT 事务`SessionBean1`被挂起，但时钟仍在计数...... ）。

总结一下：

您需要（适当注意共享状态）通过以下方式更改访问锁定`doThingsThatMightCauseException`：

```
@Lock(LockType.READ)
public void doThingsThatMightCauseException(){...} 
```

这将删除访问序列化，希望能解决您的超时问题。

如果您仍然遇到超时，这将与包含在`doThingsThatMightCauseException`. 在这种情况下，您需要：

*   在任何事务之外调用该方法，
*   或更改 CMT 事务超时（在 AS 特定配置/部署中）
*   或转换`SessionBean1`为 BMT，从而利用`UserTransaction.setTransactionTimeout`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-04T09:34:44.193

My advise is to manage all transaction manually. According to [Java 6 EE specification](http://docs.oracle.com/javaee/6/tutorial/doc/bncij.html):

> Enterprise beans that use container-managed transaction demarcation must not use any transaction-management methods that interfere with the container’s transaction demarcation boundaries. Examples of such methods are the commit, setAutoCommit, and rollback methods of java.sql.Connection or the commit and rollback methods of javax.jms.Session. If you require control over the transaction demarcation, you must use application-managed transaction demarcation.
> 
> Enterprise beans that use container-managed transaction demarcation also must not use the javax.transaction.UserTransaction interface.

# java - 从java访问wsdl的简单方法

> ID：14154143
> 
> 赞同：0
> 
> 时间：2013-01-04T09:12:39.633
> 
> 标签：java, wsdl

我正在寻找一种从 java 访问 wsdl 文件的简单方法。

在 python 中，`suds`我可以执行以下操作：

```
self.wsdlClient = Client(WSDL_URL)
wsdlClient.methodName() 
```

有没有办法通过 URL 连接到 wsdl？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T12:57:20.393

Python 是一种动态语言，因此您可以动态地在对象上创建方法，例如通过读取 WSDL 发现的 Web 服务的每个操作的方法。但是 Java 不是动态语言，因此不能使用 Python 方法。

[您要么必须在设计时通过将 WSDL 提供给wsimport.exe](http://docs.oracle.com/javase/6/docs/technotes/tools/share/wsimport.html) （或其他工具）之类的工具来生成代码（即创建存根），然后在应用程序中使用生成的代码，要么...

...您必须在运行时解析 WSDL 并根据从 WSDL 获取的信息创建 XML 有效负载，在这种情况下，您可能需要查看以下工具：[soap-ws](https://github.com/centeractive/soap-ws)。

最简单的方法是生成存根。

# c# - 使用 Kendo UI ASP .NET MVC 的 .NET 开发人员的 HTML5

> ID：14154144
> 
> 赞同：1
> 
> 时间：2013-01-04T09:12:40.597
> 
> 标签：c#, asp.net-mvc-3, html, kendo-ui

我使用剑道网格显示从控制器收集的电子邮件列表，然后当用户单击网格行时，电子邮件正文显示在剑道编辑器中，我想在编辑器上编辑电子邮件并将电子邮件正文保存回数据库使用网络服务。但是要在服务器端与 c# 代码进行交互并不是那么简单。我们不想有太多的 Javascript 代码。当前代码是这样的

****__ *_* __**索引.aspx**

 **```
<%: Html.Kendo().Grid(Model.mailList)
        .Name("Grid")
                    .HtmlAttributes(new { style = "height:auto;font-size: medium;" })
        .Columns(columns =>
        {
            columns.Bound(p => p.MailId).Width(200);
            columns.Bound(p => p.From.Value).Width(200).Title("Sender");
            columns.Bound(p => p.Subject).Width(200);
            //columns.command(commands =>
            //{
            //    commands.destroy();
            //});

        }) 
        .Pageable()
        .Sortable()
        .Scrollable()
        .Filterable()

        .Events(events => events.Change("onChange")) 

        .DataSource(dataSource => dataSource
            .Ajax()
            .ServerOperation(false)
            //.Destroy(destroy => destroy.Action("Index","Home"))
            .Model(model =>
            {
                //The unique identifier (primary key) of the model is the ProductID property
                model.Id(p => p.MailId);

                // Declare a model field and optionally specify its default value (used when a new model instance is created)
                model.Field(p => p.Subject).DefaultValue("N/A");

                // Declare a model field and make it readonly
                model.Field(p => p.Sender).Editable(false);
            })                              

            .PageSize(5)          
            )
            .Selectable()

%>

function sendMailToController() {
       $.ajax({
            url: "/Home/SendMail/",
            data: {
                emailID: mailID,
                emailBody: mailBody

            },
            cache: false,
            type: "GET",
            timeout: 10000,
            dataType: "json",
            success: function (result) {
                if (result.Success) { 
                   alert("Operation Completed");
                } else {
                    alert("Operation Failed");
                }
            }
        });
    } 
```

****__ *_* __** _控制器代码**

 **```
public ActionResult Index()
        {

            MailModel mailModelobj = new MailModel();
            mailModelobj.GetMailList();
            return View(mailModelobj);

        }

public JsonResult SendMail(Guid emailID, string emailBody)
        {
            MailModel mailModelObj = new MailModel();
            mailModelObj.body = emailBody;
            mailModelObj.mailID = emailID;
            var Result = mailModelObj.SendMail(mailModelObj);

            return Json(new { Success = true, Result }, JsonRequestBehavior.AllowGet);
        } 
```

问题是，它不适用于来自编辑器的长电子邮件正文。我们不喜欢上面的沟通方式。

我们希望在 C# 领域中不要过多地使用 Javascript。

我的问题是：

1.  从 kendo ui 控件与服务器端交互的最佳实践是什么（从控制器获取值并通过控制器设置值？

2.  你能否用一些小例子来解释一下，比如提交按钮，将电子邮件正文提交回服务器。

3.  是否可以使用 kendo UI 进行测试驱动开发？如何或示例将非常有帮助。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:26:01.530

> 问题是，它不适用于来自编辑器的长电子邮件正文。我们不喜欢上面的沟通方式。

使用 POST 而不是 GET：

```
[HttPost]
public JsonResult SendMail(Guid emailID, string emailBody)
{
    ...
}

$.ajax({
        url: "/Home/SendMail/",  (you should use Url.Action here)
        type: "POST",
        data: {
            emailID: mailID,
            emailBody: mailBody

        },
        cache: false,
        timeout: 10000,
        dataType: "json",
        success: function (result) {
            if (result.Success) { 
               alert("Operation Completed");
            } else {
                alert("Operation Failed");
            }
        }
    }); 
```

> 从 kendo ui 控件与服务器端交互的最佳实践是什么（从控制器获取值并通过控制器设置值？

根据我的经验，这是一种很好的方法（使用 AJAX 请求）。****

# c# - FileStream 不允许我在 C 盘上创建文件

> ID：14154151
> 
> 赞同：2
> 
> 时间：2013-01-04T09:12:59.580
> 
> 标签：c#, filestream

我正在使用`FileStream`给定的`Length`. `OpenFileDialog`打开文件并`FolderBrowserDialog`获取位置。现在的问题是，当我在 D:\ 或 E:\ 驱动器上选择位置时，它会成功创建文件。但是，当我选择 C:\ 驱动器时，它会给出`Exception`类似的结果`UnauthorizedAccessException was unhandled.`
`C:\file.mp4 is denied.` 。当我选择桌面作为目标时，它会给出 no`Exception`并且不会创建文件。我正在使用此代码

```
 private void createFile()
    {
        long size = fileInfo.Length;
        string name = file.FileName.Substring(file.FileName.LastIndexOf('\\') + 1, (file.FileName.Length - (file.FileName.LastIndexOf('\\') + 1)));
        string filename = "" + location.SelectedPath + name;

        FileStream outFile = new FileStream(filename, FileMode.Create);
        outFile.SetLength(size);
        outFile.Close();
    } 
```

我的 UAC 已禁用，而且我是管理员用户。我使用的是 windows 8 pro。任何人都可以解释什么是解决方案？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T09:18:54.120

权限问题。对于 Vista/Windows 7/8，`C:\`驱动器被视为系统，您需要提升进程的权限才能直接在其下创建文件。尝试以管理员身份运行您的进程或 Visual Studio，它应该可以工作。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-24T15:23:04.660

右键单击 exe => 以管理员身份运行 => 继续 => 立即检查。它现在应该可以工作了。

# windows - HowTo：通知应用程序数据库表行已更新？

> ID：14154153
> 
> 赞同：1
> 
> 时间：2013-01-04T09:13:10.133
> 
> 标签：windows, multithreading, postgresql, mfc, triggers

我正在使用 PostgreSQL 开发基于 MFC 的基于 Windows 的应用程序，该应用程序将执行

1.  从 UI 获取信息
2.  执行一些逻辑并将相关信息存储到数据库中
3.  存储的信息必须立即或按计划间隔（例如在 xyz 日期的 5:00）通过网络发送

目前，我们开发了一种调度机制（线程），它不断地轮询数据库以获取数据库中插入的新信息。线程获取信息并发送到网络模块。

但是，我觉得这不是正确的方法

1.  每次轮询都是开销。有时可能没有什么可以执行
2.  这不是实时的，因为我们每 5 秒轮询一次。

所以

1.  有没有办法在数据库中更新信息后立即向我的网络模块发送触发器？

2.  或者有什么更好的方法来完成这个任务？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:12:23.090

为此，您可以使用 PostgreSQL 的侦听/通知功能。

*   [http://www.postgresql.org/docs/current/static/sql-listen.html](http://www.postgresql.org/docs/current/static/sql-listen.html)
*   [http://www.postgresql.org/docs/current/static/sql-notify.html](http://www.postgresql.org/docs/current/static/sql-notify.html)

对消息感兴趣的客户端将执行一条`listen`语句，然后触发器将执行`notify`它们。

我不使用 C#，但是根据[手册](http://npgsql.projects.pgfoundry.org/docs/manual/UserManual.html)，您可以以异步方式检索消息 - 这仍然涉及一些“轻量级”轮询，因为通知消息仅作为服务器答案的一部分发送。该手册声称运行“空”语句（例如`;`）就足够了。使用 Java/JDBC，我使用了一个简单的`select 42`方法，它不会对服务器施加很大的工作量，因为没有触及任何表。

这种轮询肯定比实际检索表的数据更快、更具可扩展性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:41:01.180

是的你是对的@RDX，你不应该每次都轮询它，而是你可以在 Postgres 中编写一个触发器，然后从那个触发器尝试调用一个可以在下面的线程中看到的 java 程序。

[从 Postgres 触发器调用 java pgm](https://stackoverflow.com/questions/6614710/postgres-db-trigger-calling-java-function)

# hyperlink - IE7中的图片超链接不可点击

> ID：14154160
> 
> 赞同：0
> 
> 时间：2013-01-04T09:13:58.947
> 
> 标签：hyperlink, internet-explorer-7

下面网页中的图片链接到各自的页面。在 IE8 和 IE9 中运行良好，但在 IE7 中运行良好。在 IE7 中，当您将鼠标悬停在图像上时，链接 url 被识别（浏览器左下角的预览）但不可点击？

[http://www.signport.co.uk/test/asg_ourwork.php](http://www.signport.co.uk/test/asg_ourwork.php)

谁能告诉我是否有解决办法？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:21:10.563

此解决方案是新的解决方案：

## CSS

```
.item a{
   display:block;
   overflow:hidden;
   height:170px;
   -moz-box-shadow:0 0 10px black;
   -webkit-box-shadow:0 0 10px black;
   -o-box-shadow:0 0 10px black;
   -ms-box-shadow:0 0 10px black;
   box-shadow:0 0 10px black;
} 
```

您可以删除不需要的 box-shadow SPAN。我做到了，所以你只需要添加这行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:15:15.383

问题是标签的混乱。

在**[此示例](http://jsfiddle.net/ignaciocorreia/v64AD/2/)**中，您可以看到更正工作。在 chrome 中，它的工作原理和你的完全一样。在 IE7 中，链接按您的意愿工作，您只需要更正翻转。

## 问题：

```
 <div style="opacity: 1;" class="item">
    <a href="http://www.signport.co.uk/test/asg_ask.php">
    <div class="boxshadow">
        <p>
            <img src="http://www.signport.co.uk/test/Images/thumb_ask.jpg" alt="ASK Italian" height="170" width="300">
        </p>
        </div>
      </a>
</div> 
```

## 解决方案

**HTML**

```
 <div style="opacity: 1;" class="item">
    <a href="http://www.signport.co.uk/test/asg_ask.php">
        <span class="boxshadow"></span>
       <img src="http://www.signport.co.uk/test/Images/thumb_ask.jpg" alt="ASK Italian" height="170" width="300">
     </a>
</div> 
```

**CSS**

```
.projects .item{box-shadow: 0 0 10px 0 black;padding:0;margin:10px;}
.projects a {display: block;height: 150px;margin-bottom: 20px;}
.projects a .boxshadow {position: absolute;z-index: 999999;box-shadow: none;} 
```

# compass-sass - 如何使用指南针 twitter 引导程序，如指南针蓝图

> ID：14154163
> 
> 赞同：0
> 
> 时间：2013-01-04T09:14:11.187
> 
> 标签：compass-sass

我已经安装了 compass_twitter_bootstrap。我将它导入到我的 scss 文件中，就像我们导入指南针一样。

```
@import "compass";
@import "compass_twitter_bootstrap"; 
```

导入 compass 是正常的，但是在导入 compass_twitter_bootstrap 时，它会覆盖编译后的 css 中的所有 css。意味着 bootstrap 中的所有 css 都被导入到 style.css。我希望它像指南针文件一样工作。

在这个指南针和引导程序中，我真的是菜鸟。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T21:05:42.733

You might have to require it in your `config.rb`

```
require 'compass_twitter_bootstrap' 
```

# java - 存储列表的值

> ID：14154172
> 
> 赞同：0
> 
> 时间：2013-01-04T09:14:32.640
> 
> 标签：java

我有一个 Map ，但我希望地图的值是 ArrayList 类型

```
Map m = new HashMap(); 
```

因为键“A”的值本身将具有多个值，例如。键“A”的值是 10,20,30 请告知如何实现这一点，我在下面创建了第一步

```
LinkedHashMap<String,List<String>> A = new LinkedHashMap<String,List<String>>(); 
```

请告知如何在下一个列表中添加多个值并将其与 Map 一起存储在 put 操作中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:22:29.670

这是一个程序。

```
import java.util.ArrayList;
import java.util.LinkedHashMap;
import java.util.List;

public class Test {

    public static void main(String[] args) {
        LinkedHashMap<String,List<String>> A = new LinkedHashMap<String,List<String>>();
        List<String> list = new ArrayList<>();
        list.add("1");
        A.put("1", list);

        //add new values
        list = A.get("1");
        if(list!=null){
            list.add("2");
        }else{
            list = new ArrayList<String>();
            list.add("2");
        }
        A.put("1", list);

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:19:26.737

据我所知，您可以使用 Apache MultiValueMap。它符合您的要求。 http://commons.apache.org/collections/apidocs/org/apache/commons/collections/map/MultiValueMap.html

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T09:17:47.310

如果我正确理解了这个问题，那么这对我来说似乎是正确的方法，那么您需要做的就是：

```
List<String> strings = new ArrayList<String>();
strings.add("10");
strings.add("20");
strings.add("30");

A.put(strings); 
```

或者您可以：

```
A.put(Arrays.asList("10", "20", "30")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T09:18:01.047

像这样 -

```
LinkedHashMap<String,List<String>> A = new LinkedHashMap<String,List<String>>();
List<String> list = new ArrayList<String>();
list.add("10");
list.add("20");
list.add("30");
A.put("a", list); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T09:18:05.150

喜欢 ：

```
List<String> list = new ArrayList<>();
list.add("abc");
list.add("xyz");
// ....

Map<String,List<String>> map = new HashMap<>();
map.put("Key", list); 
```

# winapi - 打开名称长度超过 127 个字符的文件时，OpenFile API 返回错误

> ID：14154173
> 
> 赞同：0
> 
> 时间：2013-01-04T09:14:34.680
> 
> 标签：winapi, file-io

我正在尝试打开位于目录中的文件。如果长度大于或等于 127，则始终返回错误代码 13。

```
char name[200]="E:\\suri_temp\\abc85\\tool\\src1111\\turi_temp\\abc85\\tool\\src1111\\puri_temp\\abc85\\tool\\src\\nuri_temp\\abc85\\to\\abcd.tmp\\suri1111.log";

int len = strlen(name); //len=127

HFILE handle ;
WORD temp;
OFSTRUCT ofstruct;

if( (handle = OpenFile(name, &ofstruct, OF_EXIST))  ==  HFILE_ERROR )
{
    temp = GetLastError(); // if length 127 or above(it comes here temp = 13)
}
else
_lclose(handle); // if length is below 127 it comes here 
```

有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T19:28:38.290

您只是发现了OpenFile的[MSDN 文章中详细记录的内容：](http://msdn.microsoft.com/en-us/library/aa365430%28v=VS.85%29.aspx)

> 注意 此功能功能有限，不推荐使用。对于新的应用程序开发，请使用 CreateFile 函数。
> 
> OFSTRUCT 结构包含一个路径字符串成员，其长度限制为 OFS_MAXPATHNAME 字符，即 128 个字符。因此，您不能使用 OpenFile 函数打开路径长度超过 128 个字符的文件。CreateFile 函数没有此路径长度限制。

如前所述，请改用 CreateFile()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T18:51:09.260

使用

```
OpenFile(name, &ofstruct, OF_EXIST)) 
```

在调试模式下可以，但在发布模式下失败。利用

```
if(GetFileAttributes("filename") == -1) 
```

# hibernate - 为什么我的 HQL 查询返回“必须以 select 或 from 开头”？

> ID：14154178
> 
> 赞同：0
> 
> 时间：2013-01-04T09:14:52.860
> 
> 标签：hibernate, hql

我正在尝试执行 HQL 删除查询，但它给出了一个例外：“查询必须以 select 或 from 开头”。

```
 transaction = session.beginTransaction();
Query query=session.createQuery("DELETE FROM category where categoryid = :categoryid");
            query.setParameter("categoryid", id);
            int result=query.executeUpdate();
        transaction.commit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:22:24.897

看看这个：[在 Hibernate 中批量删除时查询语法错误](https://stackoverflow.com/questions/2312124/query-syntax-error-when-bulk-deleting-in-hibernate)

由于您的 SQL 看起来正确，因此它似乎可能是您正在使用的查询解析器 - 所以请确保您没有使用：

```
<prop key="hibernate.query.factory_class">org.hibernate.hql.classic.ClassicQueryTranslatorFactory</prop> 
```

# html - Wordpress vs html 页面 SEO 视角

> ID：14154184
> 
> 赞同：1
> 
> 时间：2013-01-04T09:15:13.410
> 
> 标签：html, wordpress, seo, keyword, web-crawler

我知道这样的帖子还有很多。不过，他们似乎都没有回答我的问题。

假设我有两个网站。一个是 Wordpress 站点，另一个是自编 html 站点。

两个网站的文字都是一样的，所以。

这些网站只包含几个具有良好关键字富文本的页面。没有花哨的东西。

如果我将两个网站都放在网上，哪个网站在 Google 中的排名会更高？

PS：我知道 Wordpress 有很多花哨的 SEO 插件。我没有在这个等式中计算这些。人们说这样的话：“Google 只是喜欢 Wordpress 的结构。但是一些 HTML 文档更容易和更快地抓取。”

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:31:40.893

如果不并排查看两个网站的代码，就很难确定哪个排名更高。如果您确实将两个网站一起发布以进行测试，那么您可能会因内容重复而受到惩罚。

*   WordPress 的 HTML 结构和语义在创建时考虑了可访问性，这是 Google 所重视的。

*   如果您像 WordPress 一样使用友好和相对的文件名/U​​RL，这也是一个优点。

*   如果您像上面提到的@Paul D. Waite 那样使用简单的 HTML 文件，那么这确实会比 PHP 等动态页面更快地爬行。

我会得出结论，如果您的网站相对简单并且您不需要定期更新它，那么静态网站的排名会更好，因为它只是内容并且没有大惊小怪。

不要忘记入站链接将在您的页面排名中发挥重要作用。

# xml - 如何在 XML 中定义位范围

> ID：14154187
> 
> 赞同：0
> 
> 时间：2013-01-04T09:15:17.093
> 
> 标签：xml, xsd

我想在 XML 中使用一个数据类型，它指的是一个字节的 4 位，而其他 4 位用于不同的目的。像前 4 位 0..3 用于表示错误代码，位 4、5,6 和位 7 用于其他一些任务。如何在 XML 中实现这一点。

```
<DataItem DataType="Unsigned8" Length="1" TextId="T_ErrorCode" UseAsBits="true">
  <BitDataItem BitOffset="0" TextId="T_4bit_errorcode" />    ---> Line 125 
```

我可以使用：
<... BitOffset="0..3" TextId="T_4bit_errorcode" />

这显示了以下错误：

## 编辑：

使用 MSXML 4.0：

行消息 125 将“0..3”解析为 unsignedByte 数据类型时出错。属性：“BitOffset”根据其数据类型具有无效值。

使用 Xerces：

Line Message 125 value '0..3' does not match regular expression facet '[+-]?[0-9]+' 129 遇到小数点多一位

我正在验证模式，但我不确定如何找到它。我是 XML 新手。我只想知道如何表示位的范围。是否有任何位范围的数据类型，或者我必须创建一个新的用户定义类型。

XML 的第一行包含：

```
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:ds="http://www.w3.org/2000/09/xmldsig#" 
```

## 编辑2：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="GSDML-Stylesheet-HTML-V2.2.xsl" type="text/xsl"?>
<ISO15745Profile xmlns="http://www.profibus.com/GSDML/2003/11/DeviceProfile" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.profibus.com/GSDML/2003/11/DeviceProfile  ..\XSD\GSDML-DeviceProfile-v2.2.xsd">

<ProfileHeader> 
```

我希望我添加新数据类型的模式文件用 schemalocation 引用？

你能告诉我如何将字符串表示为位吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T12:24:54.107

如果您总是要引用 4 位（不少于），为什么不只使用整数值来表示范围的第一位呢？：

```
0 -> 0..3
1 -> 1..4
2 -> 2..5
3 -> 3..6
4 -> 4..7 
```

您当然不能在数据类型为 unsignedByte 的属性中使用值“0..3”，因为它根本不是数值。

# hibernate - JPA 映射查询给出错误

> ID：14154193
> 
> 赞同：1
> 
> 时间：2013-01-04T09:15:33.920
> 
> 标签：hibernate, jpa, spring-data

我是 JPA 的新手，所以我做了一个小应用程序。在我的应用程序中，我有一个 @Query，例如：

```
@Query("select a from T_RBM_OPSCREENS_APPLICATIONS a, T_SCR_APPS_OPS_ROLES b where a.id=b.app_id and b.role_id=?1") 
```

当应用程序开始运行时，它会给出错误：

> 引起：org.hibernate.hql.internal.ast.QuerySyntaxException：T_RBM_OPSCREENS_APPLICATIONS 未映射 [从 T_RBM_OPSCREENS_APPLICATIONS a，T_SCR_APPS_OPS_ROLES b 中选择 a.id=b.app_id 和 b.role_id=?1] 在 org.hibernate.hql .internal.ast.util.SessionFactoryHelper.requireClassPersister(SessionFactoryHelper.java:180) 在 org.hibernate.hql.internal.ast.tree.FromElementFactory.addFromElement(FromElementFactory.java:110) 在 org.hibernate.hql.internal.ast .tree.FromClause.addFromElement(FromClause.java:93) 在 org.hibernate.hql.internal.ast.HqlSqlWalker.createFromElement(HqlSqlWalker.java:324) 在 org.hibernate.hql.internal.antlr.HqlSqlBaseWalker.fromElement(HqlSqlBaseWalker .java:3270) 被截断。查看日志文件以获取完整的堆栈跟踪

但我做了这样的映射：

```
 @Entity
    @Table(name = "T_RBM_OPSCREENS_APPLICATIONS", schema = "RBMCORE")
    public class Application implements Serializable{

        @Id

        @Column(name = "id")
        private int id;

        @Column(name = "s_appname", unique = true, nullable = false)
        private String name;
.
.
. 
```

我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T09:20:26.107

JPQL/HQL queries use entities and their persistent fields/properties/associations. They don't use tables and columns.

Your query should be something like:

```
select a from Application a inner join a.roles role where role.id = ?1 
```

Read [the documentation](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql).

# android - 如何findViewId以编程方式完成的TextView

> ID：14154194
> 
> 赞同：0
> 
> 时间：2013-01-04T09:15:35.613
> 
> 标签：android, layout

我有一个动态编程的 textView 列表...

```
GridView layout = (GridView) context.findViewById(R.id.linearLayout1);
        PrizeAdapter adapter = new PrizeAdapter(context, 0, 0, game.getPrizeList());
        layout.setAdapter(adapter); 
```

适配器类：

```
public class PrizeAdapter extends ArrayAdapter<String> {

    private List<String> objects;

    public PrizeAdapter(Context context, int resource, int textViewResourceId,
            List<String> objects) {
        super(context, resource, textViewResourceId, objects);
        this.objects = objects;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        TextView text = new TextView(getContext());
        text.setId(position);
        text.setText(objects.get(position));
        text.setTextSize(12);
        text.setPadding(0, 5, 0, 5);
        text.setTextColor(Color.WHITE);
        text.setBackgroundColor(Color.GRAY);
        text.setGravity(Gravity.CENTER | Gravity.BOTTOM);
        return text;
    }

} 
```

据说，我创建了一个 10 TextView。我怎样才能获得特定的 textView 以便我可以用不同的颜色对其进行着色。

我试过这个

```
GridView layout = (GridView) context.findViewById(R.id.linearLayout1);
TextView view = (TextView) layout.findViewById(1);
view.setBackgroundColor(Color.YELLOW);
view.setTextColor(Color.RED); 
```

但它不起作用，只是遇到了一个空指针异常。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:22:12.227

这种行为的原因是你做得太早了。即，即使在使用 id 1 创建视图之前，您也试图访问它们。

所以发生的事情是，您要求适配器膨胀视图并且适配器控制检查什么是可见的以及应该显示什么。在 if 之后（在填充视图之前），您立即调用 findviewbyID(1)，因此该视图仍未创建，因此您得到空指针。

如果我们在填充网格后尝试使用按钮执行任务，则代码将起作用。

```
 final GridView layout = (GridView) findViewById(R.id.linearLayout1);
    PrizeAdapter adapter = new PrizeAdapter(this, 0, 0, objects2);
    layout.setAdapter(adapter);

    findViewById(R.id.button1).setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            TextView view = (TextView) layout.findViewById(1);
            view.setBackgroundColor(Color.YELLOW);
            view.setTextColor(Color.RED);

            // TODO Auto-generated method stub

        }
    }); 
```

所以2解决方案

1) 用于更改颜色的延迟处理程序帖子。

2）创建一个自定义回调接口，它将为您返回结果，如加载的视图 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:18:53.977

使用[ViewGroup.getChildAt(position)](http://developer.android.com/reference/android/view/ViewGroup.html#getChildAt%28int%29)，它将返回该位置的视图。然后将其类型转换为 TextView（因为您将 TextView 设置为直接项目视图）以设置颜色。

在动态创建对象时，您不能使用 findViewById() 的另一件事，除非您为对象设置 ID。

# c# - Regex Match.NextMatch() 用于不一致的字符串

> ID：14154198
> 
> 赞同：1
> 
> 时间：2013-01-04T09:15:42.140
> 
> 标签：c#, regex

我有这个输入字符串：

```
AT+CMGL=4\r\r\n+CMGL: 1,1,,155\r\nDFGDF312GF4J5457JG8J0JGKFJ345G67JHGFGHJ06FD45HJG86J958F4FHSGSDGFH23FJ24HGJH58G4D7D465HDK31HFDJCHGH8V7GD45231DFGF314J567V6GGK4GFJCHGKVGDJX765GHFCJX2X4537CCGHGK9VHJ3C2FJXJCGH\r\n+CMGL: 2,1,,126\r\nDFGDF312GF4J5457JG8J0JGKFJ345G67JHGFGHJ06FD45HJG86J958F4FHSGSDGFH23FJ24HGJH58G4D7D465HDK31HFDJCHGH8V7GD45231DFGF314J567V6GGK4GFJCHGKVGDJX765GHFCJX2X4537CCGHGK9VHJ3C2FJXJCGH\r\n+CMGL: 3,1,,148\r\nDFGDF312GF4J5457JG8J0JGKFJ345G67JHGFGHJ06FD45HJG86J958F4FHSGSDGFH23FJ24HGJH58G4D7D465HDK31HFDJCHGH8V7GD45231DFGF314J567V6GGK4GFJCHGKVGDJX765GHFCJX2X4537CCGHGK9VHJ3C2FJXJCGH\r\n\r\nOK\r\n 
```

我想对此进行正则表达式匹配，提取两个捕获组，并使用该`NextMatch()`方法遍历每个匹配项。

我可以实现不包括此字符串的开始（`AT+CMGL=4\r\r\n`）和结束（`\r\nOK\r\n`）的部分匹配，这对于第一次和最后一次迭代会有所不同。

这是我用于我能够实现的部分匹配的正则表达式：

```
\+CMGL: \d+,\d+,,(\d+)\\r\\n(.*?)\\r\\n 
```

正则表达式的正确语法如何获得完全匹配？

EDIT: I would like to capture the pdu length (155) and the pdu itself (nDFGDF312GF4J5457JG8J0JGKFJ345G67JHGFGHJ06FD45HJG86J958F4FHSGSDGFH23FJ24HGJH58G4D7D465HDK31HFDJCHGH8V7GD45231DFGF314J567V6GGK4GFJCHGKVGDJX765GHFCJX2X4537CCGHGK9VHJ3C2FJXJCGH) for each NextMatch().

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:15:35.143

你`regex`是正确的..你只需要使用`singleline`正则表达式的模式

```
Regex myRegex = new Regex(yourRegex,RegexOptions.IgnoreCase | RegexOptions.Singleline);
foreach(Match m in myRegex.Matches(yourText))
{
    m.Groups[1].Value;//pdu length
    m.Groups[2].Value;//pdu buffer
} 
```

# java - 重复具有不同的 MD5 校验和

> ID：14154201
> 
> 赞同：0
> 
> 时间：2013-01-04T09:15:58.253
> 
> 标签：java, android, checksum, duplicate-removal

WhatsApp 在共享时会创建图像的重复副本。虽然图像的分辨率相同，但原始图像和副本的 MD5 校验和是不同的。为什么是这样？我如何让我的应用程序意识到这是一个重复的图像。

我尝试过 MD5 和 Sha-1，这两种算法都为这两个图像生成了不同的校验和。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:29:09.630

听起来元数据可能存在差异 - 例如，时间戳可能已由 WhatsApp 服务器在制作副本时更改。

我建议您检索图像的像素数据并对其运行校验和。您可以使用[Bitmap.getPixels()](http://developer.android.com/reference/android/graphics/Bitmap.html#getPixels%28int%5B%5D,%20int,%20int,%20int,%20int,%20int,%20int%29)方法。例如：`myBitmap.getPixels(pixels, 0, myBitmap.getWidth(), 0, 0, myBitmap.getWidth(), myBitmap.getHeight());`

请记住，仅仅因为校验和相同并不一定意味着图像是相同的！如果校验和匹配，则必须对数据进行逐个元素的比较，以 100% 确保图像相同。

**编辑：**[这里](https://stackoverflow.com/a/7817481/213727) 有一个很好的例子来说明如何对相等性进行逐像素测试。请注意，如果您使用 API 12+ ，则可以使用[Bitmap.sameAs()方法！](http://developer.android.com/reference/android/graphics/Bitmap.html#sameAs%28android.graphics.Bitmap%29)

# android - 如何使用 ksoap 从 Web 服务获取 java android 中的数组

> ID：14154203
> 
> 赞同：0
> 
> 时间：2013-01-04T09:16:01.957
> 
> 标签：android, web-services, ksoap

我有一个 java web 服务，我想与一个使用 ksoap 的 android 客户端一起使用。我的网络服务给出了一个如下所示的答案：

```
java.util.List : "[mobilerestaurantbooking.RMenu@66eb63f8,
mobilerestaurantbooking.RMenu@67f06391,
mobilerestaurantbooking.RMenu@5718f9e6,
mobilerestaurantbooking.RMenu@28be97b6,
mobilerestaurantbooking.RMenu@78da429f]" 
```

这类似于 id, name , category,.... 并将其传递给我的应用程序，但输出类似于 anyType{}

这是我在android中的代码

```
 try {
            aht.call(SOAP_ACTION, soapEnvelope);
            SoapObject response = (SoapObject)soapEnvelope.bodyIn;
            List<String> categories = new ArrayList<String>();
            int count = response.getPropertyCount();

            for(int i = 0; i < count; i++) {
                if(response.getProperty(i) != null)
                    categories.add(response.getProperty(i).toString());
            } 
```

谁知道我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T08:42:06.997

```
public class KSOAP extends Activity 
{
    ListView list;
    ArrayList<String> arraylist = new ArrayList<String>();
    ArrayAdapter<String>  arrayadapter;

    Button btn;
    TextView tv,tv2,tv3; 
    EditText no1,no2;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) 
{ 
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

tv=(TextView)findViewById(R.id.textView1);
tv2=(TextView)findViewById(R.id.textView2);
//tv3=(TextView)findViewById(R.id.textView3);

list=(ListView)findViewById(R.id.listView1);

no1=(EditText)findViewById(R.id.editText1);
no2=(EditText)findViewById(R.id.editText2);

btn =(Button)findViewById(R.id.button1);
btn.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        String NAMESPACE = "http://tempuri.org/" ;    
        //"http://vladozver.org/";
        String METHOD_NAME = "GetStringList"; //"GetSumOfTwoIntsList";//
        String SOAP_ACTION = "http://tempuri.org/GetStringList";  
        //"http://vladozver.org/GetSumOfTwoInts";
        String URL = "http://192.168.0.203/recharge_service/service.asmx";
        //"http://192.168.0.203/Recharge_Service/Service.asmx";

        SoapObject Request = new SoapObject(NAMESPACE, METHOD_NAME);

//      PropertyInfo pi = new PropertyInfo();
//      pi.setName("Operand1");
//      pi.setValue(Integer.parseInt(no1.getText().toString()));
//      pi.setType(int.class);
//      Request.addProperty(pi);
//
//      PropertyInfo pi2 = new PropertyInfo();
//      pi2.setName("Operand2");
//      pi2.setValue(Integer.parseInt(no2.getText().toString()));
//      pi2.setType(int.class);
//      Request.addProperty(pi2);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.dotNet = true;
        envelope.setOutputSoapObject(Request);
        try
        {
        AndroidHttpTransport transp = new AndroidHttpTransport(URL);
        transp.call(SOAP_ACTION, envelope);

        SoapObject obj1 = (SoapObject) envelope.bodyIn;

        SoapObject obj2 =(SoapObject) obj1.getProperty(0);

        for (int i = 0; i< obj2.getPropertyCount(); i++) 
            { 
                // int id1 = Integer.parseInt(obj2.getProperty(0).toString());
               String id1=obj2.getProperty(0).toString();

               if(id1 != "")
               { 
                 arraylist.add( id1);   

               }
                /* tv3.setText(id3);*/
            }

        }
        catch(Exception e)
        { tv.setText(e.toString());
        e.printStackTrace();
        }

        //tv.setText(""+ count);

               list.setAdapter(arrayadapter);
    }
});

        arrayadapter = new ArrayAdapter<String>( this, 
        android.R.layout.simple_list_item_1, arraylist );
       list.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub

        }
    });

}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T08:50:21.717

我也喜欢它，但我在菜单类中没有任何记录。

```
SoapObject result = (SoapObject) soapEnvelope.bodyIn;

Menu[] menus = new Menu[result.getPropertyCount()];

for (int i = 0; i < menus.length; i++) { 
   SoapObject so = (SoapObject) result.getProperty(0); 
   Menu s = new Menu(); 
   s.setID(Integer.parseInt(so.getProperty(0).toString())); 
   s.setName(so.getProperty(1).toString()); 
   s.setPrice(Double.parseDouble(so.getProperty(2).toString())); 
   s.setCategory(so.getProperty(3).toString()); 
   menus[i] = s; 
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T12:06:19.597

```
SoapObject result = (SoapObject) soapEnvelope.bodyIn;
Menu[] menus = new Menu[result.getPropertyCount()];
for (int i = 0; i < menus.length; i++) {
SoapObject so = (SoapObject) result.getProperty(i);
    ID = so.getProperty(0).toString();
    Name = so.getProperty(1).toString();
    price = so.getProperty(2).toString();
    Catagory = so.getProperty(3).toString();
} 
```

在一个对象中得到结果后：

```
SoapPrimitive so = (SoapPrimitive) so.getProperty(1);
firstlist[i] = so.getPropertyAsString(0).toString(); 
```

# c# - 在一般样式的事件处理程序中获取控件的 grid.column 属性

> ID：14154204
> 
> 赞同：0
> 
> 时间：2013-01-04T09:16:17.517
> 
> 标签：c#, wpf, wpfdatagrid

我的应用程序中有很多文本框，以及设置事件处理程序的样式：

```
<EventSetter Event="MouseEnter" Handler="GeneralTextBoxMouseEnter"/> 
```

文本框位于网格中，例如，这是其中一个文本框的 xaml 代码：

```
<Grid>
    <TextBox Name="sat6" Grid.Column="1" Style="{StaticResource anHourSatAm}" />
</Grid> 
```

这是 GeneralTextBoxMouseEnter 事件处理程序

```
 private void GeneralTextBoxMouseEnter(object sender, MouseEventArgs e)
    {
        TextBox tb = (TextBox)sender;

        MessageBox.Show((String)(tb.Grid.Column);

    } 
```

我收到这样一个属性不存在的错误。但是在VS2010的属性框中它存在，我怎样才能检索到值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:22:32.133

您需要使用名为 GetColumn of Grid 的静态方法。

```
private void GeneralTextBoxMouseEnter(object sender, MouseEventArgs e)
    {
        TextBox tb = (TextBox)sender;

        MessageBox.Show(Grid.GetColumn(tb));

    } 
```

希望能帮助到你..

# java - 无法在 Internet Explorer 中看到新创建的学生？

> ID：14154206
> 
> 赞同：0
> 
> 时间：2013-01-04T09:16:20.863
> 
> 标签：java, html, internet-explorer, caching, spring-mvc

我正在使用 Spring MVC 架构。

我在主页上有一个按钮`Create New Student`，在它下面我有一个表格，上面有所有学生的列表。

所以每当我点击一个`Create New Student`按钮时，都会打开一个弹出窗口，询问学生的详细信息。

并在输入信息并单击`submit`按钮后，将其发送回`homepage`。

但是应该将新学生添加到具有学生列表的表中。

这在`chrome`和中运行良好`Firefox` 。我可以在表格中看到新学生。

但是在我使用的 Internet Explorer 是 8 和 9 的情况下。我无法在表格中看到新学生。这是因为 Internet Explorer 正在存储缓存。

当我重新启动我的 Internet Explorer 时，新创建的学生出现在表中。

那么我如何确保它不存储缓存。

我需要在`controller`or中更改我的代码`Jsp`吗？

如何在使用服务器端代码执行控制器代码之前清除缓存？

如果您需要这些文件或任何其他文件，请告诉我。

# iphone - Facebook 分享帖子，包括 url 下的文字

> ID：14154208
> 
> 赞同：-1
> 
> 时间：2013-01-04T09:16:28.083
> 
> 标签：iphone, ios, xcode, facebook, social-networking

这是我想从我在 facebook 上的应用程序中获取的帖子，但我无法在 url 下添加消息（“这是我的消息”），我能够使用以下代码发布 url 和标题：

![帖子应该在 Fb 上看起来像这样](../Images/dbf49239dcebcf8a5a842d3158a23536.png)

这是我在 Fb 上发帖的无效方法

```
-(void)fb_share
{
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {

    SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

    SLComposeViewControllerCompletionHandler myBlock = ^(SLComposeViewControllerResult result){
        if (result == SLComposeViewControllerResultCancelled) {

            NSLog(@"Cancelled");

        } else

        {
            NSLog(@"Done");
        }

        [controller dismissViewControllerAnimated:YES completion:Nil];
    };
    controller.completionHandler =myBlock;

    [controller setInitialText:@"This is my title"];

    [controller addURL:[NSURL URLWithString:@"http://www.pinterest.com"]];
   // [controller addImage:[UIImage imageNamed:@"fb.png"]];

    [self presentViewController:controller animated:YES completion:Nil];

}
else{
    NSLog(@"UnAvailable");
}

} 
```

这段代码我给出了这个结果：

![在此处输入图像描述](../Images/fa44481b12a67ee00cf87d3e31190acf.png)

但我不希望帖子是这样的，我想在 url 下给出我自己的消息（比如“这是我的消息”），请谁能告诉我如何以编程方式做到这一点。谢谢进步

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:42:21.937

您的替代方法是使用[iPhone-Facebook-Graph-API](https://github.com/reallylongaddress/iPhone-Facebook-Graph-API/tree/59e639922c4bf6953162ea81998f2ff951cd1769)以使其易于使用。

```
NSMutableDictionary *variables = [NSMutableDictionary dictionaryWithCapacity:4];

[variables setObject:@"MESSAGE HERE" forKey:@"message"];
[variables setObject:@"URL HERE" forKey:@"link"];
[variables setObject:@"URL NAME HERE" forKey:@"name"];
[variables setObject:@"URL DESC HERE." forKey:@"description"];

FbGraphResponse *fb_graph_response = [fbGraph doGraphPost:@"me/feed" withPostVars:variables]; 
```

**编辑**：参考[login-to-facebook-using-fbgraph](https://stackoverflow.com/a/11805615/1106035)链接。

# javascript - 如何在 100% JavaScript Web 应用程序上投放广告？

> ID：14154210
> 
> 赞同：4
> 
> 时间：2013-01-04T09:16:49.120
> 
> 标签：javascript, ads

事实证明，在 JavaScript Web 应用程序上放置广告比我想象的要困难得多。首先，当我说“100% JavaScript Web 应用程序”时，我指的是一个很小的 ​​HTML 文件，它加载并启动一个 JavaScript 文件，该文件绘制页面上的所有内容。换句话说，在 JavaScript 执行之前，网站是完全空的。

Adsense 是不可能的。他们根据对网站的自动扫描立即拒绝您的广告申请，他们“发现”该页面“没有内容”。我已经向 Adsense 支持发送了一堆邮件，试图让某人手动检查应用程序，但它们都得到了相同的自动生成的“无内容”电子邮件的回复。

我也尝试过使用 Chitika，但经过几个小时的尝试让广告显示我已经放弃了。***当我在页面打开后***添加广告代码时，它根本不起作用，我必须在 JavaScript 应用程序中这样做。我还尝试将广告代码放在 iframe 中，这确实有效，但广告丢失了页面的上下文，这非常重要，因为它无法找到 Google 搜索词。

您有在 JavaScript 应用程序上投放广告的经验吗？你怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T10:04:26.960

评论中的@Dan 有一个观点——如果 Adsense 无法从您的网站中获得任何意义，那么 Google 机器人也不会，这意味着您的网站不会出现在 Google 中。

如果您想为您的网站带来任何类型的流量，那么您至少需要从常规 HTML 中创建一个初始屏幕，以便 Google 可以连接。如果它随后被 JS 代码覆盖，那很好，尽管可能值得为所有用户保留它，直到他们单击“开始”按钮或其他东西。

初始屏幕页面还将为您提供放置广告的起点。

# ruby-on-rails - 将 JSON 响应保存为对象 rails

> ID：14154211
> 
> 赞同：0
> 
> 时间：2013-01-04T09:16:51.813
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, model

我希望在这里澄清我的理解或实际理解......我有一个像这样的 JSON 响应

```
 {
 "resultCount":1,
  "results": [
 {"kind":"ebook", "artistId":545975179, "artistName":"Gareth Halfacree", "price":9.99, 
 "description":"<p><b>Make the most out of the world&rsquo;s first truly compact  computer<\/b><\/p><p>It's the size of a credit card, it can be charged like a smartphone,  it runs on open-source Linux, and it holds the promise of bringing programming and playing  to millions at low cost. And now you can learn how to use this amazing computer from its co-creator, Eben Upton, in <i>Raspberry Pi User Guide<\/i>. Cowritten with Gareth Halfacree, this guide gets you up and running on Raspberry Pi, whether you're an educator, hacker, hobbyist, or kid. Learn how to connect your Pi to other hardware, install software, write basic programs, and set it up to run robots, multimedia centers, and more.<\/p><ul><li>Gets you up and running on Raspberry Pi, a high-tech computer the size of a credit card <\/li><li>Helps educators teach students how to program <\/li><li>Covers connecting Raspberry Pi to other hardware, such as monitors and keyboards, how to install software, and how to configure Raspberry Pi <\/li><li>Shows you how to set up Raspberry Pi as a simple productivity computer, write basic programs in Python, connect to servos and sensors, and drive a robot or multimedia center <\/li><\/ul><p>Adults, kids, and devoted hardware hackers, now that you've got a Raspberry Pi, get the very most out of it with <i>Raspberry Pi User Guide<\/i>.<\/p>", "genreIds":["10017", "38", "9027"], "releaseDate":"2012-08-30T07:00:00Z", "currency":"USD", "genres":["Computers", "Books", "Computers & Internet"], "trackId":559783692, "trackName":"Raspberry Pi User Guide",  "artistIds":[545975179],  "artworkUrl60":"http://a2.mzstatic.com/us/r30/Publication/v4/ba/a8/2c/baa82ce0-2ac7-7026-04da-6f74bc97b403/9781118464496.60x60-50.jpg", "artistViewUrl":"https://itunes.apple.com/us/artist/gareth-halfacree/id545975179?mt=11&uo=4", "trackCensoredName":"Raspberry Pi User Guide", "formattedPrice":"$9.99", "artworkUrl100":"http://a4.mzstatic.com/us/r30/Publication/v4/ba/a8/2c/baa82ce0-2ac7-7026-04da-6f74bc97b403/9781118464496.100x100-75.jpg", "trackViewUrl":"https://itunes.apple.com/us/book/raspberry-pi-user-guide/id559783692?mt=11&uo=4", "averageUserRating":2.5, "userRatingCount":5}] 
```

}

并且我想在单击 link_to 后将某些值保存到我的书本模型中（我已经读过 link_to 比 button_to 更安全）

所以我有一个模块来处理包含在我的控制器中的解析

```
 module Book::BookFinder

BOOK_URL = 'https://itunes.apple.com/lookup?isbn='

def book_search(search)
    response = HTTParty.get(BOOK_URL + "#{search}", :headers => { 'Content-Type' => 'application/json', 'Accept' => 'application/json' })
results = JSON.parse(response.body)["results"]
end
    end 
```

在我的书籍控制器中

```
class BookController < ApplicationController
before_filter :authenticate_admin_user!
include Book::BookFinder

def searchbook

end

def results
 results = book_search(params[:search])
 @results = results

end

def savebook

Book.create(:author => response["results"]["artistName"])

end
end 
```

（首先我看到这个并认为使用rails restful 做法会更好，所以使用 new 和 create 方法？）

我有一个 link_to 设置来将数据发布到我的模型

```
<%= link_to 'Save Book', savebook_path,  :method => :post %> 
```

和我的路线

```
scope :controller  => :book do
get 'searchbook'
get 'results'
post 'savebook'

end 
```

所以目前我在点击link_to时收到一条错误消息，它说参数数量错误（0代表1）。

因为我从外部获取数据，这让我有点失望，在处理使用 new、create、edit 等从表单发布数据时，这是有道理的，但在这里我有点迷茫

谁能提供一些建议/解决方案来帮助我了解需要发生的事情

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T10:36:48.320

我建议你稍微改变一下架构。假设您在结果操作中收到 api 响应：

```
def results
  ...
  @results = book_search(params[:search])
  @book = Book.new
  @book.author = results[0]["artistName"]
  ...
end

def create
  @book = Book.new(params[:book])
  if @book.save
    redirect_to @book, notice: 'Book was successfully saved'
  else
    render action:new
  end
end 
```

结果视图，而不是

```
<%= link_to 'Save Book', savebook_path,  :method => :post %> 
```

采用

```
...
<%= form_for @book do |f| %>
  <%= f.hidden_field :author %>
  ...
  <%= f.submit 'Save book' %>
<% end %> 
```

绝对标准的 Books 控制器，带有创建动作

# java - 如何找到通过USB连接到Android设备的台式电脑的IP地址

> ID：14154216
> 
> 赞同：2
> 
> 时间：2013-01-04T09:17:01.263
> 
> 标签：java, android, ip-address

我想找到通过 USB 连接到安卓设备的台式电脑的 IP 地址。在堆栈溢出的每个线程和我发现返回设备 IP 地址的任何其他网站中。但我想要连接到 android 设备的台式电脑的 IP 地址。

有没有可用的Android API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:21:47.330

I don't this is possible, in general.

*   If the phone is connected as a mass storage device, I'm pretty sure (without looking at the spec) that the USB mass storage device class does not include this information. Why would it? It makes no sense.
*   The very idea of "the IP address" is a bit off; a computer can have *any number* of IP addresses, not just one. Think of computers with several network cards.

You might be able to implement something using a custom connection type, if possible on your phone, but then it would likely need PC-side support too.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:22:50.247

你的朋友是`arp`。具体来说，您可以读取`/proc/net/arp`具有以下格式的文件

```
IP address       HW type     Flags       HW address            Mask     Device
192.168.1.249    0x1         0x2         00:08:9b:bf:a9:fc     *        eth0
192.168.1.252    0x1         0x2         00:0d:a2:01:15:ed     *        eth0
192.168.1.172    0x1         0x0         00:00:00:00:00:00     *        eth0 
```

干杯，

# iphone - 具有多个参数的 UIButton 操作

> ID：14154221
> 
> 赞同：-1
> 
> 时间：2013-01-04T09:17:19.780
> 
> 标签：iphone, objective-c, ios, ios6, uibutton

> **可能重复：**
> [目标 C：向 UIButton 调用的方法发送参数](https://stackoverflow.com/questions/4844146/objective-c-sending-arguments-to-a-method-called-by-a-uibutton)

我的行动有问题`uibutton`。我想在单击按钮时发送参数。我看到了一些使用标签道具的例子。并且类是 id sender。但我不想修复它。行动交给我自己的经理。我能怎么做 ？

```
UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [rightButton addTarget:self
                    action:@selector(goToSubViewManager:)
          forControlEvents:UIControlEventTouchUpInside]; 
```

这是 gotosubviewmng

```
- (void)goToSubViewManager:(ViewType*)vTipi
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:23:04.810

你应该只使用`- (void)goToSubViewManager:(id)sender`. 或者`- (void)goToSubViewManager`

所以这里有两种方法可以解决您的问题。

1.  您可以使用变量或属性。

> > ```
> > - (void)yourMethod
> > 
> >     {
> >         //your code
> >         _vTipi = yourVTipi;
> >     } 
> > ```
> 
> ```
> - (void)goToSubViewManager
> {
>     //here you can use _vTipi;
> } 
> ```

1.  您可以为 UIButton 添加一个类别，以添加一个 id 类型属性（例如 @property(nonatomic) vTipi）。为 UIButton 伪造实例变量。（如何做你可以看看这个： http: [//oleb.net/ blog/2011/05/faking-ivars-in-objc-categories-with-associative-references/](http://oleb.net/blog/2011/05/faking-ivars-in-objc-categories-with-associative-references/)）然后你可以像这样使用：

> ```
> - (void)goToSubViewManager:(id)sender
> {
>     //you can user ((UIButton *)sender).vTipi
> } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:37:40.823

使用可以使用按钮的**标签**属性。然后可以通过比较分配的标签来使用该对象。

```
UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [rightButton addTarget:self
                    action:@selector(goToSubViewManager:)
          forControlEvents:UIControlEventTouchUpInside];
rightButton.tag=1;
// 
```

然后在回调中您可以将其比较为

```
- (void)goToSubViewManager:(id)sender
{
     if(sender.tag==1){
// you can use an array of that object(if multiple), then apply your logic
}

} 
```

# java - 如何在war文件中绑定源代码？

> ID：14154228
> 
> 赞同：1
> 
> 时间：2013-01-04T09:17:34.160
> 
> 标签：java, ant

我有一个部署在 WebSphere Application Server 中的 JAVA 项目。发生错误时，日志会显示如下内容：

```
[1/4/13 6:49:30:133 MYT] 0000003d theDaoImpl E org.huahsin.dao.impl.theInitDaoImpl getStatus [theInitDaoImpl:getStatus]
at org.huahsin.dao.impl.theInitDaoImpl.getStatus(Unknown Source) 
```

这个项目是使用 Ant 构建的，我已经将源代码包含在这个 war 文件中。我可以知道如何将源代码绑定到日志中，以便更清楚地了解特定功能上发生的情况`getStatus()`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:33:41.270

感谢@Gimby 和@ppeterka 的提示，我通过将属性`debug="on"`放在`<javac>`标签中解决了这个问题。

# c# - 是否有索引器返回的具有协变类型参数的内置泛型接口？

> ID：14154229
> 
> 赞同：7
> 
> 时间：2013-01-04T09:17:38.513
> 
> 标签：c#, generics, interface, covariance, indexer

在这个线程中

[如何获取 null 而不是 KeyNotFoundException 按键访问 Dictionary 值？](https://stackoverflow.com/questions/14150508/how-to-get-null-instead-of-the-keynotfoundexception-accessing-dictionary-value-b)

在我自己的答案中，我使用显式接口实现来更改基本的字典索引器行为，`KeyNotFoundException`如果字典中不存在键，则不会抛出（因为`null`在这种情况下，我很容易获得正确的内联）。

这里是：

```
public interface INullValueDictionary<T, U>
    where U : class
{
    U this[T key] { get; }
}

public class NullValueDictionary<T, U> : Dictionary<T, U>, INullValueDictionary<T, U>
    where U : class
{
    U INullValueDictionary<T, U>.this[T key]
    {
        get
        {
            if (ContainsKey(key))
                return this[key];
            else
                return null;
        }
    }
} 
```

因为在一个真实的应用程序中我有一个字典列表，所以我需要一种方法来从集合中访问字典作为接口。我使用简单`int`的索引器来访问列表的每个元素。

```
var list = new List<NullValueDictionary<string, string>>();
int index = 0;
//...
list[index]["somekey"] = "somevalue"; 
```

最简单的事情是做这样的事情：

```
var idict = (INullValueDictionary<string, string>)list[index];
string value = idict["somekey"]; 
```

当我决定尝试使用协方差特性来代替使用一组接口时提出的问题。所以我需要一个带有协变类型参数的接口才能使强制转换工作。我想到的第一件事是`IEnumerable<T>`，所以代码看起来像这样：

```
IEnumerable<INullValueDictionary<string, string>> ilist = list;
string value = ilist.ElementAt(index)["somekey"]; 
```

一点也不好，除了`ElementAt`索引器更糟糕。的索引器在`List<T>`中定义`IList<T>`，并且`T`没有协变。

我该怎么办？我决定自己写：

```
public interface IIndexedEnumerable<out T>
{
    T this[int index] { get; }
}

public class ExtendedList<T> : List<T>, IIndexedEnumerable<T>
{

} 
```

好吧，几行代码（我什至不需要在里面写任何东西`ExtendedList<T>`），它就可以按我的意愿工作：

```
var elist = new ExtendedList<NullValueDictionary<string, string>>();
IIndexedEnumerable<INullValueDictionary<string, string>> ielist = elist;
int index = 0;
//...
elist[index]["somekey"] = "somevalue";
string value = ielist[index]["somekey"]; 
```

最后的问题是：这种协变转换能否在不创建额外集合的情况下以某种方式实现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T09:44:17.350

你可以试试 use `IReadOnlyList<T>`，它是由`List<T>`.

**请注意**，我添加了`NullValueDictionary<string, string>`to的一个实例`List`，这样您就不会排队`ArgumentOutOfRangeException`了`elist[index]`。

```
IReadOnlyList<NullValueDictionary<string, string>> elist = new List<NullValueDictionary<string, string>>
                                                                    { 
                                                                        new NullValueDictionary<string, string>() 
                                                                    };
IReadOnlyList<INullValueDictionary<string, string>> ielist = elist;

int index = 0;
//...
elist[index]["somekey"] = "somevalue";
string value = elist[index]["somekey"]; 
```

**编辑：**我在 .NET 4.5 之前搜索了具有索引的协变接口和集合，但没有找到。我仍然认为有比创建单独的界面更简单的解决方案 - 只是将一个集合转换为另一个集合。

```
List<INullValueDictionary<string, string>> ielist = elist.Cast<INullValueDictionary<string, string>>().ToList(); 
```

或者使用从数组中获得的协方差

```
INullValueDictionary<string, string>[] ielist = elist.ToArray() 
```

LINQ 对整个类型的兼容性进行了一些优化，因此如果这些类型兼容，您将不会迭代序列。

来自[MONO Linq的 Cast 实现](https://github.com/mono/mono/blob/master/mcs/class/System.Core/System.Linq/Enumerable.cs)

```
public static IEnumerable<TResult> Cast<TResult> (this IEnumerable source)
{
    var actual = source as IEnumerable<TResult>;
    if (actual != null)
        return actual;

    return CreateCastIterator<TResult> (source);
} 
```

请注意，我已将`INullValueDictionary<T, U>`接口更改为包含`set`在属性中，以便`ielist[index]["somekey"] = "somevalue";`可以正常工作。

```
public interface INullValueDictionary<T, U> where U : class
{
    U this[T key] { get; set; }
} 
```

但是再一次 - 如果创建一个新的接口和类对你来说是可以的，并且你不想到处乱用演员 - 我认为这是一个很好的解决方案，如果你考虑了约束，它就会给出。

## 在 mscorlib 中寻找协方差

这可能对您不感兴趣，但我只是想找出在 mscorlib 程序集中哪些类型是协变的。通过运行下一个脚本，我只收到了 17 种协变类型，其中 9 种是`Func`s。我省略`IsCovariant`了实现，因为即使没有它，这个答案也太长了

```
typeof(int).Assembly.GetTypes()
                    .Where(type => type.IsGenericType)
                    .Where(type=>type.GetGenericArguments().Any(IsCovariant))
                    .Select(type => type.Name)
                    .Dump();

//Converter`2 
//IEnumerator`1 
//IEnumerable`1 
//IReadOnlyCollection`1 
//IReadOnlyList`1 
//IObservable`1 
//Indexer_Get_Delegate`1 
//GetEnumerator_Delegate`1 
```

# oop - 有人可以使用 SPORT 示例解释 OOP 吗？

> ID：14154231
> 
> 赞同：1
> 
> 时间：2013-01-04T09:17:47.500
> 
> 标签：oop, inheritance, programming-languages, polymorphism

我不熟悉 OOP 概念（抽象、封装、继承和多态）。

有人可以使用 SPORTS 示例来解释 OOP，例如可以有子类（足球、橄榄球、板球、拳击、斯诺克等）的运动。

还有什么是运动员管理系统的基本结构。

任何帮助将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T15:49:58.800

这是一个非常笼统的问题，不容易准确回答，但这里有一些建议，希望至少能给你一些关于继承和多态的想法。

*   所有运动（概念）实际上都是`Sport`（类）的实例。这意味着类`Football`，`Boxing`等等，都继承自类`Sport`。
*   可以在 中完成的事情，可以`Sport`在 的任何子类中完成`Sport`，因为它实际上是一项运动。例如，如果`Cheer()`、`Score()`和`win()`被定义为 中的方法`Sport`，那么每个子类也可以执行这些 - 这就是继承！
*   然而，每项运动可能有不同的计分方式。如果是这样，他们可以重写 from 的方法`Sport`，并为此提供自己的逻辑。但是，它们仍必须符合 中`Score()`设置的方法的定义`Sport`，以便它们能够像`Sport`. 这就是多态！
*   欢呼和胜利在所有运动中可能是同一个概念，所以它们可以继承自`Sport`

一个简单的伪代码示例。这可能非常愚蠢（甚至在体育术语中甚至在技术上都不正确，但我希望你明白这一点！:)）

```
public class Sport{

    public function score(){ 
        print("Scored!");
    }

    public function Win(){
        print("Won!");
    }

    public function Cheer(){
        print("Cheeeeeeeeer!!!");
    }
}

public class Soccer Inherits Sport{
    public override function score(){
        print("One goal!");
    }
}

public class Boxing Inherits Sport{
    public override function score(){
        print("Knockout!");
    }
}

// Using the classes:
Sport generalSport = new Sport(); // generalSport is just a non-specific sport
Sport soccerSport = new Soccer(); // soccerSport is a Soccer, but also a Sport!
Sport boxingSport = new Boxing(); // boxingSport is a Boxing, but also a Sport!

generalSport.Win(); // This should output: "Won!" (from Sport)
soccerSport.Win(); // ... "Cheeeeeeeeer!!!" (inherited from Sport)
boxingSport.Cheer() // ... "Cheeeeeeeeer!!!" (inherited from Sport)

generalSport.score(); // "Scored!"
soccerSport.score(); // "One Goal", since it was overridden in Soccer
boxingSport.score() // "Knockout!", since overridden in Boxing 
```

提示：想想现实生活中的“是”什么。如果 X 继承了 Y，X 可以专门定义为一个 X，但它仍然是一个 Y，并且可以这样处理（只有添加一些额外属性的可能性）。

# python - 图像分析曲线拟合

> ID：14154233
> 
> 赞同：6
> 
> 时间：2013-01-04T09:17:50.447
> 
> 标签：python, image-processing, curve-fitting

我有一堆像这样的图像：

![在此处输入图像描述](../Images/bb34621d98c3acff0ae22426019dabec.png)

没有相应的数据。我需要在蓝色曲线上自动检索大约 100 个点（通常为 x 间距）。所有曲线都非常相似，所以我需要至少 1 个像素精度，但最好使用子像素。好消息是所有曲线都从 0,0 开始到 1,1 结束，所以我们可能会忘记网格。

关于 Python 库的任何提示可以提供帮助或任何其他方法？谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T10:17:27.113

我将您的图像保存到文件`14154233_input.png`中。那么这个程序

```
import pylab as plt
import numpy as np

# Read image from disk and filter all grayscale
im = plt.imread("14154233_input.png")[:,:,:3]
im -= im.mean(axis=2).reshape(im.shape[0], im.shape[1], 1).repeat(3,axis=2)
im_maxnorm = im.max(axis=2)

# Find y-position of remaining line
ypos = np.ones((im.shape[1])) * np.nan
for i in range(im_maxnorm.shape[1]):
    if im_maxnorm[:,i].max()<0.01:
        continue
    ypos[i] = np.argmax(im_maxnorm[:,i])

# Pick only values that are set
ys = 1-ypos[np.isfinite(ypos)]
# Normalize to 0,1
ys -= ys.min()
ys /= ys.max()

# Create x values
xs = np.linspace(0,1,ys.shape[0])

# Create plot of both 
# read and filtered image and
# data extracted
plt.figure(figsize=(4,8))
plt.subplot(211)
plt.imshow(im_maxnorm)
plt.subplot(212, aspect="equal")
plt.plot(xs,ys)
plt.show() 
```

产生这个情节：

![奥斯加贝](../Images/b1889cd67342b6f077f227082de11c36.png)

然后，您可以`xs`随心所欲`ys`地做任何事情。也许你应该把这段代码放在一个返回 xs 和 ys 左右的函数中。

可以通过在每列左右拟合高斯来提高精度。如果你真的需要它，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T13:23:28.220

首先，通过阅读图像

```
from scipy.misc import imread    
im = imread("thefile.png") 
```

这给出了一个 3D numpy 数组，第三维是颜色通道 (RGB+alpha)。曲线在蓝色通道中，但网格也在那里。但在红色通道中，您有网格而不是曲线。所以我们使用

```
a = im[:,:,2] - im[:,:,0] 
```

现在，我们想要沿着每一列的最大值的位置。具有一个像素精度，它由下式给出

```
y0 = np.argmax(a, axis=0) 
```

当列中没有蓝色曲线时，即在框架之外，结果为零。On 可以通过

```
xmin, xmax = np.where(y0>0)[0][[0,-1] 
```

有了这个，您可以重新调整 x 轴。

然后，您需要亚像素分辨率。让我们专注于单个列

```
f=a[:,x] 
```

我们使用牛顿法的单次迭代来细化极值的位置

```
y1 = y0 - f'[y]/f''[y] 
```

请注意，由于离散采样，我们无法进一步迭代。尽管如此，我们想要一个很好的导数近似值，因此我们将对两者都使用 5 点方案。

```
coefprime = np.array([1,-8, 0, 8, -1], float)
coefsec = np.array([-1, 16, -30, 16, -1], float)
y1 = y0 - np.dot(f[y0-2:y0+3], coefprime)/np.dot(f[y0-2:y0+3], coefsec) 
```

PS：Thorsten Kranz 比我快（至少在这里），但我的答案具有亚像素精度，而且我提取蓝色曲线的方式可能更容易理解。

# php - 使用 Charles 和 SSL Apple 推送地址

> ID：14154235
> 
> 赞同：3
> 
> 时间：2013-01-04T09:17:58.187
> 
> 标签：php, ios, proxy, push-notification, charles-proxy

我必须确认用于发送推送通知的 PHP 代码正在使用代理。我安装了 Charles，我可以通过代理（127.0.0.1:8888）查看我的所有网络流量。

现在我想看看我的脚本是否可以正确处理推送通知。我有 ：

```
stream_context_set_option($ctx, 'http', 'proxy', 'tcp://127.0.0.1:8888');
$fp = stream_socket_client('ssl://gateway.sandbox.push.apple.com:2195', $err,$errstr, 60, STREAM_CLIENT_CONNECT, $ctx); 
```

我收到了推送通知，但我看不到查尔斯发生了什么。所以我的脚本没有使用代理...

你知道为什么吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:27:35.747

这是因为您将带有`http`选项的上下文传递给`stream_socket_client()`- 以及更多，以至于您使用了`ssl://`包装器而不是`http://`or `https://`。

这些`stream_socket_*()`函数不知道您正在实现 HTTP，因此它们不使用`http`上下文选项 - 为了使其工作，您需要执行例如

```
$fp = fopen('https://gateway.sandbox.push.apple.com:2195/path/to/file', 'r', false, $ctx); 
```

无论如何，这可能是一个更好的主意，因为您不太可能需要手动实现 HTTP 为 Apple API 提供的精细控制。

# php - 改变对象方法结果的方法

> ID：14154245
> 
> 赞同：2
> 
> 时间：2013-01-04T09:18:29.513
> 
> 标签：php, oop, decorator

我试图找到一种方法来执行一些代码来更改对象方​​法的结果，而无需实际接触对象的代码。我想出的一种方法是使用装饰器：

```
class Decorator {
    private $object;

    public function __construct($object) {
        if (!is_object($object)) {
            throw new Exception("Not an object");
        }
        $this->object = $object;
    }

    protected function doSomething(&$val) {
        $val .= "!!";
    }

    public function __call($name, $arguments) {
        $retVal = call_user_func_array(array($this->object, $name), $arguments);
        $this->doSomething($retVal);
        return $retVal;
    }
}

class Test extends BaseTest {
    public function run() {
        return "Test->run()";
    }
}

$o = new Decorator(new Test());
$o->run(); 
```

这样它就可以正常工作，但它有一个缺点，它现在对我来说无法使用 - 它需要用`new Test()`with替换所有行，`new Decorator(new Test())`这正是我想要避免的 - 大量干预现有代码。也许我可以在基类中做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T09:22:44.020

一个不是简单地重载 PHP 中的东西。所以你想做的事是做不到的。但是你现在遇到麻烦的事实是一个很大的说明你的设计是有缺陷的。或者，如果不是您的代码设计，您必须使用的代码（我感到您的痛苦）。

如果你不能做你想做的事，那是因为你的代码紧密耦合了。即，您`new`在类中使用关键字，而不是将它们（[依赖注入](http://misko.hevery.com/2008/11/11/clean-code-talks-dependency-injection/)）注入到需要它的类/方法中。

除了不能轻松地交换类之外，由于紧密耦合，您还可以轻松地测试您的单元。

**更新**

为了完整性（对于未来可能的读者）：如果特定类已经被命名空间并且您被允许更改命名空间，那么您可以考虑更改命名空间。然而，这并不是一个很好的做法，因为它可能会与例如自动加载器一起使用。[PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)就是一个例子。但是考虑到你不能这样做，我看不出你想要什么。*PS你不应该真正使用这个“解决方案”。*

**更新2**

看起来某个时候（很久以前）有一些过载扩展*，但我*[发现](https://bugs.php.net/bug.php?id=22004)的唯一一件事就是[一些错误报告](https://bugs.php.net/bug.php?id=28086)。不要指望它现在仍然有效。;-) PHP 中根本没有真正的重载。

找到了一些东西（一个不再工作的死项目，它启用了类重载）： http: [//pecl.php.net/package/runkit](http://pecl.php.net/package/runkit)

可能是另一个项目（当然也死了）： http: [//pecl.php.net/package/apd](http://pecl.php.net/package/apd)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:25:18.330

我不是 PHP 程序员，但我认为[AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming)是您正在寻找的。您可以尝试一些框架，例如在这个[答案](https://stackoverflow.com/questions/4738282/are-there-any-working-aspect-oriented-php-libraries)中列出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T09:29:40.047

来自[关于装饰器模式的维基百科文章](http://en.wikipedia.org/wiki/Decorator_pattern)：

> 1.  将原始“装饰器”类子类化为“组件”类

所以我认为你应该保持类被装饰私有并且只暴露已经装饰的类。

# kendo-ui - Kendo UI 网格 - 未执行批量更新

> ID：14154247
> 
> 赞同：1
> 
> 时间：2013-01-04T09:18:43.980
> 
> 标签：kendo-ui

我正在实现一个简单的（至少，这是目标）Kendo UI 网格，它显示两列：一列包含复选框，绑定到布尔值，另一列包含项目的显示名称。该`checkbox`列有一个简单的模板，并处理了 ，`change()` `event`以便`checkbox`更新。我已经验证了这一点，并且有效。`model``datasource`

数据源已配置为`batch`，并定义了`transport`for`read`和`update`。两者都调用一个执行 ajax 调用的函数。正如我之前所说，该`read`功能按预期处理。但是，`update`上面定义的函数`transport`不是。数据源上的`sync()`由一个简单的按钮触发，该按钮的事件与调用（或）`click`的函数挂钩。`datasource.sync()``grid.saveChanges()`

```
transport: {
            read: function(options) {
                return loadStuff(options);
            },
            update: function (options) {
                return updateStuff(options);
            }
} 
```

在 Kendo UI 代码中进行调试时，看起来 ModelSet 上的模型属性始终为空，因此`sync()`决定没有要同步的内容。有人知道这里发生了什么吗？

**更新：**`check`处理复选框/ 时看起来可能有问题`uncheck`。显然我应该使用类似的东西

```
$('#divGrid').on('click', '.chkbx', function() {
    var checked = $(this).is(':checked');
    var grid = $('#divGrid').data().kendoGrid;
    var dataItem = grid.dataItem($(this).closest('tr'));
    dataItem.set("Selected", checked);
}); 
```

不幸的是，看起来该`set()`方法未在数据项上定义。调试时，它只包含，并且没有具有该方法`data`的 Model 对象。`set()`

**更新 2：** 尝试将 ajax 调用返回的数据包装在使用`Model.define()`. 这似乎解决了模型不脏的问题，因为模型上的 _modified 属性返回`true`。但是，ModelSet 中的模型数组仍然是空的。这是 Kendo UI 中的错误，还是我走错了路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T15:06:21.143

您实际上不需要`bind`在.`click``checkboxes`

我已经发布了一个在[JSFiddle](http://jsfiddle.net/OnaBai/AtjD6/1/)中使用它的示例，您可以在其中看到它正在运行。此示例在网格中显示两列：第一个文本（勾选）和呈现为复选框的第二个布尔值（选中）；更新是批处理的（因此，它非常接近您所拥有的）。

要记住的问题是：

为了在不处于编辑模式时显示复选框，您应该定义一个模板，如下所示。您可能会意识到复选框在`disabled`默认情况下处于状态，因为您想将其作为其他字段进行编辑（首先选择单元格）。这也保证了模型正确更新：

```
{
    field   : "selected",
    title   : "Selected",
    template: "<input type='checkbox' name='selected' #= selected ? 'checked' : '' # disabled/>"
} 
```

在模型中定义该字段为布尔值：

```
schema   : {
    id   : "id",
    model: {
        fields: {
            symbol  : { type: "string" },
            selected: { type: "boolean" }
        }
    }
}, 
```

定义`transport.update`函数，例如：

```
transport: {
    read  : function (operation) {
        // Your function for reading
    },
    update: function (operation) {
        // Display modified data in an alert
        alert("update" + JSON.stringify(operation.data.models, null, 4));
        // Invoke updating function
        // that should ends with an operation.success(the_new_data)
        // In this example just say ok
        operation.success(operation.data.models)
    }
} 
```

*编辑*：如果您希望能够修改`checkbox`状态而不必先进入`edit`模式，您应该：

`disabled`从模板中删除：

```
{
    field     : "selected",
    title     : "Selected",
    template  : "<input type='checkbox' name='selected' #= selected ? 'checked' : '' #/>"
}, 
```

然后将`click`复选框上的事件绑定到以下处理函数：

```
$("#stocks_tbl").on("click", "input:checkbox", function(ev) {
    var dataItem = grid.dataItem($(this).closest('tr'));
    dataItem.set("selected", this.checked);
}); 
```

包含 的`#stocks_tbl`的`id`在哪里。您可能会看到它在[这里](http://jsfiddle.net/OnaBai/AtjD6/2/)运行。`div``grid`

**注意**：`on`制作它的三个参数很重要[`live`](http://api.jquery.com/live/)

# javascript - 动态创建的 dojo 组件没有应用 CSS 样式

> ID：14154253
> 
> 赞同：2
> 
> 时间：2013-01-04T09:18:56.953
> 
> 标签：javascript, html, css, dojo

我有一个 html 文件，我在其中实例化了一个新的 Javascript 对象。它是我动态创建一些dojo 组件的代码。我在 HTML 文件中包含 CSS 样式。但是组件没有得到正确的外观。我错过了什么吗？

这是我的一些代码： 创建组件：

```
 var buttonToolbar = new dijit.Toolbar({});     
    buttonToolbar.addChild(
        new dijit.form.Button({
            label: "1x1 layout",
            onClick: function() { mv.createLayout(1, 1);},
            iconClass: "myIcon1",
            class: "dhButton"
        })
    ); 
```

HTML头：

```
<link rel="stylesheet" href="css/main-demo.css" media="screen" />
 <link rel="stylesheet" href="js/vendor/dh/medview/css/medview.css" media="screen" />
        <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dijit/themes/claro/claro.css" media="screen" />
        <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dojox/widget/Dialog/Dialog.css" /> 
        <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.6/dojo/dojo.xd.js"></script>
           <script type="text/javascript">
            dojo.require("dijit.form.Button");     
        </script>
        <script type="text/javascript">

                   dojo.addOnLoad(function(){
                    //new object creation
                        }
                    );
                });
            </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T08:46:03.663

您必须`claro`像这样将类添加到正文标签。

```
<body class="claro"> 
```

指南：[https ://dojotoolkit.org/reference-guide/1.9/dijit/themes.html](https://dojotoolkit.org/reference-guide/1.9/dijit/themes.html)

并再次检查您是否已像这样设置`parseOnLoad`。[`dojoConfig`](http://dojotoolkit.org/documentation/tutorials/1.6/dojo_config/)

```
dojoConfig = {
    parseOnLoad: true
}; 
```

**注意：**如果你使用`parseOnLoad: true`你不应该使用`parser.parse()` [在这里查看更多。](https://stackoverflow.com/q/14515888/1115817)

# php - 错误显示在 codeigneter 中插入多个检查值

> ID：14154259
> 
> 赞同：1
> 
> 时间：2013-01-04T09:19:29.747
> 
> 标签：php, mysql, codeigniter

新年快乐

请帮助我前辈，我无法将多个选中的复选框值插入到我的数据库中。当我单击 SUBIT 时，它会显示以下错误：

```
*Error Number: 1054

Unknown column '0' in 'field list'

INSERT INTO `tbl_course_offred` (`0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, `8`, `user_id`) VALUES ('1', '2', '3', '4', '89', '5', '22', '106', '133', '11')

Filename: D:\xampp\htdocs\training\system\database\DB_driver.php

Line Number: 330 * 
```

*此处强调文字*

**这是我的表单页面：**

```
*<form action="<?php echo base_url();?>user_admin_controller/saveCourses" method="post">

<input type="checkbox" name="skill[]" id="skill[]" value="1" /> Accounting 
<input type="checkbox" name="skill[]" id="skill[]" value="2" /> Accounting Short term 
<input type="checkbox" name="skill[]" id="skill[]" value="3" /> Actuarial Courses
<input type="checkbox" name="skill[]" id="skill[]" value="4" /> Advanced Accounting 
<input type="checkbox" name="skill[]" id="skill[]" value="89" /> Advanced Level 
<input type="checkbox" name="skill[]" id="skill[]" value="5" /> Air hostesses Training
<input type="checkbox" name="skill[]" id="skill[]" value="97" /> AME 
<input type="checkbox" name="skill[]" id="skill[]" value="6" /> Athletic
                                    .
                                    .
                                    .
                                    .
<input type="submit" name="submit" value="Submit" class="button"/>
                </form>* 
```

**我的 CI_Controller：**

```
public function saveCourses() {
        $data = $_POST;
        if (isset($_POST['submit'])) {
            $data = $_POST['skill'];   // here 'SKILL' = tabel Field name
            implode(',', $data);

        }
        $data['user_id'] = $this->session->userdata('user_id');
        $this->user_admin_model->saveInstituteOfferdCourse($data);  //model function_name: saveInstituteOfferdCourse
        redirect("user_admin_controller/messageCoursesskill");
    } 
```

**我的 CI_MODEL：**

```
public function saveInstituteOfferdCourse($data) {
        $this->db->insert('tbl_course_offred',$data);
     //  return $this->db->affected_rows();

    } 
```

请帮助我如何解决这个问题？

我还有另一个帮助，例如：

**问：如何在没有“，”逗号查看页面的情况下显示数据？**

请前辈帮帮我..

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:26:33.633

你的代码有很多缺陷。

1）首先，不要将元素ID保留为数组..给一些唯一的ID

2）您没有在插入查询中提到表字段名称..

3）你犯了一个错误。您将元素名称视为表字段名称..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:23:30.123

你的桌子没有`column`as `0`。再次检查您的**表结构**。

如查询所示 - 您的表`tbl_course_offred`有`columns``[0,1,2,3,4,5,6,7,8,user_id]`

```
INSERT INTO `tbl_course_offred` (`0`, `1`, `2`, `3`, `4`, `5`, `6`, `7`, `8`, `user_id`) VALUES ('1', '2', '3', '4', '89', '5', '22', '106', '133', '11') 
```

但很明显，从给定的错误来看，没有这样的列。

粘贴以下命令的输出（mysql终端）

> 描述 tbl_course_offred

# android - cocos2dx如何在android上读取文件

> ID：14154261
> 
> 赞同：2
> 
> 时间：2013-01-04T09:19:32.040
> 
> 标签：android, c++, cocos2d-x

我在资源下有一个文本文件“test.txt”，在“util.cpp”中有一个函数“parseSth(char* str)”来读取“test.txt”做一些事情。但是，如果我像这样使用 parseSth("text.txt")，则 ios 和 android 都找不到该文件。并且使用 parseSth(CCFileUtils::sharedFileUtils()->fullPathFromRelativePath("text.txt")) 将在 ios 上正常工作，但找不到路径。为什么？我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-20T12:38:09.157

我想您的文件已嵌入到 Android 上的 APK 文件中，因此本身没有路径。使用以下函数从文件中提取数据（它会自动处理 apk/sd 卡差异）。

```
FileUtils::getInstance()->getDataFromFile(filename) 
```

# windows-phone-7 - Windows phone 7：面临传递参数的问题

> ID：14154262
> 
> 赞同：-2
> 
> 时间：2013-01-04T09:19:34.450
> 
> 标签：windows-phone-7, windows-7

现在我正在开发一个 Windows 手机应用程序，是的，这是我的第一个 Windows 应用程序。现在我面临一个问题，不知道我犯了什么愚蠢的错误。是的，当然我已经调试过了。

现在，我到底在做什么？

1.  将数据从第一页传递到第二页，
2.  在页面上，在 onNavigateTo() 方法中捕获数据，是的，我正确接收它。
3.  根据我得到的参数/数据（即 ID），我正在进行 Web 服务调用。

**问题：如果我从第 2 页移到第 3 页并再次回到第 2 页，则它再次进行网络呼叫。**`DownloadStringAsync`即在下面的代码中再次调用。

即，如果第 2 页的 ListBox 有 5 个数据，现在单击特定项目，我将移至第 3 页，如果我从第 3 页回到第 2 页，项目将翻倍，即 10 个项目（只是因为它再次拨打电话）

这是参考的可能代码：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
       base.OnNavigatedTo(e);

       type = Convert.ToInt32(NavigationContext.QueryString["Type"]);
       if (type != 0)
       {
           if (NetworkInterface.GetIsNetworkAvailable())
           {
              client.DownloadStringAsync(new Uri(Utils.Constant.WebService_URL));
            }
            else
            {
                    MessageBox.Show("Please check internet connection!!");
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T10:50:04.340

你不能使用下面的代码来测试用户是否使用了返回按钮吗？

```
e.NavigationMode == System.Windows.Navigation.NavigationMode.Back 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:16:56.067

有时这种方法（QueryString）会产生问题。

在后面的事件中，它会产生问题，最好将 id（参数）存储在隔离存储应用程序密钥中

IsolatedStorageSettings.ApplicationSettings["id"] = "你的数据";

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T10:32:14.507

`OnNavigatedTo`每当您通过向前导航或向后导航导航到页面时都会调用。这就是当您从第 3 页导航回第 2 页时它会被重新触发的原因。

您可以通过仅在前向导航上触发网络调用来避免这种情况。

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
   base.OnNavigatedTo(e);

   if (this.isInitialized) return;

   type = Convert.ToInt32(NavigationContext.QueryString["Type"]);
   if (type != 0)
   {
       if (NetworkInterface.GetIsNetworkAvailable())
       {
          client.DownloadStringAsync(new Uri(Utils.Constant.WebService_URL));
        }
        else
        {
                MessageBox.Show("Please check internet connection!!");
        }
    }
    this.isInitialized = true;
} 
```

请注意，`NetworkInterface.GetIsNetworkAvailable`在某些情况下可能会长时间阻塞（在这种情况下是 UI 线程），要解决此问题，您可以使用[网络检测事件](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh487166%28v=vs.105%29.aspx)。

# ruby - 构建正则表达式以仅匹配 2 个单词

> ID：14154263
> 
> 赞同：1
> 
> 时间：2013-01-04T09:19:35.347
> 
> 标签：ruby, regex

我正在尝试使正则表达式仅匹配 2 个单词和一个单步。没有特殊符号，只有`[a-zA-Z]`空格`[a-zA-z]`。

```
Foo Bar      # Match    (two words and one space only)
Foo          # Mismatch (only one word)
Foo  Bar     # Mismatch (2 spaces)
Foo Bar Baz  # Mismatch (3 words) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T09:22:05.007

你要`^[a-zA-Z]+\s[a-zA-Z]+$`

```
^   # Matches the start of the string
+   # quantifier mean one or more of the previous character class 
\s  # matches whitespace characters
$   # Matches the end of the string 
```

锚点`^`和`$`在这里很重要。

[演示](http://ideone.com/UFbKc1)：

```
if "foo bar" =~ /^[a-zA-Z]+\s[a-zA-Z]+$/ 
    print "match 1"
end 
if "foo  bar" =~ /^[a-zA-Z]+\s[a-zA-Z]+$/ 
    print "match 2"
end 
if "foo bar biz" =~ /^[a-zA-Z]+\s[a-zA-Z]+$/ 
    print "match 3"
end 
```

输出：

```
Match 1 
```

# android - 更改包名称的简单方法

> ID：14154264
> 
> 赞同：1
> 
> 时间：2013-01-04T09:19:37.560
> 
> 标签：android, package, project

> **可能重复：**
> [eclipse android项目中的包重命名](https://stackoverflow.com/questions/3697899/package-renaming-in-eclipse-android-project)

有没有一种简单的方法可以更改 android 项目的包名？当我在清单中将其从 xxx.en 更改为 xxx.zh 时，我需要将每个 java 文件中的所有“import xxx.en.R”修复为“import xxx.zh.R”！请帮助我，需要一个简单的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T09:35:47.683

如果您使用的是 Eclipse，则需要 3 个步骤：

1）清单的变化

2) 在导航器中选择项目，然后按 clt+h。从字符串导入 xxx.en.R 搜索；在搜索选项卡中，您将获得字符串匹配的完整列表。

3）右键单击任何匹配并选择全部替换，输入替换文本为“import xxx.zh.R;”

点击进入并完成。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-04T09:41:34.810

您可以通过以下方式尝试：`right click on your project > Android Tools > Rename Application Package`。我认为这个链接对你很有用：[How to change package name of an Android Application](https://stackoverflow.com/questions/4025369/how-to-change-package-name-of-an-android-application)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T09:44:24.183

1.  在清单文件中，而不是旧的包名，将新的包名放在每个位置您的类可能需要直接的包名引用，如活动 android:name="com.abc.Myactivity"。
2.  右键单击项目内的包名称。选择 Refactor>Rename 并键入所需的新包名称。选择“更新参考”。
3.  使用新的包名称更改布局 xml 文件

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T10:09:49.050

**这很容易只需单击要更改名称的包而不是按 F2 键它会显示警告而不是按确定而不是重命名包。**

com。*** *.* ****

按 F2 后

com.####。*****

# android - dynamic color change of progress bar in ListView

> ID：14154265
> 
> 赞同：1
> 
> 时间：2013-01-04T09:19:38.300
> 
> 标签：android, android-listview, android-progressbar

I have ListView with progressBar(I make it vertical) in every item, than I change color of progressBar in `getView()` method of my CustomCursorAdapter :

```
String MyColor = "#FFFFffff";
        final float[] roundedCorners = new float[] { 5, 5, 5, 5, 5, 5, 5, 5 };
        ShapeDrawable pgDrawable = new ShapeDrawable(new RoundRectShape(roundedCorners, null,null));        
        pgDrawable.getPaint().setColor(Color.parseColor(MyColor));
        ClipDrawable progress = new ClipDrawable(pgDrawable, Gravity.BOTTOM, ClipDrawable.VERTICAL);

        itemRow.vProgressBar.setProgressDrawable(progress);   
        itemRow.vProgressBar.setBackgroundDrawable(context.getResources().getDrawable(R.drawable.vertical_progress_bar)); 
```

,but when I scroll up/down the progress of progressBar is dissapear, I need some how redraw the bar, how? My CustomAdapter code :

```
public class CustomAdapter extends SimpleCursorAdapter {

    private Cursor cursor;
    private Activity context;
    private int layout;
    private ListItemRow itemRow;
    private LayoutInflater layoutInflater;
    private boolean[] checkBoxStates;
    private byte[] progressValues;
    int listItemCounter;

    public CustomAdapter(Activity context, int layout, Cursor c, String[] from,
            int[] to) {
        super(context, layout, c, from, to);

        this.context = context;
        this.layout = layout;
        this.cursor = c;
        checkBoxStates = new boolean[cursor.getCount()];
        progressValues = new byte[cursor.getCount()];
        int guess,fail;

        cursor.moveToFirst();
        for(int i=0;i<cursor.getCount();i++)
        {
            checkBoxStates[i] = Boolean.valueOf(cursor.getString(4));
            guess = cursor.getInt(5);
            fail = cursor.getInt(6);
            if(guess != 0)
                progressValues[i] = (byte)(100.0/(double)((double)(guess+fail)/(double)guess));
            else
                progressValues[i] = 0;
            cursor.moveToNext();
        }
        cursor.moveToFirst();

        listItemCounter = 0;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        listItemCounter = position;
        View rowView = convertView;
        if (rowView == null) {
            itemRow = new ListItemRow();
            layoutInflater = context.getLayoutInflater();
            rowView = layoutInflater.inflate(layout, null, false);

            itemRow.starChek = (CheckBox) rowView.findViewById(R.id.starCheck);
            itemRow.textViewWord = (TextView) rowView
                    .findViewById(R.id.textViewWord);
            itemRow.textViewTranslate = (TextView) rowView
                    .findViewById(R.id.textViewTranslate);

            itemRow.textViewSuccessPoints = (TextView) rowView
                    .findViewById(R.id.textViewSuccessPoints);

            itemRow.vProgressBar = (ProgressBar) rowView
                    .findViewById(R.id.vertical_progressbar);                       

            rowView.setTag(itemRow);

        } else {
            itemRow = (ListItemRow) rowView.getTag();
        }

        ListView lv = (ListView) parent;
        cursor = (Cursor) lv.getItemAtPosition(position);

        itemRow.textViewWord.setText(cursor.getString(1));
        itemRow.textViewTranslate.setText(cursor.getString(2));
        itemRow.starChek.setTag(cursor.getString(0)); // setTag _id to the star
        itemRow.starChek.setChecked(checkBoxStates[position]);                  

        //progress
        String MyColor = "#FFFFffff";
        final float[] roundedCorners = new float[] { 5, 5, 5, 5, 5, 5, 5, 5 };
        ShapeDrawable pgDrawable = new ShapeDrawable(new RoundRectShape(roundedCorners, null,null));        
        pgDrawable.getPaint().setColor(Color.parseColor(MyColor));
        ClipDrawable progress = new ClipDrawable(pgDrawable, Gravity.BOTTOM, ClipDrawable.VERTICAL);

        itemRow.vProgressBar.setProgressDrawable(progress);   
        itemRow.vProgressBar.setBackgroundDrawable(context.getResources().getDrawable(R.drawable.vertical_progress_bar));

        itemRow.vProgressBar.setProgress(progressValues[position]);             

        itemRow.starChek.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                MainActivity.dbAdapter.changeValue(v.getTag()
                        .toString(), null, null, null, String
                        .valueOf(((CheckBox)v).isChecked()), null, null, null); 

                if(((CheckBox)v).isChecked())
                    checkBoxStates[position] = true;
                else
                    checkBoxStates[position] = false;

            }
        });

        return rowView;
    }

    private class ListItemRow {
        public CheckBox starChek;
        public TextView textViewWord;
        public TextView textViewTranslate;
        public TextView textViewSuccessPoints;
        public ProgressBar vProgressBar;

    }
} 
```

what to do? Thank you !! p.s. similar problem with checkBoxes I have solved using boolean array;

# testing - 如何计算jmeter中的总响应时间？

> ID：14154266
> 
> 赞同：0
> 
> 时间：2013-01-04T09:19:45.210
> 
> 标签：testing, jmeter, performance-testing

我已经在 jmeter 中发送了 10 个连续的 http 请求。
我已将输出存储为 csv 文件。

```
endTimeMillis   responseTime    latency sentBytes   receivedBytes       responseCode
1357279943.984  1426             1426     347             287           200

1357279944.685  1888             1888     347             287           200
..............
.............. 
```

在上面每个请求显示的输出文件响应时间。但我需要计算 10 个请求的总响应时间。

如何计算jmeter中的总响应时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:58:20.130

你需要一个[事务控制器](http://jmeter.apache.org/usermanual/component_reference.html#Transaction_Controller)。将要求和的元素时间放在它下面。然后事务控制器将出现在您的所有侦听器中。它的加载和延迟时间将是其嵌套元素的这些参数的总和。

> 请注意，默认情况下，此时间包括控制器范围内的所有处理，而不仅仅是样本，这可以通过取消选中“在生成的样本中包含计时器和前置处理器的持续时间”来更改。

# android - Vertical scroll-bar in AlertDialog

> ID：14154271
> 
> 赞同：1
> 
> 时间：2013-01-04T09:20:19.990
> 
> 标签：android, android-layout

I want to display a vertical scroll-bar in alert dialog may be fast. Because it contails thousands of data to display.

```
AlertDialog.Builder builder = new AlertDialog.Builder(
                PublishingPublisher.this);
        builder.setTitle("Select following:");
    //  builder.setFastScrollEnabled(true); // can i have like this something. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:32:46.683

的确！您必须制作自定义警报对话框，其中包括您在对话框中的列表和数千个数据，如下所示：

```
LayoutInflater inflater = ((LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE));
View customView = inflater.inflate(R.layout.dialog_row, null, false);
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setView(customView); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:24:47.407

如果你想显示`listView`in`alertDialog`然后滚动将显示：

```
builder.setView(<YourListView>); 
```

# android - 使用 ArrayAdapter 的 ListView 中的按钮

> ID：14154274
> 
> 赞同：0
> 
> 时间：2013-01-04T09:20:36.157
> 
> 标签：android, android-listview, android-arrayadapter, onclicklistener, android-button

我有一个使用 POJO 类填充的 ArrayAdapter。列表视图包含 2 个布局。1 用于菜单项，1 用于类别。带分隔符的 Listview 很好。

后来我尝试在每个菜单项行中添加一个按钮来编辑其中的详细信息。在这里，当我尝试获取单击按钮的行的位置时，我遇到了问题。

我尝试使用日志显示位置。1.如果行数较少，不需要滚动。日志显示正确的位置。2\. 如果我有更多的行进入页面，那么我的日志中的位置不正确。

你能引导我到我的代码需要更正的那一行吗？提前致谢

```
public class ConfirmAdapter  extends ArrayAdapter<POJO_ConfirmMenu> {
    private ArrayList<POJO_ConfirmMenu> ticketItem;  
    Context context;
    LayoutInflater vi; 
    public ConfirmAdapter(Context context ,ArrayList<POJO_ConfirmMenu> menu) {    
        super(context, 0, menu ); 
        this.ticketItem = new ArrayList<POJO_ConfirmMenu>();    
        this.ticketItem.addAll(menu); 
        this.context =context;
        vi = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);  
        }     
    private class ViewHolder {
        TextView ticketItem;   
        TextView type;  
        TextView quantity;  
        Button cancel,edit; 
        } 
    public boolean isEnabled(int position) { 
        if (ticketItem.get(position).getItemType().equals("menucategory")) 
            return false;
            return true;
    } 
    public int getItemViewType(int position) {
        if (ticketItem.get(position).getItemType().equals("menucategory")) 
            return 0;
            return 1;
    } 
    public int getViewTypeCount() {
        return 2;
    } 
    public View getView(final int position, View convertView, ViewGroup parent) {      
        ViewHolder holder;   
        int type = getItemViewType(position);  
        if (convertView == null) { 
            holder = new ViewHolder();  
            switch (type) {
            case 0:
                convertView = vi.inflate(R.layout.group,  null); 
                holder.ticketItem = (TextView) convertView.findViewById(R.id.tvGroup);
                convertView.setBackgroundColor(Color.RED); 
                break;              
            case 1:
                convertView = vi.inflate(R.layout.confirmitem,  null); 
                holder.ticketItem = (TextView) convertView.findViewById(R.id.tvConfirmItem); 
                holder.quantity  = (TextView) convertView.findViewById(R.id.tvQuantity); 
                holder.cancel    = (Button)   convertView.findViewById(R.id.bCancel); 
                holder.edit      = (Button)   convertView.findViewById(R.id.bEdit);   
                                 holder.edit.setTag(position);  
                //   Edit button
                holder.edit.setOnClickListener(new View.OnClickListener() {  
                    public void onClick(View v) {   
                        int pos = (Integer) v.getTag();

                        Log.i("ConfirmAdapter ","Order       Edit @ position : " + pos); 
                        }       
                });   
                break; 
             }              convertView.setTag(holder); 
        } else {
            holder = (ViewHolder) convertView.getTag();  
        }     
        switch (type) {
        case 0:         
            holder.ticketItem.setText(ticketItem.get(position).getTicketItemObject().getCategoryName()) ; 
            convertView.setBackgroundColor(Color.RED);  
            break;              
        case 1:
            holder.ticketItem.setText(ticketItem.get(position).getTicketItemObject().getName());
            holder.quantity.setText(Integer.toString(ticketItem.get(position).getTicketItemObject().getItemCount())); 
            break; 
         } 
        return convertView; 
        } 
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T09:27:48.493

在`getView()`方法中，您必须为您的按钮设置标签，当您单击按钮获取整数内的标签时，它将返回您按钮单击的正确位置，如下所示。

```
else {
        holder = (ViewHolder) convertView.getTag();  
}   
holder.edit.setTag(position);  //to get the orignal position later in onClick() of button
holder.edit.setOnClickListener(new View.OnClickListener() {  
          public void onClick(View v) {   
                 int pos = (Integer) v.getTag();  //the real and updated position
             Log.i("ConfirmAdapter ","Order Edit @ position : " + pos); 
          }       
}); 
```

**更新**

注意：获得转换视图标签后，将标签设置为您的按钮并处理点击。

[View 的 setTag() getTag() 方法的主要目的是什么？](https://stackoverflow.com/questions/5291726/what-is-the-main-purpose-of-settag-gettag-methods-of-view)

# iis - iisdirinfo 在 iis7 上失败？

> ID：14154280
> 
> 赞同：0
> 
> 时间：2013-01-04T09:20:46.443
> 
> 标签：iis, nant, nantcontrib

在 iis7 上运行 iisdirinfo 时出现错误

```
.dll,1,GET,HEAD,POST,DEBUG

BUILD FAILED

   C:\iisinfo.build(9,2):
      Error retrieving info for virtual directory 'WebServices' on 'localhost:80' (wesite: Webservice).
      Object reference not set to an instance of an object.

Total time: 0.5 seconds. 
```

这是在正确显示许多属性之后。所以我猜它稍后会被另一个属性绊倒。

任何人都看过这个或对可能导致问题的原因有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:08:46.827

所以我分叉了 repo 并进行了一些额外的调试，看起来失败归结为属性的空值。

使用 appcmd 它看起来像

```
 <redirectHeaders>
</redirectHeaders> 
```

我已经在代码中检查了 null 并将在今天晚些时候提交拉取请求

# java - How can I calculate integrals of step functions in the most simple way?

> ID：14154286
> 
> 赞同：3
> 
> 时间：2013-01-04T09:21:01.540
> 
> 标签：java, math, statistics, time-series, mean

I have a time series of recoreded frequencies, from which I would like to calculate secondly means. However the sample rate is not constant, which means that a simple arithmetic mean is wrong. What I would actually like to compute is the integral of the step function (described by the timeseries) within each secondly interval.

Consider for example this time series:

```
08:11:23.400 -> 49.9 Hz
08:11:24.200 -> 50.1 Hz
08:11:24.600 -> 50.15 Hz
08:11:24.800 -> 50.05 Hz
08:11:25.100 -> 49.95 Hz 
```

The arithmetic mean of the second `08:11:24.000 - 08:11:25.000` would be (50.1 + 50.15 + 50.05)/3 = 50.1\. But this is not the mean fequency measured in that second. It is instead: (200*49.9 + 400*50.1 + 200*50.15 + 200*50.05)/1000 = 50.06, because the measured frequencies were true for different amounts of time.

This is the calculation of a weighted mean (with the hold times as weights) or equivalently the calculation of the integral of the step function (and then deviding by the time).

First of all: **Is there a name for this specific calculation?** It seems a rather standard computation on time series to me. Not knowing a name for this makes it hard to google for it.

Second: **Which java library supports such a calculation?** I would like to avoid implementing this by myself. I refuse to believe that there is no good standard java library offering this. I was looking into the apache commons math library but without any luck (but again: maybe I'm just missing the correct term to look for).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:09:56.053

我不确定公式 200*49.9 + 400*50.1 + ... 是否正确。这意味着频率 49.9 从 08:11:23.400 到 08:11:24.200 有效，就好像频率传感器测量未来频率一样。我宁愿认为它表示过去的频率。那么，频率真的是阶跃函数吗？还是锯齿函数更接近现实？甚至是用样条线重建的平滑函数？

因此，我建议您自己计算积分，并准备好更改计算公式。至于错误，您同样可以在从库中选择函数以及设置其参数时出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T01:05:32.540

Java中没有多少库可以正确地做到这一点。但是您要寻找的基本内容是数字信号处理。

这是一个类似的问题：[Java 中的信号处理库？](https://stackoverflow.com/questions/636686/signal-processing-library-in-java)

# symfony - 表单验证忽略空值

> ID：14154287
> 
> 赞同：10
> 
> 时间：2013-01-04T09:21:07.177
> 
> 标签：symfony, symfony-2.1, symfony-forms

表格类型：

```
class BranchFormType extends AbstractType {

 public function buildForm(FormBuilderInterface $builder, array $options) {
        $builder->add('name');
    }

    public function getName() {
        return 'branch';
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'My\MainBundle\Entity\Branch',
        ));
    }

} 
```

在实体定义中：

```
<field name="name" column="name" type="string" length="255"/> 
```

没有 nullable=true 并且该字段在呈现时具有必需的属性。

验证.yml：

```
My\MainBundle\Entity\Branch:
    properties:
        name:
            - NotBlank: ~ 
```

symfony 会自动找到这个文件还是我必须包含在某个地方？该文档只是声明表单自动使用验证服务。

控制器：

```
 $branch = new Branch();
    $form = $this->createForm(new BranchFormType(), $branch);

    if ($request->isMethod('POST')) {

        $form->bindRequest($request);

        if ($form->isValid()) {
            $em->persist($branch);
            $em->flush();

            return $this->redirect($this->generateUrl('view_branch'));
        }
    }

    return $this->render('MyMainBundle:Branch:create.html.twig', array(
                'form' => $form->createView()
            )); 
```

提交时出现以下错误：

> SQLSTATE [23000]：违反完整性约束：1048 列“名称”不能为空

因此，尽管 name 为空并继续使用空值保留实体，isValid 仍返回 true。名称为空时，isValid如何返回true？ORM定义说nullable=false？`有什么想法吗？我没有定义额外的验证器。我用 sf2.1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:41:04.023

使用[NotBlank](http://symfony.com/doc/current/reference/constraints/NotBlank.html) [验证](http://symfony.com/doc/current/book/validation.html)约束

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T01:21:51.533

看起来验证文件位于正确的文件夹中：

```
src/My/MainBundle/Resources/config/validation.yml 
```

确保您没有使用验证组？

无论如何，我会用`Assert`这个验证文件来查看是否有问题：

**启用注释：**

```
# app/config/config.yml
framework:
    validation: { enable_annotations: true } 
```

**设置您的实体：**

```
namespace My\MainBundle\Entity\;

use Symfony\Component\Validator\Constraints as Assert;
//...

class Branch{

    /**
     * @Assert\NotBlank
     */
    protected $name;

} 
```

你能试试这个吗？

此外，您可以从控制器中测试这样的验证：

```
// ...
use My\MainBundle\Entity\Branch;

public function indexAction()
{
    $branch = new Branch();

    $branch->setName('');

    $validator = $this->get('validator');
    $errors = $validator->validate($branch);

    if (count($errors) > 0) {
        return new Response(print_r($errors, true));
    } else {
        return new Response('Entity is valid');
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-18T14:31:25.223

您应该检查验证服务是否正确地聚合了您的映射：

```
$validator = $this->container->get('validator'); // do it your way

$metadata = $validator->getMetadataFactory()->getClassMetaData('My\\MainBundle\\Entity\\Branch');

var_dump($metadata); 
```

这将允许您检查您的 yml 配置是否已被考虑在内。

如果没有，请检查用于命名和放置验证 yml 文件的约定，即使看起来没问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T14:18:39.397

尝试在 NotBlank 之外添加[NotNull](http://symfony.com/doc/current/reference/constraints/NotNull.html)约束。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T02:36:11.010

自创建 validation.yml 以来，您是否尝试过清除开发缓存？我也有类似的挫败感，这为我解决了一切问题。

# css - 为什么我必须为悬停伪类指定 !important 才能生效？

> ID：14154288
> 
> 赞同：0
> 
> 时间：2013-01-04T09:21:08.090
> 
> 标签：css

我必须使用该`!important`属性才能使悬停样式生效。如果没有我包括该`!important`属性，下面的代码将无法工作。这是为什么？

**非工作代码**

```
#sbw a.content_copy:link {
    color: #F12B63;
    padding: 10px;
}

#sbw a.content_copy:visited {
    color: #F12B63;
    padding: 10px;
}

#sbw a.content_copy:hover {
    color: #ffffff;
    background-color: #F12B63;
    padding: 10px;

} 
```

**工作代码**

```
#sbw a.content_copy:link {
    color: #F12B63;
    padding: 10px;
}

#sbw a.content_copy:visited {
    color: #F12B63;
    padding: 10px;
}

#sbw a.content_copy:hover {
    color: #ffffff !important;
    background-color: #F12B63;
    padding: 10px;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:23:07.990

`:visited`带有和的规则`:link`可能看起来更具体。

你可以这样做：

```
#sbw a.content_copy:hover, #sbw a.content_copy:visited:hover, #sbw a.content_copy:link:hover {
    color: #ffffff;
    background-color: #F12B63;
    padding: 10px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:40:49.827

```
color: #ffffff !important; 
```

这只确保`#ffffff`始终应用悬停颜色。例如 ：-

```
p { color: red !important; }
 p { color: blue; } 
```

因为`paragraph`无论第二行 CSS 是什么，颜色都将始终为红色。

**为什么要使用`!important`**
假设您正在为您的页面编写 css，您在 `p { color: red ;}` 第一行添加了一个样式，但后来您再次 `p { color: blue;}`为相同的元素添加了，所以您的第一个样式将消失，并且浏览器始终会应用第二个样式。因此，如果您添加`!important`您的样式，它会强制浏览器仅使用该样式。

# c++ - why isn't the copy constructor called

> ID：14154290
> 
> 赞同：20
> 
> 时间：2013-01-04T09:21:16.863
> 
> 标签：c++

> **Possible Duplicate:**
> [What are copy elision and return value optimization?](https://stackoverflow.com/questions/12953127/what-are-copy-elision-and-return-value-optimization)

I am having difficulty understanding why in the following piece of code the copy constructor is not called.

```
#include <iostream>

class Test
{
public:
  Test(int){std::cout << "Test()" << std::endl;}
  Test(const Test&){std::cout << "Test(const Test&)" << std::endl;}
};

int main()
{
  // Test test;
  Test test2(Test(3));

  return 0;
} 
```

Can someone explain why only the constructor is called and no copy constructor ?
Thanks.

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-04T09:22:47.053

这称为**复制省略**。
允许编译器执行此优化。尽管标准不保证任何商业编译器都会尽可能执行此优化。

* * *

**标准参考**：

**C++03 12.8.15：**

> [...]在以下情况下允许省略复制操作（可以组合起来以消除多个副本）：
> 
> [...]
> 
> *   当尚未绑定到引用（12.2）的临时类对象将被复制到具有相同 cv-unqualified 类型的类对象时，可以通过将临时对象直接构造到省略副本的目标中来省略复制操作

* * *

您可以使用一些编译器设置来禁用此优化，例如在 gcc 的情况下，从**[手册页](http://gcc.gnu.org/onlinedocs/gcc-4.4.4/gcc/C_002b_002b-Dialect-Options.html)**：

```
-fno-elide-constructor 
```

> C++ 标准允许实现省略创建仅用于初始化相同类型的另一个对象的临时对象。指定此选项会禁用该优化，并强制 G++ 在所有情况下调用复制构造函数。

但是，使用它会使您的代码在不同的编译器之间不可移植。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-04T09:22:59.857

这是因为您的编译器执行了优化。*允许*编译器执行此类优化，尽管这不是*必需*的，因此**不能**保证。

请注意重要的一点，即使最终没有调用复制构造函数，它在**语义**上也是*可访问*的。也就是说，如果您制作了 copy-constructor `private`，您的代码将**无法**编译！这是因为语义检查是在优化阶段之前完成的，这意味着编译器首先检查复制构造函数是否可访问；**如果**它是*可访问*的，那么只有在复制构造被忽略的优化阶段才会到来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T09:41:44.880

正如其他人已经很好地提到的那样，这是因为您的编译器进行了优化。

我还没有检查它，但您可能可以通过优化编译您的代码，然后再不查看汇编代码。那么你也应该明确地看到一些差异。

# replace - How to add a character in every end of all lines with notepad++

> ID：14154292
> 
> 赞同：2
> 
> 时间：2013-01-04T09:21:18.223
> 
> 标签：replace, character, line, notepad++

Basicaly title says it all, mine file looks like this:

```
"edit Product",""Home > Opto-electronics > LED > Standard LED, Multicolour"","2226",""KINGBRIGHT LED, 3MM, HE-RED/GRN L-93WEGW"",""SC07621"","197
"edit Product",""Home > Resistors > Fixed"","2228",""VISHAY DRALORIC RESISTOR, 0402, 5%, 10K0 CRCW040210K0JNEAIF"",""RE06211"","50
"edit Product",""Home > Resistors > Fixed"","2229",""VISHAY DRALORIC RESISTOR, 0402, 5%, 3R90 CRCW04023R90JNEAIF"",""RE06212"","-1
"edit Product",""Home > Resistors > Fixed"","2230",""VISHAY DRALORIC RESISTOR, 0402, 5%, 2R70 CRCW04022R70JNEAIF"",""RE06220"","25 
```

And I need it to look like this:

```
"edit Product",""Home > Opto-electronics > LED > Standard LED, Multicolour"","2226",""KINGBRIGHT LED, 3MM, HE-RED/GRN L-93WEGW"",""SC07621"","197
"edit Product",""Home > Resistors > Fixed"","2228",""VISHAY DRALORIC RESISTOR, 0402, 5%, 10K0 CRCW040210K0JNEAIF"",""RE06211"","50**"**
"edit Product",""Home > Resistors > Fixed"","2229",""VISHAY DRALORIC RESISTOR, 0402, 5%, 3R90 CRCW04023R90JNEAIF"",""RE06212"","-1**"**
"edit Product",""Home > Resistors > Fixed"","2230",""VISHAY DRALORIC RESISTOR, 0402, 5%, 2R70 CRCW04022R70JNEAIF"",""RE06220"","25**"** 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T09:23:42.897

按`ctrl + h`检查输入作为**查找内容** `\n`，设置**替换**为`"\n`并将**搜索模式**设置为`Extended`。

那应该行得通。

# iphone - how to dismiss the key board in mfmailcomposerview

> ID：14154294
> 
> 赞同：1
> 
> 时间：2013-01-04T09:21:30.080
> 
> 标签：iphone, objective-c, ios

In my iphone app. in `MFMailComposerView` view when i am clicking to recepients then key board appears . After i am clicking return key in the key board. but key board not disappear.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T09:33:49.403

使用`UIWindow`通知键盘，只需使用下面的代码来显示`MFMailComposerViewController`..

```
- (IBAction)showMailController {
    //Present mail controller on press of a button, set up notification of keyboard showing and hiding
    [nc addObserver:self selector:@selector(keyboardWillShow:) name: UIKeyboardWillShowNotification object:nil];
    [nc addObserver:self selector:@selector(keyboardWillHide:) name: UIKeyboardWillHideNotification object:nil];
    MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];           
    //... and so on
}        
- (void)keyboardWillShow:(NSNotification *)note {
    //Get view that's controlling the keyboard
    UIWindow* keyWindow = [[UIApplication sharedApplication] keyWindow];
    UIView* firstResponder = [keyWindow performSelector:@selector(firstResponder)];

    //set up dimensions of  dismiss keyboard button and animate it into view, parameters are based on landscape orientation, the keyboard's dimensions and this button's specific dimensions
    CGRect t;
    [[note.userInfo valueForKey:UIKeyboardBoundsUserInfoKey] getValue: &t];
    button.frame = CGRectMake(324,(290-t.size.height),156,37);
    button.alpha = 0.0;
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:1.0];    
    [[[[[firstResponder superview] superview] superview] superview] addSubview:button];
    button.alpha = 1.0;
    button.frame = CGRectMake(324,(253-t.size.height),156,37);
    [UIView commitAnimations];
}

- (IBAction)dismissKeyboardInMailView {
    //this is what gets called when the dismiss keyboard button is pressed
    UIWindow* keyWindow = [[UIApplication sharedApplication] keyWindow];
    UIView* firstResponder = [keyWindow performSelector:@selector(firstResponder)];
    [firstResponder resignFirstResponder];
}

- (void)keyboardWillHide:(NSNotification *)note {
    //hide button here
    [button removeFromSuperview];
} 
```

我从这个链接得到了一些代码..

> [以编程方式对齐 iphone 键盘顶部的工具栏](https://stackoverflow.com/questions/158574/programmatically-align-a-toolbar-on-top-of-the-iphone-keyboard)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:30:21.673

您可以为此使用以下代码。

```
UIWindow *mainWin = [[UIApplication sharedApplication] keyWindow];
UIView *responder = [mainWin performSelector:@selector(firstResponder)];
[responder resignFirstResponder]; 
```

**但是如果你在你的应用程序中使用它，Apple 肯定会拒绝你的应用程序，因为 UIWindow 的 firstResponder 方法是一个私有 API。**

参考：[所以](https://stackoverflow.com/questions/4872565/mfmailcomposeviewcontroller-keyboard-issue)

# javascript - Toggle buttons without refreshing using Ajax

> ID：14154298
> 
> 赞同：0
> 
> 时间：2013-01-04T09:21:39.613
> 
> 标签：javascript, jquery, ruby-on-rails, ajax

The problem is that all the "into it" buttons on the page have the same id and all the "undo" have the same id thus clicking one offsets others. Also the buttons only toggle once. I'm very new to rails,CSS,ajax and I appreciate the help, thank you. ![enter image description here](../Images/c64c722d7448f04fd63109b803024ba0.png)

Micropost_Helper.rb

```
def toggle_like_button(micropost, user)
  if user.voted_for?(micropost)
    link_to "undo", like_micropost_path(micropost), :class => "btn btn-mini btn-primary", :id =>"unvote_form", :remote => true
  else
    link_to "Into it!", like_micropost_path(micropost), :class => "btn btn-mini btn-primary", :id =>"vote_form", :remote => true
  end
end 
```

Micropost Controller

```
def like
  @micropost = Micropost.find(params[:id])
  if @micropost.user_id != @current_user
    if @current_user.voted_for?(@micropost)
      @current_user.unvote_for(@micropost)
      respond_to do |format|
        format.html { redirect_to :back }
        format.js
      end
    else
      @current_user.vote_for(@micropost)
      respond_to do |format|
        format.html { redirect_to :back }
        format.js
      end
    end
  end
end 
```

VIEW/microposts/like.js.erb <-- with this i can only click the button's once, need help here as well

```
$("#vote_form").html("undo")
$("#unvote_form").html("Into it!") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T09:29:30.000

您应该像这样将 uniq id 附加到每个按钮：

```
def toggle_like_button(micropost, user)
  if user.voted_for?(micropost)
    link_to "undo", like_micropost_path(micropost), :class => "btn btn-mini btn-primary", :id =>"unvote_form_#{micropost.id}", :remote => true
  else
    link_to "Into it!", like_micropost_path(micropost), :class => "btn btn-mini btn-primary", :id =>"vote_form_#{micropost.id}", :remote => true
  end
end 
```

然后您可以在 like.js.erb 中引用一个按钮：

```
$("#vote_form_<%=@micropost.id%>").html("undo")
$("#unvote_form_<%= @micropost.id%>").html("Into it!") 
```

这样您将拥有有效的 html，并且您的问题应该得到解决。

# java - GridBagLayout and Resizing

> ID：14154302
> 
> 赞同：1
> 
> 时间：2013-01-04T09:21:57.707
> 
> 标签：java, swing, resize, gridbaglayout

getting a bit confused with GridBagLayout.

```
import javax.swing.JLabel;
import javax.swing.JFrame;
import javax.swing.JTextArea;
import javax.swing.JTextField;
import java.awt.*;
import java.awt.event.*;

public class MihatteFrame extends JFrame {

 private JTextArea area;
 private JTextField textField;
 private Button b;
 final static boolean shouldFill = true;

public MihatteFrame() {

    setTitle("見張ってしながら...");
    setSize(500,200);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setLocationRelativeTo(null);
    setLayout(new GridBagLayout());

    GridBagConstraints c = new GridBagConstraints();
    if (shouldFill) {
            c.fill = GridBagConstraints.HORIZONTAL;
    }

    area = new JTextArea(5, 15);
    area.setEditable(false);
    area.setCursor(null);
    area.setOpaque(false);
    area.setFocusable(false);
    area.setLineWrap(true);
    area.setWrapStyleWord(true);
    c.fill = GridBagConstraints.HORIZONTAL;
    c.weightx = 0;
    c.gridx = 0;
    c.gridy = 0;
    c.anchor = GridBagConstraints.WEST;
    this.add(area, c);

    textField = new JTextField(20);
    c.fill = GridBagConstraints.HORIZONTAL;
    c.weightx = 1;
    c.gridx = 2;
    c.gridy = 0;
    c.anchor = GridBagConstraints.CENTER;
    this.add(textField);
    //textField.addActionListener(this);

    b = new Button("Proceed");
    c.fill = GridBagConstraints.HORIZONTAL;
    c.weightx = 0;
    c.gridx = 2;
    c.gridy = 0;
    this.add(b);

    setVisible(true);   
}

public void displayText(String text) {
    area.setText(text);
    //textField.setText(text)
    }

} 
```

I understand the basics and its working well, it`s sorting out the resizing (specifically downsizing) issue.

When the text areas weight is 0 and the text fields weight is 1, there is no problem with resizing, but the text area is in the centre and not right up against the left-hand side, despite the anchoring.

When the text areas weight is anything above 0 and the text fields weight correlates (eg. 0.2/0.8), everything looks snug as a bug, and upsizing is fine, but downsizing, the text field is reduced to 1 character wide.

I dont mind the text area resizing with the frame, but I want it to return to its original size when the frame is made smaller, not shove the textfield against the proceed button.

I have read that I may need to put this in a JPanel border layout - am not sure what this would look like in code, so if anyone could tell me what goes where if that is the case, would be grateful.

So questions:

1.  Is there a way to make the text area stay anchored to the West AND not have the textfield reduced to a small size when resized?
2.  Why are my anchors not working?
3.  Do I need to put the text area in a JPanel with relation to another layout, and if so, where does the code go?
4.  Why does everyone fear GridBagLayout? The amount of "I avoid this at all costs" I`ve seen...

Thank you! (Ps. am halfway through implementing actionlistener, so if it looks half-complete, that`s why).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:40:08.857

使用 ipadx 作为`JTextField`. 我建议也`JTextArea`将`JScrollPane`.

`JTextField`您对and使用 c.gridx = 2 两次`JButton`。

最好发布[SSCCE](http://sscce.org)让我们检查问题所在。

# java - How to resize Image Icon on Menu Item

> ID：14154310
> 
> 赞同：0
> 
> 时间：2013-01-04T09:22:18.833
> 
> 标签：java, swing, imageicon

> **Possible Duplicate:**
> [JMenuItem ImageIcon too big](https://stackoverflow.com/questions/6916693/jmenuitem-imageicon-too-big)

The size of Icon to large can it decrase. See below link. [https://docs.google.com/file/d/0B2PXtUeqJPCpQWFLcGQ0NTg2UVU/edit](https://docs.google.com/file/d/0B2PXtUeqJPCpQWFLcGQ0NTg2UVU/edit)

How do i set the size of icon on MenuItem without resize with raw file pls:thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:45:44.267

我想你可以通过其他方式做到这一点，但这可能值得一试——AWT 的想法；在将其设置为菜单项图标之前调整图像大小：

```
// myIcon is your image icon
imageToolkit = java.awt.Toolkit.getDefaultToolkit;
iconImage = imageToolkit.createImage(myIcon);
iconImage = iconImage.getScaledInstance(32,32,iconImage.SCALE_SMOOTH);
// set this icon for the menu 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T09:42:50.817

`Image`具有`public Image getScaledInstance(int width, int height, int hints)`可用于调整菜单图标大小的方法。

# mysql - 如果 max(id) - min(id) > 50,000，mysql 删除早期数据

> ID：14154311
> 
> 赞同：1
> 
> 时间：2013-01-04T09:22:23.823
> 
> 标签：mysql, sql, ssh

我有一个表，我需要将总行数保持在 50,000 以内。此表包含一个 Id 字段（id 是自动递增的）。

如何检查 if `max(id) - min(id) > 50,000`，然后删除较早的行？

```
DELETE FROM news WHERE if (max(id) - min(id) > 50000) 
```

如果，这`query`将删除所有行`max(id) - min(id) > 50000`，正确的方法是什么？理想情况下，我需要一个单行命令，以 SSH 方法为借口。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T09:24:17.677

```
DELETE d 
FROM news AS d
  JOIN
    ( SELECT MAX(id)-50000 AS lim 
      FROM news
    ) AS m
    ON d.id < m.lim ; 
```

当然，上述内容不会完全保留 50K 行，因为`id`序列中可能存在间隙。但我想这是意料之中的，不是问题。如果您真的想保留 50K 行，那么任何语句的效率都可能会降低。你可以试试这个：

```
DELETE d 
FROM news AS d
  JOIN
    ( SELECT id AS lim 
      FROM news
      ORDER BY id DESC
      LIMIT 1 OFFSET 50000
    ) AS m
    ON d.id <= m.lim ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T09:24:01.590

```
Delete from news where id < max(id)-50000 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T09:34:56.827

```
DELETE FROM news 
WHERE id NOT IN (SELECT id FROM news ORDER BY id DESC LIMIT 50000) 
```

# php - 多层次的“有很多”关系

> ID：14154314
> 
> 赞同：3
> 
> 时间：2013-01-04T09:22:30.643
> 
> 标签：php, cakephp

我想实现一个结构，例如一个组织有很多部门，部门有很多人。

我已经像这样设置了我的模型结构：

**组织**

```
<?php

class Organisation extends AppModel {

    public $hasMany = array(
            'Department' => array(
                'className' => 'Department',
                'foreignKey' => 'organisations_id'
            )
        );
} 
```

**部门**

```
<?php

class Department extends AppModel {

    public $hasMany = array(
            'Person' => array(
                'className' => 'Person',
                'foreignKey' => 'departments_id'
            )
        );
} 
```

**人**

```
<?php

class Person extends AppModel {

} 
```

然后我有一个这样的控制器：

```
<?php

class OrganisationsController extends AppController {

    public $helpers = array('Html', 'Form', 'Session');
    public $components = array('Session');

    public function index() {
        $this->set('organisations', $this->Organisation->find('all'));
    }

} 
```

当我打印出 $organisations 时，我得到一个这样的数组：

```
Array
(
    [0] => Array
        (
            [Organisation] => Array
                (
                    [id] => 1
                    [created] => 2013-01-03 16:02:47
                )

            [Department] => Array
                (
                    [0] => Array
                        (
                            [id] => 1
                            [created] => 2013-01-03 16:02:47
                            [organisations_id] => 1
                        )

                )

        )

) 
```

我是 PHP 和 CakePHP 的新手，但您不希望 Person 数组包含在 Organization 数组中吗？如果没有，是否有另一种方法可以实现上述结构（组织->部门->人员）？

非常感谢任何有关如何解决此问题的提示！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T09:31:08.550

You are probably looking for [recursive](http://book.cakephp.org/2.0/en/models/model-attributes.html#recursive)

Or you could make use of the [containable behaviour](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)

But please have a look at the result. When using recursive you can get a lot of data you don't want! So please be careful and select the fields you actually need!

**Recursive**

You would get something like:

```
<?php

class OrganisationsController extends AppController {

    public $helpers = array('Html', 'Form', 'Session');
    public $components = array('Session');

    public function index() {
        $this->Organisation->recursive = 2; # or -1, 0, 1, 2, 3
        $this->set('organisations', $this->Organisation->find('all'));
    }
} 
```

You could also declare this in the find itself like so:

```
$this->set('organisations', $this->Organisation->find('all' array(
        'recursive' => 2 # or -1, 0, 1, 2, 3
    )
)); 
```

**Containable**

```
class Organisation extends AppModel {

    public $hasMany = array(
        'Department' => array(
            'className' => 'Department',
            'foreignKey' => 'organisations_id'
        )
    );

    $actsAs = array('Containable');
} 
```

Now in your controller you can do something like:

```
$this->set('organisations', $this->Organisation->find('all', array(
        'contain' => array('User')
    )
)); 
```

But as always, there are many roads leading to Rome. So please read the books very carefully!

*   [http://book.cakephp.org/2.0/en/index.html](http://book.cakephp.org/2.0/en/index.html)
*   [http://book.cakephp.org/2.0/en/models/model-attributes.htm](http://book.cakephp.org/2.0/en/models/model-attributes.htm)
*   [http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)
*   [http://book.cakephp.org/2.0/en/models/retrieving-your-data.html](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:30:17.893

[递归](http://bakery.cakephp.org/articles/daveym/2011/05/08/array_structures_the_recursive_property_and_the_set_class)函数将为您完成。

就在 OrganisationsController 索引函数中，尝试如下操作。

```
 $this->Organisation->recursive = 2;
  $this->set('organisations', $this->Organisation->find('all')); 
```

**注意：**递归可能会影响你的性能，你可以使用[unbind](http://bakery.cakephp.org/articles/TommyO/2006/12/06/keeping-bindmodel-and-unbindmodel-out-of-your-controllers)方法来摆脱它，只需获取你想要的数据。

# android - 应用程序图像的默认图像查看器

> ID：14154327
> 
> 赞同：2
> 
> 时间：2013-01-04T09:23:11.277
> 
> 标签：android, thumbnails, android-image

我的问题是我将使用以下链接显示 sd 卡中的一些图像

[http://vikaskanani.wordpress.com/2011/07/20/android-custom-image-gallery-with-checkbox-in-grid-to-select-multiple/](http://vikaskanani.wordpress.com/2011/07/20/android-custom-image-gallery-with-checkbox-in-grid-to-select-multiple/)

用户将选择一个特定的图像，该图像将使用以下代码显示所选图像

```
Intent intent = new Intent();
                intent.setAction(Intent.ACTION_VIEW);
                intent.setDataAndType(Uri.parse("file://" + arrPath[id]),
                        "image/*");
                startActivity(intent); 
```

现在，一旦用户滑动，它将转到 sd 卡中存在的其他图像，但我想显示我的应用程序中的图像，这意味着我想在默认图像查看器中显示应用程序的图像。当用户选择图像时，它会显示打开图像的应用程序列表有没有办法消除这种情况并在默认图像查看器中显示图像，一旦滑动转到应用程序中存在的下一个图像而不是来自 sd 卡

# javascript - 如何使用 JQuery Animate 在同一页面上制作不同的动画独立地在悬停时开始并在鼠标离开时进入原始状态

> ID：14154330
> 
> 赞同：0
> 
> 时间：2013-01-04T09:23:29.153
> 
> 标签：javascript, jquery, html, css-transitions

好的，我到处搜索，但我找不到我的问题的答案。

我有许多 CSS3 过渡和动画，实际上想为 Internet Explorer 8-9 实现它们。然而，我几乎是一个使用 javascript 的新手。

首先这是我的网站[http://tinyurl.com/axjuccx](http://tinyurl.com/axjuccx) 你会看到使用的 css 动画。

现在，我试图实现的是相同的，但使用 Jquery animate() 函数。

作为一个例子，让我们以这段代码为例，当我将鼠标悬停在一个名为 go 的按钮上时，我为一个名为 block 的 div 设置动画。

```
$("#go").mouseenter(function(){
  $("#block").animate({
    width: "70%",
    opacity: 0.4,
    marginLeft: "0.6in",
    fontSize: "3em",
    borderWidth: "10px"
  }, 1500 );
$("#go").mouseleave(function(){
  $("#block").animate({
    width: "70%",
    opacity: 0.4,
    marginLeft: "0.6in",
    fontSize: "3em",
    borderWidth: "10px"
  }, 1500 );
}); 
```

这似乎不起作用，如果我省略“mouseleave”部分，那么它会动画但保持动画状态。我希望它在鼠标离开时恢复。

任何帮助表示赞赏。

真挚地

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:33:01.767

使用 stop() 可能会有所帮助；

```
$("#go").hover(
  function () {
    $("#block").stop(true, true).animate(... your code here ...);
  }, 
  function () {
    $("#block").stop(true, true).animate(... your code here ...);
  }
); 
```

jQuery 停止（）：[http ://api.jquery.com/stop/](http://api.jquery.com/stop/)

jQuery 悬停（）：[http ://api.jquery.com/hover/](http://api.jquery.com/hover/)

# node.js - 如何在节点/快递中发送自定义 http 状态消息？

> ID：14154337
> 
> 赞同：105
> 
> 时间：2013-01-04T09:24:11.560
> 
> 标签：node.js, express

我的 node.js 应用程序的建模类似于[express/examples/mvc](https://github.com/visionmedia/express/tree/master/examples/mvc)应用程序。

在控制器操作中，我想使用自定义 http 消息吐出 HTTP 400 状态。默认情况下，http 状态消息是“Bad Request”：

```
HTTP/1.1 400 Bad Request 
```

但我想发送

```
HTTP/1.1 400 Current password does not match 
```

我尝试了各种方法，但没有一个将 http 状态消息设置为我的自定义消息。

我当前的解决方案控制器功能如下所示：

```
exports.check = function( req, res) {
  if( req.param( 'val')!=='testme') {
    res.writeHead( 400, 'Current password does not match', {'content-type' : 'text/plain'});
    res.end( 'Current value does not match');

    return;
  } 
  // ...
} 
```

一切正常，但是......这似乎不是正确的方法。

有没有更好的方法来使用 express 设置 http 状态消息？

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2016-04-08T19:18:24.057

现有答案都没有完成 OP 最初要求的内容，即覆盖 Express 发送的默认[*原因短语*](https://www.w3.org/Protocols/rfc2616/rfc2616-sec6.html#sec6.1.1)（状态代码后立即出现的文本）。

你想要的是`res.statusMessage`. 这不是 Express 的一部分，它是 Node.js 0.11+ 中底层 http.Response 对象的属性。

您可以像这样使用它（在 Express 4.x 中测试）：

```
function(req, res) {
    res.statusMessage = "Current password does not match";
    res.status(400).end();
} 
```

然后用于`curl`验证它是否有效：

```
$ curl -i -s http://localhost:3100/
HTTP/1.1 400 Current password does not match
X-Powered-By: Express
Date: Fri, 08 Apr 2016 19:04:35 GMT
Connection: keep-alive
Content-Length: 0 
```

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2013-01-04T11:47:43.527

您可以查看此`res.send(400, 'Current password does not match')` Look [express 3.x 文档](http://expressjs.com/3x/api.html#res.send)以获取详细信息

**Expressjs 4.x 的更新**

使用这种方式（看看[express 4.x docs](http://expressjs.com/api.html#res.send)）：

```
res.status(400).send('Current password does not match');
// or
res.status(400);
res.send('Current password does not match'); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-01-05T17:38:10.010

在 express 中处理此类自定义错误的一种优雅方法是：

```
function errorHandler(err, req, res, next) {
  var code = err.code;
  var message = err.message;
  res.writeHead(code, message, {'content-type' : 'text/plain'});
  res.end(message);
} 
```

（您也可以为此使用 express 内置的[express.errorHandler](http://www.senchalabs.org/connect/errorHandler.html)）

然后在您的中间件中，在您的路线之前：

```
app.use(errorHandler); 
```

然后您要在哪里创建错误“当前密码不匹配”：

```
function checkPassword(req, res, next) {
  // check password, fails:
  var err = new Error('Current password does not match');
  err.code = 400;
  // forward control on to the next registered error handler:
  return next(err);
} 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-05-07T19:18:18.520

你可以像这样使用它

```
return res.status(400).json({'error':'User already exists.'}); 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-03-29T11:23:21.197

在服务器端（Express 中间件）：

```
if(err) return res.status(500).end('User already exists.'); 
```

客户端处理

**角度：-**

```
$http().....
.error(function(data, status) {
  console.error('Repos error', status, data);//"Repos error" 500 "User already exists."
}); 
```

**jQuery:-**

```
$.ajax({
    type: "post",
    url: url,
    success: function (data, text) {
    },
    error: function (request, status, error) {
        alert(request.responseText);
    }
}); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-08-11T19:51:36.753

使用 Axios 时，您可以通过以下方式检索自定义响应消息：

```
Axios.get(“your_url”)
.then(data => {
... do something
}.catch( err => {
console.log(err.response.data) // you want this
}) 
```

...在 Express 中将其设置为：

```
res.status(400).send(“your custom message”) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-10-15T06:57:05.000

*我的用例是发送自定义 JSON 错误消息，因为我使用 express 来支持我的 REST API。我认为这是一个相当普遍的情况，因此在我的回答中将重点关注这一点。*

### 简洁版本：

[快速错误处理](http://expressjs.com/guide/error-handling.html)

> 像其他中间件一样定义错误处理中间件，除了使用四个参数而不是三个参数，特别是使用签名（err、req、res、next）。...在其他 app.use() 和路由调用之后，您最后定义错误处理中间件

```
app.use(function(err, req, res, next) {
    if (err instanceof JSONError) {
      res.status(err.status).json({
        status: err.status,
        message: err.message
      });
    } else {
      next(err);
    }
  }); 
```

通过执行以下操作从代码中的任何位置引发错误：

```
var JSONError = require('./JSONError');
var err = new JSONError(404, 'Uh oh! Can't find something');
next(err); 
```

### 长版

抛出错误的规范方法是：

```
var err = new Error("Uh oh! Can't find something");
err.status = 404;
next(err) 
```

默认情况下，Express 通过将其巧妙地打包为带有代码 404 的 HTTP 响应和由附加堆栈跟踪的消息字符串组成的正文来处理此问题。

例如，当我使用 Express 作为 REST 服务器时，这对我不起作用。我希望将错误作为 JSON 发送回，而不是 HTML。我也绝对不希望我的堆栈跟踪移到我的客户身上。

我可以使用例如发送 JSON 作为响应`req.json()`。类似的东西`req.json({ status: 404, message: 'Uh oh! Can't find something'})`。或者，我可以使用`req.status()`. 将两者结合起来：

```
req.status(404).json({ status: 404, message: 'Uh oh! Can't find something'}); 
```

这就像一个魅力。也就是说，我发现每次出现错误时都很难输入，而且代码不再像我们的那样自我记录`next(err)`。它看起来与发送正常（即有效）响应 JSON 的方式太相似了。此外，规范方法引发的任何错误仍会导致 HTML 输出。

这就是 Express 的错误处理中间件的用武之地。作为我的路线的一部分，我定义：

```
app.use(function(err, req, res, next) {
    console.log('Someone tried to throw an error response');
  }); 
```

我还将 Error 子类化为自定义 JSONError 类：

```
JSONError = function (status, message) {
    Error.prototype.constructor.call(this, status + ': ' + message);
    this.status = status;
    this.message = message;
  };
JSONError.prototype = Object.create(Error);
JSONError.prototype.constructor = JSONError; 
```

现在，当我想在代码中抛出错误时，我会：

```
var err = new JSONError(404, 'Uh oh! Can't find something');
next(err); 
```

回到自定义错误处理中间件，我将其修改为：

```
app.use(function(err, req, res, next) {
  if (err instanceof JSONError) {
    res.status(err.status).json({
      status: err.status,
      message: err.message
    });
  } else {
    next(err);
  }
} 
```

将 Error 子类化为 JSONError 很重要，因为我怀疑 Express 会`instanceof Error`检查传递给 a 的第一个参数，`next()`以确定是否必须调用正常处理程序或错误处理程序。我可以删除`instanceof JSONError`检查并进行少量修改以确保意外错误（例如崩溃）也返回 JSON 响应。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-05-30T00:37:21.670

如果您的目标只是将其减少为单行/简单行，则可以稍微依赖默认值...

```
return res.end(res.writeHead(400, 'Current password does not match')); 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2019-01-02T09:10:49.703

那么在 Restify 的情况下，我们应该使用`sendRaw()`方法

语法是： `res.sendRaw(200, 'Operation was Successful', <some Header Data> or null)`

# class - 访问外部类

> ID：14154340
> 
> 赞同：3
> 
> 时间：2013-01-04T09:24:22.497
> 
> 标签：class, d

我现在正在阅读“The D Programming Language”一书。它讲述了内部类。

```
class Outer{
    int x;

    this(){
        x = 99;
        new Inner;
    }

    class Inner{
        int x;

        this(){
            x = 5;
            writeln( "Inner x = ", x, "; Outer x = ", this.outer.x );
        }
    }
} 
```

正如书中所说，为了能够访问类 Outer 的 x，我需要使用 this.outer.x。但是一件令人困惑的事情是“Outer”类的名称变成了小写的“outer”。使用普通的类名“Outer”，编译器会给出错误消息。这就像编译器决定您需要使用什么作为名称并强制使用它生成的名称。

我的问题是，当我将“Outer”类重命名为“bLaH”时，现在我无法再进行外部类了。

```
class bLaH{
    int x;

    this(){
        x = 99;
        new Inner;
    }

    class Inner{
        int x;

        this(){
            x = 5;
            writeln( "Inner x = ", x, "; Outer x = ", this.bLaH.x );
        }
    }
} 
```

在访问外部类时使用什么名称并不明显。第一个字母现在是小写的，但编译器说“test1.bLaH”没有定义。（文件名为test1.d）

如果我将“this.bLaH”转换为“this.blah”，认为编译器可能会将外部类的名称转换为全部小写，这一次，编译器会说“未定义的变量'blah'”。

语言中是否存在设计错误？作为一名程序员，我不喜欢这种由编译器完成的名称转换。

我在 Windows XP 上，DMD 版本是 2.060。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-04T09:27:01.643

`outer`是一个关键字。这就像`super`什么。一个类总是嵌套在*一个*类中，所以`outer`关键字指的是那个类。

[http://dlang.org/class.html#nested](http://dlang.org/class.html#nested)

在这里你可以发现它`outer`实际上是一个属性。

# javascript - Javascript/ IE 日期时间错误

> ID：14154341
> 
> 赞同：2
> 
> 时间：2013-01-04T09:24:28.800
> 
> 标签：javascript, internet-explorer, firefox

在 IE 中使用此代码：

```
if(!Date.prototype.toISOString) Date.prototype.toISOString = function(){
    var padZero = function(str, len){while(str.length < len) str = '0' + str; return str;};

    var ret = padZero(''+this.getUTCFullYear(), 4)
        + '-' + padZero(''+this.getUTCMonth(), 2)
        + '-' + padZero(''+this.getUTCDate(), 2)
        + 'T' + padZero(''+this.getUTCHours(), 2)
        + ':' + padZero(''+this.getUTCMinutes(), 2)
        + ':' + padZero(''+this.getUTCSeconds(), 2)
        + 'Z';
    alert(ret);
    return ret;
} 
```

我收到以下错误..

执行 urlrewrite 查询时出错：err:FORG0001: 类似日期时间的值 '2012-00-05T09:09:46Z' 的非法词法形式 Month 字段的值 0 无效。[第 42 行第 9 栏]

我已经尝试了对月份参数的多次修复，但似乎无法正确解决。所以，任何帮助都会得到很大的帮助。

顺便说一句：他们上面的代码在 Firefox 中运行良好..去图，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:27:54.493

`getUTCMonth()`从零开始，`0`一月也是。您可以将 1 添加到它以形成您的日期字符串：

```
+ '-' + padZero(''+(this.getUTCMonth()+1), 2) 
```

来自[MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)：

> getUTCMonth - 根据通用时间返回指定日期的月份 (0-11)。

# css - 我只想为 html 表的第一行使用不同的颜色

> ID：14154342
> 
> 赞同：4
> 
> 时间：2013-01-04T09:24:38.630
> 
> 标签：css, html-table, background-color

我用了一张桌子。我应用了 CSS ID `table-4`。

在html代码之后：

```
<table border='0' width='100%' id='table-4'>
   <tr><td>Date</td><td>Headline</td></tr>
   <tr><td>29 DEC</td><td>Dead</td></tr>
   <tr><td>30 DEC</td><td>Hit</td></tr>
   <tr><td>02 JAN</td><td>Leg</td></tr>
</table> 
```

这是style.css：

```
#table-4 { background-color: #F2F2F2;} 
```

所以整个表格的背景颜色是`#F2F2F2`，但是我想要第一行的颜色不同`Date`，`Headline`那么我该如何修改我的 CSS 呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T09:30:38.610

您可以为此使用**:first-child**。像这样写：

```
#table-4 tr:first-child{
    background:red;
} 
```

检查这个[http://jsfiddle.net/cbK8J/](http://jsfiddle.net/cbK8J/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T09:28:20.313

[@JonathandeM. 的评论](https://stackoverflow.com/questions/14154342/i-want-a-different-color-only-for-1st-row-of-a-html-table/#comment19605185_14154342)是正确的。在那里弹出`<thead>`和标签，并将行中的标签更改为标签（因为 HTML 说明了事物是什么，它们是标题）：`<tbody>``<td>``<thead>``<th>`

```
<table border='0' width='100%' id='table-4'>
   <thead>
      <tr><th scope="col">Date</th><th scope="col">Headline</th></tr>
   </thead>
   <tbody>
      <tr><td>29 DEC</td><td>Dead</td></tr>
      <tr><td>30 DEC</td><td>Hit</td></tr>
      <tr><td>02 JAN</td><td>Leg</td></tr>
   </tbody>
</table> 
```

然后使标题行具有不同背景颜色的 CSS 是：

```
#table-4 thead tr {
   background-color: green;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T09:40:32.747

你可以这样做：

HTML：

```
<td class="whatever">Date</td><td class="whatever">Headline</td> 
```

CSS：

```
.whatever { color: #a9a9a9 } 
```

`<tr>`会做行，`<td>`会做单元格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T09:29:46.813

您必须将 id 添加到第一个 tr 标签：

```
 <table border='0' width='100%' id='table-4'>
   <tr id ="r1" ><td>Date</td><td>Headline</td></tr>
   <tr><td>29 DEC</td><td>Dead</td></tr>
   <tr><td>30 DEC</td><td>Hit</td></tr>
   <tr><td>02 JAN</td><td>Leg</td></tr>
   </table> 
```

然后添加另一个 css 行：

```
#table-4 #r1 { background-color: blue;} 
```

它会给你蓝色

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-15T10:12:25.717

或者你可以简单地只修改 Html 文件，不改变 css

```
 <table border='0' width='100%' id='table-4'>
    <tr><td bgcolor='red' >Date</td><td  bgcolor='red'>Headline</td></tr>
    <tr><td>29 DEC</td><td>Dead</td></tr>
    <tr><td>30 DEC</td><td>Hit</td></tr>
   <tr><td>02 JAN</td><td>Leg</td></tr>
   </table> 
```

# maven-2 - maven的无效任务

> ID：14154346
> 
> 赞同：0
> 
> 时间：2013-01-04T09:24:51.610
> 
> 标签：maven-2, installation

我正在尝试使用以下命令从 Linux 命令行安装 maven：

```
/opt/apache-maven-2.2.1/bin/mvn -r -Dclient=HSH -Dmaven.test skip=true install 
```

但是我不断得到这个：

```
Invalid task 'skip=true': you must specify a valid lifecycle phase, or a goal in the format plugin:goal or pluginGroupId:pluginArtifactId:pluginVersion:goal 
```

我应该怎么做才能避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:26:07.220

你要

```
-Dmaven.test.skip=true 
```

即你错过了一个'。之前`skip`

# python - Django 和老式 SQL 查询

> ID：14154355
> 
> 赞同：0
> 
> 时间：2013-01-04T09:25:21.350
> 
> 标签：python, sql, django, django-models, python-2.7

我有一个模型如下：

```
class call_log(models.Model):
    call_from = models.CharField(max_length=200)
    call_to = models.CharField(max_length=200)
    direction = models.CharField(max_length=200)
    end_time = models.CharField(max_length=200)
    duration = models.CharField(max_length=200)
    total = models.DecimalField(max_digits=8, decimal_places=5, blank=True, default=0)
    rate = models.DecimalField(max_digits=8, decimal_places=5, blank=True, default=0) 
```

它记录了由（不同）号码和 sip 端点进行的每个单独呼叫。

我要运行的 SQL 查询是：

```
SELECT DISTINCT(call_from) AS start, sum(total) AS total 
FROM polls_call_log GROUP BY start; 
```

我如何在 / for django 中写这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:24:21.360

```
from django.db.models import Count
call_log.objects.values('call_from').annotate(Count('total')) 
```

# javascript - 如何使用 Node.js 运行用 js 编写的服务器

> ID：14154357
> 
> 赞同：29
> 
> 时间：2013-01-04T09:25:30.843
> 
> 标签：javascript, node.js

我已经从这里[http://nodejs.org/](http://nodejs.org/)安装了 node.js。在我的 windows8 机器上。在我的 server.js 文件中复制了示例服务器代码

```
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/'); 
```

然后打开 node.js 提示并写入 node c:/node/server.js 但没有任何反应。我是一个 php 开发人员，只是尝试动手，任何指南都会很有帮助。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-04T10:37:47.917

您不需要进入 node.js 提示符，您只需要使用标准命令提示符并编写

```
node c:/node/server.js 
```

这也有效：

```
node c:\node\server.js 
```

然后在您的浏览器中：

```
http://localhost:1337 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-04T10:47:29.850

Nodejs 是一种脚本语言（类似于 Python 或 Ruby，与 PHP 或 C++ 不同）。要运行您的代码，您需要在终端/shell/命令提示符下输入命令。通过这些名称之一在您的操作系统中查找应用程序快捷方式。

在终端中运行的命令将是

```
node server.js 
```

但是您首先需要在终端中浏览到与文件相同的文件夹`server.js`。使用终端的语法因操作系统而异，请查找其文档。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-03-01T06:15:21.547

我打开一个文本编辑器，就我而言，我使用了 Atom。粘贴此代码

```
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
  res.end('Hello World\n');
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/'); 
```

并另存为

```
helloworld.js 
```

在

```
c:\xampp\htdocs\myproject 
```

目录。接下来我打开 node.js commamd 提示输入

```
cd c:\xampp\htdocs\myproject 
```

下一个

```
node helloworld.js 
```

接下来我打开我的 chrome 浏览器并输入

```
http://localhost:1337 
```

它就在那里。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T10:32:07.897

只需从您的 JS 文件的那个目录中`cmd`写入`node jsFile.js`，甚至`node jsFile`；两者都可以正常工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-05T22:51:10.317

你试一试

```
node server 
```

从该目录中的 cmd 提示符

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-10T05:47:06.467

如果您在 Linux 容器中，例如在 Chromebook 上，则需要手动浏览到 localhost 的地址。我知道较新的 Chrome OS 版本不再存在此问题，但在我的 Chromebook 上，我仍然必须手动浏览到 localhost 的地址才能使您的代码正常工作。

要浏览到您的本地主机的地址，请在命令行中键入：sudo ifconfig

并记下 eth0 下的 inet 地址。

否则，正如其他人所指出的，只需键入 node.js 文件名，只要您将浏览器指向正确的地址，它就会起作用。

希望这可以帮助！

# android - Android 使用电子邮件地址列表发送电子邮件

> ID：14154358
> 
> 赞同：0
> 
> 时间：2013-01-04T09:25:41.123
> 
> 标签：android, email

我创建了一个内置表单的应用程序，目前正在将其发送到预先确定的电子邮件地址。与其根据将其发送到哪个电子邮件地址来创建十几个版本的应用程序，有没有一种方法可以根据人们在表单中按的内容自动添加电子邮件地址？即点击滚动条中的美国，它会自动将美国的电子邮件地址放入电子邮件中发送？

如果是这样，是否有任何人都可以指出我的教程或示例？

我在下面附上了我的代码：

```
import java.util.Calendar;
import android.app.Activity;
import android.app.DatePickerDialog;
import android.app.Dialog;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.TextView;
public class NearMiss extends Activity {

    Button send;
    protected static final int CAMERA_PIC_REQUEST = 0;
    private TextView tvDisplayDate;

    private Button btnChangeDate;

    private int year;
    private int month;
    private int day;

    static final int DATE_DIALOG_ID = 999;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.nearmiss);

        Button camera = (Button) findViewById(R.id.button2); 
        camera.setOnClickListener(new View.OnClickListener() { 
            public void onClick(View view) {
                Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                  startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);  
    ;

                }     
            });  

        setCurrentDateOnView();
        addListenerOnButton();

    }

    // display current date
        public void setCurrentDateOnView() {
            tvDisplayDate = (TextView) findViewById(R.id.EditTextDate);

            final Calendar c = Calendar.getInstance();
            year = c.get(Calendar.YEAR);
            month = c.get(Calendar.MONTH);
            day = c.get(Calendar.DAY_OF_MONTH);
            // set current date into textview
            tvDisplayDate.setText(new StringBuilder()
                    // Month is 0 based, just add 1
                    .append(day).append("-").append(month + 1).append("-")
                    .append(year).append(" "));

        }
        public void addListenerOnButton() {
            btnChangeDate = (Button) findViewById(R.id.btnChangeDate);
            btnChangeDate.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    showDialog(DATE_DIALOG_ID);
                }
            });
        }
        @Override
        protected Dialog onCreateDialog(int id) {
            switch (id) {
            case DATE_DIALOG_ID:
                // set date picker as current date
                return new DatePickerDialog(this, datePickerListener, year, month,
                        day);
            }
            return null;
        }
        private DatePickerDialog.OnDateSetListener datePickerListener = new DatePickerDialog.OnDateSetListener() {
            // when dialog box is closed, below method will be called.
            public void onDateSet(DatePicker view, int selectedYear,
                    int selectedMonth, int selectedDay) {
                year = selectedYear;
                month = selectedMonth;
                day = selectedDay;
                // set selected date into textview
                tvDisplayDate.setText(new StringBuilder().append(day)
                        .append("-").append(month + 1).append("-").append(year)
                        .append(" "));

            }
        };

    public void sendFeedback(View button) {

        final EditText nameField = (EditText) findViewById(R.id.EditTextName);
        String name = nameField.getText().toString();

        final EditText emailField = (EditText) findViewById(R.id.EditTextEmail);
        String email = emailField.getText().toString();

        final EditText feedbackField = (EditText) findViewById(R.id.EditTextFeedbackBody);
        String feedback = feedbackField.getText().toString();

        final Spinner feedbackSpinner = (Spinner) findViewById(R.id.SpinnerFeedbackType);
        String feedbackType = feedbackSpinner.getSelectedItem().toString();

        final EditText dateField = (EditText) findViewById(R.id.EditTextDate);
        String date = dateField.getText().toString();
        final EditText timeField = (EditText) findViewById(R.id.EditTextTime);
        String time = timeField.getText().toString();

        final Spinner feedbackLocation = (Spinner) findViewById(R.id.SpinnerLocationType);
        String locationType = feedbackLocation.getSelectedItem().toString();

        final EditText contactField = (EditText) findViewById(R.id.EditTextContact);
        String contact = contactField.getText().toString();

        final Spinner feedbackOperative = (Spinner) findViewById(R.id.SpinnerOperativeType);
        String operativeType = feedbackOperative.getSelectedItem().toString();

        final CheckBox responseCheckbox = (CheckBox) findViewById(R.id.CheckBoxResponse);
        boolean bRequiresResponse = responseCheckbox.isChecked();

        // Take the fields and format the message contents
        String subject = formatFeedbackSubject(feedbackType);
        String message = formatFeedbackMessage(feedbackType, name,
             email, feedback, date, time, locationType, operativeType, bRequiresResponse, contact);

        // Create the message
        sendFeedbackMessage(subject, message);
    }

    protected String formatFeedbackSubject(String feedbackType) {

        String strFeedbackSubjectFormat = getResources().getString(
                R.string.feedbackmessagesubject_format);
        String strFeedbackSubject = String.format(strFeedbackSubjectFormat, feedbackType);

        return strFeedbackSubject;
    }

    protected String formatFeedbackMessage(String feedbackType, String name,
            String email, String feedback, String date, String time, String locationType, String operativeType, boolean bRequiresResponse, String contact) {

        String strFeedbackFormatMsg = getResources().getString(
                R.string.feedbackmessagebody_format);
        String strRequiresResponse = getResponseString(bRequiresResponse);
        String strFeedbackMsg = String.format(strFeedbackFormatMsg,
                name, email, date, time, feedbackType, feedback, locationType, operativeType, strRequiresResponse, contact);

        return strFeedbackMsg;
    }

    protected String getResponseString(boolean bRequiresResponse)
    {
        if(bRequiresResponse==true)
        {
            return getResources().getString(R.string.feedbackmessagebody_responseyes);
        } else {
            return getResources().getString(R.string.feedbackmessagebody_responseno);
        }

    }
    public void sendFeedbackMessage(String subject, String message) {
        Intent messageIntent = new Intent(android.content.Intent.ACTION_SEND);
        String aEmailList[] = { "uk@abc.com", "usa@abc.com" };
        messageIntent.putExtra(android.content.Intent.EXTRA_EMAIL, aEmailList);
        messageIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
        messageIntent.setType("plain/text");
        messageIntent.putExtra(android.content.Intent.EXTRA_TEXT, message);
        startActivity(messageIntent);

    }
} 
```

和 .xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ScrollView01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:scrollbars="vertical">

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/mainscreenc"
        android:orientation="vertical" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="match_parent"
            android:layout_height="125dip"
            android:background="@drawable/title" >

        </TableRow>

        <EditText
            android:id="@+id/EditTextName"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="15dip"
            android:hint="@string/feedbackname"
            android:inputType="textPersonName"
            android:textColor="@color/red" >
</EditText>

        <EditText
            android:id="@+id/EditTextEmail"
            android:layout_height="wrap_content"
            android:hint="@string/feedbackemail"
            android:inputType="textEmailAddress"
            android:layout_width="fill_parent"
            android:textColor="@color/red" ></EditText>

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dip"
            android:layout_marginTop="20dip"
            android:text="Category of Near Miss:"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@color/black" />

        <Spinner
            android:id="@+id/SpinnerFeedbackType"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:entries="@array/feedbacktypelist"
            android:prompt="@string/feedbacktitle" 
            android:textColor="@color/red" >
</Spinner>

        <EditText
            android:id="@+id/EditTextFeedbackBody"
            android:layout_height="wrap_content"
            android:hint="@string/feedbackbody"
            android:inputType="textMultiLine"
            android:lines="5"
            android:layout_width="fill_parent"
            android:textColor="@color/red" ></EditText>

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dip"
            android:layout_marginTop="20dip"
            android:text="Date of Near Miss:" 
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@color/black" />

    <EditText
            android:id="@+id/EditTextDate"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="Approximate Date of Near Miss" 
            android:textColor="@color/red" >
            </EditText>

    <Button
        android:id="@+id/btnChangeDate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="10dip"
        android:text="Change Date" />

        <EditText
            android:id="@+id/EditTextTime"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="Approximate Time of Near Miss" 
            android:textColor="@color/red" >

        </EditText>

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dip"
            android:layout_marginTop="20dip"
            android:text="Location Of Near Miss:"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="@color/black" />

        <Spinner
            android:id="@+id/SpinnerLocationType"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:entries="@array/locationtypelist"
            android:prompt="@string/locationtitle"  
            android:textColor="@color/red" >
</Spinner>

         <TextView
             android:id="@+id/textView2"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_marginLeft="10dip"
             android:text="Your Main Office:"
             android:textAppearance="?android:attr/textAppearanceMedium"
             android:textColor="@color/black" />

        <Spinner
            android:id="@+id/SpinnerOperativeType"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dip"
            android:entries="@array/operativetypelist"
            android:prompt="@string/officetitle"  
            android:textColor="@color/red" >
</Spinner>

        <CheckBox
            android:id="@+id/CheckBoxResponse"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="15dip"
            android:text="@string/feedbackresponse"
            android:textColor="@color/black" >
</CheckBox>

        <EditText
            android:id="@+id/EditTextContact"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:hint="Contact Number" 
            android:textColor="@color/red" >

        </EditText>

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dip"
            android:layout_marginTop="10dip"
            android:text="Take Photo" />

        <Button
            android:id="@+id/ButtonSendFeedback"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_marginBottom="15dip"
            android:layout_marginTop="15dip"
            android:onClick="sendFeedback"
            android:text="@string/feedbackbutton" >
</Button>

    </LinearLayout>
</ScrollView> 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:41:37.737

## 您可以通过使用键值对实现 Spinner 来实现

```
 valueTextView = (TextView)findViewById( R.id.selected );
   Spinner s = (Spinner)findViewById(R.id.spinner);
    final MyData items[] = new MyData[3];
    items[0] = new MyData( "US","us@abc.com" );
    items[1] = new MyData( "INDIA","india@abc.com" );
    items[2] = new MyData( "UK","uk@abc.com" );
    ArrayAdapter<MyData> adapter = new ArrayAdapter<MyData>this,android.R.layout.simple_spinner_item,items);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    s.setAdapter(adapter);
    s.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() 
     {
            public void onItemSelected(AdapterView<?> parent, View view, int position, long id) 
            {
                MyData d = items[position];
                valueTextView.setText( d.getValue() );
            }

            public void onNothingSelected(AdapterView<?> parent) 
            {
            }
        }
    );

   class MyData {
    public MyData( String spinnerText, String value ) {
        this.spinnerText = spinnerText;
        this.value = value;
    }

    public String getSpinnerText() {
        return spinnerText;
    }

    public String getValue() {
        return value;
    }

    public String toString() {
        return spinnerText;
    }

    String spinnerText;
    String value;
} 
```

# javascript - 拉伸 tab.Panel 选项卡以垂直适合“中心边框”

> ID：14154361
> 
> 赞同：0
> 
> 时间：2013-01-04T09:25:54.167
> 
> 标签：javascript, extjs, extjs4

我有一个北、中、南的边界布局视口。南北都可以（工具栏和状态栏）。中心是 tab.Panel 并且它被适当地拉伸以适应宽度，但不是高度。tab.Panel 的第一个选项卡是一个简单的面板，布局设置为“适合”。

如果我在 tabPanel 的内容中明确设置高度，那就没问题了。没有高度属性的子面板不会拉伸到高度。怎么了？

这是以 tab.Panel 为中心的父 Viewport 的代码：

```
 Ext.create('Ext.container.Viewport', {
        layout: 'border',
        items: [
            Ext.create('Ext.toolbar.Toolbar', {
                region: 'north',
                buttonAlign: 'center',
                layout: { pack: 'center'},
                items: [ {
                    scale: 'large',
                    text: 'Customers',
                    iconCls: 'ico-customers',
                    iconAlign: 'top'
                }]
            }),
            Ext.create('Ext.tab.Panel', {
                region: 'center',
                deferredRender: false,
                activeTab: 0,
                plain: true,
                items: [{
                    title: 'Customers',
                    itemId: 'customers',
                    autoScroll: true,
                    items: [
                        {
                            layout: 'fit',
                            title: 'bla',
                            html: 'Something',
                            height: 300
                        }
                    ]
                }, {
                    title: 'Other',
                    layout: 'fit'
                }],
            }),
            {
                region:  'south',
                xtype: 'panel',
                title: 'Status'
            }

        ],
        renderTo: Ext.getBody()
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:16:14.343

我找到了，我放错了布局：'fit'。应该将它放在 tabPanel 的选项卡下，而不是选项卡的项目下。

# c# - 如何使用 C# 从损坏的 XML 中删除所有命名空间？

> ID：14154371
> 
> 赞同：1
> 
> 时间：2013-01-04T09:26:12.010
> 
> 标签：c#, xml, wordpress, xml-namespaces

[这](https://stackoverflow.com/questions/987135/how-to-remove-all-namespaces-from-xml-with-c)是从 xml 中删除所有命名空间的方法。但这对我不起作用。因为有时我会收到损坏的 xml 提要。例如：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- generator="wordpress.com" -->
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:dc="http://purl.org/dc/elements/1.1/"
  xmlns:opensearch="http://a9.com/-/spec/opensearch/1.1/">
<channel>
  <title>sabri ?lker - WordPress.com Search</title>
  <link>http://tr.search.wordpress.com/?q=sabri+%C3%BClker&#038;page=2&#038;t=comment&#038;s=date</link>
  <description>sabri ?lker - WordPress.com Search</description>
  <pubDate>Fri, 04 Jan 2013 08:58:41 +0000</pubDate>
  <language>tr</language>
  <image><url>http://s.wordpress.com/i/buttonw-com.png</url><width>224</width><height>58</height><title>WordPress.com</title><link>http://wordpress.com/</link></image>
  <generator>http://search.wordpress.com/</generator>
  <atom:link rel="self" type="application/rss+xml" href="http://tr.search.wordpress.com/?q=sabri+%C3%BClker&#038;page=2&#038;t=comment&#038;s=date&amp;f=feed" />
  <atom:link rel="search" type="application/opensearchdescription+xml" href="http://en.search.wordpress.com/opensearch.xml" title="WordPress.com" />
  <opensearch:totalResults>10</opensearch:totalResults><opensearch:startIndex>11</opensearch:startIndex><opensearch:itemsPerPage>10</opensearch:itemsPerPage><opensearch:Query role="request" searchTerms="sabri ?lker startPage=\"2" /></channel>
</rss> 
```

我的例外是“名称不能以 '2' 字符开头，十六进制值 0x32。第 17 行，位置 227。” 到结果。那么我应该怎么做才能解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:37:57.353

我会说原因是格式不正确的 searchTerms 属性：

```
searchTerms="sabri ?lker startPage=\"2" 
```

它被错误地引用了，它应该使用 " 而不是 \"。您可以简单地将所有 \" 替换为 "

```
string input = ..; // your xml
string processedInput = input.Replace("\\\"", "&quot;");

// then feed this into your xml parser. 
```

这应该可以解决您的问题，但这当然不是清理错误 xml 输入的一般方法。你可能想看看[http://tidyfornet.sourceforge.net/](http://tidyfornet.sourceforge.net/) 它可以清理 HTML、XHTML 和 XML。

# python - python中是否有等效的Perl的mirror()函数

> ID：14154372
> 
> 赞同：1
> 
> 时间：2013-01-04T09:26:13.077
> 
> 标签：python, perl

我只是想从具有身份验证的网络服务器下载视频文件。我曾经使用 perl 使用它的 mirror() 函数下载脚本，现在我试图在 python 中做同样的事情。

但我无法下载视频文件，只能下载文本文件。在这方面的任何帮助都会很棒。

提前致谢

我浏览并尝试使用**urllib2.urlRetreive()**但我仍然无法下载。这是我正在使用的代码，请看看并在这方面帮助我。

```
file_name = url.split('/')[-1]
print file_name
u = urllib2.urlopen(url)
meta = u.info()
print meta.getheaders("Content-Length")
print "\nAfter content length"
f = open(file_name, 'wb')
meta = u.info()
file_size = int(meta.getheaders("Content-Length")[0])
print "Downloading: %s Bytes: %s" % (file_name, file_size)

file_size_dl = 0
block_sz = 8192
while True:
    print "in While\n"
    buffer = u.read(block_sz)
    print buffer
    if not buffer:
       break

    file_size_dl += len(buffer)
    f.write(buffer)
    status = r"%10d  [%3.2f%%]" % (file_size_dl, file_size_dl * 100\. / file_size)
    status = status + chr(8)*(len(status)+1)
    print status,
f.close() 
```

# c# - Lambda 表达式 Any 返回错误值

> ID：14154373
> 
> 赞同：1
> 
> 时间：2013-01-04T09:26:20.640
> 
> 标签：c#, lambda, any

我有这个 lambda 表达式：

```
if (!myList.Any( x => x.name == "example" && x.articleNumber == "1"))
{

}
else
{

} 
```

myList 包含来自该类的对象，该对象具有以下属性：articleNumber、名称和数量。

这进入 if 而不是 else 尽管有一个名称为“example”和 articleNumber“1”的对象。为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T09:30:24.730

你知道`!`你的lamda之前的权利吗？

你在 if 语句中问的是

如果 myList 不包含名称为示例且文章编号为 1 的任何值

我不知道这是否有帮助，但如果您提供有关您希望通过该语句完成什么的更多信息，可能会更容易回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:30:38.070

我很确定该列表不包含您认为的条目。在 if 行上设置一个调试标记，并在该点检查列表以查看它包含的内容。你会发现入口没有。请记住，字符串也区分大小写，因此如果 name 确实是 Example，它将不匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T09:31:38.337

`name=="example"`我能看到的唯一原因是and没有元素`articleNumber=="1"`。请注意，该`==`运算符在 C# 中区分大小写，并且某处可能存在空格。

然后你可以使用这个[重载`Equals`](http://msdn.microsoft.com/en-us/library/c64xh8f9.aspx)来比较不区分大小写并删除空格`Trim`：

```
if (!myList.Any( x => x.name.Trim().Equals("example", StringComparison.OrdinalIgnoreCase) 
                   && x.articleNumber == "1"))
{

}
else
{

} 
```

您还应该考虑更改 to 的类型，`articleNumber`因为`int`它是一个数字。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-04T10:08:08.333

您的列表可能包含一些您不期望的值。

尝试替换`&&`，`||`看看你会得到什么：

```
var v = myList.Where(x => x.name == "example" || x.articleNumber == "1").ToList(); 
```

只是看看那里有什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T09:30:45.727

你的逻辑没有错，但你可以试试？？

```
if (myList.Where( x => x.name == "example").Where(x=> x.articleNumber == "1").Count() > 0)
{

}
else
{

} 
```

或删除套管中的所有空格和差异

```
if (!myList.Any( x => x.name.Trim().ToLower() == "example" && x.articleNumber.Trim().ToLower() == "1"))
{

}
else
{

} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-04T09:36:55.287

Any 的定义：判断一个序列的任何元素是否存在或是否满足某个条件。

因此，对于序列中的每个元素，都会确定谓词是否与您的表达式匹配。

```
myList.Any( x => x.name == "example" && x.articleNumber == "1") 
```

如果 List 的任何元素的名称为“example”且 articleNumber 为 1，则返回 true。

```
!myList.Any( x => x.name == "example" && x.articleNumber == "1") 
```

如果 List 的 NO 元素的名称为“example”且 articleNumber 为 1，则返回 true。

# android - 保护 Spring Rest 服务

> ID：14154374
> 
> 赞同：0
> 
> 时间：2013-01-04T09:26:25.727
> 
> 标签：android, spring, https, spring-security

我正在尝试使用 Spring 实现 RESTful Web 服务。我已经设置 Spring Security 来处理适用于 REST 服务的链接。我从 Android 应用程序调用此 Web 服务。我现在所做的是使用基本身份验证连接到它。我正在努力寻找关于这到底有多安全的体面信息。我想我至少应该通过 SSL 或其他方式进行这些调用？

我在调用 REST 客户端的 Android 客户端上的代码

```
 public MyClass callRest() {
    final String url = "http://10.0.2.2:8080/myservice/rest/getSomething";

    HttpAuthentication authHeader = new HttpBasicAuthentication(username,
            password);
    HttpHeaders requestHeaders = new HttpHeaders();
    requestHeaders.setAuthorization(authHeader);
    requestHeaders.setAccept(Collections
            .singletonList(MediaType.APPLICATION_JSON));

    RestTemplate restTemplate = new RestTemplate();
    restTemplate.getMessageConverters().add(
            new MappingJacksonHttpMessageConverter());
    try {
        ResponseEntity<MyClass> response = restTemplate.exchange(url,
                HttpMethod.GET, new HttpEntity<Object>(requestHeaders),
                MyClass.class);
        return response.getBody();
    } catch (HttpClientErrorException e) {
        return new MyClass();
    }

} 
```

所以我现在在我的 Spring Security 配置中添加了什么：

```
<http auto-config='true'>
    <intercept-url pattern="/rest/**" access="ROLE_USER"
        requires-channel="https" />
</http> 
```

我不知道从那里去哪里，因为现在连接当然不再工作了，因为 https。我似乎找不到像样的例子来说明如何使用 Resttemplate 来解决这个问题。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:49:46.230

HTTP 基本身份验证在通过 HTTPS 使用时相当安全，因为用户和密码字段是通过加密连接发送的，因此它们不太容易受到中间人攻击。这里有一些有趣的点：[保护 API：SSL 和 HTTP 基本身份验证与签名](https://stackoverflow.com/questions/5511589/securing-an-api-ssl-http-basic-authentication-vs-signature)

在我看来，如果您正在创建一个可以访问用户敏感数据（即银行帐户详细信息、信用卡号、电子邮件地址和密码）的 API，那么您可能需要一种更安全的方法，因为 HTTP 基本身份验证很容易受到暴力攻击，因为它始终可用（除非您建立了诸如最大重试次数等威慑措施）。如果您的 API 用于游戏或基本业务数据，那么黑客花时间在上面的吸引力应该较小。

您的服务器是否支持 HTTPS - 通常您需要为 HTTPS 证书支付额外费用，或者您必须使用共享一次，这会为您提供共享 HTTPS 域上的子域 - 即`https//your-site.your-hosting-provider.com/`。你可能需要检查一下。

**更新 1**：您的问题似乎出在您的服务器上，而不是您的程序上。查看[这篇博文](http://www.mkyong.com/tomcat/how-to-configure-tomcat-to-support-ssl-or-https/)，了解如何在 Tomcat 服务器上设置 HTTPS。您需要先执行此操作，然后才能从 Spring 应用程序使用 HTTPS - 查看您的代码，除了您的服务器之外似乎没有问题。

也试试[这个](http://www.itworld.com/development/80705/how-enable-https-tomcat)。

**更新 2**获得访问权限后，您将需要信任 Android 设备上的证书（如果您正在制作桌面/Web 应用程序，则需要信任您的 Java 安装）。它需要被信任，因为您是自己创建的，而不是 CA 机构。请参阅此答案：[通过 HTTPS 使用 HttpClient 信任所有证书](https://stackoverflow.com/questions/2642777/trusting-all-certificates-using-httpclient-over-https/6378872#6378872)（不是关于信任所有证书的部分 - 这可能很危险）。

# sql-server - 数据库开发部署方法和工具

> ID：14154375
> 
> 赞同：0
> 
> 时间：2013-01-04T09:26:30.313
> 
> 标签：sql-server, database, visual-studio, deployment, version-control

我的团队使用 ASP.NET 开发了一个 Web 应用程序。该应用程序非常基于数据库（我们使用 SQL Server）。除了服务器和客户端代码之外，大多数功能都需要数据库开发。我们使用 GIT 作为我们的源代码管理系统。

为了签入（以及稍后部署）数据库更改，我们创建 SQL 脚本并将它们签入。我们的安装程序知道运行它们，这就是我们部署这些更改的方式。使用脚本来合并更改非常不舒服（例如，如果两个开发人员将一列添加到同一个表中）。

所以我的问题是你还能建议什么其他方法或工具？我知道 Visual Studio 有一个可能有用的数据库项目，但我还没有了解它，我想知道在我开始学习它之前是否还有其他选择。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T15:37:43.550

我认为，您必须从数据库开发的第一步开始添加 worlflow 并使用[Liquibase](http://www.liquibase.org/)（检查[Liquibase Quick-Start](http://www.liquibase.org/quickstart)，其中更改日志从创建初始结构开始）。

从开发人员 POV 添加 Liquibase 意味着[在 source-tree 中出现额外的 XML 文件](http://www.liquibase.org/bestpractices)，当必须在某些变更集中更改数据库模式时

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T14:03:13.250

第一次完全披露我为制造此产品的 Red Gate 工作......

您可能有兴趣查看[SQL Source Control](http://www.red-gate.com/products/sql-development/sql-source-control/)。它是 SSMS 的插件，可将您的开发数据库连接到您现有的版本控制系统，在您的情况下为 git。

当开发人员对开发数据库（在专用本地副本或共享开发数据库中）进行更改时，会检测到此更改，然后可以将其提交到存储库。其他开发人员可以接受此更改，您可以将其传播到其他环境。

在部署方面，您可以使用 SQL 比较工具从您签出的存储库中的特定修订版进行部署。

在您的示例中，两个开发人员对同一个表进行更改，这真的很方便。第二个开发人员可以在提交更改之前从版本控制系统中获取更改。或者您可以使用 git 的分支/合并功能在单独的分支中跟踪这些并将它们部署为单独的更改。也可以将其耦合到 CI 系统中。

使用 git 运行 SQL 源代码控制的一些细节：

*   [http://datachomp.com/archives/git-and-red-gate-sql-source-control/](http://datachomp.com/archives/git-and-red-gate-sql-source-control/)

以及更通用的设置指南的链接

*   [http://www.troyhunt.com/2010/07/rocking-your-sql-source-control-world.html](http://www.troyhunt.com/2010/07/rocking-your-sql-source-control-world.html)

# search - 保存 lucene-solr 搜索结果的最快方法是什么？

> ID：14154377
> 
> 赞同：1
> 
> 时间：2013-01-04T09:26:33.663
> 
> 标签：search, solr, lucene, full-text-search, search-engine

目前 SQL '%like%' 搜索用于获取包含某些关键字的所有行。我们正在尝试用 Lucene-Solr 替换 MySQL 之类的搜索。

我们构建了索引，

1.  用关键字查询到 solr，
2.  检索所有相应记录的主键，
3.  用PK查询到mysql
4.  并获取结果。

它变慢了。该死！

我认为 1、2、3 中使用的带宽是原因（因为结果非常大，比如 100 万+），但我想不出更好的方法。

除了 CSV over http，还有其他方法可以获取 solr 搜索结果吗？（如 mysql 中的文件转储）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:18:04.203

我们做了同样的过程来结合 solr 和 mysql，它比单个 mySql 全文搜索快 100-1000 倍。

因此，您的工作流程/程序通常不是问题。问题是：你的瓶颈在哪里。要对此进行调查，您应该查看 catalina 以查看每个 solr 请求的查询时间。在 MySQL 上也一样 - 看看查询时间/长时间运行的查询。

我们遇到了性能问题，因为返回的 PK 数量非常大 -> 因此 mySQL 查询非常大，因为`where in ()`子句非常长。

随后是一个非常大的 MySQL 语句，其中许多行返回 200-1.000.000+

但关键是，应用程序/用户不需要一次这么大的约会。所以我们决定使用分页和偏移（在 solr 方面）。Solr 现在只返回 30-50 个结果（取决于用户应用程序环境的分页设置）。

这工作得非常快。

//编辑：除了 CSV over http，还有其他方法可以获取 solr 搜索结果吗？

有不同的格式，例如 XML、PHP、CSV、Python、Ruby 和 JSON。要更改这一点，您可以使用`wt`参数，例如`....&wt=json`

[http://wiki.apache.org/solr/CoreQueryParameters#wt](http://wiki.apache.org/solr/CoreQueryParameters#wt)

[http://wiki.apache.org/solr/QueryResponseWriter](http://wiki.apache.org/solr/QueryResponseWriter)

//编辑#2

另一种方法可能不仅仅是将数据索引到 solr。您可以（额外）将数据存储到 solr，以便从 solr 获取数据并且无需 MySQL 数据即可生存。这取决于你的数据，如果这对你来说是一种方式......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:48:14.950

您不能将所有 MySQL 数据库检索到 Solr 吗？

您可以使用[DIH（数据导入处理程序）](http://wiki.apache.org/solr/DataImportHandler)从 MySQL 检索所有数据并非常容易地添加到 Solr。

然后，您将在一个地方获得所需的所有信息，我认为您将获得更好的性能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T10:15:57.477

Solr 提供了一种将结果导出为[CSV](http://wiki.apache.org/solr/CSVResponseWriter)和[JSON](http://wiki.apache.org/solr/SolJSON)
的方法， 100 万+ 仍然是一个非常大的集合。您总是可以分批进行。

# mysql - 如何在java中显示多条记录？

> ID：14154378
> 
> 赞同：-1
> 
> 时间：2013-01-04T09:26:33.470
> 
> 标签：mysql, jsp, pagination, split

我已连接到一个 MySql 表以获取需要使用 JSP 显示的 1000 条记录。我想将我的表拆分为多个表（大小为 50），可以使用 jsp 页面上的下一步按钮查看这些表。我该如何实施？

```
String sql = "select * from people";
PreparedStatement statement = connection.prepareStatement(sql);

ResultSet result = statement.executeQuery();
while(result.next()) {                               // here i get 1000 records. how can i display these records on mulitple jsp pages?
// ... get column values from this record
} 
```

上面给出了 1000 条记录，我使用了 PreparedStatement。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:40:22.987

假设您可以在 JSP 中获取完整的表。

只需在返回 ROWS 的函数中再添加一个参数`COUNTER`

将 COUNTER 添加到`LIMIT`您的 QUERY 中的子句。

现在您需要跟踪`COUNTER`单击下一步时更新 URL 为

> 第一次点击 - URL?pageCOUNTER=1
> 第二次点击 - URL?pageCOUNTER=2

从 URL获取`pageCOUNTER`变量并将其作为 COUNTER 传递给您的函数

等等。不断得到你的结果。

或使用 JAVASCRIPT 表 - [http://www.datatables.net/](http://www.datatables.net/)

# c++ - 是否从“this”中删除常量然后更改成员值会调用未定义的行为？

> ID：14154382
> 
> 赞同：6
> 
> 时间：2013-01-04T09:26:48.677
> 
> 标签：c++, constants, standards-compliance, const-cast

在回应我对[另一个问题的一些答案的](https://stackoverflow.com/a/1633537/91757)评论时，有人建议像

```
void C::f() const
{
  const_cast<C *>( this )->m_x = 1;
} 
```

由于修改了 const 对象，因此调用未定义的行为。这是真的？如果不是，请引用允许这样做的 C++ 标准（请说明您引用的标准）。

对于它的价值，我一直使用这种方法来避免创建一个成员变量`mutable`，如果只有一个或两个方法需要写入它（因为 using`mutable`使它可写入*所有*方法）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-04T10:09:33.640

（尝试）修改 const 对象（C++11 中的 7.1.6.1/4）是未定义的行为。

所以重要的问题是，什么是 const 对象，并且是`m_x`一个？如果是，那么你有UB。如果不是，那么这里没有任何东西表明它会是 UB——当然它可能是 UB，因为这里没有说明其他一些原因（例如，数据竞争）。

如果函数`f`在类的 const 实例上调用`C`，`m_x` *则为*const 对象，因此行为未定义（7.1.6.1/5）：

```
const C c;
c.f(); // UB 
```

如果函数`f`在类的非 const 实例上调用`C`，则`m_x`不是 const 对象，因此据我们所知定义行为：

```
C c;
const C *ptr = &c;
c->f(); // OK 
```

因此，如果您编写此函数，那么您将受用户支配，不要创建 const 实例`C`并在其上调用该函数。也许实例`C`仅由某个工厂创建，在这种情况下，您可以防止这种情况发生。

如果您希望一个数据成员即使是完整的对象也是可修改的`const`，那么您应该标记它`mutable`。这就是`mutable`目的，它为您提供定义的行为，即使`f`在`C`.

从 C++11 开始，`const`成员函数和对`mutable`数据成员的操作应该是线程安全的。否则，当您的类型与标准库函数和容器一起使用时，您将违反标准库提供的保证。

因此，在 C++11 中，您需要创建`m_x`一个原子类型，或者以其他方式同步修改，或者作为最后的手段文档，即使它被标记为 const，该函数`f`也不是线程安全的。如果你不做任何这些事情，那么你再次为用户创造了一个机会来编写他们合理地认为应该工作但实际上有 UB 的代码。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-04T09:32:07.640

有两个规则：

1.  您不能修改 const 对象。

2.  您不能通过 const 指针或引用来修改对象。

如果基础对象不是 const，则您不会违反任何规则。有一个常见的[误解](http://ideone.com/3NzrYK)，即存在对对象的 const 指针或 const 引用会以某种方式阻止该对象更改或被更改。这简直是​​个误会。例如：

```
#include <iostream>
using namespace std;

// 'const' means *you* can't change the value through that reference
// It does not mean the value cannot change

void f(const int& x, int* y)
{
    cout << "x = " << x << endl;
    *y = 5;
    cout << "x = " << x << endl;
}

int main()
{
    int x = 10;
    f(x, &x);
} 
```

注意没有演员表，没什么好笑的。然而，函数具有 const 引用的对象被该函数修改。这是允许的。您的代码是相同的，它只是通过抛弃 constness 来实现。

但是，如果基础对象是 const，则这是非法的。例如，[此代码](http://ideone.com/52Ismp)在我的机器上出现段错误：

```
#include <iostream>
using namespace std;

const int i = 5;

void cast(const int *j)
{
    *const_cast<int *>(j) = 1;
}

int main(void)
{
    cout << "i = " << i << endl;
    cast(&i);
    cout << "i = " << i << endl;
} 
```

请参阅第 3.4.3 节（CV 限定符）和第 5.2.7 节（抛弃 constness）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-04T09:54:45.053

无需进一步搜索，C++11 标准中的第 1.9/4 节内容如下：

> 本国际标准中将某些其他操作描述为未定义的（例如，尝试修改 const 对象的效果）。

这就是你在这里想要做的。你抛弃 constness 并不重要（如果你不这样做，行为就很好定义了：你的代码将无法编译）。您正在尝试修改`const`对象，因此遇到了未定义的行为。

您的代码似乎在许多情况下都可以工作。但是，如果您调用它的对象确实是`const`并且运行时决定将其存储在只读内存中，则不会。`const`除非你真的确定这个对象不是最初的，否则抛弃 constness 是危险的。

# python - 无法在 Python 中导入 hurry.filesize 模块？

> ID：14154384
> 
> 赞同：1
> 
> 时间：2013-01-04T09:26:53.360
> 
> 标签：python, module

我在 Django 1.4 中使用了 Python 2.6。我可以在 python shell 中导入为：

```
from hurry.filesize import alternative 
```

我还可以在 Django shell 中导入为：

```
./manage.py shell

from hurry.filesize import alternative 
```

但是在同一台机器上的真实 Django 项目中使用它时出现错误。有什么问题？

# azure - Windows Azure + SQL - 爱好者网站

> ID：14154387
> 
> 赞同：0
> 
> 时间：2013-01-04T09:27:03.470
> 
> 标签：azure, azure-sql-database, cloud-hosting

我想知道 Windows Azure 是否是一个可行的选择，现在他们提供 10 个免费网站，用于托管一个带有数据库和域名等的简单网站。还是更传统的网络托管仍然是更好的选择？

数据库不会那么大，因此 100MB 数据库选项的 5 美元就足够了。我想交通也需要几美元？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:35:32.567

自定义域名只能在非免费的共享或保留模式下使用。

免费网站将位于 [yourSubdomain].azurewebsites.net 下

因此，这取决于拥有自己的域名对您是否重要，如果是，您是否愿意为网站付费。

尽管如此，Azure 网站还是一个非常好的云解决方案，可以快速部署众多 CMS 系统，包括 WordPress、Joomla 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:49:02.963

我认为这是一个可行的选择。但是，要获得您自己的域名，您必须将网站从免费模式更改为共享或保留模式。继承人描述和链接如何做到这一点！

> “当您创建网站时，Windows Azure 在 azurewebsites.net 域上提供了一个友好的子域，因此您的用户可以使用类似 http://.azurewebsites.net 的 URL 访问您的网站。但是，如果您将网站配置为共享或保留模式，您可以将您的网站映射到您自己的域名。”

[http://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns-web-site/](http://www.windowsazure.com/en-us/develop/net/common-tasks/custom-dns-web-site/)

# actionscript-3 - AS3 简单水平图库

> ID：14154388
> 
> 赞同：1
> 
> 时间：2013-01-04T09:27:05.337
> 
> 标签：actionscript-3, flash, gallery

我有一个包含 24 张图片的简单水平画廊。 ![简单的画廊](../Images/99f3a36ec10fc4af384d1cf551a5cb33.png)

我们的想法是在屏幕上显示全部（24）张图片，中间一张自动显示为上面的大一张（如方案）。这意味着当某些箭头被按下时，图像的移动必须是一个。他们也必须自动循环。所以第一个可以走中间去。

到目前为止，这是我的代码。（我没有放全部 24 个缩略图，这里只有 3 个缩略图仅用于测试）我已经设法移动缩略图并选择了一张大图。但是我需要在中间自动选择它。

```
buttonL1_btn.addEventListener(MouseEvent.CLICK, left);
buttonR1_btn.addEventListener(MouseEvent.CLICK, right);

function left(event:Event):void{
     box_mc.x -=50;
}

function right(event:Event):void{
     box_mc.x +=50;
}

//imgs 

img_3_big.visible = false;

box_mc.img_1.addEventListener(MouseEvent.CLICK, img1_show);

function img1_show(e:MouseEvent):void {
    img_3_big.visible = true;
    img_3_big.gotoAndStop(3);

}
box_mc.img_2.addEventListener(MouseEvent.CLICK, img2_show);

function img2_show(e:MouseEvent):void {
    img_3_big.visible = true;
    img_3_big.gotoAndStop(2);

}
box_mc.img_3.addEventListener(MouseEvent.CLICK, img3_show);

function img3_show(e:MouseEvent):void {
    img_3_big.visible = true;
    img_3_big.gotoAndStop(1);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T06:57:33.280

虽然与您已经完成的方法不同，但我的方法是将 .swf 之外的所有 24 个图像保存在它们自己的图像文件中并跟踪当前图像索引。与此类似的东西**（未经测试的代码）**：

```
import flash.display.Bitmap;
import flash.display.Loader;
import flash.events.MouseEvent;

var allImagePaths:Vector.<String> = new Vector.<String>(); // Holds reference to all big images
var allImageThumbPaths:Vector.<String> = new Vector.<String>(); // Holds reference to all thumbnail images
var currentImageIndex:int = 0; // Keeps track of what image is currently selected 

// Loaders that would load big image and thumbnails
var loaderMain:Loader;
var loaderThumb_Left:Loader;
var loaderThumb_Middle:Loader;
var loaderThumb_Right:Loader; 

SetupGallery(); // initialize gallery

function SetupGallery()
{
    // Setup image loaders
    loaderMain = new Loader();
    loaderThumb_Left = new Loader();
    loaderThumb_Middle = new Loader();
    loaderThumb_Right = new Loader();

    // Add loaders to existing MovieClips on stage.
    imageHolderMain_mc.addChild(loaderMain);
    imageHolderThumbLeft_mc.addChild(loaderThumb_Left);
    imageHolderThumbMiddle_mc.addChild(loaderThumb_Middle);
    imageHolderThumbRight_mc.addChild(loaderThumb_Right);

    // Load image paths into a vector collection (like an array)
    loadImages();

    // Setup arrow button listeners
    buttonL1_btn.addEventListener(MouseEvent.CLICK, showImageLeft);
    buttonR1_btn.addEventListener(MouseEvent.CLICK, showImageRight);

}

function loadImages()
{
    // Initialize collection of images for easier looping/displaying
    allImagePaths = new Vector.<String>();
    allImageThumbPaths = new Vector.<String>();

    // Load up all image paths into the image array(vector). 
    allImagePaths.push("image1.jpg");
    allImageThumbPaths.push("image1_thumb.jpg");
    // ... image2 - image23 ...
    allImagePaths.push("image24.jpg");
    allImageThumbPaths.push("image24_thumb.jpg");

    // NOTE: Consider loading paths to image files via xml
}

function showImageLeft(evt:MouseEvent)
{
    currentImageIndex--;
    showCurrentImage();
}

function showImageRight(evt:MouseEvent)
{
    currentImageIndex++;
    showCurrentImage();
}

// Call this after each arrow click, direction will be determined by currentImageIndex
function showCurrentImage()
{
    // Keep current index within bounds, if out of range then "loop back"
    if(currentImageIndex < 0) currentImageIndex = allImagePaths.length - 1;
    if(currentImageIndex > allImagePaths.length - 1) currentImageIndex = 0;

    // Set right and left thumbnail indexes based on current image
    // (Assuming my logic is correct of course :)
    var indexRight:int = currentImageIndex - 1;
    if(indexRight < 0) indexRight = allImagePaths.length - 1; // "Loop back" if needed
    var indexLeft:int = currentImageIndex + 1;
    if(indexLeft > allImagePaths.length - 1) indexLeft = 0; // "Loop back" if needed

    // clear out any existing images
    loaderMain.unload();
    loaderThumb_Left.unload();
    loaderThumb_Middle.unload();
    loaderThumb_Right.unload();

    // set correct images based on new indexes
    loaderMain.load(allImagePaths[currentImageIndex]);
    loaderThumb_Left.load(allImageThumbPaths[indexLeft]);
    loaderThumb_Middle.load(allImageThumbPaths[currentImageIndex]);
    loaderThumb_Right.load(allImageThumbPaths[indexRight]);
} 
```

您可能还需要处理一些额外的事情，但这是一般的想法。

使用这种方法，您将不会处理关键帧，实际上您只想拥有一个 AS 代码所在的关键帧，并且您希望从 .swf 文件本身中删除所有图像。

这种方法将：

1.  在画廊的结尾或开头允许“循环播放”图像。
2.  使将来添加或删除图像变得更加容易。
3.  改善最终用户的初始加载时间。

# asp.net-mvc-3 - 如何将复选框选中列表传递给模式弹出窗口

> ID：14154391
> 
> 赞同：0
> 
> 时间：2013-01-04T09:27:15.543
> 
> 标签：asp.net-mvc-3

我有一个带有按钮和表格的页面

```
<input type="submit" value="Email" name="button" class="openDialog" data-dialog-id="Mail Dialog" data-dialog-title="Send Mail" data-url="<%: Url.Action("SendMail") %>" />    

<form>
    <table>
        <tr>
            <th>            
                <input type="checkbox"/>           
             <input type="hidden" class="textfield" id="video0_tags" name="video0_tags" />     
            </th>
            <th>
                FirstName
            </th>
            <th>
                LastName
            </th>
        </tr>
    <% foreach (var item in Model)
       { %>
        <tr>
            <td>            
                <div class="taglist">
                <input type="checkbox" name="check" value="<%: item.ProfileId %>" /> 
                </div>
            </td>
            <td>
                <%: Html.DisplayFor(modelItem => item.FirstName)%>
            </td>
            <td>
                <%: Html.DisplayFor(modelItem => item.LastName)%>
            </td>
    <% } %>
    </table>
</form> 
```

在我的控制器中

```
[HttpGet]
    public ActionResult SendMail(string video0_tags)
    {            
        return View();
    }

    [HttpPost]
    public ActionResult SendMail(int[] check,Profile profile, mail email)
    {

            foreach (var item in check)
            {
                var dbprofile = db.Profile.Single(p => p.ProfileId == item);
                string Emailid = dbprofile.EmailId;
                MailMessage msg = new MailMessage();
                MailAddress fromAddress = new MailAddress("xxxx@gmail.com");
                msg.From = fromAddress;
                msg.To.Add(Emailid);
                msg.Subject = email.Subject;
                msg.Body = email.Body;
                msg.Priority = MailPriority.High;
                SmtpClient client = new SmtpClient("smtp.gmail.com", 587);
                client.DeliveryMethod = SmtpDeliveryMethod.Network;
                client.Credentials = new NetworkCredential("xxxxx@gmail.com", "password");
                client.EnableSsl = true;
                client.Send(msg);
            }
        return RedirectToAction("Profiles", "profile");
    } 
```

**问题**

我的问题是我无法将复选框选中的值传递给弹出窗口的 get actionresult。这是根据复选框选中的项目向多个成员发送电子邮件。

任何人都可以帮助我.....请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:32:10.497

问题是复选框是一个布尔输入。

如果您将配置文件 ID 存储在隐藏的输入字段中会更好

顺便说一句，不要忘记用表格包裹你的桌子。

```
<form>
   <input type="submit" .../> 
   <table> ... </table>
</form> 
```

# android - ActionBarSherlock mirrod 属性——何时使用“android:”前缀？

> ID：14154392
> 
> 赞同：1
> 
> 时间：2013-01-04T09:27:29.487
> 
> 标签：android, android-actionbar, actionbarsherlock, android-xml, android-theme

在设置 ActionBarSherlock 样式时，我想知道何时必须使用前缀属性，何时使用非前缀属性，以及何时使用两者。例如：

```
<item name="actionBarStyle">@style/Widget.Styled.ActionBar</item>
<item name="android:actionBarStyle">@style/Widget.Styled.ActionBar</item> 
```

[我在ActionBarSherlock 网站](http://actionbarsherlock.com/theming.html)上找到了这个解释：

> ### 镜像属性
> 
> 由于 Android 主题系统的限制，任何主题自定义都必须在两个属性中声明。普通的 android-prefixed 属性将主题应用于本机操作栏，unprefixed 属性用于自定义实现。由于两个主题 API 完全相同，您只需引用您的自定义两次，而不必实施两次。
> 
> 准确传达这意味着什么的最简单方法是举个例子。以下是上述“样式化”示例的完整主题：

```
<style name="Theme.Styled" parent="Theme.Sherlock.Light.DarkActionBar">
    <item name="actionBarStyle">@style/Widget.Styled.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.Styled.ActionBar</item>
</style>

<style name="Widget.Styled.ActionBar" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
    <item name="background">@drawable/bg_striped</item>
    <item name="android:background">@drawable/bg_striped</item>

    <item name="backgroundSplit">@drawable/bg_striped_split</item>
    <item name="android:backgroundSplit">@drawable/bg_striped_split</item>
</style> 
```

我想，非前缀属性只能用于属性，在 API 级别 11 之前不存在。但是为什么示例`android:background`中还有一个`background`属性？`android:background`自 API 级别 1 起就存在。有人可以提供有关这些镜像属性的更多详细信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:40:10.297

根据我对您引用的 ActionBarSherlock 文档的了解，当 ActionBarSherlock 使用 ActionBar 的本机版本（即，在运行 Android 3+ 的设备上可用），并且在旧版本上使用无前缀版本，此时 ActionBarSherlock 实际上必须使用其自己的 ActionBar 组件实现。

简而言之，android-prefixed 属性用于 Android 原生功能，非前缀版本用于自定义组件。

无论如何，在为 ActionBarSherlock 对象设置主题时，您似乎总是必须同时设置前缀和非前缀属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:33:53.023

简单规则是您继承的任何地方，`parent="Widget.Sherlock.etc"`那么您应该具有双重属性。

例外是直接样式喜欢`Text`和`Button`不喜欢，因为你只是将你的样式直接传递给那个`TextView`/ `Button`，但是我总是从 abs__styles.xml 中定义的父/当前样式继承，这样你总是会得到正确的间距等..

# mysql - 如何优化下面的sql查询？

> ID：14154400
> 
> 赞同：3
> 
> 时间：2013-01-04T09:27:53.970
> 
> 标签：mysql, sql, database, query-optimization

我在这里所做的是获取重复的预订和用户。此处预订票不能打印两次。如果用户打印带有该记录的工单跟踪器表更新。如果用户两次打印同一张票，则将其标记为重复。子查询在这里做的是返回一些被标记为重复的预订 id。

```
 SELECT t1.id AS res_id,
       t1.tx_id,
       t1.tx_date,
       t1.bx_date,
       t1.method,
       t1.theater_id,
       t1.showtime_id,
       t1.category_id,
       t1.amount,
       t1.fname,
       t1.status,
       t1.mobile,
       u.username,
       t2.*
FROM `reservation` AS t1
INNER JOIN
  ( SELECT *
   FROM `tracker`
   WHERE reservation_id IN
       ( SELECT reservation_id
        FROM `tracker`
        GROUP BY reservation_id HAVING ( METHOD = 1
                                        AND TYPE = 0
                                        AND COUNT(*) > 1 )
        OR ( METHOD = 1
            AND TYPE = 1
            AND COUNT(*) > 1 )
        OR ( METHOD = 2
            AND TYPE = 2
            AND COUNT(*) > 0 )
        OR ( METHOD = 3
            AND TYPE = 0
            AND COUNT(*) > 0 )
        OR ( METHOD = 3
            AND TYPE = 1
            AND COUNT(*) > 1 )
        OR ( METHOD = 3
            AND TYPE = 3
            AND COUNT(*) > 0 )) ) AS t2 ON t1.id = t2.reservation_id
INNER JOIN `users` AS u ON u.id = t2.user_id
WHERE t2.resolved = 0
  AND t2.duplicate = 1
ORDER BY t2.issue_date DESC, t1.id DESC 
```

EXPLAIN 上述查询的命令。

![在此处输入图像描述](../Images/269a69a67662893b718b1e332c7dd448.png)

我该怎么办？如果我索引应该使用哪些键？我如何决定要索引哪些键？我知道子查询会减慢我的速度 我应该遵循哪些程序来消除速度缓慢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T15:19:00.110

在 MySQL 中，`exists`子查询通常比`in`子查询快。你可以试试：

```
SELECT t1.id AS res_id, t1.tx_id, t1.tx_date, t1.bx_date,t1.method, t1.theater_id, t1.showtime_id,
       t1.category_id, t1.amount, t1.fname, t1.status, t1.mobile, u.username, t2.*
FROM `reservation` t1 INNER JOIN
     (SELECT *
      FROM `tracker` t
      WHERE EXISTS (SELECT 1
                    FROM `tracker` t3
                    where t3.reservation_id = t.reservation_id
                    GROUP BY reservation_id
                    HAVING (METHOD = 1 AND TYPE = 0 AND COUNT(*) > 1) OR
                           (METHOD = 1 AND TYPE = 1 AND COUNT(*) > 1) OR
                           (METHOD = 2 AND TYPE = 2 AND COUNT(*) > 0) OR
                           (METHOD = 3 AND TYPE = 0 AND COUNT(*) > 0) OR
                           (METHOD = 3 AND TYPE = 1 AND COUNT(*) > 1) OR
                           (METHOD = 3 AND TYPE = 3 AND COUNT(*) > 0)
                   )
     ) t2
     ON t1.id = t2.reservation_id INNER JOIN
     `users` AS u ON u.id = t2.user_id
WHERE t2.resolved = 0 AND t2.duplicate = 1
ORDER BY t2.issue_date DESC, t1.id DESC 
```

我注意到子查询在子句中使用了隐藏列`having`。它可能没有按照您的预期进行。通常，查询将在子句中包含`method`and或具有诸如.`type``group by``max(Method)`

# android - KSOAP2 调用异步 web 服务得到了非法ArgumentException

> ID：14154401
> 
> 赞同：1
> 
> 时间：2013-01-04T09:27:56.387
> 
> 标签：android, web-services, ksoap2, android-ksoap2

我正在使用 KSOAP2 调用异步 Web 服务（服务器不返回任何内容）。Web 服务调用已经成功，我可以从服务器上看到，但是 HttpTransportSE.call 抛出异常并导致应用程序崩溃。

我的代码是：

```
envelope.bodyOut = soap;
    envelope.dotNet = false;
    MarshalDouble md = new MarshalDouble();
    md.register(envelope);

        HttpTransportSE androidHttpTransport = new HttpTransportSE(url);
        androidHttpTransport.debug = true;
        try {
            androidHttpTransport.call(null, envelope);
        } catch (IOException e) {
            e.printStackTrace();
        } catch (XmlPullParserException e) {
            e.printStackTrace();
        } 
```

错误日志是：

```
01-04 17:25:05.930: E/Trace(17787): error opening trace file: No such file or directory (2)
01-04 17:25:06.145: E/SensorManager(17787): thread start
01-04 17:25:19.145: E/AndroidRuntime(17787): FATAL EXCEPTION: AsyncTask #2
01-04 17:25:19.145: E/AndroidRuntime(17787): java.lang.RuntimeException: An error occured while executing doInBackground()
01-04 17:25:19.145: E/AndroidRuntime(17787):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
01-04 17:25:19.145: E/AndroidRuntime(17787):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
01-04 17:25:19.145: E/AndroidRuntime(17787):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
01-04 17:25:19.145: E/AndroidRuntime(17787):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
01-04 17:25:19.145: E/AndroidRuntime(17787):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
01-04 17:25:19.145: E/AndroidRuntime(17787):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
01-04 17:25:19.145: E/AndroidRuntime(17787):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
01-04 17:25:19.145: E/AndroidRuntime(17787):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
01-04 17:25:19.145: E/AndroidRuntime(17787):    at java.lang.Thread.run(Thread.java:856)
01-04 17:25:19.145: E/AndroidRuntime(17787): Caused by: java.lang.IllegalArgumentException: size <= 0
01-04 17:25:19.145: E/AndroidRuntime(17787):    at java.io.BufferedInputStream.<init>(BufferedInputStream.java:94)
01-04 17:25:19.145: E/AndroidRuntime(17787):    at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:219)
01-04 17:25:19.145: E/AndroidRuntime(17787):    at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:114)
01-04 17:25:19.145: E/AndroidRuntime(17787):    at com.oracle.bpm.mobile.fragment.PSIRFragment.callBPMProcessAcceleratorAdapter(PSIRFragment.java:447)
01-04 17:25:19.145: E/AndroidRuntime(17787):    at com.oracle.bpm.mobile.fragment.PSIRFragment.access$1(PSIRFragment.java:368)
01-04 17:25:19.145: E/AndroidRuntime(17787):    at com.oracle.bpm.mobile.fragment.PSIRFragment$CallPSIRMobileAdapterTask.doInBackground(PSIRFragment.java:364)
01-04 17:25:19.145: E/AndroidRuntime(17787):    at com.oracle.bpm.mobile.fragment.PSIRFragment$CallPSIRMobileAdapterTask.doInBackground(PSIRFragment.java:1)
01-04 17:25:19.145: E/AndroidRuntime(17787):    at android.os.AsyncTask$2.call(AsyncTask.java:287)
01-04 17:25:19.145: E/AndroidRuntime(17787):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
01-04 17:25:19.145: E/AndroidRuntime(17787):    ... 5 more 
```

有人知道为什么吗？如何使用 ksoap 调用异步 Web 服务？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T09:03:30.903

我检查了 HttpTransportSE.java 的代码，似乎没有办法阻止它获得响应。所以我必须将我的 web 服务更改为同步并返回类似 OK 的内容来解决这个问题。希望 KSOAP2 能解决这个问题。

# php - 是否有任何 api 可以从 spotify 获取专辑封面？

> ID：14154402
> 
> 赞同：1
> 
> 时间：2013-01-04T09:27:57.067
> 
> 标签：php, spotify

> **可能重复：**
> [使用 Spotify API 检索封面图稿](https://stackoverflow.com/questions/10123804/retrieve-cover-artwork-using-spotify-api)

是否有任何 api 可以从 spotify 获取专辑封面？

我正在尝试通过以下方式检索专辑的详细信息

```
$url_id = "some_spotify_album_id";
http://ws.spotify.com/lookup/1/?uri=spotify:album:$url_id"; 
```

我正在使用上述 api 获取专辑名称、艺术家名称等。但它没有返回专辑封面。

请帮忙，谢谢

# javascript - 如何在另一个条形图系列上绘制条形图系列

> ID：14154404
> 
> 赞同：0
> 
> 时间：2013-01-04T09:28:02.973
> 
> 标签：javascript, jquery, jqplot

我正在使用 Jqplot，我想在我的图表上绘制两个系列。我希望将这两个系列绘制为条形图。如果 x 值相同，我还希望将第一个系列绘制在第二个系列上。

我该怎么做？我试图指定`barPadding`选项，`0`但两个系列是并排绘制的。

感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T21:39:58.117

我不确定我是否理解您所说的“第一个系列画在第二个系列上”的意思。堆积条形图是否适合您的目的？检查此页面上的第三个示例：[http](http://www.jqplot.com/deploy/dist/examples/barTest.html) ://www.jqplot.com/deploy/dist/examples/barTest.html 。

# php - 将 PHP 应用程序打开到 Windows Phone 的技术 - SOAP/REST

> ID：14154405
> 
> 赞同：1
> 
> 时间：2013-01-04T09:28:04.997
> 
> 标签：php, rest, soap, service, windows-phone

我正在完成一个我用**面向对象的 PHP**开发的网站。

如果我可以在 Windows Phone 上打开我的应用程序，那就太好了（因为我喜欢这个平台的外观和感觉）。

我已经探索了通过使用 PHP`SoapServer`类来打开我的应用程序。我还查看了 REST 并将我的应用程序的数据作为 JSON 检索，但感觉就像一个小小的解决方案。

因此，我想就以下问题征求意见：

*   SoapServer类是打开 PHP 应用程序以便另一个平台（Windows Phone）可以使用它的类/函数的事实上的技术[吗](http://php.net/manual/en/class.soapserver.php)*？*或者还有其他我应该考虑“打开”我的应用程序的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:36:10.500

您可以做几件事，但最常用的是您提到的两个：SOAP 和 REST。没有事实上的标准。需要明确的是，因为我们在这里讨论 API，所以在使用 PHP 的事实之间没有真正的区别（如果它是面向对象的则更少），除了处理您选择的方法服务器端的难易程度。

我自己不是 SOAP 的忠实拥护者，尤其是 PHP。支持不是很好，但我在这方面的经验主要是使用 SOAP，而不是服务它。如果您不能自动导入它们，那么您从 .wsdl 读取内容所获得的大部分优势都将消失 // 自动创建您的类，并且默认的 SOAP 实现有点过于喜欢在某些情况下只说“分段错误”案例。

话虽如此，您的 2 个选择大致分为

*   SOAP：更严格，更多的是企业设置，更多的定义，因此可能对标准有更多的控制/强制。另一方面，使用客户端可能会很复杂
*   REST：更敏捷，API 用户更容易理解。另一方面，它确实倾向于创建不太一致的 API，但这不是给定的：您可以在定义中非常精确并且没有这个问题。

我个人会在这种环境下选择 REST 系统。当然，如果您不喜欢 JSON，您可以让您的 REST 环境同样服务于 XML。

# c# - 覆盖 groupprincipal.members.add

> ID：14154406
> 
> 赞同：0
> 
> 时间：2013-01-04T09:28:18.987
> 
> 标签：c#, directoryservices, account-management

任何人都知道是否可以覆盖或扩展`System.DirectoryServices.AccountManagement.GroupPrincipal`对象上的 Members.Add 方法？

我想做这样的事情

```
public new void Add(Principal principal)
{
    base.Add(principal);
    LogFile.WriteLine("Added {0} to group", principal.Name);   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T21:44:56.680

这很棘手，因为您不是试图覆盖 上的方法`GroupPrincipal`，而是覆盖 内部的子对象`GroupPrincipal`，即`PrincipalCollection`代表成员的对象。

做你想做的事情的唯一方法是将 Add 方法作为一个普通方法放在你的子对象上，比如：

```
public class EnhancedGroupPrincipal : Group Principal {    
    public void Add(Principal principal) {
        //your code to add and log
    }    
} 
```

虽然您必须知道使用替代`Add`方法，但大概您会知道，所以没关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-05T16:38:18.867

我能想到的最简单的方法是使用扩展方法

```
public static void Add(this GroupPrincipal group, Principal child)
{
     group.Members.Add(child);
     LogFile.WriteLine("Added {0} to group", child.Name);
     //Do whatever else you have to do...
} 
```

# c# - 如何在 Windows 应用程序中实现通知机制？

> ID：14154410
> 
> 赞同：4
> 
> 时间：2013-01-04T09:28:26.880
> 
> 标签：c#, api, windows-services, windows-applications

我有一个用 c# 编写的 windows/WPF 应用程序。此应用程序连接到托管在我们的公共服务器中的远程数据库。该应用程序将安装到所有系统。用户可以通过此应用程序将值添加到数据库中。当有人向数据库添加任何值时，我需要一种通知机制来向所有已安装的 Windows 应用程序发送通知。

请建议我实施此方案的最佳方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:16:10.317

您可以使用 SQL Server 的查询通知功能，该功能允许在数据更改时通知应用程序。

请参阅以下链接。

[http://support.microsoft.com/kb/555893?wa=wsignin1.0](http://support.microsoft.com/kb/555893?wa=wsignin1.0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:58:41.903

使架构具有通用性和接口驱动，因此您可以换出底层传输。

```
public interface INotificationService
{
    event EventHandler NewNotification;
    void SendEvent(string eventDetails);
} 
```

作为一个非常简单的例子。

实施，你有几个（一百个）选项。您提到事件正在被放入数据库中。如果您确保有一个唯一的、递增的整数键，您可以从每个客户端轮询数据库中的任何事件 > 最后一个事件 ID。每 10 秒执行一次，或者以您可以逃脱的速度执行一次。这对性能的影响很小，效率也不高，但非常简单可靠，并且您已经可以访问数据库，因为您将事件放在那里。

或者，您可以创建 Web 服务或 WCF 服务。Web 服务通常需要轮询，WCF 服务可以配置双工通信，因此您不需要轮询。

其他选项包括 MSMQ，或其他消息传递解决方案之一，RabbitMQ、Tibco 等等。这一切都取决于细节。

这里重要的是确保您拥有初始接口和代码，这样，如果您的数据库轮询变得太慢并且您需要升级到 Tibco，这是一个非常本地化的简单更改。

# shell - 访问相同的函数名但在不同的文件中

> ID：14154414
> 
> 赞同：0
> 
> 时间：2013-01-04T09:28:49.373
> 
> 标签：shell

我正在研究 Shell 脚本。我想在不同的文件中使用相同的函数名。

IE

**A_sh 包含：-**

```
 showPid()
  {
      echo "File A_sh"
  } 
```

**B_sh 包含：-**

```
 showPid()
  {
      echo "File A_sh"
  } 
```

**C_sh 包含：-**

```
 . A_Sh # Source File
  . B_sh # Source File 
```

现在从 C_sh 我想使用`showPid`A_sh 和 B_sh，我该怎么做？

我们有命名空间的概念还是我可以做类似的事情`A_sh::showPid`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:44:19.190

不，这是不可能的。当您`B.sh`在 之后进行采购时`A.sh`，B 的函数将替换 A 的函数，因为它们具有相同的名称。为了解决这个问题，您将不得不重命名您的函数。或者，您可以在调用函数之前获取适当的文件，但我不建议这样做。

# arrays - 将整个文件读入数组

> ID：14154416
> 
> 赞同：-4
> 
> 时间：2013-01-04T09:28:53.533
> 
> 标签：arrays, awk

我有一个5000行的文本文件，每五行可以分组。在该组的五行中，我想替换每组第二行第 12 列中的字符串。为此，我需要将整个文件读入 awk 中的数组，但我做不到。请任何人都可以帮助我。

```
abc acd ade aef afg agh ahi aij ajk akl alm amn ano apq ars atu auv awx ayz
**abc acd ade aef afg agh ahi aij ajk akl alm *amn* ano apq ars atu auv awx ayz**
abc acd ade aef afg agh ahi aij ajk akl alm amn ano apq ars atu auv awx ayz
abc acd ade aef afg agh ahi aij ajk akl alm amn ano apq ars atu auv awx ayz
abc acd ade aef afg agh ahi aij ajk akl alm amn ano apq ars atu auv awx ayz
bcd bef bfg bhi bjk blm bno bpq brs btu bvw bxy bza bab bbc bdc bde bfg bhj
**bcd bef bfg bhi bjk blm bno bpq brs btu bvw *bxy* bza bab bbc bdc bde bfg bhj**
bcd bef bfg bhi bjk blm bno bpq brs btu bvw bxy bza bab bbc bdc bde bfg bhj
bcd bef bfg bhi bjk blm bno bpq brs btu bvw bxy bza bab bbc bdc bde bfg bhj
bcd bef bfg bhi bjk blm bno bpq brs btu bvw bxy bza bab bbc bdc bde bfg bhj
.....
.....
.....

BEGIN {
    FS="\t"
}

NR==FNR {
    a[FNR]=$0
    next
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:01:40.623

这是你想要完成的吗？

```
#!/usr/bin/awk -f

BEGIN{
    FS="\t"
}

{
  if( NR % 5 == 2 ){ # 2nd line in each group
     for( i = 1 ; i <= NF ; i ++ ){ 
        # replace 12th column by a string, 
        # simply print everything else
        if( i == 12 ){
           printf "replacement" FS
        } else {
           printf $i FS
        }
        printf "\n"
     }
  } else {  # simply print all other lines in each group
     print
  }
} 
```

我相信这比将整个文件读入一个数组要好，这并不是你在 awk 中做这些事情的方式。

但是，如果您出于某种原因确实希望将整个文件读入数组，这将是一个解决方案：

```
#!/usr/bin/awk -f

BEGIN{
    FS="\t"
}

{
    for( i = 1 ; i <= NF ; i ++ ){
        a[NR,i] = $i
    }
}

END{
    for( i = 2 ; i <= NR ; i = i+5 ){
        a[i,12] = "replacement"
    }
    for( i = 1 ; i <= NR ; i++ ){
        j=1
        while( a[i,j] ){
            printf a[i,j] FS
            j ++
        }
        printf "\n"
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T11:14:08.603

你可以分配给`$12`来改变它。

```
awk 'BEGIN { FS=OFS="\t" }'
  NR % 5 == 2 { $12 = "ick" }1' inputfile >outputfile 
```

感谢@EdMorton 的`BEGIN`块修复。

# php - 不在对象上下文中使用 $this - 在 Laravel 控制器中

> ID：14154418
> 
> 赞同：0
> 
> 时间：2013-01-04T09:28:59.867
> 
> 标签：php, object, controller, laravel, unhandled-exception

我正在使用 Laravel，我刚刚将在本地工作的代码移到 Live 中，并且在我的“用户”控制器中出现以下异常：

```
Unhandled Exception
Message:
Using $this when not in object context 
```

奇怪的是，这是一个类并且在本地工作得很好，所以我不希望解决方案使用静态符号。只有当我将其推广到 Live 时，我才会收到此错误。会不会是 Laravel 核心中的某些东西在 Live 中没有正确加载控制器类？

有没有人在将他们的代码推广到 Live 后经历过这种情况？有任何想法吗？

更新：发生错误的代码片段。请记住此代码在本地工作，因此我认为缺少某些内容，而不是需要更改此代码以解决此问题。

```
class User_Controller extends Base_Controller {

...

public function action_register() {
   ...
    if ($user) {
        //Create the Contact
        DB::transaction(function() use ($user_id) {
            $org = $this->create_org($user_id); //failing on this line with exception. btw $user is created fine
            $this->create_contact($org->id);
            $this->create_address($org->id);
    });

    private function create_org($user_id) {
        $result = Org_type::where('name','=',$_POST['org_type'])->first();

        $org = Org::Create(
            array(
                'name' => $_POST['org_name'],
                'user_id' => $user_id,
                'org_type_id' => $result->id,
            )
        );
        return $org;
    } 
```

...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T09:54:30.410

问题似乎是`$this`您在提供给`DB::transaction`函数的闭包内使用，我不确定为什么它会在本地~~实时~~工作，但您必须将控制器的实例导入函数才能使用它.

为了避免混淆，最好的方法是给它起别名，并可能通过引用传递它，这样你就不会复制它，比如：

```
$this_var = $this;
DB::transaction(function() use ($user_id, &$this_var as $controller) {
        $org = $this->create_org($user_id); //failing on this line with exception. btw $user is created fine
        $controller->create_contact($org->id);
        $controller->create_address($org->id);
}); 
```

我不完全确定语法是否完美，但逻辑是合理的。

# ember.js - ember.js 上下文感知车把助手

> ID：14154420
> 
> 赞同：3
> 
> 时间：2013-01-04T09:29:03.040
> 
> 标签：ember.js

我有这样的代码，我将重复很多次：

```
<div>
  {{#if sender.isContact}}
  <a {{action showContact sender href=true}}>{{unbound sender.displayName}}</a>
  {{else}}
    <a {{action showUser sender href=true}}>{{unbound sender.displayName}}</a>
  {{/if}}
</div> 
```

唯一改变的是将被调用的动作。

我将如何创建一个车把辅助方法来干燥它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:26:29.503

[Ember.js 指南的模板部分](http://emberjs.com/guides/templates/writing-helpers/)很好地描述了自定义助手的创建。

您还可以查看[代码中](https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/helpers/action.js#L231-L263)`{{action}}`的助手如何合并您自己的助手所需的部分。

# xslt - 用于在列中划分项目的 xslt 模板

> ID：14154425
> 
> 赞同：1
> 
> 时间：2013-01-04T09:29:22.217
> 
> 标签：xslt, xslt-1.0

我在按列划分元素时遇到问题。我有一个锚点列表，我必须在列中显示，列数是可配置的

说我们有以下

```
<links>
<link>one</link>
<link>two</link>
<link>three</link>
<link>four</link>
<link>five</link>
<link>six</link>
<link>seven</link>
<link>eight</link>
<link>nine</link>
<link>ten</link>
<link>eleven</link>
<link>twelve</link>
<link>thirteen</link>
</links> 
```

要求是在有序列表中显示这些链接，如果列数为 3，结果应如下所示

1.  一 6\. 六 10\. 十
2.  二七七十一十一
3.  三 8\. 八 12\. 十二
4.  四 9\. 九 13\. 十三
5.  五

如果列数为 4

1.  一 5\. 五 8\. 八 11\. 十一
2.  二六六九九十二十二
3.  三 7\. 七 10\. 十 13\. 十三
4.  四

我有一个需要循环的逻辑，但想要更系统的解决方案。只能使用 xslt 1.0。

我的解决方案的逻辑是

如果我必须分成 3 列然后

Mod= totalItem Mod Total_No_Columns;
商=楼（totalItem div Total_No_Columns）；
for(i=1 到 3)
{

使用参数调用模板 GenerateOL (i, Mod, total items, quotient)
}

模板代码
GenerateOL
{

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:09:01.110

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:param name="pNumCols" select="3"/>
 <xsl:variable name="vCount" select="count(/*/*)"/>
 <xsl:variable name="vRemainder"
      select="$vCount mod $pNumCols"/>
 <xsl:variable name="vPerCol" select="floor($vCount div $pNumCols)"/>

 <xsl:template match="/*">
     <table border="1">
      <xsl:apply-templates select="*[not(position() > ceiling($vCount div $pNumCols))]"/>
     </table>
 </xsl:template>

 <xsl:template match="link">
  <xsl:variable name="vCurrentItem" select="."/>
  <xsl:variable name="vRow" select="position()"/>
  <tr>
    <xsl:for-each select=
     "(//node()|//namespace::*)[not(position() > $pNumCols)]">

     <xsl:variable name="vColNo" select="position()"/>
       <xsl:apply-templates mode="inGroup" select=
        "$vCurrentItem/../*
             [position() = ($vColNo -1)*$vPerCol+ $vRemainder
             - ($vRemainder - $vColNo +1)*not($vColNo > $vRemainder)+ $vRow
             ]
             [not($vRow > $vPerCol and $vColNo > $vRemainder)]"/>
    </xsl:for-each>
  </tr>
 </xsl:template>

 <xsl:template match="link" mode="inGroup">
  <td><xsl:number count="link"/>. <xsl:copy-of select="text()"/></td>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<links>
    <link>one</link>
    <link>two</link>
    <link>three</link>
    <link>four</link>
    <link>five</link>
    <link>six</link>
    <link>seven</link>
    <link>eight</link>
    <link>nine</link>
    <link>ten</link>
    <link>eleven</link>
    <link>twelve</link>
    <link>thirteen</link>
</links> 
```

**产生想要的正确结果：**

```
<table border="1">
   <tr>
      <td>1\. one</td>
      <td>6\. six</td>
      <td>10\. ten</td>
   </tr>
   <tr>
      <td>2\. two</td>
      <td>7\. seven</td>
      <td>11\. eleven</td>
   </tr>
   <tr>
      <td>3\. three</td>
      <td>8\. eight</td>
      <td>12\. twelve</td>
   </tr>
   <tr>
      <td>4\. four</td>
      <td>9\. nine</td>
      <td>13\. thirteen</td>
   </tr>
   <tr>
      <td>5\. five</td>
   </tr>
</table> 
```

**如果我们指定`$pNumCols`为 4，则转换再次产生正确的结果：**

```
<table border="1">
   <tr>
      <td>1\. one</td>
      <td>5\. five</td>
      <td>8\. eight</td>
      <td>11\. eleven</td>
   </tr>
   <tr>
      <td>2\. two</td>
      <td>6\. six</td>
      <td>9\. nine</td>
      <td>12\. twelve</td>
   </tr>
   <tr>
      <td>3\. three</td>
      <td>7\. seven</td>
      <td>10\. ten</td>
      <td>13\. thirteen</td>
   </tr>
   <tr>
      <td>4\. four</td>
   </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:06:55.923

试试这个逻辑

如果您有 10 个链接并且必须在 3 列中显示它们，则首先将它们除以 10 除以 3 = 3.33 取结果的上限，即 4 所以取 a=4 现在在每个项目上尝试仅在其位置时生成 OL () 模 4 = 1。

# wcf - 从不同的应用程序访问教科书属性

> ID：14154427
> 
> 赞同：1
> 
> 时间：2013-01-04T09:29:25.400
> 
> 标签：wcf, remoting

我正处于编写自动化工具的早期阶段，该工具需要访问一个完全不同的应用程序中的文本框的属性。有没有办法可以使用 Windows Communication Foundation (WCF) 来完成此任务。理想情况下，我希望能够从此工具访问任何对象。

# c# - 将数据库中保存的值的类型识别为字符串

> ID：14154429
> 
> 赞同：-3
> 
> 时间：2013-01-04T09:29:32.950
> 
> 标签：c#

我有一个我无法解决的问题。

我从数据库中得到一个值。数据库中的该值保存为`nvarchar`.

我需要了解值的类型。

例如：

*   12.12.2012 -> 日期时间
*   15:00 -> 时间
*   67.45 -> 双倍

对于不了解的类型，我使用该`TryParse`方法。

了解它是否是 DateTime 的示例我执行此代码：

```
DateTime valueConverted;

if(DateTime.TryParse(input.ToString(), out valueConverted))
{
   // IS DATETIME
} 
```

问题是，如果从数据库中得到的值是：

*   0900
*   009000

我希望将其识别为字符串。问题是转换为双精度值成功，然后将值转换为值 = 900 的双精度值。

我怎样才能认识到像 0900, 00060 这样的值不是 double 但是`String`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:34:17.593

最简单的可能是匹配`^0[0-9]+$`.

意识到这是一个不平凡的问题，你一定会发现你没有预料到的边缘情况。如果您有能力，我建议您更改数据模型，或者将不同的类型存储在不同的列中，或者有一个单独的列来表示存储的数据类型。将所有内容存储为字符串通常是一个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:10:40.853

```
if (input.StartsWith("0"))
{
    // string
}
else
{
    // double
    var number = double.Parse(input);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T09:36:53.273

This seems massively oversimplified, but based on your description it will do the trick:

```
if (!string.IsNullOrEmpty(input) &&
    input[0] == '0' &&
    input.All(c => char.IsDigit(c)))
{
    // We have a string.
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T10:54:59.860

你可以使用正则表达式匹配

创建所有类型的数据类型格式字符串并与正则表达式匹配。

[http://www.dotnetperls.com/regex-match](http://www.dotnetperls.com/regex-match)

# java - 扩展参数类/接口的java基类

> ID：14154436
> 
> 赞同：0
> 
> 时间：2013-01-04T09:30:14.927
> 
> 标签：java, multiple-inheritance

我有一些基类`Entity`。我想允许用户`Entity`创建`Entity`扩展某些给定超类 T 的实例（好像`Entity`s 声明是`Class Entity extends T`）。我不知道 T 实际上是什么，所以我想`Entity`在这方面是模块化的。如果那不可能，我也可以`Entity`实现给定的接口 T 。

喜欢`public class Entity<T> extends T`和`public class Entity<T> implements T`不工作的事情。（“不能将类型参数 T 称为超类型”）。

所以我的问题是：

1）这完全有可能在java中实现吗？其他语言？

2）如果是这样，怎么办？

3）通常当java设置这样的障碍时，这意味着我的设计有问题，那么你将如何创建这个功能（我想我正在寻找的基本上是来自Entity和T的多重继承，可以这样做吗？） .

编辑：澄清 - 我想实现[mixin](http://csis.pace.edu/~bergin/patterns/multipleinheritance.html)类型的行为，同时尽可能少地要求调用者（创建 T 的子类，它将调用委托给 Entity 实例将需要调用者太多）。没有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:45:35.550

Java 不支持多重继承；给定的类不能是多个类的直接子*类*。

但是，如果`Entity`是*interface*，您可以使用*intersection bound*来实现。

例如，要编写一个方法，该方法接受一个实例，该实例是 的子类（不一定是直接子类）`SomeClass`并实现`Entity`：

```
public <T extends Entity & SomeClass> void doSomething(T t) {
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:32:12.767

```
template <class A>
class B : public A
{ 
```

至少在 C++ 中是可能的。

我在自己的工作中使用过一次，将行为添加到两个非常密切相关的类（一个继承自另一个）。直到很久以后，我才意识到[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)可能也有效。或许你也可以考虑一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T09:37:18.280

不，这不是它在 Java 中的工作方式。您可能需要考虑组合而不是继承。

我有点在字里行间阅读，但是这些实体在游戏引擎中吗？一个组件系统会很好地工作......

[http://gameprogrammingpatterns.com/component.html](http://gameprogrammingpatterns.com/component.html)

这是一个简单的例子......

```
class Entity {
    List<Component> components;

    void update() {
        for(Component component: components) {
            component.update(this);
        }
    }
}

interface Component {
    void update(Entity parent);
}

class MovementComponent implements Component ...
class AnimationComponent ...
class BehaviourComponent ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T09:48:10.633

您问题的关键是当您说要“创建扩展某些给定超类 T 的实体实例”时。对象（类的实例）从不扩展类。只有类扩展其他类。

您可能想要的是使用接口。让 Entity 成为一个接口并创建实现 Entity 的类，然后实例化这些类。

# jquery - 替换 cheditor 中的文本

> ID：14154445
> 
> 赞同：0
> 
> 时间：2013-01-04T09:30:34.147
> 
> 标签：jquery

我有一个具有以下内容的 CKEditor：

```
<textarea id="messageText" name="messageText" rows="10">
<div id="footer">
<br />
<br />
Regads<br />
-----------<br />
admin
</div>
</textarea> 
```

我必须用 jquery 替换页脚 div 中的内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:33:43.250

这应该可以解决问题：

```
$("#footer").html(newcontentgoeshere); 
```

让我知道它是否有效。

# php - Magento 试图不必要地自动加载类

> ID：14154449
> 
> 赞同：0
> 
> 时间：2013-01-04T09:30:40.923
> 
> 标签：php, magento, autoload

我正在使用第 3 方 php 库连接到 Microsoft Dynamics CRM，该库已放置在 Magento 的 /lib 文件夹中。

我创建了一个用于测试目的的控制器，其中包含了 lib 文件夹中的文件（正在包含这些文件，因为更改路径会引发错误），但是当我尝试启动其中一个定义的类时包含文件，我收到此警告：

```
Warning: include(DynamicsCRM2011\Connector.php) [function.include]: failed to open stream: No such file or directory. 
```

它不应该尝试包含任何内容，该类已在先前包含的文件中定义！

有什么想法可以防止这种情况发生吗？我原以为它只会在类确实未定义的情况下尝试自动加载文件？

# rest - ServiceStack：IService 和 IRESTService

> ID：14154452
> 
> 赞同：2
> 
> 时间：2013-01-04T09:30:57.367
> 
> 标签：rest, servicestack

我在使用 ServiceStack 框架实现 Rest Web 服务方面取得了一些不错的成果，但我注意到示例中的一些内容我想要更多信息。

1.  我目前已经创建了一个基于`IService`接口的服务。与使用有什么区别`IRestServiceBase`？我什么时候应该使用其中一个（我的 Web 服务有路由，所以它已经是 REST 了）？

2.  这两种语法有什么区别？

    ```
    MyEvent : RestServiceBase <Event>
    public override object OnGet(...) 
    ```

    和

    ```
    MyEvent : IService
    public object Get(...) 
    ```

    我使用的`IService`是第二个版本，第一个版本比另一个更“REST”吗？我测试了两者并得到了相同的结果。

3.  我没有使用属性`[DataMember]`或`[DataContract]`它在 WCF 上完成的方式，在什么情况下我必须使用它？（说实话，我真的可以通过添加这些无用的信息）。

4.  在电影样本中，什么是`Interfaces : IRestGetService`？当我的班级已经有了他们的目的是什么`IService`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T18:33:00.997

较新的[样式 api](https://github.com/ServiceStack/ServiceStack/wiki/New-API)使用`Service`基类。您的服务将像使用 RestServiceBase 时一样运行，但新的 api 具有文档中描述的许多附加好处。

[支持 SOAP 端点](https://github.com/ServiceStack/ServiceStack/wiki/SOAP-support)时使用`[DataMember]`和`[DataContract]`属性。

`IRestGetService`被[标记为已过时](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/ServiceHost/IRestGetService.cs)，您应该移至新样式 api。在新的 api 中，诸如和之类的[接口](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/ServiceHost/IService.cs)可用于强制执行正确的方法签名，但不是必需的。`IGet``IPost`

# python - numpy.concatenate multidimensional arrays

> ID：14154456
> 
> 赞同：4
> 
> 时间：2013-01-04T09:31:20.597
> 
> 标签：python, arrays, multidimensional-array, numpy

I'm searching for an algorithm to merge a given number of multidimensional arrays (each of the same shape) to a given proportion (x,y,z).

For example 4 arrays with the shape (128,128,128) and the proportion (1,1,4) to an array of the shape (128,128,512). Or 2 arrays with the shape (64,64,64) and the proportion (1,2,1) to an array of the shape (64,128,64)

I know how to do it manually with `np.concatenate`, but I need a general algorithm to do this. (`np.reshape` doesn't work - this will mess up the order)

edit: It's possible that the proportion is (1,2,3), then it is necessary to compare the left_edge of the box, to know where to place it. every array have a corresponding block with the attribute left_edge (xmin, ymin, zmin). Can I solve this with a if-condition?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:34:58.503

If your proportion is always one-dimensional (i.e. concatenate in one dimension only), you can use this:

```
arrays = [...]
proportion = (1,1,4)

np.concatenate(arrays, axis=next(i for i,p in enumerate(proportion) if p>1)) 
```

Otherwise you have to explain what to do with `proportion = (1,2,3)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:32:00.553

好的，我以这种方式对其进行了编程，并且似乎可以正常工作。也许不是最好的方式，但它做我想要的。

```
blocks.sort(key=lambda x: (x.left_edge[2],x.left_edge[1],x.left_edge[0]))
proportion = (Nx * nblockx, Ny * nblocky, Nz * nblockz)

arrays = np.zeros((nblockx, nblocky, nblockz, Nx, Ny, Nz))

for block, (x,y,z) in zip(root_list,
                          product(range(nblockx),
                                  range(nblocky),
                                  range(nblockz))):
    array = np.zeros((Nx, Ny, Nz), dtype = np.float64)

    # this is only the function to fill the array
    writearray(array, ...)

    arrays[x,y,z] = array

shape = arrays.shape
array = np.zeros((shape[0]*shape[3], shape[1]*shape[4], shape[2]*shape[5]))
for x,y,z in product(range(shape[0]), range(shape[1]), range(shape[2])):
    slicex = slice(x*shape[3], (x+1)*shape[3])
    slicey = slice(y*shape[4], (y+1)*shape[4])
    slicez = slice(z*shape[5], (z+1)*shape[5])

    array[slicex, slicey, slicez] = arrays[x,y,z]

return array 
```

# html - 文本阴影在 ie css 中无法正确显示

> ID：14154461
> 
> 赞同：0
> 
> 时间：2013-01-04T09:31:31.480
> 
> 标签：html, css

我使用以下 css 为我的标题应用了文本阴影。

```
h1, h2, h3, h4, h5, h6, p, span {

    text-shadow: 1px 1px 1px #999 !important; 

filter: progid:DXImageTransform.Microsoft.dropShadow(color=#999999,offX=1,offY=1);
}

h1{

 filter: Shadow(Color=#cccccc, Direction=130, Strength=1);} 
```

html:

`<h1>Contact Us</h1>`

它在 Firefox 中看起来不错，但在 ie 8 和 ie 9 中看起来很奇怪。请参考下图。

火狐：

![在此处输入图像描述](../Images/d5d11bf76fca9f03888496bcc730f93b.png)

即 8：

![在此处输入图像描述](../Images/6c7aedd53d9f9d570b4a2590d24d521d.png)

如何解决这个问题？

![在此处输入图像描述](../Images/bb2c9a6116ed644a215438c0655ba77c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:37:53.947

用这个：

```
h1, h2, h3, h4, h5, h6, p, span {
    text-shadow: 1px 1px 1px #999 !important; 
    filter: progid:DXImageTransform.Microsoft.dropShadow(color=#999999,offX=1,offY=1);
    background-color:#FFFFFF;
}

h1{
     filter: Shadow(Color=#cccccc, Direction=130, Strength=1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:41:29.373

添加另一个答案。感谢这篇文章[http://www.useragentman.com/blog/2011/04/14/css3-text-shadow-can-it-be-done-in-ie-without-javascript/](http://www.useragentman.com/blog/2011/04/14/css3-text-shadow-can-it-be-done-in-ie-without-javascript/)

HTML：

```
<h1>
<span>Contact Us</span>
</h1> 
```

CSS：

```
h1, h2, h3, h4, h5, h6, p, span {
    text-shadow: 1px 1px 1px #999 !important; 
    filter: progid:DXImageTransform.Microsoft.dropShadow(color=#999999,offX=1,offY=1);
    background-color:#FFFFFF;
}

h1{
    zoom: 1;
    background-color: white;
    filter: progid:DXImageTransform.Microsoft.Chroma(Color=white)
        progid:DXImageTransform.Microsoft.DropShadow(OffX=1, OffY=1, Color=#eeeeee);
    font-size:20px;
} 
```

[JSFIDDLE](http://jsfiddle.net/DZ9rs/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T09:35:38.030

Try this filter and change the strength and direction as needed.

```
filter: progid:DXImageTransform.Microsoft.Shadow(Strength=5, Direction=60, Color='#999999'); 
```

# android - 使用 android (Titanium) 的 web 服务以 json 格式发送参数和响应？

> ID：14154466
> 
> 赞同：1
> 
> 时间：2013-01-04T09:31:41.463
> 
> 标签：android, json, web-services, titanium, appcelerator

任何使用安卓网络服务的方式，我们可以通过它向服务器发送参数并接收 json 格式的响应？我已经测试了适用于 iPhone 的 nusoap，它工作正常，但不适用于 android。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:40:34.803

如果您想在 Android Titanium 中使用 Web 服务，您应该看看以下内容，

[我们如何在 appcelerator Titan 中使用 Web 服务](https://stackoverflow.com/questions/5777663/how-we-can-use-web-service-in-to-appcelerator-titanium)

# javascript - 当我失去对输入元素的关注时如何检查我的鼠标是什么元素

> ID：14154468
> 
> 赞同：0
> 
> 时间：2013-01-04T09:31:48.047
> 
> 标签：javascript, jquery

假设我有这个：

```
<body>
<input type="text" onblur="myFunction()" />

<... rest of page ...>

</body>

<script type="text/javascript">

    function myFunction()
    {
        //this function alerts over what element your mouse is when the input loses focus
    }
</script> 
```

有人知道如何实现吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T09:37:39.610

如果将鼠标悬停在上面，您可以跟踪鼠标的哪个元素，如下所示：

```
<input type="text" id="myInput" onblur="myFunction()" /> 
```

```
var input = document.getElementById('myInput'), // Get the input element
    focus;

input.onmouseover = input.onfocus = function(){focus = true;}; // Set focus to true if the input gains focus
input.onmouseout = input.onblur = function(){focus = false}; // Set focus to false if the input loses focus

document.body.onmousemove = function(e){
    if(!focus){ // Only log the target is the input doesn't have focus
        console.log(e.target); //Log the current element the mouse is hovering over.
    }
}; 
```

据我所知，没有准确的方法来检查鼠标在`"mouseleave"`or`"blur"`事件上的当前目标，因为`event.target`这些函数将指向鼠标刚刚离开的元素，而不是鼠标当前悬停的元素。

**编辑：**
我添加了一些代码，所以它只在输入没有焦点时记录。

# multithreading - Javafx 在运行任务之前和之后更改文本

> ID：14154474
> 
> 赞同：1
> 
> 时间：2013-01-04T09:32:15.773
> 
> 标签：multithreading, label, task, javafx-2

我想在运行任务之前和之后更新状态栏标签的一些文本。这是示例代码：

```
 label.setText("please wait...");

    Task<Void> task = new Task<Void>() {
        @Override
        protected Void call() throws Exception {
            veryLongOperation();
            return null;
        }
    };

    Thread thread = new Thread(task);
    thread.start();

    while (thread.isAlive()) {
        System.out.println("waiting...");
        Thread.currentThread().sleep(10);
    }

    System.out.println("work done!");
    label.setText("work done!"); 
```

在此示例中，标签的文本值无法更改...如何更新文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:54:32.463

您是否尝试过像这样覆盖[该`Task#suceeded`方法](http://docs.oracle.com/javafx/2/api/javafx/concurrent/Task.html#succeeded%28%29)：

```
Task<Void> task = new Task<Void>() {
    @Override
    protected Void call() throws Exception {
        veryLongOperation();
        return null;
    }

    @Override
    protected void succeeded() {
        System.out.println("work done!");
        label.setText("work done!");
    }
};

new Thread(task).start(); 
```

# android - 如何从android中的资产文件夹中读取文件？

> ID：14154476
> 
> 赞同：0
> 
> 时间：2013-01-04T09:32:19.340
> 
> 标签：android

成功地我编写了程序来读取资产文件夹中的单个文件并将其分配给文本视图。现在我想读取所有文件并将其分配给文本视图，你们中的任何人都可以帮我怎么做吗？所有文件都是文本文件，提前感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:04:49.400

****在Android中，我们无法从资产文件夹中读取文件，您必须将文件从资产复制到sdcard而不是执行读取**

***编辑：这个说法是错误的。看评论。***

使用以下代码从资产文件夹执行复制

```
private void copyAssets() {
    AssetManager assetManager = getAssets();
    String[] files = null;
    try {
        files = assetManager.list("");
    } catch (IOException e) {
        Log.e("tag", "Failed to get asset file list.", e);
    }
    for(String filename : files) {
        InputStream in = null;
        OutputStream out = null;
        try {
          in = assetManager.open(filename);
          out = new FileOutputStream("/sdcard/" + filename);
          copyFile(in, out);
          in.close();
          in = null;
          out.flush();
          out.close();
          out = null;
        } catch(IOException e) {
            Log.e("tag", "Failed to copy asset file: " + filename, e);
        }       
    }
}
private void copyFile(InputStream in, OutputStream out) throws IOException {
    byte[] buffer = new byte[1024];
    int read;
    while((read = in.read(buffer)) != -1){
      out.write(buffer, 0, read);
    }
} 
```

# javascript - Javascript Try Catch 进行本地存储检测

> ID：14154478
> 
> 赞同：4
> 
> 时间：2013-01-04T09:32:34.137
> 
> 标签：javascript, try-catch

我正在研究[关于 localstorage 的 Dive Into HTML 5 Tutorial](http://diveintohtml5.info/detect.html#storage)，并遇到了这段代码：

```
function supports_html5_storage() {
  try {
return 'localStorage' in window && window['localStorage'] !== null;
  } catch (e) {
return false;
  }
} 
```

我了解关于`return 'localStorage' in window`等的部分，但我不明白为什么这里需要 try catch 语句？简单地写下以下内容还不够吗？

```
function supports_html5_storage(){
return 'localStorage' in window && window['localStorage']!==null;
} 
```

顺便说一句：我确实（有点）知道 try/catch 的目的，我只是想知道我们可能期待什么样的异常？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T09:36:03.740

> If your browser supports HTML5 storage, there will be a localStorage property on the global window object. If your browser doesn’t support HTML5 storage, the localStorage property will be undefined. Due to an unfortunate bug in older versions of Firefox, this test will raise an exception if cookies are disabled, so the entire test is wrapped in a try..catch statement.

Above text copied from: [http://diveintohtml5.info/detect.html#storage](http://diveintohtml5.info/detect.html#storage)

# php - 视频和音频嵌入文件不会流式传输，但可以下载。（图片也可以）

> ID：14154483
> 
> 赞同：0
> 
> 时间：2013-01-04T09:32:50.810
> 
> 标签：php

我在远程服务器上上传了示例文件，三种类型的文件：图像、视频、音频。

我通过`cURL`我的本地页面访问它们并强制下载。

一个问题是图像`<img src="?image" />`可以工作，但嵌入的音频和视频文件却不行。我使用嵌入代码进行测试，这样的嵌入框架就足够了。

这是我的 php 文件**test.php**

```
<?php
function download($url)
{
    set_time_limit(0);
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    $r = curl_exec($ch);
    curl_close($ch);
    header('Expires: 0'); // no cache
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Last-Modified: ' . gmdate('D, d M Y H:i:s', time()) . ' GMT');
    header('Cache-Control: private', false);
    header('Content-Type: application/force-download');
    header('Content-Disposition: attachment; filename="' . basename($url) . '"');
    header('Content-Transfer-Encoding: binary');
    header('Content-Length: ' . strlen($r)); // provide file size
    header('Connection: close');
    echo $r;
    exit;
}

if (isset($_GET['image']))
{
    $file = 'https://googledrive.com/host/0B_3oJnpnNoF9UjlkVUwtWE5CY0U/city.jpg';
    download($file);
}

if (isset($_GET['music']))
{
    $file = 'https://googledrive.com/host/0B_3oJnpnNoF9UjlkVUwtWE5CY0U/horse.mp3';
    download($file);
}

if (isset($_GET['video']))
{
    $file = 'https://googledrive.com/host/0B_3oJnpnNoF9UjlkVUwtWE5CY0U/mov_bbb.mp4';
    download($file);
}

?>

<img src="http://localhost/test.php?image" />

<br />

<audio controls height="100" width="100">
    <source src="http://localhost/test.php?music" type="audio/mpeg">
    <embed height="50" width="100" src="http://localhost/test.php?music">
</audio> 

<br />

<video width="320" height="240" controls>
   <source src="http://localhost/test.php?video" type="video/mp4">
   <object data="http://localhost/test.php?video" width="320" height="240">
   </object> 
</video> 
```

如果我转到链接`http://localhost/test.php?music`或`http://localhost/test.php?video`下载开始，那么我的意思是这些是工作文件（链接没有关闭）。

我的问题是我无法以这种方式流式传输音频和视频文件，我需要对此代码进行一些修改。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:16:24.000

也许是因为您为文件设置了错误的标题？你强迫他们下载，而你想显示他们......

# grails - 使用内联插件时升级 Grails 2.1.3 -> 2.2.0 失败

> ID：14154486
> 
> 赞同：3
> 
> 时间：2013-01-04T09:33:08.243
> 
> 标签：grails, plugins, upgrade

我们有一个使用内联插件的应用程序。这是在 BuildConfig 中使用定义的。

```
grails.plugin.location."foo-shared" = "../../foo-shared/src" 
```

现在，当我们尝试将应用程序从 Grails 2.1.3 升级到 2.2.0 时，似乎在我们的主应用程序中找不到内联插件类。

有什么建议我缺少什么吗？

/马可

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T19:53:04.343

如果您将“grails.plugin.location”移到“grails.project.dependency.resolution”之外，它会起作用。

[吉拉票](http://jira.grails.org/browse/GRAILS-9735)

# java - 哈德逊与 Trac

> ID：14154488
> 
> 赞同：0
> 
> 时间：2013-01-04T09:33:18.237
> 
> 标签：java, trac, hudson-plugins

事件提供程序 HudsonTracPlugin 过滤器`"Hudson Builds": IOError: Error`从以下位置获取构建信息失败：

`'http://localhost:8080/hudson/rssAll/api/python?tree=jobs[builds[building,timestamp,duration,result,description,url,fullDisplayName]]': URLError: <urlopen error [Errno 10061] >`.

这很可能意味着您配置了错误的 job_url、用户名或密码。

```
 Event provider HudsonTracPlugin failed for filters "Hudson Builds": IOError: Error getting build info from 'http://localhost:8080/hudson/rssAll/api/python?tree=jobs[builds[building,timestamp,duration,result,description,url,fullDisplayName]]': returned document has unexpected type 'application/atom+xml' (expected 'text/x-python'). The returned text is: <?xml version="1.0" encoding="UTF-8"?> 

<feed xmlns="http://www.w3.org/2005/Atom">
    <title>All all builds</title>
    <link type="text/html" href="http://localhost:8080/hudson/" rel="alternate"/>
    <updated>2013-01-04T09:04:56Z</updated>
    <author>
    <name>Hudson Server</name>  
    </author>
    <id>urn:uuid:903deee0-7bfa-11db-9fe1-0800200c9a66</id>
    <entry>
        <title>tractest12github #9 (broken for a long time)</title>
        <link type="text/html" href="http://localhost:8080/hudson/job/tractest12github/9/" rel="alternate"/><id>tag:hudson.java.net,2013:tractest12github:2013-01-04_18-04-56</id>
        <published>2013-01-04T09:04:56Z</published>
        <updated>2013-01-04T09:04:56Z</updated>
    </entry>
    <entry>
        <title>tractest #6 (stable)</title>
        <link type="text/html" href="http://localhost:8080/hudson/job/tractest/6/" rel="alternate"/><id>tag:hudson.java.net,2013:tractest:2013-01-04_18-04-50</id>
        <published>2013-01-04T09:04:50Z</published>
        <updated>2013-01-04T09:04:50Z</updated>
    </entry>
    <entry>
        <title>tractest12github #8 (broken for a long time)</title>
        <link type="text/html" href="http://localhost:8080/hudson/job/tractest12github/8/" rel="alternate"/><id>tag:hudson.java.net,2013:tractest12github:2013-01-04_17-52-54</id>
        <published>2013-01-04T08:52:54Z</published>
        <updated>2013-01-04T08:52:54Z</updated>
    </entry>
    <entry>
        <title>tractest #5 (stable)</title>
        <link type="text/html" href="http://localhost:8080/hudson/job/tractest/5/" rel="alternate"/><id>tag:hudson.java.net,2013:tractest:2013-01-04_17-52-53</id>
        <published>2013-01-04T08:52:53Z</published>
        <updated>2013-01-04T08:52:53Z</updated>
    </entry>
    <entry>
        <title>tractest12github #7 (broken for a long time)</title>
        <link type="text/html" href="http://localhost:8080/hudson/job/tractest12github/7/" rel="alternate"/><id>tag:hudson.java.net,2013:tractest12github:2013-01-04_17-52-06</id>
        <published>2013-01-04T08:52:06Z</published>
        <updated>2013-01-04T08:52:06Z</updated>
    </entry>
    <entry>
        <title>tractest12github #6 (broken for a long time)</title>
        <link type="text/html" href="http://localhost:8080/hudson/job/tractest12github/6/" rel="alternate"/><id>tag:hudson.java.net,2013:tractest12github:2013-01-04_17-51-52</id>
        <published>2013-01-04T08:51:52Z</published>
        <updated>2013-01-04T08:51:52Z</updated>
    </entry>
    <entry>
        <title>tractest12github #5 (broken for a long time)</title>
        <link type="text/html" href="http://localhost:8080/hudson/job/tractest12github/5/" rel="alternate"/><id>tag:hudson.java.net,2013:tractest12github:2013-01-04_17-51-03</id>
        <published>2013-01-04T08:51:03Z</published>
        <updated>2013-01-04T08:51:03Z</updated>
    </entry>
    <entry>
        <title>tractest #4 (stable)</title>
        <link type="text/html" href="http://localhost:8080/hudson/job/tractest/4/" rel="alternate"/><id>tag:hudson.java.net,2013:tractest:2013-01-04_17-50-58</id>
        <published>2013-01-04T08:50:58Z</published>
        <updated>2013-01-04T08:50:58Z</updated>
    </entry>
    <entry>
        <title>tractest #3 (stable)</title>
        <link type="text/html" href="http://localhost:8080/hudson/job/tractest/3/" rel="alternate"/><id>tag:hudson.java.net,2013:tractest:2013-01-04_17-50-55</id>
        <published>2013-01-04T08:50:55Z</published>
        <updated>2013-01-04T08:50:55Z</updated>
    </entry>
    <entry>
        <title>tractest12github #4 (broken for a long time)</title>
        <link type="text/html" href="http://localhost:8080/hudson/job/tractest12github/4/" rel="alternate"/><id>tag:hudson.java.net,2013:tractest12github:2013-01-03_17-53-04</id>
        <published>2013-01-03T08:53:04Z</published>
        <updated>2013-01-03T08:53:04Z</updated>
    </entry>
    <entry>
        <title>tractest #2 (stable)</title>
        <link type="text/html" href="http://localhost:8080/hudson/job/tractest/2/" rel="alternate"/><id>tag:hudson.java.net,2013:tractest:2013-01-03_15-54-59</id>
        <published>2013-01-03T06:54:59Z</published>
        <updated>2013-01-03T06:54:59Z</updated>
    </entry>
    <entry>
        <title>tractest12github #3 (broken for a long time)</title>
        <link type="text/html" href="http://localhost:8080/hudson/job/tractest12github/3/" rel="alternate"/><id>tag:hudson.java.net,2013:tractest12github:2013-01-03_15-54-50</id>
        <published>2013-01-03T06:54:50Z</published>
        <updated>2013-01-03T06:54:50Z</updated>
    </entry>
    </feed>   

    Hudson3-3-0 
    Trac 1.0
    HudsonTrac-0.5-py2.7
    Window7 64 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T23:51:42.333

你的问题是什么？在我们为您提供帮助之前，您需要提供更多信息和一些背景信息。单独的错误消息不足以找出您的问题。问题发生时你在做什么？这在过去有效吗？最近有什么改变/升级吗？

根据我猜您的问题，您可能会发现此 trac-hacks 票证中的讨论很有用：[票证 #7340 - Authentication failed](http://trac-hacks.org/ticket/7340)。

此外，请仔细检查您的插件设置并验证您的所有参数是否设置正确（尤其是“ `job_url`”）。该错误看起来像是在获取 RSS 提要，而不是其他格式。您的 URL 中包含“ `/rssAll/`”，因此您获得的是 RSS 提要是有道理的。很有可能，你`job_url`错了。有关如何配置插件的详细信息，请参阅[HudsonTrac 官方文档。](http://trac-hacks.org/wiki/HudsonTracPlugin#Configuration)

# android - 任何方式在平板电脑上运行 Android 应用程序，就像在 IOS 中一样尽可能

> ID：14154489
> 
> 赞同：1
> 
> 时间：2013-01-04T09:33:38.197
> 
> 标签：android, ios, ios6

我想问一个对**Android 和 IOS**更重要的问题。

我们在`IOS`You Can Run `IOS App`(Created By `IOS Phone`only) 中看到该应用程序在平板电脑设备中运行并工作，`Iphone`如图所示。

![在此处输入图像描述](../Images/c4e5acb9e2b2cd88825e4d15cf95b97a.png)

有什么方法可以运行`Android`应用程序（`Android Phone`仅限创建者）该应用程序在平板电脑设备中运行和工作`Android Phone`如图所示。

这可能在`Android`！

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:39:10.127

Android 实际上比 iOS 更好地处理这个问题，它可以扩展应用程序。Play 商店中任何未被过滤的应用程序都可以在任何 Android 设备上运行。

在 iOS 中，您对 Android 上的 iPad/iPhone 有不同的视图，您可以使用不同的视图来`Fragments`获得相同的结果，请参阅[Designing for Handset and Tablet](http://developer.android.com/guide/practices/tablets-and-handsets.html)。

就个人而言，它在 Android 上更好，因为您可以重用组件化 UI。

如果你真的想让它看起来像一个手机应用程序，你可以使用缩放模式，（如果你的应用程序针对姜饼`targetSdk="10"`）然后 Honeycomb+ 将向用户呈现类似于 iOS 的缩放模式。我绝不推荐这个！这是您可以为用户提供的最糟糕的用户体验！

# c# - 在 C# 中将 PST 转换为多个 EML 文件

> ID：14154492
> 
> 赞同：1
> 
> 时间：2013-01-04T09:33:44.333
> 
> 标签：c#, email, outlook, eml, pst

我需要创建一个解析 PST 文件并将邮件转换为多个 EML 文件的应用程序。基本上，我需要做与[这个问题](https://stackoverflow.com/questions/3029450/convert-multiple-eml-files-to-single-pst-in-c-sharp)中所问的相反的事情。

是否有任何示例代码或指南来实现此功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T10:39:16.913

您可以使用[Outlook Redemption](http://www.dimastr.com/redemption/home.htm)库，该库能够打开 PST 并将邮件提取为 .EML（以及其他格式）。Redemption 是一个 COM 对象（32 位或 64 位），可以在 C# 中毫无问题地使用。这是一个控制台应用程序示例代码，演示了这一点：

```
using System;
using System.IO;
using System.Text;
using Redemption;

namespace DumpPst
{
    class Program
    {
        static void Main(string[] args)
        {
            // extract 'test.pst' in the 'test' folder
            ExtractPst("test.pst", Path.GetFullPath("test"));
        }

        public static void ExtractPst(string pstFilePath, string folderPath)
        {
            if (pstFilePath == null)
                throw new ArgumentNullException("pstFilePath");

            RDOSession session = new RDOSession();
            RDOPstStore store = session.LogonPstStore(pstFilePath);
            ExtractPstFolder(store.RootFolder, folderPath);
        }

        public static void ExtractPstFolder(RDOFolder folder, string folderPath)
        {
            if (folder == null)
                throw new ArgumentNullException("folder");

            if (folderPath == null)
                throw new ArgumentNullException("folderPath");

            if (folder.FolderKind == rdoFolderKind.fkSearch)
                return;

            if (!Directory.Exists(folderPath))
            {
                Directory.CreateDirectory(folderPath);
            }

            foreach(RDOFolder child in folder.Folders)
            {
                ExtractPstFolder(child, Path.Combine(folderPath, ToFileName(child.Name)));
            }

            foreach (var item in folder.Items)
            {
                RDOMail mail = item as RDOMail;
                if (mail == null)
                    continue;

                mail.SaveAs(Path.Combine(folderPath, ToFileName(mail.Subject)) + ".eml", rdoSaveAsType.olRFC822);
            }
        }

      /// <summary>
      /// Converts a text into a valid file name.
      /// </summary>
      /// <param name="fileName">The file name.</param>
      /// <returns>
      /// A valid file name.
      /// </returns>
      public static string ToFileName(string fileName)
      {
          return ToFileName(fileName, null, null);
      }

      /// <summary>
      /// Converts a text into a valid file name.
      /// </summary>
      /// <param name="fileName">The file name.</param>
      /// <param name="reservedNameFormat">The reserved format to use for reserved names. If null '_{0}_' will be used.</param>
      /// <param name="reservedCharFormat">The reserved format to use for reserved characters. If null '_x{0}_' will be used.</param>
      /// <returns>
      /// A valid file name.
      /// </returns>
      public static string ToFileName(string fileName, string reservedNameFormat, string reservedCharFormat)
      {
          if (fileName == null)
              throw new ArgumentNullException("fileName");

          if (string.IsNullOrEmpty(reservedNameFormat))
          {
              reservedNameFormat = "_{0}_";
          }

          if (string.IsNullOrEmpty(reservedCharFormat))
          {
              reservedCharFormat = "_x{0}_";
          }

          if (Array.IndexOf(ReservedFileNames, fileName.ToLowerInvariant()) >= 0 ||
              IsAllDots(fileName))
              return string.Format(reservedNameFormat, fileName);

          char[] invalid = Path.GetInvalidFileNameChars();

          StringBuilder sb = new StringBuilder(fileName.Length);
          foreach (char c in fileName)
          {
              if (Array.IndexOf(invalid, c) >= 0)
              {
                  sb.AppendFormat(reservedCharFormat, (short)c);
              }
              else
              {
                  sb.Append(c);
              }
          }

          string s = sb.ToString();

          // directory limit is 255
          if (s.Length > 254)
          {
              s = s.Substring(0, 254);
          }

          if (string.Equals(s, fileName, StringComparison.Ordinal))
          {
              s = fileName;
          }
          return s;
      }

      private static bool IsAllDots(string fileName)
      {
          foreach (char c in fileName)
          {
              if (c != '.')
                  return false;
          }
          return true;
      }

      private static readonly string[] ReservedFileNames = new[]
      {
          "con", "prn", "aux", "nul",
          "com0", "com1", "com2", "com3", "com4", "com5", "com6", "com7", "com8", "com9",
          "lpt0", "lpt1", "lpt2", "lpt3", "lpt4", "lpt5", "lpt6", "lpt7", "lpt8", "lpt9"
      };
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:46:31.817

您基本上需要做与该问题中所问的相反的事情。

*   使用 Outlook 互操作（或如上所述的兑换）加载 PST 文件
*   枚举所有文件。
*   使用 CDO、System.Mail 或类似工具为 PST 中的每个文件编写一个 EML 文件。

需要注意的是，PST 不包含 EML 文件，它包含 MSG 文件。因此，您将不得不进行某种形式的转换，并且您将无法*准确*返回最初发送的内容。

另请参阅此问题：[Are there .NET Framework methods to parse an email (MIME)?](https://stackoverflow.com/questions/1669797/are-there-net-framework-methods-to-parse-an-email-mime)

# java - Highchart 使用 Java 在屏幕外生成 SVG

> ID：14154494
> 
> 赞同：1
> 
> 时间：2013-01-04T09:33:51.373
> 
> 标签：java, svg, highcharts, batik

我想知道是否有一个用于 HighChart 的 Java API（不是导出 API），它可以根据提供的参数生成 svg，然后可以使用 Batik**将其转换为 png，而无需靠近 HTTP 请求**。

目前我能想到的唯一方法是发布到带有图表点的虚拟页面，然后导出到 SVG 并使用 Javascript 提交到导出服务，使用 Javascript 将其转换为 PNG，然后将其作为图像流返回.

但是，我只需要在 JVM 中获取由 DB 参数提供的图像流。上述方式需要 2 个请求-响应对，除此之外它不是最干净的解决方案，我认为它会产生开销，因为此操作在服务器上会非常频繁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T11:32:09.057

是的，您可以使用 API 生成高图。下载并试用 One2team 提供的以下项目

[https://github.com/one2team/highcharts-serverside-export](https://github.com/one2team/highcharts-serverside-export)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:25:04.467

您可以准备自己的服务器或使用此处描述的解决方案：[http ://www.highcharts.com/component/content/article/2-news/52-serverside-generated-charts](http://www.highcharts.com/component/content/article/2-news/52-serverside-generated-charts)

# java - Spring自定义注解：如何继承属性？

> ID：14154498
> 
> 赞同：7
> 
> 时间：2013-01-04T09:34:04.053
> 
> 标签：java, annotations, spring-annotations

我正在创建自己的自定义快捷方式注释，如[Spring 文档](http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html#tx-custom-attributes)中所述：

```
@Target({ElementType.METHOD, ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Transactional(value = "Custom", readOnly = true)
public @interface CustomTransactional {
} 
```

是否有可能，通过我的自定义注释，我还可以设置任何其他属性，这些属性在`@Transactional`? 我希望能够使用我的注释，例如，像这样：

```
@CustomTransactional(propagation = Propagation.REQUIRED)
public class MyClass {

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T13:31:13.873

不，如果您想要以这种方式在自定义注释本身上设置的其他属性，那将不起作用：

```
@Target({ElementType.METHOD, ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Transactional(value = "Custom", readOnly = true, propagation = Propagation.REQUIRED)
public @interface CustomTransactional {
} 
```

一个解决方案（不好的一个:-)）可能是使用您在场景中看到的基本案例集定义多个注释：

```
@Target({ElementType.METHOD, ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Transactional(value = "Custom", readOnly = true, propagation = Propagation.REQUIRED)
public @interface CustomTransactionalWithRequired {
}

@Target({ElementType.METHOD, ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Transactional(value = "Custom", readOnly = true, propagation = Propagation.SUPPORTED)
public @interface CustomTransactionalWithSupported {
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-16T19:10:02.053

In (at least) Spring 4, you can do this by specifying the element inside the annotation, e.g.:

```
@Target({ElementType.METHOD, ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Transactional(value = "Custom", readOnly = true)
public @interface CustomTransactional {
    Propagation propagation() default Propagation.SUPPORTED;
} 
```

Source: [http://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html#beans-meta-annotations](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html#beans-meta-annotations)

# orm - 在 Doctrine 2.1.7 中添加自定义数据类型（几何）。未调用方法 canRequireSQLConversion()

> ID：14154502
> 
> 赞同：6
> 
> 时间：2013-01-04T09:34:17.373
> 
> 标签：orm, types, doctrine, doctrine-orm, geometry

我正在尝试将几何类型添加到 Doctrine。我的 Doctrine DBAL 版本和 ORM 版本是 2.1.7。

我尝试按照此处的说明进行操作： [Doctrine 2 Types - Custom Mapping Types](http://docs.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/types.html#custom-mapping-types "Doctrine 2 类型 - 自定义映射类型")。

我成功创建了新的数据类型，但是 convertToPHPValueSQL 方法有问题。我希望在从数据库（数据库是 PostgreSQL 9.1 + PostGIS 2.0.0）获取几何列时始终调用函数 ST_AsText(' .. ')。

Doctrine DBAL 2.1 文档是这样说的：

> Doctrine-DBAL 的工作是将您的类型转换为 SQL 声明。您可以修改 Doctrine 将产生的 SQL 声明。首先，您必须通过覆盖 canRequireSQLConversion 方法来启用此功能：

```
<?php
public function canRequireSQLConversion()
{
    return true;
} 
```

> 然后覆盖方法 convertToPhpValueSQL 和 convertToDatabaseValueSQL ：

```
<?php
public function convertToPHPValueSQL($sqlExpr, $platform)
{
    return 'MyMoneyFunction(\''.$sqlExpr.'\') ';
}

public function convertToDatabaseValueSQL($sqlExpr, AbstractPlatform $platform)
{
    return 'MyFunction('.$sqlExpr.')';
} 
```

> 现在我们必须在 Doctrine Type 系统中注册这个类型并将其挂接到数据库平台：

```
<?php
Type::addType('money', 'My\Project\Types\MoneyType');
$conn->getDatabasePlatform()->registerDoctrineTypeMapping('MyMoney', 'money'); 
```

我确实喜欢这个（很多代码是占位符代码，但如果我做了一些愚蠢的事情，欢迎所有建议）：

```
<?php

namespace Minupeenrad\Types;

use Doctrine\DBAL\Types\Type;
use Doctrine\DBAL\Platforms\AbstractPlatform;

/**
 * Class for database column "geometry".
 *
 * @author Rauni Lillemets
 */
class GeometryType extends Type {
    const GEOMETRY = 'geometry';
    const SRID = 3301;

    public function getSqlDeclaration(array $fieldDeclaration, AbstractPlatform $platform) {
        return 'geometry';
    }

    //Should create WKT object from WKT string. (or leave as WKT string)
    public function convertToPHPValue($value, AbstractPlatform $platform) {
        return $value; //+ 
    }

    //Should create WKT string from WKT object. (or leave as WKT string)
    public function convertToDatabaseValue($value, AbstractPlatform $platform) {
        return $value; //+
    }

    public function getName() {
        return self::GEOMETRY;
    }

    public function canRequireSQLConversion() {
        return true;
    }

    //Should give WKT
    public function convertToPHPValueSQL($sqlExpr, $platform) {
        return 'ST_AsText(\''.$sqlExpr.'\') '; //+
    }

    //Should create WKB
    public function convertToDatabaseValueSQL($sqlExpr, AbstractPlatform $platform) {
        return 'ST_GeomFromText(\''.$sqlExpr.'\', '.self::SRID.')'; //+
    }
} 
```

现在我添加了使用此列的实体：

```
<?php
namespace Minupeenrad\Entities;

/**
 * Field
 *
 * @author Rauni Lillemets
 * @Entity
 * @Table(name="myfields.fields")
 */
class Field extends GeometryObject {
    /**
     * @Id
     * @Column(type="integer")
     * @GeneratedValue
     */
    private $id;

    /** 
     * @ManyToOne(targetEntity="User") 
     */
    private $user;

    /**
     * @Column(type = "string", length = "40")
     */
    private $fieldNumber;

    public function getId() {
        return $this->id;
    }

    public function getUser() {
        return $this->user;
    }

    public function setUser($user) {
        $this->user = $user;
    }

    public function getFieldNumber() {
        return $this->fieldNumber;
    }

    public function setFieldNumber($fieldNumber) {
        $this->fieldNumber = $fieldNumber;
    }
}
?> 
```

但如果我这样做：

```
$entity = $em->find('\Minupeenrad\Entities\Field', 1); 
```

Doctrine 对数据库执行 SQL 请求，如下所示：

```
SELECT t0.id AS id1, t0.fieldNumber AS fieldnumber2, t0.geometry AS geometry3, t0.user_id AS user_id4
FROM myfields.fields t0
WHERE t0.id = ? 
```

Doctrine 没有使用我的 convertToPHPValueSQL 方法，尽管 canRequireSQLConversion() 返回 true。此外，我添加了一些调试代码以查看是否甚至调用了 canRequireSQLConversion() ，并且没有调用它。我究竟做错了什么？

PS：我试图搜索 Stack Overflow，但我只想出了[Doctrine 2 的 GIS 扩展](https://stackoverflow.com/questions/8367869/gis-extension-for-doctrine-2)，它链接到我已经阅读过的 Doctrine 2.1.x 手册。

编辑：我会在这里阅读：http: [//docs.doctrine-project.org/en/latest/cookbook/advanced-field-value-conversion-using-custom-mapping-types.html](http://docs.doctrine-project.org/en/latest/cookbook/advanced-field-value-conversion-using-custom-mapping-types.html)

EDIT2：修复了函数 getSqlDeclaration()，这在我的代码中是错误的。添加了评论。

这似乎是一个更完整的教程。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T10:43:38.797

找到了答案。

在 Doctrine 2.1.7 中，如果我使用 $em->find()，最终会调用 BasicEntityPersister()_getSelectColumnSQL()。它有以下代码：（取自[https://github.com/doctrine/doctrine2/blob/2.1.x/lib/Doctrine/ORM/Persisters/BasicEntityPersister.php](https://github.com/doctrine/doctrine2/blob/2.1.x/lib/Doctrine/ORM/Persisters/BasicEntityPersister.php)）

```
/**
 * Gets the SQL snippet of a qualified column name for the given field name.
 *
 * @param string $field The field name.
 * @param ClassMetadata $class The class that declares this field. The table this class is
 * mapped to must own the column for the given field.
 * @param string $alias
 */
protected function _getSelectColumnSQL($field, ClassMetadata $class, $alias = 'r')
{
    $columnName = $class->columnNames[$field];
    $sql = $this->_getSQLTableAlias($class->name, $alias == 'r' ? '' : $alias) . '.' . $class->getQuotedColumnName($field, $this->_platform);
    $columnAlias = $this->_platform->getSQLResultCasing($columnName . $this->_sqlAliasCounter++);
    $this->_rsm->addFieldResult($alias, $columnAlias, $field);

    return "$sql AS $columnAlias";
} 
```

这段代码显然不尊重方法“canRequireSQLConversion”

在最新的 Doctrine 版本中，2.3.1（参见[https://github.com/doctrine/doctrine2/blob/2.3/lib/Doctrine/ORM/Persisters/BasicEntityPersister.php](https://github.com/doctrine/doctrine2/blob/2.3/lib/Doctrine/ORM/Persisters/BasicEntityPersister.php)）：

```
/**
 * Gets the SQL snippet of a qualified column name for the given field name.
 *
 * @param string $field The field name.
 * @param ClassMetadata $class The class that declares this field. The table this class is
 * mapped to must own the column for the given field.
 * @param string $alias
 */
protected function _getSelectColumnSQL($field, ClassMetadata $class, $alias = 'r')
{
    $sql = $this->_getSQLTableAlias($class->name, $alias == 'r' ? '' : $alias)
         . '.' . $this->quoteStrategy->getColumnName($field, $class, $this->_platform);
    $columnAlias = $this->getSQLColumnAlias($class->columnNames[$field]);

    $this->_rsm->addFieldResult($alias, $columnAlias, $field);

    if (isset($class->fieldMappings[$field]['requireSQLConversion'])) {
        $type = Type::getType($class->getTypeOfField($field));
        $sql = $type->convertToPHPValueSQL($sql, $this->_platform);
    }

    return $sql . ' AS ' . $columnAlias;
} 
```

所以答案是更新我的ORM。

# symfony - How to use roles in SonataAdminBundle

> ID：14154505
> 
> 赞同：13
> 
> 时间：2013-01-04T09:34:36.640
> 
> 标签：symfony, roles, symfony-2.1, sonata-admin

I started to use [SonataAdminBundle](http://sonata-project.org/bundles/admin/master/doc/index.html) in a **Symfony2.1** application. I developed all the `Admin` classes and now I wish to add roles to prevent *view*, *list* and *edit* actions to such user groups (e.g. *non-admin users*).

Notice that I don't use the *SonataUserBundle* (derived from *FOSUserBundle*) and I want to use the `sonata.admin.security.handler.role` security handler provided by the Sonata: ACL is too much powerful (and provides a lot of overhead) for my small project.

My own *UserBundle* provides User class and Group class (the last used to specify the role of each user). The role hierarchy is provided in my *security.yml* file, e.g.:

```
security:
    role_hierarchy:
        ROLE_POST_AUTHOR:            ROLE_USER
        ROLE_ADMIN:                  [ ROLE_USER, ROLE_POST_AUTHOR]
        ROLE_SUPER_ADMIN:            [ ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH ] 
```

Now, I configured the config.yml file by specifying the security handler

```
sonata_admin:
    security:
        handler: sonata.admin.security.handler.role 
```

The [official docs](http://sonata-project.org/bundles/admin/master/doc/reference/security.html) are more focused on how using ACL and SonataUserBundle, so I don't know how to link my roles from *security.yml* with the SonataAdminBundle.

PS: A similar question is: [SonataAdminBundle Security roles](https://stackoverflow.com/questions/10911188/sonataadminbundle-security-roles).

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-04-03T14:20:21.160

尝试使用`ROLE_<service.name>_<RIGHT>`where创建角色

*   `<service.name>`是您的奏鸣曲管理服务名称的大写和 DOT-REPLACED-BY-UNDERSCORE 版本
*   `<RIGHT>`是（[参考](http://sonata-project.org/bundles/admin/2-0/doc/reference/security.html#configuration)）之一：
    *   `CREATE`
    *   `DELETE`
    *   `EDIT`
    *   `LIST`
    *   `VIEW`
    *   `EXPORT`
    *   `OPERATOR`
    *   `MASTER`

## 例子

以下是我的**security.yml**的片段：

```
role_hierarchy:

    ROLE_MANAGER:
        - ROLE_USER
        - ROLE_SONATA_STUFF # have no effect on the UI
        - ROLE_SONATA_ADMIN # with this role you have a nice navbar with search box
        # user
        - ROLE_SONATA_ADMIN_USER_LIST
        - ROLE_SONATA_ADMIN_USER_VIEW
        # product
        - ROLE_SONATA_ADMIN_PRODUCT_LIST
        - ROLE_SONATA_ADMIN_PRODUCT_VIEW
        - ROLE_SONATA_ADMIN_PRODUCT_EDIT
        # product category
        - ROLE_SONATA_ADMIN_PRODUCT_CATEGORY_LIST
        - ROLE_SONATA_ADMIN_PRODUCT_CATEGORY_VIEW

    ROLE_ADMIN:
        - ROLE_SONATA_ADMIN # with this role you have a nice navbar with search box
        # user
        - ROLE_SONATA_ADMIN_USER_CREATE
        - ROLE_SONATA_ADMIN_USER_DELETE
        - ROLE_SONATA_ADMIN_USER_EDIT
        - ROLE_SONATA_ADMIN_USER_LIST
        - ROLE_SONATA_ADMIN_USER_VIEW
        - ROLE_SONATA_ADMIN_USER_EXPORT
        - ROLE_SONATA_ADMIN_USER_OPERATOR
        - ROLE_SONATA_ADMIN_USER_MASTER
        # product
        - ROLE_SONATA_ADMIN_PRODUCT_CREATE
        - ROLE_SONATA_ADMIN_PRODUCT_DELETE
        - ROLE_SONATA_ADMIN_PRODUCT_EDIT
        - ROLE_SONATA_ADMIN_PRODUCT_LIST
        - ROLE_SONATA_ADMIN_PRODUCT_VIEW
        - ROLE_SONATA_ADMIN_PRODUCT_EXPORT
        - ROLE_SONATA_ADMIN_PRODUCT_OPERATOR
        - ROLE_SONATA_ADMIN_PRODUCT_MASTER
        # product category
        - ROLE_SONATA_ADMIN_PRODUCT_CATEGORY_CREATE
        - ROLE_SONATA_ADMIN_PRODUCT_CATEGORY_DELETE
        - ROLE_SONATA_ADMIN_PRODUCT_CATEGORY_EDIT
        - ROLE_SONATA_ADMIN_PRODUCT_CATEGORY_LIST
        - ROLE_SONATA_ADMIN_PRODUCT_CATEGORY_VIEW
        - ROLE_SONATA_ADMIN_PRODUCT_CATEGORY_EXPORT
        - ROLE_SONATA_ADMIN_PRODUCT_CATEGORY_OPERATOR
        - ROLE_SONATA_ADMIN_PRODUCT_CATEGORY_MASTER
        # purchase
        - ROLE_SONATA_ADMIN_PURCHASE_CREATE
        - ROLE_SONATA_ADMIN_PURCHASE_DELETE
        - ROLE_SONATA_ADMIN_PURCHASE_EDIT
        - ROLE_SONATA_ADMIN_PURCHASE_LIST
        - ROLE_SONATA_ADMIN_PURCHASE_VIEW
        - ROLE_SONATA_ADMIN_PURCHASE_EXPORT
        - ROLE_SONATA_ADMIN_PURCHASE_OPERATOR
        - ROLE_SONATA_ADMIN_PURCHASE_MASTER
        # payment
        - ROLE_SONATA_ADMIN_PAYMENT_CREATE
        - ROLE_SONATA_ADMIN_PAYMENT_DELETE
        - ROLE_SONATA_ADMIN_PAYMENT_EDIT
        - ROLE_SONATA_ADMIN_PAYMENT_LIST
        - ROLE_SONATA_ADMIN_PAYMENT_VIEW
        - ROLE_SONATA_ADMIN_PAYMENT_EXPORT
        - ROLE_SONATA_ADMIN_PAYMENT_OPERATOR
        - ROLE_SONATA_ADMIN_PAYMENT_MASTER
        # notification: email template
        - ROLE_SONATA_ADMIN_NOTIFICATION_EMAIL_TEMPLATE_CREATE
        - ROLE_SONATA_ADMIN_NOTIFICATION_EMAIL_TEMPLATE_DELETE
        - ROLE_SONATA_ADMIN_NOTIFICATION_EMAIL_TEMPLATE_EDIT
        - ROLE_SONATA_ADMIN_NOTIFICATION_EMAIL_TEMPLATE_LIST
        - ROLE_SONATA_ADMIN_NOTIFICATION_EMAIL_TEMPLATE_VIEW
        - ROLE_SONATA_ADMIN_NOTIFICATION_EMAIL_TEMPLATE_EXPORT
        - ROLE_SONATA_ADMIN_NOTIFICATION_EMAIL_TEMPLATE_OPERATOR
        - ROLE_SONATA_ADMIN_NOTIFICATION_EMAIL_TEMPLATE_MASTER

    ROLE_SUPER_ADMIN:
        - ROLE_ADMIN
        - ROLE_ALLOWED_TO_SWITCH

access_control:
    - { path: ^/login$, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/register, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/resetting, role: IS_AUTHENTICATED_ANONYMOUSLY }
    - { path: ^/admin/, role: ROLE_SONATA_ADMIN } 
```

以下是我的**@AdminBundle/Resources/config/service.yml**的一个片段（这里只有服务名称是相关的）：

```
sonata.admin.user:
    class: Acme\AdminBundle\Admin\UserAdmin
    tags:
        - { name: sonata.admin, manager_type: orm, group: "User", label: "User" }
    arguments:
        - ~
        - Acme\UserBundle\Entity\User
        - ~
    calls:
        - [ setTranslationDomain, [AcmeAdminBundle]]

sonata.admin.product:
    class: Acme\AdminBundle\Admin\ProductAdmin
    tags:
        - { name: sonata.admin, manager_type: orm, group: "Store", label: "Product" }
    arguments:
        - ~
        - Acme\StoreBundle\Entity\Product
        - ~
    calls:
        - [ setTranslationDomain, [AcmeAdminBundle]]

sonata.admin.product_category:
    class: Acme\AdminBundle\Admin\ProductCategoryAdmin
    tags:
        - { name: sonata.admin, manager_type: orm, group: "Store", label: "Category" }
    arguments:
        - ~
        - Acme\StoreBundle\Entity\ProductCategory
        - ~
    calls:
        - [ setTranslationDomain, [AcmeAdminBundle]]

sonata.admin.purchase:
    class: Acme\AdminBundle\Admin\PurchaseAdmin
    tags:
        - { name: sonata.admin, manager_type: orm, group: "Store", label: "Purchase" }
    arguments:
        - ~
        - Acme\StoreBundle\Entity\Purchase
        - ~
    calls:
        - [ setTranslationDomain, [AcmeAdminBundle]]

sonata.admin.payment:
    class: Acme\AdminBundle\Admin\PaymentAdmin
    tags:
        - { name: sonata.admin, manager_type: orm, group: "Payment", label: "Payment" }
    arguments:
        - ~
        - Acme\PaymentBundle\Entity\Payment
        - ~
    calls:
        - [ setTranslationDomain, [AcmeAdminBundle]]

sonata.admin.notification.email_template:
    class: Acme\AdminBundle\Admin\Notification\EmailTemplateAdmin
    tags:
        - { name: sonata.admin, manager_type: orm, group: "Notification", label: "Email Template" }
    arguments:
        - ~
        - Acme\NotificationBundle\Entity\EmailTemplate
        - ~
    calls:
        - [ setTranslationDomain, [AcmeAdminBundle]] 
```

## 参考

1.  [Sonata Admin 中基于角色的安全性](http://www.phpassionate.com/2013/05/05/role-based-security-in-sonata-admin/)

# android - 从自定义适配器更新后，列表视图回到第一个位置

> ID：14154510
> 
> 赞同：3
> 
> 时间：2013-01-04T09:34:55.127
> 
> 标签：android, listview

使用 Web 服务调用每隔 N 分钟刷新一次列表视图。刷新后，我的当前位置返回到列表视图中的第一项。

这是我的代码。

```
private void updateListUI(String response){

arrList = new ArrayList<Object>(); // to store array list       
Object obj;
obj = some data; // some parsing of data and store in obj instance
arrList.add(obj);
if(listview.getAdapter()==null){
    adapter = new customAdapter(myActivity,layout,arrList);
    listview.setAdapter(adapter);   
}else{
     HeaderViewListAdapter adapterwrap = 
     (HeaderViewListAdapter) listview.getAdapter(); 

     BaseAdapter basadapter = (BaseAdapter) adapterwrap.getWrappedAdapter();
     customAdapter ad = (customAdapter)basadapter;              
     ad.setData(arrList); // it is a func in custom adapter that add items
     ad.notifyDataSetChanged(); 
     // here i want to set the position of list view,as it goes back to first item
 } 
}
BroadcastReceiver serviceReceiver = new BroadcastReceiver() {
 public void onReceive( final Context context, final Intent intent ) {
      updateListUI(intent.getStringExtra(response_from_service));
 }
} 
```

// Intent 服务调用 web 服务并在结束调用时向接收者广播响应。我的问题是每个 updateListUI 调用列表视图都回到第一个位置。有什么办法可以解决这个..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:40:08.090

您可以使用以下方法恢复 ListView 的位置：

```
int position = 12; // your position in listview
ListView listView = (ListView) findViewById(R.id.listView);
listView.setSelectionFromTop(position, 0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T11:07:42.240

使用 listLead.setSelectionFromTop(index, top); 在列表视图中设置位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T09:45:40.077

而不是在刷新期间加载 setAdapter

使用下面的代码......它会工作

```
yourAdapterName.notifyDataSetChanged(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T12:27:15.043

只需在要刷新列表视图的位置使用方法**notifyDataSetChanged()即可。**

# jsp - selected checkbox values from jsp to servlet is found null

> ID：14154514
> 
> 赞同：0
> 
> 时间：2013-01-04T09:35:01.437
> 
> 标签：jsp

I am working in an e-counselling project. I want to provide selection of multiple branch and schools at a time.I found that SelectedValues is always null.Please tell me what is wrong with it.

```
<table border="1" cellpadding="0" cellspacing="0" >
      <% for(i=0;i<branchSchools.length;i++){ %>
        <tr class=<%= (i%2==0)?"rowstyle":"altrowstyle" %> >
          <td>
            <input type="checkbox" name="SelectedBranchSchool"    id='SelectedBranchSchool<%= i %>' value="<%= i %>">
           </td>
            <td  >
              <%= branchSchools.item[i].branchCode %>
             </td>
             <td  >
               <%= branchSchools.item[i].school %>
              </td>
              <td align="right">
                <form name="frm5" action="addMultipleChoiceFill" method="post">
                  <% request.getSession().setAttribute("BranchSchools",branchSchools);
                     request.getSession().setAttribute("FilledChoices",filledChoices);
                  %>
                 <input type="submit" name="addmult"  value="AddMultiple"/>
               </form>
          </td>
   ![enter image description here][1]

 protected void processRequest(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {
    BranchSchools branchSchools=null;
    FilledChoices filledChoices=null;
    branchSchools=(BranchSchools) request.getSession().getAttribute("BranchSchools");
    request.getSession().removeAttribute("BranchSchools");
    filledChoices=(FilledChoices)request.getSession().getAttribute("FilledChoices");
    request.getSession().removeAttribute("FilledChoices");
    String[] SelectedValues = request.getParameterValues("SelectedBranchSchool");
    for(int i=0; i<SelectedValues.length; i++){
        int k=Integer.valueOf(SelectedValues[i]);
        filledChoices.addFilledChoice(branchSchools.item[k]);
        branchSchools.removeBranchSchool(k);
    }
    request.setAttribute("BranchSchools",branchSchools);
    request.setAttribute("FilledChoices",filledChoices);
    request.setAttribute("Change", "yes");
    RequestDispatcher rd=getServletContext().getRequestDispatcher("/choiceFill.jsp?");
    rd.forward(request,response); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:45:08.117

您的复选框不在表单内，因此在提交表单时未提交：

```
<input type="checkbox" name="SelectedBranchSchool" ...>
...
<form name="frm5" action="addMultipleChoiceFill" method="post">
   ...
   <input type="submit" name="addmult"  value="AddMultiple"/>
</form> 
```

另外，请尊重 Java 命名约定，并阅读有关 MVC、JSTL 和最佳实践的信息。

# java - Passing a list to a custom view?

> ID：14154519
> 
> 赞同：1
> 
> 时间：2013-01-04T09:35:31.743
> 
> 标签：java, android, oop

I am trying to make a custom style for android spinner, however there are several problems. I have noticed in many examples, they pass array to getCustomView method. I am wondering whether I can pass a list instead of an array.

Second problem is why they have declared variable and initialized in class variable scope? They have declared arrays like this.

```
String []data1={"Brainbitz:java","Brainbitz:Android","Brainbitz:Embedded Systems","Brainbitz:PHP"}; 
```

in class variable scope. But when I try to do for the list I get an error. why?

Third is,

If we can pass list to getCustomView how do I do that? Here is the link to the tutorial [tutorial](http://easyandroidtutorials.blogspot.com/2012/05/custom-spinner-in-android.html)

I am considering this source code.

```
 public View getCustomView(int position, View convertView, ViewGroup parent) {

            LayoutInflater inflater=getLayoutInflater();
            View row=inflater.inflate(R.layout.spinner, parent, false);
            TextView label=(TextView)row.findViewById(R.id.textView1);
            label.setText(list3.get(position));

//            TextView sub=(TextView)row.findViewById(R.id.textView2);
//            sub.setText(data2[position]);
//
//            ImageView icon=(ImageView)row.findViewById(R.id.imageView1);
//            icon.setImageResource(images[position]);

            return row;
            } 
```

In above code I don't know the syntax to pass position to list3 list type reference.

Please be kind enough to explain this.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:42:17.143

首先，

您正在使用**默认** `ArrayAdapter`类..

```
new ArrayAdapter<String>(); 
```

哪个使用`String`类进行数据绑定。如果你想`ArrayAdapter`用 a 制作一个`ArrayList`or`List`你必须通过扩展or制作一个**自定义适配器**。`ArrayAdapter<Custom_Class>``BaseAdapter`

该类`ArrayAdapter`可以处理任何 Java 对象作为输入。它将这个输入的数据映射到布局中的 TextView。

`ArrayAdapter`使用`toString()`数据输入对象的方法来确定应该显示的字符串。

查看[如何使用 ArrayAdapter<myClass>](https://stackoverflow.com/questions/2265661/how-to-use-arrayadaptermyclass) 和本[教程](http://www.vogella.com/articles/AndroidListView/article.html)

**更新：**

```
public class MyAdapter extends ArrayAdapter<String>
{
  private List<String> listString = new ArrayList<String>();

  public MyAdapter(Context context, int textViewResourceId,
                        List<String> objects) {
  super(context, textViewResourceId, objects);
  // TODO Auto-generated constructor stub
  listString  = objects;
  }

  public View getCustomView(int position, View convertView, ViewGroup parent) {

   LayoutInflater inflater=getLayoutInflater();
   View row=inflater.inflate(R.layout.spinner, parent, false);
   TextView label=(TextView)row.findViewById(R.id.textView1);
   label.setText(listString.get(position)); // How to use listString
   .
   .
   . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:23:40.567

这是更正的解决方案，

```
public class MyAdapter extends ArrayAdapter<String>
    {

        public MyAdapter(Context context, int textViewResourceId,List<String> objects) {
              super(context, textViewResourceId, objects);
              // TODO Auto-generated constructor stub
        }
            @Override
        public View getDropDownView(int position, View convertView,ViewGroup parent) {
            return getCustomView(position, convertView, parent);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            return getCustomView(position, convertView, parent);
        }

        public View getCustomView(int position, View convertView, ViewGroup parent) {

            LayoutInflater inflater=getLayoutInflater();
            View row=inflater.inflate(R.layout.spinner, parent, false);
            TextView label=(TextView)row.findViewById(R.id.textView1);
            label.setText(list3.get(position));

//            TextView sub=(TextView)row.findViewById(R.id.textView2);
//            sub.setText(data2[position]);
//
//            ImageView icon=(ImageView)row.findViewById(R.id.imageView1);
//            icon.setImageResource(images[position]);

            return row;
            }

   } 
```

基本上，我犯了 1 个错误，一个是我没有正确初始化构造函数。

# jboss - jboss as 7 hosting provider

> ID：14154523
> 
> 赞同：3
> 
> 时间：2013-01-04T09:35:39.307
> 
> 标签：jboss, hosting, jboss7.x

I have created a JAVA EE6 Application and i would like to host it on the J BOSS as 7 Platform. Can someone point me to a good and reliable web hosting provider.

Thanks in advance

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T18:25:17.020

结帐[OpenShift](https://openshift.redhat.com)。有免费版，现在也有企业版。

它也可以在[Amazon EC2](http://aws.amazon.com/about-aws/whats-new/2008/06/17/jboss-on-amazon-ec2/)上使用。

# git - Your branch is ahead of 'origin/master' by X commits. How to find the X commits?

> ID：14154524
> 
> 赞同：22
> 
> 时间：2013-01-04T09:35:39.230
> 
> 标签：git, git-commit, git-log

I was checking the X commits using the following command:

```
git log --author=<my-name> -<X> 
```

But the problem is that I accidentally pulled code from another repository and added the commits from the repository to my local git repository.

So I cannot use the above command since the new commits contains some other authors.

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-04T09:39:31.900

The command

```
git log origin/master..master 
```

shows the commits that are on `master` but not on `origin/master`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T06:38:06.863

I made an alias for this command that lists the commits that have not been pushed.

> > git log --branches --not --remotes --decorate --oneline

which is a variation of a command cxreg posted in [Viewing Unpushed Git Commits](https://stackoverflow.com/questions/2016901/viewing-unpushed-git-commits).

Lots of other useful ways to parse the commit tree in that post as well.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T23:57:38.473

The `treeish..treeish` notation works exactly to see the commits that are present in the second reference, but not in the first one. From the git log help:

> A regular D..M computes the set of commits that are ancestors of M, but excludes the ones that are ancestors of D. This is useful to see what happened to the history leading to M since D, in the sense that "what does M have that did not exist in D".

Using this with either `git log` or `git show` you can output a list that contains a single line for each commit pressent in the `D..M` difference:

```
git show -s --oneline branch..HEAD 
```

or

```
git log --oneline branch..HEAD 
```

Pair that with a word count and you can output exactly the number of commits you are looking for:

```
git log --oneline branch..HEAD | wc -l 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-08T10:08:32.253

This question has be answered already in another post:

```
git log origin/master..HEAD 
```

(see [Viewing Unpushed Git Commits](https://stackoverflow.com/questions/2016901/viewing-unpushed-git-commits))

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-04T09:40:24.507

I use this:

```
git log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit --date=relative 
```

It shows commits as a graph, with all the branches and their names.

My advice is to create alias for it in ~/.gitconfig

# jquery - lava style menu - no attached li at last

> ID：14154529
> 
> 赞同：1
> 
> 时间：2013-01-04T09:35:59.260
> 
> 标签：jquery, css, lavalamp

I need to make a lava menu style menu but instead of the blob shown in nettuts+ I'm trying to get a custom pointer to move horizontally (animated) when the cursor hovers over the `<li>` elements.

I'm unable to get the pointer at the end of the `<li>` list.

Also will the pointer still work if I use only a single page and just change the content dynamically using Jquery ajax, instead of having separate pages for different `<li>`?

```
//lava menu nav

(function($){
$.fn.lava= function(options){

    options= $.extend({
        speed: 500,
        easing: 'easeInOut',
        reset: 0
    }, options);

    return this.each(function(){
        var nav = $(this),
                  currentPageItem = ("#selected", nav),
                  pointer,
                  reset;

        var itemPosition= currentPageItem.position().left;
        var lavaOffset= currentPageItem.outerWidth() / 2;

        $('<li><img id="pointer" src="images/lava.png"></li>').css({
            left: itemPosition+lavaOffset
        }).appendTo(this);

        pointer= ("#pointer", nav) <!--declare the pointer variable-->

    <!--listen for the hover event-->
        $("li:not(#pointer)", nav).hover(function(){
            clearTimeout(reset);

            var newItemPosition= $(this).position().left;
            var newLavaOffset= $(this).outerWidth() / 2;
            <!--when the mouse hovers-->
            pointer.animate(
                {
                    left: newItemPosition + newLavaOffset
                },
                {
                    duration: options.speed,
                    easing: options.easing,
                    queue: false
                }
            );
        }, function(){
            <!-- now the mouse is leaving.. so we are using a callback for removing the animated pointer-->
            reset= setTimeout(function(){
                pointer.animate({
                    left: itemPosition+lavaOffset
                }, options.reset)
            }, options.reset);
        });

    }); <!--end each here-->

};<!--end prototype function here-->
})(jQuery); 
```

# php - Dynamic column names php mysql

> ID：14154531
> 
> 赞同：0
> 
> 时间：2013-01-04T09:36:03.163
> 
> 标签：php, mysql, field

I would like to insert data into a table with dynamic field names. My script lists all the column names that need to be inserted with data. I would like the users input for the dynamic fields to be inserted into the table. for example under field `Car` the data is `1` and `Boat` data is `0`. Here is my script below:

```
<?php
$connect=mysql_connect('localhost','root','');
$db_select=mysql_select_db('db_run',$connect);

$sql="SELECT column_name FROM information_schema.columns WHERE table_schema = 'db_run' AND table_name = 'run';";
$sql_query=mysql_query($sql);
$runfields=array();

while($rows=mysql_fetch_assoc($sql_query)){
    $rows['column_name']."<br>";
    $runfields[]=$rows['column_name'];
}

echo '<pre>';
print_r($runfields);
echo '</pre>';
$cntrunfields=count($runfields);
for($c=2;$c<$cntrunfields;$c++){
    echo $run=$runfields[$c].'<br>';
    echo $results=$_POST[$run];
    echo "<form action='' method='post'>";
    echo  "<select name='$runfields[$c]' id='$runfields[$c]'>
            <option value='-1'>Select option</option>
            <option value='0'>No</option>
            <option value='1'>Yes</option>
            </select>";
        echo "<input type=\"submit\" name=\"sss\" id=\"sss\" value=\"Submit\" />"   ;     
        echo "</form>";
    echo '<br>';

    echo $runfields[$c].' is equal to '.$results.'<br>';
}
?> 
```

If my table has 3 column names my form should display 3 new select form tags and be able to submit in a table. As shown in this section.

```
 echo "<form action='' method='post'>";
    echo  "<select name='$runfields[$c]' id='$runfields[$c]'>
            <option value='-1'>Select option</option>
            <option value='0'>No</option>
            <option value='1'>Yes</option>
            </select>";
        echo "<input type=\"submit\" name=\"sss\" id=\"sss\" value=\"Submit\" />"   ;     
        echo "</form>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:18:07.277

> 在新字段中添加新记录

如果要在尚不存在的字段中添加新记录，则需要两条语句，一条用于更改表结构（`ALTER TABLE yourTable ADD...`），一条用于添加新数据（`INSERT INTO yourTable ...`）。

我不得不承认我会劝阻您不要动态添加列：我不太确定这是一个好主意，而且这听起来像是一个糟糕的数据库设计。

# android - What is the system data used in"Include system data" in android error reports?

> ID：14154539
> 
> 赞同：2
> 
> 时间：2013-01-04T09:36:37.860
> 
> 标签：android, error-reporting

Android 2.2 has a new feature,in which when something unexpected happens in an application, the system send a error message asking the user to either `"Force close"` the app or `"Report"` the error to the developer.

Now when the user selects `"Report"` there is a checkbox asking him to `"Include system data"` and then send the report.

So does somebody know what system data is included in the error report sent to the developer?

# c++ - 在opencv中保存帧而不压缩

> ID：14154548
> 
> 赞同：3
> 
> 时间：2013-01-04T09:37:33.987
> 
> 标签：c++, opencv

我正在尝试使用**imwrite()** OpenCV 函数。我想用**.TIFF**扩展名保存帧。我遇到的问题是保存的图像被压缩，所以我不能使用它们。知道如何摆脱这种压缩吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T23:27:53.560

不要介意sietschie说什么。TIFF 标志在 opencv 二进制文件中使用 LZW 压缩进行硬编码。您可以将其关闭（将其注释掉）或更改它。在：

```
3rdparty/libtiff/tiff.h 
```

删除这一行：

```
#define     COMPRESSION_LZW     5       /* Lempel-Ziv  & Welch */ 
```

然后编译。快速。根据您的图像，自动设置除此之外的 Tiff 选项（8 位、16 位、颜色、rgb、rgba 等）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T11:29:28.753

根据[文档](https://docs.opencv.org/2.4/modules/highgui/doc/reading_and_writing_images_and_video.html#cv-imwrite)， OpenCV 仅公开了一组有限的用于编写图像文件的选项。其中不属于 TIFF 文件。

所以除非你想使用自己的函数或修改 OpenCV 源代码，否则这是不可能的。我建议使用另一种未压缩格式来保存帧，例如 PXM 或 BMP，除非您有某些特定原因使用 TIFF 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-24T18:08:51.963

最简单的方法是重新编译 OpenCV 或直接使用 libtiff，但我认为更改 3rdparty/libtiff/tiff.h 不是一个好主意：在此修改后，您无法使用 OpenCV 保存压缩的 TIFF，并且在非 Windows 系统下，您通常有单独的 libtiff（不是 OpenCV 的一部分）。

我建议更简单的方法（仍然是 OpenCV 重新编译，但您可以节省编写压缩 tiff 的可能性并且不要直接更改 libtiff）： [使用 OpenCV 保存未压缩的 TIFF](https://stackoverflow.com/questions/12073281/writing-16-bit-uncompressed-image-using-opencv)

# objective-c - 核心数据：在两个实体中查找的 NSPredicate

> ID：14154555
> 
> 赞同：1
> 
> 时间：2013-01-04T09:37:56.020
> 
> 标签：objective-c, ios, core-data, nsfetchrequest

问题是我不知道如何制作一个`NSPredicate`看起来在两个实体中的。有任何想法吗？

## 假设我有 2 个实体：

```
Library:
1 lib_id
2 name
3 address 
```

## 和：

```
Books
1 book_id
2 book_name
3 book_author
4 lib_id 
```

它们之间没有任何核心数据关系。我想发出一个获取请求，该请求将返回一个包含至少一本书的所有库的 NSArray。

## 我假设它是这样的：

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescriptor *entity = [NSEntityDescriptor entityForName:@"Books" inManagedObjectContext:context];
 // some NSPredicate...
array = [context executeFetch ...]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T18:29:44.450

它比你想象的要复杂，但也不是不可能。

您的数据模型`lib_id`在两个实体上的使用，以及您无法在实体之间添加 Core Data 关系的评论表明您陷入了一个经典陷阱：**您将 Core Data 视为关系数据库**。Core Data 的 API 不像关系数据库那样设计。你可以让它工作，但你应该意识到**你正在竭尽全力让 Core Data 变得比必要的更困难**。如果下面的解决方案看起来很复杂，那是因为*你在做 Core Data 错误*。

如果您使用 Core Data 的预期用途——在这种情况下是两个实体之间的关系——查找会很简单。您可以为每个`Library`在其`books`关系中没有条目的情况进行提取。

话虽如此，您分两步解决眼前的问题。

首先，获取`lib_id`在`Books`. 以下将为您提供`NSArray`与唯一值匹配的包含字符串：

```
NSFetchRequest *bookRequest = [NSFetchRequest fetchRequestWithEntityName:@"Books"];
[bookRequest setPropertiesToFetch:@[@"lib_id"]];
[bookRequest setResultType:NSDictionaryResultType];
[bookRequest setReturnsDistinctResults:YES];

NSError *error = nil;
NSArray *libIdsInBooksDicts = [[self managedObjectContext] executeFetchRequest:bookRequest error:&error];
if (libIdsInBooksDicts == nil) {
    NSLog(@"Fetch error: %@", error);
    return;
}

NSArray *libIdsInBooks = [libIdsInBooksDicts valueForKey:@"lib_id"]; 
```

上面的最后一行是因为`libIdsInBooksDicts`实际上包含一个字典数组，而每个字典又都有一个名为的键`lib_id`和一个作为实际 ID 的值。您只需要这些值。

接下来，查找刚刚获得的列表中的每个`Library`人：`lib_id`

```
NSFetchRequest *libRequest = [NSFetchRequest fetchRequestWithEntityName:@"Library"];
[libRequest setPredicate:[NSPredicate predicateWithFormat:@"lib_id in %@", libIdsInBooks]];

error = nil;
NSArray *librariesWithAtLeastOneBook = [[self managedObjectContext] executeFetchRequest:libRequest error:&error];
if (librariesWithAtLeastOneBook == nil) {
    NSLog(@"Fetch error: %@", error);
    return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:47:10.287

`NSFetchedResultsController`可以帮助使用 sectionNameKeyPath 获取结果。

```
- (id)initWithFetchRequest:(NSFetchRequest *)fetchRequest 
      managedObjectContext:(NSManagedObjectContext *)context 
        sectionNameKeyPath:(NSString *)sectionNameKeyPath 
                 cacheName:(NSString *)name; 
```

如果您将 lib_id 作为 sectionNameKeyPath 传递，您将在多个部分中获取数据，每个部分关联不同的 lib_id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T20:18:09.413

一次获取 == 一个 DISTINCT 实体。

但是您可以拥有 N 个相关实体 => 让一个实体相互继承

所以..您可以让 A1 扩展 A 和 A2 扩展 A：
=> A1 和 A2 存储在一个表中，并且可以在一次提取中查询它们（获取所有 As）

但是..您无法获取无关的 A 和 B：
=> 一次获取无法完成

# ios - UIImageView 动画减小宽度

> ID：14154559
> 
> 赞同：3
> 
> 时间：2013-01-04T09:38:43.413
> 
> 标签：ios, animation, uiimageview

我正在开发一个应用程序，它需要在 1 小时内将 imageview 的宽度从 320 减小到 0。为此，我使用以下代码

```
 [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:3600];
    newRect.size.width = 0;
    imgView.frame = newRect;
    [UIView commitAnimations]; 
```

如果我们留在同一个视图控制器中，它工作正常，如果用户导航到其他视图控制器，动画开始后，如何处理动画。

除此之外，我还有一个问题-在动画期间，imageview中的图像看起来像在整个动画中缩小一样，我使用相同的图像，所以我想在动画期间更改imageView中的图像我该如何实现这一点。

除了动画之外，还有其他方法可以做到这一点。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T09:43:09.593

控制器和视图的生命周期不允许您如此简单地执行此操作。您正在使用的对象可以并且如果当前不再需要它们将被系统释放，因此您启动的动画基本上被丢弃了。

您必须将动画的进度存储在某个地方，例如在文件或 CoreData 数据库中，以使其在该视图的实例化中持久存在。根据具体情况，在动画开始后存储动画的开始时间可能就足够了。然后，`viewWillAppear`您可以加载它并计算一小时内已经取得了多少进展，并从该点开始一个新的动画。对用户来说，它看起来好像动画是在后台进行的。

# php - 从数组中取消设置项目 0

> ID：14154561
> 
> 赞同：0
> 
> 时间：2013-01-04T09:38:55.177
> 
> 标签：php, arrays

我有一段简单的代码，它从数组中删除一个项目，购买提交到 url 中的键值。

这里是。

```
if ($this->uri->segment(5))
    {
    unset($body_data['ccs'][$this->uri->segment(5)]);
    $newcc = $body_data['ccs'];

    $postcc = implode(",", $newcc);

    if($this->ticket_model->save_cc($postcc, $ticket_id))
            {
            redirect(base_url().'ticket/edit/'.$ticket_id.'/11/');
            return;
            }
    } 
```

这也是我想要的工作方式，但是它不会取消设置数组开头的项，键值为零。有没有我错过的技巧？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T09:41:58.160

```
if ($this->uri->segment(5)) 
```

当这是 === 0 时，它是 == false 并且 if 中的代码不会运行。将其更改为

```
if (isset($this->uri->segment(5))) 
```

# c# - “字段”，但用作“类型”

> ID：14154567
> 
> 赞同：9
> 
> 时间：2013-01-04T09:39:05.603
> 
> 标签：c#, .net

我收到一条我似乎无法弄清楚的错误消息。我看到发布了许多其他类似的问题，但解决方案似乎对我不起作用。

错误信息：

```
'PaymentPlanStoreLogic.Class1.myLog' is a 'field' but is used like a 'type' 
```

我的代码：

```
using System;
using PaymentPlanLogic;
namespace PaymentPlanStoreLogic
{
  public class Class1
  {
    Logger myLog = new Logger();
    myLog.createLog();
   }
} 
```

对象浏览器：

```
public void createLog()
Member of PaymentPlanLogic.Logger 
```

我已经按照页面上的建议尝试了以下内容 [（对象）是“字段”，但用作“类型”](https://stackoverflow.com/questions/8908803/object-is-a-field-but-is-used-like-a-type)

```
PaymentPlanLogic.Logger.createLog(); 
```

但我得到了错误

```
"'PaymentPlanLogic.Logger.createLog()' is a 'method' but is used like a 'type'" 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-04T09:43:28.933

您不能在方法之外的字段上调用方法：

```
using System;
using PaymentPlanLogic;
namespace PaymentPlanStoreLogic
{
  public class Class1
  {
    Logger myLog = new Logger();

    void YouForgotThisMethod()
    {
      myLog.createLog();
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-04T16:21:28.523

托布西的回答是正确的。出现奇怪错误消息的原因是编译器正拼命地试图弄清楚你的意思。推理是这样的：

> 此时唯一合法的是类、接口、结构、枚举、字段、运算符、索引器、事件、属性、方法、构造函数和析构函数的声明。它不能是类、接口、结构或枚举，因为它们中都有关键字。它不能是构造函数或析构函数。因此，用户必须尝试创建字段、运算符、索引器、事件、属性或方法。所有这些事情都可以合法地从一个类型开始。好的，所以这个表达式一定是在尝试识别一种类型。但它不识别类型；它标识一个字段。这就是我要给出的错误。

当然，这是对编译器的不合理拟人化，但您要抓住重点：编译器的错误代码“心理模型”与您编写损坏代码时的想法大不相同，因此错误消息不是很有帮助. *编译器认为你知道一个语句不能去那里，并且把一个字段和一个类型混在一起了。*更复杂的算法会让编译器猜测，由于您键入的是合法语句，因此真正的错误是该语句位于块之外。

编写错误消息生成器来准确模拟编写损坏代码的人的心理过程是相当困难的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T09:43:47.910

的定义`Class1`不完整。你不能在类中调用这个方法，你可以在类的方法中调用它：

```
using System;
using PaymentPlanLogic;
namespace PaymentPlanStoreLogic
{
    public class Class1
    {
        #region Members

        Logger myLog;

        #endregion

        #region Constructors

        public Class1()
        {
            myLog = new Logger();
            myLog.createLog();
        }

        #endregion
    }
} 
```

然后`createLog()`将在实例化 Class1 的新实例时执行。

# mongodb - 通过 mongodb River 在 elasticsearch 中创建索引的映射未生效

> ID：14154575
> 
> 赞同：7
> 
> 时间：2013-01-04T09:39:26.680
> 
> 标签：mongodb, mapping, elasticsearch, lucene

我正在尝试使用以下命令使用 mongodb-river 在 elasticsearch 中索引 mongodb，但文档映射未生效。它仍然使用默认的分析器（标准）作为字段`text`

[Mongodb-river](https://github.com/richardwilly98/elasticsearch-river-mongodb/) 文档指定了索引的创建，但没有关于如何提供自定义映射的文档。这是我尝试过的。是否有任何其他文档可以在其中找到如何在使用 mongodb-river 时指定自定义分析器等。

```
curl -XPUT "localhost:9200/_river/autocompleteindex/_meta" -d '
{
    "type": "mongodb",
    "mongodb": {
        "host": "rahulg-dc",
        "port": "27017",
        "db": "qna",
        "collection": "autocomplete_questions"
    },
    "index": {
        "name": "autocompleteindex",
        "type": "autocomplete_questions",
        "analysis" : {
                "analyzer" : {
                     "str_search_analyzer" : {
                          "tokenizer" : "keyword",
                          "filter" : ["lowercase"]
                      },

                      "str_index_analyzer" : {
                         "tokenizer" : "keyword",
                         "filter" : ["lowercase", "ngram"]
                    }
                },
                "filter" : {
                    "ngram" : {
                        "type" : "ngram",
                        "min_gram" : 2,
                        "max_gram" : 20
                    }
                }
            }
    },
    "autocompleteindex": {
       "_boost" : {
            "name" : "po", 
            "null_value" : 1.0
       },
       "properties": {
                "po": {
                    "type": "double"
                },
                "text": {
                    "type": "string",
                    "boost": 3.0,
                    "search_analyzer" : "str_search_analyzer",
                    "index_analyzer" : "str_index_analyzer"
                }           
       }
    }
}' 
```

查询返回正确的结果是我按全字搜索但不匹配任何子字符串匹配。此外，升压因子也没有显示出它的效果。

我究竟做错了什么 ？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T10:46:26.147

您必须首先使用[索引设置](http://www.elasticsearch.org/guide/reference/api/admin-indices-create-index.html)（分析器）创建索引：

```
"analysis" : {
            "analyzer" : {
                 "str_search_analyzer" : {
                      "tokenizer" : "keyword",
                      "filter" : ["lowercase"]
                  },

                  "str_index_analyzer" : {
                     "tokenizer" : "keyword",
                     "filter" : ["lowercase", "ngram"]
                }
            },
            "filter" : {
                "ngram" : {
                    "type" : "ngram",
                    "min_gram" : 2,
                    "max_gram" : 20
                }
            }
        } 
```

然后你可以为你的类型[定义一个映射：](http://www.elasticsearch.org/guide/reference/api/admin-indices-put-mapping.html)

```
"autocomplete_questions": {
   "_boost" : {
        "name" : "po", 
        "null_value" : 1.0
   },
   "properties": {
            "po": {
                "type": "double"
            },
            "text": {
                "type": "string",
                "boost": 3.0,
                "search_analyzer" : "str_search_analyzer",
                "index_analyzer" : "str_index_analyzer"
            }           
   }
} 
```

只有这样，您才能创建河流：

```
curl -XPUT "localhost:9200/_river/autocompleteindex/_meta" -d '
{
"type": "mongodb",
"mongodb": {
    "host": "rahulg-dc",
    "port": "27017",
    "db": "qna",
    "collection": "autocomplete_questions"
},
"index": {
    "name": "autocompleteindex",
    "type": "autocomplete_questions"} } 
```

它有帮助吗？

# android - “保护”应用程序：通过 InApp 购买免费到完整版？市场许可验证？还是没用？

> ID：14154578
> 
> 赞同：0
> 
> 时间：2013-01-04T09:39:32.683
> 
> 标签：android, in-app-purchase, protection, piracy-protection

现在我几乎完成了我的第一个应用程序，我想拥有它的两个版本，一个是免费的（带有广告和少一点的功能），一个是完整/付费版本。

我知道你不能完全防止应用程序被破解/分发，但无论如何，我现在对发布应用程序的最佳方法有一些想法。

1) 商店中的完整版和轻量版均无需额外检查

2) 完整版集成了 Google Market 许可证检查...这真的带来任何“安全性”吗？我读过这种保护已被破解，因此毫无用处？

3) 有精简版并通过 InApp 购买将其转换为完整版？目前我不知道如何实施 InApp 计费以及如何检查用户是否支付了 inApp 以释放全部功能......当然也有解决方法，对吧？

你会怎么做？您是否尝试阻止您的应用程序被非法共享，或者您认为不值得付出努力，因为任何保护都可以被删除（然后无论如何都会被共享）？

只是收集一些想法:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:46:39.403

我个人认为应用内购买是阻止人们获得您应用的免费付费版本的最安全方法，因为当有人不可避免地（如果您的应用很受欢迎）在互联网上发布您应用的 apk 文件时，它只是免费版。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:50:54.393

我经历了同样的思考过程，并为新应用选择了选项 3。

我的推理如下；

使用选项 1，您需要维护两个应用程序，用户必须卸载您的试用版，并且您会遇到在两个版本之间迁移数据的问题。

选项 2 具有选项 1 的所有问题以及实施的麻烦。

选项 3，您只需维护一个代码库，用户可以在所有数据完好无损的情况下快速轻松地升级，并且您对一个应用程序而不是两个应用程序拥有更高的下载统计信息/评级。

使用计费库的第 3 版，实现它变得容易得多。[我在此处](http://developer.android.com/google/play/billing/billing_integrate.html)按照 Google 的示例进行操作，并在几个小时内通过 IAB 简单地删除了广告。

# android - Android服务方法未从活动调用

> ID：14154585
> 
> 赞同：0
> 
> 时间：2013-01-04T09:40:19.700
> 
> 标签：android, android-activity, android-service

我有包括连接到`bluetooth`设备的服务。我从我的第一个活动中调用此服务。并且服务成功创建并启动。但是当我在第一个活动中使用绑定来调用服务中的方法时，它没有执行。我提到了[LocalService 示例](http://developer.android.com/guide/components/bound-services.html)

**我的服务代码：**

```
 // Binder given to clients
private final IBinder mBinder = new LocalBinder();

@Override
public IBinder onBind(Intent intent) {
    // A client is binding to the service with bindService()
    return mBinder;
}

public class LocalBinder extends Binder {
    public BluetoothServices getService() {
        // Return this instance of LocalService so clients can call public methods
        return BluetoothServices.this;
    }

}

public void SendData(){
    Log.d("msg", "Send msg"); 
} 
```

我在我的**第一个活动中使用以下代码：**

```
BluetoothServices mService;
boolean mBound = false;

@Override
public void onStart(){
    super.onStart();
     Intent btservices = new Intent(getApplication(),BluetoothServices.class);
     startService(btservices);

     bindService(btservices, mConnection, Context.BIND_AUTO_CREATE);

}

private ServiceConnection mConnection = new ServiceConnection() {

    @Override
    public void onServiceConnected(ComponentName className,
            IBinder service) {
        // We've bound to LocalService, cast the IBinder and get LocalService instance
        LocalBinder binder = (LocalBinder) service;
        mService = binder.getService();
        mBound = true;
    }

    @Override
    public void onServiceDisconnected(ComponentName arg0) {
        mBound = false;
    }
};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if(mBound){
        mService.SendData();
    }
} 
```

上面的代码有什么问题？为什么它不是绑定和调用方法？

我的清单：

```
<uses-sdk android:minSdkVersion="10" />

<uses-permission android:name="android.permission.INTERNET" />

<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />

<application
    android:debuggable="true"
    android:icon="@drawable/logo_50"
    android:theme="@style/app_theme" >

    <service android:name="com.example.utilities.BluetoothServices"></service>
    <activity
        android:name="com.example.pkg.Thisisit"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T05:16:39.387

> 上面的代码有什么问题？为什么它不是绑定和调用方法？

操作顺序。Activity启动时生命周期回调的顺序为

1.  onCreate()
2.  开始（）
3.  onResume()

在您的代码中，您检查是否`Service`已绑定并在 中调用发送数据方法`onCreate()`，但不要绑定到`Service`until `onStart()`，因此您的第一个代码块将永远不会触发，因为此时您从未被绑定。

还有几点需要注意：

*   服务绑定是异步的。即使你重新安排你的电话，所以仍然`SendData()`不太可能准备好；调用后不会立即绑定。这就是目的，它通过回调告诉您服务何时可用。在访问任何内容之前，您必须等待这一点。`onResume()``Service``Service``bindService()``ServiceConnection``onServiceConnected()`
*   绑定到服务时，您也不必启动它。如果绑定服务尚未运行，则绑定服务将在绑定时启动。在上面的代码中，调用`startService()`是多余的。

# ms-access - 在访问表单中使用sql查询时弹出框询问参数

> ID：14154589
> 
> 赞同：1
> 
> 时间：2013-01-04T09:40:23.943
> 
> 标签：ms-access, vba

我有一个表格，里面有 3 件事供我的用户填写：

1.  一个名为的文本框`ProjectName`

2.  两个 ActiveX 控件对象（Microsoft 时间和日期选择器 Control 6.0）分别调用`ProjStartDate`和`ProjEndDate`

在我的用户输入了上述任何一个之后，他们可以单击一个按钮，该按钮将对表单中的列表框对象调用重新查询，该表单将显示过滤结果。

我已将列表框的行源类型设置为“表/查询”，并将其行源设置为以下 SQL 查询：

```
SELECT p.Title
FROM Project AS p
WHERE
  p.Title = [Forms]![Search by project]![ProjectName] 
  OR (p.StartDate <= [Forms]![Search by project]![ProjStartDate]
      AND p.EndDate >= [Forms]![Search by project]![ProjEndDate])
ORDER BY
  p.ProjectId DESC; 
```

但是，每次我输入表单时，它都会提示我一个弹出框，要求我输入一个名为`Forms!Search by project!ProjectName`,`Forms!Search by project!ProjStartDate`和的参数`Forms!Search by project!ProjEndDate`。如果我输入参数，让我们正确地说项目名称，列表框将显示正确的过滤结果。

此外，即使我在`ProjectName`文本框中输入正确的关键字并重新查询，仍然会出现参数弹出框。有谁知道如何解决这个问题？提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T18:18:58.463

我首先基于所有控件都包含在一个表单中的假设编写了这个答案。但是，如果列表框位于子窗体上，则父窗体的控件（例如`[Forms]![Search by project]![ProjectName]`）在子窗体首次打开时尚不可用。如果是这种情况，您可以将列表框行源属性留空，并等到父窗体的表单加载事件将您的`SELECT`语句分配给列表框行源。或者将列表框行源留空，直到用户单击命令按钮。

这个答案的其余部分是关于诊断命名问题。由于您在评论中指出查询在特定时间运行时可以工作，所以我认为毕竟不涉及命名，但会留下它以防它可能对其他人有所帮助。

打开即时窗口 ( `Ctrl`+ `g`) 并调查数据库引擎为何找不到这些参数。

在表单视图中打开“按项目搜索”表单后，`.Name`只需检查其属性即可验证 Access 是否看到您期望的名称。如果您和 Access 都同意表单的名称，您将获得此...

```
? Forms![Search by project].Name
Search by project 
```

OTOH，如果 Access 认为表单具有不同的名称，则该尝试将触发错误。如果发生这种情况，请检查 Access 看到的表单名称。这将为您提供所有打开表单的名称：

```
for each f in Forms : ? f.Name : next 
```

最后，检查这些表单控件的值。假设“按项目搜索”确实是正确的表单名称......

```
? Forms![Search by project]!ProjectName
? Forms![Search by project]!ProjStartDate
? Forms![Search by project]!ProjEndDate 
```

# asp.net-mvc - ViewBag.Title 值覆盖 ASP.NET MVC 编辑器模板的 Model.Title

> ID：14154590
> 
> 赞同：17
> 
> 时间：2013-01-04T09:40:29.093
> 
> 标签：asp.net-mvc, viewbag, mvc-editor-templates, editorformodel

当我`ViewBag.Title`在 Razor 模板的顶部设置时，`Model.Title`编辑器模板文本框将使用值`ViewBag.Title`而不是预期`Model.Title`值填充。显式调用`Html.EditorFor(x => Model.Title)`不会产生这种行为。

`ViewBag.Title`如何在不为我的模型维护自定义编辑器模板的情况下防止我的编辑器模板显示值？

## 代码

```
@{
    ViewBag.Title = "Edit Post " + Model.Title;
}

@Html.EditorFor(x => Model.Title) @* renders "My Title" text box *@
@Html.EditorFor(x => Model)       @* renders "Edit Post My Title" text box *@ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T02:03:09.663

使用的值`Html.EditorFor`可以来自三个地方`ModelState`：`ViewData`和`Model`。顺便说一句，`ViewData`与`ViewBag`同一个底层字典交互的两种方式是相同的。

因此，为避免在使用表单时发生冲突，您可以使用 Model 代替，也可以使用前缀，例如`ViewBag._Title`.

* * *

在这种情况下`ViewBag.Title`用于与布局共享数据，您也可以`Page.Title`不用担心更改视图数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-30T16:46:27.067

将`ViewBag.Title`作业移到页面底部对我有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T09:50:02.167

避免这种情况的简单方法就是不使用`ViewBag`.

`ViewBag`是一个动态对象，它确实具有优先权。但是您几乎可以在其中填充任何东西，并且很难调试。

底线：如果你需要显示一些动态的东西，比如标题，把它放在你的`Model`.

# localization - Firefox 插件本地化

> ID：14154595
> 
> 赞同：4
> 
> 时间：2013-01-04T09:40:39.757
> 
> 标签：localization, firefox-addon, firefox-addon-sdk

我的插件本地化有问题。我按照[本](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/tutorials/l10n.html)教程进行操作，`Using Localized Strings in Preferences`但我无法编译我的插件，因为我使用波兰字符`ć`和其他字符。

我已经制作了`locale`文件夹并将`pl-PL.properties`包含以下内容的文件放在那里：

```
my_tag_title = Co robić? 
```

我得到了错误：

```
Following locale file is not a valid UTF-8 file: C:\path\pl-PL.properties
'utf8' codec can't decode byte 0xe6 in position 22: invalid continuation byte" 
```

有没有办法将特殊字符直接放在 package.json 中？

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T09:49:27.807

确保语言环境文件以 UTF-8 格式保存。

# macos - 是否可以从命令行启动 Teamviewer 以接受连接？

> ID：14154598
> 
> 赞同：24
> 
> 时间：2013-01-04T09:40:45.630
> 
> 标签：macos, command-line, remote-access

有一个关于如何[从命令行启动 Teamviewer 以进行向外连接](https://stackoverflow.com/questions/12525400/how-to-connect-with-teamviewer-directly-using-terminal-command)的问题，但是我想从命令行启动 Teamviewer（因此它可以接受传入连接）。

这可能吗？如果是这样，任何人都可以提供一些信息吗？我在 Teamviewers 支持网站上的任何地方都没有找到它，并且到目前为止尝试了不同的方法。

注意：操作系统是 OS X 10.6.8，TeamViewer 是 TV8。

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-06-20T10:06:31.497

As said on [http://steronius.blogspot.com/2014/02/replacing-logmein-with-teamviewer-on.html](http://steronius.blogspot.com/2014/02/replacing-logmein-with-teamviewer-on.html):

> This can be done with OSX, but there seems to be a bug that requires a particular work-around that I was lucky to notice. TeamViewer will need to be run twice -- once as sudo, and another as the user:
> 
> SSH into the OSX machine and run TeamViewer like so:
> 
> **sudo /Applications/TeamViewer.app/Contents/MacOS/TeamViewer**
> 
> It should fail and report: com.teamviewer.desktop: Invalid argument com.teamviewer.teamviewer: Invalid argument
> 
> Now run it again without sudo:
> 
> **/Applications/TeamViewer.app/Contents/MacOS/TeamViewer**
> 
> This should launch TeamViewer and make it ready for a client connection.
> 
> If for some reason it fails to launch, try setting the display first with:
> 
> **export DISPLAY=:0**

Then, to get your TeamViewer ID do:

> **defaults read /Library/Preferences/com.teamviewer.teamviewer9 ClientID**

Just tested this on OS X Lion.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-03-26T17:02:52.690

这样做的方法是使用 SSH 并编写以下命令：打开 /Applications/TeamViewer.app

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-01T17:18:27.537

在linux的命令行上运行`teamviewer --help`提供了以下内容

```
TeamViewer                      8.0.16675
teamviewer                      start TeamViewer user interface (if not running) 

teamviewer --help               print this help screen 
teamviewer --version            print version information 
teamviewer --info               print version, status, id 
teamviewer --passwd [PASSWD]    set a password (useful when installing remote (ssh) 
teamviewer --ziplog             create a zip containing all teamviewer logs (useful when contacting support) 

teamviewer --daemon status      show current status of the TeamViewer daemon 
teamviewer --daemon start       start       TeamViewer daemon 
teamviewer --daemon stop        stop        TeamViewer daemon 
teamviewer --daemon restart     stop/start  TeamViewer daemon 
teamviewer --daemon disable     disable TeamViewer daemon - don't start daemon on system startup 
teamviewer --daemon enable      enable      TeamViewer daemon - start daemon on system startup (default) 
```

运行`teamviewer`将启动您所描述的设置界面。您需要与守护进程相关的命令。正在运行的 teamviewer 守护程序将“监听”传入连接。

`teamviewer --daemon start`您可以使用and`teamviewer --daemon stop`命令临时运行守护程序，或者`teamviewer --daemon enable`将守护程序设置为在每次启动时在操作系统启动时运行。

如果 OS X 不一样，我认为它会相似。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-14T17:23:58.683

我正在跟进@Queenvictoria 对@Aldekein 回答的评论。

如前所述，您可以使用以下方式截取 TeamViewer 的屏幕截图：

```
osascript -e 'tell application "TeamViewer" to activate' && screencapture ~/Desktop/teamviewer.jpg 
```

但是，电子邮件服务器通常不信任来自非商业来源的电子邮件。所以我接收屏幕截图以使用 SCP 的解决方案。

```
scp [user]@host:/Users/[user]/Desktop/teamviewer.jpg ~/Desktop/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-10T22:07:36.403

尝试直接输入：/Applications/TeamViewer\ 8/TeamViewer.app/Contents/MacOS/TeamViewer，当然你需要在你的Mac上调整任何合适的，只是为了指定TeamViewer的位置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-21T09:27:42.587

linux 命令行支持在版本 11 中添加到 teamviewer。在无头系统中，您可以设置 teamviewer 并控制它们。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-11T21:12:54.057

我有时不得不在 OSx 上重置冻结的电视，并发现在最近的设置中我找到了一个文件夹 Applications/TeamViewerHost.app （仅作为根，否则它被隐藏）

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-02-18T11:20:56.770

重新启动守护程序后，某些进程未正确重新启动，在 ubuntu 14.04 中，我在重新启动 teamviewer 之前杀死了进程：

尝试类似：

```
sudo ps -afuwwwwwwx | grep -i "teamviewer" | sed -r "s/^([^\ ]+[\ ]+([0-9]+).+)$/\2/g" | xargs -i sudo kill {}

sudo teamviewer --daemon restart 
```

# android - 从 url 下载图像并在 android 的 LinearLayout 背景中设置？

> ID：14154604
> 
> 赞同：1
> 
> 时间：2013-01-04T09:41:15.193
> 
> 标签：android, image, background, android-linearlayout

我想从 url 下载图像并在线性布局的背景中设置，而不是在 android 的 imageview 中

在这里，我将我的代码用于从 url 下载图像，但现在我想在我的 LINER LAYOUT 背景中设置图像如何做到这一点

您可以在红色背景的图像中看到这是我想要设置此背景的布局背景动态从 url 加载

![在此处输入图像描述](../Images/5f06b0aaea798d1ec9c05caea32ac9f9.png)

**RestaurantActivity.java**

```
public class RestaurantActivity extends Activity implements OnClickListener  {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

             int loader = R.drawable.loader;

        Linearlayout middle =(Linearlayout)findviewbyid(R....);

        ImageLoader imgLoader = new ImageLoader(getApplicationContext());
        String profileimageurl=spreferences.getString("image", "");
        imgLoader.DisplayImage(profileimageurl, loader, imageprofile);

        } 
```

**ImageLoader.java**

```
public class ImageLoader {

    MemoryCache memoryCache=new MemoryCache();
    FileCache fileCache;
    private Map<ImageView, String> imageViews=Collections.synchronizedMap(new WeakHashMap<ImageView, String>());
    ExecutorService executorService; 

    public ImageLoader(Context context){
        fileCache=new FileCache(context);
        executorService=Executors.newFixedThreadPool(5);
    }

    int stub_id = R.drawable.ic_launcher;
    public void DisplayImage(String url, int loader, ImageView imageView)
    {
        stub_id = loader;
        imageViews.put(imageView, url);
        Bitmap bitmap=memoryCache.get(url);
        if(bitmap!=null)
            imageView.setImageBitmap(bitmap);
        else
        {
            queuePhoto(url, imageView);
            imageView.setImageResource(loader);
        }
    }

    private void queuePhoto(String url, ImageView imageView)
    {
        PhotoToLoad p=new PhotoToLoad(url, imageView);
        executorService.submit(new PhotosLoader(p));
    }

    private Bitmap getBitmap(String url)
    {
        File f=fileCache.getFile(url);

        //from SD cache
        Bitmap b = decodeFile(f);
        if(b!=null)
            return b;

        //from web
        try {
            Bitmap bitmap=null;
            URL imageUrl = new URL(url);
            HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
            conn.setConnectTimeout(30000);
            conn.setReadTimeout(30000);
            conn.setInstanceFollowRedirects(true);
            InputStream is=conn.getInputStream();
            OutputStream os = new FileOutputStream(f);
            Utils.CopyStream(is, os);
            os.close();
            bitmap = decodeFile(f);
            return bitmap;
        } catch (Exception ex){
           ex.printStackTrace();
           return null;
        }
    }

    //decodes image and scales it to reduce memory consumption
    private Bitmap decodeFile(File f){
        try {
            //decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f),null,o);

            //Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE=70;
            int width_tmp=o.outWidth, height_tmp=o.outHeight;
            int scale=1;
            while(true){
                if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                    break;
                width_tmp/=2;
                height_tmp/=2;
                scale*=2;
            }

            //decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } catch (FileNotFoundException e) {}
        return null;
    }

    //Task for the queue
    private class PhotoToLoad
    {
        public String url;
        public ImageView imageView;
        public PhotoToLoad(String u, ImageView i){
            url=u;
            imageView=i;
        }
    }

    class PhotosLoader implements Runnable {
        PhotoToLoad photoToLoad;
        PhotosLoader(PhotoToLoad photoToLoad){
            this.photoToLoad=photoToLoad;
        }

        public void run() {
            if(imageViewReused(photoToLoad))
                return;
            Bitmap bmp=getBitmap(photoToLoad.url);
            memoryCache.put(photoToLoad.url, bmp);
            if(imageViewReused(photoToLoad))
                return;
            BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad);
            Activity a=(Activity)photoToLoad.imageView.getContext();
            a.runOnUiThread(bd);
        }
    }

    boolean imageViewReused(PhotoToLoad photoToLoad){
        String tag=imageViews.get(photoToLoad.imageView);
        if(tag==null || !tag.equals(photoToLoad.url))
            return true;
        return false;
    }

    //Used to display bitmap in the UI thread
    class BitmapDisplayer implements Runnable
    {
        Bitmap bitmap;
        PhotoToLoad photoToLoad;
        public BitmapDisplayer(Bitmap b, PhotoToLoad p){bitmap=b;photoToLoad=p;}
        public void run()
        {
            if(imageViewReused(photoToLoad))
                return;
            if(bitmap!=null)
                photoToLoad.imageView.setImageBitmap(bitmap);
            else
                photoToLoad.imageView.setImageResource(stub_id);
        }
    }

    public void clearCache() {
        memoryCache.clear();
        fileCache.clear();
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T09:53:01.450

```
LinearLayout linearLayout=(LinearLayout)findViewById(R.id.yourLinearLayoutid);
        BitmapDrawable drawableBitmap=new BitmapDrawable(getBitmap(urlString));
        linearLayout.setBackgroundDrawable(drawableBitmap); 
```

获取位图的方法：

```
private Bitmap getBitmap(String url)
    {

        //from web
        try {
            Bitmap bitmap=null;
            URL imageUrl = new URL(url);
            HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
            conn.setConnectTimeout(30000);
            conn.setReadTimeout(30000);
            conn.setInstanceFollowRedirects(true);
            InputStream is=conn.getInputStream();
            OutputStream os = new FileOutputStream(f);
            Utils.CopyStream(is, os);
            os.close();
            bitmap = decodeFile(f);
            return bitmap;
        } catch (Exception ex){
           ex.printStackTrace();
           return null;
        }
    } 
```

以上是有助于为您的布局设置背景的代码......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:53:57.877

就个人而言，而不是将其传递`ImageView`给您的 ImageDownloader。我会创建一个界面。

```
interface ImageDownloadedCallback {
  void gotImage(Bitmap image);
} 
```

然后将图像传递回活动中的回调。

```
final Linearlayout middle =(Linearlayout)findviewbyid(R....);

ImageLoader imgLoader = new ImageLoader(getApplicationContext());
String profileimageurl=spreferences.getString("image", "");
imgLoader.DisplayImage(profileimageurl, loader, new ImageDownloadedCallback(){
  void gotImage(Bitmap bm){
    middle.setBackgroundDrawable(new BitmapDrawable(bm));
  }
}); 
```

这样，您可以在可以设置的内容上更加抽象。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-12-05T14:30:15.867

```
public static void setImagebackground(View view,String url) {
        try {
            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
            StrictMode.setThreadPolicy(policy);
            URL x2 = new URL(url);
            HttpURLConnection connection = (HttpURLConnection) x2.openConnection();
            connection.setDoInput(true);
            connection.connect();
            InputStream input = connection.getInputStream();
            Bitmap myBitmap = BitmapFactory.decodeStream(input);
            Drawable dr = new BitmapDrawable(myBitmap);
            view.setBackgroundDrawable(dr);
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

**用法**

```
LinerLayout layout = findViewById(R.id.layout);
setimageview(layout,"https://link/to/image.png"); 
```

# javascript - 只选择 Fileupload 的一个 onchange 事件

> ID：14154606
> 
> 赞同：0
> 
> 时间：2013-01-04T09:41:18.750
> 
> 标签：javascript, jquery, asp.net, file-upload

我有一个带有母版页的 asp.net 页面。我在子（有母版页）页面上有一个文件上传控件。我正在使用 jquery 的更改事件在子页面上进行文件上传。现在我想从母版页禁用文件上传控制。所以我正在使用这个脚本。

```
 function blockFileUpload() {
                $('input[type=file]').change(function () {
                    $('input[type=file]').val('');
                    alert("You Can Not Upload File. Files Storage (50 MB) Limit Reached. ");
                    $('input[type=file]').preventDefault();
                    return false;
                });
            } 
```

现在，当调用文件上传更改事件时，两个事件同时工作。那么如何禁用子页面的更改事件并仅挂钩母版页的 onchange 事件。

提前谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:53:02.173

首先取消绑定所有更改事件，然后分配新的更改事件。例如：

```
function blockFileUpload() {
                $('input[type=file]').unbind('change');
                $('input[type=file]').change(function () {
                    $('input[type=file]').val('');
                    alert("You Can Not Upload File. Files Storage (50 MB) Limit Reached. ");
                    $('input[type=file]').preventDefault();
                    return false;
                });
            } 
```

该代码取消绑定与文件输入相关的`$('input[type=file]').unbind('change');`所有事件。`change`

# java - 使用 compare 方法将多个单词与外部文件进行比较

> ID：14154610
> 
> 赞同：-1
> 
> 时间：2013-01-04T09:41:33.603
> 
> 标签：java, string, algorithm, search, if-statement

我有一个程序从 1 个文件中获取输入，将该文件中的每个单词保存为 arrayList 中的一个项目，然后在另一个文件中搜索每个单词。从那里我需要它来查看另一个字符串中的单词是否与搜索的单词在同一行。逻辑有点混乱，所以我举个例子：

这是第一个文件的输入：

```
Tuna, Salmon, Hake. 
```

然后它将每个项目保存到一个 arrayList 中：

```
{Tuna,Salmon,Hake} 
```

从那里它将搜索包含以下数据的文件：

```
It costs $5 for tuna that is seared and chunky.
We are out of stock on hake.
It costs $6 for sardines that are tinned.
It costs $4 for tuna that is seared. 
```

然后程序会搜索上面的文件，看到金枪鱼在第 1 行和第 4 行，鳕鱼在第 2 行，鲑鱼没有出现。

从这里我想要一个单词列表，例如：

```
Seared, chunky, out of stock. 
```

并比较此列表以查看它们是否与其他单词在同一行，以便打印出来：

```
Tuna is seared and chunky
Hake is out of stock
Tuna is seared 
```

到目前为止，我的代码可以完美运行，但它只适用于 1 个单词。我的代码示例如下：

```
while((strLine1 = br1.readLine()) != null){
            for(String list: listOfWords){
            Pattern p = Pattern.compile(list);
            Matcher m = p.matcher(strLine1);

    String strLine2 = "seared" ;      

        int start = 0;
        while (m.find(start)) {
            System.out.printf("Word found: %s at index %d to %d.%n", m.group(), m.start(), m.end());
            if(strLine1.contains(strLine2)){
               System.out.println(list + " is " + strLine2);
                        }
            start = m.end();
                }    
            }
          } 
```

所以这段代码将打印出来的是：

```
Tuna is seared (referring to line 1)
Tuna is seared (referring to line 4) 
```

我认为为了实现这一点，我可以在我的 if 语句中使用**and 或**或为 strLine2 尝试 arrayList，但对于后者，contains 方法无法将字符串与 arrayList 进行比较。

如果我的解释令人困惑，或者您对我如何实现目标有任何想法，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:54:36.053

我不确定，但我想你想找到你列表中的所有单词..并且在这一行

```
if(strLine1.contains(strLine2)){ 
```

您总是检查“烧焦”是否在实际行中，是否必须更改此行并搜索列表中的单词？

```
if(strLine1.contains(list)){ 
```

所以现在你明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:08:25.937

让它与 arrayList 和高级 for 循环一起使用。

```
String[] strLine2 = {"seared","chunky","out of stock"} ;      

        int start = 0;
        while (m.find(start)) {
            System.out.printf("Word found: %s at index %d to %d.%n", m.group(), m.start(), m.end());
            for(String lineWords: strLine2){
            if(strLine1.contains(lineWords)){
               System.out.println(list + " is " + lineWords);
                        }
            }
            start = m.end();

        } 
```

# android - Android 4.1.1 平板电脑上的文字转语音

> ID：14154620
> 
> 赞同：1
> 
> 时间：2013-01-04T09:42:14.153
> 
> 标签：android, text-to-speech

我是这个网站的新手，但已经做了多年的开发人员（Delphi、PHP、Lazarus）。一年前，我开始使用 Android（Java - Eclipse）进行开发，最近遇到了一个棘手的小问题。

我开发了一个使用文本到语音引擎的应用程序。它在我的 HTC Sensation、我妻子的 HTC Desire X 上运行良好，在我在 Eclipse/AVD Manager 中测试过的两个平板电脑模拟器上运行良好。

我最近将它安装在我的岳父联想 IdeaPad（Android 4.1.1）上，但它失败了。如果找不到，我会使用标准（ish）检查已安装的 TTS 引擎和自动安装程序。在 IdeaPad 上，它找不到已安装的（我已经检查过，它在那里）英语 TTS，而是启动了一个安装程序，可以选择安装法语、德语、西班牙语或意大利语 TTS 引擎。这会向我暗示它在某种程度上看到了英文版但没有使用它。

任何帮助将不胜感激。我已经在下面发布了相关的代码部分。

亲切的问候加里

```
private TextToSpeech mTts;
private static final int MY_DATA_CHECK_CODE = 1234; 
```

更多我的应用程序代码在这里

```
Intent checkIntent = new Intent();
checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
startActivityForResult(checkIntent, MY_DATA_CHECK_CODE); 
```

更多我的应用程序代码在这里

```
public void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (requestCode == MY_DATA_CHECK_CODE)
    {
        if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS)
        {
        mTts = new TextToSpeech(this, null, Str);
        }
        else
        {
            Intent installIntent = new Intent();
            installIntent.setAction(
                    TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
            startActivity(installIntent);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:22:38.323

Android 4.1 中的 TTS 资源检查似乎存在错误。这被报告为[问题 36430](http://code.google.com/p/android/issues/detail?id=36430)

我的经验是 TTS 从 Android 4.0 升级到 4.1 后停止在三星 S3 上工作。上面引用的报告给出了解决方法的提示，但我还没有检查解决方法。

# javascript - JS and methods in class emulation

> ID：14154625
> 
> 赞同：2
> 
> 时间：2013-01-04T09:42:42.123
> 
> 标签：javascript, html, oop

I am new to this so I'll try to be as detailed as possible.

I am creating a JS class using functions.

```
function Bandstar(p, id)
{
  var numberOfSides, Xcenter, Ycenter;
  var canvas;
  var circlesInt;
  var linesInt;
  var lines;
  var linesInt2;
  var linesMidToEdge; 
..... 
```

When it comes to methods, I just declare them like this:

```
this.IAset = function(a) 
{
   for (var i =0; i<= this.numberOfSides-1;i++)
   {
      if (parseInt(a[i]) == a[i])
         this.circles[i].value = a[i];
      else
         return false;
    }

    this.IArepaint();
    return true
} 
```

and that's pretty much it.

The problem now is that, when I am creating a specific method:

```
this.moveFunc = function(e)
{
   var p = e.target;
   this.IAmove(p);
}; 
```

with the method `IAmove` being declared as follows:

```
this.IAmove = function(p)
{
   var m = (p.oTop - this.Ycenter ) / (p.oLeft - this.Xcenter);
   var linea = m * ( p.left - p.oLeft) + p.oTop;
   var ejeX = p.left;
   ...
} 
```

The compiler just keeps throwing this error:

```
Uncaught TypeError: Object function (e)   {     var p = e.target;     this.IAmove(p);   } has no method 'IAmove' 
```

So, the thing is that I am declaring `moveFunc` as a function but then when I try to get to use `this` property, it doesn't actually use the instance of the class above it, (`Bandstar`), but of itself (and obviously `moveFunc` doesn't have a method called `IAmove`, the class on which it is being created is)...

I thought this was just like it worked, but I must not be getting the concept of heritage and class morphology in JS right.

How can I access a method in a class from another method inside that same class? If I just write `IAmove(p)` it will just say the method `IAmove()` is undefined (because it isn't, it's part of the Bandstar namespace.

I know it must be something stupid that I'm not seeing. Any suggestions?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T09:48:42.587

The context inside your function may change based on your call. So `this` could not be the original object.

You should add a private var like:

```
 function Bandstar(p, id)
{
  var numberOfSides, Xcenter, Ycenter;
  var canvas;
  var that = this; // add this line 
```

and use it when you try to call function (or get properties) of original object

```
this.moveFunc = function(e)
  {
    var p = e.target;
    that.IAmove(p); // change this line
  }; 
```

for be sure to point to original object.

EDIT: According with comments you can read more infos in [Stuart's answer](https://stackoverflow.com/questions/14154625/js-and-methods-in-class-emulation/14154837#14154837)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:56:04.970

Assuming all of those methods are defined in the constructor **the syntax is correct**. The following [fiddle](http://jsfiddle.net/2VfFr/) illustrates it working, the code is based on a simplified version of your code...

```
function Test() {
    this.move = function(p) {
        document.write("Moved to: " + p);
    };
    this.another = function(e) {
        this.move(e.target);
    };
}

var test = new Test();
test.another({target: "The moon"}); 
```

The cause of the issues is likely to be one of ~~two~~ three things:

1.  How the method `moveFunc` is called
2.  When the method `moveFunc` is called
3.  How the method `IAmove` is called (it may not be the `moveFunc` function that is causing that error).

The `this` keyword will reference the scope of the function which is typically the owner of the method...

```
var bandstar = new Bandstar(p, id);
bandstar.moveFunc(e); // this should be bandstar 
```

The only reasons that might not be the case is if you are explicitly binding the `moveFunc` function to another object or a more common situation is that the function is being called without being attached to the owner...

```
var bandstar = new Bandstar(p, id);
var moveFunc = bandstar.moveFunc(e);
moveFunc(e); // this will now be window 
```

The `this` keyword will default to `window` if the owner is detached from it. You can bind the function using.

```
var bandstar = new Bandstar(p, id);
var moveFunc = bandstar.moveFunc(e);
moveFunc.bind(bandstar);
moveFunc(e); // this will now be bandstar again 
```

In the second issue both methods must be defined in the constructor before the `moveFunc` function can be called

```
this.moveFunc = function(e) { ... }
this.moveFunc(e); // Will throw an error that IAmove does not exist in the object
this.IAmove = function(p) { ... } 
```

You can log the `this` object using `console.log(this);` to find out what it is.

It looks as though from your error that you are trying to call `IAmove` on the `moveFunc` function. For this error to be caused you would need to have called `moveFunc` with itself as the owner or the bound object... Which is not a particularly likely.

I have a hunch that the error may not actually be related to the `this.IAmove(p);` call in the `moveFunc` as assumed. **Post the stack trace** and we can use that to find where the error occurred.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T09:56:32.317

You probably wants to add these methods to **your `Bandstar` prototype**.

```
function Bandstar(p, id)
{
   // ...
}

Bandstar.prototype.IAset = function(a) 
{
   // ...
}

Bandstar.prototype.moveFunc = function(e)
{
   var p = e.target;
   this.IAmove(p);
}; 
```

This way your methods keep the Bandstar context, and `this` will remain Bandstar instance reference.

Have a look at [**Object.prototype** reference](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/prototype)

# web-services - 如何使用 Eclipse IDE 在 Java 中创建启用 MTOM 的 Web 服务客户端

> ID：14154629
> 
> 赞同：1
> 
> 时间：2013-01-04T09:42:58.600
> 
> 标签：web-services, apache, mtom

我正在使用 cxf 2.0 网络服务。我正在发布一个网络服务，它将文件作为附件作为响应发送。为此，我使用 spring 配置将启用的 Web 服务 MTOM 设置为 TRUE。现在我想使用 Eclipse IDE 生成一个 Web 服务客户端，它将使用上面的 Web 服务。那么我怎样才能使这个 Web 服务客户端能够接收附件呢？

# android - Phonegap Android应用程序重新启动而不是恢复

> ID：14154635
> 
> 赞同：-1
> 
> 时间：2013-01-04T09:43:20.263
> 
> 标签：android, cordova

这个问题在这里被问了 3 次，但没有答案。

我在 android 设备 2.3.6 (Galaxy SII) 上使用 Phonegap 2.1 我也在使用 AdMob Phonegap 插件。

那么问题与其他人所说的相同：

*   当尝试通过应用程序图标恢复时，即使应用程序在内存中，它也会重新启动
*   通过任务管理器时，它会正常恢复

**我的主要活动**

```
public class testApp extends DroidGap 
{

    @Override
    public void onCreate(Bundle savedInstanceState)
    {

        super.onCreate(savedInstanceState);
        super.setIntegerProperty("splashscreen", R.drawable.splash);
        setIntegerProperty("loadUrlTimeoutValue", 60000);
        super.loadUrl("file:///android_asset/www/index.html",5000);

    }
} 
```

**清单.xml**

```
<application android:icon="@drawable/icon" android:label="@string/app_name"
    >
    <activity android:name="testApp" android:label="@string/app_name"
            android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale"
            android:windowSoftInputMode="adjustPan">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="com.google.ads.AdActivity"
              android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"
              />
</application> 
```

谢谢你的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-24T10:25:46.717

如果您在设置应用程序的开发人员选项部分中选择了“不保留活动”，那么无论您将清单配置为什么，所有活动都将在用户不使用时被销毁。这适用于 PhoneGap 应用程序和本机应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:45:08.193

放置`android:launchMode="standard"`在`testApp`活动清单中

# javascript - 如何设置格式 HH:mm

> ID：14154637
> 
> 赞同：0
> 
> 时间：2013-01-04T09:43:40.157
> 
> 标签：javascript, jquery, asp.net-mvc, internet-explorer

js：

```
$(".time").timeEntry({ show24Hours: true }); 
```

html:

```
<td>@Html.TextBox("TimeFrom", Model.TimeFrom.ToString(), new {@class = "time"})</td> 
```

我看到格式 HH:mm:ss，我需要 HH:mm

![在此处输入图像描述](../Images/e5ee69fcf032c2770e03547186436497.png)

这是怎么做的？

浏览器 IE9

我创建测试视图：

```
@model DateTime
@{
    Layout = null;
}

<link href="@Url.Content("~/Content/themes/base/jquery.timeentry.css")"  rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/jquery/jquery-1.8.2.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery/jquery.timeentry.min.js")" type="text/javascript"></script>

<script type="text/javascript">
    $(function () {
        $(".time").timeEntry({ show24Hours: true, showSeconds: false });
    });
</script>
@Html.TextBox("TimeFrom", Model.ToString(), new { @class = "time" }) 
```

timeEntry 只有在焦点之后才起作用

我使用[http://keith-wood.name/timeEntry.html](http://keith-wood.name/timeEntry.html)最新版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:48:12.960

像这样？

```
$(".time").timeEntry({ show24Hours: true, showSeconds: false }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:49:54.977

尝试这个

```
$(".time").timeEntry({ show24Hours: true, showSeconds: false }); 
```

根据[文档](http://keith-wood.name/timeEntry.html)..在快速参考中你可以看到

```
showSeconds: false, // True to show seconds as well, false for hours/minutes only 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:30:45.570

您是否尝试过设置初始文本框值的格式？

```
@Html.TextBox("TimeFrom", Model.ToString("HH:mm"), new { @class = "time" }) 
```

这个对我有用。

# jquery - 剑道网格不工作

> ID：14154638
> 
> 赞同：-2
> 
> 时间：2013-01-04T09:43:43.357
> 
> 标签：jquery, asp.net-mvc, razor, kendo-ui

我在使用 asp.net mvc 4 开始剑道网格时遇到了麻烦。我有控制器方法，它正在传递数据以查看效果很好，但我试图在剑道网格中查看。我通过 ManageNuGet 添加了参考。

这是我的代码

```
 public ActionResult createNewStore()
    {
        return View();
    }

    [HttpPost]
    public ActionResult createNewStore(Store storeModel)
    {
          var db = new AppContext();

           var Store = new Store { address = storeModel.address, postcode = storeModel.postcode, city = storeModel.city, Country = storeModel.Country };
           db.Stores.Add(Store);
           db.SaveChanges();

        return View();
    }

    public ActionResult viewStores()
    {
        var db = new AppContext();

        var query = from b in db.Stores
                    orderby b.storeID
                    select b;

        return View(query.ToList());

    }

    public void Delete()
    {
    } 
```

## 查看代码

```
@model IEnumerable <MyProject_04.Models.Store>

@{
   ViewBag.Title = "viewStores";
 }

 <link href="~/Content/kendo/2012.3.1114/kendo.common.min.css" rel="stylesheet" />
 <link href="~/Content/kendo/2012.3.1114/kendo.default.min.css" rel="stylesheet" />
 @Scripts.Render("~/bundles/jquery")
 <script src="~/Scripts/kendo/2012.3.1114/kendo.web.min.js"></script>

  <script type="text/javascript">

   $(function () {
     $(".delete-link").click( function(e){
        e.preventDefault();
        if (confirm("do you want to delete record?")) {
            $(this).closest("tr").hide("slow");
        }
        return false;
    });

           $("#grid").kendoGrid();
   });

  </script>

  <h2>View All the list of stores</h2>

   <table id="grid">
    <thead> 
     <tr>
      <th>Store ID</th>
      <th>Address</th>
      <th>post Code</th>
      <th>City</th>
      <th>Country</th>
      <th>Action</th>
     </tr>
    </thead>

   <tbody>
     @foreach (var item in Model)
      {
        <tr>
         <td>@Html.DisplayFor(modelItem=> item.storeID)</td>
         <td>@Html.DisplayFor(modelItem=> item.address)</td>
         <td>@Html.DisplayFor(modelItem=> item.postcode)</td>
         <td>@Html.DisplayFor(modelItem=> item.city)</td>
         <td>@Html.DisplayFor(modelItem=> item.Country)</td>
         <td>@Html.ActionLink("Delete", "Delete", new { id = item.storeID }, new { @class ="delete-link"})</td>
          </tr>
       }
    </tbody>
  </table> 
```

* * *

```
 <!DOCTYPE html>
   <html lang="en">
   <head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title - My ASP.NET MVC Application</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <meta name="viewport" content="width=device-width" />
    @Styles.Render("~/Content/css")
      <link href="~/Content/kendo/2012.3.1114/kendo.common.min.css" rel="stylesheet" />
    <link href="~/Content/kendo/2012.3.1114/kendo.default.min.css" rel="stylesheet" />
    @Scripts.Render("~/bundles/modernizr")

</head>
<body>
    <div id="container">

     <!--------------Header------------------->
    <div id="header">
        <div class="content-wrapper">
            <div class="float-left">
                <p class="site-title">@Html.ActionLink("MVC Movie", "Index", "Home")</p>
            </div>
        </div>
 </div>

     <!--------------Body------------------->          
  <div id="body">
      @Scripts.Render("~/bundles/jquery")
      <script src="~/Scripts/kendo/2012.3.1114/kendo.web.min.js"></script>

       @RenderSection("featured", required: false)
       <section class="content-wrapper main-content clear-fix">

             @RenderBody()
       </section>

  </div>

     <!--------------Footer------------------->
   <div id="footer">
        <div class="content-wrapper">
            <div class="float-left">
                <p>&copy; @DateTime.Now.Year - My ASP.NET MVC Application</p>
            </div>
        </div>
   </div>
   </div>

    @Scripts.Render("~/bundles/jquery")
    @RenderSection("scripts", required: false)
</body>
 </html> 
```

我已经更改了我的默认布局，但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T23:23:46.167

是的，那是一团糟。仅将 @Scripts.Render、脚本引用和样式表链接放在 _Layout 视图的 HEAD 中。完成后，MVC 应该看起来非常干净和简单。

至于剑道部分。我知道他们的文档和示例可能会更好，事实上他们的示例通常是最糟糕的方法。但是，请在此站点上搜索人们遇到的其他示例和问题。我认为您可能错过了剑道网格的要点，需要从头开始。获取一个简单的示例，使其工作，然后对其进行扩展。

祝你好运，编码愉快。

# android - facebook api 与 android

> ID：14154639
> 
> 赞同：0
> 
> 时间：2013-01-04T09:43:46.100
> 
> 标签：android

我是 facebook api 和 android 的新手。但是以某种方式尝试管理登录到我的 facebook 帐户并检索我的帐户的一些信息，即 id、first_name、last_name。用于创建此应用程序的 sdk(android) 是 sdk(android) 8 级，但是当我使用 sdk(android) 级别 >8 应用程序崩溃并在 logcat(networkonmainthreadException) 上生成错误时。我做了一些搜索，发现这是 sdk 级别的线程问题，现在我要去 Asynctask，但对去哪里感到困惑输入 facebook 的登录代码，什么东西会返回到 mainactivity

我的 sdk 8 级代码是：-

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_test);
        loginnfetch=(Button) findViewById(R.id.button1);
        loginnfetch.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                facebook=new Facebook(APP_ID);
                restorecredential(facebook);
                if(!facebook.isSessionValid())
                {
                    loginandfetch();
                }
                else
                {
                    fetch();
                }
            }
        });
    }

    protected void fetch() 
    {
        try {
            JSONObject jobj=new JSONObject(facebook.request("me"));
            int id=jobj.getInt("id");
            String fname=jobj.getString("first_name");
            String lname=jobj.getString("last_name");
            //String emailid=jobj.getString("email");
            Toast.makeText(getApplicationContext(), ".."+id+".."+fname+".."+lname, 0).show();
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    protected void loginandfetch() 
    {
        facebook.authorize(this, PERMISSIONS, Facebook.FORCE_DIALOG_AUTH,new DialogListener() {

            @Override
            public void onFacebookError(FacebookError e) 
            {
                Toast.makeText(getApplicationContext(), "ERROR WHILE LOGIN", 0).show();

            }

            @Override
            public void onError(DialogError e) {
                Toast.makeText(getApplicationContext(), "ERROR WHILE LOGIN", 0).show();

            }

            @Override
            public void onComplete(Bundle values) {
                saveCredentials(facebook);
                fetch();
            }

            @Override
            public void onCancel() {

                Toast.makeText(getApplicationContext(), "ERROR WHILE LOGIN", 0).show();

            }
        });

    }

    protected boolean restorecredential(Facebook facebook2) 
    {
        SharedPreferences sharedPreferences = getApplicationContext()
                .getSharedPreferences(KEY, Context.MODE_PRIVATE);
        facebook.setAccessToken(sharedPreferences.getString(TOKEN, null));
        facebook.setAccessExpires(sharedPreferences.getLong(EXPIRES, 0));
        return facebook.isSessionValid();

    }
    public boolean saveCredentials(Facebook facebook) {
        Editor editor = getApplicationContext().getSharedPreferences(KEY,
                Context.MODE_PRIVATE).edit();
        editor.putString(TOKEN, facebook.getAccessToken());
        editor.putLong(EXPIRES, facebook.getAccessExpires());
        return editor.commit();
    } 
```

如果可用，请分享一些代码或一些链接，谢谢，如果有什么不正确，请见谅

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:47:03.093

从 ICS 及以上版本 Android 将不允许在 UI 线程中进行任何网络操作。它应该在单独的线程中完成，这样它就不会挂起 UI。在单独的线程中尝试您的网络通信代码。
在您的情况下，使用线程获取 facebook 信息。

尝试这个 ：：

```
if(!facebook.isSessionValid())
{
        new Thread(new Runnable() {
            @Override
            public void run() {
                loginandfetch();
            }
        }).start();
}
else
{
        new Thread(new Runnable() {
            @Override
            public void run() {
                fetch();
            }
        }).start();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:14:10.277

我已经在 Facebook 上发布了状态，如下所示。你可以尝试这样的事情来解决你的问题：（Facebook api 3.02b）

```
Request.Callback callback= new Request.Callback() {                 
    public void onCompleted(Response response) {
        FacebookRequestError error = response.getError();
        if (error != null) {
            Toast.makeText(context, "Failed to Post", Toast.LENGTH_LONG).show();
        } else {
            Toast.makeText(context, "Successfully Posted", Toast.LENGTH_LONG).show();
        }
    }
};
Request request = new Request(session, victimId+"/feed", bundle, 
                                  HttpMethod.POST, callback);

RequestAsyncTask task = new RequestAsyncTask(request);
task.execute(); 
```

# pyqt4 - 如何在pyqt中为Qtables创建组合过滤器

> ID：14154642
> 
> 赞同：0
> 
> 时间：2013-01-04T09:44:01.997
> 
> 标签：pyqt4, qtableview

在stackoverflow关注者的帮助下，我得到了以下代码片段。

我现在可以过滤表格。但是当我尝试过滤它时，它首先排序，因为我为视图启用了排序。

我想以这样的方式创建 QTableview，如果我单击标题，它应该排序。并且应该在每个标题的右侧有一个下拉框（可能是组合框样式）。我正在上传我想要的快照（我在 .NET 中制作的）

**代码片段**

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtCore, QtGui

class myWindow(QtGui.QMainWindow):
    def __init__(self, parent=None):
        super(myWindow, self).__init__(parent)
        self.centralwidget  = QtGui.QWidget(self)
        self.view           = QtGui.QTableView(self.centralwidget)
        self.view.setSortingEnabled(True)
        self.gridLayout = QtGui.QGridLayout(self.centralwidget)
        self.gridLayout.addWidget(self.view, 1, 0, 1, 3)

        self.setCentralWidget(self.centralwidget)

        self.model = QtGui.QStandardItemModel(self)

        for rowName in range(3) * 5:
            self.model.invisibleRootItem().appendRow(
                [   QtGui.QStandardItem("row {0} col {1}".format(rowName, column))    
                    for column in range(3)
                    ]
                )
        self.proxy = QtGui.QSortFilterProxyModel(self)
        self.proxy.setSourceModel(self.model)

        self.view.setModel(self.proxy)

        self.horizontalHeader = self.view.horizontalHeader()
        self.horizontalHeader.sectionClicked.connect(self.horizontalHeader_Clicked)

    @QtCore.pyqtSlot(int)
    def horizontalHeader_Clicked(self, logicalIndex):
        self.logicalIndex   = logicalIndex
        # local variable, and no parent
        menuValues = QtGui.QMenu()
        # delete the previous one
        try:
            self.signalMapper.deleteLater()
        except:
            pass

        self.signalMapper = QtCore.QSignalMapper(self)  

        valuesUnique = [    
            self.proxy.index(row, self.logicalIndex).data().toString()
            for row in xrange(self.proxy.rowCount())
            ]

        print 'printing col %d values' % self.logicalIndex                            
        for row in range(self.proxy.rowCount()):
            print 'row %d Item %s' % (row,self.model.item(row,     self.logicalIndex).text())

        actionAll = QtGui.QAction("All", self)
        actionAll.triggered.connect(self.actionAll)
        menuValues.addAction(actionAll)
        menuValues.addSeparator()

        for actionNumber, actionName in enumerate(sorted(list(set(valuesUnique)))):              

            action = QtGui.QAction(actionName, self)
            self.signalMapper.setMapping(action, actionNumber)  
            action.triggered.connect(self.signalMapper.map)  
            menuValues.addAction(action)

        self.signalMapper.mapped.connect(self.signalMapper_mapped)  

        headerPos = self.view.mapToGlobal(self.horizontalHeader.pos())        

        posY = headerPos.y() + self.horizontalHeader.height()
        posX = headerPos.x() + self.horizontalHeader.sectionPosition(self.logicalIndex)

        menuValues.exec_(QtCore.QPoint(posX, posY))

    @QtCore.pyqtSlot()
    def actionAll(self):
        filterColumn = self.logicalIndex
        filterString = QtCore.QRegExp(  "",
                                    QtCore.Qt.CaseInsensitive,
                                    QtCore.QRegExp.RegExp
                                    )

        self.proxy.setFilterRegExp(filterString)
        self.proxy.setFilterKeyColumn(filterColumn)

    @QtCore.pyqtSlot(int)
    def signalMapper_mapped(self, i):
        stringAction = self.signalMapper.mapping(i).text()
        filterColumn = self.logicalIndex
        filterString = QtCore.QRegExp(  stringAction,
                                    QtCore.Qt.CaseSensitive,
                                    QtCore.QRegExp.FixedString
                                    )

        self.proxy.setFilterRegExp(filterString)
        self.proxy.setFilterKeyColumn(filterColumn)

if __name__ == "__main__":
    import sys

    app  = QtGui.QApplication(sys.argv)
    main = myWindow()
    main.show()
    main.resize(400, 600)
    sys.exit(app.exec_()) 
```

这就是我想要得到的（排序和过滤）

![在此处输入图像描述](../Images/dd8b0aed0d8a500b17df4de5dd94ea3d.png)

如果可能的话，我需要能够为选定的列设置过滤器，如上图所示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:43:04.107

这里有一个关于同一主题的讨论位置： [QHeaderView's columns 中 QWidget 的快速方法？](http://www.qtcentre.org/threads/27077-Quick-way-for-QWidget-in-QHeaderView-s-columns)

他们建议您需要放弃`QHeaderView`视图中的库存，并为标题功能提供您自己的自定义小部件，以便将自定义小部件放入标题部分。

# ios - 将列添加到 Rubymotion Tableview

> ID：14154643
> 
> 赞同：1
> 
> 时间：2013-01-04T09:44:02.357
> 
> 标签：ios, uitableview, rubymotion, ipad

我正在使用 Rubymotion 创建一个基本的 iPad 应用程序。有没有办法直接向 UITableView 添加列，我在这个链接上找到了一个使用 Objective-c 的添加列

[http://usxue.is-programmer.com/posts/14176.html](http://usxue.is-programmer.com/posts/14176.html)

此代码使用 addColumn 方法在单元格中创建一个网格。

如何在 RubyMotion 中使用此方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T00:35:51.097

就像他们一样继承 UITableViewCell ：

```
def MyTableCell < UITableViewCell 
  def addColumn(position)
    # Add their example code here
  end
  # Etc
end 
```

...我不会为你做这件事，但你明白了。只需将 Obj-C 转换为 RubyMotion。他们在那里给你一个非常完整的例子。

如果您的目标是 iOS 6+，则有一个名为 UICollectionView 的新对象，它也可以为您提供您想要创建的功能：

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UICollectionView_class/Reference/Reference.html)

# .net - 表示集合属性时的最佳实践没有项目

> ID：14154644
> 
> 赞同：0
> 
> 时间：2013-01-04T09:44:03.167
> 
> 标签：.net, ooad

当集合属性（类型为“IList”或数组）时，如果没有元素，它应该为空还是应该表示为一个空集合（即长度为零）

例如

```
public class Teacher
{
  public List<Student> Students = null // to represent absence of items
} 
```

或者

```
public class Teacher
{
   public List<Student> Students = new List<Student>() // Initialize the collection.
} 
```

围绕这个的最佳做法是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T09:46:24.270

在大多数情况下，这应该是一个空列表。这将简化您的逻辑，因为您不必在使用列表的任何地方进行空检查。

例如，如果您想查看列表是否包含元素“Test”，您可以这样做：

```
if (myList.Contains("Test")) 
```

而不是必须写

```
if( myList != null && myList.Contains("Test")) 
```

这也是 LINQ 对其扩展方法所做的：如果没有元素，则返回一个空的 IEnumerable，而不是 null。当然，能够链接这些方法调用也很重要。

当然，在某些情况下，您希望列表为空以指示特定的内容，但在大多数情况下，您通过初始化它是在帮自己一个忙。这样你会看到更少的空指针异常；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:52:17.667

它们可以有完全不同的含义，因此由您（和您的要求）决定什么是正确的代码。

没有学生的老师 ( ) 与没有学生的老师 ( `Students = null`) 是一样的`Students.Count == 0`。在数据库术语中，一个相当于`null`列的 value，另一个是 value `0`。

但是，如果这些情况是等价的，那么恕我直言，最好这样做

```
public List<Student> Students = new List<Student>(); 
```

因为当您对属性进行操作`.Count`时它不会抛出。`.Where`

顺便说一句，一定要让它成为一个属性，公共可变集合字段调试起来肯定很有趣。

# objective-c - CIContext drawImage:inRect:fromRect: 缩放

> ID：14154645
> 
> 赞同：1
> 
> 时间：2013-01-04T09:44:08.237
> 
> 标签：objective-c, macos, core-image

我正在使用`CIContext`方法`- (void)drawImage:(CIImage *)im inRect:(CGRect)dest fromRect:(CGRect)src`将图像绘制到屏幕上。但我需要实现放大/缩小方法。我怎样才能实现它？我认为放大可以实现增加`dest`矩形，因为苹果文档说：

```
The image is scaled to fill the destination rectangle. 
```

但是缩小呢？因为如果`dest`按比例缩小矩形，则图像会以其实际大小绘制，但只有部分图像可见（适合`dest`矩形的部分）。

你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T22:07:36.853

Take a look at this little [toy app I made](https://github.com/foundry/drawingtest)

It's to demonstrate the NSImage version of your CIContext method:

```
- (void)drawInRect:(NSRect)dstRect 
          fromRect:(NSRect)srcRect 
         operation:(NSCompositingOperation)op 
          fraction:(CGFloat)delta 
```

I did this to find out exactly how the rects relate to each other. It's interactive, you can play with the sliders and move/zoom the images. Not a solution, but it might help you work things out.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T19:35:29.380

您可以在绘制之前使用 CIFilter 调整 CIImage 的大小。Quartz Composer 提供了一个使用这个过滤器的好例子。只需在 QC 中查找图像调整大小过滤器的描述。

**编辑：** 另一个很好的缩放过滤器是 CILanczosScaleTransform。有一个[片段](http://josealobato.tumblr.com/post/6615949941/cocoa-snippet-image-resize-with-ci)展示了基本用法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T09:21:45.020

您可以尝试使用[它](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/)来调整图像大小（缩放）。希望这对您有所帮助。

# c# - 当 SessionStateBehavior.ReadOnly 在控制器上设置时，为什么我仍然可以写入会话，我应该关心吗？

> ID：14154653
> 
> 赞同：6
> 
> 时间：2013-01-04T09:44:30.890
> 
> 标签：c#, .net, asp.net-mvc-4, session-state

我有许多设置了 SessionStateBehavior.ReadOnly 的控制器，以启用多个 ajax 请求的并行处理。

但是我注意到这并不能阻止我写入会话（与 SessionStateBehavior.Disabled 不同，它会引发异常）。

我的应用程序使用 Microsoft Charting，并且图表和图像映射是响应 ajax 请求生成的，图表存储在会话中，直到浏览器呈现图像标记，此时图像 src 触发浏览器请求图表图像从会话中检索。因此，在写入之前尝试从会话中读取没有问题。

一切正常，我有多个 ajax 请求被并行处理，并且我的图表被正确返回，所以我在写入会话时声明 SessionStateBehavior.ReadOnly 是否重要？

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Web.Mvc;
using System.Web.UI.DataVisualization.Charting;
using Mdl.Rcm.Web.Areas.Dashboards.Models;
using Mdl.Web.Security;
using Mdl.Persistence.UoW;
using Mdl.Rcm.Business.Dashboards;
using Mdl.Rcm.Business.Dashboards.Models;
using Mdl.Rcm.Web.Areas.Dashboards.Charts;
using Mdl.Rcm.Web.Areas.Dashboards.Charts.OrganisationConnectionsByRole;
using Mdl.Web.Mvc;

namespace Mdl.Rcm.Web.Areas.Dashboards.Controllers
{
    /// <summary>
    /// Controller for the Organisation Connections By Role chart.
    /// </summary>
    [SessionState(System.Web.SessionState.SessionStateBehavior.ReadOnly)]
    [RedirectingAuthorize(Roles = "Dashboards")]
    [Area(IsSiteRoot = false)]
    public class ChartOrganisationConnectionsByRoleController : Controller
    {
        private readonly IRelationshipAndRiskService relationshipAndRiskService;
        private readonly IConfigurationService configurationService;
        private readonly IOrganisationConnectionsByRoleChartBuilder chartBuilder;
        private readonly IListService listService;
        private BarConfiguration barConfiguration;
        private const string TempDataKey = "OrganisationConnectionsByRoleData";

        public ChartOrganisationConnectionsByRoleController(IOrganisationConnectionsByRoleChart organisationConnectionsByRoleChart, IRelationshipAndRiskService relationshipAndRiskService, IConfigurationService configurationService, IOrganisationConnectionsByRoleChartBuilder chartBuilder, IListService listService)
        {
            this.relationshipAndRiskService = relationshipAndRiskService;
            this.configurationService = configurationService;
            this.chartBuilder = chartBuilder;
            this.listService = listService;
        }

        /// <summary>
        /// Standard Organisation Connections by Role component loader
        /// </summary>
        /// <param name="listId">The list id.</param>
        /// <param name="degree">The active degree.</param>
        /// <param name="barIndex">Index of the active bar.</param>
        /// <returns></returns>
        [HandleAjaxError]
        public ActionResult Load(int listId, int degree, int barIndex)
        {
            using (UnitOfWork.Start("Analysis"))
            {
                // Get the data
                var relationshipPlanningData = GetChartDataForInitialLoadParentComponent(listId);

                var connectionsFound = relationshipPlanningData.SeriesModels.Count > 0;

                var listName = listService.GetListName(listId).Name;

                var information = new InformationModel(degree, true) { ConnectionsFound = connectionsFound, NumberOfOrganisationsInList = relationshipPlanningData.TotalNumberOfOrganisations, ListName = listName };

                return PartialView("OrganisationConnectionsByRoleComponent", new OrganisationConnectionsByRoleComponentModel { ListId = listId, ActiveDegree = degree, ActiveBarIndex = barIndex, BarConfiguration = configurationService.GetBarConfiguration(), ConnectionsFound = connectionsFound, Information = information});
            }
        }

        /// <summary>
        /// Creates the Connections by Role chart and stores it in Session then returns the chart map.
        /// The chart image map is always created first, the chart is created as part of the process of creating the map.
        /// </summary>
        /// <returns></returns>
        public ActionResult Chart(Guid chartId, int listId)
        {
            using (UnitOfWork.Start("Analysis"))
            {
                barConfiguration = configurationService.GetBarConfiguration();

                var relationshipPlanningData = GetChartDataForInitialLoadChart();

                if (relationshipPlanningData.SeriesModels.Count == 0)
                {
                    return PartialView("InfoMessage", "No connections found");
                }

                // Set up the chart
                return GenerateChart(relationshipPlanningData, listId, chartId);
            }
        }

        private ActionResult GenerateChart(OrganisationConnectionsByRoleData relationshipPlanningData, int listId, Guid chartId)
        {
            var chartAndXPoints = chartBuilder.BuildChart(2, relationshipPlanningData, barConfiguration, SetActiveBarIndex(-1), listId);

            // Store the chart in session for retrieval by the browser as the src on an image tag.
            ChartSession.GenerateChartToSession(chartId, chartAndXPoints.Chart, Session);

            // Get y data for use client side
            var yPointsDataView = GetYPointsDataView(relationshipPlanningData);

            // Get x co-ordinates for use client side. Must be done after the chart has been generated to session.
            var xPointsView = GetXPointsView(chartAndXPoints.XPoints);

            // Render the image tag and image map
            return this.Chart(chartAndXPoints.Chart, xPointsView + yPointsDataView, chartId, "ConnectionsByRoleImage");
        }

        /// <summary>
        /// Gets the chart data for use by the main component.
        /// </summary>
        /// <param name="listId">The list id.</param>
        /// <returns></returns>
        private OrganisationConnectionsByRoleData GetChartDataForInitialLoadParentComponent(int listId)
        {
            // This is the call from the load action so get the data and store it for use by the chart action to save the performance hit
            var data = relationshipAndRiskService.GetOrganisationConnectionsByRoleChartData(listId);
            TempData[TempDataKey] = data;

            return data;
        }

        /// <summary>
        /// Gets the chart data for use by the main component chart.
        /// </summary>
        /// <returns></returns>
        private OrganisationConnectionsByRoleData GetChartDataForInitialLoadChart()
        {
            // This call is from the chart action so use the data that was retreived on the load action
            return (OrganisationConnectionsByRoleData)TempData[TempDataKey];
        }

        /// <summary>
        /// Return the Connections By Role chart from session.
        /// </summary>
        /// <returns></returns>
        public ActionResult ConnectionsByRoleImage(Guid chartId)
        {
            var chart = ChartSession.GetChartFromSession(chartId, Session);
            return File(chart, "image");
        }

        /// <summary>
        /// Return the Connections By Role chart from session.
        /// </summary>
        /// <param name="listId">The list id.</param>
        /// <param name="degree">The active degree.</param>
        /// <param name="barIndex">Index of the active bar.</param>
        /// <returns></returns>
        public ActionResult ConnectionsByRoleActive(int listId, int degree, int barIndex)
        {
            using (UnitOfWork.Start("Analysis"))
            {
                barConfiguration = configurationService.GetBarConfiguration();

                // Get the data
                var relationshipPlanningData = relationshipAndRiskService.GetOrganisationConnectionsByRoleChartData(listId);

                if (relationshipPlanningData.SeriesModels.Count == 0)
                {
                    return PartialView("InfoMessage", "No connections found");
                }

                 // Set up the chart
                var chartAndXPoints = chartBuilder.BuildChart(SetActiveDegree(degree), relationshipPlanningData, barConfiguration, SetActiveBarIndex(-1), listId);

                var ms = new MemoryStream();
                chartAndXPoints.Chart.SaveImage(ms, ChartImageFormat.Png);

                return File(ms.ToArray(), "image");
            }
        }

        /// <summary>
        /// Gets the graph X points and render them as a javascript object for use by the view.
        /// </summary>
        /// <param name="xPoints">The x points.</param>
        /// <returns></returns>
        private string GetXPointsView(List<float> xPoints)
        {
            var model = new XPointsModel
            {
                ChartName = "Connections By Role",
                Points = xPoints
            };

            return this.ViewAsString("XPoints", model);
        }

        /// <summary>
        /// Gets the Y points data and render them as a javascript object for use by the view.
        /// </summary>
        /// <param name="relationshipPlanningData">The relationship planning data.</param>
        /// <returns></returns>
        private string GetYPointsDataView(OrganisationConnectionsByRoleData relationshipPlanningData)
        {
            var degree1DataPoints = relationshipPlanningData.SeriesModels[0].DataPoints.Select(p => p.Y).ToList();
            var degree2DataPoints = relationshipPlanningData.SeriesModels[1].DataPoints.Select(p => p.Y).ToList();

            var model = new YPointsDegree1And2Model
            {
                ChartName = "Connections By Role",

                Degree1Data = degree1DataPoints,
                Degree2Data = degree2DataPoints
            };

            return this.ViewAsString("YPointsDegree1And2", model);
        }

        private int SetActiveBarIndex(int barIndex)
        {
            if (barIndex == -1)
            {
                barIndex = barConfiguration.Bars.First(b => b.IsDefaultActive).Index;
            }
            return barIndex;
        }

        private static int SetActiveDegree(int degree)
        {
            if (degree == -1)
            {
                degree = 2;
            }
            return degree;
        }
    }
}

    public class ChartSession
    {
        public static byte[] GetChartFromSession(Guid chartId, HttpSessionStateBase session)
        {
             // Get the chart from session
            var data = session[chartId.ToString()] as byte[];

            // Clear the session
            session[chartId.ToString()] = null;

            return data;
        }

        public static void GenerateChartToSession(Guid chartId, Chart chart, HttpSessionStateBase session)
        {
            var ms = new MemoryStream();
            chart.SaveImage(ms, ChartImageFormat.Png);
            session[chartId.ToString()] = ms.ToArray();
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T11:14:06.363

`SessionStateBehavior`只告诉 ASP.NET 在`Session`

看到这个问题：[Controller SessionStateBehavior is ReadOnly and I can update Session Variable](https://stackoverflow.com/questions/12263086/controller-sessionstatebehavior-is-readonly-and-i-can-update-session-variable)

# asp.net - 用于 DotNet 的 Google Drive API 中的 Gmail 用户/密码身份验证

> ID：14154654
> 
> 赞同：1
> 
> 时间：2013-01-04T09:44:43.667
> 
> 标签：asp.net

我正在使用 GoogleDriveAPI 将文档从 Asp.net 上传到 Drive。它工作正常，但我需要使用 ClientID 和 ClientSecret 进行身份验证。不是 gmail 用户名/密码。在进行身份验证后，它会在登录后重定向到 gmail 以进行登录，它要求 Drive 的 AccessPermission。那么我如何才能通过 GmailUserID 和 Password 进行身份验证而不是 ClientID 和 ClientSecret 。之后我可以再次限制 Login for Authorization 。

```
 using System;
    using System.Collections.Generic;
    using System.Web;
    using System.Web.UI;
    using System.Web.UI.WebControls;
    using DotNetOpenAuth.OAuth2;
    using Google.Apis.Authentication.OAuth2;
    using Google.Apis.Authentication.OAuth2.DotNetOpenAuth;
    using Google.Apis.Drive.v2;
    using Google.Apis.Drive.v2.Data;
    using Google.Apis.Util;
    using System.Diagnostics;
    using DotNetOpenAuth.Messaging;
    using System.Text;
    using System.IO;

    public partial class _Default : System.Web.UI.Page
    {

      private static DriveService driveService;
      private static OAuth2Authenticator<WebServerClient> authenticator;
      private static IAuthorizationState _state;

      String CLIENT_ID = "90994017777728.apps.googleusercontent.com";
      String CLIENT_SECRET = "IR777777773Nf3vnLT0v";

      private static readonly string[] SCOPES = new[] { DriveService.Scopes.Drive.GetStringValue() };

        protected void Page_Load(object sender, EventArgs e)
        {
          Login();
        }

        private IAuthorizationState AuthState {
          get {
            return _state ?? HttpContext.Current.Session["GoogleAuthState"] as IAuthorizationState;
          }
        }

        private OAuth2Authenticator<WebServerClient> CreateAuthenticator() {
          var provider = new WebServerClient(GoogleAuthenticationServer.Description,CLIENT_ID,CLIENT_SECRET);
          var authenticator = new OAuth2Authenticator<WebServerClient>(provider,GetAuthorization);
          return authenticator;
        }

        private IAuthorizationState GetAuthorization(WebServerClient client) {
          IAuthorizationState state = AuthState;
          if (state != null) {
            if (state.AccessTokenExpirationUtc.Value.CompareTo(DateTime.Now.ToUniversalTime()) > 0)
              return state;
            else
              state = null;
          }
          state = client.ProcessUserAuthorization(new HttpRequestInfo(HttpContext.Current.Request));
          if (state != null && (!string.IsNullOrEmpty(state.AccessToken) || !string.IsNullOrEmpty(state.RefreshToken))) {
            if (state.RefreshToken == null)
              state.RefreshToken = "";
            HttpContext.Current.Session["GoogleAuthState"] = _state = state;
            return state;
          }
          client.RequestUserAuthorization(SCOPES,"",HttpContext.Current.Request.Url); // Redirecting to Gmail LoginPage
          return null;
        }

        private string GetContentType(string fileExtension) {
          if (string.IsNullOrEmpty(fileExtension))
            return string.Empty;

          string contentType = string.Empty;
          switch (fileExtension) {
            case "htm":
            case "html":
              contentType = "text/HTML";
              break;

            case "txt":
              contentType = "text/plain";
              break;

            case "doc":
            case "rtf":
            case "docx":
              contentType = "Application/msword";
              break;

            case "xls":
            case "xlsx":
              contentType = "Application/x-msexcel";
              break;

            case "jpg":
            case "jpeg":
              contentType = "image/jpeg";
              break;
            case "png":
              contentType = "image/png";
              break;
            case "bmp":
              contentType = "image/bmp";
              break;
            case "gif":
              contentType = "image/GIF";
              break;

            case "pdf":
              contentType = "application/pdf";
              break;
          }

          return contentType;
        }

        public void Login() {
          if (authenticator == null)
            authenticator = CreateAuthenticator();
          if (driveService == null) {
            driveService = new DriveService(authenticator);
          }

        }

        protected void Button1_Click(object sender,EventArgs e) {
          string[] stringParts = FileUpload1.FileName.Split(new char[] { '/' });
          string str = stringParts[stringParts.Length - 1].ToString();
          string[] strType = str.Split(new char[] { '.' });
          string type = GetContentType(strType[1]);
          Google.Apis.Drive.v2.Data.File newFile = new Google.Apis.Drive.v2.Data.File { Title = FileUpload1.FileName,MimeType = type };
          byte[] byteArray = FileUpload1.FileBytes;
          MemoryStream stream = new MemoryStream(byteArray);
          FilesResource.InsertMediaUpload request = driveService.Files.Insert(newFile,stream,newFile.MimeType);
          request.Convert = true;
          request.Upload();
          Google.Apis.Drive.v2.Data.File file = request.ResponseBody;
          InsertPermission(driveService,file);
          HttpContext.Current.Session["GoogleAuthState"] = null;
          Response.Write(file.AlternateLink);
        }

        public void InsertPermission(DriveService service,Google.Apis.Drive.v2.Data.File file) {
          Permission newPermission = new Permission();
          newPermission.Value = TextBox1.Text;
          newPermission.Type = "user";
          newPermission.Role = "reader";
          try {
            Permission per = service.Permissions.Insert(newPermission,file.Id).Fetch();
          }
          catch (Exception e) {
            Console.WriteLine("An error occurred: " + e.Message);
          }
        } 
```

# at-command - 借助“AT+STGR=3,1”输入密码后无“+STIN:”响应

> ID：14154656
> 
> 赞同：1
> 
> 时间：2013-01-04T09:44:49.333
> 
> 标签：at-command

我正在尝试借助 AT 命令运行 SIM 工具包应用程序。没有任何问题

```
"Get information about the main menu" (AT+STGI=0),
"Select Item from the main menu" (AT+STGR=0,1,1),
"Select Item from the submenu" (AT+STGR=6,1,1),
"Input User information" (AT+STGR=3,1<CR>>0123<Ctrl Z>). 
```

但输入密码时无法收到 SIM 响应。我希望在 OK 后收到“+STIN:”响应以继续我的会话。当我试图在 AT+STIN 的帮助下获得 STIN 状态时？请求它回复“+CME ERROR: 4 Operation not supported.”。

我用新的 SIM 卡遇到了这个问题，其中包含一些修改过的 SIM 应用程序。由于旧版SIM卡使用旧版应用程序，使用标准方式（AT + STGR = 3,1）输入密码没有任何问题。

我可能认为软件开发人员添加了加密或任何其他技术来输入密码。不幸的是，目前没有任何机会与软件开发人员联系。另一方面，关于这个主题的信息/文档不足。

谁能给我建议？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:47:49.350

SIM 应用程序等待终端响应。在“AT+STGR”或其他 SIM 工具包命令的帮助下，我找不到发送所需响应的方法，但我已经成功使用 AT+CSIM。

```
AT+CSIM=40,"a01400000f810301270002028281030100240101"
```

我希望它对任何想在 AT 命令的帮助下运行和管理 SIM 应用程序的人有用

# spring - 未找到休眠 sessionFactory 但已加载 bean

> ID：14154662
> 
> 赞同：0
> 
> 时间：2013-01-04T09:45:14.563
> 
> 标签：spring, hibernate, sessionfactory

我已经搜索了互联网并调试了几个小时，但我一直在寻找问题所在。我有以下网络应用程序设置： Jetty 8.1.0.v20120127 Spring-orm 3.1.2.RELEASE Spring-web 3.1.2.RELEASE Hibernate-core 4.1.7-final

在通过 sessionFactoryBeanName init-param 定义的 web.xml 中：hibernateSessionFactory

虽然应用程序启动时没有错误并显示以下内容：

XmlWebApplicationContext：从 applicationContext.xml 加载一些 bean ClassPathXmlApplicationContext：从 applicationContext-hibernate.xml 加载一些 bean（也是 hibernateSessionFactory）

加载页面（请求）时，OpenSessionInViewFilter 激活并提供以下内容：

```
org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'hibernateSessionFactory' is defined
at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:553)
at org.springframework.beans.factory.support.AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1095)
at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:277)
at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1102)
at org.springframework.orm.hibernate4.support.OpenSessionInViewFilter.lookupSessionFactory(OpenSessionInViewFilter.java:156)
at org.springframework.orm.hibernate4.support.OpenSessionInViewFilter.lookupSessionFactory(OpenSessionInViewFilter.java:141)
at org.springframework.orm.hibernate4.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:105)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1336)
at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:172)
at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:267)
at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1336)
at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:483)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:521)
at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:233)
at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1065)
at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:412)
at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:192)
at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:999)
at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:250)
at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:149)
at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111)
at org.eclipse.jetty.server.Server.handle(Server.java:351)
at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:451)
at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:916)
at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:634)
at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:230)
at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:76)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:609)
at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:45)
at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:599)
at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:534)
at java.lang.Thread.run(Thread.java:722) 
```

在 DefaultListableBeanFactory.java:553 上进行调试时，beanDefinitionMap 显示了一个键集，其中只有加载了 XmlWebApplicationContext 的 bean。因此，没有显示文件 applicationContext-hibernate.xml 中的任何 bean。

bean 定义（LocalSessionFactoryBean 的设置器之一上的断点显示 bean 已创建）：

```
<bean id="hibernateSessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
<property name="configLocations" ref="hibernateConfigLocations"/>
<property name="dataSource" ref="hibernateDatasource"/>
<property name="namingStrategy" ref="hibernateNamingStrategy"/>
<property name="hibernateProperties" ref="hibernateProperties"/> 
```

我期待从 XmlWebApplicationContext 和 ClassPathXmlApplicationContext 中找到所有 bean。任何人都可以告诉我是什么导致了我的问题，如果缺少任何有关发现问题的信息，请告诉我？

网页.xml：

```
<display-name>webshop-cms</display-name>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:applicationContext.xml</param-value>
</context-param>

<context-param>
    <param-name>configuration</param-name>
    <param-value>deployment</param-value>   
</context-param>

<filter>
    <filter-name>webshop-cms</filter-name>
    <filter-class>org.apache.wicket.protocol.http.WicketFilter</filter-class>
    <init-param>
        <param-name>applicationClassName</param-name>
        <param-value>nl.name.webshop.cms.CmsApplication</param-value>
    </init-param>
    <init-param>
        <param-name>ignorePaths</param-name>
        <param-value>/assets</param-value>
    </init-param>
</filter>

<filter>
    <filter-name>openSessionInView</filter-name>
    <filter-class>org.springframework.orm.hibernate4.support.OpenSessionInViewFilter</filter-class>
    <init-param>
        <param-name>sessionFactoryBeanName</param-name>
        <param-value>hibernateSessionFactory</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>webshop-cms</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<filter-mapping>
    <filter-name>openSessionInView</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

应用程序上下文.xml：

```
<context:component-scan base-package="nl.name.webshop.model" />
<context:component-scan base-package="nl.name.webshop.service" />
<context:component-scan base-package="nl.name.webshop.dao" />

<bean id="webshop.context" class="org.springframework.context.support.ClassPathXmlApplicationContext">
    <constructor-arg>
        <list>
            <value>classpath:applicationContext-hibernate.xml</value>
        </list>
    </constructor-arg>
</bean> 
```

applicationContext-hibernate.xml：

```
<bean id="hibernateNamingStrategy" class="org.hibernate.cfg.DefaultComponentSafeNamingStrategy" />

<bean id="hibernateConfigLocations" class="java.util.ArrayList">
    <constructor-arg>
        <list>
            <value>classpath:hibernate.cfg.xml</value>
        </list>
    </constructor-arg>
</bean> 

<bean id="jndiDatasourceName" class="java.lang.String">
    <constructor-arg value="java:comp/env/jdbc/webshop"/>
</bean>

<jee:jndi-lookup id="hibernateConfig" jndi-name="jdbc/webshop-hibernate-config"/>
<jee:jndi-lookup id="hibernateDatasource" jndi-name="jdbc/webshop-datasource"/>

<bean id="hibernatePropertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="properties" ref="hibernateConfig"/>
</bean>

<bean id="hibernateProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
    <property name="properties">
        <props>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
        </props>
    </property>
</bean>

<bean id="hibernateSessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="configLocations" ref="hibernateConfigLocations"/>
    <property name="dataSource" ref="hibernateDatasource"/>
    <property name="namingStrategy" ref="hibernateNamingStrategy"/>
    <property name="hibernateProperties" ref="hibernateProperties"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:09:37.110

你的bean的定义不应该是：

```
<bean id="hibernateSessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean"> 
```

即使用id 属性而不是名称。

[编辑]实际上，是否有理由以这种方式加载 applicationContext-hibernate.xml 文件：

```
<bean id="webshop.context" class="org.springframework.context.support.ClassPathXmlApplicationContext">
    <constructor-arg>
        <list>
            <value>classpath:applicationContext-hibernate.xml</value>
        </list>
    </constructor-arg>
</bean> 
```

我认为您可以在 applicationContext.xml 中简单地包含以下内容：

```
<import resource="/path/relative/to/application/context/applicationContext-hibernate.xml"/> 
```

# android - 三个选项卡具有各自的滚动视图

> ID：14154664
> 
> 赞同：0
> 
> 时间：2013-01-04T09:45:26.913
> 
> 标签：android, xml, android-layout, android-scrollview

我正在尝试制作一个界面，其中一个选项卡主机中有三个选项卡，并且它们将具有自己的单独滚动视图。
单个选项卡的内容占位符必须是可滚动的，但从**选项卡按钮**本身下方（以便用户可以从选项卡#1 更改为选项卡#2，而无需通过单击选项卡的按钮一直向上滚动。）

这是一种一种布局，其中滚动视图位于选项卡的内容占位符内，而**不是**滚动视图内的选项卡。

到目前为止，我想出了这个：

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    tools:context=".Ques2" >

    <RelativeLayout
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TabWidget
            xmlns:tools="http://schemas.android.com/tools"
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="50dip"
            android:gravity="bottom" />

        <FrameLayout
            xmlns:tools="http://schemas.android.com/tools"
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <LinearLayout
                xmlns:tools="http://schemas.android.com/tools"
                android:id="@+id/tabview1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:orientation="vertical" >

                <ScrollView
                    xmlns:android="http://schemas.android.com/apk/res/android"
                    android:id="@+id/scrollViewTab1"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:fillViewport="true" >

                    <RelativeLayout
                        xmlns:tools="http://schemas.android.com/tools"
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content" >

                        <TextView
                            android:id="@+id/textView1_monthly_vOlslab_R1"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="@string/monthly_vOlslab_R1"
                            android:textAppearance="?android:attr/textAppearanceMedium" />

                        <CheckBox
                            android:id="@+id/cb1R1"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_below="@+id/textView1_monthly_vOlslab_R1"
                            android:text="@string/cb1R1" />

                        <CheckBox
                            android:id="@+id/cb2R1"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_below="@+id/cb1R1"
                            android:text="@string/cb2R1" />

                        <CheckBox
                            android:id="@+id/cb3R1"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_below="@+id/cb2R1"
                            android:text="@string/cb3R1" />

                        <CheckBox
                            android:id="@+id/cb4R1"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_below="@+id/cb3R1"
                            android:text="@string/cb4R1" />

                        <CheckBox
                            android:id="@+id/cb5R1"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_below="@+id/cb4R1"
                            android:text="@string/cb5R1" />

                        <CheckBox
                            android:id="@+id/cb6R1"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_below="@+id/cb5R1"
                            android:text="@string/cb6R1" />

                        <CheckBox
                            android:id="@+id/cb7R1"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_below="@+id/cb6R1"
                            android:text="@string/cb7R1" />

                        <CheckBox
                            android:id="@+id/cb8R1"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:layout_below="@+id/cb7R1"
                            android:text="@string/cb8R1" />

                        <View
                            android:id="@+id/viewTab1Q1"
                            android:layout_width="wrap_content"
                            android:layout_height="2dp"
                            android:layout_below="@+id/cb8R1"
                            android:background="@android:color/darker_gray"
                            android:paddingBottom="2dp"
                            android:paddingTop="2dp" />
                    </RelativeLayout>
                </ScrollView>
            </LinearLayout>

            <LinearLayout
                xmlns:tools="http://schemas.android.com/tools"
                android:id="@+id/tabview2"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="tabview2" />
            </LinearLayout>

            <LinearLayout
                xmlns:tools="http://schemas.android.com/tools"
                android:id="@+id/tabview3"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="horizontal" >

                <TextView
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:text="tabview3" />
            </LinearLayout>
        </FrameLayout>
    </RelativeLayout>

</TabHost> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:10:38.547

不要这样做，`TabHost`既古老又可怕。使用`Fragments`和一个`ViewPager` [ViewPager](https://developer.android.com/reference/android/support/v4/view/ViewPager.html)。

有大量的教程和示例说明如何执行此操作。最好的来自 @commonsguy [Fragments 和 ViewPager](https://github.com/commonsguy/cw-omnibus/tree/master/ViewPager/Fragments)

# php - AJAX 调用如何与 TWIG 配合使用

> ID：14154670
> 
> 赞同：13
> 
> 时间：2013-01-04T09:45:51.250
> 
> 标签：php, jquery, ajax, twig

我试图了解 Twig 如何通过 AJAX 加载模板。从他们的网站上，很清楚如何加载模板（http://twig.sensiolabs.org/doc/api.html）

```
echo $twig->render('index.html', array('the' => 'variables', 'go' => 'here')); 
```

但是这对于 AJAX 调用如何工作？你如何告诉 Twig 你想“渲染”只是 index.html 一部分的东西……而不是重新加载整个页面？我查看了 Twig 的唯一 Ajax 示例 (http://twig.sensiolabs.org/doc/recipes.html)，但这并不能解释 Twig 如何知道您想要更改页面的哪一部分。假设您的 Ajax 调用导致页面内容更新。我只需要一个简单的例子，比 Twig 的食谱页面上的更多。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-04-22T02:12:06.593

直接在模板中：

```
{% if app.request.isXmlHttpRequest() %}
  // code if ajax request
{% else %}
  // code if not ajax request
{% endif %} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-04T10:08:47.773

有几种方法可以做到这一点：

1) 将您的 index.html 分成几个文件，如 index.html 和 content.html。然后在 index.html 中使用[include函数来包含 content.html。](http://twig.sensiolabs.org/doc/tags/include.html)

例子 ：

```
if(isAjaxRequest()) //try to find the right function here
   echo $twig->render('content.html', array('the' => 'variables', 'go' => 'here'))
else
   echo $twig->render('index.html', array('the' => 'variables', 'go' => 'here')); 
```

**编辑：** 如果您使用 jQuery 进行 ajax 请求，例如：

```
$.get('yoururl', function(data) {
  $('#divtoremplace').html(data);
}); 
```

2)`request.ajax`在 index.html 中使用布尔值

```
{% if request.ajax == false %}
<p>My header,  not reloaded with ajax</p>
{% endif %}

<p>My content, reloaded with ajax</p>

{% if request.ajax == false %}
<p>Other content,  not reloaded with ajax</p>
{% endif %} 
```

不确定第二个，但这应该根据文档来解决问题。最好的方法是第一个解决方案，分离你的代码。

# playframework - 是否可以使用 play framework 2 美化 scala 模板？

> ID：14154671
> 
> 赞同：18
> 
> 时间：2013-01-04T09:46:11.957
> 
> 标签：playframework, playframework-2.0, code-formatting, scala-template

使用 Play Framework 2，我注意到渲染的 Scala HTML 模板不喜欢缩进`@if`或`@for`.

因此，例如，类似的东西：

```
<ul>
   @for(test <- tests) {
      <li>@test.name</li>
   }
</ul> 
```

将有额外的不需要的空间。要修复它，我需要做这样的事情：

```
<ul>
@for(test <- tests) {
   <li>@test.name</li>
}
</ul> 
```

这会使附加`@defining`或其他陈述变得混乱。

那么，有没有办法美化/美化 Scala 模板渲染以消除额外的空白？

更新：

阅读[此线程](https://groups.google.com/forum/#!msg/play-framework/XhhYBV2HxZg/6AsOgaOmqsQJ)时，我注意到由于模板顶部的参数，还添加了额外的空格和换行符。所以这：

```
@(myParam: String)

<!DOCTYPE html>
<html>
   <head></head>
   <body></body>
</html> 
```

将在生成的 HTML 之上添加 3 个额外的换行符。这绝对是烦人的。

该线程似乎说目前没有选项可以纠正它。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-08T09:54:51.987

因此，有关更多详细信息，我使用了@biesor 答案并完成了以下步骤：

**添加 HtmlCompressor 作为插件**

在 Build.scala 中：

```
val appDependencies = Seq(
    "com.googlecode.htmlcompressor" % "htmlcompressor" % "1.5.2"
) 
```

**漂亮控制器**

```
public class PrettyController extends Controller {

    public static Results.Status ok(Content content) {
        return Results.ok(prettify(content)).as("text/html; charset=utf-8");        
    }

    public static Results.Status badRequest(Content content) {
        return Results.badRequest(prettify(content)).as("text/html; charset=utf-8");        
    }

    public static Results.Status notFound(Content content) {
        return Results.notFound(prettify(content)).as("text/html; charset=utf-8");      
    }

    public static Results.Status forbidden(Content content) {
        return Results.forbidden(prettify(content)).as("text/html; charset=utf-8");     
    }

    public static Results.Status internalServerError(Content content) {
        return Results.internalServerError(prettify(content)).as("text/html; charset=utf-8");       
    }

    public static Results.Status unauthorized(Content content) {
        return Results.unauthorized(prettify(content)).as("text/html; charset=utf-8");      
    }

    private static String prettify(Content content) {
        HtmlCompressor compressor = new HtmlCompressor();
        String output = content.body().trim();

        if (Play.isDev()) {
            compressor.setPreserveLineBreaks(true);
        }

        output = compressor.compress(output);

        return output;
    }
} 
```

然后每个控制器都应该扩展`PrettyController`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-29T17:13:31.280

我已经为 Play 2.1 发布了一个 Google HTML Compressor 插件。你可以在[GitHub 上](https://github.com/mohiva/play-html-compressor)找到它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-04T11:24:37.620

当然总有一些选项:)，修剪正文并再次设置标题（因为在对字符串进行操作后，它将返回为`text/plain`）：

```
// instead of
return ok(index.render("some"));

// use
return ok(index.render("some").body().trim()).as("text/html; charset=utf-8"); 
```

对于“美”循环或如果您需要编写更紧凑的代码

```
// instead of
@for(test <- tests) {
  <li>@test.name</li>
}

// use
@for(test <- tests) {<li>@test.name</li>} 
```

最后，您可以使用一些压缩器（即[com.googlecode.htmlcompressor](http://code.google.com/p/htmlcompressor/)）来...缩小整个页面（在此示例中仅适用于生产模式）

```
String output = index.render("some").body().trim();
if (Play.isProd()) output = compressor.compress(output);
return ok(output).as("text/html; charset=utf-8"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-14T17:02:02.397

我期待着真正“美化”HTML输出的答案，除了删除空行之外，还可以正确缩进输出。但是，`HtmlCompressor`仅压缩输出，并没有漂亮的打印逻辑。

我想出了一个解决方案，它既`HtmlCompressor`可以用于生产中的压缩，也可以使用 Jsoup 在开发过程中进行漂亮的打印。我不关心`prettify`显式调用转换，所以我的解决方案如下所示：

```
// required extra imports
import play.twirl.api.Html
import com.googlecode.htmlcompressor.compressor.HtmlCompressor
import org.jsoup.Jsoup
import org.jsoup.parser.Parser

@Singleton
class MyController @Inject() (environment: Environment) extends Controller {

  /** Helper to format Html */
  def prettify(content: Html): Html = {
    val rawString = content.body.trim()
    val html = environment.mode match {
      case Mode.Dev =>
        val doc = Jsoup.parse(rawString, "", Parser.xmlParser())
        doc.outputSettings().indentAmount(2)
        Html(doc.toString())
      case _ =>
        val compressor = new HtmlCompressor()
        compressor.setPreserveLineBreaks(true)
        Html(compressor.compress(rawString))
    }
    html
  }

  /** example usage */
  def index = Action {
    Ok(prettify(views.html.index))
  }

} 
```

在开发模式下，这会产生一些格式良好的 HTML。

所需的更改`build.sbt`是：

```
libraryDependencies += "org.jsoup" % "jsoup" % "1.10.2"
libraryDependencies += "com.googlecode.htmlcompressor" % "htmlcompressor" % "1.5.2" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-07T21:08:33.437

与 bluenote10 的回答相呼应，我创建了以下内容，它不需要第三方 libraryDependecies。将它集成到过滤器中会很好，不幸的是我不确定今天如何正确地做到这一点。

```
import play.twirl.api.Html

/** Helper to format Html */
def prettify(content: Html): Html = {
  Html(content.body.trim().replaceAll("\\n\\s*\\n", "\n"))
}

def index = Action { implicit request =>
  Ok(prettify(views.html.index()))
} 
```

# android - 我如何将图像放在屏幕中央？

> ID：14154673
> 
> 赞同：1
> 
> 时间：2013-01-04T09:46:15.713
> 
> 标签：android

这是我的代码，它将图像放在屏幕的顶部发送者我如何将图像放在屏幕的中心？不是顶部居中我的屏幕看起来像这样 [http://imgur.com/65CD6](http://imgur.com/65CD6)

我想放在屏幕中心而不是操作中心

```
 <?xml version="1.0" encoding="utf-8"?>

<RelativeLayout android:id="@+id/RelativeLayout01" 
xmlns:android="http://schemas.android.com/apk/res/android" 
android:layout_gravity="center_vertical|center_horizontal" 
android:background="#ffffff"
android:layout_height="fill_parent" 

  android:layout_width="fill_parent">

   <ImageView android:id="@+id/ImageView01" 
 android:src="@drawable/agapplogo" 
 android:layout_width="wrap_content"

 android:layout_marginLeft="60dip"
android:layout_height="wrap_content">
</ImageView>
<TextView android:id="@+id/TextView01" 
android:text="@string/welcome"
android:layout_below="@id/ImageView01" 
android:layout_width="wrap_content" 
  android:layout_height="wrap_content">
 </TextView>
   </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:54:30.427

您可以尝试使用： `android:layout_centerInParent="true"`如：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

  <ImageView
      android:layout_centerInParent="true"
      android:src="@drawable/ic_launcher"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:48:37.353

地方`android:gravity="center"`_`RelativeLayout`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T09:49:40.990

你可以`android:gravity="center"`玩`<RelativeLayout>`

或者

包含`android:centerInParent="true"`在 ImageView 中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T09:49:49.447

只需在 xml 中为您的 ImageView 提供此属性：

```
 android:layout_centerHorizontal="true" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-04T09:50:19.790

这可能是由于RelativeLayout，尝试使用LinearLayout

# android - 显示 SQLite 数据库中的 unicode 字符

> ID：14154675
> 
> 赞同：-1
> 
> 时间：2013-01-04T09:46:23.943
> 
> 标签：android, sqlite, unicode

我有一个 listView，它由 SQLite 数据库中的数据填充。我的一个字段是一个带有完整圆圈的 unicode 字符的标记：\u25cf 或空心圆圈：\u25cb。当我在文本字段中使用硬编码字符串时，这两个字符都能正确显示。但是，在我的 listView 中，我看到的是文本编码而不是字符。

有谁知道这是为什么...以及如何显示 unicode 字符？

谢谢。

更新：

插入代码是

```
private void loadRecords() throws IOException {
        final Resources resources = mContext.getResources();
        InputStream inputStream = resources.openRawResource(R.raw.records);
        BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));
        try {
            String line;
            while ((line = reader.readLine()) != null) {
                String[] strings = TextUtils.split(line, ",");
                if (strings.length <2) continue;
                long id = addRecord(strings[0].trim(),strings[1].trim(),strings[2].trim(),strings[3].trim(),
                        strings[4].trim(),strings[5].trim(),strings[6].trim());
            }
        } finally {
            reader.close();
        }
    } 
```

资源是一个csv文件，其中一行是例如

```
primaryKey,name,surname,address,phone,email,\u25CB 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T11:04:31.403

在您的文本文件中，`\u25CB`有六个字符。

要正确使用 Unicode 字符，请将它们直接放入文件中：

```
primaryKey,name,surname,address,phone,email,● 
```

但是，您必须确保 .csv 文件与您使用的编码相同`InputStreamReader`（设置其构造函数的第二个参数）。

# asp.net - 返回 ASP.NET 中的 URL 概念

> ID：14154676
> 
> 赞同：0
> 
> 时间：2013-01-04T09:46:28.563
> 
> 标签：asp.net, return-value

我的要求是这样的。每当我无法登录我的网站时，就永远不会访问网页。但是在登录页面 url 之后添加的 url 意味着（返回 url），并且在成功登录到我的网站后，页面重定向到我必须访问并输入地址栏的同一页面。

示例：我必须在没有登录的情况下访问页面**http://localhost:14334/User/userdetail.aspx**。**该页面在http://localhost:14334/Login.aspx**上返回给我。但我希望页面在**http://localhost:14334/Login.aspx?ReturnUrl=%2fUser%2fuserdetail.aspx上返回给我**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:50:18.337

听起来您所缺少的只是重定向的调用：

```
FormsAuthentication.RedirectFromLoginPage(UsernameTextbox.Text, NotPublicCheckBox.Checked); 
```

有关更多信息，请参阅此 - [http://msdn.microsoft.com/en-us/library/ka5ffkce.aspx](http://msdn.microsoft.com/en-us/library/ka5ffkce.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:50:05.640

如果不修改`ASP.NET`默认模板，则登录页面中的返回 URL 将返回到登录成功时的位置。`ASP.NET`

# asp.net - 如何找出为什么在 ASP.Net MVC4 项目中需要程序集？

> ID：14154678
> 
> 赞同：1
> 
> 时间：2013-01-04T09:46:30.257
> 
> 标签：asp.net, asp.net-mvc, visual-studio, asp.net-mvc-4

我正在尝试将我的 ASP.Net MVC4 应用程序部署到 Azure，但它在部署过程中崩溃。显然这是因为某些东西正在请求程序集*'System.Web.Mvc, Version=3.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'*。这一切都在本地完美运行，并且在 Azure 上调试是一场噩梦，因为部署对我来说需要 25-30 分钟。

我原以为我已经将 CLR 配置为不需要 MVC3，即使某些东西需要它，也可以使用：

```
 <dependentAssembly>
            <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" culture="neutral" />
            <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
        </dependentAssembly> 
```

如果我查看 ObjectBrowser，似乎没有什么需要 MVC3。找出请求内容的最佳方法是什么？我在项目中有各种 Nuget 包。我猜其中一个正在请求 MVC3？有没有看到所有依赖项等的列表？

我得到：

> CLR 异常类型：System.Reflection.ReflectionTypeLoadException “无法加载一种或多种请求的类型。检索 LoaderExceptions 属性以获取更多信息。” Microsoft.WindowsAzure.ServiceRuntime 严重：201：ModLoad：000007fc `906a0000 000007fc`907a9000
> D:\Windows\Microsoft.NET\Framework64\v4.0.30319\diasymreader.dll 无法创建角色入口点：System.TypeLoadException：由于以下异常，无法加载角色入口点：-- System.IO.FileLoadException：无法加载文件或程序集“System.Web.Mvc，Version=3.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（HRESULT 异常：0x80131040）文件名：'System.Web.Mvc，版本 = 3.0.0.0，文化 = 中性，PublicKeyToken = 31bf3856ad364e35'
> 
> 警告：程序集绑定日志记录已关闭。要启用程序集绑定失败日志记录，请将注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) 设置为 1。注意：与程序集绑定失败日志记录相关的一些性能损失。要关闭此功能，请删除注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog]。
> 
> ---> System.Reflection.ReflectionTypeLoadException：无法加载一种或多种请求的类型。检索 LoaderExceptions 属性以获取更多信息。在 System.Reflection.RuntimeModule.GetTypes(RuntimeModule 模块) 在 System.Reflection.RuntimeModule.GetTypes() 在 System.Reflection.Assembly.GetTypes() 在 Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.GetRoleEntryPoint(Assembly entryPointAssembly) --- 结束内部异常堆栈跟踪 ---
> 在 Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.GetRoleEntryPoint(Assembly entryPointAssembly) 在 Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.CreateRoleEntryPoint(RoleType roleTypeEnum) 在 Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.InitializeRoleInternal(RoleType roleTypeEnum) ModLoad: 000007fc `a2f00000 000007fc`a2f96000
> D:\Windows \SYSTEM32\clbcatq.dll ntdll!ZwTerminateProcess+0xa: 000007fc`a2fa2eaa c3 ret

和

> ```
>  Exception object: 00000000017e0070 Exception type:   System.TypeLoadException Message:          Unable to load the role 
> ```
> 
> 由于以下异常导致的入口点： -- System.IO.FileLoadException：无法加载文件或程序集“System.Web.Mvc，Version=3.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（HRESULT 异常：0x80131040）文件名：'System.Web.Mvc，版本 = 3.0.0.0，文化 = 中性，PublicKeyToken = 31bf3856ad364e35'
> 
> 警告：程序集绑定日志记录已关闭。要启用程序集绑定失败日志记录，请将注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) 设置为 1。注意：与程序集绑定失败日志记录相关的一些性能损失。要关闭此功能，请删除注册表值 [HKLM\Software\Microsoft\Fusion!EnableLog]。
> 
> InnerException: System.Reflection.ReflectionTypeLoadException，使用 !PrintException 00000000017dcf08 查看更多。StackTrace（生成）：StackTraceString：HResult：80131522

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:10:56.720

您可以使用 Reflector 加载 Nuget 包并查看它们的依赖关系。应该很容易发现一个是否依赖于 MVC3。不过，您的程序集绑定看起来不错。您的解决方案中有多个项目吗？其中一个是否会依赖依赖于 MVC3 的 Nuget 包？

这篇文章可能会有所帮助：[如何从我的 .NET 解决方案构建“依赖关系树图”](https://stackoverflow.com/questions/80287/how-can-i-build-a-dependency-tree-diagram-from-my-net-solution)

# c - C简单字符串程序无法编译

> ID：14154687
> 
> 赞同：-1
> 
> 时间：2013-01-04T09:47:17.000
> 
> 标签：c, string, strlen

```
#include <stdio.h>
#include <string.h>

char Jones(char, char);

int main() {
    char name[]="Andrew";
    char surname[]="Jones";
    char result[80];
    result=Jones(name, surname);
    puts(result);
    return 0;
}

char Jones(char name, char surname)
{
    char result[80];
    int length;
    length = strlen(surname);
    for (int i=0; i<50; i++) 
    {
        result[length+i] = name[i];
    }
    return result;
} 
```

该程序无法编译，我不知道为什么。它应该读取两个字符串并交换它们的位置。它应该显示例如。“琼斯安德鲁”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:50:17.273

这是一个问题：

```
char name[]="Andrew";
char surname[]="Jones";
char result[80];
wynik=Jones(name, surname); 
```

这使用字符数组调用`Jones()`（将衰减为字符指针），但该函数被声明为仅接受单个字符。

您应该将函数更改为 take `char *name, char *surname`，因为它似乎确实需要字符串。

此外，您不能像在 in 中那样返回字符数组`Jones()`，您需要阅读大量有关如何在 C 中使用字符串的信息。

此外，`wynik`看起来未声明，这也会使其无法构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:52:44.837

有几个错误：

```
char Jones(char, char); 
```

这只需要一个字符，而不是字符串所需的字符 *。

`result=Jones(name, surname);`

这里的结果是一个数组。在 C 中，您不能分配给数组。

```
char Jones(char name, char surname)
{ char result[80];
...
return result;
} 
```

在这里，您返回`result`这是一个局部变量。但是要返回一个字符串，您需要返回一个 char*。但是该 char* 将指向 Jones 函数中的一个局部变量，该变量在函数结束时不再有效。一种解决方案是传入一个缓冲区，您可以在其中写入调用者拥有的结果。您将 surename 和 name 组合在一起的算法也是错误的，您永远不会对 surename 做任何事情。

你需要这样做：

```
char *Jones(char*, char* , char *);

int main() {
  char name[]="Andrew";
  char surname[]="Jones";
  char result[80];
  char *p;
  p = Jones(name, surname, result);
  puts(p);
  return 0;
}

char *Jones(char *name, char *surname, char *result)
{ 
  int length;
  int i,k;
  length = strlen(surname);
  for (i=0; i<length ; i++) 
  {
    result[i] = surname[i];
  }
  result[i++] = ' '; //add a space

  length = strlen(name);
  for (k=0; k<length ; k++, i++) 
  {
    result[i] = name[k];
  }    
 result[i] = 0; //add nul terminator to end the string
 return result;
} 
```

可以通过多种方式简化串联，例如

```
strcpy(result, surename);
strcat(result, " ");
strcat(result, name); 
```

或者琼斯函数可以这样做：

```
 sprintf(result, "%s %s", surename, name); 
```

在所有情况下，该函数都相当脆弱，因为如果您传入其他不适合缓冲区的内容，则很容易溢出结果`result`缓冲区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T10:05:06.683

1) `name`and`surname`是 char 数组而不是单个 char，因此您必须更改函数`Jones()`的输入参数类型，输入参数类型应该是`char name[]`（char 数组）或`char *name`（指向 char 数组的指针）

2）您不能返回在函数中本地和静态定义的数组。如果你想从函数返回一个字符串，字符串应该是常量或者它应该是一个动态分配的缓冲区（使用`malloc`, `calloc`, `realloc`）到函数中并且对于这两种情况，函数类型应该是`char *Jonas()`而不是`char Jonas()`

或者您可以`result`通过输入参数传递数组。在这种情况下，您可以将其填充到函数中。

```
void Jones(char *name, char *surname, char *result) 
```

主要是：

```
char result[80];
Jones(names, surname, result); 
```

3）以下`for`循环缺少一些东西

```
for (int i=0; i<50; i++) 
{
   result[length+i] = name[i];
} 
```

由于未初始化数组，因此`result`从一个元素`0`到另一个元素的元素`length`都包含垃圾。`result`因此，当您`printf`使用`result`数组时，您会打印出垃圾。您必须在数组中的`0`to之间启动元素`length``result`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T11:07:33.353

```
#include <stdio.h>
#include <string.h>

char* Jones(char*, char*);

int main() {
char name[]="Andrew";
char surname[]="Jones";
puts(Jones(name,surname));
return 0;
}

char* Jones(char *name, char *surname)
{
    strcat(surname," ");
    strcat(surname,name);
    return surname;
} 
```

# ios - tabbarcontoller 选项卡到 popviewcontroller

> ID：14154689
> 
> 赞同：0
> 
> 时间：2013-01-04T09:47:20.493
> 
> 标签：ios, uitabbarcontroller

在我的应用程序选项卡中，第一个选项卡按钮上包含四个选项卡，当他们单击该按钮时，它应该跳转到我使用过的第二个选项卡。

```
 self.tabBarController.selectedIndex = 1; 
```

它可以工作，但要求是单击该按钮时它应该弹出

到第二个选项卡的第一个视图控制器。

感谢先进

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:55:14.213

您可以在此处调用 appdelegate 委托方法的第二个选项卡栏时检查这一点，您可以 poptorootviewcontroller

```
-(void) tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController 
```

将以下代码放入此委托方法中。

```
if ([viewController isKindOfClass:[UINavigationController class]]) 
{
   [(UINavigationController *)viewController popToRootViewControllerAnimated:NO];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:04:38.820

它工作我已经使用下面的代码。点击按钮

```
 self.tabBarController.selectedIndex = 1;

        [[self.tabBarController.viewControllers objectAtIndex:1] popToRootViewControllerAnimated:NO]; 
```

# php - 替换 HIGHCHARTS 代码中的 PHP 代码

> ID：14154693
> 
> 赞同：0
> 
> 时间：2013-01-04T09:47:31.547
> 
> 标签：php, highcharts

我有`Highcharts`如下代码：

```
 tooltip: {
        formatter: function() {
            return ''+
                this.series.name +': '+ (100 - (this.y)) +' ('+ this.y +'%)';
        }
    }, 
```

和`PHP`代码如下：

```
 $Blue = ((int)$data[6] -(int)$data[7]);
 $Red =  (int)$data[7]; 
```

我想`(100 - (this.y))`用这 2 个变量替换`$Blue`，`$Red`因为在 arc y 中我有 2 个要显示的数字[请参见第二张图表](http://www.unitead.pro/kama/stats/unitead_chart/bar_charts.php)。但是我不知道如何解决它，请知道的人帮助我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:10:58.320

如果您的 javascript 代码在 PHP(.php) 文件中，那么您可以替换为，

```
<?php
$Blue = 100;
$Red = 200;
?>
<script type="text/javascript" >
alert("Blue is " + <?php echo $Blue; ?> );
alert("Red is " + <?php echo $Red; ?> );
</script> 
```

或者

您的 javascript 和 php 存在于不同的文件中，然后执行以下操作

//myphp.php 文件

```
<?php
$Blue = 100;
$Red = 200;
?>
<script type="text/javascript" >
var blue = <?php echo $Blue; ?>;
var red = <?php echo $Red; ?> ;
</script> 
```

//myjs.js 文件

```
alert("Blue is " + blue);
alert("Red is " + red); 
```

并确保 myphp.php 文件中的 javascript 代码在运行 myjs.js 文件中的代码之前执行。

注意：这是为了您的理解，而不是确切的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:48:48.213

```
tooltip: {

    formatter: function() {
        return ''+
            this.series.name +': '+ (<?php echo $Blue - $Red ?>) +' ('+ this.y +'%)';
    }
}, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T14:50:22.810

`hilarudeens`为您提供了两种工作解决方案

让我在可用的选项中再添加一个；）

我更愿意**（并鼓励每个人也这样做）**不要混合我的 JS 和 PHP，总是把你所有的 javascript 放在一个 js 文件中。

在 PHP 中，您可以使用**[`hidden` `input`](http://www.w3schools.com/jsref/dom_obj_hidden.asp)**如下标记

```
<input type="hidden" 
       value="<?php echo 'Some Value'; ?>" 
       id="hiddenValue" /> 
```

这将做的是添加一个输入标签并允许向它添加一个值。

现在在javascript中，您可以从此输入中读取值并将其存储在您的JS变量中

```
var hiddenValue=$("#hiddenValue").val(); 
```

对于您的代码

# PHP

```
<?php
$Blue = ((int)$data[6] -(int)$data[7]);
$Red =  (int)$data[7];
?>
<input type="hidden" 
       value="<?php echo  $Blue; ?>" 
       id="blueValue" />
<input type="hidden" 
       value="<?php echo $Red; ?>" 
       id="redValue" /> 
```

# JS

```
 var blue = parseInt($("#blueValue").val());
 var red = parseInt($("#redValue").val());
 ...
 tooltip: {
        formatter: function() {
            return ''+
                this.series.name +': '+ (blue - red) +' ('+ this.y +'%)';
        }
    }, 
```

# java - HttpSession 究竟何时过期（开始有资格销毁 - 不一定已销毁）？

> ID：14154696
> 
> 赞同：5
> 
> 时间：2013-01-04T09:47:41.800
> 
> 标签：java, spring, httpsession

我想知道HttpSession**究竟**什么时候会**过期**（与销毁不同）？

**我试图弄清楚 session.getLastAccessedTime() + (session.getMaxInactiveInterval() * 1000) 是否会在每次请求带有相同的会话 ID 时为我提供会话到期的确切时间（以毫秒为单位）！**

从javadocs：

> 长 getLastAccessedTime()
> 
> ```
>  Returns the last time the client sent a request associated with this session, as the number of milliseconds since midnight January 1, 1970 GMT, and marked by the time the container received the request. 
> ```
> 
> int getMaxInactiveInterval()
> 
> ```
>  Returns the maximum time interval, in seconds, that the servlet container will keep this session open between client accesses. 
> ```

假设我们有以下内容：
Treq1 - `the time the container received the 1st request` (HttpSession.lastAccessedTime)
Tresp1 - `the time the container sends the 1st response`
Preq1 - `the time period between Treq1 and Tresp1 (the time period that the server processes the 1st request`
Treq2 - `the time the container received the 2nd request` (HttpSession.lastAccessedTime)
Preq1req2 - `the time period between Treq1 and Treq2 (the time between requests entering the container)`
Presp1req2 -`the time period between Tresp1 and Treq2 (the time between the 1st response exiting the container and the 2nd request entering the container)`

那么现在，**服务器何时将会话计算为过期？**当：
1\. Treq1 + maxInactiveInterval < Treq1 + Preq1req2 => **maxInactiveInterval < Preq1req2**
2\. Tresp1 + maxInactiveInterval < Tresp1 + Presp1req2 => **maxInactiveInterval < Presp1req2**

**这部分，`the servlet container will keep this session open between client accesses`有点混乱。它是指在请求进入容器之间还是在响应退出和请求进入之间？**

*附带说明一下*，***我知道会话可能不会在到期的确切时间被销毁***，但我还不知道它是否在容器中发生任何请求处理逻辑之前被销毁。我指的是持有过期会话 id 的请求。

亲切的问候，
暴君

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-04T15:26:24.540

会话机制是[Servlet 规范](http://download.oracle.com/otndocs/jcp/servlet-3.0-fr-eval-oth-JSpec/)的一部分，该规范要求：

> 在 HTTP 协议中，当客户端不再处于活动状态时，没有明确的终止信号。这意味着可用于指示客户端何时不再活动的唯一机制是超时期限。
> 
> 会话的默认超时时间由 servlet 容器定义，可以通过 HttpSession 接口的 getMaxInactiveInterval 方法获取。开发人员可以使用 HttpSession 接口的 setMaxInactiveInterval 方法更改此超时。这些方法使用的超时时间以秒为单位定义。根据定义，如果会话的超时期限设置为 -1，则会话将永不过期。在使用该会话的所有 servlet 都退出服务方法之前，会话失效不会生效。一旦会话失效被启动，新的请求一定不能看到该会话。
> 
> HttpSession 接口的 getLastAccessedTime 方法允许 servlet 确定在当前请求之前最后一次访问会话的时间。当作为会话的一部分的请求首先由 servlet 容器处理时，该会话被视为已访问。

假设“非活动间隔”以“lastAccessedTime”开始可能是安全的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T09:53:39.610

> 我试图弄清楚 session.getLastAccessedTime() + (session.getMaxInactiveInterval() * 1000) 是否会在每次请求带有相同的会话 ID 时为我提供会话到期的确切时间（以毫秒为单位）！

因为您只能在请求线程中访问会话对象，所以我假设您在 servlet 中有上述代码，用于通知客户端（浏览器）在下次单击之前他可以花多长时间，这可能是一个超时计数器。

我认为`System.currentTimeMillis() + (session.getMaxInactiveInterval() * 1000)`在这种情况下会更准确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-15T10:19:57.157

来源？

我使用“org.springframework.boot:spring-boot-starter-web:1.5.6.RELEASE” [spring](https://projects.spring.io/spring-boot/)跟踪了两次请求并得出结论：

在您的服务处理程序（doGet、doXX 或 Controller 方法）中，到期时间将是`session.getLastAccessedTime() + (session.getMaxInactiveInterval() * 1000)`（2\. case）

```
Duration:        |<---------- Preq1req2 ---------->|
Duration:        |           |<---- Presp1req2 --->|
Time    :      Treq1       Tresp1                Treq2      Tresp2
Action  : req1-->|--service--|-->resp1 ...  req2-->|--service--|-->resp2
Duration:        |<- Preq1 ->|                     |<- Preq2 ->|
                 |           |                                 | 
Set :       creationTime     |                                 |   
          lastAccessedTime   |                                 |            
                      lastAccessedTime                  lastAccessedTime 
```

服务后更新 lastAccessedTime 时： [![HTTP服务后](../Images/023a69b849e93d0c06248934853bd795.png)](https://i.stack.imgur.com/JiJvF.png)

来自 C:/Users/ssfang/.m2/repository/org/apache/tomcat/embed/tomcat-embed-core/8.5.16/tomcat-embed-core-8.5.16-sources.jar 的代码片段

```
package org.apache.catalina.session;
public class StandardSession implements HttpSession, Session, Serializable {
    /** The time this session was created, in milliseconds since midnight, January 1, 1970 GMT. */
    protected long creationTime = 0L;

    /**
     * We are currently processing a session expiration, so bypass
     * certain IllegalStateException tests.  NOTE:  This value is not
     * included in the serialized version of this object.
     */
    protected transient volatile boolean expiring = false;

    /** The last accessed time for this Session. */
    protected volatile long lastAccessedTime = creationTime;

    /** The session event listeners for this Session. */
    protected transient ArrayList<SessionListener> listeners = new ArrayList<>();

    /** Flag indicating whether this session is valid or not. */
    protected volatile boolean isValid = false;

    /** The current accessed time for this session. */
    protected volatile long thisAccessedTime = creationTime;

    /** The access count for this session. */
    protected transient AtomicInteger accessCount = null;

    /**
     * The maximum time interval, in seconds, between client requests before the servlet container may
     * invalidate this session.  A negative time indicates that the session should never time out.
     */
    protected volatile int maxInactiveInterval = -1;

    /**
     * Return the idle time from last client access time without invalidation check
     * @see #getIdleTime()
     */
    @Override
    public long getIdleTimeInternal() {
        long timeNow = System.currentTimeMillis();
        long timeIdle;
        if (LAST_ACCESS_AT_START) {
            timeIdle = timeNow - lastAccessedTime;
        } else {
            timeIdle = timeNow - thisAccessedTime;
        }
        return timeIdle;
    }

    /**
     * Set the creation time for this session.  This method is called by the
     * Manager when an existing Session instance is reused.
     *
     * @param time The new creation time
     */
    @Override
    public void setCreationTime(long time) {
        this.creationTime = time;
        this.lastAccessedTime = time;
        this.thisAccessedTime = time;
    }

    /** Return the <code>isValid</code> flag for this session. */
    @Override
    public boolean isValid() {
        if (!this.isValid) {
            return false;
        }
        if (this.expiring) {
            return true;
        }
        if (ACTIVITY_CHECK && accessCount.get() > 0) {
            return true;
        }
        if (maxInactiveInterval > 0) {
            int timeIdle = (int) (getIdleTimeInternal() / 1000L);
            if (timeIdle >= maxInactiveInterval) {
                expire(true);
            }
        }
        return this.isValid;
    }
} 
```

获取会话前检查会话是否有效

[![获取会话前检查会话是否有效](../Images/f6c5128773931f4e09204b0cc5d9e972.png)](https://i.stack.imgur.com/BxYCY.png)

一个后台线程扫描所有会话是否已过期。

[![后台线程扫描会话](../Images/bdb6bef8e524ea175ff93a7a76555f45.png)](https://i.stack.imgur.com/MCX1Y.png)

# iphone - 由于我的代码没有错误，主线程上的后台持续时间超过了

> ID：14154698
> 
> 赞同：0
> 
> 时间：2013-01-04T09:47:53.740
> 
> 标签：iphone, ios, multithreading, ipad, nstimer

以下代码创建了一个具有主线程超时和已终止应用程序的场景。我不明白为什么。

此方法由主线程调用，根据堆栈跟踪，此调用不是同步的（它直接从 main.m 触发）。然而，为什么执行需要 20 多秒？*这个事件不是只有*在计时器触发后才会出队吗？

```
[fooObj performSelector:@selector(populate) withObject:nil afterDelay:2]; 
```

崩溃日志：

> 已用总 CPU 时间（秒）：20.060（用户 20.060，系统 0.000），100% CPU 已用应用程序 CPU 时间（秒）：19.438，97% CPU
> 
> 线程 0 名称：调度队列：com.apple.main-thread 线程 0：0
> CoreFoundation 0x3ad408b4 CFArrayGetFirstIndexOfValue + 348
> 
> 1 核心基础 0x3ad46e88 CFRunLoopRemoveTimer + 224
> 
> 2 核心基础 0x3ad46d00 CFRunLoopTimerInvalidate + 324
> 
> 3 MyApp 0x00034b94 -[容器清除] (Container.m:147)
> 
> 4 MyApp 0x000348aa -[容器填充] (Container.m:77)
> 
> 5 MyApp 0x00034f62 -[BaseContainer 填充] (BaseContainer.m:75)
> 
> 6 基础 0x35bfaa6a __NSFireDelayedPerform + 446
> 
> 7 核心基础 0x3add45dc **CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION** + 12
> 
> 8 核心基础 0x3add428c __CFRunLoopDoTimer + 268
> 
> 9 核心基础 0x3add2efc __CFRunLoopRun + 1228 10
> 
> 10 核心基础 0x3ad45eb8 CFRunLoopRunSpecific + 352
> 
> 11 核心基础 0x3ad45d44 CFRunLoopRunInMode + 100
> 
> 12 图形服务 0x391132e6 GSEventRunModal + 70
> 
> 13 UIKit 0x33f852f4 UIApplicationMain + 1116
> 
> 14 MyApp 0x000029c6 主 (main.m:14)

这是另一个出于相同原因的崩溃：MT 超时。（从日志看来，线程 0 正在等待释放它自己的互斥锁。死锁或误读日志？）

已用总 CPU 时间（秒）：20.060（用户 20.060，系统 0.000），100% CPU 已用应用程序 CPU 时间（秒）：18.175，91% CPU

线程 0 名称：调度队列：com.apple.main-thread 线程 0：

> 0 libsystem_kernel.dylib 0x32af50fc __psynch_mutexwait + 24
> 
> 1 libsystem_c.dylib 0x35e56124 pthread_mutex_lock + 388
> 
> 2 核心基础 0x3ad46df8 CFRunLoopRemoveTimer + 80
> 
> 3 基础 0x35bfaa20 __NSFireDelayedPerform + 372
> 
> 4 核心基础 0x3add45dc **CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION** + 12
> 
> 5 核心基础 0x3add428c __CFRunLoopDoTimer + 268
> 
> 6 核心基础 0x3add2efc __CFRunLoopRun + 1228
> 
> 7 核心基础 0x3ad45eb8 CFRunLoopRunSpecific + 352
> 
> 8 核心基础 0x3ad45d44 CFRunLoopRunInMode + 100
> 
> 9 图形服务 0x391132e6 GSEventRunModal + 70
> 
> 10 UIKit 0x33f852f4 UIApplicationMain + 1116
> 
> 11 空间之心 0x000029c6 主 (main.m:14)
> 
> 12 空间之心 0x00002980 0x1000 + 6528

编辑：添加了清除和填充的实现。如您所见，没有阻塞调用。

```
- (void)clear
{
    self.m_msdData = [NSMutableData dataWithLength:0];
    self.m_maItems = [NSMutableArray arrayWithCapacity:0];
    self.m_mdItems = [NSMutableDictionary dictionaryWithCapacity:0];
    [m_timer invalidate];
    self.m_timer = nil;
    self.m_nsUrlConnection = nil;

    // zz Don't change the property state, in case an observer is already listening.
    m_nState = CS_UNPOPULATED;
}

- (CONTAINER_STATE)populate
{
    [self clear];

    self.m_timer = [NSTimer scheduledTimerWithTimeInterval:TIME_OUT_SEC 
                                target:self 
                                selector:@selector(timeout) 
                                userInfo:nil 
                                repeats:NO];

    self.m_nState = CS_POPULATING;

    return CS_POPULATING;
} 
```

# python - 为什么scrapy-redis不起作用？

> ID：14154700
> 
> 赞同：1
> 
> 时间：2013-01-04T09:48:03.020
> 
> 标签：python, redis, scrapy, web-crawler

我从github下载了scrapy-redis并按照说明运行它，但它失败并给出了这个错误：

```
2013-01-04 17:38:50+0800 [-] ERROR: Unhandled error in Deferred:
2013-01-04 17:38:50+0800 [-] Unhandled Error
        Traceback (most recent call last):
          File "/usr/local/lib/python2.7/dist-packages/Scrapy-0.16.3-py2.7.egg/scrapy/cmdline.py", line 138, in _run_command
            cmd.run(args, opts)
          File "/usr/local/lib/python2.7/dist-packages/Scrapy-0.16.3-py2.7.egg/scrapy/commands/crawl.py", line 44, in run
            self.crawler.crawl(spider)
          File "/usr/local/lib/python2.7/dist-packages/Scrapy-0.16.3-py2.7.egg/scrapy/crawler.py", line 47, in crawl
            return self.engine.open_spider(spider, requests)
          File "/usr/local/lib/python2.7/dist-packages/Twisted-12.2.0-py2.7-linux-i686.egg/twisted/internet/defer.py", line 1187, in unwindGenerator
            return _inlineCallbacks(None, gen, Deferred())
        --- <exception caught here> ---
          File "/usr/local/lib/python2.7/dist-packages/Twisted-12.2.0-py2.7-linux-i686.egg/twisted/internet/defer.py", line 1045, in _inlineCallbacks
            result = g.send(result)
          File "/usr/local/lib/python2.7/dist-packages/Scrapy-0.16.3-py2.7.egg/scrapy/core/engine.py", line 218, in open_spider
            scheduler = self.scheduler_cls.from_crawler(self.crawler)
        exceptions.AttributeError: type object 'Scheduler' has no attribute 'from_crawler' 
```

如何处理？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T15:33:06.303

问题是scrapy-redis 是一年前使用scrapy 0.13 编写的。scrapy 的当前版本是 0.17，如果您将当前的 scrapy/core/engine.py[源代码与](https://github.com/scrapy/scrapy/tree/master/scrapy/core)[去年的版本进行](https://github.com/scrapy/scrapy/blob/cb9c937f50aaeaf67aba3f54cecdf6bb854aabf7/scrapy/core/engine.py)比较，您可以看到导致错误的行是在这两个版本之间的某个时间点添加的（在事实上，它是在 2012 年[8 月 21 日](https://github.com/scrapy/scrapy/blob/1e12c92b8f4114b75bac7bed714d2e59e12b701d/scrapy/core/engine.py)添加的）

简而言之，错误的发生是因为scrapy-redis 不再与当前版本的scrapy 兼容。可能值得联系开发人员询问他/她项目是否仍然处于活动状态，否则将有必要分叉存储库并自己修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-05T04:58:23.057

好吧，我对旧的 scrapy-redis 进行了一些更改，以与 scrapy 0.17 兼容。它没有经过全面测试。这是[代码](https://github.com/RushMind/scrapy-redis)。

# ruby - ROR 代码发送许多邮件

> ID：14154701
> 
> 赞同：2
> 
> 时间：2013-01-04T09:48:03.743
> 
> 标签：ruby, ruby-on-rails-3, function, session

我有以下 ROR 代码

```
def func (point,c,r)          
  res=isPointInCircle(point,c,r) #returns  true/ false
 if res=='false'               
   AlertMailer.geofence('mail@gmail.com').deliver
 end
end 
```

func 每 2 分钟调用一次，不同点。

isPointInCircle 检查点是否在圆内。返回真假。

我想在第一次在圈外或圈内时发送邮件。

*   表示最初点是否在内部 1 小时。

    没有邮件

*   如果它出去

    我希望发送一封不会发生的邮件，

    因为 func 每 2 分钟调用一次。所以电子邮件每 2 分钟发送一次，这是我不想要的。

那么如何做到这一点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T10:18:51.200

您可以检查之前的状态是否与当前状态相同，只有在有变化时才发送邮件（点在圈内，之前在圈外，反之亦然）。

```
def func(point, c, r)
  status = point_in_circle?(point, c, r)
  if last_status != status
    AlertMailer.geofence('mail@gmail.com').deliver
  end
end 
```

`last_status`如果不了解您的应用程序，很难说如何实现。如果有`Point`模型，我可能会添加`in_circle?`为实例方法。然后您可以从数据库中获取上一点并比较两者：

```
def check_point_status(current, previous, c, r)
  if current.in_circle?(c, r) != previous.in_circle?(c, r)
    AlertMailer.geofence('mail@gmail.com').deliver
  end
end 
```

一些提示：Ruby 通常将`snake_case`not`camelCase`用于变量和函数，并且“谓词”方法（返回 true/false）通常在末尾用问号命名，表示它们是是/否问题。您不需要代码中的注释，因为很明显`point_in_circle?`返回 true 或 false。

此外，您的代码建议您的函数返回`"true"`或`"false"`作为字符串，这是一个非常糟糕的主意！如果您使用实际的布尔值`true`or `false`，您可以将原始代码编写为

```
def func(point, c, r)          
  unless point_in_circle?(point, c, r)             
    AlertMailer.geofence('mail@gmail.com').deliver
  end
end 
```

# php - 从给出错误的函数调用灰框弹出窗口

> ID：14154703
> 
> 赞同：1
> 
> 时间：2013-01-04T09:48:06.577
> 
> 标签：php, function, popup, greybox

根据 stackoverflow 中给出的示例，我尝试了灰色框弹出窗口，从基于我的 php 程序中的 if 条件的函数调用。

它给出了一个错误，如： Parse error: syntax error, unexpected '=' in /home/public_html/atst/dc-detail-qty.php on line 456

如果条件为 true 的 php 部分代码，灰色框弹出窗口应该可以工作：

```
if($dcecrbal < 0)
{
$pop=100;
echo "<span class='sty1'>Negative Bal: ".$dcecrbal." (Total ECR: ".$ecrdtl." - Total DCs: ".$dcdtl.") </span>";
//echo "<script>child_open();</script>";

echo "<script>";
pathArr = window.location.pathname.split('/');
    path = window.location.protocol + "//" + window.location.host+"/";
    for (i=1;i<pathArr.length-1;i++) path += pathArr[i]+"/";

    GB_showCenter('ECR', path+'ecrframe-qty.php' , 800, 600);
echo "</script>";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:54:25.700

应该是这样的

```
echo "<script>
      pathArr = window.location.pathname.split('/');
    path = window.location.protocol + '//' + window.location.host+'/';
    for (i=1;i<pathArr.length-1;i++) path += pathArr[i]+'/';

    GB_showCenter('ECR', path+'ecrframe-qty.php' , 800, 600)";
echo "</script>"; 
```

# ios - 如何使用OpenGL避免透明度重叠？

> ID：14154704
> 
> 赞同：6
> 
> 时间：2013-01-04T09:48:08.540
> 
> 标签：ios, opengl-es, transparency, alpha, overlap

我正在开发 iOS 上的手写应用程序。我从 OpenGL ES 实现的 iOS 文档中找到了示例项目“GLPaint”，并对其进行了一些修改。

我跟踪触摸点并计算点之间的曲线并单独绘制粒子图像曲线使其看起来像手指经过的地方。

```
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, brushData); // burshData is from CGImage, it is 

// vertexBuffer is generated based on the calculated points, it's just a sequence of point where need to draw image.
glVertexPointer(2, GL_FLOAT, 0, vertexBuffer); 
glDrawArrays(GL_POINTS, 0, vertexCount);

glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer);
[context presentRenderbuffer:GL_RENDERBUFFER_OES]; 
```

我得到的是一条看起来相当不错的实线。但现在我想画半透明高光而不是实线。所以我用 50% 的透明度替换粒子图像而不更改代码。

[50% 透明度粒子图像的结果](https://twitter.com/jun_jia0127/status/287132486004248576/photo/1)

![50% 透明度粒子图像的结果](../Images/882bf024b2baac22da45a479651882ee.png)

混合有问题。

[我需要的](https://twitter.com/jun_jia0127/status/287132555986231296/photo/1)

![我需要的](../Images/17ea685b9473e4d4ae1eafd9cbe5a6d5.png)

我用半透明粒子图画了三个点，相交区域要保持50%的透明度。

解决方案是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-09-18T16:34:44.713

我可能会在两年后回答这个问题，但我希望它可以帮助那些来这里寻找解决这个问题的人，就像它发生在我身上一样。

您将需要为每个圆圈分配不同的 z 值。不管这个差异有多大或多小，我们只需要它们不严格相等即可。

首先，您禁用在颜色缓冲区中的写入`glColorMask(false,false,false,false)`，然后正常绘制圆圈。Z 缓冲区将根据需要更新，但尚未绘制任何圆圈。

然后，启用颜色缓冲区 ( `glColorMask(true,true,true,true)`) 中的写入并将 depthFunc 设置为 LEQUAL ( `glDepthFunc(GL_LEQUAL)`)。只有最近的圆形像素才能通过深度测试（将其设置为 LEQUAL 而不是 EQUAL 会处理一些罕见但可能的浮点近似错误）。启用混合并再次绘制它们将产生您想要的图像，没有透明度重叠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T09:54:14.437

您必须更改混合功能。你可以玩它：

```
glBlendFunc(GL_SRC_ALPHA,GL_ONE); 
```

也许`(GL_ONE, GL_ONE)`，忘记了如何处理你的情况，但解决方案就在那个函数中。

[http://www.opengl.org/sdk/docs/man/xhtml/glBlendFunc.xml](http://www.opengl.org/sdk/docs/man/xhtml/glBlendFunc.xml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-10T06:11:34.940

迟到的回复，但希望对其他人有用。

避免这种影响的另一种方法是在绘制透明圆圈之前抓取颜色缓冲区（即执行 GrabPass），然后在圆圈的片段着色器中手动读取和混合不透明缓冲区。

# c - Winapi 多个 Windows 相同的 WindowProc

> ID：14154710
> 
> 赞同：1
> 
> 时间：2013-01-04T09:48:22.160
> 
> 标签：c, winapi

我正在使用 WINAPI 开发 GUI，我有一个问题。我用相应的程序制作了一个自定义进度条来处理它的消息。我自己绘制进度条。对于进度条百分比，我使用使用自定义消息更新的静态变量，然后使用 InvalidateRect 重新绘制进度条。现在我该如何优化我的代码，以便我可以创建我的 ProgressBar 类的多个窗口。问题是我不能对所有这些都使用相同的静态百分比变量！所以每个实例都应该有它自己的百分比变量。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T12:43:23.230

所有窗口都至少有一个指针大小的用户数据变量，您可以将其用于任何您喜欢的目的——通过`GetWindowLongPtr`/`SetWindowLongPtr`使用 index访问它`GWLP_USERDATA`。

此外，当您注册一个窗口类时，您可以使用`WNDCLASS`成员指定要为类中的每个窗口分配的附加用户数据`cbWndExtra`。例如，如果在注册类时将其设置为 sizeof(DWORD_PTR)，则还可以使用`SetWindowLongPtr`索引 0 存储 DWORD_PTR 大小的值。

根据每个窗口要存储多少数据，您可以使用上述方法直接存储它，或者分配自己的结构并存储指向它的指针（记住在窗口被销毁时释放数据）。

每个窗口存储数据的另一种方法是通过`SetProp`and`GetProp`函数使用窗口属性，它允许您存储一个或多个指针大小的名称/值对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:01:11.167

不要将百分比变量设为静态。使其成为课程的一部分并从 getter/setter 读取/写入

# ios - 我想在选择后更改 UISegmentedControl 图像

> ID：14154712
> 
> 赞同：0
> 
> 时间：2013-01-04T09:48:33.113
> 
> 标签：ios, image, nsarray, uisegmentedcontrol

我有 UISegmentedControl 对象，我在其中获取了图像数组。现在我想在选择每个对象后更改这些图像，例如 UIButton 控件，我们可以在其中设置图像以供选择和非选择。这是我的代码

```
NSArray *itemArray;
        itemArray = [NSArray arrayWithObjects:
                     [UIImage imageNamed:@"grey.png"],
                     [UIImage imageNamed:@"overlay.png"],
                     [UIImage imageNamed:@"marker.png"],
                     nil];

    segmentedControl = [[UISegmentedControl alloc] initWithItems:itemArray];
    segmentedControl.segmentedControlStyle = UISegmentedControlStyleBar;
    [segmentedControl addTarget:self action:@selector(segmentedControlIndexChanged) forControlEvents:UIControlEventValueChanged]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:07:23.963

您可以在 iOS 5 中使用自己的图像为选定状态和正常状态自定义分段控制试试这个：

```
 UIImage *segmentSelected = 
[[UIImage imageNamed:@"segcontrol_sel.png"] 
    resizableImageWithCapInsets:UIEdgeInsetsMake(0, 15, 0, 15)];
 UIImage *segmentUnselected = 
[[UIImage imageNamed:@"segcontrol_uns.png"] 
    resizableImageWithCapInsets:UIEdgeInsetsMake(0, 15, 0, 15)];
 UIImage *segmentSelectedUnselected = 
[UIImage imageNamed:@"segcontrol_sel-uns.png"];
  UIImage *segUnselectedSelected = 
[UIImage imageNamed:@"segcontrol_uns-sel.png"];
UIImage *segmentUnselectedUnselected = 
[UIImage imageNamed:@"segcontrol_uns-uns.png"];

[[UISegmentedControl appearance] setBackgroundImage:segmentUnselected 
forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
  [[UISegmentedControl appearance] setBackgroundImage:segmentSelected 
forState:UIControlStateSelected barMetrics:UIBarMetricsDefault];

     [[UISegmentedControl appearance] setDividerImage:segmentUnselectedUnselected 
forLeftSegmentState:UIControlStateNormal 
rightSegmentState:UIControlStateNormal 
barMetrics:UIBarMetricsDefault];
 [[UISegmentedControl appearance] setDividerImage:segmentSelectedUnselected 
forLeftSegmentState:UIControlStateSelected 
rightSegmentState:UIControlStateNormal 
barMetrics:UIBarMetricsDefault];
  [[UISegmentedControl appearance] 
setDividerImage:segUnselectedSelected 
forLeftSegmentState:UIControlStateNormal 
rightSegmentState:UIControlStateSelected 
barMetrics:UIBarMetricsDefault]; 
```

您还可以在 [http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5检查完整的 UI 自定义](http://www.raywenderlich.com/4344/user-interface-customization-in-ios-5)

# ruby - sreelipi Indian devenagari 字体的 Ruby 字符编码

> ID：14154720
> 
> 赞同：0
> 
> 时间：2013-01-04T09:48:53.220
> 
> 标签：ruby, encoding

我是 Ruby 新手，我正在尝试编写一个脚本（Windows XP 上的 Ruby 1.9.3），它将使用 WIN32OLE 库自动从 InDesign 文档中提取文本。

InDesign 文档包含 ShreeLipi 字体（印度梵文脚本）的文本。我的 Ruby 脚本是：

需要'win32ole'

```
app = WIN32OLE.new('InDesign.Application')
doc = app.activeDocument
text_frame = doc.textFrames(1)
text = text_frame.contents #=> "emhy ‘hmamOm§Mo ñ‘maH$ emhy {‘b‘Ü¶o C^mam"
puts text.encoding.name #=> "IBM437"
file = File.open('D:/try.txt','w')
file.puts text
file.close 
```

当我打开同一个文件以使用记事本查看文本时，它显示：

```
"emhy `hmamOmMo ¤`maH$ emhy {`b`šo C^mam" 
```

我不明白为什么会这样。请帮我改正。我尝试使用 Windows-1252 编码和 ISO-8859-1 来解决它，但找不到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T07:07:58.073

写入文件时，您没有保留字节。而不是这样做：

```
file = File.open('D:/try.txt','w') 
```

利用：

```
file = File.open('D:/try.txt','wb') 
```

以二进制形式编写的`b`方法，用简单的英语来说，意味着不进行行尾转换。

# deployment - Cloudbees 和 Github：错误：密钥已在使用中

> ID：14154721
> 
> 赞同：2
> 
> 时间：2013-01-04T09:48:54.080
> 
> 标签：deployment, github, public-key, cloudbees

我想将构建结果推送到 github，因此我使用 Git 发布者插件。但是，当我尝试将来自 Cloudbees 的 SSH 公钥添加为 Github 上的部署密钥时，Github 会告诉我：“密钥已在使用中”，因为它也是另一个存储库的一部分。

我想知道为什么我不能对多个独立的存储库使用相同的公钥？

[更新]到目前为止的答案表明问题尚不清楚。Cloudbees 生成一个密钥对并在 github 上使用它，我还没有找到创建备用密钥对的方法，所以我只能使用一对密钥。

我已将公钥添加到存储库 A，以便 Cloudbees 可以从存储库 A 中提取。但是，我想使用相同的构建推送到存储库 B。因此将相同的（我的个人 Cloudbees 密钥）添加到存储库似乎是合乎逻辑的B 所以 cloudbees 也可以推送到 repo B。

但是，在 Github 上，只有一个 repo 可以使用部署密钥：

> 部署密钥是存储在服务器上并授予对 GitHub 上单个存储库的访问权限的 SSH 密钥。此密钥直接附加到存储库而不是用户帐户。

所以很明显，公钥不能附加到多个 repo。但是，我想不出为什么会这样？

有人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T08:11:52.003

您需要为用户设置 ssh 密钥，而不是存储库，因此您可以将其用于多个 github 存储库。github不允许在多个位置使用相同的密钥

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T06:12:16.823

因为密钥是用来识别用户的。这就像你只会使用密码来识别用户：如果两个用户有相同的密码，你怎么知道哪个是哪个？

密钥应该对用户是唯一的。

但是，您可以在同一台机器上生成多个密钥并将 git/ssh 配置为[使用特定密钥](http://www.springloops.com/blog/git-config-for-mutiply-ssh-keys/)而不是默认密钥`~/.ssh/id_rsa.pub`（或其他`id_*.pub`密钥）。

# java - 我如何用Java取回脚本PHP中包含的数据的源数据

> ID：14154722
> 
> 赞同：0
> 
> 时间：2013-01-04T09:48:52.793
> 
> 标签：java, php, sqlite

我解释说，我尝试使用 jdbc:sqlite:mydb 用 Ja​​va 打开我的服务器中包含的数据库 .sqlite，但它不起作用，因为我的数据库“.sqlite”很远，所以我创建了一个基于我的服务器的脚本 php取回我所有的数据库。

所以我的问题我怎样才能用Java取回脚本PHP中包含的数据的源数据？

非常感谢！

PS：对不起我的英语（我是法国人）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T09:53:18.097

一种方法是在 PHP 中创建一个提供数据的服务，以便您的 Java 应用程序可以使用它。

例如，PHP 可以以 XML 或 JSON 格式（例如通过 HTTP）公开数据。然后，您的 Java 应用程序将调用 HTTP URL 并以 JSON/XML/其他格式接收数据，然后对其进行解析以从该格式中提取数据。

还有其他方法，例如，服务总线可以在不同系统之间代理数据，但这需要更多的设置（尽管从长远来看，它确实有价值，如果你不断添加你想暴露给更多的数据和更多系统）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:22:40.357

您可以创建 PHP WebService 服务器并编写一些函数来操作该数据库数据以解决您的问题。然后只需使用 Java 将肥皂连接到您创建的 WebService 函数。

如何启动webservice，试试看这个： http: [//greatgandhi.wordpress.com/2009/11/25/create-a-php-webservice-in-5min-using-php-soap-and-wsdl-technology -nusoap/](http://greatgandhi.wordpress.com/2009/11/25/create-a-php-webservice-in-5min-using-php-soap-and-wsdl-technology-nusoap/)

如果您需要将一些数据发送回远程数据库，这是我所知道的最好方法。它有点复杂，但操作远程数据的方法更正确。

# visual-c++ - 使用带有 operator() 的 C++ 类时，Visual Studio 2012 类视图性能不佳

> ID：14154724
> 
> 赞同：2
> 
> 时间：2013-01-04T09:49:07.360
> 
> 标签：visual-c++, ide, visual-studio-2012, operators

您好，我在 Visual 2012 中的类视图有问题。我有一个简单的类

```
class Test
{
public:
    Test(void);
    ~Test(void);

    void operator()(int n)
    {
    }

    void operator()(double d)
    {
    }
}; 
```

当我打开类视图并突出显示该类时，它会挂起整个 IDE 几秒钟。使用 Test 类并没有那么可怕，但是添加更多的运算符会使事情变得更糟。

任何人都知道如何使用包含自定义 operator() 的类来提高性能？

编辑：哦，我正在使用的机器非常强大：CPU：Intel Core i7-2700 3,5GHz RAM：16GB GPU：Nvidia GeForce GT440

SSD 上的一切。这应该很快处理这种类;）

# objective-c - 在 UITextField 中拉伸背景图像。它是一个错误吗？

> ID：14154730
> 
> 赞同：1
> 
> 时间：2013-01-04T09:49:28.217
> 
> 标签：objective-c, uitextfield, storyboard

我试图通过 Storyboard 向 UITextField 添加背景图像，但发现了一个奇怪的错误。当我试图在属性检查器的视图部分下更改拉伸时，文本字段中的背景图像根本不会改变。我也尝试过使用 .xib 文件执行此操作，但得到了相同的结果。我在 UIButtons 中也得到了相同的结果。

自己试试。将文本字段放入视图控制器并向其添加背景图像并将拉伸设置为`0.5, 0.5, 0, 0`You should get nothing。

那么，这是一个真正的错误还是我做错了什么？

# android - 如何从 sd 卡在 android 中加载 xml 布局文件

> ID：14154731
> 
> 赞同：1
> 
> 时间：2013-01-04T09:49:31.367
> 
> 标签：android, android-layout, android-emulator

我想从我的 android 设备的 sd 卡在我的活动中加载 android XML 布局文件？这可能吗？任何帮助表示赞赏。

编辑：实际上我的要求是在 sd 卡上进行布局，以便我可以随时修改它，并且更改将显示在我的布局中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:52:40.623

**不，这是不可能的。**

要将 XML 文件设置为活动中的布局，您必须将该文件放在 res/layout 目录中，并确保它是 R.java 文件中的 id 条目。

如果不将其保留在 res/layout 中，您将无法将其作为布局应用到您的活动中。

基本上，当您将任何 xml 布局文件放入 res/layout 时，它就是在

```
 public static final class layout 
```

在 R.java 文件中，当您将该文件设置为活动的 setcontentView() 或对其进行膨胀时，android nutshell 会从该原始布局 xml 文件中创建一个视图并将其应用于您的活动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:59:04.720

从加载`XML Layout`文件`SD CARD`根本不可能，因为

1.  `XML Layout`文件资源需要生成 id `R.java-Java Generated File`，只能在编译时生成。如果您在编写应用程序时简单地将其`XML Layout`从 SD-CARD 复制到文件夹，则可以生成`res/layout/`

2.  `R.java-Java Generated`需要文件来连接`Java code`和`XML Layout`文件。如果您在应用程序中使用过该`XML Layout`文件`resources e.g[Button,EditText etc..,]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T09:59:58.347

不可能，因为 xml 布局是以特定格式编译的。您需要编译 xml 并将其注入 apk，这在设备本身上是不可行的。

# ios - 使用情节提要的uitableview详细视图

> ID：14154742
> 
> 赞同：0
> 
> 时间：2013-01-04T09:50:04.500
> 
> 标签：ios, storyboard, segue, uistoryboardsegue

我是故事板的新手。我试图创建一个带有静态单元格的表格视图（1 节有 2 行）。现在我需要去不同的观点来记录行。

如何连接界面生成器中的视图？

此方法不是必需的，因为我没有将任何数据传递给下一个视图。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    NSLog(@"%@",segue.identifier);

} 
```

我需要在点击表格行时显示静态视图。

在界面生成器中，我无法为一个部分创建超过 1 个 segue。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:22:00.203

1.  在单独的窗口中打开您的故事板，以便您的源代码也可以在显示器上看到；
2.  打开您的 *.h 文件（可能声明了您的主视图控制器）；
3.  在界面生成器中，将要使用的事件拖到 *.h 文件中。xcode 会在你拖动它的地方绘制一个类似于占位符的东西，当你放下它时，它会为你生成 IBaction 方法。只需实现它（使用 segues 或其他东西）就可以了。

prepareForSegue 是不同的东西。您也可以使用 segue（将 segue 视为控制器到控制器移动的描述符），但这是一个不同的工作流程。有大量关于此的文档。

# twitter-bootstrap - Twitter Bootstrap 仅在电话上折叠组

> ID：14154744
> 
> 赞同：6
> 
> 时间：2013-01-04T09:50:05.773
> 
> 标签：twitter-bootstrap

我有一个使用 Twitter Bootstrap 编写的网站。我想折叠网站上的一组按钮，但仅当在手机上查看该网站时。因此，当用户在他们的计算机上查看网站时，他们会看到所有按钮，但是当他们在电话上时，他们只会看到一个按钮，上面写着“更多详细信息”之类的内容，当他们按下它时，所有按钮都会显示出来。

到目前为止，我得到了：

```
<div class="collapse-group">
  <ul class="menu row collapse" id="IndustriesMenu">
    <li><a class="btn" href="#">Button 1</a></li>
    <li><a class="btn" href="#">Button 2</a></li>
    <li><a class="btn" href="#">Button 3</a></li>
  </ul>
  <a class="btn" data-toggle="collapse" data-target="#IndustriesMenu">View details</a>
</div> 
```

这目前有效，但默认情况下按钮在所有设备上折叠，而不仅仅是手机。任何帮助总是受到赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T21:38:52.117

看看这是否对您有帮助：http: [//jsfiddle.net/panchroma/7fYVD/](http://jsfiddle.net/panchroma/7fYVD/)

[这是http://twitter.github.com/bootstrap/components.html#navbar](http://twitter.github.com/bootstrap/components.html#navbar)上响应式导航栏的简化版本

HTML 如下。

祝你好运！

```
<div class="navbar">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".IndustriesMenu" style="color:black;">view details
      </a>
      <!-- Everything you want hidden at 940px or less, place within here -->
      <div class="nav-collapse collapse IndustriesMenu">
        <ul class="nav">
          <li><a href="#">Button 1</a></li>
          <li><a href="#">Button 2</a></li>
          <li><a href="#">Button 3</a></li>
        </ul>
      </div><!-- /.nav-collapse -->
    </div>
  </div><!-- /navbar-inner -->
</div> 
```

# java - 是否可以将本机系统输入发送到 java 应用程序？

> ID：14154745
> 
> 赞同：0
> 
> 时间：2013-01-04T09:50:13.353
> 
> 标签：java, c++, c, winapi

我知道我可以使用 Java 中的 Robot 类来生成本机系统输入，但是是否可以对使用 C/C++ 和 Windows SDK 的 Java 应用程序执行相同的操作？

我不确定Java如何注册这样的东西，但也许它使用Windows消息或原始输入？

谁能指出我正确的方向？

# xcode - 如何在 UITableView 的所有自定义单元格中启用 UISwitch

> ID：14154751
> 
> 赞同：0
> 
> 时间：2013-01-04T09:50:25.480
> 
> 标签：xcode, uitableview, uiswitch

我有一个`UITableView`用`custom cell`. 每个自定义单元格中都有一个 UISwitch，就像 iPhone 中的闹钟应用程序一样。`UISwitch`我想在我的`UITableView`细胞中启用每一个。请帮我 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T14:57:27.237

我找到了我的答案：

```
MyTableView.allowsSelection=NO;

MyTableView.allowsSelectionDuringEditing=YES; 
```

这部作品非常好...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:25:45.210

这段代码不是通用的，你应该重构它，但这是主要思想。

```
- (void)enableOnlyAllTheSwitches{
    int objectsCount = [myObjectsDataStructure count];
    for (int i=0; i++; i<objectsCount){
        NSIndexPath *cellIndexPath = [NSIndexPath indexPathForRow:i inSection:0];
        MyCustomTableViewCell *cell = [self.myTableView cellForRowAtIndexPath:cellIndexPath];
        [cell.switch setOn:YES animated:YES];
    }
} 
```

# quartz.net - Quartz.net 作业每天在给定时间以毫秒间隔开始

> ID：14154752
> 
> 赞同：0
> 
> 时间：2013-01-04T09:50:30.913
> 
> 标签：quartz.net

我正在尝试 Quartz.net，它可能会解决我的一个问题。但是，我似乎无法找到一种方法在一天中的给定时间（07:30）开始工作，以毫秒（1）为间隔运行多次（1000）。

我尝试了 CronSchedule，但无法设置间隔。使用 SimpleSchedule，无法设置开始时间，使用 DailyTimeIntervalSchedule 我无法设置以毫秒为单位的间隔。我还尝试将设置与 varoius 与流利的 api 结合起来，没有 avale。

我试图实现的目标在 Quartz.net 中实际上是不可能的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-06T15:29:40.010

这可能是你所追求的：

```
IJobDetail theJobToRun = JobBuilder.Create<NoOpJob>().Build();
var trigger = TriggerBuilder.Create()
                        .StartAt(DateBuilder.DateOf(7, 30, 0))
                        .WithSimpleSchedule(x => x
                                        .WithInterval(TimeSpan.FromMilliseconds(1))
                                        .WithRepeatCount(999))
                        .ForJob(theJobToRun)
                        .Build(); 
```

正如 sgmoore 所指出的，您可能无法获得毫秒精度，因为您的线程池将充满工作，这完全取决于它们的真实工作量。Quartz.NET 基础设施也将花时间观察触发时间和实例化作业。

# http - 如何从 Rust 发出 HTTP 请求？

> ID：14154753
> 
> 赞同：88
> 
> 时间：2013-01-04T09:50:32.693
> 
> 标签：http, rust

如何从 Rust 发出 HTTP 请求？我似乎在核心库中找不到任何东西。

我不需要解析输出，只需发出请求并检查 HTTP 响应代码。

如果有人可以向我展示如何对我的 URL 上的查询参数进行 URL 编码，则加分！

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-01-07T02:30:01.750

在 Rust 中发出 HTTP 请求的最简单方法是使用[reqwest](https://crates.io/crates/reqwest) crate：

```
use std::error::Error;

fn main() -> Result<(), Box<dyn Error>> {
    let resp = reqwest::blocking::get("https://httpbin.org/ip")?.text()?;
    println!("{:#?}", resp);
    Ok(())
} 
```

在`Cargo.toml`：

```
[dependencies]
reqwest = { version = "0.11", features = ["blocking"] } 
```

## 异步

Reqwest 还支持使用[Tokio发出](https://tokio.rs/)*异步*HTTP 请求：

```
use std::error::Error;

#[tokio::main]
async fn main() -> Result<(), Box<dyn Error>> {
    let resp = reqwest::get("https://httpbin.org/ip")
        .await?
        .text()
        .await?;
    println!("{:#?}", resp);
    Ok(())
} 
```

在`Cargo.toml`：

```
[dependencies]
reqwest = "0.11"
tokio = { version = "1", features = ["full"] } 
```

## 超

Reqwest 是一个易于使用的[Hyper](https://hyper.rs/)包装器，Hyper是一个流行的 Rust 的 HTTP 库。如果您需要对管理连接进行更多控制，您可以直接使用它。下面是一个基于[Hyper](https://hyper.rs/)的示例，其灵感主要来自[其文档中的示例](https://hyper.rs/guides/client/basic/)：

```
use hyper::{body::HttpBody as _, Client, Uri};
use std::error::Error;

#[tokio::main]
async fn main() -> Result<(), Box<dyn Error>> {
    let client = Client::new();

    let res = client
        .get(Uri::from_static("http://httpbin.org/ip"))
        .await?;

    println!("status: {}", res.status());

    let buf = hyper::body::to_bytes(res).await?;

    println!("body: {:?}", buf);
} 
```

在`Cargo.toml`：

```
[dependencies]
hyper = { version = "0.14", features = ["full"] }
tokio = { version = "1", features = ["full"] } 
```

## 原始答案（Rust 0.6）

我相信您正在寻找的是[标准库](http://static.rust-lang.org/doc/master/std/index.html)。现在在[rust-http](http://github.com/chris-morgan/rust-http)和 Chris Morgan 的答案是在可预见的未来当前 Rust 的标准方式。我不确定我能带你走多远（希望我不会带你走错方向！），但你会想要这样的东西：

```
// Rust 0.6 -- old code
extern mod std;

use std::net_ip;
use std::uv;

fn main() {
    let iotask = uv::global_loop::get();
    let result = net_ip::get_addr("www.duckduckgo.com", &iotask);

    io::println(fmt!("%?", result));
} 
```

至于编码，在 src/libstd/net_url.rs 的单元测试中有一些例子。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-09-27T14:01:02.620

## 更新：这个答案指的是相当古老的历史。对于当前的最佳实践，请查看[Isaac Aggrey 的答案](https://stackoverflow.com/a/14189088/493729)。

* * *

我一直在研究[rust-http](http://github.com/chris-morgan/rust-http)，它已经成为 Rust 的*事实上*的HTTP 库（Servo 使用它）；目前它还远未完成，而且文档记录也很差。这是一个发出请求并使用状态码执行某些操作的示例：

```
extern mod http;
use http::client::RequestWriter;
use http::method::Get;
use http::status;
use std::os;

fn main() {
    let request = RequestWriter::new(Get, FromStr::from_str(os::args()[1]).unwrap());
    let response = match request.read_response() {
        Ok(response) => response,
        Err(_request) => unreachable!(), // Uncaught condition will have failed first
    };
    if response.status == status::Ok {
        println!("Oh goodie, I got me a 200 OK response!");
    } else {
        println!("That URL ain't returning 200 OK, it returned {} instead", response.status);
    }
} 
```

使用 URL 作为唯一的命令行参数运行此代码，它将检查状态代码！（仅限 HTTP；无 HTTPS。）

比较`src/examples/client/client.rs`一个做得更多的例子。

rust-http 正在跟踪 rust 的 master 分支。~~目前它可以在刚刚发布的 Rust 0.8 中工作，但很快就会有重大变化。~~ *实际上，没有任何版本的 rust-http 可以在 Rust 0.8 上运行——在发布之前，隐私规则中存在一个无法解决的重大变化，导致 rust-http 依赖于 extra::url 的某些内容无法访问。这已被修复，但它使 rust-http 与 Rust 0.8 不兼容。*

* * *

至于查询字符串编码的事情，目前应该用[`extra::url::Query`](http://static.rust-lang.org/doc/master/extra/url/typedef.Query.html)(a typedef for `~[(~str, ~str)]`)来完成。适当的转换函数：

*   [`extra::url::query_to_str`](http://static.rust-lang.org/doc/master/extra/url/fn.query_to_str.html)

*   [`extra::url::query_from_str`](http://static.rust-lang.org/doc/master/extra/url/fn.query_from_str.html)（抱歉，目前不能使用，因为它是私有的。PR 即将公开。同时，这个链接实际上不应该工作，它只是因为[https://github.com/才可用Mozilla/rust/issues/7476](https://github.com/mozilla/rust/issues/7476) .)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2014-10-06T09:06:51.297

使用 curl 绑定。把它贴在你的`Cargo.toml`：

```
[dependencies.curl]
git = "https://github.com/carllerche/curl-rust" 
```

...这在`src/main.rs`：

```
extern crate curl;

use curl::http;

fn main(){
  let resp = http::handle()
    .post("http://localhost:3000/login", "username=dude&password=sikrit")
    .exec().unwrap();

  println!("code={}; headers={}; body={}",
    resp.get_code(), resp.get_headers(), resp.get_body());    

} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2020-12-01T03:15:12.577

我更喜欢依赖计数低的板条箱，所以我会推荐这些：

## [MinReq](//lib.rs/crates/minreq)（0 次）

```
use minreq;

fn main() -> Result<(), minreq::Error> {
   let o = minreq::get("https://speedtest.lax.hivelocity.net").send()?;
   let s = o.as_str()?;
   print!("{}", s);
   Ok(())
} 
```

## [HTTP_Req](//lib.rs/crates/http_req) (35 次)

```
use {http_req::error, http_req::request, std::io, std::io::Write};

fn main() -> Result<(), error::Error> {
   let mut a = Vec::new();
   request::get("https://speedtest.lax.hivelocity.net", &mut a)?;
   io::stdout().write(&a)?;
   Ok(())
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-09-03T11:23:08.483

为了详细说明[Isaac Aggrey 的答案，这里有一个使用](https://stackoverflow.com/a/14189088/155423)[reqwest](https://crates.io/crates/reqwest)库发出带有查询参数的 POST 请求的示例。

货运.toml

```
[package]
name = "play_async"
version = "0.1.0"
edition = "2018"

[dependencies]
reqwest = "0.10.4"
tokio = { version = "0.2.21", features = ["macros"] } 
```

代码

```
use reqwest::Client;

type Error = Box<dyn std::error::Error>;
type Result<T, E = Error> = std::result::Result<T, E>;

async fn post_greeting() -> Result<()> {
    let client = Client::new();
    let req = client
        // or use .post, etc.
        .get("https://webhook.site/1dff66fd-07ff-4cb5-9a77-681efe863747")
        .header("Accepts", "application/json")
        .query(&[("hello", "1"), ("world", "ABCD")]);

    let res = req.send().await?;
    println!("{}", res.status());

    let body = res.bytes().await?;

    let v = body.to_vec();
    let s = String::from_utf8_lossy(&v);
    println!("response: {} ", s);

    Ok(())
}

#[tokio::main]
async fn main() -> Result<()> {
    post_greeting().await?;

    Ok(())
} 
```

转到[https://webhook.site](https://webhook.site)并创建您的 webhook 链接并更改代码以匹配。您将看到服务器上实时收到请求。

此示例最初基于[Bastian Gruber 的示例](https://github.com/gruberb/futures_playground/tree/6aecaf3c43df040431ab6bd7026dfc9dfa1013d5)，并已针对现代 Rust 语法和更新的 crate 版本进行了更新。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-05-27T14:21:40.510

基于[Patrik Stas 的回答](https://stackoverflow.com/a/57770687/1042151)，如果您想做一个 HTTP 表单 URL 编码的 POST，这就是您必须做的。在这种情况下，它是获取 OAuth`client_credentials`令牌。

货运.toml

```
[dependencies]
reqwest = "0.10.4"
tokio = { version = "0.2.21", features = ["macros"] } 
```

代码

```
use reqwest::{Client, Method};

type Error = Box<dyn std::error::Error>;
type Result<T, E = Error> = std::result::Result<T, E>;

async fn print_access_token() -> Result<()> {
    let client = Client::new();
    let host = "login.microsoftonline.com";
    let tenant = "TENANT";
    let client_id = "CLIENT_ID";
    let client_secret = "CLIENT_SECRET";
    let scope = "https://graph.microsoft.com/.default";
    let grant_type = "client_credentials";

    let url_string = format!("https://{}/{}/oauth2/v2.0/token", host, tenant);
    let body = format!(
        "client_id={}&client_secret={}&scope={}&grant_type={}",
        client_id, client_secret, scope, grant_type,
    );
    let req = client.request(Method::POST, &url_string).body(body);

    let res = req.send().await?;
    println!("{}", res.status());

    let body = res.bytes().await?;

    let v = body.to_vec();
    let s = String::from_utf8_lossy(&v);
    println!("response: {} ", s);

    Ok(())
}

#[tokio::main]
async fn main() -> Result<()> {
    print_access_token().await?;

    Ok(())
} 
```

这将打印如下内容。

```
200 OK
response: {"token_type":"Bearer","expires_in":3599,"ext_expires_in":3599,"access_token":"ACCESS_TOKEN"} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-02-03T21:34:51.410

使用[超](https://hyper.rs/)“0.13”

还使用[hyper-tls](https://crates.io/crates/hyper-tls)支持 HTTPS。

文件*Cargo.toml*

```
hyper = "0.13"
hyper-tls = "0.4.1"
tokio = { version = "0.2", features = ["full"] } 
```

### 代码

```
extern crate hyper;
use hyper::Client;
use hyper::body::HttpBody as _;
use tokio::io::{stdout, AsyncWriteExt as _};
use hyper_tls::HttpsConnector;

#[tokio::main]
async fn main() -> Result<(), Box<dyn std::error::Error + Send + Sync>> {
    // HTTP only
    // let client = Client::new();

    // http or https connections
    let client = Client::builder().build::<_, hyper::Body>(HttpsConnector::new());

    let mut resp = client.get("https://catfact.ninja/fact".parse()?).await?;

    println!("Response: {}", resp.status());

    while let Some(chunk) = resp.body_mut().data().await {
        stdout().write_all(&chunk?).await?;
    }

    Ok(())
} 
```

改编自[https://hyper.rs/guides/client/basic/](https://hyper.rs/guides/client/basic/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-03-08T20:26:26.777

在此处删除使用[`surf`](https://github.com/http-rs/surf)板条箱的版本（与板条箱双重[`tide`](https://github.com/http-rs/tide)）：

```
let res = surf::get("https://httpbin.org/get").await?;
assert_eq!(res.status(), 200); 
```

# ios - RestKit：重新认证后如何重新提交失败的请求？

> ID：14154755
> 
> 赞同：2
> 
> 时间：2013-01-04T09:50:39.897
> 
> 标签：ios, restkit

我正在开发的 API 要求我在自定义 HTTP 标头中提供身份验证令牌。此令牌每隔几分钟就会过期，并且可能在用户仍在应用程序内时发生，只要他们空闲时间足够长。当令牌过期时，我收到 403 响应，但我只有在尝试请求后才发现。

让 RestKit 自动重新验证并重试请求的最佳方法是什么，这样我就不必在我提出请求的任何地方都输入这个逻辑？对类似问题的回答建议使用 RKRequestDelegate 协议或 RKObjectLoaderDelegate 协议，但不幸的是，这些不再是 RestKit 的一部分（从 0.20 开始）。

知道现在应该采用什么“正确”方法吗？我应该继承 RKObjectManager 并对每个请求操作进行重试，还是应该提供自定义 HTTPOperation 或 HTTPClient 类，还是有更好的方法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T06:25:47.750

在 Failure 块中捕获它，并检查状态码并重新进行身份验证

```
 RKObjectRequestOperation *requestOp = [[RKObjectRequestOperation alloc] initWithRequest:request responseDescriptors:@[getObjResp]];

            [requestOp setCompletionBlockWithSuccess:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
                ....
                }
            } failure:^(RKObjectRequestOperation *operation, NSError *error){
// Here your status code check                
// Here your retry-code
                } 
```

# python - 如何从 PyPi 包中提取依赖项

> ID：14154756
> 
> 赞同：22
> 
> 时间：2013-01-04T09:50:46.033
> 
> 标签：python, pip, pypi, package-management

我的目标很简单，我想远程获取 PyPi 包的依赖项，而无需完全下载。

我似乎明白（阅读 pip 代码）解决依赖关系时的 pip 似乎在下载包后读取了鸡蛋......

还有其他方法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-08-08T07:15:02.540

使用[pipdeptree](https://pypi.python.org/pypi/pipdeptree)查看**已安装**PyPI 包的依赖项。

安装：

```
pip install pipdeptree 
```

然后运行：

```
pipdeptree 
```

你会看到类似的东西：

```
Warning!!! Possible conflicting dependencies found:
* Mako==0.9.1 -> MarkupSafe [required: >=0.9.2, installed: 0.18]
  Jinja2==2.7.2 -> MarkupSafe [installed: 0.18]
------------------------------------------------------------------------
Lookupy==0.1
wsgiref==0.1.2
argparse==1.2.1
psycopg2==2.5.2
Flask-Script==0.6.6
  - Flask [installed: 0.10.1]
    - Werkzeug [required: >=0.7, installed: 0.9.4]
    - Jinja2 [required: >=2.4, installed: 2.7.2]
      - MarkupSafe [installed: 0.18]
    - itsdangerous [required: >=0.21, installed: 0.23]
alembic==0.6.2
  - SQLAlchemy [required: >=0.7.3, installed: 0.9.1]
  - Mako [installed: 0.9.1]
    - MarkupSafe [required: >=0.9.2, installed: 0.18]
ipython==2.0.0
slugify==0.0.1
redis==2.9.1 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-20T10:43:26.733

我只需要找到一种方法来做到这一点，这就是我想出的（从 pip 偷来的）。

```
def dist_metadata(setup_py):
    '''Get the dist object for setup.py file'''

    with open(setup_py) as f:
        d = f.read()

    try:
        # we have to do this with current globals else
        # imports will fail. secure? not really. A
        # problem? not really if your setup.py sources are 
        # trusted
        exec d in globals(), globals()
    except SystemExit:
        pass

    return distutils.core._setup_distribution 
```

[https://stackoverflow.com/a/12505166/3332282](https://stackoverflow.com/a/12505166/3332282)回答了为什么 exec 的咒语很微妙而且很难正确。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-04-11T15:53:34.857

正如 jinghli 所指出的，目前没有一种可靠的方法可以远程获取任意 PyPi 包的依赖关系，而无需完全下载它。事实上，依赖关系有时取决于您的环境，因此在一般情况下需要像 Brian 那样执行 setup.py 代码的方法。

Python 生态系统处理依赖关系的方式在 1990 年代开始发展，当时这个问题还没有被很好地理解。[PEP 508——Python 软件包的依赖规范让](https://www.python.org/dev/peps/pep-0508/)我们走上了改善现状的道路，而 PEP 426 中的“有*抱负*的”草案方法[——Python 软件包 2.0 的元数据](https://www.python.org/dev/peps/pep-0426/)可能会在未来进一步改进它，连同重新实现PyPI 作为[仓库](https://pypi.org/)。

目前的情况在文档[Python Dependency Resolution](https://docs.google.com/document/d/1x_VrNtXCup75qA3glDd2fQOB2TakldwjKZ6pXaAjAfg/)中有很好的描述。

PyPI 确实提供了一个[json 接口](https://wiki.python.org/moin/PyPIJSON?action=show&redirect=PyPiJson)来下载每个包的元数据。该`info.requires_dist`对象包含具有可选版本限制等的所需包的名称列表。它经常丢失，但它是一个开始的地方。

例如[Django (json)](https://pypi.python.org/pypi/Django/json)表示：

`{ "info": { ... "requires_dist": [ "bcrypt; extra == 'bcrypt'", "argon2-cffi (>=16.1.0); extra == 'argon2'", "pytz" ], ... }`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-04T11:22:31.633

可悲的是， pip 没有这个功能。PyPI 上可用于包的元数据不包括有关依赖项的信息。

通常，您可以从项目网站的 README 文件中找到详细的依赖关系。

`pip search`可以提供一些关于包的信息。它可以告诉你它是基于什么的。

```
$ pip search flask
Flask     - A microframework based on Werkzeug, Jinja2 and good intentions 
```

# java - xml 中多个元素的 jaxrs 资源

> ID：14154759
> 
> 赞同：0
> 
> 时间：2013-01-04T09:50:56.247
> 
> 标签：java, rest, jax-rs

我在我的服务器代码上使用 JAX-RS Jersey 和 JAXB 来实现服务。我将 xml 作为输入发送到资源，并在资源中使用 JAXBContext 将 xml 转换为对象。当 xml 包含一个根元素时，我的资源正在工作。像

```
<employee>
<id>1</id>
</employee> 
```

但是当我提供多个元素时，我得到了 UnmarshalException。

```
<employee>
<id>1</id>
</employee>
<employee>
<id>2</id>
</employee> 
```

我的资源看起来像这样。

```
@POST
@Consumes(MediaType.APPLICATION_XML)
@Produces(MediaType.APPLICATION_XML)    
 public Response addEmp(@Context HttpServletRequest req)throws JAXBException,IOException{
        JAXBContext jaxb = JAXBContext.newInstance(Employee.class);
        Employee emps = (Employee)jaxb.createUnmarshaller().unmarshal(req.getInputStream());
        emplist.add(emps);
        return Response.ok().entity(success).build(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:05:14.397

首先，不要使用`req.getInputStream()`. 相反，将您的输入流指定为函数的参数：

```
public Response addEmp(InputStream stream) { 
```

其次，您的输入 XML 不是有效文档。XML 必须有一个根元素。您不能在一个输入流中给出几个元素。相反，请使用 JAXB[包装器](http://jaxb.java.net/nonav/2.2.3/docs/api/javax/xml/bind/annotation/XmlElementWrapper.html)。

# android - 如何在android的后按时保持活动状态完整？

> ID：14154760
> 
> 赞同：4
> 
> 时间：2013-01-04T09:50:59.557
> 
> 标签：android, countdowntimer, activity-state

我是安卓新手。根据制作活动启动模式 singleTop 的 Android 开发人员文档，它将保持该活动完整。但它对我不起作用。我有一个活动，我有一个倒数计时器，我想要的是当我离开那个活动并返回到那个倒数计时器应该仍然运行的活动时。怎么做 ？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:09:47.397

我相信你误解了一点。

启动一个活动`singleTop`并不意味着该活动是“完整的”，这意味着如果目标任务在其堆栈顶部已经有一个活动的现有实例，那么该实例将接收新的意图 - 一个新实例将不会t 被创建。（这与在模式下启动活动相反`standard`，每次有新意图时，都会创建一个新的类实例来响应该意图。）

正如其他人建议的那样，您可以绑定到服务并从那里更新倒计时时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:21:55.637

“创建服务将始终保持该计时器运行，而不是我希望它仅在应用程序处于活动状态时才继续运行”，这意味着您希望从用户离开的地方继续计时器。
将计时器值存储在 SharedPreferences 中`onStop()`并检索相同的值`onRestart()`，然后最后继续更新

# python - 如何从 Django 中的 start_date 和 end_date 获取持续时间？

> ID：14154763
> 
> 赞同：0
> 
> 时间：2013-01-04T09:51:26.367
> 
> 标签：python, datetime

这两个变量计算并存储日期和时间：

```
start_date = datetime.datetime.utcnow().replace(tzinfo=utc)
end_date = datetime.datetime.utcnow().replace(tzinfo=utc) 
```

我想计算持续时间：我只是做了：duration = start_date - end_date

它返回`datetime.timedelta datatype`如下：

```
datetime.timedelta(-1, 86393, 797032) 
```

我想显示持续时间。如果持续时间是 15 分钟，我想显示 15 分钟，如果是 60 我想显示 1 小时等等。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:55:23.307

只需打印它：

```
>>> d = datetime.timedelta(-1, 86393, 797032)
>>> d
datetime.timedelta(-1, 86393, 797032)
>>> print(d)
-1 day, 23:59:53.797032 
```

或者，对于更细粒度的控制：

```
>>> d.days
-1
>>> hours, remainder = divmod(d.seconds, 3600)
>>> minutes, seconds = divmod(remainder, 60)
>>> d.days,hours,minutes,seconds
(-1, 23, 59, 53) 
```

# controller - 控制器内的 Angular.js 刷新服务

> ID：14154767
> 
> 赞同：3
> 
> 时间：2013-01-04T09:51:39.733
> 
> 标签：controller, angularjs

我在控制器中有一个简单的服务：

```
function OPctrl($scope, $http) {
    var s = 'http://query.yahooapis.com/v1/public/yql?q=select * from etc..... &format=json&callback=JSON_CALLBACK';
  $http.jsonp(s).success(function(data) {
      $scope.titoli = data.query.results.ROWSET.ROW;
  }).
  error(function(data, status, headers, config) {
    alert("error!")
    });
} 
```

控制器将一些数据绑定到一个表中。每次需要时我都需要调用和刷新数据（即使用刷新按钮）。我可以在我的控制器内工作吗？如何？或者我需要定制服务？我是角度新手，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:19:19.627

最好使用自定义服务。要将数据返回到您的控制器，您有三种可能的选择：

*   返回一个promise（使用$q）并在promise then() 函数中设置范围值
*   向您的服务函数添加回调并在其中设置范围值
*   让您的服务返回一个对象而不是原始类型并将其设置为范围

要使用您的服务，您只需将其注入您的控制器：

```
app.contoller('Ctrl', ['$scope', 'service', function($scope, service) {
...
}]); 
```

在行动中可以看到所有三种可能性就是这个[jsFiddle](http://jsfiddle.net/asgoth/7bNAd/)。

# wordpress - 在 wordpress 中查询帖子问题

> ID：14154768
> 
> 赞同：0
> 
> 时间：2013-01-04T09:51:45.180
> 
> 标签：wordpress

我有点不确定如何执行 WP_Query 来搜索我的帖子的元值。元数据包括人的身高。所以有效的条目是`5'9"`or `4'11"`，我需要做一个比较。

为了更清楚一点：我有一个过滤器页面。所以用户可以选择之间的高度`4'0" - 5'9`或`5'9" - 5'11"`

问题是我有`'`和`"`符号。我可以删除这些。但随后它将在`59`和`511`哪个不起作用之间进行搜索。

有人知道解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:03:51.637

以英寸为单位保存值。

然后，您可以设置一个`WP_Query`或一个[`$wpdb`](http://codex.wordpress.org/Class_Reference/wpdb)查询来获取您的结果。

每当您在前端显示值时，都将它们转换回英尺和英寸。

更新：

```
function convert_to_feet( $input){
  $feet = (int) ($input/12);
  $inches = $input%12;
  return $feet . "'" . $inches . '"';
}

echo convert_to_feet(71); 
```

# haskell-platform - Haskell 类型表达式

> ID：14154769
> 
> 赞同：0
> 
> 时间：2013-01-04T09:52:08.853
> 
> 标签：haskell-platform, template-haskell, haskell

我有两个关于 Haskell 类型表达式的问题：

**问题 1 -**

我想声明一个类型 NODE

```
data NODE = Node String ATTR 
```

一个类型 ATTR 包含 3 个子类型，如下所示：

> 源布尔
> 
> 目标布尔
> 
> 幽灵诠释

```
data ATTR = Source Bool | Target Bool | Ghost Bool 
```

但上述声明不满足 ATTR 可以包含任何子类型组合的要求，例如：

*   ATTR 可以同时包含 Source Bool 和 Target Bool
*   ATTR 可以同时包含 Source Bool、Target Bool 和 Ghost Int
*   ATTR 甚至可以为空（不包含任何内容）

**问题2 -**

我想声明一个类型 GRAPH，其中一个图形可以包含 1 个或多个语句 (STMTS)，如果图形为空，则不包含任何语句。所以我声明如下：

```
data GRAPH = Graph String STMTS
data STMTS = STMT | STMTS 
```

但同样，正如您所见，递归数据类型 STMTS 将无限重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:13:54.437

对于问题 1，我会说使用类似的东西

```
data Attr = Attr (Maybe Bool) -- Source 
                 (Maybe Bool) -- Target 
                 (Maybe Bool) -- Ghost 
```

对于问题 2，我会使用类似

```
data Graph = Graph [STMT] 
```

# regex - 正则表达式在 Sed 中不起作用

> ID：14154770
> 
> 赞同：1
> 
> 时间：2013-01-04T09:52:09.687
> 
> 标签：regex, perl, sed

我正在尝试在 XML 文件（准确地说是 Jira 导出文件）上运行正则表达式，以解决其中一些 JQL 查询的问题。

我正在寻找一个名为“request”的属性，它包含一个查询。在该查询中，用户名需要包含在 HTML 实体中作为引号 ("quot;)。用户名始终遵循字符串 "reporter = '、"assignee = " 或 "watcher = "，除了一种特殊情况： string currentUser() 不是用户名，不需要替换。

```
 Original:
 <SearchRequest id="10000" name="Example" author="myusername" user="myusername" request="reporter = anotheruser and status != Closed" favCount="1"/>
 Result:
 <SearchRequest id="10000" name="Example" author="myusername" user="myusername" request="reporter = &quot;anotheruser&quot; and status != Closed" favCount="1"/>

 Search:
 (request=".*?(reporter|assignee|watcher) = )(?!currentUser)([a-z.]+)(.*?")

 Replace:
 $1&amp;$3&amp;$4 
```

这已经在 SublimeText 2 和[Regex Tester 2](http://www.regextester.com/index2.html)中进行了尝试和测试，并且可以正常工作。如您所见，它使用前瞻来检测 currentUser 的否定情况。现在，当我尝试在 Sed 中使用这个正则表达式时，它会出错：

```
$ sed -i '' -E 's/(request=".*?(reporter|assignee|watcher) = )(?!currentUser)([a-z.]+)(.*?")/$1&amp;$3&amp;$4/g' entities.xml
sed: 1: "s/(request=".*?(reporte ...": RE error: repetition-operator operand invalid 
```

我不确定现在如何进行，因为 sed 对我来说是新领域。我倾向于认为这是导致此问题的前瞻。也许有更简单的方法来满足这个要求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:08:54.967

不幸的是，不支持前瞻/落后，你应该在（超级 sed）`sed`上花很多时间。如果您想了解更多信息，`ssed`这里是[常见问题解答。](http://sed.sourceforge.net/sedfaq6.html)

如果你熟悉的话，也可以这样做`perl`，我不熟悉（我用[perl](/questions/tagged/perl "show questions tagged 'perl'")*标记，* *所以你应该得到一些帮助）。*

 *使用`-P`选项 with`grep`验证您的匹配：

```
$ grep -Po '(request=".*?(reporter|assignee|watcher) = )(?!currentUser)([a-z.]+)(.*?")' <<< '<SearchRequest id="10000" name="Example" author="myusername" user="myusername" request="reporter = anotheruser and status != Closed" favCount="1"/>'
request="reporter = anotheruser and status != Closed" 
```*

# mysql - Mysql按条件从另一行列更新行列

> ID：14154783
> 
> 赞同：1
> 
> 时间：2013-01-04T09:52:57.773
> 
> 标签：mysql, sql-update, conditional, row

我有类似数据的表格：

```
Col1 ; Col2;
G11  ; 112;
G11-1; 0;
G11-2; 2;
G12-2; 111; 
```

我想用简单的 G11 col2 更新 G11- rows col2 ，但不修改 G12 rows ，因为没有简单的 G12 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T10:06:46.260

```
UPDATE 
    tableX AS upd
  JOIN
    tableX AS simple
      ON  simple.Col1 NOT LIKE '%-%'
      AND upd.Col1 LIKE CONCAT(simple.Col1, '-%')
SET
    upd.Col2 = simple.Col2 ; 
```

在**[SQL-Fiddle中测试](http://sqlfiddle.com/#!2/444b0/1)**

* * *

此查询将向您显示预期的编辑，而不更新任何内容：

```
SELECT upd.Col1, upd.Col2, 
       simple.Col1 AS simpleCol1, simple.Col2 AS New_value
FROM 
    tableX AS upd
  JOIN
    tableX AS simple
      ON  simple.Col1 NOT LIKE '%-%'
      AND upd.Col1 LIKE CONCAT(simple.Col1, '-%') ; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T10:59:56.700

感谢 @Ypercube 创建 sqlfile。这是另一种使用`instr`. 好像快了一点。

*   [SQLFIDDLE](http://sqlfiddle.com/#!2/a6180/2)。

仅选择查询。更新查询也可以有`instr`语法。

```
SELECT *
FROM tableX ;

SELECT upd.Col1, upd.Col2, 
       simple.Col1 AS simpleCol1, simple.Col2 AS New_value
FROM 
    tableX AS upd
  JOIN
    tableX AS simple
      ON  instr(simple.Col1 ,'-') = 0
      AND upd.Col1 LIKE CONCAT(simple.Col1, '-%') ; 
```

结果：

```
COL1    COL2    SIMPLECOL1  NEW_VALUE
G11-1   0   G11         112
G11-2   2   G11         112 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T12:06:00.137

Ypercube 的解决方案是正确和干净的，bonCodigo 的想法很好！但是它们都可以简化一点。如果此条件返回 true：

```
upd.Col1 LIKE CONCAT(simple.Col1, '-%') 
```

这意味着它`upd.Col1`确实包含（至少）一个`-`多于一个`simple.Col1`，并且如果只`-`允许一个，就像在您的示例数据中一样，`simple.Col1`已经没有`-`，所以这两个条件都是多余的：

```
ON simple.Col1 NOT LIKE '%-%'
ON instr(simple.Col1 ,'-') = 0 
```

但我喜欢 using 的想法`INSTR`，它不能总是替代 a `LIKE`，但如果可以，它会更快。我会这样写 SELECT 查询：

```
SELECT
  upd.Col1,
  upd.Col2, 
  simple.Col1 AS simpleCol1,
  simple.Col2 AS New_value
FROM 
  tableX AS upd JOIN tableX AS simple
  ON instr(upd.Col1, concat(simple.Col1, '-')) 
```

和 UPDATE 查询将非常相似。由于这只是对其他答案的整合，因此我要为每个人的想法+1 :)

# java - 在开关/案例中使用枚举

> ID：14154784
> 
> 赞同：16
> 
> 时间：2013-01-04T09:53:00.880
> 
> 标签：java

我有一个具有枚举属性的实体：

```
// MyFile.java
public class MyFile {   
    private DownloadStatus downloadStatus;
    // other properties, setters and getters
}

// DownloadStatus.java
public enum DownloadStatus {
    NOT_DOWNLOADED(1),
    DOWNLOAD_IN_PROGRESS(2),
    DOWNLOADED(3);

    private int value;
    private DownloadStatus(int value) {
        this.value = value;
    }

    public int getValue() {
        return value;
    }
} 
```

我想将此实体保存在数据库中并检索它。问题是我将 int 值保存在数据库中，我得到了 int 值！我不能使用如下开关：

```
MyFile file = new MyFile();
int downloadStatus = ...
switch(downloadStatus) {
    case NOT_DOWNLOADED:
    file.setDownloadStatus(NOT_DOWNLOADED);
    break;
    // ...
} 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-04T09:58:25.560

您可以在枚举中提供一个静态方法：

```
public static DownloadStatus getStatusFromInt(int status) {
    //here return the appropriate enum constant
} 
```

然后在您的主代码中：

```
int downloadStatus = ...;
DowloadStatus status = DowloadStatus.getStatusFromInt(downloadStatus);
switch (status) {
    case DowloadStatus.NOT_DOWNLOADED:
       //etc.
} 
```

与序数方法相比，这种方法的优势在于，如果您的枚举更改为以下内容，它仍然可以工作：

```
public enum DownloadStatus {
    NOT_DOWNLOADED(1),
    DOWNLOAD_IN_PROGRESS(2),
    DOWNLOADED(4);           /// Ooops, database changed, it is not 3 any more
} 
```

请注意，最初的实现`getStatusFromInt`可能会使用 ordinal 属性，但该实现细节现在包含在枚举类中。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-04T09:55:43.913

每个 Java 枚举都有一个自动分配的序数，因此您不需要手动指定 int（但请注意序数从 0 开始，而不是 1）。

然后，要从序数中获取枚举，您可以执行以下操作：

```
int downloadStatus = ...
DownloadStatus ds = DownloadStatus.values()[downloadStatus]; 
```

...然后您可以使用枚举进行切换...

```
switch (ds)
{
  case NOT_DOWNLOADED:
  ...
} 
```

# python - 使用python从文件中读取行

> ID：14154787
> 
> 赞同：0
> 
> 时间：2013-01-04T09:53:15.373
> 
> 标签：python, twitter

我有一个将近 100000 行的文件。我想做一个清理过程（小写，删除停用词等）但是这需要时间。

10000 的示例脚本需要 15 分钟。对于所有文件，我预计需要 150 分钟。不过需要5个小时。

在开始文件用于读取此文件：

```
fileinput = open('tweets.txt', 'r')

lines = fileinput.read().lower() #for lower case, however it load all file

for line in fileinput:
    lines = line.lower() 
```

问题：我可以使用一种方法来读取前 10000 行进行清理的过程，然后再读取下一行的博客等吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:59:21.980

我强烈建议逐行操作，而不是一次读取整个文件（换句话说，不要使用`.read()`）。

```
with open('tweets.txt', 'r') as fileinput:
    for line in fileinput:
        line = line.lower()
        # ... do something with line ...
        # (for example, write the line to a new file, or print it) 
```

这[将自动利用 Python 的内置缓冲功能](http://docs.python.org/2/library/stdtypes.html#file.next)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T09:59:39.353

尝试一次处理*一行*文件：

```
lowered = []    

with open('tweets.txt', 'r') as handle:
    for line in handle:
        # keep accumulating the results ...
        lowered.append(line.lower())
        # or just dump the to stdout right away
        print(line)

for line in lowered:
    # print or write to file or whatever you require 
```

这样可以减少内存开销，在大文件的情况下可能会导致交换和性能下降。

以下是对大约 1M 行文件的一些基准测试：

```
# (1) real 0.223    user 0.195  sys 0.026   pcpu 98.71
with open('medium.txt') as handle:
  for line in handle:
      pass

# (2) real 0.295    user 0.262  sys 0.025   pcpu 97.21
with open('medium.txt') as handle:
    for i, line in enumerate(handle):
        pass
    print(i) # 1031124

# (3) real 21.561 user 5.072  sys 3.530   pcpu 39.89
with open('medium.txt') as handle:
    for i, line in enumerate(handle):
        print(line.lower())

# (4) real 1.702  user 1.605  sys 0.089   pcpu 99.50
lowered = []
with open('medium.txt') as handle:
    for i, line in enumerate(handle):
        lowered.append(line.lower())

# (5) real 2.307  user 1.983  sys 0.159   pcpu 92.89
lowered = []
with open('medium.txt', 'r') as handle:
    for i, line in enumerate(handle):
        lowered.append(line.lower())

with open('lowered.txt', 'w') as handle:
    for line in lowered:
        handle.write(line) 
```

您还可以一次迭代两个文件：

```
# (6) real 1.944  user 1.666  sys 0.115   pcpu 91.59
with open('medium.txt', 'r') as src, open('lowered.txt', 'w') as sink:
    for i, line in enumerate(src):
        sink.write(line.lower()) 
```

结果如表：

```
# (1) noop                   0.223
# (2) w/ enumerate           0.295
# (4) list buffer            1.702
# (6) on-the-fly             1.944
# (5) r -> list buffer -> w  2.307
# (3) stdout print          21.561 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T09:59:13.150

更改脚本如下：

```
with open('tweets.txt', 'r') as fileinput:
  for line in fileinput:
    """do what you need to do with each line"""
    line = line.lower() 
```

所以，基本上，不要使用 将整个文件读入内存`read()`，只需遍历打开文件的行。当您将一个巨大的文件读入内存时，您的进程可能会增长到系统需要交换部分文件的程度，这将使其非常慢。

# python - Python XML 解析 - 多节

> ID：14154789
> 
> 赞同：0
> 
> 时间：2013-01-04T09:53:23.610
> 
> 标签：python, xml, parsing

我有一个如下的 XML 文件：

```
<item>
  <global>

    <option id="123b25-1323-2f">
      <name>Bla</name>
      <number>0123987</number>
    </option>
    <option id="aeb12f-91b3-57">
      <name>Foo</name>
      <number>92309</number>
    </option>

    <section id="aeee72-0965-66">
      <name>alb</name>
      <number>0123987</number>
    </section>
    <section id="928374-11b3-51">
      <name>oof</name>
      <number>92309</number>
    </section>

  </global>
</item> 
```

使用 python2.7 和适当的模块构建字典的最佳方法是什么，例如选项和部分。
示例代码：

```
root = XMLTree(xml) # xml ist file or string
global = root.getSubsection('global')
options = global.getItems('option')
sections = global.getItems('section')

print options 
```

我希望这样的输出：

```
=> {'id-123b25-1323-2f': {'name': 'Bla', 'number': '0123987'}, 'id-aeb12f-91b3-57': {'name': 'Foo', 'number': '92309'}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:09:15.320

我遇到了这个模块，它非常有用。 [XML 转字典](http://code.activestate.com/recipes/410469-xml-as-dictionary/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:09:45.277

您可以使用 xml.dom.minidom 解析 xml 字符串并提取元素以创建字典。这是一个minidom的例子

```
from xml.dom.minidom import parseString
dom = parseString(data) #xml dom object from xml
def getItems(node): 
    """dom parser and xml generator"""
    return {node.getAttribute('id'): 
                 dict((e.nodeName, e.firstChild.data) 
                      for e in node.childNodes if e.nodeType == dom.ELEMENT_NODE)
            for node in node }

options = dom.getElementsByTagName('option')
sections = dom.getElementsByTagName('section')
getItems(options)
{u'aeb12f-91b3-57': {u'name': u'Foo', u'number': u'92309'}, u'123b25-1323-2f': {u'name': u'Bla', u'number': u'0123987'}}
getItems(sections)
{u'928374-11b3-51': {u'name': u'oof', u'number': u'92309'}, u'aeee72-0965-66': {u'name': u'alb', u'number': u'0123987'}} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T11:43:35.063

```
import lxml.etree as et

doc=et.fromstring(xml)

def getItems(doc,name):
    d={}
    for elem in doc.xpath('.//{0}'.format(name)):
        attr=elem.xpath('.//@id')[0]
        items=[(i.tag, i.text) for i in elem.xpath('.//*')]
        d[attr]={k:v for k,v in items}  
    return d
print getItems(doc,'option')
print getItems(doc,'section') 
```

输出：

```
{'aeb12f-91b3-57': {'name': 'Foo', 'number': '92309'}, '123b25-1323-2f': {'name': 'Bla', 'number': '0123987'}}
{'928374-11b3-51': {'name': 'oof', 'number': '92309'}, 'aeee72-0965-66': {'name': 'alb', 'number': '0123987'}} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-05T10:05:14.150

[ElementTree](http://docs.python.org/2/library/xml.etree.elementtree.html)是一个非常合适的标准库模块。这是一个建议（Python 2.7）：

```
from xml.etree import ElementTree as ET

def get_items(elements):
    D = {elem.get("id"): dict((child.tag, child.text) for child in elem) 
         for elem in elements}
    return D

tree = ET.parse("item.xml")
options = tree.findall(".//option")
sections = tree.findall(".//section")

print "options:"
print get_items(options)
print "sections:"
print get_items(sections) 
```

输出：

```
options:
{'aeb12f-91b3-57': {'name': 'Foo', 'number': '92309'}, '123b25-1323-2f': {'name': 'Bla', 'number': '0123987'}}
sections:
{'928374-11b3-51': {'name': 'oof', 'number': '92309'}, 'aeee72-0965-66': {'name': 'alb', 'number': '0123987'}} 
```

# c# - ComboBox_DrawItem 当 ComboBox.Clear()

> ID：14154797
> 
> 赞同：0
> 
> 时间：2013-01-04T09:53:54.887
> 
> 标签：c#

我想将 ComboBox 的第一项设置为红色，并使用此代码执行此任务：

```
private void cbTreeViewFolder_DrawItem(object sender, DrawItemEventArgs e)
{
    e.DrawBackground();
    if (e.Index >= 0)
    {
        string text;
        Brush brush;
        MyClass file = ((MyClass)((ComboBox)sender).Items[e.Index]);
        if (e.Index == 0)
        {
            text = file.Path;
            brush = Brushes.Red;
        }
        else
        {
            text = file.Nome;
            brush = Brushes.Black;
        }
        e.Graphics.DrawString(text, ((Control)sender).Font, brush, e.Bounds.X, e.Bounds.Y);
   }
} 
```

它一直有效，直到我清除 ComboBox，因为在这种情况下我不知道如何管理它，并且所有项目都保留在 ComboBox 中。有人知道问题的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:09:28.833

```
private void comboBox1_DrawItem(object sender, DrawItemEventArgs e)
{    
     if (((ComboBox)sender).Items.Count != 0) {
     e.DrawBackground();        
     string text = ((ComboBox)sender).Items[e.Index].ToString();
     Brush brush;         
     if (e.Index == 0)
        brush = Brushes.Red;
     else
        brush = Brushes.Black;
     e.Graphics.DrawString(text, ((Control)sender).Font, brush, e.Bounds.X, e.Bounds.Y);
     }
} 
```

# c# - 允许在 dataGridview 中选择行，但不允许选择单元格

> ID：14154799
> 
> 赞同：3
> 
> 时间：2013-01-04T09:54:00.300
> 
> 标签：c#, winforms, datagrid, datagridview

我想允许在 DataGridView ( C#, WinForm ) 中选择行并且不允许单元格选择。

请问有没有办法做到这一点？

非常感谢 ：）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-04T10:00:59.377

选择`DataGridView`. 您会注意到一个名为`SelectionMode`. 将其设置为`FullRowSelect`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-04T10:00:56.927

```
this.DataGridView.SelectionMode = DataGridViewSelectionMode.FullRowSelect;
this.DataGridView.Columns["Text"].ReadOnly = true; 
```

`DataGridView.SelectionMode = DataGridViewSelectionMode.FullRowSelect`表示无法选择单个单元格。

`DataGridViewColumn.ReadOnly = true`表示单元格不能双击进入。

# mysql - MySQL - 具有特定搜索值“课程”的 FULLTEXT 搜索问题

> ID：14154803
> 
> 赞同：3
> 
> 时间：2013-01-04T09:54:28.500
> 
> 标签：mysql, search, full-text-search, myisam, match-against

我创建了下表。

```
CREATE TABLE `test` (
`name` VARCHAR(50) NOT NULL,
`id` INT(10) NOT NULL AUTO_INCREMENT,
PRIMARY KEY (`id`),
FULLTEXT INDEX `name` (`name`)
)
COLLATE='utf8_general_ci'
ENGINE=MyISAM; 
```

有以下数据

```
insert into test (name) values('apple');
insert into test (name) values('course'); 
```

我正在搜索以下查询。

```
select * from test  where MATCH (name) AGAINST ('apple' IN BOOLEAN MODE);
select * from test  where MATCH (name) AGAINST ('course' IN BOOLEAN MODE); 
```

现在的问题是第一个选择查询返回了正确的行。但是第二个查询没有返回任何行。我用其他词进行了测试，它们工作正常。但是，如果数据中包含“课程”一词，并且当我们搜索“课程”时，它不会返回任何行。

有人可以帮我解决这个奇怪的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:09:26.243

使用运算符不是最好的`like`吗？

```
select * from test  where name LIKE 'course'; 
```

甚至`REGEXP`

```
select * from test  where name RegexP 'course'; 
```

*   [SQLFIDDLE](http://sqlfiddle.com/#!2/7ee76/1)

你可以试试：

```
select * from test  where MATCH (name) AGAINST ('course*' IN BOOLEAN MODE); 
```

不过，它通常在部分单词搜索中最失败......所以请向我们展示您表中的一些示例数据。

## Bingo：似乎 MYSQL 充满了[*停用词*](http://dev.mysql.com/doc/refman/5.5/en/fulltext-stopwords.html)。

所以这就是所说的和你需要做的:)

“从 MySQL 5.5.6 开始，如果 character_set_server 是 ucs2、utf16 或 utf32，则使用 latin1 加载和搜索停用词文件。如果在服务器字符集为 ucs2、utf16 或 utf32 时使用 FULLTEXT 索引创建任何表，它应该使用此语句进行修复..

`REPAIR TABLE tbl_name QUICK;`"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T05:44:03.733

在您的 AGAINST 查询中添加“IN BOOLEAN MODE”
LIKE AGAINST ('course*' IN BOOLEAN MODE) 这将非常有效

# css - 为什么我的固定 div 出现在 IE8 的内容下方？

> ID：14154806
> 
> 赞同：1
> 
> 时间：2013-01-04T09:54:29.890
> 
> 标签：css, html, internet-explorer-8, position, fixed

我在 IE8 中遇到了一个奇怪的问题，当我试图在我的屏幕顶部获得一个固定的 div 时，它会暂时隐藏所有其他内容。

现在实际发生的是固定的 div 出现在我的内容正**下方。**代码片段：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
   <head>...</head>
   <body>
      <table width="50%">...</table>
      <div class="cadre2" style="width: 50%">...</div>

      <div style="z-index: 9999; position: fixed; background-color: #ff0000; width: 100%; height: 100%; top: 0px; right: 0px; left: 0px; bottom: 0px;">This should be on top!</div>
   </body>
</html> 
```

但在 Internet Explorer 8 中的结果是这样的：

```
____________________
|                  |
|                  |
|     CONTENT      |
|                  |
|__________________|
|                  |
| THIS SHOULD BE   |
|       ON         |
|      TOP!        |
|                  |
|__________________| 
```

毫不奇怪，这在 FireFox 中工作得非常好。

有谁知道是什么导致 IE8 出错？是否可以将任何 CSS 属性设置为前面的任何 HTML？尽管我非常怀疑这一点，因为固定 div 没有嵌套在除主体之外的任何其他元素中。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T08:29:19.933

您需要将 doctype 定义更改为

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

[您可以在http://webdesign.about.com/cs/doctype/a/aaquirksmode.htm](http://webdesign.about.com/cs/doctype/a/aaquirksmode.htm)找到一些解释

# javascript - 用户显示高度

> ID：14154810
> 
> 赞同：2
> 
> 时间：2013-01-04T09:54:38.833
> 
> 标签：javascript, jquery, html

大家好，我想知道我是否可以在我身边实施这样的事情：

1.  检查用户窗口或显示的高度
2.  例如，如果它小于 800px，
3.  然后不应执行 javascript 代码

我已经阅读了有关媒体查询的信息，但是我真的不知道如何在 jquery 代码上使用它。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T09:55:52.113

使用`window.innerHeight`：

```
document.ready(function(){
  if (window.innerHeight < 800){
    //Code here
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T09:55:52.713

您可以使用 jQuery **[height()](http://api.jquery.com/height/)**函数或`window.innerHeight`找出窗口高度。

**[现场演示](http://jsfiddle.net/rajaadil/juPHr/1/)**

```
if($(window).height() < 800)
   return;

//You code here 
```

**编辑：**正如 Cerbrus 所提到的，最好在`window.innerHeight`这里使用 javascript

```
if(window.innerHeight < 800)
  return;

//You code here 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-04T09:57:34.977

使用 jquery [height()](http://api.jquery.com/height/) .. 如果您想了解更多信息，请转到链接`height()`

```
if($(window).height() < 800)
{
     //do your stuff
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T10:02:13.077

当我想了解用户的视口时，我有时会使用它：

```
var PageDimensions = (function () {
    var Width;
    var Height;
    var getDimensions;

    function pagedimensionsCtor() {
        if( getDimensions === undefined ){
            getDimensions = document.createElement("div");
            getDimensions.setAttribute("style", "visibility:hidden;position:fixed;bottom:0px;right:0px;");
            document.getElementsByTagName("body")[0].appendChild(getDimensions);
        }
        Width = getDimensions.offsetLeft;
        Height = getDimensions.offsetTop;
    }
    pagedimensionsCtor();

    function Reset() {
        pagedimensionsCtor();
    }

    function GetHeight() {
        return Height;
    }

    function GetWidth() {
        return Width;
    }

    return {
        Reset: Reset,
        GetHeight: GetHeight,
        GetWidth: GetWidth
    };
})(); 
```

演示：http: [//jsfiddle.net/Vb7xz/](http://jsfiddle.net/Vb7xz/)

# jsf - 未构造托管 bean

> ID：14154813
> 
> 赞同：1
> 
> 时间：2013-01-04T09:54:45.587
> 
> 标签：jsf, jsf-2, managed-bean

当我点击页面时，没有构造我的 JSF 托管 bean。

这是我的小脸：

```
 <h:dataTable value="#{productsBean.producten}" var="product">
                <h:column>#{product.description}</h:column>
                <h:column>#{product.price}</h:column>
                <h:column>#{product.categoryName}</h:column>
                <h:column>
                    <h:link value="Edit" outcome="/products/edit">
                        <f:param name="id" value="#{product.product_id}"/>
                    </h:link>
                </h:column>

            </h:dataTable> 
```

这是我的 ProductsBean：

```
@ManagedBean(eager=true)
@RequestScoped
public class ProductsBean implements Serializable{

    private List<ProductBean> producten; //+getter
    @ManagedProperty(value = "#{applicationBean}")
    private ApplicationBean applicationBean;

    public ProductsBean() {

        Store store = applicationBean.getStore();

        for (String c : store.getCategories()) {
            for(be.kdg.shop.model.stock.Product p : store.getProductsOfCategory(c)){
                ProductBean product = new ProductBean();
                product.setProduct_id(p.getProduct_id());
                product.setDescription(p.getDescription());
                product.setCategoryName(p.getCategoryName());
                product.setPrice(p.getPrice());
            producten.add(product);
            }

        }
.... 
```

当我使用“#{productsBean.producten}”时，我的 JavaBean 应该被初始化，但它没有。当我调试我的代码时，我没有到达构造函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:46:06.693

> *我仍然看到原始的 JSF 源代码。*

您的 HTTP 请求根本没有命中`FacesServlet`。它负责执行所有 JSF 工作，例如创建托管 bean 和生成 HTML。

您应该确保您的 HTTP 请求 URL 与webapp`<url-pattern>`中`FacesServlet`配置的`web.xml`. 如果是例如`*.jsf`，那么您应该打开页面`/products.jsf`而不是`/products.xhtml`。

或者，您也可以将 的 更改为`<url-pattern>`，这样您就无需摆弄虚拟 URL。以前在 JSF 1.x 中，这曾经以每次调用自身的无限循环结束，但从 JSF 2.x 开始，这不再发生并且应该可以正常工作。`FacesServlet``*.xhtml`

```
<servlet>
    <servlet-name>facesServlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>facesServlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

### 也可以看看：

*   [我们的 JSF wiki 页面](https://stackoverflow.com/tags/jsf/info)- 包含一个 Hello World 和几个指向理智教程的链接
*   [JSF Facelets：有时我看到 URL 是 .jsf，有时是 .xhtml。为什么？](https://stackoverflow.com/questions/3008395/jsf-facelets-sometimes-i-see-the-url-is-jsf-and-sometimes-xhtml-why)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:17:11.197

首先， (eager=true) 仅适用于`@ApplicationScoped`托管 bean，这意味着 bean 将在应用程序初始化时创建，因此在这种情况下您应该删除它。

我建议您检查 producten 属性是否具有 getter 方法，因为您没有在代码中指定它。您也可以尝试使用其他范围，例如`@ViewScoped`.

# database - 大数据数据库

> ID：14154814
> 
> 赞同：5
> 
> 时间：2013-01-04T09:54:51.323
> 
> 标签：database, hdf5, common-data-format, large-data

我正在收集大量数据，这些数据很可能是以下格式：

> 用户 1: (a,o,x,y,z,t,h,u)

所有变量都随时间动态变化，除了 u - 它用于存储用户名。由于我在“大数据”方面的背景不是很丰富，我想了解的是，当我最终得到我的数组时，它会非常大，比如 108000 x 3500，因为我将在每个时间步上进行分析，并绘制它，什么是合适的数据库来管理它是我试图确定的。因为这是为了科学研究，所以我正在研究 CDF 和 HDF5，根据我在这里读到的[NASA](http://cdf.gsfc.nasa.gov/html/FAQ.html)，我想我会想要使用 CDF。但这是管理此类数据以提高速度和效率的正确方法吗？

最终的数据集将所有用户作为列，并且行将被加上时间戳，因此我的分析程序将逐行读取以解释数据。并输入数据集。也许我应该看看 CouchDB 和 RDBMS 之类的东西，我只是不知道从哪里开始。建议将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T10:04:58.950

这是一个扩展评论，而不是一个全面的答案......

相对而言，如今，大小数据集`108000*3500`并不能真正称为*大数据*，除非您省略了诸如`GB`. 如果只是`108000*3500`字节，那就只有 3GB 加上零钱。您提到的任何技术都可以轻松应对。我认为您应该根据哪种方法可以加快您的开发而不是加快您的执行来做出选择。

但是，如果您想考虑进一步的建议，我建议：

1.  [科学数据库](http://www.scidb.org/)
2.  [拉斯达曼](http://www.rasdaman.com/)和
3.  [莫奈数据库](http://www.monetdb.org/Home)

所有这些都在学术大数据社区中具有一定的吸引力，并且也开始在该社区之外使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T15:32:14.867

我一直在使用 CDF 处理一些类似大小的数据，我认为它应该可以很好地工作。不过，您需要记住一些事情。考虑到我真的不知道你的项目的细节，这可能会也可能不会有帮助......

3GB 的数据正好在旧版 CDF 的文件大小限制附近，因此请确保您使用的是最新的库。

虽然 3GB 的数据量并不多，但取决于您读取和写入它的方式，事情可能进展缓慢。确保尽可能使用超读/写功能。

CDF 支持可以保存用户名和数据描述等信息的元数据（称为全局/变量属性）。

将数据分解为多个文件很容易。我建议每个用户使用一个文件。这意味着您可以将整个文件的用户名作为属性写入一次，而不是在每条记录中。

您将需要创建一个名为 epoch 的额外变量。这是为每条记录明确定义的时间戳。我不确定您现在拥有的时间戳是否合适，或者您是否需要对其进行一些处理，但这是您需要考虑的事情。此外，epoch 变量需要分配一个特定的类型（epoch、epoch16 或 TT2000）。TT2000 是提供纳秒精度并处理闰秒的最新版本，但我遇到的大多数 CDF 阅读器还不能很好地处理它。如果您不需要那种精度，我推荐 epoch16，因为这已经是一段时间的标准了。

希望这会有所帮助，如果您使用 CDF，请随时向我提出您遇到的任何问题。

# cors - Picasa api 是否允许 CORS 发布？

> ID：14154817
> 
> 赞同：3
> 
> 时间：2013-01-04T09:55:03.903
> 
> 标签：cors, picasa

Picasa api 允许跨域 GET 请求。但是当我尝试发布图片/评论时，出现以下错误。

> XMLHttpRequest 无法加载`https://picasaweb.google.com/data/feed/api/user/default/albumid/5825390619150171601?access_token=ya29.AHES6ZSR2XSlImdSJxNBVczzfz4DPoW3vRvywTNg8ELNs6OStqSBbTM`。Access-Control-Allow-Origin 不允许来源“ [http://localhost ”。](http://localhost)

```
var url = 'https://picasaweb.google.com/data/feed/api/user/default/albumid/' + albumId + '?access_token=' + myToken;

     $.ajax({
          url: url,
          data: f /*image file object*/,
          contentType: f.type,
          processData: false,
          type: "POST",
          success:function(data){
            successCallback(data);
           },
          error:function(data){
            failureCallback(data);
           }
       }); 
```

ps：这是一个类似的stackoverflow讨论[的链接。](https://stackoverflow.com/questions/13514355/post-request-to-picasa-api)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-25T11:55:16.710

糟糕的是，以前没有人回答过这个问题。有几件事很高兴知道在哪里......

Access-Control-Allow-Origin 标头必须包含在服务器响应中并设置为您的域名或 *

当您通过 Access-Control-Allow-Origin 从 Picasa 获取公开相册时，标头设置为 *

但是，当您访问需要身份验证的功能时，例如标题 Access-Control-Allow-Origin 上方的功能会返回为 *.google.com

我的理论是防止人们建立一个使用谷歌免费存储后端但实际上是 Picasa 网站本身的竞争对手的 Picasa 网站。

最后一个重要的注意事项是，您永远不应该将安全令牌作为查询字符串发送！即使您使用 https/ssl，它本身的 url 也没有加密，有人可以嗅探网络流量并窃取安全令牌。我什至不确定 Picasa 是否会接受它。你应该这样做：

```
 var url = 'https://picasaweb.google.com/data/feed/api/user/default/albumid/' + albumId;
 $.ajax({
      url: url,
      data: f /*image file object*/,
      contentType: f.type,
      processData: false,
      type: "POST",
      beforeSend: function(xhr) {
        xhr.setRequestHeader("Authorization", "Bearer " + myToken);
      },
      success:function(data){
        successCallback(data);
       },
      error:function(data){
        failureCallback(data);
       }
   }); 
```

# jquery - jQuery .load() 页面片段由 tagName

> ID：14154818
> 
> 赞同：-2
> 
> 时间：2013-01-04T09:55:04.507
> 
> 标签：jquery

是否可以通过使用元素的名称来加载片段？

```
$('.history').load('history.php section'); 
```

其中“部分”是指：

```
<section>
  ...
</section> 
```

在这种情况下，该元素仅在页面上使用一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:01:42.247

是的。根据[文档，](http://api.jquery.com/load/#loading-page-fragments)任何 jQuery 选择器都应该是有效的：

> 如果字符串中包含一个或多个空格字符，则假定字符串中第一个空格后面的部分是确定要加载的内容的 jQuery 选择器。

# java - 将桌面 Java 应用程序的日志发送到服务器

> ID：14154824
> 
> 赞同：0
> 
> 时间：2013-01-04T09:55:15.673
> 
> 标签：java, logging, client-server

我在用

```
try{
}
catch(Exception e){
  Logger.getLogger(Terminal.class.getName()).log(Level.SEVERE, null, e);
} 
```

此异常将在用户电脑中引发，我将无法看到它。有没有办法将异常日志发送到服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:24:05.710

据我了解，您正在使用 log4j 库。如果是，您可能希望使用支持将日志发送到“服务器”的 log4j 附加程序之一，例如`org.apache.log4j.net.SyslogAppender`或`org.graylog2.log.GelfAppender`. 当然，您必须在您的服务器上运行合适的应用程序，该应用程序可以接受 log4j appender 在 cilent 站点发送的日志。

# javascript - Ember 模型生命周期，并恢复到原始状态

> ID：14154826
> 
> 赞同：2
> 
> 时间：2013-01-04T09:55:23.700
> 
> 标签：javascript, ember.js, ember-data

我正在努力了解有关 ember 模型生命周期的所有内容。我创建了[这个 jsfiddle](http://jsfiddle.net/PBvbt/)来说明我的问题。单击列表中的一个条目、编辑值并单击版本链接返回列表时，我收到以下错误：

> 未捕获的错误：尝试`loadedData`在 rootState.loaded.updated.uncommitted 状态下处理事件。用 {} 调用

这是什么原因造成的？我知道对象状态现在很脏，但是如何在打开列表时强制刷新所有对象？

此外，如果未保存表单，有关如何放弃对属性的所有更改的任何建议？我正在考虑克隆对象，在编辑表单中使用该克隆，并在保存时将其与原始对象合并。没有我最初想象的那么容易。

使用最新的 ember 和 ember-data。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T13:31:08.663

在与@tchak 快速讨论后，解决方案可能是覆盖版本路由的退出函数，并回滚当前模型。

```
App.VersionRoute = Ember.Route.extend({
  exit: function() {
    var controller = this.controllerFor(this.templateName),
        content = controller.get('content');

    if (content.get('isDirty')) {
      content.get('transaction').rollback(); 
    }
    this._super();
  }
}); 
```

# php - 输出 array_count_values 提取键和值

> ID：14154828
> 
> 赞同：2
> 
> 时间：2013-01-04T09:55:43.383
> 
> 标签：php, arrays

这可能是新手。基本上我

```
$count_versions = array();
while ($row = mysql_fetch_array($result))
{
    $email_build = $row1['build_info'];
$count_versions[] = $email_build;
    } 
```

现在当我使用`print_r`我得到这个

```
Array ( [2660] => 8 [2662] => 6 [2655] => 6 [2666] => 1 ) 
```

这是完美的，现在我想做的就是输出这些值

```
2660 - 8 votes
2662 - 6 votes
2655 - 6 votes
2666 - 1 votes 
```

当我尝试这个时，它似乎将值分解回一个完整的数组，这会撤消我的`array_count_values`但我很难过

我意识到这个`foreach`循环没有任何意义，但它尽可能地接近，任何想法我基本上可以像`print_r`这样打印出来，这样我以后可以把它放在桌子上

```
$i=0;
foreach ($count_versions as $version => $nums)
{
$i++;
echo "Version: " . $nums . " - " . $count_versions . "<br />";
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T10:01:18.060

使用 foreach 看起来很容易：

```
$count_versions = array ( "2660" => 8, "2662" => 6, "2655" => 6, "2666" => 1 );

foreach ($count_versions  as $key => $value)  
    echo $key.' - '.$value.' votes<br>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T09:59:05.927

```
echo "Version: " . $version . " - " . $nums . " votes<br />"; 
```

# java - 当我重新抛出 SocketException 以被 IOException 捕获时，为什么 java 会抱怨？

> ID：14154832
> 
> 赞同：1
> 
> 时间：2013-01-04T09:55:47.780
> 
> 标签：java, exception-handling, netbeans-7

异常的一般规则是在捕获一般异常之前先捕获更具体的异常。我有一个案例，关闭服务器抛出`SocketException: socket closed`来自我的侦听器`IOException`，但我不想在用户关闭服务器时向他们显示该消息。其他所有内容都可能是实际错误，因此应该向他们显示，因此我捕获`SocketException`，检查其消息，如果不是`socket closed`，则应将其重新抛出以被捕获并作为`IOException`. Java/NetBeans 7.0.1 似乎不喜欢这样。这是我的代码：

```
public void run() {
        while (runner == Thread.currentThread()) {
            System.out.println("waiting for connection...");
            try {
                Socket s = server.accept(); //throws SocketException/IOException
                if (session == null) {
                    session = new ReceiveSession(s, parent);
                } else {
                    s.close();
                }
            } catch (SocketException e) {
                if (!e.getMessage().equals("socket closed")) {
                    throw e; //error line, "unreported exception SocketException"
                }
            } catch (IOException e) {
                e.printStackTrace();
                parent.showError("Someone tried to connect but the connection failed: " + e);
                session = null;
            }
        }

    } 
```

在尝试清理和构建时，我得到：

```
error: unreported exception SocketException; must be caught or declared to be thrown
                throw e;
1 error 
```

既然是`SocketException`extends `IOException`，就应该被抓的比较普遍`IOException`。为什么我会收到此错误？（顺便说一句，在 NetBeans 中按原样运行项目可以完美运行，当服务器按照我的意愿关闭时，它不会向用户显示异常。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T09:58:19.447

你在`throw`块*之外*`try`，所以抛出的异常*不会*被`catch`下面的处理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T09:58:20.727

第二个捕获不会捕获重新抛出，因为它没有被扔到`try`第二个捕获负责的块中。您需要重构代码。

* * *

例如，最直接的重组是这样的：

```
public void run() {
    while (runner == Thread.currentThread()) {
        System.out.println("waiting for connection...");
        try {
            try {
                Socket s = server.accept(); //throws SocketException/IOException
                if (session == null) {
                    session = new ReceiveSession(s, parent);
                } else {
                    s.close();
                }
            } catch (SocketException e) {
                if (!e.getMessage().equals("socket closed")) {
                    throw e; //error line, "unreported exception SocketException"
                }
            }
        } catch (IOException e) {
            e.printStackTrace();
            parent.showError("Someone tried to connect but the connection failed: " + e);
            session = null;
        }
    }
} 
```

嵌套的尝试让我哭了一点，但它可以完成工作（老实说，在我的脑海中，我想不出一个不会走得太远的更好方法）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T10:02:54.163

Catch 语句从它们各自的 try 块中捕获异常，而不是从列表中的其他 catch 块中捕获异常。您从 try 之外抛出异常，因此它不会被后续的 catch 块捕获。

# java - java.lang.ang.NoClassDefFoundError: org/hibernate/util/DTDEntityResolver

> ID：14154838
> 
> 赞同：2
> 
> 时间：2013-01-04T09:56:16.207
> 
> 标签：java, spring, hibernate, struts2

我在部署我的 maven build struts2-spring-hibernate web 应用程序时遇到此错误。有谁知道解决以下问题需要哪些 maven 依赖项？

```
11:52:00.479 [main] ERROR o.s.web.context.ContextLoader - Context initialization
 failed
org.springframework.beans.factory.BeanCreationException: Error creating bean wit
h name 'sampleSessionFactory' defined in ServletContext resource [/WEB-INF/appli
cationContext.xml]: Invocation of init method failed; nested exception is java.l
ang.NoClassDefFoundError: org/hibernate/util/DTDEntityResolver
        at org.springframework.beans.factory.support.AbstractAutowireCapableBean
Factory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455) ~[spring-be
ans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBean
Factory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519) ~[spring-beans
-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.beans.factory.support.AbstractAutowireCapableBean
Factory.createBean(AbstractAutowireCapableBeanFactory.java:456) ~[spring-beans-3
.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getOb
ject(AbstractBeanFactory.java:294) ~[spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEAS
E]
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistr
y.getSingleton(DefaultSingletonBeanRegistry.java:225) ~[spring-beans-3.1.1.RELEA
SE.jar:3.1.1.RELEASE]
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBe
an(AbstractBeanFactory.java:291) ~[spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]

        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean
(AbstractBeanFactory.java:193) ~[spring-beans-3.1.1.RELEASE.jar:3.1.1.RELEASE]
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.
preInstantiateSingletons(DefaultListableBeanFactory.java:567) ~[spring-beans-3.1
.1.RELEASE.jar:3.1.1.RELEASE] 
```

我目前正在使用下面提到的依赖项，但仍然出现错误。

```
<dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>4.0.1.Final</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>4.0.1.Final</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-tools</artifactId>
            <version>4.0.0-CR1</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>jtidy</artifactId>
            <version>r8-20060801</version>
        </dependency>

        <dependency>
            <groupId>org.beanshell</groupId>
            <artifactId>bsh</artifactId>
            <version>2.0b5</version>
        </dependency>
        <dependency>
            <groupId>freemarker</groupId>
            <artifactId>freemarker</artifactId>
            <version>2.3.9</version>
        </dependency> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-12T18:14:15.277

您作为依赖项添加的工件 hibernate-tools 版本 4.0.0-CR1 使用使用 DTDEntityResolver 的 hibernate-commons-annotations 3.2.0-Final。**您必须更改**使用 hibernate-commons-annotations 4.0.4.Final 的 4.3.1.CR1 的 hibernate-tools 版本（注意 C 之前的点，而不是破折号），那么您将不再有此错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:04:57.393

尝试回滚到休眠 3，您正在寻找的类似乎不包含在休眠 4 库中。有些东西依赖于 Hibernate 3。

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate</artifactId>
        <version>3.2.7.ga</version>
    </dependency> 
```

[在做了一些进一步的研究之后，我了解到是 JTidy 依赖于 Hibernate 3](http://mvnrepository.com/artifact/org.hibernate/jtidy/r8-21122004)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T15:16:40.943

我已经编译了'org.hibernate:hibernate-core:4.1.9'

我用 compile 'org.hibernate:hibernate-core:3.3.2.GA' 替换它

在我的 build.gradle

这是 gradle 语法，转换为 maven 并不困难，这解决了问题

# java - 如何在一行包含某些单词之前删除文本中的所有行

> ID：14154844
> 
> 赞同：1
> 
> 时间：2013-01-04T09:56:44.617
> 
> 标签：java, replace, bufferedreader

我有一个大的 HTML 字符串，其中包含实际 HTML 代码之前的一些行，这些行是空的 HTML，实际上并不需要。

messageContent 将包含以下内容：

```
 <td width="35"><br /> </td> 
        <td width="1"><br /> </td> 
        <td width="18"><br /> </td> 
        <td width="101"><br /> </td> 
        <td width="7"><br /> </td> 
        <td rowspan="21" colspan="16" width="689">Geachte&nbsp;heer/mevrouw,<br /> &nbsp;<br /> Wij&nbsp;hebben&nbsp;uw&nbsp;inzending&nbsp;ontvangen&nbsp;en&nbsp;gecontroleerd.&nbsp;Hierbij&nbsp;het&nbsp;verslag&nbsp;van&nbsp;de&nbsp;controle.<br /> &nbsp;<br /> 
```

我想删除/替换包含“Geachte”、“heer”和“mevrouw”的行之前的所有内容。

作为输出，我只想保留：

```
 <td rowspan="21" colspan="16" width="689">Geachte&nbsp;heer/mevrouw,<br /> &nbsp;<br /> Wij&nbsp;hebben&nbsp;uw&nbsp;inzending&nbsp;ontvangen&nbsp;en&nbsp;gecontroleerd.&nbsp;Hierbij&nbsp;het&nbsp;verslag&nbsp;van&nbsp;de&nbsp;controle.<br /> &nbsp;<br /> 
```

我想我会使用 BufferedReader 逐行遍历文本：

```
try {
            reader = new BufferedReader(
                    new StringReader(messageContent));
        } catch (Exception failed) { }

        try {
            while ((string = reader.readLine()) != null) {

                if ((string.length() > 0) && (string.contains("Geachte"))) {
                    //remove all lines before this string
                }
            }
        } catch (IOException e) { } 
```

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:36:10.090

这段代码会做到这一点。

```
public String cutText(String messageContent){
    boolean matchFound = false;
    StringBuilder output = new StringBuilder();
    try {
        reader = new BufferedReader(
                new StringReader(messageContent));
    } catch (Exception failed) { failed.printStacktrace(); }

    try {
        while ((string = reader.readLine()) != null) {

            if ((string.length() > 0) && (string.contains("Geachte"))) {
               matchFound = true;
            }
            if(matchFound){
                 output.append(string).append("\\n");
            }
        }
     } catch (IOException e) { e.printStacktrace();}
     return output.toString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:31:16.110

最简单的方法是使用[Xpath](https://stackoverflow.com/a/2811101/1916258)。首先，您需要知道`tr`要删除的正确路径。您可以使用**Chrome 开发人员工具**（`F12`在 Linux/Windows 上，`Cmd+Alt+I`在 Mac 上），元素选项卡，选择您想要的元素（使用镜面玻璃），右键单击并选择`Copy Xpath`。

由于您的内容是一个字符串（无文件），您只需将其复制粘贴一次（例如在调试时）到一个 html 文件中，然后用 Chrome 打开它。如果你给错误块的父级一个 unique 会更安全`id`，因为 xpath 会更短并且更不可能改变。

这会给你类似的东西：

```
//*[@id="answers-header"]/div/h2 
```

首先，您需要将字符串转换为文档：

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();
Document doc = builder.parse(new InputSource(new StringReader("your string"))); 
```

然后在文档上应用 xpath：

```
XPathFactory xPathfactory = XPathFactory.newInstance();
XPath xpath = xPathfactory.newXPath();
XPathExpression expr = xpath.compile(<xpath_expression>);
NodeList nl = (NodeList) expr.evaluate(doc, XPathConstants.NODESET); 
```

并删除无效节点：

```
for (int i = 0; i < nodes.getLength(); i++) {
      Element node = (Element)nodes.item(i);
      node.getParentNode().removeChild(person);
} 
```

然后您需要将文档[转换](https://stackoverflow.com/a/2567428/1916258)回字符串。

# html - CSS 浮动（无法让 clearfix 工作）

> ID：14154845
> 
> 赞同：0
> 
> 时间：2013-01-04T09:56:45.843
> 
> 标签：html, css, css-float

我通常可以通过使用 clearfix 样式来解决所有与浮动相关的问题，但我无法让这个工作。我尝试在右列中添加 clearfix 样式。我宁愿不使用单独的 clearfix div。

下面的屏幕截图应该可以说明问题：

[http://min.us/leRsoGVqAQtbJ](http://min.us/leRsoGVqAQtbJ)

**HTML：**

```
<div class="two-thirds left">

    <!-- Quotes -->
    <div class="notepad">
        <p class="quote">“I have worked [...]</p>
        <span class="who">- Clara Craftsman [...]</span>
    </div><!-- .notebook -->

</div><!-- .two-thirds -->

<div class="one-third right clearfix">
    p>This should be floating to the right of the notepad, but the Work Experience heading should be below.</p>
</div> 
```

**CSS：**

```
/* Floates*/
.left { float:left; }
.right { float:right; }

/* Quotes */
.notepad,
.quote,
.who {
    display:block; 
    font-family:"Neucha",cursive;
    font-size:16px;
}
.notepad { 
    width:409px;
    padding-top:25px;
    margin-left:30px;
    background:url(../img/misc/notepad/notepad-top-big.png) no-repeat; 
}
.quote {
    width:315px; /* 409px total */
    padding:0 28px 24px 66px;
    background:url(../img/misc/notepad/notepad-middle-big.png) repeat-y;
}
.who { 
    width:315px; /* 409px total */
    padding:0 28px 48px 66px;
    background:url(../img/misc/notepad/notepad-bottom-big.png) no-repeat;
    text-align:right;
    font-style:italic;
    margin-top:-24px;
}

/* Clearfix */
.clearfix:before,
.clearfix:after {
    content: " ";
    display: table;
}
.clearfix:after {
    clear: both;
}
.clearfix {
    *zoom: 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T10:26:39.470

您不能将`float`and`clearfix`应用于同一元素。

从[这里](http://www.webtoolkit.info/css-clearfix.html)，

> 当**浮动元素**在**容器 box**内时会出现问题，该元素不会自动强制容器的高度调整为浮动元素。当一个元素浮动时，其父元素不再包含它，因为浮动已从流中移除。

你应该`clearfix`这样应用：

```
<div class="clearfix">
    <div class="one-third right">
        <p>This should be floating...</p>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T10:24:34.213

这是一个不使用浮点数而是使用内联块的解决方案。看看这是不是你要找的——

[**演示**](http://jsfiddle.net/fntce/3/)

修改后的 css-

```
#wrapper 
{
   min-width:700px; 
}
.left,.right { display:inline-block; }
.left
{
    width:70%;
    min-width:420px;
}
.right
 {
    width:28%;
    min-width:170px;
 } 
```

# .net - 该页面在谈论什么样的 .NET 程序集签名，因为它显然不是在谈论强名称签名？

> ID：14154846
> 
> 赞同：1
> 
> 时间：2013-01-04T09:56:46.913
> 
> 标签：.net, code-signing

我目前正在使用 Infragistics 控制套件，他们提到它们同时提供“签名”和“未签名”程序集。

查看他们的[主题页面](http://www.infragistics.com/help/topic/6BB2694C-4BBA-4296-BF47-0536BAA5C575)，他们解释了“签名”和“未签名”程序集之间的以下区别：

> 以下是已签名程序集的使用场景和限制列表：
> 
> *   如果您要获得 Microsoft® Windows® Vista™ 认证，则需要使用签名程序集。
> *   如果要部署 XAML 浏览器应用程序 (XBAP)，则应使用已签名的程序集。
> *   如果您正在使用已签名的程序集并将它们部署到无法连接到 Internet 的环境中，当您在当前 Windows 会话中首次运行应用程序时，将需要很长时间才能启动（从几秒钟到几秒钟）可能需要两分钟或更长时间，具体取决于正在加载的签名程序集的数量）。这是因为当操作系统加载每个签名程序集时，它会尝试验证用于签名程序集的证书没有被吊销。当没有 Internet 连接时，仍会进行此尝试，并且在尝试超时之前不会返回。

还提到“未签名的程序集”进入 GAC。在检查了两个版本的详细信息后，我已经能够确认这两个版本都是强命名的（强名称签名是我所知道的唯一一种 .NET 程序集签名）。

总之，我认为他们所说的“组装签名”不是强名称签名。问题是，那会是怎样的签约？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:15:05.563

它谈论的是使用证书进行数字签名的程序集，通常来自受信任的机构，如 versign。

您可以使用[signtool执行此操作](http://msdn.microsoft.com/en-us/library/8s9b9yaz(v=vs.80).aspx)

例如，看看这个 SO 帖子：[create a key and signing executable with signtool](https://stackoverflow.com/questions/4116639/creating-a-key-and-signing-executable-with-signtool)

# python - 如何从 django 中的查询集结果创建相关字段列表？

> ID：14154848
> 
> 赞同：0
> 
> 时间：2013-01-04T09:56:47.130
> 
> 标签：python, django, django-models

我想从另一个从过滤器搜索查询中获得的查询集创建一个查询集。

有我的模型：

```
class A(models.Model):
    b   = models.ForeignKey(B)
    c   = models.ForeignKey(C)
    score   = models.FloatField(default=5) 
```

我的第一个查询是过滤`A`与特定`B`实例“ `b_instance`”相关的对象：

```
a_list  = A.objects.filter(b=b_instance) 
```

如何在不引用循环的情况下获得表单“ `a_list`”、`c_list`“重新组合所有”字段对象？`c`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:06:04.940

```
c_list = a_list.values_list('c', flat=True) 
```

将给出过滤后的 A 对象中所有 c 值的列表

# python - 任何 python min like 函数，它给出一个列表作为结果

> ID：14154851
> 
> 赞同：1
> 
> 时间：2013-01-04T09:57:05.500
> 
> 标签：python, min

```
>>> lst
[('BFD', 0), ('NORTHLANDER', 3), ('HP', 23), ('VOLT', 3)]
>>> min([x for x in lst if x[1]!=0], key=lambda x: x[1])
('NORTHLANDER', 3)
>>> 
```

这里 min() 只返回一组。它实际上应该返回：

```
[('NORTHLANDER', 3), ('VOLT', 3)] 
```

有什么内置功能可以达到这种效果吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-04T10:02:39.580

这是一个简单的两步解决方案，首先计算最小值，然后收集所有具有最小值的元组，因此请编写自己的函数来执行此操作。这是一个相当专业的操作，而不是通用`min()`功能所期望的。

找到具有最小值的元素：

```
>>> lstm = min([x for x in lst if x[1] > 0], key = lambda x: x[1])
>>> lstm
('NORTHLANDER', 3) 
```

然后只需形成一个新列表，`list`其中的值是 of 的元素`lstm`：

```
>>> [y for y in lst if y[1] == lstm[1]]
[('NORTHLANDER', 3), ('VOLT', 3)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:32:02.353

使用`collections.defaultdict`：

```
d=collections.defaultdict(list)
for item in lst:
    d[item[1]].append(item)
d[min(key for key in d.keys() if key!=0)] 
```

**出去：**

```
[('NORTHLANDER', 3), ('VOLT', 3)] 
```

**测试**：

```
#unwind's solution

def f(lst):
    return [y for y in lst if y[1] == min([x for x in lst if x[1] > 0],
                                             key = lambda x: x[1])[1]]

def f2(lst):
    d=collections.defaultdict(list)
    for item in lst:
        d[item[1]].append(item)
    return d[min(key for key in d.keys() if key!=0)]

%timeit f(lst)
100000 loops, best of 3: 12.1 us per loop
%timeit f2(lst)
100000 loops, best of 3: 5.42 us per loop 
```

所以，`defaultdict`似乎快了两倍多。

**编辑** @martineau 优化：

```
def f3(lst):
    lstm = min((x for x in lst if x[1]), key = lambda x: x[1])[1]
    return [y for y in lst if y[1] == lstm]

%timeit f3(lst)
100000 loops, best of 3: 4.19 us per loop 
```

另一个`dict`基于解决方案的使用`set.default`甚至更快：

```
def f4(lst):
    d={}
    for item in lst:
        if item[1] != 0:
            d.setdefault(item[1],{})[item]=0
    return d[min(d.keys())].keys()

%timeit f4(lst)
100000 loops, best of 3: 3.76 us per loop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T10:13:18.497

您可以将自己的 multimin 函数编写为：

```
def multimin(seq, key=None):
    if key is None:
        key = lambda x: x
    min_e = min(seq, key=key)
    return filter((lambda x: key(x) == key(min_e)), seq) 
```

例如：

```
>>> lst = [('BFD', 0), ('NORTHLANDER', 3), ('HP', 23), ('VOLT', 3)]
>>> print multimin([x for x in lst if x[1]!=0], key=lambda x: x[1]) 
[('NORTHLANDER', 3), ('VOLT', 3)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T10:09:41.127

[集合](http://docs.python.org/2/library/collections.html#collections.Counter.most_common)。计数器？它专为处理类似数据而设计：

```
# Instantiate excluding zero length items
>>> c = collections.Counter({k: v for (k, v) in lst if v != 0})
>>> c
Counter({'HP': 23, 'NORTHLANDER': 3, 'VOLT': 3})

# Retrieve most common then reverse it
>>> least_common = c.most_common()[::-1]
[('VOLT', 3), ('NORTHLANDER', 3), ('HP', 23)]

>>> [(k,v) for (k,v) in least_common if v == least_common[0][1]]
[('VOLT', 3), ('NORTHLANDER', 3)] 
```

（这只是一个想法，并不打算高效）

# java - 如何在 Java SDK 的次要版本和主要版本之间限制应用程序？

> ID：14154854
> 
> 赞同：1
> 
> 时间：2013-01-04T09:57:30.623
> 
> 标签：java, javac

在一次采访中，面试官问我这个问题，如何将用 java 开发的应用程序限制在次要版本和主要版本之间。我知道 -target 选项作为交叉编译选项，但不确定次要和主要之间的受限应用程序。

即使我搜索它，我也没有找到任何与之相关的数据。

我的问题：

是否可以限制次要和主要之间的应用程序？

**回答**

正如 Subin 所建议的，使用次要版本编译应用程序并通过检查 java.version 来检查主要版本，正如 SimonC 在应用程序中回答的那样，这可能满足应用程序的次要和主要版本限制。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T09:58:48.283

您可以检查`java.version` [系统属性](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)。

# gcc - glibc-2.15 无法删除 `/var/db/Makefile'

> ID：14154860
> 
> 赞同：3
> 
> 时间：2013-01-04T09:57:51.913
> 
> 标签：gcc, centos, glibc

尝试在 Centos-5（内核版本`2.6.18-238.9.1.el5, gcc-4.6.3`）上安装 glibc-2.15 时，***make install***步骤失败并显示错误消息 `cannot remove`/var/db/Makefile'`

配置命令是`/data1/downloads/gcc/utils/glibc-2.15/configure --prefix=/data1/downloads/gcc/utils/binutils`

**glibc-2.16+**解决了这个问题，但我受到内核版本的限制。[为了解决这个问题，我对http://sourceware.org/ml/libc-alpha/2012-06/msg00632.html](http://sourceware.org/ml/libc-alpha/2012-06/msg00632.html)`glibc-2.15/(config*in|Makeconfig)`中提到的进行了更改，但这会导致配置错误（捕获信号 2）。

任何有助于解决问题的指针都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:17:08.970

较新的 Glibc*应该*适用于较旧的内核，不是吗？它只是禁用可选功能。当然，这可能只是到目前为止......

无论如何，魔术构建选项将是这样的：

```
/path/to/source/configure --enable-kernel=2.6.18 ...blah.. 
```

# php - 在 CodeIgniter 中扩展 CI_Model 时未定义的属性

> ID：14154861
> 
> 赞同：-3
> 
> 时间：2013-01-04T09:58:01.177
> 
> 标签：php, codeigniter

> **可能重复：**
> [Codeigniter 消息：未定义属性：stdClass](https://stackoverflow.com/questions/9792814/codeigniter-message-undefined-property-stdclass)

位置：**应用程序/核心/student_model.php**

```
class Student_model extends CI_Model
{
    private $id;

    public function __construct() {
        parent::__construct();
    }

    public function setId($id){
        $this->id = $id;
    }

    public function getId() {
        return $this->id;
    }
} 
```

位置：**应用程序/控制器/test.php**

```
class Test extends CI_Controller {

    public function __construct()
    {
        parent::__construct();
        $this->load->model('Student_model');
    }

    public function index()
    {
        $student = $this->student_model->setId('1234567');
        echo $student->getId();
    }
} 
```

我收到以下消息/错误。

```
Message: Undefined property: Test::$student_model
Filename: controllers/test.php
Line Number: 13 
```

这一行是我调用 setId 方法的地方。

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T10:00:49.190

尝试更换

```
$this->student_model->setId('1234567'); 
```

和

```
$this->Student_model->setId('1234567'); 
```

你的班级是大写的，所以财产也应该大写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:03:21.963

尝试

```
public function __construct()
{
    parent::__construct();
    $this->load->model('Student_model', 's_model');
}

public function index()
{
    $student = $this->s_model->setId('1234567');
    echo $student->getId();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T10:42:30.847

你做错的是：

您正在分配 一个不返回任何内容的函数或“设置器” `$student` ； `$this->student_model->setId('1234567');`
你将无法使用`$student->getId();`

我会做的是

```
class Test extends CI_Controller {

    public function __construct()
    {
        parent::__construct();
        $this->load->model('student_model', 'student');
    }

    public function index()
    {
        $this->student->setId('1234567');
        echo $this->student->getId();
    }
} 
```

# google-chrome - Chrome 开发者工具不显示伪元素

> ID：14154862
> 
> 赞同：3
> 
> 时间：2013-01-04T09:58:01.067
> 
> 标签：google-chrome, google-chrome-devtools, pseudo-element

我经常使用 Chrome 的开发者工具，总的来说我更喜欢它而不是 Firebug，但我最近注意到的一件事是，有时它无法在样式区域显示我的伪元素。有时确实如此，所以我知道它偶尔会起作用，但有些看似随机的时候却没有。对此的明显反应是“您确定它们设置正确吗？” 每次发生时我都会考虑。但是这些元素在模板中是可见的，它们只是没有出现在样式中，所以我无法编辑它们。

我指的是 :before 和 :after 主要是因为那是我最常用的。

有没有其他人有这个问题？如果您还没有，我相信这将很难回答，但我会提供更多信息。我将向您展示我遇到问题但它位于私人服务器上的示例。

# c++ - 在 Windows 7 上构建具有 cuda5 支持的 Opencv 2.4.3 时出现 nvcc 问题

> ID：14154879
> 
> 赞同：3
> 
> 时间：2013-01-04T09:59:05.273
> 
> 标签：c++, visual-studio-2008, opencv, cuda

我无法使用 cmake 构建支持 CUDA（版本 5）的 OpenCV 2.4.3 库。根据这里的另一个线程，问题似乎来自 nvcc：[为什么 OpenCV 不能在 NVCC 中编译？](https://stackoverflow.com/questions/1847599/why-wont-opencv-compile-in-nvcc). 但这并没有解释如何安装 OpenCV。

任何可以帮助我的答案将不胜感激！

## 我的系统设置：

```
Computer: Dell46 precision M4700 machine with Windows 7 professional, 64bit os 
Compiler: Microsoft Visual Studio 2008, 
CMake version: 2.8.10.2 
CUDA: 5.0 
```

## 以下是我在 cmake 配置中设置“使用 Cuda”是时构建 Opencv 时的错误示例：

```
Error   3   fatal error : Option '--cubin (-cubin)' is not allowed when compiling for multiple GPU code instances   nvcc
Error   4   fatal error LNK1181: cannot open input file '..\..\lib\Release\opencv_core243.lib'  opencv_test_ml
Error   5   fatal error LNK1181: cannot open input file '..\..\lib\Release\opencv_core243.lib'  opencv_perf_video
Error   6   fatal error LNK1181: cannot open input file '..\..\lib\Release\opencv_core243.lib'  opencv_test_features2d
Error   7   fatal error LNK1181: cannot open input file '..\..\lib\Release\opencv_core243.lib'  opencv_perf_nonfree
Error   8   fatal error LNK1181: cannot open input file '..\..\lib\Release\opencv_core243.lib'  opencv_perf_photo
etc. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T23:10:38.720

:) Very happy to finally find the solution! As suggested by the first error shown above, -cubin is not allowed, so the solution is to remove this option. Step-by-step solution is:

1.  cmake-gui, select OpenCV source path and specify build path. Configure (check "with cuda"), Generate.
2.  Go to build path of opencv (you specified in cmake-gui), open CMakeCache.txt.
3.  Set CUDA_BUILD_CUBIN:BOOL to OFF as shown below:
4.  Build your opencv with VC++.

* * *

```
<CMakeCache.txt>: 
//Generate and parse .cubin files in Device mode.
CUDA_BUILD_CUBIN:BOOL=OFF 
```

Good luck!

# ruby-on-rails - 如何根据（给定）属性值计算模型示例的数量？

> ID：14154881
> 
> 赞同：0
> 
> 时间：2013-01-04T09:59:10.450
> 
> 标签：ruby-on-rails

提前感谢您对此的任何帮助，如果我是一个明显的新手，请道歉。

我需要能够计算具有我正在搜索的属性值的模型示例的数量。

例如，如果我有一个带有许多“动物”的模型“动物园”，我如何计算“动物园”中“动物”的数量，“大猩猩”的“名称”属性？

我很确定我知道该函数在纸上的外观，但是，对于 Rails 来说非常陌生，我对实现它没有信心，甚至确定没有简单的内置选项。例如，按名称属性选择然后 .size-ing 选择？

再次感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:06:06.267

```
zoo.animals.where(:name => 'Gorilla').count 
```

如果您是 Rails 新手，您应该阅读[Rails 指南](http://guides.rubyonrails.org/index.html)。对于您所要求的，您会在[Active Record 关联](http://guides.rubyonrails.org/association_basics.html)和[Active Record 查询界面](http://guides.rubyonrails.org/active_record_querying.html)中找到它（以及更多！） 。

# .net - Caliburn.Micro：对话框的主动或被动视图模型？

> ID：14154883
> 
> 赞同：1
> 
> 时间：2013-01-04T09:59:20.280
> 
> 标签：.net, design-patterns, caliburn.micro

一般来说，哪种方法更适合 ViewModel 初始化？

## 积极的

初始化视图模型类的实例，然后执行它自己的任何数据收集（填充用于下拉列表等的列表）。

## 被动的

视图模型类的一个实例被初始化，但调用者随后也会填充视图模型对象的属性（用于下拉列表等的列表）。

我认为我更喜欢第一种方法，因为看起来那些“对话框”视图模型会更有用，但是在调用视图模型已经拥有一些数据的情况下，将其传入可能是有益的。

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:56:55.820

虽然我更喜欢这种`Active`方法，但我想你可以采用混合方法。

由于大多数 VM 属性都是公开的（用于绑定），因此您可以通过属性设置器进行分配，将您拥有的任何值从调用 VM 传递到对话 VM。

当对话框激活时（我假设它将具有生命周期，因为它是一个对话框）然后您可以检查是否尚未设置任何属性，并加载缺少的内容。

当然，我可能会采用“主动”方法——大多数对话框不需要加载大量数据，但您的里程可能会有所不同。

# php - 如何将数组及其内容从控制器传递到视图

> ID：14154885
> 
> 赞同：0
> 
> 时间：2013-01-04T09:59:22.600
> 
> 标签：php, arrays, yii

我是 Yii 的新手，我在将数组从控制器中的操作传递到视图时遇到问题，以便我可以在视图本身中读取数组的内容。

我的控制器：

```
public function actionReportAllWeeks()
{
    $user = YumUser::getById(Yii::app()->user->id);
    $format = 'Y-m-d';
    $clients = Client::model()->findAll();
    $UNI = array();$NPP = array();$DAN = array();$McC = array();$CAS = array();$LAC = array();
    foreach ($clients as $client) {
        $project_count = 0;
        $projects = Project::model()->findAll(array('condition'=>'client_id='.$client->id));
        for ($i=1; $i < 30; $i++) { 
            foreach ($projects as $project) {
                $date_created = $project->created;
                $createdDate = DateTime::createFromFormat($format, $date_created);
                $week_num = $createdDate->format('W');
                if ($client->shortname == 'UNI') {
                    if ($week_num == $i) {
                        $UNI[$i]++;
                    }
                }
                elseif ($client->shortname == 'NPP') {
                    if ($week_num == $i) {
                        $NPP[$i]++;
                    }
                }
                elseif ($client->shortname == 'DAN') {
                    if ($week_num == $i) {
                        $DAN[$i]++;
                    }
                }
                elseif ($client->shortname == 'McC') {
                    if ($week_num == $i) {
                        $McC[$i]++;
                    }
                }
                elseif ($client->shortname == 'CAS') {
                    if ($week_num == $i) {
                        $CAS[$i]++;
                    }
                }
                elseif ($client->shortname == '') {
                    if ($week_num == $i) {
                        $LAC[$i]++;
                    }
                }                       
            }
        }
    }

    $this->render('client/client', array('clients'=>$clients, 'UNI'=>$UNI, 'NPP'=>$NPP, 'DAN'=>$DAN, 'McC'=>$McC, 'CAS'=>$CAS, 'LAC'=>$LAC));
} 
```

我的观点：

```
<table class="table table-striped table table-bordered" style="width:95%">
<thead>
  <tr>
    <th>Projects</th>
      <?php for ($i=1; $i < 52; $i++):?>
        <td style="text-align:center">Week <?php echo $i; ?></td>
      <?php endfor; ?>
  </tr>
</thead>
<tbody>
<?php foreach ($clients as $client): ?>
  <tr>
    <td><?php echo $client->name; ?></td>
    <?php for ($i=1; $i < 52; $i++):?>
      <td style="text-align:center">/*should echo some values from array*/</td>
    <?php endfor; ?>
  </tr>     
<?php endforeach;?>
</tbody> 
```

当我尝试从任何数组中读取元素时，我得到“未定义的偏移量 1”错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:46:35.263

错误本身意味着您的数组在索引 1 处没有值。您似乎已经得出结论，错误在您的视图中，而不是在您的控制器中。

您的错误可能发生在查看控制器代码的视图之前，在您的每个条件中，您的代码类似于：

```
$someArray[$i]++; 
```

所有这些都会出错，因为`$someArray[$i]`未定义；你所有的数组都是空的。

我建议您填充数组以开始使用[array_fill](http://php.net/manual/en/function.array-fill.php)，例如：

```
$NPP = array_fill(1,52,0); 
```

*请注意，这忽略了控制器中的索引是从 1 到 30 的事实，而在您的视图中是 1 到 52。*

为了将来参考，请确保包含您看到的完整错误消息，其中应包含文件和行号。我猜如果您查看错误，它会指向控制器中的递增行之一，而不是您的视图。

# generics - 泛型和 Xstream

> ID：14154888
> 
> 赞同：3
> 
> 时间：2013-01-04T09:59:36.913
> 
> 标签：generics, serialization, xstream

在反序列化 Xml 时，我遇到了 java 泛型和 xstream 的问题。

这是主要的 DTO

```
@XStreamAlias("OBJECTX")
public class ObjectX<T> {

    @XStreamAlias("DATA")
    private T t;

    ... getter and setter ...

} 
```

这是主 DTO 中的 Data 对象

```
@XStreamAlias("DATA")
public class FolderXml {

    @XStreamAlias("DIGITION_NAME")
    private String digitionName;

    @XStreamAlias("FOLDER_ID")
    private int folderId;

    ...getters and setters...

} 
```

这是反序列化的 Xml 示例

```
<?xml version="1.0" encoding="UTF-8"?>
<OBJECTX>
        <DATA>
            <DIGITION_NAME>TVC_ACT2</DIGITION_NAME>
            <FOLDER_ID>1234</FOLDER_ID>
        </DATA>
</OBJECTX> 
```

这是实际的代码

```
StaxDriver staxDriver = new StaxDriver(new NoNameCoder());
XStream xstream = new XStream(staxDriver);
xstream.processAnnotations(ObjectX.class);
xstream.alias("DATA", FolderXml.class);
ObjectX<FolderXml> obj=  (ObjectX<FolderXml>) xstream.fromXML(xml); 
```

例外是

```
com.thoughtworks.xstream.converters.reflection.AbstractReflectionConverter$UnknownFieldException: No such field java.lang.Object.DIGITION_NAME
---- Debugging information ----
field               : DIGITION_NAME
class               : java.lang.Object
required-type       : java.lang.Object
converter-type      : com.thoughtworks.xstream.converters.reflection.ReflectionConverter
path                : /OBJECTX/DATA/DIGITION_NAME
line number         : 4
class[1]            : cat.ccma.digition.digitionservicecontroller.objects.base.ObjectX
version             : null
------------------------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-17T10:40:14.810

修改您的代码以添加泛型的默认实现。

```
 StaxDriver staxDriver = new StaxDriver(new NoNameCoder());
    XStream xstream = new XStream(staxDriver);
    xstream.processAnnotations(ObjectX.class);
    xstream.processAnnotations(FolderXml.class);
    xstream.alias("DATA", FolderXml.class);
    xstream.addDefaultImplementation(FolderXml.class,ObjectX.class.getDeclaredField("t").getType());
    ObjectX<FolderXml> obj=  (ObjectX<FolderXml>) xstream.fromXML(xml); 
```

# iphone - 方法没有从 plist 中获取价值

> ID：14154891
> 
> 赞同：-1
> 
> 时间：2013-01-04T09:59:40.657
> 
> 标签：iphone, ios5, theos

出于某种原因，我没有从我的 plist 中获得价值，我不确定为什么这里是 plist：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>CachedColors</key>
    <dict>
        <key>com.Halfbrick.Fruit</key>
        <string>0.00000,0.00000,0.00000</string>
        <key>com.amazon.Amazon</key>
        <string>0.00000,0.00000,0.00000</string>
        <key>com.apple.AdSheetPhone</key>
        <string>0.00000,0.00000,0.00000</string>
        <key>com.apple.AppStore</key>
        <string>0.28824,0.37059,0.48235</string>
    <key>default</key>
    <true/>
    <key>gradient</key>
    <false/>
    <key>opaque</key>
    <true/>
    <key>showedMessage</key>
    <true/>
    <key>translucent</key>
    <true/>
</dict>
</plist> 
```

我的方法是：

```
SBApplication *frontApp = [(SpringBoard*)[UIApplication sharedApplication] _accessibilityFrontMostApplication];
NSString *frontAppBundleID = [frontApp displayIdentifier];
NSDictionary *statusBarCachedColors = [NSDictionary dictionaryWithContentsOfFile:@"/var/mobile/Library/Preferences/cc.tweak.statuscolor.plist"];
NSString *colorString = (NSString*)[statusBarCachedColors objectForKey:frontAppBundleID];
NSArray *components = [colorString componentsSeparatedByString:@","];
UIColor *tintColor = [UIColor colorWithRed:[[components objectAtIndex:0] floatValue] green:[[components objectAtIndex:1] floatValue] blue:[[components objectAtIndex:2] floatValue] alpha:1]; 
```

应该发生的事情是，我的方法将获取当前应用程序的显示 ID，然后从 plist 中获取应用程序的值，然后拆分值字符串并从数组中生成 UIColor。因此，如果我打开 AppStore，它将搜索 plist 并返回“0.28824,0.37059,0.48235”并将其设置为颜色，但它似乎没有返回任何内容，我已经测试了 displayIdentifier，这是正确的显示正确的应用程序显示 ID，我只是不知道为什么它没有获得价值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T12:36:23.383

您错过了**CachedColors**项目。

```
NSString *colorString = (NSString*)[[statusBarCachedColors objectForKey:@"CachedColors"] objectForKey:frontAppBundleID]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:09:10.067

使用下面的代码可能会起作用..

从 plist 中获取价值，如下所示...

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"PlistFileName" ofType:@"plist"];
NSMutableArray  *arrPList = [NSMutableArray arrayWithContentsOfFile:path]; 
```

使用您的代码并尝试使用以下逻辑后..

```
float clrRed = [[components objectAtIndex:0] floatValue];
float clrGreen = [[components objectAtIndex:1] floatValue];
float clrBlue = [[components objectAtIndex:2] floatValue];

UIColor *tintColor = [UIColor colorWithRed:clrRed green:clrGreen blue:clrBlue floatValue] alpha:1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T10:12:07.573

```
NSString *path = [[NSBundle mainBundle] pathForResource:
                      @"<plist file name>" ofType:@"plist"];

NSDictionary *dict = [NSDictionary dictionaryWithContentsOfFile:path]; 
```

试试这个希望它会工作。

# c# - 多用户 ASP.NET Web 应用程序中静态变量的范围

> ID：14154892
> 
> 赞同：49
> 
> 时间：2013-01-04T09:59:40.903
> 
> 标签：c#, asp.net, static

静态变量是否在用户会话中保留其值？

我有一个 ASP.NET Web 应用程序，其中有两个按钮。一个用于设置静态变量值，另一个用于显示静态变量值。

```
namespace WebApplication1
{   

public partial class WebForm1 : System.Web.UI.Page
{
    public static int customerID;

    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void ButtonSetCustomerID_Click(object sender, EventArgs e)
    {
        customerID = Convert.ToInt32(TextBox1.Text);
    }

    protected void ButtonGetCustomerID_Click(object sender, EventArgs e)
    {
        Label1.Text = Convert.ToString(customerID);
    }
}

} 
```

虽然这适用于单用户环境，但如果有 2 个用户同时从两台计算机登录会发生什么情况，用户 1 将值设置为 100，然后用户 2 将值设置为 200。在用户 1 调用获取值按钮之后。他会看到什么价值？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-01-04T10:04:03.897

> 静态变量是否在用户会话中保留其值？

是的，这就是为什么在 Web 应用程序中使用静态变量时应该非常小心的原因。您将在并发问题中运行，因为为请求提供服务的多个线程可以修改变量的值。

> 虽然这适用于单用户环境，但如果有 2 个用户同时从两台计算机登录会发生什么情况，用户 1 将值设置为 100，然后用户 2 将值设置为 200。在用户 1 调用获取值按钮之后。他会看到什么价值？

之后用户将看到 200 个。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-04T10:03:20.513

**静态变量范围是应用程序级别。**

如果您将某些内容存储在静态变量中，那么您肯定做错了什么。

如果一个用户保存数据（在静态变量中），同时另一个用户访问同一页面，那么他将获得相同的数据（保存第一个用户）。

```
So better you can store the values in **Sessions**. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-04T16:37:16.983

这对您有用（请记住，您需要处理空值/-1）：

```
public static int customerID
{
    get { return session["customerID"] == null? -1 : (int)session["customerID"]; }
    set { session["customerID"] = value; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-15T09:49:12.530

不要对属性使用静态然后它可以工作：

```
public int customerID
{
    get { return Session["customerID"] == null? -1 : (int)Session["customerID"]; }
    set { Session["customerID"] = value; }
} 
```

# batch-file - 从单个批处理文件运行多个批处理文件

> ID：14154893
> 
> 赞同：2
> 
> 时间：2013-01-04T09:59:51.680
> 
> 标签：batch-file

我必须通过一个批处理文件执行两个批处理文件。一个批处理文件具有启动服务器应用程序的命令，另一个是客户端应用程序。所以条件是一旦服务器启动，只有客户端应该尝试访问服务器。

我尝试过以下事情，

parent.bat 有以下内容

启动服务器.bat

启动客户端.bat

并发现两个应用程序分别运行但无法达到应有的顺序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T10:03:13.693

你有没有尝试过

```
CALL test.bat 
```

这将停止父脚本的执行，直到子脚本完成。

并在研究问题上更加重视。
我的第一次谷歌搜索“批处理等待脚本执行”提出了这个：
[如何从批处理脚本中运行批处理脚本](https://stackoverflow.com/questions/4798879/how-to-run-a-batch-script-from-within-a-batch-script)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T10:10:02.820

@HappyHacking 解决方案的替代方法是使用

```
start /wait server.bat
start client.bat 
```

这将等到服务器脚本完成后再启动客户端脚本。

# c# - 如何在windows phone 7.1的列表框中选择一个项目

> ID：14154895
> 
> 赞同：1
> 
> 时间：2013-01-04T10:00:09.753
> 
> 标签：c#, windows-phone-7

我是一个初学者，正在为 Windows Phone 7.1 创建一个应用程序，我正在尝试通过列表框中的单击事件导航到新页面，基本上我希望列表框中的每个项目都应该导航到不同的页面我已尝试以下代码

```
private void FirstListBox_SelectionChanged_1(object sender, SelectionChangedEventArgs e)
     {
        // If selected index is -1 (no selection) do nothing
        if (FirstListBox.SelectedIndex == -1)
            return;

        // Navigate to the new page
        NavigationService.Navigate(new Uri("/FirstItemPage1.xaml?selectedItem=" + FirstListBox.SelectedIndex, UriKind.Relative));

        // Reset selected index to -1 (no selection)
        FirstListBox.SelectedIndex = -1;
    } 
```

上面的代码运行良好，但问题是它将整个列表框带到同一页面，但我希望每个单独的项目导航到不同的页面

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T12:18:55.473

将列表框中的每个项目添加到列表框时，您可以设置它们的 SelectedValue。

假设您通过代码将字符串列表分配给 ListBox 的 ItemsSource（或者它可能通过数据绑定发生）。您可以在页面的构造函数中添加您的项目。

```
var items = new List<string>(){ "Home", "Details" };
FirstListBox.ItemsSource = items; 
```

在 SelectionChanged 事件中添加一个 switch 语句，该语句根据所选项目的 SelectedValue 导航到不同的页面，如下所示：

```
private void FirstListBox_SelectionChanged_1(object sender, SelectionChangedEventArgs e)
 {
    // If selected index is -1 (no selection) do nothing
    if (FirstListBox.SelectedIndex == -1)
        return;

    switch (FirstListBox.SelectedValue)
        {
            case "Home":// Navigate to the page
    NavigationService.Navigate(new Uri("/Home.xaml", UriKind.Relative)); break;
            case "Details":// Navigate to the page
    NavigationService.Navigate(new Uri("/Details.xaml", UriKind.Relative)); break;default:break;
        }

    // Reset selected index to -1 (no selection)
    FirstListBox.SelectedIndex = -1;
} 
```

如果将复杂对象绑定到 ListBox，则可以使用 ListBox 的 SelectedItem-Property，因为该属性包含已绑定到该 ListBoxItem 的对象，并根据复杂对象的属性之一区分情况，例如姓名或身份证件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T04:38:53.013

我让我的应用程序使用此代码

private void SecondListBox_SelectionChanged(object sender, SelectionChangedEventArgs e) { { if (SecondListBox.SelectedIndex == -1) return;

```
 ItemViewModel itemViewModel = SecondListBox.SelectedItem as ItemViewModel ;

            switch (itemViewModel.LineOne)
            {
                case "Violet":
                    NavigationService.Navigate(new Uri("/SecondListPage1.xaml?selectedItem=" + SecondListBox.SelectedIndex, UriKind.Relative));
                    break;
                case "Indigo":
                    NavigationService.Navigate(new Uri("/SecondListPage2.xaml?selectedItem=" + SecondListBox.SelectedIndex, UriKind.Relative));
                    break;
                case "Blue":
                    NavigationService.Navigate(new Uri("/SecondListPage3.xaml?selectedItem=" + SecondListBox.SelectedIndex, UriKind.Relative));
                    break;
                case "Green":
                    NavigationService.Navigate(new Uri("/SecondListPage4.xaml?selectedItem=" + SecondListBox.SelectedIndex, UriKind.Relative));
                    break;
                case "Yellow":
                    NavigationService.Navigate(new Uri("/SecondListPage5.xaml?selectedItem=" + SecondListBox.SelectedIndex, UriKind.Relative));
                    break;
                case "Orange":
                    NavigationService.Navigate(new Uri("/SecondListPage6.xaml?selectedItem=" + SecondListBox.SelectedIndex, UriKind.Relative));
                    break;
                case "Red":
                    NavigationService.Navigate(new Uri("/SecondListPage7.xaml?selectedItem=" + SecondListBox.SelectedIndex, UriKind.Relative));
                    break;
                case "Purple":
                    NavigationService.Navigate(new Uri("/SecondListPage8.xaml?selectedItem=" + SecondListBox.SelectedIndex, UriKind.Relative));
                    break;
                default:
                    MessageBox.Show("Please Select From the list!");
                    break;

            }

            SecondListBox.SelectedIndex = -1;
        }
    } 
```

# android - 在 Android 活动标题栏上。图标是可点击的。我想关掉

> ID：14154896
> 
> 赞同：0
> 
> 时间：2013-01-04T10:00:15.673
> 
> 标签：android, android-layout

我正在开发 android 应用程序`android:Theme.Light`。

在任何活动中，屏幕左上方都有一个应用程序图标（见下方屏幕），默认情况下它是可点击的

我想将其关闭为不可点击或可点击。

![在此处输入图像描述](../Images/d9c5cc1bb9b56b1e364934d78cf19584.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:07:49.517

如果要禁用主页按钮`ActionBar`，请在`OnCreate`

```
ActionBar actionBar = getActionBar();
actionBar.setHomeButtonEnabled(false); 
```

# html - div 在包含的 div 中占据全高（背景）

> ID：14154902
> 
> 赞同：2
> 
> 时间：2013-01-04T10:00:30.700
> 
> 标签：html, sticky-footer, css

我有以下问题。

我正在使用 twitter 引导程序来制作我的新网站，但我在背景方面遇到了困难。以下是我所拥有的：

```
<body>   
    <div class="wrapper">
        <div class="navbar navbar-inverse navbar-fixed-top">
               ...
        </div>
        <div id="header">
             ...
        </div>
        <div id="content">
             ...
        </div>
        <div class="push>
        </div>
    </div>
    <div class="footer">
         ....
    </div>
</body> 
```

导航栏固定在顶部。（固定高度）标题（标题内容）随着页面滚动并且高度固定。页脚位于页面底部但如果有更多内容则滚动（不固定在底部但固定高度）

我想要的是内容具有占用所有可用空间的背景（从页眉之后到页脚） [图像澄清](http://imageshack.us/photo/my-images/600/capturevxb.png/)

[完整的 HTML 和 CSS（没有引导 css）代码](http://pastebin.com/81ks2g80)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:57:36.047

因此，您希望内容区域的页眉和页脚至少减少 100%？

我会这样做：

演示：http: [//jsbin.com/ofijap/1/edit](http://jsbin.com/ofijap/1/edit)

```
.head {
  height:100px;
  background-color:green;
}
.wrap {
  min-height:100%;
  background-color:red;
}
.footer {
  height:100px;
  background-color:grey;
  margin-top:-100px;
}
.content {
  padding-bottom:100px;
}

<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <div class="wrap">
      <div class="head">Head</div>
    <div class="content">content</div>   
    </div>
  <div class="footer">footer</div>
</body>
</html> 
```

编辑：

根据经验，如果你想填满所有垂直空间，它可能需要 min-height:100%; 但是，它的父元素也应该有 100% 的高度，以此类推直到 body 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T12:21:15.757

致希望看到我最终结果的人：感谢@user1721135 ;) [http://jsbin.com/udoxet/2/edit](http://jsbin.com/udoxet/2/edit)

现在我将尝试将其移植到我自己的网站上，看看是否可行:)

# apache - 虚拟主机内的 Apache 重写规则

> ID：14154916
> 
> 赞同：2
> 
> 时间：2013-01-04T10:01:17.113
> 
> 标签：apache, mod-rewrite, apache2

我在将重写规则从迁移`.htaccess`到`VirtualHost`.

当我在目录之外使用`VirtualHost`它时，它可以工作，但是我遇到了一些身份验证错误 - 所以我想知道我应该更改它以使其在`VirtualHost`.

或者应该将它们添加到`<Directory /var/www/server/>`

规则：

```
<Directory /var/www/server/subfolder/>
    RewriteEngine On
    RewriteCond $1 !^(index\.php|images|js|css|robots\.txt)
    RewriteRule ^(.*)$ /subfolder/index.php/$1 [L]
</Directory> 
```

虚拟主机：

```
<VirtualHost *:80>
ServerAdmin admin@server.com
Servername server.com
ServerAlias server2 server2.com server server.com

DocumentRoot /var/www/server

<Directory />
    Options FollowSymLinks
    AllowOverride None
</Directory>

<Directory /var/www/server/>
    AuthType NTLM
    AuthName Server
    require valid-user

    PythonAuthenHandler pyntlm
    PythonOption Domain SERVER.COM
    PythonOption PDC xxx.xxx.xxx.xxx
    PythonOption BDC xxx.xxx.xxx.xxx

    Order allow,deny
    Allow from all
</Directory>

ErrorLog ${APACHE_LOG_DIR}/server.com_error.log

# Possible values include: debug, info, notice, warn, error, crit,
# alert, emerg.
LogLevel warn

CustomLog ${APACHE_LOG_DIR}/server.com_access.log combined env=!nolog
</VirtualHost> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:21:23.447

为我解决身份验证问题的是添加

```
Order allow,deny
Allow from all 
```

对现有的`<Directory /var/www/server/subfolder/>`.

尽管我仍然只能`<Directory>`在`<VirtualHost>`.

谢谢大家。

# wpf - 数据触发器溢出异常

> ID：14154926
> 
> 赞同：0
> 
> 时间：2013-01-04T10:01:54.760
> 
> 标签：wpf, styles, datatemplate, datacontext, datatrigger

这怎么可能是溢出异常......？

```
<DataTemplate x:Key="ElementTemplate">
            <StackPanel Orientation="Horizontal">
                <StackPanel.Style>
                    <Style TargetType="{x:Type StackPanel}">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding Converter={StaticResource TypeConv}}" Value="{x:Type models:GroupModel}">
                                <Setter Property="Margin" Value="5 0 0 0"></Setter>
                                <Setter Property="DataContext" Value="{Binding Model}"></Setter>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </StackPanel.Style>
                <TextBlock Text="{Binding Name}"></TextBlock>
                ...
             <StackPanel/>
<DataTemplate/> 
```

原因：这是一个通常需要模型 A 作为数据类型的模板（至少有 25 个 UI 控件）。是`DataTemplate`一个`ListvVew` `ItemTemplate`。但是数据类型可以是模型 B 类型。模型 B 有一个名为“模型”的属性，它是模型 A 类型。因此，与其复制粘贴整个块模板并使用样式触发器或`DataTemplate`选择器，我只想更改`DataContex`t （从“{Binding}”到“{Binding Model}”）

任何人有一些建议，解决方案？

谢谢！

编辑：`Converter`返回传入值的类型（数据对象本身）。这样我就可以知道模型 B 何时使用模板，从而更改 DataContext。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T11:13:09.343

我建议的解决方法是避免设置数据上下文和触发之间可能的递归`DataTrigger`：

拥有两者`ModelA`并`ModelB`实现一个通用接口`IListViewModel`，例如使用单个属性获取器调用：

```
public interface IListViewModel
{
    ModelA Model {get;}
} 
```

然后，`ModelA`' 的实现将返回`this`，而`ModelB`' 的实现返回`this.ModelA`The`DataTemplate`简单地绑定到`.Model`它给出的任何视图模型。

# kendo-ui - 与其他字段一起保存剑道网格批量编辑

> ID：14154927
> 
> 赞同：0
> 
> 时间：2013-01-04T10:01:55.103
> 
> 标签：kendo-ui, batch-processing

我有一个场景，我想在一个提交按钮按下时保存 kendo 网格批量编辑和表单中的其他字段。我想使用这种场景，因为我必须将整个表单保存在一个 sql 事务中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T11:25:31.117

You might get it implementing a [`transport.parameterMap`](http://docs.kendoui.com/api/framework/datasource#transportparametermap-function) function where you create the data structure that you want to send.

Example:

```
function(options, operation) {
    if (operation !== "read" && options.models) {
        return {   
            data:   options.models,
            field1: $("#form_field1").val(),
        };
    }
} 
```

Where `data` is the original data and `field1` is the one got from your `form` and in an `html` `input` field which `id` is `form_field1`.

Alternatively, you can use [`transport.update.data`](http://docs.kendoui.com/api/framework/datasource#transportupdatedata-objectstringfunction) where you can define extra data to send to the server on an `update` (same exists for `read`, `destroy` and `create`).

Here you would have something like:

```
transport: {
    update: {
        data: function() {
            return {
                field1: $("#form_field1").val()
            }
        }
    }
} 
```

# c# - 如何在 publickeytoken == null 时使用 C# 从 Dll 获取公共方法

> ID：14154933
> 
> 赞同：0
> 
> 时间：2013-01-04T10:02:38.707
> 
> 标签：c#, dll, assemblies, publickeytoken

我想从 dll 中找到公共用户定义函数`publickeytoken == null`

```
OpenFileDialog obj = new OpenFileDialog();
if (obj.ShowDialog() == System.Windows.Forms.DialogResult.OK)
{
    Assembly ass = Assembly.LoadFrom(obj.FileName);

    // Here its getting Exception because Publickeytoken == null;
    Assembly a = Assembly.LoadWithPartialName(ass.FullName);

    Type[] types = a.GetTypes();
    foreach (Type type in types)
    {
        if (!type.IsPublic)
        {
            continue;
        }

        MemberInfo[] members = type.GetMembers(BindingFlags.Public
                                                | BindingFlags.Instance
                                                | BindingFlags.InvokeMethod);
        foreach (MemberInfo member in members)
        {
            Console.WriteLine(type.Name + "." + member.Name);
        }
    }
} 
```

如何解决这个问题

即使我试过这个来查找 publictokenkey 它会重新运行 0 个字节

```
 byte[] b = Assembly.GetExecutingAssembly().GetName().GetPublicKeyToken(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:09:49.013

您的绑定标志错误，您可以`ass`直接使用：

```
OpenFileDialog obj = new OpenFileDialog();
if (obj.ShowDialog() == System.Windows.Forms.DialogResult.OK)
{
    Assembly ass = Assembly.LoadFrom(obj.FileName);
    foreach(var type in ass.GetTypes())
    {
        MethodInfo[] members = type.GetMethods(BindingFlags.Public | BindingFlags.Instance);

        foreach (MemberInfo member in members)
        {
            Console.WriteLine(type.Name + "." + member.Name);
        }
    }
} 
```

# html - sharepoint 中的顶部菜单导航

> ID：14154934
> 
> 赞同：1
> 
> 时间：2013-01-04T10:02:43.460
> 
> 标签：html, css, windows, sharepoint, drop-down-menu

我在 sharepoint 方面完全没有经验，但客户要求我对其 sharepoint 网站进行品牌设计。

我有一个关于顶部导航的问题，看起来像这样：

```
Home | Staff | IT | Organization 
```

像这样在 fx IT 上的子项目

```
Manuals
Protocols 
```

在像吸盘鱼这样的下拉菜单中

有一个主入口页面和三个办公页面

在树视图中，它将如下所示：

```
Main
  - Office 1
    - Staff
    - IT
      - Manuals
      - Protocols
    - Organization
  - Office 2
    - Staff
    - IT
      - Manuals
      - Protocols
    - Organization
  - Office 3
    - Staff
    - IT
      - Manuals
      - Protocols
    - Organization 
```

我怎样才能实现这个特定的要求？我是否需要在子页面上为下拉菜单创建子页面和子页面，还是有其他方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T12:57:54.333

首先转到站点设置>>导航（在外观下）根据需要添加/删除“全局导航”下的链接

其次编辑您的母版页并添加以下内容

```
 <PublishingNavigation:PortalSiteMapDataSource ID="topSiteMap" runat="server" EnableViewState="false" SiteMapProvider="GlobalNavigation" StartFromCurrentNode="true" StartingNodeOffset="0" ShowStartingNode="false" TrimNonCurrentTypes="Heading"/>

    <SharePoint:AspMenu ID="TopNavigationMenuV1" EncodeTitle="false" Runat="server" EnableViewState="false" DataSourceID="topSiteMap" AccessKey="<%$Resources:wss,navigation_accesskey%>" UseSimpleRendering="true" UseSeparateCss="false" Orientation="Horizontal" StaticDisplayLevels="2" MaximumDynamicDisplayLevels="4" SkipLinkText=""> 
```

您可以根据需要使用这些属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T20:10:18.327

SharePoint handles the rendering of navigation for you, assuming that you want SharePoint to manage your navigation bar. There are quite a few caveats to allowing SharePoint to manage your navigation if you intent to brand it, mainly in how you set up your site structure. When it comes to branding, the primary problem you are going to encounter is that by default most of your primary static links (Staff, It and Organization) in your example will actually be on the second level in your nav list.

```
<ul>
    <li><a href=”#”&gt;Home</a>
    <ul>
        <li><a href=”#”&gt;Staff</a></li>
        <li><a href=”#”&gt;IT</a></li>
        <li><a href=”#”&gt; Organization </a></li>
    </ul>
    </li>
</ul> 
```

SharePoint also adds a bunch of divs and classes that may cause something like SuckerFish issues. Most nav plugins I have worked with will attempt to hide any non-toplevel list items, so your nav bar would only show "Home" and not the rest, not exactly good.

The easiest way around this is to use static navigation. Update your custom master page with your own list for navigation, applying the proper class for whatnot for suckerfish and you get good to go. Problem is that you now have to update your master page each time you want to change your nav.

Next option is to use jquery to parse SharePoint’s rendering of your navigation, rebuild it in a suckerfish friendly way, and finally let suckerfish markup this. We have used this for quite a few customers because it’s quick and easy. You are throwing all of the heavy lifting to the client, and depending on how you build your html,css and js, there may be a flicker when the nav is being updated.

Third, the sledgehammer approach, hack the css and use jquery to add suckerfish like effects to your OOTB SP navigation. It is not the difficult although I do not find this elegent.

Fourth, create your own navigation web part that will render your sitemap in a way that you like. This would require knowledge of SharePoint and how to build a solid app. I would only recommend this for developers that are experienced with SharePoint.

I understand the desire to learn how to work with SharePoint, we all started with a request to branding SP for the first time from someone. The issue is that branding SharePoint is a very different skill than building a general site, modifying Joomla, WordPress, etc. You might find it much quicker to work with company that has the experience and knowledge of branding SharePoint so that it is done correctly. You could then use this knowledge for your next SP request.

I hope this helps.

# oracle-coherence - 不调用后写缓存存储事件

> ID：14154935
> 
> 赞同：1
> 
> 时间：2013-01-04T10:02:47.503
> 
> 标签：oracle-coherence

我正在尝试在我的 Web Logic App 服务器中创建一个写入缓存（有一个针对此应用服务器的一致性集群）。我在 Server Start 'Arguments' (-Dtangosol.coherence.cacheconfig=/server/appserver/server-cache-config.xml) 中给出了服务器特定的缓存配置。

**服务器缓存配置.xml：**

```
<cache-config>
  <caching-scheme-mapping>
    <cache-mapping>
      <cache-name>MissedTransactionCache</cache-name>
      <scheme-name>Missed-Transaction-Cache</scheme-name>
    </cache-mapping>
  </caching-scheme-mapping>

  <caching-schemes>
    <distributed-scheme>
      <scheme-name>missed-transaction-cache-scheme</scheme-name>
      <service-name>DistributedCache</service-name>

      <thread-count>50</thread-count>

      <backing-map-scheme>
        <read-write-backing-map-scheme>
          <scheme-name>TestScheme</scheme-name>

          <internal-cache-scheme>
            <local-scheme>
              <scheme-ref>categories-eviction</scheme-ref>
            </local-scheme>
          </internal-cache-scheme>

          <cachestore-scheme>
            <class-scheme>
              <class-name>com.example.MissedTransactionCacheStore</class-name>
            </class-scheme>
          </cachestore-scheme>

          <write-delay>30s</write-delay>
          <write-batch-factor>0.9</write-batch-factor>
        </read-write-backing-map-scheme>
      </backing-map-scheme>

      <listener>
        <class-scheme>
          <class-name>com.example.MissedTransactionCacheListener</class-name>
        </class-scheme>
      </listener>
    </distributed-scheme>

    <local-scheme>
      <scheme-name>categories-noneviction</scheme-name>
    </local-scheme>
  </caching-schemes>
</cache-config> 
```

在服务器启动和缓存交互（get、put 等）期间，我没有看到任何异常，即使监听器（MissedTransactionCacheListener）事件被触发，但没有发生存储操作。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-24T17:01:39.500

```
<cache-mapping>
  <cache-name>MissedTransactionCache</cache-name>
  <scheme-name>Missed-Transaction-Cache</scheme-name>

<distributed-scheme>
  <scheme-name>missed-transaction-cache-scheme</scheme-name> 
```

方案名称不匹配。

# vba - 使用 Ms-Excel 中的数据通过 VBA 填充 Ms-Word 中的预定义模板

> ID：14154938
> 
> 赞同：0
> 
> 时间：2013-01-04T10:02:51.073
> 
> 标签：vba, excel, ms-word

**摘要**：我必须在excel中填写报告，然后按照我的前辈要求在doc中手动复制相同的内容，以跟踪不同应用程序中的错误。每个应用程序的 excel 和 doc 报告都不同。所以我想保存工作，因为我填写了一个 Excel 并将其导出到 word 中约定的模板中。

**问题**：我正在尝试编写一个宏，它将在预定义模板（doc）中搜索一些变量，并将这些变量替换为 excel 中的数据。变量只不过是一些文本，例如 <-AppName->、<-AppID->（自行创建）。现在有一个转折，因为在 excel 中有一张表，其问题标记为高、中和低。我想将此列表导出到与标记为高、中和低的三个不同表相同的文档中。

**问题**：如何通过 VBA 使用 excel 中的数据在 doc 中填充变量（如上）？如果我可以填充变量，我如何设法将数据从 excel 导出到三个不同表中的 doc，因为它将有多行。

*提前致谢。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T05:02:43.510

我没有深入研究这个，但我不明白为什么它不起作用。

1) 在您的 VBA 项目中设置您的库引用，以便您可以访问 Word 的 VBA API。
2) 在 Excel VBA 方法中，设置搜索/替换数组。
3) 在同一个模块中，打开 Word 文件并替换变量。就像我说的那样，我没有摆弄 API，所以我不能说你是否可以轻松地做到这一点......但也请检查[一下](https://stackoverflow.com/questions/6095740/microsoft-word-regular-expression-replace-body-content)。
4）将word文档另存为新文件，关闭它们。

我不确定您的意思是“三个不同的表”，但是一旦您弄清楚如何查找/替换该部分应该是轻而易举的事。

# jquery - 如何变形动态生成的图像

> ID：14154940
> 
> 赞同：-1
> 
> 时间：2013-01-04T10:02:55.587
> 
> 标签：jquery

我有一个表单，用户可以在其中进行选择，然后根据这些选择动态生成图形并显示为图像。

目前，我通过在 jQuery 对话框中显示图像来做到这一点。

是否可以将某些东西放在一起（最好使用 jQuery），以便在显示一个图像并且用户提交另一个选择时，第一张图像直接变形为第二张图像而不显示中间和不必要的背景视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:25:17.940

您可以在对话框内将两个图像放在彼此的顶部（将位置设置为绝对并使用 z-index），当第二个图像加载后，将 alpha 从一个设置为另一个。这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T20:12:35.433

感谢您向我指出jQuery 方法fadeIn 和fadeOut 交叉淡入淡出。我看到 jQuery 循环插件使用以下代码变形 2 个图像。但是我看到您的解决方案直接使用 jQuery 方法，因此在这方面您的解决方案可能更有吸引力。

```
<html>
<head>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="jquery.cycle.all.js"></script>
</head>
<body>
<script type="text/javascript">
$(function() {
    $('#crossfade').cycle();
});
</script>
<div id="crossfade">
    <img src="1.jpg" />
    <img src="2.jpg" />
</div>
</body>
</html> 
```

最后，对于我的图形应用程序，我采用了一个解决方案，该解决方案在淡入新图像之前显示了一条繁忙的消息。这主要是因为我使用 jpgraph 库动态生成图像，我不确定如何在变形解决方案中容纳这些动态创建的图像。

# django - 使用主题交换将消息从一种方法发送到另一种方法

> ID：14154942
> 
> 赞同：0
> 
> 时间：2013-01-04T10:03:00.090
> 
> 标签：django, message-queue, celery, django-celery, kombu

最近，我一直在阅读[celery](http://celeryproject.org)和[kombu](http://kombu.readthedocs.org/)文档，因为我需要将它们集成到我的一个项目中。我对这应该如何工作有一个基本的了解，但是使用不同经纪人的文档示例让我感到困惑。

这是场景：

在我的应用程序中，我有两个视图`ViewA`，`ViewB`它们都进行了一些昂贵的处理，所以我想让它们使用 celery 任务进行处理。所以这就是我所做的。

### 视图.py

```
def ViewA(request):
    tasks.do_task_a.apply_async(args=[a, b])

def ViewB(request):
    tasks.do_task_b.apply_async(args=[a, b]) 
```

### 任务.py

```
@task()
def do_task_a(a, b):
    # Do something Expensive

@task()
def do_task_b(a, b):
    # Do something Expensive here too 
```

到目前为止，一切正常。问题是在系统上`do_task_a`创建了一个`txt`文件，我需要在`do_task_b`. 现在，在该`do_task_b`方法中，我可以检查文件是否存在，`retry`如果文件不存在，则调用任务方法[这是我现在正在做的]。

在这里，我宁愿采用不同的方法（即消息传递的来源）。我想在文件创建后`do_task_a`发送一条消息，`do_task_b`而不是循环重试方法，直到创建文件。

我通读了文档`celery`并`kombu`更新了我的设置，如下所示。

```
BROKER_URL = "django://"
CELERY_RESULT_BACKEND = "database"
CELERY_RESULT_DBURI = "sqlite:///celery"
TASK_RETRY_DELAY = 30 #Define Time in Seconds
DATABASE_ROUTERS = ['portal.db_routers.CeleryRouter']
CELERY_QUEUES = ( 
    Queue('filecreation', exchange=exchanges.genex, routing_key='file.create'),
)
CELERY_ROUTES = ('celeryconf.routers.CeleryTaskRouter',) 
```

我被困在这里。不知道从这里去哪里。

接下来我应该怎么做才能在文件创建`do_task_a`中广播消息？`do_task_b`我应该怎么做才能`do_task_b`接收（消费）消息并进一步处理代码？

欢迎任何想法和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:50:36.750

这是使用**Celery 的回调/链接函数的**一个很好的例子。

Celery 支持将任务链接在一起，以便一个任务跟随另一个任务。[你可以在这里](http://docs.celeryproject.org/en/latest/userguide/calling.html#linking-callbacks-errbacks)阅读更多关于它的信息

`apply_async()`函数有两个可选参数

```
+link : excute the linked function on success 
+link_error : excute the linked function on an error

@task
def add(a, b):
    return a + b

@task
def total(numbers):
    return sum(numbers)

@task
def error_handler(uuid):
    result = AsyncResult(uuid)
    exc = result.get(propagate=False)
    print('Task %r raised exception: %r\n%r' % (exc, result.traceback)) 
```

现在在您的调用函数中执行类似的操作

```
def main():
    #for error_handling
    add.apply_async((2, 2), link_error=error_handler.subtask())

    #for linking 2 tasks
    add.apply_async((2, 2), link=add.subtask((8, )))
    # output 12

    #what you can do is your case is something like this. 
    if user_requires:
        add.apply_async((2, 2), link=add.subtask((8, )))
    else:
        add.apply_async((2, 2)) 
```

希望这会有所帮助

# php - 如何在 PHP 中除以任何类似于 0.0110932 的分子？

> ID：14154944
> 
> 赞同：2
> 
> 时间：2013-01-04T10:03:06.053
> 
> 标签：php

我收到类似 PHP 的错误

> 警告：除以零错误。

我仍然想计算一些问题。如果你能告诉我，如何用例子计算反对数/对数逆，我会更满意。

```
<?
    if(isset($_POST['submit'])) 
    { 
       $P=$_POST['P'];  // P=100000
       $rate=$_POST['rate']; // rate = 10.5
       $R=($rate/100);
       $N=$_POST['N']; // N = 78
       echo $P ."<br>" ;
       echo $R ."<br>" ;
       echo $N ."<br>" ;
       $NEW=($R/12);   // NEW = .00875
       $aa = (1+($NEW)); // aa = 1.00875
       $ab = bcpow('$aa', '$N',16); // ab = 1.9729529246182467
       $ac = ($ab-1); // ac = 0.9729529246182467
       $ad = bcdiv('$ab', '$ac', 3); // Div by Zero Error 
       $M = ($P*$NEW) *($ad);
       echo "The Installment is : " . $M . "<br>";
    }
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T11:41:21.223

有问题的行：

```
$ad = bcdiv('$ab', '$ac', 3); // Div by Zero Error 
```

这里的问题是因为`$ab`和`$ac`在引号中。他们不应该。

将它们放在引号中意味着 PHP 将`$ab`其视为由字符 和 组成的字符串`$`，`a`而不是变量`b`的数值。`$ab`

删除引号，它应该开始工作。

这同样适用于`bcpow()`线路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:54:14.860

`bcpow('$aa', '$N',16);`你确定这些变量被解析了吗？它们被视为单引号中的字符串，并且由于没有数字，它们可能只是伪造的。`$aa^$n`（在计算器上打字会失败）。

您可以使用`bcpow("'".$aa."'", "'".$N."'",16);`或尝试使用双引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-04T10:54:08.207

缩小问题的来源： `string bcdiv ( string $left_operand , string $right_operand [, int $scale ] )`

bcdiv`Division by zero`仅在正确的操作数为 0 时才会返回，因此您可以通过假设`$ac`是您的罪魁祸首来回溯。`$ac`在函数调用之前尝试回显`bcdiv`以确保它不为空。

我愿意打赌这条线`$ac = ($ab-1); // ac = 0.9729529246182467` `$ac`会变成负数。

你还应该删除你的单引号，不要把手册看得太直。您仍然可以传入 int 或 double ，该函数将为您转换它。即使您将变量转换为双精度值。

```
//WITHOUT QUOTES
$ab = '1.9729529246182467';
$ac = ($ab-1);
echo bcdiv($ab, $ac, 3);
//output (2.027)

//WITH QUOTES
$ab = '1.9729529246182467';
$ac = ($ab-1);
echo bcdiv($ab, '$ac', 3);
//output Warning (2): bcdiv() [function.bcdiv]: Division by zero 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T10:54:41.753

我也不理解您的代码，但这里是计算 Antilog / log 值的代码

```
<?php

$log = 11;
$e   = 2.718281828;
$dn  = 1;

// Calculate Antilog of $log = 11
$ans = pow($e, $log);
$antilog = round($ans*10000)/10000;
echo "<br /> Antilog : ".$antilog;

// Calculate Log of $log = 11
$ans = log($log)/$dn;
$log = round($ans*10000)/10000;
echo "<br /> Log : ".$log;

// Calculate Antilog / Log of $log = 11
echo "<br /> Antilog / Log : ".($antilog / $log);
?> 
```

结果：

```
Antilog : 59874.1416
Log : 2.3979
Antilog / Log : 24969.407231327
Hope this help you, if else please provide more details (comments) on your code. 
```

# android - Android：在新的 eclipse ADT 中安装 Juno Subversive

> ID：14154945
> 
> 赞同：3
> 
> 时间：2013-01-04T10:03:09.847
> 
> 标签：android, eclipse, adt, subversive

我刚刚`adt-bundle-windows`从[android.developers](http://developer.android.com/sdk/index.html)站点安装了新的“”。

创建新工作区后，我尝试安装 juno subversive 以创建与我团队的 SVN 的连接

我打开帮助--> 安装新软件--> 并选择“Juno-http://download.eclipse.org/releases/juno”。从新的列表项中，我打开了 Collaboration 并在安装过程开始时检查了所有颠覆性插件一切都很好，直到我收到此错误：“安装软件遇到问题收集要安装的项目时发生错误”

在详细信息框中它说：

```
"An error occurred while collecting items to be installed
session context was:(profile=profile, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
No repository found containing: osgi.bundle,com.android.ide.eclipse.base,21.0.0.v201210310015-519525
No repository found containing: osgi.bundle,com.android.ide.eclipse.ddms,21.0.0.v201210310015-519525
No repository found containing: org.eclipse.update.feature,com.android.ide.eclipse.ddms,21.0.0.v201210310015-519525" 
```

[这](https://fbcdn-sphotos-e-a.akamaihd.net/hphotos-ak-prn1/736160_10151268694909504_1354274389_o.jpg)是问题的打印屏幕

可能是什么问题，可以做些什么来解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-15T09:23:52.180

[可能是这个问题](https://stackoverflow.com/questions/9544071/an-error-occurred-while-collecting-items-to-be-installed-access-is-denied)的副本

简而言之，有两种可能的解决方案。

1.  转到帮助>安装新软件>可用软件站点>编辑 Android 开发人员工具更新站点。将 http 更改为 https。
2.  您要安装到的位置是只读的。

# kendo-ui - 限制为最小最大日期时，Kendo 日期选择器日期范围标题不正确

> ID：14154950
> 
> 赞同：1
> 
> 时间：2013-01-04T10:03:35.080
> 
> 标签：kendo-ui

我将 kendoDatePicker`max`日期限制为 2030 年和`min`1971 年。但问题是，在搜索年份时，日期选择器的年份范围标题显示 2000-2099 而不是 2000-2029，但显示的选择年份在正确范围内。有没有办法将年份更正为 2000-2029 而不是显示 2000-2099。

我的代码如下

```
$("#dater").kendoDatePicker({    
    format  : "MM/dd/yyyy",
    max : new Date(2030,0,0),
    min : new Date(1971,0,1)    
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T22:56:22.663

通过您的代码，我得到了您的目标，日期范围从 1971 年到 2029 年。但是让我们再仔细看看。

展开时的顶部控制：

*   默认视图 - 月 +/-
*   一键式 - 年 +/-
*   两次点击 - 10 年 +/-
*   三击 - 100 年 +/-

因此，在第三次单击时，您会在标题中看到 2000-2099，但选择项目的主体是正确的，最大为 2029。我认为您的期望是第三次单击是“全范围”而不是 100 年。如果实现了您的期望，则根据最小/最大，可能不需要第二次或第三次点击；很多额外的逻辑。也许在未来的版本中？

我希望这会有所帮助。

# 编辑

小心你想要的，你可能会得到它。

```
$('#dater').kendoDatePicker({
    format: 'MM/dd/yyyy',
    max: new Date(2030, 0, 0),
    min: new Date(1971, 0, 1),
});
$(document).ready(function () {
    $('a.k-nav-prev').click(function() {
        changeFastLabel();
    });
    $('a.k-nav-fast').click(function() {
        changeFastLabel();
    });
    $('a.k-nav-next').click(function() {
        changeFastLabel();
    });
    function changeFastLabel() {
        var header = $('a.k-nav-fast');
        if (header.text() == '2000-2099') {
            header.text('2000-2029');
        } else if (header.text() == '1900-1999') {
            header.text('1971-1999');
        }
    }
}); 
```

# r - 在R中的矩阵中查找模式

> ID：14154952
> 
> 赞同：15
> 
> 时间：2013-01-04T10:03:41.190
> 
> 标签：r, matrix

例如，我有一个 8 xn 矩阵

```
set.seed(12345)
m <- matrix(sample(1:50, 800, replace=T), ncol=8)
head(m)

     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
[1,]   37   15   30    3    4   11   35   31
[2,]   44   31   45   30   24   39    1   18
[3,]   39   49    7   36   14   43   26   24
[4,]   45   31   26   33   12   47   37   15
[5,]   23   27   34   29   30   34   17    4
[6,]    9   46   39   34    8   43   42   37 
```

我想在矩阵中找到某种模式，例如我想知道在哪里可以找到 37，下一行是 10 和 29，后面的行是 42

例如，这发生在上述矩阵的第 57:59 行

```
m[57:59,]
     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
[1,]  *37   35    1   30   47    9   12   39
[2,]    5   22  *10  *29   13    5   17   36
[3,]   22   43    6    2   27   35  *42   50 
```

一个（可能效率低下）的解决方案是让所有包含 37 的行

```
sapply(1:nrow(m), function(x){37 %in% m[x,]}) 
```

然后使用几个循环来测试其他条件。

我如何编写一个有效的函数来做到这一点，它可以推广到任何用户给定的模式（不一定超过 3 行，可能有“洞”，每行中的值数量可变等）。？

编辑：回答各种评论

*   我需要找到确切的模式
*   同一行中的顺序无关紧要（如果它使事情更容易，可以在每一行中对值进行排序）
*   线条必须相邻。
*   我想获得所有返回的模式的（开始）位置（即，如果模式在矩阵中多次出现，我想要多个返回值）。
*   用户将通过 GUI 输入模式，我还没有决定如何。例如，要搜索上述模式，他可能会写类似

`37;10,29;42`

where`;`代表一个新行并`,`分隔同一行上的值。同样我们可以寻找

```
50,51;;75;80,81 
```

表示第 n 行中的 50 和 51，第 n+2 行中的 75，以及第 n+3 行中的 80 和 81

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-04T12:09:00.373

这很容易阅读，并且希望对您来说足够概括：

```
has.37 <- rowSums(m == 37) > 0
has.10 <- rowSums(m == 10) > 0
has.29 <- rowSums(m == 29) > 0
has.42 <- rowSums(m == 42) > 0

lag <- function(x, lag) c(tail(x, -lag), c(rep(FALSE, lag)))

which(has.37 & lag(has.10, 1) & lag(has.29, 1) & lag(has.42, 2))
# [1] 57 
```

* * *

**编辑：**这是一个可以使用正滞后和负滞后的概括：

```
find.combo <- function(m, pattern.df) {

   lag <- function(v, i) {
      if (i == 0) v else
      if (i > 0)  c(tail(v, -i), c(rep(FALSE, i))) else
      c(rep(FALSE, -i), head(v, i))
   }

   find.one <- function(x, i) lag(rowSums(m == x) > 0, i)
   matches  <- mapply(find.one, pattern.df$value, pattern.df$lag)
   which(rowSums(matches) == ncol(matches))

} 
```

在这里测试：

```
pattern.df <- data.frame(value = c(40, 37, 10, 29, 42),
                         lag   = c(-1,  0,  1,  1,  2))

find.combo(m, pattern.df)
# [1] 57 
```

* * *

**Edit2：**在 OP 对 GUI 输入进行编辑之后，这里是一个将 GUI 输入转换为`pattern.df`my`find.combo`函数期望的函数：

```
convert.gui.input <- function(string) {
   rows   <- strsplit(string, ";")[[1]]
   values <- strsplit(rows,   ",")
   data.frame(value = as.numeric(unlist(values)),
              lag = rep(seq_along(values), sapply(values, length)) - 1)
} 
```

在这里测试：

```
find.combo(m, convert.gui.input("37;10,29;42"))
# [1] 57 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T12:32:59.473

这是一个通用函数：

```
PatternMatcher <- function(data, pattern, idx = NULL) {
  p <- unlist(pattern[1])
  if(is.null(idx)){
    p <- unlist(pattern[length(pattern)])
    PatternMatcher(data, rev(pattern)[-1], 
                   idx = Filter(function(n) all(p %in% intersect(data[n, ], p)),
                                1:nrow(data)))
  } else if(length(pattern) > 1) {
    PatternMatcher(data, pattern[-1], 
                   idx = Filter(function(n) all(p %in% intersect(data[n, ], p)), 
                                idx - 1))
  } else
    Filter(function(n) all(p %in% intersect(data[n, ], p)), idx - 1)
} 
```

这是一个递归函数，它`pattern`在每次迭代中都减少，并且只检查在前一次迭代中标识的行之后的行。列表结构允许以方便的方式传递模式：

```
PatternMatcher(m, list(37, list(10, 29), 42))
# [1] 57
PatternMatcher(m, list(list(45, 24, 1), 7, list(45, 31), 4))
# [1] 2
PatternMatcher(m, list(1,3))
# [1] 47 48 93 
```

**编辑：**上面函数的想法似乎很好：检查向量的所有行`pattern[[1]]`并获取索引`r1`，然后检查行和获取`r1+1`等。但是在遍历所有行时，第一步确实需要很多时间。当然，每一步都会花费很多时间 eg ，即当索引没有太大变化时，......所以这是另一种方法，这里看起来非常相似，但是还有另一个函数可以找到所有的行的元素。`pattern[[2]]``r2``m <- matrix(sample(1:10, 800, replace=T), ncol=8)``r1``r2``PatternMatcher``matchRow``vector`

```
matchRow <- function(data, vector, idx = NULL){
  if(is.null(idx)){
    matchRow(data, vector[-1], 
             as.numeric(unique(rownames(which(data == vector[1], arr.ind = TRUE)))))
  } else if(length(vector) > 0) {
    matchRow(data, vector[-1], 
             as.numeric(unique(rownames(which(data[idx, , drop = FALSE] == vector[1], arr.ind = TRUE)))))
  } else idx
}
PatternMatcher <- function(data, pattern, idx = NULL) {
  p <- pattern[[1]]
  if(is.null(idx)){
    rownames(data) <- 1:nrow(data)
    p <- pattern[[length(pattern)]]
    PatternMatcher(data, rev(pattern)[-1], idx = matchRow(data, p))
  } else if(length(pattern) > 1) {
    PatternMatcher(data, pattern[-1], idx = matchRow(data, p, idx - 1))
  } else
    matchRow(data, p, idx - 1)
} 
```

与上一个函数的比较：

```
library(rbenchmark)
bigM <- matrix(sample(1:50, 800000, replace=T), ncol=8)
benchmark(PatternMatcher(bigM, list(37, c(10, 29), 42)), 
          PatternMatcher(bigM, list(1, 3)), 
          OldPatternMatcher(bigM, list(37, list(10, 29), 42)), 
          OldPatternMatcher(bigM, list(1, 3)), 
          replications = 10,
          columns = c("test", "elapsed"))
#                                                  test elapsed
# 4                 OldPatternMatcher(bigM, list(1, 3))   61.14
# 3 OldPatternMatcher(bigM, list(37, list(10, 29), 42))   63.28
# 2                    PatternMatcher(bigM, list(1, 3))    1.58
# 1       PatternMatcher(bigM, list(37, c(10, 29), 42))    2.02

verybigM1 <- matrix(sample(1:40, 8000000, replace=T), ncol=20)
verybigM2 <- matrix(sample(1:140, 8000000, replace=T), ncol=20)
benchmark(PatternMatcher(verybigM1, list(37, c(10, 29), 42)), 
          PatternMatcher(verybigM2, list(37, c(10, 29), 42)), 
          find.combo(verybigM1, convert.gui.input("37;10,29;42")),
          find.combo(verybigM2, convert.gui.input("37;10,29;42")),          
          replications = 20,
          columns = c("test", "elapsed"))
#                                                      test elapsed
# 3 find.combo(verybigM1, convert.gui.input("37;10,29;42"))   17.55
# 4 find.combo(verybigM2, convert.gui.input("37;10,29;42"))   18.72
# 1      PatternMatcher(verybigM1, list(37, c(10, 29), 42))   15.84
# 2      PatternMatcher(verybigM2, list(37, c(10, 29), 42))   19.62 
```

现在的`pattern`论点也应该是 like`list(37, c(10, 29), 42)`而不是`list(37, list(10, 29), 42)`. 最后：

```
fastPattern <- function(data, pattern)
  PatternMatcher(data, lapply(strsplit(pattern, ";")[[1]], 
                    function(i) as.numeric(unlist(strsplit(i, split = ",")))))
fastPattern(m, "37;10,29;42")
# [1] 57
fastPattern(m, "37;;42")
# [1] 57  4
fastPattern(m, "37;;;42")
# [1] 33 56 77 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-04T12:44:58.420

由于您有整数，您可以将矩阵转换为字符串并使用正则表达式

```
ss <- paste(apply(m,1,function(x) paste(x,collapse='-')),collapse=' ')
## some funny regular expression
pattern <- '[^ \t]+[ \t]{1}[^ \t]+10[^ \t]+29[^ \t]+[ \t]{1}[^ \t]+42'
regmatches(ss,regexpr(pattern ,text=ss))
[1] "37-35-1-30-47-9-12-39 5-22-10-29-13-5-17-36 22-43-6-2-27-35-42"

 regexpr(pattern ,text=ss)
[1] 1279
attr(,"match.length")
[1] 62
attr(,"useBytes")
[1] TRUE 
```

要查看它的实际效果，请查看[此](http://regexpal.com/?flags=gm&regex=37%5B%5E%20%5Ct%5D%2b%5B%20%5Ct%5D%7B1%7D%5B%5E%20%5Ct%5D%2b10%5B%5E%20%5Ct%5D%2b29%5B%5E%20%5Ct%5D%2b%5B%20%5Ct%5D%7B1%7D%5B%5E%20%5Ct%5D%2b42&input=%20%2237-15-30-3-4-11-35-31%2044-31-45-30-24-39-1-18%2039-49-7-36-14-43-26-24%2045-31-26-33-12-47-37-15%2023-27-34-29-30-34-17-4%209-46-39-34-8-43-42-37%2017-32-5-11-43-4-45-7%2026-44-4-12-12-32-43-39%2037-13-28-23-40-20-23-43%2050-11-33-18-4-38-24-18%202-31-15-21-28-37-26-18%208-20-35-22-36-19-9-47%2037-38-19-48-3-17-45-32%201-19-14-12-2-34-11-17%2020-40-48-19-38-17-32-26%2024-46-22-45-39-35-3-22%2020-50-17-27-27-11-19-35%2021-30-27-30-20-13-31-46%209-1-32-13-24-7-48-9%2048-17-9-44-7-40-11-14%2023-28-6-16-42-39-9-18%2017-26-6-34-14-10-44-2%2049-5-5-31-10-45-24-2%2036-35-27-21-13-30-12-5%2033-36-45-21-20-23-46-31%2020-41-36-49-43-15-49-1%2035-48-46-16-50-16-48-22%2028-10-22-1-16-29-28-5%2012-14-24-9-14-47-50-26%2025-39-30-12-32-41-18-27%2040-2-16-20-32-22-19-38%201-34-29-43-3-18-22-32%2010-41-24-37-38-26-15-32%2035-34-35-34-16-33-4-43%2019-48-37-6-3-35-4-48%2019-44-26-3-29-42-22-32%2044-35-50-49-1-6-50-38%2046-10-46-37-44-46-6-6%2031-5-24-25-27-13-12-20%207-41-20-45-6-21-12-46%2040-27-47-29-41-14-33-23%2022-35-48-35-41-17-26-4%2047-11-46-46-1-13-37-48%2039-32-40-42-35-27-16-48%2013-8-32-26-23-36-43-35%2017-48-34-32-46-27-26-3%204-50-47-40-20-1-35-36%203-25-27-48-1-32-48-17%203-46-17-3-49-31-1-38%2032-19-40-38-49-39-27-48%2049-42-7-35-38-44-42-11%2042-28-48-32-21-23-17-38%2016-40-2-50-21-26-35-44%2011-18-13-32-42-45-31-23%2037-11-44-33-26-19-33-2%2025-40-43-37-35-13-48-14%2037-35-1-30-47-9-12-39%205-22-10-29-13-5-17-36%2022-43-6-2-27-35-42-50%2012-31-24-40-5-18-8-1%2040-38-48-10-27-4-47-16%2013-30-42-9-47-4-5-13%2050-43-41-25-11-29-35-23%2038-41-46-13-44-35-49-27%2049-20-36-18-29-10-32-33%2011-25-5-36-20-14-22-47%2048-50-6-44-31-48-41-15%208-9-40-13-19-26-14-41%2031-42-50-40-41-38-33-35%2048-20-35-29-15-12-30-10%2035-49-8-27-16-32-33-23%2026-10-16-40-21-32-2-43%2019-38-8-47-39-28-4-41%2017-16-50-32-33-13-50-16%203-19-38-33-14-13-47-50%2031-38-20-22-16-24-10-20%2049-36-28-22-37-42-35-6%2033-47-2-49-39-12-17-1%2026-40-17-16-30-39-34-17%208-42-43-23-6-27-4-42%2044-9-7-36-13-17-50-40%2026-21-40-41-14-39-7-19%201-10-5-16-15-12-19-35%201-13-1-34-27-17-43-31%208-49-14-40-20-22-42-28%2016-41-21-44-33-35-34-43%2042-18-4-31-8-33-36-18%2026-47-40-10-44-37-45-16%2041-9-26-46-23-9-24-31%204-8-26-2-45-3-36-17%2047-38-36-40-39-29-23-31%2041-45-42-43-41-6-46-13%204-16-4-41-50-1-6-37%2031-16-17-9-30-39-3-1%2036-50-41-17-24-14-36-32%2026-1-15-10-17-35-44-44%2037-14-41-17-36-12-1-25%2038-40-11-20-38-49-38-25%205-13-28-26-39-34-40-5%2020-23-1-7-44-40-25-20%22)。

**编辑动态构造模式**

```
searchep <- '37;10,29;42'       #string given by the user
str1 <- '[^ \t]+[ \t]{1}[^ \t]+' 
str2 <- '[^ \t]'
hh <- gsub(';',str1,searchep)
pattern <- gsub(',',str2,hh)
pattern
[1] "37[^ \t]+[ \t]{1}[^ \t]+10[^ \t]29[^ \t]+[ \t]{1}[^ \t]+42"

test for searchep <- '37;10,29;;40'  ## we skip a line here 

pattern
[1] "37[^ \t]+[ \t]{1}[^ \t]+10[^ \t]29[^ \t]+[ \t]{1}[^ \t]+[^ \t]+[ \t]{1}[^ \t]+40"
regmatches(ss,regexpr(pattern ,text=ss))
"37-35-1-30-47-9-12-39 5-22-10-29-13-5-17-36 22-43-6-2-27-35-42-50 12-31-24-40" 
```

**Edit2 测试性能**

```
matrix.pattern <- function(searchep='37;10,29;42' ){
 str1 <- '[^ \t]+[ \t]{1}[^ \t]+' 
 str2 <- '[^ \t]+'
 hh <- gsub(';',str1,searchep)
 pattern <- gsub(',',str2,hh)
 res <- regmatches(ss,regexpr(pattern ,text=ss))
}

system.time({ss <- paste(apply(bigM,1,function(x) paste(x,collapse='-')),collapse=' ')
             matrix.pattern('37;10,29;42')})
   user  system elapsed 
   2.36    0.01    2.40 
```

如果大矩阵不发生变化，则转换为字符串 id 的步骤只需完成一次，性能非常好。

```
system.time(matrix.pattern('37;10,29;42'))
   user  system elapsed 
   0.71    0.02    0.72 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T10:34:07.543

也许它会帮助某人，但至于输入，我在想以下几点：

```
PatternMatcher <- function(data, ...) {
  Selecting procedure here.
}

PatternMatcher(m, c(1, 37, 2, 10, 2, 29, 4, 42)) 
```

提供给函数的第二部分按顺序包括应该开始的行，然后是值，然后是第二行和第二个值。例如，您现在也可以说初始行之后的第 8 行，值为 50。

您甚至可以扩展它以要求每个值的特定 X、Y 坐标（因此每个值传递 3 个项目）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-04T11:49:52.303

`Edit:`现在，我添加了一个更通用的函数：

这是给出所有可能组合的一种解决方案：我获得所有四个数字的所有位置，然后用于`expand.grid`获得所有位置组合，然后`filter the meaningless`通过检查矩阵的每一行是否等于排序矩阵的相应行来获得所有位置组合。

```
set.seed(12345)
m <- matrix(sample(1:50, 800, replace=T), ncol=8)
head(m)
get_grid <- function(in_mat, vec_num) {
    v.idx <- sapply(vec_num, function(idx) {
        which(apply(in_mat, 1, function(x) any(x == idx)))
    })
    out <- as.matrix(expand.grid(v.idx))
    colnames(out) <- NULL
    out
}

out <- get_grid(m, c(37, 10, 29, 42))
out.s <- t(apply(out, 1, sort))

idx <- rowSums(out == out.s)
out.f <- out[idx==4, ]

> dim(out.f)
[1] 2946    4

> head(out.f)
     [,1] [,2] [,3] [,4]
[1,]    1   22   28   36
[2,]    4   22   28   36
[3,]    6   22   28   36
[4,]    9   22   28   36
[5,]   11   22   28   36
[6,]   13   22   28   36 
```

这些是按该顺序（37、10、29、42）出现的数字的行索引。

从这里，您可以检查您想要的任何组合。例如，您要求的组合可以通过以下方式完成：

```
cont.idx <- apply(out.f, 1, function(x) x[1] == x[2]-1 & x[2] == x[4]-1)
> out.f[cont.idx,]
[1] 57 58 58 59 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-04T10:28:37.140

这是一种使用方法`sapply`：

```
which(sapply(seq(nrow(m)-2),
             function(x)
               isTRUE(37 %in% m[x,] & 
                      which(10 == m[x+1,]) < which(29 == m[x+1,]) & 
                      42 %in% m[x+2,]))) 
```

结果包含序列开始的所有行号：

```
[1] 57 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-27T22:39:12.630

as.data.frame(your_matrix) %>% dplyr::filter_all(dplyr::any_vars(stringr::str_detect(., pattern = "your-pattern")))

# jakarta-ee - Java EE 批处理文件未运行

> ID：14154953
> 
> 赞同：0
> 
> 时间：2013-01-04T10:03:47.633
> 
> 标签：jakarta-ee

我们有一个使用 Java EE 制作的应用程序，它在某个位置运行。当我复制我们看到的所有文件并执行批处理文件时，我们收到以下错误：

> 阅读未找到 null 的帮助集，找不到基本名称 .messages 的捆绑包，语言环境 en_us

谁能提出问题可能是什么？

环境。变量与其他系统中的相同。

# jquery - 这个 jQuery 是否使用服务器资源？

> ID：14154955
> 
> 赞同：0
> 
> 时间：2013-01-04T10:04:01.290
> 
> 标签：jquery, asp.net, html, master-pages

我的问题与母版页和 id 标签有关。如果我们在一个单独的文件中有一个名为**tbxName**的 html 控件，并且我们将它嵌入到母版页中，它就变成了**MasterPage_tbxName**。

所以我知道有两种方法可以引用这个项目。. .

直接命名法

```
$('#MasterPage_tbxName') 
```

以及更安全的块代码方法

```
$('#<%=tbxName.ClientID%>') 
```

更安全的块代码方法是否会在每次生成页面时征收资源税？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T10:09:32.753

解析器确实需要一些时间来解析您的 <%=tbxName.ClientID%> 标记，但这只是纳秒级的问题，您不必太担心。我的意思是，这是构建服务器端 Web 语言的目的，这是它们的狭隘目的之一。

问候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:42:40.083

您可以使用 'ends with' jQuery ID 选择器，例如...

```
$('[ID$="_tbxName"]') 
```

我想这不是很有效，但仍然需要，哦，好 2 毫秒。

但是，如果这是一个问题，那么您只需将该控件缓存在您的 JS 文件中，例如...

```
var $tbxName = $('[ID$="_tbxName"]'); 
```

然后简单的引用`$tbxName`，就不需要再执行jQuery选择器了。

此外，您建议这样做的事实`$('#<%=tbxName.ClientID%>')`表明您的 JS 实际上在您的 .aspx 文件中 - 我建议将您的 JS 放入单独的 .js 文件中并使用`<script>`.aspx 中的标签进行引用。

# javascript - Enyo的DragAvatar

> ID：14154957
> 
> 赞同：0
> 
> 时间：2013-01-04T10:04:08.897
> 
> 标签：javascript, drag-and-drop, draggable, enyo

[我将http://enyojs.com/api/#enyo.DragAvatar](http://enyojs.com/api/#enyo.DragAvatar)中的示例代码复制到一个 jsfiddle 中以启动并测试它。现在 dragAvatar 甚至不会出现，我不知道为什么不出现。如果我将图像放在 de dragavatar 之外，它会显示出来，所以它不是图像 url...

[http://jsfiddle.net/joopmicroop/qsSCU/](http://jsfiddle.net/joopmicroop/qsSCU/)

```
enyo.kind({
    name: "App",
    handlers: {
        ondrag: "drag",
        ondragfinish: "dragFinish",
    },
    components: [
        {name:"dragAvatar", kind:"enyo.DragAvatar", showing:true, components: [
            {kind:'enyo.Image', src:'http://s9.postimage.org/h3t5cbidn/enyo_icon.jpg'}]
        }
    ],
    drag: function(inSender, inEvent) {
        this.$.dragAvatar.drag(inEvent);
    },
    dragFinish: function(inSender, inEvent) {
        //this.$.dragAvatar.hide();
    }           
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-05T16:55:39.897

您的问题是`'showing: true'`kind 声明中的声明。DragAvatar 直到第一个拖动事件才呈现，因此没有可显示的内容。但是，当它确实显示头像时，它会看到显示已经设置为 true，实际上并没有显示它。如果您删除该行（并取消注释对 的调用`hide()`），那么当您在“结果”面板上拖动时，您将看到头像出现。

# objective-c - Facebook openActiveSessionWithReadPermission 完成太快，状态失败

> ID：14154959
> 
> 赞同：1
> 
> 时间：2013-01-04T10:04:11.057
> 
> 标签：objective-c, xcode

```
[FBSession openActiveSessionWithReadPermissions:nil
                                   allowLoginUI:YES
                              completionHandler:
 ^(FBSession *session,
   FBSessionState state, NSError *error) {
     [self sessionStateChanged:session state:state error:error];
 }]; 
```

好吧，过了一会儿，一个警报显示我们说我的应用程序试图访问 facebook 并询问它是否被允许。

但是，到达完成处理程序后会显示该警报。

到那时，状态已经是 FBSessionStateClosedLoginFailed。

我应该怎么办？在模拟器中运行良好。

实际上，Facebook 中的美味样本在我的 iPhone 上也失败了。但我已经安装并登录了 Facebook 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T05:14:47.590

Facebook 登录清单：

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    return [FBSession.activeSession handleOpenURL:url];
}

- (void)applicationDidBecomeActive:(UIApplication *)application {
    // We need to properly handle activation of the application with regards to SSO
    //  (e.g., returning from iOS 6.0 authorization dialog or from fast app switching).
    [FBSession.activeSession handleDidBecomeActive];
}

- (void)applicationWillTerminate:(UIApplication *)application {
    // if the app is going away, we close the session object; this is a good idea because
    // things may be hanging off the session, that need releasing (completion block, etc.) and
    // other components in the app may be awaiting close notification in order to do cleanup
    [FBSession.activeSession close];
} 
```

在我的 sessionStateChanged 中：我正在这样做

```
switch ( state ) {
    case FBSessionStateOpen:
        [[Facebook _instance] fbDialogLogin:session.accessToken expirationDate:session.expirationDate];
        break;
    case FBSessionStateClosed:
        [FBSession.activeSession closeAndClearTokenInformation];
        break;
    case FBSessionStateClosedLoginFailed:
        break;
    default:
        NSLog(@"FBSessionStateUnknown: %d", state);
        break;
} 
```

并且不要忘记确保您的 FacebookAppID 和 BundleID 与您在 Facebook Developer Dashboard 中创建的相同！

# iis-7 - HTTP 错误 403.14 - 在 IIS 7.0 上托管站点时出现问题

> ID：14154962
> 
> 赞同：0
> 
> 时间：2013-01-04T10:04:16.143
> 
> 标签：iis-7, asp.net-mvc-4

我创建了一个`MVC 4`小应用程序。当我运行它时，我的应用程序运行良好`Localhost`。但是，当 ia 在其上托管网站时`IIS 7.0,`，出现以下错误：

```
HTTP Error 403.14 - Forbidden
The Web server is configured to not list the contents of this directory. 
```

上述问题的解决方案是启用目录浏览（这是我在互联网上找到的）。但我认为这不是解决方案。原因是启用导演浏览后，我收到另一个错误：

```
HTTP Error 404.7 - Not Found
The request filtering module is configured to deny the file extension. 
```

我试图找到上述问题的解决方案。它说允许你的`.cs`文件在应用程序上`host.config`。但是在进行了建议的更改之后，它仍然给了我一些错误。

有谁知道确切的问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T09:21:34.047

尝试在 CMD 中运行此命令：%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -ir

我面临着类似的问题，这对我有用。

# asp.net - 当站点托管在 Windows7 IIS 6.0 中时，Visual Foxpro 8.0 没有响应

> ID：14154963
> 
> 赞同：0
> 
> 时间：2013-01-04T10:04:17.280
> 
> 标签：asp.net, iis-6, oledb, visual-foxpro

我创建了一个 ASP.Net 4.0 网站，并与 Visual Foxpro 8.0 数据库建立了 OLEDB 连接，以便从表中选择数据。使用的代码写在下面...

```
 string strConnString = "Provider=vfpoledb;Data Source=C:\Users\mohammads\Documents\Visual FoxPro Projects\dbTallowMaster.dbc;";
    OleDbConnection connection = new OleDbConnection(strConnString);
    connection.Open();
    string username = "675";
    string password = "675";
    string sqlQuery = "SELECT userinfoid, username, password FROM tm_userinfo.dbf WHERE username = \"" + username + "\" AND password = \"" + password + "\"";
    OleDbCommand cmd = new OleDbCommand(sqlQuery, connection);
    OleDbDataAdapter oOleDbDataAdapter = new OleDbDataAdapter(cmd);
    DataTable dt = new DataTable();
    oOleDbDataAdapter.Fill(dt); 
```

此代码在本地系统中运行良好，但是当我在 Windows 7 IIS 6.0 上托管此站点时，连接未打开，并且出现“路径或文件名无效”的错误。请告诉我为什么只有当我在 IIS 中托管这段代码时才会出现问题。

在 IIS 中托管站点时，连接字符串的数据源是否应该有一些变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:38:02.483

旁注......我将开始使用参数化构建您的查询，特别是如果来自网络。VFP 使用“？” 作为参数的占位符，因此您不必明确地将值括在引号中。

```
string sqlQuery = "SELECT userinfoid, username, password "
    + "FROM tm_userinfo.dbf "
    + "WHERE username = ? and password = ?";
OleDbCommand cmd = new OleDbCommand(sqlQuery, connection);
cmd.Parameters.Add("parmUserName", OleDbType.Char).Value = username; // from your string
cmd.Parameters.Add("parmPassword", OleDbType.Char).Value = password; // variables...

OleDbDataAdapter oOleDbDataAdapter = new OleDbDataAdapter(cmd); 
```

请注意，参数的添加顺序与“？”相同。在查询中。

至于连接，不应该

连接字符串中的“vfpoledb.1”而不是“vfpoledb”。

最后，需要考虑的是，由于您的数据位于“用户”下的子文件夹中，因此它们通常“仅限于”该用户。运行 IIS 时，用户通常类似于

IUSR_{machine name} 代表互联网用户，而不是您。所以权限可能是你的问题。

# jquery - 如何在jquery中获取选定的日期

> ID：14154964
> 
> 赞同：0
> 
> 时间：2013-01-04T10:04:21.207
> 
> 标签：jquery, calendar

我跟着

```
<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>jQuery UI Datepicker - Display inline</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
    <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    <link rel="stylesheet" href="/resources/demos/style.css" />
    <script>
    $(function() {
        $( "#datepicker" ).datepicker();
    });
    </script>
</head>
<body>

Date: <div id="datepicker"></div>

</body>
</html> 
```

[这](http://jsfiddle.net/fgMc3/1/)是为了获取日历并让日历始终显示在页面上。

现在我想选择日期并将其传递给其他函数进行处理。

这该怎么做。

最好的Rgards

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-04T10:07:44.353

试试这个..

```
var selecteddate=  $( "#datepicker" ).datepicker( "getDate" );
alert(selecteddate); 
```

[这](http://api.jqueryui.com/datepicker/#method-getDate)是文档

**更新**

使用`onselect`，如果您需要点击。

```
$( "#datepicker" ).datepicker({
  onSelect: function(date) {
    alert(date);
    //do your processing here
  }
 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T10:12:09.607

使用`onSelect`选择日期时调用的方法并将日期作为文本获取

```
$(function() {
  $( "#datepicker" ).datepicker({
    onSelect: function(date) {
      alert(date);
    }
  });
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T10:21:10.843

您可以使用以下代码

```
$("#datepicker").datepicker("getDate"); 
```

谢谢，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-07T04:42:39.840

选择

```
 $("#expirationDate").datepicker({
        buttonImage: '../Images/calendar.gif',
        buttonImageOnly: true,
        changeMonth: true,
        changeYear: true,
        showOn: 'both',
        onSelect: function () {
            getValidTillDateValue(this);
        }
    });

  function getValidTillDateValue(ele) {
            return $(ele).val();
        } 
```

如果您希望稍后在表单提交上说日期值，您想检查该值

```
valuePublishDate = $("#customerPublishingDate").datepicker("getDate"); 
```

# reporting-services - 从多值参数中检查多个值时，SSRS 两次转义单引号

> ID：14154969
> 
> 赞同：4
> 
> 时间：2013-01-04T10:04:34.110
> 
> 标签：reporting-services, ssrs-2008

我正在使用 SSRS 2008 R2。并发现在我看来是一个错误的情况。

我有一个共享数据集 -

```
SELECT 'value1' AS Value
UNION
SELECT 'value''2' 
```

我将此 DS 绑定到多值参数。当我从多值下拉列表中仅检查 value'2 - 我看到在 SQL Profiler 中传递了这样的参数

```
@Value=N'value''2' -- Two single quotes 
```

当我在探查器中检查两个值时，我看到

```
@Value=N'value1,value''''2' -- Four single quotes 
```

我的程序正确处理了第一种情况。

在我看来，转义发生了两次——第一次是每个值，第二次是整个字符串？

有谁知道这种行为的来源，提前谢谢！

[这是 MS 上的同一个线程](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/58320892-82b0-4d05-b59f-a9da4e436323/#58320892-82b0-4d05-b59f-a9da4e436323)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-04T10:14:55.563

我遇到了一个非常相似的问题 - 正如您所看到的，最奇怪的部分是它在选择一个参数而不是多个参数时起作用。

无论如何，我通过将参数传递给存储过程略有不同来解决这个问题 - 在`Parameters`数据集部分使用以下表达式：

`=Join(Parameters!Value.Value, ",")`根据需要替换您的参数名称。

这仍然会有效地传递相同的逗号分隔的值字符串，但由于某种原因似乎可以正确处理引号。

# pdf - 导出为 PDF 的 ssrs 报告的格式（空格 btw 单词）问题

> ID：14154970
> 
> 赞同：1
> 
> 时间：2013-01-04T10:04:36.863
> 
> 标签：pdf, reporting-services, format

我目前正在运行 ssrs 报告-我遇到的问题是在将其导出为 PDF 之后-删除了单词之间的空格

例如 - 在 desc_column 下 - 这是一个产品...

导出为 PDF 后，它变成 - Thisisa 产品...

有解决办法吗？

我试过使用替换功能没有运气

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T14:03:46.597

使用以下解决方案解决此问题

[http://epmadvice.blogspot.com.au/2014/01/solution-spaces-removed-when-ssrs.html](http://epmadvice.blogspot.com.au/2014/01/solution-spaces-removed-when-ssrs.html)

编辑：2015 年 3 月 11 日

解决方案的摘要是从数据中删除不需要的字符（HEX '0B 20'）。以下查询将完成这项工作

选择替换（列名，NCHAR（8203），''）作为列名

# clojure - 如何在带引号的向量中插入值

> ID：14154974
> 
> 赞同：1
> 
> 时间：2013-01-04T10:04:53.313
> 
> 标签：clojure

我有一个功能

```
(defn hi [a] '[a 2]) 
```

它应该取一个值 a 并将该值插入带引号的向量中，然后返回向量。

所以调用`(hi :abc)`应该返回`[:abc 2]`。
需要注意的重要一点是引用了内部向量。
我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:29:08.497

这可以帮助：

```
user=> (defn hi [a] [a '2])
#'user/hi
user=> (hi :abc)
[:abc 2] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:17:40.507

如果我理解正确，您希望能够将未定义的符号传递给函数，并取回包含该符号的向量（添加了一些其他内容）。

如果您在将符号传递给函数之前引用它，那么您不必在函数内部执行任何特殊操作：

```
user=> (defn hi [a] [a 2])
user=> (= (hi '?ab) '[?ab 2])
true 
```

如果您不想引用符号（例如，您正在制作 DSL 以启用惯用的 datomic 查询结构创作），那么您必须使用宏，因为评估函数将导致符号在命名空间。您可以尝试以下方法：

```
user=> (defmacro hi2 [a] `(quote [~a 2]))
user=> (= (hi2 ?ab) '[?ab 2])
true 
```

# java - 在 Java/Scala 中重现 CouchDB 1.2.0 密码哈希函数

> ID：14154980
> 
> 赞同：1
> 
> 时间：2013-01-04T10:05:19.707
> 
> 标签：java, scala, erlang, couchdb

我有一个简单的设置，应用服务器支持到 CouchDB，我在其中使用 CouchDB 的内置用户身份验证对应用服务器的用户进行身份验证。应用服务器可以访问 _users 数据库并检索用户的文档。

我正在尝试复制密码哈希函数，这样我就可以在应用服务器中验证用户的密码，而无需针对 CouchDB 进行身份验证。

CouchDB 安全规范指出：

> “password_sha”属性是 SHA-1 哈希值的十六进制表示，它通过与用户密码与盐连接的字符串（理想情况下是随机字符串）相匹配的字符串计算得出。salt 属性是用于生成用户密码哈希的盐的十六进制表示。
> 
> 从 CouchDB 1.2.0 开始，当用户文档中存在密码字段时，会自动创建 password_sha 和 salt 字段。当写入用户文档时，CouchDB 检查密码字段是否存在，如果存在，它将生成一个盐，对密码字段的值进行散列，并对密码散列和盐的连接进行散列。然后它将生成的密码写入 password_sha 字段，并将盐写入 salt 字段。密码字段被删除。

相关源代码：

```
% Lines 72-74 of couch_httpd_auth.erl

UserSalt = couch_util:get_value(<<"salt">>, UserProps, <<>>),
PasswordHash = hash_password(?l2b(Pass), UserSalt),
ExpectedHash = couch_util:get_value(<<"password_sha">>, UserProps, nil),

% Lines 237-238 of couch_httpd_auth.erl

hash_password(Password, Salt) ->
    ?l2b(couch_util:to_hex(crypto:sha(<<Password/binary, Salt/binary>>))). 
```

这是我尝试使用密码为“password”的测试用户复制它：

```
import java.security.MessageDigest
import org.apache.commons.codec.binary.Hex
import org.specs2.mutable.Specification

class PasswordSpec extends Specification {

    "Password" should {
        "match" in {

            val password = "password"

            val hexEncodedPasswordHash = "0fed560a9928b50761ebec5aa97c815999e6def0"
            val hexEncodedSalt = "2ba345d5f2880fae25de9ec7a78d38ae"

            val charset = "UTF-8"
            val codec = new Hex(charset)

            val md = MessageDigest.getInstance("SHA-1")
            md.reset()
            md.update(password.getBytes(charset))
            md.update(codec.decode(hexEncodedSalt.getBytes(charset)))
            val hashBytes = md.digest()
            val hexEncodedHash = new String(codec.encode(hashBytes), charset)

            hexEncodedHash mustEqual(hexEncodedPasswordHash)

        }
    }
} 
```

这个测试失败了，我已经不知道为什么了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T10:37:53.230

我想到了。在与密码字节连接之前，盐字节不需要从十六进制解码。

# jquery - JQuery 选项卡不透明度过渡

> ID：14154985
> 
> 赞同：-7
> 
> 时间：2013-01-04T10:05:46.630
> 
> 标签：jquery, animation, tabs, opacity

```
$("#tabs-left").tabs({opacity:'toggle', duration:'normal'}); 
```

这就是我目前所拥有的。我对 JQuery 很陌生，它似乎不起作用。据我所知，它应该可以工作。

只是想知道我是否没有越过 T 或在某处点缀 i。

Ps 由于工作抱歉，不能举个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:31:16.797

看到这个：http: [//jsfiddle.net/qzjaQ/1/](http://jsfiddle.net/qzjaQ/1/)

```
$(function() {
 $("#tabs-left").tabs({
     show: {
         opacity:'toggle',
         duration:'normal'
     }
 });

 // getter
 var show = $(".selector").tabs("option", "show");

 // setter
 $(".selector").tabs("option", "show", {
     opacity:'toggle',
     duration: 'normal'
 });
});​ 
```

看[这里](http://api.jqueryui.com/tabs/#option-show)的解释..

# c# - Automapper 合并/组合映射

> ID：14154987
> 
> 赞同：3
> 
> 时间：2013-01-04T10:06:09.503
> 
> 标签：c#, automapper-2

假设我有这些映射：

```
var mapping1 = Mapper.CreateMap<Order, BaseDto>()
    .ForMember(o => o.Referrer, m => m.Ignore());

var mapping2 = Mapper.CreateMap<Order, DetailDto>()
    .ForMember(o => o.Price, m => m.Ignore());

var mapping3 = Mapper.CreateMap<Order, UpdateDto>()
    .ForMember(o => o.Temp, m => m.Ignore()); 
```

Dtos的继承：

`DetailDto : BaseDto`

`UpdateDto : BaseDto`

有什么方法可以将第一个映射合并/组合到 mapping2 和 mapping3 中？

像这样的东西：

```
var mapping1 = Mapper.CreateMap<Order, BaseDto>()
    .ForMember(o => o.Referrer, m => m.Ignore());

var mapping2 = Mapper.CreateMap<Order, DetailDto>()
    .Import(mapping1);
    .ForMember(o => o.Price, m => m.Ignore());

var mapping3 = Mapper.CreateMap<Order, UpdateDto>()
    .Import(mapping1);
    .ForMember(o => o.Temp, m => m.Ignore()); 
```

该`.Include`功能似乎没有做我想要的，因为以下不起作用：

```
var mapping1 = Mapper.CreateMap<Order, BaseDto>()
    .Include<Order, DetailDto>()
    .Include<Order, UpdateDto>()
    .ForMember(o => o.Referrer, m => m.Ignore());

var mapping2 = Mapper.CreateMap<Order, DetailDto>()
    .ForMember(o => o.Price, m => m.Ignore());

var mapping3 = Mapper.CreateMap<Order, UpdateDto>()
    .ForMember(o => o.Temp, m => m.Ignore()); 
```

**更新**：编辑问题更具体

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-23T14:06:12.903

我意识到这有点晚了，但为了其他有类似问题的人的利益......

在 AutoMapper Github wiki 上找到[此页面](https://github.com/AutoMapper/AutoMapper/wiki/Mapping-inheritance#inheritance-mapping-priorities)之前，我一直在为同样的问题苦苦挣扎。

总之：

继承的配置根据优先级进行评估（以解决多个映射对相同成员的配置冲突的问题）。继承的`Ignore()`优先级低于 AutoMapper 的标准基于约定的映射。因此，在源类型和目标类型都具有`Referrer`属性的情况下，大多数派生类型的基于约定的映射会覆盖继承的`Ignore()`.

这表明，在这种情况下，您需要为`Ignore()`从`BastDto`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T06:52:50.390

我想知道它是否是一个错误。该[文档](https://github.com/AutoMapper/AutoMapper/wiki/Mapping-inheritance)指出：

> 在 AutoMapper 2.0 中，这变为：
> 
> ```
> Mapper.CreateMap<Order, OrderDto>()
>   .Include<OnlineOrder, OnlineOrderDto>()
>   .Include<MailOrder, MailOrderDto>()
>   .ForMember(o=>o.Id, m=>m.MapFrom(s=>s.OrderId));
> Mapper.CreateMap<OnlineOrder, OnlineOrderDto>();
> Mapper.CreateMap<MailOrder, MailOrderDto>(); 
> ```
> 
> 因为我们已经为基类定义了映射，所以我们不再需要在子映射中定义它。

我刚刚升级到`AutoMapper 2.2.1-ci9000`并且我的行为与您相同（即，`Referrer`没有被忽略）。

我建议你为它[创建一个问题](https://github.com/AutoMapper/AutoMapper/issues)，看看他们怎么说。

# android - 什么是android中的.dex文件？我收到一个错误多个 dex 文件定义 Lorg/springframework/core/NestedRuntimeException;

> ID：14154989
> 
> 赞同：0
> 
> 时间：2013-01-04T10:06:26.633
> 
> 标签：android

我在运行时在 android 中收到一条错误消息。

```
[2013-01-04 15:34:22 - Dex Loader] Unable to execute dex: Multiple dex files define Lorg/springframework/core/NestedRuntimeException;
[2013-01-04 15:34:22 - ZipGrocery] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lorg/springframework/core/NestedRuntimeException; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T10:38:37.473

`.dex`表示 Dalvik 可执行文件。这是`DVM`（Dalvik 虚拟机）需要的格式。Android 使用 DVM 作为运行时环境。

您的`.apk`-files 包含那些文件`.dex`（重命名`.apk`并`.zip`自己查看）。

因此，您的 Java 源代码必须翻译为 .dex，这应该由您的 Android-SDK 在构建 .apk 时完成。在我看来，在这一步出现了问题，因此在运行时出现错误。

检查你的代码，看看你是否可以做一些事情：

```
Multiple dex files define Lorg/springframework/core/NestedRuntimeException; 
```

# cloud-foundry - 无法登录到我的 CloudFoundry 实例。SSL 错误

> ID：14154990
> 
> 赞同：0
> 
> 时间：2013-01-04T10:06:37.977
> 
> 标签：cloud-foundry, vmc

我使用带有属性的 BOSH（带有 CF 清单文件的完整 BOSH）在 vSphere 上部署 CloudFoundry`srv_api_uri: http://api.cf.epam.by` 当我尝试登录到我的 CloudFoundry 实例时出现错误

```
vmc login
target: http://api.cf.epam.by

OpenSSL::SSL::SSLError: SSL_connect returned=1 errno=0 state=SSLv2/v3 read server hello A: unknown protocol
For more information, see ~/.vmc/crash 
```

结果`vmc login -t`是

```
target: http://api.cf.epam.by

>>>
REQUEST: GET /info
REQUEST_HEADERS:
  accept : application/json
  user-agent : Ruby
  content-length : 0
RESPONSE: [200]
RESPONSE_HEADERS:
  date : Fri, 04 Jan 2013 09:51:24 GMT
  server : nginx
  content-type : application/json; charset=utf-8
  etag : "35acd28a7b24338237a8a1025d78f6ca"
  cache-control : max-age=0, private, must-revalidate
  x-ua-compatible : IE=Edge,chrome=1
  transfer-encoding : chunked
{
  "name": "vcap",
  "build": 2222,
  "support": "http://support.cloudfoundry.com",
  "version": "0.999",
  "description": "VMware's Cloud Application Platform",
  "allow_debug": false,
  "frameworks": {
    "sinatra": {
      "name": "sinatra",
      "runtimes": [
        {
          "name": "ruby18",
          "version": "1.8.7p357",
          "description": "Ruby 1.8"
        },
        {
          "name": "ruby19",
          "version": "1.9.2p180",
          "description": "Ruby 1.9"
        }
      ],
      "detection": [
        {
          "*.rb": "\\s*require[\\s\\(]*['\"]sinatra(/base)?['\"]"
        },
        {
          "config/environment.rb": false
        }
      ]
    },
    "play": {
      "name": "play",
      "runtimes": [
        {
          "name": "java",
          "version": "1.6.0_24",
          "description": "Java 6"
        },
        {
          "name": "java7",
          "version": "1.7.0_04",
          "description": "Java 7"
        }
      ],
      "detection": [
        {
          "lib/play.*.jar": true
        }
      ]
    },
    "standalone": {
      "name": "standalone",
      "runtimes": [
        {
          "name": "java",
          "version": "1.6.0_24",
          "description": "Java 6"
        },
        {
          "name": "java7",
          "version": "1.7.0_04",
          "description": "Java 7"
        },
        {
          "name": "ruby18",
          "version": "1.8.7p357",
          "description": "Ruby 1.8"
        },
        {
          "name": "ruby19",
          "version": "1.9.2p180",
          "description": "Ruby 1.9"
        },
        {
          "name": "node",
          "version": "0.4.12",
          "description": "Node.js"
        },
        {
          "name": "node06",
          "version": "0.6.8",
          "description": "Node.js"
        },
        {
          "name": "node08",
          "version": "0.8.2",
          "description": "Node.js"
        }
      ],
      "detection": [ ]
    },
    "rack": {
      "name": "rack",
      "runtimes": [
        {
          "name": "ruby18",
          "version": "1.8.7p357",
          "description": "Ruby 1.8"
        },
        {
          "name": "ruby19",
          "version": "1.9.2p180",
          "description": "Ruby 1.9"
        }
      ],
      "detection": [
        {
          "config.ru": true
        },
        {
          "config/environment.rb": false
        }
      ]
    },
    "node": {
      "name": "node",
      "runtimes": [
        {
          "name": "node",
          "version": "0.4.12",
          "description": "Node.js"
        },
        {
          "name": "node06",
          "version": "0.6.8",
          "description": "Node.js"
        },
        {
          "name": "node08",
          "version": "0.8.2",
          "description": "Node.js"
        }
      ],

         "detection": [
       {
          "*.js": "."
        }
     ]
    },
    "spring": {
      "name": "spring",
      "runtimes": [
        {
          "name": "java",
          "version": "1.6.0_24",
          "description": "Java 6"
        },
        {
          "name": "java7",
          "version": "1.7.0_04",
          "description": "Java 7"
        }
      ],
      "detection": [
        {
          "*.war": true
        }
      ]
    },
    "lift": {
      "name": "lift",
      "runtimes": [
        {
          "name": "java",
          "version": "1.6.0_24",
          "description": "Java 6"
        },
        {
          "name": "java7",
          "version": "1.7.0_04",
          "description": "Java 7"
        }
      ],
      "detection": [
        {
          "*.war": true
        }
      ]
    },
    "rails3": {
      "name": "rails3",
      "runtimes": [
        {
          "name": "ruby18",
          "version": "1.8.7p357",
          "description": "Ruby 1.8"
        },
        {
          "name": "ruby19",
          "version": "1.9.2p180",
          "description": "Ruby 1.9"
        }
      ],
      "detection": [
        {
          "config/application.rb": true
        },
        {
          "config/environment.rb": true
        }
      ]
    },
    "java_web": {
      "name": "java_web",
      "runtimes": [
        {
          "name": "java",
          "version": "1.6.0_24",
          "description": "Java 6"
        },
        {
          "name": "java7",
          "version": "1.7.0_04",
          "description": "Java 7"
        }
      ],
      "detection": [
        {
          "*.war": true
        }
      ]
    },
    "grails": {
      "name": "grails",
      "runtimes": [
        {
          "name": "java",
          "version": "1.6.0_24",
          "description": "Java 6"
        },
        {
          "name": "java7",
          "version": "1.7.0_04",
          "description": "Java 7"
        }
      ],
      "detection": [
        {
          "*.war": true
        }
      ]
    }
  },
  "authorization_endpoint": "https://uaa.cf.epam.by"
}
<<<
>>>
REQUEST: GET /login
REQUEST_HEADERS:
  accept : application/json
  user-agent : Ruby
  content-length : 0
OpenSSL::SSL::SSLError: SSL_connect returned=1 errno=0 state=SSLv2/v3 read server hello A: unknown protocol

For more information, see ~/.vmc/crash 
```

为什么要尝试使用 SSL？为什么`"authorization_endpoint": "https://uaa.cf.epam.by"`使用 https 而不是 http？（[http://uaa.cf.epam.by](http://uaa.cf.epam.by)可用但不是[https://uaa.cf.epam.by](https://uaa.cf.epam.by)）

[PS 我在 Google Groups https://groups.google.com/a/cloudfoundry.org/forum/#!topic/vcap-dev/OAZcsFiZ3LA%5B1-25-false%5D](https://groups.google.com/a/cloudfoundry.org/forum/#!topic/vcap-dev/OAZcsFiZ3LA%5B1-25-false%5D)打开这样的讨论但此刻我什么都没有. 有人可以帮我找出问题所在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T14:00:35.300

当前的 cf-release 作业具有UAA`cloud_controller.yml.erb`的硬编码`https`URL。这在生产中绝对是强制性的，但我可以理解为什么您可能想要在开发环境中更改它。还有其他地方配置或猜测协议，例如`login.yml.erb`：

```
<% if !properties.login || !properties.login.uaa_base
  # Fix this to https when SSL certs are working in dev and staging
  protocol = (properties.login && properties.login.protocol) ? properties.login.protocol : "http"
  uaa_base = "#{protocol}://uaa.#{properties.domain}"
else
  uaa_base = properties.login.uaa_base
end %> 
```

您可以修改`cloud_controller.yml.erb`以执行类似的操作并重新部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:14:51.303

cf-release 有一个尚未合并的补丁，以允许仅 http 的 uaa 端点。也许试试这个并评论 gerrit 补丁。

[http://reviews.cloudfoundry.org/#/c/13137/](http://reviews.cloudfoundry.org/#/c/13137/)

# sql - 具有更多表的递归 SQL

> ID：14154993
> 
> 赞同：2
> 
> 时间：2013-01-04T10:06:46.153
> 
> 标签：sql, recursion, recursive-query

我有一个关于在非常特殊的情况下使用递归 SQL 的问题，我将在下面描述。

我有一个带有**(ID, value)**架构的表 A 和这些示例行：

```
(1,1000)
(2,800)
(3,300)
(4,600)

```

我有一个带有**(ID, value)**架构的表 B 和这些示例行：

```
(1,600)
(2,300)
(3,400)
(4,600)
(5,600)
(6,400)

```

目的是我必须从 A 中选择最大 ID，从 B 中选择最大 ID，然后从 A 中的值中减去 B 中的值，并为像这样的任何操作生成一行。

最终结果应该是一个模式**（ID-A、ID-B、减法值）**，生成的行将是这些：

```
(1,1,600) 在 A.ID=1 中保持 400，在 B.ID=1 中保持 0
(1,2,300) 在 A.ID=1 中保持 100，在 B.ID=2 中保持 0
(1,3,100) 在 A.ID=1 中保持 0，在 B.ID=3 中保持 300
(2,3,300) 在 A.ID=2 中保持 500，在 B.ID=3 中保持 0
(2,4,500) 在 A.ID=2 中保持 0，在 B.ID=4 中保持 100
(3,4,100) 在 A.ID=3 中保持 200，在 B.ID=4 中保持 0
(3,5,200) 在 A.ID=3 中保持 0，在 B.ID=5 中保持 400
(4,5,400) 在 A.ID=4 中保持 200，在 B.ID=5 中保持 0
(4,6,200) 在 A.ID=4 中保持 0，在 B.ID=6 中保持 200

```

此时其中一张表中的行已完成，我需要停下来！

我不知道这是否可以使用递归 SQL，当然我认为我必须合并表 A 和 B 以生成一个固定表，我可以在该表上进行计算并生成我上面解释的内容，但我不知道如何管理我事先不知道的其余部分，例如时间 t 的值取决于 t-1 发生的情况）。

您有什么建议，一些链接可以帮助我了解是否可以使用递归 SQL 来管理它？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T15:25:38.147

这个过程本质上没有递归。它被描述为一个迭代过程，它是一个迭代过程。

您将 B 值按顺序分配给 A，但要遵守一个简单的条件：B 的总和不超过每个桶中的 A 值。您可以通过在 A 和 B 上设置单独的光标来使用光标来执行此操作。然后根据这个简单的规则继续进行分配。

我想不出一种方法来使用 SQL 中的集合逻辑来做到这一点。但是，使用游标的迭代方法可能是您的最佳解决方案。

# c++ - QTreeView insertRows 通过方法粉碎/直接调用工作

> ID：14154994
> 
> 赞同：0
> 
> 时间：2013-01-04T10:06:55.090
> 
> 标签：c++, qt, treeview, qabstractitemmodel

我有以下奇怪的问题。

我已经实现了一个 QAbstractItemModel，以至于我可以将子节点插入到树视图中，但是当我尝试通过 insertRows() 方法添加节点时会发生一些奇怪的事情。

首先调用 all 的地方：

```
QApplication a(argc, argv);

QResource::registerResource("Qt5Tutorial.rcc");

QTreeView *treeView = new QTreeView();
treeView->show();

Node rootNode("rootNode");
CameraNode childNode0("childNode0", &rootNode);
CameraNode childNode1("childNode1", &rootNode);
LightNode childNode2("childNode2", &rootNode);
CameraNode childNode3("childNode3", &childNode0);
TransformNode childNode4("childNode4", &childNode2);
TransformNode tryNode("potato");

// setup model
ObjectTreeModel model(&rootNode);
treeView->setModel(&model);

// insert directly via the insert child method 
// this works!
childNode0.insertChild(1, &tryNode);

// get the QModelIndex of childNode1
// must be passed in the insertRows() method 
QModelIndex index(model.index(1, 0, QModelIndex()));

// the output is "childNode1" what is totally right
qDebug() << "index: "<<static_cast<Node*>(index.internalPointer())->getName();

// output see posted beneath
qDebug() << rootNode.log();

// should insert in "childNode1" -> at 0th position and just 1 Node object
// see the method beneath
model.insertRows(0, 1, index);

// if i try to call the method rootNode.log(); now again, it crashes 

return a.exec(); 
```

这是 rootNode.log() 调用的输出：

```
---rootNode
    ---childNode0
            ---childNode3
            ---potato
    ---childNode1
    ---childNode2
            ---childNode4 
```

如您所见，“Potato”节点已正确插入。

查看图片 [http://www10.pic-upload.de/04.01.13/m65huuqq4ruu.png](http://www10.pic-upload.de/04.01.13/m65huuqq4ruu.png)

但是，一旦我尝试扩展 childNode1 节点，它就会崩溃。但是请看上面代码中的最后一条注释。正如我提到的 - >如果我现在尝试输出树视图（它遍历所有节点）它会崩溃。

当调用该方法时，一切似乎都正常 - 只是当我尝试扩展树视图时它崩溃了 -> 调试输出让我认为一切都应该没问题

实际的错误消息是在位置读取时访问冲突......（从德语翻译 - 不知道它是否在英语中称为相同）

```
 bool ObjectTreeModel::insertRows(int position, int row, const QModelIndex &parent)
{
beginInsertRows(parent, position, position + row - 1);

Node *parentNode = getNode(parent);
qDebug() << "parentName: " << parentNode->getName();

bool success = false;
for(int i = position; i < row; i++)
{

    qDebug() << "inside loop"; 
    qDebug() << "position: " << position << "row: " << row;

    TransformNode childNode("insertedNode");
    success = parentNode->insertChild(i, &childNode);

    qDebug() << "success: " << success;
}

endInsertRows();

return success; 
```

}

上述方法的调试输出：

```
getNode: successful 
parentName: "childNode1" 
inside loop 
position:  0 row:  1 
called inserchild 
success:  true 
```

我不知道为什么会发生这种情况，因为调试输出看起来是正确的，它应该与通过 insertChild 方法直接插入节点基本相同。

我希望有人知道为什么它不起作用。

最好的问候，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T01:33:37.340

几乎一切都是正确的。只是这两行不是：

```
TransformNode *childNode = new TransformNode("insertedNode");
success = parentNode->insertChild(i, childNode); 
```

# sphinx - Sphinx UpdateAttributes 函数是否支持 varchar 字段？

> ID：14154998
> 
> 赞同：0
> 
> 时间：2013-01-04T10:07:18.417
> 
> 标签：sphinx

函数 UpdateAttributes ( $index, $attrs, $values )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:30:18.900

不，狮身人面像没有。仅数字属性

# javascript - 动态加载时传单不会显示标记

> ID：14154999
> 
> 赞同：1
> 
> 时间：2013-01-04T10:07:19.910
> 
> 标签：javascript, jquery, ajax, leaflet

如果我自己链接脚本是这样的：

```
<script src="dist/js/osm/leaflet.js" type="text/javascript"></script> 
```

一切正常。但是一旦我想像这样动态加载我的脚本：

```
$.ajax({
    type: "GET",
    url: "dist/js/osm/leaflet.js",
    dataType: "script",
    async: false
}); 
```

地图将显示，但应显示的所有标记都不会显示。如您所见，我也尝试过

```
async: false 
```

但这不会解决问题。

注意：我还加载了我自己编写的第二个脚本，但在动态加载时效果很好。正如我之前提到的，唯一不起作用的是在显示的地图上添加标记。

请帮我解决这个问题，在此先感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T09:24:06.860

当您像这样动态加载传单时，它将无法确定它是从哪里加载的，因此它将无法确定标记图标的正确 URL。原因是它会查找`script`加载传单的标签以计算出它是从哪个路径加载的，并且当您像这样使用 AJAX 加载时，没有`script`可以找到的标签。

`L.Icon.Default.imagePath`您可以通过在传单加载后和创建任何标记之前设置传单图像的基本 URL 来解决此问题。