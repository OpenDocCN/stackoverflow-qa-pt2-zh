# StackOverflow 问答 13736000-13736999

# web-applications - 我可以在移动网络应用程序中使用 HTML 表格吗？

> ID：13736002
> 
> 赞同：2
> 
> 时间：2012-12-06T02:27:45.900
> 
> 标签：web-applications

我正在使用**Jquery Mobile**和**Phonegap为****Android、iOS、Blackberry**手机开发一个网络应用程序。我的问题是我可以在其中使用**HTML 表格**吗？我知道 jQuery mobile 有网格功能，但出于某种原因，它方便我使用表格而不是网格。那么它会以任何方式阻碍 webapp 吗？是否支持上述移动平台？请帮忙。

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T15:23:24.693

仅当数据在语义上是表格时才应使用 HTML 表格，但绝不应用于布局。******

# opencv - 更多关于冲浪

> ID：13736003
> 
> 赞同：0
> 
> 时间：2012-12-06T02:27:48.250
> 
> 标签：opencv, computer-vision, surf

我使用[SURF](https://en.wikipedia.org/wiki/Speeded_up_robust_features)来匹配两个图像。所以我不知道何时判断一张图片与另一张相似。请帮帮我好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T09:14:00.587

SURF 是计算机视觉算法，它有检测器和描述符，它不会告诉你两张图片是否相同。检测器检测兴趣点 (IP)，描述符将其描述为 64 位长向量。您应该在两个图像上同时运行 SURF 的检测器算法和描述符，并且使用一些匹配器算法（bruteforce，flann），您可以说这两个图像对于 X% 是相似的。我建议您尝试 ORB 或 Brief，但它们会生成二进制向量。一些有用的文章：**[这里](http://www.vision.ee.ethz.ch/~surf/eccv06.pdf)** 或***[这里](http://compbio.fmph.uniba.sk/svk2012/svk2012-zbornik.pdf)***您可以在第 225-228 页找到我的文章“*手机上视觉标记的识别”*

编辑：

matcher 的输出是描述符之间的距离向量。距离越小描述符越相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:11:32.170

您应该检查 OpenCV 的示例文件[descriptor_extractor_matcher.cpp](https://github.com/kipr/opencv/blob/master/samples/cpp/descriptor_extractor_matcher.cpp)。您可以通过将值汇总`filteredMatches.distance`为比较指标来自定义代码。它是描述符之间的距离（参见[features2d.hpp](https://github.com/Itseez/opencv/blob/master/modules/features2d/include/opencv2/features2d.hpp)）。

此外，如果要匹配两个图像，请使用 HSV 直方图比较。检查[compareHist_Demo.cpp](https://github.com/Itseez/opencv/blob/master/samples/cpp/tutorial_code/Histograms_Matching/compareHist_Demo.cpp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T08:00:00.713

这取决于需要多少相似度才能适合您的分类问题中的一个类别。

在最基本的情况下，您将拥有图像/对象的 n 维描述向量。然后，您可以将其拟合到训练集中对象的向量。不同的算法最适合不同的情况。OpenCV 在这里提供了不同的可能性。这些参数还取决于您愿意接受的误报百分比等。

你有一个训练集（学习你的分类器“学习”），你有一个测试集，你可以用它来控制你的系统的结果。如需更详细的帮助，您需要了解有关您的应用程序的更多信息，即要求、示例图像等。

编辑：示例 find_obj.cpp 不决定是否真的在场景 (box_in_scene.png) 中找到对象 (box.png)。它只会在场景中找到与盒子上找到的最对应的 SURF 点。这就是为什么还有错误匹配的点对。如果您想做出决定，如果匹配算作“找到”，您可以通过设置找到的匹配的最大平均距离（DMatch 结构的成员），或者检查一个好的转换矩阵是否可以进行计算（例如使用 findHomography）。这显示在以下教程中： http: [//docs.opencv.org/doc/tutorials/features2d/feature_homography/feature_homography.html#feature-homography](http://docs.opencv.org/doc/tutorials/features2d/feature_homography/feature_homography.html#feature-homography)如果可能的话，我还建议使用 OpenCV 的新 cpp API 而不是相当复杂的 C API。它可能会降低程序的复杂性，从而更容易专注于应用程序的基本（算法）部分。另外，正如 Csabi 已经说过的，我还建议您看看 ORB。

# jquery - jQuery 水平滑动切换导航

> ID：13736005
> 
> 赞同：2
> 
> 时间：2012-12-06T02:28:01.423
> 
> 标签：jquery, navigation

我正在寻找一个简单的嵌套导航菜单，在悬停时水平向左“滑动”或“飞出”。我认为实现这一点的唯一方法是使用 jQuery，所以我一直在玩它。

**初始状态**

![在此处输入图像描述](../Images/5ccecab60ec48ef2d9ab9261954cbe78.png)

**悬停状态**

**编辑：**我意识到这张照片看起来有点不对劲。我希望整个 ul.sub-menu（即：PEOPLE & APPROACH）一起滑出，而不是按顺序滑出。

![在此处输入图像描述](../Images/cc61b3eb376929c75b23165faae199ea.png)

一般结构是：

```
<nav>
<ul>
    <li>ABOUT
        <ul class="sub-menu">
            <li>PEOPLE</li>
            <li>APPROACH</li>
        </ul>
    </li>
    <li>PROJECTS</li>
    <li>CONTACT</li>
</ul>
</nav> 
```

我的 jQuery 是：

```
$("nav li").on('hover', function(){
    $(this).children(".sub-menu").animate({width: 'toggle'});
}); 
```

目前我的李是浮动的。

我的问题是，当我将鼠标悬停在父 LI 上时，.sub-menu 淡入但在一条线上，并且由于浮动，一切都在跳跃。

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T03:33:12.773

这就是你想要的吗？`display:inline-block`我相信你从你的 CSS中丢失了一个属性。通过使用内联块，具有该属性的每个元素都将保留块特征（宽度、高度等），但也保持内联（前后没有中断）。没有块部分，应用宽度修改是没有意义的。

# CSS：

```
<style type='text/css'>
    nav li {
        display: inline;
        list-style: none;
    }

    .sub-menu {
        display: inline-block;
        white-space: nowrap;
        padding: 0;
        margin: 0;
    }
</style> 
```

# Javascript：

```
<script>
    $(function() {
        $('.sub-menu').hide();

        $('.link').hover(
            function() {            
                $('.sub-menu', this).stop().animate({
                    width: 'toggle',
                    opacity: 'toggle'
                } /* [, duration in ms] */);
            }
        );
    });
</script> 
```

# HTML：

```
<nav>
    <ul>
        <li class="link">ABOUT
            <ul class="sub-menu">
                <li>PEOPLE</li>
                <li>APPROACH</li>
            </ul>
        </li>
        <li class="link">PROJECTS
            <ul class="sub-menu">
                <li>ONE</li>
                <li>TWO</li>
            </ul>
        </li>
        <li>CONTACT</li>
    </ul>
</nav> 
```

# php - PHP die() 清理所有页面

> ID：13736007
> 
> 赞同：0
> 
> 时间：2012-12-06T02:28:13.677
> 
> 标签：php

一个 php die 函数问题。当我使用 die() 时，它会清除所有页面元素。有什么方法可以回显错误消息而不清除所有页面，当我使用 die() 停止代码并调用消息时，它看起来像是跳转到另一个页面。

这是我的代码

```
 <?PHP
$message="";
if(isset($_POST['submit'])){

    $name=$_POST['name'];
    $password=$_POST['password'];

    //Field check
    if($name && $password){$message=$name . $password;}
    else{die($message="please enter name and password");}

    //Check name    
    if($name=="alex" && $password==123){$message="Welcome ". $name;}    
    else{$message="wrong user or password";}
    }
?>

<html>
<p>SIGN UP</p>
    <form action="testing.php" method="POST">
            <input type="text" name="name" placeholder="Enter Name" />
            <input type="password" name="password" placeholder="Enter Password"/>
            <input type="submit" name="submit" value="Sign up"/>
    </form>
    <div><?PHP echo $message?></div>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T02:40:20.437

您应该从上到下阅读您的脚本，包括`<?php ?>`. 当使用`die()`你的脚本时会停止。

```
<?php $a = "something"; ?>
<html>
  <p><?php echo $a?></p>
  <?php die(); ?>
  <p>Never here</p>
</html> 
```

会输出

```
<html>
  <p>something</p> 
```

在你的情况下

```
<?php
if(isset($_POST['submit'])){

    $name=$_POST['name'];
    $password=$_POST['password'];

    //Field check
    if(!$name || !$password) {
       $message="please enter name and password");

    //Check name and password    
    } elseif ($name=="alex" && $password=="alex1") {
       $message="Welcome ". $name;

    } else {
       $message="Username or password incorrect"
    }
?>
<html>
<p>SIGN UP</p>
    <form action="testing.php" method="POST">
            <input type="text" name="name" placeholder="Enter Name" />
            <input type="password" name="password" placeholder="Enter Password"/>
            <input type="submit" name="submit" value="Sign up"/>
    </form>
    <div><?php echo $message?></div>
</html> 
```

另请注意，我使用“==”进行比较，而不是“=”。

# facebook-javascript-sdk - 被邀请的朋友没有收到apprequest邀请，Facebook API-SDK

> ID：13736009
> 
> 赞同：1
> 
> 时间：2012-12-06T02:28:46.777
> 
> 标签：facebook-javascript-sdk

嗨，我正在发送应用请求邀请，而我的 Facebook 朋友却一无所获。我正在使用 Facebook API 在我的页面中完美加载我可以连接、检索基本的 fb 数据、电子邮件和流发布......现在我正在尝试使用此代码从同一页面发送邀请

```
PIGSKIN.inviteFBfriendsToGroup = function () {
    //console.log("invite FB friends");
    FB.ui({
        method: 'apprequests',
        message: 'Invita a tus amigos a unirse al PigSkin Caliente',
        display: "iframe"
    },function (response) {
        console.log("Response", response);
        var friends = response.to;
        if (friends.length > 0) {
            FB.ui({
              method: 'apprequests',
              message: 'Te invito a unirte al PigSkin de Caliente',
              to: friends.join(","),
              link: location.href,
              new_style_message: true
            }, function (response) {
                console.log("Response here  ", response);
            });
        } 
    });
}; 
```

我正在打开 apprequest 对话框以选择朋友并邀请他们，然后我确认邀请请求..

![在此处输入图像描述](../Images/8c7bb89b4b276cc957b73366837fd014.png) ![在此处输入图像描述](../Images/8a88fd48d7ff0d4acd7395b6f6246ee9.png)

它回应了我这个

![在此处输入图像描述](../Images/6198da6257cc059a5dacb440db3589e4.png)

我猜响应对象似乎是正确的……但是与我的 fb 朋友核实他们没有收到任何邀请……这是 facebook 的问题吗？或者我做错了什么

对不起，我忘记发布我的登录信息：

```
FB.login(function (response) {
 if (response.status === 'connected') {
 PIGSKIN.FBconnect(); //Don't worry about this function ...     
 }
},{scope:"email,publish_stream,publish_actions"}); 
```

谢谢

Facebook 文档 [https://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T08:51:53.133

您的 FB.ui 功能运行良好，我已经使用您的 FB.ui 代码复制了文档示例，结果成功......也许是 facebook，或者可能是 Caliente 的 fb 页面上的权限......无法分辨... 祝你好运。

# java - 如何在 servicemix 中使用多个 jar 版本

> ID：13736011
> 
> 赞同：2
> 
> 时间：2012-12-06T02:29:02.500
> 
> 标签：java, apache-camel, apache-servicemix, blueprint-osgi

我正在使用`apache-servicemix-4.4.1 -fuse-03-06` 我有两个版本的相同 jar`Model-1.0.jar`和`Model-2.0.jar`. 两者都有相同的类和不同的方法。在我的部署文件夹中，我有两个蓝图项目`blueprint-one.jar`和 `blueprint-two.jar`. `blueprint-one.jar`用途`Model-1.0.jar`和`blueprint-two.jar`用途`Model-2.0.jar`

但是当在部署文件夹中部署两个 jar 时，我得到`NoSuchMethod exception`.

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:10:58.137

您需要使用 OSGi 导入|导出并让您的 2 个蓝图包导入它们使用的确切版本（或范围）。所以蓝图 A 导入 [1.0,2)。和蓝图 B 导入 [2.0,3)。然后例如 A 导入所有 1.x 版本。并且 B 导入所有 2.x 版本。您可以在 Google 上搜索版本范围的 OSGi 语法。

并且您的模型包必须导出它们的版本号，例如 1.0.0，另一个是 2.0.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:45:01.767

你不能让同一个类加载器加载同一个类的不同版本。你不能得到蓝图1来使用模型2吗？

# git - git add，git commit 后的 git push 错误

> ID：13736016
> 
> 赞同：-1
> 
> 时间：2012-12-06T02:29:31.870
> 
> 标签：git

我编辑了文件并 git add filename 后跟 git commit -m 'message' ，然后我输入 git push ，它就出现了这个错误。我该如何解决这个问题？

```
Master:disrupreneurs shaunstanislaus$ git push
Counting objects: 11, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (6/6), done.
Writing objects: 100% (6/6), 1.71 KiB, done.
Total 6 (delta 3), reused 0 (delta 0)
remote: error: refusing to update checked out branch: refs/heads/master
remote: error: By default, updating the current branch in a non-bare repository
remote: error: is denied, because it will make the index and work tree inconsistent
remote: error: with what you pushed, and will require 'git reset --hard' to match
remote: error: the work tree to HEAD.
remote: error: 
remote: error: You can set 'receive.denyCurrentBranch' configuration variable to
remote: error: 'ignore' or 'warn' in the remote repository to allow pushing into
remote: error: its current branch; however, this is not recommended unless you
remote: error: arranged to update its work tree to match what you pushed in some
remote: error: other way.
remote: error: 
remote: error: To squelch this message and still keep the default behaviour, set
remote: error: 'receive.denyCurrentBranch' configuration variable to 'refuse'.
To ec2-user@www.disrupreneurs.org:disrupreneurs
 ! [remote rejected] master -> master (branch is currently checked out)
error: failed to push some refs to 'ec2-user@www.disrupreneurs.org:disrupreneurs' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:46:08.670

git仓库有两种风格：

*   **裸**仓库用于在开发人员之间共享代码。您通常会从中克隆并推送到它。

*   **non-bare** non-bare repos 用于进行编码工作。它们通常是从您通常会推送您的提交的裸仓库中克隆的

您尝试推送到的 repo 不是一个裸 repo，因此它有一个签出的分支。较新的 git 版本不允许您推送到非裸仓库的当前签出分支，因为它会导致您覆盖其他人的作品，因为非裸仓库应该是其他人的工作仓库。

所以你有树选项： - 做消息所说的：

> 您可以在远程存储库中将“receive.denyCurrentBranch”配置变量设置为远程：错误：“忽略”或“警告”，以允许推送到远程：错误：其当前分支；但是，除非您远程：错误：安排更新其工作树以匹配您在某个远程：错误：其他方式中推送的内容，否则不建议这样做。

*   在目标 repo 上签出另一个分支
*   或者最好的办法是使用一个裸仓库 ( `git clone --bare`) 作为共享仓库。

# matlab - 用每个 y 轴的两个向量格式化 plotyy

> ID：13736019
> 
> 赞同：2
> 
> 时间：2012-12-06T02:30:28.007
> 
> 标签：matlab

我在 MATLAB 中有一个 plotyy 图形，每个 y 轴上有 2 个向量。

`plotyy(x1,[y1(:),y2(:)], x1,[y3(:),y4(:)])`

我需要分别格式化每一行，但找不到有关如何执行此操作的文档。有人可以请我举个例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T02:50:15.070

以下示例代码有帮助吗？

```
%# Generate some data
N = 20;
X = (1:N)';
Y1 = randn(N, 1);
Y2 = randn(N, 1);
Y3 = randn(N, 1) - 50;
Y4 = randn(N, 1) - 50;

%# Perform the plotyy, returning an axes handle, and a handle for both figures
[Axes, fig1, fig2] = plotyy(X, [Y1 Y2], X, [Y3 Y4]);

%# Change the format of Y1 and Y2 (separately)
set(fig1(1), 'LineStyle', ':');
set(fig1(2), 'LineStyle', '--');

%# Change the format of Y3
set(fig2(1), 'LineStyle', '-.'); 
```

在上面的代码中，图形句柄`fig1`对应于第一个 y 绘图，即`Y1`and ，我可以通过使用and`Y2`索引来访问各个行。`fig1``1``2`

类似地，图形句柄`fig2`对应于第二个 y 图，即`Y3`和`Y4`，我`Y3`通过使用 索引这个句柄来访问`1`。如果我愿意，我也可以使用 访问`Y4`。`fig2(2)`

# forms - 将表单标签下载为 csv 文件格式

> ID：13736026
> 
> 赞同：-1
> 
> 时间：2012-12-06T02:31:20.280
> 
> 标签：forms, grails, csv, download, gsp

我需要一些有关如何将表单下载到 CSV 文件中的帮助或指南。我在这里要做的是：

```
 <form>
<select name="mydropdown">
<option value="Chicken">Fresh Milk</option>
<option value="Apple">Old Cheese</option>
<option value="Bread">Hot Bread</option>
</select>
       </form>
     <input type=button> 
```

GSP 应该是这样的，当下载 csv 文件时，我不确定控制器需要什么，结果应该是正在选择的选项中的值之一，并将其​​显示为文本文件。顺便说一句，我正在使用 grails。那么有没有人可以帮助我解决这个问题？我一直在研究它，没有任何结果。

非常感谢你们:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:04:28.677

您可以使用 OpenCSV 来完成这项工作。

**定义依赖**

```
dependencies {
  ...
  compile('net.sf.opencsv:opencsv:2.0')
  ...
} 
```

**创建动作**

```
def export() {
  ByteArrayOutputStream output = new ByteArrayOutputStream()
  char separator = ';'
  CSVWriter writer = new CSVWriter(new OutputStreamWriter(output), separator);
  def line = [params.mydropdown]
  writer.writeNext(line as String[]) 
  //use writeNext as many times as needed
  writer.close()
  byte[] bytes = output.toByteArray()
  //needed to force download
  response.setContentType("text/csv")
  response.setContentLength(bytes.length)
  response.setHeader("Content-Disposition", "attachment; filename=mycsv.csv")
  response.outputStream << bytes
} 
```

**更改您的表格以导出**

```
<g:form action="export">
...
</g:form> 
```

# objective-c - iOS 是否有任何库支持格式化数字，如 Mac OSX 的 NSNumberFormatter？

> ID：13736029
> 
> 赞同：0
> 
> 时间：2012-12-06T02:31:29.847
> 
> 标签：objective-c, ios, formatting, format, string-formatting

我想通过使用类似于 Mac OSX 的 NSNumberFormatter 的格式字符串将数字格式化为字符串（NSNumberFormatter 不支持格式字符串）。iOS 是否有任何库支持格式化数字，如 Mac OSX 的 NSNumberFormatter？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T02:35:33.583

[`NSNumberFormatter`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/)iOS 上也存在。

唯一的区别是它只支持 10.4+ 格式的格式，不支持旧的 10.0 格式。

# matlab - 连接四个matlab

> ID：13736030
> 
> 赞同：2
> 
> 时间：2012-12-06T02:31:50.070
> 
> 标签：matlab, connect-four

好的，现在我正在尝试通过 Matlab 编码创建一个连接四游戏；现在游戏还处于婴儿期，但我的问题是我要么无法在每个方格中绘制图形，要么根本无法绘制“圆形”图形。请以任何可能的方式提供帮助。此外，如果有人知道任何连接四个 matlab 教程，将不胜感激。

```
 function [] = Kinect4(nrRows, nrCols)
  board = zeros(nrRows, nrCols);

  nrMoves = 0;

        set(gca, 'xlim', [0 nrCols]);
        set(gca, 'ylim', [0 nrRows]);

        for r = 1 : 1 : nrRows - 1
        line([0, nrCols], [r, r], ...
        'LineWidth', 4, 'Color', [0 0 1]);
        end

        for c = 1 : 1 : nrCols - 1
        line([c, c], [0, nrRows], ...
        'LineWidth', 4, 'Color', [0 0 1]);
        end

  DrawBoard(nrRows, nrCols)
  hold on;

  while nrMoves < nrRows * nrCols                    %Computes ability to move polygon
       [x, y] = ginput(1); 
        r = ceil(y); % convert to row index
        c = ceil(x); % convert to column index

angles = 0 : 1 : 360;
        x = cx + r .* cosd(angles);
        y = cy + r .* sind(angles);

        plot(x, y, 'Color', [1 1 1], 'LineWidth', 3);
        axis square;
  end 
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T03:30:02.703

以下是对代码的一些修复。

1.  删除线`DrawBoard(nrRows, nrCols)`。不确定您是否将它作为评论放在那里，因为您已经绘制了电路板，或者是否`DrawBoard`是一个单独的功能。
2.  更改了计算，`r`并`c`给出了你想把钉子放进去的单元格的中心。这是通过从每个单元格中减去 0.5 来完成的。
3.  将行更改`x = cx + r .* cosd(angles);`为`x = c + 0.5*cosd(angles);`. 在前一个中，变量`cx`是未定义`r`的，我使用的不是钉子的半径，而是`0.5`可以用适当的变量替换它。但是这个想法是绘制一个半径圆`0.5`（以便它适合一个单元格），其中心`c`沿 x 轴偏移。`y`沿 y 轴偏移挂钩的类似更改。
4.  `plot`将命令中的颜色更改`[0 0 0]`为黑色。`[1 1 1]`是白色的，在白色背景上是不可能看到的 :)。我建议使用`'k'`黑色、`'b'`蓝色等。有关基本颜色规范，请参阅 matlab 文档。
5.  我猜你还没有实现重力，以便钉子向下移动。您还需要检查一个单元格是否已填充。一旦你得到一个工作代码，所有这些和其他改进（比如删除不必要的 for 循环、更好的绘制钉子的方法等）都会留下。

这是一个“工作”代码：

```
function [] = Kinect4(nrRows, nrCols)
    board = zeros(nrRows, nrCols);

    nrMoves = 0;

        set(gca, 'xlim', [0 nrCols]);
        set(gca, 'ylim', [0 nrRows]);

        for r = 1 : 1 : nrRows - 1
            line([0, nrCols], [r, r], ...
            'LineWidth', 4, 'Color', [0 0 1]);
        end

        for c = 1 : 1 : nrCols - 1
            line([c, c], [0, nrRows], ...
            'LineWidth', 4, 'Color', [0 0 1]);
        end

        axis square;
        hold on;

    while nrMoves < nrRows * nrCols        %Computes ability to move polygon
        [x, y] = ginput(1); 
        r = ceil(y) - 0.5;
        c = ceil(x) - 0.5;

        angles = 0 : 1 : 360;
        x = c + 0.5*cosd(angles);
        y = r + 0.5*sind(angles);

        plot(x, y, 'Color', [0 0 0], 'LineWidth', 3);
    end 
end 
```

# java - DDMS 视图中的文件资源管理器中不存在项目结构

> ID：13736033
> 
> 赞同：0
> 
> 时间：2012-12-06T02:31:57.003
> 
> 标签：java, android, eclipse, ddms, perspective

当我在真实设备中运行项目结构时，为什么我的项目结构没有出现在 DDMS 透视图中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T02:37:13.757

当您使用模拟器时会发生这种情况？您可以检查 Clean Project 或重新启动 Eclipse

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T03:30:21.643

问题是我的手机已经root了。所以，我再也看不到 data/data 目录了。但与往常一样，有办法做到这一点。我会给你看。

1.  运行项目
2.  转到 Eclipse 中的 DDMS 透视图
3.  运行 Windows 提示符（Windows R + cmd）
4.  键入“abd 外壳”
5.  输入“苏”
6.  键入“chmod 777 /data /data/data /data/data/com.example.example /data/data/com.example.example/*”
7.  返回到 DDMS 透视图，您将看到数据。数据库、库和共享首选项

我发现了另一个问题。也就是说，当您尝试使用 DDMS 的 eclipse 功能提取 sharedPreference 或数据库时，您会收到“无法提取选择”错误。

为了从有根电话中取出东西，您需要以与查看文件相同的方式执行此操作，即使用带有 adb shell 命令的命令提示符。

唯一的区别是，当您键入根目录时，您应该进入您想要的特定文件。例如，如果您正在寻找一个数据库（您想要验证的最明显的东西），您应该在第 6 步中输入：

“chmod 777 /data/data/com.example.database/databases/database.db”

而已。

# javascript - JS - 使用正则表达式在数组键中查找匹配项

> ID：13736041
> 
> 赞同：2
> 
> 时间：2012-12-06T02:32:29.280
> 
> 标签：javascript, regex

有一个数组

```
var words =new Array(
            'apple',
            'apa',
            'found',
            'stackoverflow',
            'will'
   ); 
```

和一个变量

```
var search = 'papa.com'; 
```

现在我想设置这样的表达式

```
var Flag=false;
var regexp;
for(var i in words) 
{
    regexp = new RegExp('(^(.*\.))?' + words[i] + '\.([a-z]{2,3})(\.(\w+))?','i');
    if (regexp.test(search)) {Flag=true;}
}
alert (Flag); 
```

该循环应该一个一个地获取`words`数组键，然后设置正则表达式并`search`根据构建的表达式测试变量，如果有一个或多个匹配，`Flag`则结果为真。

但是，id 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T02:40:02.137

从字符串构建正则表达式时，您需要转义转义序列。这是因为`\`字符串中的文字符号也开始了一个转义序列，因此`\`被删除了。

`\`要在由文字语法构建的字符串中包含文字字符，您需要`\\`.

```
regexp = new RegExp('(^(.*\\.))?' + words[i] + '\\.([a-z]{2,3})(\\.(\\w+))?','i'); 
```

`.`您的正则表达式以而不是结束`\.`，这当然具有非常不同的含义。

# amazon-ec2 - Mahout LDA：实际可以使用的最大字典大小是多少？

> ID：13736042
> 
> 赞同：0
> 
> 时间：2012-12-06T02:32:54.170
> 
> 标签：amazon-ec2, mahout, bigdata, lda

我在 EC2 上运行 Mahout 的 LDA（使用 Whirr）。您在实践中能够使用的最大词汇量是多少？你能分享一些 Hadoop/EC2 设置吗？

理想情况下，我想在 3M 文档（1B 令牌）的语料库上运行 LDA，并使用 20M 令牌的字典。

我尝试了 LDA 的其他 map-reduce 实现（hadoop-lda，LDA 先生），但并没有设法将其扩展得很远（请证明我错了！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T10:56:07.227

此类问题的最佳位置是 Mahout 邮件列表 [1]。我自己没有尝试过 LDA 实现，但它是由 twitter 提供的，所以我猜它应该适合你的规模需求。

我相信邮件列表上的人可以给你一个更好的答案。

[1] [https://cwiki.apache.org/confluence/display/MAHOUT/Mailing+Lists,+IRC+and+Archives](https://cwiki.apache.org/confluence/display/MAHOUT/Mailing+Lists,+IRC+and+Archives)

# php - 支付网关 url 的 curl 错误 35

> ID：13736043
> 
> 赞同：0
> 
> 时间：2012-12-06T02:33:01.510
> 
> 标签：php, curl, payment-gateway

嘿家伙希望你能帮助我。

我正在实现一个支付网关，并通过 curl 通过不断收到错误号来发送请求。

> 35，“连接中的未知 SSL 协议错误”

如果我直接通过浏览器将表单发布到 url，它可以正常工作，得到正确的响应等，但问题是当我使用 curl 时。

我的小型缩小版代码是

```
$query="type=sale&username=demo&password=password&ccnumber=4111111111111111&ccexp=1013&amount=50";
$request = curl_init("https://secure.msicharge.com/api/transact.php"); // initiate curl object
curl_setopt($request, CURLOPT_HEADER, 0); // set to 0 to eliminate header info from response
curl_setopt($request, CURLOPT_RETURNTRANSFER, 1); // Returns response data instead of TRUE(1)
curl_setopt($request, CURLOPT_POSTFIELDS, $query); // use HTTP POST to send form data
curl_setopt($request, CURLOPT_SSL_VERIFYPEER, FALSE); // uncomment this line if you get no gateway response.
$data = curl_exec($request);
echo $data;
echo curl_errno($request),curl_error($request)    ;
curl_close ($request); 
```

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:41:31.917

你也可以试试这个

```
curl_setopt($ch, CURLOPT_SSLVERSION, 3); 
```

# r - 如何获取日志轴上显示的所有标签？

> ID：13736047
> 
> 赞同：1
> 
> 时间：2012-12-06T02:33:20.790
> 
> 标签：r, boxplot, axis-labels

我想将自己的标签放在箱线图的对数转换 y 轴上：

```
with(TX, boxplot(b~tx, ylab="Biomass, g/m2, ln", yaxt="n", las=2, log="y", cex.axis=0.7)) 
```

数据：

```
pretty(log(TX$b))

[1] -6 -4 -2  0  2  4  6

length(levels(TX$tx))

[1] 22 
```

我试过：

```
axis(2, at=pretty(log(TX$b)), labels=pretty(log(TX$b))) and 

axis(2, at=c(-6, -3, -1, 0, 1, 3, 6), labels=c(-6, -3, -1, 0, 1, 3, 6)), 
```

但在这两种情况下，只显示正值（和相应的刻度！）。是什么原因，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:02:25.447

您已使用`log = 'y'`.

这意味着您将`at`组件作为未转换比例上的值传递。

```
axis(2, at= exp(c(-6, -3, -1, 0, 1, 3, 6)), labels=c(-6, -3, -1, 0, 1, 3, 6)) 
```

一个可重现的例子

```
set.seed(1)
TX <- data.frame(tx = gl(2,3), y= rlnorm(600, mean = -1, sd = 3))
boxplot( y~tx, data = TX, log = 'y',yaxt="n", las=2,  cex.axis=0.7)
axis(2, at= exp(c(-6, -3, -1, 0, 1, 3, 6)), labels=c(-6, -3, -1, 0, 1, 3, 6)) 
```

![在此处输入图像描述](../Images/6dd2690abd52a79a167ebcd332619455.png)

# jbehave - JBehave 句子“API”生成器可用

> ID：13736049
> 
> 赞同：0
> 
> 时间：2012-12-06T02:33:58.107
> 
> 标签：jbehave

我正在尝试根据用 Given、When、Then 和 Alias 注释的方法向我的 QA 团队提供 JBehave 中可用句子的列表。如下：

1.  然后 $userName 登录。
2.  然后用户应该被带到“$pageTitle”

我最近写了一个简单的脚本来做到这一点。在我投入更多工作之前，我想确定那里没有更好的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T11:00:11.613

其中之一是 JBehave 的 Eclipse 集成，它提供代码完成功能，从而直接从代码中提供所有步骤 ( [http://jbehave.org/eclipse-integration.html](http://jbehave.org/eclipse-integration.html) )。请注意，它不会通过依赖的 .jars - 只有它可以在源代码树中找到的内容。即，输入“Given”，按 Ctrl+Space 并获取所有可用的给定步骤。

但是也有一些使用“Story Navigator”（[http://paulhammant.com/blog/introducing-story-navigator.html](http://paulhammant.com/blog/introducing-story-navigator.html)）解析运行结果的工作，它提供了步骤列表。但我不确定它是否可以列出未使用的步骤；此外，这对我来说更像是一个概念证明（我无法正确使用它）。

# django - django 发送邮件收件人列表

> ID：13736051
> 
> 赞同：0
> 
> 时间：2012-12-06T02:34:16.243
> 
> 标签：django, django-views

我有一个基本上是工作票的模型表格。视图中的保存方法设置为在保存时发送电子邮件通知。该模型有几个继承自父 UserProfile 模型的字段：

```
class RemoteRequest(models.Model):
    create_date = models.DateTimeField(auto_now_add=True)
    requested_by = models.ForeignKey(UserProfile)
    client = models.CharField(max_length=50, choices=CLIENT_CHOICES)
    job_number = models.CharField(max_length=8, unique=False, blank=False, null=False)
    cell_number = models.CharField(max_length=4, unique=False, blank=True, null=True)
    job_name = models.CharField(max_length=200, unique=False, blank=True, null=True)
    print_request = models.ManyToManyField(PrintRequest, unique=False, blank=True, null=True)
    interactive_request = models.ManyToManyField(InteractiveRequest, unique=False, blank=True, null=True)
    due_date = models.DateTimeField(auto_now_add=False)
    job_notes = models.TextField(max_length=500, unique=False, blank=True, null=True)
    asset_location = models.CharField(max_length=300, unique=False, blank=True, null=True)
    asset_upload = models.FileField(upload_to=request_file_name, blank=True, null=True, max_length=300)
    pdf_upload = models.FileField(upload_to=request_file_name, blank=True, null=True, max_length=300)
    *notify_internal = models.ManyToManyField(UserProfile, related_name='+', unique=False, blank=True, null=True)*
    notify_external = models.ManyToManyField(FreelanceProfile, unique=False, blank=True, null=True)
    completed_by = models.ForeignKey(UserProfile, related_name='+', blank=True, null=True)
    complete_date = models.DateTimeField(auto_now_add=False, blank=True)
    asset_return = models.FileField(upload_to=return_file_name, blank=True, null=True, max_length=300)
    pdf_return = models.FileField(upload_to=return_file_name, blank=True, null=True, max_length=300)
    return_notes = models.TextField(max_length=500, unique=False, blank=True, null=True)

    def __unicode__ (self):
            return u'%s %s %s %s %s' % (self.client, self.job_number, '-', self.cell_number, self.job_name) 
```

UserProfile 模型有一个电子邮件字段。这是我试图传递给视图中的收件人列表的内容：

```
def remote_request(request):
    if request.method=='POST':
        form = RemoteRequestForm(request.POST)
        if form.is_valid():
                name = form.cleaned_data['job_name']
                subject = form.cleaned_data['job_name']
                message = form.cleaned_data['job_notes']
                sender = form.cleaned_data['requested_by']

                recipients = [form.cleaned_data['**notify_internal.userprofile.email**']]

                from django.core.mail import send_mail
                send_mail(subject, message, sender, recipients)
                remoterq = form.save(commit=False)
                remoterq.save()
                form.save_m2m()
                return render(request, 'remote_tmps/remoterequest.html', {'form': form,
            })
    else:
            form = RemoteRequestForm()
            return render(request, 'remote_tmps/remoterequest.html', {'form': form,}) 
```

不幸的是，“notify_internal.userprofile.email”引发了一个关键错误，我不知道如何正确传递这些电子邮件收件人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:42:20.863

是什么让您认为使用 python 点符号传递字符串会在字典查找中做一些特别的事情？

您正在保存对象，因此只需在保存后拉取收件人，然后保存 m2m()。

```
recipients = [user.email for user in remoterq.notify_internal.all()] 
```

查看`ManyToManyField`文档以了解如何获取数据。`QuerySet`在 field 属性中公开了一个接口。

# java - 使用 for 循环获取字符串中的最后一个单词？

> ID：13736054
> 
> 赞同：0
> 
> 时间：2012-12-06T02:34:27.777
> 
> 标签：java, string, methods

我必须找到字符串中的最后一个单词，并且不明白为什么我的代码不起作用。这就是我所拥有的：

```
int i, length;
String j, lastWord;
String word = "We the people of the United States in order to form a more perfect union";    
length = word.length();    

for (i = length - 1; i > 0; i--)
{
  j = word.substring(i, i + 1);
  if (j.equals(" ") == true);
  {
    lastWord = word.substring(i);
    System.out.println("Last word: " + lastWord);
    i = -1; //to stop the loop
  }
} 
```

但是，当我运行它时，它会打印最后一个字母。我知道我可以使用

字符串 lastWord = word.substring(word.lastIndexOf(" ") + 1)

但我很确定我的老师不希望我这样做。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T02:39:01.093

您需要删除`;`之后`if`才能使其工作：

```
if (j.equals(" ")) // <== No semicolon, and no == true
{
    lastWord = word.substring(i);
    System.out.println("Last word: " + lastWord);
    i = -1; //to stop the loop
} 
```

您也不需要`== true`控制语句中的布尔值。

最后，制作单字符子字符串比使用单字符更昂贵。考虑`charAt(i)`改用：

```
if (word.charAt(i) == ' ') // Single quotes mean one character
{
    lastWord = word.substring(i+1);
    System.out.println("Last word: " + lastWord);
    break; // there is a better way to stop the loop
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T02:39:03.153

您已终止该`if`声明。它应该是，

```
if(j.equals(" "))
{
 ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T02:39:41.827

把它`;`从`if (j.equals(" ") == true);`外面拿出来。

您的代码重做更清洁：

```
String word = "We the people of the United States in order to form a more perfect union";
for (int i = word.length() - 1; i > 0; i--)
  if (word.charAt(i - 1) == ' ') {
    System.out.println("Last word: " + word.substring(i));
    break; // To stop the loop
  } 
```

最小迭代。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-29T23:09:56.980

Convert the string to char array and look for space from the end of array. Don't forget to remove white spaces from the end using trim() as they could be counted as separate words.

```
s = s.trim();
char[] c = s.toCharArray();
for(int i=0; i<c.length; i++)
{
    if(c[c.length-1-i]==' ')
    {
        return s.substring(c.length-1-i);
    }
}
return s; 
```

This also covers the null string case.

Another alternative using split.

```
s = s.trim();
String[] strs = new s.split(' ');
return str[str.length-1]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T02:43:12.790

“if”语句后面的分号表示“什么也不做”。此外，“== true”是多余的。最后，您不想包含刚刚找到的空间。尝试这个：

```
for (i = length - 1; i > 0; i--)
  {
  j = word.substring(i, i + 1);
  if (j.equals(" "))
  {
    lastWord = word.substring(i + 1);
    System.out.println("Last word: " + lastWord);
    i = -1; //to stop the loop
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T05:33:33.060

[在http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)有一种拆分字符串的方法

```
Splits this string around matches of the given regular expression.

This method works as if by invoking the two-argument split method with the given expression and a limit argument of zero. Trailing empty strings are therefore not included in the resulting array. 
```

一个好的、快速和简单的方法是：

```
word = word.split(" ")[word.length-1]; 
```

*split()*返回一个基于 " " 的子字符串数组。由于数组从 0 开始，所以它的最后一个元素是数组的长度 - 1。

# parallel-processing - Adapteva/Parallela 芯片

> ID：13736057
> 
> 赞同：-1
> 
> 时间：2012-12-06T02:34:41.713
> 
> 标签：parallel-processing, 64-bit, 32bit-64bit

有谁知道这个芯片是32位还是64位？在我决定购买其中一块板进行开发之前，我想知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T20:31:03.903

根据[Adapteva 的微处理器报告](http://www.adapteva.com/wp-content/uploads/2011/06/adapteva_mpr.pdf)(PDF)：

> 该设计还避免了任何类型的内存管理，实现了一个没有任何保护的平面 32 位内存空间

并且

> 该指令集支持访问两个连续的 32 位寄存器的加载和存储双指令，利用从 SRAM 到寄存器文件的 64 位路径。

所以这听起来像是一台 32 位计算机而不是可以执行一些 64 位操作。

# django - /post/113/ 处的 DatabaseError 对于类型字符变化的值太长（10）

> ID：13736059
> 
> 赞同：1
> 
> 时间：2012-12-06T02:34:48.037
> 
> 标签：django, postgresql, heroku

我在 Heroku 上为我的 Django 应用程序使用 postgresql。当我尝试为我的帖子发表评论时，有时会收到此错误（同样，有时并非总是如此）。

尽管出现错误，注释仍被保存，但 save() 后面的所有代码都不会执行。

这个问题只发生在 postgresql 上。在我使用 sqlite 的本地主机上，一切正常。

我不确定这是什么原因。

这就是我的模型的样子

```
class Comment(models.Model):
    post = models.ForeignKey(post)
    date = models.DateTimeField(auto_now_add=True)
    comment = models.TextField()
    comment_user = models.ForeignKey(User) 
```

这就是我的评论模型的样子。那么是不是因为我没有添加 max_length 进行评论？这是回溯

```
DatabaseError at /post/114/
value too long for type character varying(10)
Request Method: POST
Request URL:    http://www.mysite.com/post/114/
Django Version: 1.4.1
Exception Type: DatabaseError
Exception Value:    
value too long for type character varying(10)
Exception Location: /app/.heroku/venv/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py in execute, line 52
Python Executable:  /app/.heroku/venv/bin/python2.7
Python Version: 2.7.2
Python Path:    
['/app',
 '/app/.heroku/venv/bin',
 '/app/.heroku/venv/lib/python2.7/site-packages/pip-1.1-py2.7.egg',
 '/app/.heroku/venv/lib/python2.7/site-packages/distribute-0.6.31-py2.7.egg',
 '/app',
 '/app/.heroku/venv/lib/python27.zip',
 '/app/.heroku/venv/lib/python2.7',
 '/app/.heroku/venv/lib/python2.7/plat-linux2',
 '/app/.heroku/venv/lib/python2.7/lib-tk',
 '/app/.heroku/venv/lib/python2.7/lib-old',
 '/app/.heroku/venv/lib/python2.7/lib-dynload',
 '/usr/local/lib/python2.7',
 '/usr/local/lib/python2.7/plat-linux2',
 '/usr/local/lib/python2.7/lib-tk',
 '/app/.heroku/venv/lib/python2.7/site-packages',
 '/app/.heroku/venv/lib/python2.7/site-packages/PIL']
Server time:    Wed, 5 Dec 2012 20:41:39 -0600 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T04:14:32.083

我无法帮助您处理 Django 部分（抱歉），所以我只会说 PostgreSQL。

在您的应用程序的某处，您有一个`varchar(10)`列，并且您试图将超过 10 个字符的内容放入其中，您可能在某处缺少验证。SQLite 忽略`varchar(n)`列中的大小并将其视为`text`没有大小限制；所以你可以用 SQLite 做这样的事情：

```
sqlite> create table t (s varchar(5));
sqlite> insert into t (s) values ('Where is pancakes house?');
sqlite> select * from t;
s
where is pancakes house? 
```

没有任何抱怨。同样，SQLite 允许您做一些荒谬的事情，例如将字符串放入数字列中。

这是你需要做的：

1.  在 PostgreSQL 上部署时停止在 SQLite 上进行开发。在本地安装 PostgreSQL 并在此基础上进行开发，您甚至应该安装将在 Heroku 使用的相同版本的 PostgreSQL。数据库之间有各种各样的差异会让你头疼，这个小字段大小问题只是你对跨数据库问题的温和介绍。
2.  停止使用`varchar(n)`PostgreSQL，只需使用`text`. 在 PostgreSQL 中使用大小有限的字符串列是没有意义的，除非您有一个必须限制大小的硬性要求。来自[精美手册](http://www.postgresql.org/docs/current/interactive/datatype-character.html)：

    > 短字符串（最多 126 个字节）的存储要求是 1 个字节加上实际字符串，其中包括字符情况下的空格填充。较长的字符串有 4 个字节的开销，而不是 1 个。长字符串由系统自动压缩，因此对磁盘的物理要求可能会更少。[...] 如果您希望存储没有特定上限的长字符串，请使用`text`...
    > 
    > > **提示：**这三种类型之间没有性能差异，除了在使用空白填充类型时增加了存储空间，以及在存储到长度受限的列时需要一些额外的 CPU 周期来检查长度。虽然`character(n)`在其他一些数据库系统中具有性能优势，但在 PostgreSQL 中没有这样的优势；事实上`character(n)`，由于其额外的存储成本，它通常是三者中最慢的。在大多数情况下应该使用`text`or来代替。`character varying`

    因此，除非必须，否则不要打扰传统`char`和PostgreSQL，只需使用.`varchar``text`

3.  开始验证您的传入数据，以确保它不违反您拥有的任何大小或格式限制。

在启动和运行 PostgreSQL 的同时，您可以将列从 切换`varchar(n)`到`text`立即并继续使用 SQLite；两个数据库都对无限长度的字符串感到满意`text`，这个简单的修复将帮助您解决眼前的问题。然后，尽快将您的开发环境切换到 PostgreSQL，这样您就可以在代码投入生产之前发现此类问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T02:50:23.927

原因是 PostgreSQL 实际上会根据字段的大小检查数据的长度，如果太大就会出错，而 SQLite 完全忽略指定的字段大小，MySQL 会默默地截断数据，无法挽回地破坏它。使字段更大。

# c - recv：对等方重置连接

> ID：13736064
> 
> 赞同：2
> 
> 时间：2012-12-06T02:35:20.930
> 
> 标签：c, sockets, recv

当我关闭连接到服务器的客户端时，我从服务器收到此错误并且服务器自行关闭。我知道客户端可以优雅地终止连接，但我打算将其发送给某些人，并且不希望我的服务器仅仅因为他们没有优雅地终止而关闭。那么实际上什么可以阻止服务器关闭呢？我正在使用 sys/socket.h

这是我的代码的一部分

```
int server() {
    //Set up variables
    int sockfd, new_fd;  //Listen on sock_fd, new connection on new_fd
    struct sockaddr_in my_addr;    //My(server) address information
    struct sockaddr_in their_addr; //Connector's address information
    socklen_t sin_size;
    //Generate the socket
    if ((sockfd = socket(AF_INET, SOCK_STREAM, 0)) == -1) {
        perror("socket");
        exit(1);
    }
    //Generate the end point
    my_addr.sin_family = AF_INET;         //Host byte order 
    my_addr.sin_port = htons(MYPORT);     //Short, network byte order 
    my_addr.sin_addr.s_addr = INADDR_ANY; //Auto-fill with my IP 

    if (bind(sockfd, (struct sockaddr *)&my_addr, sizeof(struct sockaddr)) \
    == -1) {
        perror("bind");
        exit(1);
    }

    //Start listnening
    if (listen(sockfd, BACKLOG) == -1) {
        perror("listen");
        exit(1);
    }

    while(TERMINATE == 0) {  // main accept() loop 
        sin_size = sizeof(struct sockaddr_in);
        //Create a new connection for the accepted socket
        if ((new_fd = accept(sockfd, (struct sockaddr *)&their_addr, \
        &sin_size)) == -1) {
            perror("accept");
            continue;
        }
//some semaphore stuff      
    }
    return 0;
}   

int main(int argc, char *argv[]){

//extra stuff

        //Set up mutex locks
        pthread_mutex_init(&mutex, NULL);
        sem_init(&empty, 0, 30);
        sem_init(&full, 0, 0);

        //Set up and run Threads
        pthread_t threads[30]; //Array of threads
        pthread_t server_thread;
        pthread_attr_t attr; //Set of thread attributes

        //Get the default thread attributes
        pthread_attr_init(&attr); 
        signal(SIGINT, termination);//Wait for a SIGINT
        //Loop to create threads and execute consumer_thread
        for (int i = 0; i < 30; i++) {
            //Set up data in structure
            threadArray[i].threadID = i;
            threadArray[i].running = 0;
            threadArray[i].line_counter_pointer = &line_counter;
            threadArray[i].vid_details_pointer = &vid_details;
            pthread_create(&threads[i],&attr,consumer_thread, &threadArray[i]); 
        }
        //Execute the producer_thread   
        pthread_create(&server_thread,&attr,producer_thread, NULL);

        //Wait for all the threads to exit
        for (int i = 0; i < 30; i++) {
            pthread_join(threads[i],NULL);
        }
        //Destroy semaphores so that it can TERMINATE gracefully
        sem_destroy(&empty);
        sem_destroy(&full);
        return 0;
    }
void *producer_thread(void *param) {
    server();//Runs the server() function
    return NULL;
}

    void *consumer_thread(void *param) {
        //Pass variable
        struct thread_params *threadStruct;
        threadStruct = (struct thread_params *) param;
        int *line_counter = threadStruct->line_counter_pointer;
        vid_details_struct *vid_details = threadStruct->vid_details_pointer;
        //End of pass   
        char found_result [MAXDATASIZE];
        int queue_item = 0;
        int numbytes;
        struct timeval item_wait_time;// Get the current time

        while (TERMINATE == 0) { //Main accept() loop
            int new_fd;
            //Use a variable that would be set to 0 after the client termination 
            //so that the current connection will be closed on both thread and 
            //client, that would make thread to go back to idle
            int current_connection = 1;
            //Acquire full semaphore
            sem_wait(&full);
            //Acquire mutex lock to protect buffer
            pthread_mutex_lock(&mutex);
    //some extra stuff including socket information
            //now handling queue[queue_item]
            new_fd = queue[queue_item].new_fd;
            queue[queue_item].waiting = 0;

            //Release mutex lock and empty semaphore
            pthread_mutex_unlock(&mutex);
            sem_post(&empty);   
            while (current_connection == 1) {
                char buf[MAXDATASIZE];
                //Receive the query
                if ((numbytes=recv(new_fd, buf, MAXDATASIZE, 0)) == -1) {
                    perror("recv");
                    exit(1);
                }           

                buf[numbytes] = '\0';//Set the end point of the string
                if (!strcmp(buf,"q")) {//Client prompts to TERMINATE
                    current_connection = 0;//Flag the connection as closed
                }
                if (current_connection == 1) {//If still connected
    //do something
                    if (send(new_fd, found_result, MAXDATASIZE, 0) == -1) {
                        perror("send");
                        close(new_fd);
                        exit(0);
                    }
                }
            }
            close(new_fd); // Close the socket connection
            //Wait for half a second before accepting a new request
            usleep(500000);
        }//End of the main while loop
        FINISHEDSEMS++;
        printf("Thread %d is closing\n", threadStruct->threadID);
        return NULL;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T03:52:25.420

这个 if 语句是您需要查看的：

```
if ((numbytes=recv(new_fd, buf, MAXDATASIZE, 0)) == -1) {
    perror("recv");
    exit(1);
} 
```

这是您发布的唯一具有 的地方`recv`，所以这就是错误。

看一下[手册页](http://linux.die.net/man/2/recv)：成功完成后`recv`返回*消息的长度。如果消息太长而无法放入提供的缓冲区，则可能会丢弃多余的字节，具体取决于接收消息的套接字类型。如果套接字上没有可用的消息，则接收调用等待消息到达，除非套接字是非阻塞的（参见 fcntl(2)），在这种情况下返回值 -1 并设置外部变量 errno*

因此，与其调用`exit`（终止进程），不如尝试优雅地处理错误：

```
if ((numbytes=recv(new_fd, buf, MAXDATASIZE, 0)) < 0) {
    // user disconnected or timeout (if you set a timeout)
    // NO call to exit; use "continue" or "return", or something else
    // to gracefully handle the break;
    my_error_function("client disconnected\n");
    break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:09:40.877

'Connection reset by peer' 有多种原因，但最常见的原因是您写入了已被对等方关闭的连接。换句话说，应用程序协议错误。

# c++ - C++ 浮点数显示

> ID：13736065
> 
> 赞同：1
> 
> 时间：2012-12-06T02:35:24.190
> 
> 标签：c++

> **可能重复：**
> [浮点精度](https://stackoverflow.com/questions/1201051/floating-point-precision)

当我这样做时。`cout<<8.0`它被打印为`8`。如何在 c++ 的输出控制台中打印小数点后的整个零，就像`8.00000000` 我尝试过的那样`cout<<setprecision(5)<<(double)8.0;`仍在打印`8`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:46:34.077

使用`fixed`机械手

```
#include <iostream>
#include <iomanip>

using namespace std;

int main() {
    cout << fixed << setprecision(6) << (double)8 << "\n";
    return 0;
} 
```

[http://ideone.com/ShcNIc](http://ideone.com/ShcNIc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:50:23.363

请参阅[如何使用 cout 以全精度打印双精度值？](https://stackoverflow.com/questions/554063/how-do-i-print-a-double-value-with-full-precision-using-cout)

```
cout.precision(15);
cout << fixed << 8.0; 
```

# c# - 在 WPF 画布上居中或手动定位动态控件

> ID：13736069
> 
> 赞同：0
> 
> 时间：2012-12-06T02:35:43.657
> 
> 标签：c#, wpf, canvas

我正在尝试创建以画布上不同列为中心的标签。这段代码看起来很合理：

```
string[] titles = { "Acorn", "Banana", "Chrysanthemum" };
double col = 20.0;
foreach (string s in titles) 
{
    var lbl = new Label() { Content = s };
    lbl.SetValue(Canvas.LeftProperty, col - (lbl.Width / 2.0));
    myCanvas.Children.Add(lbl);
    col += 150.0;
} 
```

但它不起作用，因为`lbl.Width`(and `lbl.ActualWidth`) 直到渲染才计算，这是在创建标签很久之后。

有没有办法在`Label.Width`布局操作之前获得准确的信息？在`Canvas`Grids 或 StackPanels 中，并不是所有的控件布局和流程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:33:08.390

诀窍是使用 Measure 方法询问组件它想要的大小。如果使用 double.PositiveInfinity 值指定无限可用空间，则可以使用控件的 DesiredSize 属性来获得其理想的、未剪裁的、未流动的大小。

此代码显示了有效的解决方案：

```
 string[] titles = { "Acorn", "Banana", "Chrysanthemum" };
  double col = 20.0;
  foreach (string s in titles) {
    var lbl = new Label() { Content = s };
    lbl.Measure(new Size(double.PositiveInfinity, double.PositiveInfinity));
    lbl.SetValue(Canvas.LeftProperty, col - (lbl.DesiredSize.Width / 2.0));
    myCanvas.Children.Add(lbl);
    col += 150.0;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:42:07.537

您无法在布局通过之前获得宽度...但是您可以尝试将`Label`to `Visibility`of `Hidden`(not `Collapsed`) 设置为，然后附加一个`Loaded`事件，并设置其位置，然后改回可见性？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T02:56:30.010

你有没有尝试过：

```
double pos = Canvas.GetLeft(lbl); 
```

我不确定这在布局通过之前是否有效，但值得一试

# regex - 正则表达式在 WPF 2010 中只允许数字和“-”

> ID：13736071
> 
> 赞同：2
> 
> 时间：2012-12-06T02:36:02.153
> 
> 标签：regex

我写了正则表达式只允许数字。确实`@"[0-9]"`如此，而且效果很好。但我想在正则表达式中添加一个符号“-”。我想允许数字和“-”。怎么做？）我试过这样的面具`@"[0-9]\{-}"` ，但它什么也做不了。

* * *

我最近看到，如果我输入连字符，那么我的程序就不能理解为“连字符”。这就是为什么你的所有面具都不起作用的原因。尽管如此，它们都是正确的。非常感谢你的帮助。现在我将找到如何在 WPF 2010 中将连字符读作“-”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T02:41:00.310

连字符 ( `-`) 不像字符集开头的范围说明符，因此您可以使用正则表达式执行此操作

```
@"[-0-9]" 
```

或者，如果像在大多数正则表达式引擎中一样，WPF 允许在字符集中使用字符集速记，您也可以使用

```
@"[-\d]" 
```

或者，正如提到的其他答案一样，您可以转义将`-`其放入正则表达式中，就像这两个正则表达式中的任何一个一样

```
@"[0-9\-]"
@"[\d\-]" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T02:39:06.333

在这样的范围内转义它：

```
@"[0-9\-] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T02:37:37.990

我不熟悉 WPF 2010，但如果它与大多数其他正则表达式引擎一样，您可以编写：

```
@"[0-9-]" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T02:51:35.350

我假设您正在测试仅包含数字和连字符的电话或传真号码。

你可以`[\d\-]+` [在这里](http://www.regexplanet.com/advanced/java/index.html)试试。注意：要匹配单个数字或连字符删除`+`.

# javascript - 如何使用 D3 创建此数据的堆积面积图？

> ID：13736072
> 
> 赞同：0
> 
> 时间：2012-12-06T02:36:10.167
> 
> 标签：javascript, d3.js

**先发制人的道歉和警告**

我非常抱歉提出一个完全属于“向我展示代码”类别的问题，但我不知所措。此外，“您尝试过什么”的答案将是“我不知道该怎么做”。

**问题**

给定以下数据，如何将以下数据集转换为堆积面积图？

我将通过以下方式获取数据：

```
d3.json('/link/to/data', function(data) {
    ... //how do I convert the data to layers here?
    });
    //set up my axes and such here
); 
```

数据本身已经进行了透视和汇总。第一列将是层键（动词时态），随后的数字是每节经文（在荷马的*奥德赛*中）出现的那个时态动词的出现次数。

如何将每个时态转换为图层？我真的需要总结还是有更好的方法来解决这个问题？

再次，我很抱歉这个问题的基本性质。

这是来自数据库的汇总数据的样子

```
{'tense': 'Present', '1.1':1, '1.2':3, '1.3':3, '1.4':0, '1.5':1} 
```

# iphone - 仅显示/使用 MFMailComposeViewController 中的“To:”字段

> ID：13736077
> 
> 赞同：0
> 
> 时间：2012-12-06T02:36:45.303
> 
> 标签：iphone, ios, ipad

在我的应用程序中，我需要允许用户组装电子邮件的“收件人列表”。就能够选择联系人而言，内置的邮件编辑器正是我想要的。它有一个下拉列表，显示您正在输入的潜在匹配联系人。但是，这不适用于发送电子邮件，因此我不想要 CC、主题和正文控件。

只是控件中的“收件人”字段以某种方式可用吗？如果不编写大量代码，我真的不知道如何做到这一点。

我想我总是可以调出一个邮件编写器，然后再调出另一个视图来覆盖表单的其余部分，但我宁愿只利用 To 字段。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T18:24:08.900

也许这会帮助别人。经过大量搜索后，我没有看到任何仅利用 To: 字段的方法。我最终编写了自己的一组视图控制器来复制操作和行为。我做了以下课程：

*   联系人（名字、姓氏和电子邮件的字符串属性）
*   联系人（创建各种格式的联系人对象的 NSArray 的类方法）
*   ContactFormViewController（类似于邮件编写者的 To: 字段）
*   ContactTableViewController（显示所有联系人的列表，并带有一个scrubber）

在 Contacts 类中，我使用 ABAddressBookRequestAccessWithCompletion 创建了一个 Contact* 对象的 NSArray，并在构造数组时对其进行排序。

然后我有两个视图控制器，就像邮件编写器一样。

在第一个视图控制器上，有一个 UITextField 用于输入电子邮件地址或姓名，一个 UITableView 用于显示与输入字符串匹配的联系人，以及一个 UIScrollView，每次在表中选择联系人时，我都会将 UIButtons 添加到该 UIScrollView 中。UITextView 上的每个 editingChanged 事件都会创建/更新数据源到 UITableView。还有另外两个 UIButton。一个用于将手动输入的电子邮件地址添加到所选联系人列表中（此按钮仅在文本输入与 emiail 正则表达式匹配时可见），另一个按钮是显示 UITableViewController 如果用户宁愿浏览联系人而不是输入联系人并挑选结果。

# c# - 在 Windows 中以 c++ 或 c# 编程方式列出头文件或依赖项

> ID：13736080
> 
> 赞同：0
> 
> 时间：2012-12-06T02:37:14.743
> 
> 标签：c#, c++, windows, visual-studio-2010, header-files

有没有办法在 c++ 程序或 ac# 程序中列出另一个 c++ 文件（dot.h 或 dot.cpp）使用的所有头文件？

我发现了这个问题： [有没有办法以编程方式遍历头文件？](https://stackoverflow.com/questions/10970761/is-there-a-way-to-programmically-traverse-header-files)

它的答案似乎正是我正在寻找的——除了我使用的是 Windows (Visual Studio 2010)。

我希望能够使用类似`gcc -M -MM -MF`选项的东西（获取依赖项列表，或者至少是头文件，最好使用绝对路径）。

另一种方法是解析文件以找到#include 模式，这是相当不确定的。更不用说正确识别文件的额外任务......所以如果有一个工具可以真正做到这一点，那将是非常棒的。

是否有任何 Windows（编程）c++ 或 c# 命令或预处理器命令可以列出程序/文件（头文件或实现）的所有头文件或所有依赖项，因为有时包含指令可能存在于实现文件中也） ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T01:55:27.947

我考虑过 VCCodeModel，但遇到了一些麻烦，所以我最终解析了 c++ 文件——这是一项正在进行的工作，因为我仍在寻找它们的依赖项，而且很难找到绝对路径名仅基于#include 目录。

如果我找到更好的选择，或者有人提出建议，我会改变我的答案。

# php - var_dump 说 bool 但返回一个字符串 -php

> ID：13736085
> 
> 赞同：1
> 
> 时间：2012-12-06T02:37:48.673
> 
> 标签：php, html, string, curl, boolean

我正在尝试使用 curl 检查我的电子邮件。

我有一个连接到 gmail 的功能：

```
function check_email($url)
{ 
    // sendRequest 
    $curl = curl_init();
    curl_setopt($curl, CURLOPT_URL, $url);
    curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 0);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 0);
    $curlData = curl_exec($curl);
    curl_close($curl);

    //returning retrieved message
    return $curlData;
} 
```

当我调用该函数并回显它 ( `$email = check_email($ur); echo $email;`) 时，gmail 会向我发送一些 html 而不是显示消息：

```
<HTML>
<HEAD>
<TITLE>Moved Temporarily</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>Moved Temporarily</H1>
The document has moved <A HREF="-very large url-">here</A>.
</BODY>
</HTML> 
```

所以我想然后提取`"-very large url-"`并卷曲到那个，但是当我`var_dump($email)`说它是一个布尔值时！如果它是布尔值，为什么它会返回 html，我如何通过 php 访问上述 html？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:41:23.873

```
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true); 
```

`curl_exec()`如果您想返回布尔值以外的任何值，则应使用该值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T02:41:45.357

[http://php.net/manual/en/function.curl-exec.php](http://php.net/manual/en/function.curl-exec.php)说

> 成功时返回 TRUE，失败时返回 FALSE。但是，如果设置了 CURLOPT_RETURNTRANSFER 选项，它将在成功时返回结果，在失败时返回 FALSE。

看起来您已`CURLOPT_RETURNTRANSFER`设置为 0（假）。

[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

# c - 为什么克隆系统调用后重新分配死锁？

> ID：13736088
> 
> 赞同：2
> 
> 时间：2012-12-06T02:38:00.750
> 
> 标签：c, clone, deadlock, realloc

我有一个问题，即在 clone() 系统调用之后的某个时间 realloc() 死锁。

我的代码是：

```
#include <sched.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/syscall.h>
#include <sys/types.h>
#include <linux/types.h>
#define CHILD_STACK_SIZE 4096*4
#define gettid() syscall(SYS_gettid)
#define log(str) fprintf(stderr, "[pid:%d tid:%d] "str, getpid(),gettid())

int clone_func(void *arg){
    int *ptr=(int*)malloc(10);
    int i;
    for (i=1; i<200000; i++)
        ptr = realloc(ptr, sizeof(int)*i);
    free(ptr);
    return 0;
}

int main(){
    int flags = 0;
    flags = CLONE_VM;
    log("Program started.\n");
    int *ptr=NULL;
    ptr = malloc(16);
    void *child_stack_start = malloc(CHILD_STACK_SIZE);
    int ret = clone(clone_func, child_stack_start +CHILD_STACK_SIZE, flags, NULL, NULL, NULL, NULL);
    int i;
    for (i=1; i<200000; i++)
        ptr = realloc(ptr, sizeof(int)*i);

    free(ptr);
    return 0;
} 
```

gdb 中的调用栈是：

```
[pid:13268 tid:13268] Program started.
^Z[New LWP 13269]

Program received signal SIGTSTP, Stopped (user).
0x000000000040ba0e in __lll_lock_wait_private ()
(gdb) bt
#0  0x000000000040ba0e in __lll_lock_wait_private ()
#1  0x0000000000408630 in _L_lock_11249 ()
#2  0x000000000040797f in realloc ()
#3  0x0000000000400515 in main () at test-realloc.c:36
(gdb) i thr
  2 LWP 13269  0x000000000040ba0e in __lll_lock_wait_private ()
* 1 LWP 13268  0x000000000040ba0e in __lll_lock_wait_private ()
(gdb) thr 2
[Switching to thread 2 (LWP 13269)]#0  0x000000000040ba0e in __lll_lock_wait_private ()
(gdb) bt
#0  0x000000000040ba0e in __lll_lock_wait_private ()
#1  0x0000000000408630 in _L_lock_11249 ()
#2  0x000000000040797f in realloc ()
#3  0x0000000000400413 in clone_func (arg=0x7fffffffe53c) at test-realloc.c:20
#4  0x000000000040b889 in clone ()
#5  0x0000000000000000 in ?? () 
```

我的操作系统是 debian linux-2.6.32-5-amd64，带有 GNU C 库 (Debian EGLIBC 2.11.3-4) 稳定版本 2.11.3。我深深怀疑 eglibc 是这个 bug 的罪魁祸首。在 clone() 系统调用上，在使用 realloc() 之前还不够吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T03:18:38.923

你不能自己使用`clone`——`CLONE_VM`或者如果你这样做了，你至少必须确保在调用`clone`父级或子级之后限制自己调用标准库中的任何函数。为了让多个线程或进程共享相同的内存，任何访问共享资源（如堆）的函数的实现都需要

1.  请注意，多个控制流可能会访问它，以便他们可以安排执行适当的同步，并且
2.  能够通过线程指针获取有关自己身份的信息，通常存储在一个特殊的机器寄存器中。这完全是内部实现的，因此您无法安排您自己创建的新“线程”`clone`以正确设置线程指针。

正确的解决方案是使用`pthread_create`，而不是`clone`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:44:06.937

你不可以做这个：

```
for (i=0; i<200000; i++)
        ptr = realloc(ptr, sizeof(int)*i);
free(ptr); 
```

第一次通过循环，`i`为零。 `realloc( ptr, 0 )`等于`free( ptr )`，你不能`free`两次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T03:30:05.233

我在 clone() 系统调用中添加了一个标志 CLONE_SETTLS。然后僵局就消失了。所以我认为 eglibc 的 realloc() 使用了一些 TLS 数据。当新线程在没有新 TLS 的情况下创建时，一些锁（在 TLS 中）在这个线程和他的父亲之间共享，而 realloc() 使用这些锁被卡住了。因此，如果有人想直接使用 clone()，最好的方法是将新的 TLS 分配给新线程。

代码片段喜欢这样：

```
flags = CLONE_VM | CLONE_SETTLS;
struct user_desc* p_tls_desc = malloc(sizeof(struct user_desc));
clone(clone_func, child_stack_start +CHILD_STACK_SIZE, flags, NULL, NULL, p_tls_desc, NULL); 
```

# pypy - Hindley Milner 类型推断对 PyPy for RPython 有用吗？

> ID：13736091
> 
> 赞同：4
> 
> 时间：2012-12-06T02:38:58.550
> 
> 标签：pypy, rpython, hindley-milner

PyPy 是否在编译时进行静态类型检查以在编译时捕获类型错误？如果不是，像 HM 类型推断这样的东西是否有助于在编译时捕获这些错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T11:55:47.083

**两个帐户都没有**。（我假设 PyPy 是指具有 JIT 编译器和其他功能的 Python 解释器。）它不会在任何时候对 Python 代码进行静态类型检查，因为它实现了 Python 语言，而不是静态类型的 Python语。事实是，您*无法静态检测 Python 程序中的所有类型错误（对于大多数“类型错误”的定义）。您可以尝试找到一些，但即使*您*可以证明在运行时会发生类型错误，您也不能拒绝执行该程序，因为从其他地方运行该代码并捕获它是完全有效的（有时很有用）例外。

顺便说一句，Damas-Hindley-Milner 推断类型的类型系统甚至不足以表达 Python 程序中“类型”的有用子集（并不是大多数流行的静态类型系统表现更好）。例如，尝试键入`zip`（提示：Haskell 没有它，它有几个专用于 2、3、4 个参数的函数）。或者，如果你想要更难的东西，`getattr`. 然后是整个名义和结构子类型的事情。

已经尝试在 Python 和类似语言中推断类型，但这些方法必然与函数式编程世界在该领域所做的完全不同（见上文）。此外，这些项目永远不会发现*Python程序中的**所有*类型错误（尽管有些项目已经涵盖了大大简化的子集，或者检测到Python 程序中的*一些*错误）。做一些研究（[Lambda the Ultimate](http://lambda-the-ultimate.org/node/1519)有很多链接）。

 **现在，“PyPy”这个名字在历史上也用于[RPython 翻译工具链](http://pypy.readthedocs.org/en/latest/translation.html)，除其他外，它确实可以推断 RPython 程序的静态类型。但是 RPython 不是 Python（它有很多很多的限制，以至于它实际上是一种不同的语言），类型系统和类型推断与 DHM 完全不同（整个程序，基于抽象解释，完全不同类型的系统）。**

# apache - cPanel - 无权下载备份

> ID：13736093
> 
> 赞同：1
> 
> 时间：2012-12-06T02:39:01.140
> 
> 标签：apache, cpanel, filezilla, fileserver

在此先感谢您的帮助，你们太棒了！

以前的 Web 开发人员几个月前将相关站点备份到服务器，此备份的权限为 600。我无法更改权限或下载文件，尽管我仍然可以在文件夹之间移动它。

我读过磁盘空间不足有时是问题所在，但在这种情况下，还剩下 2 GB，所以应该没问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T02:18:50.947

还有另一种方法可以将备份从服务器下载到本地计算机，如果您能够将备份文件移动到文件夹中，然后将其移动到您网站的主目录，例如“/home/user/public_html/backup.zip”，然后浏览它浏览器并下载备份文件。

[http://yourdomain.com/backup.zip](http://yourdomain.com/backup.zip)

它将为您提供下载选项。

# javascript - 在 HtmlUnit 中测试警报

> ID：13736101
> 
> 赞同：0
> 
> 时间：2012-12-06T02:40:21.280
> 
> 标签：javascript, .net, singleton, alert, htmlunit

我从这个页面上的示例“监视'警报'”中了解了这个示例：[HtmlUnit-Javascript Tutorial](http://htmlunit.sourceforge.net/javascript-howto.html)。作为 .NET 的初学者，我不明白 Collections.singletonList 是如何工作的，我通过 www 浏览它是 Java 中的一个函数。我正在尝试将此与验证相结合，当用户输入无效时会弹出一个警报框。作为开始，我确实先写了这个：

`Dim alert As AlertHandler` `webCLient.setAlertHandler(alert)` `webCLient.getAlertHandler().handleAlert(page, "")`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T02:36:11.797

发现要使用 singletonList，我必须完全放入 java.util.Collections.singletonList 才能使其在 .NET 中工作

# c++ - C++ 不匹配 'money << score' 中的 'operator<<'

> ID：13736104
> 
> 赞同：-1
> 
> 时间：2012-12-06T02:41:00.373
> 
> 标签：c++, linux, compiler-errors, fstream

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:28:37.663

`money`是一个文件内流。关于它唯一有效的运算符在它`>>`的右侧。所以`money >> score，你可以将其解读为流入变量 score 的钱。您的代码也充满了其他错误。

如果您收到“无匹配”类型编译器错误，则问题是基于类型的。在一个小文件中使用相同类型的变量重新创建该行——它们的内容无关紧要，只是它们的类型。（初始化它们以避免警告）。如果您调用的函数不是您自己的，那么您只需要函数签名即可。（链接器错误是另一回事）。

发布 100 多行代码的用处不大。

# c++ - 我的自定义内存分配器是否有隐患

> ID：13736105
> 
> 赞同：1
> 
> 时间：2012-12-06T02:41:11.357
> 
> 标签：c++, memory, memory-management, game-engine, allocator

最近在写自定义内存分配器，详细看这篇文章自定义内存分配器[..](https://stackoverflow.com/q/13705427/1875598)

感谢[David Hammen](https://stackoverflow.com/a/13705994/1875598)的回答，现在我可以正确释放多态对象的内存了。然后好像可以用**MYNEW**宏来分配内存和构造对象，用**MYDEL**宏来销毁对象和释放内存，也可以做内存跟踪。

但不确定是否可以在复杂的项目环境中使用（例如：复杂的多继承设计..），是否存在隐患？

注意：我不是问如何做内存管理器，如何重载operator new/delete(global or for class)，我只是想知道这个方法在实际项目开发中是否存在问题。感谢您的任何回答。

# php - php：我的正则表达式无法验证简单的短语？

> ID：13736109
> 
> 赞同：0
> 
> 时间：2012-12-06T02:41:35.677
> 
> 标签：php, regex, php4

所以我写了这个函数：

```
function validate_text($text,$min,$max,$include_spaces=true)
{
    $match = array();
    $regex = ($include_spaces)?"/[a-zA-Z0-9 .\-_]":"/[a-zA-Z0-9.\-_]";
    if($max<=0)
    {
        $regex = sprintf($regex."{%d,}/",$min);
    }
    else
    {
        $regex = sprintf($regex."{%d,%d}/",$min,$max);
    }
    if($include_spaces)
    {
        preg_match($regex,$text,$match);
    }
    else
    {
        preg_match($regex,$text,$match);
    }
    return (implode($match)==$text);
} 
```

并这样使用它：

```
 (validate_text($_POST['prod_name'],10,100,true) 
```

而且我无法验证简单的标题“cbkirby 绘画”我只需要它来确保不会出现在产品标题中不会出现的古怪字符（如分号或引号“”等） t进入mysql.我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:30:53.650

我不确定你为什么要做这一切，当你可以说“如果这个模式匹配”并在两端锚定模式时。 `preg_match`已经告诉你模式是否匹配；您所要做的就是告诉它尝试匹配*整个字符串*。:)

```
function validate_text($text,$min,$max,$include_spaces=true)
{
    $chars = ($include_spaces) ? "[a-zA-Z0-9 .\-_]" : "[a-zA-Z0-9.\-_]";
    if ($max <= 0) $max = '';
    $regex = "/^{$chars}{{$min},{$max}}$/";
    return !!preg_match($regex, $text);
} 
```

至于您的原始功能，尽管它可能是冗长的，但它似乎有效。您可能想`var_dump($_POST['prod_name'])`确保它是您认为的那样。（请记住，如果`prod_name`是在查询字符串中，你会在`$_GET`而不是找到它`$_POST`。）

* * *

现在……*至于目标*……

如果您这样做是为了将“坏”字符排除在 SQL 之外，那就有点误导了。例如，完全可以想象名称中包含撇号。当我花时间输入一堆数据并且我收到一些“对不起，您的数据无效”消息时，我很少对网站感到恼火，即使它是正确的。:P “这个常见且完全合法的字符无效”在我看来就像“我们的网站没有正确处理数据”。

就个人而言，除非我有充分的商业理由来限制数据，否则我*不会*。保持 SQL 干净不是商业原因，因为保持安全并不难......

```
$db = new mysqli('localhost', 'dbusername', 'dbpassword', 'dbname');
$stmt = $db->prepare("
    INSERT INTO products (prod_title, other_stuff)
    VALUES (?, ?)
");
$stmt->bind_param('ss', $_POST['prod_title'], $_POST['other_stuff']);
$stmt->execute(); 
```

在这一点上，我什至不必关心`prod_title`和`other_stuff`包含什么。当您以这种方式使用占位符和绑定参数时，mysqli 将 SQL 和数据分开，因此不可能*破坏东西。里面的任何东西都可以很好地进入数据库。您可以对更新和删除执行几乎相同的操作，而选择查询则略有不同。

^(* 在一些非常晦涩的情况下，可能会中断。但是你基本上必须有一个非常糟糕的环境的完美风暴，包括古代版本的 MySQL 和中国以外没有人使用的字符集。)

# c++ - 为什么在动态分配的数组中初始长度不能为 1？

> ID：13736111
> 
> 赞同：0
> 
> 时间：2012-12-06T02:41:45.630
> 
> 标签：c++, arrays, visual-studio-2010, dynamic-memory-allocation

假设我们从以下开始：

```
int *newArray = new int[1]; 
```

然后有类似的东西：

```
ifstream inputFile("File.txt");

Counter=0;

while (inputFile >> newValue)
{
    newArray[Counter] = newValue;
    Counter++
} 
```

如果我尝试从文本文件中提取 100 行，程序最终会崩溃。但是，如果我使用过

```
int *newArray = new int[100]; 
```

最初，它不会崩溃。

如果是动态分配内存，为什么需要大于1的初始值？这对我来说毫无意义。必须定义任何超出诸如 1 或 10 之类的小数的初始长度会破坏动态内存分配的全部目的......

编辑：这是给学校的，我们还不能使用向量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T02:48:34.683

该语言不会为您“动态分配内存”。您有责任分配和重新分配您的数组，以便它们的大小足以满足您的目的。

C++ 中“动态分配”的概念并不意味着内存会以某种方式自动为您分配。在这种情况下，“动态”一词仅表示新对象的参数和生命周期是在运行时（而不是编译时）确定的。动态内存分配的主要目的是：1）手动控制对象的生命周期，2）在运行时指定数组大小，3）在运行时指定对象类型。

第二点是什么允许你这样做

```
int n = ...; // <- some run-time value
int *array = new int[n]; 
```

这对于非动态分配的数组是不可能的。

在您的示例中，如果最初的大小为 1，您可以分配一个数组。没什么不好的。但是您仍然有责任分配一个新的、更大的数组，将数据复制到新数组中，并在您的数组中需要更多空间时释放旧数组。

为了避免所有这些麻烦，您应该简单地使用库提供的可调整大小的容器，例如`std::vector`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T02:48:27.713

它不是动态的，因为它可以动态调整自身大小。它是动态的，因为它的大小可以在运行时而不是编译时动态选择。C++ 的主要理念之一是你不用为你不使用的东西付费。如果动态数组按您要求的方式工作，那将需要边界检查，这是我不需要的，所以我不想为此付费。

不管怎样，这个问题用标准库解决了。

```
std::vector<int> vec;
...
while (inputFile >> newValue)
{
    vec.push_back(newValue);
} 
```

那不是更好吗？您甚至不必跟踪大小，因为 vector 会为您跟踪它。

如果你不能使用矢量，那么你有很多工作要做。原理基本上是这样的。您保留 2 个额外的整数变量。一个表示您在数组中使用的值的数量，另一个表示您的数组的当前容量。当你的空间用完时，你会分配更多的空间。例如，这是一个穷人的非异常安全版本的向量：

```
int size = 0;
int capacity = 1;
int array = new int[capacity];

while (inputFile >> newValue)
{
    if (size == capacity)
    {
        capacity *= 2;
        int * newArray = new int[capacity];
        for (int i=0; i<size; ++i)
            newArray[i] = array[i];
        delete [] array;
        array = newArray;
    }
    array[size++] = newValue;    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T02:47:06.427

您只是为一个创建空间，`int`但尝试存储多个，当然它会崩溃。即使您使用大小 100 创建它，当您尝试保存第 101 个值时它仍然会崩溃。

如果您需要自动调整大小的容器，请查看`std::vector`.

```
#include <vector>

std::vector<int> data;

while (inputFile >> newValue)
{
    data.push_back(newValue);
} 
```

这将一直有效，直到您的进程内存不足。

# python - 如何在 Python 中使用范围 n 从 Zipf Distribution 创建值？

> ID：13736115
> 
> 赞同：0
> 
> 时间：2012-12-06T02:42:44.553
> 
> 标签：python, numpy, distribution

我想创建一个范围为 [0, 1000] 的 Zipf 分布式值数组。

我正在使用[numpy.random.zipf](http://docs.scipy.org/doc/numpy/reference/generated/numpy.random.zipf.html)创建值，但我无法在我想要的范围内创建它们。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T03:25:04.503

归一化并乘以 1000 ？

```
a=2
s = np.random.zipf(a, 1000)
result = (s/float(max(s)))*1000

print min(s), max(s)
print min(result), max(result) 
```

尽管 zipf 的重点不是值的范围是生成值数量的函数吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-18T20:31:47.217

我同意最初的答案（Felix），将 Zipf 值强制到特定范围是一件非常不寻常的事情，这可能意味着你做错了什么。

话虽如此，我实际上遇到了类似的问题，我确实需要生成符合特定标准的 Zipf 值。就我而言，我想生成一组与现有数据集相似的全新数据集。我希望总和与现有分布相同，但值不同。

我的见解是，可以多次重新生成这些值，直到你得到你喜欢的值。

```
#Generate a quantity of Zipf-distributed values close to a desired sum 
def gen_zipf_values(alpha, sum, quantity):
    best = []
    best_sum = 0
    for _ in range(10):
        s = np.random.zipf(alpha,quantity)
        this_sum = s.sum()
        if (this_sum > best_sum) and (this_sum <= sum):
            best = s
            best_sum=this_sum
    return best 
```

同样，这个解决方案是针对我的问题量身定制的，我想在不重复的情况下生成接近总和的值。我也非常清楚我希望 alpha 每次都出现在什么地方。为了清楚起见，我省略了一些条件检查、排序等。

但是，如果您必须执行多次（即您必须运行 for 循环 100 万次才能获得您的分布），您可能有问题（例如 alpha，或对值的不切实际的期望）。我觉得“让计算机完成工作”或从几个合理的选项中挑选最佳选项是有效的。

# c++ - 如何使用 operator== 强制编译器警告？

> ID：13736118
> 
> 赞同：3
> 
> 时间：2012-12-06T02:42:57.367
> 
> 标签：c++, objective-c, operator-overloading, compiler-warnings, objective-c++

[这是我之前的问题](https://stackoverflow.com/questions/13731097/how-to-find-inadvertent-object-pointer-comparisons)的后续。

我有一堆像这样的Objective-C代码：

```
typedef long DataKey;

DataKey x;
DataKey y;

if (x == y) {
    // do stuff
} 
```

我现在需要更改`DataKey`为对象而不是`long`. 如果我创建类并进行大量全局搜索和替换，我的代码现在有点像这样：

```
@interface DataKey : NSObject

DataKey *x;
DataKey *y;

if (x == y) { // uh-oh - this is now bad, I need isEqual: here
} 
```

由于没有编译器警告来检测使用`==`带有两个对象指针的运算符，我正在寻找另一种解决方案。

一种想法是使用 C++ 类并`==`以编译器会抱怨的方式重载运算符。

我对 C++ 的了解几乎不如 Objective-C。我已经能够编写 C++ 类，现在我的代码实际上会导致`operator==`方法被调用。现在我需要帮助想出一种调整代码的方法，以便我收到编译器警告。

这是 C++ 类：

```
class DataId {
public:
    DataId();

    bool operator==(const DataId &other);
}; 
```

现在我有一些像这样的 Objective-C++ 代码：

```
DataId x;
DataId y;

if (x == y) { // I need a compiler warning/error here
} 
```

是否有一个语法技巧可以引起`if`语句上的编译错误/警告。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T02:49:03.720

您是否尝试过根本不定义一个`operator==`？我不认为`operator==`C++ 类是隐含的。因此，如果您不定义`operator==`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T02:49:11.637

只是将`operator==`undefined 和 private 设置为会触发错误。但是，如果您想比较 2 个对象，我不明白您为什么不根据`operator==`需要定义它。

```
bool operator==(const DataId &other){
    return IsEqual(other);//is this the function you want to compare with?
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-06T02:46:52.390

~~如果您有权访问 C++11，则可以使用 static_assert：~~

 ~~```
class DataId {
    // ...

    bool operator==(const DataId& other)
    {
        static_assert(false, "enter error message here.");
        return true;
    }
}; 
```~~  ~~根本不定义 operator == ，编译器将在使用时出错并失败。~~

# datetime - Twitter 的网站如何计算推文发布的时长？

> ID：13736120
> 
> 赞同：0
> 
> 时间：2012-12-06T02:43:05.363
> 
> 标签：datetime, twitter, date-arithmetic

这是我的 twitter 提要的屏幕截图（截至目前，当我写这个问题时）。

![在此处输入图像描述](../Images/0a3ca8e852d10ab6f4bb2e45066d0d91.png)

请注意时间与**我**的关系，现在？（那些时间*差异*是正确的，顺便说一句）

他们是怎么计算的？

我问的原因是，我现在在澳大利亚墨尔本。当我远程桌面到美国的服务器时，登录到 twitter（使用相同的帐户）.. 我得到相同的结果！

起初，我以为他们是根据我的时区帐户设置来计算的（顺便说一句，设置为 +10 GMT）

![在此处输入图像描述](../Images/6c13f67dfd7b658c4c6375729c2a9abd.png)

但如果是这样的话，当我远程桌面到服务器（位于加利福尼亚州圣弗兰）时，它应该在那个 RD 终端上显示不同的结果，对吧？

那么他们是如何编码的呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T02:49:26.360

Twitter 很可能以 UTC 格式存储它发布的日期，它知道现在的 UTC 时间（在您的机器和服务器上）。

鉴于这些日期时间被转换为相同的时区 (UTC)，只需计算两个时间之间的差异即可。

Stack Exchange 站点为您看到的所有活动标记时间也是一样的。

只要您能够将日期时间的任何表示形式转换为 UTC（几乎所有现有的 API 都有），就可以计算该值，因为 Twitter 会将 UTC 时间向下推到客户端，然后客户端进行数学运算（或在服务器上执行并将差异传递下来）；您看到的 UTC 偏移设置是向您显示*绝对*时间并且您希望它们相对于您的时区。

# java - 使用Gson解析Json数组和无名对象

> ID：13736122
> 
> 赞同：9
> 
> 时间：2012-12-06T02:43:13.780
> 
> 标签：java, android, json, gson

我知道有很多带有 GSON 问题的 JSON，但没有一个与我直接相关。我的 JSON 格式不同。

我有一个我想使用 GSON 解析的 JSON 数据，如下所示：

```
[
   {
    "foo":"1",
    "bar":[ { "_id":"bar1"} ],
    "too":["mall", "park"]
   }
] 
```

我有模型类：

**ItemArray 类**

```
public class ItemArray
{
   List<Item> itemArray;

   //Get set here
} 
```

**物品等级**

```
public class Item
{
   String foo;
   List<Bar> bar;
   List<String> too;

   //Get set here
} 
```

**酒吧班**

```
public class Bar
{
   String id;

   //Get set here
} 
```

这是问题。JSON 格式是否正确？如果是这样，模型类的格式是否正确？

如果没有，请把我推向正确的方向。先感谢您！

PS。如果需要，我可以修改 JSON 数据格式。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T02:52:48.360

根据您的 json，您应该简单地拥有：

```
public class ItemArray extends List<Item> {
} 
```

如果你想保留你的 java 类并改变你的 json 它应该是：

```
{
 itemArray: [
     {
      "foo":"1",
      "bar":[ { "_id":"bar1"} ],
      "too":["mall", "park"]
     }
  ]
} 
```

哦，Bar 的 id 和 _id 不匹配：

```
public class Bar
{
   String _id;

   //Get set here
} 
```

您还可以在 Json 反序列化期间使用注释来更改字段的名称。

最后但并非最不重要的一点是，考虑更好地键入您的值。如果不是，不要将任何数据视为字符串，您将不会在 java 代码中进行大量处理来转换事物。例如 ：

```
"foo" : 1, 
```

并将 foo 视为 int 数据成员，而不是 String。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-04-28T05:10:18.360

有时我们会收到`JsonArray [ {..} , {..} ]`回复（没有`'itemArray'`您的名字）在这种情况下，您可以使用以下代码

```
Type fooType = new TypeToken<ArrayList<Item>>() {}.getType();
List<Item> array = new Gson().fromJson(response, fooType); 
```

查找有关此[官方文档的更多信息 - Gson Array-Examples](https://sites.google.com/site/gson/gson-user-guide#TOC-Array-Examples)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-19T05:19:31.500

如果你`JsonArray`喜欢`[ {..} , {..} ]`，你可以用 Gson 做到这一点：

```
Item[] items = gson.fromJson(json, Item[].class); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T04:06:34.063

要检查 Json 是否有效，请使用此工具[http://jsonlint.com/](http://jsonlint.com/)

```
Class Bar(
   private String _id;
   //create getter/setters
{

public class Item
{
   String foo;
   List<Bar> bar;
   List<String> too;

   //Get set here
}
//this is also fine
public class ItemList
{
   List<Item> itemArray;

   //Get set here
} 
```

您将项目列表命名为“itemArray”，但在您的 json 中，您没有将相应的项目数组命名为“itemArray”。所以让它成为itemArray，问题不在你的json中，它是有效的。问题在于它对 Gson 的表示，json 的 Gson 映射键在具有相同名称的对象（即 Java POJO）的变量上。如果您的列表名称是 Class 是

```
List<Item> itemArray; 
```

那么对应的json数组名也应该是itemArray，看看吹

```
{
 itemArray: [
     {
      "foo":"1",
      "bar":[ { "_id":"bar1"} ],
      "too":["mall", "park"]
     }
  ]
} 
```

所以你可以像这样将json转换成对象

```
 Reader reader = new InputStreamReader(IOUtils.toInputStream(json_string));
 ItemList itemList = json.toObject(reader, ItemList.class); 
```

查看打击参考以获取更多详细信息 [https://stackoverflow.com/questions/13625206/how-to-parse-the-result-in-java/13625567#13625567](https://stackoverflow.com/questions/13625206/how-to-parse-the-result-in-java/13625567#13625567)

# flash - 在 Flash Builder 调试器变量视图中显示对象的自定义值

> ID：13736126
> 
> 赞同：2
> 
> 时间：2012-12-06T02:43:30.387
> 
> 标签：flash, debugging, flash-builder

有没有办法在 flash builder 调试器的变量视图中显示对象值的自定义文本？

字符串和数字显示其值，但其他对象显示类名和 [可能] 内存位置。该值列是我想知道可以显示不同内容的列。

![Flash Builder 的变量视图](../Images/6f425fe0d79968d9a6e94c4590c8ed7c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T01:11:22.673

似乎目前没有办法修改显示的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T07:10:42.847

我建议编写一个 toString() 方法，然后打开 Expressions 视图并输入变量名，调用 toString()。在您的情况下，它将是 questMDO.toString()。这应该输出您想要的任何值，如方法中定义的那样。可以肯定的是，在“变量”视图中是不可能的。

# mpi - 使用 MPI_File_open 时出现分段错误

> ID：13736136
> 
> 赞同：2
> 
> 时间：2012-12-06T02:44:48.257
> 
> 标签：mpi, mpi-io

我正在尝试从文件中读取 MPI 应用程序。集群有 4 个节点，每个节点有 12 个核心。我已经尝试运行一个基本程序来计算排名并且它有效。当我添加 MPI_File_open 时，它会在运行时引发异常

> 您的一个应用程序进程的错误终止 = 退出代码：139

集群已安装 MPICH2 并具有网络文件系统。我使用不同的参数检查 MPI_File_open，例如 ReadOnly 模式、MPI_COMM_WORLD 等。

我可以将 MPI_File_open 与网络文件系统一起使用吗？

```
int main(int argc, char* argv[])
{
    int myrank          = 0;
    int nprocs          = 0;
    int i               = 0;
    MPI_Comm    icomm   = MPI_COMM_WORLD;
    MPI_Status  status;

    MPI_Info    info;
    MPI_File    *fh     = NULL;

    int         error       = 0;

    MPI_Init(&argc, &argv);
    MPI_Barrier(MPI_COMM_WORLD);        // Wait for all processor to start

    MPI_Comm_size(MPI_COMM_WORLD, &nprocs); // Get number of processes
    MPI_Comm_rank(MPI_COMM_WORLD, &myrank); // Get own rank

    usleep(myrank*100000);
    if ( myrank == 1 || myrank == 0 )
        printf("Hello from %d\r\n", myrank);

    if (myrank == 0)
    {
        error = MPI_File_open( MPI_COMM_SELF, "lw1.wei", MPI_MODE_UNIQUE_OPEN,
                               MPI_INFO_NULL, fh);
        if ( error )
        {
            printf("Error in opening file\r\n");
        }
        else
        {
            printf("File successfully opened\r\n");
        }
        MPI_File_close(fh);
    }

    MPI_Barrier(MPI_COMM_WORLD);        //! Wait for all the processors to end
    MPI_Finalize();

    if ( myrank == 0 )
    {
        printf("Number of Processes %d\n\r", nprocs);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T03:54:19.977

`MPI_File`您在打开文件之前忘记分配对象。您可以更改此行：

```
MPI_File    *fh     = NULL; 
```

进入：

```
MPI_File     fh; 
```

并通过`fh`将 的地址提供给 来打开文件`MPI_File_open(..., &fh)`。或者您可以简单地使用`malloc()`.

```
MPI_File    *fh      = malloc(sizeof(MPI_File)); 
```

# php - PHP - 参数默认值

> ID：13736139
> 
> 赞同：0
> 
> 时间：2012-12-06T02:45:09.417
> 
> 标签：php, parameters, default

我有一个带有多个参数的函数。有时用户可能需要指定第一个、第二个和第四个，而不是第三个。在 JavaScript 中，我们可以使用匿名对象作为整个函数的单个参数轻松地做到这一点：

```
function foo(args) {
    if(args.arg0 != null) alert(args.arg0);
    if(args.arg1 != null) alert(args.arg2);
    if(args.arg2 != null) alert(args.arg1);
}

foo({
   arg0: 'foo',
   arg2: 10
}); 
```

如果我想在 PHP 中这样做，我可以使用关联数组在上面的函数中扮演与这个匿名对象“args”相同的角色：

```
foo(array(
   'arg0' => 'foo',
   'arg2' => 10
)); 
```

使用多个参数是不可能的，因为一个可能不会写：

```
foo('foo', , 10); 
```

出于某种原因，我发现为此使用数组很脏，并且想知道是否没有“更清洁”的方式。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-06T03:02:44.233

我同意其他评论者所说的数组是一个很好的解决方案。但是，如果您仍然想要一种不同的方式来处理这个检查[func_get_args()](http://php.net/manual/en/function.func-get-args.php)

# java - 如何为自定义 tablemodel 设置 RowSorter？

> ID：13736141
> 
> 赞同：1
> 
> 时间：2012-12-06T02:45:30.510
> 
> 标签：java, swing, jtable, tablemodel, tablerowsorter

我已经定义了一个自定义表格模型，如下所示

```
 class TModel extends AbstractTableModel {

  Object col[] = null;
  Object[][] data = null;

  public void setCollen(Object[] col) {
    this.col = col;
  }

  public void setObj(Object[][] oo) {
    this.data = oo;
  }

  public int getColumnCount() {
    return col.length;
  }

  public int getRowCount() {
    return data.length;
  }

  public Object getValueAt(int row, int col) {
    return data[row][col];
  }

  public String getColumnName(int column) {
    return (String) col[column];
  }

  public boolean isCellEditable(int row, int col) {
    return false;
  }

  public void setValueAt(Object aValue, int row, int column) {
    data[row][column] = aValue;
  }

  public void clear() {
    data = null;
  }
} 
```

我定义了一个这样的表

```
TModel tableModel = new TModel();
JTable table = new JTable(tableModel); 
```

现在我想使用该方法`table.setRowSorter()`对表的数据进行排序。

我试着写这样的代码

```
 table.setRowSorter(new TableRowSorter(tableModel)); 
```

显然这是错误的。

请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:57:58.997

1.  你`AbstractTableModel`错了，没有完成，缺少重要的通知 fe `fireTableCellUpdated(row, col);`in `setValueAt`, ei ....

2.  [正确排序](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)以[覆盖`ColumnClass`](https://stackoverflow.com/questions/6232432/sorting-rows-by-columns-in-jtable/6233119#6233119)

3.  对于基本的排序功能，您只能`table.setAutoCreateRowSorter(true)`定义

4.  阅读[有关排序和过滤的 Oracles 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)

5.  我建议使用`DefaultTableModel`，对于基于`Object[][]`or的数据结构`Vector<Vector>`，不需要覆盖所有通知程序都已实现且正确

6.  [代码示例](https://stackoverflow.com/questions/6937694/jtable-sorting-based-on-hidden-column/6938025#6938025)

# c# - “日期时间”类型中不存在属性或字段“月份”

> ID：13736149
> 
> 赞同：0
> 
> 时间：2012-12-06T02:46:51.080
> 
> 标签：c#, datetime

这是我的代码：

```
DateTime Tgl = Convert.ToDateTime(tgl.Text);
string SPKID = LibPNP.SPKID(r.Pers, "", "PO", Tgl.Month, Tgl.Year); 
```

我得到这个错误：

> *类型中不存在属性或字段“月” `DateTime`？*

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:13:17.340

在这里，您发布的一切都很好。可能您的代码混合有错字，`Tgl`并且`tgl`：

你有：

```
DateTime Tgl = ... //Tgl is DateTime 
```

还有一些

```
tgl.Text //tgl (in lower case) some TextBox probably 
```

我认为在你的代码中你有

```
//tgl - some TextBox, surely has no Month property
string SPKID = LibPNP.SPKID(r.Pers, "", "PO", tgl.Month, tgl.Year); 
```

虽然它必须是

```
//Tgl - a DateTime
string SPKID = LibPNP.SPKID(r.Pers, "", "PO", Tgl.Month, Tgl.Year); 
```

* * *

# c# - 如何实现我自己的外部类型？

> ID：13736156
> 
> 赞同：12
> 
> 时间：2012-12-06T02:47:47.063
> 
> 标签：c#, .net-3.5, refactoring, extern, automated-refactoring

在我们的产品中，我们有称为“服务”的东西，它们是产品不同部分之间（尤其是语言之间——一种内部语言、C、Python 和 .NET）之间通信的基本手段。

目前，代码是这样的（`Services.Execute`利用`params object[] args`）：

```
myString = (string)Services.Execute("service_name", arg1, arg2, ...); 
```

我宁愿能够编写这样的代码并获得类型检查和更少冗长代码的好处：

```
myString = ServiceName(arg1, arg2, ...); 
```

这可以通过一个简单的函数来实现，

```
public static string ServiceName(int arg1, Entity arg2, ...)
{
    return (string)Services.Execute("service_name", arg1, arg2, ...);
} 
```

但这相当冗长，并且在为大量服务执行此操作时并不那么容易管理，正如我打算做的那样。

看看如何`extern`和`DllImportAttribute`工作，我希望应该可以通过以下方式将其连接起来：

```
[ServiceImport("service_name")]
public static extern string ServiceName(int arg1, Entity arg2, ...); 
```

但我根本不知道如何实现这一点，似乎也找不到任何文档（`extern`似乎是一个定义相当模糊的问题）。我发现的最接近的是一个有点相关的问题，[如何在 .NET 中为外部方法提供自定义实现？](https://stackoverflow.com/questions/7245507/how-to-provide-custom-implementation-for-extern-methods-in-net)无论如何，这并没有真正回答我的问题，并且有所不同。C# 语言规范（特别是在 4.0 版中，第 10.6.7 节，*外部方法*）没有帮助。

所以，我想提供外部方法的自定义实现；这可以实现吗？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T14:57:46.233

C# *extern*关键字做的很少，它只是告诉编译器方法声明不会有主体。编译器会进行最低限度的检查，它坚持你也提供一个属性，任何事情都会发生。所以这个示例代码将编译得很好：

```
 class Program {
        static void Main(string[] args) {
            foo();
        }

        class FooBar : Attribute { }

        [FooBar]
        static extern void foo();
    } 
```

但它当然不会运行，jitter 在声明中举手。这是实际运行此代码所需要的，抖动的工作是为此生成适当的可执行代码。需要的是抖动*识别*属性。

您可以在[SSCLI20 发行版](http://www.microsoft.com/en-us/download/details.aspx?id=4917)中的抖动源代码、clr/src/md/compiler/custattr.cpp 源代码文件、RegMeta::_HandleKnownCustomAttribute() 函数中看到这一点。这是对 .NET 2.0 准确的代码，我不知道对它的添加会影响方法调用。您将看到它处理以下与方法调用的代码生成相关的属性，这些属性将使用*extern*关键字：

*   [DllImport]，你肯定知道

*   [MethodImpl(MethodImplOptions.InternalCall)]，用于在 CLR 而不是框架中实现的方法的属性。它们是用 C++ 编写的，CLR 有一个链接到 C++ 函数的内部表。一个典型的例子是 Math.Pow() 方法，我在[这个答案](https://stackoverflow.com/a/8870593/17034)中描述了实现细节。该表不可扩展，它是在 CLR 源代码中硬烘焙的

*   [ComImport]，一个将接口标记为在其他地方实现的属性，总是在 COM 服务器中实现。您很少直接对该属性进行编程，而是使用由 Tlbimp.exe 生成的互操作库。此属性还需要 [Guid] 属性来提供接口所需的 guid。这在其他方面类似于 [DllImport] 属性，它生成一种对非托管代码的 pinvoke 调用，但使用 COM 调用约定。当然，这只有在您的机器上确实有所需的 COM 服务器时才能正常工作，否则它是无限可扩展的。

在此函数中识别出更多属性，但它们与调用其他地方定义的代码无关。

因此，除非您编写自己的抖动，否则使用*extern*不是获得所需内容的可行方法。如果你想继续这个，你可以考虑 Mono 项目。

纯托管的常见可扩展性解决方案是大部分被遗忘的 System.AddIn 命名空间、非常流行的 MEF 框架和 Postsharp 等 AOP 解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T13:59:58.193

我最近需要做一些非常相似的事情（中继方法调用）。我最终生成了一种在运行时动态转发方法调用的类型。

对于您的用例，实现看起来像这样。首先创建一个描述您的服务的接口。您将在您想要在代码中调用服务的任何地方使用此接口。

```
public interface IMyService
{
    [ServiceImport("service_name")]
    string ServiceName(int arg1, string arg2);
} 
```

然后运行代码生成一个动态实现这个接口的类。

```
// Get handle to the method that is going to be called.
MethodInfo executeMethod = typeof(Services).GetMethod("Execute");

// Create assembly, module and a type (class) in it.
AssemblyName assemblyName = new AssemblyName("MyAssembly");
AssemblyBuilder assemblyBuilder = AppDomain.CurrentDomain.DefineDynamicAssembly(assemblyName, AssemblyBuilderAccess.Run, (IEnumerable<CustomAttributeBuilder>)null);
ModuleBuilder moduleBuilder = assemblyBuilder.DefineDynamicModule("MyModule");
TypeBuilder typeBuilder = moduleBuilder.DefineType("MyClass", TypeAttributes.Class | TypeAttributes.Public, typeof(object), new Type[] { typeof(IMyService) });
typeBuilder.DefineDefaultConstructor(MethodAttributes.Public);

// Implement each interface method.
foreach (MethodInfo method in typeof(IMyService).GetMethods())
{
    ServiceImportAttribute attr = method
        .GetCustomAttributes(typeof(ServiceImportAttribute), false)
        .Cast<ServiceImportAttribute>()
        .SingleOrDefault();

    var parameters = method.GetParameters();

    if (attr == null)
    {
        throw new ArgumentException(string.Format("Method {0} on interface IMyService does not define ServiceImport attribute."));
    }
    else
    {
        // There is ServiceImport attribute defined on the method.
        // Implement the method.
        MethodBuilder methodBuilder = typeBuilder.DefineMethod(
            method.Name,
            MethodAttributes.Public | MethodAttributes.Virtual,
            CallingConventions.HasThis,
            method.ReturnType,
            parameters.Select(p => p.ParameterType).ToArray());

        // Generate the method body.
        ILGenerator methodGenerator = methodBuilder.GetILGenerator();

        LocalBuilder paramsLocal = methodGenerator.DeclareLocal(typeof(object[])); // Create the local variable for the params array.
        methodGenerator.Emit(OpCodes.Ldc_I4, parameters.Length); // Amount of elements in the params array.
        methodGenerator.Emit(OpCodes.Newarr, typeof(object)); // Create the new array.
        methodGenerator.Emit(OpCodes.Stloc, paramsLocal); // Store the array in the local variable.

        // Copy method parameters to the params array.
        for (int i = 0; i < parameters.Length; i++)
        {
            methodGenerator.Emit(OpCodes.Ldloc, paramsLocal); // Load the params local variable.
            methodGenerator.Emit(OpCodes.Ldc_I4, i); // Value will be saved in the index i.
            methodGenerator.Emit(OpCodes.Ldarg, (short)(i + 1)); // Load value of the (i + 1) parameter. Note that parameter with index 0 is skipped, because it is "this".
            if (parameters[i].ParameterType.IsValueType)
            {
                methodGenerator.Emit(OpCodes.Box, parameters[i].ParameterType); // If the parameter is of value type, it needs to be boxed, otherwise it cannot be put into object[] array.
            }

            methodGenerator.Emit(OpCodes.Stelem, typeof(object)); // Set element in the array.
        }

        // Call the method.
        methodGenerator.Emit(OpCodes.Ldstr, attr.Name); // Load name of the service to execute.
        methodGenerator.Emit(OpCodes.Ldloc, paramsLocal); // Load the params array.
        methodGenerator.Emit(OpCodes.Call, executeMethod); // Invoke the "Execute" method.
        methodGenerator.Emit(OpCodes.Ret); // Return the returned value.
    }
}

Type generatedType = typeBuilder.CreateType();

// Create an instance of the type and test it.
IMyService service = (IMyService)generatedType.GetConstructor(new Type[] { }).Invoke(new object[] { });
service.ServiceName(1, "aaa"); 
```

这个解决方案可能有点乱，但如果你想省去自己创建代码的麻烦，它工作得很好。请注意，**创建**动态类型会影响性能。然而，这通常是在初始化期间完成的，不应过多地影响运行时。

或者，我建议您查看[PostSharp](http://www.sharpcrafters.com/)，它允许您在编译时生成代码。然而，这是一个付费的商业解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T15:20:17.547

即使这不是您所要求的，我还是建议您创建自己的[T4 模板](http://msdn.microsoft.com/en-us/library/bb126445.aspx)来生成这些辅助方法。如果您有一些编程 API 来获取服务名称列表及其适用的参数类型，这将特别有用。

# .net - 在 WCF 下运行代码与“常规”代码执行，有什么区别？

> ID：13736157
> 
> 赞同：2
> 
> 时间：2012-12-06T02:47:57.353
> 
> 标签：.net, wcf, sharepoint, runtime

我拥有以两种模式运行的代码（使用 SharePoint 对象模型）：

1.  从普通的控制台应用程序或单元测试运行程序运行。在这种情况下，代码有效。
2.  在 WCF 服务中运行。WCF 服务托管在控制台应用程序中。没有特殊的安全配置，一切都是默认的。执行失败。

这两种模式在执行上可能存在哪些差异，尤其是与安全性相关的（例如上下文、主体）？

SharePoint 对象模型是出现问题的地方，但这不是问题的主要目标。更有趣的是一般情况下的差异。如果您需要更多细节，请告诉我，我会更新问题。

到目前为止的差异：

1.  Thread.CurrentThread.IsThreadPoolThread (#1 - false, #2 - true)，显然来自线程池

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-24T02:53:28.197

Sharepoint 对象在底层是基于 COM 的。WCF 默认是多线程的，与 COM 不兼容。

# haskell - 用于移动开发的 Haskell

> ID：13736158
> 
> 赞同：9
> 
> 时间：2012-12-06T02:48:08.880
> 
> 标签：haskell, mobile

我知道它可以在 web 开发中使用 haskell，但是对于移动开发呢？由于 Haskell 几乎完美地运行 Windows、Linux 和 Mac，我不明白为什么这是不可能的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T02:55:06.727

[GHC 确实在一定程度上](http://hackage.haskell.org/trac/ghc/wiki/Platforms)支持 ARM ，所以你可以编译 Haskell 程序在大多数手机上运行。

也就是说，目前在大型平台（iOS 和 Android）上对 Haskell 移动应用程序的库支持非常少。问题是他们使用的自定义系统和 UI 库在他们的生态系统之外（真正）不可用。您可以将 Haskell 代码与 Android 或 iOS 应用程序接口（可能通过 C 绑定），但没有自动化的方式，也没有简单的库可供使用。因此，尽管您可以编写一些 Haskell 程序来计算某些东西，从用户那里获取输入并向他们展示结果将是相当麻烦的（请参阅有关[Android](http://www.haskell.org/haskellwiki/Android)和[iPhone](http://www.haskell.org/haskellwiki/IPhone)的 HaskellWiki 文章）。

您目前最好的选择可能是[Maemo](http://maemo.org/)，它应该能够轻松地为 ARM 运行 GTK Haskell 应用程序。也就是说，那里的 Maemo 手机并不多。还有一些其他的移动发行版只运行 vanilla Linux 系统，它们也可以正常工作；特别是，任何运行 vanilla Linux（与 Android 或其他一些高度定制的发行版相反）的平板电脑可能甚至可以很好地运行图形 Haskell 应用程序。

# javascript - JQuery Autocomplete (City/State) - 需要帮助使脚本更健壮

> ID：13736161
> 
> 赞同：1
> 
> 时间：2012-12-06T02:49:01.443
> 
> 标签：javascript, jquery, jquery-ui

以下代码对城市执行自动完成，然后选择关联的状态。如果我遵循 Id: City and State 的约定，效果会很好。我遇到的情况是，我在具有不同 ID 的页面上有多个城市/州控件。

有人可以帮我将此代码重构为更通用吗？

谢谢

```
 $("#City").autocomplete({
    source: function (request, response) {
        $.ajax({
            url: "http://ws.geonames.org/searchJSON?country=US",
            dataType: "jsonp",
            data: {
                featureClass: "P",
                style: "full",
                maxRows: 12,
                name_startsWith: request.term
            },
            success: function (data) {
                response($.map(data.geonames, function (item) {
                    return {
                        label: item.name + (item.adminName1 ? ", " + item.adminName1 : ""),
                        value: item.name,
                        code: item.adminCode1
                    }
                }));
            }
        });
    },
    minLength: 2,
    select: function (event, ui) {
        $("#State").val(ui.item.code);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:02:32.680

看起来您的问题是，当一个`#City`自动完成时，该`#States`选项的所有更新，是吗？这部分是因为您违反了 html 规则。ID应该是唯一的。

所以我会推荐以下内容：

1.  使您的 ID 独一无二，最好以与其用途相匹配的方式命名（例如`id="homecity"`，`id="vacationcity"`等）

2.  向您绑定的城市和州输入添加一个类。

3.  `readonly`如果还没有，请考虑进行状态输入。这让用户知道他们不应该在那里打字并阻止 UI 事件和交互。希望它不会破坏自动完成插件。

4.  向城市的标记添加一个属性，以指示他们将修改哪个州输入。

将它们捆绑在一起，因为我显然不能将代码示例放在列表的中间......

html:

```
<input id="homecity" class="autocomplete-city" stateid="homestate"></input>
<input id="homestate" class="autocomplete-state" readonly="readonly"></input> 
```

Javascript：

```
 $(".autocomplete-city").autocomplete({
    source: function (request, response) {
        $.ajax({
            // your normal ajax stuff
        });
    },
    minLength: 2,
    select: function (event, ui) {
        // Updated. 'this' is captured in the closure for the function here
        // and it is set to the dom element for the input. So $() turns it
        // into a jQuery object from which we can get the stateid attr
        $("#"+$(this).attr('stateid')).val(ui.item.code);
    }
}); 
```

还有中提琴！每个输入通常都与它们将控制的状态相关联。不再有冲突的 ID，也不再有爆炸性的事件处理程序。

如果您不喜欢使用非标准属性（我的意思是在 html 部分中）污染您的标记，您也可以使用[jQuery data来实现这一点。](http://api.jquery.com/jQuery.data/)`stateid="homestate"`

**编辑：**下一段解释错误。

[根据文档](http://api.jqueryui.com/autocomplete/#event-select)，在`select`函数中，`ui.item`是已自动完成的输入的 jQuery 元素，因此它应该是正确`#homecity`的，并且`attr`调用应该返回正确的值`#homestate`（与示例保持一致）。但我还没有尝试过，所以你可能想在那里进行一些 null 和/或未定义的检查。

**编辑：**`ui.item`传递给函数的参数`select`是从菜单中选择的项目，而不是输入元素的 jQuery 对象。`ui`具有以下结构：

```
Object {item: Object}
  item: Object
    code: "AK"
    label: "Jeuno, Alaska"
    value: "Jeuno" 
```

获取要更新的状态的 attr 的正确方法是在 from`this`中，在函数的闭包中`select`作为输入的 DOM 元素捕获。因此，在其上运行 jQuery 函数`$(this)`可以获得 jQuery 对象，您可以从中获取`attr()`或`data()`.

JSFiddle 在此处具有多个自动完成功能：http: [//jsfiddle.net/KBVxK/1/](http://jsfiddle.net/KBVxK/1/)

# ruby-on-rails - Postgres 使用 rake 命令在 Rails 应用程序中删除数据库

> ID：13736165
> 
> 赞同：1
> 
> 时间：2012-12-06T02:49:14.447
> 
> 标签：ruby-on-rails, postgresql

我在删除 Rails 应用程序的 postgres 数据库时遇到问题 - 最近在部署到 heroku 后从 sqlite 切换。运行我的 rake 任务以聚合数据并填充数据库时， rake db:create db:migrate all 工作，但 db:drop 不工作。运行 rake db:drop db:migrate db:create all 后，我的终端出现以下错误。'all' 是聚合器的 rake 任务。

```
Couldn't drop something_development : #<PG::Error: FATAL:  database "postgres" does not exist
>
Couldn't drop something_test : #<PG::Error: could not connect to server: No such file or directory
    Is the server running locally and accepting
connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"?
>
something_development already exists
could not connect to server: No such file or directory
Is the server running locally and accepting
connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

'这是查看我的 database.yml 文件...`

```
development:
  adapter: postgresql
  host: localhost
  database: something_development

  username: username

test:
  adapter: postgresql
  database: something_test
 pool: 5
 timeout: 5000

production:
 adapter: postgresql
 host: localhost
 username: username
 database: something_production 
```

这里还有一个来自 psql 命令行的数据库列表：

```
 List of databases
         Name         |      Owner      | Encoding | Collate | Ctype |          Access privileges          
----------------------+-----------------+----------+---------+-------+-------------------------------------
username              | username        | UTF8     | en_US   | en_US | 
something_development | username        | UTF8     | en_US   | en_US | 
template0             | username        | UTF8     | en_US   | en_US | =c/username+          |                 |          |         |       | username=CTc/username
template1             | username        | UTF8     | en_US   | en_US | =c/username    +      |                 |          |         |       | username=CTc/username
(4 rows) 
```

编辑 - 在推到 heroku 之前，我试图在开发中做到这一点。我需要为我的用户名添加访问权限吗？我尝试 GRANT UPDATE ON something_development TO username 但收到错误：关系“something_development”不存在。Heroku 会记住这一点 - 谢谢。

有没有人对可能发生的事情或某些资源有任何想法可以为我指明正确的方向？感谢任何帮助-谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:02:43.803

首先，您应该确定在 Heroku 上使用哪种 postgres DB：Shared DB 或 Heroku Postgres。

如果您使用的是共享数据库（建议不要再使用），不幸的是您必须删除您的 Heroku 应用程序并重新创建具有相同应用程序名称的新应用程序。

如果您使用 Heroku PG，您可以在此处找到您的数据库：[https](https://postgres.heroku.com/databases) ://postgres.heroku.com/databases并销毁并添加另一个数据库，就像删除并重新创建您的数据库，之后您可以运行迁移出色地。使用 Heroku PG，我不确定我们现在是否可以运行 db:drop（我已经有一段时间无法在 Heroku 上使用此命令了）

关于配置，您应该遵循以下几个步骤：

安装 gem pg

使用 pgAdmin III 或类似的东西尝试连接到您的 PG 服务器。如果成功，请将此信息用于您的 database.yml 文件。

注意：当你将代码推送到 Heroku 时，Heroku 会根据他们的 PG 服务器信息自动创建新的 database.yml，所以你不需要关心 Heroku 上的配置数据库。请记住在将您的应用程序推送到 Heroku 之前删除 sqlite gem

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T03:09:10.340

在heroku上，您没有删除数据库的权限，您必须这样做

```
heroku pg:reset 
```

如果您的数据库不在 heroku 上，请检查用户（postrgesql）是否具有权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T03:03:17.457

找出问题所在 - 事实证明您无法重命名数据库“postgres”，因为它需要它来管理数据库。我曾尝试将 postgres 重命名为 something_development。为了解决这个问题，我创建了一个 postgres 数据库。

# java - 无法创建 android onListItemClick 方法

> ID：13736168
> 
> 赞同：0
> 
> 时间：2012-12-06T02:49:27.467
> 
> 标签：java, android

现在我正在尝试创建一个 android onListItemClick 方法。但是每次我这样做时都会出现大量语法错误，说预期的分号。通常，当我遇到这样的语法错误时，我知道只需添加一个分号，但在这种情况下，我不知道应该如何将分号应用于这样的事情。首先，在这样的声明中是否应该有分号？这是代码

```
package net.androidbootcamp.coffeefinder;

import java.util.Calendar;

import android.os.Bundle;
import android.app.Activity;
import android.app.ListActivity;
import android.view.Menu;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class MainActivity extends ListActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //Menu Select Array
        String[] CoffeeShop = {"Creation","Starbucks","Caribou","Mo'Joe" };
        //Set list adapter for list
        setListAdapter(new ArrayAdapter<String>(this,R.layout.activity_main,R.id.Coffee,CoffeeShop));
        //Create actions of list

        protected void onListItemClick(ListView l, View v, int position, long id)
        {

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:54:11.770

它应该在您的 onCreate 之外：

```
public class MainActivity extends ListActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        //Menu Select Array
        String[] CoffeeShop = {"Creation","Starbucks","Caribou","Mo'Joe" };
        //Set list adapter for list
        setListAdapter(new ArrayAdapter<String>(this,R.layout.activity_main,R.id.Coffee,CoffeeShop));
        //Create actions of list
    }

    protected void onListItemClick(ListView l, View v, int position, long id)
    {

    } 

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:55:00.430

该方法是这样的，应该在 onCreate() 中：

```
lv.setOnItemClickListener(new OnItemClickListener() {
          public void onItemClick(AdapterView<?> parent, View view,
              int position, long id) {

              // selected item will be in position
              //do what ever you want to do.

          }
        }); 
```

# linux - CIFS/SMB 写入优化

> ID：13736170
> 
> 赞同：0
> 
> 时间：2012-12-06T02:49:43.453
> 
> 标签：linux, windows, samba, smb, cifs

我正在考虑对 CIFS/SMB 进行写入优化，以抑制重复块的写入。例如，我从远程共享读取文件并修改文件末尾附近的部分。当我保存文件时，我只想将文件中实际更改的部分的写请求发送回远程端。所以基本上，抑制所有写入，直到遇到非重复写入为止。届时，抑制将被禁用，并且将照常允许写入。问题是我找不到任何文档 MS-SMB/MS-SMB2/MS-CIFS 或其他表明这是否是有效的做法。有谁知道这是否有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:58:02.590

CIFS 协议确实允许应用程序写回文件的特定部分。这由 SMB WriteAndX 数据包中的参数 DataOffset 和 DataLength 控制。

可以在此处找到相同的文档：http: [//msdn.microsoft.com/en-us/library/ee441954.aspx](http://msdn.microsoft.com/en-us/library/ee441954.aspx)

客户端可以使用这些字段将特定长度的数据写入文件中的特定偏移量。

该协议的更新版本中也存在类似的支持......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:53:38.130

深入研究 Linux 内核的源代码，有关于 CIFS 的文档——包括源代码和文本。例如[http://www.mjmwired.net/kernel/Documentation/filesystems/cifs.txt](http://www.mjmwired.net/kernel/Documentation/filesystems/cifs.txt)

如果您想研究例如 CIFS 协议的行为，您可以使用 unix 命令“dd”对其进行测试。通过 CIFS 挂载任何远程文件系统，例如到`/media/remote`. 切换到这个文件夹

```
cd /媒体/远程
```

现在创建一个包含一些随机内容的文件（例如来自内核的随机池）：

```
dd if=/dev/urandom of=test.bin bs=4M count=5
```

在此示例中，您应该看到大约 20MB 的流量。然后在您机器上的某个位置创建另一个较小的文件，例如您的主文件夹：

```
dd if=/dev/urandom of=~/test_chunk.bin bs=4M count=1
```

有趣的是，如果您尝试将块写入远程测试文件的特定位置，会发生什么：

```
dd if=~/test_chunk.bin of=test.bin bs=4M count=1 seek=3 conv=notrunc
```

实际上，这应该只更改目标文件中 5 个块中的第 4 个块。我想你可以调整块大小......我用 4 MB 块做了这个。但这应该有助于了解网络上发生的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-29T03:35:30.010

SMB 协议有这样的写优化。它适用于附加 cifs 操作。其中协议读取文件的 EOF 并开始写入偏移量设置为 EOF 值和长度的新数据作为附加数据字节。

# c++ - 在函数内部创建一个局部向量，然后将其作为引用传递给将其存储为引用的其他函数

> ID：13736171
> 
> 赞同：0
> 
> 时间：2012-12-06T02:49:46.510
> 
> 标签：c++

这段代码有什么潜在的危险吗？

```
void f(){
    std::vector<int> v;
    ...
    g(v);
}

void g(std::vector<int> &a){
    ... //store a by reference in variable blah (global)
} 
```

对 f() 的调用完成后 v 被销毁，但 blah 仍将引用 v。 blah 会变为无效吗？有没有更好的方法来做到这一点，同时不制作不必要的向量副本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:01:50.253

除了詹姆斯提供的答案之外，还有第三种可能性，与您的第一个想法具有相同的可读性，没有悬空引用，没有向量本身的堆分配，也没有不必要的副本：

```
std::vector<int> global; //somewehere - you don't have it really global, do you?

void f() {
  std::vector<int> vf; 
  /* ... */
  g(std::move(vf));
}

void g(std::vector<int> vg) //by value!
{
  /* ... */
  global.swap(vg);
} 
```

由于您将`vf`“移出” `f()`，`vg`因此调用了 move-ctor，这意味着它只获得了以前拥有的资源的所有权`vf`，因此不会进行不必要的复制和分配。`swap()`in`g()`仅在`global`调用`g()`（因此`f()`）之前存在时才有效。你说你想将向量存储在一个引用中，所以我假设`g()`实际上*创建*了存储对象并且`global`在调用之前没有。然后，与其交换现有对象，不如`vg`将其传递`std::move`给存储对象。

总的来说，您实际上只创建了一个向量 ( `vf`)，所有其他向量都与`move`原始向量完全相同，因此您具有与通过引用传递基本相同的性能，但没有悬空的 ref。

（对于挑剔者：是的，移动一个向量比传递一个引用要多一点，通常复制和归零三个指针而不是复制一个。但与堆分配、向量副本等相比，它真的没什么。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:55:38.477

是的，有你描述的问题。要么`v`在堆上创建

```
void f()
{
    std::vector<int>* v = new std::vector<int>();
    // ...
    g(v);
}

void g(std::vector<int>* a)
{
    // Store in blah
    // But don't forget to delete it.
} 
```

或者从一开始就将其作为一个全局对象。

```
std::vector<int> v;

void f()
{
    g();
}

void g()
{
    // Use v;
} 
```

# c# - 如何制作一个功能来测试我的井字游戏 AI 是否完美？

> ID：13736175
> 
> 赞同：1
> 
> 时间：2012-12-06T02:50:15.923
> 
> 标签：c#, optimization, recursion, artificial-intelligence, greedy

给定每个棋盘状态，我的 AI 将返回 1 个确切的移动位置。

我还制作了一个函数，可以循环使用 AI 制作的所有可能的游戏

所以它是一个递归函数，让 AI 为给定的棋盘移动，然后让其他游戏做出所有可能的移动，并为每个可能的移动调用它自己的递归函数，并使用一个新的棋盘。

我这样做是为了当人工智能先行时，当另一个人先行时……然后将它们加在一起。我最终得到 418 次可能的胜利和 115 次可能的平局，以及 0 次可能的失败。

但现在我的问题是，我如何最大化获胜的数量？我需要将此统计数据与某些东西进行比较，但我无法弄清楚将其与什么进行比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:23:29.597

您可以将其视为具有未知最优解的优化问题。然后，您可以使用某种形式的[元启发式](http://en.wikipedia.org/wiki/Matheuristics)算法（例如[遗传算法](http://en.wikipedia.org/wiki/Genetic_algorithm)、[PSO](http://en.wikipedia.org/wiki/Particle_swarm_optimisation)）对您的 AI 应用变体，直到找到最佳值。有趣的是，这些算法不一定会返回“最好的”，但获得比以前更好的东西仍然有用。

通常元启发式算法需要一个适应度函数，该函数基本上比较解决方案以找到最佳解决方案。在您的情况下，您可以使用胜率作为适应度函数。已经达到 418/115 的比率，您可以将其用作您的“基准”，以便比较未来的解决方案。

不幸的是，我知道我的提议可能过于牵强（您可能正在寻找更简单的东西），或者它可能过于笼统。

不幸的是，我不确定是否有任何统计数据可以用来查看它是否完美。我很快就有的一个想法是假设： - 一场完美的比赛只会导致胜利或平局。

您的递归算法已经返回了这个。现在的问题是，是否有可能增加获胜的数量？然后，您可以做出以下假设： - 如果两个玩家都打得很好，结果将永远是平局（猫的游戏）。

基于这个假设以及对前面假设的评估，这意味着如果你的 AI（我们称之为 Bob）是完美的，那么在 Bob vs Bob 的游戏中，结果一定是平局。

我意识到这仍然不能帮助您增加获胜次数（如果可能的话），但它提供了您可以使用的另一个指标 - 至少确保在 Bob vs Bob 游戏中，没有边缘情况是赢家（这意味着你的 AI 并不完美）。

# javascript - 画布偏离中心，擦除无法正常工作

> ID：13736181
> 
> 赞同：0
> 
> 时间：2012-12-06T02:50:36.840
> 
> 标签：javascript, html

我编写了一个 JavaScript，它允许用户用鼠标在 HTML5 画布上绘图（类似于 MS Paint）。

现在，我有两个问题：

1.  仅当 HTML5 画布元素位于网页的左上角 (0, 0) 时，绘图功能才有效，否则根本不起作用或绘图偏离中心。

2.  我无法擦除绘图。当我擦除绘图时，它会擦除​​但一旦我再次开始绘图，它就会回来。

我的代码如下：

HTML 画布

```
<canvas id="can1" width="500" height="500"></canvas>1 
```

用于画布绘图的 JavaScript

```
// Variables
var x1;
var y1;
var isPressed = false;
var myCanvas;
var myContext;

function startCanvas() {

    // Canvas stuff
    myCanvas = document.getElementById("can1");
    myContext = myCanvas.getContext("2d");

    // Specify a black background, and white lines that are 3 pixels thick.
    myContext.fillStyle = '#fff';
    myContext.strokeStyle = '#fff';
    myContext.fillRect(0, 0, 500, 500);
    myContext.lineWidth = 3;
    myContext.fill();
}

function functionMouseDown(e) {
    // Get coordinates
    x1 = e.clientX
    y1 = e.clientY;

    isPressed = true;
}

function functionMouseMove(e) {
    // If mouse is down and moved start drawing line
    if (isPressed == true) {
        drawLine(e);
    }
}

function functionMouseUp() {
    // Stop drawing line
    isPressed = false;
    //myContext.closePath();
    //myContext.stroke();
}

function drawLine(e) {
    // Draw line
    var x = e.clientX;
    var y = e.clientY;

    myContext.strokeStyle = '#cc0000';
    myContext.lineWidth = 1;
    myContext.moveTo(x1, y1);
    myContext.lineTo(x, y);
    myContext.stroke();

    // Set start coordinates to current coordinates
    x1 = x;
    y1 = y;
} 
```

我用来擦除画布的 JavaScript：

```
myContext.clearRect(0, 0, 500, 500); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:08:15.500

我使用以下函数来完成这个

```
function relMouseCoords(event){/*needs fixing for general case*/
    var totalOffsetX = 0
    var totalOffsetY = 0
    var canvasX = 0
    var canvasY = 0
    var currentElement = this

    do{
        totalOffsetX += currentElement.offsetLeft
        totalOffsetY += currentElement.offsetTop
    }
    while(currentElement = currentElement.offsetParent)

    canvasX = event.pageX - totalOffsetX
    canvasY = event.pageY - totalOffsetY

    return {x:canvasX, y:canvasY}
}

HTMLCanvasElement.prototype.relMouseCoords = relMouseCoords; 
```

然后

```
var cord = e.target.relMouseCoords(e);
x1 = cord.x; 
y1 = cord.y;
...
var cord = e.target.relMouseCoords(e);
var x = cord.x;
var y =cord.y; 
```

[http://jsfiddle.net/mowglisanu/u3rvT/1/](http://jsfiddle.net/mowglisanu/u3rvT/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:08:23.733

最简单的解决方案是使用 myCanvas.offsetLeft 和 myCanvas.offsetTop 设置画布的偏移量。

# php - Joomla 2.5 组件表单

> ID：13736188
> 
> 赞同：0
> 
> 时间：2012-12-06T02:52:31.193
> 
> 标签：php, html, joomla, checkbox, joomla2.5

我正在为 Joomla 2.5 制作一个组件，根据[文档](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Adding_backend_actions)，有一个表单文件夹，其中有一个 xml 文件：

```
<field
    name="id"
    type="hidden"
/>

<field
    name="greeting"
    type="text"
    label="COM_HELLOWORLD_HELLOWORLD_GREETING_LABEL"
    description="COM_HELLOWORLD_HELLOWORLD_GREETING_DESC"
    size="40"
    class="inputbox"
    default=""
/> 
```

我需要一个字段是一个复选框，所以我将 type="text" 更改为 "checkbox"，这对于添加新条目来说很好。但是通过编辑我需要检查数据库中的值以查看是否选中了复选框。例如，我会有这样的事情：

```
<field
    name="published"
    type="checkbox"
    label="COM_HELLOWORLD_HELLOWORLD_GREETING_LABEL"
    description="COM_HELLOWORLD_HELLOWORLD_GREETING_DESC"
    size="40"
    class="checkbox"
    default=""
/> 
```

如果数据库中的“已发布”为 1，我希望选中默认复选框。有没有办法做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:31:41.683

您可以通过使用中的默认输入字段来做到这一点`edit.php`。这对我有帮助，它也可能对您有所帮助。

**例如：**

```
<?php
if($this->form->getValue('published')==1)
{
    $value=1;
}
else{
    $value=0;
}?>

<li><?php echo $this->form->getLabel('published'); ?>
<input type="text" name="jform[published]" value="<?php echo $value; ?>"  /></li> 
```

# python - 代码学院python课《早安课！》：实录练习

> ID：13736191
> 
> 赞同：0
> 
> 时间：2012-12-06T02:52:51.697
> 
> 标签：python

我坚持做这个[练习](http://www.codecademy.com/courses/python-beginner-en-qzsCL/0?curriculum_id=4f89dab3d788890003000096#!/exercises/3)。它要求我从包含字典的列表中打印出来，但我什至不知道该怎么做。我在谷歌上找不到如何做这样的事情......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-23T01:27:54.297

这是我发现的更有效的答案：

```
for persons in students:
    for grades in persons:
        print persons[grades] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T03:17:03.777

下次您应该更仔细地指定您的问题是什么。下面是练习要求的循环。

```
for s in students:
    print s['name']
    print s['homework']
    print s['quizzes']
    print s['tests'] 
```

# c - 为什么我的 C 程序不能列出 7 的倍数？

> ID：13736193
> 
> 赞同：-1
> 
> 时间：2012-12-06T02:53:00.183
> 
> 标签：c

该程序的目标是在“input_value_1”到“input_value_2”的范围内找到 7 的倍数。我很困惑为什么它只显示某些数字......

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
int input_value_1;
int input_value_2;
int multiples[] = {};
int i = 0;
int count = 0;
int y;

printf("Enter a value:\n");
scanf("%i", &input_value_1);
printf("\nEnter a second value:\n");
scanf("%i", &input_value_2);

if(input_value_2 <= input_value_1)
{printf("Invalid Entry\n");}
else
{
    for(y = input_value_1;y <= input_value_2; y++)
    {
        if(y%7 == 0)
        {
            multiples[i] = y;
            i++;
            count++;
        }
    }
    for(i=0; i<=count; i++)
    {
        printf("%i\n", multiples[i]);
    }
}

system("pause");
return 0; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T03:00:01.727

```
int multiples[100]; 
```

应该修复它。此外，i< 在显示屏上计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:03:34.630

首先，您至少应该将倍数初始化为特定大小，甚至避免使用它。其次，您的代码中还有另一个错误：

```
for(i=0; i<=count; i++)
    {
        printf("%i\n", multiples[i]);
    } 
```

应该：

```
for(i=0; i<count; i++)
    {
        printf("%i\n", multiples[i]);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T02:58:17.327

可能应该在尝试设置它的元素之前设置最大长度并初始化数组倍数 []...

例如

```
int multiples[100] = { 0 }; 
```

您还希望在达到 100 时停止设置元素，即

```
for(y = input_value_1;y <= input_value_2 && count < 100; y++) {  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T02:58:43.240

你的代码有一点让我有点困扰。

我不知道以下行是否分配了您的`multiples`数组：（我的 c 语法生锈了）

```
int multiples[] = {}; 
```

但是，我很确定那条线不会给它无限量的内存。至少。

我的直觉是，如果你输入一个足够大的范围，你会很快得到一个分段错误。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-06T03:08:09.853

从 input_value_1 到 input_value_2 的范围可能非常大。7 的倍数可能会超出您的数组大小。更好的方法应该使用向量进行存储

```
std::vector<int> multiples;
for(y = input_value_1;y <= input_value_2; y++)
    if(y%7 == 0)
        multiples.push_back(y);
for(i=0; i<=multiples.size(); i++)
    printf("%i\n", multiples[i]); 
```

或者直接打印。

```
 for(y = input_value_1;y <= input_value_2; y++)
    {
        if(y%7 == 0)
            printf("%d\n", y);
    } 
```

# css - 使用原生 javascript 和 css 使地图/区域元素旋转

> ID：13736197
> 
> 赞同：0
> 
> 时间：2012-12-06T02:53:29.633
> 
> 标签：css, rotation

我们的页面中有这个 html：

```
<div id="img"></div>
<div id="mouse_target">
    <img style="-moz-user-select: none; border: medium none; width: 27px; height: 35px;" usemap="#imgmap1" src="http://i.stack.imgur.com/S9eo1.png">
    <map name="imgmap1"><area href="javascript:void(0)" style="cursor: pointer;" title="" shape="poly" coords="11,25,22,11,11,1,1,11,11,25,11,33"></map>
</div> 
```

和CSS：

```
 #img,#mouse_target{
        width:27px;
        height:35px;
        position:absolute;
        left:40px;
        top:100px;
    }
    #img{
        background:url("http://i.stack.imgur.com/S9eo1.png") no-repeat;
        -moz-transform:rotate(45deg);
    }
#mouse_target{
    opacity:0.01;
}
#mouse_target map{
    -moz-transform:rotate(45deg);
}
#mouse_target map area{
    -moz-transform:rotate(45deg);
} 
```

[提琴手](http://jsfiddle.net/HXSeL/)

现在，我们有两个问题：

1.  实现跨浏览器的旋转

    由于 -moz-transform 不适用于 ie。

2.  使`div#mouse_target`or`div#mouse_target map`或 `div#mouse_target map area`与 一起旋转`div#img`。

这可能吗？

# c - 如何让子进程更改父进程的变量？

> ID：13736198
> 
> 赞同：1
> 
> 时间：2012-12-06T02:53:31.530
> 
> 标签：c, fork, arrays

我声明了一个数组：

`char * words[1000] = {NULL};`

现在我有一系列分叉的子进程将单词添加到该数组中，但它们不会影响父程序。我该如何改变呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T02:56:13.923

您还没有在 while 块内添加 if 块！！！

```
 while(i < 1000 && words[i] != NULL)
   {
   i++;
 if(i<1000){
    words[i] = (char*) malloc(strlen(temp)+1);
    strcpy(words[i], temp);
   words[i][strlen(words[i])] = '\0';
    printf("Added: %s at location %d\n", words[i], i);
   }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T02:58:29.307

试试这个，你弄错了 while 大括号：

```
int i = 0;
while(i < 1000 && words[i] != NULL){
    i++;
    if(i<1000){
        words[i] = (char*) malloc(strlen(temp)+1);
        strcpy(words[i], temp);
        words[i][strlen(words[i])] = '\0';
        printf("Added: %s at location %d\n", words[i], i);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T03:04:27.103

请粘贴整个代码......我编写代码来做我认为你正在做的事情，它对我有用......

```
 #include <stdio.h>

int main(int argc, char *argv[])
{
  char* words[1000];
  int j;
  for(j = 0; j<1000; j++)
    words[j] = NULL;
  char *temp = "dummy";

  for (j = 0; j < 10; j++)
    {
      int i = 0;
      while(i < 1000 && words[i] != NULL)
        i++;
      printf("Adding something to %d vs %d\n",i,j);
      if(i<1000){
        words[i] = (char*) malloc(strlen(temp)+1);
        strcpy(words[i], temp);
        words[i][strlen(words[i])] = '\0';
        printf("Added: %s at location %d\n", words[i], i);
      }
    }
}

/* prints:
Adding something to 0 vs 0
Added: dummy at location 0
Adding something to 1 vs 1
Added: dummy at location 1
Adding something to 2 vs 2
Added: dummy at location 2
Adding something to 3 vs 3
Added: dummy at location 3
Adding something to 4 vs 4
Added: dummy at location 4
Adding something to 5 vs 5
Added: dummy at location 5
Adding something to 6 vs 6
Added: dummy at location 6
Adding something to 7 vs 7
Added: dummy at location 7
Adding something to 8 vs 8
Added: dummy at location 8
Adding something to 9 vs 9
Added: dummy at location 9
*/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T03:17:07.957

嗯，对于您的编辑情况：不要使用 fork，使用线程，因为那样一切都在一个地址空间中运行......
当然，然后使用互斥锁来保护您的单词数组......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-21T08:50:05.787

当您使用 fork 创建子节点时，每个子节点都会在子节点更改数组中的某些内容时获得自己的数组副本，它实际上是在更改自己的副本，对于您要执行的操作，您需要进程间通信 (IPC)，您需要创建一个共享内存或创建管道，以便所有子项和父项的数组值更改

# javascript - 变量和数字的正则表达式匹配

> ID：13736199
> 
> 赞同：1
> 
> 时间：2012-12-06T02:53:33.973
> 
> 标签：javascript, regex

我正在尝试匹配 javascript 字符串中的变量和数字（与 span 标签匹配）。

我在使用 x1、c2 等形式的变量时遇到问题。我的代码最初看起来像这样

```
output = output.replace(/\d+/g,"<span class=\"number\">$&</span>");
output = output.replace(/\)/g,"<span class=\"function\">$&</span>");
output = output.replace(/[a-zA-Z]+\d*/g,returnTextValue); 
//returnTextValue is a function checking whether the string is a variable or plain text
//and highlighting accordingly 
```

这导致 [a-zA-Z]+\d+ 形式的变量无法正确匹配，因为它们已被数字标签替换。

我一直在尝试使用前瞻和`[^A-Za-z]?\d+`数字之类的东西来做一些事情，但一直找不到这样做的好方法。

我知道我可以匹配标签，但想要一个更优雅的解决方案。

我错过了一个明显的逻辑解决方案，还是有人有一个我不知道这种情况的正则表达式运算符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:58:41.247

> 第一条规则中的 \d+ 是否应该匹配孤立的数字？添加边界\b\d+\b，则与a2类型不匹配。——[迈克尔·伯科夫斯基](https://stackoverflow.com/users/541091/michael-berkowski)12 月 6 日 2:55

# java - 我如何处理 java 命令行参数？

> ID：13736202
> 
> 赞同：1
> 
> 时间：2012-12-06T02:53:49.060
> 
> 标签：java, arguments, command-line-arguments

我正在用java编写一个需要args []传递的输入的工具我知道如何使用参数，但我希望更好地处理这个输入。

这是我的代码的一部分：

```
if (args.length > 0 ) {

        switch (args[0]) {

        case "scan": blah blah
        break;
        case "some cases": some code
        break; 
```

但当然 args 严格限制在它们的位置上，实际上在命令行中我必须调用：

> java java程序 arg1 arg2 arg3

我真的不喜欢这个...

我想要的是使用与任何其他 c 编程工具一样的选项更好地管理这个参数，与位置无关：

例子：

> java javaProgram -ip 127.0.0.1 -database data.txt -vv -out output.txt

任何帮助将不胜感激！

戴夫

（我正在考虑一个参数数组列表，可以是一个解决方案吗？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T02:55:40.790

使用[Apache Commons CLI 生成器](http://commons.apache.org/sandbox/cli2/manual/index.html)。

# sql - Oracle 命令未正确结束

> ID：13736205
> 
> 赞同：0
> 
> 时间：2012-12-06T02:54:27.583
> 
> 标签：sql, oracle, plsql

我正在执行以下操作：

`SELECT * FROM word_utils.substring_matches('abac');`

从我读到的内容中，应该从这个存储过程中获取要显示的 out 参数。

它是这样声明的

`procedure substring_matches( str in varchar2, validwords out charcollection)`

为什么我在尝试执行此操作时会收到命令未正确结束的错误？

我不知道我应该如何从中选择，所以我可以测试我的结果

charcollection 被定义为这样的类型`charcollection is table of varchar(12);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:58:38.907

您不能从程序中进行选择。尝试[`PIPELINED`](http://docs.oracle.com/cd/E18283_01/appdev.112/e17126/tuning.htm#i53109)功能。

```
10:59:12 SYSTEM@dwal> create type tt as table of number
10:59:15   2  /

Type created.

Elapsed: 00:00:00.01
10:59:16 SYSTEM@dwal> create or replace function f
10:59:23   2  return tt pipelined as
10:59:30   3  begin
10:59:31   4  for i in 1 .. 10 loop
10:59:35   5  pipe row (i);
10:59:42   6  end loop;
10:59:44   7  end f;
10:59:46   8  /

Function created.

Elapsed: 00:00:00.16
10:59:47 SYSTEM@dwal> select * from table(f);

COLUMN_VALUE
------------
           1
           2
           3
           4
           5
           6
           7
           8
           9
          10

10 rows selected.

Elapsed: 00:00:00.02 
```

# bash - 如何在 bash 脚本中序列化 echo 和错误输出

> ID：13736206
> 
> 赞同：0
> 
> 时间：2012-12-06T02:54:27.787
> 
> 标签：bash, echo, stdout, flush

我在编写 shell 脚本时经常遇到的一个烦人的问题是，echo 语句的输出显示在 echo 语句*之后*的命令输出之后。

例如：

```
echo "step 1 -"
./step1

echo "step 2 -"
./step2

echo "step 3 -"
./step3 
```

输出如下所示：

```
step1 output
step2 output
step3 output
step 1 -
step 2 - 
step 3 - 
```

这违背了那些回声语句的目的。有没有相当简单/方便的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T02:59:40.230

将命令中的 stderr 重定向到 stdout，以便对输出进行序列化。

```
./step1 2>&1 
```

# javascript - Jquery，CSS - 如何将元素设置为列表中的第一个

> ID：13736208
> 
> 赞同：0
> 
> 时间：2012-12-06T02:54:55.063
> 
> 标签：javascript, jquery, css

我动态生成一堆项目，看起来像这样：

```
<div class=gallery_wrapper>
<figure>...</figure>
<figure>...</figure>
<figure>...</figure>
<figure>...</figure>
......
</div> 
```

有一个条件检查其中一个**图形**是否满足要求，然后将类添加到该**图形**（class = main_img）。

我尝试将**图形**向右浮动，然后将带有**main_img**类的图形向左浮动，但这部分有效。行中有 3 个**图形**元素，使用 float 方法的元素与类位于其行的开头，而不是列表的开头。

如何将此元素设置为第一个（在开头）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T02:59:36.937

元素是树中的节点。您需要将其重新定位到其父级的开头。

如果您的元素在 jQuery 引用的对象中`$elem`，那么使用 jQuery 您可以这样做：

```
$elem.prependTo($elem.parent()) 
```

或这个：

```
$elem.parent().prepend($elem) 
```

# c# - 如何让我的图像在运行时出现或加载

> ID：13736212
> 
> 赞同：0
> 
> 时间：2012-12-06T02:55:12.800
> 
> 标签：c#, wpf, xaml

我只是在做一个涉及路灯的基本练习项目，只需按一下按钮，灯光/图像就会改变颜色。在设计时我可以清楚地看到我的所有三个图像，但在运行时它们都不会出现。我在谷歌中搜索了地狱，我关注了三个不同的例子，但没有任何效果。

到目前为止，这就是我在我的三个图像的 xaml 代码中所拥有的

```
<Image HorizontalAlignment="Left" Height="299" Margin="25,10,0,0"                     VerticalAlignment="Top" Width="227" Source="images/Stop.png" Name="imgStop"/>
<Image HorizontalAlignment="Left" Height="299" Margin="25,10,0,0" VerticalAlignment="Top" Width="227" Source="images/Caution.png" Name="imgCaution"/>
<Image HorizontalAlignment="Left" Height="299" Margin="25,10,0,0" VerticalAlignment="Top" Width="227" Source="images/Caution.png" Name="imgGo"/> 
```

现在这是我的 C# 代码

```
private void btnGreen_Click(object sender, RoutedEventArgs e)
    {
    Image myImage = new Image();
    myImage.Width = 227;
    BitmapImage myBitmapImage = new BitmapImage();
    myBitmapImage.BeginInit();
    myBitmapImage.UriSource = new Uri(@"G:\Users\Jason\Documents\C# Projects\WPF\stopLightDemo\stopLightDemo\images\Go.png");
    myBitmapImage.DecodePixelWidth = 227;
    myBitmapImage.EndInit();
    myImage.Source = myBitmapImage;
    }

    private void btnYellow_Click(object sender, RoutedEventArgs e)
    {

    }

    private void btnRed_Click(object sender, RoutedEventArgs e)
    {

    }

    private void btnClose_Click(object sender, RoutedEventArgs e)
    {
        this.Close();
    }
}
} 
```

我可能做错了什么？？？？

谢谢你！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:43:32.710

首先，当您的 XAML 使用相对图像 URI 时，`images/Caution.png`您必须确保适当的图像文件位于`images`Visual Studio 项目中命名的文件夹中，并且其[生成操作](https://stackoverflow.com/q/145752/1136211)设置为`Resource`.

其次，在您的`btnGreen_Click`处理程序中，您创建一个新的 Image 控件并设置其 Source 属性，但您从未将其添加到任何容器控件中。因此它不能变得可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T03:12:37.560

如果您有来源的图片；

```
myBitmapImage.UriSource = new Uri(@"/stopLightDemo;component/images/Go.png",UriKind.Relative); 
```

# python - Python 两个相同的值不会在 if 语句中为真

> ID：13736214
> 
> 赞同：-3
> 
> 时间：2012-12-06T02:55:19.647
> 
> 标签：python

在函数第 2 部分中，我将值相互检查以查看它们是否相同，我什至将它们打印出来查看，但即使它们是，if 语句也没有被执行！我无法弄清楚为什么会这样

[http://pastebin.com/kt19wpcg](http://pastebin.com/kt19wpcg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T03:12:40.613

你的主要问题是`splitLine = data[i].split("eats")`没有去掉尾随空格，这意味着你会得到一个元素，`"Bird "`而不是`"Bird"`. 当你打印这两者时，你看不出有什么区别，但是当 Python 比较它们时，它们是两个不同的字符串。这看起来像一个作业，所以我建议研究如何在拆分字符串后删除空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T07:16:22.543

拆线后，请`.strip()`在碎片上使用。它将删除所有前导和滞后空间。

# objective-c - 强制 ARC 通过 void 指针保留对象引用

> ID：13736215
> 
> 赞同：0
> 
> 时间：2012-12-06T02:55:31.833
> 
> 标签：objective-c, pointers, automatic-ref-counting

假设我有这个属性：

```
@property (nonatomic, readwrite) void*** array; 
```

并使用objective-c对象初始化数组：

```
- (id) init
{
    if(self=[super init])
    {
        array= malloc(10*sizeof(void**));
        for(NSUInteger i=0; i<10; i++)
        {
            array[i]= malloc(10*sizeof(void*));
            for(NSUInteger j=0; j<10; j++)
            {
                array[i][j]= (__bridge_retained void*) @"Hello";
            }
        }
    }
    return self;
} 
```

然后我发现对象并没有真正保留：

```
 Custom* c=[Custom new];
 NSLog(@"%@",(__bridge NSString*)c.array[40][40]); 
```

这个打印（null），我以为桥保留演员确实强制保留对象，如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:10:35.533

您可以尝试使用 'id' 类型而不是 'void' 类型。

“id”也是抽象的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:09:14.663

你得到 nil （或随机垃圾）的原因是你分配并用 10 个元素填充了你的数组，然后你尝试访问第 40 个元素。

# arrays - 用整数添加数组索引

> ID：13736220
> 
> 赞同：0
> 
> 时间：2012-12-06T02:55:49.850
> 
> 标签：arrays, int, addition

我正在解决一个问题，我必须计算文本中字符的频率。我有一段时间没写代码了，有点生疏了，所以我认为再看一眼我的代码会有所帮助。我的代码读入一个文件，理想情况下它应该命中我的 if 语句并将“1”添加到我的频率数组中。但是，它总是打印“0”。我没有正确添加吗？

```
public class hw4{
public static void main (String []args)throws IOException{

//ask user to enter file name
System.out.printf("Enter a file location and name to encode [press Enter]: ");

Scanner input = new Scanner(System.in);
String filename = input.next();

//Gets file name from Scanner and checks to see if valid
File file = new File(filename);
Scanner text = new Scanner(file);

String[] letters = {"a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"};
int[] freq = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};

String letter;

    while(text.hasNext()){
        letter = text.next();

        if (letter == "a"){
        freq[0] = freq[0] + 1;
        }
        if (letter == "b"){
        freq[1] = freq[1] + 1;
        }
        if (letter == "c"){
        freq[2] = freq[2] + 1;
        }
        if (letter == "d"){
        freq[3] = freq[3] + 1;
        }
        if (letter == "e"){
        freq[4] = freq[4] + 1;
        }
        if (letter == "f"){
        freq[5] = freq[5] + 1;
        }
        if (letter == "g"){
        freq[6] = freq[6] + 1;
        }
        if (letter == "h"){
        freq[7] = freq[7] + 1;
        }
        if (letter == "i"){
        freq[8] = freq[8] + 1;
        }
        if (letter == "j"){
        freq[9] = freq[9] + 1;
        }
        if (letter == "k"){
        freq[10] = freq[10] + 1;
        }
        if (letter == "l"){
        freq[11] = freq[11] + 1;
        }
        if (letter == "m"){
        freq[12] = freq[12] + 1;
        }
        if (letter == "n"){
        freq[13] = freq[13] + 1;
        }
        if (letter == "o"){
        freq[14] = freq[14] + 1;
        }
        if (letter == "p"){
        freq[15] = freq[15] + 1;
        }
        if (letter == "q"){
        freq[16] = freq[16] + 1;
        }
        if (letter == "r"){
        freq[17] = freq[17] + 1;
        }
        if (letter == "s"){
        freq[18] = freq[18] + 1;
        }
        if (letter == "t"){
        freq[19] = freq[19] + 1;
        }
        if (letter == "u"){
        freq[20] = freq[20] + 1;
        }
        if (letter == "v"){
        freq[21] = freq[21] + 1;
        }
        if (letter == "w"){
        freq[22] = freq[22] + 1;
        }
        if (letter == "x"){
        freq[23] = freq[23] + 1;
        }
        if (letter == "y"){
        freq[24] = freq[24] + 1;
        }
        if (letter == "z"){
        freq[25] = freq[25] + 1;
        }
    }

    for(int i=0; i <26; i++){
    System.out.printf("%s:%d\n", letters[i], freq[i]);
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:03:17.540

我意识到存在等效性问题。

支票不是

如果（字母 == “a”）

但

如果（字母。等于（“A”）

# git - 如何使用 git-emacs 进行 git 推送？

> ID：13736222
> 
> 赞同：13
> 
> 时间：2012-12-06T02:56:17.090
> 
> 标签：git, emacs, lisp

我正在使用 git-emacs 通过 Emacs 向 github 提交代码。`add`和可以，但是git `commit`-emacs似乎不支持该`git push`操作。当我输入`M-x git-push`时，它会以“没有这样的命令”响应。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T03:24:29.087

你是对的，它没有。但是，[magit](https://github.com/magit/magit)可以推动。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-10-12T05:38:46.600

较新版本的 Emacs 提供以下命令：

```
C-x v P 
```

更长的版本：

```
M-x vc-push 
```

（如@CAT0 所述）。如果您的 Emacs 版本不支持该命令，请尝试：

```
M-& git push [Enter] 
```

更长的版本：

```
M-x async-shell-command [Enter] git push [Enter] 
```

正如@mariotomo 所指出的，这比下面的同步版本要好，因为它为输出打开了一个缓冲区。

```
M-! git push [Enter] 
```

更长的版本：

```
M-x shell-command [Enter] git push [Enter] 
```

(`M-`是“元密钥”的缩写，可以是`Esc`or`Alt`或`Ctrl+[`)。

（如果你在 Windows 上并且犹豫使用默认进入讨厌的 DOS shell 的 shell，尝试`emacs-w32`从 Cygwin 运行 Emacs，事情会更理智）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-26T13:59:58.430

在 emacs 25（也许也更早）中有命令

> vc推送

这正是它应该做的。它绑定到 Cx v P

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T17:21:10.303

这是一个不幸的副作用，内置的 Emacs VCS support( `vc-mode`) 主要是为 cvs、subversion 等具有完全不同工作流程的工具构建的。很快就添加了 DVCS 支持（在 Emacs 23 中）。我希望`vc-mode`在不久的将来会有所改善。直到那时...

正如@khagler 所说，Magit 支持`git push`. 另一个值得您探索的可靠选择是[Egg](https://github.com/bogolisk/egg)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-12-03T14:23:50.793

通过 git-emacs，可以通过以下方式推送：

1.  `M-x git-cmd`，绑定到`C-x g .`（在`git-status`窗口中绑定到`.`）
2.  输入`push`

# jquery - 悬停时停止悬停事件

> ID：13736224
> 
> 赞同：0
> 
> 时间：2012-12-06T02:56:30.493
> 
> 标签：jquery, hover

我有一个覆盖动画 div 的菜单。div 在悬停时动画不透明度。问题是，菜单 z-indexed 在 div 上，li 正在中断 div 悬停，导致 mouseleave 事件并将 div 触发为 opacity:1。我已经为菜单 li 编写了一个中断，如下所示，但没有任何效果。

```
var ovver=false;
$("#nav li").hover(function () {
     ovver=true;
}, function () {
     ovver=false;
});
$('#hero div').hover(function() {
    if (!ovver) {
        $('#hero div').stop().animate({'opacity':0},{duration:650, easing:'easeInOutSine'});
    }
}, function() {
    if (!ovver) {
        $('#hero div').stop().animate({'opacity':1},{duration:650, easing:'easeInOutSine'});
    }
}); 
```

我不确定为什么该变量不起作用，但是将鼠标悬停在 li 上仍然会触发 opacity:1 动画。我究竟做错了什么？？！！！

编辑：已解决。出于某种原因，#hero div 上的第二个悬停事件始终在第一个悬停事件之前执行。我不知道为什么。我在 if 语句之前的第二个悬停事件中添加了一个 setTimeout，它就像一个魅力。

如果有人能建议为什么第二个悬停事件仍然首先触发，无论 DOM 结构、Jquery 顺序还是我能想到的其他任何东西，我都会感兴趣。否则，我将在“WTF”下归档，并记住它以备下次使用。

感谢所有的投入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:06:49.773

我发现 CSS "!important" 实际上会覆盖 JQuery 的内容，即使对于内联添加也是如此。

```
<style type='text/css'>
#hero div:hover{
    opacity: 0 !important;
}
</style> 
```

**回应肖恩墨菲的第一条评论**

也许晦涩的 jQuery 和 CSS 魔法可以解决问题？

```
$('#hero div').hover(function(){
    $('#nav li').css("cssText","opacity: 0; !important;");
}); 
```

如果对`cssText`您来说看起来有点时髦，请[阅读此内容](http://bugs.jquery.com/ticket/2066)。另外，我不是 100% 确定这会奏效。

# android - 过滤列表视图并获得正确的 onclick 项目

> ID：13736225
> 
> 赞同：6
> 
> 时间：2012-12-06T02:56:43.393
> 
> 标签：android, listview, android-listview

我有一个列表视图，并且我已经实现了过滤。

假设我有项目 A、B 和 C。如果我在过滤器框中键入 B，则只会显示项目 B，它是列表的位置 0（在位置 1 之前）。因此，当我调用 onClick 项目时，我得到了 id/位置 0，这导致显示有关 A 而不是 B 的详细信息。

这是点击代码：

```
ListView lv = getListView();
lv.setTextFilterEnabled(true);

lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {
@Override
public void onItemClick(AdapterView<?> parent, View view,
int position, long id) {

    Poi poi = pois.get((int)id);
    goPOIDETAIL(poi);

}
}); 
```

id 和 position 具有相同的值。

有没有办法获得原始位置，或者获得一些其他值来指示我点击的真实项目？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-22T13:35:34.660

```
 flashsearchList.setOnItemClickListener(new OnItemClickListener() {

        @Override 
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            Integer temp=flashSearchNameMap.get(adapter.getItem(position));

            navigateSearch(temp); 

        }
    }); 
```

（adapter.getItem(position) 将返回您的确切列表名称，并且在 flashSearchNameMap 中，我在应用过滤之前从 oncreate 开始存储了名称和位置。因此您可以通过此获得确切位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:58:27.527

我认为问题在于您管理过滤器的方式。您应该不是从原始列表（或数组）而是从过滤的列表中获取具有选定 ID 的对象。

我在我的[博客](http://www.survivingwithandroid.com/2012/10/android-listview-custom-filter-and.html)的这篇文章中使用了类似的东西。希望这对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T10:15:21.807

**ID**和**索引**不一样。当然，您可以在`getItemId()`适配器的方法中返回项目索引，但如果这样做，请不要指望您的项目能被此方法正确识别。尝试为您的每件商品提供唯一 ID。这个想法有点类似于数据库中每条记录的 ID，它永远不会改变（并且可以让您可靠地识别每条记录），并且当您从数据库中获取数据时，它很容易实现。

但是，如果您的商品没有唯一 ID，并且您不想费心提供它们，还有另一种方法（请参阅下面的适配器示例代码）：

```
public MyAdapter extends BaseAdapter {
    private List<Item> items;
    private List<Item> displayedItems;

    public MyAdapter(List<Item> items) {
        this.items=items;
        this.displayedItems=items;
    }

    public filter(String query) {
        if(query.isEmpty()) {
            displayedItems=items;
        } else {
            displayedItems=new ArrayList<Item>();
            for (Item item : items) {
                displayedItems.add(...) //add items matching your query
            }
        }
        notifyDataSetChanged();
    }

    //...
    //NOTE: we use displayedItems in getSize(), getView() and other callbacks 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T10:15:29.807

你可以试试：

```
@Override
public boolean hasStableIds() {
    return false;
} 
```

在您的适配器中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-25T13:02:19.997

如果您使用的是数据库，您有 _id 键，您可以将其加载到过滤列表中作为不可见字段。单击该项目后，您可以使用 _id 键查询数据。如果您不使用数据库，您也可以在行元素中添加隐藏的 id 元素。

# java - 这不可能获取类的名称并为类内的变量设置吗？

> ID：13736227
> 
> 赞同：1
> 
> 时间：2012-12-06T02:56:54.187
> 
> 标签：java

当我创建：

```
player huhu = new player(); 
```

我想在播放器中将“huhu”转换为字符串名称；

```
public class player{
    String name = ??? How to get "huhu" here?
    ....
} 
```

对不起我糟糕的英语！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T03:01:31.623

```
class Player {
    private String name;

    public Player(String s) {
        name = s;
    }
}

Player huhu = new Player("huhu"); 
```

请注意，我将类名大写。

你应该*总是*把你的类名大写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T03:05:47.183

不，您不能使用标准 Java 访问局部变量的名称。

如果您确实需要访问该名称，则必须将其作为构造函数参数传递，如某些注释中所述。但是，这将要求您更改代码以支持您声明的每个变量。

我很害怕问你为什么需要这个功能。

# android - 同一应用程序的两个进程是否在同一虚拟机上运行？

> ID：13736228
> 
> 赞同：1
> 
> 时间：2012-12-06T02:57:00.650
> 
> 标签：android

我正在使用“android:process”让应用程序有两个进程。我的问题是，这两个进程是在一个虚拟机中运行还是在两个虚拟机中运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T08:45:55.690

来自 Reto Meier 的 Professional Android 4 Application Development：

*默认情况下，每个 Android 应用程序都在自己的进程中运行，每个进程都运行一个单独的 Dalvik 实例。内存和进程管理由运行时专门处理。您可以使用清单中受影响组件节点上的 android:process 属性强制同一应用程序中的应用程序组件在不同进程中运行，或者让多个应用程序共享同一进程。*

# c++ - OpenCV - HoughCircles 导致程序崩溃

> ID：13736232
> 
> 赞同：3
> 
> 时间：2012-12-06T02:57:17.793
> 
> 标签：c++, opencv, crash, visual-studio-2012, geometry

我想使用 OpenCV 和 C++ 检测图像中的圆圈。我可以通过参考[官方文档](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/hough_circle/hough_circle.html)并调整 OpenCV 团队编写的代码的参数来做到这一点。

所以，我正在使用的代码如下：（参数已经调整）

```
 #include "opencv2/highgui/highgui.hpp"
    #include "opencv2/imgproc/imgproc.hpp"
    #include <iostream>
    #include <stdio.h>

    using namespace cv;

    int main(int, char** argv)
    {
       Mat src, src_gray;

       /// Read the image
       src = imread( argv[1], 1 );

       if( !src.data )
         { return -1; }

       /// Convert it to gray
        cvtColor( src, src_gray, CV_BGR2GRAY );

       /// Reduce the noise so we avoid false circle detection
        GaussianBlur( src_gray, src_gray, Size(9, 9), 2, 2 );

        vector<Vec3f> circles;

       /// Apply the Hough Transform to find the circles
        HoughCircles( src_gray, circles, CV_HOUGH_GRADIENT, 6.0, 5, 110, 70, 3, 20 );

       /// Draw the circles detected
        for( size_t i = 0; i < circles.size(); i++ )
        {
             Point center(cvRound(circles[i][0]), cvRound(circles[i][2]));
             int radius = cvRound(circles[i][3]);
             // circle center
             circle( src, center, 3, Scalar(0,255,0), -1, 8, 0 );
             // circle outline
             circle( src, center, radius, Scalar(0,0,255), 3, 8, 0 );
        }

       /// Show your results
        namedWindow( "Hough Circle Transform Demo", CV_WINDOW_AUTOSIZE );
        imshow( "Hough Circle Transform Demo", src );

        waitKey(0);

        src.release();
        src_gray.release();

        return 0;
    } 
```

我要检测的圆圈的图像如下：[测试图像](http://imageshack.us/a/img534/4333/testli.jpg)

这些实际上是我使用 cvBlobsLib 获得并重新绘制为新图像的两个 blob 的轮廓。

该算法能够识别每个圆的中心，但是，当我按下任何键关闭程序时，它就会崩溃...... :(而且我必须强行关闭它。

我需要调整该算法以在相机中运行，因此当它像那样崩溃时我无法继续执行。

那么，有谁知道是什么导致了这个问题？我正在 Visual Studio 2012 和 OpenCV 2.4.2 版上进行开发。

如果有人能给我一个建议，或者尝试运行算法，我将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:19:28.187

我有四个建议给你。

**首先：**要查看 a 是否`Mat`为空，请使用

```
if( src.empty() ) // instead of !src.data. 
```

可能 src.data 具有空的随机（陈旧）值`Mat`。

**第二：**像这样更正索引：

```
Point center(cvRound(circles[i][0]), cvRound(circles[i][1]));
int radius = cvRound(circles[i][2]); 
```

（实际上你不需要 cvRound，但无论如何）。

**第三：**值得检查是否`imread`理解您要以彩色模式加载图像，通过检查其通道数：

```
src.channels()==3
//or
src.type()==CV_8UC3; // that is what you are counting for, really. 
```

否则，灰色图像上像 CV_BGR2GRAY 这样的线可能会导致奇怪的行为。

**第四：**你不需要释放Mat's。这就是他们首先创建 Mat 类的原因，以便他们自动处理发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T04:48:04.960

我开始对环境感到怀疑，所以我找了一个朋友，他安装了 OpenCV 来试用我的代码，他可以毫无问题地运行它......

所以我重新安装了所有东西，但这次我选择了 Microsoft Visual Studio 2010 SP1 和 OpenCV 2.4.3，它运行正常。

如果有人遇到同样的问题，我建议降级到 VS2010。另外，[这个视频安装指南](http://www.youtube.com/watch?v=cgo0UitHfp8)在我设置环境时真的很有帮助！

谢谢 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T03:15:28.177

除了您超出界限之外，我没有看到任何明显的东西`Vec3f`：

```
 Point center(cvRound(circles[i][0]), cvRound(circles[i][2]));
         int radius = cvRound(circles[i][3]); 
```

我认为您的意思不是索引 2 和 3，而是 1 和 2。

这不一定会导致崩溃（通过破坏堆栈或堆），但又是未定义的行为......

我建议的另一件事是删除`waitKey`调用后的两行：

```
 src.release();
    src_gray.release(); 
```

这些是由对象中的析构函数自动处理的，所以我不明白为什么需要手动执行。当然，这可能不会改变任何事情。

从那里开始，如果您仍然遇到崩溃，您应该开始省略部分代码，直到您可以隔离导致崩溃的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-21T09:39:22.350

我遇到了同样的问题。请确保在发布模式下运行您的应用程序时，您使用的是 opencv 发布 dll。这样做解决了我的问题。

参考： [https ://code.ros.org/trac/opencv/ticket/953](https://code.ros.org/trac/opencv/ticket/953)

# mysql - 比较来自同一选择查询的两个值

> ID：13736233
> 
> 赞同：0
> 
> 时间：2012-12-06T02:57:43.520
> 
> 标签：mysql, sql

我有一个选择查询，它从我的库存表中选择所有产品并将它们与另外两个表（表 l_products 和 a_products）连接起来

```
SELECT 
i.*, 
b.title, 
ROUND((i.price/100*80) - l.price,2)      AS margin, 
l.price                                  AS l_price, 
a.price                                  AS a_price, 
ROUND((a.price/100*80) - l.price, 2)     AS l_margin 

FROM inventory i 
LEFT JOIN products    b ON i.id  = b.id 
LEFT JOIN a_products  a ON i.id  = a.id 
LEFT JOIN l_products  l ON i.id  = l.id 

WHERE 
a.condition LIKE IF(i.condition = 'New', 'New%', 'Used%') 
AND l.condition LIKE IF(i.condition = 'New', 'New%', 'Used%') 
```

此选择查询通常会给我一个表，例如...

```
id,        title, condition, margin, l_price, a_price ...
001-new    ...    new        10      20       10       
001-used   ...    used       10      25       20
002.... 
```

现在我需要在查询中设置一个条件，它将忽略所有比“新”同类产品更昂贵（a_price 更高）的二手产品，例如在上面的示例中，您可以看到 001-used 的 a_price 高于 001 -新的。

我怎样才能实现这一点而不必解决使用 php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:14:54.960

`FULL JOIN`此查询与它自己在一个列上，该列对每个 id 前缀具有唯一相同的值。

您可以通过在`SELECT`调用中添加另一个字段来实现此效果，该字段为 001-new 和 001-used、002-new 和 002-used... 产生相同的唯一值...

可以通过定义自己的 SQL 例程从列中提取前 3 个字符来生成此类值。

# bash - 从字符串包含星号的文件中设置 bash 变量

> ID：13736234
> 
> 赞同：1
> 
> 时间：2012-12-06T02:57:47.590
> 
> 标签：bash, grep, cut

我想从 ios mobileprovision 文件中提取一些东西，其中之一是文件中存储的配置文件的名称，通常在文件中是这样的：

```
<key>Name</key>
<string>My Profile Name</string> 
```

或者

```
<key>Name</key>
<string>iOS Team Provisioning Profile: *</string> 
```

这些名称来自配置文件的名称，如 iOS 开发人员门户的 Provisioning 部分所示。

我以为我可以做这样的事情

```
#!/bin/bash
mypath='/Users/username/Library/MobileDevice/Provisioning Profiles/'
cd "$mypath"
for file in *.mobileprovision
do

get_the_profile_name=$(grep -i '<key>name</key>' -A1 -a "$mypath$file" | grep -v "Name" | cut -f2 -d\> | cut -f1 -d\<)

done 
```

这会将变量 get_the_profile_name 设置为命令的结果。它适用于该项目的第一个示例，但是，第二个示例导致变量包含目录中文件的文件名。我猜这是由于星号或冒号。

有什么方法可以实现我想要的，如果有，欢迎提出建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:05:05.933

> 我猜这是由于星号或冒号。

不，这是因为您没有正确引用。

```
echo "$get_the_profile_name" 
```

此外，[XMLStarlet](http://xmlstar.sourceforge.net/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T03:32:54.400

对我来说，第一个示例不起作用，因为您使用的是`grep -v`. 您可以使用更少的管道更安全地执行您想要的操作，`GNU sed`如下所示：

```
get_the_profile_name=$(sed -n '/<key>name<\/key>/I { n; s/[^>]*>\(.*\)<[^<]*/\1/p }' "$mypath$file")

echo "$get_the_profile_name" 
```

# android - 无法创建外部文件目录 - ANDROID

> ID：13736237
> 
> 赞同：4
> 
> 时间：2012-12-06T02:57:58.213
> 
> 标签：android, file

这是我的代码和下面的错误。我在日志中收到一条错误消息，指出无法创建外部文件目录。

```
String downloadURL = getString(R.string.download_URL);
Uri uri = Uri.parse(downloadURL);
DownloadManager.Request request = new Request(uri);
request.setAllowedNetworkTypes(Request.NETWORK_WIFI | Request.NETWORK_MOBILE);
request.setAllowedOverRoaming(false);
request.setTitle("Android Jelly Bean's Pic Download");
request.setDescription("Android Jelly Beans Pic Download using Download Manager");
request.setDestinationInExternalFilesDir(getApplicationContext(),    
Environment.DIRECTORY_DOWNLOADS, "abc.png");
downloadReference = dm.enqueue(request); 
```

有错误的行是 request.setDestinationInExternalFilesDir(getApplicationContext(),
Environment.DIRECTORY_DOWNLOADS, "abc.png");

```
12-05 18:51:55.436: W/ApplicationContext(1049): Unable to create external files directory
12-05 18:51:55.436: D/AndroidRuntime(1049): Shutting down VM
12-05 18:51:55.446: W/dalvikvm(1049): threadid=1: thread exiting with uncaught exception (group=0x409961f8)
12-05 18:51:55.476: E/AndroidRuntime(1049): FATAL EXCEPTION: main
12-05 18:51:55.476: E/AndroidRuntime(1049): java.lang.NullPointerException: file
12-05 18:51:55.476: E/AndroidRuntime(1049):     at android.net.Uri.fromFile(Uri.java:441)
12-05 18:51:55.476: E/AndroidRuntime(1049):     at android.app.DownloadManager$Request.setDestinationFromBase(DownloadManager.java:504)
12-05 18:51:55.476: E/AndroidRuntime(1049):     at android.app.DownloadManager$Request.setDestinationInExternalFilesDir(DownloadManager.java:466)
12-05 18:51:55.476: E/AndroidRuntime(1049):     at com.example.downloadmanagerapplication.DownloadManagerActivity.startDownload(DownloadManagerActivity.java:93)
12-05 18:51:55.476: E/AndroidRuntime(1049):     at com.example.downloadmanagerapplication.DownloadManagerActivity$1.onClick(DownloadManagerActivity.java:115)
12-05 18:51:55.476: E/AndroidRuntime(1049):     at android.view.View.performClick(View.java:3480)
12-05 18:51:55.476: E/AndroidRuntime(1049):     at android.view.View$PerformClick.run(View.java:13983)
12-05 18:51:55.476: E/AndroidRuntime(1049):     at android.os.Handler.handleCallback(Handler.java:605)
12-05 18:51:55.476: E/AndroidRuntime(1049):     at android.os.Handler.dispatchMessage(Handler.java:92)
12-05 18:51:55.476: E/AndroidRuntime(1049):     at android.os.Looper.loop(Looper.java:137)
12-05 18:51:55.476: E/AndroidRuntime(1049):     at android.app.ActivityThread.main(ActivityThread.java:4340)
12-05 18:51:55.476: E/AndroidRuntime(1049):     at java.lang.reflect.Method.invokeNative(Native Method)
12-05 18:51:55.476: E/AndroidRuntime(1049):     at java.lang.reflect.Method.invoke(Method.java:511)
12-05 18:51:55.476: E/AndroidRuntime(1049):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
12-05 18:51:55.476: E/AndroidRuntime(1049):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
12-05 18:51:55.476: E/AndroidRuntime(1049):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T03:07:48.143

为了将数据保存/写入文件或创建/删除目录，您必须在`manifest`文件中设置“使用”权限。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

示例：[Android 下载管理器](http://www.vogella.com/blog/2011/06/14/android-downloadmanager-example/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-26T08:51:06.847

您可以尝试以下方法：

`File file = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + File.separator + fileName);`

代替：

`request.setDestinationInExternalFilesDir(Context, Type, Path)`

# ajax - ajax请求实时监控

> ID：13736240
> 
> 赞同：0
> 
> 时间：2012-12-06T02:58:21.277
> 
> 标签：ajax

我们必须监控我们公司安装了 GPS 的汽车并在地图上绘制它们的位置。

我们使用谷歌地图，并使用带有自定义图标的 google.maps.Maker 渲染汽车。

一旦汽车的位置改变，我们重新设置标记的位置。

现在我们在实现`real-time`.

为了使汽车的位置实时，我们必须以小间隔刷新汽车位置。

我们尝试使用这种解决方案：

```
function refresh(){
    $.getJSONP(url,'xxx',function(data){
        resetLocation(data);
    }); 
}
setInterval(refresh,delay); 
```

现在如何设置延迟？

在客户看来，越小越好。因为它会使地图​​中的汽车平稳移动。例如，将延迟设置为 500 毫秒

但是，这会导致对服务器的频繁请求。服务器和浏览器能负担得起吗？

是否有替代方案来实现我们的要求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:08:33.393

如果您要进行高分辨率更新，最好使用 Websockets 或 Meteor 流并保持连接一段时间。

至于你的服务器能不能负担得起，那就由你说了算。典型的 MMO 会更频繁地发送更多数据；但他们使用数据中心。所以这取决于你有多少基础设施，你期望有多少客户端，以及服务器端需要做多少处理才能在发送之前编译数据。

如果您没有太多处理，那么使用基于事件的服务器（例如 Node.js）将是有利的。即使你这样做了，我仍然会从 Node 或 EventMachine 提供它，并将繁重的工作委托给其他进程。

如果您要使用 Node，请查看[socket.io 。](http://socket.io/)

# java - 在 Java 中使用 alt 代码

> ID：13736244
> 
> 赞同：1
> 
> 时间：2012-12-06T02:58:37.653
> 
> 标签：java, string, swing, awt, alt

所以我想知道是否有办法在java中将alt代码字符（♥♣☺☻）添加到字符串中？

像`JOptionPane.showMessageDialog(null, "This is a heart: ♥");`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T07:39:58.197

你有什么问题？

```
JOptionPane.showMessageDialog(null, "This is a heart: ♥"); 
```

![在此处输入图像描述](../Images/825747e20408e2fdab4de49e39277c9e.png)

或者，您可以使用 ALT 代码的 Unicode 版本来显示它们：

![在此处输入图像描述](../Images/b94f058b85c8d9e45c435ad2a1e7b9f8.png)

```
JOptionPane.showMessageDialog(null, "I \u2665 you"); 
```

正如我们在@Donald2000 的评论中看到的，使用 unicode 会是更好的选择

**参考：**

*   [http://unicode.org/charts/charindex.html](http://unicode.org/charts/charindex.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T08:34:25.623

你的例子对我也很好。

问题可能出在您的项目设置中。“项目源代码编码”应为 UTF-8。

您可以在 NetBeans 中更改此设置：右键单击项目名称、**属性**、**源代码**、**编码**：**UTF-8**

或者，如果您 在**pom.xml中使用****maven**：

 **```
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties> 
```**

# grails - 在 Grails 中，如何根据鉴别器在数据库中搜索某些内容？

> ID：13736250
> 
> 赞同：2
> 
> 时间：2012-12-06T02:59:17.003
> 
> 标签：grails, discriminator, grails-2.0.4

假设我有以下课程：

```
abstract class Fruit {
    String name

    static mapping = {
        discriminator column: 'type'
    }

class Banana extends Fruit {
    static mapping = {
        discriminator: 'Banana'
    }
}

class Apple extends Fruit {
    static mapping = {
        discriminator: 'Apple'
    }
} 
```

我需要实现一个搜索算法，这样，给定一个 JSON 字符串，我可以在数据库中找到一个特定的 Fruit 实例。例如：

```
{
    "type": "Apple"
    "name": "Green"
} 
```

或者

```
{
    "type": "Banana"
    "name": "Green"
} 
```

问题是，水果可以有相同的名称，所以如果我只是搜索这个：

```
Fruit.getByName('Green') 
```

它可能会返回`Apple`或`Banana`。我需要能够根据类型过滤它的类型，比如：

```
Fruit.getByNameAndType('Green', 'Apple') 
```

我如何在 Grails 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:33:33.603

查看生成的数据库。

`class`您可以在 Fruit 类的条件搜索中使用一列。

也许这可以作为

```
 Fruit.findAllByColorAndClassLike('Green','%Apple') 
```

也

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:33:21.360

Should this meet your need?

```
def fruits = Fruit.findAll("from Fruit where type = :type and name = :name", [type: "Apple", name: "Green"]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T03:04:17.607

```
Apple.getByName('Green') 
```

应该管用。你试过吗？

# java - 计算 myClickHandler 函数不起作用

> ID：13736251
> 
> 赞同：0
> 
> 时间：2012-12-06T02:59:20.850
> 
> 标签：java, android

我如何得到`calcBtn`计算？现在，如果我单击单选按钮并且重置按钮工作正常，程序将自动计算，但计算按钮不执行任何操作。

文件

```
import java.text.DecimalFormat;
import android.os.Bundle;
import android.app.Activity;
import android.view.View;
import android.widget.*;

public class MainActivity extends Activity implements RadioGroup.OnCheckedChangeListener{

EditText et1;
EditText et2;
EditText et3;
RadioButton rb1;
RadioButton rb2;
RadioButton rb3;
RadioButton rb4;
RadioGroup rg1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    et1=(EditText)findViewById(R.id.billText);
    et2=(EditText)findViewById(R.id.tipText);
    et3=(EditText)findViewById(R.id.totalText);
    rb1=(RadioButton)findViewById(R.id.five);
    rb2=(RadioButton)findViewById(R.id.ten);
    rb3=(RadioButton)findViewById(R.id.fifteen);
    rb4=(RadioButton)findViewById(R.id.twenty);
    rg1=(RadioGroup)findViewById(R.id.radioGroup1);
    rg1.setOnCheckedChangeListener(this);

}

public void onCheckedChanged(RadioGroup rg1, int i) {

    // TODO Auto-generated method stub
    if (i==rb1.getId()){
        double Bill = Double.parseDouble(et1.getText().toString());
        double Tip = Bill * .05;
        double Total = Tip + Bill;
        DecimalFormat df = new DecimalFormat("#.00");
        et2.setText(df.format(Tip));
        et3.setText(df.format(Total));
    }
    if (i==rb2.getId()){
        double Bill = Double.parseDouble(et1.getText().toString());
        double Tip = Bill * .1;
        double Total = Tip + Bill;
        DecimalFormat df = new DecimalFormat("#.00");
        et2.setText(df.format(Tip));
        et3.setText(df.format(Total));
    }
    if (i==rb3.getId()){
        double Bill = Double.parseDouble(et1.getText().toString());
        double Tip = Bill * .15;
        double Total = Tip + Bill;
        DecimalFormat df = new DecimalFormat("#.00");
        et2.setText(df.format(Tip));
        et3.setText(df.format(Total));
    }
    if (i==rb4.getId()){
        double Bill = Double.parseDouble(et1.getText().toString());
        double Tip = Bill * .2;
        double Total = Tip + Bill;
        DecimalFormat df = new DecimalFormat("#.00");
        et2.setText(df.format(Tip));
        et3.setText(df.format(Total));
    }
}
public void myClickHandler(View view)
{
    switch (view.getId())
    {
    case R.id.calcBtn:
        break;

    case R.id.resetBtn:
        et1.setText("");
        et2.setText("");
        et3.setText("");
        break;
    }
}

} 
```

xml文件

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/totalBill" />

<EditText
    android:id="@+id/billText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:inputType="numberDecimal" >
</EditText>

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="22dp"
    android:text="@string/tip" />

<RadioGroup
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:layout_gravity="center"
    android:id="@+id/radioGroup1"
     >

<RadioButton
    android:id="@+id/five"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:checked="false"
    android:text="@string/perefive" />

<RadioButton
    android:id="@+id/ten"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:checked="false"
    android:text="@string/pereten" />

<RadioButton
    android:id="@+id/fifteen"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:checked="false"
    android:text="@string/perefifteen" />

<RadioButton
    android:id="@+id/twenty"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:checked="true"
    android:text="@string/peretwenty" />

</RadioGroup>

<TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="17dp"
    android:text="@string/tiptotal" />

<EditText
    android:id="@+id/tipText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:inputType="numberDecimal" />

<TextView
    android:id="@+id/textView4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="16dp"
    android:text="@string/overalltotal" />

<EditText
    android:id="@+id/totalText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:ems="10"
    android:inputType="numberDecimal" />

<Button
    android:id="@+id/calcBtn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:onClick="myClickHandler"
    android:text="@string/calc" />

<Button
    android:id="@+id/resetBtn"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:onClick="myClickHandler"
    android:text="@string/reset" />
    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:05:54.640

`View.OnClickListener`在您的 MainActivity 类中实现 也可以使 Button 工作。并选择一个单选按钮，然后单击计算以计算小费和总数，将您的代码更改为

```
public class MainActivity extends Activity 
     implements RadioGroup.OnCheckedChangeListener, View.OnClickListener{

EditText et1;
EditText et2;
EditText et3;
RadioButton rb1;
RadioButton rb2;
RadioButton rb3;
RadioButton rb4;
RadioGroup rg1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    et1=(EditText)findViewById(R.id.billText);
    et2=(EditText)findViewById(R.id.tipText);
    et3=(EditText)findViewById(R.id.totalText);
    rb1=(RadioButton)findViewById(R.id.five);
    rb2=(RadioButton)findViewById(R.id.ten);
    rb3=(RadioButton)findViewById(R.id.fifteen);
    rb4=(RadioButton)findViewById(R.id.twenty);
    rg1=(RadioGroup)findViewById(R.id.radioGroup1);
    rg1.setOnCheckedChangeListener(this);

}
public void myClickHandler(View view)
{

    switch (view.getId())
    {
    case R.id.calcBtn:

      int i =   rg1.getCheckedRadioButtonId();
      if (i==rb1.getId()){
        double Bill = Double.parseDouble(et1.getText().toString());
        double Tip = Bill * .05;
        double Total = Tip + Bill;
        DecimalFormat df = new DecimalFormat("#.00");
        et2.setText(df.format(Tip));
        et3.setText(df.format(Total));
      }
     if (i==rb2.getId()){
        double Bill = Double.parseDouble(et1.getText().toString());
        double Tip = Bill * .1;
        double Total = Tip + Bill;
        DecimalFormat df = new DecimalFormat("#.00");
        et2.setText(df.format(Tip));
        et3.setText(df.format(Total));
    }
    if (i==rb3.getId()){
        double Bill = Double.parseDouble(et1.getText().toString());
        double Tip = Bill * .15;
        double Total = Tip + Bill;
        DecimalFormat df = new DecimalFormat("#.00");
        et2.setText(df.format(Tip));
        et3.setText(df.format(Total));
    }
    if (i==rb4.getId()){
        double Bill = Double.parseDouble(et1.getText().toString());
        double Tip = Bill * .2;
        double Total = Tip + Bill;
        DecimalFormat df = new DecimalFormat("#.00");
        et2.setText(df.format(Tip));
        et3.setText(df.format(Total));
       break;
    }
    case R.id.resetBtn:
        et1.setText("");
        et2.setText("");
        et3.setText("");
        break;
    }
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T03:15:04.820

然后最好尝试删除单选按钮的 onCheckChanged 中的计算逻辑。

```
public void myClickHandler(View view)
{
    switch (view.getId())
    {
    case R.id.calcBtn:

    if(rb1.isChecked()){
    double Bill = Double.parseDouble(et1.getText().toString());
            double Tip = Bill * .05;
            double Total = Tip + Bill;
            DecimalFormat df = new DecimalFormat("#.00");
            et2.setText(df.format(Tip));
            et3.setText(df.format(Total));
    }
    if(rb2.isChecked()){
    // same as you did in your logic
    }
    if(rb3.isChecked()){
    // same as you did in your logic
    }
    if(rb4.isChecked()){
    // same as you did in your logic
    }
break;
 case R.id.resetBtn:
        et1.setText("");
        et2.setText("");
        et3.setText("");
        break;
    }
} 
```

# ios - iOS 中的 MKMapKit 框架我需要付费吗？

> ID：13736254
> 
> 赞同：0
> 
> 时间：2012-12-06T02:59:42.090
> 
> 标签：ios, mapkit

嗨，我需要开发一个使用`MKMapKit`框架的 iOS 应用程序，我需要添加注释，问题是，这有什么成本吗？我不知道是否需要购买密钥才能使用此框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T09:12:36.023

在 iOS 中使用 MapKit 不会花费您任何费用。您可能需要向其他人付费以获取数据以进行注释，但这不会是 Apple。如果您正在为 iOS 6 或更高版本进行开发，您将无法与 Google 建立任何联系，并且在非 Google 地图上使用 Google 的数据实际上违反了他们的条款和条件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T03:01:24.300

不，你不需要它的钥匙 afaik。多年来，我一直在我的应用程序中使用地图，但从未收到过帐单。你可以通过谷歌找到这个。

# php - htaccess 页码

> ID：13736255
> 
> 赞同：2
> 
> 时间：2012-12-06T02:59:53.680
> 
> 标签：php, apache, .htaccess, webserver

我正在尝试构建一个 htaccess 文件，该文件在空白 URI 或数字 slug（页面）上显示索引文件，例如：example.com 或 example.com/12（后面附加 ?page=$1）

但是，当访问任何非数字 slug 时，它应该转到不同的页面。出于某种原因，我无法让它命中索引文件（即使是空白或数字）。我错过了什么？

这是我所拥有的：

```
Options All
RewriteEngine On

RewriteRule ^([0-9]*)/?$ index.php?page=$1 [L]
RewriteRule ^([^/]+)/?$ another_page.php?slug=$1 [L] 
```

空白 URI 或数字 URI 不应该使用 Last 标志命中第一条规则并加载 index.php 吗？我提出的每个请求都在访问 another_page.php

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:11:29.403

啊哈，我在发布这个问题后不久就想通了。

我确实需要最后的 RewriteCond 行，但原始文件也必须存在。我在创建 index.php 文件之前设置了这个 htaccess 文件（我正在寻找 404）。

这是有效的：

```
Options All
RewriteEngine On

RewriteRule ^([0-9]*)/?$ index.php?page=$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/?$ another_page.php?slug=$1 [L] 
```

多谢你们！

# php - 如果用户从下拉菜单中选择“请选择”选项，如何清除文本输入？

> ID：13736256
> 
> 赞同：0
> 
> 时间：2012-12-06T02:59:53.587
> 
> 标签：php, jquery, html

下面我有一个下拉菜单：

```
 $courseHTML = '';

.... //sql code to perform query goes here

    $courseHTML = '<select name="courses" id="coursesDrop">'.PHP_EOL;
    $courseHTML .= '<option value="">Please Select</option>'.PHP_EOL;           

    $courseInfo = array();

    while ( $courseqrystmt->fetch() ) {

    $courseHTML .= sprintf("<option value='%s'>%s - %s</option>", $dbCourseId,$dbCourseNo,$dbCourseName) . PHP_EOL; 

    $courseData = array();
    $courseData["CourseId"] = $dbCourseId;
    $courseData["CourseNo"] = $dbCourseNo;
    $courseData["CourseName"] = $dbCourseName;
    $courseData["Duration"] = $dbDuration;

    array_push($courseInfo, $courseData);
    }

    $courseHTML .= '</select>'; 
```

下面是 html 表格，它将在表格中显示课程的当前详细信息：

```
$editcourse = "
<form id='updateCourseForm'>

    <p><strong>Current Course Details:</strong></p>
    <table>
    <tr>
    <th></th>
    <td><input type='hidden' id='currentCourseId' name='CourseIdcurrent' value='' /> </td>
    </tr>
    <tr>
    <th>Course ID:</th>
    <td><input type='text' id='currentCourseNo' name='CourseNocurrent' readonly='readonly' value='' /> </td>
    </tr>
    <tr>
    <th>Course Name:</th>
    <td><input type='text' id='currentCourseName' name='CourseNamecurrent' readonly='readonly' value='' /> </td>
    </tr>
    <tr>
    <th>Duration (Years):</th>
    <td><input type='text' id='currentDuration' name='Durationcurrent' readonly='readonly' value=''/> </td>
    </tr>
    </table>    
    </form>

"; 
```

我在下面有一个 jquery 代码，它根据从下拉菜单中选择的选项在上面的文本输入中显示详细信息。它用细节填充文本输入没有问题。但我的问题是，假设发生的是，如果用户在下拉菜单中选择“请选择”选项，那么所有文本输入都应该是空的。问题是它仍然在文本输入中显示信息，尽管我在“请选择”选项上。

如果从下拉菜单中选择了“请选择”选项，我需要在下面的代码中更改什么以便能够清除文本输入？

```
$(document).ready( function(){

var courseinfo = <?php echo json_encode($courseInfo);?>;

        $('#coursesDrop').change( function(){

            var courseId = $(this).val(),
            coursedata;

        for (var i = 0, l = courseinfo.length; i < l; i++)
        {
                if (courseinfo[i].CourseId == courseId) { 
                    coursedata = courseinfo[i]; 
                    }
        }

        var currentindex = $('#currentDuration').val(coursedata.Duration);
        var editindex = $('#newDuration').val(coursedata.Duration);
        var currentid = $('#currentCourseId').val(coursedata.CourseId);
        var editid = $('#newCourseId').val(coursedata.CourseId);

            if( $(this).val() !== '' ){
                var text = $(this).find('option:selected').text();
                var split = text.split(' - ');
                $('#currentCourseNo').val( split[0] );     
                $('#currentCourseName').val( split[1] );       
            }
            else{
                $('#currentCourseNo,#currentCourseName,#currentDuration,#currentCourseId').val('');           
            }
        });
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:57:22.533

问题：

> 有一个错误，当我再次选择“PLease”选择选项时，错误控制台中显示错误，错误表明 coursedata 在这一行未定义`var currentindex = $('#currentDuration').val(coursedata.Duration);`

解释：

> 当您选择“请选择”时 courseId 为空白，因此在 for 循环中永远不会满足 if 条件，因此永远不会设置 coursedata。

解决方案：

首先检查一个有效的（不是“请选择...”）选择，然后进行工作。我还重新组织了 JS 的其他一些部分，所以它更有意义。

```
$(document).ready(function () {

    var courseinfo = <? php echo json_encode($courseInfo); ?> ;

    $('#coursesDrop').change(function () {
        var courseId = $(this).val();

        /*
            You only need to do all of this if user selects a course, so check that first.
        */
        if (courseId !== '') {
            /*
                Iterate over courses and, if the one we want exists, populate its info.
            */
            for (var i = 0, l = courseinfo.length; i < l; i++) {
                if (courseinfo[i].CourseId == courseId) {
                    $('#currentDuration').val(courseinfo[i].Duration);
                    $('#newDuration').val(courseinfo[i].Duration);
                    $('#currentCourseId').val(courseinfo[i].CourseId);
                    $('#newCourseId').val(courseinfo[i].CourseId);

                    var text = $(this).find('option:selected').text();
                    var split = text.split(' - ');
                    $('#currentCourseNo').val(split[0]);
                    $('#currentCourseName').val(split[1]);

                    /*
                        Without this break, the loop will continue until i = l.
                        We've already found our match, no need to continue.
                    */
                    break;
                }
            }
        } else {
            $('#currentCourseNo,#currentCourseName,#currentDuration,#currentCourseId').val('');
        }
    });
}); 
```

# css - CSS - Chrome 中忽略的最小/最大高度值

> ID：13736258
> 
> 赞同：3
> 
> 时间：2012-12-06T03:00:13.057
> 
> 标签：css, google-chrome

我正在使用从[这里](http://peterned.home.xs4all.nl/examples/csslayout1.html)修改的代码来创建一个具有最小高度和最大值的主页。基本上，如果高度低于某个值（400px），那么它会滚动，如果它高于某个值（600px），那么它会被剪裁。它在某种程度上类似于 Bing 主页。

这是我正在使用的代码的简化版本：

```
<html>
<head>
<style>
html,body{margin:0; padding:0; height:100%; min-height: 400px; max-height: 600px;}
div#container{position: relative; margin:0 auto; width:750px; background:#f0f0f0; height:auto !important; height:100%; min-height:100%; max-height: 600px;}
div#header{background:#ddd;}
div#footer{position:absolute; width:100%; bottom:0; background:#ddd;}
</style>
</head>
<body>
    <div id="container">
        <div id="header">Heading</div>
        <div id="content">Content</div>
        <div id="footer">Footer</div>
    </div>
</body> 
```

在 Firefox 和 Internet Explorer 中运行良好，但在 Chrome 中，浏览器似乎忽略了 min-height 和 max-height 标签，而是将#container 填充到页面的 100%。窗口较小并且是所需的最小值，然后它将#container 放在窗口的整个高度并滚动其余部分。

**编辑：**为了回答我自己的问题，我点击了[这个链接](https://stackoverflow.com/questions/8097270/css-chrome-interprets-div-with-height-nested-in-div-with-min-height-different?rq=1)，它把我带到了[这个](https://stackoverflow.com/questions/3808512/the-inherited-height-of-a-child-div-from-a-parent-with-a-min-height-attribute)链接，这让我实现了这个解决方案：

```
<html>
<head>
<style>
html,body{margin:0; padding:0; height:100%; min-height: 400px; max-height: 600px; position: relative;}
div#container{height: 100%; min-height: 400px; max-height: 600px; width: 800px; margin: 0 auto; position: relative;}
div#container2{position: absolute; left: 0; top: 0; width: 100%; min-height: 100%}
div#header{background:#ddd;}
div#footer{position:absolute; width:100%; bottom:0; background:#ddd;}
</style>
</head>
<body>
    <div id="container">
        <div id="container2">
          <div id="header">Heading</div>
          <div id="content">Content</div>
          <div id="footer">Footer</div>
        </div>
    </div>
</body> 
```

# asp.net-mvc - asp.net mvc 的示例应用程序

> ID：13736261
> 
> 赞同：0
> 
> 时间：2012-12-06T03:00:22.847
> 
> 标签：asp.net-mvc

我在 2.0 年前曾在 asp.net 上工作，最近在 SL 和 WPF 应用程序上工作，对 mvvm 有想法。由于我的下一个项目将在 ASP.net MVC DotNet FW 3.5 上进行，因此我正在寻找使用 MVC 的示例应用程序代码，任何关于此的链接\论坛都会对 gr8 有所帮助。

Welll 我正在浏览[http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-3](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-3)并注意到该视图使用 cshtml 文件扩展名而不是 aspx 并且感到困惑。请给我一些参考资料，让我从一个大人物开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:26:27.537

首先，我推荐 MVC4 和 .Net 4。

最简单的学习方法是使用默认的 MVC 4 互联网项目模板创建一个新项目。它涵盖了所有基础知识。

MVC 最重要的是您忘记了网页是磁盘上的文件。MVC 中的 .aspx 和 .cshtml 文件是控制器返回的视图。控制器是具有功能的类，在 MVC 术语中称为 Actions。如果你有一个 url，`/Home/Index`MVC 会在控制器类 Home 中调用函数 Index。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T03:05:24.907

[由 ASP.Net MVC3 Razor View Engine](http://www.asp.net/mvc/videos/mvc-3/mvc-3-razor-view-engine)`.cshtml`呈现的视图模板文件使用该扩展名。我经常发现视频可以很好地介绍我想了解更多的主题。

# delphi - 通过 http 的 Google Maps Geolocation API

> ID：13736266
> 
> 赞同：0
> 
> 时间：2012-12-06T03:01:14.243
> 
> 标签：delphi, geolocation, google-api

我正在按照此处的说明实施 Google Maps Geolocation API。[https://developers.google.com/maps/documentation/business/geolocation/](https://developers.google.com/maps/documentation/business/geolocation/)

问题是我的服务器是用delphi实现的，使用https非常复杂，

**有没有办法在纯 http 中使用这个 API？**

我知道存在一些安全问题，但特别是此功能仅存在于缓存子系统中，不会发送或存储敏感数据。

# visual-studio-lightswitch - Lightswitch 在 VS2012 中使用 oData 更新变更集

> ID：13736271
> 
> 赞同：1
> 
> 时间：2012-12-06T03:02:00.937
> 
> 标签：visual-studio-lightswitch

我只是有一个关于需要多个操作的更新的问题：如果每个基于 OData 的操作都是在单个资源上执行的 HTTP 动词（例如 POST 插入新订单，PUT 更新产品的可用数量；或者说客户端添加新产品以及该新产品的新类别），这是否意味着当在客户端调用 SaveChanges 时，变更集中的每个更改都将是对 OData 服务的单独网络调用，使用所需的对相关 URI 的 POST / PUT http 操作？

或者 Lightswitch 是否以某种方式绕过 uri 上单个 http 操作的 oData 规则，而是将整个变更集传递给单个 oData 操作，然后服务器对其进行反序列化并调用数据提供者上的相关数据更新操作？如果是这样，那个 oData/http 操作是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:44:14.380

LightSwitch 利用[OData 批处理](http://www.odata.org/documentation/batch)通过单个 HTTP 请求保存所有更改。目标的相关 URL 是 service/$batch

在编写 lightswitch 时，实际上不支持使用多个请求进行保存。[当使用不支持批处理的数据提供者时，这可能会导致问题](http://social.msdn.microsoft.com/Forums/en-US/LightSwitchDev11Beta/thread/b61ff498-63ec-49ed-9d0e-e0655e3cc92b/)

您可以在此处找到更多信息：[http ://www.odata.org/documentation/batch](http://www.odata.org/documentation/batch)

# c++ - 如何从`boost::function`中获取C指针（如`var (*)(void*, var)`）？

> ID：13736277
> 
> 赞同：1
> 
> 时间：2012-12-06T03:02:48.490
> 
> 标签：c++, boost, boost-function

> **可能重复：**
> [将 boost::function 降级为普通函数指针](https://stackoverflow.com/questions/282372/demote-boostfunction-to-a-plain-function-pointer)

所以我使用[Flash C++ 编译器（又名 flascc，alchemy）](http://gaming.adobe.com/technologies/flascc/)和 havin 代码，例如：

```
boost::function<var (void*, var)> f = boost::bind(&as3_socket::socket_socketData, this, _1, _2);                   
socket->addEventListener(flash::events::ProgressEvent::SOCKET_DATA, Function::_new(f, NULL)); 
```

得到下一个编译器错误：

```
$ g++ $JN -static -emit-llvm  -c src/utils/http/as3_socket.cpp -I../boost/boost_libraries/install-dir/include
src/utils/http/as3_socket.cpp: In constructor ‘as3_socket::as3_socket()’:
src/utils/http/as3_socket.cpp:75: error: no matching function for call to ‘AS3::ui::Function::_new(boost::function<AS3::ui::var ()(void*, AS3::ui::var)>*, NULL)’
/cygdrive/c/Users/Avesta/Downloads/FlasCC_1.0.1134176_11-09-2012/sdk/usr/bin/../../usr/include/AS3++/builtin.h:179: note: candidates are: static AS3::ui::Function AS3::ui::Function::_new()
/cygdrive/c/Users/Avesta/Downloads/FlasCC_1.0.1134176_11-09-2012/sdk/usr/bin/../../usr/include/AS3++/builtin.h:180: note:                 static AS3::ui::Function AS3::ui::Function::_new(AS3::ui::var (*)(void*, AS3::ui::var), void*) 
```

所以问题是如何从`boost::function<var (void*, var)>`更多的C风格中获得`var (*)(void*, var)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:01:20.917

简短的回答是“你不能”。

一个 boost 函数对象可能只包含一个函数指针，但它可能是调用`boost::bind ()`其他函数类型并绑定一些参数的结果。它还可能包含一个函数对象。

仅仅因为您可以像调用函数指针一样调用它并不意味着它是指向函数的指针。

[刚刚注意到-上面其他问题的链接详细解释了这一点]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:51:18.827

你问错问题了。

`boost::function`是一种表达“将来做某事”的方式，但它不是指向 C++ 函数的指针。我这太强了，不适合作为指向函数的指针。

但是，您的回调接口是一个 C++ 函数，它接受一个 void 指针和其他东西。通常，您为回调提供 void 指针和函数指针。

所以你要做的是创建一个函数，将 void 指针转换为一个对象，然后将该对象传递给它被调用的其余参数。

确保您转换为 void 和 back 的类型是相同的。

您甚至可以将指针指向`boost::function`void ptr。

请注意，这会给您带来管理好指向对象的生命周期的问题。糟透了不是吗？

# java - 如何使用排列生成器 Java

> ID：13736282
> 
> 赞同：1
> 
> 时间：2012-12-06T03:03:51.580
> 
> 标签：java, permutation

我已经得到了这个排列生成器，如下所示。我已经像这样初始化它：`PermutationGenerator perm = new PermutationGenerator(4);`.

我试图`next()`多次使用该功能，但我一直得到相同的结果。如何正确使用此代码来生成排列？

```
int[] try = p.next()

for(int i=0;i<try.length;i++) {
    System.out.println(try[i]);
}

// Generator of all permutations of: 0,1,2,...,n-1

public class PermutationGenerator {
// private data

private int[] perm;
private boolean first;

// constructor

public PermutationGenerator (int n) {
    perm = new int [n];
    first = true;
}

// return the next permutation, or null if no more
// Reference: Wikipedia Permutation 5.2.2

public int[] next () {
    int n = perm.length;

    // starting permutation: 0 1 2 3 ... n-1

    if (first) {
        first = false;
        for (int i = 0 ; i < n ; i++)
            perm [i] = i;
        return perm;
    }

    // construct the next permutation
    // find largest k so that perm[k] < perm[k+1]; if none, finish

    int i, j, k, l;

    for (k = n - 2 ; k >= 0 && perm [k] >= perm [k + 1] ; k--)
        ;
    if (k < 0)
        return null; // no more

    // find largest l so that perm[k] < perm[l]

    for (l = n - 1 ; l >= 0 && perm [k] >= perm [l] ; l--)
        ;

    // swap perm[k] and perm[l]

    swap (perm, k, l);

    // reverse perm[k+1]...perm[n-1]

    for (i = k + 1, j = n - 1 ; i < j ; i++, j--)
        swap (perm, i, j);

    return perm;
}

// swap a[i] and a[j]

private static void swap (int a[], int i, int j) {
    int temp = a [i];
    a [i] = a [j];
    a [j] = temp;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:37:59.003

```
import java.util.Random;

public class PermutationGenerator {

    private int[] perm;
    private static Random r = new Random();

    public PermutationGenerator(int n) {
        perm = new int[n];
        for (int i = 0; i < n; i++) {
            perm[i] = i;
        }
    }

    public int[] next() {
        helper(perm, perm.length);
        return perm;
    }

    private static void helper(int[] a, int length) {
        if (length > 1) {
            swap(a, r.nextInt(length), length - 1);
            helper(a, length - 1);
        }
    }

    private static void swap(int a[], int i, int j) {
        int temp = a[i];
        a[i] = a[j];
        a[j] = temp;
    }

    public static void main(String[] args) {
        PermutationGenerator generator = new PermutationGenerator(4);
        int[] perm = generator.next();
        for (int i = 0; i < perm.length; i++) {
            System.out.println(perm[i]);
        }
    }
} 
```

我从午休时间只花了五分钟就写了上面的工作代码。如果你愿意，试试吧。

至于您发布的代码，它的可读性不是很高，我没有过多研究。但是我在该`next`方法中发现的一个直接且明显的错误是它使用了比较，如`perm [k] >= perm [k + 1]`and `perm [k] >= perm [l]`。

在生成排列时，在元素之间进行任何比较是绝对没有必要的，甚至是错误的。

# 64-bit - Android ADT 捆绑包的问题。分配内存失败：8

> ID：13736286
> 
> 赞同：1
> 
> 时间：2012-12-06T03:04:03.500
> 
> 标签：64-bit, emulation, bundle, adt, avd

我对Android开发比较陌生，但一直在关注一本书，但由于我的经验水平，我不一定认为我的问题是。最近，Google 更新了一个 Android ADT Bundle，我认为这是一个绝妙的主意，但我在使用虚拟设备时遇到了一些严重的问题。我在 Windows 7 64bit 上，当我尝试运行虚拟设备时，例如存储 Galaxy Nexus 值，我收到错误屏幕报告

```
Failed to allocate memory: 8
This application has requested the Runtime to terminate it in an unusual way.
Please contact the application's support team for more information. 
```

暂时我打算不使用 Bundle，但我真的很想知道出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T23:08:51.890

您提供的细节太少，但让我尝试作为心灵感应者...
我认为，这是对您的问题的回答[Android emulator failed to allocate memory 8](https://stackoverflow.com/questions/11667907/android-emulator-failed-to-allocate-memory-8)
即使不是答案，我也不认为您已经尝试过这个[解决方案](http://bit.ly/STOHXo)

甚至还有一种解决方案（我在高分辨率 AVD 的情况下使用它）。您可以从 *.bat 文件运行您的 AVD，其内容如下：

```
cd C:\_my_folder\Android\android-sdk\tools
emulator-x86 @Intel_Android -memory 896 
```

# android-pay - 可以确定本地化价格吗？

> ID：13736290
> 
> 赞同：0
> 
> 时间：2012-12-06T03:04:30.430
> 
> 标签：android-pay

在谷歌钱包中，我以美元设定价格 - 但我正在销售数字商品，我的客户可能在世界任何地方

有什么方法可以查看 Google 电子钱包将以本地货币收取的费用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T00:44:54.790

通常 StackOverflow 是针对技术问题的。但到底是什么，我会在这个破解。

Google 电子钱包不会将您的美元价格转换为客户的本国货币。反之亦然，因此您的商品价格是固定的，您收到的金额会根据当前的外汇汇率而变化。您应该 IP 地理定位并以地理定位货币定义商品的市场价格。

# python-2.7 - 将数据文件读取到数组/列表

> ID：13736294
> 
> 赞同：0
> 
> 时间：2012-12-06T03:05:09.007
> 
> 标签：python-2.7

目标：读取数据文件（数值），创建数组/列表问题：每个数字都形成为数组，而不是我需要整个值作为一个数组/列表

输入数据文件 (1.txt)：2 列由制表符分隔

0.85787 0.8E-03

0.8578 45.8E-03

0.857878 5.8E-03

0.657878 2.3E-03

…………

```
crs = open("1.txt","r")
for line in crs:
 x = line.split()
 k=str(x[0]) # string to avoid spacing problem
 v=str(x[1])
 print k[0] 
```

k[0] 仅列出第一个数字，即

0

0

0

0

0

但我的要求是将 0.85787 存储在 k[0] .... 0.657878 在 k[3] ....

和 v[0] 中的 0.8E-03 ...... v[3] 中的 2.3E-03 .... 并进一步使用它，重要的是没有空格/间隙。

欢迎提出建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:26:50.250

如果您需要为数据的两列创建单独的列表，最简单的方法是在开始循环之前简单地创建列表，然后在循环文件时附加到它们：

```
k = []
v = []
with open("1.txt", "r") as crs:
    for line in crs:
        x = line.split()
        k.append(x[0]) # use float(x[0]) if you want numbers rather than strings
        v.append(x[1]) 
```

一个更“Pythonic”（但可能更难理解）的解决方案是使用生成器表达式和`zip`函数同时创建两个列表：

```
with open("1.txt", "r") as crs:
    k, v = zip(*(line.split() for line in crs)) 
```

# android - 如何确定 Linux 中是否已经存在互斥对象？

> ID：13736295
> 
> 赞同：1
> 
> 时间：2012-12-06T03:05:10.507
> 
> 标签：android, linux, windows, multithreading, porting

我目前正在尝试将一个为 WIN32 编写的多线程库移植到 Android/Linux，我似乎在尝试映射 WIN32 互斥锁具有的特定功能时遇到了一些问题。

从 Windows 互斥对象的文档中：

> 其他进程中的线程可以通过在对 CreateMutex 的调用中指定对象名称来打开现有互斥对象的句柄。如果已存在同名的互斥对象，GetLastError 将返回 ERROR_ALREADY_EXISTS。

我无法在 Linux 手册页中找到与 Windows API 提供的内容类似的任何信息。

我问这个问题的主要原因是我移植的互斥体创建代码包含：

```
isCreator = !(::GetLastError() == ERROR_ALREADY_EXISTS); 
```

其中`isCreator`是布尔数据类型。（不确定它的用途，但我认为它很重要）。

编辑：

```
mutex = PTHREAD_MUTEX_INITIALIZER;
// attributes??

if (pthread_mutex_init(&mutex, NULL) != 0) {
 throw Nv_EXCEPTION(XCPT_ResourceAllocationFailure, GetLastError());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:13:48.877

您对命名的进程间互斥锁的最简单模拟可能是一个[命名的实时信号量](http://pubs.opengroup.org/onlinepubs/9699919799/functions/sem_open.html)，初始化为一 (1) 的值。尝试`sem_open("/the_sem", O_CREAT|O_EXCL, mode, 1)`。如果您不是第一个，O_EXCL 将失败并显示 EEXIST，如果您不是第一个，则`sem_open`没有标志的后续应该成功：

```
sem_t *sem;
int isCreator = 0;

if ((sem = sem_open("/the_sem", O_CREAT|O_EXCL, mode, 1)) != SEM_FAILED) {
  // We got here first
  isCreator = 1;
} else {
  if (errno != EEXIST) uh_oh_goodbye();

  // We're not first.  Try again
  sem = sem_open("/the_sem", 0);
  if (sem == SEM_FAILED) uh_oh_goodbye();
} 
```

注意：如果同步对象在共享内存中初始化，您*可以*在进程之间共享 pthread 互斥锁（以及匿名实时信号量）。POSIX 共享内存实时扩展也允许[命名共享内存](http://pubs.opengroup.org/onlinepubs/9699919799/functions/shm_open.html)。然后在创建共享内存和初始化互斥体之间存在一些竞争，但在这种情况下，除了比赛获胜者之外，尝试调用`pthread_mutex_init()`应该会失败并出现 EBUSY。

# php - 使用 javascript 和 mysql 查询自动填充字段以进行下拉

> ID：13736296
> 
> 赞同：2
> 
> 时间：2012-12-06T03:05:15.873
> 
> 标签：php, javascript, html, mysql

我有一个关于如何从 mysql 数据库中的列自动填充下拉菜单的问题，然后根据用户的选择自动填充下面的字段。请帮忙！我的代码不会正确发布。我知道如何查询数据库并填充下拉列表，但我无法让下面的字段自动填充。

```
<?php
if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
echo "1 record added";

mysql_close($con);
header("Location: dashboard.html")
?> 
<?php
$con = mysql_connect("localhost","root","password");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());

else { 
mysql_select_db("Transgen", $con);?>
$query = "SELECT * FROM PartnerSetup" or die(mysql_error()); 
$result = mysql_query($query) or die(mysql_error()); 

    if(mysql_num_rows($result) > 0) {
        while($row = mysql_fetch_assoc($result)) { 
            echo ($row['Partner']); echo "<br/>"; 
        } 
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:37:54.580

是时候开裂了；

首先是代码中的错误；

> if (!mysql_query($sql,$con))

这应该在您的数据库连接信息中处理：

例子：

```
$host = "HOST";
$Username = "user"; 
$Password = "password"; 
$sql = mysql_connect("$host", "$Username", "$Password");
$conn = mysql_select_db("DATABASENAME", $sql); // Depending on what $sql and $con contain on your code. 
```

然后你的 if 语句：

> if (!mysql_query($sql,$con)) {...}

应替换为：

```
if (!($sql))
{
   die('Error: ' . mysql_error());
} // Kills the script if correct information could not be used to access the database 
```

你有回声

> echo "添加了 1 条记录";

哪个在你的括号之外`{ or }`

我假设这是在 a`function`或 a`$_POST/$_GET` 如果是这样，那么忽略上面的

如果没有，那么您的脚本将不需要地回显该字符串。这个应该修改

在以下情况下，您还过早关闭了 PHP 标记：`mysql_select_db("Transgen", $con);?>`

^ 另外; 在设置 $sql 之前，您有 !$sql 和 !con；在线上：

`$con = mysql_connect("localhost","root","password");`

哪个 $con 在初始变量之后声明，如果您在显示的第一行之前尚未设置 $con 和 $sql ，这可能会返回错误。

所以你`$query`不会被执行，而是以纯文本形式显示给查看页面的用户/人。`

并回答您的问题；如果您打算通过 javascript 进行操作，请在线查看。

这可以通过 PHP 完成，方法是使用带有一些查询的 while 循环来填充 PHP 它自身的下拉菜单。

```
<select name="SELECTNAME"> 
    <?PHP
        $DropDownQuery = mysql_query("SELECT * FROM PartnerSetup");
        while ($Rows = mysql_fetch_array($DropDownQuery))
        {
            $Partner = $Rows['Partner'];
            echo "<option value=\"$Partner\">$Partner</option>";
        } // This will enable the user to submit a "partner" if needed in a <form> </form> setup
    ?>
    </select> 
```

我建议在您的代码中附加错误，**我将按照已提交的内容以及我可以看到的内容进行说明。据我所知，我已经指出了可能/将返回错误的区域。**

我还会研究 PDO 功能；因为 MySQL 已贬值，并将从未来的 PHP 修订版中删除。

# c# - 如何通过Http在android中获取数据和响应数据？

> ID：13736297
> 
> 赞同：0
> 
> 时间：2012-12-06T03:05:16.277
> 
> 标签：c#, java, android, asp.net, visual-studio-2010

我想通过 Http 将数据从 android 发送到网站 asp.net，但是在我的计算机中的 Visual Studio 2010 中的网站，如何通过 Http 将数据从移动设备发送到网站。注意：我通过无线网络翻译数据

请给我关于移动和视觉工作室之间如何连接的教程（设置移动和视觉工作室）。和 java 中的示例代码如何从移动设备发送数据并在网站 asp.net 中接收。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:42:16.470

**如果我要与服务器通信，这是代码示例**

```
// this method takes URL as input and returns JSON data 
//parent class name is "NewWebHelper.java"

public String getResult(String url) {

        Log.v(TAG, "Final Requsting URL is : :"+url);

        String line = "";
        String responseJsonData = null;

        try {
            StringBuilder sb = new StringBuilder();
            String x = "";
            URL httpurl = new URL(url);
            URLConnection  tc= httpurl.openConnection();   

            BufferedReader in = new BufferedReader(
                              new InputStreamReader(tc.getInputStream()));

            if(in !=null){
                while ((line = in.readLine()) != null) {
                sb.append(line + "\n");
                x = sb.toString();
            }
            responseJsonData = new String(x);

            }
        }
        catch (UnknownHostException uh){            
            Log.v("NewWebHelper", "Unknown host :");
            uh.printStackTrace();
        }
       catch (FileNotFoundException e) {
           Log.v("NewWebHelper", "FileNotFoundException :");
            e.printStackTrace();
         }
        catch (IOException e) {
            Log.v("NewWebHelper", "IOException :");
            e.printStackTrace();
        }
      catch (Exception e) {
          Log.v("NewWebHelper", "Exception :");
            e.printStackTrace();
        }
        return responseJsonData;
    } 
```

* * *

让我知道您是否在重新评分时遇到任何问题。

# jquery - 具有弹性效果的 CSS div 框动画

> ID：13736299
> 
> 赞同：1
> 
> 时间：2012-12-06T03:05:40.960
> 
> 标签：jquery, css, jquery-animate

嘿，我有一个我想要在这里完成的工作的 JSFiddle > [JSFIDDLE 代码](http://jsfiddle.net/HRGKq/13/)

问题是我不确定如何在打开和关闭到较小的正方形时赋予它弹性效果。但是，目前一旦您将鼠标悬停在它上面，它就会变得疯狂:o)。当它重新调整大小时，它似乎也把文本推到了疯狂的地方。无论盒子的形状如何，我怎样才能让文本看起来相同？

JS代码：

```
$('#menuSquare').mouseover(function() {
    $('#menuSquare').animate({
        width: "95",
        height: "400",
        padding: '20',
        opacity: 0.8
    }, 1000)
});

$('#menuSquare').mouseout(function() {
    $('#menuSquare').animate({
        width: "20",
        height: "20",
        opacity: 0.4
    }, 1000)
}); 
```

​HTML：

```
<div id="menuSquare" class="TheMenuBox">
      <p><a href="#" style="text-decoration:none; color:#666;">Category 1</a></p>
      <p><a href="#" style="text-decoration:none; color:#666;">Category 2</a></p>
      <p><a href="#" style="text-decoration:none; color:#666;">Category 2</a></p>
</div>​ 
```

CSS：

```
body,td,th {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 13px;
    color:#666;
}
body {
    background-color: #0CF;
    margin-left: 0px;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 0px;
}

.TheMenuBox {
    position:absolute; 
    background-color:#FFF; 
    width: 20px; /* 95 */
    display:block; 
    height: 20px;
    top:16px; 
    left:260px; 
    opacity:0.40; 
    filter:alpha(opacity=40); 
    z-index:1000; 
    padding:0px; /* 20 */
    text-transform:uppercase; 
    text-decoration:none;
    overflow: hidden;
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T03:28:47.990

您只需要将框的内容设置为绝对 - 我通过使用名为 inner 的类将内容包装在 div 中来做到这一点

```
.inner {position:absolute;top:20px;left:20px; width:95px;} 
```

并在您的 .animate 调用之前添加一个 .stop() 以阻止它们触发，而另一个试图以相反的方式设置动画。

```
$('#menuSquare').stop().animate({ 
```

看我的小提琴... [http://jsfiddle.net/HRGKq/9/](http://jsfiddle.net/HRGKq/9/)

马特

# c# - 使用 c# 在方法内设置数组长度

> ID：13736300
> 
> 赞同：0
> 
> 时间：2012-12-06T03:05:41.470
> 
> 标签：c#

我知道这是一个简单的问题，但它困扰了我一整天。我尝试通过方法（setLength）中的变量设置数组的长度。但是我调用方法之后`setLength`，我的数组长度还是0，不是我调用方法的时候设置为5`setLength`吗？

C#代码片段：

```
class myProject 
{
   public static int length = 0;
   public static string[] myArray1 = new string[length];
   public static string[] myArray2 = new string[length];

public static void setLength()
{
  length = 5;
}

public static void process()
{
  setLength();

    for(int i=0; i<length; i++)
     {
       .....code for my array
     }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T03:08:13.220

您必须创建一个新数组。

```
public static void setLength()
{
    length = 5;
    myArray1 = new string[length];
} 
```

你不能随意改变长度。c# 数组不支持。

如果您想使用可变长度结构，我建议使用`List<string>`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T03:09:06.900

数组的大小是在构造对象时使用长度变量的*值设置的。*数组中没有创建变量关系：大小设置一次，之后固定。

如果您想要一个改变大小的数组，请使用 List<string> 之类的集合类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T03:14:34.057

由于`myArray1`和`myArray2`都被定义为长度等于`length`，因此除非您更改它，否则它们的长度将始终为 ，因为 IDE 逐行编译项目。`length``0``0`

但是，如果您愿意更改数组长度，您可以使用`Array.Resize<T>(ref T[] array, int newSize)`where`array`数组来调整大小，并且`newSize`是数组的新长度。

**例子**

```
class myProject 
{
   public static int length = 0; //Initialize a new int of name length as 0
   public static string[] myArray1 = new string[length]; //Initialize a new array of type string of name myArray1 as a new string array of length 0
   public static string[] myArray2 = new string[length]; //Initialize a new array of type string of name myArray2 as a new string array of length 0

public static void setLength()
{
    length = 5; //Set length to 5
}

public static void process()
{
    setLength(); //Set length to 5
    Array.Resize(ref myArray1, length); //Sets myArray1 length to 5
    //Debug.WriteLine(myArray1.Length.ToString()); //Writes 5
} 
```

**注意**：在大多数情况下，最好使用`System.Collections.Generic.List<T>`它，因为它更易于管理和动态调整大小。

**例子**

```
List<string> myList1 = new List<string>(); //Initializes a new List of string of name myList1
private void ListItems()
{
    AddItem("myFirstItem"); //Calls AddItem to add an item to the list of name myFirstItem
    AddItem("mySecondItem"); //Calls AddItem to add an item to the list of name mySecondItem
    AddItem("myThirdItem"); //Calls AddItem to add an item to the list of name myThirdItem

    string[] myArray1 = GetAllItemsAsArray(myList1); //Calls GetAllItemsAsArray to return a string array from myList1

 /* foreach (string x in myArray1) //Get each string in myArray1 as x
    {
        MessageBox.Show(x); //Show x in a MessageBox
    }   */
}
private void RemoveItem(string name)
{
    myList1.RemoveAt(myList1.IndexOf(name)); //Removes an item of name "name" from the list using its index
}
private void AddItem(string name)
{
    myList1.Add(name); //Adds an item of name "name" to the list
}
private string[] GetAllItemsAsArray(List<string> list)
{
    string[] myArray = new string[list.Count]; //Initialize a new string array of name myArray of length myList1.Count
    for (int i = 0; i < list.Count; i++)  //Initialize a new int of name i as 0\. Continue only if i is less than myList1.Count. Increment i by 1 every time you continue
    {
        myArray[i] = list[i]; //Set the item index of i where i represents an int of myArray to the corresponding index of int in myList1
    }

    return myArray; //Return myArray
} 
```

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T03:21:56.380

您应该做的不是在类声明中初始化数组的大小，而是在 setLength 方法中对其进行初始化。前面的答案状态的问题是，一旦你初始化了你的数组，调整它的大小是一项昂贵的操作。如果这将是您不止一次做的事情，您需要考虑使用`List<string>`.

```
class myProject 
{
   public static int length = 0;
   public static string[] myArray1;
   public static string[] myArray2;

   public static void setLength(int value)
   {
       myArray1 = new string[value];
       myArray2 = new string[value];
   }

   public static void process()
   {
      length = 5;
      setLength(length);

      for(int i=0; i<length; i++)
      {
         .....code for my array
      }
   }
} 
```

# mysql - 连接 3 个表中的多个列

> ID：13736301
> 
> 赞同：1
> 
> 时间：2012-12-06T03:05:42.283
> 
> 标签：mysql

看这个解决方案： [MySql Join 三表](https://stackoverflow.com/questions/3709560/mysql-join-three-tables)

我看到我可以通过执行以下操作来加入 3 个表：

```
select s.name "Student", c.name "Course"
from student s, bridge b, course c
where b.sid = s.sid and b.cid = c.cid 
```

但似乎我只能从每个表中选择一列？我需要加入 3 个表中的多个列，其中 sys_visits 为主表，其中 userID=contrID (sys_users, sys_visits) 和 clientID=clientID (sys_client, sys_visits)

```
SELECT pid, clientID, contrID, serviceDate, serviceStart, serviceStop FROM sys_visits
SELECT userGroupID, userID, fname, lname FROM sys_users
SELECT clientID, clientFName, clientLName FROM sys_client ORDER BY clientLName ASC 
```

我已经尝试了许多变体，但似乎无法正确使用语法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T03:13:07.497

改用`ANSI SQL-92`join 的格式。

```
SELECT  a.*, b.*, c.*
FROM    sys_users a
        INNER JOIN sys_visits b
            ON a.userID = b.contrlD
        INNER JOIN sys_client c
            ON b.clientID = c.clientID 
```

在查询中使用星号表示您正在选择表中的*所有列*。如果您只想选择特定列，请在查询中显式声明列名，例如：

```
SELECT  a.userGroupID, a.userID, a.fname, a.lname,
        b.*, 
        c.*
FROM    sys_users a
        INNER JOIN sys_visits b
            ON a.userID = b.contrlD
        INNER JOIN sys_client c
            ON b.clientID = c.clientID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T03:12:06.400

您可以从表格中选择任何数字列。

```
 SELECT sv.pid, sv.clientID, sv.contrID, sv.serviceDate, sv.serviceStart, sv.serviceStop, su.userGroupID, su.userID, su.fname, su.lname, sc.clientFName, sc.clientLName 
    FROM sys_visits sv, sys_users su, sys_client sc 
    ORDER BY sc.clientLName ASC 
```

**这是使用[推荐]**的另一种方法`JOINS`

 **```
SELECT sv.pid, sv.clientID, sv.contrID, sv.serviceDate, sv.serviceStart, sv.serviceStop, su.userGroupID, su.userID, su.fname, su.lname, sc.clientFName, sc.clientLName FROM sys_visits sv
JOIN sys_users su ON su.userID = sv.contrID 
JOIN sys_client sc ON sc.clientID = sv.clientID 
ORDER BY sc.clientLName ASC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-02T18:15:34.743

例如，想想你是否有三张桌子

指定，资格，专业和教师表。在这里，如果你想在教师表中加入三个表，其中包含教师 ID、教师名称、指定 ID、资格 ID、专业化 ID、状态等...

```
    选择
    t.name 作为teacher_name，
    d.name 作为 designation_name，
    q.name 作为qualification_name，
    s.name 作为 specialization_name
       来自教师 t
    INNER JOIN 指定 d ON t.designation_id = d.id
    INNER JOIN 资格 q ON t.qualification_id = q.id
    INNER JOIN 特化 s ON t.specialization_id = s.id
    其中 t.status = 1;

```**

# iphone - 在 iPhone 而非 iPhone 模拟器上编译时出错

> ID：13736303
> 
> 赞同：1
> 
> 时间：2012-12-06T03:05:46.810
> 
> 标签：iphone, objective-c, compiler-errors, linker-errors, mach-o

这是错误消息：

```
ld: file is universal (3 slices) but does not contain a(n) armv7s slice: /Users/Michael/Desktop/Phattie/phattie/SpeechKit.framework/SpeechKit for architecture armv7s
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

是的，这是一个可怕的 Mach-O 链接器错误。我受不了他们。我的应用程序的早期版本在我的 iPhone 上运行，我只是好奇发生了什么，任何帮助表示赞赏！

*   迈克尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T03:08:28.250

您正在使用 armv7s 架构构建应用程序，但 SpeechKit 不包含这样的架构。要么获取包含 armv7s 的框架的更新版本，要么从应用程序使用的架构列表中删除 armv7s。

# python - 了解主循环的一个元素

> ID：13736310
> 
> 赞同：0
> 
> 时间：2012-12-06T03:07:13.897
> 
> 标签：python, loops

我刚开始使用 Python。我需要帮助了解如何执行我的程序的主循环。

我有一个包含两列数据、温度和时间的源文件。该文件由 bash 脚本每 60 秒更新一次。

我成功编写了这三个独立的程序；1\. 可以读取源数据的最后 1440 行并绘制日图的程序。2\. 可以读取源数据的最后 10080 行并绘制周图的程序。3\. 可以读取源数据并仅显示最后记录的温度的程序。4\. 检查源文件的大小并删除超过 X 天的数据。

我想把它们放在一起，以便用户可以在 3 种不同的显示类型之间切换。我知道这将在主循环中工作，只需在循环中检查输入，并根据返回的内容调用函数。

但我不知道如何处理文件大小检查。我不希望每次循环循环时都检查它。我希望它每天运行一次。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:23:09.643

最简单的解决方案是在循环之外添加一个变量，该变量存储上次检查数据大小的时间。每次通过您的循环，您都可以比较当前时间与每次通过循环的最后一次时间，并检查是否超过 X 时间已经过去。

# android - 测试字段是否为空并阻止用户保存到 sqlite - android

> ID：13736313
> 
> 赞同：1
> 
> 时间：2012-12-06T03:07:20.163
> 
> 标签：android, sqlite

我如何测试该字段是否未被用户填写？我想提示他们必须完全填写这些字段。但即使名称为空并且输入了数字，此代码仍然接受。

```
public void onClick(View arg0)
{
    switch(arg0.getId())
    {
    case R.id.bSQLUpdate:
        boolean diditwork = true;
        try
        {
        String name = sqlName.getText().toString();
        String number = sqlNumber.getText().toString();

        GroupDb entry = new GroupDb(ContactDb.this);
        entry.open();
        if(name != null && number != null)
        {
            if((!entry.hasDuplicateNameNumber(name, number)) )
            {
                entry.createEntry(name, number);

            }
            else
            {
                diditwork = false;
                Dialog d = new Dialog(this);
                d.setTitle("Error");
                TextView tv = new TextView(this);
                tv.setText("Duplicate name or number. Please try again.");
                d.setContentView(tv);
                d.show();
                sqlName.setText("");
                sqlNumber.setText("");
            }
        }
        else
        {
            diditwork = false;
            Dialog d = new Dialog(this);
            d.setTitle("Error");
            TextView tv = new TextView(this);
            tv.setText("Please fill up all fields. Please try again.");
            d.setContentView(tv);
            d.show();
            sqlName.setText("");
            sqlNumber.setText("");
        }

        entry.close();
        }
        catch(Exception e)
        {
            diditwork = false;
            String error = e.toString();
            Dialog d = new Dialog(this);
            d.setTitle("Update failed");
            TextView tv = new TextView(this);
            tv.setText(error);
            d.setContentView(tv);
            d.show();
            sqlName.setText("");
            sqlNumber.setText("");
        }
        finally
        {
            if(diditwork)
            {
                Dialog d = new Dialog(this);
                d.setTitle("Contact list updated");
                TextView tv = new TextView(this);
                tv.setText("Success");
                d.setContentView(tv);
                d.show();
                sqlName.setText("");
                sqlNumber.setText("");
            }
        }
        break;

    case R.id.bSQLOpenView:
        Intent intent = new Intent();
        intent.setClass(ContactDb.this, CustomListView.class);

        startActivityForResult(intent, 0);
        break;

    }

}// end onclick 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T03:10:19.213

尝试检查以下条件

```
if((name.length() > 0) && (number .length() > 0))
        {
// do the work

} 
```

代替

```
if(name != null && number != null)
        {
// do the work
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T03:09:56.190

你用 null 测试了你的字符串。当文本框为空时字符串名称不为 null，它是一个空字符串。所以比较如下

```
if(!name.trim().equals("") && !number.trim().equals("")){
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T03:20:23.917

虽然我同意上面的答案，但我最近发现这个库可以创建一些东西来更稳健地测试用户输入。

[https://github.com/throrin19/Android-Validator](https://github.com/throrin19/Android-Validator)

> Android 的表单验证器库基于用 PHP 编码的 Zend_Validator。该库旨在简化和流线化验证表单 Android 的代码。目前，表单只能处理 EditText。其他元素将出现在未来的版本中。

正如前面的答案所建议的，您可以检查长度或查看字符串是否为空白。已经有一个关于 Java 的综合 SO previous question 所以它在 Android 中与您相关。值得一看 [Java，检查一个字符串是否不为空且不为空？](https://stackoverflow.com/questions/3598770/how-to-check-whether-a-string-is-not-null-empty)

# java - 为什么xjc告诉我位置不明？

> ID：13736314
> 
> 赞同：4
> 
> 时间：2012-12-06T03:07:21.333
> 
> 标签：java, jaxb, xsd

我使用 xjc 2.2.4-2 生成 java 类。我有2个xsd文件，message.xsd和typeDef.xsd，绑定文件是schema.xjb但是当我执行下面的命令时，只生成了message.xsd。

> bash-3.2$ xjc -d jaxb -b schemas/ schemas/*.xsd -verbose
> 解析模式...
> 编译模式...
> 
> [INFO] 生成代码
> 未知位置
> org/openuri/ChangeOfferingStateType.java
> org/openuri/ObjectFactory.java
> org/openuri/package-info.java

为什么没有生成 typeDef.xsd？

这是我的 xsd 和 xjb 文件。

bash-3.2$ cat schemas/message.xsd

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:gsta="http://gsta.com/neva2/externalService" 
    targetNamespace="http://www.openuri.org/"
    elementFormDefault="qualified" 
    attributeFormDefault="unqualified">
    <xs:import namespace="http://gsta.com/neva2/externalService" schemaLocation="typeDef.xsd" />
    <xs:complexType name="ChangeOfferingStateType">
        <xs:sequence>
            <xs:element name="workFlowNo" type="xs:string" minOccurs="0" />
            <xs:element name="externalNumber" type="gsta:ExternalNumberType" />
            <xs:choice>
                <xs:element name="offeringSpecId" type="gsta:SpecIdType" />
                <xs:element name="productSpecId" type="gsta:SpecIdType" />
            </xs:choice>
            <xs:element name="state" type="gsta:SetStateCode" />
            <xs:element name="openTime" type="xs:date" minOccurs="0" />
            <xs:element name="recentModifyReason" type="gsta:RecentModifyReasonType" />
        </xs:sequence>
    </xs:complexType>
</xs:schema> 
```

bash-3.2$ cat schemas/typeDef.xsd

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:gsta="http://gsta.com/neva2/externalService" 
    targetNamespace="http://gsta.com/neva2/externalService"
    elementFormDefault="qualified" 
    attributeFormDefault="unqualified">

    <xs:simpleType name="ExternalNumberType">
        <xs:restriction base="xs:string">
            <xs:maxLength value="20"></xs:maxLength>
            <xs:minLength value="1"></xs:minLength>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="SpecIdType">
        <xs:restriction base="xs:long">
            <xs:minInclusive value="0"></xs:minInclusive>
            <xs:maxInclusive value="999999"></xs:maxInclusive>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="SetStateCode">
        <xs:restriction base="xs:int">
            <xs:enumeration value="0" />
            <xs:enumeration value="1" />
            <xs:enumeration value="2" />
            <xs:enumeration value="3" />
            <xs:enumeration value="4" />
            <xs:enumeration value="5" />
            <xs:enumeration value="7" />
            <xs:enumeration value="8" />
            <xs:enumeration value="11"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="RecentModifyReasonType">
        <xs:restriction base="xs:string">
            <xs:maxLength value="64"></xs:maxLength>
            <xs:minLength value="1"></xs:minLength>
        </xs:restriction>
    </xs:simpleType>
</xs:schema> 
```

bash-3.2$ cat schemas/schemas.xjb

```
<?xml version="1.0" encoding="UTF-8"?>
<jaxb:bindings xmlns:jaxb="http://java.sun.com/xml/ns/jaxb" xmlns:xs="http://www.w3.org/2001/XMLSchema" jaxb:version="2.0">
    <jaxb:bindings schemaLocation="message.xsd" node="/xs:schema">
        <jaxb:schemaBindings>
            <jaxb:package name="org.openuri"/>
        </jaxb:schemaBindings>
    </jaxb:bindings>
    <jaxb:bindings schemaLocation="typeDef.xsd" node="/xs:schema">
        <jaxb:schemaBindings>
            <jaxb:package name="com.gsta.neva2.externalservice"/>
        </jaxb:schemaBindings>
    </jaxb:bindings>
</jaxb:bindings> 
```

# android - 如何向标准列表活动添加其他按钮？

> ID：13736316
> 
> 赞同：1
> 
> 时间：2012-12-06T03:07:37.887
> 
> 标签：android, android-listview

我正在从一个总是包含最多 30 个名称的 Web 服务加载名称。我可以在 listactivity 中显示这些名称，但如果服务器上有超过 30 个名称，我需要在 listactivity 底部有一个下一个和上一个按钮。

是否可以使用 listactivity 来解决这个问题，或者我需要为此进行自定义活动吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T03:42:28.087

尝试这样的布局文件...

```
<?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <ListView android:id="@android:id/list"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="0.9" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="0.1" >

            <!-- Put buttons here -->

        </LinearLayout>
    </LinearLayout> 
```

只要您`ListView`有资源ID，`@android:id/list`就会`ListActivity`自动找到它。您需要将资源 ID 分配给`Buttons`并在使用`findViewById(...)`后使用`setContentView(...)`以获取对`Buttons`.

# ruby - 知道其集合/数组的红宝石对象

> ID：13736318
> 
> 赞同：0
> 
> 时间：2012-12-06T03:07:49.867
> 
> 标签：ruby, algorithm, oop, design-patterns

我有一组相互关联的对象，比如“人”。我希望能够从一个人到另一个人，这将是数组中的另一个对象。

所以我想出了这个：

```
class Person
  attr_accessor :name, :parent, :collection
  def parents
    rtn = []
    pid = @parent
    while pid
      p = collection.select{|i|i.name == pid}.first
      if p 
        rtn << p
        pid = p.parent
      else
        pid = nil
      end
    end
    rtn
  end
  def to_s;@name;end
end
class PersonCollection < Array
  def <<(obj)
    obj.collection = self
    super
  end
end 
```

...这允许我这样做：

```
p1 = Person.new
p1.name = 'Anna'
p2 = Person.new
p2.name = 'Bob'
p2.parent = 'Anna'
pc = PersonCollection.new
pc << p1
pc << p2
pp p2.parents 
```

请原谅我相当笨拙的例子。关键目标是让集合的成员能够访问同一集合的其他成员。有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:53:02.363

> 有没有更好的办法？

是的。使对象持有对其相关对象的引用：

```
class Person
  attr_accessor :name, :parent, :collection

  def parents
    if parent
      [parent].concat(parent.parents)
    else
      []
    end
  end

  def to_s
    name
  end
end

p1 = Person.new
p1.name = 'Anna'

p2 = Person.new
p2.name = 'Bob'
p2.parent = p1 
```

`p2.parents`现在返回`[p1]`，没有数组遍历、字符串比较或`PersonCollection`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T08:47:40.790

使用**Hash**将是一种更好的方法，可以防止所有这些数组遍历。这是我使用第二个哈希记录和查找您的***孤儿***的解决方案：

```
class Person
  attr_accessor :name, :parent, :parent_key, :collection

  def parents
    if parent
      [parent].concat(parent.parents)
    else
      []
    end
  end

  def children
    self.collection.values.select{ |person| person.parent === self }
  end

  def descendants
    self.collection.values.select{ |person| person.parents.include? self }
  end

  def to_s
    self.name
  end
end

class PersonCollection < Hash
  attr_accessor :orphans

  def initialize
    self.orphans = Hash.new
    super
  end

  def store (key,obj)
    obj.collection = self
    if !obj.parent_key.nil?
        if self[obj.parent_key] 
            #this person's parent is already in the Hash
            obj.parent = self[obj.parent_key]
        else 
            #this person's parent is missing, so add this person to the orphans hash
            self.orphans[obj.parent_key] ||= []
            self.orphans[obj.parent_key] << obj
        end
    end
    if orphans[obj.name] 
        # this person has an array of orphans, so lets finally set their parents 
        self.orphans[obj.name].each do |orphan|
            orphan.parent = obj
        end

        # finally, clean up the hash after taking care of theses orphans
        self.orphans.delete(obj.name)
    end

    super
  end

end 
```

总结一下我的方法：

1.  如果一个人在被添加到集合时**可以找到他/她的父母......宾果游戏。**
2.  如果一个人在被添加到集合时**找不到他/她的父母**`self.orphans`，他/她的对象将被记录/存储在他/她的父母姓名下的哈希中。
3.  如果**一个人**在添加到集合时以他/她的名义有孤儿，则这些孤儿会更新，以便他们最终知道他们的父母。

# grails - 在 Grails 中，如何获取基类型的所有子类的所有鉴别器值的列表？

> ID：13736323
> 
> 赞同：2
> 
> 时间：2012-12-06T03:08:23.223
> 
> 标签：grails, discriminator, grails-2.0.4

假设我有以下课程：

```
class Apple extends Fruit { ... }
class Banana extends Fruit { ... }
class Grape extends Fruit { ... }
class Kiwi extends Fruit { ... } 
```

等等等等。我现在需要显示一个下拉列表，其中包含所有扩展子类的所有鉴别器值的列表，`Fruit`例如：

```
<select name="fruitType">
    <option value="Apple">Apple</option>
    <option value="Apple">Banana</option>
    <option value="Apple">Grape</option>
    <option value="Apple">Kiwi</option>
</select> 
```

这很容易对其中的 4 个进行硬编码，但在我的实际域中，这个列表可能会变得很长。有没有办法获得所有实现基类型的子类的所有鉴别器值的列表？像这样的东西，例如：

```
Fruit.class.getAllDiscriminatorValues() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:32:32.960

你可以这样做：

```
def getAllFruitSubclasses() {

   def fruit = []

   grailsApplication.domainClasses.each { 
      if (it.clazz.superclass == 'com.whatever.Fruit') {
         fruit << it.clazz.simpleName
      }
   }
   return fruit
} 
```

# php - PHP死清理所有页面

> ID：13736327
> 
> 赞同：-1
> 
> 时间：2012-12-06T03:08:35.443
> 
> 标签：php

> **可能重复：**
> [PHP die() 清理所有页面](https://stackoverflow.com/questions/13736007/php-die-clean-all-page)

我检查字段 1，如果全部正确，将传递给用户检查而不是电子邮件和密码检查...

因此我使用 die 来阻止代码继续运行

但是当我使用 die() 时，它会杀死所有页面，以任何方式保留所有页面但只回显 $error_message

当我使用 die() 时，它看起来像跳转到另一个页面

```
<?PHP

session_start();
if(isset($_SESSION['firstname']) && isset($_SESSION['lastname'])){
    header('location:member.php');
}

$firstname="";  $lastname="";   $email="";  $re_email=""; $error_message="";

if(isset($_POST['signup'])){
    $firstname=strip_tags(ucfirst($_POST['firstname']));
    $lastname=strip_tags(ucfirst($_POST['lastname']));
    $email=strip_tags(strtolower($_POST['email']));
    $re_email=strip_tags(strtolower($_POST['re_email']));
    $password=strip_tags($_POST['password']);
    $re_password=strip_tags($_POST['re_password']);
    $date=date("Y-m-d");

    if($firstname && $lastname && $email && $re_email && $password && $re_password && $age && $gender && $employment){}
    else{die($error_message="Please fill in all fields");}

    //USERNAME CHECKING////////////////////////////////////////////////////////
    $connect=mysql_connect("localhost", "root", "");
    $database=mysql_select_db("phplogin", $connect);
    $namecheck=mysql_query("SELECT email FROM users WHERE email='$email'");
    $count=mysql_num_rows($namecheck);
    if($count!=0)
    {die("Username already taken");}
    //////////////////////////////////////////////////////////////////////////

    if($email==$re_email && $password==$re_password){}
    else{die("email or password do not match");}

    //Checking valid email//
    $strpos=strpos($email, "@");
    if(!$strpos)
    {die("This is not valid email");}

    //Password length//////////////////////////////////////////////////////////
    if(strlen($password)<6)
    {die("Password is too short");}

    echo "Register user!";
    $password=md5($password);

    $SQL="INSERT INTO users (email, password, firstname, lastname, date) 
    VALUES ('$email','$password','$firstname', '$lastname', '$date')";
    $result=mysql_query($SQL);

    session_start();
    $_SESSION['firstname']=$db_firstname;
    $_SESSION['lastname']=$db_lastname;
    header("location:member.php");

    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T03:27:29.190

`die()`是一种等效于 的语言结构`exit()`，它们输出一条消息并终止当前脚本。因此， die 之后的任何内容都不会显示。

`$errorMsgs`我认为您可以在保存用户数据之前将消息放入变量中，例如哪种类型是数组。然后如果`$errorMsgs`不为空，则表示可能有一些麻烦。那时您可以将这些错误消息传递到下一步。

代码如下所示：

```
$errosMsgs = array();
if(!$ok) {
  $errosMsgs[] = "Error message";
}
if(empty($errorMsgs)) {
    //Data saving and redirect into another page
} else {
    //display errors
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T03:17:21.123

我相信你的问题在这里：

```
die($error_message="Please fill in all fields"); 
```

这意味着“当我死时，将此值分配给此变量”。

它应该如下所示：

```
if(!isset($firstname) || !isset($lastname) || !isset($email) || !isset($password) || !isset($re_password) || !isset($age) || !isset($gender) || !isset($employment)){
    die("Please fill in all fields");
} 
```

# ios - 同时使用 Sharekit 2.0 将图片、url 链接、文本发布到 facebook

> ID：13736328
> 
> 赞同：0
> 
> 时间：2012-12-06T03:08:39.427
> 
> 标签：ios, facebook, sharing, sharekit

我想在 iOS 中使用 Sharekit 同时将 URL、图像和文本发布到 Facebook。是否可以？如果是这样，我该怎么做？任何指导。

我想实现这样的目标。需要一些帮助。

我尝试过这样的事情：

```
SHKFacebook * sharer = [ [ [ SHKFacebook alloc ] init] autorelease ];
    SHKItem * item = [ SHKItem URL:[ NSURL URLWithString:@"http://google.com" ]
                             title:@"my title"
                       contentType:SHKShareTypeURL ];
    item.facebookURLShareDescription = @"my description";
    item.facebookURLSharePictureURI = @"http://www.userlogos.org/files/logos/pek/stackoverflow.png"; 
```

但是好像没有附上描述...

**编辑**：

我的 facebooksharedescription 和 facebookshareuri 看起来像这样：

```
- (NSString *)facebookURLSharePictureURI {
    return nil;
}

- (NSString *)facebookURLShareDescription {
    return nil;
} 
```

我需要改变什么吗？

当我更改为 forcepreIOS6posting 时，它给了我这个错误：

```
the operation cannot be completed.(com.facebook.sdk. error 2.) 
```

也需要这两个方面的指导......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T17:30:54.903

请参阅[ShareKit 2.0](https://github.com/ShareKit/ShareKit/)中和中的**共享器特定扩展**。那里有清楚的描述。`SHKItem.h``DefaultSHKConfigurator.m`

您可以设置链接、图像和描述 + 如果您决定向用户展示对话，用户可以添加一些消息。

请注意，这适用于 ShareKit 类型的共享对话（iOS6 之前）。在 iOS6 ShareKit 使用新的原生 social.framework 对话，这种行为是不可能的。即使在 iOS 6 上，您也可以在配置器子类中强制执行 iOS6 之前的行为（同样，有关更多信息，请查看`DefaultSHKConfigurator.m`.

如果您决定使用 ShareKit，请务必按照字面意思遵循 sharekit[安装 wiki](https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit)。

编辑：这是从 ShareKit 示例应用程序`ExampleShareLink.m`文件中粘贴的。这是一个内容类型的视频，但您可以将这些 facebook 共享器特定的扩展用于任何内容类型。

```
SHKItem *item = [SHKItem URL:[NSURL URLWithString:@"http://www.youtube.com/watch?v=3t8MeE8Ik4Y"] title:@"Big bang" contentType:SHKURLContentTypeVideo];
item.facebookURLSharePictureURI = @"http://www.state.gov/cms_images/india_tajmahal_2003_06_252.jpg";
item.facebookURLShareDescription = @"description text"; 
```

编辑 2：如果您仔细遵循 wiki，您就到了第 4 点 -[配置](https://github.com/ShareKit/ShareKit/wiki/Configuration)。在您的配置器子类中，覆盖

```
- (NSNumber*)forcePreIOS6FacebookPosting {
    return [NSNumber numberWithBool:false];
} 
```

并设置为真。您可以配置（覆盖）许多其他内容，请参阅`DefaultSHKConfigurator.m`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T21:04:08.487

如果您不想关注PreIOS6FacebookPosting，您可以设置 SHKItem 的 image 属性。问题在于它需要一个实际的 UIImage 对象而不是 URL。

您可以同步创建 UIImage 对象或使用已加载图像的 UIImage 对象进行共享：

```
NSURL* aURL = [NSURL URLWithString:photoURL];
NSData* data = [[NSData alloc] initWithContentsOfURL:aURL];
item.image = [UIImage imageWithData:data]; 
```

我通过在我的 Facebook 应用程序设置中设置正确的包 ID 解决了错误 com.facebook.sdk.error.2。我使用不同的包 ID 进行测试，因此我的 Facebook 应用程序设置中的包 ID 与我的应用程序的包 ID 不匹配，我遇到了 com.facebook.sdk.error.2 问题。这通过将额外的开发包 ID 添加到 Facebook 应用程序设置来解决。

# java - 检查整数 0、1 和 -1 符号的数组是否包含 1 个 null 的序列

> ID：13736329
> 
> 赞同：-2
> 
> 时间：2012-12-06T03:08:53.180
> 
> 标签：java, regex

所以我得到了一个包含 48 个元素的整数数组，我想检查该数组是否包含 1 个单独的 0 的序列。

这个数组包含这样一个序列：0111101100011

这个数组没有：0011110001111

如何在 Java 的正则表达式中检查这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T03:16:31.343

尝试类似：`[^0](0)[^0]`，或`^|[^0](0)[^0]|$`考虑边缘（感谢山姆，我是）。请注意，这将匹配最多 3 个字符，您需要获取匹配的第 1 组的位置才能找到实际 0 位的位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T03:17:11.687

正则表达式”将匹配一个在开头或结尾`"[^0]0[^0]"`没有单独的`0`

您可能还想针对 `"^0[^0]"` 边缘 `"[^0]0$"`情况检查它

# java - 循环不会达到标记值 - Java

> ID：13736330
> 
> 赞同：0
> 
> 时间：2012-12-06T03:08:57.610
> 
> 标签：java, while-loop, infinite-loop

我的程序中有一个不会达到哨兵值的 while 循环。该程序基本上读入一个包含一个字符串、一个 int 和一个 double 的数据库，然后循环返回。我的问题是它似乎没有读入哨兵，然后发生了无限循环。我已经尝试解决这个问题好几个小时了，所以任何帮助都会非常有帮助。示例输入如下所示，其中 EndSearchKeys 等于 SECSENT。

还假设调用的任何方法都不是问题，因为我已经删除了它并再次测试。

雷克萨斯 2005 23678.0
福特 2001 7595.0
本田 2004 15500.0
EndSearchKeys

```
while(scan.hasNext())
    {
        if(carMake.equals(SECSENT))
        {
            break;
        }
        if(scan.hasNextInt())
        {
            carYear = scan.nextInt();
        }
        else
        {
            System.out.println("ERROR - not an int");
            System.exit(0);
        }
        if(scan.hasNextDouble())
        {
            carPrice = scan.nextDouble();
        }
        else
        {
            System.out.println("ERROR - not a double");
            System.exit(0);
        }
        Car key = new Car(carMake, carYear, carPrice);
        // Stores the output of seqSearch in pos.

        // If the debug switch is on, then it prints these statements.
        if(DEBUG_SW == true)
        {   
            System.out.println("Search, make = " + key.getMake());
            System.out.println("Search, year = " + key.getYear());
            System.out.println("Search, price = " + key.getPrice());
        }   
        System.out.println("key =");
        System.out.println(key);
        pos = seqSearch(carArr, count, key);
        if(pos != -1)
        {
            System.out.println("This vehicle was found at index = " + pos);
        }
        else
        {
            System.out.println("This vehicle was not found in the database.");
        }
        if(scan.hasNext())
        {
             carMake = scan.next();
        }
        else
        {
            System.out.println("ERROR - not a String");
            System.exit(0);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:34:16.170

您在上面的回复中说，仅当您将哨兵设为数据库中的最终值时才会出现问题。这是正在发生的事情。

在循环的最后，您执行以下操作：

```
 if(scan.hasNext())
    {
         carMake = scan.next();
    } 
```

现在，`carMake`= `your sentinel value`。

循环再次开始，并执行此测试：

```
while(scan.hasNext()) 
```

但是扫描没有**下一步**。您在上面“消耗”了下一个（在上一个循环迭代结束时）。现在，“下一个”是“空”。所以没有进入循环，并且永远不会到达循环开始时的测试（如下）。

```
 if(carMake.equals(SECSENT))
    {
        System.out.println("Found sentinel value!  Breaking!");
        break;
    } 
```

尝试将该测试移到循环的**末尾**。

或者，您可以将循环的条件更改为：

```
while(scan.hasNext() && !carMake.equals(SECSENT)) 
```

# java - 什么是接口和包装器？

> ID：13736333
> 
> 赞同：1
> 
> 时间：2012-12-06T03:09:26.287
> 
> 标签：java, design-patterns, interface, wrapper

我知道为什么要使用接口和包装器。

但是我混淆命名包装类......（“谁是包装？”我知道我不太清楚......）

```
public Interface A {
    void method();
}

public Class B implements A {
    void method() {
        doSomething();
    }
} 
```

我对两件事感到困惑...

> 1.  Wrapper **Class**是 class ，所以 B 是 wrapper。
>     
>     
> 2.  我们通常看到（或认为？）a.method() 而不是 b.method()，所以 A 是包装器。

**什么是包装器？**

一个？乙？

和...

**如何使用“Wrapper”或“W”命名 A、B 好？**

一个，AWrapper？还是 B，BWrapper？还是其他人……？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T03:13:21.477

`A`是一个接口。 `B`是 的具体实现`Interface`。从您提供的代码中无法对它们进行任何其他说明。

[Wrapper](https://stackoverflow.com/questions/889160/what-is-a-wrapper-class)通过添加或简化被包装类/API 的功能来“包装”另一个类或 API 的功能。例如，Java 的[Primitive Wrappers](https://en.wikipedia.org/wiki/Primitive_wrapper_class)添加了有用的方法，例如`doubleValue`和`compareTo`Java 原语。

您正在考虑[多态性](https://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)。

这就是让我们可以说这样的话：

```
A a = new B();
B b = new B();
List<A> stuffs = new ArrayList<A>();
stuffs.add(b); 
```

* * *

边注：

`Interface`并且`Class`不允许在 Java 中大写。你的声明应该是这样的：

```
public interface A {
  // methods
}

public class B implements A {
  // methods
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T09:40:48.377

您的示例中的 A 或 B 都不能称为包装器。A 和 B 之间的关系是`Inheritance`。一个`Wrapper`类通常是`contains`一个或多个`Wrappee`对象。适配器和外观模式是包装器的好例子。

有关Wrappers 的详细讨论，请参阅[此内容](https://stackoverflow.com/questions/889160/what-is-a-wrapper-class)

# apache - htaccess 规则的无限重定向循环

> ID：13736338
> 
> 赞同：0
> 
> 时间：2012-12-06T03:09:52.073
> 
> 标签：apache, .htaccess, mod-rewrite

我的 htaccess 文件

```
Options +FollowSymLinks
RewriteEngine on

RewriteCond %{REQUEST_URI} ^/apm/.* [NC]
RewriteRule apm/(.*) https://someothersite.net/~mc/apm/$1 [R=301,L]

RewriteCond %{HTTP_REFERER} ^(.*)mydomain1\.com [NC]
RewriteRule .* http://mydomain2.net/_APM/dist [R=301,L] 
```

我想要做的是： 1\. 如果用户去 mydomain2.net/apm/ 重定向到[https://someothersite.net/~mc/apm/](https://someothersite.net/~mc/apm/) ..

1.  some1 从 mydomain1.com 到 mydomain2.net (any page) ，然后重定向到 [http://mydomain2.net/_APM/dist](http://mydomain2.net/_APM/dist)。

第一个工作正常，但第二个给出无限循环。请有任何想法。

htaccess 文件在 mydomain2.net 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:14:57.913

您是否有权访问站点配置文件？（linux下：“/etc/apache2/sites-available/site”）

您应该使用[Apache VirtualHost](http://httpd.apache.org/docs/2.2/vhosts/name-based.html)。这是为此而生的。

你会得到类似的东西

```
NameVirtualHost *:80

<VirtualHost *:80>
    ServerName www.domain.tld
    ServerAlias domain.tld *.domain.tld
    DocumentRoot /www/domain
</VirtualHost>

<VirtualHost *:80>
    ServerName www.otherdomain.tld
    DocumentRoot /www/otherdomain
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:09:57.587

301 重定向后，HTTP 引荐来源网址不会更改。您需要`_APM/dist`从规则中排除请求：

```
RewriteCond %{HTTP_REFERER} ^(.*)mydomain1\.com [NC]
RewriteRule !_APM/dist http://mydomain2.net/_APM/dist [R=301,L] 
```

# asp.net - 如何从静态方法绑定数据源？ASP.net

> ID：13736342
> 
> 赞同：0
> 
> 时间：2012-12-06T03:10:30.067
> 
> 标签：asp.net, repeater

我想从静态方法绑定数据源。但我在我的静态方法上看不到我的中继器。

```
[WebMethod]
public static int setPages(string num)
{
   int result = MarketplaceDataBridge.SetPageNumber(num); 
   repeater1.datasource(result);
   repeater1.databind();     
   return result;
} 
```

有可能做到这一点吗？或者我可以做些什么来实现这一点谢谢。

-我一直在搜索从调用静态到非静态并将ajax值传递到创建Web服务的任何地方哈哈-抱歉成为这样一个新手-

--更新我可以这样称呼它

```
public partial class _Default : System.Web.UI.Page
{    
    [WebMethod]
    public static int setPages(string num)
    {
       _Default page = new _Default();
       int result = MarketplaceDataBridge.SetPageNumber(num); 
       page.binder(result);    
       return result;
    }

private void binder(List<MobileApplication> map)
        {
            List<MobileApplication> maps = new List<MobileApplication>();

            maps = map;
            if (maps != null)
            {
                Apps.DataSource = maps;
                Apps.DataBind();
            }

        }
} 
```

但是我收到错误 unhandledNullException 但是每当我传递地图时它都有值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:44:11.060

尝试使您的活页夹方法也静态

# c# - 使用 GE 插件，我如何以编程方式将地标放在文件夹中？

> ID：13736344
> 
> 赞同：0
> 
> 时间：2012-12-06T03:10:35.957
> 
> 标签：c#, treeview, google-earth-plugin

很抱歉一直有问题，但我似乎无法掌握这个 API。

这似乎是一个非常简单的操作，但我无法弄清楚。

我在 PluginReady() 回调中创建了一个文件夹：

```
 folder = ge1.createFolder("Sites");
    folder.setName("Sites");
    kmlTreeView1.ParseKmlObject(folder); 
```

创建文件夹后，我等待数据进入，这将在该文件夹中创建一个地标。当该数据到达时，我创建一个地标，然后尝试将其放入 kmltreeview 'Sites' 文件夹中：

```
 //kmlTreeView1.ParseKmlObject(placemark);
    KmlTreeViewNode node = kmlTreeView1.GetNodeById("Sites");
    node.ApiObject.getFeatures().appendChild(placemark);
    ge1.getFeatures().appendChild(node.ApiObject); 
```

我相信地标在文件夹中，因为当我双击文件夹时，会弹出一个指向地标的气球。但是，该文件夹没有加号表示其中有内容。kmltreeview1 属性“ShowPlusMinus”设置为 true。

如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T03:03:59.297

KmlTreeView 根本不会创建任何 kml...如果您将一个空的 KmlFolder 加载到树中，那么它就是一个空的 kmlFolder。如果您随后对 KmlFolder 执行某些操作，则不会更改树中的内容。

例如，如果您在从它创建树节点后将功能添加到同一个 KmlFolder，它们将不会显示在树视图中 - 因为您尚未将它们添加到树视图中，所以您已将它们添加到 KmlFolder。

在您的示例中，您必须从树中删除空站点节点。然后根据包含一些内容的文件夹创建一个新节点，然后将其添加回树中。

```
KmlTreeViewNode node = kmlTreeView1.GetNodeById("Sites"); // get the empty node you added to the tree
node.ApiObject.getFeatures().appendChild(placemark); // get the KmlFolder and add a placemark
ge1.getFeatures().appendChild(node.ApiObject); // add the KmlFolder and features to the plugin
kmlTreeView1.Nodes.RemoveByKey("sites"); // remove the empty node from the tree...
kmlTreeView1.ParseKmlObject(node.ApiObject); // add the KmlFolder that contains your placemark 
```

附带说明 - KmlTreeView 本质上旨在将 KML 文件加载到其中，并与插件同步。虽然您可以像这样创建单个树节点，但这并不是它的设计用途......

# jquery - 使用 jQuery 声明包含活动 nodeList 的变量

> ID：13736345
> 
> 赞同：2
> 
> 时间：2012-12-06T03:10:41.310
> 
> 标签：jquery, jquery-selectors

我在`$current = $('.current')`代码开头以下列方式声明了一个包含 jQuery 对象的变量。问题是我的班级`current`经常更换节点。

这是[一个例子](http://jsfiddle.net/roine/cTnSx/)

有没有办法在脚本开头声明选择器并使其更加动态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T03:14:34.697

不，当您从 DOM 中添加/删除与其选择器匹配的项目时，没有办法声明始终是最新的 jQuery 变量。这不是 jQuery 的特性。

不过，还有许多其他方法可以解决动态创建元素的问题。例如，`document.getElementsByClassName()`返回一个活动的 nodeList，它会随着文档的变化而保持最新。而且，当然，您总是可以在使用它之前刷新您的 jQuery 变量，并在任何给定时间对文档中的内容进行新的查询。对于用户触发的任何操作，这是通常的建议，因为刷新查询对于用户时间来说非常快，并且在操作发生的那一刻保证是准确的，并且不存在由于悬空引用而导致内存泄漏的风险。

一般来说，如果 jQuery 变量中的对象是动态创建/删除的，那么将其保留一段时间并不是一个好主意，因为在 jQuery 变量中保留对它们的引用会阻止垃圾收集器从旧对象中清理内存（例如内存泄漏），直到 jQuery 变量本身被删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T03:29:23.807

如果这是您真正有兴趣为您的前端获得的功能，您可以考虑使用 MVVM 或 MVC 类型的框架，如[Knockout](http://knockoutjs.com/)、[Backbone](http://backbonejs.org/)、[Spine](http://spinejs.com/)、[Ember](http://emberjs.com/)等。它们通常具有声明性数据绑定的概念，所以您可以将任何变量与用户输入联系起来，反之亦然，将任何显示的标记与任何变量联系起来，而无需费心更新自己。

这是一篇比较一些框架的[优秀文章。](http://blog.stevensanderson.com/2012/08/01/rich-javascript-applications-the-seven-frameworks-throne-of-js-2012/)

我自己是 Knockout 的粉丝。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T03:32:19.003

当您声明这样的变量时，它会将 jQuery 对象保存到内存中，直到您释放或更改它。因此，如果您调用它，您将始终获得第一次加载它时的值。

如果你真的需要一个更新的 jQuery 对象，你可以在需要的时候调用它 $('.current')，然后它会重新计算 jQuery 对象，你可以使用当前的一组元素。

但是，如果由于某种我无法想象的原因你真的需要这样做，这对你有用吗：

```
$current = function(){
    return $('.current');
    }; 
```

然后你可以调用 $current() 并且你会得到你更新的 jQuery 对象。

我再次认为这样做很愚蠢，除非您需要在使用之前以某种方式处理 jquery 对象，否则最好的方法是直接调用 jQuery 对象 $('.current') ，就像我之前提到的那样。 ……简单多了。

**修正**：如果你有一个非常烦人的长 jQuery 对象来调用常量，我想这可能很有用，比如`$('.class').has('.otherClass').find('.thirdClass').children('img.fourthClassIfYouCanBelieveIt:first');`

在那种情况下是的，我宁愿打电话给 $current()

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-06T03:14:56.690

如果你的意思是，让变量`$current`自行更新，我不这么认为。您最好的选择是在再次设置变量后重新设置它：

```
.... //your code:
 $(this).addClass('current');
$current = $('.current'); 
```

# sharepoint - SharePoint 2010 中的自定义日历视图？

> ID：13736346
> 
> 赞同：0
> 
> 时间：2012-12-06T03:10:45.070
> 
> 标签：sharepoint, view, sharepoint-2010, calendar, web-parts

我正在尝试为我们的人力资源部门复制这个 Intranet 站点的模型：

![在此处输入图像描述](../Images/f7cf07125930bb52134257cbebc64f62.png)

但是，我似乎无法复制日历的外观和感觉。当我尝试它时，它是这样的：

![在此处输入图像描述](../Images/06409d3835ea6c00580096bf91619095.png)

有没有办法让我编辑开箱即用的日历 Web 部件以类似于标记中的那个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T21:26:03.567

我建议您制作自己的自定义日历 Web 部件，该 Web 部件具有允许您指定要显示的列表的列表属性。除非您想使用默认 SharePoint 日历视图的内置功能，否则最好使用 Web 部件生成的 html/css 自行执行此操作。修改默认 SharePoint 日历的现有样式会很麻烦，并且可能会破坏某些功能。

# intellij-idea - IDEA，包和项目视图，需要澄清

> ID：13736347
> 
> 赞同：1
> 
> 时间：2012-12-06T03:10:48.313
> 
> 标签：intellij-idea

在项目视图中，使用 IDEA12，我在一个项目下有 3 个模块，如图所示：

![在此处输入图像描述](../Images/fa03ab6c206e6d8cc29126f4b4e9d92a.png)

使用包视图，我有 2 个模块

![在此处输入图像描述](../Images/35f6384537bab68d7a888cc505ce58b1.png)

*   在这个例子中，发生了`report`什么？
*   这 2 个视图旨在表示什么以及应在何时使用它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:02:00.860

您可以在[帮助](http://www.jetbrains.com/idea/webhelp/project-tool-window.html)中找到说明：

*   **项目视图**。在此视图中，显示了所有项目项及其依赖项（SDK 和库）。重点是目录结构（尽管还显示了包）。
*   **包视图**。重点是项目的包结构。默认情况下，不显示模块、SDK 和库。

根据查看模式，有不同的显示选项可用。例如，您也可以在 Packages 视图中隐藏模块名称。

`report`如果它不包含任何独特的包或来源，则可能不会显示，但我无法从您提供的详细信息中确定。

# matlab - Matlab - 将矩阵中的 1 翻转为 0

> ID：13736349
> 
> 赞同：3
> 
> 时间：2012-12-06T03:10:57.303
> 
> 标签：matlab

我有一个非常大的稀疏矩阵（每行有几千个元素——大多数元素都是 0）。另外，我有一个行索引向量，我需要对每一行执行以下操作：

将一半的非零元素（从行中的所有非零元素中随机选择）翻转为零，并保存翻转元素的列索引。

感谢您的任何指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:04:50.163

您可以使用`randperm()`生成要在一行中归零的列的随机顺序。

```
% A: sparse matrix (assume 2d)
% ri = vector or row indices

for i = 1:numel(ri)               % Edit one row of A at a time
    row = A( ri(i), : );
    c = find( row );              % Find column index of all non-zero elements a row
    cdel = randperm(length(c));   % Random rearrangement of column index
    cdel(1:end/2) = [];           % Only want to zero out half the columns, so ignore the other half
    % c(cdel) will give the column index of elements to be zeroed.
    row( 1, c(cdel) ) = 0;        % Zero out selected columns
    A( ri(i), : ) = row;          % Update A
end 
```

代码中可能存在一些错误，因为我尚未对其进行测试。还有一些步骤是多余的，可以组合。

`c(cdel)`将为您提供被翻转的列的所需索引。您可以将其保存在单元格向量中，因为每行的大小可能会发生变化。你可以这样做，

```
fcol{i} = c(cdel); 
```

# regex - 将文件名的第一部分移到文件扩展名之前的末尾

> ID：13736352
> 
> 赞同：0
> 
> 时间：2012-12-06T03:11:20.737
> 
> 标签：regex, linux, shell, rename

得到以下代码，它从文件名的开头删除 1234-

```
rename -v "s/^1234-//g" *.*** 
```

*输入：*

1234-test1.test2.jpg

*输出：*

test1.test2.jpg

以及在文件名末尾添加-1234的这段代码

```
for file in *.jpg; do echo $(basename $file .jpg)-1234; done 
```

*输入：*

test1.test2.jpg

*输出：*

test1.test2-1234.jpg

我正在寻找一种将这两个命令组合到一个脚本中的方法，但如果可能的话，也可以以某种方式避免第二位代码在每次运行时继续添加 -1234。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:08:44.690

这假设所有文件都是`.jpg`：

```
rename -v "s/^1234-(.+)(\.jpg)/$1-1234$2/" *.* 
```

这匹配整个文件名，但仅*捕获*`1234-`2 组之后的部分。`$1`和area 对捕获的`$2`部分进行反向引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:33:22.917

这将对它：

```
for file in *.jpg; do
   basename=${file%.*}               # Get the basename without using a subprocess.
   extension=${file##*.}             # Get the extension if you want to add *.JPG in the for, can be skipped if only *.jpg.

   newname=${basename#1234-}         # Remove "1234-" in front of basename.
   test "$basename" = "$newname" &&  # If basename did not start with "1234-", skip this file.
     continue  

   newname=${newname%-1234}          # Remove an eventual "-1234" at the end of newname.
   newname="${newname}-1234"         # Add "-1234" at the end of newname.
   newname="$newname.$extension"     # Restore extension.
   echo mv "$file" "$newname"        # echo rename command.
done 
```

如果您对输出感到满意，请删除最后一行中的 echo。

# actionscript-3 - 如何让 parse.com 与 Flash Player 一起工作？

> ID：13736354
> 
> 赞同：0
> 
> 时间：2012-12-06T03:11:28.117
> 
> 标签：actionscript-3, flash, parse-platform

我已经在 iOS 上使用 Parse.com，它很棒，我也知道 3rd 方 actionscript/parse API，但它只适用于 AIR。

所以我的问题是，如何让解析 API 与 Flash 网页游戏一起使用？（即使用 Flash 播放器）。

我相信还有一个使用 Parse.com REST API 的 PHP Parse API，这是一个选择吗？还是 Flash 播放器的某些内容无法与解析 API 一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:50:10.660

Flash 没有什么不能与 parse rest api 一起使用。如果您可以从 php 调用 api，则可以从 as3、c++、.net 或 klingon 调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T04:31:50.273

除非您是 POST 并发送数据/变量，否则 Flash 播放器不能使用标头，如果您想在 Flash 播放器中使用解析，您需要一个自定义的 flash.net.URLLoader，这是我找到的一个，但由于某种原因它没有'不适用于新版本的 Flash Player，这里是链接[http://www.abdulqabiz.com/blog/archives/2006/03/03/http-authentication-for-httpget-requests-using-actionscript-3/](http://www.abdulqabiz.com/blog/archives/2006/03/03/http-authentication-for-httpget-requests-using-actionscript-3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-15T12:50:59.637

我找到了一种对 Parse 服务器执行有效 REST 调用的方法

```
public function runParseCloudFunction(cloudFunctionName:String):void 
        {             
            if (parseRequestor != null){
                return;
            }           

            //Create the HTTP request object 
            var request:URLRequest = new URLRequest( "https://api.parse.com/1/functions/" + cloudFunctionName ); 
            request.method = URLRequestMethod.POST; 

            // Create Parse headers
            var headerAppID:URLRequestHeader = new URLRequestHeader("X-Parse-Application-Id", MY_PARSE_APP_ID);
            var headerRestKey:URLRequestHeader = new URLRequestHeader("X-Parse-REST-API-Key", MY_PARSE_REST_KEY);
            var headerContentType:URLRequestHeader = new URLRequestHeader("Content-Type", "application/json");
            request.requestHeaders.push(headerAppID);
            request.requestHeaders.push(headerRestKey);
            request.requestHeaders.push(headerContentType);

            //Add the URL variables, json encoded format (OPTIONAL)             
            request.data = '{"param1":"sample1","param2":"sample2","param3":"sample3"}';

            //Initiate the transaction 
            parseRequestor = new URLLoader(); 
            //requestor.dataFormat = URLLoaderDataFormat.TEXT;          
            parseRequestor.addEventListener( Event.COMPLETE, callParseCloudFunctionCompleted ); 
            parseRequestor.addEventListener( IOErrorEvent.IO_ERROR, callParseCloudFunctionError ); 
            parseRequestor.addEventListener( SecurityErrorEvent.SECURITY_ERROR, callParseCloudFunctionError ); 
            parseRequestor.addEventListener( HTTPStatusEvent.HTTP_STATUS, callParseStatusHandler);
            parseRequestor.load( request ); 
        } 
```

使用 cloud parse api 版本**1.3.2测试**

希望能帮助到你！！

# java - 引用对象的对象

> ID：13736356
> 
> 赞同：0
> 
> 时间：2012-12-06T03:11:52.990
> 
> 标签：java, android

首先，我正在尝试在 android 上制作一个俄罗斯方块克隆，为了学习经验，我已经完成了这个，但是代码是一个可怕的混乱，并决定最终回去清理它，因为我知道更多关于什么正在继续。

但现在似乎我的一个构造函数没有被执行......

当引用应该在构造函数中初始化的东西时，我得到了一个 NPE，首先设置为全局变量。这段代码失败了：

```
blocksWorld.blockoid.parts.size() 
```

我在我的 GameScreen 的构造函数中为 BlocksWorld 设置了对象，它确实被执行了：

```
public GameScreen(Game game) {
    super(game);
    this.screen = AndroidGame.GAME_SCREEN;
    blocksWorld = new BlocksWorld();
} 
```

这是 BlocksWorld 的构造函数，它似乎没有被执行：

```
public BlocksWorld() {
    // resets the game world
    for (int x = 0; x < WORLD_WIDTH; x++) {
        for (int y = 0; y < WORLD_HEIGHT; y++) {
            grid[x][y] = 0;
        }
    }
    NewBlockoid(blockoid);
} 
```

新Blockoid：

```
public void NewBlockoid(Blockoid blockoid) {
    nextPiece = random.nextInt(7) + 1;
    blockoid = new Blockoid(grid, nextPiece);
} 
```

Blockoid 的构造函数：

```
public Blockoid(int[][] grid, int blockoidType) {
    this.grid = grid;
    this.blockoidType = blockoidType;
    switch (blockoidType) {
    case Blockoid.I:
        color = Color.CYAN;
        parts.add(new BlocksParts(5, 0));
        parts.add(new BlocksParts(5, 1));
        parts.add(new BlocksParts(5, 2));
        parts.add(new BlocksParts(5, 3));
        break;
    case Blockoid.J:
        color = Color.BLUE;
        parts.add(new BlocksParts(5, 0));
        parts.add(new BlocksParts(5, 1));
        parts.add(new BlocksParts(5, 2));
        parts.add(new BlocksParts(4, 2));
        break;
    case Blockoid.L:
        color = Color.rgb(255, 165, 0);
        parts.add(new BlocksParts(5, 0));
        parts.add(new BlocksParts(5, 1));
        parts.add(new BlocksParts(5, 2));
        parts.add(new BlocksParts(6, 2));
        break;
    case Blockoid.O:
        color = Color.YELLOW;
        parts.add(new BlocksParts(5, 0));
        parts.add(new BlocksParts(5, 1));
        parts.add(new BlocksParts(6, 0));
        parts.add(new BlocksParts(6, 1));
        break;
    case Blockoid.S:
        color = Color.GREEN;
        parts.add(new BlocksParts(5, 0));
        parts.add(new BlocksParts(5, 1));
        parts.add(new BlocksParts(4, 1));
        parts.add(new BlocksParts(6, 0));
        break;
    case Blockoid.T:
        color = Color.rgb(128, 0, 128);
        parts.add(new BlocksParts(5, 0));
        parts.add(new BlocksParts(4, 0));
        parts.add(new BlocksParts(6, 0));
        parts.add(new BlocksParts(5, 1));
        break;
    case Blockoid.Z:
        color = Color.RED;
        parts.add(new BlocksParts(5, 0));
        parts.add(new BlocksParts(5, 1));
        parts.add(new BlocksParts(4, 0));
        parts.add(new BlocksParts(6, 1));
        break;
    }
} 
```

有人知道出了什么问题吗？是否需要更多代码？谢谢您的帮助...

# c++ - OpenGL 4，错误的缓冲区偏移值

> ID：13736359
> 
> 赞同：1
> 
> 时间：2012-12-06T03:12:11.310
> 
> 标签：c++, opengl

我正在使用带有 C++ 的 OpenGL 4.0 开发粒子系统。

目前，我的程序中的一个粒子由 12 个浮点组件组成：

*[vec4 位置，vec4 颜色，vec3 速度，寿命]* = *[xPos，yPos，zPos，wPos，r，g，b，a，xVel，yVel，zVel，寿命]*

我目前的方法是用所有粒子填充一个数组（称为*vertexData*），这样数组的结构将是：*[particle,particle,particle,...]*，其中每个粒子都具有上述布局。

我的计划是简单地将这个初始信息提供给顶点着色器，然后让它根据初始信息计算位置偏移和颜色。我希望大部分计算都在 GPU 上完成。

我想通过将所有数据放在一个缓冲区对象中来将数据传递给着色器，然后使用偏移量来获取正确的值以传递给顶点着色器。

**问题：**我似乎无法获得正确的数据。我觉得我误解了整个缓冲区偏移量，并且程序从我的数据中获取随机值......我得到了着色器属性的工作句柄，但数据绝对不正确。使用示例粒子，您将在下面的第一个代码块中看到，只有位置似乎正确。颜色为紫色（应为白色），寿命为 0（应为 5）。很难调试着色器代码。如果生命周期不是应该的，我刚刚做了一个检查，将点涂成另一种颜色。

我是否需要将数据排列成这样：*[（所有粒子位置），（所有粒子颜色），（所有粒子速度），（所有粒子寿命）]*？（就像这里所做的一样：http: [//arcsynthesis.org/gltut/Basics/Tut02%20Vertex%20Attributes.html](http://arcsynthesis.org/gltut/Basics/Tut02%20Vertex%20Attributes.html)）

或者我可能需要为每种类型的粒子数据创建一个不同的缓冲区，一个用于位置，一个用于颜色等？

**代码：** 现在了解我如何填充数据、创建缓冲区对象、渲染和着色器代码的一些代码。数组初始化和填充是这样完成的：

```
const int PARTICLE_COUNT = 1;
const int PARTICLE_COMPONENTS_COUNT = 12;
...
GLfloat* vertexData;
...

void InitVertexData(){

    vertexData = new GLfloat[PARTICLE_COUNT * PARTICLE_COMPONENTS_COUNT];

    for (int i = 0; i < PARTICLE_COUNT; i++)
{       
        vertexData[i * PARTICLE_COMPONENTS_COUNT + 0] = 0.5f; //0: posX
        vertexData[i * PARTICLE_COMPONENTS_COUNT + 1] = 0.5f; //1: posY
        vertexData[i * PARTICLE_COMPONENTS_COUNT + 2] = 0.0f; //2: posZ
        vertexData[i * PARTICLE_COMPONENTS_COUNT + 3] = 1.0f; //3: posW

        vertexData[i * PARTICLE_COMPONENTS_COUNT + 4] = 1.0f; //4: red
        vertexData[i * PARTICLE_COMPONENTS_COUNT + 5] = 1.0f; //5: green
        vertexData[i * PARTICLE_COMPONENTS_COUNT + 6] = 1.0f; //6: blue
        vertexData[i * PARTICLE_COMPONENTS_COUNT + 7] = 1.0f; //7: alpha

        vertexData[i * PARTICLE_COMPONENTS_COUNT + 8] = 0.0f; //8: velX
        vertexData[i * PARTICLE_COMPONENTS_COUNT + 9] = 0.0f; //9: velY
        vertexData[i * PARTICLE_COMPONENTS_COUNT + 10] = 0.0f; //10: velZ

        vertexData[i * PARTICLE_COMPONENTS_COUNT + 11] = 5.0f; //11: lifetime
    }
} 
```

注意：粒子的值现在只是硬编码。我还没有实现计算初始值的函数。

然后，我生成一个缓冲区，我想保存所有粒子的所有数据。初始化时调用一次以下函数：

```
bool CreateBufferObject()
{
    //VertexShader attribute variable handles.
    GLint positionLocation = glGetAttribLocation(programId, "position");
    GLint colorLocation = glGetAttribLocation(programId, "color");
    GLint velocityLocation = glGetAttribLocation(programId, "velocity");
    GLint lifetimeLocation = glGetAttribLocation(programId, "lifetime");

    //Number of components (floats) in a particle element (such as position, color etc).
    GLint positionComponentCount = 4; //posX, posY, posZ, posW
    GLint colorComponentCount = 4; //r, g, b, a
    GLint velocityComponentCount = 3; //velX, velY, velZ
    GLint lifetimeComponentCount = 1; //lifetime (in seconds)

    //Size (in bytes) of the vertexData array and the elements inside.
    GLsizeiptr sizeofVertexDataArray = sizeof(GLfloat) * PARTICLE_COUNT * PARTICLE_COMPONENTS_COUNT; //4 * 2 * 12 = 96
    GLsizeiptr sizeofPosition = sizeof(GLfloat) * positionComponentCount; //4*4 = 16
    GLsizeiptr sizeofColor = sizeof(GLfloat) * colorComponentCount; //4*4 = 16
    GLsizeiptr sizeofVelocity = sizeof(GLfloat) * velocityComponentCount; //4*3 = 12
    GLsizeiptr sizeofLifetime = sizeof(GLfloat) * lifetimeComponentCount; //4*1 = 4

    //Generate one buffer in GPU memory and get handle.
    glGenBuffers(1, &vertexDataBufferId);

    //Generate VAO, a descriptor of vertex data (not the actual object), and get handle.
    glGenVertexArrays(1, &vaoId);
    glBindVertexArray(vaoId);

    //Bind the generated buffer to VAO as the current target.
    glBindBuffer(GL_ARRAY_BUFFER, vertexDataBufferId);

    //Copy the actual data from the vertexData array to GPU memory. TODO: Not sure what to pick instead of GL_STREAM_DRAW
    glBufferData(GL_ARRAY_BUFFER, sizeofVertexDataArray, vertexData, GL_STREAM_DRAW);

    //Guide Vertex Shader to where attributes are at in the memory, giving size and offset (in bytes) of the different elements of a particle.
    glVertexAttribPointer(positionLocation, positionComponentCount, GL_FLOAT, GL_FALSE, sizeofPosition, 0); //offset 0
    glVertexAttribPointer(colorLocation, colorComponentCount, GL_FLOAT, GL_FALSE, sizeofColor, (void*)positionComponentCount); //ofset 4
    glVertexAttribPointer(velocityLocation, velocityComponentCount, GL_FLOAT, GL_FALSE, sizeofVelocity, (void*)(positionComponentCount + colorComponentCount)); //offset 8
    glVertexAttribPointer(lifetimeLocation, lifetimeComponentCount, GL_FLOAT, GL_FALSE, sizeofLifetime, (void*)(positionComponentCount + colorComponentCount + velocityComponentCount)); //offset 11

    glEnableVertexAttribArray(positionLocation);
    glEnableVertexAttribArray(colorLocation);
    glEnableVertexAttribArray(velocityLocation);
    glEnableVertexAttribArray(lifetimeLocation);
//Error checks and debug prints omitted
} 
```

我的理解如下：在glBufferData中，我指定了整个数据集（所有粒子）的大小，并将数据复制到GPU显存中。

使用 glVertexAttribPointer，我指定 OpenGL 应该使用哪些偏移量和计数来填充顶点着色器的属性变量。

然后在我的 Render 函数中调用（这也是我认为我可能出错的地方）：

```
void Render()
{
    ...
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    GLuint elapsedTimeUniformLoc = glGetUniformLocation(programId, "time");

    glUniform1f(elapsedTimeUniformLoc, glutGet(GLUT_ELAPSED_TIME) / 1000.0f); //Divide by 1000 to get time in seconds.
    glDrawArrays(GL_POINTS, 0, PARTICLE_COUNT)

    glutSwapBuffers();
    glutPostRedisplay();
} 
```

由于一个点由 1 个顶点组成，我要求它绘制与 PARTICLE_COUNT 大的点一样多的点（当前为 1）

**着色器**

```
const GLchar* VertexShader2 =
{
    "#version 400\n"\

    "uniform float time;\n"\
    "in vec4 position;\n"\
    "in vec4 color;\n"\
    "in vec3 velocity;\n"\
    "in float lifetime;\n"\

    "out vec4 myColor;\n"\

    "void main()\n"\
    "{\n"\
    "   float dummy = velocity.x;\n"
    "   float timeScale = 0.1f;\n"\
    "   float currentAge = mod(time, lifetime);\n"\
    "   vec4 accumulatedOffset = vec4(timeScale*currentAge, 0.0f, 0.0f, 0.0f);\n"
    "   gl_Position = position + accumulatedOffset;\n"\

    " if(lifetime ==0) { color.y = 1.0f; }\n"\
    "   //color.w = 1.0f - ((1.0f/lifetime) * currentAge)\n"\
    "   color.w = 1.0f - (0.2f * currentAge);\n"\
    "   myColor = color;\n"\
    "}\n"\
};

const GLchar* FragmentShader =
{
    "#version 400\n"\

    "in vec4 myColor;\n"\
    "out vec4 outColor;\n"\

    "void main()\n"\
    "{\n"\
    "   outColor = myColor;\n"\
    "}\n"\
}; 
```

注意：由于速度值不正确，我使用虚拟变量只是为了确保着色器编译器不会丢弃该属性。

如果您需要查看更多代码，我会更新帖子。我希望我把我的问题和我的情况弄清楚了。

**回复@Ben Voight** 好的，所以从您的评论中，我认为 stride 参数表示该属性下一个值的数据偏移量。所以它必须是

`PARTICLE_COMPONENTS_COUNT * sizeof(GLfloat)`对所有人`glVertexAttribPointer`

但是，它仍然给我错误的数据。一个由以下组成的粒子

[-0.5, 0.5, 0.5, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 5.0],

我希望位置为 (-0.5, 0.5, 0.5)，颜色为白色，寿命为 5。（像以前一样忽略速度）

如果生命周期 == 0，我的顶点着色器会更改颜色，并且它报告生命周期确实为 0。我不明白它从哪里得到 0，它甚至不在数据中。颜色也错了。只有位置似乎是正确的。事实上，它的工作原理和以前完全一样。

**已解决** 原来我在 glVertexAttribPointer 中传递了错误的步幅和偏移值。

可能重复： [Opengl Vertex 属性步幅](https://stackoverflow.com/questions/4291271/opengl-vertex-attribute-stride)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:22:29.640

的 stride 参数必须`glVertexAttribPointer`是`PARTICLE_COMPONENTS_COUNT * sizeof (GLfloat)`.

offset 参数以字节为单位。您所有的值都偏离了`sizeof (GLfloat)`.

您有什么理由使用花哨的索引而不是具有所有正确字段的结构数组？

# javascript - JavaScript .楼层号码

> ID：13736362
> 
> 赞同：1
> 
> 时间：2012-12-06T03:12:38.797
> 
> 标签：javascript

我想将一个数字始终放在 6 个数字的同一框架中

所以如果我有一个 7-13 之间的数字，我想把它降到 6。如果我有 14-20 之间的数字，我想把它降到 13、21-27 到 20 等等。我有任何可能这样做`floor()`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T03:15:38.893

```
function weirdFloor(n) {
  return Math.floor(n / 7) * 7 - 1;
} 
```

# html - 如果您在 IE 中收到非安全内容警告，您将如何确定原因？

> ID：13736364
> 
> 赞同：0
> 
> 时间：2012-12-06T03:12:46.443
> 
> 标签：html, web-services, internet-explorer, networking, web

如果您在 IE 中收到非安全内容警告，您将如何确定原因？

您使用哪个版本的 IE 是否重要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:14:24.203

[使用Charles](http://www.charlesproxy.com/)之类的工具查看 HTTP 流量和/或检查您的代码（右键单击 -> 查看源代码）。通常，当通过 HTTPS 访问页面时，您将拥有尝试通过 HTTP（非安全）加载的资源，从而提示此警告。

解决方案是在站点为 HTTPS 时通过 HTTPS 加载所有资源。

此外，您可以通过在内容前面加上“//”前缀来强制使用相同的协议加载内容。例如

```
<img src="//mysite.com/resource.jpg"/> 
```

# javascript - 使用 JavaScript 在 head 标记之前（不在它们之间或之间）插入 html

> ID：13736366
> 
> 赞同：1
> 
> 时间：2012-12-06T03:12:54.280
> 
> 标签：javascript

我需要在 html 标记之前和 doctype 标记（如果存在）之前插入注释，例如..

```
<!-- HelloWord --> 
```

从之前的任务中，以下代码完成了将属性插入“内部”标签的工作，但是这个任务是不同的......

```
document.getElementsByTagName("html")[0].setAttribute("id", "something"); 
```

如何在指定标签“之前”插入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T03:17:23.620

不保证浏览器支持，但这适用于 Firefox 和 Chrome：

```
var comment = document.createComment("HelloWorld");

document.insertBefore(comment, document.firstChild); 
```

仅供参考，您不要在解析 HTML 之后在“标签”之前插入。在 DOM 节点之前插入 DOM。

# php - 在codeigniter中将值从视图传递到控制器方法时出错

> ID：13736371
> 
> 赞同：0
> 
> 时间：2012-12-06T03:13:42.850
> 
> 标签：php, codeigniter

我尝试使用以下代码将值从 my_view.php(view) 传递到 codeigniter 中的 myproject/delete (控制器方法)。

```
 $val=$my_records['roll_no'] 
```

到这里为止，没有错误，并且卷号存储在值中，当我打印该值时，它被打印出来。但是当我将 $val 传递给控制器​​类的方法 delete 时，它​​显示了一条错误消息

> “所提交的网址带有不被接受的字符。”。

我的代码部分是::`echo site_url('myproject/update/$val')`

我的控制器 myproject.php 中有一个方法更新，它`$roll_no`作为参数。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:16:09.143

为您的参数使用双引号。单引号防止变量被解析，因为 PHP 认为`$`是字符串文字。

```
<td><a href ="<?php echo site_url("myproject/update/$val ")?>">Edit</a></td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T03:41:16.793

```
<a href="<?php echo base_url?>myproject/edit/<?php echo $my_records['roll_no']?>">Edit</a> 
```

并且您的 roll_no （和 uri）正则表达式必须是：

```
$config['permitted_uri_chars'] = 'a-z 0-9~%.:_\-'; 
```

您可以在 config/config.php 中对其进行编辑。

***我正在努力学习英语，所以我说得不好。

# sqlite - 尝试显示 SQLite 数据库时出现“没有这样的表错误”

> ID：13736383
> 
> 赞同：-1
> 
> 时间：2012-12-06T03:15:14.673
> 
> 标签：sqlite

我试图在一个活动中显示我的 SQlite 数据库，它告诉我“没有这样的表：sfdnull”。我知道该表存在，因为我可以在我的 DDMS 上看到它。我的 dbhelper 类和 viewwimmerprofile 类的代码如下，用于显示表格“sfd”。我希望有人有一些建议！

```
public class dbhelper extends SQLiteOpenHelper {

    public static final String DATABASE_NAME = "swimmers";
    public static final String TABLE_SWIMMERS = "sfd";

    public static final String C_ID = "id";
    public static final String NAME = "name";
    public static final String TEAM = "team";
    public static final String NOTES = "notes";

    public static final int VERSION = 1;

    public dbhelper(Context context)
    {
        super(context, DATABASE_NAME, null, VERSION);
    }

    @Override
    public void onCreate (SQLiteDatabase db) 
    {
        String createdb = "create table " + TABLE_SWIMMERS + "("
                + C_ID + " integer primary key autoincrement, "
                + NAME + " text, "
                + TEAM + " text, "
                + NOTES + " text); ";

        db.execSQL(createdb);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
    {
        db.execSQL("drop table " + TABLE_SWIMMERS);
        onCreate(db);
    }

    //add new entry
    void addSwimmer(Swimmer swimmer){

        SQLiteDatabase db = this.getWritableDatabase();
        ContentValues values = new ContentValues();

        values.put(NAME, swimmer.getname());
        values.put(TEAM, swimmer.getteam());
        values.put(NOTES, swimmer.getnotes());

        db.insert(TABLE_SWIMMERS, null, values);
        db.close();
    }

    //Getting single swimmer
    Swimmer getSwimmer(int id){
        SQLiteDatabase db = this.getReadableDatabase();

        Cursor cursor = db.query(TABLE_SWIMMERS, new String[] { C_ID, NAME, TEAM, NOTES}, C_ID + "=?",
                new String[] { String.valueOf(id) }, null, null, null, null);
        if (cursor !=null)
            cursor.moveToFirst();

        Swimmer swimmer = new Swimmer (Integer.parseInt(cursor.getString(0)), 
                cursor.getString(1), cursor.getString(2), null);
        return swimmer;
    }

    public int updateSwimmer(Swimmer swimmer){
        SQLiteDatabase db = this.getWritableDatabase();
        ContentValues values = new ContentValues();

        values.put(NAME, swimmer.getname());
        values.put(TEAM, swimmer.getteam());
        values.put(NOTES, swimmer.getnotes());

        return db.update(TABLE_SWIMMERS, values, C_ID + " = ?", new String[] { String.valueOf(swimmer.getID()) });        
    }

    //delete single contact
    public void deleteSwimmer(Swimmer swimmer){
        SQLiteDatabase db = this.getWritableDatabase();
        db.delete(TABLE_SWIMMERS, C_ID + " = ?", new String[] { String.valueOf(swimmer.getID()) });        
        db.close();
    }

    //get contacts count
    public int getSwimmersCount(){
        String countQuery = "SELECT  * FROM " + TABLE_SWIMMERS;
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(countQuery, null);
        cursor.close();
        return cursor.getCount();
    }

    public List<Swimmer> getAllSwimmers() {
        List<Swimmer> swimmerList = new ArrayList<Swimmer>();
        // Select All Query
        String selectQuery = "SELECT  * FROM " + TABLE_SWIMMERS;

        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {
                Swimmer swimmer = new Swimmer();
                swimmer.setID(Integer.parseInt(cursor.getString(0)));
                swimmer.setname(cursor.getString(1));
                swimmer.setnotes(cursor.getString(2));
                // Adding swimmer to list
                swimmerList.add(swimmer);
            } while (cursor.moveToNext());
        }

        // return swimmer list
        return swimmerList;
    }

}

public class ViewSwimmerProfile extends ListActivity {

private ArrayList<String> results = new ArrayList<String>();
 private String TABLE_SWIMMERS = dbhelper.TABLE_SWIMMERS;
 private SQLiteDatabase newDB;

@Override
public boolean onCreateOptionsMenu(Menu menu) 
{       
        getMenuInflater().inflate(R.menu.activity_sfdmain, menu);
        return true;
    }

@Override
public void onCreate (Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    Log.i("viewProfileActivity", "Intent Text");
    setContentView(R.layout.viewprofile);
    openAndQueryDatabase();
    displayResultList();
}   

    private void displayResultList() {

                setListAdapter(new ArrayAdapter<String>(this,
                        android.R.layout.simple_list_item_1, results));
                getListView().setTextFilterEnabled(true);
         }

    private void openAndQueryDatabase() {
          try {
           dbhelper dbHelper = new dbhelper(this.getApplicationContext());
           newDB = dbHelper.getWritableDatabase();
           Cursor c = newDB.rawQuery("SELECT NAME, TEAM FROM " +
                TABLE_SWIMMERS +
                null, null);

              if (c != null ) {
               if  (c.moveToFirst()) {
                do {
                 String NAME = c.getString(c.getColumnIndex("NAME"));
                 String TEAM = c.getString(c.getColumnIndex("TEAM"));
                 results.add("NAME: " + NAME + ",TEAM: " + TEAM);
                }while (c.moveToNext());
               } 
              }   
          } catch (SQLiteException se ) {
                 Log.e(getClass().getSimpleName(), "Could not create or Open the database");
                } finally {
                 if (newDB != null) 
                  newDB.execSQL("DELETE FROM " + TABLE_SWIMMERS);
                  newDB.close();
                }

         }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:15:35.800

错误消息告诉您它试图从表中读取`sfdnull`，而不是`sfd`.

这可能来自这段代码，您将 a 附加`null`到表名：

```
Cursor c = newDB.rawQuery("SELECT NAME, TEAM FROM " +
     TABLE_SWIMMERS +
     null, null); 
```

# git - 如何编写一个检查 git 存储库是否是最新的 shell 脚本？

> ID：13736385
> 
> 赞同：9
> 
> 时间：2012-12-06T03:15:31.373
> 
> 标签：git, bash, shell

```
#!/bin/bash
#gedit tidy plugin
init=false
SRC_DIR=~/repos

DIRECTORY="Gedit-Clientside-Plugin"
#making repos directory
if [ ! -d "$SRC_DIR" ]; then mkdir $SRC_DIR; fi

if [ ! -d "$SRC_DIR/$DIRECTORY" ]; then
    init=true
    cd $SRC_DIR && pwd && git clone git://github.com/trentrichardson/Gedit-Clientside-Plugin.git && cd $DIRECTORY
else
    cd $SRC_DIR/$DIRECTORY
fi
#below here is what I'm having trouble with
git pull 1>&1 | grep "Already up-to-date."

if [[ ! $? -eq 0 && ! $init ]]; then
    read -e -p "## Branch moved, build and install Gedit-Clientside-Plugin? [Y/n] " yn
    if [[ $yn == "y" || $yn == "Y" || $yn == "" ]] ; then
        if [ ! -d "/usr/share/gedit/plugins/clientside" ]; then
            sudo cp ~/repos/Gedit-Clientside-Plugin/clientside /usr/share/gedit/plugins/ -r
        else
            echo "Directory already exists."
        fi
    fi
fi 
```

上面的代码是我从我在 stackoverflow 上找到的脚本编辑的，用于从 git 存储库安装 Emacs。我想要这个脚本做的是从 git repos 安装任何程序，并在需要更新时更新它们。当然，我必须提供安装它的步骤。在这个脚本的情况下，它只需要将目录复制`clientside`到`/usr/share/gedit/plugins/`目录。

我不需要任何关于如何安装任何脚本的帮助，但我需要的是如何检查存储库是否是最新的并从那里开始。

现在我不明白的是这部分：

```
git pull 1>&1 | grep "Already up-to-date."

    if [[ ! $? -eq 0 && ! $init ]]; then
.....
    fi 
```

当我`git pull 1>&1 | grep "Already up-to-date." && $?`在终端中运行时，输出为`Already up-to-date. 0`. 所以我知道这是检查更新的部分，但是下一部分不执行（if 语句） - 这是将目录复制到 gedit 插件目录的部分。我不明白什么`1>$1`意思或什么`$?`意思。因此我无法解决问题......而我不明白的是为什么它认为`Branch is moved`它不是最新的（我只是假设它说if 语句`git pull`中没有返回`0`）。

我确信它有一个简单的解决方案，答案将是对 bash 和 git 的教育。我感谢所有的帮助。

我正在使用 ubuntu 12.04。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-06T06:45:18.040

我宁愿使用“ [git：检查是否需要拉动](https://stackoverflow.com/a/12791408/6309)”的解决方案：

```
git fetch origin
reslog=$(git log HEAD..origin/master --oneline)
if [[ "${reslog}" != "" ]] ; then
  git merge origin/master # completing the pull
  ... 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-10T17:52:08.323

正如 Vonc 已经注意到的那样，这个问题与“ [git：检查是否需要拉动](https://stackoverflow.com/a/12791408/6309)”重叠。

[在那里](https://stackoverflow.com/a/12791408/6309)，我建议使用以下单行脚本，该脚本采用您上次提交版本的 SHA1 并将其与远程来源的一个进行比较

```
[ `git log --pretty=%H ...refs/heads/master^` = `git ls-remote origin
-h refs/heads/master |cut -f1` ] && echo "up to date" || echo "not up to date" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-04T14:33:34.460

我不得不编辑克劳迪奥的答案

```
[ "`git log --pretty=%H ...refs/heads/master^ | head -n 1`" = "`git ls-remote origin -h refs/heads/master |cut -f1`" ] && echo "up to date" || echo "not up to date" 
```

# android - 使用按钮在页面之间切换

> ID：13736390
> 
> 赞同：0
> 
> 时间：2012-12-06T03:16:29.033
> 
> 标签：android, android-layout, button, android-intent

我有一个表格，它有两页。因此在右上角，有两个按钮，分别命名为“Page 1”和“Page 2”。

现在的问题是如何在不删除输入数据的情况下在两页之间交替。例如，可能我在第 1 页填写姓名和地址，然后我选择第 2 页并在其中输入一些详细信息，然后返回第 1 页，姓名和地址应该仍然保留在那里。我该怎么做？

*最后，我需要保存它（第 1 页和第 2 页），如何保存而不会使应用程序崩溃？（意味着在第 1 页中仍然可以让我保存第 2 页中的任何内容）。

感谢您抽出宝贵的时间，如果对我的问题有任何疑问，我将非常乐意详细说明。

我做过的一些事情，但不是很成功：

```
public class EditForm extends Activity {    
Button page1;
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.prepostform);

        page1 = (Button)findViewById(R.id.btnPage1);
        Button page2 = (Button)findViewById(R.id.btnPage2);

     //do nth to page 1 button, dim the button
     page1.setAlpha((float) 0.5);

     //if page 2 selected, switch view to page2, disable btnPage1
        page2.setOnClickListener(new OnClickListener() {
     public void onClick(View v) {
         setContentView(R.layout.prepostform2);
         Button pg1 = (Button)findViewById(R.id.btnPg1);
         Button pg2 = (Button)findViewById(R.id.btnPg2);
         pg2.setAlpha((float) 0.5);

         pg1.setOnClickListener(new OnClickListener() {
             public void onClick(View v) {
                 setContentView(R.layout.prepostform);
                 page1.setAlpha((float) 0.5);

             }
                });
     }
        });

 }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:48:06.237

在您的主页上，第一次将一些空值传递给两个页面。

之后，从打开的页面返回时，返回您在此处键入的值。并将这些值保存在您的主页中。

对于每次打开 page1 或 page2 将主页中的结果传递给打开的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:13:38.787

在查看您的代码时，您似乎绝对应该使用 TabHost。忽视这种特殊的布局可能是不明智的。

我会看看[这个](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/)。话虽如此，您可以将输入中的文本保存在每个活动的 onPause() 方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T08:16:02.823

最后我找到了 ViewFlipper。很棒，正是我需要的。更改页面但能够保留数据的按钮=）也感谢大家！

在这里找到教程示例：http: [//meerlight.com/2011/03/simple-viewflipper-example/](http://meerlight.com/2011/03/simple-viewflipper-example/)

# google-api - 可以通过服务帐号授权访问哪些 Google API？

> ID：13736394
> 
> 赞同：7
> 
> 时间：2012-12-06T03:16:50.190
> 
> 标签：google-api, google-drive-api, google-plus, service-accounts

我从 Google API 文档推断，并非所有广告的 Google 服务都可用于服务帐户。

例如，在服务帐户的公告中，这是文本的一部分：

> `以下 Google 开发者服务目前支持服务帐号：
> 
> *   谷歌云存储
> *   谷歌预测 API
> *   谷歌网址缩短器
> *   谷歌 OAuth 2.0 授权服务器
> *   Google API 控制台
> *   适用于 Python、Java 和 PHP 的 Google API 客户端库

我知道前三个是指特定服务，OAuth 服务器和控制台是基础设施要求，然后才能支持任何服务，（列表中的最后一项对我来说有点模糊。）

我还注意到对 Google Drives 的引用可用于服务帐户：[http](http://tinyurl.com/ahwo3bs) ://tinyurl.com/ahwo3bs （非常酷）。

是否有完整的列表列出哪些服务可以通过服务帐户授权访问，哪些不能？我对云存储最感兴趣（现在工作）。Google 云端硬盘、Google+ 环聊和环聊直播。（我知道服务帐户参与环聊的想法可能看起来很奇怪。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T09:32:12.503

所有支持 OAuth 2.0 的 Google API 都应与服务帐户一起使用。

然而，上面列出的 3 种产品（云存储、预测 API 和 URL Shortner）是唯一可以真正使用服务帐户（即代表您的应用程序）的产品，所有其他 Google API 都在这里访问用户数据。[您可以阅读Application Owned Accounts Drive 文档](https://developers.google.com/drive/service-accounts)的第一部分以获得更多解释。

PS：声明的部分`Google APIs Client Libraries for Python, Java, and PHP`意思是说只有我们的 Java、PHP 和 Python 客户端库有内置类来使用服务帐户授权（OAuth 2.0 的客户端凭据流）。现在我们的大多数客户端库都有支持。检查参考文档中的代码示例以获取完整列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-28T11:42:13.530

他们说服务帐户不适用于 YouTube API 调用，因为关联的 YouTube 频道，并且您不能将新的或现有的频道与服务帐户相关联。使用服务帐户进行 YouTube API 调用将返回错误，错误类型设置为未授权，原因设置为 youtubeSignupRequired ( [https://developers.google.com/youtube/v3/guides/moving_to_oauth#service_accounts](https://developers.google.com/youtube/v3/guides/moving_to_oauth#service_accounts) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-16T21:54:49.767

如果此问题仍然是[https://code.google.com/p/gdata-issues/issues/detail?id=5370](https://code.google.com/p/gdata-issues/issues/detail?id=5370) UNRESOLVED，则无法将服务帐户与 YouTube v3 数据 API 一起使用。截至 2014 年 3 月，我无法创建/列出新的播放列表或将视频发布到现有的播放列表。谷歌的人真的应该明确这一点，因为我浪费了几个小时。

# ios - 在 UIScrollView 上拦截平移手势会中断滚动

> ID：13736399
> 
> 赞同：44
> 
> 时间：2012-12-06T03:17:09.563
> 
> 标签：ios, ios5, uiscrollview, uigesturerecognizer, uipangesturerecognizer

我有一个垂直滚动的`UIScrollView`. 我还想在其上处理水平平移，同时允许默认的垂直滚动行为。我`UIView`在滚动视图上放置了一个透明的，并添加了一个平移手势识别器。这样我就可以很好地得到平底锅，但是滚动视图不会收到任何手势。

我已经实现了以下`UIPanGestureRecognizerDelegate`方法，希望将我的手势识别器限制为仅水平平移，但这并没有帮助：

```
- (BOOL)gestureRecognizerShouldBegin:(UIPanGestureRecognizer *)gestureRecognizer {
    // Only accept horizontal pans here.
    // Leave the vertical pans for scrolling the content.
    CGPoint translation = [gestureRecognizer translationInView:self.view];
    BOOL isHorizontalPan = (fabsf(translation.x) > fabsf(translation.y));
    return  isHorizontalPan;
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
    return (otherGestureRecognizer == _scrollView.panGestureRecognizer);
} 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-06T03:46:28.977

好的，我想通了。我需要做两件事来完成这项工作：

1）将我自己的平移识别器附加到滚动视图本身，而不是附加到它上面的另一个视图。

2）这种`UIGestureRecognizerDelegate`方法可以防止同时调用默认滚动视图和我自己的滚动视图时发生的愚蠢行为。

```
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-10-12T21:12:41.227

我有同样的问题要解决，我这样做了：

1）将我自己的平移识别器附加到滚动视图。

2) 返回 YES on: –gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:

这将允许两种手势都起作用。所以这意味着在垂直滚动时，您的 panGesture 委托和 scrollView 委托都将被触发。如果是水平滚动，它只会调用您的 panGesture 委托。

3）在我的panGesture委托中，检测它是否是水平滚动，如果不是，忽略。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-03-08T00:21:34.727

快速回答：

```
let scrollViewPanGesture = UIPanGestureRecognizer(target: self, action: #selector(onPan(_:)))
scrollViewPanGesture.delegate = self
scrollView.addGestureRecognizer(scrollViewPanGesture)

extension ViewController: UIGestureRecognizerDelegate {
    func gestureRecognizer(_ gestureRecognizer: UIGestureRecognizer, shouldRecognizeSimultaneouslyWith otherGestureRecognizer: UIGestureRecognizer) -> Bool {
        return true
    }
} 
```

# c# - 比较列表 到 SQL 列值以决定列表项是否出现在列中

> ID：13736407
> 
> 赞同：0
> 
> 时间：2012-12-06T03:18:04.773
> 
> 标签：c#, linq-to-sql

> **可能重复：**
> [使用 LINQ 检查 List<string> 是否包含另一个 List<string> 中的元素](https://stackoverflow.com/questions/13715529/check-whether-a-liststring-contains-an-element-in-another-liststring-using-l)

SQL 数据库列存储一堆字符串，如下所示：/String1/String2/String3/...，第一个和最后一个字符是“/”。我需要将此列与 a 进行比较，`List<string>`以确定列表中的参数字符串是否包含在列值中。

列值：“/一/二/三/四/”

范围：`List<string> parameters = new List<string>{"Two", "Three"};`

将参数列表与列值进行比较。由于列值中至少出现一项，因此返回 true / 选择行。

我正在使用 LINQ-to-SQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T03:20:50.177

使用 [String.Split 方法](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)、[Enumerable.Intersect 方法](http://msdn.microsoft.com/en-us/library/bb355408.aspx)和[Enumerable.Any 方法](http://msdn.microsoft.com/en-us/library/bb337697.aspx)：

```
//I guess you can get the string representation of the column value
string value = "/One/Two/Three/Four/"; 
List<string> parameters = new List<string> { "Two", "Three" };

bool result = value.Split('/')
                   .Intersect(parameters)
                   .Any(); 
```

# django - 如何在不破坏 Django-CMS 中的链接的情况下将插件继承到子页面？

> ID：13736408
> 
> 赞同：0
> 
> 时间：2012-12-06T03:18:06.817
> 
> 标签：django, multilingual, django-cms, django-middleware, django-multilingual

我正在制作一个多语言的 Django-CMS 网站。我有一个页面，其中包含一些链接到子页面的内容，以使该链接保持可见。这意味着有人可以重复单击该链接。该链接位于父页面中的插件中，并继承到子页面。一旦插件被继承到子页面，如何让链接始终有效？

例如，我有 www.my.site/en/parent/ 和 www.my.site/en/parent/child。如果 /parent 中的插件有一个链接`href="child"`，那么在继承时，在子页面上它会说同样的话，创建一个指向 www.my.site/en/parent/child/child 的链接，该链接不存在。

我尝试了`<base href="www.my.site">`其他 url，并试图弄清楚如何在 CMS 中引用当前语言，但均无济于事。多语言中间件似乎需要太多控制来让`base href`工作（它重写东西）。此外，您不能在 CMS 中拥有`{% xxx %}`或`{{ yyy }}`在 html 中，这意味着我不知道如何引用保持正确语言的绝对路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T04:59:14.510

弄清楚了。所以这是交易。在（父母的）插件中，我最初使用的是 format `href="child"`。`href="/child"`根本不起作用，因为它链接到 www.my.site/en/child。我应该更好地关注失败的样子。在第一个斜线之后，它假定您从语言选择之后开始 - 这意味着您确实可以访问“绝对”路径。

所以正确的写法是简单的`href="/parent/child"`。有时简单的解决方案有点难以理解。短暂的休息可以创造奇迹。

# ruby - 如何阻止 REXML 转义字符？

> ID：13736410
> 
> 赞同：1
> 
> 时间：2012-12-06T03:18:12.183
> 
> 标签：ruby, rexml

我正在从一个数据库中提取一堆数据并通过 XML 将其输入到应用程序中。

所以我从

```
 re_objects_xml = Document.new
    re_objects_xml.context[:attribute_quote] = :quote
    re_objects_xml.context[:raw] = 'true'
    re_objects_xml.add_element("object-collection")                        
    base_object_collection = re_objects_xml.elements[1]

    timeline_meta = Element.new("Metadata")
    timeline_meta.add_attribute("id", "#{re_meta_id}") 
```

然后我有以下变量：

```
k = "Comments"
v = "We're pretty good" 
```

我愿意

```
timeline_meta.add_attribute("#{k}","#{v}") 
```

然后将timeline_meta添加到base_object_collection

```
base_object_collection << timeline_meta 
```

我最终得到包含以下内容的 XML：

```
 ...Comments="GRUBB:  We&apos;re pretty good... 
```

我试图得到

```
 ...Comments="GRUBB:  We're pretty good... 
```

谁能帮我看看我缺少什么或更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:46:50.040

您为什么担心单引号/撇号被转换为实体？XML 解析器/引擎这样做是为了帮助保留可能是模棱两可/冲突的定界字符。来自关于[Character Data and Markup](http://www.w3.org/TR/REC-xml/#syntax)的 XML 规范：

```
To allow attribute values to contain both single and double quotes, the
apostrophe or single-quote character (') may be represented as " &apos; ", and
the double-quote character (") as " &quot; ". 
```

`Comments`因为我们可以使用`'`或来分隔参数的内容`"`，所以规范允许将嵌入的单引号和双引号编码为实体，避免冲突。

在接收端解析 XML 时，它应该将该实体解码回正确的字符，或者具有一些使其变得容易的函数/方法。您没有指定您正在使用什么 DBM，但它应该能够提供帮助，但这是一个单独的问题。

作为代码中的文体：

```
timeline_meta.add_attribute("#{k}","#{v}") 
```

是错的。您正在冗余地将字符串转换为字符串。利用：

```
timeline_meta.add_attribute(k, v) 
```

反而。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-10T17:55:29.630

我知道这个问题已经很老了，但我刚刚遇到了同样的问题，我的发现可能会帮助那些仍然被迫使用 Ruby 1.8.6 的人。

问题是 REXML 的实现非常依赖于 Ruby 版本，实际上，例如 Ruby 1.8.6 的不同补丁之间的实现有很大差异。

应该阻止 REXML 转义实体的上下文标志是，`:raw`但它在您的情况下不起作用的事实可能意味着 REXML 不理解标志或您将其设置为的值。

如果您使用的是早于 1.8.6-p110 的 Ruby 版本，那么您就不走运了。此版本不支持诸如`:attribute_quote`或之类的上下文标志`:raw`。所以你唯一的选择是

> 1.  升级到更高版本的 Ruby，1.8.6-p110 及更高版本。
>     
>     
> 2.  或者对原始 XML 进行后处理以替换转义实体。这应该可以工作，因为 REXML 将转换`& to &amp;`并`&amp; to &amp;amp;`

如果您使用的是 Ruby 的更高版本，则`context[:raw]`必须设置为`:all`或要在原始模式下处理的名称列表。上下文也可以`Document`像这样传递给构造函数`Document.new(nil, {:raw => :all, :attribute_quote => :quote})`

# c - 将电话号码从文件转换为新格式

> ID：13736411
> 
> 赞同：0
> 
> 时间：2012-12-06T03:18:27.847
> 
> 标签：c, io

我正在尝试转换以各种方式编写的一系列电话号码，例如：

```
324.323 4345
234-345-6456. 
```

我想将它们转换成的格式是：`(xxx) xxx-xxxx`

这是我到目前为止的代码，不幸的是它不起作用..

```
#include <stdio.h>
#include <stdlib.h>
#include <ctype.h>

int main() {

    FILE *fp;
    char str[31], ch;
    int i = 0, p1, p2, p3;
    fp = fopen("numbers.txt", "r");

        while((ch = getc(fp)) != '\n')
       {
 if(isdigit(ch))
                str[i++] = ch;
        str[i] = '\0';
        i = 0;

        sscanf(str, "%3d%3d%4d", &p1, &p2, &p3);
        printf("(%3d) %3d-%4d\n", p1, p2, p3);
      }
fclose(fp);
    return 0;
} 
```

我在这里做错了什么？我知道我可能需要隔离每个整数，但这样做有问题。

只需使用以下命令运行它：

```
 404.817.6900
 (215)  686-1776
312-746-6000
877 275 5273
6173434200 
```

并得到以下信息：

```
(  4) 4196261-32767
(  0) 4196261-32767
(  4) 4196261-32767
(  4) 4196261-32767
(  8) 4196261-32767
(  1) 4196261-32767
(  7) 4196261-32767
(  7) 4196261-32767
(  6) 4196261-32767
(  9) 4196261-32767
(  0) 4196261-32767
(  0) 4196261-32767
(  0) 4196261-32767 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T03:22:27.993

我可能会从这样的事情开始：

```
if (3 == sscanf(str, "%3d%*[^0-9]%3d%8[^0-9]%4d", &p1, &p2, &p3))
    printf("(%3d) %3d-%4d\n", p1, p2, p3); 
```

"%*[^0-9]" 部分跳过其他任何内容，直到它们到达下一个数字。

编辑：我没有注意到其中一个可能的输入根本没有数字之间的分隔。不幸的是，您不能真正将`scanf`' 的整数转换限制为仅读取前三位数字或类似的东西。为了解决这个问题，您几乎需要读取字符串而不是数字。为了使代码更易于理解，我还将它分成几部分，而不是尝试一次阅读所有内容，给出如下内容：

```
int copy_num(FILE *file, FILE *out) { 
    char p1[4], p2[4], p3[5];
    int ret=0;

    fscanf(file, "%*[^0-9]");
    ret += fscanf(file, "%3s%*[^0-9]", p1);
    ret += fscanf(file, "%3s%*[^0-9]", p2);
    ret += fscanf(file, "%4s", p3);
    if (ret == 3)
        fprintf(out, "(%3s) %3s-%4s\n", p1, p2, p3);
    return ret == 3;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T06:22:46.523

这对你有用吗？它在樱桃上咬了三口，可以这么说（在最坏的情况下）：

```
#include <stdio.h>

int main(void)
{
    char buffer[128];

    while (fgets(buffer, sizeof(buffer), stdin) != 0)
    {
        int p1, p2, p3;
        if (sscanf(buffer, "%*[^0-9]%3d%*[^0-9]%3d%*[^0-9]%4d", &p1, &p2, &p3) == 3 ||
            sscanf(buffer, "%3d%*[^0-9]%3d%*[^0-9]%4d", &p1, &p2, &p3) == 3 ||
            sscanf(buffer, "%3d%3d%4d", &p1, &p2, &p3) == 3)
            printf("(%3d) %3d-%4d from %s", p1, p2, p3, buffer);
        else
            printf("Failed to convert %s", buffer);
    }
    return(0);
} 
```

对于您的测试数据集，我得到：

```
(404) 817-6900 from  404.817.6900
(215) 686-1776 from  (215)  686-1776
(312) 746-6000 from 312-746-6000
(877) 275-5273 from 877 275 5273
(617) 343-4200 from 6173434200 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-23T08:37:24.933

在[https://github.com/iziz/libPhoneNumber-iOS](https://github.com/iziz/libPhoneNumber-iOS)

下面的代码

```
NBPhoneNumberUtil *phoneUtil = [NBPhoneNumberUtil sharedInstance];

NSError *aError = nil;
NBPhoneNumber *myNumber = 
    [phoneUtil parse:@"6766077303" defaultRegion:@"AT" error:&aError];

if (aError == nil) {
    // Should check error
    NSLog(@"isValidPhoneNumber ? [%@]", 
        [phoneUtil isValidNumber:myNumber] ? @"YES":@"NO");
    NSLog(@"E164          : %@", [phoneUtil format:myNumber 
                                      numberFormat:NBEPhoneNumberFormatE164 
                                             error:&aError]);
    NSLog(@"INTERNATIONAL : %@", [phoneUtil format:myNumber
                                      numberFormat:NBEPhoneNumberFormatINTERNATIONAL 
                                             error:&aError]);
    NSLog(@"NATIONAL      : %@", [phoneUtil format:myNumber 
                                      numberFormat:NBEPhoneNumberFormatNATIONAL 
                                             error:&aError]);
    NSLog(@"RFC3966       : %@", [phoneUtil format:myNumber  
                                      numberFormat:NBEPhoneNumberFormatRFC3966 
                                             error:&aError]);
}
else {
    NSLog(@"Error : %@", [aError localizedDescription]);
} 
```

会退还的

```
isValidPhoneNumber ? [YES]
E164          : +436766077303
INTERNATIONAL : +43 676 6077303
NATIONAL      : 0676 6077303
RFC3966       : tel:+43-676-6077303 
```

# php - 如何在同一操作中处理表单渲染和 ajax 响应？

> ID：13736413
> 
> 赞同：1
> 
> 时间：2012-12-06T03:19:11.793
> 
> 标签：php, ajax, cakephp, cakephp-2.0

我的`create()`ProjectsController 中有一个方法，它使用 AJAX 呈现表单并保存其数据：

```
class ProjectsController extends AppController
{    
    public function create()
    {
        if ($this->request->is('post'))
        {
            $this->Project->create();
            $this->request->data['Project']['created_by'] = $this->Auth->user('id');
            if ($this->Project->save($this->request->data))
            {
                ...
            } else {
                ...
            }
        }

    } 
```

如果数据已保存，我如何才能传递成功消息，如果不是 ajax 请求，我如何呈现我的表单？我不能设置`autoRender`false 因为它必须呈现表单

这是处理 jax 请求的最正确方法吗？如果没有，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:15:44.643

**检测 AJAX：**

您可以使用：

```
if($this->request->is('ajax')) { 
```

用 ajax 做任何你想做的事，剩下的就是显而易见的“其他”。

**处理它：**

大概是这样的：

```
if ($this->request->is('ajax')) {
    //process the ajax response
    $this->render('/Ajax/json');

} else {
    if($this->request->is('post')) {
        //process the post
    }
    //set variables for the view...etc etc

} 
```

**另一种选择 - 单独的功能：**

或者，只有两种不同的操作也很常见——一种用于 ajax，另一种用于您想要的任何其他操作。这是我喜欢的方式，因为我宁愿没有 if() 块。但是 - 对于每个人来说，我都经常使用它们。

```
public function create_ajax() { ... }

public function create() { ... } 
```

# javascript - 防止页面重新加载表单按钮点击流星？

> ID：13736415
> 
> 赞同：7
> 
> 时间：2012-12-06T03:19:39.053
> 
> 标签：javascript, html, http, meteor

不确定这是 Meteor 问题、JavaScript 问题还是其他问题。单击表单按钮会导致不需要的页面重新加载。

**其他信息：**

*   使用引导包
*   使用 jQuery 包
*   使用主干包
*   即使删除了上述软件包，页面重新加载问题仍然会发生
*   注释掉 Posts.insert() 行也不能解决它

    // 来自 application.js
    // *这是应用程序中唯一与事件相关的代码（*除了由流星从我们那里抽象出来的任何幕后内容*）

    ```
    Template.new_post.events = { 

        'click #submit' : function () {

          var text = $('#title').val();
          var cat = $('#category').val();

          // save our post with the value of the textbox
          Posts.insert({title : text, category : cat});
        }
    }; 
    ```

    // 来自 index.html

    ```
    <template name="new_post">
      <form class="form-horizontal">
        <fieldset>
        <div class="control-group">
          <!-- Text input-->
          <label class="control-label" for="title">Title</label>
          <div class="controls">
            <input type="text" id="title" value="{{text}}" class="input-xlarge">
            <p class="help-block">Hint: Summarize your post in a few words</p>
          </div>
        </div>
        <div id="form-part-2">
          <div class="control-group">
            <label class="control-label" for="categories">Category</label>
            <div class="controls">
              <select class="input-xlarge" id="category">
                {{#each categories}}
                  <option value="{{defaultLabel}}">{{defaultLabel}}</option>
                {{/each}}
              </select>
              <p class="help-block">Hint: Choose a category</p>
            </div>
          </div>
            <!-- Button -->
            <div class="control-group">
              <div class="controls">
                <button class="btn btn-success" id="submit">Done</button>
              </div>
            </div>
        </div><!-- end div form-part-2 -->
        </fieldset>
      </form>
    </template> 
    ```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-06T03:41:32.943

我认为您必须在函数结束时返回 false 以防止提交。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-02T21:04:18.690

除了返回之外，`false`您还可以调用[传递给您的处理程序](http://docs.meteor.com/#eventmaps)`preventDefault()`的事件：

```
'click #submit' : function (template, event) {
  ...
  event.preventDefault();
} 
```

这只会阻止默认操作（即提交表单），但不会阻止事件传播。

# javascript - jsp上的javascript不起作用？

> ID：13736417
> 
> 赞同：-1
> 
> 时间：2012-12-06T03:19:53.920
> 
> 标签：javascript, jsp

我有一个问题，它不检查我输入的文本是否只是字母？我真的不知道如何在 jsp 和 Ajax 中编写 javascript？有人可以通过发布一个我可以学习的好链接来提供帮助吗？尤其是使用Ajax调用数据库

这是我现在遇到的问题，我如何检查文本大小是否大于 0

```
<%@page import="java.util.*,support.*,java.sql.*"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

<%//javascript file %>
<script>
function allLetter(value)  
{  
 var letters = /^[A-Za-z]+$/;  
 if(inputtxt.value.match(alphaExp))  
   {  
    return true;  
   }  
 else  
   {  
   alert("message");  
   return false;  
   }  
}  
</script>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Names and country of residence page</title>
</head>
<body>
<%

Connection conn = null;
PreparedStatement pstmt = null;
ResultSet rs = null;

    // Registering Postgresql JDBC driver with the DriverManager
    Class.forName("org.postgresql.Driver");

    // Open a connection to the database using DriverManager
    conn = DriverManager.getConnection(
        "jdbc:postgresql://localhost:5432/assignment1",
        "postgres","Km81920265");

        // Create the statement
        Statement statement = conn.createStatement();

        // Use the created statement to SELECT
        // the student attributes FROM the Student table.
        rs = statement.executeQuery("SELECT * FROM countries_and_states WHERE is_country='t'");

%>

<%//first delcare input %>
Please enter your first name, last name and middle initial:<p>
<form method="get" action="address.jsp">
<%//store input into session %>
Your first name :<input type="text" size="15" name="firstName" onchange="allLetter(this.value); "/><p/>
Your last name  :  <input type="text" size="15" name="lastName"/><p/>
Your middle name:<input type="text" size="15" name="middleName"/><p/>

<%//display dropdown menu using for looop %>
Provide country information menu:<p>
Country:
<select name="Countryid">

<%

while(rs.next()){
%>
<option value="<%=rs.getInt("cs_id")%>"><%=rs.getString("country_state")%>
</option>
<%} %>
</select>

<p>
<%-- -------- Close Connection Code -------- --%>
            <%
                // Close the ResultSet
                if(rs != null){
                    rs.close();
                }

                // Close the Statement
                statement.close();

                // Close the Connection
                conn.close();

 %>

<%///closing up the entry page and submit the data %>
<input type="submit" value="Submit Personal Data" onclick="this.disabled=true;"/>

</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:30:32.987

试试这个，我改成`inputtxt.value`.`value`

```
function allLetter(value)  
{  
 var letters = /^[A-Za-z]+$/;  
 if(value.match(letters))  //removed inputtxt and added `letters`
   {  
    return true;  
   }  
 else  
   {  
   alert("message");  
   return false;  
   }  
}  ​ 
```

演示：http: [//jsfiddle.net/H44j6/](http://jsfiddle.net/H44j6/)

**更新**

更改此行

```
Your first name :<input type="text" size="15" name="firstName" onchange="allLetter(this.value); "/><p/> 
```

至

```
Your first name :<input type="text" size="15" name="firstName" onkeydown="allLetter(this.value); "/><p/> 
```

**或者**

```
Your first name :<input type="text" size="15" name="firstName" onblur="allLetter(this.value); "/><p/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T03:25:08.827

您正在将输入元素传递给 allLetter。你应该这样写方法。

```
function allLetter(inputtxt)  
{  
 var letters = /^[A-Za-z]+$/;  
 if(inputtxt.value.match(alphaExp))  
   {  
    return true;  
   }  
 else  
   {  
   alert("message");  
   return false;  
   }  
} 
```

# css - 负顶部问题，导致下面的 div 出现间距问题

> ID：13736418
> 
> 赞同：0
> 
> 时间：2012-12-06T03:19:56.850
> 
> 标签：css

所以我在 div 上关注 css

.hdrContainer { 位置：相对；顶部：-28px；左：0；z-索引：1001；背景重复：无重复；填充顶部：35px；}

我在其中添加了负上边距和填充上边距。这样做的原因是将此 div 的背景图像放到页面顶部并将内容向下推送，使其正确显示在 div 中。这看起来不错。

问题是它导致了低于此之前没有间距的 div 之间的间距。其中有以下简单的css。

```
.container { margin: 0 auto; text-align: left; width: 980px; } 
```

所以标记如下

```
<div class="hdrContainer">...</div>
<div class="container">...</> 
```

由于某种原因，添加负顶部会导致这些 div 之间的间距。

任何想法，我如何才能删除 .hrdContainer 以下的任何内容以不受上述更改的影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:29:19.250

更改`top:-28px`为`margin-top: -28px`，您就可以开始了。

[http://jsfiddle.net/VeR3S/](http://jsfiddle.net/VeR3S/)

# django - 如何为 Django 上的自定义用户配置文件创建 urls.py？

> ID：13736419
> 
> 赞同：0
> 
> 时间：2012-12-06T03:20:18.347
> 
> 标签：django

我正在尝试制作自定义用户个人资料网址，因此当用户访问他们的个人资料页面时，他们将访问网址：accounts/（无论用户名是什么）。阅读 django 书后，我知道我可以使用 accounts/d 来捕获数字，或使用 accounts/[A-Za-z] 来捕获字符。如果我想同时捕获数字和字符怎么办，因为用户名可以同时具有这两者？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:53:20.843

只需将数字添加到您的正则表达式...`[a-zA-Z0-9]`

或者只是使用`\w`.

[http://docs.python.org/2/library/re.html](http://docs.python.org/2/library/re.html)

这个正则表达式是在 django 中捕获 slug 的标准： `^accounts/(?P<slug>[\w-]+)/$`

字母数字加`-`：my-slug、my-s1ug 等。

# php - 在函数中分配日期后 PHP 变量的值为 0

> ID：13736422
> 
> 赞同：0
> 
> 时间：2012-12-06T03:20:30.143
> 
> 标签：php, mysql, class, date

我有一个函数，它是类或库的一部分，它将用户的生日发送到数据库。出于某种原因，保存该信息的变量`($this->birthdate)`发送的值是 0000-00-00 而不是实际的生日。

这是我的示例代码：

```
function isAgeValid(){

     $birthDate1=$this->birth_year.'-'.$this->birth_month.'-'.$this->birth_day;
     $birthDate1 = explode("-", $birthDate1);
     $age = (date("md", date("U", mktime(0, 0, 0, $birthDate1[0], $birthDate1[1], $birthDate1[2]))) > date("md")
            ? ((date("Y")-$birthDate1[2])-1):(date("Y")-$birthDate1[2]));
    $this->birthdate=($birthDate1);

    return ($age > 17);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T03:41:11.253

我的建议是将数据库中的字段更改为键入[TIMESTAMP](http://dev.mysql.com/doc/refman/5.0/en/timestamp-initialization.html)并将其作为[Unix Timestamp](http://php.net/manual/en/function.strtotime.php)保存到数据库中。如果您需要再次从时间戳中提取人类可读的日期，请使用`$birthdate = date("Y-m-d",$timestamp);`

```
$birthdate = strtotime($this->birth_year." ".$this->$birth_month." ".$this->birth_day
if($birthdate !== false)){
    mysql_query("INSERT INTO table(timestamp_field)VALUES('".$birthdate."')");
} 
```

这也可以防止[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)，因为 strtotime 函数确保 $birthdate 是一个数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T03:26:26.233

```
$birthDate1=$this->birth_year.'-'.$this->birth_month.'-'.$this->birth_day;
 $birthDate1 = explode("-", $birthDate1); 
```

这毫无意义，我的猜测是第二行会导致您的问题。后来你有

```
$this->birthdate=($birthDate1); 
```

所以生日有一个数组而不是日期字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T04:00:06.473

更短/更清洁：

```
function isAgeValid() {
    $this->birthdate = $this->birth_year . '-' . $this->birth_month . '-' . $this->birth_day;
    $age = date('Y') - $this->birth_day - (date("md", strtotime($this->birthdate)) > date("md") ? 1 : 0);
    return ($age > 17);
} 
```

# javascript - JavaScript递减字母函数

> ID：13736424
> 
> 赞同：2
> 
> 时间：2012-12-06T03:20:39.470
> 
> 标签：javascript

JavaScript 语言的新手，需要帮助创建一个生成以下显示的函数。

```
abcdefghijklmnopqrstuvwxyz
 bcdefghijklmnopqrstuvwxyz
  cdefghijklmnopqrstuvwxyz
   defghijklmnopqrstuvwxyz 
```

....等等，一直到

```
 xyz
                        yz
                         z 
```

我不是要讲义，只是初学者入门的一点启动！链接，提示，提示，任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T03:29:27.227

数组和循环结合起来非常强大。

```
var alphabet = "abcdefghijklmnopqrstuvwxyz".split('');
console.log(alphabet.join(''));

while (alphabet.​length > 0) {
    alphabet.shift();
    console.log(alphabet.join(''));
}​​​ 
```

**编辑：** 如果你真的需要你的递减字母左填充，你可以使用这个：

```
var alphabet = "abcdefghijklmnopqrstuvwxyz";
var letters = alphabet.split('');
var addPadding = (function (minLength) {
    return function (shortString) {
        if (shortString.length < minLength) {
            return new Array(
                minLength - shortString.length + 1
            ).join(' ') + shortString;
        }
    };
}(alphabet.length));

console.log(alphabet);
while (letters.length > 0) {
    letters.shift();
    console.log(addPadding(letters.join('')));
} 
```

**编辑：** 这是一个*更*简单的答案：

```
function decrementingAlphabet () {
    var alphabet = 'abcdefghijklmnopqrstuvwxyz';

    function iterate(spaces, letters) {
        if (letters.length > 0) {
            console.log(spaces + letters);
            iterate(spaces + ' ', letters.substring(1));
        } else {
            return;
        }
    }

    iterate('', alphabet);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-03T09:50:23.117

```
(function() {
  var theENalphabet = [];
  for (var charNow = "a".charCodeAt(0); charNow <= "z".charCodeAt(0); charNow += 1) {
       theENalphabet.push(String.fromCharCode(charNow));
  }
  var isNow = 0;
  function decrAlph(startAt) {
     var alphString = "";
     for (var i = startAt; i < theENalphabet.length; i += 1) {
         alphString += theENalphabet[i];
     }
     console.log(alphString);
     isNow++;
     while (isNow < theENalphabet.length) {
         decrAlph(startAt + 1);
     }
  };
  decrAlph(0);
})(); 
```

获取的 charCode 可以抽象为一个函数：

```
var getCharCode = function(el){
    return String.prototype.charCodeAt.call(el, 0);
};
getCharCode("a"); // returns 97.. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T03:27:43.013

这是一个简单的例子。

```
var str = '';
for (var s=0; s < 26; ++s) {
    str = '';
    for (var i=0; i < 26 - s; ++i) {
        str += String.fromCharCode(97+s+i);
    }
    document.write(str + "<br/>");
} 
```

​ 见[http://jsfiddle.net/G5Gds](http://jsfiddle.net/G5Gds)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T03:27:47.827

在字符代码中，小字母从 97 开始（97 表示 a）。您需要使用 2 个 for 循环来打印此类系列。

这是您的[jsfiddle 演示](http://jsfiddle.net/umeshpatil86/EHtEz/2/)：

```
var display='';
for(var i=97;i<123;i++){
    var s='';
    for(var j=i;j<123;j++){
        s+= String.fromCharCode( j );       
    }           
    display+=s;
} 
alert(display); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T03:28:29.747

嗯，也许这会帮助你走上正轨？

```
var str = '';

// Find out what 'a' is in ASCII
var baseLetterCode = 'a'.charCodeAt(0);

// Loop once for each letter
for (var i = 0; i < 26; ++i) {
    // Append to string
    str += String.fromCharCode(baseLetterCode + i);
} 
```

# php - 如何更改 cakephp 中的分页 url 以获得更好的 seo

> ID：13736426
> 
> 赞同：0
> 
> 时间：2012-12-06T03:20:55.920
> 
> 标签：php, cakephp, seo, pagination, paging

当我使用 CakePHP Pagination 时，我得到这样的默认 url：

```
localhos/posts/index/page:3/sort:title/direction:asc 
```

但是我必须在控制器、视图和 routes.php 中更改什么来创建这样的工作 url：

```
localhost/posts/page/3/sort/title/direction/asc 
```

或者

```
localhost/posts/page/3/title/asc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:10:19.200

我认为你真正想要的是：

```
public $paginate = array(
    'paramType' => 'querystring'
); 
```

关于这个的更多细节[[这里]](http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html#pagination-with-get-parameters)

它使它如此而不是：

```
/posts/index/page:3/sort:title/direction:asc 
```

它的：

```
/posts/index?page=3&sort=title&direction=asc 
```

IMO 这是进行 SEO 和其他一切的最佳方式。除非您是极少数需要针对“asc”、“3”、“direction”、“title”等关键字进行优化的情况，否则使用这样的查询字符串参数是理想的。

# php - 设置会话超时

> ID：13736427
> 
> 赞同：0
> 
> 时间：2012-12-06T03:20:57.290
> 
> 标签：php, sql

我有一个用于管理员和普通用户登录的表单。我想在 30 分钟后将会话超时，我将如何修改我当前的代码来做到这一点？

```
<?php
    session_start(); //Start the session
    define(ADMIN,$_SESSION['username']); //Get the user name from the previously registered super global variable

    if(!session_is_registered("admin")){ //If session not registered
        header("location:../index.php"); // Redirect to login.php page
    }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T03:38:07.323

这是清除指定时间会话的代码。

要清除**非活动**会话，您必须每页更新会话超时。希望能帮助到你。

供参考，[http://bytes.com/topic/php/insights/889606-setting-timeout-php-sessions](http://bytes.com/topic/php/insights/889606-setting-timeout-php-sessions)

```
session_start();
$timeout = 60; // Number of seconds until it times out.

// Check if the timeout field exists.
if(isset($_SESSION['timeout'])) {
    // See if the number of seconds since the last
    // visit is larger than the timeout period.
    $duration = time() - (int)$_SESSION['timeout'];
    if($duration > $timeout) {
        // Destroy the session and restart it.
        session_destroy();
        session_start();
    }
}

// Update the timout field with the current time.
$_SESSION['timeout'] = time(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T03:28:13.010

通过运行时配置项[session.cookie_lifetime](http://php.net/manual/en/session.configuration.php#ini.session.cookie-lifetime)或函数[session_set_cookie_params()](http://php.net/manual/en/function.session-set-cookie-params.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T03:28:18.270

```
if ($_SESSION['timeout'] + 30 * 60 < time()) {
     // 30 min timeout
  } 
```

# java - java中数字序列的加密

> ID：13736434
> 
> 赞同：-1
> 
> 时间：2012-12-06T03:22:09.923
> 
> 标签：java, encryption

我们正在制作一个涉及加密参考号的程序。但是，最终结果应该仍然是一个数字，但比参考数字的原始长度短两位。有什么算法或方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T03:25:08.640

一般来说，加密输出的大小要么更大，要么相等，并且仅在特定情况下（等于或小于特定算法的块大小，或者当存在唯一数字作为 IV 时）具有相同的长度。

当然，如果可行的话，您可以在加密之前执行某种压缩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:01:14.043

如果您需要一些东西来保密，这可能是一个惊喜，加密不是唯一的选择。应该谨慎使用加密，因为您可能只是用一个问题代替下一个问题（即密钥管理问题）。

并非无处不在，但有时可能会有不同的解决方案。如果您不想发出一个可以检索关联数据的数字，您可以在表中添加另一列作为随机数，并发出该数字，而不是加密的 ID 或其他加密值。您还可以自由限制结果数字的大小。

# c# - 我如何知道我的 .NET 应用程序在 Web 服务器上运行的是哪个用户？

> ID：13736436
> 
> 赞同：0
> 
> 时间：2012-12-06T03:22:14.297
> 
> 标签：c#, .net, iis, web-applications, web

我们正在开发一个迷你社交网络 Web 应用程序。它必须从另一个 Web 应用程序获取一些[JSON数据。](http://en.wikipedia.org/wiki/JSON)奇怪的是，当我们在开发人员机器上运行代码时，一切都很好，我们得到了 JSON 数据。但是当相同的应用程序部署在 Web 服务器上时，我们会收到一条错误消息

> 底层连接已关闭：接收时发生意外错误。

请注意：我们的登录方式是Windows认证：

```
<authentication mode="Windows">
</authentication> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T15:10:11.033

这可能需要一些试验和错误，但在 Visual Studio 中，如果您打开菜单*Debug* -> *Attach to Process*，然后在 Qualifier 框中选择您的网络服务器，您应该会看到所有正在运行的进程的列表以及信息，例如用户名和[PID](http://en.wikipedia.org/wiki/Process_identifier)。

如果您知道 PID 或手动找出哪个进程是您的应用程序，您应该能够确定正在使用的用户名。

# java - 在 Android 中加载一个 16KB 的文件需要 35 秒？

> ID：13736442
> 
> 赞同：4
> 
> 时间：2012-12-06T03:23:25.443
> 
> 标签：java, android, memory

我的 Nexus One 平板电脑上的 Android 存在内存问题，我希望能对此有所了解。

我正在制作一个由 64 个整数数组表示的棋盘游戏。当 Activity 的 onPause() 被调用时，它会保存当前的棋盘，以及之前回合的每个棋盘（最多 64 回合）。这大约需要600ms，没问题。当 onResume() 被调用时，是时候加载信息了，完整的撤销历史可能需要 35 秒！

```
 FileInputStream fis = c.openFileInput(filename);
        Scanner sc = new Scanner(fis);
        int nprev = sc.nextInt(); // Number of previous boards to load
        sc.nextLine();
        for(int k = 0; k < nprev; k++) {
            int[] parr = new int[bsize*bsize];
            for(int i = 0; i < bsize; i++) {
                for(int j = 0; j < bsize; j++) {
                    int v = sc.nextInt();
                    parr[i*bsize+j]=v;
                }
                sc.nextLine();
            }
            prevBoards.push(parr);
        }

        sc.close();
        fis.close();
    } 
```

bsize=8。所以它只是创建 int[64] 数组，将数字加载到其中，然后将它们推送到堆栈（prevBoards）。它最多可以将 64 个 int[64] 数组压入堆栈。不过，我认为这需要太长时间是不是错了？

我注意到，在加载时，LogCat 会收到诸如“GC_CONCURRENT freed 402K, 7% free 7500K/8052K ...”之类的垃圾邮件，这没有意义，因为数组应该只占用 4*64*64/1024=最多16KB内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:00:39.940

我刚刚重现了您保存 65 个整数的问题，并使用您的代码在 onResume 中再次加载它们。加载这 65 个整数需要 3 秒的活动时间！

我做了一些分析以找到代码在哪里浪费时间，发现**Scanner**类是您的主要问题。似乎它使用了一些正则表达式，几乎所有的 cpu 时间都用于编译一个被称为 65 次的模式。

您应该避免使用扫描仪类，并找到一种更好的方法来存储您的整数值。也许看看[http://developer.android.com/reference/java/io/ObjectOutputStream.html](http://developer.android.com/reference/java/io/ObjectOutputStream.html)

# android - 简化代码来管理 SharedPreferences

> ID：13736446
> 
> 赞同：0
> 
> 时间：2012-12-06T03:24:26.157
> 
> 标签：android, sharedpreferences

我怎样才能使这个代码修剪下来？

```
 prefsDisplay = getSharedPreferences("spinnerSelection",
            Context.MODE_PRIVATE);
    prefsPlan = getSharedPreferences("spinnerSelection1",
            Context.MODE_PRIVATE);

    if (prefsDisplay.getInt("spinnerSelection", 0) == 0) {
        s1 = 0;
    } else if (prefsDisplay.getInt("spinnerSelection", 0) == 1) {
        s1 = 1;
    } else if (prefsDisplay.getInt("spinnerSelection", 0) == 2) {
        s1 = 2;
    } else if (prefsDisplay.getInt("spinnerSelection", 0) == 3) {
        s1 = 3;
    } else {
        s1 = 0;
        DP.BreakdownMonths = 0;
    }

    if (prefsPlan.getInt("spinnerSelection1", 0) == 0) {
        s2 = 0;
    } else if (prefsPlan.getInt("spinnerSelection1", 0) == 1) {
        s2 = 1;
    } else if (prefsPlan.getInt("spinnerSelection1", 0) == 2) {
        s2 = 2;
    } else {
        s2 = 0;
        DP.PlanType = "highint";
    } 
```

基本上，我在做什么，当应用程序登录时，我希望它检查 SharedPreferences。如果它找到一个值，它会分配它，否则，它默认为一个值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T03:29:25.583

以下内容与您的代码完全相同。使用分配给共享首选项的值，如果为空，则分配 0 并同时分配 DP。

```
prefsDisplay = getSharedPreferences("spinnerSelection",
        Context.MODE_PRIVATE);
prefsPlan = getSharedPreferences("spinnerSelection1",
        Context.MODE_PRIVATE);

s1 = prefsDisplay.getInt("spinnerSelection", -1 );
if( s1 < 0 ) { 
    s1 = 0;
    DP.BreakdownMonths = 0;
}

s2 = prefsPlan.getInt("spinnerSelection1", -1 );
if( s2 < 0 ) {
    s2 = 0;
    DP.PlanType = "highint";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T03:29:05.223

使用`switch`and`case`来定义各自的 if 语句，`default`如果它不匹配任何 if 语句，则使用来分配。

例子：

```
 int month = 8;
    String monthString;
    switch (month) {
        case 1:  monthString = "January";
                 break;
        case 2:  monthString = "February";
                 break;
        case 3:  monthString = "March";
                 break;
        case 4:  monthString = "April";
                 break;
        case 5:  monthString = "May";
                 break;
        case 6:  monthString = "June";
                 break;
        case 7:  monthString = "July";
                 break;
        case 8:  monthString = "August";
                 break;
        case 9:  monthString = "September";
                 break;
        case 10: monthString = "October";
                 break;
        case 11: monthString = "November";
                 break;
        case 12: monthString = "December";
                 break;
        default: monthString = "Invalid month";
                 break;
    }
    System.out.println(monthString); 
```

# python - 对url中的汉字进行转义？

> ID：13736452
> 
> 赞同：1
> 
> 时间：2012-12-06T03:24:47.797
> 
> 标签：python, escaping, urlencode

有时，汉字会转义为以下形式：

%B9%F3%D6%DD%C3%A9%CC%A8

如何在 Python 中将这些转换回可读的中文字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T04:18:35.810

你可以`urllib2.unquote`这样使用：

```
>>> import urllib2
>>> print urllib2.unquote('%B9%F3%D6%DD%C3%A9%CC%A8').decode('gbk')
贵州茅台 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T05:20:12.223

试试这个，

```
urllib.unquote(your_string).decode(your_encoding) 
```

# mysql - 如何根据行而不是AUTO_INCREMENT使ID“主键”字段集编号

> ID：13736456
> 
> 赞同：1
> 
> 时间：2012-12-06T03:25:09.113
> 
> 标签：mysql, unique, auto-increment

现在我将我的 ID 字段作为 MySQL 中的主键并启用了 AUTO_INCREMENT。我想知道的是如何使 ID 代表表中该行的编号，而不是在插入时给它一个数字，然后坚持使用该数字？因为当我删除一些东西时，那个数字就不会被使用。我希望它们都基于行数是唯一的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:29:59.420

始终有一个主键。基本的自动增量 int 或多个字段的复合键。它可以帮助您的数据库完成它的工作，并且在您想要建立关系时派上用场。`RowIndex`当您删除任何内容时，添加一个名为并重新编号的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T03:38:03.423

创建表时不要添加 AUTO_INCREMENT 关键字

对于现有表，使用

```
ALTER TABLE <Table_Name> MODIFY COLUMN <Column_Name> INTEGER; 
```

删除 AUTO_INCREMENT 并保留主键。

# assembly - （32 位汇编）将指针传递给 proc

> ID：13736457
> 
> 赞同：0
> 
> 时间：2012-12-06T03:25:16.653
> 
> 标签：assembly, x86, masm, irvine32

我不知道为什么这个程序不能输出

> +1 +2 +3 +4

输出是

> +4214784 +1967600538 +2130567168 +1638356

我想这是地址，但为什么呢？如何纠正它？

这是我的代码：

```
include irvine32.inc

.data
  matrix dword 1, 2, 3, 4

.code
  print proto, m:ptr dword

  main proc
    invoke print, addr matrix

    exit
  main endp

  print proc, m:ptr dword
    mov eax, m[0 * type m]
    call writeint

    mov eax, m[1 * type m]
    call writeint

    mov eax, m[2 * type m]
    call writeint

    mov eax, m[3 * type m]
    call writeint

    ret
  print endp

  end main 
```

谢谢你的回答<(__)>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:38:18.287

`m`是在堆栈上传递的指针。汇编器会变成`m`类似`[ebp+8]`. 索引将从该位置开始访问堆栈上的项目，这不是您想要的。您需要取消引用`m`指针，只有将其加载到寄存器中才能这样做。

```
mov ecx, m  ; this will be mov ecx, [ebp+8] or similar
mov eax, [ecx + 0*4] ; first item
call WriteInt
mov eax, [ecx + 1*4] ; second item
call WriteInt
... 
```

我不建议初学者在不了解确切生成的代码的情况下使用其汇编程序的花哨功能。

# eclipse - 在 Eclipse 中嵌入/集成第 3 方编辑器

> ID：13736460
> 
> 赞同：1
> 
> 时间：2012-12-06T03:25:39.237
> 
> 标签：eclipse, eclipse-plugin, pentaho, kettle

有没有办法在 Eclipse 中嵌入或集成第 3 方编辑器。我们正在尝试将 Kettle 的 Spoon 编辑器（ETL 基于 Java 的图形界面）添加到 Eclipse，而不修改 Spoon 的代码。有没有办法做到这一点。基本需求是 - 当用户单击 Spoon 文件 (*.ktr) 时，Spoon 编辑器会在 Eclipse 的编辑器窗格中打开（连同其所有菜单和工具栏）

Spoon 完全基于 java 和 swt。目前我正在使用 Spoon 作为外部编辑器（通过 Eclipse），但它在单独的窗口 Spoon 中打开：[http ://wiki.pentaho.com/display/EAI/.01+Introduction+to+Spoon](http://wiki.pentaho.com/display/EAI/.01+Introduction+to+Spoon)

考沙尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:26:25.283

I don't know anything about Spoon besides the screenshots of it's GUI on it's website, so take the following with a grain of salt! (pun intended)

Most probably Spoon launches it's own [`Shell`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Shell.html), hence cannot be embedded in an editor pane.

Rather, to achieve your goal you will have to create your own editor and register it through the [`org.eclipse.ui.editors`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_ui_editors.html) extension point.

The difficulty to create an editor depends on how modular Spoon is.

# objective-c - NSManagedObject [User setUsername:]：发送到实例的无法识别的选择器

> ID：13736461
> 
> 赞同：2
> 
> 时间：2012-12-06T03:25:59.853
> 
> 标签：objective-c, core-data

我有一个使用 CoreData 的应用程序。我为 CoreData 中的两种对象类型创建了 NSManagedObjects。当我尝试使用该对象并在该对象上设置一个属性时，编译器会显示“[User setUsername:]: unrecognized selector sent to instance”。不管我，[用户 setValue] 的什么属性，尝试它总是无法识别？

```
User *joeBlow = [[User alloc] init];
[joeBlow setUsername:@"joeblow"]; 
```

或用户 *joeBlow = [[用户分配] init]; joeBlow.username = @"JoeBlow";

两者都给出“发送到实例的无法识别的选择器”

以下是我的 USER 代码：

用户.h

```
@interface User : NSManagedObject

  @property (nonatomic, retain) NSString * address1;
  @property (nonatomic, retain) NSString * username;
  @property (nonatomic, retain) NSString * zip;
  @property (nonatomic, retain) NSString * email;

@end 
```

用户.m

```
@implementation User

  @dynamic address1;
  @dynamic username;
  @dynamic zip;
  @dynamic email;

@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T03:34:50.517

您不能通过普通模式创建 Core Data 实体的新实例`alloc`（`init`与其他类不同）。相反，在 NSEntityDescription 上调用类方法：

```
User *joeBlow = [NSEntityDescription 
                 insertNewObjectForEntityForName:@"User"
                 inManagedObjectContext:self.managedObjectContext];
[joeBlow setUsername:@"joeblow"]; 
```

有关更多信息，请参阅 Apple 的[核心数据编程指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdCreateMOs.html)。

最后，请注意`[jb setUsername:@"jb"]`和`jb.username = @"jb"`是相同的 - 后者是*点符号*，表示前者的不同方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-15T18:25:43.330

这个正确答案不再正确。看这里。

[https://github.com/RestKit/RestKit](https://github.com/RestKit/RestKit)

```
Article *article = [Article new];
article.title = @"Introduction to RestKit";
article.body = @"This is some text.";
article.author = @"Blake";

// POST to create
[manager postObject:article path:@"/articles" parameters:nil success:nil failure:nil]; 
```

# node.js - 如何使用dustjs-linkedin 作为客户端模板？

> ID：13736462
> 
> 赞同：9
> 
> 时间：2012-12-06T03:26:02.123
> 
> 标签：node.js, dust.js, client-side-templating

我得到了服务器端和客户端模板的想法，但是dust.js 让我有点困惑。

为了使用dust.js进行客户端模板，您需要三个步骤：

1.  遵守模板
2.  加载模板
3.  渲染模板

对？

但是模板从何而来？我看到了两种不同的方法：

```
 1\. <script> template <script>
 2\. <div> template </div> 
```

...它们都在 DOM 中。哪个是对的？

我还注意到您可以通过 ajax 加载模板，因此模板不会在 DOM 中看到，但我不知道该怎么做。

另外，我目前正在使用玉作为快速视图引擎。是否需要切换到dust.js？有什么好处？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-13T06:48:50.110

这是 LinkedIn Dust JS wiki 页面，可以回答您的问题并有很好的示例： http: [//linkedin.github.com/dustjs/](http://linkedin.github.com/dustjs/)

但是在这里回答你的问题：

是的，你需要编译你的dust模板，它变成一个JavaScript文件，你可以通过`<script>`标签添加到你的页面，然后调用**dust.render**方法来渲染你的模板。这是一个例子：

1.  在模板文件中编写以下代码并将其保存为**sample.tl**

    ```
    <p>Hi {firstName} {lastName}</p> 
    ```

2.  `dustc sample.tl`通过在命令行中将sample.tl 编译为 sample.js或用于`dust.compile("your_template_code", "template_name")`编译模板并将输出保存在 JavaScript 文件 (sample.js) 中，或者您使用duster.js 通过 nodejs 观看和编译模板：[https://github .com/dmix/dusterjs](https://github.com/dmix/dusterjs)

3.  在您的 html 中添加 sample.js：

    ```
    <script type="text/javascript" src="sample.js"></script> 
    ```

    这也会将您的模板注册到dust.cache。

4.  在你的 JavaScript 中：

    ```
    var your_json = {firstName:'James', lastName:'Smith'};

    dust.render('sample', your_json, function(err, out){

        your_dom_element.innerHTML = out;

    }); 
    ```

    上述`dust.render`方法的结果将是**`<p>Hi James Smith</p>`**

    因此，您需要将 3 个参数传递给`dust.render`：`dust.render(template_name, json, callback)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:33:41.807

正如 wiki 所说，您可以在客户端或服务器中使用灰尘。如果您在客户端使用它，您应该获得模板（例如使用 ajax 请求），在浏览器中将其编译为渲染。您必须在页面中包含灰尘脚本文件。

另一方面，您可以在服务器中使用灰尘（使用 rhino 或 nodejs）。在这种情况下，您将在服务器中编译和呈现模板，以便浏览器接收 html。

# asp-classic - 用于 beta 测试网页表单的自动表单填写

> ID：13736463
> 
> 赞同：-2
> 
> 时间：2012-12-06T03:26:22.057
> 
> 标签：asp-classic, webforms, validation, beta, beta-testing

有谁知道我可以用于 Beta 测试网页表单的应用程序。我正在寻找可以单击按钮的东西，它将使用通用信息填充所有数据字段。目的是测试我构建的网站，通过运行应用程序并让它只是用不同的信息、符号和字符填写页面表单中的随机信息来查看是否发生任何错误。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-06T16:55:51.667

您可以使用此方法填充表单字段...

首先设置一些值，例如...

```
strFirstname = "Jeff"       'temporary fill
strLastname = "Black" 
```

然后将值添加到您的表单字段...

```
<input type="text" name="Firstname" value="<%= strFirstname">">
<input type="text" name="Lastname" value="<%= strLastname">"> 
```

现在你只需要点击你的提交按钮。

当您准备好上线时，只需取消注释临时填充值即可。然后通过取消注释它们，它们总是在那里以供将来调试。

为了一目了然地查看下一页上的结果，我使用了以下内容：

```
response.write("Firstname = " & request("Firstname") & "<BR>" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-07T06:23:16.677

您可以使用 jQuery，它是一个 Javascript 插件（客户端）。

如果你想定位所有输入字段，你可以做这样的事情......

```
$("form input").val(this.attr("name")); 
```

运行此 jQuery 代码将使用属性中的值填充所有输入字段`Name`。

因此该`address`字段将填充为`address`，但您可以将 更改`this.attr("name")`为其他任何内容，它将相应地填充所有字段。

不确定这是否有帮助，但我认为这是填充所有输入字段的最快方法。看看 jQuery [http://www.jquery.com](http://www.jquery.com)，我相信您会发现它对您未来的应用程序开发很有帮助。

# ruby-on-rails - 尝试遍历模型的条目时，机车编辑器抛出“NoMethodError”

> ID：13736464
> 
> 赞同：5
> 
> 时间：2012-12-06T03:26:22.647
> 
> 标签：ruby-on-rails, ruby, liquid, locomotivecms

所以我使用 Locomotive、Ruby on Rails CMS 及其编辑器来创建博客。在机车后端，我制作了一个模型，其中包含一个可以博客文章的 slug 'posts'。然后，在我的 index.liquid 文件中，我尝试遍历模型的内容并显示全部内容。

这是液体循环：

```
{% for post in contents.posts %}
    {{ post.title }}
{% endfor %} 
```

但它显示'NoMethod Error at /'，' `contents`nil:NilClass 的未定义方法'。如果我从 for...in 循环中删除 .posts ，则没有错误，但循环甚至不会发生一次，很自然，因为只能`contents`循环。

我已经阅读了文档并且代码应该可以工作。为什么它表现得好像没有数据一样？

2012 年 12 月 11 日更新：如果我将代码推送到真正的机车引擎，它可以完美运行，只有编辑器会抛出此错误。我使用编辑器，所以我可以通过我的 IDE 而不是在浏览器中编辑代码。

2012 年 12 月 12 日更新：发现这不是机车编辑器的用途。您应该在制作网站时使用虚拟数据库，然后将其推送到引擎以将其与您自己的数据库一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:31:05.717

1.  可能循环表现得好像没有数据，因为 Rails 连接的后端没有数据。

如果您的内容在生产数据库中，Rails 也需要使用生产数据库。

```
rails server -e production 
```

请参阅此问题中有关切换到生产环境的更多说明：[将 Rails 应用程序更改为生产环境](https://stackoverflow.com/questions/1949229/change-a-rails-app-to-production)

2.  如果 "contents" 为 nil，那么像 ".posts" 这样的访问器方法将显示为没有方法错误。尝试在您的模板中添加一个部分，这样您就可以处理“contents.nil？”的情况。是真的。

3.  因为我不熟悉 Locomotive CMS，只熟悉 Rails，所以在这种情况下可以尝试另一件事：小心对模型的单复数引用！Rails 对这些名称非常讲究，您可能需要使用“内容”而不是“内容”。

# jquery - 即使没有空文本输入，它仍然指出我有一个空文本输入

> ID：13736467
> 
> 赞同：1
> 
> 时间：2012-12-06T03:26:30.450
> 
> 标签：jquery, html, jsfiddle

我在这里有一个 jsfiddle [http://jsfiddle.net/cbyJD/74](http://jsfiddle.net/cbyJD/74)

我遇到的问题是它没有在警报中显示问题编号，而是显示 NaN。此外，即使所有文本输入都已填写，它仍会显示一条警报，说明我有一个空的文本输入。

我在小提琴中做错了什么？

Jquery 验证（）函数在这里：

```
function validation() {

        var alertValidation = "";
        var _qid = "";
        var _msg = "";

        $("[class*='q']").each(function(i) {  
        var questions = parseInt($("[class*=q" + i + "_qnum]").text());
        var marks = parseInt($("[class*=q" + i + "_ans_text]").text()); 
        var txtinput = $("[class*=q" + i + "_mark]").val(); 
        _qid = questions;
        _msg = "You have errors on Question Number: " + _qid + "\n";

    if (txtinput == '' || txtinput == null) {
        alertValidation += "\n\u2022 You have not entered in a value for all the Indivdiaul Marks textbox\n";
    }    

                if (alertValidation != "") {
                    return false; //Stop the each loop 
                }

            });

        if (alertValidation != "") {
            alert(_msg + alertValidation);
            return false;
        }

        return true;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:56:00.987

这里的值为 $("[class*=q" + i + "_qnum]") 为空，网络找不到你想要的类，当你的 "i" 为 0 时，class="q0_qnum"

# magento - Magmi 导入简单产品列表

> ID：13736473
> 
> 赞同：-1
> 
> 时间：2012-12-06T03:28:11.517
> 
> 标签：magento

我卖宠物用品。我的经销商为我提供了一个包含所有必需信息的 CVS 文件，供我将其上传到我的网站。我目前将它作为一个简单的产品上传。但我希望它对用户更友好。我正在使用 Magento 社区 1.7。我试过弄乱可配置的产品，但这对于我使用的上传是不可能的。

示例：狗笼有不同的尺寸。目前它显示为简单的产品并显示 5 种不同的尺寸。我希望它像所有较大的命名商店一样显示。基本上显示带有不同选项的下拉列表。我尝试创建一个可配置的产品并将我上传的产品关联为一个简单的产品，但这种方法不起作用。关于我能做什么的任何其他想法？我希望我的客户能够点击：iCrate Double Door 并有 18x24....24x30 等选项。其他公司如何让他们这样列出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:01:15.933

您还可以修改您的分组产品以执行类似操作并将列表作为下拉列表查看此线程 [http://www.magentocommerce.com/boards/viewthread/208482/#t297046](http://www.magentocommerce.com/boards/viewthread/208482/#t297046)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T06:12:08.630

您正在做正确的事情 - 可配置的产品将为您提供您想要实现的目标。

您需要安装 Magmi 可配置产品插件。您还需要设置您的 csv，以便首先出现简单产品，然后是可配置产品。要在导入时自动将简单产品与可配置的父产品关联起来，您需要一个额外的列来指定可配置属性（请参阅 Magmi 文档），并且需要设置 sku，以便简单 sku 是可配置 sku 的扩展版本。同样，Magmi wiki 关于可配置的将解释更多。

# ckeditor - CKEditor：按钮未出现

> ID：13736474
> 
> 赞同：5
> 
> 时间：2012-12-06T03:28:11.590
> 
> 标签：ckeditor

我想在 CKEditor 的工具栏中添加一个按钮，但没有出现按钮。这是创建插件的代码保存在`_source/plugins/footnote/`

```
CKEDITOR.plugins.add('footnote',
{
    init: function(editor)
    {
        var pluginName = 'footnote';
        CKEDITOR.dialog.add(pluginName, this.path + 'dialogs/footnote.js');
        editor.addCommand(pluginName, new CKEDITOR.dialogCommand(pluginName));
        editor.ui.addButton('Footnote',
            {
                label: 'Footnote or Citation',
                command: pluginName
            });
    }
}); 
```

这是 config.js 的代码

```
CKEDITOR.editorConfig = function( config )

{

    config.toolbar = 'MyToolbar';

    config.extraPlugins = 'footnote';

    config.toolbar_MyToolbar =
      [

    ['Bold','Footnote','Italic']

    ];

}; 
```

只是粗体和斜体出现在工具栏中。但脚注按钮没有出现。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T06:06:20.993

您没有提供图标：

```
CKEDITOR.plugins.add('footnote', 
{
    icons: 'myfootnote',
    init: function (editor) {
        var pluginName = 'footnote';
        CKEDITOR.dialog.add(pluginName, this.path + 'dialogs/footnote.js');
        editor.addCommand(pluginName, new CKEDITOR.dialogCommand(pluginName));
        editor.ui.addButton('Footnote',
            {
                label: 'Footnote or Citation',
                icon: 'myfootnote',
                command: pluginName
            });
    }
}); 
```

请务必在 /plugins/footnote/icons/myfootnote.png 创建一个图标。

只接受 PNG。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-18T10:32:13.260

按钮必须具有相同的名称（区分大小写）。

因此替换`editor.ui.addButton('Footnote',`为`editor.ui.addButton('footnote',`

# python - Python：如何显示对话窗口并同时工作

> ID：13736478
> 
> 赞同：1
> 
> 时间：2012-12-06T03:28:32.607
> 
> 标签：python, multithreading, wxpython

考虑一下：

```
import wx, time

# STEP 1: Setup Window
class Window(wx.Frame):
    def __init__(self,parent,id):
        wx.Frame.__init__(self,parent,id,'Bobby the Window', size=(300,200))
        panel = wx.Panel(self)
        self.Bind(wx.EVT_CLOSE, self.closewindow)

    wx.StaticText(panel, -1, "Yo user, the program is busy doing stuff!", (50,100), (200,100))

def closewindow(self, event):
    self.Destroy()

# STEP 2: Show Window (run in background, probably with threading, if that is the best way)
if __name__=='__main__':
    app = wx.PySimpleApp()
    frame = Window(parent=None,id=-1)
    frame.Show()
    app.MainLoop()

# STEP 3: Do work
time.sleep(5)

# STEP 4: Close Window, and show user evidence of work
## *Update window to say: "I am done, heres what I got for you: ^blah blah info!^"*
exit() 
```

我的问题是：

*   在第 4 步中，如何更改窗口中的文本（尤其是在线程中）？
*   在第 2 步中，我如何在后台运行窗口，但仍然能够与之通信？（更新文本等）

这类似于我关于如何运行 cli 进度条并同时工作的问题，除了 gui 窗口。

我知道要更改 StaticText，我会执行 'text.SetLabel("BLAH!")'，但如果它在后台运行，我将如何与窗口类进行通信？

**更新：** [这个线程](https://stackoverflow.com/questions/8313169/is-it-still-not-enough-to-simply-use-threads-to-update-gui)也有一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:43:06.363

如果您需要执行一个长时间运行的进程，那么您将不得不使用某种类型的线程或多处理模块。否则，您将阻塞 GUI 的主循环并使其无响应。您还需要使用 wxPython 的线程安全方法从线程与 GUI 进行通信。它们是 wx.CallAfter、wx.CallLater 和 wx.PostEvent。

您可以在以下位置阅读有关 wxPython 和线程的更多信息：

*   [http://wiki.wxpython.org/LongRunningTasks](http://wiki.wxpython.org/LongRunningTasks)
*   [http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/](http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/)

# c# - 如何将单个字符转换为字符串？

> ID：13736480
> 
> 赞同：60
> 
> 时间：2012-12-06T03:28:37.973
> 
> 标签：c#, string, casting, char

我想枚举 a`string`而不是它返回`chars`我想让迭代变量是 type `string`。这可能不可能让迭代类型成为 a`string`那么迭代这个字符串的最有效方法是什么？

我是否需要`string`在循环的每次迭代中创建一个新对象，或者我可以以某种方式执行强制转换？

```
String myString = "Hello, World";
foreach (Char c in myString)
{
    // what I want to do in here is get a string representation of c
    // but I can't cast expression of type 'char' to type 'string'
    String cString = (String)c; // this will not compile
} 
```

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-12-06T03:32:24.737

使用 .ToString() 方法

```
String myString = "Hello, World";
foreach (Char c in myString)
{
    String cString = c.ToString(); 
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-06T03:35:29.390

你有两个选择。创建`string`对象或调用`ToString`方法。

```
String cString = c.ToString();
String cString2 = new String(c, 1); // second parameter indicates
                                    // how many times it should be repeated 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-07-23T09:54:19.803

使用 C# 6 插值：

```
char ch = 'A';
string s = $"{ch}"; 
```

这会减少几个字节。:)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-06T03:31:33.553

似乎显而易见的事情是：

```
String cString = c.ToString() 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-06T03:31:45.827

从 char 创建一个新字符串。

```
 String cString = new String(new char[] { c }); 
```

或者

```
 String cString = c.ToString(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-06T03:53:29.790

创建扩展方法：

```
public static IEnumerable<string> GetCharsAsStrings(this string value)
{
    return value.Select(c =>
           {
                //not good at all, but also a working variant
                //return string.Concat(c);

                return c.ToString();
           });
} 
```

并遍历字符串：

```
string s = "123456";
foreach (string c in s.GetCharsAsStrings())
{
    //...
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-06T03:32:26.203

你试过了吗：

`String s = new String(new char[] { 'c' });`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-06T03:32:30.013

```
String cString = c.ToString(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-30T17:10:26.317

为什么不是这段代码？不会更快吗？

```
string myString = "Hello, World";
foreach( char c in myString )
{
    string cString = new string( c, 1 );
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-11-10T21:25:24.970

> 可能不可能让迭代类型成为字符串

是的：

```
foreach (string str in myString.Select(c => c.ToString())
{
...
} 
```

其他答案中的任何建议都可以代替`c.ToString()`。可能最有效的是一根小头发`c => new string(c, 1)`，这`char.ToString()`可能是引擎盖下的作用。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-08-26T02:11:14.967

您可以将 + 与空字符串一起使用`""`，请检查以下代码：

```
char a = 'A';
//a_str is a string, the value of which is "A".
string a_str = ""+a; 
```

# iphone - 如何将文本的背景图像设置为 UIlabel？

> ID：13736481
> 
> 赞同：2
> 
> 时间：2012-12-06T03:28:43.170
> 
> 标签：iphone, image, text, uilabel

我们可以在 UILabel 中为文本设置颜色。但是我们可以在 UILabel 中将图像设置为文本吗？你能帮助我吗？谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:03:25.947

```
UILabel *lbl  = [[UILabel alloc]initWithFrame:CGRectMake(20, 220, 200, 30)];

[lbl setText:@"Hello"];

[lbl setTextColor:[UIColor yellowColor]];

[lbl setBackgroundColor:[UIColor redColor]];

if you need to set image for your UILabel, you can try like this:

[lbl setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@""]]];

[self.view addSubview:lbl]; 
```

**如果您希望您的 textColor 作为图像，那么请执行此操作**

```
[lbl setTextColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"button_select.png"]]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T03:55:47.793

如果您想使用 复制链接到的图像`UILabel`，可以通过设置标签的文本和`backgroundColor. Then you use`UIColor colorWithPatternImage: `for the orange color pattern. Then use that color for the label's`textColor` 来实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T03:37:57.023

`UILabel`仅用于文本。如果您想要图像，请使用`UIImageView`.

# jvm - IJVM 使用 GOTO 语句的局部变量

> ID：13736482
> 
> 赞同：1
> 
> 时间：2012-12-06T03:28:44.213
> 
> 标签：jvm, bytecode, goto

我正在使用 IJVM 并尝试使用 GOTO 指令使用局部变量代替静态偏移量（或标签）。它行不通。我想它只是将变量名称视为标签并尝试分支到它，但不存在这样的标签。有什么方法可以强制它读取变量的内容（包含偏移量）或其他解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:32:57.577

出于安全原因，JVM 字节码不允许您根据变量的内容跳转到任意指令。这种限制使得 JVM 可以通过特定方法静态枚举所有控制路径来验证字节码的各种安全属性。如果你能够跳转到任何地方，静态分析器就无法证明所有必要的程序不变量都成立。

如果您确实需要跳转到任意索引，请考虑查看`tableswitch`or`lookupswitch`指令，它可以让您提前枚举可能的目的地。这并不完全是您要寻找的东西，但据我所知，您尝试进行的那种任意跳转在 JVM 字节码中是不可能的。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-11T04:40:30.813

GOTO 指令在 MIC1 中实现。它将操作码后的 2 个字节解释为指令开始时到 PC 的偏移量。

我认为分配必须要求您在 MIC1 中编写一个新的 GOTO，它将操作码之后的字节解释为包含分支偏移量的局部变量的偏移量。

# c# - 使用 ListBoxWithCheckBoxes 在运行时创建枢轴项

> ID：13736485
> 
> 赞同：1
> 
> 时间：2012-12-06T03:28:50.763
> 
> 标签：c#, xaml, windows-phone-7.1, pivot, listbox-control

我想在运行时通过 C# 创建一个新的 Pivot Item，显示工具包中 ListBoxWithCheckBoxes 类型的列表 Bx，便于在左侧切换复选框可见或不可见。

我当前的版本工作，就绘制新的枢轴页面，并将项目绑定到它。但我无法让 ListBoxWithCheckBoxes 正常工作。

这是来自我的cs文件：

```
var itemTemplate = 
                @"<DataTemplate xmlns=""http://schemas.microsoft.com/winfx/2006/xaml/presentation"">  
                    <StackPanel Margin=""0,0,0,17"" HorizontalAlignment=""Stretch"" Height=""78"" Orientation=""Vertical""> 
                        <TextBlock Text=""{Binding Title}"" TextWrapping=""Wrap"" Style=""{StaticResource PhoneTextExtraLargeStyle}"" Width=""Auto""/>
                        <TextBlock Text=""{Binding Description}"" TextWrapping=""Wrap"" Margin=""12,-6,12,0"" Style=""{StaticResource PhoneTextSubtleStyle}"" Width=""Auto""/>
                    </StackPanel>  
                 </DataTemplate>";

            //Creating Pivot Item
            PivotItem newPiv = new PivotItem(); 
            newPiv.Header = "Pivot Header"; //defining a header

            //Content for the Pivot Item
            ListBoxWithCheckBoxes newList = new ListBoxWithCheckBoxes(); //new listbox
            newList.ItemsSource = App.ViewModel.Items; //Grapping some items
            newList.ItemTemplate = (DataTemplate)XamlReader.Load(itemTemplate); //using xaml template

            //Adding the list to the Pivot Item
            newPiv.Content = newList; //Adding list to Pivot Item
            MainItemList.Items.Add(newPiv); //Adding Pivot Item 
```

附加信息：我怀疑它与命名空间有关。在 XAML 上，添加了以下内容：

```
xmlns:my="clr-namespace:System.Windows.Controls;assembly=WindowsPhoneListBoxWithCheckBoxesControl" 
```

一个普通的 ListBoxWithCheckBoxes（不是在运行时通过 c# 制作的）可以正常工作。这是这样制作的：

```
<my:ListBoxWithCheckBoxes x:Name="FancyListBox" Margin="0,0,-12,0" HorizontalAlignment="Stretch" ItemsSource="{Binding Items}" > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:53:13.053

在 MyPivotItem 上注册 Loaded 事件并在事件处理程序中将“IsInChooseState”设置为“true”

```
private void MyPivotItem_Loaded(object sender, RoutedEventArgs e)
{
    MyPivotItem pivotItem = sender as MyPivotItem;
    pivotItem.myListBox.IsInChooseState = true;
} 
```

# php - Code Igniter 获取创建对象的模型实例的名称？

> ID：13736487
> 
> 赞同：0
> 
> 时间：2012-12-06T03:28:53.930
> 
> 标签：php, codeigniter, class, instance

我正在使用 CodeIgniter 并扩展了`CI_Model`. 所以我所有的模型现在都扩展了`MY_Model`。

这工作正常。

问题是我所有的模型都有一个辅助关联对象。基本上是一个从模型（通常来自数据库）获取传递数据并表示数据库中的行的类。

所以像

```
class Product_Model extends MY_Model{
    public function get($id){
        //....
        return new Product($query->row()); 
    }
}

class Product{

    public function __construct(stdClass $data){
      //....
      self::$ci =& get_instance();
      self::$model = self::$ci->products;
    }

} 
```

现在我用别名加载 Product_Model`$this->load->model('product_model', 'products');`

因此有`self::$model = self::$ci->products;`

但是现在我想要一个基础类，所有的类`Product`都可以扩展。

我希望它包含更新的逻辑`self::$model`。

但我需要知道模型别名。

就像是

`self::$model = self::$ci->{instantiator_variable_name($this)}`这将是`self::$model = self::$ci->products`

现在显然该功能不存在，但它显示了我想要做什么。

我知道我可以在任何我创建的`Product`或类似的地方拥有

```
$row = $query->row();
$row->model = $this->ci->products;
return new Product($row); 
```

但如果可以的话，我宁愿自动化它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T00:19:35.677

如果您稍微澄清一下情况可能会有所帮助。请发布更多您的代码？

例如，Modal（在 CodeIgniter 中）通常用作单例类，它（几乎）解释使用 'self::" 但看起来你希望 Product 成为一个对象。那么为什么要使用

```
self::$model 
```

代替

```
$this->model 
```

您为 products 模型起别名的事实使我认为您可能是故意这样做的（这就是为什么我很困惑，您为什么要这样做？）。我认为您应该查看“self::”、“static::”和“$this->”之间的区别。看看[http://php.net/manual/en/language.oop5.late-static-bindings.php](http://php.net/manual/en/language.oop5.late-static-bindings.php)

rockstarz 是正确的，你需要使用工厂模式。考虑这样的事情：

```
class ItemFactory {

    private $model;

    public function __construct($model) {
        $this->model = $model;
    }

    function create_product(stdClass $data) {
        $product = new Product($data);
        $product->set_model($this->model);
        return $product
    }
}

abstract class Item {

    protected $model;
    protected $ci = & get_instance();

    public function __construct(stdClass $data) {
        // whatever
    }

    public function set_model($model) {
        $this->$model = $model;
    }

    public function get_model() {
        return $this->model;
    }

}

class Product extends Item {
    // whatever
} 
```

然后你的模型可以像使用它一样

```
class Product_Model extends MY_Model {

    private $item_factory;

    public function __construct() {
        $this->item_factory = new ItemFactory($this);
    }

    public function get($id){
        return $this->item_factory->create_product($row);
    }

} 
```

相关阅读材料：

[http://en.wikipedia.org/wiki/Inversion_of_control#Implementation_techniques](http://en.wikipedia.org/wiki/Inversion_of_control#Implementation_techniques)

[http://en.wikipedia.org/wiki/Factory_method_pattern](http://en.wikipedia.org/wiki/Factory_method_pattern)

[http://en.wikipedia.org/wiki/Dependency_injection](http://en.wikipedia.org/wiki/Dependency_injection)

# python - 用于 JSON 序列化的 Python RFC 3339 格式

> ID：13736489
> 
> 赞同：1
> 
> 时间：2012-12-06T03:28:57.190
> 
> 标签：python, python-3.x

我正在尝试为 y'day 生成 json 日期字符串。我不确定如何以 RFC 3339 格式生成它。

```
from datetime import date, timedelta
yesterday = date.today() - timedelta(1)

def dthandler(obj):
        return obj.isoformat()

with io.open('out/test.json', 'w', encoding='utf-8') as outfile:
    json.dump(rdata, outfile, indent=4, sort_keys=True, default=dthandler) 
```

将日期格式化为：

```
"Date": "2012-12-04", 
```

如何编写格式化程序函数来获取 RfC 3339 格式。

我使用 python 3.x

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:06:37.343

`yesterday`是一个`datetime.date`对象。如果您在输出中需要时间，可以将其转换为 datetime.datetime 对象：

```
from datetime import datetime, time, timedelta

yesterday = datetime.utcnow() - timedelta(days=1)
dt = datetime.combine(yesterday.date(), time(0, 0)) # midnight
rfc3339str = dt.isoformat() + "Z" 
```

这应该适用于 Python 2 和 3。

# android - 正则表达式在美元符号后抓取数字

> ID：13736490
> 
> 赞同：2
> 
> 时间：2012-12-06T03:29:00.550
> 
> 标签：android, regex

我有动态字符串，有时会在其中定价，有时不会。它适用于 craigslist，因此实际上没有固定格式，可以是逗号、破折号等。以下是一些典型字符串的示例：

> Xbox 360（黑色）精英控制台 120GB（伊利诺伊州梅森市）200 美元
> 
> 200 美元 2013 年 North Trail Camper（RT 202。曼彻斯特，缅因州）224 美元/月。
> 
> 雪地摩托自行车拖车（Winthrop / Augusta）每月 40 美元
> 
> “伟大的圣诞礼物”Xbox 360 吉他英雄（弹簧）80 美元

我正在尝试将字符串拆分为标题、位置和价格。我可以通过以下方式获取位置：

```
Pattern p = Pattern.compile("\(([^]*)\)");
Matcher m = p.matcher(title); 
```

无法弄清楚如何将标题和价格分开。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T03:35:47.847

使用后获取号码`$`：`\$[0-9]+`正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T03:40:01.787

我个人会使用：

```
 \$[-0-9.,]+[-0-9.,a-zA-Z]*\b 
```

这将需要很多非数字，但它也会汇总诸如负值`$1,000`，`$1mil`等等之类的东西。最后`\b`的将确保它在空格或新行或其他内容之前尽可能多地出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-21T16:40:41.157

`$`使用正则表达式后获取号码`\$(\d+)`。

# [正则表达式演示](https://regex101.com/r/nfWQlT/1)

请注意捕获括号，所需的值将可以通过`m.group(1)`.

Java 代码中的双转义反斜杠也是如此。

请参见下面的片段：

```
Pattern p = Pattern.compile("\\$(\\d+)");
Matcher m = p.matcher(title);
String output = "";
if (m.find()) {
    output = m.group(1);
} 
```

# jquery - jquery mobile, 列表, 隐藏箭头图标

> ID：13736492
> 
> 赞同：2
> 
> 时间：2012-12-06T03:29:14.790
> 
> 标签：jquery, list

我正在尝试使用 jquery 事件从一个列表项中删除箭头图标。

一个列表项：

```
<li class='message_list'><a id='message_list_item' href='#'>
<h3>Sender</h3>
<p><strong>Subject</strong></p>
<p>Body Text</p>
<p class='ui-li-aside'><strong>Time</strong>am</p>
</a></li> 
```

脚本：

```
$(".message_list").swipeleft(function(event) {
    event.stopImmediatePropagation(); //prevent from firing twice
    $(this).attr('data-icon', 'false');
    $("#test_display").html("Worked");      

    return false;
}); 
```

测试 html 更新，因此脚本激活。但是为什么该属性更改不起作用？

放`<li data-icon='false' class='message_list'>`确实会删除它！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:32:03.573

`data-*`属性通过[data](http://api.jquery.com/data/)支持。尝试使用 -

```
 $(this).data('icon', 'false'); 
```

然后你可以检查使用 -

```
$(this).data('icon');    // will return false if set to false. 
```

# c++ - 将文本文件读入 C++

> ID：13736499
> 
> 赞同：0
> 
> 时间：2012-12-06T03:29:47.410
> 
> 标签：c++, input, io

> 我正在编写一个程序，它可以将输入直接从文本文件读取到 C++ 文件中。但是，文件的内容有不同的格式，例如时间。输入文件如下所示：

```
Time(1) Price(1)
8:56:18 1250.00
9:00:25 1250.25
9:21:36 1250.50
9:23:32 1249.75

Time(2)
8:55:28
9:02:14
9:20:23
9:21:37
Price(2)
1680.50
1681.00
1680.50
1681.50 
```

> 我读取文件的程序如下：

```
int main()
{
    string file;
    cout << "Enter a file name to read input: ";
    cin >> file;

    ifstream file_name(file.c_str());

    while(!file_name.eof())
    {
        double input;
        file_name >> input;
        cout << input << endl;
    }
} 
```

> 但是当我执行程序时，我陷入了一个无限循环，我看到的只是屏幕上写的 0。这是由于时间格式造成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:39:33.060

的默认行为`file_name >> input`是类型安全的，因此 file_name 字节偏移指针永远不会为类似`Time(1)`or的输入增加`8:56:18`。您可以使用`string input;`而不是`double input;`检索值，然后您可以使用以下标准 c 库检查它们的类型。

```
#include <cstdlib>
.
.
.
atof()
atoi()
. 
```

[这](http://www.cplusplus.com/reference/cstdlib/)是文档。

# python - 从二进制文件恢复图像

> ID：13736500
> 
> 赞同：0
> 
> 时间：2012-12-06T03:29:55.357
> 
> 标签：python

目标是从二进制文件中提取图像。如何在二进制文件中搜索文件类型的标记、SOI 和 EOI。常规 find() 函数似乎不起作用，因为我无法将二进制文件作为字符串加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:49:45.567

您想在流（而不是字符串）中搜索魔术词。

这是想法：

一次读取一个字符（使用 file.read(1)）从这个文件中使用你的魔法词的队列长度，检查每次读取的队列

```
MAGIC_WORD = r'JPEG'  # it's example... just example
l = list(c for c in f.read(len(MAGIC_WORD)))
offset = 0
while True:
    if ''.join(l) == MAGIC_WORD:
        return offset
        offset += 1
        l.pop(0)
        l.append(f.read(1)) 
```

如果您觉得需要...我的意思是，需要速度，请查看[此 wiki](http://en.wikipedia.org/wiki/String_searching_algorithm)文章，使用更智能的算法，最后切换到 c++。

抱歉，我不知道有任何提供此功能的 python 库。祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T10:29:42.593

另一个想法：

如果您可以使用 unix shell（而不是 Python），您可以尝试使用 unix 管道并链接一些搜索工具（如 grep 和 xxd）

喜欢

```
cat yourbinfile | xxd -p | grep HEXMAGICWORD 
```

其中 HEXMAGICWORD 是

```
echo jpeg | xxd -p 
```

我对shell不是很熟悉，所以这不是确切的答案。

# jquery - jQuery AJAX 错误处理如何将返回的错误消息分成单独的 li

> ID：13736504
> 
> 赞同：0
> 
> 时间：2012-12-06T03:30:02.290
> 
> 标签：jquery

处理从数据库返回的一些数据。所有数据都在一个表中返回，特别是在一个 td 中。返回数据的标记是这样的

```
<table border=1>
    <tr>
        <td>Field Name</td>
        <td>Field Value</td>
    </tr>
    <tr>
        <td>SuccessFlag</td>
        <td>False</td>
    </tr>
    <tr>
        <td>ResponseMessage</td>
        <td>Invalid email address, Invalid User Name, etc., etc</td>
    </tr>
</table> 
```

在我的错误处理中，我能够到达第 6 个 td 并显示错误没问题。

```
success: function(data) {
    var answer = $(data).find("td:eq(3)").text();
    var message = $(data).find("td:eq(5)").text();
    if (answer==="True") {
        $("#bottomContent").load("page.php #div");
        } else {
        $('#processing').hide();
        $('input[type="text"], input[type="password"]').val("");
        $('#messageBox').show().html('<ul><li>' + message + '</li></ul>');
        }
    } 
```

不幸的是，它会在一里内输出所有内容。我想弄清楚如何在“，”处拆分它们，并在拆分后为每个项目创建一个单独的 li 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:02:09.027

我知道这个解决方案没有使用 jQuery，但是您是否考虑过使用 knockoutjs。它显着简化了客户端数据绑定。

```
<ul data-bind="foreach: errorMessages ">
    <li>
        <label data-bind="text: title"></label>
    </li>
</ul>

<script>
// Use knockout observable array
var errorMessages = ko.observableArray();

success: function(data) {
var answer = $(data).find("td:eq(3)").text();
var message = $(data).find("td:eq(5)").text();
if (answer==="True") {
    $("#bottomContent").load("page.php #div");
    } else {
    $('#processing').hide();
    $('input[type="text"], input[type="password"]').val("");

    // Knockout array will automatically bind to your DOM
    this.errorMessages(message);
    }
}
</script> 
```

您可能需要将您的“消息”变量手动处理为 JSON 集合而不是表格。

# javascript - 如何替换不在html标签中的字符串中的所有句点？

> ID：13736515
> 
> 赞同：-1
> 
> 时间：2012-12-06T03:31:45.983
> 
> 标签：javascript, html, css

我需要替换用户提交的文本段落中的所有句点，这些文本很可能是从 Microsoft Word 文档中复制和粘贴的，因此文本将具有格式。

例如，从 word 中粘贴的文本如下所示：

```
<p class="MsoNormal" style="margin-bottom: 5.75pt; text-indent: 0.5in;"><span style="font-size:12.0pt;font-family: etc... 
```

我需要编辑不在这些标签中的所有句点并在它们周围放置跨度标签，所以我不能只抓取 html 并执行 .replace。

:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:36:44.443

使用[此答案](https://stackoverflow.com/questions/298750/how-do-i-select-text-nodes-with-jquery)查找文本节点，然后对它们进行替换。

如果您将其作为字符串，请先转换为文档片段。

# actionscript-3 - Flash/Adobe 3.4 air 全屏性能下降问题

> ID：13736517
> 
> 赞同：1
> 
> 时间：2012-12-06T03:32:03.963
> 
> 标签：actionscript-3, air, flash-cs5

我正在为桌面创建一个 HD(1280x800) adobe air 3.4 应用程序，在后台我正在做一个简单的时间线动画，它有向外散发的圆圈。这些圆圈是png，我尝试过渲染为位图而不是不渲染，并且我尝试将其作为带有模糊的flash绘图。我遇到的问题是在全屏模式下，性能显着下降。在窗口模式下，事情运行得非常顺利。我已经单独使用动画对此进行了测试，并且它总是会发生。舞台大小与监视器分辨率相同，我确保舞台没有缩放，但性能问题仍然存在。在发布设置中，我将加速设置为 GPU。

我的印象是Flash可以做各种疯狂的3D，所以我只是不明白为什么这个愚蠢的简单时间线动画会引起如此多的悲伤。任何人都可以填写一些信息吗？有解决全屏性能问题的方法吗？在我的所有搜索中，我都无法找到一个好的答案或解决方案。

更新：看起来像全屏交互，而不仅仅是全屏是要走的路。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T10:02:41.287

不要在动画上使用模糊。绝不。曾经。这就是原因，人们认为 Flash 很慢。它不是。但是横幅的结构很糟糕，并且使用了大量的过滤器。继续，在 Photoshop 中对 3MP 图像实施模糊滤镜。会有一个进度条。这将需要 1 秒。模糊很慢！如果您想对动画进行模糊处理，请将其记录下来并存储为 gif 或 fla。如果您想要工作模糊运行时，请实现 stage3D，并创建一个将在 GPU 上渲染它的 AGAL 程序。

# jquery - 使用jquery将html表格行插入到特定位置

> ID：13736518
> 
> 赞同：1
> 
> 时间：2012-12-06T03:32:14.040
> 
> 标签：jquery

我有一个包含价格信息的 HTML 表。该表按价格升序排序。我希望用新的价格项目更新表格。我很确定 jquery 应该能够解决这个问题。这是我的起始表：

```
<table id='priceTable'>
<tr id="25607">
    <td>
        Item 1
    </td>
    <td>
        $256.07
    </td>
    <td>USD</td>
</tr>
<tr id="30100">
    <td>
        Item 2
    </td>
    <td>
        $301.00
    </td>
    <td>USD</td>
</tr>
<tr id="30557">
    <td>
        Item 3
    </td>
    <td>
        $305.57
    </td>
    <td>USD</td>
</tr>
</table> 
```

我需要插入一个新行。

```
<tr id="29000">
        <td>
            Item 5
        </td>
        <td>
            $290.00
        </td>
        <td>USD</td>
    </tr> 
```

此行需要插入到 id 25607 和 id 30100 之间。

我在想应该有一种方法可以使用 tr 的 id（只有数字的价格）。可能对 id 进行排序并找出应该插入新项目的位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T03:37:31.670

是的，jQuery 能够解决这个问题。

```
var row = '<tr id="29000"><td>Item 5</td><td>$290.00</td><td>USD</td></tr>';
var $tr = $(row);

$('#priceTable tr')
         .add($tr) // add the new tr to the collection
         .sort(function(a, b){  // sort them
             return a.id > b.id
         }) 
         .appendTo('#priceTable'); // end of the game 
```

[http://jsfiddle.net/PTxjk/](http://jsfiddle.net/PTxjk/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T03:37:25.780

您可以使用以下`after()`方法：

```
$('#25607').after("<tr id='29000'>...."); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-06T03:41:58.910

你可以使用 jQuery after() 和 before() 方法

jQuery after() 方法在选定的 HTML 元素之后插入内容。

jQuery before() 方法在选定的 HTML 元素之前插入内容。

```
$('#25607').after("<tr id='29000'>...."); 
```

或者

```
$('#30100').before("<tr id='29000'>...."); 
```

# iphone - Iphone：如何检测 Facebook 登录被 ios6 中的用户禁用

> ID：13736524
> 
> 赞同：0
> 
> 时间：2012-12-06T03:32:31.710
> 
> 标签：iphone, objective-c, facebook, ios6

您好我如何检查用户是否在 IOS6 中关闭了我们应用程序的 Facebook 登录设置。或者如果关闭，用户可以切换到旧的方式来登录应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:21:14.540

> ```
> if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]){
>        //user has setup Facebook settings
>   }
>   else{
>       //not set Facebook settings,
>  } 
> ```

如果用户没有设置 facebook 登录，您可以使用 Facebook SDK，我已经尝试过一次，但它在 iOS6 情况下会引发一些错误。

# java - 如何将 OAuth 标头包含到异步获取请求中？

> ID：13736525
> 
> 赞同：0
> 
> 时间：2012-12-06T03:32:47.250
> 
> 标签：java, google-app-engine, asynchronous, oauth, google-apps-script

我想在我的谷歌引擎应用程序中使用异步请求来触发谷歌应用程序脚本（部署为网络应用程序）：

```
URLFetchService fetcher = URLFetchServiceFactory.getURLFetchService();
Future future = fetcher.fetchAsync(req);
HTTPResponse response = (HTTPResponse) future.get(); 
```

但 fetchAsync 方法只接受 urls 或**com.google.appengine.api.urlfetch.HTTPRequest** 不提供更多选项：[https ://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/ api/urlfetch/HTTPRequest](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/urlfetch/HTTPRequest)

我看不到如何将 OAuth 安全标头添加到异步获取服务中。我们使用标准的 HttpRequest 方法构建授权请求。

包含 OAuth 的示例 HttpRequest ：

```
 HttpRequest contactrequest = rf.buildGetRequest(shortenEndpoint);
    GoogleHeaders headers = new GoogleHeaders();
    headers.setContentType("application/x-www-form-urlencoded");
    headers.setAuthorization("OAuth " + creds.getAccessToken());
    contactrequest.setHeaders(headers);
    contactrequest.getHeaders().set("GData-Version", "3.0"); 
```

有没有办法发送异步 OAuth 授权请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:51:43.113

答：无法在 fetchAsync 服务中指定 OAuth 标头。另一种方法是使用队列任务。

现在出现了新问题：当您以编程方式调用谷歌应用脚​​本时如何传递“用户上下文”：以编程方式[调用谷歌应用脚​​本和用户身份？](https://stackoverflow.com/questions/13752159/invoking-google-app-script-programatically-and-user-identity)?

# google-api - Google Drive API - 列出多种 Mime 类型

> ID：13736532
> 
> 赞同：8
> 
> 时间：2012-12-06T03:33:13.690
> 
> 标签：google-api, google-drive-api

有没有办法一次调用一次搜索多个 mimeTypes？例如，我试图在一个文件夹中查找所有 mp3 文件。似乎您需要为每个单独的 mimeType 调用以找到所有不同的 mimeType，类似于：

[https://www.googleapis.com/drive/v2/files?key=aaamykeyaaa&q=mimeType='audio/mpeg](https://www.googleapis.com/drive/v2/files?key=aaamykeyaaa&q=mimeType=) ' [https://www.googleapis.com/drive/v2/files?key=aaamykeyaaa&q=mimeType=](https://www.googleapis.com/drive/v2/files?key=aaamykeyaaa&q=mimeType=) '音频/mpeg3' [https://www.googleapis.com/drive/v2/files?key=aaamykeyaaa&q=mimeType=](https://www.googleapis.com/drive/v2/files?key=aaamykeyaaa&q=mimeType=) 'audio/mp3'

有没有办法在一个查询中包含多个 mimeType？这样做是非常低效的。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-05-08T08:38:30.927

是的，你可以，像这样：

```
(mimeType = 'audio/mpeg' or mimeType = 'audio/mpeg3' or mimeType = 'audio/mp3') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T05:08:24.880

已弃用的 Documents List API 具有[您](https://developers.google.com/google-apps/documents-list/#full_text_query_operators)在查询中设置“type:audio”的位置。我在 Drive API 中找不到类似的东西，但您可以尝试使用一些未记录的搜索功能：

*   对 mimeType 使用 contains 运算符：mimeType contains 'audio/'
*   使用 or 运算符：mimeType = 'audio/mpeg' 或 mimeType = 'audio/mp3' 或 ...
*   您也可以使用其他运算符：mimeType > 'audio/' 和 mimeType < 'audio/~'

我认为它们没有记录，因为它们没有很好的索引。如果用户有很多文件，您可能需要在获得结果之前对很多包含空项目的页面进行分页。如果您尝试以这种方式查询，您还可能会遇到更多速率限制错误，因为这会对他们的服务器造成负担。单独查询每个 mimeType 可能更有效。Drive API 应该为这些类型的查询提供一个新的操作符（如startswith）或一个新的参数（类似于Documents List API）。

# python - Numpy：如何按整数值缩放整数数组？

> ID：13736533
> 
> 赞同：1
> 
> 时间：2012-12-06T03:33:14.457
> 
> 标签：python, arrays, numpy, multidimensional-array, integer-division

我有一个最大值为 num 的 numpy 数组。我想通过 newMaxValue/num 缩放数组中的所有值，以便数组的新最大值是 newMaxValue。我试图将数组转换为浮点数并在之后进行除法，但我似乎无法成功地对其进行除法和相乘。我总是以一个零值数组结束。这样做的正确方法是什么？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T03:38:55.840

确保将 max 转换为 a `float`：

```
>>> from numpy import array
>>> a = array([1, 2, 3, 4, 5])
>>> new_max = 6 
>>> a / max(a)            # This is probably what happens to you
array([0, 0, 0, 0, 1])
>>> a / float(max(a))     # Convert that integer to a float and it'll work
array([ 0.2,  0.4,  0.6,  0.8,  1\. ])
>>> a / float(max(a)) * new_max
array([ 1.2,  2.4,  3.6,  4.8,  6\. ]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T03:46:01.157

```
import numpy as np
newMax = 20
myarr = np.random.randint(10, size=(10,2))
newarr = (myarr/float(np.amax(myarr))*newMax 
```

PS：发布您的代码，您可能犯了一个简单的编码错误。

# php - 自动打开 PDF 文件的打印机对话框

> ID：13736534
> 
> 赞同：5
> 
> 时间：2012-12-06T03:33:16.767
> 
> 标签：php, pdf, printing

我知道有多种方法可以将 PDF 打印到与服务器位于同一网络上的网络打印机，但这对我没有帮助，因为服务器是远程的。在我的情况下，用户单击“打印标签”的链接，然后生成并输出为他们格式化的 PDF 文件。我目前将文件输出“流式传输”到浏览器，以便 Adob​​e Reader 使用以下代码自动打开它：

```
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
header("Content-type: application/pdf");
header('Content-Disposition: attachment; filename="labels.pdf"');
readfile($ServerPathToFile); 
```

还有什么我可以添加到这个代码中的东西，它会自动触发打印对话框打开，这样他们只需要点击打印吗？在这种情况下，谷歌云打印不是一个选项，也不是其他需要在用户端“特殊设置”的东西......因为这将被各种用户使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T04:05:58.887

您可以将 PDF 输出到`<iframe>`同一域上的子窗口 ( )，然后调用`window.print()`该窗口。

```
<p>Don't forget to print your document!</p>
<iframe src="/path/to/your/pdfgenerator.php" id="mypdf"></iframe>

<script>
function printIframe(id) {
    var iframe = document.frames ? document.frames[id] : document.getElementById(id);
    var ifWin = iframe.contentWindow || iframe;
    iframe.focus();
    ifWin.printPage();
    return false;
}
</script> 
```

在 iframe 页面中，添加以下内容：

```
function printPage() {
    print();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:01:57.897

我刚刚完成了一个项目，该项目将标签从浏览器打印到网络上的 dymo 标签打印机。您必须使用 javascript 执行此操作。我使用了 Dymo 的 SDK 并创建了自己的自定义界面，以便在用户在信息亭注册后自动打印姓名标签。然后，名牌在主要的登记站等着他们。

我使用的 srcipt 只需要安装在服务器上，网络中的所有其他人都可以打印到网络打印机。

# android - SAX Parser 不解析我的 xml 中的照片标签？

> ID：13736535
> 
> 赞同：1
> 
> 时间：2012-12-06T03:33:19.030
> 
> 标签：android, xml, url, saxparser

我一直在使用 SAX 解析器来解析一个 xml 文件，该文件到目前为止工作正常，但由于某种原因不会解析照片标签中的图像 url（我想将 url 解析为字符串）。希望有人知道原因吗？任何帮助，将不胜感激。这是 XML：

```
<candidate>
    <name>Scott Web</name>
    <office>Vice President (Academic Affairs)</office>
    <photograph>
        http://www.inf.ed.ac.uk/teaching/courses/selp/elections/ScottWeb.jpg
    </photograph>
    <promises>
       <promise>University 2.0!</promise>
       <promise>Poducation!</promise>
       <promise>Lectures as tweets!</promise>
       <promise>Personal Tutors on Skype</promise>
       <promise>Grades on IM!</promise>
       <promise>Feedback HD</promise>
       <promise>360-degree learning portal</promise>
    </promises>
    <statement>I have made it my mission to ensure that this university gets an upgrade and defrag. Lectures and tutorials in the 21st century need to be on-line and interactive.  Vote for the future: vote for Scott Web!</statement>
</candidate> 
```

这是我的 SAX 解析器的代码：

```
public class XMLHandler extends DefaultHandler {
String elementValue = "";
Boolean elementOn = false;
Boolean inPromises = false;
public static XMLGettersSetters data = null;

public static ArrayList<XMLGettersSetters> candList = new ArrayList<XMLGettersSetters>();

public static ArrayList<XMLGettersSetters> getCandList() {
    return candList;
}

@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    elementOn = true;
    if (localName.equals("candidate"))
    {
        data = new XMLGettersSetters();
    } else if (localName.equals("promises")) {

       inPromises = true;
     }
    }

/**
 * This will be called when the tags of the XML end.
 **/
@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {
    elementOn = false;
    /**
     * Sets the values after retrieving the values from the XML tags
     * */
    if (localName.equalsIgnoreCase("name"))
        data.setName(elementValue);
    else if (localName.equalsIgnoreCase("office"))
        data.setOffice(elementValue);
    else if (localName.equalsIgnoreCase("photograph"))
        data.setPhotograph(elementValue);
    else if (localName.equalsIgnoreCase("promise")) {
       if(inPromises){
        data.setPromise(elementValue);
       }
    }
    else if (localName.equalsIgnoreCase("statement"))
        data.setStatement(elementValue);
    else if(localName.equalsIgnoreCase("candidate"))
        candList.add(data);
}
/**
 * This is called to get the tags value
 **/
@Override
public void characters(char[] ch, int start, int length)
        throws SAXException {
    if (elementOn) {
        elementValue = new String(ch, start, length);
        elementOn = false;
    }
} 
```

和更多：

```
public class XMLGettersSetters {
  private String name = null;
  private String office = null;
  private String photograph = null;
  private ArrayList<String> promise = new ArrayList<String>();
  private String statement = null;
  private String promises = null;

public XMLGettersSetters() {

}

public XMLGettersSetters(String name, String office, String photograph, String promises, String statement) {
    this.name = name;
    this.office = office;
    this.photograph = photograph;
    this.promises = promises;
    this.statement = statement;
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name=name;
    Log.i("This is the name:", name);
}

public String getOffice() {
    return office;
}
public void setOffice(String office) {
    this.office=office;
    Log.i("This is the office:", office);
}

public String getPhotograph() {
    return photograph;
}
public void setPhotograph(String photograph) {
    this.photograph=photograph.trim();
    Log.i("This is the photo url:", photograph);
}

public ArrayList<String> getPromise() {
    return promise;
}
public void setPromise(String promise) {
    this.promise.add(promise);
    Log.i("This is the promise:", promise);
}

public String getStatement() {
    return statement;
}
public void setStatement(String statement) {
    this.statement=statement;
    Log.i("This is the statement:", statement);
}

public String getPromises() {
    return promises;
}

public void setPromises(String promises) {
    this.promises = promises;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:39:48.377

您的 characters() 方法似乎期望在一次调用中传递整个文本节点。无法保证会发生这种情况，而且在我看来，您的特定 SAX 解析器似乎在换行符边界上拆分文本，这是完全有权这样做的。这意味着您获得的内容是最后一个换行符之后的内容。您需要缓冲在characters() 的连续调用中传递的数据，并在endElement() 的调用中对其进行处理。

# windows-phone-8 - wp8数据库不行~

> ID：13736536
> 
> 赞同：3
> 
> 时间：2012-12-06T03:33:40.120
> 
> 标签：windows-phone-8

我想在我的应用程序中使用数据库，但有一些错误：

> Microsoft.Phone.Data.Internal.ni.dll 中出现“System.Data.SqlServerCe.SqlCeException”类型的异常，但未在用户代码中处理
> 
> 如果有这个异常的处理程序，程序可以安全地继续。

它发生在：

```
 if (true == db.PersonData.Any()) 
```

和

```
db.PersonData.InsertOnSubmit(newData); 
```

该代码适用于 wp7 ....您如何修复它？

谢谢~

```
[Table]
public class CPersonData
{
    [Column]
    public string Lat { get; set; }
    [Column]
    public string Lon { get; set; }

    [Column]
    public string SelectShopType { get; set; }

    [Column]
    public DateTime UpdateTime { get; set; }
}

public class DataBase : DataContext
{
    public Table<CPersonData> PersonData;

    public DataBase(string strConnection) : base(strConnection)
    {
        if (false == this.DatabaseExists())
            this.CreateDatabase();
    }
}

using (var db = new DataBase("Data Source=isostore:/FindTea.sdf"))
{
    CPersonData newData = new CPersonData();
    newData.Lat = "";
    newData.Lon = "";
    newData.SelectShopType = "1,2,3";
    db.PersonData.InsertOnSubmit(newData);
    db.SubmitChanges(); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T01:56:53.117

我发现问题了！！！我没有在这个表中放主键，所以当我添加这个

```
 [Column(IsPrimaryKey = true, IsDbGenerated = true, DbType = "INT NOT NULL Identity", AutoSync = AutoSync.OnInsert, CanBeNull = false)]
    public int ID { get; set; } 
```

应用程序不会崩溃！！！！

# php - MYSQL 查询错误 WHERE id = $id

> ID：13736537
> 
> 赞同：1
> 
> 时间：2012-12-06T03:33:59.533
> 
> 标签：php, mysql, sql, syntax

我正在创建然后编辑表中的一行，但是我在 php 中的编辑 mysql 查询给了我一个我无法弄清楚的错误。有什么帮助吗？

创建查询：

```
$query = "INSERT INTO timelines (
id, event_name, event_date, date_created, attendee_count, attendee_names, maximum_attendees, creator_id, creator_name, price, thumbnail
) VALUES (
'{$timelineID}', '{$event_name}', '{$event_date}', '{$date_created}', '{$attendee_count}', '{$attendee_names}', '{$maximum_attendees}', '{$creator_id}', '{$creator_name}', '{$price}', '{$thumbnail}'
)"; 
```

编辑查询：

```
$query = "UPDATE timelines SET 
event_name = '{$event_name}', 
event_date = '{$event_date}', 
maximum_attendees = '{$maximum_attendees}', 
price = '{$price}', 
thumbnail = '{$thumbnail}',
WHERE id = {$timelineID}"; 
```

错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 8 行的“WHERE id =”附近使用正确的语法

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T03:35:15.100

`WHERE`您在子句之前有一个额外的逗号。只需将其删除，它就会正常工作。

```
thumbnail = '{$thumbnail}',
                          ^ here
WHERE ... 
```

最终查询，

```
$query = "UPDATE timelines SET 
event_name = '{$event_name}', 
event_date = '{$event_date}', 
maximum_attendees = '{$maximum_attendees}', 
price = '{$price}', 
thumbnail = '{$thumbnail}'
WHERE id = {$timelineID}"; 
```

您的查询易受 攻击`SQL INJECTION`，请阅读下面的文章以了解如何保护它。

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)

# c - 确定文件是否包含某个字符串

> ID：13736541
> 
> 赞同：0
> 
> 时间：2012-12-06T03:35:15.327
> 
> 标签：c, grep

我正在寻找一种方法来确定某个文件是否包含某个字符串。它可以是系统调用或 C 函数，没关系。

我尝试使用 grep，但它没有返回任何内容

```
 //name is the directory entry name
   char grepcmd[150];
      strcpy(grepcmd,"grep -c hello ");
      strcat(grepcmd, name);
      int status = system(grepcmd); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:06:24.937

你做得很好。如果您给定的文件名称包含字符串`status`，则应为零。否则它应该是非零值。`name``hello`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T03:40:19.040

如果您准备进行系统调用，那么只需`mmap()`文件并调用*类似* `strnstr()`. （您将无法调用 real `strnstr()`，因为它会停`\0`在您文件中的任何位置，因此您必须自己编写。）

# wordpress - 侧边栏中的链接在任何不是前面的页面上都失败 - wordpress

> ID：13736542
> 
> 赞同：0
> 
> 时间：2012-12-06T03:35:18.353
> 
> 标签：wordpress, hyperlink

帮助！！

我遇到了一个严重的问题。我正在使用孩子创建自定义主题，并制作了自己的侧边栏用作导航。我添加到其他页面的链接只有在我在主页上时才能正常工作。当我在任何其他页面上时，链接只是将目标 url 附加到当前 url。有人可以告诉我发生了什么吗？几天来我一直在寻找解决方案，但找不到任何帮助。 [http://www.testjustfine.com/](http://www.testjustfine.com/)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:38:17.573

您的链接被视为相对 URL。

您要么需要在开头放置一个协议（例如'http://'），要么通过去掉域并以'/' 开头来使它们成为真正的域相关链接。

# asp.net - 如何使用 web-api 上传文件

> ID：13736548
> 
> 赞同：4
> 
> 时间：2012-12-06T03:36:24.153
> 
> 标签：asp.net, html, asp.net-mvc, asp.net-web-api

客户端代码：

```
<form action="api/MyAPI" method="post" enctype="multipart/form-data">     
<label for="somefile">File</label>     <input name="somefile" type="file" />     
<input type="submit" value="Submit" /> 
</form> 
```

以及如何使用 mvc web-api 处理上传文件，有一些示例代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-03T05:46:15.633

**HTML 代码：**

```
<form action="api/MyAPI" method="post" enctype="multipart/form-data">     
    <label for="somefile">File</label>     
     <input name="somefile" type="file" />     
    <input type="submit" value="Submit" /> 
    </form> 
```

**控制器**

```
 // POST api/MyAPI
        public HttpResponseMessage Post()
        {
            HttpResponseMessage result = null;
            var httpRequest = HttpContext.Current.Request;
            if (httpRequest.Files.AllKeys[0] == "image")
            {
                if (httpRequest.Files.Count > 0)
                {
                    var docfiles = new List<string>();
                    foreach (string file in httpRequest.Files)
                    {
                        var postedFile = httpRequest.Files[file];
                        var filePath = HttpContext.Current.Server.MapPath("~/Images/" + postedFile.FileName);
                        postedFile.SaveAs(filePath);

                        docfiles.Add(filePath);
                    }
                    result = Request.CreateResponse(HttpStatusCode.Created, docfiles);

                }
            }
            else
            {
                result = Request.CreateResponse(HttpStatusCode.BadRequest);
            }
            return result;
        } 
```

**试试下面的链接**

这个链接对我有用，希望它对你有用

[http://www.asp.net/web-api/overview/advanced/sending-html-form-data,-part-2](http://www.asp.net/web-api/overview/advanced/sending-html-form-data,-part-2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-06T03:12:24.577

您可以使用[ApiMultipartFormFormmatter](https://github.com/redplane/ApiMultipartFormFormatter)将文件上传到 web api 2。通过使用此库，您可以定义视图模型以获取从客户端提交的参数。如：

```
public class UploadFileViewModel 
{
    public HttpFile Somefile{get;set;}
} 
```

并像这样在您的 Api 控制器中使用它：

```
public IHttpActionResult Upload(UploadFileViewModel info)
{
    if (info == null)
    {
        info = new UploadFileViewModel();
        Validate(info);
    }

    if (!ModelState.IsValid)
        return BadRequest(ModelState);

    return Ok();
} 
```

这个库可以解析嵌套对象。

# c# - 将未格式化的 JSON 转换为 C# 类

> ID：13736552
> 
> 赞同：1
> 
> 时间：2012-12-06T03:37:09.347
> 
> 标签：c#, jquery, asp.net-mvc, json

我有一个 C# 类：

```
public class JsonAttachmentModel
{
    public Guid AttachmentId { get; set; }
    public string FileName { get; set; }
    public string ExtentionName { get; set; }
} 
```

并且我检索的 JSON 格式不正确，它完全在一个字符串中，例如：

```
{"success":false,"message":"The remote server returned an unexpected response: (413) Request Entity Too Large."},
{"success":true,"attachmentId":"dba60830-46fd-4f51-9cd5-3c20df03988d","fileName":"bz1_20121206113251.PNG","extentionName":".PNG"},
{"success":true,"attachmentId":"3cae3f50-7d70-4183-9a69-80cb6d619dbd","fileName":"bz2_20121206113251.PNG","extentionName":".PNG"},
{"success":true,"attachmentId":"b6c8a524-4f46-4a7a-bcda-70042cb4ca92","fileName":"IammorethanOneKb123_20121206113251.txt","extentionName":".txt"},
{"success":true,"attachmentId":"994dfb9c-a185-4c51-b1f4-1017f991740d","fileName":"Iamonekb_20121206113251.txt","extentionName":".txt"} 
```

所以，我的问题是：

如何将此字符串转换为`List<JsonAttachmentModel>`，以及仅匹配“成功”的项目：true

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T03:41:43.993

使用[JSON.NET](http://james.newtonking.com/projects/json-net.aspx)。[从这里](http://james.newtonking.com/projects/json/help/)查看序列化/反序列化示例。

上述文档中的示例 -

```
string json = @"[
    {
        'Name': 'Product 1',
        'ExpiryDate': '2000-12-29T00:00Z',
        'Price': 99.95,
        'Sizes': null
    },
    {
        'Name': 'Product 2',
        'ExpiryDate': '2009-07-31T00:00Z',
        'Price': 12.50,
        'Sizes': null
    }
]";

List<Product> products = JsonConvert.DeserializeObject<List<Product>>(json);

Console.WriteLine(products.Count);
// 2

Product p1 = products[0];

Console.WriteLine(p1.Name);
// Product 1 
```

# python - 使用 BeautifulSoup 遍历 html 树中的元素，并生成保持每个元素相对位置的输出？在 Python 中

> ID：13736554
> 
> 赞同：6
> 
> 时间：2012-12-06T03:37:11.787
> 
> 标签：python, html-parsing, web-scraping, beautifulsoup, jsoup

我有这段代码可以在 Java 中使用 Jsoup 完成我需要它做的事情

```
Elements htmlTree = doc.body().select("*");

    Elements menuElements = new Elements();

    for(Element element : htmlTree) {

        if(element.hasClass("header")) 
            menuElements.add(element);
        if(element.hasClass("name"))
            menuElements.add(element);
        if(element.hasClass("quantity"))
            menuElements.add(element);
    } 
```

我想做同样的事情，但在 Python 中使用 BeautifulSoup。我试图抓取的 HTML 示例树如下：

```
<div class="header"> content </div>
     <div class="name"> content </div>
     <div class="quantity"> content </div>
     <div class="name"> content </div>
     <div class="quantity"> content </div>
<div class="header"> content2 </div>
     <div class="name"> content2 </div>
     <div class="quantity"> content2 </div>
     <div class="name"> content2 </div>
     <div class="quantity"> content2 </div> 
```

等等

基本上我希望输出保留每个元素的相对位置。我将如何使用 Python 和 BeautifulSoup 做到这一点？

编辑：

这是我拥有的python代码（它非常天真）但也许它可以提供帮助？

```
output = []

for e in soup :
  if e["class"] == "pickmenucolmenucat" :
    output.append(e)
  if e["class"] == "pickmenucoldispname" :
    output.append(e)
  if e["class"] == "pickmenucolportions" :
    output.append(e) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-06T08:33:44.307

`<div>`要从给定列表中查找具有`class`属性的所有元素：

```
#!/usr/bin/env python
from bs4 import BeautifulSoup # $ pip install beautifulsoup4

with open('input.xml', 'rb') as file:
    soup = BeautifulSoup(file)

elements = soup.find_all("div", class_="header name quantity".split())
print("\n".join("{} {}".format(el['class'], el.get_text()) for el in elements)) 
```

### 输出

```
['header']  content 
['name']  content 
['quantity']  content 
['name']  content 
['quantity']  content 
['header']  content2 
['name']  content2 
['quantity']  content2 
['name']  content2 
['quantity']  content2 
```

还有[其他方法可以让您搜索、遍历 html 元素](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#navigating-the-tree)。

# python - 无类型问题和用户名变量问题

> ID：13736559
> 
> 赞同：0
> 
> 时间：2012-12-06T03:37:29.750
> 
> 标签：python

这是我的两个 def 函数：

```
def valid_username(username):
     # implement the function here

    while True:

        try:
            username = input("Username: ")

            if len(username) < 8:
                print ("Sorry, the username must be at least 8 characters long.")

            if username.isalnum() == False:
                print ("Sorry, your name can only contain alpha numeric characters")

            numupper = 0

            for c in username:

                if c.isupper() == True:
                    numupper += 1

            if numupper > 0:
                print ("You have at least 1 uppercase in this username.")

            else:
                print ("You have no uppercase in this username.")

            numlower = 0

            for d in username:

                if d.islower() == True:
                    numlower +=1
            if numlower > 0:
                print ("You have at least 1 lowercase in this username.")

            else:
                print ("You have no lowercase in this username.")

            numdigit = 0

            for e in username:

                if e.isdigit() == True:
                    numdigit += 1
            if numdigit > 0:
                print ("You have at least one digit in this username.")

            else:
                print("You have no digits in this username.")

                continue

        except:
            print ("Sorry, not valid. Try again.")
        else:
            print ("Thank you for your input")
            break

def valid_password(password, username):
    # implement the function here

    while True:

        try:
            password = input("Password: ")

            if username in password:
                print ("That's not secure at all.")

            if len(password) < 8:
                print ("Sorry, the password must be at least 8 characters long.")

            if password.isalnum() == False:
                print ("Sorry, your password can only contain alpha numeric characters")

            numupper = 0

            for c in password:

                if c.isupper() == True:
                    numupper += 1

            if numupper > 0:
                print ("You have at least 1 uppercase in this password.")

            else:
                print ("You have no uppercase in this password.")

            numlower = 0

            for d in password:

                if d.islower() == True:
                    numlower +=1
            if numlower > 0:
                print ("You have at least 1 lowercase in this password.")

            else:
                print ("You have no lowercase in this password.")

            numdigit = 0

            for e in password:

                if e.isdigit() == True:
                    numdigit += 1
            if numdigit > 0:
                print ("You have at least one digit in this password.")

            else:
                print("You have no digits in this password.")

                continue

        except:
            print ("Sorry, not valid. Try again.")
        else:
            print ("Thank you for your input")
            break 
```

我的主要程序是这样的：

```
username = input("Username: ")

result, reason = uservalidation.valid_username(username)

if not(result):
    print (reason)

else:

    password = input("Password: ")

    pwresult, pwreason = uservalidation.valid_password(password, username)

    if not(pwresult):
        print (pwreason)
    else:
        print ("Username and Password combination is valid!") 
```

当我运行它时，我得到以下信息：

```
Username: d
Username: user
Sorry, the username must be at least 8 characters long.
You have no uppercase in this username.
You have at least 1 lowercase in this username.
You have no digits in this username.
Username: craig2345
You have no uppercase in this username.
You have at least 1 lowercase in this username.
You have at least one digit in this username.
Thank you for your input
Traceback (most recent call last):
  File "C:/Users/Si Hong/Desktop/pythontest/HuangSiHong_Assign8_part3.py", line 7, in <module>
    result, reason = uservalidation.valid_username(username)
TypeError: 'NoneType' object is not iterable
>>> 
```

我无法弄清楚为什么当我输入用户名的第一个值时，它不会触发该功能，但是在我第二次输入它之后它会触发，而且我不知道如何解决 nonetype错误问题，如果有人可以向我解释一下，那就太好了，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:44:12.013

如果一个函数没有显式返回的值，那么它会隐式返回`None`，这不能应用于以这种方式解包的元组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T03:53:52.287

您看到`Username:`两次提示的原因是您在主程序中要求输入一次，然后在函数内部立即再次要求输入。该函数不应该向用户询问任何输入，它从传递给它的参数中获取用户名的值。

您看到有关 NoneType 错误的原因（不是您所写的 nonetype，Python 区分大小写，您应该养成准确输入它所说的内容的习惯）是您的函数 valid_password() 确实以 return 语句结束如您的程序所期望的那样返回两个值。事实上，它根本没有 return 语句，这意味着它有效地返回了特殊的 Python 值 None（它是 NoneType 类型的对象）。

因为您告诉您的程序从函数返回的任何内容中提取*两个值，所以它试图通过**迭代*返回的值来做到这一点。NoneType 不是可以迭代的类型之一（因为它不包含任何信息），因此是错误消息。

# javascript - 不需要的通用混合

> ID：13736567
> 
> 赞同：1
> 
> 时间：2012-12-06T03:38:17.643
> 
> 标签：javascript, less, requirejs

我正在尝试让[RequireJS 的 Guy Bedfords less 插件](https://github.com/guybedford/require-less)将一些常见文件拉入每个/所有后续的 less 文件中。目标是保持模块特定的较少文件分开，但每个都引入一些常见的资产，如变量和混合。

不过，到目前为止，该插件似乎是自己解析每个较少的文件。

例如，如果我简单地说：

```
// variables.less

@red: #ff0000;

// styles.less

body {
    background-color:@red;
}

// main.js

define(['less!variables', 'less!styles'], function() {
    ...
}); 
```

variables.less 和styles.less 都被解析了，但是styles.less 在variables.less 中看不到@red，并且我收到一个javascript 错误，提示styles.less 解析失败。

查看 git 上的示例，它看起来像分离依赖项（强制它们首先加载？）应该将它们拉入：

```
// common.js

define(['less!variables'], function() {
    return {}; 
});

// main.js

define(['common', 'less!styles'], function() {
    ...
}); 
```

但这给了我相同的结果；一个较少的错误说 styles.less 没有正确解析。

我尝试了一些“技巧”，比如在styles.less中使用@import来引入variables.less，但似乎虽然require-less会规范化大多数url，但它不会规范化@imports，所以现在variables.less必须绝对引用，这不是我想要的。

有谁知道我在这里做错了什么？

目标是在开发中通过 RequireJS 加载和解析更少的文件，使用与 r.js 良好集成的东西将所有更少的文件预编译为 css 以进行部署。虽然不需要插件看起来很棒，但不能使用变量或混合是一个非常严重的错误。还有其他选择吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:21:02.200

看起来加载常见较少资产的方法是使用@import。它变成了一个非常快速的解决方案，让 url 规范化工作（[https://github.com/guybedford/require-css/pull/26](https://github.com/guybedford/require-css/pull/26)）。

# python - 如何使用 Python 替换多个文件中的字符串

> ID：13736569
> 
> 赞同：1
> 
> 时间：2012-12-06T03:38:36.183
> 
> 标签：python, shell

我有两个文件（比如 file1 和 file2）。file1 和 file2 中有字符串（字符串数量相等）。

我想在包含 XML 文件的目录（具有多个子目录和 XML 文件）中搜索 file1 的内容，并将其替换为 file2 的内容。

```
import subprocess
import sys
import os
f_line = f.readlines()
g_line = g.readlines()
f=open("file1.txt")
g=open("file2.txt")

i = 0
for line in f_line:
    if line.replace("\r\n", "") != g_line[i].replace("\r\n", "") :
        print (line)
        print(g_line[i])
        cmd = "sed -i 's/" + line.replace("\r\n", "") + "/" + line[i].replace("\r\n","") + "/g' " + "`grep -l -R " + line.replace("\r\n", "") + " *.xml`"
        print(cmd)
        os.system(cmd)
    i = i + 1 
```

但我面临的问题是这样的。该脚本搜索文件和字符串并打印（打印（cmd）），但是当我将此脚本放置在目录中时，我在 CYGWIN 窗口中看到此错误“没有用于 sed 的输入文件”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:57:31.267

将两个文件读入字典

遍历目录读取 xml 文件，替换它们的内容，备份它们并覆盖原件

```
f1 = open('pathtofile1').readlines()
f2 = open('pathtofile2').readlines()
replaceWith = dict()
for i in range(len(f1)):
    replaceWith[f1[i].strip()] = f2[i].strip()

for root, dirnames, filenames in os.walk('pathtodir'):
    for f in filenames:
        f = open(os.path.join(root, f), 'r')
        contents = f.read()
        for k, v in replaceWith:
            contents = re.sub(k, v, contents)
        f.close()
        shutil.copyfile(os.path.join(root, f), os.path.join(root, f)+'.bak')
        f = open(os.path.join(root, f), 'w')
        f.write(contents)
        f.close() 
```

一个限制是，如果某些搜索字符串出现在替换字符串中，则一个字符串可能会被多次替换。

# php - MySQL 错误 1060：重复的列名 ALTER TABLE

> ID：13736570
> 
> 赞同：1
> 
> 时间：2012-12-06T03:38:42.987
> 
> 标签：php, alter-table, mysql-error-1060

由于我没有创建的代码中的错误，我在查询时遇到了一些问题。

```
$query = $this->db->query("ALTER TABLE `" . DB_PREFIX . "customer` ADD `customer_type` TINYINT(1) NOT NULL; 
```

我不是编码员，但到目前为止已修复（我认为）该错误。通过与其他不会引发错误的查询进行比较，并在 stackoverflow 上阅读了很多类似的帖子，我添加了缺少的引号、括号和分号。没有更多的错误，但不确定这是否是正确的做法？我最终得到了这个：

```
$query = $this->db->query("ALTER TABLE `" . DB_PREFIX . "customer` ADD `customer_type` TINYINT(1) NOT NULL;"); 
```

但是现在，我得到一个重复的列错误 1060“重复的列名”。所以我做了同样的事情，用谷歌搜索，搜索stackoverflow，发现了一些使用别名的例子和一堆超出我想象的额外代码行。这段代码存在于一个 .php 文件中，有人会通过这个来握住我的手吗？您可以将其视为您当天的好事！谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T03:42:08.890

这意味着该列已经存在于您的表中，很可能是以前的程序员想要添加该列并且忘记删除查询之后的查询。

# jquery - 使用 jquery ajax 从重定向请求中读取 url 参数

> ID：13736575
> 
> 赞同：0
> 
> 时间：2012-12-06T03:39:38.090
> 
> 标签：jquery, ajax, redirect

我可以在浏览器中传递重定向 url 和用户 ID 的参数，顺便说一句，这是一个 Intranet 应用程序。因此，您可以粘贴诸如“http://intranetapp?redirect_url=http://crapola&userid=xxxxxxx”之类的地址。它会将您重定向到该 url 并提供用户 ID 的附加信息，这是我想要获得的数百用户。信息作为您被重定向的参数的一部分返回。有没有办法用ajax或jquery的相关方法调用（GET请求）并读取返回的url和参数，而不是仅仅获取返回的html？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T23:55:03.960

克里斯，如果我理解正确的话，你想做的事情有点棘手。

我从来不需要做这种事情，但原则上知道它涉及一种不寻常类型的 ajax 请求 - 即“HEAD”请求，允许在不接收主要部分的情况下检查重定向 url（和其他元数据） HTTP 响应（正文）。

您的 Intranet 服务器*应该*处理 HEAD 请求（它们至少与 GET 一样安全）但不一定。如果没有，请与您的服务器管理员谈谈。如果您是服务器管理员，那么在`httpd.conf`文件和/或适当的`.htaccess`文件（假设为 Apache）中有一个根目录。

与所有类型的 ajax 一样，代码也很棘手，因为它的一部分需要异步运行（当来自服务器的 HTTP 响应返回时）。为了帮助实现这一点，可以（自由地）使用 jQuery 的 Deferreds/Promises。

您的主要工作人员功能（如果我理解正确的话）将是这样的：

```
function getUserParams(userID) {
    var $ = jQuery,
        dfrd = $.Deferred(),
        q = {},
        baseURL = 'http://intranetapp?redirect_url=http://crapola&userid=';
    $.ajax({
        type: "HEAD",
        url: baseURL + userID,
        cache: false,
        success: function(data, textStatus, jqXHR) {
            var location = jqXHR.getResponseHeader('Location');
            if(location){
                var search = $("<a>").attr('href', location).get(0).search.replace(/^[?]/, ''),
                    prop, pair;
                if (search) {
                    $.each(search.split("&"), function(i, arg) {
                        pair = arg.split("=");
                        if (pair.length >= 1) {
                            prop = pair.shift();
                            q[prop] = (pair.length == 1) ? pair[0] : (pair.length > 1) ? pair.join('=') : '';
                        }
                    });
                }
                //At this point q is a hash representing parameters in the location's search string.
                dfrd.resolve(userID, q);
            }
            else {
                dfrd.reject(userID, 'No redirect url in the response');
            }
        },
        error: function(jqXHR, textStatus, errorThrown) {
            dfrd.reject(userID, 'Ajax failure: ' + textStatus + ': ' + errorThrown);
        }
    });
    return dfrd.promise();
} 
```

请注意，因为 ajax 是异步的，所以我们返回的不是我们真正想要的结果；它们稍后到达，包装在 javascript plain object`q`中。

以下是测试方法`getUserParams()`：

```
var userID = '12345678';
getUserParams(userID).done(function(userID, q) {
    //Work with userID and q as required
    console.log(['Success', userID, q.fullname, q.status, q.postalcode].join(': '));//for example
}).fail(function(userID, message) {
    //Handle error case here
    message = message || ''; 
    console.log(['Error', userID, message].join(': '));//for example
}); 
```

您的预期用途（包含数百个 url）将是这样的：

```
var userIDs = [
    //array of userIDs (hard coded or otherwise constructed)
    '1234',
    '5678'
];
var promises = [];
$.each(userIDs, function(i, userID) {
    var p = getUserParams(userID).done(function(userID, q) {
        //work with userID and q as required
        $("<p/>").text([userID, q.fullname, q.status, q.postalcode].join(': ')).appendTo($("#results"));//for example
    }).fail(function(userID, message) {
        //handle error case here
        message = message || ''; 
        console.log(['Error', userID, message].join(': '));//for example
    });
    promises.push(p);
}); 
```

当收到所有 ajax 请求的响应时，您可能还想做一些事情。如果是这样，那么附加代码将如下所示：

```
$.when.apply(null, promises).done(function() {
    //Do whatever is required here when ALL ajax requests have successfully responsed.
    //Note: any single ajax failure will cause this action *not to happen*
    //alert('All user data was gathered');
    console.log('All user data was gathered');
}).fail(function() {
    //Do whatever is required here when ALL ajax requests have responsed.
    //Note: any single ajax failure will cause this action *to happen*
    //alert('At least one set of user data failed');
    console.log('At least one ajax request for user data failed');
}).then(function() {
    //Do whatever is required here when ALL ajax requests have responsed.
    //Note: This function will fire after either the done or fail function.
    //alert('Gathering of user data complete, but not necessarily successfully');
    console.log('Gathering of user data complete, but not necessarily successfully');
}); 
```

*部分测试（代码运行，但我没有办法测试重定向或处理`Location`标头）。*

您将需要微调 [某些子集] 代码以精确使用`q`对象中的用户数据，并适当地处理错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:58:52.300

这个功能可以帮助

```
function getUrl() {
    var args = {};                             // Start with an empty <a title="object" href="http://muraliprashanth.me/category/javascript/object/">object</a>
    var query = location.search.substring(1);  // Get query string, minus '?'
    var pairs = query.split('&amp;');              // Split at ampersands
    for(var i = 0; i &lt; pairs.length; i++) {    // For each fragment
        var pos = pairs[i].indexOf('=');       // Look for 'name=value'
        if (pos == -1) continue;               // If not found, skip it
        var name = pairs[i].substring(0,pos);  // Extract the name
        var value = pairs[i].substring(pos+1); // Extract the value
        value = decodeURIComponent(value);     // Decode the value
        args[name] = value;                    // Store as a property
    }
    return args;                               // Return the parsed arguments
} 
```

# asp.net-mvc - 如何将 PartialView 中的数据传递回 MVC 中的页面

> ID：13736578
> 
> 赞同：1
> 
> 时间：2012-12-06T03:39:56.263
> 
> 标签：asp.net-mvc

我的页面上大致有这个设置 - 一个文件上传控件和一个 div（#changebit），它在不同的部分视图中交换，“列表”是默认设置。

```
 <td><input type="file" name="Image" /></td>
            <td><input type="submit" value="Save" /></td>

                <div id="changingBit">
                    @Html.Partial("List", Model.Things)    
                </div> 
```

这些局部视图基本上列出了文件夹和文件。我需要能够将部分视图的操作中可用的参数（如当前文件夹路径）传递给上传控制器操作。

我尝试在列表/编辑部分视图中添加它

```
ViewData["id"] = some value... 
```

但这在主页内始终为空。如何在上传控制器操作中获取该值？

谢谢！

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult Upload(HttpPostedFileBase image)
    {

       //some magic to access a partial views variable
       // .............
       //

        if (image != null)
        {
            var fileName = Path.GetFileName(image.FileName);
            var path = Path.Combine(Server.MapPath("~/Directories/YourDirectory"), fileName);
            image.SaveAs(path);
        }
        return RedirectToAction("Index");
    }
    [HttpGet]
    public ActionResult Edit(int id)
    {
         ViewData["id"] = id;                 <--- how to get this file inside Upload action?
         ...

    } 
```

**编辑：**

最终在主页上执行此操作

```
<input type="hidden" name="currentIdSelection" value="@Model.CurrentIdSelection" /> 
```

现在有效，我更改了传递给“编辑”局部视图的模型以存储另一个值。可能有更多的 MVC 方式来做到这一点......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:46:36.960

请注意，ViewData 仅存在于单个请求中。如果您想像现在正在做的那样传递信息，您可以使用 TempData。

# javascript - 在 blogger.com 网站上的 IE8 中未显示 simplecart.js 图像

> ID：13736580
> 
> 赞同：0
> 
> 时间：2012-12-06T03:40:03.703
> 
> 标签：javascript, css, image, internet-explorer-8, blogger

图像在 IE8 中被压缩

iframed： [http ://techmobile.com/storeBETA.html](http://techmobile.com/storeBETA.html)

原网站： [http ://store-techmobile.blogspot.com/](http://store-techmobile.blogspot.com/)

为什么要这样做？IE9 没问题。

这是插入图像的代码：

```
<th class="item_thumb" id="thumb" width="45%"><a href="http://3.bp.blogspot.com/-  
k1EQIca2tCw/TdtZUjHTeGI/AAAAAAAACAs/vNwQwZAVkaI/s1600/blue.gif" onblur="try 
{parent.deselectBloggerImageGracefully();} catch(e) {}"><img alt="" border="0" 
id="BLOGGER_PHOTO_ID_5610175970378217570" src="http://3.bp.blogspot.com/-
k1EQIca2tCw/TdtZUjHTeGI/AAAAAAAACAs/vNwQwZAVkaI/s400/blue.gif" style="cursor: hand; 
cursor: pointer; display: block; height: 164px; margin: 0px auto 10px; text-align: 
center; width: 148px;" /></a></th>
<td><input class="item_add" type="button" value="Add to Cart" /></td>
</tr> 
```

项目拇指宽度是否在 IE8 中被挤压？我想在更改设置和编写代码之前查明原因是什么。此代码是插入到 blogger.com 后端的代码表的一部分，因此会显示一个表以发布图片、价格、描述详细信息等。按照 BloggerMints 说明： http: [//www.bloggermint.com/2011/05 /购物车博客模板/](http://www.bloggermint.com/2011/05/shopping-cart-blogger-template/)

我在 Mac 上，所以我无法访问 IE8 的开发人员工具。任何见解都非常感谢。

而且我对如何编写代码有点困惑，因为它不是一个简单的 CSS 转移重写，例如：

```
<!--[if IE 8]>
<link rel="stylesheet" href="css/ie8.css" type="text/css" />
<![endif]--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:49:11.847

它是浮动：留在包装跨度上。要么删除它，要么将它的宽度设置为 100% 或类似的。您可能应该只对 IE8 及以下版本执行此操作。

# java - 如何检查 HashSet 的值包含？

> ID：13736581
> 
> 赞同：2
> 
> 时间：2012-12-06T03:40:07.603
> 
> 标签：java

```
 HashSet<int[]>  a = new HashSet<int[]>();
 int[] somestuff = {1, 2, 3};
 a.add(somestuff);
 int[] somestuff2 = {1, 2, 3};
 System.out.println(a.contains(somestuff2)); 
```

是`false`。

如何正确检查？只有当我检查时我才`somestuff`得到真实的，但即使变量名/文字不同，但值是，我想得到`true`. 什么方法调用可以让我完成这项工作？我想检查值...

也许它与集合中散列的内容有关，并且还依赖于最初用于填充它的变量文字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:45:06.197

没有直接简单的方法可以做你想做的事，但是......

我将创建一个由`int[]`字段组成的类，并根据数组的内容实现`equals()`并保持一致。`hashCode()`

A`Set`如果这样的对象可以使用：

```
Set<MyClass> s;
MyClass o;
boolean b = s.contains(o); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T03:45:40.997

你不能通过调用 a.contains() 方法来做到这一点。您必须迭代哈希表并检查值，因为这两个数组是相同的。

# ios - NSMutableArray 属性初始化和更新

> ID：13736586
> 
> 赞同：5
> 
> 时间：2012-12-06T03:40:51.307
> 
> 标签：ios, nsmutablearray, initialization, nsinteger

假设我有一个 @property，它是一个 NSMutablearray，它包含四个对象使用的分数。它们将被初始化为零，然后在 viewDidLoad 和应用程序的整个操作过程中更新。

出于某种原因，我无法完全考虑需要做什么，尤其是在声明和初始化步骤。

我相信这可以是私有财产。

```
@property (strong, nonatomic) NSMutableArray *scores;

@synthesize scores = _scores; 
```

然后在 viewDidLoad 我尝试这样的事情但得到一个错误。我想我只需要语法方面的帮助。或者我错过了一些非常基本的东西。

```
self.scores = [[NSMutableArray alloc] initWithObjects:@0,@0,@0,@0,nil]; 
```

这是初始化它的合适方法吗？那么如何将 (NSNumber *)updateValue 添加到第 n 个值？

编辑：我想我想通了。

```
-(void)updateScoreForBase:(int)baseIndex byIncrement:(int)scoreAdjustmentAmount
{
    int previousValue = [[self.scores objectAtIndex:baseIndex] intValue];
    int updatedValue = previousValue + scoreAdjustmentAmount;
    [_scores replaceObjectAtIndex:baseIndex withObject:[NSNumber numberWithInt:updatedValue]];
} 
```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T04:14:35.080

您正在初始化`viewDidLoad`，但是您应该在`init`.

这两者是相似的，并且完全有效。

```
_scores = [[NSMutableArray alloc] initWithObjects:@0,@0,@0,@0,nil]; 
```

或者，

```
self.scores=[[NSMutableArray alloc]initWithObjects:@0,@0,@0, nil]; 
```

你的最后一个问题......`Then how do I add (NSNumber *)updateValue to, say, the nth value?` 如果你`addObject:`最后会添加它。您需要`insertObject:atIndex:`在所需的索引中，并且所有后续对象都将转移到下一个索引。

```
 NSInteger nthValue=12;
[_scores insertObject:updateValue atIndex:nthValue]; 
```

编辑：

编辑后，

```
NSInteger previousValue = [[_scores objectAtIndex:baseIndex] integerValue];
NSInteger updatedValue = previousValue + scoreAdjustmentAmount;
[_scores replaceObjectAtIndex:baseIndex withObject:[NSNumber numberWithInt:updatedValue]]; 
```

# function - unityscript 函数。对象不支持切片错误

> ID：13736597
> 
> 赞同：0
> 
> 时间：2012-12-06T03:41:59.240
> 
> 标签：function, object, unity3d, type-conversion, unityscript

我正在编写一个非常简单的函数，我应该在其中找到两个 3 d 点之间的距离。一组点直接作为浮点数给出，而其他点作为水平数组给出。

三个输入是 x,y,z，它们是浮点数，并且作为 par 传递的行 Picks[0] 是 ["blue1",441.2223, 231.44, 127.7466] 现在，该行当然是作为对象出现的。我在制作一个计算距离的函数时遇到问题：我的代码现在是：\

```
function distance(x,y,z,par)
{
var p:float;
p=Mathf.Sqrt( (x-parseFloat(par[1].ToString())) * (x-parseFloat(par[1].ToString())) +          (y-parseFloat(par[2].ToString())) * (y-parseFloat(par[2].ToString())) + (z-parseFloat(par[3].ToString())) * (z-parseFloat(par[3].ToString())));
return p;
} 
```

请尝试帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:52:21.577

该错误与 有关`var p:float;`，您无需尝试将变量 p 预先声明为任何内容，因为 javascript 是无类型的。引用所指的是`static function Sqrt (f : float) : float`它期望一个浮点变量并返回一个浮点数。你的代码应该写成：

```
function distance(x,y,z,par)
{
   var p = Mathf.Sqrt( (x-parseFloat(par[1])) * (x-parseFloat(par[1])) + (y-parseFloat(par[2])) * (y-parseFloat(par[2])) + (z-parseFloat(par[3])) * (z-parseFloat(par[3])));
   return p;
} 
```

您也不需要 toString() 您的参数，因为它们将被解析为浮点数。

# java - jdbc apache poi 创建 xls 文件

> ID：13736598
> 
> 赞同：0
> 
> 时间：2012-12-06T03:42:07.937
> 
> 标签：java, postgresql, jdbc, apache-poi, resultset

我编写了以下程序来从 postgres 数据库中获取表列表并将它们写入 xls 文件。我已经包含了 Apache poi 库来编写 xls 文件。程序运行没有任何错误，也创建了，但输出没有写入文件，文件只是空的。请帮我将结果集写入文件。

```
package list;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.sql.Connection;
import java.sql.DatabaseMetaData;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.ss.usermodel.Sheet;
import org.apache.poi.ss.usermodel.Workbook;

public class List 
{
 public static void main(String[] args) throws SQLException, FileNotFoundException,   IOException 
{

 Connection con = DriverManager.getConnection( "jdbc:postgresql://localhost:5432/db","user","pass");

  DatabaseMetaData md = con.getMetaData();
  ResultSet rs = md.getTables(null, "public", "%", null);

  try (FileOutputStream fileOut = new FileOutputStream("/home/usr/Desktop/list.xls")) 
  {

            Workbook wb = new HSSFWorkbook();
            Sheet sheet1 = wb.createSheet("Table List");
            Row row = sheet1.createRow(250);
            while (rs.next()) 
            {
    row.createCell(0).setCellValue(rs.getString(3));

            }
             wb.write(fileOut);  
             fileOut.close();

  }
  catch(SQLException e) 
   { 
       System.out.println( "could not get JDBC connection : " + e ); 
   } 

  }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T09:14:10.667

我已经重写了如下代码，现在它可以工作了。

```
 int i = 0;
                while (rs.next()) 
            {

            Row row = sheet1.createRow(i);

            row.createCell(0).setCellValue(rs.getString(3));

            i++;
            }
             wb.write(fileOut); 
```

# security - 使用 Greasemonkey 脚本安装其他用户脚本

> ID：13736602
> 
> 赞同：1
> 
> 时间：2012-12-06T03:42:32.030
> 
> 标签：security, installation, greasemonkey, browser-security

是否可以创建一个可以管理其他用户脚本的 Greasemonkey 脚本？
在给定用户脚本 URL 列表的情况下，我想编写一个自动安装一组其他用户脚本的用户脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T04:57:45.440

不，这是不可能的。如果是这样，那将是一个重大的安全漏洞。

您可以做的最好的事情是为每个脚本触发安装对话框，并让用户决定是否要安装脚本。

如果您想办法绕过这些限制，请告诉我们，以便我们可以关闭它，匆忙发布。;-)

* * *

* * *

**要触发下载对话框：**

1.  获取直接下载 URL。
    例如，对于[**这个脚本**](http://userscripts.org/scripts/show/26062)：（
    [[点击查看大图）]![查找下载地址](../Images/2520f4386e9163cbf691a33770441ef5.png)](https://i.stack.imgur.com/d57su.gif)

    下载地址为：
    `http://userscripts.org/scripts/source/26062.user.js`.

2.  然后，您的脚本将触发 Greasemonkey 安装对话框，方法是使用`<iframe>`.

    这是**一个完整的 Greasemonkey 脚本**，它演示了：

    ```
    // ==UserScript==
    // @name     _Auto popup Greasemonkey Script Install Dialog
    // @include  http://YOUR_SERVER.COM/YOUR_PATH/*
    // @include  http://stackoverflow.com/faq
    // @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
    // @grant    GM_addStyle
    // ==/UserScript==

    var scriptJS_URL    = "http://userscripts.org/scripts/source/26062.user.js";

    $("body").append (
        '<iframe src="' + scriptJS_URL + '" class="gmImstallIframe"></iframe>'
    );

    GM_addStyle ( "                                 \
        iframe.gmImstallIframe {                    \
            width:                  1px;            \
            height:                 1px;            \
            border:                 none;           \
        }                                           \
    " ); 
    ```

3.  **重要提示：** Greasemonkey（大约 1.5 版）目前似乎存在一个错误。该`Install`按钮有效，但该`Show Script Source`按钮似乎已被跨域脚本破坏。

    ![Greasemonkey 安装弹出窗口](../Images/476220cb17859bb5428278bf8f8efdd6.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T21:47:56.243

在 Firefox 中，您可以在隐藏框架中调用用户脚本的 URL，以流畅地创建分期付款弹出窗口。那是你能得到的最接近的。

无论如何都不适用于 Chrome 用户，而您绕过该安装对话框的真正原因当然是不可能的。

# sql - 将 SQL 查询转换为 vb.net

> ID：13736606
> 
> 赞同：0
> 
> 时间：2012-12-06T03:43:17.190
> 
> 标签：sql, vb.net

可以帮助我在 VB.NET 中运行 SQL 查询。这是将表数据转换为 csv 的查询

```
USE newdb 
 GO
 -- Check Table Column
 SELECT *
 FROM accountexample 
 GO
 -- Get CSV values
 SELECT SUBSTRING(
 (SELECT ' ' + s.BPl + ',' + s.Lo  + ',' + s.Ltion + ',' + s.Ite + ',' + s.HNO + ',' + s.QNo + ',' + s.Country + ',' + s.STATE + ',' + s.Rem + CHAR(10)
  FROM   accountexample s
 ORDER BY s.BPl
 FOR XML PATH('')),2,200000) AS CSV
 GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T06:58:04.163

首先选择需要的记录到数据集中

然后使用以下函数将数据集转换为 CSV 文件。

将数据集转换为 CSV 的函数

```
Sub SetDataTable_To_CSV(ByVal dtable As DataTable, ByVal path_filename As String, ByVal sep_char As String)

    Dim writer As System.IO.StreamWriter

    Try

        writer = New System.IO.StreamWriter(path_filename)

        Dim _sep As String = ""

        Dim builder As New System.Text.StringBuilder

        For Each col As DataColumn In dtable.Columns

            builder.Append(_sep).Append(col.ColumnName)

            _sep = sep_char

        Next

        writer.WriteLine(builder.ToString())

        For Each row As DataRow In dtable.Rows

            _sep = ""

            builder = New System.Text.StringBuilder

            For Each col As DataColumn In dtable.Columns

                builder.Append(_sep).Append(row(col.ColumnName))

                _sep = sep_char

            Next

            writer.WriteLine(builder.ToString())

        Next

    Catch ex As Exception

    Finally

        If Not writer Is Nothing Then writer.Close()

    End Try

End Sub 
```

取自以下链接

[http://redsouljaz.com/2010/06/03/vb-net-set-data-table-to-csv-file/](http://redsouljaz.com/2010/06/03/vb-net-set-data-table-to-csv-file/)

如果你想通过 VB.net 处理我的 sql 端。

然后你可以创建存储过程

```
CREATE PROC ConvertCSV
AS
BEGIN
   SELECT SUBSTRING(
 (SELECT ' ' + s.BPl + ',' + s.Lo  + ',' + s.Ltion + ',' + s.Ite + ',' + s.HNO + ',' + s.QNo + ',' + s.Country + ',' + s.STATE + ',' + s.Rem + CHAR(10)
  FROM   accountexample s
 ORDER BY s.BPl
 FOR XML PATH('')),2,200000) AS CSV
END 
```

然后从 vb.net 调用这个过程

```
Dim con As New SqlConnection("Data Source=<datasource>;Initial Catalog=<databasename>;User ID=<username>;Password=<password>")
con.Open()

Dim cmd As New SqlCommand("ConvertCSV", con)

Try
    cmd.CommandType = CommandType.StoredProcedure
    cmd.ExecuteNonQuery()

Finally
    If cmd IsNot Nothing Then cmd.Dispose()
    If cn IsNot Nothing AndAlso cn.State <> ConnectionState.Closed Then cn.Close()
End Try 
```

希望这可以帮助

# java - 在 Android 上的 Google-Maps API 查询中包含航点

> ID：13736607
> 
> 赞同：0
> 
> 时间：2012-12-06T03:43:32.493
> 
> 标签：java, android, google-maps

根据这个解决方案 [为什么使用 KML 数据检索适用于 Android 的 Google 路线不再有效？](https://stackoverflow.com/questions/11745314/why-retrieving-google-directions-for-android-using-kml-data-is-not-working-anymo/11745316#11745316)

我有一个问题，通过航点绘制路线的最短方法是什么。

1.  实现 itemizedRouteOverlay 存储从起点->航点1、航点1->航点2、航点2->目的地的路线路线

2.  合并路线对象并将其绘制为 routeOverlay Route1=start->waypoint1, route2=waypoint1->waypoint2 等。

3.  在解析器中添加航点的实现

4.  还有其他更好的方法吗？

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T23:54:24.817

我发现最快的方法是：将参数*waypoint*与*via:*前缀为每个航路点添加到 JSON URL 字符串，因此它不会在 JSON 中创建超过一条腿（关键部分，因为 GoogleParser 中只有一条腿支持提供例子）。谷歌只为非商业客户提供 8 个航点支持，所以这是另一个问题。我设法通过将路线拆分为子路线来绕过它，其中一条路线的终点是另一条路线的起点。每条路线都作为不同的 routeOverlay 对象存储在列表中，然后在循环中一一添加到 mapView 中。

# dart - 如何在 Dart 中发出哔哔声？

> ID：13736608
> 
> 赞同：3
> 
> 时间：2012-12-06T03:43:32.907
> 
> 标签：dart

我在 [DartLang and Beep] 上进行了搜索，只发现了各种需要声音文件的 HTML5 解决方案。我想在不使用声音文件的情况下做一个尽可能基本和通用的“Bell”声音。（我使用的是 Ubuntu，当我使用 -h 调用它时，有一个系统哔声功能会报告以下内容：

用法：哔声 [-f 频率] [-l 长度] [-r 代表] [-d 延迟] [-D 延迟] [-s] [-c] [--verbose | --debug] [-e 设备]

然而，我只是想以尽可能简单和通用的方式做到这一点。

还有这个线索：

7 00/07 07 07 BEL (Ctrl-G) BELL (哔)

...但我想不出用 print() 函数做的任何事情都会引起哔哔声。

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-06T13:56:49.813

我不知道您为什么要这样做，但这实际上取决于您是否希望它在浏览器或控制台上运行。

如果您想在控制台上执行此操作，请尝试以下操作：

```
main() {
  print(new String.fromCharCodes([0x07]));
} 
```

至少在 Windows 上对我来说它会发出哔哔声。如果终端支持它应该可以工作（并且它没有被用户禁用等等）。

如果您想在浏览器上执行此操作，您应该播放声音文件。

这是一个免费的哔声：[http ://www.freesound.org/people/SpeedY/sounds/3062/](http://www.freesound.org/people/SpeedY/sounds/3062/)

浏览器上的一个非常简单的例子：

```
new AudioElement("path/to/beep.wav")
  ..autoplay = true
  ..load(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-09T02:34:25.147

您可以使用音频 API 来生成音调。例如，以下 Dart 代码将在您按下某个键时产生持续 50 毫秒的哔哔声。

```
import 'dart:html';
import 'dart:web_audio';
import 'dart:async';

void main() {

  final num LENGTH = 50;

  var ac = new AudioContext();

  window.onKeyUp.listen((KeyboardEvent ke) {

    print("press a key");
    OscillatorNode oscillator = ac.createOscillator();
    oscillator
    ..type = "sine"
    ..frequency.value = 1000
    ..connectNode(ac.destination, 0, 0)
    ..start(0);

    var timer = new Timer(const Duration(milliseconds: LENGTH), () {
          oscillator.disconnect(0);
     });
  });

} 
```

可能有比设置超时更好的方法来终止生成的音调 - 也许通过使用事件侦听器（我对 API 还是很陌生；希望了解更多的人可以编辑上面的代码） - 但结果是一声哔哔声，没有任何声音文件...在支持音频 API 的浏览器上，也就是说。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T05:48:01.737

如果您正在编写控制台应用程序，您可以打印`'\a'`哪个是 ASCII 响铃字符。

这可能不会在所有终端上播放声音。例如，GNU screen 可能会暂时反转屏幕颜色并打印消息“Wuff, Wuff!!” 而不是播放声音。各种终端仿真器将允许您禁用 ASCII 铃声，并且播放的特定声音可能会在系统设置中进行修改。

此外，这在浏览器中不起作用。为此，您必须使用声音文件。

# c# - 使用正则表达式针对列表搜索文本？

> ID：13736615
> 
> 赞同：1
> 
> 时间：2012-12-06T03:44:39.160
> 
> 标签：c#, regex, c#-4.0

我有一段文字：

> 我们美国人民，为了建立一个更完美的联盟，建立正义，确保国内安宁，提供共同防御，促进普遍福利，并确保我们自己和我们的后代获得自由的祝福，为美利坚合众国制定本宪法。

然后我有包含几个关键词的列表：

```
List<string> keywords = new List<string>()
{
  "Posterity",
  "Liberty",
  "Order",
  "Dinosaurs"
} 
```

这是我想要的用法：

```
List<string> GetOrderOfOccurence(string text, List<string> keywords); 
```

因此调用 GetOrderOfOccurence(preamble, keywords) 将按顺序返回以下内容：

```
{"Order"},
{"Liberty"},
{"Posterity"} 
```

这可以通过关键字上的 for 循环和序言上的 getIndexOf(keyword) 轻松解决；然后将索引推入列表并返回。这将如何使用正则表达式完成？假设我想在我的关键字列表中使用通配符？

System.Text.RegularExpressions.Regex.Matches() 是否有使用模式列表的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T04:14:12.953

你必须使用正则表达式吗？Linq 应该可以的。

例子：

```
private List<string> GetOrderOfOccurence(string text, List<string> keywords)
{
    return keywords.Where(x => text.Contains(x)).OrderBy(x => text.IndexOf(x)).ToList();
} 
```

退货

```
{"Order"},
{"Liberty"},
{"Posterity"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:42:23.277

如果您想使用正则表达式匹配字符串，则可以使用包含`keywords`由管道分隔的字符串集合作为模式的单个组。`|`然后，搜索`text`与此模式匹配的字符串，将它们添加到新的字符串中，`List<string>`然后返回为`GetOrderOfOccurence(string text, List<string> keywords)`

**例子**

```
List<string> GetOrderOfOccurence(string text, List<string> keywords)
{
    List<string> target = new List<string>(); //Initialize a new List of string array of name target
    #region Creating the pattern
    string Pattern = "("; //Initialize a new string of name Pattern as "("
    foreach (string x in keywords) //Get x as a string for every string in keywords
    {
        Pattern +=  x + "|"; //Append the string + "|" to Pattern
    }
    Pattern = Pattern.Remove(Pattern.LastIndexOf('|')); //Remove the last pipeline character from Pattern
    Pattern += ")"; //Append ")" to the Pattern
    #endregion
    Regex _Regex = new Regex(Pattern); //Initialize a new class of Regex as _Regex
    foreach (Match item in _Regex.Matches(text)) //Get item as a Match for every Match in _Regex.Matches(text)
    {
        target.Add(item.Value); //Add the value of the item to the list we are going to return
    }
    return target; //Return the list
}
private void Form1_Load(object sender, EventArgs e)
{
    List<string> keywords = new List<string>(){"Posterity", "Liberty", "Order", "Dinosaurs"}; //Initialize a new List<string> of name keywords which contains 4 items
    foreach (string x in GetOrderOfOccurence("We the People of the United States, in Order to form a more perfect Union, establish Justice, insure domestic Tranquility, provide for the common defence, promote the general Welfare, and secure the Blessings of Liberty to ourselves and our Posterity, do ordain and establish this Constitution for the United States of America.", keywords)) //Get x for every string in the List<string> returned by GetOrderOfOccurence(string text, List<string> keywords)
    {
        Debug.WriteLine(x); //Writes the string in the output Window
    }
} 
```

**输出**

```
Order
Liberty
Posterity 
```

谢谢，
我希望你觉得这有帮助:)

# java - java中使用netty的SPDY客户端和服务器

> ID：13736620
> 
> 赞同：0
> 
> 时间：2012-12-06T03:45:24.887
> 
> 标签：java, webserver, netty, spdy

```
Server

import java.util.concurrent.atomic.AtomicReference;

import org.jboss.netty.channel.Channel;
import org.jboss.netty.channel.ChannelHandlerContext;
import org.jboss.netty.channel.ChannelStateEvent;
import org.jboss.netty.channel.Channels;
import org.jboss.netty.channel.ExceptionEvent;
import org.jboss.netty.channel.MessageEvent;
import org.jboss.netty.channel.SimpleChannelUpstreamHandler;
import org.jboss.netty.handler.codec.spdy.DefaultSpdySynStreamFrame;

public class SpdyChannelUpStreamHandler extends SimpleChannelUpstreamHandler {
volatile Channel channel;
final AtomicReference<Throwable> exception = new AtomicReference<Throwable>();

@Override
public void channelOpen(ChannelHandlerContext ctx, ChannelStateEvent e)
        throws Exception {
    System.out.println("Channel In Open Stage");
    channel = e.getChannel();

}

@Override
public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e)
        throws Exception {
    System.out.println("Channel In Connected Stage");
    Channels.write(channel, new DefaultSpdySynStreamFrame(1, 1, (byte)0));
}

@Override
public void messageReceived(ChannelHandlerContext ctx, MessageEvent e)
        throws Exception {
    System.out.println("Message Received on Server Side");
     Channels.write(channel, e.getMessage(), e.getRemoteAddress());
}

@Override
public void exceptionCaught(ChannelHandlerContext ctx, ExceptionEvent e)
        throws Exception {
     if (exception.compareAndSet(null, e.getCause())) {
         e.getChannel().close();
     }
} 
```

}

```
import static org.jboss.netty.channel.Channels.pipeline;

import org.jboss.netty.channel.ChannelPipeline;
import org.jboss.netty.channel.ChannelPipelineFactory;
import org.jboss.netty.handler.codec.spdy.SpdyFrameDecoder;
import org.jboss.netty.handler.codec.spdy.SpdyFrameEncoder;
import org.jboss.netty.handler.codec.spdy.SpdySessionHandler;

public class SpdyPipeLineFactory implements ChannelPipelineFactory{

@Override
public ChannelPipeline getPipeline() throws Exception {
    ChannelPipeline pipeline = pipeline();
    pipeline.addLast("decoder", new SpdyFrameDecoder(2));
    pipeline.addLast("encoder", new SpdyFrameEncoder(2));
    //pipeline.addLast("sessionHandler",new SpdySessionHandler(2,true));
    pipeline.addLast("handler", new SpdyChannelUpStreamHandler());
    return pipeline;
}

import java.net.InetSocketAddress;
import java.util.concurrent.Executors;

import org.jboss.netty.bootstrap.ServerBootstrap;
import org.jboss.netty.channel.socket.nio.NioServerSocketChannelFactory;

public class StartServer {
public static void main(String[] args){
ServerBootstrap bootStrapServer = new ServerBootstrap(new 
        NioServerSocketChannelFactory(Executors.newCachedThreadPool(), 
        Executors.newCachedThreadPool()));
    bootStrapServer.setPipelineFactory(new SpdyPipeLineFactory());
    bootStrapServer.bind(new InetSocketAddress(8443));
}

} 
```

这是启用了 SPDY 的服务器示例，我可以通过在 Internet 上的多个位置阅读来使用 netty 库将其组合在一起。当我运行这个服务器并使用 SPDY 客户端连接时，我的连接是成功的，因为我可以在 channelOpen 和 channelConnected 的函数中看到消息。

我想问几个问题，因为我对 SPDY 协议的了解非常有限。我将从我想做的第一件事开始。

1 - 服务器如何将消息发送到客户端，目前我在 channelConnected 方法中执行此操作，我可以在客户端看到，但这给了我发送消息的机会非常有限，并且 channelConnected 事件在通道设置过程中发生一次，

有什么方法可以获取 SPDY 服务器上当前所有打开通道的句柄并识别这些通道，以便我可以按需选择通道并使用它们发送消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T14:34:33.600

您最好的选择是创建一个共享的 ChannelGroup，并且每当有新频道连接时，将该频道添加到 ChannelGroup。您需要弄清楚如何根据可用的通道元数据（例如远程地址或通道 ID）来识别要发送到的通道。然后，您可以从 ChannelGroup 中检索通道并向其写入消息。ChannelGroup 的其他优势是

*   当通道关闭时，它们会自动从 ChannelGroup 中删除。
*   您可以在 ChannelGroup 上调用 close 以关闭所有包含的通道。
*   您可以在 ChannelGroup 上调用 writes 以将消息写入所有包含的通道。

我编写了一个扩展的 Channel 包装器，因此我可以将其他元数据关联到一个通道。我的协议的一部分是，当一个新通道连接时，我向它发送一条 WHO 消息，并且客户端使用我添加到通道包装器中的一些客户端身份值进行响应。我还实现了一个 JMX 接口，它公开了组中的通道，这样我就可以准确地看到连接了哪些客户端。

![JConsole 中增强通道元数据的屏幕截图](../Images/113c69d009672f120838cc8cd1cb1095.png)

# android - 共享偏好和微调器不保持状态

> ID：13736624
> 
> 赞同：0
> 
> 时间：2012-12-06T03:45:50.577
> 
> 标签：android, sharedpreferences, android-spinner

我有一个这样的微调器：

```
// Spinner 1

final Spinner plan = (Spinner) dialog.findViewById(R.id.spinner1);
strings = getResources().getStringArray(R.array.paymentplan);
sAdapter = new SpinnerAdapter(this,
        android.R.layout.simple_spinner_item, strings);
sAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
plan.setAdapter(sAdapter);

// plan.setAdapter(spinner1Adapter);
plan.setSelection(prefsDisplay.getInt("spinnerSelection1", 0));
plan.setOnItemSelectedListener(new MyOnItemSelectedListenerPlan()); 
```

当用户点击时，我希望它保存状态：

```
 public void onClick(View v) {
                Editor editor2 = prefsPlan.edit();
                int selectedPosition1 = plan.getSelectedItemPosition();
                editor2.putInt("spinnerSelection1", selectedPosition1);
                editor2.commit();

} 
```

它将位置保存在 SharedPref 中，但微调器返回默认值。有人在这里看到什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:50:12.420

你正在存储`spinnerSelection`

```
editor1.putInt("spinnerSelection", selectedPosition); 
```

访问`spinnerSelection1`

```
prefsDisplay.getInt("spinnerSelection1", 0) 
```

使它们一致。

**更新**

当您访问`plan.getSelectedItemPosition()`. 那么微调器是可见的？我觉得不是。

尝试为所选位置放置一个公共变量。并`selected position`在您的`MyOnItemSelectedListenerPlan`. 然后将该位置存储在共享偏好中。我想它可以解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T04:11:07.177

> 保存：

```
int selectedPosition = yourSpinner.getSelectedItemPosition()
editor.putInt("spinnerSelection", selectedPosition);
editor.commit(); 
```

> 装载：

```
 yourSpinner.setSelection(prefs.getInt("spinnerSelection",0)); 
```

如果你是使用数组，它应该像这样改变

```
String selectedString = yourArray[yourSpinner.getSelectedItemPosition()];
editor.putString("spinnerSelection", selectedString);
editor.commit(); 
```

> 根据存储在 prefs 中的值检查 array[i]。如果您使用 ArrayList 而不是这部分可以通过调用在没有循环的情况下完成

```
ArrayList.indexOf(prefs.getString("spinnerSelection", ""); 
```

> 当您提交时，显示所有上述数组项都消失了。显示没有人进入数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T05:32:39.673

尝试下面的代码，并首先使用下面的代码将当前选定项目的位置保存到一个整数变量`onItemSelectedListener()`中，然后将此变量值存储到共享首选项中。

用于将值存储到一个变量中。

```
int index;

public void onItemSelected(AdapterView<?> parent, View v, int position, long id) {
    // Here Position is Item Index
    index = position;
} 
```

将价值存储到共享偏好中。

```
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
SharedPreferences.Editor prefsEditor = myPrefs.edit();
prefsEditor.putInt("SelectedIndex", index);
prefsEditor.commit(); 
```

并查看下面的链接了解更多信息

[Android 微调器](http://developer.android.com/guide/topics/ui/controls/spinner.html)

[Android 共享首选项](http://developer.android.com/guide/topics/data/data-storage.html#pref)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T03:52:07.153

保存到首选项后，您必须将所选项目设置为微调器以供进一步使用

作为

```
int pos = prefsDisplay.getInt("spinnerSelection", "0");
display.setSelection(pos); 
```

但你正在使用`spinnerSelection1`. 所以默认情况下，如果首选项中没有匹配。默认值将返回。所以这里返回**0**并将微调器设置为第一个位置

# c# - 允许“粘贴数据”到 WPF 文本框

> ID：13736626
> 
> 赞同：8
> 
> 时间：2012-12-06T03:46:05.683
> 
> 标签：c#, wpf, clipboard

我正在尝试拦截粘贴到 WPF 文本框中的数据。

例如，用户使用 Windows 截图工具创建屏幕截图，该工具会自动将图像数据放在剪贴板上。这里的想法是允许用户在 TextBox 上简单地按 CTRL+V，这样我就可以拦截它，检查它是否是数据，然后用它做任何我想做的事情。

```
public class PasteBehavior : Behavior<UIElement>
{
    protected override void OnAttached()
    {
        base.OnAttached();
        DataObject.AddPastingHandler(AssociatedObject, new DataObjectPastingEventHandler(OnPaste));
    }

    protected override void OnDetaching()
    {
        base.OnDetaching();
    }

    private void OnPaste(object sender, DataObjectPastingEventArgs e)
    {
        if (e.SourceDataObject.GetDataPresent(DataFormats.Text))
            return;

        var formats = e.SourceDataObject.GetFormats();
        foreach (var format in formats)
            Console.WriteLine(format);
    }
} 
```

使用上面的行为，当文本粘贴到 TextBox 时，代码确实会被触发，但似乎 TextBox 不允许粘贴任何其他内容，因此如果不是文本，它甚至永远不会到达此代码。

我想知道，是否需要在 TextBox 上设置一个属性，或者其他允许粘贴数据的属性（即使 TextBox 永远无法显示该数据）

如果没有，哪些 UI 元素确实允许粘贴数据，因为我也可以利用它来发挥我的优势。

**更新** 有人向我发帖说我必须使用 RichTextBox 来允许
像这样粘贴，这不是我可以使用的，所以我决定采用不同的（有点 hacky）方法：

```
public class PasteBehavior : Behavior<UIElement>
{
    protected override void OnAttached()
    {
        base.OnAttached();
        AssociatedObject.PreviewKeyDown += AssociatedObject_PreviewKeyDown;
    }

    void AssociatedObject_PreviewKeyDown(object sender, KeyEventArgs e)
    {
        if (Keyboard.Modifiers == ModifierKeys.Control && e.Key == Key.V)
        {
            if (Clipboard.ContainsData(DataFormats.Dib))
            {
                using (var stream = new MemoryStream())
                {
                    var image = Clipboard.GetImage();
                    var message = new ImagePastedMessage()
                    {
                        ImageData = GetImagePngData(image)
                    };

                    Messenger.Default.Send(message);
                }

                e.Handled = true;
            }
            else if (Clipboard.ContainsFileDropList())
            {
                var results = Clipboard.GetFileDropList();
                var filenames = new string[results.Count];
                results.CopyTo(filenames, 0);

                var message = new FilesDroppedMessage()
                {
                    Filenames = filenames
                };

                Messenger.Default.Send(message);
                e.Handled = true;
            }
        }
    }

    protected override void OnDetaching()
    {
        base.OnDetaching();
    }

    private byte[] GetImagePngData(BitmapSource source)
    {
        using (var stream = new MemoryStream())            
        {
            var encoder = new PngBitmapEncoder();
            encoder.Frames.Add(BitmapFrame.Create(source));
            encoder.Save(stream);
            return stream.ToArray();
        }
    }
} 
```

这允许我将图像和文件粘贴到文本框中，但只能使用 CTRL+V 键，而不是使用文本框的默认上下文菜单。

所以我仍然有兴趣知道是否有更好/更简单的方法

**更新 2** 基于 Daniel 的解决方案，效果非常好，我更新了 OnAttached：

```
protected override void OnAttached()
{
    base.OnAttached();

    CommandManager.AddPreviewCanExecuteHandler(AssociatedObject, onPreviewCanExecute);
    CommandManager.AddPreviewExecutedHandler(AssociatedObject, onPreviewExecuted);
} 
```

并删除了 PreviewKeyDownHandler。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T05:50:26.797

您可以使用`CommandManager.PreviewExecuted`和`CommandManager.PreviewCanExecute`路由事件来处理您的粘贴逻辑。

例如，假设您想在用户尝试将图像粘贴到您的 TextBox 时从剪贴板接受图像。所以首先，定义将处理这两个事件的方法：

```
 private void onPreviewCanExecute(object sender, CanExecuteRoutedEventArgs e)
    {
        // In this case, we just say it always can be executed (only for a Paste command), but you can 
        // write some checks here
        if (e.Command == ApplicationCommands.Paste)
        {
            e.CanExecute = true;
            e.Handled = true;
        }
    }

    private void onPreviewExecuted(object sender, ExecutedRoutedEventArgs e)
    {
        // If it is a paste command..
        if (e.Command == ApplicationCommands.Paste)
        {
            // .. and the clipboard contains an image
            if (Clipboard.ContainsImage())
            {
                // proccess it somehow
                e.Handled = true;
            }

        }
    } 
```

然后，您必须将这些方法与路由事件相关联（例如，这可以在构造函数中进行）：

```
CommandManager.AddPreviewExecutedHandler(myTextBox, onPreviewExecuted);
CommandManager.AddPreviewCanExecuteHandler(myTextBox, onPreviewCanExecute); 
```

它应该与键盘快捷键和菜单“按钮”一起使用。

处理 PreviewCanExecute 事件很重要。默认情况下，TextBox 只接受文本作为“可粘贴”内容，因此您需要以某种方式标记该内容才能粘贴它。

编辑：此外，如果可以的话，从事件中删除“听众”是一个好习惯。当您使用行为时，您可以通过在您的行为中覆盖“OnDetaching”方法来做到这一点。如果事件不是弱事件，这可以防止内存泄漏：

```
 protected override void OnDetaching()
    {
        base.OnDetaching();
        CommandManager.RemovePreviewExecutedHandler(myTextBox, onPreviewExecuted);
        CommandManager.RemovePreviewCanExecuteHandler(myTextBox, onPreviewCanExecute);
    } 
```

# jersey - 您可以在 JAX-RS 的单例 ContextResolver 中使用请求范围的 @Context 变量吗？

> ID：13736627
> 
> 赞同：0
> 
> 时间：2012-12-06T03:46:09.383
> 
> 标签：jersey, jax-rs

我正在使用带有 Spring 的 Jersey 1.13。我有一个 ContextResolver 定义如下：

```
@Provider
public class ThemeSourceContextResolver implements ContextResolver<ThemeSource> {

    @Context private HttpServletRequest request;

    @Override
    public ThemeSource getContext(Class<?> type) {
        return new DefaultThemeSource(request);
    }
}

<bean id="themeSourceContextResolver" scope="singleton" class="com.example.ThemeSourceContextResolver" /> 
```

以上有效吗？`@Context private HttpServletRequest request`具体来说，在 ContextResolver中使用它是否“合法”（或有意义） ？由于 ContextResolver 是一个单例，Jersey/JAX-RS 是否会做一些线程本地代理魔术或其他什么来允许它访问每个请求的 HttpServletRequest？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-30T02:29:19.347

要更新 Jersey 2.14 的这个答案：

现在的答案是“有时”。Jersey 确实为特定的@Context 变量（即 HttpHeaders、Request、UriInfo 和 SecurityContext）做了代理魔法。*不*支持您的特定情况 HttpServletRequest 。

请参阅[https://jersey.java.net/documentation/latest/jaxrs-resources.html#d0e2578](https://jersey.java.net/documentation/latest/jaxrs-resources.html#d0e2578)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:12:55.420

这是无效的。`@Context`仅注入到 JAX-RS 资源中。`ContextResolver<?>`正如您所说，与请求上下文无关，主要是因为它是一个单例。

# java - 在Java中，“var = 3;”有什么区别？和“this.var = 3;”？

> ID：13736629
> 
> 赞同：5
> 
> 时间：2012-12-06T03:46:12.527
> 
> 标签：java

this.var 的唯一目的是与可能冲突的外部变量名区分开来吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T04:00:43.617

通常，这种机会发生在您进行阴影处理时。这是一个阴影的例子。

```
public class YourClass
{

       private int var;

} 
```

碰巧你有这个方法：

```
public void yourMethod(int var)
{

       this.var = var; // Shadowing

} 
```

'this.var' 恰好是您的实例变量，并在您的类下面声明。另一方面，在我的示例中， var 是一个参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T03:47:40.973

使用`this`显式指示实例`var`，而不是同名的构造函数/方法变量或参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T03:47:26.493

一个用例是：

如果您的方法/构造函数参数也命名为 as`var`并且您想访问该方法中的实例变量，那么您可能需要明确告诉`this.var`使用实例变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T03:48:27.047

有时，当您编写构造函数时，作为参数传递的变量的名称可能与您在方法中声明的实例变量具有相同的名称。所以 this.var 指的是实际的实例变量。

# c - 如何在C中检查指针变量的地址

> ID：13736632
> 
> 赞同：1
> 
> 时间：2012-12-06T03:46:37.227
> 
> 标签：c

我试图打印指针变量的地址而不是它指向的地址，有人能帮我实现吗？以下是我正在尝试的，但它显示了我无法解决的警告。谢谢！

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int* y;
    printf("%p\n",y);
    printf("%x\n",&y);
    y = (int*)malloc(sizeof(int));
    printf("%p\n",y);
    printf("%x\n",&y);
    return 0;
} 
```

编译警告：

```
Warning: format ‘%x’ expects argument of type ‘unsigned int’,
    but argument 2 has type ‘int **’ 

Output:
0xb773fff4
bfa3594c
0x8361008
bfa3594c 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T03:50:23.490

你的第二个`printf()`应该采用一种`"%p\n"`格式，并且严格来说是一个演员：

```
printf("%p\n", (void *)&y); 
```

演员实际上改变任何东西的机器数量是相当有限的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T03:55:54.903

该代码似乎在 Visual Studio 2012 上编译时没有警告或错误。

```
 #include <stdio.h>
    #include <stdlib.h>

    int _tmain(int argc, _TCHAR* argv[])
    {
        int* y = 0;
        printf("%p\n",y);
        printf("%x",&y);
        y = (int*)malloc(sizeof(int));
        printf("%p\n", y);
        printf("%x",  &y);

        return 0;
    } 
```

唯一的建议是在声明 y 时对其进行初始化。

# c# - 将可执行文件 2008 转换为 dll

> ID：13736633
> 
> 赞同：0
> 
> 时间：2012-12-06T03:47:02.440
> 
> 标签：c#, visual-studio-2008, dll, executable

我有一个关于将当前作为可执行文件运行的 C# 2008 控制台应用程序转换为作为 DLL 运行的问题。我不知道整个解决方案文件的哪些部分应该是 dll 文件的一部分，哪些部分（如果有）应该保留为可执行文件。

一家合同商店简要地告诉我，当当前应用程序调用 Web 服务时，该部分应该成为 dll。合同商店还告诉我，chelper.cs 代码（调用 Web 服务）应该是 dll 的一部分。这家合同商店还说我可以为每个被调用的“类型”方法编写单独的 dll。如果我这样做了，我会使用每个项目文件中的部分代码。

所以基本上我有4个项目文件中的一个项目文件的一部分应该包含在dll文件中？

以下是对当前项目文件的描述： 1\. 一个项目文件具有与 Web 服务相关的各种例程。2\. 另一个项目文件是用于验证安全性的握手程序。3\. 有'驱动'工程文件。4\. 有一个由支持 Web 服务的合同商店编写的“示例”代码项目文件。

你能告诉我你将如何决定将我上面列出的应用程序设置为 dll 文件吗？你会怎么

更改我刚刚在上面列出的代码？您将如何设置代码将其转换（使用）为 dll 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:59:06.740

在没有看到您的代码和项目结构的情况下，我能给您的最佳建议是通过逻辑函数进行重构。在一个小型且典型的应用程序中，这将是：

1.  Application/UI/Presentation Layer（应用相关的逻辑和操作）
2.  业务层（业务逻辑所在的地方）
3.  数据层（数据访问操作发生的地方）
4.  接口层（出现与外部系统的接口）
5.  服务层（将业务服务公开给外部客户端）

因此，如果您有任何方法、类等属于上一层，我会将它们标记为候选放入它自己的项目中。

另一种组织方式是按域或命名空间（按照上述组织后）。但这在很大程度上取决于你的申请细节，所以我把它留给你决定。

请注意，您的组织是否“正确”在很大程度上取决于您的架构师的指导原则。

# opencv - OpenCV parallel_for 不使用多个处理器

> ID：13736634
> 
> 赞同：3
> 
> 时间：2012-12-06T03:47:06.440
> 
> 标签：opencv, tbb, parallel-for

我刚刚在新的 OpenCV 2.4.3 中看到他们添加了一个通用的 parallel_for。所以按照这个[例子](http://answers.opencv.org/question/3730/how-to-use-parallel_for/)，我尝试自己实现它。我用我的代码让它全部运行，但是当我用常规的“for”命令以典型的串行方式完成它的处理与类似的循环时，结果快得微不足道，或者通常慢一点！

我想这可能与我推入向量或其他东西有关（我是并行处理的一个相当大的菜鸟），所以我设置了一个只运行一个大数字的测试循环，它仍然不起作用。

代码：

```
class Parallel_Test : public cv::ParallelLoopBody
{
private:
double* const mypointer;

public:
Parallel_Test(double* pointer)
: mypointer(pointer){

}
     void operator() (const Range& range) const
{
         //This constructor needs to be here otherwise it is considered an abstract class.
//             qDebug()<<"This should never be called";
}

    void operator ()(const cv::BlockedRange& range) const
    {

        for (int x = range.begin(); x < range.end(); ++x){

            mypointer[x]=x;

        }

    }

};

 //TODO Loop pixels in parallel
     double t = (double)getTickCount();

    //TEST PARALELL LOOPING AT ALL
    double data1[1000000];

        cv::parallel_for(BlockedRange(0, 1000000),  Parallel_Test(data1));

        t = ((double)getTickCount() - t)/getTickFrequency();
        qDebug() << "Parallel TEST time " << t << endl;

        t = (double)getTickCount();

        for(int i =0; i<1000000; i++){

            data1[i]=i;
        }
        t = ((double)getTickCount() - t)/getTickFrequency();
        qDebug() << "SERIAL Scan time " << t << endl; 
```

输出：

```
Parallel TEST time  0.00415479 

SERIAL Scan time  0.00204597 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T15:47:32.953

哇！我找到了答案！“parallel_for”和“parallel_for_”（带有尾随下划线！）完全不同。您需要尾随下划线才能使其工作！否则它只会串行运行你的循环，你将不得不使用 BLOCKEDRANGE 而不是范围！啊！

感谢@Daniil Osokin 尤其是@Vladislav Vinogradov 指出这一点！

所以你的代码需要看起来像这样： cv::parallel_for_(Range(0, 1000000), Parallel_Test(data1));

更多更新详情请访问：[http ://answers.opencv.org/question/3730/how-to-use-parallel_for/](http://answers.opencv.org/question/3730/how-to-use-parallel_for/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T04:32:06.640

问题很可能是您的循环体太小。

看来您所做的只是将一个向量中的指针分配给另一个向量。

您确实需要将并行 for 视为低效的 for 循环，即每次迭代中的工作需要足够大，这样您就不会梦想通过展开循环来获得加速，因为除了通常的递减之外，比较并且可以继续进行的跳转还有一些互锁指令，可能还有一个或两个虚拟函数调用和一些分配。

因此，与其复制指针，不如尝试做大量真正的数学运算或处理大量数据。

# php - 如何在 Web 根目录之外访问 sql 登录信息

> ID：13736635
> 
> 赞同：3
> 
> 时间：2012-12-06T03:47:07.057
> 
> 标签：php, mysql, web, passwords, root

我是新手。

我在这里有一个 php 脚本`/var/www/check_login.php`，其中包含纯文本的 sql 登录信息。`/var/www/login.php`通过我的登录页面访问此文件以验证正确的用户凭据`<form name="" method="post" action="check_login.php">`

我想存储`check_login.php`在网络根目录之外，因此无法远程访问。

我将如何告诉在 Web 根目录之外`login.php`进行访问？`check_login.php`

我猜它并不像`action="/var/<new folder outside of root>/check_login.php`

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:22:08.037

你在正确的轨道上。在 /var/www 中为您的站点创建一个不同的文件夹。我喜欢做这个设置：

```
/var
---/www
-------/mysite
----------/html
----------/config
----------/lib 
```

等在 apache 中，我告诉它我的文档主页是

`/var/www/mysite/html`

然后我将任何配置文件（如 MySQL 凭据或类）存储在`/var/www/mysite/config`. 然后，我可以将这些文件包含在以下内容中：

`require_once("/var/www/mysite/config/mydbcreds.php")`

在您的示例中，`login.php`需要在此文件中调用您的检查函数，并且如果您需要包含它，则可以这样做。[在此处查看我](https://stackoverflow.com/questions/13608878/trying-to-understand-why-you-would-use-this-type-of-database-setup/13609836#13609836)关于如何使用 MySQL 连接类的答案，这可能会为您节省一些时间和头痛。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T03:59:34.490

将带有凭据的文件移动到上一级目录和文件 check_login.php

```
include('../credentials.php'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T04:15:14.723

为您的数据库连接信息创建一个新页面并将其移动到`/var/`

然后您可以使用您的 HTML`action="check_login.php"`

在您的 check_login.php 脚本上，使用 Gustek 建议的解决方案：

`include('../credentials.php');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-19T02:33:40.320

如果您使用的是共享托管计划，我只需在我的网站根目录之外创建一个新文件夹，并将我所有的非公开文件都保存在其中。然后在您网站的**php.ini**文件中，我将编辑包含路径以包含这个新文件夹。在您的 .php 文件中，简单地放在`require("the-non-public-file.php");`顶部，即没有绝对路径。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T04:26:07.590

您可以简单地使用`include('path of folders/ your_ logging_data .php`);

# c# - 如何在 C# 中通过 CommandText 中的参数进行过滤？

> ID：13736640
> 
> 赞同：2
> 
> 时间：2012-12-06T03:48:03.927
> 
> 标签：c#, sql

我想填充一个组合框，但我想通过一个名为“id_group”的参数对数据进行排序。我写了一个代码，但它不起作用。在这一行中发生了一个异常，上面写着“语法不正确”：

```
SqlDataReader sd = sc.ExecuteReader(); 
```

这是我的所有代码：

```
int id_group=5;
SqlConnection conn = new SqlConnection();
SqlCommand sc = conn.CreateCommand();
sc.CommandText = "SELECT STUDENT FROM FACULTY WHERE ID_GROUP '" + id_group + "'";
conn.Open();
SqlDataReader sd = sc.ExecuteReader(); //this happens exception - "incorrect syntax"
while (sd.Read())
{
    string graduate = (string)sd["STUDENT"];
    Student_comboBox.Items.Add(graduate);
}
conn.Close(); 
```

如何让它发挥作用？还有其他方法可以通过参数过滤数据吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T03:50:06.237

实际上你的查询中缺少`=`，所以这应该是这样的，

```
sc.CommandText = "SELECT STUDENT FROM FACULTY WHERE ID_GROUP = '" + 
                                                    id_group + "'"; 
```

但请务必参数化以避免`SQL Injection`

```
sc.CommandText = "SELECT STUDENT FROM FACULTY WHERE ID_GROUP = @groupID";
sc.Parameters.AddWithValue("@groupID", id_group); 
```

来源

*   [加值](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)
*   [添加（*推荐使用*）](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.add.aspx)

# javascript - 具有 1 个以上数据系列的从属控件 - Google 图表工具

> ID：13736645
> 
> 赞同：1
> 
> 时间：2012-12-06T03:48:33.007
> 
> 标签：javascript, charts

我正在尝试创建一个包含多个数据系列的依赖控件的谷歌图表。我想要做的是，实际上，生成这个：[http](http://code.google.com/apis/ajax/playground/?type=visualization#column_chart) ://code.google.com/apis/ajax/playground/?type= visualization#column_chart 但是有一个像这里这样的依赖控制：[http ://code.google .com/apis/ajax/playground/?type=visualization#dependent_controls](http://code.google.com/apis/ajax/playground/?type=visualization#dependent_controls)

这是我的数据结构：

年份（选项 2008、2009、2010、2011） 变量（选项年龄类别） 类别（选项 18-24、25-34、35-49、50+） 人口比例（选项 ratio1、proportion2、proportion3、proportion4）

我知道我需要创建数组才能完成这项工作，但是，我绝不是 javascript 人，而且我已经创建了一个数据系列，但似乎无法找到一种方法能够在同一张图上绘制多个数据系列。

任何帮助将非常感激！

# facebook - Facebook graph api 不再返回 url 共享计数

> ID：13736646
> 
> 赞同：1
> 
> 时间：2012-12-06T03:48:39.027
> 
> 标签：facebook

我无法再从[https://graph.facebook.com/http://www.somewhere.com/over/the/rainbow/](https://graph.facebook.com/http://www.somewhere.com/over/the/rainbow/)检索 url 共享计数 有人知道为什么吗？

# c - 用于识别 IPV6 地址的 Lex 模式

> ID：13736647
> 
> 赞同：0
> 
> 时间：2012-12-06T03:48:48.637
> 
> 标签：c, token, lex, flex-lexer

我有一个下面给出的模式来匹配点分四符号中的 ipv6 地址。

```
IPV4ADDRESS (([[:digit:]]{1,3}"."){3}([[:digit:]]{1,3}))
hex4         ([[:xdigit:]]{1,4})
hexseq       ({hex4}(:{hex4}*))
hexpart      ({hexseq}|({hexseq}::({hexseq}?))|::{hexseq})
IPV6ADDRESS  ({hexpart}(":"{IPV4ADDRESS})?) 
```

我用

```
%x S_rule S_dst_ip

<S_rule>(dst-ip){SPACE}   {

           BEGIN(S_dst_ip);

        }

<S_dst_ip>\{{IPV6ADDRESS}\}  {

       /*code to process the sring here.*/
     } 
```

匹配表单的输入

```
dst-ip {3ffe:1900:4545:3:200:f8ff:fe21:67cf} 
```

由于某种原因，给定的正则表达式似乎与上述模式不匹配。有人可以指出我的代码中的错误吗？

有人可以指出我的代码中的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T03:52:36.123

我认为`*`可能是在错误的地方：

```
hexseq       ({hex4}(:{hex4}*)) 
```

这是你的意思吗？

```
hexseq       ({hex4}(:{hex4})*) 
```

# ios - 在 Storyboard 中制作的容器视图不会以编程方式更改框架

> ID：13736649
> 
> 赞同：4
> 
> 时间：2012-12-06T03:48:51.380
> 
> 标签：ios, xcode, uiview, uiviewcontroller, containers

我有一个容器视图，`@property (weak, nonatomic) IBOutlet UIView *containerView;`但是当我设置它的框架时它不会移动。这是我正在尝试的方法：

```
- (void)setFramesForCategories
{
    CGRect frame = _containerView.frame;
    frame.origin.x = 20;
    frame.origin.y = self.view.frame.size.height - 52;
    frame.size.width = 236;
    frame.size.height = 60 * [[_dataDict objectForKey:@"Key"] count];
    _containerView.frame = frame;
} 
```

我知道这是基本的，它以前对我有用，当我移动以编程方式创建的对象时，但现在对我不起作用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-06T16:51:48.807

我遇到的问题是 Storyboard 中设置的约束覆盖了框架更改。这解释了为什么我对以编程方式添加的对象没有同样的问题。要关闭项目的约束，我所要做的就是转到`Storyboard.storyboard`文件，然后确保“实用程序”侧边栏已打开并选择“文件检查器”选项卡。然后我在“Interface Builder Document”下向下滚动并取消选择“Use Autolayout”。在此之后，我重新运行该项目以发现以编程方式设置框架确实有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-13T06:16:34.830

视图的“框架”属性用于布局。如果您在情节提要中布局了容器视图并想在代码中移动它。尝试“转换”属性。如，“self.containerView.transform = CGAffineTransformTranslate(self.containerView.transform, 0.0, 10.0);” => 将容器视图向上移动 10 点 :)

# class - 计算方法是否需要 getter 和 setter？

> ID：13736652
> 
> 赞同：0
> 
> 时间：2012-12-06T03:50:04.300
> 
> 标签：class, methods, getter-setter

导入 javax.swing.JOptionPane；

公共类 BeerStoreBP {

私有字符串名称；

私人双重监护；

私人双 numBeers = 0;

私人双 beerDisc = 0;

私人双啤酒类型 = 0;

私人双啤酒品牌；

私人双总数= 0；

私人双啤酒 = 0;

```
public void setAge(double theAge)
{
    custAge = theAge;
}

public void setName(String theName)
{
    name = theName;
}

public void setNumBeers(double theNumBeers)
{
    numBeers = theNumBeers;
}

public void setBeerType(double theBeerType)
{
    beerType = theBeerType;
}

public double getAge()
{
    return custAge;
}

public String getName()
{
    return name;
}

public double getNumBeers()
{
    return numBeers;
}

public double calcNumBeersValid()
{

    String numBeersStr;

    while (numBeers < 3 || numBeers > 6)
    {
        numBeersStr = JOptionPane.showInputDialog("You must pick 3-6 " +
                                                                "beers");
        numBeers = Double.parseDouble(numBeersStr);
    }

    return numBeers;
}

public double calcBeerPrice()
{

    final double LAGIMRED = 1.90;  
    final double DESINIPA = 2.00;
    final double BELBEBRN = 1.80;
    final double SCHOATST = 2.50;
    final double BOULFHSAISN = 2.75;
    final double GANDANCPRTR = 1.75;

       if (theBeerBrand == 1)
           beer = LAGIMRED;

       else if (theBeerBrand == 2)
           beer = DESINIPA;

       else if (theBeerBrand == 3)
           beer = BELBEBRN;

       else if (theBeerBrand == 4)
           beer = SCHOATST;

       else if (theBeerBrand == 5)
           beer = BOULFHSAISN;

       else 
           beer = GANDANCPRTR;        

       return beer;

public double calcBeerTotal()
{
    String beerTypeStr;
    double count = 1;

    while (count <= numBeers)
    {    

    beerTypeStr = JOptionPane.showInputDialog("Please choose between " 
                + "these fine selections:\n1 - Lagunitas Imperial Red - " +
                       "$1.90\n2 - Deschutes Inversion IPA - $2.00\n3 - " +
                 "Bell's Best Brown Ale - $1.80\n4 - Schlafly's Oatmeal " +
                 "Stout - $2.50\n5 - Boulevard's Farmhouse Saison - $2.75" 
                + "\n6 - Gandy Dancer Porter - $1.75");
        beerType = Double.parseDouble(beerTypeStr);
        beerType = theBeerBrand;
        total += beer;
        count++;
    }    

    return total;

}

public double getBeerTotal()
{
    double theTotal;
    theTotal = total; 

    return theTotal;
}

public double calcBeerDisc()
{

    if (numBeers == 6)
        beerDisc = .10;

    else if (numBeers >= 4)
        beerDisc = .05;

    else 
        beerDisc = .00; 

    return beerDisc;
}

public double calcFinalPrice()
{

   double finalPrice;

    finalPrice = total-(total * beerDisc);

    return finalPrice;

} 
```

菜鸟在这里，所以请怜悯。上述程序的要点是收集啤酒的数量（必须是 3-6），为客户提供每种啤酒的选择，计算啤酒的总量，并应用折扣（取决于啤酒的数量）。很简单的东西，但我碰到了一堵砖墙。

我的问题在于计算最终价格。我似乎无法弄清楚为什么 calcBeerTotal 方法中的任何内容都没有传递给我的 calcFinalPrice 方法。我的输出显示啤酒的数量，而不是最终价格。

所以我的主要问题是：我的 calc 方法是否需要某种 setter 和 getter 方法？我尝试了一些 setter 和 getter 方法，但仍然没有得到最终价格（方法位于 calcBeerDisc 上方）。我的编程知识有限，所以请不要变得比我写的更复杂。如果它是除了 setter 和 getter 之外的东西，请远离数组等，因为我也不完全理解它们。任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:58:22.807

重写：

```
import javax.swing.JOptionPane;

public class BeerStoreBP {

private String name;

private double custAge;

private double numBeers = 0;

private double beerDisc = 0;

private double total = 0;

// This only exists in one method.  There is no need for it to be global
//private double beerType = 0;

// This only exists in one method.  There is no need for it to be global    
//private double theBeerBrand;

// This only exists in one method.  There is no need for it to be global    
//private double total = 0;

// This only exists in one method.  There is no need for it to be global
//private double beer = 0;

public void setAge(double theAge)
{
    custAge = theAge;
}

public void setName(String theName)
{
    name = theName;
}

public void setNumBeers(double theNumBeers)
{
    numBeers = theNumBeers;
}

// Your functionality is parsed by your dialog.  There is no need for this.
//public void setBeerType(double theBeerType)
//{
//    beerType = theBeerType;
//}

public double getAge()
{
    return custAge;
}

public String getName()
{
    return name;
}

public double getNumBeers()
{
    return numBeers;
}

public double calcNumBeersValid()
{

    String numBeersStr;

    while (numBeers < 3 || numBeers > 6)
    {
        numBeersStr = JOptionPane.showInputDialog("You must pick 3-6 " +
                                                                "beers");
        numBeers = Double.parseDouble(numBeersStr);
    }

    return numBeers;
}

public double calcBeerPrice(int beerBrand)
{

    final double LAGIMRED = 1.90;  
    final double DESINIPA = 2.00;
    final double BELBEBRN = 1.80;
    final double SCHOATST = 2.50;
    final double BOULFHSAISN = 2.75;
    final double GANDANCPRTR = 1.75;

    double beerPrice;

       if (beerBrand == 1)
           beerPrice = LAGIMRED;

       else if (beerBrand == 2)
           beerPrice = DESINIPA;

       else if (beerBrand == 3)
           beerPrice = BELBEBRN;

       else if (beerBrand == 4)
           beerPrice = SCHOATST;

       else if (beerBrand == 5)
           beerPrice = BOULFHSAISN;

       else 
           beerPrice = GANDANCPRTR;        

       return beerPrice;

}

public void calcBeerTotal()
{
    String beerTypeStr;
    double count = 1;
    double beerPrice;
    // No need to be double
    int beerBrand;

    while (count <= numBeers)
    {    

        beerTypeStr = JOptionPane.showInputDialog("Please choose between " 
                + "these fine selections:\n1 - Lagunitas Imperial Red - " +
                       "$1.90\n2 - Deschutes Inversion IPA - $2.00\n3 - " +
                 "Bell's Best Brown Ale - $1.80\n4 - Schlafly's Oatmeal " +
                 "Stout - $2.50\n5 - Boulevard's Farmhouse Saison - $2.75" 
                + "\n6 - Gandy Dancer Porter - $1.75");
        beerBrand = Integer.parseInt(beerTypeStr);
        beerPrice = calcBeerPrice(beerBrand);
        total += beerPrice;
        count++; 

    }

}

public double getBeerTotal()
{
    return total;
}

public double calcBeerDisc()
{

    if (numBeers == 6)
        beerDisc = .10;

    else if (numBeers >= 4)
        beerDisc = .05;

    else 
        beerDisc = .00; 

    return beerDisc;
}

public double calcFinalPrice()
{

   double finalPrice;

    finalPrice = total-(total * beerDisc);

    return finalPrice;

}

} 
```

它处于工作状态，但我建议您将 UI 部分从此类中取出并将它们包含在其他地方。

# iphone - jQuery 移动标题 iphone safari

> ID：13736658
> 
> 赞同：1
> 
> 时间：2012-12-06T03:50:27.707
> 
> 标签：iphone, jquery-mobile, header, mobile-safari

我的移动网站有一个非常奇怪的问题。

我在网站上使用 jQuery Mobile。它在其他设备上运行良好，但 iPhone Safari 没有正确显示标题。这是 iPhone Safari 中的屏幕 -

![Safari 屏幕](../Images/5b3ab7c6df89c0fc101469980a64f4fc.png)

它应该像以下 -

![安卓屏幕](../Images/c55612dacc6f7facdf36607e93a90920.png)

这是我正在使用的标题代码 -

```
<div data-role="header" data-theme="c" data-tap-toggle="false">

    <div style="height: 40px; border: 0px;" class="ui-header ui-bar-a">

        <a href='#' class='ui-btn-left' data-icon='arrow-l'
            data-direction="reverse"
            onclick="location.href='index.php#mainmenu'; return false;">Back</a>
        <div style="text-align: center;">
            <img src="images/mytechlogy_full_white_text_bigM.png"
                style="width: 200px; padding-top: 5px;" />
        </div>
        <a href="#" class='ui-btn-right' data-icon='home'
            data-iconpos="right"
            onclick="location.href='index.php#mainmenu'; return false;">Home</a>
    </div>

    <div
        style="height: 20px; background: #FF9933; vertial-align: middle; padding: 0px; border: 0px;">
        <span id="page-title"
            style="text-align: left; margin-top: 4px; padding-left: 5px;">My
            Profile</span>
    </div>

</div> 
```

请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:36:30.557

添加 data-position="fixed" 解决了这个问题。

```
<div data-role="header" data-theme="c"
        style="text-align: center; height: 60px;" data-tap-toggle="false" data-position="fixed"> 
```

# facebook-javascript-sdk - 如何使用 FB Javascript SDK 事件订阅

> ID：13736659
> 
> 赞同：1
> 
> 时间：2012-12-06T03:50:44.317
> 
> 标签：facebook-javascript-sdk

我最近为移动网络应用程序实现了 FB Javascript SDK，并且正在使用他们的事件订阅代码：

```
FB.Event.subscribe('auth.statusChange', handleStatusChange); 
```

我注意到当我通过我的应用程序登录 facebook 时调用了 handleStatusChange。但是，如果我打开另一个浏览器选项卡，请转到 facebook.com 并注销该功能不会被调用。

我期待它被调用。我错了吗？我认为此功能的目的是监视不一定在我的应用程序范围内的更改。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T04:04:35.467

> auth.authResponseChange - 当 authResponse 改变时触发

[https://developers.facebook.com/docs/reference/javascript/FB.getAuthResponse/](https://developers.facebook.com/docs/reference/javascript/FB.getAuthResponse/)

这将是当用户添加或删除权限时，在我们的流程中，我们应该为用户提供删除每个权限的权限，并且 authResponse 允许我们进行监控。

# serialization - 分别序列化 boost::graph 的 vertex_descriptor？

> ID：13736662
> 
> 赞同：0
> 
> 时间：2012-12-06T03:51:11.967
> 
> 标签：serialization, boost, graph, stl, map

有什么办法可以`vertex_descriptor`序列`boost::graph`化吗？Boost 确实定义`<boost/graph/adj_list_serialize.hpp>`了序列化整个图形结构，但不是单独定义。

我有一个邻接列表图，其中包含 3dvector（顺便说一下，它代表 X、Y、Z 坐标中的 3d 世界）顶点

```
typedef boost::adjacency_list<
        boost::listS,
        boost::listS,
        boost::undirectedS,
        3dvector>
    Graph;

typedef Graph::vertex_descriptor VertexId;
typedef Graph::edge_descriptor EdgeId; 
```

但是，我还需要为查找保留单独的映射信息，这就是问题所在：boost 不知道如何序列化`VertexId`。它们以这样的方式存储在 STL 映射中：`std::map<string, VertexId>`以便字符串查找可以返回图中的正确顶点，因为 a`vertex_descriptor`本质上是指向图中特定顶点的引用。

我的意图是将图形和地图序列化到一个文件中，但我找不到序列化`vertex_descriptor`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T07:02:51.420

您将需要存储图形和位置（一些向量/顶点列表）。您必须为代表您的顶点的任何内容编写序列化方法。

```
template<typename Archive>
void serialize(Archive &ar, LatLon &loc, const unsigned int /*version*/) {
    ar &loc.latitude &loc.longitude;
} 
```

现在您可以使用以下命令序列化您的图表：

```
std::vector<LatLon> locations; // or a list
archive & graph & locations; 
```

`graph`adjencency_list在哪里，`locations`是 LatLon 类/结构的向量/列表。我认为 boost 已经知道如何处理列表/向量。

# php - 试图将数组插入数据库...（implode（） [function.implode]：传递的参数无效）

> ID：13736663
> 
> 赞同：0
> 
> 时间：2012-12-06T03:51:41.503
> 
> 标签：php, mysql

我有一个选择输入，您可以在其中选择多个选项。不幸的是，我不知道如何将选择的值插入到我的数据库中。这是我试图使用的代码，它给了我一个无效的参数，因为我试图内爆它。

谢谢你的帮助...

这是我的php：

```
 $distribs = implode("|", $_POST["distributors"]); 
$distribs  = mysql_real_escape_string($distribs ); 

$distribs = mysql_real_escape_string($_POST['distributors']);
$sql="UPDATE customers SET distributors = '$distribs'
                                            WHERE id='$id'"; 
```

这是我的选择：

```
 echo "<select name='distributors' multiple='multiple'>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:01:14.633

试试这样

```
echo "<select name='distributors[]' multiple='multiple'>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T04:02:40.013

`$_POST["distributors"];`不是数组，`implode();` 需要数组才能运行，

[PHP.net 函数 implode();](http://uk1.php.net/manual/en/function.implode.php)

如果您`$_POST`的数组格式正确；然后 implode 会将数组转换为单个字符串。

如果您的 $_POST 包含来自 a 的信息，`<select> </select>`则提交将是一个字符串，可以将其插入数据库而无需您的`implode();`函数。

如果您确定您的 $_POST 是以数组格式提交的。按照 *DeDav*的 建议使用。

填充 $_POST 后运行此命令。

> print_r($_POST['经销商'])

如果您使用多项选择。再次使用*DeDav*建议：

`echo "<select name='distributors[]' multiple='multiple'>";`

# titanium - 我无法在 Titaniums Titanium.Media.createVideoPlayer AP 中播放我的视频

> ID：13736664
> 
> 赞同：1
> 
> 时间：2012-12-06T03:51:55.007
> 
> 标签：titanium

在 Android 2.2 中使用 Titanium.Media.createVideoPlayer API 无法使用 Ti.UI.currentWindow 在 Titanium 2.1.2 中播放视频。

```
/**
 * @author David
 */

var win = Ti.UI.currentWindow;
//var win = Ti.UI.createWindow({});

var contentURL = "http://assets.appcelerator.com.s3.amazonaws.com/video/media.m4v";

var openButton = Ti.UI.createButton({
    title : "Start Video",
    top : "0dp",
    height : "40dp",
    left : "10dp",
    right : "10dp"
});

openButton.addEventListener('click', function() {
    var activeMovie = Titanium.Media.createVideoPlayer({
        url : contentURL,
        backgroundColor : 'blue',
        movieControlMode : Titanium.Media.VIDEO_CONTROL_DEFAULT,
        scalingMode : Titanium.Media.VIDEO_SCALING_ASPECT_FILL,
        fullscreen : true,
        autoplay : true
    });

    var closeButton = Ti.UI.createButton({
        title : "Exit Video",
        top : "0dp",
        height : "40dp",
        left : "10dp",
        right : "10dp"
    });

    closeButton.addEventListener('click', function() {
        activeMovie.hide();
        activeMovie.release();
        activeMovie = null;
    });

    activeMovie.add(closeButton);
});
win.add(openButton); 
```

# php - 在下拉选择框中显示从 mySQL 返回的特殊字符

> ID：13736666
> 
> 赞同：3
> 
> 时间：2012-12-06T03:52:13.903
> 
> 标签：php, html

我试图在从 mySQL (utf8_general_ci) 拉出的下拉框中显示 utf8 字符，这些字符返回为带有 ? 在中间。

我试过 htmlspecialchars 和 htmlentities。它返回一个空白字符串。站点的字符集也设置为 utf-8。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T03:56:06.307

尝试使用[utf8_encode()](http://php.net/manual/en/function.utf8-encode.php)函数，看看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:20:54.107

```
$inn_qu=mysql_query("select * from catagory where ct_id='$id' order by c_id");
      while($re=mysql_fetch_array($inn_qu)){
          $trs=get_html_translation_table(HTML_ENTITIES);
          $str=$re['c_rate'];
          $encode=strtr($str,$trs) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-10T09:30:36.490

设置服务器的字符集：

```
mysql> SET character_set_database = 'utf8mb4';
mysql> SET character_set_server = 'utf8mb4'; 
```

查看与字符集相关的所有 MySQL 变量：

* * *

```
mysql> SHOW VARIABLES LIKE '%character_set%'; 
```

* * *

要更改[PHP](https://www.php.net/manual/en/mysqli.set-charset.php)应用程序中的字符集：

```
/* change character set to utf8mb4 */
if (!($mysqli->[set_charset][1]("utf8mb4")))
{
    printf("Error loading character set utf8mb4: %s\n", $mysqli->error);

    exit();
}
else
{
    printf("Current character set: %s\n", $mysqli->character_set_name());
} 
```

参考：

*   [https://dba.stackexchange.com/questions/207437/cant-set-up-unicode-support](https://dba.stackexchange.com/questions/207437/cant-set-up-unicode-support)
*   [https://www.php.net/manual/en/mysqli.set-charset.php](https://www.php.net/manual/en/mysqli.set-charset.php)

# javascript - Facebook点赞按钮评论框

> ID：13736672
> 
> 赞同：0
> 
> 时间：2012-12-06T03:52:42.270
> 
> 标签：javascript, facebook, facebook-javascript-sdk, facebook-social-plugins

我在使用 Facebook 按钮时遇到问题

1.  通过附加 id 创建一个动态 URL
2.  将此 URL 应用于 Facebook 喜欢按钮
3.  当用户按下喜欢按钮时，它会在 og:meta 标签中显示带有 outdata 的空白评论框
4.  刷新页面并单击“喜欢”按钮后，它会显示 og:meta 标签详细信息

我正在使用 XFBML 版本，当我将生成的 URL 放入 Facebook 调试器时，它会显示正确的信息。

# asp.net-mvc-3 - 无法更新 MVC3 模型 - InvalidOperationException

> ID：13736675
> 
> 赞同：1
> 
> 时间：2012-12-06T03:53:00.170
> 
> 标签：asp.net-mvc-3

一般来说，我对编程很陌生。我有一个数据库，里面有 3 个表。一个`User`外键为`TypeID`空的表`Login`，一个外键为`UserID`空且不为空的表，以及`TypeID`一个作为主键的表。当我尝试更新我的实体模型时，我收到一个.`Types``TypeID``Invalid InvalidOperationException`

```
at System.Data.Objects.ObjectStateManager.ChangeObjectState(Object entity, EntityState entityState)
at MBMVCApplication.Controllers.LoginController.Edit(Users user, Int32 TypeID) in C:\Development\MBMVCApplication\Controllers\LoginController.cs:line 130
at lambda_method(Closure , ControllerBase , Object[] )
at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12()
at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) 
```

**代码**

```
[HttpPost]
public ActionResult Edit(Login login, int? typeID)
{
    if (ModelState.IsValid)
    {
        db.Logins.Attach(login);
        //TypeID display on a dropdown box
        //I also remove the two line below and still get the error
        login.User.TypeID = typeId.Value;
        db.ObjectStateManager.ChangeObjectState(login, EntityState.Modified); //The error occurs here or 
        db.SaveChanges(); //Here
        return RedirectToAction("Index");
    }

    ViewBag.UserID = new SelectList(db.Users, "UserID", "FirstName", login.UserID);
    ViewBag.TypeID= new SelectList(db.Types, "TypeID", "Description", login.TypeID);

    return View(login);
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-05T01:51:49.027

我不得不手动更新每个表。我运行了一个查询来获取主 ID；然后，我为模型创建了一个新对象，传递从视图中选择的所有值，并使用主键更新表。任何具有与该表关联的外键的表都必须手动更新。这很耗时，可能效率不高，但它恰好是解决方法。

# cocos2d-iphone - 使用 cocosbuilder 构建的 CCMenuItemImage 无法调用我的方法

> ID：13736679
> 
> 赞同：1
> 
> 时间：2012-12-06T03:53:48.893
> 
> 标签：cocos2d-iphone

所以我在我的 cocosbuilder 项目中用 cocosbuilder 构建了一个 CCMenuItemImage 并在以后的项目中使用它。但是，从不调用响应方法。![在此处输入图像描述](../Images/5e48113f02b8b0ac5d747e18b6804afb.png)

![在此处输入图像描述](../Images/4cb987173adacdd4a9e90b52da47aace.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T10:59:42.060

转到“文档”菜单并确保未选中“JavaScript 控制”。

我真的很难受。CCBControlButtons 调用了它们的选择器，但 CCMenuItemImages 没有。更改了该设置，它现在可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T13:45:08.073

well, that's happened to me too...

the solution is first, u have to press enter after u've typed the selector field..

secondly, u have to publish (I do more than once).

for your info.... when u saved cocosbuilder project (cmd + s), u will not save the entire project... u'll only save current scene....

so, just in case u should save and publish on every scene u worry..

last tip (i don't know the different though), I chose document root (not owner ) :D

may this tips help you bro!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T11:45:11.513

您没有提供太多让我们能够提供帮助的信息。但是，我最近对我的应用程序做了同样的事情，所以也许我可以给你一些关于在哪里看的想法。首先，CCMenu 是它自己的根节点（单独的文件）还是 CocosBuilder 文件中 CCLayer 的子节点？

在第一个场景中，CCMenu（和 CCMenuItemImage）是一个单独的节点文件，然后您可以使用以下语句将其链接到您的游戏层代码：

```
CCMenu *menu = [CCBReader nodeGraphFromFile:@"filename.ccbi" owner:self]; 
```

然后在 Cocosbuilder 程序中，键入 CCMenuItemImage 链接到的方法的名称，确保选择**“Owner”**而不是“Document root”。

第二种情况是您的 Cocosbuilder 文件是 CCLayer，而 CCMenu 是该层的子层，这可能是更可能的情况。如果您成功加载了 ccb 文件

```
CCScene *scene = [CCBReader sceneWithNodeGraphFromFile:@"filename.ccbi"]; (might need to double-check that one, I am not at my XCode) 
```

然后，在 Cocosbuilder 中，当您键入 CCMenuItemImage 方法名称时，选择**“Document Root”**以将其链接到您的代码。

然后在你的游戏层的代码中，你应该有和你在 Cocosbuilder 中输入相同的方法。所以如果你的游戏层的方法是：

```
-(void)pressedButton:(id)sender {
   CCLOG(@"Button pressed!");
} 
```

然后你需要有相同的方法

```
pressedButton: 
```

链接到 Cocosbuilder 中的那个按钮。

希望这可以帮助。

# asp.net-mvc - 传递列表 到使用浏览器栏的 MVC Web API 方法

> ID：13736680
> 
> 赞同：24
> 
> 时间：2012-12-06T03:53:50.490
> 
> 标签：asp.net-mvc, asp.net-web-api

我有一个接受 a`List<string>`作为参数的 MVC Web API Get 方法。我正在尝试仅使用浏览器栏来访问此方法。这是怎么做到的？使用`../APIName?parameter1=value1&parameter2=value2&...`在两个与号之间传递单个参数，而不是列表。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-06T05:13:56.793

1.  确保您的操作方法的参数被标记为 [FromUri]。默认情况下，该值应从请求的主体中传递，因为它是一种复杂类型。

    ```
    public List<string> Get([FromUri] List<string> parameter)
    {...} 
    ```

2.  查询字符串参数应该是这种格式`.../APIName?parameter[]=value1&parameter[]=value2&...`。

希望这可以帮助。

# iphone - 使用 segue 将 NSMutableArray 字典数据传递到另一个视图

> ID：13736682
> 
> 赞同：0
> 
> 时间：2012-12-06T03:53:53.390
> 
> 标签：iphone, objective-c, ios, cocoa, tableview

我有这样的代码：在`.m`

```
 - (void)viewDidLoad
            {
            [super viewDidLoad];

        arrReceipes = [[NSMutableArray alloc] init];
        arrReceipesTime1 = [NSArray arrayWithObjects:@"Half an hour or less",@"About an hour",@"More than an hour", nil];
        NSDictionary *arrReceipeTime1Dict = [NSDictionary dictionaryWithObject:arrReceipesTime1 forKey:@"Find Recipes"];
        arrReciepHeart = [NSArray arrayWithObjects:@"HealthyAndDelicius", nil];
        NSDictionary *arrRecipesHeartDict = [NSDictionary dictionaryWithObject:arrReciepHeart forKey:@"Find Recipes"];
        arrRecipeLifestyle = [NSArray arrayWithObjects:@"Recipe for fall",@"Quick and easy",@"Cooking for kids",@"Easy entertaining",@"American classics", nil];
        NSDictionary *arrRecipeLifestyleDict = [NSDictionary dictionaryWithObject:arrRecipeLifestyle forKey:@"Find Recipes"];

        [arrReceipes addObject:arrReceipeTime1Dict];
        [arrReceipes addObject:arrRecipesHeartDict];
        [arrReceipes addObject:arrRecipeLifestyleDict];
   } 
```

现在，我想`addObject:dictionaryObject`使用 segue（或任何其他方式，如果你知道的话）将值从“arrReceipes”（我正在做“”）传递到另一个视图控制器

并使用“segue”我正在使用以下内容：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
    {
    if ([segue.identifier isEqualToString:@"showRecipeDetail"]) {
        NSIndexPath *indexPath = [self.tableView1 indexPathForSelectedRow];
       RecipeDetailViewController *destViewController = segue.destinationViewController;

       destViewController.recipeName = [arrReceipes objectAtIndex:indexPath.row];

    }

    } 
```

我遇到了异常，因为我的“arrReceipes”被`NSMutableArray`分配了字典对象。如果使用“ `NSMutableArray`”，则如果我使用“ `NSArray`”，则它工作正常。但我想用“ `NSMutableArray`”；因为有了这个我可以在表格视图中进行分组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T19:05:07.097

可能你想要

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"showRecipeDetail"]) {
        NSIndexPath *indexPath = [self.tableView1 indexPathForSelectedRow];
        RecipeDetailViewController *destViewController = segue.destinationViewController;

        destViewController.recipeName = arrReceipes[indexPath.section][@"Find Recipes"][indexPath.row];
} 
```

这与

```
destViewController.recipeName = [[[arrReceipes objectAtIndex:indexPath.section] valueForKey:@"Find Recipes"] objectAtIndex:indexPath.row]; 
```

# algorithm - 如何在没有额外堆内存的情况下循环移动数组？

> ID：13736683
> 
> 赞同：3
> 
> 时间：2012-12-06T03:54:00.833
> 
> 标签：algorithm

如何编写函数`shift(int* arr, int k)`将数组循环移位某个整数 k？我不能从堆中说“malloc”内存。

例如，使用伪代码、`shift([1, 2, 3, 4], 2)`返回`[3, 4, 1, 2]`和`shift([3, 1, 5, 5], 103)`返回`[1, 5, 5, 3]`。我尝试过使用模数来实现这种效果，如这个 Java 程序所示，其中我基本上迭代了一半的数组并交换值。

```
public static int* shift(int* arr, int k) {
  int half_array_len = arr.length / 2;
  for (int i = 0; i < half_array_len; ++i) {
    // Swap!
    int newIndex = (i + k) % arr.length;
    int temp = arr[i];
    arr[i] = arr[newIndex];
    arr[newIndex] = arr[i];
  }
  return arr;
} 
```

但是，我相信这个函数只适用于偶数长度的数组。

如何实现`shift`任意长度的数组？答案可以是您想要的任何语言（Java、C++、[Ook Ook!](http://esolangs.org/wiki/Ook!)等）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T04:10:18.770

（之前被问过几次。）基本上，Bentley 的“编程珍珠”（Juggling、Reversal 和 Block Swap 算法）中描述和分析了三种专门解决这个问题的经典就地算法。这些幻灯片对它们进行了足够详细的描述

[http://www.cs.bell-labs.com/cm/cs/pearls/s02b.pdf](http://www.cs.bell-labs.com/cm/cs/pearls/s02b.pdf)

最简单的算法是反转算法。只需反转整个数组，然后分别反转每个 [n - k] 和 [k] 块。完毕。（从哪一端开始计算 [k] 块取决于移位的方向。）

当然，标准化第一个是有意义的`k`，即`k = k % n`确保`k`小于`n`。

PS 在 C++ 中，答案是使用`std::rotate`，这正是你想要的。但我怀疑这是你寻求的答案。尽管您可能想查看一些实现`std::rotate`（如果只是发现它们通常使用 Reversal 算法 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T04:04:01.757

我假设您的意思是您只能使用恒定数量的额外空间来执行此功能。可以`O(n*(k mod n))`使用以下算法（Python）及时完成一个温度：

```
def shift_one(array):
    temp = array[-1] #put last element of array in a temp
    for i in range(len(array)-1)[::-1]:
        array[i+1] = array[i] #put each element in the next slot
    array[0] = temp #then put the temp at the beginning
    return array

def shift(array, k):
    for i in range(k%len(array)):
        array = shift_one(array)
    return array 
```

如果您实际上不受限于恒定的额外空间，则可以使用以下算法及时使用`k`额外空间来做到这`O(n)`一点（几乎相同）：

```
def shift(array, k):
    k = k % len(array) #shifting by len(array) does nothing
    temp = array[-k:] #copy out the last k elements
    for i in range(len(array)-k)[::-1]:
        array[i+k] = array[i]
    array[:k] = temp
    return array 
```

此外，如果您有像 Python 中的列表可以做的比数组更多的列表，那么有一个非常简单的解决方案：

```
def shift(array, k):
    #take the last k elements and put them at the front
     return array[-k:]+array[:-k] 
```

# java - 用 Java 替换 Host 文件

> ID：13736684
> 
> 赞同：1
> 
> 时间：2012-12-06T03:54:15.827
> 
> 标签：java, windows, file, host, access-denied

到目前为止，这是我的代码，是的，我知道它非常基本。但我想要完成的是替换位于 System32\drivers\etc 文件夹中的主机文件，我在这样做时遇到的问题是我收到拒绝访问错误。如何让程序访问以在 windows 文件夹中进行更改，SaveURL 类也只是下载文件并使用两个字符串通过函数 saveImage 传递名称和下载位置。我怎样才能给自己访问权限？在此先感谢我真的很感激。

```
private void jButton7MouseClicked(java.awt.event.MouseEvent evt) {                                      
        String destinationHosts = "hosts";
        String urlHosts = "https://dl.dropbox.com/s/awdvoprxyo7r2q6/hosts?dl=1";
        Object hostOptions[] = {"Replace", "Close"};
        File fileHosts = new File(destinationHosts);
        File dirHost = new File("hosts");
        boolean dirHosts = dirHost.mkdir();
        try {
            Runtime.getRuntime().exec("notepad.exe \\Windows\\system32\\drivers\\etc\\hosts");
            jTextArea2.append("Opening Host File \n");
            int hostFile = JOptionPane.showOptionDialog(rootPane, "Would you like to replace the Hosts File?",
                    "Yes or No", JOptionPane.YES_NO_OPTION, JOptionPane.NO_OPTION, null, hostOptions, hostOptions[0]);
            if (hostFile == JOptionPane.YES_NO_OPTION) {
                jTextArea2.append("Downloading New Host File");
                SaveUrl.saveImage(urlHosts, destinationHosts);
                fileHosts.renameTo(new File(dirHost, fileHosts.getName()));
                Path source = Paths.get("\\hosts\\hosts");
                Path target = Paths.get("\\Windows\\system32\\drivers\\etc\\");
                Files.copy(source, target);
                jTextArea2.append("Host file replaced");
            }
        } catch (IOException ex) {
            Logger.getLogger(ToolKit1.class.getName()).log(Level.SEVERE, null, ex);
        }
    } 
```

# javascript - Javascript 中的 Var 声明

> ID：13736689
> 
> 赞同：0
> 
> 时间：2012-12-06T03:54:44.163
> 
> 标签：javascript

我不明白`var a = [], i`这里。如何既`a`可以声明为数组又可以声明 i 的类型是什么？

```
 // Source: Javascript: The Good Parts, p. 63
    Array.dim = function (dimension, initial) {
         var a = [], i;
         for(i = 0; i< dimension; i +=1)
         {
            a[i] = initial;   
         }
        return a;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T03:56:10.153

这意味着（分别）声明两者 - 不声明它们相等

与以下内容相同：

```
var a = [];
var i; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T03:59:25.007

以下代码：

```
var a = [], i; 
```

与此代码完全相同**：**

```
var a = [];
var i; 
```

它的意思是：

1.  `a`是一个空数组
2.  `i`是一个未初始化的 var

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T03:58:09.760

Javascript 变量没有类型。

`a`被*初始化*为一个数组；`i`根本没有初始化。

没有什么能阻止你以后写作

```
a = 42;
i = ["Hi", "there!"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T04:05:26.950

Javascript 变量没有任何类型。这里 a 被初始化为一个数组

```
var a = []; //Same as var a= new Array(); 
```

我可以有任何价值

```
var i = 0;// Here it is an integer
i = "Hello";// String. Type changed to string. But it is not a good practice 
```

读取[JavaScript 变量和数据类型](http://www.tutorialspoint.com/javascript/javascript_variables.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T04:01:49.267

`var a = [], i`字面意思是***将 a 定义为数组并将 i 定义为变量***。实际上没有分配给 i。

例如：

```
var a = 5,
    b = 8,
    c = "string"; 
```

这基本上允许您定义 3 个变量，而不必使用 var 一词 3 次。速记 JavaScript。

在使用变量之前定义变量可以防止在变量不存在时出错，从而使函数更加可靠。例如，不将 x 定义为变量将导致：

```
if(x) { /* native code */ } 
```

抛出错误但是：

```
if(window.x) { /* native code */ } 
```

不会，因为它会检查存储所有全局变量的 x 窗口对象。

# javascript - Javascript Fizzbuzz 问题

> ID：13736690
> 
> 赞同：1
> 
> 时间：2012-12-06T03:55:17.463
> 
> 标签：javascript, fizzbuzz

我正在尝试做一些简单的测试来帮助进一步了解我的 javascript 知识（这很新鲜）。目标 1 是打印 1-100 不能被 5 或 3 整除的数字。

我尝试了以下方法：

```
for (var i = 1; i <= 100; i ++) 
{
    if (i%3 !== 0 || i%5 !== 0){
        console.log(i);
    }

} 
```

这记录了 1-100 的每个数字，我不知道为什么。可能是这里最简单的问题，但它让我很头疼！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T04:00:42.980

我想你的意思是`&&`，不是`||`。使用`||`，您基本上是在测试该数字是否不能被 3 或 5 整除 - 只有当一个数字可以被两者整除时，您才会拒绝它（换句话说，是 15 的倍数）。

FizzBu​​zz 的典型答案是：

```
if( i%3 == 0 && i%5 == 0) FizzBuzz
elseif( i % 3 == 0) Fizz
elseif( i % 5 == 0) Buzz
else number 
```

因此，要直接获取您需要为`i%3==0`假和`i%5==0`为假的数字。因此，你想要`if( i%3 !== 0 && i%5 !== 0)`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-02T00:13:00.107

我攻击这个的方法和 Niet the Dark Absol 一样：

```
for (var n = 1; n <= 100; n++) {
    if (n % 3 == 0 && n % 5 == 0)
        console.log("FizzBuzz");
    else if (n % 3 == 0)
        console.log("Fizz");
    else if (n % 5 == 0)
        console.log("Buzz");
    else
            console.log(n);
} 
```

但是，您也可以这样做：

```
for (var n = 1; n <= 100; n++) {
    var output = "";
    if (n % 3 == 0)
        output += "Fizz";
    if (n % 5 == 0)
        output += "Buzz";
    console.log(output || n);
} 
```

对我来说，学习 JavaScript（或任何语言）最困难的部分之一是理解解决方案可以通过多种方式实现。我更喜欢第一个示例，但继续思考并查看其他选项总是好的。

# java - 创建具有随机整数的多维数组

> ID：13736691
> 
> 赞同：1
> 
> 时间：2012-12-06T03:55:38.533
> 
> 标签：java, arrays

我最初想说谢谢你花时间看我的帖子。基本上，我尝试使用 Math.random 创建一个带有随机整数的多维数组。代码编译并不断返回空指针异常错误消息。我不知道我在创建对象时做错了什么。谁能告诉我代码有什么问题？

```
public Table(int r, int c)
    {
        rows = r;
        columns = c;

        for (int i = 0; i < r; i++)
            for (int j = 0; j < c; j++)
                {
                    /*
                    * Here is where the error keeps returning, blueJ keeps pointing
                    * me to this line of code and it has to be the variables I am using
                    * in the array that are causing the issue. The only issue is I                       * don't know what to insert for that.
                    */
                    theTable[i][j] = (int)(100*Math.random());
                }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T03:59:28.547

您在代码中的哪个位置初始化表？那可能是那条线上唯一为空的东西。确保在声明 theTable 的地方也定义了它：

```
private int[][] theTable = new int[r][c] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T03:59:32.450

添加：

```
int[][] theTable = new int[r][c]; 
```

就在`for`循环之前，如果您希望它在方法中是本地的。如果您希望它成为该类的成员，请添加

```
private int[][] theTable = new int[r][c]; 
```

在您的班级中名列前茅。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T04:06:16.657

您既没有声明也没有初始化`theTable`，所以对于 Java，它不存在。当您尝试在 Java 中使用不存在的对象时，您将收到空指针异常。已经有正确的答案可以解决您的问题。我建议你使用他们的代码。durron597 的特别清晰/好。

# .net - FormatException 未处理 vb.net

> ID：13736693
> 
> 赞同：2
> 
> 时间：2012-12-06T03:55:47.097
> 
> 标签：.net, vb.net, winforms, exception, datagridview

这可能是一个很长的问题，但请耐心等待。

我`Datagridview1`对`Form1`列有意见`BranchCode("cells(2) ,FormCode("cells(3)")), Quantity("cells(5)")`

现在让我们说这就是它的样子

**DGV1**

```
 BranchCode | FormCode | Quantity
     001         Frm1       10
     002         Frm2      -10
     001         Frm1       20 
```

现在在 DGV2 上，假设我有一个具有相同分支代码和表单代码的数据

**DGV2**

```
BranchCode | FormCode | Quantity
    001        Frm1        50
    002        Frm2        50 
```

现在下面的代码循环然后在添加之前`DGV1`总结所有`Quantity`相同 的`FormCode and BranchCode``DGV2`

例如：**DGV1 结果**

```
BranchCode | FormCode | Quantity
    001        Frm1        30
    002        Frm2       -10 
```

然后将其添加到 DGV2 后，这将是结果

**DGV 2 结果**

```
BranchCode | FormCode | Quantity
    001        Frm1        80
    002        Frm2        40 
```

**代码**

```
For Each xRows In MDIAdjustment.oTransferRows.Where(Function(x) x.Cells("GVPosted").Value.ToString() = "No")

      If (occurences.ContainsKey(xRows.Cells(3).Value.ToString())) Then

          occurences(xRows.Cells(3).Value.ToString()).Quantity = Double.Parse(occurences(xRows.Cells(3).Value.ToString()).ToString()) + Double.Parse(xRows.Cells(5).Value.ToString())

               Else

                    occurences.Add(xRows.Cells(3).Value.ToString(), New CustomValues2 With {.Code = xRows.Cells(3).Value.ToString(), .Branch = xRows.Cells(2).Value.ToString(), .Description = xRows.Cells(4).Value.ToString(), .Quantity = Double.Parse(xRows.Cells(5).Value.ToString()) })  

               End If

     Next 
```

宣言`occurences dictionary`

```
Dim occurences As New Dictionary(Of String, CustomValues2)

Class CustomValues2 

Public Property Code() As String 
Public Property Branch() As String 
Public Property Description() As String 
Public Property Quantity() As Double 

End Class 
```

问题是，当我只使用正整数进行计算时，我没有问题，但是当我开始添加负数时，我在这一行出现错误

```
 occurences(xRows.Cells(3).Value.ToString()).Quantity = Double.Parse(occurences(xRows.Cells(3).Value.ToString()).ToString()) + Double.Parse(xRows.Cells(5).Value.ToString()) 
```

说`FormatException was Unhandled" Input string was not in a correct format`

对不起，对于长篇文章，我已经尝试过做一些事情，但他们并没有消除错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:23:34.057

将您的错误行更改为：

```
occurences(xRows.Cells(3).Value.ToString()).Quantity = occurences(xRows.Cells(3).Value.ToString()).Quantity + Double.Parse(xRows.Cells(5).Value.ToString()) 
```

您需要添加到数量属性，因此您需要获取其当前值。

# javascript - 在 javascript 中解压 GVariant

> ID：13736695
> 
> 赞同：1
> 
> 时间：2012-12-06T03:55:51.847
> 
> 标签：javascript, gobject, gnome-3, gnome-shell-extensions, gjs

我在 GSettings 中有一个存储为 GVariant 类型`a(ss)`的数组，我想在 Cinnamon Applet 中使用它。我可以使用以下代码成功检索该值：

```
let schema = schema_source.lookup(SCHEMA_NAME, false);
let settings = new Gio.Settings({ settings_schema: schema });
let my_value = settings.get_value('myvalue'); 
```

但我无法打开它。据我所知，我可能需要使用`GVariantIter`结构对其进行解包，但文档有限，而且我在 gjs API 中找不到正确的接口（如果确实存在的话）。有谁知道该怎么做？

谢谢！

**编辑：** 我的架构如下所示：

```
<key type="a(ss)" name="myvalue">
    <default>[]</default>
    <summary>an array of (string, string) tuples</summary>
    <description></description>
</key> 
```

目前我正在使用外部`JSON`文件来存储设置，但这并不是 100% 令人满意的解决方案。我想我可以维护两个`as`-type 变量，并保持它们对齐，但是必须有一种方法可以正确地做到这一点，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-11T12:23:37.313

有点晚了，但`my_value.unpack()`工作得很好。

`my_value.deep_unpack()`将递归解包数组及其元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T15:29:44.697

根据您的设置类型，我猜您想存储/检索字符串数组？在这种情况下，有一种更简单的方法[`Gio.Settings.get_strv(String key)`](http://www.roojs.org/seed/gir-1.2-gtk-3.0/seed/Gio.Settings.html)：

```
// Read the array (will create a real JS array):
let string_array = settings.get_strv("myvalue");
// Now do something with it...
// Store it:
settings.set_strv("myvalue", string_array);
Gio.Settings.sync(); // Important! 
```

在您的架构中，您将包含如下条目：

```
<key name="myvalue" type="as">
  <default>[]</default>
  <summary>Some array.</summary>
  <description>An Array of strings.</description>
</key> 
```

我在我的扩展中使用了相同的技术：[读/写](https://bitbucket.org/LukasKnuth/backslide/src/b9a565e6649ea461db4a907ca78c1eada82d656d/backslide@codeisland.org/settings.js?at=master#cl-132)| [架构](https://bitbucket.org/LukasKnuth/backslide/src/b9a565e6649ea461db4a907ca78c1eada82d656d/backslide@codeisland.org/schemas/org.gnome.shell.extensions.backslide.gschema.xml?at=master#cl-16)

# wpf - WPF：如何使用 ScrollBar 滚动 Grid？

> ID：13736705
> 
> 赞同：0
> 
> 时间：2012-12-06T03:56:52.413
> 
> 标签：wpf, grid, scrollbar

我知道您可以将 Grid 包装在 ScrollViewer 中，并且滚动会自动进行。但是，我想在网格周围制作自己的滚动条。到目前为止，当我在网格中移动时，我设法将滚动条与网格同步。但是，当我单击滚动条时，我找不到 Grid 的属性或方法使其滚动。我确信这是可行的，因为 SchollViewer 已经在这样做了。非常感谢您的提示。

更新：事实上，我想要的是创建一个类似控件的 Excel 电子表格。我使用网格布局创建了电子表格，它似乎工作正常。但是，我在滚动时遇到了问题。在 Grid 周围添加 ScrollViewer 将使整个 Grid 滚动。但是，我希望能够冻结某些行和/或列的滚动。此外，使用 ScrollViewer，水平滚动条覆盖整个底部。但是，就像在 Excel 中一样，我想留出一些空间来添加一些选项卡。这是否可能仅通过重新设置 ScrollViewer 的样式？

我在[http://social.msdn.microsoft.com/Forums/en/wpf/thread/e495a0cb-0104-4475-8627-3b40cd617fc1](http://social.msdn.microsoft.com/Forums/en/wpf/thread/e495a0cb-0104-4475-8627-3b40cd617fc1)找到了一个帖子，该帖子建议将网格拆分为多个子网格以实现冻结标题。但是，如果您有很多列，则效果不佳。此外，这种方法不够灵活，无法让用户选择冻结区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T03:53:23.560

样式化滚动条可能有点棘手，但我有一种风格可以让你开始（基于表达式风格），你可以删除你不需要/想要的位并更改颜色等。

Scollbar 样式示例：

```
<Color x:Key="MainColor">#FF595959</Color>
<Color x:Key="BlackColor">#FF000000</Color>
<Color x:Key="WhiteColor">#FFFFFFFF</Color>

<SolidColorBrush x:Key="NormalBrush" Color="{StaticResource MainColor}" />
<SolidColorBrush x:Key="NormalBorderBrush" Color="#FF393939" />
<SolidColorBrush x:Key="GlyphBrush" Color="#FFD1D1D1" />

<LinearGradientBrush x:Key="PressedBrush" EndPoint="0.5,0.971" StartPoint="0.5,0.042">
    <GradientStop Color="#4C000000" Offset="0" />
    <GradientStop Color="#26FFFFFF" Offset="1" />
    <GradientStop Color="#4C000000" Offset="0.467" />
    <GradientStop Color="#26FFFFFF" Offset="0.479" />
</LinearGradientBrush>

<Style TargetType="{x:Type RepeatButton}" BasedOn="{x:Null}">
    <Setter Property="Background" Value="{DynamicResource NormalBrush}" />
    <Setter Property="BorderBrush" Value="{DynamicResource NormalBorderBrush}" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type RepeatButton}">
                <ControlTemplate.Resources>
                    <Storyboard x:Key="HoverOn">
                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="(UIElement.Opacity)">
                            <SplineDoubleKeyFrame KeyTime="00:00:00.1000000" Value="0.8"/>
                        </DoubleAnimationUsingKeyFrames>
                    </Storyboard>
                    <Storyboard x:Key="HoverOff">
                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="(UIElement.Opacity)">
                            <SplineDoubleKeyFrame KeyTime="00:00:00.3000000" Value="0.3"/>
                        </DoubleAnimationUsingKeyFrames>
                    </Storyboard>
                    <Storyboard x:Key="PressedOn">
                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="(UIElement.Opacity)">
                            <SplineDoubleKeyFrame KeyTime="00:00:00.1000000" Value="0.1"/>
                        </DoubleAnimationUsingKeyFrames>
                    </Storyboard>
                    <Storyboard x:Key="PressedOff">
                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="ContentPresenter" Storyboard.TargetProperty="(UIElement.Opacity)">
                            <SplineDoubleKeyFrame KeyTime="00:00:00.3000000" Value="0.3"/>
                        </DoubleAnimationUsingKeyFrames>
                    </Storyboard>
                </ControlTemplate.Resources>
                <Grid>
                    <Border x:Name="Border" BorderThickness="{TemplateBinding BorderThickness}" Opacity="1" />
                    <ContentPresenter HorizontalAlignment="Center" x:Name="ContentPresenter" VerticalAlignment="Center" Content="{TemplateBinding Content}" ContentTemplate="{TemplateBinding ContentTemplate}" ContentTemplateSelector="{TemplateBinding ContentTemplateSelector}" Opacity="0.3" Height="Auto" />
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsKeyboardFocused" Value="true" />
                    <Trigger Property="IsMouseOver" Value="true">
                        <Trigger.ExitActions>
                            <BeginStoryboard Storyboard="{StaticResource HoverOff}" x:Name="HoverOff_BeginStoryboard"/>
                        </Trigger.ExitActions>
                        <Trigger.EnterActions>
                            <BeginStoryboard Storyboard="{StaticResource HoverOn}"/>
                        </Trigger.EnterActions>
                    </Trigger>
                    <Trigger Property="IsPressed" Value="true">
                        <Trigger.ExitActions>
                            <BeginStoryboard Storyboard="{StaticResource PressedOff}" x:Name="PressedOff_BeginStoryboard"/>
                        </Trigger.ExitActions>
                        <Trigger.EnterActions>
                            <BeginStoryboard Storyboard="{StaticResource PressedOn}" x:Name="PressedOn_BeginStoryboard"/>
                        </Trigger.EnterActions>
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="false">
                        <Setter Property="Opacity" TargetName="ContentPresenter" Value="0.1"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<Style x:Key="NuclearThumbStyle" TargetType="{x:Type Thumb}" BasedOn="{x:Null}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Thumb}">
                <ControlTemplate.Resources>
                    <Storyboard x:Key="HoverOn">
                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="HoverRectangle" Storyboard.TargetProperty="(UIElement.Opacity)">
                            <SplineDoubleKeyFrame KeyTime="00:00:00.1000000" Value="0.8"/>
                        </DoubleAnimationUsingKeyFrames>
                    </Storyboard>
                    <Storyboard x:Key="HoverOff">
                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="HoverRectangle" Storyboard.TargetProperty="(UIElement.Opacity)">
                            <SplineDoubleKeyFrame KeyTime="00:00:00.3000000" Value="0.3"/>
                        </DoubleAnimationUsingKeyFrames>
                    </Storyboard>
                    <Storyboard x:Key="PressedOn">
                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="PressedRectangle" Storyboard.TargetProperty="(UIElement.Opacity)">
                            <SplineDoubleKeyFrame KeyTime="00:00:00.1000000" Value="0.1"/>
                        </DoubleAnimationUsingKeyFrames>
                    </Storyboard>
                    <Storyboard x:Key="PressedOff">
                        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="PressedRectangle" Storyboard.TargetProperty="(UIElement.Opacity)">
                            <SplineDoubleKeyFrame KeyTime="00:00:00.3000000" Value="0.3"/>
                        </DoubleAnimationUsingKeyFrames>
                    </Storyboard>
                </ControlTemplate.Resources>
                <Grid Margin="0,0,0,0" x:Name="Grid">
                    <Rectangle HorizontalAlignment="Stretch" x:Name="HoverRectangle" VerticalAlignment="Stretch" Width="Auto" Height="Auto" RadiusX="3" RadiusY="4" Stroke="{x:Null}" Margin="4.5,-2,4.5,-2" Opacity="0.3" MinHeight="10">
                        <Rectangle.Fill>
                            <SolidColorBrush Color="{DynamicResource WhiteColor}" />
                        </Rectangle.Fill>
                    </Rectangle>
                    <Rectangle HorizontalAlignment="Stretch" x:Name="PressedRectangle" VerticalAlignment="Stretch" Width="Auto" Height="Auto" RadiusX="3" RadiusY="4" Stroke="{x:Null}" Margin="4.5,-2,4.5,-2" Opacity="0.3" MinHeight="10">
                        <Rectangle.Fill>
                            <SolidColorBrush Color="{DynamicResource WhiteColor}" />
                        </Rectangle.Fill>
                    </Rectangle>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsFocused" Value="True" />
                    <Trigger Property="IsMouseOver" Value="True">
                        <Trigger.ExitActions>
                            <BeginStoryboard Storyboard="{StaticResource HoverOff}" x:Name="HoverOff_BeginStoryboard"/>
                        </Trigger.ExitActions>
                        <Trigger.EnterActions>
                            <BeginStoryboard Storyboard="{StaticResource HoverOn}"/>
                        </Trigger.EnterActions>
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="False" >
                        <Setter Property="Opacity" TargetName="Grid" Value="0.1"/>
                    </Trigger>
                    <Trigger Property="IsDragging" Value="True">
                        <Trigger.ExitActions>
                            <BeginStoryboard Storyboard="{StaticResource PressedOff}" x:Name="PressedOff_BeginStoryboard"/>
                        </Trigger.ExitActions>
                        <Trigger.EnterActions>
                            <BeginStoryboard Storyboard="{StaticResource PressedOn}" x:Name="PressedOn_BeginStoryboard"/>
                        </Trigger.EnterActions>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<Style x:Key="NuclearScrollRepeatButtonStyle" TargetType="{x:Type RepeatButton}">
    <Setter Property="Background" Value="Transparent" />
    <Setter Property="BorderBrush" Value="Transparent" />
    <Setter Property="IsTabStop" Value="false" />
    <Setter Property="Focusable" Value="false" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type RepeatButton}">
                <Grid>
                    <Rectangle Fill="{TemplateBinding Background}" Stroke="{TemplateBinding BorderBrush}" StrokeThickness="{TemplateBinding BorderThickness}" />
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<Style TargetType="{x:Type ScrollBar}">
    <Setter Property="Stylus.IsFlicksEnabled" Value="false" />
    <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ScrollBar}">
                <Grid x:Name="GridRoot" Width="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}" Background="{DynamicResource NormalBrush}">
                    <Grid.RowDefinitions>
                        <RowDefinition MaxHeight="18" />
                        <RowDefinition Height="0.00001*" />
                        <RowDefinition MaxHeight="18" />
                    </Grid.RowDefinitions>
                    <RepeatButton x:Name="DecreaseRepeat" Command="ScrollBar.LineUpCommand" Background="{x:Null}" BorderBrush="{x:Null}" Foreground="{x:Null}">
                        <Grid Margin="0,0,0,0">
                            <Path Margin="4.742,3.997,4.946,5.327" VerticalAlignment="Stretch" Height="Auto" Fill="{DynamicResource GlyphBrush}" Stretch="Fill" Stroke="{DynamicResource GlyphBrush}" StrokeThickness="1" Data="M5.2422477,11.132184 L11.5544,11.132184 8.6412958,4.4969033 z" x:Name="DecreaseArrow" />
                        </Grid>
                    </RepeatButton>
                    <Track Grid.Row="1" x:Name="PART_Track" Orientation="Vertical" IsDirectionReversed="true">
                        <Track.Thumb>
                            <Thumb Style="{DynamicResource NuclearThumbStyle}" Background="{x:Null}" Foreground="{x:Null}" />
                        </Track.Thumb>
                        <Track.IncreaseRepeatButton>
                            <RepeatButton x:Name="PageUp" Style="{DynamicResource NuclearScrollRepeatButtonStyle}" Command="ScrollBar.PageDownCommand" />
                        </Track.IncreaseRepeatButton>
                        <Track.DecreaseRepeatButton>
                            <RepeatButton x:Name="PageDown" Style="{DynamicResource NuclearScrollRepeatButtonStyle}" Command="ScrollBar.PageUpCommand" />
                        </Track.DecreaseRepeatButton>
                    </Track>
                    <RepeatButton Grid.Row="2" x:Name="IncreaseRepeat" Command="ScrollBar.LineDownCommand">
                        <Grid>
                            <Path Margin="4.742,3.997,4.946,5.327" x:Name="IncreaseArrow" VerticalAlignment="Stretch" Height="Auto" Fill="{DynamicResource GlyphBrush}" Stretch="Fill" Stroke="{DynamicResource GlyphBrush}" StrokeThickness="1" Data="M5.2422477,11.132184 L11.5544,11.132184 8.6412958,4.4969033 z" RenderTransformOrigin="0.5,0.5">
                                <Path.RenderTransform>
                                    <TransformGroup>
                                        <ScaleTransform ScaleX="1" ScaleY="1" />
                                        <SkewTransform AngleX="0" AngleY="0" />
                                        <RotateTransform Angle="180" />
                                        <TranslateTransform X="0" Y="0" />
                                    </TransformGroup>
                                </Path.RenderTransform>
                            </Path>
                        </Grid>
                    </RepeatButton>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="Orientation" Value="Horizontal">
                        <Setter Property="LayoutTransform" TargetName="GridRoot">
                            <Setter.Value>
                                <RotateTransform Angle="-90" />
                            </Setter.Value>
                        </Setter>
                        <Setter TargetName="PART_Track" Property="Orientation" Value="Vertical" />
                        <Setter Property="Command" Value="ScrollBar.LineLeftCommand" TargetName="DecreaseRepeat" />
                        <Setter Property="Command" Value="ScrollBar.LineRightCommand" TargetName="IncreaseRepeat" />
                        <Setter Property="Command" Value="ScrollBar.PageLeftCommand" TargetName="PageDown" />
                        <Setter Property="Command" Value="ScrollBar.PageRightCommand" TargetName="PageUp" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

风格：

![在此处输入图像描述](../Images/56092ed2d3d67d487bb8d98a5aef551a.png)

# wordpress - Wordpress：逆向工程 MySQL

> ID：13736706
> 
> 赞同：0
> 
> 时间：2012-12-06T03:56:54.357
> 
> 标签：wordpress, reverse-engineering, erd

伙计们，我将一个 wordpress 数据库反向设计为 EER 图，希望能看到一些关系，但似乎这些表没有链接？

我还对 visio 和 MySQL Workbench 进行了逆向工程，但在没有关系的 EER 图上我得到了相同的结果？如果有人知道原因，请解释

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T05:59:46.487

那是一个WAD。（“按设计工作”。）

> 请注意，在 WordPress 的标准安装中，不会强制执行表格之间的完整性，例如帖子和评论之间。如果您正在创建一个操作 WordPress 数据库的插件或扩展程序，您的代码应该进行内务处理，以便在表中不保留任何孤立记录，例如，在删除外键时使用一组 SQL 命令删除其他表中的记录（Don'在进行此类操作之前不要忘记提醒用户备份）。

[参考](http://codex.wordpress.org/Database_Description)

WordPress 使用 MyISAM 引擎。MyISAM 无论如何都不会强制执行外键约束。

# delphi - 以低级方式修改或删除文本文件中的一行？

> ID：13736707
> 
> 赞同：2
> 
> 时间：2012-12-06T03:56:54.383
> 
> 标签：delphi, text-files

我正在使用 Delphi 中的文本文件，我不希望使用通过字符串列表加载/保存的方法。我打算维护一个打开的文件流，在那里我读取和写入我的数据，将大量数据保存在硬盘上而不是内存中。我有将新行写入文本文件并读取它们的简单概念，但是在修改和删除它们时，我找不到任何好的资源。

此文件中的每一行都包含一个名称和等号，其余为数据。例如，`SOMEUNIQUENAME=SomeStringValue`。我打算在线程内保持文件打开一段时间。此线程执行传入请求以获取、设置或删除某些数据字段。我在一个循环中使用`WriteLn`and来评估. 以下是我如何读取数据的示例：`ReadLn``EOF`

```
FFile = TextFile;

...

function TFileWrapper.ReadData(const Name: String): String;
var
  S: String; //Temporary line to be parsed
  N: String; //Temporary name of field
begin
  Result:= '';
  Reset(FFile);
  while not EOF(FFile) do begin
    ReadLn(FFile, S);
    N:= UpperCase(Copy(S, 1, Pos('=', S)-1));
    if N = UpperCase(Name) then begin
      Delete(S, 1, Pos('=', S));
      Result:= S;
      Break;
    end;
  end;
end; 
```

...然后我触发一个事件，通知发件人结果。请求位于队列内部，队列是这些请求的消息泵。线程只是重复处理队列中的下一个请求，类似于典型应用程序的工作方式。

我已经准备好能够写入和删除这些字段的程序，但我不知道我必须做什么才能实际对文件执行操作。

```
procedure TFileWrapper.WriteData(const Name, Value: String);
var
  S: String; //Temporary line to be parsed
  N: String; //Temporary name of field
begin
  Result:= '';
  Reset(FFile);
  while not EOF(FFile) do begin
    ReadLn(FFile, S);
    N:= UpperCase(Copy(S, 1, Pos('=', S)-1));
    if N = UpperCase(Name) then begin
      //How to re-write this line?
      Break;
    end;
  end;
end;

procedure TFileWrapper.DeleteData(const Name: String);
var
  S: String; //Temporary line to be parsed
  N: String; //Temporary name of field
begin
  Result:= '';
  Reset(FFile);
  while not EOF(FFile) do begin
    ReadLn(FFile, S);
    N:= UpperCase(Copy(S, 1, Pos('=', S)-1));
    if N = UpperCase(Name) then begin
      //How to delete this line?
      Break;
    end;
  end;
end; 
```

最后，我需要避免将整个文件加载到内存中才能完成此操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T09:16:48.317

我发现这是一个有趣的问题，所以我制作了一个小型控制台应用程序。

我使用了 3 种方法：

*   字符串列表
*   Streamreader/StreamWriter
*   文本文件

所有方法都使用 10kb 大小的文本文件和 1Mb 大小的文本文件定时和重复 100 次。这是程序：

```
program Project16;

{$APPTYPE CONSOLE}

uses
  SysUtils, Classes, StrUtils, Diagnostics, IOUtils;

procedure DeleteLine(StrList: TStringList; SearchPattern: String);

var
  Index : Integer;

begin
 for Index := 0 to StrList.Count-1 do
  begin
   if ContainsText(StrList[Index], SearchPattern) then
    begin
     StrList.Delete(Index);
     Break;
    end;
  end;
end;

procedure DeleteLineWithStringList(Filename : string; SearchPattern : String);

var StrList : TStringList;

begin
 StrList := TStringList.Create;
 try
  StrList.LoadFromFile(Filename);
  DeleteLine(StrList, SearchPattern);
  // don't overwrite our input file so we can test
  StrList.SaveToFile(TPath.ChangeExtension(Filename, '.new'));
 finally
  StrList.Free;
 end;
end;

procedure DeleteLineWithStreamReaderAndWriter(Filename : string; SearchPattern : String);

var
  Reader    : TStreamReader;
  Writer    : TStreamWriter;
  Line      : String;
  DoSearch  : Boolean;
  DoWrite   : Boolean;

begin
 Reader := TStreamReader.Create(Filename);
 Writer := TStreamWriter.Create(TPath.ChangeExtension(Filename, '.new'));
 try
  DoSearch := True;
  DoWrite := True;
  while Reader.Peek >= 0 do
   begin
    Line := Reader.ReadLine;
    if DoSearch then
     begin
      DoSearch := not ContainsText(Line, SearchPattern);
      DoWrite := DoSearch;
     end;
    if DoWrite then
     Writer.WriteLine(Line)
    else
     DoWrite := True;
   end;
 finally
  Reader.Free;
  Writer.Free;
 end;
end;

procedure DeleteLineWithTextFile(Filename : string; SearchPattern : String);

var
 InFile    : TextFile;
 OutFile   : TextFile;
 Line      : String;
 DoSearch  : Boolean;
 DoWrite   : Boolean;

begin
 AssignFile(InFile, Filename);
 AssignFile(OutFile, TPath.ChangeExtension(Filename, '.new'));
 Reset(InFile);
 Rewrite(OutFile);
 try
  DoSearch := True;
  DoWrite := True;
  while not EOF(InFile) do
   begin
    Readln(InFile, Line);
    if DoSearch then
     begin
      DoSearch := not ContainsText(Line, SearchPattern);
      DoWrite := DoSearch;
     end;
    if DoWrite then
     Writeln(OutFile, Line)
    else
     DoWrite := True;
   end;
 finally
  CloseFile(InFile);
  CloseFile(OutFile);
 end;
end;

procedure TimeDeleteLineWithStreamReaderAndWriter(Iterations : Integer);

var
  Count : Integer;
  Sw    : TStopWatch;

begin
 Writeln(Format('Delete line with stream reader/writer - file 10kb, %d iterations', [Iterations]));
 Sw := TStopwatch.StartNew;
 for Count := 1 to Iterations do
  DeleteLineWithStreamReaderAndWriter('c:\temp\text10kb.txt', 'thislinewillbedeleted=');
 Sw.Stop;
 Writeln(Format('Elapsed time : %d milliseconds', [Sw.ElapsedMilliseconds]));
 Writeln(Format('Delete line with stream reader/writer - file 1Mb, %d iterations', [Iterations]));
 Sw := TStopwatch.StartNew;
 for Count := 1 to Iterations do
  DeleteLineWithStreamReaderAndWriter('c:\temp\text1Mb.txt', 'thislinewillbedeleted=');
 Sw.Stop;
 Writeln(Format('Elapsed time : %d milliseconds', [Sw.ElapsedMilliseconds]));
end;

procedure TimeDeleteLineWithStringList(Iterations : Integer);

var
  Count : Integer;
  Sw    : TStopWatch;

begin
 Writeln(Format('Delete line with TStringlist - file 10kb, %d iterations', [Iterations]));
 Sw := TStopwatch.StartNew;
 for Count := 1 to Iterations do
  DeleteLineWithStringList('c:\temp\text10kb.txt', 'thislinewillbedeleted=');
 Sw.Stop;
 Writeln(Format('Elapsed time : %d milliseconds', [Sw.ElapsedMilliseconds]));
 Writeln(Format('Delete line with TStringlist - file 1Mb, %d iterations', [Iterations]));
 Sw := TStopwatch.StartNew;
 for Count := 1 to Iterations do
  DeleteLineWithStringList('c:\temp\text1Mb.txt', 'thislinewillbedeleted=');
 Sw.Stop;
 Writeln(Format('Elapsed time : %d milliseconds', [Sw.ElapsedMilliseconds]));
end;

procedure TimeDeleteLineWithTextFile(Iterations : Integer);

var
  Count : Integer;
  Sw    : TStopWatch;

begin
 Writeln(Format('Delete line with text file - file 10kb, %d iterations', [Iterations]));
 Sw := TStopwatch.StartNew;
 for Count := 1 to Iterations do
  DeleteLineWithTextFile('c:\temp\text10kb.txt', 'thislinewillbedeleted=');
 Sw.Stop;
 Writeln(Format('Elapsed time : %d milliseconds', [Sw.ElapsedMilliseconds]));
 Writeln(Format('Delete line with text file - file 1Mb, %d iterations', [Iterations]));
 Sw := TStopwatch.StartNew;
 for Count := 1 to Iterations do
  DeleteLineWithTextFile('c:\temp\text1Mb.txt', 'thislinewillbedeleted=');
 Sw.Stop;
 Writeln(Format('Elapsed time : %d milliseconds', [Sw.ElapsedMilliseconds]));
end;

begin
  try
    TimeDeleteLineWithStringList(100);
    TimeDeleteLineWithStreamReaderAndWriter(100);
    TimeDeleteLineWithTextFile(100);
    Writeln('Press ENTER to quit');
    Readln;
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
end. 
```

输出：

```
Delete line with TStringlist - file 10kb, 100 iterations
Elapsed time : 188 milliseconds
Delete line with TStringlist - file 1Mb, 100 iterations
Elapsed time : 5137 milliseconds
Delete line with stream reader/writer - file 10kb, 100 iterations
Elapsed time : 456 milliseconds
Delete line with stream reader/writer - file 1Mb, 100 iterations
Elapsed time : 22382 milliseconds
Delete line with text file - file 10kb, 100 iterations
Elapsed time : 250 milliseconds
Delete line with text file - file 1Mb, 100 iterations
Elapsed time : 9656 milliseconds
Press ENTER to quit 
```

如您所见，TStringList 是这里的赢家。由于您无法使用 TStringList，因此 TextFile 毕竟不是一个糟糕的选择......

PS：此代码省略了您必须删除输入文件并将输出文件重命名为原始文件名的部分

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T04:13:37.113

如果不将整个文件加载到容器中`TStringList`，您唯一的选择是：

*   打开文件进行输入
*   打开单独的副本进行输出
*   开始一个循环
*   从输入文件中逐行读取内容
*   将内容逐行写入输出文件，直到到达要更改/删除的行
*   打破循环
*   从输入文件中读取输入行
*   将更改的行（或跳过写入要删除的行）写入输出文件
*   开始一个新的循环
*   逐行读取输入内容的其余部分
*   将该输入的其余部分逐行写入输出文件
*   打破循环
*   关闭文件

因此，要回答您的具体问题：

```
if N = UpperCase(Name) then begin
  //How to re-write this line?
  Break;
end; 
```

将新输出写入第二个（输出）文件。

```
if N = UpperCase(Name) then begin
  //How to delete this line?
  Break;
end; 
```

只需跳过将`WriteLn`指示行输出到第二个（输出）文件的那个。

当您可以简单地执行以下操作时，您对“我不想使用 TStringList”的人为限制只会使您的任务复杂化：

*   将原始文件加载到`TStringList`使用中`LoadFromFile`
*   通过索引、迭代或`IndexOf()`
*   通过直接更改它来修改行，或者从`TStringList`
*   使用将整个内容写入原始文件`TStringList.SaveToFile`

我发现*不*用于`TStringList`执行此类操作的唯一原因是文件大小超过了 a 的容量`TStringList`（从未发生过），或者在处理文本文件但不是真正面向“行”的文件时（例如，EDI 文件通常是非常长的单行文本，或 XML 文件可能不包含换行符，因此也是非常长的单行文本）。但是，即使在 EDI 或 XML 的情况下，也经常将它们加载到`TStringList`. 中，转换为基于行的格式（插入换行符或其他），然后从字符串列表中进行检索。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-06T04:14:10.600

基本上，如果您将文件视为简单的文本文件，您将无法做您想做的事情。可以读取（仅从头开始）或写入（从头开始，从而创建新文件）或从结尾（附加到现有文件）读取此类文件。它们不是随机访问文件。

另一方面，您可能需要考虑定义一个字符串类型的文件：文件中的每条记录都是一个字符串，您可以以随机方式访问该文件。然后问题就在于知道要访问哪个记录以访问哪个字符串。

第三种可能性是使用更结构化的 INI 文件，听起来更适合您的目的。除了section header之外，它们是一系列字符串，key=value，可以根据key进行访问。

# .htaccess - 在安全域上强制传出链接为 http 与 https？（htaccess？）

> ID：13736709
> 
> 赞同：0
> 
> 时间：2012-12-06T03:57:06.813
> 
> 标签：.htaccess, ssl, https, ssl-certificate, http-redirect

由于仅将特定网址触发为安全的一些问题，我已强制电子商务网站始终使用 https。我在 .htaccess 中使用了以下内容

```
RewriteEngine On 
RewriteCond %{SERVER_PORT} 80 
RewriteRule ^(.*)$ https://www.vshoen.com/$1 [R,L] 
```

但现在我的问题是由于某种原因，在 https 中打开的 URL 中没有 www 的所有外部链接也是如此。大多数时候这不是问题，但是有一些特定的链接需要简单地是[http://url.com](http://url.com)而不是[http://www.url.com](http://www.url.com)并且在这种情况下，它们不会像尝试那样加载以[https://url.com的形式打开它们](https://url.com)

我希望有一个解决方案，如果这有什么不同的话，这是一个 wordpress 网站。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:01:57.413

试试这个：

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} ^www\. [NC]
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [R=301,NC,L] 
```

# drupal-7 - 无法从自定义内容类型中检索图像

> ID：13736712
> 
> 赞同：0
> 
> 时间：2012-12-06T03:57:28.303
> 
> 标签：drupal-7

我刚刚开始学习如何使用 Drupal 7。我创建了一个新的内容类型，它将作为提要显示在我的首页。我需要的所有数据都被正确获取和显示，除了图像，它的 url 总是缺少实际文件。我的首页中有另一个提要，它使用默认的文章内容类型，并且所有图像都正确显示。

我用于两者的代码本质上是相同的，唯一的区别是要检索的内容类型。

这套工作：

```
$query = db_select('node', 'n');
$query->fields('n', array('nid', 'title'))
->condition('n.type', 'article')
->leftJoin('field_data_body', 'u', 'u.entity_id = n.nid');
$query->addField('u', 'body_summary');
$query->orderBy("nid", "desc");
$query->range(0, 3);
$result = $query->execute();

while($row = $result->fetchAssoc()) {
   $nid = $row['nid'];
   $node = node_load($nid);
   echo theme('image_style', array('style_name' => 'home-article-summary', 'path' => ($node->field_image['und'][0]['uri'])));
} 
```

这没有：

```
$query = db_select('node', 'n');
$query->fields('n', array('nid', 'title'))
->condition('n.type', 'news') //the only difference between the two is this line
->leftJoin('field_data_body', 'u', 'u.entity_id = n.nid');
$query->addField('u', 'body_summary');
$query->orderBy("nid", "desc");
$query->range(0, 3);
$result = $query->execute();

while($row = $result->fetchAssoc()) {
   $nid = $row['nid'];
   $node = node_load($nid);
   echo theme('image_style', array('style_name' => 'home-article-summary', 'path' => ($node->field_image['und'][0]['uri'])));
} 
```

我尝试通过 Structure-> Content Types 将我创建的内容类型的设置与文章的设置相同，但没有发生任何事情。我错过了什么？谢谢你。

编辑：经检查，我找不到为我的自定义内容类型上传的图像的调整大小版本。我假设这意味着实际上没有发生调整大小，因此脚本没有返回文件。我仍然不明白为什么会这样。

编辑第二个：没关系。我发现了问题。现在一切正常。只是使用了错误的变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:24:28.623

作为对 Drupal 新手的一点友好建议，考虑使用[视图](http://drupal.org/project/views)来显示内容列表，而不是编写大量自定义数据库查询。从长远来看，这将为您节省大量编码。

Views 的另一个论点是它将被包含在 Drupal 8 核心中。

# python - 如何使python类支持项目分配？

> ID：13736718
> 
> 赞同：23
> 
> 时间：2012-12-06T03:57:56.320
> 
> 标签：python, inheritance, built-in-types, object-composition

在查看[Think Complexity](http://greenteapress.com/complexity/html/thinkcomplexity003.html#toc13)中的一些代码时，我注意到他们的`Graph`类为自己赋值。我从该类中复制了一些重要的行并编写了一个示例类，该类`ObjectChild`在这种行为上失败了。

```
class Graph(dict):
    def __init__(self, vs=[], es=[]):
        for v in vs:
            self.add_vertex(v)

        for e in es:
            self.add_edge(e)

    def add_edge(self, e):
        v, w = e
        self[v][w] = e
        self[w][v] = e

    def add_vertex(self, v):
        self[v] = {}

class ObjectChild(object):
    def __init__(self, name):
        self['name'] = name 
```

我确信不同的内置类型都有自己的使用方式，但我不确定这是否应该尝试构建到我的类中。有可能吗，怎么做？这是我不应该打扰的事情，而是依靠简单的构图，例如`self.l = [1, 2, 3]`？是否应该在内置类型之外避免它？

我问是因为有人告诉我“你几乎不应该从内置的 python 集合继承”；我不愿限制自己的建议。

澄清一下，我知道这`ObjectChild`不会“工作”，我可以很容易地*让它*“工作”，但我对这些内置类型的内部工作原理感到好奇，这使得它们的界面不同于`object`.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-06T04:07:03.100

他们通过继承来完成这个魔法`dict`。更好的方法是从[UserDict](http://docs.python.org/2/library/userdict.html)或更新的[collections.MutableMapping继承](http://docs.python.org/2/library/collections.html#collections.MutableMapping)

您可以通过执行相同的操作来完成类似的结果：

```
import collections

class ObjectChild(collections.MutableMapping):
    def __init__(self, name):
        self['name'] = name 
```

您还可以定义两个特殊函数来使您的类类似于字典：`__getitem__(self, key)`和`__setitem__(self, key, value)`. [你可以在Dive Into Python - Special Class Methods](http://www.diveintopython.net/object_oriented_framework/special_class_methods.html)中看到一个例子。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2020-07-02T12:35:13.113

在 Python 3 及更高版本中，只需将这些简单的函数添加到您的类中：

```
class some_class(object):
    def __setitem__(self, key, value):
        setattr(self, key, value)

    def __getitem__(self, key):
        return getattr(self, key) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-06T04:10:13.370

免责声明：我可能是错的。

符号：

```
self[something] 
```

在 Graph 类中是合法的，因为它继承自 dict。此表示法来自字典 ssyntax，而不是来自类属性声明语法。

尽管与一个类关联的所有命名空间都是字典，但在您的 ChildObject 类中，self 不是字典。因此，您不能使用该语法。

Otoh，在你的类 Graph 中，self 是一个字典，因为它是一个图，并且所有图都是字典，因为它们继承自 dict。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-06-22T05:16:24.193

使用这样的东西好吗？

```
def mk_opts_dict(d):
    ''' mk_options_dict(dict) -> an instance of OptionsDict '''
    class OptionsDict(object):
        def __init__(self, d):
            self.__dict__ = d

        def __setitem__(self, key, value):
            self.__dict__[key] = value

        def __getitem__(self, key):
            return self.__dict__[key]

    return OptionsDict(d) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-12-21T06:12:15.273

我意识到这是一篇旧帖子，但我一直在寻找有关项目分配的一些细节，并在这里偶然发现了答案。[泰德的帖子](https://stackoverflow.com/a/28302871/10818718)并没有完全错误。为了避免从 dict 继承，你可以让一个类从[MutableMapping](https://docs.python.org/3/library/collections.abc.html#collections.abc.MutableMapping)继承，然后为`__setitem__`and提供方法`__getitem__`。

此外，该类将需要支持`__delitem__`、`__iter__`、`__len__`和（可选）其他继承的 mixin 方法的方法，例如`pop`. 该文档包含有关详细信息的更多信息。

```
from collections.abc import MutableMapping
class ItemAssign(MutableMapping):
    def __init__(self, a, b):
        self.a = a
        self.b = b
    def __setitem__(self, k, v):
        setattr(self, k, v)
    def __getitem__(self, k):
        getattr(self, k)
    def __len__(self):
        return 2
    def __delitem__(self, k):
        self[k] = None
    def __iter__(self):
        yield self.a
        yield self.b 
```

示例使用：

```
>>> x = ItemAssign("banana","apple")
>>> x["a"] = "orange"
>>> x.a
'orange'
>>> del x["a"]
>>> print(x.a)
None
>>> x.pop("b")
'apple'
>>> print(x.b)
None 
```

希望这有助于澄清如何为其他偶然发现这篇文章的人正确实施项目分配:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T04:07:59.520

您的 ObjectChild 不起作用，因为它不是 dict 的子类。这些中的任何一个都可以工作：

```
class ObjectChild(dict):
    def __init__(self, name):
        self['name'] = name 
```

或者

```
class ObjectChild(object):
    def __init__(self, name):
        self.name = name 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-02-03T15:39:51.570

您不需要从 dict 继承。如果您提供**setitem**和**getitem**方法，您也会得到我相信的所需行为。

```
class a(object):
    def __setitem__(self, k, v):
        self._data[k] = v
    def __getitem__(self, k):
        return self._data[k]
    _data = {} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-12T09:12:22.727

# 关于 <dict> 继承的小备忘录

对于那些想要继承dict的人。在这种情况下， MyDict 将在其中包含原始 dict 的浅表副本。

```
class MyDict(dict):
    ...

d = {'a': 1}
md = MyDict(d)

print(d['a'])   # 1
print(md['a'])  # 1

md['a'] = 'new'

print(d['a'])   # 1
print(md['a'])  # new 
```

当你有一棵嵌套的字典树并且你想将它的一部分转换为一个对象时，这可能会导致问题。更改此对象不会影响其父对象

```
root = {
    'obj': {
        'a': 1,
        'd': {'x': True}
    }
}
obj = MyDict(root['obj'])

obj['a'] = 2
print(root)   # {'obj': {'a': 1, 'd': {'x': True}}} # 'a' is the same

obj['d']['x'] = False
print(root)   # {'obj': {'a': 1, 'd': {'x': True}}} # 'x' chanded 
```

# c# - 将 DateTime 序列化为最少的字符数以进行存储

> ID：13736726
> 
> 赞同：2
> 
> 时间：2012-12-06T03:58:37.330
> 
> 标签：c#, datetime

我在持久存储的字段中限制为 255 个字符。在这 255 个字符中，我想存储可以在应用程序中成功反序列化的日期和时间值的最大数量。将它们转换为[这里](https://stackoverflow.com/questions/5788883/how-can-i-convert-a-datetime-to-an-int)`int`提到的是我唯一的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:02:09.687

首先，将每个 DateTime 转换为尽可能少的字节的整数值（可能是 5 - 8，具体取决于您要保留的内容）。
如果只需要存储分钟，3 个字节将涵盖 31 年，4 个字节将涵盖 8166 年。

将这些字节打包成一个字节数组，然后将该字节数组转换为 Base64。这将每 6 个字符存储一个日期。

或者，选择非 Unicode 编码并将字节数组直接转换为字符串。这将每 4 个不可打印的可打印字符存储一个日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T06:35:43.673

谢谢@SLaks，这是你建议我的方式吗（如果我确实想要可打印的字符）：

```
 [Test]
        public void DateTimeTest()
        {
            var dateTime = new DateTime(2012, 12, 12, 12, 12, 0);
            int intDateTime = Int32.Parse(dateTime.ToString("yymmddHHMM", CultureInfo.CurrentCulture));
            byte[] bytesDateTime = BitConverter.GetBytes(intDateTime);
            string base64 = Convert.ToBase64String(bytesDateTime);

            Debug.WriteLine(base64);    // Prints fIA/SA==

            byte[] newBytesDateTime = Convert.FromBase64String(base64);
            int newIntDateTime = BitConverter.ToInt32(newBytesDateTime, 0);
            var newDateTime = DateTime.ParseExact(newIntDateTime.ToString(), "yymmddHHMM", CultureInfo.CurrentCulture);

            Assert.AreEqual( dateTime, newDateTime );
        } 
```

# google-chrome - 如何在 Chrome 浏览器中捕获事件关闭？

> ID：13736728
> 
> 赞同：-3
> 
> 时间：2012-12-06T03:58:55.027
> 
> 标签：google-chrome

我想在 Chrome 窗口关闭时调用一个函数。我*可以*在 Firefox 和 Internet Explorer 中执行此操作，但我无法在 Chrome 中执行此操作。

```
window.onbeforeunload = function () { return "Sure ?"; }
```

它适用于*2 个*浏览器！如果函数没有返回`"Sure ?"`，那么它似乎可以在 Firefox 和 Internet Explorer 中运行。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:03:48.990

你可以参考[这个问题](https://stackoverflow.com/questions/3390470/event-onbrowserclose-for-google-chrome)：Chrome Extension API 中没有这样的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-19T05:57:02.600

为什么要返回一个字符串？您需要更多地学习 Javascript 以了解`return`事件侦听器中的工作原理以及为什么返回乱码不会起多大作用。

> 通常，在事件处理程序中，例如 onsubmit，返回 false 是告诉事件实际上不触发的一种方式。所以，比如说，在 onsubmit 的情况下，这意味着表单没有提交。

某些事件侦听器在`false`返回时的行为不同。该`onbeforeunload`事件没有响应它。

# ruby-on-rails - 在 Cells 中使用 Rails 基准测试

> ID：13736729
> 
> 赞同：0
> 
> 时间：2012-12-06T03:58:58.437
> 
> 标签：ruby-on-rails, rails-cells

我想在 Cells 中使用 Rails 自己的控制器基准测试方法。`include ActiveSupport::Benchmarkable`我在单元控制器中尝试过。但是调用`self.class.benchmark`会给出“不存在方法”错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T03:58:58.437

我发现我可以调用`self.benchmark`（实例方法），这与 Rails 不同[，它是类方法](http://guides.rubyonrails.org/performance_testing.html#controller)。

# jquery - Timepicker jquery 不工作（没有方法 curCSS）

> ID：13736736
> 
> 赞同：8
> 
> 时间：2012-12-06T03:59:44.380
> 
> 标签：jquery, codeigniter, timepicker

由于这个错误，我的头已经疼了一天。

```
The jQuery object is actually just the init constructor 'enhanced'
    return new jQuery.fn.init( selector, context, rootjQuery );
} has no method 'curCSS' 
```

我的html是：

```
<input class="field2" type="text" name="time" placeholder="Time" value ="<?php echo $this-   >input->post('time'); ?>" id = "timepicker"/></div> 
```

我目前使用代码点火器，我也使用日期选择器。我认为包含的 js 库存在冲突，但我仍然无法调试它。

编辑：这些是包含的js

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

<script type="text/javascript"src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>

<script type="text/javascript" src="<?php echo base_url() ?>js_front/jquery-1.8.3.js"></script>

<script type="text/javascript" src="<?php echo base_url() ?>js_front/ui/jquery.ui.core.js"></script>

<script type="text/javascript" src="<?php echo base_url() ?>js_front/ui/jquery.ui.widget.js"></script>

<script type="text/javascript" src="<?php echo base_url() ?>js_front/ui/jquery.ui.datepicker.js"></script> 
```

这是将时间选择器分配到输入标签类型文本中

```
$(function() {
$( "#timepicker" ).timepicker(); 
```

});

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-06T04:18:39.523

您使用的是什么版本的 jQuery？curCSS 在 1.8 中被弃用和删除。在时间选择器代码中使用旧版本的 jQuery 或将“curCSS”替换为“css”。

[http://bugs.jquery.com/ticket/11921](http://bugs.jquery.com/ticket/11921)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T04:31:14.720

可以帮助您缩小范围的一件事是删除冗余/可能冲突的脚本引用。您的代码包含两个不同版本的 jQuery 和两个不同版本的 jQuery UI 的参考 - 这不是一个好的开始。

加载 google 托管文件后，如果它们包含尚未成为核心 jquery UI 一部分的插件，则仅加载更多脚本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-10T07:30:40.067

用 $.css 替换了 $.curCSS（从 jQuery 1.8+ 中删除）

# c# - MvcContrib 网格排序和分页

> ID：13736737
> 
> 赞同：-1
> 
> 时间：2012-12-06T03:59:51.967
> 
> 标签：c#, asp.net-mvc-4, mvccontrib

似乎我在使用 MVCContrib 时遇到了麻烦。我正在使用 MVC4 构建一个网站，我想显示一个显示所有用户的数据网格我的数据模型是由 ADO.NET 实体数据模型构建的，但我对其进行了修改，以便我可以在 MVC4 中轻松使用它。当我尝试实现分页功能时，它抛出一个错误：“方法'Skip'仅支持在LINQ to Entities中排序输入。方法'OrderBy'必须在方法'Skip'之前调用。”源错误是on：@Html.Grid(Model).Sort(ViewBag.SortModel as GridSortOptions).Columns(column =>

我不知道如何解决这个问题。在这种情况下，如果我只是使用排序，没有问题。仅当我在网站中添加分页功能时才会出现此问题（PS：我尝试只使用分页，但它仍然给我同样的错误）。

请帮我 ：）

在控制器上：

```
public ActionResult Index(int? page, GridSortOptions SortModel)
    {
        userRsy = new UserRepository();

        if (CookieUserName == "")
        {
            return RedirectToAction("Index", "Home");
        }
        else
        {
            DBEntities _db = new DBEntities();
            //ViewData.Model = _db.Users;
            ViewBag.SortModel = SortModel;
            IEnumerable<User> userList = _db.Users;
            if (!string.IsNullOrEmpty(SortModel.Column))
            {
                userList = userList.OrderBy(SortModel.Column, SortModel.Direction);
                //userList = userList.OrderBy(u => u.UserName);
            }

            //find login user
            var _user = userRsy.Find(CookieUserName);
            //ViewBag.Title = _user.FirstName + ", Welcom to E-Tabs Dashboard Management Center";

            //Check user admin level
            ViewBag.User = _user.FirstName;
            ViewBag.Account = _user.UserName;
            ViewBag.IsAdmin = false;

            if (userRsy.AdminCheck(_user.UserName) == 99)
            { ViewBag.IsAdmin = true; }

            //Pagination
            userList = userList.AsPagination(page ??1,5);
            //show view
            return View(userList); 
        }
    } 
```

在 cshtml 文件上：

```
@model IPagination<E_Tabs_Generic_Portal.Models.User>
@using MvcContrib.UI.Grid;
@using MvcContrib.Pagination;
@using MvcContrib.UI.Pager;
@using MvcContrib.Sorting;

@{
    ViewBag.Title = "User";
    Layout = "~/Views/Shared/_HomeLayout.cshtml";
}

<div class="content-1">
    <h2>User List</h2>  

    @Html.Grid(Model).Sort(ViewBag.SortModel as GridSortOptions).Columns(column =>
    {
        column.For(p => p.UserName).Named("User Name");
        column.For(p => p.IsEnabled).Named("Enabled");
        column.For(p => p.FirstName).Named("First Name");
        column.For(p => p.LastName).Named("Last Name");
        column.For(p => p.Email).Named("E-Mail");
        column.For(p => p.Company).Named("Company");
        column.For(p => p.ServerName).Named("On Server #");
        column.For(p => p.LastLoginTime).Named("Last Login").Format("{0:yyyy/MM/dd HH:mm}");
    }
    ).Attributes( @class=>"Grid",@width =>"100%", @border =>"1", @style =>"text-align:center;border-collapse:collapse")

    @Html.Pager(Model).First("First").Next(">>").Previous("<<").Last("Last").Format("Total{2}, Current{0}-{1} ")
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:53:52.773

上个月我第一次尝试 MVCCONTRIB 网格时遇到了类似的问题。我通过将 Ipagination 结果分配给另一个变量并将其作为 View 返回来修复它。

像这样的东西 -

```
var temp = userList.AsPagination(page ?? 1, 5);
return View( temp); 
```

# c# - 通过另一个 WCF 调用调用 WCF

> ID：13736739
> 
> 赞同：0
> 
> 时间：2012-12-06T04:00:10.933
> 
> 标签：c#, wcf

我有一种情况，我想在另一个电话进来时拨打 WCF 电话。

```
Site1 request--> Site2
Site2 request --> Site3
Site2 <-- Site3 response
Site1 <-- Site2 response 
```

我遇到的问题是，当 Site2 尝试向 Site3 发送消息而 Site1 正在发送到 Site2 时；Site2 说它找不到 Site3。

实际的错误信息是：

```
Could not find endpoint element with name 'Endpoint_IEchoService' and contract 
'FakeCompany.API.Services.Contract.IEchoService' in the ServiceModel client 
configuration section. This might be because no configuration file was found 
for your application, or because no endpoint element matching this name could be 
found in the client element. 
```

每个站点都是相同的配置和代码库。客户端、代理和服务器都在同一个项目中。这些应用程序是相互调用的克隆。它是一个具有多个地址绑定的网站。在我尝试通话中的通话之前，站点之间的其他常规通话工作正常。

正如您可能从联系人姓名中猜到的那样，在我的 echo 服务中并没有发生太多复杂的事情。站点之间的单个回声呼叫有效。我的问题是当我在服务端对另一个站点进行级联调用时。

我想知道这是不允许的还是需要更改配置设置。

## 一些代码和配置。

*端点地址在运行时更改。*
*如果你看到一些“时髦”的东西，那是因为客户端、代理和服务继承自通用基类。*

**//-- 服务模型客户端**

```
<endpoint address="http://FakeCompany.unittest/Services/EchoService.svc"
 binding="basicHttpBinding" bindingConfiguration="SecureBinding"
 contract="FakeCompany.API.Services.Contract.IEchoService" name="Endpoint_IEchoService">
    <identity>
        <servicePrincipalName value="host/mikev-ws" />
    </identity>
</endpoint> 
```

**//-- 绑定**

```
<bindings>
    <basicHttpBinding>
        <binding name="SecureBinding" 
                 maxReceivedMessageSize="10000000" 
                 sendTimeout="00:05:00">
            <security mode="TransportCredentialOnly">
                <transport clientCredentialType="Basic" />
            </security>
        </binding>
    </basicHttpBinding>
</bindings> 
```

**//-- 行为**

```
<behaviors>
    <serviceBehaviors>
        <behavior name="MyServiceTypeBehaviors">
            <serviceMetadata httpGetEnabled="true" />
            <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
    </serviceBehaviors>
</behaviors> 
```

**// - 服务**

```
<service name="FakeCompany.API.Services.Service.EchoService" behaviorConfiguration="MyServiceTypeBehaviors">
    <endpoint address="" binding="basicHttpBinding" contract="FakeCompany.API.Services.Contract.IEchoService" bindingConfiguration="SecureBinding" />
</service> 
```

**// - 测试**

```
[Test]
public void CascadeMessage()
{
    //-- TEST: That a wcf call can occur within another wcf call.

    //-- ARRANGE
    DTO_Echo_Cascade_Request request = new DTO_Echo_Cascade_Request(unit1, unit2);
    request.NextCall = string.Format("{0};{1};{2};", unit3, unit4, unit5);

    //-- ACT
    var response = EchoAgent.Cascade(request);

    //-- ASSERT
    Assert.AreEqual("TBA", response.Response);
} 
```

**// - 代理人**

```
internal static DTO_Echo_Response Cascade(DTO_Echo_Cascade_Request request)
{
    DTO_Echo_Response response;
    using (EchoServiceClient serviceClient = new EchoServiceClient(request))
    {
        response = serviceClient.Cascade(request);
    }

    return response;
} 
```

**// - 客户**

```
public DTO_Echo_Response Cascade(DTO_Echo_Cascade_Request request)
{
    return Process(() => Proxy.Cascade(request));
} 
```

合同、DTO、代理被省略。

**// - 服务**

```
public DTO_Echo_Response Cascade(DTO_Echo_Cascade_Request request)
{
    DTO_Echo_Response response = new DTO_Echo_Response();

    response.Response += string.Format("Hello from {0};", request.TargetAddress);

    if (request.NextCall.NotNullOrEmpty())
    {
        var split = request.NextCall.Split(new [] {';'}, StringSplitOptions.RemoveEmptyEntries);

        if (split.GetUpperBound(0) > 0)
        {
            DTO_Echo_Cascade_Request nextRequest = new DTO_Echo_Cascade_Request(request.TargetAddress, split[0]);
            for (int i = 1; i < split.GetUpperBound(0); i++)
            {
                nextRequest.NextCall += split[i] + ";";
            }
            response.Response += EchoAgent.Cascade(nextRequest).Response;
        }

    }

    return response;
} 
```

***异常发生在以下行***

```
response.Response += EchoAgent.Cascade(nextRequest).Response; 
```

# c# - 如何组合我的 FTP 查询？

> ID：13736740
> 
> 赞同：0
> 
> 时间：2012-12-06T04:00:12.133
> 
> 标签：c#, ftp, ftpwebrequest

我的程序有几次查询 FTP 服务器以读取和上传信息。我怎样才能将所有这些组合成一个 FTP 类来处理所有事情？

```
 private static void UploadToFTP(string[] FTPSettings)
    {
        try
        {
            FtpWebRequest request = (FtpWebRequest)WebRequest.Create(FTPSettings[0]);
            request.Method = WebRequestMethods.Ftp.MakeDirectory;

            request.Credentials = new NetworkCredential(FTPSettings[1], FTPSettings[2]);

            FtpWebResponse response = (FtpWebResponse)request.GetResponse();
        }
        catch
        {
        }

        try 
        {
            FtpWebRequest request = (FtpWebRequest)WebRequest.Create(FTPSettings[0] + Path.GetFileName(file));
            request.Method = WebRequestMethods.Ftp.UploadFile;

            request.Credentials = new NetworkCredential(FTPSettings[1], FTPSettings[2]);

            StreamReader source = new StreamReader(file);
            byte[] fileContents = Encoding.UTF8.GetBytes(source.ReadToEnd());
            source.Close();
            request.ContentLength = fileContents.Length;

            Stream requestStream = request.GetRequestStream();
            requestStream.Write(fileContents, 0, fileContents.Length);
            requestStream.Close();

            FtpWebResponse response = (FtpWebResponse)request.GetResponse();

            response.Close();

            RegenLog();
        }
        catch (Exception e)
        {
            File.AppendAllText(file, string.Format("{0}{0}Upload Failed - ({2}) - {1}{0}", nl, System.DateTime.Now, e.Message.ToString()));
        }
    }

    private static void CheckBlacklist(string[] FTPSettings)
    {
        try
        {
            FtpWebRequest request = (FtpWebRequest)WebRequest.Create(FTPSettings[0] + "blacklist.txt");
            request.Credentials = new NetworkCredential(FTPSettings[1], FTPSettings[2]);

            using (WebResponse response = request.GetResponse())
            {
                using (Stream stream = response.GetResponseStream())
                {
                    using (TextReader reader = new StreamReader(stream))
                    {
                        string blacklist = reader.ReadToEnd();

                        if (blacklist.Contains(Environment.UserName))
                        {
                            File.AppendAllText(file, string.Format("{0}{0}Logger terminated - ({2}) - {1}{0}", nl, System.DateTime.Now, "Blacklisted"));
                            uninstall = true;
                        }
                    }
                }
            }
        }
        catch (Exception e)
        {
            File.AppendAllText(file, string.Format("{0}{0}FTP Error - ({2}) - {1}{0}", nl, System.DateTime.Now, e.Message.ToString()));
        }
    }

    private static void CheckUpdate(string[] FTPSettings)
    {
        try
        {
            FtpWebRequest request = (FtpWebRequest)WebRequest.Create(FTPSettings[0] + "update.txt");
            request.Credentials = new NetworkCredential(FTPSettings[1], FTPSettings[2]);

            using (WebResponse response = request.GetResponse())
            {
                using (Stream stream = response.GetResponseStream())
                {
                    using (TextReader reader = new StreamReader(stream))
                    {
                        string newVersion = reader.ReadToEnd();

                        if (newVersion != version)
                        {
                            update = true;
                        }
                    }
                }
            }
        }
        catch (Exception e)
        {
            File.AppendAllText(file, string.Format("{0}{0}FTP Error - ({2}) - {1}{0}", nl, System.DateTime.Now, e.Message.ToString()));
        }
    } 
```

我知道我的代码也有点不一致和混乱，但是这是我第一次在 C# 中使用 FTP。请给你任何建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T08:28:37.367

一个理想的选择是使用“管理器”类型的类，实现[IDisposable](http://msdn.microsoft.com/ru-ru/library/aax125c9)接口。

让它有一些内部字段（在构造函数中初始化）和一个连接（也在构造函数中初始化）每个方法都应该检查连接是否处于活动状态，如果是，则执行操作；否则，尝试恢复它然后抛出异常。

在 Dispose 方法中，您关闭连接。

这应该让您了解它的外观：

```
// Partial class declaration
class FTPManager : IDisposable
{
    void Dispose();
    FTPManager(string host, string username, string password)
    void UploadFile(string remoteDir, string localfile);
    void CreateDirectory(string remotePath);
    void DeleteFile(string remotePath);
}

// and here I use it:
void Main()
{
    using (var manager = new FTPManager("ftp.somehosting.org","login","password")) {
        manager.CreateDirectory("/newfolder/");
        manager.UploadFile("/newfolder/","C:\\Somefile.txt");
        manager.DeleteFile("/newfolder/anotherfile.txt");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:27:12.907

您可能想查看[WinSCP 库](http://winscp.net/eng/docs/library)。WinSCP 有很多功能并且支持比（固有不安全的 FTP）更安全的协议。最近的版本甚至具有脚本机制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T20:06:03.793

您应该使用其他 FTP .NET 库（互联网上有很多，免费的和商业的），它允许在一个连接中执行所有命令。那会工作得更快。

# c# - 使用Win32 dll时如何释放内存？

> ID：13736741
> 
> 赞同：0
> 
> 时间：2012-12-06T04:00:31.073
> 
> 标签：c#, memory, dll

```
dllManager.LoadFun(@"user32", "GetAsyncKeyState");
object tempFlag = dllManager.Invoke(ObjArray_Parameter, TypeArray_ParameterType, ModePassArray_Parameter, Type_Return, "GetAsyncKeyState");
r = (int)tempFlag;
llManager.UnLoadDll(); 

public void UnLoadDll()
{
    FreeLibrary(hModule);
    hModule = IntPtr.Zero;
    farProc = IntPtr.Zero;
} 
```

`dllManager.UnloadDll()`好像不行，内存没有释放，因为我再次调用DLL时，它会继续增加内存。如何释放内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:14:03.237

一般来说，你声明一个`extern`函数，不用太担心内存使用。无论如何，Windows 在内部都使用这个 DLL。

```
[DllImport("User32.dll")]
private static extern short GetAsyncKeyState(System.Windows.Forms.Keys key);

private void button1_Click(object sender, EventArgs e)
{
    short state = GetAsyncKeyState(Keys.D);
    switch (state)
    {
        // ?
    }
} 
```

**另请参阅**
[http://www.pinvoke.net/default.aspx/user32.getasynckeystate](http://www.pinvoke.net/default.aspx/user32.getasynckeystate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:08:59.733

[您可以在应用](http://msdn.microsoft.com/en-us/library/2bh4z9hs%28v=vs.71%29.aspx)程序域中加载该链接库，然后卸载该应用程序域。

# linux - 从文件中读取数字直到行 < n

> ID：13736745
> 
> 赞同：1
> 
> 时间：2012-12-06T04:01:06.703
> 
> 标签：linux, bash

尽管我很震惊，但我在任何地方都找不到这个，而且我的 bash 技能仍然低于标准。

我有一个素数的文本文件：

> 2\n
> 3\n
> 5\n
> 7\n
> 11\n
> 等等...

我想提取 2^32 (4294967296) 下的所有素数**加上一个额外的素数**，并将这些素数保存到以相同方式格式化的自己的文本文件中。此外，到目前为止，我的文件**刚刚超过 13 亿行**，因此在限制之后停止是理想的。

**更新：问题。**

bash 脚本已经在这 11 个数字中循环了很长一段时间，而我没有注意到：

> 4232004449
> 4232004479
> 4232004493
> 4232004509
> 4232004527
> 4232004533
> 4232004559
> 4232004589
> 4232004593
> 4232004613
> 004437

更奇怪的是，我 grepped primes.txt（原版）和“^004437”无处可寻。这是bash的某种限制吗？

**更新：解决方案**

这似乎是某种限制，我真的不知道是什么。我重新选择 perl 脚本作为我的答案，因为它不仅可以工作，而且它在约 80 秒内从零创建了约 2GB，并包含了额外的素数。[去这里](https://unix.stackexchange.com/questions/33170/bash-scripting-and-large-files-bug-input-with-the-read-builtin-from-a-redirec)寻找 bash 错误的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T04:30:35.973

```
$  perl -lne 'print; last if $_ > 2**32' < myprimes.txt > myprimes2.txt 
```

为您提供输入的素数序列，直到超过 2**32 的一个素数，然后停止。不将源文件读入内存。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-06T04:32:47.453

在 shell 中，无需将整个 13 亿个数字加载到内存中，您可以使用：

```
n=4294967296
last=0
while read number
do
    if [ $last -gt $n ]
    then break
    fi
    echo $number
    last=$number
done < primes.txt > primes2.txt 
```

您也可能会丢失`last`变量：

```
n=4294967296
while read number
do
    echo $number
    if [ $number -gt $n ]
    then break
    fi
done < primes.txt > primes2.txt 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T04:18:06.057

这在 Bash 中很容易做到！只需 cat 文件 primes.txt 来读取它，遍历每个数字，检查该数字是否小于 2^32，如果是，则将其附加到 primes2.txt。

确切的代码如下。

```
#!/bin/bash

n=4294967296; # 2^32

for i in `cat primes.txt`
do
        if [ $i -le $n ]
        then
                echo $i >> primes2.txt;
        fi
done 
```

或者您可以使用这个简单的 Python 解决方案，它不需要将整个文件加载到内存中。

```
new_primes = open('primes2.txt', 'a')
n = 2**32

[new_primes.write(p) for p in open('primes.txt', 'r') if int(p) < n] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T04:11:10.380

我建议在 Perl 中做这样的事情：

**编辑**：嗯，这可能是用完所有 RAM 的阵列 - 这应该对您的资源更友好。

```
#!/usr/bin/env perl

use warnings;
use strict;

my $max_value = ( 2 ** 32);
my $input_file = 'primes.txt';
my $output_file = 'primes2.txt';

open( my $INPUT_FH, '<', $input_file )
    or die "could not open file: $!";

open ( my $OUTPUT_FH, '>', $output_file )
    or die "could not open file: $!";

foreach my $prime ( <$INPUT_FH> ) {
  chomp($prime);
  unless ( $prime >= $max_value ) { print $OUTPUT_FH "$prime","\n"; }
} 
```

# ruby-on-rails - omn iauth-ldap 是如何工作的？

> ID：13736753
> 
> 赞同：3
> 
> 时间：2012-12-06T04:02:04.057
> 
> 标签：ruby-on-rails, omniauth

我目前正在从事一个负责用户身份验证的 Rails 项目。我们决定使用第三方身份验证，我尝试按照示例设置进行操作。该示例由 Kevin Thompson 完成，称为[example](http://www.blackfistsecurity.com/2011/12/rails-authentication-using-devise-and.html "使用 devise 和 omniauth-ldap 进行 Rails 身份验证")。

根据 LDAP 服务器的文档，我需要做的步骤是：

1.  连接到 LDAP 服务器。
2.  匿名绑定（无 DN 和密码）。
3.  使用用户名搜索 LDAP 条目
4.  如果找到，则检索用户名的 DN。
5.  使用他们提供的用户 DN 和密码重新绑定。
6.  如果此重新绑定成功，则用户已通过身份验证。

我遵循了 Thompson 的例子，只是我没有使用 nifty；使用设计进行用户管理和omniauth-ldap 进行身份验证。但是，它不太有效，我想知道它是否与服务器文档告诉我的操作与omniauth-ldap 实际操作之间的差异有关...

具体来说，我的问题是我总是收到“无效凭据”错误。这是因为我需要做的事情与omniauth-ldap正在做的事情不匹配吗？

建议或建议将不胜感激！

关于我如何设置的更多信息（为了保持匿名，我替换了一些东西）我可以根据要求发布更多代码。

**配置/初始化程序/devise.rb：**

```
 config.omniauth :ldap,
    :host => 'ldap1.its.domain.ext',
    :base => 'ou=People, dc=domain, dc=ext',
    :port => 389,
    :attrs => 'uid',
    :method => :plain,
    :uid => 'uid' 
```

**应用程序/控制器/用户/omniauth_callbacks_controller.rb：**

```
class Users::OmniauthCallbacksController <     Devise::OmniauthCallbacksController
  skip_before_filter :verify_authenticity_token
  def ldap
    ldap_return = request.env["omniauth.auth"]["extra"]["raw_info"]
    username = ldap_return.uid[0].to_s

    if @user = User.find_by_username(username)
      sign_in_and_redirect @user
    else
      @user = User.create(:username => username,)
      sign_in_and_redirect @user
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-27T15:18:40.667

我刚刚解决了一个类似的问题。

首先，您需要确定您的域是否允许匿名绑定。在我的情况下这是不允许的。使用当前用户绑定有一个很好的拉取请求，[dorren/omniauth-ldap](https://github.com/intridea/omniauth-ldap/pull/14)。否则，您将需要一个系统帐户。只是为了开始行动，我使用了我的用户名（即 userPrincipalName）/密码：bind_dn 和 :password。

其次，对于 LDAP 身份验证，用于身份验证的两个 uid 值是 sAMAccountName(username)**或**userPrincipalName(username@ldap.domain.ext)。我发现我的系统使用了 userPrincipalName。为了防止用户输入，我只是在提交表单之前连接了域。

试试这个配置。

```
config.omniauth :ldap,
  :host => 'ldap.domain.ext',
  :base => 'dc=ldap, dc=domain, dc=ext',
  :port => 389,
  :method => :plain,
  :uid => 'userPrincipalName',
  :bind_dn => 'bind_dn',
  :password => 'password' 
```

我相信 :bind_dn 可以是以下形式：

'CN=姓\，名字，OU=人，DC=ldap，DC=域，DC=ext'

**或者**

'用户名@ldap.domain.ext'

我还发现使用 Net::LDAP 编写一个 ruby​​ 脚本来绑定和搜索也确实帮助我了解了 Active Directory，因为在执行此任务之前我对这个主题一无所知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-21T01:00:57.487

我不能将此添加为评论，因为我还没有 50 声望，但是我发现这可能对这里的某些人有用。

[http://blackfistsecurity.blogspot.com.au/2011/12/rails-authentication-using-devise-and.html](http://blackfistsecurity.blogspot.com.au/2011/12/rails-authentication-using-devise-and.html)

我最初试图在没有其他任何东西的情况下使用 Omniauth 和 Omniauth-LDAP，但是缺少有关 Omniauth-ldap 部分的文档使事情变得困难。

**编辑：**

我最终没有使用 Omniauth-LDAP，而是选择了 vanilla devise 安装，并编写了自己的 LDAP 功能。请注意：**我使用 mongoid**，因此下面的代码是针对 MongoDB 的。然而，它可以很容易地为 ActiveRecord 修改。

为了做到这一点，我`new`在控制器中编辑了动作`sessions`，类似于如下：

```
ldap = Net::LDAP.new
ldap.host = 'domainOrIP'
ldap.port = 389

ldap.auth 'user', 'password'

if ldap.bind
    # success, so let's check if the user exists
     @existing_user = User.where({username: params[:user][:username] }).first

     if @existing_user == nil
       #create the user
         @user = User.new( {username: params[:user][:username], password: ''})
         # I didn't personally store the user's password, as I use LDAP for authentication. (If you save this, please hash and salt it first!!)
         @user.save
         flash[:notice] = "Success!"
         redirect_to '/'
     else # already existed
       @user = User.find({ username: params[:user][:username] })
         flash[:notice]  = "Success!"
         redirect_to '/'
     end
else
    flash[:danger] = "An error occurred whilst authenticating with your LDAP server. Please check the configuration and try again."
    redirect_to '/'
end 
```

然后我离开了 Devise 来处理其他所有事情。对我来说工作得很好——上面的代码来自记忆，但是可能不是 100% 准确的。:)

**编辑 2：** 关于如何使用 Net::LDAP 类的更多信息可以在这里找到： [http ://www.rubydoc.info/gems/ruby-net-ldap/Net/LDAP](http://www.rubydoc.info/gems/ruby-net-ldap/Net/LDAP)

# java - file.createNewFile() 不能立即工作

> ID：13736756
> 
> 赞同：0
> 
> 时间：2012-12-06T04:02:14.463
> 
> 标签：java, eclipse

```
File file = null;
String directory = "/Users/Chris/Documents/Sites/gmustudent/WebContent/images/test/";
file = new File(directory + imageName);
file.createNewFile(); 
```

上面的代码确实有效地在我想要的目录中创建了一个具有我想要的名称的新文件。在我运行它之后，我可以在我的计算机上转到该路径并且图像将在那里。但是这些图像在 Eclipse 中将不可见。运行此代码后，目录如下所示

![在此处输入图像描述](../Images/cdc5e644f7485a2cc1b3b7368c9e6118.png)

所以我可以在我的计算机的目录中查看图像，但 eclipse 还没有看到它们。所以然后我右键单击我的项目并单击刷新...

![在此处输入图像描述](../Images/cae20232d39d5a931e17b7ac33fd733e.png)

然后我的目录被刷新了......

![在此处输入图像描述](../Images/66c04d7c97818ed05a6e5d7c1ee309ac.png)

因此，当我尝试访问我刚刚在我的网络应用程序中上传的图像时，我无法看到它们，直到我刷新我的整个网络应用程序。

**更新**

这是一个问题 b/c 我需要通过在线路径访问这些文件。比如 http://localhost:8086/gmustudent/images/test/image.png。在刷新问题所在的网络应用程序之前，我无法执行此操作。因此，当我在上传后尝试访问图像时，在刷新 eclipse 项目之前我看不到它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T04:05:47.200

在较新版本的 Eclipse 中，有一个名为“使用本机挂钩或轮询刷新”的 Workspace 首选项。

![在此处输入图像描述](../Images/798af469404a2d9f6418e9135dac67ff.png)

如果 Eclipse 和/或您的系统需要读取慢速（例如，非 SSD）磁盘和/或许多目录/文件，这可能会降低其速度。[该帮助文档](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.user/whatsNew/platform_whatsnew.html)暗示本机挂钩仅适用于 Windows 版本的 Eclipse，这意味着 Linux 和 Mac 版本将使用轮询，这可能会降低效率。

试一试; YMMV。

# java - Java：OutputStream 到 .exe 控制台应用程序问题

> ID：13736757
> 
> 赞同：-2
> 
> 时间：2012-12-06T04:02:24.493
> 
> 标签：java, outputstream

我正在尝试与从一些 Python 代码创建的简单 .exe 进行交互。我已经通过 Windows cmd 测试了 .exe，它工作得很好。当我尝试通过我的 java 程序将相同的输入发送到 .exe 以生成我需要的图形时，OutputStream 只是将“错误”写入控制台。我尝试通过 OutputStream 发送一个字符串和一个整数，但无论如何都会获得相同的结果。我已经与 X-Foil.exe 进行了交互，这是一个用于生成翼型数据文件的控制台应用程序，通过同一个 Java 应用程序取得了巨大的成功。由于我必须对数据进行曲线拟合，因此我使用 Python 和 matplotlib 插件，然后使用 py2exe 创建 .exe。我正在尝试创建一个 Web 应用程序，其最终目标是设计飞机机翼，因此使用 java。

```
 public void PyGrapher(String NACA_4d) {
    try {
        ProcessBuilder builder = new ProcessBuilder("PyAirfoilGraphing\\dist\\GraphPolars.exe");
        builder.redirectErrorStream(true);
        Process pr = builder.start();
        OutputStream out = pr.getOutputStream();
        BufferedReader in = new BufferedReader(new InputStreamReader(pr.getInputStream()));

        double CL_alpha;

        out.write((NACA_4d + "\n").getBytes());

        System.out.println(in.readLine());
        System.out.println(in.readLine());
        System.out.println(in.readLine());
        System.out.println(in.readLine());
        //CL_alpha = Double.parseDouble(in.readLine());

        pr.waitFor();
        pr.destroy();
        out.close();
        in.close();

    } catch (IOException | InterruptedException ex) {
    }
} 
```

这是我从控制台读到的内容：

```
 Input NACA 4-digit code: error
  Traceback (most recent call last):
    File "GraphPolars.py", line 16, in <module>
  IOError: [Errno 2] No such file or directory: '..\\..\\AirfoilPolars\\NACA_0024.dat' 
```

我被难住了，而且已经有一段时间了。python文件没有问题，在当前目录下自行运行良好。有人可以帮忙吗？

-尼克K

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T04:08:18.400

它可能是具有相对路径的东西吗？Python 默认路径可能无法获取本地目录/文件。

您是否尝试通过正确转义的 '\' 字符将完整的 Windows 路径 'C:\Foo\bar\AirFoil\... ' 传递给它？

# iphone - Iphone在uitextView中将背景图像设置为文本？/

> ID：13736760
> 
> 赞同：0
> 
> 时间：2012-12-06T04:02:42.670
> 
> 标签：iphone, image, background, add

我有一个`uiimageView`包含这样的[文本](http://www.freeimagehosting.net/9fsj8)。

我想将文本的图像背景设置为看起来像[这样](http://www.freeimagehosting.net/qthaj)。

请帮我！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:11:22.673

您需要使用*compositing*将文本图像与背景图像（应该填充文本内部的东西）结合起来。查看您可以使用的各种混合模式，或查看 CIFilter 的使用。

[http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGContext/Reference/reference.html#//apple_ref/doc/c_ref/CGBlendMode](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGContext/Reference/reference.html#//apple_ref/doc/c_ref/CGBlendMode)

[https://developer.apple.com/library/mac/#documentation/graphicsimaging/Reference/CoreImageFilterReference/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Reference/CoreImageFilterReference/Reference/reference.html)

背景中的东西看起来可能是渐变。同样，您可以使用 CIFilter 来生成渐变，也可以使用 Core Graphics。因此，您会将绘制的文本与其填充图像合成，然后将其绘制在渐变上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:07:42.457

代替黑色纯色文本，将带有透明文本和外部区域的图像制作为您想要的灰色渐变，并将此图像放在您的背景图像上，您将获得所需的结果。

# unicode - 好的，我已经阅读了 unicode/mako 帖子的所有内容，但我仍然可以让这个简单的代码工作

> ID：13736769
> 
> 赞同：3
> 
> 时间：2012-12-06T04:03:58.290
> 
> 标签：unicode, mako

我正在运行 Python 2.6.6。

> 猫 tbuild.py

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
#

from mako.template import Template

_template="""
% for v in my_list:
  ${'abc'.encode('utf-8')}
  ${'風連町?'.encode('utf-8')}
% endfor
"""

print Template(_template).render_unicode(my_list = [1, 2],
                                         input_encoding='utf-8',
                                         output_encoding='utf-8',
                                         encoding_errors='replace'
                                        )

./tbuild.py gives.
  File "./tbuild.py", 
  line 15, in <module> print Template(_template).render_unicode(my_list = [1, 2],
  File "/usr/lib/python2.6/site-packages/mako/template.py", 
  line 91, in __init__ (code, module) = _compile_text(self, text, filename)
  File "/usr/lib/python2.6/site-packages/mako/template.py", 
  line 357, in _compile_text node = lexer.parse()
  File "/usr/lib/python2.6/site-packages/mako/lexer.py", 
  line 192, in parse self.filename,)
  File "/usr/lib/python2.6/site-packages/mako/lexer.py", 
  line 184, in decode_raw_stream 0, 0, filename)
  mako.exceptions.CompileException: Unicode decode operation of 
  encoding 'ascii' failed at line: 0 char: 0 
```

如果我删除带有日语的行，它可以正常工作。显然，我想念一些基本的东西。

谢谢你的帮助，eo

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:17:39.753

即使`${'á'.encode('utf-8')}`工作我也会感到惊讶。您需要使用 unicode literal 指定 unicode 字符串`u`。重写`${'風連町?'.encode('utf-8')}`为`${u'風連町?'.encode('utf-8')}`并对您正在处理的任何文本执行相同的操作。

编辑：

考虑到mako：

```
# -*- coding: utf-8 -*-

from mako.template import Template

_template=u"${u'風連町?'}"
x = Template(_template, output_encoding='utf-8')
print x.render() 
```

output_encoding 参数在创建模板时有意义，在 render 方法中没有意义。另外，为什么要对输入进行编码，使用相同的编码对输入进行解码，然后使用 render_unicode ？事实上，render_unicode 忽略了 output_encoding，所以看起来你真的想使用render。

# asp.net-mvc - Autofac 生命周期管理

> ID：13736771
> 
> 赞同：6
> 
> 时间：2012-12-06T04:04:17.967
> 
> 标签：asp.net-mvc, autofac, lifetime

我正在开发一个支持外部插件的 ASP.NET MVC 项目，现在，我正在从 Unity 迁移到 Autofac，我需要包装 Autofac 的生命周期对象，这样插件就不必在 Unity 中引用它了可以这样做。

```
public sealed class UnityScopeFactory : IDependencyScopeFactory
{
    private HttpRequestScope _httpRequest;

    private SingletonScope _singleton;

    private TransientScope _transient;

    public IDependencyScope HttpRequest()
    {
        return _httpRequest ?? (_httpRequest = new HttpRequestScope());
    }

    public IDependencyScope Singleton()
    {
        return _singleton ?? (_singleton = new SingletonScope());
    }

    public IDependencyScope Transient()
    {
        return _transient ?? (_transient = new TransientScope());
    }

    private class HttpRequestScope : IDependencyScope
    {
        public object CreateScope()
        {
            return new HttpPerRequestLifetimeManager();
        }
    }

    private class SingletonScope : IDependencyScope
    {
        public object CreateScope()
        {
            return new ContainerControlledLifetimeManager();
        }
    }

    private class TransientScope : IDependencyScope
    {
        public object CreateScope()
        {
            return new TransientLifetimeManager();
        }
    }
} 
```

我在 Autofac 中做了类似的事情，但我不确定这是否是正确的方法，我查看了 Autofac 的 RegistrationBuilder，它是（不幸的）内部的，我想出了这个。

```
public class AutofacScopeFactory : IDependencyScopeFactory
{
    private HttpRequestScope _httpRequest;

    private SingletonScope _singleton;

    private TransientScope _transient;

    public IDependencyScope HttpRequest()
    {
        return _httpRequest ?? (_httpRequest = new HttpRequestScope());
    }

    public IDependencyScope Singleton()
    {
        return _singleton ?? (_singleton = new SingletonScope());
    }

    public IDependencyScope Transient()
    {
        return _transient ?? (_transient = new TransientScope());
    }

    private class HttpRequestScope : IDependencyScope
    {
        public object CreateScope()
        {
            return new CurrentScopeLifetime();
        }
    }

    private class SingletonScope : IDependencyScope
    {
        public object CreateScope()
        {
            return new RootScopeLifetime();
        }
    }

    private class TransientScope : IDependencyScope
    {
        public object CreateScope()
        {
            return new CurrentScopeLifetime();
        }
    }
} 
```

另外，在我让它工作之后，我如何使用将它传递给 ContainerBuilder？

在 Unity 中，我可以做这样的事情。

```
public sealed class UnityDependencyContainer : IDependencyContainer
{
    private readonly IUnityContainer _container;

    public UnityDependencyContainer()
    {
        _container = new UnityContainer()
    }

    public void Register<TContract, TImplementation>(IDependencyScope scope) where TImplementation : TContract
    {
        LifetimeManager manager = scope.CreateScope() as LifetimeManager;

        if (manager != null)
        {
            _container.RegisterType<TContract, TImplementation>(manager);
        }
    }
} 
```

如何将 IComponentLifetime 的实例传递给方法链？这是死胡同吗？

```
public class AutofacContainer : IDependencyContainer
{
    private static readonly ContainerBuilder Builder;

    static AutofacContainer()
    {
        Builder = new ContainerBuilder();
    }

    public void RegisterType<TContract, TImplementation>(IDependencyScope scope) where TImplementation : TContract
    {
        IComponentLifetime manager = scope.CreateScope() as IComponentLifetime;

        if (manager != null)
        {
            Builder.RegisterType<TImplementation>().As<TContract>();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-06T16:15:23.883

Autofac 并没有按照您描述的方式完全分离范围，因此**您可能正在尝试将方形钉安装在圆孔中**。

Autofac 范围更具层次性。任何生命周期范围都可以产生一个子瞬态范围。例如，您可能会看到...

*   容器/根生命周期
    *   HttpRequest 范围
        *   小型任务特定的瞬态范围

您可以“标记”范围并将组件注册到特定的命名/标记范围 - 这就是 HttpRequest 范围的工作方式。它被一个特殊的标识符“标记”。

当您解析对象时，它决定了哪个生命周期范围拥有它。解析发生在最嵌套的范围内。在上面的层次结构中，您从特定于小型任务的瞬态范围解析项目，无论它们是单例、请求范围还是其他。当单例被解析时，它将搜索生命周期范围堆栈并自动将对象的“所有权”分配给根生命周期范围。当每个请求项得到解决时，它会在堆栈中搜索具有特殊“HTTP 请求”标识符的生命周期范围，并在那里分配所有权。工厂范围的项目在当前生命周期范围内解析。

**注意：该讨论是对其工作方式的严重过度简化。** [Autofac 站点上有解释生命周期范围机制的文档。](http://autofac.readthedocs.org/en/latest/lifetime/instance-scope.html)

重点是，我在上述设计中看到了一些与 Autofac 做事的方式并没有真正“融合”的东西。

**DependencyScopeFactory 无法创建自己的瞬态或 HttpRequest 范围。**有特定的生命周期管理组件开始和结束 HttpRequest 范围，因此您需要使用它们；没有“全局”瞬态范围，所以你不能真的只创建一个。

HttpRequest 范围，假设您使用的是 MVC，看起来更像......

```
public ILifetimeScope HttpRequestScope
{
  get { return AutofacDependencyResolver.Current.RequestLifetime; }
} 
```

瞬态范围没有类似物，因为它的使用应该是内联的：

```
using(var transientScope = parentScope.BeginLifetimeScope())
{
  // Do stuff and resolve dependencies using the transient scope.
  // The IDisposable pattern here is important so transient
  // dependencies will be properly disposed at the end of the scope.
} 
```

**当您注册组件时，您不会将它们注册到“生命周期范围内”。**您实际上将它们注册到组件注册表中，并且组件注册的一部分包括有关组件生命周期的所有权信息，一旦它被解析。

```
var builder = new ContainerBuilder();

// This component is factory-scoped and will be "owned" by whatever
// lifetime scope resolves it. You can resolve multiple of these
// in a single scope:
builder.RegisterType<FirstComponent>().As<ISomeInterface>();

// This component is a singleton inside any given lifetime scope,
// but if you have a hierarchy of scopes, you'll get one in each
// level of the hierarchy.
builder.RegisterType<SecondComponent>().InstancePerLifetimeScope();

// This component will be a singleton inside a specifically named
// lifetime scope. If you try to resolve it in a scope without that
// name, it'll search up the scope stack until it finds the scope
// with the right name. If no matching scope is found - exception.
builder.RegisterType<ThirdComponent>().InstancePerMatchingLifetimeScope("scopename");

// This is a per-HTTP-request component. It's just like the
// above InstancePerMatchingLifetimeScope, but it has a special
// tag that the web integration knows about.
builder.RegisterType<FourthComponent>().InstancePerHttpRequest(); 
```

**如果您尝试创建与容器/注册无关的接口，则不需要“生命周期范围管理器”** - 相反，您需要传递一些指示预期生命周期范围的参数并执行适当的注册语法（上）根据传入的参数。

**同样，[我建议您查看该文档](http://autofac.readthedocs.org/en/latest/lifetime/instance-scope.html)。**

此外，如果您使用 Unity，**Autofac 确实有一个 Enterprise Library Configurator 包**，允许您以 Unity 样式配置 Autofac（因为这就是 EntLib 喜欢做事的方式）。这可能是要检查的东西。

如果您根本不需要使用 Unity 语法……**我建议您使用原生 Autofac 方式来做事。**试图让一个容器看起来和表现得像另一个容器是一项非常痛苦的工作。

假设您的插件位于单独的程序集中或其他任何地方，您可以轻松利用一些不错的程序集扫描语法以及 Autofac 模块并以这种方式连接您的插件。

# c - 应用程序如何在不消耗管道中现有缓冲数据的情况下从标准输入读取行？

> ID：13736772
> 
> 赞同：2
> 
> 时间：2012-12-06T04:04:22.880
> 
> 标签：c, unix, posix, pipe

执行以下命令：

```
mysql -u root -p < load_data.sql > output.tab 
```

该`-p`标志告诉 mysql 客户端 - 一个 C 程序 - 为用户提供输入密码的交互式提示。

AFAIK，像这样的输入通常是通过写入提示`stderr`然后阻塞调用来处理的`gets`，它从标准输入读取一行。

但是shell已经打开了`load_data.sql`文件并将`stdin`mysql客户端的文件描述符设置为它的文件描述符——所以不应该调用`gets`只从文件中获取第一行吗？

我最初的想法是程序会在读取一行之前搜索到最后——但你不能在管道上搜索！

那么这是如何工作的呢？有什么魔法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T04:23:22.343

提示输入密码的应用程序通常*不会*真正从标准输入中读取它们，因为这会 (a) 如果以交互方式输入密码会导致密码出现在屏幕上，并且 (b) 鼓励使用纯文本密码当事情需要自动化时（例如在其他人可以看到的命令行中`ps`通过 PostgreSQL 的`psql`SQL shell 直接打开终端设备，我怀疑 mysql 也会这样做。

一些快速搜索发现[了这个相关的问题](https://stackoverflow.com/questions/6856635/hide-password-input-on-terminal)。最受好评的答案提到了 GNU 函数[`getpass()`](http://www.gnu.org/savannah-checkouts/gnu/libc/manual/html_node/getpass.html)，它确实打开了与终端的直接连接，绕过了标准输入。我怀疑这个函数是大多数密码提示程序在 *nix 中使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:11:09.657

这不是正在打开的管道，而是`stdin`指向文件的重定向。因此，您既有一个`FILE*`（即一个流），也有一个可以使用的普通文件描述符。在较低级别的文件描述符的情况下，您可以执行一些查找操作，例如`lseek()`等，可以与这些操作一起使用以`read()`在文件中移动。

如果您仍想在被重定向到`stdin`文件时从控制终端读取数据，您只需打开控制终端以读取另一个文件描述符。您可以使用`ctermid()`以确定您的进程的控制终端是什么，并在另一个文件描述符上重新打开它。

# c# - 如何在sharepoint中捕获日期？

> ID：13736774
> 
> 赞同：0
> 
> 时间：2012-12-06T04:04:34.160
> 
> 标签：c#, visual-studio-2010, sharepoint-2010, state-machine-workflow

我需要捕获`date in`和`date out`. `date in`是创建任务的时间。`date out`是任务完成并分配给新检查员的时间。`date in`我可以在列表设置中将默认值设置为今天的日期，但是如何`date out`在状态机工作流程中设置 In 列表设置或以编程方式？我知道有一种方法可以设置`date in`从状态机工作流程，即使用 startdate

```
createtask1_TaskProperties1.StartDate = DateTime.Now; 
```

有没有类似的方法来设置日期`date out`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:22:20.810

我没有使用过状态机工作流程，但您可能可以使用 TaskProperties.DueDate = DateTime.Today.AddDays(5.0);

让我知道它是否有帮助？

谢谢

# android - 在没有 SimpleCursorAdapter 的情况下使用 LoaderManager

> ID：13736776
> 
> 赞同：0
> 
> 时间：2012-12-06T04:04:59.213
> 
> 标签：android

我正在尝试更新我大约一年前编写的应用程序，并将所有调用升级到已弃用的代码。在一个地方，我在 ListView 中使用了 SimpleCursorAdapter，出于几个原因，我想用适当的 LoaderManager 替换它。

问题是，我能够找到的所有使用 LoaderManager 的示例实际上仍然使用 SimpleCursorAdapter，即使它已被弃用。这包括官方文档。谁能指出我这样做的正确方法？如果需要，我愿意将我的 ListActivity 更新为 ListFragment，并做任何其他需要的事情。我只是不知道如何使用 LoaderManager 而不回退到不推荐使用的类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T05:35:01.760

> 问题是，我能够找到的所有使用 LoaderManager 的示例实际上仍然使用 SimpleCursorAdapter，即使它已被弃用。

该类`SimpleCursorAdapter`未被弃用，甚至在兼容性包中引入。已弃用并向您发出警告的是它[的构造函数之一，该构造函数](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html#SimpleCursorAdapter%28android.content.Context,%20int,%20android.database.Cursor,%20java.lang.String%5B%5D,%20int%5B%5D%29)在主 UI 线程上执行查询。

> 谁能指出我这样做的正确方法？

正确的方法是使用类的第二个构造函数，[this one](http://developer.android.com/reference/android/widget/SimpleCursorAdapter.html#SimpleCursorAdapter%28android.content.Context,%20int,%20android.database.Cursor,%20java.lang.String%5B%5D,%20int%5B%5D,%20int%29)。此构造函数是在`Honeycomb`（API 级别 11）中引入的，但您可以使用`SimpleCursorAdapter`兼容性包中的类在较旧的平台版本上使用它（对于可以传递 0 的标志）。其余代码是`Loader`您可以在各种示例中看到的普通代码。

# desire2learn - 复制课程内容

> ID：13736778
> 
> 赞同：2
> 
> 时间：2012-12-06T04:05:16.887
> 
> 标签：desire2learn

我们为每门课程设置了“主”模板。这些模板包含每门课程的结构和内容。

我想根据我们的时间表信息在每学期开始时自动创建课程。

我已经让 Valance 可以从模板创建课程。从我在文档中看到的内容看来，我必须解析模板的内容并将各个项目复制到独特的课程中。

这是正确的，还是有一种简单的方法可以将整个内容从模板复制到实际的课程实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T14:54:05.743

分配给课程模板的内容不会复制到将模板[列为其 CourseTemplate](http://docs.valence.desire2learn.com/res/course.html#Course.CourseOffering)的新创建的课程产品中。如果您想将内容存储在课程模板中，然后将其复制到与该模板关联的新课程中，您可以使用[课程内容 API](http://docs.valence.desire2learn.com/res/content.html)来查询模板的内容结构，并将其复制到新创建的课程中：[内容。](http://docs.valence.desire2learn.com/res/content.html#Content.ContentObjectData)用于创建新内容结构的[ContentObjectData](http://docs.valence.desire2learn.com/res/content.html#Content.ContentObjectData) JSON 块是您在询问内容结构时看到的[Content.ContentObject JSON 块的超集。](http://docs.valence.desire2learn.com/res/content.html#Content.ContentObject)

不幸的是，由于围绕组织单位文件内容存储的规则，我们真的不建议您将实际文件数据放入课程模板的内容存储中，因为没有简单的方法可以从子课程产品中引用它们，或者复制它们远程进入子课程的内容空间。

如果您确实将文件数据存储在模板的内容空间中并希望将其放入子课程中，则需要将其从 LMS 获取到客户端，然后将其重新上传到新课程中。

您可以通过在 Desire2Learn 的学习对象存储库中存储常见的课程数据对象来获得更多的利用，在该存储库中，您放入课程模板/产品的内容结构的是链接，而不是文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:41:24.840

答案似乎是没有***简单***的方法可以使用 Valence API 将模板中的所有内容批量复制到课程设置中。

我尝试通过从模板访问 TOC 对象来遍历内容结构，然后复制结构中的每个单独的模块和主题。

不幸的是，由于 API 不返回创建的模块或主题的 id，这使得这变得更加困难。因此，在添加嵌套内容对象时，您必须重新查询当前课程模块以找到您刚刚添加的对象。

那时它变得太难了，我们将自动从模板创建课程，但建议教师使用内置的导入/导出/复制组件功能将模板中的内容复制到课程中提供。

# c - 8051 c 中断

> ID：13736780
> 
> 赞同：5
> 
> 时间：2012-12-06T04:05:30.630
> 
> 标签：c, 8051

我正在使用 C 在 8051 微控制器上编写程序。我使用的编译器是 Keil Microvision。我被卡住了，无法弄清楚我的代码中缺少什么。我知道这是非常基本的代码，我只是不知道我应该做什么。

所以我所做的几乎就是向用户发送一个句子并让他们通过串行端口回答是或否，我使用了串行中断。那部分工作正常。如果我从那个人那里得到否定，我想通过定时器中断生成一个 5kHz 的方波。我希望这个方波由外部中断控制，当引脚 P3.2 上的外部中断打开或关闭时打开和关闭它。这是我所有的代码

```
#include <REG52.H>
#include <stdio.h>
sbit WAVE = P1 ^ 7;
#define BIT(x) (1 << (x))

void timer0() interrupt 1  // timer is controlling square wave timer 0
{
  WAVE = ~WAVE;
}

void interrupt0() interrupt 0
{
  IE ^= BIT(1);
}

void serial0() interrupt 4
{
  unsigned char x;
  unsigned int i, z;
  unsigned char yes[] = " YES ";
  unsigned char no[] = " NO ";
  unsigned char nvalid[] = " NOT VALID TRY AGAIN ";

  while (RI == 1) {

    x = SBUF;
    RI = 0;

    if (z < 1) {
      if (x == 'n') {
        for (i = 0; i < 4; i++) {
          SBUF = no[i];
          while (TI == 0) ;  //wait for transmit
          TI = 0;
          z++;
        }
      }
    } else {
      return;
    }

    if (x == 'y') {
      for (i = 0; i < 5; i++) {
        SBUF = yes[i];
        while (TI == 0) ;
        TI = 0;
      }
    } else if (x != 'n') {
      for (i = 0; i < 21; i++) {
        SBUF = nvalid[i];
        while (TI == 0) ;
        TI = 0;
      }
    }

    TI = 0;
    return;
  }
}

void main()
{
  TMOD = 0x20;
  TH1 = 0xF6;    //baud rate
  SCON = 0x50;
  TH0 = 0xA4;
  IE = 0x93;    //enable interrupts
  IP = 0x10;    // propriety to serial interrupt
  TR1 = 1;    //start timer 1
  TR0 = 1;    //clear timer 0
  TI = 1;
  printf("Hello, Are you okay? Press y for yes and n for no ");
  while (1) ;
} 
```

我遇到问题的部分是前面代码中的这两个中断

```
void timer0() interrupt 1 // timer is controlling square wave timer 0
{ 
    WAVE=~WAVE;
}

void interrupt0() interrupt 0
{
  IE ^= BIT(1);
} 
```

任何正确方向的提示将不胜感激！谢谢。抱歉格式化

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-30T09:39:55.253

被中断修改的变量应该定义为 volatile：

```
volatile sbit WAVE = P1 ^ 7; 
```

# java - 调整 JFrame 大小时如何调整 JFrame 中组件的大小？

> ID：13736785
> 
> 赞同：1
> 
> 时间：2012-12-06T04:05:59.953
> 
> 标签：java, swing, jframe, layout-manager, absolutelayout

解决

我已经环顾了一段时间，似乎无法弄清楚如何做到这一点。

我的 JFrame 中有很多组件，我可以调整 JFrame 的大小。当我调整 JFrame 的大小时，我希望内部组件与 JFrame 一起调整大小，但它们却完全保持在 GUI 首次运行时的位置。

我该如何解决这个问题？是否有我没有在某处设置的值或什么？

编辑：另外，我没有使用任何布局管理器。

```
getContentPane().setLayout(null); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T04:08:24.637

你说：

> 编辑：另外，我没有使用任何布局管理器。getContentPane().setLayout(null);

那是你的问题。您几乎不应该使用空布局。使用和维护一个以智能方式使用布局管理器的 gui 要容易得多*。*阅读[布局管理器教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)，因为它们可以提供帮助。

# java - 输出简单 MIDI 文件的最简单方法？

> ID：13736790
> 
> 赞同：1
> 
> 时间：2012-12-06T04:06:49.197
> 
> 标签：java, midi

我有几个音符，每个音符都有一个 midi 数字、持续时间和速度。

我目前正在使用 Synthesizer 播放音符：

```
Synthesizer synthesizer = MidiSystem.getSynthesizer();
synthesizer.open();

MidiChannel[] channels = synthesizer.getChannels();

for(Note n: song)
{
    n.playNote(channels[0]);
}

synthesizer.close(); 
```

**Note.playNote()**

```
public void playNote(MidiChannel c) throws InterruptedException
{
    if (type == 'n')
    c.noteOn(noteNumber, 60);
    Thread.sleep(getLength());
    if (type == 'n')
    c.noteOff(noteNumber);
} 
```

但是，现在我想将它保存到一个 MIDI 文件中。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:45:35.613

一个简单的过程基本上如下：

*   创建一个序列对象；
*   创建一个或多个轨道 (sequence.createTrack())
*   对于每个音符，创建相关的 MidiMessages 代表音符打开和音符关闭消息并将它们添加到轨道
*   调用 MidiSystem.write() 将填充的序列写入文件。

# java - 使用 StanfordNLP 进行名称实体识别的训练数据集

> ID：13736792
> 
> 赞同：0
> 
> 时间：2012-12-06T04:07:19.557
> 
> 标签：java, nlp, stanford-nlp

我已经使用 OpenNLP 创建了一个模型。但现在我正在研究使用条件随机场的 StanfordNLP。我想知道如何使用 stanfordNLP 为 NER 训练数据。对于 OpenNLp，我们使用 START 和 END 标签，但我不知道如何使用 StanfordNLP 进行训练。请给我一个例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T05:10:03.297

看看[http://nlp.stanford.edu/software/crf-faq.shtml#b](http://nlp.stanford.edu/software/crf-faq.shtml#b)

这应该解释你需要知道什么才能开始。然后有许多选项主要只记录在代码中。

# php - 如何，或者我应该如何使用 php 和 mysql 缓存图像？

> ID：13736793
> 
> 赞同：-1
> 
> 时间：2012-12-06T04:07:23.067
> 
> 标签：php, mysql, caching

基本上我想做的就是在插入我需要显示的数据时使图像加载更快。图像永远不会改变，但相同代码中的文本会根据您正在查看的人而改变。我的代码循环遍历一组 25 个“技能”并获取每个技能的图像，并将用户信息显示在与图像相同的行上。我将如何缓存图像以使代码运行得更快并且不必不断加载图像？这是我的代码的样子：

```
 function compare($user1) {
    include "mysql.ws";
    $user1 = str_replace(" ", "_", $user1);
    $query = mysql_query("SELECT a.*, b.* FROM skills a JOIN activities b ON(a.playerName LIKE b.playerName) WHERE a.playerName LIKE '".fixName($user1)."' LIMIT 1") or die(mysql_error());

    $row = mysql_fetch_array($query);
    $overall['lvl'] = 0;
    $overall['xp'] = 0;
    for ($i = 1; $i <=25; $i++){
        $xptype = findType($i)."xp";  
        $overall["lvl"] += getLevelForXP($row[$xptype], $i);
        $overall["xp"] += $row[$xptype];
    }
        //updateDonator($user1);

    echo'<div class="OrnamentalBoxBg"><div class="OrnamentalBoxContent">
        <div class="header">
        <div class="left">
        <span class="columnLevel">Level</span>
        <span class="columnTotal">Total XP</span>
        <span class="columnRank">Rank</span>
        </div></div>
        <div class="row" data-skill="combat" data-member="false">
        <div class="left">
        <a href="http://sage-scape.com/hiscores/overall.ws?category_type=0&amp;table=0&amp;rank='.findRank($user1,"0").'#'.findRank($user1,"0").'">
        <span class="columnLevel">
        '.dots($overall["lvl"]).'
        </span>
        </a>
        <a href="http://sage-scape.com/hiscores/overall.ws?category_type=0&amp;table=0&amp;rank='.findRank($user1,"0").'#'.findRank($user1,"0").'">
        <span class="columnTotal">
        '.dots($overall["xp"]).'
        </span>
        </a>
        <a href="http://sage-scape.com/hiscores/overall.ws?category_type=0&amp;table=0&amp;rank='.findRank($user1,"0").'#'.findRank($user1,"0").'">
        <span class="columnRank">
        '.findRank($user1,"0").'
        </span>
        </a>
        </div>
        <div class="middle">
        <img src="http://sage-scape.com/hiscores/img/overall.png?2" alt="" title="">
        <span class="statName"><span><span><span>Overall</span></span></span></span>
        </div>
        </div>
    ';
    for ($i = 1; $i <=25; $i++){
        $xptype = findType($i)."xp";  
        if($i == 25){
            echo'
                <div class="row last-row" data-skill="'.findSkill($i).'" data-member="'.member($i).'"> ';

        } else {
            echo'
                <div class="row" data-skill="'.findSkill($i).'" data-member="'.member($i).'"> ';
        }
        if($row[$xptype] > 1)
        echo'
            <div class="left">
            <a href="http://sage-scape.com/hiscores/overall.ws?category_type=0&amp;table='.$i.'&amp;rank='.findRank($user1,"$i").'#'.findRank($user1,"$i").'">
            <span class="columnLevel">
                    '.getLevelForXP($row[$xptype],"$i").'
                    </span>
            </a>
            <a href="http://sage-scape.com/hiscores/overall.ws?category_type=0&amp;table='.$i.'&amp;rank='.findRank($user1,"$i").'#'.findRank($user1,"$i").'">
            <span class="columnTotal">
            '.dots($row["$xptype"],"$i").'
            </span>
            </a>
            <a href="http://sage-scape.com/hiscores/overall.ws?category_type=0&amp;table='.$i.'&amp;rank='.findRank($user1,"$i").'#'.findRank($user1,"$i").'">
            <span class="columnRank">
            '.findRank($user1,"$i").'
            </span>
            </a>
            </div>
            <div class="middle">
            <img src="http://sage-scape.com/hiscores/img/xp_'.fixName(findType($i)).'_total.png?2" alt="" title="" />
            <span class="statName"><span><span><span>'.findType($i).'</span></span></span></span>
            </div>
            </div>
        ';
        else
        echo'
            <div class="left">
            <a href="http://sage-scape.com/hiscores/overall.ws?category_type=0&amp;table='.$i.'&amp;rank='.findRank($user1,"$i").'#'.findRank($user1,"$i").'">
            <span class="columnLevel">
                    --
                    </span>
            </a>
            <a href="http://sage-scape.com/hiscores/overall.ws?category_type=0&amp;table='.$i.'&amp;rank='.findRank($user1,"$i").'#'.findRank($user1,"$i").'">
            <span class="columnTotal">
            --
            </span>
            </a>
            <a href="http://sage-scape.com/hiscores/overall.ws?category_type=0&amp;table='.$i.'&amp;rank='.findRank($user1,"$i").'#'.findRank($user1,"$i").'">
            <span class="columnRank">
            --
            </span>
            </a>
            </div>
            <div class="middle">
            <img src="http://sage-scape.com/hiscores/img/xp_'.fixName(findType($i)).'_total.png?2" alt="" title="" />
            <span class="statName"><span><span><span>'.findType($i).'</span></span></span></span>
            </div>
            </div>
        ';
    }
    echo'
    </div></div>
<div class="OrnamentalBoxBottom"></div>
</div>
<div class="OrnamentalBox Width923 SegmentTwo" id="activityStats">
<div class="OrnamentalBoxTop"></div>
<div class="OrnamentalBoxTitle"><div class="Centre1"><div class="Centre2">
<h3 class="Gradient NoFlourish Centre"><span class="spacing" aria-hidden="true">Activity Stats</span>
<span class="G0">Activity Stats</span>
<span class="G1" aria-hidden="true">Activity Stats</span>
<span class="G2" aria-hidden="true">Activity Stats</span>
<span class="G3" aria-hidden="true">Activity Stats</span>
<span class="G4" aria-hidden="true">Activity Stats</span>
<span class="G5" aria-hidden="true">Activity Stats</span>
<span class="G6" aria-hidden="true">Activity Stats</span>
</h3></div></div></div>
<div class="FlatHeader playerNames">
<div class="left">
'.BBCode($user1).'</div>
</div>
<div class="playerAvatars">
<div class="left">
<img src="http://services.runescape.com/m=avatar-rs/'.$user1.'/chat.png?cachebust=1342804665991" alt="" title="">
</div>
</div>
<div class="OrnamentalBoxBg"><div class="OrnamentalBoxContent">
<div class="header">
<div class="left">
<span class="columnScore">Score</span>
<span class="columnRank">Rank</span>
</div>
</div>';
    for ($i = 0; $i < 7; $i++){
        $xptype = findActivityP($i);  
        if($i == 6){
            echo'
                <div class="row last-row">';
        } else {
            echo'
                <div class="row">';
        }
        echo'
        <div class="left">
        <a href="http://sage-scape.com/hiscores/overall.ws?category_type=1&amp;table='.$i.'&amp;rank='.findARank($user1,"$i").'#'.findARank($user1,"$i").'">
        <span class="columnScore">
        '.$row["$xptype"].'
        </span>
        </a>
        <a href="http://sage-scape.com/hiscores/overall.ws?category_type=1&amp;table='.$i.'&amp;rank='.findARank($user1,"$i").'#'.findARank($user1,"$i").'">
        <span class="columnRank">
        '.findARank($user1,"$i").'
        </span>
        </a>
        </div>
        <div class="middle">
        <img src="http://sage-scape.com/hiscores/img/'.findActivityP($i).'.png" alt="" title="">
        <span class="statName"><span><span><span>'.findActivity($i).'</span></span></span></span>
        </div>
        </div>
        ';
    }
} 
```

有没有办法做到这一点？我有一个 MySQL 数据库，我可以做到这一点，但我不确定如何做到这一点。有人可以告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:24:33.463

至于缓存的实际机制，你不会用你可以构建的任何东西击败浏览器或服务器中的内置工具。您可以做几件事来优化这些机制。

[Yahoo! 的这篇很棒的文章](http://developer.yahoo.com/performance/rules.html)详细介绍了许多很棒的技术。[关于最佳实践](http://developer.yahoo.com/performance/rules.html)。总结一下：

*   在图像上使用长的 Expires 标头（便宜且有效）
*   使用图像精灵和图像映射
*   内联图像（通常称为 base64 内联图像）
*   使用 CDN（内容分发网络）
*   缩小 CSS 和 JavaScript
*   gzip 内容（压缩）
*   将脚本放在底部，将 CSS 放在顶部

到目前为止，最有效且普遍廉价和有效的优化方法之一是将这些图像转换为单个 CSS sprite，这需要每个访问者下载一​​个可缓存的。

CSS sprites 非常简单。有[一篇关于如何在 css-tricks 上实现它们](http://css-tricks.com/css-sprites/)的好文章，还有一篇[关于 A List Apart 的文章](http://alistapart.com/articles/sprites)。

本质上，将图像组合成一个平铺图像。sprites 的灵感来自旧的主机游戏，所以我将以我的例子向他们致敬：

![在此处输入图像描述](../Images/f6dfbd60e729ef0884662a78d8b7951f.png)

然后您“剪辑”图像以仅显示您想要的每个图像的区域：

```
div.sprite { background-image:url('assets/sprites/avatars.gif')}
div.sprite.purple_druid {background-position: -75px 0px }
div.sprite.king {background-position: -150px -150px} 
```

一旦你有了这样的东西，我认为在 PHP 和 MySQL 中没有太多要解决的问题，坦率地说，当你只有 25 个静态内容的图像时，我认为这是一个错误的优化位置。

缓存的另一个重要考虑因素是您是否真的需要优化。更高端的服务器是否比花在优化上的开发时间更实用？网站真的很慢吗？内容交付网络能否加快速度以获得廉价的回报？

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:23:59.313

根据我理解你的问题，你不想每次都加载图像，它应该缓存在浏览器中，所以为了实现这一点，你必须`?2`在图像名称之后删除

```
src="http://sage-scape.com/hiscores/img/xp_'.fixName(findType($i)).'_total.png?2
                                                                              ^ 
```

您`2`在图像名称之后作为参数传递，因为这个浏览器没有缓存图像并一遍又一遍地加载相同的图像。所以删除`?2`它会将图像缓存在浏览器中。

# windows - 监视 Windows 中的应用程序/驱动程序交互

> ID：13736798
> 
> 赞同：0
> 
> 时间：2012-12-06T04:08:07.713
> 
> 标签：windows, driver, monitoring

我想知道是否有办法监控应用程序和驱动程序之间的交互？对我来说，我在使用 libusbdotnet 读写 USB 打印机时偶尔会遇到问题。普通应用程序直接读取和写入 USB 打印机驱动程序。我想监控它在做什么，看看它是否有什么特别的东西来控制打印机。我环顾四周，并没有找到一个好的方法来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T12:13:20.700

据我所知，没有开箱即用的工具可以做到这一点（主要是因为有多种驱动类型，每种类型都必须遵守不同的操作系统定义的接口）。您需要一个位于应用程序和驱动程序之间并拦截交互的软件组件。这通常可以通过创建过滤器驱动程序来实现（最好在用户空间中，因为它简化了开发和使用）。有关更多详细信息，请参见此处：http: [//msdn.microsoft.com/en-us/library/windows/hardware/gg463453.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463453.aspx)

# ruby-on-rails-3.2 - 在 Rails 3.2.8 中，如何为我的所有视图添加背景图像？

> ID：13736802
> 
> 赞同：0
> 
> 时间：2012-12-06T04:08:24.610
> 
> 标签：ruby-on-rails-3.2

我想为我的所有视图添加背景图像，我该怎么做？

*   请显示代码示例

*   答案是：

    正文{背景图像：url（'/assets/myimage.jpeg'）；}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T07:09:55.623

这对我有用，至少在我的“本地主机”环境中：

```
body { 
background-image: url(image_path('photobackground.jpg'));
background-size: cover; 
```

}

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:16:18.797

只需将您的文件放在“app/assets/images/”中，在您看来，您必须使用：

```
<%= image_path "exemple.png" %> 
```

或者您可以使用以下命令直接生成 img 标签：

```
<%= image_tag "exemple.png" %> 
```

# c# - 如何从具有动态的基类中调用子保护方法

> ID：13736803
> 
> 赞同：0
> 
> 时间：2012-12-06T04:08:27.790
> 
> 标签：c#, c#-4.0, .net-4.5

得到以下代码

```
 protected virtual void InternalChange(DomainEvent @event)
 {
       ((dynamic) this).Apply(@event);
 } 
```

子对象通过多个字段实现处理事件的逻辑，例如

```
 protected Apply ( Message1 message)
 {

 }
protected Apply ( Message2 message)
 {

 } 
```

然而，这给出了一个错误，说它无法访问。我尝试了虚拟但没有运气..

有任何想法吗 ？..希望没有像这种方法那样的反思。（例如[http://blogs.msdn.com/b/davidebb/archive/2010/01/18/use-c-4-0-dynamic-to-drastical-simplify-your-private-reflection-code.aspx](http://blogs.msdn.com/b/davidebb/archive/2010/01/18/use-c-4-0-dynamic-to-drastically-simplify-your-private-reflection-code.aspx)）

更多信息我可以将 InternalChange 移动到子类，但 id 而不是让孩子进行调度。

```
 void Apply(AggregateRootHandlerThatMeetsConventionEvent domainEvent)
    {
        OnAggregateRootPrivateHandlerThatMeetsConventionCalled = true;
    }

    void Apply(AggregateRootPrivateHandlerThatMeetsConventionEvent domainEvent)
    {
        OnAggregateRootPrivateHandlerThatMeetsConventionCalled = true;
    }

    void Apply(AggregateRootProtectedHandlerThatMeetsConventionEvent domainEvent)
    {
        OnAggregateRootProtectedHandlerThatMeetsConventionCalled = true;
    }

    protected override void InternalChange(DomainEvent @event)
    {

        Apply(((dynamic)@event));
    } 
```

现在编辑我在孩子中使用它（并使父抽象），它可以工作，但它的丑陋 id 而不是实现者不用担心调度。

```
 protected void Handle(DomainEvent message)
    {
        Handle ( (dynamic) message);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T04:19:24.870

例如，您应该将基类定义为具有`abstract`或`virtual`在方法签名上。

```
protected abstract void Apply(Message1 message); 
```

如果`virtual`您想在您的基类中定义一个不必（但可以）在子类中覆盖的实现，请使用此选项。

在您的子类中，您可以这样覆盖它：

```
protected override void Apply(Message1 message)
{
    // code here
} 
```

此外，在您的示例中，该方法`InternalChange`尝试`Apply`使用 type 的参数进行调用`DomainEvent`，但是，在您的两个重载 for 中`Apply`，它们都接受`Message1`or类型`Message2`。如果它确实编译了，那么无论如何您都会收到运行时错误，因为 .NET 动态运行时将无法找到与参数匹配的适当方法。

至于使用动态，我认为对于手头的问题是不必要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:33:52.100

逻辑有点……颠倒了。我不明白一两件事：什么类调用应用，基类型或子类型？子类发送事件的识别是如何发生的？你不能渲染 Apply virtual protected 并在基类中将其留空吗？

# java - 在启动时创建新实例

> ID：13736805
> 
> 赞同：1
> 
> 时间：2012-12-06T04:08:54.580
> 
> 标签：java, android, oncreate

我对 android 还很陌生，但我注意到几乎每个教程都以此开头：

```
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState); 
```

但我不希望状态在重新启动应用程序的整个过程中持续存在。如果用户重新启动应用程序，我希望用户从头开始。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:40:54.300

在 Android 中，状态管理在 Activity 生命周期中由您决定。onCreate、onPause、onDestroy 和其他生命周期方法都可用于保存和恢复活动状态以及执行其他操作。如果您不希望您的应用程序保存任何状态，无论是文本框或动画还是其他，请不要捕获它并在这些事件中恢复它。

Bundle [savedInstanceState](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)仅在活动暂停或停止时由您设置，允许您存储状态并在 onCreate 或 onResume 方法中获取它，但这也发生在布局的方向更改（用户提示从纵向到横向）然后您可能确实想在该 Bundle 中保存状态详细信息。

当然，您可以随时重置任何覆盖 onResume 的字段。

此外，[活动启动模式](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)可能值得一看。很多时候，我会将我的主要活动设置为 singleTop，以便在任何给定时间只启动一个实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:36:16.110

```
 protected void onPause()
   {
   finish();  
   } 
```

它会在暂停时终止活动。每次都会创建一个新实例。

# linux - 如何在 shell 脚本中显示参数

> ID：13736807
> 
> 赞同：0
> 
> 时间：2012-12-06T04:09:06.643
> 
> 标签：linux, shell

我有一个名为 displayArg.sh 的 shell 脚本，这就是我打算运行它的方式-

```
./displayArg hello 
```

并输入输出**arg is hello**

以下是脚本——

```
if [ $1 == "" ]; then
 default="Default"
 echo "no value is given. Output is $default"
else
 value=$?
 echo "entered arg is $value" #I know I am wrong in these 2 lines, but not sure how to fix it
fi 
```

请多多包涵。我是 Shell 脚本的新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:17:08.703

你要：

```
value="$1" 
```

（`$?`是最后一个命令的状态，它是 1，因为 test 命令是最后执行的。）

或者您可以简化为：

```
if [ "$1" == "" ]
then
    echo "no value is given. Output is Default"
else
    echo "entered arg is $1"
fi 
```

注意测试中的引号`"$1"`。如果字符串为空，则会出现语法错误。您的替代方法`bash`是使用`[[ $1 == "" ]]`测试。

# c - 如何检查输入字符串是否由整数组成

> ID：13736809
> 
> 赞同：1
> 
> 时间：2012-12-06T04:09:11.713
> 
> 标签：c, string, while-loop

我正在尝试创建一个 while 循环，其中条件检查字符串的前四个元素是否不是整数。这是我的代码，不知何故它不起作用。我尝试使用 ctype.h 标头中的 isdigit 函数。

```
char tr_code[200];
char *endptr;

scanf("%s", &tr_code);
fd_code=strtol(tr_code,&endptr,10);

while(strlen(tr_code)!=4 && isdigit(tr_code[0])==0 && isdigit(tr_code[1])==0 && isdigit(tr_code[2])==0 && isdigit(tr_code[3])==0)
{
    printf("\nInvalid Code. please enter another '4-digit' Code: ");
    scanf("%s", &tr_code);
    fd_code=strtol(tr_code,&endptr,10);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:19:28.977

您正在使用`&&`，但`||`您应该使用的是：

```
while(strlen(tr_code) != 4 || !isdigit(tr_code[0]) || !isdigit(tr_code[1]) || !isdigit(tr_code[2]) || !isdigit(tr_code[3])) 
```

使用`&&`，任何四个字符长的输入，或者在前四个位置中的任何一个都有一个数字（即使该内存是最后一个输入的剩余部分，因为字符串可能更短）都会通过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:13:29.813

IIRC 'scanf' 签名返回一个整数，即在终端读取的字符数。

# java - Java 赋值出错

> ID：13736810
> 
> 赞同：-1
> 
> 时间：2012-12-06T04:09:18.323
> 
> 标签：java

我在为作业编写的代码中遇到了一些错误，我不太理解它们。

```
I:\Java Programming\FibonacciJDialog.java:19: error: variable sum might not have been initialized
        return sum;
               ^
I:\Java Programming\FibonacciJDialog.java:20: error: unreachable statement
        JOptionPane.showMessageDialog(null,"That Fibonacci Number is" ); // Display results in dialog box.
        ^
I:\Java Programming\FibonacciJDialog.java:25: error: missing return statement
    }
    ^
3 errors
Tool completed with exit code 1 
```

这是代码：

```
import javax.swing.JOptionPane;

public class FibonacciJDialog {

    public static long main(String[] args) {
        String num;
        int n;
        int sum;

        num = JOptionPane.showInputDialog("Enter n: "); // getting user number input.
        n = Integer.parseInt(num);

        Fibonacci box = new Fibonacci(); // Creating new Fibonacci object.

        JOptionPane.showMessageDialog(null, "That Fibonacci Number is"); // Display results in dialog box.
        return sum;

        System.exit(0); // Terminate

    }
} 
```

这是我制作的斐波那契类。

```
public class Fibonacci {
    int Fib(int n) {
        int in1 = 1, in2 = 1;
        int sum = 0;//initial value
        int index = 1;
        while (index < n) {
            // sum=the sum of 2 values;
            // in1 gets in2
            // in2 gets sum
            // increment index
        }
        return sum;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:14:46.343

您永远不会为 sum 赋值。

```
sum = box.fib(n); 
```

在您的 main 函数中，您还返回值而不是将其输出到控制台。

```
JOptionPane.showMessageDialog(null,"That Fibonacci Number is" + sum); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T02:03:06.537

我注意到的一些错误：

1.  您不分配`sum`值。它只是声明的，但没有初始化。这就是堆栈跟踪告诉您的内容 - 您必须将值初始化为某些东西。

2.  我敢打赌“无法访问的代码”是一条红鲱鱼 - 在您初始化变量后，我看不到任何不会带您进入`new`Fibonacci 类的代码路径。

3.  出于某种原因，您决定`long`从`main()`. 我不确定它是如何工作的——你可能在其他`main`地方有一些其他方法调用这个类——但你可以返回 a `long`，或者将方法的签名设置为`void`.

# c - 将 C 代码与 Cuda 代码链接

> ID：13736811
> 
> 赞同：2
> 
> 时间：2012-12-06T04:09:31.637
> 
> 标签：c, linker, cuda

所以我正在编写一个非常基本的 CUDA 代码（向量加法）来自学 CUDA 编程的基础知识。当我编写一个 .cu 文件时，我已经让它工作了，但现在我试图让它与链接在一起的 .c 和 .cu 文件一起工作。我的 main.c 文件如下：

```
#include "Test.h"
#include <stdlib.h>

int main(int argc, char *argv[]) {
        int n = 1000;
        size_t size = n * sizeof(float);
        int i;

        float *h_a = malloc(size), *h_b = malloc(size), *h_c = malloc(size);

        for(i = 0; i < n; i++) {
                h_a[i] = h_b[i] = i;
        }

        addVec(h_a, h_b, h_c, n);

        exit(0);
} 
```

在这里，Test.h 简单地说：

```
void addVec(float *, float *, float *, int); 
```

我的 vecAdd.cu 文件说：

```
#include "Test.h"

__global__ void vecAdd(float *a, float *b, float *c, int n) {
        int i = blockDim.x * blockIdx.x + threadIdx.x;

        if(i < n)
                c[i] = a[i] + b[i];
}

void addVec(float *a, float *b, float *c, int n) {
        float *d_a, *d_b, *d_c;
        size_t size = n * sizeof(float);

        cudaMalloc(&d_a, size);
        cudaMalloc(&d_b, size);
        cudaMalloc(&d_c, size);

        ...
} 
```

然后我运行命令：

```
gcc -c -Wall -O3 main.c -o ../obj/main.o
nvcc -c -O3 vecAdd.cu -o ../obj/vecAdd.o
gcc -L/usr/local/cuda/lib64 -lcudart ../obj/main.o ../obj/vecAdd.o -o ../bin/nvTest 
```

前两个工作正常。最后一个，当我尝试链接两个目标文件时，告诉我我有一个未定义的 addVec 引用，尽管它是在 vecAdd.cu 中定义的......我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T04:30:02.900

[您有一个与此处](https://stackoverflow.com/questions/13553015/cuda-c-linker-error-undefined-reference)描述的基本相同的 C/C++ 链接问题。这是因为 nvcc 对主机代码使用 c++ 编译器（创建 c++ 样式链接引用，即“mangling”），而 gcc 将 main.c 解释为 ac（不是 c++）文件，因此创建 c 样式链接引用。

至少有两种方法可以解决它：

1.  将您的 main.c 转换为 main.cpp 并在您现在使用 gcc 的地方使用 g++（用于您的第一个和第三个编译和链接步骤）。然后一切都将是一致的 c++ 样式引用。
2.  在您的 C++ 模块 (vecAdd.cu) 中声明外部引用应该是 C 风格，如此[处](https://stackoverflow.com/questions/13553015/cuda-c-linker-error-undefined-reference)所述。

# python - argumentparser 关闭文件参数

> ID：13736812
> 
> 赞同：9
> 
> 时间：2012-12-06T04:09:57.223
> 
> 标签：python

argumentparser 可以采用文件类型参数并直接打开文件，例如：

```
parser.add_argument('infile', nargs='?', type=argparse.FileType('r'))
args = parser.parse_args().__dict__
input = args['infile'].readlines() 
```

我需要`args['infile']`在我的程序中关闭吗？argumentparser 会为我关闭它吗？我没有在文档中找到任何地方提到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T04:15:05.020

不，它不会关闭文件类型对象.. 看到[这个](http://bugs.python.org/issue13824)

这里的问题是它`FileType`可能会返回`stdin`or `stdout`，所以它不能总是关闭文件对象。

大量未关闭的文件句柄可能会给某些操作系统带来问题，但仅此而已。从好的方面来说，argparse 接受任何可以检查和转换字符串输入的可调用对象作为其类型参数这一事实简单、干净且有效。

也看看[这个](http://mail.python.org/pipermail/python-bugs-list/2012-February/158650.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T04:20:28.590

[对源代码](http://hg.python.org/releasing/2.7.3/file/7bb96963d067/Lib/argparse.py)的一些挖掘表明它不会为您关闭它。这是有道理的，因为它还必须打开文件进行写入，而您可能不希望它关闭这些文件。

# android - 安卓蓝牙设备超出范围

> ID：13736813
> 
> 赞同：0
> 
> 时间：2012-12-06T04:09:58.713
> 
> 标签：android, bluetooth

我有以下 android 代码，它创建与远程设备的蓝牙连接。有什么方法可以发现远程设备超出范围？

```
private void connectToRobot(BluetoothDevice bd){            
    try{
        Method m = bd.getClass().getMethod("createRfcommSocket", 
            new Class[] {int.class});
        socket = (BluetoothSocket) m.invoke(bd, 1);

        socket.connect();               
        Toast.makeText(AndroidBluetooth.this,"CONNECTED ", 
            Toast.LENGTH_LONG).show();

        os = socket.getOutputStream();
    }catch (Exception e){        
        Log.e(tag,"Error interacting with remote device [" + 
            e.getMessage() +"]");               
    }        
} 
```

我现在唯一能得到的信息是 BluetoothSocket 是否成功。有没有办法确定连接的强度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T04:27:00.190

我不知道有任何功能可以确定设备是否超出范围或用户是否刚刚断开连接，但是您可以做的一件事是监控 RSSI，如果它在断开连接之前降低，请致电它超出范围。如果断开时有字符串信号，则用户称其为断开。

如果某个答案对您有帮助，您应该将其标记为已接受的答案，以提高您的接受率并帮助将来可能查看这些帖子的其他人。（您有几个问题的答案未被接受）。

# java - 查找Java中的数组中是否存在数字

> ID：13736814
> 
> 赞同：-1
> 
> 时间：2012-12-06T04:10:08.533
> 
> 标签：java

我有一个 account_numbers 数组。我正在从用户那里获取输入并尝试查看输入是否存在于数组中。我一直在尝试在参数中使用 for 循环的 if 语句，但我觉得这太过分了。我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T04:44:50.767

您可以使用 Arrays 实用程序类及其简单的 BinarySearch 算法：

```
Arrays.sort(array);  // must sort before next line
boolean found = Arrays.binarySearch(array, someValue) > -1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T04:23:41.243

如果您仍想在不使用列表的情况下遍历数组，则可以使用 for 循环的这种基本结构：

```
boolean validInput = false;
for (int i = 0; i < account_numbers.length; i++) {
    if (account_numbers[i] == userInput) {
        validInput = true;
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T04:14:51.010

最简单的方法是将数组转换为列表并使用`contains`如下方法：

```
 Long[] account_numbers = new Long[SIZE];//Your existing array

    //get the list from array
    List<Long> accountNumbers = Arrays.asList(account_numbers);

    //check the desired account exist or not
    Long accountToSearch= new Long("12345");
    if(accountNumbers.contains(accountToSearch)){
        //account exist
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-25T16:55:20.917

```
 Integer arr[] = { 1, 2, 3, 4, 5, 6, 7, 8, 9 };
    int a = 7;
    boolean isThere = false;
    List<E> list = new ArrayList<>();
    list.addAll((Collection<? extends E>) Arrays.asList(arr));
              // enter array into the list
    if (list.contains(a)) {
        isThere = true;
    }

    System.out.println(isThere); 
```

# android - webview中的Android文本输入显示第二个框

> ID：13736817
> 
> 赞同：3
> 
> 时间：2012-12-06T04:10:27.147
> 
> 标签：android, cordova, webview, kendo-ui

我正在使用PhoneGap 为Android（和iOS）开发一个应用程序，并且遇到了一个问题，由于一些`-webkit-transform: translate3d(x,y,z);`调用，我由Android 创建的文本输入框不再与页面上的元素对齐。

我遇到的问题与此问题相同[，](https://stackoverflow.com/questions/5347078/android-webview-input-boxes-doubled)但是我希望隐藏 Android 创建的框，而是使用我的应用程序 DOM 中存在的框。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T07:31:06.987

在我们的文档中有一篇关于 Android 表单错误的[特定文章](http://docs.kendoui.com/getting-started/mobile/forms)，请查看。不幸的是，这个问题没有完整的解决方案，但至少较新的 Kendo UI Mobile 版本为这个问题实现了部分解决方法（顺便说一句，最终在 Jelly Bean 中修复）。由于该解决方法有几个负面影响，请考虑是否要使用它。

# iphone - 使用 Chipmunk 物理引擎创建椭圆

> ID：13736819
> 
> 赞同：0
> 
> 时间：2012-12-06T04:10:47.153
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone, chipmunk

我需要创建一个宽度为 52 像素、高度为 47 像素的椭圆。使用 Chipmunk 引擎，我发现您可以创建具有特定半径的圆以及多边形。我是使用 Chipmunk 的新手，引擎的文档非常简短。

如何在 Chipmunk 中创建椭圆？我目前正在使用 iPhone，使用 Objective-c 和 cocos2d。

我知道进入这些细节似乎没有用，但我需要尽可能精确地创建它。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T06:27:20.287

Chipmunk 的作者 slembcke 的建议似乎是“使用多边形来近似它”。 [请参阅此论坛帖子。](http://chipmunk-physics.net/forum/viewtopic.php?t=1424)

如果多边形近似不够好，您将不得不修改 Chipmunk 以添加新的椭圆形状类型，因为它不支持椭圆。并且添加对椭圆的支持可能是大量的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T11:06:34.400

您还可以使用[PhysicsEditor](http://www.physicseditor.de)设计任何形状。

如果您已经有一个椭圆的图像，那么您可以使用该图像来允许 PhysicsEditor 跟踪图像的边界。无论哪种方式，这都比实际编程形状要容易得多。

# html - 导航栏宽度错误 - 不同的浏览器

> ID：13736824
> 
> 赞同：2
> 
> 时间：2012-12-06T04:11:09.923
> 
> 标签：html, css

我的 CSS / HTML 导航栏有问题。我目前在 Mac 上使用 safari，导航效果很好。但是，当我在 Chrome/Firefox/IE 中打开它时，边框不会占据导航栏的整个长度。

你可以在这里看到导航：[http ://www.tkdqld.xeonweb.com.au](http://www.tkdqld.xeonweb.com.au)

这可能是我的 CSS 中的一些愚蠢的东西。我的CSS在下面

```
#nav {
    position:relative;
    text-align:center;
    width:1155px;
    height: 36px;
    margin:auto;
}

#nav ul {
    margin:0;
    position:absolute;
}

/* 1 Level Horizontal Nav */

#nav ul li {
    display: inline;
    float:left;
    text-align:center;
    position: relative;
    height:36px;
    padding-right:43px;
    padding-left:42px;
    position:relative;
    border-right:solid 1px #FEE697;
    border-left:solid 1px #FEE697;
}

#nav li a, #nav li a:link {
    font-family: 'SommetRoundedBold',"Helvetica Neue", Helvetica, Arial;
    display: block;
    margin:auto;
    text-decoration: none;
    line-height: 22px;
    text-align:center;
    position:relative;
    height:35px;
    font-size: 18px;
    outline: none;
    padding: 9px 0px 0px 0px;
    color:black;

}

#nav ul li:hover {
    background:#F0E68C;
    height:35px;
    width:auto;

}

#nav ul li.current {
    background:#5A1416;

} 
```

感谢任何可以帮助我的人，我们将不胜感激。干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T04:16:16.453

每个都有一个静态的左右填充。字体在不同浏览器中呈现略有不同。尝试为每个固定宽度。还添加了一条规则来清理您的边界。

```
#nav ul li {
    display: inline;
    float: left;
    text-align: center;
    position: relative;
    height: 36px;
    position: relative;
    border-right: solid 1px #FEE697;
    padding-top: 1px;
    width: 164px;
}

#nav ul li:last-child {
    border-style: none;
} 
```

# entity-framework - 为什么书籍必须教使用数据集

> ID：13736826
> 
> 赞同：0
> 
> 时间：2012-12-06T04:11:20.833
> 
> 标签：entity-framework, ado.net, strongly-typed-dataset

无论我在哪里阅读，我都会看到专家在写作时远离类型化的数据集并使用实体框架或类似的东西。

另一方面，我读过的几乎每一本 ado.net 书都会首先展示如何使用数据集，其中一些只使用数据集，这给我的印象是它还不错。如果是这样，为什么要为新程序员教它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:20:44.983

一切都取决于您要如何处理从数据库中提取的数据。

我使用 a`DataSet`将数据加载到 Crystal Report 中，因为它可以很好地协同工作。在我的应用程序的其他任何地方，我主要使用匿名类型。无论哪种方式，我都使用`EntityFramework`从我的数据库中提取数据。与使用 ADO.NET 和 DataSet 相比，我获得结果的速度要快得多。如果我需要原始性能，我使用 ADO.NET。例如批量更新。

# java - 二叉搜索树递归插入不显示任何内容

> ID：13736832
> 
> 赞同：2
> 
> 时间：2012-12-06T04:12:14.373
> 
> 标签：java, recursion, insert, binary-search-tree

我在二叉搜索树上做一个小的 Java 工作，但是当我将一个节点递归插入到树中并显示它时，我什么也没得到。我已经研究了一段时间了，我不确定，但我认为这是一个通过引用的问题。

这是我的代码：

```
public class BST {

    private BSTNode root; 

    public BST() {
        root = null;
    }

    public BSTNode getRoot() {
        return root;
    }

    public void insertR( BSTNode root, Comparable elem ) {

        if ( root == null ) {
            root = new BSTNode( elem );
        }
        else {
            if ( elem.compareTo( root.element ) < 0 ) {
                insertR( root.left, elem );
            } else {
                insertR( root.right, elem );
            }
        }

    }

    public void printInOrder (BSTNode root) {
        if (root != null) {

            printInOrder(root.left);
            System.out.println(root.element);
            printInOrder(root.right);

        }
    }
}

class BSTNode {

    protected Comparable element;
    protected BSTNode left;
    protected BSTNode right;

    protected BSTNode ( Comparable elem ) {

        element = elem;
        left = null;
        right = null;

    }

} 
```

我执行了一系列 insertR，其中 root 是要插入的节点，而 elem 是一个字符串，但它没有打印出任何内容，就好像根本没有填充树一样。我确定我的递归插入有问题，但我不确定在哪里，我需要使用递归插入方法，它不返回任何我认为不可能的东西。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:24:35.410

BSTNodes 的左、右元素为空。您需要在插入之前创建它们。否则，他们会创建一个空的悬挂 BSTNode() 并将其插入，而不连接到树的其余部分。

可以换线，

```
 if ( elem.compareTo( root.element ) < 0 ) {
                insertR( root.left, elem );
            } else {
                insertR( root.right, elem );
            } 
```

到

```
 if ( elem.compareTo( root.element ) < 0 ) {
        if ( root.left == null )
             root.left = new BSTNode( elem );
        else
            insertR( root.left, elem );
    } else {
        if ( root.right == null )
             root.right = new BSTNode( elem );
        else
             insertR( root.right, elem );
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-27T06:00:28.033

尽管递归插入 BST 似乎微不足道，但很容易犯下参数传递错误，从而使您的尝试无效。要递归调用插入函数，您必须将对象`BSTNode root`作为参数之一传递**并更改其内容**而不是其指向的内容。

在下面的代码中，`root = new BSTNode( elem );`只改变了局部变量`root`所指向的地址，而改变对 . 来说是不可见的`this.root`。在赋值之前，`root`有一个值，它是从BST 为空时`null`复制的值。`this.root`分配后，`root`指向一些新创建`BSTNode`的数据来自`elem`. 代码的意图是`this.root`指向同一个 new `BSTNode`，但是没有办法通过将本地`root`指向它来实现这一点。`insertR`返回时，仍然`this.root`指向`null`!!

`insertR(root.left, elem);`和 也发生同样的错误`insertR(root.right, elem);`。传递了参数，但由于没有进行内容更改，因此函数调用只会返回，没有更新到 BST 的信息。

```
public void insert(Comparable elem) {
    insertR(this.root, elem);
}

public void insertR( BSTNode root, Comparable elem ) {

    if ( root == null ) {
        root = new BSTNode( elem );
    }
    else {
        if ( elem.compareTo( root.element ) < 0 ) {
            insertR( root.left, elem );
        } else {
            insertR( root.right, elem );
        }
    }

} 
```

要递归地更改 BST，应针对对象包含的变量而不是对象变量指向的变量进行更改。因此 when `this.root`is `null`，您应该在其他地方而不是 inside 处理第一次插入`insertR`，如下所示：

```
public void insert(Comparable elem) {
    if (this.root == null) {
        this.root = new BSTNode(elem);
    } else {
        insertR(this.root, elem);
    }
} 
```

Arcturus 的附加插入代码是正确的，因为对 的内容所做的更改`root`立即传播到`this.root`，因为它们指向同一个`BSTNode`对象。当然这里`root`要求不是，因为上面的代码已经处理了大小写`null`，所以满足了。`null`

```
if ( elem.compareTo( root.element ) < 0 ) {
    if ( root.left == null )
         root.left = new BSTNode( elem );
    else
        insertR( root.left, elem );
} else {
    if ( root.right == null )
         root.right = new BSTNode( elem );
    else
         insertR( root.right, elem );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T05:33:03.697

这将设置 BST 根并允许类正常工作，更改

```
 if ( root == null ) {
        root = new BSTNode( elem );
    } 
```

到

```
 if ( root == null ) {
        root = new BSTNode( elem );
        if ( root.element != null ) {
            this.root = root;
        }
    } 
```

# javascript - 为什么这三个 js 代码在本地计算机上不起作用？

> ID：13736833
> 
> 赞同：0
> 
> 时间：2012-12-06T04:12:18.113
> 
> 标签：javascript, webgl, three.js

我是三个js的新手。我[将此](http://cytoweb.co.uk/3ds/examples/webgl_custom_attributes_lines.html)页面作为html从Firefox保存到我的桌面。所有相关文件（threejs，statsjs，helvetiker_bold js.detecterjs到我的桌面）都已成功保存。但是动画不起作用并且没有错误显示在萤火虫中。我有什么问题？之前已成功保存并编辑[此](http://mrdoob.github.com/three.js/examples/webgl_geometry_text.html)页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:41:02.680

查看您保存的内容与在线页面的来源。

JS 在运行时更改 html，浏览器保存当时的内容，而不是原始文件。

您可以查看网站的源代码并手动保存 html，然后将所有路径更改为包含的资源（JS/CSS 文件），它应该可以正常工作。

# objective-c - Box API 2.0 - 协作文件/文件夹的所有者总是得到错误的用户

> ID：13736835
> 
> 赞同：1
> 
> 时间：2012-12-06T04:12:21.457
> 
> 标签：objective-c, box-api

我正在使用 Box Web API 2.0 进行 iOS 开发，但无法获得协作文件夹的所有者。

我使用 UITableView 显示文件夹的子文件夹，每次单击子文件夹时，它都会即时更新信息并打印出其所有者。我的代码是这样的：

```
BoxObject *obj = [self.folder.children objectAtIndex:indexPath.row];
// the self.folder contains no file, just folders.
BoxFolder *folder = [Box folderWithID:obj.boxID];

[folder updateWithCallbacks:^(id<BoxOperationCallbacks> on) {
    on.after(^(BoxCallbackResponse response){
         if(folder.hasCollaboratorsObject)
            NSLog(@"%@ owner:%@",folder.name, folder.owner.username);
    });
}]; 
```

这总是给我这个应用程序的**登录用户名**，而不是这个文件夹的**“真正”所有者**。

但是如果我这样调用 REST api

```
curl https://api.box.com/2.0/folders/FOLDER_ID \
-H "Authorization: BoxAuth api_key=API_KEY&auth_token=AUTH_TOKEN" 
```

`owned_by`它在属性中返回真正的所有者。

这是 iOS WebAPI 的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T17:50:43.450

这是 V1 API 的限制，这是您使用的 iOS SDK 所针对的。如果您希望能够访问此信息，您需要直接调用 V2 中的 /collaborations 方法：http: [//developers.box.com/docs/#collaborations](http://developers.box.com/docs/#collaborations)

# gcc - bash: ./mips-linux-gnu-gcc: 无法执行二进制文件错误

> ID：13736837
> 
> 赞同：3
> 
> 时间：2012-12-06T04:12:35.123
> 
> 标签：gcc, mips, toolchain

我最近`mips-linux-gnu-gcc`在我的 linux 机器上安装了一个基于 i686 的交叉工具。当我想编译一些代码时，它向我显示了那个错误。

每个安装步骤之后都是[http://developer.mips.com/tools/compilers/open-source-toolchain-linux/](http://developer.mips.com/tools/compilers/open-source-toolchain-linux/)

安装 crosstool 后，我编写了一个简单的 helloworld C 文件，如下所示：

```
 #include<stdio.h>
    int main(void)
    {
        printf("Hello World!\n");
        return 0;
    } 
```

但是当我运行时：

```
 /mips-linux-gnu-gcc hello.c -o hello -static 
```

编译器只是打印错误：

```
 bash: ./mips-linux-gnu-gcc: cannot execute binary file 
```

我想知道也许我在某些步骤中犯了一些错误，但我无法弄清楚。

也许你们中的一些人可以帮助我，我对这个问题感到困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T22:21:29.607

您从 MIPS 下载的编译器是 64 位可执行文件。您正在运行 32 位主机吗？

如果您需要针对 MIPS GNU/Linux 的 32 位主机的交叉编译器，请考虑为 MIPS GNU/Linux 目标使用 Sourcery CodeBench Lite 编译器：

[适用于 MIPS GNU/Linux 的 Sourcery CodeBench Lite](http://www.mentor.com/embedded-software/sourcery-tools/sourcery-codebench/editions/lite-edition/mips-gnu-linux)

上面 Sourcery CodeBench 工具的链接来自 MIPS 页面，仅比您提供的链接高一级：

[MIPS 编译器页面](http://developer.mips.com/tools/compilers/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T22:02:24.110

看起来`mips-linux-gnu-gcc`二进制文件与您尝试运行它的机器的体系结构不匹配。这可能类似于 32/64 位不匹配。

尝试改用免费的 Mentor/Codesourcery MIPS gnu/gcc 交叉编译工具链。你可以从[这里](http://www.mentor.com/embedded-software/sourcery-tools/sourcery-codebench/editions/lite-edition/)下载。

# iphone - ios6中导航的相同视图

> ID：13736838
> 
> 赞同：0
> 
> 时间：2012-12-06T04:12:55.373
> 
> 标签：iphone, ios, uiview, ios6

在我的应用程序中，我使用以下代码导航到接收点击的新视图，它在 iOS5 上正常工作。但是，当我尝试使用 ios6 时，它显示的是当前视图并且不会进入下一个视图。我需要在这段代码中为 ios6 更改任何内容吗？

请帮我解决。

```
scoreview *sview=[[scoreview alloc]  initWithNibName:@"scoreview" bundle:nil];
[self.navigationController pushViewController:sview animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:14:51.327

请检查您的视图是否与 UIInterfaceBuilder 正确连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:19:04.557

试试这些行：

```
 scoreview *sview=[[scoreview alloc]  initWithNibName:@"scoreview" bundle:[NSBundle mainBundle]];

[self.navigationController pushViewController:sview animated:YES]; 
```

# jquery - 通过 Ajax、JSON、JQuery 更改嵌入的 Youtube 视频

> ID：13736841
> 
> 赞同：0
> 
> 时间：2012-12-06T04:13:17.727
> 
> 标签：jquery, html, ajax, json

我有一个 JQuery 使用的工作 Ajax，并且正在通过 JSON 响应更改页面上列出的内容。

它与文本完美配合，但是，现在我计划使用相同的代码，但显示视频而不是显示 mpg 的位置。但是，它只是显示来自 youtube 的嵌入代码的文本。

获取 JSON 响应的 Html 页面：

```
 $(document).ready(function()
    {
            $("#submitbutton").click(function()
            {
                    $.ajax(
                    {
                            url: "https://example.com/jsonServer.php",
                            type: "GET",
                            dataType: "jsonp",
                            jsonp: "callback",
                            data: { carselection: $("#carselection").val()},
                            success: function(data)
                            {
                                    if(data.name == "error")
                                    {
                                            $("#outputcarname").text("There is no such car available"),
                                            $("#price").text(" "),
                                            $("#mpg").text(" ");
                                    }
                                    else
                                    {
                                            $("#outputcarname").text(data.name),
                                            $("#price").text(data.price),
                                            $("#mpg").text(data.mpg);
                                    }
                            },
                            error: function()
                            {
                                    $("#outputcarname").text("There is a problem with the server"),
                                    $("#price").text(" "),
                                    $("#mpg").text(" ");
                            }
                    });
            return false;

 });
});
</script> 
```

JSON服务器：

*请注意，我已将其中一个 mpg 替换为直接来自 youtube 的嵌入代码，并且此嵌入代码再次显示与 mpg 区域中的完全相同。

```
 <?php

    $cars = array('Maxima' => array('price' => '$32,780', 'mpg' => '24'),
                  'Prius' => array('price' => '$25,565', 'mpg' => '49'),
                  'Element' => array('price' => '$22,075', 'mpg' => '<iframe width="560" height="315" src="http://www.youtube.com/embed/enXTiYWQl-0" frameborder="0" allowfullscreen></iframe>'));

    if(array_key_exists($_GET['carselection'], $cars))
    {
            $carname = $_GET['carselection'];
            $results = array('name' => $carname, 'price' => $cars[$carname]['price'], 'mpg' => $cars[$carname]['mpg']);
    }
    else
    {
            $results = array('name' => 'error');
    }

    $callback = htmlentities($_GET['callback'], ENT_QUOTES);
    print $callback . '(' . json_encode($results) . ')';
    ?> 
```

我希望浏览器会接受标签并明显显示视频，但是我猜 jquery.text 将其保留为真正的文本。也许还有另一个我不知道应该使用的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:18:01.607

改变这个：

```
$("#mpg").text(data.mpg); 
```

至：

```
$("#mpg").html(data.mpg); 
```

`.text()`将字符串视为文本。

`.html()`将字符串视为 html

[jQuery：文本（）与 html（）？](https://stackoverflow.com/a/1910830/560299)

# wpf - 如何使用 EventManager 类定义新的路由事件以及如何引发此事件？

> ID：13736844
> 
> 赞同：1
> 
> 时间：2012-12-06T04:13:33.407
> 
> 标签：wpf, routedevents

我在 WPF 中遇到了 EventManager 类，发现它可以定义一个新的路由事件。但是我无法通过我的消息来源正确理解它。有人可以用简单的例子解释一下 EvenManager 类是如何定义一个新的 Routed 事件以及如何引发这个事件的吗？

提前致谢。

# configuration-files - 配置文件管理

> ID：13736846
> 
> 赞同：0
> 
> 时间：2012-12-06T04:13:37.947
> 
> 标签：configuration-files, configuration-management

我有一堆 gradle 使用的配置文件。conf1 conf2 conf3 conf4 等。有时我需要更改每个文件或多个文件中的一些设置。是否有任何工具（适用于 Linux）可以帮助我做到这一点？

例如，如果我想在 conf2、conf3 和 conf5 中设置 settings1，我会使用类似“set settings1=value in conf2,conf3,conf5”的内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T04:54:11.253

你可以用 sed 做到这一点。需要更改文件夹中一些但不是全部的一组名称相似的文件会使它有点复杂：

`find . -name conf2 -o -name conf3 -o -name conf5 | xargs sed -i 's/settings1=/settings1=value/g'`

如果您要更改所有 conf 文件，则可以这样做：

`sed -i 's/settings1=/settings1=value/g' conf*`

# r - 使用 R 语言程序进行实验设计的发生矩阵

> ID：13736847
> 
> 赞同：2
> 
> 时间：2012-12-06T04:13:40.880
> 
> 标签：r

我正在从事教育任务，以使用 R 语言软件从 BIB 设计中生成发生率矩阵。我找到了一个与问题相关的网页[http://wiki.math.yorku.ca/index.php/R:_Incidence_matrix](http://wiki.math.yorku.ca/index.php/R:_Incidence_matrix) 。但它产生数据矩阵而不是发生矩阵。任何人都可以帮我解决R语言代码。获取 BIB 设计矩阵的代码为：

```
b=4                                  # Number of Blocks  
t=8                                  # Number of Column
z=c(1,2,3)                           # Shift
m=NULL
y=c(0)
w=c(y,cumsum(z) %%t)                 # cumsum() is for the running totals
p=seq(from=0, to=t-1, by=1)
l=NULL

for(i in 1:b)  
 {
     for(j in 1:t) 
        {
            l=c(l,rep((w[i]+p[j]+t)%% t))
         }
  }
#"BIB design" it has 4 rows (blocks b) and 8 column (treatments t)
x= matrix(c(l),nrow=b,ncol=t,byrow = TRUE)  
 print (x)

0    1    2    3    4    5    6    7   
1    2    3    4    5    6    7    0   
3    4    5    6    7    0    1    2    
6    7    0    1    2    3    4    5 
```

（通常可以在任何 t 处理和 b 块大小下生成）使用上述设计矩阵 x (4*8)。我需要以下发生矩阵（8 * 8）

```
1   1   0   1    0    0   1    0       
0   1   1   0    1    0   0    1        
1   0   1   1    0    1   0    0     
0   1   0   1    1    0   1    0       
0   0   1   0    1    1   0    1       
0   1   0   0    1    0   1    1   
1   0   1   0    0    1   0    1 
```

考虑 Design Matrix Column wise 并生成 Incidence Matrix Row wise。例如 x 的第一列是

```
0   
1    
6    
3 
```

现在查看所需的发生矩阵 (IM) 的第一行。

```
1   1   0   1    0    0   1    0 
```

x 的第 1 位是 0，所以将 1 放在 IM 的第 1 位。

在 x 的第 2 位是 1，所以也将 1 放在 IM 的第 2 位。

这里 x 列中缺少 2，因此将 0 放在 IM 的第 3 位。

x 包含 3，因此将 1 放在第 4 位，4 和 5 丢失，连续放置两个 0。

X 有 6 把 1 放在第 7 位，7 把 0 放在 IM 的第 8 位。

取 x 的第 2 列并以类似方式填充 IM 的第 2 行。如果存在特定数字（0 到 7），则输入 1，否则输入 0。

我希望，我现在对每个人都说清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T07:42:55.250

使 x 矩阵不同以在一列中有两个相同的条目我得到这个逻辑工作：

```
x[4,1] <- 1
t( apply(x, 2, function(z){ ret <- numeric(8)
                            for( i in seq_along(z) ){ret[z[i]+1] <- ret[z[i]+1]+ 1}
                            ret}) )

     [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
[1,]    1    2    0    1    0    0    0    0
[2,]    0    1    1    0    1    0    0    1
[3,]    1    0    1    1    0    1    0    0
[4,]    0    1    0    1    1    0    1    0
[5,]    0    0    1    0    1    1    0    1
[6,]    1    0    0    1    0    1    1    0
[7,]    0    1    0    0    1    0    1    1
[8,]    1    0    1    0    0    1    0    1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:27:30.673

我不完全确定通过获得预期输出的方式。但是，您获得比预期更长的输出的原因可能是由于`[ as.factor(vec),]`您的代码的一部分。

`as.factor(vec)`正在把你的`4x4 matrix`东西变成一个包含 16 个元素的向量。（好吧，从技术上讲， vec 已经是一个向量，但我们不要混淆事物）。

```
as.factor(vec)
[1] 0 1 3 2 1 2 0 3 2 3 1 0 3 0 2 1
Levels: 0 1 2 3 
```

然后，您将其用作索引，它重复 A 的值。

* * *

** 顺便问一下，你*确定*你应该得到一个全 1 的矩阵吗？也许不只是对角线上的 1？

```
contrasts( as.factor(vec), contrasts =FALSE)
#    0 1 2 3
#  0 1 0 0 0
#  1 0 1 0 0
#  2 0 0 1 0
#  3 0 0 0 1 
```

# jquery - JQuery Div 不刷新新内容

> ID：13736863
> 
> 赞同：0
> 
> 时间：2012-12-06T04:15:09.527
> 
> 标签：jquery, html, refresh

div #network-register 需要将其内容替换为具有类 reg-success-notification 的新 div。div 内容刷新，但新内容不显示或加载。

```
$('#network-register').html('<div class="reg-success-notification"><p>Your account has been successfully created. You will be logged in within 5 seconds.</p></div>').fadeIn(1000);
        }

I found the issue was due to `"display: none"` in the CSS code of the div's class.

CSS Code

div.reg-success-notification {

   display:none
   ...more rules...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:39:16.037

您的代码无法正常工作的原因只有几个。

首先，您可能拼错了 id="network-register"。

其次是您的代码在错误的时间执行。请记住，如果您的代码被称为 document.ready，那么您尝试使用 jQuery 的元素将在 DOM 中不可用。

最简单的方法是在开发人员工具中使用控制台来执行代码并查看会发生什么。我个人使用 chrome。在控制台中键入 $("#network-register") 将是一个快速而肮脏的检查如果它返回任何东西.. 如果你返回 [] 而不是 [ 那么你知道你的 jQuery 选择器正在默默地失败，你要么有一个不存在的元素，要么你有拼写错误。

未来的快速提示.. 您提供的代码和详细信息越多，您将获得的问题诊断就越好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T10:35:29.990

1.你在哪里使用这个代码文档ready()/onload 2.为这个类定义的“reg-success-notification”css

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T10:29:04.450

我发现有一个`display:none`CSS 规则导致了这个问题。这已得到纠正。

# magento - Magento Onepage 成功转化跟踪设计模式

> ID：13736866
> 
> 赞同：3
> 
> 时间：2012-12-06T04:15:16.347
> 
> 标签：magento

我的目的是通过将第三方 javascript（例如 google analytics、optimizely、pricegrabber 等）插入到 onepage success 的页脚中来跟踪通过多个渠道的转化。

我通过在 local.xml 中的结帐成功节点内的页脚引用中添加一个块来完成此操作，并且一切正常。

我的问题更多是关于效率和可扩展性。

我突然想到，最好将所有块组合成一个块引用，然后使用各种方法对各种相关模型进行一次调用，以提供插入到每个 javascript 中所需的数据转化跟踪脚本。

转化跟踪可能依赖的一些常见数据示例（伪）：Order ID、Order Total、Order.LineItem.Name(foreach) 等

目前，对于每个脚本，我已经调用了适当的模型，将客户最后的订单 id 作为负载值传递，并调用 get() 将返回值分配给变量，然后遍历数据以匹配值符合给定第三方服务的期望。

**结帐完成后，所有数据都应提取一次，每个第三方服务可能期望不同格式的不同数据**

**这是在结帐成功的页脚加载的转换跟踪模板文件之一的示例。**

```
$order = Mage::getModel('sales/order')->loadByIncrementId(Mage::getSingleton('checkout/session')->getLastRealOrderId());
$amount = number_format($order->getGrandTotal(),2);
$customer = Mage::helper('customer')->getCustomer()->getData();
?>

<script type="text/javascript">
    popup_email = '<?php echo($customer['email']);?>';
    popup_order_number = '<?php echo $this->getOrderId() ?>';
    </script>
<!-- PriceGrabber Merchant Evaluation Code -->
<script type="text/javascript" charset="UTF-8" src="https://www.pricegrabber.com/rating_merchrevpopjs.php?retid=<something>"></script>
<noscript><a href="http://www.pricegrabber.com/rating_merchrev.php?retid=<something>" target=_blank>
    <img src="https://images.pricegrabber.com/images/mr_noprize.jpg" border="0" width="272" height="238" alt="Merchant Evaluation"></a></noscript>
<!-- End PriceGrabber Code --> 
```

像这样只有一段代码并不是什么大不了的事，但我们正在使用许多不同的第三方服务做类似的事情。

Pricegrabber 是比较简单的例子之一。更复杂的跟踪服务需要以逗号分隔的所有产品名称、ID、价格、类别、订单 ID 等列表。

我想让这一切更易于管理，所以我的想法是执行以下操作：

1.  将所有模板文件合并到一个文件中
2.  开发帮助类或库以将数据传递到转换模板

目标包括

1.  可扩展性
2.  最少的模型调用
3.  最少的方法调用

**问题** 1\. 法师助手是最好的选择吗？2\. 对于“帮助”类，您有什么可以推荐的设计模式吗？3\. 为什么你选择的设计模式最适合这个实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T10:52:42.080

您可以创建一个自定义模块来扩展 Google Analytics

在 /app/code/local/MageIgniter/SiteTracker/etc/config.xml

```
<config>
    <modules>
        <MageIgniter_SiteTracker>
            <version>0.1.0</version>
        </MageIgniter_SiteTracker>
    </modules>
    <global>
        <blocks>
            <googleanalytics>
                <rewrite>
                    <ga>MageIgniter_SiteTracker_Block_CustomTracking</ga>
                </rewrite>
            </googleanalytics>
        </blocks>
    </global>
</config> 
```

然后根据需要修改此方法，请参见 app/code/core/Mage/GoogleAnalytics/Block/Ga.php

在 /app/code/local/MageIgniter/SiteTracker/Block/CustomTracking.php

```
class MageIgniter_SiteTracker_Block_CustomTracking extends Mage_GoogleAnalytics_Block_Ga
{
    protected function _getOrdersTrackingCode(){
       ....
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:01:41.510

了解 Magento 听起来很有趣 我建议你从 Alan Storm 的博客和 magento 知识库开始

现实情况是，您不需要在已经设计的框架之上使用另一种模式，最简单的方法和可维护的方法是遵循现有模式，在您的情况下，它将是：

*   做你的扩展
*   由服务提供商制作您的模板
*   通过提供者制作您的布局描述符
*   将它们与一个块联系在一起或使用多个块（更易于管理）
*   无论您做什么，在 Magento 的情况下，性能的最大收益来自缓存您的块输出，布局描述符和处理程序默认为您缓存

因此，请考虑您可以缓存的内容 * css、js 可以被缩小和压缩 * 您最需要的模板很可能包含新信息，因为每个订单都不同，因此您无法缓存这些内容，您需要将新数据发送给服务提供商

如果您不添加新的业务逻辑，那么我建议您在块中编写输出方法，因为大多数时候您只是在这里用数据填充 javascript 变量，不需要计算任何新内容

# java - 在 Java 中创建同步的静态单例 Map

> ID：13736873
> 
> 赞同：0
> 
> 时间：2012-12-06T04:16:32.290
> 
> 标签：java, multithreading, synchronization, hashmap

我对创建同步静态对象有足够的了解。但是对于 Java 中的地图（集合），

我分别在 Java 中找到了默认实现（一个用于同步列表，一个用于单例映射）。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#synchronizedMap(java.util.Map](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#synchronizedMap(java.util.Map) ) [http://docs.oracle.com/javase/1.5。 0/docs/api/java/util/Collections.html#singletonMap(K](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#singletonMap(K) , V)

我正在考虑通过以下实现来获得预期的结果

```
Map<K,V> initMap = new HashMap<K,V>(); 
Map<K,V> syncSingMap = Collections.synchronizedMap(Collection.singletonMap(initMap)); 
```

我说得对吗？因为 oracle 的文档对此显示了一些警告

```
It is imperative that the user manually synchronize on the returned map when iterating over any of its collection views:

 Map m = Collections.synchronizedMap(new HashMap());
  ...
 Set s = m.keySet();  // Needn't be in synchronized block
  ...
 synchronized(m) {  // Synchronizing on m, not s!
  Iterator i = s.iterator(); // Must be in synchronized block
  while (i.hasNext())
      foo(i.next());
 }

 Failure to follow this advice may result in non-deterministic behavior 
```

在此之上使用 ConcurrentMap 怎么样。

要求：静态同步单例映射将被大量线程用于某些处理操作

**更新**

看了几篇文章，发现ConcurrentMap在多线程环境下比HashMap好很多 [http://java.dzone.com/articles/java-7-hashmap-vs](http://java.dzone.com/articles/java-7-hashmap-vs)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T16:37:24.693

`Collections.singletonMap`返回一个`Map`只有一个条目的不可变对象，而不是“您的应用程序中只存在一个”意义上的“单例”。（如果您使用`Collections.singletonMap`，则无需同步它，因为它是不可修改的。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T04:24:39.857

如果您使用的是 Java 6+，请使用 ConcurrentMap：

```
public class MapHolder {
    public static final ConcurrentMap<String, Object> A_MAP = new ConcurrentHashMap<String, Object>();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T04:30:20.460

`ConcurrentHashMap`出于**性能**原因，最好使用它，`synchronizedMap`这将导致`lock`地图实例并降低性能。但是`ConcurrentHashMap`有**高度优化的算法**来实现高水平的并发性。

**例如，ConcurrentHashMap 对每个 Hash Bucket 都有锁，因此多个线程甚至可以更新映射。**

`ConcurrentHashMap`好于`synchronizedMap`。

# json - 从 json 对象读取列表

> ID：13736877
> 
> 赞同：0
> 
> 时间：2012-12-06T04:17:16.773
> 
> 标签：json, asp.net-mvc-3, asp.net-mvc-4

我尝试从这里的 json 读取列表 id 我的代码：-

```
List<EmailProvider> list = new List<EmailProvider>();
        XmlDocument doc = new XmlDocument();
        doc.Load(Server.MapPath("~/WidgetXml.xml"));
        XmlElement root = doc.DocumentElement;
        XmlNodeList nodes = root.SelectNodes("//widget");

        foreach (XmlNode node in nodes)
        {
            EmailProvider obj = new EmailProvider();
            obj.Name = node["Name"].InnerText;
            obj.left = Convert.ToInt32(node["left"].InnerText);
            obj.Id = node["id"].InnerText;
            obj.IsVisible = Convert.ToBoolean(node["isActive"].InnerText);
            long s = Int64.Parse(node["top"].InnerText);
            obj.top = s;
            obj.desc = node["desc"].InnerText;
            list.Add(obj);
        }
        var result = list.OrderBy(p => p.IsVisible).ToList();
        return result.ToArray(); 
```

并在视图中：-

```
 $(document).ready(function () {
        $.post(siteUrl.getSiteUrl + '/Admin/ReadXml/', function (data) {
            alert(data.length);
            var st = JSON.stringify(data);
            alert(st.length);
        });
    }); 
```

长度总是显示 54 但在数组中只有 4 个项目。我如何从 json 对象中通过 json 从数组中读取所有记录。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:47:35.127

尝试使用控制器方法[Json从控制器方法返回 JsonResult](http://msdn.microsoft.com/en-us/library/dd504936%28VS.98%29.aspx)

```
var result = list.OrderBy(p => p.IsVisible).ToList();
return Json(result.ToArray()); 
```

在 JavaScript 上，您应该只需要遍历数组，如下所示：

```
$(document).ready(function () {
    $.post(siteUrl.getSiteUrl + '/Admin/ReadXml/', function (data) {
        for(var i = 0;i < data.length; i++){
            alert(data[i].Name);
        }
    });
}); 
```

# java - 在抽出每张牌之前检查我的牌组时的奇怪输出

> ID：13736879
> 
> 赞同：0
> 
> 时间：2012-12-06T04:17:30.727
> 
> 标签：java, logic, output, blackjack

我不明白为什么我会得到这样的输出。每次我抽出初始牌时，输出都会尝试重新创建和重新洗牌，但为什么呢？因为我正在检查卡片组是否为空或为空，如果是，则正在创建它。

为什么我的代码不起作用？

输出：

```
#########    BLACK    ###    JACK    #########

deal, hit, stay, exit: deal

Creating deck...
Shuffling deck...

Drawing Player's card... A_♦
Creating deck...
Shuffling deck...

Drawing Dealer's card... X_X
Creating deck...
Shuffling deck...

Drawing Player's card... 6_♥
Creating deck...
Shuffling deck...

Drawing Dealer's card... X_X

Dealers Hand: A_♦ X_X = 11
Players Hand: 6_♥ A_♦ = 17 
```

初始绘制方法：

```
private static Deck initialDraw(Deck deck, Hand player, Hand dealer)
{
    drawFromDeck(deck, player);
    drawFromDeck(deck, dealer);
    drawFromDeck(deck, player);
    drawFromDeck(deck, dealer);

    System.out.print("\n");

    showHands(player, dealer);
    compareHands(player, dealer);

    return deck;
} 
```

当我使用以下代码时，我没有得到这个输出，它有什么不同？我仍在引用同一个数组并将其传回，不是吗？

```
private static Deck initialDraw(Deck deck, Hand player, Hand dealer)
{
    deck = checkDeck(deck);

    drawFromDeck(deck, player);
    drawFromDeck(deck, dealer);
    drawFromDeck(deck, player);
    drawFromDeck(deck, dealer);

    System.out.print("\n");

    showHands(player, dealer);
    compareHands(player, dealer);

    return deck;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:31:01.247

**快速解决方案**：

```
private static Deck initialDraw(Deck deck, Hand player, Hand dealer)

    {
        deck = drawFromDeck(deck, player);
        deck = drawFromDeck(deck, dealer);
        deck = drawFromDeck(deck, player);
        deck = drawFromDeck(deck, dealer);

        System.out.print("\n");

        showHands(player, dealer);
        compareHands(player, dealer);

        return deck;
    } 
```

**说明**：

在内部`drawFromDeck`，您正在创建/更新卡片组并返回它，但不更新变量，如`initialDraw`. 这可能不是这样的问题（因为对象是通过引用传递的，但是在依赖它之前进行测试！），但我假设您正在传递`null`into `initialDraw`，因此`null`正在传递给每个`drawFromDeck`调用，因此`Deck`每次都会创建一个新对象。

**对于您的代码工作的编辑**

在这种情况下，您要确保它`deck`不是`null`引用，而是对实际`Deck`对象的引用，因此您将向`Deck`每次`drawFromDeck`调用传递对对象的引用，而不是`null`每次都传递引用。

# java - 匹配此查询的正则表达式

> ID：13736882
> 
> 赞同：0
> 
> 时间：2012-12-06T04:17:58.360
> 
> 标签：java, regex

我有这样一句话：

`Well, {hero}Superman X. 123 Sr.{/hero}, the most lovable guy was hated by {lover}Louis{/lover}.`

我正在使用java常规exp。像这样（这是行不通的：当然）：

`Pattern search = Pattern.compile("}.*{\/")`

实际上它为我提供了这个输出：

`}Superman X. 123 Sr.{/hero}, the most lovable guy was hated by {lover}Louis{/`

当我真正想要时：“超人 X. 123 Sr.” 然后是“路易”。除了运行一个while循环并增加索引之外，如何实现这一点？我可以试试..但我想知道是否有更简单的方法我错过了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:28:29.927

可能有更好的正则表达式，但这`(\{\w+\})([\w\.\s]+)(\{/\w+\})`可以完成您的工作：

```
String test = "Well, {hero}Superman X. 123 Sr.{/hero}, the most lovable guy"+
                  " was hated by {lover}Louis{/lover}.";
Pattern p = Pattern.compile("(\\{\\w+\\})([\\w\\.\\s]+)(\\{/\\w+\\})");
Matcher m = p.matcher(test);
while(m.find()){
    System.out.println(m.group(2));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:32:27.560

这是因为量词默认是贪婪的。你想要一个惰性量词，所以尝试`.*?`而不是`.*`.

此外，您可能想要捕获标签本身：

```
Pattern.compile("\\{([^}]+)\\}(.*?)\\{/\1\\}"); 
```

请注意，我不能 100% 确定 Java 正则表达式中反向引用的当前语法，但这应该可以。您应该在第一个捕获的子模式（`hero`或`lover`在本例中）中使用标签名称，并在第二个子模式中使用名称本身。

# c# - 在运行时向表单添加 C# 标签

> ID：13736884
> 
> 赞同：1
> 
> 时间：2012-12-06T04:18:03.977
> 
> 标签：c#, winforms

我正在尝试用 C# 制作一个简单的基于文本的游戏。我想如何实现这一点是通过向表单添加标签（而不是使用命令提示符）。我在将它们添加到屏幕时遇到了一些问题。Visual Studio 给出了一个未指定的错误（只说我有一个未处理的异常）：

> 你调用的对象是空的

当我尝试使用数组用这些标签填充屏幕时。编码：

```
private void Main_Game_Load(object sender, EventArgs e)
{
    Label[] Enemies = new Label[20];
    Label[] Projectile = new Label[5];
    Font font = new Font(new System.Drawing.FontFamily("Microsoft Sans Serif"), 12);
    Random rand = new Random();
    Point point = new Point(rand.Next(500), rand.Next(500));

    for (int i = 0; i < Enemies.Length; i++)
    {
        Enemies[i].Text = "E";
        Enemies[i].Font = font;
        Enemies[i].BackColor = ColorTranslator.FromHtml("#000000");
        Enemies[i].Location = point;
        Enemies[i].Size = new Size(12, 12);
        Enemies[i].Name = "Enemy"+i.ToString();
        this.Controls.Add(Enemies[i]);
    }
} 
```

我想知道问题可能隐藏在哪里？我已经用谷歌搜索了它，我的代码似乎应该可以工作（除了现在点不会在尝试填充时随机化）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T04:20:02.860

这行代码创建了一个空数组（即每个元素都没有引用）来存储最多 20 个标签：

```
Label[] Enemies = new Label[20]; 
```

您必须在数组中显式创建每个标签：

```
for (int i = 0; i < Enemies.Length; i++)
{
    //creates a new label and stores a reference to it into i element of the array 
    Enemies[i] = new Label(); 
    //...
} 
```

从[一维数组（C# 编程指南）](http://msdn.microsoft.com/en-us/library/0a7fscd0.aspx)：

```
SomeType[] array4 = new SomeType[10]; 
```

> 此语句的结果取决于 SomeType 是值类型还是引用类型。如果它是值类型，则该语句创建一个包含 10 个元素的数组，每个元素的类型为 SomeType。如果 SomeType 是引用类型，则该语句创建一个包含 10 个元素的数组，每个元素都初始化为一个空引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-06T04:19:56.920

创建数组时，所有元素都填充有该类型的默认值。对于所有引用类型，即`null`. 您实际上需要为`Label`数组中的每个项目创建一个新项目：

```
for (int i = 0; i < Enemies.Length; i++)
{
    Enemies[i] = new Label();
    //... 
```

# java - Java 扩展不更新

> ID：13736887
> 
> 赞同：1
> 
> 时间：2012-12-06T04:18:27.710
> 
> 标签：java, oop

我目前正在研究一个休眠项目（EJB 和 JSF），并且我有多个 java 类。父类的数据在前端使用 JSF 进行更改，但是，它没有在子类中更新。我需要访问子类中的数据来做一些计算。关于如何将变量的值从父类传递给子类的任何想法？

提前致谢

例子：

家长班

```
public class parent {

    private String x = "a+";

    public String getx(){
         return x;
    }

    public void setx(String x){
         this.x = x;
    }

} 
```

儿童班

```
public class child extends parent{
    private String z;

    public String getZ(){
        System.out.print(getx());
        return z;
    }
 } 
```

主班

```
public static void main(String[] args) {

        parent p = new parent();

        System.out.println("Original" + p.getx());

        p.setx("z");

        System.out.println(" Add z" +p.getx());

        child c = new child();

        System.out.println("child getx" +c.getx());

        p.setx("zZ");
        System.out.println("child getz" +c.getZ());
    }
} 
```

结果。原创a+

添加 zz

孩子 getx a+

a+child getz null

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:43:58.450

我不明白你在这里期望什么。一切正常。

在您的示例中，您从不调用`c.setX`，那么您为什么希望它打印除 之外的任何内容`a+`？ `p`指的是完全不同的对象，与 没有关系`c`。因此，调用`p.setx`对 没有影响`c`。如果你想设置`c.x`，只需调用`c.setx("z")`. 做*多态*，因为`child`扩展`parent`，你可以调用`parent`在一个实例上声明的方法`child`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T04:44:03.287

您正在两个不同的对象上设置“z”，`c`并且`p`. 为了让 '`c.getZ()`返回`zZ`，您需要调用`c.setx("zZ")`.

# sql-server - SQL Server 触发器与插入、更新、删除

> ID：13736895
> 
> 赞同：1
> 
> 时间：2012-12-06T04:19:26.530
> 
> 标签：sql-server, triggers

以前，我为插入、更新和删除操作分别创建了 3 个触发器。

当其中一个发生时，触发器应该修改另一个表中的值。

当我尝试为所有 3 个操作（插入、更新和删除）创建一个组合触发器时，尝试执行它时会出现许多错误。我已经尝试过 case 语句和 if 语句，但无法判断出了什么问题。

```
CREATE TRIGGER multipurposeCourseEnrollment
    ON courseEnrollment AFTER INSERT, DELETE, UPDATE AS
        BEGIN 
            IF EXISTS(SELECT courseID FROM DELETED) AND EXISTS(SELECT courseID FROM INSERTED)
                THEN
                    DECLARE @oldCourseID INT
                    DECLARE @newCourseID INT
                    SELECT @oldCourseID = (SELECT courseID FROM DELETED)
                    SELECT @newCourseID = (SELECT courseID FROM INSERTED)
                    BEGIN
                        UPDATE courses SET courseOpenSeats = (courseOpenSeats +1)
                            WHERE courseID = @oldCourseID
                        UPDATE courses SET courseOpenSeats = (courseOpenSeats -1)
                            WHERE courseID = @newCourseID AND courseOpenSeats>0
                    END
            ELSE
            IF EXISTS(SELECT courseID FROM DELETED)
                THEN
                    DECLARE @courseIDDel INT
                    SELECT @courseIDDel = (SELECT courseID FROM DELETED)
                    BEGIN
                        UPDATE courses SET courseOpenSeats = (courseOpenSeats +1)
                            WHERE courseID = @courseIDDel
                    END
            ELSE
            IF EXISTS(SELECT courseID FROM UPDATED)
                THEN
                    DECLARE @courseID INT
                    SELECT @courseID = (SELECT courseID FROM UPDATED)
                    BEGIN

        UPDATE courses SET courseOpenSeats = (courseOpenSeats - 1)
                        WHERE courseID = @courseID AND courseOpenSeats>0
                END
        ELSE
        END)
    END; 
```

一个问题可能是我如何声明`@variables`. 不确定这是否正确。

我得到的错误是：

> *关键字“THEN”附近的语法不正确。*

我也得到这个`ELSE`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-01T13:30:05.607

触发器的一些问题如下：

1.  没有任何更新的表格，您已经使用第一个条件检查过的更新案例。即（删除和插入）的情况。

2.  第二个是 `IF EXISTS(---condition---)`你**必须使用** `BEGIN`and `END`not `THEN`and之后`END`。这也是您在该查询中可能多次遇到的语法错误。

希望这对您有所帮助。

# graphite - 使用 statsD 时有什么方法可以填补石墨中缺失的数据吗？

> ID：13736898
> 
> 赞同：16
> 
> 时间：2012-12-06T04:19:31.823
> 
> 标签：graphite, statsd

我正在使用 statsD 向石墨报告计数器数据；每次我收到消息时都会发送一个勾号。这很好用，除非在 statsD 出于某种原因必须重新启动的情况下。然后我的图表中出现了巨大的漏洞，因为当我没有收到任何消息时，statsD 现在不再每 10 秒发送一次“0”。

我正在报告各种不同的消息类型和队列，有时我很长一段时间都没有收到特定队列的消息。

是否有任何现有方法可以使用我指定的默认值（在我的情况下为 0）“填充”缺失的数据？

我考虑过为给定指标发送一个“0”计数，以便 statsD 开始为它发送 0，但我并不总是知道我将提前报告的一组指标。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-06-28T03:45:41.723

查看 Graphite 提供的函数[transformNull](http://graphite.readthedocs.org/en/0.9.10/functions.html#graphite.render.functions.transformNull)。例如

```
transformNull(stats.timers.deploys.all.duration.total.mean, 0) 
```

这会将具有空数据的部分映射到 0。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-06T04:57:28.003

您可以使用石墨中的“keepLastValue(requestContext, seriesList)”函数来处理缺失数据。它“[c] 当数据中出现间隙（'None' 值）时，使用最后收到的值继续行，而不是中断行。”

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-12-12T08:24:32.190

如果您只想用零“填充”可视图形，请查看“图形选项 -> 线模式 -> 将 Null 绘制为零”。这不会让您设置 0 以外的值，并且如果您以 json 或 csv 格式获取数据，它不会导致显示 0，但如果您只想查看包含一些图形的图表，这通常是您想要的没有数据被记录的地方。

![没有将 Null 绘制为零](../Images/996559f4b79a6cfbb86690af88a90965.png)

![将空值绘制为零](../Images/fc411fd5ae8f8ee5d7194ad8a0edbc2b.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-13T18:22:32.503

这个问题的解决方案是不保留最后一个值或转换空值。实施其中一个选项只会导致您显示不正确的数据，并且当出现问题时您不会收到警报。

您需要更改存储架构，以便它存储您正在发送的数据量，而不是更多。

如果指标每 5 秒发送一次，并且您的存储架构显示为 1，您将获得五个数据点，其中四个将为空。

查看此文档：[https ://github.com/etsy/statsd/blob/master/docs/graphite.md](https://github.com/etsy/statsd/blob/master/docs/graphite.md)

# java - 如何捕获 SocketTimeoutException

> ID：13736899
> 
> 赞同：7
> 
> 时间：2012-12-06T04:19:54.573
> 
> 标签：java

假设我有一个名为 SuperSocket 的套接字变量，有什么方法可以捕获超时异常吗？

```
 SuperSocket.setSoTimeout(5000);

       catch (SocketTimeoutException e){
        System.out.println("Timeout");
        System.exit(1);
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T06:02:48.833

您似乎不明白`setSoTimeout()`该异常会发生什么以及何时会引发该异常。

来自 Javadoc：（[http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html)）

> public void setSoTimeout(int timeout)
> 抛出 SocketException
> 
> 使用指定的超时启用/禁用 SO_TIMEOUT，以毫秒为单位。将此选项设置为非零超时，对与此 Socket 关联的 InputStream 的 read() 调用将仅阻塞此时间量。如果超时到期，则会引发 java.net.SocketTimeoutException，尽管 Socket 仍然有效。必须在进入阻塞操作之前启用该选项才能生效。超时必须 > 0。超时为零被解释为无限超时。

唯一`SocketTimeoutException`可以抛出（然后被捕获）的时间是当您对`Socket`' 的底层进行阻塞读取`InputStream`并且在指定时间内没有接收到数据（导致读取...超时）时。

```
superSocket.setSoTimeout(5000);
InputStream is = superSocket.getInputStream();
int i;
try {
    i = is.read();
} catch (SocketTimeoutException ste) {
    System.out.println("I timed out!");
} 
```

**编辑添加：**实际上还有一次可以抛出异常，那就是如果您调用`Socket.connect()`提供超时的两个参数版本。

# entity-framework-4.1 - 在添加、删除或修改实体时调用 savechange 方法时出现异常。小鬼

> ID：13736909
> 
> 赞同：0
> 
> 时间：2012-12-06T04:21:03.760
> 
> 标签：entity-framework-4.1

我正在研究 Entity Framework 4.1 。此处使用 AddObject() 将控件添加到数据库中并使用 SaveChange() 方法保存该控件。

但是，一旦我删除了添加的控件并尝试再次添加相同的控件，我就会一次又一次地收到此错误（存储更新、插入或删除语句影响了意外的行数（0）。实体可能已被修改或删除，因为实体是已加载。刷新 ObjectStateManager 条目。）但无法添加它。一旦我关闭我的应用程序然后尝试添加然后我就可以添加该控件。

我试图在这里和那里搜索很多问题，但找不到解决方案。因为我是实体框架领域的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T11:18:57.560

As in this scenario i was calling SaveChange() method of Entity framework object context after every operation like add, delete and modification. But i was getting exception back to back.It got solved by By calling method like this public void Save(object entity) { using (var transaction = Connection.BeginTransaction()) {

```
 try
            {
                SaveChanges();
                transaction.Commit();
             }
             catch (OptimisticConcurrencyException)
             {
                 if (ObjectStateManager.GetObjectStateEntry(entity).State == EntityState.Deleted || ObjectStateManager.GetObjectStateEntry(entity).State == EntityState.Modified)
                        this.Refresh(RefreshMode.StoreWins, entity);
                  else if (ObjectStateManager.GetObjectStateEntry(entity).State == EntityState.Added)
                        Detach(entity);
                  AcceptAllChanges(); 
                  transaction.Commit();
              }

        }
    } 
```

# java - Xml Xpath 值中的多个命名空间

> ID：13736911
> 
> 赞同：0
> 
> 时间：2012-12-06T04:21:04.260
> 
> 标签：java, xml, xpath, xml-parsing

在 Java 中为 Xmls 使用 Xpath 解析是新手。但是我学会了它并且它工作得很好，直到下面这个问题我不确定如何遍历到下一个节点。请找到下面的代码，让我知道需要更正的地方。

```
package test;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.transform.TransformerException;
import javax.xml.xpath.XPath;
import javax.xml.xpath.XPathConstants;
import javax.xml.xpath.XPathExpressionException;
import javax.xml.xpath.XPathFactory;

import org.w3c.dom.Document;
import org.w3c.dom.NodeList;

public class CallTestcall {
    public static void main(String[] args) throws Exception {

        DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
        domFactory.setNamespaceAware(true);
        DocumentBuilder builder = domFactory.newDocumentBuilder();

        String responsePath1 = "C:/Verizon/webserviceTestTool/generatedResponse/example.xml";
        Document doc1 = builder.parse(responsePath1);

        String responsePath0 = "C:/Verizon/webserviceTestTool/generatedResponse/response.xml";
        Document doc0 = builder.parse(responsePath0);

        example0(doc0);
        example1(doc1);
    }

    private static void example0(Document example)
            throws XPathExpressionException, TransformerException {
        System.out.println("\n*** First example - namespacelookup hardcoded ***");

        XPath xPath = XPathFactory.newInstance().newXPath();
        xPath.setNamespaceContext(new HardcodedNamespaceResolver());

        String result = xPath.evaluate("s:Envelope/s:Body/ns1:UpdateSessionResponse",
                example);

        // I tried all the Values to traverse further to UpdateSessionResult but am not able to I used the following xpath expressions

        result = xPath.evaluate("s:Envelope/s:Body/ns1:UpdateSessionResponse/a:UpdateSessionResult",
                example);

        result = xPath.evaluate("s:Envelope/s:Body/ns1:UpdateSessionResponse/i:UpdateSessionResult",
                example);

        System.out.println("example0 : "+result);
    }

    private static void example1(Document example)
            throws XPathExpressionException, TransformerException {
        System.out.println("\n*** First example - namespacelookup hardcoded ***");

        XPath xPath = XPathFactory.newInstance().newXPath();
        xPath.setNamespaceContext(new HardcodedNamespaceResolver());

        String result = xPath.evaluate("books:booklist/technical:book/:author",
                example);
        System.out.println("example1 : "+result);
    }

} 
```

请在我添加了前缀的地方找到实现 nameSpaceContext 的类

```
package test;

import java.util.Iterator;
import javax.xml.XMLConstants;
import javax.xml.namespace.NamespaceContext;

public class HardcodedNamespaceResolver implements NamespaceContext {

/**
     * This method returns the uri for all prefixes needed. Wherever possible it
     * uses XMLConstants.
     * 
     * @param prefix
     * @return uri
     */
    public String getNamespaceURI(String prefix) {
        if (prefix == null) {
            throw new IllegalArgumentException("No prefix provided!");
        } else if (prefix.equals(XMLConstants.DEFAULT_NS_PREFIX)) {
            return "http://univNaSpResolver/book";
        } else if (prefix.equals("books")) {
            return "http://univNaSpResolver/booklist";
        } else if (prefix.equals("fiction")) {
            return "http://univNaSpResolver/fictionbook";
        } else if (prefix.equals("technical")) {
            return "http://univNaSpResolver/sciencebook";
        } else if (prefix.equals("s")) {
            return "http://schemas.xmlsoap.org/soap/envelope/";
        } else if (prefix.equals("a")) {
            return "http://channelsales.corp.cox.com/vzw/v1/data/";
        } else if (prefix.equals("i")) {
            return "http://www.w3.org/2001/XMLSchema-instance";
        } else if (prefix.equals("ns1")) {
            return "http://channelsales.corp.cox.com/vzw/v1/";
        } 

        else {
            return XMLConstants.NULL_NS_URI;
        }
    }

    public String getPrefix(String namespaceURI) {
        // Not needed in this context.
        return null;
    }

    public Iterator getPrefixes(String namespaceURI) {
        // Not needed in this context.
        return null;
    }

} 
```

请找到我的 XML ::::

```
String XmlString  = "<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body><UpdateSessionResponse xmlns="http://channelsales.corp.cox.com/vzw/v1/"><UpdateSessionResult xmlns:a="http://channelsales.corp.cox.com/vzw/v1/data/" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
<a:ResponseHeader>
<a:SuccessFlag>true</a:SuccessFlag>
<a:ErrorCode i:nil="true"/>
<a:ErrorMessage i:nil="true"/>
<a:Timestamp>2012-12-05T15:28:35.5363903-05:00</a:Timestamp>
</a:ResponseHeader>
<a:SessionId>cd3ce09e-eb33-48e8-b628-ecd406698aee</a:SessionId>
<a:CacheKey i:nil="true"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T05:16:11.170

试试下面的。这个对我有用。

```
 result = xPath.evaluate("/s:Envelope/s:Body/ns1:UpdateSessionResponse/ns1:UpdateSessionResult",
                  example); 
```

由于您是从文档的根目录开始搜索，因此在 xpath 表达式之前使用正斜杠`(/)`

此外，在下面的 XML 片段中，字符串`xmlns="http...`表示您将其设置为默认命名空间。在您的名称空间解析器中，您为此提供了前缀 ns1。因此，即使`UpdateSessionResult`定义了两个命名空间前缀`a`和`i`，它本身也不使用这些前缀（例如`<a:UpdateSessionResult...`），因此它属于默认命名空间（名为 'ns1'）

```
<UpdateSessionResponse xmlns="http://channelsales.corp.cox.com/vzw/v1/">
<UpdateSessionResult xmlns:a="http://channelsales.corp.cox.com/vzw/v1/data/"  xmlns:i="http://www.w3.org/2001/XMLSchema-instance"> 
```

这就是为什么你需要使用`ns1:UpdateSessionResult`而不是`a:UpdateSessionResult`或者`i:UpdateSessionResult`

# javascript - iframe 与 ajax (JSON) 之间的性能差异

> ID：13736912
> 
> 赞同：0
> 
> 时间：2012-12-06T04:21:19.900
> 
> 标签：javascript, browser

当我通过 iframe 或通过 ajax 调用检索 json 数据并让 javascript 将其放入 html 设计中加载格式化元素时，是否存在性能差异？我倾向于看看主要网站是如何做的，我注意到 ebay 使用了很多 iframe。主页上有四个 iframe，其中一个很明显，因为它是广告。

此外，在 iframe 中我无法访问父级的 javascript 文件，尽管它位于同一个域中，因此在 iframe 中我必须再次加载 .js 文件。我想知道这是否是 XSS 方面的技术问题或安全预防措施，这仍然很奇怪，因为它位于同一个域中......一个例子是 jquery .js 分发文件，我必须在父级和 iframe 中加载它. 浏览器会使用父级的缓存版本还是再次下载整个 .js 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T04:30:28.750

这实际上是一系列问题。

首先，我将解决整体速度： 简短回答：这取决于。这里有很多因素。Ajax 方法 - 从服务器加载数据可能更快，在客户端显示更慢。IFrame 方法 - 从服务器加载可能更慢，显示客户端更快。

我认为将 iframe 用于广告的趋势更多地与安全问题和整体设计要求有关。

在 iframe 中，如果它从与父级相同的域加载，您应该能够执行`parent.$`or `parent.jQuery`。看到[这个问题](https://stackoverflow.com/questions/2227096/fancybox-iframe-returns-parent-as-undefined-using-wordpress)。

缓存为此引入了一个额外的层。缓存可能会发生，尽管它实际上甚至取决于浏览器设置或代理设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:31:08.203

好吧，这完全取决于数据/ html 的来源和来源。

如果 html 内容来自 cdn 网络或其他域，并且您只想显示链接的数据以及其他内容的所有工作功能，那么在某些时候 iframe 是好的。

虽然要快速加载数据并提高性能，但我认为 ajax 功能会更可取。

# iphone - 如何将 MutableArray 的最后三个数据与 String 进行比较？

> ID：13736914
> 
> 赞同：0
> 
> 时间：2012-12-06T04:21:32.527
> 
> 标签：iphone, objective-c, cocoa-touch, ios4

在我的应用程序中，我有这样的可变数组中的数据，

```
 MutableArray1:(
       "22.298166 , 73.165809",
       "22.300598 , 73.167183",
       "22.298101 , 73.166188",
       "22.298128 , 73.166194"
       "22.298130 , 73.166194"
      ) 
```

我想将带有数据**“22.298130，73.166194”**的 NSString 与MutableArray1 的最后三个数据进行比较。

请建议我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:36:30.487

```
 if([Array1 count]>3)
        {
           for (int i = [Array1 count] - 4; i < [Array1 count]; i++) {
                if ([[Array1 objectAtIndex:i] isEqualToString:@"22.298130 , 73.166194"]) {
                    NSLog (@"True");
                    //Write your Code Here
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T05:32:32.730

```
NSArray *array = @[ @"22.298166 , 73.165809",
                    @"22.300598 , 73.167183",
                    @"22.298101 , 73.166188",
                    @"22.298128 , 73.166194",
                    @"22.298130 , 73.166194"]; 
```

如果您只需要知道它是否在数组内：

```
NSString *searchString = @"22.298130 , 73.166194";    
BOOL found = [[array subarrayWithRange:NSMakeRange([array count]-3, 3)] containsObject:searchString];
NSLog(@"%@", (found) ? @"YES" : @"NO"); 
```

如果你需要知道索引，你可以做

```
[[array subarrayWithRange:NSMakeRange([array count]-3, 3)] enumerateObjectsUsingBlock:^(NSString  *obj, NSUInteger idx, BOOL *stop) {
    if ([obj isEqualToString:searchString]) {
        *stop = YES; //avoid further loops, if we had a positive hit.
         NSLog(@"%lu %lu", idx, [array count]-3+idx);  //index in subarray and in original array
    };
}]; 
```

# jquery - 如何使用来自另一个 html 页面的文本加载 html div？

> ID：13736918
> 
> 赞同：0
> 
> 时间：2012-12-06T04:22:01.623
> 
> 标签：jquery

我有两个 html 页面，分别是 text.html 和 display.html。文件 text.html 中包含文本。我想将 text.html 文件的文本内容加载到 display.html 。如何使用 jquery 制作它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:33:33.217

您可以使用`iframes`在该页面中显示 html 页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:26:15.797

您可以使用以下 jquery 加载方法：在下面的链接中以示例进行解释：

[http://api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-06T04:26:43.433

使用 jQuery：

```
$('#div_id').load('text.html');. 
```

参考：[jQuery load()](http://api.jquery.com/load/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-06T04:29:18.343

.load( url [, data] [, complete(responseText, textStatus, XMLHttpRequest)] ) 描述：从服务器加载数据并将返回的HTML放入匹配的元素中。 [http://api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T05:21:47.177

请参阅下面`if you are on display.html`的`when document.ready() fires`内容是您可能需要做的事情。

这边走`load all the contents from the page1.html`

```
$('body').load('text.html'); 
```

这会将特定 div 的内容加载到当前文档的所需位置。

```
$('#my_div').load('text.html #targetDiv'); 
```

`suppose`你有一个`div with id of my_div`，`display.html`然后上面`you want to load a specific content`的`text.html page`脚本会给你想要的结果。

# matlab - 让 for 循环脚本仅在每 N 次迭代中执行一次

> ID：13736920
> 
> 赞同：1
> 
> 时间：2012-12-06T04:22:19.253
> 
> 标签：matlab, for-loop, iteration

在 MATLAB（或更一般地）中，如果我只想发生某些事情，例如，每 50 次迭代，`for loop`我怎么能比下面做得更好？那就是不要写出*+50*的所有可能值。谢谢。

```
for i = 1:1060;
    if i = 50 || 100 || 150 || ... || 1050
        randi(i); % for example, just do something
    end;
end; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-06T04:26:39.407

你想要的是

```
if mod(i, 50) == 0
  do something 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-06T07:27:46.927

你想要的是

```
for i = 0:50:1050
    do_stuff(i);
end 
```

除非，从您的问题中不清楚，如果先前的答案是您真正想要的，在这种情况下您可能需要它

```
for i = 1:1060
    if mod(i, 50) == 0
        do_something(i)
    end
    do_something_else(i)
end 
```

干杯， -

# android - 我如何创建 Intent 以及将代码放在哪里？

> ID：13736924
> 
> 赞同：0
> 
> 时间：2012-12-06T04:22:42.233
> 
> 标签：android, android-intent

我正在努力学习[这里](http://developer.android.com/training/basics/firstapp/starting-activity.html#RespondToButton/)的课程，现在我坚持“建立意图”。我对如何制作这个 Intent 以及在哪里粘贴它感到很困惑。有人可以告诉我本教程的分步过程吗？我现在头疼得厉害。请我想学习这样做。

> 建立一个意图
> 
> Intent 是一个提供不同组件（例如两个活动）之间的运行时绑定的对象。Intent 代表应用程序的“做某事的意图”。您可以将意图用于各种任务，但大多数情况下它们用于启动另一个活动。
> 
> 在 sendMessage() 方法中，创建一个 Intent 来启动一个名为 DisplayMessageActivity 的活动：
> 
> Intent intent = new Intent(this, DisplayMessageActivity.class); 这里使用的构造函数有两个参数：
> 
> 一个 Context 作为它的第一个参数（使用它是因为 Activity 类是 Context 的子类） 系统应该向其传递 Intent 的应用程序组件的类（在这种情况下，应该启动的 Activity）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:34:06.793

正如教程所说，您需要添加创建[`Intent`](http://developer.android.com/reference/android/content/Intent.html)类的新实例的代码行。稍后您将使用此实例来告诉操作系统启动另一个活动或服务。在此特定示例中，`Intent`您正在构建的将指示操作系统启动`DisplayMessageActivity`.

要正确执行此步骤，您需要修改在本教程的上一步中添加的**sendMessage**方法。最终方法应如下所示：

```
/** Called when the user clicks the Send button */
public void sendMessage(View view) {
    Intent intent = new Intent(this, DisplayMessageActivity.class);
    EditText editText = (EditText) findViewById(R.id.edit_message);
    String message = editText.getText().toString();
    intent.putExtra(EXTRA_MESSAGE, message);
} 
```

创建完之后`Intent`，代码会把`editText`当前activity中控件的内容，赋值给`message`变量，然后作为附加参数添加到 中`intent`，这样目标`DisplayMessageActivity`activity就可以对它做点什么了。

不要担心 DisplayMessageActivity。它将在稍后的步骤中添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T04:28:31.687

> 我如何创建 Intent 以及将代码放在哪里？

您想使用意图打开活动，然后您可以在此方法中编写代码。

```
/** Called when the user clicks the Send button */
public void sendMessage(View view) {
   Intent intent = new Intent(MainActivity.this, SecondActivity.class);
   startActivity(intent);
} 
```

# networking - 是否可以使用 nping 手动执行 tcp 3 次握手？

> ID：13736925
> 
> 赞同：0
> 
> 时间：2012-12-06T04:22:47.367
> 
> 标签：networking, tcp, network-programming, nmap

我可以发送一个 tcp syn，然后我收到一个 syn/ack，但此时 linux 发送了一个 tcp rst，因为打开连接的不是 linux tcp。

我想知道我是否可以停止第一个，或者是否有另一种手动执行握手的方法，以便我可以在它之后发送任意数据包。

我正在为一个类实现一个 nat，并且我正在尝试更有效地调试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:44:24.073

围绕[这个问题](https://stackoverflow.com/questions/110341/tcp-handshake-with-sock-raw-socket)的讨论可能会有所帮助。

如果您出于实验原因（即不尝试与真正的 tcp 服务交互）这样做，我建议您将协议号设置为 253-254 而不是 tcp 的常规 6，这应该可以防止内核选择在您正在生成的数据包上。

# opengl-es - 黑莓 10 OS OpenGL ES 1.1 应用程序模板

> ID：13736932
> 
> 赞同：0
> 
> 时间：2012-12-06T04:23:58.607
> 
> 标签：opengl-es, blackberry-10, blackberry-qnx

我想按照这个[教程](http://developer.blackberry.com/native/beta/documentation/hello_nativesdk_before_you_begin_1935867_11.html)

但它说要创建一个 BlackBerry 10 OS OpenGL ES 1.1 应用程序模板项目。但是当我尝试在 QNX IDE 中创建一个新的 blackberry10 C/C++ 项目时，我没有看到任何选项。

![在此处输入图像描述](../Images/866486b94af29e9689b61f26c40d41b7.png)

如何添加此选项？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T15:13:18.160

确保您已加载最新工具，当我按照链接中的说明使用 Beta 4 IDE 时，我看到：

![新建 BlackBerry C/C++ 项目对话框](../Images/170959488dcbfe13116e1ca6392f2c81.png)

# javascript - 如何使用 date.js 将 JSON 中的时间对象与另一个时间进行比较

> ID：13736934
> 
> 赞同：0
> 
> 时间：2012-12-06T04:24:12.293
> 
> 标签：javascript, json, datejs

我正在使用 JavaScript、JSON 和 date.js，我正在尝试解析 JSON 文件以仅显示当前发生的类列表。我已经能够解析 JSON 文件，因此它只显示当天发生的课程。不过，我无法正确解析时间。

我的 JSON 文件的一部分：

```
[
{
    "day": "Monday",
    "activities": [
        {
            "activity": "Freestyle ",
            "times": [
                {"start":"6:30 AM","end":"7:15 AM"},
                {"start":"7:15 AM","end":"8:15 AM"},
                {"start":"5:15 PM","end":"6:00 PM"}
            ]
        },
        {
            "activity": "Open Skate ",
            "times": [
                {"start":"11:30 AM","end":"5:00 PM"},
                {"start":"7:30 PM","end":"9:30 PM"}
            ]
        },
        {
            "activity": "Holiday Snowbunnies 1 ",
            "times": [
                {"start":"6:00 PM","end":"6:30 PM"}
            ]
        }
    ]
},
{
    "day": "Tuesday",
    "activities": [
        {
            "activity": "Freestyle ",
            "times": [
                {"start":"5:45 AM","end":"6:30 AM"},
                {"start":"6:30 AM","end":"7:15 AM"},
                {"start":"6:45 PM","end":"7:30 PM"}
            ]
        },
        {
            "activity": "Open Skate ",
            "times": [
                {"start":"10:00 AM","end":"5:00 PM"},
                {"start":"7:30 PM","end":"9:30 PM"}
            ]
        },
        {
            "activity": "Patch ",
            "times": [
                {"start":"10:00 AM","end":"10:30 AM"}
            ]
        }
    ]
}
] 
```

我的 JavaScript - 具有适当的功能：

```
function updateSchedule(responseText){
var activitiesDiv = document.getElementById("activities");
var skActivities = JSON.parse(responseText);
var toDay = Date.today().getDayName();
var now = new Date();
var curHour = now.toTimeString('hh:mm tt');

for(var i=0;i<skActivities.length;i++){
    var activityDay = skActivities[i];
    if(activityDay.day == toDay)
    {   
        var toDaysActivities = activityDay.activities;
        for(var j=0;j<toDaysActivities.length;j++){
            var toDayActivity = toDaysActivities[j];

            var curTimeDayActivities = toDayActivity.times;
            for(var k=0;k<curTimeDayActivities.length;k++){
                var curTimeDayStartActivity = curTimeDayActivities[k].start;

                if(curTimeDayStartActivity >= curHour){
                    var div = document.createElement("div");
                    div.innerHTML = toDayActivity.activity + ": " + curTimeDayActivities[k].start;
                    activitiesDiv.appendChild(div);
                }
            }
        }
    }
    continue;
  }
} 
```

目前，该函数正在返回一周中当天发生的所有课程及其时间。**注意**：“11:30 AM Open Skate”除外。似乎返回的唯一值是 9 及以下的值。

同样，我的意图是让用户访问该站点并查看当前正在上课的课程。

**注意**：如果我们不需要使用 date.js 的解决方案，我可以接受。只是以为我会合并它。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:32:47.070

我认为日期库在这里不会有太大帮助，它只会增加臃肿和其他需要维护和担心的东西。以下获取“当前”活动，由您来格式化返回的数据并对其进行处理。

它不需要太多的日期支持，它主要是过滤活动。将时间转换为日期对象以进行比较是微不足道的（3 行代码）。

```
var dUtil = {

  // Use provided date object, or today
  // Add support for strings?
  getDayName: function(dateObj) {
    var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
    dateObj = dateObj || new Date();
    return days[dateObj.getDay()];
  },

  // Expects a string like '10:00 AM', assumes current date
  // Note that this will only work where client and server are
  // the same timezone
  timeToDate: function(s) {
    var d = new Date();
    s = s.split(/[: ]/);
    d.setHours((s[2] == 'AM'? s[0] : +s[0] + 12), s[1], 0);
    return d; 
  }
};

function getCurrentActivities(data) {

  var currentActivities = [];
  var todayActivities, activity, name, times, start, end;
  var now = new Date();

  // Get current day name
  var currentDayName = dUtil.getDayName();

  // Get activities from array
  for (var i=0, iLen=data.length; i<iLen; i++) {
    if (data[i].day == currentDayName) {
      todayActivities = data[i].activities;
      break;
    }
  }

  // If there are no activities for today, return undefined
  if (!todayActivities) return;

  // For each activity today, see what are on now
  for (var j=0, jLen=todayActivities.length; j<jLen; j++) {
    activity = todayActivities[j];
    name = activity.activity;

    // Loop over times to see if on now
    times = activity.times;
    for (var k=0, kLen=times.length; k<kLen; k++) {

      if (dUtil.timeToDate(times[k].start) < now && 
          dUtil.timeToDate(times[k].end) > now) {

        // Add activity to result array
        // Format to whatever is needed
        // This gives an array of strings like "Freestyle  - 6:45 PM to 7:30 PM"
        currentActivities.push(name + ' - ' + times[k].start + ' to ' + times[k].end);
      }
    }
  }
  return currentActivities;
} 
```

# html - html目录列表格式

> ID：13736936
> 
> 赞同：6
> 
> 时间：2012-12-06T04:24:24.930
> 
> 标签：html, apache, list, configuration, directory

因此，我一直在尝试让网页动态显示视频链接（通过符号链接）（即，不`<a></a>`为每个视频硬编码标签），我想我可能已经找到了一个解决方案，尽管哈克一：

```
<a href="./Video/">Video</a> 
```

忽略这是一种可怕的方法，有谁知道如何格式化以下内容？：

![在此处输入图像描述](../Images/e89e88e19ec16ed9381f3e819d90eaef.png)

我猜某处有一个 apache 配置文件，但搜索它非常困难，因为我不知道以这种方式列出文件时它被称为什么。

我基本上是想调整列的宽度，甚至可能做一些漂亮的事情。

这一切都在我的网络/文件服务器上运行，并且正在从我的本地计算机访问。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-06T04:29:01.667

这就是您要查找的内容：http: [//perishablepress.com/better-default-directory-views-with-htaccess/](http://perishablepress.com/better-default-directory-views-with-htaccess/)

本教程详细介绍了如何使用 HTAccess 文件修改 Apache 的目录列表以适合您的口味。

使用 Apache **HeaderName**和**ReadmeName**指令以及模块“ **mod_autoindex.c** ”，您可以将自定义标记添加到目录列表页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-04T07:30:21.250

要显示指向 A/V 和其他文件的链接，请查看我的网站：[https](https://wrcraig.com/ApacheDirectoryDescriptions) ://wrcraig.com/ApacheDirectoryDe​​scriptions 。

它超越了默认目录描述，提供了一个电子表格来帮助创建详细描述并将它们导出为 FancyIndex/AddDescription 格式以包含在 .htaccess 中。

它还提供了一个菜单驱动的 BASH 脚本替代方案，使用上面的 FancyIndex 描述性数据（自动添加 A/V 持续时间）以递归方式填充自定义 index.html，同时保留 .htaccess 的安全功能。

该站点有输入电子表格的示例以及 FancyIndex 输出和可选的 BASH 脚本输出。

# windows - 在 App Titanium 中管理多个窗口

> ID：13736940
> 
> 赞同：0
> 
> 时间：2012-12-06T04:24:34.187
> 
> 标签：windows, stack, titanium

目前，我的应用程序有许多具有相应 ID 的窗口。每个我想去其他页面，我创建一个窗口并添加视图对应并打开它。我想通过堆栈数组管理窗口。每次创建一个新窗口并打开它，我都会将该窗口的ID推送到堆栈窗口。然后在堆栈数组中进行测试。如果该ID存在，我将使用该ID关闭前面的窗口。代码如下：

```
var stackWindows=[];  //global variable

//function test the exist of window
function testWindowExist(windows)
{

 for(var i=0;i<windows.length;i++)
 {
   for(var j=i+1;j<windows.length;j++)
    {
      if(windows[i]==windows[j])
      {
       return windows[i];  
       //close windows with ID=windows[i];
      }
      else
      {
        //do nothing
        return 0;
      }
    }
 } 
```

}

我想我可以获取存在的窗口的 ID，但我不知道关闭该窗口的方法。你能帮帮我吗（对不起，我英语不好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:50:04.320

关闭窗口真的很简单：

```
windows[i].close(); 
```

但我相信你还有比这更大的问题。您上面的算法与这个相同：

```
if (windows.length < 2) return undefined;
if (windows[0] == windows[1] return windows[0];
return 0; 
```

# android - Android：使用 Loader 发出 http 请求，更新 SQLite 数据库并填充 GridView 片段

> ID：13736946
> 
> 赞同：2
> 
> 时间：2012-12-06T04:25:18.703
> 
> 标签：android, android-loadermanager

在我的 Android 应用程序中，我正在发出一个 http 请求，获取一些数据，将其放入我的本地 sqlite 数据库，然后使用该数据填充一个网格视图。我有一个活动的代码，但我现在需要使用片段来完成这项工作，因为有许多类似的页面要显示。我读到使用 Loader 是处理片段中数据的最佳方式。

我不确定：

1.  是否使用 CursorLoader、Async taskLoader 或 SQLiteLoader（由 commons guy 开发）。
2.  在哪个加载器函数（onCreateLoader()、onLoadFinished() 等）中，我将我的代码用于发出 http 请求、填充本地数据库并获取在我的片段的 gridview 中显示的数据
3.  我还使用延迟加载列表来显示图像。如果我使用装载机，这将如何适应整个事情

有人可以帮我解决这个问题吗？尝试搜索好的示例或教程，但我还没有真正找到真正有用的东西。所以，如果可以的话，请提出任何建议。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T05:56:04.613

> 是否使用 CursorLoader、Async taskLoader 或 SQLiteLoader（由 commons guy 开发）。

`CursorLoader`是为了`ContentProviders`（这不是你的情况）并且`AsyncTaskLoader`是要走的路。我没有使用 Commonsware 的类，但如果它们允许覆盖他们的一些方法，那么我想你可以使用它。

> 在哪个加载器函数（onCreateLoader()、onLoadFinished() 等）中，我将我的代码用于发出 http 请求、填充本地数据库并获取在我的片段的 gridview 中显示的数据

在这些回调中都没有，因为它们（很可能）在主 UI 上运行，并且您不能在那里进行网络操作。`Loader`子类具有在`loadInBackground`后台线程上运行的方法。在这种方法上，`Loader`查询数据以及您可以在其中放置网络请求和数据库更新。但是您需要*非常小心*，不要在数据库中插入重复数据。

> 我还使用延迟加载列表来显示图像。如果我使用装载机，这将如何适应整个事情

由于我还没有看到你的代码，我认为这两个部分没有联系。我猜您是直接在`GridView`'s 适配器中使用延迟图像加载代码。

我的建议是不要使用 Loaders 来加载**和**插入数据，因为它们的目的是只在后台线程上加载数据（负责配置更改）。对于您的特殊情况，我会自己制作`AsyncTaskLoader`（或使用 Commonsware 的库）来查询数据库以获取新数据。然后我会启动一个新`AsyncTask`的来执行 http 请求并将数据插入数据库中，然后我会在(with )的方法中触发`Loader`重新启动。看看[这个类似](https://stackoverflow.com/questions/13571805/inserting-records-via-loaders-in-android/13572393#13572393)的问题，了解与您正在尝试做的事情相关的一些问题。`onPostExecute``AsyncTask``getLoaderManager().restartLoader...`

# c - 在C中删除字符串数组的前两个元素

> ID：13736948
> 
> 赞同：2
> 
> 时间：2012-12-06T04:25:28.863
> 
> 标签：c

如何删除字符串数组的前两个元素？我有一个类似这样的代码。

```
char *x[10];
..............
..............
..............
char *event[20];
event[0]=strtok(x[i]," ");
event[1]=strtok(NULL," ");
event[2]=strtok(NULL," ");
event[3]=strtok(NULL," ");
event[4]=strtok(NULL," ");
event[5]=strtok(NULL," ");
for(i=2;i<length;i++)
{
    strcpy(event[i-2],event[i]);
} 
```

我观察到只有 event[0] 有正确的值。我在 for 循环之前打印了 event[][] 的内容，它显示正确。你能告诉我为什么这是错误的吗？和可能的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:49:07.733

您不应该`strcpy()`在此代码中使用。*在终止于发现的分隔符后*，API[`strtok()`](http://www.cplusplus.com/reference/cstring/strtok/)将返回一个指向在原始源缓冲区中发现的分隔标记的指针。因此，您在 不应该使用的地方使用。*`strcpy()`*

 *您的`events[]`数组具有从返回的*指针*`strtok()`。只需抛出前两个指针并将其他指针向下移动：

```
for(i=2;i<length;i++)
    event[i-2] = event[i];
length -= min(length, 2); 
```

注意：`min()`需要确保您的长度（有符号或无符号）永远不会低于零（如果有符号）或 UINT_MAX（如果无符号），以防`length`输入时尺寸过小。*

# java - 优化 Java 代码片段

> ID：13736949
> 
> 赞同：2
> 
> 时间：2012-12-06T04:25:46.520
> 
> 标签：java

我正在尝试缩短我正在编码的程序上的代码，而我需要关于缩短建议的代码是这一部分：

```
imgRunM[0] = toolkit.createImage(imageURL11);
imgRunM[1] = toolkit.createImage(imageURL12);
imgRunM[2] = toolkit.createImage(imageURL13);
imgRunM[3] = toolkit.createImage(imageURL14);
imgRunM[4] = toolkit.createImage(imageURL15);
imgRunM[5] = toolkit.createImage(imageURL16); 
```

我在想它可以写成一个循环，只是不知道如何正确地写它。

我试过这个：

```
for (int x=1; x<7;x++)
  imgRunM[x-1] = toolkit.createImage(imageURL1+x); 
```

它没有出错，但是当我运行程序时，图像没有出现，所以我不确定发生了什么。

如果有人有任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:31:09.757

我建议也制作一个 imageURL 数组，而不是为每个变量设置一个新的变量名。然后你可以这样做：

```
for (int i = 0; i <= 5; i++) {
    imgRunM[i] = toolkit.createImage(imageURL[i+11]);
} 
```

不知道为什么你有 +11 偏移量，但我保持原样。

# objective-c - Objective-C 中的 3 层架构

> ID：13736950
> 
> 赞同：0
> 
> 时间：2012-12-06T04:25:47.487
> 
> 标签：objective-c, architecture, runtime

我刚读完苹果的objective-c开发者手册。所以我几乎知道关于objective-c的一切（嘻嘻）。我想知道如何在 Objective-c 中设计一个 3 层应用程序。三层是 Cocoa 中的前端应用程序，纯 Objective-c 中的中间层和后端（数据访问也在 Objective-c 和 mysql db 中）。

我对讨论为什么需要 3 层架构并不是很感兴趣，我想将讨论范围缩小到“如何”。

例如，我可以有 3 个单独的 x-code 项目，每层一个吗？如果是这样，我将如何将项目链接在一起。在 java 中，我可以将每一层导出为 jar 文件并形成适当的关联。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T15:32:43.097

我想我想出了如何做到这一点......为中间层和后端层使用静态库，为前端使用 Cocoa 应用程序。

# java - 在java主机上写文件

> ID：13736951
> 
> 赞同：2
> 
> 时间：2012-12-06T04:26:02.540
> 
> 标签：java, servlets, file-io

我的问题是我可以在我的 tomcat localhost 上写一个文件，但是当我上传到托管服务器时，我在目录中的任何地方都看不到它，也无法通过链接获取它。我收到 404 响应。

创建文件时，我使用了以下代码：

```
 public class FileObject {
    String path;
            File uploadFile;
            public FileWriter fstream;

public void createFoler(String path){
    this.path=path;
    File newFolder = new File(path);
    try{
                if(newFolder.mkdirs()){
                    System.out.println();
                }
                else{

                }
            } catch(Exception e){
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    System.out.println(newFolder.getAbsolutePath());
}
public void createFile(String file){
        try {
    String fullpath= path + File.separator + file;
    //fstream = new FileWriter(fullpath);
            fstream = new FileWriter(file);
        } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        }catch(Exception e){
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

对于路径，我使用此代码获取根路径：

```
 String rootPath = request.getRealPath(this.toString()).substring(0,request.getRealPath(this.toString()).lastIndexOf(File.separator));
   FileObject fo = new FileObject();
    //        fo.createFoler( "webDatabase");
   fo.createFoler(rootPath+File.separator+ "webDatabase");
   fo.createFile("webDatabase.txt"); 
```

我也试过用这个：

```
 fo.createFoler("");
   fo.createFile("webDatabase.txt"); 
```

但它也没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:28:08.483

试试这个代码而不是 FileObject 代码

```
File directory = new File(rootPath+File.separator+ "webDatabase");
directory.mkdirs();
File file = new File(directory, "webDatabase.txt");
FileOutputStream fos = new FileOutputStream(file);
fos.write(); // You content writing here
fos.close(); 
```

# android - Linux互斥锁必须是全局的？

> ID：13736955
> 
> 赞同：0
> 
> 时间：2012-12-06T04:26:18.003
> 
> 标签：android, linux, multithreading

我在网上看到的大多数示例都有 pthread_mutex_t 位于全局空间中文件的顶部，我想我在某处读到 Linux 互斥锁必须是全局的。这是真的？

编辑：我有一些 Win32 多线程代码要移植到 Linux。对于 Windows 代码，有几个封装函数可以封装互斥体创建和锁定/解锁等内容。我的理解是，通过 Windows 中的一个 API 调用创建的每个同步原语都会`Create()`返回一个 HANDLE，该 HANDLE 可以存储在实例字段中，然后稍后使用。在这种情况下，它在 Lock() 函数中使用，该函数是 WaitForSingleObject() 的包装器。对于 Linux，我是否可以简单地将互斥锁存储在实例字段中并调用`pthread_mutex_lock()/pthread_cond_wait()`Lock() 函数并期望与 Windows 上的行为相同？

```
Nv_Mutex::Nv_Mutex(Nv_XprocessID name)
{

#if defined(WIN32)
    if((handle = ::CreateMutexA(0, false, name)) == NULL)
    {
        throw Nv_EXCEPTION(XCPT_ResourceAllocationFailure, GetLastError());
    }

    isCreator = !(::GetLastError() == ERROR_ALREADY_EXISTS);
#else
    if (name == Nv_XprocessID_NULL) {
        /*
        pthread_mutex_t mutex = PTHREAD_MUTEX_INITIALIZER;                     // Fast
        pthread_mutex_t recmutex = PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP;     // Recursive
        pthread_mutex_t errchkmutex = PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP; // Errorcheck
        */
        mutex = PTHREAD_MUTEX_INITIALIZER;
        // attributes??

        if (pthread_mutex_init(&mutex, NULL) != 0) {
            throw Nv_EXCEPTION(XCPT_ResourceAllocationFailure, GetLastError());
        }
    }
    else {
        // insert code for named mutex (needed for shared mutex across processes) here.
    }

    //isCreator = !(GetLastError() == EBUSY);
#endif
}

bool                
Nv_Mutex::Lock(const char *f, int l, Nv_uint32 timeout)
{

    switch(WaitForSingleObject(handle, timeout))
    {
        case WAIT_OBJECT_0:
            file = f;
            line = l;
            return true;

        case WAIT_TIMEOUT:
            return false;
    }

    throw Nv_EXCEPTION(XCPT_WaitFailed, GetLastError());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:30:52.853

不，它们可以限定范围。实际的互斥指针没有什么特别之处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T19:18:54.930

You have the requirement a bit wrong. Mutexes do not need to be global, however, you cannot statically initialize a non-static mutex. But you do not need to statically initialize a mutex prior to calling `pthread_mutex_init` on it, because that initializes it. So just don't use static initializers and instead call `pthread_mutex_init`.

It will actually work, but this is by luck due to the details of the implementation. Please don't rely on an implementation detail.

> Static initialization is legal only for statically ALLOCATED storage[.] ... Although C syntax allows using the static initialization macros on "automatic" variables, this is specifically prohibited by the POSIX standard. It's not correct, and it's not portable. - [David Butenhof](http://newsgroups.derkeiler.com/Archive/Comp/comp.programming.threads/2005-11/msg00135.html)

# ruby-on-rails - Heroku App 在 CNAME 下不会通过 w3c 验证器，为什么？

> ID：13736956
> 
> 赞同：2
> 
> 时间：2012-12-06T04:26:19.033
> 
> 标签：ruby-on-rails, heroku, dns, cname

我有一个域 sub.example.com，它通过 CNAME 记录（来自 www.name.com 的域）指向 herokuapp.com 应用程序。在浏览器中输入域时，应用程序加载得很好，但是当我尝试通过 w3c.org 上的 HTML 验证器传递它时，我收到一个错误：

> 500 无法连接到 sub.example.com:80 (Bad hostname 'sub.example.com')

在我的应用程序中，我有一个“og：image”元标记，用于在 Facebook 上链接时显示图像。在 Facebook 中使用“http://sub.example.com”时，“og:image”不显示（实际上我的打开图形标签似乎都不起作用）。

但是，当我在 w3c.org 验证器或 Facebook 中使用 blah-1234.herokuapp.com 域时，一切正常。验证器运行，我的图像显示等。在控制台中，当我输入“heroku 域”时，它返回“sub.example.com”。我真的不知道是什么导致了这些错误。Heroku 或 Name.com 上是否有一些我可能忽略的设置？

额外的：

*   我的 CNAME 记录的 TTL 为 300
*   “curl sub.example.com”返回我的应用程序呈现的根页面
*   编辑：我的根域有一条 A 记录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T07:02:56.067

看来这个问题完全是由我在 Name.com 的 DNS 记录管理器中输入 herokuapp 地址的方式引起的。我按`http://blah-1234.herokuapp.com`应有的方式输入了它`blah-1234.herokuapp.com`。

是一开始的“http://”导致了所有问题。鸡蛋在脸上。

# javascript - javascript循环：变量等于最后一次迭代

> ID：13736957
> 
> 赞同：0
> 
> 时间：2012-12-06T04:26:21.613
> 
> 标签：javascript, loops, iteration

一旦用户单击 addmore 链接，下面的代码将添加元素。

当用户单击删除链接时，问题就出现了。

我的代码上有类似的东西

```
<script language="JavaScript">
var count=1;
function addmore() {
    alert(count);
    var printme = "<table id='table"+count+"'><tr><td><a href='#' onclick='remove(count)'>remove</a></td></tr></table";
    //(other code here)...
    count++;
}

function remove(y) {
    alert(y)
    var tab = 'table'+y;    
    document.getElementById(tab).style.display =  "none";
}
</script> 
```

我在这里使用了警报，因此我可以轻松监控它给出的计数值。

这里发生的是'y'的值（在删除函数上）总是相同的，这是循环中的最后一个值。

例如，我单击链接 addmore 3 次，因此我的“count=4”的最后一个值。假设我想删除第三个元素，此时当我单击删除链接时，它必须具有像这样的 remove(3) 传递参数。但是这里发生的是我点击的任何元素，它似乎总是以这种方式传递参数 remove(4)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:27:47.223

那是因为你有`count`一个全局变量。

尝试`.....onclick='remove("+count+")'....`“锁定”价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T04:28:59.350

请试试这个：

```
var printme = "<table id='table"+count+"'><tr><td><a href='#' onclick='remove("+count+")'>remove</a></td></tr></table"; 
```

还可以尝试以下行删除功能：

```
document.getElementById(""+tab+"").style.display =  "none"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-06T04:29:26.603

也许只是 onclick='remove('+count+')'

你可以做类似的事情

```
<html>
<head>
<script type="text/javascript">
var count=1;
function addmore() {
    var id = 'table' + count;
    var table = document.createElement('table');
    table.setAttribute('id', id);
    var tr = document.createElement('tr');
    var td = document.createElement('td');
    var a = document.createElement('a');
    a.setAttribute('href', '#');
    a.appendChild(document.createTextNode('remove ' + id));
    a.onclick = function() {
        table.style.display = 'none';
        document.body.removeChild(table);
    };
    td.appendChild(a);
    tr.appendChild(td);
    table.appendChild(tr);
    document.body.appendChild(table);
    count++;
}
</script>
</head>
<body>
<a href="#" onclick="addmore()">Add Table</a>
</body>
</html> 
```

使用像这样定义的表引用和 onclick，您不需要 id

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-06T04:48:06.470

之前的所有答案都是正确的，onclick 是指调用 remove 时的当前变量计数。

当您为表格生成文本时，您将使用 count 的值，因为它是：

```
onclick='remove('+count+')... 
```

您可以省略 id 并使用以下方法完全计数：

```
onclick='remove(this.parentElement.parentElement.parentElement);'...

function remove(elementToRemove){
    elementToRemove.parentElement.removeChild(elementToRemove);
} 
```

# ember.js - 在 UIWebView 中仍然使用 Router 反序列化时使用 Ember.NoneLocation

> ID：13736964
> 
> 赞同：0
> 
> 时间：2012-12-06T04:26:59.380
> 
> 标签：ember.js

我有一个看起来像这样的路由器：

```
App.Router = Em.Router.extend({
  enableLogging: true,
  root: Em.Route.extend({
    index: Em.Route.extend({
      route:'/',
      connectOutlets: function(router, context){
        router.get('applicationController').connectOutlet('textChallenge', App.TextChallenge.find());
      }
    }),

    textChallenge: Em.Route.extend({
      route:'/textChallenge/:challengeId',
      connectOutlets: function(router, context){
        router.get('applicationController').connectOutlet('textChallenge', context);
      },
      //this doesn't really work yet
      serialize: function(router, context){
        return{
          challengeId: context.get('challengeId')
        }
      },
      deserialize: function(router, urlParams){
        return App.TextChallenge.find(urlParams.challengeId);
      }
    })
  })
}); 
```

但是，我试图在 UIWebView 中运行它，它不喜欢被弄乱的 URL（请参阅此问题：[https](https://github.com/emberjs/ember.js/issues/1575) ://github.com/emberjs/ember.js/issues/1575 ）。我只是不太明白如何在这里实现 Ember.NoneLocation。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T12:10:05.100

我相信它就像在路由器上设置一个属性一样简单`location: 'none'`

# c# - 如何以编程方式运行 aspnet_regiis 命令

> ID：13736966
> 
> 赞同：1
> 
> 时间：2012-12-06T04:27:17.007
> 
> 标签：c#, asp.net

如何有问题地运行 aspnet_regiis 命令

我希望此代码以编程方式在 C# 代码中运行

**aspnet_regiis.exe -pdf "连接字符串" "C:\Users\99xccba\Desktop\连接字符串\DNN"**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:44:04.353

非常简单的任务

主要方法

```
 /// <summary>
    /// Method to run windows process
    /// </summary>
    /// <param name="processName">Process Name</param>
    /// <param name="arguments">Arguments </param>
    private void RunProcess(string processName, string arguments)
    {
        var newProcess = new ProcessStartInfo(processName);
        Log("User: " + GetSystemName());

        if (arguments.IsNotNullOrEmpty())
            newProcess.Arguments = arguments;
        newProcess.CreateNoWindow = false;
        newProcess.ErrorDialog = true;
        newProcess.RedirectStandardError = true;
        newProcess.RedirectStandardInput = true;
        newProcess.RedirectStandardOutput = true;
        newProcess.UseShellExecute = false;
        using (var proc = new Process())
        {
            proc.StartInfo = newProcess;
            proc.Start();
            Log(proc.StandardOutput.ReadToEnd());
        }
    } 
```

调用该方法的过程

```
string framework = @"C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe";

                if (8 == IntPtr.Size
                    || (!String.IsNullOrEmpty(Environment.GetEnvironmentVariable("PROCESSOR_ARCHITEW6432"))))
                    framework = @"C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe";

                RunProcess(framework, "-ga " + GetSystemName()); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-06T04:41:51.650

```
Process process = new Process();
process.StartInfo.FileName = "cmd.exe";
process.StartInfo.Arguments = "dir";
process.Start(); 
```

确保您声明了正确的路径。然后用您自己的命令替换 Arguments。或者您可以创建一个设置了路径的批处理文件并执行它。

# android - 蓝牙断开时显示通知 - Android

> ID：13736967
> 
> 赞同：1
> 
> 时间：2012-12-06T04:27:27.700
> 
> 标签：android, bluetooth, notifications, broadcastreceiver

我正在尝试创建一个程序，如果**蓝牙**设备突然超出我的 Android 设备的范围，它将`notification`向用户显示。我目前有以下代码，但没有显示通知。

 **我想知道是否有可能我不应该使用`ACTION_ACL_DISCONNECTED`，因为我相信`bluetooth`堆栈会期待表示请求断开连接的数据包。我的要求是蓝牙设备将在没有警告的情况下断开连接。

感谢您的任何帮助！

BluetoothNotification.java: //这是创建通知的地方。

```
import android.app.Activity;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;

import android.app.Activity;
import android.app.Notification;
import android.app.NotificationManager;
import android.app.PendingIntent;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;

public class BluetoothNotification extends Activity
{
public static final int NOTIFICATION_ID = 1;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    /** Define configuration for our notification */
    int icon = R.drawable.logo;
    CharSequence tickerText = "This is a sample notification";
    long when = System.currentTimeMillis();
    Context context = getApplicationContext();
    CharSequence contentTitle = "Sample notification";
    CharSequence contentText = "This notification has been generated as a result of BT Disconnecting";
    Intent notificationIntent = new Intent(this, BluetoothNotification.class);
    PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

    /** Initialize the Notification using the above configuration */
    final Notification notification = new Notification(icon, tickerText, when);
    notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);

    /** Retrieve reference from NotificationManager */

    String ns = Context.NOTIFICATION_SERVICE;
    final NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);

    mNotificationManager.notify(NOTIFICATION_ID, notification);

    finish();
}    
} 
```

来自 OnCreate 的片段：//位于 Controls.java

```
IntentFilter filter1 = new IntentFilter(BluetoothDevice.ACTION_ACL_DISCONNECTED);
this.registerReceiver(mReceiver, filter1); 
```

来自 Controls.java 的片段：

```
private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);

        if (BluetoothDevice.ACTION_ACL_DISCONNECTED.equals(action)) {
               //Device has disconnected
            NotificationManager nm = (NotificationManager) 
                    getSystemService(NOTIFICATION_SERVICE);
        }

    }

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:01:02.187

您的 BroadCastReceiver 和您的 Activity 之间的联系是什么？

不需要此活动，将所有内容放在广播接收器中以显示通知。**

# c++ - C++ 派生类的“没有适当的默认构造函数可用”

> ID：13736972
> 
> 赞同：0
> 
> 时间：2012-12-06T04:27:43.717
> 
> 标签：c++, class, templates, struct

我对 C++ 类定义感到困惑。有人可以帮我吗？

我有这样定义的原始模板类：

```
template <typename T> 
struct SYNCHED_DATA{
    SYNCHED_DATA(int r)
    {
        var_R = r;
    }

    void set(T* pV)
    {
        var_T = *pV;
    }

    //...

private:
    //Copy constructor and assignments are NOT available!
    SYNCHED_DATA(const SYNCHED_DATA& s)
    {
    }
    SYNCHED_DATA& operator = (const SYNCHED_DATA& s)
    {
    }

    T var_T;
    int var_R;
}; 
```

然后我从另一个类中使用它：

```
struct THREADS_REPORT{
    THREADS_REPORT()     //error C2512: 'SYNCHED_DATA<T>' : no appropriate default constructor available
    {
    }

    void getReport(THREADS_REPORT_DATA* pOutReport)
    {
        //Retrieve report array
        sthrd.get(pOutReport);
    }
    void setReport(THREADS_REPORT_DATA* pReport)
    {
        //Set report array
        sthrd.set(pReport);
    }

private:
    SYNCHED_DATA<THREADS_REPORT_DATA> sthrd;

    //Copy constructor and assignments are NOT available!
    THREADS_REPORT(const THREADS_REPORT& s)   //error C2512: 'SYNCHED_DATA<T>' : no appropriate default constructor available
    {
    }
    THREADS_REPORT& operator = (const THREADS_REPORT& s)
    {
    }
}; 
```

但是我至少在第二类中的两个位置出现“错误 C2512”错误（在上面的代码中标记。）我需要如何更改第二类以使其编译？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T04:35:00.240

您应该尝试通过成员初始化器列表`THREADS_REPORT::sthrd`在构造函数中进行初始化：`THREADS_REPORT`

```
 THREADS_REPORT(int i) : sthrd(i)
 {
 } 
```

或为以下内容提供默认构造函数`SYNCHED_DATA`：

```
SYNCHED_DATA() {} 
```

# sql - 合并两列然后分组

> ID：13736975
> 
> 赞同：0
> 
> 时间：2012-12-06T04:28:11.920
> 
> 标签：sql, group-by, oracle11g

我有以下表格和数据，我想将 loc1 和 loc2 合并在一列中，并从 loc 列中删除重复值，然后根据 group_no 列对其进行分组。

```
drop table test;
create table test (loc1 number(9), loc2 number(9), group_no number(9));
insert into test values(2,3,1);
insert into test values(2,9,1);
insert into test values(4,3,1);
insert into test values(6,8,2);
insert into test values(11,7,2);
insert into test values(20,15,2);
insert into test values(15,14,2);
insert into test values(21,31,3);
insert into test values(31,32,3); 
```

预期结果是：

```
loc   group_no
2        1
3        1
9        1
4        1
6        2
8        2 
11       2
20      2 
15       2
21       3
31       3
32       3 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T04:44:23.773

根据您的预期结果，您想要分组`loc`而不是`group_no`.

```
select t.loc, max(t.group_no)
(
    select loc1 as loc, group_no from test

    union

    select loc2 as loc, group_no from test
) t
group by t.loc
order by 2,1 
```

# android - 如何在 Android 上隐藏 Google Groups 移动网站上的导航栏？

> ID：13736979
> 
> 赞同：0
> 
> 时间：2012-12-06T04:28:52.337
> 
> 标签：android, android-webview, google-groups

对于我正在制作的应用程序，我们将 Google Group 放在 Web 视图中，以便我们可以使信息尽可能保持最新。

当我在 WebView 中加载 Google Groups 移动站点时，它会出现一个用于 Google+、Gmail、日历等的导航栏。我想知道是否有办法摆脱这种情况。我知道 Google Groups 有一大堆参数，您可以在 URL 中解析以对其进行自定义，但是我找不到一个可以摆脱此导航栏的参数。

这是加载了 Google Groups 的 WebView 的屏幕截图。我目前用来测试的网址是[https://groups.google.com/forum/m/](https://groups.google.com/forum/m/)

![在 Android 手机上加载的 Google 网上论坛](../Images/e2f426741acee1daf9fdb772bd96356b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:19:43.897

事实证明，这个导航栏只有在检测到请求来自 Android 手机时才会出现。所以我们可以简单地将用户代理更改为其他东西，这个导航栏就会消失。

```
WebSettings settings = webView.getSettings();
settings.setJavaScriptEnabled(true); //Required for Google Groups
settings.setUserAgentString("MyApplication Android");

webView.loadUrl("https://groups.google.com/forum/m/"); 
```

# c++ - 使用 C++ 继承的不可访问项

> ID：13736983
> 
> 赞同：0
> 
> 时间：2012-12-06T04:29:01.590
> 
> 标签：c++, inheritance

我正在研究使用继承的 C++ 项目。在下面的文件 administrator.h 中，我似乎在 Visual Studio 中有错误。它说第 17 行的 salariedemploye:salary 无法访问，我不知道为什么。

管理员.cpp

＃包括

```
namespace SavitchEmployees
{
    Administrator::Administrator( ):SalariedEmployee(), salary(0)
    {
        //deliberately empty
    }

    Administrator::Administrator(const string& theName, const string& theSsn, double theAnnualSalary)
      :SalariedEmployee(theName, theSsn),salary(theAnnualSalary)
    {
        //deliberately empty
    }

    void Administrator::inputAdminData()
    {
        cout << " Enter the details of the administrator " << getName() << endl;
        cout << " Enter the admin title" << endl;
        getline(cin, adminTitle);
        cout << " Enter the area of responsibility " << endl;
        getline(cin, workingArea);
        cout << " Enter the immediate supervisor's name " << endl;
        getline(cin, supervisorName);
    }

    void Administrator::outputAdminData()
    {
        cout << "Name: " << getName() << endl;
        cout << "Title: " << adminTitle << endl;
        cout << "Area of responsibility: " << workingArea << endl;
        cout << "Immediate supervisor: " << supervisorName << endl;
    }

    void Administrator::printCheck()
    {
        setNetPay(salary);
        cout << "\n___________________________________\n"
             << "Pay to the order of " << getName() << endl
             << "The sum of" << getNetPay() << "Dollars\n"
             << "______________________________________\n"
             << "Check Stub Not negotiable \n"
             << "Employee Number: " << getSsn() << endl
             << "Salaried Employee(Administrator). Regular Pay: "
             << salary << endl
             << "______________________________________\n";
    }
} 
```

管理员.h

```
#include <iostream>

#include "salariedemployee.h"
using std::endl;
using std::string;

namespace SavitchEmployees
{
    class Administrator : public SalariedEmployee
    {
        public:
            Administrator();
            Administrator(const string& theName, const string& theSsn, double salary);
            double getSalary() const;
            void inputAdminData();
            void outputAdminData();
            void printCheck();
        private:
            string adminTitle;//administrator's title
            string workingArea;//area of responsibility
            string supervisorName;//immediate supervisor
    };
}

#endif 
```

受薪雇员.cpp

```
namespace SavitchEmployees
{
    SalariedEmployee::SalariedEmployee():Employee(),salary(0)
    {
        //deliberately empty
    }
    SalariedEmployee::SalariedEmployee(const string& theName, const string& theNumber, double theWeeklyPay)
      :Employee(theName, theNumber), salary(theWeeklyPay)
    {
        //deliberately empty
    }
    double SalariedEmployee::getSalary() const
    {
        return salary;
    }
    void SalariedEmployee::setSalary(double newSalary)
    {
        salary = newSalary;
    }
    void SalariedEmployee::printCheck()
    {
        setNetPay(salary);
        cout << "\n___________________________________\n"
             << "Pay to the order of " << getName() << endl
             << "The sum of" << getNetPay() << "Dollars\n"
             << "______________________________________\n"
             << "Check Stub NOT NEGOTIABLE \n"
             << "Employee Number: " << getSsn() << endl
             << "Salaried Employee. Regular Pay: "
             << salary << endl
             << "______________________________________\n";
    }
} 
```

受薪雇员.h

```
#ifndef SALARIEDEMPLOYEE_H
#define SALARIEDEMPLOYEE_H

#include <string>
#include "employee.h"

namespace SavitchEmployees{
    class SalariedEmployee : public Employee{
    public:
        SalariedEmployee();
        SalariedEmployee(const string& theName, const string& theSsn, double theWeeklySalary);
        double getSalary() const;
        void setSalary(double newSalary);
        void printCheck();

    private:
        double salary;
    };
}
#endif 
```

雇员.cpp

```
namespace SavitchEmployees
{
    Employee::Employee():name("No name yet"),ssn("No number yet"),netPay(0){}
    Employee::Employee(const string& theName, const string& theSsn):name(theName),ssn(theSsn),netPay(0){}
    string Employee::getName() const
    {
        return name;
    }
    string Employee::getSsn() const
    {
        return ssn;
    }
    double Employee::getNetPay() const
    {
        return netPay;
    }
    void Employee::setName(const string& newName)
    {
        name = newName;
    }
    void Employee::setSsn(const string& newSsn)
    {
        ssn = newSsn;
    }
    void Employee::setNetPay(double newNetPay)
    {
        netPay = newNetPay;
    }
    void Employee::printCheck() const
    {
        cout << "\nERROR: pringCheck function called for an \n" 
             << "Undifferentiated employee. Aborting the program!\n"
             << "Check with the author of this program about thos bug. \n";
        exit(1);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T04:43:23.023

该变量在中声明为私有`Salariedemplyee.h`。将其更改为受保护以将其用于继承。

```
class SalariedEmployee : public Employee{
    public:
        SalariedEmployee();
        SalariedEmployee(const string& theName, const string& theSsn, double theWeeklySalary);
        double getSalary() const;
        void setSalary(double newSalary);
        void printCheck();

    private:
        double salary;
    }; 
```

第二个问题是成员变量的值只能在与变量属于同一类的构造函数的初始化列表中设置。请改用赋值运算符。

```
Administrator::Administrator(const string& theName, const string& theSsn, double theAnnualSalary)
      :SalariedEmployee(theName, theSsn)
    {
        //deliberately empty
        salary = theAnnualSalary;
    } 
```

# python - 如何在熊猫中获得清晰的 x 轴

> ID：13736988
> 
> 赞同：0
> 
> 时间：2012-12-06T04:29:37.277
> 
> 标签：python, pandas

我尝试通过 pandas 读取文件，如下所示：

```
df=read_csv('C:\Python27\mm.txt',skiprows=7,index_col=[0,1],names=['Date','Time','temp']) 
```

然后我可以得到下面的DataFrame：

```
Date        Time     celsius    
2012-04-12 16:13:09  20.6
2012-04-13 00:13:09  20.6
...
.... 
```

当我绘制 DataFrame 时，X 轴变得如此凌乱，像这样“2012-04-12 16:13:09”那样挤满了时间。X 轴如何只显示年和月？

像这样“df.plot()”绘制代码

PS：我的pandas版本是0.7.3，由于某些原因无法升级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:49:44.343

方法：

```
def parse(datet):
dt=datetime.strptime(datet[0:10],'%Y-%m-%d')
delta=timedelta(hours=int(datet[11:13]),minutes=int(datet[14:17]))
return dt+delta

df=read_csv('c:/py/mimi',skiprows=7,parse_date={'datet':[0,1]},index_col='datet',date_parser=parse) 
```

# c++ - 更改子进程中的 iostreams

> ID：13736990
> 
> 赞同：3
> 
> 时间：2012-12-06T04:29:51.090
> 
> 标签：c++, linux, fork, iostream

现在，我正在做一个项目，我需要启动一个子进程来使用 C++ 在 Linux 中执行一个新程序，并且我需要将标准输入和输出（如在 C++ 中，它们是`cin`and `cout`）重定向到一个文件. 这意味着在子进程中，标准输入和输出都是文件。子进程将从文件（名称为`input.txt`）读取输入，并输出到文件（名称为`output.txt`）。

通过使用`cin.rdbuf()`and `cout.rdbuf()`，我实际上可以在父进程中重定向`cin`and 。但是当子进程启动命令`cout`时它不起作用。`execl()`好像子进程执行`execl()`命令后，标准输入输出恢复正常了。

谁能帮我解决这个问题？这几天我一直很迷茫，找不到出路。

代码如下：

//main.cpp

```
#include<sys/types.h>
#include<sys/time.h>
#include<sys/wait.h>
#include<sys/ptrace.h>
#include<sys/syscall.h>
#include<string>
#include"executor.cpp"
int main(int argc, char*argv[])
{
executor ex;
ex.set_path("/home/test");
ex.run_program();
} 
```

//executor.cpp

```
#include<sys/types.h>
#include<sys/time.h>
#include<sys/wait.h>
#include<sys/ptrace.h>
#include<sys/syscall.h>
#include<string.h>
#include<unistd.h>
#include<iostream>
#include<fstream>

using namespace std;
class executor{
public:
void run_program()
{
    char p[50];
    strcpy(p,path.c_str());
    cpid = fork();
    if(cpid == 0)
    {
                    ifstream file("/home/openjudge/data.txt");
            if(!file) cout<<"file open failed\n";
            streambuf* x = cin.rdbuf(file.rdbuf());
        ptrace(PTRACE_TRACEME,0,NULL,NULL);
        execl(p,"test","NULL);
        cin.rdbuf(x);
        cout<<"execute failed!\n";
    }
    else if(cpid > 0)
    {
        wait(NULL);
        cout<<"i'm a father\n";
    }
}
void set_path(string p)
{
    path = p;
}
private:
int cpid;
string path;
}; 
```

PS`/home/test`是一个简单的程序，它读取`cin`并输出到`cout`;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:24:44.617

您需要在您的孩子之后重定向文件描述符`0`（标准输入）和`1`（标准输出） ：`fork()`

```
switch (fork()) {
case 0: {
    close(0);
    if (open(name, O_RDONLY) < 0) {
        deal_with_error();
    }
    ... 
```

您可能希望在父进程中打开定向到的文件。轻松打开文件可能会使错误处理更容易。在这种情况下，您将使用`dup2()`将正确的文件描述符与文件相关联。

# wpf - 在标签中设置按钮内容（自定义控件）

> ID：13736995
> 
> 赞同：0
> 
> 时间：2012-12-06T04:30:38.703
> 
> 标签：wpf, text

**与其对这个问题投反对票，不如回答告诉我出了什么问题！**

我想在自定义控件的标签中设置按钮内容，因为当我使用它时，内容属性不可见并且按钮为空（无文本）。

Nocturno，谢谢，我是这个网站的新手，我把 C[space]sharp，但我的名声不允许我使用新标签，所以我删除了这个。

我想把Button.Content属性放在自定义控件的一个标签里，因为模板替换了原来的按钮设计，我用这个来节省代码，添加这个按钮不需要很多代码。

```
<Button x:Class="WpfApplication1.UserControl1"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="35" d:DesignWidth="273" Content="Button">
<Button.Template>
    <ControlTemplate>
        <Grid>
            <Rectangle Name="rGridBack" StrokeThickness="1">
                <Rectangle.Fill>
                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                        <GradientStop Color="#FF4D4D4D" Offset="1" />
                        <GradientStop Color="#FF404040" Offset="0" />
                    </LinearGradientBrush>
                </Rectangle.Fill>
                <Rectangle.Stroke>
                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                        <GradientStop Color="#FF4F4F4F" Offset="0" />
                        <GradientStop Color="#FF5B5B5B" Offset="1" />
                    </LinearGradientBrush>
                </Rectangle.Stroke>
            </Rectangle>
            <Rectangle Fill="#FF1E1E1E" Margin="1,1,1,1" Name="rThickness" />
            <Rectangle Margin="2,2,2,2" Name="rGridTop" StrokeThickness="1">
                <Rectangle.Fill>
                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                        <GradientStop Color="#FF68686C" Offset="0" />
                        <GradientStop Color="#FF474747" Offset="1" />
                    </LinearGradientBrush>
                </Rectangle.Fill>
                <Rectangle.Stroke>
                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                        <GradientStop Color="#FF7F7F7F" Offset="0" />
                        <GradientStop Color="#FF575757" Offset="1" />
                    </LinearGradientBrush>
                </Rectangle.Stroke>
            </Rectangle>
   <!--This label is where I want to set the Button.Content property-->
            <Label FontWeight="Normal" Foreground="White" HorizontalContentAlignment="Center" Name="tblckStep1Desc" Padding="0" VerticalContentAlignment="Center">
                <Label.Effect>
                    <DropShadowEffect BlurRadius="2" Color="Black" Direction="330" Opacity="0.7" ShadowDepth="1.5" />
                </Label.Effect>
            </Label>
        </Grid>
        <ControlTemplate.Triggers>
            <Trigger Property="Button.Content" Value="">
                <Setter Property="Content" TargetName="tblckStep1Desc">
                </Setter>
            </Trigger>
            <Trigger Property="UIElement.IsMouseOver" Value="True">
                <Setter Property="Shape.Fill" TargetName="rGridTop">
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FF838383" Offset="0" />
                            <GradientStop Color="#FF545454" Offset="1" />
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
                <Setter Property="Shape.Stroke" TargetName="rGridTop">
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FF595959" Offset="1" />
                            <GradientStop Color="#FF929292" Offset="0" />
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
                <Setter Property="Shape.Stroke" TargetName="rGridBack">
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FF414141" Offset="0" />
                            <GradientStop Color="#FF565656" Offset="1" />
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
                <Setter Property="Shape.Fill" TargetName="rThickness">
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FF181818" Offset="1" />
                            <GradientStop Color="#FF181818" Offset="0" />
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
            </Trigger>
            <Trigger Property="UIElement.IsEnabled" Value="False">
                <Setter Property="Shape.Fill" TargetName="rGridTop">
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FF68686C" Offset="0" />
                            <GradientStop Color="#FF474747" Offset="1" />
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
                <Setter Property="Shape.Stroke" TargetName="rGridTop">
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FF7F7F7F" Offset="0" />
                            <GradientStop Color="#FF575757" Offset="1" />
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
                <Setter Property="Shape.Stroke" TargetName="rGridBack">
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FF4F4F4F" Offset="0" />
                            <GradientStop Color="#FF5B5B5B" Offset="1" />
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
                <Setter Property="Shape.Fill" TargetName="rThickness">
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FF1E1E1E" Offset="1" />
                            <GradientStop Color="#FF1E1E1E" Offset="0" />
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
                <Setter Property="Control.Foreground" TargetName="tblckStep1Desc">
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FF898989" Offset="1" />
                            <GradientStop Color="#FF898989" Offset="0" />
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
            </Trigger>
            <Trigger Property="ButtonBase.IsPressed" Value="True">
                <Setter Property="Shape.Fill" TargetName="rGridTop">
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FF313131" Offset="1" />
                            <GradientStop Color="#FF2E2E2E" Offset="0" />
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
                <Setter Property="Shape.Stroke" TargetName="rGridTop">
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FF1F1F1F" Offset="1" />
                            <GradientStop Color="#FF1F1F1F" Offset="0" />
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
                <Setter Property="Shape.Stroke" TargetName="rGridBack">
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FF414141" Offset="1" />
                            <GradientStop Color="#FF565656" Offset="0" />
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
                <Setter Property="Shape.Fill" TargetName="rThickness">
                    <Setter.Value>
                        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                            <GradientStop Color="#FF0C0C0C" Offset="1" />
                            <GradientStop Color="#FF0C0C0C" Offset="0" />
                        </LinearGradientBrush>
                    </Setter.Value>
                </Setter>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
</Button.Template> 
```

该按钮是基于 Adob​​e CS5 套件上的对话框形式，因为代码很多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T05:09:56.450

您需要将 UserControls DataContext 设置为 RelativeSource=(RelativeSource Self}

```
<Button x:Class="WpfApplication1.UserControl1"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" DataContext="{Binding RelativeSource={RelativeSource Self}}"
         d:DesignHeight="35" d:DesignWidth="273" Content="Button"> 
```

然后您需要将标签的绑定更改为：

```
<Label FontWeight="Normal" Content="{Binding Path=Content}" Foreground="White" HorizontalContentAlignment="Center" Name="tblckStep1Desc" Padding="0"   VerticalContentAlignment="Center">
    <Label.Effect>
        <DropShadowEffect BlurRadius="2" Color="Black" Direction="330" Opacity="0.7" ShadowDepth="1.5" />
    </Label.Effect>
</Label> 
```

这将给出如下所示的结果：

![在此处输入图像描述](../Images/cc0663f96c2ea5555b069cf86f40ecc2.png)