# StackOverflow 问答 13317000-13317999

# asp.net - 设置了 Panel.DefaultButton 的 UpdatePanel，在 IE8 中回发后无法在文本框中输入

> ID：13317000
> 
> 赞同：1
> 
> 时间：2012-11-09T22:32:11.863
> 
> 标签：asp.net, ajax, updatepanel

我刚刚创建了一个新页面，并在其上仅放置了 4 个基本控件，如下所示：

```
 <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <asp:Panel ID="Panel1" runat="server" DefaultButton="Button1">
            <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox><asp:Button ID="Button1"
                runat="server" Text="Button" />
        </asp:Panel>
    </ContentTemplate>
    </asp:UpdatePanel> 
```

然后加载页面并执行以下步骤：

1.  在文本框中单击

2.  按 ENTER 键 - 这将导致单击按钮，因为它是面板的默认按钮

3.  在文本框中单击返回

4.  再次按 ENTER 键

此时我无法在文本框中输入任何内容。

我相信它一定与 Panel.DefaultButton 创建的按键处理程序有关。例如，如果它总是返回 false，那么所有的击键都会被忽略。

这仅在不处于兼容模式时适用于 IE8。在兼容模式下在 Chrome、FireFox 和 IE8 中运行良好。

这似乎是开发人员会做的常见事情，在更新面板中有一个文本框和按钮，并设置了一个默认按钮......但是，我还没有找到很多讨论这个问题的主题，而且没有一个解决方案看起来很强大全部。我不会想到这么基本的东西，我需要求助于黑客，比如有一个计时器，可以将焦点更改为另一个控件，然后再返回。

**有没有人对此有强大的解决方案？** 我正在使用 ASP.NET 3.5，但现在升级到 4.0 对我来说并不容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T19:55:53.733

实际上问题在于 asp.net 实现默认按钮处理程序的方式，作为一种解决方法，您需要将以下 JS 方法添加到您的 aspx 页面：

```
function ResetDefaultFired()
 {
     __defaultFired = false;
 } 
```

你的客户点击按钮应该是：OnClientClick=”ResetDefaultFired”</p>

[此方法重置内部使用的 __defaultFired 标志，以避免在默认按钮处理程序中执行多次单击。进一步解释检查： http](http://claytonj.wordpress.com/2008/07/07/update-panel-and-default-button-fix/) ://claytonj.wordpress.com/2008/07/07/update-panel-and-default- [按钮修复/](http://claytonj.wordpress.com/2008/07/07/update-panel-and-default-button-fix/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T19:18:30.687

我在几个浏览器中多次遇到这个问题。通常对我有用的解决方案是将`ScriptManager`'s`EnablePartialRendering`属性设置为`false`：

```
<asp:ScriptManager ID="ScriptManager1" runat="server" EnablePartialRendering="false"></asp:ScriptManager> 
```

我希望这有帮助！

祝你好运，编码愉快！:)

# .net - DataContractSerializer 将接口属性序列化为 System.Object / anyType

> ID：13317002
> 
> 赞同：5
> 
> 时间：2012-11-09T22:32:56.970
> 
> 标签：.net, serialization, xml-serialization, datacontractserializer, datacontract

在一个应用程序中，我有以下接口/实现结构：

```
public interface IMyInterface
{
  IMyOtherInterface InstanceOfMyOtherInterface { get; }
}

public interface IMyOtherInterface
{
  string SomeValue { get; }
}

[DataContract(Name = "MyInterfaceImplementation", Namespace = "")]
public class MyInterfaceImplementation : IMyInterface
{
  [DataMember(EmitDefaultValue = false), XmlAttribute(Namespace = "")]
  public IMyOtherInterface InstanceOfMyOtherInterface { get; private set; }

  public MyInterfaceImplementation()
  {
    this.InstanceOfMyOtherInterface = new MyOtherInterfaceImplementation("Hello World");
  }
}

[DataContract(Name = "MyOtherInterfaceImplementation", Namespace = "")]
public class MyOtherInterfaceImplementation : IMyOtherInterface
{
  [DataMember]
  public string SomeValue { get; private set; }

  public MyOtherInterfaceImplementation(string value)
  {
    this.SomeValue = value; 
  }
} 
```

现在，每当我使用 .Net DataContractSerializer 将其序列化（在我的情况下为字符串）时，如下所示：

```
var dataContractSerializer = new DataContractSerializer(typeof(MyInterfaceImplementation));
var stringBuilder = new StringBuilder();
using (var xmlWriter = XmlWriter.Create(stringBuilder, new XmlWriterSettings { Indent = true, Encoding = Encoding.UTF8 }))
{
  dataContractSerializer.WriteObject(xmlWriter, this);
}
var stringValue = stringBuilder.ToString(); 
```

生成的 xml 看起来很像这样：

```
<?xml version="1.0" encoding="utf-16"?>
<z:anyType xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="" i:type="MyInterfaceImplementation" xmlns:z="http://schemas.microsoft.com/2003/10/Serialization/">
  <InstanceOfMyOtherInterface xmlns="" i:type="InstanceOfMyOtherInterface">
    <SomeValue>Hello World</SomeValue>
  </InstanceOfMyOtherInterface>
</z:anyType> 
```

这些 *anyType* 似乎来自 datacontractserializer 将 MyInterfaceImplementation 实例序列化为 System.Object，同样具有其他接口属性。

如果我在接口及其实现中使用了具体类型，如下所示：

```
public interface IMyInterface
{
  MyOtherInterface InstanceOfMyOtherInterface { get; }
} 
```

..它工作得“很好” - datacontractserializer 确实创建

```
<MyInterfaceImplementation>...</MyInterfaceImplementation> 
```

...节点而不是 z:anyType 节点，但我不想/不能更改我的接口的属性。在这种情况下，有什么方法可以控制或帮助数据合同序列化程序？

# python - NameError：未定义名称“getResultFromDatabase”

> ID：13317003
> 
> 赞同：0
> 
> 时间：2012-11-09T22:33:02.303
> 
> 标签：python

我收到此错误：

```
NameError: name 'getResultFromDatabase' is not defined 
```

这是我的代码：

```
import pymongo

from itertools import groupby
from pymongo import Connection

data = getResultFromDatabase()
connection = Connection('localhost', 27017)

db = connection.students

item = db.grades.find({'type' : 'homework'}).sort([('student_id',pymongo.ASCENDING),('score',pymongo.ASCENDING)])

for id, items in groupby(data, lambda s: s['student_id']):
    lowest_score = min(i['score'] for i in items)

    print lowest_score 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T22:34:33.527

看起来你还没有定义`getResultsFromDatabase`. 它要么需要创建，要么从某个地方导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T22:42:06.163

NameError 几乎总是与输入错误或尚未导入的定义有关，在您的情况下是后者。对于您将来可能遇到的任何未知错误，ctrl-f [python 异常](http://docs.python.org/2/library/exceptions.html)页面或您使用页面的任何库都会有所帮助。

# git - 替换 git 中的提交

> ID：13317007
> 
> 赞同：8
> 
> 时间：2012-11-09T22:33:16.393
> 
> 标签：git, github

我很久以前有一个错误的提交，我想将它从 git 历史记录中完全删除，就好像它从未发生过一样。我知道提交 ID，比如说 1f020。我已经尝试过 git rebase 并删除它，但是在 rebase 时有很多冲突，所以不可能那样做。该提交是一个简单的 1 行代码更改并推送一些与项目无关的文件。所以我想编写那 1 行代码更改并提交它，然后以某种方式替换这个新提交，用很久以前的那个。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T23:10:58.067

如果有问题的提交位于私有存储库中，那么您想要做的并不是什么大问题。重写已发布的 git 历史会让你的合作者感到恼火，所以一定要确保删除这条线是值得的。

该[`git-rebase`文档](http://schacon.github.com/git/git-rebase.html)有一个有用的段落。

> ```
> git rebase [...] [<--onto newbase>] [<upstream>] [<branch>] 
> ```
> 
> 还可以使用 rebase 删除一系列提交。如果我们有以下情况：
> 
> ```
> E---F---G---H---I---J  topicA 
> ```
> 
> 然后命令
> 
> ```
> git rebase --onto topicA~5 topicA~3 topicA 
> ```
> 
> 将导致删除提交*F*和*G*：
> 
> ```
> E---H'---I'---J'  topicA 
> ```
> 
> 如果*F*和*G*在某些方面存在缺陷，或者不应该是`topicA`. 请注意，参数 to`--onto`和*上游*参数可以是任何有效的 commit-ish。

假设您的历史是线性的并且有问题的提交在您的主分支中，您可以通过运行来调整上面的示例

```
git rebase --onto 1f020~ 1f020 master 
```

对于更复杂的情况，使用交互式变基。您可能会发现跟随[一个合并两个提交的示例](https://stackoverflow.com/a/2568581/123109)很有帮助，但是不要将提交标记`s`为壁球，而是删除整行以从您的历史记录中删除该提交。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-09T22:43:30.263

这有点复杂，但无论如何，它是这样的：

分离头并在错误提交**之后**移动以提交。使用 git log 找出 1f020 之后的下一次提交。

```
git checkout <SHA1-for-commit-just-after-bad-commit-1f020> 
```

移动 HEAD 以在错误提交**之前**提交，但保留索引和工作树原样

```
git reset --soft <SHA1-for-just-previous-to-bad-commit-1f020> 
```

**在错误提交之后**重新使用提交消息重做提交，但现在在错误提交**之前**的提交之上。因此，删除那个错误的提交

```
git commit -C <SHA1-for-commit-just-after-bad-commit-1f020> 
```

**将错误提交之后**的所有内容重新应用到这个新地方

```
git rebase --onto HEAD <SHA1-for-commit-just-after-bad-commit-1f020> master 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T22:42:28.220

你永远不应该从 git 的历史中删除提交。你以后会遇到问题。

但是，如果您知道自己在做什么，您可以在本地倒回您的历史记录，用当前提交替换该提交，然后再次重播所有提交 - 然后对您的存储库执行强制推送。

但我强烈建议不要这样做。只需做一个新的提交，并忍受历史上有一个错误的提交。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-10T09:02:03.283

所以，你想要的是：

1.  从历史记录中删除错误提交，并且

2.  不必重做删除提交后的所有合并。即，从删除的提交派生的每个提交都应保持原样，仅进行最小限度的更改，以不包括从历史记录中删除的更改。

基于第二点的解决方案`git rebase --onto`并失败，因为它们需要重做以后发生的所有合并。`git rebase -i`但是，理论上可以简单地重新创建所有这些其他提交，就好像有问题的提交从未发生过一样，只要错误提交足够小，以至于从其后续提交中恢复它本身就会产生冲突。

正如迈克尔和其他人所指出的，这样做是非常不可取的。这也是一项几乎可以肯定不值得付出努力的重大事业。但是，对于教育价值，这里有一个实现目标的综合解决方案的大纲：

*   备份存储库。

*   用于`git rev-list`生成一个提交列表，该列表以错误提交开始，并通向所有可以访问该提交的分支头。

*   初始化一个空映射以将旧提交映射到新提交。

*   对于列表中的每个提交，请执行以下操作：

    *   检查提交并从错误提交中恢复更改
    *   使用从当前树中创建一个树对象`git write-tree`
    *   用于`git commit-tree`创建一个新的提交，新树、旧提交消息和使用上述映射从旧父级翻译而来的父级（如果某些父级不在映射中，则使用旧父级）
    *   在提交映射中注册新提交。
*   浏览标签和标签对象，并重新创建它们以指向新的提交，咨询地图。

*   通过分支头并调用`git update-ref`以将它们指向新的提交，咨询地图。

如果提交引入的一行更改（以及不必要的文件）与后续提交的更改不冲突，则此过程可以完全自动化，并且*不需要*您手动重做以后的所有合并和冲突提交。

缺点是它仍然需要重写所有后来的提交，如果它们已在其他地方共享则使它们无效，并使提交消息中的提交引用无效，例如由`git revert`.

# c++ - 汇编：C++ 堆栈变量地址不同/错误？

> ID：13317010
> 
> 赞同：1
> 
> 时间：2012-11-09T22:33:29.880
> 
> 标签：c++, assembly, x86, segmentation-fault

我不明白为什么获取一个变量的地址很好，而另一个让我得到 0xD，然后由于在无效地址 (0xD in `r.thefn(0);`) 处写入值而崩溃。

这是显示两个变量没有相似地址的输出。[这是 GDB 显示的内容和程序集输出](https://gist.github.com/4048376)。我的 x86 程序集不是很好（我从未编写过 x86 程序集）。我不知道它是否显示了足够的信息，但如果我没有，你能告诉我调试它还需要什么吗？为什么一个变量是 0xBF8BAF1C 而另一个是 0xD？下面是 C++ 和汇编代码，但在上面的要点链接中格式更好。

有一个`static_assert`强制字符串是一个[POD](http://en.wikipedia.org/wiki/Plain_old_data_structure)，这意味着没有非平凡的构造函数。它使用 C++ 生成的默认构造函数。它也在堆栈上，这意味着如果`new`超载它不会影响它。`&`没有重载，但在调用函数的前两次看起来也是正确的。

什么可能会影响`r`地址？我可以看到 variable`varme`的地址在第二次和第三次被调用时是相同的，但第三次`r`却神奇地不同。

这可以使用 Visual C++（2012 年工作）、g++ 4.6.2 正确编译和运行，但在使用 g++ 3.7、3.6.3 和[Clang](http://en.wikipedia.org/wiki/Clang) 3.0的[Linux](http://en.wikipedia.org/wiki/Linux)（[Ubuntu ）上失败。](http://en.wikipedia.org/wiki/Ubuntu_%28operating_system%29)

```
sanity check 1 0xbf8bb4cc
sanity check 2 0xbf8bb4cc 0xbf8bb538
sanity check 3 0xbf8bb4cc 0xbf8bb538
this 0xbf8bb538
sanity check 1 0xbf8baf1c
sanity check 2 0xbf8baf1c 0xbf8baf40
sanity check 3 0xbf8baf1c 0xbf8baf40
this 0xbf8baf40
sanity check 1 0xbf8baf1c
sanity check 2 0xbf8baf1c 0xd
sanity check 3 0xbf8baf1c 0xd
this 0xd 
```

这是代码：另外一个注意事项是有一个`static_assert`on String ，它强制它是一个 POD，这意味着没有非默认构造函数。我检查了运算符`&`没有重载。

```
static int aa=0;
aa++;
int varme;

printf("sanity check 1 %p\n", &varme);
String r;
printf("sanity check 2 %p %p\n", &varme, &r);
//auto v=anotherfn(sz);
printf("sanity check 3 %p %p\n", &varme, &r);
//printf("callingfn=%s,%d %p %p\n", sz,aa, v, &r);
r.thefn(0);
return r;

   ¦0x8084101 <callingfn(char const*)+1> mov %esp,%ebp ¦
   ¦0x8084103 <callingfn(char const*)+3> push %esi ¦
   ¦0x8084104 <callingfn(char const*)+4> sub $0x34,%esp ¦
   ¦0x8084107 <callingfn(char const*)+7> mov 0xc(%ebp),%eax ¦
   ¦0x808410a <callingfn(char const*)+10> mov 0x8(%ebp),%ecx ¦
   ¦0x808410d <callingfn(char const*)+13> mov %eax,-0x8(%ebp) ¦
   ¦0x8084110 <callingfn(char const*)+16> mov 0x81bc894,%eax ¦
   ¦0x8084115 <callingfn(char const*)+21> lea 0x1(%eax),%eax ¦
   ¦0x8084118 <callingfn(char const*)+24> mov %eax,0x81bc894 ¦
   ¦0x808411d <callingfn(char const*)+29> lea -0xc(%ebp),%eax ¦
   ¦0x8084120 <callingfn(char const*)+32> mov %esp,%edx ¦
   ¦0x8084122 <callingfn(char const*)+34> mov %eax,0x4(%edx) ¦
   ¦0x8084125 <callingfn(char const*)+37> movl $0x812ee78,(%edx) ¦
   ¦0x808412b <callingfn(char const*)+43> mov %ecx,-0x10(%ebp) ¦
   ¦0x808412e <callingfn(char const*)+46> mov %eax,-0x14(%ebp) ¦
   ¦0x8084131 <callingfn(char const*)+49> call 0x8049a90 <printf@plt> ¦
   ¦0x8084136 <callingfn(char const*)+54> mov %esp,%ecx ¦
   ¦0x8084138 <callingfn(char const*)+56> mov -0x10(%ebp),%edx ¦
   ¦0x808413b <callingfn(char const*)+59> mov %edx,0x8(%ecx) ¦
   ¦0x808413e <callingfn(char const*)+62> mov -0x14(%ebp),%esi ¦
   ¦0x8084141 <callingfn(char const*)+65> mov %esi,0x4(%ecx) ¦
   ¦0x8084144 <callingfn(char const*)+68> movl $0x812ee8b,(%ecx) ¦
   ¦0x808414a <callingfn(char const*)+74> mov %eax,-0x18(%ebp) ¦
   ¦0x808414d <callingfn(char const*)+77> call 0x8049a90 <printf@plt> ¦
   ¦0x8084152 <callingfn(char const*)+82> mov %esp,%ecx ¦
   ¦0x8084154 <callingfn(char const*)+84> mov -0x10(%ebp),%edx ¦
   ¦0x8084157 <callingfn(char const*)+87> mov %edx,0x8(%ecx) ¦
   ¦0x808415a <callingfn(char const*)+90> mov -0x14(%ebp),%esi ¦
   ¦0x808415d <callingfn(char const*)+93> mov %esi,0x4(%ecx) ¦
   ¦0x8084160 <callingfn(char const*)+96> movl $0x812eea1,(%ecx) ¦
   ¦0x8084166 <callingfn(char const*)+102> mov %eax,-0x1c(%ebp) ¦
   ¦0x8084169 <callingfn(char const*)+105> call 0x8049a90 <printf@plt> ¦
                                                                               ¦
   ¦0x8084169 <callingfn(char const*)+105> call 0x8049a90 <printf@plt> ¦
   ¦0x808416e <callingfn(char const*)+110> mov %esp,%ecx ¦
   ¦0x8084170 <callingfn(char const*)+112> mov -0x10(%ebp),%edx ¦
   ¦0x8084173 <callingfn(char const*)+115> mov %edx,(%ecx) ¦
   ¦0x8084175 <callingfn(char const*)+117> movl $0x0,0x4(%ecx) ¦
   ¦0x808417c <callingfn(char const*)+124> mov %eax,-0x20(%ebp) ¦
   ¦0x808417f <callingfn(char const*)+127> call 0x8056d00 <SomeClass<blah>::thefn(blah*)> ¦
  >¦0x8084184 <callingfn(char const*)+132> add $0x34,%esp ¦
   ¦0x8084187 <callingfn(char const*)+135> pop %esi ¦
   ¦0x8084188 <callingfn(char const*)+136> pop %ebp ¦
   ¦0x8084189 <callingfn(char const*)+137> ret $0x4 ¦
   ¦0x808418c nopl 0x0(%eax) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T06:46:52.797

## 设置：

`String`定义为：

```
struct String {
    void *p;
    #ifdef __cplusplus
    /* Operators to help with comparing, etc. */
    /* No additional data members */
    void thefn(int arg); /* Return/argument type not relevant */
    #endif
}; 
```

并包括用于验证的断言`sizeof(String) == sizeof(void *)`和结构的 POD-ness。

* * *

*这部分最初没有在问题中提到*：调用此函数的函数将相同的`String`对象返回给它的调用者，但它是从外部 C 代码调用的，其中调用者期望一个简单的`void *`而不是`String`. 作者的期望是这应该可行，因为返回值的大小和布局是相同的。

* * *

## 问题：

C++ 编译器在此函数中使用了*[命名返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)*(NRVO)。函数签名从

```
String fn(char const *); 
```

到

```
void fn(char const *, String *); 
```

这在反汇编中是可见的，`ebp+0xC`在写入之前从其中读取，并且没有花费任何精力将有意义的结果放入[EAX](http://en.wikipedia.org/wiki/X86#32-bit)。这`ret 0x4`部分有点奇怪，因为它意味着只有一个参数从堆栈中清除，但显然这就是 GCC/Clang 选择通过让调用者清除附加参数来实现这一点的方式。

据推测，调用函数中应用了相同的优化。但是 C 编译器认为没有理由应用这种优化（毕竟，它期望结果是 a `void*`，而不是结构）并且期望返回值像任何指针大小的结果一样被传递。

因此：

1.  C 代码只将一个参数传递给 C++ 代码，它需要两个，堆栈顶部的垃圾被解释为第二个参数。
2.  C++ 代码不会在 C 代码期望找到的地方产生有意义的返回值。

* * *

## 解决方案：

修复的第一步显然是确保 C 代码期望与 C++ 代码相同的返回值，即结构而不是指针。

*但是*，我认为没有办法控制是否应用 NRVO，所以我怀疑即使返回类型正确，考虑到结构的小尺寸，代码的两侧仍然可能不一致地应用这种优化。我也不知道是否`extern "C"`会对它产生任何影响。

（此答案总结了评论中所说的内容，并进行了一些猜测以填补空白）

# regex - 表达式引擎 htaccess 掩码 cp

> ID：13317027
> 
> 赞同：1
> 
> 时间：2012-11-09T22:35:07.947
> 
> 标签：regex, .htaccess, expressionengine

我正在使用这个 htaccess 来删除 ExpressionEngine MSM 网站[http://d.pr/n/RZTo上的 index.php](http://d.pr/n/RZTo)

它可以满足需要，但不允许我通过蒙面 CP 访问该站点（我需要使用 Mountee 应用程序。

任何想法为什么当我尝试访问该站点的 /admin.php 时会得到 404？

辅助 MSM 站点位于主域的子文件夹下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T22:43:59.313

我已经为您设置了类似的设置，但在第二个站点的 htaccess 中，我没有 rewritebase 规则并且有`RewriteRule ^(.*)$ /index.php?$1 [L]`（即没有参考文件夹名称）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T00:54:57.030

这是我恢复到[https://gist.github.com/4053195的标准 htaccess 文件](https://gist.github.com/4053195)

# java - 使用 Struts2 一次下载一个

> ID：13317028
> 
> 赞同：2
> 
> 时间：2012-11-09T22:35:15.307
> 
> 标签：java, struts2

我有一个使用[StreamResult](http://struts.apache.org/2.x/docs/stream-result.html)流式传输文件的 Struts2 Action。该文件是一个可能非常大的报告。我想设置一个标志来限制用户一次下载一个。在我的操作中，我可以设置标志，但是当流完成时我没有地方可以取消它。

在使用 Struts 之前，我会设置标志，写入 Servlet 的 OutputStream，然后取消设置标志。但是对于 Struts，Action 只是将流设置为一个变量，然后 Action 就完成了。Struts（在 struts.xml 中设置）然后在我无法控制的地方进行发送。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:12:20.750

我认为您应该创建一个包含此下载操作的拦截器，它可以锁定/解锁当前用户的访问权限。有关详细信息，请参阅[http://struts.apache.org/2.x/docs/interceptors.html](http://struts.apache.org/2.x/docs/interceptors.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T23:33:26.587

尝试`close`在类中覆盖函数`FileInputStream`，这是[FileInputStream API](http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html)的文档，如果您使用另一种“输入流”，您只需扩展它并覆盖该`close`方法。

试试这个代码：

```
public class YourInputStream extends FileInputStream {
    @Override
    public void close() throws IOException{
        super.close();
        // here unset your flag
    }
} 
```

在你的行动课上：

```
inputStream = new YourInputStream(new File(path)); 
```

# php - php INSERT 语句不起作用，没有收到回声或错误

> ID：13317029
> 
> 赞同：2
> 
> 时间：2012-11-09T22:35:18.303
> 
> 标签：php

在 PHP 中，我试图将注册信息插入数据库。我已经解决了一堆错误，现在在提交表单后我的窗口中没有任何内容，也没有任何内容写入数据库。窗口一片空白。我已经研究了答案，但没有找到任何帮助。我已经使用各种技术多次重写了我的 VALUES 语句，尝试使用某些代码字符并且不使用它们。字符包括 {}、[] 和 "" 以及 ''。

我还没有编写语句来清理我的数据，我确实意识到这是必要的，我只想让脚本首先运行。

我的表单的当前代码位于一个文件中，而我当前的 PHP 代码位于第一个文件引用的另一个文件中。这是我当前的 PHP 代码：

```
<?php

if (isset($_POST['submit']))
{

$first_name = $_POST['first_name'];
$last_name = $_POST['last_name'];
$user_name = $_POST['user_name'];
$band_name = $_POST['band_name'];
$label_name = $_POST['label_name'];
$city = $_POST['city'];
$state = $_POST['state'];
$zip_code = $_POST['zip_code'];
$email = $_POST['email'];
$confirm_email == ['email'];
$password = $_POST['password'];
$confirm_password == ['$password'];

$dbc = mysqli_connect('localhost', 'root', 'fishstench', 'Site Database.mwb.bak')
or die('Error connecting to MySQL server.');

$query = "INSERT INTO Users (User_ID, First_Name, Last_Name, User_Name, (SHA)Password, Email, Join_Date " . 
"VALUES ('{$_POST[First_Name]}','{$_POST[Last_Name]}','{$_POST[User_Name]}','{$_POST[Password]},','{$_POST[Email]}','{$_POST[date]}')";

$query = "INSERT INTO Location (City, State, Zip_Code " .
"VALUES '{$_POST[City]}','{$_POST[State]}','{$_POST[Zip_Code]}')";

$query = "INSERT INTO Band_Name (Band_Name, Label_Name " .
"VALUES '{$_POST[Band_Name]}','{$_POST[Zip_Code]}')";

$result = mysqli_query($dbc, $query)
or die('Error querying database.');

mysqli_close($dbc);

echo 'Thanks for signing up!<br />';

} ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T22:40:40.067

首先，只有最后一个查询被执行，因为你正在覆盖上面的 2（我认为这不是你想要的？）。

如果设置了，请检查您的`$_POST`数组`submit(key)`，通过使用 a`var_dump`或`print_r`在检查之前通过检查。

```
 if (isset($_POST['submit'])) {
   ....
   } 
```

这些行需要有赋值运算符`=`，而不是比较运算符`==`，

```
 $confirm_email == ['email'];
 $confirm_password == ['$password']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T22:41:59.493

您在第一个查询中忘记了右括号。我认为应该是：

```
$query = "INSERT INTO Users (User_ID, First_Name, Last_Name, User_Name, (SHA)Password, Email, Join_Date) " . 
"VALUES ('{$_POST[First_Name]}','{$_POST[Last_Name]}','{$_POST[User_Name]}','{$_POST[Password]},','{$_POST[Email]}','{$_POST[date]}')"; 
```

此外，您的其他查询中的括号似乎不正确，我认为它们应该是：

```
$query = "INSERT INTO Location (City, State, Zip_Code) " .
"VALUES ('{$_POST[City]}','{$_POST[State]}','{$_POST[Zip_Code]}')";

$query = "INSERT INTO Band_Name (Band_Name, Label_Name) " .
"VALUES ('{$_POST[Band_Name]}','{$_POST[Zip_Code]}')"; 
```

以后要检测错误，检查结果看是否有错误：

```
$result = mysqli_query($query, $connection);
if (!$result) {
    exit("mysqli_query() error: ", mysqli_error($connection), "\nquery was: $query\n");
} 
```

# jquery - Ajax click for facebook app iframe on iPhone

> ID：13317031
> 
> 赞同：1
> 
> 时间：2012-11-09T22:35:33.823
> 
> 标签：jquery, iphone, ajax, facebook, facebook-iframe

我想解决这个问题，但到目前为止我做不到。我的 iPhone 必须单击两次才能显示 facebook 应用程序的 Ajax 朋友选择器。第一次单击只显示背景色调，我必须单击色调才能将其删除，第二次单击显示朋友选择器 jquery.friend.selector-1.2.js。Android手机似乎可以正常工作。如果有人知道如何解决这个问题，那就太好了。

```
<script type="text/javascript">
  function logResponse(response) {
    if (console && console.log) {
      console.log('The response was', response);
    }
  }
  var friends = [];
  $(function(){
   FB.init({
      appId      : '<?php echo AppInfo::appID(); ?>', // App ID
      channelUrl : 'https://<?php echo $_SERVER["HTTP_HOST"]; ?>/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true // parse XFBML
  });
  FB.Canvas.setAutoGrow(200);
  FB.Canvas.scrollTo(0,0);
  FB.Canvas.setSize({width: 810, height: 1000});

var i = 0;
    $(".selectFriend").click(function(e){

    var selector = $(this);

    // init new selector

    selector.fSelector({
     max: 5,
     closeOnSubmit : true ,
     onSubmit: function(response){
      if(response){
// to rest old selected
var friend = $('.selectedFriendNames').attr('id');
var friendname = $('.selectedFriendNames').val();
var match = jQuery.inArray(friend,friends);
if($('.selectedFlower') && match >= 0){
//commented out for testing
//reduce count
//i--;
/*friends.splice(match,1);
$('.selectFriend').show();
$('.selectedFlower').find('.selectedFriendClass').html('');
$('.selectedFlower').find('#flowerName').removeAttr( 'style' );
$('.selectedFlower').find('.description').removeAttr( 'style' );
$('.selectedFlower').find('.comment').html('');
$('.selectedFlower').removeClass("selectedFlower");
$('#selections').val('');
$('#image').val('');
$('#icon').val('');
$('#desc').val('');
$('#fdesc').val('');
*/
} 
  i++;       
      var selections = response.join(',');
             $.post('renderSelectedUsers.php',{selections: selections,id:i},function(resp) {
             selector.closest('li').find('.selectedFriendClass').html(resp);
       selector.closest('li').find('.description').css("position", "relative");
       selector.closest('li').find('#flowerName').css("position", "absolute");
       selector.closest('li').find('#flowerName').css("top", "10px");
       selector.closest('li').find('#flowerName').css("left", "40px");
             selector.closest('li').find('.comment').html("<textarea name ='comment" + i + "' id= 'comment' placeholder= 'message!'/>");
             $('#selectedFriendsHtml' + i).val(resp);
       $('#count').val(i);
       selector.closest('li').find('.username').html($('.selectedFriendNames').html());
       friends.push($('.selectedFriendNames').attr('id'));
       var desc       = selector.closest('li').find('p').first().text();
       var fdesc      = selector.closest('li').find('.forConfirm').html();
        selector.closest('li').addClass("selectedFlower");
        var image_to_post = "<?php echo AppInfo::getUrl(); ?>"+selector.closest('li').find('img').first().attr
        ("src");
          var image = "<?php echo AppInfo::getUrl(); ?>"+selector.closest('li').find('.icon img').attr
        ("src");
         var icon = "<?php echo AppInfo::getUrl(); ?>"+selector.closest('li').find('#flowerName').attr
        ("src");
        $('#selections' + i).val(selections);
        $('#image' + i).val(image);
        $('#icon' + i).val(icon);
        $('#desc' + i).val(desc);
        $('#fdesc' + i).val(fdesc);
        $('#imageToPost' + i).val(image_to_post);
      });
          selector.hide();
    }
   }
  });
  });
  });
  function submitForm(){
    if( $('#selections').val() !='' && $('#comment').val() !='' )

     $('#flowerForm').submit();
     else{
      alert("Select Friends");
     }
  }
</script> 
```

# asp.net - MVC 区域路由 - 带有文件夹的控制器文件夹

> ID：13317032
> 
> 赞同：5
> 
> 时间：2012-11-09T22:35:34.200
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, routing, asp.net-mvc-areas

目前我有一个这样的文件夹结构：

```
Area (folder)
 - Toolkit (folder)
    - Controllers (folder)
        - AdminController.cs
    - Views (folder)
        - Admin (folder)
           - Privledges (folder)
              - Create.cshtml
              - Edit.cshtml
              - Delete.cshtml 
```

这转化为

```
/Toolkit/{controller}/{action}/{tool}/{id} 
```

**将操作设置为像控制器一样根据传递给操作的字符串 {tool} 参数和参数 {id} 提供视图是一种不好的做法吗？**

我所说的实现：

```
 private const string FOLDER_PRIVILEGES = "./Privileges/";

    public ActionResult Privileges(string tool, string id = "")
    {
        dynamic viewModel = null;
        ToolViews view; // enum for the views
        // Parse the tool name to get the enum representation of the view requested
        bool isParsed = Enum.TryParse(tool, out view);

        if (!isParsed)
        {
            return HttpNotFound();
        }

        switch (view)
        {
            case ToolViews.Index:
                viewModel = GetIndexViewModel(); // call a function that gets the VM
                break;
            case ToolViews.Edit:
                viewModel = GetEditViewModelById(int.Parse(id)); // sloppy parse
                break;
            default:
                viewModel = GetIndexViewModel();
                break;
        }
        // The folder path is needed to reach the correct view, is this bad?
        // Should I just create a more specific controller even though it would
        // require making about 15-20 controllers?
        return View(FOLDER_PRIVILEGES + tool, viewModel);
    } 
```

当我写一个视图时，我必须确保路径名称用于文件夹

```
@Html.ActionLink("Edit", "./Toolkit/Admin/Priveleges/Edit", "Admin", new { id = item.id }) 
```

这似乎是一种糟糕的做法，因为如果文件夹结构发生变化，则需要大量维护。

但是，如果我必须将操作分解为控制器，那么其中会有很多（几乎 20 个，随着时间的推移会增加更多）。

**如果我正在做的是一种不好的做法，那么为这样的路线提供服务的最佳方式是什么？**

```
/Toolkit/Admin/Privileges/Edit/1 
```

我想**避免**执行以下操作：

```
/Toolkit/Admin/CreatePrivileges/1
/Toolkit/Admin/EditPrivileges/1
/Toolkit/Admin/DeletePrivileges/1 
```

*如果我没有任何意义，请告诉我，因为我很难用语言表达这个问题。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T14:52:06.777

我认为您正试图将违背其原始意图的约定强加到 MVC 中。

使用 MVC，你的控制器是一个名词，你的动作是一个动词。使用您的示例，您有：

*   工具包（名词） - 区域
    *   管理员（名词？） - 子区域？<--这是一个有点时髦的
        *   特权（名词） - 控制器
            *   创造（动词）——行动
            *   编辑（动词） - 动作
            *   删除（动词） - 动作

如您所见，如果您可以将 Toolkit + Admin 视为区域 + 子区域，或者将它们组合成一个区域（TookitAdmin），它将使您回到控制器和操作的原始目的。

根据评论，听起来您可能已经决定走这条路。但是我想指出的是，您迂回地得出的结论是回到 MVC 的根源。

作为旁注，您是否考虑过迁移到 MVC4？它的[Web API](http://www.asp.net/web-api)为 RESTful API 提供了更好的支持，听起来您可能正在尝试使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:30:07.093

不是原始问题的答案，但 OP 要求提供枚举约束的样本，而不必检查每个操作中的枚举。IE：

```
// Parse the tool name to get the enum representation of the view requested
bool isParsed = Enum.TryParse(tool, out view);

if (!isParsed)
{
    return HttpNotFound();
} 
```

不必将枚举值（在本例中为工具）作为字符串接受，您可以强制该值进入您已经转换为适当枚举的操作。这样做的另一个好处是 MVC 框架将负责`HttpNotFound`在这种情况下返回正确的响应 ()。

这是您的约束方法。它接受任何类型的枚举。无需为每个 Enum 创建单独的约束。

```
public class EnumConstraint<T> : IRouteConstraint where T : struct
{
    private readonly HashSet<string> enumNames;
    public EnumConstraint()
    {
        string[] names = Enum.GetNames(typeof(T));
        this.enumNames = new HashSet<string>(from name in names select name.ToLowerInvariant());
    }

    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        return this.enumNames.Contains(values[parameterName].ToString().ToLowerInvariant());
    }

} 
```

然后，在您的`RegisterRoutes`方法 (MVC4) 或 global.asax.cs 页面 (MVC3) 中，您只需像这样注册您的路线：

```
routes.MapRoute(
    url: "/Toolkit/Admin/{Action}/{id}",
    constraints: new { Action = new EnumConstraint<ToolViews>(), id = @"\d+" }
); 
```

我还在`id`参数上添加了一个数字约束，以使您也不必解析它。

让我知道这对你有什么影响。

# zend-framework2 - Zend Framework 2，模块重定向

> ID：13317037
> 
> 赞同：2
> 
> 时间：2012-11-09T22:35:55.490
> 
> 标签：zend-framework2

我的 module.php 中有一个函数，它在其他所有内容开始加载之前被调用，它验证用户是否已登录，但如果用户未登录，我需要它重定向到登录页面，我可以只使用“标题”，但我想学习“Zend”的做事方式。

```
public function preDispatch($e)
{
    if (!isset($_SESSION)) session_start();

    $sm = $e->getApplication()->getServiceManager();
    $adapters = $sm->get('dbAdapters');
    if (!isset($_SESSION['auth'])) $_SESSION['auth'] = new MyAuth($adapters[1]);

    if ($_SESSION['auth']->IsValid())
    {
        echo 'Valid<br />';
    }
    else
    {
        $e->getControllerClass()->redirect()->toRoute('login-success');
        echo '!Valid<br />';
        //REDIRECT TO LOGIN PAGE HERE!!!!!
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-10T00:12:25.657

这就是您要问的具体内容：

```
 //REDIRECT TO LOGIN PAGE HERE!!!!!

        /**
         * grab Controller instance from event and use the native redirect plugin
         */
        $controller = $e->getTarget();
        $controller->plugin('redirect')->toUrl('/logout?' . $query);

        /**
         * optionally stop event propagation and return FALSE
         */
        $e->stopPropagation();
        return FALSE; 
```

话虽如此，您可能需要重新考虑使用原始会话。示例（假设您已配置自定义 authAdapter）：

```
public function checkSession($e)
{
    $controller = $e->getTarget(); // grab Controller instance from event

    $app          = $e->getApplication();
    $locator      = $app->getServiceManager();
    if ($controller instanceof LogoutController) return;
    $authService = $locator->get('ds_auth_service');
    $authAdapter = $locator->get('ds_auth_adapter');

    /*
     * try to authenticate
     */
    if (!$authService->hasIdentity()){
        $result = $authService->authenticate($authAdapter);
        if ($authService->hasIdentity()) {
            $this->getEventManager()->trigger('authenticate', $this, array('result' => $result));
        }
    }

    /*
     * If we are not in an exempt controller and no valid identity, redirect
     */
    $isExempt = $controller instanceof \Application\Controller\LogoutController;
    if (!$isExempt && !$authService->hasIdentity()) {
        $query = http_build_query($result->getMessages());
        $controller->plugin('redirect')->toUrl('/logout?' . $query);
        $e->stopPropagation();
        return FALSE;
    }

    // User is logged in
    return TRUE;

} 
```

# proxy - soapUI 无法访问互联网。

> ID：13317039
> 
> 赞同：3
> 
> 时间：2012-11-09T22:36:12.217
> 
> 标签：proxy, offline, soapui

您好，我刚刚下载了soapUI，在启动应用程序后看到了这条消息：

由于您的计算机处于离线状态并且soapUI 无法访问Internet，因此您会收到此消息。如果没有 Internet 连接，您在进行 Web 服务测试时可能会遇到一些问题。

我正在使用无线连接连接到互联网。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-02-25T09:03:58.283

它不会影响任何东西，检查您应该能够使用 SOAPUI，其余所有功能。

SOAPUI 中存在一个持续存在的问题，该问题已多次报告，但看起来又出现了

[https://community.smartbear.com/t5/SoapUI-Pro/Starter-page-is-showing-that-c​​omputer-is-offline/td-p/28341](https://community.smartbear.com/t5/SoapUI-Pro/Starter-page-is-showing-that-computer-is-offline/td-p/28341)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T17:26:43.350

检查您的本地防火墙规则，如果它们正常，则使用您的 WiFi[代理设置配置 SOAPUI](http://www.soapui.org/Working-with-soapUI/preferences.html#Proxy%20Settings%20Tab)

# ruby-on-rails - 为深度嵌套模型创建工厂

> ID：13317041
> 
> 赞同：3
> 
> 时间：2012-11-09T22:36:16.543
> 
> 标签：ruby-on-rails, testing, rspec, factory-bot

在我犯罪的那段时间里，我已经使用 Rails 将近 4 年了。我从来没有写过一个测试。不知道为什么我花了这么长时间才看到我一直在犯的巨大错误，但我现在知道了。我想改变我的开发并开始使用 TDD。但要做到这一点，我必须为我目前正在开发的应用程序建立一个测试套件。我已经设置了 rspec 和 factory_girl 并开始了解一些事情。我有一些相当复杂的模型正在尝试测试，但我被卡住了。这是我所拥有的：

```
class BusinessEntity
  has_many :business_locations

class BusinessLocation
   belongs_to :business_entity
   has_many :business_contacts

   validates :business_entity_id, :presence => true

class BusinessContact
   belongs_to :business_location
   has_many :business_phones

   validates :business_location_id, :presence => true

class BusinessPhone
    belongs_to :business_contact

    validates :business_contact_id, :presence => true 
```

这些模型中还有更多内容，但这就是我所坚持的。如何为 business_entity 创建一个工厂来构建所有必需的孩子？因此，在规范文件中，我可以只使用 FactoryGirl.create(:business_entity) 并能够将其用于其他模型测试。我有这个工厂

```
 require 'faker'

FactoryGirl.define do
  factory :business_entity do
    name "DaveHahnDev"        
  end

  factory :business_location do
    name "Main Office"
    business_entity
    address1 "139 fittons road west"
    address2 "a different address"
    city { Faker::Address.city }
    province "Ontario"
    country "Canada"
    postal_code "L3V3V3"
  end

  factory :business_contact do
    first_name { Faker::Name.first_name}
    last_name { Faker::Name.last_name}
    business_location
    email { Faker::Internet.email}
  end

  factory :business_phone do
    name { Faker::PhoneNumber.phone_number}
    business_contact
    number_type "Work"
  end
end 
```

这通过了

```
require 'spec_helper'

  it "has a valid factory" do
    FactoryGirl.build(:business_entity).should be_valid
  end 
```

那么我如何使用这个工厂来创建带有所有孩子的 business_entity 以用于其他规范测试。

我希望这足够清楚，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T02:10:05.093

如果我理解正确，您需要创建关联。使用 FactoryGirls 执行此操作的最基本方法是将工厂名称添加到另一个工厂块中。因此，在您的情况下，它将如下所示：

```
# factories.rb

FactoryGirl.define do
  factory :business_entity do
    name "DaveHahnDev"        
  end

  factory :business_location do
    business_entity # this automatically creates an association
    name "Main Office"
    business_entity
    address1 "139 fittons road west"
    address2 "a different address"
    city { Faker::Address.city }
    province "Ontario"
    country "Canada"
    postal_code "L3V3V3"
  end

  factory :business_contact do
    business_location
    first_name { Faker::Name.first_name}
    last_name { Faker::Name.last_name}
    business_location
    email { Faker::Internet.email}
  end

  factory :business_phone do
    business_contact
    name { Faker::PhoneNumber.phone_number}
    business_contact
    number_type "Work"
  end
end 
```

添加这些行后，您可以调用 FactoryGirl.create(:business_location)，它将创建一个新的 BussinessLocation 记录、BussinessEntity 记录并将它们关联起来。

有关更多详细信息，请查看[FactoryGirls Wiki - Associations](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#associations)

# objective-c - 方法返回值但“控件可能到达非无效函数的结尾”

> ID：13317043
> 
> 赞同：-1
> 
> 时间：2012-11-09T22:36:40.407
> 
> 标签：objective-c, xcode

我是 obj-c 的新手，在这里编写一个方便的例程来从核心数据存储中获取实体。XCode 警告我我缺少返回值。为什么？

```
 - (NSArray *)findEntities:(NSString *)entityName byField:(NSString *)fieldName andValue:(id)fieldValue
 {
     NSFetchRequest *fetchRequest = [NSFetchRequest fetchRequestWithEntityName:entityName];
     NSPredicate *predicate = [NSPredicate predicateWithFormat:@"%K == %@", fieldName, fieldValue];
     [fetchRequest setPredicate:predicate];
     NSError *error;
     NSArray *fetchedObjects = [context executeFetchRequest:fetchRequest error:&error];
     if (error) {
         NSLog(@"LWStore: findEntities error: %@", [error localizedDescription]);
     }
     return fetchedObjects;
 } 
```

警告附加到 executeFetchRequest 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T22:48:56.183

将此代码粘贴到新项目中不会出现任何错误，这是可以理解的，因为看起来您总是会返回一个值。尝试清理、分析或任何会导致 Xcode 重新检查错误并查看错误是否消失的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T23:21:22.703

做一个清洁和构建。按`command + shift + K`快捷方式，然后按`command + b`。我能够在没有任何警告的情况下构建您的方法。这可能是那条线上的较早警告。一个干净的构建应该修复它。

# visual-studio-2012 - Visual Studio 2012 在添加控制器 MVC4 时崩溃

> ID：13317045
> 
> 赞同：2
> 
> 时间：2012-11-09T22:36:49.767
> 
> 标签：visual-studio-2012

有人有这个问题吗？

我打开了一个 MVC4 项目，一切正常，直到我尝试添加控制器，VS 崩溃所以我重新启动，现在项目根本不会加载，我得到“等待内部操作完成”，这永远不会完成。

我删除了 resharper 并在另一个系统上尝试了该项目，当我添加一个新控制器时，我遇到了完全相同的问题 :(

谢谢，迈克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-11T06:45:55.963

我的错，我从 SkyDrive 复制了项目，Windows 8 锁定了我所有的 DLL - 解锁它们很开心！

# ruby-on-rails - 推送到 Heroku 会导致 PG 密码错误

> ID：13317046
> 
> 赞同：0
> 
> 时间：2012-11-09T22:37:00.787
> 
> 标签：ruby-on-rails, heroku

我正在尝试使用水龙头（heroku db:push）将我的本地 PG 数据库推送到 Heroku。我以前没有问题地这样做过，但今天 Heroku 不接受我的推动。这里有错误：

```
funkdified@funkpad:~/rails_projects/goodtb$ heroku db:push postgres://goodtb@127.0.0.1/goodtb_development?encoding=utf8 --confirm goodtb
Loaded Taps v0.3.24
Warning: Data in the app 'goodtb' will be overwritten and will not be recoverable.
Failed to connect to database:
  Sequel::DatabaseConnectionError -> PG::Error: fe_sendauth: no password supplied 
```

我的 database.yml 文件中没有开发或生产密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T00:27:06.013

我想到了。

由于某种原因，在开发 pg 服务器上没有密码是无法完成 heroku db:push 的。我不确定这是否会随着新的 heroku 工具带而改变。

所以，基本上我在 pg-hba.conf 文件中将“trust”更改为“md5”，然后进入控制台中的 postgres 管理工具执行 ALTER USER 并添加密码。一旦完成，我就可以执行：

```
heroku db:push postgres://goodtb:password@127.0.0.1/goodtb_development?encoding=utf8 --confirm goodtb 
```

# javascript - 从 javascript 调用 swfobject 方法 - 不工作

> ID：13317049
> 
> 赞同：0
> 
> 时间：2012-11-09T22:37:24.653
> 
> 标签：javascript, swfobject

动作脚本代码：

```
import flash.external.ExternalInterface;
var process = ExternalInterface.addCallback("process", this, Process);
function Process(){
  avatar.process_loop.gotoAndPlay("loop");
} 
```

JavaScript 代码：

```
<div id="avatar"></div>
<script type="text/javascript" src="swfobject.js"></script>
<script type="text/javascript">
     swfobject.embedSWF("imgs/avatar.swf", "avatar", "170", "170", "9.0.0", "expressInstall.swf");
     swfobject.process();
</script> 
```

swf加载，我在页面上看到它，只是连接或方法的调用不起作用。

顺便说一句，在 swf 上一切正常，该函数实际上执行了那个“循环”。我的代码有什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T22:43:22.910

是`swfobject`对 DOMElement 的引用吗？它需要引用元素而不是任何其他构造函数/函数/等。

如果我没记错的话，你可以`alert( typeof swf.process )`看看它是否有功能。在此之前，您可以`swfobject.nodeType`查看它是否是一个实际的 DOM 节点。

**编辑：**

尝试做：

```
document.getElementById('avatar').process() 
```

代替

`swfobject.process`

# xml - 我应该如何将 xml 转换为 csv

> ID：13317053
> 
> 赞同：2
> 
> 时间：2012-11-09T22:38:02.393
> 
> 标签：xml, bash, xml-parsing

我正在尝试获取一些 xml 代码，示例如下：

```
 <time_report>

 <project_ID>4</project_ID>

 <project_status>close</project_status>

 <client_ID>6001</client_ID>

     <time_record>

            <project_start_time>15:02:33</project_start_time>

            <project_end_time>15:07:44</project_end_time>

            <project_total_time>PT00H05M11S</project_total_time>

     </time_record>

 <employee_ID>10001</employee_ID>

 <employee_name>Mary Beth</employee_name>

 <date_created>2009-08-25</date_created>

</time_report> 
```

然后输出它，使其格式如下：

```
project_id, project_status, client_id, project_start_time, project_end_time,  project_total_time, employee_ID, employee_name, date_created

4, close, 6001, 15:02:33, 15:07:44, PT00H05M11S, 10001, Mary Beth, 2009-08-25 
```

我一直在尝试使用 xmllint 来执行此操作，但不幸的是无法取得任何进展，我说我想知道是否有人会对我应该做什么提出建议？我将在 bash/shell 环境中执行此操作。任何帮助将不胜感激，谢谢！

还忘了提到如果我在excel中打开xml文件然后另存为csv，我可以得到正确的结果，只是想在linux中寻找一种方法

```
 project_ID,project_status,client_ID,project_start_time,project_end_time,project_total_time,employee_ID,employee_name,date_created
4,close,6001,15:02:33,15:07:44,PT00H05M11S,10001,Mary Beth,8/25/2009
5,open,6003,12:00:00,12:45:00,PT00H45M00S,10003,Michelle,9/11/2009
2,close,6002,10:00:00,10:30:00,PT00H30M00S,10002,Joe,8/25/2009
2,open,6004,12:00:00,3:27:05,PT03H23M05S,10004,Mike,8/13/2009 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T23:40:17.007

xmlstarlet 是一个非常强大的命令行工具，可让您查询 XML 或运行 XSLT 翻译。有一些 XSLT XML->CSV 示例随处可见，但以下单行代码可为您提供所需的内容：

```
xmlstarlet sel -B -t -m "//time_reports/time_report" -n -m "*" -v . -o , input.xml 
```

唯一的问题是我需要`<time_report>`用一个名为`<time_reports>`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T23:43:53.197

要将您的 XML 转换为 CSV（例如 xsltproc），您可以使用这样的 XSL 样式表：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text" />
    <xsl:template match="/">
        <xsl:for-each select="//time_report[position()=1]/*">
            <xsl:if test="not(position()=1)">
                <xsl:text>,</xsl:text>
            </xsl:if>
            <xsl:value-of select="name()" />
        </xsl:for-each>
        <xsl:text>&#13;</xsl:text>
        <xsl:for-each select="//time_report">
            <xsl:for-each select="./*">
                <xsl:if test="not(position()=1)">
                    <xsl:text>,</xsl:text>
                </xsl:if>
                <xsl:value-of select="normalize-space(.)" />
            </xsl:for-each>
            <xsl:text>&#13;</xsl:text>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T23:59:47.710

您也可以使用我的[Xidel](http://videlibri.sourceforge.net/xidel.html)：（假设您的 xml 中没有空字段）

```
 xidel /tmp/test.xml -e '//time_report/string-join(.//text()[normalize-space(.)], ", ")' 
```

标准 XPath 2，无需记住不同命令行参数的名称...

或者没有这个假设：

```
 xidel /tmp/test.xml -e '//time_report/string-join(.//*[not(*)], ", ")' 
```

# php - 从mysql数据库中选择一条随机记录，最好的方法？

> ID：13317055
> 
> 赞同：-1
> 
> 时间：2012-11-09T22:38:09.140
> 
> 标签：php, mysql, select, random

> **可能重复：**
> [从 mysql 中的大表中快速](https://stackoverflow.com/questions/211329/quick-selection-of-a-random-row-from-a-large-table-in-mysql)
> [选择随机行使用 MySQL 选择随机行](https://stackoverflow.com/questions/6541644/selecting-random-rows-with-mysql)

我目前正在制作一个模块，以从 mysql 数据库中提取随机业务​​记录，并将记录显示为模块内的“特色业务”。一切正常，但如果这是最好的方法，我不是 100%，因为我听说它不是太快？目前速度还是挺快的，我想我能拿到的最大业务量大概在100-200左右，那么用下面的方法可以吗，还是这么多记录会慢很多？。

非常感谢 ：-）

```
<?php
$result = mysql_query("SELECT * FROM `zgjzb_chronoforms_data_submitbusiness` ORDER BY     RAND() LIMIT 0,4;");
$row = mysql_fetch_array($result);
echo $row['businessname'];
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T22:44:34.143

看到这个问题：[MySQL 从 600K 行中快速选择 10 个随机行](https://stackoverflow.com/questions/4329396/mysql-select-10-random-rows-from-600k-rows-fast)

有“更好”的方式来做你想做的事。

在 100-200 家企业中，这可能不会产生太大影响。哪怕是几千。您当前的查询被认为“慢”的原因是 MySQL 正在内存中创建一个临时表来处理查询。

所以你应该对你现在所拥有的一切都很好（好吧，一段时间）。

PS这些`mysql_*`功能现在已经过时了。您应该使用[mysqli](http://us1.php.net/manual/en/book.mysqli.php)或[PDO](http://us1.php.net/manual/en/book.pdo.php)。这是关于差异的[PHP手册。](http://us1.php.net/manual/en/mysqlinfo.api.choosing.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T22:40:14.177

有这么多记录你会完全没问题的。即使你有成千上万的人，你也会没事的。Sql 查询几乎总是以其速度给我留下深刻印象，对于记录如此之少的查询，你会没事的。

# ruby-on-rails - 如何使用字符串调用名为范围的活动记录

> ID：13317056
> 
> 赞同：11
> 
> 时间：2012-11-09T22:38:18.257
> 
> 标签：ruby-on-rails, ruby, activerecord

我确定我错过了对 call 的使用的理解，但我认为我可以做这样的事情。

```
@case_studies = CaseStudy.call("some_named_scope") 
```

Where`"some_named_scope"`也是`CaseStudy`. 我需要使用 call 的原因是因为我已经命名了与控制器中的操作名称相同的范围，所以我想做这样的事情。

```
@case_studies = CaseStudy.call(params[:action]) 
```

**编辑**

原谅我，我才意识到我在考虑 send 方法，一些 call 这个词是怎么卡在我脑海里的。但`@case_studies = CaseStudy.send(params[:action])`按我想的那样工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T22:44:26.097

如果`some_named_scope`是model的**named_scope**，`CaseStudy`可以`send`用来调用value对应的方法`params[:action]`。但这显然是可大量利用的。

因此，除了安全性，您可以使用：

```
@case_studies = CaseStudy.send(params[:action]) 
```

希望它有效。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-08-21T13:29:14.653

尽管@kolrie 有正确的答案，但它根本不安全。

它应该被列入白名单，如下所示：

```
scope = ["first_scope", "second_scope", "default_scope"].include? params[:action] ? params[:scope] : "default_scope"
@case_studies = CaseStudy.send(scope) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T22:42:07.513

如果我明白你的意思，那就是你应该这样称呼它：

```
@case_studies = CaseStudy.send(:some_named_scope) 
```

您可以使用 send 调用方法并将符号或字符串传递给它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-26T14:04:57.383

要在 BookOfGreg 建议的白名单之上增加一层安全性，请使用[public_send](https://apidock.com/ruby/Object/public_send)而不是`send`，它只能调用公共接口的方法，而`send`甚至可以访问私有方法。

所以：

`CaseStudy.public_send(:some_scope)`

# javascript - Node.js 异步替换字符串

> ID：13317058
> 
> 赞同：1
> 
> 时间：2012-11-09T22:38:30.807
> 
> 标签：javascript, node.js

我正在使用*node.js*和*express*。

我有一个类似于以下的字符串：

```
Here is my string but now I need to processString("mystring") 
and return the processString("data"). 
```

我想搜索所有出现的 processString 并将其替换为函数的结果。我需要运行的功能是异步的。是否有捷径可寻？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T01:54:28.873

您的问题并不是很清楚，“为什么”和“什么”可能对回答您的问题更有帮助。据我了解，您想替换`processString("****")`为`****`在这种情况下，您可以使用以下内容：

```
 var str = 'Here is my string but now I need to processString("mystring") and return the processString("data").'
    str = str.replace(/processString\(\".*?\"\)/gi, function(match){
         return match.replace("processString\(\"", "").replace("\"\)", "")
    })
    console.log(str); 
```

这将匹配`processString("****")`内部内容，希望这就是您要找的！

# java - 删除 Eclipse 符号

> ID：13317059
> 
> 赞同：3
> 
> 时间：2012-11-09T22:38:33.210
> 
> 标签：java, eclipse

我有这些奇怪的符号，有一天出现了，我不太确定我是怎么得到它的，也不知道怎么去掉它。我真的不知道这些叫什么，所以我无法用谷歌搜索答案。这是圆形/正方形，每行代码末尾的段落符号就是我所指的。请问有什么帮助吗？

![在此处输入图像描述](../Images/0e891ab38801cb5aec22435aa3b90605.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-09T22:44:07.453

那是空白字符的视觉表示。您看到的分别代表[回车符](http://www.fileformat.info/info/unicode/char/000d/index.htm)( `¤`)、[换行符](http://www.fileformat.info/info/unicode/char/000a/index.htm)( `¶`) 和[制表](http://www.fileformat.info/info/unicode/char/0009/index.htm)符( `»`)。您显然已经在*Window > Preferences > General > Editors > Text Editors*中启用了*Show whitespace characters*。只需取消选中该框或通过显示/隐藏特定的空白字符和/或降低透明度级别来微调配置。

 *![在此处输入图像描述](../Images/e8d22ce96562c5af93a054de3b614a77.png)*

# google-chrome - 尽管在浏览器级别被阻止，仍能够设置和获取 cookie 数据

> ID：13317065
> 
> 赞同：1
> 
> 时间：2012-11-09T22:39:05.293
> 
> 标签：google-chrome, cookies, asp-classic

我不知道为什么会这样，我不确定我是否做错了，但我在 ASP 经典页面上有这段代码：

```
Response.Cookies("msg") = "Welcome"
Response.Write(request.Cookies("msg")) 
```

即使浏览器禁用了 cookie，页面也会显示消息。例如，在 Chrome 中，会出现一个指示“Cookie 被阻止”的图标。在“设置 > 所有 cookie 和站点数据”中，当前站点没有 cookie。我还检查了 Chrome 存储数据的硬盘驱动器上的“本地存储”文件夹。

如果没有 cookie 的证据，页面如何显示消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:44:37.967

为什么会发生这种情况的答案更简单，并且存在于 ASP 的内部。这不是很直观，但在上面的代码中发生的是，当你这样做时：

`Response.Cookies("msg") = "Welcome";`

此 cookie 将在此请求的上下文中可供您使用，但浏览器将永远不会保存它。

因此，当您执行 Response.Write 时，您看到的不是来自浏览器的 cookie，而是您刚刚设置的那个。

换句话说，您并没有真正在浏览器中设置 cookie。

# shell - 使用 bash shell 脚本按数字顺序一一附加 csv 文件

> ID：13317066
> 
> 赞同：4
> 
> 时间：2012-11-09T22:39:06.253
> 
> 标签：shell

给定名为 1.csv、2.csv、3.csv、...89.csv... n.csv 的文件，我如何在 bash shell 脚本中按数字顺序将它们附加在一起）（1 到 n）？是否有一个解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T01:38:30.017

如果您的文件以前导零命名，则会更容易，即

```
 cat [0-9].csv [0-9][0-9].csv .... > new.csv 
```

但是，给定一个真正的数字顺序并不难

```
ls -1
1
10
11
12
13
2
20
21
3
7
8
9 
```

（在这两个示例中，请注意 ls 的选项是第一个 (1)，而不是字母 L (l)）

和

```
ls -1 [0-9]* | sort -n
1
2
3
7
8
9
10
11
12
13
20
21 
```

然后

```
 cat $( ls -1 *.csv | sort -n  ) > new.csv 
```

假设您所有的 csv 文件都已编号。

如果您有超过 1000 个文件，shell 中的文件 arg 处理可能会中断，您应该发布一个新问题以正确使用 xargs。

要查看发生了什么，请添加 shell 调试/跟踪使用

```
 set -vx  # to turn on
 set +vx  # to turn it off 
```

.

IHTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T00:11:30.987

一个带有内联参数的衬里（您应该用最大文件数替换 N）。脚本将跳过不存在的文件，因此如果您按顺序遗漏了几个文件，您将不会收到错误 :)

```
for i in `seq 0 N`; do test -f $i.csv && cat $i.csv; done >> result.csv 
```

或带参数的脚本

```
#!/bin/bash

for i in `seq 0 $1`
do
    if [ -f "$i.csv" ]
    then
        cat $i.csv >> $2
    fi
done 
```

用法：./script.sh MAX_CSV_ID RESULT_FILE

示例：./script.sh 89 new.csv

# facebook - 我们可以使用个人资料 ID 将照片上传到 Facebook 相册吗

> ID：13317068
> 
> 赞同：0
> 
> 时间：2012-11-09T22:39:24.627
> 
> 标签：facebook

我想将照片上传到特定的 Facebook 帐户，其凭据对我们的开发人员开放。当用户执行某些操作时，它会触发此方法，并且必须将照片上传到特定的 Facebook 帐户。

任何人都可以分享你的想法...

问候，哈尔伯恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T22:59:53.693

我讨厌发布一个 URL 作为答案，但从字面上搜索你的问题提供了这个答案： [https ://developers.facebook.com/blog/post/498/](https://developers.facebook.com/blog/post/498/)

简而言之 - 使用 facebook grap API

# php - 带有分页的 Zend Cache 不起作用

> ID：13317073
> 
> 赞同：1
> 
> 时间：2012-11-09T22:39:58.110
> 
> 标签：php, zend-framework, caching, zend-paginator, zend-cache

我是 Zend 框架的新手。我正在使用 Zend 缓存，我几乎从文档中复制了代码，这是我的代码：

```
 $frontendOptions = array(
                'lifetime' => 3600, // cache lifetime of 1 hour
                'automatic_serialization' => true
        );

        $backendOptions = array(
                'cache_dir' => '../tmp/' // Directory where to put the cache files
        );

        // getting a Zend_Cache_Core object
        $cache = Zend_Cache::factory('Core',
                'File',
                $frontendOptions,
                $backendOptions);

        // see if a cache already exists:
        if( ($paginator = $cache->load('index' . $page)) === false ) {

            $table = new self;
            $query = $table->select()->setIntegrityCheck(false);
            $query->from('feeds', array('feeds.blog_id', 'feeds.date_created', 'feeds.feed_id', 'feeds.post_content', 'feeds.post_link', 'feeds.post_title', 'feeds.post_thumb'));      

            $query->where('feeds.date_created <= NOW()');

            $query->order('feeds.date_created DESC');

            $paginator = new Zend_Paginator(new Zend_Paginator_Adapter_DbTableSelect($query));
            $paginator->setItemCountPerPage(10);
            $paginator->setCurrentPageNumber($page);

            $cache->save($paginator, 'index' . $page);

        }

            return $paginator; 
```

因此，在我访问运行此查询的网站后，我看到正在创建的文件，它也是一个 19 或 20kb 的文件，无论我正在缓存哪个页面，但页面加载的速度与以前相同，如果我更新某些内容在数据库中，我看到的是更新版本，而不是缓存，我认为缓存在缓存的生命周期内不会显示任何更新。有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:39:38.433

The paginator itself isn't the object you like to cache - you have to cache the results from db which will be done inside the paginator.

To do that there is a method to attach your cache object to the paginator

```
Zend_Paginator::setCache($cache);
$paginator->setCacheEnabled(true); 
```

and the paginator will handle caching for you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T15:47:31.897

从缓存中恢复的分页器，做它应该做的——执行查询。每次从缓存中加载它时它都会执行此操作。

您应该保存最终结果，而不是分页器。

# batch-file - Windows Embedded Standard 7 瘦客户端 - 使用批处理文件通过网络复制文件

> ID：13317074
> 
> 赞同：0
> 
> 时间：2012-11-09T22:40:00.840
> 
> 标签：batch-file, xcopy, windows-embedded

这是否可以将带有批处理文件的网络位置的文件复制到运行 Windows Embedded Standard 7 的瘦客户端。

COPY 命令不起作用，当我尝试在 Windows 资源管理器中导航到网络位置时，系统会提示我输入用户名和密码。

我以管理员身份登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:24:46.623

当向另一台 Windows 主机进行身份验证以通过 RPC 复制文件（即通过网络浏览文件的标准方法）时，您需要足够的权限。有三种身份验证方案来描述所需的权限：

1）如果两台计算机在同一个工作组中，那么本地和远程主机上的用户名和密码需要相同。

2) 如果两台计算机位于相同或相互信任的域中，那么您的帐户可能需要是远程主机上的管理员。

3）如果不是远程主机上的管理员，则需要对指定文件夹和共享具有正确的权限。

# python - 如何计算python列表中单独列表中的数字？

> ID：13317079
> 
> 赞同：1
> 
> 时间：2012-11-09T22:40:27.217
> 
> 标签：python, list

如何计算 3 出现在列表列表中的次数，例如`[[1,2,3,4],[2,3,4,5],[5,6,7,5]]` 输出应该类似于`[1,1,0]`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T22:42:02.687

您可以使用以下方法[`list.count(element)`](http://docs.python.org/3.3/tutorial/datastructures.html)：

```
my_lists = [[1,2,3,4], [2,3,4,5], [5,6,7,5]]
[l.count(3) for l in my_lists]
>> [1, 1, 0] 
```

# python - 列表字符串比较

> ID：13317087
> 
> 赞同：0
> 
> 时间：2012-11-09T22:41:25.293
> 
> 标签：python, python-3.x

假设列表中的每个字母都称为“字母”。我遇到的问题是，当字符串 == 字母第一次出现在特定列表中时，我必须将一个值附加到新列表中。之后，如果该特定列表中再次出现字符串 == 字母，我只需要更新该值。所以，是的，如果你们中的任何一个有经验的人可以帮助我，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T22:44:40.237

您可以为此使用列表推导。

```
def num_common_char(lst, string):
    return [sublist.count(string) for sublist in lst] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T22:48:00.610

You need some logic that states in words: "if not yet seen, add to list, otherwise increment". Or just be pythonic and follow @Tim's suggestion

# expressionengine - 更改修饰符似乎不会更新价格

> ID：13317088
> 
> 赞同：3
> 
> 时间：2012-11-09T22:41:32.087
> 
> 标签：expressionengine, expresso-store

当我选择不同的修饰符选项时，我似乎无法让商店动态更新产品的价格。

我已将商店放入沙盒环境中，其中只有一种产品具有 1 个修饰符：大小。有小号和大号两种尺寸。大号的差价为 10 美元。

当我将产品添加到购物车时，会考虑价格差异，但是在添加到购物车之前选择实际选项时，我需要动态更改价格差异。

我没有自己的自定义模板，只是使用提供的示例之一，问题仍然存在。

代码：

```
<div class="control-group">
<label class="control-label">Price</label>
<div class="controls">
  {if on_sale}
    <del>{regular_price}</del><br />
    {price}
    <span class="label label-success">Save {you_save} ({you_save_percent}%)</span>
  {if:else}
    {regular_price}
  {/if}
</div>
</div>

{modifiers}

<div class="control-group">
  <label class="control-label" for="{modifier_input_name}">{modifier_name}</label>
  <div class="controls">
    {if modifier_type == 'var' OR modifier_type == 'var_single_sku'}
      <select id="{modifier_input_name}" name="{modifier_input_name}">
        {modifier_options}
          <option value="{option_id}">
            {option_name} {if price_mod_val} ({price_mod}) {/if}
          </option>
        {/modifier_options}
      </select>
    {if:else}
      <input type="text" id="{modifier_input_name}" name="{modifier_input_name}" value="" />
    {/if}
    <p class="help-block">{modifier_instructions}</p>
  </div>
</div>

{/modifiers} 
```

EECMS 版本：1.5.2 商店：1.6.1 PHP：5.3.6 环境：OSX 上的 MAMP

任何帮助将不胜感激，因为这非常紧迫。

干杯丹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T01:11:00.693

动态产品变量基于 css 类，它告诉内置 javascript 在哪里更新价格。

[https://exp-resso.com/docs/store/tags/product.html#dynamic-product-variables](https://exp-resso.com/docs/store/tags/product.html#dynamic-product-variables)

要使其正常工作，只需将您的价格包装在一个`<span>`元素中，如下所示：

```
<span class="store_product_price">{price}</span> 
```

另请注意，1.6.0 中有一个错误导致它在某些情况下中断（尽管您提到您正在运行 1.6.1，所以这应该不是问题）。

# r - plot.new() 中的错误：数字边距太大，不知道为什么？

> ID：13317090
> 
> 赞同：2
> 
> 时间：2012-11-09T22:41:40.673
> 
> 标签：r

我对 R 非常陌生，并尝试在 R 中使用绘图功能。在 linux 环境中使用 R

# 试图从名为“样本”的数据框中绘制数据

```
jpeg('rplot1.jpg')
plot(sample,cex=0.9,col="blue")
Error in plot.new() : figure margins too large
dev.off() 
```

据我了解，我需要增加绘图面板的大小。不知道该怎么做。试过

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:19:48.597

您正在为函数提供一个列表（因为数据框是列表）`plot`。请尝试：

```
plot(sample[[1]], sample[[2]], cex=0.9, col="blue") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T21:31:30.957

澄清一下，将`data.frame`所有数字列的 a 传递给`plot`函数等效于调用`pairs`以绘制所有列的散点图矩阵。你可能知道这一点。

据我所知，错误的原因仅仅是设备 ( `jpeg`) 不够大，无法合理地包含整个散点图矩阵。例如，

```
mysamp <- matrix(rnorm(10000), nrow = 100)
mydat <- as.data.frame(mysamp)
plot(mydat)
# Error in plot.new() : figure margins too large 
```

为了成功创建您的绘图，请将较大的值传递给 的`width`和`height`参数`jpeg`。这是一个带有`hwFact`参数的函数，该参数应该是一个数值，用于乘以 jpeg 的高度和宽度。

```
myFun <- function(data, hwFact = 1){
  jpeg("rplot1.jpg", width = 500 * hwFact, height = 500 * hwFact)
  plot(data, cex = .9, col = "blue")
  dev.off()
} 
```

下面的迭代使用上面的函数依次递增`hwFact`，直到创建jpeg。成功创建 jpeg 后，将打印迭代编号并停止迭代。（这几乎是情节的最小尺寸，很可能太小而无法阅读任何内容。）

```
for(i in 1:20){
    res <- tryCatch(myFun(mydat, i), error = function(e) e)
    if(!"error" %in% class(res)) {
        print(i)
        break
    }
}
# [1] 3 
```

所以它需要一个宽度和高度为 1500（即 500 * 3）的 jpeg 来创建一个（完全难以辨认的）图。一旦你知道了最小尺寸，你就必须尝试找到合适的尺寸。

# android - android 应用程序电子邮件队列

> ID：13317091
> 
> 赞同：1
> 
> 时间：2012-11-09T22:41:48.967
> 
> 标签：android, email-client

我编写了一个 Android 应用程序，用于发送有关某些产品的电子邮件。现在我会在每次网络关闭时创建一个队列，而我无法发送这些队列。我可以将电子邮件存储到某个文件夹中吗？你有什么建议吗？预先感谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-09T23:22:44.120

> 我可以将电子邮件存储到某个文件夹中吗？

您可以根据需要将所需的任何文件存储在[内部存储](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)或[外部存储](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)上。

# imagemagick - 仅显示增量的动画 GIF 帧

> ID：13317092
> 
> 赞同：2
> 
> 时间：2012-11-09T22:41:54.267
> 
> 标签：imagemagick, frame, animated-gif

我正在尝试抓取动画 gif 的帧。我试过[http://gif-explode.com](http://gif-explode.com)和`convert +adjoin loading.gif out%d.gif`ImageMagik。不幸的是，在这两种情况下，除了第一帧和最后一帧之外，其他所有帧都有些模糊和部分缺失。我猜动画 gif 的创建者使用了某种压缩，其中每个“帧”只是前一帧的增量。

**如何从这样的动画 gif 中获取可用帧？**也许 ImageMagik 或其他软件中的某个地方可以进行重建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-19T18:53:40.773

您可能需要指定“coalesce”和“dispose”选项：

```
convert -coalesce +adjoin -dispose Previous loading.gif out%d.gif 
```

# php - 使用 PHP 的 PDO 将“视图数”保存到 MySQL 中记录的表行？

> ID：13317093
> 
> 赞同：1
> 
> 时间：2012-11-09T22:41:54.963
> 
> 标签：php, mysql, pdo

我有一个显示公司列表的表格。每次显示公司的记录时，我都需要将视图保存在 MySQL 数据库中。我正在使用 PHP 的 PDO 连接到 MySQL，并且想知道每次显示记录时如何更新表列。

例如，公司“a”的记录已显示 10 次。两个用户访问该页面后，该公司记录的数据库中的“views”列需要更新为 12。

有人可以给我一个例子来说明如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T22:50:44.703

您可以只调用一个`UPDATE`查询并将视图列的值加一。

或者，您可以创建一个程序来立即执行此操作。例如：[一次通过 MySQL UPDATE 和 SELECT](https://stackoverflow.com/questions/562693/mysql-update-and-select-in-one-pass)

# email - 如何以编程方式可靠地确定电子邮件地址是否来自大学？

> ID：13317099
> 
> 赞同：0
> 
> 时间：2012-11-09T22:42:07.993
> 
> 标签：email, email-validation

为了提供学生和教师折扣，我如何以编程方式验证电子邮件地址是否归大学所有？

我会使用`$email =~ /\.edu$/`，但非美国大学不会将自己限制在`.edu`域中。

例如`mail@cs.zu.de`。

我会执行一个 SPARQL 查询，将电子邮件地址预处理到它的超级域 ( `zu.de`，然后搜索`University`主页 ( `web.zu.de`) 超级域 ( `zu.de`) 与电子邮件地址超级域匹配的对象，但是......

Wikipedia/dbpedia 没有针对每所大学的文章，有时不太受欢迎的大学会组合在一篇文章中。

所以我只能选择维护我自己的大学电子邮件地址数据库（糟糕），或者确定某种相同的开放数据库。有吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T22:50:28.333

If you don't find a reliable university domain list, you might go with moderation: keep your own database of university domains, and *only if you get an unrecognized domain*, mark it as pending review, and have a real person verify if the domain belongs to a university or not, and then add it to your database as either belonging to a university or not. Then you could pre-populate your database with known universities (according to what you expect from your expected userbase), and blacklist major free email providers (i.e. mark as non-university), so you don't have to verify them one by one.

This approach has the additional benefit that you will end up with a filtered database of university-related email domains, which would be a useful resource which you can then offer as a service.

# visual-studio-2012 - 在 Visual Studio 2012 中使用亚音速

> ID：13317100
> 
> 赞同：0
> 
> 时间：2012-11-09T22:42:11.483
> 
> 标签：visual-studio-2012, subsonic, t4

我正在尝试在 Visual Studio 2012 中使用 SubSonic 3.0.0.4 T4 模板，但在尝试运行自定义工具时出现错误：

```
Running transformation: System.ArgumentException: URI formats are not supported.
at System.IO.Path.NormalizePath(String path, Boolean fullCheck, Int32 maxPathLength)
at System.IO.Path.GetFullPathInternal(String path)
at System.IO.FileInfo.Init(String fileName, Boolean checkHost)
at System.IO.FileInfo..ctor(String fileName)
at Microsoft.VisualStudio.TextTemplatingDEA67E4EB0C1122C647D57B24990E6ADC926293FAA416AB931D00586F4B18B19835EBCF363314E3900B217C8CCCCBA2FE49FB073A2A661FD3E6B140615356056.GeneratedTextTransformation.GetProjectPath()
at Microsoft.VisualStudio.TextTemplatingDEA67E4EB0C1122C647D57B24990E6ADC926293FAA416AB931D00586F4B18B19835EBCF363314E3900B217C8CCCCBA2FE49FB073A2A661FD3E6B140615356056.GeneratedTextTransformation.GetConfigPath()
at Microsoft.VisualStudio.TextTemplatingDEA67E4EB0C1122C647D57B24990E6ADC926293FAA416AB931D00586F4B18B19835EBCF363314E3900B217C8CCCCBA2FE49FB073A2A661FD3E6B140615356056.GeneratedTextTransformation.GetConnectionString(String connectionStringName)
at Microsoft.VisualStudio.TextTemplatingDEA67E4EB0C1122C647D57B24990E6ADC926293FAA416AB931D00586F4B18B19835EBCF363314E3900B217C8CCCCBA2FE49FB073A2A661FD3E6B140615356056.GeneratedTextTransformation.get_ConnectionString()
at Microsoft.VisualStudio.TextTemplatingDEA67E4EB0C1122C647D57B24990E6ADC926293FAA416AB931D00586F4B18B19835EBCF363314E3900B217C8CCCCBA2FE49FB073A2A661FD3E6B140615356056.GeneratedTextTransformation.GetReader(String sql)
at Microsoft.VisualStudio.TextTemplatingDEA67E4EB0C1122C647D57B24990E6ADC926293FAA416AB931D00586F4B18B19835EBCF363314E3900B217C8CCCCBA2FE49FB073A2A661FD3E6B140615356056.GeneratedTextTransformation.LoadTables()
at Microsoft.VisualStudio.TextTemplatingDEA67E4EB0C1122C647D57B24990E6ADC926293FAA416AB931D00586F4B18B19835EBCF363314E3900B217C8CCCCBA2FE49FB073A2A661FD3E6B140615356056.GeneratedTextTransformation.TransformText()    C:\SourceControl\Web Projects\XXX\xxx\App_Code\DAL\Classes.tt   1   1   http://localhost/XXX/ 
```

通常，我一直在使用带有 Web 应用程序的 VS2010，并使用内置的 Web 服务器运行它们。该项目托管在我的本地 IIS 实例上（不确定是否有所作为）。

任何帮助，将不胜感激。

乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T09:24:20.323

I'm running 2012 and have no problems generating SubSonic-code through Run Custom Tool so must be something related to your project's configuration. Error message suggests something with ProjectPath - most likely when the T4 code is trying to find and pick up the connection string.

# c++ - c++ libconfig和列表

> ID：13317102
> 
> 赞同：1
> 
> 时间：2012-11-09T22:42:17.030
> 
> 标签：c++, list, libconfig

似乎我找不到任何来源告诉我如何在 libconfig 中使用列表。

假设我的配置文件如下所示：

```
Layer1 = {
    Layer2 = {
        SomeOption = "MyValue";
        Options =  (
            {
                Option = "Full Screen";
                Value = "No";
            },
            {
                Option = "Title";
                Value = "Test";
            }
        );
    };
}; 
```

如何使用 libconfig++ 读取选项？我只能找到读取单个值的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T13:16:20.640

好的，我找到了答案：

```
using namespace libconfig;

// ...

Config *pConfig = new Config();
// ...
Setting& settings = pConfig->lookup("Layer1.Layer2.Options");
const char* op0 = settings[0]["Option"];

// ... 
```

# python - 插入帖子 Blogger API 使用 Python 失败

> ID：13317113
> 
> 赞同：3
> 
> 时间：2012-11-09T22:43:43.310
> 
> 标签：python, google-api, blogger, google-api-python-client

这段代码现在可以工作了。

我在通过 python2.7 调用 API 将新博客文章插入到谷歌的 Blogger 站点时遇到问题。我有来自谷歌的所有 oauth2client 模块来处理身份验证。我有权使用 Blogger V3 api - 这是在谷歌开发者控制台上激活的。我已经使用相同的 credentials.dat 运行了简单的 api 请求：

这有效（不包括完整代码）

```
service = build('blogger','v3', http=http)
try:
    request = service.blogs().get(blogId="6814573853229626501")
    response = request.execute()
    print response 
```

谷歌 api 发现服务让我相信这是插入帖子的代码应该是什么样子 [https://developers.google.com/apis-explorer/#p/blogger/v3/blogger.posts.insert](https://developers.google.com/apis-explorer/#p/blogger/v3/blogger.posts.insert)

```
service = build('blogger','v3', http=http)

try:
    body = {
        "kind": "blogger#post",
        "id": "6814573853229626501",
        "title": "posted via python",
        "content":"<div>hello world test</div>"
        }

    request = service.posts().insert(blogId="6814573853229626501",body=body)

    response = request.execute()
    print response 
```

我确定这是我搞砸的身体=身体部分？有什么线索吗？

这是我得到的错误：

```
Traceback (most recent call last):
  File "blogger.py", line 104, in <module>
    main()
  File "blogger.py", line 93, in main
    response = request.execute()
  File "/usr/local/lib/python2.7/dist-packages/google_api_python_client-1.0c2-py2.7.egg/apiclient/http.py", line 654, in execute
    raise HttpError(resp, content, self.uri)
apiclient.errors.HttpError: <HttpError 400 when requesting https://www.googleapis.com/blogger/v3/blogs/6814573853229626501/posts?alt=json returned "Invalid Value"> 
```

如果您有兴趣，我正在尝试从我当时感兴趣的 eBay 数据生成的 google 融合表中发布图表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-28T07:57:42.150

您可以以某种方式在任何博客上发帖

```
__author__ = 'spandey2405@gmail.com (Saurabh Pandey)'

import sys
from oauth2client import client
from googleapiclient import sample_tools

  # Authenticate and construct service.
  service, flags = sample_tools.init(
      argv, 'blogger', 'v3', __doc__, __file__,
      scope='https://www.googleapis.com/auth/blogger')

  try:

      users = service.users()

      # Retrieve this user's profile information
      thisuser = users.get(userId='self').execute()
      print('This user\'s display name is: %s' % thisuser['displayName'])

      blogs = service.blogs()

      # Retrieve the list of Blogs this user has write privileges on
      thisusersblogs = blogs.listByUser(userId='self').execute()
      for blog in thisusersblogs['items']:
        print('The blog named \'%s\' is at: %s' % (blog['name'], blog['url']))

      posts = service.posts()
      body = {
        "kind": "blogger#post",
        "id": "6701167141462934671",
        "title": "posted via python",
        "content":"<div>hello world test</div>"
        }
      insert = posts.insert(blogId='6701167141462934671', body=body)
      posts_doc = insert.execute()
      print posts_doc

  except client.AccessTokenRefreshError:
    print ('The credentials have been revoked or expired, please re-run'
      'the application to re-authorize') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T03:29:47.680

您不需要“数据”：围绕数据的对象包装器，如果服务器需要，客户端库将添加它。本文档显示了在插入调用中使用的对象的形式：

[https://google-api-client-libraries.appspot.com/documentation/blogger/v3/python/latest/blogger_v3.posts.html#insert](https://google-api-client-libraries.appspot.com/documentation/blogger/v3/python/latest/blogger_v3.posts.html#insert)

# cuda - 在 cublas-4.1.28 中，函数参数是否有约定更改？

> ID：13317121
> 
> 赞同：0
> 
> 时间：2012-11-09T22:44:32.737
> 
> 标签：cuda, cublas

我想使用 cublas 进行以下矩阵-矩阵乘法：

```
 cA(M by K) * cB(K by N) => cAout(M by N) 
```

我将 cA 指定为 K 作为前导索引，并将 cB 指定为 N 作为前导索引。根据 cublas-4.0 手册，我应该这样做：

```
HANDLE_ERROR(cublasSgemm(hdl, CUBLAS_OP_N, CUBLAS_OP_N, M, K, N, &alpha, cA, K, cB, N, &beta, cAout, N)); 
```

但它没有用。相反，以下代码通过字面转换 cA 和 cB 来产生预期的结果：

```
HANDLE_ERROR(cublasSgemm(hdl, CUBLAS_OP_N, CUBLAS_OP_N, N, K, M, &alpha, cB, N, cA, K, &beta, cAout, N)); 
```

我使用的 cublas 版本是 4.1.28。函数参数是否有约定更改？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T04:19:27.193

回想一下，CUBLAS 使用以列为主的存储约定。假设这些矩阵不是某个更大矩阵的一部分，cA 的前导维度是 M，cB 的前导维度是 K，cAout 的前导维度是 M。因此，您的 SGEMM 调用应为

```
HANDLE_ERROR(cublasSgemm(hdl, CUBLAS_OP_N, CUBLAS_OP_N, M, K, N, &alpha, cA, M, cB, K, &beta, cAout, M)); 
```

# c++ - 如何在向量中搜索结构项？

> ID：13317126
> 
> 赞同：2
> 
> 时间：2012-11-09T18:38:09.873
> 
> 标签：c++, vector, structure

我正在尝试使用矢量实现创建库存系统，但我似乎遇到了一些麻烦。我在使用我制作的结构时遇到了问题。注意：这实际上不在游戏代码中，这是我用来测试我对向量和结构的知识的单独解决方案！

```
struct aItem
{
    string  itemName;
    int     damage;
};

int main()
{
    aItem healingPotion;
    healingPotion.itemName = "Healing Potion";
    healingPotion.damage= 6;

    aItem fireballPotion;
    fireballPotion.itemName = "Potion of Fiery Balls";
    fireballPotion.damage = -2;

    vector<aItem> inventory;
    inventory.push_back(healingPotion);
    inventory.push_back(healingPotion);
    inventory.push_back(healingPotion);
    inventory.push_back(fireballPotion);

    if(find(inventory.begin(), inventory.end(), fireballPotion) != inventory.end())
                {
                        cout << "Found";
                }

    system("PAUSE");
    return 0;
} 
```

前面的代码给了我以下错误：

> 1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\xutility(3186): error C2678: binary '==' : no operator found which take a left-hand operand of type 'aItem' (或者没有可接受的转换）

错误还有更多，如果您需要它，请告诉我。我敢打赌这是一件小而愚蠢的事情，但我已经敲了两个多小时。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T18:48:45.440

`find`寻找与向量中的项目相等的东西。您说您想使用字符串进行搜索，但您还没有为此编写代码；它试图比较整个结构。而且您还没有编写代码来比较整个结构，所以它会给您一个错误。

最简单的解决方案是使用显式循环而不是`find`.

如果您想`find`按字符串处理，请使用`find_if`变体并编写一个查看字符串的谓词函数。或者，如果您想`find`按整个结构进行处理，您可以`operator ==`在结构上定义一个比较`itemName`和的结构`damage`。

或者您也可以考虑使用`map`or`unordered_map`数据结构而不是`vector`. 地图容器设计用于使用键（例如字符串）进行快速查找。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T18:55:15.197

该`find`方法不知道如何比较两个`aItem`对象是否相等。您需要`==`在结构定义中定义运算符，如下所示：

```
bool operator==(aItem other)
{
    if (itemName == other.itemName && damage == other.damage)
        return true;
    else
        return false;
} 
```

这将允许`find`确定两个`aItem`对象是否相等，这是算法工作所必需的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T23:36:41.893

尝试类似：

```
#include <iostream>
#include <vector>
using namespace std;
struct item {
    item(string const name,int const damage):name_(name),damage_(damage) {

    }
    string name_;
    int damage_;
};
int main(int argc, char** argv) {
    vector<item *> items;
    item healingPostion("cure light",-10);
    item fireballPostion("fireball",10);
    items.push_back(&healingPostion);
    items.push_back(&fireballPostion);
    if(find(items.begin(), items.end(), &fireballPostion) != items.end()) {
        cout << "Found";
    }
    return 0;
} 
```

# ffmpeg - 带有ffmpeg代码库的音频过滤器不起作用

> ID：13317137
> 
> 赞同：3
> 
> 时间：2012-11-09T22:45:21.670
> 
> 标签：ffmpeg

我正在尝试使用适用于 Windows 的 ffmpeg 库提供的 filtering_audio.c 示例，以从 MP4 文件中提取音频，重新采样到 8 KHz 并将立体声转换为单声道。该示例通过 stdout 将音频输出通过管道传输到 ffplay。我正在使用 Visual Studio 2010，示例成功构建并运行，但结果显然不是预期的结果。在 init_filters 结束时，我添加了一个对 avfilter_graph_dump() 的调用，它看起来都是正确的，还有到 ffplay 的管道，如下所示：

```
abuffer filter args: time_base=1/24000:sample_rate=24000:sample_fmt=s16:channel_layout=0x4
Output: srate:8000Hz fmt:s16 chlayout:mono
+-----------+
|    in     |default--[24000Hz s16:mono]--Parsed_aconvert_0:default
| (abuffer) |
+-----------+

                                                      +-----------------+
Parsed_aresample_1:default--[8000Hz s16:mono]--default|       out       |
                                                      | (ffabuffersink) |
                                                      +-----------------+

                                       +-------------------+
in:default--[24000Hz s16:mono]--default| Parsed_aconvert_0 |default--[24000Hz s16:mono]-Parsed_aresample_1:default
                                       |    (aconvert)     |
                                       +-------------------+

                                                      +--------------------+
Parsed_aconvert_0:default--[24000Hz s16:mono]--default| Parsed_aresample_1 |default--[8000Hz s16:mono]--out:default
                                                      |    (aresample)     |
                                                      +--------------------+
[s16le @ 003edda0] Invalid sample rate 0 specified using default of 44100
[s16le @ 003edda0] Estimating duration from bitrate, this may be inaccurate
Input #0, s16le, from 'pipe:':
  Duration: N/A, start: 0.000000, bitrate: 128 kb/s
    Stream #0:0: Audio: pcm_s16le, 8000 Hz, 1 channels, s16, 128 kb/s 
```

如果您已使此示例在 VS 2010 中的 Windows 上正常运行，请提供您为使其正常工作所做的任何提示或更改？

# java - java.awt -- 当 java 将图像输出到我的显示器（屏幕）时，输出到显示器卡的文件在哪里？

> ID：13317138
> 
> 赞同：0
> 
> 时间：2012-11-09T22:45:30.960
> 
> 标签：java, image, graphics, awt, mpeg-4

假设我正在使用 java 图形对象绘制一组图像。假设我 java 正在将这些图像输出到我的显示器。发送到监控卡的一个或多个文件在哪里（图形表示文件）。如何获取此文件并将其保存到磁盘，或者如何获取此文件并将其写入数组，或者如何获取这些文件并将它们的输出结果（到监视器）合并到一个文件中保存？我不想使用屏幕截图功能，我希望能够将显示器的输出重定向（xor 捕获）到某种字节流。我注意到，当您谈论显示功能时，监视器比信号量好得多。我不需要反例。

我可能没有问正确的问题。可能是我想在文件仍处于用户空间时捕获文件，然后再将其放入“设备空间”。我想尝试捕获字节流，以便将其转换为 MPEG-4 格式。我要么需要来自流输入的 MPEG-4 转换器的流输出，要么需要在离散时间拍摄静态图像并转换图像。

用户空间的输出将采用什么格式？设备空间输出的格式是什么？尽量减少猜测。

[http://docs.oracle.com/javame/config/cdc/opt-pkgs/api/jsr927/index.html](http://docs.oracle.com/javame/config/cdc/opt-pkgs/api/jsr927/index.html)

我猜想 Java 已经提供了一种在电视屏幕上显示 AWT 对象的方法。（爪哇电视）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:47:20.093

在 Java 中，“用户”和“设备”数据都是通过图像和栅格处理的。如果您深入研究源文件，您会发现用于在幕后绘图的 SunGraphics2D 使用[管道](http://hg.openjdk.java.net/jdk7/jdk7-gate/jdk/file/e947a98ea3c1/src/share/classes/sun/java2d/SunGraphics2D.java)[（](http://hg.openjdk.java.net/jdk7/jdk7-gate/jdk/file/e947a98ea3c1/src/share/classes/sun/java2d/pipe/DrawImage.java) SunGraphics2D 第 154-159 行）再次使用[Blits](http://en.wikipedia.org/wiki/Bit_blit)将图形数据传输到图像（或二维屏幕）。图形和管道都被编程为仅执行此操作。就像 MadProgrammer 所说的那样 - 您需要在图像上渲染图形才能提取它。这基本上与您在本机实现开始之前获得的一样低级。

这可以与在 Java 中运行的正常绘制机制并行完成。[MadProgrammer 提到](https://stackoverflow.com/questions/12575201/how-to-save-a-image-on-jframe/12575259#12575259)的线程确实提供了很好的例子。

# objective-c - 使用新的沙盒要求获得写入特定目录的持久权限

> ID：13317140
> 
> 赞同：0
> 
> 时间：2012-11-09T22:45:39.300
> 
> 标签：objective-c, cocoa, sandbox, osx-mountain-lion

我需要一种方法来获取并保留写入 OS X 中特定目录的权限。如何在遵守新的沙盒要求的同时做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T01:01:44.890

食谱：

1.  要求用户选择目录 - 使用仅限于目录选择的标准打开对话框。除了一些特殊的目录（音乐、图片等）之外，除了询问用户之外，没有其他方法可以访问。

2.  使用标准打开对话框返回的 URL 创建一个安全范围的书签，只需在 Apple 文档中搜索“安全范围的书签”。

3.  在用户首选项或应用程序的应用程序支持文件夹中保留该书签。

4.  在应用程序启动时，或在您需要访问之前，阅读保存的书签并激活 - 您将在上面的 Apple 文档中了解如何执行此操作。

# python - 尝试将 R 库与 rpy2 一起使用时出错

> ID：13317141
> 
> 赞同：4
> 
> 时间：2012-11-09T22:46:21.637
> 
> 标签：python, r, time-series, rpy2

我正在尝试`forecast`使用 rpy2 使用 R 中的包。我不知道如何在 rpy2 中将列表转换为时间序列，所以我认为 pandas 时间序列也可以。

```
from rpy2.robjects.packages import importr
from rpy2.robjects import r
fore = importr("forecast")
from pandas import *

data = [1, 2, 3, 4, 5, 6, 7, 8, 9]
s = Series(data)

f = fore(s, 5, level = c(80,95)) 
```

运行`f`返回此错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'c' is not defined 
```

我不知道错误是由于使用 pandas 时间序列还是在尝试使用`forecast`R 的包时语法不正确。如果有人可以在这里帮助我，我将不胜感激。

编辑：我自己解决了。这是任何有兴趣的人的正确代码：

```
from rpy2.robjects.packages import importr
from rpy2.robjects import r
import rpy2.robjects.numpy2ri as rpyn
forecast = importr("forecast")

rcode = 'k = as.numeric(list(1, 2, 3, 4, 5, 6, 7, 8, 9))' #I just copied the contents of data in
r(rcode)
rcode1 = 'j <- ts(k)'
r(rcode1)
rcode2 = 'forecast(j, 5, level = c(80,95))'

x = r(rcode2)[1]
vector=rpyn.ri2numpy(x) #Converts from Float Vector to an array
lst = list(vector) #Converts the array to a list. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T08:38:39.517

你读过错误信息吗？

```
NameError: name 'c' is not defined 
```

这个错误是从哪里来的？

```
f = fore(s, 5, level = c(80,95)) 
```

哪个是python代码对？

Python 中没有`c`函数 - 有一个 R 函数，但此时你不在 R 中，你在 Python 中。

尝试（这是未经测试的）：

```
f = fore(s, 5, level = [80,95]) 
```

使用 Python 的方括号来制作 Python 列表对象。这可能会作为向量传递给 R。

另外，我认为这行不通。如果您[阅读文档](http://rpy.sourceforge.net/rpy2/doc-2.3/html/robjects_functions.html)，您会看到它`importr`会为您提供对包的引用，并使用点分表示法调用包中的函数。你需要做`fore.thingYouWantToCall(whatever)`。

# python - Python Turtle Graphics，如何在区间内绘制函数？

> ID：13317142
> 
> 赞同：2
> 
> 时间：2012-11-09T22:46:21.603
> 
> 标签：python, turtle-graphics

我需要在指定的时间间隔内绘制一个函数。函数为f1，如下代码所示，区间为[-7,-3]；[-1, 1]; [3, 7]，步长为 0.01。当我执行程序时，没有绘制任何内容。有任何想法吗？

```
import turtle
from math import sqrt

wn = turtle.Screen()
wn.bgcolor("white")
wn.title("Plotting")
mypen = turtle.Turtle()
mypen.shape("classic")
mypen.color("black")
mypen.speed(10)

while True:
try:
    def f1(x):
        return 2 * sqrt((-abs(abs(x)-1)) * abs(3 - abs(x))/((abs(x)-1)*(3-abs(x)))) * \
(1 + abs(abs(x)-3)/(abs(x)-3))*sqrt(1-(x/7)**2)+(5+0.97*(abs(x-0.5)+abs(x+0.5))-\
3*(abs(x-0.75)+abs(x+0.75)))*(1+abs(1-abs(x))/(1-abs(x)))

    mypen.penup()

    step=.01
    startf11=-7
    stopf11=-3
    startf12=-1
    stopf12=1
    startf13=3
    stopf13=7
    def f11 (startf11,stopf11,step):
        rc=[]
        y = f1(startf11)
        while y<=stopf11:
            rc.append(startf11)
            #y+=step
            mypen.setpos(f1(startf11)*25,y*25)
            mypen.dot()
    def f12 (startf12,stopf12,step):
        rc=[]
        y = f1(startf12)
        while y<=stopf12:
            rc.append(startf12)
            #y+=step
            mypen.setpos(f1(startf12)*25, y*25)
            mypen.dot()
    def f13 (startf13,stopf13,step):
        rc=[]
        y = f1(startf13)
        while y<=stopf13:
            rc.append(startf13)
            #y+=step
            mypen.setpos(f1(startf13)*25, y*25)
            mypen.dot()

    f11(startf11,stopf11,step)
    f12(startf12,stopf12,step)
    f13(startf13,stopf13,step)

except ZeroDivisionError:
    continue 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-20T00:27:49.947

我认为因为 f1 返回一个虚值。我从字面上看是 15 分钟前才开始学习 python，我从海龟开始。所以我可能不完全理解并离开......但总的来说我理解代码......

但是，是的，当您定义它时；这一点；你的第二个任期。

sqrt((-abs(abs(x)-1))

你试图得到一个负数的平方根。那不在笛卡尔平面上。不知道数学是如何解释它的，也不知道乌龟是如何解释它的，但这是我的第一个猜测......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-20T06:23:37.217

您正在尝试使用错误的绘图代码来绘制错误的函数。您需要单独调试它们，而不是一起调试。让我们从函数开始。如果我们查看所讨论的三个间隔的开始，-7、-1 和 3 并调用`f1()`它们，我们得到：

```
-7 -> 0.0
-1 -> division by zero
 3 -> division by zero 
```

首先，在循环开始之前，绘图永远不会像`f1(startf11)`-3`> stopf11`一样开始：

```
y = f1(startf11)
while y <= stopf11: 
```

在其他两种情况下，没有`y`由于除以零作为

```
except ZeroDivisionError:
    continue 
```

不能解决这个问题。所以没有情节。这可能无关紧要，因为绘图代码本身不起作用。所有三个`f1*`功能（它们是相同的，顺便说一句，这没有意义）做：

```
while y <= stop: 
```

但`y`永远不会改变，所以它是一个无限循环。注释掉`y += step`会有所帮助，但在代码中的位置不同。此外，它尝试为每个单独的屏幕像素绘制 100 个值！这可以通过更改坐标系来适应，但我不会在这里讨论，只需将每个屏幕像素的值减少到 10 个值以加快结果。

让我们使用更简单的测试函数重新开始绘制代码：

```
def f1(x):
    return x 
```

并让它成功地绘制出来。这是我对绘图代码的返工：

```
from turtle import Turtle, Screen

def f1(x):
    return x  # dummy test plot

wn = Screen()

mypen = Turtle(visible=False)
mypen.speed('fastest')
mypen.penup()

def f11(start, stop, step):

    y = f1(start)

    while y <= stop:

        try:
            mypen.setpos(f1(start) * 25, y * 25)
            mypen.dot()
            y += step

        except ZeroDivisionError:
            continue

step = 0.1  # increased from 0.01 for debugging/speed

startf11 = -7
stopf11 = -3

f11(startf11, stopf11, step)

startf12 = -1
stopf12 = 1

f11(startf12, stopf12, step)

startf13 = 3
stopf13 = 7

f11(startf13, stopf13, step)

wn.exitonclick() 
```

这给了我们测试结果：

[![在此处输入图像描述](../Images/6c9c57de7ff8ebf987a192deed3ca429.png)](https://i.stack.imgur.com/xHBqV.png)

这对我们的测试功能来说似乎是合理的。现在您可以更改坐标系以获得更高分辨率的绘图和/或`f1()`使用工作绘图仪调试您的功能。

# google-maps - kml 边界外的阴影区域

> ID：13317143
> 
> 赞同：0
> 
> 时间：2012-11-09T22:46:29.320
> 
> 标签：google-maps, google-maps-api-3

有没有人见过一种方法来对 KML 文件创建的边界/形状之外的谷歌地图区域进行着色/着色？

一个示例用法是只有边界/形状内的区域是交互式的（点击侦听器等），边界外的阴影区域将忽略除基本地图功能之外的所有操作，例如来回移动地图.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:30:55.413

这是我一直在研究的一个选项（并不完全有效，但这个概念可能会解决您的问题）：

1.  创建感兴趣区域的 KML 文件（在美国各州的示例中）
2.  通过添加整个世界的外部边界来反转它
3.  使用额外的 KmlLayer 将其显示在地图上或将其导入 FusionTable（如示例）
4.  确保在“反转”层上抑制 infoWindows

[示例](http://www.geocodezip.com/geoxml3_test/v3_FusionTables_State_invert_noClick.html) - 不适用于弗吉尼亚或阿拉斯加 - 夏威夷是有问题的。- 将最小缩放限制为 5。

# android - Android ICS 编译 MacOsx lion

> ID：13317145
> 
> 赞同：0
> 
> 时间：2012-11-09T22:46:41.777
> 
> 标签：android, osx-lion

您好我正在尝试在 Mac OS Lion 上构建 android 源代码。当我运行 make 它会引发一百万个错误。跟踪可在[http://pastebin.com/FfZEsycs](http://pastebin.com/FfZEsycs)获得。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T22:59:24.773

您必须按照[设置 Mac OS X 构建环境](http://source.android.com/source/initializing.html)中描述的步骤进行操作。

# c++ - 在 C++ 中使用堆栈

> ID：13317149
> 
> 赞同：2
> 
> 时间：2012-11-09T22:47:22.683
> 
> 标签：c++, stl, stack

对于一个类，我必须使用一个堆栈。据我所知，我创建了一个堆栈

```
#include <stack>
class c1
{
    stack<Point> openstack;
}; 
```

Point 是我创建的一个类，它有一个 x 和 y int 值来存储用于简单 2D 图形的点。我遇到的问题是，如果我这样做

```
Point p = openstack.pop(); 
```

我收到一个错误：“没有合适的 consturtor 可以从 void 转换为 Point”

Point 有一个 set 函数，它接受一个点并将使用传递的点来存储 x 和 y 值，但这也不起作用。

```
Point p;
p.set(openstack.pop()); // does not work 
```

有人可以告诉我我做错了什么吗？如果您需要信息，请询问 - 如果需要，我可以提供更多信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T22:49:47.310

`pop()`不返回值。它只是删除了最高值。它是这样声明的：

```
void pop(); 
```

要获得您需要调用的最高值`top()`。之后，您可以调用`pop()`.

```
Point p = openstack.top();
openstack.pop(); 
```

不返回弹出的值有[几个原因](http://cpptruths.blogspot.com/2005/10/why-does-stdstackpop-returns-void.html)。`pop()`

# android - 如何获得正确的上下文

> ID：13317150
> 
> 赞同：1
> 
> 时间：2012-11-09T22:47:24.657
> 
> 标签：android, android-layout, android-intent, android-widget

在此处的答案的帮助下，我设法通过为它们创建图像视图来将使用平板电脑拍摄的照片添加到线性布局中。浏览器加载了许多相同布局的副本，就像布局是自定义控件一样。每个布局都有一个按钮来拍摄照片并将其（或应该）添加到自己的线性布局中。

但....

拍完照片后，它会被放入线性视图，但它不在正确的页面中。

使用此代码，它被放置在线性布局中：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    Bitmap mBitmap;
    String _path = Environment.getExternalStorageDirectory().toString() + File.separator + "photo_" + String.valueOf(requestCode) + ".png";
    mBitmap = BitmapFactory.decodeFile(_path);
    if (mBitmap == null) {
        // bitmap still null
    } else {

        byte[] imageData = null;

        try {

            final int THUMBNAIL_SIZE = 64;

            Float width = new Float(mBitmap.getWidth());
            Float height = new Float(mBitmap.getHeight());
            Float ratio = width / height;
            mBitmap = Bitmap.createScaledBitmap(mBitmap, (int) (THUMBNAIL_SIZE * ratio), THUMBNAIL_SIZE, false);

            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            mBitmap.compress(Bitmap.CompressFormat.JPEG, 100, baos);
            imageData = baos.toByteArray();

        } catch (Exception ex) {

        }

        ImageView iv = new ImageView(this);
        LayoutParams params = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
        iv.setLayoutParams(params);
        iv.setImageBitmap(mBitmap);
        iv.setTag(_path);

        LinearLayout lvp = (LinearLayout) findViewById(R.id.lvPhotos);
        lvp.addView(iv);

    }

} 
```

显然我不应该将**它**用于创建的图像视图，但是如何获取单击相机按钮的页面的上下文？

rg，埃里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T22:56:35.157

好的，你的问题在这里：

```
LinearLayout lvp = (LinearLayout) findViewById(R.id.lvPhotos); 
```

您会找到放置在当前内容视图上的线性布局。你需要找到它应该在哪个线性...

```
LinearLayout lvp = (LinearLayout) someView.findViewById(R.id.lvPhotos); 
```

但我猜这不是一个很好的解决方案。您可能需要设置一个数组来保留您的视图实例，以便您可以更轻松地找到它们......

# python - 为什么我的 python scitools 0.9.0 版本缺少 scitools.filetable？

> ID：13317151
> 
> 赞同：2
> 
> 时间：2012-11-09T22:47:36.753
> 
> 标签：python

scitools 文档列出了几十个子模块，包括我想要的一个：scitools.filetable。然而在我的安装（Mac 10.5.8，python 2.7）中，大部分都丢失了。剩下的只有：

```
scitools.FloatComparison  
scitools.StringFunction   
scitools.author           
scitools.basics           
scitools.configdata       
scitools.debug 
scitools.easyviz          
scitools.errorcheck       
scitools.globaldata       
scitools.misc             
scitools.numpyutils
scitools.numpytools
scitools.std
scitools.sys
scitools.version 
```

今天第一次注意到这个问题时，我使用的是 scitools 0.8，所以我升级到了 0.9.0 ：

```
$ sudo pip install scitools --upgrade 
```

安装成功（根据 pip）。文件表仍然丢失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T22:53:32.543

I think it's simply that they're not all loaded by default:

```
>>> import scitools
>>> scitools.filetable
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'filetable'
>>> dir(scitools)
['FloatComparison', 'StringFunction', '__acknowledgments__', '__author__', '__builtins__', '__doc__', '__file__', '__name__', '__package__', '__path__', '__version__', '_numpyload', 'author', 'basics', 'configdata', 'debug', 'easyviz', 'errorcheck', 'globaldata', 'misc', 'numpytools', 'numpyutils', 'std', 'sys', 'version']
>>> import scitools.filetable
>>> scitools.filetable
<module 'scitools.filetable' from '/usr/local/lib/python2.7/dist-packages/scitools/filetable.pyc'> 
```

# c++ - Memory not mapped, c++ in R

> ID：13317155
> 
> 赞同：1
> 
> 时间：2012-11-09T22:47:51.343
> 
> 标签：c++, r, memory

I'm using the following c++ code

```
using namespace std;

#include <iostream>    
#include <stdio.h>    
#include <opencv/cv.h>    
#include <opencv2/core/core.hpp>    
#include <opencv2/highgui/highgui.hpp>    
#include <opencv/highgui.h>    
#include <opencv/cv.h>
#include <R.h>    
#include <Rinternals.h>    
#include <Rmath.h>

extern "C" { 
SEXP FiltroGaus(SEXP size1_r, SEXP size2_r, SEXP sigma_r) { 

    int size1 = INTEGER(size1_r)[0]; 
    int size2 = INTEGER(size2_r)[0]; 
    double sigma = REAL(sigma_r)[0]; 

} 
} 
```

This compiles without errors but when in R I type `.C("FiltroGaus",3,3,2)` The message is: `Errore: INTEGER() can only be applied to a 'integer', not a 'NULL'`.
If I type `.C("FiltroGaus",as.integer(3),as.integer(3),as.double(2))` The message is `Errore: INTEGER() can only be applied to a 'integer', not a 'closure'`.
while if I type `.Call("FiltroGaus",as.integer(3),as.integer(3),as.double(2))` the message is:

```
NULL     
 *** caught segfault ***     
address 0x200000be, cause 'memory not mapped'     
Possible actions: 
1: abort (with core dump, if enabled)     
2: normal R exit     
3: exit R without saving workspace     
4: exit R saving workspace 
```

# ios - 使用 registerNib 处理多个自定义 UITableViewCell 时遇到问题

> ID：13317158
> 
> 赞同：2
> 
> 时间：2012-11-09T22:47:56.367
> 
> 标签：ios, uitableview

在`viewDidLoad`我有：

```
[self.tableView registerNib:[UINib nibWithNibName:@"TypeOneCell" bundle:[NSBundle mainBundle]]
               forCellReuseIdentifier:@"CustomCellOne"]; 
```

和`cellForRowAtIndexPath`：

```
TypeOneCell *cell;

cell = [tableView dequeueReusableCellWithIdentifier:@"CustomCellOne"];
return cell; 
```

我想对`UITableViewController`我推送/弹出的所有表使用相同的类。所以我可能会为它创建一个枚举类型和一个变量。所以我会检查视图控制器是哪种类型，然后相应地进行调整。我的问题是我将如何以与上述相同的方式进行此操作。是 ( `viewDidLoad`) 的问题：

```
switch (self.theControllerType) {
         case CPTypeOne:
             [self.tableView registerNib:[UINib nibWithNibName:@"TypeOneCell" bundle:[NSBundle mainBundle]]
                   forCellReuseIdentifier:@"CustomCellOne"];
             break;
         case CPTypeTwo:
             [self.tableView registerNib:[UINib nibWithNibName:@"TypeTwoCell" bundle:[NSBundle mainBundle]]
                     forCellReuseIdentifier:@"CustomCellTwo"];
             break;
         default:
             break;
} 
```

然后（`cellForRowAtIndexPath`）：

```
switch (self.theControllerType) {
    case CPTypeOne {
        TypeOneCell *cell;
        cell = [tableView dequeueReusableCellWithIdentifier:@"CustomCellOne"];
        return cell;
        break;
    case CPTypeTwo {
        TypeOneCell *cell;
        cell = [tableView dequeueReusableCellWithIdentifier:@"CustomCellTwo"];
        return cell;
        break;
    default:
        break;
} 
```

或者这是错误的方法？有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T23:34:50.330

删除方法中的开关条件，`viewDidLoad`一切都会正常工作。

# spring - Spring在注入参数时尝试实例化接口

> ID：13317160
> 
> 赞同：0
> 
> 时间：2012-11-09T22:48:00.560
> 
> 标签：spring, spring-mvc

我希望你能帮我解决这个问题。

我在我的 web 应用程序中使用 Spring MVC (3.1.1)，并且面临一个奇怪的情况。我有这个简单的@Controller，它利用了 ServicioUsuario 服务，并且工作正常：

```
@Controller
@RequestMapping("/ajax")
public class ControladorAjax extends ControladorGenerico {

  @Autowired
  ServicioUsuario servicioUsuario;

  @RequestMapping("/check")
  public ResponseEntity<String> check(@RequestParam String email) {
    // Declarations and other operations omitted...
    // Use servicioUsuario
    servicioUsuario.doStuff();
    return response;
  }
} 
```

但是，如果我删除了@Autowiring，并尝试将 Spring 注入`servicioUsuario`作为参数（即通过将方法签名更改为：），`public ResponseEntity<String> check(@RequestParam String email, ServicioUsuario servicioUsuario)`整个事情就会中断，并且我在 Tomcat 的日志中得到了这种异常：

```
javax.servlet.ServletException: NestedServletException in java.lang.Thread.getStackTrace:: Request processing failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [com.package.ServicioUsuario]: Specified class is an interface 
```

我有这些接口：

```
com.package
  |-> Servicio.java (interface)
  |-> ServicioUsuario.java (interface that extends Servicio) 
```

和这些类：

```
com.package.impl
  |-> ServicioImpl.java (implements Servicio)
  |-> ServicioUsuarioImpl.java (@Service("servicioUsuario") that extends ServicioImpl implements ServicioUsuario) 
```

并配置 Spring 以扫描两个包：

```
<context:component-scan base-package="com.package
                                      com.package.impl" /> 
```

为什么 Spring 试图实例化接口而不是实现类？是我做错了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T15:10:47.550

根据官方文档的[*16.3.3.1 Supported method argument types*](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-arguments)，这是控制器方法可以采用的完整列表：

> *   请求或响应对象（Servlet API）。[...] 例如`ServletRequest`或`HttpServletRequest`.
>     
>     
> *   会话对象（Servlet API）：类型为`HttpSession`.
>     
>     
> *   `org.springframework.web.context.request.WebRequest`或`org.springframework.web.context.request.NativeWebRequest`。
>     
>     
> *   `java.util.Locale`对于当前的请求语言环境 [...]
>     
>     
> *   `java.io.InputStream`/`java.io.Reader`用于访问请求的内容。[...]
>     
>     
> *   `java.io.OutputStream`/`java.io.Writer`用于生成响应的内容。[...]
>     
>     
> *   `java.security.Principal`包含当前经过身份验证的用户。
>     
>     
> *   `@PathVariable`用于访问 URI 模板变量的注释参数。[...]
>     
>     
> *   `@RequestParam`用于访问特定 Servlet 请求参数的注释参数。[...]
>     
>     
> *   `@RequestHeader`用于访问特定 Servlet 请求 HTTP 标头的注释参数。[...]
>     
>     
> *   `@RequestBody`用于访问 HTTP 请求正文的注释参数。[...]
>     
>     
> *   `@RequestPart`用于访问“multipart/form-data”请求部分内容的注释参数。[...]
>     
>     
> *   `HttpEntity<?>`用于访问 Servlet 请求 HTTP 标头和内容的参数。[...]
>     
>     
> *   `java.util.Map`// `org.springframework.ui.Model`[ `org.springframework.ui.ModelMap`...]
>     
>     
> *   `org.springframework.web.servlet.mvc.support.RedirectAttributes`[...]
>     
>     
> *   命令或表单对象将请求参数绑定到 bean 属性（通过设置器）或直接绑定到字段，[...]
>     
>     
> *   `org.springframework.validation.Errors`/ `org.springframework.validation.BindingResult`[...]
>     
>     
> *   `org.springframework.web.bind.support.SessionStatus`[...]
>     
>     
> *   `org.springframework.web.util.UriComponentsBuilder`[...]

如您所见，Spring bean 不在这个（相当令人印象深刻的）列表中。为什么要通过控制器方法注入服务？他们从不改变。将它们注入一次并将它们分配给一个字段就足够了。

# visual-studio-2010 - 在 Gdiplus C++ 中使用 BrightnessContrast 类

> ID：13317161
> 
> 赞同：1
> 
> 时间：2012-11-09T22:48:05.703
> 
> 标签：visual-studio-2010, gdi+

我目前在我的 C++ 应用程序中使用 Graphics、Image、Color 和 Bitmap Gdi+ 类，但是每当我尝试使用[BrightnessContrast](http://msdn.microsoft.com/en-us/library/windows/desktop/ms534423%28v=vs.85%29.aspx)和[BrightnessContrastParams](http://msdn.microsoft.com/en-us/library/windows/desktop/ms534058%28v=vs.85%29.aspx)时，都会出现错误：

**在 Intellisense 中：**错误：命名空间“Gdiplus”没有成员“BrightnessContrast”

**编译时：** “BrightnessContrast”：不是“Gdiplus”的成员

是什么赋予了？我确实找到了一个[论坛帖子](http://social.msdn.microsoft.com/forums/en-US/windowssdk/thread/7cb9ce0e-1782-49b3-bc48-9549b8b0ab90/)，上面写着要在项目属性中向“附加清单依赖项：”添加一行，我这样做了，但它仍然没有用。该帖子继续说尝试查看 %windir%\winsxs 如果这不起作用，但我不知道如何理解该目录中的文件。我在 Windows7 64 位上使用 VisualStudio 2010。

另外，我知道我可以创建自己的亮度和对比度函数。我想知道为什么我不能使用 MSDN 上记录的内置类。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T23:03:23.657

这些成员仅在 GDI+ 版本 1.10 中可用，该版本首先与 Vista 一起发布。您必须明确选择使用它们。像这样：

```
#define GDIPVER 0x110
#include <gdiplus.h> 
```

请注意，当您执行此操作时，您的程序将无法在 XP 上运行。

# playframework-2.0 - Dependency error with slf4j-api;1.6.1

> ID：13317162
> 
> 赞同：1
> 
> 时间：2012-11-09T22:48:12.020
> 
> 标签：playframework-2.0, slf4j

I got a sample of facebook connection and I tried to figure it out on it. I over covered this folder as soon as I made new project. And I even over covered the sample of facebook folder on after tutorial folder.

Every 3 of project, I've done to figure out the problem.

I changed every written version to 1.6.1 by myself and I consoled "sbt clean update reload" but it didn't work

So after that I found some solution, but not for me on this page "[Unresolved Dependencies for a new play 2.0 scala project](https://stackoverflow.com/questions/9989449/unresolved-dependencies-for-a-new-play-2-0-scala-project)"

**Virtualeyes** said

'blowing away ~/.ivy2, ~/m2'

But I couldn't find 2 of them at all.

```
c:\play\connect>sbt clean update reload

c:\play\connect>set SCRIPT_DIR=C:\play\

c:\play\connect>java -Xmx512M -jar "C:\play\sbt-launch.jar" clean update reload

[info] Loading project definition from C:\play\connect\project
[info] Set current project to FacebookConnectTestUsingPlay2 (in build file:/C:/p
lay/connect/)
[success] Total time: 0 s, completed 2012\. 11\. 10 오전 6:07:50
[info] Updating {file:/C:/play/connect/}FacebookConnectTestUsingPlay2...
[info] Resolving org.hibernate.javax.persistence#hibernate-jpa-2.0-api;1.0.1.Fin

[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: org.slf4j#slf4j-api;1.6.1: configuration not found in org.slf4j#slf4j
-api;1.6.1: 'compile'. It was required from org.hibernate#hibernate-validator;4.
2.0.Final compile
[warn]  :: commons-codec#commons-codec;1.4: configuration not found in commons-c
odec#commons-codec;1.4: 'compile'. It was required from org.apache.httpcomponent
s#httpclient;4.1.2 compile
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[error] {file:/C:/play/connect/}FacebookConnectTestUsingPlay2/*:update: sbt.Reso
lveException: unresolved dependency: org.slf4j#slf4j-api;1.6.1: configuration no
t found in org.slf4j#slf4j-api;1.6.1: 'compile'. It was required from org.hibern
ate#hibernate-validator;4.2.0.Final compile
[error] unresolved dependency: commons-codec#commons-codec;1.4: configuration no
t found in commons-codec#commons-codec;1.4: 'compile'. It was required from org.
apache.httpcomponents#httpclient;4.1.2 compile
[error] Total time: 10 s, completed 2012\. 11\. 10 오전 6:08:00 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T00:17:18.860

我自己又得到了解决方案。

基于来自的样本

[https://github.com/pawank/Facebook-Integration-in-Play-2.0-using-scribe-library](https://github.com/pawank/Facebook-Integration-in-Play-2.0-using-scribe-library)

（因为它是针对版本 Play 2.0 而不是 2.0.4）

**1.在plugins.sbt** 改成addSbtPlugin **("play" % "sbt-plugin" % "2.0.4")**

**2.在build.properties** 更改为sbt.version **=0.11.3**

1.  输入**sbt**
2.  类型**播放**
3.  类型**编译**（在游戏控制台中）

4.  如果你有“ **commons-codec** ”和“ **org.slf4j** ”的问题，那么删除 C:\play**repository\local\org.slf4j** 和 C:\play**repository\local\commons-codec 中的每个文件**

5.  输入**“sbt clean update reload** ”，然后输入**“play compile** ”

6.  它会工作的

**（不要忘记Application.scala**中的更改

 **```
lazy val config = play.Play.application().configuration()
    val FBAppId = config.getString("fb.app.id")
    val FBAppSecret = config.getString("fb.app.secretkey")
    val FBAppCallback = config.getString("fb.app.callback") 
```

) 就像我说的那样，源是 2.0 版而不是最近的**

# php - .htacces: page got called multiple times

> ID：13317166
> 
> 赞同：2
> 
> 时间：2012-11-09T22:48:27.850
> 
> 标签：php, apache, .htaccess

I made a website that I run locally. I configured a my host file and virtual host:

```
Adress: website.dev
DocumentRoot:  /www/website/public_html 
```

I can access the website correctly.

In the public_html folder are the following files:

```
index.php
.htaccess 
```

I tried to configure an .htaccess file, but I am not very experienced with that so maybe I did something wrong.

The idea is that every request like 'website.dev/users' or 'website.dev/login' is processed by the index file so I can handle the given URL. (I think that the URL: website.dev doesn't need a rewrite, because it directly leads to the index.php because it is the documentRoot)

This works fine but I noticed, when I use a `rewriteRule` in the .htacces file that my pages got opened called multiple times.

This is my .htaccess file:

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d [OR]
RewriteCond %{REQUEST_FILENAME} -f

RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ index.php  [NC,L] 
```

When I comment out all the `rewriteRule` lines, and go to: website.dev, I see that my pages only got called once. What in the .htaccess file can cause the double page calls?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:18:35.987

Some of the conditions aren't required.

you're testing:

is the file size > 0 OR is a symbolic link, OR is directory OR is a regular file.

I've got the below which rewrites /users/id to: index.php?url=users/id

```
RewriteEngine on
RewriteCond %{SCRIPT_FILENAME} !-f
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteRule    !\.(jpg|css|js|gif|png)$    public/    [L]
RewriteRule !\.(jpg|css|js|gif|png)$ public/index.php?url=$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T14:33:21.590

**Solution:**

I found the problem by looking into the apache log files, so i noticed the webserver (wamp) looked for a .ico file (wamp logo) to show in the browsers addresbar, but in my project this file did not exists, that created a 404 and so the the index file was called again, i created the needed ico file in my project folder and everything worked like a charm.

# javascript - Change URL every X minutes

> ID：13317169
> 
> 赞同：-2
> 
> 时间：2012-11-09T22:48:50.880
> 
> 标签：javascript, jquery

Essentially, it is a slideshow using webpages. After 2 minutes the URL changes to a new page etc.

Home -> (2 minutes) -> Page B -> (2 minutes) -> Page C -> (2 minutes) -> Back to Home

And this continues to cycle through.

Does anyone know if a plugin for this exists and if not how would I go about this using javascript or jQuery. Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T22:57:27.653

60 秒后重定向到新 URL：

```
<meta http-equiv="REFRESH" content="60;URL=http://www.your-next-page.com/page.html"> 
```

不需要 JavaScript，尽管假设您正在动态更改页面内容而不是直接重定向，您可以使用 JavaScript 创建更令人愉悦的体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T22:51:53.760

当然，这有多个插件......但它就像使用计时器和重定向一样简单......如果你使用 jquery，你可以这样做：[http ://www.onextrapixel.com/2010/02/23 /如何使用-jquery-to-make-slick-page-transitions/](http://www.onextrapixel.com/2010/02/23/how-to-use-jquery-to-make-slick-page-transitions/)

# asp-classic - 在单个 ASP 字段中查询多个值

> ID：13317174
> 
> 赞同：0
> 
> 时间：2012-11-09T22:49:26.420
> 
> 标签：asp-classic

有没有办法从使用 ASP 的服务器请求多个记录并使用单个 URL 将它们全部显示在页面上？说点什么`http://foo.com/bar.asp?nums=1:2`？这样一页加载两页信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T22:52:48.257

您可以使用多个具有相同名称的查询字符串变量来执行此操作，例如：

> [http://foo.com/bar.asp?nums=1&nums=2](http://foo.com/bar.asp?nums=1&nums=2)

然后，在您的 asp 页面中：

```
<%
for i=1 to Request.QueryString("nums").Count
  Response.Write(Request.QueryString("n")(i) & "<br>")
  'obviously here, you would be querying your database
next
%> 
```

# ruby-on-rails - Mongoid performance bombs as concurrency increases

> ID：13317178
> 
> 赞同：3
> 
> 时间：2012-11-09T22:49:51.047
> 
> 标签：ruby-on-rails, mongodb, mongoid, resque, mongoid3

I have a Rails(3.2.8)/Mongoid(3.0.6) app which uses Resque workers to generate and send emails each morning. Each Resque job has to query a few collections to generate the email and then perform the actual send.

We have compound indexes set up to support the queries and executing a single job manually is very fast. However, as we increase the number of concurrent workers the time that it takes to generate emails blows up quickly. Tailing the log shows that the actual execution of the mongo queries increases dramatically.

*(note: I noticed this while evaluating Sidekiq, but the same happens with Resque; 3-4 Processors/Workers move along fine but throughput drops dramatically past that)*

We have 4 Thin processes on one box, Resque on another, and the MongoDB server on a third (all hosted within the same datacenter on Rackspace). The difference is noticeable even when moving from 4 to 8 workers. The Thins are also affected.

**Is there any low hanging fruit or obvious bits that I may be missing that could explain the performance issues I'm seeing? Any pointers or advice would be appreciated.**

# assembly - Using subtraction in assembly. Getting the wrong result

> ID：13317180
> 
> 赞同：0
> 
> 时间：2012-11-09T22:49:51.027
> 
> 标签：assembly

Why is the subtraction in _FN not working? It seems to be adding a constant large number to what I want the result to be. Not sure why. It is printing huge numbers, but the registers hold the correct values, so I am not sure why it is doing this.

I was wondering if there is something special with subl, or if the registers are actually holding memory locations or something.

```
// Pgm to 
// S. Renk 11/01

// *****************************************
// ****                                 ****
// *****************************************
    .text
    .globl _FN 

_FN:    // 
    // save old base ptr & get space for local vars
pushl %ebp
movl  %esp,%ebp

// create local vars
    subl  $12, %esp

movl 12(%ebp),%ecx
movl 8(%ebp),%ebx

pushl %ecx
pushl $FMT2
call _printf
addl $8,%esp

pushl %ebx
pushl $FMT2
call _printf
addl $8,%esp

subl %ebx,%ecx

pushl %ecx
pushl $FMT_INT
call _printf
addl $8,%esp

    // function body goes here

END:    // exit & return
// movl  -4(%ebp),%eax
leave
ret

// *******************************************
// ***********         MAIN       ************
// *******************************************

PROMPT:
.ascii "enter a number: \0"
FMT_INT:
.ascii "%d\0"
FMT2:
.ascii "My value is %d\n\0"
TEST:
.ascii "PRINT\n\0"

ANSWER:
.ascii "The answer is: %d\0"
.globl _main

// void main()
_main:  
    pushl %ebp                # save old frame ptr
movl  %esp,%ebp           # set new frame ptr & save loal var space

    // create local variable space
    subl $8, %esp

    // main body here

//prompts the user for the number to divide
pushl $PROMPT
call _printf

addl $4,%esp

//Create D1 Variable
leal -4(%ebp),%ebx #puts the address of D1 in ebx

//takes in the number to divide
pushl %ebx
pushl $FMT_INT
call _scanf

addl $8,%esp

//prompts the user for the number to divide by
pushl $PROMPT
call _printf

addl $4,%esp

//Create D2 Variable
leal -8(%ebp),%ecx #puts the address of D2 in ecx

//takes in the number to divide by
pushl %ecx
pushl $FMT_INT
call _scanf
addl $8,%esp

//tests to make sure variables are where they need to be
pushl -4(%ebp)
pushl $FMT2
call _printf
addl $8,%esp

pushl -8(%ebp)
pushl $FMT2
call _printf
addl $8,%esp

call _FN

// return
    leave
ret 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:07:38.833

添加`pushl %ecx; popl %ecx`两个 printf 调用以验证 %ecx 是否被丢弃

```
pushl %ecx     ;; Save a copy of ecx, eg. 10
...
pushl %ecx     ;; use stack to pass value of "10" to printf
pushl $FMT2    ;; pass the string (address) to printf
call _printf   ;; during the call _printf overwrites ecx:=167838424
addl $8,%esp   ;; the parameters are cleaned from the stack

pushl %ebx     ;; same here.
pushl $FMT2    ;;
call _printf   ;; ecx is again modified, but ebx maintains its value
addl $8,%esp   ;; clean the stack (by moving stack pointer)
...
popl %ecx      ;; here's the copy of original 10 (to be used for subl) 
```

请阅读有关[堆栈和帧指针](http://en.wikipedia.org/wiki/Call_stack)使用的更多信息。

# jquery - JQGrid 多值列连接选择器

> ID：13317181
> 
> 赞同：1
> 
> 时间：2012-11-09T22:49:58.890
> 
> 标签：jquery, jqgrid, selector, concatenation, xmlreader

这是我的问题：

我有一个这样的 XMLReader：

```
root: "response>claims",
row: "claim",
repeatitems: false,
id: "claimId" 
```

和这样的 XML 数据结构：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<response>
    <claims>
        <claim>
            <actions />
            <adjusters />
            <claimId>254</claimId>
            <parties />
            <claimSubmitInd>N</claimSubmitInd>
            <claimTypeCd>AUTO</claimTypeCd>
            <units>
                <unit>
                    <claimId>254</claimId>
                    <insertId>sselvaraj</insertId>
                    <insertTmstmp>2012-10-24 18:07:47.167</insertTmstmp>
                    <roleCategory>veh_1st</roleCategory>
                    <sourceSystemCd>FNOL</sourceSystemCd>
                    <unitCategory>veh</unitCategory>
                    <coverages />
                    <damages />
                    <unitDataType>veh</unitDataType>
                    <unitId>1</unitId>
                    <unitSubType>sch</unitSubType>
                    <unitType>veh</unitType>
                    <updateId>sselvaraj</updateId>
                    <updateTmstmp>2012-10-24 18:07:47.167</updateTmstmp>
                </unit>
                <unit>
                    <claimId>254</claimId>
                    <insertId>sselvaraj</insertId>
                    <insertTmstmp>2012-10-24 18:14:07.437</insertTmstmp>
                    <roleCategory>veh_1st</roleCategory>
                    <sourceSystemCd>FNOL</sourceSystemCd>
                    <unitCategory>veh</unitCategory>
                    <coverages />
                    <damages />
                    <unitDataType>veh</unitDataType>
                    <unitId>2</unitId>
                    <unitSubType>sch</unitSubType>
                    <unitType>veh</unitType>
                    <updateId>sselvaraj</updateId>
                    <updateTmstmp>2012-10-24 18:14:07.437</updateTmstmp>
                </unit>
                <unit>
                    <claimId>254</claimId>
                    <insertId>sselvaraj</insertId>
                    <insertTmstmp>2012-10-24 18:17:47.597</insertTmstmp>
                    <roleCategory>veh_1st</roleCategory>
                    <sourceSystemCd>FNOL</sourceSystemCd>
                    <unitCategory>veh</unitCategory>
                    <coverages />
                    <damages />
                    <unitDataType>veh</unitDataType>
                    <unitId>3</unitId>
                    <unitSubType>sch</unitSubType>
                    <unitType>veh</unitType>
                    <updateId>sselvaraj</updateId>
                    <updateTmstmp>2012-10-24 18:17:47.597</updateTmstmp>
                </unit>
            </units>
            <clmAdjUserId>0</clmAdjUserId>
            <companyCd>06</companyCd>
            <injuryInd>N</injuryInd>
            <insInjAsPasInd>N</insInjAsPasInd>
            <insInjAsPedInd>N</insInjAsPedInd>
            <keyedDt>2012-10-24</keyedDt>
            <lossTmUnkInd>N</lossTmUnkInd>
            <othPropDmgInd>N</othPropDmgInd>
            <polFireAtSceneInd>N</polFireAtSceneInd>
            <rptOnlyInd>N</rptOnlyInd>
            <towClaimInd>N</towClaimInd>
            <witnessInd>N</witnessInd>
        </claim>
    </claims>
    <request>
        <expand>claim,units</expand>
        <filter>claimId eq 254</filter>
        <format>xml</format>
        <orderBy>claimId desc</orderBy>
        <orderByCol>claimId</orderByCol>
        <orderByDir>desc</orderByDir>
        <top>10</top>
    </request>
</response> 
```

如果我的列是这样定义的：

```
 colModel: [
        { 
            name:  "claimId", 
            index:  "claimId", 
            width: 20, 
            xmlmap: ">claimId", 
            align: "right",
            sorttype: 'int',                
            hidden: false,
            searchoptions: {
                sopt: soptnums,
                attr: {style: "text-align: right;"}
            }                
        }
        ,{ 
            name:  "unitId", 
            index:  "unitId", 
            width: 20, 
            xmlmap: "units>unit>unitId", 
            align: "center",
            sorttype: 'int',                
            hidden: false,
            searchoptions: {
                sopt: soptnums,
                attr: {style: "text-align: center;"}
            }                
        } 
```

然后我看到声明 id 节点值很好，并且单元集合中 unitId 节点值的所有对应匹配项的串联。

所以，我看到类似的东西

```
Claim Id           Unit Id

254                123 
```

我的问题是：如何为 UnitId xmlmap 编写选择器，以便连接产生像“1|2|3”或“1 separator 2 separator 3”这样的字符串？我尝试了几件事，例如，我看到 xmlmap: "units>unit>unitId:first" 只显示 1（第一个匹配的节点）。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:15:46.467

我建议您在这种情况下使用`xmlmap`定义为函数。例如，在您的情况下，您可以使用

```
xmlmap: function (obj) {
    return $(">units>unit>unitId", obj).map(function() {
               return $(this).text();
           }).get().join("|");
} 
```

查看[演示](http://www.ok-soft-gmbh.com/jqGrid/Concatenating.htm)：

![在此处输入图像描述](../Images/1f3c9c8ba200d88bfe056c43fa639df9.png)

# php - 简单循环不起作用

> ID：13317185
> 
> 赞同：0
> 
> 时间：2012-11-09T22:50:28.817
> 
> 标签：php, if-statement

我正在从某个给我团队名称的地方删除信息。如果我这样做`echo $HomeTeam;`，我会得到“Man Utd”的价值。

但是当我这样做时..它不起作用（显示空白）。

```
$PlayerName = "Robin Van Persie"; //just to test that it's working
switch($PlayerName)
    {
    case "Robin Van Persie":
        if ($HomeTeam == "Man Utd") { echo $HomeTeam; } 
        break;
    default: echo "Player not in the list"; break;
    } 
```

这显示为空白...任何想法为什么？我尝试添加`$HomeTeam = strval($HomeTeam);`以将其转换为字符串，但没有任何区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T23:23:01.300

如果您要对其进行硬编码而不是将值存储在数据库中，那么这种使用数组的方法可能会让您感兴趣：

```
$search = "Robin Van Persie";

//Your data array, easyier to add to no
$teams = array(
    'Manchester United'=>array('Robin Van Persie',
                               'Wayne Rooney',
                               ),

    'Arsenal'=>array('Theo Walcott',
                     'Nicklas Bendtner',
                     ),             
);

$result=null;
foreach($teams as $team=>$players) {
    if(in_array($search,$players)) {
        $result = $team;
    }
}
//Robin Van Persie's team is Manchester United
echo ($result != null) ? $search.'\'s team is '.$result : 'Team for '.htmlentities($search).' not found.'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T22:54:02.653

`$HomeTeam` variable is not set, that's why it returns empty when printed. set the value to something like this & it should work.

```
$PlayerName = "Robin Van Persie"; //just to test that it's working
$HomeTeam = "Man Utd";
switch($PlayerName)
    {
    case "Robin Van Persie":
        if ($HomeTeam == "Man Utd") { echo $HomeTeam; } //Man Utd
        break;
    default: echo "Player not in the list"; break;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T23:01:57.170

尝试这个

```
$PlayerName = "Robin Van Persie"; //just to test that it's working
switch($PlayerName){
    case "Robin Van Persie":
        $HomeTeam ?  print($HomeTeam) : print("HomeTeam is not set");
    break;
    default: echo "Player not in the list"; break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T23:00:32.743

你`if ($HomeTeam == "Man Utd")`没有其他事情会发生，所以 $HomeTeam 不能等于`"Man Utd"`

# .net - 如何通过远程应用程序 .net 访问 Couchbase 服务器（在 Windows 7 上）

> ID：13317188
> 
> 赞同：2
> 
> 时间：2012-11-09T22:50:35.123
> 
> 标签：.net, networking, couchbase

我已经在 Windows 7 上安装了 couchbase 服务器。我在本地计算机上创建了一个与它通信的小型 c# .net 应用程序。我正在尝试创建一个可以做到这一点但来自远程计算机的应用程序。（从远程计算机连接到我计算机上的沙发底座）在 app.config 中我添加 //add uri="http://192.168.0.100:8091/pools"/ 我在路由器后面（大不同？）我该怎么办需要改变或做，才能从远程电脑连接？答案或链接将不胜感激，包括任何可能有帮助的东西。

*   我找不到这方面的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:28:38.370

只需更改 app.config 中的 URI。好吧，您可能还需要确保任何防火墙（或其他网络配置）也允许新客户端在端口 8091、8092 和 11210 上联系服务器。如果您有多个 couchbase 服务器等，请参阅 couchbase.com/docs 上的文档以获取有关可能需要打开哪些网络端口的详细信息。就是这样。

# javascript - 下拉选择更短更好的代码

> ID：13317190
> 
> 赞同：0
> 
> 时间：2012-11-09T22:50:56.730
> 
> 标签：javascript, jquery

我制作了一个 JSFiddle 只是为了更好地理解我的问题！

所以不需要在这里粘贴代码，一切都在小提琴上可见。生病粘贴JS部分。

[JS小提琴](http://jsfiddle.net/cLCTf/)

```
$('select[name="chooseGW"]').change(function(){
if ($(this).val() == "fileiceGW") {
    $('input#fileiceGW').css('display', 'block');
} else {
    $('input#fileiceGW').css('display', 'none');
}

if ($(this).val() == "adworkGW") {
    $('input#adworkGW').css('display', 'block');
} else {
    $('input#adworkGW').css('display', 'none');
}

if ($(this).val() == "cpaleadGW") {
    $('input#cpaleadGW').css('display', 'block');
} else {
    $('input#cpaleadGW').css('display', 'none');
}
});​ 
```

好的...所以我的问题是如何使此代码更好并缩短，因为我相信可以肯定...诸如 match data-gateway with specified id 之类的东西...

JSfiddle 中的代码工作得很好，但我相信它的重复太多了。

感谢您的帮助，谢谢！

PS 解释您的缩短代码如何工作以及指定的内容是什么，因此更受赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T22:55:10.853

最简单的更新是：

```
$('select[name="chooseGW"]').change(function() {
    var val = $(this).val();
    $('input').hide();
    $('#' + val).show();
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/cLCTf/1/)。

此版本假定您要`input`在显示选定元素时隐藏所有其他元素。如果您希望先前显示的`input`元素保持可见，请省略以 结尾的行`hide()`：

```
$('select[name="chooseGW"]').change(function() {
    var val = $(this).val();
    $('#' + val).show();
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/cLCTf/2/)。

当然，您可以省略创建（或多或少）不必要的变量：

```
$('select[name="chooseGW"]').change(function() {
    $('input').hide();
    $('#' + $(this).val()).show();
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/cLCTf/3/)。

参考：

*   [`hide()`](http://api.jquery.com/hide/).
*   [`show()`](http://api.jquery.com/show/).
*   [`val()`](http://api.jquery.com/val/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T23:26:26.040

```
<select name="chooseGW">
    <option value="noneGW">-- none --</option>
    <option value="fileiceGW">Fileice Gateway</option>
    <option value="adworkGW">Adworkmedia Gateway</option>
    <option value="cpaleadGW">CPALead Gateway</option>
</select>

<div style="display: inline;" >
    <input type="text" id="fileiceGW" style="display: none;" value="fileice()" /> 
    <input type="text" id="adworkGW" style="display: none;" value="adwork()" /> 
    <input type="text" id="cpaleadGW" style="display: none;" value="cpalead()" />
</div>​

var inputs = {
    fileiceGW: "input#fileiceGW",
    adworkGW: "input#adworkGW",
    cpaleadGW: "input#cpaleadGW"
};

$(function () {
    $('select[name="chooseGW"]').change(function () {
        $("input").hide();
        var val = $(this).val();
        var selector = inputs[val];
        $(selector).show();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T22:56:46.590

```
$('select[name="chooseGW"]').on('change', function() {
    $('input').hide();
    if(this.value !== 'noneGW') {
        $('#' + this.value).show();
    }
}); 
```

[http://jsfiddle.net/f0t0n/tHckA/](http://jsfiddle.net/f0t0n/tHckA/)

# extjs - 附加节点后，Treepanel 失去选择。（ExtJS / 拉力赛）

> ID：13317194
> 
> 赞同：0
> 
> 时间：2012-11-09T22:51:29.640
> 
> 标签：extjs, sdk, rally

我在 Ext JS 中创建了一个树形面板对象，它根据从服务器返回的子信息动态地将节点添加到树中。我遇到的问题是我希望能够从树中选择多个对象，并在展开节点后保留该选择。由于附加节点有效地改变了树，所以选择丢失了。添加新节点后，有什么方法可以保留此选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T01:46:17.417

您可以保存正在选择的节点的节点或 ID，然后在附加其他节点后重新选择它们。

# javascript - 访问 .html 中的元素

> ID：13317196
> 
> 赞同：2
> 
> 时间：2012-11-09T22:51:34.453
> 
> 标签：javascript, jquery, html, jquery-ui

可能是一个简单的问题，但这里有。

当我将鼠标悬停在地图上时，我的地图上有一个包含一些复选框的图例。我想将图例中的一些元素变成 jquery 按钮。例如，$("#unions").button(); 但是，我似乎无法访问图例中的元素。

我该怎么做？我的代码中有所有 jquery 文件，所以这不是问题。

```
var legend = '<ul>'
                       + '<li>   <b>            Organization Type:                  </b><li>'
                       + '<li> <input type="checkbox" id="unions" /> Unions '
                       + '&nbsp &nbsp &nbsp <input type="checkbox" name="radio" id="nonunions" /> Non-Unions </li>'
                       +'<li>    <b>            Sectors (Union and Non-Union):      </b> <li>'
                       + '<li class="item"><input type="checkbox" name="radio" id = "agriculture" /> Agriculture</li>'
                       + '<li class="item"><input type="checkbox" name="radio" id = "processing" /> Food Processing</li>'
                       + '<li class="item"><input type="checkbox" name="radio" id = "warehouse"/> Warehouse</li>'
                       + '<li class="item"><input type="checkbox" name="radio" id = "retail" /> Retail</li>'
                       + '<li class="item"><input type="checkbox" name="radio" id = "food" /> Food Service</li>'
                       + '<li>    <b>           Non-Union Organization Type:            </b> <li>'
                       + '<li class="item"><input type="checkbox" name="radio" id="advocacy" = "adv"/> Advocacy</li>'
                       + '<li class="item"><input type="checkbox" name="radio" id = "service"/> Service</li>'
                       + '<li class="item"><input type="checkbox" name="radio" id = "workcenter" /> Work Center</li>'
                       + '</ul>';

$(controlLegend).html(legend); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T22:55:42.950

`$("#unions").button();`如果`controlLegend`不是 DOM 的一部分，将无法工作。您可以使用[`.find()`](http://api.jquery.com/find/)来获取`controlLegend`.

```
$(controlLegend).find("#unions").button(); 
```

# django - 带有自我实例的 Django 模型方法

> ID：13317197
> 
> 赞同：3
> 
> 时间：2012-11-09T22:51:49.050
> 
> 标签：django, django-models

我正在尝试将一些功能逻辑移动到模型的方法中（而不是在视图中），我认为它属于：

```
class Spans(models.Model):
    snow = models.IntegerField()
    wind = models.IntegerField()
    exposure = models.CharField(max_length=1)
    module_length = models.IntegerField()
    max_roof_angle = models.IntegerField()
    building_height = models.IntegerField()
    importance_factor = models.IntegerField()
    seismic = models.DecimalField(max_digits=4, decimal_places=2)
    zone = models.IntegerField()
    profile = models.CharField(max_length=55)
    tilt_angle = models.IntegerField()
    span = models.DecimalField(max_digits=18, decimal_places=15)

    def get_spans(self, snow_load, wind_speed, module_length):
        """
        Function to get spans.
        """
        spans = self.objects.filter(
            snow=snow_load,
            wind=wind_speed,
            exposure='B',
            module_length__gte=module_length,
            max_roof_angle=45,
            building_height=30,
            importance_factor=1,
            seismic=1.2,
            zone=1,
            profile='worst'
        ).order_by('snow', 'module_length', 'span')
        return spans 
```

但是，我有点不确定如何调用它。在我尝试过的外壳中：

```
>>> possible_spans = Spans.get_spans(0, 85, 54) 
```

或者

```
>>> possible_spans = Spans.get_spans(Spans, 0, 85, 54) 
```

但我收到一个错误：

```
TypeError: unbound method get_spans() must be called with Spans instance as first argument (got int instance instead) 
```

或者

```
TypeError: unbound method get_spans() must be called with Spans instance as first argument (got ModelBase instance instead) 
```

我知道我在这里遗漏了 python 逻辑中的一些基本内容，但我不确定它是什么。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T22:53:55.370

Method needs to be called either with the instance, as the method call makes it as the default self arg. For example,

```
instance = Spans.objects.get(id=1)
instance.get_spans(0, 85, 54) 
```

Or if you can want to call using class itself. You would have to pass the instance manually

```
instance = Spans.objects.get(id=1)
Spans.get_spans(instance, 0, 85, 54) 
```

Update: What you are looking for could be achieved using a static method

```
@staticmethod
def get_spans(snow_load, wind_speed, module_length):
        """
        Function to get spans.
        """
        spans = Spans.objects.filter(
            snow=snow_load,
            wind=wind_speed,
            exposure='B',
            module_length__gte=module_length,
            max_roof_angle=45,
            building_height=30,
            importance_factor=1,
            seismic=1.2,
            zone=1,
            profile='worst'
        ).order_by('snow', 'module_length', 'span')
        return spans 
```

Now you could directly do,

```
Spans.get_spans(0, 85, 54) 
```

# android - 选择新图像后删除图像

> ID：13317204
> 
> 赞同：0
> 
> 时间：2012-11-09T22:52:15.467
> 
> 标签：android, android-layout, android-intent

我有一些用户可以选择的按钮，它会显示一个图像，但它似乎将图像堆叠在一起，而不是删除前一个图像。我在这里发现了一个类似的问题，但它似乎仍然不起作用。

这是我的完整代码：

```
import android.app.Activity;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnLongClickListener;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.SlidingDrawer;

public class Samples extends Activity{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE); 
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN); 
    setContentView(R.layout.samples);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
    final SlidingDrawer slider = (SlidingDrawer) findViewById(R.id.sD2);
    slider.animateOpen();

    Button next = (Button) findViewById(R.id.samplea);
    Button next1 = (Button) findViewById(R.id.sampleb);
    Button next2 = (Button) findViewById(R.id.samplec);
    Button next3 = (Button) findViewById(R.id.sampled);
    Button next4 = (Button) findViewById(R.id.samplee);
    Button next5 = (Button) findViewById(R.id.samplef);
    Button next6 = (Button) findViewById(R.id.sampleg);
    Button next7 = (Button) findViewById(R.id.sampleh);
    Button next8 = (Button) findViewById(R.id.samplei);
    Button next9 = (Button) findViewById(R.id.samplej);
    Button next10 = (Button) findViewById(R.id.samplek);
    Button next11 = (Button) findViewById(R.id.samplel);
    Button next12 = (Button) findViewById(R.id.samplem);
    Button next13 = (Button) findViewById(R.id.samplen);

    next.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            // You can turn this into a class variable
            final ImageView imageView = (ImageView) findViewById(R.id.iM2);
            imageView.setImageResource(R.drawable.samplea);
            slider.animateClose();
        }
    });

   next1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            final ImageView imageView = (ImageView) findViewById(R.id.iM2);
            imageView.setImageResource(R.drawable.sampleb);

        slider.animateClose();
        } 
    });

    next2.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            final ImageView imageView = (ImageView) findViewById(R.id.iM2);
            imageView.setImageResource(R.drawable.samplec);
        slider.animateClose();
        } 
    });

    next3.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            final ImageView imageView = (ImageView) findViewById(R.id.iM2);
            imageView.setImageResource(R.drawable.sampled);
        slider.animateClose();
        } 
    });

    next4.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            final ImageView imageView = (ImageView) findViewById(R.id.iM2);
            imageView.setImageResource(R.drawable.samplee);
        slider.animateClose();
        } 
    });

    next5.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            final ImageView imageView = (ImageView) findViewById(R.id.iM2);
            imageView.setImageResource(R.drawable.samplef);
        slider.animateClose();
        } 
    });

    next6.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            final ImageView imageView = (ImageView) findViewById(R.id.iM2);
            imageView.setImageResource(R.drawable.sampleg);
        slider.animateClose();
        } 
    });

    next7.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            final ImageView imageView = (ImageView) findViewById(R.id.iM2);
            imageView.setImageResource(R.drawable.sampleh);
        slider.animateClose();
        } 
    });

    next8.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            final ImageView imageView = (ImageView) findViewById(R.id.iM2);
            imageView.setImageResource(R.drawable.samplei);
        slider.animateClose();
        } 
    });

    next9.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            final ImageView imageView = (ImageView) findViewById(R.id.iM2);
            imageView.setImageResource(R.drawable.samplej);
        slider.animateClose();
        } 
    });

    next10.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            final ImageView imageView = (ImageView) findViewById(R.id.iM2);
            imageView.setImageResource(R.drawable.samplek);
        slider.animateClose();
        } 
    });

    next11.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            final ImageView imageView = (ImageView) findViewById(R.id.iM2);
            imageView.setImageResource(R.drawable.samplel);
        slider.animateClose();
        } 
    });

    next12.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            final ImageView imageView = (ImageView) findViewById(R.id.iM2);
            imageView.setImageResource(R.drawable.samplem);
        slider.animateClose();
        } 
    });

    next13.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            final ImageView imageView = (ImageView) findViewById(R.id.iM2);
            imageView.setImageResource(R.drawable.samplen);
        slider.animateClose();

        }
    });
        }
    } 
```

对于 xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent">

<ScrollView 
   android:layout_width="wrap_content"
   android:layout_height="wrap_content">
   <RelativeLayout 
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"> 

<ImageView
    android:id="@+id/iM2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:adjustViewBounds="true"
    android:scaleType="fitStart" />

</RelativeLayout>
</ScrollView>

<SlidingDrawer
    android:id="@+id/sD2"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:content="@+id/content"
    android:handle="@+id/handle" >

    <Button
        android:id="@+id/handle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Select Sample" />

    <RelativeLayout
        android:id="@+id/content"
        android:layout_width="match_parent"
        android:layout_height="match_parent" 
        android:background="@drawable/sampleshd">

        <ScrollView
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <RelativeLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >

                <Button
                    android:id="@+id/samplea"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:background="@drawable/sampleabutton" />

                <Button
                    android:id="@+id/sampleb"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_marginTop="20dp"
                    android:layout_below="@+id/samplea"
                    android:background="@drawable/samplebbutton" 
                    android:longClickable="true"/> 
```

它只是对所有其他按钮重复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T23:00:46.290

你有没有在你的 xml 中为这个 imageView 设置任何背景？因为背景和 src(imageResource) 是不同的......所以如果你在你的 xml 中设置图像的背景，并且如果你在你的 java 代码中设置它的资源，是的，你可能会看到不止一个图像。

# mysql - MySQL 按连续行分组

> ID：13317206
> 
> 赞同：4
> 
> 时间：2012-11-09T22:52:32.813
> 
> 标签：mysql

我有一个提要应用程序，我正在尝试对结果进行连续分组。我的表如下所示：

```
 postid | posttype | target | action     |        date         | title      | content
      1    |  userid  |  NULL  | upgrade    | 0000-01-00 00:00:00 | Upgraded 1 | exmple
      1    |  userid  |  NULL  | upgrade    | 0000-01-00 00:00:01 | Upgraded 2 | exmple
      1    |  userid  |  NULL  | downgrade  | 0000-01-00 00:00:02 | Downgraded | exmple
      1    |  userid  |  NULL  | upgrade    | 0000-01-00 00:00:03 | Upgraded   | exmple 
```

我希望的结果是：

```
 postid | posttype | target | action     |        date         | title      | content
      1    |  userid  |  NULL  | upgrade    | 0000-01-00 00:00:01 | Upgrade 1  | exmple,exmple
      1    |  userid  |  NULL  | downgrade  | 0000-01-00 00:00:02 | Downgraded | exmple
      1    |  userid  |  NULL  | upgrade    | 0000-01-00 00:00:03 | Upgraded   | exmple 
```

如您所见，因为升级 1 和升级 2 是连续发送的，所以它将它们组合在一起。“Action”表是一个参考，应该用于连续分组以及 postid 和 posttype。

我环顾四周，但没有看到任何像我这样的东西。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T04:38:21.247

这是另一个与 MySQL 变量一起使用且不需要 3 级嵌套深度的版本。第一个按 postID 和 Date 按顺序对记录进行预排序，并在 Post ID、Type 和/或操作中的任何一个值发生变化时为每个组分配一个序号。从那开始，它是一个简单的分组...没有将记录版本 T 与 T2 到 T3 进行比较...如果您想要 4 或 5 个标准怎么办...您是否需要嵌套更多条目？或者只是添加 2 个更多 @ sql变量比较测试...

您的呼叫效率更高...

```
select
      PreQuery.postID,
      PreQuery.PostType,
      PreQuery.Target,
      PreQuery.Action,
      PreQuery.Title,
      min( PreQuery.Date ) as FirstActionDate,
      max( PreQuery.Date ) as LastActionDate,
      count(*) as ActionEntries,
      group_concat( PreQuery.content ) as Content
   from
      ( select
              t.*,
              @lastSeq := if( t.action = @lastAction
                          AND t.postID = @lastPostID
                          AND t.postType = @lastPostType, @lastSeq, @lastSeq +1 ) as ActionSeq,
              @lastAction := t.action,
              @lastPostID := t.postID,
              @lastPostType := t.PostType
           from
              t,
              ( select @lastAction := ' ',
                       @lastPostID := 0,
                       @lastPostType := ' ',
                       @lastSeq := 0 ) sqlVars
           order by
              t.postid,
              t.date ) PreQuery
   group by
      PreQuery.postID,
      PreQuery.ActionSeq,
      PreQuery.PostType,
      PreQuery.Action 
```

这是我[到 SQLFiddle 示例的链接](http://sqlfiddle.com/#!2/bd385/7)

对于标题，您可能需要调整行...

group_concat( distinct PreQuery.Title ) 作为标题，

至少这将给 DISTINCT 标题连接......如果不通过让最大查询日期和其他元素获得与每个所有条件的最大日期相关联的一个标题，将整个查询再嵌套一层，就更难获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T01:34:01.900

您的表中没有主键，因此对于我的示例，我使用了`date`. 您应该创建一个自动增量值并使用它而不是`date`在我的示例中。

这是一个解决方案（[在 SQL Fiddle 上查看](http://sqlfiddle.com/#!2/c444f/11)）：

```
SELECT 
  postid,
  posttype,
  target,
  action,
  COALESCE((
    SELECT date
    FROM t t2
    WHERE t2.postid = t.postid
    AND t2.posttype = t.posttype
    AND t2.action = t.action
    AND t2.date > t.date
    AND NOT EXISTS (
      SELECT TRUE
      FROM t t3
      WHERE t3.date > t.date
      AND t3.date < t2.date
      AND (t3.postid != t.postid OR t3.posttype != t.posttype OR t3.action != t.action)
    )
  ), t.date) AS group_criterion,
  MAX(title),
  GROUP_CONCAT(content)
FROM t
GROUP BY 1,2,3,4,5
ORDER BY group_criterion 
```

它基本上是这样写的：

> 为每一行创建一个组标准，并在最后按它分组。
> 此标准是当前`date`行*之后的最高行，并且与当前*行具有相同的 postid、posttype 和 action，但它们之间可能没有一行不同的 postid、posttype 或 action。
> 换句话说，组标准是一组连续条目中出现的最高日期。

如果您使用正确的索引，它应该不会太慢，但是如果您有很多行，您应该考虑缓存这些信息。

# facebook - Facebook：应用程序配置不允许给定 URL

> ID：13317207
> 
> 赞同：4
> 
> 时间：2012-11-09T22:52:38.723
> 
> 标签：facebook, oauth

从本周末开始，我们的一些较旧的 Facebook 游戏无法加载。我认为这是由于游戏没有获得访问令牌而导致的问题，因此无法代表用户（即 /me 等）拨打电话。我在 Javascript 控制台中看到以下内容：

**应用程序配置不允许给定 URL。：应用程序的设置不允许一个或多个给定 URL。它必须与网站 URL 或画布 URL 匹配，或者域必须是应用程序域之一的子域。**

之后我收到此错误，我认为这是相关的：

**NetworkError：400 错误请求 - graph.facebook.com/me?fields=locale**

```
{
   "error": {
      "message": "An active access token must be used to query information about the current user.",
      "type": "OAuthException",
      "code": 2500
   }
} 
```

奇怪的是，这些游戏已经好几个月都没有被触及过。所以这让我认为 Facebook 用他们的 API 改变了一些东西。我在这里和搜索引擎上进行了广泛的搜索，但找不到任何解决方案。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T00:45:18.417

您使用的是旧版本的 JS SDK，它引用了旧的、列入黑名单的资源。

请始终使用从 connect.facebook.net 提供的副本。

# wpf - 在 XAML 中访问 XAML 对象变量

> ID：13317209
> 
> 赞同：0
> 
> 时间：2012-11-09T22:52:40.580
> 
> 标签：wpf, vb.net, xaml, variables

所以，我想要做的是访问我的表单的宽度和/或高度以在情节提要中使用。本质上，我有一个翻译变换动画来滑动本质上是两页的内容。动画适用于硬编码的 From/To 变量，但是我需要使用软变量来使动画从表单的左/右开始，无论它是什么大小。

```
<Storyboard x:Key="SlideLeftToRight"  
                TargetProperty="RenderTransform.(TranslateTransform.X)"
                AccelerationRatio=".4"
                DecelerationRatio=".4">
     <DoubleAnimation Storyboard.TargetName="PageViewer" Duration="0:0:0.6" From="WindowWidth" To="0"/>
     <DoubleAnimation Storyboard.TargetName="BorderVisual" Duration="0:0:0.6" From="0" To="NegativeWindowWidth"/>
</Storyboard> 
```

但是，我不知道该怎么做。任何帮助是极大的赞赏。

编辑：我猜它与以下内容有关：

```
From="{Binding Width, Source=MainWindow}" 
```

但是，当我尝试这样做时，我不知道如何使其消极。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:05:15.013

使用`ElementName=MainWindow`代替，并使用`ActualWidth`代替`Width`

`From="{Binding ActualWidth, ElementName=MainWindow}"/>`

（确保你也有`x:Name=MainWindow`在窗口。

如果您想要当前值的负数，则必须使用[Converter](http://zamjad.wordpress.com/2011/12/13/value-converter-and-markup-extension/)。

# android - Android：从主屏幕小部件启动应用程序活动的新实例

> ID：13317212
> 
> 赞同：2
> 
> 时间：2012-11-09T22:52:56.430
> 
> 标签：android

我在主屏幕上有一个应用小部件，其中包括一个启动基本设置活动的按钮。

当用户按下返回按钮时，如果主应用程序的堆栈中有一些活动，则返回按钮会将您带到应用程序中最近查看的活动，而不是返回主页。我为我的意图尝试了以下标志：

`settingsIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);`

`settingsIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_TASK_ON_HOME);`

`settingsIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);`

但没有任何运气。我可以使用任何标志或标志组合来执行此操作吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:16:39.697

下一个试试

> settingsIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); settingsIntent.addFlags(Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);

此标志在新任务中运行活动，退出后不将其添加到历史记录中。所以您的设置活动不会与主应用程序交叉

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T23:09:31.250

您需要执行以下操作：

```
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
```

您当前正在使用 setFlags ，当您需要这两个标志才能正常工作时，它会覆盖您之前设置的标志。

[您可以在http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)阅读此内容

# function - 在 Prolog 中使用最佳优先搜索解决 8 个难题

> ID：13317216
> 
> 赞同：3
> 
> 时间：2012-11-09T22:53:16.570
> 
> 标签：function, search, prolog, heuristics, sliding-tile-puzzle

正如标题所说，我必须制作一个 prolog 程序，使用最佳优先搜索解决 8 个难题，我是 Prolog 和 AI 的新手，所以我很难过。

现在我所拥有的是移动规则：

```
%% move left in the top row
move([X1,0,X3, X4,X5,X6, X7,X8,X9],
     [0,X1,X3, X4,X5,X6, X7,X8,X9]).
move([X1,X2,0, X4,X5,X6, X7,X8,X9],
     [X1,0,X2, X4,X5,X6, X7,X8,X9]).

%% move left in the middle row
move([X1,X2,X3, X4,0,X6,X7,X8,X9],
     [X1,X2,X3, 0,X4,X6,X7,X8,X9]).
move([X1,X2,X3, X4,X5,0,X7,X8,X9],
     [X1,X2,X3, X4,0,X5,X7,X8,X9]).

%% move left in the bottom row
move([X1,X2,X3, X4,X5,X6, X7,0,X9],
     [X1,X2,X3, X4,X5,X6, 0,X7,X9]).
move([X1,X2,X3, X4,X5,X6, X7,X8,0],
     [X1,X2,X3, X4,X5,X6, X7,0,X8]).

%% move right in the top row 
    move([0,X2,X3, X4,X5,X6, X7,X8,X9],
     [X2,0,X3, X4,X5,X6, X7,X8,X9]).
move([X1,0,X3, X4,X5,X6, X7,X8,X9],
     [X1,X3,0, X4,X5,X6, X7,X8,X9]).

%% move right in the middle row 
move([X1,X2,X3, 0,X5,X6, X7,X8,X9],
     [X1,X2,X3, X5,0,X6, X7,X8,X9]).
move([X1,X2,X3, X4,0,X6, X7,X8,X9],
     [X1,X2,X3, X4,X6,0, X7,X8,X9]).

%% move right in the bottom row
move([X1,X2,X3, X4,X5,X6,0,X8,X9],
     [X1,X2,X3, X4,X5,X6,X8,0,X9]).
move([X1,X2,X3, X4,X5,X6,X7,0,X9],
     [X1,X2,X3, X4,X5,X6,X7,X9,0]).

%% move up from the middle row
move([X1,X2,X3, 0,X5,X6, X7,X8,X9],
     [0,X2,X3, X1,X5,X6, X7,X8,X9]).
move([X1,X2,X3, X4,0,X6, X7,X8,X9],
     [X1,0,X3, X4,X2,X6, X7,X8,X9]).
move([X1,X2,X3, X4,X5,0, X7,X8,X9],
     [X1,X2,0, X4,X5,X3, X7,X8,X9]).

%% move up from the bottom row
move([X1,X2,X3, X4,X5,X6, X7,0,X9],
 [X1,X2,X3, X4,0,X6, X7,X5,X9]).
move([X1,X2,X3, X4,X5,X6, X7,X8,0],
     [X1,X2,X3, X4,X5,0, X7,X8,X6]).
move([X1,X2,X3, X4,X5,X6, 0,X8,X9],
     [X1,X2,X3, 0,X5,X6, X4,X8,X9]).

%% move down from the top row
move([0,X2,X3, X4,X5,X6, X7,X8,X9],
     [X4,X2,X3, 0,X5,X6, X7,X8,X9]).
move([X1,0,X3, X4,X5,X6, X7,X8,X9],
     [X1,X5,X3, X4,0,X6, X7,X8,X9]).
move([X1,X2,0, X4,X5,X6, X7,X8,X9],
     [X1,X2,X6, X4,X5,0, X7,X8,X9]).

%% move down from the middle row
move([X1,X2,X3, 0,X5,X6, X7,X8,X9],
     [X1,X2,X3, X7,X5,X6, 0,X8,X9]).
move([X1,X2,X3, X4,0,X6, X7,X8,X9],
     [X1,X2,X3, X4,X8,X6, X7,0,X9]).
move([X1,X2,X3, X4,X5,0, X7,X8,X9],
     [X1,X2,X3, X4,X5,X9, X7,X8,0]). 
```

（我知道使用列表有一种更简单的方法，但这对我有用）

我在互联网上找到的最好的第一个代码：[http ://www.cs.unm.edu/~luger/ai-final/code/PROLOG.best.html](http://www.cs.unm.edu/~luger/ai-final/code/PROLOG.best.html)

但是在最好的第一个代码中，有一个不运行的启发式函数：

```
go(Start, Goal) :- 
   empty_set(Closed),
   empty_sort_queue(Empty_open),
   heuristic(Start, Goal, H),
   state_record(Start, nil, 0, H, H, First_record),
   insert_sort_queue(First_record, Empty_open, Open),
   path(Open,Closed, Goal). 
```

我假设因为它没有在任何地方定义，我需要自己定义它，因为启发式会根据问题而改变。

所以我坚持使用“不合适的瓷砖”启发式来解决 8 谜题，因为它听起来比曼哈顿距离或其他任何东西更容易编码。但现在我被困在如何编程上，我到处搜索如何比较列表和如何添加变量，我有点做了这个，我不知道这是否可行：

```
heuristic([],[],H).
heuristic([Head1|Tail1],[Head2|Tail2], H):-
   not(samePlace(Head1,Head2))->H1 is H + 1,
   heuristic(Tail1, Tail2, H1). 
```

我的想法是它搜索开始列表的每个元素并将其与目标列表进行比较，然后如果它们不同，则将 1 添加到 H，即 H 表示不合适的瓷砖数量。

对于我还定义了“在同一个地方的瓷砖规则”：

```
samePlace([X,_,_,_,_,_,_],[X,_,_,_,_,_,_]).
samePlace([_,X,_,_,_,_,_],[_,X,_,_,_,_,_]). 
samePlace([_,_,X,_,_,_,_],[_,_,X,_,_,_,_]).
samePlace([_,_,_,X,_,_,_],[_,_,_,X,_,_,_]).
samePlace([_,_,_,_,X,_,_],[_,_,_,_,X,_,_]).
samePlace([_,_,_,_,_,X,_],[_,_,_,_,_,X,_]).
samePlace([_,_,_,_,_,_,X],[_,_,_,_,_,_,X]). 
(etc...) 
```

但当然我得到一个“错误：启发式/3：参数没有充分实例化”，我认为这意味着我从未初始化 H.

我不知道其余代码实际上是如何工作的，尽管我知道最好的第一个算法就像广度优先，但它根据启发式对队列进行排序，而不是仅仅添加它。

我的问题是： - 我是在正确的轨道上，还是我完全看错了那里的“启发式”功能是什么意思？- 如何初始化 H？- 我的“启发式”函数代码在语法上是否正确？

很抱歉发了这么长的帖子，但规则确实说我应该提供大量信息。我希望你能帮助我，感谢任何帮助，所以如果你知道这样做的任何其他方式，请随时发布它们，我是菜鸟。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T08:12:39.047

Prolog 中的( [->](http://www.swi-prolog.org/pldoc/man?predicate=send_arrow/2) )/2 已被引入以简化 if..then..else.. 逻辑建模，但与命令式语言有一个重要区别：如果没有 'else' 分支，它会在条件失败时失败。

现在你错过了 heuristic/3 中的 else 分支。这可能是有意的，但我认为如果 samePlace(Head1,Head2) 在某处为真，这将无法返回值，从而在调用代码中开始回溯。以我的经验，这通常是导致后续奇怪错误消息的原因，就像您报告的那样。

另一个问题是，即使谓词成功，您也无法“返回”值：改为尝试

```
heuristic([],[],0).
heuristic([Head1|Tail1],[Head2|Tail2], H):-
   heuristic(Tail1, Tail2, H1),
   (   not(samePlace(Head1,Head2))
   ->  H is H1 + 1
   ;   H is H1
   ). 
```

# iphone - NSUserDefaults 在两个不同的类中为键返回不同的值

> ID：13317217
> 
> 赞同：1
> 
> 时间：2012-11-09T22:53:20.360
> 
> 标签：iphone, ios, nsuserdefaults

非常简单.. 我有一个 iPhone 应用程序，如果他们以前在过去 30 天内登录过，我想自动登录。我将 NSDate 存储在 NSUserDefaults 中，如下所示（用户名/钥匙串中的密码）：

```
NSUserDefaults *currentDefaults = [NSUserDefaults standardUserDefaults];
NSDictionary *lastLogin = [NSDictionary dictionaryWithObject:[NSDate date] forKey:@"last_login"];
[currentDefaults setObject:lastLogin forKey:@"login_info"];
[currentDefaults synchronize]; 
```

现在有两个地方我检查这个 lastLogin 字典是否存在：

1) 我的代码中响应服务器抛出的 NotLoggedInExceptions 的部分。（注意：我已经添加了同步调用，尽管我相信它只在你写入值时才需要......）

```
NSUserDefaults *currentDefaults = [NSUserDefaults standardUserDefaults];
NSDictionary *loginInfo = [currentDefaults dictionaryForKey:@"login_info"];
[currentDefaults synchronize];
NSDate *lastSeen = [loginInfo objectForKey:@"last_login"];
NSLog(@"%@",loginInfo); 
```

2) 在人们看到的第一个屏幕上。由于延迟，等待未登录异常需要一段时间，所以如果默认值不存在，我想简单地抛出登录。

```
NSUserDefaults *currentDefaults = [NSUserDefaults standardUserDefaults];
NSDictionary *loginInfo = [currentDefaults dictionaryForKey:@"login_info"];
[currentDefaults synchronize]; 
```

发生的事情是应用程序打开。第一个屏幕通过第 2 步并认为先前的登录条目已保存，因此它允许代码向下传递到服务器级别。现在在服务器级别（步骤 1）lastLogin 字典为空！Aka 我的用户默认值在不同的类中产生两个不同的值......尽管我使用的是标准默认值。

有人遇到过这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T06:02:52.227

您无需`NSDate`将当前时间数据存储为字典，您只需在 NSuserDefoult 中将登录时间的当前时间数据存储为 -

**放**

```
 NSDate *myDate = [NSDate date];
    [[NSUserDefaults standardUserDefaults] setObject:myDate forKey:@"myDateKey"]; 
```

**得到**

```
 NSDate *myDate2 = (NSDate *)[[NSUserDefaults standardUserDefaults] objectForKey:@"myDateKey"];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"dd/mm/yyyy hh:mm:ss"];
    NSString *string=[dateFormatter stringFromDate:myDate2];

    NSLog(@"str get velue==%@",string ); 
```

并且作为您的代码，您设置如下代码来存储当前日期时间：-

> 将日期存储为 NSMutabel 字典而不是像下面这样的字典

```
NSUserDefaults *currentDefaults = [NSUserDefaults standardUserDefaults];
    NSMutableDictionary *lastLogin = [NSMutableDictionary dictionaryWithObject:[NSDate date] forKey:@"last_login"];
    [currentDefaults setObject:lastLogin forKey:@"login_info"];
    [currentDefaults synchronize];

    NSUserDefaults *currentDefaults2 = [NSUserDefaults standardUserDefaults];
    NSMutableDictionary *loginInfo2 = [[currentDefaults2 dictionaryForKey:@"login_info"]mutableCopy];
    //while you get NSUserdefoult Nsmutabe Dictionary set code like this line with **mutableCopy**

    NSLog(@"%@",loginInfo2); 
```

**输出是**

> "last_login" = "2012-11-10 06:04:28 +0000";

# twitter - Retrieving twitter data based on location

> ID：13317220
> 
> 赞同：0
> 
> 时间：2012-11-09T22:53:24.647
> 
> 标签：twitter

Is there a free way to pull a Twitter stream particular to a location? I could not find anything like this in their api docs.

I found something from DataSift, but their prices are way too high for what i need

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T22:57:25.530

你可以用推特搜索...

[https://api.twitter.com/1.1/search/tweets.json?q=techstars&geocode=40.1241,-102.2411,1mi](https://api.twitter.com/1.1/search/tweets.json?q=techstars&geocode=40.1241,-102.2411,1mi)

[https://dev.twitter.com/docs/api/1.1/get/search/tweets](https://dev.twitter.com/docs/api/1.1/get/search/tweets) 哪个需要身份验证？

# spring - Using Spring's MessageSource for setting FieldError default messages

> ID：13317221
> 
> 赞同：5
> 
> 时间：2012-11-09T22:53:28.130
> 
> 标签：spring, validation, spring-mvc, bean-validation

After my form backing object is validated I have a BindingResult, which contains a list of FieldError. Each FieldError has a defaultMessage. How is that message set and why doesn't it use my Spring MessageSource? I would like that default message to be derived from my Spring's MessageSource.

**EDIT:** I see that the error codes are being set correctly in the FieldError object. It's just the default message in that object is not coming from my MessageSource. For instance, when I enter a string for a field that is an int I want it to get my message from messages.properties:

```
typeMismatch=Invalid type was entered. 
```

The only way I can get that message is if I take my FieldError object and pass it into the MessageSource manually like so:

```
messageSource.getMessage(fieldError, null);  // This gets my message from messages.properties. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T02:37:54.990

如果您使用的是[Validator](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/validation/Validator.html)，则可以在 Validator 实现类的 MessageSource 中指定消息的键，通常使用 ValidationUtils 方法。[Spring 文档的第 6.2 节](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/validation.html#validator)有一个很好的例子。

如果您使用的不是 Validator（如 JSR-303 Bean Validation），Spring 也会尝试按照约定[解决错误代码。](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/validation.html#validation-conversion)

假设您有一个名为“地址”的表单支持对象，其中包含一个名为“邮政编码”的 int 字段。如果用户为 zipcode 字段输入了字符串，默认情况下 Spring 将使用[DefaultMessageCodesResolver](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/validation/DefaultMessageCodesResolver.html)并在 MessageSource 中查找名为“typeMismatch.address.zipcode”的键。如果它没有找到那个键，它将尝试“typeMismatch.zipcode”，然后是“typeMismatch.int”，然后是“typeMismatch”。

或者，您可以实现自己的[MessageCodesResolver](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/validation/MessageCodesResolver.html)。

# database - How does CouchDb handle fragmentation?

> ID：13317232
> 
> 赞同：1
> 
> 时间：2012-11-09T22:54:15.160
> 
> 标签：database, nosql, couchdb

How does CouchDb deal with growing documents that run out of contiguous disk space at the end? And moreover what is CouchDb's strategy for allocating disk space for documents where it has no idea how large they could end up being?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T19:36:17.270

CouchDB 使用仅追加策略来写入新数据。这意味着每个新文档“修订版”（请注意，这不是 VCS 的实际修订版）将写入文件末尾，并且之间没有重新分配。当您运行数据库压缩操作时，它会将所有实际修订写入新数据库文件，剥离旧文件并将删除文档作为坟墓标志。压缩所有文档后，它会透明地用压缩的文件替换旧的数据库文件。

[您可以在Riyad Kalla](https://plus.google.com/u/0/107397941677313236670/posts/CyvwRcvh4vv)关于[CouchDB 数据库格式](https://plus.google.com/u/0/107397941677313236670/posts/CyvwRcvh4vv)的文章中阅读更详细的说明。此外，您可能对他关于邮件列表的[讨论感兴趣。](http://mail-archives.apache.org/mod_mbox/couchdb-dev/201112.mbox/%3CCABn9xAEqet5BFjHz3m+OsT8+HMc4v3PSuqBT-GiF9OwP=ssjrQ@mail.gmail.com%3E)

# java - 错误：在过滤器链中的其他模式之前定义了通用匹配模式 ('/**')

> ID：13317238
> 
> 赞同：4
> 
> 时间：2012-11-09T22:54:57.913
> 
> 标签：java, spring, struts2, spring-security, security

我正在将 Java Struts 2 Web 应用程序从 Spring 2.5.x 迁移到 Spring 3.1.x。我正在使用带有所有必要模块的 Spring 3.1.2.RELEASE。我为 Spring Security 配置加载了这个 App Context 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:security="http://www.springframework.org/schema/security"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
                    http://www.springframework.org/schema/beans/spring-beans.xsd
                    http://www.springframework.org/schema/security 
                    http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <security:http realm="Company" access-decision-manager-ref="accessDecisionManager">
        <security:intercept-url pattern="/drivermaintenance.action" access="ACTION_DRIVER_NUMBER_INQUIRY,ACTION_MAINTAIN_DRIVER_NUMBER" />
        <security:intercept-url pattern="/exceptioncheckin.action" access="ACTION_EXCEPTIONS_INQUIRY" />
        <security:intercept-url pattern="/routesnotcheckedin.action" access="ACTION_ROUTES_NOT_CHECKED_IN_INQUIRY" />
        <security:intercept-url pattern="/checkininquiryfilters.action" access="ACTION_CHECK_IN_INQUIRY" />
        <security:intercept-url pattern="/checkininquirydata.action" access="ACTION_CHECK_IN_INQUIRY" />
        <security:intercept-url pattern="/acceptduplicateroute.action" access="ACTION_ACCEPT_DUPLICATE_ROUTE" />
        <security:intercept-url pattern="/drivercreditinquirydata.action" access="ACTION_DRIVER_CREDITS_INQUIRY" />
        <security:intercept-url pattern="/drivercreditinquirynavigationbaseddata.action" access="ACTION_DRIVER_CREDITS_INQUIRY" />
        <security:intercept-url pattern="/cashtochargeinquirydata.action" access="ACTION_CASH_TO_CHARGE_INVOICES_INQUIRY" />
        <security:intercept-url pattern="/cashtochargeinquiryfilter.action" access="ACTION_CASH_TO_CHARGE_INVOICES_INQUIRY" />
        <security:intercept-url pattern="/exitdrivercheckin.action" access="ACTION_EXIT_CHECKIN_LOGOUT,ACTION_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/routecheckin.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/startnewroutecheckin.action" access="ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/findroute.action" access="ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/saveroutecheckin.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/findcustomerdelivery.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/savecustomerdelivery.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/findoverage.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/updateoverage.action" access="ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/removeoverage.action" access="ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/navigatefromoverage.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/findcreditpickup.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/savecreditpickup.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/finddrivercredit.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/addlineitem.action" access="ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/updatecredit.action" access="ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/removecredit.action" access="ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/removelineitem.action" access="ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/creditissuedetails.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/findproductdescription.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/creditwholeinvoice.action" access="ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/canceldrivercredit.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/navigatefromdrivercredit.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/findsummarytable.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/findtripday.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/findtripdescriptiondetails.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/savetripday.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/drivercheckin.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/savedrivercheckin.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/finddrivercheckin.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/removeroutefromcheckin.action" access="ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/removetripfromcheckin.action" access="ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/removeadditionalservicefromcheckin.action" access="ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/removebackhaulfromcheckin.action" access="ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/findadditionalservice.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/saveadditionalservice.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/findbalancetime.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/savebalancetime.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/findbackhaul.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/findbackhauldetail.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/removebackhaul.action" access="ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/findbackhaulpolist.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/savebackhaul.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/drivercheckinindex.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/newdrivercheckin.action" access="ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/finddrivercollection.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/savedrivercollection.action" access="ACTION_DRIVER_CHECK_IN,ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/modifypayments.action" access="ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/modifyprimarypayment.action" access="ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/shiftamount.action" access="ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/modifydepositamount.action" access="ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/retrievecredit.action" access="ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/addpreviouspayment.action" access="ACTION_SAVE_DRIVER_CHECK_IN" />
        <security:intercept-url pattern="/removepreviouspayment.action" access="ACTION_SAVE_DRIVER_CHECK_IN" />

        <security:http-basic />
        <security:logout logout-url="/logout" logout-success-url="/logout.jsp" />

        <!-- Pages/items that don't require passwords.  It is particularly important that
         the ping page appear here, or the DCI monitoring will break. -->
        <security:intercept-url pattern="/ping.jsp"/>
        <security:intercept-url pattern="/accessDenied.jsp"/>
        <security:intercept-url pattern="/css/**"/>
        <security:intercept-url pattern="/images/**"/>
    </security:http>
</beans> 
```

但是我不断收到这个错误，它说我在其他模式之前定义了一个通用模式，因此其他模式将不匹配......但我没有：

```
ERROR 2012-11-09 17:10:58,167 [org.apache.catalina.core.ContainerBase.[Catalina].[serverurl.here.com].[/appDir]]: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.filterChainProxy': Invocation of init method failed; nested exception is java.lang.IllegalArgumentException: A universal match pattern ('/**') is defined  before other patterns in the filter chain, causing them to be ignored. Please check the ordering in your <security:http> namespace or FilterChainProxy bean configuration
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1455)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:469)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:383)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:283)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943)
    at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:778)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:504)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Caused by: java.lang.IllegalArgumentException: A universal match pattern ('/**') is defined  before other patterns in the filter chain, causing them to be ignored. Please check the ordering in your <security:http> namespace or FilterChainProxy bean configuration
    at org.springframework.security.config.http.DefaultFilterChainValidator.checkPathOrder(DefaultFilterChainValidator.java:49)
    at org.springframework.security.config.http.DefaultFilterChainValidator.validate(DefaultFilterChainValidator.java:39)
    at org.springframework.security.web.FilterChainProxy.afterPropertiesSet(FilterChainProxy.java:151)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    ... 36 more 
```

我迷路了，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T23:49:16.403

关于文档[Spring security](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#ns-minimal)，你应该试试这个：

```
 <http pattern="/css/**" security="none"/>
  <http pattern="/login.jsp*" security="none"/>

  <http auto-config='true'>
    <intercept-url pattern="/**" access="ROLE_USER" />
    <form-login login-page='/login.jsp'/>
  </http> 
```

我的建议是，您应该将以下块放在堆栈的顶部。

```
 <security:intercept-url pattern="/ping.jsp"/>
    <security:intercept-url pattern="/accessDenied.jsp"/>
    <security:intercept-url pattern="/css/**"/>
    <security:intercept-url pattern="/images/**"/>

    // here comes all other configurations
    <security:intercept-url pattern="/drivermaintenance.action" access="ACTION_DRIVER_NUMBER_INQUIRY,ACTION_MAINTAIN_DRIVER_NUMBER" />
    .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T17:38:22.573

好的，经过许多不同的眼睛查看该项目后，看起来它可能是一个依赖冲突问题。最有可能的候选者是我们仍在使用 3.1.2 Spring 版本时导入 spring-security-core-tiger-2.0.7 的地方。我们删除了此依赖项，因为它清理了许多其他依赖项冲突，并且应用程序按应有的方式启动。

谢谢大家的建议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T23:35:09.680

请参阅：[在过滤器链中的其他模式之前定义了通用匹配模式（'/**'）](https://jira.springsource.org/browse/SEC-2034)

# haskell - 什么是超态？

> ID：13317242
> 
> 赞同：95
> 
> 时间：2012-11-09T22:55:09.003
> 
> 标签：haskell, recursion, functional-programming, higher-order-functions

通读[这篇经典论文](http://www.google.com/search?q=functional+programming+with+bananas+lenses+envelopes+and+barbed+wire&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a)，我陷入了自相矛盾。不幸的是，该部分很薄，维基百科页面什么也没说。

我的 Haskell 翻译是：

```
para :: (a -> [a] -> b -> b) -> b -> [a] -> b
para f base = h
  where
    h []       =   base
    h (x:xs)   =   f x xs (h xs) 
```

但我不明白——我对类型签名或期望的结果没有任何直觉。

什么是变形，有哪些有用的例子？

* * *

是的，我已经看到了[这些](https://stackoverflow.com/questions/6941904/recursion-schemes-for-dummies) [问题](https://stackoverflow.com/questions/921972/what-are-zygo-meta-histo-para-futu-dyna-whatever-morphisms)，但它们没有直接涉及超态，并且只指出可能作为参考有用的[资源，但不能作为学习材料。](http://comonad.com/reader/2009/recursion-schemes/)

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-11-09T23:34:22.483

是的，就是这样`para`。与 catamorphism 比较，或`foldr`：

```
para  :: (a -> [a] -> b -> b) -> b -> [a] -> b
foldr :: (a ->        b -> b) -> b -> [a] -> b

para  c n (x : xs) = c x xs (para c n xs)
foldr c n (x : xs) = c x    (foldr c n xs)
para  c n []       = n
foldr c n []       = n 
```

有些人将超态称为“原始递归”，而变态 ( `foldr`) 称为“迭代”。

其中`foldr`'s 的两个参数为输入数据的每个递归子对象（这里是列表的尾部）给出一个递归计算的值，`para`'s 的参数获取原始子对象和从中递归计算的值。

一个很好地表达的示例函数`para`是列表的适当满足的集合。

```
suff :: [x] -> [[x]]
suff = para (\ x xs suffxs -> xs : suffxs) [] 
```

以便

```
suff "suffix" = ["uffix", "ffix", "fix", "ix", "x", ""] 
```

可能更简单的仍然是

```
safeTail :: [x] -> Maybe [x]
safeTail = para (\ _ xs _ -> Just xs) Nothing 
```

其中“cons”分支忽略其递归计算的参数，只返回尾部。懒惰地评估，递归计算永远不会发生，并且在恒定时间内提取尾部。

您可以很容易地定义`foldr`using ；定义from`para`有点棘手，但它肯定是可能的，每个人都应该知道它是如何完成的！`para``foldr`

```
foldr c n =       para  (\ x  xs  t ->           c x    t)       n
para  c n = snd . foldr (\ x (xs, t) -> (x : xs, c x xs t)) ([], n) 
```

`para`定义with的技巧`foldr`是重建原始数据的*副本*，以便我们在每一步都可以访问尾部的副本，即使我们无法访问原始数据。最后，`snd`丢弃输入的副本，只给出输出值。它不是很有效，但如果你对纯粹的表现力感兴趣，`para`给你的不超过`foldr`. 如果你使用这个`foldr`-encoded 版本`para`，那么`safeTail`毕竟将花费线性时间，逐个元素地复制尾部元素。

所以，就是这样：这`para`是一个更方便的版本，`foldr`它使您可以立即访问列表的尾部以及从中计算出的值。

在一般情况下，使用作为仿函数的递归固定点生成的数据类型

```
data Fix f = In (f (Fix f)) 
```

你有

```
cata :: Functor f => (f         t  -> t) -> Fix f -> t
para :: Functor f => (f (Fix f, t) -> t) -> Fix f -> t

cata phi (In ff) = phi (fmap (cata phi) ff)
para psi (In ff) = psi (fmap keepCopy   ff) where
  keepCopy x = (x, para psi x) 
```

再一次，这两者是相互定义的，`para`由`cata`相同的“复制”技巧定义

```
para psi = snd . cata (\ fxt -> (In (fmap fst fxt), psi fxt)) 
```

同样，`para`并不比 更具表现力`cata`，但如果您需要轻松访问输入的子结构，则更方便。

**编辑：**我记得另一个很好的例子。

考虑由`Fix TreeF`where给出的二叉搜索树

```
data TreeF sub = Leaf | Node sub Integer sub 
```

并尝试为二叉搜索树定义插入，首先是 a `cata`，然后是 a `para`。您会发现该`para`版本要容易得多，因为您需要在每个节点处插入一个子树，但保留另一个子树。

# iphone - 显示计时器，从日期开始计算天、小时、分钟和秒，然后实时递增

> ID：13317246
> 
> 赞同：0
> 
> 时间：2012-11-09T22:55:11.883
> 
> 标签：iphone, ios

我正在尝试显示一个计时器，该计时器从日期开始计算天数、小时、分钟和秒，然后在视图/页面上实时递增。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T01:50:56.397

最好的方法是阅读[*日期和时间编程指南*](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/DatesAndTimes/DatesAndTimes.html#//apple_ref/doc/uid/10000039i)以了解如何使用`NSDate`、`NSCalendar`和`NSDateComponents`类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T11:30:12.267

你可以这样做： -

```
- (void)viewWillAppear:(BOOL)animated 
    {
        [self start];
        [super viewWillAppear:YES];
    }

int currentTime;
- (IBAction)start{

     currentTime = 0;
     lbl=[[UILabel alloc]init];
    //creates and fires timer every second
    myTimer = [[NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(showTime) userInfo:nil repeats:YES]retain];
}
- (IBAction)stop{
    [myTimer invalidate];
    myTimer = nil;
}

- (IBAction)reset{

    [myTimer invalidate];
    lbl.text = @"00:00:00";
}

-(void)showTime{

    currentTime++; //= [lbl.text intValue];
    //int new = currentTime++;

   int secs = currentTime % 60;
int mins = (currentTime / 60) % 60;
int hour = (currentTime / 3600);
int day =   currentTime / (60 * 60 * 24);

lbl.text = [NSString stringWithFormat:@"%.2d:%.2d:%.2d:%.2d",day,hour, mins, secs];

NSLog(@"my lable == %@",lbl.text);

    NSLog(@"my lable == %@",lbl.text);
} 
```

# qt - Qt 项目中的版本号

> ID：13317249
> 
> 赞同：15
> 
> 时间：2012-11-09T22:55:56.220
> 
> 标签：qt, preprocessor, version, build-process

整个项目都需要版本号；在安装程序、代码、工具链等方面。我鄙视重复。我希望我的版本号存储在一个中央权威位置。

我正在使用 C/C++ 并在各种平台上使用 Qt。在 Qt 中，qmake 项目指定版本号，例如：

```
VERSION = 1.2.3 
```

在代码中，我在 Version.h 之类的标头中使用了类似的东西：

```
#define VERSION_MAJ 1
#define VERSION_MIN 2
#define VERSION_REV 3
#define VERSION_STRING \"VERSION_MAJ\" "." \"VERSION_MIN\" "." \"VERSION_REV\" 
```

我的安装程序工具链支持 C 预处理，因此我可以使用 Version.h 中指定的相同版本。但是，我不知道如何让 qmake 使用相同的版本号。我以为我可以预处理 pro 文件，但这不起作用，因为 # 字符意味着 pro 文件中的注释并且 C 预处理器会崩溃。

有人知道保持我的版本号集中的好方法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-09T23:09:33.243

我在构建系统中使用了类似的东西

```
#.pro file
#Application version
VERSION_MAJOR = 1
VERSION_MINOR = 0
VERSION_BUILD = 0

DEFINES += "VERSION_MAJOR=$$VERSION_MAJOR"\
       "VERSION_MINOR=$$VERSION_MINOR"\
       "VERSION_BUILD=$$VERSION_BUILD"

#Target version
VERSION = $${VERSION_MAJOR}.$${VERSION_MINOR}.$${VERSION_BUILD} 
```

之后，您可以在应用程序中将 VERSION_MAJOR 和其他宏用作普通宏。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T09:57:08.843

如果您希望能够将您的版本号存储在 ac 头文件中，您可以这样做，然后将它们导入到项目文件中的 Qt 项目变量中。像下面这样的东西应该可以工作：

版本.h：

```
#define MY_MAJOR_VERSION 3
#define MY_MINOR_VERSION 1 
```

.pro

```
HEADERS  += Version.h

VERSION_MAJOR = MY_MAJOR_VERSION
VERSION_MINOR = MY_MINOR_VERSION 
```

这样做的好处是，如果您需要从 Qt 编译项目的其他部分，则可以使用您的权威头文件。

# inno-setup - Inno Setup：如何为当前安装的 DirectX 版本以及是否安装 MS VC++ 2005 创建“检查：”功能

> ID：13317250
> 
> 赞同：0
> 
> 时间：2012-11-09T22:56:01.177
> 
> 标签：inno-setup

我正在创建自定义安装程序，并且在大多数情况下，我已经按照我想要的方式进行了设置，只是它缺少我想添加到设置中的两个功能。我已经进行了一些广泛的搜索，虽然我发现了很多类似的问题，但我无法对这些问题做出回应并根据我的特定需求对其进行修改并取得任何成功。

基本上我需要做的是为“检查：”创建一个自定义函数，用于检查当前安装的 DirectX 版本。我知道有“RegQueryStringValue”函数，并且我知道注册表中包含版本（HKLM\SOFTWARE\Microsoft\DirectX，版本）的密钥在哪里。我只是不知道如何实现代码来检查注册表中包含的版本，如果它报告的值小于 4.09.00.0904 以继续我在 [文件] 下输入的 DXSETUP。

我还想对“检查：”执行相同的例程，以便与 Visual C++ 2005 (x86) 一起使用。我相信这个会更简单，因为它只需要检查是否存在实际密钥（RegQueryKey？）而不是值。我相信 VC++ 2005 的关键是 HKLM\SOFTWARE\Microsoft\VisualStudio\8.0

如果有人可以帮助我，我将不胜感激，因为我已经为此搞砸了几个小时，试图将一些功能整合在一起，但没有取得多大成功。如果您需要我提供任何进一步的信息，我将非常乐意提供。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T23:08:01.280

在`CodePrepareToInstall.iss`. `InitializeSetup`显示如何检查注册表项是否存在，您可以在`DetectAndInstallPrerequisites`. 我添加了一个`CheckDXVersion`函数，您可以`Version`从 DirectX 注册表项中传递字符串，检查 4.9 或更高版本（未经测试！）您也可以使用。

```
; -- CodePrepareToInstall.iss --
;
; This script shows how the PrepareToInstall event function can be used to
; install prerequisites and handle any reboots in between, while remembering
; user selections across reboots.

[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program
DefaultGroupName=My Program
UninstallDisplayIcon={app}\MyProg.exe
OutputDir=userdocs:Inno Setup Examples Output

[Files]
Source: "MyProg.exe"; DestDir: "{app}";
Source: "MyProg.chm"; DestDir: "{app}";
Source: "Readme.txt"; DestDir: "{app}"; Flags: isreadme;

[Icons]
Name: "{group}\My Program"; Filename: "{app}\MyProg.exe"

[Code]
const
  (*** Customize the following to your own name. ***)
  RunOnceName = 'My Program Setup restart';

  QuitMessageReboot = 'The installation of a prerequisite program was not completed. You will need to restart your computer to complete that installation.'#13#13'After restarting your computer, Setup will continue next time an administrator logs in.';
  QuitMessageError = 'Error. Cannot continue.';

var
  Restarted: Boolean;

function InitializeSetup(): Boolean;
begin
  Restarted := ExpandConstant('{param:restart|0}') = '1';

  if not Restarted then begin
    Result := not RegValueExists(HKLM, 'Software\Microsoft\Windows\CurrentVersion\RunOnce', RunOnceName);
    if not Result then
      MsgBox(QuitMessageReboot, mbError, mb_Ok);
  end else
    Result := True;
end;

function CheckDXVersion(const VerString: String): Boolean;
var
  MajorVer, MinorVer: Integer;
  StartPos: Integer;
  TempStr: string;
begin
  (* Extract major version *)
  StartPos := Pos('.', VerString);
  MajorVer := StrToInt(Copy(VerString, 1, StartPos - 1);
  (* Remove major version and decimal point that follows *)
  TempStr := Copy(VerString, StartPos + 1, MaxInt);
  (* Find next decimal point *)
  StartPos := Pos('.', TempStr); 
  (* Extract minor version *)
  MinorVer := Copy(TempStr, 1, StartPos - 1);
  Result := (MajorVer > 4) or ((MajorVer = 4) and MinorVer >= 9));
end;

function DetectAndInstallPrerequisites: Boolean;
begin
  (*** Place your prerequisite detection and installation code below. ***)
  (*** Return False if missing prerequisites were detected but their installation failed, else return True. ***)

  //<your code here>

  Result := True;

  (*** Remove the following block! Used by this demo to simulate a prerequisite install requiring a reboot. ***)
  if not Restarted then
    RestartReplace(ParamStr(0), '');
end;

function Quote(const S: String): String;
begin
  Result := '"' + S + '"';
end;

function AddParam(const S, P, V: String): String;
begin
  if V <> '""' then
    Result := S + ' /' + P + '=' + V;
end;

function AddSimpleParam(const S, P: String): String;
begin
 Result := S + ' /' + P;
end;

procedure CreateRunOnceEntry;
var
  RunOnceData: String;
begin
  RunOnceData := Quote(ExpandConstant('{srcexe}')) + ' /restart=1';
  RunOnceData := AddParam(RunOnceData, 'LANG', ExpandConstant('{language}'));
  RunOnceData := AddParam(RunOnceData, 'DIR', Quote(WizardDirValue));
  RunOnceData := AddParam(RunOnceData, 'GROUP', Quote(WizardGroupValue));
  if WizardNoIcons then
    RunOnceData := AddSimpleParam(RunOnceData, 'NOICONS');
  RunOnceData := AddParam(RunOnceData, 'TYPE', Quote(WizardSetupType(False)));
  RunOnceData := AddParam(RunOnceData, 'COMPONENTS', Quote(WizardSelectedComponents(False)));
  RunOnceData := AddParam(RunOnceData, 'TASKS', Quote(WizardSelectedTasks(False)));

  (*** Place any custom user selection you want to remember below. ***)

  //<your code here>

  RegWriteStringValue(HKLM, 'Software\Microsoft\Windows\CurrentVersion\RunOnce', RunOnceName, RunOnceData);
end;

function PrepareToInstall(var NeedsRestart: Boolean): String;
var
  ChecksumBefore, ChecksumAfter: String;
begin
  ChecksumBefore := MakePendingFileRenameOperationsChecksum;
  if DetectAndInstallPrerequisites then begin
    ChecksumAfter := MakePendingFileRenameOperationsChecksum;
    if ChecksumBefore <> ChecksumAfter then begin
      CreateRunOnceEntry;
      NeedsRestart := True;
      Result := QuitMessageReboot;
    end;
  end else
    Result := QuitMessageError;
end;

function ShouldSkipPage(PageID: Integer): Boolean;
begin
  Result := Restarted;
end; 
```

# iis - 使用 bigquery 分析 iis 日志

> ID：13317253
> 
> 赞同：0
> 
> 时间：2012-11-09T22:56:28.947
> 
> 标签：iis, google-bigquery

使用 bigquery加载和分析 IIS 日志（以[扩展日志文件格式）的任何首选方式/示例？](http://www.w3.org/TR/WD-logfile.html)我们还需要对其进行自动分区。我们可以定期获取日志文件

我们想要分析特定功能的使用情况，该功能可以通过特定 URL 模式和访问者通过网站获取的最流行流量的转换漏斗来识别，以确定他们从哪里进入和离开。可以通过 cookie 中的唯一 ID（存储在日志中）来识别访问者，并且可以将页面与引用者链接（也存储在日志中）。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T00:15:10.443

将 CSV 格式的文件加载到 BigQuery 中很容易。[支持CSV 和 JSON 格式](https://developers.google.com/bigquery/docs/import#dataformats)的源数据。

我不是使用 IIS 的专家，但将平面日志数据加载到 BigQuery 的最快方法是从 CSV 开始。IIS 日志格式使用起来非常简单，但您可能需要保存一个步骤并将其导出为 CSV。快速搜索显示，很多人使用[LogParser](http://www.iis.net/downloads/community/2010/04/log-parser-22)（注意：我自己从未使用过）将 IIS 日志转换为 CSV。也许试试这个或类似的工具。

至于“自动分区”您的 BigQuery 数据集表 - BigQuery 不会自动执行此操作，但为您导出的每批 IIS 日志创建一个新表相当容易。

根据您分析的数据量，您应该每天或每小时创建一个新的 BigQuery 表。

[使用BigQuery 命令行工具](https://developers.google.com/bigquery/docs/hello_bigquery)时，在命令行上编写脚本非常容易。创建一个新的 BigQuery 加载作业，并根据您拥有的每个日志数据时间片使用新的表名。

换句话说，您的 BigQuery 表应如下所示：

```
mydataset.logs_2012_10_29
mydataset.logs_2012_10_30
mydataset.logs_2012_10_31
etc... 
```

有关更多信息，请务必通读 BigQuery 文档以[导入数据](https://developers.google.com/bigquery/docs/import#import)。

# ruby-on-rails - 摩卡期待法

> ID：13317262
> 
> 赞同：1
> 
> 时间：2012-11-09T22:57:27.120
> 
> 标签：ruby-on-rails, rspec, mocha.js

所以我的情况是：我有两个具有相同结构的模块：

```
module Module1
  class Config

    def fee_rate
      2
    end
  end
end 
```

因此，比如说，Module2 将具有带有方法 fee_rate 的类 Config，只是具有不同的值（这些实际上是在 rails 引擎中实现的，但这无关紧要）

然后我的模型可以使用 Module1 或 Module2 来获得这样的费率值：

```
def config
  @config ||= "#{module_name.titleize}::Config".constantize.new
  @config
end

def get_value
  config.get_fee * some_other_value
end 
```

我要测试的是是否在正确的类上调用了 get_fee 函数：

```
"#{model.module_name.titleize}::Config".constantize.any_instance.expects(:get_fee).at_least_once
model.get_value 
```

当我调用 get_value 时，在线上出现以下错误 - nil:NilClass 的未定义方法“*”。我现在完全迷路了，所以我很感激任何帮助和想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T23:05:17.690

通过为您设置期望，`get_fee`可以防止发生实际的方法调用。因为您没有为期望设置返回值，例如`expects(:get_fee).at_least_once.returns(3)`它返回 nil，因此出现错误消息。

通过完全消除期望并检查是否创建了正确类型的配置类，您可能会取得更大的成功，例如

```
model.get_value
assert_equal "#{model.module_name.titleize}::Config".constantize, 
             model.config.class 
```

# java - JTextPane 中的 HTML 表格显示奇怪的“表单”框

> ID：13317265
> 
> 赞同：2
> 
> 时间：2012-11-09T22:57:41.177
> 
> 标签：java, html, html-table, jtextpane

我正在尝试将 html 表放在可编辑的 JTextPane 中。因此，您可以像编辑 Excel 表格一样编辑其中的表格。当我尝试这样做时，这些奇怪的 col 和 colgroup 框不断出现。此外，桌子似乎不像他们应该的那样工作......

这是一个例子：

![](../Images/ef0dd6c97ea11e2b3a4b35b7081f9804.png)

```
 import java.awt.BorderLayout;
            import java.awt.EventQueue;
            import javax.swing.JFrame;
            import javax.swing.JPanel;
            import javax.swing.JTextPane;
            import javax.swing.border.EmptyBorder;
            import javax.swing.text.Document;
            import javax.swing.text.html.HTMLEditorKit;
            import javax.swing.text.html.StyleSheet;

            public class htmlEditor2 extends JFrame {
                private JPanel contentPane;
                public static void main(String[] args) {
                    EventQueue.invokeLater(new Runnable() {
                        public void run() {
                            try {
                                htmlEditor2 frame = new htmlEditor2();
                                frame.setVisible(true);
                            } catch (Exception e) {
                                e.printStackTrace();
                            }
                        }
                    });
                }
                public htmlEditor2() {
                    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                    setBounds(100, 100, 450, 300);
                    contentPane = new JPanel();
                    contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
                    contentPane.setLayout(new BorderLayout(0, 0));
                    setContentPane(contentPane);
                    Foo f = new Foo();
                    f.setText("<html><body><table border=\"1\" width=\"985\" cellpadding=\"3\" cellspacing=\"0\" style=\"table-layout: fixed; border-collapse: collapse; border-width: 0px; border-color: #010101; \"><colgroup><col width=\"328\"></col>        <col width=\"328\"></col>        <col width=\"328\"></col>    </colgroup><tr><td align=\"left\" valign=\"top\" width=\"321\" style=\"border: solid #010101 1px; \"><div align=\"left\"><font face=\"Arial\"><span style=\"font-size:8pt\">row 1</span></font></div></td><td align=\"left\" valign=\"top\" width=\"321\" style=\"border: solid #010101 1px; \"><div align=\"left\"><font face=\"Arial\"><span style=\"font-size:8pt\">row2</span></font></div></td><td align=\"left\" valign=\"top\" width=\"321\" style=\"border: solid #010101 1px; \"><div align=\"left\"><font face=\"Arial\"><span style=\"font-size:8pt\">row3</span></font></div></td></tr><tr><td align=\"left\" valign=\"top\" width=\"321\" style=\"border: solid #010101 1px; \"><div align=\"left\"><span style=\"font-size: 8pt;\">&nbsp;</span></div></td><td align=\"left\" valign=\"top\" width=\"321\" style=\"border: solid #010101 1px; \"><div align=\"left\"><span style=\"font-size: 8pt;\">&nbsp;</span></div></td><td align=\"left\" valign=\"top\" width=\"321\" style=\"border: solid #010101 1px; \"><div align=\"left\"><span style=\"font-size: 8pt;\">&nbsp;</span></div></td></tr><tr><td align=\"left\" valign=\"top\" width=\"321\" style=\"border: solid #010101 1px; \"><div align=\"left\"><span style=\"font-size: 8pt;\">&nbsp;</span></div></td><td align=\"left\" valign=\"top\" width=\"321\" style=\"border: solid #010101 1px; \"><div align=\"left\"><span style=\"font-size: 8pt;\">&nbsp;</span></div></td><td align=\"left\" valign=\"top\" width=\"321\" style=\"border: solid #010101 1px; \"><div align=\"left\"><span style=\"font-size: 8pt;\">&nbsp;</span></div></td></tr></table><div align=\"left\">&nbsp;&nbsp;</div></body></html>");
                    contentPane.add(f);
                }
                class Foo extends JTextPane {
                    public Foo() {
                        super();
                        HTMLEditorKit kit = new HTMLEditorKit();
                        setEditorKit(kit);
                        StyleSheet styleSheet = kit.getStyleSheet();
                        styleSheet.addRule(""); //in case I need to add a CSS
                        Document doc = kit.createDefaultDocument();
                        setDocument(doc);
                    }
                }
            } 
```

我会粘贴一个格式良好的 html 版本，但我不知道如何在此处执行此操作...

所以是的..我只想知道如何摆脱我桌子上那些奇怪的 colgroup 和 col 框，以及如何让桌子正常工作！

**更新：事实证明，我从中检索 html 表的服务会自动格式化 html 表以包含`<colgroup>`and`<col>`标记。所以我有一些后续问题： JTextPane 是否支持当前的 html 版本？当然，如何让 JTextPane 不显示那些奇怪的框？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:04:29.927

`JTextPane`仅支持 HTML 3.2 标记，因此较新的标签不会像在最新浏览器中那样出现。

**[您可以使用Cobra](http://lobobrowser.org/cobra/getting-started.jsp)**^(等 3 rd)方库来显示内容，而不是尝试修改 HTML ：

```
HtmlPanel panel = new HtmlPanel();
new SimpleHtmlRendererContext(panel, new SimpleUserAgentContext()).navigate("http://myhost/mytable.jsp"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T19:25:40.813

我的解决方案是只使用 String.replaceAll() 并删除我不想要的所有内容。我知道这看起来很奇怪.. buuut。目前。这就是我的解决方案。感谢 Reimeus 的回答。当我有机会时，我将不得不研究您的解决方案。

# html - Web 音频 API 服务器端？

> ID：13317270
> 
> 赞同：11
> 
> 时间：2012-11-09T22:58:22.640
> 
> 标签：html, node.js, audio, webkit, web-audio-api

是否可以在服务器端使用 Web Audio API（例如在 Node.js 中）？我想“离线”处理我的音频文件以应用音频效果（[https://stackoverflow.com/a/8101383/553341](https://stackoverflow.com/a/8101383/553341)）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-30T07:27:14.157

看看[https://github.com/sebpiq/node-web-audio-api](https://github.com/sebpiq/node-web-audio-api)

大多数 AudioNode 都没有实现，但将来它可能会变得有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T15:00:26.920

暂时没有，没有。您基本上必须调整 webkit 源代码并自己完成所有的工作。

# ios - UITableViewCell 中 UILabel 的框架（和其他视图的框架）的动画

> ID：13317275
> 
> 赞同：0
> 
> 时间：2012-11-09T22:59:06.850
> 
> 标签：ios, uitableview, quartz-core

请帮忙。试图让帧位置的动画在 UITableViewCell 内工作，特别是我试图移动默认的 UILabel (cell.textLabel)。但是，无论我使用什么技术，我都无法移动单元格内的任何视图。颜色和 alpha 动画的工作原理如下面的代码所示。

提前欢呼寻求帮助。

安迪

这是我正在使用的代码：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.section == 0 && indexPath.row == 0) {

        UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

        CGRect textLabelFrame = cell.textLabel.frame;
        textLabelFrame.origin.x = -textLabelFrame.size.width;

       [UIView animateWithDuration:0.5
            delay:0.0
            options:UIViewAnimationCurveEaseOut
            animations:^{
                cell.textLabel.frame = textLabelFrame; // THIS DOESN'T WORK - HELP!
                cell.imageView.frame = CGRectOffset(cell.imageView.frame,0,0); // EVEN TRYING TO MOVE IMAGEVIEW DOESN'T WORK
                cell.textLabel.alpha = 0; // This animates
                cell.imageView.backgroundColor = [UIColor redColor]; // This animates
            }
            completion:^(BOOL finished){
                NSLog(@"Done!");
        }];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T23:33:41.303

我认为不可能在标准单元格中重新定位默认标签或图像视图。如果你想这样做，你应该将你自己的子视图添加到单元格的 contentView 中，并用它们做动画。

# javascript - jquery获取当前html文件的名称

> ID：13317276
> 
> 赞同：29
> 
> 时间：2012-11-09T22:59:11.360
> 
> 标签：javascript, jquery, html

如果你在，`http://www.cnn.com/2012/11/09/opinion/brown-pakistan-malala/index.html`你能让 Jquery 抓住`index.html`吗？

或者如果你在`http://www.washingtonpost.com/politics/decision2012/supreme-court-to-review-key-section-of-voting-rights-act/2012/11/09/dd249cd0-216d-11e2-8448-81b1ce7d6978_story.html`让它回来`dd249cd0-216d-11e2-8448-81b1ce7d6978_story.html`？

对于非扩展定义的页面，例如当前页面，`http://stackoverflow.com/questions/13317276/jquery-to-get-the-name-of-the-current-html-file`它可以返回“目录”结构中的最后一个“文件”，例如：`jquery-to-get-the-name-of-the-current-html-file`

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-09T23:00:36.850

虽然不是 JQuery，但您可以使用以下方式访问它：

`document.location.href.match(/[^\/]+$/)[0]`

或者

`document.location.pathname.match(/[^\/]+$/)[0]`在不需要的锚点/哈希标签 (#) 的情况下。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-11-09T23:14:08.273

```
location.pathname.split('/').slice(-1)[0] 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-06-06T04:16:48.530

不需要 jQuery。这将为您提供 URL 路径的最后一段（最后一个斜杠之后的位）：

```
var href = document.location.href;
var lastPathSegment = href.substr(href.lastIndexOf('/') + 1); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-11-09T23:02:10.710

```
function getCurentFileName(){
    var pagePathName= window.location.pathname;
    return pagePathName.substring(pagePathName.lastIndexOf("/") + 1);
} 
```

# javascript - 在 JavaScript 中格式化 getDate()

> ID：13317280
> 
> 赞同：1
> 
> 时间：2012-11-09T22:59:34.777
> 
> 标签：javascript, getdate

我一直在玩这个 JavaScript 以在我的日期输出中获得正确的格式，但没有运气。我需要此代码显示为月日，年。截至目前，它显示 dd/mm/yy。

下面是我正在使用的脚本。

```
<script>
var tD = new Date();
var datestr = tD.getDate() + (tD.getMonth()+ 1)  + ", " + tD.getFullYear();
document.write("<input type='hidden' name='date' value='"+datestr+"'>");
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:04:58.837

这是[Stack Overflow 上另一篇文章](https://stackoverflow.com/a/1643468/1721527)的修改。我认为这会做你想要的。

```
var tD = new Date();
var monthNames = [ "January", "February", "March", "April", "May", "June",
   "July", "August", "September", "October", "November", "December" ];
var datestr = monthNames[tD.getMonth()] + " " + tD.getDate()  + ", " + tD.getFullYear();
document.write("<input type='hidden' name='date' value='"+datestr+"'>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T23:05:12.737

我真的不明白。这就是你要找的吗？

```
<script>
var tD = new Date();
var datestr = (tD.getMonth() + 1) + ' ' + tD.getDay() + ", " + tD.getFullYear();
document.write("<input type='hidden' name='date' value='"+datestr+"'>");
</script> 
```

# excel - 从html获取属性字符串值

> ID：13317285
> 
> 赞同：5
> 
> 时间：2012-11-09T23:00:21.777
> 
> 标签：vba, excel, vba, web-scraping

我正在构建一个宏来使用[vba](/questions/tagged/vba "显示标记为“vba”的问题")从网站中提取数据。目前，我可以使用元素语法（如`obj.getElementsByTagName("td").innerText`. 但是，当某些单元格中有一些非innerText 数据时，我遇到了麻烦。就像这样：

```
<img src="/images/amber_pending.gif" border="0" alt="Pending" title="Pending"> 
```

我尝试使用从其他人那里找到的语法从“title”中提取属性值：

```
For Each tbObj In doc.getElementsByClassName("report removeTdBorder")
    i = 1
    For Each trObj In tbObj.getElementsByTagName("tr")
        If i >= 3 Then
            j = 1
            For Each tdObj In trObj.getElementsByTagName("td")
                If j = 1 Then
                    Set imgObj = tdObj.getElementsByTagName("img")
                    dataArray(i, j) = imgObj.getAttribute("title")
                    Debug.Print imgObj.getAttribute("title")
                    ActiveCell.Offset(0, j) = dataArray(i, j)
                    ActiveCell.Offset(0, j).WrapText = False
                Else
                    dataArray(i, j) = tdObj.innerText
                    Debug.Print i & ", " & j & ": " & dataArray(i, j)
                    ActiveCell.Offset(0, j) = dataArray(i, j)
                    ActiveCell.Offset(0, j).WrapText = False
                End If
                j = j + 1
            Next tdObj
            ActiveCell.Offset(1, 0).Activate
        End If
        i = i + 1
    Next trObj
Next tbObj 
```

但是这段代码每次都会出错，并在行中显示“运行时错误'438'：对象不支持此属性或方法” `dataArray(i, j) = imgObj.getAttribute("title")`。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T23:24:11.937

```
Set imgObj = tdObj.getElementsByTagName("img") 
```

返回一组图像（即使只有一个可以找到），因此您可以使用（例如）处理特定图像：

```
dataArray(i, j) = imgObj(0).getAttribute("title") 
```

# r - 抑制 data.table j 函数中的输出

> ID：13317288
> 
> 赞同：6
> 
> 时间：2012-11-09T23:00:43.273
> 
> 标签：r, plot, data.table, correlation

我想为using中变量的`ccf`不同值绘制一些图。问题是返回的值与. 我不关心返回值，只想看看实际的情节。一些代码：`id``data.table``R``ccf``data.table`

```
require(data.table)
x <- data.table(id=rep(1:10, each=10), a=rep(1:10,10), b=rep(10:1,10))
x[,ccf(a,b),by=id]
Error in `[.data.table`(x, , ccf(a, b), by = id) : 
All items in j=list(...) should be atomic vectors or lists. If you are trying something like j=list(.SD,newcol=mean(colA)) then use := by group instead (much quicker), or cbind or merge afterwards. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T23:47:33.040

鉴于问题中的这一点：

> 我不关心返回值，只想看看实际的情节。

然后 ：

```
x[, {ccf(a,b);NULL}, by=id] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T23:17:38.183

这看起来相当丑陋，因为它（最终）返回了一个矩阵：

```
xl <- x[,list(ccf(a,b)),by=id] # ugly mess
sapply(seq(1, 60, by=6), function(vecid) xl[[2]][[vecid]] )  # nice neat matrix 
```

这可能更漂亮：

```
xl <- x[ , ccf(a,b)$acf, by=id]
xl
     id          V1
  1:  1  0.37575758
  2:  1  0.25757576
  3:  1  0.07878788
  4:  1 -0.14848485
  5:  1 -0.41212121
 ---               
126: 10 -0.41212121
127: 10 -0.14848485
128: 10  0.07878788
129: 10  0.25757576
130: 10  0.37575758 
```

# c# - Marshal.PtrToStructure 在 mscorlib.dll 中引发 ExecutionEngineException

> ID：13317290
> 
> 赞同：0
> 
> 时间：2012-11-09T23:00:55.647
> 
> 标签：c#, vb.net, pinvoke

我正在尝试使用[Sacha Barber](http://www.codeproject.com/script/Membership/View.aspx?mid=569009)提供的代码获取我们网络上所有电脑的所有计算机名称。原始文章的链接在[这里](http://www.codeproject.com/Articles/16113/Retreiving-a-list-of-network-computer-names-using)。代码最初是用 C# 编写的，但我已将其转换为 VB。当我从 Visual Studio 以调试模式运行程序时，它通常（并非一直）运行良好，但是当我部署程序时，它几乎从不运行。

它在以下行失败：

```
Dim svrInfo As _SERVER_INFO_100 = DirectCast(Marshal.PtrToStructure(tmpBuffer, _
                                  GetType(_SERVER_INFO_100)), _SERVER_INFO_100) 
```

我收到以下错误：

```
mscorlib.dll 中出现“System.ExecutionEngineException”类型的未处理异常
H结果=-2146233082

```

我知道这与内存分配有关，但我不知道如何避免这个错误。我曾尝试使用 Debug Diagnostics Tool 1.2，但即便如此我也不确定要寻找什么。

```
Imports System.Runtime.InteropServices

Public Class NetworkInfo

Dim CurrentDomain As AppDomain = AppDomain.CurrentDomain

'import the NetServerEnum function from the netapi32.dll 
Private Declare Unicode Function NetServerEnum Lib "netapi32" _
(ByVal Servername As IntPtr, _
ByVal Level As Integer, _
ByRef bufptr As IntPtr, _
ByVal PrefMaxLen As Integer, _
ByRef entriesread As Integer, _
ByRef TotalEntries As Integer, _
ByVal serverType As Integer, _
ByVal Domain As IntPtr, _
ByVal ResumeHandle As IntPtr) As Integer

'import the NetApiBufferFree function from the netapi32.dll
Private Declare Unicode Function NetApiBufferFree Lib "netapi32.dll" _
(ByRef buffer As IntPtr) As UInteger

Public Structure _SERVER_INFO_100
    Friend sv100_platform_id As Integer
    <MarshalAs(UnmanagedType.LPWStr)> _
    Friend sv100_name As String
End Structure

Public Function GetNetworkComputers() As ArrayList

    Dim networkComputers As New ArrayList()
    Const MAX_PREFERRED_LENGTH As Integer = -1
    Dim SV_TYPE_WORKSTATION As Integer = 1
    Dim SV_TYPE_SERVER As Integer = 2
    Dim buffer As IntPtr = IntPtr.Zero
    Dim tmpBuffer As IntPtr = IntPtr.Zero
    Dim entriesRead As Integer = 0
    Dim totalEntries As Integer = 0
    Dim resHandle As Integer = 0

    Dim sizeofINFO As Integer = Marshal.SizeOf(GetType(_SERVER_INFO_100))

    Try
        Dim ret As Integer = NetServerEnum(Nothing, 100, buffer, MAX_PREFERRED_LENGTH,          entriesRead, totalEntries, _
                                           SV_TYPE_WORKSTATION Or SV_TYPE_SERVER, Nothing, resHandle)

        If ret = 0 Then
            For i As Integer = 0 To totalEntries
                tmpBuffer = New IntPtr(CType(buffer, Long) + (i * sizeofINFO))

                Dim svrInfo As _SERVER_INFO_100 = DirectCast(Marshal.PtrToStructure(tmpBuffer, _
                                                    GetType(_SERVER_INFO_100)), _SERVER_INFO_100)

                networkComputers.Add(svrInfo.sv100_name)

            Next
        End If
    Catch ex As Exception
        Console.WriteLine("Error getting network computers.")
    Finally
        NetApiBufferFree(buffer)
    End Try

    Return networkComputers
End Function

End Class 
```

# android - 如何在 libgdx 的舞台上绘制位图字体？

> ID：13317292
> 
> 赞同：8
> 
> 时间：2012-11-09T23:00:59.967
> 
> 标签：android, game-engine, libgdx, stage, bitmap-fonts

这是我当前在我的 Libgdx 游戏中的关卡上的渲染方法。我正在尝试在关卡的右上角绘制一个 BitmapFont，但我得到的只是一堆白框。

```
 @Override
    public void render(
            float delta ) {
        Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

        this.getBatch().begin();

            //myScore.getCurrent() returns a String with the current Score
        font.draw(this.getBatch(), "Score: 0" + myScore.getCurrent(), 600, 500);
        stage.act(Gdx.graphics.getDeltaTime());
        stage.draw();
        this.getBatch().end();
        } 
```

我想将乐谱字体添加到某种演员中，然后执行 scene.addActor(myScore) 但我不知道该怎么做。我按照 Steigert 的教程创建了在 AbstractLevel 类中实例化场景字体的主游戏类，然后由该级别扩展。

到目前为止，我没有使用任何自定义字体，只是空的 new BitmapFont(); 使用默认 Arial 字体。后来我想用我自己的更花哨的字体。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-10T04:42:27.037

尝试将 font.draw 移到 stage.draw 之后。将它添加到演员将非常简单，只需创建一个新类并像这样扩展演员

```
import com.badlogic.gdx.graphics.g2d.BitmapFont;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.scenes.scene2d.Actor;

public class Text extends Actor {

    BitmapFont font;
    Score myScore;      //I assumed you have some object 
                        //that you use to access score.
                        //Remember to pass this in!
    public Text(Score myScore){
        font = new BitmapFont();
            font.setColor(0.5f,0.4f,0,1);   //Brown is an underated Colour
    }

    @Override
    public void draw(SpriteBatch batch, float parentAlpha) {
         font.draw(batch, "Score: 0" + myScore.getCurrent(), 0, 0);
         //Also remember that an actor uses local coordinates for drawing within
         //itself!
    }

    @Override
    public Actor hit(float x, float y) {
        // TODO Auto-generated method stub
        return null;
    }

} 
```

希望这可以帮助！

**编辑1：** 也尝试`System.out.println(myScore.getCurrentScore());`确保这不是问题。你可以让它返回一个浮点数或一个整数，当你这样做时，`"Score:"+`它会将它本身变成一个字符串

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T02:18:09.223

好吧，在这种情况下，您可能需要先打电话 `this.getBatch().end`。像这样：

```
mSpriteBatch.begin();
mStage.draw();
mSpriteBatch.end();
//Here to draw a BitmapFont
mSpriteBatch.begin();
mBitmapFont.draw(mSpriteBatch,"FPS",10,30);
mSpriteBatch.end(); 
```

我不知道为什么，但它对我有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-11T12:01:48.247

我通过在开始绘图阶段之前关闭批次解决了与白框类似的问题。这是因为 stage.draw() 启动了另一个批次，并使未以 end() 结束的前一个批次无效。

因此，在当前示例中，我将在绘图阶段之前移动**this.getBatch().end() ：**

```
 ...
    font.draw(this.getBatch(), "Score: 0" + myScore.getCurrent(), 600, 500);
    this.getBatch().end();
    stage.act(Gdx.graphics.getDeltaTime());
    stage.draw();
    } 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-06-09T07:04:45.410

如果您使用的是 Scene2D，请尝试使用舞台和演员。不用写长代码，找MTX插件，非常好用。你可以创造一个很棒的用户体验

[http://moribitotechx.blogspot.co.uk/](http://moribitotechx.blogspot.co.uk/)

# opencv - OpenCV：如何从 ueye 相机将 CHAR 数据加载到 UCHAR cv::Mat 结构中

> ID：13317295
> 
> 赞同：3
> 
> 时间：2012-11-09T23:01:32.990
> 
> 标签：opencv, char

我有一个小问题将我的脚本从 IplImage 转换为 CvMat 结构。大多数脚本我都没有问题，但是在我从我的 ueye 相机捕获图像的特定脚本中，我似乎无法找到一种方法来完成此操作，而无需将 IplImage 保留在两者之间。

我想做的是将 m_pcImageMemory 直接加载到 CvMat 结构中。但这是 CHAR .. 并且 cv::Mat 使用 UCHAR。

有人有一个示例如何创建一个空白 cv::Mat，创建正确的标题并将 m_pcImageMemory 加载到新的 cv::Mat 中吗？

请在下面查看我的代码：

```
cv::Mat getframeMat_ueye(){
    if (m_hCam !=0) {
        if (is_CaptureVideo (m_hCam, IS_WAIT) == IS_SUCCESS) {
            is_RenderBitmap (m_hCam, m_lMemoryId, m_hWndDisplay, m_nRenderMode);
        }
    }

    IplImage* tmpImg = cvCreateImageHeader (cvSize (m_nSizeX, m_nSizeY), IPL_DEPTH_8U, m_channels);
    ueye_hasheader=true;
    tmpImg->imageData = m_pcImageMemory; 
    cv::Mat retmat=cv::cvarrToMat(tmpImg);
    cvReleaseImage(&tmpImg);

    return retmat;
} 
```

根据 Martin 他的评论，我将代码更改为：

```
cv::Mat getframeMat_ueye(){
    if (m_hCam !=0) {
        if (is_CaptureVideo (m_hCam, IS_WAIT) == IS_SUCCESS) {
            is_RenderBitmap (m_hCam, m_lMemoryId, m_hWndDisplay, m_nRenderMode);
        }
    }

    cv::Mat retmat(m_nSizeX, m_nSizeY,CV_8UC(m_channels),m_pcImageMemory);
    return retmat;
} 
```

但是，当我这样做时，返回的图像会失真，并且图像大小也不正确。（周围有宽度的大小。）

问候和感谢，弗洛里斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T00:10:37.890

不要再使用 iplImage 了。

cv::Mat mat(sizeX,sizeY,CV_8UC1,the_imagedata_camera);

显然，垫子仅在数据不变时才有效。不用担心 char/uchar - 来自相机的数据几乎肯定没有签名！

# android - 如何用包裹读/写一个类

> ID：13317299
> 
> 赞同：0
> 
> 时间：2012-11-09T23:01:46.067
> 
> 标签：android, parcelable

我有一个实现的类，`Parcelable`并且该类也有一个成员：`public Class<?> _type;`

`public void writeToParcel(Parcel dest, int parcelableFlags)`在实施and时，我似乎无法找出保留此值的正确方法`private Interface(Parcel source)`。

有谁知道写/读它的正确方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T23:26:52.013

我认为您必须在发送方写出类名，然后使用反射在接收方查找类。如果反序列化包裹时相关类不可用，这显然不起作用。

# c - 套接字读取/接收的 MSG_PEEK 不当行为

> ID：13317302
> 
> 赞同：0
> 
> 时间：2012-11-09T23:02:03.327
> 
> 标签：c, sockets, network-programming

我一直在尝试调试在使用 MSG_PEEK 时似乎弹出的问题

我有一个套接字 accept() 然后在 recv() 上使用循环来获取流的前几个字节，但在 recv() 中使用 MSG_PEEK 以便原始缓冲区保持不变。

我正在使用的所有其他套接字操作都使用读/写而不是接收/发送。这会导致问题吗？在我看来，唯一的区别是 MSG_PEEK 标志是否在接受后的第一个 recv 上使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T03:30:36.710

在套接字上混合`send()`/`recv()`和`write()`/`read()`很好。您没有提供足够的信息，甚至无法推测您的实际问题是什么。

# ios - 企业应用程序分发配置文件是否与特定设备绑定/设备是否需要安装配置文件？

> ID：13317307
> 
> 赞同：0
> 
> 时间：2012-11-09T23:02:51.323
> 
> 标签：ios, provisioning

根据苹果文档[http://developer.apple.com/library/ios/#featuredarticles/FA_Wireless_Enterprise_App_Distribution/Introduction/Introduction.html](http://developer.apple.com/library/ios/#featuredarticles/FA_Wireless_Enterprise_App_Distribution/Introduction/Introduction.html)

在列出的创建企业应用程序的步骤中，它说：

```
Create an enterprise distribution provisioning profile *that authorizes devices* to use apps you’ve signed. 
```

（我的重点）

如果配置文件授权设备，那是如何完成的？我的意思是配置文件以某种方式与特定设备相关联 - 我在其他地方阅读过，但没有设备需要安装此配置文件的参考。这是正确的，如果是，那么设备如何安装配置文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:48:00.317

假设您安装了正确的分发证书并将与 Dist 证书关联的配置文件添加到 Xcode，那么您将存档应用程序，确保您已在目标属性的 Build Setting 选项卡中指定了正确的 prov 配置文件。见下图：

![构建设置](../Images/3e29ff4a2a4949c52fd21de504b910ef.png)

然后，您将归档应用程序并选择通过企业部署进行分发。你给它你计划放置应用程序的应用程序可执行文件 (URL) 的路径和将伴随它的 .plist （两者都将为你自动构建）。见下图：

![第1步](../Images/5596f06d067761be7d3e664a6576b412.png)

![第2步](../Images/ed687f59f43f6538cfa8f701f9a868b6.png)

![第 3 步](../Images/11deb53d9b40748310035bc936981af7.png)

![第4步](../Images/f618d896f17d10662a24af93346341ab.png)

然后，您可以使用 plist 文件的 url 让您的用户下载/安装您构建的应用程序。

对于我的雇主，我创建了我们自己的内部“应用商店”，其中我们所有的 iOS 应用程序都为我们的用户提供。这样，他们从网络服务器下载/安装一个应用程序，并通过我们的“应用商店”应用程序获取所有其余应用程序（包括任何更新）。

如果您需要，我可以为您提供完整的基础架构，但想法很简单。

# java - 如何在 Liferay 上获取用户的名字？

> ID：13317308
> 
> 赞同：3
> 
> 时间：2012-11-09T23:02:55.873
> 
> 标签：java, jsp, liferay

我是 Liferay 和 Java 的新手，我一直在为如何获取用户名字而苦苦挣扎，关于这个产品的文档真的很差，所以任何帮助都将不胜感激。所以我正在开发一个 portlet，我希望它显示用户的名字，这是 view.jsp 文件：

```
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet" %>
<%@ page import="javax.portlet.PortletPreferences" %>
<%@ page import="com.liferay.portal.model.UserModel " %>
<%@ taglib uri="http://liferay.com/tld/ui" prefix="liferay-ui" %>
<portlet:defineObjects />

<liferay-ui:success key="success" message="Greeting saved
       successfully!" />

<%
PortletPreferences prefs = renderRequest.getPreferences();
String greeting = (String)prefs.getValue(
"greeting", "Hello! Welcome to our portal.");
%>
<%

%>
<p><%= greeting %></p>
<portlet:renderURL var="editGreetingURL">
<portlet:param name="mvcPath" value="/edit.jsp" />
<portlet:param name="userName" value="Test" />

</portlet:renderURL>

<p><a href="<%= editGreetingURL %>">Edit greeting</a></p> 
```

我已经使用了 usermodel 类或接口，我实际上找到了方法 :getFirstName() 但我无法让它工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T09:36:24.107

另一种选择是像这样使用 Liferay ThemeDisplay：

```
<%@ taglib uri="http://liferay.com/tld/theme" prefix="liferay-theme" %>
<liferay-theme:defineObjects />

<%= themeDisplay.getUser().getFirstName() %> 
```

虽然我建议不要在您的代码中使用 JSP Scriptlets，并在您的 portlet 类代码中使用 Java 执行此操作。

~~ 编辑：添加替代方案以多次使用用户 ~~

混合使用 Tony 和我的方法的一个例子是这样的：

```
<%= com.liferay.portal.model.User user = themeDisplay.getUser(); %> 
```

~~ 编辑 2：在 Java 代码中执行此操作 ~~

在这里查看我的要点：[https ://gist.github.com/4060650](https://gist.github.com/4060650)

可以通过使用 JSTL 来摆脱所有 scriptlet 来进一步简化它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T03:18:00.003

尝试添加到jsp：

```
<% 
com.liferay.portal.model.User user = 
      com.liferay.portal.util.PortalUtil.getUser(request);
String firstName = user.getFirstName();
%>
<p>User First Name=<%= firstName %></p> 
```

为了便于理解，我添加了完整的软件包。

# ruby - 具有真值的案例陈述

> ID：13317310
> 
> 赞同：1
> 
> 时间：2012-11-09T23:03:03.920
> 
> 标签：ruby, typeerror

两个类似的脚本在这里显示出非常奇怪的行为。

A）下面的代码抛出一个`nil can't be coerced into Fixnum (TypeError)`：

```
 score = 0
    ammount = 4

    score += case ammount
      when ammount >= 3; 10
      when ammount < 3; 1
    end

    puts score 
```

B）另一个正在放入`1`控制台日志。

```
 score = 0
    ammount = 4

    score += case ammount
      when ammount >= 3; 10
      else 1
    end

    puts score 
```

我希望这两个脚本都能输出`10`到控制台。我错了吗？为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T23:13:27.693

当给定一个参数时， case 语句检查对象是否相等（与调用相同`===`），它可以用于单个值或超出范围。在您的情况下，您并没有真正检查是否相等，但可以这样写：

```
score += case
         when amount >= 3 then 10
         when amount < 3 then 1
         end 
```

但是，这对于您要尝试做的事情（一个非此即彼的条件）来说非常冗长。使用普通`if...else`或三元语句更简单：

```
score += amount >= 3 ? 10 : 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T23:21:53.963

您正在混合两种类型的 case 语句：

1.  ```
    case variable
    when range/expression then ...
    else statement
    end 
    ```

2.  ```
    case
    when case1 then ...
    else ...
    end 
    ```

**问题：**

为什么你的代码不起作用？

**回答：**

当您在 中指定变量时，将对每个测试应用`case`隐式操作。在您的情况下，是 4，并且大于 3，然后 amount>=3 是，所以第一个 when 将测试 if 。显然不是，所以它会转到下一个，下一个是并且它也不为假，所以 case 语句将返回，然后你会得到一个错误说。`===``when``amount``true``amount === true``false``nil``nil class cannot be coerced`

你的第二个条件也是如此。

**正确的解决方案**是使用上述之一：

任何一个：

```
score = 0
ammount = 4

score += case
  when ammount >= 3; 10
  when ammount < 3; 1
end 
```

或者：

```
score = 0
ammount = 4

score += case ammount
  when 3..(1.0/0.0); 10
  when -(1.0/0.0)...3; 1
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T23:17:39.537

您应该使用 'then' 而不是 ';' 在案例内部并且不为案例声明 ammount 变量，只需使用您在那里的子句。使用三元运算更容易获得您想要的结果：

```
score += ammount >= 3 ? 10 : 1 
```

# python - Ubuntu 12.04 上的 Boost::python 示例

> ID：13317311
> 
> 赞同：2
> 
> 时间：2012-11-09T23:03:19.137
> 
> 标签：python, boost, ubuntu-12.04

我正在尝试在 ubuntu 12.04 上构建 boost:python 示例。我从包管理器（不是从源代码）安装了库。我之前也没有使用过 boost，也没有为此设置任何环境变量（BOOST_BUILD_PATH 未设置）。我收到此错误：

```
/usr/share/doc/libboost1.46-doc/examples/libs/python/example/tutorial$ bjam --debug-configuration
notice: found boost-build.jam at /usr/share/doc/libboost1.46-doc/examples/libs/python/example/boost-build.jam
Unable to load Boost.Build: could not find build system.
---------------------------------------------------------
/usr/share/doc/libboost1.46-doc/examples/libs/python/example/boost-build.jam attempted to load the build system by invoking
'boost-build ../../../tools/build/v2 ;'
but we were unable to find "bootstrap.jam" in the specified directory
or in BOOST_BUILD_PATH (searching /usr/share/doc/libboost1.46-doc/examples/libs/python/example/../../../tools/build/v2, /usr/share/boost-build).
Please consult the documentation at 'http://www.boost.org'. 
```

我该如何解决？我应该将 BOOST_BUILD_PATH 指向哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T20:16:42.380

我有同样的问题，我在这里找到了解决方案：

[http://jayrambhia.wordpress.com/2012/06/25/configuring-boostpython-and-hello-boost/](http://jayrambhia.wordpress.com/2012/06/25/configuring-boostpython-and-hello-boost/)

事实证明，您根本不需要使用 bjam。一个makefile就足够了。我将在此处重复上述链接中的解决方案：

1.) 安装 libboost-python 包

2.) 创建一个名为 'hello_ext.c' 的 hello world 源文件：

```
char const* greet()
{
    return "hello, world";
}

#include<boost/python.hpp>
BOOST_PYTHON_MODULE(hello_ext)
{
   using namespace boost::python;
   def("greet",greet);
} 
```

3.) 创建一个生成文件：

```
PYTHON_VERSION = 2.7
PYTHON_INCLUDE = /usr/include/python$(PYTHON_VERSION)
# location of the Boost Python include files and library
BOOST_INC = /usr/include
BOOST_LIB = /usr/lib
# compile mesh classes
TARGET = hello_ext
$(TARGET).so: $(TARGET).o
    g++ -shared -Wl,--export-dynamic $(TARGET).o -L$(BOOST_LIB) -lboost_python -L/usr   /lib/python$(PYTHON_VERSION)/config -lpython$(PYTHON_VERSION) -o $(TARGET).so
$(TARGET).o: $(TARGET).c
    g++ -I$(PYTHON_INCLUDE) -I$(BOOST_INC) -fPIC -c $(TARGET).c 
```

4.) 制作

```
make 
```

5.) 准备使用。在蟒蛇中：

```
import hello_ext
print hello_ext.greet() 
```

* * *

编辑以包含一个选项卡。

# c++ - 右值引用和文字

> ID：13317312
> 
> 赞同：4
> 
> 时间：2012-11-09T23:03:20.493
> 
> 标签：c++, c++11, move, forward, rvalue

考虑代码

```
template <typename... Args>
void foo (Args&& ...)
{
}

template <typename... Args>
void bar (Args&& ... args)
{
   foo (std::forward (args)...);
}

int main ()
{
  bar (true);
}
~ 
```

gcc 4.7.2 给出错误

```
error: no matching function for call to ‘forward(bool&)’
note: candidates are:

template<class _Tp> constexpr _Tp&& std::forward(typename std::remove_reference<_Tp>::type&)
note:   template argument deduction/substitution failed:

note: template<class _Tp> constexpr _Tp&& std::forward(typename std::remove_reference<_Tp>::type&&)
note:   template argument deduction/substitution failed: 
```

为什么不将文字推导出为右值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T23:07:27.447

您没有`std::forward()`正确使用：您需要将推导的类型作为参数提供给`std::forward()`：

```
foo (std::forward<Args>(args)...); 
```

# java - java string.split 函数

> ID：13317313
> 
> 赞同：0
> 
> 时间：2012-11-09T23:03:21.897
> 
> 标签：java, split

```
Str = "abc|def|ghi^jkl|mno";
String[] Flds = Str.split("[|]"); 
//Flds[0] = "abc";
//Flds[1] = "def";
//Flds[2] = "ghi^jkl";
//Flds[3] = "mno"; 
```

现在我想知道 Flds[2] 的子字段，但以下都不起作用 -

```
String[] Flds = Str.split("[^]");

String[] Flds = Str.split("[^]]");

String[] Flds = Str.split("^"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T23:07:48.083

你应该分裂`Flds[2]`

```
String[] subFlds2 = Flds[2].split("\\^"); 
```

此外，`^`是[正则表达式](http://www.regular-expressions.info/reference.html)中的保留字符。但是，您曾经`[]`escape也意味着括号内的内容。`|``^``[]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T23:08:34.480

双重逃脱克拉：

```
Flds[2].split("\\^") 
```

[Java](http://docs.oracle.com/javase/tutorial/java/data/characters.html)的一次转义，然后是[regex](http://www.regular-expressions.info/reference.html)的另一种转义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T23:12:28.787

**请注意：** [**String#split**](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)，接受正则表达式参数：

```
 public String[] split(String regex) 
```

`^`是正则表达式中的特殊字符，表示行首。要将其用作文字，请在其之前使用转义字符，例如：

```
String[] Flds = Str.split("[\\^]"); 
```

我也认为，它应该可以在没有大括号的情况下正常工作，例如

```
String[] Flds = Str.split("\\^"); 
```

您可以在此处找到有关正则表达式字符类的更多信息：[**Regex Char Classes**](http://docs.oracle.com/javase/tutorial/essential/regex/char_classes.html)

# regex - 正则表达式 - 匹配空格

> ID：13317319
> 
> 赞同：9
> 
> 时间：2012-11-09T23:03:52.350
> 
> 标签：regex, compiler-construction, flex-lexer, lex, lexical-analysis

我在编写一个将修剪输入中所有空格的正则表达式时遇到了一个大问题。

我已经尝试过`\s+`，`[ \t\t\r]+`但这不起作用。

我需要这个，因为我正在使用 flex 编写扫描仪，并且我被困在匹配空白处。空格应该只是匹配而不是删除。

示例输入：

```
program 
3.3 5 7 
{ comment }
string
panic: cant happen 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-10T23:50:17.733

1.  `flex`使用（大约）POSIX“扩展正则表达式”语法——`\s`不起作用，因为它是 Perl 扩展。

2.  是`[ \t\t\r]+`错字吗？我想你会想要一个`\n`在那里。

像`[ \n\t\r]+`肯定*应该*工作的东西。例如，这个词法分析器（我保存为`lexer.l`）：

```
%{

#include <stdio.h>

%}

%option noyywrap

%%

[ \n\t\r]+  { printf("Whitespace: '%s'\n", yytext); }
[^ \n\t\r]+ { printf("Non-whitespace: '%s'\n", yytext); }

%%

int main(void)
{
    yylex();
    return 0;
} 
```

...成功匹配示例输入中的空格（我已保存为`input.txt`）：

```
$ flex lexer.l
$ gcc -o test lex.yy.c
$ ./test < input.txt
Non-whitespace: 'program'
Whitespace: ' 
'
Non-whitespace: '3.3'
Whitespace: ' '
Non-whitespace: '5'
Whitespace: ' '
Non-whitespace: '7'
Whitespace: ' 
'
Non-whitespace: '{'
Whitespace: ' '
Non-whitespace: 'comment'
Whitespace: ' '
Non-whitespace: '}'
Whitespace: '
'
Non-whitespace: 'string'
Whitespace: '
'
Non-whitespace: 'panic:'
Whitespace: ' '
Non-whitespace: 'cant'
Whitespace: ' '
Non-whitespace: 'happen'
Whitespace: '
' 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-09T23:07:37.197

我不是 flex 方面的专家，但是您是否应该在正则表达式中使用 /g 和 /m 标志来处理多行字符串。

# android - Eclipse 连接到存储库并在 Windows 8 上安装 ADT 插件时出错

> ID：13317325
> 
> 赞同：6
> 
> 时间：2012-11-09T23:04:30.500
> 
> 标签：android, eclipse, plugins, adt, installation

我最近更新到 Windows 8（不要问为什么，因为它变得比它的价值更麻烦！）

这样做之后，我的 Eclipse 和 ADT 插件就停止了工作。所以我再次下载了 Eclipse Classic 并尝试下载 ADT 插件，但没有成功。（注意：选择后，Eclipse 下拉菜单中的所有下载均不可用）

尝试连接到在线存储库时，我不断收到以下错误消息：无法在[https://dl-ssl.google.com/android/eclipse/site.xml/content.xml](https://dl-ssl.google.com/android/eclipse/site.xml/content.xml)读取存储库。无法在[https://dl-ssl.google.com/android/eclipse/site.xml/content.xml](https://dl-ssl.google.com/android/eclipse/site.xml/content.xml)读取存储库。无法分配请求的地址：连接

尝试通过 ZIP 文件添加插件时，我通过并遇到以下错误：无法完成安装，因为找不到一个或多个必需的项目。正在安装的软件：Android 开发工具 20.0.3.v201208082019-427395 (com.android.ide.eclipse.adt.feature.group 20.0.3.v201208082019-427395)

卡住了，需要一些建议！我有最新版本的 Android SDK 并已更新到最新版本的 Java Run-time & JDK

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-01T04:05:43.280

遇到和你一样的问题。设法通过将 https 更改为 http 来修复它

[http://dl-ssl.google.com/android/eclipse/](http://dl-ssl.google.com/android/eclipse/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T16:35:06.000

或者，可以从存档安装 ADT 插件。有关详细信息，请参阅下面链接中的“ADT 安装疑难解答”部分。

[http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-23T09:00:06.877

来自官方文档：

> 如果 Eclipse 找不到包含 ADT 插件的远程更新站点，请尝试将远程站点 URL 更改为使用 http，而不是 https。也就是说，将远程站点的位置设置为

**http://dl-ssl.google.com/android/eclipse/ **_****

 **这为我解决了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T15:27:48.927

[您可以直接从http://dl.google.com/android/ADT-XX.XXzip](http://dl.google.com/android/ADT-XX.X.X.zip)下载该软件包 （将 X 替换为修订号）。安装它并从那里开始。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-10T15:22:38.410

我曾经也有过一样的问题。我运行具有 XP SP3 兼容性的 Eclipse，并从存档中安装了 ADT。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-10T07:03:40.857

您为更新站点使用了错误的 URL。它只是[https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)，而根据您的错误消息判断，您可能在对话框中附加了“site.xml”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-09T10:11:53.730

1.下载最新版本的 ADT，当前 ADT-23.0.2.zip (*) 2.在 Eclipse > 帮助 > 安装新软件... > 取消选中安装期间联系所有更新站点以查找所需的软件（底部，最后一个首选项）以避免在安装过程中出现任何不必要的延迟。3.相同的屏幕（顶部）单击添加>存档>选择下载的ADT-XXXzip>按照屏幕安装步骤进行操作。

（*） 之前的版本：

ADT-23.0.0.zip

ADT-22.6.0.zip | ADT-22.6.1.zip | ADT-22.6.2.zip | ADT-22.6.3.zip

ADT-22.3.0.zip

ADT-22.2.1.zip

ADT-22.0.0.zip | ADT-22.0.1.zip | ADT-22.0.5.zip

ADT-21.1.0.zip**

# http - 底层连接意外关闭

> ID：13317327
> 
> 赞同：0
> 
> 时间：2012-11-09T23:04:37.400
> 
> 标签：http, windows-8, .net-4.5

`The underlying connection was closed: The connection was closed unexpectedly`执行以下代码（Windows 8、.net 4.5）时出现错误：

```
link = @"http://login.rutracker.org/forum/index.php";
_request = new HttpRequestMessage(HttpMethod.Post, link);
_request.Headers.Add("User-Agent", "Chrome/22.0.1229.94");
_request.Headers.Add("Accept", "text/html");
var content = new Dictionary<string, string>();
content.Add("login_username", name);
content.Add("login_password", "pass");
_request.Content = new FormUrlEncodedContent(content);
_request.Content.Headers.ContentEncoding.Add("gzip");
_request.Content.Headers.ContentEncoding.Add("deflate");
_response = await _client.GetAsync(_request.RequestUri);
return await _response.Content.ReadAsByteArrayAsync(); 
```

我的目标是提出与以下相同的请求（来自`Fiddler`应用程序的日志）：

```
POST /forum/login.php HTTP/1.1

Accept: text/html, application/xhtml+xml, */*

Referer: http://rutracker.org/forum/index.php

Accept-Language: en-US

User-Agent: Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; WOW64; Trident/6.0)

Content-Type: application/x-www-form-urlencoded

Accept-Encoding: gzip, deflate

Connection: Keep-Alive

Content-Length: 71

DNT: 1

Host: login.rutracker.org

Pragma: no-cache

Cookie: spylog_test=1

login_username=myusername&login_password=mypass&login=%C2%F5%EE%E4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T09:02:04.663

我需要做的就是禁止自动请求重定向：

```
request.AllowAutoRedirect = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T23:09:21.773

去除：

```
_request.Content.Headers.ContentEncoding.Add("gzip");
_request.Content.Headers.ContentEncoding.Add("deflate"); 
```

因为您没有发送压缩内容

另外，我建议您使用 WireShak 查看与您的代码一起实际发送的内容 - 因为我确信`HttpRequestMessage`已经附加了您需要的大部分标头。

# javascript - 未捕获的引用错误：$ 未定义简单脚本

> ID：13317328
> 
> 赞同：-1
> 
> 时间：2012-11-09T23:04:40.453
> 
> 标签：javascript, jquery, html, javascript-events

嘿伙计们，我正在尝试学习 javascript 和 jquery，但是我被困在了这一点上。

这是我的 script.js

```
$(document).ready(function(){
              $("#right").click(function(){
                    $("#seccion1").fadeout("normal",function(){
                                           $("#seccion2").fadeIn("normal");
                        });

                });

              }); 
```

[我已经从这里http://www.ingen.com.co/HTML5/sitio.html](http://www.ingen.com.co/HTML5/sitio.html)用这行代码调用它：

```
<script type="text/javascript" src="js/script.js"></script> 
```

我不断收到同样的错误请帮忙！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T23:09:27.007

`<script>`正如上面评论中提到的，您需要通过在任何其他块之前添加此代码来加载 jQuery ：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

# string - 在 Haxe 中反转字符串

> ID：13317329
> 
> 赞同：4
> 
> 时间：2012-11-09T23:04:41.110
> 
> 标签：string, haxe

在 Haxe 中反转字符串的其他选项是什么？我介绍我的（简单、清晰和像初学者一样）：

```
class ReverseString {

    public static function main() {

        Sys.println("Enter some words: ");
        // Lets read some input!
        var someWord = Sys.stdin().readLine();

        // Split string to array, reverse string, and join again
        var stringArray:Array<String> = someWord.split("");
        stringArray.reverse();
        var reversedString = stringArray.join("");

        // And finally, enjoy the reversed string:
        Sys.print("Reversed word looks like this: ");
        Sys.println(reversedString);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-20T10:00:01.350

与其他一些方法相比，使用 split() 速度较慢，尤其是在字符串足够大的情况下。

下面的测试是在我的计算机上针对 Neko 目标完成的，使用 Haxe 2.10 编译。让我们首先测试一个 6 个字符的字符串（“abcdef”）。

**使用拆分/连接的实现 A**大约需要（0.030 毫秒）：

```
var s = "abcdef"; 
var a = s.split(''); 
a.reverse(); 
s = a.join('');

// s contains "fedcba" 
```

**实现 B**的运行速度与解决方案 A（0.032 毫秒）差不多，甚至比解决方案 A 还要慢：

```
var s = "abcdef";
var s2 = ""; 
for (i in -s.length+1...1) 
    s2 += s.charAt(-i);

// s2 contains "fedcba" 
```

**实现 C**比实现 A 快 5 倍（0.006 毫秒）：

```
import StringBuf;
using StringTools;

var s = "abcdef"; 
var s2 = new StringBuf(); 
for (i in -s.length+1...1) 
     s2.add(s.charAt(-i)); 

// s2.toString() contains "fedcba" 
```

**实现 D**最快，比实现 A 快 16 倍（0.002ms）：

```
import StringBuf;
using StringTools;

var s = "abcdef"; 
var s2 = new StringBuf(); 
for (i in -s.length+1...1) 
     s2.addChar(s.fastCodeAt(-i)); 

// s2.toString() contains "fedcba"
// if introducing var s3 = s2.toString() it then takes from 0.003 to 0.004ms total
// so this still seems the fastest on Neko. 
```

**用 6 个字符的字符串**（从 500,000 次迭代计算并相应划分）对 Neko 的测量值进行回顾：

*   答：0.030ms
*   B：0.032ms（最差）
*   C：0.006ms（比A快5倍）
*   D：0.002ms（最好，比 A 快 16 倍）

**250 个字符串测量值**（从 500,000 次迭代计算并相应划分）：

*   答：0.996ms
*   B：1.326ms（仍然最差）
*   C：0.166ms（比A快6倍）
*   D：0.044ms（最好，比 A 快 22 倍）

结果表明，随着字符串大小的增长，实现 A 相对于 D 变得越来越慢（这意味着它的复杂度函数 O(n) 更差）。

出于这些原因，我建议**实施 D**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T12:43:31.160

您可以将代码移动到单独的静态函数中：

```
class StringUtil {
    static public function reverse(s:String):String {
        var a = s.split('');
        a.reverse();
        return a.join('');
    }
} 
```

然后这样做：

```
using StringUtil;

class ReverseString {

    public static function main() {

        Sys.print("Enter some words: ");
        // Lets read some input!
        var someWord = Sys.stdin().readLine();

        // Just reverse it
        var reversedString = someWord.reverse();

        // And finally, enjoy the reversed string:
        Sys.print("Reversed word looks like this: ");
        Sys.println(reversedString);
    }
} 
```

使评论相当过时，不是吗？

或者，您可以向后迭代 String 的字符并将它们添加到 a `StringBuf`，但我猜这在大多数平台上都比较慢。

# objective-c - 在 UIBezierPath addLineToPoint 的末尾运行一些代码

> ID：13317330
> 
> 赞同：1
> 
> 时间：2012-11-09T23:04:48.697
> 
> 标签：objective-c, ios, xcode

我正在尝试在 UIBezierPath 动画的 addLineToPoint 完成后运行一些脚本。

这是我的一段代码

```
 UIBezierPath *path = [UIBezierPath bezierPath];

    CGRect pathRect = CGRectInset(self.animationLayer.bounds, 0.0f, 0.0f);    
// define cgpoint
    CGPoint number1 = CGPointMake(CGRectGetMinX(pathRect), CGRectGetMaxY(pathRect));
    [path addLineToPoint: number1]; 
```

在这里我找到了 UIBezierClass 的参考，但我找不到任何指示动画 addLineToPoint 完成的指示符。提前致谢。 [http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBezierPath_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBezierPath_class/Reference/Reference.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T13:32:35.690

中不涉及动画`addLineToPoint`。构造 UIBezierPath 的所有其他方法也是如此。

如果您查看文档，您正在谈论的方法在“**构造路径**”部分下。它所做的只是在模型中的点上添加一条线（它甚至还没有在屏幕上绘制）。

`fill`您可以通过在某个视图的方法中调用或`stroke`在其上绘制整个贝塞尔路径，`drawRect:`但这也不会为任何东西设置动画。

* * *

在我看来，您既要为该路径的抚摸设置动画，又要在完成时获得回调。如果是这样，您应该创建一个 CAShapeLayer 并将您的贝塞尔路径分配给它的路径属性。然后，您可以通过将属性从 0 设置为 1 来为该形状层的描边设置动画`strokeEnd`。如果您将自己配置为该动画的代理，那么您将`animationDidStop:finished:`在动画完成后收到回调。

# php - 已在 WordPress 中发送的标头

> ID：13317333
> 
> 赞同：0
> 
> 时间：2012-11-09T23:05:02.017
> 
> 标签：php, wordpress, http-headers, wordpress-theming

> **可能重复：**
> [PHP 中的“警告：标头已发送”](https://stackoverflow.com/questions/8028957/warning-headers-already-sent-in-php)

所以我遇到了一个奇怪的错误，我已经准备好来打败这个目的。成功更新 WordPress 主题后，您应该立即被重定向到特定位置。在那之前，你会吓坏并说：

```
Warning: Cannot modify header information - headers already sent by (output started at /home/kyle/WordPress/WordPressDev/wp-includes/script-loader.php:789) in /home/kyle/WordPress/WordPressDev/wp-includes/pluggable.php on line 881 
```

所以有人过来说，嘿把它放在你的functions.php中，它会起作用：

```
 function callback($buffer){
     return $buffer;
 }

 function add_ob_start(){
     ob_start("callback");
 }

 function flush_ob_end(){
     ob_end_flush();
 }

 add_action('wp_head', 'add_ob_start');
 add_action('wp_footer', 'flush_ob_end'); 
```

本质上，这应该确保在完成其他任何事情之前完成诸如重定向之类的事情。

好吧，我在代码上遇到了标题问题，例如：

```
$aisis_unzip_to = ABSPATH . $wp_filesystem->wp_content_dir() . "wp-content/themes/" . get_option('template') . "/";

$this->delete_contents_check();

$aisis_do_unzip = unzip_file($aisis_temp_file_download, $aisis_unzip_to);
unlink($aisis_temp_file_download); 

//Error Checking here - if we pass do the following:

wp_redirect(admin_url('admin.php?page=aisis-core-options')); 
```

关于为什么抛出这个错误以及**如何**解决它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T00:41:28.297

通常它是结束标记之后的行尾或其他东西？

# php - 如何编写一个字段来更改现有的 html（或 php）文件？

> ID：13317340
> 
> 赞同：1
> 
> 时间：2012-11-09T23:05:38.867
> 
> 标签：php, file, sidebar

如果这似乎是一个愚蠢的问题，我们深表歉意。一般来说，我对编码非常陌生，并且对如何编写我想要组合的内容知之甚少。

我刚刚使用 php 和 mySQL 数据库为我的站点设置了一个非常简单的管理页面。我希望能够在管理页面中创建一些基本字段，以调整我网站侧边栏中的小细节。我目前将侧边栏放在一个单独的 php 文件中，因此为了使更改在站点范围内进行，我所要做的就是编辑“sidebar.php”。您认为解决此问题的最佳方法是什么？我的目标是尽可能简单。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:10:53.447

您必须动态生成网站的侧边栏

例如，您可以在数据库中创建一个包含侧边栏链接列表的表，然后从文件“sidebar.php”中调用数据库并打印出这些链接或 ID，然后在管理面板中您必须创建一个带有表单字段的页面以修改数据库中的侧边栏表（而不是文件本身），例如更新/修改/添加链接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T23:07:25.267

采用`include()`

```
include("[YOURPATH]/sidebar.php"); 
```

您可以在`.php`您想要的所有文件中使用它......好吧..*将*它包含在其中。

或者，使用

```
require("[YOURPATH]/sidebar.php"); 
```

将在失败时结束整个脚本， include() 不会。

# android - AIR 3.2 for Android（它在 2.3 上运行吗？）

> ID：13317341
> 
> 赞同：1
> 
> 时间：2012-11-09T23:05:49.800
> 
> 标签：android, flash, air

我正在使用 Flash CS6，我选择将我的文件导出为 AIR 3.2 for Android，现在这适用于 Android 2.3 版吗？我的手机是 2.3.5，我把我的 swf 文件放在我的手机上，它不能播放它......我做错了什么吗？我也确实使用了文件>导出电影选项

帆布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T23:15:49.950

没关系，我只是更改了一些设置，而不是所有设置，所以它仍然在制作 swf 而不是 apk 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T23:13:04.893

它适用于这些版本：[技术规格](http://www.adobe.com/products/air/tech-specs.html)

您不应该使用 SWF。当你点击发布时，你应该得到一个编译的 APK 文件。发布设置下有选项。

观看[此视频](http://www.gotoandlearn.com/play.php?id=131)以获取教程。

# ios - 如何在 iPhone 偏好设置中存储时间

> ID：13317343
> 
> 赞同：2
> 
> 时间：2012-11-09T23:06:09.327
> 
> 标签：ios, xamarin.ios, settings.bundle

我想使用 NSUserDefaults 存储一天中的时间值，并允许用户通过设置应用程序更新它。有没有办法存储 NSDate 对象并告诉设置应用程序只使用时间选择器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T01:19:55.770

您可以将日期保存到`NSUserDefaults`. 但是您不能将日期选择器添加到设置包。在 settings.bundle plist 中没有可用的选项。有关更多详细信息，[请查看苹果文档](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/UserDefaults/Preferences/Preferences.html)

唯一的选择是，

> **文本字段：**文本字段类型显示标题（可选）和可编辑的文本字段。您可以将此类型用于需要用户指定自定义字符串值的首选项。这种类型的关键是***PSTextFieldSpecifier***。
> 
> **标题：**标题类型显示只读字符串值。您可以使用此类型显示只读首选项值。（如果首选项包含神秘或不直观的值，则此类型允许您将可能的值映射到自定义字符串。）此类型的键是***PSTitleValueSpecifier***。
> 
> **拨动开关：**拨动开关类型显示开/关切换按钮。您可以使用此类型来配置只能具有两个值之一的首选项。尽管您通常使用此类型来表示包含布尔值的首选项，但您也可以将其与包含非布尔值的首选项一起使用。这种类型的关键是***PSToggleSwitchSpecifier***。
> 
> **滑块：**滑块类型显示一个滑块控件。您可以将此类型用于表示一系列值的首选项。此类型的值是一个实数，您可以指定其最小值和最大值。这种类型的关键是***PSSliderSpecifier***。
> 
> **多值：**多值类型允许用户从值列表中选择一个值。您可以将此类型用于支持一组互斥值的首选项。这些值可以是任何类型。这种类型的关键是***PSMultiValueSpecifier***。
> 
> **组：**组类型用于在单个页面上组织首选项组。组类型不代表可配置的首选项。它只包含一个标题字符串，该字符串显示在一个或多个可配置首选项之前。这种类型的键是***PSGroupSpecifier***。
> 
> **子窗格：**子窗格类型允许用户导航到新的首选项页面。您使用此类型来实现分层首选项。有关如何配置和使用此首选项类型的更多信息，请参阅“分层首选项”。此类型的键是***PSChildPaneSpecifier***。

为了将日期保存到用户默认值，

```
NSDate *currentDate = [NSDate date];
[[NSUserDefaults standardUserDefaults] setObject:currentDate forKey:@"dateKey"]; 
```

# django - 具有用户定义属性的 Django 购物车

> ID：13317344
> 
> 赞同：1
> 
> 时间：2012-11-09T23:06:19.530
> 
> 标签：django, django-models, django-forms

再会。

我正在构建一个用于订购打印件的应用程序，并且在用户除了从预定义的值中进行选择外，还可以输入她自己的打印数据。

考虑以下：

```
class PrintItem(models.Model):
    """ Something printable. Poster, t-shirt, mug, etc """
    name = models.CharField(max_length=20)

class AttributeType(models.Model):
    """ Size,colour, etc """
    name = models.CharField(max_length=20)

class Attribute(models.Model):
    """ Size: A4, A5 | Colour: Violet, Black """
    name = models.CharField(max_length=20)
    type = models.ForeignKey(AttributeType)

# And a join model
class PrintAttribute(models.Model):
    print_item = models.ForeignKey(PrintItem)
    attributes = models.ManyToManyField(Attribute)

# The user adds these to a cart
class Cart(models.Model):
    user = models.ForeignKey(User)

class CartItem(models.Model):
    cart = models.ForeignKey(Cart)
    print_item = models.ForeignKey(PrintItem) 
```

这一切都很好。用户可以从预定义的属性中进行选择，但是您建议我如何以及在哪里实现用户输入功能？用户找到要打印的项目，从预定义的属性（打印尺寸、墨水颜色）中进行选择，并且可以输入她自己的消息/标语以在项目上打印。

感谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:18:52.827

如果用户自己的标语/消息仅在将打印项目添加到购物车时输入，则标语/消息应为`CartItem`.

# c++ - 禁用 USB 记忆棒的存储功能并自动启动程序

> ID：13317348
> 
> 赞同：1
> 
> 时间：2012-11-09T23:07:01.160
> 
> 标签：c++, c, bash, shell, usb

有没有办法禁用 USB 棒的存储功能并在插入时自动启动特定程序？（以便存储全部保留给相关程序）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T00:23:12.377

不可以。如果不将破坏主机操作系统的恶意软件放在 USB 记忆棒上，并依赖主机操作系统在首次插入设备时自动运行恶意软件，就无法做到这一点。这当然是不受欢迎的，无论是在 Stack Overflow 上，还是在一般情况下。

# ruby-on-rails - 如何通过合并操作的结果使字段唯一？

> ID：13317349
> 
> 赞同：0
> 
> 时间：2012-11-09T23:07:22.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, arel, activemodel

```
class Person
  validates :full_name, presence: true
  validates :display_name, unique: ???
  attr_acessible :full_name, :display_name
end 
```

全名不能唯一，但显示名必须唯一。如果我想将 full_name 作为后备，但我仍然想检查 display_name 的唯一性。

验证唯一性`coalesce(display_name, full_name)`或达到相同效果所需的任何东西的最干净的方法是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-14T01:42:12.697

如果不是，这可能是您所追求的，请进一步解释合并 `validates :display_name, uniqueness => true`

**更新**

在评论中附加信息后

```
validates :display_name, :uniqueness => {:scope => :full_name} 
```

如果这不符合您的要求，那么

```
validates :coalesce

def coalesce
  #put your validation in the method here i.e
  if self.display_name == false
    #then check full_name etc.
  end
end 
```

# android - 位图上的多个不规则命中区域

> ID：13317353
> 
> 赞同：1
> 
> 时间：2012-11-09T23:07:35.003
> 
> 标签：android, layout, bitmap

我正在开发一个在主屏幕上有地图位图图像的应用程序。当用户单击任何区域时，它会将它们带到某个部分。我试图寻找类似的东西，但我无法弄清楚。

我想一种解决方案是为 FrameLayout 中的每个部分制作一个视图，但这似乎是个坏主意。

我拼凑了一个糟糕的解决方案，它根据用户点击对颜色图进行采样，但采样永远不会准确。

![这是地图的图像](../Images/4c53962fdc998936323233bba634aca7.png)

想法？

# php - 裁剪图像但保留默认大小

> ID：13317357
> 
> 赞同：-1
> 
> 时间：2012-11-09T23:07:40.687
> 
> 标签：php, image

我的图像在顶部、底部和左侧都有很多空间。我怎样才能删除那个空间并获得一个新的更小的 jpeg 图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:18:07.660

简单的答案是：你不能。至少不准确。JPEG 压缩会留下导致图像无法正确裁剪的伪影。

但是，如果您坚持，您可以使用容差裁剪图像。

首先，您需要选择“空”颜色。这本身就是一个挑战，但通常左上角的像素`(0,0)`可以正常工作。

获得空白颜色后，扫描顶部行，直到找到颜色不同的像素（或在小范围内，以容纳 JPEG 伪影）。保存找到非空颜色的行号。

从图像底部重复该过程。

然后，对左侧和右侧的列执行相同的操作，但仅在您已经找到的顶部和底部行之间进行扫描（以避免多余地检查角落）。

最后，使用尺寸将图像复制到较小的画布上，然后保存。

# django - 在后台运行 celerymon 的最佳方法

> ID：13317362
> 
> 赞同：1
> 
> 时间：2012-11-09T23:08:09.813
> 
> 标签：django, celery, nagios

由于我是 Django 新手，我需要问什么是启动[celerymon](https://github.com/celery/celerymon/)并让它在后台运行的最佳方法？

我用它来用 Nagios 监控 Celery。

这就是我现在开始的方式：

```
./manage.py celerymon --detach --settings=settings.jacob 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T09:13:44.223

在 Django 中管理进程的一个[常见解决方案是](http://www.google.com/search?q=supervisor%20django)[Supervisor](http://supervisord.org/)。

扩展这个例子应该不难：[How to keep Celery running with Supervisor?](http://thomassileo.com/blog/2012/08/20/how-to-keep-celery-running-with-supervisor/)

# javascript - 移除滚动条但不移除滚动功能

> ID：13317364
> 
> 赞同：28
> 
> 时间：2012-11-09T23:08:20.343
> 
> 标签：javascript, jquery, html, css

我知道你可以定义溢出：隐藏；在 HTML 的主体上删除滚动条，但我仍然希望能够使用鼠标上的箭头或滚轮滚动。

提前感谢您的帮助。

编辑：感谢有关悬停滚动条和自定义条的所有建议。还要感谢您对删除滚动条影响用户体验的所有担忧。我将详细说明，以便您解释我来自哪里。

我有一个圆形页面（如果您使用滚轮或箭头按钮滚动，当它到达底部时，它会重置到页面顶部并重新开始）。一个永无止境的循环。滚动条对此的影响是有限的，当它到达底部并重置到顶部时，用户的鼠标仍位于页面底部，这意味着当他们移动它时，页面顶部和底部之间会有一些闪烁。

我打算移除滚动条并用窗口顶部和底部的箭头按钮替换它。这就是为什么我想完全删除滚动条但保留滚动功能的原因。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-09T23:47:45.983

有一个名为 jscrollpane 的 jQuery 库[http://jscrollpane.kelvinluck.com/#examples](http://jscrollpane.kelvinluck.com/#examples)可以进行很多修改。

但是如果你只想隐藏栏，你也可以把这个滚动条推到视野之外：http: [//jsfiddle.net/H27BK/](http://jsfiddle.net/H27BK/)

```
<div id="content">
    <div id="scrollable"> ... ... ... </div>
</div> 
```

与 CSS

```
#content {
    position: relative;
    width: 200px;
    height: 150px;
    border: 1px solid black;
    overflow: hidden;
}
#scrollable {
   height: 150px;   
   width: 218px; /* #content.width + 18px */
   overflow-y: scroll;    
} 
```

这一切都基于 18 像素的条形宽度。

* * *

所以我们可以做一些javascript滚动条宽度检测脚本或者简单地添加另一个我们放在可滚动div前面的div。

[http://jsfiddle.net/uNzEz/](http://jsfiddle.net/uNzEz/)

HTML 现在是：

```
<div id="content">
<div id="scrollable">
<div id="txt"> ... ... ...
</div></div></div> 
```

与 CSS 类似：

```
#content {
    position: relative;
    width: 200px;
    height: 150px;
    border: 1px solid black;
    overflow: hidden;
}
#scrollable {
   height: 150px;   
   width: 240px; /* the bar-width can be theoretical 240px - 200px = 40px */
   overflow-y: scroll;    
}
#txt {
    width: 200px;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T23:11:57.897

好的，新的答案。我只是开发了一个小技巧来做到这一点，并与 jQuery 混合。

在主体内部创建一个包装器`div`，使用以下 css。

```
body { overflow: hidden; }

#wrapper { overflow: auto; } 
```

然后，只需设置它们各自的高度：

```
$("body").height($(window).height());
$("#wrapper").height($("#text").height()); 
```

### [演示](http://jsfiddle.net/Starx/CHJDN/)

* * *

支持调整大小

```
$(window).trigger('scroll');

$(window).scroll(function() {
    $("body").height($(window).height());
    $("#wrapper").height($("#text").height());    
}); 
```

### [演示](http://jsfiddle.net/Starx/CHJDN/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T23:25:25.800

您可以尝试使用其中一个 jQuery 滚动条插件，它们允许自定义 css 设计...

您可以简单地选择将滚动条设计为不可见，但鼠标功能将保留...

我个人最喜欢的是[malihu](http://manos.malihu.gr/jquery-custom-content-scroller/)，只要确保使用它的鼠标滚轮扩展。

**编辑：**

也许在您查看了自定义设计的滚动条的外观之后，您可以重新考虑显示滚动条。毕竟，它们是有用的和有启发性的。

# powershell - Get-Website 命令返回多个网站

> ID：13317365
> 
> 赞同：1
> 
> 时间：2012-11-09T23:08:21.977
> 
> 标签：powershell, iis-7

在 PowerShell V3 中，我遇到了 Get-Website 命令的问题。

每当我这样做

```
PS c:\> Get-Website -Name "MyWebsite" 
```

它返回该服务器上的所有网站。要么是命令的行为不同，要么是我弄错了。

如果我对返回的对象执行 Get-type，则它的类型为 Array。如果我理解正确，那么它应该只返回一个网站。

请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T16:57:36.813

显然命令[错误链接存在错误](http://connect.microsoft.com/PowerShell/feedback/details/597787/get-website-always-returns-full-list-of-web-sites)

用通配符包裹名称的工作原理：

```
 get-website -name "*MyWebsite*" 
```

# stdout - Windows 7命令提示符是否有等效的stdbuf？

> ID：13317375
> 
> 赞同：6
> 
> 时间：2012-11-09T23:10:03.417
> 
> 标签：stdout, stderr, io-redirection

所以 gnu 有 stdbuf 允许你修改命令的 I/O 流的缓冲。我需要命令提示符的相同功能，但我似乎找不到任何关于它的信息。

我只是试图将程序的 stdout 和 stderr 都输出到日志文件，而不进行缓冲（或者更确切地说，只是为了使它们同步并且以与在控制台中显示的顺序相同）。

我只是错过了一些明显的命令或语法，还是我在 Windows 中运气不佳？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T23:16:27.307

看看[这个](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/redirection.mspx?mfr=true)。我没有要测试的 Windows，但我猜你需要这样的东西：

```
.\foo.bat > .\bar.log 2>&1 
```

这将默认为缓冲 IO，这不是您想要的，但[似乎不可能进行](https://stackoverflow.com/questions/3385427/disable-buffering-on-redirected-stdout-pipe-win32-api-c)无缓冲输出。

# sql-server-2008 - 将文件组添加到现有分区架构

> ID：13317376
> 
> 赞同：0
> 
> 时间：2012-11-09T23:10:04.540
> 
> 标签：sql-server-2008, partitioning

从 BOL 中，我可以看到 ALTER PARTITION SCHEME 的唯一方法是设置 NEXT USED 标志。这似乎没有向架构添加新的文件组（或者至少当我将架构编写为 DROP/CREATE 时它不可见）。是否可以将新文件组添加到现有 SCHEME 或必须在初始创建时完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T22:19:48.690

我尝试使用 NEXT USED 命令更改方案，当我编写方案脚本时，脚本中提到了新的 FG。

我认为您可能没有添加任何将驻留在新 FG 中的数据，这就是方案脚本中未提及它的原因。

这是完整的示例。

Select * from sys.filegroups go

创建分区函数 myRangePF1 (int) 作为值的左侧范围 (1, 100, 1000); 去

创建分区方案 myRangePS1 作为分区 myRangePF1 ALL TO ( [PRIMARY] );

myRangePS1(col1) 上的 CREATE TABLE 测试 (col1 int primary key , col2 int) go

插入测试 Select 2 , 1 union Select 20,2 union Select 200, 3 union Select 2000, 4

去

ALTER PARTITION SCHEME MyRangePS1 NEXT USED [SECONDARY];

去

ALTER PARTITION FUNCTION myRangePF1 () SPLIT RANGE (1500);

-- 编写方案 -- 倒数第二个 FG 是 Secondary CREATE PARTITION SCHEME [myRangePS1] AS PARTITION [myRangePF1] TO ([PRIMARY], [PRIMARY], [PRIMARY], [ **Secondary** ], [PRIMARY]) GO

# java - 难以理解android中的java代码

> ID：13317379
> 
> 赞同：3
> 
> 时间：2012-11-09T23:10:49.080
> 
> 标签：java, android

`(EditText)`以下代码段中的含义是什么？

```
EditText editText = (EditText) findViewById(R.id.edit_message); 
```

我知道这是一个 EditText 类的新实例的声明......

但我对这`(EditText)`部分感到困惑？这是什么意思 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T23:12:21.183

它是一个显式的类转换：返回的通用 View 对象被`findViewById()`转换/转换为 EditText 对象。

```
(EditText) findViewById(R.id.edit_message); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T23:14:10.877

`EditText`是一个 android 类，表示应用程序 Ui 上的编辑字段。在当前情况下，您似乎已经在活动的 xml 中定义了一个 edittext 字段，并且您现在获得了对它的引用，以便您可以使用类上的方法以编程方式与其交互。

你可以看到你可以用它做的一切：[Android 开发者：EditText](http://developer.android.com/reference/android/widget/EditText.html)

如果您没有将其转换为 an ，则`EditText`只能将其作为 View [Android Developer 处理： View](http://developer.android.com/reference/android/view/View.html%20with%20it.)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-09T23:14:35.143

该`findViewById`方法返回一个`View`对象并使其成为它所代表的 EditText 对象，您必须以这种方式进行转换。您实际上想要使用的实例`EditText`而不是`View`这样您就可以访问特定的属性`EditText`

```
EditText editText = findViewById(R.id.edit_message); 
```

上面的代码将无效`EditText`并且`View`不相同，因此需要对其进行转换/转换。

# php - 如何在 PHP 和 WordPress 中获取 Feedburner RSS Feed 订阅者数量

> ID：13317383
> 
> 赞同：1
> 
> 时间：2012-11-09T23:11:15.927
> 
> 标签：php, count, subscription, feedburner

很长一段时间以来，我一直在使用基于 WordPress 的 PHP 函数来检索 Feedburner 订阅者数量，以便能够将订阅者数量显示为文本。

这是功能：

```
/**
 * Fetch Feedburner RSS Feed Subscribers.
 *
 * @param string $feed The feed to fetch.
 * @return int of Feedburner RSS subscribers.
 */
public function get_feedburner_subcribers($feedburner_username){
    $xml = wp_remote_get('http://feedburner.google.com/api/awareness/1.0/GetFeedData?uri=' .$feedburner_username);

    if(is_wp_error($xml))
        return false;

    try {
        $sxe = @new SimpleXMLElement($xml['body']);
    }
    catch (Exception $e) {
        // SimpleXMLElement::__construct produces an E_WARNING error message for
        // each error found in the XML data and throws an exception if errors
        // were detected. Catch any exception and return failure (NULL).
        return;
    }

    return self::format(intval($sxe->feed->entry['circulation']));
} 
```

直到最近，当函数不再返回任何值时，一切都运行良好。

如果我直接粘贴 URL `http://feedburner.google.com/api/awareness/1.0/GetFeedData?uri=my-feedburner-id`，我会得到一个 Google 错误 404 页面。

谷歌是否再次改变了事情，如果是，有没有其他方法可以检索 Feedburner 计数？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T23:21:15.293

[Feedburner](https://developers.google.com/feedburner/) API[不再](http://googlecode.blogspot.co.uk/2011/05/spring-cleaning-for-some-of-our-apis.html)可用。它于 2012 年 10 月 20 日关闭（更多详情请[点击此处](http://www.nevillehobson.com/2012/09/09/prepare-for-goodbye-feedburner-in-october-2012/)，包括关闭日期。）

# java - 如何在 Jboss 域模式下修复从部署应用程序到数据库的重复插入？

> ID：13317384
> 
> 赞同：1
> 
> 时间：2012-11-09T23:11:19.843
> 
> 标签：java, mysql, sql, database, jboss

我正在使用默认设置在域模式下运行 Jboss，并在默认情况下将战争部署`main-server-group`到两个服务器`server-one, server-two`。我想将来自在服务器端运行的应用程序的数据插入到数据库中，但是由于它在两台服务器上运行，因此我对数据库进行了重复插入，因此我使用的是 MySQL。

由于两台服务器上的部署是同时进行的，我无法检查它是否已经插入到数据库中。

是否有允许我在插入 MySQL 之前进行检查的查询？

或者也许我可以进入正在运行的服务器`(server-one or server-two)`并仅在它正在运行时插入数据库`server-one`，但是我如何进入应用程序正在运行的服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T17:00:59.600

仅当一行不存在时，您`INSERT`可以使用类似于以下内容的内容（可能需要针对 mySQL 进行调整，我没有实例）：

```
INSERT INTO Registrar (name) (SELECT name
                              FROM (VALUES ('NEW'), ('EXISTING')) as tmp(name)
                              WHERE NOT EXISTS (SELECT '1'
                                                FROM Registrar
                                                WHERE Registrar.name = tmp.name)) 
```

（工作[SQL Fiddle 示例](http://www.sqlfiddle.com/#!1/e71518/8)- 请注意这是针对 PostgreSQL 运行的，因为 mySQL 窗口不允许`INSERT`）。

`INSERT`如果要生成语句的行太多`VALUES`，请将它们粘贴到临时（断开连接时清理）表中，然后使用该引用而不是`VALUES`引用。

无论如何，我还是有点怀疑你想要做什么......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T12:08:07.650

您可以通过实现 Singleton 服务来使用 HA Singleton 触发插入。这是一个例子：[http ://www.jboss.org/jdf/quickstarts/jboss-as-quickstart/cluster-ha-singleton/](http://www.jboss.org/jdf/quickstarts/jboss-as-quickstart/cluster-ha-singleton/)

# linux - 加速使用多个查找命令的 bash 脚本

> ID：13317386
> 
> 赞同：4
> 
> 时间：2012-11-09T23:11:35.677
> 
> 标签：linux, performance, git, bash, find

我有一个 bash 脚本，可以将项目的一些文件添加到 git，然后同步该分支，随着文件数量的增加，我注意到脚本变得慢得多，所以我想知道我是否正在这样做正确的方法。

这是添加文件的脚本部分：

```
echo "Adding files..."
find . -name '*.js' -exec git add {} \;
find . -name '*.html' -exec git add {} \;
find . -name '*.css' -exec git add {} \;
find . -name '*.py' -exec git add {} \;
find . -name '*.txt' -exec git add {} \;
find . -name '*.jpg' -exec git add {} \;
find . -name '*.sh' -exec git add {} \;

echo "Commit"
git commit -m "'$1'" 
```

我不确定一次调用 find 是否会比使用所有这些单独的命令更快，但我这样做是为了更简单地删除某些类型的文件或添加新文件。

我非常感谢任何提高效率的建议，以不同的方式使用命令或使用不同的命令是完全可以接受的答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T23:19:00.960

如果 git 支持在一个命令中添加多个文件，您可以做的最简单的事情是使用`+`后缀 for `-exec`：

```
find . -name '*.js' -exec git add {} \+ 
```

这会收集大量文件并将它们全部传递给一个命令行中的命令。

那么将要执行的是：

```
git add a.js b.js c.js d.js 
```

代替

```
git add a.js
git add b.js
git add c.js
git add d.js 
```

如果您正在处理数百或数千个文件，这将在执行时间上产生很大差异。

要将所有文件模式组合成一个`find`命令，请使用 find 的“或”运算符：

```
find . \( -name '*.js' -o   \
          -name '*.html' -o \
          -name '*.css' -o  \
          -name '*.py' -o   \
          -name '*.txt' -o  \
          -name '*.jpg' -o  \
          -name '*.sh' \) -exec git add {} + 
```

需要使用`\`before`(`和`)`来保护它们免受其特殊外壳含义的影响。您同样可以使用引号代替：`'('`, `')'`.

`find``find`有一些复杂的选项，学习它们并熟悉它们必须费些力气通过 grep 和 awk 等命名。

我目前最喜欢的扫描 maven/subversion java 项目同时忽略无趣文件的模式之一是：

```
find . \( \( \( -iname .svn -o -iname target -o -iname classes \) -type d -prune -false \) -o \( <your filter expression> \) \) -exec grep -li xxx {} + 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T00:19:02.583

```
find . \( -name '*.js'   -o \
          -name '*.html' -o \
          -name '*.css'  -o \
          -name '*.py'   -o \
          -name '*.txt'  -o \
          -name '*.jpg'  -o \
          -name '*.sh'   \) -exec git add {} + 
```

这意味着您只扫描一次目录结构，这是加速'multiple `find`s'的主要方式；您将“多个”替换为“一个”。这`+`是 POSIX 2008 的补充，`find`但使其更像是`xargs`完全独立的。如果它对您不可用，请考虑使用`-print`and `xargs`（或者，如果您的名称中可能有空格并且您有 GNU `find`and `xargs`，那么`-print0`and `xargs -0`，但如果您有它们，您（可能 - 但请参阅评论）有`+`符号也）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-10T05:28:00.790

如果你

*   有重击 4
*   仅按名称搜索（不按其他条件）

你也可以使用它：

```
shopt -s globstar
git add **/*.{js,html,css,py,txt,jpg,sh} 
```

* * *

笔记：

1.  大括号扩展在文件名扩展之前执行，所以这相当于写

    ```
    git add **/*.js **/*.html etc... 
    ```

2.  `globstar`通过关键字启用递归文件名扩展`**`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-10T06:29:23.730

该`git add`命令可以在没有任何其他 shell 脚本的情况下执行此操作。

```
git add -- '*.js' '*.html' '*.css' ... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-09T23:24:25.860

这可能会更快：

```
F='\.js$|\.html$|\.css$|\.py$|\.txt$|\.jpg$|\.sh$'
find . | egrep $F | xargs git add 
```

如果您希望文件名中有空格或其他特殊字符，则可以使用它的一些变体。

# android - 如何从 Android NDK 获取资产中的文件

> ID：13317387
> 
> 赞同：40
> 
> 时间：2012-11-09T23:11:39.203
> 
> 标签：android, android-ndk, openscenegraph

我正在尝试从本机端访问资产文件夹中的图像文件。现在，我可以成功搜索 assets 文件夹及其子目录，找到我要查找的特定文件：

```
AAssetDir* assetDir = AAssetManager_openDir(asset_manager, "images");
const char* filename;
while ((filename = AAssetDir_getNextFileName(assetDir)) != NULL)
{
   __android_log_print(ANDROID_LOG_DEBUG, "Debug", filename);
}

AAssetDir_close(assetDir); 
```

我也在使用 OSG。我使用以下代码将图像设置为我的着色器的纹理：

```
texture->setImage(osgDB::readImageFile(fileNameWithPath)); 
```

但该文件名也必须包含绝对路径，因为它不在同一目录中。但是我发现我无法获得资产目录的绝对路径，因为它是与 APK 一起压缩的。

由于我无法访问绝对路径，我还能用什么其他方式来获取图像？另请注意，我确实希望将资产文件夹中的文件与 sd 卡保持一致。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-09T23:43:15.353

`AAssetManager_open`您可以使用&从资产中读取图像`AAsset_read`，但由于资产位于 apk 中，您无法获得它的文件路径名 - 它也在那里被压缩。您可以将数据保存到文件并稍后从该文件中读取，或者如果 OSG 允许，您可以直接处理从资产文件中获得的块。

从[这里](http://en.wikibooks.org/wiki/OpenGL_Programming/Android_GLUT_Wrapper#Accessing_assets)：

```
AAssetDir* assetDir = AAssetManager_openDir(mgr, "");
const char* filename = (const char*)NULL;
while ((filename = AAssetDir_getNextFileName(assetDir)) != NULL) {
    AAsset* asset = AAssetManager_open(mgr, filename, AASSET_MODE_STREAMING);
    char buf[BUFSIZ];
    int nb_read = 0;
    FILE* out = fopen(filename, "w");
    while ((nb_read = AAsset_read(asset, buf, BUFSIZ)) > 0)
        fwrite(buf, nb_read, 1, out);
    fclose(out);
    AAsset_close(asset);
}
AAssetDir_close(assetDir); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-02T15:10:53.630

还有一点值得一提的是，android 将可以一次读取的资产大小限制为 1Mb。如果你的文件比那个大，你必须把它分成块。这是我的工作解决方案，它将文件分块加载到字符向量：

```
AAssetManager * mgr = app->activity->assetManager; 
AAssetDir* assetDir = AAssetManager_openDir(mgr, "");

const char* filename;
std::vector<char> buffer;

while ((filename = AAssetDir_getNextFileName(assetDir)) != NULL) 
{
    //search for desired file
    if(!strcmp(filename, /* searched file name */)) 
    {
        AAsset *asset = AAssetManager_open(mgr, filename, AASSET_MODE_STREAMING);

        //holds size of searched file
        off64_t length = AAsset_getLength64(asset);
        //keeps track of remaining bytes to read
        off64_t remaining = AAsset_getRemainingLength64(asset);
        size_t Mb = 1000 *1024; // 1Mb is maximum chunk size for compressed assets
        size_t currChunk;
        buffer.reserve(length);

        //while we have still some data to read
        while (remaining != 0) 
        {
            //set proper size for our next chunk
            if(remaining >= Mb)
            {
                currChunk = Mb;
            }
            else
            {
                currChunk = remaining;
            }
            char chunk[currChunk];

            //read data chunk
            if(AAsset_read(asset, chunk, currChunk) > 0) // returns less than 0 on error
            {
                //and append it to our vector
                buffer.insert(buffer.end(),chunk, chunk + currChunk);
                remaining = AAsset_getRemainingLength64(asset);
            }
        }
        AAsset_close(asset);
    }

} 
```

# google-docs - Google Docs 电子表格过滤器公式修改原则必须包含单词但不是单词

> ID：13317388
> 
> 赞同：0
> 
> 时间：2012-11-09T23:11:42.167
> 
> 标签：google-docs, google-sheets, formula

如果单元格内容包含特定的单词或短语，我将使用以下 Google Docs 公式来显示它们：

=FILTER(Sheet7!B2:B;MMULT(SEARCH(TRANSPOSE(""&G2:G&"");""&Sheet7!B2:B&"");SIGN(ROW(Sheet7!B2:B))))

在一个列中，在这种情况下，我使用列 G，我有一个特定单元格必须包含才能显示的单词列表。一切正常，但现在我想知道是否可以修改此公式，以便我还可以在**单​​元格中添加不需要的单词列表**。我想使用一个原则：

单元格必须包含短语但不包含短语。

例如，如果单元格包含 BLUE SHIRT，则应显示其内容，但如果单元格包含 BLUE SHOES 或 BLUE HAT 等，则不应显示内容。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T00:46:00.250

如果要排除的短语在 H2:H 中：

```
=FILTER(Sheet7!B2:B;
        MMULT(SEARCH(TRANSPOSE(" "&G2:G&" ");" "&Sheet7!B2:B&" ");SIGN(ROW(G2:G)));
        NOT(MMULT(SEARCH(TRANSPOSE(" "&H2:H&" ");" "&Sheet7!B2:B&" ");SIGN(ROW(H2:H))))
       ) 
```

* * *

如前所述，注意 MMULT 的第二个参数中的数组。它的垂直长度应该与第一个参数中水平数组的宽度相匹配。

# python - 在 Windows 上使用 open() 的 Python 异常“[Errno 17] 文件存在”

> ID：13317389
> 
> 赞同：1
> 
> 时间：2012-11-09T23:11:46.897
> 
> 标签：python, windows, io

我在使用标准`open(path, "w")`函数写入文件时遇到了一个奇怪的问题。它在我的 Mac 上按预期工作，但我在运行 Windows 7 的 VM 上尝试了我的脚本，我得到**“[Errno 17] 文件存在”**异常......这让我发疯，因为我真的不明白......我完全知道该文件存在，实际上我的意图是打开它并将内容写入其中......你能解释一下问题可能来自哪里吗？

附言。我还检查了我是否有权使用`os.access(path, os.W_OK)`

呃……在我的 Mac 上，我在 VM 上使用 Python 2.7 和 3.3……但官方文档没有报告函数有任何重大变化：P

**更新：** 重构我的代码以删除线程后（因为我认为它们可能是问题），我得到一个“**权限被拒绝错误**”......该文件没有被任何其他进程使用，因为我已经通过获取模拟了这种情况“**权限错误：该进程无法访问该文件，因为它正在被另一个进程使用**”。我的 python 程序在 Eclipse 中作为 pydev 构建运行......如果我打开 shell 并运行命令，则`f = open(thefile, "w")`不会发生错误。Eclipse 工作区位于用户文档下...所以我有必要的权限...应该是什么？我真的被卡住了:(（在我的 mac os x 上，即使在切换到 python 3.3 和代码重构之后也能正常工作）

# ios - 您可以先将应用程序作为企业应用程序分发，然后在应用程序商店中分发吗？

> ID：13317394
> 
> 赞同：2
> 
> 时间：2012-11-09T23:12:23.303
> 
> 标签：ios, deployment

我们正在开发一款最终将发布到应用商店的应用。但是在此之前，我们希望首先在公司内部分发测试版供私人使用。

有数百名员工，对于临时分发的 100 名限制来说太多了，因此我正在研究企业分发。

我看到了这个关于企业计划的苹果报价：

> “iOS 开发者企业计划适用于创建专有的内部 iOS 应用程序以仅在公司内部部署的公司”。

测试版仅用于内部部署，最终版本仅用于应用商店部署。

这有什么潜在的问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T23:25:10.067

是的。

您需要同时注册 iOS Developer Enterprise Program 和标准 iOS Developer Program（两个不同的 Apple ID）

# html5-canvas - 没有 context.restore() 函数，画布元素上的多个 globalCompositeOperation 结果不起作用

> ID：13317395
> 
> 赞同：1
> 
> 时间：2012-11-09T23:12:23.303
> 
> 标签：html5-canvas

我想在画布上显示多个 globalCompositeOperation 结果。我按照您的浏览器不支持 HTML5 编写了代码

```
<canvas id = "tempCanvas" width = "400" height = "100" style = "display: none;">
</canvas>

<script>
    var context = document.getElementById("canvas").getContext("2d");
    var tempContext = document.getElementById("tempCanvas").getContext("2d");

    var offset = 10;
    var operationValues = new Array();

    operationValues.push("source-atop");
    operationValues.push("source-in");
    operationValues.push("source-out");
    operationValues.push("source-over");

    for (var i = 0; i < operationValues.length; i++) {
        tempContext.save();
        tempContext.clearRect(0, 0, 400, 100);

        //draw destination rectangle
        tempContext.beginPath();
        tempContext.rect(10, 10, 50, 50);
        tempContext.fillStyle = 'red';
        tempContext.fill();

        tempContext.globalCompositeOperation = operationValues[i];

        //draw source rectangle
        tempContext.beginPath();
        tempContext.rect(40, 40, 50, 50);
        tempContext.fillStyle = 'green';
        tempContext.fill();

        /*
         *the result will be incorrect 
         *if you remove tempContext.restore() function
        */
        tempContext.restore();

        context.drawImage(document.getElementById("tempCanvas"), 0, 0);
        context.translate(100, 0);
    }
</script> 
```

为什么我们需要恢复 tempContext？
为什么在不恢复 tempContext 的情况下最后一个结果是正确的？[在http://jsfiddle.net/thepyaethuaung/pcNvA/3/](http://jsfiddle.net/thepyaethuaung/pcNvA/3/)
上查看

# c# - 在 ElasticSearch 上使用 NEST - 如何使用部分填充的对象作为搜索条件

> ID：13317396
> 
> 赞同：3
> 
> 时间：2012-11-09T23:12:24.707
> 
> 标签：c#, elasticsearch, nest

因此，我已经成功创建了“包”对象的索引，并且直接的文本查询运行良好。

我很想知道是否/如何使用部分填充的对象（“包”类型）作为搜索条件？

包看起来像：

```
var packages =  new List<Package> {
            new Package {
                Name = "Maverick",
                TargetBusiness = new Business {
                    Industry = "Retail",
                    BusinessType = BusinessType.Product,
                    LocationType = LocationType.Store
                },
                Description = "Standard package for retail shops"
            },
            new Package {
                Name = "Goose",
                TargetBusiness = new Business {
                    Industry = "Retail",
                    BusinessType = BusinessType.Product,
                    LocationType = LocationType.Online
                },
                Description = "Standard package for ecommerce shops"
            },
            new Package {
                Name = "Viper",
                TargetBusiness = new Business {
                    Industry = "Advertising",
                    BusinessType = BusinessType.Service,
                    LocationType = LocationType.Office
                },
                Description = "Standard package test retail"
            }
        } 
```

查询当前看起来像：

```
var result = client.Search<Package>(x => x.Query(q => q.QueryString(qs => qs.Query("q=retail")))); 
```

但我喜欢有类似的东西：

```
var result = client.Search<Package>(x => x.Query(q => q.Object(new Package{...etc ...}))); 
```

我希望我说得通：D提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T14:27:21.847

```
var result = client.Search<Package>(x => x.Query(q => q.Object(new Package{...etc ...}))); 
```

永远无法工作，因为[Nest](https://github.com/mpdreamz/nest)无法推断要对对象上的每个属性使用什么类型的查询（即术语、前缀、通配符、query_string 等）。

在您的示例中`q=retail`仅有效，因为`elasticsearch`会将查询分解为`q OR retail`. 您可以使用常规 lucene 语法来定位字段，即`targetBusiness.industry:retail`.

在弹性搜索中，如果您的查询字符串未绑定到某个字段，则默认情况下会在该字段中搜索，该`_all`字段将包含对象所有属性的所有术语。这就是为什么如果你真的有很多数据，关闭`_all`支持通常是一个非常好的主意。

[Nest](https://github.com/mpdreamz/nest)目前没有这样的功能，它可以获取部分填充的对象并将其转换为弹性`query_string`搜索查询。

说如果这是您的查询：

```
client.Search<Package>(s=>s
    .From(0)
    .Size(10)
    .Filter(f=>
        f.Term(p=>p.TargetBusiness.Industry, "Advertising")
        && f.Exists(p=>p.Name)
    )
    .Query(q=>
       q.QueryString(qs=>qs
           .Query("ecommerce")
           .Operator(Operator.and)
       )
    )
) 
```

在上面的示例中，您必须创建自己的方法，根据您的包在查询字符串查询中提供要搜索的所有术语。

IE

```
public string MyPackageQueryString(Package package) 
{
    var myTerms = List<string>();
    myTerms.Add(package.Name);
    if (package.TargetBusiness != null)
    {
        myTerms.Add(package.Industry)
        ....
    }
    ...
    return string.Join(" ", myTerms.Where(t=>!string.IsNullOrWhiteSpace(t)));
} 
```

进而

```
client.Search<Package>(s=>s
    .From(0)
    .Size(10)
    .Filter(f=>
        f.Term(p=>p.TargetBusiness.Industry, "Advertising")
        && f.Exists(p=>p.Name)
    )
    .Query(q=>
       q.QueryString(qs=>qs
           .Query(this.MyPackageQueryString(package))
           .Operator(Operator.or)
       )
    )
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T15:19:32.400

这确实帮助我走上了正确的轨道——最终看起来像是一种交叉搜索：用我不想要的所有其他字段搜索每个字段。

最终（可能不正确）与：

```
return _searchClient.Search<Package>(s => s.Query(q => 
        q.Term("industry", criteriaPackage.TargetBusiness.Industry.ToLower()) ||
        q.Term("description", criteriaPackage.TargetBusiness.Description.ToLower()) ||
        q.Term("businessType",((int)criteriaPackage.TargetBusiness.BusinessType).ToString()) ||
        q.Term("locationType", ((int)criteriaPackage.TargetBusiness.LocationType).ToString()) ||
        q.Term("marketSegment", criteriaPackage.TargetBusiness.MarketSegment.ToLower()) ||
        q.Term("offer", criteriaPackage.TargetBusiness.Offer.ToLower()))
      ).Documents; 
```

经过几次单元测试后似乎产生了我想要的结果。

# ruby-on-rails - 红宝石在铁轨上。如何格式化errors.full_messages？

> ID：13317398
> 
> 赞同：1
> 
> 时间：2012-11-09T23:13:02.233
> 
> 标签：ruby-on-rails

我有这样的验证结构：

```
validates :upload_file_name,  :presence   => true,
                              :format     =>{:with => %r{\.(jpg)$}i,:message =>"should have an extension .jpg"}

validates_uniqueness_of :upload_file_name, :message => "is already in the database" 
```

当我输入 rails 控制台时，我得到以下答案

```
 > s.errors.full_messages

 => ["Upload file name is already in the database"] 
```

我需要消息只是“已经在数据库中”而没有“上传文件名”我该怎么做？这个[问题的第二个解决方案对](https://stackoverflow.com/questions/4370503/why-doesnt-rails-errors-full-messages-replace-attribute-and-message-variable)我没有帮助，因为我收到了一个错误：

```
en:
  activerecord:
    errors:
        full_messages:
            format:"%{attribute} %{message}"

1.9.3-p286 :002 > s.save()
   (0.2ms)  begin transaction
  Upload Exists (0.3ms)  SELECT 1 AS one FROM "uploads" WHERE "uploads"."upload_file_name" = 'Katja.jpg' LIMIT 1
   (0.3ms)  rollback transaction
Psych::SyntaxError: (/home/katja/Desktop/tors-jquery-fileupload-rails-paperclip-example-b0b9934/config/locales/en.yml): found character that cannot start any token while scanning for the next token at line 6 column 1
    from /home/katja/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/psych.rb:203:in `parse'
    from /home/katja/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/psych.rb:203:in `parse_stream'
    from /home/katja/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/psych.rb:151:in `parse'
    from /home/katja/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/psych.rb:127:in `load'
    from /home/katja/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/psych.rb:297:in `block in load_file'
    from /home/katja/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/psych.rb:297:in `open'
    from /home/katja/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/psych.rb:297:in `load_file'
    from /home/katja/.rvm/gems/ruby-1.9.3-p286/gems/i18n-0.6.0/lib/i18n/backend/base.rb:171:in `load_yml'
    from /home/katja/.rvm/gems/ruby-1.9.3-p286/gems/i18n-0.6.0/lib/i18n/backend/base.rb:157:in `load_file'
    from /home/katja/.rvm/gems/ruby-1.9.3-p286/gems/i18n-0.6.0/lib/i18n/backend/base.rb:15:in `block in load_translations'
    from /home/katja/.rvm/gems/ruby-1.9.3-p286/gems/i18n-0.6.0/lib/i18n/backend/base.rb:15:in `each'
    from /home/katja/.rvm/gems/ruby-1.9.3-p286/gems/i18n-0.6.0/lib/i18n/backend/base.rb:15:in `load_translations'
    from /home/katja/.rvm/gems/ruby-1.9.3-p286/gems/i18n-0.6.0/lib/i18n/backend/simple.rb:57:in `init_translations'
    from /home/katja/.rvm/gems/ruby-1.9.3-p286/gems/i18n-0.6.0/lib/i18n/backend/simple.rb:71:in `lookup'
    from /home/katja/.rvm/gems/ruby-1.9.3-p286/gems/i18n-0.6.0/lib/i18n/backend/base.rb:26:in `translate'
    from /home/katja/.rvm/gems/ruby-1.9.3-p286/gems/i18n-0.6.0/lib/i18n.rb:156:in `block in translate'
... 25 levels...
    from /home/katja/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.6/lib/active_record/validations.rb:50:in `save'
    from /home/katja/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.6/lib/active_record/attribute_methods/dirty.rb:22:in `save'
    from /home/katja/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.6/lib/active_record/transactions.rb:241:in `block (2 levels) in save'
    from /home/katja/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.6/lib/active_record/transactions.rb:295:in `block in with_transaction_returning_status'
    from /home/katja/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.6/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
    from /home/katja/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.6/lib/active_record/transactions.rb:208:in `transaction'
    from /home/katja/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.6/lib/active_record/transactions.rb:293:in `with_transaction_returning_status'
    from /home/katja/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.6/lib/active_record/transactions.rb:241:in `block in save'
    from /home/katja/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.6/lib/active_record/transactions.rb:252:in `rollback_active_record_state!'
    from /home/katja/.rvm/gems/ruby-1.9.3-p286/gems/activerecord-3.2.6/lib/active_record/transactions.rb:240:in `save'
    from (irb):2
    from /home/katja/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.6/lib/rails/commands/console.rb:47:in `start'
    from /home/katja/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.6/lib/rails/commands/console.rb:8:in `start'
    from /home/katja/.rvm/gems/ruby-1.9.3-p286/gems/railties-3.2.6/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require' 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:03:57.773

解决方案：

```
s.errors.message[:upload_file_name] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-15T14:40:28.367

FWIW 你得到的错误是因为你使用制表符而不是空格来缩进，这在 yaml 中是不允许的。

# c++ - 编译器预处理期间的数学运算

> ID：13317401
> 
> 赞同：5
> 
> 时间：2012-11-09T23:13:31.467
> 
> 标签：c++, gcc, c-preprocessor

我经常遇到需要在编译时生成几个常量来使用位移和屏蔽操作的情况。

例如

```
#define blockbits 8
#define blocksize 256   // could be generated from 2^blockbits
#define blocksize 0xFF  // could be generated from blocksize - 1 
```

我希望所有这些都是从生成的`blockbits`，但是我知道的预处理器中没有可以使用的电源操作。

有谁知道在编译时生成这种东西的简单方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T23:16:02.193

您可以将它们定义为数学表达式：

```
#define blockbits 8
#define blocksize (1 << blockbits) 
#define blockXXXX (blocksize - 1) // changed from blocksize to blockXXXX, since blocksize is already taken 
```

括号是为了确保在其他表达式中使用它们时没有运算符优先级问题。

您还可能希望将名称更改为全部大写，例如`BLOCKBITS`,`BLOCKSIZE`等，这是一种 C++ 命名约定，用于区分宏和普通名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T01:03:59.543

如果你想使用 const 而不是#define，并且如果你想创建一个通用的幂函数（不仅仅是 2 的幂），它会在运行时计算值，你也可以尝试使用这样的模板：

```
template<int num, int pow> struct temp_pow
{
    static const unsigned int result=temp_pow<num, pow-1>::result*num;
};

template<int num> struct temp_pow<num, 1>
{
    static const unsigned int result=num;
};

const int BLOCKBITS = 8;
const int BLOCKSIZE = temp_pow<2,BLOCKBITS>::result;   // could be generated from 2^BLOCKBITS
const int BLOCKSIZE_1 = BLOCKSIZE-1; 
```

# axapta - 如何配置时区？

> ID：13317411
> 
> 赞同：1
> 
> 时间：2012-11-09T23:15:25.627
> 
> 标签：axapta, dynamics-ax-2009

我在 Axe 2009 中遇到以下时区问题：

我在欧洲（西班牙）有一个站点，但用户在墨西哥运营。

为用户配置的时区是墨西哥城的时区，用户通过终端服务器连接到 Ax，服务器时间比西班牙更高级（墨西哥是下午 1 点，西班牙是晚上 8:00）

该问题发生在西班牙服务器上的天数变化中。

如果我进入 Microsoft Dynamics AX 菜单，单击工具，然后单击选项，显示时区是墨西哥的时区。在 Microsoft Dynamics AX 菜单中，单击“工具”，然后单击“会话的日期和时间”，时间会显示与墨西哥时间的会话。

但是当西班牙的墨西哥下午 5 点已经切换到第二天，更改服务器上的日期也会自动更改我在动态 Ax 中的日期，墨西哥的操作仍然是 10 月 31 日下午 5:05 我记录的交易日期为 11 月 1 日上午 00:05，仅举一个例子。

如果我进入 Microsoft Dynamics AX 菜单，单击工具，然后单击会话的日期和时间，当他向我显示会话计划时，例如墨西哥是下午 5:05。

没有任何机会修改日期和时间窗口会话给 OK，然后我再次将日期和时间更新到墨西哥的时区。

这是什么？，有没有办法通过更改服务器上的日期以更改日期不会影响为用户设置的时区的配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:40:46.867

这听起来正是它应该如何工作，你的问题是你的设置。如果我`5:05pm`在墨西哥发布一些东西，它同时`00:05am`在西班牙。因此，当您通过 更改时区时`Tools>Options`，它会更改日期，因为它只是同一时间点的显示。

听起来你真正的问题是事件何时发布到分类账......特别是他们发布的日期。我相信这是因为在 下`Basic>Setup>Company Information`，您的公司设置在墨西哥时区。我认为这个时区决定了一切最终发生的日期/时间。

您应该创建一个单独的公司，或者如果您对在西班牙时间发布的所有内容都满意，然后将其切换到那里。

# ruby-on-rails - 递归更新两个相关对象图的模式

> ID：13317412
> 
> 赞同：2
> 
> 时间：2012-11-09T23:15:26.970
> 
> 标签：ruby-on-rails, ruby, design-patterns, object-graph

想象一下我有一个对象模型：

一个博客有很多文章，一篇文章有​​很多评论

还想象一下，我有两个博客，博客**A**和**博客 B。**

```
Blog A - Article id 1 - Comment id 1 "fun stuff"
       - Article id 2 - Comment id 2 "cool" 
```

和

```
Blog B - Article id 3 - Comment id 3 "no fun" 
```

我需要比较博客 A 和博客 B 的对象图，并根据博客 A 中对象 的**值更新博客 B。**

在这种情况下，博客 B 应该将评论 3 更改为“有趣的东西”，并实例化具有与文章 2 和评论 2 相同的值的新对象。

递归遍历图是显而易见的解决方案，但逻辑变得复杂。我宁愿不重新发明轮子......有没有模式或过程来做到这一点？

我正在使用 Ruby/Rails

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:58:46.573

在阅读了有关访问者模式的更多信息后，我认为它的 Rubyish 变体是解决此问题的最合适的方法。

访问者模式允许您将遍历层次结构的算法与要在层次结构中的每个节点上执行的代码分开。使用 map 或注入/折叠的更实用的方法是可能的……但由于我想重用运算符，将它们分成单独的类似乎更容易。

层次结构在每个模型中实现，它应该定义一个返回孩子的“孩子”方法。

下面是我的实现，基于各种参考，我可以将它包装成一个 gem。

```
module Visitable
  def accept visitor
    child_vals = []
    if respond_to?(:children)
      children.each do |child|
        child_vals << child.accept(visitor)
      end
    end
    val = visitor.visit(self)
    child_vals.any? ? val + child_vals : val
  end
end

class Survey
  attr_accessor :name, :children

  include Visitable

end

class Category
  attr_accessor :name, :children

  include Visitable

end

class Question
  attr_accessor :name
  include Visitable
end

s = Survey.new
s.name = 's1'
c = Category.new
c.name = 'c1'
c2 = Category.new
c2.name = 'c2'
q = Question.new
q.name = 'q1'
q2 = Question.new
q2.name = 'q2'

c.children = [q]
c2.children = [q2]
s.children = [c,c2]

class ReturnVisitor
  def visit obj
    obj.name
  end
end

s.accept(ReturnVistor.new)
-> ['s1', ['c1', ['q1'], ['c2', ['q2']]]]

# "poorly implemented lisp"? 
```

# asp.net-mvc-3 - 我可以将客户端验证限制在特定字段吗？

> ID：13317414
> 
> 赞同：1
> 
> 时间：2012-11-09T23:15:36.187
> 
> 标签：asp.net-mvc-3, unobtrusive-validation, client-side-validation

我有一个表单，我成功地使用带有 [remote] 注释的不显眼验证。我在模型中有带有 [required] 注释的表单中的其他字段，但我不希望对这些字段进行客户端验证。

我只想要 [required] 字段的服务器端验证

我还没有找到解决方案，我想知道它是否容易实现？

编辑 ：

我的代码的一部分

我的模型的一部分：

我想第一个字段：“电子邮件”使用不显眼的验证，第二个字段：“PasswordHash”仅使用服务器端验证，即使它有 [required] 注释。

最后，我不希望我的所有表单字段都出现 AJAX 错误消息。

```
[Required(ErrorMessageResourceType = typeof(Project.Resources.Models.Accounts.User), ErrorMessageResourceName = "EMAIL_REQUIRED")]
[Display(Name = "EMAIL_DISPLAY", ResourceType = typeof(Project.Resources.Models.Accounts.User))]
[Remote("EmailExists", "User", "An account with this email address already exists.")]
public string Email { get; set; }

[Required(ErrorMessageResourceType = typeof(Project.Resources.Models.Accounts.User), ErrorMessageResourceName = "PASSWORDHASH_REQUIRED")]
[DataType(DataType.Password)]
[Display(Name = "PASSWORDHASH_DISPLAY", ResourceType = typeof(Project.Resources.Models.Accounts.User))]
public string PasswordHash { get; set; } 
```

控制器服务器端验证中的部分操作：

```
 [HttpPost]
    public ActionResult Register(User user)
    {

        if (ModelState.IsValid )
        {   

            DataContext.User.Add(user);
            DataContext.SaveChanges();

            return RedirectToAction("Index");
        }

        return View(user);
    } 
```

Ajax 验证：

```
public JsonResult EmailExists(string email)
{
    User user = DataContext.User.SingleOrDefault(x => x.Email == email);

    return user == null ?
        Json(true, JsonRequestBehavior.AllowGet) :
        Json(
            string.Format("an account for address {0} already exists.",
            email), JsonRequestBehavior.AllowGet);
} 
```

部分观点：

```
 @using (Html.BeginForm())
 {
    @Html.ValidationSummary(true)

    <div class="editor-label">
        @Html.LabelFor(model => model.Email)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Email)
        @Html.ValidationMessageFor(model => model.Email)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.PasswordHash)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.PasswordHash)
        @Html.ValidationMessageFor(model => model.PasswordHash)
    </div>

    <p>
        <input type="submit" name="op" id="edit-submit" value="@Project.Resources.Views.User.Register.SUBMIT_FORM" class="form-submit art-button" />
    </p>
 } 
```

当我单击 sumbit 按钮时，我想要一个服务器端验证。

对于一些特定的领域，比如电子邮件，我想要一个 Ajax 验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T22:17:16.587

可能有更好的方法，但实现此目的的一种方法是执行以下操作

```
@using (Html.BeginForm("Register", "Home", FormMethod.Post, new { id = "registerForm" }))
 {
    @Html.ValidationSummary(true)

    <div class="editor-label">
        @Html.LabelFor(model => model.Email)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Email)
        @Html.ValidationMessageFor(model => model.Email)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.PasswordHash)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.PasswordHash)
        @Html.ValidationMessageFor(model => model.PasswordHash)
    </div>

    <p>
        <input type="submit" name="op" id="edit-submit" value="@Project.Resources.Views.User.Register.SUBMIT_FORM" class="form-submit art-button" />
    </p>
 }

<script type="text/javascript">

    // add the rules for the fields that you want client-side validation on
    // leave out the fields that you dont want client-side validation. they will be validated 
    // on server side.
    $("#registerForm").validate({
        rules: {
            Email: { required: true }
        },
        messages: {
            Email: { required : "Email is required" }
        }
    });
</script> 
```

# c# - Visual Studio 可扩展性

> ID：13317421
> 
> 赞同：1
> 
> 时间：2012-11-09T23:16:25.110
> 
> 标签：c#, visual-studio, add-in

基于我们的项目，我们创建了几个项目和项目模板，在使用我们的安装程序安装后可以完美运行。这是非常好的一步，因为它避免了花时间在我们的企业应用程序中设置新项目或模块。现在，当您单击 ASP.NET MVC 应用程序中的 Views 或 Controls 文件夹以及其他类型的项目（例如，当您在您的WPF 应用程序，在添加菜单下你会得到不同的项目，这避免了打开新窗口，你必须搜索项目时间。

我的目标是创建插件或任何它被调用的东西，以便更轻松地使用我们的 SDK，例如，当开发人员右键单击项目时，我们希望在新建菜单下拥有自己的菜单项，以便开发人员能够添加OURPROGRAM 视图，带有验证的 OURPROGRAM 视图。任何人都可以帮助我吗？或者如何提供这方面的好例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T23:19:38.950

在 MSDN 上查找 Visual Studio SDK 文档。

有一个开源 Iron Python 项目是你最好的资源。 [http://msdn.microsoft.com/en-us/library/bb165436(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/bb165436(v=vs.80).aspx)

在 MSDN 上还有一个用于创建基本项目系统的演练。 [http://msdn.microsoft.com/en-us/library/cc512973.aspx](http://msdn.microsoft.com/en-us/library/cc512973.aspx)

# c++ - 从类返回渲染窗口

> ID：13317423
> 
> 赞同：0
> 
> 时间：2012-11-09T23:16:29.453
> 
> 标签：c++, sfml

我对如何从课堂上返回渲染窗口有点困惑，不确定我的返回类型是否错误或语法或两者兼而有之！

我的 main.cpp 有：

```
Window Render(800, 600, "Test");
sf::RenderWindow window = Render.Init(); 
```

我的课程是：

```
 Window::Window(int x, int y, std::string title){
            ResoX = x;
            ResoY = y;
            Title = title;
        }

    sf::RenderWindow Window::Init(){
        return screen(sf::VideoMode(ResoX,ResoY,Title));
    } 
```

类的标题：

```
class Window
{
    private:
        int ResoX, ResoY;            
        std::string Title;
        sf::RenderWindow screen;
    public:
    Window(int, int, std::string);

    sf::RenderWindow Init();
}; 
```

我的错误是：

`error C2665: 'sf::VideoMode::VideoMode' : none of the 3 overloads could convert all the argument types could be 'sf::VideoMode::VideoMode(unsigned int,unsigned int,unsigned int)' while trying to match the argument list '(int, int, std::string)'`

`error C2064: term does not evaluate to a function taking 1 arguments`

有谁知道我如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:34:10.347

来自 SFML 文档（**http://www.sfml-dev.org/documentation/1.6/classsf_1_1VideoMode.php#a9478572db06121f70260e6b9dc21704e**）

sf::VideoMode 构造函数声明为：

```
sf::VideoMode::VideoMode(unsigned int   ModeWidth,
                         unsigned int   ModeHeight,
                         unsigned int   ModeBpp = 32 
                         ) 
```

这意味着您不能将第三个参数作为字符串传递，您可以调用它：

```
return screen(sf::VideoMode(ResoX,ResoY)); 
```

# r - 在 R 中的绘图标题中同时使用下标和换行符

> ID：13317428
> 
> 赞同：1
> 
> 时间：2012-11-09T23:17:03.587
> 
> 标签：r, plotmath

我希望同时包含一个下标和一个标题进入两行，但使用以下命令没有得到想要的结果：

```
base<-'B1'
compare<-'A1'
plot (1, 1, main = bquote('Annual mean' ~CO[2] ~'Flux Difference: \n'  ~.(compare)~ 'minus'~.(base))) 
```

我希望在“通量差异”之后插入一个换行符，但它没有发生，而是这个术语无处不在。请帮我。

谢谢，穆尼什

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T23:25:29.560

这是一个相当普遍的要求，并没有真正干净的答案。Plotmath 不接受“\n”（帮助页面记录了这一点。）一个躲闪方法是使用每一行作为 plotmath 函数的参数`atop`。有时使用的另一个绘图技巧是使用`phantom`空参数列表以允许波浪号不引发错误，但这里不需要：

```
plot (1, 1, main = bquote( atop('Annual mean' ~CO[2] ~'Flux Difference:' , 
                                     .(compare)~ 'minus'~.(base))) ) 
```

![在此处输入图像描述](../Images/382ba64a13ceb46af0bddfaf64c608ce.png)

# internet-explorer - MAILTO 每个互联网浏览器的最大长度？

> ID：13317429
> 
> 赞同：8
> 
> 时间：2012-11-09T23:17:22.270
> 
> 标签：internet-explorer, firefox, google-chrome, opera, mailto

**更新：** *在这个问题之前两年，有人问了一个类似的问题：有效的最大邮件发送： [Peter O](https://stackoverflow.com/users/815724/peter-o)指出的[正文长度](https://stackoverflow.com/questions/4473959/effective-maximum-mailto-body-lengths)。幸运的是，这两个问题的答案是互补的 :-) 浏览器在过去两年里发展了很多，因此我们可以说这个问题是另一个问题的更新;-)*

* * *

规范不限制`mailto`命令长度：

1.  [RFC 6068](https://www.rfc-editor.org/rfc/rfc6068)规范
2.  HTML 4 规范（`mailto`命令是一个 URL）
    （请参阅[这个 SO 答案](https://stackoverflow.com/a/7459346/938111)、[这个 SO 问题的答案和](https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url)[这个](https://stackoverflow.com/questions/10553042/what-is-the-maximum-practical-length-of-a-mailto-url)问题的评论）

因此，`mailto`命令长度取决于 Internet 浏览器的实现。

我猜非常旧的浏览器无法很好地处理`mailto`使用超过 255 个字符的命令。

但是，如今，内存大小不再是`mailto`命令长度的问题。

**`mailto`** ***最常见*** **的互联网浏览器****的****最大长度是多少？**

 **看看浏览器是否收敛到相同的`mailto`长度限制应该很有趣。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-10-09T14:58:24.210

Safari 和大多数电子邮件客户端没有硬限制（取决于可用的 CPU 和 RAM）

**2015 年网络浏览器测试：**

*   苹果浏览器
    *   705000000
    *   2分钟
    *   Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/601.1.56 (KHTML, like Gecko) 版本/9.0 Safari/601.1.56
    *   受限于 16GB RAM
*   火狐
    *   268435455
    *   20 秒
    *   Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:41.0) Gecko/20100101 Firefox/41.0
    *   受最大字符串长度限制
*   铬合金
    *   2097132
    *   1秒
    *   Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.101 Safari/537.36
    *   限定不解释
*   IE
    *   2029
    *   5秒
    *   Mozilla/5.0 (Windows NT 10.0; WOW64; Trident/7.0; .NET4.0C; .NET4.0E; rv:11.0) 像 Gecko
    *   限定不解释

**2015 年电子邮件客户端测试：**

*   Mozilla 雷鸟
    *   2097132 1秒内工作
    *   268435455 使用 100% CPU 2 分钟但未能渲染 body 且不可用
    *   版本 38.3.0
*   海猴子
    *   2097132 在 5 秒内工作
    *   268435455 长时间使用 100% CPU（超过 5 分钟）
    *   2.38 版
*   苹果邮件
    *   500000 次在 14 秒内工作
    *   2097132 长时间使用 100% CPU（超过 5 分钟）
    *   8.2版
*   微软展望
    *   在 1 秒内修剪到 2070
    *   2013 版

**2017 年更新**

Chrome 61 在 macOS（16 GB RAM）上仍然可以使用 2097132 长度；

```
navigator.userAgent;
"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.100 Safari/537.36"
location.href='mailto:?body='+'a'.repeat(2097132); 
```

根据 Windows（32 GB RAM）上的@Chloe，它限制为 1800；

```
"Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.100 Safari/537.36" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T12:22:27.423

仅供参考，我发现谷歌浏览器的最新版本（23.0.1271.95）只允许我生成一个最大长度为：

1910 个字符

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-20T04:26:25.923

除了系统的可用内存之外，Firefox 不会对 URL 的长度施加任何限制，因此您必须在调用进程时查看操作系统对参数最大长度的限制。

此外，您可以将 Web 应用程序设置为 mailto URI 方案处理程序，在这种情况下，限制取决于接受请求的服务器。Firefox 带有一些选项，例如 Gmail 和 Yahoo! [邮件，您可以使用navigator.registerProtocolHandler](https://developer.mozilla.org/en-US/docs/Web-based_protocol_handlers)注册自己的处理程序。如果您好奇，请打开 about:config 并过滤“gecko.handlerService.schemes”以查看您在浏览器中配置的 Web 应用程序处理程序。

我不能说其他浏览器，但是一旦你开始依赖这么多不同的变量（浏览器、可用内存、操作系统、服务器），最好尝试不同的策略。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T09:23:07.940

不幸的是，浏览器和各种客户端非常松散地遵守 RFC 文档，但要回答你的问题，你可以看看[这个答案](https://stackoverflow.com/questions/4473959/effective-maximum-mailto-body-lengths)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-16T00:28:02.313

如果我使用 JavaScript 函数来构建 mailto URL（带有动态标题和正文）然后调用 window.open(url) 来启动默认的电子邮件客户端，这个 URL 的最大长度似乎要短得多。如果 URL 太长，将不会激活电子邮件客户端。

这是仅适用于在 Windows 上运行的浏览器的最大长度。

*   Chrome 64.0.3282.186 上的 2042 个字符
*   Edge 16.16299 上的 2046 个字符
*   Firefox 58.0 上大约 32700 个字符**

# neo4j - 如何使用 Neo4jClient 删除关系

> ID：13317431
> 
> 赞同：0
> 
> 时间：2012-11-09T23:17:30.100
> 
> 标签：neo4j, neo4jclient

在继续使用 neo4j 之前，我试图了解基础知识。喜欢查询方面，但现在尝试使用 neo4jclient 删除并卡住了。

简单设置
root-[:has_user]->user 和 user-[:friends_with]->friend`

对于 Id 为 1 的用户，我想从 Id == 2 中删除指定的用户。用户 1 不再是用户 2 的朋友 :(

无论如何，使用 neo4jclient 我首先检查以确保用户首先是朋友：

```
if (client.Cypher.Start("root", client.RootNode)
    .Match("root-[:HAS_USER]->user-[:FRIEND]->friend")
    .Where((UserNode user, UserNode friend) => user.Id == 1 && friend.Id == id)
    .Return<Node<UserNode>>("user")
    .Results
    .Count() == 1)
{ 
```

现在我正在尝试删除：

```
 client.Cypher.Start("root", client.RootNode)
        .Match("root-[:HAS_USER]->user-[r]->friend")
        .Where("user.Id = 1")
        .And()
        .Where("friend.Id = " + id)
        .And()
        .Where(string.Format("type(r) = 'FRIEND'"))                
        .Delete("r");
} 
```

没有错误，但关系仍然存在。有任何想法吗？

**2012 年 11 月 12 日更新**

得到它的工作。**我首先使用稳定**的 1.8 由 Neo4J 实例更新。我认为最新的 neo4jclient 和 neo4j 服务器无法协同工作。我首先根据 id 获取用户的节点，然后从该节点测试该节点是否有关系，然后能够将其删除。下面的代码：

```
 var currentUserNode = client.Cypher.Start("root", client.RootNode)
            .Match("root-[:HAS_USER]->user")
            .Where((UserNode user) => user.Id == 1)
            .Return<Node<UserNode>>("user")
            .Results.Single();

        if (currentUserNode.StartCypher("user")
                .Match("user-[r]->friend")
                .Where("friend.Id = " + id).And()
                .Where("type(r) = 'FRIEND'")
            .Return<Node<UserNode>>("user")
            .Results
            .Count() == 1)
        {

            currentUserNode.StartCypher("user")
                .Match("user-[r]->friend")
                .Where("friend.Id = " + id).And()
                .Where("type(r) = 'FRIEND'")
                .Delete("r").ExecuteWithoutResults();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:47:30.650

一种方法是改用 CypherFluentQuery：

```
new CypherFluentQuery(client)
    .Start("root", client.RootNode)
    .Match("root-[:HAS_USER]->user-[r]->friend")
    .Where("user.Val = 1").And()
    .Where("friend.Val = " + 2).And()
    .Where("type(r) = 'FRIEND'")
    .Delete("r").ExecuteWithoutResults(); 
```

这将做你想做的事。

我相信这一切都源于一个错误：[https ://bitbucket.org/Readify/neo4jclient/issue/40/should-be-able-to-add-cypher-delete-clause](https://bitbucket.org/Readify/neo4jclient/issue/40/should-be-able-to-add-cypher-delete-clause)

至于为什么`client.Cypher.Start`不能正常工作，我不确定，该错误已修复，并且应该从版本 1.0.0.479 开始工作（撰写本文时的当前版本为 1.0.0.496）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T04:50:37.867

1.  使用 1.0.0.500 之后的任何 Neo4jClient 版本。如果您对原因感兴趣，请参阅[第 45 期。](https://bitbucket.org/Readify/neo4jclient/issue/45)
2.  别忘了打电话`ExecuteWithoutResults`。您问题中的第一个代码示例缺少此内容。这记录在[https://bitbucket.org/Readify/neo4jclient/wiki/cypher](https://bitbucket.org/Readify/neo4jclient/wiki/cypher)

# mysql - 从第 1 列提取 ID，其中第 2 列有多个值

> ID：13317434
> 
> 赞同：0
> 
> 时间：2012-11-09T23:17:32.633
> 
> 标签：mysql

我正在尝试在一个表中显示`'id'`，`'topic_id'`其中 an`'id'`可能具有来自第二列的两个特定值。但是，一些 id 有多个值。

```
id    topic_id
1     red
2     blue
1     blue
4     purple 
```

如果我想显示 id 的 topic_id 是红色和蓝色，查询是什么？

```
select id, topic_id
from db
where topic_id='red, blue'; 
```

结果集是“1,2”而不是只有红色和蓝色的 1。

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T00:29:44.687

我相信这是您想要的查询：

```
select id
from yourtable
where topic_id in ('blue', 'red')
group by id
having count(distinct topic_id) > 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/66321/1)

或者

```
select id
from yourtable
where topic_id in ('blue', 'red')
group by id
having count(distinct topic_id) = 2 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/66321/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T23:20:53.920

您可以使用以下查询。嵌套的 SELECT 查询将返回所有具有 topic_id 'blue' 的 ID。然后它将查看该 ID 列表，如果其中任何一个的 topic_id 为“red”，那么它们将在您的结果集中返回。

```
SELECT id
FROM table1
WHERE id IN (SELECT id FROM table1 WHERE topic_id ='blue')
AND topic_id = 'red'; 
```

[演示](http://sqlfiddle.com/#!2/889ae/7/0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T00:24:35.533

您是否正在寻找 1 个红色蓝色、2 个蓝色、4 个紫色的结果，即多个主题 ID 连接它们？如果是这样，请尝试使用`GROUP_CONCAT`如下功能：

```
 SELECT id, GROUP_CONCAT(topic_id separator ' ')
   FROM db
   WHERE topic_id in ('red', 'blue')
   GROUP BY id
   HAVING count(id) = 2; 
```

如果您希望主题 Id 值由`comma (,)`then 分隔：

```
 SELECT id, GROUP_CONCAT(topic_id separator ', ')
   FROM db
   WHERE topic_id in ('red', 'blue')
   GROUP BY id
   HAVING count(id) = 2; 
```

# ruby-on-rails - 覆盖 mongomapper has_many 关联

> ID：13317436
> 
> 赞同：1
> 
> 时间：2012-11-09T23:17:36.367
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, design-patterns, mongomapper

我使用带有 MongoMapper 的 Rails 3。我想在`has many`关联结果中添加一些记录。

例如，`user has_many posts`

```
class User
  include MongoMapper::Document

  many :posts
end 
```

默认情况下，它只会显示属于用户的帖子，但如果他/她在查询中指定了特殊选项（或在用户的设置菜单中，比如说`show-commented=true`），那么我还需要在用户留下任何评论的地方添加帖子。所以我认为重写`posts`方法

```
def posts
  super + (show_commented_posts ? commented_posts : [])
end 
```

但它当然行不通。如何使用 mongo_mapper 正确覆盖此方法？或者有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T17:56:07.347

在 mongomapper 上覆盖方法是一个非常糟糕的主意，你应该尽量避免这样做，因为它会产生很多难以追溯的问题（我之前已经被这个烧毁了）。

相反，您应该考虑使用范围，例如

```
class Post
  scope :related_to_user, lambda {|user| where('$or' => [ {user_id: user.id}, {'comments.user_id' => user.id}]) }
end 
```

然后你可以打电话

```
Post.related_to_user(current_user) 
```

# java - 从 Java 中的行中读取字符串

> ID：13317442
> 
> 赞同：0
> 
> 时间：2012-11-09T23:18:32.260
> 
> 标签：java, string, special-characters, readline

我有一个 txt 文件，格式如下：

```
Name 'Paul' 9-years old 
```

我如何从“readline”中获取：

```
String the_name="Paul" 
```

和

```
int the_age=9 
```

在Java中，丢弃所有其余部分？

我有：

```
 ...       
    BufferedReader bufferedReader = new BufferedReader(fileReader);
    StringBuffer stringBuffer = new StringBuffer();
    String line;
    while ((line = bufferedReader.readLine()) != null) {

       //put the name value in the_name

       //put age value in the_age

    }
... 
```

请建议，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T23:27:11.663

当您使用`BufferedReader`时，一切都在一条线上，您必须将其拆分以提取数据。然后需要一些额外的格式来删除引号并提取年龄的年份部分。不需要任何花哨的正则表达式：

```
String[] strings = line.split(" ");
if (strings.length >= 3) {
   String the_name= strings[1].replace("'", "");
   String the_age = strings[2].substring(0, strings[2].indexOf("-"));
} 
```

`while`我注意到您在循环中具有此功能。为此，请确保每一行都保持格式：

```
text 'Name' digit-any other text
    ^^    ^^     ^ 
```

重要的字符是

*   空格：拆分数组所需的最少 3 个标记
*   单引号
*   `-`连字符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T00:41:47.173

使用 java.util.regex.Pattern：

```
Pattern pattern = Pattern.compile("Name '(.*)' (\d*)-years old");
for (String line : lines) {
    Matcher matcher = pattern.matcher(line);
    if (matcher.matches()) {
        String theName = matcher.group(1);
        int theAge = Integer.parseInt(matcher.group(2));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T23:33:16.093

您可以使用`String.substring`、`String.indexOf`、`String.lastIndexOf`和`Integer.parseInt`方法，如下所示：

```
String line = "Name 'Paul' 9-years old";
String theName = line.substring(line.indexOf("'") + 1, line.lastIndexOf("'"));
String ageStr = line.substring(line.lastIndexOf("' ") + 2, line.indexOf("-years"));
int theAge = Integer.parseInt(ageStr);
System.out.println(theName + " " + theAge); 
```

输出：

> 保罗 9

# database - LevelDB 的替代方案，允许您读取数据记录的一部分

> ID：13317443
> 
> 赞同：1
> 
> 时间：2012-11-09T23:18:38.063
> 
> 标签：database, nosql, key-value-store, leveldb

我喜欢 LevelDB 作为我的应用程序数据库的外观，但有一个问题。

我想将数据存储到数据库中，但是当我读取数据时，有时我只需要数据的特定部分。以及`leveldb_get(db, readOptions, key, keySize, &size, &err)`我想要类似`leveldb_get_subsection(db, readOptions, key, keySize, offset, size, &err)`但不存在的东西。

当然，我可以将数据索引到更小的部分，但我想知道是否有一个很好的替代 LevelDB 的方法，它允许我读取更有意义的记录/值的子部分。有什么建议吗？

我需要安全同步到磁盘的原子操作，因为数据完整性很重要。我还需要一个C接口。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:15:26.090

解决方案是编写我自己的键值对数据库代码。到目前为止我所做的是：[https ://github.com/MatthewLM/cbitcoin/tree/master/dependencies/storage](https://github.com/MatthewLM/cbitcoin/tree/master/dependencies/storage)

# android - Phonegap 2.1.0 和 android 4.1：文本输入问题

> ID：13317446
> 
> 赞同：4
> 
> 时间：2012-11-09T23:18:44.757
> 
> 标签：android, cordova, input, textinput, android-4.2-jelly-bean

我使用 phonegap 2.1.0 开发了一个应用程序，在 Iphone 和 Android 2.3.x 和 4.0.x 中一切正常。但是，当我在 Android **4.1.2**（Jelly Bean、Galaxy Nexus）中运行我的应用程序时，文本输入在几下之后停止工作。

我在网上搜索过（几十个结果），这似乎是一个常见的问题，没有为此提供解决方案......没有！

Phonegap 团队表示，自 phonegap 2.0.0 以来，此错误已修复，但显然这不是真的。

我知道SO中有一个类似的问题，已经尝试过但没有奏效。有任何想法吗？

# php - RSS 提要上的 Wordpress add_rewrite_rule() 导致重定向

> ID：13317447
> 
> 赞同：0
> 
> 时间：2012-11-09T23:18:46.037
> 
> 标签：php, wordpress

我在域上安装了 Wordpress `example.com`。我想加载相同的页面（RSS2 提要）`example.com/feed.xml`。`example.com/feed/`我的永久链接是为漂亮的 URL 配置的（带有 pattern `%postname%`）。

`example.com/feed/`有效，所以我开始为`feed.xml`. 在`functions.php`，我把这个：

```
function add_feed_xml_route() {
  add_rewrite_rule('feed.xml', 'index.php?feed=rss2', 'top');
}

add_action('init', 'add_feed_xml_route'); 
```

我刷新了路线，但是当我转到 时，它会在显示提要之前`example.com/feed.xml`重定向到。`/feed.xml/feed/`为什么会重定向？我该如何阻止它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T23:23:52.220

我将通过您的 .htaccess 文件执行此操作，而不是通过 functions.php 执行此操作。它看起来像这样：

`redirect 301 /feed.xml http://example.com/feed/`

如果您想要有关重定向的基本教程，请查看[http://www.tamingthebeast.net/articles3/spiders-301-redirect.htm](http://www.tamingthebeast.net/articles3/spiders-301-redirect.htm)。

我希望这会有所帮助。

# sql - 在 iframe 中检索 sql 数据

> ID：13317448
> 
> 赞同：1
> 
> 时间：2012-11-09T23:18:51.303
> 
> 标签：sql, iframe

我有一个 php 脚本 (ini.php)，它在“main.php”内的 iframe 中打开： `<iframe src='ini.php' style='width:650px;' frameborder='0' id="IDMain" allowtransparency="YES" scrolling="NO"></iframe>` SQL 不会检索“ini.php”中的数据。但是，如果我将“ini.php”的代码合并到“main.php”中，而不使用 iframe，则查询会检索所有信息。我必须有一个 iframe 才能更改同一个 iframe 中的所有不同脚本。这里有什么帮助吗？谢谢

此外更多信息：

登录后 main.php 处于会话中。以前我在每个脚本中都重复了整个框架，一切正常。main.php，ini.php，等等。每个脚本都有页眉、左、右、主要和页脚。为了让它更快更容易，我决定制作名为 main.php 的主脚本，其中包含一个名为 config.inc.php 的包含多个功能的脚本，还连接到数据库，以将一些数据检索到标题中，left ，主要区域（iframe）的右侧和页脚侧，其中其他不同的脚本，只是为了在 iframe 内部打开，维护周围的信息。在 iframe 中运行的每个脚本（如 ini.php）还包括 config.inc.php 文件，以连接到数据库。但不检索任何信息配置脚本中与数据库的连接是：

`<$connect=mysql_connect ("localhost","database","password") or die ('I cannot connect to the database because: ' . mysql_error()); mysql_select_db ("database", $connect) or die ("'I cannot connect to the database "); >`

ini，php（和其他）中的查询是：

`

```
 if ($id) { 
$id_session=$_SESSION['id_session'];
$namesession=$_SESSION['name_session'];
$sql="select * from data where id='$id_sessino' limit 1 ";
$result=mysql_db_query("database",$sql);
$regist=mysql_fetch_array($result);
$id=$regist["id"];
$id_session=$regist["id"];
$namesession=$regist["name_session"]; 
$country=$regist["country"];
And soo on…
} 
```

`

我希望通过信息可以清楚地说明我的意思。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:53:57.360

检查[mysql_db_query](http://ua2.php.net/manual/en/function.mysql-db-query.php)的 PHP 帮助。由于你没有给它任何打开的数据库链接，它会尝试做一些默认的魔法，这可能会失败，因为正如我在评论中提到的，这两个脚本（在父窗口和 iframe 内）是单独运行的并且没有关于彼此的想法 *除非您正在进行一些同步，否则代码片段中不会显示。这意味着 iframe 脚本对您在父页面中打开的连接一无所知，因此失败。检查您的日志，您应该会看到一些`E_WARNING`投诉（如果您正在记录此级别）。

`MySQLi`此外，正如文档所述，使用或`PDO_MySQL`扩展可能会更好。但原则将保持不变 - questoin 中的脚本必须与数据库建立开放连接（我不确定您是否可以*轻松安全地*将开放从一个脚本转移到另一个脚本，所以您很可能必须在 iframe 脚本中完成所有操作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T08:07:56.320

尝试两件事，首先我将 MySQL_fetch_array 部分更改为

```
While($regist = mysql_fetch_array($result))
{
//Code goes here
} 
```

其次尝试将数组 vales 称为数字而不是名称，因此 regist['id'] 将变为 regist[0]。它们将按照数据库中的顺序排列。

另外，既然您在创建连接时选择了数据库，为什么不直接使用 mysql_query("QUERY HERE"); 而不是 mysql_db_query

# android - 在 RelativeLayout > ontouch 中使用 ScrollView 的片段不起作用

> ID：13317450
> 
> 赞同：1
> 
> 时间：2012-11-09T23:19:25.357
> 
> 标签：android, scrollview, android-relativelayout, touch-event

几个小时以来，我一直在努力寻找解决方案，感觉就像我在 stackoverflow 上搜索了每个问题并尝试了布局中的所有内容。在我尝试下面显示的布局之前，edittext 和两个图像按钮位于滚动视图内。在这个旧布局中，ontouch 在我的片段中完美运行，但是一旦我使用edittext 和两个图像按钮拉出相对布局，ontouch 就没有被触发。有人可以帮我解决这个问题吗？任何帮助表示赞赏。谢谢

```
View fragmentView = inflater.inflate(R.layout.request, container, false);

fragmentView.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent event) {

            }
} 
```

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"  
        android:layout_height="fill_parent"
        android:background="#BDCCE0" >

    <EditText
        android:id="@+id/etsearch"
        android:layout_width="210dp"
        android:layout_height="wrap_content"
        android:layout_marginLeft="6dp"
        android:layout_marginTop="10dp"
        android:hint="search..."
        android:singleLine="true"
        android:imeOptions="actionDone" />

    <ImageButton
        android:id="@+id/bsearch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/etsearch"
        android:layout_marginTop="9dp"
        android:src="@drawable/search" />

    <ImageButton
        android:id="@+id/bupdaterequests"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_toRightOf="@id/bsearch"
        android:layout_marginTop="9dp"
        android:src="@drawable/refresh" />

  <ScrollView
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent"
        android:fillViewport="true"
        android:background="#BDCCE0"
        android:layout_below="@id/etsearch" >

   <TableLayout
       android:id="@+id/myTableLayout"  
       android:layout_width="fill_parent"  
       android:layout_height="wrap_content" >    

   </TableLayout> 
 </ScrollView>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T23:25:07.333

TouchEvent 从“最高”元素开始，并“向下”渗透到 View 层次结构中，直到它被某个事件消耗。在这种情况下，ScrollView、Buttons 或 EditText 都会在事件到达 RelativeLayout 之前消耗掉事件...

* * *

> 基本上我只想当有人在编辑文本之外触摸键盘消失时。

我通过简单地制作根布局`clickable`和`focusable`.

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:clickable="true"
    android:focusable="true"
    android:focusableInTouchMode="true" > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-06T08:17:23.933

`android:clickable="true"`解决了这个问题。。

# javascript - 更改标签栏位置时如何保留图像？

> ID：13317452
> 
> 赞同：0
> 
> 时间：2012-11-09T23:19:44.077
> 
> 标签：javascript, sencha-touch, sass

嗨，我想知道当我将选项卡设置为左侧时如何保留 icnClass：

```
Ext.define("GS.view.Main", {
extend: 'Ext.tab.Panel',
requires: ['Ext.TitleBar'],

config: {
    tabBarPosition:'left',
    scrollable: true,

    styleHtmlContent: false,

    items: [
     {
        xtype: 'panelhome'  
     },
     {
        xtype: 'contactform'
     },
     {
        xtype: 'blog'
     }
    ]
}
});

Ext.define("GS.view.Blog",{
extend: 'Ext.navigation.View',
xtype:'blog',

config:{
    title:'Blog',
    iconCls:'bolt',             

    items:{
        xtype:'list',
        itemTpl: '{title}',
        title: 'Recent Posts',

        store:{
            autoLoad:true,
            fields: ['title','author', 'content'],

            proxy:{
                type:'jsonp',
                url:'...',
                reader: {
                    type:'json',
                    rootProperty: 'responseData.feed.entries'
                }
            }
        }
    }
}
}); 
```

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:00:59.777

通过 sass 修复了它。查看以下元素

```
.x-tabbar-dark.x-docked-left .x-tab-active .x-button-icon {}
.x-tabbar-dark.x-docked-left .x-tab .x-button-icon {}
.x-tabbar-dark.x-docked-left .x-tab-active {}
.x-tabbar.x-docked-left .x-tab .x-button-icon {}
.x-tabbar.x-docked-left .x-tab{}
.x-tabbar-dark.x-docked-left .x-tab-active .x-button-icon {}
.x-tab .x-button-icon.home, .x-button .x-button-icon.x-icon-mask.home {} 
```

# jquery - 禁止在小于 768px 的浏览器上加载 Jaralax

> ID：13317454
> 
> 赞同：1
> 
> 时间：2012-11-09T23:19:52.520
> 
> 标签：jquery, html, css, jquery-plugins, parallax

我不是最擅长 jQuery，所以我可以在这方面使用一些帮助。我正在构建一个响应式站点，并希望为宽度小于 768 像素的浏览器禁用 Jarallax 动画。有关代码的工作示例和示例，您可以查看：

[http://www.2gis.ru/dr/](http://www.2gis.ru/dr/)

任何帮助，将不胜感激。

# sql - SQL Server 2008 查询 - 查找不存在于不同表的两个不同列中的电子邮件

> ID：13317455
> 
> 赞同：3
> 
> 时间：2012-11-09T23:20:13.857
> 
> 标签：sql, sql-server-2008-r2

我无法解决这个问题，你能帮帮我吗？

我有一张桌子`dbo.Users`--> 在这张桌子上我有一`Email`列，里面有很多电子邮件

和

我有另一个表`dbo.aspnet_Membership`-> 在这个表中我有`Email`列并且在许多电子邮件中

而且我只想提取`Emails`不在两列中的内容。

例如：

tab1 col1 ：

```
111@111.com
222@222.com
333@333.com 
```

选项卡 2 列 2：

```
111@111.com
222@222.com 
```

我会提取（或删除）所有`333@333.com`电子邮件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T23:26:28.647

由于您使用的是 SQL Server 2008，因此可以[**`EXCEPT`**](http://msdn.microsoft.com/en-us/library/ms188055.aspx)像这样使用 set 运算符：

```
SELECT EMAIL FROM Table1
EXCEPT 
SELECT Email FROM table2 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!3/9049d/1)

**更新：**这将为您提供`Table1`第二个表中不存在的所有电子邮件。但是，如果您想获取两个表中未显示的所有电子邮件（感谢[**@gilly3**](https://stackoverflow.com/users/361684/gilly3)），请尝试以下操作：

```
(
  SELECT EMAIL FROM Table1
  EXCEPT 
  SELECT Email FROM table2
)
UNION ALL
(
  SELECT EMAIL FROM Table2
  EXCEPT 
  SELECT Email FROM table1
) 
```

## [更新的 SQL Fiddle 演示](http://sqlfiddle.com/#!3/57642/7)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T20:57:55.250

```
SELECT *
FROM dbo.Users u FULL JOIN dbo.aspnet_Membership m ON u.Email = m.Email
WHERE u.Email IS NULL OR m.Email IS NULL 
```

[SQL Fiddle](http://sqlfiddle.com/#!3/c09be/6/0)演示

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T23:23:33.490

```
Select *
from dbo.Users
where email not in
(select email
from dbo.aspnet_Membership) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T23:27:32.540

尝试这个

```
Select * From Users WHERE email NOT IN
(
  Select email From Users u
  JOIN aspnet_Membership m
     ON u.email = m.email
)

Select * From aspnet_Membership WHERE email NOT IN
(
  Select email From Users u
  JOIN aspnet_Membership m
     ON u.email = m.email
) 
```

您可以将选择语句更改为 DELETE

# python - 使用 Selenium Webdriver 下载时命名文件

> ID：13317457
> 
> 赞同：12
> 
> 时间：2012-11-09T23:20:40.997
> 
> 标签：python, selenium, webdriver, selenium-webdriver

我看到你可以通过Webdriver设置下载文件到哪里，如下：

```
fp = webdriver.FirefoxProfile()

fp.set_preference("browser.download.folderList",2)
fp.set_preference("browser.download.manager.showWhenStarting",False)
fp.set_preference("browser.download.dir",getcwd())
fp.set_preference("browser.helperApps.neverAsk.saveToDisk","text/csv")

browser = webdriver.Firefox(firefox_profile=fp) 
```

但是，我想知道是否有类似的方法可以在下载文件时为其命名？最好可能与配置文件无关，因为我将通过一个浏览器实例下载约 6000 个文件，并且不希望每次下载都重新启动驱动程序。

* * *

编辑：使用所选答案建议的代码的解决方案。每次下载后重命名文件。

```
import os
os.chdir(SAVE_TO_DIRECTORY)
files = filter(os.path.isfile, os.listdir(SAVE_TO_DIRECTORY))
files = [os.path.join(SAVE_TO_DIRECTORY, f) for f in files] # add path to each file
files.sort(key=lambda x: os.path.getmtime(x))
newest_file = files[-1]
os.rename(newest_file, docName+".pdf") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T08:33:20.830

我会建议一种有点奇怪的方法：如果可能，不要使用 Selenium 下载文件。

我的意思是获取文件 URL 并使用`urllib`库下载文件并以“手动”方式将其保存到磁盘。问题是 selenium 没有处理 Windows 对话框的工具，例如“另存为”对话框。我不确定，但我怀疑它根本不能处理任何操作系统对话框，请纠正我我错了。:)

这是一个小例子：

```
import urllib
urllib.urlretrieve( "http://www.yourhost.com/yourfile.ext", "your-file-name.ext") 
```

我们这里唯一的工作是确保我们处理所有 urllib 异常。请参阅[http://docs.python.org/2/library/urllib.html#urllib.urlretrieve](http://docs.python.org/2/library/urllib.html#urllib.urlretrieve)了解更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T23:38:18.630

我不知道是否有一个纯 Selenium 处理程序，但是当我需要对下载的文件做某事时，这是我所做的。

1.  **设置一个循环，轮询您的下载目录以查找没有**扩展名的最新文件`.part`（这表示部分下载，如果不考虑，偶尔会出错。在此设置一个计时器以确保您不会进入在超时/其他错误导致下载无法完成的情况下无限循环。我`ls -t <dirname>`在 Linux 中使用了命令的输出（我的旧代码使用`commands`，已弃用，所以我不会在这里展示它:)）并得到了第一个文件使用

    ```
    # result = output of ls -t
    result = result.split('\n')[1].split(' ')[-1] 
    ```

2.  如果`while`循环成功退出，目录中最顶层的文件将是您的文件，然后您可以使用`os.rename`（或您喜欢的任何其他内容）对其进行修改。

可能不是您正在寻找的答案，但希望它能为您指明正确的方向。

# php - 使用 URL 源的 jQuery-UI 自动完成功能适用于字符串数组，但不适用于对象数组

> ID：13317470
> 
> 赞同：1
> 
> 时间：2012-11-09T23:22:34.700
> 
> 标签：php, json, jquery-ui, autocomplete

使用 jQuery 1.7.2 和 jQuery UI 1.8.18。如果我使用本地数据作为源属性，一切都会按预期工作。根据文档，源数组可以是字符串值数组或对象数组：

> 数组：数组可用于本地数据。有两种支持的格式：
> 
> 字符串数组：[ "Choice1", "Choice2" ]
> 
> 具有标签和值属性的对象数组： [ { label: "Choice1", value: "value1" }, ... ]

此外，源属性可以是响应格式为如上所示的 JSON 数据的 URL：

> 字符串：使用字符串时，自动完成插件期望该字符串指向将返回 JSON 数据的 URL 资源。它可以在同一台主机上，也可以在不同的主机上（必须提供 JSONP）。自动完成插件不过滤结果，而是添加了一个带有术语字段的查询字符串，服务器端脚本应该使用它来过滤结果。例如，如果源选项设置为“http://example.com”并且用户键入 foo，则会向[http://example.com?term=foo](http://example.com?term=foo)发出 GET 请求。数据本身可以采用与上述本地数据相同的格式。

如果我的 JSON 响应程序返回一个简单的字符串数组，那么自动完成功能将完全正常工作。但是，如果我的 JSON 响应程序返回一个按上述格式设置的对象数组，则会向 URL 发出请求，但永远不会填充下拉列表。JavaScript 控制台没有显示任何错误。

自动完成调用如下所示：

```
var source_url = '/json/codes.php?type=globalcode&cid=25';
$('.gcode').autocomplete({
        minLength: 2,
        source: source_url
}); 
```

响应程序是用 PHP 编写的。在我解决这个问题之前，它只是一个存根：

```
header('Content-Type: application/json, charset=UTF-8');
...
if( !$_REQUEST['type'] || !$_REQUEST['cid'] ){
        echo('[]');
        return false;
}
if( $_REQUEST['type'] == 'globalcode' ){
        $cid = sprintf("%d", $_REQUEST['cid']);
        $stub = "[ { label: 'Label for 1234', value: '1234' }, { label: 'Label for 5678', value: '5678' } ]";

        echo( $stub );
        return false;
} 
```

同样，当数据是本地数据时，它适用于两种数组，而当数据是远程时，它适用于字符串值数组。当数据是一个远程对象数组时，列表永远不会被填充并且 JavaScript 不会抛出任何错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T23:36:12.803

您的 JSON 无效，这从未在控制台中记录。JSON 不能有[单引号](https://stackoverflow.com/questions/2275359/jquery-single-quote-in-json-response)，使用双引号，也可以使用[JSONLint](http://jsonlint.com/)来检查你的 JSON。

这是您的 JSON 的有效版本：

```
[
  {
    "label": "Labelfor1234",
    "value": "1234"
  },
  {
    "label": "Labelfor5678",
    "value": "5678"
  }
] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-07T13:54:04.330

您可以改用 json_encode()

```
$stub = array(
 array(
    "label"=>"Labelfor1234",
    "value"=>"1234"
 ),
 array(
    "label"=>"Labelfor5678",
    "value"=>"5678"
 )
);
echo json_encode($stub); 
```

# google-app-engine - GAE Golang - urlfetch 超时？

> ID：13317472
> 
> 赞同：4
> 
> 时间：2012-11-09T23:22:40.753
> 
> 标签：google-app-engine, timeout, go, urlfetch

我在 Go 中的 Google App Engine 上遇到 urlfetch 超时问题。该应用程序似乎不想花费超过 5 秒的超时时间（它会忽略更长的超时时间并在自己的时间后超时）。

我的代码是：

```
var TimeoutDuration time.Duration = time.Second*30

func Call(c appengine.Context, address string, allowInvalidServerCertificate bool, method string, id interface{}, params []interface{})(map[string]interface{}, error){
    data, err := json.Marshal(map[string]interface{}{
        "method": method,
        "id":     id,
        "params": params,
    })
    if err != nil {
        return nil, err
    }

    req, err:=http.NewRequest("POST", address, strings.NewReader(string(data)))
    if err!=nil{
        return nil, err
    }

    tr := &urlfetch.Transport{Context: c, Deadline: TimeoutDuration, AllowInvalidServerCertificate: allowInvalidServerCertificate}

    resp, err:=tr.RoundTrip(req)
    if err != nil {
        return nil, err
    }
    defer resp.Body.Close()
    body, err := ioutil.ReadAll(resp.Body)
    if err != nil {
        return nil, err
    }
    result := make(map[string]interface{})
    err = json.Unmarshal(body, &result)
    if err != nil {
        return nil, err
    }
    return result, nil
} 
```

无论我尝试设置什么`TimeoutDuration`，应用程序都会在大约 5 秒后超时。如何防止它这样做？我在代码中犯了一些错误吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-10-20T18:24:17.520

您需要像这样传递持续时间（否则它将默认为 5 秒超时）：

```
tr := &urlfetch.Transport{Context: c, Deadline: time.Duration(30) * time.Second} 
```

**2016 年 1 月 2 日更新：**

使用新的 GAE golang 包 ( `google.golang.org/appengine/*`)，这种情况发生了变化。`urlfetch`不再接收传输中的截止时间持续时间。

您现在应该通过新的上下文包设置超时。例如，这是您设置 1 分钟截止日期的方式：

```
func someFunc(ctx context.Context) {
    ctx_with_deadline, _ := context.WithTimeout(ctx, 1*time.Minute)
    client := &http.Client{
        Transport: &oauth2.Transport{
            Base:   &urlfetch.Transport{Context: ctx_with_deadline},
        },
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-13T10:11:23.587

试试下面的代码：

```
// createClient is urlfetch.Client with Deadline
func createClient(context appengine.Context, t time.Duration) *http.Client {
    return &http.Client{
        Transport: &urlfetch.Transport{
            Context:  context,
            Deadline: t,
        },
    }
} 
```

以下是如何使用它。

```
// urlfetch
client := createClient(c, time.Second*60) 
```

礼貌@gosharplite

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T18:53:26.337

查看 Go 的 appengine 的源代码：

*   [http://code.google.com/p/appengine-go/source/browse/appengine/urlfetch/urlfetch.go](http://code.google.com/p/appengine-go/source/browse/appengine/urlfetch/urlfetch.go)

和protobuffer生成的代码：

*   [http://code.google.com/p/appengine-go/source/browse/appengine_internal/urlfetch/urlfetch_service.pb.go](http://code.google.com/p/appengine-go/source/browse/appengine_internal/urlfetch/urlfetch_service.pb.go)

看起来 Duration 本身应该没有问题。

我的猜测是 appengine 中的整个应用程序在 5 秒后超时。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-06T14:22:38.233

对我来说，这有效：

```
ctx_with_deadline, _ := context.WithTimeout(ctx, 15*time.Second)
client := urlfetch.Client(ctx_with_deadline) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-22T12:03:05.587

现在随着图书馆的最新更新而改变了这一点。现在超时/延迟的持续时间必须由上下文携带，其中`urlfetch.transport`不再有 Deadline 字段。`context.WithTimeout`或者`context.WithDeadline`是使用的方法，这里是链接[https://godoc.org/golang.org/x/net/context#WithTimeout](https://godoc.org/golang.org/x/net/context#WithTimeout)

# java - jni xlib 窗口句柄

> ID：13317478
> 
> 赞同：1
> 
> 时间：2012-11-09T23:23:48.410
> 
> 标签：java, java-native-interface, xlib

在jdk中使用jawt jni库，我可以在AWT画布上从C绘制......

但是我需要的是一个 Xlib Window 句柄

jawt_X11DrawingSurfaceInfo 结构提供了一个 xlib VisualID 句柄，这可以变成一个窗口句柄吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T07:49:51.927

查看[JNA 库](https://github.com/twall/jna/blob/master/native/dispatch.c#L2921)源代码，他们使用`drawable`字段 in`JAWT_X11DrawingSurfaceInfo`来返回 xlib 的窗口句柄。

# java - 将两个整数传递给接受一个整数的方法在 JAVA 中是如何工作的？（ 安卓 ）

> ID：13317480
> 
> 赞同：0
> 
> 时间：2012-11-09T23:24:01.050
> 
> 标签：java, android, methods, parameters, method-parameters

请参阅 Amitku 的回答：[为 EditText 设置 inputType？](https://stackoverflow.com/questions/2586301/set-inputtype-for-an-edittext)

谁能解释一下传递 (int | int) 对接受 (int) 的方法是如何工作的？

谢谢你。

回答后编辑：

但是当你只传递其中一个参数时，方法并没有按预期工作？那么，如果我们只传递其中一个整数，究竟会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:26:56.637

是“按位包含 OR”运算符，请在[Java Docs](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)`|`中阅读有关它的更多信息。

[您可以在此处查看有关按位运算符](http://en.wikipedia.org/wiki/Bitwise_operation#OR)如何工作的一些表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T23:27:18.170

只有一个 int 被传递。| 是一个中缀运算符，它返回其参数的按位或。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T23:27:50.360

它实际上只有一个`int`，因为它`int | int`是一个按位 OR 导致一个`int`.

# silverlight - LightSwitch 'Microsoft-LightSwitch-Security-ServerGenerated-Implementation-AuthenticationService.svc' 不存在

> ID：13317481
> 
> 赞同：5
> 
> 时间：2012-11-09T23:24:05.190
> 
> 标签：silverlight, iis-7.5, wcf-ria-services, visual-studio-lightswitch

今天，当我尝试将 Lightswitch 应用程序部署到运行 IIS 7.5 的 Windows 2008 R2 服务器时，我已经把我的挫败感发挥到了极致。导航到应用程序后，我收到以下[错误](http://blogs.msdn.com/b/lightswitch/archive/2011/09/20/diagnosing-problems-in-a-deployed-lightswitch-application-eric-erhardt.aspx)：

> 查询“GetAuthenticationInfo”的加载操作失败。远程服务器返回错误：NotFound。

.NET 跟踪和服务器事件日志都有这样的说法：

> 发件人信息：System.ServiceModel.Activation.HostedHttpRequestAsyncResult/63835064 异常：System.Web.HttpException (0x80004005)：**服务“/Web/Microsoft-LightSwitch-Security-ServerGenerated-Implementation-AuthenticationService.svc”不存在**。

配置详情如下：

*   我在访问控制选项下选择了“不启用身份验证”。
*   在我的“应用程序服务器配置”发布选项中，我选择了未选中先决条件复选框的 IIS 服务器。
*   在“发布输出”下，我正在本地磁盘上创建一个包。后来，我将该包复制到服务器并手动运行 .deploy.cmd ，这似乎工作正常。
*   我在“其他连接”下的数据库连接是正确的——它是一个可以在我的机器上运行的 SQL 登录，并且该服务器上的其他站点可以毫无问题地连接到同一个数据库服务器。

在服务器端：

*   该站点使用 ApplicationPoolIdentity 在其自己的 .NET 4.0 集成模式下的应用程序池中运行。
*   仅启用匿名身份验证。

我试过的：

*   从 Web 平台安装程序安装了 2011 年和 2012 年的所有 Lightswitch 东西。
*   安装 RiaServices.msi。
*   修复了 .NET 4.5。
*   跑aspnet_regiis -i

这些都没有任何效果。我对上面粗体错误的唯一提示是 .svc 是在运行时生成的，如果 WCF 端出现其他问题，它将引发 404 错误。（这就是我尝试安装 RiaServices.msi 的原因。）

我能够“现在远程发布到服务器”到我自己的本地 IIS Express，并且那里的应用程序运行良好。但是，将这些文件复制到远程服务器会产生与以前相同的结果。

有关如何进一步解决此问题的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-13T20:33:00.130

如果您在安装 Visual Studio 2013 或在开发盒上安装了具有比 5.0.0.0 更新的 OData 的 .NET 版本后遇到此问题，则问题是因为安装了新版本的 OData 程序集和 LightSwitch 服务器项目现在正在使用这些（不兼容）。您可以通过更新 Server.csproj（或 vbproj）以引用以前版本的 OData 程序集来解决此问题。

将 HintPath 节点添加到 Server\Server.CSProj 中的以下 5 个程序集条目

```
<Reference Include="Microsoft.Data.Edm">
  <HintPath>C:\Program Files (x86)\Microsoft WCF Data Services\5.0\bin\.NETFramework\Microsoft.Data.Edm.dll</HintPath>
  <Private>True</Private>
</Reference>
<Reference Include="Microsoft.Data.OData">
  <HintPath>C:\Program Files (x86)\Microsoft WCF Data Services\5.0\bin\.NETFramework\Microsoft.Data.OData.dll</HintPath>
  <Private>True</Private>
</Reference>
<Reference Include="Microsoft.Data.Services">
  <HintPath>C:\Program Files (x86)\Microsoft WCF Data Services\5.0\bin\.NETFramework\Microsoft.Data.Services.dll</HintPath>
  <Private>True</Private>
</Reference>
<Reference Include="Microsoft.Data.Services.Client">
  <HintPath>C:\Program Files (x86)\Microsoft WCF Data Services\5.0\bin\.NETFramework\Microsoft.Data.Services.Client.dll</HintPath>
  <Private>True</Private>
</Reference>
<Reference Include="System.Spatial">
  <HintPath>C:\Program Files (x86)\Microsoft WCF Data Services\5.0\bin\.NETFramework\System.Spatial.dll</HintPath>
  <Private>True</Private>
</Reference> 
```

升级到 V3 项目系统（使用 VS 2012 Update 2）或 V4 项目（VS 2013）的项目不会出现此问题，因为我们解决了这些程序集的引用方式。所以另一种解决方案是右键单击项目并选择“升级项目”

大卫基德 | 高级 SDET | 微软 | 灯开关

[LightSwitch 论坛发布此问题的答案](http://social.msdn.microsoft.com/Forums/vstudio/en-US/51723b8a-2720-4bbb-ac95-992adc7f0052/urgent-installed-vs2013-cant-publish-vs2012-app?forum=lightswitch#8467438b-40fe-4e1c-ac63-1205627416fc)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T22:30:15.260

问题是 Lightswitch 应用程序使用 Microsoft.Data.Services 5.0.2.0 进行部署，但 Microsoft.LightSwitch.Server 11.0.0.0 必须引用 Microsoft.Data.Services 5.0.0.0。一旦我将 5.0.0.0 部署到 Web 服务器，应用程序就会按预期运行。

我通过尝试直接导航到 /Microsoft.LightSwitch.SecurityData.svc（这是一个与应用程序一起部署的静态服务）然后按照 YSOD 说明发现了这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-10T06:00:08.517

我有同样的问题。转到 IIS 上的应用程序，然后双击身份验证。选择 Windows 身份验证并禁用它。

# c - 尝试学习 malloc 的问题

> ID：13317484
> 
> 赞同：1
> 
> 时间：2012-11-09T23:24:20.673
> 
> 标签：c, malloc, buffer

当用户为朋友输入信息时，我希望指向分配的适当空间的指针，并将朋友信息存储在这个分配的空间中。我已经阅读了其他地方提到使用缓冲区数组作为scanf参数的片段，但我只是将这些放在一起。这是我到目前为止所拥有的。

```
#include <stdio.h>  
#include <string.h>
#include <stdlib.h>
#include <conio.h>

//Structure for contacts
typedef struct friends_contact{

   char *First_Name;
   char *Last_Name;
   char *home;
   char *cell;
 }fr;

void menu(fr*friends ,int* counter,int user_entry,int i);
void setFirst(fr*,int *,int i);
char getFirst(fr*,int i);
void add_contact(fr*friends,int* counter,int i);
void print_contact(fr*friends ,int* counter, int i);

int main() 
{

  int user_entry=0;
  fr friends[5];
  int buffer[50];
  int counter=0;
  int i=0;
   for(i=0;i<5;i++)
    {
     friends[i].First_Name = (char*) malloc(sizeof(char) * 64); 
     free(friends[i].First_Name);
    }    
  menu(friends, &counter,user_entry,i);
  getch();
  return 0;
}
 //Menu function
 void menu(fr*friends,int* counter,int user_entry, int i) 
{

   do{
      int result;

      printf("\nPhone Book Application\n");
      printf("1) Add friend\n2) Delete friend\n3) Show a friend\n4)" 
      "Showonebook\n5)Exit\n");   
      scanf("%d", &user_entry);

         if(user_entry==1)
            {
            add_contact(friends,counter,i);
            }
            if(user_entry==2)
            {

            } 
            if(user_entry==3)
            {

            }                  
            if(user_entry==4)
            {
            print_contact(friends, counter,i);
            } 
       }while(user_entry!=5);                 
}

void setFirst(fr*friends, int* counter, int i) 
{
    //malloc issue **
    friends=(fr*) malloc(sizeof(fr));

    printf("Enter a first name \n");
    scanf("%s",friends[*counter].First_Name);

}
char getFirst(fr*friends , int pos) 
{

    printf("%s ", friends[pos].First_Name);
    return *friends[pos].First_Name;
}
void add_contact(fr*friends,int* counter,int i) 
{

    setFirst(friends,counter,i); 
    (*counter)++;
}
void print_contact(fr*friends ,int* counter, int i) 
{

  for( i = 0; i < *counter; i++)
    if (strlen(friends[i].First_Name))
    {
        getFirst(friends, i);
    }
 } 
```

这显然只是代码的一部分，截至目前，我在添加名称函数中输入名称后出现分段错误。它在退出前最后一次循环到菜单。我意识到我在某个地方出了问题，我想尝试用缓冲溶液解决这个问题。解决方案有人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T23:32:54.507

您的`fr`变量是指向堆栈上已分配空间的某个位置的指针。你不应该使用它 - 它已经初始化并且你不能 malloc 它（或者至少你永远不应该）。相反，您应该传递一个指针并对其进行初始化。

也就是说：

```
fr *friends; 
```

然后当你想分配空间时

```
friends = (fr*) malloc(sizeof(fr)* NUMBER OF FR YOU WANT); 
```

此外，如果要使用结构的元素，则需要初始化它们，因为它们都是指针。这将类似地完成

```
friends[i].First_Name = (char*) malloc(sizeof(char)* (LENGTH OF STRING + 1)); 
```

或者这`friends[i]->First_Name`取决于您如何将它发送到您的功能。

对您来说一个好的解决方案就是在您的内部初始化结构的成员`main`

```
int i;
fr friends[5];
for(i=0;i<5;i++)
{
   friends[i].First_Name = (char*) malloc(sizeof(char) * 64);
   friends[i].Last_Name = (char*) malloc(sizeof(char) * 64);
   friends[i].home = (char*) malloc(sizeof(char) * 64);
   friends[i].cell = (char*) malloc(sizeof(char) * 64);
}
//
//Do functions (without malloc'ing)
//
for(i=0;i<5;i++)
{
   free(friends[i].First_Name);
   free(friends[i].Last_Name);
   free(friends[i].home);
   free(friends[i].cell);
} 
```

这里我选择了 64 作为字符串的长度。您可以将其设置为您认为有效的任何内容。

最**重要**的是，您必须先为指针分配空间，然后才能使用它。否则，它不会指向您可以使用的任何内存，您将遇到分段错误。另外，**不要忘记**在分配完内存后释放。请记住，一旦释放它就不能使用它（除非您再次对其进行 malloc）。

# java - Speed4j 与 Perf4j

> ID：13317492
> 
> 赞同：6
> 
> 时间：2012-11-09T23:25:19.893
> 
> 标签：java, performance

Speed4j 和 perf4j 都是 Java 性能分析工具，性质相似。

如果我正在寻找 Speed4j 文档，我将获得以下信息：

> 这就是 Speed4j，一个非常简单（但速度很快）的 Java 性能分析库。它是使用 Perf4j 作为模型设计的，但希望能避免 Perf4j 设计中固有的缺陷。此外，Perf4j 这些天似乎没有看到太多的发展。

但不确定“避免 Perf4j 设计中固有的陷阱”是什么意思，什么是 perf4j 陷阱？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-13T09:03:36.613

我开始 Speed4J 的三个原因：

1.  避免字符串解析。Perf4j 架构通过在字符串中编码的 Log4j 发送测量值，然后对其进行解析。String 创建/解析会导致不必要的 GC 开销。
2.  提供关闭挂钩。Perf4j 无法在 Web 容器中完全关闭，因为它启动线程并且无法访问它们 - 因此存在内存泄漏。Perf4j 中有一个长期存在的错误，我很沮丧，因为什么也没发生。
3.  没有发展。错误没有得到解决，没有发布新版本。

由于 2 和 3，我考虑过分叉 Perf4j，但最终 1 让我开始了自己的项目，以便我和其他人可以更进一步。Perf4j 是一个很棒的项目，我喜欢它 :-)

# video - Apple Pro Res 422 编码视频的图片标题之后的下一个字节是什么？

> ID：13317496
> 
> 赞同：0
> 
> 时间：2012-11-09T23:25:37.760
> 
> 标签：video, header, frame, slice, decoder

我试图了解下面列出的十六进制视频文件的格式。我理解第一块。它以帧容器原子的 8 个字节（1000 到 1007）开始，接着是帧头（从 1008 到 109B 的 148 个字节），然后是图片头（从 109C 到 10A3 的 8 个字节）。但是我不明白下一个字节序列。我遵循下面列出的 wiki 页面的格式，根据 wiki，下一个字节应该是切片标头。但是 10A4 处的字节 02 与 slice_hdr_size 不匹配。它是否已经开始了码字方案？这些字节是什么？谢谢！

[http://wiki.multimedia.cx/index.php?title=Apple_ProRes](http://wiki.multimedia.cx/index.php?title=Apple_ProRes)

```
0000FF0    00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00  00 09 0A 10
0001004    69 63 70 66  00 94 00 00  61 70 6C 30  07 80 04 38  80 00 01 01 
0001018    01 10 00 03  04 04 05 05  06 07 07 09  04 04 05 06  07 07 09 09 
000102C    05 05 06 07  07 09 09 0A  05 05 06 07  07 09 09 0A  05 06 07 07 
0001040    08 09 0A 0C  06 07 07 08  09 0A 0C 0F  06 07 07 09  0A 0B 0E 11 
0001054    07 07 09 0A  0B 0E 11 15  04 04 05 05  06 07 07 09  04 04 05 06 
0001068    07 07 09 09  05 05 06 07  07 09 09 0A  05 05 06 07  07 09 09 0A 
000107C    05 06 07 07  08 09 0A 0C  06 07 07 08  09 0A 0C 0F  06 07 07 09 
0001090    0A 0B 0E 11  07 07 09 0A  0B 0E 11 15  40 00 09 09  36 03 FC 30

00010A4    02 2E 02 63  02 19 02 11  02 71 02 40  01 D7 02 0A  02 44 02 3B 
00010B8    02 B2 02 CB  02 48 02 5C  02 7E 02 53  02 67 02 35  01 FE 02 70 
00010CC    02 AC 01 CF  02 1C 02 28  02 35 02 B1  02 13 02 40  02 4D 02 62 
00010E0    02 47 02 23  02 2E 02 02  02 7B 02 B5  01 B3 02 12  02 41 02 22 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T02:48:51.823

切片索引表由 16 位条目组成 - 每个切片一个 - 给出每个切片的数据长度。因此，它允许以多线程的方式独立处理切片。

# iphone - 在 Grect 中加载的 xib 问题

> ID：13317497
> 
> 赞同：0
> 
> 时间：2012-11-09T23:25:54.647
> 
> 标签：iphone, ios, xcode

从你们那里学到了很多东西，几个小时后，我终于设法将一个 xib 加载到一个 GRect 中，用于我构建的一个搜索 xib。

基本上，当您点击 main.xib 中的单元格时，它会将 search.xib 加载到 Grect 中，以便我可以过滤列表，单击值，然后放回 main.xib 中的单元格。

但是，我仍然有来自 main.xib 的单元格（tvcells）覆盖了我的 search.xib。

此外，似乎没有为 search.xib 初始化任何代码，我在 search.xib 的 viewdidload 中放置了一条 NSlog 消息，控制台中没有显示任何内容，让我知道没有执行任何代码。

知道为什么吗？

谢谢！

```
CGRect container = [[UIScreen mainScreen]bounds];
container.origin.x = 0;
container.origin.y = 0;

NSArray *views = [[NSBundle mainBundle] loadNibNamed: @"ingredientSearchViewController" owner: self options: nil];
UIView *referencedView = (UIView *)[views objectAtIndex:0];

referencedView.frame = container;
[self.subView addSubview:referencedView];

NSLog(@"loaded subview but obviously not in subview xib"); 
```

尝试作为控制器执行此操作的附加代码

```
if (self != nil){
    [self.view removeFromSuperview];
}
if(self == nil){
     ingredientSearchViewController *vc = [[[ingredientSearchViewController alloc]initWithNibName:@"ingredientSearchViewController" bundle:nil] autorelease];
    vc.view.frame = [UIScreen mainScreen].applicationFrame;
    vc.delegate = self;
    [self.subView addSubview:vc.view];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T03:49:44.220

`viewDidLoad`是 NSViewController 中的一个方法。

而且您正在从 Nib 创建一个视图，因此您应该使用`awakeFromNib`NSView 的等效方法。

# .net-4.5 - Expect100 在 .NET 4.5 中继续

> ID：13317498
> 
> 赞同：0
> 
> 时间：2012-11-09T23:26:22.437
> 
> 标签：.net-4.5

如何在 .net 4.5 中禁用 expect100continue？早些时候我可以写

```
System.Net.ServicePointManager.Expect100Continue = false; 
```

但是现在 .NET 4.5 Client Profile 中没有这样的类（来自[msdn](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.expect100continue.aspx)的信息）

# android - 用户首选项中的 Android 操作系统错误 - 数据类型

> ID：13317506
> 
> 赞同：0
> 
> 时间：2012-11-09T23:26:51.383
> 
> 标签：android, android-preferences, type-conversion

我在preference.xml 中定义了一组值：

```
 <EditTextPreference
            android:defaultValue="19999999999"
            android:key="@string/phone_number"
            android:persistent="true"
            android:summary="Test Number"
            android:title="Phone" /> 
```

由于某些原因，操作系统认为“19999999999”是一个整数（int 类型）并将其限制为 2^31。所以我最终看到了类似的东西：**672647167**

19999999999 : **10010101000000101111100011111111111**

删除前四个二进制数，我得到以下与 Android OS 显示的匹配。

672647167：**101000000101111100011111111111**

有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:33:28.530

尝试使用类似的东西`android:hint="@string/PhoneNumberDefault"`并将您的电话号码放在字符串资源中。应该有预期的效果。

# redis - 从redis中检索时间序列数据

> ID：13317513
> 
> 赞同：1
> 
> 时间：2012-11-09T23:27:46.347
> 
> 标签：redis, time-series

我将聚合的时间序列数据存储在 Redis 排序集中。成员是聚合的 Unix 时间戳（比如一年），分数是该时间范围内的事件数。我知道如何使用 ZINCRBY 更新密钥，但是如何从数据库中获取范围？我是否必须为我想要的每个时间戳使用 ZSCORE？我对此的推理是否正确？

# bash - 如果没有 sed 模式回显 >> 换行

> ID：13317518
> 
> 赞同：4
> 
> 时间：2012-11-09T23:28:20.543
> 
> 标签：bash, sed

我`sed`用来替换conf中的行：

`sed -i.bak 's/^option.*/option newparam/' somefile.conf`

如果我的选项行在 somefile 中不存在，我如何告诉`sed`插入它或返回 false？

最后我结束了：

`sed -i.bak "s/^#$STR.*\|^# $STR.*\|^$STR.*/$OPT/" $FILE && grep -q "^$OPT" $FILE || echo "$OPT" >> $FILE`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T07:07:01.570

删除以 开头的行，将 ( )`option`附加到文件的最后一行 ( )`a``option newparam``$`

```
sed -i.bak '/^option/d; $ a\option newparam' somefile.conf 
```

注意：由于您说如果`option`行不存在则要插入新行，因此我认为新行的位置无关紧要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T23:46:21.090

使用 grep 检查该行是否首先存在，如果它没有使用双管道运算符将它附加到文件的末尾`||`。如果第一个命令返回 true，则操作将被短路，因此只有在第一个命令失败时才会执行第二个命令。

`grep -q '^option.*' file.txt || echo 'option newparam' >> file.txt`

该`-q`选项抑制 grep 的输出，并且`||`操作员仅在命令失败时才执行`echo`命令`grep`，即 if `$?`is not `0`。一个简单的例子：

```
$ cat file.txt
line 1
line 2 
line 3

$ grep -q 'line 4' file.txt || echo 'line not in file'
line not in file 
```

特殊变量`$?`包含上一个命令的退出值。

```
$ grep -q 'line 4' file.txt 

$ echo $?
1

$ grep -q 'line 3' file.txt 

$ echo $?
0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T15:56:59.643

您可以在 GNU sed 中这样做，保留选项顺序：

```
/^otheroption.*/ {
  s//otheroption newparam/       # Insert newparam
  h                              # and remember it in HS
}
$ {
  x                              # Check if option
  /^otheroption/! {              # was replaced,
    x                            # if not append it
    s/$/\notheroption newparam/  # to the last line 
  }
} 
```

全部在一条线上：

```
sed '/^option.*/ { s//option newparam/; h; }; $ { x; /^option/! { x; s/$/\noption newparam/; }; }' somefile.conf 
```

# objective-c - Objective-C ARC 构造函数应该设置实例变量还是属性？

> ID：13317519
> 
> 赞同：0
> 
> 时间：2012-11-09T23:28:22.653
> 
> 标签：objective-c, ios, initialization, automatic-ref-counting, reference-counting

> **可能重复：**
> [我应该在 ARC 的 init 方法中引用 self.property 吗？](https://stackoverflow.com/questions/8056188/should-i-refer-to-self-property-in-the-init-method-with-arc)

我是 Objective-C 的新手，并且仍然试图了解所有不同的东西（来自 C# 和 C）。我在我的项目中使用 ARC。

假设我有一个这样的构造函数：

```
-(id)initWithPriority:(NSNumber *)x1 Value:(id)y1 
```

我有两个（强）（综合）属性（x2，y2）。如果我做：

```
_x2=x1;
_y2=y1; 
```

（跳过通过属性，只访问合成的 ivars），而不是

```
x2=x1;
y2=y1; 
```

ARC 是否仍然起作用（就像它仍然保持保留计数一样）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T23:34:27.600

您将直接设置实例变量，*而不使用访问器*。ARC 将执行引用计数。

注意：您还需要在初始化程序的实现中保留属性的语义。例如，如果它声明`copy`了 ，那么您将在初始化程序中将参数的副本分配给 ivar。

* * *

补充阅读：

[我应该在 ARC 的 init 方法中引用 self.property 吗？](https://stackoverflow.com/questions/8056188/should-i-refer-to-self-property-in-the-init-method-with-arc/8056260#8056260)

[初始化属性，点表示法](https://stackoverflow.com/questions/5932677/initializing-a-property-dot-notation/5932733#5932733)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-09T23:34:57.207

ARC按任务操作；否则将是毫无目的的。（如果它只能通过属性进行操作，它不会向 ARC 之前存在的内容添加任何内容。）所以是的，如果您直接分配给 ivar，分配的值会自动保留。

*如果它是您的 ivar* ，您*应该*直接分配给ivar ，因为在 期间，您的对象还没有完全准备好状态。因此，在 中，直接对 ivars执行对*您的*ivars 的任何分配；不要*使用*访问器/属性。例子：*`init...``init...`*

 ***```
- (id) initWithName: (NSString*) s { 
    self = [super init]; 
    if (self) {
        self->_name = [s copy]; //
    }
    return self; } 
```

但是，您可以分配给您的超类的属性。因此，如果这是一个 UIViewController 子类，分配到`self.title`就可以了。

有关 ARC 工作原理的完整说明，请参阅我的书：

[http://www.aeth.com/iOSBook/ch12.html](http://www.apeth.com/iOSBook/ch12.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T23:35:15.973

是的，您可以直接分配实例变量。

如果没有 ARC，您将需要保留该对象：

```
[_x1 release];
_x1 = [x1 retain]; 
```

使用 ARC，您只需分配实例变量：

```
_x1 = x1; 
```***

# sql-server-2008 - 具有多个条件的 Sql 更新查询

> ID：13317520
> 
> 赞同：1
> 
> 时间：2012-11-09T23:28:27.907
> 
> 标签：sql-server-2008

我有两列。属性名和属性值。我应该将 AttributeValue 更新为此 Attributename 其中 MAsterid=somevalue

假设如果我为主 ID 1 选择 Attributename 和属性值，该表将显示 likeke

```
Master ID    attributename     attributevalue
----------   --------------   --------------
   1            MODE_CODE             BARGE
   1            SAP_CODE              1
   1            DESCRIPTION           B 
```

我可以使用更新

```
UPDATE CORE.MasterAttr
SET AttributeValue = (
    CASE AttributeName
        WHEN 'DESCRIPTION' THEN 'Barge'
        WHEN 'SAP_MODE' THEN '01'
        WHEN 'MODE_CODE' THEN 'B'        
    END
) WHERE MasterId=1 
```

但问题是现在我知道属性名称。

但在实际场景中，我们正在构建动态属性名称。所以我们不知道每个主 ID 会有多少属性名称。

那么我们如何编写程序或查询动态值。

请帮助我。

# javascript - 加快点赞/推文和 +1 按钮

> ID：13317522
> 
> 赞同：0
> 
> 时间：2012-11-09T23:29:05.083
> 
> 标签：javascript, twitter, facebook-like, google-plus, google-plus-one

在我的网站中，我显示了 15 个网址。对于我在喜欢、推文和 +1 按钮下放置的每个地址。这是我为每个人提供的代码：

**脸书喜欢**

```
 <div class="fb-like" data-href="http://website.com" data-send="false" data-layout="button_count" data-width="200" data-show-faces="false"></div> 
```

**鸣叫**

```
<a href="https://twitter.com/share" class="twitter-share-button" data-text="Check Out http://website.com" data-via="MySite" data-lang="es">Tweet</a> 
```

**+1**

```
<div class="g-plusone" data-size="medium" data-href="http://website.com"></div> 
```

我重复该代码 15 次，每个网站 1 次，在我的页面底部我有这些代码，我只放了一次

```
<!-- Twitter -->
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

<!-- +1 -->
<script type="text/javascript">
  window.___gcfg = {lang: 'es-419'};

  (function() {
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })();
</script> 

<!-- Facebook -->
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

我只想说，使用按钮加载所有内容大约需要 15 秒，我确定 1 或 2 来自 php 函数，但我确信大部分来自这些按钮。我究竟做错了什么？我怎样才能加快速度？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T18:21:39.650

好！必须回答我自己的问题。我用过[社交名媛](https://github.com/dbushell/Socialite)，效果很好。我进行了设置，以便我的按钮在滚动时加载。所以如果其他人有这个问题，这是一个不错的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T00:42:58.363

从数据库中获取网站列表并即时生成所有元素。

您可以合并 PHP 和 Javascript 以允许在 javascript 中插入网站：

```
<script>
    var foo = "<?php PHP CODE HERE ?>"
</script> 
```

伪代码示例：

```
<script>
    var websites = json of websites

    Loop "websites" object here
        Generate each element for this website
    endloop
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-03T13:30:07.577

根据我的经验，facebook 按钮往往是最糟糕的罪魁祸首，我找到了一个通过异步加载它们来加速它们的设置。在您的 FB 脚本中插入以下内容：

```
js.async=true; 
```

因此，对于您的示例，它将是：

```
<!-- Facebook -->
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.async=true;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

按钮本身仍然需要一分钟，但这样它们就不会在页面上保留任何其他内容或使其在加载时表现缓慢。

归功于：[http ://www.ockwebs.com/2012/04/load-facebook-like-asynchronously/](http://www.ockwebs.com/2012/04/load-facebook-like-asynchronously/)

# javascript - .apply 究竟是做什么的？

> ID：13317526
> 
> 赞同：2
> 
> 时间：2012-11-09T23:30:07.277
> 
> 标签：javascript, backbone.js, underscore.js

以前从未见过 .apply 方法。有人可以向我解释它的作用吗？这取自[http://addyosmani.github.com/backbone-fundamentals/](http://addyosmani.github.com/backbone-fundamentals/)

```
var app = app || {}; 
var TodoList = Backbone.Collection.extend({
model: app.Todo,
localStorage: new Backbone.LocalStorage(’todos-backbone’),
completed: function() {
    return this.filter(function( todo ) {
        return todo.get(’completed’); 
    });
},
remaining: function() {
    return this.without.apply( this, this.completed() );
}, 
nextOrder: function() {
    if ( !this.length ) { 
        return 1;
    }
    return this.last().get(’order’) + 1; },
comparator: function( todo ) { 
    return todo.get(’order’);
} 
});
app.Todos = new TodoList(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-09T23:35:47.630

函数对象自带`apply()`和`call()`方法。他们都有效地做同样的事情，除了略有不同。他们所做的是允许您`this`在该函数的范围内定义指针。例如，如果你这样做：

```
function myFunc(param1, param2) { alert(this) }

var first = 'foo';
var second = 'bar';

myFunc.call('test', first, second); //alerts 'test'

myFunc.apply('test', [first, second]); //alerts 'test' 
```

在这两种方法中，您都将`this`指针作为第一个参数传递。在该`call()`方法中，您按顺序传递所有后续参数，以便第二个参数成为 myFunc 的第一个参数。在该`apply()`方法中，您将额外的参数作为数组传递。

# java - 选择语句为字符串变量提供错误

> ID：13317527
> 
> 赞同：0
> 
> 时间：2012-11-09T23:30:09.950
> 
> 标签：java, sql, jdbc

我正在我的 Java 程序中编写以下 SQL 查询

```
PreparedStatement pre = conn.prepareStatement("select ID,FirstName,LastName,Dept from "                 
    + "student where ID =" + ID + " or FirstName=" + firstName + ";"); 
```

但是，我收到以下错误：

> 对 FirstName="+Parker 使用正确的语法

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T23:36:47.250

使用`PreparedStatement`这样的：

```
PreparedStatement pre = conn.prepareStatement("select ID,FirstName,LastName,Dept from student where ID = ? or FirstName = ?");
pre.setInt(1, ID);
pre.setString(2, firstName); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T23:44:46.270

**您应该通过使用准备好的语句参数**来利用准备好的语句。这样，您可以使用 setter 实用地设置参数。

[http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)。

以下是 Oracle 文档的片段：

```
PreparedStatement updateSales = null; 
```

> String updateString = "update" + dbName + ".COFFEES" + "set SALES = **?** where COF_NAME = **?** ";

```
updateSales = con.prepareStatement(updateString);

updateSales.**setInt**(1, e.getValue().intValue());

updateSales.**setString**(2, e.getKey()); 
```

只需确保将语句 * 设置为*** s sql 查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T23:33:30.853

我没有在 Java 中使用过 sql，但我猜这是因为你的名字没有单引号。你要：

```
PreparedStatement pre = conn.prepareStatement("select ID,FirstName,LastName,Dept from " + "student where ID =" + ID + " or FirstName='" + firstName + "';"); 
```

强调：

```
... FirstName='" + firstName + "';"); 
```

# c++ - 通过 recvfrom (UDP) 接收部分数据包

> ID：13317532
> 
> 赞同：6
> 
> 时间：2012-11-09T23:31:04.733
> 
> 标签：c++, c, linux, sockets, udp

我正在尝试通过 recvfrom 接收数据包的一部分。它实际上是这样工作的：

```
recvfrom(sockfd, serialised_meta, 12, flags, src_addr, addrlen);
recvfrom(sockfd, serialised_buf, BUFLEN, flags, src_addr, addrlen); 
```

数据是这样发送的：

```
 bufd->Serialise(serialised_buf, BUFLEN+12);
 sendto(sockfd, serialised_buf, BUFLEN+12, flags, dest_addr, addrlen); 
```

所以想法是先读取一些元数据，然后决定是否接收其他内容。问题是如果第二个缓冲区（serialized_buf），我在开始时收到 4 个“/0”字节。这似乎不是序列化问题，我之前使用过序列化，一切都很酷，同时我一次接收整个数据包（元数据和数据）。关于如何修复它的任何想法？

PS。我知道我可以跳过不必要的字节）但是无论如何，为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-09T23:35:50.910

UDP 不是“流”协议...一旦您执行初始 recvfrom，数据包的其余部分将被丢弃。第二个 recvfrom 正在等待下一个数据包......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T04:09:16.320

UDP 对消息进行操作，而不是像 TCP 那样对流进行操作。`sendto()`使用 UDP和`recvfrom()`使用 UDP 时存在一对一的关系。在 UDP 中没有接收部分数据的选项，它是一种全有或全无的传输类型。您必须`recvfrom()`一口气读完整个`BUFLEN+12`消息，然后决定是否要实际使用它。这就是 UDP 的工作方式。

# javascript - 寻找一种在旭日形图上显示标签的方法（找不到工作示例）

> ID：13317534
> 
> 赞同：2
> 
> 时间：2012-11-09T23:31:12.003
> 
> 标签：javascript, d3.js, label, hierarchy, sunburst-diagram

感谢某人的帮助（Brandon），我已经能够向旭日形图添加工具提示。我仍在寻找一种在旭日图上显示路径标签的方法（然后使用双模式工具提示+文本）。

我想改进的示例在 jsfiddle.net/trakkasure/UPqX5/ 上提供

我正在寻找要添加到以下代码部分的代码：

```
path = svg.data([getData()]).selectAll("path") 
    .data(partition.nodes)
    .enter().append("svg:path")  
    .attr("d", arc)  
    .style("fill", function(d) { return color((d.children ? d : d.parent).name); })  
    .on("click", magnify)  
    .on("mouseover", function(d) {  
    tooltip.show([d3.event.clientX,d3.event.clientY],'<div>'+d.name+'</div>  <div>'+d.value+'</div>')
    })  
    .on('mouseout',function(){  
    tooltip.cleanup()
    })              
    .each(stash); 
```

我希望看到[http://bl.ocks.org/910126](http://bl.ocks.org/910126)上提供的示例中显示的标签。我无法让该示例为我工作（我还是 D3 的新手）

我确实认识到该图表上可能有太多文本，但在我的情况下这不是问题。

有人可以帮助我了解如何在图表上显示所有这些标签吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T23:27:43.683

只需将**svg:text**元素附加到画布：

```
path.append("svg:text")
  .attr("transform", function(d) { return "rotate(" + (d.x + d.dx / 2 - Math.PI / 2) / Math.PI * 180 + ")"; })
  .attr("x", function(d) { return d.y; })
  .attr("dx", "6") // margin
  .attr("dy", ".35em") // vertical-align
  .text(function(d) { return d.name; }); 
```

但是，在我的编辑中，这会破坏您的`magnify`功能，因此我创建了一个 svg 组来将每对路径和文本保存在一起。在我看来，元素以这种方式组织得更好，将来更容易查询。

请注意，您需要修改您的`magnify`函数以动画文本，因为现在它只动画路径并将文本保留在其原始位置。

```
group = svg.data([getData()]).selectAll("path")
  .data(partition.nodes)
  .enter().append('svg:g');

//path variable is required by magnify function
path = group.append("svg:path")
  .attr("d", arc)
  .style("fill", function(d) { return color((d.children ? d : d.parent).name); })
  .on("click", magnify)
  .on("mouseover", function(d) {
    tooltip.show([d3.event.clientX,d3.event.clientY],'<div>'+d.name+'</div><div>'+d.value+'</div>')
  })
  .on('mouseout',function(){
    tooltip.cleanup()
  }) 
  .each(stash);

// you may need to assign the result to a variable, 
// for example to animate the text in your magnify function, 
// as shown in the path variable above
group.append("svg:text")
  .attr("transform", function(d) { return "rotate(" + (d.x + d.dx / 2 - Math.PI / 2) / Math.PI * 180 + ")"; })
  .attr("x", function(d) { return d.y; })
  .attr("dx", "6") // margin
  .attr("dy", ".35em") // vertical-align
  .text(function(d) { return d.name; }); 
```

代码取自您给定的[示例](http://bl.ocks.org/910126)，但是我将`x`属性编辑为`.attr("x", function(d) { return d.y; })`根据您的数据结构正确定位文本（示例使用`Math.sqrt(d.y)`）。我也修改`text`函数返回`d.name`

这是[jsFiddle](http://jsfiddle.net/fXMLV/)

# php - 包括一个封装现有类的 PHAR

> ID：13317535
> 
> 赞同：0
> 
> 时间：2012-11-09T23:31:19.880
> 
> 标签：php, amazon-s3, amazon-web-services, phar, guzzle

我有一个当前使用**[Guzzle](http://guzzlephp.org/)**的项目（由引导文件中的显式“require_once”加载 [作为 .phar]）。

我一直在尝试从 Amazon 添加[AWSSDKforPHP](http://docs.amazonwebservices.com/awssdkdocsphp2/latest/sidebysideguide/sdk-php2-installing-and-including-the-sdks.html)，以便我可以轻松处理上传到 Amazon S3。不幸的是，当我尝试包含该包（也打包为 .phar 文件）时，PHP 会抛出一个令人讨厌的错误：

```
 PHP Fatal error:  Cannot redeclare class Symfony\\Component\\ClassLoader\\UniversalClassLoader in phar:///usr/share/php/AWSSDKforPHP/aws.phar/vendor/symfony/class-loader/Symfony/Component/ClassLoader/UniversalClassLoader.php on line 62 
```

我已经（完全）关闭了 APC，因为我之前已经看到 APC 引起了一些需要/包含问题。

我怀疑 PHP 会有这样一个尴尬的限制，即只能包含一次具有依赖关系的**包**。...但我可能是错的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T04:23:59.227

查看这两个库的 phar 存根，我不确定为什么它与 UniversalClassLoader 的 require_once 冲突。好消息是 AWS SDK for PHP 2 提供的 phar 还包含 Guzzle 库，因此您只需在应用程序中包含 aws.phar。

# python - 获取 Flask 应用程序中定义的所有路由列表

> ID：13317536
> 
> 赞同：174
> 
> 时间：2012-11-09T23:31:23.937
> 
> 标签：python, flask

我有一个复杂的基于 Flask 的网络应用程序。有许多带有视图功能的单独文件。它们的 URL 是用`@app.route('/...')`装饰器定义的。有没有办法获取在我的应用程序中声明的所有路线的列表？也许我可以在`app`对象上调用一些方法？

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2012-11-10T01:41:30.510

应用程序的所有路由都存储[`app.url_map`](http://flask.pocoo.org/docs/api/#flask.Flask.url_map)在[`werkzeug.routing.Map`](http://werkzeug.pocoo.org/docs/routing/#werkzeug.routing.Map). [`Rule`](http://werkzeug.pocoo.org/docs/routing/#werkzeug.routing.Rule)您可以使用以下方法迭代实例[`iter_rules`](http://werkzeug.pocoo.org/docs/routing/#werkzeug.routing.Map.iter_rules)：

```
from flask import Flask, url_for

app = Flask(__name__)

def has_no_empty_params(rule):
    defaults = rule.defaults if rule.defaults is not None else ()
    arguments = rule.arguments if rule.arguments is not None else ()
    return len(defaults) >= len(arguments)

@app.route("/site-map")
def site_map():
    links = []
    for rule in app.url_map.iter_rules():
        # Filter out rules we can't navigate to in a browser
        # and rules that require parameters
        if "GET" in rule.methods and has_no_empty_params(rule):
            url = url_for(rule.endpoint, **(rule.defaults or {}))
            links.append((url, rule.endpoint))
    # links is now a list of url, endpoint tuples 
```

有关更多信息，请参阅[显示指向创建的新网页的链接。](https://stackoverflow.com/questions/13151161/display-links-to-new-webpages-created/13161594#13161594)

* * *

## 回答 #2

> 赞同：129
> 
> 时间：2016-08-09T07:11:28.380

我刚遇到同样的问题。上面的那些解决方案太复杂了。只需在您的项目下打开一个新的 shell：

```
 python
    >>> from app import app
    >>> app.url_map 
```

第一个 ' *app* ' 是我的项目脚本：*app.py*，另一个是我的网站名称。

（此解决方案适用于带有少量路线的小型网络）

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2013-10-01T12:55:16.760

我在我的`manage.py`：

```
@manager.command
def list_routes():
    import urllib
    output = []
    for rule in app.url_map.iter_rules():

        options = {}
        for arg in rule.arguments:
            options[arg] = "[{0}]".format(arg)

        methods = ','.join(rule.methods)
        url = url_for(rule.endpoint, **options)
        line = urllib.unquote("{:50s} {:20s} {}".format(rule.endpoint, methods, url))
        output.append(line)

    for line in sorted(output):
        print line 
```

它通过构建一组虚拟选项来解决缺失的参数。输出如下所示：

```
CampaignView:edit              HEAD,OPTIONS,GET     /account/[account_id]/campaigns/[campaign_id]/edit
CampaignView:get               HEAD,OPTIONS,GET     /account/[account_id]/campaign/[campaign_id]
CampaignView:new               HEAD,OPTIONS,GET     /account/[account_id]/new 
```

然后运行它：

`python manage.py list_routes`

有关 manage.py 结帐的更多信息：http: [//flask-script.readthedocs.org/en/latest/](http://flask-script.readthedocs.org/en/latest/)

* * *

## 回答 #4

> 赞同：52
> 
> 时间：2018-12-15T20:34:54.067

显然，从 0.11 版开始，[Flask 有一个内置的 CLI](http://flask.pocoo.org/docs/1.0/cli/)。内置命令之一列出了路线：

```
FLASK_APP='my_project.app' flask routes 
```

* * *

## 回答 #5

> 赞同：43
> 
> 时间：2014-03-26T04:05:58.243

与乔纳森的回答类似，我选择这样做。我看不到使用 url_for 的意义，因为如果您的参数不是字符串，例如浮点数，它将中断

```
@manager.command
def list_routes():
    import urllib

    output = []
    for rule in app.url_map.iter_rules():
        methods = ','.join(rule.methods)
        line = urllib.unquote("{:50s} {:20s} {}".format(rule.endpoint, methods, rule))
        output.append(line)

    for line in sorted(output):
        print(line) 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-04-25T15:32:09.123

由于您没有指定它必须在命令行中运行，因此可以轻松地在 json 中为仪表板或其他非命令行界面返回以下内容。无论如何，从设计的角度来看，结果和输出真的不应该混为一谈。这是糟糕的程序设计，即使它是一个小程序。然后可以在 Web 应用程序、命令行或其他任何摄取 json 的东西中使用下面的结果。

您也没有指定您需要知道与每条路线关联的 python 函数，因此这更准确地回答了您的原始问题。

我在下面使用自己将输出添加到监控仪表板。如果您想要可用的路由方法（GET、POST、PUT 等），则需要将其与上述其他答案结合使用。

Rule 的**repr** () 负责转换路由中所需的参数。

```
def list_routes():
    routes = []

    for rule in app.url_map.iter_rules():
        routes.append('%s' % rule)

    return routes 
```

使用列表推导同样的事情：

```
def list_routes():
    return ['%s' % rule for rule in app.url_map.iter_rules()] 
```

样本输出：

```
{
  "routes": [
    "/endpoint1", 
    "/nested/service/endpoint2", 
    "/favicon.ico", 
    "/static/<path:filename>"
  ]
} 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-12-01T15:56:36.443

如果您需要自己访问视图函数，请`app.url_map`使用. 而不是[`app.view_functions`](http://flask.pocoo.org/docs/1.0/api/#flask.Flask.view_functions).

示例脚本：

```
from flask import Flask

app = Flask(__name__)

@app.route('/foo/bar')
def route1():
    pass

@app.route('/qux/baz')
def route2():
    pass

for name, func in app.view_functions.items():
    print(name)
    print(func)
    print() 
```

运行上述脚本的输出：

```
static
<bound method _PackageBoundObject.send_static_file of <Flask '__main__'>>

route1
<function route1 at 0x128f1b9d8>

route2
<function route2 at 0x128f1ba60> 
```

（请注意包含由 Flask 自动创建的“静态”路由。）

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-07-19T08:25:37.713

您可以在导出或设置 FLASK_APP 环境变量后运行以下命令，通过烧瓶外壳查看所有路由。 `flask shell app.url_map`

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2021-05-09T13:51:22.067

在烧瓶项目所在的目录中使用 cli 命令。

```
flask routes 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-10-30T13:29:51.597

在您的烧瓶应用程序中执行以下操作：

```
flask shell
>>> app.url_map
Map([<Rule '/' (OPTIONS, HEAD, GET) -> helloworld>,
 <Rule '/static/<filename>' (OPTIONS, HEAD, GET) -> static>]) 
```

# ruby-on-rails - 生产中的 Rails 3.2.1 应用程序运行缓慢

> ID：13317539
> 
> 赞同：0
> 
> 时间：2012-11-09T23:31:36.217
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, performance

我有一个 Rails 应用程序在 postgreSQL 的机架空间上运行。

它真的很慢。

对于特殊请求，它最多需要 4 秒来响应

我已经安装了新的遗物。

我可以看到，例如某些控制器的索引操作是最慢的。他们真的很简单，有一些发现。

所以，我真的不明白是什么减慢了它。

我想知道你们是否都可以提到一些可以发现性能问题的宝石？

我知道子弹，它有助于找到对数据库的 n+1 个查询，但这不是我的问题。

根据要求，我添加了项目控制器的索引操作（平均 4000 毫秒响应时间）

```
def index
    @firm = current_firm
    @projects = current_user.projects.is_active
    @customers = @firm.customers
    @project = Project.new
    @todo = Todo.new
end 
```

is_active 方法是模型中的一个作用域

```
scope :is_active, where(["active = ?", true]) 
```

从应用程序控制器我有一些助手和 before_filters。其中之一可能是问题（或其他问题）这就是为什么我想要一些工具来跟踪性能问题。

**更新** 查看我看到的 production.log

```
Rendered logs/_list_header.html.erb (0.3ms)
Rendered logs/_log.html.erb (127.7ms)
Rendered private/log_range.js.erb (721.2ms)
Completed 200 OK in 836ms (Views: 733.2ms | ActiveRecord: 43.9ms)

Processing by ProjectsController#index as HTML
Rendered projects/_index.html.erb (4149.8ms)
Rendered projects/index.html.erb within layouts/application (4157.0ms)
Rendered layouts/_header.html.erb (0.3ms)
Completed 200 OK in 6682ms (Views: 4199.6ms | ActiveRecord: 457.0ms)

Processing by LogsController#stop_tracking as JS
Parameters: xxxxx
Rendered logs/_tracking_partial.html.erb (121.1ms)
Rendered logs/_start_tracking.html.erb (6877.9ms)
Rendered logs/_log.html.erb (43.0ms)
Rendered logs/stop_tracking.js.erb (7224.0ms)
Completed 200 OK in 9968ms (Views: 7617.2ms | ActiveRecord: 455.3ms) 
```

看最后一个。大量时间花在渲染视图和 js 上。这是什么原因造成的。视图中没有发现。我只是使用控制器的实例变量。并且数据库中的条目少于 20 个。这可能是由于访问这些视图的计算机上的互联网连接速度慢造成的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T00:58:16.073

可能您的 Postgresql 数据库服务是垃圾，或者它远离您的应用服务器？

无论如何，您应该创建索引！如何？在您的迁移中

```
add_index :costumers, :firm_id 
```

例如，您还可以添加具有多列的索引

```
add_index :projects, [:user_id, :alive] 
```

这是所有选项`add_index`

> add_index(table_name, column_names, options)：添加一个带有列名的新索引。其他选项包括 :name、:unique（例如 { :name => "users_name_index", :unique => true }）和 :order（例如 { :order => {:name => :desc} }）。

还要记住，我并不是说您应该创建这些索引，它们只是示例。您必须从查询中看到 where 子句中的内容

我没有找到任何关于文档索引的好信息，但这里似乎是一篇不错的文章[http://tomafro.net/2009/08/using-indexes-in-rails-index-your-associations](http://tomafro.net/2009/08/using-indexes-in-rails-index-your-associations)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T09:31:51.993

问题在于资产管道

我有一些未预编译的 css 和 js 文件。我没有收到任何错误消息，但您必须准确命名。不 ”。” 在文件名中，没有“.css”

索引没有帮助。但是，当数据库中有更多条目时，它可能会提高性能。

# google-app-engine - 谷歌应用引擎 lxml 生产错误

> ID：13317541
> 
> 赞同：1
> 
> 时间：2012-11-09T23:32:08.253
> 
> 标签：google-app-engine, lxml

我在 Google App Engine 上使用 lxml 来抓取一些基本数据。

它适用于 SDK。当我尝试在我得到的 appengine 服务器上使用它时。

```
IOError: Error reading file 'http://www.google.com': failed to load external entity "http://www.google.com" 
```

我的代码看起来像；

```
import lxml.html
url = "http://www.google.com"
t = lxml.html.parse(url)
pagetitle = t.find.(".//title").text
self.response.out.write(pagetitle) 
```

编辑：我最终不得不做一个小的改变来处理，如下面的答案中所述。

```
from google.appengine.api import urlfetch
result = urlfetch.fetch(url)
t = lxml.html.fromstring(result.content) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T07:11:03.787

GAE 不支持打开套接字，您应该使用它`urlfetch.fetch()`来获取页面内容，然后将其提供给解析器。

# r - xts 中的端点（错误？）行为

> ID：13317542
> 
> 赞同：2
> 
> 时间：2012-11-09T23:32:13.480
> 
> 标签：r, xts

例如，如果我尝试`endpoints`每年获取，并执行以下操作：

```
xts.data <- xts(1:10000, order.by=seq(from=as.Date("1970-01-01"), by=1, len=10000))
z <- endpoints(xts.data, on="months", k=12) 
```

其返回值为：

```
> z
[1]     0 10000 
```

与高于 12 的数字相同。为什么`xts`不从头开始返回每年或第 13 个月的索引。它受一年中的期数限制吗？那就是如果我这样做了：

```
 z <- endpoints(xts.data, on="weeks", k=54) 
```

这似乎工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T02:26:47.430

我同意这是一个错误，或者至少是一个需要记录的限制：`k`for "months" 仅适用于 k=1,2,3,4 和 6。

寻找解决方法，我的第一个想法是：

```
 library(xts)
 x <- xts(1:10000, order.by=seq(from=as.Date("1970-01-01"), by=1, len=10000))
 index(x)[endpoints(x, on="months", k=6)[c(T,F)]] 
```

给予：

```
 "1970-12-31" "1971-12-31" "1972-12-31"... "1995-12-31" "1996-12-31" 
```

但是当我使用不同的数据集时它会中断：

```
x <- xts(1:10000, order.by=seq(from=as.Date("1970-07-01"), by=1, len=10000)) 
```

这使：

```
"1971-06-30" "1972-06-30" "1973-06-30" ... 
```

一个稳定的答案是：

```
dates <- index(x)[endpoints(x, on="months", k=6)]
dates[ as.POSIXlt(dates)$mon==11 ] 
```

（英文：*获取每半年的最后一天，只保留12月份的。*）

另一种方法是仅使用`endpoints(x, on="years")`，然后如果您不喜欢它，请删除最后一个日期。

我猜你想要一年中的“最后一个交易日”或“最后一个采样日”，所以它实际上不会是每年的 12 月 31 日。但是，如果您确实想要每年的特定日期：

```
index(x)[.indexmon(x)==11 & .indexmday(x)==31] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T04:34:02.980

是的。这看起来像是一个实现问题。一旦我可以更完整地测试我正在使用的版本，我将向 R-forge 添加一个修复程序。

**更新** *了两次*

现在在 R-forge 的 rev 742 中有一个补丁。这不太可能是最终的，但理想情况下这是方向。

```
> head(xts.data[z])
       [,1]
1970-12-31  365
1971-12-31  730
1972-12-31 1096
1973-12-31 1461
1974-12-31 1826
1975-12-31 2191

> head(xts.data[endpoints(xts.data, on="months", k=1)])
           [,1]
1970-01-31   31
1970-02-28   59
1970-03-31   90
1970-04-30  120
1970-05-31  151
1970-06-30  181
> head(xts.data[endpoints(xts.data, on="months", k=2)])
           [,1]
1970-02-28   59
1970-04-30  120
1970-06-30  181
1970-08-31  243
1970-10-31  304
1970-12-31  365
> head(xts.data[endpoints(xts.data, on="months", k=3)])
           [,1]
1970-03-31   90
1970-06-30  181
1970-09-30  273
1970-12-31  365
1971-03-31  455
1971-06-30  546
> head(xts.data[endpoints(xts.data, on="months", k=4)])
           [,1]
1970-04-30  120
1970-08-31  243
1970-12-31  365
1971-04-30  485
1971-08-31  608
1971-12-31  730
> head(xts.data[endpoints(xts.data, on="months", k=6)])
           [,1]
1970-06-30  181
1970-12-31  365
1971-06-30  546
1971-12-31  730
1972-06-30  912
1972-12-31 1096
> head(xts.data[endpoints(xts.data, on="months", k=7)])
           [,1]
1970-07-31  212
1971-02-28  424
1971-09-30  638
1972-04-30  851
1972-11-30 1065
1973-06-30 1277 
```

# c# - C# 使用 SQL 的简单用户名/密码，用户始终无效

> ID：13317543
> 
> 赞同：0
> 
> 时间：2012-11-09T23:32:16.330
> 
> 标签：c#, sql, login

我正在尝试使用 SQL 创建一个简单的用户名/密码登录，它总是显示为无效。我可以得到一些反馈吗？

```
 SqlConnection cn;
        cn = new SqlConnection();
        cn.ConnectionString = "Data source=(local); Initial Catalog=INT422Assignment1; Integrated Security=SSPI;";
        cn.Open();
        SqlCommand cmd;
        cmd = new SqlCommand();
        cmd.Connection = cn;
        cmd.CommandText = "SELECT username, pwd FROM myLogin WHERE userNameTB = @username AND passWordTB = @pwd";

        SqlParameter param;
        param = new SqlParameter("@username", SqlDbType.VarChar);
        param.Direction = ParameterDirection.Input;
        param.Value = userNameTB;
        cmd.Parameters.Add(param);

        param = new SqlParameter("@pwd", SqlDbType.VarChar);
        param.Direction = ParameterDirection.Input;
        param.Value = passWordTB;
        cmd.Parameters.Add(param);

        try
        {
            cmd.ExecuteNonQuery();
            cn.Close();
            MessageBox.Show("Login"); 
        }
        catch (Exception ex)
        {
            MessageBox.Show("Invalid");
        }           
    } 
```

它运行，我在命令文本行之后放置了一个断路器，所以我看到它接收来自文本字段的输入，但不知何故它没有将它与数据库中的用户名和密码进行比较。

我感谢你的帮助。

干杯，

埃西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T00:44:00.347

如果它总是显示为无效，那应该表明您的查询正在引发异常，因为只有在捕获到异常时才会显示“无效”框。异常的细节是什么？

如果您阅读 上的文档`SqlCommand.ExecuteNonQuery()`，您会注意到在您的情况下，它没有任何用处：

> 对于 UPDATE、INSERT 和 DELETE 语句，返回值是受命令影响的行数。当正在插入或更新的表上存在触发器时，返回值包括受插入或更新操作影响的行数以及受一个或多个触发器影响的行数。对于所有其他类型的语句，返回值为 -1。如果发生回滚，则返回值也是 -1。

所以`ExecuteNonQuery()`不是正确的方法。我怀疑您的异常被抛出与您执行 select 语句的事实有关，由于使用`ExecuteNonQuery()`.

顺便说一句，我会注意到将异常用于控制流程序逻辑被认为是一种不好的做法。异常是针对...**异常**情况，而不是普通的程序逻辑。此外，在捕获异常时，应尽可能具体。否则，正如您所发现的，您会捕获不应该被捕获的异常，这会导致其他问题。）

我会做这样的事情：

```
static bool IsAuthenticated( string uid , string pwd )
{
    if ( string.IsNullOrWhiteSpace(uid) ) throw new ArgumentNullException("uid") ;
    if ( string.IsNullOrWhiteSpace(pwd) ) throw new ArgumentNullException("pwd") ;

    bool authenticated ;

    using ( SqlConnection cn = new SqlConnection("Data source=(local); Initial Catalog=INT422Assignment1; Integrated Security=SSPI;") )
    using ( SqlCommand    cmd = cn.CreateCommand() )
    {

        cmd.CommandType = CommandType.Text ;
        cmd.CommandText = @"
SELECT authenticated = count(*)
FROM myLogin
WHERE userNameTB = @username
AND passWordTB = @pwd"
        ;

        cmd.Parameters.AddWithValue( "@username" , uid ) ;
        cmd.Parameters.AddWithValue( "@pwd"      , pwd ) ;

        cn.Open() ;

        authenticated = ((int)cmd.ExecuteScalar()) > 0 ? true : false ;
    cmd.ExecuteNonQuery();

        cn.Close() ;

    }

    return authenticated ;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T23:37:46.607

使用`ExecuteScalar()`executenonquery 不返回任何内容。或使用 SqlDataAdapter 并填写 DataTable 并查看 DataTable 中是否有任何行或使用 ExecuteScalar() 获取从数据库返回的第一项。您需要从数据库返回的数据。

另一方面，我会使用已经内置了用户登录/注销功能的 ASP.NET 成员资格。我不会构建自己的登录注销网页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T23:45:02.120

```
try
        {
            cmd.ExecuteNonQuery();  //this is for inserting or updating db
            cn.Close();
            MessageBox.Show("Login"); 
        }
        catch (Exception ex)
        {
            MessageBox.Show("Invalid");
        } 
```

试试这个，而不是使用 SqlDataReader

```
try{
     SqlDataReader dr = cmd.ExecuteReader()
     While dr.Read() {

      string password = dr("pwd").ToString();
      string username = dr("username").ToString();
      }  
     } 
```

编辑：

```
 try{
     SqlDataReader dr = cmd.ExecuteReader();
     If dr.HasRows() {
         //Here is your code for good login
      }
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T00:26:53.663

没有结果的 sql 查询不会引发异常。您需要获取结果并检查它们是否为空：if (res.MoveNext())。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-09T23:38:15.303

我认为您不需要此代码中的 @ 符号。

```
 SqlParameter param;
    param = new SqlParameter("username", SqlDbType.VarChar);
    param.Direction = ParameterDirection.Input;
    param.Value = userNameTB;
    cmd.Parameters.Add(param); 
```

我认为参数名称应该与 pwd 的用户名相同

# python - 是否可以更改共享对象文件中的共享库引用？

> ID：13317544
> 
> 赞同：1
> 
> 时间：2012-11-09T23:32:25.283
> 
> 标签：python, c, macos, shared-libraries, cpython

我有一个`.so`文件，其中包含对`/Library/Frameworks/Python.framework/Versions/2.7/Python`（我可以在 .so 文件中以纯文本形式硬编码此路径）的引用。我无权访问构建`.so`文件的源。

我想使用不同版本的 python 库（存储在 中`/opt/local/Library`）。是否可以编辑`.so`文件以重新分配此路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T23:44:55.397

您可以使用`install_name_tool`OS X Xcode 命令行工具中包含的永久更改引用。

```
install_name_tool -change old-lib-path new-lib-path path-to.so 
```

但是，如果`new-path`比原始文件长`old-path`，则捆绑文件 (.so) 中的字段中可能没有空间来执行此操作。注意事项`man`页面：`install_name_tool`

> 为了在安装名称或 rpath 较大时使用此工具，应使用 ld(1) -headerpad_max_install_names 选项构建二进制文件。

此外，无法保证您希望使用的新 Python 的构建方式与 .so 您尝试修改的旧共享库兼容。通用 CPU 架构、OS X 部署目标和 Python 构建选项（例如，UCS-2 与 UCS-4）可能存在差异，这可能会妨碍成功。在尝试修改它之前，您应该制作 .so 的副本。

# javascript - 多个 div 的简单表单验证

> ID：13317548
> 
> 赞同：0
> 
> 时间：2012-11-09T23:32:38.280
> 
> 标签：javascript, forms, button, if-statement

我有一个包含 3 个步骤的联系表格，每个步骤都有自己的“选项卡”，然后通过电子邮件 php 脚本提交。现场版在[http://agoodman.com.au/wptest/menswear-porter-service/](http://agoodman.com.au/wptest/menswear-porter-service/)（点击“BOOK IN 60 SECONDS”）。

在第一种形式中，我想确保他们在继续之前输入了电子邮件地址。我通过以下方式尝试过：

```
<button class="btn classic" onclick=" if ('#basicdetails .email').value ='=' ' '){return false;} else {document.getelementbyid('n.2').click();}">next</button> 
```

目前，代码确实会检查电子邮件地址并在没有输入任何内容时停止，但是当输入电子邮件时，表单不会进行。（'#n.2' 是一个仅显示表单下一页的选项卡）。如果我删除该`if`语句并只制作按钮代码：

`<button class="btn classic" onclick="document.getelementbyid('n.2').click()">next</button>`

然后表单会按应有的方式进行，但显然不会在未输入电子邮件地址时停止。

我的“if/else”语法错了吗？否则，我在这里错过了什么？

**编辑：**

在语法上犯了一些大错误（首先尝试使用这种东西），请参阅更新的代码：

```
<button class="btn classic" id="firstTab">next</button>

<script>
$('.btn#firstTab').click(function(){
if (('#basicdetails .email').value =='') {
  return false;
} else {
 $('#n2').click();
}
});

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T00:07:40.283

使用内联 JavaScript 从来都不是一个好主意。如果您将标记与逻辑分开，您将能够更好地组织它并轻松发现错误。如果您将代码分解并正确缩进，您将立即看到问题：

```
if ('#basicdetails .email').value ='=' ' ') {
  return false;
} else {
  document.getelementbyid('n.2').click();
} 
```

确实有几个问题。你`(`的`if`陈述中缺少一个。然后您*需要*使用比较运算符，例如`==`or `===`。`=`运算符*仅*用于赋值。最后你可以看出这`='=' ' '`看起来很乱，这意味着什么并不明显，而且不是有效的 JavaScript。此外，如果`('#basicdetails .email')`本来是一个 jQuery 选择器，那么您在`$`括号之前就缺少了。

# java - 线程上的非被动等待

> ID：13317550
> 
> 赞同：-1
> 
> 时间：2012-11-09T23:32:55.530
> 
> 标签：java, multithreading, runnable

一个线程是否有可能在被等待之前执行一些操作，我想要做的是我希望这个线程`wait()`在被等待之前到另一个线程，

它是一个分布式系统，具有客户端、事务管理器和锁管理器，最后两个驻留在中间件服务器上。锁管理器可能`wait()`是事务管理器的一个线程，我希望这个线程能够`wait()`在等待自己之前成为客户端线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T23:40:07.823

您不能“等待”另一个线程。如果你调用[`wait()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#wait%28%29)一个对象，它所做的只是让当前线程进入睡眠状态，直到它被通知（通过[`notify()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#notify%28%29)or [`notifyAll()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#notify%28%29)）或由于所谓的虚假唤醒。我建议阅读[Java 教程中的“课程：并发”](http://docs.oracle.com/javase/tutorial/essential/concurrency/)。特别是关于受[保护块](http://docs.oracle.com/javase/tutorial/essential/concurrency/guardmeth.html)的部分应该是你感兴趣的。

所以，如果你想告诉其他线程你即将开始等待一个对象，例如像这样

```
// We are somewhere, in some method ...
synchronized(someObj) {
    someObj.wait();
} 
```

您必须实现某种观察者模式，在其中可以注册其他对象。

# c# - C# 中的协议缓冲区和类型安全枚举

> ID：13317552
> 
> 赞同：2
> 
> 时间：2012-11-09T23:33:20.830
> 
> 标签：c#, protocol-buffers, protobuf-net

我正在尝试序列化一些我实现的类型安全枚举，就像[这个问题的答案](https://stackoverflow.com/questions/424366/c-sharp-string-enums)一样。当我序列化一个包含对`FORMS`（来自我链接的答案）的引用的对象时，我想在反序列化时恢复对 static field 的引用`FORMS`。

我有一个解决方案，但它看起来很糟糕，因为我必须将它添加到任何包含类型安全枚举的类中。它几乎只是使用回调来存储和检索枚举的`value`字段：

```
 public class SomethingContainingAnAuthenticationMethod
    {
      [ProtoMember(1)] 
      public int AuthenticationMethodDataTransferField { get; set; }

      public AuthenticationMethod AuthenticationMethod { get; set; }

      [ProtoBeforeSerialization]
      public void PopulateDataTransferField()
      {
        AuthenticationMethodDataTransferField = AuthenticationMethod.value;
      }

      [ProtoAfterDeserialization]
      public void PopulateAuthenticationMethodField()
      {
        AuthenticationMethod = AuthenticationMethod.FromInt(AuthenticationMethodDataTransferField);
      }
    } 
```

任何其他想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:14:11.233

使用链接示例中的答案，最简单的方法可能是：

```
[ProtoContract]
public class SomethingContainingAnAuthenticationMethod
{
  [ProtoMember(1)] 
  private int? AuthenticationMethodDataTransferField {
      get { return AuthenticationMethod == null ? (int?)null
                               : AuthenticationMethod.Value; }
      set { AuthenticationMethod = value == null ? null
                               : AuthenticationMethod.FromInt(value.Value); }
  }

  public AuthenticationMethod AuthenticationMethod { get; set; }
} 
```

这避免了额外的字段和任何回调。类似的事情也可以通过代理类型来完成，但上面的方法应该适用于大多数简单的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T08:07:15.367

序列化枚举成员的机制非常简单：

```
[ProtoContract]
public class SomethingContainingAnAuthenticationMethod
{
    [ProtoMember(1)] 
    public AuthenticationMethod AuthenticationMethod { get; set; }
} 
```

而且……就是这样。有时的小问题（这可能会引发关于无法找到具有值的枚举的错误）是隐式零行为，但这很容易避免：

```
 [ProtoMember(1, IsRequired=true)] 
    public AuthenticationMethod AuthenticationMethod { get; set; } 
```

# clojure - 返回满足条件的映射中第一个元素的索引的函数

> ID：13317553
> 
> 赞同：2
> 
> 时间：2012-11-09T23:33:21.243
> 
> 标签：clojure, functional-programming

就像标题说的那样，我正在 Clojure 中寻找一个函数，它返回地图中第一个元素的索引以满足条件，我知道该怎么做，但是如果 API 中已经有一些东西我想要给我们吧。

例子：

```
(strange-fn #(even? %) '(1 3 5 7 9 4)) 
=> 5 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T00:13:01.530

您在示例中提供了列表而不是地图，因此我假设您的意思是任何序列。

一种简单的方法是仅从`count`返回的项目数`take-while`：

```
(defn strange-fn [f coll]
  (count (take-while (complement f) coll)))

(strange-fn #(even? %) '(1 3 5 7 9 4))
;=> 5 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-10T00:13:36.410

这很容易做到，但请注意，大多数情况下，如果您正在编写使用事物索引（尤其是惰性序列）的代码，通常只需使用序列就可以更整齐地完成整个事情。但是，如果您确定要处理索引，那么它就像`(fn [pred coll] (first (keep-indexed (fn [i x] (when (pred x) i)) coll)))`.

# php - 添加值它们删除 php 数组中的重复项

> ID：13317560
> 
> 赞同：0
> 
> 时间：2012-11-09T23:33:53.060
> 
> 标签：php, arrays

我有一个数组，我需要通过添加值来处理它，然后删除任何添加的重复项。

这是原始数组...

```
Array (     
[0] => Array ( [PID] => 2872 [QTY] => 1 ) 
[1] => Array ( [PID] => 3145 [QTY] => 2 ) 
[2] => Array ( [PID] => 3107 [QTY] => 1 ) 
[3] => Array ( [PID] => 2739 [QTY] => 1 ) 
[4] => Array ( [PID] => 3137 [QTY] => 1 ) 
[5] => Array ( [PID] => 3107 [QTY] => 1 ) 
[6] => Array ( [PID] => 2739 [QTY] => 1 ) 
[7] => Array ( [PID] => 3107 [QTY] => 1 ) 
[8] => Array ( [PID] => 3137 [QTY] => 4 ) 
[9] => Array ( [PID] => 3551 [QTY] => 1 ) 
[10] => Array ( [PID] => 3107 [QTY] => 1 ) 
[11] => Array ( [PID] => 3107 [QTY] => 1 ) 
[12] => Array ( [PID] => 3137 [QTY] => 1 ) 
[13] => Array ( [PID] => 3551 [QTY] => 2 ) 
[14] => Array ( [PID] => 3136 [QTY] => 1 ) 
[15] => Array ( [PID] => 3137 [QTY] => 1 ) 
[16] => Array ( [PID] => 3032 [QTY] => 1 ) 
[17] => Array ( [PID] => 3551 [QTY] => 1 ) 
[18] => Array ( [PID] => 3107 [QTY] => 1 )
[19] => Array ( [PID] => 3459 [QTY] => 1 ) 
[20] => Array ( [PID] => 3141 [QTY] => 1 )
[21] => Array ( [PID] => 2724 [QTY] => 1 ) 
[22] => Array ( [PID] => 2743 [QTY] => 1 )
[23] => Array ( [PID] => 3139 [QTY] => 2 )
[24] => Array ( [PID] => 3137 [QTY] => 2 ) 
[25] => Array ( [PID] => 3107 [QTY] => 1 ) 
) 
```

我需要做的是获取这个数组并从相同的 [PID] 值中添加 [QTY] 值，然后在此之后得到一个像这样的数组......

```
Array ( 
[0] => Array ( [PID] => 2724 [QTY] => 1 ) 
[1] => Array ( [PID] => 2739 [QTY] => 2 ) 
[2] => Array ( [PID] => 2743 [QTY] => 1 )
[3] => Array ( [PID] => 2872 [QTY] => 1 ) 
[4] => Array ( [PID] => 3032 [QTY] => 1 ) 
[5] => Array ( [PID] => 3107 [QTY] => 7 ) 
[6] => Array ( [PID] => 3136 [QTY] => 1 ) 
[7] => Array ( [PID] => 3137 [QTY] => 9 ) 
[8] => Array ( [PID] => 3139 [QTY] => 2 )
[9] => Array ( [PID] => 3141 [QTY] => 1 )
[10] => Array ( [PID] => 3145 [QTY] => 2 ) 
[11] => Array ( [PID] => 3459 [QTY] => 1 ) 
[12] => Array ( [PID] => 3551 [QTY] => 4 ) 
) 
```

所以添加所有数量然后删除重复项。

我不太确定在这里进行的最佳方式。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T23:41:41.543

循环遍历它们，创建一个新数组，其中 PID 为键，QTY 为值，以便您可以添加后者。

```
foreach ($array as $row) {
    list($pid, $qty) = $row;
    $sums[$pid] += $qty;
} 
```

显然，您可以投入[`isset`](http://php.net/isset)以压制通知。

如果您想要以前的数组结构，请再次转换它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T23:42:25.317

我只使用一个简单的循环：

```
$combined = array();
// $org will be the original structure

foreach($org as $id => $data) {
   $pid = $data['PID'];
   if(!isset($combined[$pid])) {
     $combined[$pid] = $data;
   } else {
     $combined[$pid]['QTY'] += $data['QTY'];
   }
}

// return keys to normal indexs instead of the PID
array_values($combined); 
```

# javascript - jQuery tablesorter fancyNumber 插件无法正常工作

> ID：13317561
> 
> 赞同：0
> 
> 时间：2012-11-09T23:34:02.890
> 
> 标签：javascript, jquery, tablesorter

我正在尝试通过[此处](http://lab.christianmontoya.com/jquery-tablesort-numbers-commas/)`fancyNumber`向 tablesorter 添加自定义解析器。 但是，当我将代码添加到我的页面时，如下所示：

```
jQuery(document).ready( function() { 
jQuery.tablesorter.addParser({
  id: "fancyNumber",
  is: function(s) {
    return /^[0-9]?[0-9,\.]*$/.test(s);
  },
  format: function(s) {
    return jQuery.tablesorter.formatFloat( s.replace(/,/g,'') );
  },
  type: "numeric"
});

} ); 
```

然后我将表头设置如下：

```
'<th class="{\'sorter\': \'fancyNumber\'}"><strong>Calls</strong></th>' + 
```

我必须转义单引号，因为我的表头包含在 JavaScript 变量中。

但是，这不起作用，我的逗号数字仍然被错误地排序：

```
Calls
783 
660
642,826 
613 
603,321 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T08:02:28.400

我想知道元数据插件是否已加载。如上所示，在标题中设置的排序器需要插件。

就个人而言，我认为更好的方法是在`headers`选项中设置排序器：

```
$('table').tablesorter({
    headers : {
        3 : { sorter: 'fancyNumber' }
    }
}); 
```

这是我设置[的演示，以显示它有效。](http://jsfiddle.net/Mottie/eY8uH/282/)

# java - Java 中的 INFINITY 常量到底是什么？

> ID：13317566
> 
> 赞同：35
> 
> 时间：2012-11-09T23:34:29.370
> 
> 标签：java, constants, bits, infinity

我最近刚刚遇到了原始类型包装类中的常量，比如`Double.POSITIVE_INFINITY`和`Double.NEGATIVE_INFINITY`。在 API 中，它将第一个定义为：

> 一个保持 double 类型的正无穷大的常数。它等于 Double.longBitsToDouble(0x7ff0000000000000L) 返回的值。

其他人也有同样的定义。

我遇到的麻烦是了解*这些*常量实际上是什么。它们实际上不能*是*或*代表*正/负无穷大，因为系统本质上是有限的。Java创建者认为它只是定义无限概念的任意位设置吗？还是这些实际上有某种特殊价值？如果它*只是*解释为 a 的任意位串`double`，那么当解释为 a 时是否有一些正常的数字`double`将返回`POSITIVE_INFINITY`而不是实际预期的任何值？

`Double.longBitsToDouble(0x7ff0000000000000L)`鉴于API 的一部分，如果这个问题的答案是显而易见的，请原谅我。老实说，这种描述对我来说非常神秘，我不会假装理解十六进制值的实际含义或代表什么。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-10T00:40:39.560

Java 浮点基于 IEEE 754 二进制浮点标准[Floating Point Standard](http://grouper.ieee.org/groups/754/)，其第一个版本大约在 1985 年发布，因此它比 Java 古老得多。鉴于在定义 Java 时 IEEE 754 的硬件实现广泛，Java 创建者别无选择。

每个 IEEE 754 浮点数都包含三个部分：符号位、指数和尾数。大大简化，正常数的大小为：

```
 mantissa * (2 ** exponent) 
```

其中“**”代表权力。

前导位是符号位。在双打中，接下来的 11 位是指数。

所有指数位都打开的位模式为无穷大和 NaN 保留。所有正常数在指数中至少有一个零位。这两个无穷大由所有指数位打开，所有尾数位为零来表示。前导符号位区分正无穷和负无穷。

对于特殊情况，所有指数位的选择不是任意的。砍掉一个极端比处理一系列数字中间的差距更容易，尤其是对于硬件实现。在特殊情况下取消所有位的指数会阻止使用所有位关闭模式编码零，并且会给出最大的绝对幅度值、无穷大、最小的指数，这也会使硬件更加复杂。指数上的所有位绝对是无穷大的最佳选择。

这两个无穷大都用来表示两件事，实际上是无穷大的结果和绝对量级太大而无法在正常数字系统中表示的结果，大于 Double.MAX_VALUE 或小于 -Double.MAX_VALUE 的数字。1.0/0.0 是无限的。2*Double.MAX_VALUE 也是如此。

有一些算法可以简化，减少特殊情况，允许中间结果在任何一种意义上都是无限的。这样做还允许例如甚至平行于y轴的线具有可用于计算的可存储梯度。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-09T23:36:21.320

它们确实*代表*了正无穷和负无穷，这是[IEEE 浮点标准](http://en.wikipedia.org/wiki/Ieee_floating_point)中明确定义的概念。例如，将正浮点数除以零会产生正无穷大。至于位模式本身，它只是一种被选择来表示无穷大的模式。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-09T23:37:46.090

[IEEE 标准 754 浮点数](http://steve.hollasch.net/cgindex/coding/ieeefloat.html)规定：

*“值 +infinity 和 -infinity 用全 1 的指数和全 0 的分数表示。符号位区分负无穷和正无穷。能够将无穷大表示为特定值是有用的，因为它允许操作继续过去的溢出情况。具有无限值的操作在 IEEE 浮点中得到了很好的定义。*

另外： *“IEEE 对特殊数字的操作进行了很好的定义。在最简单的情况下，任何带有 NaN 的操作都会产生 NaN 结果。其他操作如下：* ”

```
 Operation         Result
        n ÷ ±Infinity   0
±Infinity × ±Infinity   ±Infinity
±nonzero  ÷ 0           ±Infinity
Infinity  + Infinity    Infinity
       ±0 ÷ ±0          NaN
 Infinity - Infinity    NaN
±Infinity ÷ ±Infinity   NaN
±Infinity × 0           NaN 
```

# netbeans - 未找到符号，但已导入库

> ID：13317576
> 
> 赞同：0
> 
> 时间：2012-11-09T23:35:07.070
> 
> 标签：netbeans, base64, java

我正在使用 Netbeans，我正在尝试使用 base64 库，但它给了我“找不到符号”

```
OutputStream b64 = new Base64.OutputStream(os); 
```

首先我尝试像这样添加它

```
import org.apache.commons.codec.binary.Base64; 
```

这给了我一个不存在的包，所以我去了这个网站并下载了jar文件。我下载了多个网站，但最后一个是[http://www.java2s.com/Code/Jar/o/Downloadorgapachecommonscodecjar.htm](http://www.java2s.com/Code/Jar/o/Downloadorgapachecommonscodecjar.htm)

我通过右键单击库添加库，添加 Jar/Folder 并选择下载的 .jar 文件。这给了我一个不存在的包。

有人可以向我解释为什么会发生这种情况。

注意：我的目标是使用 java 机器人复制屏幕的一部分并将其作为发布请求发送。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T23:43:53.917

从 Apache 下载 jar： [http: //commons.apache.org/codec/download_codec.cgi](http://commons.apache.org/codec/download_codec.cgi)

所需的包和类在 jar 中可用，即`commons-codec-1.7.jar`

```
 org.apache.commons.codec.binary.Base64 
```

从这个发行版中添加上面的 Jar，如果你仍然遇到问题，请告诉我。

虽然我认为，要获得输出流，你会想要使用[**org.apache.commons.codec.binary.Base64OutputStream**](http://commons.apache.org/codec/apidocs/org/apache/commons/codec/binary/Base64OutputStream.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T23:39:37.387

我相信您打算使用`org.apache.commons.codec.binary.Base64OutputStream`：

```
OutputStream b64 = new Base64OutputStream(os); 
```

这将需要在您的类路径中使用 Apache 的[commons-codec.jar](http://mirrors.ibiblio.org/pub/mirrors/maven2/commons-codec/commons-codec/1.7/commons-codec-1.7.jar)。

# java - Java Socket/Serversocket 广域网连接

> ID：13317577
> 
> 赞同：4
> 
> 时间：2012-11-09T23:35:08.177
> 
> 标签：java, sockets, networking, multiplayer, serversocket

我试图从我的计算机中创建一个服务器，以便他们计算机上的客户端可以连接并与我的计算机通信。我在端口 31350 上创建了服务器，客户端正试图通过我的路由器的 IP 地址进行连接。但只有当我在创建套接字的参数中有“localhost”或我的计算机名称时，它才能通过 lan 工作。而不是当我使用我的 IP 地址，在不同的网络上运行客户端和服务器时。这是代码。

这是我的计算机正在运行的服务器。

```
public static void main (String[] args) throws IOException
{
    ServerSocket server = new ServerSocket(31350);
    Socket client1 = server.accept();   
} 
```

这是我朋友在他的电脑上运行的客户端代码

```
public static void main(String[] args) throws IOException, UnknownHostException
{
    Socket socket;

    //  #'s are what I got from whatismyip.org on the server computer)
    byte[] serverb = new byte[] {(byte)##, (byte)##, (byte)###, (byte)###};

    socket = new Socket(InetAddress.getByAddress(serverb),31350);
} 
```

这是我运行客户端时所说的

线程“主”java.net.ConnectException 中的异常：连接超时：在 java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:69) 在 java.net.AbstractPlainSocketImpl 的 java.net.DualStackPlainSocketImpl.connect0(Native Method) 处连接.doConnect(AbstractPlainSocketImpl.java:339) 在 java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200) 在 java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182) 在 java.net.PlainSocketImpl.connect(PlainSocketImpl. java:157) 在 java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391) 在 java.net.Socket.connect(Socket.java:579) 在 java.net.Socket.connect(Socket.java:528) 在java.net.Socket.(Socket.java:425) 在 java.net.Socket.(Socket.java:241) 在 ClientTest.main(ClientTest.java:22) // 22 是行 socket = new Socket(InetAddress.getByAddress(serverb),31350);

防火墙被禁用。我的路由器上的端口 31350 被转发到我在 cmd 中使用 ipconfig 获得的计算机的本地 IP 地址。但它仍然不起作用，我只是在尝试从客户端计算机创建套接字时得到 IOException 。服务器计算机上没有任何反应。怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T23:49:24.233

[更新]

如您所料，连接超时表明这是某种网络问题。来自您的客户端的数据包没有到达服务器计算机。确切的解决方案将取决于路由器的类型，但谷歌的术语是“端口转发”。这是我随机找到的一篇文章可能会有所帮助：[http ://www.rhinosoft.com/KnowledgeBase/kbarticle.asp?RefNo=1289](http://www.rhinosoft.com/KnowledgeBase/kbarticle.asp?RefNo=1289)

基本上，您对路由器进行编程，以便端口 31350 上的任何连接请求都将转发到局域网上本地 IP 地址的计算机。

祝你好运！

[原评论]

这更像是一个评论而不是一个答案（但我需要额外的空间）。您的 try catch 逻辑将使诊断问题变得更加困难。简化代码如下：

```
public static void main(String[] args) throws IOException, UnknownHostException
{
    Socket socket;

            //  #'s are what I got from whatismyip.org on the server computer)
    byte[] serverb = new byte[] {(byte)##, (byte)##, (byte)###, (byte)###};

    socket = new Socket(InetAddress.getByAddress(serverb),31350);
} 
```

只需让原始 IOException 传播并更新您的问题以包含异常堆栈跟踪。最初的异常包含有价值的信息——如果它说连接被拒绝，那意味着一件事——也许你的端口号不正确。如果它说连接超时，则表示其他情况-您确实确实遇到了防火墙问题，或者您的IP地址错误。

您的代码正在捕获有用的异常，将其吞下并抛出一个不太有用的异常。

对您的服务器代码执行相同的操作：

```
public static void main (String[] args) throws IOException
{
    ServerSocket server = new ServerSocket(31350);
    Socket client1 = client1 = server.accept();
} 
```

堆栈跟踪将显示哪个方法引发了异常，因此您不需要像这样的冗余文本`InetAddress creation failed`

# c# - 如何从解决方案项中添加的 .txt 文件中读取

> ID：13317579
> 
> 赞同：19
> 
> 时间：2012-11-09T23:35:13.477
> 
> 标签：c#, file-io

我已经在我的解决方案项目中添加了一个 dictionary.txt 文件，我想从该文件中读取，而不是从我的硬盘驱动器上的位置读取，这样如果其他人在他们的计算机上打开我的项目，他们仍然能够从该文件中读取。

在另一个问题中，他们说要进入属性并更改“复制到输出目录”设置，但我在我的 .txt 文件属性下看不到这一点（我使用的是 VS2010）：[从本地文件夹读取文本文件](https://stackoverflow.com/questions/2291835/read-a-text-file-from-local-folder)

目前我的代码如下所示：

```
string[] dictionary = System.IO.File.ReadAllLines(@"dictionary.txt"); 
```

我需要做些什么或以其他方式引用文件以确保它仅引用我添加到项目中的文件吗？还是我错过了更基本的东西？

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-10T00:33:03.860

我假设您已经将该文件添加到您的解决方案中，并且它显示在 Visual Studio 的解决方案资源管理器中，作为您正在编译的项目下的一个项目。

1.  在解决方案资源管理器中选择文本文件。
2.  在“属性”面板中，将`Build Action`属性设置为`Embedded Resource`

“复制到输出目录设置”只是确保将文件复制到`Build\Debug`或`Build\Release`文件夹中。

Embedded Resources 操作确保文件被捆绑到您的 .exe 或 .dll 文件中，并且可供您的程序加载。

# javascript - 如何使用 CSS 或 JS 创建像 Jamendo 的页脚一样的页脚？

> ID：13317582
> 
> 赞同：-1
> 
> 时间：2012-11-09T23:35:25.180
> 
> 标签：javascript, html, css

我对这个网站[http://www.jamendo.com/](http://www.jamendo.com/)的页脚以及如何创建与我的网站类似的页脚有点困惑。这真的很棘手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T23:43:57.230

这很简单。所有内容（没有页脚）都有一个边距（在本例中为 240px），页脚有 position:fixed 和 height:240px, bottom:0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T23:42:34.957

页脚位置：始终固定在屏幕底部。

内容可能具有适当像素的 margin-bottom/padding-bottom，并且它的 z-indexed 始终位于页脚上方。

当您向下滚动足够多时，内容会结束并显示始终存在的页脚，固定在窗口底部。

祝你好运。

**编辑：**

此外，如果有疑问，请使用 chrome 的 html 检查器或 Firefox 的 firebug。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T23:43:42.107

它实际上并不太复杂，没有 JS 只有 CSS。它们在页面底部有一个固定的页脚，其 z-index 低于名为#container 的同级 div。然后他们添加 margin-bottom: 240px; #container，因此页面不断滚动到空白边距以显示页脚。很酷的把戏

# c# - 将表单的父级设置为“FindWindow”

> ID：13317585
> 
> 赞同：3
> 
> 时间：2012-11-09T23:35:44.337
> 
> 标签：c#, c, parent, setparent

我正在做一个覆盖。我这里有这段代码

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Linq;
    using System.Text;
    using System.Windows.Forms;

    namespace HyperBox
    {

public partial class Form1 : Form
{

    public Form1()
    {
        InitializeComponent();

        this.TopMost = true; // make the form always on top
        this.FormBorderStyle = System.Windows.Forms.FormBorderStyle.None; // hidden border
        this.WindowState = FormWindowState.Maximized; // maximized
        this.MinimizeBox = this.MaximizeBox = false; // not allowed to be minimized
        this.MinimumSize = this.MaximumSize = this.Size; // not allowed to be resized
        this.TransparencyKey = this.BackColor = Color.Red; // the color key to transparent, choose a color that you don't use

        // Set the form click-through
        int initialStyle = GetWindowLong(this.Handle, -20);
        SetWindowLong(this.Handle, -20, initialStyle | 0x80000 | 0x20);
    }

    [System.Runtime.InteropServices.DllImport("user32.dll", SetLastError = true)]
    static extern int GetWindowLong(IntPtr hWnd, int nIndex);

    [System.Runtime.InteropServices.DllImport("user32.dll")]
    static extern int SetWindowLong(IntPtr hWnd, int nIndex, int dwNewLong);
    [System.Runtime.InteropServices.DllImport("user32.dll")]
    static extern bool SetLayeredWindowAttributes(IntPtr hwnd, uint crKey, byte bAlpha,         uint dwFlags);
    [System.Runtime.InteropServices.DllImport("user32.dll")]
    static extern int SetParent(int hWndChild, int hWndNewParent);

    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);
        // draw what you want
        e.Graphics.FillEllipse(Brushes.Blue, 30, 30, 100, 100);

    }
    private void Form1_MouseMove(object sender, MouseEventArgs e)
    {

    }

    private void Form1_Paint(object sender, PaintEventArgs e)
    {

    }

    private void Form1_Load(object sender, EventArgs e)
    {

    }

}

    } 
```

它将椭圆绘制到一个透明且始终位于顶部的窗体上。问题是它不适用于全屏。

我试过用这个

```
 SetParent(this.handle, FindWindow(null, "<parent window title here>")); 
```

除了我得到错误。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T03:39:23.780

我相信你的错误就在这里

```
[System.Runtime.InteropServices.DllImport("user32.dll")]
static extern int SetParent(int hWndChild, int hWndNewParent); 
```

它期待两个`IntPtr`not类型的参数，`int`它返回一个`IntPtr`not an `int`。

[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633541%28v=vs.85%29.aspx)提供了更多信息。有关一些好的 C# 示例，请参阅底部的用户贡献。

请记住，与 一起使用时[extern](http://msdn.microsoft.com/en-us/library/e59b22c5%28v=vs.80%29.aspx)`DllImport`是对非托管代码的引用。user32.dll 中调用的方法`SetParent()`没有接受两个`int`s 作为参数的定义。

因此该块应为：

```
[System.Runtime.InteropServices.DllImport("user32.dll")]
static extern IntPtr SetParent(IntPtr hWndChild, IntPtr hWndNewParent); 
```

# vim - 解释“gvim菜单中的+gP命令

> ID：13317586
> 
> 赞同：16
> 
> 时间：2012-11-09T23:35:45.780
> 
> 标签：vim

在 Gvim 中，菜单中粘贴的命令是`"``+``g``P`

我的理解是`"`表示我将从特定寄存器粘贴，`+`表示寄存器（某种全局共享寄存器？剪贴板？），并且`P`是粘贴命令。

然而，这留下了`g`无法解释的地方。它有什么作用？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-09T23:39:09.830

见`:help gP`：

> 就像“P”，但将光标留在新文本之后。{Vi 无此功能}

# shell - Shell 脚本测试命令

> ID：13317605
> 
> 赞同：1
> 
> 时间：2012-11-09T23:37:50.547
> 
> 标签：shell, design-patterns, testing, scripting

我编写了以下 shell 脚本。

```
#! /bin/sh

foo=asdfqwer/asdfxv

if [ $foo = */* ]
then
    echo bad
else
    echo good
fi 
```

在测试命令中，我们可以像这样比较字符串和模式，

```
[ string = pattern ]

[ string == pattern ] 
```

但是，上面的脚本总是在终端打印“好”，并且也有如下错误：

```
[ : asdfqwer/asdfxv : unexpected operator 
```

有人可以告诉我为什么以及如何比较 shell 脚本中的搅拌和模式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T23:52:37.053

命令（`test`或`[`命令）不进行全局比较。相反，shell 正在扩展`*/*`以匹配您目录中的文件，并将它们替换为该命令。据推测，其中一个文件名被解析为`[`命令的运算符，并且是无效的。

与 glob 进行比较的最佳方法是`case`：

```
#!/bin/sh

foo=asdfqwer/asdfxv

case "$foo" in
   */*) echo bad ;;
   *) echo good ;;
esac 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T23:50:01.620

```
if [ "$foo" == "*/*" ]
then
    echo bad
else
    echo good 
```

您需要双等号进行比较，看起来字符串比较需要双引号。

[http://www.tech-recipes.com/rx/209/bournebash-shell-scripts-string-comparison/](http://www.tech-recipes.com/rx/209/bournebash-shell-scripts-string-comparison/)

# python - 捷克 ARES 通过 SOAP 在 python-suds 错误 suds.WebFault

> ID：13317606
> 
> 赞同：1
> 
> 时间：2012-11-09T23:38:01.887
> 
> 标签：python, soap, suds

我正在尝试通过 Python 的 SOAP 接口访问捷克商业注册表 ARES，但出现错误

```
Traceback (most recent call last):
  File "ares.py", line 23, in <module>
    print client.service.GetXmlFile(query)
  File "/usr/lib/python2.7/site-packages/suds/client.py", line 542, in __call__
    return client.invoke(args, kwargs)
  File "/usr/lib/python2.7/site-packages/suds/client.py", line 602, in invoke
    result = self.send(soapenv)
  File "/usr/lib/python2.7/site-packages/suds/client.py", line 643, in send
    result = self.succeeded(binding, reply.message)
  File "/usr/lib/python2.7/site-packages/suds/client.py", line 678, in succeeded
    reply, result = binding.get_reply(self.method, reply)
  File "/usr/lib/python2.7/site-packages/suds/bindings/binding.py", line 151, in get_reply
    self.detect_fault(soapbody)
  File "/usr/lib/python2.7/site-packages/suds/bindings/binding.py", line 182, in detect_fault
    raise WebFault(p, fault)
suds.WebFault 
```

我正在使用以下代码：

```
#!/usr/bin/python
import sys
import logging

handler = logging.StreamHandler(sys.stderr)
logger = logging.getLogger('suds.transport.http')
logger.setLevel(logging.DEBUG), handler.setLevel(logging.DEBUG)
logger.addHandler(handler)

from suds.client import Client

ARES = "http://wwwinfo.mfcr.cz/ares/xml_doc/wsdl/standard.wsdl"

client = Client(ARES)
query = client.factory.create('ns3:dotaz')

query.Pomocne_ID = 1
query.Typ_vyhledani = "FREE"
query.Klicove_polozky.ICO = 27074358
query.Max_pocet = 10

print client.service.GetXmlFile(query) 
```

但我完全是 suds/python/SOAP 新手，有没有人知道哪里可能有问题？

# c# - 使用 XML 作为存储和 Google Drive

> ID：13317611
> 
> 赞同：3
> 
> 时间：2012-11-09T23:38:32.873
> 
> 标签：c#, xml, google-drive-api

作为一名不熟练的程序员，我计划为医生办公室开发一个简单的单用户 C# Windows 窗体应用程序。医生想要存储、读取和修改有关患者的简单数据（个人数据和病史）。它只是字符串、整数和日期。1000-5000 名患者。他只想从 2 台不同的个人计算机上访问数据，而且从不同时访问。除了这两台笔记本电脑，他原则上没有任何硬件。

好吧，我的想法是使用 XML 文件作为存储文件（包含所有患者的数据）并将这些文件存储在他笔记本电脑的 Google Drive 应用程序文件夹中，以实现两个位置的分配。我认为这是因为它真的很简单，但我从来没有被教过类似的东西......

所以......你认为它可以工作还是只是一个很大的愚蠢？如果是这样，你有什么建议？

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T00:06:50.670

您可以使用像[SQL Server Compact](https://www.microsoft.com/sqlserver/en/us/editions/2012-editions/compact.aspx)或[SQLLite](http://www.sqlite.org/)这样的无服务器数据库。它们在任何方面都比 XML 文件更好，并且 DB 文件可以在谷歌驱动器中。但随着文件变大，上传和下载将成为问题。确保只有一个应用程序实例在使用该数据库也很重要。

您还可以使用 SQL Azure 和[Microsoft Sync 框架](http://msdn.microsoft.com/en-us/sync/bb736753.aspx)等云解决方案来获得更强大的解决方案，这将是合适的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T00:11:45.740

首先查看 HIPAA 安全规则。如果医生办公室是受保护的实体，那么在保护患者数据（和财务责任）方面存在很多陷阱。

[http://www.hhs.gov/ocr/privacy/hipaa/administrative/securityrule/index.html](http://www.hhs.gov/ocr/privacy/hipaa/administrative/securityrule/index.html)

由于您正在处理 47 个州的违规通知法所涵盖的 PII - 这是一个完全不同程度的头痛。它可以存储在 XML 中吗？当然，只需确保所有内容在传输和静止时都经过高度加密。这是个好主意吗？可能不是。由于违规行为是某些数据类型中的严格责任法规，因此正确行事是个好主意。

要大致了解这些问题，请查看 Microsoft Healthvault 或存档的 Google Health HIPAA 概述。该法案的 ARRA 扩展使其更加复杂。简而言之。

HIPAA 要求医疗保健提供者和其他服务保持“合理和适当的保护措施以防止有意或无意使用或披露健康信息”的最低标准。

附带说明一下，您可以轻松地将数据存储在 SQL Server 压缩数据库文件或 Access 数据库文件中，这至少可以为数据提供一些本机保护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T00:29:53.327

XML（和 JSON）应该用于传输信息（例如：对 Ajax 查询的响应），而不是作为数据库。有时将 XML 视为数据库是很诱人的，因为它具有查询功能，但请抵制住这种诱惑！性能、可扩展性和未来支持可能是问题。

# android - 无法运行后台服务

> ID：13317612
> 
> 赞同：0
> 
> 时间：2012-11-09T23:38:44.490
> 
> 标签：android, service, location, background-process

我试图在后台服务中使用 LocationListener 类来每次接收用户的当前位置，然后将其与存储在我的数据库中的一些数据进行比较。但是当我尝试这样做时，我遇到了错误

```
 package com.example.alert;

   import android.app.Service;
   import android.content.Context;
   import android.content.Intent;
   import android.location.Location;
   import android.location.LocationListener;
  import android.location.LocationManager;
  import android.media.MediaPlayer;
  import android.os.Bundle;
 import android.os.IBinder;
 import android.widget.Toast;

 public class service extends Service{
LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

public void onCreate() {
    Toast.makeText(this, "Background Service Created", Toast.LENGTH_LONG).show();

}

public void onDestroy() {
    Toast.makeText(this, "My Service Stopped", Toast.LENGTH_LONG).show();

}

public void onStart(Intent intent, int startid) {

    Toast.makeText(this, "My Service Started", Toast.LENGTH_LONG).show();
    Intent myIntent=new Intent(service.this,CurrentLocation.class);
    startActivity(myIntent);
    }
} 
```

这是我的日志猫

```
11-10 04:54:54.819: E/AndroidRuntime(768): FATAL EXCEPTION: main
11-10 04:54:54.819: E/AndroidRuntime(768): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.alert/com.example.alert.service}: java.lang.NullPointerException
  11-10 04:54:54.819: E/AndroidRuntime(768):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
  11-10 04:54:54.819: E/AndroidRuntime(768):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-10 04:54:54.819: E/AndroidRuntime(768):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-10 04:54:54.819: E/AndroidRuntime(768):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-10 04:54:54.819: E/AndroidRuntime(768):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-10 04:54:54.819: E/AndroidRuntime(768):  at android.os.Looper.loop(Looper.java:137)
11-10 04:54:54.819: E/AndroidRuntime(768):  at android.app.ActivityThread.main(ActivityThread.java:4745)
11-10 04:54:54.819: E/AndroidRuntime(768):  at java.lang.reflect.Method.invokeNative(Native Method)
11-10 04:54:54.819: E/AndroidRuntime(768):  at java.lang.reflect.Method.invoke(Method.java:511)
11-10 04:54:54.819: E/AndroidRuntime(768):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-10 04:54:54.819: E/AndroidRuntime(768):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-10 04:54:54.819: E/AndroidRuntime(768):  at dalvik.system.NativeStart.main(Native Method)
11-10 04:54:54.819: E/AndroidRuntime(768): Caused by: java.lang.NullPointerException
11-10 04:54:54.819: E/AndroidRuntime(768):  at android.content.ContextWrapper.getSystemService(ContextWrapper.java:416)
11-10 04:54:54.819: E/AndroidRuntime(768):  at com.example.alert.service.<init>(service.java:15)
11-10 04:54:54.819: E/AndroidRuntime(768):  at java.lang.Class.newInstanceImpl(Native Method)
11-10 04:54:54.819: E/AndroidRuntime(768):  at java.lang.Class.newInstance(Class.java:1319) 
```

这是位置侦听器的其余代码

```
 package com.example.alert;

   import android.app.Activity;
  import android.content.Context;
  import android.location.Location;
  import android.location.LocationListener;
  import android.location.LocationManager;
  import android.os.Bundle;
 import android.widget.Toast;

 public class CurrentLocation extends Activity {
LocationManager lm ;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    /* Use the LocationManager class to obtain GPS locations */
    LocationListener ll = new MyLocationListener();
    //lm.requestLocationUpdates( LocationManager.GPS_PROVIDER, 5*60*10000, 0, ll);
    lm.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, ll);

}

/* Class My Location Listener */
public class MyLocationListener implements LocationListener
{

    public void onLocationChanged(Location loc)
    {
        if(loc!=null)
        {
            double x;
            String Text = "My current location is: " +"Latitud = " + loc.getLatitude() +"Longitud = " + loc.getLongitude();
            Toast.makeText( getApplicationContext(),Text,Toast.LENGTH_SHORT).show();    
            //for loop, alerters retrieving one by one
            //x= calcDistance(loc.getLatitude(),loc.getLongitude(),,);
            //if(x<1)
            // distance < 1, retrieve data from DB and trigger 
        }
    }

    public void onProviderDisabled(String provider)
    {
        Toast.makeText( getApplicationContext(),"Gps Disabled - @From :Alert Me",Toast.LENGTH_SHORT ).show();
    }

    public void onProviderEnabled(String provider)
    {
        Toast.makeText( getApplicationContext(),"Gps Enabled - @From :Alert Me",Toast.LENGTH_SHORT).show();
    }

    public void onStatusChanged(String provider, int status, Bundle extras)
    {

    }

}/* End of Class MyLocationListener */

public double calcDistance(double latA, double longA, double latB, double longB) {

    double theDistance = (Math.sin(Math.toRadians(latA)) *  Math.sin(Math.toRadians(latB)) + Math.cos(Math.toRadians(latA)) * Math.cos(Math.toRadians(latB)) * Math.cos(Math.toRadians(longA - longB)));
    return new Double((Math.toDegrees(Math.acos(theDistance))) * 69.09*1.6093);
}

} 
```

清单文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.alert"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name=".Instructions" android:label="Instructions"></activity>
    <activity android:name=".AboutApp" android:label="About ALERT ME!"></activity>

    <activity android:name=".ViewAlerters" android:label="Alerters Active"></activity> 
    <activity android:name=".AddAlerter" android:label="Add an Alerter"></activity>
    <activity android:name=".EditAlerter" android:label="Edit an alerter"></activity> 
    <activity android:name=".AddLocation" android:label="Add Location to Alerter"></activity>
    <activity android:name=".AddTrigger" android:label="Add trigger to Alerter"></activity>

    <activity android:name=".SilVib" android:label="Silent/Vibrate Trigger"></activity>
    <activity android:name=".CallMode" android:label="Call Mode Trigger"></activity>
    <activity android:name=".service"></activity>
    <activity android:name=".Status_Notify"></activity>
    <activity android:name=".Notifier"></activity>    
    <activity android:name=".Message"></activity>
    <activity android:name=".Message_sent"></activity>
    <activity android:name=".StoringEntire"></activity>
    <activity android:name=".CurrentLocation"></activity>

    <uses-library android:name="com.google.android.maps"/>
<service
    android:enabled="true"
 android:name=".service"/>
      </application>
 <uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.SEND_SMS"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_BACKGROUND_SERVICE"/>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T23:41:17.913

LogCat 指出：

```
Caused by: java.lang.NullPointerException
    at android.content.ContextWrapper.getSystemService(ContextWrapper.java:416)
    at com.example.alert.service.<init>(service.java:15) 
```

只需将此代码移动到以下位置即可初始化上下文`onCreate()`：

```
public class service extends Service {
    LocationManager lm;

    @Override
    public void onCreate() {
        // This line needs an existing context
        lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        Toast.makeText(this, "Background Service Created", Toast.LENGTH_LONG).show();
    }

    // etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T23:41:56.220

确保您已将服务添加到 AndroidManifest 文件

> 服务是一个应用程序组件，代表应用程序希望在不与用户交互的情况下执行更长时间运行的操作，或提供功能供其他应用程序使用。每个服务类必须在其包的 AndroidManifest.xml 中有相应的声明。可以使用 Context.startService() 和 Context.bindService() 启动服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-11T08:20:36.323

使用此代码我的朋友并根据您的需要进行更改

```
public class MainActivity extends Activity {
    Button btnStart, btnStop;
    public static Context mContext;
    Intent it;
    public LocationManager manager;
    public boolean isGPSEnabled = false;
    boolean isNetworkEnabled = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mContext = this;
        manager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        isGPSEnabled = manager.isProviderEnabled(LocationManager.GPS_PROVIDER);
        // getting network status
        isNetworkEnabled = manager
                .isProviderEnabled(LocationManager.NETWORK_PROVIDER);
        btnStart = (Button) findViewById(R.id.btnStart);
        btnStop = (Button) findViewById(R.id.btnStop);
        btnStart.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                /*if (isGPSEnabled) {
                    startService(getIntent());
                }
                else
                {
                    Toast.makeText(MainActivity.this, "Please oN Gps ",
                            Toast.LENGTH_LONG).show();
                }*/
                startService(getIntent());
            }
        });
        btnStop.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                stopService(getIntent());
            }
        });
    } // on create ends

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public Intent getIntent() {
        it = new Intent(mContext, MyService.class);
        return it;
    } // method ends

    public static Context getContextForService() {
        return mContext;
    } // methods ends
} // final class ends 
```

这是您的位置服务

```
public class MyService extends Service {
    // flag for GPS status
    public static LocationManager manager;
    public static boolean isGPSEnabled = false;
    public static double lattitude = 0;
    public static double longitude = 0;
    int count = 0;
    // flag for network status
    boolean isNetworkEnabled = false;

    // flag for GPS status
    boolean canGetLocation = false;
    MyFile myFile;

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    } // method ends

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {

        super.onStartCommand(intent, flags, startId);
        System.out.println("On Start Command is called ");
        return START_STICKY;
    } // method ends

    @Override
    public void onCreate() {
        // TODO Auto-generated method stub
        super.onCreate();
        System.out.println("Service is created//////////// ");
        // start asyntask to get locations

        new GetLocations().execute();
    }// on create ends

    @Override
    public void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        System.out.println("Service is  Destroyed  //////////// ");
        if (manager != null && isGPSEnabled == true) {
            manager.removeUpdates(mylistener);
            System.out.println("Service is  Destroyed under if //////////// ");
        }

    } // method ends

    public class GetLocations extends AsyncTask<Void, Void, Void> {

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            manager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
            // getting GPS status
            isGPSEnabled = manager
                    .isProviderEnabled(LocationManager.GPS_PROVIDER);
            // getting network status
            isNetworkEnabled = manager
                    .isProviderEnabled(LocationManager.NETWORK_PROVIDER);
            if (isGPSEnabled) {
                /*
                 * Criteria criteria = new Criteria(); String bestProvider =
                 * manager.getBestProvider(criteria, false); Location location =
                 * manager.getLastKnownLocation(bestProvider); double lat
                 * =location.getLatitude(); double longi
                 * =location.getLongitude();
                 * System.out.println("getting location continous ////// Lattti "
                 * +location.getLatitude() );
                 * System.out.println("getting location continous ////// LONGITU "
                 * + location.getLongitude());
                 */
                manager.requestLocationUpdates(
                        LocationManager.NETWORK_PROVIDER, 3000, 0, mylistener);

            } else {
                Toast.makeText(MyService.this, "Please oN Gps ",
                        Toast.LENGTH_LONG).show();
            }
        }

        @Override
        protected Void doInBackground(Void... params) {
            // TODO Auto-generated method stub
            // getting current lattitude and longitude

            return null;
        }// method ends
    }// asyntask class ends

    void handleLocationChanged(Location loc) {
        lattitude = loc.getLatitude();
        longitude = loc.getLongitude();
        /*Toast.makeText(MyService.this,
                "lat is " + lattitude + " long is  " + longitude,
                Toast.LENGTH_LONG).show();*/
        System.out.println("getting location continous ////// Lattti "
                + lattitude);
        System.out.println("getting location continous ////// LONGITU "
                + longitude);

        generateNoteOnSD("GpsTesting.txt", "lattitude is" + lattitude + "\n"
                + " longitude" + longitude);

    } // method ends

    public LocationListener mylistener = new LocationListener() {

        @Override
        public void onLocationChanged(Location loc) {
            handleLocationChanged(loc);
        }

        public void onProviderDisabled(String arg0) {
            // TODO Auto-generated method stub
            // Toast.makeText(mContext, "Gps is disable",
            // Toast.LENGTH_SHORT).show();
        }

        public void onProviderEnabled(String arg0) {
            // TODO Auto-generated method stub
            // Toast.makeText(mContext, "Gps is on", Toast.LENGTH_SHORT).show();
        }

        public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
            // TODO Auto-generated method stub
            // Toast.makeText(appcontext, "Gps  status is chnged ",
            // Toast.LENGTH_SHORT).show();
        }
    };

    public void showSettingsAlert() {
        AlertDialog.Builder alertDialog = new AlertDialog.Builder(
                MainActivity.getContextForService());

        // Setting Dialog Title
        alertDialog.setTitle("Alert");

        // Setting Dialog Message
        alertDialog
                .setMessage("GPS is not enabled. Do you want to go to settings menu?");

        // On pressing Settings button
        alertDialog.setPositiveButton("Settings",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        Intent intent = new Intent(
                                Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                        getApplicationContext().startActivity(intent);
                    }
                });

        // on pressing cancel button
        alertDialog.setNegativeButton("Cancel",
                new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.cancel();
                    }
                });

        // Showing Alert Message
        alertDialog.show();
    }// method ends
        // method for sending notiifcation

    public void sendNotification() {
        int MY_NOTIFICATION_ID = 1;
        PendingIntent contentIntent = PendingIntent.getActivity(
                getApplicationContext(), 0, new Intent(MyService.this,
                        MainActivity.class), 0);
        Notification myNotification = new NotificationCompat.Builder(
                getApplicationContext())
                .setContentTitle("Notification for Lat and Long")
                .setContentText("hi testing notiifaction on lat and long")
                .setTicker(" ToDoList Notification")
                .setWhen(System.currentTimeMillis())
                .setContentIntent(contentIntent)
                .setDefaults(Notification.DEFAULT_SOUND).setAutoCancel(true)
                .setSmallIcon(R.drawable.ic_launcher).build();
        NotificationManager notificationManager = (NotificationManager) MainActivity
                .getContextForService().getSystemService(
                        Context.NOTIFICATION_SERVICE);
        notificationManager.notify(MY_NOTIFICATION_ID, myNotification);
    } // method ends
        // writing file on

    public void generateNoteOnSD(String sFileName, String sBody) {
        try {
            File root = new File(Environment.getExternalStorageDirectory()
                    + "/sdcard", "Gps_Data");
            if (!root.exists()) {
                root.mkdirs();
            }
            File gpxfile = new File(root, sFileName);
            FileWriter writer = new FileWriter(gpxfile);
            writer.append(sBody);
            writer.flush();
            writer.close();

        } catch (IOException e) {
            e.printStackTrace();

        }
    } // method ends

    private boolean haveNetworkConnection() {
        boolean haveConnectedWifi = false;
        boolean haveConnectedMobile = false;

        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo[] netInfo = cm.getAllNetworkInfo();
        for (NetworkInfo ni : netInfo) {
            if (ni.getTypeName().equalsIgnoreCase("WIFI"))
                if (ni.isConnected())
                    haveConnectedWifi = true;
            if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
                if (ni.isConnected())
                    haveConnectedMobile = true;
        }
        return haveConnectedWifi || haveConnectedMobile;
    }
} // final class ends 
```

# android - Android 开发 VS Spring MVC & Hibernate & Maven 学习曲线

> ID：13317616
> 
> 赞同：0
> 
> 时间：2012-11-09T23:39:26.487
> 
> 标签：android, spring, hibernate, maven

我有一个问题：我正在进行最后一年的项目，我可以开发一个 Android 应用程序或一个 Web 服务器（它可以将数据从 XML 文件导入/导出到 XML 文件，并具有用户身份验证等）。

Web 服务器必须使用 Spring MVC、Hibernate 和 Maven，但我从未对这些技术做过任何事情。Android开发也有同样的问题。我的技能是 Java（只是 Java，不是 Java EE）、C、HTML 和关系数据库。这就是我们在西班牙大学学习的内容。

两种选择的学习曲线如何？哪个不明显？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T00:04:06.747

在我看来，这取决于您需要开发的 Android 应用程序的类型。如果你需要一个复杂、漂亮和优美的 UI，我认为这两条学习曲线是相似的。如果你需要一个能正常工作的应用程序，Android 比 Spring + hibernate 更容易学习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:26:59.563

> 我的技能是 Java（只是 Java，不是 Java EE）、C、HTML 和关系数据库

**如果这个项目的可用时间很短：**

由于您不了解 Java EE，我建议您使用 Android 开发。

**别的 ：**

我建议使用 Web 服务器应用程序，因为这将是一个很好的学习曲线，因为您将学习 Java EE、Spring 和 Hibernate。而且，如果您计划将来成为 Java 开发人员，它也会派上用场。

# java - 有内在秩序是什么意思？

> ID：13317617
> 
> 赞同：0
> 
> 时间：2012-11-09T23:39:27.663
> 
> 标签：java, hibernate, hibernate-mapping

在 Hibernate 中进行集合映射时。我遇到了内在的秩序。有内在秩序是什么意思？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T23:45:35.867

它指的是集合中元素的顺序是否重要。列表具有固有顺序：包含 [1, 2, 3] 的列表与包含 [3, 2, 1] 的列表不同。另一方面，集合没有固有顺序：包含 [1, 2, 3] 的集合与包含 [3, 2, 1] 或 [2, 1, 3] 的集合相同，依此类推.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T23:47:48.420

通常，当将数据库中的事物持久化为 时`List`，不会保留元素的顺序（您可以通过将索引存储在附加字段中来保留它）。与插入顺序相比，元素以不同的顺序检索，并且列表将被打乱。

但是，某些数据结构具有“固有顺序”，例如 a`TreeMap`将按`Comparator`顺序恢复元素，因为无论您使用哪种顺序检索元素，`TreeMap`都会恢复顺序。

# python - Python - 如何选择 ObjectId

> ID：13317618
> 
> 赞同：0
> 
> 时间：2012-11-09T23:39:28.360
> 
> 标签：python, pymongo

Python 菜鸟在这里。我的数据库中有一个名为“data”的对象，我想编写一些python，它将从每组student_id中选择最低分数......并为找到的每个最小记录获取唯一的ObjectId？

```
{u'student_id': 197, u'_id': ObjectId('50906d7fa3c412bb040eb88d'), u'type': u'homework', u'score': 10.90872422518918}
{u'student_id': 197, u'_id': ObjectId('50906d7fa3c412bb040eb88e'), u'type': u'homework', u'score': 88.3871242475841}
{u'student_id': 198, u'_id': ObjectId('50906d7fa3c412bb040eb892'), u'type': u'homework', u'score': 17.46279901047208}
{u'student_id': 198, u'_id': ObjectId('50906d7fa3c412bb040eb891'), u'type': u'homework', u'score': 76.18366499496366}
{u'student_id': 199, u'_id': ObjectId('50906d7fa3c412bb040eb895'), u'type': u'homework', u'score': 49.34223066136407}
{u'student_id': 199, u'_id': ObjectId('50906d7fa3c412bb040eb896'), u'type': u'homework', u'score': 58.09608083191365} 
```

谢谢你的麻烦......这是我的代码......

```
import pymongo

from itertools import groupby
from pymongo import Connection

connection = Connection('localhost', 27017)

db = connection.students

data = db.grades.find({'type' : 'homework'}).sort([('student_id',pymongo.ASCENDING),('score',pymongo.ASCENDING)])

for student_id, items in groupby(data, lambda s: s['student_id']):
    lowest_score = min(i['score'] for i in items)

    print lowest_score 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T23:56:26.593

我认为您可能能够以不同的方式进行最低检查并获得 ObjectID 而不是最小值的分数。这是我的做法：

```
lowest_id = min(items, key=lambda i: i['score'])['_id'] 
```

现在，有可能（实际上，很可能）您可以在数据库本身中执行类似的操作，并且可能会有更好的性能。但是，如果您的数据集不太笨重，上述方法可能工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T23:54:26.800

不确定您是否仍然可以访问 student_id 字段，如果可以，您可以替换：

```
lowest_score = min(i['score'] for i in items) 
```

和：

```
lowest_score = min((i['score'],i['student_id']) for i in items) 
```

# c# - 如何将 JavaScript 文件的链接添加到某个 ASP .NET MVC 页面的标题中

> ID：13317621
> 
> 赞同：3
> 
> 时间：2012-11-09T23:39:48.190
> 
> 标签：c#, .net, asp.net-mvc-3, asp.net-mvc-4

如何将指向 JavaScript 文件的链接添加到某个 ASP .NET MVC 页面的标题中？

假设有 _Layout.cshtml 和 About.cshtml，我需要将一些 javascript 文件放在 About.cshtml 的标题中。我的意思是只到那个页面。

[http://www.dotnetcurry.com/ShowArticle.aspx?ID=636](http://www.dotnetcurry.com/ShowArticle.aspx?ID=636)

怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T23:42:27.640

为什么必须在标题中？您可以包含您需要内联的任何脚本：

```
<script src="@Url.Content("~/Scripts/jquery-ui.min.js")" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T23:59:25.310

我的解决方案：

**_Layout.cshtml**

```
!DOCTYPE html>
<html>
<head>
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.4.4.min.js")" type="text/javascript"></script>

    @if (IsSectionDefined("AddToHead"))
    {
         @RenderSection("AddToHead", required: false)
    }    
</head> 
```

**关于.cshtml**

```
@{
    ViewBag.Title = "Index";     
}

<h2>Index</h2>

@section footer {
     <b>Footer Here</b>
}

@section AddToHead {
    <script src="@Url.Content("~/Scripts/test.js")" type="text/javascript">
    </script>
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-09T08:27:58.583

试试下面的代码

```
HtmlGenericControl my_js = new HtmlGenericControl("script");
            my_js.Attributes["async"] = "async";
            my_js.Attributes["type"] = "text/javascript";
            my_js.Attributes["src"] = "http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js";
            Page.Header.Controls.Add(my_js); 
```

您需要使用命名空间：“使用 System.Web.UI.HtmlControls”才能使用 HtmlGenericControl。

# css - iframe 顶部的 div

> ID：13317626
> 
> 赞同：19
> 
> 时间：2012-11-09T23:40:22.987
> 
> 标签：css, html, iframe

我正在寻找一种解决方案，将 div（100% 屏幕宽度和 20% 高度）放置在 iframe 之上，即 100% 屏幕宽度和 100% 屏幕高度它应该如下所示：

```
__________________________
||      On top DIV       ||
||_______________________||
|                         |
|         Iframe          |
|                         |
|_________________________| 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-09T23:53:30.173

超级简单的东西。。

在一个容器 div 中放置一个 iframe 和一个标头 div。

在容器上设置 position:relative，在标题 div 上设置 position:absolute 和 top:0。

应该这样做。

HTML：

```
<div class="holder">
   <div class="bar"></div>
   <iframe class="frame"></iframe>
</div>​ 
```

CSS：

```
.holder{
    width: 400px;
    height: 300px;
    position: relative;
}

.frame{
    width: 100%;
    height: 100%;
}

.bar{
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 40px;
} 
```

[小提琴](http://jsfiddle.net/yoemcpxk/5/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-11-20T21:51:53.247

Rodik 答案的概念很好，但实现起来有问题。

1.  在一个容器 div 中放置一个 iframe 和一个标头 div。

2.  在容器上设置 position:relative，在标题 div 上设置 position:absolute 和 top:0。

[http://jsfiddle.net/eayr9pup/2/](http://jsfiddle.net/eayr9pup/2/)

```
.holder {
  width: 400px;
  height: 300px;
  position: relative
}

.frame {
  width: 100%;
  height: 100%;
  background-color: blue;
}

.bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 40px;
  background-color: red;
}
```

```
<div class="holder">
  <iframe class="frame"></iframe>
  <div class="bar"></div>
</div>
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-09T23:48:57.807

应该可以，有什么问题？

确保您将`position`样式设置为`absolute`（或`fixed`，取决于您的需要）并在`z-index`必要时设置正确的样式。也可以根据需要进行`width`调整。`height`

# heroku - 在 heroku 上部署 redmine - heroku run rake db:migrate -> 我得到了弃用警告

> ID：13317627
> 
> 赞同：2
> 
> 时间：2012-11-09T23:40:31.690
> 
> 标签：heroku, redmine

我正在尝试按照本教程部署 redmine，但是当我运行此命令时 heroku run rake db:migrate

我收到这条消息：

> 弃用警告：您在供应商/插件中有 Rails 2.3 风格的插件！Rails 4.0 将删除对这些插件的支持。将它们移出并将它们捆绑到您的 Gemfile 中，或者将它们作为 lib/myplugin/* 和 config/initializers/myplugin.rb 折叠到您的应用程序中。
> 
> 有关更多信息，请参阅发行说明： [http](http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released) ://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released 。（从 /app/Rakefile:7 调用）
> 
> 不再允许使用 vendor/plugins (/app/vendor/plugins) 中的插件。请将您的 Redmine 插件放在您的 Redmine`plugins`目录根目录 (/app/plugins) 中

我将插件文件夹放在 redmine/lib 中 redmine/ 并没有发生任何事情。

任何机构可以帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T03:46:41.487

这与 ruby​​ buildpack 有关 - 它与您的应用程序无关。部署库存 Ruby on Rails 应用程序将显示此消息。

您在运行您的应用程序时遇到任何错误吗？

# java - java中的字符串操作，获取第一个字符

> ID：13317630
> 
> 赞同：1
> 
> 时间：2012-11-09T23:40:56.783
> 
> 标签：java, string

假设我有一个格式为“name_surname”的字符串。我的意思是有 2 个动态部分，它们之间有一个下划线。我想将它们分开，并在一个变量中包含左侧部分（名称）和另一个右侧部分（姓氏）。

基本上我想要这个相反的：`String temp=name+"_"+surname;`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T23:42:19.270

采用`split();`

```
String[] parts = temp.split("_");
String name = parts[0];
String surname = parts[1]; // <-- comment 
```

`ArrayIndexOutOfBoundsException`如果您的姓名不包含下划线，则注释行将抛出一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T23:42:31.283

您应该使用拆分。

```
String fullName = "name_surname";
String[] components = fullName.split("_");
String firstName = components[0];
String lastName = components[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T23:46:40.823

只需使用 StringTokenizer

```
StringTokenizer st = new StringTokenizer(str, "_");
while (st.hasMoreElements()) {
            System.out.println(st.nextElement());
        } 
```

# amazon-ec2 - 基于每个实例上的转码进程数的 EC2 和 ELB 策略

> ID：13317631
> 
> 赞同：0
> 
> 时间：2012-11-09T23:40:58.837
> 
> 标签：amazon-ec2, amazon-web-services, policy, autoscaling, amazon-elb

我需要在 ELB 后面的一系列自动缩放实例上对大量音频文件进行转码。转码脚本的核心是基于Node.Js和FFMPEG。排队是不可能的，因为用户没有耐心！我需要控制每个实例上的转码数量以避免 CPU 100% 问题。

**我的问题：**

**A-**有没有办法为 ELB 定义一个策略来控制每个实例的连接数？如果没有，是否有任何参数可以控制每个实例的平均 CPU 利用率并在触发级别后添加一个新的？（我找到[了这张](http://www.slideshare.net/8KMiles/cloud-computing-autoscaling-amazon-ec2-4829409)幻灯片，但它不完整）如果它动态添加一个新实例，那么新实例需要多少时间才能 100% 有效地为用户提供服务（我的意思是自动缩放是否有很长的延迟？）

**B-**是否有另一种替代架构来实现相同的转码解决方案？（我已将我当前的想法作为图纸包含在此答案中）。我不能使用 Transcoding.com 之类的第三方解决方案，我需要拥有自己的本地解决方案。

**C-**我为每个实例使用 node.js，并通过套接字向用户浏览器显示进度。从浏览器端，我定期向 node.js 端发送一些 ajax 请求以获取进度信息。这种机制是否存在粘性会话问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T01:08:50.840

如果您的缩放需要响应服务器上的单个请求（即单个请求将需要 X 台机器在所需的时间范围内执行），那么自动缩放可能不会成为您的答案，因为您将拥有随着新实例变得活跃而延迟。以这种方式运行服务的成本也可能要高得多，因为您可以根据单个请求进行多次扩展和计时，为每个启动的实例收取最少一小时的费用。

但是，如果您关心自动缩放，例如，在请求量达到峰值时将您的队列增加 50%（即，您已经有许多服务器服务于许多请求，但您只需要在高峰时段通过添加来降低延迟更多实例），那么自动缩放可能对您来说就可以了。

在这种情况下，您可以配置任意数量的触发器来控制缩放事件。

ELB 确实支持会话亲和性（“粘性”会话）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T23:53:30.903

您将需要使用 AWS 开发工具包。通常你会使用 C#、Ruby 等的官方版本之一。由于你在 node.js 上，尝试在 github 上使用这个 SDK 来监控、限制和创建实例连接池等。

[https://github.com/awssum/awssum](https://github.com/awssum/awssum)

还有 AWS2JS

[https://github.com/SaltwaterC/aws2js](https://github.com/SaltwaterC/aws2js)

# c# - 行分割规则

> ID：13317632
> 
> 赞同：2
> 
> 时间：2012-11-09T23:41:02.243
> 
> 标签：c#

有没有指南可以让我阅读断线规则以保持在列内？

我有以下代码，我的边距设置为 80 个字符（以便在我打印时适合 A4 页面）：

```
IDictionary<string, object> columns = new Dictionary<string, object>(1); 
```

括号正好落在第 80 列。那么，我应该像这样分解它：

```
IDictionary<string, object> columns = new Dictionary<string, object>
    (1); 
```

或这个：

```
IDictionary<string, object> columns = new Dictionary
    <string, object>(1); 
```

或这个：

```
IDictionary<string, object> columns =
    new Dictionary<string, object>(1); 
```

或任何其他方式？我宁愿不增加保证金。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T23:44:27.800

一行 80 个字符不是法律 - 很高兴。这里最好的选择是：

```
var columns = new Dictionary<string, object>(1); 
```

**永远不要**破坏类型名称、泛型参数和左括号（如果你有很多参数，可以继续下一行）。因此，还有选项（最好的选项 - 忘记大约 80 个字符并将所有字符放在一行中）：

```
IDictionary<string, object> columns = new Dictionary<string, object>(1); 
```

和（如果行真的很长）

```
IDictionary<string, object> columns = 
        new Dictionary<string, object>(1); 
```

或拆分分配和声明

```
IDictionary<string, object> columns;
columns = new Dictionary<string, object>(1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T23:44:38.593

这实际上是个人喜好和惯例的问题。

如果您必须拆分，我的偏好将是您的最后选择：

```
IDictionary<string, object> columns =
    new Dictionary<string, object>(1); 
```

我之所以这么说，是因为其他选项都在表达式的中间拆分-在第一种情况下，您将构造函数参数拆分为它们自己的行，而第二种情况是将类型定义拆分为两行。在这种情况下，整个语句（带参数的构造函数）保持在一起。

话虽这么说，我可能不会把这个分开。我可能会让它流血超过 80 个字符（通常这并没有什么问题）。

# flex-lexer - Flex yylineno 设置为 1

> ID：13317634
> 
> 赞同：9
> 
> 时间：2012-11-09T23:41:30.233
> 
> 标签：flex-lexer

我正在为 tcpdump 日志编写一个简单的解析器，你能告诉我为什么我不能得到正确的行号吗？

```
%{
char str[80];
%}
%option yylineno

...
%%

^{HOURS}:{MINUTES}:{MINUTES} if(input()=='.') { strcpy(str, yytext);  BEGIN(A); } else {printf("Wrong hour %d", yylineno); }
<A>({NDPS}|{DPS})\.({NDPS}|{DPS})\.({NDPS}|{DPS})|\.{NDPS} printf("Wrong IP!, %d", yylineno);
<A>[ ]{DPS}\.{DPS}\.{DPS}\.{DPS} strcat(str, " from "); strcat(str, yytext+1); BEGIN(B);
... 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-11T11:42:52.313

当我尝试这个时，结果证明我必须有一个实际上匹配换行符的规则才能更新 yylineno。使用以下规则它可以工作，没有它 yylineno 永远不会改变：

```
\n { } 
```

# git - svn2git 不获取分支或标签

> ID：13317637
> 
> 赞同：0
> 
> 时间：2012-11-09T23:41:44.923
> 
> 标签：git, svn, migration, repository, svn2git

我正在使用[svn2git](https://github.com/nirvdrum/svn2git)将标准分支/标签/主干结构的 SVN 存储库迁移到 Git。遵循 svn2git 的说明后，我能够从 SVN 获取所有修订版并将其翻译成 Git。

但是，它不包括除树干以外的任何东西。这是 SVN 存储库的结构：

```
root
  |- branches
  |- tags
  |- trunk 
```

这是 SVN 抓取并翻译成 Git 的内容：

```
root
  ... list of project folders... 
```

一切都被扔进了主目录，没有生成任何分支或标签，正如程序所宣传的那样。此外，我确定我将 svn2git 指向我的根 repo 文件夹，而不仅仅是树干。

有谁知道如何克服这个问题，或者可能知道执行此翻译的更好的替代方法？

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T00:12:44.117

git 中的分支和标签不会显示在文件层次结构中，而是显示在单独的命名空间中。试试命令“git branch”和“git tag”，看看你得到了什么？

# orchardcms - 是否可以在 Orchard 中创建向导？

> ID：13317639
> 
> 赞同：3
> 
> 时间：2012-11-09T23:42:00.503
> 
> 标签：orchardcms

是否可以在 Orchard CMS 中创建一个向导，也许是通过创建一个“向导”内容类型，该内容类型可能具有可选的内容部分，具体取决于可以评估先前输入的数据的规则。这可能要求太多了。我只是将 Orchard 作为 CMS 进行研究，我可以看到它是如何成为更多的，即应用程序框架。

非常感谢，

埃德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:26:30.820

Orchard 只是一个 Mvc 应用程序，因此您可以使用任何适用于它的技术。

看这个博客看一步一步的教程： [http ://afana.me/post/create-wizard-in-aspnet-mvc-3.aspx](http://afana.me/post/create-wizard-in-aspnet-mvc-3.aspx)

您可能会发现这篇关于如何在果园中集成 mvc 的文章也很有用：http: [//www.codeproject.com/Articles/434484/Welding-on-Orchard-CMS](http://www.codeproject.com/Articles/434484/Welding-on-Orchard-CMS)

玩得开心...

# c - OpenGL中的挤压

> ID：13317642
> 
> 赞同：0
> 
> 时间：2012-11-09T23:42:22.087
> 
> 标签：c, opengl

有什么方法可以在 OpenGL 中挤出 gluPartialDisk - 一直在环顾四周，但似乎找不到。如果没有任何方法，我可以看看类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T23:56:37.767

OpenGL 中没有执行此操作的函数（注意：gluPartialDisk 不是 OpenGL 函数。它是 GLU 函数，它不是 OpenGL 本身的一部分）。所以如果你想做挤压，你必须自己计算顶点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T01:08:41.990

看看这个它包含绘制部分圆柱体的代码。

[http://www.opengl.org/discussion_boards/showthread.php/145831-Source-code-for-partial-cylinder](http://www.opengl.org/discussion_boards/showthread.php/145831-Source-code-for-partial-cylinder)

# android - 使用套接字创建android通信服务以发送对象类型

> ID：13317644
> 
> 赞同：0
> 
> 时间：2012-11-09T23:42:24.863
> 
> 标签：android, sockets, android-service, aidl

我创建了一个远程服务来处理所有客户端-服务器通信。我使用了服务，因为很少有独立的应用程序会使用相同的通信套接字，并且没有其他方法可以在应用程序之间“共享”套接字（据我所知）。

该服务运行良好，可以启动套接字连接、发送和获取原始对象（如 int、String 等），并且在我的应用程序之间共享相同的套接字时运行良好。

至于现在，一切都很好，一切都很好。问题始于不同的对象类型。我想不出让我的服务支持通过套接字传递“对象”。我见过一个没有意义的解决方案——使用包裹。[例如](http://fauxgrammer.com/?p=4)。

在这种情况下，我需要为我希望我的服务支持的任何对象类型创建 .AIDL 文件。

没有任何方法可以在我的服务中使用“对象”类型吗？克服我的障碍还有其他想法吗？

谢谢，利奥兹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T23:54:46.180

Android IPC 使用[Parcelable](http://developer.android.com/reference/android/os/Parcelable.html)接口来编组/解组数据类型。由于 Object 没有实现它，你不能只是传递 Objects。您可以创建自己的根类型，但由于每种类型的 Object 都有不同的设置属性，这些属性没有任何用处。

请参阅AIDL 文档中的[传递对象](http://developer.android.com/guide/components/aidl.html#PassingObjects)。通过那个应该就足够了。

# iphone - 如何将 url 和 google bar 合二为一 UIWebView

> ID：13317649
> 
> 赞同：-1
> 
> 时间：2012-11-09T23:42:55.330
> 
> 标签：iphone, ios, xcode, ipad

在 mac 上的新 safari 中，他们有一个可以区分 google 和 url 的栏。这就是我想要做的。我想知道我做错了什么。它只想谷歌而不是搜索网址。提前致谢。

```
-(IBAction)SearchAll:(id)sender
{
    if (googlebar) {
        NSString *query = [googlebar.text stringByReplacingOccurrencesOfString:@" " withString:@"+"];
        NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://www.google.co./search?q=%@", query]];
        NSURLRequest *request = [NSURLRequest requestWithURL:url];
        [webview loadRequest:request];

    }
    else{

        NSString *query = [googlebar.text stringByReplacingOccurrencesOfString:@" " withString:@"+"];
        NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://www.%@", query]];
        NSURLRequest *request = [NSURLRequest requestWithURL:url];
        [webview loadRequest:request];

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T01:31:46.153

首先，您的代码很遥远。你不会以这种方式实现你的目标。

其次，您应该通过检查输入到搜索栏（或任何您想调用的 urlbar）中的字符串是否具有 .com 或 .org...等前缀来开始您的 IBAction 语句。如果没有，那么谷歌搜索 UITextfield 中的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T00:07:08.847

你确定你的if语句吗？您在 else 中使用搜索栏，如果不应该存在搜索栏。

您还应该检查 google.co./search 网址。我会使用 google.com/search 因为它会为您节省重定向

不过，我仍然对您的问题感到困惑，因为您有两个工具栏：搜索栏和 googlebar，而不是最新的 mac Safari 中的工具栏

# java - ActionListener 风格 - 好或坏

> ID：13317650
> 
> 赞同：3
> 
> 时间：2012-11-09T23:43:01.330
> 
> 标签：java, swing, coding-style, inner-classes, anonymous-class

我有一个简单的 GUI，其中包含：

*   一个按钮。
*   两个单选按钮

现在我想听听这些按钮中的每一个。我所做的是这样的：

```
public class TestApp implements ActionListener {

    private JFrame frame;
    private JButton btn;
    private JRadioButton rdb1;
    private JRadioButton rdb2; 

    public static void main(String[] args) { /*....*/ }

    private void initialize() {
       //Each time I add a button, I add it to the listener:
       btn = new JButton("Button");
       btn.addActionListener(this);
       //..
       rdb1 = new JRadioButton("Value1");
       rdb1.addActionListener(this);
       //And so on...
    }

    //The ActionEvents  
    public void actionPerformed(ActionEvent e) {
       if(e.getSource()==btn)
       //...
       if(e.getSource()==rdb1)
       //...        
    }
} 
```

**现在我想知道这是否被认为是一种好/坏的风格？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T23:52:48.680

除非监听器是一个很长的方法，否则我个人更喜欢匿名类模式：

```
 final JButton btn = new JButton("Button");
        final JRadioButton rdb1 = new JRadioButton("Value1");
        final ActionListener listener = new ActionListener() {
            @Override
            public void actionPerformed(final ActionEvent e) {
                if (e.getSource() == btn) {
                    //...
                } else if (e.getSource() == rdb1) {
                    //...        
                }
            }
        };
        btn.addActionListener(listener);
        rdb1.addActionListener(listener); 
```

甚至更好：

```
 btn.addActionListener(new ActionListener (){
         public void actionPerformed(ActionEvent e) {      
             // btn handling code
             }
    });
    rdb1.addActionListener(new ActionListener (){
         public void actionPerformed(ActionEvent e) {      
             // rdb1 handling code
             }
    }); 
```

您正在使用的模式允许其他类将类 TestApp 设置为其他类的侦听器 - 除非这是故意的，否则这不是一个好习惯。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-10T00:33:03.690

很大程度上归结为动作侦听器试图做的事情的复杂性。如果您想要小型的一次性操作，那么匿名类将适合。

使用这种监听器风格的主要好处是它可以准确地隔离动作正在做什么以及它正在为谁做。缺点是当监听器包含超过 10 行或更多行时，因为它开始变得难以阅读并知道监听器实际结束的位置。

在这种情况下，像内部类这样的东西可能更合适。它具有匿名类的好处（与使用它的类相关联），但更易于阅读。

如果您想要可重用的操作（想想诸如打开、新建、保存之类的事情），那么您最好使用[Action](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html) API，它提供了自我可配置性以及自包含的操作侦听器

恕我直言

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-10T00:02:59.473

更面向对象的方式是创建一个*匿名类*来执行每个监听器。

只创建一个开启事件源组件的监听器可读性不强，而且当监听器数量增加时，容易出错。您很容易*忘记*在 switch 块（或 if-else 块链）中处理所有可能的事件源，这将导致~~运行时异常~~静默错误行为（这种情况不会发生任何事情）。

为每个组件添加单独的侦听器将使您在*编译时检查*您是否忘记处理所有这些侦听器。

```
public class TestApp {

    // you can initialize fields inline to make thing shorter and safer
    private JButton btn = new JButton("Button");
    private JRadioButton rdb1 = new JRadioButton("Value1");

    private void initialize() {
        btn.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                // something
            }
        });
        rdb1.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                // something else
            }
        });
    }
} 
```

因为匿名类语法非常冗长，您可以通过将侦听器移动到私有字段来缩短初始化方法的代码。

```
public class TestApp {

    private JButton btn = new JButton("Button");
    private JRadioButton rdb1 = new JRadioButton("Value1");

    private void initialize() {
        btn.addActionListener(btnListener);
        rdb1.addActionListener(rb1Listener);
    }

    private final ActionListener btnListener = new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            // something
        }
    };

    private final ActionListener rb1Listener = new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            // something else
        }
    };
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-09T23:47:16.107

你可以考虑另外两个想法：

1.  为每个 UI 元素提供自己的 Listener；这样他们就完全独立了。
2.  将侦听器注入到您的 Swing UI 中，而不是调用 new。你让用户有机会改变他们认为合适的行为。让您的 Swing UI 做它应该做的事情：显示结果。而已。我认为侦听器是控制器逻辑的一部分。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-09T23:49:06.623

这在一定程度上取决于你想在`actionPerformed`方法中做什么。如果没有其他类可能想要调用此方法，那么我可能会想`actionPerformed`通过创建内部类来缩小方法的范围，例如：-

```
public class TestApp {

    private JFrame frame;
    private JButton btn;
    private JRadioButton rdb1;
    private JRadioButton rdb2; 

    private class CombinedActionListener implements ActionListener {
         public void actionPerformed(ActionEvent e) {
             if(e.getSource()==btn)
             //...
             if(e.getSource()==rdb1)
             //...        
             }
    }

    public static void main(String[] args) { /*....*/ }

    private void initialize() {
       ActionListener listener = new CombinedActionListener()

       //Each time I add a button, I add it to the listener:
       btn = new JButton("Button");
       btn.addActionListener(listener);
       //..
       rdb1 = new JRadioButton("Value1");
       rdb1.addActionListener(listener);
       //And so on...
    }
} 
```

您甚至可以通过将按钮实例传递给构造函数来使侦听器类成为静态内部类或顶级类 - 这将使侦听器类更易于测试。

正如我上面所说，这在很大程度上取决于 i) 是否有其他人可能调用此方法，以及 ii) 方法内部逻辑的复杂性。

# java - 为什么我们需要 Java 3D 中的 Canvas？

> ID：13317659
> 
> 赞同：1
> 
> 时间：2012-11-09T23:44:33.570
> 
> 标签：java, java-3d

我对 Java 3D 有点陌生，我正在努力为自己澄清一切。我在开始时创建了一个应用程序并且没有使用 Canvas3D。但后来我需要与鼠标交互，发现只能使用 Canvas3D 类的提示和教程。那么我们真的需要在 3D 应用程序中使用画布，还是有另一种方法来捕捉鼠标坐标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T00:00:15.563

[类 Canvas3D](http://docs.oracle.com/cd/E17802_01/j2se/javase/technologies/desktop/java3d/forDevelopers/J3D_1_3_API/j3dapi/javax/media/j3d/Canvas3D.html)

*“Canvas3D 类为 3D 渲染提供了一个绘图画布。它用于屏幕渲染或屏幕外渲染。Canvas3D 是 AWT Canvas 类的扩展，用户可以进一步子类化以实现其他功能。”*

*“Canvas3D 对象扩展了 Canvas 对象以包含 3D 相关信息，例如画布的大小（以像素为单位）、Canvas3D 的位置（也以像素为单位）、在 Screen3D 对象中以及画布是否启用了立体。”*

*“因为所有 Canvas3D 对象都包含对 Screen3D 对象的引用，并且因为 Screen3D 对象以物理单位定义像素的大小，所以 Java 3D 可以将以像素为单位的 Canvas3D 大小转换为以米为单位的物理世界大小。它还可以确定 Canvas3D 的位置和物理世界的方向。”*

据我所知，如果不在 Canvas3D 内，则无法进行任何 java3d 可视化

# ruby-on-rails - 不兼容的字符编码：ASCII-8BIT 和 UTF-8 以及调试（参数）

> ID：13317666
> 
> 赞同：2
> 
> 时间：2012-11-09T23:45:46.587
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, character-encoding

每当我编辑用户信息时，我都会收到此错误。本地主机告诉我错误发生在这一行周围......

```
<%= debug(params) if Rails.env.development? %> 
```

返回的参数...

```
{"utf8"=>"✓",
 "_method"=>"put",
 "authenticity_token"=>"hC/BQTSBodv+qlvhYnxJ4mqMl+w3G1FLwopxpbmsm/g=",
 "user"=>{"name"=>"jason",
 "email"=>"jason1",
 "password"=>"[FILTERED]",
 "password_confirmation"=>"[FILTERED]"},
 "commit"=>"Save changes",
 "id"=>"7"} 
```

是什么导致了这个错误，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T02:18:42.553

1.  尝试在 UTF-8 友好的编辑器中从头开始重新创建模板文件。
2.  放入`config.encoding = "utf-8"`您的 application.rb 文件。
3.  在您的 environment.rb 中添加此代码：

    `Encoding.default_external = Encoding::UTF_8`
    `Encoding.default_internal = Encoding::UTF_8`

4.  如果您正在使用 MySql，请使用“mysql2”gem。

5.  放在`# encoding: utf-8`文件的顶部。

# shopify - Shopify 结帐选项，例如 PayPal

> ID：13317675
> 
> 赞同：2
> 
> 时间：2012-11-09T23:47:02.447
> 
> 标签：shopify

我们为我们的商家合作伙伴提供额外的结账选项（类似于 PayPal）。

客户可以在结账页面选择我们的结账按钮进行结账；这些客户必须已经在我们这里注册并在他们的帐户中添加了信用卡。

我们为商家提供两种与我们整合的选择：

1.  API（网络服务）或
2.  表格 (POST)。

当客户通过选择我们的按钮结帐时，会发生以下步骤：

1.  客户会看到一个登录对话框以进行身份​​验证

2.  如果成功并且订单被批准（通过我们的后端系统），客户会在对话框（网络服务）或表单（托管；然后发送回商家网站）上收到通知。

3.  商家网站中的订单会根据成功状态以及来自我们系统的客户账单/运输信息进行更新。

Shopify 是否具有允许我们执行上述步骤的 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:08:03.590

没有直接的 API 可以做到这一点。

Shopify 将[ActiveMerchant](http://activemerchant.org) （一个版本）用于所有支付处理服务，包括现场（例如 Stripe）和非现场（例如 Paypal）。如果您的服务集成到 ActiveMerchant，它可以集成到 Shopify。

然而：

仅仅被集成到 ActiveMerchant 并不能保证 Shopify 包含。我们已经与许多支付服务集成，因此在我们考虑添加之前，任何新产品都必须在业务层面上具有吸引力，并且在技术层面上是合理的。

# javascript - 使用打开的文件 Javascript Windows 8

> ID：13317677
> 
> 赞同：2
> 
> 时间：2012-11-09T23:47:26.157
> 
> 标签：javascript, windows-8, microsoft-metro

我正在为我目前正在开发的应用程序使用 JavaScript。我已经创建了文件选择器，如指南中所示。

选择文件后，我得到对象 Windows.Storage.StorageFile。这个文件是图像，我的问题是如何在 img 标签中显示图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T01:21:34.467

假设您的页面中有一个图像标签，例如：

```
 <img id="theImage" /> 
```

然后在选择文件的 JavaScript 回调中，将 img src 属性设置为从[StorageFile](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefile.aspx)引用创建的 URL（使用[createObjectURL ）：](http://msdn.microsoft.com/en-us/library/windows/apps/hh453196.aspx)

```
 var picker = Windows.Storage.Pickers.FileOpenPicker();
    picker.fileTypeFilter.replaceAll([".png"]);
    picker.viewMode = Windows.Storage.Pickers.PickerViewMode.thumbnail;

    // Launch the picker in open mode
    picker.pickSingleFileAsync().then(function (file) {

        var imgElement = document.getElementById("theImage");
        imgElement.src = URL.createObjectURL(file); 
    }); 
```

# javascript - AngularJS 中的视图 - 如何使它们工作？

> ID：13317680
> 
> 赞同：1
> 
> 时间：2012-11-09T23:47:38.687
> 
> 标签：javascript, web-applications, angularjs

我无法使 angularjs 视图工作。他们在[AngularJS 上有一个工作演示： ngView](http://docs.angularjs.org/api/ng.directive%3angView)，但他们提供的 jsfiddle 不起作用。我试着玩一下它，但我仍然一无所获。建议？任何链接到一个真正有效的例子？

这是我的代码：（实际上是他们的）

索引.html

```
<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>angular</title>
  <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.min.js"></script>
  <script src="script.js"></script>
</head>
<body>

<div ng-app="ngView">
  <div ng-controller="MainCntl">
    Choose:
    <a href="Book/Moby">Moby</a> |
    <a href="Book/Moby/ch/1">Moby: Ch1</a> |
    <a href="Book/Gatsby">Gatsby</a> |
    <a href="Book/Gatsby/ch/4?key=value">Gatsby: Ch4</a> |
    <a href="Book/Scarlet">Scarlet Letter</a><br/>

    <div ng-view></div>
    <hr />

    <pre>$location.path() = {{$location.path()}}</pre>
    <pre>$route.current.template = {{$route.current.template}}</pre>
    <pre>$route.current.params = {{$route.current.params}}</pre>
    <pre>$route.current.scope.name = {{$route.current.scope.name}}</pre>
    <pre>$routeParams = {{$routeParams}}</pre>
  </div>

  <!-- book.html -->
  <script type="text/ng-template" id="book.html">
    controller: {{name}}<br />
    Book Id: {{params.bookId}}<br />
  </script>

  <!-- chapter.html -->
  <script type="text/ng-template" id="chapter.html">
    controller: {{name}}<br />
    Book Id: {{params.bookId}}<br />
    Chapter Id: {{params.chapterId}}
  </script>
</div>​
​&lt;/body>
</html> 
```

脚本.js

```
angular.module('ngView', [], function($routeProvider, $locationProvider) {
  console.log($routeProvider, $locationProvider);
  $routeProvider.when('/Book/:bookId', {
    templateUrl: 'book.html',
    controller: BookCntl
  }).when('/Book/:bookId/ch/:chapterId', {
    templateUrl: 'chapter.html',
    controller: ChapterCntl
  });

  // configure html5 to get links working on jsfiddle
  $locationProvider.html5Mode(true);
});

function MainCntl($scope, $route, $routeParams, $location) {
  $scope.$route = $route;
  $scope.$location = $location;
  $scope.$routeParams = $routeParams;
}

function BookCntl($scope, $routeParams) {
  console.log($scope, $routeParams);
  $scope.name = "BookCntl";
  $scope.params = $routeParams;
}

function ChapterCntl($scope, $routeParams) {
  console.log($scope, $routeParams);
  $scope.name = "ChapterCntl";
  $scope.params = $routeParams;
} 
```

我错过了什么……？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T04:39:24.143

如果你用绝对链接替换链接，jsFiddle 就可以工作——这是 Fiddle 中的一个错误。

```
Choose:
<a href="Book/Moby">Moby</a> |
<a href="Book/Moby/ch/1">Moby: Ch1</a> |
<a href="Book/Gatsby">Gatsby</a> |
<a href="Book/Gatsby/ch/4?key=value">Gatsby: Ch4</a> |
<a href="Book/Scarlet">Scarlet Letter</a><br/> 
```

至

```
Choose:
<a href="/Book/Moby">Moby</a> |
<a href="/Book/Moby/ch/1">Moby: Ch1</a> |
<a href="/Book/Gatsby">Gatsby</a> |
<a href="/Book/Gatsby/ch/4?key=value">Gatsby: Ch4</a> |
<a href="/Book/Scarlet">Scarlet Letter</a><br/> 
```

这是一个工作小提琴：http: [//jsfiddle.net/ZFHha/1/](http://jsfiddle.net/ZFHha/1/)

# c++ - 为什么表达式 a = a + b - ( b = a ) 在 c++ 中给出序列点警告？

> ID：13317684
> 
> 赞同：20
> 
> 时间：2012-11-09T23:48:09.300
> 
> 标签：c++, operators, operator-precedence, sequence-points

以下是测试代码：

```
int main()
{
    int a = 3;
    int b = 4;
    a = a + b - (b = a); 

    cout << "a :" << a << " " << "b :" << b << "\n";    
    return 0;
} 
```

编译它会给出以下警告：

```
> $ g++ -Wall -o test test.cpp test.cpp: In function ‘int main()’:
> test.cpp:11:21: warning: operation on ‘b’ may be undefined
> [-Wsequence-point] 
```

为什么操作可以是未定义的？

根据我的理解，首先`(b = a)`应该评估子表达式，因为()的优先级更高，因此设置b = a。然后，由于 '+' 和 '-' 具有相同的优先级，表达式将被左关联评估。因此，`a + b`接下来应该评估，最后`(b = a)`应该从 中减去的结果`a + b`。我看不到这里违反了任何[序列点规则。](http://en.wikipedia.org/wiki/Sequence_point)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-09T23:50:58.617

*正在评估*的表达式和完成其*副作用*之间存在差异。

由于`b = a`括号的优先级更高，赋值表达式将在减法之前计算。它将提供 的值`a`作为评估的结果。但是，将该值写入`b`可能要到下一个序列点才能完成，在这种情况下，下一个序列点是完整表达式的结尾。因此，整个表达式的最终结果是未定义的，因为减法可能会取`b`赋值之前或之后的值。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-09T23:50:30.583

在 C++ 中，算术表达式中的子表达式没有时间顺序。

```
a = x + y; 
```

是`x`先评估，还是`y`？编译器可以选择其中一个，也可以选择完全不同的东西。求值顺序与运算符优先级不同：运算符优先级是*严格*定义的，而求值顺序仅定义为您的程序具有序列点的粒度。

事实上，在某些架构上，可以发出同时评估两者的代码`x`——`y`例如，VLIW 架构。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-09T23:57:13.987

为了解决它，将它们分成两个不同的语句。

PS：不要忘记人类在执行算术运算时可能会出错。因此，最好通过将它们分开在不同的语句中来使操作更清晰。我希望我有所帮助。

```
int main() 
{
   int a = 3;
   int b = 4;

   /* Two different Statements*/
   b = a;

   /* or a = a + b - a */
   a = a + b - b; 

   cout<<"a :"<<a<<" "<<"b :"<<b<<"\n";    
   return 0;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-09-07T05:11:25.230

`a = b + a - a;` 只是写成

`a = b + a - (b = a)`------>> (exp 1)

以下三个结果与（exp 1）相同 `a = (b + a - (b = a));` `a = ((b + a) - (b = a));` `a = (b + a) - (b = a);`

观察 +, - 运算符具有相同的优先级，并且具有从左到右的关联性因此首先执行“b+a”，然后在减法之前将“a”值分配给“b”

现在观察以下当 a = 10 和 b = 20 时；

`a = (b = a) - b + a;` =======> a = 10; b = 10 `a = ((b = a) - b + a);` =======> a = 10; b = 10

`a = ((b = a) - (b + a));`=======> a = -10; b = 10 从上面的表达式可以清楚地看出，即使最里面的括号首先被执行，也会首先遵循关联性，然后是优先级

注意：为避免混淆外括号和内括号的优先级考虑以下表达式 `a = (b + a - (b = a))`=====> 实际结果 => a = 20, b = 10; 本来是 a = 10, b = 10; （如果与关联性相比，优先级是主要的）因此，通过上面的示例，我们可以说与优先级相比，关联性是主要的

# android - 如何在点击正面按钮时开始活动？

> ID：13317685
> 
> 赞同：1
> 
> 时间：2012-11-09T23:48:10.237
> 
> 标签：android, android-intent

当我单击地图中的一个项目时，会出现一个正面按钮，上面写着“Route to”。问题，我如何从那个积极的按钮开始活动？

我也这样用，

```
dialog.setPositiveButton("Tampilkan Rute", new DialogInterface.OnClickListener() {

    @Override
    public void onClick(DialogInterface dialog, int Button) {

        Intent i = new Intent(this, Rute.class);
        startActivity(i);
    }
}); 
```

开始活动进入 Rute 类，但它总是说“删除参数以匹配意图（）”然后我不知道该怎么做。

这是我的代码

```
@Override
protected boolean onTap(int index) {

    OverlayItem item = items.get(0);
    AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
    dialog.setTitle(item.getTitle());
    dialog.setMessage(item.getSnippet());
    dialog.setPositiveButton("Tampilkan Rute", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int Button) {

            Intent i = new Intent(this, Rute.class);
            startActivity(i);

        }
    });

    dialog.setNegativeButton("Kembali", new DialogInterface.OnClickListener() { 
        @Override
        public void onClick(DialogInterface dialog, int Button) {
            dialog.cancel(); 
        }
    });

    dialog.show();
    return true;

} 
```

任何建议将不胜感激。谢谢

如果我的英语不好，我很抱歉:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-09T23:49:55.390

只需更改范围`this`以引用类而不是 OnClickListener：

```
Intent i = new Intent(MyActivity.this, Rute.class); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T04:56:02.663

试试下面的代码并参考这个以获得[更多细节](http://glorious-arvind.blogspot.in/2012/11/alert-dailog-in-android.html)

```
Intent i = new Intent(YOUR_ACTIVITY_NAME.this, Rute.class); 
```

代替

```
Intent i = new Intent(this, Rute.class); 
```

# xcode - XCode - 对静态库的更改不会导致构建系统重新链接可执行文件

> ID：13317686
> 
> 赞同：3
> 
> 时间：2012-11-09T23:48:19.197
> 
> 标签：xcode, build-process, static-libraries, dependency-management

我有一个项目“二十一点”，其中包含一个名为“GameLib”的项目（作为一个孩子），该项目又包含许多项目，例如“Core-iOS”。我已将 libCore-iOS.a 添加到“使用库链接二进制文件”中，但更改静态库中的 .cpp/.mm 文件不会导致可执行文件链接到新的 .a 文件。.a 文件*正在*与更改一起编译。为什么构建系统损坏了，我该如何修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T01:51:22.813

您需要配置所有目标的依赖项。

```
blackjack
  libCore-iOS.a << dependency 
```

如果 Xcode 的自动依赖检测失败，则将target*显式*`libCore-iOS`配置为依赖。然后解决它。

 *如果您发现自动依赖检测出错，请考虑提交附有项目的错误报告。我在其中发现了错误，但无法（erm.. *unwilling*）提交项目以供他们调试问题。

* * *

要定义显式依赖关系：

*   在 Xcode 中打开“二十一点”项目
*   在 Project Navigator (Top-Level) 中选择“blackjack”项目
*   选择“二十一点”目标
*   选择“构建阶段”选项卡
*   在“Target Dependencies”阶段单击“+”，并将 libGameLib 目标添加为依赖项
*   在“Link Binary With Libraries”阶段单击“+”，并添加 libGameLib
*   现在在所有方案中禁用“查找隐式依赖项”
*   重启 Xcode
*   清理和构建项目

这应该是创建显式依赖项所需的全部内容，除非您对构建设置进行了一些非典型的修改。*

# php - 在 PHP 脚本中包含任何具有绝对路径的目录中的文件

> ID：13317687
> 
> 赞同：1
> 
> 时间：2012-11-09T23:48:30.540
> 
> 标签：php, include, set-include-path

> **可能重复：**
> [PHP 需要来自顶层目录的文件](https://stackoverflow.com/questions/7630002/php-require-file-from-top-directory)

我已经使用 PHP 很长时间了，但我一直只是为了完成工作而编写它，现在我正在努力学习最佳实践并提高我的技能。现在我想知道从任何目录将文件包含在 PHP 脚本中的最佳方法是什么。

我一直在做以下事情：

```
<?php
    // From settings.php
    define('ABSPATH', '/home/dalyn/public_html/');

    // Then I put this at he top of all of my other files

    include 'includes/settings.php';
    include ABSPATH . 'includes/db.php';
    include ABSPATH . 'includes/functions.php';
?> 
```

但是，如果我的文件位于子目录中，我需要执行以下操作：

```
<?php
    include '../includes/settings.php';
    include ABSPATH . 'includes/db.php';
    include ABSPATH . 'includes/functions.php';
?> 
```

有没有更好的方法来做到这一点？我开始学习 OOP，所以如果有适用的 OOP 解决方案，我会全力以赴。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T00:35:52.070

我的 application/Bootstrap.php （用于 zend 框架应用程序）中通常有类似的东西。

```
define( 'BASE_PATH'          , dirname( __DIR__ ) . '/'                          ); //!< application root directory: note this file is not in the root directory  
define( 'VAR_PATH'           , BASE_PATH        . 'var/'                         ); //!< optional system generated config files
define( 'CACHE_PATH'         , BASE_PATH        . 'cache/'                       ); //!< caches in the filesystem. See ISV_CacheManager
define( 'APPLICATION_PATH'   , BASE_PATH        . 'application/'                 ); //!< where the modules live
define( 'MODEL_PATH'         , APPLICATION_PATH . 'models/'                      ); //!< path to models
define( 'FORM_PATH'          , APPLICATION_PATH . 'forms/'                       ); //!< path to forms
define( 'CONTROLLER_PATH'    , APPLICATION_PATH . 'modules/default/controllers/' ); //!< path to default module controllers
define( 'HELPER_PATH'        , APPLICATION_PATH . 'helpers/'                     ); //!< global zend view helpers
define( 'INCLUDE_PATH'       , APPLICATION_PATH . 'include/'                     ); //!< useful support classes
define( 'DOCUMENT_ROOT'      , $_SERVER['DOCUMENT_ROOT']                         ); //!< http root directory. note _no_ trailing slash.  
define( 'IMAGE_PATH'         , '/image/'                                         ); //!< from the http document root 
define( 'SCRIPT_PATH'        , '/js/'                                            ); //!< from the http DOCUMENT_ROOT 
```

其中一些被送入自动加载器，其他一些我用于直接包含路径，如 require_once MODEL_PATH 。'目录/目录/IncludeFile.php';

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T23:51:57.007

你试过自动加载吗？[http://php.net/manual/en/language.oop5.autoload.php](http://php.net/manual/en/language.oop5.autoload.php) ..对不起，我还没有写评论的权限..

更新了.. Wesley 是对的，您需要将类名与文件名相同才能使自动加载工作。我很抱歉假设您正在做 OOP-PHP。如果不是自动加载将不起作用，您将不得不以传统方式进行

```
function __autoload($class) {
require ABSPATH. $class .".php";
} 
```

ABSPATH 中任何带有 classname = filename 的文件都将被自动加载。

如果您有各种路径，其中包含不同的文件，那么您将必须创建多个具有路径名的常量变量。而不是使用特定路径在自动加载中调用它们。

例如。

```
class Myprogram{

public function __construct(){

define('ABSPATH', '/home/dalyn/public_html/');
define('ABSPATH_1', '/home/dalyn/public_html/includes');
define('ABSPATH_2', '/home/dalyn/public_html/some_other_folder');

}

function __autoload($class) {
require ABSPATH. $class .".php";
    require ABSPATH_1\. $class .".php";
    require ABSPATH_2\. $class .".php";
 }   

}

//Some other file
$myProg = new Myprogram(); // this will define your constants as well as autoload all the required files 
```

如果您不使用 OOP。比您必须将不同的路径定义为常量并以您现在的方式包含文件。如果你想自动化这个过程

这段代码会很有帮助。

```
if ($handle = opendir(ABSPATH)) {
  while (false !== ($entry = readdir($handle))) {
     if ($entry != "." && $entry != "..") {
        include_once ABSPATH . $entry;
    }
  }
  closedir($handle);
} 
```

这将包括文件夹 ABSPATH 中存在的所有文件。您可以创建一个函数并使用您想要放置的任何路径调用它。

希望这可以帮助。

丁斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T03:14:54.083

```
 set_include_path('.'.PATH_SEPARATOR.'your path to includes folder'
            . PATH_SEPARATOR . './library/'
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T23:55:34.117

当我包含某些内容时，我使用`dirname(__FILE__)`来获取尝试包含的文件的路径。

```
<?php
include dirname(__FILE__).'/includes/db.php'; 
```

但是，如果您使用 OOP，我建议您查看一些在您使用类时会自动为您包含文件的类加载器。有一些已经编码存在，例如使用 Doctrine 的编码和使用 Composer 编码的编码。

[http://www.doctrine-project.org/](http://www.doctrine-project.org/)

[http://getcomposer.org/](http://getcomposer.org/)

# android - mvvmcross 视图中的背景图像泄漏

> ID：13317688
> 
> 赞同：2
> 
> 时间：2012-11-09T23:48:36.047
> 
> 标签：android, xamarin.android, mvvmcross

在具有 24MB 堆的 WVGA800 屏幕的 API_14 模拟器中运行我的视图的背景图像有问题，看起来在视图导航之间没有释放可绘制对象，并且在显示 3 个视图后，出现内存不足异常使视图膨胀.

该应用程序以 SplashScreenActivity 开始，它具有 480x800 PNG 作为其背景图像，用于启动启动画面。应用程序继续导航到下一个视图，该视图也显示一个新的 480x800 像素。第三个屏幕导航还包含 480x800 PNG，当内存不足错误发生时。首先，我尝试在 axml 布局中设置背景。然后我尝试了从 SplashScreenActivity.OnCreate() 和其他两个视图 OnCreate() 方法中的代码设置背景的替代方法。我在其他地方读到了从单声道虚拟机处理可绘制版本以防万一这是问题。另一个有帮助的技巧是在 OnCreate() 开始时强制进行 GC，这会留下 12% 的堆空闲，但效果有限。

```
public class SplashScreenActivity: MvxBaseSplashScreenActivity
{
    public SplashScreenActivity() : base(Resource.Layout.SplashScreen) { }

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);

        using (var drawable = Resources.GetDrawable(Resource.Drawable.LoadingScreen))
            Window.SetBackgroundDrawable(drawable);
    }
} 
```

而第二种观点

```
public class GameView : MvxBindingActivityView<GameViewModel>
{
    public GameView() { SoundBinding.GameView = this; }

    protected override void OnViewModelSet() { SetContentView(Resource.Layout.GameView); }

    protected override void OnCreate(Bundle bundle) 
    {
        GC.Collect();
        base.OnCreate(bundle);
        using (var drawable = Resources.GetDrawable(Resource.Drawable.GameScreenBackground))
            Window.SetBackgroundDrawable(drawable);
    }
} 
```

毕竟，在使用背景填充第三个类似视图时，应用程序仍然会耗尽内存。有时它会起作用，然后随着屏幕循环最终发生。我查看了 MAT 上的堆转储，可以看到两个 3.5M 大小的 bitmapDrawables。我假设这是我的两个位图。对于第二个 BitmapDrawable，我可以清楚地看到持有它的视图。内存中还有另一个位图，但我看不到它到 GC 根的路径是什么。这必须是第一个 SplashScreenActivity 视图中第一个加载的 PNG。这是没有弱引用的 GC 根的 MAT 路径。也有一个弱裁判持有它。

```
android.graphics.Bitmap @ 0x4134fb08 |           40 |     3,456,056
|- mBitmap android.graphics.drawable.BitmapDrawable @ 0x4134f568 |           64 |           136
|  |- mBackgroundDrawable com.android.internal.policy.impl.PhoneWindow @ 0x41356cc8 Native Stack  |          200 |         1,168
|  |- mBGDrawable com.android.internal.policy.impl.PhoneWindow$DecorView @ 0x41357560 Native Stack|          560 |           968
|  '- Total: 2 entries                                                                                 |              |              
|- mBitmap android.graphics.drawable.BitmapDrawable$BitmapState @ 0x4134f460                      |           40 |            40
 |  '- referent java.lang.ref.WeakReference @ 0x4134ff40 |           24 |            24
'- Total: 2 entries  |              | 
```

所以提问时间。如何确保在下一个视图膨胀之前释放这些可绘制对象？是否有必要在代码中设置背景而不是视图的布局？我是否需要通过将回调设置为 null 来取消绑定Drawables()，如此处所示[Drawable vs Single reusable Bitmap with memory 更好？](https://stackoverflow.com/questions/7044770/drawable-vs-single-reusable-bitmap-better-with-memory)? 我调查了视图的 OnDestroy() 覆盖，但我发现在创建新视图之前没有调用这些视图。当从一个视图导航到另一个视图时，可以确保视图被销毁，这有助于在下一个视图膨胀之前释放我的资源。

任何关于如何在我的应用程序中更好地管理这些资源的建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T08:25:28.830

是否有一个简单的示例应用程序可以发布到可以重现此行为的任何地方？你能在非 Mvvm 应用程序中重现同样的问题吗？在非 MonoDroid Java 应用程序中？

感觉就像您可能在 Android 或 MonoDroid 层看到了泄漏。我相信[会议应用程序](https://github.com/slodge/MvvmCross/blob/vnext/Sample%20-%20CirriousConference/Cirrious.Conference.UI.Droid/Views/BaseMapView.cs)中的所有视图都在使用`Window.SetBackgroundDrawable`，并且我没有在那里报告问题。（可能我的图像更小？）

作为一种解决方法，您可以尝试的一件事是覆盖[Activity 生命周期](http://docs.xamarin.com/Android/Guides/Application_Fundamentals/Activity_Lifecycle)中的 OnPause 和 OnResume 方法，以清除和重置背景可绘制对象。

但是，这只是一种解决方法......我认为在这里完成一个完整的解决方案是值得的。

# .htaccess - 删除“www”。来自具有强大 https 的 url

> ID：13317691
> 
> 赞同：-1
> 
> 时间：2012-11-09T23:48:59.030
> 
> 标签：.htaccess, mod-rewrite, https

我在我的 .htaccess 文件中使用以下内容来强制访问我的网站但 url 中没有 https 的任何用户使用 https。

但是，如果用户访问[https://www.mysite.co](https://www.mysite.co)，​​我希望能够从请求中删除 www。

请你能告诉我我需要在我的 .htaccess 文件中修改什么，以便在保持强大的 https 的同时从 url 中删除 www 吗？

谢谢，

最大限度。

```
RewriteEngine On 
RewriteCond %{SERVER_PORT} 80 
RewriteRule ^(.*)$ https://mysite.co/$1 [R,L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T23:56:51.117

做 2 次重写。

```
RewriteEngine On 

RewriteCond %{HTTPS}  off
RewriteRule ^(.*)$ https://mysite.co/$1 [R,L]

RewriteCond %{HTTPS}  on
RewriteCond %{HTTP_HOST}  ^www\. [NC]
RewriteRule ^(.*)$ https://mysite.co/$1 [R,L] 
```

# android - Vitamio 媒体播放器许可

> ID：13317700
> 
> 赞同：5
> 
> 时间：2012-11-09T23:50:08.570
> 
> 标签：android, licensing, media-player

我已经设法将[Vitamio](http://vitamio.org/)集成到一个项目中。但是我不清楚这个库的许可要求。我在他们的网站（目前已关闭）或他们的源代码中找不到任何信息。虽然有些文件似乎有 Apache 2.0 许可证。

似乎它可能基于[FFmpeg](http://ffmpeg.org/legal.html)，它看起来有 LGPLV2.0 许可要求，但这并不是很清楚。

我知道有些人在这里推荐了它，所以我想他们可能也看过许可要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:11:29.983

Vitamio 3.0 现在可供任何开发人员免费使用。Vitamio 4.0 许可证访问[http://www.vitamio.org/en/License/](http://www.vitamio.org/en/License/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T05:04:58.953

我也在我们的项目中使用 Vitamio。通常 Vitamio 是一个库项目。您需要将该库项目包含在您的项目中，并将该 vitamio 播放器导入您的 Activity 类中，不需要获得许可证。

# node.js - 多个 socket.io 客户端连接 - 强制新连接

> ID：13317701
> 
> 赞同：2
> 
> 时间：2012-11-09T23:50:12.707
> 
> 标签：node.js, socket.io

我想从客户端连接到两个不同的节点服务器，它们实际上在相同的本地 IP 地址上运行但在不同的端口上。问题是第一个 io.connect() 成功但第二个失败。我已经读过，为了让它工作，第二个 io.connect 调用应该包含`force new connection`设置为 true 的属性。我试过了，但没有多大成功......这是我的代码的一个非常简化的版本：

```
dataSocket = io.connect('https://' + window.document.location.host);
...
socketOut = io.connect(data.url, {'force new connection': true}); 
```

基本上，第一个连接打开一个套接字`https://192.168.1.129`（端口 443），第二个打开`https://192.168.1.129:3000`，最后一个连接失败。在这些调用期间，两台服务器都在运行并接受连接（显然）。奇怪的是，如果我用 localhost 替换私有本地地址，它就可以工作。我肯定错过了一些东西......

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T06:56:11.133

这是一个证书问题（使用 CA 的自签名证书）。只需通过网络浏览器连接`https://192.168.1.129:3000`一次并接受风险警报，一切正常。

# ruby-on-rails - Rails：查找可能包含 nil 的数组的最大值

> ID：13317706
> 
> 赞同：28
> 
> 时间：2012-11-09T23:50:38.803
> 
> 标签：ruby-on-rails, ruby

鉴于：

```
shipping_costs = {
  key1: 45,
  key2: 99,
  key3: nil,
  key4: 24
} 
```

假设 nil = 0，获得这些键的最大值的最干净的方法是什么？

如果我`shipping_costs.values.max`在 Rails 控制台中直接运行，我会得到：

```
ArgumentError: comparison of Fixnum with nil failed 
```

在运行 max 之前将这些 nil 变为零的最干净的方法？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-09T23:56:05.253

如果你想保持简洁，你可以使用 `shipping_costs.values.compact.max`

该方法从数组[`compact`](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-compact)中删除所有值。`nil`

其他答案也是好主意。但是，我更愿意拒绝这些值，而不是用数字替换它们。我认为最好知道一个数组只包含`nil`值，而不是猜测 0（或您选择的任何值）来自哪里。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-11-09T23:52:42.597

我会去：

```
shipping_costs.values.map(&:to_i).max 
```

`nil.to_i`是`0`。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-03-28T10:03:00.187

没有人提到更短的形式？，

```
shipping_costs.values.max_by(&:to_i) 
```

（只是一个信息）

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-10T02:46:32.740

[`max`](http://www.ruby-doc.org/core-1.9.3/Enumerable.html#method-i-max)接受一个块，允许您进行比较，类似于`sort`工作原理：

```
[45, 99, nil, 24].max{ |a,b| (a || 0) <=> (b || 0) }
=> 99 
```

或者：

```
[45, 99, nil, 24].max{ |a,b| a.to_i <=> b.to_i }
=> 99 
```

这使您可以在比较发生之前强制您想要/需要的值。

对于您的情况，`shipping_costs.values`将返回您需要比较的数组，因此：

```
shipping_costs.values.max{ |a,b| a.to_i <=> b.to_i } 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-09T23:52:55.527

做`shipping_costs.values.reject {|v| v.nil? }.max`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-12-26T20:28:48.937

要执行问题中实际请求的操作（将 nils 替换为之前的零`max`），而不弄乱任何其他值，并假设您没有`false`可能的值，您可以这样做：

```
shipping_costs.values.map { |x| x || 0 }.max 
```

但是，在实际应用中，遵循@toniedzwiedz 给出的答案可能会更简单、更好。

# javascript - 如何修复或解决 iPhone 上的子像素处理问题？

> ID：13317711
> 
> 赞同：0
> 
> 时间：2012-11-09T23:51:00.767
> 
> 标签：javascript, css, jquery-mobile, subpixel

**设置：** 我正在使用 jQuery Mobile 为 iOS 和 Android 开发一个 PhoneGap/Cordova 应用程序。该应用程序需要一个我自己创建的日历，因为详尽搜索插件并没有产生任何满足我所有需求的结果。我正在使用七个 div - 一个用于一周中的每一天 - 它们都是`float:left`'d 并且每个都设置为`width:14.28571428571429%`因为这是 100% 的 1/7。我应该提到日历 div 容器设置为`width: 100%`. Chrome 开发者工具还确认容器 (id="calendar") 正在使用 100% 的宽度空间。

**问题：**在桌面上一切看起来和工作都很好，但是一旦我开始在我的 iPhone 或 iPad 上进行测试，日历右侧会出现一小部分（大约 2%）。

**支持细节：**我对此进行了相当多的研究，似乎这是由于亚像素渲染造成的。我[在 WikiPedia 上阅读了关于 Subpixel Rendering 的内容](http://en.wikipedia.org/wiki/Subpixel_rendering "亚像素渲染")，发现[这篇两年前的文章](http://css-tricks.com/percentage-bugs-in-webkit/ "这种旧的 css-tricks 文章")是关于不同浏览器处理小部分像素的方式的。在我看来，移动 Safari 中的 0.28[…]% 被砍掉了。 **问题是，我不知道如何解决它。** 更让我困惑的是，这似乎是一个*webkit*问题，但日历在桌面 Chrome 中呈现得很好。

**代码：**

```
<div id="calendar">

    <div class="cal-week"> 

        <a href="javascript:monthPrev();">
            <div class="day day-inactive">28</div>
        </a>

        <a href="javascript:monthPrev();">
            <div class="day day-inactive">29</div>
        </a>

        <a href="javascript:monthPrev();">
            <div class="day day-inactive">30</div>
        </a>

        <a href="javascript:monthPrev();">
            <div class="day day-inactive">31</div>
        </a>

        <a href="javascript:selectDate(11,01,2012);">
            <div class="day">1</div>
        </a>

        <a href="javascript:selectDate(11,02,2012);">
            <div class="day">2</div>
        </a>

        <a href="javascript:selectDate(11,03,2012);">
            <div class="day">3</div>
        </a>

        <div class="clearfix"></div>
            <!-- fun fact: this is the first week of November, 2012 -->

    </div>

[&hellip;]

</div><!-- /calendar --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T09:06:17.177

我在 Firefox 中遇到类似的事情很糟糕，所以也许你可以调整我的修复来满足你的需要。

我的问题是/是我需要在 changePage 期间计算屏幕宽度，这在 Firefox 上有时会导致滚动条在宽度计算中被减去，所以如果我需要宽度 1000 像素，我会得到 983 像素（没有 17 像素滚动条）。

处理 Javascript 返回的错误值需要很长时间。我现在正在使用它来修复：

```
wrapWidth = document.body.clientWidth,
// FIREFOX SCROLLBAR WIDTH FIX
// When caluclating the width of the screen Firefox includes 
// the scrollbar width although the page height is less 
// than available screen height. 
// Therefore page width is off by the toolbar width (17px).
// browser window: window.innerWidth  ~ e.g. 924
// wrapper page: document.body.clientWidth ~ e.g. 907

// if the page height is smaller than screen height, correct by 17px. 
fireFoxCorrection = ( window.innerWidth !== wrapWidth && wrap.height() <= window.innerHeight ) ? window.innerWidth-wrapWidth : 0, 
```

当错误发生时，这给了我 17px，没有时给我 0，所以我可以安全地做

```
element_width = calculatedWidth + fireFoxCorrection 
```

`window.innerWidth`如果您可以使用and来确定您的设置中的更正，如何尝试`document.body.clientWidth`。如果可以提取差异，则可以将其除以元素并将其添加到每个元素的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T20:39:36.143

对于任何偶然发现此问题的人：

在通过 Webkit 文档进行大量（痛苦的）搜索之后，不正确的 SubPixel 处理是一个有据可查的错误，需要修复以使这些类型的问题永久消失。我能找到的唯一确定的解决方法是负像素边距修复。 [这个](https://stackoverflow.com/questions/5832869/single-sub-pixel-misalignment-of-divs-on-ipad-and-iphone-safari)问题对此事进行了一些很好的细节。

关于我的七列问题，七列中的每一列都有一个负像素在屏幕右侧创建一个边距。固定我的是仅将负边距应用于*所有其他*列的想法。所以现在第 0、2、4 和 6 列都有 a`margin-left: -1px`而其他三列没有。它现在有效，让我们希望他们早日解决这个问题。

干杯。

# oracle - 通过 Oracle PL/SQL 输入值时出错

> ID：13317712
> 
> 赞同：0
> 
> 时间：2012-11-09T23:51:01.503
> 
> 标签：oracle, function

我想用 PL SQL 在 Oracle 10g 中通过控制台输入一个值。我使用的是基于 Web 的界面，而不是 SQL*。程序是这样的：

```
DECLARE
      v_desc VARCHAR2(50);
BEGIN
    v_desc:=show_desc(&sv_cnumber);
    DBMS_OUTPUT.PUT_LINE(v_desc);
END; 
```

功能是：

```
CREATE OR REPLACE FUNCTION show_desc
    (i_course_id course.course_id%TYPE)
RETURN varchar2
AS
        v_desc varchar2(50);
BEGIN
SELECT description
    INTO v_desc
    FROM courses
WHERE course_id=i_course_id;
RETURN v_desc;
EXCEPTION
    WHEN NO_DATA_FOUND
   THEN
    RETURN('no description found');
END; 
```

当我运行此代码时，我收到一条错误消息：

ORA-06550：第 4 行，第 37 列：PLS-00103：在预期以下情况之一时遇到符号“&”：

什么是错误？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T00:06:03.007

如果要显示提示以便输入变量的值，请尝试将 & 替换为冒号

```
v_desc:=show_desc(:sv_cnumber); 
```

`&`是PL/SQL中的[特殊符号](https://forums.oracle.com/forums/thread.jspa?threadID=621872)

# .net - 在不知道祖先类型的情况下绑定到附加属性

> ID：13317714
> 
> 赞同：1
> 
> 时间：2012-11-09T23:51:30.017
> 
> 标签：.net, wpf, xaml

我有一个如下所示的附加属性：

```
<Button Styles:ToolTip.Title="The Title"/> 
```

我设置了一个样式来访问它，如下所示：

```
<TextBlock Text="{Binding Path=(Styles:ToolTip.Title), 
   RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Button}}}"/> 
```

这个绑定的问题是它只能在我的属性位于按钮上时工作。

我正在制作自定义工具提示功能，因此我希望它可以在通常显示工具提示的任何控件上工作。

通常我只会绑定到 TemplatedParent。但那是 ContentPresenter。

如何获得指向具有附加属性的对象的源（而不是在代码中静态引用它）？

[这是我的完整风格，以备不时之需。](https://gist.github.com/4049094#file_syle.xml)

更新：

这就是它所做的。我将 RegisterAttached 方法的最后一个参数更改为：

```
new FrameworkPropertyMetadata(default(string), 
                              FrameworkPropertyMetadataOptions.Inherits) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T00:06:17.670

您可以尝试使该属性成为[继承的依赖属性](https://msdn.microsoft.com/en-us/library/ms753197%28v=vs.100%29.aspx)。然后在父 Button 上设置值会导致子 TextBlock 继承该值

# jquery-ui - 为什么 .hide() 不适用于 jquery ui 手风琴中的元素？

> ID：13317717
> 
> 赞同：1
> 
> 时间：2012-11-09T23:52:08.927
> 
> 标签：jquery-ui, hide, accordion

为什么 .hide() 不适用于 jquery ui 手风琴中的元素？它在调用 之前确实有效`$("#accordion").accordion()`，但之后无效。.show() 方法在前后都可以正常工作。.toggle() 方法工作一半（仅显示部分）。

```
<html>
    <head>
        <link href="jquery-ui-1.9.1.custom/css/ui-lightness/jquery-ui-1.9.1.custom.css" rel="stylesheet">
        <script src="jquery-ui-1.9.1.custom/js/jquery-1.8.2.js"></script>
        <script src="jquery-ui-1.9.1.custom/js/jquery-ui-1.9.1.custom.js"></script>
        <script>
            $(function()
            {
                //$("#inside").hide("fade"); /* <-- this does work */
                $("#accordion").accordion();
                $("#inside").hide("fade"); /* <-- but this doesn't */
            });
        </script>
    </head>
    <body>
        <div id="accordion">
            <h3>Page 1</h3>
            <div id="page1">Blah</div>
            <h3>Page 2</h3>
            <div id="page2">
                <div id="inside">Blah too</div>
            </div>
        </div>
    </body>
</html> 
```

请不仅解释如何以另一种方式解决它，更重要的是为什么它不能以这种方式工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T00:15:45.280

基于`hide()`没有`"fade"`参数的调用实际上可以工作（见[这里](http://jsfiddle.net/WDXhg/6/)），我会说它与淡入淡出的实现方式有关。淡入淡出效果可能取决于元素可见的事实，因为当您使用`hide("fade")`div 显示它时它会起作用（请参阅[此处](http://jsfiddle.net/WDXhg/4/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T00:14:32.770

~~发生这种情况是因为`accordion`' 使用`hide`. 第一次显示面板时，也会显示内容，即使它们以前是隐藏的，所以如果在隐藏内容时面板没有打开，它们会在您第一次选择该面板时出现。~~请参阅 juan.facorro 的解释，因为它提供了关于什么不起作用的正确解释。

这是一种可能的解决方法，方法是显示`#inside`最初包含的面板，隐藏它，然后显示第一个面板：http: [//jsfiddle.net/cjc343/KuJJm/2/](http://jsfiddle.net/cjc343/KuJJm/2/)

# erlang - 使用rebar的erlang OTP应用程序，开发环境

> ID：13317718
> 
> 赞同：1
> 
> 时间：2012-11-09T23:52:22.740
> 
> 标签：erlang, erlang-otp

我正在学习 erlang OTP 和 rebar，我已经使用几个依赖项组合了一个小示例应用程序：cowboy 和 lager。

我已发出

```
rebar get-deps
rebar compile 
```

事情进展顺利。现在我想启动我的控制台来测试周围的东西，但对我来说如何启动依赖应用程序并不明显。

我试着发出一个

```
rebar generate 
```

为了获得启动应用程序的所有编排，即使对于开发测试来说这有点过头了，但我很遗憾未能获得以下转储

```
Crash dump was written to: erl_crash.dump
eheap_alloc: Cannot allocate 1459620480 bytes of memory (of type "old_heap").
Aborted 
```

ebin 目录只有我编写的应用程序的梁文件，但没有依赖项，我看到依赖项在主应用程序 deps 目录中有自己的 ebin 目录，我将如何让它们在控制台中可用以启动它们？

如果有人能阐明具有多个 OTP 应用程序的开发环境的常见做法，我将不胜感激。

我已经阅读了一些教程，但它们主要针对钢筋发布周期而不是开发过程。

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T02:03:57.500

在您的情况下，您拉入 deps 目录的模块通常应该从您的应用程序代码中调用 - 您的应用程序通常可以使用**application:start/1**函数从 Erlang shell 调用。如果你还没有，我强烈建议你阅读 Francesco Cesarini 的优秀著作**Erlang Programming**的第 12 章，“OTP 行为” ——这是对你正在尝试的内容的一个很好的实用介绍。

# javascript - 如何提高加载新叠加图像的地图性能

> ID：13317719
> 
> 赞同：2
> 
> 时间：2012-11-09T19:46:45.680
> 
> 标签：javascript, image, jquery, optimization

我继承了一个网站来维护，该网站使用覆盖真实地图的 html 地图将特定国家/地区链接到特定页面。

以前它加载了默认的地图图像，然后使用一些 javascript 它将图像 src 更改为具有该特定国家的图像，在鼠标悬停时具有不同的颜色，并在鼠标移出时将图像源重置为原始图像

为了使维护（添加新国家/地区）更容易，我通过为 div 标签使用一些 CSS 将初始地图制作为背景图像，然后为每个国家/地区创建新图像，这些国家/地区仅突出显示该国家/地区，以使图像保持相当小。

这很好用，但有一个问题在较慢的互联网连接上特别明显

当您将鼠标悬停在一个国家/地区上时，如果您的浏览器缓存中没有图像文件或下载它不会加载图像，除非您将鼠标悬停在另一个国家/地区然后回到第一个国家 - 我想这是由于图像必须手动在第一次悬停时下载。

**我的问题：是否可以在页面和所有其他资产完成加载后强制加载这些额外的图像，以便几乎消除这种行为？**

MAP 的 html 代码如下：

```
 <div class="gtmap"><img id="Image-Maps_6200909211657061" src="<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-blank.png" usemap="#Image-Maps_6200909211657061" alt="We offer Guided Motorcycle Tours all around the world" width="615" height="296" />
<map id="_Image-Maps_6200909211657061" name="Image-Maps_6200909211657061">
<area shape="poly" coords="511,134,532,107,542,113,520,141" href="/guided-motorcycle-tours-japan/" alt="Guided Japan Motorcycle Tours" title="Japan" onmouseover="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-japan.png';" onmouseout="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-blank.png';" />

<area shape="poly" coords="252,61,266,58,275,64,262,68" href="/guided-motorcycle-tour.php?iceland-motorcycle-adventure-39" alt="Guided Iceland Motorcycle Tours" title="Iceland"
onmouseover="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-iceland.png';" onmouseout="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-blank.png';" />

<area shape="poly" coords="587,246,597,256,577,279,568,270" href="/guided-motorcycle-tour.php?new-zealand-south-island-adventure-10" alt="New Zealand Guided Motorcycle Tours" title="New Zealand" onmouseover="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-nz.png';" onmouseout="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-blank.png';" />
<area shape="poly" coords="418,133,412,145,412,154,421,178,430,180,430,166,443,154,443,145,438,144,433,142,430,138,431,130,430,129,425,128" href="/guided-motorcycle-tours-india/" alt="India Guided Motorcycle Tours" title="India" onmouseover="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-india.png';" onmouseout="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-blank.png';" />
<area shape="poly" coords="460,152,466,149,474,165,470,171,466,161" href="/guided-motorcycle-tours-laos/" alt="Laos Guided Motorcycle Tours" title="Laos" onmouseover="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-laos.png';" onmouseout="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-blank.png';" />
<area shape="poly" coords="468,179,475,166,468,152,475,152,482,169" href="/guided-motorcycle-tour.php?indochina-motorcycle-adventure-tour-32" onClick="javascript: pageTracker._trackPageview('/internal-links/guided-tours/map/vietnam');" alt="Vietnam Guided Motorcycle Tours" title="Vietnam" onmouseover="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-viet.png';" onmouseout="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-blank.png';" />
<area shape="poly" coords="330,239,337,235,347,226,352,233,351,243,344,250,335,253,327,255,323,249,322,242,323,241" href="/guided-motorcycle-tours-southafrica/" alt="South Africa Guided Motorcycle Tours" title="South Africa" onmouseover="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-sa.png';" onmouseout="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-blank.png';" />
<area shape="poly" coords="290,77,293,86,298,96,286,102,285,97,285,89,282,84,282,79" href="/guided-motorcycle-tour.php?great-britain-isle-of-man-scotland-wales-uk-18" alt="United Kingdom" title="United Kingdom Guided Motorcycle Tours" onmouseover="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-uk.png';" onmouseout="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-blank.png';" />
<area shape="poly" coords="357,118,368,118,369,126,345,129,338,125,338,117,342,115,348,116" href="/guided-motorcycle-tour.php?explore-turkey-adventure-45" alt="Turkey" title="Turkey Guided Motorcycle Tours" onmouseover="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-turkey.png';" onmouseout="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-blank.png';" />
<area shape="poly" coords="206,95,193,101,185,101,178,106,165,111,157,109,147,105,134,103,121,103,107,103,96,103,86,104,81,99,77,91,70,83,62,79,60,72,61,64,59,57,60,51,71,50,83,49,95,50,107,54,117,53,129,47,137,36,148,37,163,38,177,44,187,54,195,60,184,72,191,80,200,87" href="/guided-motorcycle-tours-canada/" alt="Guided Canada Motorcycle Tours" title="Canada" onmouseover="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-canada.png';" onmouseout="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-blank.png';" />
<area shape="poly" coords="61,75,60,62,60,55,59,44,51,44,43,43,36,42,28,43,23,48,17,51,15,62,19,74,27,79,19,83,16,93,35,83,43,77,50,75,55,75" href="/guided-motorcycle-tours-alaska/"  alt="Guided Alaska Motorcycle Tours" title="Alaska" onmouseover="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-alaska.png';" onmouseout="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-blank.png';" />
<area shape="poly" coords="82,101,99,101,133,101,148,105,161,110,172,106,187,100,180,113,171,122,165,131,159,149,147,141,137,140,129,147,120,141,112,138,103,137,93,132,86,122,86,112,86,106" href="/guided-motorcycle-tours-usa/" alt="USA Guided Motorcycle Tours" title="USA" onmouseover="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-usa.png';" onmouseout="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-blank.png';" />
<area shape="poly" coords="178,225,180,214,175,208,174,204,178,198,174,193,167,192,157,199,158,204,164,211,167,218" href="/guided-motorcycle-tour.php?peru-machu-picchu-adventure-25" alt="Peru Guided Motorcycle Tours" title="Peru" onmouseover="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-peru.png';" onmouseout="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-blank.png';" />
<area shape="poly" coords="172,226,169,239,166,256,166,267,164,279,171,277,174,262,175,250,179,234,180,225,176,224" href="/guided-motorcycle-tours-chile/" alt="Guided Chile Motorcycle Tours" title="Chile" onmouseover="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-chile.png';" onmouseout="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-blank.png';" />
<area shape="poly" coords="199,260,194,261,187,265,184,276,183,296,170,292,168,282,174,270,174,257,177,245,180,230,190,228,205,237,199,245" href="/guided-motorcycle-tours-argentina/" alt="Guided Argentina Motorcycle Tours" title="Argentina" onmouseover="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-arg.png';" onmouseout="if(document.images) document.getElementById('Image-Maps_6200909211657061').src='<?php echo cdnhttpsCheck(); ?>assets/wmap/a-guided-tours-map-blank.png';" />
</map>
</div> 
```

这`<?php echo cdnhttpsCheck(); ?>`只是一个特定于站点的函数，它从配置文件中获取正确的 web 域/url，以便在可能的情况下从 CDN 加载资源（例如所有非 HTTPS 请求）如果有人想知道它为什么丢失，我们将在 HTML 底部加载 Jquery从代码片段

作为参考，相关地图的页面可在此处找到：[http ://www.motoquest.com/guided-motorcycle-tours/](http://www.motoquest.com/guided-motorcycle-tours/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:52:38.880

您可以通过将图像预加载到浏览器中来改善这种情况。希望大多数图像将在用户将鼠标悬停在任何东西上之前被接收。如果图像是在需要显示之前预加载的，那么当用户将鼠标悬停在该国家/地区时，应该不会看到任何延迟。

一个简单而可靠的方法是：

```
var preloadedImages = [];

function preloadImages() {
    for (var idx = 0; idx < arguments.length; idx++) {
        var oneImage = new Image()
        oneImage.src = arguments[idx];
        preloadedImages.push(oneImage);
    }

}

preloadImages('http://cdn.motoquest.com/assets/wmap/a-guided-tours-map-alaska.png',
    'http://cdn.motoquest.com/assets/wmap/a-guided-tours-map-canada.png',
    'http://cdn.motoquest.com/assets/wmap/a-guided-tours-map-usa.png'
    // and all the rest of them
); 
```

当然，我为此做了一个**[小提琴](http://jsfiddle.net/slashingweapon/8jAeu/)**。如果您在访问该页面时打开了网络调试面板，则可以看到在需要任何图像之前就已请求图像。

我这样写`preloadImages()`是为了让你可以根据需要使用尽可能多的参数（1 个或更多）调用它。只要继续提供 URL，它就会继续预加载图像。您无需更改地图代码或页面上的任何其他内容。

我建议您先尝试加载最大的国家/地区，因为它们是最容易（并且最有可能）被鼠标悬停的国家。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T18:23:54.590

1）至于您的真实示例-最好在带有许多`<path>`s的SVG + JS上创建地图。您需要的工具：jQuery、svgweb (fir IE8-)、世界矢量图。在这种情况下，您无需加载任何图像（SVG 可以内联在 html 中，也可以像[这里](http://vseslava.ru/)一样动态创建）。所有的悬停事件都写在 JS 上，只改变所有 SVG 树的 1 个属性。

SVG 有链接，它们像 HTML 链接一样工作。

* * *

2）您可以创建悬停国家的精灵（或一个包括所有悬停状态+地图的精灵）。悬停状态必须预先加载（通过将此图像包含为使用`background-position:-5000px 0;`JS-preload 或通过 JS-preload 的某些元素的背景）。我的意思是每个悬停状态仅包含 1 个没有完整地图的国家/地区。

本例中的 HTML 结构如下所示：

```
<div style="position:relative;"><!-- This div has main MAP without countries -->
  <div style="position:absolute;top:40px;left:50px;width:200px;height:170px;"></div><!-- for example div for Canada with Canada hover state -->
  ...
  <div style="position:absolute;top:0px;left:0px;right:0;"><img/></div><!-- overlay DIV with big transparent image and your areas -->
</div> 
```

* * *

3) 预先加载所有图像。

通过 HTML：

```
<div style="height:0;overflow:hidden;"><img/><img/><img/><img/><img/></div> 
```

或者通过 JS：

```
var Img = $( document.createElement('img') );
Img.attr('src',path_to_image); 
```

* * *

**更新**

对于您的具体问题：

是的。

1.  您正在等待`$(window).on('load')`= 加载所有 HTML（包含所有组件，如图像、CSS、flash、内部脚本）
2.  预加载所有图像

* * *

```
$(window).on('load',function(){
 var Img = [], List = []; // List of your preload images
 for(var i=0;i<List.length;i++){
  Img[i] = $( document.createElement('img') );
  Img[i].attr('src',List[i]);
 }
}); 
```

如果你有其他的东西要加载，你可以在 deferreds 上构建系统。

# c++ - 单元测试 Boost 文件系统 create_directories

> ID：13317721
> 
> 赞同：3
> 
> 时间：2012-11-09T23:52:40.427
> 
> 标签：c++, unit-testing, boost-filesystem

我想对 boost 文件系统函数 create_directories() 的失败情况进行单元测试，即当 create_directory 失败时。有人可以就如何做到这一点提供任何建议吗？另一个要求是代码需要是跨平台的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-19T14:44:20.390

您可以尝试在文件路径中创建目录：

```
#include <fstream>
#include <iostream>
#include "boost/filesystem/path.hpp"
#include "boost/filesystem/operations.hpp"

namespace bfs = boost::filesystem;

int main() {
  // Create test dir
  boost::system::error_code ec;
  bfs::path test_root(bfs::unique_path(
      bfs::temp_directory_path(ec) / "%%%%-%%%%-%%%%"));
  if (!bfs::create_directory(test_root, ec) || ec) {
    std::cout << "Failed creating " << test_root << ": " << ec.message() << '\n';
    return -1;
  }

  // Create file in test dir
  bfs::path test_file(test_root / "file");
  std::ofstream file_out(test_file.c_str());
  file_out.close();
  if (!bfs::exists(test_file, ec)) {
    std::cout << "Failed creating " << test_file << ": " << ec.message() << '\n';
    return -2;
  }

  // Try to create directory in test_file - should fail
  bfs::path invalid_dir(test_file / "dir");
  if (bfs::create_directory(invalid_dir, ec)) {
    std::cout << "Succeeded creating invalid dir " << invalid_dir << '\n';
    return -3;
  }

  // Try to create nested directory in test_file - should fail
  bfs::path nested_invalid_dir(invalid_dir / "nested_dir");
  if (bfs::create_directories(nested_invalid_dir, ec)) {
    std::cout << "Succeeded creating nested invalid dir " << invalid_dir << '\n';
    return -4;
  }

  // Clean up
  bfs::remove_all(test_root);
  return 0;
} 
```

# responsive-design - 比 responsive.is 更好的工具

> ID：13317727
> 
> 赞同：5
> 
> 时间：2012-11-09T00:28:39.687
> 
> 标签：responsive-design

[Responsive.is](http://responsive.is/)是一个很棒的网站，可以预览不同浏览器大小和方向的任何网站。是否有类似的工具也支持迷你平板电脑？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T12:50:46.380

从 Firefox 15 开始，您拥有一个集成的内置响应式设计工具，可从 Web 开发人员菜单访问。

![在此处输入图像描述](../Images/61b93073d6b132616a6205d7da2d4de9.png)

请参阅Paul Rouget[的这篇博文。](http://paulrouget.com/e/devtoolsupdate/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T01:46:22.477

我今天遇到了[screenqueri.es](http://screenqueri.es/)。它允许选择特定的电话或桌子，例如 7" Galaxy Tab。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-09T14:37:24.390

我使用[Remy Sharp 的 responsivepx](http://responsivepx.com/)，它可以让您控制精确的宽度，而不是提供固定的设备宽度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-09T19:20:19.513

[jResize](http://www.toddmotto.com/jresize-plugin-for-one-window-responsive-development)是一个 jQuery 插件，其功能与 responsive.is 站点基本相同，只是您现在可以完全控制指定的尺寸。

由于您直接在自己的域上加载它，因此您不依赖于其他人的正常运行时间，如果您的网站不公开（例如在 htaccess auth 之后），它仍然可以工作，并且您的客户也可以使用它而无需导航不熟悉的菜单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T10:19:29.133

我使用几个不同的网站来检查我的响应式设计。我在[http://reactivewebdesign.net/Resourses/Links](http://reactivewebdesign.net/Resourses/Links)有指向 5 的链接——我刚开始使用 jResize，发现它有一些不错的功能。

# mysql - 不支持 MySQL ADO.NET 身份验证方法

> ID：13317731
> 
> 赞同：0
> 
> 时间：2012-11-09T23:53:05.167
> 
> 标签：mysql, wcf, ado.net, ado.net-entity-data-model

最近我开始了一个项目，需要从 WCF 项目访问托管在 hostgator 服务器上的 MySQL 服务器。我下载并安装了 MySQL ADO.NET 连接器并尝试创建实体数据模型，但它显示不支持身份验证方法“mysql_old_password”。我该怎么办？我一直在谷歌搜索，但无济于事。

这是我第一次使用 MySQL。

任何帮助将不胜感激。

提前致谢

真诚的，凌！

[屏风](http://i.stack.imgur.com/hzH9z.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:38:01.257

当您连接到密码以旧密码格式 ( [http://dev.mysql.com/doc/refman/5.0/en/old-client.html](http://dev.mysql.com/doc/refman/5.0/en/old-client.html) ) 存储的 MySQL 数据库时，会显示此错误消息。较新的 MySQL 客户端不允许使用旧密码格式与数据库建立连接，因为它的安全性较低。

有人会建议`old_passwords=1`在 MySQL 服务器上设置，但我认为将密码升级为新的密码格式会更好。然后可以再次设置 MySQL 连接，您的数据库将得到更好的保护。

您可以在此处阅读有关如何将 MySQL 密码从旧格式升级到新格式的信息：http: [//code.openark.org/blog/mysql/upgrading-passwords-from-old_passwords-to-new-passwords](http://code.openark.org/blog/mysql/upgrading-passwords-from-old_passwords-to-new-passwords)

# javascript - 确定 cfselect 中的选定值并将其设置为变量

> ID：13317736
> 
> 赞同：-1
> 
> 时间：2012-11-09T23:53:40.313
> 
> 标签：javascript, jquery, coldfusion

我有几个使用 cfselect 的下拉菜单，例如城市和国家。我想知道如何确定所选值并将变量设置为这些值以在另一个 cfform 中使用。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T00:00:32.903

Form1.cfm

```
<cfselect name="city">
<cfselect name="country"> 
```

将表单提交到 form2.cfm 后，城市和国家/地区在表单范围内可用，并包含用户选择的选项。与 HTML 表单没有什么不同？

Form2.cfm

```
<cfinput name="chosenCity" value="#form.city#">
<cfinput name="chosenCountry" value="#form.country#"> 
```

# android - Activity 通过 Intent 启动而崩溃，但在设置为主 Activity 时不会

> ID：13317737
> 
> 赞同：0
> 
> 时间：2012-11-09T23:53:54.867
> 
> 标签：android, android-intent, android-fragments

所以我有一个 FragmentActivity，但我无法切换到它。如果它是我的应用程序的主要活动，它可以正常工作，但当我尝试切换到它时则不行。

```
public class SomeFragmentActivity extends FragmentActivity implements AnimationLayout.Listener,
    OnClickListener {

public int mPage = 1;

protected ListView mList;
protected AnimationLayout mLayout;
protected String[] mStrings = { "a", "b", "c", "d", "e", "f", "g", "h", "i" };

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.test_content_layout);

    findViewById(R.id.sidebar_button).setOnClickListener(this);

    mLayout = (AnimationLayout) findViewById(R.id.animation_layout);
    mLayout.setListener(this);

    mList = (ListView) findViewById(R.id.sidebar_list);
    mList.setAdapter(new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_multiple_choice, mStrings));
    mList.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);

} 
```

在启动该片段的主要活动的 onCreate 中：

```
public void initialize() {
        mActivity.setContentView(R.layout.activity_main_layout);

        ((Button) findViewById(R.id.main_activity_button_some_list))
                .setOnClickListener(this);
        ((Button) findViewById(R.id.main_activity_button_fragment))
                .setOnClickListener(this);

    } 
```

是它的onCreate，并且：

```
public void onClick(View v) {
    Intent intent = null;
    switch (v.getId()) {
    case (R.id.main_activity_button_some_list):
        intent = new Intent(this, SomeListActivity.class);

        break;

    case (R.id.main_activity_button_fragment):
        intent = new Intent(this, SomeFragmentActivity.class);
        break;
    }
    startActivity(intent);
} 
```

在我正常的 MainActivity 中切换到它。我能够进入 SomeListActivity.class 所以我不确定是怎么回事。它在清单中定义得很好。

编辑：

```
 11-09 18:48:53.652: E/AndroidRuntime(4268): FATAL EXCEPTION: main
11-09 18:48:53.652: E/AndroidRuntime(4268): java.lang.NullPointerException
11-09 18:48:53.652: E/AndroidRuntime(4268):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1409)
11-09 18:48:53.652: E/AndroidRuntime(4268):     at android.app.Activity.startActivityForResult(Activity.java:3351)
11-09 18:48:53.652: E/AndroidRuntime(4268):     at android.app.Activity.startActivityForResult(Activity.java:3312)
11-09 18:48:53.652: E/AndroidRuntime(4268):     at android.app.Activity.startActivity(Activity.java:3522)
11-09 18:48:53.652: E/AndroidRuntime(4268):     at android.app.Activity.startActivity(Activity.java:3490)
11-09 18:48:53.652: E/AndroidRuntime(4268):     at com.LoLCompanionApp.MainActivity.onClick(MainActivity.java:39)
11-09 18:48:53.652: E/AndroidRuntime(4268):     at android.view.View.performClick(View.java:4084)
11-09 18:48:53.652: E/AndroidRuntime(4268):     at android.view.View$PerformClick.run(View.java:16966)
11-09 18:48:53.652: E/AndroidRuntime(4268):     at android.os.Handler.handleCallback(Handler.java:615)
11-09 18:48:53.652: E/AndroidRuntime(4268):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-09 18:48:53.652: E/AndroidRuntime(4268):     at android.os.Looper.loop(Looper.java:137)
11-09 18:48:53.652: E/AndroidRuntime(4268):     at android.app.ActivityThread.main(ActivityThread.java:4931)
11-09 18:48:53.652: E/AndroidRuntime(4268):     at java.lang.reflect.Method.invokeNative(Native Method)
11-09 18:48:53.652: E/AndroidRuntime(4268):     at java.lang.reflect.Method.invoke(Method.java:511)
11-09 18:48:53.652: E/AndroidRuntime(4268):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
11-09 18:48:53.652: E/AndroidRuntime(4268):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
11-09 18:48:53.652: E/

AndroidRuntime(4268):   at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T00:23:28.147

问题是您`Intent`在调用时为空`startActivity()`。您已将点击侦听器附加到具有 ID的内容，但是如果 ID 为或`R.id.sidebar_button`，则仅更改`intent`为非 null 。`R.id.main_activity_button_some_list``R.id.main_activity_button_fragment`

这是一个快速修复：

```
public void onClick(View v) {
    Intent intent = null;
    switch (v.getId()) {
    case (R.id.main_activity_button_some_list):
        intent = new Intent(this, SomeListActivity.class);

        break;

    case (R.id.main_activity_button_fragment):
        intent = new Intent(this, SomeFragmentActivity.class);
        break;
    }
    if (intent != null) // Add this
        startActivity(intent);
} 
```

但是，我建议您`case`为`R.id.sidebar_button`.

# configuration - 一个文件中的所有路由，而不是跨模块分布。ZF2可以吗？

> ID：13317742
> 
> 赞同：0
> 
> 时间：2012-11-09T23:54:49.360
> 
> 标签：configuration, routing, routes, zend-framework2

众所周知，ZF2 没有路由器。每条路由都是一个路由器：

> 在新的路由系统中，我们没有这样的路由器，因为每个路由都可以自己匹配和组装 URI，这也使它们成为路由器。

ZF2 现在强制您将路线放入每个模块的配置中：

> URL 到特定操作的映射是使用模块的 module.config.php 文件中定义的路由完成的。打开 config/module.config.php 文件，修改它以添加到“routes”和“controller”参数。

对我来说，将一件可靠的东西分散在应用程序目录中并不方便。是否有可能以某种方式将我的所有路线放在一个地方（例如，routes.php 文件）？像这样，例如：

```
routes.php
return array (
    'module_1' => array( ... its route/routes ...),
    'module_2' => array( ... its route/routes ...), etc.
); 
```

在ZF2中如何实现？

只是为了与我的问题联系起来： [ZF2 Routing as in ZF1](https://stackoverflow.com/questions/12370788/zf2-routing-as-in-zf1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T01:05:12.567

在 ZF2 模块中倾向于提供配置，这种配置被合并到单个应用程序配置中。所以我看不出路由器配置不能存储在它自己的配置文件中的任何原因。

默认情况下，ZF2 将包含驻留在`config/autoload`该匹配项中的配置文件，`*global.php`或者`*local.php`- 因此命名文件`routes.global.php`应该可以工作。

此默认行为定义在`/config/application.config.php`：

```
'config_glob_paths'    => array(
    'config/autoload/{,*.}{global,local}.php',
), 
```

# forms - zend framework 2 如何禁用验证器的多个错误消息

> ID：13317746
> 
> 赞同：0
> 
> 时间：2012-11-09T23:55:22.433
> 
> 标签：forms, validation, syntax-error, messaging, zend-framework2

我试图让 EmailValidator 类只返回一条错误消息。在其他论坛中，我看到只有在 ZF1 中才有可能扩展 Validator 类。

有人知道ZF2中是否有更简单的制作方法吗？

如果有人有帮助，这是我的代码，在此我调用 setMessages 方法来覆盖默认消息模板，但不起作用。

```
 $form    = new ParticipantForm();
    $mailInput = new Input('mail');
    $validator = new ValidatorEmailAddres();
    $validator->setMessages(
            array(
                    ValidatorHostName::UNKNOWN_TLD => 'hola'
            )
    );
    $mailInput->getValidatorChain()->addValidator($validator);
    $mailInputFilter = new InputFilter();
    $mailInputFilter->add($mailInput);   
    $form->setInputFilter($mailInputFilter);
    $form->setData($_POST); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T11:15:50.600

尝试这个：

```
$validator = new \Zend\Validator\EmailAddres();
$validator->setMessage('something broke bla'); 
```

或设置特定消息：

```
$validator = new \Zend\Validator\EmailAddres();
$validator->setMessage('something broke bla', \Zend\Validator\EmailAddres::LENGTH_EXCEEDED); 
```

# css - 居中元素与容器内左对齐元素内联

> ID：13317750
> 
> 赞同：3
> 
> 时间：2012-11-09T23:55:47.440
> 
> 标签：css, html, alignment, positioning

`<div>`我在一个容器中有两个元素`<div>`，我需要将其中一个元素对齐在容器的左侧，将另一个元素对齐在容器的中心，同时保持它们内联。

如果我只剩`float`下第一个，第二个就会偏离中心向右推。

现在我最好的解决方案是使容器`position: relative`与`text-align: center`左对齐第一个元素`position: absolute`。

也许有另一种更好的方法来做到这一点，而不是绝对位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T00:05:35.410

这是一个非常长的镜头，但我发现在左侧浮动元素上应用一个很大的负边距右将补偿中心偏移......

尝试给浮动的 div 一个`margin-right: -1000px;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T00:12:58.403

一个div中有两个div有限制吗？你可以做 4 `divs`：

```
<div id="one">
    <div id="first"></div>
    <div id="two">
        <div id="second"></div>
    </div>
</div> 
```

并适用`float: left`于`#first`，`#two`然后`margin: auto`是`#second`

# javascript - IE8 中的“Array.prototype.slice：'this' 不是 JavaScript 对象”错误

> ID：13317752
> 
> 赞同：9
> 
> 时间：2012-11-09T23:56:15.740
> 
> 标签：javascript, arrays, dom, prototype, nodelist

据我了解，IE8 可以访问该`Array.prototype.slice`方法。然而，当我尝试调用它以将 a`NodeList`转换为数组时，它给了我错误`Array.prototype.slice: 'this' is not a JavaScript object`。[**你可以在这里查看**](http://jsfiddle.net/f4XAW/)，或者在这里查看我的代码：

**HTML**

```
<div id="test">Test</div> 
```

**JavaScript**

```
var divs = document.getElementsByTagName('div');
divs = Array.prototype.slice.call(divs);
console.log(divs); 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-10T00:00:00.157

更新： A[`NodeList`](https://developer.mozilla.org/en-US/docs/DOM/NodeList)在某些方面可以被视为一个数组 - 在循环之前，您实际上不需要对它做任何特别的事情，例如：

```
var aDivs = [];
for (var = i = 0; i < divs.length; i++) {
    aDivs.push(divs[i]);
} 
```

这将创建一个数组，其中包含您运行时匹配的所有节点`document.getElementsByTagName()`

有关为什么在某些浏览器中使用 a而不是其他浏览器的完整解释，请参阅[此问题](https://stackoverflow.com/questions/2735067/how-to-convert-a-dom-node-list-to-an-array-in-javascript)，但它从规范中归结为这句话：`slice``NodeList`

> 切片函数能否成功应用于宿主对象取决于实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T00:17:23.313

错误消息是准确的 - 您的节点列表不是 JavaScript 对象，它是一个“[主机对象](http://jibbering.com/faq/#hostObject)”，您不一定像常规 JavaScript 对象那样传递它。在 IE8 的 JavaScript 控制台中运行此代码：

```
document.querySelectorAll("div") instanceof Object 
```

它返回`false`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T00:10:15.963

我假设即使 NodeList 集发生更改，您也希望保持相同的内容。

如果是这种情况，坏消息：IE8 坏了。它无法处理在 NodeList 上使用 slice。

因此，当切片失败时（通过使用 try/catch），您将需要使用后备并自己制作“切片”。

请注意，如果您不希望 DOM 发生变化，并且类似数组的对象就足够了，那么您可以像使用任何其他数组一样使用 NodeList（除了它不是，并且如果DOM 更改）。

**[编辑]**实际上这不是一个损坏的设计，它是标准允许的（如 Kelvin Mackay 评论中的链接所述）

# imagemagick - 在 ImageMagick 命令行中将 RGB 转换为灰度

> ID：13317753
> 
> 赞同：68
> 
> 时间：2012-11-09T23:56:18.423
> 
> 标签：imagemagick, grayscale

如何使用 (r+g+b)/3 方法将 RGB 图像（3 通道）转换为灰度图像？我浏览了一个示例页面：[http](http://www.imagemagick.org/Usage/color_mods/#grayscale) ://www.imagemagick.org/Usage/color_mods/#grayscale 但所需的方法：

```
convert test.png -fx '(r+g+b)/3' gray_fx_average.png 
```

给了我一个错误的结果 - 结果图像仍然有 3 个通道。

您可以通过运行命令来检查这一点：`identify -format "%[colorspace] <== %f\n" *.png`.

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-11-21T15:05:54.643

`convert <img_in> -set colorspace Gray -separate -average <img_out>`为我提供任何图像的最佳结果。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-12T15:05:07.917

使用该`(r+g+b)/3`方法将应用灰度效果，但图像将保持 sRGB（*这是该方法的预期行为*）。您需要与命令一起指定所需的[色彩空间](http://www.imagemagick.org/script/command-line-options.php#colorspace)`-fx`。

```
convert test.png -fx '(r+g+b)/3' -colorspace Gray gray_fx_average.png 
```

验证`identify -format "%[colorspace] <== %f\n" gray_fx_average.png`

```
Gray <== gray_fx_average.png 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-10-16T19:10:58.207

在[Fish](http://fishshell.com) shell 中批量转换图像：

`for file in *.jpg; convert -colorspace Gray $file $file; end;`

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-10-12T17:55:20.800

Imagemagick 命令行中的几种方法是：

```
convert test.png -grayscale average gray_average.png

or

convert test.png -colorspace OHTA -channel r -separate +channel gray_average.png

or

convert test.png -intensity average -colorspace gray gray_average.png

or

convert test.png -colorspace HSI -channel blue -separate +channel gray_average.png 
```

看

[https://imagemagick.org/script/command-line-options.php#grayscale](https://imagemagick.org/script/command-line-options.php#grayscale) [https://imagemagick.org/script/command-line-options.php#intensity](https://imagemagick.org/script/command-line-options.php#intensity) [https://imagemagick.org/script/command- line-options.php#colorspace](https://imagemagick.org/script/command-line-options.php#colorspace)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-27T14:41:21.600

好像您正在使用红色通道来执行此操作，在 convert test.png -colorspace OHTA -channel r -separate +channel gray_average.png 我更喜欢绿色通道（我听说这种方式适用于古代电视，也许是最好的)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-12T10:27:43.073

我对灰度图像使用这个效果很好（我从 PNG 转换）：

```
ls ./*.png | xargs -L1 -I {} convert {} -strip -interlace JPEG -sampling-factor 4:2:0 -gaussian-blur 0.05 -colorspace Gray -quality 20  {}.jpg 
```

我将它用于扫描的黑白页面，将它们变成灰度图像（额外的参数会清除前一页的阴影）：

```
ls ./*.png | xargs -L1 -I {} convert {} -strip -interlace JPEG -sampling-factor 4:2:0 -gaussian-blur 0.05 -colorspace Gray -quality 20 -density 300 -fill white -fuzz 40% +opaque "#000000" -density 300 {}.jpg 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-20T09:05:01.090

我`convert`主要用于将文档的彩色图片转换为灰度 pdf 文档以执行 OCR。我最好的结果是使用`Rec709Luminance`. 所以我推荐

```
convert colourpicture.png -grayscale Rec709Luminance greyscalepicture.png 
```

简短的命令，不错的输出。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-12T11:23:10.733

我在将**sRGB**颜色空间转换为**灰色**颜色空间时遇到了问题。我必须在转换之前手动删除**Alpha通道。**在其他情况下，图像将保持 sRGB。

```
convert image_original.tga -alpha off -set colorspace Gray image_converted.tga 
```

# c++ - C++/MFC - 如何将窗口内容导出到 Excel？

> ID：13317755
> 
> 赞同：1
> 
> 时间：2012-11-09T23:56:25.467
> 
> 标签：c++, excel, csv, export

> **可能重复：**
> [Excel 文件和 C++](https://stackoverflow.com/questions/2218535/excel-files-and-c)

我正在使用一个名为 UltimateGrid 的 API，它允许我使用 C++/MFC 轻松创建类似 Excel 的网格。我需要一种将这些网格的所有内容导出到实际 Excel 文档的方法。我在此 API 的文档中找不到任何关于此的内容。然后我开始思考......将内容导出到 Excel 文档是应用程序中的常见要求。我正在考虑创建一个用于将网格导出到 Excel 的右键菜单选项。当我开始编写代码时，我觉得我正在重新发明轮子。当涉及数据库表时，我四处搜索并看到了很多常见的处理方法。但这里不是这样。我的底层“数据源”不是数据库表，而只是应用程序内部的一些业务对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T00:05:38.507

我不确定你希望它有多自动化。我在不久前做过这个（就像几年前一样），如果这个信息已经过时了，请原谅我。这是我记得的：

1.  CSV 很好，只要您不想导出格式、图表等...

2.  您应该能够从您的 C++ 代码访问 Excel 对象，并且 Microsoft 应该有关于如何执行此操作的文档。

3.  让你的 C++ 生成一个 VBScript 来访问组件可能更容易，因为我上次检查过，这样做的繁文缛节要少得多，但你可能会遇到这种方法的权限/安全问题。

另外，您是否检查过 UltimateGrid 是否支持与 Excel 兼容的其他导出格式？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T00:24:07.343

如果没有其他选择，我认为您可能需要研究 DDE（动态数据交换）。该操作系统可能会受到限制，应该是 Microsoft Windows，但是您也许可以找到一些支持其他操作系统的开源/运行时。

我很久以前使用的一个是NDde。

# gwt - GWT JSNI 方法调用失败，但没有错误

> ID：13317763
> 
> 赞同：1
> 
> 时间：2012-11-09T23:57:22.687
> 
> 标签：gwt, mozilla, jsni

我正在尝试在 GWT 应用程序中实现 Mozilla 的[角色。](https://developer.mozilla.org/en-US/docs/Persona/Quick_Setup)这是我为测试它而设置的虚拟应用程序的部分代码：

```
public class OpenId implements EntryPoint {

private native void callWatch(String email)
/*-{
    $wnd.navigator.id.watch({
        loggedInUser: email,
        onlogin: function(assertion){
            $wnd.alert("Calling method");
            this.@com.gallup.openid.client.OpenId::processLogin(Ljava/lang/String;)(assertion);
            $wnd.alert("Called Java Method");
        },
        onlogout: function(){alert("Logged Out!");}
    });
}-*/;

private void processLogin(String assertion){
    Window.alert("Logged in!");
    personaStatus.setText("Log In Complete.");
}
} 
```

当我调用该`callWatch`方法时，只显示“调用方法”警告框。其他任何一个都没有被调用过。因此，由于某种原因，代码似乎在第一个警报下方的 JSNI 调用处停止。但是在开发模式下没有错误。

我不明白为什么`processLogin`没有调用该方法。

我以为我正确地遵循了[Google 的文档](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI)。

我确实尝试过写作

```
this.@com.gallup.openid.client.OpenId::processLogin(Ljava/lang/String;)(assertion); 
```

由于[这篇](https://stackoverflow.com/questions/981924/native-javascript-method-in-gwt)文章。`OpenID.@...`_`instance.@...`

我不确定还能尝试什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T01:20:45.597

该变量`this`指向直接围绕它的函数，在本例中是您的 onlogin JavaScript 函数。您需要使用临时`that`变量（顺便说一下，这是一个典型的 JavaScript 习惯用法）

```
private native void callWatch(String email)
/*-{
  var that = this;
   ...
    onlogin: function(assertion){
      that.@com... 
```

然后，理想情况下使用`$entry(...)`, 如果您注册了 UncaughtExceptionHandler，您将看到错误消息。

另请参阅：[https ://stackoverflow.com/a/5235580/291741](https://stackoverflow.com/a/5235580/291741)

# scala - 类型论中的种类与等级

> ID：13317768
> 
> 赞同：13
> 
> 时间：2012-11-09T23:57:54.273
> 
> 标签：scala, haskell, type-theory, higher-rank-types, type-kinds

我很难理解 Higher Kind 和 Higher Rank 类型。Kind 非常简单（感谢 Haskell 文献），我曾经认为 rank 在谈论类型时就像 kind，但显然不是！我阅读了维基百科的文章无济于事。那么有人可以解释一下什么是等级吗？更高等级是什么意思？高阶多态性？那是怎么回事（如果有的话）？比较 Scala 和 Haskell 也很棒。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-10T00:32:49.350

等级的概念与种类的概念并不真正相关。

多态类型系统的等级描述了`forall`s 可能出现在类型中的什么位置。在 rank-1 类型系统中`forall`，s 可能只出现在最外层，在 rank-2 类型系统中，它们可能出现在嵌套的一层，依此类推。

因此，例如`forall a. Show a => (a -> String) -> a -> String`将是 rank-1 类型和`forall a. Show a => (forall b. Show b => b -> String) -> a -> String`rank-2 类型。这两种类型之间的区别在于，在第一种情况下，函数的第一个参数可以是任何接受一个可显示参数并返回字符串的函数。因此类型函数`Int -> String`将是有效的第一个参数（如假设函数`intToString`），类型函数也是如此`forall a. Show a => a -> String`（如`show`）。在第二种情况下，只有类型函数才是`forall a. Show a => a -> String`有效参数，即`show`可以，但`intToString`不会。因此，以下函数将是第二种类型的合法函数，但不是第一种（其中`++`应该表示字符串连接）：

```
higherRankedFunction(f, x) = f("hello") ++ f(x) ++ f(42) 
```

请注意，这里的函数`f`适用于（可能）三种不同类型的参数。因此，如果`f`该功能`intToString`是行不通的。

默认情况下，Haskell 和 Scala 都是 Rank-1（因此上述函数不能用这些语言编写）。但是 GHC 包含一个语言扩展来启用 Rank-2 多态性和另一个启用任意 n 的 Rank-n 多态性的语言扩展。

# mysql - 如何在没有 MySQL 客户端的情况下直接访问 MySQL InnoDB 索引值？

> ID：13317771
> 
> 赞同：10
> 
> 时间：2012-11-09T23:57:56.593
> 
> 标签：mysql, c, indexing, innodb

我`a VARCHAR(255), b INT`在 InnoDB 表中的列上有一个索引。给定两`a,b`对，我可以使用 MySQL 索引来确定来自 ac 程序的对是否相同（即不使用 a`strcmp`和数值比较）？

1.  MySQL InnoDB 索引存储在文件系统中的什么位置？
2.  可以从单独的程序中读取和使用吗？格式是什么？
3.  如何使用索引来确定两个键是否相同？

*注意：这个问题的答案应该是 a) 提供访问 MySQL 索引以完成此任务的方法，或者 b) 解释为什么实际上不能以这种方式访问​​/使用 MySQL 索引。特定于平台的答案很好，我使用的是 Red Hat 5.8。*

* * *

*以下是此问题的先前版本，它提供了更多上下文，但似乎分散了实际问题的注意力。我知道在 MySQL 中还有其他方法可以完成此示例，我提供了两种方法。这不是关于优化的问题，而是将存在于许多不同动态生成的查询中的复杂性分解出来。*

我可以使用带有子分组的子选择来完成我的查询，例如

```
SELECT c, AVG(max_val)
FROM (
    SELECT c, MAX(val) AS max_val
    FROM table
    GROUP BY a, b) AS t
GROUP BY c 
```

但是我写了一个UDF，它允许我用一个单一的选择来做，例如

```
SELECT b, MY_UDF(a, b, val)
FROM table
GROUP by c 
```

这里的关键是我将字段传递给 UDF，并且我手动管理`a`每个组中的子组。Column是一个 varchar，所以这涉及到检查匹配的调用，但它相当快。`b``a,b``a``strncmp`

但是，我有一个 index `my_key (a ASC, b ASC)`。我可以访问和使用 MySQL 索引，而不是手动检查 a 和 b 上的匹配项吗？也就是说，我可以在 my_key 中获取给定行或`a,b`c 中的对（在 UDF 内）的索引值吗？如果是这样，是否可以保证索引值对于任何值都是唯一的`a,b`？

我想调用`MY_UDF(a, b, val)`然后`(a,b)`从 UDF 中查找 c 中的 mysql 索引值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T20:43:30.303

回头看看你原来的查询

```
SELECT c, AVG(max_val)
FROM
(
    SELECT c, MAX(val) AS max_val
    FROM table
    GROUP BY a, b
) AS t
GROUP BY c; 
```

您应该首先确保子选择通过运行为您提供所需的内容

```
SELECT c, MAX(val) AS max_val
FROM table
GROUP BY a, b; 
```

如果子选择的结果是正确的，则运行您的完整查询。如果该结果是正确的，那么您应该执行以下操作：

```
ALTER TABLE `table` ADD INDEX abc_ndx (a,b,c,val); 
```

这将通过仅从索引中获取所有需要的数据来加快查询速度。永远不需要查询源表。

编写 UDF 并将其称为单个 SELECT 只是伪装子选择并产生比查询需要更多的开销。只需将完整查询（对数据进行一次嵌套传递）放在存储过程中，将比在 UDF 中获取大部分数据并迭代执行单行选择更有效（类似于 O(n log n) 运行时间可能更长`Sending data`状态）。

# 更新 2012-11-27 13:46 EDT

您可以通过做两件事来访问索引而不接触表格

*   创建一个体面的覆盖指数

    ALTER TABLE `table`ADD INDEX abc_ndx (a,b,c,val);

*   运行`SELECT`我之前提到的查询

由于查询的所有列都在索引中，查询优化器只会触及索引（或预缓存索引页）。如果表是 MyISAM，您可以...

1.  设置 MyISAM 表以具有可以在 mysqld 启动时预加载的专用密钥缓存
2.  运行`SELECT a,b,c,val FROM table;`以将索引页面加载到 MyISAM 的默认 keycache 中

相信我，你真的不想违背 mysqld 的意愿访问索引页面。我的意思是什么？

对于 MyISAM，MyISAM 表的索引页存储在表的`.MYI`文件中。每个 DML 语句都会调用一个全表锁。

对于 InnoDB，索引页面被加载到 InnoDB 缓冲池中。因此，相关的数据页也将加载到 InnoDB 缓冲池中。

[**由于 MyISAM 需要恒定的 I/O 或 InnoDB 执行的恒定MVCC**](http://en.wikipedia.org/wiki/Multiversion_concurrency_control)协议，您不必使用 Python、Perl、PHP、C++ 或 Java 来规避对索引页面的访问。

有一个 NoSQL 范式（称为 HandlerSocket）允许对 MySQL 表的低级访问，可以完全绕过 mysqld 的正常访问模式。[我不推荐它，因为在使用它发出写入时存在错误。](https://dba.stackexchange.com/questions/3370/what-are-your-use-cases-for-handlersocket/3372#3372)

# 更新 2012-11-30 12:11 EDT

从你最后的评论

> 我正在使用 InnoDB，我可以看到 MVCC 模型如何使事情复杂化。然而，显然 InnoDB 在索引中只存储一个版本（最新的）。相关表的访问模式是一次写入，多次读取，因此如果可以访问索引，它可以为每个键提供一个单一的、可靠的数据。

对于 InnoDB，MVCC 并没有让任何事情复杂化。它实际上可以成为你最好的朋友，前提是：

*   如果您启用了[**自动提交**](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_autocommit)（默认情况下应该启用）
*   相关表的访问模式是一次写入，多次读取

如果重复读取，我希望访问的索引页面几乎永远位于 InnoDB 缓冲池中。[我只是确保您的**innodb_buffer_pool_size**设置得足够高以容纳必要的 InnoDB 数据](https://dba.stackexchange.com/a/2194/877)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T22:16:58.183

您可能无法直接访问密钥。我认为这实际上不会对性能产生任何影响。

如果您以正确的顺序设置覆盖索引，MySQL 将不会从硬盘中获取单个页面，而是直接从索引中传递结果。没有比这更快的了。

请注意，如果它的结果​​大于您的[tmp_table_size](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_tmp_table_size)或[max_heap_table_size](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_max_heap_table_size) ，您的子选择可能最终会出现在磁盘上的一个临时表中。

`Created_tmp_tables_disk_tables`如果不确定，请检查状态。

有关 MySQL 如何使用内部临时表的更多信息，您可以在此处找到 [http://dev.mysql.com/doc/refman/5.5/en/internal-temporary-tables.html](http://dev.mysql.com/doc/refman/5.5/en/internal-temporary-tables.html)

如果需要，请发布您的表结构以供审核。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-29T21:54:14.027

如果您*只想*访问 MySQL 之外的索引，则必须将 API 用于[MySQL 存储引擎](http://dev.mysql.com/doc/refman/5.1/en/storage-engines.html)之一。默认引擎是 InnoDB。请参阅此处的概述：[InnoDB 内部](http://www.innodb.com/wp/wp-content/uploads/2009/05/innodb-file-formats-and-source-code-structure.pdf)。这（在非常高的层次上）描述了磁盘上的数据布局和访问它的 API。更详细的描述在这里：[嵌入式 InnoDB](http://www.innodb.com/doc/embedded_innodb-1.0/)。

但是，与其编写自己的直接使用 InnoDB API 的程序（这需要大量工作），不如使用已经完成这项工作的项目之一：

*   [HandlerSocket](https://github.com/DeNADev/HandlerSocket-Plugin-for-MySQL)：允许 NoSQL 访问 InnoDB 表，在 UDF 中运行。请参阅[来自开发人员的内容丰富的博客文章](http://yoshinorimatsunobu.blogspot.com/2010/10/using-mysql-as-nosql-story-for.html)。HandlerSocket 的目标是提供一个公开为网络守护进程的 NoSQL 接口，但是您可以使用相同的技术（以及大部分相同的代码）来提供一些将被 MySQL 查询使用的东西。

*   [memcached InnoDB 插件](http://blogs.innodb.com/wp/2011/04/nosql-to-innodb-with-memcached/)。提供对 InnoDB 表的 memcached 样式访问。

*   [HailDB](http://www.haildb.com/)：让 NoSQL 可以访问 InnoDB 表，运行在 Embedded InnoDB 之上。见[会议介绍](http://www.slideshare.net/stewartsmith/haildb-a-nosql-api-direct-to-innodb)。 **编辑：** HailDB 可能无法与 MySQL 并行运行。

我相信其中任何一个都可以与 MySQL 并行运行（使用相同的表），并且可以从 C 中使用，因此它们确实满足您的要求。

如果您可以使用/迁移到 MySQL 集群，另请参阅 [NDB API](http://dev.mysql.com/doc/ndbapi/en/ndbapi.html)，一个直接 API 和[ndbmemcache](http://dev.mysql.com/doc/ndbapi/en/ndbmemcache.html)，一种使用 memcache API 访问 MySQL 集群的方法。

如果不知道您为什么要尝试这样做，这很难回答，因为不同方法的含义是非常不同的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T23:06:26.967

没有。没有实用的方法来使用 MySQL 索引，从 C 程序中，以 MySQL 引擎以外的方式访问 MySQL 索引，以检查两个 (a,b) 对（键）是否相同或不。

还有更实用的解决方案，不需要访问 MySQL 引擎之外的 MySQL 数据文件或编写用户定义的函数。

* * *

**Q：**你知道mysql索引存放在文件系统的什么位置吗？

文件系统中索引的位置将取决于表的存储引擎。对于 MyISAM 引擎，索引存储在 datadir/database 目录下的 .MYI 文件中；InnoDB 索引存储在 InnoDB 管理的表空间文件中。f innodb_file_per_table 变量在创建表时设置，innodb_data_home_dir/database 子目录下的每个表都会有一个单独的 .ibd 文件。

**问：**你知道格式是什么吗？

每个存储引擎的存储格式不同，MyISAM、InnoDB等，也取决于版本。就 MySQL 对存储引擎的要求而言，我对数据的存储方式有一定的了解。有关内部的详细信息将特定于每个引擎。

**问：**是什么让它不切实际？

这是不切实际的，因为它需要大量工作，并且将取决于未来可能发生变化的存储引擎的细节。定义问题空间并编写返回所需内容的 SQL 语句会更加实用。

正如 Quassnoi 在他对您的问题的评论中指出的那样，您完全不清楚您通过创建 UDF 或从 MySQL 外部访问 MySQL 索引来解决什么特定问题。我确信 Quassnoi 将有一个很好的方法来完成您需要的高效 SQL 语句。

# javascript - Facebook 页面选项卡流体高度

> ID：13317774
> 
> 赞同：0
> 
> 时间：2012-11-09T23:58:02.357
> 
> 标签：javascript, facebook, facebook-javascript-sdk

基本上我希望包含我的应用程序的 iFrame 随着内容的变化而扩展和收缩。

我知道这个问题已经被问了一百万次了，但是 Facebook 已经改变了他们的 JS API 一大堆，因此之前对这个问题的回答不再有效。

我已经尝试`FB.Canvas.setSize();`过其他答案的建议，但无济于事。有谁知道此时实际有效的方法？

我的应用可以在这里找到以供参考： http: [//www.facebook.com/SandboxAppPage/app_441443775903676](http://www.facebook.com/SandboxAppPage/app_441443775903676)

**编辑：**我什至无法让一个基本的骨架应用程序正常运行和调整大小。我的基本 HTML 骨架（没有 html、其他 js 库、图像等）仍然固定在默认的 800 像素高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T08:12:30.107

你试过[FB.Canvas.setAutoGrow](https://developers.facebook.com/docs/reference/javascript/FB.Canvas.setAutoGrow/)吗？它应该可以解决您的问题。此功能仅在应用设置中将 Canvas Height 设置为 Fixed at 800px 时有效。

```
FB.Canvas.setAutoGrow(1000); 
```

在这里，该函数将每隔 1000 毫秒调用一次，并根据您的内容调整窗口大小。

# iphone - 在 iPhone 上使用私有 API 检查和切换飞行模式

> ID：13317776
> 
> 赞同：2
> 
> 时间：2012-11-09T23:58:28.580
> 
> 标签：iphone, private-methods, airplane

有谁知道如何使用私有 API 检查和切换飞行模式？（不，SCNetworkReachability 不够好，是的，我很高兴使用将来可能会中断的私有 API。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T00:16:11.907

您可能会发现此链接很有趣：

[iOS 6 运行时标头搜索“飞机”](https://github.com/search?q=repo%3anst/iOS-Runtime-Headers%20airplane&repo=&langOverride=&start_value=1&type=Code&language=)

查看[第二次命中](https://github.com/nst/iOS-Runtime-Headers/blob/3686717e107fa36a990fac20c30da2da9a25b698/PrivateFrameworks/AppSupport.framework/RadiosPreferences.h)：

```
// RadiosPreferences.h

@class <RadiosPreferencesDelegate>;

@interface RadiosPreferences : NSObject  {
    struct __SCPreferences { } *_prefs;
    int _applySkipCount;
    <RadiosPreferencesDelegate> *_delegate;
    BOOL _isCachedAirplaneModeValid;
    BOOL _cachedAirplaneMode;
    BOOL notifyForExternalChangeOnly;
}

@property BOOL airplaneMode;
@property BOOL notifyForExternalChangeOnly;
@property <RadiosPreferencesDelegate> * delegate;

- (void)setAirplaneMode:(BOOL)arg1;
- (id)init;
- (void)setValue:(void*)arg1 forKey:(id)arg2;
- (void)dealloc;
- (void)synchronize;
- (void)setDelegate:(id)arg1;
- (id)delegate;
- (BOOL)airplaneMode;
- (void*)getValueForKey:(id)arg1;
- (void)refresh;
- (void)initializeSCPrefs:(id)arg1;
- (void)notifyTarget:(unsigned int)arg1;
- (void)setCallback:(int (*)())arg1 withContext:(struct { int x1; void *x2; int (*x3)(); int (*x4)(); int (*x5)(); }*)arg2;
- (void)setNotifyForExternalChangeOnly:(BOOL)arg1;
- (BOOL)notifyForExternalChangeOnly;

@end 
```

以下是如何使用这些结果的示例（来自该 GitHub 存储库的自述文件）：

```
NSBundle *b = [NSBundle bundleWithPath:@"/System/Library/PrivateFrameworks/GAIA.framework"];
BOOL success = [b load];

Class SKTelephonyController = NSClassFromString(@"SKTelephonyController");
id tc = [SKTelephonyController sharedInstance];

NSLog(@"-- myPhoneNumber: %@", [tc myPhoneNumber]);
NSLog(@"-- imei: %@", [tc imei]); 
```

# cakephp - CakePHP 2.2.3 set_error_handler() 需要参数 (ErrorHandler::handleError)

> ID：13317779
> 
> 赞同：0
> 
> 时间：2012-11-09T23:59:29.893
> 
> 标签：cakephp, cakephp-2.0

上传文件后，我得到了这个来自 cakes core 的问题，不知道该怎么做才能解决它？

```
Warning: set_error_handler() expects the argument (ErrorHandler::handleError) to be a valid callback in 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T00:35:37.390

发现问题。错误处理程序文件未上传。上传时出现了一些错误。

# android - Android NDK：自定义预构建步骤？

> ID：13317787
> 
> 赞同：3
> 
> 时间：2012-11-10T00:00:16.413
> 
> 标签：android, eclipse, android-ndk, makefile, custom-build-step

NDK 8b，Eclipse / Cygwin

我正在尝试向 Android.mk 添加自定义预构建步骤：

1) 对于源代码树中的每个 *.xyz 文件，运行生成相应 .h 和 .cpp 文件的自定义工具

2) 将 .cpp 文件添加到 LOCAL_SRC_FILES

我已经阅读[了这篇文章](https://stackoverflow.com/questions/12372500/how-to-run-custom-rule-in-android-mk-before-compilation "这个帖子")，但它并不是我想要的（它只适用于一个文件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:15:16.033

根据[http://www.gnu.org/software/make/manual/make.html](http://www.gnu.org/software/make/manual/make.html)你可以使用老式的后缀规则：

```
source_xyz_files = a.xyz b.xyz
.xyz.cpp: $(source_xyz_files)
    if test "`dirname $@`" != "."; then mkdir -p "`dirname $@`"; fi
    tool_to_create_cpp_and_h_from_xyz $< $@ $(patsubst %.cpp,%.h,$@)
LOCAL_SRC_FILES += $(patsubst %.xyz,%.cpp,$(source_xyz_files)) 
```

或模式规则：

```
generated_cpp_files = a.cpp b.cpp
$(generated_cpp_files) : %.cpp : %.xyz
    if test "`dirname $@`" != "."; then mkdir -p "`dirname $@`"; fi
    tool_to_create_cpp_and_h_from_xyz $< $@ $(patsubst %.cpp,%.h,$@)
LOCAL_SRC_FILES += $(generated_cpp_files) 
```

# google-maps - 在 Rails 应用程序中的 Google 地图上显示坐标

> ID：13317791
> 
> 赞同：0
> 
> 时间：2012-11-10T00:00:43.417
> 
> 标签：google-maps, rubygems, ruby-on-rails-3.2

**阶段**：

在 Rails 3.2 应用程序中，假设我有这个模型：

```
Point(id:integer, latitude:decimal, longitude:decimal, zoom:integer) 
```

使用脚手架生成器，它会生成一个包含 3 个文本字段的表单，如下所示：

```
<%= f.text_field :latitude %>
<%= f.text_field :longitude %>
<%= f.text_field :zoom %> 
```

我真的不想拥有这个。我更喜欢使用 Google Maps 地图并将其用于设置表单坐标并进行编辑。

我看到有很多使用Javascript的解决方案，但如果可以避免直接使用JS，它可能是一个不错的选择。

**问题**：

*   是帮助制作这个的宝石吗？
*   什么是好的实现？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:32:23.570

You won't be able to do this without JavaScript.

What you need to do is:

*   Add the google maps map to the page
*   Add a click listener on the map
    *   when the user clicks on the map (optionally place a marker and) get the lat/lng coordinates of the event, and use JS (maybe with the help of jQuery) to set your `:latitude` and `:longitude` form fields, as well as the current zoom level

# jsch - 使用 ssh 通过 jsch 连接到交换机

> ID：13317793
> 
> 赞同：2
> 
> 时间：2012-11-10T00:00:12.523
> 
> 标签：jsch

这是我第一次在这里提出问题，所以我不知道如何正确发布问题，但我会尽力而为。我在 java 中有 Jsch 库，但我不知道使用 ssh2 连接到交换机。您如何在会话中切换主机密钥？

我的代码有这样的东西......

```
private static final String user = "admin";
private static final String host = "172.16.13.3";
private static final Integer port = 22;
private static final String pass = "";

public static void main(String[] args) throws Exception{

    JSch jsch = new JSch();
    Session session = jsch.getSession(user, host, port);
        java.util.Properties config = new java.util.Properties();
        config.put("StrictHostKeyChecking", "no");
        session.setConfig(config);

    session.setPassword(pass);
    session.connect(); 
```

但是当它执行时，程序运行没有任何错误，但它永远不会连接到交换机....感谢您的帮助！

# cygwin - 无法在 Cygwin 上启动 HAProxy

> ID：13317797
> 
> 赞同：3
> 
> 时间：2012-11-10T00:02:24.260
> 
> 标签：cygwin, haproxy

我正在尝试在 Cygwin 上启动 HAProxy。当我这样做时，我得到以下响应：

```
$ /usr/local/sbin/haproxy -f /usr/local/sbin/haproxy.cfg
[ALERT] 313/180006 (4008) : cannot change UNIX socket ownership 
                           (/tmp/haproxy.socket). Aborting.
[ALERT] 313/180006 (4008) : [/usr/local/sbin/haproxy.main()] 
                            Some protocols failed to start 
                            their listeners! Exiting. 
```

看起来这是由于我的配置文件中的以下行，当我撕开它时它会启动：

```
stats socket /tmp/haproxy.socket uid haproxy mode 770 level admin 
```

整个配置：

```
global
log 127.0.0.1 local0 info
stats socket /tmp/haproxy.socket uid haproxy mode 770 level admin
maxconn 1000
daemon

defaults
log global
mode tcp
option tcplog
option dontlognull
retries 3
option redispatch
maxconn 1000
timeout connect 5s
timeout client 120s
timeout server 120s

listen rabbitmq_local_cluster 127.0.0.1:5555
mode tcp
balance roundrobin
server rabbit_0 127.0.0.1:5673 check inter 5000 rise 2 fall 3
server rabbit_1 127.0.0.1:5674 check inter 5000 rise 2 fall 3

listen private_monitoring 127.0.0.1:8100
mode http
option httplog
stats enable
stats uri /stats
stats refresh 5s 
```

任何想法将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T13:49:33.433

正如我所料，简单的答案。在有问题的行中引用了我的用户“haproxy”：

stats socket /tmp/haproxy.socket uid **haproxy** mode 770 level admin

在本地计算机上没有必要的权限。一旦设置好，它就可以正常启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:28:37.150

很高兴知道它仍然可以在 cygwin 上运行，这是什么版本的 haproxy？我不知道 Windows BTW 支持 UNIX 套接字。或者也许他们是通过命名管道模拟的？

# orchardcms - Orchard CMS 和用户组织的处理...？

> ID：13317799
> 
> 赞同：0
> 
> 时间：2012-11-10T00:03:12.463
> 
> 标签：orchardcms

我知道您在 Orchard 中拥有用户、角色和权限。但是，是否可以让组织高于用户？

非常感谢，

埃德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T02:14:02.657

如果你为它写一个模块，一切皆有可能。然而，并非开箱即用。

# sql - 如何在颠覆中回滚并同时清除历史？

> ID：13317800
> 
> 赞同：1
> 
> 时间：2012-11-10T00:03:28.667
> 
> 标签：sql, database, svn, tortoisesvn, visualsvn

我的 SVN 存储库包含用于不同项目的多个文件夹。*'Desktop program'*、*'iOS app'*、*'Web app'*等。所有修订条目都在它们之间共享（因为它在一个存储库下。修订#100 可能在*'iOS app'*文件夹中，修订#101 在*'Web app'*文件夹等）。

*我想要的是仅在其中一个*文件夹上回滚到早期版本。通常这是通过“反向”SVN 合并来完成的，因为 SVN 的工作是跟踪所有历史，甚至是糟糕的时期。然而我不想要那个。假设自修订版 #5 以来，我在*“iOS 应用程序”上提交了 20 次。*我想从历史中删除这些，我希望那个特定的文件夹返回到修订 #5。没有人应该再次能够检查这 20 个提交，因为它们“从未发生过”。这甚至可能吗？

我有两台不同的机器正在与 SVN 交互。具有 VisualSVN 的 Windows PC 和具有终端级别的 Subversion 的 Mac。我将感谢任何一个解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T00:46:51.637

从客户端来看，根本*没有办法*做到这一点。无论是命令行、Tortoise 还是任何其他客户端。

如果您有权访问拥有存储库的服务器帐户，那么就有一些机会 - 但它非常复杂，并且可能涉及非平凡的手动工作。

粗略地说，这些是步骤：

*   获取存储库 UUID - `svn info http://svnserver/svn/repo`- 查看 UUID 行
*   转储 svn 存储库：`svnadmin dump /path/to/repo > repo.dump`
*   编辑转储文件以排除提交

    a）要么打开它`vi`并删除你不想要的提交

    b）或使用`svndumpfilter`命令按路径过滤它们

*   创建新存储库并将修改后的存储库导入其中：

    `svnadmin create /path/to/repo2`

    `svnadmin load < repo.dump`

    `svnadmin setuuid /path/to/repo2 THE_ORIGINAL_UUID`

现在，检查 repo2 是否正常工作并且具有您期望的内容。如果是这样，您可以删除`repo`并重命名`repo2`-> `repo`。

请记住，手动更改转储文件非常容易出错，而且这些错误通常很难发现。做这样的事情通常是个坏主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T00:57:52.920

> 我想要的是仅在其中一个文件夹上回滚到早期版本。通常这是通过“反向”SVN 合并完成的

太糟糕了...为了将**WC-tree 的一部分**返回到*以前的修订版*中，您必须`cd SUBTREE-ROOT & svn up -r REVNO`（从 WC-root 提交此*修改后的 WC*将在 repo 中创建带有部分回滚树的新修订版）

> 没有人应该再次能够检查这 20 个提交，因为它们“从未发生过”

Cheated and rewritten history in SCM is **BAD IDEA**. And Subversion history is immutable, you have to change history using svnadmin tools and access-level, as @petr-kozelka wrote

# ios - 苹果拒绝了应用程序，因为它在未经用户许可的情况下传输 MAC 地址

> ID：13317801
> 
> 赞同：6
> 
> 时间：2012-11-10T00:03:32.887
> 
> 标签：ios, mac-address, rubymotion

我们有一个最近开发的应用程序被 Apple 拒绝了。这是他们的解释：

> 我们发现您的应用在收集用户的个人数据之前没有按照 App Store 审核指南的要求征得用户同意。
> 
> 具体来说，您的应用程序会在未经用户许可的情况下发送设备的 MAC 地址。您的应用还会在未经用户许可的情况下发送设备联系信息。
> 
> 要使用您的应用程序收集个人数据，您必须向用户明确他们的个人数据将被上传到您的服务器，并且您必须在数据上传之前获得用户的同意。
> 
> iOS 6 包含用于指定应用访问用户受保护数据的原因的新密钥。当显示访问提示时，这些键中指定的用途会显示在该对话框中。如果您的应用程序将传输受保护的用户数据，则访问请求中的使用字符串应明确告知用户，如果他们同意，他们的数据将上传到您的服务器。
> 
> 有关这些键的更多信息，请参阅信息属性列表键参考。

我们正在使用 RubyMotion 工具链，而不是在我们的应用程序的任何地方访问 MAC 地址。我们认为它可能是我们正在使用的 SDK 或 gem 之一。

宝石文件：

```
source :rubygems

gem 'bubble-wrap', :git => 'https://github.com/rubymotion/BubbleWrap.git'
gem 'teacup' 
gem 'rake'
gem "cocoapods", "0.13.0"
gem 'motion-cocoapods', "1.1.0"
gem 'motion-testflight'
gem 'motion-table'
gem "Parsistence"
gem 'formotion'
gem "ProMotion"
gem "motion-addressbook" 
```

唯一的外部 api 调用是[Parse.com](http://www.parse.com)和 testflight，因为我们同时使用这两个 SDK。

Parse 说他们不收集 MAC 地址，除非您特别这样做，否则 Testflight 不会。

我们也在使用这些可可豆荚：

> 'NSData+MD5摘要'
> 
> 'MBProgressHUD'
> 
> 'ASIHTTPRequest'
> 
> 'PHFRefreshControl'
> 
> 'JSONKit'

**问题：**这些 gem 或 Cocoapods 是否需要 MAC 地址？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-20T19:15:19.330

将 TestFlight 升级到最新的 SDK 以解决此问题。从他们的发行说明：

1.2.5 - 2013 年 5 月 1 日

删除了对 mac 地址的任何访问

添加了 AdSupport.framework 要求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T02:09:09.573

如果您想从您的设备中嗅探流量以查看正在发送的内容，请尝试使用[Charles](http://www.charlesproxy.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T00:11:20.423

我想试飞或 Parse 可以检索 MAC 地址，即使他们不发送它，Apple 也可能只是看到他们正在访问和发送一些东西。我假设这是因为如果这些库中的任何一个通过网络发送 MAC 地址的未加密版本，那将是非常糟糕的，所以也许 Apple 可以看到它的访问。您是否有机会在您的应用程序中使用广告网络？

# ruby-on-rails - 如何使用 cancan 保护 send_file 操作

> ID：13317803
> 
> 赞同：0
> 
> 时间：2012-11-10T00:03:37.847
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cancan, sendfile, x-sendfile

我似乎无法批准该`web_videos_display`操作的授权。我可以通过使用 使其工作，`skip_authorize_resource`但是任何用户都可以通过知道`:id`. 我需要访问`asset`“查看”文件。

感谢您对此进行调查。

### assets_controller.rb

```
...
class AssetsController < ApplicationController

  load_and_authorize_resource :team
  load_and_authorize_resource :through => :team

  # skip_authorize_resource :only => [:web_videos_display, ...]
  # skip_authorize_resource :team, :only => [:web_videos_display, ...]
  ...
  def web_videos_display
    # @asset = Asset.find(params[:id]) #loaded by cancan
    @file = "#{Rails.root}#{@asset.webVideos.last.file}"
    send_file @file, :disposition => 'inline', :x_sendfile=>true
  end
  ... 
```

### 路线.rb

```
 resources :teams, :path => '', :except => [:index] do
  ...
    resources :assets, :path => '' do
      ...
      get 'web_videos_display'
      ...
    end
  end 
```

### 显示.html.erb

```
...
<%= team_asset_web_videos_display_path(@team, @asset, :id => @asset.id, :team_id => @team.id) %>
... 
```

### 能力.rb

```
...
can :read, Team, :memberships => {:id => user.membership_ids}
can :manage, Asset, :team => { :id => user.team_ids }
can :web_videos_display, Asset, :team => { :id => user.team_ids }
... 
```

* * *

# 更新以回应@ryanb 评论

返回

```
1.9.2p318 :006 > ability.can?(:web_videos_display, asset)
  Team Load (0.2ms)  SELECT "teams".* FROM "teams" WHERE "teams"."id" = 1 LIMIT 1
 => true 
```

但

在开发模式下它仍然返回

```
Started GET "/video-pros/test-1/web_videos_display?id=10" for 127.0.0.1 at 2012-11-09 16:40:19 -0800
  Processing by AssetsController#web_videos_display as */*
  Parameters: {"id"=>"10", "team_id"=>"video-pros", "asset_id"=>"test-1"}
  Team Load (0.1ms)  SELECT "teams".* FROM "teams" WHERE "teams"."slug" = 'video-pros' LIMIT 1
  Team Load (0.2ms)  SELECT "teams".* FROM "teams" WHERE "teams"."admin_user_id" = 1 LIMIT 1
  CACHE (0.0ms)  SELECT "teams".* FROM "teams" WHERE "teams"."slug" = 'video-pros' LIMIT 1
Access denied on show #<Team id: 1, name: "Video Pros", email: nil, phone: nil, website: nil, slug: "video-pros", admin_user_id: 1, created_at: "2012-11-06 22:43:11", updated_at: "2012-11-06 22:43:11", payment_received: nil>
Redirected to http://0.0.0.0:3000/
Completed 302 Found in 73ms> 
```

谢谢瑞恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T00:15:48.040

`send_file`应该没有什么不同，因为授权发生在触发操作之前的 before_filter 中。据我所知，它看起来是正确的，所以可能还有其他事情发生。您是否尝试过此[调试](https://github.com/ryanb/cancan/wiki/Debugging-Abilities)页面？如果您在控制台中模仿控制器授权正在做什么，会发生什么？

```
user = User.first # fetch any user you want to test abilities on
team = Team.first # any model you want to test against
asset = team.assets.first
ability = Ability.new(user)
ability.can?(:show, team) # see if it allows access
ability.can?(:web_videos_display, asset) # see if it allows access 
```

*更新`:read`为`:show`团队的行动*

# cross-platform - 生成默认主机三元组

> ID：13317804
> 
> 赞同：1
> 
> 时间：2012-11-10T00:03:39.657
> 
> 标签：cross-platform, cross-compiling, autotools

如何检索正在编译的系统的主机三元组？

这个问题非常清楚，不需要更冗长，但 SO 坚持施加问题长度限制。对不起这个嗡嗡声。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T20:43:33.633

正如布雷特建议的那样（不知道他为什么不将其作为答案发布），`config.guess`脚本就是`autotools`这样做的。

# java - 突然：java.lang.NullPointerException，昨晚工作正常

> ID：13317806
> 
> 赞同：2
> 
> 时间：2012-11-10T00:03:49.587
> 
> 标签：java, swing, tcpclient

我制作了一个小程序，它在 tcp 套接字上侦听和发送行，并将接收到的信息附加到`JTextArea`. 我用它在没有打开游戏的情况下在 Minecraft 服务器上聊天。

昨晚我工作得很好，但是当我起床时，它就没有工作了。当我打开 netbeans 并运行它时，它给出了这个错误：

```
Exception in thread "main" java.lang.NullPointerException
    at com.xxx.mcchat.chat.main(chat.java:333) 
```

谁能解释什么是错的？

这是代码（[http://pastebin.com/FPNty0qf](http://pastebin.com/FPNty0qf)）：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.xxx.mcchat;

import java.io.*;
import java.net.*;
import net.sf.json.*;
import org.apache.commons.beanutils.*;
import org.apache.commons.collections.*;
import org.apache.commons.lang.*;
import net.sf.ezmorph.*;
import org.apache.commons.logging.*;
import java.awt.event.*;
import javax.swing.UIManager;
/**
 *
 * @author xxx
 */
public class chat extends javax.swing.JFrame {

    /**
     * Creates new form chat
     */

    public chat() {
        initComponents();
    }

    public void send(String user, String message){
        Socket socket = null;
        PrintWriter out = null;
        BufferedReader in = null;

        try {
            socket = new Socket("mc.xxx.net", 20060);
            out = new PrintWriter(socket.getOutputStream(), true);
            in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
        } catch (UnknownHostException e) {
            System.err.println("Don't know about host");
            System.exit(1);
        } catch (IOException e) {
            System.err.println("Couldn't get I/O for the connection");
            System.exit(1);
        }

        BufferedReader read = new BufferedReader(new InputStreamReader(System.in));

                //System.out.println(in.readLine()); //Uncomment to debug
        if(username != null){
            out.println("/api/call?method=broadcast&args="+"[\"§7[Web] §b"+username+"§7:§f "+message+"\"]"+"&key=f0e2ad47a9a43c783d2c54f396f655c9279829c8c69ae9f52934648098dec993");
            chatArea.append(username + ": " + message + "\n\r");
            if(autoscrollCheck.isSelected()){
                chatArea.setCaretPosition(chatArea.getText().length() - 1);
            }
        }else{
            chatArea.append("You must set your username!!" + "\n\r");
            if(autoscrollCheck.isSelected()){
                chatArea.setCaretPosition(chatArea.getText().length() - 1);
            }

        }
    }

    /**
     * This method is called from within the constructor to initialize the form. WARNING: Do NOT modify this code. The content of this method is always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                       
    private void initComponents() {

        jCheckBoxMenuItem1 = new javax.swing.JCheckBoxMenuItem();
        jToggleButton1 = new javax.swing.JToggleButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        chatArea = new javax.swing.JTextArea();
        input = new javax.swing.JTextField();
        send = new javax.swing.JButton();
        user = new javax.swing.JTextField();
        userset = new javax.swing.JButton();
        autoscrollCheck = new javax.swing.JCheckBox();
        jLabel1 = new javax.swing.JLabel();

        jCheckBoxMenuItem1.setSelected(true);
        jCheckBoxMenuItem1.setText("jCheckBoxMenuItem1");

        jToggleButton1.setText("jToggleButton1");

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Minecraft Chat");
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowOpened(java.awt.event.WindowEvent evt) {
                formWindowOpened(evt);
            }
            public void windowClosing(java.awt.event.WindowEvent evt) {
                formWindowClosing(evt);
            }
        });

        chatArea.setEditable(false);
        chatArea.setBackground(new java.awt.Color(0, 0, 0));
        chatArea.setColumns(20);
        chatArea.setFont(new java.awt.Font("Consolas", 0, 14)); // NOI18N
        chatArea.setForeground(new java.awt.Color(255, 255, 255));
        chatArea.setLineWrap(true);
        chatArea.setRows(5);
        jScrollPane1.setViewportView(chatArea);

        input.setToolTipText("Enter message here");
        input.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                inputKeyPressed(evt);
            }
        });

        send.setText("Send");
        send.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                sendActionPerformed(evt);
            }
        });

        user.setToolTipText("");
        user.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                userActionPerformed(evt);
            }
        });
        user.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                userKeyPressed(evt);
            }
        });

        userset.setText("Set");
        userset.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                usersetActionPerformed(evt);
            }
        });

        autoscrollCheck.setSelected(true);
        autoscrollCheck.setText("Auto Scroll");
        autoscrollCheck.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                autoscrollCheckActionPerformed(evt);
            }
        });

        jLabel1.setText("Enter Username:");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(10, 10, 10)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                        .addComponent(jLabel1)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(user, javax.swing.GroupLayout.PREFERRED_SIZE, 218, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(userset)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(autoscrollCheck))
                    .addComponent(jScrollPane1)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                        .addComponent(input, javax.swing.GroupLayout.PREFERRED_SIZE, 649, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(send)))
                .addGap(10, 10, 10))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(11, 11, 11)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(1, 1, 1)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(user, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jLabel1)))
                    .addComponent(userset)
                    .addComponent(autoscrollCheck))
                .addGap(6, 6, 6)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 316, Short.MAX_VALUE)
                .addGap(6, 6, 6)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(1, 1, 1)
                        .addComponent(input, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(send))
                .addGap(11, 11, 11))
        );

        pack();
    }// </editor-fold>                      

    String username = null;
    private void inputKeyPressed(java.awt.event.KeyEvent evt) {                              
           int key = evt.getKeyCode();
           if (key == KeyEvent.VK_ENTER) {  
                send(username, input.getText());
                input.setText("");
              }
    }                               

    private void sendActionPerformed(java.awt.event.ActionEvent evt) {                                   
        send(username, input.getText());
        input.setText("");
    }                                   

    private void usersetActionPerformed(java.awt.event.ActionEvent evt) {                                       
        if(username == null){
                    if(!"".equals(user.getText())){
                        username = user.getText();
                        chatArea.append("Username set!"+"\n\r");
                        if(autoscrollCheck.isSelected()){
                            chatArea.setCaretPosition(chatArea.getText().length() - 1);
                        }
                    }else{
                        chatArea.append("Username can not be blank."+"\n\r");
                        if(autoscrollCheck.isSelected()){
                            chatArea.setCaretPosition(chatArea.getText().length() - 1);
                        }
                    }
                }else{
                    send(username, "§7changed name to " + user.getText());
                    username = user.getText();
                }
    }                                      

    private void userActionPerformed(java.awt.event.ActionEvent evt) {                                   
        // TODO add your handling code here:
    }                                   

    private void userKeyPressed(java.awt.event.KeyEvent evt) {                              
           int key = evt.getKeyCode();
           if (key == KeyEvent.VK_ENTER) {  
                if(username == null){
                    if(!"".equals(user.getText())){
                        username = user.getText();
                        chatArea.append("Username set!"+"\n\r");
                        if(autoscrollCheck.isSelected()){
                            chatArea.setCaretPosition(chatArea.getText().length() - 1);
                        }
                    }else{
                        chatArea.append("Username can not be blank."+"\n\r");
                        if(autoscrollCheck.isSelected()){
                            chatArea.setCaretPosition(chatArea.getText().length() - 1);
                        }
                    }
                }else{
                    send(username, "§7changed name to " + user.getText());
                    username = user.getText();
                }
              }
    }                              

    private void formWindowClosing(java.awt.event.WindowEvent evt) {                                   

    }                                 

    private void formWindowOpened(java.awt.event.WindowEvent evt) {                               
        // TODO add your handling code here:
    }                                

    private void autoscrollCheckActionPerformed(java.awt.event.ActionEvent evt) {                                               
        // TODO add your handling code here:
    }                                              

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) throws IOException {

        /* Set the system look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            javax.swing.UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(chat.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(chat.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(chat.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(chat.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new chat().setVisible(true);
            }
        });
        Socket socket = null;
        PrintWriter out = null;
        BufferedReader in = null;

        try {
            socket = new Socket("mc.xxx.net", 20060);
            out = new PrintWriter(socket.getOutputStream(), true);
            in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
        } catch (UnknownHostException e) {
            System.err.println("Don't know about host");
            System.exit(1);
        } catch (IOException e) {
            System.err.println("Couldn't get I/O for the connection");
            System.exit(1);
        }

        BufferedReader read = new BufferedReader(new InputStreamReader(System.in));

                //System.out.println(in.readLine()); //Uncomment to debug

        out.println("/api/subscribe?source=chat&key=1e287587f5d1d45255f4708467eeaf8a71085f9ccfd8a354523d233cf5a77be4&show_previous=true");
        out.println("/api/subscribe?source=connections&key=e410592b70c0288654e6c1040edb0f21811dcb3f2ee11051163f36be9be00788&show_previous=false");

        while(true){
            String jsonString = in.readLine();
            JSONObject obj = JSONObject.fromObject(jsonString); 
            JSONObject success = obj.getJSONObject("success");
            if(success.get("message") != null){
                chatArea.append("<" + success.get("player") + "> " + success.get("message") + "\n\r");
                if(autoscrollCheck.isSelected()){
                    chatArea.setCaretPosition(chatArea.getText().length() - 1);
                }
            }else if (success.get("action") != null){
                chatArea.append(success.get("player") + " " + success.get("action") + "\n\r");
                if(autoscrollCheck.isSelected()){
                    chatArea.setCaretPosition(chatArea.getText().length() - 1);
                }
            }
        }
    }

    // Variables declaration - do not modify                     
    public static javax.swing.JCheckBox autoscrollCheck;
    public static javax.swing.JTextArea chatArea;
    private javax.swing.JTextField input;
    private javax.swing.JCheckBoxMenuItem jCheckBoxMenuItem1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JToggleButton jToggleButton1;
    private javax.swing.JButton send;
    private javax.swing.JTextField user;
    private javax.swing.JButton userset;
    // End of variables declaration                

} 
```

（PS 请不要生气，因为我正在使用 GUI 生成器，这是我的第一个程序，我保证我会学习手工）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T00:25:02.430

唯一可以`null`在第 333 行的是`chatArea`. （如果`success`是`null`，它会在第 332 行的 if 语句中引发异常。）正如其他人所建议的，您可能有一个竞争条件，在到达第 333 行之前它没有被初始化。

修复它的正确方法是将调用包含`chatArea`在调用中`SwingUtilities.invokeLater`：

```
final JSONObject success = obj.getJSONObject("success");
SwingUtilities.invokeLater(new Runnable() {
    public void run() {
        if (success.get("message") != null) {
            chatArea.append("<" + success.get("player") + "> " + success.get("message") + "\n\r");
            if (autoscrollCheck.isSelected()) {
                chatArea.setCaretPosition(chatArea.getText().length() - 1);
            }
        } else if (success.get("action") != null) {
            chatArea.append(success.get("player") + " " + success.get("action") + "\n\r");
            if (autoscrollCheck.isSelected()) {
                chatArea.setCaretPosition(chatArea.getText().length() - 1);
            }
        }
    }
}); 
```

每当您对 Swing 组件进行更改时，都应该在事件调度线程中调用它。更重要的是，由于 EDT 是单线程的、基于队列的执行器，这保证会等到您之前提交的可运行对象完成，所以`chatArea`肯定会设置。

另一个注意事项：通常将呼叫包装在呼叫中也是`UIManager`一种好习惯`invokeLater`。

**编辑：**我只想更清楚地了解您应该始终在`invokeLater`通话中包含什么内容：

*   构建 Swing 组件
*   更改 Swing 组件的属性
*   修改一个 Swing 组件的数据模型（不一定要*获取*数据，只是告诉关心它的组件发生了变化，比如触发事件，需要在 EDT 上发生）
*   修改`UIManager`属性，包括设置外观或修改其键的值
*   实例化外观
*   实例化子类`ComponentUI`
*   在容器中添加和删除组件

不需要包装的东西：

*   ~~更改尚未显示的组件的属性~~根据 Robin 在评论中的说法，这仍然需要在 EDT 上进行。
*   来电`repaint`
*   致电`validate`，或`invalidate`（我认为，我需要对此进行确认）

执行所有这些操作，任何时候切换到新的外观和感觉，在 EDT 上没有调用的东西都不会有任何问题。

长话短说，Swing 不是线程安全的，因此您应该始终从事件调度线程调用 Swing 组件方法。

另外，我欢迎对我可能忘记的事情的清单提出任何建议。

以下是一些描述 Swing 中的线程的资源：

*   [Java SE 6`javax.swing`文档](http://docs.oracle.com/javase/6/docs/api/javax/swing/package-summary.html#threading)
*   [关于 Swing 并发的 Java 小道](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)
*   [关于将 Swing 设为单线程的决定的旧博客文章](http://weblogs.java.net/blog/kgh/archive/2004/10/multithreaded_t.html)（以防您好奇）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T00:16:21.337

问题是您很容易在数据`static`和非`static`数据之间切换。最初，程序运行`main()`( `static`)。其中，您参考`chatArea`（第 333 行，也`static`）。但是，`chatArea`仅在调用(non- )*时*设置，这发生在构造函数 (non- ) 中。这并不总是在函数的其余部分之前调用。`initComponents()``static``static`

根据您的`invokeLater`方法，您应该将与聊天程序相关的所有内容（位于*之后* `invokeLater`）移动到构造函数（或某些*不是* `static`的方法）中。

基本上，唯一应该`static`是你的`main()`方法。其余的不应该`static`。如果有帮助，请将事物分成一个新类，您可以从中引用`main()`；这将帮助您初始化程序，*然后*运行所有与聊天相关的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T00:13:18.440

这可能是一种竞争条件，它有时会起作用。不能保证在主线程到达第 333 行时初始化该变量`chatArea`。这是由于在此`invokeLater()`之前通过某些行延迟了 GUI 的初始化：

```
java.awt.EventQueue.invokeLater(new Runnable() {
    @Override
    public void run() {
        new chat().setVisible(true);
    }
}); 
```

您需要在这些线程之间进行一些同步，或者，什么也应该起作用，只需在主线程中初始化 GUI：

```
final chat chatObject = new chat();
java.awt.EventQueue.invokeLater(new Runnable() {
    @Override
    public void run() {
        chatObject.setVisible(true);
    }
}); 
```

# php - ZEND Gdata 未捕获异常

> ID：13317810
> 
> 赞同：0
> 
> 时间：2012-11-10T00:04:13.360
> 
> 标签：php, google-docs-api, zend-framework2, google-spreadsheet-api

最近重建了 Apache，之后 G Data API 停止工作，这是我得到的错误：

> 致命错误：在 /home/location/ZendGdata-1.7.1/library/Zend/Gdata/App.php:720 中包含消息“DOMDocument 无法解析 XML：”的未捕获异常“Zend_Gdata_App_Exception” 堆栈跟踪：#0 /home/location/ ZendGdata-1.7.1/library/Zend/Gdata/App.php(688): Zend_Gdata_App::importString('importUrl('http://spreadsh...', 'Zend_Gdata_Spre...') #2 /home/ location/ZendGdata-1.7.1/library/Zend/Gdata.php(149): Zend_Gdata_App->getFeed('http://spreadsh...', 'Zend_Gdata_Spre...') #3 /home/location/ZendGdata -1.7.1/library/Zend/Gdata/Spreadsheets.php(141): Zend_Gdata->getFeed('http://spreadsh...', 'Zend_Gdata_Spre...') #4 /home/location/auto- post2gdoc.php(41): Zend_Gdata_Spreadsheets->getSpreadsheetFeed() #5 {main} 在第 720 行的 /home/location/ZendGdata-1.7.1/library/Zend/Gdata/App.php 中抛出

新版本具有以下 dom 配置：

```
dom
DOM/XML enabled
DOM/XML API Version 20031129
libxml Version  2.7.8
HTML Support    enabled
XPath Support   enabled
XPointer Support    enabled
Schema Support  enabled
RelaxNG Support enabled 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T00:32:58.353

下载 Zend_Gdata 的最新版本[-](http://framework.zend.com/downloads/latest#ZF1) 1.12.0 我在使用分析 API 时遇到了一些问题，原因是 Google 关闭了较旧的 API 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T20:00:56.180

原来magicquotes是罪魁祸首！

# .net - 超出最大可命名字符数

> ID：13317812
> 
> 赞同：0
> 
> 时间：2012-11-10T00:04:28.533
> 
> 标签：.net, wcf, wcf-binding

我遇到了最大可命名字符计数配额的问题，我在这里遵循了几个答案，它解决了一段时间的问题，但现在我遇到了同样的问题。

我的服务器端配置如下：

```
<system.serviceModel>
      <bindings>
        <netTcpBinding>
          <binding name="GenericBinding" maxBufferPoolSize="2147483647" maxBufferSize="2147483647"
                   maxReceivedMessageSize="2147483647">

            <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647"
                          maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
            <security mode="None" />
          </binding>
        </netTcpBinding>
      </bindings>
    <behaviors>
            <serviceBehaviors>
                    <behavior>
                            <serviceMetadata httpGetEnabled="false" />
                            <serviceDebug includeExceptionDetailInFaults="true" />
                            <dataContractSerializer maxItemsInObjectGraph="1000000" />
                    </behavior>
            </serviceBehaviors>
    </behaviors>
    <services>
            <service name="REMWCF.RemWCFSvc">
              <endpoint address="" binding="netTcpBinding" contract="REMWCF.IRemWCFSvc" bindingConfiguration="GenericBinding" />
              <endpoint address="mex" binding="mexTcpBinding" contract="IMetadataExchange" />
              <host>
                <baseAddresses>
                  <add baseAddress="net.tcp://localhost:9081/RemWCFSvc" />
                </baseAddresses>
              </host>
            </service>
    </services>
  </system.serviceModel> 
```

我在 devenv 配置上也有相同的 tcp 绑定。

我是否已达到支持的合同限制？有没有办法关闭该配额？

编辑

错误信息：

> 错误：无法从 net.tcp://localhost:9081/RemWCFSvc/mex 获取元数据 如果这是您有权访问的 Windows (R) Communication Foundation 服务，请检查您是否已在指定地址启用元数据发布。有关启用元数据发布的帮助，请参阅位于 [http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata的 MSDN 文档](http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata)Exchange 错误 URI：net.tcp://localhost:9081/RemWCFSvc/mex 元数据包含无法解析的引用：“net.tcp://localhost:9081/RemWCFSvc/mex”。XML 文档中存在错误。读取 XML 数据时已超出最大可命名字符计数配额 (16384)。nametable 是一种数据结构，用于存储在 XML 处理过程中遇到的字符串 - 具有不重复元素名称、属性名称和属性值的长 XML 文档可能会触发此配额。可以通过更改创建 XML 阅读器时使用的 XmlDictionaryReaderQuotas 对象的 MaxNameTableCharCount 属性来增加此配额。

尝试运行 WCF（托管在 Windows 服务应用程序中）时出现该错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T04:57:14.557

这是正确的网络配置。您需要将 metadataenabled 设置为 true，并且您还没有定义行为名称。试试这个配置。

```
<system.serviceModel>
      <bindings>
        <netTcpBinding>
          <binding name="GenericBinding" maxBufferPoolSize="2147483647" maxBufferSize="2147483647"
                   maxReceivedMessageSize="2147483647">

            <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647"
                          maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
            <security mode="None" />
          </binding>
        </netTcpBinding>
      </bindings>
  <behaviors>
    <serviceBehaviors>
      <behavior name="SilverlightWCFLargeDataApplication">
        <serviceMetadata httpGetEnabled="true"/>
        <serviceDebug includeExceptionDetailInFaults="false"/>
        <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
      </behavior>

    </serviceBehaviors>
    <endpointBehaviors>
      <behavior name="SilverlightWCFLargeDataApplication">
        <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
      </behavior>
    </endpointBehaviors>
  </behaviors>
    <services>
            <service name="REMWCF.RemWCFSvc" behaviorConfiguration="SilverlightWCFLargeDataApplication">
              <endpoint address="" behaviorConfiguration="SilverlightWCFLargeDataApplication" binding="netTcpBinding" contract="REMWCF.IRemWCFSvc" bindingConfiguration="GenericBinding" />
                <host>
                <baseAddresses>
                  <add baseAddress="net.tcp://localhost:9081/RemWCFSvc" />
                </baseAddresses>
              </host>
            </service>
    </services>
  </system.serviceModel> 
```

# c++ - 试图用 boost 编译一个程序，它需要 libboost_system-vc90-mt-1_38.lib 而它应该需要 libboost_system-vc100-mt-1_38.lib

> ID：13317813
> 
> 赞同：1
> 
> 时间：2012-11-10T00:04:34.210
> 
> 标签：c++, boost

我正在使用针对 64 位构建的 v100 平台工具集使用 VS2010。当我编译时，它似乎想要 vc90-X lib 文件而不是它应该寻找的 vc100-X 文件。我不确定什么代码甚至告诉它要查找哪些 lib 文件，我如何告诉它查找我拥有的文件？

我假设我不应该为旧版本的编译器构建 vc90 文件。

# java - JButton改变图像并保持大小

> ID：13317820
> 
> 赞同：1
> 
> 时间：2012-11-10T00:05:44.387
> 
> 标签：java, image, jbutton, imageicon

实际上，我已经知道如何更改按钮中的图像，但问题在于尺寸。

我更改了新图标，但我想保留大小，但此更改请对此提出一些建议。

我试图在更改图像以设置它之前获取按钮的尺寸，但尺寸不会缓存，并且在视觉上不会改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T00:09:50.827

那是因为按钮使用了一个固定大小的图标。如果您想在 Java 中执行此操作，则必须

*   `.getImage()`从您的 ImageIcon 对象或其他地方
*   做一个新的`BufferedImage`
*   将图像的缩放版本绘制到`BufferedImage`（具有您想要的大小）
*   `ImageIcon`使用新图像制作新图像
*   将其发送`ImageIcon`到您的按钮

前三个步骤听起来很棘手，但还不错。这是一种帮助您入门的方法：

```
/**
 * Gets a scaled version of an image.
 * 
 * @param original0 original Image
 * @param w0 int new width
 * @param h0 int new height
 * @return {@link java.awt.Image}
 */
public Image getImage(Image original0, int w0, int h0) {
    // Check for sizes less than 1
    w0 = (w0 < 1) ? 1 : w0;
    h0 = (h0 < 1) ? 1 : h0;

    // The new scaled image (empty for now.)
    // Uses BufferedImage to support scaling and rendering.
    final BufferedImage scaled = new BufferedImage(w0, h0, BufferedImage.TYPE_INT_ARGB);

    // Create a canvas to draw with, in the new image.
    final Graphics2D g2d = scaled.createGraphics();

    // Try to prevent aliasing (if your image doesn't look good, read more about RenderingHints, they're not too hard)
    g2d.setRenderingHint(RenderingHints.KEY_INTERPOLATION, RenderingHints.VALUE_INTERPOLATION_BILINEAR);

    // Use the canvas to draw the scaled version into the empty BufferedImage
    g2d.drawImage(original0, 0, 0, w0, h0, 0, 0, original0.getWidth(null), original.getHeight(null), null);

    // Drawing is finished, no need for canvas anymore
    g2d.dispose();

    // Done!
    return scaled;
} 
```

但是，最好改为调整外部图标文件的大小，而不是给您的应用程序带来额外的工作。

# magento - 重组 Magento 层级定价 1.7

> ID：13317823
> 
> 赞同：1
> 
> 时间：2012-11-10T00:06:13.033
> 
> 标签：magento

是否可以在 magento 中更改层级定价的数学。例如，如果您将数量设置为 3，那么这三个的总和将为 7.98 美元。当我将它设置为 3 时，它乘以 7.98 美元，总计 23.94 美元。我把它作为批发商出售……寻找某种解决方案。

# image-processing - imagemagick 在 gif 到 jpg 列表转换中留下工件

> ID：13317825
> 
> 赞同：3
> 
> 时间：2012-11-10T00:06:47.397
> 
> 标签：image-processing, imagemagick, rmagick

ImageMagick 将 gif 拆分为 jpg，但其中一些具有白色像素，而另一些则没有。

```
convert -strip tree.gif tree.jpg 
```

将 gif 拆分为 86 个 jpg。这里是#68 和#69。

#68

![在此处输入图像描述](../Images/0338a71da70c270f03c771aae616d677.png)

和#69

![在此处输入图像描述](../Images/275228120558b1577dc0723b83defeda.png)

和有问题的gif：

![http://i.stack.imgur.com/yTBnJ.gif](../Images/33db037aff065578c34baeac62a3d17a.png)

大约 1/3 有类似的编码问题。

```
convert -version
Version: ImageMagick 6.6.9-7 2012-08-17 Q16 http://www.imagemagick.org
Copyright: Copyright (C) 1999-2011 ImageMagick Studio LLC
Features: OpenMP   

uname -a
Linux paul-Pangolin-Performance 3.2.0-23-generic #36-Ubuntu SMP Tue Apr 10 20:39:51 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T00:14:07.737

在动画 GIF 图像中，每个新帧都绘制在前一帧之上，这意味着与前一帧相同的任何像素都可以用透明像素表示。（实际上，这仅适用于“Dispose None”动画，但这就是您在这里所拥有的。有关三种处理方法的详细信息，请参见[此处。）](http://www.imagemagick.org/Usage/anim_basics/#none)

动画 GIF 优化器工具利用了这一点，通过寻找可以转换为透明的长时间运行的像素（因此可以更有效地压缩它们）。所以，这就是为什么原始图像中可能有透明像素的原因。

当这些帧转换为 JPG 时，透明像素被转换为背景颜色，白色。

有关如何修复它的说明，请参见[此处](http://www.imagemagick.org/Usage/anim_basics/#types)- 您首先要将“叠加动画”转换为“合并动画”，然后可以将其转换为一系列 JPG 文件。它应该看起来像这样：

```
convert tree.gif -coalesce -set dispose previous tree2.gif 
```

然后验证动画看起来是否相同，然后：

```
convert -strip tree2.gif tree.jpg 
```

我还没有查看从那里链接的[gif_anim_montage](http://www.imagemagick.org/Usage/scripts/gif_anim_montage)脚本，它生成了所有漂亮的逐帧图像。我猜它会有效地做同样的事情（加上更多的东西），但也许它有一些巧妙的技巧可以帮助你，所以我来看看。

PS，您确定要输出 JPG 而不是 PNG，甚至 GIF 吗？JPG 保证会丢失质量，而 PNG 保证不会。而且，考虑到源数据（256 色 GIF 图像），PNG 的压缩效果可能至少一样好，甚至更好。快速测试显示它是 1980K 与默认设置下的 1916K，并且通过一些微不足道的优化，PNG 降至 1888K。

# ios - UIScrollView 内的 UIVIew 反弹回来

> ID：13317829
> 
> 赞同：3
> 
> 时间：2012-11-10T00:07:39.477
> 
> 标签：ios, xcode, uiscrollview

我的应用程序适用于 iPad，使用带有两个场景的 Storyboard。在一个场景中，我有一个包含 UIVIew 的 UIScrollView。它会滚动，但会立即弹回，使自己毫无用处。UIScrollView 的大小为 768x590；UIView 的大小为 768x1590；UIScrollView 的 ContentSize 为 768x590。这是 UIScrollView 设置的图像： ![在此处输入图像描述](../Images/c109758a247a9b63585279772d6ea61b.png)

（在过去的 6 个小时里，我查看了 SO 和 Google，尝试了很多东西，但没有任何效果。我也做了几次 CMD + Option + K (Clean)，但这也没有帮助。

为什么它不能正确滚动？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T21:39:10.687

找到对我有用的东西！

> 当您将视图嵌入到 InterfaceBuilder 中的 UIScrollView 中时，会自动设置一个约束。如果您的视图比纵向屏幕“长”，则它根本不会滚动。
> 
> 但是如果你旋转屏幕，你会注意到滚动的能力。
> 
> 要让 UIScrollView 进入 AutoLayout，请查看您的约束。
> 
> 找到“垂直空间 - 滚动视图 - 视图”并将其从“恒定”设置为“自动” - 为我修复了所有问题。

感谢您的帮助...我很感激。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T07:01:19.223

您的 scrollView 高度小于 uiview ，这是您的 scrollview 情况下的子视图，并且要完全滚动它，您必须将您的**scrollview contentSize 高度**设置 为大于您在其中滚动的视图的高度，请检查一下观点。

# java - Spring Roo DataOnDemand getNewTransientObject 方法的自定义？

> ID：13317832
> 
> 赞同：4
> 
> 时间：2012-11-10T00:08:10.120
> 
> 标签：java, integration-testing, spring-roo

在我们对 Spring Roo 托管实体的集成测试中，我们在使用 AspectJ 混合样式接口时遇到了问题，该接口不仅引入了具有默认实现的方法，而且还添加了一个使用 JSR 303 验证规则注释的属性。问题是 Spring Roo DataOnDemand 逻辑看不到这些字段，因此在 getNewTransientObject() 方法中没有考虑它们。

例如，以下（简单的）接口为每个实现“Keyed”接口的实体添加了一个“key”字段：

```
import javax.persistence.Column;
import javax.validation.constraints.NotNull;
import javax.validation.constraints.Size;

public interface Keyed {

    public String getKey();

    public void setKey(String key);

    /**
     * AspectJ MixIn for any class which implements the interface. Provides a
     * default implementation using AspectJ. This is the style shown in
     * Manning's AspectJ in Action (2nd edition) for providing a default
     * implementation interface.
     * 
     * @author tgh
     */
    static aspect Impl {

        @NotNull
        @Column(name = "key", unique = true)
        @Size(min = 8, max = 12)
        private String Keyed.key;

        public void Keyed.setKey(String key) {
            this.key = key;
        }

        public String Keyed.getKey() {
            return this.key;
        }
    }
} 
```

这对我们来说实际上是一个已解决的问题。我们所做的是从 Spring Roo 创建的 AspectJ ITD (.aj) 文件中推入 getNewTransientObject() 方法，然后确保将属性设置为可接受的值。在测试类的 DataOnDemand.java 文件中，我们有以下片段。

```
public KeyedExampleA getNewTransientKeyedExampleA(int index) {
    KeyedExampleA obj = new KeyedExampleA();
    setDescription(obj, index);
    setListPrice(obj, index);
    setName(obj, index);

    // Deal with mix-in variables that Roo doesn't know about
    obj.setKey("KEY_" + index);

    return obj;
} 
```

让我对上述内容感到不舒服的是，我们没有在 DataOnDemand.java 文件中创建 setKey(obj, index) 方法，并且使用的样式与 Spring Roo 为 getNewTransientKeyedObject(int) 方法生成的样式相同。

是否值得为这种微不足道的情况创建 setKey(obj,index) 方法，或者我们应该在 getNewTransientObject() 方法中使用我们所做的 obj.setKey(value) 方法？

通过查看 Spring Roo 创建的 .aj 文件，我看不出它有什么不同，因为除了 getNewTransientObject() 方法之外，没有任何东西可以调用 setField(obj,index) 。而且由于 Spring Roo 并没有弄清楚我们是否引入了 mix-in 属性，所以它将来也可能不会关心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:07:45.950

我会编写 setKey() 方法只是为了保持一致性。但是你不这样做不会造成任何问题。

# python - 蟒蛇__repr__

> ID：13317834
> 
> 赞同：1
> 
> 时间：2012-11-10T00:08:10.370
> 
> 标签：python

我有一个类`__str__`并`__repr__`定义了：

```
class MyClass:
    def __init__(self, version):
        self.version = version
    def __repr__(self):
        return self.version

myObjs = {}
o = MyClass("1")
myObjs[o] = o
print myObjs 
```

哪个打印：

```
{1: 1} 
```

如何将 MyClass 对象作为值存储到字典而不是字符串表示形式？我本可以添加 getVersion()，但只是想知道是否有更优雅的方式。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T01:01:23.753

如评论中所述，字典正在存储对象。

```
class MyClass(object):
    def __init__(self, version):
        self.version = version
    def __repr__(self):
        return self.version

myObjs = {}
o = MyClass("1")
myObjs[o] = o
print type(o)                                                                   
print o.__class__                                                               
print myObjs                                                                    
print type(myObjs[o]) 
```

打印以下内容：

```
<class '__main__.MyClass'>
<class '__main__.MyClass'>
{1: 1}
<class '__main__.MyClass'> 
```

它以这种方式打印的原因是因为字典将`__repr__`其键和值的 用于其`__str__`和`__repr__`功能。您始终可以更改您的`__repr__`函数，以减少整数的歧义：

```
def __repr__(self):
    return '{0}({1})'.format(str(self.__class__.__name__), self.version) 
```

样本输出：

```
{MyClass(1): MyClass(1)} 
```

随意使用最适合您的格式。我还更改了您的类以从对象扩展以使其成为新样式类（它将语言中的类和类型结合在一起，并为类添加了其他功能（例如装饰器和超级函数））。除此以外：

```
print type(o) 
```

输出

```
<type 'instance'> 
```

# python - alt, az 坐标系中地平线的定义

> ID：13317835
> 
> 赞同：2
> 
> 时间：2012-11-10T00:08:28.527
> 
> 标签：python, pyephem

我有一个问题，观察者可能远高于海平面。给定`RA`和`Dec`，我试图确定这个观察者和这个目标的高度和方位角。我`Observer()`用于观察者和`FixedBody()`目标。

假设计算高度的地平线`pyephem`是实际的地球地平线（对于远高于海平面的观察者来说，天顶大于 90°）？或者是在观察者的海平面以上位置绘制的局部切线的地平线？从一些测试来看，似乎是后者，但我想确认这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:39:44.330

当有人访问海拔 2500 米的城镇时，城镇周围的土地通常也处于几乎相同的高度，所以，是的，地平线仍然与天顶成 90 度角。换句话说，地平线“与你同行”，因为你站在更高海拔的陆地上。您的情况听起来与以下 Stack Overflow 问题非常相似，我在那里汇总的答案也可能对您有用：

[Observer() 的结果似乎没有考虑 PyEphem 中的高程效应](https://stackoverflow.com/questions/7662543/results-for-observer-seemingly-not-accounting-for-elevation-effects-in-pyephem)

# mysql - 如何将查询结果插入到列mysql中

> ID：13317838
> 
> 赞同：1
> 
> 时间：2012-11-10T00:09:27.317
> 
> 标签：mysql, sql

好的，所以我执行此 mysql 命令：

```
SELECT CONCAT(SUBSTRING(Familenaam,1,4),SUBSTRING(Voornaam,1,4)) AS `Login` FROM tblusers 
```

这给了我 johny cowbell -_> johncowb (=loginname) 的结果，但这是在查询中。

我希望该结果出现在“登录”列中的表 tblusers 中。我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T00:11:11.517

你可以[**`INSERT INTO .. SELECT`**](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)这样使用：

```
INSERT INTO tblusers(login)
SELECT 
  CONCAT(SUBSTRING(Familenaam, 1 ,4), SUBSTRING(Voornaam,1,4)) 
FROM tblusers 
```

如果你想更新，你可以这样做：

```
UPDATE tblusers t1
INNER JOIN
(
   SELECT 
     userid,
     CONCAT(SUBSTRING(Familenaam, 1 ,4), SUBSTRING(Voornaam,1,4)) login
   FROM tblusers
) t2 ON t1.userid = t2.userid
SET t1.login = t2.login 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T00:11:01.953

你会这样做：

```
INSERT INTO tblusers (Login)
SELECT CONCAT(SUBSTRING(Familenaam,1,4),SUBSTRING(Voornaam,1,4)) AS `Login` FROM tblusers; 
```

这实质上是说“将我的 'SELECT' 查询的结果插入到表 'tblusers' 的 'login' 列中。

# java - 当“键”是两个整数时，如何输出 Java HashMap 键？

> ID：13317841
> 
> 赞同：3
> 
> 时间：2012-11-10T00:10:03.327
> 
> 标签：java

```
 package point;

    //an array arr is populated with random x,y points using MyPoint then
    public static void main(String[] args) throws IOException {
    HashMap<MyPoint,Integer> map = new HashMap<MyPoint,Integer>();
    Integer val =0;

    for(int i = 0; i < arr.length ; i++)
    {
        map.put(arr[i],val);
    }
    }

//second file.
package point;
public class MyPoint implements Comparable<MyPoint>{

private int x;
private int y;

public MyPoint(int x1, int y1) {
    x = x1;
    y = y1;
}

public boolean equals(Object p) {
    MyPoint p1;
    try {p1 = (MyPoint) p;}
    catch (ClassCastException ex) {return false;}
    return (x == p1.x) && (y == p1.y);
}

public int hashCode() {
    return ((y * 31) ^ x);
} 
```

这是我的代码 MyPoint 存储 xy 点。我正在使用此代码来获取唯一的 x,y 点集，没有重复。

我的问题是如何检索 MyPoint 中的 xy 值？这是使用 HashMap 过滤唯一 X、Y 点的有效方法吗？这也是我制作的HashCode。

我可以使用更好的 HashCode 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T00:21:46.917

一种简单的方法是为 x 和 y 创建 getter 方法：

```
public int getX(){
  return x;
}

public int getY(){
   return y;
} 
```

至于 HashMap，您可以让它从 X 坐标映射到具有该 X 坐标和唯一 Y 坐标 (HashMap) 的 MyPoints 列表。但是，如果您正在寻找的只是唯一性，您可以使用您的 .equals() 方法将每个 MyPoint 存储在 set/ArrayList 中并查看是否已经存在类似的点。希望有帮助！

# c++ - 在 OpenGL 中构建网格

> ID：13317843
> 
> 赞同：4
> 
> 时间：2012-11-10T00:10:09.833
> 
> 标签：c++, c, algorithm, opengl, mesh

我正在做一些 OpenGL (2.1) 测试，在尝试制作一个简单的立方体时，我想知道如何制作复杂的网格。对于我的立方体，我只是手动设置每个顶点`GL_TRIANGLES`。但我不知道如何在循环中做同样的事情。因为顶点的顺序，因为重复的顶点太多了！

我真的必须通过设置3个顶点“一次”（对于两个三角形）来做脸吗？这似乎太慢了。如何优化？

![在此处输入图像描述](../Images/791200dd42d57d15d8b937c6c17a457c.png)

制作/加载网格的技术是什么？

哦，我会很感激一些例子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T00:22:29.473

Jason Gregory 的《游戏引擎架构》一书为您的问题提供了答案。这是它所说的：

> 定义网格的最简单方法是复制三个一组的 vectices [...] 这种数据结构称为三角形列表。[...]您可能注意到许多顶点被重复，通常是多次重复[...]因此，大多数引擎使用称为索引三角形列表的更有效的数据结构

索引三角形列表背后的想法是将顶点存储在单独的顶点缓冲区中，并将索引存储在单独的索引缓冲区中。

同一章还建议使用三角条（`GL_TRIANGLE_STRIP`）和风扇（`GL_TRIANGLE_FAN`）

可以在[此处找到有关顶点缓冲区对象索引的教程](http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-9-vbo-indexing/)

# asp.net-mvc - ASP.NET MVC - 与 Windows 窗体集成

> ID：13317847
> 
> 赞同：1
> 
> 时间：2012-11-10T00:10:42.090
> 
> 标签：asp.net-mvc, winforms, asp.net-web-api

我使用 NHibernate 在 ASP.NET MVC 4 中开发了一个网站，现在我需要使用 Windows 窗体与该网站进行集成。

如何使用相同的用户执行身份验证系统？我应该使用什么技术？Web API、SOAP 还是休息？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T00:34:08.597

术语的小澄清：REST 是一种架构风格，SOAP 是一种用于交换信息的协议，而 Web API 是一种构建 HTTP 服务的框架。

此类问题的常见答案是“视情况而定”

在您继续进行技术选择之前，目前您的用户身份验证方法是否与您的业务/演示逻辑正确分离？

如果是这种情况，因为您使用的是 MVC 4，Web API 可能是阻力最小的路径，您可以将所有需要身份验证的功能放在 Web API 调用后面。你的控制器会打电话给他们。完成后，Windows 窗体应用程序可以以类似的方式使用数据。

# java - javax.naming.InitialContext 是线程安全的吗

> ID：13317848
> 
> 赞同：10
> 
> 时间：2012-11-10T00:11:01.777
> 
> 标签：java, thread-safety, jndi

目前我正在使用以下代码来查找普通 POJO 类的 EJB3 无状态会话 bean。（我们在 JEE5 中，所以我们不能在普通 POJO 类中注入无状态会话 Bean，我必须使用查找）

```
import javax.naming.Context;  
import javax.naming.InitialContext;  
import javax.naming.NamingException;  

import org.apache.log4j.Logger;  

public Object getEJB(String jndiName) {  

                logger.debug("WEBSPHERE EJB Lookup : " + jndiName);  
                String modifiedJndiName = "";  
                Hashtable<Object, Object> properties = new Hashtable<Object, Object>();  
                properties.put(Context.INITIAL_CONTEXT_FACTORY, "com.ibm.websphere.naming.WsnInitialContextFactory");  
                properties.put(Context.PROVIDER_URL, "iiop://localhost:2809");  
                try {  
                    Context context = new InitialContext(properties);  
                    logger.debug("WEBSPHERE EJB Lookup Modified JNDI Name: " + modifiedJndiName);  
                    return context.lookup("ejblocal:"+modifiedJndiName);  
                }catch (NamingException ne) {  
                    logger.debug("Naming Exception occurred :"+jndiName +">>>"+ne.getMessage());  
                    logger.error(ne.getMessage(), ne);  
                }  

                return null;  
            } 
```

那么 Context 对象是 ThredSafe 吗？我应该为每个调用创建 Context 对象[如此代码片段所示]，还是可以为所有线程重用 Context？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-10T00:14:15.033

javadoc中通常已经提到了有关线程安全的答案，只要相关。事实上，[`InitialContext`javadoc](http://docs.oracle.com/javase/6/docs/api/javax/naming/InitialContext.html)提到了以下内容：

> 实例`InitialContext`不与多个线程的并发访问同步。每个操作不同实例的多个线程`InitialContext`不需要同步。需要同时访问单个`InitialContext`实例的线程应该在它们之间同步并提供必要的锁定。

最后一句话证实了这一点：它不是线程安全的，并且每个线程同步是必要的。但是，在*您的特定*代码示例中，不需要同步，因为它是在方法本地范围内创建的（即它绝对不是线程之间共享的）。如果`InitialContext`在您的特定代码示例中是一个实例变量，那么您必须将`synchronized`关键字添加到`getEJB()`方法中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T01:10:30.007

但是如果我把这个方法放在一个单例类中，那么我可以使用 Context 作为类变量吗？就像下面的代码方法在一个单例`ServiceLocator`类中一样。

```
import java.util.HashMap;
import java.util.Hashtable;
import java.util.Map;
import java.util.Properties;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import javax.sql.DataSource;

public class ServiceLocator {
    static volatile ServiceLocator serviceLocator = null;

    Map supportedAppServerMap = null;

    @Override
    public Object getEJB(String jndiName) {

        logger.debug("WEBSPHERE EJB Lookup : " + jndiName);
        String modifiedJndiName = "";
        Hashtable<Object, Object> properties = new Hashtable<Object, Object>();
        properties.put(Context.INITIAL_CONTEXT_FACTORY, "com.ibm.websphere.naming.WsnInitialContextFactory");
        properties.put(Context.PROVIDER_URL, AMPPropertyUtil.getProperty("PROVIDER_URL"));
        try {
            Context context = new InitialContext(properties);
            if (null != jndiName && jndiName.indexOf(".") != -1)
                modifiedJndiName = jndiName.substring(jndiName.lastIndexOf(".") + 1);
            else
                modifiedJndiName = jndiName;
            logger.debug("WEBSPHERE EJB Lookup Modified JNDI Name: " + modifiedJndiName);
            return context.lookup("ejblocal:" + modifiedJndiName);
        } catch (NamingException ne) {
            logger.debug("Naming Exception occurred :" + jndiName + ">>>" + ne.getMessage());
            logger.error(ne.getMessage(), ne);
        }

        return null;
    }

    @Override
    public DataSource getDataSource() {
        Context context = null;
        final String dsName = AMPPropertyUtil.getProperty("dsName");
        Hashtable<Object, Object> properties = new Hashtable<Object, Object>();
        properties.put(Context.INITIAL_CONTEXT_FACTORY, "com.ibm.websphere.naming.WsnInitialContextFactory");
        properties.put(Context.PROVIDER_URL, AMPPropertyUtil.getProperty("PROVIDER_URL"));
        try {

            context = new InitialContext();
            return (DataSource) context.lookup("java:comp/env/" + dsName);

        } catch (NamingException e) {
            logger.error(e.getMessage(), e);
        }
        return null;
    }

    @Override
    public Object getResources(final String jndiName) {
        Context context = null;
        Hashtable<Object, Object> properties = new Hashtable<Object, Object>();
        properties.put(Context.INITIAL_CONTEXT_FACTORY, "com.ibm.websphere.naming.WsnInitialContextFactory");
        properties.put(Context.PROVIDER_URL, AMPPropertyUtil.getProperty("PROVIDER_URL"));
        try {
            context = new InitialContext();
            return context.lookup(jndiName);

        } catch (NamingException e) {
            logger.error(e.getMessage(), e);
        }
        return null;
    }

    public static ServiceLocator getInstance() {
        if (serviceLocator == null) {
            synchronized (ServiceLocator.class) {
                if (null == serviceLocator)
                    serviceLocator = new ServiceLocator();
            }
        }
        return serviceLocator;
    }

} 
```

# visual-c++ - 将 CString 转换为 LPTSTR 和 LPCTSTR

> ID：13317856
> 
> 赞同：0
> 
> 时间：2012-11-10T00:12:03.993
> 
> 标签：visual-c++, mfc, cstring

如果 CString 为 LPCTSTR (const)，则直接强制转换。我对么？

如果 CString 为 LPTSTR，则在使用 LPTSTR 变量的块之间调用 GetBuffer() 和 ReleaseBuffer()。我对么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T00:21:25.190

是的，您可以通过调用 CString 的转换运算符的转换获得底层字符数组的不可修改视图。

并且你可以通过调用GetBuffer()得到一个可写的缓冲区，写完之后你应该调用ReleaseBuffer()，并且想再次使用CString。

# android - RemoteViews setOnClickPendingIntent 没有为小部件 ListView 触发

> ID：13317861
> 
> 赞同：2
> 
> 时间：2012-11-10T00:12:46.687
> 
> 标签：android, android-widget

我有一个用于 Honeycomb 及更高版本的 ListView 小部件。

我在 onUpdate 的顶部有一个带有 setOnClickPendingIntents 的栏，它们都工作正常。

然而，在我的 RemoteViews getViewAt() 函数中的 ListViewAdapter 中，setOnClickPendingIntents 永远不会触发。

奇怪的是它在 ICS 中运行良好，但在我的 JellyBean 设备上停止了。

我的代码如下

```
@Override
public RemoteViews getViewAt(final int position) {
    final RemoteViews views = new RemoteViews(context.getPackageName(), layout);
            final PendingIntent home_intent = PendingIntent.getActivity(context, 0, new Intent(
            INTENT_ACTION_HOME), Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT);
    views.setOnClickPendingIntent(R.id.row_item, home_intent);
} 
```

在小部件的 onUpdate 函数中触发的这种完全相同的意图可以正常工作，只是在 ListView 适配器中时不行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T05:11:50.680

从文档

公共无效 setOnClickPendingIntent (int viewId, PendingIntent pendingIntent)

相当于调用 setOnClickListener(android.view.View.OnClickListener) 来启动提供的 PendingIntent。**当设置集合中项目的点击动作时（例如 ListView、StackView 等），此方法将不起作用。**相反，将 {@link RemoteViews#setPendingIntentTemplate(int, PendingIntent) 与 RemoteViews#setOnClickFillInIntent(int, Intent) 结合使用。

[http://developer.android.com/reference/android/widget/RemoteViews.html](http://developer.android.com/reference/android/widget/RemoteViews.html)

# php - PHP URL GET 字符集问题

> ID：13317862
> 
> 赞同：0
> 
> 时间：2012-11-10T00:12:49.983
> 
> 标签：php, url, character-encoding, get

我正在使用 URL 参数在 PHP 中构建一个文件浏览器，但我遇到了一些特殊字符的问题。我设法翻译成`ß`并按`%26`预期将我的 R'n'B 文件夹输出为 R%2Cn%2CB 但 PHP 说`'``%2C`

> 警告：opendir(dir//Musik/R,n,B/,dir//Musik/R,n,B/) [function.opendir]: Das System kann die angegebene Datei nicht finden。（代码：2）

我的代码片段：

```
function fileBrowser($dir, $file) {
    $trans = array("&" => "%26","'" => "%2C");
    $cdir = strtr(@$_GET['dir'],$trans);
    $cfile = strtr($file,$trans);
... 
```

你能给我一个提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T00:17:43.350

我会建议使用 urlencode/urldecode 代替您自己替换它。

然而`ß`现在`%C3%9F`和`'`现在`%27`

# php - 展开 URL 查询字符串问题

> ID：13317863
> 
> 赞同：0
> 
> 时间：2012-11-10T00:12:51.047
> 
> 标签：php, arrays, url, explode

PHP新手在这里..我正在尝试创建一个函数，在将商品添加到购物车后将用户重定向回上一页。但是，当它们使用下面的代码重定向回来时，它会留下目录的副本（即**example.com/catalog/garden-tools/garden-tools**

```
function custom_add_to_cart_redirect() {
    $_SERVER['REQUEST_URI_PATH'] = parse_url($_SERVER['REQUEST_URI'], PHP_URL_PATH);
    $url = explode('/', rtrim($_SERVER['REQUEST_URI_PATH'], '/'));
    return $url[3];
} 
```

print_r 显示以下内容：

```
Array ( [0] => [1] => thefarmshop [2] => catalog [3] => garden-tools [4] => gardening-glove ) 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T00:35:23.313

由于 url 被分解，你会得到一个数组，如： `$url[ 0 ] = "http:"` `$url[ 1 ] = "SOME_STRING"`等等。您需要检查 url 数组中所需字符串的索引并返回它。喜欢`return $url[ 2 ]`或无论索引是什么。

**更新**

```
function custom_add_to_cart_redirect() {
    $url = explode('/', substr($_SERVER['HTTP_REQUEST'], 1));
    print_r( $url );
} 
```

显示包括索引和值`print_r( $array )`的结构。`$array`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T04:55:56.947

一个快速简单的测试看起来像

```
$uri = '/test/uri/just/cause/';
print_r(explode('/', $uri)); 
```

这会产生与您所看到的相同的东西：

```
Array
(
    [0] => 
    [1] => test
    [2] => uri
    [3] => just
    [4] => cause
    [5] => 
) 
```

您看到数组元素 0 为空的原因是由于 explode 的工作方式。它接受一个字符并将其前面的内容粘贴到一个数组元素中，并将其后面的内容粘贴到另一个数组元素中。例如，一/二将像数组（一，二）一样拆分，因为一个在斜杠（/）之前，两个在之后（如预期的那样）

但是，如果之前或之后没有任何内容，您将得到一个空元素，如上例所示。

在您的代码中，您使用 rtrim() 修剪尾部斜杠，但如果您简单地使用 trim() 修剪前导和尾部斜杠，您将获得更好的结果。

```
$url = explode('/', trim($_SERVER['REQUEST_URI_PATH'], '/')); 
```

为了您的回报，您可能会寻找

```
return $uri[count($uri) - 2]; 
```

这将带您从 example.com/catalog/garden-tools/gardening-glove 并返回 garden-tools

更新：也许对您来说更简单的方法如下

```
$uri = rtrim($_SERVER['REQUEST_URI_PATH'], '/');
$uri = substr($uri, 0, strrpos($uri, '/')); 
```

这将采用诸如 example.com/catalog/garden-tools/gardening-glove 之类的路径，并切掉最后一点离开 example.com/catalog/garden-tools

# c# - C# 排序并放回 Regex.matches

> ID：13317864
> 
> 赞同：3
> 
> 时间：2012-11-10T00:12:56.877
> 
> 标签：c#, mysql, regex, sorting, asp.net-4.0

有没有办法使用 RegEx.Matches 来查找和写回匹配的值，但以不同的（字母顺序）顺序？

现在我有类似的东西：

```
var pattern = @"(KEY `[\w]+?` \(`.*`*\))";
var keys = Regex.Matches(line, pattern);

Console.WriteLine("\n\n");
foreach (Match match in keys)
{
    Console.WriteLine(match.Index + " = " + match.Value.Replace("\n", "").Trim());
} 
```

但我真正需要的是获取 table.sql 转储并按字母顺序对现有索引进行排序，示例代码：

```
line = "...PRIMARY KEY (`communication_auto`),\n  KEY `idx_current` (`current`),\n  KEY `idx_communication` (`communication_id`,`current`),\n  KEY `idx_volunteer` (`volunteer_id`,`current`),\n  KEY `idx_template` (`template_id`,`current`)\n);" 
```

谢谢J

* * *

**更新：** 谢谢，m.buettner 解决方案给了我可以用来继续前进的基础知识。遗憾的是，我不太擅长 RegEx，但我最终得到了我认为仍然可以改进的代码：

```
...
//sort INDEXES definitions alphabetically
if (line.Contains("  KEY `")) line = Regex.Replace(
    line,
    @"[ ]+(KEY `[\w]+` \([\w`,]+\),?\s*)+",
    ReplaceCallbackLinq
);

static string ReplaceCallbackLinq(Match match) 
{
    var result = String.Join(",\n  ",
        from Capture item in match.Groups[1].Captures
        orderby item.Value.Trim()
        select item.Value.Trim().Replace("),", ")")
    );
    return "  " + result + "\n";
} 
```

* * *

**更新：** 还有一种情况，索引字段长于 255 个字符 mysql 将索引修剪到 255 并这样写：

```
KEY `idx3` (`app_property_definition_id`,`value`(255),`audit_current`), 
```

因此，为了匹配这种情况，我也必须更改一些代码：在 ReplaceCallbackLinq 中：

```
select item.Value.Trim().Replace("`),", "`)") 
```

和正则表达式定义：

```
@"[ ]+(KEY `[\w]+` \([\w`(\(255\)),]+\),?\s*)+", 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T01:15:32.023

这不能单独使用正则表达式来完成。但是您可以使用回调函数并利用 .NET 使用同一捕获组捕获多个事物的独特功能。这样您就可以避免`Matches`自己使用和写回所有内容。相反，您**可以**使用内置`Replace`函数。我下面的示例只是对`KEY`短语进行排序并将它们按原样放回原样（因此它只对 SQL 语句中的短语进行排序）。如果您想要不同的输出，您可以通过捕获模式的不同部分并`Join`在最后调整操作来轻松实现。

首先，我们需要一个匹配评估器来传递回调：

```
MatchEvaluator evaluator = new MatchEvaluator(ReplaceCallback); 
```

然后我们编写一个匹配整个索引集的正则表达式，捕获捕获组中的索引名称。我们把它放在`Replace`需要评估器的重载中：

```
output = Regex.Replace(
    input,
    @"(KEY `([\w]+)` \(`[^`]*`(?:,`[^`]*`)*\),?\s*)+",
    evaluator
); 
```

现在在大多数语言中，这将没有用，因为由于重复捕获组 1 将始终仅包含捕获的第一个或最后一个内容（与捕获组 2 相同）。但幸运的是，您使用的是 C#，而 .NET 的正则表达式引擎只是一种强大的野兽。那么让我们看一下回调函数以及如何使用多个捕获：

```
static string ReplaceCallback(Match match)
{
    int captureCount = match.Groups[1].Captures.Count;
    string[] indexNameArray = new string[captureCount];
    string[] keyBlockArray = new string[captureCount];
    for (int i = 0; i < captureCount; i++)
    {
        keyBlockArray[i] = match.Groups[1].Captures[i].Value;
        indexNameArray[i] = match.Groups[2].Captures[i].Value;
    }
    Array.Sort(indexNameArray, keyBlockArray);
    return String.Join("\n  ", keyBlockArray);
} 
```

`match.Groups[i].Captures`让我们访问单个组的多个捕获。由于这些`Capture`对象现在看起来并不真正有用，我们从它们的值构建两个字符串数组。然后我们使用`Array.Sort`which 根据一个数组的值（被认为是键）对两个数组进行排序。作为“键”，我们使用表名的捕获。作为“值”，我们使用一个完整`KEY ...,`块的完整捕获。这会按名称对完整块进行排序。然后我们可以简单地将块连接在一起，添加之前使用的空格分隔符并返回它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T00:34:25.133

不确定我是否完全理解这个问题，但确实将 foreach 更改为：

```
foreach (Match match in keys.Cast<Match>().OrderBy(m => m.Value)) 
```

做你想做的事？

# java - 通过浏览器传送 csv 文件时出错

> ID：13317869
> 
> 赞同：0
> 
> 时间：2012-11-10T00:13:25.773
> 
> 标签：java, csv, playframework, download, playframework-1.x

我的应用程序正在做的是创建一个大型 csv 文件（它是一个报告），其想法是提供 csv 文件的内容而不实际为其保存文件。这是我的代码

```
String csvData; //this is the string that contains the csv contents
byte[] csvContents = csvData.getBytes();
response.contentType = "text/csv";
response.headers.put("Content-Disposition", new Header(
            "Content-Disposition", "attachment;" + "test.csv"));
response.headers.put("Cache-Control", new Header("Cache-Control",
            "max-age=0"));
response.out.write(csvContents);
ok(); 
```

正在生成的 csv 文件相当大，我得到的错误是

**org.jboss.netty.handler.codec.frame.TooLongFrameException：HTTP 行大于 4096 字节。**

克服这个问题的最佳方法是什么？

我的技术堆栈是带有播放框架 1.2.5 的 java 6。

注意：响应对象的来源是 play.mvc.Controller.response

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T03:40:04.060

请用

> Servlet 输出流

喜欢

```
String csvData; //this is the string that contains the csv contents
byte[] csvContents = csvData.getBytes();
ServletOutputStream sos = response.getOutputStream();
response.setContentType("text/csv");
response.setHeader("Content-Disposition", "attachment; filename=test.csv");
sos.write(csvContents); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T09:01:12.027

我们使用它直接在浏览器中显示操作的结果，

```
window.location='data:text/csv;charset=utf8,' + encodeURIComponent(your-csv-data); 
```

我不确定内存不足错误，但我至少会试试这个：

```
request.format = "csv";
renderBinary(new ByteArrayInputStream(csvContents)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T12:31:40.820

显然 netty 抱怨 http-header 太长 - 也许它以某种方式认为您的文件是标题的一部分，另请参阅

[http://lists.jboss.org/pipermail/netty-users/2010-November/003596.html](http://lists.jboss.org/pipermail/netty-users/2010-November/003596.html)

正如 nylund 所说，使用 renderBinary 应该可以解决问题。

我们使用 writeChunk oursleves 即时输出大型报告，例如：

控制器：

```
public static void getReport() {

        final Report report = new Report(code, from, to );
        try {

            while (report.hasMoreData()) {
                final String data = await(report.getData());
                response.writeChunk(data);
            }
        } catch (final Exception e) {
            final Throwable cause = e.getCause();
            if (cause != null && cause.getMessage().contains("HTTP output stream closed")) {
                logger.warn(e, "user cancelled download");
            } else {
                logger.error(e, "error retrieving  data");
            }
        }
    } 
```

在报告代码中

```
 public  class Report {
    public Report(final String code, final Date from, final Date to) {
    }
    public boolean hasMoreData() {
        // find out if there is more data        
    }
    public Future<String> getData() {
        final Job<String> queryJob = new Job<String>() {
            @Override
            public String doJobWithResult() throws Exception {
               // grab data (e.g read form db) and return it               
                return data;
            }
        };
        return queryJob.now();
    }
} 
```

# javascript - iPhone上的神秘html闪烁

> ID：13317870
> 
> 赞同：0
> 
> 时间：2012-11-10T00:13:32.710
> 
> 标签：javascript, jquery, html, css, datepicker

我正在尝试使用[Zebra DatePicker](http://stefangabos.ro/jquery/zebra-datepicker/#datepicker-example13)，但由于某种原因，当我点击日历（无论哪个部分）时，整个部分都会闪烁。如果您单击桌面，它不会闪烁，但奇怪的是它会在我的 iPhone 上闪烁。看起来与移动有关，但我不确定是什么原因造成的。有没有人见过这种类型的闪烁？

我尝试询问原始创建者，但他似乎没有开发移动网络的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-26T07:22:41.643

闪烁可能是由于点击时的突出显示效果。由于水龙头通常仅在移动设备上使用，因此可能就是这样。也许每次点击都会突出显示一些背景元素。尝试为每个元素定义这个规则，看看这是否是闪烁的原因：

（CSS规则）

```
* {-webkit-tap-highlight-color: rgba(0, 0, 0, 0);} 
```

# asp.net - 根 Web.config 中的 IIS 7 自定义会话提供程序

> ID：13317875
> 
> 赞同：0
> 
> 时间：2012-11-10T00:13:53.160
> 
> 标签：asp.net, .net, iis, iis-7

我正在尝试在我的默认/根 web.config 中设置一个自定义会话提供程序，以便它的所有子站点都能够自动使用它。

这是我的配置：

```
<configuration>
    <system.web>
        <sessionState mode="Custom" customProvider="RedisSessionStateProvider">
            <providers>
                <add name="RedisSessionStateProvider" 
                    type="Harbour.RedisSessionStateStore.RedisSessionStateStoreProvider" 
                    host="xxx.yyy.zzz" clientType="pooled" />
            </providers>
        </sessionState>
    </system.web>
</configuration> 
```

我的问题是提供程序依赖于一些程序集，我不确定在我的根 web.config 中引用它们的正确方法，以便子站点可以使用它。

我想避免使用 GAC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:08:44.453

您始终可以将程序集放在根网站的 bin 文件夹中，然后在 web.config 中引用它，然后使用添加程序集标签。

见：[http ://www.daniweb.com/web-development/aspnet/threads/200904/add-assembly-to-root-web.config-in-asp.net](http://www.daniweb.com/web-development/aspnet/threads/200904/add-assembly-to-root-web.config-in-asp.net)

# alias - ZF2：在路由器中创建 url 别名

> ID：13317876
> 
> 赞同：3
> 
> 时间：2012-11-10T00:14:00.483
> 
> 标签：alias, zend-framework2, zend-navigation, zend-router

我是 Zend Framework 2 的新手，我想学习这个框架。我想在路由器中创建 url 别名。例如，我在 module.config.php 中定义了类似的东西

```
'router' => array(
    'routes' => array(

        'home' => array(
            'type' => 'Zend\Mvc\Router\Http\Literal',
            'options' => array(
                'route'    => '/',
                'defaults' => array(
                    'controller' => 'Application\Controller\Index',
                    'action'     => 'index',
                ),
            ),
        ),
        'node' => array(
            'type'    => 'Application\Controller\AliasSegment',
            'options' => array(
                'route'    => '/node[/:id]',
                'constraints' => array(
                    'id' => '[0-9]+'
                ),
                'defaults' => array(
                    '__NAMESPACE__' => 'Application\Controller',
                    'controller'    => 'Index',
                    'action'        => 'index',
                    'id'            => '0'
                ),
            ),
            'may_terminate' => true,
        ),

    ),
), 
```

当我键入`www.myapp.local/node/1`它时，它会路由到我的应用程序的默认控制器中的默认操作。我想要的是一个可以处理 url 路径别名的路由器扩展。例如：

```
www.myapp.local/node/1 = www.myapp.local/aboutus
www.myapp.local/node/2 = www.myapp.local/company/gallery 
```

我知道这在采埃孚是可能的。以下是如何在 ZF 中实现此目的的教程链接： [友好的 urls](http://mateusztymek.pl/blog/zend-navigation-przyjazne-linki) 我知道这是波兰语，但我认为代码是不言自明的 :)

这个想法是使用 url helper 使用别名或普通段 (node/[:id]) 组装有效的 url

我已经在 Application\Controller 文件夹中创建了 AliasSegment 类，但它显示了一个错误：

```
Fatal error: Uncaught exception 'Zend\ServiceManager\Exception\ServiceNotFoundException' with message 'Zend\ServiceManager\ServiceManager::get was unable to fetch or create an instance for Application\Controller\AliasSegment' in C:\xampp\htdocs\industengine\vendor\zendframework\zendframework\library\Zend\ServiceManager\ServiceManager.php:450 Stack trace: #0 
```

我的 AliasSegment 类（不完整）：

```
 <?php

    namespace Zend\Mvc\Router\Http;

    use Traversable;
    use Zend\Mvc\Router\Exception;
    use Zend\Stdlib\ArrayUtils;
    use Zend\Stdlib\RequestInterface as Request;

 class AliasSegment extends Segment
 {

    public function match(Request $request, $pathOffset = null)
    {

    }

 } 
```

我一直在寻找几个小时的答案，但我找不到任何东西。请至少告诉我我做错了什么，在哪里插入代码或者你知道更好的解决方案？

我不是在寻找现成的应用程序。我想学习一些东西，但如果您能详细告诉我答案，我将不胜感激：）

提前感谢，对不起我的英语:)

**编辑：**

我的自定义路由器现在正在工作。此时别名是硬编码的，但它可以工作。

我的 AliasSegment 类现在看起来：

```
<?php

namespace Application\Controller;

use Traversable;
use Zend\Mvc\Router\Exception;
use Zend\Stdlib\ArrayUtils;
use Zend\Stdlib\RequestInterface as Request;
use Zend\Mvc\Router\Http;

class AliasSegment extends \Zend\Mvc\Router\Http\Segment
{

    public function match(Request $request, $pathOffset = null)
    {
        $uri  = $request->getUri();
        $path = $uri->getPath();

        //sample logic here
        //for /about/gallery uri set node id to 1
        //todo: get action, controller and module from navigation        
        if($path == '/about/gallery'){
            $uri->setPath('/node/1');
            $request->setUri($uri);
        }

        return parent::match($request, $pathOffset);

    }

    protected function buildPath(array $parts, array $mergedParams, $isOptional, $hasChild)
    {

        if(isset($mergedParams['link'])){
            return $mergedParams['link'];
        }

        return parent::buildPath($parts, $mergedParams, $isOptional, $hasChild);
    }

} 
```

在这种情况下`/about/gallery`是 的别名`/node/1`。两个地址都是正确的。buildPath 函数正确返回别名路径。好吧，我希望这对某人有用:)

但是我想在 Zend_Navigation 中使用名为“链接”的附加参数来设置它。

我已经完成了我想要实现的 50%，但是现在我无法从路由器获取 Zend_Navigation。我不知道如何通过它。我想应该是这样的：

```
$sm = $this->getServiceLocator();
$auth = $sm->get('Navigation'); 
```

它适用于我的 IndexController，但不适用于我的 AliasSegment。我需要在带有“链接”参数的导航数组节点中找到。

**编辑**

我找到了解决方案。答案如下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T00:24:47.880

> 无法获取或创建 Application\Controller\AliasSegment 的实例

如果这是控制器，那么我希望在 module.config.php 中具有：

```
'controllers' => array(
    'invokables' => array(
        '\Application\Controller\AliasSegment' => '\Application\Controller\AliasSegment',
    )
), 
```

你的类的命名空间也看起来有点奇怪：

> 命名空间 Zend\Mvc\Router\Http;

关于什么：

```
namespace Application\Controller; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-11T15:04:02.907

好的，我成功了。此线程的重要内容： [ZF2：如何在自定义路由中获取 Zend\Navigation？](https://stackoverflow.com/questions/13324022/zf2-how-to-get-zend-navigation-inside-custom-route).

您可以使用任何分段类型的路线。但这可能需要一些修改才能`match`起作用。

如果导航的单个页面将具有“链接”参数，则 url 将转换为“链接”字符串，但其他参数将保留在其后面。只需将其视为当前路由的默认 URI 的覆盖。

我不得不稍微修改我的自定义路由类。首先，我必须将其命名空间更改为`Application\Router`. 这是一个完整的课程：

```
// EDIT - file within ModuleName/src/Router/Alias.php
namespace Application\Router;

use Traversable;
use Zend\Mvc\Router\Exception;
use Zend\Stdlib\ArrayUtils;
use Zend\Stdlib\RequestInterface as Request;
use Zend\Mvc\Router\Http;

class Alias extends Http\Segment
{
    private static $_navigation = null;

    public function match(Request $request, $pathOffset = null)
    {
        $uri  = $request->getUri();
        $path = $uri->getPath();

        $items = self::$_navigation->findAllBy('route', 'node');
        $params = null;

        if($items != null){
            $t = sizeof($items);
            for ($i=0; $i < $t; $i++) { 
                $item = $items[$i];
                $params = $item->getParams();
                if (isset($params['link']) && $params['link']==$path){
                    $uri->setPath('/'.$item->getRoute().'/'.$params['id']);
                    $request->setUri($uri);
                    break;
                }
            }
        }

        return parent::match($request, $pathOffset);
    }

    public function setNavigation($navigation){
        self::$_navigation = $navigation;
    }

    protected function buildPath(array $parts, 
                                 array $mergedParams, $isOptional, $hasChild)
    {

        if(isset($mergedParams['link'])){
            return $mergedParams['link'];
        }

        return parent::buildPath($parts, $mergedParams, 
                                               $isOptional, $hasChild);
    }

} 
```

这是样本部分`module.config.php`：

```
'navigation' => array(
        // The DefaultNavigationFactory we configured in (1) uses 'default' as the sitemap key
        'default' => array(
            // And finally, here is where we define our page hierarchy
            'account' => array(
                'label' => 'Account',
                'route' => 'node',
                'params' => array(
                            'id' => '2',
                            ),
                'pages' => array(
                    'home' => array(
                        'label' => 'Dashboard',
                        'route' => 'node',
                        'params' => array(
                                    'id' => '8',
                                    'link' => '/about/gallery'
                                    ),

                    ),
                    'login' => array(
                        'label' => 'Sign In',
                        'route' => 'node',
                        'params' => array(
                                    'id' => '6',
                                    'link' => '/signin'
                                    ),

                    ),
                    'logout' => array(
                        'label' => 'Sign Out',
                        'route' => 'node',
                        'params' => array(
                                    'id' => '3',
                                    ),
                    ),
                ),
            ),
        ),
    ),
    'router' => array(
        'routes' => array(

            'home' => array(
                'type' => 'Zend\Mvc\Router\Http\Literal',
                'options' => array(
                    'route'    => '/',
                    'defaults' => array(
                        'controller' => 'Application\Controller\Index',
                        'action'     => 'index',
                    ),
                ),
            ),
            'node' => array(
                'type'    => 'Application\Router\Alias',
                'options' => array(
                    'route'    => '/node[/:id]',
                    'constraints' => array(
                        'id' => '[0-9]+'
                    ),
                    'defaults' => array(
                        '__NAMESPACE__' => 'Application\Controller',
                        'controller'    => 'Index',
                        'action'        => 'index',
                        'id'            => '0'
                    ),
                ),
                'may_terminate' => true,
            ),

        ),
    ), 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T08:48:27.960

如果它只是用于类似的路线`/about`，`/about/galery`那么您可以简单地将文字路线与子路线一起使用

```
'about' => array(
    'type' => 'literal',
    'options' => array(
        'route' => '/about',
        'defaults' => array(
            'controller' => 'module-controller-about',
            'action'     => 'index'
        )
    ),
    'may_terminate' => true,
    'child_routes' => array(
        'galery' => array(
            'type' => 'literal',
            'options' => array(
                'route' => '/galery',
                'defaults' => array(
                    'controller' => 'module-controller-galery'
                )
            )
        )
    )
) 
```

当涉及到像您这样的 URL 时，`/blog/1-my-great-seo-title`您可能必须设置一个正则表达式路由（这是最慢的，文字是最快的）。

也许从他的路由器演示中查看[DASPRiDs 幻灯片](http://www.dasprids.de/blog/2012/10/23/slides-for-my-zf2-router-presentation)

# ruby - 当类不引用名称时，webdrive 单击列表中的元素

> ID：13317882
> 
> 赞同：1
> 
> 时间：2012-11-10T00:14:31.287
> 
> 标签：ruby, selenium-webdriver

我正在搜索，然后尝试单击从搜索结果返回的名称如果我搜索 Bond，以下是我将在页面上看到的结果

```
 <li class = "resultsItem  " data-index ="0">
    <div class = "name" data-cid ="d182a061-1afd-4924-b256-035d7e6f34ec" onclick="return true;">
    Bond, James      </div>
    <a class = "ir icon emailAction" href="mailto:jamesbond@mi6@.com"1</a>
    </li> 
```

我尝试在 Ruby 中将以下内容与 selenium webdriver 一起使用

```
 element = driver.find_element(:name, "Bond, James")
    element = driver.find_element(:text, "Bond, James")
    element = driver.find_element(:data-cid, "d182a061-1afd-4924-b256-035d7e6f34ec") 
```

我不认为名字或文字会起作用。我不喜欢 data-cid 但希望这会奏效。有人有想法么？

谢谢，

杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T00:05:55.923

在玩了 ahwile 之后，我能够使用代码来解决问题

```
element = driver.find_elements (:xpath, "//li @class='resultsItem ']/div") 
for item in element 
 if item.text() == "Bond, James" then 
  item.click 
 end 
end 
```

谢谢，

杰夫

# coldfusion - 在 cfmail 中包含引导程序

> ID：13317884
> 
> 赞同：1
> 
> 时间：2012-11-10T00:14:36.873
> 
> 标签：coldfusion, html-email, coldfusion-9, cfmail

对表单进行更改后，用户会收到一封电子邮件。我想使用 twitter bootstrap 以更易读的格式显示信息。令我惊讶的是，样式`text-info`显示正确，但表格样式显示不正确。这是语法错误还是与 ColdFusion 用于创建电子邮件的 HTML 渲染引擎的类型有关？我正在使用 Outlook 查看电子邮件。

下面我试过了：

```
<cfmail from="test.com" to="me.com" subject="tester" type="html">
 <html>
  <head>
   <!---<link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet">--->
  </head>
   <body>
    <style type="text/css">

     <cfinclude template="/bootstrap/css/bootstrap.min.css">
    </style>

     <!--- Start comparing --->
    <p class="text-info">
      Has updated the following Project Information for Project
     </p>

     <table class="table table-striped" style="width: 600px">
    <tr>
     <th>Field</th>
     <th>Original</th>
     <th>Modified</th>
    </tr>

     <cfif compare(xOrig,xMod) IS NOT 0>
      <tr>
       <td>Field1</td>
       <td>#xOrig</td>
       <td>#xMod#</td>
      </tr>
     </cfif>

      </table>
     </body>
    </html>
</cfmail> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T22:36:30.323

包含外部样式表来呈现电子邮件并不是最佳实践，事实上它甚至不适用于您想要做的绝大多数事情，因为电子邮件客户端会忽略或删除它。

为了有效地呈现样式化的电子邮件，您需要内联编写 CSS，甚至不在电子邮件正文的头部。例子：

```
<p style="color:#000;"></p> 
```

使用内联样式将为您带来最大的收益。使用 MailChimp 上的以下资源作为指南：[Mailchimp HTML 电子邮件模板](http://mailchimp.com/resources/html-email-templates/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T01:08:59.073

无论是包含文件内容还是通过 URL 引用样式表，您都应该始终将样式放在 head 标签中。虽然您可能不会将它们放在正文中，但您可能会在 HTML 渲染引擎之间获得不一致的行为。

当您注释掉时，我会亲自使用链接标签。但是，由于电子邮件不在您的 Web 服务器上，因此您必须使用绝对引用，而不是相对引用：

```
<link href="http://www.mysite.com/bootstrap/css/bootstrap.min.css" rel="stylesheet"> 
```

# memory - 'ps' 和 'top' 显示单个进程的不同内存使用情况

> ID：13317886
> 
> 赞同：3
> 
> 时间：2012-11-10T00:14:48.417
> 
> 标签：memory

当我执行“ps -auxwww”时，它显示 X 使用了大约 342M 的内存。

```
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND 
[...] 
root      2009  1.0  5.1 342564 105012 tty7    Rs+  Oct08 469:24 X :0 
[...] 
```

但是，“顶部”显示大约 1358M：

```
 PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND 
[...] 
 2009 root      20   0 1358m 102m  14m S  0.3  5.1 469:24.27 X 
[...] 
```

为什么，哪一个是正确的？

我已经看到帖子重新“顶部”和“ps”“使用的总内存”不同（因为共享内存），但不是为什么这会发生在单个进程上。

编辑：事实证明，即使“ps -eo”选项都不会给出 top 给出的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T00:24:34.230

顶部包括缓存在缓冲区中的内容等等。PS没有。如果您希望应用程序的实际使用情况，请使用 ps。如果您想要应用程序使用的总数，包括系统为其保留的内容.. 使用 top

# python - 希望在 shell 中使用 ffmpeg 来获取元数据

> ID：13317898
> 
> 赞同：0
> 
> 时间：2012-11-10T00:17:41.503
> 
> 标签：python, perl, shell, ffmpeg

我有一个使用 ffmpeg 将 mp3 转换为 avi 的脚本。我需要知道如何使用 ffmpeg 或下一个最佳命令从 mp3 中获取元数据，例如。元数据是：

```
 Input #1, mp3, from '21 - STACY BARTH - DRINK MY PAIN AWAY.mp3':
     Metadata:
artist          : DJ WHITEOWL
album           : Dj Whiteowl - R&b's New Generation
title           : STACY BARTH - DRINK MY PAIN AWAY
track           : 21/21
genre           : R&B
date            : 2012
TCMP            : 1
TDTG            : 2012-10-27T00:36:48
Duration: 00:05:02.23, start: 0.000000, bitrate: 191 kb/s
Stream #1.0: Audio: mp3, 44100 Hz, stereo, s16, 192 kb/s 
```

我需要获取艺术家、专辑、标题、曲目、流派、数据等并将它们加载到单独的变量中。IE

```
 track = 21/21
    genre = R&B 
```

ETC

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T01:25:03.560

尝试：

```
ffmpeg -i yourvide.mp4 -f ffmetadata 
```

在 OGG/MP3/M4A 文件上，相同的命令将起作用：

```
ffmpeg -i Guess_Im_Doing_Fine.mp3 -f ffmetadata 
```

它会输出您感兴趣的所有数据。FFMPEG 是一个强大的工具，您应该阅读[文档](http://ffmpeg.org/documentation.html)。

输出：

```
Input #0, mp3, from '03 Guess I'm Doing Fine.mp3':
Metadata:
title           : Guess I'm Doing Fine
artist          : Beck
album           : Sea Change
track           : 3
date            : 2002
genre           : Rock
Duration: 00:04:49.46, start: 0.000000, bitrate: 191 kb/s
Stream #0.0: Audio: mp3, 44100 Hz, stereo, s16, 192 kb/s
At least one output file must be specified 
```

# dropbox - 框架或服务，如 Votebox

> ID：13317900
> 
> 赞同：5
> 
> 时间：2012-11-10T00:17:53.503
> 
> 标签：dropbox, user-feedback

我喜欢 Dropbox 支持网站上的 Votebox 部分。它允许用户建议功能并优先考虑开发。

我一直认为它是由第三方服务提供支持的（有点像 Getsatisfaction.com），但据我所知它是专有的。

有谁知道一个开源项目、SaaS 服务或类似的东西，具有类似的功能和润色？

![投票箱截图](../Images/75651c3bebb3e8993805afc58f0b57e0.png)

# c# - 如果语句在 C# 中不起作用

> ID：13317902
> 
> 赞同：1
> 
> 时间：2012-11-10T00:18:29.747
> 
> 标签：c#, if-statement

我正在使用教程编写一个简单的应用程序，该应用程序计算银行账户达到目标金额需要多少年。

我正在尝试使用“如果”语句，因此如果此人的初始余额超过其目标金额，则会打印“您的余额大于目标金额”，但是当我将其写入代码时，它总是会打印以上无论用户输入多少。

这是代码：

```
 double balance, interestRate, targetBalance; //creating three doubles

        Console.WriteLine("What is your current balance?"); //writing to the console
        balance = Convert.ToDouble(Console.ReadLine()); //reading what the user inputs & converting it to a double

        Console.WriteLine("What is your current annual interest (in %)?");
        interestRate = 1 + Convert.ToDouble(Console.ReadLine()); //same as above

        Console.WriteLine("What balanec would you like to have?");
        targetBalance = Convert.ToDouble(Console.ReadLine()); //same as above

        int totalYears = 0; //creates an int variable for the total years

        do
        {
            balance *= interestRate; //multiplying balance x interest rate
            ++totalYears; // adding 1 to the total years
        }
        while (balance < targetBalance); //only do the above when balance is less than target balance

        if (balance < targetBalance)
        {
            Console.WriteLine("In {0} year{1} you'll have a balance of {2}.", totalYears, totalYears == 1 ? "" : "s", balance); //writing the results to the console
        }
        else if (targetBalance < balance)
        {
            Console.WriteLine("Your balance is bigger than the target amount");
        }
        Console.ReadKey(); //leaving the results there until the user inputs a key 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-10T00:21:24.737

`do-while`退出循环的唯一方法是余额是`>=`目标余额。因此，您的第一个`if`语句将永远不会评估为`true`.

您可能想在进入循环`targetBalance < balance`之前进行检查。`do-while`如果余额大于目标，则重新开始。然后在循环之后，无需围绕“在 x 年内...”对话框进行 if 检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T00:30:46.713

它在这里工作正常。但请先检查您的余额，targetBalance。您没有注意到如果它们相等会发生什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T21:04:13.823

我想你想要这个...

```
double balance, interestRate, targetBalance; //creating three doubles

Console.WriteLine("What is your current balance?"); //writing to the console
balance = Convert.ToDouble(Console.ReadLine()); //reading what the user inputs & converting it to a double

Console.WriteLine("What is your current annual interest (in %)?");
interestRate = 1 + Convert.ToDouble(Console.ReadLine()); //same as above

Console.WriteLine("What balanec would you like to have?");
targetBalance = Convert.ToDouble(Console.ReadLine()); //same as above

int totalYears = 0; //creates an int variable for the total years
if (balance < targetBalance)
{
    do
    {
        balance *= interestRate; //multiplying balance x interest rate
        ++totalYears; // adding 1 to the total years
    }
    while (balance < targetBalance); //only do the above when balance is less than target balance
        Console.WriteLine("In {0} year{1} you'll have a balance of {2}.", totalYears, totalYears == 1 ? "" : "s", balance); //writing the results to the console
    }
 }
 else if (targetBalance < balance)
 {
     Console.WriteLine("Your balance is bigger than the target amount");
 }
 Console.ReadKey(); //leaving the results there until the user inputs a key 
```

# c - opengl，帮助完成 glutmainloop 或函数完成

> ID：13317909
> 
> 赞同：1
> 
> 时间：2012-11-10T00:20:22.550
> 
> 标签：c, opengl

我有一个任务...

1.-我正在使用openGL显示一个矩阵数组，每个值都是一个强度并且它完成了。2.- 我需要用新值刷新这个窗口，但是**glutMainLoop()**没有帮助......

代码是：

无效图形函数（无效）

```
 {
/*Here print the array just once and I cannot do the second T_T*/
   } 
```

我需要在 u[i][j] 上使用新值来执行此代码，主要是：

```
glutInit(&argc, argv);
glutInitDisplayMode(GLUT_RGBA | GLUT_DEPTH | GLUT_DOUBLE);
glutInitWindowSize(500,500);
glutCreateWindow("1D Function");
glutDisplayFunc(graphfunct);
glutKeyboardFunc(exit);
glutMainLoop(); 
```

问题出在 glutMainLoop(); 这个函数在无穷大并且启动时我无法在 u[i][j] 上设置新值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T00:51:12.980

使用 GLUT 计时器来调用`glutPostRedisplay()`时间表或在末尾放置一个以`graphfunct()`尽快重绘。

# android - 如何在android的片段中显示带有图像的列表视图

> ID：13317912
> 
> 赞同：1
> 
> 时间：2012-11-10T00:20:32.823
> 
> 标签：android, listview, android-listview, android-fragments

我有一个带有 4 个选项卡的片段，在一个选项卡中我需要显示一个列表视图。我的代码已经做到了这一点，但有几个错误，我不确定我是不是做得不对，还是我错过了一些简单的东西。这是我正在使用的代码

片段活动

```
public class SupportFragment extends SherlockFragment{
String[] supporters = new String[] {
        "Gulf Shores",
        "Central",
        "Spanish Fort",
        "Jackson Heights",
        "Summerdale",
        "Atlas",
        "Robertsdale",
        "Eastern Shore"
};

int[] images = new int[] {
        R.drawable.gulfshores,
        R.drawable.central,
        R.drawable.spanishfort,
        R.drawable.jacksonheights,
        R.drawable.summerdale,
        R.drawable.atlas,
        R.drawable.robertsdale,
        R.drawable.easternshore
};

String[] church = new String[]{
        "Chruch of Christ",
        "Chruch of Christ",
        "Chruch of Christ",
        "Chruch of Christ",
        "Chruch of Christ",
        "Chruch of Christ",
        "Chruch of Christ",
        "Chruch of Christ"
};

 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {

     ViewGroup root = (ViewGroup) inflater.inflate(R.layout.tab_support_layout, null);

     List<HashMap<String,String>> aList = new ArrayList<HashMap<String,String>>();

        for(int i=0;i<10;i++){
            HashMap<String, String> hm = new HashMap<String,String>();
            hm.put("sup", "Supporters : " + supporters[i]);
            hm.put("chur","Church : " + church[i]);
            hm.put("icon", Integer.toString(images[i]) );
            aList.add(hm);
        }

        String[] from = {"sup", "chur", "icon"};

        int[] to = {R.id.icon, R.id.sup, R.id.chur};

        SimpleAdapter adapter = new SimpleAdapter(getBaseContext(), aList, R.layout.listview_layout, from, to);

        ListView listView = (ListView) findViewById(R.id.listview);

        listView.setAdapter(adapter);

        return root;

 }

 } 
```

我在这两行代码上收到错误

```
SimpleAdapter adapter = new SimpleAdapter(getBaseContext(), aList, R.layout.listview_layout, from, to); 
```

和

```
 ListView listView = (ListView) findViewById(R.id.listview); 
```

我得到的错误是：

类型 SupportFragment 的方法 getBaseContext() 未定义

方法 findViewById(int) 未定义 SupportFragment 类型

用于列表视图的 xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:background="@drawable/tableback" >

<TextView
    android:id="@+id/textview"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
/>

<ListView
    android:id="@+id/listview"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
/>
</LinearLayout> 
```

和列表视图布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="horizontal">

<ImageView
    android:id="@+id/icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingTop="10dp"
    android:paddingRight="10dp"
    android:paddingBottom="10dp"
/>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
>
    <TextView
        android:id="@+id/sup"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="15dp"
    />

    <TextView
        android:id="@+id/chur"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="10dp"
    />
</LinearLayout>
</LinearLayout> 
```

非常感谢您提供的任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T00:33:21.237

你没有 a`FragmentActivity`你有 a `Fragment`，所以你当然不能用 Context 来获得`getBaseContext()`，你必须使用它`getActivity()`。`findViewById`如果您想在 Fragment 中执行此操作，您还必须对要使用的视图进行膨胀。但是，如果你想使用选项卡，你需要一个`FragmentActivity`which hadels 你的`Fragments`.

您可以在片段`onCreateView()`方法中像这样膨胀视图：

```
View view = inflater.inflate(R.layout.myLayout, null); 
```

然后你可以`findViewById`这样调用：

```
[...]view.findViewById(...); 
```

# javascript - 在 JavaScript 中设置对象值

> ID：13317914
> 
> 赞同：1
> 
> 时间：2012-11-10T00:20:55.043
> 
> 标签：javascript

我已经尽力解决这个问题，现在我被卡住了，为什么第四个警报返回未定义？

```
function buttonClick()
{
  var myTest = function()
  {
    var _setDirectlyInside = "So far so good...";
    var _setInFunctionCalledInside;
    var _setInFunctionCalledFromOutside;

    (function(){
      _setInFunctionCalledInside = "This would indicate scope isn't the problem?";
    })();

    return {
      basic : "Easy stuff",
      setDirectlyInside : _setDirectlyInside,
      setInFunctionCalledInside : _setInFunctionCalledInside,
      functionCallFromOutside : function(){
        _setInFunctionCalledFromOutside = "Why does this come back as undefined?";
      },
      setInFunctionCalledFromOutside : _setInFunctionCalledFromOutside
    }
  };

  var test = myTest();

  alert(test.basic); // Returns "Easy stuff"
  alert(test.setDirectlyInside); // Returns "So far so good..."
  alert(test.setInFunctionCalledInside); // Returns "This would indicate scope isn't the problem?"

  test.functionCallFromOutside();
  alert(test.setInFunctionCalledFromOutside); // Broken, returns undefined
} 
```

解析度：

```
setInFunctionCalledFromOutside : _setInFunctionCalledFromOutside, // Won't work
setInFunctionCalledFromOutsideGetter : function(){
    return _setInFunctionCalledFromOutside; // Will work
}

...

alert(test.setInFunctionCalledFromOutside); // Broken, returns undefined
alert(test.setInFunctionCalledFromOutsideGetter()); // Now works 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T00:26:19.593

这：

```
return {
  basic : "Easy stuff",
  setDirectlyInside : _setDirectlyInside,
  setInFunctionCalledInside : _setInFunctionCalledInside,
  functionCallFromOutside : function(){
    _setInFunctionCalledFromOutside = "Why does this come back as undefined?";
  },
  setInFunctionCalledFromOutside : _setInFunctionCalledFromOutside
} 
```

...不会导致`setInFunctionCalledFromOutside`总是返回相同的`_setInFunctionCalledFromOutside`. 相反，`_setInFunctionCalledFromOutside`将在`return`语句执行时进行评估，其值将放在`setInFunctionCalledFromOutside`. 因此，`functionCallFromOutside()`对 没有影响`setInFunctionCalledFromOutside`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T00:39:23.247

[@nnnnnn](https://stackoverflow.com/users/615754/nnnnnn) [说得最好](https://stackoverflow.com/a/13317966/361684)，但他删除了他的答案。 `setInFunctionCalledFromOutside`不是**指向**. ***_*** _ `_setInFunctionCalledFromOutside`在创建返回的对象时，`setInFunctionCalledFromOutside`被分配了具有的值`_setInFunctionCalledFromOutside`。由于尚未分配任何值，因此值为`undefined`。改变一个的值，不会改变另一个的值。

一个更简单的例子说明了相同的原理：

```
var i = 0;
var n = i;
i++;
alert(i);  // 1
alert(n);  // still 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T00:53:33.637

添加到其他 - 作为参考，JS 按值传递字符串和数字。它通过引用传递/分配对象、数组和函数。

这不是您遇到的障碍（因为您的内部变量是`undefined`在您将其分配给外部变量时），但即使您确实修复了第一部分：

```
var internal = "string";
return {
    external : internal,
    setInternal : function (val) { internal = val; }
}; 
```

这仍然不能解决问题，因为`obj.external`将始终继续是“字符串”。
为什么？
因为您设置`external`为与赋值时相同的值`internal`，而不是等于 a `reference`of `internal`（即：指向它的指针）。

如果您正在寻找一个指针，然后创建`internal`一个对象：

```
var internal = { string : "my string" };
return {
    external : internal,
    setInternal : function (val) { internal.string = val; }
};

obj.external.string;  // "my string"
obj.setInternal("Bob was here");
obj.external.string;  // "bob was here" 
```

为什么它现在有效？
因为 internal 是一个对象，当你分配`external`'s 的值时，你给它一个指向对象的指针，该对象`internal`也有一个指向的对象。
当您更改 的属性时`internal`，例如`internal.string`，因为`external`指向同一个对象，`external.string`所以具有相同的值。

如果您设置`internal`为完全不同的东西，那么您将指向`internal`其他东西（例如`internal = null;`），因此`external`当您修改 时将不再改变`internal`，因为`internal`不再指向它曾经是的对象。

# c# - ParameterInfo是扩展方法参数？

> ID：13317918
> 
> 赞同：1
> 
> 时间：2012-11-10T00:21:26.280
> 
> 标签：c#, reflection, extension-methods

我想知道是否可以确定方法中的参数是否是`this object me`基于的参数类型`ParameterInfo`？我知道你可以是 if`IsOut`等等`IsRef`。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T00:44:56.390

您不会在它们扩展的类中通过反射找到扩展方法。但是，如果您正在查看定义扩展方法的静态类，您可以查看方法信息本身来判断它是扩展方法。由于编译器在扩展方法上添加了 ExtensionMethod 属性：

```
bool isExtension=methodInfo.IsDefined(typeof(ExtensionAttribute),true); 
```

然后你知道第一个参数将是“this”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T00:46:01.643

这似乎有效；目前仅适用于无参数和单参数方法，尽管/有点hack：

```
using System;
using System.Reflection;
using System.Collections.Generic;

namespace StackOverflow.Demos
{
    class Program
    {
        public static void Main(string[] args) 
        {
            object o = new object();
            Console.WriteLine(ExtensionDetectorT<string,object>.IsExtensionMethod(o.ToString));
            Console.WriteLine(ExtensionDetectorT<string, object>.IsExtensionMethod(o.ToString2));
            Console.WriteLine(ExtensionDetectorT<bool, object>.IsExtensionMethod(o.Equals));
            Console.WriteLine(ExtensionDetectorT<bool, object>.IsExtensionMethod(o.Equals2));
            Console.WriteLine(ExtensionDetectorVoid<object>.IsExtensionMethod(o.DoNothing));
            Console.WriteLine(ExtensionDetectorVoid<int>.IsExtensionMethod(o.DoNothing2));
            Console.WriteLine("Done");
            Console.ReadKey();
        }
    }

    public static class ExtensionDetectorT<TReturn,TParam1>
    {
        public delegate TReturn ExtensionMethodDelegateT();
        public delegate TReturn ExtensionMethodDelegateT2(TParam1 ignoreMe);

        public static bool IsExtensionMethod(ExtensionMethodDelegateT emd)
        {
            return !(new List<MethodInfo>(emd.Target.GetType().GetMethods())).Exists(delegate(MethodInfo mi) { return mi.Name.Equals(emd.Method.Name); });
        }
        public static bool IsExtensionMethod(ExtensionMethodDelegateT2 emd)
        {
            return !(new List<MethodInfo>(emd.Target.GetType().GetMethods())).Exists(delegate(MethodInfo mi) { return mi.Name.Equals(emd.Method.Name); });
        }
    }
    public static class ExtensionDetectorVoid<TParam1>
    {
        public delegate void ExtensionMethodDelegateVoid();
        public delegate void ExtensionMethodDelegateVoid2(TParam1 ignoreMe);
        public static bool IsExtensionMethod(ExtensionMethodDelegateVoid emd)
        {
            return !(new List<MethodInfo>(emd.Target.GetType().GetMethods())).Exists(delegate(MethodInfo mi) { return mi.Name.Equals(emd.Method.Name); });
        }
        public static bool IsExtensionMethod(ExtensionMethodDelegateVoid2 emd)
        {
            return !(new List<MethodInfo>(emd.Target.GetType().GetMethods())).Exists(delegate(MethodInfo mi) { return mi.Name.Equals(emd.Method.Name); });
        }
    }

    public static class ObjectExtensions
    {
        public static string ToString2(this object o) { return o.ToString(); }
        public static bool Equals2(this object o, object o2) { return o.Equals(o2); }
        public static void DoNothing(this object o) { }
        public static void DoNothing2(this object o, int i) { i++; }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T01:02:16.140

```
namespace System.Reflection
{
    public static class MethodInfoExtensions
    {
        public static bool IsExtensionMethod(this MethodInfo method)
        {
            return method.IsDefined(typeof(System.Runtime.CompilerServices.ExtensionAttribute), false);
        }
    }
} 
```

似乎无法找到一种方法来查看具体`ParameterInfo`是否是`this object me`一种参数，但这适用于整个方法，而且据我测试过，我似乎可以假设第一个参数是`this object me`范围。

# c# - 调用不明确： FindWindow(String, String);

> ID：13317920
> 
> 赞同：0
> 
> 时间：2012-11-10T00:21:58.947
> 
> 标签：c#, findwindow, setparent

我正在使用这段代码：

```
IntPtr hwndf = this.Handle;
IntPtr hwndParent = FindWindow("ProgMan.exe", null);
SetParent(hwndf, hwndParent); 
```

但是我得到一个错误。错误说：

> 以下方法或属性之间的调用不明确：'HyperBox.Form1.FindWindow(string, string)' 和 'HyperBox.Form1.FindWindow(string, string)'

我怎样才能解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-10T00:37:56.187

将 null 转换为字符串，以便程序知道要使用哪些被覆盖的方法：

```
IntPtr hwndf = this.Handle;
IntPtr hwndParent = FindWindow("ProgMan.exe", (string)null);
SetParent(hwndf, hwndParent); 
```

# java - Apache Tomcat 互连

> ID：13317925
> 
> 赞同：0
> 
> 时间：2012-11-10T00:23:11.217
> 
> 标签：java, web-services, apache, tomcat, load-balancing

我有以下要求。请在此提前为我提供一些帮助。

软件：- 1.Unix 2.apache 2.0 3.tomcat 6.0.35

当前场景： - 1.MOD_JK 连接 Apache 和 tomcat 2.Tomcat 有多个 Web 服务作为多个应用程序运行 3.Apache 作为负载平衡运行。3.会有多个Tomcat。

要求： - 1.有Web服务需要通过在同一个tomcat中运行的webservices连接到多个应用程序。所以要求是如何在tomcat中制作App来连接同一个tomcat中的Web服务而不需要负载均衡器。2.我想隐藏一些应用程序的上下文路径如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T14:51:25.707

添加另一个监听 127.0.0.1 的 HTTP 连接器并将流量路由到它。

虽然听起来不是一个特别整洁的设计。

# git - 为什么我不能使用 cygwin 推送到 GitHub？

> ID：13317928
> 
> 赞同：3
> 
> 时间：2012-11-10T00:23:40.443
> 
> 标签：git, cygwin

我正在尝试运行以下命令：

```
git push github master 
```

当我在 mintty 终端中运行此命令时，命令提示符只会挂起，直到我终止进程树。没有任何控制台输出。

```
bash.exe
  bash.exe
    git.exe
      git.exe
        git-remote-https.exe 
```

在窗口中运行完全相同的命令会`cmd`成功推送主分支。

远程配置是通过 HTTPS。

我的问题是，为什么这个命令可以在基本命令提示符下工作，但不能在 cygwin 下工作？

这与路径的解释方式有关吗？

我看过一个[与我的类似](https://stackoverflow.com/questions/9296740/cygwin-git-push-hangs-msysgit-ok)的问题，但他们的提示是请求用户名，但我的却没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-18T05:27:35.173

Cygwin 似乎对系统 Git 和 Cygwin Git 感到困惑。

我纠正这个问题的方法是卸载所有版本的 Git，然后重新安装你想要使用的 Git 版本。

要么使用Mac。:P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:10:32.067

您是否已将 cygwin ssh 的公钥添加到您的 github 帐户？

[https://github.com/settings/ssh](https://github.com/settings/ssh)

编辑：您必须登录到 github 才能获得上述链接

# c++ - 使用 p/invoke 将字符串数组从 C# 编组到 C 代码

> ID：13317931
> 
> 赞同：2
> 
> 时间：2012-11-10T00:24:05.193
> 
> 标签：c++, .net, interop, pinvoke, marshalling

我需要将一组 C# 字符串传递给 C 代码

示例 C 代码

```
void print_string_array(const char** str_array, int length){
    for (int i = 0; i < length; ++i) {
        printf("Sting[%l] = %s\n", i, str_array[i]);
    }
} 
```

我尝试过的 C#（这不起作用）

```
string foo[] = {"testing", "one", "two", "three"};  
print_string_array(foo, foo.Length);

[DllImport(my_C_dll, CharSet = CharSet.Ansi)]
private static extern void print_string_array([In][MarshalAs(UnmanagedType.LPArray, ArraySubType=UnmanagedType.LPStr)] string[] sa, int length); 
```

失败并出现 System.AccessViolationException System.AccessViolationException ：尝试读取或写入受保护的内存。这通常表明其他内存已损坏。

我也试过（这也没用）

```
string[] foo = {"testing", "one", "two", "three"};  
IntPtr[] s_array = new IntPtr[foo.Length];

for(int i = 0; i < foo.Length; ++i) 
{
    s_array[i] = Marshal.StringToCoTaskMemAnsi(foo[i])
}
print_string_array( s_array, s_array.Length);

[DllImport(my_C_dll, CharSet = CharSet.Ansi)]
private static extern void print_string_array(IntPtr[] sa, int length); 
```

这也失败了

```
System.AccessViolationException
System.AccessViolationException : Attempted to read or write protected memory. This is often an indication that other memory is corrupt. 
```

有人知道如何将字符串数组从 c# 传递到 C 吗？

* * *

更新：根据 David Heffernan 的建议添加了错误消息。在 C 代码中将 size_t 更改为 int ，因为它不会影响我尝试做的事情。仍然得到相同的错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-10T19:29:25.167

您可以像这样在 C# 中简单地声明您的函数：

```
[DllImport(my_C_dll, CallingConvention=CallingConvention.Cdecl)]
static extern void print_string_array([In] string[] str_array, IntPtr length); 
```

在编写时，您的 C++ 代码似乎使用`cdecl`调用约定。因此，您可能需要使 C# 声明匹配。我怀疑这是您面临的主要问题。

另请注意`size_t`，您用于`length`参数的 32 位进程中为 32 位宽，而 64 位进程中为 64 位宽。所以正确的 C# 类型是`IntPtr`. 就我个人而言，我会声明它同时出现`int`在 C++ 和 C# 代码中。

* * *

最后一句忠告。当您遇到失败时，请在您的问题中包含错误消息。我怀疑您的第一个代码因此错误而失败：

> 调用 PInvoke 函数 'MyApp!MyApp.Program::print_string_array' 使堆栈失衡。

如果您将其包含在问题中，那将是一个很大的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T18:08:04.470

您的第二次尝试非常接近。尝试以下操作：

```
string[] foo = {"testing", "one", "two", "three"};  
IntPtr[] s_array = new IntPtr[foo.Length];

for(int i = 0; i < foo.Length; ++i) 
{
    s_array[i] = Marshal.StringToHGlobalAnsi(foo[i])
}
GCHandle gH = GCHandle.Alloc(s_array, GCHandleType.Pinned);
print_string_array( gH.AddrOfPinnedObject(), s_array.Length);
gH.Free();
for(int i = 0; i < foo.Length; ++i) 
{
    Marshal.FreeHGlobal(s_array[i])
}

[DllImport(my_C_dll, CharSet = CharSet.Ansi)]
private static extern int print_string_array(IntPtr sa, int length); 
```

# android - 根据gridview android的位置更新textview

> ID：13317939
> 
> 赞同：0
> 
> 时间：2012-11-10T00:25:04.597
> 
> 标签：android, android-layout

有人可以告诉我如何根据 gridview 的位置更新 textview。我有一个gridview，它显示了每个月的日期的一些值，顶部的textview是月份的名称，现在我希望当我滚动到让我们说一月的底部并在二月开始滚动时，顶部的textview从一月更新到二月？我目前在数组列表中拥有针对每个日期的值（如果此信息有任何帮助）任何想法或提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T03:39:35.260

有点棘手，但可以做到。

1.  创建自定义 Adapter 并将 TextView 的 View 作为参数传递
2.  在 getView 函数中，您可以获取最近渲染视图的位置，在这里您可以更改 TextView。

希望这会帮助你。

# java - Java 新接口实例语法 - 发生了什么？

> ID：13317941
> 
> 赞同：3
> 
> 时间：2012-11-10T00:25:34.680
> 
> 标签：java, interface

如下声明接口的新实例时会发生什么：

```
OnClickListener oc = new OnClickListener(){
    @Override
    public void onClick(View v){
         //Something
    }
}; 
```

方法`onClick`存储在哪里？它必须在某种类存储中？这是否意味着该语法创建了一个未命名的类并隐式实现了 OnClickListener 接口？如果是这样，你怎么能将不同的`OnClickListener`对象分配给彼此？当然，由于它们是“隐式”不同的类类型，因此不可能分配两个不同的类。

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T00:27:24.287

它被称为*匿名类*。

如果你的代码在 File 中`Foo.java`，并且你编译它，你会得到`Foo.class`第`Foo$1.class`一个匿名类。（`Foo$2.class`等等更多匿名类）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T00:28:08.017

```
OnClickListener oc = new OnClickListener(){
    @Override
    public void onClick(View v){
         //Something
    }
}; 
```

是java中的一个**匿名类**。您正在创建一个实现**OnClickListener****的****匿名类（没有类名）**。**因此，在您的接口onClickListener**中定义的方法**OnClick()**正在此处实现。

 ******* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T00:41:00.753

这里发生的事情是您正在 java 中创建一个实现 OnClickListener 接口的“内部匿名类”。这导致 oc 引用变量引用由实例化产生的对象（这就是 onClick 方法的实现所在的位置）。

这种类型的赋值是完全有效的，可以为 oc 引用变量分配 OnClickListener 实现的另一个实例，因为它们都是相同的类型（实现相同的接口），在这种情况下，原始的“匿名内部类”将有资格垃圾收集，因为对它的引用“零”。

干杯; 哈斯。******

# c++ - C ++中的基类未定义错误

> ID：13317949
> 
> 赞同：1
> 
> 时间：2012-11-10T00:26:26.927
> 
> 标签：c++, header

- -更新 - -

在我的项目中包含头文件和 cpp 文件时遇到问题，所以这里是文件：Person.h

```
#ifndef PERSON_H
#define PERSON_H

class Person {
private:
string firstName;
string lastName;
long NID;

public:
Person();
void toString();

string get_firstName() {
    return firstName;
}

string get_lastName() {
    return lastName;
}

long get_NID() {
    return NID;
}
};

#endif 
```

扩展 Person Teacher.h 的教师

```
#include "Person.h"
#include <iostream>

#ifndef TEACHER_H
#define TEACHER_H

class Teacher : public Person {
private:
int avg_horarium;

public:
Teacher();
void toString();

int get_avg_horarium() {
    return avg_horarium;
}
};

#endif 
```

然后是 Teacher.cpp：

```
#include "Teacher.h"
using namespace std;

Teacher::Teacher() : Person() {
cout << "Enter average monthly horarium: ";
cin >> avg_horarium;
}

void Teacher::toString() {
Person::toString();
cout << "Average monthly horarium: " << avg_horarium;
} 
```

扩展 Person 的另一个类是 Student，由于它与老师相似，我不会在这里发布它。我的问题是我做错了什么才能在屏幕截图上显示所有这些错误：http: [//s14.postimage.org/45k08ckb3/errors.jpg](http://s14.postimage.org/45k08ckb3/errors.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T00:45:38.050

问题是您对`stdafx.h`文件的错误处理。在 MSVC 编译器中，启用预编译头文件时，将*忽略*`#include "stdafx.h"`line之前的所有内容。

 *首先，停止包含`stdafx.h`在头（`.h`）文件中。`stdafx.h`应该包含在实现（`.cpp`）文件中。在您的情况下，`#include "stdafx.h"`应放入`Person.cpp`and`Teacher.cpp`中，而不是放入`Person.h`and`Teacher.h`中。

其次，要么禁用项目中的预编译头文件，要么确保它`#include "stdafx.h"`始终是每个实现文件中*第一个有意义的行。*所有其他`#include`指令都应该在*之后* `#include "stdafx.h"`，而不是之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T00:29:48.797

在你的头文件中放置；

```
 #ifndef CLASSNAME_H
 #define CLASSNAME_H 
```

在文件的顶部，`include`语句之后，类声明之前。放

```
#endif 
```

在所有代码之后的文件底部。这确保了类只定义一次。对同一个头文件有多个包含通常会导致链接问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T00:33:38.943

只需在头球上放一个后卫

IE

```
#ifndef _THIS_FILENAME
#define _THIS_FILENAME

wibble etc

#endif 
```

**编辑**

忘了提到使用前向声明 - 节省了重新编译的费用。*

# eclipse - 使用eclipse调试tomcat web app

> ID：13317953
> 
> 赞同：3
> 
> 时间：2012-11-10T00:27:03.093
> 
> 标签：eclipse, tomcat

正如标题所说，我想通过eclipse在tomcat中调试web应用程序。我遵循了这些说明：http://www.wikijava.org/wiki/Debugging_a_servlet_with_tomcat_and_Eclipse_tutorial 基本上，我所做的是设置 JPDA 并从 Eclipse 中启动服务器。然后我将 eclipse 调试器连接到服务器。但是，当我尝试从浏览器访问网页时，出现 404 错误。我之前在eclipse中运行过tomcat（非调试模式），我可以得到网页。

所以我的猜测是因为我的工作区不是tomcat中的webapp文件夹。（我按照这个网页安装tomcat和eclipse [http://www.coreservlets.com/Apache-Tomcat-Tutorial/tomcat-7-with-eclipse.html](http://www.coreservlets.com/Apache-Tomcat-Tutorial/tomcat-7-with-eclipse.html)）如果我从eclipse中运行tomcat，它会尝试在tomcat的webapp文件夹中搜索请求，找不到。那么我可以通过将我的eclipse工作区设置为tomcat中的webapp文件夹来解决这个问题吗？我不认为它会起作用，因为tomcat的webapp中的文件系统结构与eclipse的动态web项目的文件系统结构有很大的不同。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-06T14:29:19.463

如果您已经配置了从 Eclipse 启动的 Tomcat 服务器。您必须打开服务器，然后单击鼠标右键打开属性。在打开的新窗口中选择监控，然后单击添加按钮（使用参数 HTTP/1.1，应该有启动 Web 服务器的端口，以及任何你想要的监控端口）。然后只需放置断点并在调试模式下启动您的项目。一切都应该有效。

[在此处检查打印屏幕](http://i58.fastpic.ru/big/2013/1206/d1/35d8c9bffb271e33165af6fd15815ad1.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T00:41:02.540

我不知道您使用的是哪个版本的 Eclipse，但这是最简单的方法。

1.  为 Eclipse 安装 Web 工具[http://www.eclipse.org/webtools/](http://www.eclipse.org/webtools/)
2.  为 Tomcat 创建一个服务器（文件/新建/其他...->服务器/服务器）。

这会将 Tomcat 集成到您的开发环境中。项目自动部署，代码在调试器中自动可用。就是这么简单。并且免费。不要等待。

# php - 删除在购物车中显示捆绑产品价格 +0.00 英镑 - Magento

> ID：13317955
> 
> 赞同：1
> 
> 时间：2012-11-10T00:27:10.920
> 
> 标签：php, html, magento, shopping-cart

我查看了我可以看到的代码，该代码将与显示此内容相关联，但没有任何运气。

我们有一些捆绑产品，您可以更换价格为 0.00 英镑的配件（即颜色/插头）（已设法从实际产品页面中删除）。然而，在他们展示的购物篮上，无论如何都可以删除或隐藏价格。查看图片以获得更清晰的理解：

![在此处输入图像描述](../Images/04cc53e648dd0af445bbf08ed9c1a806.png)

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T13:58:02.783

假设您想从所有项目中删除它而不考虑价格，那么您可以添加这个 css

```
#shopping-cart-table dd span.price{
    display:none;
} 
```

如果您只想删除价格为零的价格，您可以查看 /app/design/frontend/default/{theme path}/template/checkout/cart/item/default.phtml （在第 46 行附近)

*   找出添加价格的位置，仅在价格大于 0 时附加价格

或者

*   在显示该行的字符串上查找替换`str_replace("£0.00", "", $_formatedOptionValue['value'])`（确保添加货币符号，以免 10.00 英镑被替换）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T05:01:00.057

你也可以试试 `.item-options dd span.price{ display:none; }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-19T13:12:35.700

您的解决方案有效，但不是解决此问题的方法。我有一个解决方案给你，所以你可以试试这个:)

打开`Magento\Bundle\Helper\Catalog\Product\Configuration.php`

```
public function getBundleOptions(ItemInterface $item){

} 
```

从此功能中删除价格。

谢谢

# javascript - Flex 通过 flash vars 将值从 html 传递到 flex 组件

> ID：13317957
> 
> 赞同：1
> 
> 时间：2012-11-10T00:27:25.940
> 
> 标签：javascript, html, apache-flex, flashvars

我有以下代码，它不会打印我想从 javascript 传递的值。如果有人能指出我所犯的错误，我将不胜感激。

HTML 我将 template.html 中的代码编辑如下，包括 IP=test 和 IP=192.168.11.2 如下

```
<param name="flashvars" value="IP=Test" />
<param name="allowFullScreen" value="true" />
<!--[if !IE]>-->
<object type="application/x-shockwave-flash" data="${swf}.swf" width="${width}" height="${height}" flashVars="IP=192.168.11.2">
     <param name="quality" value="high" />
     <param name="bgcolor" value="${bgcolor}" />
     <param name="allowScriptAccess" value="sameDomain" />
     <param name="allowFullScreen" value="true" />
     <param name='flashVars' value='IP=192.168.11.2'/> 
```

我的弹性代码如下

```
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml"
            xmlns:fx="http://ns.adobe.com/mxml/2009"
            xmlns:s="library://ns.adobe.com/flex/spark"
            layout="absolute" viewSourceURL="srcview/index.html" creationComplete="{init();}">
<mx:Script><![CDATA[
[Bindable] private var ip_string:String;
private function init():void {
ip_string = Application.application.parameters.IP;
iplabel.text = ip_string;
}

]]>
</mx:Script>

<mx:Panel id="namePanel" width="1257" height="168" layout="absolute" alpha="1" roundedBottomCorners="true" borderStyle="none" cornerRadius="4" horizontalAlign="center" verticalAlign="middle" backgroundColor="#001e2a18" horizontalCenter="-136" verticalCenter="-411" fontSize="15" backgroundAlpha="0" color="#003e1e1e" themeColor="16316412">
<mx:Label x="21" y="5" text="UBI-Collage Gallery" width="1197" height="67.95" alpha="1" styleName="MyTextStyle" fontFamily="woodcut" fontSize="60" color="#00090908" textAlign="center" fontWeight="normal"/>
<mx:Label id="iplabel" x="90" y="85" styleName="codeStyle" textAlign="center" color="#00000000" fontFamily="woodcut" fontSize="32" text="IP"/>
</mx:Panel>
</mx:Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T06:18:03.527

您需要在应用程序生命周期的某些事件中读取参数，

1-首先在Application标签中注册一个事件Listner

**creationComplete="{handlerCreationComplete(event)}"**

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" 
               xmlns:local="*"
               creationComplete="{handlerCreationComplete(event)}"
               > 
```

2- 在脚本部分定义监听函数并使用**FlexGlobals.topLevelApplication**

```
protected function handlerCreationComplete(event:FlexEvent):void
{
    var ip:String = FlexGlobals.topLevelApplication.parameters.IP;
    Alert.show(ip);
} 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T23:48:32.767

如下更改嵌入代码就可以了。

```
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
        id="index" width="1550" height="1030"
        codebase="http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab"
        align="middle">
        <param name="movie" value="UbiPictureViewer.swf" />
        <param name="quality" value="high" />
        <param name="bgcolor" value="#869ca7" />
        <param name="allowScriptAccess" value="sameDomain" />
        <embed src="UbiCollage.swf" quality="high" bgcolor="#869ca7"
            width="1550" height="1030" name="index" align="middle"
            play="true"
            loop="false"
            quality="high"
            allowScriptAccess="sameDomain"
            flashVars="IP=<%=IP %>"
            type="application/x-shockwave-flash"
            pluginspage="http://www.adobe.com/go/getflashplayer">
        </embed>
</object> 
```

# nuget-server - 为什么使用 NuGet.Server 时没有包源

> ID：13317960
> 
> 赞同：3
> 
> 时间：2012-11-10T00:27:51.353
> 
> 标签：nuget-server

我按照nuget.org 上的[创建远程提要说明创建了一个服务器。](http://docs.nuget.org/docs/creating-packages/hosting-your-own-nuget-feeds)我创建了一个 .NET 4.0 项目并导入了 NuGet.Server 包，将我自己的 NuGet 包文件放在 /Packages 中，并将其作为 IIS 7.5 下的 ASP.Net 4.0 应用程序运行。一切似乎都正常，除了如果我尝试在 ~/nuget 查看包提要时收到 404 消息。似乎原子提要根本没有开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:31:42.137

你试过~/nuget/Packages吗？您可以验证在启动时将路由添加到您的应用程序吗？

在旁注中，可能值得探索[MyGet](http://www.myget.org)或[ProGet](http://www.inedo.com)作为您自己的提要的替代品。

# ios - 配置和构建问题

> ID：13317962
> 
> 赞同：0
> 
> 时间：2012-11-10T00:28:12.797
> 
> 标签：ios, xcode

在 XCode 中更新 iPhone 应用程序上的一些代码后，我尝试构建应用程序的分发版本。我昨天以完全相同的方式构建它并且它工作。这是这次发生的事情：

> Xcode 无法使用所选设备运行。没有提供兼容 iOS 版本的预置 iOS 设备。将 iOS 设备与最新版本的 iOS 连接以运行您的应用程序或选择 iOS 模拟器作为目标。

我检查了 Xcode 中的版本号，看起来不错：iOS 部署目标是 5.1，基本 SDK 是最新的 iOS (iOS6)。

在检查配置文件的管理器时，我单击“刷新”并出现以下错误消息：“没有为参数 'appIdName' 提供值。”。

我尝试重新发布分发配置文件，但这没有奏效。

有没有人有任何想法？我检查了以前的线程，似乎没有一个适用。可能是因为我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T04:07:50.850

*   使用清理、清理文件夹、删除派生数据清理您的项目。
*   从“管理方案”中删除所有方案。重新创建它们，并使用其中任何一个包含 iPhone 模拟器版本（之前工作的那个）的任何一个进行构建。

如果这不起作用，请尝试以下操作：

*   使用清理、清理文件夹、删除派生数据清理您的项目。
*   使用您最喜欢的编辑器，尝试从您的 project.pbxproj 文件（使用归档实用程序打开 xcode 项目时看到的文件）中清除所有配置文件字符串（以 Provisioning Profile 开头的行）。
*   然后重启xcode。使用自动配置文件选择器选择配置文件并使用 iphone 模拟器方案构建。如果没有显示配置文件，请刷新 XCode 管理器以从 Apple 门户下载您的配置文件，然后再次尝试构建。

# json - 寻找嵌入 Meteor 的 JSON 编辑器——最好有多个选择/光标

> ID：13317963
> 
> 赞同：1
> 
> 时间：2012-11-10T00:28:13.340
> 
> 标签：json, editor, meteor, highlighting, ace-editor

我正在寻找一个好的 JSON 编辑器，尤其是在我的 Meteor 项目中嵌入多个选择/光标。我想知道是否已经有 Meteor 可用。我看过这个：[http](http://en.wikipedia.org/wiki/Comparison_of_JavaScript-based_source_code_editors) ://en.wikipedia.org/wiki/Comparison_of_JavaScript-based_source_code_editors但 Meteor 使用 Handlebars 模板框架，我不确定 JSON 编辑器如何与 Handlebars 啮合。有任何想法吗？

编辑：我想使用 Mozilla/Cloud 9 的 ACE。关于如何将其与 Meteor 集成的任何想法？

编辑：目前，我的代码如下所示（在单独的文件中）：

```
<script src="http://d1n0x3qji82z53.cloudfront.net/src-min-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>

<template name="canvas">
<div id="canvas">
{{#each jsons}}
<div draggable="true" class="json" id="json_{{_id}}">
    {{title}}<br/>
    <input type="file" accept="text/json"/>
    <hr/>
    <div class="editor" id="text_{{_id}}">{{data}}</div>
</div>
{{/each}}
</div>
</template>

var editor = ace.edit("text_"+json_id);
editor.setTheme("ace/theme/monokai");
editor.getSession().setMode("ace/mode/javascript");

.editor {
    position: absolute;
    top: 60px;
    left: 0px;
    right: 0px;
    bottom: 0px;
} 
```

我遇到的一个问题是，当 {{data}} 被替换时，编辑器就会消失。有谁知道修复它的好方法？我将尝试重新初始化。

编辑：这里的类似问题：[订阅集合中的更改但不在模板中](https://stackoverflow.com/questions/10201106/subscribing-to-changes-in-a-collection-but-not-in-a-template)

这是我自动订阅的方式。

```
 Meteor.autosubscribe(function () {
   Meteor.subscribe("jsons");
 }); 
```

使用最初创建编辑器的鼠标操作重新创建 ace 编辑器有效，但从代码重新初始化（从 FileReader 加载后）似乎不起作用，编辑器消失，打印出漂亮的文本，看起来又像一个普通的 div ：

```
 Template.canvas.dragStart();
    $('#json_'+value._id+' input').on('change', function(ev) {
      var target = ev.target != null ? ev.target : ev.srcElement;
      var json_id = value._id;
      _.each(target.files, function(file) {
          var r = new FileReader();
          r.onload = function(e) {
                  Jsons.update({_id: json_id},
                          {$set: {data: JSON.stringify(JSON.parse(e.target.result),null,"\t") }});
                    $('.json')
                            .draggable('disable');
                    var editor = ace.edit("text_"+json_id);
                    editor.setTheme("ace/theme/monokai");
                    editor.getSession().setMode("ace/mode/javascript");
          }
          r.readAsText(file);
      });
    });
    $.each(value.inputPorts, Template.canvas.renderPort);
    $.each(value.outputPorts, Template.canvas.renderPort); 
```

编辑：另外，我希望编辑器也能像 Meteor 一样成为协作多用户。

编辑：这看起来很棒：[http](http://asteroid.meteor.com/) ://asteroid.meteor.com/ 源代码在哪里？约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-17T08:00:47.433

您可能想看看它支持大多数语言的[Ace Editor 。](http://ace.c9.io/#nav=howto)

# wordpress - 使用链接登录 WordPress

> ID：13317964
> 
> 赞同：1
> 
> 时间：2012-11-10T00:28:15.503
> 
> 标签：wordpress, authentication

我有一个 Wordpress 网站，它针对我们学校的基于 Web 的数据库系统进行身份验证。所有用户都有一组由系统设置的登录凭据。如果您想进入两个系统，而用户/通行证是相同的，您必须分别登录到每个系统。

我想要的是所有用户首先登录到我们的数据库。在页面中，我想发布指向 WP 的仅限订阅者部分的链接。由于我们的数据库知道用户的凭据，我在想我们可以格式化一个链接来让他们自动登录。

这可能吗？如果可以，怎么做？

此外，这是否是一种让用户不必再次登录的安全方法（假设身份验证链接位于安全门户后面）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T13:39:45.077

您正在描述单点登录解决方案。有几个不错的选择，但它们都使用相同的基本技术。

由于您的 wordpress 安装已经有了 PHP 环境，因此最简单的可能是使用[simplesamlPHP](http://simplesamlphp.org/)的 SAML 。

您可以将其设置为身份提供者并将其指向您的用户数据库（可能需要根据密码的加密方式进行一些调整，但如果您能够让 Wordpress 以某种方式使用它，那么应该可以）

您的 Wordpress 网站和您的“数据库”（我假设的另一个网络应用程序？）基本上都会信任身份提供者来验证用户身份。该过程对用户来说可能看起来有点不同，因为他们将使用新的登录表单进行身份验证。您可以[将此插件](http://wordpress.org/extend/plugins/simplesamlphp-authentication/)用于 WP，我相信还有其他插件。

棘手的可能是另一个应用程序。除非它基于一些流行的框架，否则您可能需要进行一些编码才能使其工作。SimpleSAMLphp 可以再次帮助您 - 阅读服务提供商。

# java - 瓷砖的二维数组列表

> ID：13317979
> 
> 赞同：1
> 
> 时间：2012-11-10T00:30:19.667
> 
> 标签：java, tile

我现在有一个数组，

```
 static int[][] map = new int[WIDTH][HEIGHT]; 
```

此代码在地图上放置图块：

```
for (int y = 18; y < HEIGHT; y++) {
        for (int x = 0; x < WIDTH; x++) {
            map[x][y] = STONE;
        }

    }

    for (int y = 18; y < 19; y++) {
        for (int x = 0; x < WIDTH; x++) {
            map[x][y] = GRASS;
        }

    }

    for (int y = 19; y < 20; y++) {
        for (int x = 0; x < WIDTH; x++) {
            map[x][y] = DIRT;
        }

    } 
```

这是我渲染它们的方式：

```
for (int x = 0; x < WIDTH; x++) {
        for (int y = 0; y < HEIGHT; y++) {
            switch (map[x][y]) {
            case CLEAR:
                air.draw(x * TILE_SIZE, y * TILE_SIZE, TILE_SIZE, TILE_SIZE);
                break;
            case STONE:
                stone.draw(x * TILE_SIZE, y * TILE_SIZE, TILE_SIZE, TILE_SIZE);
                break;
            case GRASS:
                grass.draw(x * TILE_SIZE, y * TILE_SIZE, TILE_SIZE, TILE_SIZE);
                break;
            case DIRT:
                dirt.draw(x * TILE_SIZE, y * TILE_SIZE, TILE_SIZE, TILE_SIZE);
                break;
            }
        }
    } 
```

如何转换此代码以用二维数组列表替换数组映射，以便我可以像我的世界一样删除这些图块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T00:34:09.130

尝试

```
ArrayList<ArrayList<Integer>> map = new ArrayList<ArrayList<Integer>>(); 
```

基本上，您将创建一个数组列表的数组列表，这些列表又是整数列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T00:39:03.800

就个人而言，我会用一个`List`，并使用数学来确定我正在查看的瓷砖。

```
List<Integer> map = new ArrayList<Integer>(WIDTH * HEIGHT); 
```

要找到您感兴趣的索引，您可以这样做：

```
//note that this is 0 based

//find (0,0)
map.get(0 * WIDTH  + 0);

//find (0,1)
map.get(0 * WIDTH  + 1);

//find (1,0)
map.get(1 * WIDTH  + 0);

//In general
//find (x,y)
map.get(x * WIDTH  + y); 
```

然后，您可以使用相同的数学将值设置到`List`.

```
map.set(x * WIDTH + y, STONE); 
```

# command-line - 授权命令行工具使用 Google API（通过 OAuth2.0 或其他任何方式）

> ID：13317987
> 
> 赞同：27
> 
> 时间：2012-11-10T00:31:42.950
> 
> 标签：command-line, oauth, authorization, google-api, oauth-2.0

我*想*我了解 OAuth 2.0 在移动应用程序或网站的上下文中是如何工作的——我的情况也不是。

我有一个 C++**命令行**应用程序，我想授予对其中一项 Google 服务（[Google Fusion Tables](https://developers.google.com/fusiontables/)）的访问权限，但我认为这个问题适用于任何 Google 服务，或者见鬼，也许也适用于任何必须处理的命令行应用程序使用 OAuth2。

我有用户名。我有密码（用户输入的）。我需要获得一个令牌，这样我才能通过 Curl 拨打电话。实现这一目标的最简单方法是什么？

**更新1：**

在浏览了文档之后，似乎最不痛苦的 OAuth2 流程将是[“已安装的应用程序”](https://developers.google.com/accounts/docs/OAuth2InstalledApp)流程。

我在想的是，我的命令行工具将在不需要令牌的情况下发出对公共表的请求（但似乎我们仍然需要从 Google 发送 AppID，我可以从 Google API 仪表板获取）。

每当我的命令行工具需要使用私有资源时，该用户都需要提供 Google 提供的*授权代码*（然后我的命令行工具可以使用它来获取可用的*令牌*）。如果用户没有在命令行中提供*授权码*，我的工具只会打印一个链接，用户可以将其粘贴到 URL 以生成授权码。该链接如下所示：

[https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/fusiontables&redirect_uri=urn:ietf:wg:oauth:2.0:oob&response_type=code&client_id=812741506391-h38jh0j4fv0ce1krdkiq0hfvt6n5amrf。 apps.googleusercontent.com](https://accounts.google.com/o/oauth2/auth?scope=https://www.googleapis.com/auth/fusiontables&redirect_uri=urn:ietf:wg:oauth:2.0:oob&response_type=code&client_id=812741506391-h38jh0j4fv0ce1krdkiq0hfvt6n5amrf.apps.googleusercontent.com)

一旦用户接受，她必须将该*授权代码*粘贴到终端，以便命令行工具可以使用它。命令行工具将使用授权代码向 Google 请求*令牌*，最后，我可以使用 Google 令牌进行 API 调用。

有几件事我还不清楚。授权码会变吗？如果是这样，我似乎需要在某处保存令牌并刷新令牌，以便每次令牌过期时我都可以重用刷新令牌。

是我一个人，还是这整件事看起来像是疯狂的谈话，只是为了让我可以从命令行使用 Google API？

我通常会使用[ClientLogin flow](https://developers.google.com/accounts/docs/AuthForInstalledApps)，但一切似乎都表明它很快就会被弃用。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-14T15:30:07.307

## 要回答有关“已安装应用程序”流程的问题：

**授权码**只有效一次。在您交换它之后 - 并获得了一个**刷新令牌**和一个**访问令牌**- 它将不再可用。把它扔掉。它只是一次性使用，您不再需要它。您需要做的只是将**刷新令牌**保留/保存/持久保存在某个本地文件中以供重用。

**刷新令牌**是重要的令牌*。*它使您可以无限期地访问 API，因为您可以使用它以编程方式获取新的**访问令牌**（有效期为 1 小时）。检查有关该操作的[刷新令牌文档。](https://developers.google.com/accounts/docs/OAuth2WebServer#refresh)

Google APIs 客户端库通常会自动且透明地为您处理令牌刷新，但由于我们没有 C++ 客户端库，您需要自己执行此操作。我们使用的一种技术是在向 API 发出请求时捕获 403 错误（这表明**访问令牌**无效），在这种情况下，我们会进行刷新以获取新的**访问令牌**，然后自动重试最初失败的操作。

## 我的建议：

为您提供最佳用户体验的流程是使用服务器端 Web 应用程序流程。可以在已安装和/或命令行应用程序上使用它，尽管它的工作量更大。方法如下：

1.  在用户机器上启动一个本地网络服务器，监听一个空闲端口（例如`http://127.0.0.1:7777`：）
2.  生成一个 Web 浏览器窗口（或将其嵌入您的应用程序）将用户重定向到 Google OAuth 2.0 授权页面并将重定向 URI 设置为`http://127.0.0.1:7777`
3.  当用户授予应用程序访问权限时，它会被重定向到您正在监听的服务器`http://127.0.0.1:7777`。
4.  在您的本地 Web 服务器上，您会获得 URL 查询参数中的身份验证代码。您现在可以交换身份验证代码以获取您保留的访问和刷新令牌
5.  杀死/关闭您在步骤 1 中启动的本地 Web 服务器
6.  杀死/关闭您在步骤 2 中生成的浏览器实例

就是这样，您现在拥有了刷新和访问令牌（来自第 4 步），并且您在杀死浏览器后又回到了您的应用程序中。

## 为什么这一切都是一团糟？

客户端登录已被弃用。它正在消失，并且不适用于较新的 API。谷歌不希望用户给你他们的密码，因为你可能想存储它，你可能会被黑客入侵:)) 此外，它让你可以访问太多信息，因为你可以用他们的 Google Checkout 帐户购买东西或更改密码以窃取他们的帐户。目前，从安全角度出发的唯一方法是使用像 OAuth2 这样的三足身份验证系统，并且不鼓励使用密码，以便用户摆脱将用户名和密码提供给第三方的习惯。当然，OAuth2 更难用于桌面/命令行应用程序......

## OOB 替代方案

如果您不想或无法启动 Web 服务器来侦听代码，则可以使用`oob`OAuth 流程。它通过简单地指定`oob`为重定向 URI 来工作。在这种情况下，用户不会被重定向到给定的 URL，而是会看到一个页面，上面写着“这是您的身份验证代码。将其复制粘贴到您的应用程序中。”。在您的应用程序上，您可以简单地让您的用户将身份验证代码粘贴到文本字段中，然后瞧。这是一种更糟糕的用户体验，但在某些情况下可能更强大，并且可以在更多环境中工作，尤其是低技术环境。

请注意，并非所有 OAuth 2 提供商都支持，但至少 Google 和 Facebook 支持。

# php - 清理 URLs mod_rewrite 和通配符子域

> ID：13317988
> 
> 赞同：0
> 
> 时间：2012-11-10T00:32:11.983
> 
> 标签：php, mod-rewrite, subdomain

我得到了这个网址

[http://domain.com/blogs/directory-param](http://domain.com/blogs/directory-param)

有了这个规则

RewriteBase /blogs/directory/ RewriteRule ^/blogs/directory-([A-Za-z0-9-]+)$ /blogs/directory/index.php?cat=$1 [L]

所以我得到 /blogs/directory/index.php?cat=param 现在我的问题如下：

我使用通配符子域，因此每个 *.domain.com 都映射到 domain.com/blogs/ 例如 soeren.domain.com 映射到 domain.com/blogs 等等...

我现在的问题是我想要一个指向 domain.com/blogs/directory?index.php?cat=param 的 soeren.domain.com/directory-param 规则

你有什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:37:14.353

好吧，要删除子域部分，请尝试外部重定向：

```
RewriteCond %{HTTP_HOST} ^([^.]+)\.domain\.com$
RewriteRule (.*) http://domain.com$1 [R,L,QSA] 
```

这是您现有规则的补充和之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T22:57:21.980

这最终对我有用：

```
RewriteCond %{HTTP_HOST} ^[^.]+\.domain\.com$  
RewriteCond %{REQUEST_URI} !^/directory(/|$)  
RewriteRule ^blogs/directory-([A-Za-z0-9-]+)$ /directory/index.php?cat=$1 [L,QSA] 
```

@Archimedix：非常感谢！

# google-maps-api-3 - 行驶距离区域

> ID：13317990
> 
> 赞同：1
> 
> 时间：2012-11-10T00:32:32.407
> 
> 标签：google-maps-api-3

有没有办法通过 Google Maps API 在给定中心点的给定行驶时间内确定边界多边形？

如果做不到这一点，有没有办法计算驾驶时间函数的倒数——也就是说，不是“从 A 点到 B 点需要多少分钟”，而是问“我会走多远”在一定分钟内从 A 点到 B 点？” 当然，我可以只找到点之间的时间并假设天真的缩放，但如果速度限制在路线的重要部分变化很大，那可能会很遥远。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-04-29T01:24:42.303

*   [Marcelo 的原始驾驶半径演示](http://www.geocodezip.com/v2_marcelo_driveTimePolygon.html)原始链接现已失效。

*   [Marcelo 的驾驶半径演示移植到 v3](http://www.geocodezip.com/v3_marcelo_driveTimePolygon.html)

**注意：**由于 Google 的政策更改（错误），这些示例不再有效`You have exceeded your request quota for this API.`，请将 API 密钥替换为有效的密钥，它们将有效）

[![在此处输入图像描述](../Images/4df56351dfd8c6ffc8f8e3f94c20030b.png)](https://i.stack.imgur.com/9XOoq.png)

**代码片段：**

```
var map;
var container;
var zoom = 9;
var centerPoint = new google.maps.LatLng(35.149534, -90.04898);
var dirService = new google.maps.DirectionsService();
var centerMarker;
var circleMarkers = Array();
var circlePoints = Array();
var drivePolyPoints = Array();
var searchPolygon, drivePolygon;
var distToDrive = 30; // miles
var pointInterval = 30;
var searchPoints = [];
var polyline;
var polylines = [];
var redIcon8 = "https://maps.gstatic.com/intl/en_us/mapfiles/markers2/measle.png";

function initialize() {
  map = new google.maps.Map(
    document.getElementById("map_canvas"), {
      center: centerPoint,
      zoom: 9,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });
  google.maps.event.addListener(map, "click", mapClick);
}
google.maps.event.addDomListener(window, "load", initialize);

function mapClick(evt) {
  // map.clearOverlays();
  circleMarkers = Array();
  if (!centerMarker) {
    centerMarker = new google.maps.Marker({
      position: evt.latLng,
      map: map
    });
  } else {
    centerMarker.setMap(null);
    centerMarker.setPosition(evt.latLng);
  }
  centerMarker.setMap(map);
  searchPoints = getCirclePoints(evt.latLng, distToDrive);
  drivePolyPoints = Array();
  getDirections();
}

function getCirclePoints(center, radius) {
  var bounds = new google.maps.LatLngBounds();
  var circlePoints = Array();
  var searchPoints = Array();
  with(Math) {
    var rLat = (radius / 3963.189) * (180 / PI); // miles
    var rLng = rLat / cos(center.lat() * (PI / 180));
    for (var a = 0; a < 361; a++) {
      var aRad = a * (PI / 180);
      var x = center.lng() + (rLng * cos(aRad));
      var y = center.lat() + (rLat * sin(aRad));
      var point = new google.maps.LatLng(parseFloat(y), parseFloat(x), true);
      bounds.extend(point);
      circlePoints.push(point);
      if (a % pointInterval == 0) {
        searchPoints.push(point);
      }
    }
  }
  searchPolygon = new google.maps.Polygon({
    paths: circlePoints,
    strokeColor: '#0000ff',
    strokeWeight: 1,
    strokeOpacity: 1,
    fillColor: '#0000ff',
    fillOpacity: 0.2
  });
  searchPolygon.setMap(map);
  map.fitBounds(bounds);
  return searchPoints;
}

function getDirections() {
  if (!searchPoints.length) {
    return;
  }
  var to = searchPoints.shift();
  var request = {
    origin: centerMarker.getPosition(),
    destination: to,
    travelMode: google.maps.TravelMode.DRIVING
  };
  dirService.route(request, function(result, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      var distance = parseInt(result.routes[0].legs[0].distance.value / 1609);
      var duration = parseFloat(result.routes[0].legs[0].duration.value / 3600).toFixed(2);
      var path = result.routes[0].overview_path;
      var legs = result.routes[0].legs;
      if (polyline && polyline.setPath) {
        polyline.setPath([]);
      } else {
        polyline = new google.maps.Polyline({
          path: [],
          // map: map,
          strokeColor: "#FF0000",
          strokeOpacity: 1
        });
      }
      for (i = 0; i < legs.length; i++) {
        var steps = legs[i].steps;
        for (j = 0; j < steps.length; j++) {
          var nextSegment = steps[j].path;
          for (k = 0; k < nextSegment.length; k++) {
            polyline.getPath().push(nextSegment[k]);
            // bounds.extend(nextSegment[k]);
          }
        }
      }
      // polyline.setMap(map);
      shortenAndShow(polyline);
      getDirections();
    } else {
      console.log("Directions request failed, status=" + status + " [from:" + request.origin + " to:" + request.destination + "]");
      getDirections();
    }
  });
}

function shortenAndShow(polyline) {
  var distToDriveM = distToDrive * 1609;
  var dist = 0;
  var cutoffIndex = 0;
  var copyPoints = Array();
  for (var n = 0; n < polyline.getPath().getLength() - 1; n++) {
    dist += google.maps.geometry.spherical.computeDistanceBetween(polyline.getPath().getAt(n), polyline.getPath().getAt(n + 1));
    //GLog.write(dist + ' - ' + distToDriveM);
    if (dist < distToDriveM) {
      copyPoints.push(polyline.getPath().getAt(n));
    } else {
      break;
    }
  }
  var lastPoint = copyPoints[copyPoints.length - 1];
  var newLine = new google.maps.Polyline({
    path: copyPoints,
    strokeColor: '#ff0000',
    strokeWeight: 2,
    strokeOpacity: 1
  });
  newLine.setMap(map);
  polylines.push(newLine);
  drivePolyPoints.push(lastPoint);
  addBorderMarker(lastPoint, dist)
  if (drivePolyPoints.length > 3) {
    if (drivePolygon) {
      drivePolygon.setMap(null);
    }
    drivePolygon = new google.maps.Polygon({
      paths: drivePolyPoints,
      strokeColor: '#00ff00',
      strokeWeight: 1,
      strokeOpacity: 1,
      fillColor: '#00ff00',
      fillOpacity: 0.4
    });
    drivePolygon.setMap(map);
  }
}

function addBorderMarker(pt, d) {
  var str = pt.lat().toFixed(6) + ',' + pt.lng().toFixed(6) + ' - Driving Distance: ' + (d / 1609).toFixed(2) + ' miles';
  var marker = new google.maps.Marker({
    position: pt,
    icon: redIcon8,
    title: str
  });
  circleMarkers.push(marker);
  marker.setMap(map);
}

function clearOverlays() {
  for (var i = 0; i < circleMarkers.length; i++) {
    circleMarkers[i].setMap(null);
  }
  circleMarkers = [];
  for (var i = 0; i < circlePoints.length; i++) {
    circlePoints[i].setMap(null);
  }
  circlePoints = [];
  for (var i = 0; i < polylines.length; i++) {
    polylines[i].setMap(null);
  }
  polylines = [];
  if (searchPolygon && searchPolygon.setMap) searchPolygon.setMap(null);
  if (drivePolygon && drivePolygon.setMap) drivePolygon.setMap(null);
  if (centerMarker && centerMarker.setMap) centerMarker.setMap(null);
}
```

```
html,
body,
#map_canvas {
  height: 100%;
  width: 100%;
  margin: 0px;
  padding: 0px
}
```

```
<a href="#" onclick="clearOverlays();">Clear</a>&nbsp;|&nbsp;
<a href="#" onclick="pointInterval=30;clearOverlays();">interval 30 (default)</a>&nbsp;|&nbsp;
<a href="#" onclick="pointInterval=20;clearOverlays();">interval 20</a>&nbsp;|&nbsp;

<script src="https://maps.googleapis.com/maps/api/js?libraries=geometry&key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<div id="map_canvas"></div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T06:41:13.917

几年前我做了[**这个驾驶半径演示**](http://maps.forum.nu/gm_driving_radius.html)，但它使用了现在已弃用的 API V2。您只需要将其转换为 V3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-05T17:57:09.297

我知道这个问题是 8 年前的问题，但它很有帮助，这里是演示的小提琴链接，因为上面的所有链接都不起作用。 [小提琴演示](http://jsfiddle.net/4mtyu/12168/)

您只需要自己更改 API KEY，而且我已将单位从英里更改为公里。

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key={API_KEY}"></script> 
```

# java - 在 Java 中为丢番图方程生成值？

> ID：13317996
> 
> 赞同：0
> 
> 时间：2012-11-10T00:33:10.693
> 
> 标签：java, equation, diophantine

我有一个程序来编写代码，它将求解一个 5-1 五阶丢番图方程，该方程基本上是 A^5 + B^5 + C^5 + D^5 + E^5 = F^5，其中 0 < A < = B <= C <= D <= E <= F <= N。我将要实现它的方式是预先计算给定 N 值的值，然后将其存储到数组中。因此，例如，如果 N 为 100，它会将 1 到 100 之间的值存储在一个数组中。

然后我将计算第一组 A^5 + B^5 + C^5 和第二组 F^5 - (D^5 + E^5) 的值，并比较第一组的值到第二个，看看它们是否匹配。如果匹配，则找到解决方案。

我的问题是，我将如何使用 1 到 N 之间的值数组来计算两组的所有可能值？我有这个想法，但是把它编码出来，我不知道如何处理它。谁能给我一些提示？我不是在询问如何编码的解决方案，我只是想要一些可以帮助我更好地理解编码过程的提示/提示。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T18:07:01.710

我肯定会从计算每个数字 1 到 N 的所有五阶值开始，然后我会从边 F^5 - (A^5 + B^5 + C^5 + D^5 + E^5 ) 开始，

1) 外循环，生成 F^5 的值以可能的最高值开始，幸运的是我们知道 F 的最小值是 72。Lander and Parkin (1967)

对于剩余的循环以最低值开始，

2）第二个循环，为 E^5 生成值

3）第三个循环，生成 D^5 的值，测试 F^5 的值 - (D^5 + E^5) 如果为负，那么你可以打破这个循环（但不是外循环

继续剩余 3 个循环，剩余 3 个值。如果你的方程每个循环将有越来越少的值来测试。因为我们可以在等式变为负数或达到已经使用过的数字时停止

方程等于 0 的任何解都是解。

时间分析很困难，如果 N^2 会导致前 2 个循环，但剩下的 4 个循环会小得多，甚至可能是 logn time 每个希望 nlogn time 一起

我用 n=600 进行了测试。它的最大解为
218^5 + 276^5 + 385^5 + 409^5 + 495^5 = 553^5 一个 N^6 方程将在 4E16 步中达到这个解，我的在 2E15 或 5 中达到它％ 的时间。

不确定这是否会降低到 n^3logn 但它通过跳过大量不正确的解决方案让你更接近。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-11T01:08:53.553

更好的解决方案，首先生成所有 5 阶值并将它们存储在一个数组中。

然后使用3个嵌套循环生成F^5-E^5-D^5的每个组合存储所有这些组合

然后使用 3 个不同的嵌套循环生成 A^5+B^5+C^5 的每个组合并存储所有这些值。

使用 2 个嵌套循环比较 F^5-E^5-D^5 和 A^5+B^5+C^5 的值。如果它们相同，您就有解决方案。打印 a,b,c,d,e 和 f 的对应值。

我们只使用 2 对 3 个嵌套循环。如果不是 O(3n)，这个解决方案将是 O(3nlogn)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-17T01:09:27.193

对@Gregory 解决方案的一个小改进是在这里和那里削减一些值。

1.

我不明白为什么当给定方程为负时我们应该停止，因为我们知道每个字母都小于前一个字母。例如，在这种情况下，前两个循环应该执行大约 (N^2/2) 步。

2.

在第二个循环 ( `E`) 中，我们可以考虑以下事实：

```
F^5 =  A^5 + B^5 + C^5 + D^5 + E^5 < 5*E^5 
```

因此在循环中`E`我们不必从 0 开始，但我们可以从第一个`E` where开始

```
5*E^5 > F^5 
```

并上升到`F-1`。

在第三个循环（`D`）中，我们会遇到与上述不等式类似的不等式

```
 F^5 - E^5 = A^5 + B^5 + C^5 + D^5 < 4^D5 
```

我们应该开始测试`D`满足这个条件的第一个。

这同样适用于其余的内部循环。

这看起来并不多，但同样的想法有助于解决一些竞争问题。