# StackOverflow 问答 14060000-14060999

# event-handling - 在 javafx 中处理鼠标事件：如何添加监听器？

> ID：14060000
> 
> 赞同：0
> 
> 时间：2012-12-27T19:16:38.710
> 
> 标签：event-handling, javafx-2, actionlistener

我的事件处理程序有问题，这是代码。有编译错误。NetBeans 说：找不到符号，方法`setOnAction`。这与我在[Oracle Doxs](http://docs.oracle.com)找到的示例完全相同。

然后我有另一个问题：我应该如何使用这个监听器？通过在 main 中创建一个对象？

```
public class StartButtonController implements Initializable {

    @FXML private Button startButton;
    @Override
    public void initialize(URL location, ResourceBundle resources) {
        try {
            Parent root = FXMLLoader.load(getClass().getResource("Sample.fxml"));
        } catch (IOException ex) {
            Logger.getLogger(StartButtonController.class.getName()).log(Level.SEVERE, null, ex);
        }

        startButton.setOnAction(new EventHandler<ActionEvent>(){

            @Override
            public void handle(ActionEvent event) {
                startButton.setForeground(Color.BLACK);
                startButton.setEnabled(false);
            }
        });
    } 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:51:52.763

进口`javafx.scene.control.Button`.
并
删除该行`import java.awt.Button;`

# ios - viewDidLoad 中的帧大小错误

> ID：14060002
> 
> 赞同：35
> 
> 时间：2012-12-27T19:16:54.983
> 
> 标签：ios, ipad, storyboard, ios-simulator, nib

> **可能重复：**
> [为什么我必须在 viewDidLoad 中手动设置我的视图框架？](https://stackoverflow.com/questions/6757018/why-am-i-having-to-manually-set-my-views-frame-in-viewdidload)

我有适用于 iphone 和 ipad 的通用应用程序，两个故事板，如果我在 iphone 模拟器上运行我的应用程序，`viewDidLoad`在 nib 中每个元素的每一帧中都是正确的。但是，如果我为 ipad（模拟器）在框架中这样做是零，但屏幕看起来是正确的。你能告诉我吗？谢谢。

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-12-28T04:43:11.983

[这是一个与ios setContentOffset not working on iPad](https://stackoverflow.com/questions/13904205/ios-setcontentoffset-not-working-on-ipad/13904962#13904962)非常相似的问题......我的答案与那里相同：

“你不应该在 中初始化 UI 几何相关的东西`viewDidLoad`，因为此时你的视图的几何没有设置，结果将是不可预测的。

......`viewWillAppear:`是做这些事情的正确位置，此时几何体已设置好，因此获取和设置与几何体相关的属性是有意义的。”

这也适用于*获取*几何相关的属性。不要因为它在一种情况下的正确行为而不是在另一种情况下的行为而分心……主要的一点是，过早设置/获取几何属性会产生*不可预测*的结果。

您的屏幕*看起来*正确，因为您在/*之后* 看到了结果。`viewWillAppear:``viewDidAppear:`

**更新 (ios6)**

在 ios6 中使用自动布局时，在布局子视图之前不会设置框架。在这些条件下获取帧数据的正确位置是在 viewController 方法`viewDidLayoutSubviews`中。

这是*在 之后* `viewWillAppear:`调用的。但请注意 - 他们并不总是被召集在一起。例如，`viewDidLayoutSubviews`是在轮换之后调用的，`viewWillAppear:`不是。`viewWillAppear:`每次视图变为可见视图*时都会调用，`viewDidLayoutSubviews`不一定（仅当视图需要中继时）。

（* 除非应用程序是后台应用程序并正在成为前台应用程序，否则`viewWillAppear:`不会被调用）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-28T08:10:18.507

我明白了为什么会这样。我正在使用自动布局。当我在情节提要中取消选中它时，框架是正确的。

# php - php你如何重定向而不复制相同的url查询

> ID：14060007
> 
> 赞同：1
> 
> 时间：2012-12-27T19:17:17.120
> 
> 标签：php

我正在验证页面上的表单，我需要使用相同的 url 查询重定向回同一页面，并`&valid=false`在重定向时在查询末尾添加一个附加信息。

您将如何做到这一点，以便在重定向时不会重复 url：

```
http://test.com/index.php?a=1&b=2&valid=false&a=1&b=2&valid=false 
```

我在用 `$_SERVER['REQUEST_URI']`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T23:05:37.883

有很多方法可以做到，这里有一个简单的：

```
$url = $_SERVER['REQUEST_URI'];
if (!isset($_GET['valid'])) {
    $url.='&valid=false';    //assuming there are always additional parameters, otherwise you must check whether to use '?' or '&' 
} 
```

但你也可以使用 parse_url()、strpos()、正则表达式等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T23:10:07.690

修改参数后可以使用[http_build_query() ：](http://php.net/http_build_query)

```
<?php
    $_GET['a'] = 1;
    $_GET['b'] = 2;
    $_GET['valid'] = 'true';

    $url = $_SERVER['SCRIPT_NAME'].'?'.http_build_query($_GET);
?> 
```

像这样，如果`$_GET['valid']`未定义，则将创建它，否则将对其进行修改。

# c++ - 使用 Lua 的“未定义引用”

> ID：14060009
> 
> 赞同：12
> 
> 时间：2012-12-27T19:17:26.650
> 
> 标签：c++, reference, lua

`undefined reference to 'luaL_newstate'`当我尝试构建我的项目时出现错误。我知道这是链接器的错误，但我对 Lua 和向项目添加库还比较陌生。顺便说一句，我使用 Code::Blocks。API 函数`luaL_openlibs`, `luaL_loadfile`, `lua_pcall`, `lua_getfield`, `lua_type`,`lua_settop` 也丢失了。

我在一个网站上看到我必须将我的项目与 libdl 链接才能解决这个问题，但我真的不知道它是什么意思以及如何去做。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-01-15T08:22:14.007

我遇到了同样的问题，就我而言，我[在这里](http://www.linuxquestions.org/questions/programming-9/undefined-reference-error-when-using-lua-api-892782/)找到了适合我的解决方案。基本上包括将lua的**#include包装在****extern "C"**中，例如：

```
extern "C"{
    #include <lua5.2/lualib.h>
    #include <lua5.2/lauxlib.h>
    #include <lua5.2/lua.h>
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-30T20:19:47.150

当您第一次尝试编译 Lua 时，它可能会有点复杂。您引用的网站是正确的：链接 Lua 时几乎需要 libdl。

我面前没有 Code::Blocks，所以我无法真正告诉您需要添加哪些选项。它应该是“命令行选项”或“编译器选项”的列表。如果您从命令行编译，完整的命令将如下所示：

```
gcc -o sample sample.c -llua -ldl 
```

请注意 -l 选项在库名称之前没有空格。Code::Blocks 中应该有一个选项来添加您自己的编译时选项或编译器标志。您可以将“-llua”和“-ldl”添加到该选项列表中。或者，只需从命令行自行完成。

libdl 是在将其他库动态链接到您的程序时使用的库。您必须添加它才能正确链接 Lua。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-14T07:19:49.763

正如公认的答案所提到的，这些标头缺少`extern "C"`. 另一种方法是包含已安装的*lua.hpp*，它已经用于`extern "C"`包装这些 Lua 头文件。

```
// lua.hpp
// Lua header files for C++
// <<extern "C">> not supplied automatically because Lua also compiles as C++

extern "C" {
#include "lua.h"
#include "lualib.h"
#include "lauxlib.h"
} 
```

# php - 使用 POST 从 Python 脚本向 PHP 脚本发送文件

> ID：14060013
> 
> 赞同：0
> 
> 时间：2012-12-27T19:17:36.830
> 
> 标签：php, python, image, post

```
import urllib,MultipartPostHandler,urllib2,cookielib
cookies = cookielib.CookieJar()
opener =     urllib2.build_opener(urllib2.HTTPCookieProcessor(cookies),MultipartPostHandler.MultipartPostHandler)
urllib2.install_opener(opener)
login = urllib.urlencode(dict(admin_user='admin',admin_pass='****'))
o=opener.open('http://some_domain_name/admin/index.php',login)
print o.read()
### successfully logged-into the system ################### 
```

借助上面的代码，我可以登录管理面板。在这里，我应该发布一些广告（在这里，我将任务和字段自动化，包括广告标题、广告描述和主要重要的一系列图像（我猜图像列表会是一个更好的术语；））

HTML 代码片段：

```
<form action="postad.php?cityid=15&subcatid=1" method="post" name="frmPost" enctype="multipart/form-data" 

 <!-- Some other code -->

<td><input name="showemail" type="radio" value="1" >&nbsp;</td>
<table class="postad" cellspacing="0" cellpadding="0" border="0" width="100%">

<tr>
    <td><b>Upload Pictures:</b><br>
    <span class="hint">Maximum filesize: 300KB</span><br>
                <input type="file" name="pic[]" size="69"><br>
        <img src="images/spacer.gif" height="2"><br>
                <input type="file" name="pic[]" size="69"><br>
        <img src="images/spacer.gif" height="2"><br>
                <input type="file" name="pic[]" size="69"><br>
        <img src="images/spacer.gif" height="2"><br>
                <input type="file" name="pic[]" size="69"><br>
        <img src="images/spacer.gif" height="2"><br>
                <input type="file" name="pic[]" size="69"><br>
        <img src="images/spacer.gif" height="2"><br>
            </td>
</tr>

</table>

<!-- some other code -->
<input name="do" type="hidden" id="do" value="post">
<button type="submit">Post Now</button> 
```

所以解决这个问题我正在使用这个代码，但每次我都无法附加图像。你们会在这方面帮助我吗？

```
raw_params={"adtitle":"sample title",
        "area":"sample area",
        "addesc":"<p>sample post</p>",
        "price":"2000",
        "x[1]":"2012",
        "email":"abc@def.com",
        "showemail":"2",
        "subcatid":"15",
    "do":"post",
        }

encoded_params=urllib.urlencode(raw_params)
target_page = 'http://some_domain_name/admin/postad.php?cityid=15&subcatid=15'
opener.open(target_page,encoded_params) 
```

我忘了告诉你一件事，这是我从 LIVEHTTPHeader (mozilla-plugin) 得到的日志

```
Content-Disposition: form-data; name="adtitle"

sample title
-----------------------------20165274802361271281051822614
Content-Disposition: form-data; name="area"

sample location
-----------------------------20165274802361271281051822614
Content-Disposition: form-data; name="addesc"

<p>sample post</p>
-----------------------------20165274802361271281051822614
Content-Disposition: form-data; name="price"

200
-----------------------------20165274802361271281051822614
Content-Disposition: form-data; name="x[1]"

2012
-----------------------------20165274802361271281051822614
Content-Disposition: form-data; name="email"

abc@def.com
-----------------------------20165274802361271281051822614
Content-Disposition: form-data; name="showemail"

2
-----------------------------20165274802361271281051822614
Content-Disposition: form-data; name="pic[]"; filename="3_d_flower.jpg"
Content-Type: image/jpeg

ÿØÿà 
```

请对此有所了解：filename="3_d_flower.jpg

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T04:33:11.357

```
import urllib,MultipartPostHandler,urllib2,cookielib

cookies = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cookies),MultipartPostHandler.MultipartPostHandler)
urllib2.install_opener(opener)
login = urllib.urlencode(dict(admin_user='admin',admin_pass='****'))
o=opener.open('http://some_domain_name.com/admin/index.php',login)
print o.read()
### logged-into the system ###################
### Now post the things ####################
raw_params={"adtitle":"sample title",
        "area":"sample area",
        "addesc":"<p>sample post</p>",
        "price":"2000",
        "x[1]":"2012",
        "email":"abc@def.com",
        "showemail":"2",
    "pic[0]":open("indian_eye.jpg", "rb"),
    "pic[1]":open("nature.jpg", "rb"),
        "subcatid":"1",
    "do":"post",
        }

url="http://some_domain_name.com/admin/postad.php?cityid=15&subcatid=1"
opener.open(url, raw_params)

------------------------------------------------ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:29:42.387

我肯定会[`requests`](http://docs.python-requests.org/en/latest/user/quickstart/)为此推荐图书馆。它使多部分 POST[变得更加简单](http://docs.python-requests.org/en/latest/user/quickstart/#post-a-multipart-encoded-file)。它还可以更简单地[处理 cookie 。](http://docs.python-requests.org/en/latest/user/quickstart/#cookies)

登录代码在请求中如下所示：

```
import requests
o = requests.get('http://some_domain_name/admin/index.php', 
                 data={admin_user: 'admin',
                       admin_pass: '****'})
print o.text
print o.cookies 
```

# java - Java 输出错误

> ID：14060014
> 
> 赞同：0
> 
> 时间：2012-12-27T19:17:37.620
> 
> 标签：java, output

我无法让它正常工作。它按预期运行，并进行数学运算，但随后循环一次，然后结束。我需要它循环直到用户决定结束它，或者只运行一次。

```
import java.util.Scanner;

public class java {
  public static void main(String args[]) {
    System.out.println("Welcome to the simple Calculator program");
    System.out.println("Please type what type of math you would like to do: ");
    System.out.println("1=Addition");
    System.out.println("2=Subtraction");
    System.out.println("3=Multiplication");
    System.out.println("4=Division");
    System.out.println("5=Sqrt");
    Scanner input = new Scanner(System.in);
    int math = input.nextInt();
    if (math == 1) {
      Scanner a = new Scanner(System.in);
      int a1;
      int a2;
      int asum;
      System.out.print("Please enter the first number:  ");
      a1 = a.nextInt();

      System.out.print("Please enter the second number:  ");
      a2 = a.nextInt();

      asum = a2 + a1;
      System.out.print("The sum is: " + asum + "Thank You for using this program");
    }

    Scanner number = new Scanner(System.in);
    int number1;
    int number2;
    int sum;
    System.out.print("Enter first number:  ");
    number1 = number.nextInt();

    System.out.print("Enter Second number:  ");
    number2 = number.nextInt();

    sum = number1 + number2;

    System.out.printf("Sum is %d\n", sum);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:24:08.853

它正在正常工作。如果您希望它根据某些用户输入循环，则必须使用任何循环结构，如 while。而不是`if (math == 1)`使用

```
`while (math != exit)` 
```

为退出创建一个新条目，如 0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T19:25:15.830

利用

```
 do{
      // do something.
   } while(some condition); 
```

并重复相同的扫描仪以获取输入。您还可以在菜单中添加一个选项，以使用 while 条件重复和评估该选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T19:26:22.817

尝试使用`while`循环。给用户一个退出程序的选项。

```
import java.util.Scanner;
public class java
{
    public static void main(String args[])
    {
        Scanner a = new Scanner(System.in);
        System.out.println("Welcome to the simple Calculator program");
        while(true)
        {
            System.out.println("Please type what type of math you would like to do: ");
            System.out.println("1=Addition");
            System.out.println("2=Subtraction");
            System.out.println("3=Multiplication");
            System.out.println("4=Division");
            System.out.println("5=Sqrt");
            System.out.println("6=Quit"); // added an option to quit the program
            int math = a.nextInt();
            if (math == 1)
            {
                int a1,a2,asum;
                System.out.print("Please enter the first number:  ");
                a1 = a.nextInt();
                System.out.print("Please enter the second number:  ");
                a2 = a.nextInt();
                asum = a2 + a1;
                System.out.println("The sum is: " + asum + "Thank You for using this program");
            }

            // Include actions for math = 2 to 5

            if(math == 6)
            {
                System.out.println("Thank You for using this program");
                System.exit(0);
            }
        }
    }
} 
```

每次计算后，选项会一次又一次地显示，直到用户想要通过输入 退出程序`6`。
如果您希望程序只运行一次，则应省略外`while`循环。其他一切都保持不变。
PS - 你不需要一次又一次地重新打开`Scanner`（至少在这个问题中不需要）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-20T10:55:00.493

你的整个程序都是正确的，伙计。

只需添加

System.exit(0);

在每个 if(math==1) ,if(math==2)... 在他们的语句结束之前。

像 if(math==1)

{

...

System.exit(0);

}

你可以修复你的错误...

如果你的错误得到解决，像我一样。如果不告诉我错误

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T19:25:38.563

那是因为您只从控制台读取输入一次..您需要使用类似的东西保持控制台`while(true) {}`或监视控制台的退出条件，例如 `(" 0 = exit ")`.

另外，我认为您不需要像现在一样一次又一次地阅读两个数字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T19:43:37.440

1）您可以使用带有您希望执行的条件的do-while循环。

2) 使用 switch case 并使用不同的运算符在 switch case 内执行数学运算。到目前为止，您正在尝试仅执行加法。所以你是一个可以执行所有操作的开关盒。

3) 在 switch 案例中有一个调用 exit(0) 方法的选项。这样您就可以运行程序，直到用户希望退出。

4）通过使用开关盒，您可以让用户选择自己的选项。

# opencv - 使用内核的大小计算高斯滤波器的 sigma

> ID：14060017
> 
> 赞同：8
> 
> 时间：2012-12-27T19:17:57.947
> 
> 标签：opencv, filtering, gaussian

我在[cvSmooth 的 OpenCV 文档中](http://docs.opencv.org/modules/imgproc/doc/filtering.html#getgaussiankernel)发现 sigma 可以从内核大小计算如下：sigma = 0.3(n/2 - 1) + 0.8

我想知道这个方程的理论背景。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T20:38:45.707

`y=0`对 sigma 使用这样的值，对于和，在内核中心和内核边缘的值之间的比率`x=n/2-1`是：

```
g_edge / g_center = exp(-(x²+y²)/(2σ²))
                  = exp(-(n/2-1)²/(2*(0.3(n/2-1)+0.8)²)) 
```

这个值随着`n`增加的限制是：

```
exp(-1/(2*0.3²)) = 0.00386592 
```

注意`1/256`是`0.00390625`. 图像通常在 256 个值范围内编码。的选择`0.3`确保内核考虑可能显着影响结果值的所有像素。

恐怕我对这部分没有解释，但我想它是为了在很小的`0.8`时候确保合理的值。`n`

# c++ - AIX 上的 QTWebKit 或 WebKit

> ID：14060018
> 
> 赞同：0
> 
> 时间：2012-12-27T19:17:59.267
> 
> 标签：c++, qt, webkit

我知道 AIX 不支持 QtWebKit 或 WebKit。但是有没有人尝试过为这个在 AIX 上编译和工作的功能获得一个较小的子集。我试过但不知何故有一个文件 FastMalloc.h 由于各种原因没有在那里编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T22:01:56.677

是的，所以无论如何我都可以为旧的 QtWebKit 工作。我不得不注释掉平台特定的代码。我还强迫 FastMalloc 使用 System Malloc。另外，需要注意的是 malloc(0) 在 AIX 中的行为不同。这可以使用 FAST_MALLOC_MATCH_VALIDATION_FLAG 解决，但是如果您遇到问题，我建议在有 malloc(0) 时将 fastMalloc 更改为使用 malloc(1)。

# html - 元素不会在 IE7 中停滞不前

> ID：14060022
> 
> 赞同：0
> 
> 时间：2012-12-27T19:18:17.200
> 
> 标签：html, css, internet-explorer-7

好的，所以在各种浏览器中测试网站时，除了 Internet Explorer 7 之外，一切都运行良好。我的问题很奇怪：我的菜单元素不会静止不动。我的意思是，当我向下滚动屏幕时，我的菜单元素与我一起移动，但只有它们的链接部分（所有背景内容都保留在顶部），当我向上滚动时，菜单元素无处可见。这是 IE7 中的已知错误吗？

我怀疑问题可能出在 css 中的位置属性上，因为我使用 position:relative 和 left/right:50% 来居中我的菜单元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:20:45.130

自己找到了答案。这是为那些有一天会为同样的事情而苦苦挣扎的人准备的。

罪魁祸首是被怀疑的位置。由于某种原因，相对定位的元素被视为固定的或以某种方式与页面布局分离，因此它在滚动时“悬停”在所有内容上。为了解决这个问题，应该将页面的容器/包装器的位置设置为相对。所以这里是代码：

```
#container{position: relative} 
```

非常感谢所有的评论让我朝着正确的方向前进。

# mysql - 可以在没有 UNION 的情况下重写此查询吗？它是否可扩展？

> ID：14060026
> 
> 赞同：2
> 
> 时间：2012-12-27T19:18:36.463
> 
> 标签：mysql, sql, database-design, join

我有几张桌子：

*   在`product`-table 中，我有一个产品列表。
*   在`user`-table 中，我有一个用户列表。
*   在`group`-table 中，我有用户组。
*   在`group_member`-table 中，我已经链接`group`和`member`（多对多）
*   在`user_product`-table 中，我已链接`user`和`product`（多对多）
*   在`group_product`-table 中，我已链接`group`和`product`（多对多）

所以一个用户可以有很多产品，一个产品可以有很多用户。一个用户可以是多个组的成员，一个组可以有多个成员。一个组可以有很多产品，一个产品可以有很多组。换句话说，一个产品可以同时拥有组和用户。

我想问数据库的是：“列出一个给定`user`可以访问的所有产品，或者通过`user_product`-table 中的直接关系，或者通过用户所属的组。我想要产品的名称和用户名。”

这是我提出的查询：

```
# First get all the products the user has access to via a group.
SELECT product.name,
       user.first_name
FROM product
       INNER JOIN group_product
               ON group_product.product_id = product.product_id
       INNER JOIN group
               ON group.group_id = group_product.group_id
       INNER JOIN group_member
               ON group_member.group_id = group.group_id
       INNER JOIN user
               ON user.user_id = group_member.user_id
WHERE user.user_id = 1

UNION 

# Now get all the products via direct access from user_product.
SELECT product.name,
       user.first_name
FROM product
       INNER JOIN user_product
               ON user_product.product_id = product.product_id
       INNER JOIN user
               ON user.user_id = user_product.user_id
WHERE user.user_id = 1 
```

这是一个很好的查询，还是将其重写为仅 JOIN 查询更好/可能？如果有 100 000 个用户、10 000 个组和 100 个产品，这会是一个快速查询吗？这是一个好的数据库设计，还是以另一种方式存储这个逻辑更好？

（这是我的第一个更复杂的查询。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:34:34.807

您的查询对您的数据模型有正确的方法。数据模型的“正确性”实际上取决于更改的数量和频率——无论何时将用户添加到组或从组中删除，您都可以选择始终存储明确的用户-产品关系。这是一种非规范化策略，将开销从查询转移到更新——通常最好不要考虑这些移动，除非性能经过测试并且存在缺陷。

一个非常小的优化可能是避免在联合之后加入用户和产品。目前您只选择产品名称和用户名，但如果您选择许多列，则排序/区分将涉及比严格必要的更多工作，例如：-

```
select product.name, user.first_name
from
(
select 
group_product.product_id
from  
group_product
inner join group on group.group_id = group_product.group_id
inner join group_member on group_member.group_id = group.group_id
where group_member.user_id = 1
union
select product_id product.name,
from user_product
where user_product.user_id = 1
) as d
inner join product on product.product_id = d.product_id
inner join user on user.user_id = 1 
```

# mysql - 在数据库中存储大量 EXIF 和 IPTC 属性

> ID：14060029
> 
> 赞同：2
> 
> 时间：2012-12-27T19:18:44.960
> 
> 标签：mysql, database, nosql, exif, iptc

我正在编写一个需要处理超过 15.000 张照片的应用程序，并且我想将它们的 EXIF 和 IPTC 属性存储到数据库中。

我最初的方法是使用 MySQL 并创建一个表来存储所有属性，正如这里所建议的[那样](https://stackoverflow.com/questions/1066912/storing-exif-information-in-database)。

然而，大多数照片有多达 250 个属性。由于我有 15k 张照片，这意味着我将拥有近**400 万行**。而这仅仅是个开始（我期待未来有更多的照片）。

我想知道 MySQL 在这种情况下是否可以使用，或者我应该转向像 MongoDB 这样的 NoSQL 方法。

另请注意，我需要使数据库可搜索。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:47:19.827

如果您是 .Net 开发人员，[RavenDB](http://ravendb.net)非常适合您的场景。它可以在非常普通的硬件上轻松处理该数量，并具有由其内部使用的 Lucene 搜索引擎提供的出色搜索功能。

照片本身将作为[附件](http://ravendb.net/docs/client-api/attachments)存储，而属性将是文档的一部分。

即使您不是 .Net 开发人员，也可以通过任何语言的[http/rest使用 RavenDB。](http://ravendb.net/docs/http-api)使用本机 .Net 客户端更容易。

# javascript - Web Worker - importScripts“完成”回调

> ID：14060030
> 
> 赞同：4
> 
> 时间：2012-12-27T19:18:45.200
> 
> 标签：javascript, web-worker

我使用 importScripts() 将巨大的 JSON 文件（几十 MB）加载到 webworker 中。

导入完成后是否可以发送回调？

前任。self.postMessage("完成")

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-22T01:35:54.600

这有点晚了，但似乎您可以在新消息后立即向您的工作人员发布消息。一旦它回调，就意味着工作 JavaScript 文件及其子文件都已完全加载，因为 importScripts 是一个同步调用。

你可以看看：http: [//pierre.palatin.fr/entries/javascript-web-workers](http://pierre.palatin.fr/entries/javascript-web-workers)

# while-loop - while(true) 阻塞

> ID：14060031
> 
> 赞同：1
> 
> 时间：2012-12-27T19:18:53.753
> 
> 标签：while-loop

我在网上看到了这个代码片段。但是，我无法理解`while(true)`这段代码中的阻塞是如何发生的：

```
private void ListenForClients()
{
  this.tcpListener.Start();

  while (true)
  {
    //blocks until a client has connected to the server
    TcpClient client = this.tcpListener.AcceptTcpClient();

    //create a thread to handle communication
    //with connected client
    Thread clientThread = new Thread(new ParameterizedThreadStart(HandleClientComm));
    clientThread.Start(client);
  }
} 
```

谁能给我解释一下？我知道使用`while(true)`+ 破坏条件，但这件事超出了我的范围。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T19:21:01.353

`AcceptTcpClient`是什么块。将`while (true)`无限循环，直到进程终止、线程被中断或抛出异常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T19:26:41.713

阻塞的不是`while(true)`，而是`AcceptTcpClient()`. 这就是发生的事情：

1.  tcpListener 已启动。
2.  循环开始（因为 true 始终为 true）
3.  `this.tcpListener.AcceptTcpClient()`被执行并且线程停止，因为[AcceptTcpClient](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcplistener.accepttcpclient.aspx)是一个阻塞方法。
4.  如果发出连接请求，则块消失并返回 TcpClient 作为变量客户端。
5.  为客户端创建了一个新线程
6.  循环再次返回到 AcceptTcpClient 并在那里停止，直到建立新的连接。

# ajax - jQuery Mobile ajax 加载微调器不起作用

> ID：14060038
> 
> 赞同：0
> 
> 时间：2012-12-27T19:19:21.460
> 
> 标签：ajax, jquery, jquery-mobile

在 DreamweaverCS6 中构建 jQuery Mobile 应用程序。有一个带有多个链接的 ul 调用 html 页面，每个页面都有一个测验。“测验”页面是一个 jqm 页面，其中包含一个 javascript 文件，用于完成测验的所有工作。一切正常，但是当您单击 li quiz 按钮加载页面时，加载需要一点时间，并且 ajax 加载微调器未显示。这是一个问题，因为您不知道应用程序是否已冻结。关于如何在加载页面时强制微调器显示的任何想法？

```
 <div data-role="content">  

    <ul data-role="listview">

    <ul data-role="listview" data-inset="true">
            <li data-role="list-divider">Quizzes</li>
            <li><a href="quiz1.html">Quiz 1</a></li>
            <li><a href="quiz2.html">Quiz 2</a></li>
            <li><a href="quiz3.html">Quiz 3</a></li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T08:24:48.403

您可以使用

```
$.mobile.showPageLoadingMsg(); 
```

和

```
$.mobile.hidePageLoadingMsg(); 
```

您可以参考[http://jquerymobile.com/demos/1.2.1/docs/config/loadingMessageTextVisible.html](http://jquerymobile.com/demos/1.2.1/docs/config/loadingMessageTextVisible.html)以正确使用。

您可以通过在特定的 div 标签中实际写入每个页面的内容来降低页面加载速度，例如：

```
<div data-role="page" id="quiz1"> 
    <div data-role="header">...</div> 
    <div data-role="content">...</div> 
    <div data-role="footer">...</div> 
</div> 
```

您可以将此页面加载为：

```
<ul data-role="listview" data-inset="true">
        <li data-role="list-divider">Quizzes</li>
        <li><a href="#quiz1">Quiz 1</a></li>
        <li><a href="#quiz2">Quiz 2</a></li>
        <li><a href="#quiz3">Quiz 3</a></li>
</ul> 
```

这将大大减少页面加载时间并加快您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-07T15:11:14.087

您拥有代码的方式，这些链接将完全刷新，但不会显示 jqm 微调器。

您可以做的是以编程方式更改页面，该页面使用 jqm 微调器来转换页面。更多信息[http://jquerymobile.com/demos/1.2.1/docs/api/methods.html](http://jquerymobile.com/demos/1.2.1/docs/api/methods.html) - changePage ($.mobile.changePage())

这个想法是拥有你的

*   如下：

    ```
    <li><a class="quiz1">Quiz 1<a><li>
    <script>
        $(document).on('pageinit', '.quiz1', function() {
            $.mobile.changePage('quiz1.html');
        });
    </script> 
    ```

    希望你明白...

# google-fusion-tables - 将命令行脚本迁移到 FT API 1.0

> ID：14060039
> 
> 赞同：0
> 
> 时间：2012-12-27T19:19:42.170
> 
> 标签：google-fusion-tables, google-oauth

我有一个简单的服务器端命令行 python 脚本，基于现在已弃用的 FT SQL API，使用客户端登录进行授权。每隔几个小时，我就会通过插入更新的数据来刷新我的 FT。这是一张小桌子，有 3000 行。

阅读 FT 迁移指南，拥有 Google 用户 ID，启用 FT API 并拥有 API 密钥等（将我的 Google 地图应用程序切换到新 API 非常简单）

但我对如何继续迁移命令行 python 脚本感到困惑。我看到 OAuth2 是推荐的身份验证方法，但在我看来，这是一种比我真正需要的方法复杂得多的方法。我什至不清楚它是否适用于命令行脚本。真的不需要提示用户输入登录信息（只有我）。我意识到这一定是一个“已安装的应用程序”，我在 [https://developers.google.com/fusiontables/docs/sample_code#ftAPIv1找到了 Hello,p​​ython 示例](https://developers.google.com/fusiontables/docs/sample_code#ftAPIv1)

还没有尝试过，但想看看是否有人有迁移命令行脚本的经验。（PHP 也可以）

特别是我对我在这里找到的一句话很感兴趣： [https ://developers.google.com/fusiontables/docs/v1/using](https://developers.google.com/fusiontables/docs/v1/using)

*“Fusion Tables API 还支持旧的授权选项，例如 OAuth 1.0、AuthSub 或 ClientLogin；但是，在大多数情况下，我们不建议使用这些其他选项。如果您的应用程序已经使用这些选项，我们建议迁移到 OAuth 2.0如果可能的话。”*

因为，坦率地说，我宁愿不为这样一个简单的任务切换到 OAuth 2。

**更新**

忘了提一下，我每 3 小时从 cron 运行一次。所以用户输入是不可能的。尽管正如大卫在下面建议的那样，一次性用户输入是可行的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:47:13.280

您应该能够通过新 API 将您的客户端登录令牌用作您现有服务器端命令行应用程序的身份验证令牌。您还需要在请求中包含您的开发人员密钥作为“密钥”参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:33:21.167

正如您可能已经发现的那样，[https://developers.google.com/fusiontables/docs/samples/python](https://developers.google.com/fusiontables/docs/samples/python)有一个非常简单的 OAuth2 安装应用程序流程的 python 实现，是的，您应该切换到这个。与 SQL API 一样，ClientLogin 已被弃用。

该代码要求您打开浏览器并在每次使用时提示您，我将与作者讨论优化它并让它存储刷新令牌，因此它只会在您第一次使用时提示。

# java - 格式化日期。如何将 int 值格式化为日期格式？

> ID：14060041
> 
> 赞同：0
> 
> 时间：2012-12-27T19:19:49.383
> 
> 标签：java, constructor, date-format

我可以使用适当的导入方法格式化**CURRENT DATE**日期，但格式化我自己的日期（例如我的生日）是另一回事。当使用 tostring 方法返回它时它可以工作，因为我手动格式化了它。无论如何，我的问题是：我可以使用导入来格式化我的生日吗？

```
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;

public class Date2 {

    private int month;
    private int day;
    private int year;

    private Date today = Calendar.getInstance().getTime();
    // create a short version date formatter
    private DateFormat shorFormatter = SimpleDateFormat
            .getDateInstance(SimpleDateFormat.SHORT);
    // create a long version of date format
    private DateFormat longFormattter = SimpleDateFormat
            .getDateInstance(SimpleDateFormat.LONG);
    // create date time formatter, medium for day, long for time
    private DateFormat mediuFormattter = SimpleDateFormat.getDateTimeInstance(
            SimpleDateFormat.MEDIUM, SimpleDateFormat.LONG);

    /************ Constructors ***************/

    public Date2() {
    }

    public Date2(int dd, int mm, int yyyy) {
        this.day = dd;
        this.month = mm;
        this.year = yyyy;

    }

    /************ Getters setters ************/

    public Date getToday() {
        return today;
    }

    public String getShorFormatter() {
        return shorFormatter.format(today);
    }

    public String getLongFormattter() {
        return longFormattter.format(today);
    }

    public String getMediuFormattter() {
        return mediuFormattter.format(today);
    }

    public int getMonth() {
        return month;
    }

    public void setMonth(int month) {
        this.month = month;
    }

    public int getDay() {
        return day;
    }

    public void setDay(int day) {
        this.day = day;
    }

    public int getYear() {
        return year;
    }

    public void setYear(int year) {
        this.year = year;
    }

    public String tosString() {
        return month + "/" + day + "/" + year;
    }
}

public class DateFormatTest {
public static void main(String[] args) {
        Date2 date2 = new Date2(23, 05, 1973);
        System.out.println(date2.getShorFormatter());
        System.out.println(date2.getLongFormattter());
        System.out.println(date2.getMediuFormattter());
        System.out.println(date2.tosString());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T19:26:10.500

我只是意识到，我的问题没有任何意义，因为它只是一个生日。而且不需要格式化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:28:55.743

由于`getXXXFormatter()`方法仅使用`today`字段，并且构造函数`Date2(int, int, int)`从不更改该字段，因此它们将始终格式化今天的日期。

您可能希望像这样更改该构造函数：

```
public Date2(int dd, int mm, int yyyy) {
    this.day = dd;
    this.month = mm;
    this.year = yyyy;

    Calendar calendar = Calendar.getInstance();
    calendar.set(yyyy, mm - 1, dd);
    today = calendar.getTime();

} 
```

为了保持一致，您还应该更新`today`设置器中的字段。但我建议让这个类不可变。

无论如何，看起来您正在尝试制作类似于 joda time 的东西[`LocalDate`](http://joda-time.sourceforge.net/apidocs/org/joda/time/LocalDate.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T19:36:17.183

这个怎么样：

```
 public String getBirthday() {
      Calendar cal = Calendar.getInstance(Locale.getDefault());
      cal.set(Calendar.DAY_OF_MONTH, 23);
      cal.set(Calendar.MONTH,Calendar.MAY);
      cal.set(Calendar.YEAR,1973);
      //http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html
      DateFormat df = new SimpleDateFormat("MM/dd/yyyy");
      String birthdayString = df.format(cal.getTime());//05/23/1975
      return birthdayString;
    } 
```

# c# - 如何在具有多层的程序中重新抛出异常？

> ID：14060042
> 
> 赞同：1
> 
> 时间：2012-12-27T19:19:55.873
> 
> 标签：c#, entity-framework, exception, exception-handling

我有一个 MVC EF5 设置，带有类：

*   `Program`- 这是控制器
*   `UserInterface`- 这是视图，负责显示和提示数据。
*   `DataAccess`- 模型，这在我的 EF 模型类中创建、读取、更新和删除数据

当 DataAccess 类尝试对我的数据库执行 CRUD 操作时，如果它捕获到错误，则需要对其进行处理，我的 UserInterface 类需要向用户打印消息，并在必要时报告任何错误。所以，当发生错误时，需要先经过程序类，然后到UserInterface类，因为数据层不应该直接与表示层通信。

有人建议我不要将异常传递或返回给调用函数，而是应该“向上面的层抛出一个新的更简单的异常”。所有这些关于异常的讨论都让我感到困惑，因为我对异常的体验仅限于这种格式：

```
try
{
    // stuff
}
catch (exception ex)
{
    console.writeline(ex.ToString());
} 
```

我已经做了一些自己的研究，试图找到这个问题的答案，我学到了一些东西，但不知道如何把它们放在一起：

*我学会了：*

*   `throw;`重新抛出异常并保留堆栈跟踪
*   `throw ex`抛出现有异常，例如在 catch 块中捕获的异常。并重置堆栈跟踪。
*   有一个名为 Exception.StackTrace 的属性。我知道每次抛出异常时，调用堆栈中的帧都会记录到 Exception.StackTrace 属性中。

但是，我不知道在哪里放置我的 try/catch 块以利用重新抛出

是不是类似于下面的代码？还是我错过了它如何工作的重点？

已编辑：（添加了更多内容以使其他人了解这种猜测）

```
 void MethodA()  
        {
            try
            {
                MethodB();
            }
            catch (MyExceptionType ex)
            {
                // Do stuff appropriate for MyExceptionType
                throw;
            }
        }
        void MethodB()  
        {
            try
            {
                MethodC();
            }
            catch (AnotherExceptionType ex)
            {
                // Do stuff appropriate for AnotherExceptionType
                throw;
            }
        }
        void MethodC()  
        {
            try
            {
                // Do Stuff
            }
            catch (YetAnotherExceptionType ex)
            {
                // Do stuff appropriate for YetAnotherExceptionType
                throw;
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:49:56.320

What (I think) was suggested you do by *throw a new simpler exception* is that you translate the exceptions from the lower layers into new, higher level exceptions for consuming in the outer layers. The lower level exceptions are not suitable for consumption at the upper levels of the program.

For example, in LINQ to Entities, the method `Single()` will throw an `InvalidOperationException` when the sequence has no elements. However, this exception type is very common, so catching it in the user interface levels is hard to do: how would you differentiate between different possibilities of this exception being thrown (for example, modifying a read-only collection)? The solution is to *translate* the exception into another (new, user-defined) type that the application can easily handle.

Here is a simple example of the idea:

```
public class MyUserService {
    public User GetById(int id) {
        try {
            using(var ctx = new ModelContainer()) {
                return ctx.Where(u => u.Id == id).Single();
            }
        }
        catch(InvalidOperationException) {
            // OOPs, there is no user with the given id!
            throw new UserNotFoundException(id);
        }
    }
} 
```

Then the `Program` layer can catch the UserNotFoundException and know instantly what happened, and thus find the best way to explain the error to the user. The details will depend on the exact structure of your program, but something like this would work in an ASP.NET MVC app:

```
public class MyUserController : Controller {
    private MyUserService Service = new MyUserService();
    public ActionResult Details(int id) {
        User user;
        try {
            user = Service.GetById(id);
        }
        catch(UserNotFoundException) {
            // Oops, there is no such user. Return a 404 error
            // Note that we do not care about the InvalidOperationException
            // that was thrown inside GetById
            return HttpNotFound("The user does not exist!");
        }
        // If we reach here we have a valid user
        return View(user);
     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T19:30:46.380

不仅仅是如何使用不同类型的异常处理。从功能上讲，您应该定义哪些层必须执行异常操作。

像数据层 => 除了 DataException 或 SQLException 之外，不要抛出任何东西。记录它们并将通用数据库异常返回给 UI。

业务层 => 记录并重新抛出简单的业务异常 UI 层 => 仅捕获业务异常并在业务异常内的消息中提醒它

一旦定义了所有这些，您就可以使用您所学和总结的内容来构建它。

# python - 为什么“点子秀”或“点子列表”对我不起作用？

> ID：14060043
> 
> 赞同：8
> 
> 时间：2012-12-27T19:20:04.590
> 
> 标签：python, macos, pip

Python`pip`正在帮助我安装和更新软件包，但似乎不支持某些记录在案的命令（至少在 OS 10.8.2 和 Python 2.7.2 上运行 1.2.1 时）。当我尝试

```
pip list 
```

或者

```
pip show <pkgname> 
```

我明白了

```
Usage: pip COMMAND [OPTIONS]
No command by the name pip <cmd>
  (maybe you meant "pip install <cmd>") 
```

这些命令是否尚未实施（尽管已记录在案）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-27T19:26:38.417

您正在寻找的新功能是最新的——它们在 1.2.1.post1 中，但不在 1.2.1 中，而且您可能正在查看的文档 (http://www.pip-installer. org/en/latest/) 目前适用于 1.2.1.post1。

```
localhost-2:~ $ pip --version
pip 1.2.1.post1 from /Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pip-1.2.1.post1-py2.7.egg (python 2.7)
localhost-2:~ $ pip --help
Usage: pip COMMAND [OPTIONS]

Commands:
  bundle               Create pybundles (archives containing multiple packages)
  freeze               Output all currently installed packages (exact versions) to stdout
  help                 Show available commands
  install              Install packages
  list                 List installed packages (including editables).
  search               Search PyPI
  show                 Output installed distributions (exact versions, files) to stdout
  uninstall            Uninstall packages
  unzip                Unzip individual packages
  zip                  Zip individual packages 
```

如果你想要它们，你可以得到开发版本：

```
git clone https://github.com/pypa/pip.git 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T19:22:41.477

它们在哪里记录？我的没有显示任何这样的命令：

```
hd1 % pip help
Usage: pip COMMAND [OPTIONS]
 --version                    show program's version number and exit
 -h, --help                   Show help
 -v, --verbose                Give more output
 -q, --quiet                  Give less output
 --log <FILENAME>             Log file where a complete (maximum verbosity) record will be kept
 --proxy <PROXY>              Specify a proxy in the form user:passwd@proxy.server:port. Note that the user:password@ is optional and required only if you are behind an authenticated proxy. If you provide
                              user@proxy.server:port then you will be prompted for a password.
 --timeout <SECONDS>          Set the socket timeout (default 15 seconds)
 --exists-action <EXISTS_ACTION>
                              Default action when a path already exists. Use this option more than one time to specify another action if a certain option is not available. Choices: (s)witch, (i)gnore,
                              (w)ipe, (b)ackup

Commands available:
  bundle: Create pybundles (archives containing multiple packages)
  freeze: Output all currently installed packages (exact versions) to stdout
  help: Show available commands
  install: Install packages
  search: Search PyPI
  uninstall: Uninstall packages
  unzip: Unzip individual packages
  zip: Zip individual packages 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T19:23:43.727

从 pip 1.1 开始，可用的命令是：

*   bundle：创建 pybundles（包含多个包的存档）
*   freeze：将所有当前安装的包（确切版本）输出到标准输出
*   help: 显示可用命令
*   install：安装包
*   搜索：搜索 PyPI
*   卸载：卸载软件包
*   unzip：解压单个包
*   zip：压缩单个包

有关已安装软件包的列表，请尝试[yolk](http://pypi.python.org/pypi/yolk/0.4.3)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-04-22T13:33:49.670

作为一种解决方法，您可以使用`pip freeze`.

从帮助提示：

```
freeze: Output all currently installed packages (exact versions) to stdout 
```

# drop-down-menu - Twitter Bootstrap 下拉悬停打开并保持活跃

> ID：14060046
> 
> 赞同：2
> 
> 时间：2012-12-27T19:20:10.407
> 
> 标签：drop-down-menu, twitter-bootstrap

我阅读了有关如何在悬停时打开下拉菜单的问题，这是一个很好的解决方法，但是我想让导航 li 在进入“下拉菜单”ul 时保持“打开”类。对于我的问题，这是一个 jsfiddle [http://jsfiddle.net/someyoungideas/29txm/ 。](http://jsfiddle.net/someyoungideas/29txm/)

```
<div class="navbar">
    <div class="navbar-inner">
        <ul class="nav">
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#">Help</a>
                    <ul class="dropdown-menu">
                        <li><a href="#">New Item</a></li>
                    </ul>                        
            </li>
        </ul>
    </div>
</div>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T23:00:15.417

解决您的问题的一种方法是使用github 上的[twitter-bootstrap-hover-dropdown 插件。](https://github.com/CWSpear/twitter-bootstrap-hover-dropdown)该插件也是老问题的答案之一：[https](https://stackoverflow.com/a/12851616/538962) ://stackoverflow.com/a/12851616/538962 。

注意`data-hover="dropdown"`调用插件的使用。

```
<a href="#" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" 
data-delay="1000" data-close-others="false">Help</a> 
```

* * *

这是一个工作示例：http:
**[//jsbin.com/xuwokuva/1](http://jsbin.com/xuwokuva/1)**

# hibernate - 如何在 JBoss 中配置 Hibernate

> ID：14060051
> 
> 赞同：1
> 
> 时间：2012-12-27T19:20:35.033
> 
> 标签：hibernate, jboss

我正在使用休眠创建一个要在 JBoss 上运行的应用程序。当我运行应用程序时，我收到以下错误：

```
 21:15:55,848 ERROR [org.hibernate.tool.hbm2ddl.SchemaUpdate] (MSC service thread 1-8) HHH000319: Could not get database metadata: java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost:3306/researchprojects
    at java.sql.DriverManager.getConnection(Unknown Source) [rt.jar:1.6.0_20]
    at java.sql.DriverManager.getConnection(Unknown Source) [rt.jar:1.6.0_20]
    at org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.getConnection(DriverManagerConnectionProviderImpl.java:173) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.tool.hbm2ddl.SuppliedConnectionProviderConnectionHelper.prepare(SuppliedConnectionProviderConnectionHelper.java:51) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.tool.hbm2ddl.SchemaUpdate.execute(SchemaUpdate.java:194) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.tool.hbm2ddl.SchemaUpdate.execute(SchemaUpdate.java:178) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:457) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1737) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:84) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:904) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:889) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:73) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.createContainerEntityManagerFactory(PersistenceUnitServiceImpl.java:162) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.start(PersistenceUnitServiceImpl.java:85) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [rt.jar:1.6.0_20]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.6.0_20]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.6.0_20]

21:15:55,911 ERROR [org.hibernate.tool.hbm2ddl.SchemaUpdate] (MSC service thread 1-8) HHH000299: Could not complete schema update: java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost:3306/researchprojects
    at java.sql.DriverManager.getConnection(Unknown Source) [rt.jar:1.6.0_20]
    at java.sql.DriverManager.getConnection(Unknown Source) [rt.jar:1.6.0_20]
    at org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl.getConnection(DriverManagerConnectionProviderImpl.java:173) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.tool.hbm2ddl.SuppliedConnectionProviderConnectionHelper.prepare(SuppliedConnectionProviderConnectionHelper.java:51) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.tool.hbm2ddl.SchemaUpdate.execute(SchemaUpdate.java:194) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.tool.hbm2ddl.SchemaUpdate.execute(SchemaUpdate.java:178) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:457) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1737) [hibernate-core-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:84) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:904) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:889) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:73) [hibernate-entitymanager-4.0.1.Final.jar:4.0.1.Final]
    at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.createContainerEntityManagerFactory(PersistenceUnitServiceImpl.java:162) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.start(PersistenceUnitServiceImpl.java:85) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) [rt.jar:1.6.0_20]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.6.0_20]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.6.0_20] 
```

我已将 mysql 驱动程序包含在 WEB-INF/lib 文件夹中，并且还将其添加到构建路径中。我没有修改standalone.xml 文件，因为我在persistence.xml 文件中包含了有关连接到数据库的所有必需信息。

persistence.xml 如下所示：

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0">
  <persistence-unit name="test"  >
  <provider>org.hibernate.ejb.HibernatePersistence</provider>    
    <!-- <jta-data-source>java:jboss/datasources/DefaultDS</jta-data-source>  -->        
    <properties>
      <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>    
      <property name="hibernate.show_sql" value="true"/>   
      <property name="hibernate.max_fetch_depth" value="3"/>
      <property name="hibernate.hbm2ddl.auto" value="update" /> 
      <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
        <property name="hibernate.connection.url" value="jdbc:mysql://localhost:3306/researchprojects"/>
        <property name="hibernate.connection.username" value="root"/>
       <property name="hibernate.connection.password" value="351984"/>            
    </properties>
  </persistence-unit>
</persistence> 
```

任何人都可以给我一个提示如何解决这个问题？我在这里发布之前查看了所有相关的帖子，但没有任何帮助。Thnx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-16T10:42:35.170

在 jboss 中配置休眠：

我为 jboss 7.1.1 final 使用了以下配置

1) 在 jboss 路径：JBOSS_HOME/modules/com 中创建文件夹 mysql 并在 mysql 中再次创建一个文件夹 main 所以路径将像这样 JBOSS_HOME/modules/com/mysql/main，在主文件夹中添加模块.xml 和 mysql-connector-java-5.1.10-bin.jar 你的 module.xml 应该是这样的......

```
<?xml version="1.0" encoding="UTF-8"?>
<module xmlns="urn:jboss:module:1.1" name="com.mysql">
    <resources>
        <resource-root path="mysql-connector-java-5.1.10-bin.jar"/>
        <!-- Insert resources here -->
    </resources>
    <dependencies>
        <module name="javax.api"/>
        <module name="javax.transaction.api"/>
        <module name="javax.servlet.api" optional="true"/>
    </dependencies>
</module> 
```

2)

将 module.xml 中的模块名称添加到 JBOSS_HOME/module/org/hibernate/main/module.xml 所以 hibernate 的 module.xml 应该像：

```
<module xmlns="urn:jboss:module:1.1" name="org.hibernate">
    <resources>
        <resource-root path="hibernate-core-4.0.1.Final.jar"/>
        <resource-root path="hibernate-commons-annotations-4.0.1.Final.jar"/>
        <resource-root path="hibernate-entitymanager-4.0.1.Final.jar"/>
        <resource-root path="hibernate-infinispan-4.0.1.Final.jar"/>
        <!-- Insert resources here -->
    </resources>
    <dependencies>
    <module name="com.mysql"/> 
        <module name="asm.asm"/>
        <module name="javax.api"/>
        <module name="javax.persistence.api"/>
        <module name="javax.transaction.api"/>
        <module name="javax.validation.api"/>
        <module name="org.antlr"/>
        <module name="org.apache.commons.collections"/>
        <module name="org.dom4j"/>
        <module name="org.infinispan" optional="true"/>
        <module name="org.javassist"/>
        <module name="org.jboss.as.jpa.hibernate" slot="4" optional="true"/>
        <module name="org.jboss.logging"/>
        <module name="org.hibernate.envers" services="import" optional="true"/>
    </dependencies>
</module> 
```

3) 在standalone.xml 中创建数据源

```
<subsystem xmlns="urn:jboss:domain:datasources:1.0">
            <datasources>
                <datasource jta="false" jndi-name="java:jboss/datasources/data-source-name" pool-name="data-source-name" enabled="true" use-ccm="false">
                    <connection-url>jdbc:mysql://localhost:3306/data-base-name</connection-url>
                    <driver-class>com.mysql.jdbc.Driver</driver-class>
                    <driver>mysql</driver>
                    <security>
                        <user-name>root</user-name>
                        <password>root</password>
                    </security>
                </datasource>
                <drivers>
                    <driver name="h2" module="com.h2database.h2">
                        <xa-datasource-class>org.h2.jdbcx.JdbcDataSource</xa-datasource-class>
                    </driver>
                    <driver name="mysql" module="com.mysql">
                        <xa-datasource-class>com.mysql.jdbc.Driver</xa-datasource-class>
                    </driver>
                </drivers>
            </datasources>
        </subsystem> 
```

4）在persistence.xml中添加java:jboss/datasources/data-source-name

```
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://java.sun.com/xml/ns/persistence
        http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="abc" transaction-type="JTA">
<provider>org.hibernate.ejb.HibernatePersistence</provider>
        <jta-data-source>java:jboss/datasources/eSociety</jta-data-source>
<!-- map your classes. -->
<properties>
<property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect" />
<property name="hibernate.hbm2ddl.auto" value="update" />
<property name="hibernate.show_sql" value="true" />
</properties>
    </persistence-unit>
</persistence> 
```

使用 jboss 进行休眠配置就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:44:37.317

您是否尝试过为驱动程序类设置 jpa 属性。您只需将以下条目添加到您的属性条目中。

```
<properties>
     <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
</properties> 
```

# c - 数组的内存分配

> ID：14060057
> 
> 赞同：-1
> 
> 时间：2012-12-27T19:20:56.877
> 
> 标签：c, memory, dynamic

> **可能重复：**
> [对数组使用动态内存分配](https://stackoverflow.com/questions/4641476/using-dynamic-memory-allocation-for-arrays)

我最初有这个程序商店的价格，数量大小为 10，并意识到我想让程序更具动态性，因为我可能需要在某个给定点存储超过 10 个项目。我很难理解如何重新分配额外的内存，以便我可以存储我需要的任何数量的项目。这是处理此任务的正确方法吗？

**主要功能**：

```
double *purchases = (double*)malloc(QUANTITY_SIZE); 
```

**外功能**

```
double startShopping(double *purchases, double *taxAmount, double *subTotal, double *totalPrice)
{
    double itemPrice = 0.00;
    double* storeMoreItems;

    for(int i = 0; i < QUANTITY_SIZE; *subTotal +=purchases[i++])
    {
        while(itemPrice != -1)
        {
            printf("Enter the price of the item :");
            scanf("%lf", &itemPrice); 

            storeMoreItems = (double*)realloc(storeMoreItems, i * sizeof(int));

            if(storeMoreItems != NULL)
            {
                storeMoreItems = purchases;
                purchases[i-1] = itemPrice;
            }

           else
           {
               free(purchases);
           }
       }
  }

  displayCart(purchases);

  *taxAmount = *subTotal * TAX_AMOUNT;

  *totalPrice = *taxAmount + *subTotal;

  printf("\nTotal comes to : $%.2lf\n", *totalPrice);

  return *totalPrice;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:23:05.950

`double* purchases = (double*)malloc(sizeof(double)*QUANTITY_SIZE);`

更：

`storeMoreItems = (double*)realloc(storeMoreItems, i * sizeof(double));`

您尝试分配`i*sizeof(int)`，然后将其转换为`double*`. 当您的代码具有不同的大小时，将很难找到错误`double`。`int`

接下来的事情：

当`i`等于 0 时，您分配初始大小为 0 字节 ( `i*sizeof(int)`) 的内存，然后尝试使用它。它行不通。尝试以这种方式更改循环：`for (int i = 1, i <= QUANTITY_SIZE;...`并保持`purchases[i-1]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T19:27:47.167

这是错误的：

```
 if(storeMoreItems != NULL)
        {
            storeMoreItems = purchases;
            purchases[i-1] = itemPrice;
        } 
```

首先，你覆盖刚刚的`realloc`ed 指针，你的意思是

```
purchases = storeMoreItems; 
```

那里而不是相反。但这不会影响传入的`purchases`指针在调用函数中的值。

为此，您需要将`purchases`from的地址传递`main`给

```
double startShopping(double **purchases_ptr, double *taxAmount, double *subTotal, double *totalPrice) 
```

并分配

```
*purchases_ptr = storeMoreItems; 
```

重新分配本身，

```
storeMoreItems = (double*)realloc(storeMoreItems, i * sizeof(int)); 
```

使用错误的类型来计算要分配的大小，这几乎肯定也是非常错误的。

* * *

在`main`：

```
size_t purchase_count = QUANTITY_SIZE;
double *purchases = malloc(purchase_count * sizeof *purchases);
// ...
startShopping(&purchases, &purchase_count, taxAmount, subTotal, totalPrice);
// ... 
```

看起来`startShopping`像

```
double startShopping(double **purchases_ptr, size_t *purchase_count,
                     double *taxAmount, double *subTotal, double *totalPrice)
{
    double itemPrice = 0.00;
    double* purchases = *purchases_ptr;
    size_t i;

    for(i = 0; ; *subTotal += purchases[i++])
    {
        printf("Enter the price of the item :");
        scanf("%lf", &itemPrice);

        // I'm assuming you don't really want to add the -1
        // entered for termination
        if (itemPrice == -1) {
            break;
        }

        if (i == *purchase_count) {
            // array filled, let's get more space
            // double it, or add a fixed amount,
            // but rather not just one element each round
            *purchase_count *= 2;

            // we have the address saved in another variable, so here we can
            // store the pointer returned by realloc in purchases without losing
            // the handle if realloc fails
            purchases = realloc(purchases, *purchase_count * sizeof *purchases);

            if (purchases == NULL) {
                // reallocation failed, now what?

                // throw a tantrum?
                free(*purchases_ptr);
                exit(EXIT_FAILURE);

                // or can something less drastic be done?
            } else {
                // Okay, got the needed space, let's record the address
                *purchases_ptr = purchases;
            }
        }
        purchases[i] = itemPrice;
    }

    // store the number of items actually read in?
    *purchases_count = i;

    // That should probably also get passed the number of items stored
    displayCart(purchases);

    *taxAmount = *subTotal * TAX_AMOUNT;

    *totalPrice = *taxAmount + *subTotal;

    printf("\nTotal comes to : $%.2lf\n", *totalPrice);

    return *totalPrice;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T19:22:30.490

您要做的第一件事是确保分配正确的字节数。Malloc 不知道您想将内存用于双打，因此您需要乘以`sizeof(double)`：

```
double *purchases = (double*)malloc(QUANTITY_SIZE * sizeof(double)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T19:24:08.390

查看重新分配。

> void * realloc ( void * ptr, size_t size );

重新分配内存块 更改 ptr 指向的内存块的大小。

从这里获取更多详细信息[http://www.cplusplus.com/reference/cstdlib/realloc/](http://www.cplusplus.com/reference/cstdlib/realloc/)

# php - 双引号内的变量

> ID：14060063
> 
> 赞同：1
> 
> 时间：2012-12-27T19:21:26.723
> 
> 标签：php, variables, syntax

哪个是正确的语法？

```
$current_renewal_date = $wpdb->get_results(
                    "
                    SELECT expiry_date
                    FROM bid_tag
                    WHERE id = $renewal_tag_id
                    LIMIT 1
                    "
                ); 
```

或者

```
$current_renewal_date = $wpdb->get_results(
                    "
                    SELECT expiry_date
                    FROM bid_tag
                    WHERE id = {$renewal_tag_id}
                    LIMIT 1
                    "
                ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:22:37.560

它们都是正确的*和等价的。当您只是插入变量而不访问数组中的元素时，大括号是可选的。

[* 请使用参数化查询]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T19:23:17.090

两者都是正确的。后者只是用来避免歧义，比如如果你想引用`$foo`而不是`$foobar`：

```
"{$foo}bar" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T19:23:02.130

我不知道您是否真的可以说有一个正确的形式可以将变量放入字符串中，但最灵活且最有效的方法是：

```
$current_renewal_date = $wpdb->get_results(
                    "
                    SELECT expiry_date
                    FROM bid_tag
                    WHERE id = ".$renewal_tag_id."
                    LIMIT 1
                    "
                ); 
```

使用这种语法而不是仅仅将变量放在字符串中至少有两个好处。

**变量误解**

1）当您将变量放入字符串中时，如果您需要将变量与其他文本混合使用，您可能会遇到问题。

例子：

```
$string = "My ID is AB$variableCD"; 
```

什么是变量？它是 $ 变量吗？是 $variableC 吗？还是 $variableCD？您使用的语法对此有多种解释。当你这样做时，这不会发生

```
$string = "My ID is AB".$variable."CD"; 
```

**数组使用**

2）当您在字符串中混合使用具有数组索引的变量时，您不能轻易使用它们

例子：

```
$string = "The largest country is $options[countries in the world][$index]"; 
```

会得到你 *PHP 解析错误：语法错误，意外的 T_ENCAPSED_AND_WHITESPACE，期待 ']'*

虽然使用以下将完美地工作：

```
$string = "The largest country is ".$options['countries in the world'][$index]; 
```

**还有一点与语法无关的额外内容...**

3) 实际上有一个性能优势，那就是使用 ' 而不是 " 为您的字符串的可能性。使用 ' 使字符串文字，也就是说，它不会被解析，这会在处理大字符串时提高性能.

```
$string = 'hello'; 
```

代替

```
$string = "hello"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T19:23:42.023

他们都*工作*。首选方法是使用准备好的语句和绑定参数。

# c++ - 验证数组没有重复值

> ID：14060064
> 
> 赞同：-4
> 
> 时间：2012-12-27T19:21:27.310
> 
> 标签：c++, arrays, algorithm

假设我们有一个大小为 n 的数组，其值范围从 0 到 n-1。需要一个验证没有重复值的函数，而不使用另一个数组。

原型： bool UniqueValues(unsigned arr[], size_t n);

这是一个求职面试的算法问题，请不要建议使用内置的std函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T19:21:27.310

遍历数组，对于每个元素，将 arr[i] 与 arr[i] 的索引中的 arr 交换（例如，如果 arr[1]=2，则将其与 arr[2] 交换，因此 arr[2]=2） . 该值是否重复的指示是 arr[ arr[i] ] == arr[i]。（在 arr[2] 已经有 2 个时在某处找到 2 个）。

```
bool UniqueValues(unsigned arr[], size_t n)
{
    int val;
    for(size_t i=0;i<n;i++)
    {
        val = arr[i];
        if(val == arr[val] )  { if( val != i) return false; }  //  If the element is duplicated
        else {
            swap( arr[i], arr[val] );  //  Move the element to the index matching its value
            val = arr[i];
            if(val == arr[val] )  return false;  //  Another check for the swapped element
        }
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T19:26:38.463

一个快速的测试是对数组中的数字求和，然后对下标求和。如果两者不相等，则可能存在重复。

对于更强的语句，对数组进行排序。这些值应与下标对齐。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T19:27:56.340

一种解决方案是（伪代码）

```
loop from i = 0 while i is smaller than length of array {
  loop from j = i + 1 while j is smaller than length of array {
    if array at index i equals array at index j {
      duplicate found. terminate the algorithm
    }
  }
}

no duplicate found. 
```

# css - 使用背景尺寸时的 CSS 高度

> ID：14060065
> 
> 赞同：0
> 
> 时间：2012-12-27T19:21:27.840
> 
> 标签：css, mobile

所以我想调整`div`using的背景图像的大小`background-size: contain`，并将其设置`width`为 100%。对于屏幕尺寸可变的移动网站，我需要这个。但是，我在设置高度时遇到了难题。

如果我以像素为单位设置高度，当图片变小时，它会在图片下方留下一个空白区域。

如果我不设置高度，图片根本不会出现。

最好的解决方案是什么？

这是我的代码：

```
<div id="container">
    <p>Some text</p>
    <div id="my-picture"></div>
</div> 
```

CSS：

```
#container {
    width: 100%;
}
#my-picture {
    background:url(somepic.jpg) no-repeat;
    background-size: contain;
    height: ???
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:43:00.307

根据[W3Schools](http://www.w3schools.com/cssref/css3_pr_background-size.asp)你应该使用*Background-size: cover;*

```
#my-picture {
  background:url(somepic.jpg) no-repeat;
  background-size: cover;
  height: ???
} 
```

# android - 编辑后在另一个 TextView 中显示 EditText 值

> ID：14060070
> 
> 赞同：0
> 
> 时间：2012-12-27T19:21:43.240
> 
> 标签：android, textview, android-edittext

我有一个 EditText，用户在其中输入一个字符串。编辑后，字符串显示在 TextView 中。我创建了一个名为 TextValidator 的自定义类，它实现了 TextWatcher，以满足 addTextChangedListener(TextWatcher watcher) 方法的参数。当我运行它时，当我按下一个字母输入到 editText 时，应用程序崩溃了。

在 MainActivity 中：

```
EditText editText1 = (EditText)findViewById(R.id.editText1);
editText1.addTextChangedListener(new TextValidator((EditText)findViewById(R.id.editText1))); 
```

在我的 TextValidator 类中：

```
public class TextValidator extends Activity implements TextWatcher {
    private EditText editText;

    public TextValidator(EditText editText) {
        this.editText = editText;
    }

    public void validate(TextView textView, String text)
    {
        //I want to later check the string for valid format
    }

    final public void afterTextChanged(Editable s) {
        ((EditText)findViewById(R.id.textView1)).setText(editText.getText().toString());
        //validate(textView, text);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:27:24.463

TextValidator 不扩展 Activity。

解决方案：

```
public class TextValidator implements TextWatcher {
    private Context mContext;
    private EditText mEditText;
    private TextView mTextView;

    public TextValidator(Context mContext) {
        this.mContext = mContext;
        EditText mEditText = (EditText)mContext.findViewById(R.id.editText1);
        TextView mTextView = (TextView)mContext.findViewById(R.id.textView1);
    }

    public void validate(TextView textView, String text)
    {
        //I want to later check the string for valid format
    }

    final public void afterTextChanged(Editable s) {
        mTextView.setText(mEditText.getText().toString());
        //validate(textView, text);
    }
    .... 
```

# youtube-api - Youtube API loadVideoById 无法禁用自动播放（在 iOS 设备上测试）

> ID：14060075
> 
> 赞同：3
> 
> 时间：2012-12-27T19:22:12.143
> 
> 标签：youtube-api, youtube-javascript-api

笔记！问题出现在 iPad 等 iOS 设备上

如何使用 Youtube Player API 加载 youtube 视频并禁用自动播放？并且还能够停止视频

问题：

*   loadVideoById 视频立即开始。
*   cueVideoById 视频加载但不显示缩略图

示例代码； [http://dl.dropbox.com/u/13780885/loadvideobyid/autoplay.html](http://dl.dropbox.com/u/13780885/loadvideobyid/autoplay.html)

Youtube 播放器 API 文档： [https ://developers.google.com/youtube/iframe_api_reference](https://developers.google.com/youtube/iframe_api_reference)

# java - asterisk-java 和 ivr

> ID：14060076
> 
> 赞同：0
> 
> 时间：2012-12-27T19:22:20.193
> 
> 标签：java, asterisk, ivr

我知道使用星号我可以拥有一个 ivr，它将为用户提供一些选项。但是是否可以使用 asterisk-java 进行调用以启动此 ivr 并从显示的菜单中获取用户选择的选项？如果是这样，我该怎么做？或者唯一的选择是将选定的选项保存到文件中，然后从 java 应用程序中读取它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T16:51:29.883

我会设置一个包含用户选择的通道变量，然后您可以通过 AMI 调用从您的 JAVA 应用程序中读取该通道变量。这样，您就不必将文件写入磁盘并担心并发调用等。每个调用在通道变量中保存自己的一组所需的键/值，您只需在需要时查看/戳它们。

# java - Void 真的无法实例化吗？

> ID：14060078
> 
> 赞同：27
> 
> 时间：2012-12-27T19:22:30.833
> 
> 标签：java, reflection, void

[javadoc`Void`](http://docs.oracle.com/javase/6/docs/api/java/lang/Void.html)说：

> Void 类是一个不可实例化的占位符类，用于保存对表示 Java 关键字 void 的 Class 对象的引用。

但构造函数很简单：

```
private Void() {} 
```

这段代码实例化了一个`Void`：

```
Constructor<Void> c = Void.class.getDeclaredConstructor();
c.setAccessible(true);
Void v = c.newInstance(); // Hello sailor 
```

所以`Void`不是*不可*实例化的。

有没有办法让`Void`真正不可实例化？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-27T19:53:11.363

Rohit 非常正确，对于大多数用例来说，抛出异常“已经足够好”了。[但是，使用 sun.misc.Unsafe](http://www.docjar.com/docs/api/sun/misc/Unsafe.html#allocateInstance%28Class%29)似乎甚至可以绕过它：

> 公共本机对象 allocateInstance(Class cls) 抛出 InstantiationException
> 
> 分配一个实例但不运行任何构造函数。如果尚未初始化该类。

（请注意，我实际上并没有测试过它是否有效）

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-12-27T19:27:49.210

将您的构造函数设为私有，并且没有任何其他可以被外部访问的构造函数，使得类*un-instantiable*。

但是，您无法避免使用`Reflection API`. 使用反射，您可以做通常不允许的事情。

但是，如果你真的希望你的类是不可*实例化*的，即使是通过*反射*，你也可以从*构造函数*`throw`中得到一个*Unchecked Exception*。

 *```
private MyClass() {
    throw UnsupportedOperationException("Can't instantiate class");
} 
```

在这种情况下，当您使用`Constructor#newInstance()`方法创建实例时，它会抛出一个[`InvocationTargetException`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/InvocationTargetException.html)，正如@Alex 的评论中所引用的那样。

这是方法的文档[`Constructor#newInstance()`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Constructor.html#newInstance%28java.lang.Object...%29)，它声明了要抛出的异常列表，其中之一是[`InvocationTargetException`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/InvocationTargetException.html)，它说：-

> throws:
> InvocationTargetException - 如果底层构造函数抛出异常。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-12-27T19:25:08.763

Reflection API 像这样打破了各种“规则”，就像能够修改`final`字段一样。有很多抱怨说它允许你打破 Java 的硬性规则，但事实就是这样。

如果没有反射（或下面发布的@StevenSchlansker 的疯狂`Unsafe`API），就无法实例化。但是，只要允许反射，这些变通方法就会存在。

在[Oracle 自己的反射教程](http://docs.oracle.com/javase/tutorial/reflect/index.html)中，它们列出了优点和缺点。由您决定哪个更大。

另外，请参阅这个问题：[什么是反射以及它为什么有用？](https://stackoverflow.com/questions/37628/what-is-reflection-and-why-is-it-useful)*

# vba - 如何从文本框中获取路径输入并在 vba 宏中的命令按钮中使用

> ID：14060079
> 
> 赞同：1
> 
> 时间：2012-12-27T19:22:31.347
> 
> 标签：vba, path, textbox

我在 form1 中有文本框和命令按钮。

我将在文本框中输入路径

单击命令按钮后，路径位置的工作簿应该打开并且需要需要宏代码，例如复制等

当我尝试使用 . 我收到错误说 file1.xlsx not found 。请帮助

```
Private Sub CommandButton1_Click()
Set wb1 = Workbooks.Open("file1")
End Sub

Private Sub TextBox1_Change()
Dim file1 As String
file1 = TextBox1.Value
End Sub

Private Sub UserForm_Click()
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T20:24:20.577

上面评论中的建议将带你去你需要去的地方，但如果我可以建议......而不是使用文本框让用户输入名称，请使用 GetOpenFilename 对话框。这样可以确保路径有效且文件实际存在。它还为用户提供了一个漂亮的 GUI，这更像是他们习惯于 File -> Open 对话框的界面。像这样的东西：

```
Private Sub CommandButton1_Click()

    Dim vnt As Variant

    On Error GoTo ErrorHandler

    vnt = Application.GetOpenFilename("Excel Files (*.xlsx; *.xls; *.xlsm),*.xlsx;*.xls;*.xlsm", 1, "Please select the file to open")

    If vnt = False Then Exit Sub

    Application.Workbooks.Open (vnt)

ExitPoint:

    Exit Sub

ErrorHandler:

    MsgBox "Error " & Err.Number & vbCrLf & Err.Description

    Resume ExitPoint

End Sub 
```

# node.js - Nodemailer HTML 不适用于 sendgrid

> ID：14060080
> 
> 赞同：2
> 
> 时间：2012-12-27T19:22:33.470
> 
> 标签：node.js, sendgrid

我正在使用 sendgrid 和 nodemailer 尝试发送 HTML 电子邮件。这是代码：

```
for(var i = 0;i<emails.length; i++){
    email.sendMail({
        from:'"Name" <noreply@domain.com>',
        to:emails[i],
        HTML:"<h1>hi</h1>",
        generateTextFromHTML:true,
        subject: "Blah"
    },function(err,res){
        if(err){console.log(err)};
        if(res){console.log(res.message)};
    })
} 
```

如果您需要更多信息，请告诉我。谢谢，阿里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T01:51:39.483

我发现这是我使用 sendgrid API 的错误。对不起。

# android - Android Border Less Button Pressed State 背景颜色

> ID：14060085
> 
> 赞同：4
> 
> 时间：2012-12-27T19:22:47.870
> 
> 标签：android, android-layout, android-ui, android-button

当按下按钮时，我们如何更改无边框按钮的背景颜色。

我用这个：

```
 android:background="?android:attr/selectableItemBackground"
    android:text="@string/btn_skip" 
```

我的按钮在哪里显示我的“strings.xml”中定义的标签“SKIP”。

现在当我测试它时它很好，除了它在按下状态时显示默认的“蓝色”颜色。我希望它与我的 UI 主题的其他元素相匹配，这些元素是“橙色”“#FF8800”

有任何想法吗？

提前谢谢...！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-08T14:19:09.000

而不是使用 ?android:attr/selectableItemBackground 您可以在具有以下内容的文件夹中的 drawable 中创建一个 xml。

```
<selector xmlns:android="http://schemas.android.com/apk/res/android"
    android:dither="true">

<item 
    android:state_pressed="true"
    android:drawable="@color/orange"/>
<item 
    android:state_enabled="false"
    android:drawable="@color/default"/>
<item
    android:drawable="@color/default"/>

</selector> 
```

更新：因此您将此文件另存为：可绘制文件夹中的 btn_drawable.xml。

只需将 *?android:attr/selectableItemBackground* 替换为 *@drawable/btn_drawable.xml*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T20:55:30.193

谢谢@Nimish-Choudhary ...！我听从了你的建议。为了清楚起见，我已经进一步解释了所有和我一样的初学者问题。

创建一个名称为*“btntransparent.xml”的 xml*

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android"
    android:dither="true">

<item 
    android:state_pressed="true"
    android:drawable="@color/pressed"/>
<item 
    android:state_enabled="false"
    android:drawable="@color/defaultColor"/>
<item
    android:drawable="@color/defaultColor"/>

</selector> 
```

接下来将颜色“pressed”和“defaultColor”添加到另一个xml说*“colors.xml”*

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="pressed">#CCFF8800</color>
    <color name="defaultColor">#00000000</color>
</resources> 
```

这里*“#CCFF8800”*是我的按下状态*半透明橙色*，*“#00000000”*是*100% 透明黑色*(;-) 那是不可见的）。[您可以在Color|](http://developer.android.com/reference/android/graphics/Color.html)找到更多关于颜色代码的信息。[安卓开发者](http://developer.android.com/reference/android/graphics/Color.html)

现在将*“colors.xml”*放在*值*文件夹中，将*“btntransparent.xml”*放在*可绘制*文件夹中。

现在最后一步是在按钮中使用它作为

```
<Button
            android:id="@+id/id_btn_skip"
            android:background="@drawable/transparentbtn"
            android:onClick="skipToMain"
            android:text="@string/btn_skip" /> 
```

那应该做的工作......！

小心。
问候，
提早

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-12T09:32:53.080

如果我理解正确，您可以在 @drawable 中添加新资源，例如 my_ripple.xml

```
<?xml version="0" encoding="utf-8"?>
<ripple xmlns:android="http://schemas.android.com/apk/res/android"
     android:color="#FF8800">
</ripple> 
```

然后只需将其设置为您的背景。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-08T19:48:05.917

在您的主题中添加以下内容：

```
<item name="android:selectableItemBackground">#FF8800</item> 
```

覆盖默认的蓝色。

# jquery - 我正在使用 Struts2-jQuery 网格插件，并且该操作被调用了两次

> ID：14060090
> 
> 赞同：1
> 
> 时间：2012-12-27T19:23:12.880
> 
> 标签：jquery, struts, struts2-jquery, jqgrid, struts2-json-plugin

当我加载页面或按下网格上的任何按钮时，我会按照[此处](http://code.google.com/p/struts2-jquery/wiki/GridTag)列出的示例执行方法被调用两次。我只想调用一次。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:23:12.880

重命名（或删除，因为在示例中未使用）getJSON 方法。

```
public String getJSON()
{
   return execute();
} 
```

JSON 插件可能会调用所有以“get”开头的方法，以尝试将它们序列化以进行输出。

请参阅： [如果结果类型为 json，则调用两次 Struts2 Action](https://stackoverflow.com/questions/6061709/struts2-action-being-called-twice-if-result-type-is-json)

**编辑：**

您还可以使用 includeProperties 或 excludeProperties 参数来避免调用所有以“get”开头的方法的默认行为，请参阅：[Problem with Json plugin in Struts 2](https://stackoverflow.com/questions/4648288/problem-with-json-plugin-in-struts-2)

# android - 将两个同名库导入eclipse

> ID：14060094
> 
> 赞同：1
> 
> 时间：2012-12-27T19:23:25.800
> 
> 标签：android, eclipse

我通过 File>Import>Existing Android Code Into Workspace 在我的工作区中导入了 sherlock 操作栏，并在包资源管理器中使用我的项目上方的名称库查看它。我也想在我的应用程序中使用这个项目：[https](https://github.com/bauerca/drag-sort-listview) ://github.com/bauerca/drag-sort-listview我不能同时得到它们，因为当我尝试导入第二个库时，eclipse告诉我“无法导入项目，因为它们已经存在于工作区中”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-21T16:09:49.353

无需更改包名称。由于它们都是不同的库，因此它们可能已经具有不同的名称。因此，只需重命名 Library 项目即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:53:20.893

由于您有第二个项目的代码 - 更改包名称，然后再次导入。

# c# - 获取当前用户 Asp。网络 C#

> ID：14060097
> 
> 赞同：-1
> 
> 时间：2012-12-27T19:23:31.460
> 
> 标签：c#, asp.net

有没有办法让页面中的当前用户，`aspx`带有定义的页面`html`？（我知道如何在`aspx.cs`页面中获取它）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T19:25:20.323

这应该有效：

```
<%= Page.User.Identity.Name %> 
```

[**Page.User 属性**](http://msdn.microsoft.com/en-us/library/system.web.ui.page.user.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T19:24:57.203

在您希望它显示的 aspx 中使用以下代码块。

```
<%= System.Environment.UserName %> 
```

有关详细信息，请参阅[ASP.NET “特殊”标签](https://stackoverflow.com/questions/649428/asp-net-special-tags)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T19:25:00.323

使用代码标签

```
<%= YourMethodToGetTheCurrentUser() %> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-27T19:29:11.127

您可以通过将代码包装在以下字符中来访问其文件中的代码隐藏文件中的任何变量`public`或变量：`protected``.aspx`

```
<% if(PublicObject.Property > 0) { %>
    <p>You can write normal HTML, or write strings like this: <%= PublicObject.Property %></p>
<% } %> 
```

`<% %>`让我们将逻辑或命令添加到页面中。您可以使用它来添加`for`循环或`if`语句。`<%= %>`用于将内容直接写入页面。这用于打印变量的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T19:27:11.890

```
<%= System.Web.HttpContext.Current.User.Identity.Name%> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-27T19:27:44.330

还有一个：

```
<%= HttpContext.Current.User.Identity.Name %> 
```

# java - 如何设置 JFrame 的最大尺寸？

> ID：14060098
> 
> 赞同：2
> 
> 时间：2012-12-27T19:23:30.950
> 
> 标签：java

有以下代码：

```
double gridWidth=columnNumber*(IMAGE_WIDTH_NORMAL+10)+(columnNumber+2)*10;
double screenWidth=Toolkit.getDefaultToolkit().getScreenSize().getWidth()*0.8;
screenWidth=(gridWidth>=screenWidth) ? screenWidth : gridWidth;

double gridHeight=(rules.size()+2)*(IMAGE_HEIGHT_NORMAL+10)+rules.size()*20+(rules.size()+2)*10;
double screenHeight=Toolkit.getDefaultToolkit().getScreenSize().getHeight()*0.8;
screenHeight=(gridHeight>=screenHeight) ? screenHeight : gridHeight;

setSize((int)screenWidth, (int)screenHeight);
Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();  
setLocation(screenSize.width/2-getWidth()/2, screenSize.height/2-getHeight()/2);
setMaximumSize(new Dimension((int)gridWeight, (int)gridHeight));
setVisible(true); 
```

此代码执行以下操作：计算框架的首选宽度和高度，如果尺寸大于我想要的尺寸（宽度和高度的 80%），则应用程序设置另一个尺寸；但我想允许用户单击 jframe 上的“全屏”图标以最大化 jframe 以获得首选大小（setMaximumSize() 方法），但它的代码不起作用！总是一个窗口最大化到我的笔记本电脑的全屏！我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T19:43:42.067

我不确定我是否正确理解了您的问题，但我建议使用

[java.awt.Window#setBounds(int, int, int, int)](http://docs.oracle.com/javase/6/docs/api/java/awt/Window.html#setBounds%28int,%20int,%20int,%20int%29)

设置 JFrame 的位置和大小。

```
 int x = screenSize.width/2-getWidth()/2;
 int y = screenSize.height/2-getHeight()/2;
 int width = (int)gridWeight;
 int height = (int)gridHeight);
 setBounds(x, y, width, height); 
```

为了最大化 JFrame，我建议使用

[java.awt.Frame#setExtendedState(int)](http://docs.oracle.com/javase/6/docs/api/java/awt/Frame.html#setExtendedState%28int%29)

像这样

```
setExtendedState(java.awt.Frame.MAXIMIZED_BOTH); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-19T07:32:22.813

你需要这样做：

_mainDialog.setBounds(矩形);

_mainDialog.setExtendedState(windowsState);

**示例**：

```
 addWindowStateListener(new WindowStateListener() {

            @Override
            public void windowStateChanged(WindowEvent e) {
                int oldState = e.getOldState();
                int newState = e.getNewState();

                if ((oldState & JFrame.ICONIFIED) == 0 && (newState & JFrame.ICONIFIED) != 0) {
                    setMainDialogRectangle(minRectangle, JFrame.NORMAL);
                }
                else if ((oldState & JFrame.ICONIFIED) != 0 && (newState & JFrame.ICONIFIED) == 0) {
                    setMainDialogRectangle(minRectangle, JFrame.NORMAL);
                }
                else if ((e.getNewState() & JFrame.MAXIMIZED_BOTH) == JFrame.MAXIMIZED_BOTH) {
                    setMainDialogRectangle(maxRectangle, JFrame.MAXIMIZED_BOTH);
                }
                else if ((oldState & JFrame.MAXIMIZED_BOTH) != 0 && (newState & JFrame.MAXIMIZED_BOTH) == 0) {
                    setMainDialogRectangle(medRectangle, JFrame.NORMAL);
                }
            }
        }); 
```

# c - 防止删除一组文件的例程具有破坏性

> ID：14060105
> 
> 赞同：0
> 
> 时间：2012-12-27T19:24:06.160
> 
> 标签：c

以下是我编写的程序的一小段摘录。该例程通过`filenamelist`（权限 0600），其中包含存储的行分隔文件名列表，这些文件名都存储在`directory`（如`FileOne\nAnotherFile\nThird file\n`）中，文件扩展名为`EXTENSION`. 文件名列表来自我程序的另一部分。

我有点担心`filenamelist`会被滥用来删除系统上的其他文件。有没有更好的锁定方法？最初我存储了要删除的文件的完整路径，但后来分离并硬编码了目录和文件扩展名以试图混淆它。

我可能是偏执狂，但恶意用户（！）可能会`filenamelist`以某种方式毒害其他文件路径。例如`../../another-directory/donotdeleteme.sys`或以某种我什至无法想到的方式逃避它。

那么下面的删除例程可以被滥用来删除外部文件`directory`吗？关于如何进一步锁定它以防止 cat·astrophe 的任何建议？

PS：该程序必须*以root*身份运行，因为它的操作是修改用户主目录之外的文件。

```
#define EXTENSION ".stuff"
char *directory = calloc( 28 );
directory = "/usr/local/share/stuffings/";
char *filenamelist = calloc( 24 );
filenamelist = "/etc/stuffing/files.lst";

void delete_files( char* filenamelist, char* directory ) {

  if ( access( filenamelist, F_OK | R_OK ) == 0 ) {
    FILE *filenamelist_fp = fopen( filenamelist, "r" );
    char filename[200];

    while( fgets( filename, 200, filenamelist_fp ) != NULL ) {
      char *pos;
      char *path = calloc( ( strlen( directory ) + strlen( filename ) + strlen( EXTENSION ) + 1 ), sizeof( char ) );

      if ( ( pos=strchr( filename, '\n' ) ) != NULL )
       *pos = '\0';

      strcat( path, directory );
      strcat( path, filename );
      strcat( path, EXTENSION );

      if ( access( path, F_OK | W_OK ) == 0 )
        unlink( path );
      free( path );
    }

    fclose( filenamelist_fp );
    unlink( filenamelist );
  }
} /* © */ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T19:45:55.293

如果您添加检查以确保`/`文件名中没有嵌入任何字符，那么您将完全安全地删除给定目录之外的文件（假设是 POSIX 平台）。不幸的是，这也将阻止删除给定目录下的子目录中的文件。如果这没问题，那么您可以使用该解决方案。

如果您需要支持删除给定目录的子目录中的文件，那么第一步是阻止`..`出现为路径名的任何组件，但这还不够：您需要注意到给定目录下任何位置的目录的符号链接，因为跟随它们可能会导致删除树外的文件。在这种情况下，最强大的解决方案可能是自己解析路径名的每个组件，使用手动打开每个目录组件`openat`（比较结果`fstat`和`lstat`事后以确保您没有遵循符号链接），并`unlinkat`在最后使用删除文件。

顺便说一句，你的电话`access( filenamelist, F_OK | R_OK)`是多余的和不必要的。在打开文件之前测试对文件的访问是没有意义的。你也可以只是`fopen()`文件。

# php - 使用 WampServer (Win7/64) 将哪个 PHP 文件添加到我的路径

> ID：14060108
> 
> 赞同：21
> 
> 时间：2012-12-27T19:24:11.133
> 
> 标签：php, wamp, wampserver, composer-php

我一直在阅读使用 PHP 的 TDD 并且我准备安装 PHPUnit，但是......

1.  我在 Win7/64 上运行 WampServer
2.  我正在阅读所有这些 PEAR/PHPUnit 安装噩梦故事，这些故事让我非常怀疑。
3.  所以我正在考虑使用[Composer](http://getcomposer.org/)来安装 PHPUNit（暂时跳过整个 PEAR 的事情）。
4.  无论哪种方式，似乎***最好将 PHP 放在 PATH***中，我认为默认的 wampserver 设置**不是这种情况（因为它不在我的 PATH 中）**

我对究竟应该将哪个 php 文件添加到 PATH 感到有些困惑，因为我的目录 (C:\wamp\bin\php\php5.3.10) 具有以下文件：

1.  php.exe
2.  php-win.exe

本来打算用1号的。

最后，是否还有其他需要注意的警告。

我正在使用 NetBeans（和 SublimeText2 作为前端的东西）和 WampServer 2.2

谢谢！

轨枕

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-27T22:07:29.293

我解决了。我只是添加目录（C:\wamp\bin\php\php5.3.10），而不是单个文件。看我的评论。

# python - read_table pandas python数字错误

> ID：14060111
> 
> 赞同：1
> 
> 时间：2012-12-27T19:24:25.550
> 
> 标签：python, pandas

我正在做一个`pd.read_table`文件`.txt`的基础。第一列是 cusips 列表。尖`"65248E10"`点被读取为数字`65248E10 = 652480000000000`（E10 为科学记数法）。

我一直在经历熊猫，但我不知道如何要求它保持角色。 [http://pandas.pydata.org/pandas-docs/dev/generated/pandas.io.parsers.read_table.html#pandas.io.parsers.read_table](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.io.parsers.read_table.html#pandas.io.parsers.read_table)

此外，即使我将标题 = 0，它似乎将第一行作为标题，然后第 0 行是第二行，依此类推。如果我的文本文件没有列名，我怎样才能让它默认为 NULL（或 1、2、3 等）

谢谢您的帮助。我是熊猫/python的新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:47:41.583

如果我们有一个看起来像的数据文件

```
65248E10 11
55555E55 22 
```

然后我们可以用类似的东西读入它

```
>>> pd.read_table("cusip.txt", header=None, delimiter=" ", converters={0: str})
          0   1
0  65248E10  11
1  55555E55  22 
```

我们`header=None`用来告诉它没有任何标题，我们`delimiter=" "`用来告诉它有一个空格分隔符（调整以匹配您的数据格式），并`converters={0: str}`告诉它在将第一列作为字符串读取后，我们想要把它变成一个字符串（即在这种情况下什么都不做）而不是进一步处理它。代替`converters={0: str}`,`dtype=(str, int)`也可以，但是这样我们仍然可以`pandas`弄清楚其他列是什么。

使用的问题`header=0`是`0`这里并不意味着“没有标题”，它意味着使用行号#0（第一行）作为标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T19:46:59.400

要阻止您的列被读取为数字，请使用`converters`参数并指定`str`为包含“cusips”的列的转换器。

对于标题，如您链接到的页面上记录的那样，`header`是被视为标题的行*号*；这不是一个布尔值“我是否有标题。将其设置为零意味着使用零行（即第一行）作为标题。文档明确指出：

> 如果没有标题行，请指定无。

# design-patterns - Entity 使用 entity manager ，这个设计有多好？

> ID：14060113
> 
> 赞同：1
> 
> 时间：2012-12-27T19:24:49.200
> 
> 标签：design-patterns, jakarta-ee, jpa, ejb, jpa-2.0

我正在评估这种允许实体访问实体管理器的设计。

**图书实体：**

```
@Entity
public class Book implements Serializable {

    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    private Long isbn;
    private String nom;

     public void save() {
        System.out.println("OWN PERSIST !");
      **ThreadLocalEntityManager.em().persist(this);**
    }
} 
```

**图书服务：**

```
@Stateless
@Interceptors(EntityManagerInjector.class)

public class BookService {
       public void create()
       {
         Book b=new Book(1,2,"3");
         b.save();
       }
} 
```

**EntityManagerInjector**

```
public class EntityManagerInjector implements Serializable {

    @PersistenceContext
    private EntityManager em;

    @AroundInvoke
    public Object associate(InvocationContext ic) throws Exception {
        ThreadLocalEntityManager.associateWithThread(em); //statically imported method
        try {
            return ic.proceed();
        } finally {
            ThreadLocalEntityManager.cleanupThread();
        }
    }
} 
```

**ThreadLocalEntityManager**

```
public class ThreadLocalEntityManager {

    private static final ThreadLocal<EntityManager> THREAD_WITH_EM = new ThreadLocal<EntityManager>();

    private ThreadLocalEntityManager() {
    }

    public static void associateWithThread(EntityManager em) {
        THREAD_WITH_EM.set(em);
    }

    public static EntityManager em() {
        System.out.println("gettint entitymanger from thread:"+THREAD_WITH_EM.toString());
        System.out.println("entitymanger id:"+THREAD_WITH_EM.get().toString());
        return THREAD_WITH_EM.get();
    }

    public static void cleanupThread() {
        THREAD_WITH_EM.remove();
    }
} 
```

我有一些疑问：

1.  这是避免使用 crud 服务（创建、删除、findXX）的好设计吗？
2.  这种设计可以在容器中创建任何类型的运行时执行问题吗？
3.  将`book.save()`声明更改为静态是简化对“持久性操作”的访问的好方法（避免新的`Book().find(id)"`?

谢谢 。ps1：我正在使用`JPA 2`，`Ejb 3.1`和 Glassfish 3.1.2

ps2：我在 Real World Java EE Patterns Rethinking Best Practices (Adam Bien) 中找到了这个设计

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T01:34:27.320

我会反对这种设计。

1.  大多数 App Server 不喜欢你修补 Thread

    App Server 为处理请求做了很多近乎神奇的线程管理，强烈建议您甚至不要在 JavaEE 中创建线程。

2.  EntityManagers 是短暂的东西

    一个新兴市场应该只在交易持续的时候存活。在这种情况下，看起来 EM 可以传递到在同一个容器中运行的不同应用程序中。这可以使调试成为一种真正的乐趣。

    想象一下，如果您从 BookService 调用不同的 EJB，它会将 EM 设置为另一个 EJB 的 EM。如果您曾经有两个持久性单元，这将是一个大问题。

3.  不开放扩展

    该系统中的任何新 EJB 都必须了解这种处理 EM 的有趣方式。如果您是编写它们的人，这没关系，但是外部提供的 EJB 呢？

4.  缺乏凝聚力

    EJB 是控制/定义事务的地方。为什么我们要推出 JPA bean 的接口？ `save()`只能在这个非常具体的框架内工作，并且在单元测试中将是 100% 的痛苦。

    想想你是否想重用这个 bean 来做一些需要 XML 序列化的事情，比如 WebServices。现在`save()`不能正常工作。持久性引擎已经可以通用地处理bean，不要在它上面写另一个层来剥离它。

# javascript - 更改 KineticJS 中的拖动目标

> ID：14060119
> 
> 赞同：1
> 
> 时间：2012-12-27T19:25:17.500
> 
> 标签：javascript, jquery, html, canvas, kineticjs

单击第一个对象时是否可以将被拖动的对象切换到另一个对象？

**问题：**在下面的jsfiddle中，当红色圆圈被拖动时，变为蓝色矩形但对初始拖动没有反应。必须在蓝色矩形上进行第二次拖动才能拖动它。

**期望：**它应该从红色圆圈变为蓝色矩形，并且蓝色矩形应该立即平滑地跟随拖动运动。

**尝试：**我尝试了`.simulate()`这些事件，但它似乎不起作用。有任何想法吗？

```
circle.on('dragmove', function(e) { 
    circle.simulate('click');  // used click handler to change into a blue rectange
    circle.simulate('dragend'); // (FAILED) stop dragging red circle
    rectangle.simulate('dragmove');     // (FAILED) start dragging blue rectangle
}); 
```

**JSFIDDLE：http:** [//jsfiddle.net/M6ufm/](http://jsfiddle.net/M6ufm/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:38:46.273

[http://jsfiddle.net/M6ufm/3/](http://jsfiddle.net/M6ufm/3/)

我为你更新了这个。本质上，您是在移除圆，然后在其上模拟一个事件，然后在矩形上模拟一个事件。

```
// Show BLUE rectangle on clicking RED circle, Hide RED circle, start dragging rectangle

circle.on('dragstart mousedown', function(e) { 
   layer.add(rectangle); 
   circle.remove();
   rectangle.simulate('mousedown');
   rectangle.simulate('dragstart');     
}); 
```

# php - 我需要使用此代码更改此搜索表单代码吗？

> ID：14060121
> 
> 赞同：-1
> 
> 时间：2012-12-27T19:25:26.683
> 
> 标签：php, wordpress, search

我在 wordpress 前面有一个搜索，它需要替换为搜索我的画廊的第二个搜索。我试过弄乱代码但没有任何效果？

这是当前的搜索表单

```
<form method="get" id="searchbar" action="<?php echo home_url( '/' ); ?>">
<input type="search" name="s" placeholder="search...">
</form> 
```

这是我需要的搜索

```
 <p class="search-box">
<label class="screen-reader-text" for="post-search-input">Search Gallery Posts:</label>
<input type="search" id="post-search-input" name="s" value=""/>
<input type="submit" name="" id="search-submit" class="button" value="Search Gallery Posts"/>
</p>
<input type="hidden" name="post_status" class="post_status_page" value="all"/>
<input type="hidden" name="post_type" class="post_type_page" value="gallery"/>
<input type="hidden" id="_wpnonce" name="_wpnonce" value="386bd8477b"/>
<input type="hidden" name="_wp_http_referer" value="/wp-admin/edit.php?post_type=gallery"/>
<div class="tablenav top">
<table class="wp-list-table widefat fixed posts" cellspacing="0">
<div class="tablenav bottom">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:09:10.683

看起来你应该替换你的代码：

```
<form method="get" id="searchbar" action="<?php echo home_url( '/' ); ?>">
    <input type="search" name="s" placeholder="search...">
</form> 
```

有了这个：

```
<p class="search-box">
    <form method="get" id="searchbar" action="<?php echo home_url( '/' ); ?>">
        <label class="screen-reader-text" for="post-search-input">Search Gallery Posts:</label>
        <input type="search" id="post-search-input" name="s" value=""/>
        <input type="submit" name="" id="search-submit" class="button" value="Search Gallery Posts"/>
        <input type="hidden" name="post_status" class="post_status_page" value="all"/>
        <input type="hidden" name="post_type" class="post_type_page" value="gallery"/>
    </form>
</p> 
```

# php - PDO 查询未更新

> ID：14060123
> 
> 赞同：0
> 
> 时间：2012-12-27T19:25:41.130
> 
> 标签：php, mysql, pdo

我已经正确设置了我的查询，它返回时完全没有错误，但由于某些原因没有更新

```
$database->updateAdmin(1, $_POST['user']);

 public function updateAdmin($status, $uid) {
    $sql = 'UPDATE users SET admin = :status WHERE uid = :uid';
    $result = $this->pdo->prepare($sql);
    $result->execute([
        ':status' => $status,
        ':uid' => $uid
    ]);
}

<select name="user">
      <option value="1">John</option>
     <option value="2">Sarah</option>
 </select> 
```

管理字段是 ENUM ('0','1')

这就是所有设置的方式，它只是说一切正常，但从未更新，有人能发现为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:32:49.457

为了使它带有错误，您必须要求它们。
您是否将 PDO 设置为异常模式？

但是，可能有一个很难发现的技巧。
您必须将 1 绑定为字符串，而不是数字。否则不会更新。
我不太熟悉数组的自动绑定，但是 PDO 很可能会做一些魔术并将您的 1 绑定为数字。所以，可以肯定的是，我会手动绑定它。

# php - 表中的动态记录生成。无法正确显示数据

> ID：14060125
> 
> 赞同：0
> 
> 时间：2012-12-27T19:25:55.990
> 
> 标签：php, html, mysql

我有以下代码，其中数据库表中的数据显示在表中。但是在 2-3 条记录之后，它无法正确显示记录。

这是代码：

```
<tr>
      <?php do { ?>
        <td>&nbsp;</td>
        <td><?php echo $row_Recordset1['notification']; ?></td>
        <td><?php echo $row_Recordset1['online_date']; ?></td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        </tr>
        <?php } while ($row_Recordset1 = mysql_fetch_assoc($Recordset1)); ?> 
```

它生成以下输出： ![我的第 3 条记录的通知是空的，第 4 条记录显示不正确。](../Images/d7bdd62f4de8a15356b1db52c9e75973.png)

行 HTML 输出为：

```
<form id="form1" name="form1" method="post" action="">
  <table width="900" align="center" cellpadding="0" cellspacing="0">
    <tr>
      <td rowspan="6">&nbsp;</td>
      <td colspan="5"><div align="center">Active Notifications </div></td>
      <td rowspan="6">&nbsp;</td>
    </tr>
    <tr>
      <td colspan="5">&nbsp;</td>
    </tr>
    <tr>
      <td>No.</td>
      <td>Notifications</td>
      <td>Online Date </td>
      <td colspan="2">Transactions</td>
    </tr>
          <tr>
        <td>&nbsp;</td>
        <td>Our New destinations are Countries.</td>
        <td>2012-12-27</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
            <tr>
        <td>&nbsp;</td>
        <td>abcdefgh</td>
        <td>2012-12-27</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
            <tr>
        <td>&nbsp;</td>
        <td>Hi</td>
        <td>2012-12-27</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
            <tr>
        <td>&nbsp;</td>
        <td>hello</td>
        <td>2012-12-27</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
            <tr>
      <td colspan="5">&nbsp;</td>
    </tr>
    <tr>
      <td>&nbsp;</td>
    </tr>
  </table>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:29:32.020

你的`<tr>`标签在循环之外，而结束的标签在里面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T19:29:52.857

首先，我认为您的循环应该是一个普通`while`循环而不是 a `do ... while`，除非您之前有一些代码正在获取第一条记录。

其次，你的`<tr>`标签在循环之外，它应该在里面：

```
 <?php while ($row_Recordset1 = mysql_fetch_assoc($Recordset1)) { ?>
    <tr>
    <td>&nbsp;</td>
    <td><?php echo $row_Recordset1['notification']; ?></td>
    <td><?php echo $row_Recordset1['online_date']; ?></td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    </tr>
   <?php } ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T19:31:09.027

显示不正确是什么意思？从html的角度或数据的角度来看？如果从 html 的角度来看，您是在循环外打开 tr ，但是您是在循环内关闭它。基本上你的结构看起来像：`tr td td td td /tr td td td td /tr`而不是`tr td td td td /tr tr td td td td \tr`

# jquery - 如何检测 jQuery UI 单选更改事件？

> ID：14060129
> 
> 赞同：6
> 
> 时间：2012-12-27T19:26:14.000
> 
> 标签：jquery, jquery-ui, events, radio-button

我有 2 个无线电控件：

```
<fieldset id="sort">
                <label for="sort">Sort: </label>
                <input class="sortDirection" type="radio" id="asc" name="sortDirection"><label for="asc">asc</label>
                <input class="sortDirection" type="radio" id="desc" name="sortDirection"><label for="desc">desc</label>
</fieldset> 
```

这是我正在使用的 jquery：

```
$(document).ready(function(){
        $('#sort').buttonset();
});

$('#asc').on("change", function(event){
        alert("CHANGE EVENT!");
}); 
```

我也尝试过（结果相同）：

```
$('#sort input[type="radio"]').on("change", function(event){
        alert("CHANGE EVENT!");
}); 
```

永远不会执行警报。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T19:36:13.797

事件必须在**$(document).ready**或 **window.onload内**

这段代码：

```
$(document).ready(function(){
        $('#sort').buttonset();
}); 
```

**应该**

```
$(document).ready(function(){
        $('#sort').buttonset();

        // events  
        $('#asc').on("change", function(event){
              alert("CHANGE EVENT!");
        });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T19:32:26.510

```
$(document).on("change", ".sortDirection", function(){
    alert("changed");
    //insert code here
});​ 
```

**[例子](http://jsfiddle.net/SWQSS/)**

我建议使用`change`事件而不是`click`事件。当相同的选项被编辑两次`change`时不会再次触发。`click`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T19:29:47.113

试试这个

```
$('.sortDirection').click(function(event){
        alert("CHANGE EVENT!");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T19:39:06.543

由于'#sort'是按钮集，我认为它应该是：

```
$('#sort').on("change", function(event){
    alert("CHANGE EVENT!");
}); 
```

# eclipse - 在 Scala IDE 中访问配置资源

> ID：14060131
> 
> 赞同：12
> 
> 时间：2012-12-27T19:26:15.007
> 
> 标签：eclipse, scala, scala-ide, typesafe-stack

我的一些同事使用 Eclipse 3.7.2 和 Scala IDE 2.1 进行开发。我想使用[typesafe 的配置模块](https://github.com/typesafehub/config)进行应用程序配置。我想使用基于约定的默认配置位置。根据示例和文档，可以在以下相对于项目根目录的路径中找到默认配置

```
/src/main/resources/application.conf 
```

但是当我使用 Scala IDE 的 Scala 应用程序加载器运行我的项目时，SimpleConfig 类型无法加载此文件中设置的任何配置值。另一种方法是通过 sbt 传入配置文件系统属性，但我不想在某处显式设置此路径。谁能指出我做错了什么？

```
Exception in thread "main" java.lang.ExceptionInInitializerError
    at com.foo.dataservices.MyServer.main(MyServer.scala)
Caused by: com.typesafe.config.ConfigException$Missing: No configuration setting found for key 'bar'
    at com.typesafe.config.impl.SimpleConfig.findKey(SimpleConfig.java:115)
    at com.typesafe.config.impl.SimpleConfig.find(SimpleConfig.java:138)
    at com.typesafe.config.impl.SimpleConfig.find(SimpleConfig.java:150)
    at com.typesafe.config.impl.SimpleConfig.find(SimpleConfig.java:155)
    at com.typesafe.config.impl.SimpleConfig.getConfigNumber(SimpleConfig.java:170)
    at com.typesafe.config.impl.SimpleConfig.getInt(SimpleConfig.java:181) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-27T20:44:52.823

您需要将资源文件夹添加到您的 java 构建路径：

1.  在 Project Explorer 中右键单击您的项目
2.  属性 -> 单击 Java 构建路径 -> 选择“源”选项卡
3.  单击“添加文件夹...”并添加您的 src/main/resources 文件夹

更新：如果您使用的是 sbt eclipse 插件，您可以将其配置为自动将资源文件夹添加到类路径：

（来自：[sbteclipse 文档](https://github.com/typesafehub/sbteclipse/wiki/Using-sbteclipse)）

`EclipseKeys.createSrc := EclipseCreateSrc.Default + EclipseCreateSrc.Resource`

# c# - 如何在 C# 中将文件从网站下载到 Web 服务器？

> ID：14060136
> 
> 赞同：0
> 
> 时间：2012-12-27T19:26:33.150
> 
> 标签：c#, asp.net, webserver, download

我有一个由 GoDaddy 托管的网站（Windows 服务器托管）。我希望能够从 Internet 下载文件（例如[http://ichart.finance.yahoo.com/table.csv?s=SIRI&d=11&e=27&f=2012&g=d&a=8&b=13&c=1994&ignore=. csv](http://ichart.finance.yahoo.com/table.csv?s=SIRI&d=11&e=27&f=2012&g=d&a=8&b=13&c=1994&ignore=.csv) ) 直接托管在 Web 服务器上的文件夹（例如 App_Data）。也许这涉及FTP？我正在使用 ASP .NET 3.5 和 C#。

编辑：我遇到的问题是如何将文件直接下载到服务器，而不是如何下载文件。由于 web 服务器需要权限，所以并不像下载文件到本地机器那么简单。此外，代码将从 Web 服务器本身运行。

编辑：这不是 cron 工作。

更新：因此，ASP 应用程序在 GoDaddy 服务器（托管我的网站）上运行。我试图能够使用应用程序将文件直接下载到该服务器。下面是我尝试过的代码。这段代码编译得很好，但是，上传到服务器后，它给了我一个运行时错误。

```
using System;
using System.Data;
using System.Configuration;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;

public partial class _Default : System.Web.UI.Page 
{
    protected void Page_Load(object sender, EventArgs e)
    {
        string URL = @"http://ichart.finance.yahoo.com/table.csv?s=SIRI&d=11&e=19&f=2012&g=d&a=8&b=13&c=1994&ignore=.csv";

        System.Net.WebClient downloadSite;
        downloadSite = new System.Net.WebClient();
        downloadSite.DownloadFile(URL, @"ftp://<ftp user name>:<ftp password>@<ftp ip address>");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:35:42.423

检查`WebClient.DownloadFile`方法：

*   [http://msdn.microsoft.com/en-us/library/ez801hhe.aspx](http://msdn.microsoft.com/en-us/library/ez801hhe.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T19:36:08.553

这个例子将

```
 string uri = "http://ichart.finance.yahoo.com/table.csv?s=SIRI&d=11&e=27&f=2012&g=d&a=8&b=13&c=1994&ignore=.csv";
        var httpRequest = WebRequest.Create(uri) as HttpWebRequest;
        var httpResponse = httpRequest.GetResponse();
        var httpStream = httpResponse.GetResponseStream();
        using (var fileStream = new FileStream("D:\\test.csv" , FileMode.OpenOrCreate))
        {
            httpStream.CopyTo(fileStream);
        } 
```

将下载并保存到文件中

# android - 是否有 API 可以获取用户从 Google Play 商店购买的应用程序？

> ID：14060140
> 
> 赞同：2
> 
> 时间：2012-12-27T19:26:37.737
> 
> 标签：android

我想知道有没有办法让用户从 Google Play 商店或几乎所有的应用程序购买应用程序。当然，这需要用户许可，但有没有可用于获取此信息的 api？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:29:54.360

不，在您自己的应用程序之外，没有用于在 Google Play 商店中获取所有用户活动的官方 API。但是，您**可以**使用 LVL 和/或应用内计费 API 等技术来确定用户是否从您自己的应用中购买了您自己的应用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-27T19:32:49.653

您可以获得所有已安装的应用程序。看看 Nelson Ramirez 的答案：[How to get a list of installed android applications and pick one to run](https://stackoverflow.com/questions/2695746/how-to-get-a-list-of-installed-android-applications-and-pick-one-to-run)

# git - 如何在 gitweb 界面中看到远程分支

> ID：14060143
> 
> 赞同：1
> 
> 时间：2012-12-27T19:26:45.210
> 
> 标签：git

在 gitweb 界面中，我看到它有一个“heads”部分。这是否等于本地的“git分支”？我怎样才能看到远程分支头？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:56:00.757

是的，这等于`git branch`。如果要查看特定分支头的状态，则必须修改 url：

```
*your-site*?p=*your-project*;a=log;h=*full-ref* 
```

`*full-ref*`会是这样的`refs/remotes/origin/master`

# database - 这些自动生成的 Db 文件是什么？

> ID：14060145
> 
> 赞同：6
> 
> 时间：2012-12-27T19:27:06.820
> 
> 标签：database, grails

我正在开发一个使用可重入锁定和数据库锁定的 grails 应用程序。我刚刚注意到一些自动生成的附加文件。我想知道它们是什么。他们叫：

```
devDb.h2.db
devDb.lock.db
devDb.trace.db 
```

还有一组用于测试配置：

```
testDb.h2.db
testDb.trace.db 
```

我假设 *Db.h2.db 只是我的数据库（在我的 DataSource.groovy 中设置为文件而不是内存中）。但是其他的呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T20:01:57.080

*   `devDb.h2.db`是数据库本身。（`devDb.mv.db`对于较新的版本）
*   `devDb.lock.db`是一个锁文件。H2 允许多个进程共享数据库，该文件用于协调访问。当数据库完全关闭时，应自动删除此文件。
*   `devDb.trace.db`只是用于检查或调试 H2 的日志。`TRACE_LEVEL_FILE`可以通过向JDBC URL添加参数来控制是否创建它以及记录多少详细信息。
*   `testDb.h2.db`并且与测试环境中使用`testDb.trace.db`的对应项相同（例如）。`devDb``grails test-app`

# jsf - PrimeFaces 文件上传和输入绑定

> ID：14060151
> 
> 赞同：0
> 
> 时间：2012-12-27T19:27:43.413
> 
> 标签：jsf, data-binding, file-upload, primefaces

我正在使用`<p:fileUpload mode="advanced"`> 并且它适用于文件上传。问题是当`fileUploadListener`调用支持中的方法时，表单中没有其他输入元素绑定到支持 bean。PF 似乎`fileUpload`不是一个普通的 JSF 组件，因为它也不会触发[验证错误](https://stackoverflow.com/questions/13865136/primefaces-3-4-fileupload-validator-not-fired)。`fileUploadListener`知道如何调用之前提交的表单吗？

# reporting-services - 如何在报表设计器中刷新数据集定义？

> ID：14060157
> 
> 赞同：0
> 
> 时间：2012-12-27T19:27:49.783
> 
> 标签：reporting-services

我不断得到：

> Dataset1 包含字段“[我的字段名称]”的定义返回的数据集中缺少此字段。

我所做的是`[my Field name]`从结果集中删除了 。我希望刷新 dataset1，所以它不需要这个字段。你如何做到这一点？

我已经刷新了 dataset1 中的字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T04:13:57.057

错误文本是否告诉您错误在哪里？它可能是一个文本框或其他控件正在使用`[my Field name]`.

# forms - 可以在 qt creator 中编辑 c++ 代码

> ID：14060160
> 
> 赞同：0
> 
> 时间：2012-12-27T19:28:02.150
> 
> 标签：forms, qt

请原谅我对此的无知，但我使用的是 QT creator 2.6，并且我在 QT 设计器中设计了一个表单。有没有办法编辑表单的c++源代码？

如果不是，那么这是否意味着在使用 QT 创建器时我必须为窗口编写代码，或者使用设计器，但我不能为同一个窗口同时做这两个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:45:33.527

我不知道“编辑表单的 c++ 源代码”到底是什么意思，但是在使用设计器时，您仍然可以使用代码从表单中访问对象

```
ui->objName 
```

如果您想使用自己的小部件，您可以在设计器中为其创建布局，并稍后在代码中（在 MainWindow 构造函数中）使用类似的东西添加它

```
ui->layoutName->addWidget(yourWidget) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T21:53:38.313

这是Qt，不是QT。

表单由`*.ui`文件描述，这是一个 xml，您可以使用任何文本编辑器对其进行编辑（我记得 Qt Creator 本身禁止编辑它）。

通常*.ui 文件伴随着`*.h`and`*.cpp`文件，其中使用了表单本身及其对象。您还可以以编程方式创建表单小部件并将它们放置在表单上，​​这就是 Creator 的意思。

如果您想通过代码创建 UI，我建议您查看[Qt Quick 和 QML](http://doc.qt.digia.com/qt/qml-intro.html "qml教程")。

# java - 在 XMLGregorianCalendar 中指定日期格式

> ID：14060161
> 
> 赞同：23
> 
> 时间：2012-12-27T19:28:13.920
> 
> 标签：java, calendar, gregorian-calendar

我想使用日期`XMLGregorianCalendar`格式发送到 Web 服务。Web 服务需要`yyyy-dd-mm`格式的信息。我使用下面的代码创建一个`XMLGregorianCalendar`并将其发送到 Web 服务。

```
Date dob = null;
DateFormat df = new SimpleDateFormat("dd/MM/yyyy");

try {
    XMLGregorianCalendar date2;
    dob = df.parse("13/06/1983");

    GregorianCalendar c = new GregorianCalendar();
    c.setTimeInMillis(dob.getTime());
    date2 = DatatypeFactory.newInstance().newXMLGregorianCalendar(c);
    System.out.println(date2);
}
catch(DatatypeConfigurationException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
catch(ParseException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

不幸的是，我总是得到日期`1983-06-13T00:00:00.000-04:00`。时间也包含在输出中。是否可以只获取日期？请你帮助我好吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-10-18T13:27:42.953

您不需要指定“SimpleDateFormat”，这很简单：您必须在不想显示的地方指定常量“DatatypeConstants.FIELD_UNDEFINED”

```
GregorianCalendar cal = new GregorianCalendar();
cal.setTime(new Date());
XMLGregorianCalendar xmlDate = DatatypeFactory.newInstance().newXMLGregorianCalendarDate(cal.get(Calendar.YEAR), cal.get(Calendar.MONTH)+1, cal.get(Calendar.DAY_OF_MONTH), DatatypeConstants.FIELD_UNDEFINED); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-27T19:36:05.267

是的 明白了...

```
Date dob=null;
DateFormat df=new SimpleDateFormat("dd/MM/yyyy");
dob=df.parse( "13/06/1983" );
GregorianCalendar cal = new GregorianCalendar();
cal.setTime(dob);
XMLGregorianCalendar xmlDate = DatatypeFactory.newInstance().newXMLGregorianCalendarDate(cal.get(Calendar.YEAR), cal.get(Calendar.MONTH)+1, cal.get(Calendar.DAY_OF_MONTH), DatatypeConstants.FIELD_UNDEFINED); 
```

这将以正确的格式给出它。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-05-10T08:28:55.980

仅使用 SimpleDateFormat 更简单，无需单独传递所有参数：

```
 String FORMATER = "yyyy-MM-dd'T'HH:mm:ss'Z'";

    DateFormat format = new SimpleDateFormat(FORMATER);

    Date date = new Date();
    XMLGregorianCalendar gDateFormatted =
        DatatypeFactory.newInstance().newXMLGregorianCalendar(format.format(date)); 
```

完整的例子[在这里](http://www.admfactory.com/how-to-format-xmlgregoriancalendar/)。

**注意：**这仅适用于删除最后 2 个字段：毫秒和时区，或使用 formatter 删除整个时间组件`yyyy-MM-dd`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-05T03:18:51.810

这是任何格式的简单方法。只需将其更改为所需的格式字符串

```
XMLGregorianCalendar gregFmt = DatatypeFactory.newInstance().newXMLGregorianCalendar(new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss").format(new Date()));
System.out.println(gregFmt); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-02-15T11:16:21.167

没有真正理想的转换，但我想提供几个选项。

**java.time**

首先，您应该使用`LocalDate`现代 Java 日期和时间 API from java.time 来解析和保存您的日期。避免`Date`，`SimpleDateFormat`因为它们存在设计问题并且已经过时了。后者尤其是出了名的麻烦。

```
 DateTimeFormatter originalDateFormatter = DateTimeFormatter.ofPattern("dd/MM/uuuu");

    String dateString = "13/06/1983";
    LocalDate date = LocalDate.parse(dateString, originalDateFormatter);
    System.out.println(date); 
```

输出是：

> 1983-06-13

你还需要更进一步吗？`LocalDate.toString()`产生您询问的格式。

**格式化和解析**

假设您确实需要`XMLGregorianCalendar`第一个也是简单的转换选项：

```
 XMLGregorianCalendar xmlDate = DatatypeFactory.newInstance()
            .newXMLGregorianCalendar(date.toString());
    System.out.println(xmlDate); 
```

> 1983-06-13

格式化为字符串并将其解析回对我来说感觉像是一种浪费，但正如我所说，这很容易，而且我认为结果符合预期不会有任何意外。

**分别传递年、月和日**

```
 XMLGregorianCalendar xmlDate = DatatypeFactory.newInstance()
            .newXMLGregorianCalendarDate(date.getYear(), date.getMonthValue(),
                    date.getDayOfMonth(), DatatypeConstants.FIELD_UNDEFINED); 
```

结果和以前一样。我们需要明确表示我们不想要时区偏移（这是`DatatypeConstants.FIELD_UNDEFINED`指定的）。万一有人想知道，`LocalDate`和`XMLGregorianCalendar`人类一样数月，所以没有加或减 1。

**通过公历转换**

我只向您展示此选项，因为我以某种方式将其视为官方方式：转换`LocalDate`为`ZonedDateTime`，然后转换为 ，`GregorianCalendar`最后转换为`XMLGregorianCalendar`。

```
 ZonedDateTime dateTime = date.atStartOfDay(ZoneOffset.UTC);
    GregorianCalendar gregCal = GregorianCalendar.from(dateTime);
    XMLGregorianCalendar xmlDate = DatatypeFactory.newInstance()
            .newXMLGregorianCalendar(gregCal);
    xmlDate.setTime(DatatypeConstants.FIELD_UNDEFINED, DatatypeConstants.FIELD_UNDEFINED,
            DatatypeConstants.FIELD_UNDEFINED, DatatypeConstants.FIELD_UNDEFINED);
    xmlDate.setTimezone(DatatypeConstants.FIELD_UNDEFINED); 
```

我喜欢转换本身，因为我们既不需要使用字符串，也不需要传递单个字段（注意以正确的顺序进行）。我不喜欢的是我们必须传递一天中的时间和时区偏移量，然后手动清除这些字段。

# vb6 - Visual Basic 6：运行时错误 424（如果函数）

> ID：14060162
> 
> 赞同：1
> 
> 时间：2012-12-27T19:28:21.113
> 
> 标签：vb6, syntax-error, runtime-error

抱歉，我是 VB6 的初学者。我有这个：

```
Private Sub Command5_Click()
    If MessageBox.Show("Sei sicuro di voler uscire?", "Sicuro?", MessageBoxButtons.YesNo) = DialogResult.Yes Then
        Unload Me
    End If
End Sub 
```

但它返回一个错误：

```
Run-time error '424':
Object required 
```

请问，有人可以回答我的问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T19:31:19.860

`MessageBox.Show`并且`MessageBoxButtons`是 .NET 的东西。（顺便说一下，你为什么不使用 .NET？`:)`）这是它在 VB6 中的样子：

```
If MsgBox("Sei sicuro di voler uscire?", vbYesNo, "Sicuro?") = vbYes Then 
```

# jsf-2 - 将 url 参数传递给支持 bean 方法

> ID：14060164
> 
> 赞同：0
> 
> 时间：2012-12-27T19:28:22.783
> 
> 标签：jsf-2

我的 Facelet 中有以下代码：

```
<ui:composition template="/templates/mastertemplate.xhtml">
    <ui:define name="pageTitle">
        <h:outputFormat value="#{msgs.productPageTitle}">
            <f:param value="#{param.productName}"/>
        </h:outputFormat>
    </ui:define>
    <ui:param name="categoryName" value="#{param.categoryName}"/>

    <ui:define name="content">
        <p>#{param.productName}</p>
        <h:form>
            <h:commandLink action="#{cartBean.addItemToCart(param.productName)}">
                <f:ajax event="action" render=":cart :cartPrice" />
                <h:graphicImage value="resources/img/addToCart.gif"/>
            </h:commandLink>
        </h:form>
    </ui:define>
</ui:composition> 
```

`#{param.productName}`它按应有的方式打印。`cartBean`期望 a`String`作为其方法的参数（`addItemToCart`我知道这很糟糕，但不是我的选择）。我在我的设置了一个记录器，`cartBean`它告诉我参数没有通过，它是空的。

如果我执行以下操作：

```
<h:commandLink action="#{cartBean.addItemToCart('someProductName')}">
    <f:ajax event="action" render=":cart :cartPrice" />
    <h:graphicImage value="resources/img/addToCart.gif"/>
</h:commandLink> 
```

我用`#{param.productName}`字符串文字代替，它工作正常。为什么我不能将参数值作为参数传递？我得到一个`EvaluationException`解释为什么我的记录器看到一个空字符串但我不明白我应该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:45:23.717

不确定是否有可能，但至少这似乎是不好的做法。您将在没有任何验证/转换选项的情况下将字符串插入到您的支持中。

我找到了一个教程，它解释了你应该怎么做才能让它[在这里](http://balusc.blogspot.be/2011/09/communication-in-jsf-20.html#ProcessingGETRequestParameters)工作。

# java - 来自扫描仪的 hasNextInt() 行为怪异

> ID：14060165
> 
> 赞同：1
> 
> 时间：2012-12-27T19:28:36.723
> 
> 标签：java, user-input, java.util.scanner

我有一个非常简单的循环，它等待一个数字（int），只要那个数字不是`exitOption`它就不会离开循环，但是我得到一个意外错误，我不知道是什么原因造成的。

**编辑**

添加另一个片段，以便您可以编译

```
public static void main(String[] args) throws   FileNotFoundException,
                                                SecurityException,
                                                IOException,
                                                ClassNotFoundException {

    while (controller.selectOptionMM()); 
```

**/编辑**

```
public boolean selectOptionMM() throws  SecurityException, 
                                        FileNotFoundException, 
                                        IOException {

    int cmd = ui.getExitOption();

    ui.mainMenu();
    cmd = utils.readInteger(">>> "); // this is my problem, right here
                                     // code in next snippet 
    while (cmd <1 || cmd > ui.getExitOption()) {
        System.out.println("Invalid command!");
        cmd = utils.readInteger(">>> ");
    }

    switch (cmd) {
    case 1: 
    case 2: 
    case 3: 
    case 4: this.repository.close();
            return true;
    case 5: return false;
    }

    return false;
} 
```

这是失败的原因：

```
public int readInteger(String cmdPrompt) {
    int cmd = 0;
    Scanner input = new Scanner(System.in);

    System.out.printf(cmdPrompt);
    try {
        if (input.hasNextInt()) 
            cmd = input.nextInt(); // first time it works
            // Second time it does not allow me to input anything
                            // catches InputMissmatchException, does not print message
                            // for said catch
                            // infinitely prints "Invalid command" from previous snippet

    } catch (InputMismatchException ime) {
        System.out.println("InputMismatchException: " + ime);
    } catch (NoSuchElementException nsee) {
        System.out.println("NoSuchElementException: " + nsee);
    } catch (IllegalStateException ise) {

    } finally {
        input.close(); // not sure if I should test with if (input != null) THEN close
    }

    return cmd;
} 
```

**我第一次**通过低谷时，它读取数字没问题。现在，如果数字不是 5（在本例中为 exitOption），它会再次通过低谷，`readInteger(String cmdPrompt)`但这次它会跳转到`catch (InputMismatchException ime)`(debug)，除非它不打印该消息而只是跳转到`Error, input must be number`and `Invalid command`。

**有什么东西卡在我的输入缓冲区中，我可以刷新它吗，为什么它（输入缓冲区）卡住了（带有随机数据）？？？**

如果我能弄清楚如何查看它，我将再次尝试调试并查看我的输入缓冲区中卡住了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:05:42.360

问题在于调用`input.close()`- 这会导致底层输入流被关闭。当输入流被关闭时`System.in`，会发生不好的事情（即，您不能再从标准输入读取）。删除这条线应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T19:37:27.073

```
 input.hasNextInt() 
```

如果没有 Integer，则此行将引发异常，因此它不会将 else 向前阻止以 catch 块。如果捕获到异常，它将永远不会进入 else 块。

# ruby - RSpec 'specify' 以显式主题传递，但不以隐式主题传递

> ID：14060171
> 
> 赞同：1
> 
> 时间：2012-12-27T19:28:51.237
> 
> 标签：ruby, rspec

我以为我了解隐式主题在 RSpec 中的工作原理，但我不明白。

为什么在以下示例中，具有显式主题的第一个规范通过，但使用隐式主题的第二个规范失败，并出现“未定义的方法 `matches' for #”：

```
class Example
  def matches(str) ; true ; end
end

describe Example do
  subject { Example.new }
  specify { subject.matches('bar').should be_true }
  it { matches('bar').should be_true }
end 
```

（我使用的是 rspec 1.3，但我用 2.10.1 验证了相同的行为。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:48:55.967

回到一些基本的 ruby​​：你基本上是在调用`self.matches`，`self`在本例中是一个 RSpec 示例。

您可以在此示例中使用参数调用诸如“应该”之类的内容，因此您可以尝试以下操作：

```
it { should matches('bar') } 
```

但这会失败；`matches`自我仍然没有方法！

但是，在这种情况下，主题实际上是`matches`方法，而不是 Example 实例。因此，如果您想继续使用隐式主题，您的测试可能类似于：

```
class Example
  def matches(str) ; str == "bar" ; end
end

describe Example do
  describe "#matches" do
    let(:method) { Example.new.method(:matches) }

    context "when passed a valid value" do
      subject { method.call("bar") }
      it { should be_true }
    end

    context "when passed an invalid value" do
      subject { method.call("foo") }
      it { should be_false }
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:42:51.020

我认为您不能调用任何隐式主题的方法。隐含的主题含义你不需要指定主题，但是如果你想调用任何方法你需要指定主题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T19:54:38.150

虽然 Chris 提供了非常好的答案，但我建议您看看这篇博文：[http ://blog.davidchelimsky.net/2012/05/13/spec-smell-explicit-use-of-subject/](http://blog.davidchelimsky.net/2012/05/13/spec-smell-explicit-use-of-subject/)

# php - iOS 尝试将位置更新发布到服务器

> ID：14060174
> 
> 赞同：1
> 
> 时间：2012-12-27T19:29:03.140
> 
> 标签：php, ios, coordinates, cllocationmanager, http-get

在我的应用程序中，我试图将用户位置的 gps 坐标发布到服务器进行存储，以便我最终可以设计一个显示所有用户位置的地图。我正在使用 HTTP get 和自定义 PHP API 来处理从应用程序传递到数据库的数据。我遇到的问题是，每次调用 didUpdateLocations 时，我都会更新服务器。它有时有效，但有时我的查询字符串说有一个未定义的变量，并且空白数据正在发布到他的数据库中。为什么有时它是未定义的，有时不是？另外，有没有更好的方法来处理数据传递？我打算使用 ASIHTTPRequest 但我使用的是 ARC，所以这对我没有帮助。

代码：

```
- (void)postLocationUpdateFor:(NSString *)deviceToken withDeviceID:(NSString*)deviceID  withLatitude:(NSString *)latitude andLongitude:(NSString *)longitude {

    NSString *apiURL = [NSString stringWithFormat:ServerApiURL2, deviceToken, deviceID, latitude, longitude];
    NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:apiURL]];
    NSString *strResult = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding];

    NSLog(@"%@", strResult);

}

- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations {

    CLLocation *currentLocation = [locations lastObject];

    NSString *deviceToken = [[NSUserDefaults standardUserDefaults] stringForKey:@"deviceToken"];
    NSString *latitude = [NSString localizedStringWithFormat:@"%f",currentLocation.coordinate.latitude];
    NSString *longitude = [NSString localizedStringWithFormat:@"%f",currentLocation.coordinate.longitude];

    NSLog(@"Entered new Location with the coordinates Latitude: %@ Longitude: %@", latitude, longitude);

    [self postLocationUpdateFor:@"123" withDeviceID:deviceToken withLatitude:latitude andLongitude:longitude];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:39:25.403

```
didUpdateLocations 
```

可以在您实际丢失位置时调用：进入电梯/建筑物。这就是为什么有时是空的。

在发送服务器之前，我会检查并验证该位置值。

# php - 防止多次手动执行外部 PHP 脚本

> ID：14060179
> 
> 赞同：0
> 
> 时间：2012-12-27T19:29:16.513
> 
> 标签：php, mysql, sql, security

我的应用程序调用外部 PHP 文件来检索信息并将其提交到 SQL 数据库。发出的每个请求在我假设是任何浏览器的开发人员面板中都是可见的，并且可以轻松地手动重新执行。据我了解[，尝试检测请求的“来源”并不是限制手动调用脚本的正确方法](https://stackoverflow.com/questions/7301964/how-to-prevent-manual-execution-of-external-php-script)。

我想要阻止重新执行这些脚本的主要原因是，它们可能会导致用户付出的比他们赚到的更多`UPDATE user_scores SET score = score + x`（`UPDATE user_scores SET score = x`

什么是确保脚本中只打算执行一次的查询第一次执行且不再执行的可靠方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:49:51.583

您*永远不*应该依赖这样的客户端控件。你的 PHP 脚本应该检查用户是谁，并在执行之前验证他们应该“得到”他们得到的任何东西。

您正在运行的首先计算该分数的代码应该是您的更新代码所在的位置......它永远不应该离开服务器。

# ruby - 获取数据库中条目的最新值

> ID：14060180
> 
> 赞同：0
> 
> 时间：2012-12-27T19:29:19.493
> 
> 标签：ruby, database, sqlite

我有一个使用 SQLite 以下列方式在 Ruby 中构建的数据库：

```
db.execute "CREATE TABLE IF NOT EXISTS Problems(ID INTEGER, stem BLOB NOT NULL, answer BLOB, datetime TEXT, lastmodifiedby TEXT, primary key (ID, datetime) )"
db.execute "INSERT INTO Problems VALUES(1, 'stem', 'answer', '12/26/2012 2:52:18 PM', 'bob')"
db.execute "INSERT INTO Problems VALUES(1, 'stem modified', 'answer', '12/26/2012 2:52:19 PM', 'bob')"
db.execute "INSERT INTO Problems VALUES(1, 'stem modified further', 'answer', '12/26/2012 2:52:20 PM', 'bob')" 
```

前三个条目的 ID 相同，但时间不同。我目前正在使用以下代码来提取单个条目：

```
db = SQLite3::Database.new "#{dbname}"
stm = db.prepare "SELECT * FROM Problems WHERE ID=?"
stm.bind_param 1, id
rs = stm.execute  
problem = rs.next 
```

我的第一个问题 - 有没有办法压缩最后 4 行代码？

其次，当我从问题数据库中选择一个条目时，我将如何添加一个选项以便选择最近的条目（在本例中为第三个）？

最后，我如何选择某个 ID 的所有条目（这里我只有 int 1，但实际上还有很多其他条目），以便我可以将它们作为字符串输出/写入文件等。

我找到了有关最近条目选择的问题的答案，但它们似乎相当复杂。ORDER BY 会以某种方式起作用吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:05:47.007

首先，我认为您有数据格式问题。我认为 SQLite 不会理解`'12/26/2012 2:52:18 PM'`为时间戳，因此您最终会将时间戳作为字符串进行比较。例如，如果我添加`'12/26/2012 2:52:20 AM'`到组合中，我会得到`'12/26/2012 2:52:18 PM'`and`'12/26/2012 2:52:20 PM'`作为最低和最高值，并且只有将它们作为字符串进行比较时才有意义。将您的数据转换为[ISO 8601](http://en.wikipedia.org/wiki/ISO-8601)格式，以便您拥有这些：

```
2012-12-26 14:52:18
2012-12-26 14:52:19
2012-12-26 14:52:20 
```

事情会正确排序。

修复后，您可以使用 ORDER BY 和 LIMIT 仅剥离一条记录：

```
stm     = db.prepare('select * from Problems where ID = ? order by datetime desc limit 1')
rs      = stm.execute(1)
problem = rs.next 
```

# azure - 以增量方式查询 WadPerformanceCountersTable？

> ID：14060182
> 
> 赞同：1
> 
> 时间：2012-12-27T19:29:34.343
> 
> 标签：azure, azure-table-storage, diagnostics

我正在尝试查询由 Azure 诊断生成的 WadPerformanceCountersTable，它具有基于精确到一分钟的刻度线的 PartitionKey。这个 PartitionKey 存储为一个字符串（我没有任何控制权）。

我希望能够查询该表以获取每分钟、每小时、每天等的数据点，因此我不必提取所有数据（我只想要一个采样来近似它）。我希望使用模数运算符来执行此操作，但由于 PartitionKey 存储为字符串并且这是一个 Azure 表，因此我遇到了问题。

有没有办法做到这一点？

**非工作示例：**

```
var query =
            (from entity in ServiceContext.CreateQuery<PerformanceCountersEntity>("WADPerformanceCountersTable")
                where
                    long.Parse(entity.PartitionKey) % interval == 0 && //bad for a variety of reasons
                    String.Compare(entity.PartitionKey, partitionKeyEnd, StringComparison.Ordinal) < 0 &&
                    String.Compare(entity.PartitionKey, partitionKeyStart, StringComparison.Ordinal) > 0
                select entity)
                .AsTableServiceQuery(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T19:16:17.320

我能看到的唯一方法是创建一个进程以使 Azure 表与它自己的另一个版本保持同步。在此表中，我会将 PartitionKey 存储为数字而不是字符串。完成后，我可以使用类似于我在问题中所写的方法来查询数据。

不过这样很浪费资源，不推荐。（我自己也没有实现它。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T22:31:55.027

如果您只想根据两个不同的时间间隔（现在和 N 次）获取单行，则可以使用以下查询返回单行，如此[处](http://blog.monitis.com/index.php/2012/04/06/gathering-diagnostics-from-windows-azure/)所述：

```
// 10 minutes span Partition Key
DateTime now = DateTime.UtcNow;

// Current Partition Key
string partitionKeyNow = string.Format("0{0}", now.Ticks.ToString());

DateTime tenMinutesSpan = now.AddMinutes(-10);
string partitionKeyTenMinutesBack = string.Format("0{0}",   tenMinutesSpan.Ticks.ToString());

//Get single row sample created last 10 mminutes
CloudTableQuery<WadPerformanceCountersTable> cloudTableQuery =
    ( 
      from entity in ServiceContext.CreateQuery<PerformanceCountersEntity>("WADPerformanceCountersTable") 
      where 
           entity.PartitionKey.CompareTo(partitionKeyNow) < 0 && 
           entity.PartitionKey.CompareTo(partitionKeyTenMinutesBack) > 0 
        select entity
    ).Take(1).AsTableServiceQuery(); 
```

# php - 如何将 ColdFusion 函数更改为类似的 PHP 函数

> ID：14060184
> 
> 赞同：0
> 
> 时间：2012-12-27T19:29:40.663
> 
> 标签：php, coldfusion

我正在使用一些代码将图像上传到 android 上的服务器。我正在我的本地 xampp 服务器上工作。目前我确实为 REST 服务安装了 Restler 和 PHP。 [我正在修改本教程中的代码。](http://vikaskanani.wordpress.com/2011/01/11/android-upload-image-or-file-using-http-post-multi-part/)

我为 http 客户端错误安装了一个外部 jar 文件。但是我无法安装coldfusion，因为它似乎需要某种商业许可，而这正是本教程所使用的。正如我所说，除了在此处下载最新的 http 客户端 jar 文件外，大部分代码都在该教程中[。](http://hc.apache.org/downloads.cgi)我真正要问的是，这个 cfc 函数有什么替代品？最好有什么 php 替代品？如果我应该澄清其他任何事情，请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T11:35:46.837

Cormac，这里唯一的 ColdFusion 考虑是博主在他们的一个 Java 类中使用 CFC 作为 Web 服务（在那里有这样的依赖关系并不是很好，但是哦，好吧）。因此，您需要做的是找出该 Web 服务的功能，然后自行开发。根据您提供的信息，我们无法告诉您 Web 服务的作用……我建议您与博主联系并询问他们。他们几乎肯定会向您发送代码，然后如果您需要进一步的帮助，我们可以看看。

# c - 编程 C 动态表错误“表”的存储大小未知

> ID：14060192
> 
> 赞同：-1
> 
> 时间：2012-12-27T19:30:03.407
> 
> 标签：c

我想用我试过的表的动态大小来编译程序`int Table[];` 我的程序

编译器返回此消息 4 C:\Documents and Settings\Administrateur\Mes documents\TD4.c `table' 的存储大小未知？不知道存储？我有什么错

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T19:34:01.503

在 C 中，您不能声明大小未知的数组。

```
int Table[]; 
```

根本不允许。

相反，您可以声明一个指针：

```
int *Table; 
```

[并使用malloc/realloc](http://www.kernel.org/doc/man-pages/online/pages/man3/malloc.3.html)函数动态分配/重新分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T19:34:51.157

当您使用表格时，您必须声明它的初始大小：`int table[SIZE];`. 当您在编译时不知道表的大小（例如，您从用户读取数据）时，您总是可以以不同的方式分配内存（大小是变量，而不是常量）：

`int* table = (int*)malloc(sizeof(int)*size));`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T19:35:22.363

如果要创建动态表/数组，可以使用C 中`malloc`的函数和`new`C++ 中的运算符来实现。您应该根据您是使用 C 还是 C++`free`来取消分配内存。`delete`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T19:38:25.247

您不能以这种方式动态定义数组。你必须给它一个存储大小：

```
 int Table[43]; 
```

另一种方法是使用 malloc：

```
 int *Table = malloc (sizeof (int) * N);
    int i;

    for (i = 0; i < N; i++)
        Table[i] = i; 
```

其中 N 将通过某种方式传递。之后不要忘记`free()`在数组上使用。

# reporting-services - 最大化 ReportViewer 中的参数面板

> ID：14060194
> 
> 赞同：1
> 
> 时间：2012-12-27T19:30:31.273
> 
> 标签：reporting-services, ssrs-2008

我有一个使用 ReportViewer 控件的 WinForms 应用程序。我有一份包含 22 个参数的报告。当带有 ReportViewer 控件的页面加载时，底部的四个参数（两行两个参数）被截断，用户必须手动展开参数面板才能看到它们。是否有我可以设置的参数或我可以调用的方法来自动调整工具栏上方区域的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T12:30:44.390

抱歉，没有。此栏会自动填充，但可以显示和隐藏。

# map - 地图中的左转右转命令

> ID：14060198
> 
> 赞同：-1
> 
> 时间：2012-12-27T19:30:44.730
> 
> 标签：map, path, routes, directions

我已经实现了一个使用`Dijktra's Algorithm`. 感谢 Dijkstra，我可以打印从所需来源到所需目的地的最短路径。但是，我想做的是添加一个功能，通过左转、右转命令告诉我们方向。

例子：

## 从 A 到 D：

> 假设 A 位于街道 1 ，B 位于街道 2 ，D 位于街道 2 左侧 60 米处。

## 从 A 到 D：

> 去街 2 。转左 。走大约 60 米。它会在你的左边。

我需要你的想法。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T19:52:13.200

要从路径生成驾驶指令，您需要在图表中存储其他信息：

对于每条道路，它的长度。这很简单

对于每个十字路口，每对事件道路之间的关系。

您可以存储十字路口周围每条道路的方位角（道路 1-2 从十字路口 1 向西），然后根据两条道路之间的相对角度、十字路口的类型（正常/环形交叉路口）和拓扑排序生成驾驶指令和所有其他道路的相对角度。

这种方法的好处是更紧凑的表示，但它需要更多的编程。

或者，您可以分别存储每对之间的关​​系。这更可靠（只有人类才能真正理解世界上每种可能的十字路口类型的复杂性），但更新起来更加手动（毕竟，理论上一点人工智能*可以*推迟十字路口类型，即使有错误）。

如果你有一张巨大的地图，你会想要坚持第一种方法。如果您手动构建地图，您可能更喜欢第二个 - 只需确保不实际存储每个道路对的*字符串*（除非它们被语言所占用），否则您的内存需求可能会飙升。在将映射序列化为文件时，这需要格外注意（同样，如果您选择 ZIP 压缩，可能会在很大程度上缓解这种情况）。

如果您的地图只关注简单的 4 路十字路口，那么每对存储的信息只是一个`left/straight/right`枚举（方法 #2），或者只是十字路口周围边缘的排序（方法 #1），其中一些道路可能是`null`.

例如，您的十字路口可能（最简单的情况，方法＃1）看起来像

```
private Road[] roads = new Road[4];

public enum Direction{
  Left, Straight, Right, Back;
  // utility methods
}

public Direction getDir (Road from, Road to){
  // input checking stripped for clarity
  int iFrom = roads.indexOf(from);
  int iTo = roads.indexOf(to);
  // more input checking
  int iDiff = (iFrom - iTo) % 4;
  if(iDiff < 0) iDiff +=4 ;
  return Direction.getRelative90(iDiff);
  //Direction.getRelative90 is just a switch statement.
} 
```

要生成方向，请使用与地图一起存储的信息。记住要连接逻辑上遵循的道路（总结它们的长度）（在那个交叉路口没有指令=隐含的“直行” - 几条道路可能会合为一条，但每条只能遵循一条），其余的很简单。

# java - 使用 AssetManager libGDX 加载网格

> ID：14060200
> 
> 赞同：2
> 
> 时间：2012-12-27T19:30:50.677
> 
> 标签：java, android, loading, libgdx

我正在尝试`Mesh`在加载屏幕期间为我的 libGDX 游戏预加载我的对象。我已经按照[这里](http://code.google.com/p/libgdx/wiki/AssetManager)关于编写我自己的加载程序的过程进行了操作。所以我基本上复制了 libGDX`PixmapLoader`并调用了它`MeshLoader`。`Mesh`唯一的问题是，因为它是异步的，所以 OpenGL 上下文在创建时不可用。有谁知道我如何异步加载 a `Mesh`with `AssetManager`？我已经成功地使用了`SynchronousAssetLoader`而不是，`AsynchronousAssetLoader`但这会导致我的加载屏幕出现延迟。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T23:00:08.437

请参阅 AssetLoadingTask API，update() 方法（由 AssetManager 使用）

```
 /*Updates the loading of the asset. In case the asset is loaded with an   
 * AsynchronousAssetLoader, the loaders AsynchronousAssetLoader#loadAsync(AssetManager, String, AssetLoaderParameters) 
 * method is first called on a worker thread. 
 * Once this method returns, the rest of the asset is loaded on the rendering
 * thread via AsynchronousAssetLoader#loadSync(AssetManager, String, AssetLoaderParameters). 
```

因此，您**不能**在加载 Pixmap 时完全异步加载 Mesh，因为后者不是 openGL 资产。

您可以复制`TextureLoader`哪个异步加载像素数据（如像素图），然后在渲染线程上同步创建纹理。

您能做的最好的事情是**异步计算您的顶点/索引并同步进行绑定。**

**编辑** 对于那些不阅读评论的人......如果您使用 ObjLoader 加载大网格，您可以遵循第三条评论中给出的 Kieran 方法。

# php - 如何替换php中动态超链接的数据？

ID：14060202

赞同：0

时间：2012-12-27T19:31:03.200

标签：php

# php - 将数据从 android 发布到 PHP

> ID：14060207
> 
> 赞同：2
> 
> 时间：2012-12-27T19:31:18.573
> 
> 标签：php, android

我使用这个论坛很长时间了，首先，我想说谢谢你帮助我很多次。这是我第一次找不到答案，这让我很疯狂......

我正在尝试编写一个超级简单的应用程序，它从/向数据库获取/发布数据。问题是，我无法发布数据（获取很好）。我正在使用一个 php 文件，它应该从 Android 设备获取数据，并将其发送到数据库。首先，我无法将其发布到我的 php 文件中。我已经尝试了所有（我知道）。

PHP文件-

```
$test=$_POST['v']; print $_POST['v']; 
```

Java文件-

public void postData() 抛出 ClientProtocolException, IOException {

```
 // Create a new HttpClient and Post Header
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost post = new HttpPost("https://www.myweb.coom/test.php");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
        nameValuePairs.add(new BasicNameValuePair("v", "123"));
        post.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        httpclient.execute(post);

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
    } catch (IOException e) {
        // TODO Auto-generated catch block
    }
} 
```

当我放 Log.* 时，它告诉我一切都很好。似乎PHP没有得到任何数据......

EDITING ASYNTASK----- public class Upload extends AsyncTask{

```
@Override
protected String doInBackground(String... params) {
    try {
        JSONObject json = new JSONObject();
        json.put("UserName", "test2");
        json.put("FullName", "1234567");
        HttpParams httpParams = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(httpParams,
                10000);
        HttpConnectionParams.setSoTimeout(httpParams, 10000);
        HttpClient client = new DefaultHttpClient(httpParams);
        //

        String url = "http://my WAMP server/test.php"+ 
                            "json={\"UserName\":1,\"FullName\":2}";

        HttpPost request = new HttpPost(url);
        request.setEntity(new ByteArrayEntity(json.toString().getBytes(
                "UTF8")));
        request.setHeader("json", json.toString());
        HttpResponse response = client.execute(request);
        HttpEntity entity = response.getEntity();
        // If the response does not enclose an entity, there is no need
        if (entity != null) {
            InputStream instream = entity.getContent();

            String result = "gr8 Success";
            Log.i("Read from server", result);

        }
    } catch (Throwable t) {
        Log.e("Request failed: " ,"ERR"+ t.toString());
    }

} 
```

}

主要活动-

```
public void postData(View v) { //starts on button click

    if(upload!=null){
        if(upload.getStatus()!= AsyncTask.Status.FINISHED){
            Log.d("postData","no need to start AsyncTask");
            return;
        }

    }
    upload= new Upload();
    upload.execute();
    Log.i("Async", "Starting...");

} 
```

PHP- $json=$_GET ['json']; $obj = json_decode($json);

```
 $posts = array(1);
               header('Content-type: application/json');
                 echo json_encode(array('posts'=>$posts)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-14T14:14:51.570

您的 URL 域包含 2 个“o”。你应该写[https://www.myweb.com/test.php](https://www.myweb.com/test.php)，而不是[https://www.myweb.coom/test.php](https://www.myweb.coom/test.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:13:20.113

您使用的是哪个版本的 Android SDK。如果您使用的是 4.1 及更高版本的 SDK，请检​​查您是否在辅助线程而不是 UI 线程上进行 http 调用。由于您尚未报告异常，因此您已提供 Internet Permission 。

# macos - 显示 NSSavePanel 时超时

> ID：14060214
> 
> 赞同：6
> 
> 时间：2012-12-27T19:32:35.680
> 
> 标签：macos, cocoa, nssavepanel

当`NSSavePanel`应用程序在后台显示时，我收到以下错误：

```
RVS:__54-[NSRemoteSavePanel _runOrderingOperationWithContext:]_block_invoke_0319 : Timeout occured while waiting for the window
Remote Window Controller requested NSRequestRetryActivateSharedwindow... 
```

此外，面板不会出现并`runModal`返回`NSFileHandlingPanelCancelButton`。

该应用程序是沙盒的。这是创建面板的代码：

```
NSSavePanel *panel = [NSSavePanel savePanel];
NSInteger result = [panel runModal];
if (result == NSFileHandlingPanelOKButton)
{
    // Do something
} 
```

可能是什么问题？

如果应用程序位于前台，则面板显示没有任何错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T22:46:50.657

请务必启用适当的权利。在这种情况下，请检查“用户选择的文件”是否未设置为“无访问权限”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T11:10:39.663

对于目标设置的“摘要”选项卡中“权利”部分的“用户选择的文件”权利，应将其设置为“读/写”访问权限。

# iis - 间歇性 ColdFusion 404 错误页面，有时显示连接重置/中断，有时显示错误页面

> ID：14060219
> 
> 赞同：3
> 
> 时间：2012-12-27T19:32:42.907
> 
> 标签：iis, coldfusion, windows-server-2008, intermittent, connection-reset

我在我们的新网站上加载了 404 页面时遇到了一个奇怪的问题。我们刚刚将站点从 ColdFusion 8 单实例设置迁移到 ColdFusion 10 设置，其中运行了 3 个 ColdFusion 实例。这是在带有 Windows Server 2008 R2 的 IIS 7.5 上运行的。IIS 站点将其 404 错误设置为加载 /404.cfm，这是从以前的服务器设置复制的设置。

问题是当您加载一个不存在的页面时，有时会加载 404 页面，有时您只会收到连接重置错误。例如，如果您访问[http://www.weblisters.com/doesnotexist](http://www.weblisters.com/doesnotexist)并反复刷新，您会看到很多次连接被重置，而其他一些时候它会显示“抱歉，找不到页面”模板。

我认为这可能是由于多个实例造成的，所以我关闭了 3 个实例中的 2 个，因此只有 1 个正在运行，并且不会影响行为。

有没有其他人对可能导致这种间歇性行为的原因有任何想法？

编辑：这是我这边发生的事情的屏幕截图。 [http://screencast.com/t/0gD0lwZiRI](http://screencast.com/t/0gD0lwZiRI)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:39:31.183

今天遇到了同样的问题。我发现 Charlie Arehart 在此页面上的评论最有帮助： [http ://forums.adobe.com/message/4784188](http://forums.adobe.com/message/4784188)

基本上：更新 CF10 后，确保以管理员身份运行 Web 连接器。

# objective-c - 如何正确实施 iAds？iOS6 弃用问题

> ID：14060223
> 
> 赞同：2
> 
> 时间：2012-12-27T19:33:30.937
> 
> 标签：objective-c, cocoa-touch, ios6, iad

我目前正在尝试将 iAd 添加到我的应用程序中，我遇到了一些教程，并且在以下内容中有以下内容`viewDidLoad`：

```
adView = [[ADBannerView alloc] initWithFrame:CGRectZero];
adView.frame = CGRectOffset(adView.frame, 0, 460.0f);
adView.requiredContentSizeIdentifiers = [NSSet setWithObject:ADBannerContentSizeIdentifierPortrait];
adView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierPortrait;
[self.view addSubview:adView];
adView.delegate = self;
self.bannerIsVisible = NO; 
```

问题是我收到警告`requiredContentSizeIdentifiers`，因为它们现在已被弃用并且我的广告无法加载`ADBannerContentSizeIdentifierPortrait`。`currentContentSizeIdentifier`

我在 Apple 文档上大吃一惊，他们似乎提到了同样的事情，所以我很困惑。

它应该如何正确实施？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-19T07:29:59.803

如果要在 iOS6 中添加 iAd，则必须实现以下代码。

```
self.iAddBannerView = [[ADBannerView alloc] initWithFrame:CGRectMake(0, 768, 1024, 66)];
[self.iAddBannerView setAutoresizingMask:UIViewAutoresizingFlexibleWidth];
[self.view addSubview:self.iAddBannerView];
self.iAddBannerView.delegate = self; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T06:09:28.117

在您的方法中，只需使用,等`createAdBannerView`注释行。然后硬编码 adBanner 框架，如下所示（对于 iPhone Portrait）：`requiredContentSizeIdentifiers``ADBannerContentSizeIdentifierPortrait``currentContentSizeIdentifier`

```
[_adBannerView setFrame:CGRectOffset([_adBannerView frame], 320,
                                         -[self getBannerHeight])]; 
```

检查您的广告负载与否……它对我有用……（但我的应用程序仅支持纵向视图，并且有效）

# php - ajax php函数调用仅适用于第一次调用

> ID：14060228
> 
> 赞同：0
> 
> 时间：2012-12-27T19:33:47.457
> 
> 标签：php, javascript, ajax

我有下面的函数，它使用一个函数调用一个 PHP 文件，该函数以 Json 格式返回我在 Javascript 值中获得并分配的结果，如下所示。php 功能已完全正常工作并经过检查。结果被发送并保存在变量中，直到我从 update_tipster 函数更改市场变量。

我有 8 个选项卡将数据发送到函数 update_tipster。一旦我按下 market1 为空白的前 4 个选项卡，一切都很好。当我按下其他 4 个选项卡时，我没有从 ajax 得到任何响应，并且我得到白页。当我尝试并将 market1 加载为“gh_”时，这是其他 4-7 个选项卡的值，一切都再次适用于选项卡 5-8，但 0-3 为空白。

```
<ul>
    <li><a href="#tabs-0" onclick="update_tipster( '0', '', market_id, date_today)">
            <img src="betfair/img/horse-icon-small.png" style="vertical-align:middle">
                    <span style="padding-left:5px;">ALL PLANS</span>
        </a>
    </li>
    <li><a href="#tabs-1" onclick="update_tipster( '1', '', market_id, date_today )" >
            <img src="betfair/img/horse-icon-small.png" style="vertical-align:middle">
                    <span style="padding-left:5px;">MASTER</span>
        </a>
    </li>
    <li><a href="#tabs-2" onclick="update_tipster( '2', '', market_id, date_today )" >
            <img src="betfair/img/horse-icon-small.png" style="vertical-align:middle">
                    <span style="padding-left:6px;">PHANTOM</span>
        </a>
    </li>
    <li><a href="#tabs-3" onclick="update_tipster( '3', '', market_id, date_today )" >
            <img src="betfair/img/horse-icon-small.png" style="vertical-align:middle">
                    <span style="padding-left:6px;">LAY LOSERS</span>
        </a>
    </li>
    <li><a href="#tabs-4" onclick="update_tipster( '4', 'gh_', market_id, date_today )" >
            <img src="betfair/img/dog-icon-orange-small.png" style="vertical-align:middle">
                    <span style="padding-left:6px;">ALL PLANS</span>
        </a>
    </li>
    <li><a href="#tabs-5" onclick="update_tipster( '5', 'gh_', market_id, date_today )" >
            <img src="betfair/img/dog-icon-orange-small.png" style="vertical-align:middle">
                    <span style="padding-left:6px;">MASTER</span>
        </a>
    </li>
    <li><a href="#tabs-7" onclick="update_tipster( '7', 'gh_', market_id, date_today )" >
            <img src="betfair/img/dog-icon-orange-small.png" style="vertical-align:middle">
                    <span style="padding-left:6px;">PHANTOM</span>
        </a>
    </li>
    <li><a href="#tabs-6" onclick="update_tipster( '6', 'gh_', market_id, date_today )" >
            <img src="betfair/img/dog-icon-orange-small.png" style="vertical-align:middle">
                    <span style="padding-left:6px;">LAY LOSERS</span>
        </a>
    </li>
</ul> 
```

## Javascript：

```
Function run_ajax(market, market_id1, tipster_id1, date_today1) {
market_type=market;

if(market_id1 === '0')
    {

    $.ajax({
              type: 'POST', 
              url: "betfair/market_blank_datetime.php",
              data: "market_type="+market,
              cache: false,
              async: false,
              dataType: 'json',
              success: function(data1){
                date_today=data1.date_today;
                startTime_time=data1.startTime_time;
                market_id=data1.market_id_time;
              }
        });
    }
}

function update_tipster(tipster1, market1, market_id1, date_today1){
    tipster_id = tipster1;

    if(market_type != market1)
    {   
        market_type = market1;
        market_id='0';
    }
        runscript_menu();
        run_ajax(market_type, market_id, tipster_id, date_today1);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T19:38:36.373

`market_id1`中没有使用`update_tipster()`，你忘记连接字符串了吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:37:54.173

我修复了它，我使用 Jquery.ajax 而不是 $.ajax 并且现在工作得很好。感谢您的时间

# fork - 模拟管道

> ID：14060234
> 
> 赞同：0
> 
> 时间：2012-12-27T19:34:16.033
> 
> 标签：fork, pipe, dup2

我最近才了解管道，我想效仿“|” 贝壳提供的噱头。

在下面的代码中，父进程生成了 2 个子进程，之后它们进行管道处理并被 ls 和 grep 替换。当这种情况发生时，父进程会耐心等待。问题是子进程永远不会完成，尽管它们设法通过管道将一些数据发送到屏幕上。

还有其他关于 SO 管道的帖子，但我从未见过父进程启动 2 个子进程的设置。我只见过父母与一个孩子交流。

```
int p0[2];
pipe(p0);         //creating pipe

if(fork() == 0) { //child 1
    dup2(p0[0], STDIN_FILENO);
    close(p0[0]); close(p0[1]);
    execlp("grep","grep","a",NULL);
} 
else {            //parent
    if(fork() == 0) { //child 2
        dup2(p0[1], STDOUT_FILENO);
        close(p0[0]); close(p0[1]);
        execlp("ls","ls",NULL);
    }
    else {    //parent
        wait(NULL);
        wait(NULL); //waiting for c1 and c2

        close(p0[0]); close(p0[1]);
        printf("parent exit\n");
    }
} 
```

我的问题是：为什么子进程没有完成？叉管结构是健全的还是我做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T22:26:18.170

在最后一段开始等待之前关闭管道。

# mysql - 警告：mysql_pconnect()：MySQL 服务器已不再使用云数据库

> ID：14060235
> 
> 赞同：2
> 
> 时间：2012-12-27T19:34:18.333
> 
> 标签：mysql, database, warnings

> *警告：mysql_pconnect(): MySQL server has gone away in D:\xampp-portable\htdocs\project\database\dbconn.php 第 16 行*

我在页面顶部收到此错误，但页面显示正确。我该如何解决这个问题或只是避免在页面上显示警告？我正在使用从 Windows Azure 试用版创建的 Cleardb。

> *第 16 行：$conn = mysql_pconnect($hostname_conn, $username_conn, $password_conn,TRUE) 或 trigger_error(mysql_error(),E_USER_ERROR)；*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:39:22.047

每当您恢复已超时的持久连接时，您都会收到此错误。

`mysql_pconnect`您使用而不是有特定原因`mysql_connect`吗？如果没有，请尝试`mysql_connect`改用。

如果这是新代码，则根本不应该使用这些`mysql_*`函数，因为它们本质上是不安全的，很快就会被弃用。 如果可能，[请改用 PDO 。](http://php.net/manual/en/intro.pdo.php)

# actionscript - 如何在两个数组之间切换时在两个数组之间进行测试？

> ID：14060237
> 
> 赞同：0
> 
> 时间：2012-12-27T19:34:22.833
> 
> 标签：actionscript

我正在制作一个平台游戏，我必须在两个数组（whiteBlocks 和 blackBlocks）之间的角色碰撞以及另一个在按钮碰撞时激活并计时的数组（redBlocks）之间切换。

但是，我使用 hitTest 代码来确保我可以同时使用 redBlocks 以及 whiteBlocks 或 blackBlocks 作为平台时遇到了问题。如果有人可以帮助我在触发计时器后让 redBlocks 持续激活并且通过在 blackBlocks 或 whiteBlocks 之间切换无效，我正在徘徊。

如果您希望我以更清晰的方式解释我的问题，我会这样做。请注意，我对 actionscript 和一般编码非常陌生，因此对我可能犯的错误表示歉意。感谢您提供的任何帮助，因为我已经对此进行了一段时间的故障排除。

```
import flash.events.KeyboardEvent;
import flash.geom.Point;
import flash.events.Event;
import flash.display.MovieClip
import flash.display.DisplayObject;

//PLAYER MOVEMENT
stage.addEventListener(KeyboardEvent.KEY_DOWN, keyLIST);
stage.addEventListener(KeyboardEvent.KEY_UP, keyLIST);

manMC.positionPNT = new Point (manMC.x, manMC.y);

//track using loop and keypresses, not just keyEvent
var leftKeyDown:Boolean = false;
var rightKeyDown:Boolean = false;

function keyLIST (ke:KeyboardEvent) {

    //trace(ke.toString() );

    //1\. work out where we're going from where we are now

    //characterPNT = new Point(manMC.x, manMC.y);

        //2\. offset our destination point
        switch (ke.keyCode) {

        //LEFT
        case 37:

            trace(ke.type);
            leftKeyDown = (ke.type == "keyDown");

        break;

        //RIGHT
        case 39:

            //moveCharacter(manMC, "right");
            rightKeyDown = (ke.type == "keyDown");

        break;

        //87UP, 83DOWN

        //UP
        case 38:

            trace("true");

            manMC.jump();

        break;

        //DOWN
        case 83:

        break;

        default:

            //trace ("this key does nothing");

        break;
    }// close switch

}// end function keyLIST

function movementCallback (ev:Event):void {

    if (leftKeyDown == true) {

        moveCharacter(manMC, "left");

    }

    if (rightKeyDown == true) {

        moveCharacter(manMC, "right");
    }
}

addEventListener (Event.ENTER_FRAME, movementCallback);

//a new movement function
function moveCharacter(char:character, dir:String ):void {//datatype as void as it returns nothing

    //will need this
    //var characterPNT:Point; //moved to character class
    //maMC.positionPNT = new Point( manMC.x, manMC.y);

    //copy current poistion before offsetting with movement, speed and direction
    manMC.destinationPNT = manMC.positionPNT.clone();
    //characterPNT = new Point(manMC.x, manMC.y);

    //var colliding:Boolean;

    //do multiple collision detection here

    var offsetPNT:Point;//detecting the destination of the body points

    switch (dir) {

        case "left":

            //move PNT to left
            manMC.destinationPNT.x -= manMC.speedNUM;
            offsetPNT = manMC.leftarmPNT;

        break;

        case "right":

            //move PNT to right
            manMC.destinationPNT.x += manMC.speedNUM;
            offsetPNT = manMC.rightarmPNT;

        break;
    }

    //set to true of false by the function that returns a Boolean value
    var colliding:Boolean = multipleHitTest (manMC.positionPNT, manMC.destinationPNT, offsetPNT, activeArray);

    //trace(colliding);
    //trace ("moveMode: " + manMC.moveModeSTR);

    if (!colliding /*&& manMC.moveModeSTR != "falling"*/) { //may be more complex to control player movement when falling&jumping

        manMC.moveToPoint( manMC.destinationPNT );

        //manMC.x = manMC.destinationPNT.x;
        //manMC.y = manMC.destinationPNT.y;

        //always update position PNT when character is moved
        //manMC.positionPNT = manMC.destinationPNT.clone();//copies destination point 
    }
}

//Apply gravity at all times using a loop/callback
addEventListener(Event.ENTER_FRAME, gravityFUNC);

var gravityNUM:Number = new Number(10);

function gravityFUNC (ev:Event) {

    var falling:Boolean;

    var gravityPNT:Point = manMC.positionPNT.clone();
    //trace(manMC.positionPNT.y);

    gravityPNT.y += gravityNUM;
    //trace(gravityPNT.y);

    //EXPERIMENTAL
    gravityPNT.y -= manMC.verticalVelocityNUM;

    //decaying gravity, caping it at 0 to avoid negatives
    manMC.verticalVelocityNUM = Math.max ( 0, manMC.verticalVelocityNUM - gravityNUM);

    falling = !multipleHitTest (manMC.positionPNT, gravityPNT, manMC.feetPNT, activeArray);
    //trace("falling " + falling);

    if (falling == true) {
        //manMC.y = gravityPNT.y;
        manMC.moveToPoint(gravityPNT);

        //either jumping or falling
        if ( manMC.verticalVelocityNUM == 0) {

            manMC.moveModeSTR = "falling";

        }else {

            manMC.moveModeSTR = "jumping";
        }

    } else {

        manMC.moveModeSTR = "walking";

    }
}

//======================================================================

//======================================================================

//add when declared
//varobstacles:Array = new Array (block0MC, block1MC, block2MC);

//declared and then new instance
//var obstacles:Array;
//obstacles = new Array (block6MC);

//declares and create empty array
/*var obstacles:Array = new Array();
//push adds an item to the front of an array
obstacles.push (block0MC); // add instance names of display objects (or other data)
obstacles.push (block1MC);
obstacles.push (block2MC);
obstacles.push (block3MC);*/

//trace("length of list" + obstacles.length);
//trace(obstacles[0]); //access first element of array

//trace( block0MC["x"] );// acessing x property using different method

function multipleHitTest( position:Point, destination:Point, offset:Point, targets:Array):Boolean { //these are ARGUMENTS

    //track hittest true or false
    var returnBOOL:Boolean = new Boolean (false);

    // cap length of loop - ie.e how many iterations?
    var limit:int = new int ( targets.length );// obstacles.length is 3 items long

    //the "counter", increases or decreases each time
    var i:int;

    //chunks =
    //start counter at 0;
    // loop while counter is less than limit;
    // increment counter by 1 each looop;

    for( i=0; i<limit; i++) {

        //will access each item in array, as "i" is an integer
        //obstacles[1];

        //because it's targeted as a movieclip we can ask it's name

        //this is 'reference variable'
        //we are creating an 'alias' of the item in the list
        var testAgainstObject:DisplayObject = targets[i];

        //track direction
        var moveDirection:String;

        //only hit test things we're moving towards...
        if (position.x < destination.x) { //if we're moving right 

            moveDirection = new String( "right" );

        } else if (position.x > destination.x) {//else if we're moving left

            moveDirection = new String( "left" );

        }

        //
        if(

           (moveDirection == "right" && targets[i].x >= position.x && destination.x >= targets[i].x)
           ||//or
           (moveDirection == "left" && targets[i].x <= position.x && destination.x <= (targets[i].x + targets[i].width) )

           ) {//obstacle is to the right

            //  obstacle moving right
            // moving right

        }

        //create a copy of 'destination' 
        var offsetDestination:Point = destination.clone();

        //apply our offset provided by our character limbs
        offsetDestination.offset(offset.x, offset.y);

        //if point is colliding with list item
        //if( testAgainstObject.hitTestPoint (destination.x, destination.y) ) { //REMOVED FOR TESTING
        if( testAgainstObject.hitTestPoint (offsetDestination.x, offsetDestination.y) ) {

            //trace("collisiondetected " + targets[i].name);
            returnBOOL = true;

        } else {
            //trace("no collision");

            //do nothing if flase, as it would contradict a 'true' value set earlier in the loop

        }

    }

    return (returnBOOL); //tesing only
}

//declares and create empty array
var blackBlocks:Array = new Array();
//push adds an item to the front of an array
blackBlocks.push (block0MC); // add instance names of display objects (or other data)
blackBlocks.push (block1MC);
blackBlocks.push (blackbarrier);
blackBlocks.push (blackbarrier2);
blackBlocks.push (blackbarrier3);
blackBlocks.push (blackbarrier4);
blackBlocks.push (blackbarrier5);

var whiteBlocks:Array = new Array();
//push adds an item to the front of an array
whiteBlocks.push (block2MC);
whiteBlocks.push (block3MC);
whiteBlocks.push (whitebarrier);
whiteBlocks.push (whitebarrier2);
whiteBlocks.push (whitebarrier3);
whiteBlocks.push (whitebarrier4);
whiteBlocks.push (whitebarrier5);

var redBlocks:Array = new Array();
redBlocks.push (redblock1MC);

//var activeArray:Array = new Array (blackBlocks);

var activeArray:Array = blackBlocks;
//active.push (redblock1MC);

//Adds an event listener to the button component with the mouse click event.
//hide_btn.addEventListener(MouseEvent.CLICK, toggleBlocks);
//show_btn.addEventListener(MouseEvent.CLICK, showObject);
stage.addEventListener(KeyboardEvent.KEY_DOWN, toggleBlocks);

// start toggle blocks
function toggleBlocks (event:KeyboardEvent):void {
    var i:int = 0;
    var lim:int = activeArray.length;

    if(event.keyCode == Keyboard.SPACE){
    trace("Toggle Blocks");

    blocksVisibility( activeArray , false );

    if( activeArray == blackBlocks) { 
        activeArray = whiteBlocks;

    }else{ 

    activeArray = blackBlocks;

    }

    blocksVisibility( activeArray , true );

} // end IF

} // end toggle blocks

function blocksVisibility( arrARG:Array , visBOOL:Boolean ){

    var i:int = 0;
    var lim:int = arrARG.length;

    for( i=0; i<lim; i++) {
        arrARG[i].visible = visBOOL;
    }

}

blocksVisibility( this.whiteBlocks , false );
blocksVisibility( this.redBlocks , false );

//blocksVisibility( this.redBlocks , false );

//======== red block button ========

// on collision trigger button and make red platform appear

/*
var myTimer:Timer = new Timer(5000,1);
myTimer.addEventListener(TimerEvent.TIMER, timerListener);

function timerListener(e:TimerEvent):void {
    //logo_mc.x+=40;
    blocksVisibility( this.redBlocks , true );
    //redBlock1MC:Array = true;

    //activeArray:Array = redBlocks;
}

myTimer.addEventListener(TimerEvent.TIMER_COMPLETE, onComplete);
function onComplete(e:TimerEvent):void {
    //logo_mc.alpha=10;
    //logo_mc.x=20;
    blocksVisibility( this.redBlocks , false );
    //redBlock1MC:Array = false;

    //activeArray:Array = blackBlocks;
}

stage.addEventListener(KeyboardEvent.KEY_DOWN, onStart);

function onStart(e:KeyboardEvent):void {
    if (e.keyCode == 88){

    blocksVisibility( this.redBlocks , true );
    //redBlock1MC:Array = true;

    myTimer.start();
    //logo_mc.alpha=.1;
    //logo_mc.x=20;
}
} */

var myTimer:Timer = new Timer(10000, 1); // 1 second

myTimer.addEventListener(TimerEvent.TIMER, timedPlatform);
//myTimer.start();

function timedPlatform(event:TimerEvent):void {

trace("timedPlatform() called @ " + getTimer() + " ms");

blocksVisibility( this.redBlocks , false );

/*if (manMC.hitTestObject(redButton)){

trace("Start Timer");
myTimer.start();

blocksVisibility( this.redBlocks , true );

        activeArray = redBlocks;

} */
}

redButton.addEventListener(Event.ENTER_FRAME, startTimer);
function startTimer(event:Event):void{
//if (e.keyCode == 88){

//if (manMC, hitTest(redButton)) {

if (manMC.hitTestObject(redButton)) {

trace("Start Timer");
myTimer.start();

blocksVisibility( this.redBlocks , true );

activeArray = blackBlocks;
//activeArray = blackBlocks;

/*if( activeArray == blackBlocks) { 
        activeArray = redBlocks;
                activeArray = blackBlocks;

    }else{ 

    activeArray = blackBlocks;

    }*/

} 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:17:02.947

与其将 activeArray 设为对 whiteBlocks 或 blackBlocks 的引用，不如将其设为单独的 Array 对象。然后，在 toggleBlocks 中，您可以

1.  从 activeArray 中删除所有元素
2.  将 redBlocks 中的所有元素添加到 activeArray（根据当前状态可选）
3.  将 whiteBlocks 或 blackBlocks 中的所有元素添加到 activeArray

这样，activeArray 将具有所有红色块 AND（所有 whiteBlocks 或所有 blackBlocks）。

# mschart - 删除 DataVisualization 图表 x 轴末端的空白

> ID：14060239
> 
> 赞同：0
> 
> 时间：2012-12-27T19:34:49.723
> 
> 标签：mschart

我正在使用 Microsoft 的 DataVisualization.Charting.Chart，并且沿 X 轴有整数值，使用线型图。但是，该图表在 x 轴的开头和结尾添加了一个额外的空白项，没有值标签来解释它们是什么。

我怎样才能删除这些空项目并使行一直到末端？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T21:53:05.510

使用 xaxis 的 IsMarginVisible 属性。我相信这会成功。

为了测试这一点，我将自己的一个图表更改为折线图，然后在代码中设置值：

```
ReactivityChart.ChartAreas(0).AxisX.IsMarginVisible = False 
```

告诉我这是您希望得到的还是我完全误解了这个问题：

（请注意，我没有足够高的代表来发布这张图片）

[http://www.rectorsquid.com/chartmargintest.gif](http://www.rectorsquid.com/chartmargintest.gif)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T11:17:01.120

您应该在 中设置`Maximum`和`Minimum`属性`ChartArea.AxisX`，例如：

```
this.chart1.ChartAreas[0].AxisX.Minimum = 0;   // if your minimum X = 0
this.chart1.ChartAreas[0].AxisX.Maximum = 100; // if your maximum X = 100 
```

这样，您的图表区域将仅显示 和 之间的`Minimum`值`Maximum`。

# latex - 使用 Pandoc 将 html 转换为 tex 不会产生数学模式

> ID：14060241
> 
> 赞同：0
> 
> 时间：2012-12-27T19:34:51.267
> 
> 标签：latex, markdown, knitr, mathjax, pandoc

我正在使用 Windows 机器。我使用 Rstudio/knitr 编写 (R)markdown 文件并将其转换为 html 文件。源 Markdown 文件包含一些用 LaTeX 语言输入的数学，因此 html 文件包含一些 Mathjax。

例如，markdown 文件中有以下 LaTeX 代码：

```
$H_0:= \{|\mu_x-\mu_y|>S\}$ 
```

因此预期的输出是：

![在此处输入图像描述](../Images/d18b97bbb38700bac4250e2d907531a9.png)

此输出正确显示在 html 文件中。

但现在我尝试将此 html 文件转换为 tex 文件：

```
pandoc -s myfile.html -o myfile.tex 
```

然后我在输出 tex 文件中得到以下代码：

```
\textbackslash{}( H\_0:=
  \textbackslash{}\{\textbar{}\textbackslash{}mu\_x-\textbackslash{}mu\_y\textbar{}\textgreater{}S\textbackslash{}\}
  \textbackslash{}) où \textbackslash{}( S \textbackslash{}) 
```

在使用 (pdf)latex 编译后给出以下渲染：

![输出](../Images/74f07ba6e49c978ad3f26ae16edfb377.png)

# android - Android - 更正 onTouchEvent() 中状态栏的高度

> ID：14060244
> 
> 赞同：1
> 
> 时间：2012-12-27T19:35:12.987
> 
> 标签：android, statusbar, touch-event

我在自定义视图中响应触摸事件`onTouchEvent(MotionEvent event)`。我在坐标不一致时遇到问题：`event.getRaw(Y)`返回包括状态栏在内的触摸的 Y 坐标，但`myView.getTop()`返回不包括状态栏的视图顶部的 Y 坐标。我采用了以下技巧来纠正状态栏的高度：

```
// Get the size of the visible window (which excludes the status bar)
Rect rect = new Rect();
getWindow().getDecorView().getWindowVisibleDisplayFrame(rect);

// Get the coordinates of the touch event, subtracting the top margin
final int x = (int) event.getRawX();
final int y = (int) event.getRawY() - rect.top; 
```

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T20:41:48.653

如果您只关心相对于父视图的坐标（例如，您希望始终假设视图的左上角为 0,0），则可以只使用 getX() 和 getY() 而不是它们的原始等效项。

否则，基本上你试图获取相对于屏幕的 X/Y（getRawX、getRawY）并将它们转换为相对于窗口的 X/Y 坐标（状态栏不是窗口的一部分）。

您当前的解决方案将起作用，但[正如其他地方所讨论的那样](https://stackoverflow.com/a/7660204)，getWindowVisibileDisplayFrame 过去曾被轻微破坏。更安全的方法可能是确定视图在窗口中的位置，然后使用相对于该视图的 x/y 坐标。

```
int[] coords = new int[2];
myView.getLocationInWindow(coords);

final int x = event.getRawX() - coords[0];
final int y = event.getRawY() - coords[1]; 
```

# ajax - 如何在 ajax 方法中获取单击的项目？

> ID：14060246
> 
> 赞同：9
> 
> 时间：2012-12-27T19:35:19.837
> 
> 标签：ajax, jsf-2, selecteditem, selectmanycheckbox

假设这个页面的代码：

```
<h:form prependId="false" id="form">

    <h:selectManyCheckbox id="checkBoxList" value="#{backedBean.lstIdSelectedItems}" layout="pageDirection">
        <f:selectItems value="#{backedBean.lstAvailableItems}" var="item" itemLabel="#{item.label}" itemValue="#{item.value}" />
        <f:ajax listener="#{backedBean.itemClicked}" />
    </h:selectManyCheckbox>

</h:form> 
```

以及会话托管 bean 的代码：

```
public class BackedBean implements Serializable {
   private List<SelectItem> lstAvailableItems;
   private List<Long> lstIdSelectedItems;

public BackedBean() {
    lstAvailableItems = new ArrayList<SelectItem>();
    lstIdSelectedItems = new ArrayList<Long>();
}

@PostConstruct
private void postConstruct(){
    for (int i = 0; i < 10; i++) {
        SelectItem item = new SelectItem(new Long(i), "CHKID " + i);
        lstAvailableItems.add(item);
    }
}

public void itemClicked(AjaxBehaviorEvent ae){
    HtmlSelectManyCheckbox uiCmp = (HtmlSelectManyCheckbox)ae.getSource();

    // (1) Here I would like to get the ID of the item that has been clicked.

} 
```

在（1）中，我想获取用户点击的元素的 ID。我可以在 lstIdSelectedItems 数组列表中看到用户选择的所有元素的 ID，但是如何获取用户单击的元素的 ID？

我曾尝试在 selectManyCheckbox 中使用 f:attribute 标记，但是当在支持的 bean 中调用 ajax 侦听器方法时，该属性不在组件映射中。我用过这个，但不起作用：

```
<h:selectManyCheckbox id="checkBoxList" value="#{backedBean.lstIdSelectedItems}" layout="pageDirection">
    <f:selectItems value="#{backedBean.lstAvailableItems}" var="item" itemLabel="#{item.label}" itemValue="#{item.value}">
        <f:attribute name="clicked" value="#{item.value}" />
    </f:selectItems>
    <f:ajax listener="#{backedBean.itemClicked}" />
</h:selectManyCheckbox> 
```

有任何想法吗？

问候。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-27T20:06:13.463

因此，您不仅对新值感兴趣，而且对实际值变化感兴趣。引入一个`valueChangeListener`将旧值与新值进行比较并准备一些 ajax 侦听器方法可以拦截的属性。

例如

```
<h:selectManyCheckbox value="#{bean.selectedItems}" valueChangeListener="#{bean.selectedItemsChanged}" converter="javax.faces.Long">
    <f:selectItems value="#{bean.availableItems}" />
    <f:ajax listener="#{bean.itemSelected}" />
</h:selectManyCheckbox> 
```

和

```
private Map<String, Long> availableItems; // +getter
private List<Long> selectedItems; // +getter+setter
private Long selectedItem;
private boolean selectedItemRemoved;

@PostConstruct
public void init() {
    availableItems = new LinkedHashMap<String, Long>();

    for (long i = 0; i < 10; i++) {
        availableItems.put("CHKID " + i, i);
    }
}

public void selectedItemsChanged(ValueChangeEvent event) {
    List<Long> oldValue = (List<Long>) event.getOldValue();
    List<Long> newValue = (List<Long>) event.getNewValue();

    if (oldValue == null) {
        oldValue = Collections.emptyList();
    }

    if (oldValue.size() > newValue.size()) {
        oldValue = new ArrayList<Long>(oldValue);
        oldValue.removeAll(newValue);
        selectedItem = oldValue.iterator().next();
        selectedItemRemoved = true;
    }
    else {
        newValue = new ArrayList<Long>(newValue);
        newValue.removeAll(oldValue);
        selectedItem = newValue.iterator().next();
        selectedItemRemoved = false;
    }
}

public void itemSelected(AjaxBehaviorEvent event) {
    System.out.println("Selected item: " + selectedItem);
    System.out.println("Selected item removed? " + selectedItemRemoved);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-16T20:44:58.963

当您在列表“selectedItems”中取消选中结束元素时，代码不会调用 itemSelected 方法。

# javascript - 构建一个基本的 Addthis 页面

> ID：14060248
> 
> 赞同：1
> 
> 时间：2012-12-27T19:35:28.333
> 
> 标签：javascript, html, addthis

我试图用里面的 Addthis 代码构建一个基本页面。

我正在使用的代码是：

```
<html>
   <HEAD>
      <TITLE>test    </TITLE>
         <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
         <meta content="utf-8" http-equiv="encoding">

         <script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.js'>    </script>
         <script type='text/javascript' src="http://twitter.github.com/bootstrap/assets/js/bootstrap.min.js">    </script>
   </HEAD>
<body>

 <div> 
   <!-- AddThis Button BEGIN -->
  <div class="addthis_toolbox addthis_default_style ">
   <a class="addthis_button_facebook_like" fb:like:layout="button_count">    </a>
   <a class="addthis_button_tweet">    </a>
   <a class="addthis_button_pinterest_pinit">    </a>
   <a class="addthis_counter addthis_pill_style">    </a>
  </div>
   <script type="text/javascript">var addthis_config = {"data_track_addressbar":true};    </script>
   <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=felix001">    </script>
   <!-- AddThis Button END -->
 </div>
</body>
</html> 
```

但是，当我在浏览器中运行该页面时，我得到一个空白屏幕。我错过了什么明显的东西吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T18:59:54.877

它不会在本地工作，因为 src 标记正在使用“//s7 ...”并试图根据父页面确定协议。在您的情况下，在本地运行时，父页面可能如下所示：

文件：//c:\blahblah\index.html

因此协议是 file:// 这不起作用（它需要是 http 或 https）。这样做是为了方便用户将代码复制到 http 或 https 站点，而无需更改代码。

要在本地解决此问题，只需在 http 前面加上如下所示：

```
<script type="text/javascript" src="http://s7.addthis.com/js/300/addthis_widget.js#pubid=felix001"></script> 
```

# java - FileWriter 中的 Java txt 文件为空

> ID：14060250
> 
> 赞同：2
> 
> 时间：2012-12-27T19:35:38.073
> 
> 标签：java

如果 PRINT() 方法在 VehicleCollection 类中并在主类中调用，我在 java 项目中从类 FileWrite 写入 txt 文件时遇到问题 - 没有问题。但我希望打印方法位于名为 FileWrite 的不同类中，并从此类中调用 main 方法。这里和平的代码。我希望我写正确的问题。如果我应该更多地解释我的代码，我会的。

我有 3 节课 第一节课是：

```
public class VehicleCollection  {

    private  ArrayList<VehicleInterface> arrList = new ArrayList<>();

    public ArrayList<VehicleInterface> getArrList() {
        return arrList;
    }

    void  setArrList(ArrayList<VehicleInterface> w){
        arrList = w;
    }

    public void getCollection() throws FileNotFoundException, IOException {
        Here Add in ArrayLIst...
    }
} 
```

第二类是：

```
public class FileWrite extends VehicleCollection {

    FileWrite(ArrayList<VehicleInterface> w){
        setArrList(w);
    }

    public void print() throws FileNotFoundException {

        Writer writer = null;
        try {
            String text = getArrList().toString();
            File file = new File("krasiWrite.txt");
            writer = new BufferedWriter(new java.io.FileWriter(file));
            writer.write(text);
            ...
        } 
```

第三类是主类：

```
FileWrite fw =  new FileWrite();
fw.print(); 
```

这里有错误：不能应用于给定类型所需的 ArrayList

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T19:41:01.613

文件写入通常由操作系统缓冲。您必须要确保更改写入磁盘`close()`。`flush()`如果您已完成该文件，只需将其关闭即可。关闭将自动刷新缓冲区。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T19:47:52.853

Since you are already using Java 7, why not use the try-with-resources construct to avoid having to do things like close streams:

```
try( File   file = new File("krasiWrite.txt"); 
     Writer writer = new BufferedWriter(new java.io.FileWriter(file)); )
{ 
     String text = getArrList().toString();
     writer.write(text);
     writer.flush(); // this lines takes whatever is stored in the BufferedWriter's internal buffer
                     // and writes it to the stream
}
catch(IOException ioe) {
   // ... handle exception
}

// now all resources are closed. 
```

# javascript - 从 HTML 表单事件调用解析 javascript 函数

> ID：14060252
> 
> 赞同：1
> 
> 时间：2012-12-27T19:36:03.470
> 
> 标签：javascript, html, dbaas

我一直在尝试从 html 表单提交中调用一个简单的 javascript 登录函数，但它似乎没有调用该方法。我已尝试将该方法移至外部 .js 类，但该功能仍然无法正常工作。java 脚本函数位于名为 Login() 的标头中，它使用表单中的变量将它们传递到 Web 服务并登录。我也尝试从外部 homepage.js 脚本调用其他函数，但它们没有触发事件。如果登录成功，我的意图是推送到 index.html 页面。谢谢。

代码：

```
<script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.1.15.min.js"></script>     

    <script type="text/javascript">
    Parse.initialize("v9s5EdsZ4u9fSfTpr8SD0u3Xcb56nen1GWge47kV", "fjuiNrsJk3AubBY1zDfosLKDoPxzGgKlUxegxbtx");
function Login()
    {
      Parse.User.logIn(document.loginForm.uname, document.loginForm.pword, 
      {
        success: function(user) 
        {
          window.location="/index.html";
        },
        error: function(user, error) 
        {
          // The login failed. Check error to see why.
        }
      });
    }
  </script>

    <style type="text/css">
      /* Override some defaults */
      html, body {
        background-color: #eee;
      }
      body {
        padding-top: 40px; 
        padding-bottom: 140px;
      }
      .container {
        width: 300px;
      }

      /* The white background content wrapper */
      .container > .content 
      {
        background-color: #fff;
        padding: 20px;
        margin: 0 -20px; 
        -webkit-border-radius: 10px 10px 10px 10px;
           -moz-border-radius: 10px 10px 10px 10px;
                border-radius: 10px 10px 10px 10px;
        -webkit-box-shadow: 0 1px 2px rgba(0,0,0,.15);
           -moz-box-shadow: 0 1px 2px rgba(0,0,0,.15);
                box-shadow: 0 1px 2px rgba(0,0,0,.15);
      }

    .login-form {
    margin-left: 65px;
    }

    legend {
    margin-right: -50px;
    font-weight: bold;
      color: #404040;
    }

    </style>

  </head>
  <body>
    <div id="topBar">
      <button onclick="WarningSigns()" class="btn btn-danger" type="button">Warning signs</button>
    </div>

    <div id="content">
      <div id="titleContent">
        <h1>Bronchiectasis</h1>
        <p id="subTitle">Self-management action plan <p>
      </div>
    </div>
      <div class="container">
    <div class="content">
      <div class="row">
        <div class="login-form">
          <h2>Login</h2>
          <form name="loginForm" action="javascript:Login()">
            <fieldset>
              <div class="clearfix">
                <input name="uname" type="text" placeholder="Username">
              </div>
              <div class="clearfix">
                <input name="pword" type="password" placeholder="Password">
              </div>
              <button class="btn primary" type="submit">Sign in</button>
            </fieldset>
          </form>
        </div>
      </div>
    </div>
  </div> <!-- /container -->

  </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:19:23.543

[`logIn`Parse API 中](https://www.parse.com/docs/js/symbols/Parse.User.html#.logIn)的函数需要其用户名和密码参数的字符串值。您正在传递 HTML 元素。

将调用更改为：

```
 Parse.User.logIn(document.loginForm.uname.value, document.loginForm.pword.value, 
  {
    success: function(user) 
    {
      window.location="/index.html";
    },
    error: function(user, error) 
    {
      alert('error '+error);
      // The login failed. Check error to see why.
    }
  }); 
```

你应该走得更远。

更新小提琴：http: [//jsfiddle.net/JYsZe/1/](http://jsfiddle.net/JYsZe/1/)

# java - 提取供应商列表并将它们显示到列中 JSP 函数

> ID：14060259
> 
> 赞同：0
> 
> 时间：2012-12-27T19:36:35.780
> 
> 标签：java, function, jsp

我得到了一个名称列表，我想将它们显示到 (3) 列中。使用 jsp 函数执行此操作的最佳方法是什么？

列表：

```
apples
oranges
cherries
limes
pineapples
grapefruits
coconuts
watermelons
grapes
bananas
pears
peaches 
```

预期产出 -

```
Column 1 - apples, oranges, cherries, and limes /
Column 2 - pineapples, grapefruits, coconuts, and watermelons /
Column 3 - grapes, bananas, pears, peaches 
```

1.  假设我想指定每列中有多少行，使用 jsp 函数执行此操作的最佳方法是什么？

2.  另一种情况是，如果有一个包含 13 个项目的列表，然后将其除以列数 (3)，您将得到 4.333333333..

我可以使用什么函数示例在第一列中获得 6，在第二列中获得 6，在第三列中获得 1？

任何想法或意见我都会非常感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T13:44:20.930

循环遍历您的集合，当添加 6 行添加一个新列时，您可以使用嵌套表，但首选 div。

```
<c:forEach varStatus="count" var="fruit" items="${fruits}">
...
  <c:when test=${count.index % 6 == 0}> //when loop count is multiple of six
  ... // create your column structure, be it, td, table or div
  </c:when>
</c:forEach> 
```

# php - MySQL查询只返回循环中的第一个值

> ID：14060260
> 
> 赞同：0
> 
> 时间：2012-12-27T19:36:38.370
> 
> 标签：php, mysql, foreach

我正在尝试将用户名转换为各自的用户 ID，但由于某种原因，只有数组中的第一项被转换。其余的只是结果数组中的空值。我可以输入相同的名称 3 次，但仍然只转换数组的第一个元素。

假设我尝试将以下数组转换为他们的用户 ID

```
$users = [1 => test1, 2 => test2, 3 => test3] 
```

结果数组是

```
$users = [1 => 1, 2 => , 3 => ] 
```

这是查找用户标识的循环

```
foreach($user_list as $user){
    array_push($user_id_list,$convert->userid_lookup($user));
} 
```

这是转换函数

```
function userid_lookup($username){
    echo $username //each name appears here
    $lookup = mysql_query("select userid from users where username = '$username' ");
    $result = mysql_fetch_array($lookup);
    echo $result['userid']; //only the first element's id appears
   return $result['userid'];
} 
```

为什么只转换第一个元素？我知道每个项目都在处理，因为当我回显每个项目时，它们会显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T19:45:06.630

看来您弄乱了变量名。
设置`$users`数组但`$user_list`
将结果迭代推入`$user_id_list`但`$users`再次检查。

尝试运行完整的代码并稍微调试一下。

对于函数本身 - 它看起来不错，尽管您必须在将字符串插入查询之前正确格式化字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:39:33.340

在我看来，您必须将结果循环到下一个索引。

# erlang - 在本地网络之外无法访问 Yaws 服务器

> ID：14060262
> 
> 赞同：0
> 
> 时间：2012-12-27T19:37:03.017
> 
> 标签：erlang, yaws

我正在尝试在我的 Raspberry Pi 上托管 erlang Yaws Web 服务器。我使用 no-ip 作为动态 DNS。我的路由器是汤姆逊 ST780。在路由器上，我已将端口从 50001 端口转发到 Raspberry Pi 上的端口 8081。我的服务器只能从本地网络中访问，并按预期显示 index.yaws。但是，我希望它可以从互联网上访问。我相信问题出在 Yaws 配置上，因为我在路由器上禁用了防火墙，并且在 Pi 上也禁用了防火墙。

我认为配置错误的 Yaws 配置部分如下所示：

```
<server my_application_name.no-ip.org>
 port = 8081
 listen = 0.0.0.0
 docroot = /home/pi/erl/airport
 dir_listing = false
 auth_log = true
 statistics = true
 appmode = <cgi-bin, yaws_appmod_cgi>
</server> 
```

我也尝试过添加

```
<auth> allow = all </auth> 
```

并将本地IP地址放在监听部分，它仍然无法正常工作。

任何人都可以看到这个配置的问题吗？

我也在我的路由器上使用相同的端口转发方式进行 SSH 和 SSH 可以从互联网访问。

编辑：我所做的安装是 local_install，这里推荐：http://yaws.hyber.org/configuration.yaws，[也许](http://yaws.hyber.org/configuration.yaws)这可能是个问题。

# java - SQLite 高分数据库，非法状态异常 - Android (java)

> ID：14060263
> 
> 赞同：1
> 
> 时间：2012-12-27T19:37:05.393
> 
> 标签：java, android, sqlite, illegalstateexception

我制作了一个包含 3 列的 SQLite 高分；id(int - autoincrement)、score(long) 和 percent(int)。我正在尝试从列中提取所有数据，并将它们与用户刚刚获得的分数进行比较，以查看他们的新分数是否进入了前 10 名的高分列表。

我希望先按百分比对高分进行优先排序，然后再得分以打破任何平局。下面是我开始这样做的地方。即使在 Java 之外，我也从未使用过 SQLite，所以这对我来说都是全新的。我收到一个错误。LogCat 在下面。

预先感谢您的帮助。

```
//Check if new record makes the top 10.
public boolean check(long score, int percentage) {
    Cursor c1 = db.rawQuery("SELECT " + PERCENTAGE + " FROM " + TABLE + " WHERE " + PERCENTAGE + "= percentage;", null);
    Cursor c2 = db.rawQuery("SELECT " + SCORE + " FROM " + TABLE + ";", null);
    if(c1.getCount() > 0) {               
        c2.moveToFirst();
        int i = 0;
        do {
            i++;
            long x = c2.getLong(c2.getColumnIndex("SCORE"));  //Line 39
            if(x < percentage) {
                if(c2.getCount() == 9) {
                    //Delete last record in high score and insert at index.
                    db.rawQuery("DELETE FROM " + TABLE + " WHERE " + ID + " = 10;", null);
                    db.rawQuery("INSERT INTO " + TABLE + "VALUES (" + i + ", " + score + ", " + percentage + ");", null);
                    return true;
                } else {
                    //No deletion - just insert.
                    db.rawQuery("INSERT INTO " + TABLE + "VALUES (" + i + ", " + score + ", " + percentage + ");", null);
                    return true;
                }
            } else {
                return false;
            }
        } while (c2.moveToNext());
    } else {
        return false;
    }
} 
```

LogCat 输出

```
12-19 02:26:45.270: E/AndroidRuntime(24809): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.test/com.example.test.Results}: java.lang.IllegalStateException: Couldn't read row 0, col -1 from CursorWindow.  Make sure the Cursor is initialized correctly before accessing data from it.
12-19 02:26:45.270: E/AndroidRuntime(24809):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
12-19 02:26:45.270: E/AndroidRuntime(24809):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-19 02:26:45.270: E/AndroidRuntime(24809):    at android.app.ActivityThread.access$600(ActivityThread.java:130)
12-19 02:26:45.270: E/AndroidRuntime(24809):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-19 02:26:45.270: E/AndroidRuntime(24809):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-19 02:26:45.270: E/AndroidRuntime(24809):    at android.os.Looper.loop(Looper.java:137)
12-19 02:26:45.270: E/AndroidRuntime(24809):    at android.app.ActivityThread.main(ActivityThread.java:4745)
12-19 02:26:45.270: E/AndroidRuntime(24809):    at java.lang.reflect.Method.invokeNative(Native Method)
12-19 02:26:45.270: E/AndroidRuntime(24809):    at java.lang.reflect.Method.invoke(Method.java:511)
12-19 02:26:45.270: E/AndroidRuntime(24809):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-19 02:26:45.270: E/AndroidRuntime(24809):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-19 02:26:45.270: E/AndroidRuntime(24809):    at dalvik.system.NativeStart.main(Native Method)
12-19 02:26:45.270: E/AndroidRuntime(24809): Caused by: java.lang.IllegalStateException: Couldn't read row 0, col -1 from CursorWindow.  Make sure the Cursor is initialized correctly before accessing data from it.
12-19 02:26:45.270: E/AndroidRuntime(24809):    at android.database.CursorWindow.nativeGetLong(Native Method)
12-19 02:26:45.270: E/AndroidRuntime(24809):    at android.database.CursorWindow.getLong(CursorWindow.java:507)
12-19 02:26:45.270: E/AndroidRuntime(24809):    at android.database.AbstractWindowedCursor.getLong(AbstractWindowedCursor.java:75)
12-19 02:26:45.270: E/AndroidRuntime(24809):    at com.example.test.DatabaseHelper.check(DatabaseHelper.java:39)
12-19 02:26:45.270: E/AndroidRuntime(24809):    at com.example.test.Results.showResults(Results.java:102)
12-19 02:26:45.270: E/AndroidRuntime(24809):    at com.example.test.Results.onCreate(Results.java:51)
12-19 02:26:45.270: E/AndroidRuntime(24809):    at android.app.Activity.performCreate(Activity.java:5008)
12-19 02:26:45.270: E/AndroidRuntime(24809):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
12-19 02:26:45.270: E/AndroidRuntime(24809):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023) 
```

如果您发现一旦问题得到纠正，该算法可能无法正常工作，我也将不胜感激！提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:43:25.373

您对游标 1 的查询不正确，请尝试以下操作，

```
Cursor c1 = db.rawQuery( "SELECT " + PERCENTAGE + " FROM " + TABLE + " WHERE " + PERCENTAGE + "=" + percentage, null); 
```

您还应该在使用游标之前对其进行空检查，并在完成后关闭它们：

```
if ( c1 != null && c2 != null )
{
    // Do your thing
    /* Stuff */

    // Now close the cursors
    c1.close();
    c2.close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T19:43:30.600

改变

```
Cursor c1 = db.rawQuery("SELECT " + PERCENTAGE + " FROM " + TABLE +
                                 " WHERE " + PERCENTAGE + "= percentage;", null); 
```

到

```
Cursor c1 = db.rawQuery("SELECT " + PERCENTAGE + " FROM " + TABLE + 
                                " WHERE " + PERCENTAGE + "="+ percentage, null); 
```

目前你没有通过 WHERE 子句的百分比

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T19:44:11.427

您收到异常的原因是您正在检查 c1 内部是否有元素 (c1.getCount() > 0)，然后使用可能为空的 c2 并且不检查 c2.moveToFirst() 是否不返回 false。

[http://developer.android.com/reference/android/database/Cursor.html#moveToFirst](http://developer.android.com/reference/android/database/Cursor.html#moveToFirst) ()

# c++ - 列表初始化中元素的评估顺序

> ID：14060264
> 
> 赞同：22
> 
> 时间：2012-12-27T19:37:08.713
> 
> 标签：c++, gcc, c++11, initializer-list, operator-precedence

在[另一个主题](https://stackoverflow.com/questions/14056000/how-to-avoid-undefined-execution-order-for-the-constructors-when-using-stdmake)中，@Dietmar 给出了这个解决方案：

```
template <typename... T>
std::tuple<T...> parse(std::istream& in) 
{
    return std::tuple<T...>{ T(in)... };
} 
```

说明，

> 大括号初始化的使用是有效的，因为大括号初始化列表**中参数的求值****顺序是它们出现的顺序**。（强调我的）

C++ 标准 (n3485) 中的相关文本是，

> 在一个花括号初始化列表的初始化列表中，初始化子句，包括任何由包扩展 (14.5.3) 产生的子句，按照它们出现的顺序进行评估。也就是说，与给定初始化子句相关联的每个值计算和副作用在初始化器列表的逗号分隔列表中与任何初始化子句相关联的每个值计算和副作用之前进行排序。[注意：无论初始化的语义如何，这种评估顺序都成立；例如，它适用于初始化器列表的元素被解释为构造函数调用的参数时，即使调用的参数通常没有顺序约束。——尾注]

* * *

所以我尝试使用以下代码对此进行测试：

```
template<int N>
struct A 
{ 
    std::string data;
    A(std::istream & stream) { stream >> data; }
    friend std::ostream& operator<<(std::ostream & out, A<N> const & a) 
    {
        return out << "A"<<N<<"::data = " << a.data;
    }
};
typedef A<1> A1;
typedef A<2> A2;

template<typename ...Args>
void test(std::istream & stream)
{
    std::tuple<Args...> args { Args(stream)... };
    std::cout << std::get<0>(args) << std::endl;
    std::cout << std::get<1>(args) << std::endl;
}

int main()
{
    std::stringstream ss("A1 A2");
    test<A1,A2>(ss);
} 
```

预期输出：

```
A1::data = A1
A2::data = A2 
```

实际输出：

```
A1::data = A2
A2::data = A1 
```

我在测试代码中做错了吗？我将代码更改为：

```
std::stringstream ss("A1 A2");
std::tuple<A1,A2> args{A1(ss), A2(ss)};
std::cout << std::get<0>(args) << std::endl;
std::cout << std::get<1>(args) << std::endl 
```

与之前的输出相同。我用`MinGW (GCC) 4.7.0`and测试了我的代码`4.7.2`。甚至 ideone 也给出了[这个输出](http://ideone.com/jPrpiR)。

它是编译器中的错误吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-27T20:37:30.670

^(回答我自己的问题。删除问题不是一个好主意，因为将来有人可能会有同样的问题。)

是的。这是 GCC 编译器中的一个错误。

*   [错误 51253 - [C++11][DR 1030] 括号初始化列表中初始化程序子句之间的评估顺序（先排序关系）](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=51253)

取自@Johannes Schaub 对该问题的评论。

# java - 在 JToolBar 中添加垂直分隔符

> ID：14060266
> 
> 赞同：2
> 
> 时间：2012-12-27T19:37:28.123
> 
> 标签：java, swing, swingbuilder

我已经为个人项目使用 Java Swing (Windows Builder Pro) 创建了一个 GUI，它有一个`JToolBar`. 我在工具栏中的按钮之间添加了分隔符。

```
JButton btnSave = new JButton("Save");
    btnSave.setToolTipText("Save");
    btnSave.setMnemonic('S');
    btnSave.setIcon(new ImageIcon(Main.class.getResource("/org/dbhaskaran/resources/Save32.png")));
    toolBar.add(btnSave);
    toolBar.add(new JSeparator(SwingConstants.VERTICAL));

    JButton btnDesign = new JButton("Design");
    btnDesign.setIcon(new ImageIcon(Main.class.getResource("/org/dbhaskaran/resources/wizard32.png")));
    toolBar.add(btnDesign);
    toolBar.add(new JSeparator(SwingConstants.VERTICAL)); 
```

1.  我不明白为什么`JButtons`在添加分隔符后我的右对齐？我该如何解决？
2.  当我单击工具栏上的一个按钮时，它会留下一个丑陋的边框 - 有什么办法可以摆脱它？请看下面的截图：

![在此处输入图像描述](../Images/c683f96fdd60e61ca609f46246b1ffbf.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T19:51:26.197

想出了我第一个问题的答案：

代替

```
toolBar.add(new JSeparator(SwingConstants.VERTICAL)); 
```

和

```
toolBar.addSeparator(); 
```

现在工具栏中的所有图标都被紧紧地打包在一起了。只需要弄清楚是否有办法摆脱 JToolBar 中最近使用的 Jbutton 上留下的丑陋按钮边框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-30T23:01:57.520

> 只需要弄清楚是否有办法摆脱 JToolBar 中最近使用的 Jbutton 上留下的丑陋按钮边框。

```
button.setFocusPainted(false) 
```

为所有人重复`JButtons`

# jquery - jquery getJSON 和 $.each 循环遍历未链接到父索引的子数组

> ID：14060271
> 
> 赞同：4
> 
> 时间：2012-12-27T19:37:42.470
> 
> 标签：jquery, json, each

我对 jQuery 和 JSON 很陌生，对这个网站也是全新的。

我正在尝试使用 jQuery 显示来自 JSON 文件的数据。

JSON 示例：

```
[
    {
        "show":"swim",
        "image": "Img1.jpg",
         "brands": 
                [
                {
                "brand":"Img 1 Company",
                "YAH": "Img 1 YAH"
                },
                {
                "brand":"Img 1 Company 2",
                "YAH": "Img 1 YAH 2"
                }
                ]
    },
    {
        "show":"swim",
        "image":"Img2.jpg",
        "brands": [
                {
                "brand":"Img 2 Company 1",
                "YAH": "Img 2 YAH 1"
                },
                {
                "brand":"Img 2 Company 2",
                "YAH": "Img 2 YAH 2"
                },
                {
                "brand":"Img 2 Company 3",
                "YAH": "Img 2 YAH 3"
                }
                ]
    },
    {
        "show":"resort",
        "image":"Img3.jpg",
        "brands": [
                {
                "brand":"Img 3 Company 1",
                "YAH": "Img 3 YAH 1"
                },
                {
                "brand":"Img 3 Company 2",
                "YAH": "Img 3 YAH 2"
                }
                ]
    }
] 
```

我希望“品牌”数组数据仅与父对象一起显示。当我显示到 console.log 时它是正确的，但是当我 .append 它重复所有品牌数组数据时。它正确显示“图像”值并显示“品牌”数组中的所有数据，但重复“品牌”数组数据。结果显示如下：

图片1.jpg

*   图 1 公司
*   图 1 公司 2
*   图 2 公司 1
*   图 2 公司 2
*   图 2 公司 3
*   图 3 公司 1
*   图 3 公司 2

图片2.jpg

*   图 1 公司 2
*   图 2 公司 1
*   图 2 公司 2
*   图 2 公司 3
*   图 3 公司 1
*   图 3 公司 2

图片3.jpg

*   图 3 公司 1
*   图 3 公司 2

结果应该在哪里：

图片1.jpg

*   图 1 公司
*   图 1 公司 2

图片2.jpg

*   图 2 公司 1
*   图 2 公司 2
*   图 2 公司 3

图片3.jpg

*   图 3 公司 1
*   图 3 公司 2

我无法弄清楚如何让品牌数组只显示父对象的数据。这是我的 HTML 和脚本

```
<!DOCTYPE html>
<html lang="en">
<head>
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<meta charset="utf-8" /><body>
<div id="ImageGallery"></div> 

<script>
$.getJSON('js/data.json', function(json) {
   $.each(json,function(i, value){
       $('#ImageGallery').append('<p>'+ value.image + '</p><ul class="brands"></ul>');
     $.each(value.brands, function(index, obj){
        $('ul.brands').append('<li>'+ obj.brand +'</li>');
     })
        });
});
</script>
</body> 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T19:44:16.997

引用您刚刚创建的 ul 并从 .each 回调中调用它。

```
$.each(json,function(i, value){
     $('#ImageGallery').append('<p>'+ value.image + '</p>');
     $ul = $('<ul class="brands"></ul>').appendTo('#ImageGallery');
     $.each(value.brands, function(index, obj){
        $ul.append('<li>'+ obj.brand +'</li>');
     })
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:52:48.567

您没有告诉它添加值的特定容器。选择并附加多个无序列表。

尝试类似：

```
$.getJSON('js/data.json', function(json) {
    $.each(json,function(i, value){
        $('#ImageGallery').append('<p>'+ value.image + '<ul class="brands"></ul></p>');
        $.each(value.brands, function(index, obj){
            $('#ImageGallery p:last').children('ul.brands').append('<li>'+ obj.brand +'</li>');
        })
    });
}); 
```

# javascript - 使用 jQuery 单击按钮时打开/关闭菜单

> ID：14060273
> 
> 赞同：-1
> 
> 时间：2012-12-27T19:37:44.783
> 
> 标签：javascript, jquery, asp.net

我刚刚遇到了一个问题。在我的网站上，我需要通过单击按钮来打开或关闭菜单项。

点击按钮：

```
var checked = true;

function NotifierButtonClicked() {
    if (checked == true) {
        checked = false;

        GetNotificationsForUser();

        $('.selectBox').slideToggle(200).css('borderTop', 'none');
        $('.selectBox li').click(function () {
            $('.selectBox').slideUp(200);
        });

    }
    if (checked == false) {
        checked = true;
        $('.selectBox').slideUp(200);
    }

} 
```

所以这里的问题是，当我`if block`第一次进入时，`checked`是真的，所以我向上滑动菜单并设置`checked`为真。下次我单击按钮时，checked 为 true，因此菜单将打开，但我将 checked 设置为 false，因此当代码进入下一个 if 条件时，它也会运行并立即关闭菜单。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T19:39:56.647

使用`if`然后`else if`

```
function NotifierButtonClicked() {
    if (checked == true) {
        // code
    } else if (checked == false) {
        // code
    }
} 
```

# python - 如何使用静态文件正确打包烧瓶应用程序

> ID：14060275
> 
> 赞同：10
> 
> 时间：2012-12-27T19:37:53.673
> 
> 标签：python, flask, packaging

我正在尝试为 webapp（基于烧瓶）创建一个 python 包，我想在已知目录中安装一些文件。

例如，flask在运行集成服务器（基于粘贴）时尝试在当前包中查找`templates`和目录。`static`但在生产中，我宁愿将那些目录安装在更具体的位置，例如`virtualenv/share/package-name/{static,templates}`. 否则，它们将在某个`lib/python-2.x/...`似乎不合适的地方。

我尝试使用`data_files`in 参数安装文件`setup.py`，但这似乎对整棵树没有用（`error: can't copy 'xxx': doesn't exist or not a regular file`）。

在这种情况下，正确的解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-15T16:11:23.617

你可以做的是将你的虚拟环境和静态文件打包成一个本地包（.deb 或 .rpm），然后你可以把它们放在你想要的任何地方。[我在这里](https://web.archive.org/web/20160214035604/http://www.plankandwhittle.com/packaging-a-flask-app-in-a-debian-package/)写了一篇关于此的博客文章。它使用了一个方便的小红宝石 gem，叫做[fpm](https://github.com/jordansissel/fpm)，虽然我没有将我的静态文件从我的 python 包中分离出来，但你可以通过在 fpm 命令的末尾添加另一个路径映射来实现，就像这样

```
 fpm -s dir -t deb -n food-truck -v 0.1 -d "python,python-dev,postgresql" /home/ubuntu/food_truck-build/=/home/ubuntu/foodtruck.com <path to static files>=<destination of static files> 
```

您也可以使用 fpm 来指定其他配置文件，例如您的 nginx 配置等。但这取决于您，并且可能意味着您的部署不太灵活。

希望有帮助！

# c# - 什么是引擎盖下的演员表

> ID：14060279
> 
> 赞同：8
> 
> 时间：2012-12-27T19:38:04.857
> 
> 标签：c#, .net, clr

> **可能的重复：**
> [C#“as”cast vs classic cast](https://stackoverflow.com/questions/4926677/c-sharp-as-cast-vs-classic-cast)

我想知道当我做类似的事情时.Net CLR 的底层会发生什么

```
对象 myObj = "abc";
字符串 myStr = (string)myObj;

```

以及第二行与`string myStr = myObj.ToString()`或有何不同`string myStr = myObj as string;`

环顾四周，我发现了诸如“编译器在其中插入代码”之类的泛型答案，但我不满意……我正在寻找对演员表机制的深入了解……哦，编译器插入了代码？给我看看！编译器优化代码？如何？什么时候？

请尽可能靠近金属！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T19:45:38.693

您可以使用[IL Dissasembler](http://msdn.microsoft.com/en-us/library/f7dy01k1%28v=vs.80%29.aspx)来查看您的代码在较低级别上生成的内容。如果您的机器上安装了 Visual Studio，您只需在 Windows 搜索框中键入“ildasm”即可找到它。

以下代码的 IL 如下所示：

```
object myObj = "abc";
string myStr = (string)myObj;    
string tostring = myObj.ToString(); 
```

![在此处输入图像描述](../Images/e6f4943af523518021a6825b88b14c7b.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T19:47:52.223

A cast is primarily a compile time construct. It is your way of telling the compiler, "I know better than you, this instance that you think is such and such a type is * actually* of this other type. Just pretend that it's really this other type and let me use all of the methods/properties/fields/etc. of that other type.

At runtime very little changes. Pretty much the only thing that's added is a check to make sure that the instance really is of the type you were trying to cast to, and if it wasn't it will throw an exception. It's more or less:

```
if(myObj.GetType() != typeof(string))
    throw new ClassCastException(); 
```

As for `ToString`, it's merely a method that returns a `string`. It's definition within the `string` class is most likely just `return this;`. In any case, you're not technically casting anything, you're just calling a method that every object has that returns a string, and when that object is a `string` under the hood you just happen to get that same object back. The key is that the compiler knows that the result of the method call is always a string, so nothing special needs to be done.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T19:54:09.367

您可以使用 Visual Studio 附带的 ILDASM。它是一个 IL 反汇编程序。

这是代码：

```
public void Foo()
{
    object myObj = "abc";
    string myStr = (string)myObj;
} 
```

这是我得到的：

```
.method public hidebysig instance void  Foo() cil managed
{
  // Code size       15 (0xf)
  .maxstack  1
  .locals init ([0] object myObj,
           [1] string myStr)
  IL_0000:  nop
  IL_0001:  ldstr      "abc"
  IL_0006:  stloc.0
  IL_0007:  ldloc.0
  IL_0008:  castclass  [mscorlib]System.String
  IL_000d:  stloc.1
  IL_000e:  ret
} // end of method ShowWhatCastIs::Foo 
```

使用 ToString()：

```
public void Foo2()
{
    object myObj = "abc";
    string myStr = myObj.ToString();
} 
```

IL是：

```
.method public hidebysig instance void  Foo2() cil managed
{
  // Code size       15 (0xf)
  .maxstack  1
  .locals init ([0] object myObj,
           [1] string myStr)
  IL_0000:  nop
  IL_0001:  ldstr      "abc"
  IL_0006:  stloc.0
  IL_0007:  ldloc.0
  IL_0008:  callvirt   instance string [mscorlib]System.Object::ToString()
  IL_000d:  stloc.1
  IL_000e:  ret
} // end of method ShowWhatCastIs::Foo2 
```

当您转换字符串“abc”存储在位置 0 中，然后加载位置 0，使用“cast class [mscorlib]System.String”转换值，然后将该值存储到位置 1

当您调用 .ToString() 时，它实际上在字符串上调用 System.Object.ToString() 。ToString() 在 System.String 中定义

这是 System.String.ToString() 的 ILDASM：

```
.method public hidebysig virtual instance string 
        ToString() cil managed
{
  .custom instance void System.Runtime.TargetedPatchingOptOutAttribute::.ctor(string) = ( 01 00 3B 50 65 72 66 6F 72 6D 61 6E 63 65 20 63   // ..;Performance c
                                                                                          72 69 74 69 63 61 6C 20 74 6F 20 69 6E 6C 69 6E   // ritical to inlin
                                                                                          65 20 61 63 72 6F 73 73 20 4E 47 65 6E 20 69 6D   // e across NGen im
                                                                                          61 67 65 20 62 6F 75 6E 64 61 72 69 65 73 00 00 ) // age boundaries..
  .custom instance void __DynamicallyInvokableAttribute::.ctor() = ( 01 00 00 00 ) 
  // Code size       2 (0x2)
  .maxstack  8
  IL_0000:  ldarg.0
  IL_0001:  ret
} // end of method String::ToString 
```

它只是返回自己。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T20:07:18.203

**CLR 允许您将对象强制转换为它的类型或它的任何基类型。转换为基本类型已经被认为是安全的并且是隐式的。**

例如。

对象 s = new String();

**但是 CLR 希望您在转换为派生类型时指定显式转换**

```
String str = s; // Give error and needs you to explicitly cast it
//To get it to work
String str = (String)s; 
```

现在在这里发生的事情不是将它转换为字符串，而是检查是否是字符串类型。如果发现它是 String 类型，则强制转换成功，否则抛出 InvalidCastExcetion。

另外两种 case 方法是使用**is**和**as**运算符

is Operator ：如果转换成功，则返回 true，否则返回 false。

例如

```
Object o = new Object();
Boolean b1 = (o is Object); // b1 is true
Boolean b2 = (o is DateTime); // b2 is false 
```

所以在调用任何方法之前，通常你会写这样的代码

```
if(o is DateTime)  // Check this by observing the object
{
    DateTime d = (DateTime)o; // Again cast the object to obtain a reference 
    // Perform operations
} 
```

这有点贵，因为 CLR 会强制转换两次。

为了避免这种情况，我们有**as**运算符。

as 运算符：返回对检查对象类型的引用，否则返回 null。

例如：

```
DateTime d = o as DateTime; // Check the object to verify the case and returns reference to the object itself or null

if(d != null)
{
   // Perform the operations
} 
```

所以你可以看到，使用 as operator 时性能略有提升。

这就是 CLR 在转换类型时必须提供的全部内容。

* * *

当涉及到您的代码时：

对象 str = "abc";

str.ToString() 将调用 System.object 类的 ToString 方法，这是一个虚拟方法。当调用虚方法时，CLR 会实际检查调用者指向的对象的类型。

这里的 str 实际上指向一个字符串对象。因此编译器将生成代码来调用 String 类的 ToString 方法，该方法将打印“abc”作为输出。**这个概念是多态性，其中在调用任何类型的虚拟方法时，实际对象类型首先由 CLR 获取，然后在对象的正确类型上调用适当的方法，在您的情况下为 String 类型。**

# javascript - jqPlot中的数据标签切断

> ID：14060280
> 
> 赞同：0
> 
> 时间：2012-12-27T19:38:14.800
> 
> 标签：javascript, jqplot

我正在使用 jqplot，并且看到一些奇怪的系列标签行为。如果值太大，标签不会显示。我找不到为标签保留画布区域的设置。有什么想法吗？

[示例小提琴] [http://jsfiddle.net/abenrob/nDcPB/11/](http://jsfiddle.net/abenrob/nDcPB/11/)

```
$(document).ready(function(){          
    optionsObj = {
        grid: {
            background: "rgba(0,0,0,0.0)",
            drawBorder: false,
            shadow: false
        }, 
        seriesColors: ["#6699FF"],
        seriesDefaults:{
            shadow:false, 
            renderer:$.jqplot.BarRenderer,
            rendererOptions: {
                barDirection: 'horizontal',
                barWidth:15,
                barMargin: 5
            }
        }, 
        series:[
            {pointLabels:{
                show: true
            }}],
        axesDefaults: {
            rendererOptions: {
            drawBaseline: false
            }
        },
        axes: {
            yaxis: {
                renderer: $.jqplot.CategoryAxisRenderer,
                tickOptions:{
                    showGridline:false, 
                    markSize:0
                }
            },
            xaxis:{
                tickOptions:{
                    show: false,
                    showGridline:false, 
                    markSize:0
                }
            }
        }
    };
    // labels not shown
    plot = $.jqplot('chart1', [[[507740000000,'Budget'],[496740000000,'Forecast'],[506740000000,'Expended']]], optionsObj)
    // labels shown
    plot2 = $.jqplot('chart2', [[[50774000,'Budget'],[49674000,'Forecast'],[50674000,'Expended']]], optionsObj)
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T19:58:10.130

如果条形右侧没有足够的空间，jqPlot 似乎不会呈现它们。您可以使用 xaxis pad 选项来提供更多空间，但我还必须在其中放置一个`min: 0`以使自动缩放的行为更加理智：

```
...
      xaxis:{
            tickOptions:{
                show: false,
                showGridline:false, 
                markSize:0
            },
           min: 0,
           pad:1.8
        }
... 
```

![在此处输入图像描述](../Images/aa5cfdaeb016a60da940aea7a5b9b801.png)

[在这里](http://jsfiddle.net/nDcPB/13/)更新了小提琴。

# windows-8 - 在多个文件中拆分 Win8 应用程序 HTML 的最佳实践

> ID：14060281
> 
> 赞同：0
> 
> 时间：2012-12-27T19:38:16.637
> 
> 标签：windows-8, microsoft-metro, winjs

我似乎找不到像过去使用 SHTML 或 include("test.html"); 那样拆分单页 Windows 8 应用程序的好解决方案。在 PHP 中。

我在 default.html 中有所有 HTML 标记。但是我希望将某些部分移动到自己的文件中。例如，将 header 从 default.html 移动到 aa header.html：

```
// default.html
<div data-win-control="WinJS.UI.HtmlControl" data-win-options="{uri: 'html/header.html'}"></div>

// html/header.html
<header>
   <h1>App Name</h1>
   <h2><span data-win-res="{textContent: 'subtitle'}"></span></h2>
</header> 
```

注意 textContent 是由 WinJS.Resources.processAll(); 触发的。翻译字幕。问题是翻译没有完成，因为在运行时包含了 header.html。

总而言之，我要么在寻找：

a) 编译时包含方法

或b）一种在我运行之前预加载一堆html文件的方法（比如伪造一个编译包含）

```
WinJS.UI.processAll()
WinJS.Resources.processAll(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T16:42:41.833

正如 Michael 所说，网格可以做到这一点，但导航模板也可以做到这一点，而且看起来和理解起来要干净得多。您正在考虑使用 HtmlControl，但您可以使用另一个控件，它是 PageControl ( [WinJS.UI.Pages.PageControl](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj126158.aspx) )。您正在使用的[HtmlControl](http://msdn.microsoft.com/en-us/library/windows/apps/Hh700625.aspx)是一个控件，它与所有其他控件和绑定一起处理，因此听起来它在处理 html 之前正在处理 data-win-res。我会尝试：

1.  仅在您的 HtmlControl div 上手动调用 processAll。[processAll](http://msdn.microsoft.com/en-us/library/windows/apps/hh440975)方法可以采用根元素，即使在 default.js 中调用了它，您也可以在此之前自己调用它。

2.  切换到使用 PageControl，您可以手动调用它的渲染方法。

希望这两种解决方案中的一种对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:21:02.340

默认网格应用程序模板执行此操作，其中 default.html 有一个框架，所有子页面都放入其中。

# asp.net-mvc - 如何连接 Ninject 拦截模块？

> ID：14060283
> 
> 赞同：2
> 
> 时间：2012-12-27T19:38:25.783
> 
> 标签：asp.net-mvc, logging, ninject, ninject-extensions, ninject-interception

我通过 NuGet 安装了 Ninject、Ninject.Extensions.Interception 和 Ninject.Extensions.Interception.DynamicProxy，并且我有以下模块

```
public class InterceptAllModule : InterceptionModule
{
    public override void Load()
    {
        Kernel.Intercept(p => (true)).With(new TimingInterceptor());
    }
} 
```

TimingInterceptor 在哪里

```
public class TimingInterceptor : SimpleInterceptor
{
    readonly Stopwatch _stopwatch = new Stopwatch();
    protected override void BeforeInvoke(IInvocation invocation)
    {
        _stopwatch.Start();
    }

    protected override void AfterInvoke(IInvocation invocation)
    {
        _stopwatch.Stop();
        string message = string.Format("[Execution of {0} took {1}.]",invocation.Request.Method,_stopwatch.Elapsed);
        Log.Info(message + "\n");
        _stopwatch.Reset();
    }
} 
```

现在，当我尝试将模块与 ninject 内核连接并运行我的站点时

```
var kernel = new StandardKernel(new InterceptAllModule()); 
```

我收到以下错误，

```
Could not load type 'Castle.Proxies.Func`1Proxy' from assembly 'DynamicProxyGenAssembly2, Version=0.0.0.0, Culture=neutral, PublicKeyToken=a621a9e7e5c32e69' because the parent type is sealed. 
```

基本上，每当调用操作方法时，我都会尝试为我的 ASP.NET MVC 应用程序进行日志记录，我想记录某些事情。但不知道如何解决这个错误。有经验的人可以指出我做错了什么吗？谢谢。

# html - 访问 html5 画布对象

> ID：14060284
> 
> 赞同：1
> 
> 时间：2012-12-27T19:38:35.407
> 
> 标签：html, canvas, drawing, html5-canvas

我有一个 KineticJs 项目，我正在创建几个带有循环的矩形。我不会给他们任何类型的 PII。但是使用拖动组件，我可以单独拖动它们。我们在开发者工具中看不到任何东西的画布幕后发生了什么。我希望能够看到发生了什么，比如我在屏幕上拥有的所有东西的坐标`x`和坐标。`y`

```
<canvas width="1578" style="width: 1578px; height: 1200px; position: absolute;" height="1200"></canvas> 
```

这就是开发人员工具中显示的所有内容，用于具有 10 个矩形的画布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T19:48:24.917

A `<canvas>` does not keep a reference to 'shapes' drawn onto it. It really is just a drawing surface so its up to the script (or library) which is doing the drawing to do the logic and keep reference to any drawn shapes.

If you want something with that kind of native functionality you should have a look at the `<svg>` element. There you would be able to see (and reference) `<rect>` elements

More information about svg here: [https://developer.mozilla.org/en/docs/SVG](https://developer.mozilla.org/en/docs/SVG)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:53:30.730

画布只是一个位图绘图表面。与 MS Paint（或现实生活中的画布）一样，绘图表面不记得您在其上绘制的内容。它所能做的就是告诉你当前的像素。

KineticJS 或者您需要跟踪您想要记住的每个相关对象。

在 KineticJS 中，您有一个包含图层的舞台对象，这些图层具有组和形状。

您有兴趣获取给定图层中的所有形状。

您需要在 KineticJS 教程和文档中查找。

在继续之前，您应该阅读以下内容：

[https://github.com/ericdrowell/KineticJS/wiki](https://github.com/ericdrowell/KineticJS/wiki)

[http://kineticjs.com/docs/](http://kineticjs.com/docs/)

# java - Java - HtmlUnit 对受限 URI 的访问被拒绝

> ID：14060287
> 
> 赞同：-1
> 
> 时间：2012-12-27T19:39:02.733
> 
> 标签：java, htmlunit, access-denied

以下是我的代码

```
 WebClient webClient = new WebClient();
        HtmlPage page = webClient.getPage("http://www.cheapoair.com/");
        String pageAsText = page.asText();
        System.out.println(pageAsText);
        webClient.closeAllWindows(); 
```

当我执行它时，会出现以下问题：

```
Caused by: net.sourceforge.htmlunit.corejs.javascript.EvaluatorException: Access to restricted URI denied (script in http://www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.facebook.com/cheapoair&layout=button_count&show_faces=true&width=80&action=like&font=arial&colorscheme=light&height=21 from (109, 78) to (109, 2233)#109)
    at com.gargoylesoftware.htmlunit.javascript.StrictErrorReporter.runtimeError(StrictErrorReporter.java:81)
    at net.sourceforge.htmlunit.corejs.javascript.Context.reportRuntimeError(Context.java:983)
    at net.sourceforge.htmlunit.corejs.javascript.Context.reportRuntimeError(Context.java:1039)
    at com.gargoylesoftware.htmlunit.javascript.host.xml.XMLHttpRequest.open(XMLHttpRequest.java:455)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at net.sourceforge.htmlunit.corejs.javascript.MemberBox.invoke(MemberBox.java:137)
    at net.sourceforge.htmlunit.corejs.javascript.FunctionObject.call(FunctionObject.java:452)
    at net.sourceforge.htmlunit.corejs.javascript.Interpreter.interpretLoop(Interpreter.java:1473)
    at net.sourceforge.htmlunit.corejs.javascript.Interpreter.interpret(Interpreter.java:815)
    at net.sourceforge.htmlunit.corejs.javascript.InterpretedFunction.exec(InterpretedFunction.java:123)
    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$3.doRun(JavaScriptEngine.java:539)
    at com.gargoylesoftware.htmlunit.javascript.JavaScriptEngine$HtmlUnitContextAction.run(JavaScriptEngine.java:651)
    ... 90 more
Enclosed exception: 
java.lang.RuntimeException: Exception invoking setInnerHTML 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:16:09.703

我试过了，它对我有用

```
WebClient webClient = new WebClient(BrowserVersion.INTERNET_EXPLORER_6); 
```

# git - 如何在不提交更改的情况下使用 git 提取新文件和更改？

> ID：14060295
> 
> 赞同：8
> 
> 时间：2012-12-27T19:39:53.220
> 
> 标签：git, version-control, github

有没有办法使用 git 来提取其他人所做的新文件和更改，而无需提交我的更改？我担心我的更改可能会把事情搞砸..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-27T19:46:21.787

首先，您可以`git fetch`随时从远程存储库加载更改，而不会影响您的工作目录或本地分支。

您可能想要的是存储您的更改，以便您可以将本地分支更新到最新状态，然后继续处理您的更改。为此，请使用`git stash`. 这将暂时保存您的更改，然后将其*还原*，因此您看起来好像什么都没做（别担心，它仍然保存着）。然后你可以只`git pull`更新你的分支并获得最新的更改。之后，使用`git stash pop`unstash 您的更改，并取回它们。

在某些情况下，您在取消存储时会遇到冲突，通常是在您开始编辑文件时，这些文件在更新中也从`git pull`. 这些文件获得通常的冲突标记，您可以像以前一样在本地解决它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T19:42:36.933

您可以存储（隐藏）您的更改，拉取然后再次应用您的更改：

```
git stash
git pull
git stash pop # or apply if you want to keep the changes in the stash 
```

请注意，如果有任何冲突，`git stash pop`将会失败，您必须解决它们。

# php - 提交后替换div的内容

> ID：14060296
> 
> 赞同：-1
> 
> 时间：2012-12-27T19:39:55.280
> 
> 标签：php

我浏览了几篇帖子，但我无法找到我正在尝试做的事情的答案。如果我错过了什么，请指出我的帖子。

我有一个出现在小盒子里的表格。我想要做的是而不是将访问者重定向到不同的页面，以查看“谢谢”消息，让他保持在同一页面并更改 div 的内容。

我已经成功地走到了一半（感谢在这里找到的帖子）。

我无法重定向访问者并向他显示“谢谢”消息，但我无法刷新内容。我仍然看到表格。

我只熟悉 html、css 和一点 php，所以如果有一个不包括 jquery 等的解决方案，那就太好了。

这是我到目前为止所拥有的：

HTML

```
<div id="mc_embed_signup">  
                    <form action="" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" novalidate>
                    <div class="mc-field-group">
                    <input id="firstname3" type="text" value="" name="FNAME" placeholder="'Ονομα">
                    </div>

                    <div class="mc-field-group">
                    <input id="primaryemail3" type="email" value="" name="EMAIL" placeholder="Email">
                    </div>

                    <div id="mce-responses" class="clear">
                    <div class="response" id="mce-error-response" style="display:none"></div>
                    <div class="response" id="mce-success-response" style="display:none"></div>
                    </div> 

                    <div class="myResultDiv">

                    <input name="subscribe" class="button_link hover_fade large_button red button_widget" type="submit" value="ΣΤΕΙΛΤΕ ΤΟ ΔΩΡΟ ΜΟΥ!"></div>
                    </form>

                    <?php if (isset($_POST['subscribe'])) : ?>
                    <p>Thank you for subscribing!</p>
                    <?php endif; ?>

                    </div>

                    <div>
                    <p class="under_button2"></p>

                    <div class="af-clear">
                    </div>

                    </div>
                    </div>                  
                    <!--End mc_embed_signup--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:44:55.990

@kat_indo 用于更改 div 的文本内容

```
 document.getElementById("yourDivId").innerText = "New text Content"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:46:39.350

把你的条件逻辑放在外面`div` ......

```
<?php if (isset($_POST['subscribe'])) { ?>
    <p>Thank you for subscribing!</p>
<?php }else{ ?>

   ---- FORM DIV HERE ----
<?php } ?> 
```

这是假设您正在寻找服务器端解决方案。即您提交表单并重建页面。

# java - Spring 安全 ldap 广告身份验证

> ID：14060298
> 
> 赞同：0
> 
> 时间：2012-12-27T19:40:16.530
> 
> 标签：java, spring-security, ldap

我正在尝试使用 spring security 3.1 对 ldap 服务器进行身份验证。

我对 ldap 的了解为零到很少。

在旧代码中，大约有 7 年的历史。我们有一个调用登录对象的 servlet

```
 mypackage.Login login = new mypackage.Login("*******",
                          "389",
                          "none",
                          "cn",
                          "ou=Employees, ou=**, o=ny, c=US",
                          "ou=Employees, ou=**, o=ny, c=US",
                          v);
   String[] res = login.authenticate(username, password); 
```

登录代码如下：

```
package mypackage;

import java.util.Hashtable;
import java.util.Enumeration;
import java.util.Vector;
import java.util.StringTokenizer;
import java.lang.*;
import java.util.regex.*;
import javax.naming.*;
import javax.naming.directory.*;
import mypackage.LoginErrorBean;

import javax.naming.NamingException;

public class Login 
{
  private static String INITCTX = "com.sun.jndi.ldap.LdapCtxFactory";

  private String host;
  private String port;
  private String encryption;
  private String mgrdnattrib;
  private String mgrdnpath;
  private String searchbase;
  private Vector attribs;

  private LoginErrorBean myErrors = new LoginErrorBean();

  public Login() {}

  public Login(String host,String port,String encryption,String mgrdnattrib,String mgrdnpath,String searchbase,Vector attribs) 

  {
    // Parameter settings to connect to desired LDAP service.
    // Note: the encryption piece does not seem to work at all
    this.host = host;
    this.port = port;
    this.encryption = encryption;
    this.mgrdnattrib = mgrdnattrib;
    this.mgrdnpath = mgrdnpath;
    this.searchbase = searchbase;
    this.attribs = attribs;
  }

  public String[] authenticate(String username, String password) throws NamingException
  {
     String[] authenticate;
          authenticate = new String [5];

    //Set default authentication code to false, f. Authentication is considered valid if value other than 'f' is returned for [0]
          authenticate[0] = "f";

    try {
      String MGR_DN = mgrdnattrib + "="  + username.toUpperCase() + "," + mgrdnpath;
      String MGR_PW = password;
      String provider = "ldap://" + host + ":" + port;

      // Parse atributes
      String MY_ATTRS[] = new String[attribs.size()];
      for (int i = 0; i < attribs.size(); ++i) {MY_ATTRS[i] = (String)attribs.get(i);}

      // Specify the search filter to match for general users
      String MY_FILTER ="("+ mgrdnattrib+"=*)";

      Hashtable env = new Hashtable();

      // Specify which class to use for our JNDI provider
      env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
      env.put(Context.PROVIDER_URL, provider);
      env.put(Context.SECURITY_AUTHENTICATION,"simple");
      env.put(Context.SECURITY_PRINCIPAL,MGR_DN);
      env.put(Context.SECURITY_CREDENTIALS,MGR_PW);

      if ( encryption.toUpperCase().compareTo("SSL") == 0 ) {env.put(Context.SECURITY_PROTOCOL,"ssl");}

      // Specify host and port to use for directory service

      // Get a reference to a directory context
      DirContext ctx = new InitialDirContext(env);

      // Specify the scope of the search
      SearchControls constraints = new SearchControls();
      constraints.setSearchScope(SearchControls.SUBTREE_SCOPE);

      // Perform the actual search
      // We give it a searchbase, a filter and a the constraints
      // containing the scope of the search
      NamingEnumeration results = ctx.search(searchbase,MY_FILTER, constraints);

      Attribute fn = null;
      Attribute last = null;
      Attributes res = null;
      Attribute ou = null;
      Attribute tel = null;
      Attribute rm = null;
      String givenname = "";
      String ln = "";
      String area = "";
      String phone = "";
      String room = "";

        if (results != null && results.hasMore()) {

          SearchResult sr = (SearchResult) results.next();

          //Attempt to retrieve the ou
          try 
          {  res = sr.getAttributes();
             ou = res.get("ou");
             area = ou.toString();            
          } catch (Exception ex) {ex.printStackTrace();} 
          finally {}

          area.trim();

          //Given name
          try 
          { fn = res.get("givenname");
            givenname = fn.toString();
            givenname = givenname.replaceAll("givenName:","");
            givenname = givenname.trim();
            authenticate[1]=givenname;
          } catch (Exception ex) {ex.printStackTrace();} 
          finally {}

          //sn
          try 
          { last = res.get("sn");
            ln = last.toString();
            ln = ln.replaceAll("sn:","");
            ln = ln.trim();
            authenticate[2]= ln;
          } catch (Exception ex) {ex.printStackTrace();} 
          finally {}

          //Phone
          try 
          { tel = res.get("telephonenumber");
            phone = (tel.toString()==null?"No Phone":tel.toString());
            if(phone.length()==0)
            {phone="telephoneNumber:None";}
          phone = phone.replaceAll("telephoneNumber:","");
          phone = phone.trim();
          authenticate[3]= phone;
          } catch (Exception ex) {ex.printStackTrace();} 
          finally {}

          //Room
          try 
          { rm = res.get("l");
            room = rm.toString();
           if(room.length()==0)
            {room="l:None";}
          room = room.replaceAll("l:","");
          room = room.trim();
          authenticate[4]= room;
          } catch (Exception ex) {ex.printStackTrace();} 
          finally {}
          authenticate [0] = "u";
          /**
           * This section appears to check again, confirming that the username for login is the same login name found in LDAP. 
           * It seems like this is repetitive, will maintain for now however. 10/30/06 axk
          */

      }

    } catch (Exception e) {
        System.err.println("Exception: " + e.getMessage());
        authenticate[1] = e.getMessage();
        myErrors.addErrorMessage(e.toString());

    }
    return authenticate;
  }
} 
```

我正在尝试在 spring 安全文件中执行此操作：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:s="http://www.springframework.org/schema/security"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <s:http auto-config="true">
                <s:intercept-url pattern="/login" access="IS_AUTHENTICATED_ANONYMOUSLY" />
                <s:intercept-url pattern="/index.jsp" access="IS_AUTHENTICATED_ANONYMOUSLY" />
        <s:intercept-url pattern="/**" access="ROLE_USER" />
                <s:intercept-url pattern="/" access="ROLE_USER" />       
        <s:form-login login-page="/login" default-target-url="/getemp"/>
        <s:logout logout-success-url="/logout" />
    </s:http>

    <s:authentication-manager>

                        <s:authentication-provider ref="adAuthenticationProvider"/>

    </s:authentication-manager>

      <bean id="adAuthenticationProvider"
  class="org.springframework.security.ldap.authentication.ad.ActiveDirectoryLdapAuthenticationProvider">
    <constructor-arg value="*********" />
    <constructor-arg value="************" />
    <property name="convertSubErrorCodesToExceptions" value="true"/>
</bean>       
</beans> 
```

显示的html登录页面是：

### 使用用户名和密码登录（自定义页面）

```
 <form method="POST" action="j_spring_security_check" name="f">

        <table>
            <tbody><tr>
                <td>User:</td>
                <td><input type="text" value="" name="j_username">
                </td>
            </tr>
            <tr>
                <td>Password:</td>
                <td><input type="password" name="j_password">
                </td>
            </tr>
            <tr>
                <td colspan="2"><input type="submit" value="submit" name="submit">
                </td>
            </tr>
            <tr>
                <td colspan="2"><input type="reset" name="reset">
                </td>
            </tr>
        </tbody></table>

    </form>

</body> 
```

早些时候我在尝试 filterbasedLdapAuthenticator ann 至少得到了一个例外。现在，当我尝试登录时：控制台上没有显示任何内容 - 我再次进入登录页面。我哪里会出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:06:43.750

要查看登录过程中是否有异常，请将以下内容添加到您的 jsp.xml 中。

```
<c:if test="${not empty param.login_error}">
  <font color="red">
    Your login attempt was not successful, try again.<br/><br/>
    Reason: <c:out value="${SPRING_SECURITY_LAST_EXCEPTION.message}"/>.
  </font>
</c:if> 
```

这也必须添加到您的 spring 安全文件中。

```
<s:form-login login-page="/login" default-target-url="/getemp" authentication-failure-url="/login?login_error=1"/> 
```

要检查的另一件事是 ldap 返回的角色具有 ROLE_USER。如果您不需要特定角色，则将拦截 url 更改为仅检查 isAuthenticated()。

```
<s:intercept-url pattern="/**" access="isAuthenticated()" /> 
```

# javascript - 基于下拉列表中设置的初始值，表单中的 Javascript 用一周中的天数填充 6 个字段

> ID：14060302
> 
> 赞同：-1
> 
> 时间：2012-12-27T19:40:31.270
> 
> 标签：javascript

如果之前已解决此问题，我深表歉意；我无法找到已经描述的解决方案。

我应该先提出我的问题，说我是 JS 编码的新手。

我正在尝试在表单中设置 JavaScript，以根据下拉列表中设置的初始值填充一周中的 6 个字段。

伪代码：

```
Field 0 Drop-down list value selected by user is 'Tuesday'
Field 1 populates to 'Wednesday'
Field 2 populates to 'Thursday'
Field 3 populates to 'Friday'
Field 4 populates to 'Saturday'
Field 5 populates to 'Sunday'
Field 6 populates to 'Monday' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:15:37.707

我需要~~休息~~十分钟，所以这是我的 jQuery 解决方案（假设你愿意使用它）：

### HTML

```
<select id="day0"></select><br />
<input id="day1" type="text" /><br />
<input id="day2" type="text" /><br />
<input id="day3" type="text" /><br />
<input id="day4" type="text" /><br />
<input id="day5" type="text" /><br />
<input id="day6" type="text" /><br /> 
```

### JS：

```
var days = ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"];

function update(sel) {
    var start = parseInt($(sel).val());
    for (var i = 1; i <= days.length; i++) {
        $('#day' + i).val(days[(i + start) % 7]);                            
    }   
}

$(function() {
    // Find the select list
    var $sel = $('#day0');
    // Populate it with values from the 'days' array
    $.each(days, function(i, v) {
        $('<option value="' + i + '">' + v + '</option>').appendTo($sel);
    });
    // Hook up the 'update' function to run every time the
    // selected option is changed
    $sel.change(function() { 
        update(this);
    });
    // Force an initial update of the fields
    update($sel);
}); 
```

**[工作演示](http://jsfiddle.net/w9GxF/2)**

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-27T19:48:26.900

Some snippet:

HTML

```
<select id="dropdown"></select> 
```

Javascript

```
var days = {
    v0 : 'Tuesday',
    v1 : 'Wednesday',
    v2 : 'Thursday',
    v3 : 'Friday',
    v4 : 'Saturday',
    v5 : 'Sunday',
    v6 : 'Monday'
};

var dropdown = document.getElementById("dropdown");
for(index in days) {
    dropdown.options[dropdown.options.length] = new Option(days[index], index);
} 
```

# mule - 防止 Mule Studio 删除“无效”属性

> ID：14060304
> 
> 赞同：1
> 
> 时间：2012-12-27T19:40:39.940
> 
> 标签：mule, mule-studio

我不得不在集合聚合器中使用“storePrefix”属性，因为[Mule 中的多个集合聚合器导致路由混淆](https://stackoverflow.com/questions/13960052/multiple-collection-aggregators-in-mule-causing-routes-to-get-mixed-up)，效果很好。但是 Mule Studio 认为该属性无效，有时在我进入图形视图（消息流选项卡）后，它会默默地为我删除所有 storePrefix 属性....如何防止 MuleStudio 这样做？有什么地方可以将其添加到有效的属性列表中吗？

# html - 更改 Div 的边距不会生效？

> ID：14060305
> 
> 赞同：0
> 
> 时间：2012-12-27T19:40:41.373
> 
> 标签：html, css

`#content`我正在尝试更改我的页脚边距，以便它扩展到网页的宽度，但它似乎仍然受到我添加到我的部分的 50 像素左右边距的影响。我在这里缺少什么属性，所以我可以消除页脚部分内容边距的影响？

## html

```
<div id="wrapper" />
      <div id="header" />
      <div id="mast"><img src="http://i1256.photobucket.com/albums/ii488/terafanb/guildwars2/26.png" height="99" width="774=" /></div>
      <div id="below-mast" />
      <div id="left" class="column"><img src="http://i157.photobucket.com/albums/t60/Dragon_Aleph/fantasy_warrior_23022-800x600.jpg" height="297" width="226" border="0" alt="Crusader Army" /></div>
      <div id="center" class="column"><img src="http://i157.photobucket.com/albums/t60/Dragon_Aleph/fantasy_warrior_23022-800x600.jpg" height="297" width="400" border="0" alt="Crusader Army" /></div>
      <div id="right" class="column"><img src="http://i157.photobucket.com/albums/t60/Dragon_Aleph/fantasy_warrior_23022-800x600.jpg" height="297" width="139" border="0" alt="Crusader Army" /></div>
      <div></div>
      <div id="content" />
      <p>
      <div class="Heading">Forward Exchange *</div>
      $500.00 - collected upon the closing of the Relinquished Property.
      $500.00 - collected upon closing of each Replacement Property purchased.
      * Special credits may apply - Call Us.<br /></br>
      <div id="we-pay">
        <br />
        <div class="Heading">We pay interest</div>
        </br>
        We provide full disclosure of the fees involved in the transaction in the Exchange Agreement. Our customers are entitled to receive earned interest based on the First National Bank of Durango Investment Money Market rate, from the time when the Relinquished Property funds are initially deposited. Interest does not accrue on those funds withdrawn during the first 30 calendar days after the funds are deposited in the Exchange Trust Account. Also, interest does not accrue if customer elects to have exchange funds held at First National Bank of Durango in an Unlimited FDIC insurance non-interest bearing account (available through December 31, 2012)
      </div>
      <br />
      <div class="Heading">
        Safe-Harbor Reverse Exchange <br />
        <h2>We charge the following fees:</h2>
      </div>
      <div id="prices">$2,500.00 – Title holding fee<br /> 
        $500.00 – LLC fee<br />
        $200.00 – Monthly Rent<br />
        Plus – Forward Exchange fees<br />
        <br />
      </div>
      <div id="note">
        <p>Note: If any improvements need to be made to the parked property,
          being held by the EAT ( Exchange Accommodator Titleholder )
          there will be an additional fee of 1% of the final sales price to Taxpayer.
        </p>
        <div>
          <br /></br>
          <div id="disclaimer">Fees are subject to change without prior notice</p></div>
        </div>
        <div id="footer">
          <a href="index.html">Home</a>
          <strong>l</strong> <a href="whatIs1031.html">What is a 1031 Exchange?</a> <strong>l</strong> <a href="exchangeRequ.html">
          1031 Exchange Requirements</a> <strong>l</strong> <a href="typesOfExchange.html">Types of Exchanges</a> <br />
          <div id="Second-Half">              
            <a href="howToStart.html">How to get Started</a> <strong>l</strong> 
            <a href="whyCLX.html">Why CLX?</a><strong>l</strong> <a href="resources.html">Resources</a> <strong>l</strong> <a href="fAQs.html">FAQs</a> <strong>l</strong> <a href="fees.html">Fees</a> 
            <a href="contactUs.html">Contact Us</a>
          </div>
        </div>
      </div> 
```

## CSS

```
*{box-sizing:border-box;}
#wrapper {margin-left:auto; margin-right:auto;width:774px;}
#below-mast { width:774px; overflow:hidden; }
#left {height:297px; width:29%; margin:4px;margin-left:0px;}
#center{height:297px; width:51%; margin:4px;}
#right {height:297px; width:17%; margin:4px;}
#left,  #center, #right { float:left;margin-bottom:50px;}
#content{overflow:;margin:0px;margin-top:100px;font-family:Arial, Helvetica, sans-serif;margin-right:50px;margin-left:50px;}
.Heading{font-size:19px;font-weight:bold;text-align:center; text-decoration:underline}
.Heading>h2{font-size:13px;text-decoration:none}
#we-pay{font-size:13px}
#we-pay>.Heading{font-size:20px;text-decoration:none;}
#prices{text-align:center; font-size:20px;}
#note{text-align:center;}
#disclaimer{font-size:13px; text-align:center; font-weight:bold;font-style:italic; }
#footer{margin-right:-50px;margin-left:-50px;}
#footer,a:link{font-family:Helvetica, sans-serif;color:#300000; margin-top:50px;}
#Second-Half{margin-left:auto; margin-right:auto;width:450px;} 
```

这是我在 Code Pen 上的代码的链接，供您参考 [http://codepen.io/Austin-Davis/pen/rLeEi](http://codepen.io/Austin-Davis/pen/rLeEi)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:53:33.703

您可以使用以下代码修复您的错误：

```
#footer { margin: 0; position: absolute; left: 0; width: 100%; } 
```

请结帐：[http ://codepen.io/joe/pen/uBikf](http://codepen.io/joe/pen/uBikf)

PS：出于测试目的，我给页脚设置了灰色背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:01:59.583

抱歉，我只是错过了`</div>`我的#note 部分的关闭，使页脚成为内容部分的一部分，因此通过 css 对页脚的任何边距更改都无用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T20:20:11.017

另一种解决方案是将页脚移到#wrapper div 之外。另外请检查您的 HTML .. 它在很多地方都损坏了，因此修复 css 问题可能是不可能的；）

例如。你有很多自闭标签“”（无效）你也缺少结束正文标签，没有现有标签“”等。

# xml - xmllint 验证在无效输入上成功

> ID：14060308
> 
> 赞同：0
> 
> 时间：2012-12-27T19:41:18.227
> 
> 标签：xml, xsd, xmllint

为什么 xmllint 不报告以下 xsd 和 xml 的验证失败？

t.xsd

```
<?xml version="1.0"?><xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
<xs:element name="letter">
   <xs:simpleType>
      <xs:restriction base="xs:string">
      <xs:pattern value="([a-z])+"/>
      </xs:restriction>
   </xs:simpleType>
</xs:element>
</xs:schema> 
```

t.xml

```
 <letter></letter> 
```

$ ./xmllint --schema t.xsd t.xml

```
<?xml version="1.0"?>
<letter/>
t1.xml validates 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T02:02:47.643

输入对我来说似乎无效（Mark O'Connor 说它是有效的，但我没有看到任何关于这种效果的论据，只是一个光秃秃的陈述）。同样重要的是，对于 Xerces J 或 Saxon EE，它看起来并不有效。

众所周知，xmllint 中的 XSD 支持有点参差不齐，但这主要意味着规范的某些部分不受支持。这看起来更像是正则表达式例程中的一个简单错误。[我在libxml 的 gnome bugtracker 中](https://bugzilla.gnome.org/buglist.cgi?product=libxml2)看到了几个未解决的正则表达式错误；也许这是相关的。我已经打开了一个关于这个问题的[新错误报告](https://bugzilla.gnome.org/show_bug.cgi?id=690846)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T11:28:37.017

输入有效。您需要添加额外的长度限制......称之为 XML Schema 的“功能”:-)

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="letter">
    <xs:simpleType>
      <xs:restriction base="xs:string">
        <xs:pattern value="([a-z])+"/>
        <xs:minLength value="1"/>
      </xs:restriction>
    </xs:simpleType>
  </xs:element>
</xs:schema> 
```

# 更新

如下修改了架构，然后它似乎可以按您的预期工作

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="letter">
    <xs:simpleType>
      <xs:restriction base="xs:string">
        <xs:pattern value="[a-z]+"/>
      </xs:restriction>
    </xs:simpleType>
  </xs:element>
</xs:schema> 
```

# java - 如何在 ScrollView 和 LinearLayout 中居中

> ID：14060309
> 
> 赞同：5
> 
> 时间：2012-12-27T19:41:20.910
> 
> 标签：java, android, scrollview, android-linearlayout

请看下面的代码

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".DisplayResult" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        >

        <ImageView
            android:id="@+id/zodiac1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/aries"
            />

        <TextView
            android:id="@+id/orTxt"
            android:text="Or"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            />

        <ImageView 
            android:id="@+id/zodiac2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/gemini"
            />

    </LinearLayout>

    </ScrollView> 
```

我需要将所有内容都集中在 LinearLayout 中。我必须使用滚动视图，因为当应用程序 100% 完成时，会有很多信息，如果不滚动，一眼就无法查看。怎样才能使这些中心？请帮忙！

**更新**

使用滚动内的任何布局，没有问题。但我需要这些元素以相同的顺序（一个接一个）并居中。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-27T19:47:18.130

您需要将重力设置为以线性布局为中心

```
< LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:gravity="center"
        android:orientation="horizontal" > 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-06T09:54:37.467

这个对我有用：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="center">

<ScrollView 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
>

 <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:gravity="center" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T19:45:39.357

`LinearLayout`尝试在您的to上使用 layout_gravity `center_horizontal`：

```
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_gravity="center_horizontal"
    android:layout_height="wrap_content"
    android:orientation="horizontal"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-17T18:08:44.653

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".DisplayResult"
    scrollbars="horizontal">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:gravity="center_horizontal">

        <ImageView
            android:id="@+id/zodiac1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/aries"
            />

        <TextView
            android:id="@+id/orTxt"
            android:text="Or"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            />

        <ImageView 
            android:id="@+id/zodiac2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/gemini"
            />

    </LinearLayout>

    </ScrollView> 
```

#如果要在中心进行线性布局，则需要在线性布局中编写**android:gravity="center_horizo​​ntal"**。

# jquery - jQuery 在按需加载时工作一次

> ID：14060313
> 
> 赞同：1
> 
> 时间：2012-12-27T19:42:07.097
> 
> 标签：jquery

我在这里遇到了这个问题：我正在使用 .load 加载网站的不同部分，让 jquery 处理加载的内容我尝试将 js 文件与内容一起加载，效果很好，但问题是当用户单击该部分并再次加载，jquery 将不再工作，这是每次用户进入该部分时我都试图使工作的 js 文件：

```
$(".slider").each(function() {
    var radios = $(this).find(":checkbox").show();
    $("<div></div>").slider({
      min: parseInt(radios.first().val(), 10),
      max: parseInt(radios.last().val(), 10),
      slide: function(event, ui) {
        radios.filter("[value=" + ui.value + "]").click();
      }

    }).appendTo(this);

}); 
```

我认为添加某种实时功能将是解决方案，有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:16:17.767

您可以做一件事，而不是用您的 HTML 加载 jQuery 文件。您可以使用[完整的回调](http://api.jquery.com/load/)函数来添加您需要的所有内容。当您的 html 加载到您的选择器时，将运行此函数。

```
$('#your-div').load(url, funciton(){
  $(".slider").each(function() {
    var radios = $(this).find(":checkbox").show();
    $("<div></div>").slider({
      min: parseInt(radios.first().val(), 10),
      max: parseInt(radios.last().val(), 10),
      slide: function(event, ui) {
        radios.filter("[value=" + ui.value + "]").click();
      }

    }).appendTo(this);
  });
}); 
```

# ajax - Spring JSON 在 Spring 框架从 3.0.2 升级到 3.2.0 时会出现问题

> ID：14060314
> 
> 赞同：1
> 
> 时间：2012-12-27T19:42:14.927
> 
> 标签：ajax, json, spring, jquery, spring-json

我正在使用 Spring 框架版本 3.0.2 和 Hibernate (NetBeans 6.9.1) 处理 Web 应用程序。后来我知道有一个错误导致上传多个文件时出现问题，正如我之前的一个[问题](https://stackoverflow.com/q/13686757/1391249)中提到的那样。

我已经完成了获得解决方案的努力，但未能成功。因此，我将 Spring 版本升级到[3.2.0](http://www.springsource.org/download/community)。

在较早的版本 (3.0.2) 中，AJAX 在[Jackson 1.9.8](http://jackson.codehaus.org/1.9.8/jackson-all-1.9.8.jar)（其下载[页面](http://wiki.fasterxml.com/JacksonDownload)）中运行良好，但在较新的版本 (3.2.0) 中，一切正常，但 AJAX 调用在 JavaScript 代码中的任何地方都会提示错误。

有一种场景，当在国家选择框中选择一个国家时，从 Spring 控制器中连同 DAO 一起检索相应的状态列表。在 Spring 控制器中映射到 URL 的方法如下，

```
@RequestMapping(value="ajax/GetStateList", method=RequestMethod.GET)
public @ResponseBody List<Object[]> getStateSelectBox(HttpServletRequest request)
{
    return cityService.getStateSelectBox(request.getParameter("countryId"));
} 
```

在国家选择框中选择国家时调用该方法。该`getStateSelectBox()`方法在 DAO 类之一中定义如下，

```
@Service
@Transactional(readOnly = true, propagation=Propagation.REQUIRES_NEW)
public final class CityDAO implements CityService
{
    private SessionFactory sessionFactory;

    public void setSessionFactory(SessionFactory sessionFactory)
    {
        this.sessionFactory = sessionFactory;
    }

    @SuppressWarnings("unchecked")
    public List<Object[]> getStateSelectBox(String id)
    {
        List<Object[]> list = sessionFactory.getCurrentSession()
                          .createQuery("select s.stateId, s.stateName from StateTable s where countryId.countryId=:id order by s.stateId")
                          .setParameter("id", Long.parseLong(id)).list();

       for(Object[]o:list)
       {
           System.out.println(o[0]+" : "+o[1]);
       }
       return list;
   }
} 
```

该`foreach`循环只是为了演示，它显示了所有状态及其 id，这些状态对应于`countryId`AJAX 请求提供的但`List`不返回给 JSP。

用于发送此 AJAX 请求的 JavaScript 代码会发出错误警报。JSON映射似乎存在一些问题。同样的事情也适用于早期版本的 Spring 框架 (3.0.2)。我不确定为什么这会导致更高版本的 Spring 3.2.0 出现问题。Spring 3.2.0 版有什么我可能会丢失的吗？

* * *

如果您需要查看 JavaScript 代码，实现此目的的完整 JavaScript 代码如下所示。

```
function getStates(countryId)
{
    if(countryId==""||countryId==null||countryId==undefined||isNaN(countryId))
    {
        var str="<select id='cmbStates' name='cmbStates' onchange='errorMessage(this.value);' class='validate[required] text-input'><option value=''>Select</option></select>";
        $('#stateList').html(str);
        alert("Please select an appropriate option.");
        return;
    }

    var div=document.createElement("div");
    div.id="temp";
    document.body.appendChild(div);

    $.ajax({
        datatype:"json",
        type: "GET",
        contentType: "application/json",
        url: "/wagafashion/ajax/GetStateList.htm",
        data: "countryId=" + countryId+"&t="+new Date().getTime(),
        success: function(response)
        {
            if(typeof response==='object'&&response instanceof Array)
            {                            
                var str="<select id='cmbState' name='cmbState' onchange='errorMessage(this.value);' class='validate[required] text-input'><option value=''>Select</option>";
                var l=response.length;

                for(var i=0;i<l;i++)
                {
                    str+="<option value='"+response[i][0]+"'>"+$('#temp').text(response[i][1]).html()+"</option>";
                }
                str+="</select>";
                $('#stateList').html(str); // select box is written to #stateList div
                $('#temp').remove();
            }
        },
        error: function(e)
        {
            alert('Error: ' + e);
        }
    });
} 
```

* * *

可以肯定的是，Jackson 库位于类路径中，我在服务器端没有收到任何错误或异常。AJAX 请求成功，它通过 Spring 进入 DAO，并`List<Object[]>`从数据库中检索类型列表，但它不是 JSON 对 JSP 的响应（可以/应该映射到 JavaScript 数组）。据推测，JSON 映射似乎缺少某些东西，但早期版本的 Spring 并非如此。

* * *

**编辑：**

我尝试`List<Object[]>`在 3.0.2 和 3.2.0 这两个框架中进行解析，例如

```
List<Object[]> list = cityService.getStateSelectBox(request.getParameter("countryId"));
ObjectMapper objectMapper=new ObjectMapper();
try
{
    objectMapper.writeValue(new File("E:/Project/SpringHibernet/wagafashionLatest/temp.json"), list);
}
catch (IOException ex){} 
```

该文件`temp.json`包含以下字符串。

```
[[21,"Gujarat"],[22,"Maharashtra"],[23,"Kerala"],[24,"New Delhi"]] 
```

在这两种情况下（使用两个框架）。因此，在这两种情况下，JSON 响应似乎应该是相同的。

该`temp.json`文件也可以按如下方式反序列化。

```
try
{
    ObjectMapper mapper=new ObjectMapper();
    List<Object[]> list = mapper.readValue(new File("E:/Project/SpringHibernet/wagafashionLatest/temp.json"), new TypeReference<List<Object[]>>() {});

    for(Object[]o:list)
    {
        System.out.println(o[0]+" : "+o[1]);
    }
} 
catch (IOException ex) 
{

} 
```

它工作正常，`foreach`循环遍历`List`of type `List<Object[]>`。因此，问题可能是由 Spring 框架本身引起的。还需要什么，我不确定。为什么杰克逊没有映射它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T14:30:14.370

我在 Spring 论坛上有同样[的帖子。](http://forum.springsource.org/showthread.php?133693-Spring-JSON-causes-problems-when-the-Spring-framework-is-upgraded-from-3-0-2-to-3-2-0&p=434503#post434503)最终对我有用的问题的答复中的解决方案需要`dispatcher-servlet.xml`按如下方式配置文件。

```
<mvc:annotation-driven content-negotiation-manager="contentNegotiationManager" />

<bean id="contentNegotiationManager" class="org.springframework.web.accept.ContentNegotiationManagerFactoryBean">
    <property name="favorPathExtension" value="false" />
    <property name="favorParameter" value="false" />
    <property name="ignoreAcceptHeader" value="false" />
    <property name="mediaTypes" >
        <value>
            atom=application/atom+xml
            html=text/html
            json=application/json
            *=*/*
        </value>
    </property>
</bean> 
```

这导致 JSON 与 Jackson [1.9.8](http://wiki.fasterxml.com/JacksonDownload)和 Spring [3.2.0](http://www.springsource.org/download/community)一起工作。这归功于对该问题的所有**答复**。

* * *

我的整个`dispatcher-servlet.xml`文件现在如下所示。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"

       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"

       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
       http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd
       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:component-scan base-package="controller" />
    <context:component-scan base-package="validatorbeans" />

    <mvc:annotation-driven content-negotiation-manager="contentNegotiationManager" />
    <bean id="contentNegotiationManager" class="org.springframework.web.accept.ContentNegotiationManagerFactoryBean">
        <property name="favorPathExtension" value="false" />
        <property name="favorParameter" value="false" />
        <property name="ignoreAcceptHeader" value="false" />
        <property name="mediaTypes" >
            <value>
                atom=application/atom+xml
                html=text/html
                json=application/json
                *=*/*
            </value>
        </property>
    </bean>

    <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />
    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"/>
    <bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
        <property name="mappings">
            <props>
                <prop key="index.htm">indexController</prop>

            </props>
        </property>
    </bean>

    <bean id="viewResolver"
          class="org.springframework.web.servlet.view.InternalResourceViewResolver"
          p:prefix="/WEB-INF/jsp/"
          p:suffix=".jsp" />

    <bean name="indexController"
          class="org.springframework.web.servlet.mvc.ParameterizableViewController"
          p:viewName="index" />
</beans> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T19:55:12.113

我正在使用 Spring 3.1.3，我发现 Jackson 映射尝试在响应中创建根对象。这与 Jackson2 映射器有关。我还没有尝试过使用较旧的 Jackson 映射器。如果您还升级了 Jackson，您可能会遇到同样的问题。

过去，对象数组会被映射为

```
[{name:'name1',id:4},{name:'name2',id:6}] 
```

现在我发现他们为对象提供了一个自动生成的对象名称，所以它返回类似于

```
{ objectArray: [{name:'name1',id:4},{name:'name2',id:6}]} 
```

所以你需要引用`response.objectArray[0]`而不是能够直接引用`response[0]`

无论如何，JSON 响应的格式可能有所改变。您应该查看新响应并查看 javascript 中需要发生哪些更改以使其映射新结构。

# sql - 从 sql 中的两个单独的表连接逻辑

> ID：14060315
> 
> 赞同：0
> 
> 时间：2012-12-27T19:42:30.027
> 
> 标签：sql, database, oracle

我们`cardID`在查询后返回了一个 's 列表，这些`cardID`'s 属于两个表`Student`和`Personnel`。那么我怎样才能加入那些' ' `cardID`''''''' ' ''''''''''''''''''''`Student``Personnel``Student``Personnel``cardID`

**人员**表：

```
PERSONNELID NUMBER(9,0) 
PERSONNELNAME   VARCHAR2(20)    
PERSONNELSURNAME    VARCHAR2(20)    
PERSONNELJOB    VARCHAR2(40)    
PERSONNELCARDID NUMBER(4,0) 
```

**学生**表：

```
STUDENTID   NUMBER(9,0) 
STUDENTNAME VARCHAR2(20)    
STUDENTSURNAME  VARCHAR2(20)    
STUDENTDEPT VARCHAR2(40)    
STUDENTFACULTY  VARCHAR2(20)    
STUDENTCARDID   NUMBER(4,0) 
```

**卡ID**表

```
 CARDID   NUMBER(4,0) 
   USERTYPE VARCHAR2(20)    
   CHARGE   NUMBER(3,2) 
   CREDIT   NUMBER(4,2) 
```

**支付设备**表：

```
 ORDERNO NUMBER  
    PAYDEVIP    NUMBER(8,0) 
    PAYDEVDATE  DATE    No  
    PAYDEVTIME  VARCHAR2(8) 
    CHARGEDCARDID   NUMBER(9,0) 
    MEALTYPE       VARCHAR2(10) 
```

我试图返回 2012 年 12 月 27 日在自助餐厅用餐的前 10 人的姓名和姓氏

```
SELECT C.CARDID
FROM CARD C, PAYMENTDEVICE P
WHERE P.ORDERNO
BETWEEN (SELECT MIN(ORDERNO)
FROM PAYMENTDEVICE
WHERE PAYDEVDATE='27/12/2012') AND (SELECT MIN(ORDERNO)
FROM PAYMENTDEVICE
WHERE PAYDEVDATE='27/12/2012')+10    AND C.CARDID=P.CHARGEDCARDID; 
```

我们`orderNo`不是每天都重置，而是不断增加，所以我们找到了`orderNo`当天的最小值并将这个值加 10，以在这些订单号之间找到当天吃的前 10 个人。

那么从这个查询返回什么：

```
 CARDID
  1005
  1000
  1002
  1003
  1009
  2000
  2001
  1007
  2002
  1004
  1006 
```

其中一些cardId（以1开头）是`studentCardId`，其中一些（以2开头）是`PersonnelCardId`。那么我怎样才能匹配和写出相应的名字呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:48:33.690

```
SELECT *
FROM Personel p INNER JOIN Student s 
ON p.PersonnelCardId = s.StudentCardId 
INNER JOIN ReturnedQuery rq
ON rq.CardId = p.PersonnelCardId 
```

updated:

```
 SELECT p.PersonnelName, rq.CardId
    FROM Personel p INNER JOIN ReturnedQuery rq
    ON rq.CardId = p.PersonnelCardId 

    UNION

    SELECT s.StudentName, rq.Cardid
    FROM Student s INNER JOIN ReturnedQuery rq 
    ON s.StudentCardId = rq.Cardid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T21:42:43.370

您的原始查询实际上非常脆弱。我会像这样重写它（并添加所需的连接）：

```
WITH First_Daily_Purchase as (SELECT chargedCardId,
                                     MIN(payDevTime) as payDevTime, 
                                     MIN(orderNo) as orderNo
                              FROM PaymentDevice
                              WHERE payDevDate >= 
                                              TO_DATE('2012-12-27', 'YYYY-MM-DD')
                                    AND payDevDate <
                                              TO_DATE('2012-12-28', 'YYYY-MM-DD')
                              GROUP BY chargedCardId),
     First_10_Daily_Purchasers as (SELECT chargedCardId
                                   FROM (SELECT chargedCardId, 
                                                RANK() OVER(ORDER BY payDevTime,
                                                                 orderNo) as rank
                                         FROM First_Daily_Purchase) a
                                   WHERE a.rank < 11)
SELECT a.chargedCardId, b.personnelName, b.personnelSurname
FROM First_10_Daily_Purchasers a
JOIN Personnel b
ON b.personnelCardId = a.chargedCardId
UNION ALL
SELECT a.chargedCardId, b.studentName, b.studentSurname
FROM First_10_Daily_Purchasers a
JOIN Student b
ON b.studentCardId = a.chargedCardId 
```

（有一个[有效的 SQL Fiddle](http://sqlfiddle.com/#!4/418c9/14) - 通常防弹这花了我一段时间。）
这应该让你获得前 10 个购买的人（而不是前*11 个*购买，这是你实际得到的）。这当然假设它`payDevTime`实际上是以可排序的格式存储的（如果不是你有比这个查询不能正常工作更大的问题）。

也就是说，您的架构设计有许多令人不安的事情。

# javascript - 使用 rowIndex 和 cellIndex 更改表格单元格中的文本

> ID：14060319
> 
> 赞同：1
> 
> 时间：2012-12-27T19:42:48.140
> 
> 标签：javascript, jquery, html

我得到了一行的索引。列数是静态的，所以我知道在哪一列中放置什么，但我想要的是能够使用 onclick 事件处理程序来更改特定单元格中的内容。应用了此 onclick 事件的元素位于表之外，其中包含我要从中复制内容的所有文本输入。一个简单的例子

```
<table id="table1">
<tr>
<td>SomeText</td>
<td>SomeOtherText</td>
</tr>
<tr>
<td>SomeText2</td>
<td>SomeOtherText2</td>
</tr>
</table>

<div id="box1">
<form>
<input type="text" name="newText"/>
<input type="button" onclick="?" />       
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:45:03.440

您可以使用以下方式访问此特定单元格：

```
$('#table1 tr:eq(1) td:eq(1)') 
```

在这里它将选择第二行的第二列（它是基于 0 的计数）。

然后你可以使用`jQuery.text()`or `jQuery.html()`。

您可以执行以下操作：

```
<table id="table1">
<tr>
<td>SomeText</td>
<td>SomeOtherText</td>
</tr>
<tr>
<td>SomeText2</td>
<td>SomeOtherText2</td>
</tr>
</table> 
```

然后在您的 onclick 方法中，您可以执行以下操作：

```
$('#table1 tr:eq(1) td:eq(1)').text("Whatever text you want"); 
```

或者

```
$('#table1 tr:eq(1) td:eq(1)').html("Whatever text you want"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:55:54.643

你可以使用java脚本和id。

```
<table id="table1">
<tr>
<td id=r1c1>SomeText</td>
<td id=r1c2>SomeOtherText</td>
</tr>
<tr>
<td id=r2c1>SomeText2</td>
<td id=r2c2>SomeOtherText2</td>
</tr>
</table>
<script>

function updatetxt(){
x=Document.getElementById(r1c1);
x.value=Document.getElementById(txt1).value
    }    
</script>
    <div id="box1">
    <form>
    <input type="text" id=txt1 name="newText" />
    <input type="button" onclick="updatetxt()" />       
    </form>
    </div> 
```

# python - 使用 pythons Unit-testing setUp tearDown 和 flask-sql-alchemy

> ID：14060321
> 
> 赞同：1
> 
> 时间：2012-12-27T19:42:52.370
> 
> 标签：python, unit-testing, heroku, flask-sqlalchemy

该项目是一个部署在 heroku 上的 webapp：

这是我在 db_test_many_create.py 中的简单单元测试：

```
import unittest
from petalapp.database.models import User, Hospital, Data, ROLE_USER
from petalapp import db

class BuildDestroyTables(unittest.TestCase):

    user_test_1 = User("test_user_nickname","user_email",ROLE_USER)
    data_test_1 = Data(1)
    hospital_test_1 = Hospital("test_hospital_1")

    def setUP(self):
        db.drop_all()
        db.create_all()

    def tearDown(self):
        db.session.remove()
        db.drop_all()

    def test_user_setup(self):

        db.session.add(self.user_test_1)
        db.session.commit()

if __name__ == "__main__":
    unittest.main() 
```

当我运行命令时：

```
heroku run python petalapp/database/db_test_many_create.py  --app warm-atoll-3630 
```

为了针对我的数据库对其进行测试，我得到以下回溯：

```
Running `python petalapp/database/db_test_many_create.py` attached to terminal... up, run.6505
E
======================================================================
ERROR: test_user_setup (__main__.BuildDestroyTables)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "petalapp/database/db_test_many_create.py", line 30, in test_user_setup
    db.session.commit()
  File "/app/.heroku/venv/lib/python2.7/site-packages/sqlalchemy/orm/scoping.py", line 114, in do
    return getattr(self.registry(), name)(*args, **kwargs)
  File "/app/.heroku/venv/lib/python2.7/site-packages/sqlalchemy/orm/session.py", line 703, in commit
    self.transaction.commit()
  File "/app/.heroku/venv/lib/python2.7/site-packages/sqlalchemy/orm/session.py", line 361, in commit
    self._prepare_impl()
  File "/app/.heroku/venv/lib/python2.7/site-packages/sqlalchemy/orm/session.py", line 340, in _prepare_impl
    self.session.flush()
  File "/app/.heroku/venv/lib/python2.7/site-packages/sqlalchemy/orm/session.py", line 1718, in flush
    self._flush(objects)
  File "/app/.heroku/venv/lib/python2.7/site-packages/sqlalchemy/orm/session.py", line 1789, in _flush
    flush_context.execute()
  File "/app/.heroku/venv/lib/python2.7/site-packages/sqlalchemy/orm/unitofwork.py", line 331, in execute
    rec.execute(self)
  File "/app/.heroku/venv/lib/python2.7/site-packages/sqlalchemy/orm/unitofwork.py", line 475, in execute
    uow
  File "/app/.heroku/venv/lib/python2.7/site-packages/sqlalchemy/orm/persistence.py", line 64, in save_obj
    table, insert)
  File "/app/.heroku/venv/lib/python2.7/site-packages/sqlalchemy/orm/persistence.py", line 558, in _emit_insert_statements
    execute(statement, params)
  File "/app/.heroku/venv/lib/python2.7/site-packages/sqlalchemy/engine/base.py", line 1449, in execute
    params)
  File "/app/.heroku/venv/lib/python2.7/site-packages/sqlalchemy/engine/base.py", line 1584, in _execute_clauseelement
    compiled_sql, distilled_params
  File "/app/.heroku/venv/lib/python2.7/site-packages/sqlalchemy/engine/base.py", line 1698, in _execute_context
    context)
  File "/app/.heroku/venv/lib/python2.7/site-packages/sqlalchemy/engine/base.py", line 1691, in _execute_context
    context)
  File "/app/.heroku/venv/lib/python2.7/site-packages/sqlalchemy/engine/default.py", line 331, in do_execute
    cursor.execute(statement, parameters)
ProgrammingError: (ProgrammingError) relation "user" does not exist
LINE 1: INSERT INTO "user" (nickname, email, role) VALUES (E'test_us...
                    ^
 'INSERT INTO "user" (nickname, email, role) VALUES (%(nickname)s, %(email)s, %(role)s) RETURNING "user".id' {'nickname': 'test_user_nickname', 'role': 0, 'email': 'user_email'}

----------------------------------------------------------------------
Ran 1 test in 0.349s

FAILED (errors=1) 
```

但是，如果我在交互式会话中进行更改（我认为是在进行）：

```
In [2]: from petalapp.database.models import User, Hospital, Data, ROLE_USER

In [3]: from petalapp import db

In [4]: db.drop_all()

In [5]: db.create_all()

In [6]: user_test_1 = User("test_user_nickname","user_email",ROLE_USER)

In [7]: db.session.add(user_test_1)

In [8]: db.session.commit()

In [9]: u = User.query.get(1)

In [10]: print(u)
<Name : u'test_user_nickname'> 
```

一切都如我所料，这让我相信我没有正确使用 setUp 和 tearDown 。如何使用单元测试有效地测试我的数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:04:02.713

我发现`setUP()`而不是`setUp()`在您的代码中。这可以解释为什么您的数据库似乎没有初始化，因为`unittest.TestCase`'s[`setUp()`](http://docs.python.org/2/library/unittest.html#unittest.TestCase.setUp "python 文档中的 setUp()")没有被覆盖，因此没有运行。

# c# - 在 MVC 中的服务器端在页面上创建单选按钮

> ID：14060322
> 
> 赞同：0
> 
> 时间：2012-12-27T19:42:56.517
> 
> 标签：c#, asp.net-mvc-3

我有一个 get 方法，其中有一个名称列表。

```
Public ActionResult GetlistOfNames()
{
    listofPersons = SomeListOfGuys;
    // i want to display this as a radiobutton on the clientside
} 
```

我怎样才能做到这一点？

我面临的问题是，当我尝试这样做时，我会在 div 下获取文本，例如

```
<input id="name" type="radio" name="Personname"/> 
```

而不是实际的单选按钮。

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T19:48:01.693

You would define this in the associated view for the action. Within the view, you can use the Html helper method 'RadioButtonFor' method that will build the html for you given an appropriate list. You can find more details on the specific method [on MSDN.](http://msdn.microsoft.com/en-us/library/7314433t%28v=vs.90%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:03:12.153

我将在这里假设您需要呈现一个动态生成的单选按钮列表，其中 1 由用户选择......

您的服务器端代码（在 Controller Action 方法中，或者更好的是，在 ViewModel 道具/方法中）应该返回一个`IEnumerable<SelectListItem>`. 该列表中的每个项目都将具有由您的代码设置的 Text 和 Value 属性，这些属性`foreach`来自您的实际数据源。

我更喜欢使用“胖”视图模型，所以所有工作都在模型类中完成，而不是在控制器中。您可以创建它`IEnumerable<SelectListItem>`并将其放入 ViewBag`ViewBag.NameChoices = GetSelectItemsFromDataWhatever();`中，就像在您的控制器中一样。

在您的视图中，您可以使用以下扩展方法将 SelectItems 列表绑定到等效的 ASP:RadioButtonList：

```
// jonlanceley.blogspot.com/2011/06/mvc3-radiobuttonlist-helper.html
public static MvcHtmlString RadioButtonListFor<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper,
            Expression<Func<TModel, TProperty>> expression, IEnumerable<SelectListItem> listOfValues)
{
    var metaData = ModelMetadata.FromLambdaExpression(expression, htmlHelper.ViewData);
        var sb = new StringBuilder();
        sb.Append("<span class='RadioButtonListFor'> ");

        if (listOfValues != null)
        {
            // Create a radio button for each item in the list
            foreach (SelectListItem item in listOfValues)
                {
                    // Generate an id to be given to the radio button field
                    var id = string.Format("{0}_{1}", metaData.PropertyName, item.Value);

                    // Create and populate a radio button using the existing html helpers

                    var htmlAttributes = new Dictionary<string, object>();
                    htmlAttributes.Add("id", id);

                    if (item.Selected)
                        htmlAttributes.Add("checked", "checked");

                    var radio = htmlHelper.RadioButtonFor(expression, item.Value, htmlAttributes);

                    // Create the html string that will be returned to the client
                    // e.g. <label<input data-val="true" data-val-required="You must select an option" id="TestRadio_1" name="TestRadio" type="radio" value="1" />Line1</label>
                    sb.AppendFormat("<label>{0} {1}</label> ", radio, HttpUtility.HtmlEncode(item.Text));
                }
        }

        sb.Append(" </span>");
        return MvcHtmlString.Create(sb.ToString());
} 
```

并将其绑定到您的视图中：

```
@Html.RadioButtonListFor(model => model.SelectedName, ViewBag.NameChoices) 
```

您的模型将需要一个“SelectedName”道具才能使上述内容生效，该道具将绑定到回发时选定的单选按钮。

# push-notification - 如何使用 UrbanAirship 从服务器发送通知？

> ID：14060323
> 
> 赞同：0
> 
> 时间：2012-12-27T19:42:57.967
> 
> 标签：push-notification, urbanairship.com

我正在尝试从服务器发送通知，[文档](https://docs.urbanairship.com/display/DOCS/Server:+Android+Push+API)说要 POST 到 /api/push/broadcast/ 我从以下代码完成

```
$.ajax({
    type: 'POST',
    dataType: 'json',
    url: 'https://go.urbanairship.com/api/push/?callback=?',
    data: '{"android": {"alert": "hi"}}',
    contentType: "application/json",
    username:"P4...UBg",
    password:"fg...gDA",
    error: function(jqXHR, textStatus, errorThrown){
            // log the error to the console
            alert(
                "The following error occured: "+
                textStatus, errorThrown
            );
        },
}); 
```

我收到 500（内部服务器错误）。[我添加了回调以防止此处](https://stackoverflow.com/questions/7967708/urban-airship-sending-broadcast-message-using-json)建议的“同源策略”错误。有谁知道如何正确地做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T00:17:38.760

我最初尝试以这种方式对他们的服务器进行设置（制作原始 $POST）。最后，我很高兴地发现他们有适用于大多数常用语言的模块。我们的服务器都是用 Python 编写的，所以我们使用了 Python 模块。这是他们拥有的软件包的列表：

[https://support.urbanairship.com/customer/portal/articles/60713-push-server-libraries](https://support.urbanairship.com/customer/portal/articles/60713-push-server-libraries)

我们所要做的就是将 .py 文件上传到我们的 bin 中，我们就可以像这样发送推送：

```
airship_android = urbanairship.Airship(SECRET_KEY, MASTER_KEY)
push_data = {"android": {"alert": notification_message, "extra": str(extra_data_str)}, "apids": [apid]}
airship_android.push(push_data) 
```

希望这会有所帮助！

# asp.net - 动态站点地图，数据库驱动

> ID：14060326
> 
> 赞同：0
> 
> 时间：2012-12-27T19:43:07.463
> 
> 标签：asp.net, mysql, dynamic, sitemap

我已经为此苦苦挣扎了几天。找不到任何好的例子，或者我理解的例子。

背景：我有一个小博客平台供用户写博客。每个用户都有自己的子域，目前没有可用的站点地图。不好。我想创建某种动态站点地图，其中所有站点地图节点都从数据库中检索。该站点地图将仅用于搜索引擎蜘蛛。系统：ASP.NET、mySQL。

站点地图是纯 XML。所以我需要以某种方式创建一个返回 xml-data 而不是 html 的 ASPX 文件。我需要以某种方式将 web.sitemap 重定向到该动态文件。

我从未使用过 XML，也不知道如何创建创建 XML 数据的文件。所以我什至不知道要搜索什么。我不希望将任何静态站点地图文件存储在服务器上。一切都应该即时创建。

所以。请。如果你能给我一些关于 XML 的建议，互联网上的任何例子，或者只是搜索什么。

我的主要问题：

1\. 如何从 aspx 文件创建 XML 输出？

2\. 如何“通知”系统和搜索引擎爬虫要爬取的文件是“/sitemap.aspx”

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-17T16:59:39.683

我查看了 MvcSiteMapProvider.MVC5，但我无法让它工作。首先，它修改了我的 Web.config，以至于我的 css 和 js 文件在运行我的 Web 应用程序时出现 404 未找到。

随着我花时间让 MvcSiteMapProvider 工作，我本来可以自己写的。

所以...这是我自己生成站点地图 xml 的简化版本。唯一的事情是您必须手动指定路线。我还没有添加反射来遍历每个控制器并拉出每个动作。

数据驱动的部分工作得很好。

在您的 Home 控制器中添加动作站点地图和私有辅助方法。GetRouteUrls 是手动添加的控制器/动作路由。GetDynamicUrls 构建数据驱动的 Urls。在我的示例中，我有一个 LiquidsController 和一个 Details(string id) 操作。

```
public ActionResult Sitemap()
    {
        var xml = new XDocument(
                new XDeclaration("1.0", "utf-8", null),
               new XElement("urlset",
                   new XAttribute("xmlns", "http://www.sitemaps.org/schemas/sitemap/0.9")
                   , GetRouteUrls()
                   , GetDynamicUrls()
                   )                       
            );                        
        return new XmlActionResult(xml);
    }

    private List<XElement> GetDynamicUrls()
    {
        var result = new List<XElement>();
        using (var db = new ApplicationDbContext())
        {
            var liquids = db.Liquids.ToList();
            foreach (var liquid in liquids)
            {
                result.Add(LocUrl("Liquids", "Details", liquid.FriendlyId));
            }
        }
        return result;
    }

    private List<XElement> GetRouteUrls()
    {
        var result = new List<XElement>();

        result.Add(LocUrl("Account", "Register"));
        result.Add(LocUrl("Account", "Login"));

        result.Add(LocUrl("Home", "Index"));
        result.Add(LocUrl("Home", "About"));
        result.Add(LocUrl("Home", "Contact"));
        result.Add(LocUrl("Home", "TermsOfService"));
        result.Add(LocUrl("Home", "PrivacyStatement"));

        result.Add(LocUrl("Liquids", "Index"));
        result.Add(LocUrl("Vendors", "Index"));
        result.Add(LocUrl("Hardware", "Index"));
        return result;
    }

    private XElement LocUrl(string controller, string action, string id = null)
    {
        if (!string.IsNullOrEmpty(id))
            action = string.Format("{0}/{1}", action, id);         
        var baseUri = string.Format("{0}://{1}{2}", Request.Url.Scheme, Request.Url.Authority, Url.Content("~"));
        return new XElement("url", 
            new XElement("loc", string.Format("{0}{1}/{2}", baseUri, controller, action))
            );
    } 
```

然后我添加了一条路线，这样我就可以通过 /sitemap 访问站点地图

```
routes.MapRoute(name: "sitemap", url: "sitemap", defaults: new {controller = "Home", action = "Sitemap"}); 
```

XmlActionResult 返回类型可以在这里找到： [Return XML from a controller's action in as an ActionResult?](https://stackoverflow.com/questions/134905/what-is-the-best-way-to-return-xml-from-a-controllers-action-in-asp-net-mvc)

# php - MySQL 将某些结果分组到一个数组中

> ID：14060332
> 
> 赞同：11
> 
> 时间：2012-12-27T19:43:47.820
> 
> 标签：php, mysql, join, left-join

我正在编写一个复杂的 MySQL 查询，其中包含多个`LEFT JOIN`s 来组合来自多个不同表的数据。

```
$public_query = 
"SELECT * FROM  `wsat_ib` 
LEFT JOIN wp_usermeta ON wsat_ib.user_id = wp_usermeta.user_id
LEFT JOIN wpjb_resume ON wsat_ib.user_id = wpjb_resume.user_id
LEFT JOIN wpjb_field_value ON wpjb_resume.id=wpjb_field_value.job_id 
LEFT JOIN wpjb_application ON wpjb_application.user_id = wsat_ib.user_id
WHERE wp_usermeta.meta_key =  'target_employer'
AND wp_usermeta.meta_value =  'public'
AND wpjb_resume.is_active =1
"; 
```

**我的问题**：表 wp_usermeta 可以有多个相同的 user_id 行。例如，用户（user_id = 5）在表 wp_usermeta 中可能有不止一行，其字段为：meta_key，即“target_employer”。如果不清楚，行可能看起来像这样。

```
id    user_id    meta_key           meta_value
1     5          target_employer    13
2     5          target_employer    53
3     79         target_employer    21 
```

**我的问题**：有什么方法可以将 wp_usermeta 中的每个匹配行作为数组返回到我的一个结果对象中？所以`var_dump()`看起来像这样：

```
object(stdClass)#2906 (14) {
  ["user_id"]=>
  string(4) "5"
  ["firstname"]=>
  string(6) "Bilbo"
  ["lastname"]=>
  string(3) "Baggins"
  ...
  ["target_employer"]=>
  array(2) {
    [0]=>13,
    [1]=>53
  }
} 
```

更新：@bpannulla：这是真实的（未简化的查询）...

```
"SELECT wsat_ib.user_id, wpjb_resume.firstname, wpjb_resume.lastname, wsat_ib.overall_score, wsat_ib.account_score, wsat_ib.econ_score, wsat_ib.math_score, wsat_ib.logic_score, wsat_ib.fsanaly_score, wsat_ib.corpval_score, wsat_ib.end_time, GROUP_CONCAT(wp_usermeta.meta_value) AS target_employers, wpjb_field_value.value AS school, wpjb_application.job_id
FROM  `wsat_ib` 
LEFT JOIN wp_usermeta ON wsat_ib.user_id = wp_usermeta.user_id
LEFT JOIN wpjb_resume ON wsat_ib.user_id = wpjb_resume.user_id
LEFT JOIN wpjb_field_value ON wpjb_resume.id=wpjb_field_value.job_id 
LEFT JOIN wpjb_application ON wpjb_application.user_id = wsat_ib.user_id AND wpjb_application.field_id=3
WHERE (wp_usermeta.meta_key =  'target_employer'
AND wp_usermeta.meta_value =  'public'
AND wpjb_resume.is_active =1)
GROUP BY user_id
"; 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-27T19:54:35.000

我不认为 MySQL 可以将数组返回给 PHP，但它可以使用[GROUP_CONCAT 聚合函数返回一个分隔列表。](https://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)尝试类似：

```
SELECT user_id, firstname, lastname,
     GROUP_CONCAT(wp_usermeta.meta_value) as target_employer_id
FROM `wsat_ib` 
    LEFT JOIN wp_usermeta ON
        (wsat_ib.user_id = wp_usermeta.user_id
           AND wp_usermeta.meta_key = 'target_employer')
GROUP BY user_id, firstname, lastname 
```

默认情况下，您应该在`target_employer_id`. 您可以使用 PHP`explode`函数将其转换为 PHP 逻辑中的数组。

# jquery - 兄弟姐妹问题 - 打开 1 时关闭所有打开的面板

> ID：14060333
> 
> 赞同：2
> 
> 时间：2012-12-27T19:43:49.683
> 
> 标签：jquery

如果我有这个 html：

```
<div class="main cat_info">
<h2>Question 1?</h2>
  <div class="answer">
    <p>bla bla bla</p>
  </div>
  <h2>question 2</h2>
  <div class="answer">
    <p>bla bla bla</p>
  </div>
  <h2>Question 3?</h2>
  <div class="answer">
    <p>bla bla bla</p>
  </div>
</div> 
```

我打开一个问题，如果打开另一个问题，它就会关闭（这就是我想要的）。但是当我将 h2 和 .answer 包装在 div 中时，它不起作用。像：

```
<div class="main cat_info">
  <div class="holder">
<h2>Question 1?</h2>
  <div class="answer">
    <p>bla bla bla</p>
  </div>
</div>
<div class="holder">
  <h2>question 2</h2>
  <div class="answer">
    <p>bla bla bla</p>
  </div>
</div>
  <div class="holder">
  <h2>Question 3?</h2>
  <div class="answer">
    <p>bla bla bla</p>
  </div>
</div>
</div> 
```

这是jQuery：

```
$(document).ready(function() {
$('.answer').hide();
$('.cat_info h2').on('click', function() {
    var state = $(this).next('.answer').is('.open');
    if (state) {
        $(this).removeClass('active').next('.answer').removeClass('open').fadeOut();
    }else{
        $(this).addClass('active').next('.answer').addClass('open').slideDown()
               .siblings('.answer').removeClass('open').slideUp().end()
               .siblings('h2').not(this).removeClass('active');
    }
    });
}); 
```

估计是兄弟姐妹的问题。帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T19:49:11.130

使用该标记，它可能看起来像：

```
$(document).ready(function() {
    $('.answer').hide();
    $('.cat_info h2').on('click', function() {
        var state = $(this).is('.active');
        if (state) {
            $(this).removeClass('active').next('.answer').fadeOut();
        } else {
            $(this).addClass('active').next('.answer').slideDown()
                   .closest('.holder').siblings('.holder').find('.answer').slideUp().end()
                   .find('h2').not(this).removeClass('active');
        }
    });
});​ 
```

[**小提琴**](http://jsfiddle.net/adeneo/fd9un/)

# iphone - 将 UIVIewController 推送到 UIView

> ID：14060334
> 
> 赞同：1
> 
> 时间：2012-12-27T19:44:03.743
> 
> 标签：iphone, ios, user-interface, uiview

我在 UIVIewController 中有一个 UIButton，当我按下按钮时我需要将它推送到 UIVIew。但这给了我警告`incompatible pointer type sending`

如何做到这一点我在做什么：

```
-(void)press{
    displayView *disp=[[displayView alloc]init];
    [self presentModalViewController:disp animated:No];
} 
```

这给了我警告并使我的应用程序崩溃。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T19:48:15.323

presentModalViewController accepts a UIViewController instance (not UIView). If you want to display a particular view, place it within a view controller first.

```
UIViewController *viewController = [[UIViewController alloc] init];
DisplayView *displayView = [[DisplayView alloc] init];
[viewController.view addSubview: displayView];
[self presentModalViewController:viewController animated:NO]; 
```

# javascript - 添加更改保存的 Javascript 弹出窗口

> ID：14060335
> 
> 赞同：0
> 
> 时间：2012-12-27T19:44:04.850
> 
> 标签：javascript, asp.net-mvc-3, razor

这是一个使用 razor 的 MVC3 项目。我不想显示另一个视图来通知用户更改已成功保存，我只想简单地触发一个 JavaScript 弹出窗口来通知他们......我在网络上找到的所有内容要么打开一个全新的浏览器窗口，要么错过了我的内容试图一起完成所有事情......我知道有一种更简单的方法可以做到这一点，但这就是我所在的地方......在返回时保存的控制器函数结束时，我只需使用重定向并发送它到另一个控制器功能，该功能显示一个屏幕显示“更改已成功保存”，然后用户单击那里的一个按钮，将它们带回索引页面...... IMO 这有点糟糕，认为它可以通过清理使用Javascript...我还没有找到任何运气..

```
 Function SomeFunctionName()
       db.SaveChanges()
       Return RedirectToAction(ChangesSaved)
 End Function

 Function ChangesSaved()
       Return View()
 End Function 
```

以及我在`ChangesSaved`视图中实现的 javascript。

```
@Code
ViewData("Title") = "ChangesSaved"
End Code
<script type="text/javascript">
      alert("Changes Have Been Saved Successfully");
</script> 
```

虽然这有一些问题......

![JavaScript](../Images/c843e669ddb3e466623e03a12cf9044a.png)

我如何告诉 javascript 当用户单击“确定”时，它应该将他们带到另一个页面。

我只是尝试了以下方法，因为我对 java/javascript 很陌生，所以它失败了：

```
 var r=alert("Changes Have Been Saved Successfully");
if (r == true) {
@html.Action("***********","Admin")
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:09:52.793

如果我是你，我会使用 Jquery 发布你的表单。然后你可以设置一个回调。在 Mvc 中，您可以返回 JSON 数据，一个简单的值表明保存工作就足够了。然后您可以调用警报，尽管您可能会考虑使用 jQuery UI 对话框，因为它更灵活。如果您从未使用过 jQuery，我不会害怕，它很简单，并且有很多很棒的例子。

看看这个[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)和这个[返回 JSON 或部分 html 的 ASP.NET MVC 控制器操作](https://stackoverflow.com/questions/227624/asp-net-mvc-controller-actions-that-return-json-or-partial-html)

# c++ - C++ Primer（第5版）初学者的困惑

> ID：14060336
> 
> 赞同：4
> 
> 时间：2012-12-27T19:44:07.267
> 
> 标签：c++, standard-library, c++-standard-library

> **可能重复：**
> [GCC 链接器找不到标准库？](https://stackoverflow.com/questions/8904722/gcc-linker-cant-find-standard-library)

我正试图弄乱我在假期买的这本 C++ 书，我对 python 的理解有限，所以这些东西对我来说真的很奇怪。

我将第一节课中的这段代码输入到我的文本编辑器中，并将其保存为 .cpp 文件。

```
#include <iostream>
int main()
{
    std::cout << "Enter two numbers:" << std::endl;
    int v1 = 0, v2 = 0;
    std::cin >> v1 >> v2;
    std::cout << "The sum of " << v1 << " and " << v2
              << " is " << v1 + v2 << std::endl;
    return 0;
} 
```

但是当我尝试编译它时，我的终端给出了这个疯狂的输出，这是怎么回事？

```
Raymond-Weisss-MacBook-Pro:c++ Raylug$ gcc prog2.cpp
Undefined symbols for architecture x86_64:
  "std::basic_istream<char, std::char_traits<char> >::operator>>(int&)", referenced from:
      _main in cckdLEun.o
  "std::basic_ostream<char, std::char_traits<char> >::operator<<(std::basic_ostream<char, std::char_traits<char> >& (*)(std::basic_ostream<char, std::char_traits<char> >&))", referenced from:
      _main in cckdLEun.o
  "std::basic_ostream<char, std::char_traits<char> >::operator<<(int)", referenced from:
      _main in cckdLEun.o
  "std::ios_base::Init::Init()", referenced from:
      __static_initialization_and_destruction_0(int, int)in cckdLEun.o
  "std::ios_base::Init::~Init()", referenced from:
      ___tcf_0 in cckdLEun.o
  "std::cin", referenced from:
      _main in cckdLEun.o
  "std::cout", referenced from:
      _main in cckdLEun.o
  "std::basic_ostream<char, std::char_traits<char> >& std::endl<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&)", referenced from:
      _main in cckdLEun.o
  "std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)", referenced from:
      _main in cckdLEun.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
Raymond-Weisss-MacBook-Pro:c++ Raylug$ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T20:14:57.333

是的，您应该使用`g++`来编译 C++ 而不是`gcc`，但可能值得详细说明答案，因为您说您是使用编译器的新手。

GCC 代表 GNU Compiler Collection，是可用于编译各种语言的源代码的程序集合。该命令`gcc`为用户编译程序提供了外部接口。该`gcc`命令将尝试从源文件的文件扩展名中确定要编译的语言。例如，一个名为的文件`hello.c`将编译为 C，一个名为的文件`foo.cpp`将编译为 C++，一个名为的文件`bar.m`将编译为 Objective-C。

无论文件扩展名如何，您都可以`-x`选择显式指定要编译的语言。例如，`gcc -x c++ main.c`将编译`main.c`为 C++ 文件，尽管具有`.c`扩展名。

但是，即使`gcc`会确定您的文件是 C++，默认情况下它仍然不会链接到 C++ 标准库。必须链接到该库才能编译除最简单的 C++ 文件之外的任何内容。`-lstdc++`您可以通过添加选项来链接到标准库的 GCC 实现。所以`gcc -lstdc++ prog2.cpp`应该可以正常工作。

但是，为方便起见，为 C++ 程序员提供了另一个命令。即，`g++`。该`g++`命令将自动链接到 C++ 标准库，因此您不必显式执行此操作。它还导致`.c`,`.h`和`.i`文件被视为 C++ 文件。

如果你一直坚持`gcc`编译 C 和`g++`，你应该没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T19:48:15.263

You need to use g++ instead of gcc

# google-chrome - 元素顺序对于内联 SVG 是否重要？

> ID：14060337
> 
> 赞同：10
> 
> 时间：2012-12-27T19:44:10.200
> 
> 标签：google-chrome, svg

在 Google Chrome 24 中，如果元素引用的`<use>`元素稍后在文档中定义，则不会呈现该元素。我没有注意到元素文档中与元素顺序相关的任何[`use`](http://www.w3.org/TR/SVG/struct.html#UseElement)内容。

这种行为是否未定义，不应该在浏览器之间保持一致，或者只是 Chrome 中的一个错误？

下面可以看到一个例子（从[这个](https://stackoverflow.com/questions/11514248/svg-use-elements-in-chrome-not-displayed)问题略微修改）。蓝色圆圈按预期呈现，红色，不是那么多。正如我所料，Firefox 17 和 IE 9 渲染了两个圆圈。当相同的内容被引用为外部`<img />`时，两个圆圈也会渲染。

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Chrome use-tag bug?</title>
</head>
<body>
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="200px" height="200px" viewBox="0 0 200 200">
        <defs>
            <g id="test2">
                <circle cx="50" cy="50" r="25" fill="blue"/>
            </g>
        </defs>

        <g>
            <rect x="0.5" y="0.5" width="199" height="199" stroke="black" fill="none"/>
            <use xlink:href="#test1" x="0" y="0"/>
            <use xlink:href="#test2" x="0" y="0"/>
        </g>

        <defs>
            <g id="test1">
                <circle cx="100" cy="100" r="25" fill="red"/>
            </g>
        </defs>
    </svg>
</body>
</html> 
```

* * *

**更新**：似乎在 Chrome 39 中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-08T19:35:12.333

The Rendering Order depends on the element order, so it looks strong like a bug in chrome: [SVG Rendering Order 1.0, Part 2: Language](http://dev.w3.org/SVG/modules/renderorder/SVGRenderOrder.html)

# html - 适用于 Android 2.3+ 和 IOS 4+ 的 VideoJS+HTML5 自动播放失败

> ID：14060339
> 
> 赞同：0
> 
> 时间：2012-12-27T19:44:14.960
> 
> 标签：html, video.js

我的 VideoJS 和 HTML5 项目的目标是更新的 Web 浏览器（较新版本的 FireFox 和 Chrome）以及移动浏览器（Android2.3+ 和 IOS4+）。

我希望我的所有视频在“准备好”后自动播放。我尝试了几种方法（在下面的方法中提到），但注意到自动播放仅在 FireFox 和 Chrome 中真正有效——这意味着移动浏览器只是坐着旋转。

我还没有在他们的本机模拟器中调试移动浏览器，因为我想看看这里是否有人对如何解决这个问题有过建议。

谢谢

**方法一**

将**`autoplay="true"`**属性添加到**`<video>`**标签：

```
<video id="my_videoplayer" class="video-js vjs-default-skin" controls
autoplay="true" preload="auto" width="425" height="225" poster="/img/Logo.png"
data-setup="{}">
    {% if is_help_video %}
    <source src="{{rackspace_cdn_url}}{{video_id}}" type="{{video_type}}">
    {% else %}
    <source src="{{rackspace_cdn_url}}{{video_id}}" type="{{video_type}}">
    {% endif %}
</video> 
```

**方法二**

从标签中删除**`autoplay="true"`**属性**`<video>`**并通过 VideoJS API 在“就绪”回调中尝试：

```
_V_('my_videoplayer').ready(function(){  

    MIMIC.video_player = this;

    this.addEvent( "ended", function(){

        {% if not is_help_video %}
            show_transition( true );
        {% endif %}

    });

    /*
    **
    **  try autoplay
    **
    */
    this.play();

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:44:03.277

iOS 浏览器不支持在进行任何人工交互之前播放。自动播放不起作用，并且在通过 API 开始播放之前必须有一个触摸/单击事件。Android 浏览器现在遵循这种行为。

# ios - 总是调用 didRegisterForRemoteNotificationsWithDeviceToken 吗？

> ID：14060341
> 
> 赞同：1
> 
> 时间：2012-12-27T19:44:29.750
> 
> 标签：ios, cocoa-touch, push-notification

`didRegisterForRemoteNotificationsWithDeviceToken`即使用户不“接受”接收远程通知，是否也会调用该方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:59:34.747

不可以。您需要手动跟踪。这是相当基本的。如果用户允许您的应用接收远程通知，则此方法将被调用一次。您需要将令牌与您的用户一起保存在服务器端数据存储中。当然，如果他们后来决定在“设置”中为您的应用禁用通知，那么您就是 SOL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:05:15.293

我不相信它会被触发，但您可以检查使用此方法启用的内容：

```
- (UIRemoteNotificationType)enabledRemoteNotificationTypes 
```

这个 SO 帖子有关于如何处理大多数事情的很好的例子： [远程通知令牌处理](https://stackoverflow.com/questions/8672955/remote-notification-token-handling)

# jquery - 尝试使用 fitText.js

> ID：14060343
> 
> 赞同：0
> 
> 时间：2012-12-27T19:44:34.503
> 
> 标签：jquery

我正在尝试开始`fittext.js`工作，但没有得到任何结果，这是我正在处理的 JsFiddle：[Demo working](http://jsfiddle.net/sLXZs/)。

## html

```
<div id="austin">
    <div id="headLine">
        <h1>Austin Kitson</h1>
        <h2>Marketing & Sales</h2>
    </div>
</div> 
```

## Javascript（将选择器更改为我实际拥有的）

```
<script>
   jQuery("#headLine h1").fitText();
</script> 
```

## CSS

```
html{
    font-size: 62.5%; 
}
#austin {
    width: 20em;
    margin-left: auto;
    margin-right: auto; 
}
#headLine {
    position: absolute;
    top: 28%;
    left: 57%; 
}
#headLine h1 {
    display: block;
    width: 100%;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:19:06.077

我必须在#headline 中添加宽度

```
#headLine {
    position: absolute;
    **width:100%;**
    top: 28%;
    left: 57%; 
} 
```

# javascript - 如何在 data-win-bind 中设置 ID？

> ID：14060346
> 
> 赞同：2
> 
> 时间：2012-12-27T19:44:59.977
> 
> 标签：javascript, css, windows, html, winjs

我在使用 W8 的模板时遇到了很大的麻烦：

```
 <div class="itemtemplate" data-win-control="WinJS.Binding.Template">
    <div class="item">
        <img class="item-image" src="#" data-win-bind="src: backgroundImage; alt: title" />
        <div class="item-overlay">
            <h4 class="item-title" data-win-bind="textContent: title" style="margin-left: 0px; margin-right: 291.08px;"></h4>
            <h6 class="item-subtitle win-type-ellipsis" data-win-bind="textContent: subtitle"></h6>
        </div>
    </div>
</div> 
```

但是有些项目我需要它们具有不同的外观，我需要为它们添加一个 ID，例如此代码在 data.js 中：

```
 var sampleItems = [
        { group: sampleGroups[0], importancia: "top", title: "Item Title: 1", subtitle: "Item Subtitle: 1", description: itemDescription, content: itemContent, backgroundImage: lightGray },
        { group: sampleGroups[0], title: "Item Title: 2", subtitle: "Item Subtitle: 2", description: itemDescription, content: itemContent, backgroundImage: darkGray },
        { group: sampleGroups[0], title: "Item Title: 3", subtitle: "Item Subtitle: 3", description: itemDescription, content: itemContent, backgroundImage: mediumGray },
        { group: sampleGroups[0], title: "Item Title: 4", subtitle: "Item Subtitle: 4", description: itemDescription, content: itemContent, backgroundImage: darkGray },
        { group: sampleGroups[0], title: "Item Title: 5", subtitle: "Item Subtitle: 5", description: itemDescription, content: itemContent, backgroundImage: mediumGray }]; 
```

我如何添加 ID？，因为选项*importancia*确定了我哪个有 ID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T17:40:02.653

我使用`dynamic template binding`将值分配给项目的`id`属性`ListView`。不过，请注意，在@DominicHopton 指出的“潜在重复”中，您可能不想将 an 分配`id`给您的项目。

```
function listViewItemTemplate(item) {
    // data has has information about each item
    var data = item.data._value;

    var itemElement = document.createElement('div');
    if (data.shouldHaveId) { // check whatever condition that you need
        itemElement.id = data.id; // assign an id to your element
    }

    ...

    return {element: itemElement}
}

...

// Then you can assign the template to your listview
youListViewControl.itemTemplate = listViewItemTemplate; 
```

# javascript - 将数组传递给构造函数并保持公开

> ID：14060349
> 
> 赞同：0
> 
> 时间：2012-12-27T19:45:12.217
> 
> 标签：javascript, oop

这是我的代码：

```
var BoxUtility = function() {
    var boxList = Array.prototype.pop.apply(arguments);
};

Object.defineProperties(BoxUtility, {
    totalArea: {
        value: function(){
           var x = 0;
           for(var i = 0, len = boxList.length; i <= len - 1; i++){
              x = x + boxList[i].area;
           };
        return x;
        }
     }
}); 
```

我正在尝试为我的代码实现这种语法：

```
var boxArray = [box01, box02, box03]; 
```

box 是对象，box01.area => box 有 area 属性

```
var newElement = new BoxUtility(boxArray);
alert(newElement.totalArea); 
```

我想看到预期的结果，但我认为 boxList 在另一个范围内

我怎样才能在 defineProperties 中找到它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:41:25.080

这行得通

```
var BoxUtility = function() {
this.boxList = Array.prototype.pop.apply(arguments);
Object.defineProperties(this, {
    totalArea: {
        get: function(){
        var x = 0;
        for(var i = 0, len = this.boxList.length; i <= len - 1; i++){
            x = x + this.boxList[i].area;
        };
        return x;
        }
    }
});};

var y = new BoxUtility(boxArray);
alert(y.totalArea) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:59:04.697

您必须将值分配给`this`构造函数中的属性。

```
var BoxUtility = function() {
    // this.boxList
    this.boxList = Array.prototype.pop.apply(arguments);
};

// instance methods go on the prototype of the constructor
Object.defineProperties(BoxUtility.prototype, {
    totalArea: {

        // use get, instead of value, to execute this function when
        // we access the property.
        get: function(){
           var x = 0;

           // this.boxList
           for(var i = 0, len = this.boxList.length; i <= len - 1; i++){
              x = x + this.boxList[i].area;
           };
           return x;
        }
     }
});

var boxUtil = new BoxUtility([{area:123}, {area:456}]);
console.log(boxUtil.totalArea); // 579 
```

变量范围*始终*处于`function`级别。因此，您声明了一个仅在构造函数中可用的局部变量。但是每次调用构造函数时都会得到一个新对象（`this`）。您添加属性`this`是为了让这些属性可以在原型的实例方法中访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-06T07:25:52.013

这是在构造函数中将数组作为参数传递并声明函数原型以供公共访问的简单方法。

```
 function BoxUtility(boxArray) {
     this.boxArray = boxArray;
     this.len = boxArray.length;

  }
 Color.prototype.getAverage = function () {
      var sum = 0;
      for(let i = 0;i<this.len;i++){
       sum+=this.boxArray[i];

  }
   return parseInt(sum);
};

var red = new BoxUtility(boxArray);

alert(red.getAverage()); 
```

# php - 我如何优化我的 php 函数和 mysql 请求

> ID：14060359
> 
> 赞同：0
> 
> 时间：2012-12-27T19:45:59.830
> 
> 标签：php, optimization, tracker

我刚刚编写了这个 php 跟踪器代码，它将包含在主题中，以获得一些简单的统计信息。现在由于它将处理大量请求，因此它需要可靠且快速。我的 php 水平不是很好，所以我正在寻找帮助/最佳实践来优化这个 badboy。

我编写了一个简单的 .htaccess 文件，将所有请求重定向到 index.php，这样我就可以使用 php 处理请求 uri：`$_SERVER['REQUEST_URI'], /this-is-the-theme-slug /user-name`

```
<?php
/** MySQL Database Settings */
require dirname(__FILE__) . '/inc/database.php';

/** Klogger Log Framework*/
require dirname(__FILE__) . '/lib/KLogger.php';
$log = KLogger::instance(dirname(__FILE__).'/log/', KLogger::DEBUG);

/** Process Request String **/
$request = $_SERVER['REQUEST_URI'];
$ipaddr = $_SERVER['REMOTE_ADDR'];

$uri = explode('/',$request);
$slug = $uri[1];
$user = $uri[2];

/** Global Variables **/
$theme_id = NULL;
$account_id = NULL;

function process_request(){
    global $log, $slug, $user;
    if(!empty($slug) && !empty($user)){

        $the_slug = validate_slug($slug);
        $the_user = account_exists($user);

        if($the_slug){  // if the slug is valid
            if($the_user){  // and the user exists
                // update entry
                update_entry($user);
            }else{
                // create new entry
                create_entry($user);
            }
        }

        return true;
    }else{
        $log->logError('process_request:: Bad request');
        return false;
    }
}

function validate_slug($slug){
    global $log, $theme_id;

    $con = mysql_connect(DB_HOST,DB_USER,DB_PASSWORD);
    if(!$con){
        $log->logError('validate_slug:: Database connection failed');
        return false;   
    }else{
        $select = mysql_select_db(DB_NAME, $con);   
        $query = sprintf("SELECT id FROM ".DB_PREFIX."themes WHERE slug='%s'", mysql_real_escape_string($slug));
        $result = mysql_query($query);
        if(mysql_num_rows($result)==0){
            $log->logNotice('validate_slug:: Slug not found');
            return false;
        }else{
            $theme_id = mysql_result($result,0);
            return true;
        }   
        mysql_close($con);
    }
}

function account_exists($user){
    global $log, $account_id;

    $con = mysql_connect(DB_HOST,DB_USER,DB_PASSWORD);
    if(!$con){
        $log->logError('account_exists:: Database connection failed');
        return false;   
    }else{
        $select = mysql_select_db(DB_NAME, $con);   
        $query = sprintf("SELECT id FROM ".DB_PREFIX."stats WHERE account='%s'", mysql_real_escape_string($user));
        $result = mysql_query($query);
        if(mysql_num_rows($result)==0){
            $log->logNotice('account_exists:: Account not found');
            return false;
        }else{
            $account_id = mysql_result($result,0);
            return true;
        }   
        mysql_close($con);
    }
}

function create_entry($user){
    global $log, $ipaddr, $theme_id;

    $con = mysql_connect(DB_HOST,DB_USER,DB_PASSWORD);
    if(!$con){
        $log->logError('create_entry:: Database connection failed');
        return false;   
    }else{
        $select = mysql_select_db(DB_NAME, $con);
        $query = sprintf("INSERT INTO ".DB_PREFIX."stats (id,active,account,date,ip,hits,theme) VALUES ('','1','%s',NOW(),'".$ipaddr."','1','".$theme_id."')", mysql_real_escape_string($user));
        $result = mysql_query($query);

        $log->logNotice('create_entry:: Account created with id '.mysql_insert_id() );
        return true;
    }
    mysql_close($con);
}

function update_entry($user){
    global $log, $ipaddr, $account_id;  
    $con = mysql_connect(DB_HOST,DB_USER,DB_PASSWORD);
    if (!$con) {
        $log->logError('update_entry:: Database connection failed');
        return false;
    } else {
        $select = mysql_select_db(DB_NAME, $con);
        $query = sprintf("UPDATE ".DB_PREFIX."stats SET date=NOW(),ip='".$ipaddr."',hits=hits+1 WHERE id='".$account_id."'");
        $result = mysql_query($query);

        $log->logNotice('update_entry:: Entry with id '.$account_id.' is updated.' );
        return true;
    }
    mysql_close($con);
}

process_request(); 
```

**编辑** 我已经成功地为我的跟踪器创建了一个工作类，请参见下面的代码。如果您对速度有任何改进，请告诉我！我尝试连接 mysqlli 和 pdo，但它不起作用，显然我的主机不支持它？

```
 <?php 
    require_once(__DIR__ . '/inc/database.php');
    require_once(__DIR__ . '/lib/KLogger.php');

    Class ThemeStatsTracker
    {
        public $log;

        private $theme_name;
        private $theme_user;
        private $theme_name_db_id;
        private $theme_user_db_id;

        public function __construct()
        {
            // Setup Log 
            $this->log = KLogger::instance(dirname(__FILE__).'/log/', KLogger::DEBUG);

            // Process URI variables
            $uri = explode('/',$_SERVER['REQUEST_URI']);    
            $this->theme_name = (!empty($uri[1])) ? $uri[1] : NULL;
            $this->theme_user = (!empty($uri[2])) ? $uri[2] : NULL;

            // Handle the Request
            $this->database_connect();
            if($this->validate_theme()){
                if($this->user_entry_exists()){
                    $this->user_entry_update(); 
                }else{
                    $this->user_entry_create();
                }   
            }

            // Always serve an image as response
            $this->serve_image();
        }

        private function validate_theme()
        {
            $query  = sprintf("SELECT id FROM ".DB_PREFIX."themes WHERE slug='%s' LIMIT 1", mysql_real_escape_string($this->theme_name));
            $result = mysql_query($query);
            if (!$result){
                $this->log->logError(__FUNCTION__ . ' FAIL: ' . $query . ' BECAUSE: ' . mysql_error());
                return FALSE;
            }
            if(mysql_num_rows($result)==0){
                $this->log->logError(__FUNCTION__ . ' Theme name ' . $this->theme_name . ' NOT found');
                return FALSE;
            }else{
                $this->log->logInfo(__FUNCTION__ . ' Theme name ' . $this->theme_name . ' found');
                $this->theme_name_db_id = mysql_result($result,0);
                return TRUE;
            }
        }

        private function user_entry_exists()
        {
            $query  = sprintf("SELECT id FROM ".DB_PREFIX."stats WHERE account='%s' LIMIT 1", mysql_real_escape_string($this->theme_user));
            $result = mysql_query($query);
            if (!$result){
                $this->log->logError(__FUNCTION__ . ' FAIL: ' . $query . ' BECAUSE: ' . mysql_error());
                return FALSE;
            }
            if(mysql_num_rows($result)==0){
                $this->log->logInfo(__FUNCTION__ . ' New user ' . $this->theme_user);
                return FALSE;
            }else{
                $this->log->logInfo(__FUNCTION__ . ' Existing user ' . $this->theme_user);
                $this->theme_user_db_id = mysql_result($result,0);
                return TRUE;
            }   
        }

        private function user_entry_create()
        {
            $query  = sprintf("INSERT INTO ".DB_PREFIX."stats (id,active,account,date,ip,hits,theme) VALUES ('','1','%s',NOW(),'".$_SERVER['REMOTE_ADDR']."','1','".$this->theme_name_db_id."')", mysql_real_escape_string($this->theme_user));
            $result = mysql_query($query);
            if (!$result){
                $this->log->logError(__FUNCTION__ . ' FAIL: ' . $query . ' BECAUSE: ' . mysql_error());
                return FALSE;
            }
            $this->log->logNotice(__FUNCTION__ . ' New user created with id ' . mysql_insert_id());
            return TRUE;
        }

        private function user_entry_update()
        {
            $query  = sprintf("UPDATE ".DB_PREFIX."stats SET date=NOW(),ip='".$_SERVER['REMOTE_ADDR']."',hits=hits+1 WHERE id='".$this->theme_user_db_id."' LIMIT 1");
            $result = mysql_query($query);
            if (!$result){
                $this->log->logError(__FUNCTION__ . ' FAIL: ' . $query . ' BECAUSE: ' . mysql_error());
                return FALSE;
            }
            $this->log->logNotice(__FUNCTION__ . ' User with id ' . $this->theme_user_db_id . 'updated');
            return TRUE;
        }

        private function serve_image()
        {
            header("Content-type: image/gif");
            header("Content-length: 43");
            $fp = fopen("php://output","wb");
            fwrite($fp,"GIF89a\x01\x00\x01\x00\x80\x00\x00\xFF\xFF",15);
            fwrite($fp,"\xFF\x00\x00\x00\x21\xF9\x04\x01\x00\x00\x00\x00",12);
            fwrite($fp,"\x2C\x00\x00\x00\x00\x01\x00\x01\x00\x00\x02\x02",12);
            fwrite($fp,"\x44\x01\x00\x3B",4);
            fclose($fp);
        }

        private function database_connect()
        {
            $con = mysql_connect(DB_HOST,DB_USER,DB_PASSWORD);
            if(!$con){
                $this->log->logError(__FUNCTION__ . ' FAIL: ' . $query . ' BECAUSE: ' . mysql_error());
                return FALSE;
            }
            $select = mysql_select_db(DB_NAME, $con);
            if (!$select){
                $this->log->logError(__FUNCTION__ . ' FAIL: ' . $query . ' BECAUSE: ' . mysql_error());
                return FALSE;
            }
        }       
    }

    $stats = new ThemeStatsTracker(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:04:10.730

每当存在潜在的性能问题时，您可以打赌它在 I/O 子系统和现代 Web 应用程序中，这通常意味着数据库，因此您可以找到并修复性能问题。这是我的简要经验法则。

1.  避免 SELECT * 而是只选择您实际需要的列。
2.  在每个复杂查询上使用 EXPLAIN SELECT。“复杂”是指任何包含一个或两个以上 WHERE 子句元素或使用多个表的查询。
3.  在 WHERE、JOIN、ORDER 或 GROUP 中使用的每一列都有索引
4.  *对并非绝对需要*完整表扫描的每个查询使用 LIMIT 子句，包括 UPDATE 查询。

这些是您可以应用于查询语句的一般原则。

对于上面代码中的细节，让您的服务器*连接并在脚本开始时**选择*一次db 。连接和选择在范围上实际上是全局的。删除关闭连接语句。PHP 垃圾收集器将为您完成这些工作。

您可能需要阅读 query() 函数。大多数数据库函数返回值，通常是资源或失败时返回 FALSE。您的脚本应该测试这些值并处理这些行为。MySQL 不是黑匣子；由于您无法控制的原因，它可能而且将会失败。发生这种情况时，您希望记录错误并发出警报。

您可能会考虑用面向对象的表示法重写它，对 $slug 和 $log 之类的东西使用受保护的类属性。它将帮助您避免使用 global 语句，这肯定会导致混淆，因为它会破坏封装。

HTH，~雷

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:58:08.313

出于比较目的，这就是我使用 OOP 表示法编写跟踪器的方式。我从来没有测试过这个，但它似乎非常接近正确。此外，PHP 有一个内置函数来记录错误和通知。[http://php.net/manual/en/function.error-log.php](http://php.net/manual/en/function.error-log.php)

```
<?php // RAY_temp_ckdt.php
error_reporting(E_ALL);

/** MySQL Database CONSTANT DEFINITIONS */
require_once( __DIR__ . '/inc/database.php');

/** Klogger Log Framework*/
require_once( __DIR__ . '/lib/KLogger.php');
$log = KLogger::instance(dirname(__FILE__).'/log/', KLogger::DEBUG);

Class Tracker
{
    protected $return, $slug, $user, $theme_id, $account_id;
    public function __construct($log)
    {
        $this->return = TRUE;
        $this->log    = $log;
        $con = mysql_connect(DB_HOST,DB_USER,DB_PASSWORD);
        if(!$con){
            $this->log->logError('DB FAIL: ' . mysql_error());
        }
        $select = mysql_select_db(DB_NAME, $con);
        if (!$select){
            $this->log->logError('DB FAIL: ' . mysql_error());
            return FALSE;
        }
        $uri = explode(DIRECTORY_SEPARATOR, $_SERVER['REQUEST_URI']);
        $this->slug = (!empty($uri[1])) ? $uri[1] : NULL;
        $this->user = (!empty($uri[2])) ? $uri[2] : NULL;

        if(empty($this->slug) || !empty($this->user)){
            $this->log->logError(__FUNCTION__ . ": Bad request");
            return FALSE;
        }
        $the_slug = validate_slug($this->slug);
        $the_user = account_exists($this->user);

        if($the_slug){
            if($the_user){
                update_entry();
            }else{
                create_entry();
            }
        }
        return $this->return;
    }

    protected function validate_slug(){
        $query  = sprintf("SELECT id FROM ".DB_PREFIX."themes WHERE slug='%s' LIMIT 1", mysql_real_escape_string($this->slug));
        $result = mysql_query($query);
        if (!$result){
            $this->log->logError(__FUNCTION__ . "FAIL: $query BECAUSE: " . mysql_error());
            $this->return = FALSE;
            return FALSE;
        }
        if(mysql_num_rows($result)==0){
            $this->log->logNotice(__FUNCTION__ . ": Slug $this->slug not found");
            $this->return = FALSE;
            return FALSE;
        }else{
            $this->theme_id = mysql_result($result,0);
            $this->return = TRUE;
            return TRUE;
        }
    }

    protected function account_exists(){
        $query  = sprintf("SELECT id FROM ".DB_PREFIX."stats WHERE account='%s' LIMIT 1", mysql_real_escape_string($this->user));
        $result = mysql_query($query);
        if (!$result){
            $this->log->logError(__FUNCTION__ . "FAIL: $query BECAUSE: " . mysql_error());
            $this->return = FALSE;
            return FALSE;
        }
        if(mysql_num_rows($result)==0){
            $this->log->logNotice(__FUNCTION__ . ": Account $this->user not found");
            $this->return = FALSE;
            return FALSE;
        }else{
            $this->account_id = mysql_result($result,0);
            $this->return = TRUE;
            return TRUE;
        }
    }

    protected function create_entry(){
        $query  = sprintf("INSERT INTO ".DB_PREFIX."stats (id,active,account,date,ip,hits,theme) VALUES ('','1','%s',NOW(),'".$_SERVER['REMOTE_ADDR']."','1','".$theme_id."')", mysql_real_escape_string($this->user));
        $result = mysql_query($query);
        if (!$result){
            $this->log->logError(__FUNCTION__ . "FAIL: $query BECAUSE: " . mysql_error());
            $this->return = FALSE;
            return FALSE;
        }

        $this->log->logNotice(__FUNCTION__ . ': Account created with id '.mysql_insert_id() );
        $this->return = TRUE;
        return TRUE;
    }

    public function update_entry(){
        $query  = sprintf("UPDATE ".DB_PREFIX."stats SET date=NOW(),ip='".$_SERVER['REMOTE_ADDR']."',hits=hits+1 WHERE id='".$this->account_id."' LIMIT 1");
        $result = mysql_query($query);
        if (!$result){
            $this->log->logError(__FUNCTION__ . "FAIL: $query BECAUSE: " . mysql_error());
            $this->return = FALSE;
            return FALSE;
        }

        $this->log->logNotice(__FUNCTION__ . ': Entry with id '.$account_id.' is updated.' );
        $this->return = TRUE;
        return TRUE;
    }
} // END CLASS TRACKER

// TRACK THIS REQUEST
$x = new Tracker($log); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T17:51:36.703

优化俱乐部规则：

1.  优化俱乐部的第一条规则是，**你不要优化**。
2.  优化俱乐部的第二条规则是，**没有测量就不要优化**。
3.  如果您的应用程序运行速度比底层传输协议快，那么优化就结束了。
4.  一次一个因素。
5.  没有市场机器人，没有市场机器人时间表。
6.  只要需要，测试就会继续进行。
7.  如果这是您在优化俱乐部的第一个晚上，您必须编写一个测试用例。

最重要的规则是#1。如果你不知道你的代码很慢，那么不要试图加快它。然后，对于＃2，如果您认为需要加快速度，则必须衡量它慢的原因。这可以是低技术含量，例如在`print microtime()`整个代码中进行调用，以便您可以查看单个代码块需要多长时间才能运行，或者您可以使用[XDebug](http://xdebug.org/)等分析工具来准确发现哪些代码行需要多长时间运行。

无论你做什么，都不要使用工作代码，而是开始尝试让它更快。

（而且，与您的问题无关，您应该使用参数化查询以确保安全和方便：[http](http://bobby-tables.com/php.html) ://bobby-tables.com/php.html有示例）

# backbone.js - 如何在 Backbone.js 的模型中存储对集合的引用？

> ID：14060365
> 
> 赞同：0
> 
> 时间：2012-12-27T19:46:21.423
> 
> 标签：backbone.js

创建新集合（选择）时，我想在其上设置一个属性（例如：_question），该属性链接回包含模型（MultipleChoiceQuestion）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:46:21.423

这花了我很多时间来弄清楚，所以以防将来有人遇到这个问题......这是我最终编写的代码。

我发现，与 Model 不同，Collection 的 initialize() 函数接受 2 个参数。第一个是`models`（这是您可以用来初始化集合的模型列表）。第二个是`options`（你想要什么）。有一段时间，我的 Collection 最初只有 1 个模型，但我不知道为什么。原来我把我的传给`options`了`models`田野。

包含模型：

```
m.MultipleChoiceQuestion = Backbone.Model.extend({
    initialize: function(){
        //NULL as first parameter because we don't want models
        this.choices = new c.Choices(null, { 
            _question: this //this is referring to current question
        }); //choices Collection is this
    }
}); 
```

该系列

```
c.Choices = Backbone.Collection.extend({
    initialize: function(models, options){
        this._question = options._question;
    },
    model: m.Choice
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:24:26.710

我实际上发现虽然我的第一个答案在技术上有效，但有一个插件可以处理在模型中存储集合（并创建适当的 One->Many、One->One 和 Many->One 关系

[https://github.com/PaulUithol/Backbone-relational](https://github.com/PaulUithol/Backbone-relational)

使用该插件，您将父问题存储为属性

```
m.MultipleChoiceQuestion = Backbone.RelationalModel.extend({
    relations: [{
        type: Backbone.HasMany,
        key: 'choices', //says to store the collection in the choices attribute
        relatedModel: m.Choice, //knows we are talking about the choices models
        includeInJSON: true, //when we do toJSON() on the Question we want to show serialize the choices fully
        reverseRelation: {
            key: 'question', //in the CHOICE object there will be an attribute called question which contains a reference to the question 
            includeInJSON: false //when we do .toJSON on a CHOICE we don't want to show the question object (or maybe we want to show the ID property in which case we set it to "id")
        }
    }],
    coolFunction: function () {
        this.get('choices').each(function(choice){
            choice.doSomethingChoicey();
        });
    }
}); 
```

所以现在如果我们在选择模型中，我们可以完全引用父问题中的任何内容：

```
m.Choice = m.RelationalModel.extend({
    coolFunction: function(){
        this.get('question').doSomemethingQuestiony();
        var question_numer = this.get('question').get('question_number');
    }
}); 
```

# c# - 除非选择文件夹，否则不显示 Outlook 2010 文件夹上下文菜单

> ID：14060370
> 
> 赞同：0
> 
> 时间：2012-12-27T19:46:41.690
> 
> 标签：c#, contextmenu, outlook-addin

我正在为我们的 Outlook 插件自定义上下文菜单，并且正在使用功能区 xml。该自定义上下文菜单应仅显示在我们解决方案的文件夹中。问题是，我为 getVisible 回调指定的函数只有在选择我们的文件夹时才被调用，然后右键单击。但是，例如，如果选择了收件箱并且我右键单击我们的一个文件夹，则该功能不会被触发，我只会看到默认的上下文菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:31:53.370

我的错。我正在检查当前文件夹，而不是当前选择。在我更改了我的函数之后，它将 IRibobnControl 对象转换为选择，然后使用它的内容，一切都很好

# c# - 导入所有子类，如 Java，但在 C# 中

> ID：14060379
> 
> 赞同：7
> 
> 时间：2012-12-27T19:47:21.270
> 
> 标签：c#

这是一个愚蠢的问题，但我无法弄清楚问谷歌的术语。

在Java中，如果我想导入所有子类，我会使用类似

```
java.util.* 
```

并且所有的 util 都将被导入。

首先，我在 C# 中所做的事情的正确术语是什么，以便我可以更有效地开始使用 Google。我在导入命名空间吗？图书馆？子类？（你能说我是新手吗？）

其次，既然我来了，那这在C#中是如何实现的呢？

PS-我确实点击了stackOverflow向我抛出的每个相关问题，看看答案是否会弹出。没运气。我简直无法用语言来描述我在寻找什么。这个例子应该做的很好，但是......任何可以花点时间向我解释术语或者简单地指出我可以（简而言之，我有几本书可以长期使用）的人伟大的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-27T19:51:44.513

首先，让我们区分**程序集引用**和**命名空间**。

程序集是您在 c# 项目中添加引用的内容，它们是包含您需要的实际类的库，通常以 DLL 文件的形式找到。.net 框架包含许多这样的程序集，Visual Studio 将尝试引用您项目中最常用的程序集（例如，对于 WinForms 项目，它将自动添加对 的引用`System.Drawing.dll`）。

**命名空间**是程序集中类的逻辑分区。

一旦你在项目中引用了一个程序集，所有命名空间中的所有类都可以使用，只要你提供它们的全名。

这就是`using`指令的用武之地。它只是语法糖，不必一直写很长的名字。

例如，假设您的项目引用`System.Drawing.dll`程序集，则必须使用该程序集的全名来限定该程序集中的类，例如

```
System.Drawing.Imaging.BitmapData 
```

因为这很烦人并且使代码膨胀，如果你开始你的`.cs`文件

```
using System.Drawing.Imaging; 
```

然后，您可以仅使用 name 实例化一个类`BitmapData`。这仅适用`.cs`于您添加`using`指令的文件，而不适用于整个项目。此外，重要的是要注意`using`一个命名空间不会引入所有嵌套的命名空间，您必须`using`单独使用每个命名空间。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-27T19:51:56.603

你必须更新你的 Google-fu

[http://www.harding.edu/fmccown/java_csharp_comparison.html#namespaces](http://www.harding.edu/fmccown/java_csharp_comparison.html#namespaces)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-27T19:51:42.843

它可以称为导入/引用/使用命名空间。

这种语言特性在 c# 中不可用。

一点解释：命名空间可以分布在多个库中。因此，当您使用命名空间时，它可能会从多个引用的程序集中引用它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-27T19:52:18.087

它被调用`namespace`并由关键字导入`using`。例如：

```
using System; 
```

此语句使您能够引用该命名空间中存在的所有类。但是，它们不允许您引用已声明的子命名空间中的任何类`namespace`。您必须分别声明每个`namespace`。例如：

```
using System;
using System.Text; 
```

当然，您需要在指定`using`指令的项目中添加适当的引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T19:51:49.470

在 .Net 中，您首先需要确保存在一个包含您要导入的命名空间的引用程序集。一旦该引用存在，您可以使用“using”指令将该命名空间带入类中，这样就不必完全限定所有对象名称。[您可以在 MSDN](http://msdn.microsoft.com/en-us/library/sf0df423%28v=vs.100%29.aspx)上找到有关此指令的更多信息。

如果我误解了，请告诉我，我会尽力让您指出正确的方向。

# css - ajax加载时如何覆盖a的CSS？

> ID：14060380
> 
> 赞同：0
> 
> 时间：2012-12-27T19:47:28.363
> 
> 标签：css

我在这里有一个示例，您可以单击一行并在其下方插入一个新行。新行包含一个新表。

[见小提琴](http://jsfiddle.net/houmie/33b3M/6/)

正如您从上面的小提琴中看到的那样，每个表格分别在 CSS 上悬停。现在的问题是从父表悬停在第二个表上。

![在此处输入图像描述](../Images/77a4e49d37698298efa8e580dae95225.png)

当悬停在新行上时，我宁愿覆盖父表的悬停效果，以便我可以看到子表的悬停效果：

![在此处输入图像描述](../Images/ddeefdbacf7963361fb5ed08c4b2d729.png)

我试图阻止父表的 CSS 像这样应用于新行：

```
table.cb_table-hover tbody tr:hover td:not(.override),
table.cb_table-hover tbody tr:hover th:not(.override){
      background-color: #cfe2e8;  
} 
```

正如您在这个[新小提琴](http://jsfiddle.net/houmie/33b3M/7/)中看到的：

然而结果并不像我预期的那样。我会错过什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:54:35.507

[尝试这个。](http://jsfiddle.net/33b3M/11/)

## CSS

```
table.cb_table-hover > tbody > tr:hover > td:not(.override),
table.cb_table-hover > tbody > tr:hover > th:not(.override){
  background-color: #cfe2e8;  
} 
```

让我知道这是否对您有帮助。

我刚刚添加`>`到目标直接子级

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:01:01.493

只需使用 CSS 特异性：

```
.cb_inline_block {
    display:inline-block;
}

.cb_table-hover tr:hover td,
.cb_table-hover tr:hover th{
      background-color: #cfe2e8;  
}

.cb_table-hover .sub_table-hover tr:hover td,
.cb_table-hover .sub_table-hover tr:hover th{
      background-color: #cfe2e8;  
} 
```

# sql - 使用连接以防 sql

> ID：14060383
> 
> 赞同：1
> 
> 时间：2012-12-27T19:47:40.797
> 
> 标签：sql, left-join, case

我正在尝试进行查询，但这是不对的。

我想做的是申请加入以防万一

我的查询是

```
SELECT LEFT(Student_First_Name,LEN(Student_First_Name)-LEN(Name_Lookup_Table.Dirty_Name)),Name_Lookup_Table.Dirty_Name, Name_Lookup_Table.Standard_Name

case
when Transformed_All_Student.Student_First_Name like '% '+Name_Lookup_Table.Dirty_Name
then
from Transformed_All_Student left join Name_Lookup_Table 
on Transformed_All_Student.Student_First_Name like '% '+Name_Lookup_Table.Dirty_Name

when Transformed_All_Student.Student_First_Name like '% '+Name_Lookup_Table.Dirty_Name+'%'
then from Transformed_All_Student left join Name_Lookup_Table on Transformed_All_Student.Student_First_Name like '% '+Name_Lookup_Table.Dirty_Name+'%'

when Transformed_All_Student.Student_First_Name like Name_Lookup_Table.Dirty_Name+'% '
then from Transformed_All_Student left join Name_Lookup_Table on Transformed_All_Student.Student_First_Name like Name_Lookup_Table.Dirty_Name+'% ' 
```

谁能帮忙？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:55:04.267

由于您正在尝试以这种方式做事，我认为性能不是主要问题。另外，我假设这是针对 MS SQL 的，因为没有另外指定。一般形式如下：

```
SELECT 1
FROM foo f
JOIN bar b
   ON CASE WHEN f.col1 = 'X' then 'Y' ELSE  END = b.col1 
```

获得相同结果的另一种可能方法是使用子查询：

```
SELECT 1
FROM (
    SELECT *, CASE WHEN f.col1 = 'X' then 'Y' ELSE  END JoinCol
    FROM foo
) f
JOIN bar b
    ON f.JoinCol = b.col1 
```

可能还有其他几种方法。如果您可以快速定义所涉及的表以及您想要在输出中使用的列，那将是最好的。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T19:58:42.340

我不认为你可以把 FROM 以防万一。一种可能的解决方案是使用 UNION。您可能可以对此进行优化：

```
 SELECT LEFT(Student_First_Name
        , LEN(Student_First_Name)-LEN(nlt.Dirty_Name))
        , nlt.Dirty_Name
        , nlt.Standard_Name

    FROM Transformed_All_Student tas
            LEFT JOIN Name_Lookup_Table nlt
                        ON tas.Student_First_Name like '% '+nlt.Dirty_Name
    WHERE tas.Student_First_Name like '% '+nlt.Dirty_Name

    UNION

    SELECT LEFT(Student_First_Name
        , LEN(Student_First_Name)-LEN(nlt.Dirty_Name))
        , nlt.Dirty_Name
        , nlt.Standard_Name

    FROM Transformed_All_Student tas 
            LEFT JOIN Name_Lookup_Table nlt 
                ON tas.Student_First_Name like '% '+nlt.Dirty_Name+'%'

    WHERE tas.Student_First_Name like '% '+nlt.Dirty_Name+'%'

    UNION

    SELECT LEFT(Student_First_Name
        , LEN(Student_First_Name)-LEN(nlt.Dirty_Name))
        , nlt.Dirty_Name
        , nlt.Standard_Name
    FROM Transformed_All_Student tas 
            LEFT JOIN Name_Lookup_Table nlt 
                    ON tas.Student_First_Name like nlt.Dirty_Name+'% '

    WHERE tas.Student_First_Name like nlt.Dirty_Name+'% ' 
```

# wordpress - Why won't WordPress load thickbox and media-upload scripts?

> ID：14060384
> 
> 赞同：1
> 
> 时间：2012-12-27T19:47:42.657
> 
> 标签：wordpress, thickbox

I'm working on a plugin that uses thickbox and media-upload to set some images. Neither will load using this code:

```
 function add_my_files() {
        echo 'happy happy happy';
        wp_register_style( 'adminstyles', plugins_url('/css/slider.css', __FILE__));
        wp_enqueue_style( 'adminstyles' );
        wp_enqueue_style('thickbox');

        wp_enqueue_script('media-upload');
        wp_enqueue_script('thickbox');

        wp_register_script('hdjs',plugins_url('/js/slider.js', __FILE__),array('media-upload','thickbox'),'',true);
        wp_enqueue_script('hdjs');
    }

add_action( 'admin_init', 'add_my_files' ); 
```

my css and js files load but not thickbox and media-upload.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:54:22.783

将资产文件包含在 WP 中的正确挂钩是`admin_enqueue_scripts`：

注意：我建议您也使用`get_current_screen`（参见`is_my_admin_screen()`下面的定义）在您实际需要时仅包含您的 js/css 文件。

```
add_action('admin_enqueue_scripts', 'add_my_files');

function add_my_files()
{
    /*
     * a good WP citizen only loads
     * their javascript/css where it is needed
     */
    if ( ! is_my_admin_screen()) // defined below
        return;

    wp_register_style('adminstyles', plugins_url('/css/slider.css', __FILE__));
    wp_enqueue_style('adminstyles');
    wp_enqueue_style('thickbox');

    wp_enqueue_script('media-upload');
    wp_enqueue_script('thickbox');

    wp_register_script('hdjs', plugins_url('/js/slider.js', __FILE__), array('media-upload', 'thickbox'), '', true);
    wp_enqueue_script('hdjs');
}

function is_my_admin_screen()
{
    $screen = get_current_screen();

    if (is_object($screen) && $screen->id == 'my_plugin_page_id') // var_dump($screen->id); find your own id
        return true;
    else
        return false;
} 
```

参考：[http](http://codex.wordpress.org/Plugin_API/Action_Reference/admin_enqueue_scripts) ://codex.wordpress.org/Plugin_API/Action_Reference/admin_enqueue_scripts 参考：http: [//codex.wordpress.org/Function_Reference/get_current_screen](http://codex.wordpress.org/Function_Reference/get_current_screen)

* * *

除了希望你使用一个类来包装你的所有插件，否则你会遇到比这更糟糕的问题。

请反馈。我对这个问题很感兴趣，因为 WP 插件把食物和啤酒放在了我的桌子上。

# android - osmdroid displays an empty grid

> ID：14060389
> 
> 赞同：7
> 
> 时间：2012-12-27T19:47:53.840
> 
> 标签：android, osmdroid

I wanted to try out having OpenStreetMap integration by osmdroid, but I got stuck at an issue where I have no idea what is missing. The scenario is as follows:

**Symptom: Map widget gets displayed but only with an empty grid.**

This is in my Activity class:

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    MapView mapView = new MapView(this, 256);
    mapView.setTileSource(TileSourceFactory.MAPNIK);
    mapView.setClickable(true);
    mapView.setBuiltInZoomControls(true);
    setContentView(mapView);
} 
```

(I tried selecting various TileSources with seemingly no difference)

My Manifest also includes these permissions (as a child of `<manifest>`, after `<uses-sdk>`):

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

...and my emulator is otherwise connected to the internet, eg. web browsers work.

osmdroid and slf4j are in the build path. The app compiles without a problem and generates no exceptions.

What could be wrong?

Many thanks!

**SOLVED: This was caused by my emulator not having an external storage to cache map tiles.**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T09:57:11.100

我对 OSMdroid 也很陌生，但尝试这样做吗？

```
setContentView(R.layout.offline_map_activity);
mapView = (MapView) findViewById(R.id.openmapview); 
```

您还需要在 res/layouts 中有 offline_map_activity.xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

    <org.osmdroid.views.MapView
        android:id="@+id/openmapview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>
</LinearLayout> 
```

希望这对你有用。至少这适用于我的代码:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-07-31T21:49:05.647

我觉得你的设备没有 SD。您已更改缓存路径

```
OpenStreetMapTileProviderConstants.setCachePath(this.getFilesDir().getAbsolutePath()); 
```

# c++ - WINAPI 按钮背景

> ID：14060394
> 
> 赞同：0
> 
> 时间：2012-12-27T19:48:11.193
> 
> 标签：c++, windows, winapi, win32gui

在 WINAPI 中，我创建了一个按钮，例如：

```
case WM_CREATE:
{
    Start = CreateWindowEx(WS_EX_TRANSPARENT, "Button", "Start", WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON, 20, 50, 75, 25, window, (HMENU)ID_START, hInstance, NULL);
            break;
} 
```

该按钮如下所示： ![在此处输入图像描述](../Images/e728a793f5faf785ee6e95f4b0a174d2.png)

但我需要它看起来像这样（我在.Net中做了）：

![在此处输入图像描述](../Images/9d2f0e59635503b081f358f684188ad1.png)

我怎样才能摆脱那个黑色边框/背景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:24:45.837

```
 Start = CreateWindowEx(WS_EX_TRANSPARENT, ...); 
```

因为您使用了 WS_EX_TRANSPARENT 样式标志，所以您得到了黑色轮廓。不清楚你为什么使用它，当你使用 Button 控件时，你无能为力。否则，它可能是[最不被理解的风格标志](http://blogs.msdn.com/b/oldnewthing/archive/2012/12/17/10378525.aspx)。改为传递 0 以获得正常外观的按钮。

否则，获得 .NET 按钮的*确切*外观是一个失败的原因，Winforms 不使用内置的 Button 控件。它创建自己的，使用自定义渲染器来获得渐变外观。复制本机代码需要大量工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:59:59.953

**编辑**：我错误地将边框识别为默认按钮边框。正如大卫赫弗曼指出的那样，事实并非如此。也就是说，我现在已经[重现了那个边框效果](https://gist.github.com/4396146)；程序启动时没有边框，但只需将鼠标悬停在左侧按钮上即可创建边框 - 至少在 Windows 7 中是这样。

原答案如下：

* * *

黑色边框是因为它是默认的。您不应该干扰系统对默认按钮等的可视化。用户依赖这些提示。

要更改字体，也许像 WM_SETFONT？

免责声明：我没有尝试过。您可能需要处理 WM_CTRLCOLOR 或类似的东西。试一试，最后，如果默认按钮不适合您，只需实现您自己的按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T20:01:19.997

我认为您看到的边框是因为该按钮具有“默认按钮”属性。如果你把它关掉，那么它将有一个正常的边框。Default 属性只是告诉 Win32 如果用户在对话框/窗体上按 ENTER 键激活哪个按钮。如果您只有一个按钮，那么它将始终具有默认属性。如果您添加第二个，则不会。

该属性是**BS_DEFPUSHBUTTON**属性，因此在您的 CreateWindowEx 调用中，您应该能够执行以下操作：

```
Start = CreateWindowEx(WS_EX_TRANSPARENT, "Button", "Start", WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON | ~BS_DEFPUSHBUTTON, 20, 50, 75, 25, window, (HMENU)ID_START, hInstance, NULL); 
```

如果没有，您必须使用**ModifyStyle**或**ModifyStyleEx**进行设置，并将其传递给“Remove”参数。我忘记了必须传入哪个特定样式，但如果我没记错的话，它是普通样式参数，而不是 EX 参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T20:20:31.447

我没有对此进行测试，但尝试创建这样的按钮：

```
Start = CreateWindowEx(0, WC_BUTTON, "Start", WS_CHILD | WS_VISIBLE | BS_PUSHBUTTON | BS_TEXT, 20, 50, 75, 25, window, (HMENU)ID_START, hInstance, NULL);
        break; 
```

它还可能取决于您如何创建主窗口。您可以发布创建主窗口的代码吗？

# asp.net - 如何为转发器中的第一项使用不同的样式？

> ID：14060400
> 
> 赞同：5
> 
> 时间：2012-12-27T19:48:24.893
> 
> 标签：asp.net, c#-4.0, asprepeater

对于第一项我想使用以下内容`<div>`：

```
<div class="six columns">
  <a href="">
    <img src="" />
      <h3>Israeli Embassy Promotes Peace</h3>
      <h4>At a time when Israel is facing threats of...</h4>
  </a>
</div> 
```

而这休息我想使用以下`<div>`：

```
<div class="six columns">
    <ul>
         <li><a href="">
             <h3>This is the first alskdjlak s</h3>
             </a></li>
         <li><a href="">
             <h3>asd sad asd asd asdasdasdas d</h3>
             </a></li>
         <li><a href="">
             <h3>dsad asd asd asd asd asd asd</h3>
             </a></li>
    </ul>
</div> 
```

**我该怎么做？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:03:28.407

您首先在后面的代码中使用一个整数，即从 1 开始。然后在中继器上检查该值，然后您会像这样：

```
<asp:Repeater ID="Repeater1" runat="server">
    <ItemTemplate>
        <% if (iCounter == 1) { %>
            <br />First line id: <%# GetID(Container.DataItem) %>
        <% } else { %>
            <br />Next lines id: <%# GetID(Container.DataItem) %>
        <% }
            iCounter++;
        %>
    </ItemTemplate>
</asp:Repeater> 
```

和后面的代码：

```
public int iCounter = 1;

List<int> oMainIds = new List<int>();

protected void Page_Load(object sender, EventArgs e)
{
    for (int i = 0; i < 10; i++)
    {
        oMainIds.Add(i);
    }

    Repeater1.DataSource = oMainIds;
    Repeater1.DataBind();
}

public int GetID(object oItem)
{
    return (int)oItem;
} 
```

请注意，为了测试，我在这里放置了 10 根数据线。此示例呈现：

```
First line id: 0 
Next lines id: 1 
Next lines id: 2 
Next lines id: 3 
Next lines id: 4 
Next lines id: 5 
Next lines id: 6 
Next lines id: 7 
Next lines id: 8 
Next lines id: 9 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-18T14:23:00.020

只是对 Aristos 答案的更新，没有获取 ID 的代码隐藏方法。

```
<asp:Repeater ID="Repeater1" runat="server">
  <ItemTemplate>
   <asp:Panel ID="pnlFirst" runat="server" Visible="<%# (Repeater1.DataSource as List<int>).IndexOf((int)Container.DataItem) ==0 %>">
     <br />First Item
   </asp:Panel>
   <asp:Panel ID="pnlRest" runat="server" Visible="<%# (Repeater1.DataSource as List<int>).IndexOf((int)Container.DataItem) !=0 %>">
     <br />
     Item:  <%# (Repeater1.DataSource as List<int>).IndexOf((int)Container.DataItem) %>
   </asp:Panel>
 </ItemTemplate>
</asp:Repeater> 
```

在后面的代码中

```
List<int> oMainIds = new List<int>();

protected void Page_Load(object sender, EventArgs e)
{
   for (int i = 0; i < 10; i++)
   {
     oMainIds.Add(i);
   }

   Repeater1.DataSource = oMainIds;
   Repeater1.DataBind();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T19:59:02.847

将您的 div 包装在 PlaceHolder 控件中，并使用 e.Item.ItemIndex 在转发器的 OnItemCreated 事件中设置 PlaceHolders 的可见性，以确定当前项目是否为第一个。

或者使它们成为服务器端 div（使用 runat=server）并直接以 sme 方式设置 div 的可见性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T20:34:52.653

使用 CSS。

```
.six_columns ul li
{
    /* Item style */
}

.six_columns ul li:first-child 
{
    /* First item style */
} 
```

还有一些[通过 CSS 编辑内容的方法。](http://www.w3schools.com/cssref/pr_gen_content.asp)

# php - File upload doesn't work

> ID：14060403
> 
> 赞同：0
> 
> 时间：2012-12-27T19:48:47.610
> 
> 标签：php, html

```
<html>
<body>

<form action="upload.php" method="post"
enctype="multipart/form-data">
<label for="file">Filename:</label>
<input type="file" name="file_field"><br>
<input type="submit" name="submit" value="Submit">
</form>

</body>
</html> 
```

The php code below doesn't work. It doesn't check for anything at all. It doesn't show maximum file size error. what it does is that, it accepts any file I try to upload and inserts the file name to database. It doesn't check for any restrictions I set for the file upload. any idea? txs

```
<?php

function uploadFile ($check_image = false, $random_name = false) {

//Config Section    
//Set file upload path
$path = 'c:/xampp/htdocs/images/'; //with trailing slash
//Set max file size in bytes
$max_size = 1000000;
//Set default file extension whitelist
$whitelist_ext = array('jpg','png','gif');
//Set default file type whitelist
$whitelist_type = array('image/jpeg', 'image/png','image/gif');

//The Validation
// Create an array to hold any output
$out = array('error'=>null);

if (!$_FILES['file_field']) {
$out['error'][] = "Please specify a valid form field name";           
}

if (!$path) {
$out['error'][] = "Please specify a valid upload path";               
}

if (count($out['error'])>0) {
return $out;
}

//Make sure that there is a file
if((!empty($_FILES['file_field'])) && ($_FILES['file_field']['error'] == 0)) {

// Get filename
$file_info = pathinfo($_FILES['file_field']['name']);
$name = $file_info['filename'];
$ext = $file_info['extension'];

//Check file has the right extension           
if (!in_array($ext, $whitelist_ext)) {
$out['error'][] = "Invalid file Extension";
}

//Check that the file is of the right type
if (!in_array($_FILES['file_field']["type"], $whitelist_type)) {
$out['error'][] = "Invalid file Type";
}

//Check that the file is not too big
if ($_FILES['file_field']["size"] > $max_size) {
$out['error'][] = "File is too big";
}

//If $check image is set as true
if ($check_image) {
if (!getimagesize($_FILES['file_field']['tmp_name'])) {
$out['error'][] = "Uploaded file is not a valid image";
}
}

//Create full filename including path
if ($random_name) {
// Generate random filename
$tmp = str_replace(array('.',' '), array('',''), microtime());

if (!$tmp || $tmp == '') {
$out['error'][] = "File must have a name";
}     
$newname = $tmp.'.'.$ext;                                
} else {
$newname = $name.'.'.$ext;
}

//Check if file already exists on server
if (file_exists($path.$newname)) {
$out['error'][] = "A file with this name already exists";
}

if (count($out['error'])>0) {
//The file has not correctly validated
return $out;
} 

if (move_uploaded_file($_FILES['file_field']['tmp_name'], $path.$newname)) {
//Success
$out['filepath'] = $path;
$out['filename'] = $newname;
return $out;
} else {
$out['error'][] = "Server Error!";
}

} else {
$out['error'][] = "No file uploaded";
return $out;
}      
}
$con = mysql_connect("localhost","root","");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}
mysql_select_db("simple_login", $con);

mysql_query("INSERT INTO photo (photo)
VALUES ('{$_FILES['file_field']['tmp_name']}')");

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-27T19:53:53.703

错误在这里：

```
//Make sure that there is a file
if((!empty($_FILES['file_field'])) && ($_FILES['file_field']['error'] == 0)) { 
```

应该：

```
//Make sure that there is a file
if((!empty($_FILES['file_field'])) && (count($_FILES['file_field']['error']) == 0)) { 
```

# macos - 如何在 Mac OS X 10.6.8 中通过终端访问 Apache 错误日志？

> ID：14060407
> 
> 赞同：23
> 
> 时间：2012-12-27T19:48:59.467
> 
> 标签：macos, ruby-on-rails-3.1, apache2

从 Rails 3.0 升级到 3.1 后，我无法在远程计算机上提供我的 rails 应用程序。所以我想看看当 Apache 尝试启动我的应用程序但它失败时到底出了什么问题。我怎样才能找到 Apache（或者可能是Passenger？）通过终端抛出的错误？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-27T20:11:07.180

在终端，你试过了吗

```
cat /var/log/apache2/error_log 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-24T05:49:12.750

只是为了补充其他答案，我使用的是 10.9.3 版本，对我来说，地址是：

```
/private/var/log/apache2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-29T20:11:51.803

尝试：

猫 /private/var/log/apache2/error_log

# assembly - x86 堆栈指针指向哪里？

> ID：14060411
> 
> 赞同：19
> 
> 时间：2012-12-27T19:49:21.410
> 
> 标签：assembly, x86, stack, stack-pointer

例如，如果我推 ax 是 [SP] 指向我的 ax 值还是 ax 后面的单词？它也不同于实模式和保护模式吗？我问这个是因为汇编艺术书说明并解释了 sp 指向最后推送的数据，并且在此页面上[OSDev Wiki - Stack](http://wiki.osdev.org/Stack)它说明了它指向最后推送数据后的空字。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-27T19:56:03.863

维基百科[在这里](http://en.wikipedia.org/wiki/X86_assembly_language)说：

> 堆栈是通过隐式递减（推送）和递增（弹出）堆栈指针实现的。在 16 位模式下，这个隐式堆栈指针被寻址为 SS:[SP]，在 32 位模式下它是 SS:[ESP]，而在 64 位模式下它是 [RSP]。**堆栈指针实际上指向最后存储的值，**假设它的大小将匹配处理器的操作模式（即 16、32 或 64 位）以匹配 push/pop/call 的默认宽度/ret 指令。

这也是我的回溯记忆所说的方式。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-27T19:59:43.543

```
push eax 
```

相当于：

```
sub esp, 4
mov [esp], eax 
```

所以在推送之后，`esp`将保存推送值的地址。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-23T00:45:00.220

根据 Lee Meador 和 Cory Nelson 的回答，堆栈指针指向最后一个被推送的值。

来自英特尔® 64 和 IA-32 架构软件开发人员手册第 2 卷（2A、2B 和 2C）：指令集参考，AZ，PUSH 指令描述的第一行如下：

> 递减堆栈指针，然后将源操作数存储在堆栈顶部。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-23T18:36:15.403

我想我明白为什么 OP 会问这个问题。为什么第一个变量是来自 SP 的 8 个字节而不是 4 个？

经过一些研究，我发现[这](http://unixwiz.net/techtips/win32-callconv-asm.html)表明：

SP+0 是旧的 EBP SP+4 是旧的 EIP（指令指针）

因此，自然地，第一个参数是 SP+8。

# php - 从数据库获取值到文件夹名称 PHP&MYSQL

> ID：14060412
> 
> 赞同：0
> 
> 时间：2012-12-27T19:49:26.683
> 
> 标签：php, get

我的 PHP 脚本有问题，所以链接是这样的：`page.php?id=1412`.

但我不想使用`$_GET['id']`;获取数据 程序有没有办法像这样识别 URL `localhost/1412`，然后尝试在数据库`1412`中的`id`字段中查找？

`Not Found page ?`如果可能的话，由于文件夹 1412 不存在，我该如何避免？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T19:52:49.363

您可以正则表达式当前的 uri ($_SERVER['REQUEST_URI'])。参见创建正则表达式：[PHP URL Regex and Parameter](https://stackoverflow.com/questions/8375032/php-url-regex-and-parameter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:53:27.617

**.htaccess 文件是一种解决方案，您可以访问这种类型的 url，并可以使用****.htaccess**文件将值发送到 php 文件，请参阅这篇不错的文章来执行此操作

[http://net.tutsplus.com/tutorials/other/using-htaccess-files-for-pretty-urls/](http://net.tutsplus.com/tutorials/other/using-htaccess-files-for-pretty-urls/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T19:56:27.250

对于所有这种匹配，您需要为 apache 使用 .htaccess 文件，或者在 nginx/lighthttpd 等的配置文件中实现的类似功能。基本上，当像 x/1412 这样的请求到来时，您可以在将其分派到 php 引擎之前对其进行匹配，并在内部将其转换为 x?id=1412 。其他解决方案涉及将所有请求重定向到前端控制器（用作应用程序的单个入口点的脚本）并让 url 匹配器匹配要执行的路由。后者几乎在每个大/小 php 框架中都实现了。

# asp.net-mvc-4 - MVC 4 create classes from entities

> ID：14060415
> 
> 赞同：2
> 
> 时间：2012-12-27T19:49:34.893
> 
> 标签：asp.net-mvc-4, entity-framework-4.1

I come from a Powerbuilder background. I was recently announced that we change development platform: MVC 4 + Entity 4 + KendoUI

I am having difficulties and I am trying to get hold of the subject quickly.

I have a question. I built a quite large database (lot of tables) for the project I was assigned. I created the entities via Entity Framework 4.1.

Is there a way that I can create classes (.cs) from the entities automatically?

Having to create 170 classes (.cs) is a time consuming task and I prefer to spend my time learning.

Thanx in advance

PS Maybe the question is naive, but i have never worked with .NET C# etc

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:08:29.963

如果您已经创建了数据库，请尝试使用数据库优先方法，它会自动将所有表映射到类中：

[http://msdn.microsoft.com/en-us/data/gg702905.aspx](http://msdn.microsoft.com/en-us/data/gg702905.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:42:13.893

此处描述了标准的 4 个选项[http://msdn.microsoft.com/en-us/data/ee712907](http://msdn.microsoft.com/en-us/data/ee712907) code first/modelling /existing database combination

EF Powertools nuget 包提供的一个额外选项是先从现有数据库进行逆向工程代码。我发现这非常有用。

# jquery - Hiding header on scroll with jquery

> ID：14060420
> 
> 赞同：3
> 
> 时间：2012-12-27T19:49:58.527
> 
> 标签：jquery, header, addclass

I'm trying to have my page not show a header until the user scrolls 600px. I've come up with the code below by parsing through the jquery docs, but I can't seem to make it work. A little help in the right direction would be much appreciated. Thanks!

UPDATE: I've figured it out. I had the selector period before the class name. I'm not seeing the duration transition fire though. *$("header").removeClass("header-hidden", **1000**);* Any advice there?

**HTML**

```
 <header class="header-fixed header-hidden shadow">
<section>
  <nav>
    <ul>
      <li>one</li>
          <li>two</li>
        </ul>
  </nav>
</section>
 </header> 
```

**CSS**

```
.header-fixed { position: fixed; top: 0; left: 0; width: 100%; }
.header-hidden { display: none;  }
header { z-index: 999; margin: 0; overflow: hidden; height: 70px; background: rgba(255, 255, 255, 0.9); position: relative; } 
```

**Jquery**

```
 <script>
      $(window).scroll(function () { 
        if ($(this).scrollTop() < 600) {
          $("header").removeClass("header-hidden", 1000);
        }
                else
                  $("header").addClass("header-hidden", 1000);
      });
    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:04:02.667

如果您打算隐藏标题，直到用户点击 600 像素。我建议更改您的 CSS，以便默认情况下隐藏标题，然后只需执行一个简单的 jQuery`.show()`并`.hide()`在需要时

# CSS：

```
header { 
  background: #ccc; 
  display: none;
  height: 70px; 
  left: 0; 
  margin: 0; 
  overflow: hidden; 
  position: fixed; 
  top: 0; 
  width: 100%;
  z-index: 999; 
} 
```

# jQuery：

```
jQuery(function($) {
  $(window).scroll(function () { 
    if ($(this).scrollTop() < 600) {
      $('header').hide();
    } else {
      $('header').show();
    }
  });
});​ 
```

[​jsFiddle](http://jsfiddle.net/2pwLZ/1/)

你错的一件事是`removeClass()`没有转换参数。只有类参数没有`.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T20:02:37.390

只需添加类，您不必指定“。” （点）。

```
<script>
  $(window).scroll(function () { 
    if ($(this).scrollTop() < 600) {
      $(this).addClass("header-hidden");
    }
  });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T20:21:31.307

这是您问题第二部分的答案：

“不过，我没有看到持续时间转换触发。$("header").removeClass("header-hidden", 1000); 有什么建议吗？”

我检查了 jQuery api，它看起来不像 removeClass 可以采用转换选项。

[http://api.jquery.com/removeClass/](http://api.jquery.com/removeClass/)

如果您希望 Header 作为动画淡入并作为动画淡出，您将需要使用 jQuery 动画功能。例如

$("标题").fadeIn(1000);

$("header").fadeOut(1000);

您可以应用的所有 jQuery“效果”的链接在这里：

[http://api.jquery.com/category/effects/](http://api.jquery.com/category/effects/)

希望有帮助！

# python-2.7 - Upload image with python

> ID：14060421
> 
> 赞同：0
> 
> 时间：2012-12-27T19:50:10.130
> 
> 标签：python-2.7, ftplib

I'm using this command to ftp upload a png image. But when I upload the image is not visible it looks like currupted even if I download it I can't view the image. Here is the code

ftp.storlines('STOR ' + 'Simple.png', open('Simple.png', 'rb'))

here is the uploaded file [http://llgrow.co.nf/Simple.png](http://llgrow.co.nf/Simple.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:09:20.027

尝试使用 storbinary()...

因为它采用该图像的二进制值......所以没有像素值被弄乱......

由于图像文件包含像素...需要存储像素的确切 X、Y 位置。

所以 storbinary() 默认情况下会这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T19:56:45.970

那是因为`ftp.storlines()`以 ascii 模式发送文件，您应该使用`ftp.storbinary()`图像文件（二进制模式）：

```
 F=open("Simple.png","rb")
    ftp.storbinary('STOR image.png',F,1024) 
```

# r - 如何使用 Plyr、Apply 或类似方法对该 R 代码进行矢量化？

> ID：14060423
> 
> 赞同：5
> 
> 时间：2012-12-27T19:50:11.253
> 
> 标签：r, vectorization, plyr, kaggle

我编写了以下 R 代码来识别目录中的重复文件。如何使用 plyr 包（或类似包）对 for 循环进行矢量化？我想实现一种比我想出的更惯用的 R 解决方案。

```
library("digest") # to compute the MD5 digest
test_dir = "/Users/user/Dropbox/kaggle/r_projects/test_photo"
filelist <- dir(test_dir, pattern = "JPG|AVI", recursive=TRUE, 
                all.files =TRUE, full.names=TRUE)

fl = list() #create and empty list to hold md5's and filenames

for (itm in filelist) {
  file_digest = digest(itm, file=TRUE, algo="md5")
  fl[[file_digest]]= c(fl[[file_digest]],itm)
}
fl 
```

输出是（使用一个小的测试目录）：

```
> fl
$`5715b719723c5111b3a38a6ff8b7ca56`
[1] "/Users/user/Dropbox/kaggle/r_projects/test_photo/folder_a/IMG_3480 copy.JPG"
[2] "/Users/user/Dropbox/kaggle/r_projects/test_photo/folder_a/IMG_3480.JPG"     

$`24fd4d7d252ca66c8d7a88b539c55112`
[1] "/Users/user/Dropbox/kaggle/r_projects/test_photo/folder_a/IMG_3481 copy.JPG"
[2] "/Users/user/Dropbox/kaggle/r_projects/test_photo/folder_a/IMG_3481.JPG"     
[3] "/Users/user/Dropbox/kaggle/r_projects/test_photo/folder_b/IMG_3481.JPG"     

$`2a1d668c874dc856b9df0fbf3f2e81ec`
[1] "/Users/user/Dropbox/kaggle/r_projects/test_photo/folder_a/IMG_3482 copy.JPG"
[2] "/Users/user/Dropbox/kaggle/r_projects/test_photo/folder_a/IMG_3482.JPG"     
[3] "/Users/user/Dropbox/kaggle/r_projects/test_photo/folder_b/IMG_3482 copy.JPG"
[4] "/Users/user/Dropbox/kaggle/r_projects/test_photo/folder_b/IMG_3482.JPG" 
```

我试过：

```
h=ldply(filelist, digest, file=TRUE, algo="md5")
h$filenames=filelist 
```

但最终每个键值对（MD5，文件名）都有一个唯一的行。我无法获得所需的紧凑输出。

（背景：作为练习，我转换了 Raymond Hettinger 在他的 PyCon AU 2011 主题演讲“What Makes Python Awesome”中提出的 Python 代码。幻灯片在这里：[http](http://slidesha.re/WKkh9M) ://slidesha.re/WKkh9M 。我能够剪切LOC 减半，但我认为我可以通过矢量化做得更好 - 并了解更多）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T20:55:45.413

这是base中的一个更简洁的解决方案：

```
md5s<-sapply(filelist,digest,file=TRUE,algo="md5")
split(filelist,md5s) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-27T20:37:46.183

这是一个答案。首先将 md5 和文件名放在带有`ldply`. 然后，创建您想要的列表`dlply`。

```
fl <- ldply(seq_along(filelist), function(idx) 
          c(digest(filelist[idx], file=TRUE, algo="md5"), 
          filelist[idx]))
fl <- dlply(fl, .(V1), function(x) x$V2) 
```

# scheme - 我将如何提高效率（方案）？

> ID：14060425
> 
> 赞同：1
> 
> 时间：2012-12-27T19:50:17.430
> 
> 标签：scheme

我有这个代码：

```
(define tree `(A (B (C)) (D (E)) (C (E))))

(define (prog1 graph)
    (let ([seen `()])
      (define (sub g)
          (cond 
              [(member (car g) seen) `()]
              [else 
               (set! seen (cons (car g) seen))
               (cond
                 [(null? (cdr g)) (list (car g))]
                 [else
                  (cons (car g) (map sub (cdr g)))])])) 
    (delete `() (sub graph))))

(define delete
  (lambda (x y)
      (if (null? y )
            `()
      (if (eqv? (car y) x)
           (delete x (cdr y))
      (cons (car y) (delete x (cdr y))))))) 
```

它打印一个连接图，其中所有节点都出现一次。

跑步`(prog1 tree)`

印刷：`(A (B (C)) (D (E)))`

我已经查看了 lisp 中的各种深度优先搜索（类似于我正在尝试做的事情），它们似乎对此更加优雅，有些使用迭代方法。我知道该程序效率不高（在大树上运行速度很慢）所以我将如何提高这段代码的效率？

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:13:37.170

在大多数情况下，此代码中的瓶颈不是树遍历，而是`member`查找。您的函数的复杂性似乎大致为 O(M*N)，其中 M 是不同节点的数量，N 是总节点的数量。M 将其作为一个因素的原因是因为您正在查找线性列表中的节点，这需要与列表长度成正比的时间（在您的情况下与不同节点的数量成正比）。

摆脱 M 的方法是使用更高效的数据结构进行查找。例如，R6RS 定义了哈希表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T20:40:18.233

该过程在每次调用时都会对列表`member`进行查找。`O(n)`这不是我们想要快速测试集合成员资格的东西，因为您应该使用一种数据结构，为`O(1)`在集合中添加元素和测试元素成员资格提供复杂性，理想情况下是 Set 数据结构或代替它的 Hash Table。例如，在 Racket 中尝试替换这些行（或使用 Scheme 解释器中的默认哈希表实现）：

```
(let ([seen `()]) => (let ([seen (make-hash)])

[(member (car g) seen) `()] => [(hash-has-key? seen (car g)) '()]

(set! seen (cons (car g) seen)) => (hash-set! seen (car g) 'ok) 
```

此外，通常您希望在代码中使用[*引号*](http://docs.racket-lang.org/reference/quote.html)`'()`：而不是[*quasiquotes*](http://docs.racket-lang.org/guide/qq.html) : ``()`，请参阅链接以了解差异以及何时适合使用 quasiquoting。

最后，您可以使用内置`remove`程序，无需自己实现`delete`.

# c# - linq：单独的 orderby 和 thenby 语句

> ID：14060428
> 
> 赞同：1
> 
> 时间：2012-12-27T19:50:46.010
> 
> 标签：c#, linq

我正在通过这里的 101 个 Linq 教程进行编码：

[http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)

大多数示例都很简单，但是这个让我陷入了循环：

```
 [Category("Ordering Operators")]
    [Description("The first query in this sample uses method syntax to call OrderBy and ThenBy with a custom comparer to " +
                 "sort first by word length and then by a case-insensitive sort of the words in an array. " +
                 "The second two queries show another way to perform the same task.")]
    public void Linq36()
    {
        string[] words = { "aPPLE", "AbAcUs", "bRaNcH", "BlUeBeRrY", "ClOvEr", "cHeRry", "b1" };

        var sortedWords =
            words.OrderBy(a => a.Length)
                 .ThenBy(a => a, new CaseInsensitiveComparer());

        // Another way. TODO is this use of ThenBy correct? It seems to work on this sample array.
        var sortedWords2 =
            from word in words
            orderby word.Length
            select word;

        var sortedWords3 = sortedWords2.ThenBy(a => a, new CaseInsensitiveComparer()); 
```

无论我抛出哪个单词组合，长度始终是第一个排序标准......即使我不知道第二个语句（没有 orderby！）如何知道原始 orderby 子句是什么。

我要疯了吗？谁能解释一下 Linq 如何“记住”原始顺序是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T19:53:16.897

的返回类型`OrderBy`不是`IEnumerable<T>`。是`IOrderedEnumerable<T>`。这是一个“记住”所有给定顺序的对象，只要您不调用另一个将变量转换回的方法，`IEnumerable`它就会保留该知识。

请参阅 Jon Skeets 精彩的博客系列 Eduling，其中他重新实现了 Linq-to-objects 以获取更多信息。`OrderBy`/上的关键条目`ThenBy`是：

*   [IOrderedEnumerable](http://msmvps.com/blogs/jon_skeet/archive/2011/01/04/reimplementing-linq-to-objects-part-26a-iorderedenumerable.aspx)
*   [OrderBy、OrderByDescending、ThenBy、ThenByDescending](http://msmvps.com/blogs/jon_skeet/archive/2011/01/05/reimplementing-linq-to-objects-part-26b-orderby-descending-thenby-descending.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T19:58:38.570

这是因为 LINQ 是惰性的，第一个即所有评估仅在您枚举序列时发生。已构建的表达式树被执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T20:01:35.317

从表面上看，您的问题确实没有多大意义，因为您没有考虑延迟执行的性质。在任何一种情况下，它都不会“记住”，只是在真正需要它之前不会执行。如果您在调试器中运行您的示例，您会发现这些生成相同的（无论如何在结构上）语句。考虑：

```
var sortedWords =
        words.OrderBy(a => a.Length)
             .ThenBy(a => a, new CaseInsensitiveComparer()); 
```

您已明确告诉 OrderBy, ThenBy。每个语句都堆叠起来，直到它们全部完成，最终查询的构造看起来像（伪）：

```
 Select from sorted words, order by length, order by comparer 
```

然后，一旦一切准备就绪，它就会被执行并放入`sortedWords`. 现在考虑：

```
var sortedWords2 =
        from word in words
        orderby word.Length   // You're telling it to sort here
        select word;

// Now you're telling it to ThenBy here
var sortedWords3 = sortedWords2.ThenBy(a => a, new CaseInsensitiveComparer()); 
```

然后，一旦将这些查询堆叠起来，它将被执行。但是，在您需要它们之前不会执行它。`sortedWords3`在你采取行动之前不会真正有任何价值，因为对它的需求被推迟了。所以在这两种情况下，你基本上是在对编译器说：

1.  等到我完成查询
2.  从源中选择
3.  按长度排序
4.  然后通过比较器
5.  好吧，做你的事。

*注意：总而言之，LINQ 不会“记住”，它只是在您完成执行指令之前不会执行。然后它将它们堆叠成一个查询，并在需要时一次性运行它们。*

# java - 在整数数组中查找整数元素：递归问题

> ID：14060430
> 
> 赞同：0
> 
> 时间：2012-12-27T19:50:53.000
> 
> 标签：java, recursion

我编写了这个递归方法来查找整数数组中的整数，但它不起作用。我尝试调试它，但我不知道问题可能是什么。

这是代码

```
public static String inList(int[] primes,int a){
    int index = -9;
    if(primes.length>1){
        index = primes.length/2;
    }else{
        if(primes[0] == a){
            return "True";
        }else{
            return "False";
        }
    }
    if(primes[index] == a){
        return "True";
    }
    if(primes[index] > a){
        inList(Arrays.copyOfRange(primes, 0, index),a);
    }
    if(primes[index]<a){
        inList(Arrays.copyOfRange(primes, index, primes.length),a);
    }
            //shouldn't even get to this point, but eclipse insisted I needed another return
            //statement
    return "Whyyyyy?";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:56:32.640

只需使用`Arrays.binarySearch()`. 正如您从它的不同原型中看到的那样，当且仅当您在数组中查找的值不存在时，它才会返回负值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T20:16:40.077

您忘记添加返回
您是否对数组进行了排序？

```
if(primes[index] > a){
    return inList(Arrays.copyOfRange(primes, 0, index),a);
}
if(primes[index]<a){
   return inList(Arrays.copyOfRange(primes, index, primes.length),a);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T20:09:40.480

在数组中查找某些东西的递归函数将是：

```
public static String inList(int[] primes,int index, int a) {
    /* two breaking conditions for recursion: end of array or number found */
    if(index >= primes.length)
        return "False";

    if(primes[index] == a)
        return "True";

    /* recursion */
    return inList(primes, ++index, a);
} 
```

`index = 0`您可以使用ex调用上述方法。`inList(primes, 0, a)`. 这将比非递归查找方法慢得多。

# c++ - 如何从客户端代码中隐藏模板化的非成员函数？

> ID：14060432
> 
> 赞同：4
> 
> 时间：2012-12-27T19:51:00.737
> 
> 标签：c++, templates, namespaces, linkage

我有模板函数，比如说，

```
template<class T> 
void mysort(std::vector<T>& vec)
{
    size_t b, m, e,
    ...
    mysort(vec, b, m, e);
}

template<class T>
void mysort(std::vector<T>& vec, size_t b, size_t m, size_t e)
{
     size_t x, y, z;
     ...
     mysort (vec, x, y, z);
} 
```

公共接口是一个只接受矢量引用的接口。我想隐藏另一个，实现，这样没有客户端代码可以做

```
mysort(vec, a, b, c); 
```

创建一个类，把实现函数设为private static，感觉不太对劲，我尝试使用匿名命名空间，

```
namespace abc 
{
    namespace 
    {
        template<class T>
        void mysort(std::vector<T>& vec, size_t b, size_t m, size_t e)..
    }

    template<class T> 
    void mysort(std::vector<T>& vec)...

} 
```

它有帮助，但不完全是淘汰赛......

```
#include "mysort.h"

int main()
{
    ...
    abc::mysort(vec, a, b, c); // this won't compile, good
} 
```

但是，如果我将其更改为：

```
#include "mysort.h"

using namespace abc;

int main()
{
    ...
    mysort(vec, a, b, c); // it compiles and runs!!
} 
```

我在 x86_64 上使用 gcc Ubuntu 4.4.3-4ubuntu5。谁能解释为什么它使用 using 指令编译，而不是使用限定名称，以及是否有更好的方法来实现我想要的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T19:52:42.860

常见的用法是创建一个“detail”命名空间，它仅用于内部使用的代码：

```
namespace abc 
{
    namespace detail
    {
        template<class T>
        void mysort(std::vector<T>& vec, size_t b, size_t m, size_t e)..
    }

    template<class T> 
    void mysort(std::vector<T>& vec)...

} 
```

要回答有关未命名命名空间行为的问题：

未命名的命名空间（它们不称为匿名命名空间）的命名有点奇怪——它们对您来说是未命名的，但编译器实际上会为它生成一个唯一的内部名称。您的示例等效于：

```
namespace abc 
{
    namespace def // lets say 'def' is unique.
    {
        template<class T>
        void mysort(std::vector<T>& vec, size_t b, size_t m, size_t e)..
    }
    using namespace def;

    template<class T> 
    void mysort(std::vector<T>& vec)...

} 
```

您会注意到它的行为与您未命名的示例相同：您不能在`abc::mysort(vec, 1, 2, 3)`这里执行，但您可以`using namespace abc; mysort(vec, 1, 2, 3)`.

发生这种情况是因为没有两个`abc::mysort`s，只有 a`abc::def::mysort`和`abc::mysort`。当您声明一个实际`abc::mysort`时，它会隐藏由 引入的那个`using namespace def`。请注意，如果您注释掉 1-param `mysort`，您实际上可以说`abc::mysort(vec, 1, 2, 3)`.

因为它是隐藏的，所以合格的调用`abc::mysort`必须显式查看`abc::mysort`，并且只能找到 1-param 版本。

但是，通过不合格的调用 via `using namespace abc; mysort(vec, 1, 2, 3)`，它可以使用 ADL 来查找任何匹配的可用函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:18:17.443

实际上，我在更高版本的 gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 和 -std=c++0x 中做了一些测试，它完全符合我的预期。

在主文件中，using 指令或 using 限定名称都不允许您调用匿名命名空间内的函数，而匿名命名空间本身位于另一个命名空间内。

我认为原因是编译器确认了最新标准，即默认情况下未命名的命名空间具有内部链接。

在我看来，未命名的命名空间方法应该优于旧的“详细”命名空间实践。

# powershell - 如何正确处理通过 SendTo 快捷方式作为参数传递给 PowerShell 脚本的文件名中的空格？

> ID：14060434
> 
> 赞同：2
> 
> 时间：2012-12-27T19:51:25.227
> 
> 标签：powershell, sendto

我编写了一个（非常）简单的脚本，将当前日期附加到 PowerShell 中的给定文件名，并使用 SendTo 快捷方式设置它以便于访问。

但是，它不能很好地处理带有空格的文件名。如果文件名是**“thisFile.txt”**，它会正确添加日期，使其**“thisFile.txt.20121227”**，但如果文件名是**“this File.txt”**，它不能从我的 SendTo 快捷方式中使用设置。

但是，对于这两种类型的文件名，它确实可以从命令行工作，我一直在摸不着头脑，试图找出原因。

这是我一直在使用的代码片段：

```
$enddate = (Get-Date).toString("yyyyMMdd")
$filename = $arg

foreach ($filename in $args) {
    Rename-Item $filename $filename"."$enddate
} 
```

这是我设置的快捷方式的目标字段：

```
"%SystemRoot%\system32\WindowsPowerShell\v1.0\powershell.exe " -NonInteractive  -WindowStyle Hidden -NoProfile -noexit &"C:\Scripts\adddate.ps1" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:27:14.850

使用[开关而不是](https://stackoverflow.com/q/14011901/653295)[脚本路径前面的与号 () 应该可以解决您的](https://stackoverflow.com/q/14011901/653295)[问题`-f``&`](https://stackoverflow.com/q/14011901/653295)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:40:48.977

您可能想做一些调试。

我敢打赌，您带有空格的文件名将被拆分为一个数组。

在您的 for 循环中，将 $filename 变量的输出写入文件。您可能会发现您需要在脚本中添加一些逻辑，上面写着“嘿，这没有扩展名！我需要在该区域中追加更多项目，直到这是一个带扩展名的文件名！”，或者可能直到“测试路径 $filename” 返回 true。

# php - 如何使用 PHP 将单选按钮记录添加到 MySQL 字段中

> ID：14060436
> 
> 赞同：0
> 
> 时间：2012-12-27T19:51:26.260
> 
> 标签：php, mysql

有人可以告诉我 PHP 代码和 MySQL 查询，以便我可以将单选按钮数据发布到 MySQL 字段中吗？我有一个名为“出席”的 MySQL 表，它有四个字段：

*   当下
*   缺席的
*   离开
*   假期

我的 HTML 表单包含四个单选按钮以及

```
<input type="radio" name="present" value="1" />
<input type="radio" name="absent" value="2" />
<input type="radio" name="leave" value="3" />
<input type="radio" name="holiday" value="4" /> 
```

我想要的是，如果有人选择缺席单选按钮，那么 2 应该转到出勤表中的缺席字段，而表中的其他 3 个字段将为空；如果有人选择出席，则应在出勤中的出席字段中选择 1 个，而缺席假期的其他 3 个字段将为空。

名称也与 4 个单选按钮不同，所以我可以选择所有 4 个单选按钮。我怎样才能让他们从 4 个中选择一个？我知道名称是否相同，那么我可以选择 1，但这是不同的问题，4 个不同的字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:02:28.070

为无线电组的所有元素赋予相同的名称。这将对 HTML 部分执行此操作。在 PHP 中，您可以根据 REQUEST 值进行简单的切换：

```
<?php
    $defaultInsertData = array(0,0,0,0);
    $currentValue = intval($_REQUEST['FIELDNAME']);
    switch($currentValue) {
        case 1:
            $defaultInsertData[0] = 1;
            break;
        case 2:
            $defaultInsertData[1] = 2;
            break;
        case 3:
            $defaultInsertData[2] = 3;
            break;
        case 4:
            $defaultInsertData[3] = 4;
            break;
    }
    // and here you have your array with the four elements.... 
    var_dump($currentValue);
?> 
```

# c# - 在 SQLite 上只执行 SELECT 命令

> ID：14060443
> 
> 赞同：4
> 
> 时间：2012-12-27T19:51:51.160
> 
> 标签：c#, windows, sqlite, select, system.data.sqlite

我制作了一个 SQLite 数据库（约 700MB，3 个表，3 个索引 - 1 个 rtree 索引和 2 个主键）。我已将其标记为只读文件（在 Windows 上）。

从多个线程仅在此数据库上执行 SELECT 命令是否安全且高效？

如果是这样，如何使其性能更高（启用任何选项或标志，任何微小的调整）？

此应用程序使用 C# 编写，使用 System.Data.SQLite (1.0.82.0)，在 x64 机器上为 .NET 4.0 编译。它工作正常（不一定是高性能或正确并行，因为我不能/不知道（如何）证明它们）。目前我没有真正的瓶颈，但很快我会的！我需要尽快搜索 rtree。（在我的机器 4GB，2 核上）搜索 rtree 有时需要超过 5 毫秒。我已将该部分设为多线程以并行处理我的数据。并且根据[R-Tree](http://en.wikipedia.org/wiki/R-tree)的结构（或者我认为在 SQLite 的情况下是 R*-Tree），如果我的数据库增长到一些 GB，那应该没问题，因为这些树的深度较低并且在大型数据集上速度很快。但如果有任何改进是可能的，那么应该在这个应用程序中考虑。

我无法确定已并行化的部分是否真的并行运行，例如 SQLite（或 System.Data.SQLite）没有内部锁。事实上，在某些测试中，并行版本运行速度较慢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T19:56:41.993

这应该是安全的，前提是每个线程都有自己的连接，或者您使用锁来防止多个线程同时使用同一个连接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T20:00:22.517

> 从多个线程仅在此数据库上执行 SELECT 命令是否安全且高效？

最有可能的

> 怎样才能提高性能（如果可能的话）？

你的瓶颈是什么？磁盘 I/O？处理器？记忆？

提高应用程序的性能最好通过 1) 识别性能不佳的部分（并且可以改进）和 2) 提高这些部分的性能。有许多工具可以识别代码中最慢的部分，因此您知道首先要解决什么问题。当程序获取查询结果并花费 10 秒将其写入磁盘时，将查询缩短 10 毫秒是没有意义的。

没有“魔杖”可以让您在应用程序（尤其是数据库驱动的应用程序）上挥动并使其运行得更快。你需要知道首先*要解决什么问题*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T19:59:12.550

您可以设置线程支持级别： [http ://www.sqlite.org/threadsafe.html](http://www.sqlite.org/threadsafe.html)

> SQLite 支持三种不同的线程模式：
> 
> **单线程**。在这种模式下，所有互斥锁都被禁用，SQLite 一次在多个线程中使用是不安全的。
> 
> **多线程**。在这种模式下，SQLite 可以被多个线程安全地使用，前提是没有在两个或多个线程中同时使用单个数据库连接。
> 
> **序列化**. 在序列化模式下，SQLite 可以不受限制地被多个线程安全使用。
> 
> 可以在编译时（从源代码编译 SQLite 库时）或在启动时（当打算使用 SQLite 的应用程序正在初始化时）或在运行时（当新的 SQLite 数据库时）选择线程模式正在创建连接）。一般来说，运行时会覆盖开始时间，而开始时间会覆盖编译时。除了，单线程模式一旦选择就不能被覆盖。
> 
> **默认模式是序列化的。**

您看到的减速是请求的序列化。更改线程模型，事情会加快。请记住，“不安全”可能同时意味着读者和作者。我不确定只有读者的最佳模式是什么。

# javascript - 如何将窗口和文档对象引入spidermonkey javascript shell？

> ID：14060450
> 
> 赞同：0
> 
> 时间：2012-12-27T19:52:15.713
> 
> 标签：javascript, firefox, automated-tests, spidermonkey

我正在尝试使用蜘蛛猴构建自动化脚本测试引擎。

我打算测试的一些脚本正在使用 window 和 document 对象，它们没有在 js shell 中定义。

是否有一种简单的方法来定义要在蜘蛛猴测试中使用的窗口和文档对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T15:19:31.110

SpiderMonkey shell 只是用一些内置函数实现了 JavaScript 语言来做一些扩展的事情，比如从本地文件系统中读取文件到字符串中。当您构建 Mozilla 时，有一个名为 XPCShell 的工件可用于访问更完整的浏览器环境，但我不确定是否有关于如何正确使用它的良好文档。你的网络搜索和我的一样好！

或者，有一个`dom.js`项目试图在纯 JavaScript 中实现 HTML DOM。您可能能够加载该项目的 JS 并针对其在 DOM 中的 Window 和 Document 对象的实现进行编程。

# android - Android 上的活动错误

> ID：14060452
> 
> 赞同：0
> 
> 时间：2012-12-27T19:52:27.040
> 
> 标签：android, class, android-activity

我已经在网上和 stackoverflow 上搜索了它，但我找不到我的问题的解决方案。在我的应用程序中，我记录加速度计数据（x、y 和 z），将它们写入数据库，然后从另一个名为 generateFeatures 的扩展 mainActivity 的类中从数据库获取的加速度计数据生成一些特征（我从 mainActivity 派生它的原因是使用数据库类并在其中使用 sqlite 命令）。在我的主要活动（它的名称是 MainActivity）中，我将其用作成员字段并初始化 generateFeatures 类以在其中生成功能。但是当我启动应用程序时。它崩溃并发出。

```
12-27 21:03:16.735: E/AndroidRuntime(27236): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.coordinates/com.example.coordinates.MainActivity}: java.lang.NullPointerException
12-27 21:03:16.735: E/AndroidRuntime(27236):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
12-27 21:03:16.735: E/AndroidRuntime(27236):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
12-27 21:03:16.735: E/AndroidRuntime(27236):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
12-27 21:03:16.735: E/AndroidRuntime(27236):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
12-27 21:03:16.735: E/AndroidRuntime(27236):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-27 21:03:16.735: E/AndroidRuntime(27236):    at android.os.Looper.loop(Looper.java:137)
12-27 21:03:16.735: E/AndroidRuntime(27236):    at android.app.ActivityThread.main(ActivityThread.java:4898)
12-27 21:03:16.735: E/AndroidRuntime(27236):    at java.lang.reflect.Method.invokeNative(Native Method)
12-27 21:03:16.735: E/AndroidRuntime(27236):    at java.lang.reflect.Method.invoke(Method.java:511)
12-27 21:03:16.735: E/AndroidRuntime(27236):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)
12-27 21:03:16.735: E/AndroidRuntime(27236):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)
12-27 21:03:16.735: E/AndroidRuntime(27236):    at dalvik.system.NativeStart.main(Native Method)
12-27 21:03:16.735: E/AndroidRuntime(27236): Caused by: java.lang.NullPointerException
12-27 21:03:16.735: E/AndroidRuntime(27236):    at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:228)
12-27 21:03:16.735: E/AndroidRuntime(27236):    at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:224)
12-27 21:03:16.735: E/AndroidRuntime(27236):    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:164)
12-27 21:03:16.735: E/AndroidRuntime(27236):    at com.example.coordinates.generateFeatures.<init>(generateFeatures.java:25)
12-27 21:03:16.735: E/AndroidRuntime(27236):    at com.example.coordinates.MainActivity.onCreate(MainActivity.java:93)
12-27 21:03:16.735: E/AndroidRuntime(27236):    at android.app.Activity.performCreate(Activity.java:5184)
12-27 21:03:16.735: E/AndroidRuntime(27236):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)
12-27 21:03:16.735: E/AndroidRuntime(27236):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
12-27 21:03:16.735: E/AndroidRuntime(27236):    ... 11 more 
```

这是 mainActivity 类：

```
public class MainActivity extends FragmentActivity implements SensorEventListener,dialogFragement.NoticeDialogListener {

    private SensorManager sm;
    private Sensor myAccelerometer;
    private VeriTabani veritabani;
    private SQLiteDatabase db;
    private FragmentManager fm;
    private ContentValues myContentValues;
    private generateFeatures gf;

    private ArrayList<Float> valuesX;
    private ArrayList<Float> valuesY;
    private ArrayList<Float> valuesZ;
    private ArrayList<Float> zamanDiyagrami;

    private float totalX,totalY,totalZ,averageX,averageY,averageZ,stdX,stdY,stdZ,aadX,aadY,aadZ,averageResultantAcc,maxX,maxY,maxZ; 
    TextView x; 
    TextView y; 
    TextView z; 
    Button b1,b2,b3;

    private String dosyaAdi;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        myContentValues=new ContentValues();

        fm=getFragmentManager();

        b1=(Button)findViewById(R.id.button1);
        b2=(Button)findViewById(R.id.button2);
        b3=(Button)findViewById(R.id.button3);
        x=(TextView)findViewById(R.id.textView4); 
        y=(TextView)findViewById(R.id.textView5); 
        z=(TextView)findViewById(R.id.textView6); 

        sm=(SensorManager)getSystemService(Context.SENSOR_SERVICE);

        myAccelerometer= sm.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);

        sm.registerListener(this, myAccelerometer,50000);

        veritabani= new VeriTabani(this);
        db=veritabani.getWritableDatabase();

        valuesX= new ArrayList<Float>();
        valuesY= new ArrayList<Float>();
        valuesZ= new ArrayList<Float>();
        zamanDiyagrami= new ArrayList<Float>();

        gf=new generateFeatures(dosyaAdi);

         b1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                grafikGoruntule();
            }
        });
         b2.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                verileriSil();
            }
        });

         b3.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                createDialog();
            }
        });
    }

    public void createDialog(){
        sm.unregisterListener(this);
        DialogFragment dialog = new dialogFragement();
        dialog.show(fm, "MyDialogFragment");
        sm.registerListener(this, myAccelerometer,50000);
    }

    public void verileriSil(){ 
        try{
                db.delete("Koordinatlar", null, null);
                db.delete("Features", null, null);

            }
            catch(SQLException ex){
                ex.printStackTrace();
                Toast toast=Toast.makeText(getBaseContext(),"Silme işlemi sırasında bir hata oluştu"+" "+ex.toString(),Toast.LENGTH_SHORT);
                toast.show();
            }

          Toast toast= Toast.makeText(getBaseContext(), "Silme işlemi başarılı",Toast.LENGTH_SHORT);
          toast.show();

    }

    public void grafikGoruntule(){

        sm.unregisterListener(this);
        startActivity(getIntent(this));
    }

    public void onAccuracyChanged(Sensor arg0, int arg1) {
        // TODO Auto-generated method stub

    }

    public void onSensorChanged(SensorEvent event) {
        // TODO Auto-generated method stub
        float xGoster,yGoster,zGoster;

        if(event.sensor.getType()==Sensor.TYPE_ACCELEROMETER){

            xGoster=(event.values[0]);
            yGoster=(event.values[1]);
            zGoster=(event.values[2]);

            x.setText(Float.toString(xGoster));
            y.setText(Float.toString(yGoster));
            z.setText(Float.toString(zGoster));
            kayitEkle(xGoster,yGoster,zGoster,System.currentTimeMillis());
        }
    }

    public void kayitEkle(float xKoor,float yKoor,float zKoor,long zamanMiliSaniye){

        ContentValues degerler= new ContentValues();

        degerler.put("xKoor", xKoor);
        degerler.put("yKoor", yKoor);
        degerler.put("zKoor", zKoor);
        degerler.put("zaman", zamanMiliSaniye);

        try{

        db.insertOrThrow("Koordinatlar", null, degerler);

        }
        catch(SQLException ex){
            ex.printStackTrace();
        }

    }

    private void dosyayaYaz(){

        Cursor dataReader;

        File myFile;  
        myFile= new File("sdcard/"+dosyaAdi.toString()+".csv");

            try {
                myFile.createNewFile();
            FileOutputStream fOut = new FileOutputStream(myFile);
            OutputStreamWriter myOutWriter = new OutputStreamWriter(fOut);

            myOutWriter.append("X Koor;Y Koor;Z Koor");
            myOutWriter.append("\n");

            dataReader=db.rawQuery("SELECT * FROM Koordinatlar", null);

            while(dataReader.moveToNext()){

                Float xDeg=(dataReader.getFloat(dataReader.getColumnIndex("xKoor")));
                Float yDeg=(dataReader.getFloat(dataReader.getColumnIndex("yKoor")));
                Float zDeg=(dataReader.getFloat(dataReader.getColumnIndex("zKoor")));

                myOutWriter.append(String.format("%f",xDeg)+";"+String.format("%f",yDeg)+";"+String.format("%f",zDeg));
                myOutWriter.append("\n");

            }

            myOutWriter.close();
            fOut.close();

            Toast toast=Toast.makeText(getBaseContext(), "Koordinat değerleri başarıyla dosyaya yazıldı, feature değerleri üretiliyor...Lütfen bekleyiniz...",Toast.LENGTH_SHORT);
            toast.show();

        } 
        catch(IOException ex){
            Toast toast=Toast.makeText(getBaseContext(), "Dosyaya yazma sırasında bir hata oluştu"+" "+ex.toString(),Toast.LENGTH_LONG);
            toast.show();
        }
            gf.letsRollOut();
    }

      protected void onPause() {
            //  is called when a different Activity instance is going to be visible
            //        and the current Activity has stopped interacting with the user
            super.onPause();
            sm.unregisterListener(this);

        }

      protected void onResume() {
            //is called when the Activity object and its views become interactive with the user
            super.onResume();
            sm.registerListener(this, myAccelerometer,50000);

        }

      protected void onStop() {

            //is called when an activity is no longer visible to, or interacting with, the user
            super.onStop();
            sm.unregisterListener(this);

        }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

public Intent getIntent(Context context){

    Cursor dataReader;

    valuesX.clear();
    valuesY.clear();
    valuesZ.clear();

     float zamanIndis=(float) 0.0;
    String sqlIfadesi="SELECT * FROM Koordinatlar WHERE zaman>=((SELECT MAX(zaman) FROM Koordinatlar)-10000)";

    dataReader=db.rawQuery(sqlIfadesi, null);

    int veriSayisi;
    veriSayisi=dataReader.getCount();

    while(dataReader.moveToNext()){

        valuesX.add(dataReader.getFloat(dataReader.getColumnIndex("xKoor")));
        valuesY.add(dataReader.getFloat(dataReader.getColumnIndex("yKoor")));
        valuesZ.add(dataReader.getFloat(dataReader.getColumnIndex("zKoor")));
        zamanIndis=zamanIndis+1;
        zamanDiyagrami.add(zamanIndis);
    }

        TimeSeries series = new TimeSeries("Line1"); 
        for( int i = 0; i < veriSayisi; i++)
        {
            series.add(zamanDiyagrami.get(i), valuesX.get(i));
        }

        TimeSeries series2 = new TimeSeries("Line2"); 
        for( int i = 0; i < veriSayisi; i++)
        {
            series2.add(zamanDiyagrami.get(i), valuesY.get(i));
        }

        TimeSeries series3 = new TimeSeries("Line3"); 
        for( int i = 0; i < veriSayisi; i++)
        {
            series3.add(zamanDiyagrami.get(i), valuesZ.get(i));
        }

        XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
        dataset.addSeries(series);
        dataset.addSeries(series2);
        dataset.addSeries(series3);

        series.setTitle("X Coor");
        series2.setTitle("Y Coor");
        series3.setTitle("Z Coor");

        XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer(); 
        XYSeriesRenderer renderer = new XYSeriesRenderer(); 
        XYSeriesRenderer renderer2 = new XYSeriesRenderer(); 
        XYSeriesRenderer renderer3 = new XYSeriesRenderer();
        mRenderer.addSeriesRenderer(renderer);
        mRenderer.addSeriesRenderer(renderer2);
        mRenderer.addSeriesRenderer(renderer3);

        renderer.setColor(Color.GREEN);
        renderer.setPointStyle(PointStyle.DIAMOND);

        renderer2.setColor(Color.BLUE);
        renderer2.setPointStyle(PointStyle.DIAMOND);

        renderer3.setColor(Color.RED);
        renderer3.setPointStyle(PointStyle.DIAMOND);

        return ChartFactory.getLineChartIntent(context, dataset, mRenderer, "Koordinatlar");

    }

public void onDialogPositiveClick(DialogFragment dialog) {

    EditText et=(EditText)dialog.getDialog().findViewById(R.id.editText1);
    dosyaAdi=et.getText().toString();
    dosyayaYaz();

}

public void onDialogNegativeClick(DialogFragment dialog) {

    dialog.dismiss();

    sm.registerListener(this, myAccelerometer,50000);

}
} 
```

这是 generateFeatures 类：

```
public class generateFeatures extends MainActivity{
    private ContentValues myContentValues;
    private float totalX,totalY,totalZ,averageX,averageY,averageZ,stdX,stdY,stdZ,aadX,aadY,aadZ,averageResultantAcc,maxX,maxY,maxZ; 
    private VeriTabani veritabani;
    private SQLiteDatabase db;
    private String dosyaAdi;

    public generateFeatures(String dosyaAdi){

        veritabani= new VeriTabani(this);
        db=veritabani.getWritableDatabase();
        this.dosyaAdi=dosyaAdi;

    }

    public void letsRollOut(){
        boolean bitti=false;

        Cursor firstTimeHandler=db.rawQuery("SELECT MIN(zaman) FROM Koordinatlar", null);
        firstTimeHandler.moveToFirst();

        long firstTime= firstTimeHandler.getLong(0);
        long nextTime=firstTime+3000;

        Cursor lastTimeHandler=db.rawQuery("SELECT MAX(zaman) FROM Koordinatlar", null);
        lastTimeHandler.moveToFirst();

        long lastTime=lastTimeHandler.getLong(0);

        while(!bitti){

            calculateAverage(firstTime,nextTime);
            calculateStandartDev(firstTime,nextTime);
            calculateAverageAbsoluteDifferance(firstTime,nextTime);
            calculateAverageResultant(firstTime,nextTime);
            calculateMax(firstTime,nextTime);
            calculateBinnedDist(firstTime,nextTime);

            firstTime=(long) (nextTime+0.000001);
            nextTime=(nextTime+3000);

            if(nextTime>=lastTime){
                nextTime=lastTime;

                calculateAverage(firstTime,nextTime);
                calculateStandartDev(firstTime,nextTime);
                calculateAverageAbsoluteDifferance(firstTime,nextTime);
                calculateAverageResultant(firstTime,nextTime);
                calculateMax(firstTime,nextTime);
                calculateBinnedDist(firstTime,nextTime);

                bitti=true;

            }

            myContentValues.put("ortX", averageX);
            myContentValues.put("ortY", averageY);
            myContentValues.put("ortZ", averageZ);
            myContentValues.put("stdX", stdX);
            myContentValues.put("stdY", stdY);
            myContentValues.put("stdZ", stdZ);
            myContentValues.put("aadX", aadX);
            myContentValues.put("aadY", aadY);
            myContentValues.put("aadZ", aadZ);
            myContentValues.put("maxX", maxX);
            myContentValues.put("maxY", maxY);
            myContentValues.put("maxZ", maxZ);
            myContentValues.put("averageResultantAcc", averageResultantAcc);

            db.insertOrThrow("Features", null, myContentValues);
        }

        dosyayaYaz(dosyaAdi);
    } 
```

数据库类：

```
public class VeriTabani extends SQLiteOpenHelper {

    private final static String veriTabaniAdi="dataBase1";
    private static final int veriTabaniVersiyon=5;

    public VeriTabani(Context context) {
        super(context, veriTabaniAdi, null, veriTabaniVersiyon);
        // TODO Auto-generated constructor stub
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        final String tablo1,tablo2;
        tablo1="CREATE TABLE Koordinatlar (_id INTEGER primary key AUTOINCREMENT,xKoor REAL,yKoor REAL,zKoor REAL,zaman INTEGER);";
        db.execSQL(tablo1);
        tablo2="CREATE TABLE Features (_id INTEGER primary key AUTOINCREMENT,ortX REAL,ortY REAL,ortZ REAL,stdX REAL,stdY REAL,stdZ REAL,maxX REAL,maxY REAL,maxZ REAL,aadX REAL,aadY REAL,aadZ REAL,averageResultantAcc REAL,binX1 INTEGER,binX2 INTEGER,binX3 INTEGER,binX4 INTEGER,binX5 INTEGER,binX6 INTEGER,binX7 INTEGER,binX8 INTEGER,binX9 INTEGER,binX10 INTEGER,binY1 INTEGER,binY2 INTEGER,binY3 INTEGER,binY4 INTEGER,binY5 INTEGER,binY6 INTEGER,binY7 INTEGER,binY8 INTEGER,binY9 INTEGER,binY10 INTEGER,binZ1 INTEGER,binZ2 INTEGER,binZ3 INTEGER,binZ4 INTEGER,binZ5 INTEGER,binZ6 INTEGER,binZ7 INTEGER,binZ8 INTEGER,binZ9 INTEGER,binZ10 INTEGER);";
        db.execSQL(tablo2);

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        db.execSQL("DROP TABLE IF EXISTS Koordinatlar");
        db.execSQL("DROP TABLE IF EXISTS Features");
        onCreate(db);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:03:00.940

你不能这样做：

```
 gf=new generateFeatures(dosyaAdi); 
```

Activity**只能**由 Android 框架创建；你不能打电话`new`来获取活动。如果您想正确共享您的数据库代码，您必须将其移至单独的类。

# php - 如何从 php 字符串中删除“ï¿½”？

> ID：14060453
> 
> 赞同：5
> 
> 时间：2012-12-27T19:52:29.487
> 
> 标签：php, string, utf-8, byte-order-mark

> **可能重复：**
> [如何替换字符串中的ï¿½](https://stackoverflow.com/questions/1488866/how-to-replace-i-in-a-string)

我正在从来自数据库的 XML 表中读取数据。在原始输出中，我遇到了这个字符“ï¿½”，它是 UTF-8 字符串，意思是“�”。在搜索“�”或“ï¿½”时，使用 str_replace 进行简单的搜索和删除并不能解决问题。有没有其他方法可以从字符串中删除这个字符？

更新：

作为参考，这是为我清理字符串的函数。

```
 function db_utf8_convert($str)
{
    $convmap = array(0x80, 0x10ffff, 0, 0xffffff);
    return preg_replace('/\x{EF}\x{BF}\x{BD}/u', '', mb_encode_numericentity($str, $convmap, "UTF-8"));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:21:10.887

你可以这样做：

```
$str = 'UTF-8 string meaning "ï¿½"';
echo preg_replace('/\x{EF}\x{BF}\x{BD}/u', '', iconv(mb_detect_encoding($str), 'UTF-8', $str)); 
```

**输出：** `UTF-8 string meaning ""`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T20:06:09.420

你可以做类似这样的事情：

```
<?php
$string = "asd fsa fsaf sf ï¿½ asdfasdfs";

echo preg_replace("/[^\p{Latin} ]/u", "", $string); 
```

查看此脚本以获取更多字符匹配：
[http ://www.regular-expressions.info/unicode.html#script](http://www.regular-expressions.info/unicode.html#script)

**编辑**

我确实发现，这个，人们说它有效，你可以试一试：

```
<?php
function removeBOM($str=""){
    if(substr($str, 0,3) == pack("CCC",0xef,0xbb,0xbf)) {
        $str=substr($str, 3);
    }
    return $str;
}
?> 
```

# sql - 使用 group by 的 SQL 查询输出

> ID：14060468
> 
> 赞同：0
> 
> 时间：2012-12-27T19:53:49.847
> 
> 标签：sql, oracle, group-by

我在 Oracle 数据库中有这个视图，我正在尝试使用 SQL 查询生成报告，但最近几天它无法正常工作，因此决定寻求专家建议。

View 运行良好。基本上，视图的作用是记录所有登录到任何数据库以进行审计的用户。

查看栏目：

*   数据库名称
*   用户名
*   服务器
*   程序
*   登录时间

问题：

1.  我正在尝试生成 SQL 以按日期为 2012 年 12 月 26 日登录到 dbname=x 的所有用户名和程序进行分组

2.  计算用户在 2012 年 12 月 26 日登录的不同用户名和程序

基本上试图获取...如果 dbname=x 通过用户名=abc 获得 50000 登录，那么 abc 是从哪个服务器和哪个程序连接的？

尝试了以下查询

```
 select dbname, username, server, program, logon_time from audit 
    where username = abc and 
    dbname in (select dbname from audit
       where dbname='x' and logon_time = to_date('26-DEC-2012','DD-MON-YYY')) 
         group by username, program 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:20:10.393

你可以尝试这样的事情：

```
SELECT dbname, username, server, program, trunc(logon_time), count(*) FROM audit 
WHERE username = 'abc'
AND dbname = 'x' 
AND logon_time >= to_date('26-DEC-2012','DD-MON-YYY')
AND logon_time < to_date('27-DEC-2012','DD-MON-YYY')
GROUP BY dbname, username, server, program, trunc(logon_time) 
```

**编辑：**修改答案以修复康拉德指出的分组错误。
仍然不是 100% 确定需要什么，但这应该更接近。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:25:23.517

这似乎很简单，除了[将日期+时间信息重新格式化为](http://www.oradev.com/oracle_date_format.jsp)日期信息的问题。

查询一：

```
SELECT username, program
  FROM Audit
 WHERE dbname = 'x'
   AND TO_CHAR(logon_time, 'YYYY-MM-DD') = '2012-12-26'
 GROUP BY username, program; 
```

`'x'`这应该会为您提供2012 年 12 月 26 日登录到数据库的不同用户名、程序组合的列表。

查询 2：

除了关于数据库名称的条件之外，您需要查询 1 中的行数，因此：

```
SELECT COUNT(*)
  FROM (SELECT username, program
          FROM Audit
         WHERE TO_CHAR(logon_time, 'YYYY-MM-DD') = '2012-12-26'
         GROUP BY username, program
       ) 
```

这应该让您计算 2012 年 12 月 26 日连接到任何数据库的不同用户名、程序组合。

# jquery - 在使用 Jquery 的 prependTo 或 appendTo 之后，并非所有 css 都可以工作

> ID：14060472
> 
> 赞同：0
> 
> 时间：2012-12-27T19:53:55.257
> 
> 标签：jquery

在动态创建 Div 然后使用 prependTo 或 appendTo 到另一个 div 时，并非所有的 css 都有效。例如，如果：

```
var myDiv = $("<div></div>");

myDiv.attr("id", "xd_1").removeAttr('class').attr('class','boogar');
myDiv.css({'color': 'blue', 'height': '10px', 'width': '10px',  'top': '131px', 
'left':  '126px'}).html('52').prependTo("#numbers"); 
```

只有 CSS 颜色、高度和宽度有效。顶部和左侧没有。任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T19:55:42.800

`top`如果位置不是相对的、绝对的或固定的，`left`则不要做任何事情。

还可以尝试稍微更改您的代码（这是您*可以*做什么的模型）：

```
var myDiv = $("<div>");

myDiv.prop("id", "xd_1")
   .addClass('boogar')
   .css({
      'color': 'blue', 
      'height': '10px', 
      'width': '10px',  
      'top': '131px', 
      'left':  '126px'})
   .html('52').prependTo("#numbers"); 
```

# javascript - tinymce - 调整这个 js 只影响 1 个文本区域

> ID：14060473
> 
> 赞同：0
> 
> 时间：2012-12-27T19:53:58.830
> 
> 标签：javascript, tinymce

基本上，我将 TinyMCE 用于我的文本区域以便于编辑，并且有人为我构建了这个 JS，使 textarea 只能达到 255 个字符。

唯一的问题是它会影响页面上包含的**所有**文本区域而不是一组文本区域，我不知道 JS，所以如果你们中的一个向导可以指导我添加一个我可以设置要影响的文本区域的位置，我会徘徊吗？

```
<script type="text/javascript" src="/jscripts/tiny_mce/tiny_mce.js"></script>
<script type="text/javascript">
tinyMCE.init({
        mode : "textareas",
        theme : "advanced",
        plugins : "bbcode",
        theme_advanced_buttons1 : "bold,italic,underline,undo,redo,link,unlink,image,forecolor,styleselect,removeformat,cleanup,code",
        theme_advanced_buttons2 : "",
        theme_advanced_buttons3 : "",
        theme_advanced_toolbar_location : "bottom",
        theme_advanced_toolbar_align : "center",
        theme_advanced_styles : "Code=codeStyle;Quote=quoteStyle",
    theme_advanced_resizing : true,
    theme_advanced_path : false,
        content_css : "css/bbcode.css",
        entity_encoding : "raw",
        add_unload_trigger : false,
        remove_linebreaks : false,
        inline_styles : false,
        forced_root_block : '',
        convert_fonts_to_spans : false,
        theme_advanced_statusbar_location : "bottom",
    setup: function(ed) {
        ed.onKeyUp.add(function(ed, e) {
        // What is the max amount of characters you want
        var maxChars = 255;
        var content = tinyMCE.activeEditor.getContent();
        // Remove any BBCode tags from the count
        var strip = content.replace(/\[\/?(?:b|i|u|url|quote|code|img|color|size)*?.*?\]/img, '');
        // Set the text for what we want to display in the status bar
        var text = strip.split(' ').length + " Words, " + strip.length + " Characters"
        // Show the status bar message
                tinymce.DOM.setHTML(tinymce.DOM.get(tinyMCE.activeEditor.id + '_path_row'), text);
        // Is there more Characters than we want
        if (strip.length > maxChars) 
        {
            // Show an alert (can comment out)
            alert("Sorry too many characters "  + strip);
            // Get all characters up to the limit
            cur = strip.substring(0,maxChars);
            // Replace content with the max amount
            tinyMCE.activeEditor.setContent(oldContent);
        }

        else
        {
            oldContent = content;

        }

            });

        }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T06:48:09.173

你需要做的就是

```
//find the id of the currently active editor
var editor_name=tinyMCE.activeEditor.editorId; 
```

然后

```
//provide regex for list of editors to be matched
var editors_to_be_matched = /first_editor|third_editor/; 
```

寻找

```
//if active editor matches against the list of editors
var matched = editor_name.match(editors_to_be_matched); 
```

如果

```
//active editor does not matches return
if(!matched) return; 
```

别的

```
//do character count stuff
your code here 
```

所以这就是你的情况

```
 ed.onKeyUp.add(function(ed, e) {
    var editor_name =tinyMCE.activeEditor.editorId;
    var editors_to_be_matched = /first_editor|third_editor/;
    var matched = editor_name.match(editors_to_be_matched);

    if(!matched) return;
    alert("Do character count stuff here");
    // your code here

    // What is the max amount of characters you want
    var maxChars = 255;
    var content = tinyMCE.activeEditor.getContent();
    ........
    ..........

        }); 
```

这是一个[演示](http://fiddle.tinymce.com/25caab/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T20:37:26.553

要使 tinymce 仅在某些文本区域上工作，您应该将模式更改为“精确”并在元素参数中指定 html 元素 ID，如下所示：

```
tinyMCE.init({
        mode : "exact",
        elements : "elm1,elm2",
}); 
```

您可以在此处找到有关 tinymce 模式的更多信息：[http ://www.tinymce.com/wiki.php/Configuration:mode](http://www.tinymce.com/wiki.php/Configuration:mode)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T12:53:33.690

此处的显示名称是新代码，然后您可以检查一下吗:)，我想我是对的。

```
<script type="text/javascript" src="/jscripts/tiny_mce/tiny_mce.js"></script>
<script type="text/javascript">
tinyMCE.init({
        mode : "textareas",
        theme : "advanced",
        plugins : "bbcode",
        theme_advanced_buttons1 : "bold,italic,underline,undo,redo,link,unlink,image,forecolor,styleselect,removeformat,cleanup,code",
        theme_advanced_buttons2 : "",
        theme_advanced_buttons3 : "",
        theme_advanced_toolbar_location : "bottom",
        theme_advanced_toolbar_align : "center",
        theme_advanced_styles : "Code=codeStyle;Quote=quoteStyle",
    theme_advanced_resizing : true,
    theme_advanced_path : false,
        content_css : "css/bbcode.css",
        entity_encoding : "raw",
        add_unload_trigger : false,
        remove_linebreaks : false,
        inline_styles : false,
        forced_root_block : '',
        convert_fonts_to_spans : false,
        theme_advanced_statusbar_location : "bottom",
    setup: function(ed) {
        ed.onKeyUp.add(function(ed, e) {
        // What is the max amount of characters you want
        var maxChars = 255;
        var content = tinyMCE.activeEditor.getContent();
        var editor_name = tinyMCE.activeEditor.editorId;
        var editors_to_be_matched = /tagline/;
        var matched = editor_name.match(editors_to_be_matched);

        if(!matched) return;

        // Remove any BBCode tags from the count
        var strip = content.replace(/\[\/?(?:b|i|u|url|quote|code|img|color|size)*?.*?\]/img, '');
        // Set the text for what we want to display in the status bar
        var text = strip.split(' ').length + " Words, " + strip.length + " Characters"
        // Show the status bar message
                tinymce.DOM.setHTML(tinymce.DOM.get(tinyMCE.activeEditor.id + '_path_row'), text);
        // Is there more Characters than we want
        if (strip.length > maxChars) 
        {
            // Show an alert (can comment out)
            alert("Sorry too many characters "  + strip);
            // Get all characters up to the limit
            cur = strip.substring(0,maxChars);
            // Replace content with the max amount
            tinyMCE.activeEditor.setContent(oldContent);
        }

        else
        {
            oldContent = content;

        }

            });

        }
});
</script> 
```

# html - 移除框架滚动条

> ID：14060475
> 
> 赞同：3
> 
> 时间：2012-12-27T19:54:18.910
> 
> 标签：html, frame

我设计了一个带有框架的网页。这是我的作业，所以我必须使用框架。在我的页面中有很多框架，内部框架有滚动条。我需要删除它，我该如何删除它？

这是我的 main.html 代码：

```
<frameset frameborder="NO" framespacing="0" cols="18%,*,18%" border="0" >
<!-- Navigational Bar -->
    <frame src="side.html" name="left" marginwidth="5" marginheight="5" frameborder="NO" border="0" noresize="noresize">
<!-- Interior Frame -->
    <frameset frameborder="NO" framespacing="0" rows="280,*" border="0">
        <frame src="header.html" name="middle" marginwidth="5" marginheight="5" frameborder="NO" border="0" noresize="noresize">
        <frameset frameborder="NO" framespacing="0" cols="180,*" border="0">
            <frame src="left.html" name="anasayfa" marginwidth="5" marginheight="5" frameborder="NO" border="0" noresize="noresize">
            <frame src="anasayfa.html" name="mainframe" marginwidth="5" marginheight="5" frameborder="NO" border="0" noresize="noresize">
        </frameset>
    </frameset>
<!-- Interior Frame -->
    <frame src="side.html" name="right" marginwidth="5" marginheight="5" frameborder="NO" border="0" noresize="noresize">
</frameset> 
```

这是我的页面前景：

![在此处输入图像描述](../Images/482824076bc7eb95d5e3320656bd13ee.png)

http://download.cnet.com/YouTube-To-MP3/3000-2071_4-75810474.html >youtube 到 mp3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:18:19.213

只需在带有框架的行中添加到 main.html：

```
scrolling="no" 
```

所以结果是：

```
<frame scrolling="no" src="left.html" name="anasayfa" marginwidth="5" marginheight="5" frameborder="NO" border="0" noresize="noresize" > 
```

这是您的 main.html 结果：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>

<head>
<title></title>
<meta name="keywords" content="Webpage, design, yumakli" />
<meta name="description" content="Yumakli koyu web sayfasi" />
<style type = "text/css">
frame{
    overflow:hidden;
}
</style>
</style>
<script></script>
</head>
<div style="width:5000; height:5000;">
<frameset frameborder="NO" framespacing="0" cols="18%,*,18%" border="0" >
<!-- Navigational Bar -->
    <frame src="side.html" name="left" marginwidth="5" marginheight="5" frameborder="NO" border="0" noresize="noresize"  scrolling="no">
<!-- Interior Frame -->
    <frameset frameborder="NO" framespacing="0" rows="280,*" border="0">
        <frame src="header.html" name="middle" marginwidth="5" marginheight="5" frameborder="NO" border="0" noresize="noresize"  scrolling="no">
        <frameset frameborder="NO" framespacing="0" cols="180,*" border="0">
            <frame src="left.html" name="anasayfa" marginwidth="5" marginheight="5" frameborder="NO" border="0" noresize="noresize" scrolling="no">
            <frame src="anasayfa.html" name="mainframe" marginwidth="5" marginheight="5" frameborder="NO" border="0" noresize="noresize" scrolling="no">
        </frameset>
    </frameset>
<!-- Interior Frame -->
    <frame src="side.html" name="right" marginwidth="5" marginheight="5" frameborder="NO" border="0" noresize="noresize"  scrolling="no">
</frameset>
</div>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T19:59:58.513

只需 `overflow: hidden;`在对象上设置：

```
#objectID {
    overflow: hidden;
} 
```

***注意：***更改`objectID`为您的对象 ID。

您也可以尝试：

```
frame{
    overflow:hidden;
} 
```

它可能会起作用......如果你尝试不会伤害:)

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T20:21:23.650

好的，所以您需要做的就是`scrolling="no"`在每个`'frame'`标签上添加：。

听起来很简单。

**但请注意：**您将获得框架内项目的全宽（这就是为什么有一个滚动条）

希望我能帮助:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T20:09:00.070

向您的框架添加一个`scrolling`属性并将值设置为`no`.

[http://www.w3schools.com/tags/att_frame_scrolling.asp](http://www.w3schools.com/tags/att_frame_scrolling.asp)

编辑：

另一种选择是在您当前创建的框架周围[添加另一个框架集。](http://www.webxpertz.net/forums/showthread.php/257-How-do-I-get-two-frames-to-scroll-off-one-scroll-bar-i-e-act-as-if-one-page#post5088)

在[这个问题](https://stackoverflow.com/questions/4237566/two-frames-one-scrollbar)中找到并适应你。

文件 index.html：

```
<html>
    <frameset rows="1,480" frameborder="NO" border="0" noresize="noresize" scrolling="yes">
        <FRAME SRC="javascript:<HTML></HTML>" NAME="dummy" FRAMEBORDER="NO" MARGINHEIGHT="0" MARGINWIDTH="0" NORESIZE SCROLLING="NO">
        <FRAME SRC="main.html" NAME="scrollcontent" FRAMEBORDER="NO" MARGINHEIGHT="0" MARGINWIDTH="0" NORESIZE SCROLLING="yes">
    </frameset>
</html> 
```

文件 main.html

```
<html><frameset frameborder="NO" framespacing="0" cols="18%,*,18%" border="0" >
<!-- Navigational Bar -->
    <frame src="side.html" name="left" marginwidth="5" marginheight="5" frameborder="NO" border="0" noresize="noresize">
<!-- Interior Frame -->
    <frameset frameborder="NO" framespacing="0" rows="280,*" border="0">
        <frame src="header.html" name="middle" marginwidth="5" marginheight="5" frameborder="NO" border="0" noresize="noresize" SCROLLING="NO">
        <frameset frameborder="NO" framespacing="0" cols="180,*" border="0">
            <frame src="left.html" name="anasayfa" marginwidth="5" marginheight="5" frameborder="NO" border="0" noresize="noresize" SCROLLING="NO">
            <frame src="anasayfa.html" name="mainframe" marginwidth="5" marginheight="5" frameborder="NO" border="0" noresize="noresize" SCROLLING="NO">
        </frameset>
    </frameset>
<!-- Interior Frame -->
    <frame src="side.html" name="right" marginwidth="5" marginheight="5" frameborder="NO" border="0" noresize="noresize">
</frameset>
</html> 
```

看看这是否适合你。

# objective-c - 标签栏控制器项目从右开始

> ID：14060476
> 
> 赞同：0
> 
> 时间：2012-12-27T19:54:18.557
> 
> 标签：objective-c, ios, xcode, uitabbarcontroller

我正在尝试使标签栏的项目从右侧开始。我的意思是：

**对象选项卡：**

> 1 2 3 4

**会像：**

> 4 3 2 1

**但是当我在视觉上做到这一点时，它会：**

> 1 2 3 4

**当项目在视觉上看起来像：**

> 4 3 2 1

我希望它以**1**打开（最正确的选项）

任何帮助都会有所帮助！谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:28:19.207

好的，你所做的就是忽略你的interfacebuilder中的设置。

在您`AppDelegate.m`中，您`UITabbarController`最有可能启动...并将其更改为以下内容：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    // Override point for customization after application launch.
    UIViewController *viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
    UIViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    UIViewController *viewController3 = [[ThirdViewController alloc] initWithNibName:@"ThirdViewController" bundle:nil];
    UIViewController *viewController4 = [[FourthViewController alloc] initWithNibName:@"FourthViewController" bundle:nil];

    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = @[viewController4, viewController3, viewController2, viewController1];

    self.window.rootViewController = self.tabBarController;

    [self.window makeKeyAndVisible];
    return YES;
} 
```

这应该使您的选项卡按 4、3、2、1 的顺序显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T08:08:29.887

订购您的标签栏项目，如果它在 xib 文件中，或者如果它是在代码中以编程方式创建的。要将第一个选项卡设置在左侧，请将选项卡控制器选定项设置为索引 0，如果您希望它从右侧开始，请在最后一个选项卡项设置索引。

# amazon-s3 - 使用 boto 或 simples3 API 流式上传到 AmazonS3

> ID：14060479
> 
> 赞同：2
> 
> 时间：2012-12-27T19:54:29.520
> 
> 标签：amazon-s3, python-2.7, boto

amazons3 的 boto API (python) 是流式上传吗？还有另一个 API 叫做 Simples3。我认为没有人听说过它。 [http://pypi.python.org/pypi/simples3](http://pypi.python.org/pypi/simples3)

它有一个用于流式上传的函数调用。但如果它有流式上传选项，我想使用 boto。

我知道 Boto 的 Multipart。我不想使用多部分，因为我不想拆分磁盘上的文件并拥有一个巨大的文件并将其拆分。我相信这是浪费空间。

boto 和 simples3 有什么区别

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T22:29:44.203

如果“流式上传”是指分块传输编码，那么我认为 boto、simples3 或任何其他包都不会支持它，因为 S3 不支持它。Boto 具有流式传输方法，但仅受 Google Cloud Storage 支持。

# java - Android OpenGL ES 教程

> ID：14060489
> 
> 赞同：3
> 
> 时间：2012-12-27T19:54:49.223
> 
> 标签：java, android, opengl-es

我正在浏览 Android 开发者网站上的教程，现在我已经多次构建环境，但没有得到教程指出的“灰屏”应该是结果。

链接到相关教程：http: [//developer.android.com/training/graphics/opengl/environment.html](http://developer.android.com/training/graphics/opengl/environment.html)

该程序似乎可以很好地编译和安装，但是当它运行时“意外关闭”。

这是我的代码... Main.java：

```
package com.wiley.openglplayground;

import android.app.Activity;
import android.content.Context;
import android.opengl.GLSurfaceView;
import android.os.Bundle;

public class Main extends Activity {

    private GLSurfaceView mGLView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mGLView = new GLSurfaceView(this);
        setContentView(mGLView);
    }

    class MyGLSurfaceView extends GLSurfaceView {

        public MyGLSurfaceView(Context context) {
            super(context);

            setEGLContextClientVersion(2);

            setRenderer(new MyRenderer());

            setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY);
        }
    }
} 
```

MyRenderer.java：

```
package com.wiley.openglplayground;

import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.opengles.GL10;

import android.opengl.GLES20;
import android.opengl.GLSurfaceView;

public class MyRenderer implements GLSurfaceView.Renderer {

    @Override
    public void onDrawFrame(GL10 gl) {
        GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

    }

    @Override
    public void onSurfaceChanged(GL10 gl, int width, int height) {
        GLES20.glViewport(0, 0, width, height);

    }

    @Override
    public void onSurfaceCreated(GL10 gl, EGLConfig config) {
        GLES20.glClearColor(0.5f, 0.5f, 0.5f, 1.0f);
    }

} 
```

据我所知，代码应该像教程中的那样工作......我错过了什么？我不应该在这个阶段运行它吗？

多谢你们！

根据请求，这是 LogCat 输出：

```
12-27 14:27:05.768: W/ActivityThread(3493): Application com.wiley.openglplayground is waiting for the debugger on port 8100...
12-27 14:27:05.778: I/System.out(3493): Sending WAIT chunk
12-27 14:27:05.878: I/dalvikvm(3493): Debugger is active
12-27 14:27:05.978: I/System.out(3493): Debugger has connected
12-27 14:27:05.978: I/System.out(3493): waiting for debugger to settle...
12-27 14:27:06.179: I/System.out(3493): waiting for debugger to settle...
12-27 14:27:06.379: I/System.out(3493): waiting for debugger to settle...
12-27 14:27:06.579: I/System.out(3493): waiting for debugger to settle...
12-27 14:27:06.779: I/System.out(3493): waiting for debugger to settle...
12-27 14:27:06.979: I/System.out(3493): waiting for debugger to settle...
12-27 14:27:07.180: I/System.out(3493): waiting for debugger to settle...
12-27 14:27:07.380: I/System.out(3493): waiting for debugger to settle...
12-27 14:27:07.580: I/System.out(3493): debugger has settled (1420)
12-27 14:27:07.890: D/libEGL(3493): loaded /system/lib/egl/libGLES_android.so
12-27 14:27:07.890: D/libEGL(3493): loaded /system/lib/egl/libEGL_adreno200.so
12-27 14:27:07.900: D/libEGL(3493): loaded /system/lib/egl/libGLESv1_CM_adreno200.so
12-27 14:27:07.900: D/libEGL(3493): loaded /system/lib/egl/libGLESv2_adreno200.so
12-27 14:27:07.950: D/OpenGLRenderer(3493): Enabling debug mode 0
12-27 14:27:08.711: D/dalvikvm(3493): threadid=1: still suspended after undo (sc=1 dc=1)
12-27 14:28:21.132: D/AndroidRuntime(3493): Shutting down VM
12-27 14:28:21.132: W/dalvikvm(3493): threadid=1: thread exiting with uncaught exception (group=0x40a601f8)
12-27 14:28:21.252: E/AndroidRuntime(3493): FATAL EXCEPTION: main
12-27 14:28:21.252: E/AndroidRuntime(3493): java.lang.NullPointerException
12-27 14:28:21.252: E/AndroidRuntime(3493):     at android.opengl.GLSurfaceView.surfaceCreated(GLSurfaceView.java:512)
12-27 14:28:21.252: E/AndroidRuntime(3493):     at android.view.SurfaceView.updateWindow(SurfaceView.java:533)
12-27 14:28:21.252: E/AndroidRuntime(3493):     at android.view.SurfaceView.access$000(SurfaceView.java:81)
12-27 14:28:21.252: E/AndroidRuntime(3493):     at android.view.SurfaceView$3.onPreDraw(SurfaceView.java:169)
12-27 14:28:21.252: E/AndroidRuntime(3493):     at android.view.ViewTreeObserver.dispatchOnPreDraw(ViewTreeObserver.java:590)
12-27 14:28:21.252: E/AndroidRuntime(3493):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1617)
12-27 14:28:21.252: E/AndroidRuntime(3493):     at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2442)
12-27 14:28:21.252: E/AndroidRuntime(3493):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-27 14:28:21.252: E/AndroidRuntime(3493):     at android.os.Looper.loop(Looper.java:137)
12-27 14:28:21.252: E/AndroidRuntime(3493):     at android.app.ActivityThread.main(ActivityThread.java:4575)
12-27 14:28:21.252: E/AndroidRuntime(3493):     at java.lang.reflect.Method.invokeNative(Native Method)
12-27 14:28:21.252: E/AndroidRuntime(3493):     at java.lang.reflect.Method.invoke(Method.java:511)
12-27 14:28:21.252: E/AndroidRuntime(3493):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
12-27 14:28:21.252: E/AndroidRuntime(3493):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
12-27 14:28:21.252: E/AndroidRuntime(3493):     at dalvik.system.NativeStart.main(Native Method)
12-27 14:28:21.442: I/Process(3493): Sending signal. PID: 3493 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T18:32:56.267

好吧，我想通了。

我意识到，当我初始化 mGLView 变量时，我使用新的 GLSurfaceView 而不是 * *My* *GLSurfaceView 对其进行初始化。

固定代码：

```
package com.wiley.opengles;

import android.app.Activity;
import android.content.Context;
import android.opengl.GLSurfaceView;
import android.os.Bundle;

public class MainActivity extends Activity {

    public GLSurfaceView mGLView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mGLView = new MyGLSurfaceView(this); //This is where the problem was.
        setContentView(mGLView);
    }
}

class MyGLSurfaceView extends GLSurfaceView {

    public MyGLSurfaceView(Context context) {
        super(context);

        setEGLContextClientVersion(2);

        setRenderer(new MyRenderer());
        setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY);
    }
} 
```

# objective-c - 如何在 Objective-C 中实现 Enum myEnum=Enum.FirstValue

> ID：14060490
> 
> 赞同：0
> 
> 时间：2012-12-27T19:54:57.307
> 
> 标签：objective-c, syntax, enums

在 C# 中，我可以使用这样的枚举：

```
enum TrafficLight{Red,Yellow,Green};
.......
TrafficLight light=TrafficLight.Yellow; 
```

在 Objective-C 中，我写道：

```
 typedef enum trafficLight{
    Red,
    Yellow,
    Green
}TrafficLight; 
```

但是如果我想将一个 TrafficLight 变量分配给 TrafficLight.Yellow，这是不可能的。我只能写

```
TrafficLight light=Yellow; 
```

是否也可以在 Objective-C 中使用点符号访问枚举中的常量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:03:29.980

常见的做法如下

```
enum {
    TrafficLightColorRed,
    TrafficLightColorYellow,
    TrafficLightColorGreen
};
typedef NSInteger TrafficLightColor;

TrafficLightColor color = TrafficLightColorYellow; 
```

这样参数的类型是其枚举元素的开始

抱歉，我无法获得您想要的结果，但据我所知，这是标准做法。

# java - 打开junit测试用例时Eclipse挂起

> ID：14060492
> 
> 赞同：0
> 
> 时间：2012-12-27T19:55:03.643
> 
> 标签：java, eclipse, junit, eclipse-plugin

今天，在使用 eclipse 时。每当我打开 junit 测试用例文件时，我的 Eclipse 都会进入挂起状态。就这样分析了。

打开文件之前

```
 ~$ ps -o thcount 5458
  THCNT
   42 
```

打开文件后。

```
$ ps -o thcount 5458
THCNT
  195 
```

我发现线程使用率突然飙升。

我使用线程转储`jstack -l`进行调试。我发现大多数线程都处于`BLOCKED`state 。

线程转储：

在这里发布线程转储使我的问题变得难以理解。这是线程转储[https://docs.google.com/document/d/11nPbEkQMg-FMB9lPwvDK-ShNTygDN2biDUSPHMicdm4/edit?pli=1](https://docs.google.com/document/d/11nPbEkQMg-FMB9lPwvDK-ShNTygDN2biDUSPHMicdm4/edit?pli=1)。

谢谢你，卡南。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:19:34.177

看起来这是你的问题

你有自定义类加载器吗？所有被阻塞的线程都在尝试加载类。

```
com.instantiations.assist.eclipse.junit.execution.core.UserDefinedClassLoader)
    at com.instantiations.assist.eclipse.junit.execution.core.UserDefinedClassLoader.loadClass(UserDefinedClassLoader.java:62)
    - locked <0x00000007efc97ea0> (a com.instantiations.assist.eclipse.junit.execution.core.UserDefinedClassLoader)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at com.zmedia.accounts.AccountsProto$ZAID$ZUID$UserTicket$ServiceTicket.initFields(AccountsProto.java:51314)
    at com.zmedia.accounts.AccountsProto$ZAID$ZUID$UserTicket$ServiceTicket.<clinit>(AccountsProto.java:52130)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:186)
    at com.zmedia.resource.ResourceType.<init>(ResourceType.java:28)
    at com.zmedia.resource.ResourceType.loadResources(ResourceType.java:63)
    at com.zmedia.resource.URI.init(URI.java:859)
    at com.zmedia.resource.URI.<init>(URI.java:87)
    at com.zmedia.resource.URI.<init>(URI.java:81)
    at com.zmedia.accounts.Accounts$AccountURI.<init>(Accounts.java:13142)
    at com.zmedia.accounts.Accounts.getAccountURI(Accounts.java:13132)
    at com.zmedia.accounts.api.AccountTester.testGrandChildinSubresources(AccountTester.java:841) 
```

# tsql - SQL Server 展平层次结构表

> ID：14060493
> 
> 赞同：2
> 
> 时间：2012-12-27T19:55:03.763
> 
> 标签：tsql, sql-server-2008-r2, sql-server-2008r2-express

我在一个递归表中有这些数据，我想展平这个层次结构信息。我通过查询完成了这一点，但我想知道是否有更好的方法来获得相同的结果。

我拥有的数据：

```
CREATE TABLE [dbo].[ElementosGeograficos_](
    [IdElement] [int] IDENTITY(1,1) NOT NULL,
    [Name] [varchar](50) NOT NULL,
    [IdParentElement] [int] NULL,
    [IdLevel] [int] NOT NULL,

    CONSTRAINT [PK_ElementosGeograficos_] 
      PRIMARY KEY CLUSTERED ([IdElement] ASC)
GO

 insert ElementosGeograficos_ ( Name,IdParentElement,IdLevel )  select 'Colombia',null,1
 insert ElementosGeograficos_ ( Name,IdParentElement,IdLevel )  select 'Venezuela',null,1
 insert ElementosGeograficos_ ( Name,IdParentElement,IdLevel )  select 'Cundinamarca',1,2
 insert ElementosGeograficos_ ( Name,IdParentElement,IdLevel )  select 'Antioquia',1,2
 insert ElementosGeograficos_ ( Name,IdParentElement,IdLevel )  select 'Valle',1,2
 insert ElementosGeograficos_ ( Name,IdParentElement,IdLevel )  select 'Distrito Capital',2,2
 insert ElementosGeograficos_ ( Name,IdParentElement,IdLevel )  select 'Bogota',3,3
 insert ElementosGeograficos_ ( Name,IdParentElement,IdLevel )  select 'Medellin',4,3
 insert ElementosGeograficos_ ( Name,IdParentElement,IdLevel )  select 'Cali',5,3
 insert ElementosGeograficos_ ( Name,IdParentElement,IdLevel )  select 'Caracaas',6,3 
```

我需要的查询结果：

```
 - NUM  1           2                   3 
 - 1    Colombia    Null                Null 
 - 2    Venezuela   Null                Null
 - 3    Colombia    Cundinamarca        Null 
 - 4    Colombia    Antioquia           Null
 - 5    Colombia    Valle               Null 
 - 6    Venezuela   Distrito Capital    Null
 - 7    Colombia    Cundinamarca        Bogota 
 - 8    Colombia    Antioquia           Medellin
 - 9    Colombia    Valle               Cali 
 - 10   Venezuela   Distrito Capital    Caracaas 
```

我有的查询：

```
SELECT 
    EG1.IdElementoGeografico, EG1.Nombre 'Pais', 
    EG2.Nombre 'Departamento', EG3.Nombre 'Ciudad'
FROM 
    ElementosGeograficos_ EG1 
LEFT JOIN 
    ElementosGeograficos_ EG2 ON EG2.IdElementoGeografico = EG1.IdElementoPadre 
LEFT JOIN 
    ElementosGeograficos_ EG3 ON EG3.IdElementoGeografico = EG2.IdElementoPadre
WHERE 
    EG1.IdNivelGeografico = 1

UNION

SELECT 
    EG1.IdElementoGeografico, EG2.Nombre 'Pais', 
    EG1.Nombre 'Departamento', EG3.Nombre 'Ciudad'
FROM 
    ElementosGeograficos_ EG1 
LEFT JOIN 
    ElementosGeograficos_ EG2 ON EG2.IdElementoGeografico = EG1.IdElementoPadre 
LEFT JOIN 
    ElementosGeograficos_ EG3 ON EG3.IdElementoGeografico = EG2.IdElementoPadre
WHERE 
    EG1.IdNivelGeografico = 2

UNION

SELECT 
    EG1.IdElementoGeografico, EG3.Nombre 'Pais',
    EG2.Nombre 'Departamento', EG1.Nombre 'Ciudad'
FROM 
    ElementosGeograficos_ EG1 
LEFT JOIN 
    ElementosGeograficos_ EG2 ON EG2.IdElementoGeografico = EG1.IdElementoPadre 
LEFT JOIN 
    ElementosGeograficos_ EG3 ON EG3.IdElementoGeografico = EG2.IdElementoPadre
WHERE 
    EG1.IdNivelGeografico = 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:07:07.670

由于您似乎有两个已知级别，您可以只使用自联接、合并和案例语句

```
SELECT 
   first.IdElement num,
   COALESCE(third.name, second.Name, first.Name) [1],
   CASE WHEN Third.Name IS NOT NULL THEN second.Name 
        WHEN SECOND.Name IS NOT NULL THEN first.Name
   END as [2],
   CASE WHEN Third.Name IS NOT NULL and second.Name IS NOT NULL THEN First.Name 
  END [3]
FROM
  ElementosGeograficos_ first
  LEFT JOIN ElementosGeograficos_ second
  ON first.IDParentElement = second.IdElement
  LEFT JOIN ElementosGeograficos_ third
  ON second.IDParentElement = third.IdElement 
```

[演示](http://sqlfiddle.com/#!3/5c297/24)

# google-chrome - Firefox 与 Chrome 上的 HTML 画布填充差异

> ID：14060495
> 
> 赞同：2
> 
> 时间：2012-12-27T19:55:23.700
> 
> 标签：google-chrome, firefox, canvas, fill

考虑下面的片段 - 在 jsFiddle 上可用：http: [//jsfiddle.net/Xqu5U/2/](http://jsfiddle.net/Xqu5U/2/)

```
ctx = document.getElementById('canvas').getContext('2d');
ctx.beginPath();
ctx.fillStyle = '#FF0000';

for (var i = 0; i < 20; i++) {
    ctx.arc(i * 10, 50 + Math.sin(i * 0.5) * 15, 2, 0, Math.PI * 2);
}

ctx.fill(); 
```

![chrome和firefox上的画布填充之间的区别](../Images/9a2a606d9272b4bbfaf8df191115fc3c.png)

它在 Google Chrome 上按预期工作，但 Firefox 从最后一个弧线渲染到第一个弧线。如何更新上面的代码片段以使 Firefox 像 Chrome 一样绘制弧线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-16T01:49:56.620

我知道这是一个老问题，但供将来参考：

```
ctx = document.getElementById('canvas').getContext('2d');
ctx.beginPath()
ctx.fillStyle = '#FF0000'

for (var i = 0; i < 20; i++) {
    ctx.arc(i * 10, 50 + Math.sin(i * 0.5) * 15, 2, 0, Math.PI * 2)
    ctx.closePath()
}

ctx.fill() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-29T19:01:57.990

我找到了一种让它工作的方法：http: [//jsfiddle.net/Xqu5U/3/](http://jsfiddle.net/Xqu5U/3/)。基本上只是`ctx.closePath()`在`for`循环内添加。不确定这是否是最好的解决方案...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-27T01:07:37.840

它真的很旧，但有人刚刚指出我在这里。

问题是一个 chrome 错误（现在已修复，因为未确定很长时间）。FF 的行为是正确的。

`arc()`方法不包括`moveTo(x, y)`调用，而是调用`lineTo`。

因此，为了获得您想要的结果，您只需要调用要绘制的下一个弧的中心 x 和 y 坐标的`ctx.moveTo(nextCX + radius, nextCY)`位置`nextCX`和位置。`nextCY`我们添加`radius`到 x 位置是因为，当弧的起始角度设置为`0`时，弧是从 3 点钟开始绘制的，如果没有这个`+ radius`，我们仍然会`lineTo(cx + radius, cy)`添加一个内部，在调用时可见`stroke()`。

```
var ctx = document.getElementById('canvas').getContext('2d');

ctx.beginPath();
ctx.fillStyle = '#FF0000';
for (var i = 0; i < 20; i++) {
    // you need to moveTo manually.
    ctx.moveTo(i * 10 + 2, 50 + Math.sin(i * 0.5) * 15)
    ctx.arc(i * 10, 50 + Math.sin(i * 0.5) * 15, 2, 0, Math.PI * 2);
}
ctx.fill();
```

```
<canvas id="canvas"></canvas>
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-27T20:03:39.840

你真的没有什么可做的...

这是两个浏览器的工作方式......

您始终可以使用 CSS 和正确的命令来设计它，以使其相同......

去[http://w3schools.com](http://w3schools.com)找到你需要做的事情:)

祝你好运 ！

# android - 为什么 android:deploy 显示成功，尽管我的设备上没有部署任何应用程序？

> ID：14060497
> 
> 赞同：0
> 
> 时间：2012-12-27T19:55:30.290
> 
> 标签：android, maven, m2e

我在将我签名的应用程序安装到我的手机设备时遇到了很大的问题（尽管它可以在我的平板电脑上运行）。“未安装应用程序”是我的基本问题，另请参阅此线程：[Android 上的“未安装应用程序”错误](https://stackoverflow.com/questions/4226132/application-not-installed-error-on-android)。我还没有得出结论。当我尝试从网络服务器安装应用程序时，我得到一个“未安装应用程序”。所以我尝试通过 USB 安装它以获得至少一些错误消息。android:deploy 告诉我

> 成功安装 /path/to/workspace/target/kurzparkzonenwien-1.0-SNAPSHOT.apk 到 MY_PHONE_ZTE-BLADE。

但是手机上没有应用程序。那么是 android:deploy buggy 还是我需要设置什么特别的东西？我通过启动器从 Eclipse 执行它，目标是 android:deploy。

**[更新]**
我想我知道发生了什么。LogCat 向我展示了一些东西....

```
12-27 21:01:28.177: W/PackageParser(1165): Exception reading /data/app/vmdl60304.tmp
12-27 21:01:28.177: W/PackageParser(1165): java.lang.SecurityException: /data/app/vmdl60304.tmp failed verification of META-INF/ANDROIDR.SF
12-27 21:01:28.177: W/PackageParser(1165):  at java.util.jar.JarVerifier.verifyCertificate(JarVerifier.java:350)
12-27 21:01:28.177: W/PackageParser(1165):  at java.util.jar.JarVerifier.readCertificates(JarVerifier.java:273)
12-27 21:01:28.177: W/PackageParser(1165):  at java.util.jar.JarFile.getInputStream(JarFile.java:416)
12-27 21:01:28.177: W/PackageParser(1165):  at android.content.pm.PackageParser.loadCertificate 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:01:56.830

尝试使用命令安装 APK

> adb install -r yourApp.apk

这里 -r 选项是替换应用程序（如果存在）。

此外，此链接将帮助[ADB 命令](http://developer.android.com/tools/help/adb.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:13:57.163

问题是签署时出了点问题。

# mysql - MySQL为邻接矩阵选择新列

> ID：14060499
> 
> 赞同：0
> 
> 时间：2012-12-27T19:55:39.177
> 
> 标签：mysql, calculated-columns

我想从一些数据构造一个[邻接矩阵。](http://en.wikipedia.org/wiki/Adjacency_matrix)假设图的顶点是用户名。如何从我的数据中选择一组用户名作为列？行应该只是`select user_name from table`

1.  如何从我的数据中选择 user_names 作为列？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-27T20:03:00.567

您可以使用`GROUP_CONCAT`. 这里有很多关于如何应用它的帖子。

# java - 如何进行并行外呼

> ID：14060506
> 
> 赞同：2
> 
> 时间：2012-12-27T19:56:09.187
> 
> 标签：java, parallel-processing, mule, flow

我的用例需要使用 smne 数据丰富我的输入并将其发送到出站端点。

通过调用两个 Web 服务获取用于丰富的数据，然后从回复中提取数据。此提取的数据被丰富到我的输入 XML 中并发送到出站端点。

我需要进行的两个 Web 服务调用需要并行，因为它们不依赖于另一个。这样我可以节省我的处理时间。

请建议我如何在 Mule 的流程中实现这种并行处理。

注意：我尝试过使用 ALL 流控制，但似乎是按顺序调用 Web 服务（子流）。

下面给出的是我的抽象流程。

```
<flow name="mainFlow">
    <inbound-endpoint> .....

    <some validation>

    <setting some flow variables>

    <!-- Now make calls to the sub-flows which has some processing of the input and make some web-service calls -->
    <all>
        <flow-ref name="myFlow1" />
        <flow-ref name="myFlow2" />
        <flow-ref name="myFlow3" />
    </all>

    <enrich the input with the data obtained from the output of the above three flows>

    <outbound-endpoint>
</flow>

<flow name="myFlow1">
    <some transformer to transform the payload provided >

    < the tran sformed payload is passed as input to the web-service call>

    <http:outbound-endpoint ...>

    <transform the reply from the web-service call>
</flow>

<flow name="myFlow2">
    <some transformer to transform the payload provided >

    < the tran sformed payload is passed as input to the web-service call>

    <http:outbound-endpoint ...>

    <transform the reply from the web-service call>
</flow>

<flow name="myFlow3">
    <some transformer to transform the payload provided to it>

    < the tran sformed payload is passed as input to the web-service call>

    <http:outbound-endpoint ...>

    <transform the reply from the web-service call>
</flow> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T00:10:07.453

这是一个简单的配置，展示了一种使用两个 HTTP 出站端点进行分叉/加入的方法。要添加第三个端点，请将第三个端点设置`MULE_CORRELATION_GROUP_SIZE`为`3`和。`MULE_CORRELATION_SEQUENCE``async flow-ref``3`

```
<flow name="fork">
    <vm:inbound-endpoint path="fork.in" />
    <set-property propertyName="MULE_CORRELATION_GROUP_SIZE"
        value="2" />
    <all enableCorrelation="IF_NOT_SET">
        <async>
            <set-property propertyName="MULE_CORRELATION_SEQUENCE"
                value="1" />
            <flow-ref name="parallel1" />
        </async>
        <async>
            <set-property propertyName="MULE_CORRELATION_SEQUENCE"
                value="2" />
            <flow-ref name="parallel2" />
        </async>
    </all>
</flow>

<sub-flow name="parallel1">
    <logger level="INFO" message="parallel1: processing started" />
    <http:outbound-endpoint address="..."
        exchange-pattern="request-response" />
    <logger level="INFO" message="parallel1: processing finished" />
    <flow-ref name="join" />
</sub-flow>

<sub-flow name="parallel2">
    <logger level="INFO" message="parallel2: processing started" />
    <http:outbound-endpoint address="..."
        exchange-pattern="request-response" />
    <logger level="INFO" message="parallel2: processing finished" />
    <flow-ref name="join" />
</sub-flow>

<sub-flow name="join">
    <collection-aggregator timeout="6000"
        failOnTimeout="true" />
    <combine-collections-transformer />
    <logger level="INFO"
        message="Continuing processing of: #[message.payloadAs(java.lang.String)]" />
</sub-flow> 
```

编辑：在上面的配置中，聚合器在 6 秒后超时。对于您的实际用例来说，这可能太短了：根据需要增加。此外，它设置为超时失败，如果并非所有出站 HTTP 端点交互都成功，这可能不是您想要的行为：由您根据您的用例决定。

# php - 守护程序中的 Doctrine2 连接超时

> ID：14060507
> 
> 赞同：20
> 
> 时间：2012-12-27T19:56:11.897
> 
> 标签：php, symfony, doctrine, doctrine-orm

我有一个长时间运行的守护进程（Symfony2 命令），它从 Redis 中的工作队列中获取工作，并使用 orm 执行这些工作并写入数据库。

我注意到，当工作人员空闲等待工作时，由于与 MySQL 的连接超时，工作人员有死亡的趋势。

具体来说，我在日志中看到了这一点：MySQL Server has gone away。

无论如何我可以让学说自动重新连接吗？或者有什么方法可以手动捕获异常并重新连接学说 orm？

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2014-11-06T23:15:12.947

我在我的 symfony2 beanstalkd 守护进程命令工作者中使用它：

```
$em = $this->getContainer()->get('doctrine')->getManager();
if ($em->getConnection()->ping() === false) {
    $em->getConnection()->close();
    $em->getConnection()->connect();
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-02T17:32:41.963

看来，只要 EntityManager 在 Doctrine 中遇到任何错误/异常，连接就会关闭并且 EntityManager 已死。

由于通常所有内容都包含在事务中，并且在调用 $entityManager->flush() 时执行该事务，因此您可以尝试捕获异常并尝试重新执行或放弃。

您可能希望通过更具体的类型捕获来检查异常的确切性质，无论是 PDOException 还是其他。

对于 MySQL has Gone Away 异常，您可以尝试通过重置 EntityManager 来重新连接。

```
$managerRegistry = $this->getContainer()->get('doctrine');
$em = $managerRegistry->getEntityManager();
$managerRegistry->resetEntityManager(); 
```

这应该使 $em 再次可用。请注意，您必须再次重新持久化所有内容，因为这个 $em 是新的。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-08-02T13:54:39.253

我对 PHP Gearman worker 和 Doctrine 2 有同样的问题。

我想出的最干净的解决方案是：在每个作业中关闭并重新打开连接：

```
<?php
public function doWork($job){
   /* @var $em \Doctrine\ORM\EntityManager */
   $em = Zend_Registry::getInstance()->entitymanager;
   $em->getConnection()->close();
   $em->getConnection()->connect();
} 
```

**更新**

上面的解决方案不能处理事务状态。这意味着 Doctrine\DBAL\Connection::close() 方法不会重置 $_transactionNestingLevel 值，因此如果您不提交事务，这将导致 Doctrine 与底层 DBMS 的翻译状态不同步. 这可能会导致 Doctrine 默默地忽略开始/提交/回滚语句，并最终导致数据不提交给 DBMS。

换句话说：如果您使用此方法，请务必提交/回滚事务。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-21T13:33:21.340

这个包装器对我有用：

[https://github.com/doctrine/dbal/issues/1454](https://github.com/doctrine/dbal/issues/1454)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-07T12:13:57.140

在您的守护程序中，您可以在每次查询之前添加重新启动连接的方法。我在使用 gaerman worker 时遇到了类似的问题：

我将连接数据保存在 zend 注册表中，所以它看起来像这样：

```
private function resetDoctrineConnection() {
    $doctrineManager = Doctrine_Manager::getInstance();
    $doctrineManager->reset();
    $dsn = Zend_Registry::get('dsn');
    $manager = Doctrine_Manager::getInstance();
    $manager->setAttribute(Doctrine_Core::ATTR_AUTO_ACCESSOR_OVERRIDE, true);
    Doctrine_Manager::connection($dsn, 'doctrine');
} 
```

如果它是 damenon，您可能需要静态调用它。

# javascript - 将 JSON 对象传递给一个值为 在下拉列表中

> ID：14060510
> 
> 赞同：1
> 
> 时间：2012-12-27T19:56:21.973
> 
> 标签：javascript, json

我试图`<option>`在`<select>`按下按钮时传递 on 的值。我试过的方法都没有奏效。

```
<select id="mySelect2"> 
    <option>Model Series</option>
<option value="{'varId':'4dr Sedan ','monthYear':'08\/1995 - 05\/2001'}">My Sedan  08/1995 - 05/2001</option>
....
...
</select> 
```

我想将此 JSON 对象作为参数传递给按下按钮的 javascript 函数：

```
<button onclick="display(document.getElementById('mySelect2'));"> Go </button> 
```

如何才能做到这一点？

另一方面，这很好用：

```
<select id="mySelect2" onChange="display(this) > 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T19:58:48.087

对修正报价有帮助吗？

```
<option value="{'varId':'4dr Sedan ','monthYear':'08\/1995 - 05\/2001'}">4dr Sedan  08/1995 - 05/2001</option> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:01:10.847

您应该将其中的引号更改为`value`：

```
<option value="{'varId':'4dr Sedan ','monthYear':'08\/1995 - 05\/2001'}"> 
```

# ruby-on-rails - 安装调试器时出错：无法使用 ruby -1.9.3-p362 构建 gem 原生扩展

> ID：14060513
> 
> 赞同：27
> 
> 时间：2012-12-27T19:56:30.783
> 
> 标签：ruby-on-rails, ruby, bundle

在尝试为新项目运行 bundle 时，我遇到以下错误：

```
Installing debugger (1.2.2) with native extensions
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

    C:/Ruby193/bin/ruby.exe extconf.rb
checking for rb_method_entry_t.called_id in method.h... no
checking for rb_control_frame_t.method_id in method.h... no
checking for rb_method_entry_t.called_id in method.h... no
checking for rb_control_frame_t.method_id in method.h... no
Makefile creation failed
**************************************************************************
No source for ruby-1.9.3-p362 provided with debugger-ruby_core_source gem.
**************************************************************************
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=.
        --curdir
        --ruby=C:/Ruby193/bin/ruby
        --with-ruby-dir
        --without-ruby-dir
        --with-ruby-include
        --without-ruby-include=${ruby-dir}/include
        --with-ruby-lib
        --without-ruby-lib=${ruby-dir}/lib

Gem files will remain installed in C:/Ruby193/lib/ruby/gems/1.9.1/gems/debugger-1.2.2 for inspection.
Results logged to C:/Ruby193/lib/ruby/gems/1.9.1/gems/debugger-1.2.2/ext/ruby_debug/gem_make.out
An error occured while installing debugger (1.2.2), and Bundler cannot continue.
Make sure that `gem install debugger -v '1.2.2'` succeeds before bundling. 
```

运行`gem install debugger -v '1.2.2'`产生相同的结果。

我检查了 mkmf.log 和 gem_make.out 文件的内容，它们没有什么意义，但如果需要，我会发布它们。

为什么这不起作用？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-31T13:10:55.767

我遇到了同样的问题。我试过：

`bundle update debugger`

我的 Gemfile 有这个：

`gem 'debugger'`

它奏效了，我不必更改 Gemfile。bundle 的输出显示如下

`...`

`Installing debugger-ruby_core_source (1.1.6)`

`Installing debugger-linecache (1.1.2) with native extensions`

`Installing debugger (1.1.4) with native extensions`

`...`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-27T19:56:30.783

该问题的解决方案是简单地安装 debugger-ruby_core_source gem - [eiel 在 github 上的 debugger-ruby_core_source 的分叉版本](https://github.com/eiel/debugger-ruby_core_source)。

经过多次试验和错误（就我而言），我只是

```
gem install debugger-ruby_core_source -v '1.1.6' 
```

这会强制包含 p362 标头。然后当我运行时`bundle`，使用本机扩展成功构建了调试器，并且 bundler 继续它的快乐方式，我也是。

只是一个说明，虽然我已经*简单地*使用了几次，但在我真正找到*简单*的解决方案之前，我尝试了几件事并花了几个小时来让它工作。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-12-28T05:30:00.753

也许它更好地使用捆绑更新，在这里工作得很好。

> $ 捆绑更新调试器-ruby_core_source

考虑对所有调试器 gem 使用更新：

> $ 捆绑更新调试器

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-12-12T19:13:41.413

显然，ruby 2.* 不支持调试器，所以请改用 byebug。 [http://edgeguides.rubyonrails.org/debugging_rails_applications.html#debugging-with-the-byebug-gem](http://edgeguides.rubyonrails.org/debugging_rails_applications.html#debugging-with-the-byebug-gem)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-04-20T14:44:56.420

试了一阵子，终于放弃了，换成`debugger`.`byebug`

与撬一起使用：

```
gem 'pry', group: [:development, :test]
gem 'pry-byebug', group: [:development, :test] 
```

`binding.pry`然后，您可以在要启动调试器的任何位置删除语句。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-10-27T18:41:42.347

刚刚通过 RVM 安装了 Ruby 2.0.0 就遇到了这个问题。其他解决方案都不适合我。

如果二进制文件可用，RVM 将只安装它们，这样更快，但调试器也需要源代码

```
rvm reinstall 2.0.0 --disable-binary 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-11-18T01:47:44.357

如果您要使用 rvm，请确保您有正确的子版本来匹配 debase-ruby_core_source 或 debugger-ruby_core_source。

即在 ruby​​ 2.0.0 的 debase-ruby_core_source 中仅支持 p195、p247、p353、p451、p481、p576。以上不支持！

如果您的 ruby​​ 版本与提供的源不匹配。你将无法通过。（导致“找不到源错误！”）

```
------------debase-ruby_core_source 0.6.0 vm_Core support list ----------------
../usr/local/rvm/rubies/ruby-2.0.0-p598/lib/ruby/gems/2.0.0/gems/debase-ruby_core_source-0.6.0/lib/debase/ruby_core_source/ruby-2.0.0-p0/vm_core.h
./usr/local/rvm/rubies/ruby-2.0.0-p598/lib/ruby/gems/2.0.0/gems/debase-ruby_core_source-0.6.0/lib/debase/ruby_core_source/ruby-2.0.0-p195/vm_core.h
./usr/local/rvm/rubies/ruby-2.0.0-p598/lib/ruby/gems/2.0.0/gems/debase-ruby_core_source-0.6.0/lib/debase/ruby_core_source/ruby-2.0.0-p247/vm_core.h
./usr/local/rvm/rubies/ruby-2.0.0-p598/lib/ruby/gems/2.0.0/gems/debase-ruby_core_source-0.6.0/lib/debase/ruby_core_source/ruby-2.0.0-p353/vm_core.h
./usr/local/rvm/rubies/ruby-2.0.0-p598/lib/ruby/gems/2.0.0/gems/debase-ruby_core_source-0.6.0/lib/debase/ruby_core_source/ruby-2.0.0-p451/vm_core.h
./usr/local/rvm/rubies/ruby-2.0.0-p598/lib/ruby/gems/2.0.0/gems/debase-ruby_core_source-0.6.0/lib/debase/ruby_core_source/ruby-2.0.0-p481/vm_core.h
./usr/local/rvm/rubies/ruby-2.0.0-p598/lib/ruby/gems/2.0.0/gems/debase-ruby_core_source-0.6.0/lib/debase/ruby_core_source/ruby-2.0.0-p576/vm_core.h
./usr/local/rvm/rubies/ruby-2.0.0-p598/lib/ruby/gems/2.0.0/gems/debase-ruby_core_source-0.6.0/lib/debase/ruby_core_source/ruby-2.1.0-p0/vm_core.h
./usr/local/rvm/rubies/ruby-2.0.0-p598/lib/ruby/gems/2.0.0/gems/debase-ruby_core_source-0.6.0/lib/debase/ruby_core_source/ruby-2.1.1-p76/vm_core.h
./usr/local/rvm/rubies/ruby-2.0.0-p598/lib/ruby/gems/2.0.0/gems/debase-ruby_core_source-0.6.0/lib/debase/ruby_core_source/ruby-2.1.2-p95/vm_core.h
./usr/local/rvm/rubies/ruby-2.0.0-p598/lib/ruby/gems/2.0.0/gems/debase-ruby_core_source-0.6.0/lib/debase/ruby_core_source/ruby-2.1.3-p242/vm_core.h
./usr/local/rvm/rubies/ruby-2.0.0-p598/lib/ruby/gems/2.0.0/gems/debase-ruby_core_source-0.6.0/lib/debase/ruby_core_source/ruby-2.2.0-preview1/vm_core.h 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-28T09:06:25.893

这对我有用：

```
$ rvm use 2.0 
```

或使其默认：

```
$ rvm use --default 2.0 
```

# mysql - 如何在插入查询中添加外键值 - mysql - CodeIgniter

> ID：14060516
> 
> 赞同：1
> 
> 时间：2012-12-27T19:56:35.037
> 
> 标签：mysql, codeigniter, foreign-keys

我有以下插入查询：

```
$salarystuff = array('salary' => $salary, 'from_date' => $salary_from_date, 'to_date' => $salary_to_date);

        $this->db->insert('salaries', $salarystuff); 
```

工资表有列：emp_no| 工资| 从_日期| to_date（我使用的是 dev.mysql.com 提供的数据库。

但它给了我一个错误 1452 说外键约束。如何引用另一个表中的键值才能插入到该表中？

这是错误消息：

> 无法添加或更新子行：外键约束失败 ( `employees`. `salaries`, CONSTRAINT `salaries_ibfk_1`FOREIGN KEY ( `emp_no`) REFERENCES `employees`( `emp_no`) ON DELETE CASCADE)
> 
> 插入`salaries`( `salary`, `from_date`, `to_date`) 值 ('1000000', '2012-12-27', '2013-01-16')

谢谢

编辑：我正在尝试以下

首先，我使用这个函数在 employees 表中创建记录：

```
function add_emp($firstname,$lastname,$gender,$date_of_birth,$jobtitle,$dept,$hiredate)
    {

        $data = array(  'first_name' => $firstname, 
                        'last_name' => $lastname,
                        'gender' => $gender,
                        'birth_date' => $date_of_birth,
                        'hire_date' => $hiredate);

        $this->db->trans_start();
        $this->db->insert('employees', $data);
        $this->db->trans_complete();

        if ($this->db->trans_status() === FALSE)
        {
            $msg = "Adding the new employee failed.";
            return $msg;
        }
        else
        {
            $msg = "Successfully Added Employee.";
            return $msg;
        }
    } 
```

然后在另一个函数中添加薪水：

```
function add_salary($firstname,$lastname,$gender,$date_of_birth,$jobtitle,$dept,$hiredate,$salary, $salary_from_date,$salary_to_date)
    {
        $this->db->select('emp_no');
        $this->db->from('employees');
        $this->db->where('first_name', $firstname);
        $this->db->where('last_name', $lastname);
        $this->db->where('gender', $gender);
        $this->db->where('hire_date', $hiredate);
        $this->db->where('birth_date', $date_of_birth);
        $this->db->limit(1);
        $selected_employee = $this->db->get();

        $salarystuff = array('emp_no' => $selected_employee, 'salary' => $salary, 'from_date' => $salary_from_date, 'to_date' => $salary_to_date);
        $this->db->insert('salaries', $salarystuff);
    } 
```

两者都在模型中。然后在控制器中我调用这两个函数：

$employee_insert = $this->user->add_emp($firstname,$lastname,$gender,$date_of_birth,

```
$jobtitle,$dept, $hiredate);

        $salarythings = $this->user->add_salary($firstname,$lastname,$gender,$date_of_birth,$jobtitle,$dept,$hiredate,$salary, $salary_from_date,$salary_to_date); 
```

但是我收到一个错误，因为 emp_no 字段中没有值...我认为这可能是行：

```
$selected_employee = $this->db->get();

            $salarystuff = array('emp_no' => $selected_employee, 
```

我的错误信息是：

> CI_DB_mysql_result 类的对象无法转换为字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:01:32.593

问题是您试图插入到薪水表中，但您没有指定薪水记录是针对哪个员工的。您需要为表`emp_no`中的列提供一个值`employees`。

预计到达时间：

很高兴您发布了更多代码 - 您应该做的是修改您的`add_emp`函数，以便它返回创建的员工的 id（我假设这里`emp_no`是您的数据库中的自动增量列）。像这样：

```
function add_emp($firstname,$lastname,$gender,$date_of_birth,$jobtitle,$dept,$hiredate)
{

    $data = array(  'first_name' => $firstname, 
                    'last_name' => $lastname,
                    'gender' => $gender,
                    'birth_date' => $date_of_birth,
                    'hire_date' => $hiredate);

    $this->db->trans_start();
    $this->db->insert('employees', $data);
    $this->db->trans_complete();

    if ($this->db->trans_status() === FALSE)
    {
        //$msg = "Adding the new employee failed.";
        //return $msg;
        return -1; // indicates failure
    }
    else
    {
        //$msg = "Successfully Added Employee.";
        //return $msg;
        return $this->db->insert_id();
    }
} 
```

请注意，调用的代码现在`add_emp`需要更改一点以将返回值视为整数而不是消息，但是现在您有了员工的 id，您可以在 add_salary 函数中使用它，而不必传递在所有其他数据中，如下所示：

```
function add_salary($emp_no,$salary, $salary_from_date,$salary_to_date)
{
    $salarystuff = array('emp_no' => $emp_no, 'salary' => $salary, 'from_date' => $salary_from_date, 'to_date' => $salary_to_date);
    $this->db->insert('salaries', $salarystuff);
} 
```

所以添加员工和他们的薪水的代码是这样的：

```
$emp_no = add_emp([Your parameters]);
if ( $emp_no > 0 ) {
   add_salary($emp_no, [other parameters]);
} else {
   // Show some error message that the employee creation failed.
} 
```

再次编辑：

如果您忽略我上面的建议，那么您为什么会收到错误的简单答案是因为`$selected_employee`是结果集而不是实际的员工编号。您需要像这样更改该代码：

```
$selected_employee = $this->db->get();
$result = $selected_employee->result();
$emp_no = $result[0]->emp_no;

    $salarystuff = array('emp_no' => $emp_no, 'salary' => $salary, 'from_date' => $salary_from_date, 'to_date' => $salary_to_date);
    $this->db->insert('salaries', $salarystuff); 
```

# javascript - 如何修复javascript倒计时秒错误

> ID：14060519
> 
> 赞同：2
> 
> 时间：2012-12-27T19:56:47.137
> 
> 标签：javascript, html

所以我创建了这个倒数计时器，

```
<script type="text/javascript">
var interval;
    var minutes = 12;
    var seconds = 32;
    window.onload = function() {
        countdown('countdown');
}

function countdown(element) {
    interval = setInterval(function() {
        var el = document.getElementById(element);
        if(seconds == 0) {
            if(minutes == 0) {               
                minutes=7;
seconds=47;
                } else {
                    minutes--;
                    seconds = 60;
                }
            }
            if(minutes > 0) {
                var minute_text = minutes + (minutes > 1 ? ':' : ':');
            } else {
                var minute_text = '';
            }
            var second_text = seconds > 1 ?'':'';
            el.innerHTML = minute_text + ''+seconds + ' '+second_text + ' remaining';
            seconds--;
        }, 1000);

}
</script> 
```

结果完美运行，但是当计时器达到低于 10 的数字时（12:03、12:05 等），它显示的秒数在前面没有“0”。（12:3 而不是 12:03）

我试图解决这个问题，但它没有给我带来任何好处。是否可以以某种方式编辑我的脚本来修复这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:00:14.307

数字前面没有零。

您必须手动添加它。

```
if(seconds < 10) {
    second_text = "0" + seconds;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T20:01:19.083

```
second_text = (seconds > 9) ? (seconds) : ('0' + seconds); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T20:03:59.173

我刚刚清理了你的代码：

```
var interval,
    minutes = 12,
    seconds = 32;

window.onload = function() {
    countdown('countdown');
}

function countdown(element) {
    var el = document.getElementById(element),
        minutes_text, second_text;

    interval = setInterval(function() {
        if(seconds == 0) {
            if(minutes == 0) {
                minutes=7;
                seconds=47;
            }
            else {
                minutes--;
                seconds = 60;
            }
        }

        minutes_text = minutes;
        second_text = (seconds < 10 ? "0" : "") + seconds;

        el.innerHTML = minutes_text + ':' + second_text + ' remaining';
        seconds--;
    }, 1000);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T20:02:36.710

尝试添加一个函数来填充显示的值

```
function padvalue(i) {
    if (i<10) {
        i="0" + String(i);
    }
    return i;
} 
```

在这里调用

```
el.innerHTML = minute_text + '' + padvalue(seconds) + ' ' + second_text + ' remaining'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T20:03:23.687

使用此代码段将数字转换为字符串：

```
var secondStr = seconds + "";
while (secondStr.length < 2) {
    secondStr = "0" + secondStr;
} 
```

几分钟和几小时做同样的事情，然后打印字符串。

（您确实知道，间隔 1000 意味着间隔将是 1000 或更多毫秒？尽管间隔那么长，但您不太可能错过整个滴答声。这意味着计数器将接近实时秒数但不准确并且会随着时间和计算机的不同而变化。）

# scala - 有没有办法将Scala反射中的两个等价类型转换为两个等价类型？

> ID：14060522
> 
> 赞同：4
> 
> 时间：2012-12-27T19:57:05.860
> 
> 标签：scala, reflection, scala-2.10

考虑以下：

```
scala> import scala.reflect.runtime.universe._
import scala.reflect.runtime.universe._

scala> typeOf[Boolean]
res23: reflect.runtime.universe.Type = Boolean

scala> typeOf[scala.Boolean]
res24: reflect.runtime.universe.Type = Boolean

scala> res23 == res24
res25: Boolean = true

scala> typeOf[java.lang.Boolean]
res26: reflect.runtime.universe.Type = Boolean

scala> res23 == res26
res27: Boolean = false

scala> class Foo { def bf(arg: Boolean) = ??? }
defined class Foo

scala> typeOf[Foo]
res28: reflect.runtime.universe.Type = Foo

scala> res28.member(newTermName("bf")).asMethod
res30: reflect.runtime.universe.MethodSymbol = method bf

scala> res30.paramss.head.head
res31: reflect.runtime.universe.Symbol = value arg

scala> res31.typeSignature
res32: reflect.runtime.universe.Type = scala.Boolean

scala> res32 == res23
res33: Boolean = false

scala> res32 =:= res23
res37: Boolean = true 
```

所以通过 typeOf[Boolean] 函数得到的类型和检查方法得到的类型是等价的，但并不相等。

有没有办法将两种等效类型转换为结果相等的一些规范表示？我希望能够将它们用于地图中的键之类的东西。

## 编辑：

更清楚地说，我正在寻找的是（不是真正的 repl 会话）：

```
scala>val tp1 = // some type
scala>val tp2 = // equivalent type obtained another way
scala>tp1 == tp2
res1: Boolean = false
scala>tp1 =:= tp2
res2: Boolean = true
scala>val ctp1 = tp1.canonical
scala>val ctp2 = tp2.canonical
scala>ctp1 == ctp2
res3: Boolean = true
scala>ctp1 =:= tp1
res4: Boolean = true
scala>ctp2 =:= tp2
res5: Boolean = true 
```

所以等价性被转换保留。我还需要它来处理参数化类型。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T21:12:32.003

从[文档中](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.reflect.api.Types)：

> 需要注意的是，`==`不应使用它来比较类型的相等性——<code>== 不能在存在类型别名的情况下检查类型相等性，而`=:=`可以。

您当然可以将类型存储在列表中并使用（例如）以下内容来检查是否包含：

```
myTypes.exists(_ =:= someType) 
```

例如，您将在 2.10 编译器源代码中看到这种方法。当然，它不如地图或集合那么有效，但是您通常不会在集合中拥有很多此类东西。

如果您绝对必须具有地图或集合的性能，则可以根据您的要求使用`erasure`（如另一个答案所示）或。`typeSymbol`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T20:59:55.583

`erasure`方法`scala.reflect.api.Types.TypeApi`：

```
typeOf[Foo].member(newTermName("bf")).asMethod.paramss.head.head
  .typeSignature.erasure == typeOf[Boolean]
// res21: Boolean = true 
```

# php - 从请求中填充实体的更好方法？

> ID：14060525
> 
> 赞同：7
> 
> 时间：2012-12-27T19:57:24.630
> 
> 标签：php, doctrine-orm, symfony-2.1

我正在使用 Symfony 2.1 应用程序，我通过`POST`请求发送了很多参数，我正在寻找一种更智能的方法来获取每个请求参数并填充我的实体类。我希望避免为请求参数编写`$entity->setMyParam($my_param)`表达式。`n`例如，这是我的实体的片段：

```
namespace Brea\ApiBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;

/**
 * Brea\ApiBundle\Entity\Distributions
 *
 * @ORM\Table(name="distributions")
 * @ORM\Entity
 */
class Distributions
{
  /**
   * @var string $recordType
   *
   * @ORM\Column(name="record_type", type="string", nullable=false)
   * @Assert\NotBlank()
   * @Assert\Choice(choices = {"a", "b", "c", "d", "e"}, message = "Choose a valid record type")
   */
  private $recordType;

  /**
   * Set recordType
   *
   * @param string $recordType
   */
  public function setRecordType($recordType)
  {
    $this->recordType = $recordType;
  }

  /**
   * Get recordType
   *
   * @return string 
   */
  public function getRecordType()
  {
    return $this->recordType;
  }
} 
```

我的控制器尝试接受每个请求，将参数驼峰化并将请求参数的值设置为实体：

```
public function createRecordAction(Request $request, $id)
{
  $distribution = new Distributions();
  $params = $request->request;

  foreach ($request->request->all() as $param=>$value)
  {
    if ($param == "_method")
      continue;

    $function = "set".str_replace(' ','',ucwords(preg_replace('/[^A-Z^a-z^0-9]+/',' ',$param)));
    $distribution->$function($value);
  }
} 
```

它有效，但我对这种方法的疑虑是我需要在每个执行类似操作的控制器中运行此代码。我可以将它重构为父类作为避免重复代码的一种方法，但我很好奇这是否是一个好习惯。我在 Symfony 框架中寻找已经这样做的东西，但我能找到的只是将请求绑定到表单的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T17:05:14.007

> 我在 Symfony 框架中寻找已经这样做的东西，但我能找到的只是将请求绑定到表单的示例。

我会为此使用`Form`s 。即使 HTTP 请求不是从 HTMl 表单执行的，您也可以将其绑定`Request`到表单实例：它将负责所有数据注入和验证。

另外，如果您需要 HTML 表单，您可以准备好它们 ^^。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T16:12:15.957

**首先：警告！！**

正如我之前评论的那样，我会非常小心地使用您原始帖子中提供的代码，因为您说它是来自`POST`请求的数据，这意味着客户端可以在其中注入任何类型的数据并调用您可能不想要的函数对象（或者只是通过向您发送不存在的函数名称来导致脚本失败）。

**我实际上会先阅读结论..！:) 然后回到 Alt。1 和 2。**

* * *

**备选方案 1：**

话虽如此，解决您的问题的另一种方法是让对象负责获取自己的数据。有了足够细化的对象，您不应该得到臃肿的代码，并且您可以在每个类中定义要查找的参数和调用的函数（并在对类进行更改时本地化更改）：

```
class BookInformation{
  private $publisher;
  private $name;
  private $price;

  public static createFromRequest($req){
    $publisher = Publisher::createFromRequest($req);
    $book = new BookInformation($publisher, $req['book_name'], $req['book_price']);
    $book->setABC($req['abc']);
    //...
    return $book;
  }

  public __construct($publisher, $name, $price){
    //...
  }
}

class Publisher{
  private $name;
  private $address;

  public static createFromRequest($req){
    return new Publisher($req['publisher_name'], $req['publisher_address']);
  }

  public __construct($name, $address){
    //...
  }
} 
```

就像我之前说的，这种方法的一大优势是，如果您需要向这些类中的任何一个添加新属性，您根本不必编辑控制器，只需编辑“从请求方法初始化”即可。**未来的更改将本地化到修改后的类。**

当然，不要忘记验证从用户请求发送的任何数据（但这只是常识）。

* * *

**备选方案 2：**

[请注意，第一个替代方案与工厂模式](http://www.oodesign.com/factory-pattern.html)（基于 GoF 的抽象工厂）非常相似，您也可以使用该模式实现解决方案：

```
class BookFactory{
  public createBookInformation($req){
    $publisher = $this->createPublisher($req);
    $book = new BookInformation($publisher, $req['book_name'], $req['book_price']);
    $book->setABC($req['abc']);
    //...
    return $book;
  }

  public createPublisher($req){
    return new Publisher($req['publisher_name'], $req['publisher_address']);
  }

  //createAnythingRelatedToBooks($req)...
} 
```

这样，您在一个**非常有凝聚力的类中拥有所有初始化过程，唯一的责任是根据请求对象初始化某个对象系列**（这是一件非常好的事情）。但是，如果您将属性添加到这些类之一，您也必须编辑适当的工厂方法。

* * *

**结论**

请注意，这两个替代方案实际上并不是真正的替代方案......它们可以与您的初始代码（尤其是工厂代码）一起使用。他们真的只解决了你的最后一个问题（“在哪里放置代码”问题）。

然而，即使你确实清理了`POST`请求并且只调用了注释的函数（如前所述），我也不会真的建议这样做，因为我觉得更复杂的业务规则会很快破坏设计（但也许你'已经涵盖了所有内容（？））。也就是说，我认为您不能轻松地在初始化过程中插入业务规则，因为它是完全自动的（它不能对值进行任何验证，因为它可以是任何类型的值）而且我觉得你会初始化后结束“撤消”的东西（我个人讨厌......很多错误的空间）！

例如，在*备选方案 1* (`BookInformation`和`Publisher`) 中采用相同的两个类。

假设 a`Book`只有在`Publisher`已经`Publisher`在数据库中注册并且他们的地址已经确认的情况下才能拥有 a（需要使用另一个接口创建新的出版商，然后在他们可以链接到一本书之前确认他们的地址）。

否则，无论请求数据如何，`publisher`都应设置为 XYZ。我有一种感觉（我可能错了），为了支持这些规则，你必须实际构造对象（自动）**，然后**`publisher`如果它不符合某些规则，则销毁/重新分配属性。现在，如果您`Publisher`在内存中有一个包含这些对象的池，您还需要记住删除`Publisher`在该池中错误创建的对象。这只是一个规则！

你可以用你的代码来“修复”这个问题的一件事是为每个 setter (validXYZ()) 设置一个验证方法，但是如果验证依赖于其他方法，那么它开始看起来像一个很快就会崩溃的设计对象/数据...

我真的没有其他任何东西可以阻止您使用该代码，但如果您这样做，请让我们了解它在一两年后的工作情况（一旦添加了一些维护/新功能等）。 .)。

# ruby - 检测字符串 Ruby 中的常用词

> ID：14060529
> 
> 赞同：-1
> 
> 时间：2012-12-27T19:57:32.057
> 
> 标签：ruby, string

如何在 Ruby 中检测两个或多个句子之间的公共子字符串。

我有很多字符串，例如：

*   约翰 D
*   保罗·约翰
*   约翰

我必须得到子字符串 John，我该如何实现呢？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:06:26.253

解决一般情况：

```
def count_tokens(*args)
  tokens = args.join(" ").split(/\s/)
  tokens.inject(Hash.new(0)) {|counts, token| counts[token] += 1; counts }
end

counts = count_tokens("John D", "Paul John", "John")
# => {"John"=>3, "D"=>1, "Paul"=>1} 
```

这会将每个字符串拆分为标记，然后计算每个标记的实例数。从那里开始，对哈希进行排序以获得最常用的标记是微不足道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T20:03:01.000

找到最近的元素，然后比较它。

```
list_of_strings = ["some", "random", "strings"]

def most_common_value(a)
  a.group_by do |array_element|
    array_element
  end.values.max_by(&:size).first
end

list_of_strings.each do |array_element|
  if /^#{most_common_value(list_of_strings)}$/ =~ array_element
    puts array_element
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T20:44:44.930

```
def string_count(sentence)
  counts = Hash.new(0)
  str_array = sentence.downcase.scan(/[\w]+/)
  for string in str_array
    counts[string] += 1
  end
  counts
end 
```

将您的句子传递给`string_count("John D John Paul John")` 将产生输出。

`# => {"john"=>3, "d"=>1, "paul"=>1}`

希望这可以帮助！

# sql - 如何从 DateTimeOffset 对象中选择 UTC 偏移量？

> ID：14060535
> 
> 赞同：4
> 
> 时间：2012-12-27T19:58:29.800
> 
> 标签：sql, sql-server, timezone

我目前正在使用：

```
SELECT DATEPART(TZ, SYSDATETIMEOFFSET()) 
```

但是，它以分钟为单位返回偏移量。我想保留 '-05:00' 而不是 '-300' 的格式

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-06-08T08:37:37.760

在 MS SQL Server 中，您还可以使用

```
SELECT DATENAME(tz, SYSDATETIMEOFFSET()) 
```

这将返回一个带有偏移量的 nvarchar

[执行结果截图](http://i.stack.imgur.com/F3X9Y.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T22:11:35.540

如果要在 datetimeoffset 变量的末尾提取确切的字符串“-05:00”，可以使用 SQL Server 字符串操作。我认为使用内置的 SQL DateTime 函数不可能做到这一点。您可以使用 CAST 函数，我相信它默认为 ISO 8601 格式：

```
declare @timeStr nvarchar(50) = CAST(SYSDATETIMEOFFSET() as nvarchar(50))
select right(@timeStr, 6) 
```

如果要更明确一点，可以使用格式类型为 126 的 CONVERT 函数，明确告诉 SQL Server 使用 ISO 8601：

```
declare @timeStr nvarchar(50) = CONVERT(nvarchar(50), SYSDATETIMEOFFSET(), 126)
select right(@timeStr, 6) 
```

我的时区中的这两种方法都返回：

```
-06:00 
```

有关 CAST 和 CONVERT 的更多信息，[请参见此处](http://msdn.microsoft.com/en-us/library/ms187928.aspx)。

# c++ - 检测是否按下键objective-c++

> ID：14060537
> 
> 赞同：0
> 
> 时间：2012-12-27T19:58:40.973
> 
> 标签：c++, macos, objective-c++, core-foundation

如果不使用 Cocoa，我如何检测当前是否在 Objective-C++ 中按下了某个键？在 Windows 中，您使用“GetAsyncKeyState”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:27:37.850

你试图做的事情是不可能的。命令行程序与输入和输出文件（`stdin`, `stdout`, `stderr`）进行交互，这些文件不会传输诸如“按下按键”或“松开按键”之类的事件，而只会传输字符流（实际上是字节）。

# html - 站点在所有浏览器中都可以正常工作，除了 IE7 及更低版本，站点根本没有样式

> ID：14060552
> 
> 赞同：0
> 
> 时间：2012-12-27T19:59:34.597
> 
> 标签：html, css, internet-explorer, stylesheet

我正在开发的网站目前正在完全使用我正在使用的最新 chrome，但是当我使用[IE NetRender 之](http://netrenderer.com/index.php)类的工具来检查它与旧 IE 版本的兼容性时，该网站很简单，根本没有任何**样式**！但是，IE8 处于完全不同的水平。该网站看起来几乎和它在 chrome/firefox/whatever 上一样好。

我尝试使用 IE9.js、modernizr、IE Hacks 等所有工具——但没有任何效果。
不知何故，这一切似乎只在 IE8+ 上生效。
就好像 IE7- 甚至不加载样式表。

我还检查了我的代码是否存在 CSS/HTML 标记中的错误，但所有错误都指向 IE css hacks。

这可能是什么原因？我真的对此感到沮丧。
该网站（只是一个开发页面）是[http://kanjiman.0zed.com/](http://kanjiman.0zed.com/)

任何帮助都感激不尽。
请尝试使用[IE NetRender](http://netrenderer.com/index.php)渲染页面，看看我在说什么。

附言; 我确实尝试过谷歌/搜索解决方案 - 但情况没有我的那么糟糕。

编辑：问题是 IE9.js - 由于 Fabio 的回答，我发现了这一点。
是否保留它取决于您的项目要求和优先级。
我个人会保留它，因为正如 Rob / Felis 评论的那样，IE 版本 6/7 快要死了！我宁愿现在提供更好的用户体验，也不愿支持和花更多时间使用旧版浏览器。
此外，这只是大约 3 行的问题，所以如果您的网站开始获得更多的 IE7 流量（我怀疑这是否值得），它总是可以改变的。
**感谢 Rob、Felis 和 Fabio :)！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:59:25.393

这是我在 Internet Explorer 7 中看到的

```
<style _7="
article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}">CSS Stylesheet</style> 
```

这是应该有的：

```
<style>
article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}</style> 
```

出于某种原因，您将样式指定为样式标签的属性，使其对 Internet Explorer 无用。为什么不使用 css 文件进行样式设置，而不是将其与 html 源代码混合使用？

希望能帮助到你

# c# - 使用没有 Task.Wait() 的 cancelToken

> ID：14060557
> 
> 赞同：3
> 
> 时间：2012-12-27T20:00:00.707
> 
> 标签：c#, winforms, task, cancellation, cancellation-token

我有`winforms app`一个长时间运行的任务和两个按钮。一键启动，一键停止。

当我按下开始按钮时，一个带有取消令牌的新任务就会启动。如果我按下停止按钮，取消令牌的取消方法就会被调用。

我希望 UI 始终可用，所以我在哪里放置 try, catch 块来完成这项工作。在我看到的所有例子中，他们都把它放在 t.Wait();

但是，如果我这样做，UI 会冻结，这就是我首先使用 Task 的原因，以便在执行任务时继续使用 ui。那么在不使用 Task.Wait 的情况下将 try catch 块放在哪里。

## 开始按钮：

```
 tokenSource2 = new CancellationTokenSource();
   ct = tokenSource2.Token;
   t = new Task(doStart, ct);
   t.Start(); 
```

## 停止按钮：

```
tokenSource2.Cancel(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:20:20.973

您可以更新 doStart 以处理取消事件并优雅地退出任务，因此您根本不需要使用 Wait 例如

```
public void doStart(CancellationToken token)
{
    while(...)
    {
        ...
        if (token.IsCancellationRequested)
            break;
    }
} 
```

或者，您可以在另一个线程上等待任务结果，例如

```
Thread.QueueUserWorkItem((state) =>
{
    try
    {
        t.Wait();
    }
    catch(...)
    {
        ...
    }
}); 
```

# php - 从数组和总和中获取唯一值

> ID：14060560
> 
> 赞同：-1
> 
> 时间：2012-12-27T20:00:18.650
> 
> 标签：php, arrays, multidimensional-array, sum, unique

从这里`Array()`我想获取`amount_total`、 shipping 和 partner 的值，并按特定的合作伙伴将它们加起来。因此，例如`partner=>2665`应该有一个 amount_total 为 41.79 + 55.95 等等，请帮忙。我不想通过 SQL 来完成，因为我也需要数据。

```
Array
(
    [0] => Array
    (
        [amount_total] => 41.79
        [amount_shipping] => 4.99
        [amount_partner] => 14.8
        [partner] => 2665
    )
    [1] => Array
    (
        [amount_total] => 55.95
        [amount_shipping] => 19.96
        [amount_partner] => 11
        [partner] => 2665
    )
    [2] => Array
    (
        [amount_total] => 51.96
        [amount_shipping] => 7.98
        [amount_partner] => 23.98
        [partner] => 51754
    )
    [3] => Array
    (
        [amount_total] => 24.55
        [amount_shipping] => 4.99
        [amount_partner] => 5.67
        [partner] => 11513
    )
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T21:54:26.687

您可以使用 PHP 来实现这一点，但这不是必需的。数据库可以更有效地做到这一点

我假设您当前的查询看起来像这样

```
SELECT
    `amount_total`,
    `amount_shipping`,
    `amount_partner`,
    `partner`
FROM
    `salesLeads`
WHERE
    [..] 
```

MySQL 为您提供了很好的聚合函数，例如[SUM](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_sum)，您可以将其与[GROUP BY一起使用](http://dev.mysql.com/doc/refman/5.5/en/select.html)

```
SELECT
    SUM( `amount_total` ) AS `amount_total`,
    SUM( `amount_shipping` ) AS `amount_shipping`,
    SUM( `amount_partner` ) AS `amount_partner`.
    `partner`
FROM 
    `salesLeads`
WHERE
     [..]
GROUP BY
     `partner` 
```

在您的 PHP 脚本中，您以相同的方式访问它，但它已经由合作伙伴分组和汇总了最终数字

例如

```
if ($result = $mysqli->query($query)) {

    while ($row = $result->fetch_assoc()) {
        print_r( $row );
    }

    $result->close();
} 
```

**编辑**

因为您想要一个 PHP 解决方案，它再次比查询两次更有效：

```
$partnerSums = array();
while ( $row = $result->fetch_assoc() ) {
     if ( !array_key_exists( $row['partner'], $partnerSums ) {
          $partnerSums[$row['partner']] = $row;
     } else {
          $partnerSums[$row['partner']]['amount_total'] += $row['amount_total'];
          $partnerSums[$row['partner']]['amount_shipping'] += $row['amount_shipping'];
          $partnerSums[$row['partner']]['amount_partner'] += $row['amount_partner'];
     }
}

print_r( $partnerSums ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:07:10.043

我认为遍历这个数组并将总数存储在新数组中，以及检查`in_array`（[更多here](http://php.net/manual/en/function.in-array.php)）应该就足够了。您需要做的就是每次循环遍历一个元素时，检查它是否已经在新数组中，如果是 - 执行必要的数学运算

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T20:29:43.520

我会建议这样的事情：

```
 $res['totals']=array();

foreach($result as $res)
{
    $partner = $result['partner'];
    $res['totals'][$partner]+=$result['total_amount'];
} 
```

这样您就可以在一个地方获得所需的所有数据：合作伙伴数组“$res”。

希望它可以帮助你。

# asp.net-mvc-3 - 构建 DataAnnotationsModelBinder 项目以获取 Microsoft.Web.Mvc.DataAnnotations.dll 时出错

> ID：14060575
> 
> 赞同：1
> 
> 时间：2012-12-27T20:01:47.783
> 
> 标签：asp.net-mvc-3, data-annotations

我在这里指的是“数据注释验证教程” [http://www.asp.net/mvc/tutorials/older-versions/models-(data)/validation-with-the-data-annotation-validators-cs](http://www.asp.net/mvc/tutorials/older-versions/models-(data)/validation-with-the-data-annotation-validators-cs)对于我的数据库第一个 MVC3 项目。我下载了 DataAnnotationsModelBinder 项目，但在构建它时遇到了困难。它引发以下错误：

错误 1“System.Web.Mvc.IValueProvider”不包含“DoesAnyKeyHavePrefix”的定义，并且找不到接受“System.Web.Mvc.IValueProvider”类型的第一个参数的扩展方法“DoesAnyKeyHavePrefix”（您是否缺少使用指令还是程序集引用？） C:\XYZ\DataAnnotationsModelBinder\src\DataAnnotationsModelBinder.cs 47 17 Microsoft.Web.Mvc.DataAnnotations

错误 2 找不到元数据文件“C:\XYZ\DataAnnotationsModelBinder\src\bin\Debug\Microsoft.Web.Mvc.DataAnnotations.dll”Microsoft.Web.Mvc.DataAnnotations.Tests

我错过了什么吗？我尝试使用 VS2008 和 VS 2010。请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T10:44:53.720

我假设您缺少一些参考，因此您需要在项目中包含缺少的参考。您可以通过右键单击引用文件夹并手动添加它们来执行此操作。（见图）

[参考资料 - 图片](http://i.stack.imgur.com/9BA91.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T17:03:13.617

您不应该将`DataAnnotationsModelBinder`与 MVC3 一起使用。该类`DefaultModelBinder`已经包含`DataAnnotationsModelBinder`您链接到的示例中存在的所有逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-04T19:26:39.343

您可能需要添加对 System.Web.Mvc 1.0 的引用，而不是您目前所拥有的。

# android - 将长字符串加载到 WebView 时出现奇怪的 IndexOutOfBoundsException

> ID：14060579
> 
> 赞同：4
> 
> 时间：2012-12-27T20:01:57.750
> 
> 标签：android, android-webview, android-3.0-honeycomb

我没有做任何疯狂的字符串操作。这对我来说是一个非常非常奇怪的错误。

这是我见过的堆栈跟踪......一次且只有一次......永远：

```
java.lang.IndexOutOfBoundsException
    at java.lang.AbstractStringBuilder.append0(AbstractStringBuilder.java:158)
    at java.lang.StringBuilder.append(StringBuilder.java:312)
    at java.lang.StringBuilder.append(StringBuilder.java:44)
    at java.util.Formatter.outputCharSequence(Formatter.java:1115)
    at java.util.Formatter.doFormat(Formatter.java:1105)
    at java.util.Formatter.format(Formatter.java:1063)
    at java.util.Formatter.format(Formatter.java:1032)
    at java.lang.String.format(String.java:2104)
    at java.lang.String.format(String.java:2078)
    at com.my.app.package.myWebViewClient.onPageFinished(Unknown Source)
    at android.webkit.CallbackProxy.handleMessage(CallbackProxy.java:270)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:126)
    at android.app.ActivityThread.main(ActivityThread.java:3998)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:491)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
    at dalvik.system.NativeStart.main(Native Method) 
```

在 myWebViewClient 的 onPageFinished 中，我告诉 myWebView 加载此脚本：

```
String A_VERY_LONG_SCRIPT = "a very long script" +
                                 "that I format" +  \\ some comment!
                                 "in the source code!!" +
                            "some other things" +
                                 "to make this script look really long";
String jsString = String.format("javascript:try{%s}catch(e){}", A_VERY_LONG_SCRIPT);
myWebView.loadUrl(jsString); 
```

String.format 调用是否有长度限制？如果是这个原因，为什么我不能 100% 甚至 80% 的时间重现这个？

我无法重现此异常。即使我在每次测试中多次加载此脚本，我也只见过一次。自从看到异常后，我没有更改代码。我已经针对不同的操作系统版本进行了测试。我似乎无法再次触发异常，但我想知道为什么我一开始就看到了它。

那么，是什么导致了这个 IndexOutOfBoundsException ？？？

我正在为 Android 3.0+ 开发。

# python - 狮身人面像 add_config_value 不添加变量

> ID：14060582
> 
> 赞同：4
> 
> 时间：2012-12-27T20:02:24.943
> 
> 标签：python, django, python-sphinx, django-sphinx

尝试在此处为每个文档添加一个简单的真/假值：

[http://sphinx-doc.org/ext/ifconfig.html](http://sphinx-doc.org/ext/ifconfig.html)

在我的`conf.py`文件中：

```
extensions = ['sphinx.ext.todo', 'sphinx.ext.ifconfig']

# Custom variables
def setup(app):
    app.add_config_value('responsiveenabled', True, True) 
```

在我的`grids.rst`文件（描述如何设置引导网格的页面）中，我有这个：

```
.. ifconfig:: responsiveenabled

Blah blah blah. 
```

我得到的错误是：

```
NameError: name 'responsiveenabled' is not defined 
```

我需要在 之后的东西`responsiveenabled`，比如“in (...)”吗？我想让它与我正在编写的文档版本无关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T23:13:22.267

你的`conf.py`文件应该是：

```
extensions = ['sphinx.ext.todo', 'sphinx.ext.ifconfig']

# Custom variables
def setup(app):
    app.add_config_value('responsiveenabled', True, True)

responsiveenabled = True 
```

我知道它应该是一个默认值，但是没有 init 就无法让它工作。

那么你可以使用

```
.. ifconfig:: responsiveenabled

   text included if the config variable is set

text always included 
```

# php - 列出 PHP 数组中的重复项

> ID：14060589
> 
> 赞同：1
> 
> 时间：2012-12-27T20:02:51.637
> 
> 标签：php, arrays, duplicates

我有一个新问题，我的思绪在燃烧，我在 php 中有一个数组

```
$test = array();
    Array
    (
        [0] => Array
            (
                [account] => 14319896
                [value] => 725.57
                [id] => 280
            )

        [1] => Array
            (
                [account] => 163157
                [value] => -723.57
                [id] => 283
            )

        [2] => Array
            (
                [account] => 163157
                [value] => 723.57
                [id] => 284
            )

        [3] => Array
            (
                [account] => 161817
                [value] => -723.57
                [id] => 285
            )

    ) 
```

我需要账户，它们在这个数组中不止一个，在这个例子中我需要 $test[1][id] 和 $test[2][id]

你有什么想法吗？我现在不知道更多。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T20:09:01.560

使用帐号作为新数组中的键，计算每个条目，然后取出计数 > 1 的项目

```
$dupes = array();
foreach($array as $account) {
  ++$dupes[$account['account']];
}

$dupes = array_filter($dupes, function($count) { return $count > 1; }); 
```

* * *

编辑以回答问题下方的评论……</p>

如果您想要重复项的 ID（或键），请不要直接存储计数，而是使用另一个数组。

```
$dupes = array();
foreach($array as $key => $account) {
  if(!array_key_exists($account, $dupes))
    $dupes[$account['account']] = array();
  $dupes[$account['account']][] = $account['id']; // or: = $key
}

$dupes = array_filter($dupes, function($ids) { return count($ids) > 1; }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:31:44.907

您应该将架构更改为具有关联数组，其中键是这样组织的帐号：

```
 Array
(
    [14319896] => Array
        (
            [0]=>Array(
                [value] => 725.57
                [id] => 280
            )
        )

    [163157] => Array
        (
            [0]=>Array(
                [value] => -723.57
                [id] => 283
             )
            [1]=>Array(
                [value] => 723.57
                [id] => 284
            )
        )

    [161817] => Array
        (
            [0]=>Array(
                [value] => -723.57
                [id] => 285
            )
        )

)

$dupes = array();
foreach($array as $key => $account) {

  $dupes[$account['account']][] = array($account['id'],$account['value']); 
} 
```

借助该架构，您可以获得所需的一切`array_filter`：

```
$dups = array_filter($dupes, function($account){ return count($account)>1;}); 
```

# javascript - 为什么不触发 dragstart 事件？

> ID：14060593
> 
> 赞同：0
> 
> 时间：2012-12-27T20:03:01.090
> 
> 标签：javascript, jquery

# [小提琴](http://jsfiddle.net/mnbayazit/2m9Va/2/)

# 代码：

```
$(document).on('dragstart',function(e) {
    console.log(e);
});​ 
```

我认为`dragstart`并`dragstop`在较新的浏览器中支持事件？

该`dragover`事件触发得很好，但我想`<div>`在用户开始*仅拖动文件*时显示/隐藏一个。

在 ubuntu 上的 Chrome 23 中进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:18:56.760

`dragenter`并`dragleave`触发，但只有在您将文件拖到文档顶部时才开始，而不是在您开始从操作系统中拖动它时。这可能是一个安全问题，所以它必须这样做。

```
$(document).on('dragenter', function(e) {
    $drop_files_msg.show();
});
$(document).on('dragleave', function(e) {
    $drop_files_msg.hide();
}); 
```

# javascript - 使用 Javascript 编写 ASP 风格的 cookie（带键）；使用经典 ASP 读取

> ID：14060598
> 
> 赞同：3
> 
> 时间：2012-12-27T20:03:24.510
> 
> 标签：javascript, asp-classic

在经典 ASP 中，单个 cookie 可以是名称/值对的集合。例如，可以创建一个名为“user”的 cookie 集合，使其具有包含用户信息的键：

```
("user")("firstname")="John"
("user")("lastname")="Smith"
("user")("country")="Norway"
("user")("age")="25" 
```

是否可以使用 Javascript 编写这种 cookie，以便 ASP 识别它并相应地解析它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:36:59.173

应该是可行的。

您的 asp 示例将创建一个类似于以下内容的 cookie：

```
Name:   user
Value:  firstname=John&lastname=Smith&country=Norway&age=25 
```

因此，当您设置 javascript cookie 时，它​​应该是类似的格式，请尝试以下操作：

```
document.cookie = "user=firstname=John&lastname=Smith&country=Norway&age=25;"; 
```

# ruby-on-rails - 解析哈希 - Rails

> ID：14060603
> 
> 赞同：0
> 
> 时间：2012-12-27T20:03:41.530
> 
> 标签：ruby-on-rails, ruby-on-rails-3, parsing, hash

我正在尝试解析来自 LinkedIn 的哈希，并遇到错误

这是我要解析的哈希（从 Mash 转换而来）：

```
#<LinkedIn::Mash first_name="John" headline="Recruiter" id="xxxxxxxx" industry="Telecommunications" last_name="Smith" location=#<LinkedIn::Mash country=#<LinkedIn::Mash code="us"> name="Greater Philadelphia Area"> positions=#<LinkedIn::Mash all=[#<LinkedIn::Mash company=#<LinkedIn::Mash id=2325416 industry="Staffing and Recruiting" name="Amazing Associates, Inc" size="1-10 employees" type="Privately Held"> id=9999999 is_current=true start_date=#<LinkedIn::Mash month=6 year=2010> summary="" title="Corporate Recruiter">] total=1> public_profile_url="http://www.linkedin.com/pub/greatguyjohn"> 
```

这是我的代码：

```
<% if !connection["positions"].nil? %>
    <% connection["positions"].each do |positions| %>
        <% if !positions["all"].nil? %>
            <% positions["all"].each do |company| %>
                <%= company %>
            <% end %>
        <% end %>
    <% end %>
<% end %> 
```

这是错误：

```
can't convert String into Integer
Extracted source (around line #15):
12:         <% if !connection["positions"].nil? %>
13:             <% connection["positions"].each do |positions| %>
14:                 <% if !positions["all"].nil? %>
15:                     <% positions["all"].each do |company| %>
16:                         <%= company %>
17:                     <% end %> 
```

问题似乎是从 ["positions"] 哈希中解析 ["all"] 哈希。即使其余的哈希解析正常，我也会不断收到此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T22:38:57.440

`connection["positions"]`在您的示例中不会返回数组。它返回一个`LinkedIn::Mash`哈希对象。你错误地调用`.each`它。

# python - 抓取点击

> ID：14060605
> 
> 赞同：1
> 
> 时间：2012-12-27T20:03:55.973
> 
> 标签：python, web-scraping, beautifulsoup, lxml

我正在尝试抓取此网页上的评论。

[http://www.tripadvisor.com/Hotel_Review-g294265-d2309275-Reviews-The_Forest_by_Wangz-Singapore.html](http://www.tripadvisor.com/Hotel_Review-g294265-d2309275-Reviews-The_Forest_by_Wangz-Singapore.html)

每个评论中唯一的问题是“*更多*”，它会在 OnClick 事件上加载更多文本。

例如：

```
<span class="taLnk hvrIE6 tr147826763 moreLink" onclick = " ta.util.cookie.setPIDCookie(2247); ta.call('ta.servlet.Reviews.expandReviews', event,this,'review_147826763', '1', 2247)">
More </span> 
```

如何使用 LXML/BeautifulSoup 删除完整的评论文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:42:57.390

这可能不是您要寻找的答案，但我已经开始研究 PhantomJS，它为您提供了一个无头、可编写脚本的 webkit 浏览器。我敢打赌，这比你要走的任何 ajax 逆向工程兔子洞更容易……

# wpf - XAML 设计器在使用 WCF 服务时不起作用

> ID：14060611
> 
> 赞同：3
> 
> 时间：2012-12-27T20:04:28.690
> 
> 标签：wpf, wcf, xaml, visual-studio-2012, designer

我刚刚开始使用 WCF 服务迈出第一步，并制作了一个小 WPF 应用程序，用于显示从 WCF 服务检索到的数据。我将应用程序拆分为两个项目：一个包含 (WPF) UI 的项目和一个包含 WCF 服务客户端的项目。

将端点定义从第二个项目的 app.config 复制到第一个项目（当然是 StartUp 项目）的 app.config 后，应用程序现在正在运行。

但是自从我开始使用 WCF 服务客户端后，XAML 设计器就不再工作了。它总是显示异常：

*在 ServiceModel 客户端配置部分中找不到引用合同“MyContract”的默认端点元素。这可能是因为没有为您的应用程序找到配置文件，或者因为在客户端元素中找不到与此合同匹配的端点元素。*

这与我在将端点定义复制到另一个 app.config 文件之前遇到的异常完全相同。所以我猜 XAML 设计器不使用这个配置。是否有可能解决这种奇怪的行为？如果 XAML 设计器根本不使用 WCF（恕我直言，无论如何都不应该这样做），而只使用一些默认数据，那对我来说没问题。

我已经考虑过在*DesignerMode*案例中使用 RhinoMocks 存根 WCF 服务客户端，但是存根异步 WCF 调用并不是最简单的事情。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T20:47:17.720

我发现了如何避免这个问题：如果我在我的业务对象上调用从 ViewModel 的构造函数（在主窗口的 XAML 文件中定义为 DataContext）进行 WCF 通信的任何东西，XAML 设计器似乎不起作用。

一个简单的

```
if (DesignerProperties.GetIsInDesignMode(new DependencyObject()))
{
    return;
} 
```

在访问业务对象之前使 XAML 设计器再次工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T19:09:42.400

还有——相反的作品；即，通过将服务引用内容移动到“主”app.config，“子”项目可以找到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-05T12:11:48.170

有同样的问题。

我的解决方案是将视图模型分配从`xaml`代码`.cs`文件移动。

第 1 步：在您的 xaml 中删除：

```
<Window.DataContext>
    <viewModel:MainViewModel/>
</Window.DataContext> 
```

第 2 步：在 .cs 代码文件中添加到您的窗口构造函数：

```
DataContext = new MainViewModel(); 
```

# arrays - 数组元素之和 VHDL

> ID：14060613
> 
> 赞同：2
> 
> 时间：2012-12-27T20:04:40.310
> 
> 标签：arrays, sum, vhdl, fpga, addition

我是 VHDL 的新手，我搜索了所有的互联网，但没有找到任何对我有帮助的东西！

我正在尝试添加数组的元素（32 个元素！），所以我不能只写例如 s <= s(0) + s(1) + s(3) ... s(5) + .. ..s(32)

我怎样才能概括这样的计算？或者我做错了什么？

我的代码（在模拟中不起作用）是..（仅适用于 5 个元素 ....）

```
library IEEE;
library work;
library std;

use IEEE.STD_LOGIC_1164.all;
use IEEE.STD_LOGIC_UNSIGNED.all;
use ieee.std_logic_arith.all;

entity main is Port (
    EIN   : in std_logic;
    AUS_1 : out std_logic_vector(3 downto 0));
end main;

architecture Behaviour of main is

    type Cosinus is array (0 to 4) of std_logic_vector(3 downto 0); 
    type Sinus is array (0 to 4) of std_logic_vector(3 downto 0); 

    Signal SumSin :std_logic_vector(3 downto 0);

begin

    main : process(Ein)
        variable Cos : Cosinus;   
        variable Sin : Sinus;
    begin

        if( Ein='1' )  then
            sin(0) := "0011";
            sin(1) := "0001";
            sin(2) := "1010";
            sin(3) := "1111";
            sin(4) := "1110";

            for n in 0 to 4 loop
                SumSin <= SumSin + Sin(n);               
            end loop;
        else 
            sin(0) := "1011";
            sin(1) := "0101";
            sin(2) := "1000";
            sin(3) := "1001";
            sin(4) := "1100";

            for n in 0 to 4 loop
                SumSin <= SumSin + Sin(n);                         
            end loop;
        end if;
    end process;

    Aus_1 <= SumSin;    
end Behaviour; 
```

我会很感激的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T14:52:46.053

首先......[不要使用std_logic_arith。](http://parallelpoints.com/numbers-in-vhdl/)

然后，使用一个变量作为运行总和，然后将其分配给一个信号：

```
 ...
 main : process(Ein)
     variable Cos : Cosinus;   
     variable Sin : Sinus;
     variable SumSin : signed(3 downto 0);
 begin
     sumsin := (others => '0');
 ....
        for n in Sin'range loop
            SumSin := SumSin + Sin(n);                         
        end loop;
     end if;
     Aus_1 <= SumSin;    
  end process; 
```

# jquery - Jquery 中的动画和加载

> ID：14060616
> 
> 赞同：0
> 
> 时间：2012-12-27T20:04:54.667
> 
> 标签：jquery, jquery-animate, jquery-load

嗨我做了这个代码：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script type="text/javascript"> 
$(document).ready(function() { 
    $('#navigation a:first-child').click(function(){
    $("#space").load("index.html #container").animate({
        top: '-=120'
        }, 1000, function() {
        // Animation complete.
        });
});

$('#navigation a:nth-child(2)').click(function(){
    $("#space2").load("index.html #container2").animate({
            bottom: '-=120'
        }, 1000, function() {
        // Animation complete.
        });
});         
}); 
</script>
<div id="navigation">
    <a href="#">home</a>
    <a href="#">test</a>
</div>

<div id="space" style="border: 1px solid #000000;">

</div>

<div id="space2" style="border: 1px solid #ff0000;">

</div> 
```

我希望它在单击链接时进行动画处理，但第一个从左侧动画并淡入，第二个链接从顶部动画并淡入，第三个从右侧动画并淡入，第四个从动画底部和淡入，每个我都需要控制速度，所以第一个速度为 500，第二个为一千，第三个为 1200，第四个为 1500。

如果可能的话，我希望他们都加载到同一个区域。不知道能不能实现

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:01:54.643

看起来你一切都正确，你可能只想将你的动画移动到 .load 回调中，这样动画在元素加载之前不会触发。像这样：

```
$("#space").load("index.html #myDiv", function(){
    $(this).animate({
        top: '-=120'
            }, 1000, function() {
            // Animation complete.
            });
    }); 
```

当然你可以控制速度和动画彼此独立没问题。只需将“1000”更改为“500”或“1200”或任何您想要的。另外，我猜你会想用一个绝对位置来定位“空间”元素（比如可能离开页面？），给它们一个宽度和高度，动画会更明显。

# url - Drupal 7\. 翻译 URL

> ID：14060618
> 
> 赞同：0
> 
> 时间：2012-12-27T20:04:58.237
> 
> 标签：url, drupal-7, translate

我如何翻译网址。somesite.com/user 到 somesite.com/usario

另外我需要翻译 somesite.com/user/password somesite.com/user/register

我可以手动更改网址吗？

该站点是使用 Drupal 7 构建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T00:32:12.163

您可以添加别名。确保启用了名为“Path”的核心模块，然后您可以转到 admin/config/search/path 查看所有别名。还有一个添加新别名的链接。

别名将为您提供替代路径。现在 node/1 可以更改为“其他东西”。node/1 仍然可以工作，但别名也会显示 node/1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T01:32:37.947

恕我直言，URL 别名用于自定义。因此，您可以继续自己翻译网站的每个 URL，或者您可以在编写模块语言时定期更新它们，URL 以及模块的接口都会自动翻译。如果您唯一关心的是翻译（而不是定制），那么我建议您这样做。除非你有一个模块可以为你做这件事，否则这很难且重复：[检查一下](http://drupal.org/project/l10n_update)。

因此，它的作用是密切关注更新并在添加翻译时获取翻译。多么酷啊？;)

注意：翻译不仅仅是单词，它们还涉及日期格式（与另一种语言不同），这就是这个模块如此重要的原因。

# javascript - 数组在列表开头添加“未定义” - 抛出计数器和列表显示

> ID：14060623
> 
> 赞同：2
> 
> 时间：2012-12-27T20:05:27.303
> 
> 标签：javascript, arrays, null, undefined

我设法整理了一个代码，提示用户输入姓名列表并一直这样做，直到用户输入“q”。每个输入的名称都被添加到一个数组中并稍后显示（此外，提示框会显示输入的项目总数）。

当我运行代码时，它会显示所有输入的项目加上顶部的项目“未定义”......我注意到当我收到提示并开始输入名称时，它从 0 变为 2，然后是 3、4 等。

'未定义'来自哪里，我做错了什么？

另外，请注意，当代码运行时，它返回错误“长度”为空或不是对象，但列表仍然显示。

```
function getNames(){
var nameItems = new Array();
var i; 
i = 0;
var userInput; 
userInput = '';
var totalItems;
totalItems = nameItems.length;
do 
{
    if ( userInput > '') { /*performs task only if something is received from     userInput, doesn't add value to array if nothing is entered.*/
    i++;
    nameItems[i] = userInput;
    }
userInput = prompt("Enter a name to add to your favorite names list (enter \'q\'     to quit. - " + nameItems.length + " items entered.","");   
} while ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T20:08:44.050

```
if ( userInput > '') { /*performs task only if something is received from     userInput, doesn't add value to array if nothing is entered.*/
i++;
nameItems[i] = userInput; 
```

应该

```
if ( userInput > '') { /*performs task only if something is received from     userInput, doesn't add value to array if nothing is entered.*/
nameItems[i] = userInput;
i++; 
```

`nameItems[0]`位置永远不会改变，否则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T20:08:42.540

您首先增加`i`然后存储`userInput`. 因此，您实际上是在跳过第一个数组条目。反过来做，你的“未定义”条目就消失了。

注意：如果你稍微扔掉你的代码行，一切都会变得更好：

```
while((userInput = getInput()) != 'q')
{
    nameItems[i] = userInput;
    i++;
}

function getInput()
{
  return prompt("Enter a name to add to your favorite names list (enter \'q\'     to quit. - " + nameItems.length + " items entered.","");   
} 
```

# facebook - 首次用户使用 Facebook 应用程序

> ID：14060627
> 
> 赞同：1
> 
> 时间：2012-12-27T20:05:50.143
> 
> 标签：facebook

我如何判断用户是否是第一次使用我的 Facebook 应用程序。我想为用户做一些初始化，但只是第一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T16:00:13.660

我找不到更好的东西，所以我做了我宝贵的建议：我存储了一个用户 ID 列表（在数据库上）并检查用户以前是否使用过我的应用程序。如果它是用户的第一次，我执行所需的初始化，然后将他/她添加到列表中......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:28:54.083

如果您有权访问用于存储变量的数据库。创建一个名为 uservisitsount 的变量应该很容易。

然后，您只需在用户登录应用程序时将变量计数一次。用户访问量++；

然后你可以有一段代码。if(uservisitsount ==0) {第一次做某事}

问候克里斯汀

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-29T19:28:04.630

```
FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
    // the user is logged in and has authenticated your
    // app, and response.authResponse supplies
    // the user's ID, a valid access token, a signed
    // request, and the time the access token 
    // and signed request each expire
    var uid = response.authResponse.userID;
    var accessToken = response.authResponse.accessToken;
  } else if (response.status === 'not_authorized') {
    // the user is logged in to Facebook, 
    // but has not authenticated your app
  } else {
    // the user isn't logged in to Facebook.
  }
 }); 
```

[https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus)

# java - 如何使用 TestNg 对 Hibernate、H2 进行测试？

> ID：14060632
> 
> 赞同：7
> 
> 时间：2012-12-27T20:06:22.097
> 
> 标签：java, hibernate, testing, integration-testing, testng

测试 DAO 层的正确方法是什么？

我在创建和销毁的地方拥有`@BeforeMethod`并`@AfterMethod`注释了方法，`SessionFactory`但它不适用于多个测试。如果测试是一个接一个地运行，但是当它们一起运行时没有使用 maven 构建，所以我决定我应该使用 TestNg 组对它们进行分组，并在我用 Hibernate 做同样事情的地方做`@BeforeGroup`和方法。`@AfterGroup`

所以我做了这样的事情：

```
@Test(groups = {"integration"})
public class IntegrationTest
{
    protected SessionFactory sessionFactory;

    @BeforeGroups(groups = {"integration"})
    public void setUpHibernate() throws Exception
    {
        // here I configure sessionFactory
        this.sessionFactory = ...
    }

    @AfterGroups(groups = {"integration"})
    public void putItDown() throws Exception
    {
        sessionFactory.close();
    }
} 
```

我的每个测试都像这样扩展了这个类

```
@Test(groups = "integration")
public class RateRepositoryHibernateTest  extends IntegrationTest
{
    ...
} 
```

然后我注意到只有一个扩展测试`sessionFactory`设置和休息，`null`这并不奇怪，因为该方法应该运行一次。现在我真的不知道该怎么办。

如何`@BeforeGroup`围绕组测试方法从方法中传递数据？

或者

如何以不同的方式做到这一点？

或者

如何`SessionFactory`在每次测试之前和之后进行设置和拆卸，但在多次测试中不会出现任何悲观锁定异常？

- 编辑：

也欢迎解释如何以不同方式进行操作的答案。我想知道使用 TestNg、Hibernate 和一些内存数据库进行集成测试的最新技术。

——编辑2：

堆栈跟踪，下面的测试代码

```
Hibernate: select roomtype_.type_name from ROOM_TYPES roomtype_ where roomtype_.type_name=?
Hibernate: call next value for rates_sequence
Hibernate: call next value for rates_sequence
Hibernate: insert into ROOMS (prefix, housekeepingStatus, availability, maxExtraBeds, standard, maximum, type, name) values (?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into RATES (standardPrice, upchargeExtraPerson, upchargeExtraBed, room, RATE_TYPE, id) values (?, ?, ?, ?, 'R', ?)
Hibernate: insert into RATES (standardPrice, upchargeExtraPerson, upchargeExtraBed, room, seasonId, RATE_TYPE, id) values (?, ?, ?, ?, ?, 'S', ?)
Hibernate: insert into ROOM_TYPES (type_name) values (?)
Hibernate: select roomtype_.type_name from ROOM_TYPES roomtype_ where roomtype_.type_name=?
Hibernate: call next value for rates_sequence
Hibernate: insert into ROOMS (prefix, housekeepingStatus, availability, maxExtraBeds, standard, maximum, type, name) values (?, ?, ?, ?, ?, ?, ?, ?)
Hibernate: insert into RATES (standardPrice, upchargeExtraPerson, upchargeExtraBed, room, RATE_TYPE, id) values (?, ?, ?, ?, 'R', ?)
org.hibernate.PessimisticLockException: Timeout trying to lock table ; SQL statement:
insert into RATES (standardPrice, upchargeExtraPerson, upchargeExtraBed, room, RATE_TYPE, id) values (?, ?, ?, ?, 'R', ?) [50200-168]
    at org.hibernate.dialect.H2Dialect$2.convert(H2Dialect.java:317)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at $Proxy13.executeUpdate(Unknown Source)
    at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:56)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2962)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:3403)
    at org.hibernate.action.internal.EntityInsertAction.execute(EntityInsertAction.java:88)
    at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:362)
    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:354)
    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:275)
    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:326)
    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:52)
    at org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1210)
    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:399)
    at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.beforeTransactionCommit(JdbcTransaction.java:101)
    at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.commit(AbstractTransactionImpl.java:175)
    at net.mklew.hotelms.persistance.RatesPersistanceTest.should_save_rates_and_retrieve_them_with_success(RatesPersistanceTest.java:80)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
    at org.testng.internal.Invoker.invokeMethod(Invoker.java:673)
    at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:842)
    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1166)
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
    at org.testng.TestRunner.runWorkers(TestRunner.java:1178)
    at org.testng.TestRunner.privateRun(TestRunner.java:757)
    at org.testng.TestRunner.run(TestRunner.java:608)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
    at org.testng.SuiteRunner.run(SuiteRunner.java:240)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1158)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:1083)
    at org.testng.TestNG.run(TestNG.java:999)
    at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:111)
    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:203)
    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:174)
    at org.testng.RemoteTestNGStarter.main(RemoteTestNGStarter.java:111)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: org.h2.jdbc.JdbcSQLException: Timeout trying to lock table ; SQL statement:
insert into RATES (standardPrice, upchargeExtraPerson, upchargeExtraBed, room, RATE_TYPE, id) values (?, ?, ?, ?, 'R', ?) [50200-168]
    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
    at org.h2.message.DbException.get(DbException.java:158)
    at org.h2.command.Command.filterConcurrentUpdate(Command.java:276)
    at org.h2.command.Command.executeUpdate(Command.java:232)
    at org.h2.jdbc.JdbcPreparedStatement.executeUpdateInternal(JdbcPreparedStatement.java:156)
    at org.h2.jdbc.JdbcPreparedStatement.executeUpdate(JdbcPreparedStatement.java:142)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
    ... 47 more
Caused by: org.h2.jdbc.JdbcSQLException: Concurrent update in table "PRIMARY_KEY_4": another transaction has updated or deleted the same row [90131-168]
    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
    at org.h2.message.DbException.get(DbException.java:169)
    at org.h2.message.DbException.get(DbException.java:146)
    at org.h2.table.RegularTable.addRow(RegularTable.java:146)
    at org.h2.command.dml.Insert.insertRows(Insert.java:124)
    at org.h2.command.dml.Insert.update(Insert.java:84)
    at org.h2.command.CommandContainer.update(CommandContainer.java:75)
    at org.h2.command.Command.executeUpdate(Command.java:230)
    ... 54 more 
```

测试代码：

```
public class RatesPersistanceTest
{

    protected SessionFactory sessionFactory;
    protected HibernateSessionFactory hibernateSessionFactory;

    @BeforeMethod
    public void setUpHibernate() throws Exception
    {
        Logger logger = mock(Logger.class);
        NativelyConfiguredHibernateSessionFactory hibernateSessionFactory = new
                NativelyConfiguredHibernateSessionFactory(logger);
        this.sessionFactory = hibernateSessionFactory.getSessionFactory();
        this.hibernateSessionFactory = hibernateSessionFactory;
    }

    @AfterMethod
    public void putItDown() throws Exception
    {
        sessionFactory.close();
    }

    @Test
    public void should_save_rates_and_retrieve_them_with_success()
    {
        // given
        Money standardPrice = Money.parse("USD 85");
        Money upchargeExtraPerson = Money.parse("USD 80");
        Money upchargeExtraBed = Money.parse("USD 75");
        RoomType roomType = getMeRoomType();
        Room room = getMeRoom(roomType);

        AvailabilityPeriod availabilityPeriod = new AvailabilityPeriod(DateTime.now(), DateTime.now().plusDays(5),
                true);
        Season season = new BasicSeason("season name", availabilityPeriod);
        Rate seasonRate = new SeasonRate(standardPrice, upchargeExtraPerson, upchargeExtraBed, room, season);

        Session session = sessionFactory.openSession();
        session.beginTransaction();

        session.save(roomType);
//        session.save(room);

        session.getTransaction().commit();
        session.close();

        session = sessionFactory.openSession();
        session.beginTransaction();

        //        session.save(roomType);
        session.save(room);

        session.getTransaction().commit();
        session.close();

        session = sessionFactory.openSession();
        session.beginTransaction();
        session.save(season);

        session.save(seasonRate);

        session.getTransaction().commit();
        session.close();
        // when
        session = sessionFactory.openSession();
        session.beginTransaction();
        final List<Rate> list = session.createQuery("from Rate").list();

        // then
        assertThat(list).contains(seasonRate);
        session.getTransaction().commit();
        session.close();

    }

    @Test( expectedExceptions = org.hibernate.exception.ConstraintViolationException.class)
    public void season_rate_should_violate_db_constraints_when_saved_without_season()
    {
        // given
        Money standardPrice = Money.parse("USD 85");
        Money upchargeExtraPerson = Money.parse("USD 80");
        Money upchargeExtraBed = Money.parse("USD 75");
        RoomType roomType = getMeRoomType();
        final RoomName roomName = new RoomName("103");

        final Money roomStandardPrice = Money.parse("USD 100");
        final Money roomUpchargeExtraPerson = Money.parse("USD 50");
        final Money roomUpchargeExtraBed = Money.parse("USD 20");
        final RackRate rackRate = new RackRate(roomStandardPrice, roomUpchargeExtraPerson, roomUpchargeExtraBed, null);
        final int maxExtraBeds = 2;
        final Occupancy occupancy = new Occupancy(4, 2);
        Room room = new Room("C", roomName, roomType, HousekeepingStatus.CLEAN, RoomAvailability.AVAILABLE,
                maxExtraBeds, occupancy, standardPrice, upchargeExtraPerson, upchargeExtraBed);

        AvailabilityPeriod availabilityPeriod = new AvailabilityPeriod(DateTime.now(), DateTime.now().plusDays(5),
                true);
        Season season = new BasicSeason("season name", availabilityPeriod);
        Rate seasonRate = new SeasonRate(standardPrice, upchargeExtraPerson, upchargeExtraBed, room, null);

        Session session = sessionFactory.openSession();
        session.beginTransaction();

        session.save(room);
        // when
        session.save(seasonRate);

        session.getTransaction().commit();
        session.close();
        // then exception should be thrown
    }

//    @Test
//    public void package_rate_should_violate_db_constraints_when_saved_without_package()
//    {
//
//    }

    private RoomType getMeRoomType()
    {
        final RoomType roomType = new RoomType("cheap" + DateTime.now().toString());
        return roomType;
    }

    private Room getMeRoom(RoomType roomType)
    {
        final RoomName roomName = new RoomName("101001" + DateTime.now().toString());

        final Money standardPrice = Money.parse("USD 100");
        final Money upchargeExtraPerson = Money.parse("USD 50");
        final Money upchargeExtraBed = Money.parse("USD 20");
        final RackRate rackRate = new RackRate(standardPrice, upchargeExtraPerson, upchargeExtraBed, null);
        final int maxExtraBeds = 2;
        final Occupancy occupancy = new Occupancy(4, 2);
        return new Room("C", roomName, roomType, HousekeepingStatus.CLEAN, RoomAvailability.AVAILABLE, maxExtraBeds,
                occupancy, standardPrice, upchargeExtraPerson, upchargeExtraBed);
    }

} 
```

休眠配置：

```
<hibernate-configuration>

    <session-factory>
        <!-- Database connection settings -->
        <property name="connection.driver_class">org.h2.Driver</property>
        <property name="connection.url">jdbc:h2:mem:db1;DB_CLOSE_DELAY=0;MVCC=true</property>
        <property name="connection.username">sa</property>
        <property name="connection.password"/>

        <!-- JDBC connection pool (use the built-in) -->
        <property name="connection.pool_size">1</property>

        <!-- SQL dialect -->
        <property name="dialect">org.hibernate.dialect.H2Dialect</property>

        <!-- Disable the second-level cache  -->
        <property name="cache.provider_class">org.hibernate.cache.internal.NoCachingRegionFactory</property>

        <!-- Enable Hibernate's automatic session context management -->
        <property name="current_session_context_class">thread</property>

        <!-- Echo all executed SQL to stdout -->
        <property name="show_sql">true</property>

        <!-- Drop and re-create the database schema on startup -->
        <property name="hbm2ddl.auto">create-drop</property>

       <!-- skipped mappings -->

    </session-factory>

</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:09:03.453

我首选的测试使用 Hibernate 的代码的方法是使用`@BeforeMethod`和`@AfterMethod`测试方法。我对TestNg 没有任何经验，但我认为它处理这些函数的方式类似于JUnit3.8.1 对setUp() 和tearDown() 所做的，这是我使用的。

[对我来说，关键点是单元测试执行顺序无关紧要](http://en.wikipedia.org/wiki/XUnit#Test_suites)的想法。如果您使用`@BeforeGroup`and `@AfterGroup`，那么您拥有相同的`SessionFactory`实例，因此具有相同的数据库（在内存中或不在内存中），并且运行测试的任何变异操作`SessionFactory`都会影响以后执行读取操作的测试。这可能是需要的（尽管顺序可能必须是可预测的），在这种情况下，您实际上是在谈论单个“集成测试”，但对于您的情况，听起来您希望测试是独立的。

下一个问题是如何做到这一点。我所做的是将 Hibernate 配置为创建并连接到内存数据库，在其上运行创建模式脚本，并为每个测试方法创建一个 SessionFactory。

```
@Override
protected void setUp() throws Exception {
    super.setUp();
    String dialectClassName = HSQLDialect.class.getName();
    AnnotationConfiguration config = new AnnotationConfiguration().addAnnotatedClass(DividendScheduleGeneratorImpl.class);

    config.setProperty(Environment.DIALECT, dialectClassName);
    config.setProperty(Environment.DRIVER, jdbcDriver.class.getName());
    config.setProperty(Environment.URL, "jdbc:hsqldb:mem:testDB");
    config.setProperty(Environment.USER, "SA");
    config.setProperty(Environment.PASS, "");

    SchemaExport export = new SchemaExport(config);
    export.create(false, true);

    sessions = config.buildSessionFactory();
}

@Override
protected void tearDown() throws Exception {
    sessions.close();
    sessions = null;

    super.tearDown();
} 
```

几点注意事项：

1.  架构创建并不是那么快，至少对于我使用的 HSQLDB。但是，只要您将真正测试 Hibernate 的测试与使用可模拟持久层的测试完全分开，就应该没问题，因为不会有那么多测试必须使用实际数据库。
2.  我的测试是单线程运行的。如果您正在运行多线程，则需要设置数据库名称，以便它对于并发运行的测试是唯一的。

编辑：

根据您的错误堆栈跟踪和代码，以及测试独立运行的事实，我怀疑 PessimisticLockExceptions 是由针对同一数据库在不同线程上运行的测试引起的。您甚至可能在 RATES 表上有一个以数据库为中心的死锁。处理它的两个选项是让测试生成独立的数据库，或者告诉 TestNG 串行运行测试。

首先，您必须以编程方式编辑 Hibernate 连接字符串

```
jdbc:h2:mem:db1;DB_CLOSE_DELAY=0;MVCC=true 
```

到

```
jdbc:h2:mem:<TESTNAME>;DB_CLOSE_DELAY=0;MVCC=true 
```

或类似的。在 JUnit 中，我会使用[TestCase.getName()](http://junit.sourceforge.net/junit3.8.1/javadoc/junit/framework/TestCase.html#getName%28%29)，我假设 TestNG 中有类似的可用功能。

另一种方法是串行运行。根据TestNG文档，应该可以通过注释类（而不是方法）来序列化测试以添加@Test(singleThreaded=true)

```
@Test(singleThreaded=true)
public class RatesPersistanceTest 
```

至少它应该是这样工作的，也许当你尝试它时，你注释了这个方法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T23:08:44.403

*我*已经使用`AbstractTestNGSpringContextTests`.

```
@ContextConfiguration(locations = { "file:src/test/resources/test-context.xml" })
@TransactionConfiguration(defaultRollback = true)
public class TheDAOTest extends AbstractTestNGSpringContextTests {

    private static final Logger LOG = Logger.getLogger(TheDAOTest.class);

    // N.B. this will be wired AFTER @BeforeTest !!
    @Autowired TheDAO subject;

    @BeforeMethod
    public void beforeMethod() {
        final HibernateTemplate ht = subject.getHibernateTemplate();
        ht.deleteAll(subject.listCustomers());
    }

    @Test
    public void noCustomers() {
        final List<CustomerDTO> customers = subject.listCustomers();
        assert customers != null : "listCustomers null result";
        LOG.info("listCustomers: " + customers);
        assert customers.size() == 0 : "Expected zero customers";

        final CustomerDTO customer = subject.findCustomerById(0L);
        assert customer == null : "Unexpected customer found";
    }

    @Test
    public void saveAndFind() {
        final CustomerDTO dto1 = makeDTO("0");
        final CustomerDTO saved = subject.save(dto1);
        assert saved != null ;

        final Long id1 = saved.getId();
        CustomerDTO customer = subject.findCustomerById(id1);
        assert customer != null ;
        assert customer.getId().equals(id1);
        assert customer.getTN().equals(dto1.getTN());

        List<CustomerDTO> customers = subject.listCustomers();
        assert customers != null : "listCustomers null result";
        LOG.info("saveAndFind - listCustomers: " + customers);
        assert customers.size() == 1 : "Expected one customer";

        subject.save(makeDTO("1"));

        customer = subject.findCustomerById(id1);
        assert customer != null ;
        assert customer.getId().equals(id1);

        customers = subject.listCustomers();
        assert customers != null : "listCustomers null result";
        LOG.info("saveAndFind - listCustomers: " + customers);
        assert customers.size() == 2 : "Expected two customers";
   }

   private CustomerDTO makeDTO(final String x) {
       final CustomerDTO dto = new CustomerDTO();
       dto.setX(x);
       return dto;
   }

} 
```

为了完整起见，DTO 是这样的：

```
@Entity @Table(name = "customers") public class CustomerDTO {

    @Id @GeneratedValue(strategy = GenerationType.AUTO) private Long id = Long.MIN_VALUE;
    @Column private String X;

    public Long getId() {
        return id;
    }
    public void setId(final Long id) {
        this.id = id;
    }
    public String getX() {
        return this.X;
    }
    public void setX(final String x) {
        this.X = x;
    }
    //  etc. 
} 
```

最后，DAO：

```
@Component
public class TheDAO {

    public List<CustomerDTO> listCustomers() {
        return getHibernateTemplate().loadAll(CustomerDTO.class);
    }

    public CustomerDTO getCustomer(final Long id) {
        return getHibernateTemplate().get(CustomerDTO.class, id);
    }

    public List<CustomerDTO> listCustomers() {
        return getHibernateTemplate().loadAll(CustomerDTO.class);
    }

    public <T> T save(final T valueObject) {
        getHibernateTemplate().saveOrUpdate(valueObject);
        return valueObject;
    }

    public void setHibernateTemplate(final HibernateTemplate hibernateTemplate) {
        TheDAO.hibernateTemplate = hibernateTemplate;
    }

    CustomerDTO findCustomerById(final Long id) {
        return getHibernateTemplate().get(CustomerDTO.class, id);
    }

    HibernateTemplate getHibernateTemplate() {
        return TheDAO.hibernateTemplate;
    }
} 
```

# vb.net - vb .net，将枚举值作为函数参数传递

> ID：14060637
> 
> 赞同：1
> 
> 时间：2012-12-27T20:06:39.063
> 
> 标签：vb.net

这编译没有错误，但是当我运行这个代码部分时，会出现一些奇怪的错误：

检测到 FatalExecutionEngineError 消息：运行时遇到致命错误。错误地址位于线程 0xd7c 上的 0x792062fb。错误代码为 0xc0000005。此错误可能是 CLR 中的错​​误或用户代码的不安全或不可验证部分中的错误。此错误的常见来源包括 COM 互操作或 PInvoke 的用户封送错误，这可能会损坏堆栈。

我尝试如下：

```
 Public Enum PipePolicyType
        SHORT_PACKET_TERMINATE = 1
        AUTO_CLEAR_STALL = 2
        PIPE_TRANSFER_TIMEOUT = 3
        IGNORE_SHORT_PACKETS = 4
        ALLOW_PARTIAL_READS = 5
        AUTO_FLUSH = 6
        RAW_IO = 7
        RESET_PIPE_ON_RESUME = 9
    End Enum

...
...

        Dim a As UInt32 = 3000

        SetPolicy(1, PIPE_TRANSFER_TIMEOUT, a)

...
...
Public Sub SetPolicy(ByVal ep As Integer, ByVal PolicyType As PipePolicyType, ByVal PolicyValue As UInt32)

end sub 
```

怎么了 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T01:34:25.333

好的，我完全在其他地方发现了问题，我不明白。我的枚举完全没有问题，在一些非托管的包装器中出现了一些奇怪的错误：

```
 Dim PUnmanagedDetailedInterfaceDataStructure As IntPtr = IntPtr.Zero
    PUnmanagedDetailedInterfaceDataStructure = Marshal.AllocHGlobal(StructureSize) 
```

这是我几天前这样缩短的

```
 Dim PUnmanagedDetailedInterfaceDataStructure As IntPtr = Marshal.AllocHGlobal(StructureSize) 
```

第二次声明有什么问题？！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:10:44.463

您需要使用 PipePolicyType.PIPE_TRANSFER_TIMEOUT 调用它

```
Public Class Form1
    Public Sub SetPolicy(ByVal ep As Integer, ByVal PolicyType As PipePolicyType, ByVal PolicyValue As UInt32)

    End Sub

    Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load

        Dim a As UInt32 = 3000

        SetPolicy(1, PipePolicyType.PIPE_TRANSFER_TIMEOUT, a)
    End Sub
End Class

Public Enum PipePolicyType
    SHORT_PACKET_TERMINATE = 1
    AUTO_CLEAR_STALL = 2
    PIPE_TRANSFER_TIMEOUT = 3
    IGNORE_SHORT_PACKETS = 4
    ALLOW_PARTIAL_READS = 5
    AUTO_FLUSH = 6
    RAW_IO = 7
    RESET_PIPE_ON_RESUME = 9
End Enum 
```

# c++ - 扩展boost序列化

> ID：14060640
> 
> 赞同：5
> 
> 时间：2012-12-27T20:06:58.070
> 
> 标签：c++, serialization, boost-serialization

我正在尝试为移动设备的网络视频游戏设置多用途序列化。因为它是联网的，所以在初始连接期间，我需要序列化游戏状态的所有数据，但是，一旦游戏进行中，我只需要序列化某些更改。作为 boost 序列化库一部分的 save 和 load 方法只有一个版本号作为参数。我想做的是有更多的参数，这样我就可以改变保存和加载的条件，而不仅仅是一个版本号。

[Boost 序列化文档在这里，供参考。](http://www.boost.org/doc/libs/1_37_0/libs/serialization/doc/index.html)

下面是普通的 boost 序列化`save`方法目前的样子：

```
template<class Archive>
void save(Archive& ar, const unsigned int version) const
{
    // Serialize stuff here
} 
```

这是我想要完成的：

```
template<class Archive>
void save(Archive& ar, const unsigned int version, const unsigned int state_flags) const
{
    if (state_flags & INITIAL_SERIALIZATION)
    {
        // Serialize only data needed for an initial serialization
    }

    // Other serialization
} 
```

我怀疑我是否可以让 boost 库调用我想要的序列化方法，因为它在上面的第一个示例中重载了调用具有特定签名的运算符。我想象在第一个示例中显示`save`的调用中调用我自己的版本，并且可能从单独的位置获取。是否有人对如何干净地完成此操作或任何好的替代方案有任何想法？`save``state_flags`

编辑：我遇到了另一个问题。我需要序列化不一定是类成员的对象，但文档没有提到对此的任何支持。

这是一个简单的例子：

```
class Foo
{
private:
    SomeClass m_object;

    template<class Archive>
    void save(Archive& ar, const unsigned int version) const
    {
        Bar* pBar = m_object->getComponent<Bar>();
        ar & pBar;   // <--- But pBar isn't a member of Bar, it's part of SomeClass.
    }
}; 
```

我只是序列化`SomeClass`并让它滴下来`Bar`，但在这种情况下，它是一个属于第三方库/引擎的类，而不是我可以修改的东西。Boost 序列化是否允许我以这种方式进行序列化和反序列化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T04:15:53.467

**编辑**：下面添加了新答案以解决实际问题。

您的问题意味着您反复反序列化到同一个对象。这是否干净是间接的。例如，如果您有一个棋盘，您可能希望同步棋子的初始位置（从上次保存的游戏继续）。为了在玩游戏时传达动作，最好将单个动作作为单独的对象发送（然后在收到后应用于棋盘对象），而不是传输整个棋盘对象，后者只会传输已更改的内容如果它已经“初始化”。这样，您可以先验证输入并忽略无效的移动。无论如何，我只是想提一下，让我们继续。

如果您有一个可能被多次同步的对象，而成员数据只需要传输一次，则让该对象决定它是否“初始化”（因此，它是否需要传输所有内容或只是一个子集）通过使用标志（未序列化）。

然后您可以检查对象的序列化代码中的标志，就像在您发布的代码中一样（除了标志不是序列化方法的参数，而是您正在反序列化/序列化的对象的成员变量）。如果设置了标志，则反序列化所有内容并重置标志。客户端和服务器必须具有相同的标志状态，否则序列化中断。

或者，您可以先序列化标志，以告诉接收器必须如何执行反序列化（例如，每个成员数据组一个位）。

请记住，反序列化必须与序列化匹配；您必须以与序列化相同的顺序提取相同的对象。

但是，您可以序列化多态类，因为它们在反序列化时通过类层次结构中的同一级别进行序列化（如有疑问，在发送时强制转换为基指针并通过基指针反序列化）。

关于您的第二个问题，您正在寻找的[是非侵入式序列化](http://www.boost.org/doc/libs/1_52_0/libs/serialization/doc/tutorial.html#nonintrusiveversion)。非侵入式序列化调用独立函数并将要序列化的对象作为参数传递（这就是 std::vector 和 boost::shared_ptr 的序列化方式）。您可以使用`BOOST_SERIALIZATION_SPLIT_FREE`将独立`serialize()`功能拆分为`save()`和`load()`。对于侵入式序列化，它是`BOOST_SERIALIZATION_SPLIT_MEMBER`.

要编写通用的反序列化函数（例如通过网络传输对象），您可以使用模板：

```
template<typename T>
void transmit( const T& data ) {
    // ...
    archive << data
    socket << archive_stream;
} 
```

这种方法的限制是接收者必须知道发送了什么样的对象。如果要发送随机对象，请将它们设为多态：

```
IData* data = 0;
archive >> data;
switch( data->type() ) {
case TYPE_INIT:
    return dispatch( static_cast<Board*>(data) );
case TYPE_MOVE:
    return dispatch( static_cast<Move*>(data) );
case TYPE_CHAT:
    return dispatch( static_cast<ChatMsg*>(data) );
} 
```

* * *

**更新**：如果您需要控制（自定义）序列化方法/函数的行为方式，基于被序列化类型未知的状态，您可以实现自己的保存状态的存档类。然后，序列化函数可以查询状态并采取相应的行动。

此状态（或适当的替换）也必须序列化，以指示数据必须如何反序列化。例如，序列化函数的这种“不同行为”可能是某种压缩，而状态是使用的压缩类型。

这是自定义输出存档的最小示例。有关更多信息，您可以阅读[来自现有存档的派生](http://www.boost.org/doc/libs/1_52_0/libs/serialization/doc/derivation.html)并挖掘提升源。

给定一个你不能修改的类：

```
struct Foo {
    Foo() : i(42), s("foo") {}
    int i;
    std::string s;
}; 
```

您希望序列化`i`和/或`s`基于类未知的条件。您可以创建一个包装器来对其进行序列化并添加状态，但如果对象位于向量（或其他类）内，这将不起作用。

相反，让存档了解状态可能更容易：

```
#include <boost/archive/text_oarchive.hpp>

// using struct to omit a bunch of friend declarations    
struct oarchive : boost::archive::text_oarchive_impl<oarchive>
{
    oarchive(std::ostream& os, unsigned flags=0)
      : boost::archive::text_oarchive_impl<oarchive>(os,flags),mask(0){}

    // forward to base class
    template<class T> void save( T& t ) {
        boost::archive::text_oarchive_impl<oarchive>::save(t);
    }

    // this is the 'state' that can be set on the archive
    // and queried by the serialization functions
    unsigned get_mask() const { return mask; }
    void set_mask(unsigned m) { mask = m; }
    void clear_mask() { mask = 0; }
private:
    unsigned mask;
};

// explicit instantiation of class templates involved
namespace boost { namespace archive {
   template class basic_text_oarchive<oarchive>;
   template class text_oarchive_impl<oarchive>;
   template class detail::archive_serializer_map<oarchive>;
} }

// template implementations (should go to the .cpp)
#include <boost/archive/impl/basic_text_oarchive.ipp>
#include <boost/archive/impl/text_oarchive_impl.ipp>
#include <boost/archive/impl/archive_serializer_map.ipp> 
```

现在设置和查询的状态：

```
enum state { FULL=0x10, PARTIAL=0x20 }; 
```

以及设置状态的方法（这只是一个非常基本的示例）：

```
oarchive& operator<<(oarchive& ar, state mask) {
    ar.set_mask(ar.get_mask()|mask);
    return ar;
} 
```

最后，（非侵入式）序列化函数：

```
namespace boost { namespace serialization {

template<class Archive>
void save(Archive & ar, const Foo& foo, const unsigned int version)
{
    int mask = ar.get_mask(); // get state from the archive
    ar << mask; // serialize the state! when deserializing,
    // read the state first and extract the data accordingly

    if( mask & FULL )
        ar << foo.s; // only serialize s if FULL is set
    ar << foo.i;     // otherwise serialize i only
    ar.clear_mask(); // reset the state
}

} } // boost::serialization

BOOST_SERIALIZATION_SPLIT_FREE(Foo) 
```

这可以按如下方式使用：

```
int main() {
    std::stringstream strm;
    oarchive ar(strm);

    Foo f;
    ar << PARTIAL << f << FULL << f;

    std::cout << strm.str();
} 
```

这个例子的目的只是为了说明原理。它对于生产代码来说太基础了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T17:59:02.590

我确实想出了一个解决方案，虽然不太理想，但我认为它可能值得发布。基本上，我设置了一个单例类来管理发送所有序列化请求，并且该类将跟踪用于该请求的最新位标志。因此，在序列化或反序列化期间，这些方法可以查询这些标志。这使我可以让 Boost`save`和`load`方法调用一组更强大的方法，这些方法可以使用这些标志来选择性地仅序列化某些成员。

```
// Boost's `save` method, which must have this exact signature
template<class Archive>
void save(Archive& ar, const unsigned int version) const
{
    const unsigned int flags = SerializationManager::getFlags(); // SerializationManager is a singleton.
    saveData(ar, version, flags);
}

// Your own custom method, which can have whichever parameters you need
template<class Archive>
void saveData(Archive& ar, const unsigned int version, const unsigned int state_flags) const
{
    if (state_flags & INITIAL_SERIALIZATION)
    {
        // Serialize only data needed for an initial serialization
    }

    // Other serialization
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-25T00:06:51.940

这是一个更简单的方法：

```
// Boost's `save` method, which must have this exact signature
template<class Archive>
void save(Archive& ar, const unsigned int version) const
{
    const unsigned int flags = SerializationManager::getFlags(); //         SerializationManager is a singleton.
    ar << flags;
    if(flags && INITIAL_SERIALIZATION){
        // Serialize only data needed for an initial serialization
    }
    // Other serialization
}
template<class Archive>
void load(Archive& ar, const unsigned int version) const
{
    const unsigned int flags = SerializationManager::getFlags(); //         SerializationManager is a singleton.
    unsigned int flags;
    ar >> flags;
    if(flags && INITIAL_SERIALIZATION){
        // Serialize only data needed for an initial serialization
    }
    // Other serialization
} 
```

# ajax - 带有验证引擎和重新加载的 Fancybox

> ID：14060641
> 
> 赞同：0
> 
> 时间：2012-12-27T20:07:04.173
> 
> 标签：ajax, validation, fancybox

我正在尝试在 ajax fancybox 中发布表单并使用验证引擎进行验证。在验证和发布后，我希望它关闭当前的fancybox，并在一系列步骤中在fancybox ajax 中加载另一个页面。

请帮助这是我在第一个加载页面中的脚本。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style type="text/css">
h1 { font-size:17px; font-family:Arial, Helvetica, sans-serif;}
body { font-size:12px; font-family:Verdana, Geneva, sans-serif;}
em {
    font-size: 12px;
}
#regShr { background-color:#e8eef9; border:1px solid #DAE0EA; padding:9px;}
.d1 { float:left; width:300px; margin-right:10px;}
.d2 { float:left; margin-right:10px; margin-top:10px;}
.button {
  -moz-border-radius: 5px;
  -moz-box-shadow: #6E7849 0px 0px 10px;
  -moz-transition: all 0.5s ease;
  -ms-transition: all 0.5s ease;
  -o-transition: all 0.5s ease;
  -webkit-border-radius: 5px;
  -webkit-box-shadow: #6E7849 0 0 10px;
  -webkit-transition: all 0.5s ease;
  background-color: #B20000;
  background-image: -moz-linear-gradient(80deg, #D90000, #B20000);
  background-image: -ms-linear-gradient(80deg, #D90000, #B20000);
  background-image: -o-linear-gradient(80deg, #D90000, #B20000);
  background-image: -webkit-linear-gradient(80deg, #D90000, #B20000);
  background-image: linear-gradient(80deg, #D90000, #B20000);
  border-radius: 5px;
  border: 1px solid #4a5032;
  box-shadow: #6E7849 0px 0px 10px;
  color: #ffffff;
  display: inline-block;
  font-family: Trebuchet MS;
  font-size: 1em;
  margin: auto;
  padding: 10px;
  text-decoration: none;
  text-shadow: #000000 5px 5px 15px;
  transition: all 0.5s ease;
}
.button:hover {
  background-color: #FF0000;
  background-image: -moz-linear-gradient(80deg, #FF3838, #FF0000);
  background-image: -ms-linear-gradient(80deg, #FF3838, #FF0000);
  background-image: -o-linear-gradient(80deg, #FF3838, #FF0000);
  background-image: -webkit-linear-gradient(80deg, #FF3838, #FF0000);
  background-image: linear-gradient(80deg, #FF3838, #FF0000);
  padding: 10px;
}
</style>
<script type="text/javascript" src="/lib/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="/source/jquery.fancybox.js?v=2.1.3"></script>
    <link rel="stylesheet" type="text/css" href="/source/jquery.fancybox.css?v=2.1.2" media="screen" />
<link rel="stylesheet" href="/validator/css/validationEngine.jquery.css" type="text/css"/>

    </script>
    <script src="/validator/js/languages/jquery.validationEngine-en.js" type="text/javascript" charset="utf-8">
    </script>
    <script src="/validator/js/jquery.validationEngine.js" type="text/javascript" charset="utf-8">
    </script>

</head>

<body>
<form id="regFormFirst" name="regFormFirst" method="post" action="">
  <table width="600" border="0" align="center" cellpadding="2" cellspacing="3">
    <tr style="background-color:#900; border-bottom:#333 2px solid; padding:10px;">
      <td colspan="2"><table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr>
          <td width="72%"><img src="/images/logo.png" width="120" style="padding:10px;" /></td>
          <td width="28%" align="center" style="color:#fff; font-size:14px; font-family:Arial, Helvetica, sans-serif;"><strong>Step 1 out of 3</strong> [<a href="#" onclick="$.fancybox.close();" style="color:#fff; font-size:14px; font-family:Arial, Helvetica, sans-serif ; font-weight:bold;">Close</a>]</td>
        </tr>
      </table></td>
    </tr>
    <tr>
      <td colspan="2"><h1>Sign up for free to comment on stories.</h1></td>
    </tr>
    <tr>
      <td colspan="2"><div id="regShr">
        <div class="d1">Connect to your Facebook or Twitter acount and we'll fill in your registration information below.</div>
        <div class="d2"><a href="javascript:void(0);" id="fbRegButton"><img src="http://img1-cdn.newser.com/images/connect_facebook.png" alt="Connect To Facebook to simplify the registration process" /></a></div>
        <div class="d2"><a id="TwitterButton" title="Connect To Twitter to simplify the registration process"><img src="http://img2-cdn.newser.com/images/connect_twitter.png" alt="Connect To Twitter to simplify the registration process" /></a></div>
        <div style="clear:both;"></div>
      </div></td>
    </tr>
    <tr>
      <td width="196">Username:</td>
      <td width="387"><input name="username" type="text" id="username" class="validate[required]"  tabindex="1" />
        <br />
        <em>Appears on all of your comments</em></td>
    </tr>
    <tr>
      <td>Email Address</td>
      <td><input name="email" type="text" id="email" tabindex="2" />
        <br />
        <em>Invisible to the public</em></td>
    </tr>
    <tr>
      <td>Password:</td>
      <td><input name="password" type="password" id="password" tabindex="3" /></td>
    </tr>
    <tr>
      <td>Confirm Password:</td>
      <td><input name="conpassword" type="password" id="conpassword" tabindex="4" /></td>
    </tr>
    <tr>
      <td>&nbsp;</td>
      <td>&nbsp;</td>
    </tr>
    <tr>
      <td colspan="2"><input id="agree" type="checkbox" name="agree" tabindex="5" />
        I  have read and agreed to the <a href="http://www.newser.com/terms.aspx">terms of use.</a></td>
    </tr>
    <tr>
      <td colspan="2">&nbsp;</td>
    </tr>
    <tr>
      <td><a id="continue"  class="button" tabindex="6" href="#"  onclick="jQuery('#regFormFirst').validationEngine('validate'); postClose();">CONTINUE</a></td>
      <td>Already have an account? <a href="javascript:void(0);" onclick="CloseRegister();OpenLogin(0);">Log in here.</a></td>
    </tr>
  </table>

</form>
</body> 
```

父页面具有功能`postClose();`。

```
function postClose () {
        dataString = $("#regFormFirst").serialize();
        $.ajax({
                    type: "POST",
                    url: "/includes/reguser.php",
                    data: dataString,
                    success: function(){

                    }
                    });
    $.fancybox.open({ href : '/register2.php', type: 'ajax'});

    } 
```

我只想验证当前页面...发布到数据库并通过fancybox打开下一页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T09:54:35.063

为什么你在重新加载时不使用这样的东西：

`$("#YourFancyBoxID").fancybox().trigger('click');`

代替

`$.fancybox.open({ href : '/register2.php', type: 'ajax'});`

# javascript - 传递由 ajax 调用产生的对象时出现“意外的标识符”

> ID：14060646
> 
> 赞同：2
> 
> 时间：2012-12-27T20:07:44.543
> 
> 标签：javascript, jquery

我正在使用与 select2 插件绑定的输入框滚动我自己的 typeahead 实现。用户将输入手动电子邮件地址，然后使用 onchange 事件针对电子邮件正则表达式进行验证，或者他们可以开始输入已绑定到其帐户的收件人的 DisplayName。该列表将通过对控制器的 ajax 调用获取，然后控制器调用服务并检索数据，然后通过动态创建的列表项。如果用户单击或点击显示的其中一个 DisplayName，则该收件人将被添加到所选收件人的列表中，并从那时起显示在 select2 中。

typeahead 和 ajax 调用工作正常，数据返回并正确显示；但是，我似乎无法将从初始 ajax 调用返回的对象作为参数传递给函数。如果我尝试传递原始值，我的`'unexpected identifier'`控制台调试器中会出现错误；如果我尝试传递`JSON.stringify(value)`，我`'unexpected token ;.'` 总是可以通过传递接收者的 ID 属性来回退（这工作正常，当我尝试传递我遇到困难的复杂对象时）并再次重建对象，但是它显然最好避免这种情况并避免进行另一个服务调用。提前致谢。

这是脚本：

```
 $(document).ready(function () {
            $("#selectedRecipientList").select2({ tags: null, tokenSeparators: [",", " "] });
            $('.select2-input').keyup(function (e) {                    
                var currentString = $('.select2-input').val();
                $.ajax({
                    dataType: 'json',
                    url: '@Url.Action("RecipientTypeAhead", "RecipientManager")',
                    data: { query: currentString },
                    success: (function (data) {
                        $('#TypeAheadRecipientsList').empty();
                        $(data).each(function (index, value) {
                            $('#TypeAheadRecipientsList').append('<li onclick="AddRecipientFromPicker(' + JSON.stringify(value) + ')">' + value.DisplayName + '</li>');
                        });
                    })
                });
            });
        });

function AddRecipientFromPicker(someData){} //only ever reaches here if int primitive is passed in 
```

下面是对象在 ajax 方法中返回后的外观示例： `{"AccountName":"abc","DisplayName":"abc","Email":"abc@test.net","Id":94654}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:11:15.513

你不能这样做：

```
$(data).each(function (index, value) {
    $('#TypeAheadRecipientsList').append('<li onclick="AddRecipientFromPicker(' + JSON.stringify(value) + ')">' + value.DisplayName + '</li>');
}); 
```

因为`data`不是 dom 元素。

尝试这样做：

```
for(var index in data) {
   var value = data[index];
   $('#TypeAheadRecipientsList').append('<li onclick="AddRecipientFromPicker(' + JSON.stringify(value) + ')">' + value.DisplayName + '</li>');
} 
```

**另外**请尽量不要使用内联事件处理程序。

***所以***把它们放在一起：

```
for(var index in data) {
   var value = data[index];
   var listItem = $('<li>' + value.DisplayName + '</li>');
   listItem.data('value', JSON.stringify(value)).on('click', function(){
       AddRecipientFromPicker($(this).data('value'));
   });
   $('#TypeAheadRecipientsList').append(listItem);
} 
```

# c - 使用 C 程序在文件中定位文本

> ID：14060647
> 
> 赞同：1
> 
> 时间：2012-12-27T20:08:00.317
> 
> 标签：c, file, file-io, position

我想在 Linux 中使用 C 程序将表写入文件。但我无法将它安排在另一个之下。有什么可以做的吗？提前致谢。

```
fprintf(fp_for_summary,"----------------------------------------\n");
fprintf(fp_for_summary,"| S.No | Filename\t | Complexity Index |\n");
fprintf(fp_for_summary,"----------------------------------------\n");

for(i=0;i<cnt;i++)
{
    fprintf(fp_for_summary,"| %d    | %s\t | %d |\n", i, filename, cmplxty);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:14:13.630

`fprintf(fp_for_summary,"| %6d | %32s\t | %6d |\n", i, filename, cmplxty);`

用正确的数字替换数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:13:58.817

您可以使用固定宽度：

```
int width1 = 3;
int width2 = 3;
int width3 = 3;

fprintf(fp_for_summary,"----------------------------------------\n");
fprintf(fp_for_summary,"| S.No | Filename\t | Complexity Index |\n");
fprintf(fp_for_summary,"----------------------------------------\n");
for(i=0; i<cnt; i++)
   fprintf(fp_for_summary,"| %*d | %*s\t | %*d |\n", width1, i, width2, filename, width3, cmplxty); 
```

# mysql - 创建视图（存在或在）

> ID：14060649
> 
> 赞同：0
> 
> 时间：2012-12-27T20:08:25.813
> 
> 标签：mysql

创建一个视图，其中包含在 Perryridge 分行拥有贷款和帐户的所有客户的姓名。

对此有什么想法吗？我很困惑是否使用存在或

* * *

这些表是：

```
customer (customer_name, customer_street, customer_city)
  depositor (customer_name, account_number)
    account (account_number, branch_name, balance)
  borrower (customer_name, loan_number)
    loan (loan_number, branch_name, amount) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:35:59.127

您可以在查询中使用 an`EXISTS`或`IN`谓词。要么会工作。

（“视图”本质上是一个查询。因此，首先，问题实际上是关于制定返回指定结果集的查询。一旦有了查询，只需将其包装在 CREATE VIEW 语句中即可。我会注意这里我们通常不会在 MySQL 数据库中使用视图。这是因为 MySQL 优化器的工作方式，它总是将视图查询具体化为派生表，这与其他 DBMS 中处理视图查询的方式不同。）

假设您有单独的表`customer`，`account`和/或`loan`，您可能需要`EXISTS`谓词、`IN`谓词或连接操作，或它们的某种组合。

例如，此查询（如下）使用谓词来测试表和表`EXISTS`中是否存在匹配行，并返回在 Perryridge 分行具有至少一个关联帐户和至少一个关联贷款的行。`account``loan``customer`

```
SELECT c.name
  FROM customer c
 WHERE EXISTS ( SELECT 1 
                  FROM account a
                 WHERE a.customer_id = c.id 
                   AND a.branch = 'Perryridge' 
              )
   AND EXISTS ( SELECT 1 
                  FROM loan l
                 WHERE l.customer_id = c.id
              ) 
```

* * *

此查询（如下）返回一个等效的结果集，但使用`IN`谓词在 account 和 loan 表中查找匹配的行：

```
SELECT c.name
  FROM customer c
 WHERE c.id IN ( SELECT a.customer_id
                   FROM account a
                  WHERE a.branch = 'Perryridge'
               )
   AND c.id IN ( SELECT l.customer_id
                  FROM loan l
               ) 
```

这个查询（如下）利用 JOIN 操作来查找匹配的行。JOIN 的行为与上面的查询不同，如果在 Perryridge 分行有多个帐户或多个贷款，它将返回客户行的多个副本。`GROUP BY`我们可以通过包含一个子句轻松消除这些重复项。

```
SELECT c.name
  FROM customer c
  JOIN account a
    ON a.customer_id = c.id
   AND a.branch = 'Perryridge'
  JOIN loan l
    ON l.customer_id = c.id
 GROUP BY c.id 
```

* * *

没有关于您的架构的任何信息，我在这里做了一些假设，即该列`id`是表的主键`customer`，并且 the`account`和`loan`表都有一个外键`customer_id`，`customer(id)`等等。

这些查询中的每一个都将表现出不同的性能特征。所有查询都可能受益于索引

```
... ON account (customer_id, branch)
... ON loan (customer_id)
... ON customer (id, name) 
```

这应该足以回答您的问题。

* * *

**更新：**

给予（比利）

```
branch(branch_name, branch_city, assets) 
customer(customer_name, customer_street, customer_city)
account(account_number, branch_name, balance)
loan(loan_number, branch_name, amount)
depositor(customer_name, account_number)
borrower(customer_name, loan_number) 
```

（这似乎更像是一个学术作业或测试问题，而不是由 IT 专业人员设计和实施的数据库。）

获取在 'Perryridge' 分店`depositor`拥有的客户名称 ( )：`account`

```
SELECT d.customer_name
  FROM depositor d
  JOIN account a
    ON a.account_number = d.account_number
 WHERE a.branch_name = 'Perryridge'
 GROUP BY d.customer_name 
```

获取在 'Perryridge' 分店`borrower`拥有的客户名称 ( )：`loan`

```
SELECT b.customer_name
  FROM borrower b
  JOIN loan l
    ON l.loan_number = b.loan_number
   AND l.branch_name = 'Perryridge'
 GROUP BY b.customer_name 
```

（如果我们需要表中的其他列`customer`，我们将向该表添加一个 JOIN：

```
SELECT c.customer_name
     , c.customer_street
     , c.customer_city
  FROM customer c
  JOIN borrower b
    ON b.customer_name = c.customer_name
  JOIN loan l
    ON l.loan_number = b.loan_number
   AND l.branch_name = 'Perryridge'
 GROUP
    BY c.customer_name
     , c.customer_street
     , c.customer_city 
```

获取在 'Perryridge' 分行同时拥有存款账户 ( `depositor`) 和贷款 ( ) 的客户姓名：`borrower`

```
SELECT c.customer_name
     , c.customer_street
     , c.customer_city
  FROM customer c
  JOIN borrower b
    ON b.customer_name = c.customer_name
  JOIN loan l
    ON l.loan_number = b.loan_number
   AND l.branch_name = 'Perryridge'
  JOIN depositor d
    ON d.customer_name = c.customer_name
  JOIN account a
    ON a.account_number = d.account_number
   AND a.branch_name = 'Perryridge'
 GROUP
    BY c.customer_name
     , c.customer_street
     , c.customer_city
 ORDER
    BY c.customer_name
     , c.customer_street
     , c.customer_city 
```

使用带有相关子查询的 EXISTS 谓词的查询可以返回几乎相同的结果集。（不同的是，当客户在 Perryridge 拥有多个账户或多个贷款时，上面的 JOIN 查询可以引入“重复”。那里的 GROUP BY 子句消除了重复。）

```
SELECT c.customer_name
     , c.customer_street
     , c.customer_city
  FROM customer c
 WHERE EXISTS 
       ( SELECT 1
           FROM borrower b
          WHERE b.customer_name = c.customer_name
            AND EXISTS
                ( SELECT 1
                    FROM loan l
                   WHERE l.loan_number = b.loan_number
                      AND l.branch_name = 'Perryridge'
                )
       )
   AND EXISTS
       ( SELECT 1
           FROM depositor d
          WHERE d.customer_name = c.customer_name
            AND EXISTS
                ( SELECT 1
                    FROM account a
                   WHERE a.account_number = d.account_number
                     AND a.branch_name = 'Perryridge'
                )
       )
 ORDER
    BY c.customer_name
     , c.customer_street
     , c.customer_city 
```

此查询不会引入任何重复项，因为它只返回`customer`表中的行。（此查询返回重复项的唯一方法是表中是否存在重复行`customer`。）如果表中没有重复行`customer`，则不需要 GROUP BY。

# phpunit - 你能把 phpunit “精确”和“at”调用结合起来吗？

> ID：14060662
> 
> 赞同：3
> 
> 时间：2012-12-27T20:09:31.320
> 
> 标签：phpunit

我有一个在测试中使用的模拟类，我正在寻找一种方法来同时确保一个方法被准确地调用两次并且每次调用都有不同的参数。我的代码是这样的：

```
$mocked->expects($this->at(0))->method('mockedMethod')->with($this->equalsTo(123);
$mocked->expects($this->at(1))->method('mockedMethod')->with($this->equalsTo(456); 
```

如果对 mockedMethod 进行第三次调用，无论参数如何，我都希望断言失败。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-21T19:23:55.403

我参加聚会迟到了，但希望这对正在寻找的人有所帮助。是的，您可以结合 at() 和 exact()。在您的示例中，它看起来类似于以下内容：

```
$mocked->expects($this->at(0))->method('mockedMethod')->with($this->equalsTo(123);
$mocked->expects($this->at(1))->method('mockedMethod')->with($this->equalsTo(456);
$mocked->expects($this->exactly(2))->method('mockedMethod'); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-29T00:41:14.930

```
<?php
require_once 'SomeClass.php';

class StubTest extends PHPUnit_Framework_TestCase
{
    public function testReturnArgumentStub()
    {
        // Create a stub for the SomeClass class.
        $stub = $this->getMock('SomeClass');

        // Configure the stub.
        $stub->expects($this->any())
             ->method('doSomething')
             ->will($this->returnArgument(0));

        // $stub->doSomething('foo') returns 'foo'
        $this->assertEquals('foo', $stub->doSomething('foo'));

        // $stub->doSomething('bar') returns 'bar'
        $this->assertEquals('bar', $stub->doSomething('bar'));
    }
}
?> 
```

# c# - 将文本框组合在一起，以便可以通过简单的循环更改它们的所有属性

> ID：14060666
> 
> 赞同：1
> 
> 时间：2012-12-27T20:09:55.307
> 
> 标签：c#, asp.net

我的 ASP.NET 页面上有 16 个文本框，我想将它们的文本值设置为等于我的字符串数组中的各种值。

在我的 .ASPX 文件中，我正在定义这样的文本框：

```
<asp:TextBox ID="textbox1" runat="server" /> 
```

这就是我目前在代码隐藏中工作的方式：

```
this.textbox1.Text = stringArray[0];
this.textbox2.Text = stringArray[1];
...
this.textbox16.Text = stringArray[15]; 
```

但我想做这样的事情：

```
int i = 0;
foreach (Textbox tb in GroupOfTextboxes)
{
 tb.Text = stringArray[i];
 i++;
} 
```

设置“GroupOfTextboxes”的最简单方法是什么？如果可能的话，我想查看代码示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T20:15:26.613

只需创建一个数组或`List`对象`Textbox`：

```
Textbox[] textBoxes = new []{textbox1, textbox2, textbox3, ...}; 
```

另一种可能更简单的填充数据结构的方法是将所有文本框放入某种`Panel`容器或其他容器中。然后你可以这样做：

```
TextBox[] textBoxes = myTextboxPanel.Controls.OfType<TextBox>().ToArray(); 
```

这可能是也可能不是一个可行的选择，但它更简单。它确实需要某种容器，所有文本框都可以放入其中，而没有任何其他文本框。

之后，您可以使用`for`循环进行复制：

```
for(int i = 0; i < textBoxes.Lenth; i++)
{
    textBoxes[i].Text = stringArray[i];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T20:14:08.507

将它们分组到 PlaceHolder 中，如下所示：

```
<asp:placeholder id="plcHldrTextBoxes" runat="server">
    your text boxes here
</asp> 
```

现在在 C# 中，遍历 plcHldrTextBoxes 中的控件：

```
int i=0;
foreach (var textBox in plcHldrTextBoxes.Controls)
{
   //dangerous if the cast fails but you get the idea
   (textBox as TextBox).Text = stringArray[i];
   i++; 
} 
```

**在 2 行中使用 Linq（并且比上面更安全）：**

```
int i = 0;
place.Controls.OfType<TextBox>().AsParallel().ForAll(x => x.Text = stringArray[i++]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T20:26:37.913

尝试以“myTarget_”开头的所有 textbox.id 命名，然后再命名。然后使用 LINQ 查找文本框列表：

```
(From voTB As WebControl In Form.Controls Where left(voTB.ID,9) = "myTarget_" Select voTB) 
```

然后你可以做循环的事情：

```
int i = 0;
foreach (Textbox tb in (From voTB As WebControl In
Form.Controls Where left(voTB.ID,9) = "myTarget_" Select voTB)) { 
tb.Text = stringArray[i];  i++; } 
```

您可能需要稍微调整一下代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T20:15:17.643

占位符/面板/div 似乎是一个合适的选择。然后，您可以要求占位符的所有子代。

另一种选择是给他们所有有意义和连续的名字..比如说：stringArrayTextbox1 .. stringArrayTextboxN

然后使用 FindControlByID 来获得您的控制权。

我最喜欢 FindControlByID 方法——这意味着容器控件中文本框的顺序不必与数组的顺序相匹配。

# powershell - Powershell Copy-Item 在用户\文档上失败，访问被拒绝

> ID：14060668
> 
> 赞同：1
> 
> 时间：2012-12-27T20:10:13.840
> 
> 标签：powershell, windows-8

我有一个简单的备份脚本，可以将 Documents 文件夹复制到外部硬盘：

```
Copy-Item C:\Users\Username\Documents G:\Backup -Recurse -Force 
```

但是，当我运行该命令时，Windows 8 为文件夹`'...\Documents\My Music'`、`'...\Documents\My Pictures'`和`'...\Documents\My Videos'`. 但是，这些文件夹只是符号链接，我认为这是导致错误的原因。如何避免复制符号链接？

**编辑：**即使使用硬编码的排除列表也不起作用。完整脚本如下：

```
$backupFolder = (get-date -uformat %Y%m%d)
$lines = Get-Content backup.cfg

$DirLinks = "C:\Users\Me\Documents\My Videos", "C:\Users\Me\Documents\My Music","C:\Users\Me\Documents\My Pictures"
$basePath = $lines[0] + $backupFolder + "\"
for ($i = 1; $i -lt $lines.Length; $i++)
{
    $lines[$i]
    Copy-Item $lines[$i] ($basePath + ($lines[$i].Replace(":", ""))) -Recurse -Force -Exclude $DirLinks
}

"Done!" 
```

我仍然收到以下错误：

```
 Copy-Item : Access to the path 'C:\Users\Me\Documents\My Music' is denied.
At C:\Users\Me\Desktop\backup app\backup.ps1:20 char:5
+     Copy-Item $lines[$i] ($basePath + ($lines[$i].Replace(":", ""))) -Recurse -F ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : PermissionDenied: (My Music:DirectoryInfo) [Copy-Item], UnauthorizedAccessException
    + FullyQualifiedErrorId : CopyDirectoryInfoItemUnauthorizedAccessError,Microsoft.PowerShell.Commands.CopyItemCommand

Copy-Item : Access to the path 'C:\Users\Me\Documents\My Pictures' is denied.
At C:\Users\Me\Desktop\backup app\backup.ps1:20 char:5
+     Copy-Item $lines[$i] ($basePath + ($lines[$i].Replace(":", ""))) -Recurse -F ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : PermissionDenied: (My Pictures:DirectoryInfo) [Copy-Item], UnauthorizedAccessException
    + FullyQualifiedErrorId : CopyDirectoryInfoItemUnauthorizedAccessError,Microsoft.PowerShell.Commands.CopyItemCommand

Copy-Item : Access to the path 'C:\Users\Me\Documents\My Videos' is denied.
At C:\Users\Me\Desktop\backup app\backup.ps1:20 char:5
+     Copy-Item $lines[$i] ($basePath + ($lines[$i].Replace(":", ""))) -Recurse -F ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : PermissionDenied: (My Videos:DirectoryInfo) [Copy-Item], UnauthorizedAccessException
    + FullyQualifiedErrorId : CopyDirectoryInfoItemUnauthorizedAccessError,Microsoft.PowerShell.Commands.CopyItemCommand 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:29:22.820

不幸的是，没有简单的方法可以避免符号链接。

首先，您需要找到它们：

```
$DirLinks = Get-ChildItem C:\SomeDir -Recurse | ? { $_.Attributes -like "*ReparsePoint*" } | % { $_.FullName } 
```

然后排除它们：

```
Copy-Item C:\SomeDir D:\Backup -Recurse -Force -Exclude $DirLinks 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:25:49.547

您是否以管理员身份运行脚本？另外我假设运行脚本的用户也是适合用户名区域的同一用户？

# arrays - 声明一个交错数组，由一维数组和二维数组组成？

> ID：14060671
> 
> 赞同：1
> 
> 时间：2012-12-27T20:10:35.403
> 
> 标签：arrays, c#-4.0, multidimensional-array, jagged-arrays

我们可以声明一个锯齿状数组，其中一些是一维的，一些是二维或多维数组。有什么建议。

```
int[][,] jaggedArray1 = new int[3][,] 
{
    new int[,],
    new int[,],
    new int[,] 
};

int[][]  = new int[3][]
{
    new int[],
    new int[],
    new int[]
}; 
```

**我们可以把这两者做成一个数组吗？**

> 例子

我在这里给出数独最合适的例子。:)

假设我们有一个二维字符串数组（比如网格），分为子网格。我正在显示一些数据。

4x4 网格。分为4个子网格。每个元素都是一个包含在“”中的字符串

```
"1,3,", "2,3"        "1,3,", "2,3"
"1,4,", "4,1"        "1,3,", "2,3"

"1,3,", "2,3"        "1,3,", "2,3"
"1,4,", "4,1"        "1,3,", "2,3" 
```

如果从第 1 行、第 1 列和第 1 个区域中删除“1”。我们如何跟踪或维护已更改的行、已更改的列以及已更改的每个字符串值的 LOG。

以最低的空间复杂度给出建议。

由于我们无法制作另一个重复的二维数组，因为将会浪费大量空间。

在我看来，我需要 3 个数组。

一维数组将记录更改的行 一维数组将记录 COLS 更改 二维数组将记录 CELL VALUE CHANGED

如果我们将所有这三个数组转换为一个。工作会轻松很多。

我希望我解释了这个场景。当我尽力而为时：D。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:49:04.400

> 不; 那是不可能的。

当然有可能。您只是忘记在初始化程序中确定数组大小，您不能永远推迟它。任意偏爱数字 3，这将编译得很好：

```
int[][,] partiallyJaggedArray = new int[3][,] {
    new int[3, 3],
    new int[3, 3],
    new int[3, 3] 
};

int[][] reallyJaggedArray = new int[3][] {
    new int[3],
    new int[3],
    new int[3]
}; 
```

但是它们都不是数独网格的特别好的模型。选择正确的模型是战斗的 50%，一定要选择一个好的。

# optimization - 为什么遗传算法在 MATLAB 优化工具箱中对具有相同参数的一个目标函数的优化给出不同的结果？

> ID：14060672
> 
> 赞同：1
> 
> 时间：2012-12-27T20:10:38.227
> 
> 标签：optimization, genetic-algorithm, genetic-programming

嗨，我正在使用 matlab 中的优化工具箱来解决最小化问题。当我运行求解器时，它会针对具有相同参数的一个问题给出不同的结果。那么如何判断哪一个是最佳答案呢？我需要做的是让求解器为每次运行具有相同参数的运行提供一个结果。非常感谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T20:33:48.153

遗传算法使用**随机**抽样方法来创建几代**随机**候选解决方案。对于许多类型的问题，遗传算法可能会“卡”在局部最优值上，如果其他局部最优值（或全局最优值）距离太“远”，交叉和变异等操作可能无法提供足够的变化来“*解开*” ”。如果您始终使用相同的参数获得不同的解决方案，那么您会遇到一条有价值的信息：（a）您的参数使您的人口过于同质（缺乏变化），阻止他们偏离局部最优，或者（ b）您的问题不适合遗传算法。

尝试将您的突变率提高到极端，将算法运行更多代，而不是查看最终种群（因为它的构成会因高突变率而变化无常），而是通过领先来查看“活”的总生命周期候选人。

但是，您的问题一开始就有点令人费解。你问，“哪一个是最好的答案？” 好吧，你一定已经为一代又一代地“杀死”最不适合的候选人定义了一个**适合度标准，不是吗？**只需计算每个答案的适合度，看看哪个被认为更“适合”。如果两个（或所有）答案都同样合适，那么您的问题可能没有单一的解决方案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T16:50:05.640

我想我得到了我的问题的一些解决方案..每次运行的答案不同是因为随机数生成器..我们可以通过控制这个随机数生成器来获得相同的结果

# iphone - 将不推荐使用的标头从 facebook SDK 添加到项目中的问题

> ID：14060674
> 
> 赞同：0
> 
> 时间：2012-12-27T20:10:40.517
> 
> 标签：iphone, objective-c, ios, facebook, ipad

我正在关注[本教程](http://developers.facebook.com/docs/tutorials/ios-sdk-games/authenticate/)，以便可以添加 FB 请求对话框。它要求我将不推荐使用的标头添加到项目中，所以我这样做了。我想问题是有重复的文件名，如下图所示：

![在此处输入图像描述](../Images/7e666af2e06b54ecf8a4246396eb1622.png)

结果我收到以下错误：

![在此处输入图像描述](../Images/cc38d5c44c7787031bf40a79f9cfe28d.png)

那么关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:43:32.187

事实证明，您所要做的就是到处使用#import Facebook.h"。我仍然有一个使用 FacebookSDK/FacebookSDK 的文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:12:34.387

您不能将它们包含两次。您应该删除已添加到项目中的头文件（文件夹中的那些**DeprecatedHeaders**），只将那些留在框架中。如果同时添加它们，编译器将为每个类找到 2 个接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T20:15:53.077

确保您的框架搜索路径中的 FacebookSDK 路径不是递归的。 ![在此处输入图像描述](../Images/5c0640f82db719ff5461ce7a8f94b908.png)

# c++ - 优化 c++/gcc 中的模板编译时间

> ID：14060677
> 
> 赞同：17
> 
> 时间：2012-12-27T20:10:44.750
> 
> 标签：c++, linux, templates, gcc, g++

在一个大型项目中，我们有很多类（数千个），并且使用 typedef 为每个类定义一个特殊的智能指针类型。这种智能指针类型是一个模板类。当我使用“gcc -Q”编译时，我发现为每个类编译这些智能指针需要花费大量时间。也就是说`smartptr<class1>::methods, then smartptr<class2>::methods... smartptr<class2000>::methods`，当 gcc 处理它们时，我看到屏幕上滚动。

有没有加快这个过程的技巧？从 smartptr 的角度来看，这些类都是相同的，没有 enable_if 技巧等。

我现在正在尝试什么：

*   也许用很少的常用方法制作一个非模板基类
*   使用 extern 模板类来减少链接符号（和实例化时间？还不确定）

但以上所有都不是一个完整的解决方案。我想知道是否有另一种优化编译时间的方法，一个让 gcc 知道的技巧，例如，如果它解析 smartptr 一次，它可以在看到其他专业时一遍又一遍地应用相同的知识，因为生成代码是相同的。

是的，我当然知道这并不*完全相同*……但这只是一个疯狂的想法。

或者也许还有其他我不知道的技巧可以加快编译速度。（只是为了说明我在说什么，我们可以通过消除其静态成员数据实例化来优化另一个模板，这大大减少了编译时间。这一点都不明显。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T08:58:04.883

不是特别是 GCC，但我认为`smartptr`从非模板基类派生的想法听起来不错。智能指针是这种方法的一个很好的候选者，因为重复生成的大部分代码并不关心指针不是`void*`. （我会尽可能多地转移代码，以便类模板只`void*`在必要时进行转换。）

此外，如果您有数千个严重依赖`smartptr`. 只有当它失败时，我才会继续使用`smartptr`'s 客户端代码（此时，避免一般标题膨胀的技术变得值得考虑）。

至于[extern 模板声明](http://en.wikipedia.org/wiki/C%2B%2B11#Extern_template)，我没有这方面的经验，但听起来你需要为`extern`每个`typedef`. 值得注意的是，强制完全实例化的相反效果是这样执行的：

```
template class smartptr<MyClass>; 
```

我会仔细检查这条线是否不伴随您的任何`typedef`s！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T16:18:23.693

## 预编译头文件

如果您的代码更改不在标头中，这实际上可能有助于减少编译时间。 [(源)](http://en.wikipedia.org/wiki/Precompiled_header)

# javascript - 将 onClick 更改为随机

> ID：14060683
> 
> 赞同：1
> 
> 时间：2012-12-27T20:11:24.760
> 
> 标签：javascript

我希望让处理程序 OnClick 成为随机实例，而不是需要用户交互。

```
// add the canvas in
  document.body.appendChild(mainCanvas);
  document.addEventListener('mouseup', createFirework, true);
  document.addEventListener('touchend', createFirework, true);

// and now we set off
    update();
  }

  /**
   * Pass through function to create a
   * new firework on touch / click
   */
  function createFirework() {
        createParticle();
  } 
```

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:34:20.273

只需从 Jonathan 扩展一个好的解决方案：您不需要创建 eventListeners 递归 randFunc() 会随机调用，直到您退出浏览器。

我猜你需要实现一种方法来停止该功能。这是一种解决方案：

```
 var stopFW = false;
        function randFunc () {
             // stop execution           
            if (stopFW) return;
            console.log("Called myself..." + new Date());
            // And then instruct this function to be called between 0 and 10 seconds
            setTimeout(randFunc, Math.ceil(Math.random() * 10) * 1000);
        }

        function stopFireWork() {
            stopFW = !(stopFW);
            console.log(stopFW);
        }

<body onload="randFunc()">    
    <button onclick="stopFireWork()">Stop Firework</button>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:24:44.930

调用函数本身并不太难：

```
// This function executes itself the first time immediately
(function randFunc () {
    // We output some information to the console
    console.log("Called myself..." + new Date());
    // And then instruct this function to be called between 0 and 10 seconds
    setTimeout(randFunc, Math.random() * 10 * 1000);
}());​​ 
```

演示：http: [//jsfiddle.net/8tZEu/2/](http://jsfiddle.net/8tZEu/2/)

# ruby-on-rails-3 - 将块变成作用域

> ID：14060686
> 
> 赞同：1
> 
> 时间：2012-12-27T20:11:32.143
> 
> 标签：ruby-on-rails-3, activerecord, scope, associations

我在视图中有一个块：

```
<% current_user.friends.each do |friend| %>
  <% friend.courses.each do |course| %>
    <%= course.course_name%>
  <% end %>
<% end %> 
```

我正在阅读 Rails 指南和[API](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html)，因为在我看来，这是我可以通过范围带入模型的东西。我有两个问题：

1.  这是我可以通过范围带入模型的那种东西吗？
2.  我该怎么做呢？

关系如下：

```
class User
  has_many :friends, through: friendships
  has_many :friendships, conditions: "status = 'accepted'"
  has_many :courses

class Course
  belongs_to :user 
```

我尝试了几种不同的范围变化，特别是在课程模型中。我最近尝试的一个是：

```
scope :friend_courses, joins(:user => :friends) 
```

但这并没有返回属于用户朋友的课程。

我在块中的代码有效，所以如果我必须使用它，我会的。但似乎有一种方法可以让用户在这里急切加载......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T00:03:51.127

```
class User < ActiveRecord::Base
  has_many :friend_courses, :through => :friends, :source => :courses
  has_many :friends, :through => :friendships
  has_many :friendships, :conditions => {:status => 'accepted'}
  has_many :courses
end

user.friend_courses 
```

# android - 动画 imageButton 调整大小以适应屏幕

> ID：14060692
> 
> 赞同：0
> 
> 时间：2012-12-27T20:12:05.640
> 
> 标签：android, imagebutton

我想要一个 imagebutton 中心屏幕，可以使用某种动画打开开始“增长”以平滑地填充整个屏幕。达到完整尺寸后，反转动画并恢复到原始尺寸？

有任何想法吗？这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:24:29.673

这是一个示例，可帮助您开始使用此布局为动画创建 xml 文件 res/anim/animate.xml

```
 <?xml version="1.0" encoding="utf-8"?>
        <set xmlns:android="http://schemas.android.com/apk/res/android" 
        android:shareInterpolator="false">
   <scale
    android:interpolator="@android:anim/accelerate_decelerate_interpolator"
    android:fromXScale="1.0"
    android:toXScale="2.0"
    android:fromYScale="1.0"
    android:toYScale="2.0"
    android:repeatMode="reverse"
    android:duration="700" />
    </set> 
```

并在您启动动画的方法中使用它

```
 Animation scaleAnim = AnimationUtils.loadAnimation(this, R.anim.animate);
view.startAnimation( scaleAnim ); 
```

在此处了解有关动画的更多[信息](http://developer.android.com/guide/topics/resources/animation-resource.html)

# jquery - 如果警报不提交表格

> ID：14060699
> 
> 赞同：0
> 
> 时间：2012-12-27T20:12:36.373
> 
> 标签：jquery

我有两个文本字段和一个 jquery 代码，当第二个文本字段的值大于第一个文本字段的值时，他会向我发出警报。我找到了代码并且效果很好，但是我需要将这些控件转移到一个超链接，如果第二个文本字段的值较小，则提交以继续。如果不是，那么我想得到警报并且公式无法提交继续

```
$('#Sel2').change(function(){
    var inputGUVal = Number ($('#Sel2').val());
    var inputGULimit = Number ($('#Sel1').val());
    if (inputGUVal > inputGULimit){
        alert ('Choose a number below a ' + inputGULimit )
    }
})​ 
```

请参阅[jsfiddle 上的实际代码](http://jsfiddle.net/ExaVH/20/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:16:59.060

根据条件阻止提交：

```
$("a").on('click', function (e) {
   if ($("#Sel2").val() > $("#Sel1").val()) {
      e.preventDefault();   
   }
}); 
```

[http://jsfiddle.net/ExaVH/21/](http://jsfiddle.net/ExaVH/21/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:21:36.540

只需添加一些触发验证功能的 onClick 事件，如果它通过，则继续提交。像这样：

```
$('#myLinkId').click(function(){
var inputGUVal = Number ($('#Sel2').val());
    var inputGULimit = Number ($('#Sel1').val());
    if (inputGUVal > inputGULimit){
        alert ('Choose a number below a ' + inputGULimit )
    } else {
    //Your Submission Code here.
})​ 
```

就像我说的，我会用 onClick 事件替换 click 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T20:16:49.167

您可以根据验证显示或隐藏提交按钮...

```
$('#Sel2').change(function(){
    var inputGUVal = Number ($('#Sel2').val());
    var inputGULimit = Number ($('#Sel1').val());
    if (inputGUVal > inputGULimit){
        alert ('Choose a number below a ' + inputGULimit );
        $("#button").hide();
    } else {
        $("#button").show();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T20:19:18.043

你可以使用事件的`preventDefault`方法。有关更多信息，请参阅[此处](http://api.jquery.com/event.preventDefault/)。

# ruby - Heroku Toolbelt - Ruby.exe：没有这样的文件或目录

> ID：14060701
> 
> 赞同：1
> 
> 时间：2012-12-27T20:12:56.750
> 
> 标签：ruby, command-prompt, heroku-toolbelt

5、6 个月前，我不得不在几个星期内发布 Heroku 下的应用程序。因此，我下载并安装了 Heroku Toolbelt 并发布了我的应用程序：我没有遇到任何问题。

今天早上，我再次开始做这个应用程序，当我想使用命令登录 Heroku 时`heroku login`，我遇到了以下错误：`C:\Program Files (x86)\ruby-1.9.2\bin\ruby.exe: No such file or directory -- heroku (LoadError)`.

首先，我重新安装了 Heroku Toolbelt，但我仍然遇到同样的问题，然后我从 Github 下载了压缩的 Heroku Toolbelt，但没有成功。所以，我开始在谷歌上寻找解决这个问题的方法。

我将 ruby​​-1.9.2 放入 C:\Program Files (x86)\Heroku\bin\ 并更改了 heroku.bat 文件中的 Ruby 路径。我利用它在 heroku.bat 中放置了一些“暂停”，以了解正在发生的事情，但没有发现任何异常。简而言之，我早上（法国时间）工作了 10 点，但一无所获。

这就是为什么我来到 Stackoverflow（对我来说最好的论坛之一）上问这个问题的原因。我希望有人理解我并可以帮助我。非常感谢你，对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:20:03.333

我认为您遇到的问题是您将 Ruby 的安装从顶级**`C:\`**目录移到了系统无法找到的不常见位置。在 Windows 上安装 Ruby 时，建议将其放在始终可以访问的位置，无论您是否具有管理权限，并且位于名称中没有任何空格或特殊字符的文件夹中。正确安装 Ruby 后，它会**`Ruby193`**在我的顶级目录中创建一个文件夹：**`C:\Ruby193`**. 此外，您的系统**`Paths`**通过修改**`Windows Environment Variables`**并将其添加到您的路径中：**`C:\Ruby193\bin;`**. 这允许您运行**`ruby`**后跟从任何位置通过系统上的命令行执行的任何命令。剩下要做的就是安装 heroku-toolbelt，一切都应该运行顺利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-09T15:26:25.883

为了详细说明@KareyPowell 的答案，对我来说这个问题是由更新 Ruby 引起的，并通过更新 heroku 脚本（位于`C:\Program Files (x86)\Heroku\bin\heroku`）中的一行以指向我的 Ruby 更新版本来修复。

我将其更改为：

```
bindir=`cd -P "${0%/*}/../ruby-1.9.2/bin" 2>/dev/null; pwd` 
```

到：

```
bindir=`cd -P "/c/Ruby193/bin" 2>/dev/null; pwd` 
```

我应该说我并不完全清楚该`${0%/*}`位的作用（如果有人可以告诉我，我很想知道），所以我的更改可能会带来问题，但它似乎确实有效。

# pyqt4 - 如何根据信号更改pyqt中重叠小部件的可见性

> ID：14060703
> 
> 赞同：5
> 
> 时间：2012-12-27T20:13:06.920
> 
> 标签：pyqt4, qwidget

我有多个相同大小的 TextBrowser 框重叠，我需要在不同的按钮单击时显示不同的 TextBrowser。有没有办法可以改变 TextBrowser 在不同按钮点击时的可见性？请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T21:13:58.713

我不确定我是否正确理解了您的问题，但以下示例有帮助吗？

```
#!/usr/bin/python
#-*- coding:utf-8 -*-

import sys
from PyQt4.QtCore import *
from PyQt4.QtGui import *

class changeVisibility(QWidget):    
    def __init__(self, parent=None):        
        super(changeVisibility, self).__init__(parent)

        self.textbrowserA = QTextBrowser()
        self.textbrowserA.setStyleSheet("background-color:red")

        self.textbrowserB = QTextBrowser()
        self.textbrowserB.setStyleSheet("background-color:blue")

        self.buttonA = QPushButton("Show A")
        self.buttonB = QPushButton("Show B")

        self.verticalLayout = QVBoxLayout(self)

        self.buttonA = QPushButton("Show A")

        self.verticalLayout.addWidget(self.textbrowserA)
        self.textbrowserA.show()
        self.verticalLayout.addWidget(self.textbrowserB)
        self.textbrowserB.hide()

        self.verticalLayout.addWidget(self.buttonA)
        self.verticalLayout.addWidget(self.buttonB)

        self.buttonA.clicked.connect(self.showA)
        self.buttonB.clicked.connect(self.showB)

    def showA(self):
        self.textbrowserB.hide()
        self.textbrowserA.show()

    def showB(self):
        self.textbrowserA.hide()
        self.textbrowserB.show()

def main():
    app = QApplication(sys.argv)
    cV = changeVisibility()
    cV.show()
    app.exec_()

if __name__ == '__main__':
    main() 
```

# php - PHP Rand在mysql插入上复制

> ID：14060704
> 
> 赞同：-3
> 
> 时间：2012-12-27T20:13:10.690
> 
> 标签：php

我试图在我的表中插入记录，并且每个记录都有一个唯一的 ID。

为此，我正在使用 rand() 函数...

```
<input type="hidden" name="randkey" value="<?php echo rand(0000000000,9999999999);?>" /> 
```

我唯一的问题是每次插入我的随机键/值似乎是一样的？肯定在每个页面刷新时这个值应该改变吗？谁能解释为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T20:16:21.553

> 我试图在我的表中插入记录，并且每个记录都有一个唯一的 ID。

好吧，您必须将此 id 设置为`PRIMARY KEY auto_increment`并且显然避免像您当前的那样愚蠢的方式。

# .net - 使用 vbscript 调用 .NET getter 和 setter 属性返回对象

> ID：14060705
> 
> 赞同：1
> 
> 时间：2012-12-27T20:13:11.023
> 
> 标签：.net, com, vbscript

我有一个 C# 程序集，它有方法和 getter/setter。我可以从 vb6 调用可组合 C# 程序集中的方法，但是 getter/setter 失败并出现错误 - '对象不支持此属性或方法'

例如，我在 .net 程序集中的类是这样的：

```
public class Test{
 SubMain _subMain;
    public Test()
    {
        _subMain = new SubMain();
    }

 public string Dump(){ return "test"; }

 public SubMain SubMain
    {
        get
        {
            return _subMain;
        }
    }

public class SubMain
{
    public SubMain()
    {
    }

    public string Dump()
    {
        return "SubMain";
    }
}

---- 
vbscript:

Set obj = CreateObject("SampleCSForCOM.Main")
str = obj.Dump()
wscript.echo "method string="+str
wscript.echo "property string="+obj.SubMain.Dump()

----
Error in vbscript:
C:\test>cscript test.vbs
Microsoft (R) Windows Script Host Version 5.8
Copyright (C) Microsoft Corporation. All rights reserved.

method string=Main
C:\test\test.vbs(4, 1) Microsoft VBScript runtime error: Object doesn't support
this property or method: 'obj.SubMain' 
```

问题：如果我使用返回字符串的属性，它在 vbscript 中运行良好。但是，如果我使用返回另一个对象的属性，它就会失败。

# asp.net - MVC 3 控制器的独立 DLL

> ID：14060708
> 
> 赞同：2
> 
> 时间：2012-12-27T20:13:32.233
> 
> 标签：asp.net, asp.net-mvc-3, dll, controller

当我发布我的 MVC 3 Razor 项目时，它会为我的整个项目创建一个 DLL 文件。我需要为我拥有的每个控制器提供单独的 DLL。因此，每当我想更改任何控制器代码时，我只会部署那个 DLL。

# android - 沿RelativeLayout底部对齐未知高度图像

> ID：14060713
> 
> 赞同：3
> 
> 时间：2012-12-27T20:14:00.673
> 
> 标签：android, image, layout

我需要一个屏幕，屏幕底部有一个图像。图像本身是固定的（来自资源）。它非常大，并且按比例缩小到每个设备的宽度。我尝试使用 simple `layout_alignParentBottom`，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LayoutLoading"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/startup" >

    <ImageView
        android:id="@+id/ImageView01"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:scaleType="fitCenter"
        android:src="@drawable/loading" />

</RelativeLayout> 
```

是的，这没有用。除非我指定图像的确切高度（代替`wrap_content`），`ImageView`否则底部不会对齐。这很可能是由于实际图像高于屏幕尺寸并且只有在缩小到屏幕宽度后才变得“更短”。

所以，问题是我如何让`ImageView`屏幕保持在屏幕底部，而不管设备的大小如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T20:40:44.767

在 xml 中添加到您的 imageview`android:adjustViewBounds="true"`

# etl - 在 Informatica 存储过程调用中使用映射参数

> ID：14060716
> 
> 赞同：1
> 
> 时间：2012-12-27T20:14:09.137
> 
> 标签：etl, informatica-powercenter, informatica

我在 Informatica 映射中使用存储过程作为源，并且在源限定符中将 SQL 查询定义为

```
exec dbo.GET_ATTRIBUTES($$fromDate, $$toDate) 
```

where`$$fromDate`和`$$toDate`are 我在参数文件中定义的映射参数。我已经尝试了许多不同的方法来解决这个问题，但似乎都没有奏效，因为 SQL 查询无法验证。

所以，我的问题归结为这个，有没有办法在传入两个映射参数的同时调用存储过程？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T13:42:10.147

我实际上弄清楚了我的问题是什么。事实证明，当我定义映射参数时，我已将`IsExprVar`字段设置为`TRUE`. 当我将其设置为时，`FALSE`我能够在源限定符的 SQL 查询字段中调用存储过程时将参数传递给存储过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-02T15:38:13.883

我遇到了完全相反的问题。

从映射执行 t-sql 存储过程时，它接受 hh:mi:ss 中的时间，使用 IsExprVar 设置为 FALSE 的参数，失败并出现错误“[Informatica][ODBC SQL Server Wire Protocol driver][Microsoft SQL服务器]从字符串转换日期和/或时间时转换失败。]"

将相同的参数IsExprVar更改为TRUE后，从映射执行t-sql存储过程成功完成。

# dbus - 在 64 位 Windows 上编译 DBus

> ID：14060720
> 
> 赞同：0
> 
> 时间：2012-12-27T20:14:21.450
> 
> 标签：dbus, mingw-w64

好吧，在愚蠢的 Windows 平台上编译 Qt5 对我来说将是一场真正的噩梦。在第一步中，经过数小时的搜索，我遇到了一个非常奇怪的错误，我发现这是因为 .gitignore ！为什么在源代码发布 tarball 中应该有一个忽略模式文件？win7拒绝创建一个没有名字的文件，所以我用msys的nano来制作它...

成功配置 Qt5 后，我安装了需求（OpenSSL、ICU 等）

然后我发现没有办法在 64 位窗口上运行 DBus。我尝试编译各种来源：[DBus4Win](http://repo.or.cz/w/dbus4win.git)、[WinDBus](http://sourceforge.net/projects/windbus)、[KDE4Win](http://sourceforge.net/projects/kde-windows/)和来自 freedesktop.org 的原始 tarball。他们甚至都不会配置。配置脚本说没有找到 expat.h。我已经在 MSYS/mingw 中编译并安装了 expat。还尝试了 KDE4Win 项目的[预编译库。](http://sourceforge.net/projects/kde-windows/files/dbus/1.4.16/)它们很好，但没有调试 dll （编译以 -ldbus-1d 未找到的 ld.exe 错误终止）。[发布了一个用于调试](http://sourceforge.net/projects/kde-windows/files/dbus/1.4.16/dbus-x86-mingw4-1.4.16-dbg.tar.bz2/download)版本的 tarball，但它包含清单。

您是否曾经在 64 位 Windows 上成功编译带有 DBus 支持的 Qt？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T10:07:20.987

设法使用 MSVC 2008 x64 编译版本 1.6.8。还没有测试它，所以它可能会工作，它可能不会，它可能会崩溃。

从这里下载 - [http://rapidshare.com/files/2617500591/dbus-1.6.8-win64-TEST.zip](http://rapidshare.com/files/2617500591/dbus-1.6.8-win64-TEST.zip)

# android - 为什么opengl不使用glTexImage绘制绿色？

> ID：14060725
> 
> 赞同：-1
> 
> 时间：2012-12-27T20:15:03.023
> 
> 标签：android, opengl-es, opengl-es-2.0

我相信我拥有制作简单绿色绘图的所有组件，显然我错了。也许有人可以阐明我所缺少的东西？

```
@Override
public synchronized void onDrawFrame(GL10 unused) {
    Bitmap b = Bitmap.createBitmap(512, 512, Bitmap.Config.RGB_565); 
    b.eraseColor(Color.GREEN);
    GLES20.glEnable(GLES20.GL_TEXTURE_2D);
    GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, b, 0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:45:38.567

glTexImage2D 不绘制任何东西。它只是将图像复制到纹理中。您仍然必须绘制一些几何图形（四边形左右），这些几何图形正在使用所述图像进行纹理化。

glTexImage 也需要一个绑定的纹理对象才能使用。这意味着您首先必须使用`glGenTextures`来获取新的纹理 ID，然后`glBindTexture`才能绑定/创建它。

我还应该指出，如果图像保持不变，则不应在每次绘制帧时重新上传它。

**但最重要的**是，如果你只想画一些绿色四边形，为什么不画一个绿色四边形呢？你不需要纹理。

# http - 当我在 Jenkins 上运行 Scala 测试而不是 204 时，为什么会得到 302 HTTP 状态代码？

> ID：14060728
> 
> 赞同：4
> 
> 时间：2012-12-27T20:15:19.717
> 
> 标签：http, scala, testing, jenkins, http-status-code-302

我对我用 Scala 编写的 REST API 服务进行了一些测试。我们正在导入`org.apache.http`并使用简单的 HTTP 方法，例如：

```
val uri: HttpGet = new HttpGet(u)
val response: HttpResponse = http.execute(uri) 
```

他们转到 URL，例如：

`https://platform.company.com:443/ajax_request/login?username=me@company.com&password=pass`

或者

`https://admin-platform.company.com:443/usergroups/rest/usergroups`

测试使用 Maven 编译并在 Jenkins 版本上运行。1.494 服务器。

问题是，虽然测试在本地完美运行（当我`mvn clean test`在笔记本电脑上运行时），但它们在 CI 服务器上得到了意外的状态代码。对于这些测试，我在本地得到 204、200、200 和 200。但在 CI 上，我得到 302、302、302、200。

我需要 Jenkins 中的特殊配置选项吗？还是更好的身份验证方法？

我能够在 CI 服务器本身上成功运行 cURL 命令，所以我认为这不是基本的网络连接问题，例如：

```
Running script  : #!/bin/bash

# get an auth session
curl -v -b cookies.txt -c cookies.txt -L "https://platform.company.com/ajax_request/login?
username=user&password=pass"

# get a list of company guids
curl -v -b cookies.txt -c cookies.txt -L
"https://platform.company.com/ajax_request/companies_selector"

# run this to make a call to service for company: 
curl -v -b cookies.txt -c cookies.txt --cookie "company_guid=3f65b34d-b6f4-4abd-b14b-408b8a11059b"
-L "https://service-platform.company.com/users" 
```

想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T19:37:01.510

这可能是答案。我们在登录/身份验证中执行 HttpPost：

[https://stackoverflow.com/a/5170468/1759990](https://stackoverflow.com/a/5170468/1759990)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-28T09:31:31.800

从您的描述中并不完全清楚，但问题似乎是在某些情况下会自动遵循 3xx 重定向，而在其他情况下则不会。

例如，当您使用 'curl' 时，您包含 -L 选项，以便自动遵循 3xx 重定向，这是您想要发生的。

因此，在您的 Java 代码中，很可能您的笔记本电脑也遵循重定向，而您的 CI 构建服务器则没有，因为它未指定。

默认情况下，Apache Http 客户端[还应该遵循重定向。](http://hc.apache.org/httpcomponents-client-ga/tutorial/html/httpagent.html#d5e1225)

如果您不介意这个插件，我已经编写了一个基于 Java 的*URLConnection*的替代 HTTP 客户端（称为[**Bee 客户端**](http://www.bigbeeconsultants.co.uk/bee-client)- 请注意，它仍然处于 beta 版本）。

因为默认情况下*URLConnection*将遵循重定向，这也是 Bee Client 所做的。

```
val httpClient = new HttpClient
val response: Response = httpClient.get("https://admin-platform.company.com:443/usergroups/rest/usergroups") 
```

状态码包含在响应中，如果没有错误，它将是 2xx。

有一个禁用重定向的选项，但听起来你不需要这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T23:03:06.517

我的同事研究了这个问题。测试在另一个环境中运行完美（我们有几个：qa、staging、production、demo 等）。看起来问题似乎是 QA 服务器有一个 Jenkins 不接受的自签名 SSL 证书，或者客户端无法接受。我可能在本地工作站上手动接受了证书，这就是测试在本地运行的原因。

解决方法是让我们的 IT 部门像其他环境一样使用真正的证书。

# apache-flex - Flex FormItems 不支持表单宽度

> ID：14060734
> 
> 赞同：0
> 
> 时间：2012-12-27T20:16:11.353
> 
> 标签：apache-flex, layout

当我有一个宽度为 200px 的 Form 对象和一个宽度为 100% 的 FormItem 子对象时，当 FormItem 包含一个非常大的子元素时，它似乎不受其父级宽度 200px 的约束。为什么？我该如何阻止这个？

```
<mx:Form width="200" backgroundColor="red">
    <mx:FormItem label="Field:" width="100%" backgroundColor="yellow">
        <!-- This component will force the FormItem to grow larger than the form... -->
        <mx:ComboBox>
            <mx:dataProvider>
                <mx:ArrayCollection>
                    <mx:String>A very, very long string which will force the form to expand</mx:String>
                </mx:ArrayCollection>
            </mx:dataProvider>
        </mx:ComboBox>
    </mx:FormItem>          
</mx:Form> 
```

（我实际上是在尝试编写一个 ComboBox 的版本，它会正常调整自身大小，但如果它对于它的父级来说太大了，它只会捕捉到 100% 宽度并截断文本）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T23:18:55.240

如果设置 minWidth=0 和 percentWidth=100，ComboBox 将尊重其父级的尺寸。

# xcode - 多个 xib 文件的子视图

> ID：14060735
> 
> 赞同：0
> 
> 时间：2012-12-27T20:16:13.907
> 
> 标签：xcode

我有一个项目要求在每个 xib 文件上放置一个自定义菜单屏幕。我知道我可以通过创建视图并将其添加为子视图来做到这一点。

我想在 1 个文件中创建该视图，然后在需要的地方调用它，只是不确定如何实现。

请问有什么帮助吗？...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:25:05.663

这是我这样做的一个例子。

[创建可加载视图](https://stackoverflow.com/questions/5954485/using-interface-builder-to-create-loabable-views)

我这样做是为了创建自定义 tableview 单元格，但这可以用任何类型的类来完成。

关键是这些项目在界面构建器中设置了自定义类。

====== 更新 ======

我没有想到的另一件事是。您可能想要创建特定类型的视图并将该视图放入每个 XIB 文件中。

如果是这样的话。然后您可以创建一个新类，它是 UIView 的子类

然后，您只需将 UIView 添加到您的 xib（其中没有任何内容）并在身份资源管理器中设置其“自定义类”值。这将告诉 Objective C 这个 UIView 实际上是“自定义类”类型。它将 Alloc 初始化您的自定义类并将其放在那里。在这种情况下，您可以使用代码构建菜单或其他任何内容，并将其放入您之前插入的空白 UIView 实际所在的类中。

**我最常见的情况**

是使用连接到插座的“容器”UIView，然后使用上面链接的 nibLoader 方法将视图从创建它的 nib 中拉出，然后将该对象添加为容器的子视图

```
@interface HomeViewController  ()

@property (nonatomic, strong) MyCustomView *customView;

@end

@implementation HomeViewController 

@synthesize customViewContainer = _customViewContainer; // IBOutlet from header
@synthesize customView = _customView;
- (MyCustomView*) customView{
    if (_customView == nil){ // Lazy Load
        // Load From Nib Loader linked to above
    }
    return _customView;
}

- (void) viewDidAppearAnimated:(BOOL) animated {
    this.customView.frame = this.customViewContainer.bounds;
    [this.customViewContainer addSubView:this.customView];
}

@end 
```

# ios - 无法设置 UIImageView

> ID：14060737
> 
> 赞同：1
> 
> 时间：2012-12-27T20:16:19.907
> 
> 标签：ios, uiimageview

我有一个类可以解析 Web 服务调用的结果。基于该结果，它调用另一个类中的方法，并且该方法应该更改 UIImageView 中的图像。但它不会设置图像，我不知道为什么。

一流的相关部分。“服务器”值确实返回“rb”。

```
#import "GetBBYprod.h"
#import "MyViewController.h"

static NSString *kAblue = @"A_blue.png";
static NSString *kBblue = @"B_blue.png";
static NSString *kCblue = @"C_blue.png";

@implementation GetBBYprod
@synthesize vc;

-(id)init {
    if (self = [super init]) {
        vc = [[MyViewController alloc] init];
    }
    return self;
}

-(void)connectionDidFinishLoading:(NSURLConnection *)conn {
    NSString *bbyProdString = [[NSString alloc] initWithData:bbyProdData encoding:NSUTF8StringEncoding];
    NSString *server = [bbyProdString substringToIndex:2];

    if ([server isEqualToString:@"rb"]) {
    [vc setAlight:kBblue];
    }
} 
```

所以这会将 kBblue 发送到我的 MyViewController 类中的方法 setAlight。（kBblue 的值为“B_blue.png”。

所以在我的 MyViewController 类中，setAlight 方法：

```
-(id)init {
    if (self = [super init]) {
        aImage = [[UIImageView alloc] init];
        bImage = [[UIImageView alloc] init];
        cImage = [[UIImageView alloc] init];
    }
    return self;
}

-(void)setAlight:(NSString *)aValue {
    NSLog(@"image name: %@", aValue);
    [aImage setImage:[UIImage imageNamed:aValue]];
} 
```

这将成功记录“图像名称：B_blue.png”，因此我知道正在传递数据并且正在调用该方法。但它不会在 aImage UIImageView 中设置图像。为什么？

**编辑**

*   我正在使用 xib，并且为 imageView 分配了默认图像。
*   我所有的连接都在 xib 中连接，它们看起来都正确。
*   我传递的字符串中没有空格。
*   我可以说图像尚未设置，因为正确设置后对我来说非常明显。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T01:11:11.763

如果您`UImageViews`在 xib 中创建，请不要在`init`. 该框架将为您创建它们。只需确保您在 .h 文件`UIImageViews`中正确连接。`IBOutlets`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-28T01:03:19.987

你说你正在使用 xibs，但你正在分配一个新的 aImage——你应该使用 IBOutlet 到你在 IB 中创建的图像视图，而不是创建一个新的。

# python - python中字符串的冗长布尔搜索

> ID：14060741
> 
> 赞同：2
> 
> 时间：2012-12-27T20:16:40.220
> 
> 标签：python, full-text-search, boolean

我正在尝试在一组字符串中搜索一组特定的单词，并在满足各种布尔条件时执行一些操作。我目前有一种可行的方法，但我希望有一种比我所拥有的更优雅的方法。

```
strings = ['30 brown bears', '30 brown foxes', '20 green turtles', 
            '10 brown dogs']

for text in strings:
    if ('brown' in text) and ('bear' not in text) and ('dog' not in text):
        print text 
```

这可以按需要工作并打印`30 brown foxes`。然而，我担心的是在搜索中添加更多术语。例如，如果 'cat'、'mouse'、'rabbit' 等都添加到`if-statement`? 这似乎是一种笨拙且非 Pythonic 的处理方式，所以我希望有人有不同的方式来完成这项工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T20:29:26.977

我怀疑这是最好的方法，但是您可以做的一件事是`all`与其他两个控制对象结合使用 - 一个包含您想要包含的项目（`brown`在这种情况下），另一个包含您想要忽略的项目：

```
In [1]: strings = ['30 brown bears', '30 brown foxes', '20 green turtles', '10 brown dogs']

In [2]: keep = ('brown')

In [3]: ignore = ('bear', 'dog')

In [4]: for text in strings:
   ...:     if all([k in text for k in keep] + [i not in text for i in ignore]):
   ...:         print text
   ...:         
   ...:         
30 brown foxes 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T20:29:15.987

```
>>> strings = ['30 brown bears', '30 brown foxes', '20 green turtles', '10 brown dogs']
>>> conditions = [('brown', True), ('bear', False), ('dog', False)]
>>> for text in strings:
    if all((x in text) == c for x,c in conditions):
        print text

30 brown foxes 
```

# python - 结合负前瞻和正则表达式后面

> ID：14060743
> 
> 赞同：4
> 
> 时间：2012-12-27T20:16:45.260
> 
> 标签：python, regex, negative-lookahead, negative-lookbehind

我想要一个正则表达式，它会在每个字符串中拆分一个字符串，`"."`除非`"."`前面和后面跟着一个数字。例子：

`"hello world.foo 1.1 bar.1"`==>`["hello world","foo 1.1 bar", "1"]`

我目前有：

```
"(?<![0-9])\.(?!\d)" 
```

但它给出了：

```
["hello world", "foo 1.1 bar.1"] 
```

但它没有找到最后一个`"."`有效的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:52:30.177

一个非| 方法：

```
(?<![0-9](?=.[0-9]))\. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T20:20:20.240

`.`如果前面没有数字，或者后面没有数字，则拆分：

```
In [18]: re.split(r'(?<!\d)\.|\.(?!\d)', text)
Out[18]: ['hello world', 'foo 1.1 bar', '1'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T20:21:25.723

那是因为只有其中一个断言必须失败，整个表达式才会失败。尝试这个：

```
"(?<![0-9])\.|\.(?!\d)" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-08T18:54:06.693

只是为了提供最短的解决方案，这是我的：

（这只是@ysth 的解决方案，稍作调整）

`(?<!\d(?=.\d))\.`

[工作小提琴](https://regex101.com/r/duW7M8/2)

# search - 有没有办法跟踪 Solr 搜索结果返回的次数？

> ID：14060744
> 
> 赞同：3
> 
> 时间：2012-12-27T20:16:46.157
> 
> 标签：search, solr, search-engine, lucene

我们正在使用 Solr 4.0 服务器来允许我们的用户对我们的数据进行类似 google 的搜索，返回对象的类型为“Item”。solr/lucene 是否有任何可用的东西可以跟踪特定项目的退回频率？

是的，我用谷歌搜索了这个，一点运气都没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T02:16:04.143

这当然不是最优雅的方法，但没有其他选项我已经实现了自己的跟踪。我刚刚构建了代码来启动一个线程来计算结果并在数据库中跟踪。

如果有人遇到此问题并有更好的解决方案，请发布您的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:43:16.113

您可以尝试附加一个[变压器](http://wiki.apache.org/solr/CommonQueryParameters)，但不是操纵文档，而是在某处记录计数。[基类](http://svn.apache.org/repos/asf/lucene/dev/trunk/solr/core/src/java/org/apache/solr/response/transform/DocTransformer.java)已经提供，应该很容易扩展。

# javascript - 是否有 Eclipse 设置可以显着提高 JavaScript 编辑器在大文件上的性能？

> ID：14060746
> 
> 赞同：1
> 
> 时间：2012-12-27T20:16:50.497
> 
> 标签：javascript, eclipse, performance

有时我必须处理一个包含非常大的 javascript 文件（> 30k 行）的项目。我无法控制将它们拆分为多个文件的决定。

在这些情况下，javascript 编辑器变得非常缓慢。键入字符的事件最多可能需要 2 秒。是否有一个隐藏的设置会禁用正确的东西，只有语法突出显示和基本的文本编辑功能？所以我不必切换到我没有所有方便的eclipse快捷方式的文本编辑器......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T18:45:17.940

这么久都没有答案，看来答案是否定的……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T18:48:27.390

现在我没有这个问题，但是如果我有的话，我会在[Eclipse Bugzilla](https://bugs.eclipse.org/bugs/)中提出一个针对 JSDT 的错误，然后看看它会把我带到哪里。

您的用例非常不寻常，开发人员和大多数用户可能从未遇到过它。不能保证及时提供性能优化，但最好是卷起袖子提交补丁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-24T10:58:57.620

您的问题有一个解决方案：右键游览 Projets -> Settings -> Javascript -> Include Path

打开源选项卡并删除所有文件夹。单击确定。

享受你的 JavaScript！

# android - 在 SQLite 中使用“_id”从表中选择

> ID：14060747
> 
> 赞同：0
> 
> 时间：2012-12-27T20:16:55.033
> 
> 标签：android, sqlite, where-clause, android-cursor

我想使用 id 作为选择从我的 sqlite 数据库中选择一个特定的行。在我的数据库中，id 称为 _id。我想使用以下函数，参数是我要选择并保存到游标中的行的 id。DATABASE_TABLE_Bewirtschafter 是我的表的名称。

```
public Cursor createBewirtschafterIDCursor(int id) {
        return db.query(DATABASE_TABLE_Bewirtschafter, null, "_id = " + id,
                null, null, null, null);
} 
```

不幸的是，这不起作用，我得到一个空指针异常。这有效：

```
public Cursor createBewirtschafterListViewCursor(String like) {
    return db.query(DATABASE_TABLE_Bewirtschafter, null, "gewName LIKE '%" + like + "%'",
            null, null, null, null);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:19:15.883

你的`db`变量设置是什么？从您展示的代码来看，这几乎就是我猜想导致`NullPointerException`抛出的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:21:15.557

是的，因为您在查询中的列参数中传递了 null

```
db.query(DATABASE_TABLE_Bewirtschafter, null, "_id = " + id,
                null, null, null, null); 
```

而您应该传递一个字符串数组，那里有不同列的名称..对于参考，请检查

[http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)

# javascript - Chrome 对底层元素的奇怪点击行为

> ID：14060751
> 
> 赞同：0
> 
> 时间：2012-12-27T20:17:08.747
> 
> 标签：javascript

我有以下 HTML 代码。当屏幕被“cover”DIV 覆盖时，单击按钮和其他位置。未点击按钮不会触发。稍后，当“封面”DIV 被隐藏时，点击按钮就会触发。

似乎存在时间问题。有人可以解释这种行为吗？

**标记：**

```
<div id="cover"></div>
<button onclick="alert('Button clicked')">Click me</button>
<div id="text"></div>​ 
```

**CSS：**

```
#cover {
    display: none;
    position: fixed;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    z-index: 100;
    background-color: white;
    opacity: 0.8
}​ 
```

**Javascript：**

```
function hide ()
{
    document.getElementById ("cover").style.display = "none";
}
function show ()
{
    document.getElementById ("cover").style.display = "block";
}
function busy (callback)
{
    show ();
    setTimeout (callback, 1);
}
function work ()
{
    var start = (new Date ()).getTime ();
    var wait  = 3000;
    while ((new Date()).getTime () - start < wait)
    {
        /* do nothing */
    }
    hide ();
}
function start ()
{
    document.getElementById ("cover").onclick = function (ev) {
        document.getElementById ("text").innerHTML = 'Cover clicked';
    };
    busy (work);
}​ 
```

[http://jsfiddle.net/userdude/5DutW/4](http://jsfiddle.net/userdude/5DutW/4)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T20:28:42.577

您的`work`功能不起作用（没有双关语）：它将冻结 UI 3 秒钟，因此单击和其他交互将按照您的描述排队。你为什么不直接传递`3000`给`setTimeout`而不是`1`？

```
function busy (callback)
{
    show ();
    setTimeout (callback, 3000);
}
function work ()
{
    hide ();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:32:11.567

发生这种情况是因为您正在锁定页面线程：

```
while ((new Date()).getTime () - start < wait)
{
    /* do nothing */
} 
```

这可以防止在事件完成之前处理事件，并防止更新 UI。

为什么不直接使用超时呢？`setTimeout(hide,wait);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T06:44:10.533

经过多次测试，我可以确认这种行为。Firefox 和 Chrome 之间有很大的不同。

请记住，正如许多人所说，Javascript 程序是单线程的。

在 Firefox 中，当函数 'work' 执行 Ajax 调用时，点击会被忽略。当函数返回并且“cover”消失时，什么也没有发生。

在 Chrome 中，点击会被捕获并排队。当函数 'work' 返回时，会触发 onclick 事件。由于“封面”已经消失，它没有得到 onclick 事件。另一方面，按钮接收 onclick 事件。例如，当我两次单击按钮时（当它被覆盖时），稍后我会收到两个警报。

我发现 Chrome 的行为令人困惑，恕我直言错误，因为当我点击时，我的眼睛自然会告诉我该按钮已被覆盖，因此无法点击（它不会显示为点击按钮）。

感谢所有的答案和线索。对此，我真的非常感激。

# python - Python：逻辑表达式为假，但如果不关心

> ID：14060753
> 
> 赞同：0
> 
> 时间：2012-12-27T20:17:22.617
> 
> 标签：python, boolean-expression

> **可能重复：**
> [为什么当“if not []”成功时“[] == False”评估为 False？](https://stackoverflow.com/questions/10440792/why-does-false-evaluate-to-false-when-if-not-succeeds)

逻辑测试 a==True 怎么可能产生 False，但是如果 a: 有效？请看下面的代码

```
>>> a = bin(0)
>>> if a:
    print a == True, 'HOWWWW???????'

False HOWWWW???????
>>> type(a)
<type 'str'>
>>> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-27T20:19:33.643

`if`语句不依赖于值是否等于 true 。这取决于是否`bool(a)`等于 True，在这种情况下它是。在布尔上下文中，非空字符串被认为是真的。请参阅[文档](http://docs.python.org/2/reference/expressions.html#booleans)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:19:14.393

好的，在 python 中，您似乎无法以这种方式测试字符串：

```
>>> a == False
False
>>> a == True
False
>>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T20:19:15.390

对于字符串`a`，`if a`等价于`if len(a)!=0`

# php - PHP在不保存文件的情况下调整图像大小

> ID：14060762
> 
> 赞同：-1
> 
> 时间：2012-12-27T20:19:04.120
> 
> 标签：php, image, gd, image-resizing

我有在我的网站上显示为缩略图的图像。缩略图的大小变化很大。理想情况下，我不必在每个缩略图的尺寸中保存每张照片的副本。相反，我可以在 PHP 中指定最终尺寸，并在图像从服务器发送之前调整其大小。

在将照片上传到服务器时，我**不会**尝试调整照片大小。我**无法**将图像保存为每个缩略图大小。

问题是缩略图的大小因页面布局而异。因此，如果我将图像保存为每个缩略图大小，我将保存大约 20 倍的照片数量。

我尝试保存“小”“中”和“大”图像，然后调用最接近缩略图大小的图像。看起来有点粗糙，但听起来这可能是正确的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:26:10.207

好吧，因为你不想耗尽你的磁盘空间，你会耗尽你的 CPU 资源，这更糟。
即使您*认为*无法将缩略图保存在磁盘上，您也必须这样做。没有其他办法。您只会浪费时间并最终转向正确的设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-27T20:32:48.430

我做过类似的事情，你可以做的是这样的事情，就像之前发布的那样，这会占用大量资源，并且保存到磁盘通常更好，但如果你真的想要，试一试：

```
<?php

function createThumbnail($filename, $thumbWidth){
    $details = getimagesize($filename);
    $content = file_get_contents($filename);
    $srcImg = imagecreatefromstring($content);
    $thumbHeight = $details[1] * ($thumbWidth / $details[0]);
    $thumbImg = imagecreatetruecolor($thumbWidth, $thumbHeight);
    imagecopyresampled($thumbImg, $srcImg, 0, 0, 0, 0, $thumbWidth, $thumbHeight, $details[0], $details[1]);
    imagejpeg($thumbImg, null, 100);
    imagedestroy($srcImg);
    return $thumbImg;
}

header("Content-Type: image/jpeg");
echo createThumbnail("/path/to/image.jpg", 200); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-27T20:56:55.723

最好的方法当然是计算图像大小并返回`img`具有适当属性的标签，如下所示：

```
"<img width=\"" . $width . "px\" height=\"" . $height . "\" src="..."/>" 
```

“即时”调整图像大小太费时间了。考虑显示 20 张图像的情况，每张图像将被缩放 150 毫秒（取决于图像的大小和比例因子）。显示一个页面大约需要 3 秒以上。你真的要强迫用户等待这么长时间才能看到页面的内容吗？

# java - OpenGL旋转相机

> ID：14060763
> 
> 赞同：2
> 
> 时间：2012-12-27T20:19:05.603
> 
> 标签：java, opengl, camera

我将如何用鼠标旋转相机（播放器）？在几乎任何 3D 游戏中，您都可以使用鼠标环顾世界。我可以`glRotatef()`用来完成这个吗？还是有一个特定的功能可以用来旋转视口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:26:05.323

您必须使用鼠标坐标来计算您必须旋转的方向。

例如：如果您每帧存储鼠标坐标，您可以执行以下操作：

```
if (thisFrameMouse.x >= lastFrameMouse.x) {
  // mouse moved to right
} else {
  // mouse moved to left
} 
```

然后，您可以使用此信息根据两个值的差异计算新的旋转角度。使用旋转角度和旋转轴，您可以创建一个新的旋转矩阵或使用`glRotatef`（使用矩阵模式`GL_MODELVIEW`，感谢 datenwolf）更新现有矩阵。

如果您使用 GLU，您还可以使用[gluLookAt](http://www.opengl.org/sdk/docs/man2/xhtml/gluLookAt.xml)函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:31:30.303

这取决于您想要拥有的视图类型。您可以使用 glOrtho()：这里对象的深度无关紧要，对象被投影在屏幕上与屏幕平行。当您在谷歌图像上搜索 glOrtho() 时，您可以看到一些带有图像的示例。您也可以使用 glLookAt()：这是人类的观点。更远的物体是多么不可见。

对于 glOrtho()，您必须使用 glRotated 并用鼠标正确连接它。使用 glLookAt 稍微困难一些。在这里，您必须使用一些数学来计算要查看的点。灯塔的教程很好。

请记住，您必须再次计算每一帧的相机。因为鼠标移动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T01:52:49.283

首先你必须明白，在 OpenGL 上没有相机！

OpenGL 所做的是，它获取顶点位置并将它们通过一系列线性变换（在固定函数管道中）。

通常的管道是

顶点局部空间位置到眼睛空间位置（模型视图变换）

```
v_eye = M · v 
```

从那里进入剪辑空间（投影变换）

```
v_clip = P · v_eye 
```

然后它进入标准化设备坐标（NDC）空间

```
v_ndc = v_clip / v_clip.w 
```

就是这样。没有相机。那么如何定义视口呢？可以这样想：在世界中移动相机，或者保持相机在适当位置并移动整个世界，视觉结果没有区别。所以魔法必须发生在眼睛空间的变换中（即视图中顶点的位置）。

为此，我们将模型视图矩阵 M 分解为模型到世界部分 (W) 和移动世界到视图

```
M = V · W 
```

所以这个矩阵 V 定义了“相机”。让我们假设世界上有一个相机对象，由相机到世界的转换C定义，转换到眼空间后相机对象位置的位置应该是不变的，即身份

```
1 = V · C 
```

因此

```
C = V^-1 
```

即视图变换是将相机从原点放置到世界的变换的逆。

* * *

那么哪个OpenGL函数定义了视图呢？没有特别的。固定函数 OpenGL 使用了许多矩阵。并且固定函数OpenGL提供了原始矩阵操作方法glScale、glTranslate、glRotate，可以用来创建复合矩阵。从这里开始，您就靠自己了，因为您必须自己弄清楚如何根据您要处理的用户输入来实现相机变换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-12T16:48:19.217

是的，你可以使用 glRotatef() 但你需要计算你将旋转多少以及你将在哪里旋转。

# apache - 将 htaccess 应用于符号链接目录而不是初始目录？

> ID：14060769
> 
> 赞同：1
> 
> 时间：2012-12-27T20:19:22.623
> 
> 标签：apache, .htaccess, directory, symlink

我想知道是否可以在不影响初始“真实”目录的情况下将 htaccess 指令应用于符号链接目录位置。

例如，如果我创建了一个目录

> /home/longfoldername/myDir/

然后在此文件夹中创建了一个符号链接

> /htdocs/myDir/

有没有办法在 htdocs 符号链接目录中粘贴带有“Options -Indexes”的 htaccess 文件，但保留主初始目录并启用索引？

我试过类似的东西

```
<Directory "/htdocs/myDir/">
Options -Indexes
</Directory> 
```

在 /htdocs/myDir/ 目录中的 htaccess 文件中，但它恰好导致了内部服务器错误。

只是放：

```
Options -Indexes 
```

在 htaccess 文件中，**两个**目录都没有索引。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:18:12.013

您不能使用`Directory`htaccess 文件中的容器（它已经是一种“目录”容器）。您将放置在文档根目录中的 htaccess 文件中：

```
Options +Indexes 
```

并在您`myDir`目录中的单独 htaccess 文件中：

```
Options -Indexes 
```

访问文档根目录时，不会应用子目录中的任何 htaccess 文件，但访问子目录时，父目录的 htaccess 文件会被取代。

# android - 显示某些TextView时如何使按钮消失？

> ID：14060771
> 
> 赞同：1
> 
> 时间：2012-12-27T20:19:28.967
> 
> 标签：android, eclipse, button, textview

我有这个问题。我创建了一个带有两个按钮和一个 TextView 的活动。TextView 通过按下按钮“Next”进行更改，而“Previous”按钮用于将 TextView 更改回其原始状态（即 textview1）。但是，当在显示 textview1 时按下“上一个”或在显示 textview2 时按下“下一个”时，应用程序会出错并因此被关闭。我现在想要实现的是在 textview1 开启时使“上一个”按钮消失，在 textview2 开启时使“下一个”按钮消失。

这是我目前使用的类：

```
package com.example.test8;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.Typeface;
import android.view.Menu;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.widget.ImageButton;
import android.widget.TextView;

public class Main extends Activity {
    private static final String[] Texts= 
        {"textview1",
         "textview2"
        };

int textIdx = 0;

TextView Text;
ImageButton Next;
ImageButton Previous;

public static String getText(int idx) { 
    return Texts[idx]; 
} 

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final TextView text = (TextView) findViewById(R.id.text);
    ImageButton Next = (ImageButton) findViewById(R.id.Next);
    ImageButton Previous = (ImageButton) findViewById(R.id.Previous);
    Text.setText(getText(textIdx));

    Next.setOnClickListener(new View.OnClickListener() {  
        public void onClick(View v) { 
        textIdx++; 
        Text.setText(getText(textIdx)); 
        } 
    }); 

    Previous.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
        textIdx--;
        Text.setText(getText(textIdx)); 
        }
        });

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

我考虑过使用 else if 语句，但我无法让它发挥作用，因为我缺乏知识和经验。如果有人可以在这里帮助我，那就太好了。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:25:24.993

您可以只使用一个简单的 if 语句

```
 Next.setOnClickListener(new View.OnClickListener() {  
            public void onClick(View v) { 
            if(textIdx == 0)
            {
                textIdx++; 
                Text.setText(getText(textIdx)); 
                Next.setVisibility(View.INVISIBLE);
                Previous.setVisibility(View.VISIBLE);
            }
            } 
        }); 

        Previous.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {

            if(textIdx == 1)
            {
                textIdx--;
                Text.setText(getText(textIdx)); 
                Next.setVisibility(View.VISIBLE);
                Previous.setVisibility(View.INVISIBLE);
            }
            }
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:27:35.203

您应该禁用按钮以防止用户在阵列中前面或后面没有任何内容时单击它。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.activity_main);

   final TextView text = (TextView) findViewById(R.id.text);
   ImageButton Next = (ImageButton) findViewById(R.id.Next);
   ImageButton Previous = (ImageButton) findViewById(R.id.Previous);
   Text.setText(getText(textIdx));

   Previous.setEnabled(false); //defaults the button to disabled

   Next.setOnClickListener(new View.OnClickListener() {  
       public void onClick(View v) { 
       textIdx++; 
       Text.setText(getText(textIdx));            
       Previous.setEnabled(true);
       if(textIdx>=Text.length-1)
          Next.setEnabled(false);  
       } 
   }); 

   Previous.setOnClickListener(new View.OnClickListener() {
       public void onClick(View v) {
       textIdx--;
       Text.setText(getText(textIdx));            
       Next.setEnabled(true);
       if(textIdx<=0)
          Previous.setEnabled(false);
       }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T20:29:19.720

如果`Previous`在`textview1`激活时按下（并且 textIdx 为 0），`textIdx`则变为负数。您无法从数组中获取具有负索引的元素。

同样，当您在处于活动状态时（textIdx 为 1）按下`Next`时，变为大于 1。您无法获得索引等于或大于数组大小的元素。`texview2``textIdx`

我建议你`textIdx++`用`textIdx = 1`和`textIdx--`替换`textIdx = 0`，这将解决崩溃问题。

要使按钮消失`Next.setVisibility(View.INVISIBLE)`，请尝试并`Next.setVisibility(View.VISIBLE)`恢复它。

# ios - 如何在没有 reloadData 的情况下使用 insertRowsAtIndexPaths IOS

> ID：14060777
> 
> 赞同：4
> 
> 时间：2012-12-27T20:20:06.667
> 
> 标签：ios, uitableview

我不明白它的`insertRowsAtIndexPaths`用途。我需要`reloadData`为这项工作制作一个我的表格视图吗？

如果不进行 reloadData 应用程序将崩溃。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-27T20:26:16.757

应用程序崩溃是因为在 insertRows 调用前后数据源不一致。

例如，如果您要插入一个新行，则需要`tableView:numberOfRowsInSection:`比插入调用之前多返回 1 行。

这是一个示例来演示

```
self.numberOfRows = self.numberOfRows + 1;
[self.tableView insertRowsAtIndexPaths:@[[NSIndexPath indexPathForRow:0 inSection:0]] withRowAnimation:UITableViewRowAnimationAutomatic]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:24:37.397

取决于您在做什么，但简而言之，是的，您需要重新加载或更新数据源。请记住，iOS 只会更新屏幕上显示的数据，因此如果您正在处理一个巨大的网格，它不会减慢或杀死您的应用程序来执行此操作。

# c# - 单击搜索按钮时在下拉列表中传递第一个值

> ID：14060785
> 
> 赞同：2
> 
> 时间：2012-12-27T20:20:40.420
> 
> 标签：c#, asp.net

我有一个 asp 按钮和四个从数据库动态填充的下拉列表。单击按钮时，应该将下拉列表中的选定值传递给 SQL 存储过程。相反，每个下拉列表中的第一个值被传递而不是选定的值。这是aspx页面上的代码：

```
<asp:DropDownList runat="server" ID="ddlCountry" AppendDataBoundItems="True">
</asp:DropDownList>
&nbsp;
<asp:DropDownList runat="server" ID="ddlTypeStructure" AppendDataBoundItems="True">
 </asp:DropDownList>
&nbsp;
<asp:DropDownList runat="server" ID="ddlCategory" AppendDataBoundItems="True">
</asp:DropDownList>
&nbsp;
<asp:DropDownList runat="server" ID="ddlSegment" AppendDataBoundItems="True">
</asp:DropDownList>
&nbsp;
<asp:Button runat="server" ID="btnSearhProjects" Text="Go" 
    CausesValidation="False" onclick="btnSearhProjects_Click" UseSubmitBehavior="False" /> 
```

这是按钮背后的 C# 代码：

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            BindCountries();
            BindCategories();
            BindSegments();
            BindStructures();

        }

    }
public void SearchProjects()
    {
        Project project = new Project();
        string country = ddlCountry.SelectedItem.Text;
        string category = ddlCategory.SelectedItem.Text;
        string segment = ddlSegment.SelectedItem.Text;
        string structure = ddlTypeStructure.SelectedItem.Text;
        List<Project> projectList = project.GetProjects(country, category, segment, structure);
        gvProjects.DataSource = projectList;
        gvProjects.DataBind();
    }

    protected void btnSearhProjects_Click(object sender, EventArgs e)
    {
        SearchProjects();
    } 
```

这就是我填充每个下拉列表的方式：

```
public void BindCountries()
    {
        List<Country> countryList = new List<Country>();
        Country country = new Country();
        countryList = country.GetCountries();

        ddlCountry.DataTextField = "CountryName";
        ddlCountry.DataValueField = "CountryID";
        ddlCountry.DataSource = countryList;
        ddlCountry.DataBind();

    } 
```

我尝试过使用`ddlCountry.SelectedValue.Text`并且`ddlCountry.SelectedItem.Value`它们不起作用。任何帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:26:24.607

`if (!IsPostBack)`在事件的代码块中设置断点（或一些调试语句），`Page_Load`以确保它不会在按钮单击时执行。

还要确保`value`DropDownList ListItems 的属性都是唯一的，否则会将其设置为第一个重复值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:28:28.390

问题是页面加载没有运行——因为这些是动态创建的，它们没有在回发时设置。

您也可以将这些值存储在视图状态中，但您似乎已关闭页面的视图状态。（视图状态在动态页面上*可能*是一个问题，但是您需要解决这个问题。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T20:30:26.733

有几种方法可以做到这一点，但我会让你给你一个简单的答案试试这个并报告如果这有效 Autopostback 设置为 false 可能会导致这种情况，禁用视图状态也会导致这种情况

将值存储在 ViewState 或 Session 变量中，或者根据需要创建受保护的属性

假设您正在绑定数据，

有 DataBound 事件，它在数据绑定到下拉列表后触发。当您将 dataSource 分配给您的 dropwdwon 时，您需要在所有绑定到下拉列表的行之后选择项目

```
var selectedValue string.Empty;
protected void DropDownList1_DataBound(object sender, EventArgs e)
{
   selectedValue = ddlCountry.SelectedValue; // store it in some variable
} 
```

您还可以获取 DropDownList 的 ListItem 并使用 foreach 来查看选择了哪些项目。请确保您在 Page_Load 的 if (IsPostBack) 中执行此操作，记住按钮单击会触发 PostBack

```
foreach (ListItem item in ddlCountry.Items)
{
    if (item.Selected)
    {
        // TODO: Whatever you are doing with a selected item.
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T20:34:03.173

您可以删除 AppendDataBoundItems="true"。

[DropDownList AppendDataBoundItems（第一项为空白且无重复项）](https://stackoverflow.com/questions/730555/dropdownlist-appenddatabounditems-first-item-to-be-blank)

```
<asp:DropDownList runat="server" ID="ddlCountry">
</asp:DropDownList>
&nbsp;
<asp:DropDownList runat="server" ID="ddlTypeStructure">
 </asp:DropDownList>
&nbsp;
<asp:DropDownList runat="server" ID="ddlCategory">
</asp:DropDownList>
&nbsp;
<asp:DropDownList runat="server" ID="ddlSegment">
</asp:DropDownList>
&nbsp;
<asp:Button runat="server" ID="btnSearhProjects" Text="Go" 
    CausesValidation="False" onclick="btnSearhProjects_Click" UseSubmitBehavior="False" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-28T15:54:12.013

我找到了解决我的问题的方法。我的母版页上有一个额外的表单标签，带有`method="post"`. 这导致页面回发到自身。删除表单标签后，我就可以正确使用下拉列表了。谢谢。

# windows - 无法在调度程序中调度 VBScript

> ID：14060787
> 
> 赞同：0
> 
> 时间：2012-12-27T20:20:49.307
> 
> 标签：windows, scheduled-tasks, scheduler

我有一个 wsf 文件，我将在下面粘贴它，我试图在 Windows Server 任务计划程序中安排它。

如果我尝试手动执行 wsf 运行良好，但任务调度程序不会运行它。在我观看的过程中，我可以看到任务状态切换到“正在运行”，并且在大约 10 秒后（挂起的任务终止设置为 1 小时）切换回来。我没有看到在后台运行（我不知道是否应该），并且它运行的脚本（远程登录到另一台服务器并执行命令）尚未执行。

我确定这是一个愚蠢的权限问题，但是经过几周的谷歌搜索和提问后，我无法弄清楚。

下面是脚本，以防它所做的任何帮助。

```
<job>
<script language="VBScript">
Option Explicit
On Error Resume Next
Dim oShell
Set oShell = CreateObject("WScript.Shell")
oShell.Run ("Telnet")
WScript.Sleep 1000
oShell.SendKeys("Open 172.16.8.9")
WScript.Sleep 1000
oShell.SendKeys("{Enter}")
WScript.Sleep 1000
oShell.SendKeys"csmmgr"
WScript.Sleep 1000
oShell.SendKeys("{Enter}")
WScript.Sleep 1000
oShell.SendKeys("quality")
WScript.Sleep 1000
oShell.SendKeys("{Enter}")
WScript.Sleep 1000
oShell.SendKeys "@dsm nyf/vol=nyf/data=""100"" JOB{^}ZLEGDWPJ"
WScript.Sleep 1000
oShell.SendKeys("{Enter}")
WScript.Sleep 1000
oShell.SendKeys "lo"
WScript.Sleep 1000
oShell.SendKeys("{Enter}")
oShell.sendkeys"^]"
WScript.Sleep 1000
oShell.SendKeys "q {Enter}"
</script>
</job> 
```

--sw

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:39:52.990

在任务选项卡上将其设置为以系统管理员身份运行。您必须通过按**设置密码**按钮来保存密码。

# c# - Windows Phone 7 XNA 项目 - 更新到 Windows Phone 8？

> ID：14060797
> 
> 赞同：1
> 
> 时间：2012-12-27T20:21:36.223
> 
> 标签：c#, .net, windows-phone-7, xna, windows-phone

我们有一个使用 C# 和 XNA 的现有 Windows Phone 7 项目。

令我们惊讶的是，该项目在装有 Windows Phone 8 的诺基亚 820 上构建并运行良好。我们只需在 Visual Studio 2012 中打开该项目即可。

是否有任何理由切换到新的 Windows Phone 8 项目？任何性能原因或我们无法访问的 API？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T20:40:00.937

一个成熟的 WP8 项目不支持 XNA。您可能希望在您的 XNA 应用程序中购买应用程序.. 这可以使用反射来完成... 仅 WP8 项目需要您使用 C++/DX

来自 msdn XNA 框架支持。您可以开发在 Windows Phone 8 上运行的 XNA Framework 应用程序。为此，您必须将目标设置为 Windows Phone OS 7.1。有关详细信息，请参阅[XNA 框架和 Windows Phone 8 开发](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207003%28v=vs.105%29.aspx)。

除了 xna 程序集使用之外，主要亮点如下 • 针对 Windows Phone OS 7.1 的 XNA Game Studio 4.0 应用程序仍然得到完全支持，并继续在 Windows Phone 8 设备上运行。

• 您可以继续开发和维护面向Windows Phone OS 7.1 的新的或现有的XNA Framework 应用程序。

• 您不能将面向 Windows Phone OS 7.1 的现有 XNA Framework 应用程序升级为面向 Windows Phone OS 8.0。

• 您不能创建面向 Windows Phone OS 8.0 的新 XNA Framework 应用程序。当您选择 XNA Game Studio 4.0 工程模板时，您只能选择 Windows Phone OS 7.1 作为目标操作系统。

• 您可以在面向Windows Phone OS 8.0 的应用程序中使用某些XNA Framework 程序集。

# django - 多小部件是否可以使用两个不同的模型字段

> ID：14060798
> 
> 赞同：0
> 
> 时间：2012-12-27T20:21:41.580
> 
> 标签：django, model, field, django-multiwidget

我真的一直在拔头发来完成这件事。我的一个模型中有 2 个整数字段，如下所示：

```
#models.py

class TestModel(models.Model):
    """
    This is a test model.
    """

    max = models.IntegerField()
    min = models.IntegerField() 
```

由于上述两个值是相互关联的，我希望它们使用自定义小部件。现在重点是，我希望这些字段使用单个自定义小部件（MultiWidget），但我也希望将值保存在数据库中的单独列中[不想解析内容，而且搜索功能将使用以上字段分开，所以只想单独存储它们]。

自定义小部件仅接受来自单个模型字段的值，因此我决定创建一个自定义表单字段以在上述模型的 ModelForm 中使用。

现在这就是我的表单的外观。

```
class MinMaxField(forms.MultiValueField):

    def __init__(self, *args, **kwargs):

        all_fields = ( 
            forms.CharField(),
            forms.CharField(),
            )   

        super(MinMaxField, self).__init__(all_fields, *args, **kwargs)

    def compress(self, values):
        if values:
            return '|'.join(values)
        return ''

class TestModelForm(forms.ModelForm):

    minmax = MinMaxField(widget=widgets.MinMaxWidget(),
             required=False)

    class Meta:
        model = models.TestModel
        fields = ('min', 'max', 'minmax')
        widgets = {
            'min' : forms.HiddenInput(),
            'max' : forms.HiddenInput(),
        }

    def full_clean(self, *args, **kwargs):
        if 'minmax_0' in self.data:
            newdata = self.data.copy()
            newdata['min'] = self.data['minmax_0']
            newdata['max'] = self.data['minmax_1']
            self.data = newdata
        super(TestModelForm, self).full_clean(*args, **kwargs) 
```

上面的表单基本上隐藏了模型字段，只显示了`minmax`使用自定义小部件的字段，如下所示：

```
class MinMaxWidget(widgets.MultiWidget):

    def __init__(self, attrs=None):
        mwidgets = (widgets.Select(attrs=attrs, choices=MIN),
                   widgets.Select(attrs=attrs, choices=MAX))
        super(MinMaxWidget, self).__init__(mwidgets, attrs)

    def value_from_datadict(self, data, files, name):
        try:
            values = [widget.value_from_datadict(data, files, name + '_%s' % i)\ 
                      for i, widget in enumerate(self.widgets)]

            value = [int(values[0]), int(values[1])]
        except ValueError:
            raise ValueError('Value %s for %s did not validate. \
                              a list or a tuple expected' % (value, self.widget))
        return value

    def decompress(self, value):
        if value:
            if isinstance(value, list):
                return value
            return [value[0], value[1]]
        return [None, None]

    def format_output(self, rendered_widgets):
        rendered_widgets.insert(0, '<span class="multi_selects">')
        rendered_widgets.insert(-1, '<label id="min">Min</label>')
        rendered_widgets.append('<label id="max">Max</label></span>')
        return u''.join(rendered_widgets) 
```

现在，一切正常，值分别保存到各自的字段中。但是当我试图用一个`TestModel`对象的实例编辑表单时，问题就出现了。在编辑的情况下，当呈现表单时，实际值存储在隐藏字段`min`和`max`输入字段中，而 minmax 字段没有值。[当然，因为它是一个表单域。]

我有什么选择

1.  从和字段中预填充`minmax`表单字段的值。[注意：不使用 Javascript 或 jQuery]`min``max`

2.  或者创建一个使用来自两个不同模型字段的值的 MultiWidget。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-23T15:47:52.597

我目前遇到了类似的问题，并且有一种方法可以将小部件用于两个字段。我使用的是 1.4 版本，没有尝试过其他版本。

在你看来，你可能有这样的事情：

```
form = TestModelForm(instance=instance) 
```

`instance`您要编辑的数据库中的对象在哪里。让我们看看 Django 在创建表单时在做什么

```
# django/forms/models.py

class BaseModelForm(BaseForm):
     def __init__(self, data=None, files=None, auto_id='id_%s', prefix=None,
                  initial=None, error_class=ErrorList, label_suffix=':',
                  empty_permitted=False, instance=None):
          ...
          if instance is None:
              ...
          else:
              self.instance = instance
              object_data = model_to_dict(instance, opts.fields, opts.exclude)
          # if initial was provided, it should override the values from instance
          if initial is not None:
              object_data.update(initial)
          ...
          super(BaseModelForm, self).__init__(data, files, auto_id, prefix, 
                                              object_data, error_class, 
                                              label_suffix, empty_permitted) 
```

然后，当呈现表单时，`BoundField`类使用它`object_data`为小部件分配初始值。

因此，您需要做的就是`initial`在表单构造函数中提供。

```
class TestModelForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        if 'instance' in kwargs:
            initial = dictionary with initial values
            initial.update(kwargs['initial'] or {})
        ...
        super(TestModelForm, self).__init__(initial=initial, *args, **kwargs) 
```

还记得将您的字段添加到您的表单`fields`列表中。

这样您就没有两个未使用的隐藏小部件，无需使用 javascript 和 imo，代码更具解释性。

# java - JSTL 和 c:when 测试条件

> ID：14060801
> 
> 赞同：5
> 
> 时间：2012-12-27T20:21:50.593
> 
> 标签：java, jsp, servlets, jstl

如何检查和使用 userLoggedIn 来证明条件。我是新来的，我有很多搜索。一定有一个愚蠢的错误。

索引.jsp

```
<div id="sign-in">
    <c:choose> 
        <c:when test="${userLoggedIn == 1}"> 
             Welcome <c:out value="${loginID}" /> | Logout
        </c:when>
        <c:otherwise>Log-in</c:otherwise>
    </c:choose>
</div> 
```

一些验证 servlet

```
int userLoggedIn = 0;

if(loginID.equals("guest@guest.com") && password.equals("guest")){
    userLoggedIn = 1;
    getServletContext().getRequestDispatcher("/index.jsp").forward(request, response);
    //     out.println("login successful");

} else {
    //   getServletContext().getRequestDispatcher("/login.jsp").forward(request, response);
    out.println("login failed");
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T20:25:27.367

您需要将信息存储在所需的范围内，通常是登录用户的会话范围。

*在 .之后* 添加以下行`userLoggedIn = 1;`。

```
request.getSession().setAttribute("userLoggedIn", userLoggedIn); 
```

这基本上就是您需要更改的所有内容。

* * *

**与具体问题无关**，这种`int`（`boolean`正如 BevynQ 所评论的）方法相当“原始”。您通常会将`User`从数据库获得的整个实体存储在会话中。例如

```
User user = userService.find(username, password);

if (user != null) {
    request.getSession().setAttribute("user", user);
    response.sendRedirect("home");
} else {
    request.setAttribute("message", "Unknown login, please try again");
    request.getRequestDispatcher("/WEB-INF/login.jsp").forward(request, response);
} 
```

和

```
<c:when test="${not empty user}"> 
```

它允许轻松访问其所有属性，例如

```
<p>Welcome, <c:out value="${user.name}" /></p> 
```

# c - 如何从C中的这种类型的字符串中获取数字

> ID：14060805
> 
> 赞同：-2
> 
> 时间：2012-12-27T20:22:13.667
> 
> 标签：c, string, integer, strtok, atoi

```
1 13 3 4; 5 6 7 8; 9 10 11 12; 2 15 14 0 
```

如何在 ANSI C 中从该字符串中获取数字？

我试图将它与 strtok() 分开：

```
char *vstup = argv[1];
char delims[] = ";";
char *result = NULL;
result = strtok( vstup, delims );  

while( result != NULL ) {
    printf( "result is \"%s\"\n", result );
    result = strtok( NULL, delims );
} 
```

我得到了这个：

```
result is "1 13 3 4"  
result is " 5 6 7 8"  
result is " 9 10 11 12"  
result is " 2 15 14 0" 
```

现在我不知道如何获取整数中的数字并将它们保存到二维字段（矩阵）。我需要这样的东西：

```
field[1][1] = 1
.
.
.
etc. 
```

我想知道 atoi()，但我不确定它是否会将例如“13”识别为一个数字..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:56:41.237

使用偶数空格作为分隔符。例如，在您的情况下，此代码将数字放入大小为 4x4 的二维数组中

```
#include<stdio.h>
#include<string.h>

void main()
{
char a[] = "1 13 3 4; 5 6 7 8; 9 10 11 12; 2 15 14 0";
int i=0 ,j=0 , x;
int array[4][4];
char *temp;
temp = strtok(a," ;");
do
{
    array[i][j] = atoi(temp);
    if(j == 4)
    {
        i++;
        j = 0;
    }
    j++;
}while(temp = strtok(NULL," ;"));

for(i=0; i<4; i++)
{
    for(j=0; j<4 ;j++)
    {
        printf("%d ",array[i][j]);
    }
    printf("\n");
}   
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T20:32:47.713

您可以执行与剥离到 ';' 时完全相同的操作。但也可以使用 ' ' 表示空格。将此结果放入一个数组中，您可以在整个数组上使用 atoi 或任何您想要的。如果要将其放入二维数组中，可以将字符串拆分为 ';' 然后在该循​​环中将每个整数拆分为您想要的数组的任何部分。不会编写代码，因为它看起来像家庭作业。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T20:37:21.227

一种方法是使用 sscanf：

```
char* input = ...;
while(*input) {
    input += ';' == *input;
    int a, b, c, d, n = -1;
    sscanf(input, "%d %d %d %d%n", &a, &b, &c, &d, &n);
    if(n < 0)
        // parsing error
    // parsed successfully into a, b, c, d
    input += n;
} 
```

请注意，输入字符串在此处保持不变。

# asp.net - Chart Id 与在 ASP 中使用 Fusion Chart 的 JavaScript 变量名错误相同

> ID：14060807
> 
> 赞同：0
> 
> 时间：2012-12-27T20:22:15.007
> 
> 标签：asp.net, fusioncharts

我在一页中有多个图表，但是在运行它时出现此错误：

```
 Chart Id is same as a JavaScript variable name. Variable naming error. Please use unique name for chart JS variable, chart-id and container id. 
```

如果我只保留一张图表，那就很高兴了。我怎样才能解决这个问题？这是我的代码：

```
public string CreateChart()
    {
        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);
        string sqlStatement = "SELECT Category, AvgNumbers FROM MyTable";
        SqlCommand cmd = new SqlCommand(sqlStatement, con);
        con.Open();
        SqlDataReader reader = cmd.ExecuteReader();
        string strXML;
        strXML = "<graph caption='Summary' subCaption='By Category' decimalPrecision='0' showNames='1' numberSuffix=' Units' pieSliceDepth='30' formatNumberScale='0'>";
        while (reader.Read())
        {
            strXML += "<set name='" + reader["Category"].ToString() + "' value='" + reader["AvgNumbers"].ToString() + "' />";
        }
        strXML += "</graph>";
       return FusionCharts.RenderChart("/FusionCharts/Pie3D.swf", "ChartID", strXML, "FactorySum", "650", "450", false, false);

    }

    protected string CreateChart_2()
    {

        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);
        string sqlStatement = "SELECT count (ID)as ID, cat_name FROM MainTable group by cat_name";
        SqlCommand cmd = new SqlCommand(sqlStatement, con);
        con.Open();
        SqlDataReader reader = cmd.ExecuteReader();
        string strXML1;
        strXML1 = "<graph caption='Summary' subCaption='By Cat' decimalPrecision='0' showNames='1' numberSuffix=' Units' pieSliceDepth='30' formatNumberScale='0'>";
        while (reader.Read())
        {
            strXML1 += "<set name='" + reader["cat_name"].ToString() + "' value='" + reader["ID"].ToString() + "' />";
        }
        strXML1 += "</graph>";
        return FusionCharts.RenderChart("/FusionCharts/Pie3D.swf", "MyChartID", strXML1, "FactorySum", "650", "450", false, false);
    } 
```

## ASP 代码：

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" Runat="Server">
   <div>
       <% =CreateChart() %>
   </div>
   <div>
       <% =CreateChart_2() %>
   </div>
</asp:Content> 
```

我已经尝试了所有方法，但到目前为止还没有找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:07:16.057

我相信在您的情况下，第 4 个参数`FusionCharts.RenderChart`是图表 ID，而不是第 2 个。尝试改变它，例如“FactorySum1”和“FactorySum2”，错误应该会消失。

# refresh - WICKET：更新自制面板

> ID：14060812
> 
> 赞同：0
> 
> 时间：2012-12-27T20:23:10.607
> 
> 标签：refresh, wicket, panel

我遇到了以下问题：如果模型更改，我的自制视频课程（扩展面板）不会更新。

这就是当前状态：我得到了一个带有 ListChoice 的“A”类。此类创建面板“descrPanel”，该面板获取一个模型，其中包含 ListChoice 的当前选定项。当用户在 ListChoice 中选择某些内容时，它会被更新（ListChoice 有一个 AjaxBehaviour，通过 target.add(descrPanel) 更新 descrPanel）：

**A类：**

```
 PropertyModel<Exercise> currExerciseModel = new PropertyModel<Exercise>(this,"selectedExercise");
    final ExerciseDescriptionPanel descrPanel = new ExerciseDescriptionPanel("descrPanelTag", currExerciseModel);

    descrPanel.setOutputMarkupId(true); 
```

在 Class ExerciseDescriptionPanel 中，我插入了我自制的 Video-Class（扩展面板）。我还插入了一个 MultiLineLabel：

**课堂练习描述面板**

```
public class ExerciseDescriptionPanel extends Panel {

private IModel<Exercise> model;
private Exercise exercise;

public ExerciseDescriptionPanel(String id, IModel<Exercise> model) {
    super(id, model);
    this.model = model;

MultiLineLabel mll = new MultiLineLabel("mll", new Model() { 
        @Override 
        public String getObject() {  
            if (ExerciseDescriptionPanel.this.getModel().getObject() != null){
                return ExerciseDescriptionPanel.this.getModel().getObject().getDescription();
            }
            else return "";
        }
    });
    add(mll);

    Video video = new Video("myVideo", new Model<Exercise>(){
        @Override 
        public Exercise getObject() {  
            if (ExerciseDescriptionPanel.this.getModel().getObject() != null){
                return ExerciseDescriptionPanel.this.getModel().getObject();
            }
            else return new Exercise();
        }

    });
    add(video);
} 
```

好吧，我不明白的是：虽然描述是根据 ListChoice 的当前选择更新的，但视频类只是忽略它并不断返回“新练习（）”，这应该只在第一次加载时返回ListChoice，当没有进行选择时。

我还为您提供视频课程：

**课堂视频**

```
 public class Video extends Panel{

private IModel<Exercise> model;

public Video(String id, IModel<Exercise> model) {
    super(id, model);

    String src = ((Exercise)model.getObject()).getVideo();
    String startPicDest = ((Exercise)model.getObject()).getPicture();

WebMarkupContainer flashSrc = new WebMarkupContainer("flashSrcTag");
    flashSrc.add(new AttributeModifier("value", "config={'playlist':['" +
                startPicDest +"',{'url':'"+ src +"','autoPlay':false}]}")); 
    this.add(flashSrc); 

    setOutputMarkupId(true);
   }
} 
```

我已经在互联网上搜索了几个小时，但没有找到任何有用的东西。希望你们能给我一些解决这个问题的方法。对此表示感谢。问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T10:11:27.333

您只需将练习从模型中拉出一次：

```
public Video(String id, IModel<Exercise> model) {
  super(id, model);

  String src = ((Exercise)model.getObject()).getVideo();
  ...
} 
```

当练习稍后发生变化时，这应该如何保持最新？

您必须获取每个渲染的实际值：

```
WebMarkupContainer flashSrc = new WebMarkupContainer("flashSrcTag") {
  public void onComponentTag(ComponentTag tag) {
    Exercise temp = (Exercise)model.getObject();
    String src = temp.getVideo();
    String startPicDest = temp.getPicture();

    tag.put("value", String.format("config={'playlist':['%s',{'url':'%s','autoPlay':false}]}", startPicDest, src)); 
  }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T22:48:51.953

**注意**：请忽略这种谦虚的尝试来帮助您，svenmeier 的回答比我的要好得多。

我不是 100% 确定这是否属实，但这是否与您`Video`作为[MarkupContainer](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/MarkupContainer.html)和[MultiLineLabel](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/markup/html/basic/MultiLineLabel.html)作为[WebComponent](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/markup/html/WebComponent.html)之间的区别有关？

the`Video`和 the`MultiLineLabel`都被添加到`ExerciseDescriptionPanel`其构造函数中的 the 中。如果我正确理解了[Wicket 文档](https://cwiki.apache.org/WICKET/lifecycle-of-a-wicket-application.html#LifecycleofaWicketApplication-ModelChanges)，只要周围`Page`并因此`ExerciseDescriptionPanel`保持相同的实例，`Video`就不会重新生成标记。它说：

> 页面通过呈现其关联的标记（位于页面旁边的 html 文件）来呈现自己。当 MarkupContainer（Page 的超类）遍历相关标记的标记流时，它会通过 id 查找附加到标记中的标记的组件。由于 MarkupContainer（在本例中为 Page）已由 onBeginRequest() 构造和初始化，因此每个标签的子标签应该在容器中可用。一旦组件被检索到，它的 render() 方法就会被调用。

也许您在更改模型后调用[modelChanged()](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/Component.html#modelChanged%28%29)可能表明必须刷新标记。`Video``ExerciseDescriptionPanel`

# javascript - 一个简单的 javascript 正则表达式反向引用

> ID：14060813
> 
> 赞同：1
> 
> 时间：2012-12-27T20:23:13.653
> 
> 标签：javascript, regex, backreference

我有以下要匹配的字符串：

```
REQS_HOME->31 
```

以下 Javascript 代码试图与此匹配：

```
pathRegExPattern = '(' + docTypeHome + ')' + '(->)' + '(\d+)';
parsedResult = pathCookieValue.match(pathRegExPattern);
cookieToDelete = docType + '_ScrollPos_' + $3;
alert(parsedResult);  // output - null 
```

假设如下：

```
docTypeHome = "REQS_HOME"
pathCookieValue = "REQS_HOME->31" 
```

首先，我没有正确调用我的匹配函数。其次，如何使用反向引用运算符访问我尝试匹配数字值的值？

我需要提取值 31。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:25:22.063

您的数字匹配部分需要在反斜杠上加倍：

```
pathRegExPattern = '(' + docTypeHome + ')' + '(->)' + '(\\d+)'; 
```

当您从字符串部分构建正则表达式时，字符串语法本身将“吃掉”一个反斜杠。因此，您使用的正则表达式只是`d+`，没有反斜杠。

“31”（或任何最终数字）将在`parsedResult[3]`. 请注意，它将是一个字符串，因此如果您需要它是一个数字，您首先需要通过`Number`构造函数或`parseInt()`或其他方式将其转换。

# php - Magento 追踪号码省略

> ID：14060814
> 
> 赞同：0
> 
> 时间：2012-12-27T20:23:20.640
> 
> 标签：php, mysql, magento

Magento 1.7.0.2 版

从以下屏幕添加跟踪号时，跟踪号未写入表“sales_flat_shipment_track”：

index.php/admin/sales_order_shipment/new/order_id/###/

'title' 和 'carrier_code' 写得很好。我们已经尝试使用“number”和“tracking_number”作为发布表单字段的名称。我已经查看了所有内容，但似乎无法找到处理此逻辑的位置以确定为什么未写入此变量。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:32:08.353

字段名称是`track_number`

# php - php strpos忽略字符

> ID：14060818
> 
> 赞同：0
> 
> 时间：2012-12-27T20:24:01.920
> 
> 标签：php, html

我正在尝试解析一个字符串，但返回的内容不正确，我试图从 doc=? 中提取问号？和幻灯片=？，但相反我得到

> **文档编号：** &doc=9729&slide=214679&#doc=9729&slide=21
> 
> **幻灯片 ID：** &slide=214679&#doc=9729

细绳 ：

> http://securefinder.com/ajax_query/delimiter.aspx?q=LNG&f=1.1&doc=9729&slide=214679&#doc=9729&slide=214679&

似乎它不接受 & 作为分隔符。

```
 <?php

    function from_to($string, $from, $to) {
        //Calculate where each substring is found inside of $string
        $pos_from = strpos($string, $from);
        $pos_to   = strpos($string, $to);

        //The function will break if $to appears before $from, throw an exception.
        if ($pos_from > $pos_to) {

        }

        return substr(
            $string,
            $pos_from, //From where the $from starts (first character of $from)
            $pos_to - $pos_from + strlen($to) //To where the $to ends. (last character of $to)
        );
    }

    $str = "http:/securefinder.com/ajax_query/delimiter.aspx?q=LNG&f=1.1&doc=9729&slide=214679&#doc=9729&slide=214679&";

         $doc_id = from_to($str, 'doc=', '&');
          $slide_id = from_to($str, 'slide=', '&');

echo 'doc id:' . $doc_id ;
echo 'slide id:'. $slide_id;

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:29:22.310

考虑使用[`prase_url()`](http://php.net/manual/en/function.parse-url.php)分解 url，然后[`parse_str()`](http://us.php.net/parse_str)在查询结果上使用，首先分解查询，然后分解`#`结果，`&`最后分解结果`=`。

这样您就不需要编写自己的解析逻辑。从这里你会得到一个很好的数组来操作而不是试图弄清楚如何操作你的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:31:15.353

尝试，使用**preg_match**

```
$str = "http:/securefinder.com/ajax_query/delimiter.aspx?q=LNG&f=1.1&doc=9729&slide=214679&#doc=9729&slide=214679&";

preg_match("/doc=(.*?)&/i", $str, $d);    
preg_match("/slide=(.*?)&/i", $str, $s);

$doc_id   =  $d[1];
$slide_id =  $s[1];

echo 'doc id:' . $doc_id ;
echo 'slide id:'. $slide_id; 
```

# c++ - 使用 C++ 下载文件

> ID：14060822
> 
> 赞同：0
> 
> 时间：2012-12-27T20:24:30.687
> 
> 标签：c++, visual-studio-2012, download

我们正在寻找一种方法来下载远程文件，而不会导致文件被标记为误报。但是，我们目前使用 Urlmon/URLDownloadToFile，这会导致文件被标记为误报，从而使我们的软件看起来很糟糕，并可能使客户决定不使用我们的软件并支持我们的竞争对手。如果有人感兴趣，我们打算用它来下载我们软件的更新。

我们不希望使用像 libcurl 这样的外部库，我们使用的是 Visual Studio 2012/C++。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T21:26:18.350

[针对多个引擎恶意软件/防病毒扫描网站](http://dottech.org/23513/7-free-online-multi-engine-antivirus-antimalware-scanners/)运行二进制文件以查看是否收到任何危险信号，然后联系恶意软件/防病毒提供商以纠正误报。然后，您可以定期重新扫描，看看您是否仍然获得更新定义的肯定。

# php - PHP CURL POST - xml响应错误

> ID：14060823
> 
> 赞同：1
> 
> 时间：2012-12-27T20:24:35.087
> 
> 标签：php, xml, curl

我正在尝试从外部服务获取 XML 响应，如下所示。使用 php Curl 发布信息并接收响应并尝试在浏览器中显示。

但是我收到以下错误：

> XML 解析错误：语法错误位置：第 1 行，第 1 列：
> `<?xml version="1.0" encoding="utf-8"?>`
> `^`

你能帮我解决这个问题的根源吗？这个错误意味着什么？

这是我的代码：

```
<?php
header ("Content-type: text/xml");
//defining $vars here...not shonw for simplicity

$url = 'http://secure.leadexec.net/leadimport.asmx/LeadReceiver';
$myvars = '&VID=' . $lead_id . '&LID=' . '2' . '&AID=' . $lead_id . '&FirstName=' . $fname . '&LastName=' . $lname .
       '&Email=' . $email . '&MoveDate='. $move_date . '&Telephone=' . $phone . '&Address=' . $address . 
       '&Website=' . $website . '&Zip=' . $zipcode . '&ServicesNeeded=' . $services . '&RequestaQuote=' . $requestquote .
       '&NumberofEmployees=' . $no_of_employees . '&CompanyName=' . $company_name;

$ch = curl_init();
curl_setopt( $ch, CURLOPT_VERBOSE, 1); 
curl_setopt( $ch, CURLOPT_URL, $url);
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt( $ch, CURLOPT_HTTPHEADER, Array("Content-Type: text/xml"));
curl_setopt( $ch, CURLOPT_HEADER, 0);
curl_setopt( $ch, CURLOPT_TIMEOUT, 40); 
curl_setopt( $ch, CURLOPT_POSTFIELDS, $myvars);
curl_setopt( $ch, CURLOPT_POST, 1);
$response = curl_exec($ch);
if(curl_exec($ch) === false)
{
    echo 'Curl error: ' . curl_error($ch);
}
else
{
    echo 'Operation completed without any errors';
}

$oXML = new SimpleXMLElement($response);

foreach($oXML->entry as $oEntry){
    echo $oEntry->title . "\n";
}
if(curl_errno($ch))
print curl_error($ch);
else
print_r($response);
curl_close($ch);
?> 
```

# import - 如何在 rebol 中组织代码？

> ID：14060825
> 
> 赞同：3
> 
> 时间：2012-12-27T20:24:41.750
> 
> 标签：import, module, code-organization, rebol

在 Rebol 中组织代码的最佳方式是什么？
（Rebol2，而不是 Rebol3。看起来，Rebol3 会有`import`。）

是否`do %myfunctions.r`只需要 -style ？没有`package`像 Java 或`#include`C 中那样的真实语句吗？
是否存在社区认可的命名约定？ [http://www.rebol.it/power-mezz/mezz/module.html](http://www.rebol.it/power-mezz/mezz/module.html)可以被视为标准吗
？

我在某处读到我也可以构建自己的模块系统。但这对我来说似乎不是一个明智的方法。

由于 Rebol3 即将完成，这个讨论注定要结束吗？;-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T00:49:19.063

我知道的一些主题使用我的[include.r](http://www.rebol.org/view-script.r?script=ladislav-include.r)，现在在 Apache 2.0 下发布。它不是一个模块系统，但您可能会发现它很有用。

# xml - importxml xpath 查询关于没有名称的表的特定信息

> ID：14060830
> 
> 赞同：0
> 
> 时间：2012-12-27T20:24:56.587
> 
> 标签：xml, xpath, google-sheets

我正在尝试从网站上的表格中提取数据到谷歌电子表格中，但不知道如何提取特定信息：

这是网址： [http ://www.zabihah.com/c/Birmingham+12](http://www.zabihah.com/c/Birmingham+12)

我想将餐厅名称、美食和地址从 Little Island Cafe 复制到 In-N-Out Grill 到谷歌电子表格的单独列中。

我尝试了 importxml 函数的各种排列，但都没有成功。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T02:22:07.890

Here is a formula to get you started

in cell A1

```
=transpose(
  ImportXML(
    "http://www.zabihah.com/c/Birmingham+12";
    "//div[@class='subtitleLink']//b"
   )
 )

```

along with this link to help you gain a better understanding of [Xpath, html attributes and tags](http://www.distilled.net/blog/distilled/guide-to-google-docs-importxml/).

# javascript - 检查是否有任何标签具有特定的内部 HTML

> ID：14060833
> 
> 赞同：4
> 
> 时间：2012-12-27T20:25:11.840
> 
> 标签：javascript, jquery, html, iterator

如果 id 为“word”的 div 中的任何跨度具有值为 v 的内部 HTML，我将如何编写一个返回 true 的 jquery 函数？对于选择器，我有：

```
$('#word span').html() 
```

我对遍历它们并返回布尔值的正确方法感到困惑，因为目前我在该 div 中有 5 个 span 标签。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T20:27:55.427

您可以使用`:contains`as in `$("#word span:contains(v)")`，但这会选择*包含*“v”的跨度，而不是将其作为精确值。 *仅返回所选第一个*`.html`元素的 html 字符串，因此您可能想要迭代并进行精确比较：*`.each`*

 *```
var count = 0;
$("#word span").each(function () {
   if ($.trim($(this).text()) === 'v') {
      count++;
   }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T20:27:33.450

# 选择`contains`器

由于您已经在使用 jQuery，您可以利用它的`.contains`方法或 ':contains' 伪选择器：

```
$("#word span").contains("word") 
```

*或者*

```
$("#word span:contains(word)") 
```

对于包含该单词的每个跨度，这不会返回 true，而是包含该单词的元素。你会留下一个匹配元素的列表，可以像这样操作：

```
var $matched = $("word span").contains("word");

$matched.each(function (i, el) {
    // do something with the el
}); 
```

# 参考

[http://api.jquery.com/jQuery.contains/](http://api.jquery.com/jQuery.contains/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-27T20:29:49.583

您可以使用`filter`方法：

```
$("#word span").filter(function () {
      return this.innerHTML === v; // in case that v is a variable
      // return $(this).text() === 'v';  
}).length; 
```*

# lucene - 如何处理 Elasticsearch 中的重复数据？

> ID：14060845
> 
> 赞同：3
> 
> 时间：2012-12-27T20:26:03.573
> 
> 标签：lucene, search-engine, elasticsearch

我已经使用父子映射来规范化数据，但据我所知，没有办法从 _parent 文档中获取任何字段。

这是我的索引的映射：

```
{
 "mappings": {
    "building": {
      "properties": {
        "name": {
          "type": "string"
        }
      }
    },
    "flat": {
      "_parent": {
        "type": "building"
      },
      "properties": {
        "name": {
          "type": "string"
        }
      }
    },
    "room": {
      "_parent": {
        "type": "flat"
      },
      "properties": {
        "name": {
          "type": "string"
        },
        "floor": {
          "type": "long"
        }
      }
    }
  }
} 
```

现在，我正试图找到最好的存储方式`flat_name`和`building_name`房间类型。我不会查询这些字段，但是当我查询其他字段（如`floor`.

将有数百万个房间，我没有太多内存，所以我怀疑这些重复的值可能会导致内存不足。目前，`flat_name`字段`building_name`具有`"index": "no"`属性，我为 _source 字段打开了压缩。

您是否有任何有效的建议来避免重复值，例如查询多个查询或从 _parent 文档中获取字段的 hacky 方法或非规范化数据是处理此类问题的唯一方法？

# matlab - 使用 libsvm 绘制决策边界

> ID：14060849
> 
> 赞同：1
> 
> 时间：2012-12-27T20:26:18.523
> 
> 标签：matlab, plot, svm, libsvm, boundary

我想为虹膜数据的分类绘制决策边界。由于决策边界是 4D 空间中的超计划，因此绘制决策边界并不简单。

根据[LIBSVM 常见问题页面](http://www.csie.ntu.edu.tw/~cjlin/libsvm/faq.html#f804)，我们应该执行以下操作以获得 w 和 b。假设目标是找到第 1 类和第 3 类的向量 w。

```
coef = [m.sv_coef(1:3,2); m.sv_coef(25:42,1)];
SVs = [m.SVs(1:3,:); m.SVs(25:42,:)];
w = SVs'*coef;
b = -m.rho(2); 
```

我想通过仅选择 2 维数据来绘制 2D 空间中的边界。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T08:38:50.923

您的代码是正确的。您应该尝试可以适当分离 2 个类的 2 维。尝试 1 和 3。

# neo4j - 可视化图形数据库

> ID：14060855
> 
> 赞同：7
> 
> 时间：2012-12-27T20:26:37.867
> 
> 标签：neo4j, visualization, cypher

假设我正在使用`neo4j`，我能想到的唯一方法是将我的模型数据可视化是生成`cypher`代码并将其粘贴到 neo4j 中`data browser`

是否有另一种（更好，更简单？）的方式可以用来创建可视化而不使用`cypher`？生成`cypher`代码本身似乎是一项足够复杂的任务。

编写测试当然是另一种确保关系设置正确的方法，但是当我学习系统时，我想直观地看到事物以确保它们按预期设置。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T21:54:36.400

这个[要点](https://gist.github.com/2652082)包含一个关于如何使用 Neo4J Graphviz 组件以 Graphviz DOT 表示法生成输出的示例，该表示法得到了一系列图形可视化软件的支持。（当然还有[Graphviz](http://www.graphviz.org/)本身）

（链接到我找到示例的原始博客文章：http: [//blog.neo4j.org/2012/05/graph-this-rendering-your-graph-with.html](http://blog.neo4j.org/2012/05/graph-this-rendering-your-graph-with.html)）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-08T12:48:26.700

有一种新的解决方案可以使用 Web 浏览器探索 Neo4j 图形数据库的内容：http: [//linkurio.us/](http://linkurio.us/)

它允许您按属性搜索节点、检查节点、扩展邻域...

Disclamer：我是 Linkurious 和 Gephi 的联合创始人。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-28T08:32:04.563

[http://www.neo4j.org/develop/visualize](http://www.neo4j.org/develop/visualize)上也列出了一些选项。

# asp.net - 是否有 Server.Transfer() 替代方法来获取用户的上一页？

> ID：14060856
> 
> 赞同：3
> 
> 时间：2012-12-27T20:26:40.440
> 
> 标签：asp.net, server.transfer

有没有办法从服务器端知道用户访问的上一页（当然是在我的网站上）？我知道如果之前使用 Transfer() 方法重定向了用户，我可以做到这一点。会话期间是否存在任何历史记录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T20:29:15.573

您可以使用[http://msdn.microsoft.com/en-us/library/system.web.httprequest.urlreferrer.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.urlreferrer.aspx)来获取以前的用户客户端页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T22:33:51.977

您在自己的网站内寻找的页面是什么？如果是这样，您可以这样做来为不同的页面启用不同的反应。如果它在您的站点之外，那么我会像 Trekstuff 提到的那样使用 UrlReferrer。

```
If Not PreviousPage Is Nothing Then
  Dim str As String = PreviousPage.AppRelativeVirtualPath
  If str = "~/(DESIRED URL)" Then
  End If
End IF 
```

# android - 删除视图键盘

> ID：14060865
> 
> 赞同：10
> 
> 时间：2012-12-27T20:27:55.863
> 
> 标签：android, view, android-keypad

> **可能重复：**
> [关闭/隐藏 Android 软键盘](https://stackoverflow.com/questions/1109022/close-hide-the-android-soft-keyboard)

我是一个初学者，并且编写了一个简单的程序来查找二次方程的根。在 EditText 字段中输入值效果很好，因为虚拟键盘会弹出，以便您输入数字。但是，键盘覆盖了显示结果的 TextView。如果用户知道，他们可以按“返回”键，然后移除小键盘，显示结果字段。但是我希望当用户在不按“返回”键的情况下触摸应用程序中的“执行”按钮时键盘消失。

我一直在研究这个，有些人建议使用 finish(); 但这不仅删除了键盘，还退出了整个程序。

那么只删除键盘，留下底层 TextView 显示的最简单方法是什么？我想将它包含在执行数学的 onClick 视图中。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T20:39:57.420

只需在 onClick 方法中添加此代码：

```
InputMethodManager imm = (InputMethodManager)mContext.getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(yourSubmiBtn.getWindowToken(), 0); 
```

# javascript - 格式化程序附加的 jQuery Select2 值可搜索

> ID：14060866
> 
> 赞同：4
> 
> 时间：2012-12-27T20:28:00.660
> 
> 标签：javascript, jquery, jquery-select2

我在[select2](http://ivaynberg.github.com/select2/index.html)上使用了格式化程序，所以我可以很好地对齐两个元素（代码/描述），但插件似乎只是在搜索描述，而不是将代码/描述视为整个文本。

可能是因为它只搜索原始内容中的`<option/>`内容，而不是稍后附加的内容。

**HTML**

```
<select class="foo">
    <option value="codex">description 1</option>
    <option value="codey">description 2</option>
    <option value="cod">description 3</option>
    <option value="code">description 4</option>
</select>​ 
```

**JS**

```
function selectBoxOptionFormat(state) {
    var originalOption = state.element;

    return "<span class='selectBoxOptionCode'>" + state.id + "</span><span>" + state.text + "</span>";    
}

$(".foo").select2({
    width:"350px",
    formatResult: selectBoxOptionFormat
}); ​ 
```

[在这里摆弄](http://jsfiddle.net/B2XAG/13/)

任何人都知道解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:57:48.937

您可以添加此代码 - 或手动将值添加到 html 中的文本

```
$('.foo option').text(function(i,v){
    return this.value + ' ' + v;
}); 
```

然后在您的格式功能中，删除该值

```
function selectBoxOptionFormat(state) {
    var originalOption = state.element;
    var txt = state.text.split(' ').slice(1).join(' ');
    return "<span class='selectBoxOptionCode'>" + state.id + "</span><span>" + txt  + "</span>";    
} 
```

[http://jsfiddle.net/wirey00/2ZLWU/](http://jsfiddle.net/wirey00/2ZLWU/)

**编辑：**

您可以使用 matcher 选项并将值添加到文本

```
$(".foo").select2({
    width:"350px",
    formatResult: selectBoxOptionFormat,
    matcher: function(term, text,v) { 
        var txt = $(v).val() + ' ' + text;       
        return txt.toUpperCase().indexOf(term.toUpperCase())==0; }
}); ​ 
```

[http://jsfiddle.net/wirey00/HudyG/](http://jsfiddle.net/wirey00/HudyG/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T20:56:47.720

在不编辑 select2 插件的情况下，您可以做一些简单的事情，比如......

将值附加到标记中的描述（或使用 jQuery）。

```
<option value="codex">description 1 [codex]</option> 
```

然后让你的“selectBoxOptionFormat”把它去掉

```
state.text.replace(/\[[^\]]+\]/, ""); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T21:15:42.833

似乎可以在 Select2 中创建自定义匹配项。我错过了他们文档页面上提到基于自定义选项属性进行搜索的可能性的部分。对不起。

```
matcher: function(term, text, opt) {
                    return text.toUpperCase().indexOf(term.toUpperCase())>=0
                        || opt.attr("value").toUpperCase().indexOf(term.toUpperCase())>=0;
} 
```

# mysql - 如何计算时间差并将结果存储在 mySQL 数据库（VB.NET）中？

> ID：14060867
> 
> 赞同：1
> 
> 时间：2012-12-27T20:28:00.890
> 
> 标签：mysql, vb.net, time, datagrid, clock

我对 VB 很陌生，我正在做一个项目来记录员工打卡和打卡的细节。我想知道如何做到这一点，所以当点击“打卡”按钮时，时间将开始记录，而当按下“打卡”按钮时，时间将停止记录。此外，一旦点击了打卡，打卡和打卡之间的小时数将被记录并存储到 mySQL 数据库中。

此信息将输出到 DataGrid 中，显示员工打卡的时间和日期。

然后，小时数将乘以预先编写的小时工资......它已经存储在我的 mySQL 数据库中的一个表中。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:55:43.793

您应该存储事件而不是结果。

**存储打卡时间以及打卡时间的一行。然后，您将需要在您的数据库或应用程序中使用一个过程，该过程将遍历行并将时钟输入与时钟输出匹配。**

*这种方法将使应用程序崩溃/终止并重新启动而不会丢失数据。*

或者，您可以将签到和签出放在同一记录（不同的列）中，只需将签出插入匹配员工和空签出的第一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T22:00:00.090

我会让时钟按钮在程序中触发一个事件，该事件为我假设您当时拥有的员工 ID 创建了一条记录。

然后，一旦单击“下班”按钮，您将触发一个事件，该事件将发送到您的数据库，并使用您正在寻找的员工 ID、有效的时钟时间和空值来提取它找到的第一条记录. 如果程序没有找到符合所有条件的东西，你将不得不处理你想要的（我会在员工登录时进行查找或其他任何事情，如果没有记录，则只允许他们访问打卡按钮存在并且只有在找到他们的 ID 记录时才允许他们使用打卡按钮）。

一旦您在内存中拥有该记录，您应该设置下班时间并使用之前写入数据库的时钟计算差异。

我将使用数据库中的存储过程来处理添加/更新/管理记录并进行所有计算以及在程序本身内的时钟输入/输出时您想要做的任何其他事情。但我认为就实际处理发生的位置而言，这只是偏好。

最明显的原因是程序可以在上下班之间关闭而不会丢失任何东西。如果您尝试在内存中跟踪所有内容，一旦程序因任何原因关闭（手动关闭/“结束任务”通过任务管理器/未处理的错误），您将丢失所有时钟。

# android - 为什么我的 ShareActionProvider 没有清晰地勾勒出来并且它的菜单是灰色的？

> ID：14060869
> 
> 赞同：0
> 
> 时间：2012-12-27T20:28:22.693
> 
> 标签：android, android-actionbar, shareactionprovider

我在深色操作栏 ( )上使用`ShareActionProvider`在代码中定义的 ，而不是 xml 。`Theme.Holo/DeviceDefault.Light.DarkActionBar`

这就是我所看到的：

![在此处输入图像描述](../Images/9791cebc94e9d687bfbd40efb4ba26a8.png)

请注意，几乎没有可见的提示表明共享图标和信使图标属于一起。周围的盒子是深色而不是浅灰色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:28:22.693

在定义`ShareActionProvider`in 代码时，尤其是当操作栏具有不同的主题时（在这种情况下是因为它是黑暗的），您需要使用从操作栏获得的**主题上下文**，而不仅仅是常规上下文：

```
final Context themedContext = context.getActionBar().getThemedContext();
ShareActionProvider ap = new ShareActionProvider(themedContext);
menuItem.setActionProvider(ap); 
```

感谢亚当鲍威尔指出这一点。

# python - 扭曲的 adbapi.ConnectionPool 没有做任何事情

> ID：14060871
> 
> 赞同：2
> 
> 时间：2012-12-27T20:28:25.947
> 
> 标签：python, twisted

我尝试使用下面的代码：

```
from twisted.enterprise import adbapi   

    dbpool = adbapi.ConnectionPool(
                        "MySQLdb",
                        db='test_db',
                        port='3306',
                        user='tester',
                        passwd='some_pass',
                        host='localhost',
                        cp_reconnect=True
                    )

    dbpool.runQuery("INSERT INTO `htp_test` VALUES(NULL, 25, 'test')") 
```

但是数据没有插入mysql，也没有显示错误。数据连接良好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T20:44:50.297

你需要启动反应堆。中的“a”`adbapi`代表“异步”，就像扭曲中的其他所有内容一样。当你调用时`ConnectionPool.runQuery()`，你已经要求twisted在后台做一些工作，当它完成后，在延迟返回的中给你那个动作的结果`runQuery`。

但是为了让twisted“做”任何事情，你有义务开始它的事件循环。在最简单的情况下，您可以：

```
from twisted.internet import reactor
from twisted.enterprise import adbapi 

def got_result(value):
    # do something, value won't be interesting on insert statements, though
    print "Horray"    
    # since this is all we want to do, stop the reactor
    reactor.stop()

d = dbpool.runQuery("INSERT INTO `htp_test` VALUES(NULL, 25, 'test')")
d.addCallback(got_result)

reactor.run() 
```

# vb.net - 通过 case 语句的每个循环

> ID：14060873
> 
> 赞同：0
> 
> 时间：2012-12-27T20:28:27.937
> 
> 标签：vb.net, visual-studio-2010

我有这段代码，我正在尝试删除 case 0 - 7 全为零的行。是做一个 for 循环，还是使用 if-then 更好？：

```
tmpEditRow.BeginEdit()

            Select Case a
                Case 0
                    tmpEditRow("Qsold / QoH1") = QtySold & " / " & QtyOH
                Case 1
                    tmpEditRow("Qsold / QoH3") = QtySold & " / " & QtyOH
                Case 2
                    tmpEditRow("Qsold / QoH4") = QtySold & " / " & QtyOH
                Case 3
                    tmpEditRow("Qsold / QoH7") = QtySold & " / " & QtyOH
                Case 4
                    tmpEditRow("Qsold / QoH8") = QtySold & " / " & QtyOH
                Case 5
                    tmpEditRow("Qsold / QoH10") = QtySold & " / " & QtyOH
                Case 6
                    tmpEditRow("Qsold / QoH12") = QtySold & " / " & QtyOH
                Case 7
                    tmpEditRow("Qsold / QoH14") = QtySold & " / " & QtyOH
             End Select
                    tmpEditRow.EndEdit() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:39:11.357

为什么不使用变量进行计算，然后检查 0 值

**更新：**如果 QtyOH 是每个案例的当前值，`a`那么它会变得更加简化：

```
If QtyOH <> 0 Then
    tmpEditRow.BeginEdit()

    Dim bucket as String = ""
    Select Case a
        Case 0
            bucket = "1"
        Case 1
            bucket = "3"
        Case 2
            bucket = "4"
        .
        .
        .
    End Select

    tmpEditRow("Qsold / QoH" & bucket) = QtySold & " / " & QtyOH
    tmpEditRow.EndEdit()
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:27:02.470

使用`Select Case`没问题。但是，我更喜欢组织代码，以便尽可能将实际计算合并到单个块中（除非性能/优化/资源问题另有要求），以提高可读性和维护性。

```
tmpEditRow.BeginEdit()

' Note: Assuming variables [QtySold] and [QtyOH] are numeric
' values, each set appropriately for whatever variable
' [a] is meant to indicate.

' [ColKey] is the column of interest within [tmpEditRow], as
' appropriate per [a].
Dim ColKey As String = Nothing
Select Case a
    Case 0: ColKey = "Qsold / QoH1"
    Case 1: ColKey = "Qsold / QoH3"
    Case 2: ColKey = "Qsold / QoH4"
    Case 3: ColKey = "Qsold / QoH7"
    Case 4: ColKey = "Qsold / QoH8"
    Case 5: ColKey = "Qsold / QoH10"
    Case 6: ColKey = "Qsold / QoH12"
    Case 7: ColKey = "Qsold / QoH14"
End Select

' The actual computation, right here, via [ColValue].
' [ColValue] is the text to place at [ColKey] of [tmpEditRow].
Dim ColValue As String = Nothing
If QtyOH = 0 Then
    ColValue = ""
Else
    ColValue = QtySold & " / " & QtyOH
End If    
tmpEditRow(ColKey) = ColValue

tmpEditRow.EndEdit() 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-27T20:36:27.470

你可以把它浓缩成类似的东西

```
if ( a == 0 )
    tmpEditRow("Qsold / QoH1") = QtySold & " / " & QtyOH
else if ( a == 1 )
    tmpEditRow("Qsold / QoH3") = QtySold & " / " & QtyOH    
else if ( a == 3 )
    tmpEditRow("Qsold / QoH7") = QtySold & " / " & QtyOH
else if (a == "2|[5-7]") //regex comparison
    tmpEditRow("Qsold / QoH" + (a*2) ) = QtySold & " / " & QtyOH
else
    tmpEditRow.EndEdit() 
```

**编辑**

我刚刚注意到“QoH_”部分不是通过乘以 2 来创建的。在任何情况下，您仍然可以使用 if/else 块来执行此操作。

# javascript - onsubmit 属性无法打开新窗口

> ID：14060875
> 
> 赞同：1
> 
> 时间：2012-12-27T20:28:32.310
> 
> 标签：javascript, forms, redirect, window.open, onsubmit

这里有一个关于表单的快速问题。我在网上搜索过，似乎无法弄清楚为什么我实施的方法不起作用。

这个想法很简单。我在 JSP 页面中有一个表单。该表单定义了一个“onsubmit”属性，用于打开带有一些参数的不同 jsp。在表单内部，我有几个按钮，其中一个调用 JavaScript 函数，该函数依次提交表单（在某些条件下）。

这是代码：JSP：

```
...
<form id='testForm' onsubmit="window.open('another.jsp')">
  <input type="button" onclick="callJsFunction()" />
  ..
</form> 
```

JavaScript：

```
function callJsFunction() {
  if (launchNow == 1) {
    var form = document.getElementById("testForm");
    form.submit();
  }
} 
```

如果我将 target="_blank" 添加到表单定义中，则会打开一个新窗口，但不会打开我想要打开的 jsp。最终，我希望表单执行一个 servlet 操作（使用 action 属性），然后打开新的 jsp。有任何想法吗？？？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:54:20.373

我正在寻找的解决方案在这里找到：[Javascript Post on Form Submit open a new window](https://stackoverflow.com/questions/178964/javascript-post-on-form-submit-open-a-new-window)

我可以将目标设置为我定义并打开的窗口，而不是设置 target="_blank"。在我的 servlet 中，我重定向到所需的 jsp，它会出现在新的弹出窗口中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:34:24.627

```
<form id='testForm' action='another.jsp' target='_blank'> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T21:30:11.540

我可能错了，但这就是你要找的吗？

请在此链接查看工作演示：http: [//fiddle.jshell.net/vf6AC/show/light/](http://fiddle.jshell.net/vf6AC/show/light/)（不要在 jsfiddle 中工作）

```
<form action="http://google.com" id="testForm">
    <input type="submit" />
</form>​

<script type="text/javascript">
var testForm = document.getElementById("testForm");

testForm.onsubmit = function(e){
    window.open("http://stackoverflow.com");

    return true;
};​
</script> 
```

在此处查看 jsfiddle：http: [//jsfiddle.net/vf6AC/](http://jsfiddle.net/vf6AC/)

# html - css在方形图像下创建圆形阴影

> ID：14060879
> 
> 赞同：2
> 
> 时间：2012-12-27T20:28:43.427
> 
> 标签：html, css, image, shadow

有没有办法在正方形图像下创建圆形阴影效果，例如图像中的那个？

我也在看[这个网站](http://nicolasgallagher.com/css-drop-shadows-without-images/demo/)，上面说这种效果是可能的，但是他们对代码实现的描述真的很模棱两可。

![在此处输入图像描述](../Images/124328deff71294d63424d5bf7a5c449.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T22:12:23.090

我想我想通了。我基本上使用了 Box Shadow 的 spread 属性来缩小它的宽度，使其小于与之关联的元素。它是此代码中的第四个 px 元素：

```
box-shadow: 0px 30px 40px -25px rgba(0, 0, 0, 1); 
```

然后我将阴影垂直向下移动，直到我对它显示的阴影量感到满意。

[在这里演示](http://jsfiddle.net/6yYaY/)

# javascript - 简单的运动计算给出错误的结果

> ID：14060881
> 
> 赞同：0
> 
> 时间：2012-12-27T20:28:55.433
> 
> 标签：javascript, numbers

我有这个功能。

```
 Calculations.add(this, //CONTEXT
        function () { //CALUCATE
            this.position.x += (this.movementSpeed.x / 10);
        }, 
        function () { //HAVE CALCULATED
            return (this.position.x === (tempX + this.movementSpeed.x));
        }
    ); 
```

我已经运行了结果，但有时结果是错误的。因为我知道，如果它计算 10 次，那`HAVE CALCULATED`应该是真的。

但有时它永远不会......这会杀死我的应用程序。

让我们说结果应该给出 138，然后在计算之后它给我 138.000000000006 这不是 138 并且`HAVE CALCULATED`是假的..

我该如何管理这个=我不能使用回合，因为如果最终结果是这样的话，它应该能够返回 138.5。

希望你能理解我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:35:11.273

始终浮点 = 比较应该像这样进行：

`Math.abs( a - b ) < 1e-6`

`1e-6`您预先确定的任意误差阈值在哪里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:33:18.290

您永远不应该以这种方式比较浮点值。（评论中Waleed Khan的链接很好地解释了为什么会发生这种情况）

相反，您可以执行以下操作来检查 and 的相等`a`性`b`：

```
if (a < b + 0.0001 && a > b - 0.0001) {
  // values are "equal"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T20:37:41.623

您可以从SO 上的另一个[答案](https://stackoverflow.com/questions/246193/how-do-i-round-a-number-in-javascript)四舍五入到一定数量的数字，使用如下内容：

```
function roundNumber(n, digits) {
  var multiple = Math.pow(10, digits);
  return Math.round(n * multiple) / multiple;;
} 
```

这样你就不需要花哨的比较。

# amazon-web-services - 用于外部访问的 S3 CORS

> ID：14060882
> 
> 赞同：0
> 
> 时间：2012-12-27T20:29:08.457
> 
> 标签：amazon-web-services, amazon-s3, cors, amazon-cloudfront, amazon-route53

我用这个撞到了墙上，希望这是一个愚蠢的疏忽，有人可以帮忙。

我正在使用一个视网膜 jquery 插件来加载视网膜图形（顺便说一句，效果很好！）；但是，它正在寻找附加了“_2x”的文件——如果它们托管在我们的服务器上，这些文件存在并且工作得很好。

问题出现在 Amazon S3 上，它允许我直接链接到文件；但是，当它尝试查找带有retina 后缀的文件时，会出现以下错误：

```
XMLHttpRequest cannot load http://cloud.mfivem.com/ui/bg/bg_linen_2x.png. Origin http://beta.mfivem.com is not allowed by Access-Control-Allow-Origin. 
```

现在，原始文件存在，视网膜版本也存在 - 这些文件是：

```
http://cloud.mfivem.com/ui/bg/bg_linen.png
http://cloud.mfivem.com/ui/bg/bg_linen_2x.png 
```

我还尝试了文件的后门：

```
http://mfivem.s3.amazonaws.com/ui/bg/bg_linen_2x.png 
```

这是我为存储桶配置的 CORS 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
<CORSRule>
    <AllowedOrigin>http://test.mydomain.com</AllowedOrigin>
    <AllowedMethod>GET</AllowedMethod>
    <AllowedMethod>PUT</AllowedMethod>
    <AllowedMethod>POST</AllowedMethod>
    <AllowedHeader>*</AllowedHeader>
</CORSRule> 
```

我非常感谢任何建议，并且考虑到启用视网膜的网站的爆炸式增长，我相信其他成员将来会发现这很有帮助。

谢谢阅读！

** 编辑的 URL 注释 **

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-28T19:19:30.737

好吧我想通了...

我必须将**HEAD**添加到 AllowedMethod，但更重要的是......我必须更改文件的名称并重新上传它们。

我认为在 S3 和 Cache 之间没有正确提取文件；但是，在重命名文件、修改 allowedmethod 以包含 head 之后，它现在可以完美运行。

真的很兴奋，因为现在我可以从我们的自定义 CNAME 服务器提供文件，使用 Cloudfront + S3 掩盖又长又丑的 s3 地址。

如果您对此有任何问题，请发表评论，我会尽力提供帮助！

# c# - 如何在datatemplate的末尾添加文本框

> ID：14060883
> 
> 赞同：0
> 
> 时间：2012-12-27T20:29:10.870
> 
> 标签：c#, wpf, listview, textblock, itemtemplate

我有一个`ListView`给我正确信息的。我想在每行的末尾应用两个`TextBoxes`用户可以编辑的内容，有人可以指导我吗？

这是我想看到的结果`John Smith textbox textbox`。

下面是我的代码：

```
<ListView.ItemTemplate>
    <DataTemplate>
        <Label x:Name="lblPerson">
            <Label.Content>
                <TextBlock>
                    <TextBlock.Text>
                        <MultiBinding StringFormat="{}{0}   {1}">
                            <Binding Path="FName" />
                            <Binding Path="LName" />
                         </MultiBinding>
                    </TextBlock.Text>
                </TextBlock>
            </Label.Content>
        </Label>
    </DataTemplate>
</ListView.ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:36:56.567

我不知道我是否正确理解了您的问题，但是在 DataTemplate 中，您可以使用 StackPanel 或 DockPanel 并放置 Label 和任何其他可以放置的东西，如下所示：

```
<ListView.ItemTemplate>
<DataTemplate>
 <StackPanel Orientation="Horizontal">
    <Label x:Name="lblPerson">
        <Label.Content>
            <TextBlock>
                <TextBlock.Text>
                    <MultiBinding StringFormat="{}{0}   {1}">
                        <Binding Path="FName" />
                        <Binding Path="LName" />
                     </MultiBinding>
                </TextBlock.Text>
            </TextBlock>
        </Label.Content>
    </Label>
    <TextBox Text="Something">
    <TextBox Text="{Binding SomeField}">
  </StackPanel>
</DataTemplate>
</ListView.ItemTemplate> 
```

这是你要问的吗？问候

# ios - ios popToRoot在使用块时不释放内存

> ID：14060892
> 
> 赞同：0
> 
> 时间：2012-12-27T20:29:34.723
> 
> 标签：ios, objective-c-blocks, poptoviewcontroller

我花了很多时间来解决为什么当我的视图控制器从堆栈中弹出时没有被释放以获取内存。这是我正在使用的悬崖笔记版本：

```
- (IBAction)submitTurn:(UIButton *)sender {
    ...
    [imageFile saveInBackgroundWithBlock:^(BOOL succeeded, NSError *error){
        if (!error){
            ...
            [game saveEventually];
            ...
            [push sendPushInBackground];
            }
        }
        else{
            NSLog(@"Error submitting turn: %@ %@", error, [error userInfo]);
            [[[UIAlertView alloc] initWithTitle:@"Error Saving Game" message:@"Try again later." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil] show];
        }
    } progressBlock:nil];
    [self.navigationController popToRootViewControllerAnimated:YES];
} 
```

当我运行我的应用程序并继续返回此视图控制器并提交轮到我时，仪器/泄漏显示我有此视图控制器的多个实时实例。但是，当我注释掉所有图像/游戏/推送保存并弹出视图时，内存就会被释放，并且我永远不会拥有多个实时实例。

我还尝试了这个以确保在 poppingToRoot 之前保存并完成所有内容。

```
- (IBAction)submitTurn:(UIButton *)sender {
    ...
    [imageFile saveInBackgroundWithBlock:^(BOOL succeeded, NSError *error){
        if (!error){
            ...
            [game saveEventually:^(BOOL succeeded, NSError *error) {
                ...
                    [push sendPushInBackgroundWithBlock:^(BOOL succeeded, NSError *error) {
                        [self.navigationController popToRootViewControllerAnimated:YES];
                    }];
                }
            }];
        }
        else{
           ...
        }
    } progressBlock:nil];
} 
```

仍然，没有骰子。如何在不留下工件的情况下弹回根目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:15:24.103

您可能在访问`self`.

尝试这个：

```
__unsafe_unretained YourClass* self_ptr = self; 
```

在进入区块之前，在区块内使用`self_ptr`而不是`self`.

# python - 用零替换python数组中的无

> ID：14060894
> 
> 赞同：2
> 
> 时间：2012-12-27T20:29:39.070
> 
> 标签：python, numpy, matplotlib, nonetype, map-function

我刚刚将两个长度不等的数组与命令一起加入：

```
allorders = map(None,todayorders, lastyearorders) 
```

在今天的订单没有值的地方给出“无”（因为今天的订单数组没有那么长）。

但是，当我尝试将 allorders 数组传递到 matplotlib 条形图中时：

```
 p10= plt.bar(ind, allorders[9],   width, color='#0000DD', bottom=allorders[8]) 
```

..我收到以下错误：

```
TypeError: unsupported operand type(s) for +=: 'int' and 'NoneType' 
```

那么，matplotlib 有没有办法不接受任何数据类型？如果没有，如何在我的 allorders 数组中用零替换“Nones”？

如果可以，因为我是 Python 新手（来自 R 社区），请提供从头到尾的详细代码，我可以使用/测试。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-27T20:30:36.117

使用列表推导：

```
allorders = [i if i[0] is not None else (0, i[1]) for i in allorders] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-11-01T19:29:32.067

使用 numpy：

```
import numpy as np
allorders = np.array(allorders) 
```

由于 Nones，这会创建一个对象数组。我们可以用零替换它们：

```
allorders[allorders == None] = 0 
```

然后将数组转换为正确的类型：

```
allorders.astype(int) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-27T20:47:04.793

由于听起来您希望这一切都在`numpy`，因此您的问题的直接答案实际上只是一个旁白，而*正确*的答案直到“当然……”段落才出现。

如果您考虑一下，您将使用`map`第`None`一个参数作为 a `zip_longest`，因为 Python 没有`zip_longest`. 但它*确实*有一个，在`itertools`- 它允许您指定一个自定义`fillvalue`. 因此，您可以通过以下方式一步完成所有操作[`izip_longest`](http://docs.python.org/2/library/itertools.html#itertools.izip_longest)：

```
>>> import itertools
>>> todayorders = [1, 2]
>>> lastyearorders = [1, 2, 3]
>>> allorders = itertools.izip_longest(todayorders, lastyearorders, fillvalue=0)
>>> list(allorders)
[(1, 1), (2, 2), (0, 3)] 
```

这仅填充显示为较短列表的额外值`0`的s；`None`如果你想用 a替换*every* ，你必须按照 Martijn Pieters 的方式来做。但我认为这就是你想要的。`None``0`

另外，请注意，`list(allorders)`最后：与 中的`izip_longest`大多数东西一样`itertools`，返回一个迭代器，而不是一个`list`. 或者，用您可能更熟悉的术语来说，它返回一个“惰性”序列而不是“严格”序列。如果您只是要迭代结果，那实际上会更好，但是如果您需要将它与需要 a 的某些功能一起使用`list`（例如以人类可读的形式打印出来 - 或访问`allorders[9]`，如您的示例中所示），您需要先显式转换它。

如果您实际上想要 a`numpy.array`而不是 a `list`，则可以直接到达那里，而无需先经过 a `list`。（如果你要做的只是`matplotlib`它，你可能*确实*想要一个`array`。）最清楚的方法是只使用`np.fromiter(allorders)`而不是`list(allorders)`. 您可能想要传递一个明确的`dtype=int`（或任何适当的）。而且，如果您知道大小（您知道它是`max(len(todayorders), len(lastyearorders))`），在某些情况下，传递显式`count`也更快或更简单。

当然，如果任何`numpy`东西听起来很吸引人，你可能应该首先留在里面`numpy`，而不是使用`map`or `izip_longest`：

```
>>> todayorders.resize(lastyearorders.shape)
>>> allorders = np.vstack(todayorders, lastyearorders).transpose() 
```

不幸的是， mutates `todayorders`，据我所知，等效的不可变函数`numpy.resize`并没有给你任何“零扩展”的方法，而是重复这些值。希望我错了，有人会建议简单的方法，但否则，你必须明确地这样做：

```
>>> extrazeros = np.zeros(len(lastyearorders) - len(todayorders), dtype=int)
>>> allorders = np.vstack(np.concatenate((todayorders, extrazeros)), lastyearorders)
>>> allorders = allorders.transpose()
array([[ 1,  1],
       [ 2,  2],
       [ 0,  3]]) 
```

当然，如果你做了很多这样的事情，我会编写一个`zeroextend`函数，它接受一对数组并扩展一个以匹配另一个（或者，如果你不只是处理一维，将每个轴上较短的一个扩展到做另一个）。

无论如何，除了比使用`map`,`izip_longest`等更快和使用更少的临时内存之外，这还意味着您最终会得到一个正确的数组`dtype`（`int`而不是`object`）——这意味着您的结果也使用更少的长期内存，从那时起你所做的一切也将更快，使用更少的临时内存。

为了完整性：*可以*`pyplot`处理`None`值，但我认为这不是您想要的。例如，您可以将其方法转换为的`Transform`对象传递给它。但这实际上与 Martijn Pieters 的答案相同，但更加冗长，除非您需要绘制大量此类数组，否则根本没有优势。`transform``None``0`

# java - 网站上的小程序似乎讨厌包

> ID：14060897
> 
> 赞同：0
> 
> 时间：2012-12-27T20:29:49.023
> 
> 标签：java, applet, classnotfoundexception

所以我制作了一个 Applet（不是 JApplet）并继续将它上传到我的网站。我将所有 .class 文件放入一个包中，将项目从 eclipse 导出到 .jar，然后将其上传到我网站的 public_html 文件夹。

在我的 HTML 代码中，我把

```
<applet ARCHIVE="BallShooter.jar" CODE="BallShooter" width=500 height=500> </applet> 
```

但是，似乎我一直收到错误“ClassNotFoundException”如果我在没有包的情况下重新上传.jar，它工作正常。有人可以向我解释如何解决这个问题吗？

对于那些想知道的人，这是网站中事物的结构

```
/public_html/myAppletJar/myPackage/a.class  
/public_html/myAppletJar/myPackage/b.class  
/public_html/myAppletJar/a.png  
/public_html/myAppletJar/b.png 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:22:00.857

检查所有这些点：

*   如果 applet 类在`BallShooter`，并且在包`kikiotsuka`中，那么它的源代码必须以该行开头`package kikiotsuka;`。类的全名是这样`kikiotsuka.BallShooter`。
*   因此，在 jar 文件中，您应该`kikiotsuka`在根目录下有一个名为的目录，并且该目录必须包含一个名为`BallShooter.class`
*   因为类的名称是`kikiotsuka.BallShooter`，所以小程序 HTML 元素的 code 属性必须包含：`code="kikiotsuka.BallShooter" width=...`

# java - 选择组合框项目时如何在文本字段上设置焦点

> ID：14060899
> 
> 赞同：0
> 
> 时间：2012-12-27T20:29:58.177
> 
> 标签：java

```
private void cbdmnstatItemStateChanged(java.awt.event.ItemEvent evt) {
    if(evt.getsource()==getSelectedItem){
        tf1.setFocus(true);
    }        
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:38:00.127

使用此方法将焦点设置在您的文本字段上。

[javax.swing.JComponent#requestFocus()](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JComponent.html#requestFocus%28%29)

在您的情况下，它看起来像：

```
private void onStateChange(java.awt.event.ItemEvent evt) {
    tf1.requestFocus();
} 
```

**更新** 这对你有用，如果你的文本字段和组合框项目是静态的，如果它们是动态的，它会变得有点复杂。

```
 private void onStateChange(java.awt.event.ItemEvent evt) {
        Object selectedItem = evt.getItem();
        if (selectedItem.equals("X")) {
            jTextField1.requestFocus();
        } else if (selectedItem.equals("Y")) {
            jTextField2.requestFocus();
        } else if (selectedItem.equals("Z")) {
            jTextField3.requestFocus();
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:43:56.287

基本上你应该是这样的（一个简单的例子）：

```
public class TestApp {

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            JFrame f = new JFrame();
            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            f.setSize(300, 300);
            Container pane = f.getContentPane();
            final JTextField field = new JTextField();
            pane.add(field);
            pane.add(new JTextField(), BorderLayout.NORTH);
            JComboBox b = new JComboBox();
            b.addItem("Don't focus");
            b.addItem("Focus");
            b.addItemListener(new ItemListener() {
                @Override
                public void itemStateChanged(ItemEvent e) {
                    if(e.getStateChange() == ItemEvent.SELECTED) {
                        if("Focus".equals(e.getItem())) {
                            field.requestFocus();
                        }
                    }
                }
            });
            pane.add(b, BorderLayout.SOUTH);
            f.setLocationRelativeTo(null);
            f.setVisible(true);
        }
    });
} 
```

# objective-c - NSString UTF8 编码的问题

> ID：14060900
> 
> 赞同：2
> 
> 时间：2012-12-27T20:30:03.780
> 
> 标签：objective-c, ios, nsstring

我正在读取蓝牙特性并将其保存到下面名为 temp 的字符串中。

```
NSString *temp = [[NSString alloc] initWithData:characteristic.value encoding:NSUTF8StringEncoding]; 
```

出于某种原因，当characteristic.value 是一个空字符串时，temp 会使用值@"" 创建，这是有道理的，但它的temp.length 显示为17。

关于特征值的详细信息：

```
(lldb) po characteristic.value
(NSData *) $0 = 0x1f5d9c70 <00000000 00000000 00000000 00000000 0000>
(lldb) po characteristic.value.length
error: property 'length' not found on object of type 'NSData *'
error: 1 errors parsing expression 
```

当我尝试确定 temp 是否为空字符串时，逻辑不起作用

```
if([temp isEqualToString:@""]){ 
```

同样奇怪的是，当我断点并使用终端打印对象时，我得到了这个......

```
(lldb) po temp
(NSString *) $0 = 0x1ddcf880 [no Objective-C description available]
(lldb) po temp.length
error: property 'length' not found on object of type 'NSString *'
error: 1 errors parsing expression 
```

有谁知道这个字符串是怎么回事？

# c++ - 在运行时添加自定义 QWidget

> ID：14060903
> 
> 赞同：1
> 
> 时间：2012-12-27T20:30:22.817
> 
> 标签：c++, qt, widget, qwidget

我正在尝试实现自定义小部件层次结构： `QMainWindow`-> `QFrame`-> `MyWidget`-> `QFrame`->`MySubWidget`

这是 MyWidget 类的样子：

```
 class MyWidget : public QWidget {
        Q_OBJECT
    public:
        MyWidget(QWidget *parent = 0, ...);
        ...
    public slots:
        void SlotFunction(int i);
        ...
    private:
        MySubWidget *sub_w;
        QFrame *sub_frame;
        ...
    } 
```

如果我尝试在 MyWidget 构造函数期间创建 MySubWidget，则所有 MySubWidget 元素都会按预期显示：

```
 MyWidget::MyWidget (...) : QWidget(parent) {
        ...
        sub_frame = new QFrame(this);
        ...
        sub_w = new MySubWidget(sub_frame); // commented out on a runtime test
    } 
```

但是，如果我尝试在运行时添加子小部件，则 sub_frame 保持空白。即信号反应：

```
 void MyWidget::SlotFunction(int i) {
        sub_w = new MySubWidget(sub_frame); // update, repaint, show and hide methods aren't helphul
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T21:15:12.123

我知道这是一个老问题，但我遇到了一个非常相似的问题，结果证明是缺少对 QWidget::show() 的调用。也许这也是你的问题？

我的问题是：[动态添加从 QWidget 继承的实例](https://stackoverflow.com/questions/19575988/dynamically-add-instance-inherited-from-qwidget)

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T23:13:19.413

你达到你的功能了吗？

在创建put`new`实例之前，在函数顶部：`MySubWidget`

```
qDebug() << Q_FUNC_INFO; 
```

插槽是否正确连接？

Qt 会通过运行时警告让您知道它是否无法连接插槽。查看 Qt Creator 中显示的调试输出，它可能会提到从未到达插槽的原因。

是`subframe`可见的吗？

如果您的对象的父对象不可见，则显示或隐藏子对象只会在显示父对象时影响它。

希望有帮助。祝你好运。

# html - 这种定位是否可行 - 用户友好的网站结构和定位 - 无需 javascript

> ID：14060905
> 
> 赞同：1
> 
> 时间：2012-12-27T20:30:26.637
> 
> 标签：html, css, position, margin, master-pages

所以我想要实现的是 1000px 主屏幕和右侧的广告空间

如果访客屏幕宽度小于 1160 广告屏幕将不可见，除非访客向右滚动

但我想根据主屏幕而不是广告位置和主屏幕的总和来调整内容

如果没有 javascript，这种定位可能吗？

好的图片在这里

![在此处输入图像描述](../Images/9f38c6b927124165f942bdc18fb7f10d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:34:45.647

您需要查看[媒体查询](http://www.w3.org/TR/css3-mediaqueries/)，尤其是[宽度功能](http://www.w3.org/TR/css3-mediaqueries/#width)。

这允许您根据可用宽度自定义 CSS。

```
@media screen and (min-width: 1160px) { … } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T20:37:21.933

可以使用 CSS`@media`我更喜欢使用百分比，但这里有一个例子：

```
#page{
    width:80%;
    margin:0% 9% 0% 10%;
}
#left{
    display:inline-block;//alternative needed for ie 8 and below
    width:80%;
}
#right{
    width:19%;
    display:inline-block;
}

@media screen only and (min-width:1160px){
    #right{
        display:none;
    }
    #left{
        width:100%;
    }
} 
```

如果用户的屏幕分辨率宽度小于 1160px；元素的 CSS 属性将被更改。

# antlr - 一条规则中的多个字符串模板

> ID：14060907
> 
> 赞同：2
> 
> 时间：2012-12-27T20:30:34.517
> 
> 标签：antlr, stringtemplate

作为 ANTLR 的新手，我试图弄清楚字符串模板是如何工作的。我想根据一个非常简单的输入文件生成一段 Java 代码。由于其灵活的概念，我想使用（字符串）模板。在 Java 中，通常必须生成成员声明，​​在其他地方初始化它们，甚至在其他地方使用它们。标识符名称应匹配并因此重复。这意味着这里和那里需要很少的模板实例化。当然可以做到，但我似乎无法找出方法，也许我错过了一些重要的“线索”？

我写了一个测试程序来研究这个概念。它需要一个简单的输入文件：

```
red = #FF0000
green = #00FF00
blue = #0000FF 
```

并且应该产生类似于以下输出的内容：

```
class MyColors {
  // Class members
  public java.awt.Color red;
  public java.awt.Color green;
  public java.awt.Color blue;

  // Constructor
  /* Question: How to access the right initializer value here?!? The values are not accessible at this level of the grammar*/
  public MyColors() {
    red = java.awt.Color.getColor("#FF0000");
    green = java.awt.Color.getColor("#00FF00");
    blue = java.awt.Color.getColor("#0000FF");
  }
}; 
```

...根据输入填写构造函数中的变量和初始化程序的名称。

我定义的语法如下：

```
grammar Test;

options {
    output=template;
}

colors: (a+=def)+ -> colorClassDef(name={$a});

def: ident '=' name -> colorDef(id={$ident.text}, name={$name.text});

ident: ID;

name: ID;

ID: ('a'..'z'|'A'..'Z'|'#'|'0'..'9')+;
WS: (' '|'\t'|'\r'|'\n')+ { skip(); }; 
```

模板定义如下：

```
group Test;

colorClassDef(name, id) ::= <<
class MyColors {
// Class members
<name:{ v | public java.awt.Color <v>;
}>
// Constructor
/* Question: How to access the initializer value here?!? */
public MyColors() {
<name:{ v | <v> = java.awt.Color.getColor("<id>");
}>
}
};
>>

/* How to return both id and name here seperately, as ID should go into the declaration and name should to into the init? */
colorDef(id, name) ::= <<
<id>
>> 
```

谁能建议我如何让 <id> 和 <name> 脱离规则“def”以便将它们包含在生成代码的正确部分中？

我发现了多个关于多个返回值的问题，例如[Returning multiple values in ANTLR rule](https://stackoverflow.com/questions/3272041/returning-multiple-values-in-antlr-rule)和[antlr2 return multiple values](https://stackoverflow.com/questions/8491388/antlr2-return-multiple-values)，但没有一个包含字符串模板。我什至买了“这本书”并通过 java 字节码生成器按我的方式工作，但在那里没有找到我的答案。所有示例似乎都为一位输入生成一位输出。（不过没有遗憾，这本书非常适合睡前阅读；-）

谁能指出我缺少什么线索？解决此问题的最合适方法是什么？一些示例代码和指向文档的指针将不胜感激。

谢谢，

马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:00:52.117

> 谁能建议我如何获取和退出规则'def'以便将它们包含在生成代码的正确部分中？

这是一种直接的以 Java 为中心的方法来获得您想要的东西。它不像我想要的那样优雅（我认为还有改进的空间），但我认为它可以轻松解决问题。我重命名了一些东西，但我认为我保持了你方法的精神。

首先，模板。请注意，模板`colorClassDef`需要由语法确定的所有信息：每个 id、每个名称以及每个 id 与其对应名称之间的关联。这是从模板访问所有内容的方法之一：

```
group Colors;

colorClassDef(ids, colors) ::= <<
class MyColors {
// Class members
<ids:{ id | public java.awt.Color <id>;
}>

// Constructor
public MyColors() {
<ids:{ id | <id> = java.awt.Color.getColor("<colors.(id)>");
}>
}
};
>> 
```

在这里，我使用参数`ids`来存储所有传入 id 的列表，并使用参数`colors`来存储将 id（键）与名称（值）相关联的映射。对于构造函数部分，ST 使用`colors`“间接属性查找”语法访问 id 的名称：`<colors.(id)>`. 由于`colors`是映射，`id`用作映射的键​​并将值写入模板。

模板`colorClassDef`处理一切，所以我删除了 template `colorDef`。

第二，语法。它需要提供 ids 和 color map。这是这样做的一种方法：

```
grammar Colors;

options {
    output=template;
}

colors 
@init {
        java.util.LinkedList<String> ids = new java.util.LinkedList<String>(); 
        java.util.HashMap<String, String> colors = new java.util.HashMap<String, String>();
    }
    : (ident '=' name 
            {ids.add($ident.text); colors.put($ident.text, $name.text);}
      )+ EOF 
        -> colorClassDef(ids={ids}, colors={colors})
    ;

ident: ID;

name: ID;

ID: ('a'..'z'|'A'..'Z'|'#'|'0'..'9')+;
WS: (' '|'\t'|'\r'|'\n')+ { skip(); }; 
```

（为了保持语法相对简单，我将规则合并`colors`到`def`. `colors`）

每个都`ident`被添加到列表中`ids`，每个都`name`被添加到映射`colors`中作为对应`ident`键的值。然后他们去模板。

这是一个测试类来测试作品：

```
public class ColorsTest {

    public static void main(String[] args) throws Exception {

        final String code = "red = #FF0000\ngreen = #00FF00\nblue = #0000FF"; 

        process(code, "Colors.stg");

    }

    private static void process(final String code, String templateResourceName)
            throws IOException, RecognitionException, Exception {
        CharStream input = new ANTLRStringStream(code);
        ColorsLexer lexer = new ColorsLexer(input);
        CommonTokenStream tokens = new CommonTokenStream(lexer);

        ColorsParser parser = new ColorsParser(tokens);

        InputStream stream = ColorsTest.class.getResourceAsStream(templateResourceName);
        Reader reader = new InputStreamReader(stream);
        parser.setTemplateLib(new StringTemplateGroup(reader));
        reader.close();
        stream.close();

        ColorsParser.colors_return result = parser.colors();

        if (parser.getNumberOfSyntaxErrors() > 0){
            throw new Exception("Syntax Errors encountered!");
        }

        System.out.println(result.toString());
    }
} 
```

这是一个基于您问题中的输入的测试用例。

### 输入

```
red = #FF0000
green = #00FF00
blue = #0000FF 
```

### 输出

```
class MyColors {
// Class members
public java.awt.Color red;
public java.awt.Color green;
public java.awt.Color blue;

// Constructor
public MyColors() {
red = java.awt.Color.getColor("#FF0000");
green = java.awt.Color.getColor("#00FF00");
blue = java.awt.Color.getColor("#0000FF");

}
}; 
```

# php - 刚下载了MacGDBp，不知道怎么用

> ID：14060909
> 
> 赞同：1
> 
> 时间：2012-12-27T20:30:39.713
> 
> 标签：php, macos, debugging, xdebug

我刚刚下载了最新的 MacGDBp 1.5，但我不确定如何通过它调试我的 php 脚本。[网站](http://www.bluestatic.org/software/macgdbp/)上也没有文档或自述文件。寻找我将如何加载我的 PHP 脚本以在其中进行调试？它是否总是与 Eclipse 等其他 IDE 结合使用？

目前它只调试我用 Eclipse 调试的东西。谢谢

# excel - Excel公式：如果匹配则粘贴

> ID：14060916
> 
> 赞同：1
> 
> 时间：2012-12-27T20:31:04.487
> 
> 标签：excel, excel-formula

我正在寻找一个关于 excel 的公式来执行以下操作。

如果电子表格上的值与另一个电子表格上的值匹配：

然后将第一个电子表格中匹配项旁边的单元格粘贴到另一个电子表格中匹配项旁边的单元格中。

这是我的供应商的库存电子表格，它有 2 列，1 列带有项目代码，第 2 列带有库存数量。

我需要检查该代码是否存在于我的其他电子表格中，如果存在，则将商店电子表格中的库存数量粘贴到我的电子表格匹配项旁边的单元格中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:44:46.820

[LOOKUP 和 VLOOKUP 函数](http://support.microsoft.com/kb/324861)似乎正是您需要的。

正如其他答案所表明的那样，简单地将一个单元格与另一个单元格进行比较将需要两个数据集的顺序相同且没有间隙。LOOKUP 和 VLOOKUP 删除了这个限制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T20:37:27.467

假设有两个工作表 W1 和 W2。W1 和 W2 都有 A 列。您要检查，例如 W1 上的 A1。如果它与 W2 上的 A1 匹配，则将 A1 从 W1 粘贴到 W2 上的 B1。将此代码放在 W2 上的 B1 中：

```
=IF(W1!A1=W2!A1,W1!A1,"") 
```

# security - 这对客户端代码安全吗？

> ID：14060922
> 
> 赞同：2
> 
> 时间：2012-12-27T20:31:48.420
> 
> 标签：security, gwt, client

我正在编写一个 GWT 应用程序，用户可以在其中登录并与他们的个人资料进行交互。我知道每个表单条目都需要在服务器上进行验证，但是，一旦用户登录，我不确定潜在的安全问题。

让我解释。我的应用程序（相关部分）的工作原理如下：

1 - 用户输入电子邮件/密码
2 - 将此信息发送回服务器，查询数据库，检查密码（已加盐和散列）
3\. 如果密码与电子邮件相关联的配置文件匹配，则认为这是成功

现在我不确定将配置文件 ID 传递回客户端是否安全，然后它将用于查询数据库以获取与用户相关的信息，以显示在配置文件页面上。

潜在用户是否有可能手动提供此配置文件 ID 并以这种方式加载配置文件？我担心的是，如果他们知道配置文件 ID 的格式，那么怀有恶意的人可能会在不提供凭据的情况下从我的数据库中加载任意数量的信息。

-缺口

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:40:07.803

您在这里处理的是会话管理问题。理想情况下，您需要一种方法来跟踪登录用户（使用随机值作为会话密钥），知道他们空闲了多长时间，能够在用户使用站点时扩展会话，以及使会话过期。

仅将配置文件 ID 传递给客户端，并依靠它为每个请求将其发回是不够的 - 您的担忧是正确的。

您希望在数据库中保留具有到期时间的会话列表。每次执行需要用户权限的操作（应该是几乎所有内容）时，检查会话是否仍然有效，如果是，则将其延长你想要的时间。如果它已过期，请完全终止会话并将用户注销。

您可以将会话密钥存储在 cookie 中（您必须在某些时候信任客户端），但要确保它们是非确定性的并且具有非常大的密钥空间，因此不会被强制获取有效会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T21:55:27.073

> 潜在用户是否有可能手动提供此配置文件 ID 并以这种方式加载配置文件？我担心的是，如果他们知道配置文件 ID 的格式，那么怀有恶意的人可能会在不提供凭据的情况下从我的数据库中加载任意数量的信息。

Stefan H 是正确的，如果您的会话密钥不可[猜测且不可修复](http://en.wikipedia.org/wiki/Cryptographic_nonce)，[您](http://en.wikipedia.org/wiki/Session_fixation)可以通过会话管理解决此问题。

另一种解决方法是使用加密原语来防止篡改 ID。

例如，您可以在您的服务器上存储一个私钥并使用它来[签署](http://en.wikipedia.org/wiki/Digital_signature)配置文件 ID。在后续请求中，如果通过签名检查，您的服务器可以信任配置文件 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-27T21:09:57.860

正如 Stefan H. 所说，由于您正在登录用户，因此您必须使用支持会话（PHP、.Net、JAVA 等）的后端。这意味着您不应该在客户端保留任何 id，因为简单的 id 替换可能会授予我对另一个用户帐户的完全访问权限（当然，这取决于您在客户端上公开的功能）。

为登录用户获取敏感信息（或任何管理操作）的任何服务器请求应类似于 getMyCreditCard()、setMyCreditCard() 等（请注意，没有传入唯一 ID）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T03:34:28.143

规则 1 - `Avoid cooking up your own security solution and use existing tested approaches`。

规则 2 - 如果您的服务器端是 java，那么您应该按照 jsessionid 的思路思考。Spring Security 将为您提供一个良好的起点来管理具有附加安全功能的会话 ID。php 中也会有类似的现有框架（我没有在问题中看到服务器端语言标签）。

规则 3 - 使用 GWT，您会在 Google 团队文档中遇到基于 javascript 的安全问题，并建议 XSRF 和 XSS 安全预防步骤。参考 - [https://developers.google.com/web-toolkit/articles/security_for_gwt_applications](https://developers.google.com/web-toolkit/articles/security_for_gwt_applications)

# mysql - 如何使用 Sqoop 从 MySQL 增量导入到 Hive？

> ID：14060923
> 
> 赞同：2
> 
> 时间：2012-12-27T20:31:51.210
> 
> 标签：mysql, hadoop, hive, sqoop

我可以使用 Sqoop 成功地从 MySQL 增量导入到 HDFS

```
sqoop job -create JOBNAME ... --incremental append --check-column id --last-value LAST
sqoop job -exec JOBNAME 
```

以日志消息结束，例如

```
INFO tool.ImportTool: Saving incremental import state to the metastore
INFO tool.ImportTool: Updated data for job: JOBNAME 
```

并且检查作业会发现 incremental.last.value 已正确更新。

如果我尝试相同的过程，但将“--hive-import”添加到我的作业定义中，它将成功执行，但不会更新incremental.last.value。

这是一个错误吗？预期行为？有没有人有从 MySQL 增量导入数据并通过 Hive 提供数据的程序？

我基本上希望我的 Hadoop 集群成为我的 MySQL 数据库的读取从属，以便快速分析。如果除了 Hive 之外还有其他解决方案（Pig 会很好），我也很想听听。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-11T20:45:40.150

选项 --hive import 用于使用 mapreduce 作业在 HDFS 上创建定义的表结构。此外，正在读取到 Hive 的数据是**读取模式！！！**.这意味着除非执行查询，否则数据实际上不会导入到其中。因此，每次运行文件时，都会在 Hive 表上新（新鲜）的模式上执行查询。因此它不会存储最后一个增量价值。

Hive 模式上的每个查询都被视为独立的，因为它在执行时运行并且不存储旧结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T08:09:30.433

您还可以手动创建外部配置单元表，因为这些只是一次活动，并在您执行操作时继续导入增量数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-22T06:35:07.883

我们可以使用下面的脚本获得最后一个值。

```
--check_colum colname=id -- incremental append or lastmodified --last_value $(HIVE_HOME /bin/hive -e'select max(id) from tablename') 
```

# java - 顶部中心

> ID：14060926
> 
> 赞同：-1
> 
> 时间：2012-12-27T20:32:03.137
> 
> 标签：java, android, android-linearlayout, scrollviewer

请看下面的代码

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".DisplayResult" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_gravity="center"
        android:gravity="center"
        >

        <ImageView
            android:id="@+id/zodiac1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/aries"
            />

        <TextView
            android:id="@+id/orTxt"
            android:text="Or"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"

            />

        <ImageView 
            android:id="@+id/zodiac2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/gemini"
            />

    </LinearLayout>

    </ScrollView> 
```

我希望这个“LinearLayout”在顶部居中。不在设备屏幕的正中心。我该怎么做？请帮忙！

**编辑**

我的意思是，我希望线性布局中的东西出现在应用程序的顶部。它们应该以该空间为中心。如果我使用 RelativeLayout，这就是我所做的

```
android:layout_centerHorizontal="true"
android:layout_alignTop="true" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:35:26.627

如果您想复制 RelativeLayout 的`alignTop`，请尝试：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".DisplayResult" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:gravity="center_horizontal" > 
```

# asp.net-mvc - 在asp .net mvc项目中将javascript模块数组作为带有ajax的List对象发布

> ID：14060927
> 
> 赞同：0
> 
> 时间：2012-12-27T20:32:04.027
> 
> 标签：asp.net-mvc, list, jquery

我想将 JavaScript 对象数组作为列表对象发送到服务器，服务器端方法（GetData）接受具有 3 个元素的列表对象，但所有元素都有空值。有什么建议吗？提前致谢。

**在客户端：**

*用户.js*

```
define(function () {        
    function User(name) {
        this.Name = name 
    }
    return User;
}); 
```

*main.js*

```
var users = [new User('Barney'),
                 new User('Cartman'),
                 new User('Sheldon')];
    $.ajax({
        type: "POST",
        url: "/Home/GetData",
        data: {users: users},
        success: function (data) {
            //alert(data.Result);
        },
        dataType: "json"
    }); 
```

**在服务器：**

*获取数据操作*

```
public void GetData(List<User> users){
} 
```

*用户模型*

```
public class User {
        public string Name { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T12:07:47.267

我像下面一样更改了 main.js，它起作用了：

*main.js*

```
var params = {'users': [new User('Barney'),
                        new User('Cartman'),
                        new User('Sheldon')]};

    $.ajax({
        type: "POST",
        url: "/Home/GetData",
        data: JSON.stringify(params),
        success: function (data) {
            //alert(data.Result);
        },
        contentType: "application/json"
    }); 
```

# tcl - 使用 TCL 词典需要哪个包？

> ID：14060929
> 
> 赞同：1
> 
> 时间：2012-12-27T20:32:09.523
> 
> 标签：tcl

我正在尝试使用 Tcl dict 数据结构：

[http://www.tcl.tk/man/tcl/TclCmd/dict.htm](http://www.tcl.tk/man/tcl/TclCmd/dict.htm)

但是当我尝试运行我的脚本时，脚本会显示以下错误：

```
invalid command name "dict" 
```

我相信这是由于我没有包含任何 Tcl 包造成的。我应该需要哪些软件包才能使用 Tcl dict？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T21:00:34.647

要么使用 Tcl 8.5（放在`package require Tcl 8.5`脚本的顶部以使它们快速失败），要么使用 Tcl 8.4 的第三方[`dict`包](http://pascal.scheffers.net/software/tclDict-8.5.2.tar.gz)（通过添加 a `package require dict`），它基于 8.5 中的大部分`dict`实现。

dict 包不如 8.5 中的代码快（因为它缺乏 Tcl 字节码引擎的支持），并且 IIRC 也不执行强制订单维护。如果可以的话，我真的建议升级到 Tcl 8.5。（一方面，8.4 即将结束其扩展支持生命周期。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T20:39:24.447

`package require Tcl 8.5`. 该`dict`命令是在 8.5 中添加的。添加这样的一行将确保您的脚本预先说明其版本要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-28T11:26:29.143

如果您使用的是活动状态 TCL 套件，请使用“teacup install dict”命令从活动状态库加载 dict 包。

# ruby-on-rails - 如何获取可以从 Rails 控制台获取的所有常量的列表

> ID：14060931
> 
> 赞同：8
> 
> 时间：2012-12-27T20:32:14.780
> 
> 标签：ruby-on-rails

如何在 Rails 应用程序（如 ENV）中获取全局常量列表？就像是：

```
>constants 
```

我看过

```
> puts methods 
```

但没有看到任何向我跳出来的东西，但我怀疑那里有什么东西。

提前谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-27T20:38:51.017

`Module.constants`可以帮助你。

# php - 用字符串替换空行

> ID：14060941
> 
> 赞同：-1
> 
> 时间：2012-12-27T20:33:44.687
> 
> 标签：php, mysql

我很难找到空 mysql 查询的简单解决方案。我想要的是检索到的空行，默认情况下替换为“no-image.png”。如果我的代码看起来像这样，我将如何处理？

```
$query="SELECT
venues.*
LEFT JOIN events 
ON events.VENUE_LOCATION = venues.ID  
where events.VENUE_LOCATION IS NULL
ORDER BY VENUE_NAME";

$result = mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_assoc($result)){
    echo "<td><IMG src=\"" . $row['IMAGE_URL'] . "\"></td>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:35:50.747

尝试

```
echo "<td><IMG src=\"" . ($row['IMAGE_URL']?$row['IMAGE_URL']:'no-image.png') . "\"></td>"; 
```

或者您可以使用 if/else 构造

```
if ($row['IMAGE_URL'] !== ''){
    $img = $row['IMAGE_URL'];
}
else{
    $img = 'no-image.png';
}
echo "<td><IMG src=\"" . $img . "\"></td>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T20:39:17.033

您应该在输出之前检查变量，例如：

```
if(!empty($row['IMAGE_URL']))
  $img = $row['IMAGE_URL'];
else
 $img = 'no-image.png';

    echo "<td><IMG src=\"" .$img. "\"></td>"; 
```

# java - 用户输入 Arraylist

> ID：14060947
> 
> 赞同：-2
> 
> 时间：2012-12-27T20:34:35.383
> 
> 标签：java, arraylist, bluej

我想知道是否可以将对象存储到用户想要的数组列表中。对于我的程序，它通过“帐号”将用户数据存储到他们选择的单元格中，但是每次我输入新帐号时，它都会说数组基本上不够大。这是我的代码。如果有人可以提供帮助，将不胜感激。

```
ArrayList <Account> account = new ArrayList<Account>();
int accountNumber;
String nCity;
String nState;
String nZipCode;
String nLastName;
String nAddress;
String firstName;
String nAccount;

public void newAccount()
{
    Account a = new Account();
    a.firstName = JOptionPane.showInputDialog("What's your first name?");
    a.nLastName = JOptionPane.showInputDialog("What's your last name?");
    a.nAddress = JOptionPane.showInputDialog("What's your current address?");
    a.nCity= JOptionPane.showInputDialog("What's your current city?");
    a.nState = JOptionPane.showInputDialog("What's your current State?");
    a.nZipCode = JOptionPane.showInputDialog("What's your current Zip Code?");
    String num = JOptionPane.showInputDialog("What do you want your account number to be?");
    accountNumber = Integer.parseInt(num);
    account.add(accountNumber, a); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:36:58.990

使用 a`HashMap`并使用帐号作为密钥

```
 Map<Integer,Account> account =new Hashmap<Integer,Account>();
    account.put(accountNumber,a); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T20:37:31.233

您已经创建了一个`ArrayList<Account>`，并且您正在以对的形式向其中添加元素`key-value`。

如果你想以这种方式添加，你可能需要一个`HashMap`： -

```
Map<Integer, Account> accounts = new HashMap<Integer, Account>(); 
```

然后，要在其中添加条目，您可以使用`Map#put()`方法：-

```
accounts.put(accountNumber, a); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T20:56:05.100

同意以上关于使用 Map 的建议。

您的“数组不够大”仅仅是因为您在尚未初始化索引时试图指定 List 的索引。

简单地说，您正在使用这种 List 方法：

add(int index, E element) 在此列表中的指定位置插入指定元素。

关键字是插入。因此，想象一下，如果您的“accountNumber”是 100，并且您之前没有 99 个元素，那么尝试插入在逻辑上将毫无意义，因为您将无处插入。

JavaSE6 API 在这个方法下说：

IndexOutOfBoundsException - 如果索引超出范围 (index < 0 || index > size())

顺便说一句，除了使用 Map 之外，另一个解决方案（如果可用）是将 accountNumber 作为 Account 的另一个字段，您现在可以使用 List 与单参数 add() 方法。

# html - 页面显示问题

> ID：14060949
> 
> 赞同：0
> 
> 时间：2012-12-27T20:34:48.467
> 
> 标签：html, firefox

确切地说，div 标签应该放在右手边，但这只放在 Firefox 的左手边。我的页面在任何其他浏览器中看起来都很好，但在 Firefox 中页面看起来不同我的代码是

```
<div style="width: 400px; height: 280px; float:left; margin-left: 15px;margin-top: 3px">

    <div class="slider-wrap">
        <div id="main-photo-slider" class="csw">
            <div class="panelContainer">

                <div class="panel" title="Panel 1">
                    <div class="wrapper">
                        <img src="image/forslider/slider1.jpg" alt="" style="border-style: solid; height: 266px; width: 392px;"/>
                    </div>
                </div>
                <div class="panel" title="Panel 2">
                    <div class="wrapper">
                        <img src="image/forslider/slider2.jpg" alt="" style="border-style: solid; height: 266px; width: 392px;"/>

                    </div>
                </div>      
                <div class="panel" title="Panel 3">
                    <div class="wrapper">
                        <img src="image/forslider/slider3.jpg" alt="" style="border-style: solid; height: 266px; width: 392px;"/>
                    </div>
                </div>
                <div class="panel" title="Panel 4">
                    <div class="wrapper">
                        <img src="image/forslider/slider4.jpg" alt="" style="border-style: solid; height: 266px; width: 392px;"/>

                    </div>
                </div>
                <div class="panel" title="Panel 5">
                    <div class="wrapper">
                        <img src="image/forslider/slider5.jpg" alt="" style="border-style: solid; height: 266px; width: 392px;"/>

                    </div>
                </div>
                <div class="panel" title="Panel 6">
                    <div class="wrapper">
                        <img src="image/forslider/slider6.jpg" alt="" style="border-style: solid; height: 266px; width: 392px;"/>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div> 
```

div 标签必须放在右手边。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:38:24.477

尝试这样的事情：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>align</title>
<style type="text/css">
body {
    margin: 0px;
    padding: 0px;
}
#right {
    text-align: left;
    width: 200px;
    position:absolute;
    right:1%;
    background-color: blue;
}
</style>
</head>
<body>
    <div id="right">Some Text</div>    
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T20:39:57.943

尝试在第一个 div 中从`float:left;`to更改`float:right;`

# kohana-3 - Kohana“有很多”问题

> ID：14060960
> 
> 赞同：-1
> 
> 时间：2012-12-27T20:35:52.983
> 
> 标签：kohana-3, kohana-orm, kohana-3.2

我有一个名为权限的模型。

权限有很多角色 权限有很多用户 权限有很多被拒绝的用户

以下来自权限模型：

```
protected $_has_many = array(
    'user' => array('through' => 'user_permission'),
    'permissiondeny' => array('model' => 'user', 'through' => 'user_permissiondeny','foreign_key' => 'permissiondeny_id'),
    'role' => array('through' => 'role_permission'),
); 
```

用户和角色关系按预期工作。我可以选择拒绝权限，但是当我尝试添加新权限时，我收到以下 php 错误：

PHP 致命错误：未捕获的 Database_Exception [1110]：列 'permissiondeny_id' 指定了两次 [ INSERT INTO `user_permissiondeny`( `permissiondeny_id`, `permissiondeny_id`) VALUES ('1', 1) ] ~ MODPATH/database/classes/kohana/database/mysql.php [194]

关于我缺少什么的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:58:52.743

由于您没有遵循 ORM 中的命名约定，因此您需要更改您的`has_many`声明：

```
protected $_has_many = array(
  'user' => array('through' => 'user_permission'),
  'permissiondeny' => array('model' => 'user', 'through' => 'user_permissiondeny','foreign_key' => 'permissiondeny_id', 'far_key' => 'permission_id'),
  'role' => array('through' => 'role_permission'),
); 
```

请注意该`far_key`部分，您需要指定要查找的列的名称。可能是`user_id`, `role_id`, `permission_id`, 等等

# iphone - 如何在使用 UISlider 更改音量时隐藏 Iphone 音量框？

> ID：14060966
> 
> 赞同：1
> 
> 时间：2012-12-27T20:36:49.283
> 
> 标签：iphone, ios, volume, uislider, mpmusicplayercontroller

我正在尝试使用 UISlider 更改我的应用程序中的音量。我为此使用的代码是：

```
[[MPMusicPlayerController applicationMusicPlayer] setVolume:_volumeSlider.value]; 
```

此代码的问题在于，它显示 iPhone 的音量框与您按下 iPhone 左侧的音量增大或音量减小按钮时出现的音量框相同。对于我的应用程序，我需要隐藏这个框，因为我唯一关心的是改变音量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T21:11:41.837

使用[MPVolumeView](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPVolumeView_Class/Reference/Reference.html)。它与系统音量保持同步（当用户（例如，按下硬件音量按钮之一）时自行调整），并且更相关的是，在调整时抑制音量边框。

# jquery - 平滑移动，并可能将 JS 移动到 CSS3

> ID：14060988
> 
> 赞同：1
> 
> 时间：2012-12-27T20:38:09.423
> 
> 标签：jquery, css, animation, css-transitions

我有一个小工件。

HTML：

```
<div id="it">X</div> 
```

CSS：

```
#it {
    background: blue;
    width: 40px;
    text-align: center;
    color: white;
    padding: 10px 0;
    border: solid 1px black;
    border-radius: 25px;
    position: absolute;
    left: 100px;
    top: 100px;
} 
```

JS：

```
$('#it').animate({
    left: '+=100',
    top: '+=100'
}, 400, function() {
        $(this).animate({
        top: '-=100'
    }, 400, function() {
        $(this).animate({
            left: '-=100',
            top: '+=100'
        }, 400, function() {
            $(this).animate({
                top: '-=100'
            }, 400);
        });
    });
}); 
```

上述所有内容都放在[这个jsfiddle中](http://jsfiddle.net/Tn7UE/)

我需要帮助：

1.  循环 JS。此外，我几乎可以肯定可以做一些事情来简化重复的嵌套代码。
2.  使运动平稳。即，使物体以单条曲线飞行，沿着“倾斜的 8”形状，而不是 4 条直线。
3.  如果可能，摆脱 JS 并用 CSS3 替换它。

我的项目也不一定需要，但如果有一种方法可以沿途旋转对象，使其始终面向它前进的方向，那就太棒了。就像您从上方观看赛车一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T20:56:05.083

我已经将你的 JavaScript 转换为 CSS3：[这是给你的](http://jsfiddle.net/nbatothemax/amJ2e/54/)。

它是循环的并使用 CSS3，可在 IE 10、chrome、firefox 和 safari 中运行。我没有歌剧，所以我无法测试，IE 9 及以下版本需要使用 CSS3 shiv。

```
@-webkit-keyframes move {
0%   {top:  100px;
      left: 100px;}
25%  {top:  250px;
      left: 250px;}
50%  {top:  100px;
      left: 250px;}
75%  {top:  250px;
      left: 100px;}
100% {top:  100px;
      left: 100px;}
} 
```

该代码替换了您拥有的 JavaScript；它分段创建动画。`@-moz-`虽然它只是动画语法的 webkit 部分，但为了确保您涵盖所有基础，不要忘记`@keyframes`标准规范动画语法。

```
-webkit-animation:move 5s infinite; 
```

这个 CSS3 规则告诉解析器应该使用哪个元素使用声明的动画。

旋转项目可以使用 transform css 声明来完成，我将尽快处理和更新。到目前为止，我已经让变换在每个浏览器中都可以工作。此外，我按照您的要求将整个动画倾斜了一个角度，使其看起来像一个无穷大的符号。如果没有复杂的数学或高级使用过渡和额外的动画，现在很难获得平滑的拐角转弯，我不太确定如何正确地做到这一点。我会看看能做些什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T20:54:31.063

试试这个： http: [//jsfiddle.net/Tn7UE/1/](http://jsfiddle.net/Tn7UE/1/) 我添加`transform:rotate();`了改变方向。和`setInterval`for循环。

# c - 为什么 a.out 不是机器语言？

> ID：14060989
> 
> 赞同：0
> 
> 时间：2012-12-27T20:38:13.193
> 
> 标签：c, executable, machine-language

我编译以下程序`gcc`并接收输出可执行文件`a.out`。：

```
#include <stdio.h>
int main () {
  printf("hello, world\n");
} 
```

当我执行`cat a.out`时，为什么文件是“乱码”（这叫什么？）而不是 0s 和 1s 的机器语言：

```
??????? H__PAGEZERO(__TEXT__text__TEXT?`??__stubs__TEXT 
P__unwind_info__TEXT]P]__eh_frame__TEXT?H??__DATA__program_vars [continued] 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-27T20:40:16.717

该文件在 0 和 1 中，但是当您使用文本编辑器打开它时，这些位以字节为单位分组，然后被视为文本；）在 Linux 中，您可以尝试反汇编输出文件以确保它包含机器指令（x86 架构） ：

`objdump -D -mi386 a.out`

示例输出：

```
1:  83 ec 08                sub    $0x8,%esp
4:  be 01 00 00 00          mov    $0x1,%esi
9:  bf 00 00 00 00          mov    $0x0,%edi 
```

第二列包含十六进制表示的 0 和 1，第三列包含助记汇编指令。

如果要显示那些 0 和 1，只需键入：

`xxd -b a.out`

示例输出：

```
 0000000: 01111111 01000101 01001100 01000110 00000010 00000001  .ELF..
 0000006: 00000001 00000000 00000000 00000000 00000000 00000000  ...... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-27T20:40:22.820

它是某种[可执行文件格式](http://en.wikipedia.org/wiki/Executable)。在 Linux 上，它可能是[ELF](http://en.wikipedia.org/wiki/Executable_and_Linkable_Format)，在 Mac OS X 上它可能是[Mach-O](http://en.wikipedia.org/wiki/Mach-o)，等等。甚至还有[a.out](http://en.wikipedia.org/wiki/A.out)格式，但它不再那么常见了。

它不能只是简单的机器指令——操作系统需要一些关于如何加载它、附加哪些动态库等信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-27T20:40:57.853

字符也是由 0 和 1 组成的，计算机无法分辨。你要求它显示文件，它确实做到了。

除了机器指令外，二进制文件还包含布局和可选的调试信息，这些信息可以是可读的字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-27T20:41:08.217

a.out 是您正在使用的操作系统的加载程序可以理解的格式。您看到的那些不同文本是您期望的 0 和 1 的不同部分的标记。

和`?`` 显示存在二进制不可打印数据的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T20:48:27.103

如今，Linux 系统上的典型格式是 ELF。ELF 文件可能包含机器代码，您可以使用该`objdump`实用程序对其进行检查。

```
$ gcc main.c
$ objdump -d -j .text a.out

a.out：文件格式elf64-x86-64

部分.text的反汇编：
*（为简洁起见省略代码）*
00000000004005ac：
  4005ac：55 推 %rbp
  4005ad: 48 89 e5 移动 %rsp,%rbp
  4005b0: bf 6c 06 40 00 移动 $0x40066c,%edi
  4005b5：e8 d6 fe ff ff callq 400490
  4005ba: 5d 流行 %rbp
  4005bb：c3 retq   
  4005bc: 0f 1f 40 00 nopl 0x0(%rax)

```

看？机器码。该`objdump`实用程序有用地以十六进制打印它，右侧是相应的反汇编代码，左侧是地址。

# c# - Linq to XML - 元素项的动态计数

> ID：14060990
> 
> 赞同：1
> 
> 时间：2012-12-27T20:38:13.380
> 
> 标签：c#, xml, linq

## 我的目标

我需要根据 Placement_ID 和 Fill_ID 的组合创建一个在我的文档中出现动态次数的 XElement。如果我的对象列表中的记录与另一条记录具有相同的 Placement_ID，我想在前一个下方附加另一个具有不同 Fll_ID 的填充 XElement。下面的例子：

```
<envelope ack="entity" transaction="multi">
  <auth>
        <user>TM_DEV</user>
        <session>session1</session>
  </auth>
  <Trading op="createOrder, pretradeCpl, sendToTrading,createPlacement, createFill" id="os1">
        <order op="create" id="test1234">
              <scenario id="sample" />
              <execBroker>BEAR</execBroker>
              <ticker>MSFT</ticker>
              <trader>TM_DEV</trader>
              <instruction>LIM</instruction>
              <limitPrice>85</limitPrice>
              <transType>BUYL</transType>
              <orderDuration>GTC</orderDuration>
              <tradeDate>
              </tradeDate>
              <settleDate>
              </settleDate>
              <allocation id="" op="create">
                    <acctCd>tstacc00006</acctCd>
                    <targetQty>300</targetQty>
                    <specialInst />
              </allocation>
              <placement id="Place1" op="create">
                    <execBroker>BEAR</execBroker>
                    <placeQty>300</placeQty>
                    <fill id="fill1" op="create">
                          <fillQty>150</fillQty>
                          <fillPrice>43</fillPrice>
                    </fill>
                    <fill id="fill2" op="create">
                          <fillQty>150</fillQty>
                          <fillPrice>44</fillPrice>
                    </fill>
              </placement>
        </order>
  </Trading> 
```

## 我的进步

到目前为止，我编写的下面的代码查询一个列表对象并为每一行生成一个新顺序。我需要能够按 Placement_ID 对我的列表进行分组，如果它们是具有相同 Placement_ID 的两行，那么我希望它编写多个 Fill 元素。否则，如果没有重复的 Placement_ID，则列表中的每一行数据将有 1 个订单、1 个放置和 1 个填充。

```
XDocument doc = new XDocument(
           new XDeclaration("1.0", "UTF-8", "yes"),
          new XElement("envelope",
          new XAttribute("ack", "entity"),
          new XAttribute("transaction", "multi"),
           new XElement("auth",
           new XElement("user", "TM_DEV"),
           new XElement("session", "session1")),
           new XElement("trading",
               new XAttribute("op", "createOrder, pretradeCpl, sendToTrading, createPlacement, createFill"),
               new XAttribute("id", "os1"),
           from t in trades.ToList()
           select new XElement("order",
                   new XAttribute("op", "create"),
                   new XAttribute("id", DateTime.Now.ToString("yyMMddHHmmssfff") + t.OrderId),
                   new XElement("Scenario",
                       new XAttribute("id", "sample")),
                   new XElement("execBroker", t.ExecBrkID),
                   new XElement("ticker", t.Ticker),
                   new XElement("sedol", t.Sedol),
                   new XElement("Trader", "TM_DEV"),
                   new XElement("transType", t.TransType),
                   new XElement("orderDuration", "GTC"),
                   new XElement("tradeDate", ""),
                   new XElement("settleDate", ""),
                   new XElement("allocation",
                       new XAttribute("id", ""),
                       new XAttribute("op", "create"),
                       new XElement("acctCd", t.Account),
                       new XElement("targetQty", t.TargetQty),
                       new XElement("specialInst", "who to settle with")),
                   new XElement("placement",
                       new XAttribute("op", "create"),
                       new XAttribute("id", t.PlacementId),
                       new XElement("execBroker", t.ExecBrkID),
                       new XElement("placeQty", t.ExecQty),
                       new XElement("fill",
                           new XAttribute("id", t.FillId),
                           new XAttribute("op", "create"),
                       new XElement("fillQty", t.ExecQty),
                       new XElement("fillPrice", t.ExecPrice))))))); 
```

## 更新

我已经使用您的建议分解了更新中的示例。现在我收到“文档格式不正确”的错误。

```
using (XmlWriter xw = XmlWriter.Create(s, xws)){

XElement order = new XElement("order");
var groupedOrders = trades.GroupBy(o => o.OrderId);

foreach (var groupie in groupedOrders)
{
    int n = 1;
    XElement root = new XElement("placement",
                    from g in groupie
                       select new XElement("t",
                                new XAttribute("op", "create"),
                              new XAttribute("id", g.Ticker)));                    
    foreach (var fill in groupie)
    {
        XElement newFillElement = new XElement("fill" + n,
                                    new XAttribute("id", fill.PlacementId),
                                   new XAttribute("op", "create"),
                                    new XElement("fillQty", fill.ExecQty),
                                    new XElement("fillPrice", fill.ExecPrice));
        root.Add(newFillElement);
        n++;   
    }

    order.Add(root);
}

XDocument doc = new XDocument(
                    new XDeclaration("1.0", "UTF-8", "yes"), order);
doc.Save(xw); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T21:02:27.763

乍一看，您似乎一次次尝试做太多事情。我认为创建基础文档很好，但如果您需要有条件地添加填充，那么您需要不同的策略。

我建议您在循环之前使用 LINQ 按 Placement_ID 对订单进行分组。这将确保组元素具有相同的 Placement_ID - 并允许您添加适当数量的`fills`.

一些伪代码：

```
var groupedOrders = listOfOrders.GroupBy(o => o.Placement_ID);
foreach (var group in groupedOrders)
{
    //Create document, but don't add any fills
    XDocument doc = new XDocument(...)

    int n = 1;
    foreach (var fill in group)
    {
        //Same structure as before, just a separate element
        XElement newFillElement = new XElement("fill" + n, ...);

        //Add as last element to existing doc
        doc.Add(newFillElement);

        n++
    }
} 
```

参考：
[101 个 LINQ 示例，LINQ -](http://code.msdn.microsoft.com/LINQ-to-DataSets-Grouping-c62703ea)
[在 XML 中添加、更新和删除数据的分组运算符](http://blogs.microsoft.co.il/blogs/maordavid/archive/2007/10/13/linq-to-xml-adding-updating-and-deleting-data.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T22:02:01.463

您能否在 xml 构建之外创建关系，然后从中重建 xml？从你看来，这可能更容易。您可能会创建一个通用列表，其中包含您想要的元素和属性 xml 中的所有数据。将xml转储到其中，然后将其导出。添加将是一组规则的动态扩展事物。使用 Linq to XML 将 xml 查询到通用列表中。

我不会做像你的例子那样激烈的事情，因为你只需要理解一个概念。您也可以直接在“后代”方法中进行计数和其他操作，但我通常更喜欢先将内容列在列表中，然后我知道我有什么

以 XML 为例：

```
<Orders>
  <Person Name="Brett">
    <Order Name="thing"/>
  </Person>
  <Person Name="Joe">
   <Order Name="thing"/>
   <Order Name="thing2" />
  </Person>
</Orders> 
```

C# 示例：

```
using System;
using System.Linq;
using System.Xml.Linq;

namespace TestLinqXml
{
    public class Program
    {
        private static void Main(string[] args)
        {
            // load original doc
            var doc = XDocument.Load(@"C:\TestCode\TestLinqXml\TestLinqXml\XML\Orders.xml");

            // query it with Linq using lambda patterns.
            var list = doc.Descendants("Person")
                          .Select(x => new 
                                  // expand descendents out into a class I make up below by declarining new and defining object
                                  {
                                      Name = x.Attribute("Name").Value,
                                      OrderCount = x.Descendants("Order").Count()
                                  }
                );

            // recreate the new doc
            XDocument newdoc = new XDocument(
                new XDeclaration("1.0", "UTF-8", "yes"),
                new XElement("person",
                             list.Select(n =>
                                         new XElement(n.Name,
                                                      new XAttribute("OrderCount", n.OrderCount)
                                             ))
                    )
                );

            // save it
            newdoc.Save(@"C:\TestCode\TestLinqXml\TestLinqXml\XML\output.xml");
        }
    }
} 
```

# macos - 如何在 OS X 10.8 中使用 Applescript 将窗口移动到目标空间？

> ID：14060991
> 
> 赞同：7
> 
> 时间：2012-12-27T20:38:16.627
> 
> 标签：macos, applescript, osx-mountain-lion

最终，我试图分配可以将最前面的应用程序移动到我的任何空间的热键（通过 Alfred 或 Keymando）。触发 applescript 似乎是最有可能成功的途径。我环顾四周，似乎曾经有一种方法可以通过applescript中的“空间偏好”来做到这一点，但这在OS X Lion中消失了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-28T23:28:21.617

如果您追求的是纯 AppleScript 解决方案，那么您就不走运了。

正如您所提到的，空间首选项窗格已消失。此外，Mission Control.app 没有要打开的字典，拉出窗口的属性 ( `tell application Finder to set x to the front finder window's properties`) 不会显示任何与 Spaces 相关的内容。

系统事件的字典有一个`current desktop`我无法解释的属性，并且在任何情况下都被列为只读。

但是，第一个和仪表板之后的每个空格都有一个[UUID，它包含在一个 .plist 文件 (com.apple.spaces)](https://stackoverflow.com/questions/6768684/osx-lion-applescript-how-to-get-current-space-from-mission-control)中，您可以在 ~/Library/Preferences 中找到该文件。在那个 .plist 中还有一个“应用程序绑定”部分，这表明您过去能够通过 Exposé/Spaces 首选项窗格访问的行为并没有完全消失。

不幸的是，在我的测试中，我向“应用程序绑定”添加了一个字典和字符串对，即使在重新启动后，我也无法将应用程序强制到特定空间。

看来，当 Apple 为 Mountain Lion 的 Mission Control 行放弃 Spaces 网格时，他们放弃了用户对每个空间中将出现的内容的控制权，顺便说一下交互方式发生了变化（与用户定义的网格相比，临时额外的桌面) 如果事情在幕后发生了变化，我也不会感到惊讶。

# java - 搞砸了我的应用程序，现在它在加载时崩溃。不理解 catlog 中的错误

> ID：14060994
> 
> 赞同：0
> 
> 时间：2012-12-27T20:38:26.953
> 
> 标签：java, android

我有一个按预期工作的应用程序。由于 android 的未知行为，我不喜欢 UI，所以我决定重新设计 XML 文件。我创建了一个 new_layout.xml 文件，根据需要对其进行设计，然后重构 > 将 activity_main.xml 文件重命名为 activity_main_old.xml 并重构 > 将 new_layout.xml 重命名为 activity_main.xml。

该应用程序崩溃了，说无法将 Button 转换为 ImageButton，但奇怪的是我只将元素从一个 XML 文件复制/粘贴到另一个，所以应该没有问题，因为名称是相同的。

结果，我认为每个元素的名称可能与原始布局（现在的 activity_main_old.xml）冲突，所以我从项目中删除了这个文件。然后我重构 > 将 activity_main.xml 重命名为更有意义的内容（scoreboard.xml）。我将 setContentView() 方法更改为下一个记分板布局 ID。

我不明白我收到的错误消息，如果我能得到任何帮助，我将不胜感激：

```
12-27 15:31:24.744: E/AndroidRuntime(4800): FATAL EXCEPTION: main
12-27 15:31:24.744: E/AndroidRuntime(4800): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.ultimatescoreclock/com.example.ultimatescoreclock.ScoreboardActivity}: java.lang.NullPointerException
12-27 15:31:24.744: E/AndroidRuntime(4800):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
12-27 15:31:24.744: E/AndroidRuntime(4800):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
12-27 15:31:24.744: E/AndroidRuntime(4800):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
12-27 15:31:24.744: E/AndroidRuntime(4800):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
12-27 15:31:24.744: E/AndroidRuntime(4800):     at android.os.Handler.dispatchMessage(Handler.java:99)
12-27 15:31:24.744: E/AndroidRuntime(4800):     at android.os.Looper.loop(Looper.java:137) 12-27 15:31:24.744: E/AndroidRuntime(4800):  at android.app.ActivityThread.main(ActivityThread.java:4424)
12-27 15:31:24.744: E/AndroidRuntime(4800):     at java.lang.reflect.Method.invokeNative(Native Method)
12-27 15:31:24.744: E/AndroidRuntime(4800):     at java.lang.reflect.Method.invoke(Method.java:511) 12-27 15:31:24.744: E/AndroidRuntime(4800):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
12-27 15:31:24.744: E/AndroidRuntime(4800):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:558)
12-27 15:31:24.744: E/AndroidRuntime(4800):     at dalvik.system.NativeStart.main(Native Method) 12-27 15:31:24.744: E/AndroidRuntime(4800): Caused by: java.lang.NullPointerException
12-27 15:31:24.744: E/AndroidRuntime(4800):     at com.example.ultimatescoreclock.ScoreboardActivity.onCreate(ScoreboardActivity.java:207)
12-27 15:31:24.744: E/AndroidRuntime(4800):     at android.app.Activity.performCreate(Activity.java:4465)
12-27 15:31:24.744: E/AndroidRuntime(4800):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
12-27 15:31:24.744: E/AndroidRuntime(4800):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
12-27 15:31:24.744: E/AndroidRuntime(4800):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:39:28.217

```
E/AndroidRuntime(4800): Caused by: java.lang.NullPointerException
E/AndroidRuntime(4800): at com.example.ultimatescoreclock.ScoreboardActivity.onCreate(ScoreboardActivity.java:207) 
```

`NullPointerException`在`ScoreboardActivity.java`课堂上的第 207 行。

您的问题中没有代码，因此很难判断发生了什么，但原因可能是您正在尝试调用`null`参考。

# ajax - 使用 JavaScript PHP JSON 的 HighCharts 数据

> ID：14060995
> 
> 赞同：0
> 
> 时间：2012-12-27T20:38:38.283
> 
> 标签：ajax, json, highcharts, option, series

我正在准备逐点创建图表。不是活的，也不是特别的。这可能是一件基本的事情，但在两天内我找不到或理解解决方案。

PHP 代码

```
for ($i = 0;$i < $numResults; $i++)
        {
            $row = $result->fetch_assoc();

            array_push($returnArray,array($row['powerWeek'] => $row['powerPower'] ));

        }
        echo json_encode($returnArray); 
```

PHP结果：`[{"1":"51"},{"2":"52"},{"3":"52"}]`

JavaScipt 代码：

```
 $.getJSON('getPower.php',function(getJSONText)
    {   
        var series = {};    
        $.each(getJSONText, function(key, value) {  
            series.data = value;
            option.series.push(series);

        });
        var chart = new Highcharts.Chart(option); 
}); 
```

但是没有绘制图表。感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T14:56:11.327

我解决了我的问题。在 php 代码中，我在构建数组时添加了 intval fonction，并将其更改为多维数组：

```
if  ($numResults != 0)
    {
        for ($i = 0;$i < $numResults; $i++)
        {
            $row = $result->fetch_assoc();

            array_push($returnArray,array(intval($row['powerWeek']) , intval($row['powerPower']) ));

        }
        echo json_encode($returnArray); 
    }
} 
```

我将我的 JavaScript 代码编辑为：

```
function requestData(){
    $.getJSON('getPower.php',function(getJSONText)
        {   
         chart.series[0].setData(getJSONText, true);
        });
} 
```

# sql - 从 SQL 中的特定类别中选择多行

> ID：14060996
> 
> 赞同：1
> 
> 时间：2012-12-27T20:38:39.853
> 
> 标签：sql, select, categories

我希望能够运行一个报告，该报告将为我提供用户计算机、服务器和虚拟机类别中所有项目的列表。

我想从此报告中排除所有其他类别。

我不太确定要写什么来实现这一点，或者把它放在哪里。

这就是我目前正在使用的。我得到一个错误代码 1054：每个类别的未知列...

```
SELECT DISTINCT
ASSET.NAME AS ASSET_NAME,
ASSET_TYPE.NAME AS ASSET_TYPE,
ASSET_TYPE.ASSET_CATEGORY AS CATEGORY 
FROM ASSET, ASSET_TYPE
WHERE ASSET_CATEGORY IN (SERVERS, USER_COMPUTER, VIRTUAL_MACHINE)
ORDER BY ASSET.NAME; 
```

**编辑：**我进行了建议的更改（来自 Codo），但现在我返回了 0 行。有什么进一步的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-27T20:40:47.547

您的类别很可能是字符串，因此需要在它们周围加上引号：

```
SELECT DISTINCT
ASSET.NAME AS ASSET_NAME,
ASSET_TYPE.NAME AS ASSET_TYPE,
ASSET_TYPE.ASSET_CATEGORY AS CATEGORY 
FROM ASSET, ASSET_TYPE
WHERE ASSET_CATEGORY IN ('SERVERS', 'USER_COMPUTER', 'VIRTUAL_MACHINE')
ORDER BY ASSET.NAME; 
```

如果没有引号，数据库会认为这些词是列名并感到困惑。

此外，您查询了两个表，但没有指定它们如何相互连接，即缺少连接条件。

很可能你需要类似的东西：

```
FROM ASSET, ASSET_TYPE
WHERE ASSET_CATEGORY IN ('SERVERS', 'USER_COMPUTER', 'VIRTUAL_MACHINE')
AND ASSET_TYPE.ID  =  ASSET.ASSET_TYPE_ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T20:57:19.880

正如@Codo 所说，您的类别应该是字符串（varchar 或 nvarchar）并且应该像

```
WHERE ASSET_CATEGORY IN ('SERVERS', 'USER_COMPUTER', 'VIRTUAL_MACHINE') 
```

也没有显示两个表的任何关系。假设关系是；

```
ASSET.AssetTypeId = ASSET_TYPE.AssetTypeId 
```

然后键入，您的查询可以使用表别名来完成；***`avoiding`*** `WHERE ASSET, ASSET_TYPE`***`old style table joining`***

```
SELECT a.NAME ASSET_NAME, at.NAME ASSET_TYPE, at.ASSET_CATEGORY CATEGORY 
FROM ASSET a JOIN ASSET_TYPE at ON a.AssetTypeId = at.AssetTypeId 
WHERE at.ASSET_CATEGORY IN ('SERVERS', 'USER_COMPUTER', 'VIRTUAL_MACHINE')
ORDER BY a.NAME; 
```

# android - Android 相机图像在自定义文件夹中不可见

> ID：14060997
> 
> 赞同：2
> 
> 时间：2012-12-27T20:38:41.310
> 
> 标签：android, image, camera, save, directory

我一直在开发一个相机应用程序，它只是将相机拍摄的照片存储在自定义文件夹中。我遇到了一个奇怪的错误，我无法找到重复的问题。虽然我的应用程序按应有的方式拍摄并将图片保存在文件夹中，但这些图像是不可见的。更奇怪的是，存储在 Camera Shots 文件夹（我手机的默认图片存储位置）中的图像副本是可见的。我已经尝试以多种不同的方式修改我的代码，但我仍然得到相同的结果。下面是我的代码。任何帮助将不胜感激！谢谢！

```
camera.setOnClickListener(new View.OnClickListener() {              
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

                     String name = Environment.getExternalStorageDirectory().toString();
                        File mainFolder = new File(name + "/Filename/");    
                            mainFolder.mkdirs();
                            Random generator = new Random();
                            int random = 10000;
                            random = generator.nextInt(random);
                            String fileName = "Image-"+ random +".jpg";
                            File file = new File (mainFolder, fileName);
                            if (file.exists ()) file.delete (); 
                            try {
                                   FileOutputStream stream = new FileOutputStream(file);
                                   bmp.compress(Bitmap.CompressFormat.JPEG, 90, stream);
                                   stream.flush();
                                   stream.close();

                            } catch (Exception e) {
                                   e.printStackTrace();
                            }

                    startActivityForResult(i, cameraData); 
                }

            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T22:33:09.953

我想到了。我错过了URI。以下是遇到此问题的任何人的更新（和工作）代码：

```
camera.setOnClickListener(new View.OnClickListener() {              
            public void onClick(View v) {
                // TODO Auto-generated method stub

                i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

                 String name = Environment.getExternalStorageDirectory().toString();
                    File mainFolder = new File(name + "/Filename/");    
                        mainFolder.mkdirs();
                        Random generator = new Random();
                        int random = 10000;
                        random = generator.nextInt(random);
                        String fileName = "Image-"+ random +".jpg";
                        File file = new File (mainFolder, fileName);
                        Uri uriSavedImage = Uri.fromFile(file);
                        i.putExtra("output", uriSavedImage);

                startActivityForResult(i, cameraData); 
            }

        }); 
```

# testing - NCover 可以用来为 NUnit 选择测试用例吗？

> ID：14060999
> 
> 赞同：1
> 
> 时间：2012-12-27T20:38:47.610
> 
> 标签：testing, nunit, ncover

什么是测试选择的最佳工具，最好使用NUnit和NCover。我希望能够获取更改列表或更改文件列表，并根据以前的代码覆盖率数据确定可能给我测试覆盖率的测试用例。

显然这里存在先有鸡还是先有蛋的问题。由于代码已更改，我们需要执行测试并测量覆盖率以确定哪些测试覆盖了新代码。假设我有数百或数千个测试用例需要数小时才能执行，并且我只想运行少数为修改的特定文件（或函数）自动选择的测试。