# StackOverflow 问答 12788000-12788999

# android - 选择具有特定颜色的位图区域

> ID：12788018
> 
> 赞同：-1
> 
> 时间：2012-10-08T19:15:08.083
> 
> 标签：android, image, colors, bitmap

我有一个位图，我需要找到指定颜色的某个区域（例如红色）。

我知道我可以简单地使用**bitmap.getPixels()**来获取图像的矩阵并查询它的某个像素区域。

任何人都可以为我提供这项任务的算法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T19:25:40.383

如果你想获得每个像素的颜色，你可以这样做：

```
for(int i=0;i<bitmap.getWidth();i++){
for(int j=0;j<bitmap.getHeigth();j++){
    int pixel = bitmap.getPixel(i,j);
    if(pixel == Color.RED){
        //Do something
    }
}
 } 
```

如果你想获得更大的区域，你应该使用矩阵代替，或者画一个矩形并在那里获取值！

# c# - 跳过 [ScriptIgnore] 一次

> ID：12788021
> 
> 赞同：0
> 
> 时间：2012-10-08T19:15:17.273
> 
> 标签：c#, asp.net-mvc-3, entity-framework-4, javascriptserializer, scriptignore

这种情况的环境：

*   asp.net mvc 3*   C＃*   实体框架 4.3.1*   JavaScriptSerializer

    我遇到过一种情况，最好包含一个标记为`[ScriptIgnore]`. 如果没有该属性，该字段将构成循环引用并导致引发异常。原因与此类似：

    ```
    public class Foo
    {
     public int FooId { get; set; }

     [ScriptIgnore]
     public virtual Collection<Bar> Bars { get; set; }
    }

    public class Bar
    {
     public int BarId { get; set; }
     public int FooId { get; set; }
     public virtual Foo Foo { get; set; }
    } 
    ```

    所以你可以在这里看到，一个`Foo`可以有很多关联的`Bars`. 并且 a`Bar`有一个关联的`Foo`.

    回到情况。我正在使用包含语句在控制器中加载此关联：

    ```
    .Include( foo => foo.Bars ); 
    ```

    没有抛出错误，因为 include 不受`[ScriptIgnore]`注释的影响。调试时，检查时正确构建关联。有一个 的列表`foos`，每个`foo`都有一个 的关联列表`Bars`。

    现在我想序列化这个构造的列表。我有一个充满数据的视图模型，它看起来像这样：

    ```
    public class FooView
    {
     public List<Foo> Foos { get; set; }

     public string AsJson()
     {
      var serializer = new JavaScriptSerializer();
      return serializer.Serialize(this);
     }
    } 
    ```

    所以我将此视图模型传递给视图并序列化它：

    ```
    @model FooView
    <script type="text/javascript">
     var fooViewModel = @( Html.Raw( Model.AsJson() ) );
    </script> 
    ```

    不会引发异常，但是，序列化会正确跳过`Bars`标有 的字段 ( ) `[ScriptIgnore]`。经过`consol.log(fooViewModel)`检查，很明显有一个 的数组`Foo`，但是，`Bar`在任何`Foos`.

    有没有一种方法可以让我一次跳过这个`[ScriptIgnore]`标签？我意识到，如果它每次都跳过，那么序列化程序会序列化 Foo，查看并查看 Bar 类型的集合，序列化每个 Bar，注意 Bar 有一个关联的 Foo，序列化 Foo，注意 Foo 有一个 Bar 类型的集合。 。ETC。我只想抢`Bar`第一次的收藏。有没有办法做到这一点？我意识到它将尝试`Foo`从 Bar 序列化，但它将是空的。这一切都是通过预先加载完成的，并且整个对象图都已经构建好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:01:15.007

当我遇到这个问题时，我最终做的是用具有设置的 Json.NET 序列化程序替换序列化程序，特别是

```
_jsonSerializerSettings.ReferenceLoopHandling = ReferenceLoopHandling.Ignore; 
```

> Json.NET 将忽略引用循环中的对象并且不序列化它们。第一次遇到对象时，它将像往常一样被序列化，但如果遇到对象作为其自身的子对象，则序列化程序将跳过对其进行序列化。

设置信息是[http://james.newtonking.com/projects/json/help/index.html?topic=html/SerializingJSON.htm](http://james.newtonking.com/projects/json/help/index.html?topic=html/SerializingJSON.htm) 我使用了[http://blogs.msdn.com/b/henrikn/ archive/2012/02/18/using-json-net-with-asp-net-web-api.aspx](http://blogs.msdn.com/b/henrikn/archive/2012/02/18/using-json-net-with-asp-net-web-api.aspx) 替换序列化程序，然后我将其默认添加到 global.asax.cs。

```
configuration.Formatters.Insert(0, new JsonNetFormatter(serializerSettings)); 
```

我意识到这是一种解决方法（实际上并不处理 scriptignore），但是，我从提供的数据库中获得了如此多的循环引用，这似乎是当时最好的解决方案。

# python - 按特定顺序打印行

> ID：12788025
> 
> 赞同：-4
> 
> 时间：2012-10-08T19:15:35.680
> 
> 标签：python

我想以这样的方式打印大约 10 行，即在每个序列中打印 9 行并带有符号“-”。例如，如果 x=[1,2,3,4,5]。现在我想按以下顺序打印，

```
 1
-2
-3
-4
-5

-1
2
-3
-4
-5

-1
-2
3
-4
-5
..etc. 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:21:45.800

只需使用两个嵌套循环，每个循环遍历索引。

```
x = [1,2,3,4,5]
for i in xrange(len(x)):
    for j, xi in enumerate(x):
        if i == j:
            print xi,
        else:
            print -xi,
    print 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:30:10.427

```
In [36]: x = [1,2,3,4,5]

In [38]: for i,x in enumerate(lis):
    print map(lambda x:-x,lis[:i]) + [x] + map(lambda x:-x,lis[i+1:])   

[1, -2, -3, -4, -5]
[-1, 2, -3, -4, -5]
[-1, -2, 3, -4, -5]
[-1, -2, -3, 4, -5]
[-1, -2, -3, -4, 5] 
```

用于`"".join()`从此处获取预期结果。

# c# - 实现要在数据库中删除的对象列表

> ID：12788026
> 
> 赞同：-1
> 
> 时间：2012-10-08T19:15:41.310
> 
> 标签：c#, linq, list, ado.net, generic-list

我有一个带有几个选项卡的表单，每个选项卡中都有一个网格控件。当用户选择要删除的行时，我想将其从网格中删除，并且如果数据库中存在该对象也将其删除，但不是永久的 - 仅当用户单击表单上的保存时。

现在，如果对象不存在于数据库中，我将其从列表中删除，如果对象存在于数据库中，我将其从数据库中删除并将其从列表中删除。但是，如果用户单击取消按钮，他希望不会从数据库中删除行。

我有两种可能的解决方案：1) - 从列表中删除对象，如果对象存在于 db 中，则将其添加到要删除的对象列表中 2) - 实现另一个列表，getter 将仅返回状态为 != ToBeDeleted 的对象（表现？）

注意：我没有使用 ORM 工具，而是使用我自己的基于 ado.net 的数据访问框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:26:07.303

我认为您正在描述的案例只是要求进行交易。

ADO.Net 可以轻松处理它们，前提是您使用的是合理的数据库引擎（例如：没有 SqlServerCE :)）

例如参见[TransactionScope](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)类。您在与数据库交互之前构造这样的对象，当且仅当您调用 Complete() 时，更改才会“提交”。如果您只是不理会它，或者如果您 Dispose() 它，事务将被取消，数据库上的所有更改都将被“回滚”，因此，恢复。

因此，在您的情况下，您可以在表单的 ctor 或 onLoaded() 中打开事务，并在“保存”时打开 Complete()，在任何其他窗口关闭时打开 Dispose()。

虽然这是处理**小型**系统（尤其是单用户系统）的正常方式，但请注意：如果您的系统必须处理许多并发用户，您可能无法以这种方式使用它。事务会阻塞行和表，直到它完成或取消，因此“其他用户”可能会看到很大的延迟。

那么，您需要支持多少用户，他们多久会尝试编辑相同的内容？

-- 编辑：（10 个用户）

有了这么多用户，您将希望避免长时间运行的事务。在表单加载时打开事务将是不可接受的，并且会锁定许多用户，直到一个当前用户关闭窗口。但是，在 Save() 中使用事务来推送一批中的所有更改是可以的。

当然，如果您可以完全消除交易——那就太好了！但是，如果您还需要保持数据完整性，这是非常困难的事情。为了消除事务的需要，您几乎总是必须重新设计数据库端的数据结构，以及获取和使用数据的方式。数据。如果您想重新设计两者，那么我真的建议您首先尝试重新设计它以使用一些现有的数据访问框架，因为即使是基本的 .Net ADO 也具有非常好的在线编辑在 SqlClient 兼容数据库中保存的数据库的功能。 .

因此，假设您不想重写/重新考虑大部分代码，您只需要**缓冲**数据并**延迟**数据库上的所有实际操作。

您可能希望以“简单”形式执行此操作：当您显示表单时，而不是将您的表单直接绑定到数据库驱动的数据源 - 将所有必需的数据下载到一些 BindingList<>s、DataTables 等 - 无论您使用什么容器像。并将您的表单绑定到它们。可能你已经设置了类似的东西。但是，重要的是所有这些数据容器必须**离线**或至少**readonly+delayloaded**。

接下来，您必须拦截用户在 UI 上执行的所有操作。当然，您已经完成了，因为我假设应用程序可以工作：) 由于您的表单绑定到该离线缓存项目，您的应用程序应该对该缓存数据执行操作，并且根本不接触数据库。但还有更多：除了在缓存数据上执行它们之外，您还应该记录哪个表发生了什么。

然后，当最终用户停止玩耍并按下 CANCEL :) - 你只需丢弃所有内容并关闭表单。数据库没有改变。

保存时 - 您打开一个新事务，然后遍历更改列表并在数据库上有效地**重播您的记录器更改**，然后提交事务。

但是请注意两件事：在用户缓存数据的时间和他按下保存的时间数据库可能已经改变。您必须检测到这一点并中止或解决冲突。您应该在该事务中执行此操作，无论是在执行记录的更改期间还是之前。您可以通过简单地将在线数据与离线缓存数据（未**更改**的原始值，而不是用户修改的数据）进行比较来检测它，或者您可以使用其他一些机制，例如 OptimisticLocking，只比较行上的版本标签。

如果您不喜欢记录回放，您可以实现一个“DIFF”实用程序，该实用程序获取修改后的离线数据并以通用方式将其与当前在线表进行比较。这有点困难，但有一个好处：使用这样的实用程序，您最初可以双重缓存数据：一份用于离线参考（只是存储并且用户从未接触过）和一份用于离线编辑（所有那些绑定到形式）。现在，在保存时打开事务并将参考数据与在线数据库进行比较。如果有任何区别 - 您刚刚检测到碰撞。解决/合并/中止/等。如果没有差异，则将修改后的数据与在线数据进行比较，并将找到的所有差异应用于数据库并提交事务。

这些方法中的任何一种都有其优点和缺点：除了实现困难之外，还有缓存的内存问题，如果你敢于复制太大的表，则会出现延迟问题等。

但是 - 一旦解决，它会工作得很好。

当你完成时，你可以去吹嘘你刚刚实现了一个较小的数据集+数据表。我不是在开玩笑，也不是在嘲笑你。我只是想向您展示为什么每个人都告诉您重新调整您的 DAO 层并尝试理解和使用平台设计人员/开发人员已经为您完成的辛勤工作:)

无论如何，我说过如果你重新考虑你的数据结构，你可以完全避免冲突和事务。例如：你为什么要删除行？我知道 SQL 中有一个漂亮的 DELETE 语句，但是，你真的需要删除那一行吗？你不能只添加一些“bool isDeleted”列，当用户从网格中删除该行时 - 只需将该行单元设置为 True 并让应用程序过滤掉任何 isDeleted=true 行而不显示它们？并且不将它们包含在视图和聚合中？奖励：sys/db 管理员现在有一个神奇的工具：取消删除..

让我们更进一步：您需要更新行吗？也许您可以附加一些从（此日期）该行应该有新价格的信息？当然，结构必须有很大的改变：实体没有属性，但有时间戳属性更改的日志（或者行必须有版本号并且是重复的..），查询必须只针对最新的版本数据等优点：数据库现在只能追加。交易，如果需要的话，是超短的。缺点：SELECT 查询很复杂并且可能很慢，尤其是在连接许多表时。

赞成/反对：你的数据库实际上开始看起来非常元而不是数据库......

缺点：将现有应用程序“升级”到这种数据库结构确实是一项艰巨的任务。从头开始编写新应用程序并从 odl 系统导入数据可能会快几倍。

现在，总结一下：

*   我不推荐任何描述的方式。
*   首先，我建议您使用一些 ORM 框架，例如 NHibernate、EntityFramework、DevExpress 的 XPO 或其他任何东西。其中任何一个都会为您节省大量时间。我在这里列出的这三个甚至内置了 OptimisticLocking 碰撞检测。既然有这样的工具，为什么还要使用 SQL 自写框架呢？
*   如果没有，那么接下来我建议使用框架中的现有工具。你使用 SqlClient，为什么不使用 DataSet 和 DataTables？它们与 SqlClient 一起提供，并且它们内置了许多有用的机制，否则您将花费​​数周时间自行实现和测试。学习使用 DataSet 及其碰撞检测及其合并算法，并使用它们。你会在实验和学习上浪费一点时间，但你会在不重新发明轮子上节省大量时间。
*   如果您真的想手动执行，请从数据缓存和记录重放开始。它很容易理解，很容易在你目前使用普通 SQL 查询的任何地方介绍，并且会快速向你介绍各种缓存同步和版本检查问题，你很快就会详细了解为什么所有这些奇怪的上述框架中的机制是否已实施，它们是如何工作的以及它们有什么优点/缺点。
*   关于双重缓存差异方法.. 编写该记录回报会更诱人，但请：只有在您非常了解如何检测/解决/合并冲突时才使用它。在尝试之前至少实施一种记录重放方法。

..and of course yo umay use long-lasting transactions. Dumb-easy to introduce, and they "just irritate" the users.. Well, or even make the system unusable when >90% of the users constantly collide and hit the locks, heh.. No, that was a joke. Don't use long-lasting transactions. They are ok for 1-4 users, or for very sparse databases..

# jquery - 有没有办法通过链接按钮进入手机短信界面？使用 J Query Mobile

> ID：12788029
> 
> 赞同：1
> 
> 时间：2012-10-08T19:16:03.057
> 
> 标签：jquery, html, cordova, jquery-mobile, sms

单击按钮后，有没有办法进入手机短信界面？使用 J 查询移动。

我知道您可以制作一个链接按钮，通过 mailto: 发送电子邮件地址：或使用 tel: 给某人打电话：但是有没有办法打开用户短信界面，特别是 IOS 手机或平板电脑到特定电话号码或链接中的联系人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:22:19.637

我不确定操作系统是否支持，但在我的 Android 2.3 手机上，当我设置带有`sms`协议的链接时，当我单击链接时，它会打开我的短信界面。

例如：

```
<a href="sms:5555555555">Text Now</a> 
```

此外，我相信 PhoneGap 可以通过编程方式在手机上公开短信界面。

# php - Amazon SES 替代值（PHP 库）

> ID：12788035
> 
> 赞同：0
> 
> 时间：2012-10-08T19:16:28.113
> 
> 标签：php, api, amazon-web-services, amazon-ses

我想知道是否有办法替换/替换消息正文中的值。假设我有这样的事情：

```
Hello %user_first %user_last, thanks for checking out our site. Blah, blah, blah...

unsubscribe 
<a href='mysite.com/unsubscribe?uid=%unsibscribe_id&token=%some_token'>
    HERE
</a>
<img src='mysite.com/images/user-opened-email.gif?sid=%some_id'> 
```

其中 %user_first、%user_last、%unsibscribe_id、%some_token 和 %some_id 是用户特定的值，并且从一封电子邮件到另一封电子邮件不能相同。

理想情况下，这只会发生在一次 API 调用中，而不是执行 srt_replace 并多次调用 API。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T02:20:23.947

Amazon SES 服务中没有类似的内置功能。

在 PHP 中，使用一些基本的模板很容易做到这一点。

```
foreach ($users as $user)
{
    $template = <<<TEMPLATE
Hello ${user_first} ${user_last}, thanks for checking out our site. Blah, blah, blah...

unsubscribe 
<a href='mysite.com/unsubscribe?uid=${unsubscribe_id}&token=${some_token}'>
    HERE
</a>
<img src='mysite.com/images/user-opened-email.gif?sid=${some_id}'>
TEMPLATE;

    // (code to send email...)
} 
```

至于这个：

> 理想情况下，这只会发生在一次 API 调用中，而不是执行 srt_replace [原文如此] 并多次调用 API。

我不太清楚你的意思。对操作的每次调用`SendEmail`都会发送一封电子邮件，因此无论如何您都需要对每封电子邮件进行一次 API 调用。

你期待不同的东西吗？

# c# - 非 RD 时保持控制台程序在 Amazon EC2 上运行

> ID：12788036
> 
> 赞同：0
> 
> 时间：2012-10-08T19:16:35.837
> 
> 标签：c#, console, amazon-ec2, remote-desktop

我有一个我已经构建并希望在 Amazon EC2 (Windows) 上运行的控制台程序 (C#)。好的部分是程序运行得非常好。问题是我必须通过远程桌面登录控制台程序才能继续处理。我曾尝试让用户保持登录状态（只需通过 X 关闭关闭），但这无济于事。

该程序是一个无限循环，应该永远保持处理。即使没有 RD，如何让程序运行？

一点额外信息：我已经以默认（一键安装）方式安装了程序。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T19:18:52.230

您可以在未登录时使用 Windows 任务计划程序运行控制台程序。

[http://msdn.microsoft.com/en-us/library/aa383614.aspx](http://msdn.microsoft.com/en-us/library/aa383614.aspx)

[http://en.wikipedia.org/wiki/Windows_Task_Scheduler](http://en.wikipedia.org/wiki/Windows_Task_Scheduler)

请注意，Windows 任务计划程序必须启动该程序。这不允许您以交互式用户的身份（即从您的 RDP 会话）交互式地启动控制台程序，然后使其保持运行。

或者，将控制台程序转换为 Windows 服务相当简单。

# php - 对未定义方法 MDB2_error::disconnect() 的致命错误调用

> ID：12788037
> 
> 赞同：0
> 
> 时间：2012-10-08T19:16:36.817
> 
> 标签：php, iis, mdb2

我在连接到 oracle 和 mssql 的命令行中运行 php 脚本以获取一些数据并写入文件。实际上它是linux机器上的一个cron，需要转移到windows 2008。

该命令引发错误：

> 对第 63 行中 path\to\script.php 中未定义方法 MDB2_error::disconnect() 的致命错误调用

第 63 行的代码是：

```
$db_clw = MDB2::factory($config->database->CLW->dsn);
if (PEAR::isError($db_clw)) {
    $db_clw->disconnect();
    $db_banner->disconnect();
    die($db->getMessage());
} 
```

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:19:33.827

您正在对`MDB2 error`对象调用断开连接方法。该方法没有断开连接方法。

```
$db_clw = MDB2::factory($config->database->CLW->dsn);
if (PEAR::isError($db_clw)) {
    $db_clw->disconnect();
//           ^ method does not exist
    $db_banner->disconnect();
    die($db->getMessage());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:21:02.607

由于你`die`立即调用，可能根本不需要使用`disconnect`，但如果`$db_clw`是`MDB2_Error`，它没有方法`disconnect`，所以你不应该尝试调用它。只有在出现错误时才会尝试调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T19:32:44.120

当它在这里抛出错误时

```
$db_clw->disconnect(); 
```

您已经知道 $db_clw 不是 MDB2 驱动程序，而是一个错误。因此，它没有断开连接的方法，因此应该删除该行。您可能想用 try-catch 将您的其他断开连接语句包围起来，例如：

```
$db_clw = MDB2::factory($config->database->CLW->dsn);
if (PEAR::isError($db_clw)) {
    //We now know $db_clw is an error, don't attempt to disconnect.
    try {
        $db_banner->disconnect();
    } catch (Exception e) {} //ignore it.
    //die($db->getMessage()); Not sure if this is what you want, I'd think
    die($db_clw->getMessage())
} 
```

忽略与断开连接的任何问题，以便`die($db->getMessage());`达到该语句，这将帮助您确定`$db_clw = MDB2::factory($config->database->CLW->dsn);`失败的原因。

刚刚注意到，并更新了上面的代码以将最后一条语句更改为`die($db_clw->getMessage());`，这似乎是您在那里寻找的内容。

# git - 跟踪 git 分支问题

> ID：12788039
> 
> 赞同：0
> 
> 时间：2012-10-08T19:16:42.360
> 
> 标签：git, git-branch

我已经使用 git 克隆了一个 repo。另一个用户创建了一个新分支，称之为 foo（有两个分支 master 和 foo）。我创建了另一个分支 foo 来跟踪远程 foo。所以我运行了这个命令：git branch --set-upstream foo origin/foo。但我有一条错误消息告诉我：`fatal: Not a valid object name: 'origin/foo'`有人可以帮忙吗？当我运行 git remote origin show 我有消息：

```
* remote origin
  Fetch URL: ssh://***
  Push  URL: ssh://***
  HEAD branch: foo
  Remote branches:
    master   tracked
    foo new (next fetch will store in remotes/origin)
  Local branch configured for 'git pull':
    master merges with remote master
  Local ref configured for 'git push':
    master pushes to master (local out of date) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:19:57.053

您必须首先获取或拉取分支到您的本地仓库。

```
git fetch origin
# OR
git pull origin 
```

之后就可以结账了`foo`

```
git checkout foo 
```

而且，您可以使用上面编写的命令来跟踪 origin/foo 与另一个本地分支名称（在您的调用中，只需结帐，因为您使用相同的名称）。

Git 远程只能在您可以拉/推更改的地方。但实际上，git 所做的一切都在您的本地驱动器上，因此您无法与远程分支进行交互，除非您先将它们获取到您的语言环境。`origin/foo`只是`sha-1`您在本地持有的提交 ID 上的标签。使用 时`origin/foo`，您引用的是本地标签，而不是远程状态（在引用远程分支时没有建立 ssh 连接）。

# r - R避免从矩阵到数字的强制

> ID：12788040
> 
> 赞同：2
> 
> 时间：2012-10-08T19:16:51.360
> 
> 标签：r, type-coercion

> **可能重复：**
> [一维矩阵更改为 R 中的向量](https://stackoverflow.com/questions/9949202/1-dimensional-matrix-is-changed-to-a-vector-in-r)

我`matrix`在 R 中使用对象，而且很多时候我只想选择矩阵的一列并将其用作`matrix`一列！是的，我的意思是我不希望 R 自动将其强制转换为一个`numeric`类，因为在这种情况下，含义是 1 列的矩阵。如何避免 R 在一般情况下一直进行这种愚蠢的转换。我不想让我的代码`as.matrix`到处乱七八糟！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T19:20:23.323

采用`drop=FALSE`

```
> matrix(1:10, ncol=2)
     [,1] [,2]
[1,]    1    6
[2,]    2    7
[3,]    3    8
[4,]    4    9
[5,]    5   10
> matrix(1:10, ncol=2)[, 2]
[1]  6  7  8  9 10
> matrix(1:10, ncol=2)[, 2, drop=FALSE]
     [,1]
[1,]    6
[2,]    7
[3,]    8
[4,]    9
[5,]   10 
```

# android - Textview将宽度属性应用于以编程方式添加的字体，android

> ID：12788042
> 
> 赞同：0
> 
> 时间：2012-10-08T19:17:02.883
> 
> 标签：android, textview, width

我有一个 textview，我正在以编程方式在 java 文件中更改字体。当我这样做时，一些文本会被截断。例如，“密码恢复”转到“密码恢复”。我认为 wrap_content 属性正在应用于旧字体，所以我将 textview 的 width 属性更改为 fill_parent，而不是 wrap_content，这样就可以了。仅当文本视图位于一行时才修复它。但是我至少有一个文本视图可以使用新字体进入两行，即使使用 fill_parent，如前所述，它也不会下降一行。因此，“您的密码已通过电子邮件发送至”这一行被剪切为“您的密码已通过电子邮件发送”，最后没有收件人。

我希望将我的 textview 的实际宽度属性应用于我的新字体。我怎样才能做到这一点？

这是我更改字体的方法：

在我的 PassRec.java

```
 private void init() {
    /*
     * load the fonts that are going to be used with this view
     */
    Typeface museoSans700 = Typeface.createFromAsset(JOMAppActivity.instance.getAssets(), "fonts/MuseoSans_700.otf");

    /*
     * start assigning layout elements to local variables
     */
    this.passRecoveryTxtView = (TextView) this.findViewById(R.id.passRecovTxtView);
    this.emailedTxtView = (TextView) this.findViewById(R.id.textView1);
    this.emailTxtView = (TextView) this.findViewById(R.id.userEmailAddPRE);
    this.returnBtn = (Button) this.findViewById(R.id.returnSignInBtn);

    /*
     * Assign the fonts for the login layout
     */
    this.passRecoveryTxtView.setTypeface(museoSans700);
    this.emailedTxtView.setTypeface(museoSans700);
    this.emailTxtView.setTypeface(museoSans700); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:45:43.120

您可以尝试在 TextView 上使用 invalidate()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:55:54.447

谢谢你的回答，我都试过了。我最终只是在我的字符串末尾添加了一些文本（等等），然后以编程方式将文本更改为原始字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T19:21:34.153

转到您的 XML 布局文件并添加

> 安卓：m​​axLines="2"

如果有最小行删除它

# iphone - 将 SDNestedTable 添加到子视图

> ID：12788043
> 
> 赞同：1
> 
> 时间：2012-10-08T19:17:08.620
> 
> 标签：iphone, objective-c, ios, xcode, ipad

各位程序员大家好，

我想知道如何将 SDNestedTable 添加到我的项目中。

以下是 SDNestedTable 的源代码：

[https://github.com/serverdensity/ios-SDNestedTable](https://github.com/serverdensity/ios-SDNestedTable)

我想将此表添加到我的项目中我的一个 XIB 的子视图中。

谢谢，希望有人可以帮助我！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:51:40.393

如果您将 UITableView 添加到您的 XIB 文件，然后单击第二个选项卡（右侧面板）并在其中使该类成为 SDNestedTable 而不是您的 UITableView 所以它使它成为该类，同时假设 SDNestedTable 是 UITableViewController 的子类.

然后，您应该能够将您的属性添加到您的 .h 文件中并将其附加到您的 XIB 中：

```
@property(nonatomic, weak)IBOutlet SDNestedTable *nestedTable; 
```

并且在您的 .m 文件中将包含您需要的所有委托方法，这些委托方法也列在您提供的 github 链接的底部，类似于我想象的 UITableView 和 dataSource 和委托方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T18:10:22.463

存在三个问题（基于对您在[其他问题](https://stackoverflow.com/questions/12791411/works-on-ios-simulator-but-not-on-iphone/12792066)中发布的实际源代码的审查）：

1.  您需要确保在“复制捆绑资源”中包含 NIB 和 PNG 文件；

2.  如果您要支持 iOS 6，则存在一个错误，`SDNestedTable`您必须将from更改`cellIndexPath`为;`SDGroupCell``assign``retain`

3.  如果您将`SDNestedTable`（带有自己的控制器）添加为子视图或`SDNestedTableController`子视图，那么您应该使用[视图控制器包含](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)。

所有这些都在我对这个问题的其他答案中进行了更详细的解释：

*   [适用于 iOS 模拟器但不适用于 iPhone](https://stackoverflow.com/questions/12791411/works-on-ios-simulator-but-not-on-iphone/12792066#12792066)

# java - javaw.exe 占用了我的内存？

> ID：12788046
> 
> 赞同：5
> 
> 时间：2012-10-08T19:17:20.560
> 
> 标签：java, eclipse, javaw

最近，由于内存不足的错误，javaw.exe 进程一直在接管我的计算机并迫使我退出 Eclipse 和其他应用程序。请注意，我根本没有最大化系统，并且我正在处理一些基本的 Java 程序，并且我一次最多打开 2-3 个 Eclipse 选项卡。

我有大约 40-50 个这些 javaw.exe 进程，每个进程占用 22K-26K 的 RAM，最终占用了我机器上 8GB RAM 的 70-80%。这非常令人沮丧，因为我不能做任何这样的工作。我想知道是否有其他人遇到过这种情况并且知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T19:23:34.023

您可能会一次又一次地从 Eclipse 启动同一个程序，而这些程序永远不会退出。切换到*Debug*透视图，然后查看*Debug*视图。杀死所有不应再运行的进程。

话虽如此，`50 * 26KB`远非如此`8GB * 80%`。而且我怀疑任何 Java 程序都可以轻至 26KB。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T18:15:37.547

它通常发生在您执行多线程时。`thread.interrupt()`确保在结束应用程序之前通过为您产生的线程调用 a 来停止您创建的所有线程。这将从您的任务管理器中删除`javaw.exe`- 希望这会有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-11T09:27:31.670

如果您使用的是 JFrame，请尝试以下操作：

```
Main frame=new Main();//Main class extends JFrame.
frame.setdefaultcloseoperation(JFrame.EXIT_ON_CLOSE); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T19:22:48.927

通常每个 Eclipse 实例应该只有一个`javaw.exe`进程。所以请使用进程资源管理器检查它们实际上属于 Eclipse 而不是其他一些后台/僵尸程序。

如果要减少 javaw.exe 内存，可以使用`Help -> Performance -> Reducy Memory now`..

请注意，这将仅减少实际 eclipse`javaw.exe`进程的已用内存。

# magento - Magento 更改主机

> ID：12788050
> 
> 赞同：0
> 
> 时间：2012-10-08T19:17:33.103
> 
> 标签：magento

嗨，我更改了我的主机，我导出了数据库，设置了数据库配置，但是当我加载我的网站时，它会将我重定向到我的旧网站上。哪里有问题？我在哪里可以找到其他设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:22:31.447

更改系统中的设置 - 配置 - 网络 - 不安全/安全 - 基本 URL 或更新数据库中的行：路径 web/unsecure/base_url 和 web/secure/base_url 的表 core_config 数据以反映您的新域名。

# javascript - 如何按值对（关联）数组进行排序？

> ID：12788051
> 
> 赞同：11
> 
> 时间：2012-10-08T19:17:45.930
> 
> 标签：javascript

> **可能重复：**
> [如何在 Javascript 中按关联数组的值对关联数组进行排序？](https://stackoverflow.com/questions/5199901/how-to-sort-an-associative-array-by-its-values-in-javascript)

所以首先我知道从技术上讲 Javascript 没有关联数组，但我不确定如何命名它并获得正确的想法。

所以这是我的代码，

```
var status = new Array();
status['BOB'] = 10
status['TOM'] = 3
status['ROB'] = 22
status['JON'] = 7 
```

而且我想按值对它进行排序，这样当我稍后循环遍历它时，`ROB`首先出现，然后`BOB`等等。

我试过了，

```
status.sort()
status.sort(function(a, b){return a[1] - b[1];}); 
```

但他们似乎都没有真正做任何事情。

在前后将阵列打印到控制台会导致它以相同的顺序出现。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-08T19:23:42.817

数组只能有数字索引。您需要将其重写为对象或对象数组。

```
var status = new Object();
status['BOB'] = 10
status['TOM'] = 3
status['ROB'] = 22
status['JON'] = 7 
```

或者

```
var status = new Array();
status.push({name: 'BOB', val: 10});
status.push({name: 'TOM', val: 3});
status.push({name: 'ROB', val: 22});
status.push({name: 'JON', val: 7}); 
```

如果您喜欢该`status.push`方法，可以使用以下方法对其进行排序：

```
status.sort(function(a,b) {
    return a.val - b.val;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T19:29:14.290

javascript中的“数组”是数字索引的。“对象”就是您所说的关联数组。“对象”本质上是无序的。

所以要做到这一点，你需要稍微改变你的数据结构。

```
var arr = []; // Array

// push a few objects to the array.
arr.push({name: 'BOB', age: 10});
arr.push({name: 'TOM', age: 3});
arr.push({name: 'ROB', age: 22});
arr.push({name: 'JON', age: 7});

var sorted = arr.sort(function(a, b) {
  return a.age - b.age;
});

console.log(sorted); 
```

![在此处输入图像描述](../Images/ac8ac8eca96647b54307cf16c5744ccd.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T19:26:31.677

首先 - 创建一个数组以将其用作映射是不正确的。而是使用对象：

```
var status = {};
status['BOB'] = 10; 
```

Array 是一个具有处理数字顺序索引的逻辑的类。

现在回答您的回复，映射没有顺序，不能保证它会迭代的顺序，所以没有“排序映射”之类的东西

我建议您使用带有键、值的对象的数组：

```
var status = [];
status.push({ key: 'BOB', value: 10 }); 
```

或两个数组：

```
var status = {
    keys: [],
    values: []
};
status.keys.push('BOB');
status.value.push(10); 
```

这取决于您的需求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T19:27:07.357

您应该在 Array 中使用 JavaScript 对象：[jsfile](http://jsfiddle.net/uZKNN/)

```
 var status = new Array();
    status.push({key: 'BOB', value: 10});
    status.push({key: 'TOM', value: 3});
    status.push({key: 'ROB', value: 22});
    status.push({key: 'JON', value: 7});
   status.sort(function(a, b){

       if(a.value > b.value){
        return -1;
       }
        else if(a.value < b.value){
        return 1;
       } 
       return 0;
    }); 
```

# objective-c - 如何使类别类中的方法对其他类可用？

> ID：12788053
> 
> 赞同：1
> 
> 时间：2012-10-08T19:17:50.653
> 
> 标签：objective-c, ios

我想使用从 iosframeworks.com 获得的一个名为`UIImage+ProportionalFill`. 我知道这是一个扩展类别`UIImage`，但是当我尝试在另一个类中使用它的一个方法时，我收到一条消息说`no visible @interface for UIImage declares the selector 'nameOfWhateverMethodIWantToUse'`。收到错误我并不感到惊讶，因为使用它必须比将其放入 XCode 中更多，但是如何使新类别/类中的方法可用于其他类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T19:21:31.353

您只需要在您喜欢使用它的类中导入您的类别...

```
#import "UIImage+ProportionalFill.h" 
```

我通常在头文件中这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T19:21:36.320

编译器需要能够看到方法的声明，它应该在类别的头文件中。您必须在要使用这些方法的任何位置导入头文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T19:22:17.617

您需要`#import`在每个使用所述方法的文件中包含方法声明的标题。

请注意，方法应该加前缀；即`-JDnameOfWhateverMethodIWantToUse`。

还要注意，随意向框架类添加类别很容易导致架构非常糟糕的应用程序变得难以重构/维护。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-08T19:23:49.190

根据您所说的，我认为您只是忘记导入它。

```
#import "UIImage+ProportionalFill.h" 
```

将其写在要使用该方法的类的 .h 文件的顶部。

# yii - Yii：未配置服务器的 APC 缓存抛出错误

> ID：12788055
> 
> 赞同：0
> 
> 时间：2012-10-08T19:18:15.510
> 
> 标签：yii, apc

我已经为 YII 应用程序配置了 APC 缓存，但是当我将一个变量放入缓存中时，第 222 行出现以下错误：

```
APC Cache Error 
```

[http://i.stack.imgur.com/qu2tI.jpg](http://i.stack.imgur.com/qu2tI.jpg)

以下是我`config/main.php`对 APC 缓存的条目：

```
 'cache'=>array(
            'class'=>'system.caching.CApcCache',
            'servers'=>array(
                    array('host'=>'localhost','port'=>11211,'weight'=>60),
                    array('host'=>'localhost','port'=>11212,'weight'=>40),
                ),
    ), 
```

以下是我用来将数据放入缓存的代码：

```
 public function getReligion(){
    $lstofvals=Yii::app()->cache->get('RELIGION');
    if ($lstofvals===false){
        Yii::log('Loading Religion Data from List of Values.');
        $lstofvals=$this->PopulateLSTValsData('RELIGION');
        Yii::app()->cache->set('RELIGION', $lstofvals);
    }
    return $lstofvals;
} 
```

我可以以图形和所有其他详细信息的形式查看 apc.php 的输出。

任何帮助将不胜感激。

还请确认我将基础数据存储在缓存中的策略是否正确。我是 Yii 的新手，发现 MemCache 和 APC Cache 可以很好地满足这些要求。

非常感谢，费萨尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T05:41:09.633

从配置文件中删除整个服务器阵列。APC 未分发。据我所知，服务器用于内存缓存

# python - Selenium / lxml : 获取 xpath

> ID：12788059
> 
> 赞同：4
> 
> 时间：2012-10-08T19:18:45.353
> 
> 标签：python, html, xpath, selenium, lxml

是否有一种`get_xpath`方法或方法可以在 selenium 或 lxml.html 中完成类似的事情。我有一种感觉，我在某个地方看到过，但在文档中找不到类似的东西。

伪代码来说明：

```
browser.find_element_by_name('search[1]').get_xpath()

>>> '//*[@id="langsAndSearch"]/div[1]/form/input[1]' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-17T01:23:16.317

这个技巧在 lxml 中有效：

```
In [1]: el
Out[1]: <Element span at 0x109187f50>

In [2]: el.getroottree().getpath(el)
Out[2]: '/html/body/div/table[2]/tbody/tr[1]/td[3]/table[2]/tbody/tr/td[1]/p[4]/span' 
```

请参阅[`getpath`](http://lxml.de/xpathxslt.html#generating-xpath-expressions).

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T20:22:50.777

无论您使用什么搜索功能，您都可以使用 xpath 重新格式化您的搜索以返回您的元素。例如，

```
driver.find_element_by_id('foo')
driver.find_element_by_xpath('//*@id="foo"') 
```

将返回完全相同的元素。

话虽如此，我认为用这种方法扩展 selenium 是可能的，但几乎没有意义——您已经为模块提供了查找元素所需的所有信息，为什么要使用 xpath（几乎可以肯定更难阅读？）要这样做吗？

在您的示例中，`browser.find_element_by_name('search[1]').get_xpath()`将简单地返回`'//*@name="search[1]"'`. 因为假设是您的原始元素搜索返回了您正在寻找的内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T19:32:32.347

由于元素和 xpath 表达式之间没有唯一的映射，因此不可能有一个通用的解决方案。但是，如果您对您的 xml/html 有所了解，那么您自己编写它可能会很容易。只需从您的元素开始，使用 走上树`parent`并生成您的表达式。

# glassfish - 如何在没有任何 IDE 的情况下运行 EJB 远程应用程序客户端 jar？

> ID：12788060
> 
> 赞同：1
> 
> 时间：2012-10-08T19:18:45.570
> 
> 标签：glassfish, client, ejb

使用 NetBeans，我制作了一个非常简单的 EJB 应用程序客户端（当然还有一个 EJB 服务器），它在 Glassfish 上运行并使用带有 EJB 远程接口的 jar。该应用程序可以正常工作。

但我决定在安装了 Java SE、Java EE 和 Glassfish 的远程机器上运行“.jar”（即应用程序客户端本身）。我搜索了一段时间，似乎很简单（使用Glassfish命令行）。有人能帮助我吗？

谢谢。

# c - 当我使用 cygwin gcc 时 typedef 定义错误

> ID：12788062
> 
> 赞同：0
> 
> 时间：2012-10-08T19:18:51.763
> 
> 标签：c, gcc, cygwin

这是我第一次使用 cygwin gcc，在此之前我在 linux 上使用过它。我遇到了一个我无法在网络中找到的问题解决方案。

我想编译 C 源文件并包含这个源

```
// Value type defenitions
// --- chars --- //
typedef unsigned char UChar;
typedef char Char;
// --- short int --- //
typedef unsigned short UShort;
typedef short  Short;
// --- int --- //
typedef unsigned int UInt;
typedef int Int;
// --- long int --- //
typedef long  Long;                             // 32 bits length
typedef unsigned long  ULong;                   // unsigned 32 bits length
// --- long long int --- //
typedef unsigned long long  UBig;               // 64-bit length unsigned 
typedef long long Big;                          // 64-bit length
// --- decimals --- //
typedef float Float;
typedef double Double;
typedef long double Triple;    // 80-bit length. Actual   properties unspecified. 
```

并得到了这个错误

```
Include/null.h:6: error: redefinition of typedef 'UChar'
Include/null.h:6: error: previous declaration of 'UChar' was here
Include/null.h:7: error: redefinition of typedef 'Char'
Include/null.h:7: error: previous declaration of 'Char' was here
Include/null.h:9: error: redefinition of typedef 'UShort'
Include/null.h:9: error: previous declaration of 'UShort' was here
and so on... 
```

* * *

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:27:02.397

看起来您已经不止一次地包含了相同的标题，其中您有 typedef'edthese。使用[包含保护](http://en.wikipedia.org/wiki/Include_guard)来避免多重包含。

# php - getField 不显示结果

> ID：12788066
> 
> 赞同：0
> 
> 时间：2012-10-08T19:19:06.597
> 
> 标签：php, mysql, database, phpmyadmin

我正在尝试在个人资料页面上显示用户行中的点。我尝试使用以下

```
<?php echo $profile->getField('points');?> 
```

拉出包含用户点的字段，但没有为我正在测试它的用户显示任何内容。我正在测试它以设置 16 点的用户身份登录，但什么都不会显示，有什么想法有什么问题吗？如果我输入 ('username') 或 ('name') 而不是 ('points') ，它将显示这些字段，但不显示点。感谢您的帮助！![在此处输入图像描述](../Images/4edaf6d556d93e73821de2f28e146cf9.png)

![在此处输入图像描述](../Images/b4287a045f073b41483a419d4f50e24d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:41:54.260

我不确定它可能是什么。您是否尝试过使用 error_reporting(E_ALL); 在你的脚本之上？也许使用 or die().mysql_error(); 了解更多..还有为什么点 Char 而不是说 varchar 或 int？

# javascript - Javascript，运行函数或获取混淆代码的全局变量

> ID：12788068
> 
> 赞同：0
> 
> 时间：2012-10-08T19:19:24.380
> 
> 标签：javascript, jquery, obfuscation

我刚买了这个 javascript 混淆脚本：[http ://codecanyon.net/item/php-javascript-obfuscator/411175?ref=WiseLoop](http://codecanyon.net/item/php-javascript-obfuscator/411175?ref=WiseLoop)

现在我想在被混淆的脚本中运行一个函数。当然，这不再起作用，因为函数名称已更改。这是如何实现的？

谢谢。

# c - 使用 C 中的管道创建客户端和服务器时的奇怪行为

> ID：12788070
> 
> 赞同：2
> 
> 时间：2012-10-08T19:19:28.297
> 
> 标签：c, linux, ubuntu, client-server, pipe

在这里，我正在尝试使用管道创建一个简单的客户端和服务器。我分叉了一个过程，使孩子充当客户端，父母充当服务器。下面是代码：

```
#include<unistd.h>
#include<stdlib.h>
#include<stdio.h>
#include<string.h>

void errorMsg(char* msg)
{
    printf("\n%s\n", msg);
//  exit(0);
}

int main()
{
    int servfd[2];
    int clntfd[2];
    int chldpid;    

    if(pipe(servfd) < 0)
        errorMsg("Unable to create server pipe.!!");
    if(pipe(clntfd) < 0)
        errorMsg("Unable to create client pipe.!!!");

    if((chldpid = fork()) == 0)
    {
        char* txt = (char*) calloc(256, sizeof(char));
        close(servfd[1]);
        close(clntfd[0]);
        printf("@Client: Enter a string: ");
        //scanf("%s", txt);  //or fgets
        printf("Entered.!!");
        int n;
        txt = "Anything that you want will not be considered no matter what you do!!";
        char txt1[256];
        write(clntfd[1], txt, 256);

        //if(txt1[strlen(txt1) - 1] = '\n')
        //{ printf("asdasdas");
        //txt[strlen(txt) - 1] = '\0';}

        //int i = 0;
        //for(i = 0; i < 256; i++)
            //printf("%c", txt1[i]);

    while((n = read(servfd[0], txt1, 256)) > 0)
                    printf("\nAt client: %d bytes read\n\tString: %s\n", n, txt1);
}
    else    
    {
        //printf("Parent:   \n\n");
        close(servfd[0]);
        close(clntfd[1]);
        char* txt = NULL;
        int n, n1;  
        n = read(clntfd[0], &txt, 256);
        printf("Server read: %d", n);
        n1 = write(servfd[1], &txt, 256);
        printf("Server write: %d", n1);
        wait(chldpid);
    }
    exit(0);            
} 
```

## 问题一：

这就是正在发生的事情。当我运行程序时，它只打印`Anything that yo`（正好 16 个字符），没有别的。当我试图查看注释中显示的`txt1`使用循环的完整内容时，我发现in`for`之后有空值（天知道从哪里来）。在它之后有正常的内容，它们应该是。知道为什么会这样吗？`yo``txt1`

## 编辑：

当我尝试在适当的位置打印它们时，读取和写入的字节数都是正确的。它打印`256 bytes read`。但是，`txt1`strlen 的大小是 '16'。此外，程序在打印部分字符串后挂起。

## 问题2：

当我尝试从用户那里获取字符串时，`scanf`或者`fgets`在评论中显示时，程序会在我按下回车后立即终止。也不知道为什么会发生这种情况。

对行为的任何见解都会有所帮助。很抱歉有多个问题。谢谢你的时间。！我正在使用 ubuntu 12.04，如果有帮助的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:24:37.863

在您正在执行的父进程中：

```
char* txt = NULL;
.....  
n = read(clntfd[0], &txt, 256); 
```

这是不正确的，因为您正在读取指向的缓冲区中的数据，`txt`但您尚未分配缓冲区！您所看到的是未定义行为的表现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:02:00.310

我在您的代码中添加了各种注释和更正。它现在按预期工作。正如 codeaddict 指出的那样，您的主要问题是您没有分配缓冲区。我很惊讶您没有因 SIGSEGV 崩溃。

```
#include <unistd.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

void errorMsg(char* msg)
{
    printf("\n%s\n", msg);
//  exit(0);
}

// move this into global space and make it const (non modifiable, easyer to debug)
const char text_to_send[] = "Anything that you want will not be considered no matter what you do!!";

int main()
{
    int servfd[2];
    int clntfd[2];
    int chldpid;    

    if(pipe(servfd) < 0)
        errorMsg("Unable to create server pipe.!!");
    if(pipe(clntfd) < 0)
        errorMsg("Unable to create client pipe.!!!");

    if((chldpid = fork()) == 0)
    {
        char txt[256]; // You have to actually allocate a buffer (aka enough memory to hold your string. You have allocated a pointer to a buffer, but no actual buffer)
        close(servfd[1]);
        close(clntfd[0]);
        printf("@Client: Enter a string: ");

        scanf("%s", txt); // since you now actually have a buffer to put the input into this no longer fails

        printf("Entered.!!\n");
        int n;
        char txt1[256];
        write(clntfd[1], text_to_send, sizeof(text_to_send)); // write only as much as you actually have to say, not the whole size of your buffer

        while((n = read(servfd[0], txt1, 256)) > 0)
            printf("\nAt client: %d bytes read\n\tString: %s\n", n, txt1);

        // this is not nessesary at this point, but it is good style to clean up after yourself
        close(servfd[0]);
        close(clntfd[1]);
    }
    else    
    {
        //printf("Parent:   \n\n");
        close(servfd[0]);
        close(clntfd[1]);
        char txt[256]; // same here, you need to actually allocate a buffer.
        int n, n1;  
        n = read(clntfd[0], txt, 256); // read into txt, not &txt. you want to read into your buffer pointed to by txt, not into the part of memory that contains the pointer
        printf("Server read: %d\n", n);
        n1 = write(servfd[1], txt, n); // do not send the whole buffer, just as much as you have actually useful information in it
        printf("Server write: %d\n", n1);

        // close the loose file descriptors, else your child will read on them forever
        close(servfd[1]);
        close(clntfd[0]);

        int status;
        wait(&status); // this is called like this. if you want to use the pid you call waitpid(chldpid, &status, 0);
    }
    exit(0);            
} 
```

# c - sscanf 的参数少于指定的参数？

> ID：12788077
> 
> 赞同：2
> 
> 时间：2012-10-08T19:19:59.643
> 
> 标签：c, cstring, scanf, c-strings

所以我想知道当面对这样的一行时 sscanf 是如何工作的：

```
sscanf(input_string, "%s %s %s", cmd1, cmd2, cmd3); 
```

但是说 input_string 只包含 1 个字符串标记。为 cmd2 和 cmd3 分配了哪些值？是否抛出错误？

我正在使用 GNU C 编译器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T19:23:27.533

不会为额外参数分配任何内容。return from`sscanf`告诉您成功完成了多少次转换，所以在这种情况下它会 return `1`。您通常只与您期望的数字进行比较，并假设输入是错误的：

```
if (3 != sscanf(input_string,"%s %s %s", cmd1, cmd2, cmd3))
    fprintf(stderr, "Badly formatted input (expecting three strings)\n"); 
```

当您从文件中读取时，您通常希望循环执行，直到获得正确的输入：

```
while (3 != scanf("%s %s %s", cmd1, cmd2, cmd3))
    fprintf(stderr, "Please enter 3 strings:"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T19:22:33.380

[http://www.cplusplus.com/reference/clibrary/cstdio/sscanf/](http://www.cplusplus.com/reference/clibrary/cstdio/sscanf/)

> 成功时，该函数返回参数列表中成功填充的项目数。在匹配失败的情况下，此计数可以匹配预期的项目数或更少 - 甚至为零。如果在成功解释任何数据之前输入失败，则返回 EOF。

# javascript - 如何处理 Rails to_json 输出中的 HTML 实体？

> ID：12788079
> 
> 赞同：7
> 
> 时间：2012-10-08T19:20:06.457
> 
> 标签：javascript, ruby-on-rails, json

我正在编写一个在后端使用 Rails 并在前端使用 javascript/backbone 的应用程序。我正在尝试将[一些 rails 模型引导到我的 javascript](http://backbonejs.org/#Collection-reset)中。具体来说，我想将 的内容加载`@courses`到一个名为`window.courses`. 我在一个`html.erb`文件中有以下内容。

```
<%= javascript_tag do %>
    window.courses = JSON.parse('<%= @courses.to_json %>');
<% end %> 
```

我期待`erb`预处理器将其呈现为有效的javascript，就像这样

```
<script type="text/javascript">
//<![CDATA[
    window.courses = JSON.parse('[{"code":"myCourseCode", ...
//]]>
</script> 
```

...但是，相反，我得到了包含[HTML 实体](http://www.w3schools.com/html/html_entities.asp)的代码。

```
<script type="text/javascript">
//<![CDATA[
    window.courses = JSON.parse('[{&quot;code&quot;:&quot;myCourseCode&quot;, ...
//]]>
</script> 
```

显然，当我尝试解析它时，我得到了 javascript 错误。

有谁知道我如何处理这些 HTML 实体以生成有效的 javascript？我意识到一种选择是[对客户端的实体进行转义](https://stackoverflow.com/a/1912546/765287)，但这似乎是一个迂回的解决方案。有没有一种方法可以让 Rails 生成不需要转义的 JSON？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-02T19:56:51.027

如果您打算使用 raw(obj.to_json) 您必须确保设置了以下内容。

```
ActiveSupport.escape_html_entities_in_json = true 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T20:16:52.500

我的评论解决了这个问题，仅供记录：

Rails 转义使用`<%= 'string' %>`. 这样，就可以保存输出用户数据。因此，如果您不希望 Rails 转义输出，则必须使用`raw('string')`.

在您的代码中，这将是： `<%= raw(@courses.to_json) %>`

# c++ - 类内的typedef

> ID：12788080
> 
> 赞同：0
> 
> 时间：2012-10-08T19:20:12.573
> 
> 标签：c++, typedef

我不能在课堂上执行 typedef 吗？

```
#include <vector>
using namespace std;
    class List {
    public:
           typedef int Data;
           class iterator;
           pair<iterator,bool> insert(const Data nodeId); //<-error
    private:
    class Node {
        typedef vector<NodeId> DepList;//<-error
    };
    } 
```

我收到一个错误`missing type specifier - int assumed. Note: C++ does not support default-int`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:22:42.060

你可以。

我猜错误与这对有关。您是否包含正确的标题：

```
#include <utility> 
```

此外，如果您没有`using namespace std;`or `usgin std::pair;`，则需要编写`std::pair`，而不仅仅是`pair`.

PS 请不要使用`using namespace std;`，尤其是头文件。

**编辑**查看您的编辑，您也需要`#include <vector>`.
**EDIT2**：您尚未定义`NodeId`，但已将其用于`typedef`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:32:34.987

这是一个误导性的错误信息。既没有`iterator`，也没有`NodeId`定义，因此不能在表达式中使用。

您可以使用它（使迭代器成为对前向声明类的引用）： `pair<iterator&,bool> insert(const Data nodeId);`

并为 NodeId 添加前向声明： `class NodeId;`

然后做： `typedef vector<NodeId&> DepList;`

# c# - 您可以自动关闭/打开布尔值吗？

> ID：12788081
> 
> 赞同：-1
> 
> 时间：2012-10-08T19:20:21.057
> 
> 标签：c#, .net, logic, conditional-statements

好的，我已将 Key CellX 声明为布尔值 True。从某种意义上说，只要这个值保持为真，我的数据就会继续插入，如果我把它设为假，它就会停止在它的计数上。现在我必须在数据库中插入 400 个订单时停止……如果 CellX ==400 则“False”否则“True”，我是否可以实际应用 Key CellX“True”之类的条件

我们能做到这一点...我在用 C# 做。

IC 你们中的大多数人都给出了很好的逻辑。在 web.xml 中声明了更多 CellX 以及其他键，例如 CellA、B、C 和 A、B，正在 DB 中接收数据，因此要阻止它达到 400，我可以手动更改 CellX 布尔值或如何实现当单元格 A、B、C 达到 400 时，将使我的布尔值变为假的条件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:22:00.353

你可以做类似的事情

```
myBool = (CellX == 400); 
```

但是，在您的帖子中，您将 CellX 称为布尔值和可以与整数值 400 进行比较的东西。给定的变量可以是布尔值或整数。

如果 CellX 是您的布尔值，请执行以下操作：

```
CellX = (myLoopCounter == 400); 
```

语法

```
myBool = (myLoopCounter == 400); 
```

评估如下：

*   评估 myLoopCounter 是否正好是 400（真或假）
*   将上一步的结果赋值给 myBool

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:24:27.610

不能像那样动态评估变量（至少不是我认为您正在寻找的方式，`Func`尽管如此）。但是您可以将其创建为类上的只读属性，每次都会对其进行评估（因为属性主要是方法调用的语法不同形式）：

```
private bool LimitReached
{
    get
    {
        return (CellX == 400);
    }
} 
```

因此，如果您`LimitReached`一遍又一遍地检查值，如果值`CellX`也在变化，它应该会发生变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T19:29:55.853

这是你想要做的吗？

```
int Counter = 1;
bool Continue = true;
while(Continue)
{
    // Insert one row
    if (Counter == 400)
        Continue = false;
    Counter++;
} 
```

这也可以写成：

```
for(int i = 0; i < 400; i++)
{
    // insert one row
} 
```

# python - 将 jpg 转换为列表列表

> ID：12788087
> 
> 赞同：0
> 
> 时间：2012-10-08T19:20:31.140
> 
> 标签：python, list, jpeg

我试图弄清楚如何将 jpg 转换为列表列表（使用 python 3.2.3），例如：

```
[ 
[red,blue,red,etc..],           #line1
[blue,red,yellow, etc...],      #line2
[orange,yellow,black,etc...],   #Last Line
] 
```

基本上，主列表中的每个列表都表示从图像顶部开始的水平颜色值线。

我认为这很容易，只需编写一个小脚本即可从 jpg 文件中提取数据。哈！在调查之后，我意识到这将比我真正想做的工作多得多。

到目前为止，我正在考虑将其转换为位图，然后将数据写入合适的格式是我最好的选择。当然，我必须弄清楚如何从位图中提取信息。

现在，因为我确定其他人以前必须这样做，所以必须有人知道我可以解决这个问题的更简单的方法。我试过环顾四周，但到目前为止还没有运气。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:35:46.137

1.  安装[PIL](http://www.pythonware.com/products/pil/)并打开你的镜像：

2.  打开您的图像作为 Numpy 数组（确保已安装 numpy）：

    ```
    image = numpy.asarray(Image.open('pic.jpg')) 
    ```

3.  使用 numpy.split 将结果数组拆分为列表：

    ```
    lists = numpy.split(image) 
    ```

玩你的清单。

# xaml - WinRT - XAML FlipView 控件 - 不寻常的新行为

> ID：12788093
> 
> 赞同：1
> 
> 时间：2012-10-08T19:21:03.700
> 
> 标签：xaml, windows-8, microsoft-metro, windows-runtime, winrt-xaml

我想知道是否有人可以帮助我使用 Windows 8 中的 FlipView 控件。我有一个使用 FlipView 的应用程序。在最近的 Windows 8 更新之前，一切都运行良好，现在 FlipView 在某些情况下会翻转“两次”。

下面是一些重现错误的示例 XAML：

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <FlipView >
        <Grid Height="762" Background="#FF29AA29">
            <TextBlock HorizontalAlignment="Center" Text="1" VerticalAlignment="Center" 
                       Foreground="Black" FontSize="96"/>
        </Grid>
        <Grid Height="762" Background="#FF192780">
            <TextBlock HorizontalAlignment="Center" Text="2" VerticalAlignment="Center" 
                       Foreground="Black" FontSize="96"/>
        </Grid>
        <Grid Height="762" Background="Green">
            <TextBlock HorizontalAlignment="Center" Text="3" VerticalAlignment="Center" 
                       Foreground="Black" FontSize="96"/>
        </Grid>
        <Grid Height="762" Background="Orange">
            <TextBlock HorizontalAlignment="Center" Text="4" VerticalAlignment="Center" 
                       Foreground="Black" FontSize="96"/>
        </Grid>
        <Grid Height="762" Background="Blue">
            <TextBlock HorizontalAlignment="Center" Text="5" VerticalAlignment="Center" 
                       Foreground="Black" FontSize="96"/>
        </Grid>
        <Grid Height="762" Background="Red">
            <TextBlock HorizontalAlignment="Center" Text="6" VerticalAlignment="Center" 
                       Foreground="Black" FontSize="96"/>
        </Grid>
        <Grid Height="762" Background="Yellow">
            <TextBlock HorizontalAlignment="Center" Text="7" VerticalAlignment="Center" 
                       Foreground="Black" FontSize="96"/>
        </Grid>
    </FlipView>
</Grid> 
```

如您所见，它是一个非常简单的示例，在 FlipView 中带有编号的网格。

现在，如果您单击向前或向后翻转按钮（左右两侧略微变灰的按钮）而不将鼠标移动到其他位置（即将鼠标移到向前按钮上并单击多次而不再次移动鼠标）它会翻转 1,2,4,6,7（请参阅我的 xaml 中的数字）。

但是，如果您在两次点击之间稍微移动鼠标，您将获得正确的行为 (1,2,3,4,5,6,7)。

本地机器和模拟器模式都存在此错误。

在模拟器中使用手指拖动的方式进行翻转时不会出现这种情况。

有没有人对如何解决这个问题有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T09:31:12.203

事实证明，我下载的 Windows 8 更新搞砸了我的触摸板的驱动程序，这个问题纯粹是与驱动程序相关的——虽然很奇怪

# c++ - 自己的矩阵类乘法运算符

> ID：12788097
> 
> 赞同：0
> 
> 时间：2012-10-08T19:21:18.207
> 
> 标签：c++, operator-overloading, matrix-multiplication

我编写了一个 IntegerMatrix 类来添加我自己的方法来处理矩阵。现在我写了一个这样的函数：

```
IntegerMatrix** IntegerMatrix::multiplyMatrix(IntegerMatrix** table2) 
```

（这是一个双指针，因为我持有大量指向 4x4 2D 数组的指针。）所以我可以这样做：

```
matrix1.multplyMatrix(matrix2) 
```

一个小问题是`*`没有为我自己的班级定义。所以我想重载这个运算符，我可以做这样的事情：

```
sum += this->table[i][k] * table2[k][j]; 
```

但是我怎样才能得到正确的`i`和`k`在重载的运算符中，它的定义是这样的：

```
IntegerMatrix IntegerMatrix::operator*(const IntegerMatrix & k); 
```

我现在无法弄清楚的唯一问题是如何获得正确的值？

编辑：

我重写了这个，现在我有：

```
IntegerMatrix IntegerMatrix::operator*(const IntegerMatrix & table2)
{
    int i, j, k;
    int sum;
    IntegerMatrix * result = new IntegerMatrix(SIZE);

    for (i = 0; i < SIZE; i++) {
        for (j = 0; j < SIZE; j++) {
            sum = 0;
            for (k = 0; k < SIZE; k++) {
                sum += this->table[i][k] * table2[k][j];
            }
            result[i][j] = sum;
        }
    }
    return *result;

} 
```

这给了我一个错误 [] ：

```
Binary '[' : 'IntegerMatrix' does not define this operator or a conversiont o a type acceptable to the predefined operator. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:29:21.203

我不明白你的问题，但这里是矩阵乘法正常工作原理的简短演示：

```
class IntegerMatrix {
    int table[3][3];

public:
      IntegerMatrix& operator*=(const IntegerMatrix& rhs) {
           //multiply table by rhs.table, store in data.
           return *this;
      }
};
IntegerMatrix operator*(IntegerMatrix lhs, const IntegerMatrix& rhs)
{return lhs*=rhs;} //lhs is a copy, so we can alter and return it 
```

# 供您编辑

你有代码

```
IntegerMatrix * result = new IntegerMatrix(SIZE); //pointer to an IntegerMatrix
...
result[i][j] = sum; //assign sum to the jth index of matrix # i 
```

实际上，我想你想要

```
result->table[i][j] = sum; //sum to the ixj index of the result matrix. 
```

此外，您的功能是泄漏的，因为您有一个`new`，但没有`delete`。在您的情况下这很容易解决，因为您不需要新的。（您是 Java 还是 C# 背景？）

```
IntegerMatrix result(SIZE);
...
        result[i][j] = sum;
...
return result; 
```

与上述所有内容无关，您实际上可能希望`[]`为您的整数矩阵提供一个运算符。

```
class row {
    int* data;
    int size;
public:
    row(int* d, int s) :data(d), size(s) {}
    int& operator[](int offset) {
        assert(offset<size);
        return data[offset];
    }
};

row operator[](int column) {
    assert(column<SIZE); 
    return row(table[column], SIZE);
} 
```

这将允许您编写：

```
IntegerMatrix result;
result[i][j] = sum; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:56:16.697

在某种[Cargo-Cult 编程](http://en.wikipedia.org/wiki/Cargo_cult_programming)意义上，您可能会携带一些工件。：-/

例如：我猜`**`你的 multiplyMatrix 原型上的双重间接（

```
void printMatrix(int ** myMatrix, int rows, int columns); 
```

双间接只是一个指向指针的指针。这是一种实现[将低级 C 风格的 2D 数组作为参数传递](https://stackoverflow.com/questions/8767166/passing-2d-array-to-function)的具体实现点的方法。但是，当您使用碰巧代表矩阵的抽象类时，您不必执行此操作。因此，一旦您将矩阵大小和数据本身封装在 IntegerMatrix 类中，您就不需要这样的东西了：

```
void printMatrix(IntegerMatrix ** myMatrix); 
```

您更有可能希望传递对封装数据的类的简单引用，如下所示：

```
void printMatrix(IntegerMatrix const & myMatrix); 
```

实际上，您应该从乘法函数返回一个新矩阵，至少如果您使用它来实现运算符重载...因为从语义上讲，人们编写类似的东西`a * b;`并对其进行修改是没有意义的 a. （它可以，但你不应该。）所以你可以选择返回一个矩阵值实例：

```
IntegerMatrix IntegerMatrix::multiplyMatrix(IntegerMatrix const & rhs); 
```

...或返回指向新对象的指针：

```
IntegerMatrix * IntegerMatrix::multiplyMatrix(IntegerMatrix const & rhs); 
```

历史上许多库都选择按指针返回，因为从函数中的局部变量按值返回将涉及在返回时进行复制。返回指针很快（它只“复制”一个 32 位/64 位数字），而复制对象实例和其中的大数据块很慢。所以很多库只会在任何地方使用矩阵指针......问题是很难知道最终`delete`对象是谁的责任。智能指针是确保这一点的一种方法：

```
unique_ptr<IntegerMatrix> IntegerMatrix::multiplyMatrix(IntegerMatrix const & rhs); 
```

但是 C++11 有一些鬼鬼祟祟的能力，可以在没有混乱的情况下保持同样的速度。如果您从函数中按值返回某些内容，并且编译器确定不会再次使用该值（因为它超出了范围），那么它可以像指针一样快地“移动”。这要求您支持[RValue 引用](https://stackoverflow.com/tags/rvalue-reference/info)的移动构造，其中有各种技巧。

真的有很多细微差别。如果您将此作为一种教育练习，我建议您慢慢来，并阅读一个指导您完成每一步的教程，而不是直接跳入火中。如果您在矩阵中使用低级 C 数组和动态分配，请将它们更改为 a `std::vector`of `std::vector`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T17:29:52.603

对于`IntegerMatrix`您使用的一个对象`this->table[i][k]`来引用您保存矩阵数据的数组，而对于`table2`对象引用和`result`指针，您正在使用`table2[k][j]`and `result[i][j]`。

我认为您想要做的是：

```
IntegerMatrix IntegerMatrix::operator*(const IntegerMatrix & table2)
{
    int i, j, k;
    int sum;
    IntegerMatrix * result = new IntegerMatrix(SIZE);

    for (i = 0; i < SIZE; i++) {
        for (j = 0; j < SIZE; j++) {
            sum = 0;
            for (k = 0; k < SIZE; k++) {
                sum += this->table[i][k] * table2.table[k][j];
            }
            result->table[i][j] = sum;
        }
    }
    return *result;
} 
```

# mysql - 查询帮助 - 最大的不同记录

> ID：12788098
> 
> 赞同：0
> 
> 时间：2012-10-08T19:21:23.323
> 
> 标签：mysql, database, postgresql

我有一张桌子`activities`，上面有人物、运动和参加这项运动的日期。例子：

```
person | sport      | date
--------------------------------
jane   | soccer     | 09/15/2012
sam    | basketball | 09/10/2012
jane   | tennis     | 09/12/2012
sam    | basketball | 09/08/2012
sam    | soccer     | 09/04/2012
jane   | tennis     | 09/01/2012
sam    | basketball | 08/27/2012
jane   | football   | 08/23/2012 
```

我需要包含一个人参加一项运动的最新日期的行。结果将是：

```
person | sport      | date
--------------------------------
jane   | soccer     | 09/15/2012
sam    | basketball | 09/10/2012
jane   | tennis     | 09/12/2012
sam    | soccer     | 09/04/2012 
jane   | football   | 08/23/2012 
```

您可以在此处看到，例如，Jane 在 9 月 1 日打网球的行被排除在外，因为她也在 9 月 12 日的较新日期打网球。

这个查询是什么？我更喜欢非子查询答案，但欢迎所有答案。此外，欢迎 MySQL 和 PostgreSQL 的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:28:09.907

这里是：

```
 select person, sport, max( date) as date 
      from activities
      group by person, sport 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T19:32:34.290

您可以`row_number()`在 PostgreSQL 中使用（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!1/04d79/4)）：

```
select *
from 
(
  select person, sport, date,
    row_number() 
      over(partition by person, sport order by date desc) rn
  from yourtable
) x
where rn = 1 
```

# xml - 在 JAXB XmlAdapters 中为 Spring RESTful 控制器使用注入

> ID：12788103
> 
> 赞同：2
> 
> 时间：2012-10-08T19:21:36.487
> 
> 标签：xml, spring, rest, jaxb

我的应用程序需要`JAXB XmlAdapter`诸如

```
public class CategoryTypeAdapter extends XmlAdapter<String, Category> {

    @Autowired
    protected CategoryService categoryService;

    public CategoryTypeAdapter() {
    }

    @Override
    public String marshal(Category v) throws Exception {
        return (v == null) ? null : v.getId();
    }

    @Override
    public Category unmarshal(String v) throws Exception {
        // noop
        if (StringUtils.isBlank(v)) {
            return null;
        }
        // load via service
        return this.categoryService.getCategory(v);
    }
} 
```

问题：如何配置 Spring`Jaxb2RootElementHttpMessageConverter`以在适当的 mashaller 中设置此适配器？

我知道有 Spring OXM 库，但我不清楚如何将 OXM 类与注释驱动的 REST 控制器一起使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T22:02:34.227

您不能将 XmlAdapter 关联到 Spring 的消息转换器，而是使用正常的 JAXB 机制将此 XmlAdapter 注册为您需要的类型：

```
public class MyRootElement{

   @XmlJavaTypeAdapter(CategoryTypeAdapter.class)
   private Category category;

} 
```

现在关于如何注入到的问题`CategoryService`，`CategoryTypeAdapter`有几种方法可以将 Spring 依赖项注入到非 Spring 托管对象中，如果您有 AspectJ 基础设施，可能最简单的方法是`@Configurable`在适配器上使用注释。

# asp.net-mvc-4 - 从 NuGet 包安装 N2 - 下一步是什么？

> ID：12788105
> 
> 赞同：0
> 
> 时间：2012-10-08T19:21:46.703
> 
> 标签：asp.net-mvc-4, n2

我正在尝试使用版本 2.2.2.2 的 NuGet 包安装 N2 CMS。我还想安装 Dinamic Razor 模板。到目前为止，我已经在 Visual Studio 2012 中创建了一个新的 MVC 解决方案，安装了 Lucene.net RC，安装了 N2 CMS 2.2.2.2 和 Dinamico 模板包。

我的解决方案现在包含一个 N2 文件夹，其中包含一个 zip 文件。我是否需要解压缩文件以提取用于解决方案的位？必须做什么才能使用 SQL Server？最后，N2 安装过程是如何工作的？我是否将我的解决方案部署到 IIS，然后从那里浏览我的站点？我已经看到了 Web PI 和 WebMatrix 的逐步安装。但是，我有兴趣找到成功构建和安装 N2 位的一站式资源。有谁知道这是否存在？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:06:01.130

虽然文档并不完整。它似乎确实提供了足够的信息来将 N2 集成到 MVC 解决方案中。

该文档可以从以下链接下载为 Word 文档：

[http://n2cms.codeplex.com/releases/view/70951](http://n2cms.codeplex.com/releases/view/70951)

# tabs - 在 ember 中实现标签面板的最佳方法是什么？

> ID：12788113
> 
> 赞同：7
> 
> 时间：2012-10-08T19:22:10.110
> 
> 标签：tabs, ember.js

我是 ember 的新手，正在尝试构建一个 Ember 驱动的 Web 应用程序。我已经阅读了各种 tuts 并研究了几个例子。基本概念很清楚，但现在我一直在尝试实现标签面板。我的方法如下：

**看法**

```
Configurator.TabPanelView = Ember.View.extend({
    classNames: ['tabPanel'],
    templateName: 'tabPanel'
}); 
```

**模板**

```
<script type="text/x-handlebars" data-template-name='tabPanel'>
  <div class='tabHead'>
      <ul>
          {{#each tabViews}}
          <li {{action "{{this.actionName}}" target="{{this.value}}"}} >{{this.title}}</li>
          {{/each}}
      </ul>
      <div class="tab-content">{{outlet}}</div>
  </div>
</script> 
```

**应用中的使用**

```
var tab= Configurator.TabPanelView.create({

            classNames: ['assortment'],
            tabViews: [{ title: 'First', value:'Foo', actionName: 'firstTab' },{title: 'Second', value:'Foo', actionName: 'secondTab' }],

            firstTab: Ember.View.extend({
                templateName: 'first'
            }),
            secondTab: Ember.View.extend({
                templateName: 'second'
            })
        });
        tab.appendTo("body"); 
```

TabTemplate 正确呈现，但如果我尝试单击 li 元素，则会引发以下错误

> 未捕获的错误：断言失败：目标 <（Ember.View 的子类）：ember217> 没有操作 {{this.actionName}}

我也很好奇我是否应该使用路由器来实现标签。但据我所知，路由器作用于应用程序级别，旨在用于单个 UI 组合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:40:23.000

问题出在您的模板中：

```
<li {{action "{{this.actionName}}" target="{{this.value}}"}} >{{this.title}}</li> 
```

AFAIK，动作不能被绑定，所以当你写这个时，它会尝试调用方法`{{this.actionName}}`而不是`firstTab`，例如。

我认为这是一个典型的例子，你应该使用带有方法的[Ember.CollectionView](http://emberjs.com/api/classes/Ember.CollectionView.html)，即：`itemViewClass``click`

```
App.MyCollectionView = Ember.CollectionView.extend({
  tagName: 'ul',
  templateName: 'the-template-name',
  itemViewClass: Ember.View.extend({
    click: function() {
      var actionName = this.get('content.actionName'),
          target = this.get('controller.target');
      target.send(actionName);
    }
  })
}); 
```

上面的代码肯定是不对的，但是思路就在这里。

但我认为路由器是做到这一点的正确方法。我建议您看一下[@ghempton 的 Ember Router 示例](http://ghempton.github.com/ember-router-example/#)，它定义了带有`Ember.Router`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:49:16.947

您有 2 个选项：

1）每个标签页都有自己的控制器，视图，也必须在路由器中定义

```
<script type="text/x-handlebars" data-template-name="tabs"> 
    <div> 
      <ul class="nav nav-tabs"> 
        {{#view Bootstrap.TabItem item="info"}} 
          <a {{action gotoInfo}}>Info</a> 
        {{/view}} 
        {{#view Bootstrap.TabItem item="anamnese"}} 
          <a {{action gotoAnamnese}}>Anamnese</a> 
        {{/view}} 
        {{#view Bootstrap.TabItem item="medication"}} 
          <a {{action gotoMedication}}>Medication</a>  
        {{/view}} 
      </ul> 
      {{outlet}} 
    </div> 
</script>      

Bootstrap.TabItem = Ember.View.extend({
    tagName: 'li',
    classNameBindings: ['isActive:active'],

    isActive: function() {
        return this.get('item') === this.get('controller.selectedTab');
    }.property('item', 'controller.selectedTab').cacheable()
}); 
```

2）所有标签页都在一个大视图中，标签页将被隐藏或显示

```
{{#view Ember.TabContainerView currentView="info"}}
  <ul class="nav nav-tabs">
    {{#view Bootstrap.TabView value="info"}}<a>Info</a>{{/view}}
    {{#view Bootstrap.TabView value="anamnese"}}<a>Anamnese</a>{{/view}}
    {{#view Bootstrap.TabView value="medication"}}<a>Medication</a>{{/view}}
  </ul>
  {{#view Ember.TabPaneView viewName="info"}}
  {{view EEPD.InfoView}}
  {{/view}}
  {{#view Ember.TabPaneView viewName="anamnese"}}
  {{view EEPD.AnamneseView}}
  {{/view}}
  {{#view Ember.TabPaneView viewName="medication"}}
  {{view EEPD.MedicationView}}
  {{/view}} 
{{/view}}

Bootstrap.TabView = Ember.TabView.extend({
    tagName: 'li',
    classNameBindings: ['isActive:active'],

    isActive: function() {
        return this.get('value') === this.get('tabsContainer.currentView');
    }.property('tabsContainer.currentView').cacheable()
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T06:16:33.653

有两种方法可以实现选项卡面板。

如果你希望你的标签可以收藏，那么你应该使用路由器来实现它们：

**模板**

```
<script type="text/x-handlebars" data-template-name="application">  
  <div class="tabpanel">
    <div class="tabs">
      <div {{action "goToFirstTab"}}>First tab</div>
      <div {{action "goToSecondTab"}}>Second tab</div>
    </div>
    {{outlet}}
  </div>
</script> 

<script type="text/x-handlebars" data-template-name="firstTab">
  First Tab content
</script>

<script type="text/x-handlebars" data-template-name="secondTab">
  Second Tab content
</script> 
```

**代码**：

```
var App = Ember.Application.create();
App.ApplicationController = Ember.Controller.extend();
App.ApplicationView = Ember.View.extend();
App.FirstTabView = Ember.View.extend({templateName: "firstTab"});
App.FirstTabController = Ember.Controller.extend();
App.SecondTabView = Ember.View.extend({templateName: "secondTab"});
App.SecondTabController = Ember.Controller.extend();
App.Router = Ember.Router.create({
  root: Ember.Route.extend({
    goToFirstTab: Ember.Route.transitionTo("firstTab"),
    goToSecondTab: Ember.Route.transitionTo("secondTab"),
    index: Ember.Route.extend({
      route: "/",
      redirectsTo: "firstTab"
    }),
    firstTab: Ember.Route.extend({
      route: "/firstTab",
      connectOutlets: function (router) {
        router.get('applicationController').connectOutlet('firstTab');
      }
    }),
    secondTab: Ember.Route.extend({
      route: "/secondTab",
      connectOutlets: function (router) {
        router.get('applicationController').connectOutlet('secondTab');
      }      
    })    
  })
});
App.initialize(App.Router); 
```

第二种方式，无路由器。

**模板**（请注意，操作的目标已更改）

```
<script type="text/x-handlebars" data-template-name="application">  
  <div class="tabpanel">
    <div class="tabs">
      <div {{action "goToFirstTab" target="controller"}}>First tab</div>
      <div {{action "goToSecondTab" target="controller"}}>Second tab</div>
    </div>
    {{outlet}}
  </div>
</script> 

<script type="text/x-handlebars" data-template-name="firstTab">
  First Tab content
</script>

<script type="text/x-handlebars" data-template-name="secondTab">
  Second Tab content
</script> 
```

**代码**（几乎相同，只是现在将与选项卡相关的代码移至 ApplicationController。

```
var App = Ember.Application.create();
App.ApplicationView = Ember.View.extend();
App.Router = Ember.Route.create();
App.FirstTabView = Ember.View.extend({templateName: "firstTab"});
App.FirstTabController = Ember.Controller.extend();
App.SecondTabView = Ember.View.extend({templateName: "secondTab"});
App.SecondTabController = Ember.Controller.extend();
App.ApplicationController = Ember.Controller.extend({
  view: App.FirstTabView.create(),
  goToFirstTab: function () {
    this.connectOutlet("firstTab");
  },
  goToSecondTab: function () {
    this.connectOutlet("secondTab");
  }
});
App.initialize(App.Router); 
```

# wso2 - WSO2 数据服务 JSON 和 NULL 值

> ID：12788114
> 
> 赞同：2
> 
> 时间：2012-10-08T19:22:13.040
> 
> 标签：wso2, wso2esb, wso2carbon, wso2dss

当我将本机 JSON 消息构建器用于数据服务时。

它将空值转换为例如 "mobileNumber": **{"@nil":"true"}**

有没有办法让输出为 "mobileNumber": **null**？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-27T11:08:25.623

是的，此要求将在 DSS 3.2.2 版本中提供。[JIRA](https://wso2.org/jira/browse/CARBON-15046)是为此问题创建的，它在 gson 消息生成器和格式化程序中得到修复。DSS 3.2.2 尚未发布。[请从此处](https://wso2.org/jira/browse/DS?selectedTab=com.atlassian.jira.plugin.system.project%3Aversions-panel)找到该版本的暂定日期

# wpf - Windows 8 中的屏幕保护程序预览有何不同？

> ID：12788121
> 
> 赞同：30
> 
> 时间：2012-10-08T19:22:37.983
> 
> 标签：wpf, windows-8, screensaver

我正在开发一个基于 WPF 的简单屏幕保护程序，但无法使用缩略图预览。

当您打开显示控制面板并配置屏幕保护程序时，选定的屏幕保护程序应该会在对话框中显示缩略图预览：

![显示属性 - 屏幕保护程序](../Images/e9431f6cb4b7d9ad5cdaf6209cd50c24.png)

我在网上找到了很多关于如何做到这一点的好例子，包括：

*   [在 WPF 中编写屏幕保护程序](http://stuff.seans.com/2008/09/01/writing-a-screen-saver-in-wpf/)
*   [WPF 屏幕保护程序（Codeplex）](http://wpfscreensaver.codeplex.com/)
*   [CC 心屏幕保护程序](http://cchearts.codeplex.com/)

按照这些示例，我无法进行任何操作 - 预览缩略图变黑，但没有其他内容出现。下载其中的每一个（以及其他几个）并运行它们都会得到相同的结果 - 一个空白的预览缩略图。我以前在 Windows 7 上做过这个，并不难，所以我有点沮丧。

将二进制文件复制到 Windows XP 机器上，我发现它们中的每一个都成功显示了预览缩略图。

因此，Windows 7 和 Windows 8 之间显然发生了一些变化。

**我需要做些什么不同的事情来使我的 WPF 屏幕保护程序能够在 Windows 8 上正确显示缩略图预览？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-18T06:43:56.540

我发现将代码从 Win 8 移动到 Xp 最常见的问题是权限和依赖关系。检查文件是否需要一些奇怪的权限（不确定预览运行使用什么权限）以及是否尊重所有依赖项（以及它们的权限）。

如果我没记错的话，所有 Windows 屏幕保护程序都只是使用命令行参数重命名的 exe 文件。也许尝试重命名并直接运行它？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-28T16:17:16.420

检查您正在使用的框架版本，并尽可能尝试使用客户端配置文件

如果有帮助，也试试这个小解决方法：

> 在 Windows 资源管理器中，转到 > **选项**>**更改文件夹和搜索选项** ，然后单击“**查看”选项卡并取消选中“****始终显示图标，从不缩略图**”框。

我希望它应该工作。

# javascript - Javascript 和 JQuery 数组问题

> ID：12788123
> 
> 赞同：0
> 
> 时间：2012-10-08T19:22:47.803
> 
> 标签：javascript, json, jsonp

我有一个 WCF 项目，该项目将数据推送到 javascript/jquery 前端，但我遇到的问题是我试图使用数据将每个字段插入谷歌地图。即使 C# 的列表中只有一条记录，但在数组中，当我尝试通过警报框查看数据时，它会多次显示该记录。我究竟做错了什么？请在下面找到我的代码：

```
function onSuccess(result) {
    var DArray = new Array();
    var data = result;

    $.each(data, function (index, item) {
        alert(DArray.push(result));
        // alert(data.LocId);
        //document.getElementById("locid").value = data.LocId;
        //alert(data.Title);
        //alert(data.Loc);
        //alert(data.Lat);
        //alert(data.Long);
        // alert(data.length);

    });

    function onFail() {
        document.getElementById("locid").value = "Error";
        document.getElementById("title").value = "Error";
        document.getElementById("loc").value = "Error";
        document.getElementById("lat").value = "Error";
        document.getElementById("long").value = "Error";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:29:01.267

我相信您有重复项，因为您正在为数据数组中的每个项目推送相同的结果。

```
var result = [1, 2, 3, 4];
var DArray = new Array();
var data = result;

$.each(data, function (index, item) {
        alert(DArray.push(result));
});

// DArray would be [[1,2,3,4], [1,2,3,4], [1,2,3,4], [1,2,3,4]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:39:28.023

你推`result`哪个是一个数组，每次，当你应该推`item`

```
var DArray = new Array();
var data = result;

$.each(data, function (index, item) {
        alert(DArray.push(item));
}); 
```

或者，

```
DArray[index] = item 
```

# ctags - fortran90/95 的 ctags 替代品

> ID：12788126
> 
> 赞同：0
> 
> 时间：2012-10-08T19:23:03.863
> 
> 标签：ctags, fortran90, fortran95

我已经使用`ctags`过，`FORTRAN 90/95`但我正在寻找更好的东西，可以告诉我标签的所有引用的东西。

我只是使用了 fortran 理解并喜欢它，但它太贵了。我有一个别人写的大代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T05:32:03.307

[您可以尝试使用代码块 - 有一个由http://darmar.vgtu.lt/](http://darmar.vgtu.lt/)编写的 fortran 附件。具有语法高亮和函数搜索等功能。不如 MS Visual Studio/IVF 组合好，但仍然可用。

# iphone - 分发条款未找到私钥

> ID：12788127
> 
> 赞同：0
> 
> 时间：2012-10-08T19:23:05.080
> 
> 标签：iphone, ios, xcode

我下载了分发配置证书、ios_distribution 证书和用于推送通知的 aps_production.cer。我将它们全部安装在钥匙链中。主分发证书没有私钥。我的开发证书确实并且运行良好。它类似于链接的问题，但我已经完成了这些步骤。

[堆栈溢出链接](https://stackoverflow.com/questions/11122046/profile-doesnt-match-any-valid-certificate-private-key-pair-in-the-default-keyc)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:31:38.283

当您第一次在钥匙串应用程序中创建证书时，您缺少与证书关联的私钥对应的 .p12 文件。

您可能正在使用另一台用于生成公钥/私钥的 Mac。您只需将其导出，然后在新 Mac 上导入。

# java - INSERT 失败，因为以下 SET 选项的设置不正确：'ARITHABORT'

> ID：12788128
> 
> 赞同：1
> 
> 时间：2012-10-08T19:23:06.197
> 
> 标签：java, sql-server-2008, jtds

我已经阅读了 Stackoverflow 中关于这个问题的主题，但我真的还没有解决方案。

我的问题是在 SQL Server 2008 的存储过程中将字符串或 Clob 作为 XML 参数发送。我正在使用 jTDS 连接它。我读过我必须将“ARITHABORT”设置为 ON，但我真的不知道在哪里可以做到。

也许在我自己的 JAVA 或 DB 会话中......请帮助！（对不起我的英语非常糟糕）

好的！这是给我错误的方法：

```
 private static final String PR_SV_MUDA_STATUS_EVENTO_CONCLUIDO = "{CALL PR_SV_MUDA_STATUS_EVENTO_CONCLUIDO(?, ?, ?, ?)}";

   public String modificaStatus(Connection connection, Integer eventoRobo, String path) throws SQLException {
    Connection conn = null;

    conn = GenericHibernateDAO.criaConexao();

    CallableStatement cs2 = conn.prepareCall(PR_SV_MUDA_STATUS_EVENTO_CONCLUIDO);

    cs2.setInt(1, eventoRobo);
    cs2.setString(2, null);
    cs2.setString(3, null);
    cs2.setString(4, path);
    cs2.execute();
    conn.close();

    return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-17T03:39:22.870

我今天遇到了这个问题并得到了解决。我在 sql server 2008 r2 中的列上创建了过滤索引，但插入时会出现此错误。看到这个问题没有完全回答，因为在每次插入时总是打开 arithabort 可能很乏味。我发现一个博客显示问题出在数据库兼容性级别。将兼容级别从 80 (2000) 更改为 100 (2008)，问题得到解决。不确定将兼容性级别更改为 90 是否可以解决此问题，但值得一试。

SQL Server 兼容性级别和要在此处更改的命令。[http://msdn.microsoft.com/en-us/library/bb510680.aspx](http://msdn.microsoft.com/en-us/library/bb510680.aspx)

如果这不起作用或者您无法更改兼容模式，还有另一种解决方法，方法是在我在这里谈论的博客中添加触发器[http://chrismay.org/2013/05/23/interesting-problem-with -sql-server-arithabort-filtered-indexes-calculated-columns-and-compatibility-mode-of-80/](http://chrismay.org/2013/05/23/interesting-problem-with-sql-server-arithabort-filtered-indexes-calculated-columns-and-compatibility-mode-of-80/)

请注意，此更改是在测试数据库上完成的，在生产中进行此类更改之前，应测试所有应用程序。在更改之前，请确保您的 DBA 可以这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:55:26.893

我相信这是查询

```
 SET ARITHABORT ON; 
```

这需要在您的存储过程之前运行。您可以在获得连接后立即运行它。

处理完成后，您可能需要运行下面的查询。

```
 SET ARITHABORT OFF; 
```

这些查询可以使用您的 java 程序中的附加语句来运行。

# python - python：如何通过http put在mongo中存储数据

> ID：12788130
> 
> 赞同：4
> 
> 时间：2012-10-08T19:23:12.617
> 
> 标签：python, mongodb, rest, bottle

我正在尝试使用 python 瓶框架创建一个 REST API 应用程序

我希望能够通过 HTTP PUT 请求在 mongodb 中插入数据。

到目前为止，我能够使用 HTTP GET 从 mongodb 获得响应。

请帮助我通过 HTTP PUT 在 mongodb 中插入数据。

我必须插入的 JSON 格式如下：

```
{"_id": "id_1", "key_1": "value_1"} 
```

[我正在使用[这个扩展](https://chrome.google.com/webstore/detail/advanced-rest-client-appl/hgmloofddffdnphfgcellkdfbfbjeloo)来获取和放置 http 响应]

```
import json
import bottle
from bottle import route, run, request, abort
from pymongo import Connection

connection = Connection('localhost', 27017)
db = connection.mydatabase

@route('/documents', method='PUT')
def put_document():
    data = request.body.readline()
    if not data:
        abort(400, 'No data received')
    entity = json.loads(data)
    if not entity.has_key('_id'):
        abort(400, 'No _id specified')
    try:
        db['documents'].save(entity)
    except ValidationError as ve:
        abort(400, str(ve))

@route('/documents/:id', method='GET')
def get_document(id):
    entity = db['documents'].find_one({'_id':id})
    if not entity:
        abort(404, 'No document with id %s' % id)
    return entity

run(host='localhost', port=8080) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T23:38:26.750

您的代码的以下修订版本似乎可以按您的预期工作：

```
import json

from bottle import route, run, request, abort
from pymongo import Connection

connection = Connection('localhost', 27017)
db = connection.mydatabase

@route('/documents', method='PUT')
def put_document():
    data = request.body.readline()
    print(data)
    if not data:
        abort(400, 'No data received')
    entity = json.loads(data)
    if not entity.has_key('_id'):
        abort(400, 'No _id specified')
    try:
        db.documents.insert(entity)
    except ValidationError as ve:
        abort(400, str(ve))

@route('/documents/<_id>', method='GET')
def get_document(_id):
    entity = db.documents.find_one({'_id': _id})
    if not entity:
        abort(404, 'No document with id %s' % _id)
    return entity

run(host='localhost', port=8080) 
```

我让*MongoDB*运行并执行脚本，在`localhost`port上启动服务器`8080`，然后在 shell 上执行以下命令，得到预期的结果：

```
$ echo '{"_id": "id_1", "key_1": "value_1", "key_2": "value_2"}' | curl -X PUT -d @- http://localhost:8080/documents
$ curl http://localhost:8080/documents/id_1
{"_id": "id_1", "key_1": "value_1", "key_2": "value_2"} 
```

# c++ - c 或 c ++ 中的灰度图像翻转？

> ID：12788132
> 
> 赞同：0
> 
> 时间：2012-10-08T19:23:19.857
> 
> 标签：c++, c, image, grayscale

我正在尝试水平翻转灰度图像。指针 fp 指向原始图像，指针 fp1 正在创建水平翻转的图像。该程序正在正确执行，但输出图像最差......

```
 for( i =0 ;i<width ; i++)
     for(j=0; j <height; j++)
              idata[i][height - 1 -j] = ( (unsigned char)fgetc(fp));
    //flipping image          
for( i =0 ;i<width ; i++)
     for(j=0; j <height; j++)
              putc(idata[i][j] , fp1); 
```

图像的标题副本没有问题。我认为问题出在 for 循环中...请帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T19:35:37.083

你确定你没有混淆宽度和高度吗？代码似乎假设数据是按列顺序读取的，而它很可能是按行顺序读取的。尝试翻转 for 循环和翻转维度，如下所示：

```
for(j = 0; j < height; j++)
    for(i = 0; i < width; i++)
        idata[width - 1 - i][j] = ( (unsigned char)fgetc(fp));

//flipping image          

for(j = 0; j < height; j++)
    for(i = 0; i < width; i++)
        putc(idata[i][j] , fp1); 
```

# javascript - 调试 badaWAC 应用程序

> ID：12788136
> 
> 赞同：1
> 
> 时间：2012-10-08T19:23:33.780
> 
> 标签：javascript, bada

我正在使用api为`bada`平台开发 web 应用程序。`badaWAC`调试`badaWAC`应用程序的方法有哪些？这个目标可能存在一些浏览器插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T11:29:38.543

您可以在桌面浏览器上完成此操作，该浏览器提供了更丰富的调试工具集，例如[Chrome 的开发者工具](https://developers.google.com/chrome-developer-tools/docs/overview/)。这就是[PhoneGap Emulation 介入](http://emulate.phonegap.com/)的地方。

使用您的 Google Chrome 桌面浏览器，您可以模拟 PhoneGap 的 JavaScript API。这包括从 deviceready 事件到 navigator.device.capture 到您的自定义插件的所有内容。通过利用您的桌面浏览器，您可以加快初始开发过程并快速调试 DOM、JavaScript 和资源加载。

了解PhoneGap Emulation 仅适用于JavaScript 很重要。虽然模拟器将使用设备皮肤，但它无法模拟特定移动平台浏览器的呈现功能。

如果你只是想通过浏览器进入和调试 javascript，你可以通过[这个工具](http://debug.phonegap.com/)轻松地做到这一点，它就像谷歌的调试工具。

# php - 根据 count(*) 获取帖子数

> ID：12788137
> 
> 赞同：0
> 
> 时间：2012-10-08T19:23:34.230
> 
> 标签：php

我正在尝试获取我拥有的帖子数量

这是我的查询

```
$Query="
    SELECT t.*,u.*,c.*
    FROM posts as t
    LEFT JOIN relations as r on r.post_id = t.post_id
    LEFT JOIN users as u on t.auther_id = u.auther_id
    LEFT JOIN categories as c on c.cate_id = r.cate_id
    GROUP BY t.post_id
";

    $Query=mysql_query($Query);
    $numberOfPosts=mysql_num_rows($Query); 
```

这个查询效果很好

但我正在尝试转换它，我想让它更快

我想使用`count(*)`而不是`t.*`

因为当我使用 t.* 时，它会获取帖子和类别的完整数据

但我只想得到计数，所以我决定使用`count(*)`但我不知道如何将它与这样的查询一起使用

# 编辑

我已经用 SELECT 替换`t.*,u.*,c.*`了 SELECT`count(t.*)`

但我得到了mysql错误`Warning: mysql_fetch_assoc(): supplied argument`

# 编辑2：

我正在尝试选择`count(t.post_title)`

我得到了这个结果

```
Array ( [count(t.post_id)] => 10 ) 
```

但是我只有2个帖子！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:44:31.967

```
$Query="
    SELECT t.*,u.*,c.*
    FROM posts as t
    LEFT JOIN relations as r on r.post_id = t.post_id
    LEFT JOIN users as u on t.auther_id = u.auther_id
    LEFT JOIN categories as c on c.cate_id = r.cate_id
    GROUP BY t.post_id
";

    $Query=mysql_query($Query);
    $numberOfPosts=mysql_num_rows($Query); 
```

让我们退一步分析一下这个查询。

您正在从查询中使用的四个表中的三个中选择***所有内容。***连接创建了一些逻辑来将您选择的内容限制为正确的类别、作者等。一天结束时，您会从数据库中获取大量数据，然后在 PHP 中简单地询问它返回了多少行 ( `mysql_num_rows`)。相反，@Dagon 试图在评论中建议的是，你让 MySQL 简单地计算结果，然后返回。

让我们重构您的查询：

```
$query = "
    SELECT COUNT(t.post_id) AS qty
    FROM posts as t
        LEFT JOIN relations AS r ON r.post_id = t.post_id
        LEFT JOIN users AS u ON t.auther_id = u.auther_id
        LEFT JOIN categories AS c ON c.cate_id = r.cate_id
        GROUP BY t.post_id
";

    $result = mysql_query($query);
    $result_row = mysql_fetch_assoc($result);
    $numberOfPosts = $result_row['qty']; 
```

（您也可以使用[Barattlo 的自定义 execute_scalar 函数](http://www.barattalo.it/2009/11/09/execute-scalar-for-php/)使其更具可读性。）

我需要查看您的表结构，以便在如何优化查询和获得所需结果方面提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:34:05.780

尝试这样做：

```
 $Query="
  SELECT count(t.*) as count_all
  FROM posts as t
  LEFT JOIN relations as r on r.post_id = t.post_id
  LEFT JOIN users as u on t.auther_id = u.auther_id
  LEFT JOIN categories as c on c.cate_id = r.cate_id
  GROUP BY t.post_id
  ";

$Query=mysql_query($Query);
$numberOfPosts=mysql_num_rows($Query); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T19:34:27.870

你想做

`SELECT count(t.id) AS count FROM ....`

```
//do query with PDO or whatever you are using

$rows = mysql_fetch_assoc();
$num_rows = $rows['count']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T19:38:49.580

您可能应该简单地使用

```
SELECT count(*) as postingcount FROM posts 
```

为什么？

因为你没有 WHERE 子句，所以没有限制。您的 JOINS 不会向结果集中添加更多行，最后您的 GROUP BY 会合并由于加入一行而可能发生的 post_id 的每个重复出现。结果应该只计算，所以假设你想知道的实数是表posts里面的数据集的个数，你不需要任何join，而且做count(*)真的是对表中的一个非常快的操作mysql。

记得检查 mysql_query 是否返回 false，因为那样你必须检查 mysql_error() 并查看查询出错的原因。

# performance - Node.js 突然变得异常缓慢

> ID：12788143
> 
> 赞同：7
> 
> 时间：2012-10-08T19:23:49.173
> 
> 标签：performance, node.js

我们有这个带有 2 个节点进程的架构。

一个轮询私有 API 并将更改推送到第二个节点（如果有）。第二个节点处理数据并调用一堆其他 API 并最终通过 socket.io 向客户端（一个 HTML5 网站）发出一个更改事件

这第二个节点将始终处理数据，并且即使没有连接客户端也将始终发出更改。所以在我看来，CPU 或内存的使用并没有受到连接客户端数量的很大影响。另请注意，此架构仍在私有暂存环境中运行。

一切运行良好，我们已经准备好上线，直到我们注意到几天后，可能是一周后，第二个节点突然变得非常慢，而第一个节点仍然很好。

它变得如此糟糕，甚至两个节点之间的连接也会超时，并且它们通过 localhost 在同一个网络上。浏览到 socket.io/socket.io.js 文件也需要超过 10 秒。

我知道在没有看到任何代码的情况下很难理解这个问题，但我有点担心，因为我们必须在几天内上线，而且我的日志没有显示任何内容，谷歌也没有帮助。

**什么是建设的好习惯你有没有经历过这样的事情？问题是什么，你是如何解决的？**

**什么是 node.js 的好监视器和分析器？（最好是免费的）**

**构建具有大量传出 API 调用的 node.js 应用程序有哪些好的做法？**

任何可以帮助我解决甚至发现实际问题的正确方向的人将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T21:04:37.427

从未经历过这样的事情，但可能是第二个节点通过执行 CPU 密集型工作或同步等待某些资源来阻塞事件循环。

在您的代码中添加一些日志记录，以查看第二个节点处理第一个节点推送的每个更改所花费的时间。可能是某种类型的更改会消耗 CPU 10 秒左右才能完成。

您还应该开始监控内存、CPU 和网络连接。当事情变慢时，您的监控将提供一些关于瓶颈在哪里的线索。

对于监控，您可以尝试以下 3 个工具

1.  [节点时间](http://nodetime.com/)
2.  [蜂鸟](http://projects.nuttnet.net/hummingbird/)
3.  [节点监视器](https://github.com/lorenwest/node-monitor)

另请阅读[http://nodetime.com/blog/monitoring-nodejs-application-performance](http://nodetime.com/blog/monitoring-nodejs-application-performance)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:26:38.213

听起来您在第二个节点的某处有内存泄漏，可能是由于调用了太多匿名函数等……您是否注意到您的 RAM 使用量在运行时略有上升？

# tsql - 在存储过程中，将数组传递到表值函数中进行解析

> ID：12788156
> 
> 赞同：1
> 
> 时间：2012-10-08T19:24:41.950
> 
> 标签：tsql

> **可能重复：**
> [找不到列“dbo”或用户定义的函数或聚合“dbo.Splitfn”，或者名称不明确](https://stackoverflow.com/questions/2091830/cannot-find-either-column-dbo-or-the-user-defined-function-or-aggregate-dbo-s)

--基于任何分隔符解析数组的函数

```
CREATE FUNCTION valuedfunction
(
    @string VARCHAR(MAX),
    @delimiter CHAR(1)
)
RETURNS @output TABLE(
    data VARCHAR(256)
)
BEGIN

    DECLARE @start INT, @end INT
    SELECT @start = 1, @end = CHARINDEX(@delimiter, @string)

    WHILE @start < LEN(@string) + 1 BEGIN
        IF @end = 0 
            SET @end = LEN(@string) + 1

        INSERT INTO @output (data) 
        VALUES(SUBSTRING(@string, @start, @end - @start))
        SET @start = @end + 1
        SET @end = CHARINDEX(@delimiter, @string, @start)
    END

    RETURN

END 
```

-- 支持以逗号分隔的员工 ID 值列表的存储过程。我使用函数 ---(valuedfunction) 来获取员工数据。

```
CREATE PROCEDURE commaseparated  
@keyList varchar(40) 
AS 
SELECT Title, Birthdate 
FROM HumanResources.Employee WITH (NOLOCK) 
WHERE EmployeeID IN (dbo.valuedfunction(@keyList)) 
```

--这是问题所在：我收到以下错误：我错过了什么
exec commaseparated '10,11,12,13';

--ERROR MESSAGE: Msg 4121, Level 16, State 1, Procedure commaseparated, Line 4 找不到列“dbo”或用户定义的函数或聚合“dbo.valuedfunction”，或者名称不明确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:33:12.620

写

```
WHERE EmployeeID IN (select data  from dbo.valuedfunction(@keyList)) 
```

# php - 在 php 代码的输出结果中搜索和替换

> ID：12788157
> 
> 赞同：1
> 
> 时间：2012-10-08T19:25:00.497
> 
> 标签：php

我在 PHP 文件中编写了以下代码来列出目录的内容，它工作得很好

```
<?php

  $dir = opendir(getcwd());
  while (($file = readdir($dir)) !== false) {
    echo "filename : ". $file ."<br />";
  }
  closedir($dir);

?> 
```

我想对输出（字符串）结果进行一些更改。我尝试了搜索和替换 PHP 代码`str_replace()`，但我无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:45:56.847

您可以尝试以下方法

```
$dir = opendir(getcwd());
$max = 3 ;
$current = 0 ;
print('<table id="hor-minimalist-a" summary="Employee Pay Sheet"><tbody>');
while ( ($file = readdir($dir)) !== false ) {
    if ($file == "." || $file == "..") {
        continue;
    }
    $current++;
    if($current > $max)
        print("<tr>");
    printf("<td>%s</td>",$file);
    if($current >= $max)
    {
        print("</tr>");
        $current = 0;
    }
}
closedir($dir);
print('</tbody></table>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:43:36.167

**试试这个代码**

您可以`if(!is_dir($file))`在代码中使用条件

```
 $dir = opendir(getcwd());
  while (($file = readdir($dir)) !== false) {

    if(!is_dir($file))
      {
            echo "filename : ". $file ."<br />";
    }       
  }
  closedir($dir);

?> 
```

# c# - 编译 ac# 应用程序时设置平台有什么不同吗？

> ID：12788162
> 
> 赞同：14
> 
> 时间：2012-10-08T19:25:30.570
> 
> 标签：c#, optimization, jit, compiler-optimization, cil

在VS2012（以及之前的版本...）中，您可以在构建项目时指定目标平台。不过，我的理解是，C# 被“编译”为 CIL，然后在主机系统上运行时被 JIT 编译。

这是否意味着指定目标平台的*唯一*原因是故意限制用户在某些架构上运行软件或强制应用程序在 64 位机器上以 32 位运行？我看不出这与优化有关，因为我猜这发生在 CIL--> Native 阶段，这发生在主机架构上的 Just-In-Time 阶段？

[这个 MS Link](http://msdn.microsoft.com/en-us/library/zekwfyz4%28v=vs.80%29.aspx)似乎没有提供任何替代解释，我找不到任何建议，例如，您应该发布同一应用程序的单独 32 / 64 位版本 - 为“anycpu”编译的东西似乎合乎逻辑应该同样运行，并且优化将再次应用于 JIT 阶段。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-08T19:26:46.100

> 这是否意味着指定目标平台的唯一原因是故意限制用户在某些架构上运行软件或强制应用程序在 64 位机器上以 32 位运行？

是的，如果您将本机代码与托管代码混合使用，这一点至关重要。但是，它不会改变在运行时优化的内容。

如果您的代码是 100% 托管的，那么 AnyCPU（或新的 AnyCPU Prefer 32-Bit）可能没问题。编译器优化将相同，JIT 将在运行时基于当前执行平台进行优化。

> 我找不到任何建议，例如，您应该发布同一应用程序的单独 32 / 64 位版本

除非您与非托管代码执行互操作，否则没有理由这样做，在这种情况下，这将需要单独的 32 位和 64 位 DLL。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-08T19:38:13.667

里德在这里有一个很好的答案。然而，我认为同样重要的是要指出这个设置只是 DLL 中的一个标志 -**在大多数情况下它几乎没有任何影响**。运行时加载程序（启动 .NET 运行时的本地代码位）负责查看此标志，并指示要启动的 .NET 运行时的适当版本。

正因为如此 - 该标志主要只在它设置在 EXE 文件上时才重要 - 而在 DLL 上设置时没有效果。例如 - 如果您有一个由 64 位标记的 .NET EXE 或任何 CPU 标记的 .NET EXE 使用的“32 位标记的 .NET DLL”，并且您在64 位机器 - 然后加载程序将启动 64 位运行时。当需要加载 32 位 DLL 时，为时已晚 - 已经选择了 64 位运行时，因此您的程序将失败（我相信您将收到 BadImageFormatException）。

# xcode - 坚持为 OSX Mountain Lion xCode 设置 git-tf - TFS 集成

> ID：12788167
> 
> 赞同：1
> 
> 时间：2012-10-08T19:25:46.007
> 
> 标签：xcode, osx-mountain-lion, path-variables, git-tf

我一直在尝试按照说明（Git-TF_GettingStarted.html）设置从 xcode 到 TFS 2010 的 git - tf 集成

我认为我的问题是正确设置路径变量。

我在终端中，并通过“open .profile”创建了一个 .profile 文件

我输入了以下两行：

```
export PATH=”/Applications/Xcode.app/Contents/Developer/usr/libexec/git-core/”:$PATH 
export PATH=”/Users/ssmith/Git-Tf/”:$PATH 
```

已保存，已启动终端，但终端无法识别我的命令：

```
Stevens-MacBook-Pro:~ ssmith$ git tf
-bash: git: command not found 
```

你知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T21:05:00.510

从该错误消息中，我猜测 git 没有安装，或者至少没有正确安装。有关如何在 Mac 上设置 git 的信息，请参阅[http://git-scm.com/book/en/Getting-Started-Installing-Git#Installing-on-Mac 。](http://git-scm.com/book/en/Getting-Started-Installing-Git#Installing-on-Mac)

# python - Django：使用 PIL、Amazon S3 和 Boto 调整图像大小和上传

> ID：12788172
> 
> 赞同：2
> 
> 时间：2012-10-08T19:26:17.760
> 
> 标签：python, django, amazon-s3, python-imaging-library, boto

我正在尝试找出获取用户上传的图像、调整其大小并将原始图像以及调整后的图像存储在 Amazon S3 上的最佳方法。

我正在运行 Django 1.5，使用 PIL 调整图像大小，并使用 Boto 处理将图像文件上传到 S3。现在我已经通过将原始图像上传到 S3，使用 PIL 使用 S3 路径打开图像并调整它的大小，然后将调整大小的版本保存到 S3 来工作，但这似乎不是最有效的方法来做到这一点。

我想知道是否有办法在使用用户上传的图像本身上传到 S3 之前调整图像的大小（让 PIL 打开图像文件本身时遇到问题），以及这是否会比我设置的方式更快现在好了。我似乎无法在 PIL 文档或其他任何地方找到答案。我应该提一下，我不想只使用第三方应用程序来处理这个问题，因为我的目标之一是从根本上学习和理解正在发生的事情。

有没有比我目前设置的更有效的方法来做到这一点？对每一步发生的事情以及为什么以这种方式进行设置最有意义的一般解释将是理想的。

我还应该提到，将图像上传到 S3 似乎比我将图像存储在我的服务器上需要更长的时间。上传到 S3 时是否存在正常延迟，或者是否存在可能会减慢 S3 上传速度的设置方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:25:51.957

我有一个由 Heroku 中的 Django + Tastypie 和 S3 中的图像仓库组成的架构。当用户从前端（用 JS 编写）上传照片时，我所做的就是将照片调整为特定尺寸（最大 600 x 600 尺寸），始终保持纵横比。我将粘贴代码来执行此操作（它有效）。

视图.py：

```
class UploadView(FormView):
    form_class = OriginalForm
    def form_valid(self, form):
        original = form.save()
        if  original.image_width > 280 and original.image_height > 281:
            if original.image_width > 600 or original.image_height > 600:
                original.resize((600, 600))
                if not original.image:
                    return self.success(self.request, form, None, errors = 'Error while uploading the image')
                original.save()
                up = UserProfile.objects.get(user = request.user.pk)
                #Save the images to s3
                s3 = S3Custom()
                new_image = s3.upload_file(original.image.path, 'avatar')
                #Save the s3 image path, as string, in the user profile
                up.avatar = new_image
                up.save
        else:
            return self.success(self.request, form, None, errors = 'The image is too small')       
        return self.success(self.request, form, original) 
```

在这里，我要做的是检查图像是否大于 280 x 281（前端的裁剪正方形具有该大小），并检查图像的一侧是否大于 600 像素。如果是这种情况，我调用我的原始类的（自定义）方法调整大小......

模型.py：

```
class Original(models.Model):
    def upload_image(self, filename):
        return u'avatar/{name}.{ext}'.format(            
            name = uuid.uuid4().hex,
            ext  = os.path.splitext(filename)[1].strip('.')
        )

    def __unicode__(self):
        return unicode(self.image)

    owner = models.ForeignKey('people.UserProfile')
    image = models.ImageField(upload_to = upload_image, width_field  = 'image_width', height_field = 'image_height')
    image_width = models.PositiveIntegerField(editable = False, default = 0)
    image_height = models.PositiveIntegerField(editable = False, default = 0)  

    def resize(self, size):
        if self.image is None or self.image_width is None or self.image_height is None:
            print 'Cannot resize None things'
        else:
            IMG_TYPE = os.path.splitext(self.image.name)[1].strip('.')
            if IMG_TYPE == 'jpeg':
                PIL_TYPE = 'jpeg'
                FILE_EXTENSION = 'jpeg'
            elif IMG_TYPE == 'jpg':
                PIL_TYPE = 'jpeg'
                FILE_EXTENSION = 'jpeg'
            elif IMG_TYPE == 'png':
                PIL_TYPE = 'png'
                FILE_EXTENSION = 'png'
            elif IMG_TYPE == 'gif':
                PIL_TYPE = 'gif'
                FILE_EXTENSION = 'gif'
            else:
                print 'Not a valid format'
                self.image = None
                return
            #Open the image from the ImageField and save the path
            original_path = self.image.path
            fp = open(self.image.path, 'rb')
            im = Image.open(StringIO(fp.read()))
            #Resize the image
            im.thumbnail(size, Image.ANTIALIAS)
            #Save the image
            temp_handle = StringIO()
            im.save(temp_handle, PIL_TYPE)
            temp_handle.seek(0)
            #Save image to a SimpleUploadedFile which can be saved into ImageField
            suf = SimpleUploadedFile(os.path.split(self.image.name)[-1], temp_handle.read(), content_type=IMG_TYPE)
            #Save SimpleUploadedFile into image field
            self.image.save('%s.%s' % (os.path.splitext(suf.name)[0],FILE_EXTENSION), suf, save=False)
            #Delete the original image
            fp.close()
            os.remove(original_path)
            #Save other fields
            self.image_width = im.size[0]
            self.image_height = im.size[1]
        return 
```

您需要的最后一件事是包含自定义 s3 方法的“库”：

```
class S3Custom(object):
    conn = S3Connection(settings.AWS_ACCESS_KEY_ID, settings.AWS_SECRET_ACCESS_KEY)
    b = Bucket(conn, settings.AWS_STORAGE_BUCKET_NAME)
    k = Key(b)
    def upload_file(self, ruta, prefix):
        try:           
            self.k.key = '%s/%s' % (prefix, os.path.split(ruta)[-1])
            self.k.set_contents_from_filename(ruta)
            self.k.make_public()
        except Exception, e:
            print e
        return '%s%s' % (settings.S3_URL, self.k.key) 
```

您的设置文件中应该有 AWS_ACCESS_KEY_ID、AWS_SECRET_ACCESS_KEY、AWS_STORAGE_BUCKET_NAME、S3_URL。

# php - SQL 查询：不能按名为“order”的列排序？

> ID：12788173
> 
> 赞同：5
> 
> 时间：2012-10-08T19:26:24.353
> 
> 标签：php, sql, sql-order-by

我将现有脚本中的一列拉到我的模板文件中，一切都很好。

唯一的问题是，这个脚本有一个名为 的列`order`，然后每一行在该列中都有一个数字来显示哪个应该在顶部等。如果我将查询设置为“ `ORDER BY name`”例如，一切正常，但是当我使用“ `ORDER BY order`”，然后我得到一个 SQL 错误。
我可以没有一个名为 的专栏`order`吗？我无法更改列名，因为它是脚本的一部分。

有办法解决吗？

这是我的 SQL 查询中的行：

```
SELECT * FROM categories WHERE hide = 0 ORDER BY order 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T19:28:41.910

`order`是 SQL 中的关键字。因此，如果您希望使用关键字作为名称，请在其周围使用反引号字符：

```
SELECT * FROM categories WHERE hide = 0 ORDER BY `order` 
```

试试看:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-07T12:21:36.197

如果您使用 Postgres，只需使用“column_name”，例如：

```
SELECT "order" FROM table_name WHERE "order" > 10 ORDER BY "order"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T19:28:27.433

尝试使用反引号：

```
SELECT * FROM `categories` WHERE `hide` = 0 ORDER BY `order` 
```

ORDER 是 SQL 中的保留字。您可以使用保留字作为列名，但在引用它时必须将其括在反引号中。将所有列名括在反引号中是一种很好的做法，这样您就不会遇到此问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T19:28:50.087

尝试在列名周围使用反引号，应该可以。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T19:29:44.080

从[手册](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)：

> 如果引用保留字，则可以将其用作标识符。

所以你可以像这样使用它：

```
SELECT * FROM categories WHERE hide = 0 ORDER BY `order` 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T19:31:08.567

AS`order`是一个 SQL 关键字，您应该使用反引号将其作为字段标识符正确转义：

```
SELECT ... FROM ... ORDER by `order` 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-29T14:32:53.463

用括号为我工作。按 [T].[ORDER] 的顺序从 dbo.test 中选择 T.*

# perl - 使用 Perlbrew 安装古老的 perls

> ID：12788174
> 
> 赞同：3
> 
> 时间：2012-10-08T19:26:24.893
> 
> 标签：perl, perlbrew

我正在尝试使用`perlbrew`安装一些较旧的 Perls。我相信由于旧式版本号而失败了。根据`perlbrew available`：

```
 perl-5.14.3-RC1
  perl-5.16.1
  perl-5.14.2
  perl-5.12.4
  perl-5.10.1
  perl-5.8.9
  perl-5.6.2
  perl5.005_04
  perl5.004_05
  perl5.003_07 
```

但是，当我运行时`perlbrew install perl5.003_07`，我得到：

```
 Unknown installation target "perl5.003_07", abort. Please see
 `perlbrew help` for the instruction on using the install command. 
```

如果我通过直接链接到 tarball 来尝试它，例如`perlbrew install http://www.cpan.org/src/5.0/perl5.005_03.tar.gz`，它会下载 tarball，但用于解析版本号的正则表达式失败：

```
Use of uninitialized value $dist_version in concatenation (.) or string at /usr/local/share/perl5/App/perlbrew.pm line 686.
Fetching perl- as /home/cpanci/perl5/perlbrew/dists/perl5.005_03.tar.gz
Use of uninitialized value $dist_version in pattern match (m//) at /usr/local/share/perl5/App/perlbrew.pm line 925.
Installing /home/cpanci/perl5/perlbrew/build/perl5.005_03 into ~/perl5/perlbrew/perls/perl-

This could take a while. You can run the following command on another shell to track the status:

  tail -f ~/perl5/perlbrew/build.perl-.log

Use of uninitialized value $dist_version in pattern match (m//) at /usr/local/share/perl5/App/perlbrew.pm line 952.
Use of uninitialized value $dist_version in pattern match (m//) at /usr/local/share/perl5/App/perlbrew.pm line 969.

Installing /home/cpanci/perl5/perlbrew/build/perl5.005_03 failed. Read /home/cpanci/perl5/perlbrew/build.perl-.log to spot any
issues. 
```

有任何想法吗？它适用于较新的 perls。

这是 App::perlbrew 0.52 版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T04:04:02.923

我认为你不得不破解 perlbrew。我可以通过重命名 tarball`perl-5.5.3.tar.gz`并`perl5/perlbrew/build`像这样创建符号链接来获得一些方法：

```
lrwxrwxrwx  1 darch users   12 Oct  8 14:16 perl-5.5.3 -> perl5.005_03 
```

，但此时它会尝试`Configure`使用它不理解的选项运行 5.5.3。在我看来，实际上并不支持尝试使用 perlbrew 构建这样的旧 Perls，因为它确实很高兴地列出了它们。

# haskell - Data.Text.Text 和准引用

> ID：12788181
> 
> 赞同：5
> 
> 时间：2012-10-08T19:27:14.260
> 
> 标签：haskell

我有一个解析器，它解析为一个包含 Text 值的 ast。我正在尝试将此解析器与 quasiquoting 一起使用，但 Data for Text 的实现不完整。我附上了一个小测试用例，当我尝试编译 Text.hs 时，我得到：

Text.hs:17:9：尝试运行编译时代码时出现异常：Data.Text.Text.toConstr 代码：Language.Haskell.TH.Quote.quoteExp expr "test"

有没有办法让这个工作？

我在这里通读了讨论：[http ://www.haskell.org/pipermail/haskell-cafe/2010-January/072379.html](http://www.haskell.org/pipermail/haskell-cafe/2010-January/072379.html)

似乎没有人找到解决此问题的适当方法？另外，我尝试了那里给出的 Data 实例，但它没有工作，我不知道如何修复它（或者如何使用它，因为文本包已经有 Text 的 Data 实例）。我不太了解很多泛型的东西以及它是如何工作的。

到目前为止，我唯一的解决方案是放弃在 ast 中使用 Text 并重新使用 String。

```
{-# LANGUAGE DeriveDataTypeable #-}
module Syntax where

import Data.Data
import Data.Text

data Expr = Iden Text
          | Num Integer
          | AntiIden Text
            deriving (Eq,Show,Data,Typeable)

---------------------

module Parser where

import Control.Applicative
import Control.Monad.Identity
import qualified Data.Text as T
import Text.Parsec hiding (many, optional, (<|>), string, label)
import Text.Parsec.Language
import qualified Text.Parsec.Token as P
import Text.Parsec.Text ()

import Syntax

parseExpr :: T.Text -> Either ParseError Expr
parseExpr s =
  runParser expr () "" s

expr :: ParsecT T.Text () Identity Expr
expr =
  whiteSpace >> choice
  [do
   _ <- char '$'
   AntiIden <$> identifier
  ,Num <$> natural
  ,Iden <$> identifier
  ]

identifier :: ParsecT T.Text () Identity T.Text
identifier = T.pack <$> P.identifier lexer

natural :: ParsecT T.Text () Identity Integer
natural = P.natural lexer

lexer :: P.GenTokenParser T.Text () Identity
lexer = P.makeTokenParser langDef

whiteSpace :: ParsecT T.Text () Identity ()
whiteSpace = P.whiteSpace lexer

langDef :: GenLanguageDef T.Text st Identity
langDef = P.LanguageDef
               { P.commentStart   = "{-"
               , P.commentEnd     = "-}"
               , P.commentLine    = "--"
               , P.nestedComments = True
               , P.identStart     = letter <|> char '_'
               , P.identLetter    = alphaNum <|> oneOf "_"
               , P.opStart        = P.opLetter langDef
               , P.opLetter       = oneOf "+-*/<>="
               , P.reservedOpNames= []
               , P.reservedNames  = []
               , P.caseSensitive  = False
               }

-------------------

module Quasi where

import Language.Haskell.TH.Quote
import Language.Haskell.TH
import Data.Generics
import qualified Data.Text as T

import Syntax
import Parser (parseExpr)

expr :: QuasiQuoter
expr = QuasiQuoter {quoteExp = prs
                   ,quotePat = undefined
                   ,quoteType = undefined
                   ,quoteDec = undefined}
  where
    prs :: String -> Q Exp
    prs s = p s
            >>= dataToExpQ (const Nothing
                            `extQ` antiExpE
                           )
    p s = either (fail . show) return (parseExpr $ T.pack s)

antiExpE :: Expr -> Maybe ExpQ
antiExpE v = fmap varE (antiExp v)

antiExp :: Expr -> Maybe Name
antiExp (AntiIden v) = Just $ mkName $ T.unpack v
antiExp _ = Nothing

----------------------------

-- test.hs:

{-# LANGUAGE QuasiQuotes #-}

import Syntax
import Quasi

test,test1,test2 :: Expr

-- works
test = [expr| 1234 |]

-- works
test1 = let stuff = Num 42
        in [expr| $stuff |]

-- doesn't work
test2 = [expr| test |]

main :: IO ()
main = putStrLn $ show test2 
```

解决方案：使用 extQ 将此函数添加到 dataToExpQ 调用中：

```
handleText :: T.Text -> Maybe ExpQ
handleText x =
    -- convert the text to a string literal
    -- and wrap it with T.pack
    Just $ appE (varE 'T.pack) $ litE $ StringL $ T.unpack x 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T04:26:01.887

添加一个`extQ`for `handleText`where`handleText`明确地将 Text 带到 ExpQ，而不是通过通用机制。

例如，这里有一个字符串，它比显式的 cons 单元更有效地呈现它们：

```
 handleStr :: String -> Maybe (TH.ExpQ)
      handleStr x = Just $ TH.litE $ TH.StringL x 
```

# java - 查找 ArrayList 中的最大值

> ID：12788182
> 
> 赞同：6
> 
> 时间：2012-10-08T19:27:17.700
> 
> 标签：java, collections, arraylist

我有两个不同的函数来尝试在 ArrayList 中找到最大值。我有两个，因为我第一次看到它们是否会返回相同的值，然后是性能时间。

但是，它们正在复制相同的值，但它似乎是 ArrayList 的最后一个值，无论它是否最大。我认为它可能是拿钥匙而不是价值。

代码如下，我认为这只是一个简单的错误，但有人能指出我正确的方向吗？

```
double highest = fitnessArray.get(0);

for (int s = 0; s <fitnessArray.size(); s++){
    if (fitnessArray.get(s)>highest)
        highest=fitnessArray.get(s);

}

System.out.println("highest fitness = " + highest 
                + " indoexOf = " + fitnessArray.indexOf(highest)); 
```

* * *

```
double highestFitness;

highestFitness = Collections.max(fitnessArray);
System.out.println("lowest fitness 2 = " + highestFitness ); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-12-16T14:03:36.277

使用已有的 api

```
Collections.max(arrayList); 
```

例子

```
import java.util.ArrayList;
import java.util.Collections;

public class Main {

  public static void main(String[] args) {

    ArrayList<Integer> arrayList = new ArrayList<Integer>();

    arrayList.add(new Integer("3"));
    arrayList.add(new Integer("1"));
    arrayList.add(new Integer("8"));
    arrayList.add(new Integer("3"));
    arrayList.add(new Integer("5"));

    Object obj = Collections.max(arrayList);
    System.out.println(obj);
  }
} 
```

[文档](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html)

您也可以将其视为稍差的解决方案

```
Collections.sort(arrayList); // Sort the arraylist
arrayList.get(arrayList.size() - 1); //gets the last item, largest for an ascending sort 
```

如果您稍后需要排序列表，第二种方法可能会很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:34:15.917

如果您存储最大数字所在的索引，您可能会有更好的运气：

```
if (fitnessArray.size() > 0) {
    double highest = fitnessArray.get(0);
    int highestIndex = 0;

    for (int s = 1; s < fitnessArray.size(); s++){
        double curValue = fitnessArray.get(s);
        if (curValue > highest) {
            highest = curValue;
            highestIndex = s;
        }
    }

    System.out.println("highest fitness = " + highest + " indoexOf = " + highestIndex);
} 
```

# c++ - C++ 静态计数器没有正确增加

> ID：12788183
> 
> 赞同：1
> 
> 时间：2012-10-08T19:27:37.343
> 
> 标签：c++

> **可能重复：**
> [为什么我的析构函数似乎比构造函数更频繁地被调用？](https://stackoverflow.com/questions/12567416/why-does-my-destructor-appear-to-be-called-more-often-than-the-constructor)

我有一个`static sCounter`并`int id`用 id 来订购我的实例。

将它们分组到向量中时，效果很好。ID 设置正确：

```
Task t("1st Task");
Task t2("2nd Task");
    Task t3("3rd Task");

std::vector<Task> myTasks;
myTasks.push_back(t);
myTasks.push_back(t2);
myTasks.push_back(t3); 
```

第一个任务的 ID 为 0，第二个：ID 1，第三个 ID 为 2。但是，如果我这样做：

```
std::vector<Task> myTasks;

myTasks.push_back(
   Task("First Task"));
myTasks.push_back(
   Task("Second Task"));
myTasks.push_back(
   Task("Third Task")); 
```

静态 sCount 值开始给出奇怪的结果：

第一个获得 ID 1，第二个也是 ID 1，第三个获得 ID 0。

为什么创建这样的对象会与静态计数器混淆？

sCounter 在构造函数上增加，在析构函数上减少：

```
int Task::sCount = 0;

Task::Task(std::string text) {
    this->setText(text);
    this->setStatus(1);
    time_t now = time(0);
    timestamp = *localtime(&now);
    std::cout << "Count from " << sCount;
    sCount++;
    std::cout << " to --> " << sCount << "\n";
    this->setID(); // set the current sCount to ID
}
Task::~Task() {
    --sCount;
} 
```

sCounter 是一个私有静态整数：`static int sCount;`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T19:33:33.003

析构函数工作正常，但参与推送东西的复制构造函数不会增加计数器。

只需实现显式复制构造函数来处理计数器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:38:28.207

在第二种情况下，传递给 push_back 的每个 Task 实例都是一个*临时变量*。这意味着一旦对 push_back 的调用完成，就会调用它的析构函数。然后析构函数在创建下一个任务之前递减计数器。

```
myTasks.push_back( Task("First Task") ); // Task's destructor is called before the next line 
```

尽管 Task 被复制到向量中（因此数据存在于内存中的其他位置），但 std::vector 用于此的隐式复制构造函数不会增加计数器。

# apache - 带有 mod_proxy 的 Apache + Tomcat - 重定向到 www 不起作用

> ID：12788188
> 
> 赞同：0
> 
> 时间：2012-10-08T19:28:15.560
> 
> 标签：apache, mod-rewrite, redirect, no-www

我在尝试将我的网站的根目录从**mywebsite.com/mywebsite**重写为**www.mywebsite.com/mywebsite 时遇到问题。**

问题与使用**mod_proxy调用Tomcat有关**

**文件 proxy.conf**

```
<ifmodule mod_proxy.c>
    ProxyRequests Off
    ProxyPreserveHost On

    <proxy *>
       AddDefaultCharset off
       Order deny,allow
       Allow from all
    </proxy>

    ProxyVia On 
    ProxyPass /mywebsite ajp://91.222.222.222:8009/mywebsite
    ProxyPassReverse /mywebsite ajp://91.222.222.222:8009/mywebsite

    <location miaplicacion>
        Order allow,deny
       Allow from all
    </location>
</ifmodule> 
```

**文件 .htaccess**

```
RewriteCond %{HTTP_HOST} !^www.mywebsite.com [NC] 
RewriteRule ^(.*)$ http://www.mywebsite.com/$1 [NC,L,R=301] 
```

关键是，如果我写**mywebsite.com/something** ，该规则就可以正常工作。在这种情况下，它被正确重定向到**www.mywebsite.com/something**

但是，似乎代理优先于重写规则中写入的内容。也就是说，当它找到 mywebsite.com/mywebsite 时，不是将其重写为 www.mywebsite.com/mywebsite 然后调用 Tomcat，而是直接调用它，而不接触 URL。

您知道在代理到 Tomcat 之前强制重写 URL 的任何方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:36:18.297

试试这个作为你的第一行：

```
RewriteCond %{HTTP_HOST} ^mywebsite.com$ [NC] 
```

# java - Jar 文件在签名之前运行良好（在 Windows 中）

> ID：12788192
> 
> 赞同：4
> 
> 时间：2012-10-08T19:28:29.877
> 
> 标签：java, jar, code-signing, jar-signing, jarsigner

我将首先说我不是 Java 程序员，我是 PHP 程序员。

我遇到了一种情况，即 websockets 不会削减它，我发现这个网站提供了一个解决方案：

[http://stephengware.com/proj/javasocketbridge/](http://stephengware.com/proj/javasocketbridge/)

它基本上是一个可以加载并使用 JavaScript 控制的 Jar。它工作得很好，我强烈推荐给任何需要类似功能的人。但是，由于 Jar 没有签名，每次页面加载时，都会显示安全警告。这有点烦人，我想如果我对 Jar 进行自我签名，它会启用“不再向我展示这个”/“永远允许”复选框。这将在我们的组织内部部署，因此似乎没有必要使用付费证书对其进行签名。

问题是，一旦我签署了 Jar，它就不起作用了。我收到一个找不到类的错误。我查看了数十个网站，这些网站向您展示了如何签署 Jar 文件并将其搜索到第 10 页，但我找不到遇到此类问题的任何人。

我将包括我认为需要的部分，如果您需要其他内容，请告诉我，我会得到它。

小程序代码：

```
<applet id="JavaSocketBridge" archive="JavaSocketBridge.jar" code="JavaSocketBridge.class" width="400" height="30"></applet> 
```

我如何签署 Jar（在管理员命令提示符下）：

```
C:\Program Files\Java\jdk1.7.0_07\bin>keytool -genkey -keyalg rsa -alias crtlive
Enter keystore password:
What is your first and last name?
  [Unknown]:  first last
What is the name of your organizational unit?
  [Unknown]:  Tech
What is the name of your organization?
  [Unknown]:  ourorg
What is the name of your City or Locality?
  [Unknown]:  city
What is the name of your State or Province?
  [Unknown]:  ST
What is the two-letter country code for this unit?
  [Unknown]:  US
Is CN=first last, OU=Tech, O=ourorg, L=city, ST=ST, C=US correct?
  [no]:  yes

Enter key password for <crtlive>
        (RETURN if same as keystore password):

C:\Program Files\Java\jdk1.7.0_07\bin>keytool -export -alias crtlive -file crtlive
.crt
Enter keystore password:
Certificate stored in file <crtlive.crt>

C:\Program Files\Java\jdk1.7.0_07\bin>jarsigner JavaSocketBridge.jar crtlive
Enter Passphrase for keystore:

Warning:
The signer certificate will expire within six months.

C:\Program Files\Java\jdk1.7.0_07\bin>keytool -export -alias crtlive -rfc -file s
ig.x509
Enter keystore password:
Certificate stored in file <sig.x509>

C:\Program Files\Java\jdk1.7.0_07\bin> 
```

我打开了未签名和签名的 Jar，源文件是相同的，在已签名的 Jar 上的 META-INF 文件夹中只有两个附加文件：CRTLIVE.RSA 和 CRTLIVE.SF。

这是线程转储：

```
Dump thread list ...
Group main,ac=18,agc=4,pri=10
    main,5,alive
    traceMsgQueueThread,5,alive,daemon
    Timer-0,5,alive
    Java Plug-In Pipe Worker Thread (Client-Side),5,alive,daemon
    AWT-Windows,6,alive,daemon
    SysExecutionTheadCreator,5,alive,daemon
    CacheMemoryCleanUpThread,5,alive,daemon
    CacheCleanUpThread,5,alive,daemon
    Browser Side Object Cleanup Thread,5,alive
    JVM[id=4]-Heartbeat,5,alive,daemon
    AWT-Shutdown,5,alive
    AWT-EventQueue-0,6,alive
Group Plugin Thread Group,ac=2,agc=0,pri=10
    AWT-EventQueue-1,6,alive
    TimerQueue,5,alive,daemon
Group http://www.example.com/admin/-threadGroup,ac=0,agc=0,pri=4,destoyed
Group http://www.example.com/admin/-threadGroup,ac=0,agc=0,pri=4,destoyed
Group http://www.example.com/admin/-threadGroup,ac=4,agc=0,pri=4
    Applet 49 LiveConnect Worker Thread,4,alive
    AWT-EventQueue-23,4,alive
    TimerQueue,4,alive,daemon
    ConsoleTraceListener,4,alive,daemon
Done. 
```

线程堆栈在长边，但这里是：

```
Full thread dump Java HotSpot(TM) Client VM (23.3-b01 mixed mode, sharing):

"TimerQueue" daemon prio=6 tid=0x04d55800 nid=0x1f28 waiting on condition [0x0ac7f000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x24820770> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(Unknown Source)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
    at java.util.concurrent.DelayQueue.take(Unknown Source)
    at javax.swing.TimerQueue.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

"ConsoleTraceListener" daemon prio=4 tid=0x04e12400 nid=0x2c14 runnable [0x09d7f000]
   java.lang.Thread.State: RUNNABLE
    at java.lang.Object.wait(Native Method)
    at java.lang.Thread.join(Unknown Source)
    - locked <0x244218e0> (a sun.plugin.util.PluginSysUtil$SysExecutionThread)
    at java.lang.Thread.join(Unknown Source)
    at sun.plugin.util.PluginSysUtil.execute(Unknown Source)
    at sun.plugin.util.PluginSysUtil.execute(Unknown Source)
    at sun.plugin.util.PluginSysUtil.delegate(Unknown Source)
    at com.sun.deploy.util.DeploySysRun.execute(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.awt.ui.SwingConsoleWindow.invokeLater(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.awt.ui.SwingConsoleWindow.append(Unknown Source)
    at com.sun.deploy.uitoolkit.ui.ConsoleTraceListener$ConsoleWriterThread.run(Unknown Source)

"AWT-EventQueue-1" prio=6 tid=0x04e37400 nid=0x338 waiting on condition [0x0a10e000]
   java.lang.Thread.State: RUNNABLE
    at com.sun.deploy.uitoolkit.ui.ConsoleHelper.dumpAllStacksImpl(Native Method)
    at com.sun.deploy.uitoolkit.ui.ConsoleHelper.dumpAllStacks(Unknown Source)
    at com.sun.deploy.uitoolkit.impl.awt.ui.SwingConsoleWindow$3.actionPerformed(Unknown Source)
    at javax.swing.JComponent$ActionStandin.actionPerformed(Unknown Source)
    at javax.swing.SwingUtilities.notifyAction(Unknown Source)
    at javax.swing.JComponent.processKeyBinding(Unknown Source)
    at javax.swing.KeyboardManager.fireBinding(Unknown Source)
    at javax.swing.KeyboardManager.fireKeyboardAction(Unknown Source)
    at javax.swing.JComponent.processKeyBindingsForAllComponents(Unknown Source)
    at javax.swing.JComponent.processKeyBindings(Unknown Source)
    at javax.swing.JComponent.processKeyEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.KeyboardFocusManager.redispatchEvent(Unknown Source)
    at java.awt.DefaultKeyboardFocusManager.dispatchKeyEvent(Unknown Source)
    at java.awt.DefaultKeyboardFocusManager.preDispatchKeyEvent(Unknown Source)
    at java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(Unknown Source)
    at java.awt.DefaultKeyboardFocusManager.dispatchEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)

"TimerQueue" daemon prio=4 tid=0x04e11c00 nid=0x1f7c waiting on condition [0x0940f000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x24820e00> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(Unknown Source)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
    at java.util.concurrent.DelayQueue.take(Unknown Source)
    at javax.swing.TimerQueue.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

"AWT-EventQueue-23" prio=4 tid=0x04e32c00 nid=0x31d8 waiting on condition [0x09e5f000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x29e3a6b8> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(Unknown Source)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
    at java.awt.EventQueue.getNextEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)

"Applet 49 LiveConnect Worker Thread" prio=4 tid=0x04de8c00 nid=0x2e88 in Object.wait() [0x09c6f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    at java.lang.Object.wait(Object.java:503)
    at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo$LiveConnectWorker.run(Unknown Source)
    - locked <0x29e3a798> (a java.lang.Object)
    at java.lang.Thread.run(Unknown Source)

"AWT-EventQueue-0" prio=6 tid=0x04de8800 nid=0x1038 waiting on condition [0x0977f000]
   java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x2998d388> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(Unknown Source)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(Unknown Source)
    at java.awt.EventQueue.getNextEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)

"AWT-Shutdown" prio=6 tid=0x04d56000 nid=0x37f8 in Object.wait() [0x07cdf000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    at java.lang.Object.wait(Object.java:503)
    at sun.awt.AWTAutoShutdown.run(Unknown Source)
    - locked <0x2998d4f0> (a java.lang.Object)
    at java.lang.Thread.run(Unknown Source)

"D3D Screen Updater" daemon prio=8 tid=0x04e35800 nid=0x674 in Object.wait() [0x0963f000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    at sun.java2d.d3d.D3DScreenUpdateManager.run(Unknown Source)
    - locked <0x2998cdf0> (a java.lang.Object)
    at java.lang.Thread.run(Unknown Source)

"JVM[id=4]-Heartbeat" daemon prio=6 tid=0x04e33800 nid=0x2578 in Object.wait() [0x054df000]
   java.lang.Thread.State: TIMED_WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    at sun.plugin2.main.server.HeartbeatThread.run(Unknown Source)
    - locked <0x2998d010> (a sun.plugin2.main.client.PluginMain$Heartbeat)

"Browser Side Object Cleanup Thread" prio=6 tid=0x04e32400 nid=0x1834 in Object.wait() [0x07f1f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x2998d180> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    - locked <0x2998d180> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at sun.plugin2.main.client.LiveConnectSupport$BrowserSideObjectCleanupThread.run(Unknown Source)

"CacheCleanUpThread" daemon prio=6 tid=0x04e28000 nid=0x2208 in Object.wait() [0x07b5f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    at java.lang.Object.wait(Object.java:503)
    at com.sun.deploy.cache.CleanupThread.run(Unknown Source)
    - locked <0x2998d1a0> (a com.sun.deploy.cache.CleanupThread)

"CacheMemoryCleanUpThread" daemon prio=6 tid=0x04e21000 nid=0x3484 in Object.wait() [0x0735f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x2998d290> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    - locked <0x2998d290> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at com.sun.deploy.cache.MemoryCache$LoadedResourceCleanupThread.run(Unknown Source)

"SysExecutionTheadCreator" daemon prio=6 tid=0x04dd8400 nid=0x2f40 in Object.wait() [0x07e8f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    at java.lang.Object.wait(Object.java:503)
    at sun.plugin.util.PluginSysUtil$SysExecutionThreadCreator.run(Unknown Source)
    - locked <0x2998d2b0> (a sun.plugin.util.PluginSysUtil$SysExecutionThreadCreator)

"AWT-Windows" daemon prio=6 tid=0x04dabc00 nid=0x1eb4 runnable [0x00daf000]
   java.lang.Thread.State: RUNNABLE
    at sun.awt.windows.WToolkit.eventLoop(Native Method)
    at sun.awt.windows.WToolkit.run(Unknown Source)

"Java2D Disposer" daemon prio=10 tid=0x04da0c00 nid=0x3014 in Object.wait() [0x057cf000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    - locked <0x2998d580> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at sun.java2d.Disposer.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

"Java Plug-In Pipe Worker Thread (Client-Side)" daemon prio=6 tid=0x04d99000 nid=0x1e74 runnable [0x058df000]
   java.lang.Thread.State: RUNNABLE
    at sun.plugin2.os.windows.Windows.ReadFile0(Native Method)
    at sun.plugin2.os.windows.Windows.ReadFile(Unknown Source)
    at sun.plugin2.ipc.windows.WindowsNamedPipe.read(Unknown Source)
    at sun.plugin2.message.transport.NamedPipeTransport$SerializerImpl.read(Unknown Source)
    at sun.plugin2.message.transport.NamedPipeTransport$SerializerImpl.readByte(Unknown Source)
    at sun.plugin2.message.AbstractSerializer.readInt(Unknown Source)
    at sun.plugin2.message.transport.SerializingTransport.read(Unknown Source)
    at sun.plugin2.message.Pipe$WorkerThread.run(Unknown Source)

"Timer-0" prio=6 tid=0x04d75800 nid=0x1438 in Object.wait() [0x0517f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x2998d8c0> (a java.util.TaskQueue)
    at java.lang.Object.wait(Object.java:503)
    at java.util.TimerThread.mainLoop(Unknown Source)
    - locked <0x2998d8c0> (a java.util.TaskQueue)
    at java.util.TimerThread.run(Unknown Source)

"traceMsgQueueThread" daemon prio=6 tid=0x04cce800 nid=0x2aec in Object.wait() [0x04b0f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    at java.lang.Object.wait(Object.java:503)
    at com.sun.deploy.trace.Trace$TraceMsgQueueChecker.run(Unknown Source)
    - locked <0x298b6d28> (a java.util.ArrayList)
    at java.lang.Thread.run(Unknown Source)

"Service Thread" daemon prio=6 tid=0x00b14400 nid=0x2804 runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

"C1 CompilerThread0" daemon prio=10 tid=0x00b0fc00 nid=0x1ff4 waiting on condition [0x00000000]
   java.lang.Thread.State: RUNNABLE

"Attach Listener" daemon prio=10 tid=0x00b0e800 nid=0x1980 runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

"Signal Dispatcher" daemon prio=10 tid=0x00b0b400 nid=0x21bc runnable [0x00000000]
   java.lang.Thread.State: RUNNABLE

"Finalizer" daemon prio=8 tid=0x00ae4000 nid=0x2df0 in Object.wait() [0x047df000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    - locked <0x2998db48> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at java.lang.ref.Finalizer$FinalizerThread.run(Unknown Source)

"Reference Handler" daemon prio=10 tid=0x00ae2800 nid=0xc0c in Object.wait() [0x0485f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    at java.lang.Object.wait(Object.java:503)
    at java.lang.ref.Reference$ReferenceHandler.run(Unknown Source)
    - locked <0x2998cd80> (a java.lang.ref.Reference$Lock)

"main" prio=6 tid=0x003ddc00 nid=0x2fa0 in Object.wait() [0x0098f000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    at sun.plugin2.message.Queue.waitForMessage(Unknown Source)
    - locked <0x2998dbd0> (a sun.plugin2.message.Queue)
    at sun.plugin2.message.Pipe$1.run(Unknown Source)
    at com.sun.deploy.util.Waiter$1.wait(Unknown Source)
    at com.sun.deploy.util.Waiter.runAndWait(Unknown Source)
    at sun.plugin2.message.Pipe.receive(Unknown Source)
    at sun.plugin2.main.client.PluginMain.mainLoop(Unknown Source)
    at sun.plugin2.main.client.PluginMain.run(Unknown Source)
    at sun.plugin2.main.client.PluginMain.main(Unknown Source)

"VM Thread" prio=10 tid=0x00ae1000 nid=0x23f4 runnable 

"VM Periodic Task Thread" prio=10 tid=0x00b2fc00 nid=0x32b8 waiting on condition 

lugin2.main.client.PluginMain.run(Unknown Source)
    at sun.plugin2.main.client.PluginMain.main(Unknown Source)

"VM Thread" prio=10 tid=0x00ae1000 nid=0x23f4 runnable 

"VM Periodic Task Thread" prio=10 tid=0x00b2fc00 nid=0x32b8 waiting on condition 

----------------------------------------------------
Done. 
```

我已经用谷歌搜索了我能想到的一切，任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:48:40.260

当我们的 java web start 产品从 java 6 迁移到 java 7 时，我们发现 java 7 不允许我们之前的自签名 jar 文件运行。

我们发现 java 7 不接受我们创建的根 CA。一旦我们使用了受信任的根 CA，问题就消失了。

现在，也许有可能找到解决这个问题的方法。我建议调查一下（搜索 keytool）：[http ://www.oracle.com/technetwork/java/javase/jdk7-relnotes-418459.html](http://www.oracle.com/technetwork/java/javase/jdk7-relnotes-418459.html)

具体来说：

区域：工具 概要：提供了一个新的 keytool 命令（-gencert）来生成非自签名证书。提供了一个新选项 (-ext) 来为 -gencert、-genkeypair 和 -certreq 命令生成多个 X.509 v3 扩展。keytool 和 jarsigner 工具还有其他新命令和选项。有关更多信息，请参阅 keytool 和 jarsigner 工具文档。射频：6780416、6802846、6324292、6890872

RFE 包含指向可能对您有所帮助的信息的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T09:05:02.783

如果您的 jar 依赖于其他 jar，请确保您也对它们进行了签名。打开您的 MANIFEST.MF 并检查 Class-Path。

为此，我更喜欢使用 ant 来编译、创建和签名 jar。

# c++ - 设计一个只有 1 个可能实例的类/类型 - C++

> ID：12788196
> 
> 赞同：2
> 
> 时间：2012-10-08T19:28:47.810
> 
> 标签：c++, class, types

我想要一个`class T`只能在整个程序中生成 1 个实例的实例。

现在我知道了，`std::unique_ptr`但有两个问题：

*   它仅限于一个范围（但这不是一个大问题......）
*   它需要显式使用，这意味着它不是类或类型的一部分，它只是和处理程序和一个特殊的指针，但它不会修改我的类的设计。

现在我想`class T`设计一种方式，即使错误地用户可以在同一个程序中声明 2 个实例，我也不能依赖我的用户将声明一个`std::unique_ptr`for的事实，`T`因为我想通过设计来解决这个问题。

现在我只是在考虑如何以`unique_ptr`一种优雅的方式隐式使用 an ，问题是我目前没有任何线索。

另一种方法是检查这个类是否由 an 处理，`unique_ptr`但这种检查会使我在性能方面失去优势。

因为只有 1 个实例非常重要，所以在我的情况下我只看到 2 个选项：1）试图通过设计解决这个问题 2）在编译时使用某种检查/宏抛出错误。

我知道这看起来微不足道，但从设计方法来看，至少对我来说不是，所以请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T19:35:18.563

您正在寻找的是所谓的[单例](http://en.wikipedia.org/wiki/Singleton_pattern)模式，虽然它被许多人（包括我自己）广泛认为是一种[反模式](http://en.wikipedia.org/wiki/Anti-pattern)，但我仍将向您展示构建它所需的基本元素。

基本上你需要做的是提供三件事：

1.  一种`static`“获取”唯一实例的方法
2.  `private`构造函数，因此没有人可以实例化它
3.  `main`（可选）在开始之前创建唯一实例的方法

这是基本代码：

```
class Singleton
{
public:
  Singleton&  get() 
  { 
    static Singleton me_;
    return me_;
  }
private:
  Singleton() {};
}; 
```

我留给你去发现如何实现上面的#3，以及为什么你不应该首先使用单例——有很多原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T19:32:44.773

这通常被称为单例。

见[http://en.wikipedia.org/wiki/Singleton_pattern](http://en.wikipedia.org/wiki/Singleton_pattern)

C++ 中的典型技巧是拥有一个通过引用返回单例实例的函数，并将构造函数设为私有。

就像是：

```
#include <iostream>
using namespace std;

class Foo
{
private:
  Foo() : a(3) { a++; }
  static Foo singleton;
  int a;
public:
  static Foo& getFoo() { return singleton; }
  void doStuff() { cout<<"My a is: "<<a<<endl; }
};

Foo Foo::singleton;

int main(int argc, char** argv)
{
  Foo::getFoo().doStuff();
  Foo &foo = Foo::getFoo();
  foo.doStuff();

  //uncomment below to cause compile error                                                                                                                                                                                                                                                                                                                                
  //Foo foo2;                                                                                                                                                                                                                                                                                                                                                             
} 
```

请注意，在实际代码中，您会将其拆分为头文件和 cpp 文件。在这种情况下

```
Foo Foo::singleton; 
```

部分必须放在 cpp 文件中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T19:31:07.397

你至少可以拥有

```
 static int count;
 assert(count == 0);
 count++; 
```

在单例类的构造函数中。这并不能确保在编译时您的类是单例的，但至少它会在运行时检查它。

您还可以将构造函数设为私有，并有一个静态成员函数返回（一次）指向您的实例的指针，可能类似于

```
 class Singleton {
 private:
    Singleton() {
      static int count;
      assert(count == 0);
      count++;
    };
    Singleton(Singleton&) = delete;
 public:
    static Singleton* the_instance() {
      static Singleton* it;
      if (!it) it = new Singleton();
      return it;
    }
 }; 
```

# linux - 当用户通过 SSH 从特定主机登录时执行操作

> ID：12788199
> 
> 赞同：12
> 
> 时间：2012-10-08T19:28:59.260
> 
> 标签：linux, bash, ssh, profile

我有一个令我困惑的问题，我想知道是否有人试图实现以下目标：

假设这是我在 Linux 环境中执行“最后一个”命令的结果：

```
root  pts/1        192.168.1.10      Wed Feb 10 07:04 - 07:57  (00:52)  
root  pts/2                          Tue Feb  9 22:00 - 00:13  (02:13) 
```

如果“root”用户已从 192.168.1.10 登录，我如何设置特定操作（例如修改 MOTD 或发送电子邮件）。有没有办法捕获这些信息？

这个问题的第二部分是，我怎样才能使上述检查更加稳健 - 即如果我有以下内容：

```
mary  pts/1        192.168.1.10      Wed Feb 10 07:04 - 07:57  (00:52)  
bob   pts/2                          Tue Feb  9 22:00 - 00:13  (02:13) 
```

现在，如果用户名等于“mary”并且主机是 192.168.1.10，我想执行一个操作。

欢迎任何建议。

先感谢您。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-08T20:15:09.913

有一个特殊文件`/etc/ssh/sshrc`，您可以在其中放置一些命令，每次有人通过`ssh`. 我为你写的：

```
#!/bin/bash

mail=user@domain.tld
monitored_user=root
monitored_ip=x.x.x.x

hostname=$(hostname)

# add a welcome message:
printf >&2 "\nWelcome on $hostname $USER\n"

read -d " " ip <<< $SSH_CONNECTION

[[ $ip == $monitored_ip && $USER == $monitored_user ]] || exit 0

date=$(date "+%d.%m.%Y %Hh%M")
reverse=$(dig -x $ip +short)

mail -s "Connexion of $USER on $hostname" $mail <<EOF

IP: $ip
Reverse: $reverse
Date: $date
EOF 
```

将此脚本放入文件中，然后将脚本的完整路径放入`/etc/ssh/sshrc`

在`man ssh`：

> /etc/ssh/sshrc ：此文件中的命令在用户登录时由 ssh 执行，就在用户的 shell（或命令）启动之前。有关更多信息，请参阅 sshd(8) 手册页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:18:27.107

感谢您的回复。最终，我设法找到了一个暂时可行的解决方案，但它确实存在一个缺陷，我将在一分钟内指出。

我已将以下内容添加到我的 /etc/bashrc 文件（或 /etc/bash.bashrc 任何您使用的环境）：

```
HOST="192.168.0.1"
RHOST=`who am i | sed -n 's/.*(\([^) ]*\).*/\1/p; 1q'`
if [ "$RHOST" == "$HOST" ]; then
        echo "SAY WHAT!"
        #add further actions here if needed
fi 
```

我之前所说的缺陷实际上可能不是缺陷。如果您已经通过 SSH 连接到系统中，并且想要通过 SSH 连接到位于同一 IP 上的主机，`ssh root@your-host` `who am i`那么可以打印“your-host”，但我认为应该是这样。

不用说，`sed`可以修改上述语句，以便您也可以捕获用户名，并且您可以扩展该`if/else`语句以满足您的需要。

再次感谢您的所有回复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T19:47:14.367

您可以`/etc/profile`根据`$SSH_CLIENT`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T19:59:38.660

看起来您正在使用它，`last`因为它默认读取`/var/log/wtmp`的是登录记录。该`who`命令还允许您读取相同的文件，但界面更符合您的需求。

例如：

```
$ who --ips /var/log/wtmp | grep '^msw.*127.0.0.1'
msw      pts/2        2012-10-07 15:52 127.0.0.1
msw      pts/3        2012-10-07 15:55 127.0.0.1 
```

这些会话都不是活动的，而是历史性的和记录的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-03T03:50:29.800

在ubuntu中我放了一个脚本

```
/etc/profile.d 
```

当某人（用户 ssh）登录时，它会向我的邮箱发送一封电子邮件

```
#/etc/profile.d/run_on_loggin.sh
echo $(who i am) | mail -s 'SSH Login Notification' mymail@hotmail.com 
```

我想用 smtp 创建一个 php 文件，用我的邮件向我发送电子邮件...有时 hotmail 保存在垃圾邮件中...

如果我有 php 文件，我将像[这样](https://stackoverflow.com/a/10262611/5287072)运行...

如果我想将 var 传递给文件 php 像[这样](https://stackoverflow.com/a/41395102/5287072)运行...

原谅我的英语：3

注意：我认为这个命令是从用户运行的，如果用户没有使用某些命令或发送电子邮件的权限，请小心。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-08T19:38:55.363

一种方法是定期运行一个简单的脚本：

```
#!/bin/bash
users=$(last | sed -ne '/192\.168\.1\.10/ s/\([^ ]*\).*/\1/p')
for user in $users; do
    sendmail "$user" < email.txt
done 
```

这会将最后一个命令通过管道传输到 sed 以提取用户列表并将其保存到变量`$users`. sed 命令使用该`-n`标志，因此它只打印我们告诉它的内容。首先，我们选择包含指定 IP 和`/192\.168\.1\.10/`“地址”的行。在这些行中，我们尝试提取空格前的字符，如果成功，我们将打印结果。

然后，我们可以遍历`$users`变量并采取相应的行动。

重复调用它的一种方法是通过 cron，而更简单的方法是执行`while true; do ./my_script.bash; sleep 60; done`.

# c# - 使用 C# 读取 XML/KML 文件

> ID：12788207
> 
> 赞同：11
> 
> 时间：2012-10-08T19:29:34.430
> 
> 标签：c#, xml, entity-framework, linq, kml

我正在尝试将 kml xml Google 地球文件导入应用程序，但我似乎无法正确使用 xDocument 语法来执行我想要的操作，我想知道是否有人可以建议一种读取方式kml.xml 文件。

我了解 xml 导入的基础知识，但无法使用 xDocument 和 Linq 获得任何东西，理想情况下，我想将每个 Placemark 作为一个对象并将它们添加到我的实体框架驱动的数据库中。关于我应该如何做到这一点的任何建议都会很棒，因为我刚刚开始使用 Linq 并且可以使用一些指针。xml的布局如下

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://earth.google.com/kml/2.2">
  <Document>
    <Placemark>
      <name>XXX</name>
      <description>XXX</description>
      <styleUrl>XXX</styleUrl>
      <Point>
         <coordinates>XXX</coordinates>
      </Point>
    </Placemark>
    <Placemark>
      <name>XXX</name>
      <description>XXX</description>
      <styleUrl>XXX</styleUrl>
      <Point>
         <coordinates>XXX</coordinates>
      </Point>
    </Placemark>
  </Document>
</kml> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T19:34:09.547

您没有包含任何代码，但我猜您在引用事物时忘记包含名称空间。这是一个例子。

基本访问：

```
var placemarks = xdoc.Element("kml").Element("Document").Elements("Placemark"); 
```

使用命名空间：

```
var ns = XNamespace.Get("http://earth.google.com/kml/2.2");
var placemarks = xdoc.Element(ns + "kml").Element(ns + "Document").Elements(ns + "Placemark"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-08T19:33:59.380

我的*猜测*是您忘记在 LINQ to XML 查询中使用命名空间。从中提取数据很容易：

```
XNamespace ns = "http://earth.google.com/kml/2.2";
var doc = XDocument.Load("file.xml");
var query = doc.Root
               .Element(ns + "Document")
               .Elements(ns + "Placemark")
               .Select(x => new PlaceMark // I assume you've already got this
                       {
                           Name = x.Element(ns + "name").Value,
                           Description = x.Element(ns + "description").Value,
                           // etc
                       }); 
```

如果这没有帮助，请发布您尝试过的完整示例以及出了什么问题。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-10-21T16:54:16.970

我使用[SharmpKml](https://sharpkml.codeplex.com/)及其[文档](https://sharpkml.codeplex.com/wikipage?title=Extracting%20information%20from%20a%20Kml%20file&referringTitle=Documentation)从 KML 文件中提取信息。

```
using SharpKml.Dom;
using SharpKml.Engine;
using SharpKml.Dom.GX;

TextReader reader = File.OpenText(filePath);
KmlFile file = KmlFile.Load(reader);
_kml = file.Root as Kml;

sPlaceMarks[] tempPlaceMarks = new sPlaceMarks[1000];
if (_kml != null)
{
  foreach (var placemark in _kml.Flatten().OfType<Placemark>())
  {
  tempPlaceMarks[numOfPlaceMarks].Name = placemark.Name;
  tempPlaceMarks[numOfPlaceMarks].Description = placemark.Description.Text;
  tempPlaceMarks[numOfPlaceMarks].StyleUrl = placemark.StyleUrl;
  tempPlaceMarks[numOfPlaceMarks].point = placemark.Geometry as SharpKml.Dom.Point;
  tempPlaceMarks[numOfPlaceMarks].CoordinateX = tempPlaceMarks[numOfPlaceMarks].point.Coordinate.Longitude;
  tempPlaceMarks[numOfPlaceMarks].CoordinateY = tempPlaceMarks[numOfPlaceMarks].point.Coordinate.Latitude;
  tempPlaceMarks[numOfPlaceMarks].CoordinateZ = tempPlaceMarks[numOfPlaceMarks].point.Coordinate.Altitude;
  numOfPlaceMarks++;
  }

  foreach (var lookAt in _kml.Flatten().OfType<LookAt>())
  {
  Placemark placemark = (Placemark)lookAt.Parent;
  for (int i = 0; i < numOfPlaceMarks; i++)
  {
    if (placemark.Name == tempPlaceMarks[i].Name)
    {
      tempPlaceMarks[i].Name = placemark.Name;
      tempPlaceMarks[i].Description = placemark.Description.Text;
      tempPlaceMarks[i].StyleUrl = placemark.StyleUrl;
      tempPlaceMarks[i].altitude = lookAt.Altitude;
      tempPlaceMarks[i].AltitudeMode =(SharpKml.Dom.GX.AltitudeMode)lookAt.GXAltitudeMode;
      tempPlaceMarks[i].Heading = lookAt.Heading;
      tempPlaceMarks[i].Latitude = lookAt.Latitude;
      tempPlaceMarks[i].Longitude = lookAt.Longitude;
      tempPlaceMarks[i].Range = lookAt.Range;
      tempPlaceMarks[i].Tilt = lookAt.Tilt;
      break;
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-08T19:36:40.000

```
var xDoc = XDocument.Load("a.xml");
XNamespace ns = "http://earth.google.com/kml/2.2";

var placemarks = xDoc.Descendants(ns+"Placemark")
                    .Select(p => new
                    {
                        Name = p.Element(ns+"name").Value,
                        Desc = p.Element(ns+"description").Value
                    })
                    .ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-07T09:54:58.823

您的 kml 文件必须包含

```
<kml xmlns="http://www.opengis.net/kml/2.2" ... 
```

代替

```
<kml xmlns="http://earth.google.com/kml/2.2"> ... 
```

# jquery - CSS 中的目标标签

> ID：12788208
> 
> 赞同：4
> 
> 时间：2012-10-08T19:29:38.463
> 
> 标签：jquery, css, css-selectors, target

有没有一种可能的方法来定位 css3 中输入的标签？例如我尝试了这种方法 -

```
input[type="text"]:focus label:target {
    color:orange !important;
} 
```

似乎不起作用，只是想知道还是这只是 jquery 的工作？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T19:31:45.140

[`:target`伪类](http://www.w3.org/TR/selectors/#target-pseudo)不会做你认为它做的事，并且永远`label`不能作为 的后代存在`input`，所以这行不通。

如果您试图通过父母或属性来引用与 a`label`相关联的a ，那么 CSS3 是不可能的。如果它是跟随在 , 之后的兄弟，您只能使用以下任一方法来引用：`input``for``label``input`

```
input[type="text"]:focus + label
input[type="text"]:focus ~ label 
```

如果`label`是祖先、前兄弟或完全其他地方，则需要使用 jQuery 遍历 DOM 并定位它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:37:51.153

使用 CSS4，您可以这样做：

```
!label /for/ input[type="text"]:focus,
!label input[type="text"]:focus {
    ...
} 
```

第一个允许`<label for="inputid">`，第二个允许`<label><input type="text"/></label>`

但是 CSS4 支持非常有限。不过，把它放在那里也没有坏处。

# android - 如何跟踪室内位置？

> ID：12788211
> 
> 赞同：8
> 
> 时间：2012-10-08T19:29:50.303
> 
> 标签：android, iphone, windows, windows-mobile

我正在做一个需要在室内跟踪位置的项目。它需要跟踪某人在建筑物内的位置并告诉他们要去哪里。我已经阅读了很多关于所有三个主要智能手机操作系统（iOS、Android 和 Windows Mobile）的主题。如果可能的话，我更愿意在 Windows Mobile 上进行，因为它是我可以使用的最好的系统。

我决定主要使用 QR 码来“重置”位置（即，在整个建筑物中设置重置点，人们可以站立、扫描并获取当前位置）。然后我怎样才能跟踪远离这个原点的运动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T04:31:56.287

One appraoch is to tag indoor positions with barcodes defining a location. But this is only as acurate as users scan the barcodes during crossing and scanning the barcodes.

Another approach uses WiFi signal strength. AFAIK CISCO networks are able to give good results with there indoor location services: [http://www.cisco.com/en/US/docs/solutions/Enterprise/Mobility/wifich1.html](http://www.cisco.com/en/US/docs/solutions/Enterprise/Mobility/wifich1.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:48:16.857

据我所知，您唯一的解决方案是使用室内位置指纹。本质上，您需要将信号强度映射到已知位置的位置。每当手机在该位置时，它应该从各种 WiFi 天线读取相似的信号强度。当将该读数与室内位置的指纹进行比较时，最佳匹配应该是该位置。可以应用不同的算法。为了进一步阅读，我建议使用链接 1 和[链接 2 之类](http://www.ieee-infocom.org/2004/Papers/21_2.PDF)[的论文](http://gicl.cs.drexel.edu/people/regli/Classes/CS680/Papers/Localization/01367305.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T19:39:31.310

准确的 GPS 需要直接瞄准卫星。因此，您无法使用当前的手机技术逐个房间跟踪位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T14:29:09.317

我们工作中的所有 WiFi 热点都分配了相同的网络 ID。我不知道这是否是必要的，或者我们懒惰的网络管理员已经采取了一些措施。

但是，我知道您可以在您的 WiFi 信号上提取现场勘测样式数据。如果您的网络 ID 都不同，您可以得到一些粗略的三角测量，如果每个都有 3 个强度条，而每个有`ID_A`4个条。`ID_B``ID_C`

我想对我们的网络执行此操作，但当我得知我们所有的热点都具有相同的网络 ID 时就放弃了。

# c - C中的返回值函数

> ID：12788214
> 
> 赞同：2
> 
> 时间：2012-10-08T19:30:02.940
> 
> 标签：c, return-value

您好，我正在开发一个生成主代码的快速程序，用户必须猜测代码。在检查用户的猜测时，我使用 2 个函数，一个用于精确匹配，另一个用于紧密匹配（他们得到一个在主代码中但不在正确位置的数字）

前任。主码 1 2 3 4

user 2 3 2 4 输出应该显示用户有 2 个紧密匹配和一个完全匹配。我无法理解如何正确返回 int。

当我尝试在 Main 中打印它们时，我的输出只显示了 exactMatch 和 closeMatch 的默认值。任何见解将不胜感激。谢谢你。

```
 #include<stdio.h>
 #include<math.h>
 #include<stdlib.h>
 #include<time.h>
 #define CODELENGTH 4
 #define NUMSYMBOLS 6

 int MasterCode[4];
 int guess[ 4 ];
 int exactMatch;
 int closeMatch=0;

 void genCode (int MasterCode[])
{
int i=0;
int k;
while (i < CODELENGTH){

MasterCode[i] =rand() %NUMSYMBOLS +1;
    i++;

}//end while loop.
for ( k = 0 ; k < 4; k++ ) {
    printf( "%d ", MasterCode[ k ] );
}

printf( "\n" );
}

 void getGuess (int guess[])
{

int number = 0;

printf( "Please enter your list of 4 numbers between 1 and 6: " );
int j;
int k;
for ( j = 0 ; j < 4; j++ ) {
    scanf( "%d", &number );
    guess[ j ] = number;
}

printf( "Your array has these values: " );

for ( k = 0 ; k < 4; k++ ) {
    printf( "%d ", guess[ k ] );
}

printf( "\n" );
 }

 int main (int argc, char **argv)
 {
srand ( time(NULL) );

genCode(MasterCode);
getGuess(guess);
checkExactMatches(MasterCode, guess, exactMatch);
checkCloseMatches(MasterCode, guess, closeMatch);
printf("%d = Ending exactMatches \n", exactMatch);
printf("%d  = Ending closeMatches \n", closeMatch);

 }
 int checkExactMatches (int MasterCode[], int guess[], int exactMatch )
  {
int woot;
for(woot=0; woot<4; woot++){

        if (MasterCode[woot] == guess[woot]){
            printf("Exact Match found \n");
            exactMatch ++;
            printf( "%d = Guess \n" , guess[ woot ]);
            printf( "%d = MasterCode \n", MasterCode[ woot ]);
            printf("%d = exactMatch \n", exactMatch);

        }// end if

        if (MasterCode[woot] != guess[woot])
            printf("No EXACT match \n");

}//end for loop

return exactMatch;
 } // end checkExactMatches

 int checkCloseMatches (int MasterCode[], int guess[], int closeMatch )
  {
int k;
int j;
for(k=0; k<4; k++){

    for (j=0; j<4; j++) {

        if (MasterCode[k] == guess[j]){
    printf("CLOSE Match found \n");
    closeMatch ++;
    printf( "%d = Guess \n" , guess[ j ]);
    printf( "%d = MasterCode \n \n", MasterCode[ k ]);
    printf("%d = closeMatch \n \n", closeMatch);

}// end if

if (MasterCode[k] != guess[j])
    printf("No CLOSE match \n");

    }//end nested for loop
}//end for loop

return closeMatch;
 } // end checkCloseMatches 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T19:37:03.637

获取函数返回的值其实很简单，基本上和给变量赋值一样。在您的情况下，语法将是这样的：

```
int result = checkExactMatches(MasterCode, guess, exactMatch); 
```

result 现在将保存函数返回的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T19:38:42.077

你需要做的是

*   不将计数参数传递给函数并且
*   而是在count中收集函数的返回值

所以

```
checkExactMatches(MasterCode, guess, exactMatch); 
```

变成

```
exactMatch = checkExactMatches(MasterCode, guess); 
```

您需要对函数头进行适当的更改，并避免使用全局变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T19:36:54.600

请注意，虽然数组是通过指针传递的（意味着函数可以修改指向的指针），但整数是通过值传递的。因此，函数内对 int 的更改仅在函数执行期间持续存在。

你想用

```
exactMatch = checkExactMatches(MasterCode, guess); 
```

在这种情况下，您将不必再通过`exactMatch`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T19:38:14.590

C 通过值而不是通过引用传递参数，因此传递`int exactmatch`给函数会创建内部数据的副本`exactmatch`，因此在方法内部完成的操作不会做任何事情。

你想要做的是从参数列表中删除精确匹配，而是将其分配为零（`int exactmatch=0;`在方法的开头，从全局变量中删除精确匹配，并使用类似的东西`int resultExact = checkExactMatches(MasterCode, guess);`作为你的函数调用。你已经返回了答案正确，您只是不会在任何地方找到答案。

# python - 如何从 JSON 响应中提取单个值？

> ID：12788217
> 
> 赞同：35
> 
> 时间：2012-10-08T19:30:29.590
> 
> 标签：python, json

首先，我会坦率地承认，我只不过是一个笨拙的文科家伙，在这个脚本方面完全是自学成才的。也就是说，我正在尝试使用以下代码从 USGS 水数据服务中获取值：

```
def main(gaugeId):

    # import modules
    import urllib2, json

    # create string
    url = "http://waterservices.usgs.gov/nwis/iv/?format=json&sites=" + gaugeId + "&parameterCd=00060,00065"

    # open connection to url
    urlFile = urllib2.urlopen(url)

    # load into local JSON list
    jsonList = json.load(urlFile)

    # extract and return
    # how to get cfs, ft, and zulu time?
    return [cfs, ft, time] 
```

尽管我找到了一些关于如何从 JSON 响应中提取所需值的教程，但大多数都相当简单。我遇到的困难是从该服务返回的看起来非常复杂的响应中提取。查看响应，我可以看到我想要的是来自两个不同部分的值和一个时间值。因此，我可以查看响应并查看我需要什么，但我终其一生都无法弄清楚如何提取这些值。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-10-08T19:35:45.960

using`json.loads`会将您的数据转换为 python[字典](http://docs.python.org/tutorial/datastructures.html#dictionaries)。

使用字典值访问`['key']`

```
resp_str = {
  "name" : "ns1:timeSeriesResponseType",
  "declaredType" : "org.cuahsi.waterml.TimeSeriesResponseType",
  "scope" : "javax.xml.bind.JAXBElement$GlobalScope",
  "value" : {
    "queryInfo" : {
      "creationTime" : 1349724919000,
      "queryURL" : "http://waterservices.usgs.gov/nwis/iv/",
      "criteria" : {
        "locationParam" : "[ALL:103232434]",
        "variableParam" : "[00060, 00065]"
      },
      "note" : [ {
        "value" : "[ALL:103232434]",
        "title" : "filter:sites"
      }, {
        "value" : "[mode=LATEST, modifiedSince=null]",
        "title" : "filter:timeRange"
      }, {
        "value" : "sdas01",
        "title" : "server"
      } ]
    }
  },
  "nil" : false,
  "globalScope" : true,
  "typeSubstituted" : false
} 
```

会翻译成python字典

```
resp_dict = json.loads(resp_str)

resp_dict['name'] # "ns1:timeSeriesResponseType"

resp_dict['value']['queryInfo']['creationTime'] # 1349724919000 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-08-17T20:49:44.493

唯一的建议是访问您的`resp_dict`via`.get()`以获得更优雅的方法，如果数据不符合预期，该方法会很好地降级。

```
resp_dict = json.loads(resp_str)
resp_dict.get('name') # will return None if 'name' doesn't exist 
```

如果需要，您还可以添加一些逻辑来测试密钥。

```
if 'name' in resp_dict:
    resp_dict['name']
else:
    # do something else here. 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-02-19T16:27:49.017

从 JSON 响应 Python 中提取单个值

试试这个

```
import json
import sys

#load the data into an element
data={"test1" : "1", "test2" : "2", "test3" : "3"}

#dumps the json object into an element
json_str = json.dumps(data)

#load the json to a string
resp = json.loads(json_str)

#print the resp
print (resp)

#extract an element in the response
print (resp['test1']) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-04-14T12:43:33.043

试试这个。在这里，我只从**COVID** API - JSON 数组中获取状态码。

```
import requests

r = requests.get('https://api.covid19india.org/data.json')

x=r.json()['statewise']

for i in x:
  print(i['statecode']) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-11T15:29:51.220

试试这个：

```
from functools import reduce
import re

def deep_get_imps(data, key: str):
    split_keys = re.split("[\\[\\]]", key)
    out_data = data
    for split_key in split_keys:
        if split_key == "":
            return out_data
        elif isinstance(out_data, dict):
            out_data = out_data.get(split_key)
        elif isinstance(out_data, list):
            try:
                sub = int(split_key)
            except ValueError:
                return None
            else:
                length = len(out_data)
                out_data = out_data[sub] if -length <= sub < length else None
        else:
            return None
    return out_data

def deep_get(dictionary, keys):
    return reduce(deep_get_imps, keys.split("."), dictionary) 
```

然后你可以像下面这样使用它：

```
res = {
    "status": 200,
    "info": {
        "name": "Test",
        "date": "2021-06-12"
    },
    "result": [{
        "name": "test1",
        "value": 2.5
    }, {
        "name": "test2",
        "value": 1.9
    },{
        "name": "test1",
        "value": 3.1
    }]
}

>>> deep_get(res, "info")
{'name': 'Test', 'date': '2021-06-12'}
>>> deep_get(res, "info.date")
'2021-06-12'
>>> deep_get(res, "result")
[{'name': 'test1', 'value': 2.5}, {'name': 'test2', 'value': 1.9}, {'name': 'test1', 'value': 3.1}]
>>> deep_get(res, "result[2]")
{'name': 'test1', 'value': 3.1}
>>> deep_get(res, "result[-1]")
{'name': 'test1', 'value': 3.1}
>>> deep_get(res, "result[2].name")
'test1' 
```

# javascript - Visualsearch.js - 如何调用搜索方法？

> ID：12788224
> 
> 赞同：-1
> 
> 时间：2012-10-08T19:31:23.160
> 
> 标签：javascript, backbone.js

我想创建搜索按钮。按钮的点击功能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:32:44.433

您可能正在寻找： onClick() 如果没有，请提供更多信息。

# ado.net - 使用 tableadaptermanager.updateall 在父子级级联删除

> ID：12788228
> 
> 赞同：1
> 
> 时间：2012-10-08T19:31:43.157
> 
> 标签：ado.net, master-detail, bindingsource, tableadapter

我有两个`datagridview`，一个显示父记录，另一个显示子记录。

我在数据集中定义了关系和外键约束，级联更新和删除规则以及分层更新设置为 true。

我想删除父记录`datagridview`并删除它的子记录。在我的代码下面：

```
private void bindingNavigatorDeleteItem_Click(object sender, EventArgs e)
{
    DialogResult res = MessageBox.Show("Sicuro", "Attenzione", MessageBoxButtons.YesNo);
    if (res == System.Windows.Forms.DialogResult.Yes)
    {

        try
        {
            //parent table
            pianoDiInterventoBindingSource.RemoveCurrent();

            //child table
            pianoInterventoServiziBindingSource.EndEdit();

            pianoDiInterventoBindingSource.EndEdit();
            tableAdapterManager.UpdateAll(this.archivioDataSet);
        }
        catch
        {
        }
        finally
        {
            this.pianoDiInterventoTableAdapter.Fill(this.archivioDataSet.PianoDiIntervento);
            this.pianoInterventoServiziTableAdapter.Fill(this.archivioDataSet.PianoInterventoServizi);
        }
    }
} 
```

我能够删除父记录但子记录没有，所以我有一个`constraintexception error`.

为什么是这样？

# asp.net - 当要编辑数据时，请查看最后一个值（我现在没有输入值）

> ID：12788231
> 
> 赞同：1
> 
> 时间：2012-10-08T19:32:02.397
> 
> 标签：asp.net

我用从数据库中获取的数据填充文本框，并在页面上放置一个按钮，用户可以编辑数据并单击此按钮，然后从后面的代码中设置对数据库的更改

但是当我想将数据（例如`txtName.Text`源值是“John”并且我将其更改为“Tom”）发送到数据库时，我看到`txtName.Text`的是“John”（意味着最后一个值没有新值）

为什么？

```
//Load Data
protected void Page_Load(object sender, EventArgs e)
{ 
      DataSet ds = ....
      txtName.Text = ds.Tables[0].Rows[0][1].ToString();
}

//Update
protected void reg_Click(object sender, EventArgs e)
{
     string name=txtName.Text;
     //i change value of txtName.Text but see value as same as value in ds.Tables[0].Rows[0][1].ToString() that i select from DB
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:32:20.210

这是因为您在每个请求期间都覆盖了文本框的值。如果将代码放入 a`if (!IsPostBack)`那么它将起作用：

```
protected void Page_Load(object sender, EventArgs e)
{
      if (!IsPostBack)
      {
          DataSet ds = ....
          txtName.Text = ds.Tables[0].Rows[0][1].ToString();
      }
}

protected void reg_Click(object sender, EventArgs e)
{
     string name=txtName.Text;
} 
```

如果你在两个`Page_Load`and中都设置断点`reg_Click`，那么事情就会变得很明显。`Page_Load`每个请求都会调用。在回发的情况下（由单击按钮引起），它在按钮单击处理程序之前调用，因此将用从数据库读取的原始值覆盖文本框的（编辑的）值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:41:38.023

@Sajjjjjjad - @M4N 是正确的，您需要在“Page_Load”中使用 if(!Page.IsPostBack)。原因是，每次回发时 Page_Load 都会命中，因此根据您的代码，当您调用“reg_Click”方法时，它将首先命中 Page_load 方法，然后是“reg_Click”方法，它将替换您输入的值文本框。

您可以在此处查看 asp.net 页面生命周期以了解页面周期过程 -> [http://msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)这将为您提供更多信息。

如果您有任何问题，请告诉我们。

# php - PHP - 有没有像 Wordpress 永久链接一样制作干净 URL 的功能？

> ID：12788233
> 
> 赞同：0
> 
> 时间：2012-10-08T19:32:11.970
> 
> 标签：php

> **可能重复：**
> [自动清理和 SEO 友好的 URL（slug）](https://stackoverflow.com/questions/5305879/automatic-clean-and-seo-friendly-url-slugs)

我需要一个像 Wordpress 一样制作“干净的 URL 字符串”的函数。例如：“This is a string with frénch and gêrmän special chars + other mean stuff and I would like to use it as an URL” 应转换为：“this-is-a-string-with-french-and -german-special-chars-other-mean-stuff-and-id-like-to-use-it-as-an-url"

请帮助我的懒惰，这已经是艰难的一天了:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T19:35:16.583

在标题为 SEO 友好的 URL 下，有许多（许多）示例可用。

[http://www.intrepidstudios.com/blog/2009/2/10/function-to-generate-a-url-friendly-string.aspx](http://www.intrepidstudios.com/blog/2009/2/10/function-to-generate-a-url-friendly-string.aspx)

```
function generateSlug($phrase, $maxLength)
{
    $result = strtolower($phrase);

    $result = preg_replace("/[^a-z0-9\s-]/", "", $result);
    $result = trim(preg_replace("/[\s-]+/", " ", $result));
    $result = trim(substr($result, 0, $maxLength));
    $result = preg_replace("/\s/", "-", $result);

    return $result;
}

$title = "A bunch of ()/*++\'#@$&*^!%     invalid URL characters  ";

echo(generateSlug($title));

// outputs
a-bunch-of-invalid-url-characters 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:34:46.693

我将通过提示您明天需要做什么来帮助您今天的懒惰：

```
$final_string = str_replace(
    array(' ', 'ă', 'â', 'ä'),
    array('-', 'a', 'a', 'a'),
    $initial_string
); 
```

这可以有很多变体，例如使用 RegEx ( `preg_replace`) 来匹配某些字符组，例如多个空格/制表符/换行符 ( `\s*`) 或应该具有相同替换的多个字符 ( `ă|â|ä`)。

```
$final_string = preg_replace(
    array('/\s*/', '/ă|â|ä/'),
    array('-', 'a'),
    $initial_string
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T19:35:54.073

*使用vanialla* PHP 函数获得的最接近的函数是`urlencode()`，但这并不完全按照您问题中的示例输出。

例如：

```
$my_string = strtolower(urlencode("This is a string with frénch and gêrmän special chars + other mean stuff and I'd like to use it as an URL"));
echo $my_string; 
```

将产生：

```
this+is+a+string+with+fr%e9nch+and+g%earm%e4n+special+chars+%2b+other+mean+stuff+and+i%27d+like+to+use+it+as+an+url 
```

不幸的是，要匹配 WordPress 的功能，您要么必须根据他们的算法编写一个函数，要么从头开始编写一个。

# jquery - 按 id 查找元素

> ID：12788234
> 
> 赞同：1
> 
> 时间：2012-10-08T19:32:21.113
> 
> 标签：jquery

每个人！我这样做了：

```
$('#kill').live('click',function(){
   $closeId = $(this).parent().attr('id');
   $('#suggested').find('#' + $closeId).removeClass().addClass('active');
}); 
```

它不起作用。我试图测试它：

```
var $test = $('#suggested').find('#' + $closeId).length; 
```

它返回'0'，这是不正确的。如果您知道如何解决它，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T19:33:46.213

做

```
$('#kill').live('click',function(){
   $(this).parent().removeClass().addClass('active');
}); 
```

备注：

*   如果您只想要元素，则不必获取 id。
*   `find`如果您有身份证，请勿使用。由于文档中只能有一个具有给定 id 的元素，因此最有效的是使用`$('#' + $closeId)`.
*   对于新的 jQuery 版本，不要使用[live](http://api.jquery.com/live/)而是[在](http://api.jquery.com/on/).

# c++ - 从原始数据中填充成员的正确方法是什么

> ID：12788244
> 
> 赞同：2
> 
> 时间：2012-10-08T19:32:43.563
> 
> 标签：c++

我有一个使用 const u_char* 指向原始数据的指针，还有一个像这样的泛型类

```
class Rectangle 
{
   u_int8_t length;
   u_int8_t height;
   ...
} 
```

假设原始数据是字节的二进制“流”，那么将原始数据放入类字段的最佳方法是什么。

```
-memcpy ?
-cast   ? 
```

我*可以*这样做：

```
Rectangle *rect = (Rectangle*)rawdata; 
```

但我知道这是一个“旧式”演员。

什么是正确的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:40:28.357

我会说有一个构造函数：

```
Rectangle(const u_char*) 
```

对代码进行强制转换现在可以正常工作，但是如果您以后想更改类，这是一个糟糕的主意。拥有一个构造函数可能意味着*一些*开销，但你会有一个逻辑发生的地方。

如果稍后您决定要向 中添加虚拟方法`Rectangle`，则代码中的所有强制转换都将变得无用。

这当然是如果你想从数据构造一个新对象。如果您经常序列化/反序列化对象，我会使用序列化方法：

```
const u_char* toUChar() const;
void fromUChar(const u_char*) const; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T19:44:50.907

```
Rectangle& rect = *reinterpret_cast<Rectangle*>(rawdata); 
```

`rawdata`如果是，我会这样做，`void`或者直接转换为引用，如果`rawdata`是任何其他类型（我可以直接引用的类型）。

我更喜欢参考，因为我发现它比使用原始指针更不容易出错。但是，如果您需要进行指针运算，则将其设为原始指针是没有问题的。根据使用情况，您可能希望转换为 a`const Rectangle&`而不是 non- `const`。

但是，通常对于原始字节流，您需要发明一个协议，并且您*不应该*直接转换为结构或类。结构和类可能有填充，这会打乱你的直接投射。无论如何，演员阵容都会默默地成功，但你的价值观会出乎意料。协议将类似于...

> 0 偏移量：（4 字节 - 浮点数）大小
> 
> 4 偏移量：（2 字节 - uint16_t）高度

等等。执行协议方法意味着您必须一一分配成员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T19:46:08.083

最简单和最可靠的方法是简单地使用转换构造函数：

```
class Rectangle
{
public:
  Rectangle(uint8_t l, uint8_t h) : length(l), height(h) {};
  // ...
}; 
```

这应该是您的首选方法，直到由于某种原因这是不可能的。

除此之外，下一个最好的事情就是简单地进行成员初始化：

```
Rectangle rect;
rect.width = 20;
rect.height = 40; 
```

如果无法执行上述操作，并且*如果*所讨论的对象是标准所指的“聚合”（基本上是 POD），则可以使用如下初始化器：

```
Recatagle rect = {10,20}; 
```

这样做时，您必须记住，成员将按照它们在类中声明的顺序进行初始化。如果你改变声明的顺序，你会像上面那样破坏每个初始化。这是非常脆弱的。出于这个原因，我将这种结构的使用限制在所讨论的类高度本地化的情况下（如单个翻译单元中的帮助类），并且我记录了保持声明顺序完整的需要。

编辑评论：

在您尝试将字符串复制到您的类中或指向任何类型数据的指针的情况下，您将需要进行深层复制：

```
class Gizmo
{
public:
  Gizmo(const char* str) : str_(0)
  {
    str_ = new char[strlen(str)+1];
    strcpy(str_,str);
  }
}; 
```

请注意上面的代码的笨拙和脆弱。这里有很多可能出错的地方。其中最重要的是忘记`delete` `str_`何时`Gizmo`被销毁，丑陋和似乎缺乏必要`new`的`char`字符串首先，一次过去的错误......名单还在继续。由于这些原因，最好完全避免使用原始指针并使用智能指针（即`unique_ptr`,`shared_ptr`等）或集合类。在这种情况下，我会使用 a `std::string`，它可以被认为是一个集合类：

```
class Gizmo
{
public:
  Gizmo(const char* str) : str_(str) {};
private:
  std::string str_;
}; 
```

随意将其转换为与 a 一起使用`u_char*`，并通过验证源指针是否有效来增加鲁棒性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T19:37:11.107

“新风格”演员阵容是

```
Rectangle *rect = reinterpret_cast< Rectangle* >( rawdata ); 
```

但是你应该小心对齐，你的类中的填充。

这将使用相同的内存，它只会像`Rectanle`对象一样解释它。

`memcpy`会复制它。取决于你的需要。很可能，您不需要它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T19:50:04.987

虽然直接铸造要快一点，但这样做会将你的类锁定到特定的设计中。如果您稍后对类中的数据进行更改，则所有强制转换都会中断。

处理原始数据的更好方法是创建构造函数和/或重载输入流运算符。我个人更喜欢将运算符重载到构造函数，因为我讨厌一个类有多个简单的构造函数。重载可能看起来像这样：

```
istream& operator >> (istream& input, char* rawData)
{
    //fill your object's variables directly from the raw data
} 
```

通过这种方式，您可以控制从数据中填充对象，如果数据或对象发生变化，您只需在一个位置更改代码即可在任何地方修复它。

我也喜欢使用运算符重载而不是为它创建函数，因为我认为它使代码看起来更好更快地看到你在做什么。

# bing-maps - Bing Maps - 使用 REST imagery API 确定静态航空地图的最大缩放级别

> ID：12788245
> 
> 赞同：3
> 
> 时间：2012-10-08T19:32:49.627
> 
> 标签：bing-maps

我正在通过 REST 图像 API 从 Bing 地图中检索静态航空地图。某些地理区域似乎支持比其他区域更大的缩放级别。

例如，此位置支持最大 21 的缩放级别：[http ://dev.virtualearth.net/REST/v1/Imagery/Map/Aerial/33.049101,-96.822731/21?key=someKey](http://dev.virtualearth.net/REST/v1/Imagery/Map/Aerial/33.049101,-96.822731/21?key=someKey)

但这个位置似乎在 19 点达到最大值：[http ://dev.virtualearth.net/REST/v1/Imagery/Map/Aerial/38.82716,-97.6352/19?key=someKey](http://dev.virtualearth.net/REST/v1/Imagery/Map/Aerial/38.82716,-97.6352/19?key=someKey)

如果超过 19 的缩放级别，则返回一个图像，但该图像仅包含一个带有斜线的相机，表示已超过最大缩放级别。

有没有办法调用 API 来确定将返回有效航拍图像的最大缩放？

谢谢，跳过

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-05T07:02:15.793

令人惊讶的是，Bing 似乎没有直接提供此功能。我本来希望图像元数据响应包含一个字段，该字段指示将在该位置返回有效图像的最高缩放级别。但是，zoomMin 和 zoomMax 似乎基本没用。通常你会注意到 zoomMax 的图像会返回一个“破碎”的图像，而实际的图像只能在较低的缩放级别下使用。

我创建了一个似乎效果很好的解决方法。当图像实际存在于您在图像元数据请求 url 中指定的缩放级别时，vintageStart（和 vintageEnd）字段似乎填充了值（例如“2006 年 1 月 31 日 GMT”）。当真实图像不可用时，vintageStart 和 vintageEnd 似乎设置为空。（我想知道这是否绝对可靠？）

您可以从级别 21 开始并降低缩放级别。可以假设填充了 vintageStart 的第一个级别是具有有效图像的最佳可用缩放级别。

**深度 21：vintageStart 为空** [http://dev.virtualearth.net/REST/V1/Imagery/Metadata/Aerial/40.714550167322159,-74.007124900817871?zl=21&key=BING_API_KEY](http://dev.virtualearth.net/REST/V1/Imagery/Metadata/Aerial/40.714550167322159,-74.007124900817871?zl=21&key=BING_API_KEY)

请注意，maxZoom 显示为 21，但您会看到这没有有效的图像。

**深度 21：破损图像** [http://dev.virtualearth.net/REST/V1/Imagery/Map/aerial/40.714550167322159,-74.007124900817871/21?key=BING_API_KEY](http://dev.virtualearth.net/REST/V1/Imagery/Map/aerial/40.714550167322159,-74.007124900817871/21?key=BING_API_KEY)

**深度 20：vintageStart 已填充** [http://dev.virtualearth.net/REST/V1/Imagery/Metadata/Aerial/40.714550167322159,-74.007124900817871?zl=20&key=BING_API_KEY](http://dev.virtualearth.net/REST/V1/Imagery/Metadata/Aerial/40.714550167322159,-74.007124900817871?zl=20&key=BING_API_KEY)

**深度 20：有效图像**:-) [http://dev.virtualearth.net/REST/V1/Imagery/Map/aerial/40.714550167322159,-74.007124900817871/20?key=BING_API_KEY](http://dev.virtualearth.net/REST/V1/Imagery/Map/aerial/40.714550167322159,-74.007124900817871/20?key=BING_API_KEY)

## PHP中的示例代码...

```
function getHighestZoomAtLocation($lon, $lat){

    //Add extra zoom levels to check if necessary
    foreach(array(21, 20, 19, 18) as $zoom){

        $url = "http://dev.virtualearth.net/REST/v1/Imagery/Metadata/Aerial/{$lat},{$lon}?&zoomLevel={$zoom}&key=BING_API_KEY";

        $imagery_meta_data_raw = file_get_contents($url);

        $imagery_meta_data = json_decode($imagery_meta_data_raw, true);

        if(!empty($imagery_meta_data['resourceSets'][0]['resources'][0]['imageUrl']) && !empty($imagery_meta_data['resourceSets'][0]['resources'][0]['vintageStart'])){
            return $zoom;
        }

    }

    return false;

} 
```

（请注意，如果广泛使用这种方法可能会耗尽您的交易配额）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-18T12:14:10.243

正如 Nicolas 所提到的，您可以使用 Bing Maps Imagery Metadata REST 服务获取地图区域的缩放范围：http: [//msdn.microsoft.com/en-us/library/ff701716.aspx](http://msdn.microsoft.com/en-us/library/ff701716.aspx)

# perl - Perl 分布式作业队列

> ID：12788246
> 
> 赞同：2
> 
> 时间：2012-10-08T19:33:06.990
> 
> 标签：perl, unix, job-scheduling

我需要设置一个作业队列，通过 Web 界面安排长时间运行的作业队列。然后在多个盒子上运行。我还需要能够删除和重新排序队列中的作业。

目前我们所有的代码都在 perl 中。我正在考虑使用诸如 ApacheMQ、Gearman、Resque 等之类的东西……

问题是，前面提到的其中一个是否更适合这项工作，不同的软件解决方案呢？我的创意计划只是编写一个 MySQL/Perl 队列，但这非常困难。我更喜欢有一个像样的网络界面的东西，并且有一个 Perl 的界面。一个纯 MySQL/Perl 将是理想的。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-09T00:43:43.077

是的，自己写一篇好文章是相当困难的。以下是我可以根据我的经验告诉你的：

CPAN 上的 TheSchwartz 是一个很好的可靠作业队列，它使用 mysql 作为后备存储。

Gearman 是一个不可靠但低延迟的队列，具有不同的功能集。

它们都没有 Web 界面，但它们具有良好的命令行界面，可以查看正在处理的内容以及队列的状态。

您可以使用 MQ 消息队列作为解决方案，但这些是消息传递队列，与作业管理不太一样，您必须自己处理调度、重试和失败等事情。

我已经看到通过 STOMP 通过 Perl 访问的 ActiveMQ 现在在两个项目中尝试并失败了。

RabbitMQ 非常稳定（去吧，Erlang！）并且非常有效。

两者都为消息队列部分提供了不错的 Web 界面。

# teamcity - Team City 项目和用户帐户迁移到测试环境

> ID：12788250
> 
> 赞同：0
> 
> 时间：2012-10-08T19:33:26.490
> 
> 标签：teamcity, teamcity-7.0

我们有一个生产团队城市，我们想将用户帐户和项目迁移到我们的团队城市测试服务器。是否有捷径可寻？我应该从 TeamCityData 目录中移动一些 xml 文件吗？

任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:32:10.853

据我所知，执行此类操作的最简单方法是使用 team-city 的备份和恢复功能。

对您的 teamcity 服务器进行完整备份（可以在此处找到说明：[http](http://confluence.jetbrains.net/display/TCD7/Creating+Backup+from+TeamCity+Web+UI) ://confluence.jetbrains.net/display/TCD7/Creating+Backup+from+TeamCity+Web+UI ）

然后将此备份恢复到您的测试环境中。

这应该给你你需要的东西。此处详细介绍了备份的替代方法：http: [//confluence.jetbrains.net/display/TCD7/TeamCity+Data+Backup](http://confluence.jetbrains.net/display/TCD7/TeamCity+Data+Backup)

# android - 如何让 USB 电阻式触摸屏在 Android 上工作。

> ID：12788251
> 
> 赞同：4
> 
> 时间：2012-10-08T19:33:28.083
> 
> 标签：android, usb, linux-device-driver, drivers, touchscreen

我知道你们中的大多数人可能已经看到，有很多基于 Android 的 PC 都在移动。它们非常小，但当然没有输入设备。他们使用 Android 4.0 及更高版本。我使用的两个是 MK802 (Android 4.0) 和 MK808 (Android 4.1)。我正在尝试在移动/汽车环境中使用这些设备。这些装置制造出优质且价格合理的车载电脑装置。我已经在车上安装了基于 Windows 的系统，所以我拥有所有基于 VGA 的屏幕。它们带有 4 线电阻式 USB 触摸面板。

当然，我将 USB 插入设备，但没有任何反应。我必须做些什么来启用和让触摸屏工作？我原以为它会是本机的，或者作为鼠标安装，但事实并非如此。我知道 Linux 中有一个通用的驱动程序可以工作，但不知道如何将它用于 Android。另外，我在哪个位置查看可能编辑 Android 中的当前驱动程序？

任何类型的帮助将不胜感激！我对此很陌生，所以请不要用大量的 Android 谈话来抨击我，如果可以的话，请把它淡化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T06:43:13.937

让新设备在 Android 上运行并不是那么容易……Android 还不是一个真正的通用操作系统，它的内核与我们在桌面上运行的内核并不完全相同。

这里只是一些建议：

插入 USB 设备后，执行“adb shell dmesg”检查 linux 是否为您找到正确的驱动程序。我知道内核源代码树（驱动程序/输入/触摸屏）中有 usbtouchscreen.c，但您必须确认：

一个。驱动程序本身支持您的设备
b. 运行您的 Android 的设备已编译并链接此驱动程序模块。

我假设你已经确认了。对于 b，您可以通过列出 /sys/class/input/driver/... 等目录中的所有相关驱动程序来查找，并检查该特定驱动程序是否存在。

之后，执行“adb logcat|grep EventHub”，看看 Android 是否对这个输入设备满意。我认为如果你可以让驱动程序在 linux 中工作，那么 Android 应该不会有太多问题，因为它只是与来自 /dev/input/eventX 节点的内核输入交互。

祝你好运！

# jquery - jQuery Mobile 启动画面在 Safari 中不断重新加载

> ID：12788253
> 
> 赞同：1
> 
> 时间：2012-10-08T19:33:32.933
> 
> 标签：jquery, jquery-mobile, safari

我正在向移动网络应用程序添加启动页面。我希望在网站加载时显示徽标页面......大约 4 秒。我的以下代码在除 Safari 之外的所有浏览器中都能正常工作。在 Safari 中，页面每 4 秒重新加载一次。我尝试使用 Meta 标签，仅在 Safari 中具有相同的结果。任何想法都非常感谢！

```
 <html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>

    <script>
  $('#splash').live('pageshow', function(){
       var hideSplash = function() {
           $.mobile.changePage($("#home"));
       };
      setTimeout(hideSplash, 2000);
  });
    </script>

    </head>

    <body>

        <div data-role="page" id="splash">
            <div data-role="content">  
                <img src="http://www.intergrupo.net/blog/wp-content/plugins/wptouch-pro/themes/classic/iphone/images/retina/retina-startup.png" alt="startup image" style="width: 100%; height: 100%" />
            </div>
        </div>

        <div data-role="page" id="home">
            <div data-role="header" data-backbtn="false">
                <h1>New page!!</h1>
            </div>
            <div data-role="content">
       New content!<br/>
       Test!!
            </div>
        </div> 
```

# vb.net - VB 中的 SQL 查询 - 缺少操作数

> ID：12788254
> 
> 赞同：1
> 
> 时间：2012-10-08T19:33:34.063
> 
> 标签：vb.net

刚学了一点VB，想搜索一个很简单的SQL查询如下：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    firstOrd = txtFirstOrd.Text
    Me.OrdersBindingSource.Filter = "select * from orders WHERE firstDate =" & firstOrd
End Sub 
```

我刚刚在一个简单的按钮上执行了这个并继续得到这个：

```
Syntax error: Missing operand after 'orders' operator. 
```

我很确定这是一个**报价问题**，但无法解决！任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:35:40.797

听起来您正在使用 SQL 解释器，它考虑 SQL 中`orders`的关键字。为了清楚地表明它是一个表名，请引用它。

```
"select * from [orders] WHERE firstDate =" & firstOrd 
```

但是，通常建议（但并不总是实用）只是为了避免作为关键字的表名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:43:41.733

看起来您正在尝试**使用 bindingSource 的过滤器**。此[过滤器属性](http://msdn.microsoft.com/de-de/library/system.windows.forms.bindingsource.filter%28v=vs.110%29.aspx)可能包含检查给定 bindingSource 的每一行的**条件**

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    firstOrd = txtFirstOrd.Text
    Me.OrdersBindingSource.Filter = String.Format("firstDate = '{0}'", firstOrd)
End Sub 
```

我假设`firstOrd`将包含一个*dateTime 值*，因此可以考虑查看**[BindingSource.Filter by Date](https://stackoverflow.com/questions/400283/bindingsource-filter-by-date)**。

# sass - Sass：浏览器供应商前缀

> ID：12788262
> 
> 赞同：40
> 
> 时间：2012-10-08T19:34:13.110
> 
> 标签：sass

我对 Sass/Compass 非常陌生，所以这个问题对你们中的许多人来说可能听起来很愚蠢。

无论如何，我需要知道的是如何为浏览器供应商前缀创建一个 mixin，我可以一遍又一遍地重复使用，而不必每次都键入它们。

我在网上看过教程，但我无法理解正确应用它们所需的一些概念。

我现在需要的是在 CSS 中实现这一点：

```
* { 
    -webkit-box-sizing:border-box;
       -moz-box-sizing:border-box;          
        -ms-box-sizing:border-box; 
         -o-box-sizing:border-box; 
            box-sizing:border-box; 
  } 
```

谢谢。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-07-01T07:41:04.323

我还想抽象出供应商前缀，但我没有可用的指南针。

```
@mixin vendor-prefix($name, $value) {
  @each $vendor in ('-webkit-', '-moz-', '-ms-', '-o-', '') {
    #{$vendor}#{$name}: #{$value};
  }
} 
```

萨斯：

```
* {
  @include vendor-prefix('box-sizing', 'border-box');
} 
```

渲染：

```
* {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  -ms-box-sizing: border-box;
  -o-box-sizing: border-box;
  box-sizing: border-box; } 
```

另见：
[http ://stefanwienert.net/blog/2012/05/18/easy-css-vendor-prefix-mixin-for-sass/](http://stefanwienert.net/blog/2012/05/18/easy-css-vendor-prefix-mixin-for-sass/)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-10-08T21:54:04.430

听起来你想使用 Compass [box-sizing](http://compass-style.org/reference/compass/css3/box_sizing/#mixin-box-sizing) mixin。您的 SASS 文件如下所示：

```
@import "compass/css3/box-sizing";

* {
    @include box-sizing(border-box);
} 
```

并将编译为：

```
* {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box; } 
```

[您可以在此处](http://compass-style.org/reference/compass/css3/)查看其他 CSS3 Compass mixin 。但是请注意，Compass 不包括前缀`-ms-box-sizing`，例如，因为[IE8+ 已经实现了它而没有前缀](https://github.com/chriseppstein/compass/issues/627)。如果你真的想要那些额外的属性，你会这样做：

```
@import "compass/css3/shared"

* {
    @include experimental(box-sizing, border-box, -moz, -webkit, -o, -ms, not -khtml, official);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-10T05:30:24.483

这是我处理供应商前缀的 sass 解决方案：[https ://github.com/Aloge/sass-prefixer](https://github.com/Aloge/sass-prefixer)

它与@rimian 的解决方案类似，但您只需要包含一个带有 css 属性及其值的 mixin，它就会自动呈现带有必要供应商前缀的 css。所以这：

```
* {
  @include prefix(box-sizing, border-box)
} 
```

呈现：

```
* {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
} 
```

但是这个：

```
* {
  @include prefix(display, flex)
} 
```

呈现：

```
* {
  display: -moz-flex;
  display: -webkit-flex;
  display: flex;
} 
```

它仍处于测试阶段，可能存在错误，但我正在努力改进它并包含新功能

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-05T19:39:33.060

我鼓励你尝试编写自己的 mixin。这是我用于浏览器前缀的那个。

```
@mixin prefix ($prop, $val...)
  -webkit-#{$prop}: #{$val}
  -moz-#{$prop}: #{$val}
  -ms-#{$prop}: #{$val}
  #{$prop}: #{$val} 
```

然后你可以通过简单的输入来使用它（以 box-sizing 为例）：

```
+prefix (box-sizing, border-box) 
```

产生以下 CSS：

```
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
-ms-box-sizing: border-box;
box-sizing: border-box; 
```

如果需要传递多个值，可以使用括号（对转换有用）：

```
+prefix (box-shadow, (0 2px rgba(black, 0.1), 0 0 0 1px rgba(black, 0.1)) 
```

产生以下 CSS：

```
-webkit-box-shadow: 0 2px rgba(0,0,0, 0.1), 0 0 0 1px rgba(0,0,0, 0.1);
-moz-box-shadow: 0 2px rgba(0,0,0, 0.1), 0 0 0 1px rgba(0,0,0, 0.1);
-ms-box-shadow: 0 2px rgba(0,0,0, 0.1), 0 0 0 1px rgba(0,0,0, 0.1);
box-shadow: 0 2px rgba(0,0,0, 0.1), 0 0 0 1px rgba(0,0,0, 0.1); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-19T17:12:27.443

我认为您应该使用 Autoprefixer，这样您就不必再担心浏览器前缀了。Autoprefixer 使用 caniuse.com 的数据库。我建议您开始使用 Grunt 或 Gulp，然后将插件 Autoprefixer 作为一项任务，它将重新编译 css 并为您吐出所需的浏览器前缀。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-05T23:22:13.380

```
$vendors: (
    '-webkit-','-apple-','-khtml-',
    '-moz-','-rim-','-xv-',
    '-ms-','-o-',''
);
@mixin pref($prop,$val...) {
    @each $key in $vendors {
        #{$key}#{$prop}:$val;
    }   
}
selector {
    @include pref(box-sizing,border-box);
} 
```

呈现如下：

```
selector {
    -webkit-box-sizing: border-box;
    -apple-box-sizing: border-box;
    -khtml-box-sizing: border-box;
    -moz-box-sizing: border-box;
    -rim-box-sizing: border-box;
    -xv-box-sizing: border-box;
    -ms-box-sizing: border-box;
    -o-box-sizing: border-box;
    box-sizing: border-box;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-09-05T13:12:24.797

# 完整的高级解决方案

> ### 变量 :: **CREATE 具有所有或可用前缀的变量**

```
/* CREATE vars with all or usable prefixes */
$all-vendors: (
    'webkit','apple','khtml',
    'moz','rim','xv',
    'ms','o'
);

$using-vendors: (
    'webkit', 'moz', 'ms', 'o'
); 
```

> **实际混合函数 :: Mixin 用于多个声明 && Mixin 用于多个声明**

```
/** Mixin for multiple declarations **/
@mixin prefs($declarations, $prefixes: ()) {
 @each $property, $value in $declarations {
   @each $prefix in $prefixes {
     #{'-' + $prefix + '-' + $property}: $value;
   }
   #{$property}: $value;
 }
}

/** Mixin for single property to be prefixed **/
@mixin pref($property, $value, $prefixes){
    @each $prefix in $prefixes {
        #{'-' + $prefix + '-' + $property}: $value;
    }
    #{$property}: $value;
} 
```

> **###Actual Usage :: 在任何选择器中使用@include**

**多个示例**

```
/** Prefixes usage **/
.selector {
  @include prefs((
    column-count: 3,
    column-gap: 1.5em,
    column-rule: 2px solid hotpink
  ), $using-vendors);
} 
```

**Single pref mixin 示例**

```
.cc3 {
    @include pref(column-count,3,webkit moz ms);
} 
.ccc4 {
    @include pref(column-count, 4, $all-vendors);
} 
```

## 最后使用SASS编译器编译后

## 输出

```
.selector {
  -webkit-column-count: 3;
  -moz-column-count: 3;
  -ms-column-count: 3;
  column-count: 3;
  -webkit-column-gap: 1.5em;
  -moz-column-gap: 1.5em;
  -ms-column-gap: 1.5em;
  column-gap: 1.5em;
  -webkit-column-rule: 2px solid hotpink;
  -moz-column-rule: 2px solid hotpink;
  -ms-column-rule: 2px solid hotpink;
  column-rule: 2px solid hotpink; }

.cc3 {
  -webkit-column-count: 3;
  -moz-column-count: 3;
  -ms-column-count: 3;
  column-count: 3; }

.ccc4 {
  -webkit-column-count: 4;
  -apple-column-count: 4;
  -khtml-column-count: 4;
  -moz-column-count: 4;
  -rim-column-count: 4;
  -xv-column-count: 4;
  -ms-column-count: 4;
  column-count: 4; } 
```

> 另一种选择是使用考拉，只需启用自动前缀，它就会像魅力一样工作。

[你可以在这里下载。](http://koala-app.com/)

*或使用 grunt 构建系统。*

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-08-02T08:10:14.863

这是官方 SASS 网站中给出的示例 -[链接](https://sass-lang.com/documentation/style-rules/declarations)

```
@mixin prefix($property, $value, $prefixes) {
  @each $prefix in $prefixes {
    -#{$prefix}-#{$property}: $value;
  }
  #{$property}: $value;
}

.gray {
  @include prefix(filter, grayscale(50%), moz webkit);
} 
```

```
.gray {
  -moz-filter: grayscale(50%);
  -webkit-filter: grayscale(50%);
  filter: grayscale(50%);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-02T17:00:05.840

单个或多个声明的我的版本

```
//prefix vendors
$prefixes: (
    'webkit', 'moz'
);

//prefix mixin
@mixin prefix($declarations: ()) {
    @each $property, $value in $declarations {
        @each $prefix in $prefixes {
            #{'-' + $prefix + '-' + $property}: $value;
        }
        #{$property}: $value;
    }
} 
```

多个声明的用法

```
@include prefix((animation-name:fadeInDown,animation-duration: 1s)); 
```

单一声明的用法

```
 @include prefix((animation-name:fadeInDown)); 
```

# objective-c - NSDateFormatter 解析错误

> ID：12788264
> 
> 赞同：0
> 
> 时间：2012-10-08T19:34:17.677
> 
> 标签：objective-c, ios6, nsdateformatter

我有一系列日期，所有日期都采用“yyyyMMdd”格式。

问题是当 NSDateFormatter 尝试解析“20121021”时，它仅在 iOS 6 上返回 null。

因此，我在 iOS 4.x 和 5.x 上对其进行了测试，它运行良好。有人有同样的问题吗？

这是代码：

```
NSString *sdate = @"20121021";
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"yyyyMMdd"];

NSDate *aDate = [dateFormat dateFromString:sdate];
[dateFormat release];
if (aDate){
    [dates addObject:aDate];
}else{
    NSLog(@"%@", sdate);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T06:27:14.730

Tried in ARC ios 6 - worked

Tried without ARC ios 6- Worked

```
NSString *sdate = @"20121021";
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"yyyyMMdd"];
NSDate *aDate = [dateFormat dateFromString:sdate];
[dateFormat release];

if (aDate){
    NSLog(@"%@", aDate);

}else{
    NSLog(@"%@", aDate);
} 
```

my log

```
2012-10-09 11:54:08.941 asd[97441:11303] 2012-10-20 18:30:00 +0000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T18:33:50.100

找到了答案...我忘了为格式化程序设置 NSTimeZone。

新代码：

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];

[dateFormat setDateFormat:@"yyyyMMdd"];

NSDate *aDate = [dateFormat dateFromString:sdate];
[dateFormat release]; 
```

谢谢

# jquery - jQuery：.load() 没有响应

> ID：12788265
> 
> 赞同：1
> 
> 时间：2012-10-08T19:34:20.890
> 
> 标签：jquery, html

我有一个带有这些 jQuery 语句的简单 HTML 页面：

```
$(document).ready(function() {
    $('#myDiv').load('mypage.html');
}); 
```

由于某种原因，这不会将任何 HTML 加载到 div 中。我使用[这种方法](https://stackoverflow.com/questions/3646914/how-do-i-check-if-file-exists-in-jquery-or-javascript)来确保源文件存在——一切正常。我尝试使用错误回调，`.load()`状态为“错误”，但响应为空。查看控制台，我看到以下 GET 请求：

```
[12:18:20.770] GET http://localhost/ [HTTP/1.1 200 OK 0ms] 
```

最后，当我做一个简单的`$('#myDiv').html('test');`加载很好，所以我知道 div 设置正确。

谁能想到这里出了什么问题？我在 Windows 上运行 WAMP，如果有帮助的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:42:35.000

尝试

```
$('#myDiv').load('/root/folder/mypage.html'); 
```

也试试。

```
$('#myDiv').html('Did i disappear?');
$('#myDiv').load('/root/folder/mypage.html');
///// Is myDiv empty when the page loads? 
```

# php - 代码优化——mysql输出

> ID：12788270
> 
> 赞同：0
> 
> 时间：2012-10-08T19:34:31.067
> 
> 标签：php, mysql, arrays

我认为我的代码可以更简单，但我不确定。看看，如果你有的话，请告诉我一些替代方案。我用来显示电影信息的这段代码

```
$sql='SELECT DISTINCT id,title,img,description,adder,added,
GROUP_CONCAT(DISTINCT cid,"-",caty ) AS caty,
GROUP_CONCAT(DISTINCT oid,"-",obs,"-",face,"-",rola,"-",typ) AS obs
FROM film

LEFT JOIN f_o ON f_o.f_id = film.id
LEFT JOIN obs ON f_o.o_id = obs.oid

WHERE film.id ='.$fid;

$wynik=mysql_fetch_assoc(mysql_query($sql));
if(isset($wynik['id'])){
echo '<pre>';
print_r($wynik);
echo '</pre>';
////
$array  = explode(',', $wynik['obs']);

$r=array();//director - 0
$s=array();//Screenwriter - 1
$ak=array();//actors - 2
$akn=array();//actors 2 plan - 3
$np=array();//From Idea By - 4
$p=array();//producers - 5
$m=array();//music - 6

foreach ($array as $item)
{
    $a = explode('-', $item);
    if( $a[4] == 0 )
    {
        $r[] = $a[0].','.$a[1].','.$a[2].','.$a[3];
    }
    elseif($a[4] == 1 )
    {
        $s[] = $a[0].','.$a[1].','.$a[2].','.$a[3];
    }
    elseif($a[4] == 2 )
    {
        $ak[] = $a[0].','.$a[1].','.$a[2].','.$a[3];
    }
    elseif($a[4] == 3 )
    {
        $akn[] = $a[0].','.$a[1].','.$a[2].','.$a[3];
    }
    elseif($a[4] == 4 )
    {
        $np[] = $a[0].','.$a[1].','.$a[2].','.$a[3];
    }
    elseif($a[4] == 5 )
    {
        $p[] = $a[0].','.$a[1].','.$a[2].','.$a[3];
    }
    elseif($a[4] == 6 )
    {
        $m[] = $a[0].','.$a[1].','.$a[2].','.$a[3];
    }
}

function dzielperson($data){    
    $i = 0;
    $ile=count($data);
    while ($i < $ile) {
        $a  = explode(",", $data[$i]);
        $caty='<a href="/person/'.dolink($a[1]).'-'.$a[0].'" class="link1">'.$a[1].'</a>'.($i==($ile-1) ? '':', ');
        $i++;
    }
    return $caty;
}
echo '<br>Title: '.$wynik[title];
echo '<br>Desription: '.$wynik[description];
echo '<br>directors: '.dzielperson($r);
echo '<br>screenwriters: '.dzielperson($s);
echo '<br>actors: '.dzielperson($ak);
echo '<br>actors 2 plan: '.dzielperson($akn);
echo '<br>From Idea By '.dzielperson($np);
echo '<br>Producers: '.dzielperson($p);
echo '<br>Music: '.dzielperson($m);

} 
```

这是mysql的输出：

```
Array
(
    [id] => 1
    [title] => Pirates
    [img] => /images/1page_img1.jpg
    [description] => 
    [adder] => baambaam
    [added] => 1349387322
    [obs] => 1-aktor1-foto.jpg-shrek-3,2-aktor2-foto2.jpg-batman-0,3-aktor3-f1.png-Pirat-1,4-aktorzyna4-f2.png-Pirat 3-1
) 
```

表结构：

```
film:id,title img,description,adder,added
obs:oid,obs,face,rola,typ
f_o:f_id,o_id 
```

在 obs 列中，我有演员、导演的姓名....

这不是完整的代码，但我希望你能理解

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:20:30.403

```
$sql='SELECT DISTINCT id,title,img,description,adder,added
FROM film
WHERE film.id ='.$fid;
$wynik=mysql_fetch_assoc(mysql_query($sql));
if(isset($wynik['id'])){

// you should use constants instead of just if(type==_some_meaningless_number_):
$personTypeMap = array(
    'r'    //director - 0
    ,'s'   //Screenwriter - 1
    ,'ak'  //actors - 2
    ,'akn' //actors 2 plan - 3
    ,'np'  //From Idea By - 4
    ,'p'   //producers - 5
    ,'m'   //music - 6
);
// so above should be something like:
// define('PERSON_TYPE_DIRECTOR', 0);
// define...
// then you wouldn't need that array-map above as well as would be easier to understand who is what

// init all people subarrays:
$people = array_fill_keys($personTypeMap, array());

$sql='SELECT oid, obs, typ   #add other fields if you actually use them
FROM f_o
INNER JOIN obs ON f_o.o_id = obs.oid
WHERE f_o.f_id ='.$fid;
$peopleResult = mysql_query($sql);
while ($person=mysql_fetch_object($peopleResult)) {
    $people[$personTypeMap[$person->typ]][] = dzielperson($person);
}

function dzielperson($person){    
   return '<a href="/person/'.dolink($person->obs)."-{$person->oid}\" class=\"link1\">{$person->obs}</a>";
}

// join people in all categories through comma:
foreach ($people as &$category) {
    $category = implode(', ', $category);
}

echo '<br>Title: '.$wynik['title'];
echo '<br>Desription: '.$wynik['description'];
echo '<br>directors: '.$people['r'];
echo '<br>screenwriters: '.$people['s'];
echo '<br>actors: '.$people['ak'];
echo '<br>actors 2 plan: '.$people['akn'];
echo '<br>From Idea By '.$people['np'];
echo '<br>Producers: '.$people['p'];
echo '<br>Music: '.$people['m']; 
```

PS我为你修复你的代码有一个原因：你的原件让我不停地笑了10分钟:)谢谢。

PPS 我留下了一些最初的混乱，但以此为契机，了解您的代码出了什么问题，并尝试自己简化它。

PPPS 是的，在这种情况下，多个查询比单个怪物在单行中收集不相关的东西要好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:11:57.487

从你的 foreach 开始的更短的代码版本

```
$result = array(
    array(),
    array(),
    array(),
    array(),
    array(),
    array(),
    array()
);

foreach ($array as $item)
{
    $a = explode('-', $item);
    $result[ $a[4] ][] = $a[0].','.$a[1].','.$a[2].','.$a[3];
}

function dzielperson($data){
    $i = 0;
    $ile=count($data);
    while ($i < $ile) {
        $a  = explode(",", $data[$i]);
        $caty='<a href="/person/'.dolink($a[1]).'-'.$a[0].'" class="link1">'.$a[1].'</a>'.($i==($ile-1) ? '':', ');
        $i++;
    }
    return $caty;
}
echo '<br>Title: '.$wynik[title];
echo '<br>Desription: '.$wynik[description];
echo '<br>directors: '.dzielperson($result[0]);
echo '<br>screenwriters: '.dzielperson($result[1]);
echo '<br>actors: '.dzielperson($result[2]);
echo '<br>actors 2 plan: '.dzielperson($result[3]);
echo '<br>From Idea By '.dzielperson($result[4]);
echo '<br>Producers: '.dzielperson($result[5]);
echo '<br>Music: '.dzielperson($result[6]); 
```

dzielperson 函数根本没有被修改。

$result 初始化的简化语法：

```
$result = json_decode('[[],[],[],[],[],[],[]]'); 
```

如果您想要旧名称以提高可读性：

```
$names = array_flip(array('r', 's', 'ak', 'akn', 'np', 'p', 'm'));
echo '<br>directors: '.dzielperson($result[$names['r']]);
echo '<br>screenwriters: '.dzielperson($result[$names['s']]);
echo '<br>actors: '.dzielperson($result[$names['ak']]);
echo '<br>actors 2 plan: '.dzielperson($result[$names['akn']]);
echo '<br>From Idea By '.dzielperson($result[$names['np']]);
echo '<br>Producers: '.dzielperson($result[$names['p']]);
echo '<br>Music: '.dzielperson($result[$names['m']]); 
```

# nginx - 如何使用 NGINX 映射多个 URI？

> ID：12788271
> 
> 赞同：1
> 
> 时间：2012-10-08T19:34:30.220
> 
> 标签：nginx

我有许多引用相应项目路径的 UUID。我`rewrite`用来映射它们，如下所示：

```
rewrite ^/3a498981-a790-50ec-b53d-227e33023564/(.*)$ "/undisclosed/$1" last;
rewrite ^/b78c76de-9ab7-5d0e-81b9-d8b73d8afc4b/(.*)$ "/undisclosed/$1" last;
rewrite ^/1e4d143d-a3ec-5110-80e2-5e5212f93779/(.*)$ "/undisclosed/$1" last;
rewrite ^/858b33b7-bd66-507b-a9f1-533e4de79ba3/(.*)$ "/undisclosed/$1" last;
rewrite ^/451b5b98-4ebb-552d-867d-5dd685cd1810/(.*)$ "/undisclosed/$1" last;
rewrite ^/703dff31-b9be-543f-b6c6-61ae7fb4dd32/(.*)$ "/undisclosed/$1" last; 
```

`undisclosed`总是不同的路径，映射`/[client name]/[project name]`。然而，已经有超过 90 个 UUID，到今年年底这个数字将增长到 400+。

有没有专门的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:53:18.347

如果我理解正确，那么：

1.  你有 90 个不同的 UUIDS（并且期望数量会增长）
2.  每个 UUID 映射到不同的 /clientname/projectname/$1 路径

如果是这样，这意味着每个 UUID 将有 1 个重定向，故事结束。

您可以将映射从网络服务器移动到某个动态页面，但这只是将问题从 1 个配置移动到另一个配置（尽管如果您已经在某些配置数据库中定义了映射，您应该能够通过查询它来自动化映射）

# iphone - 长按时 UILongPressGestureRecognizer 不显示 ActionSheet

> ID：12788274
> 
> 赞同：0
> 
> 时间：2012-10-08T19:34:50.367
> 
> 标签：iphone, ios6

当长按 2 秒时，它应该会显示带有保存照片按钮的操作表，但操作表未显示。

```
 UILongPressGestureRecognizer *gestureRecognizer = [[UILongPressGestureRecognizer alloc]
                                               initWithTarget:self
                                               action:@selector(handleLongPress:)];
    gestureRecognizer.minimumPressDuration = 2.0;
     imageScrollView.userInteractionEnabled = YES;
     [imageScrollView addGestureRecognizer:gestureRecognizer];
    gestureRecognizer.delegate = self;
    [gestureRecognizer release];

- (void)handleLongPress:(UILongPressGestureRecognizer*)gestureRecognizer{
if (gestureRecognizer.state == UIGestureRecognizerStateBegan){
    UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Save Photo", nil];
    actionSheet.actionSheetStyle = UIActionSheetStyleDefault;
    [actionSheet showInView:self.view];
    [actionSheet release];

}

}

-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
switch (buttonIndex) {
    case 0:
        //UIImageWriteToSavedPhotosAlbum(imageView, self, @selector(image: didFinishSavingWithError:contextInfo:), nil);

        break;

    default:
        break;
}
} 
```

我在代码中做错了什么。

感谢帮助。

# intellij-idea - UTF-8 输出格式 - jetBrains

> ID：12788283
> 
> 赞同：2
> 
> 时间：2012-10-08T19:35:41.437
> 
> 标签：intellij-idea, webstorm

很奇怪，我正在使用 Webstorm 5.0.1 用 jstestdriver 测试一些 javascript。它真的很震撼，但我无法让我的 console.log(alert) 以 UTF-8 格式输出！

我已经尝试了很多事情，并考虑在这个 IDE 中这是否可能。

因此，当我断言文本 A 等于文本 B 时，断言返回 true，但控制台输出：

**文本 A（硬编码的预期结果）**

```
Snart har du ditt Silverkort! Tjäna 735 poäng och bli Silvermedlem. 
```

**文本 B（控制台输出）**

```
[LOG] Snart har du ditt Silverkort! Tj�?¤na 735 po�?¤ng och bli Silvermedlem. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:11:17.930

此错误[已修复](http://youtrack.jetbrains.com/issue/WI-13840)，请尝试下一个 EAP 或发布版本可用时。

> 问题不在于 JsTestDriver IntelliJ 插件的代码，而在于插件捆绑的 JsTestDriver-1.3.5.jar 核心库。
> 
> “[问题 85](http://code.google.com/p/js-test-driver/issues/detail?id=85)：运行测试时允许设置不同的字符集”
> 
> 下一个 JsTestDriver IntelliJ 插件版本将捆绑 JsTestDriver-1.3.5 的补丁版本（[补丁细节](http://confluence.jetbrains.com/display/WI/Patched+JsTestDriver-1.3.5)）。

# youtube-api - 如何获得总部 youtube 缩略图？

> ID：12788287
> 
> 赞同：84
> 
> 时间：2012-10-08T19:35:52.533
> 
> 标签：youtube-api

```
http://img.youtube.com/vi/<insert-youtube-video-id-here>/0.jpg
http://img.youtube.com/vi/<insert-youtube-video-id-here>/1.jpg
http://img.youtube.com/vi/<insert-youtube-video-id-here>/2.jpg
http://img.youtube.com/vi/<insert-youtube-video-id-here>/3.jpg 
```

这适用于小缩略图。

```
http://img.youtube.com/vi/<insert-youtube-video-id-here>/mqdefault.jpg 
```

这适用于总部，但只有 1 张图片。问题是如何获得 4 个总部缩略图？

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2012-10-08T19:38:36.430

您指的是完整分辨率吗？：

```
https://img.youtube.com/vi/<insert-youtube-video-id-here>/maxresdefault.jpg 
```

我不相信您可以获得总部的“多个”图像，因为您拥有的就是那个。

查看以下答案以获取有关 URL 的更多信息：[如何从 YouTube API 获取 YouTube 视频缩略图？](https://stackoverflow.com/questions/2068344/how-to-get-thumbnail-of-youtube-video-link-using-youtube-api)

> 对于实时视频使用`https://img.youtube.com/vi/<insert-youtube-video-id-here>/maxresdefault_live.jpg`
> 
> -[玉米须](https://stackoverflow.com/users/1763267/cornips)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2018-07-13T11:28:53.057

YouTube 分辨率和图像

```
http://img.youtube.com/vi/<video-id>/<resolution><image>.jpg 
```

**分辨率**
- 最低分辨率
sd - 标准清晰度
mq - 中等质量
hq - 高质量
maxres - 最大分辨率

**图像**
默认值 - 默认图像（从视频中拍摄 1、2、3 张或自定义上传）
1 - 从视频中拍摄第一张
2 - 从第二张拍摄视频
3 - 视频中的第三张照片

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-02-17T10:04:57.297

您可以简单地获取总部 youtube 缩略图..

[http://img.youtube.com/vi/YOUTUBE_VIDEO_ID/hqdefault.jpg](http://img.youtube.com/vi/YOUTUBE_VIDEO_ID/hqdefault.jpg)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-03-23T07:47:22.943

根据您需要的分辨率，您可以使用不同的 URL：

默认缩略图

```
http://img.youtube.com/vi/<insert-youtube-video-id-here>/default.jpg 
```

高品质缩略图

```
http://img.youtube.com/vi/<insert-youtube-video-id-here>/hqdefault.jpg 
```

中等质量

```
http://img.youtube.com/vi/<insert-youtube-video-id-here>/mqdefault.jpg 
```

标准定义

```
http://img.youtube.com/vi/<insert-youtube-video-id-here>/sddefault.jpg 
```

最大分辨率

```
http://img.youtube.com/vi/<insert-youtube-video-id-here>/maxresdefault.jpg 
```

注意：如果您不想使用 YouTube 数据 API，这是一种解决方法。此外，并非所有视频都设置了缩略图，因此上述方法不起作用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-16T01:26:42.917

您需要从以下位置获取 id：

> youtube.com/watch?v=VIDEO_ID

并将其放入：

> i.ytimg.com/vi/VIDEO_ID/maxresdefault.jpg

我希望我有所帮助：D

# powershell - Powershell 启用防火墙规则 - 所有文件和打印机共享（其中配置文件是私有的）

> ID：12788291
> 
> 赞同：4
> 
> 时间：2012-10-08T19:36:35.397
> 
> 标签：powershell, firewall

我想知道如何编写一个 powershell 脚本以在 Windows 7 上为配置文件为私有的所有文件和打印机共享规则启用入站防火墙。

我已经编写了脚本来插入附加规则，但不知道如何更新内置规则。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-11-19T22:03:13.657

抱歉，不适用于 Windows 7，但对于像我一样找到此线程的其他人，他们正在寻找一种在 Windows Core 服务器上启用文件共享的方法。

```
Set-NetFirewallRule -Name 'FPS-SMB-In-TCP' -Enabled True 
```

通过查看结果得到

```
Get-NetFirewallRule | Where-Object { $_.Name -like '*FPS*' } | Select-Object Name,Enabled,Direction 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T17:02:04.690

您可以使用“Set-NetFirewallRule (identify your rule) -Enable True”来启用规则。需要放一些东西来识别你的规则，最像“-Name”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T09:48:49.767

使用`netsh`命令设置防火墙规则。切换到`advfirewall firewall`上下文以设置规则。Windows 7 中的语法与 XP 中的语法略有不同，因此请注意有关`netsh`命令的旧文章。像任何其他程序一样，直接从 Powershell 调用 netsh。

关于 Netsh 的[一些](http://support.microsoft.com/kb/947709 "知识库")[例子。](http://technet.microsoft.com/en-us/library/cc725935%28v=ws.10%29.aspx "技术网")

# c# - MSDTC 事务跟踪/回滚文件是否跨不同服务器上的网络共享移动？

> ID：12788293
> 
> 赞同：0
> 
> 时间：2012-10-08T19:36:48.020
> 
> 标签：c#, msdtc

我们有一个应用程序，它使用 MSDTC（Microsoft 分布式事务协调器）来包装对数据库的多个调用。在这些数据库调用之间，应用程序还将文件从一个网络共享移动到另一个网络共享。

抛开这种方法明显的设计问题（长时间运行的文件操作发生在数据库事务的中间）......

我正在解决一个错误，即在文件移动发生后事务回滚，但在目标网络共享上找不到文件。**是否有可能将此文件移动作为 MSDTC 事务的一部分进行跟踪，并在事务回滚时撤消？**

任何见解将不胜感激！

# linux - 意外标记附近的语法错误

> ID：12788296
> 
> 赞同：3
> 
> 时间：2012-10-08T19:36:58.570
> 
> 标签：linux, bash, shell, syntax

```
./csf_install.sh: line 30: syntax error near unexpected token `CHECK_distro'
./csf_install.sh: line 30: `CHECK_distro()' 
```

我的代码：

```
 if [ "$(whoami &2>/dev/null)" != "root" ] && [ "$(id -un &2>/dev/null)" != "root" ] ; then
        $BIN_ECHO " must be root to run this script "
        exit 1
    else
        $BIN_ECHO -e " permission check passed "
    fi
    CHECK_architecture()
    CHECK_distro()
...
CHECK_architecture()
{
    architecture=`uname -m`
    if [ "$architecture" != "x86_64" ] && [ "$architecture" != "ia64" ]; then
        architecture="x86"
    else
        architecture="x86_64"
    fi
}

CHECK_distro()
{
    DISTRO="";
    if [ `uname -r | egrep '(6.2-RELEASE|6.1-RELEASE|5.5-RELEASE|6.1-STABLE|5.4-RELEASE|6.0-RELEASE|5.3-RELEASE|4.10-RELEASE|4.11-RELEASE)'` ]; then
        DISTRO="FreeBSD";
        $BIN_ECHO " System is running FreeBSD"
    elif [ -f /etc/debian_version ];  then
           $BIN_ECHO " System is running Debian Linux"
           DISTRO=DEBIAN;
    elif [ -f /etc/SuSE-release ]; then
           $BIN_ECHO " System is running SuSE Linux"
           DISTRO=SUSE;
    elif [ -f /etc/fedora-release ]; then
           $BIN_ECHO " System is running Fedora Linux"
           DISTRO=FEDORA;
    elif [ -f /etc/redhat-release ]; then
           $BIN_ECHO " System is running Red Hat Linux"
           DISTRO=REDHAT;
    else
        $BIN_ECHO -e " no supported distribution found running "
    exit 1
fi
} 
```

是不是我的校验码错了？或者是我如何做我的功能？功能需要放在第一位吗？

还

有没有更好的方法来检查和设置操作系统的分布？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:41:13.117

要调用函数，请不要使用`()`（您可以像调用任何其他 shell 命令一样调用它们）：

```
CHECK_architecture
CHECK_distro 
```

您可能还希望在使用它们之前声明这些函数以避免任何麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:41:47.550

调用函数时不要使用括号，并在调用函数之前定义函数。

例如：

```
foo() { # define foo; }
foo 1 2 3 # call foo with 3 arguments 
```

# haskell - Haskell：在没有必要库的情况下在新平台上编译

> ID：12788301
> 
> 赞同：2
> 
> 时间：2012-10-08T19:37:18.330
> 
> 标签：haskell, ghc

这是场景：我正在我的 OSX 机器上使用 Parsec 库进行项目。我已经安装了 Haskell 平台，并且拥有所有必要的软件包。现在，在我的 linux/CentOS 服务器上，我安装了 ghc，但没有安装 Haskell 平台、Cabal 或必要的软件包（在本例中为 Parsec）。由于用户限制，我无法安装这些软件包，但是我可以访问 ghc。所以我的问题变成了：有没有办法在 OSX 机器上“半编译”（我敢肯定用词很糟糕）我的项目，以便它将所有必要的 Haskell 代码包含在一个 .hs 文件中（特别是导入的包）？或者一种将我正在使用的包导入/复制到本地文件目录的简单方法，所以我可以简单地上传和编译？基本上是一种将必要的文件和包捆绑到准备编译的独立源代码中的方法。我对 Haskell 还是很陌生，所以如果这是一项微不足道的任务，请原谅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:07:38.110

您最好的选择可能是在您的主目录中的某处进行 Haskell 平台的本地安装。由于 HP 版本与特定的 GHC 版本相关联，这意味着您可能还需要自己安装 GHC。

[这是有关如何执行此操作的出色分步指南。](http://www.vex.net/~trebla/haskell/haskell-platform.xhtml)您可以在[此处获取所需的 GHC 二进制 tarball](http://www.haskell.org/ghc/)。

一旦你准备好了，你就可以使用 Cabal 来安装你需要的任何其他包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:51:20.067

`cabal`从[这里](http://www.haskell.org/cabal/download.html)获取源代码。您可以构建并将其安装到您的用户主目录。然后将它放在你的 PATH 中，并使用它在你的用户主目录中安装所需的依赖项。然后你就可以编译你的代码了。

请注意，您可以使用该选项`cabal`将依赖项安装到您有权访问的任何目录。`--prefix`

# sql-server - 程序“赋值问题”

> ID：12788309
> 
> 赞同：1
> 
> 时间：2012-10-08T19:38:07.390
> 
> 标签：sql-server, identity, procedure

> **可能重复：**
> [如何获取插入表的最后一行的主键](https://stackoverflow.com/questions/5962322/how-to-get-the-primary-key-of-the-last-row-inserted-into-the-table)

我有 2 张桌子：

```
Downloaded(Id,MovieName,DownloadedBy)
Movie(ID,Rating,...) 
```

`Downloaded(id)`is`identity (1,1)`和`Movie(Id)`is 外键`Downloaded(id)` 现在我需要执行同时插入两者的程序

```
alter proc sp_Insert
@name varchar (50),
@year int,
@type varchar (50),
@rating int,
@available bit
AS
Insert into Downloaded (MovieName) values (@name)
declare @id int
select Id=@id
from Downloaded
where MovieName=@name
Insert into Movie values (@id,@year,@type,@rating,@available) 
```

现在我的问题是 from`SELECT`获取值，这意味着没有获取新的身份值`@id`。`null``id``Downloaded(id)`

那么要做什么才能`@id`获取身份值`id`是否有任何形式的块执行，或者我不知道可能是交易

请耐心等待我，我还是新手

# c# - SSRS 报表查看器未检测到数据源？

> ID：12788313
> 
> 赞同：0
> 
> 时间：2012-10-08T19:38:18.660
> 
> 标签：c#, asp.net, ssrs-2008, reporting-services

我在 ReportBuilder 3.0 中构建了一个非常简单的报告 (.rdl)。它连接到我的数据库，并从地址字段中获取城市。

```
SELECT TOP 10 City, COUNT(City) FROM [MYDB].[dbo].[ResidentialAddress] WHERE StateName = 'WA' OR StateName = 'Washington' GROUP BY City ORDER BY COUNT(City) DESC 
```

这适用于 ReportBuilder。我保存并关闭。然后我尝试通过 MicroSoft.Reporting.WebForms.ReportViewer 在 VS 2010 中打开并查看报表。我可以在本地的 c#/ASP.NET 网站中加载一个完全空白的 RDL 文件（仅限文本）。

```
 this.MyReportViewer.Reset();
            this.MyReportViewer.ProcessingMode = ProcessingMode.Local;
            this.MyReportViewer.AsyncRendering = false;
            this.MyReportViewer.LocalReport.LoadReportDefinition(new StreamReader("H:\\DataReportsViewer\\DataReportsViewer\\" + RDLFileList.SelectedValue));
            this.MyReportViewer.LocalReport.ReportPath = RDLFileList.SelectedValue;          
            this.MyReportViewer.ShowReportBody = true;
            this.MyReportViewer.LocalReport.Refresh(); 
```

但是，一旦我添加图表，我就会收到此错误：

> 尚未为数据源“DataSet1”提供数据源实例。

这对我来说没有意义，因为当我打开 RDL 文件时，连接字符串和查询就在那里，看起来应该是这样。

```
<DataSources>
    <DataSource Name="DataSource1">
      <ConnectionProperties>
        <DataProvider>SQL</DataProvider>
        <ConnectString>Data Source=MYSERVER;Initial Catalog=Ad_Dev</ConnectString>
        <IntegratedSecurity>true</IntegratedSecurity>
      </ConnectionProperties>
      <rd:SecurityType>Integrated</rd:SecurityType>
      <rd:DataSourceID>350f6976-9402-43fd-b8f8-8f809f116f84</rd:DataSourceID>
    </DataSource>
  </DataSources>
  <DataSets>
    <DataSet Name="DataSet1">
      <Query>
        <DataSourceName>DataSource1</DataSourceName>
        <CommandText>SELECT TOP 10 ResidentialAddress.City,COUNT(ResidentialAddress.City)
FROM ResidentialAddress
WHERE StateName = 'WA'
GROUP BY ResidentialAddress.City
ORDER BY COUNT(ResidentialAddress.City)</CommandText>
        <rd:UseGenericDesigner>true</rd:UseGenericDesigner>
      </Query>
      <Fields>
        <Field Name="City">
          <DataField>City</DataField>
          <rd:TypeName>System.String</rd:TypeName>
        </Field>
        <Field Name="ID">
          <DataField />
          <rd:TypeName>System.Int32</rd:TypeName>
        </Field>
      </Fields>
    </DataSet>
  </DataSets> 
```

所以，我在我的 c# 代码中尝试了解决方法：

```
 //Added line: TestDataSource runs same query and returns correctly loaded DataTable
            ReportDataSource reportDataSource = new ReportDataSource("DataSet1", TestDataSource()); 
            this.MyReportViewer.LocalReport.DataSources.Add(reportDataSource); 
```

并且运行，但没有数据显示。我赢不了！:(

有任何想法吗？SSRS 和 ASP.NET 不就是为了互相玩吗？我希望制作这个报告查看器的本地测试版本，但我已经做了很多修改才能让空白报告在本地运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T00:29:57.907

在本地处理模式下，必须通过调用代码提供数据集，即主机程序必须执行所有查询并将该数据传递给报表查看器。这是示例[http://www.gotreportviewer.com/definedata/index.html](http://www.gotreportviewer.com/definedata/index.html)从好的方面来说，任何数据都可以传递到报告查看器（[http://www.gotreportviewer.com/objectdatasources/index.html](http://www.gotreportviewer.com/objectdatasources/index.html)）

# java - java vs scala - 在单独的线程上读取文件

> ID：12788315
> 
> 赞同：7
> 
> 时间：2012-10-08T19:38:24.853
> 
> 标签：java, multithreading, scala, concurrency, io

我想知道在行业实践方面最好的方法是使用多线程方法读取文件。在Java中，我会做以下事情：

```
class Reader {  Result readFile(File file, Listener callback) }
class Listener { void process(Result r) } 
```

`Listener`Reader 将生成另一个线程以生成结果，然后从工作线程中回调。这是一个好方法吗？这将如何转化为 Scala，它可能有其他更好的机制来实现这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T19:47:00.960

Scala 中的一种方法是使用并行集合。假设您有一系列文件：

```
files:Seq[File] = ... 
```

您可以使用将其转换为并行集合`files.par`，然后使用 map 进行处理。Map 将在内部使用线程池同时处理部分序列。可以[配置](http://docs.scala-lang.org/overviews/parallel-collections/configuration.html)使用什么样的线程池。

```
files.par.map(readFile).foreach(process) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:46:34.033

如果您想要另一种方法，这对于[Akka](http://akka.io/)来说似乎是一个很好的用例。

# iphone - 调用 UITableView reloadData 方法时是否需要使用@synchronized？

> ID：12788317
> 
> 赞同：4
> 
> 时间：2012-10-08T19:38:27.863
> 
> 标签：iphone, objective-c, ios

我有很多线程同时调用 UITableView 的 reloadData 方法。我真的必须在它周围放置一个@synchronized 块吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T19:47:38.703

`reloadData`，就像视图上的任何其他方法一样，**只能从主线程调用**。所以你不需要`@synchronized`，因为一次应该只有一个线程。

如果您在后台线程上并且希望重新加载表格视图，请使用`dispatch_async`以确保重新加载发生在主线程上：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [myTableView reloadData];
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T19:47:47.410

您不应该从主线程以外的线程调用 reloadData。

看到这个类似的问题：

[iOS - 另一个线程需要将 reloadData 发送到主线程](https://stackoverflow.com/questions/7914299/ios-another-thread-needs-to-send-reloaddata-to-the-mainthread)

# javascript - 如何使用 HTML5 存储保存下拉选择？

> ID：12788319
> 
> 赞同：1
> 
> 时间：2012-10-08T19:38:34.323
> 
> 标签：javascript, html, drop-down-menu, selection, local-storage

我有;

```
<form method="post" action="search.php">
     <select name="country" class="dropdownselect" >

         <option value="">Select Country</option>   

             <option value="Afghanistan" selected="selected">Afghanistan</option>
             <option value="Albania" selected="selected">Albania</option>
             <option value="Algeria" selected="selected">Algeria</option>
     </select>
 </form> 
```

然后在search.php中；

```
$country = $country; 
+
SQL query for $country.. 
```

* * *

当某人进行搜索时，我需要保存下拉选择以保持选中状态。

可以用 HTML5 存储功能完成吗？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T19:42:28.800

是的，您可以将其存储在选择更改中，然后在页面加载时阅读：

```
$(document).ready(function() {

    var item = window.localStorage.getItem('country');
    $('select[name=country]').val(item);

    $('select[name=country]').change(function() {
       window.localStorage.setItem('country', $(this).val());
    });

}); 
```

[演示](http://jsfiddle.net/McjJt/)

# css - 固定元素可通过内部元素调整大小

> ID：12788325
> 
> 赞同：0
> 
> 时间：2012-10-08T19:39:05.283
> 
> 标签：css, html, fixed

我在css中有这段代码：

```
div#show{
background-color:black;
position: fixed;
width:100px;
height:100px;
left: 0;
right: 0;
top: 0;
bottom: 0;

margin: auto;
} 
```

它在我的页面上居中显示一个黑框。但是我想让它成为非常量的大小。

```
div#show{
background-color:black;
position: fixed;
left: 0;
right: 0;
top: 0;
bottom: 0;

margin: auto;
} 
```

但在这种情况下，它会覆盖整个页面。是否有解决方案使其尽可能大以覆盖内部元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:56:13.073

using`position: fixed;`使元素忽略其父元素并适合窗口。

你可以只是`left: 20%; right: 20%; top: 20%; bottom: 20%;`或类似的，它会伸展到填满屏幕，在外面留下 20%...</p>

如果您将父级设置为`position:relative`然后

```
div#show{
  background-color:black;
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;

  margin: auto;
} 
```

它只会拉伸以覆盖父元素

# c# - 在 Metro 中创建一个可以使用 Top/Bottom AppBars 的新 Page 类

> ID：12788326
> 
> 赞同：0
> 
> 时间：2012-10-08T19:39:14.757
> 
> 标签：c#, xaml, windows-runtime, windows-store-apps, winrt-xaml

我正在为我的 Metro 应用程序使用 WinRT XAML 工具包 - 更具体地说，是`AlternativeFrame`和`AlternativePage`类。它们非常有用，并且对于它们的 Preload 功能是必需的。但是，我需要这些不提供的 AppBars。现在很容易从中派生一个新类`AlternativePage`并添加一个`DependencyProperty`名为 BottomAppBar/TopAppBar 的类型为 AppBar... 但是，如何使 AppBar 的行为与本机 Page 类的行为方式相同？所以它们出现在右键单击和向上手势上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T23:16:52.063

您只需要将 AppBars 放在页面内。它们只是常规控件，虽然 Microsoft 不推荐它 - 您可以这样使用它们。您还可以使用工具包中的 CustomAppBar 控件而不是标准 AppBars 来获得更细粒度的控件并获得标准外观的幻灯片过渡。

# php - 从 Joomla 中删除 hasTip javascript 代码

> ID：12788327
> 
> 赞同：6
> 
> 时间：2012-10-08T19:39:14.927
> 
> 标签：php, regex, joomla, joomla2.5

Joomla 2.5 添加了以下代码：

```
 window.addEvent('domready', function() {
            $$('.hasTip').each(function(el) {
                var title = el.get('title');
                if (title) {
                    var parts = title.split('::', 2);
                    el.store('tip:title', parts[0]);
                    el.store('tip:text', parts[1]);
                }
            });
            var JTooltips = new Tips($$('.hasTip'), { maxTitleChars: 50, fixed: false});
        }); 
```

现在 - 我知道我可以编辑 html 行为文件：

library/joomla/html/html/behavior.php 将其注释掉 - 但这不是最好的解决方案。

已尝试但均无效： 1\. [http://flexicontent.org/forum/index.php?f=23&t=4909&rb_v=viewtopic](http://flexicontent.org/forum/index.php?f=23&t=4909&rb_v=viewtopic) 2\. [http://www.jsnippets.net/snippets/php/remove-call-to -j工具提示](http://www.jsnippets.net/snippets/php/remove-call-to-jtooltips)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-29T12:01:53.573

这是您必须注释掉的行：

```
 var JTooltips = new Tips($$('.hasTip'), { maxTitleChars: 50.... 
```

Joomla 2.5 /libraries/joomla/html/*/behavior.php Line xxx 注释掉

Joomla 3.x /libraries/cms/html/behavior.php 第287行注释掉

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-31T18:25:13.400

```
$doc->_script = preg_replace('window\.addEvent\(\'domready\',\s*function\(\)\s*{\s*\$\$\(\'.hasTip\'\).each\(function\(el\)\s*{\s*var\s*title\s*=\s*el.get\(\'title\'\);\s*if\s*\(title\)\s*{\s*var\s*parts\s*=\s*title.split\(\'::\',\s*2\);\s*el.store\(\'tip:title\',\s*parts\[0\]\);\s*el.store\(\'tip:text\',\s*parts\[1\]\);\s*}\s*}\);\s*var\s*JTooltips\s*=\s*new\s*Tips\(\$\$\(\'.hasTip\'\),\s*{\s*maxTitleChars:\s*50,\s*fixed:\s*false}\);\s*}\);', '', $doc->_script); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T08:41:53.687

这不是您所需要的。但如果您只想隐藏工具提示，您可以将 display 属性设置为 none-

```
.tip-wrap {
display: none !important;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-02T11:12:45.827

如果您使用仅模板方法来删除 javascript - 某些组件仍会强制添加代码。

到目前为止-我发现的唯一可靠的解决方案是使用插件来阻止 js-JSS-CSS 控件： [http ://extensions.joomla.org/extensions/extension/core-enhancements/performance/js-css-control](http://extensions.joomla.org/extensions/extension/core-enhancements/performance/js-css-control)

# php - 如何从查询结果中排除相等的值

> ID：12788334
> 
> 赞同：0
> 
> 时间：2012-10-08T19:39:51.950
> 
> 标签：php, mysql, sql, database

我有这个查询：

```
SELECT queue.first_dealer, queue.second_dealer, queue.status
FROM queue
WHERE queue.status = 3
AND queue.first_dealer = $user_id
OR queue.second_dealer = $user_id
AND queue.status = 3
ORDER BY id DESC
LIMIT 5 
```

但有时 first_dealer 或 second_dealer 可以相同，如果它们相同，我想跳到下一条记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:43:25.820

`[operator precedence][1]`由于AND 和 OR 之间，您需要在 WHERE 子句中添加一些括号。将属于一起的条件组合在一起，如下所示：

```
SELECT queue.first_dealer, queue.second_dealer, queue.status
FROM queue
WHERE queue.status = 3
AND ( queue.first_dealer = $user_id 
      OR queue.second_dealer = $user_id)
AND queue.status = 3 AND 
queue.first_dealer <> queue.second_dealer
ORDER BY id DESC
LIMIT 5 
```

即使在您并不严格需要括号的情况下，如果您这样做，也可能会产生更具可读性的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:44:27.397

```
SELECT queue.first_dealer, queue.second_dealer, queue.status
FROM queue
WHERE queue.status = 3
AND (queue.first_dealer = $user_id OR queue.second_dealer = $user_id)
AND queue.first_dealer != queue.second_dealer
AND queue.status = 3
ORDER BY id DESC
LIMIT 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T19:44:45.820

您应该在`WHERE`语句中使用括号：

```
WHERE queue.status = 3 and
      (queue.first_dealer = $user_id OR queue.second_dealer = $user_id) 
```

如果您不希望它们相同，只需添加另一个子句：

```
WHERE queue.status = 3 and
      (queue.first_dealer = $user_id OR queue.second_dealer = $user_id) and
      queue.first_dealer <> queue.second_dealer 
```

# plsql - 在循环之前显示数据

> ID：12788336
> 
> 赞同：0
> 
> 时间：2012-10-08T19:39:56.010
> 
> 标签：plsql

我有一个用户输入项目编号的查询，该查询显示项目编号和项目描述，然后进入循环并显示数据库中每个项目编号的信息。在循环结束时，查询将根据显示的项目向您显示库存总量。

在循环开始之前如何显示项目编号和项目描述？一切都很好，期待那一部分。

我想看货品编号：5 货品描述：衬衫。我没有看到项目编号和项目描述的任何数据。

PL/SQL 查询：

```
SET SERVEROUTPUT ON
DECLARE
    CURSOR C1 
    IS
    SELECT items.items_numbers, items_description, items_size, items_price, items_qoh, sum(items_price*items_qoh) "Value" FROM inventories
    JOIN items ON inventories.items_number=items.items_numbers
    WHERE items.items_numbers='&enter_items_number'
    GROUP BY items.items_numbers, items_description, items_size, items_color, items_price, items_qoh
    ORDER BY items_price;

    totalvalue NUMBER(8,2); 
    test1 C1%rowtype;

    BEGIN
    OPEN C1;
    totalvalue:=0;  
    DBMS_OUTPUT.PUT_LINE('items ID: '  || test1.items_number ||  'items Description: ' ||  test1.items_description);
    close C1;
    open C1;
    LOOP

    fetch C1 into test1;
    exit when c1%notfound;

    DBMS_OUTPUT.PUT_LINE('Size: ' || test1.items_size);
    DBMS_OUTPUT.PUT_LINE('Price: ' || test1.items_price);
    DBMS_OUTPUT.PUT_LINE('QOH: ' || test1.items_qoh);
    DBMS_OUTPUT.PUT_LINE('Value: ' || test1.items_qoh*test1.items_price);
    totalvalue:=totalvalue+test1.items_qoh*test1.items_price;
    END LOOP;   

DBMS_OUTPUT.PUT_LINE('TOTAL VALUE: '  || totalvalue);

END;
/ 
```

输出：

```
 Item Number: Item Description:
 Size: S
 Price: 25.00
 QOH: 25
 Value: 625.0
 Size: L
 Color: Blue
 Price: 30.00
 QOH: 100
 Value: 3000.0
 TOTAL VALUE: 3625.0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:48:07.433

Just like you're fetching data from the open cursor within the loop, you'll have to fetch data before the loop to be able to print it. Right now you're only opening the cursor and closing it thereafter, without fetching from it. Be aware to check whether you were able to fetch a row or not (like you did with c1%notfound).

# asp.net - ASP.NET MVC：检查时使用 Html.CheckBoxFor() 收集字符串值列表

> ID：12788337
> 
> 赞同：3
> 
> 时间：2012-10-08T19:40:15.610
> 
> 标签：asp.net, asp.net-mvc, checkbox, model-binding

在我的 Web 应用程序中，我有一个页面，其中包含管理员可以批量批准或拒绝的“请求”列表。所以页面看起来像：

```
[x] Request 1
[ ] Request 2
[x] Request 3
[ ] Request 4

[Approve Selected]   [Deny Selected] 
```

我的模型看起来像：

```
public class RequestManagementModel
{
    public List<string> LicenseIdsToProcess { get; set; }
    public List<Resource> Resources { get; set; }
    // additional fields
} 
```

在我看来，我有：

```
int counter = 0;
@foreach (Resource r in Model.Resources)
{
    <tr>
        <td>
            @Html.CheckBoxFor(model => model.LicenseIdsToProcess[counter++], new { value = r.RequestId })
        </td>
    </tr>
} 
```

当然，我的控制器操作接受表单帖子上的模型

```
public ActionResult ProcessRequests(RequestManagementModel model, ProcessType type)
{
    // process requests here
} 
```

因此，正如您所料，我在`model.LicenseIdsToProcess[counter++]`“无法将类型'string' 隐式转换为'bool'”的视图中遇到错误。它不喜欢我试图使用复选框来表示用户可以从中选择一个或多个值的列表，而不是单个真/假。

我希望这样设置，以便在发布表单时，对于用户选择的每个复选框，该字符串 id 值都绑定到我的模型中的 id 列表。我知道如何通过使用来做到这一点`<input type="checkbox">`，因为我可以在那里设置复选框的值。但是有没有办法将它与 Html.CheckBoxFor 一起使用，通过模型绑定来实现强类型？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T19:45:02.140

您的清单必须是：

```
public class RequestManagementModel
{
    public Dictionary<string, bool> LicenseIdsToProcess { get; set; }
    public List<Resource> Resources { get; set; }
    // additional fields
} 
```

由于`LicenseIdsToProcess`目前是`List<string>`Html.CheckBoxFor() 无法将字符串值转换为布尔值。您需要使用诸如字典或列表之类的东西

```
public class Licence
{
    public string Id { get; set; }
    public bool Processed { get;set; }
}

public class RequestManagementModel
{
    public List<Licence> LicenseIdsToProcess { get; set; }
    public List<Resource> Resources { get; set; }
    // additional fields
}

int counter = 0;
@foreach (Resource r in Model.Resources)
{
    <tr>
        <td>
            @Html.CheckBoxFor(model => model.License[counter++].Processed, new { value = r.RequestId })
        </td>
    </tr>
} 
```

或类似的东西 ：）

编辑：

在回复评论时，我意识到我的代码不正确。这是一个更新的版本：

```
@for(int idx = 0; idx < Model.Resources.Count; idx++)
{
    <tr>
        <td>
            @Html.CheckBoxFor(model => model.License[idx].Processed, new { value = Model.Resources[idx].RequestId })
        </td>
    </tr>
} 
```

# javascript - nyroModal - 从 nyromodal 中存在的链接单击打开一个新的 nyromodal 窗口，关闭时将其返回到已打开的 nyromodal

> ID：12788340
> 
> 赞同：1
> 
> 时间：2012-10-08T19:40:21.700
> 
> 标签：javascript, modal-dialog, nyromodal

我有一个 nyro 模态窗口，在检查某些条件后会打开。现在单击已打开的 nyromodal 窗口中的链接，将打开一个新的模态窗口。但是当我关闭它时，它会关闭两个窗口。

1.  请告知我们是否在关闭第二个窗口后仍然可以保持第一个模态窗口打开。
2.  如何删除右上角的默认关闭按钮选项。我们需要添加一个按钮并单击关闭模态窗口。

非常感谢！！

这是html

```
<a href="#show_popup" class="nyroModal" style="display:none;"></a>

Inside the modal window we have

<a id="tos" href="#tos_token" class="nyroModalChild">Terms & Conditions of Use</span></a> 
```

和 javascript

```
function showTermsNConditionsPopup()
{

//alert("setting cookie");
//$j('#show_popup').nyroModal();

$j('a.nyroModal').click();
$j('a.nyroModalChild').click();

//createCookie("bctermsnconditions","bctermsnconditions",1000);

}

$j(document).ready(function() {
    /* lightbox settings */
    $j.nyroModalSettings( {
        autoSizable: true,
        resizable: true,
        windowResize: true,
        width: 720,
        height: 680
        }
    );
}); 
```

# java - 使用信号量对数组进行排序

> ID：12788343
> 
> 赞同：2
> 
> 时间：2012-10-08T19:40:27.447
> 
> 标签：java, multithreading, semaphore

所以我们有一个任务是在 Java 中使用信号量对数组进行排序。这个任务很简单，我在近几分钟内就解决了，但最后一部分是合并。

我们的任务是将给定的数组分成两部分，同时对部分进行排序（使用信号量），然后再次合并（使用信号量）。

我的问题是，使用多个线程合并它的目的是什么，因为在填充最终数组时，每个人都必须不断地互相等待，因为一次只能将元素推送到数组中？

还是我错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:51:22.353

您可以从结果数组的相对两侧与两个不同的线程合并。每个线程应最多填充结果数组的一半。然后线程可以使用信号量作为“屏障” 使用信号量[实现 N 个进程屏障](https://stackoverflow.com/questions/6331301/implementing-an-n-process-barrier-using-semaphores)以相互等待。

# c# - 在 jQuery/javascript 中调整元素大小

> ID：12788347
> 
> 赞同：0
> 
> 时间：2012-10-08T19:40:42.753
> 
> 标签：c#, jquery, asp.net

如何重新调整 html 表中包含的所有元素的大小？该表是三行三列，每列都是 %33%。如果窗口按高度或宽度重新调整大小，我希望内部元素重新调整大小以填充单元格。目前，如果我重新调整大小，则单元格会拉伸，但如果我缩小窗口，则不会缩小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:08:16.410

这个想法是使用元素相对于单元格的大小百分比。
例如：
- 你有一个高度为 20 像素、宽度为 50 像素的单元格。它里面包含 12px 的文本。
- 文本大小 = 单元格高度的 60%。
- 所以如果单元格的大小调整为 40px 高度，那么您的字体将为 24px。
- 如果字体大小为 12px，则大约为单元格的宽度，这意味着每个字符将具有 12px 宽度（使用等宽字体）。您可以根据单元格包含的字符数设置单元格的宽度。

如果你想让它完美契合，你有很多事情要考虑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:00:26.903

尝试以 % 的形式给出表格内元素的宽度和高度，或者尝试将它们的值“继承”。

# javascript - 如何使用 javascript 从浏览器将文本字符串直接上传到 Windows Azure Blob

> ID：12788350
> 
> 赞同：1
> 
> 时间：2012-10-08T19:41:14.040
> 
> 标签：javascript, api, rest, azure, blob

我想使用浏览器端 javascript 从 Web 浏览器将 text/html 字符串作为 Azure blob 直接上传到 Azure 存储（无需先通过 Azure VM/webserver）。根据我的研究，我了解到可以使用 Azure REST API + 共享访问签名从 Silverlight 客户端或通过 MVC 3 视图实现此目的。（这里是使用 SilverLight/MVC3 的控件的链接：[http://code.msdn.microsoft.com/silverlight/Silverlight-Azure-Blob-3b773e26#content](http://code.msdn.microsoft.com/silverlight/Silverlight-Azure-Blob-3b773e26#content)）。我还找到了一个库，用于使用带有 Node.JS [https://github.com/jpgarcia/waz-storage-js](https://github.com/jpgarcia/waz-storage-js)的服务器端 javascript 进行上传。

我的问题是，如何仅使用浏览器端 javascript 和 html 和 SAS（不使用 Silverlight 或 MVC）将文本字符串上传到 Azure blob，然后直接将其上传到 Azure 而无需通过 Web 服务器？如何将字符串值传递给 Azure rest api 调用（它会接受 JSON 字符串吗？）？我查看了 MSDN REST api 示例，但我不清楚您将如何传递要上传的文本字符串。有人能帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:10:51.780

我不认为这是可以做到的。除非网页是从同一个 blob 存储域托管的，否则这将是一个跨域调用，这是不允许的（除非设置了 CORS 标头，它们不适用于 blob 存储）。

另外，上传到 blob 需要一个 HTTP PUT 请求，我相信大多数浏览器只允许 POST 和 GET。

**更新**

请参阅下面的评论，但看起来某些浏览器确实允许 PUT 请求。如前所述，可以通过从同一 blob 存储帐户提供原始页面来破坏同源策略。在这种情况下，代码看起来像这样（使用 jQuery）：

```
$.ajax({
    url: url,
    type: 'PUT',
    data: 'Hello, World!',
    headers: {'Content-Type': 'text/html'}
}).success(function () {
    console.log('Saved successfully.');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T09:38:37.773

您可以从客户端上传，而无需使用 JavaScript 接触 MVC 站点，我写了一篇博客文章，其中包含有关如何执行此操作的示例 [http://blog.dynabyte.se/2013/10/09/uploading-directly-to- windows-azure-blob-storage-from-javascript/](http://blog.dynabyte.se/2013/10/09/uploading-directly-to-windows-azure-blob-storage-from-javascript/)[代码位于](https://github.com/MartinWa/BlobUploader) GitHub

它基于[Gaurav Mantris 帖子](http://gauravmantri.com/2013/02/16/uploading-large-files-in-windows-azure-blob-storage-using-shared-access-signature-html-and-javascript/)，通过在 Blob 存储本身上托管 JavaScript 来工作。

# php - mysql 查询 - 3 个表 - 无法正确处理

> ID：12788352
> 
> 赞同：0
> 
> 时间：2012-10-08T19:41:30.740
> 
> 标签：php, mysql, sql

我需要做一个交叉引用 3 个表的 PDO 语句，看来我被卡住了。

它基本上需要来自 2 个表（**myl_contacts**和**mya_users**）的 4 条记录，它们不需要列在**myl_blocked_contacts**中。

在 myl_blocked_contacts 中是带有 id 的行，以及被阻止的 contact_type（'a'、'l'、'x' 等），我需要从我拥有和未被阻止的 myl_contacts 用户中进行选择（因此不在 myl_blocked联系方式）。

这是我到目前为止所做的 PDO::mysql 查询。我不知道从哪里开始，我在网上尝试了很多东西，但我似乎以某种方式走错了方向。谢谢！

```
$query = "SELECT myl_contacts.contact_id, mya_users.name, mya_users.city, mya_users.ext 
      from myl_contacts, mya_users, 
          LEFT JOIN myl_blocked_contacts 
      WHERE myl_contacts.contact_type='a' 
        AND myl_contacts.label_id=:id 
        AND (myl_blocked_contacts.contact_type!='a' 
         AND myl_blocked_contacts.contact_id!=mya_users.id)
     ";
                                            $result = $db->prepare($query);
                                            $result->bindValue(':id', $_id, PDO::PARAM_INT);
                                            $result->execute(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:47:29.593

您可以使用`NOT IN`子查询选择您不感兴趣的 ID：

```
select myl_contacts.contact_id, mya_users.name, mya_users.city, mya_users.ext 
from myl_contacts
left join mya_users on myl_contacts.contact_id = mya_users.contact_id -- (?)
where
  myl_contacts.contact_type = 'a' and
  myl_contacts.label_id = :id and
  myl_contacts.contact_id not in
  (
    select myl_blocked_contacts.contact_id
    from myl_blocked_contacts
    where myl_blocked_contacts.contact_type <> 'a'
  ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:01:54.703

我不确定我是否解决了您的问题。我不明白你为什么使用`LEFT JOIN`. 不需要`ON`零件吗？（喜欢`... t1 LEFT JOIN t2 ON t1.ID = t2.t1ID ...`）

如果你只写：

```
SELECT 
    myl_contacts.contact_id, 
    mya_users.name, 
    mya_users.city, 
    mya_users.ext 
FROM 
    myl_contacts, 
    mya_users, 
WHERE 
    myl_contacts.contact_type='a' 
    AND myl_contacts.label_id=:id 
    AND mya_users.id NOT IN
        SELECT 
            contact_id
        FROM
            myl_blocked_contacts 
```

我也不太明白为什么你`SELECT`从不相关的不同表中行。这可能有意义，但不一定。如果这些表之间存在某种联系，您可能需要添加一个`INNER JOIN`...

# mysql - 是否有一个简单的 MySQL 查询可以将一堆值添加到指定的行？

> ID：12788353
> 
> 赞同：1
> 
> 时间：2012-10-08T19:41:40.383
> 
> 标签：mysql, sql, excel, import, add

我有一个包含多个列的 MySQL 表，包括`id`和`count`。我刚刚得到了一个 Excel 电子表格，其中包含相同的项目`id`和必须添加到`count`每一行的数字。

例如，这是数据的一个子集，仅显示相关列：

```
| id  | count |
|-----+-------|
| ... | ...   |
| 348 | 165   |
| 347 | 364   |
| 346 | 381   |
| 345 | 6017  |
| ... | ...   | 
```

这是来自 Excel 电子表格的数据：

```
| id  | add   |
|-----+-------|
| ... | ...   |
| 348 | 3,766 |
| 347 | 386   |
| 346 | 860   |
| 345 | 0     |
| ... | ...   | 
```

我想为每个组合`count`和`add`字段，`id`以便`count`像这样更新，使表中的所有其他列保持不变：

```
| id  | count |
|-----+-------|
| ... | ...   |
| 348 | 3931  |
| 347 | 750   |
| 346 | 1241  |
| 345 | 6017  |
| ... | ...   | 
```

我知道 MySQL 可以做到，但我不知道步骤是什么。我应该以什么格式导出 Excel 数据？CSV？硅通孔？如何将“调整”文件读入 MySQL？这种 UPDATE 命令的语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:19:03.163

您需要通过几个步骤来执行此操作：

1.  [`CREATE`](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)一个`TEMPORARY TABLE`。
2.  [`LOAD`](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)将数据放入临时表
3.  [`UPDATE`](http://dev.mysql.com/doc/refman/5.1/en/update.html)原始表， `JOIN`对临时表使用 a。

`CREATE [TEMPORARY] TABLE`语法很简单。这就像创建一个表，但它会在您的会话结束时消失。表格格式应与您要更新的列相匹配。这可以简单地使用`CREATE ... (SELECT...)`语法来完成，例如：

```
CREATE TEMPORARY TABLE `data_to_load` (
    SELECT
        `id`,
        `count`
    FROM
        `table_to_update`
    WHERE
        0
); 
```

这将创建一个`TEMPORARY TABLE`被调用的 ，由与列和`data_to_load`完全相同的格式组成。永远不会匹配，所以它只是复制表格的格式*，*而不是数据。`table_to_update``id``count``WHERE 0`

 *接下来，`LOAD`读取数据。格式不挑剔，你只需要指定它。对于 Excel 使用的标准 CSV 格式，命令为：

```
LOAD DATA
    INFILE 'exported_data.csv'
    INTO TABLE `data_to_load`
    FIELDS
        TERMINATED BY ','
        OPTIONALLY ENCLOSED BY '"'
        ESCAPED BY '"'
(
    `id`,
    `count`
); 
```

最后，`UPDATE`现有数据，通过`JOIN`ing 与您的新表：

```
UPDATE
    `table_to_update`
    INNER JOIN `data_to_load`
        ON `data_to_load`.`id` = `table_to_update`.`id`
SET
    `table_to_update`.`count` = `table_to_update`.`count` + `data_to_load`.`count`
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:06:38.517

使用类似[这样](http://www.tech-recipes.com/rx/2345/import_csv_file_directly_into_mysql/)的技术从 csv 导入您的值。一旦你有了那张桌子，试试这个。如果您的原始表称为“counts”，而您的新表称为“adds”，则此查询将显示组合是什么：

```
select a.id,a.count,b.add,a.count + b.add as sum from counts as a, adds as b where a.id = b.id; 
```

如果它正在做你想做的事，那么更新：

```
update counts set counts.count = counts.count + adds.add where counts.id = adds.id; 
```*

# java - 当我登录到另一个 WebSphere 配置文件时会话结束

> ID：12788355
> 
> 赞同：0
> 
> 时间：2012-10-08T19:41:45.680
> 
> 标签：java, spring, session, websphere

我正在使用**IBM WebSphere 7.0**。

1.  我已在配置文件 AppSrv01（配置文件 1）上登录我的应用程序；
2.  我已在配置文件 AppSrv02（配置文件 2）上登录 IBM WebSphere 控制台；

我已经在一个浏览器中完成了这项工作。在第 2 步之后，我在第 1 步打开的会话结束。如何保持在第 1 步打开的会话还活着？

在 trace.log 我有一个例外：

```
00000073 webapp        E com.ibm.ws.webcontainer.webapp.WebApp logServletError SRVE0293E: [Servlet Error]-[dispatcherServlet]: org.springframework.web.HttpSessionRequiredException: Session attribute 'param' required - not found in session
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter$ServletHandlerMethodInvoker.raiseSessionRequiredException(AnnotationMethodHandlerAdapter.java:743)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveModelAttribute(HandlerMethodInvoker.java:758)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveHandlerArguments(HandlerMethodInvoker.java:356)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:171)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
    at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:574)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:718)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1597)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:934)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:502)
    at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:179)
    at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:91)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:864)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1583)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
    at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:78)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T06:18:24.703

使用不同的浏览器，如果您将 IE 用于 profile1，请使用 firefox 或 chrome 用于 profile2

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T11:55:18.993

两台服务器都使用相同的 cookie 来存储会话 id (JSESSIONID)，因此出现错误：创建第二个会话后，cookie 被覆盖，但该会话在第一台服务器上不存在。

您可以为两个会话使用不同的浏览器，或者您可以更改会话 id cookie id 名称（如果它很重要），尽管不建议这样 [做：门户的步骤](http://infolib.lotus.com/resources/portal/8.0.0/doc/en_us/PT800ACD001/admin/http_sessn_cookie.html)

# javascript - Grails - 在脚本方法之后调用主体加载

> ID：12788357
> 
> 赞同：1
> 
> 时间：2012-10-08T19:41:48.830
> 
> 标签：javascript, jquery, html, grails

不确定是什么原因造成的，或者它是否与 Grails 有关。

我有一个方法，我想先调用身体负荷。然后是脚本标记中的第二个方法。我一直认为 body onload 方法调用会首先进行 - 我想我错了。

警报的顺序是 3，然后是 1，然后是 2。

有任何想法吗？

```
<html>
<head>
    <title>${cname} Organization Chart</title>

    <link rel="stylesheet" href="${resource(dir: 'css', file: 'custom.css')}" type="text/css"/> 
    <link rel="stylesheet" href="${resource(dir: 'css', file: 'jquery.jOrgChart.css')}" type="text/css"/>   
    <link rel="stylesheet" href="${resource(dir: 'css', file: 'bootstrap.min.css')}" type="text/css"/>  
    <link rel="stylesheet" href="${resource(dir: 'css', file: 'prettify.css')}" type="text/css"/>   

    <g:javascript src="prettify.js" />
    <g:javascript src="jquery.jOrgChart.js" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js"></script>

    <script>
        alert('3');
        jQuery(document).ready(function() {
            $("#org").jOrgChart({
                chartElement : '#chart',
                dragAndDrop  : true
            });
        });
    </script>

<body onload="alert('1');prettyPrint();alert('2');">

    <ul id='org' style='display:none'></ul>

    <div id="chart"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T19:45:05.740

`<body onload=...>`实际上*（并且奇怪地）*设置`window.onload`事件，在所有最初请求的外部资源*（图像、脚本等）*完成加载后调用。

`$(document).ready()`根据您的需要，您可能应该使用 jQuery 的处理程序或内联脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T19:49:50.510

最好的选择是将所有 javascript 放在一个 javascript 文件中，而不是从 HTML 中执行任何内容。

HTML：

```
<html>
    <head>
        <title>${cname} Organization Chart</title>
        ... snip ...
        <script type="text/javascript" src="someJSFile.js" />
    </head>
    <body>
        <ul id='org' style='display:none'></ul>
        <div id="chart"></div>
    </body>
</html> 
```

一些JSFile.js：

```
$(document).ready(function() {
    prettyPrint();

    $("#org").jOrgChart({
        chartElement: '#chart',
        dragAndDrop: true
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T19:44:51.630

**onload**事件在页面加载后立即触发。当网页完全加载所有内容时触发。

一旦解析器遇到它，脚本标记内的那个就会被触发。

所以警报触发的顺序是完全正常的。

# c# - 如何从 DBF 文件中选择不同的值？

> ID：12788359
> 
> 赞同：2
> 
> 时间：2012-10-08T19:42:10.350
> 
> 标签：c#, sql, dbf

我从 DBF 文件中获取数据并将其放入 DataTable 中，问题是我只想获取不同的数据，例如：

```
Column1
  a
  b
  c
  b
  a 
```

并且 DataTable 应该只填充：

```
Column1
  a
  b
  c 
```

有什么办法可以做到这一点，或者解决它？

```
 connDBF.Open();
            string jobData1 = "SELECT * FROM HREQDETM.DBF";

            OdbcCommand cmd1 = new OdbcCommand();
            cmd1.CommandText = (jobData1);

            OdbcDataAdapter dbAdapter1 = new OdbcDataAdapter(jobData1, connDBF);

            DataSet dtSet1 = new DataSet();
            dbAdapter1.Fill(dtSet1);

            DataTable dbTable1 = dtSet1.Tables[0]; 
```

问题是，我正在进行迁移，数据在 DBF 文件中，我想要一些快速的东西，因为我将在我的计算机中运行脚本并通过 SQL 语句中的 VPN 发送数据

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T19:54:16.640

只需添加`DISTINCT`到您的查询

```
string jobData1 = "SELECT DISTINCT Column1 FROM HREQDETM.DBF"; 
```

如果您想要 Column1 的不同值但仍然需要表中的其余列，则必须决定当两个或多个值组合在一起作为 Column1 的一个时要获取哪些数据。

例子

```
Column1  Column2
  a         1
  b         1
  c         1
  b         2
  a         2 
```

因此，当删除重复项时，`a`您希望在 column2:`1`或中显示`2`什么？
你可以写：

```
SELECT
   Column1,
   MIN(Column2) --To get 1 Or MAX(Column2) to get 2
FROM 
  HREQDETM.DBF
GROUP BY 
  Column1 
```

我建议阅读更多关于[Group by 和聚合的信息](http://msdn.microsoft.com/en-us/library/ms177673.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T19:54:04.160

使用[DISTINCT](http://www.w3schools.com/sql/sql_distinct.asp)：

```
SELECT DISTINCT Column1 FROM HREQDETM.DBF 
```

作为替代方案，如果您想将所有数据保留在 DataTable 中并仅提取不同的值（因此您不必重新查询源，您只需创建一个 DataView 并将其过滤为不同的值：

```
DataView view = new DataView(table);
DataTable distinctValues = view.ToTable(true, "Column1"); 
```

# mysql - mysql导出文件中的mysql语法错误

> ID：12788361
> 
> 赞同：0
> 
> 时间：2012-10-08T19:42:16.450
> 
> 标签：mysql, mysqldump

我从 phpmyadmin 导出了一个数据库（50 个表），并尝试使用以下命令通过 mysql 命令行导入它们：

```
mysql -h localhost -D mydatabase --user=root --password=pass < /home/db.sql 
```

但是，当我到达第 30 个左右的表时，我在 sql 文件中收到语法错误。

```
..error..syntax to use near ''2006-01-25 1' 
```

现在我无法通过所有 150 万行 sql（这是一个大数据库）来更正由导出函数生成的语法。我有哪些选择？你能看到任何直接的问题吗？

发生此错误的行：

```
INSERT INTO `LINKS` VALUES(267, 581, 580, '2006-01-24 15:26:55');
>> INSERT INTO `LINKS` VALUES(268, 583, 582, '2006-01-25 17:06:39');
INSERT INTO `LINKS` VALUES(269, 585, 584, '2006-01-26 01:11:22'); 
```

它在上面的第 2 行，但在那之前几乎相同的 100 行上没有触发错误..？这可能是内存问题还是其他问题？sql文件为300mb。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:23:45.257

如果您使用的是 cPanel，请尝试通过“备份向导”而不是 phpMyAdmin 导出数据库

# android - android listview中类别的SectionIndexer

> ID：12788366
> 
> 赞同：-1
> 
> 时间：2012-10-08T19:42:34.107
> 
> 标签：android

我想显示带有类别的列表视图，例如水果、蔬菜、其他等。

水果

- 苹果

- 芒果

-- 葡萄

蔬菜

- 洋葱

- 番茄

其他

- 腰带

* * *

使用 CursorLoader 进入光标的数据，例如，

1个苹果果实

2芒果果实

3 葡萄果实

4 洋葱蔬菜

5 番茄蔬菜

6 其他腰带

* * *

除了 AlphabetIndexer，我找不到任何解决方案，但它不能满足我的要求。有人知道怎么做吗？[注意：我没有像 isHeader 这样的单独列]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:29:54.503

SectionIndexer 不会组织您加载的数据。理想情况下，您会在查询或任何支持它的集合之前完成此操作。SectionIndexer 仅允许adapterView 查询支持的部分列表，以及它们在哪里开始、结束并给出它所在的部分的位置。因此它假设您的数据已经排序。

您可以使用以下 impl 创建 SectionIndexer

```
@Override
public Object[] getSections() {
    return new CharSequence[] {"Fruit", "Vegetable", "Other"};
}

@Override
public int getSectionForPosition(int position) {
   String text = getItem(position);
   if (text.contains("Fruit") {
      return 0;
   } else if (text.contains("Vegetable") {
      return 1;
   } else {
      return 2;
   }
}

@Override
public int getPositionForSection(int section) {
   String sectionName = (String) getSections()[section];
   for (int i=0,length=getCount(); i < length; i++) {
     if (((String)getItem(i)).contains(sectionName)) {
          return i;
     }
   }
   return getCount();
} 
```

仅供参考，这将非常慢，因此我建议您在加载更多数据时创建一个索引结构，以缓存和预取这些方法请求的大部分信息。

# apache - htaccess 过滤设置

> ID：12788368
> 
> 赞同：0
> 
> 时间：2012-10-08T19:42:37.770
> 
> 标签：apache, .htaccess, filtering, flags

我有这个网站，就像一个搜索引擎当我输入搜索时，网址看起来像`mysite.com/search/free/**video/keyword**.html`而不是，`mysite.com/?search=**keyword**&type=**video**`我对此有一个小问题。例如，如果搜索标签包含空格、+ 或 -，我的 url 不会被重写。我得到像 ?search= **key+word** &type= **video**这样的查询字符串 url ，我不知道如何摆脱这个。这是我的 htaccess。

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteBase / 
RewriteCond %{QUERY_STRING} ^search=(\w+)&type=(\w+)$
RewriteRule ^ http://mysite.com\/search\/free\/%2\/%1.html? [R,L,B]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^search/(.*)/(.*)/(.*).html?$ index.php?search=$1&page=$2&type=$3 [L] 
```

我尝试使用 ${escape:$1} 添加更改 $1 并在我的 httpd.conf 文件中添加了 RewriteMap escape int:escape 但仍然没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T23:06:37.173

尝试将您的第一条规则更改为：

```
RewriteCond %{QUERY_STRING} ^search=([^&]+)&type=([^&]+)$
RewriteRule ^ http://mysite.com\/search\/free\/%2\/%1.html? [R,L,NE] 
```

# ruby-on-rails - rails rspec 模型和控制器测试

> ID：12788370
> 
> 赞同：0
> 
> 时间：2012-10-08T19:42:41.613
> 
> 标签：ruby-on-rails, testing, rspec

我只是想知道我是否以正确的方式理解测试。

模型测试应该在没有模拟的情况下完成，例如：

rspec

```
model.name = 'test'
model.save
model.should eq('test') 
```

并且控制器应该基于模拟：

rspec

```
model.should_receive(:save).and_return(true) 
```

控制器

```
def action
...
if model.save
...
end 
```

总结：控制器在没有任何真实数据的情况下进行测试。与在 ... db 上运行的模型层相比，所有数据都是由存根和模拟“提供”的？

但我认为该模型也应该被嘲笑

```
model.name = 'test'
model.should_receive(:save)
model.should eq('test') 
```

但我看不到这样的测试意义，因为我没有测试保存方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:49:21.290

作为一般经验法则，我就是这样做的。

使用您的示例，如果您已经`save`在模型规范中测试了该方法，则无需在控制器中再次测试它，您只需要知道它已被调用。

本质上，您需要测试控制器的行为，而不是模型对它的反应。

# workflow-foundation-4 - 如何在 SqlWorkflowInstanceStore 上强制模拟

> ID：12788372
> 
> 赞同：0
> 
> 时间：2012-10-08T19:42:55.880
> 
> 标签：workflow-foundation-4

在 WF4 中，如何强制 SqlWorkflowInstanceStore 使用模拟？我们有一个部署场景，其中数据库服务器在不同的机器上，当我们在 SqlWorkflowInstanceStore 对象上调用执行方法时，如果我们不能强制它模拟不同的用户，我们的 sql 身份验证将失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T05:06:14.523

您需要为您的数据库创建一个 SQL Server 登录名并在您的连接字符串中指定该登录名。SQL Server 登录可以使用已经在服务器上的 Windows Authenticated 帐户，或标准 SQL Server 帐户（例如**sa**帐户，但不要使用那个 :p）。

# c# - 从日志文件读取虚拟大数据到 ListView

> ID：12788377
> 
> 赞同：0
> 
> 时间：2012-10-08T19:43:17.423
> 
> 标签：c#, winforms, io, virtual

我一直在研究如何读取大约 500mbs 的大型日志文件并使用 c# 将它们解析为 gui。我是相当新的使用列表视图的虚拟模式......

我决定使用具有虚拟模式的列表框（希望这可以处理大约 100 万条日志消息）。但我在将日志文件的行读取到列表框中时遇到问题。

我不想读取整个文件，因为它会使程序崩溃，所以我在 foreach 语句中使用 File.ReadLines。

我想我在处理 RetrieveVirtualItem 处理程序以读取我的文件并获取新行并填充它时遇到问题

```
 private void listView1_RetrieveVirtualItem(object sender, RetrieveVirtualItemEventArgs e)
    {
          ListViewItem lvi = new ListViewItem();
        lvi.Text = addList(); // need to read a new row
        ListViewItem.ListViewSubItem lvsi = new ListViewItem.ListViewSubItem();
        lvsi.Text = e.ItemIndex.ToString("n");
        lvi.SubItems.Add(lvsi);
        e.Item = lvi;
    } 
```

如何读取文件的每一行并将其与列表视图的虚拟检索方法相关联？

我最终想添加搜索，所以它只显示匹配的行。

我也不确定如何编辑 listView1.VirtualListSize - 我如何使它成为一个等于匹配数量的变量？我认为因为它在我加载表单时需要一个值。

# html - 让 Zurb 的 Foundation 3 与 IE7 一起工作

> ID：12788381
> 
> 赞同：10
> 
> 时间：2012-10-08T19:43:29.007
> 
> 标签：html, css, internet-explorer-7, zurb-foundation

已经提出了一种使 Zurb 的 Foundation 3 Framework 与 IE7 一起工作的解决方案。不一定是复杂的支持，但肯定是网格支持。

解决方案如下： http: [//www.stormconsultancy.co.uk/blog/development/code-snippets/making-zurb-foundation-3-work-on-ie7/](http://www.stormconsultancy.co.uk/blog/development/code-snippets/making-zurb-foundation-3-work-on-ie7/)

我试图在这里复制这个：http: [//sausag.es/foundation/grid.html](http://sausag.es/foundation/grid.html)

我在我的foundation.min.css 中添加了指向htc 文件的链接

引用是相对于 HTML，而不是 CSS。

我在 htaccess 中添加了一行关于 htc 文件的内容。

但是我仍然无法像在 IE8 中那样在 IE7 中显示网格。我哪里错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T20:10:55.870

[样式表](http://sausag.es/foundation/stylesheets/foundation.min.css)中的以下行：

```
*behavior: url(/stylesheets/box-sizing.htc); 
```

转换为以下地址：

```
http://sausag.es/stylesheets/box-sizing.htc 
```

它返回 404。您可以通过将行更改为：

```
*behavior: url(/foundation/stylesheets/box-sizing.htc); 
```

或将`box-sizing.htc`文件下移一个文件夹。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-23T22:24:13.473

另一种解决方案是使用条件注释检测 ie7，然后对这样的列应用 CSS 修复：

```
.ie7 .columns{
    margin-right: -15px ;
    margin-left: -15px ;
    display:-moz-inline-stack;
    display:inline-block;
    zoom:1;
    *display:inline;
} 
```

这将清除列上的填充并修复网格。您可以在其他 div 或布局的一部分上执行相同的操作。

此外，您需要像这样修复居中列和偏移列：

```
.ie7 .row{
    clear: both;
    text-align: center;
}

.ie7 .offset-by-three {
    margin-left:25% !important;
}
.ie7 .offset-by-seven {
    margin-left:58.33% !important ;
} 
```

当然还有有条件的评论：

```
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if IE 7]>    <html class="ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]--> 
```

# android - 表名可以用“？”代替

> ID：12788392
> 
> 赞同：0
> 
> 时间：2012-10-08T19:44:31.143
> 
> 标签：android, sqlite

我有一个 sqlite 查询：

```
rawQuery("select * from ? where ?=?", new String[] {
                DBTABLE_PROFILE, KEY_PROFILE_ID, Integer.toString(profileID) }); 
```

但Android给了我

```
E/AndroidRuntime(7323): Caused by: android.database.sqlite.SQLiteException:   
near "?": syntax error (code 1): , while compiling: select * from ? where ?=? 
```

我测试了哪个？引起了问题，结果是第一个问题。如果我将其更改为

```
"select * from profile where ?=?" 
```

它不是FC。

那么，表名可以用'？'代替吗？

[编辑]：

有一种***解决***方法可以不受限制地实现类似 rawQuery 的功能。请看下面我的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:50:59.270

不，您应该替换的唯一参数`?`是查询变量，而不是表名和列名。

正确的查询是：

```
rawQuery("select * from " + DBTABLE_PROFILE + " where " + KEY_PROFILE_ID + "=?",
            new String[] { Integer.toString(profileID) }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:27:03.910

感谢 Sam 的指点，由于数量限制，我发现自己甚至使用 rawQuery(String, String[]) 都非常愚蠢。

IMO 在没有限制的情况下实现类似 rawQuery 的功能的最佳方法是将 rawQuery(String) 与 String.format() 一起使用

前任：

```
 rawQuery(String.format("select * from %s where %s=%d",
                DBTABLE_PROFILE, KEY_PROFILE_ID, profileID)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T19:52:02.640

如果你已经测试过，那么你就有答案了。

我不确定，但我希望这是因为*rawQuery*没有在幕后进行字符串连接——它将准备一个存储过程或类似的过程，然后将值转义到过程对象中。因此，它需要知道表名来创建过程，所以不能使用替换表名。

# python - 我可以在我的项目中嵌入 wxPython，省去用户安装的麻烦吗？

> ID：12788394
> 
> 赞同：1
> 
> 时间：2012-10-08T19:44:32.167
> 
> 标签：python, wxpython

我最近发现使用 wxPython 编写 GUI 应用程序是多么容易和方便。不幸的是，安装 wxPython 是一个巨大的痛苦。我认为自己非常精通技术，但我花了将近一个小时才在 Ubuntu 机器上安装 Pythonbrew 来获得 wxPython 的工作设置。在我家里的 OSX 机器上，我还没有弄明白。

所以我的问题是；是否有可能以某种方式安装 wxPython 的**可移植**版本并将其放在我的项目目录中，它可以在所有平台上运行，从而避免用户不得不手动安装它来运行我的应用程序的痛苦？如果是，我会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:49:09.113

wx 必须为每个目标平台编译。二进制文件总是依赖于操作系统，所以不，不可能有可移植的 wx 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:52:06.770

PyInstaller 应该让 3 个主要平台上的事情变得简单。虽然我只在 Windows 上使用过它。cx_freeze 和 bb_freeze 也可以帮助你。有一个仅适用于 Mac 的 py2app 脚本。

如果您在 Mac 上安装 wxPython 时遇到问题，那么您应该在 wxPython 邮件列表中询问。那里有几个 Mac 用户，包括 wxPython 的作者本人。

如果您想要便携，那么您可以查看 Portable Python 项目：[http](http://www.portablepython.com/) ://www.portablepython.com/我很确定它包含 wxPython。

# arrays - Perl - 生成唯一标识符

> ID：12788397
> 
> 赞同：3
> 
> 时间：2012-10-08T19:44:50.520
> 
> 标签：arrays, perl, contains

首先，我必须承认我是 Perl 的新手，所以我的问题对某些人来说可能看起来很垃圾，我很抱歉。我目前正在使用适用于 Perl 的 VMWare SDK，但我被困在我的上传功能上。我想做的是为每个 VMDK 生成一个唯一标识符（例如，我添加到 VM 的硬盘）。基本上，用户提供硬盘应该作为脚本的参数。

但是，如果用户选择了一个已经被占用的名字，我们就会遇到问题。我考虑了很多解决方案，比如添加时间戳（这将是唯一的），但我想要更优雅的东西。所以，让我们考虑一下：

**@vmdks**：列出所有已经在 VM 上的硬盘

**$filename**：用户想要给 VMDK 的名称，一旦它在 VM 上

**$target**：硬盘实际拥有的名称。

我想要类似 filename-00X 的东西，其中 X 是出现的地方。例如，如果有人尝试添加一个名为“FOO”的硬盘，而该硬盘已经存在，它将被重命名为“FOO-001”。请注意，用户只能输入带有字母数字字符的磁盘名称，因此他不能将硬盘命名为“FOO-001”，这样可以避免冲突。

所以由于我不太了解 Perl，所以我决定用伪代码编写它，希望你不要介意：

```
IF $filename IS IN @vmdks
   # So here we have a conflict

   IF $filename-X IS IN @vmdks  
      # X should be a 3-digit number, like 001, 002, 666, etc.
      INDEX := X
      INDEX++
      $target = $filename-INDEX
   ELSE
      $target = $filename-001
   ENDIF
ELSE
   $target = $filename 
ENDIF 
```

我想我可以通过以下方式轻松完成第一个条件：

```
if(grep{$_ eq $filename} @vmdks) ... 
```

但是第二个......我真的被卡住了：/我怎么能匹配 $filename-index，然后检索后者？

非常感谢，我希望我足够清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:11:13.003

您还可以使用[智能匹配运算符进行匹配](http://perldoc.perl.org/perlop.html#Smartmatch-Operator)。我已经在 Perl 中完成了您的伪代码，并对您的算法稍作调整。

请注意，**有不止一种方法可以做到这一点**。您还可以使用散列进行查找。那将是一个丢失的更快，但消耗更多的内存。这取决于哪个任务是最佳选择。

```
#!/usr/bin/perl
use strict; use warnings;
use feature qw(say);

my @vmdks = qw( foo bar dilbert dilbert-001 );

sub test_filename {
  my ($filename) = @_;

  # abort if the filename is not alphanumeric
  return if $filename =~ /\W/;

  # check if the filename is in our list
  if ($filename ~~ @vmdks) {
    my $i = 1; # counter, starting at 1
    # check if the extended filename is in the list
    while ( sprintf('%s-%03d', $filename, $i) ~~ @vmdks ) {
      $i++; # increment
    }
    # assign the new filename
    $filename = sprintf('%s-%03d', $filename, $i);
  }

  return $filename;
}

# test ist
for (qw ( phb dilbert foo foo bar dogbert bar foo 1234 123) ) {
  say test_filename($_);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:58:51.683

你可以得到所有候选人的子数组：

```
my @tmp = grep(/^$filename-\d+/, @vmdks); 
```

的最后一个元素`@tmp`将是最新的索引文件名`$filename`

# jquery - 设置 jQuery 手风琴，以便默认打开第二个窗格；以及更多故障排除

> ID：12788400
> 
> 赞同：0
> 
> 时间：2012-10-08T19:44:53.463
> 
> 标签：jquery, accordion

我正在使用在[这个网站](http://drublic.de/blog/how-to-build-accordion-using-css-and-jquery/)上找到的手风琴代码。我的代码版本只有轻微的变化，但我发现我的手风琴的演奏方式与他的有所不同。

1.  我无法通过单击标题来打开和关闭窗格。（在他的代码中工作，而不是在我的代码中）

2.  默认情况下，我无法打开第一个窗格。（在他的代码中工作，而不是在我的代码中）

3.  我想将两个窗格中的第二个设置为默认打开。（新的）

这是[我的代码](http://jsfiddle.net/Leigh/keQKz/2/)。“搜索”不是一个窗格，它总是可见的。“工具”和“会员信息”下的内容是手风琴中的位，工具和会员信息是可点击的标题。

在我的代码中，我将部分更改为 div，当我通过 Firebug 运行代码时，我收到一条错误消息

```
$('.accordion-item').eq(1).addClass('current').find('.content').show(); 
```

但我不确定为什么它没有定义。我更改了元素，但没有删除手风琴项类。jQuery 列在标头中，它是标头中唯一引用的 JavaScript 文件：

```
<script type="text/javascript" src="./js/jquery-1.8.2.js"></script> 
```

如何修改代码以使其像他的一样工作；以及如何修改代码以添加我想要的功能（第三点）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:08:07.237

没关系，我找到了。我有 jquery 的文件名拼写错误：是 jquery-1.8.2.js，应该是 jquery-1.8.2.min.js。永远...永远...不要忘记检查您的参考资料。

# css - CSS Box-Shadow 动画技术？

> ID：12788401
> 
> 赞同：0
> 
> 时间：2012-10-08T19:44:55.507
> 
> 标签：css, css-animations

所以我在[CodePen](http://codepen.io/)上做了很多工作，发现了很多很棒的演示，尤其是在 CSS 方面。我在 CSS 前端看到的始终是经常使用 box-shadow 属性来产生看起来很疯狂的动画/图形，[这是我正在谈论的一个例子](http://codepen.io/Simonclavey/pen/njwvy)。

现在，我猜这些人并不是完全手工完成的，他们正在使用某种图形设计应用程序将动画/图形呈现为有效的 CSS。有没有做这种事情的应用程序？如果是这样，它是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:54:25.783

这是他从实际代码中的描述。

> 花生酱果冻时间香蕉。
> 
> 使用@joshnh 的盒子阴影技术，我只通过 CSS 为香蕉制作了动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:55:43.490

Codepen 上的另一位作者发布了一个小的 PHP 库，它利用这种技术将图像转换为 CSS，但是它生成的所有图像似乎都会使 Chrome 的检查器崩溃。不完全确定为什么。

[https://github.com/jaysalvat/image2css](https://github.com/jaysalvat/image2css)

**编辑：** 我刚刚让 Chrome 最终响应，它生成的代码似乎没有得到很大优化。

# asp.net - 无法将 LINQ 添加到 ASP.NET 网页

> ID：12788402
> 
> 赞同：0
> 
> 时间：2012-10-08T19:44:57.433
> 
> 标签：asp.net

我有一个简单的 ASP.NET 网站，但无法正常工作。服务器正在运行安装了 .NET 4.0 的 IIS 7.5，我拥有完整的访问权限，并且我正在使用 VS2010 生成一个 ASP.NET 4 网站。但是 VS 会自动生成包含`using System.Linq;`在其中的代码隐藏文件。这对我来说不是问题，除非默认情况下它似乎没有引用 Linq。我在 IIS Manager/site/.NET Compilation/Assemblies 列表中添加了 System.Data.Linq 程序集，*并*在 Web 配置中添加了对它的引用，但它仍然抱怨`System.Linq`不存在。

该网站在我安装了 VS2010 的家用机器上运行良好。

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:12:41.613

默认应用程序池是 2.0，而不是 4.0（无用的默认值），这也解释了为什么 VS2010 运行良好——它知道这是一个 4.0 应用程序。一旦我改变了这个，一切都很顺利。

# c++ - 通过函数后打印出二维数组

> ID：12788407
> 
> 赞同：1
> 
> 时间：2012-10-08T19:45:07.730
> 
> 标签：c++

```
void shiftString(int ,char stringinput[]);
void createTable(char table[][26]);
int main()
{
   char array[26][26]={1};  //initialize array
   createTable(array);   //function which takes 2-D array and feeds values into it
   return 0;
 }
 void shiftString(int n,char stringinput[])    
 {
  //this function shifts the characters in the string left or right by n.left if n is
    negative and vice versa.I have to use this to shuffle the characters 'A' to 'Z'
    in each row.
 }
 void createTable(char table[][26])  //this function creates a 26x26 matrix 
 {
     int n=0;
     int count=0;
     for (int i=0;i<26;i++)    //loop for row of matrix
     {   
          char array1[26]=  {'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','X','W','Y','Z'};  //initializing 1-D array
      shiftString(n,array1);  //moves back every character by n. 
      for (int j=0;j<26;j++)//this loop equals one row of 2-D array to 1-D array
      {
          table[i][j]=array1[count];
          count++;
      }

       n--;  //everytime moving back of character increases by 1
   }
   for (int a=0;a<26;a++) //these two loops print out the array
   {
       for (int b=0;b<26;b++) //26 is the size of rows and columns
       {
           cout<<table[a][b]<<" ";
       }  
       cout<<endl;
   }
   } 
```

我正在将一个长度未知的数组传递给一个函数。该函数将“A”到“Z”字符放入其中。现在在这个函数中，我正在使用我自己制作的另一个函数（之前测试过并且工作得很好）。现在当我尝试打印数组，它是这样的：

```
 M N O P Q R S T U V X W Y Z      ü ¥ R · ô ? ~ ·
    h a ¨ ¿    ¤ ^ ¨ ¿  Ì | · w ù p · w ù p ·
    o · A B C D E F G H I J K L M N O P Q R S T U V X W
    Y Z      ü ¥ R · ô ? ~ · h a ¨ ¿    ¤ ^ ¨ ¿
    Ì | · w ù p · w ù p ·   o · A B C D E F G H I J
    K L M N O P Q R S T U V X W Y Z      ü ¥ R · ô ?
    ~ · h a ¨ ¿    ¤ ^ ¨ ¿  Ì | · w ù p · w ù p ·
    o · A B C D E F G H I J K L M N O P Q R S T U V 
```

有什么问题？我是否正确初始化了数组？我试图在主代码中打印出来，但同样的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T19:49:39.537

您永远不会重置`count`为零，因此您`table[i][j]=array1[count];`的运行方式已超过`array1`.

# jquery - 升级到 JQuery-1.7.1 后将 .live() 转换为 .on() 并没有修复此功能

> ID：12788408
> 
> 赞同：1
> 
> 时间：2012-10-08T19:45:09.657
> 
> 标签：jquery

当我为我的应用程序使用 JQuery-1.6.1 时，我有以下代码行：

```
$('li.step .step_type.VerifyTableContentsStep input[name*=element_name]').live('autocompletechange', buildTableContents); 
```

在我升级到 JQuery-1.7.1 后，该行停止工作。我在文档中读到 .live() 已被弃用并改用 .on() 。我试过了，并按照文档更改了该行，使其现在是这样的：

```
$(document).on('autocompletechange', 'li.step .step_type.VerifyTableContentsStep input[name*=element_name]', buildTableContents); 
```

但它仍然不起作用。有没有人有任何想法？我按照文件来信。谢谢！

更新：这是我的 .haml 代码：

```
.table_contents_container
  = select_tag :add_column, options_for_select(table_contents.headers_without_data.unshift(['hidden columns...'])), :class => 'add_column_selector'

  %table

    %tr
      %th.action_column
        = link_to '', '#', :class => 'sub_item_action add_column', :tabindex => 999
      - table_contents.rows.first.all_cells.each do |cells|
        %th.content_column{ :class => "#{'no_data' if cells.no_data?}", 'data-column-id' => cells.id }
          = link_to '', '#', :class => 'sub_item_action inline_delete', :tabindex => 999
          %span= cells.name
      %th &nbsp;

    - table_contents.rows.each do |row|
      %tr

        %td.action_column
          - if input_elements 
            = link_to '', '#', :class => 'sub_item_action inline_add', :tabindex => 999
            = link_to '', '#', :class => 'sub_item_action inline_delete', :tabindex => 999
          - else
            &nbsp;

        - row.all_cells.each do |cell|
          %td.content_column{ :class => "#{'no_data' if cell.no_data?}", 'data-column-id' => cell.id }
            - if input_elements 
              = text_field_tag "step[table_contents][][#{cell.id}]", cell.value, :onfocus =>"if(this.value=='Table Value...') this.value='';",:placeholder => 'Table Value...', :onblur => "if(this.value=='') this.value='Table Value...'", :disabled => cell.no_data?
            - else
              = h ParsedLine.new(cell.value).result

        %td &nbsp; 
```

# actionscript-3 - ActionScript 将填充底部（或边距底部）设置为更小的值

> ID：12788410
> 
> 赞同：0
> 
> 时间：2012-10-08T19:45:11.060
> 
> 标签：actionscript-3, padding

我有一个 VGroup，在其中我将有可变数量的 VGroup，其中有 2 个 HGroup。

所以像：

```
VGroup
  VGroup
   HGroup 
   HGroup
  VGroup

  VGroup
   HGroup 
   HGroup
  VGroup

  VGroup
   HGroup 
   HGroup
  VGroup
  .
  .
VGroup 
```

现在，我想让内部 VGroups 有一些大的底部填充（边距）。然后，我希望 HGroups 也有底部填充，但更小。有道理？好吧，所以我试图在内部 VGroup 内的第一个 HGroup 上设置 paddingBottom 样式，但没有任何改变。这是在 ActionScript 中。这是我所拥有的：

```
 var innerVGroup:VGroup = new VGroup();

   var hGroup:HGroup = new HGroup();          
   hGroup.setStyle("paddingBottom", "5px") ;
   var number= new Label();
   number.text = clients[j].clientNumber;
   hGroup.addElement(number);

  innerVGroup.addElement(hGroup);

  hGroup = new HGroup();
  var userName:Label = new Label();
  userName.text = clients[j].displayName;
  hGroup.addElement(userName);

  innerVGroup.addElement(hGroup);

  this._view.outterVGroup.addElement(innerVGroup); 
```

上面的代码在一个 for 循环中，它将继续创建 innerVGroups 并将其添加到 outterVGroup。

但是，我的 innerVGroups 和 hGroups 之间的底部填充是相同的。我什至尝试将 bottomPadding 样式设置为 1px、-100px、500px ......但永远不会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:25:41.483

在 Flex 中，对于我们不使用像素值的样式，`5px`我们只使用`5`. 所以这应该工作：

```
hGroup.setStyle("paddingBottom", 5); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T19:07:17.087

在 innerVGroup 上设置差距是有效的。

innerVGroup.gap = 0;

# javascript - clearInterval 在点击时不清除（但在悬停时工作正常）

> ID：12788417
> 
> 赞同：1
> 
> 时间：2012-10-08T19:45:32.637
> 
> 标签：javascript, jquery, clearinterval

我做了一个滑块，它自动播放很好，在悬停时暂停，然后在模糊时重新开始。伟大的。

但是当您单击时，它会开始一个新的间隔并以 x2 的速度运行，我无法清除它？

这是我的代码：

```
// Reset autoPlay() if a user clicks a nav button
$('#sliderNav a').click(function(e) {
    setTimeout(autoPlay(), delay);
});

// Auto play the slider
var delay = 4000; // 4 seconds
function autoPlay() {
    myInterval = setInterval(function() { 
        currentOffset += itemWidths[clickCount] // Add the current slides width to total offset
        $sliderWrap.animate({right: currentOffset}, 500, function() {
            clickCount++;
            // If this is the last slide when clicking .next, slide to clone then snap back to beginning.
            if ( itemWidths.length == clickCount ) {
                clickCount = 0;
                currentOffset = totalWidth;
                $sliderWrap.css('right',currentOffset); // Where we started originally
            }
        });
    }, delay );
}    
autoPlay();

// Stop autoPlay() on hover
$('#slider, #sliderNav a').hover(function() { 
    clearInterval(myInterval);   
},
// start autoPlay() on blur
function() { 
    autoPlay();
}); 
```

实际工作演示，以便您可以看到它的真实情况：http: [//www.johnheslop.com/canoe/](http://www.jonheslop.com/canoe/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:49:13.337

你应该传递函数的引用而不是函数返回值

```
use setTimeout(autoPlay, delay); instead of  setTimeout(autoPlay(), delay); 
```

您应该在 autoPlay 中清除Interval，以便在一次又一次调用时清除旧的 setInterval。

```
 var myInterval ;
    function autoPlay() {
         clearInterval(myInterval); // clear older setInterval.
        myInterval = setInterval(function() { 
             .............. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:53:30.747

使用全局变量来存储 setTimeout 的 id：

```
var timer = 0;

$('#sliderNav a').click(function(e) {
    timer  = setTimeout(autoPlay(), delay);
}); 
```

...

```
// Stop autoPlay() on hover
$('#slider, #sliderNav a').hover(function() { 
    clearInterval(timer);   
}, 
```

……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T19:57:22.027

你有一个错误

```
setTimeout(autoPlay(), delay);  <-- you are calling the function right away. 
```

您需要删除 ()

```
setTimeout(autoPlay, delay); 
```

# php - 在 PHP 中添加变量

> ID：12788418
> 
> 赞同：1
> 
> 时间：2012-10-08T19:45:40.047
> 
> 标签：php, syntax-error

我想通过将 PHP 变量添加到路径名来更改文件上传到的位置，但我无法让它工作，但我很确定这是一个语法错误。

这不起作用：

```
$this->options = array(
     'script_url' => $this->get_full_url().'/',
     'upload_dir' => dirname($_SERVER['SCRIPT_FILENAME']).'/'.$user.'/',
     'upload_url' => $this->get_full_url().'/'.$user.'/',
     'param_name' => 'files'
) 
```

这样做：

```
$this->options = array(
     'script_url' => $this->get_full_url().'/',
     'upload_dir' => dirname($_SERVER['SCRIPT_FILENAME']).'/bob/',
     'upload_url' => $this->get_full_url().'/bob/',
     'param_name' => 'files'
) 
```

我意识到这不是完整的代码，但我想知道这里是否缺少一个简单的语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:50:30.157

您似乎没有在`$user`任何地方定义。即使您有，您提供的代码似乎也是类声明的一部分，因此您需要确保`$user`在当前范围内定义（`global $user`如果需要，或者作为最后的手段尝试`$GLOBALS['user']`）。

# xml - SVG 坐标系 - 点与像素

> ID：12788422
> 
> 赞同：13
> 
> 时间：2012-10-08T19:45:43.650
> 
> 标签：xml, svg

通过阅读[SVG 1.1 规范](http://www.w3.org/TR/SVG11/coords.html)，我试图了解用于定义初始视口的单位与文档其余部分使用的单位之间的关系。

如果视口最初是使用点定义
`<svg width="800pt" height="1002pt" viewBox="0 0 800 1002" version="1.1">`
的，并且文档的其余部分没有单位标识符，那么它是否也假定为点，或者它是否默认为某些东西？根据[规范的这一部分](http://www.w3.org/TR/SVG11/coords.html#Units)：

> 当坐标或长度值是没有单位标识符的数字（例如，“25”）时，则假定给定坐标或长度以用户单位为单位（即，当前用户坐标系中的值）。

有问题的 SVG 文档的路径`d`值为`M 50.91 9.82 L 51.98 10.04 C 53.51 12.71 52.60 16.03 52.75 18.97`. 我读到移动到（50.91pt，9.82pt），画一条线到（51.98pt，10.04pt），然后画一条三次贝塞尔曲线到（52.60pt，16.03pt）。

这是正确的吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-08T23:00:55.323

你是对的。如果初始宽度/高度以磅为单位定义，并且与视图框声明相匹配（建立用户单位和实际尺寸之间的比率），则文档其余部分的默认单位将为 1pt。

参见：[http ://www.w3.org/TR/SVG/coords.html#SVGInitialUserCoordinateSystem](http://www.w3.org/TR/SVG/coords.html#SVGInitialUserCoordinateSystem)

（但是，我应该指出，您对三次贝塞尔曲线的解释不正确 - 目标点是 52.75、18.97（也就是前两组坐标指定控制点，而不是目标点。还要注意大写的“C”表示绝对坐标（相对于小“c”是相对的））。

（另外，只是好奇——但你为什么要选择点和像素？这似乎有点不寻常，除非你打算用文本做有趣的事情。）

# c - 如何在 C 中实现无锁共享标志？

> ID：12788424
> 
> 赞同：5
> 
> 时间：2012-10-08T19:45:50.760
> 
> 标签：c, sync, lock-free

我有一个生产者一消费者模型，我需要生产者在数据可用时设置一个标志。我怀疑我可以在没有锁定共享标志的情况下逃脱，因为：

*   生产者在设置之前从不检查值
*   偶尔缺少对标志的更新不是问题（尽管我也可以使用原子操作来避免这种情况？）。

所以我的问题是，我该如何实现呢？我对 volatile 关键字的理解，以及像 __sync_synchronize() 这样的东西充其量是微不足道的，所以假设我知道的很少。具体来说，我希望能够确保及时在另一个线程中看到对标志的更改。

**编辑**：我在 Linux 上使用 GCC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:10:07.787

使用两个变量：

```
volatile size_t elements_produced; // producer increments it when data is available
volatile size_t elements_consumed; // consumer increments it 
```

新数据准确的时间是可用的`elements_produced != elements_consumed`。如果您需要无限量，那么另外在更新时对其进行修改。

```
produce(...) {
    elements_produced = (elements_produced + 1) % (max_elements_in_queue + 1);
}

consume(...) {
    elements_consumed = (elements_consumed + 1) % (max_elements_in_queue + 1);
} 
```

不需要锁或原子。

这是单生产者、单消费者循环环形缓冲区的标准实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T19:45:57.460

以便携式方式执行此操作实际上是不可能的。

但是，您可以使用各种编译器内部函数来实现它。

例如，对于 x86(-64) 上的 gcc，可能至少 ARM：

```
static int queued_work;

static void inc_queued_work()
{
    (void)__sync_add_and_fetch( &queued_work, 1 );
}

/*
  Decrement queued_work if > 0.
  Returns 1 if queued_work was non-equal to 0 before
  this function was called.
*/
static int dec_queued_work()
{
    /* Read current value and subtract 1.
       If the result is equal to -1, add 1 back and return 0.
    */
    if( __sync_sub_and_fetch( &queued_work, 1 ) == -1 )
    {
        __sync_fetch_and_add( &queued_work, 1 );
        return 0;
    }
    return 1;
} 
```

一些 CPU:s 只支持 compare_and_swap。您也可以使用该 intrisic 来实现它：

```
/* Alternative solution using compare_and_swap  */
void inc_queued_work()
{
    do {
        int queued = queued_work;
        /* Try to write queued-1 to the variable. */
        if( __sync_bool_compare_and_swap( &queued_work,
                                         queued, queued+1 ) )
            return;
    } while( 1 );
}

int dec_queued_work()
{
    do {
        int queued = queued_work;
        if( !queued ) return 0;
        /* Try to write queued-1 to the variable. */
        if( __sync_bool_compare_and_swap( &queued_work, 
                                         queued, queued-1 ) )
            return queued;
    } while( 1 );
} 
```

即使您有多个作者和读者，这些功能也应该可以工作。和朋友一起应用google到'sync_add_and_fetch'会给你很多参考文档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T20:09:30.187

原子操作意味着（非常短暂地）阻塞其他原子操作，直到第一个操作完成。

我假设我们正在谈论线程，因此我们应该考虑互斥锁（但这也适用于进程和信号量）。互斥体（或信号量）可以在不尝试获取锁的情况下检查（读取）。

如果互斥体（信号量）的状态是已经被锁定，则继续进行其他操作，稍后再试。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-08T21:10:16.247

如果没有锁，两个线程将永远不会同步，并且消费者将永远旋转等待一个永远不会改变的值（因为该值被缓存，因此内存放置/获取永远不会发生）。

所以总而言之，你必须 a) 确保内存是从生产者那里写入的，b) 确保内存是由消费者读取的。这正是锁的作用，这就是你应该使用它们的原因。如果你对锁死了，你可以使用像 sleep 这样的函数，它可以保证唤醒后的缓存状态。

# linq - 无法将类型 'System.Linq.IQueryable 隐式转换为 System.Data.Entity.DbSet

> ID：12788425
> 
> 赞同：3
> 
> 时间：2012-10-08T19:45:54.563
> 
> 标签：linq

我收到以下错误：

> 无法将类型“System.Linq.IQueryable”隐式转换为“System.Data.Entity.DbSet”。
> 存在显式转换（您是否缺少演员表？）

我有以下代码：

```
var reports = dbContext.Product;

if (searchField == "StoreNum")
{
    int storeNum;
    int? stnum = int.TryParse(searchString, out storeNum) ? storeNum : (int?)null;

    reports = dbContext.Product
        .Where(w => w.StoreNum == stnum); // error occurs here when I try to build
} 
```

我不明白为什么我会收到此消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:52:36.083

我想你需要

```
List<ProdVal> reports;

if (searchField == "StoreNum")
    {
        int storeNum;
        int? stnum = int.TryParse(searchString, out storeNum) ? storeNum : (int?)null;

       reports = (dbContext.Product
                 .Where(w => w.StoreNum == stnum)).ToList(); // error occurs here when I try to build

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T07:06:11.887

```
 var reports = dbContext.Product.ToList();

        if (searchField == "StoreNum")
        {
            int storeNum;
            int? stnum = int.TryParse(searchString, out storeNum) ? storeNum : (int?)null;

           reports = reports
          .Where(w => w.StoreNum == stnum).AsQueryable(); // error occurs here when I try to build

        } 
```

# c# - 从代码中获取服务名称

> ID：12788430
> 
> 赞同：0
> 
> 时间：2012-10-08T19:46:06.687
> 
> 标签：c#, service

大家好，我正在尝试从我的项目安装程序中获取当前服务名称我已经向我的服务应用程序添加了一个基本安装程序并编写了我的服务名称和显示名称，但我需要从代码中获取服务名称

我试图在项目安装程序中添加方法然后调用它但它不起作用：<

```
public static string getname()
{
    return ProjectInstaller1.ServiceName;
} 
```

我的错误：=

> 非静态字段、方法或属性“myservice.ProjectInstaller.ProjectInstaller1”需要对象引用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T19:47:46.863

如果您坚持`public static string getname()`定义，这*应该*有效：

```
//assuming ProjectInstaller1 can be instantiated
return new ProjectInstaller1().ServiceName; 
```

# php - 如何设置 SQL 模式来比较导入的 XML 项目以防止在存储到数据库时出现重复？

> ID：12788432
> 
> 赞同：0
> 
> 时间：2012-10-08T19:46:17.083
> 
> 标签：php, sql, xml, import

我正在通过 PHP 脚本将计划项目导入数据库。这些项目具有如下 XML 结构：

```
<item>
  <date>1/1/2012</date>
  <time-start>1:00</time-start>
  <time-end>2:00</time-end>
  <title>One</title>
</item>
<item>
  <date>1/1/2012</date>
  <time-start>2:00</time-start>
  <time-end>3:00</time-end>
  <title>Two</title>
</item> 
```

我会将每个项目作为记录添加到数据库中。出现问题是因为我没有每个项目的唯一行 ID，所以当我稍后下载和导入项目时，我会制作重复记录。

我的第一个解决方案是在添加每个项目之前进行测试，如果在某个日期和项目安排了标题。一次导入数百条记录似乎需要很多处理，而许多记录将重复。

我应该在 WHERE 子句中使用第一个项目的日期和开始时间以及最后一个项目的日期和开始时间来创建一个项目数组来检查每个新导入的项目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:55:27.660

如果日期、开始时间和结束时间的组合应该是唯一的，您可以在数据库中设置包含多行的唯一索引。

请注意，如果您的一个或多个列允许 NULL 值，则不能使用它。可以添加多个具有相同其他值和一个 NULL 值的行，因为 NULL !== NULL 在数据库逻辑中。

# linux - Apache ss 记录文件奇怪的行为

> ID：12788435
> 
> 赞同：0
> 
> 时间：2012-10-08T19:46:26.833
> 
> 标签：linux, apache

我有带有以下日志选项的 apache 配置。

```
CustomLog logs/ssl_request_7_log \
  "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b %s \"%{Referer}i\" \"%{User-agent}i\"" 
```

我可以看到他们...

```
[root@webserver1 ~]# ls -l /var/log/httpd/ssl_request_7_log*
-rw-r--r-- 1 root root        0 May 27 04:02 /var/log/httpd/ssl_request_7_log
-rw-r--r-- 1 root root 37299758 Oct  8 15:43 /var/log/httpd/ssl_request_7_log.1
-rw-r--r-- 1 root root   139769 May 21 10:49 /var/log/httpd/ssl_request_7_log.2 
```

您是否注意到 ssl_request_7_log 文件的大小为零。它在 ssl_request_7_log.1 文件中附加实时日志，但不在 ssl_request_7_log 中。为什么？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T18:15:49.153

这已解决，问题是日志轮换。

# html - Facebook喜欢按钮添加太多图像

> ID：12788436
> 
> 赞同：0
> 
> 时间：2012-10-08T19:46:30.797
> 
> 标签：html, css, facebook

所以我在我的页面上添加了一个类似 Facebook 的按钮，到目前为止一切都很好，但问题是它一直试图比我告诉它的范围更广，并且它溢出到我的其他内容中。

```
<div class="fb-like" data-href="https://www.facebook.com/tangoalphatango" data-send="false" data-width="600" data-show-faces="true"></div> 
```

如果我添加一个溢出：隐藏样式并将高度设置为 65px，这将切断它试图添加的额外朋友图像，这是一个快速修复。

但是，我正在尝试提出一个更优雅的解决方案。我正在尝试让 Facebook 的like 按钮按照我告诉它的操作，即只有 600 像素宽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T00:16:37.557

It seems that setting a height ( 65px in this case ) and setting the overflow to hidden is the solution I'll go with, with no other answers to choose from. I'm sure facebook generally doesn't appreciate the appearance of their like button being changed, but as long as it's overflowing into the remainder of my page I'll have to control it myself.

# php - 更改 mp3 的 ID3 标签 - 专辑封面

> ID：12788438
> 
> 赞同：0
> 
> 时间：2012-10-08T19:46:33.840
> 
> 标签：php, tags, mp3, id3

我想在下载 mp3 时更改其专辑封面。用户上传他们的歌曲，当粉丝下载歌曲时 - 它必须附有专辑封面

我使用 PHP 作为编程语言。

# php - 上传大文件时清空 $_FILES 和 $_POST

> ID：12788444
> 
> 赞同：0
> 
> 时间：2012-10-08T19:47:17.007
> 
> 标签：php, file-upload

> **可能重复：**
> [为什么将文件上传到 PHP 时 $_FILES 为空？](https://stackoverflow.com/questions/3586919/why-would-files-be-empty-when-uploading-files-to-php)

我正在尝试上传最大 15 兆字节的文件。我在文件
中的 PHP 配置：`.htaccess`

```
php_value upload_max_filesize 20M
php_value post_max_size 20M
php_value max_execution_time 300
php_value max_input_time 300 
```

在 PHP 中`ini_get()`，`phpinfo()`我看到了正确的值`20M`。但是当我尝试上传 10 MB 文件时，它返回空`$_POST`数组`$_FILES`。我检查了`$_SERVER["CONTENT_LENGTH"]`变量，它返回了我`10671561`（10.4MB），它小于`20M`配置值。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:52:21.837

您的 htaccess 代码是正确的。您可以在您的 php 文件中尝试以下代码，然后尝试。

```
ini_set( 'memory_limit', '20M' );
ini_set('upload_max_filesize', '20M');  
ini_set('post_max_size', '20M');  
ini_set('max_input_time', 300);  
ini_set('max_execution_time', 300); 
```

如果不工作，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:57:11.757

您的服务器是否配置为使用 .htaccess 文件？如果您使用的是 Apache，您应该检查您的虚拟主机配置（例如，/etc/apache2/sites-available/<您的站点>）并确保`AllowOverride All`已设置。

# php - zend 自动加载器找不到文件

> ID：12788446
> 
> 赞同：0
> 
> 时间：2012-10-08T19:47:21.537
> 
> 标签：php, zend-framework, zend-autoloader

我想将 Uploader 类添加到我的 zend 应用程序中

在库文件夹中，我添加了 uploder.php，在 Uploder.php 中，我使用类 Amjad_Uploder {...}

在 application.ini 我添加以下几行

includePaths.library = APPLICATION_PATH "/../library"

appnamespace=“应用程序”

autoloaderNamespaces[] ="Amjad_"

在控制器中，我通过编写来调用类

$uploder=新 Amjad_Uploder();

我仍然有这些错误

警告：include_once(Amjad\Uploader.php)：无法打开流：第 134 行的 C:\wamp\www\amjad\library\Zend\Loader.php 中没有这样的文件或目录

警告：include_once()：无法打开“Amjad\Uploader.php”以包含（include_path='C:\wamp\www\amjad\application/../library;C:\wamp\www\amjad/library;.; c:\php\includes;D:\Zend Library\') 在 C:\wamp\www\amjad\library\Zend\Loader.php 第 134 行

致命错误：第 34 行的 C:\wamp\www\amjad\application\modules\admin\controllers\scincetificController.php 中找不到类“Amjad_Uploader”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:52:29.857

错误是在`library`文件夹中，您需要创建一个名为的文件夹`Amjad`并将其放置`Uploder.php`在其中。听起来像你`Uploder.php`直接输入`library`。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-08T20:23:39.493

我一直认为我应该在application.ini中

```
autoloaderNamespaces[] ="Amjad" 
```

并不是

```
autoloaderNamespaces[] ="Amjad_" 
```

# c++ - HSI->RGB 转换问题

> ID：12788449
> 
> 赞同：1
> 
> 时间：2012-10-08T19:47:27.080
> 
> 标签：c++, image-processing, rgb

在尝试将 HSI 转换为 RGB 时，我遇到了一些奇怪的问题，我正在尝试将其作为家庭作业的一部分。首先，这是我的原始图像：

[原始图片](http://i.imgur.com/IyaRX.png)（抱歉链接，我没有代表发布图片）

我正在从具有 H、S、I 值（0-255）的图像转换。这是该图像在 RGB 颜色空间中的显示（Hue=red，sat=green，inten=blue）：

[恒指源图像](http://i.imgur.com/MPMkH.png)

在我看来，它看起来很正确......白色的花朵（高强度）是蓝色的，色调（红色）似乎随着不同颜色的花朵而变化。

所以现在我在某些框中对强度通道（显示为蓝色）进行了一些均衡，结果如下：

HSI 均衡图像： `http://i.imgur.com/hgk9K.png` （（你必须复制这些，因为我没有超过 2 个超链接的代表））

没什么大不了的。它看起来并不完全正确，但很难说，感兴趣区域框之外的一切都是一样的。

现在问题来了。将其转换回 RGB 后，我得到以下结果：

转换后的图像： `http://i.imgur.com/6wEyw.png`

不知道这里有什么问题，绿色看起来不错，但一些红色/蓝色像素似乎已最大化。三个盒子如预期的那样在那里，它们的内容看起来很乱，但这不是这里更大的问题，因为这可能来自我的均衡功能。这些框之外的所有内容现在应该与原始图像几乎相同，但不知何故它已经混乱了。

我已经检查了我的代码很多次，并添加了额外的括号和数据类型转换以确保，但仍然找不到问题。我相信我的公式是正确的，但我必须在计算像素值的方式上遗漏一些问题。

这是我用来从 HSI 转换为 RGB 的代码。错误可能不在此方法范围内，但此处使用的所有功能都已在其他地方进行了测试，并且似乎可以正常工作。

```
void colorSpace::HSItoRGB(image &src, image &tgt){
    cout<<"HSI->RGB\n";
    tgt.resize(src.getNumberOfRows(),src.getNumberOfColumns());
    float pi = 3.14159265358979f;
    for (int i=0; i<src.getNumberOfRows(); i++){    //for each pixel
        for (int j=0; j<src.getNumberOfColumns(); j++){
            //re-normalize h,s,i
            float h = ((float)src.getPixel(i,j,H))*pi*2.0f/255.0f;//255/2 instead of 180
            float s = ((float)src.getPixel(i,j,S))/255.0f;//255 instead of 100
            float in= ((float)src.getPixel(i,j,I))/255.0f;
            //compute x y z
            float x = in*(1.0f-s);
            float y = in*( 1.0f + (s*cos(h) / cos(pi/3.0f-h)) );
            float z = 3.0f*in-(x+y);
            float r,g,b;    //set rgb
            if(h<(2.0f*pi/3.0f)){
                b = x;
                r = y;
                g = z;
            }else if(h<(4.0f*pi/3.0f)){//&&2pi/3<=h
                r = x; 
                g = y;
                b = z;
            }else{  //less than 2pi && 4pi/3<=h
                g = x;
                b = y;
                r = z;
            }
            //convert normalized rgb to 0-255 range
            int rr = (int)round(r*255.0f);
            int gg = (int)round(g*255.0f);
            int bb = (int)round(b*255.0f);
            tgt.setPixel(i,j,RED,rr);
            tgt.setPixel(i,j,GREEN,gg);
            tgt.setPixel(i,j,BLUE,bb);
        }
    }
} 
```

是否有人在代码中看到任何问题或通过查看图像有任何见解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-08-22T14:40:48.967

这里的基本思想是色调值从 0 到 360 的变化，这将产生 rgb 值。我们也有饱和度，它是一个从 0.00 到 1.00 或介于两者之间的值，还有强度也是 0.00 到 1.00。

[![在此处输入图像描述](../Images/03de09e83360b9ddc7afd555507edbc9.png)](https://i.stack.imgur.com/2MD1f.jpg)

```
 ///I use this
// the function result will be the values of the array rgb[3] and will be the  rgb values 0-255

///float H is values 0-360 because there are 360 degrees of color in hsi colorspace
///float S is 0.00 - 1.00 and aything in between
///float I is 0.00 - 1.00 and aything in between
///The input to our function is going to be hsi_to_rgb (Hue, Saturation, Intensity(brightness))

int rgb[3]; ///number of channels rgb = 3

void hsi_to_rgb(float H, float S, float I) {
  int r, g, b;
  if (H > 360) {
    H = H - 360;
  }
  H = fmod(H, 360); // cycle H around to 0-360 degrees
  H = 3.14159 * H / (float)180; // Convert to radians.
  S = S > 0 ? (S < 1 ? S : 1) : 0; // clamp S and I to interval [0,1]
  I = I > 0 ? (I < 1 ? I : 1) : 0;
  if (H < 2.09439) {
    r = 255 * I / 3 * (1 + S * cos(H) / cos(1.047196667 - H));
    g = 255 * I / 3 * (1 + S * (1 - cos(H) / cos(1.047196667 - H)));
    b = 255 * I / 3 * (1 - S);
  } else if (H < 4.188787) {
    H = H - 2.09439;
    g = 255 * I / 3 * (1 + S * cos(H) / cos(1.047196667 - H));
    b = 255 * I / 3 * (1 + S * (1 - cos(H) / cos(1.047196667 - H)));
    r = 255 * I / 3 * (1 - S);
  } else {
    H = H - 4.188787;
    b = 255 * I / 3 * (1 + S * cos(H) / cos(1.047196667 - H));
    r = 255 * I / 3 * (1 + S * (1 - cos(H) / cos(1.047196667 - H)));
    g = 255 * I / 3 * (1 - S);
  }
  //set the output to the array
  rgb[0] = r;
  rgb[1] = g;
  rgb[2] = b;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:10:05.137

在计算依赖于它们的 cos 值之前，需要针对这三种情况调整 h 值。IE：

```
 if(h<(2.0f*pi/3.0f)){
            y = in*( 1.0f + (s*cos(h) / cos(pi/3.0f-h)) );
            b = x;
            r = y;
            g = z;
        }else if(h<(4.0f*pi/3.0f)){//&&2pi/3<=h
            h -= 2*pi/3;
            y = in*( 1.0f + (s*cos(h) / cos(pi/3.0f-h)) );
            r = x; 
            g = y;
            b = z;
        }else{  //less than 2pi && 4pi/3<=h
            h -= 4*pi/3;
            y = in*( 1.0f + (s*cos(h) / cos(pi/3.0f-h)) );
            g = x;
            b = y;
            r = z;
        } 
```

您还需要确保所有 rr,gg,bb 值都不会超出 0..255 区间：

```
if (rr < 0) rr = 0;
if (rr > 255) rr = 255; 
```

... ETC

# java - 如何从 TitleAreaDialog 引用 SWT 视图

> ID：12788451
> 
> 赞同：0
> 
> 时间：2012-10-08T19:47:37.113
> 
> 标签：java, swt, eclipse-rcp, jface

我想从我的`TitleAreaDialog`.

有许多信息要传递给`view`. 我已经创建了许多`getters`并`setters`处理值的更改，但我仍然需要引用`view`which is not a `static class`。

我在互联网上搜索，但找不到一个很好的例子。

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:02:38.500

如果我了解您所追求的内容（对工作台中可见的视图类实例的引用），请尝试以下操作：

```
IWorkbench wb = PlatformUI.getWorkbench();
IWorkbenchWindow activeBenchWindow = wb.getActiveWorkbenchWindow();
IWorkbenchPage[] pages = activeBenchWindow.getPages();
IWorkbenchPage page = pages[0];
IViewPart yourView = page.findView(YourView.ID); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:53:58.203

您需要在构造函数中传递给 TitleAreaDialog。

# jquery - 在 IE9 中引发堆栈溢出的函数

> ID：12788457
> 
> 赞同：4
> 
> 时间：2012-10-08T19:47:58.487
> 
> 标签：jquery, internet-explorer-9, jquery-events

我有以下代码，它根据我传递给此函数的参数，通过 ajax 从 PHP 脚本中提取图像 URL。结果是现有图像淡出（jQuery），src 属性获取新图像并且图像淡入。这在 Chrome、Firefox 等中就像魅力一样，但是 IE9 抛出错误：

> 'SCRIPT28：堆栈空间不足'

如果我将 IE9 切换到 IE8 或 IE7 模式，它工作正常，即使错误仍然出现，但在 IE9 中它无法起飞。我哪里错了？

```
function imager(dt){
    $('.ct_img').fadeOut(400);
        var urip = homeURL + '/qwm/CF_QRGR/' + encodeURIComponent(dt) + '/';
        $.ajax({url:urip, success:function(result){

            $.doTimeout(400,function(){
                if(result=='0'){
                $('.ct_img').attr('src',homeURL + '/public/img/site/load_fail_message.jpg').bind('load', function (e) {
                    $('.ct_img').fadeIn(400)
                        });
                } else {
                $('.ct_img').attr('src',homeURL + '/public/img/bank/vault/' + result).bind('load', function (e) {
                    $('.ct_img').fadeIn(400)
                        });
                }
                });

        }
        });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:02:05.827

我怀疑这是一个事件绑定。如果没有 jQuery，事件绑定是否有效？周围会不会有很多 .ct_img 类？因为这将替换他们所有的 src 并且可能会超载它？所以在这里，使用 ID 代替

```
 var img = document.getElementById( "ct_img");
    img.src = url;
    img.onload = function() {
        $('#ct_img').fadeIn(400);
     }; 
```

我不知道 IE 是否有完整的堆栈跟踪，但要查看是否有递归，您可以控制台日志

```
 arguments.callee.caller.name.toString() 
```

查看调用它的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T08:58:35.073

甚至 IE10 根本没有完整（无）堆栈跟踪，难以调试......这个错误可能是由其他几个原因引起的：/ 在我的情况下，我尝试将表单解析为单个 JS 对象，但仍然收到此错误SCRIPT28：堆栈空间不足，即使没有事件绑定到输入也没有触发任何事件。

但是我注意到一件事，当 Browser Mode: IE9 Document Mode: **IE7** --- 我会收到这个错误（即在 dell.com 上）--- 当手动切换到**Document Mode: IE9**时，这个错误消失了......

**编辑：**

成功解决了我的问题：

我正在使用： *console.log(JSON.stringify(object));*

该对象包含来自选择框的数千个选项...因此即使太多的 console.logging 也可能导致 SCRIPT28：堆栈空间不足（尤其是与 JSON.stringify 一起使用时）

# jquery - 带有样式的jQuery目标div

> ID：12788458
> 
> 赞同：1
> 
> 时间：2012-10-08T19:47:59.097
> 
> 标签：jquery

我正在尝试使用 jQuery 为 div 设置背景：

```
$(".cover").css("background", "yellow"); 
```

但是我不断得到：

> 未捕获的类型错误：无法调用 null 的方法“css”

还尝试添加 id 而不是类：

```
$("cover").css("background", "yellow"); 
```

但后来它说：

> 未捕获的类型错误：对象 # 没有方法“css”

源代码： http: [//pastebin.com/FEVwL8iq](http://pastebin.com/FEVwL8iq)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:51:17.877

编辑：我可以看到您也在页面上使用 Mootools。

Mootools 可能已将其自身分配给 $。尝试将表达式更改为：

`jQuery(".cover").css("background", "yellow");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:53:50.823

如果你有一个 div

```
<div class="cover">...</div> 
```

尝试使用。

```
$('.cover').addClass('yellow-class'); 
```

并删除课程

```
$('.cover').removeClass('yellow-class');

<style>
    .yellow-class {
        background-color: yellow;
    }
</style> 
```

# java - 将文件从 autoexec jar 复制到 java.io.tmpdir

> ID：12788460
> 
> 赞同：2
> 
> 时间：2012-10-08T19:48:08.080
> 
> 标签：java, file, copy, dir, temp

我正在尝试将两个本地文件从我的 jar 复制到 java temp dir 定义，如下所示：

`String strDirectoy = System.getProperty("java.io.tmpdir") + path;`

当我从 Eclipse 启动它时效果很好，但是当我尝试从导出的​​ autoexec jar 启动它时，它不起作用！

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:03:34.330

好的，我知道我做错了什么： - 首先：eclipse 不会导出我自己的文件（我想复制的文件）所以我必须在 eclipse 导出后手动将它们复制到 jar 中。

*   第二：我必须把它们放在jar的主目录中，如果我不这样做，java就找不到有问题的文件。

# ruby-on-rails-3 - 在 Rails 中自动创建单个产品页面

> ID：12788462
> 
> 赞同：0
> 
> 时间：2012-10-08T19:48:16.047
> 
> 标签：ruby-on-rails-3, url, url-rewriting

我正在返回几个月前编写的应用程序并尝试进行一些小的调整。我目前有一个模型`Product`和一个目录页面，其中所有产品都使用`each`循环列出`Product`.

为了尝试保持网站安全，我已经设置`http://.../products/...`了身份验证登录，因此只有具有密码的用户才能查看`/products/index`、编辑产品详细信息并一次查看一个产品（显示页面）。

我现在想从列出所有产品的页面链接到只有一个产品详细信息的页面（即单个产品自己的页面）。

我知道我可以`Product`使用 a 的 find 函数从模型中找到产品`Product ID`，但是，如何自动为该产品的列表创建合理的 URL？

总之，如果我在一个页面上有 10 种产品的列表，那么让用户点击产品并被路由到名为 的页面的最佳方式是什么`http://..../shop/specific_products_name`？我已经阅读了一些，看起来`to_param`可能会有一些好处，但我正在努力寻找一种创建这些页面的明智方法

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:45:34.090

这是一个基本的常规控制器设置：

首先，这是路由快捷方式语法：

```
# config/routes.rb
...
resources :products
... 
```

这是加载所有产品的控制器，`index`仅加载一个产品`show`。

```
# app/controllers/products_controller.rb
class ProductsController 
  def index
    @products = Product.all
  end

  def show
    @product = Product.find(params[:id])
  end   
end 
```

路线文件中的那一行为我们提供了这些路线（以及其他路线）：

*   `/products`去`products_controller#index`
*   `/products/:id`将`products_controller#show`params[:id] 设置为给定的数字

如您所见，以最少的工作量获得漂亮 URL 的最简单方法是覆盖`to_param`.

`to_param`是 Rails 用来将模型转换为 url/request 中的表示的方法。

默认情况下，它是这样的：

```
class Product
  def to_param
    self.id
  end
end 
```

因此，当 Rails 对其结果执行 Product.find() 时`to_param`，`find()`将其转换为带有`to_i`.

如果`params[:id]`是`"24"`，`Product.find(params[:id])`则将“24”转换为整数 24。

但请考虑如何`to_i`与其他示例一起使用：

```
"100".to_i                     #=> 100
"100-flux-capacitor-2000".to_i #=> 100 
```

换句话说，如果我们的 Product 参数表示是`"#{id}-the-product-name"`,`Product.find(params[:id])`即使我们的 products#show URL 看起来像 , 仍然可以工作`/products/56-ford-taurus`。

还有一件事：

```
"I love the Ford Taurus".parameterize #=> "i-love-the-ford-taurus" 
```

# 解决方案 A

解决您的问题的最简单方法是像这样覆盖 to_param：

```
class Product
  def to_param
    "#{id}-#{name.parameterize}"
  end
end 
```

这种方法的好处是您更改了 Product 模型中的一个方法，而您的其余代码只是 Works。

缺点是您的网址看起来像：

```
/products/56-ford-taurus 
```

代替：

```
/products/ford-taurus 
```

# 解决方案 B

如果您想要后一个示例，您可以`slug`在 Products 表中维护一个列。

例子：

```
Product
  id: 58
  name: Ford Taurus
  slug: ford-taurus 
```

然后你可以像这样覆盖 to_param：

```
class Product
  def to_param
    slug
  end
end 
```

现在， params[:id] 看起来像“ford-taurus”。

`Product.find("ford-taurus")`由于 find() 需要一个整数，因此不再起作用，因此您可以替换`Product.find(params[:id])`为`Product.find_by_slug(params[:id])`.

你只需要确保每个产品都有一个独特的 slug。

您可以通过以下方式自动化 slug 创建过程：

```
class Product
  before_create :make_slug

  private
  def make_slug
    self.slug = name.parameterize
  end
end 
```

这样，您只需要在创建时设置产品名称，保存它，它的 slug 将成为 URL 友好的“无论产品名称是什么”。

*   优点：您的 URL 现在只包含产品名称，没有难看的产品 ID。
*   不利的一面：更改产品的 slug 会破坏 URL，这就是为什么我的 before_filter 示例仅在创建时设置 slug 而不是在您保存产品时设置。

现在 Rails 将生成您想要的 URL，您可以在如下视图中生成指向这些产品的链接：

```
# This would be in views/index.html.erb
<% @products.each do |product| %>
  <%= link_to product.name, product %>
<% end %> 
```

将为每个产品生成这种 html：

```
<a href="/products/56-ford-taurus">Ford Taurus</a> (if you used Solution A)
<a href="/products/ford-taurus">Ford Taurus</a> (if you used Solution B) 
```

# iphone - 视频的破碎效果

> ID：12788466
> 
> 赞同：1
> 
> 时间：2012-10-08T19:48:45.007
> 
> 标签：iphone, ios, transition, core-image

我想对视频播放（基于 AVPlayer）产生类似破碎的效果，它将过渡到另一个视频或图像。

是否可以在 iOS5/6 中对这种视频创建这种效果？
如果不是，另一种方法是在最后播放帧的静止图像上执行转换。最合适的框架是什么？核心形象？核心图形？OpenGL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T13:37:57.113

我认为在视频上放置 UIVIew 将是您最好的选择。然后，如果您确实需要在视图中绘制性能（因此，在视频上），您可以使用[Quartz2d](https://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/drawingwithquartz2d/Introduction/Introduction.html)（甚至 OpenGL ES）。

使用 Quarz2d，您可以为您的粉碎动画制作一个包含所有帧的简单精灵表（游戏中使用的常用技术），然后循环遍历它们并将它们呈现在上述 UIView 上。如果性能不够好，您可以尝试使用 OpenGL ES :)，但使用 Quarz2d 可以节省大量时间。

如果性能成为问题，您最终可以在视频顶部使用[Cocos2D层，就像在这篇](http://www.cocos2d-iphone.org/)[文章](https://stackoverflow.com/questions/7517575/playing-video-with-many-particles-animated-on-top)中一样，目标是在视频顶部渲染粒子发射器...... Cocos2d (OpenGL ES) 解决了性能问题。（好消息是 Cocos2d 可以轻松处理精灵表，所以我猜你可以立即实现它）

**简而言之：**根据你的过渡有多大，选择 OpenGL ES（如果你想要那种性能）或 Quarz2d，如果性能不是一个大问题。

干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:40:33.103

如果您只想在播放期间在不同视频之间进行过渡，您可以使用视图过渡在视频之间切换。我不确定你的动画应该是什么样子，但[这里](http://www.freetimestudios.com/2010/09/06/fun-with-core-animation-shutter-transition/?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed:%20FreeTimeStudios%20%28Free%20Time%20Studios%29)有一个例子。重要的是要及时预加载其他视频，并在开始过渡之前检查视频是否已准备好显示，否则看起来会不好看。

如果您想创建一些非常高级的效果，另一种选择是将视频文件渲染为 OpenGL ES 纹理并使用 GL 创建基本上您能想到的任何 3D 效果。我为此写了一个小 POC，如果您有兴趣，我可以分享。另请参阅[此问题](https://stackoverflow.com/questions/5621627/ios4-how-do-i-use-video-file-as-an-opengl-texture)。

如果您想持久化到视频文件的过渡，您需要逐帧处理视频并从中创建新的视频流。这个比较复杂，但是[AVFoundation](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVFoundationFramework/_index.html) API 可以做到。[这](http://www.raywenderlich.com/13418/how-to-play-record-edit-videos-in-ios)是一个例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T21:10:40.027

嗨，在 viewcontroller 的视图上添加 mpmoviecontroller 的视图，并放置一个图像视图并获取一些图像（用于 sutter 的图像序列）并播放这些图像的动画以显示快门效果。希望这个技巧对你有用:)

对于 uiimageview 动画，请查看此链接

[UIImageView 动画](http://appsamuck.com/day2.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-20T04:11:02.117

在我所做的只是抓取视频最后一帧的图像并将其放在视频后面之前，我已经使用过这种技术。当视频停止播放时，从视图中移除视频播放器并在图像上执行破碎动画，这将揭示其背后的内容

# jquery - 保存复选框的值

> ID：12788467
> 
> 赞同：2
> 
> 时间：2012-10-08T19:48:49.260
> 
> 标签：jquery, checkbox

我的 wordpress 主题中的元框文本字段上方有两个复选框添加新的自定义帖子页面。一切正常，除了当我刷新页面时，两个复选框再次变为未选中，而我希望其中一个被选中。这是我的html代码：

```
<input type="checkbox" id="a" />
<input type="checkbox" id="b" />
<input type="textarea" id="c" /> 
```

这是我的 jQuery 代码：

```
$(function () {
$('#a, #b').change(function () {
    var $a = $('#a'), $b = $('#b'), $c = $('#c');
    if (this.id == 'a' && this.checked) {
       $c.val('Hello World!');
       $b.prop('checked', false);
    } else if (this.id == 'b' && this.checked) {
       $c.val('Not hello World!'); 
       $a.prop('checked', false);
    } else {
       $c.val('');
    }
});
}); 
```

我不知道这是否通过 php 或 jQuery 来完成就足够了以及如何完成。您的帮助将不胜感激。​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T08:31:35.980

复选框没有`name`属性，因此无法保存。

如果您对元框不够熟悉，则应该使用执行它们的库。那里有很多，我什至有一个[-mr meta box](https://github.com/mrfoto/mr-meta-box)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:01:48.487

你不能把html改成这样吗？

```
<input type="checkbox" id="a" checked="checked" />
<input type="checkbox" id="b" checked="checked" />
<input type="textarea" id="c" /> 
```

# scripting - 可以锁定 Doors 用户的属性写访问权限吗？

> ID：12788469
> 
> 赞同：-1
> 
> 时间：2012-10-08T19:48:49.937
> 
> 标签：scripting, ibm-doors

是否可以根据用户以编程方式锁定某些属性？所以某些属性可以由 User2 写入，而某些属性不能由 User2 写入。但是，User1 可能具有对所有属性的写访问权。

实现这一目标的最有效方法是什么？我不得不担心不会占用太多的计算资源，因为我希望它能够在相当大的模块上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:35:19.263

[https://www.ibm.com/developerworks/forums/thread.jspa?messageID=14466620븼](https://www.ibm.com/developerworks/forums/thread.jspa?messageID=14466620&#14466620)

# javascript - JQuery UI 可拖动与 Wijmo 可拖动冲突

> ID：12788476
> 
> 赞同：0
> 
> 时间：2012-10-08T19:49:27.080
> 
> 标签：javascript, jquery-ui, wijmo

我将 JQuery UI 用于其拖放功能，将 Wijmo（一个 JavaScript UI 库）用于菜单栏。然而，JQuery UI 中的“可拖动”功能无法与 Wijmo 库一起使用，因为 Wijmo 中还有一个“可拖动”功能。程序如何知道它正在使用哪个函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:05:12.020

您可以将“可拖动”事件绑定在一起。

```
$('#foo').bind('draggable', function() {
    //code goes here
}); 
```

甚至...

```
$('#foo').bind({
    draggable: function() {
       // do something on drag
    },
    droppable: function() {
       // do something on drop
    }
}); 
```

# javascript - 多向导航

> ID：12788478
> 
> 赞同：0
> 
> 时间：2012-10-08T19:49:33.213
> 
> 标签：javascript, jquery, html, css, navigation

我正在尝试创建一个多向单页网站，如下[所示](http://magazine1.suitupordie.com)

```
 [panel 1]
    [panel 2]
    [panel 3][panel 4][panel 5]
    [panel 6] 
```

我知道如何垂直或水平滚动，但不能一起滚动。我要找的效果和这个差不多.. [http://jsfiddle.net/shavindra/zKxxK/39/](http://jsfiddle.net/shavindra/zKxxK/39/)

我希望每个面板都是 width: 100%; 高度：1000px；

如果有人能给我一个简单的故障或指出我正确的方向，我将不胜感激。

/////// 编辑 + 2 //////////////

~~这是我的本地代码，但我无法复制 @Beetroot-Beetroot 解决方案。~~

下面的代码现在适用于寻找类似解决方案的任何人。感谢@Beetroot-Beetroot

```
<!DOCTYPE html>
<html lang="en">
<head>

<style type="text/css">

body {
    margin: 0px;
    overflow: none;
}

#content {
width: 100%;
height: 100%; 
position: absolute;

}
#scrollWrapper {
    position: relative;
    overflow: hidden;
}
#scroller {
    position: absolute;
}
.scrollitem {
    position: absolute;
    background: #F0F8FF;
    border: 1px solid black;
    display: none;
}
</style>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
</head>

<body>
<div id="content">
<div id="scrollWrapper">
    <div id="scroller">
        <div class="col1 row1 scrollitem">col1, item1</div>
        <div class="col1 row2 scrollitem">col1, item2</div>
        <div class="col1 row3 scrollitem">col1, item3</div>
        <div class="col1 row4 scrollitem">col1, item4</div>
        <div class="col1 row5 scrollitem">col1, item5</div>

        <div class="col2 row1 scrollitem">col2, item1</div>
        <div class="col2 row2 scrollitem">col2, item2</div>
        <div class="col2 row3 scrollitem">col2, item3</div>
        <div class="col2 row4 scrollitem">col2, item4</div>
        <div class="col2 row5 scrollitem">col2, item5</div>

        <div class="col3 row1 scrollitem">col3, item1</div>
        <div class="col3 row2 scrollitem">col3, item2</div>
        <div class="col3 row3 scrollitem">col3, item3</div>
        <div class="col3 row4 scrollitem">col3, item4</div>
        <div class="col3 row5 scrollitem">col3, item5</div>
    </div>
</div>
​&lt;/div>

</body>

    <script type="text/javascript">
    var $scroller = $("#scroller"),
        $scrollitems = $(".scrollitem"),
        borders = {
            top:    parseInt($scrollitems.css('border-top-width')),
            right:  parseInt($scrollitems.css('border-right-width')),
            bottom: parseInt($scrollitems.css('border-bottom-width')),
            left:   parseInt($scrollitems.css('border-left-width'))
        },
        margin = 8,
        currentPage = {
            jq: $(),
            x: 0,
            y: 0
        },
        scrollTime = 1200,
        xPitch,
        yPitch,
        inTransition = false;

    $(window).on('resize', function() {
        $("#scrollWrapper, #scroller").height($(document).height());
        $("#scrollWrapper, #scroller").width($(document).width());
        $(".scrollitem").width($(document).width() - borders.left - borders.right - 2);
        $(".scrollitem").height($(document).height() - borders.top - borders.bottom - 2);
        xPitch = $(document).width() + margin,
        yPitch = $(document).height() + margin
    }).trigger('resize');

    function scrollBy(coords) {
        //find new item relative to current
        coords.x += currentPage.x;
        coords.y += currentPage.y;
        return scrollTo(coords, false);
    };

    function scrollTo(coords, noScroll) {
        var def = new $.Deferred();
        var $newPage = $scrollitems.filter(".col" + coords.x).filter(".row" + coords.y);
        //if new page exists,
        if (!inTransition && $newPage.length) {
            inTransition = true;
            //position new page and show it
            var left = coords.x * xPitch,
                top = coords.y * yPitch;
            $newPage.css({
                'left': left,
                'top': top
            }).show();
            //scroll to new page
            var t = noScroll ? 0 : scrollTime;
            $scroller.animate({
                'left': -left,
                'top': -top
            }, t, function() {
                //hide current page (not really necessary if everything else is pixel perfect)
                currentPage.jq.hide();
                //update currentPage to reflect new page
                $.extend(currentPage, {jq:$newPage}, coords);
                inTransition = false;
                def.resolve();//allow something to happen after new page is loaded
            });
        }
        else { def.reject(); }//allow something to happen if new page doesn't exist
        return def.promise();
    }

    //go to initial page
    scrollTo({x:1, y:1}, true).done(function() {
        //here do whatever is necessary on initial page load
    });

    $(document).on('keydown', function(e) {
        e.preventDefault();
        switch (e.which) {
        case 37:
            scrollBy({x:-1, y:0}); // left
            break;
        case 38:
            scrollBy({x:0, y:-1}); // up
            break;
        case 39:
            scrollBy({x:1, y:0}); // right
            break;
        case 40:
            scrollBy({x:0, y:1}); // down
            break;
        }
    });
    </script>

​
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T01:59:18.117

试试这个：

[http://jsfiddle.net/fakTV/1/](http://jsfiddle.net/fakTV/1/)

采用不同的方法来定位页面，从而简化 HTML、javascript 和 CSS。

您将看到从一页到另一页的滚动是由一对函数`scrollBy()`（用于相对页选择）和`scrollTo()`（用于绝对页选择）处理的。

这可能不是您想要的，但可能会为您提供更好的起点。

# windows - Windows SCM 报告 mongodb 已启动，但与 mongodb 的初始连接失败

> ID：12788480
> 
> 赞同：1
> 
> 时间：2012-10-08T19:49:36.703
> 
> 标签：windows, mongodb, version-control, dependencies

我们在 Windows 上将 mongodb (v2.0.6) 作为服务运行。我们创建了其他几个依赖于 mongodb 的服务，并为这些服务创建了对 mongodb 的适当依赖。随着我们 mongodb 中的集合的增长，我们开始看到我们的服务在启动时尝试连接到 mongodb 时出现故障。mongodb 似乎正在向 Windows SCM 报告它已经启动，但它似乎还没有准备好接受客户端连接。有没有其他人见过这种情况？我们目前有几个黑客来解决这个问题，但我试图找出这是否是 mongodb 中的一个错误，即，当它告诉 SCM 它已经启动时，它是否仍在异步初始化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:33:03.150

mongod.exe 在作为服务启动时立即向 SCM 注册，但可能需要一些时间来预分配文件，尤其是本地数据库中的 oplog（如果它很大）。在控制台窗口中运行时，它会做同样的事情。加入副本集时的协商也可能需要一些时间。一旦将“等待连接...”记录到日志文件中，它就可以连接了。

如果您认为它的行为应该有所不同，例如，在 SCM 准备好接受连接之前保持 SERVICE_START_PENDING 状态，请提交一份 Jira 票证，并附上您的提案的详细信息。我们并没有与当前的行为结婚，但它确实与它在控制台窗口和其他操作系统中显示的行为相匹配。

# c# - 如何在我的视图模型中访问日历控件中的选定日期？

> ID：12788484
> 
> 赞同：1
> 
> 时间：2012-10-08T19:49:49.047
> 
> 标签：c#, xaml, mvvm, caliburn.micro

我正在使用 Caliburn.Micro。我的`SelectionMode`日历控件是`MultipleRange`.

我看到了一个`SelectedDate`可以为其创建绑定的属性，我可以在我的 ViewModel 中访问它。我也看到`SelectedDates`了，但是当我尝试为此创建绑定时，例如：

```
<Calendar x:Name="Dates"
          SelectedDates="{Binding SelectedDates}"
          SelectionMode="MultipleRange"
          HorizontalAlignment="Left" /> 
```

它告诉我“`SelectedDates`属性是只读的，不能从标记中设置。”

有解决方案吗？如何从我的 ViewModel 访问日历控件中的选定日期，希望使用 Caliburn.Micro 的约定？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T21:04:31.383

我遇到了同样的情况。我只是将 SelectedDatesChanged 事件连接到一个公共方法，并将参数设置为 SelectedDates。这是 XAML：

```
<Calendar Name="TournamentCalendar" SelectionMode="MultipleRange" Margin="5">
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="SelectedDatesChanged">
            <cal:ActionMessage MethodName="AssignDates">
                <cal:Parameter Value="{Binding SelectedDates, ElementName=TournamentCalendar}"/>
             </cal:ActionMessage>
        </i:EventTrigger>
   </i:Interaction.Triggers>
</Calendar> 
```

在我的视图模型中，我添加了以下方法。请注意参数的类型。

```
public void AssignDates(SelectedDatesCollection dates)
{
    if (dates.Count > 0)
    {
        _tournamentDates.Clear();
        foreach (var date in dates)
        {                  
            _tournamentDates.Add(new DateViewModel(date));
        }
        NotifyOfPropertyChange(() => TournamentDates);
    }
} 
```

我还发现，一旦调用此方法，您实际上可以从视图模型中更新选定的日期，只需从传入的 SelectedDatesCollection 对象中添加或删除日期，如下所示：

```
public void AssignDates(SelectedDatesCollection dates)
{
    if (dates.Count > 0)
    {
        // Removes today if included then adds a date 4 days from today
        DateTime today = DateTime.Today;
        if (dates.Contains(today))
        {
           dates.Remove(today);
        }
        dates.Add(today.AddDays(4));
    }
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:51:44.287

听起来您需要创建自己的附加属性。人们对 ListBox （等）上的 SelectedItems 属性有完全相同的问题。

这是您可以尝试的解决方案示例：http:
[//blog.functionalfun.net/2009/02/how-to-databind-to-selecteditems.html](http://blog.functionalfun.net/2009/02/how-to-databind-to-selecteditems.html)

这就是我过去所做的。它允许您忠实于 MVVM 模式，但它是相当多的额外代码。您可能需要平衡 MVVM 的价值与额外的开发和维护成本。

# javascript - $(document).scrollTop() 总是返回 0

> ID：12788487
> 
> 赞同：74
> 
> 时间：2012-10-08T19:50:01.060
> 
> 标签：javascript, jquery, scrolltop

一旦页面的滚动位置达到一定高度，我只是试图做一些事情。但是`scrollTop()`返回 0 或者`null`无论我向下滚动多远。这是我用来检查`scrollTop()`值的帮助功能：

```
$('body').click(function(){
    var scrollPost = $(document).scrollTop();
    alert(scrollPost);
}); 
```

我已经尝试附加`scrollTop()`到`$('body')`，`$('html')`当然`$(window)`，但没有任何改变。

有任何想法吗？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-10-08T21:46:34.700

出于某种原因，从我的 html 和 body 标签中删除 'height: 100%' 解决了这个问题。

我希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2017-09-21T09:43:23.480

我在 scroll = 0 中遇到了同样的问题：

```
document.body.scrollTop 
```

下次使用

```
document.scrollingElement.scrollTop 
```

编辑 01.06.2018

如果您使用，那么您将获得在or`event`中具有`document`元素的对象。下表显示了不同浏览器上的滚动操作。`target``srcElement`[![例子](../Images/4c0859d716f048a4071e493f813ff120.png)](https://i.stack.imgur.com/D33cO.png)

[![在此处输入图像描述](../Images/f0f311c47e207a6487cf3711ff3c2b85.png)](https://i.stack.imgur.com/klU5O.png)

如您所见，Firefox 和 IE 没有`srcElement`，IE 11 也不支持`scrollingElement`.

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-03-23T13:26:49.860

我的解决方案，在尝试了上述一些并且不涉及更改任何 CSS 之后：

```
var scroll_top = Math.max( $("html").scrollTop(), $("body").scrollTop() ) 
```

这适用于最新版本的 Chrome、Firefox、IE 和 Edge。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-12-04T13:06:13.157

我只是为那些可能和我犯同样错误的人准备了一个插件。我的代码如下：

```
var p = $('html,body');
$( ".info" ).text( "scrollTop:" + p.scrollTop() ); 
```

此代码适用于除 webkits 浏览器（如 chrome 和 safari）之外的所有浏览器，因为该`<html>`标签的 scrollTop 值始终为零或 null。

其他浏览器会忽略它，而 webkit 的浏览器则不会。

最简单的解决方案就是从您的代码中删除 html 标签等瞧：

```
var p = $('body');
$( ".info" ).text( "scrollTop:" + p.scrollTop() ); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-11-16T19:23:42.153

从 html 和 body 标签中删除`height: 100%;`可以解决问题。

原因是您可能已将 100% 设置为 html 和 body 元素的 height 属性值。如果将 html 和 body 元素的 height 属性设置为 100%，则它们的高度等于文档的高度。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-11-12T19:52:11.143

有同样的问题。scrollTop() 适用于某些块而不是文档或正文。要使此方法起作用，您应该为块添加高度和溢出样式：

```
#scrollParag {
    height: 500px;
    overflow-y: auto;
} 
```

进而：

```
var scrolParag = document.getElementById('scrollParag');
 alert(scrolParag.scrollTop); // works! 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-09-15T18:54:19.483

Scroll Top 也总是为我返回 0。我使用它来将焦点集中在页面上的特定元素上。我使用了另一种方法来做到这一点。

document.getElementById("elementID").scrollIntoView();

在移动设备、平板电脑和台式机上工作得很好。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-05-11T05:39:42.680

```
var bodyScrollTop = Math.max(document.scrollingElement.scrollTop, document.documentElement.scrollTop) 
```

应该适用于现代浏览器。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-06-09T11:33:16.570

顺便说一句，您似乎应该使用

```
$("body").scrollTop() 
```

代替

```
$(".some-class").scrollTop 
```

这就是我被卡住的原因。

# excel - 使用自定义列表分别对每一行进行排序

> ID：12788490
> 
> 赞同：2
> 
> 时间：2012-10-08T19:50:17.750
> 
> 标签：excel, customization, sorting, vba

我研究了几个站点两天，并提出了几个接近我需要但不准确的宏。如果我不在正确的地方，有人会指导我去我需要去的地方吗？

我希望有人可以调整我所拥有的东西，这样它就可以工作了。下面是我正在使用的 Excel 行的副本。

MT MD BB AA CC
MT MD AK
MT MD LX A2
MT MD LA SO VL AH PH

A7 LW A1
SC
MT MD GL A1
MT MD
A7 A1 A2
MT MD A1 AH

MT MD A4 AD A7 AK A1 AH PH A2 A7 AH AJ PH

. 我需要使用自定义列表对每一行进行排序：

**MT MD BU ED TI AS CI MP FF NF A1 A2 A7 LX GL CR BA WS**

任何不在列表中但出现在电子表格中的内容都将落在列表的末尾。下面是两个接近但不完全的宏。（我已经对原件进行了修改）

```
Sub test()
ActiveWorkbook.Worksheets("Sheet1").Range("3:100").Sort _
    Key1:=ActiveWorkbook.Worksheets("Sheet1").Range("3:100").Row(2), _
    Header:=xlYes, _
    Orientation:=xlSortRows, _
    MatchCase:=False, _
    SortMethod:=xlPinYin
End Sub     

Sub Macro5()

    Rows("3:30").Select
    ActiveWorkbook.Worksheets("Sheet1").Sort.SortFields.Clear
    ActiveWorkbook.Worksheets("Sheet1").Sort.SortFields.Add Key:=Rows("2:2"), _
        SortOn:=xlSortOnValues, Order:=xlAscending, CustomOrder:= _
        "MT,BU,MD,ED,TI,AS,CI,MP,FF,NF,A1,A2,A7,LX,CR,BA,GL,WS", DataOption:= _
        xlSortNormal
    With ActiveWorkbook.Worksheets("Sheet1").Sort
        .SetRange Rows("3:30")
        .Header = xlGuess
        .MatchCase = False
        .Orientation = xlLeftToRight
        .SortMethod = xlPinYin
        .Apply
    End With

End Sub 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T23:10:02.387

您可能需要单独对行进行排序，请尝试：

```
Dim lRow As Long

Application.ScreenUpdating = False

For lRow = 3 To 30
    With ActiveWorkbook.Worksheets("Sheet1").Sort
        .SortFields.Clear
        .SortFields.Add Key:=.Parent.Rows(lRow & ":" & lRow), SortOn:=xlSortOnValues, Order:=xlAscending, CustomOrder:= _
        "MT,BU,MD,ED,TI,AS,CI,MP,FF,NF,A1,A2,A7,LX,CR,BA,GL,WS", DataOption:=xlSortNormal
        .SetRange .Parent.Rows(lRow & ":" & lRow)
        .Header = xlGuess
        .MatchCase = False
        .Orientation = xlLeftToRight
        .SortMethod = xlPinYin
        .Apply
    End With
Next lRow

Application.ScreenUpdating = True 
```

# mysql - 用大量行快速填充 MySQL

> ID：12788494
> 
> 赞同：8
> 
> 时间：2012-10-08T19:50:31.610
> 
> 标签：mysql

我有一个如下所示的 MySQL 表：

![MySQL 表：状态](../Images/9c45bf0758f4039ad1089fa2753db205.png)

创建结构的 SQL 是：

```
CREATE TABLE `status` (
`id` INT(11) NOT NULL,
`responseCode` INT(3) NOT NULL DEFAULT '503',
`lastUpdate` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

它存储一个唯一`id`的`responseCode`、 和`lastUpdate`。这`responseCode`是一个 HTTP 请求响应代码：404、500、503、200 等。

我有一个 URL 对应于`id`我发出 HTTP 请求的每个 URL，并在此表中记录我发出请求和收到响应的时间。

该脚本对`status`表进行此查询：

```
SELECT id FROM status WHERE lastUpdate < 'XXXX' OR 
(responseCode != 200 AND responseCode != 404) 
ORDER BY id DESC LIMIT 100 
```

我决定无论响应代码如何`XXXX`，都需要刷新比该日期更早的任何日期。此外，如果我没有得到`200`或`404`不管最后`lastUpdate`日期，我想重新尝试 HTTP 请求。我`LIMIT`选择 100 次，因为我一次只运行 100 次，然后我让它休眠一段时间，然后再运行 100 次，依此类推。

无论如何，一切都很好，但我想要做的是提前填充表格，说一个像这样的系列：

```
(1, 503, NOW()), (2, 503, NOW()), (3, 503, NOW()) ... (100000, 503, NOW()) 
```

请注意，只有 ID 在递增，但根据我的需要，它可能不一定从 1 开始。我希望像这样预先填充表格，因为上面的查询可以继续抓取`id`我们需要重新尝试的表格，并且我不想在`status`表格中插入更多内容，因为`id`'s 是有限的并且不会改变（但有很多）。

我尝试使用 JAVA，（尽管 PHP、C# 或其他任何东西是相同的概念，我在这里使用哪种语言并不重要）：

```
PreparedStatement st = conn.prepareStatement("INSERT INTO status VALUES (?,default,default)");

for( int i = 1; i <= 100000; i++ ) {
    st.setInt(1,i);
    st.addBatch();
}

System.out.println( "Running batch..." );
st.executeBatch();
System.out.println( "Batch done!" ); 
```

这将启动插入，但问题是填充表需要大量时间（我没有确切的时间，但它运行了几个小时）。所以，我的问题归结为：是否有一种简单有效的方法来填充具有大量这样行的 MySQL 表？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-08T20:36:34.630

一般来说，您可以使用以下任何一项或多项：

*   启动事务，插入，提交
*   将多个值打包到单个插入查询中
*   在进行插入之前删除任何约束并在批量插入之后恢复约束（可能主键除外，但不太确定）
*   `insert into ... select`合适时使用

第一个（使用事务）最有可能有帮助，但我不确定它是否适用于 myisam 表，使用 innodb 做得很好 - 我只在被迫使用 mysql 时使用那些，我更喜欢 postgresql .

在您的特定情况下，插入 100000 行数据，您可以执行以下操作：

```
INSERT INTO status(id, responseCode, lastUpdate) SELECT @row := @row + 1 as row, 503, NOW() FROM 
(select 0 union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) t,
(select 0 union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) t2, 
(select 0 union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) t3, 
(select 0 union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) t4, 
(select 0 union all select 1 union all select 2 union all select 3 union all select 4 union all select 5 union all select 6 union all select 7 union all select 8 union all select 9) t5, 
(SELECT @row:=0) t6; 
```

在我的机器上测试了这个，得到：

```
Query OK, 100000 rows affected (0.70 sec)
Records: 100000  Duplicates: 0  Warnings: 0 
```

我很确定你不能比 100000 行快得多。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-08T20:27:53.803

如何设置`AUTO_INCREMENT`主键。

然后以您喜欢的方式插入前一百（或一千）行（您的示例或 DocJones 给您的示例）。

然后使用

```
INSERT INTO table SELECT NULL, '503', NOW() FROM table; 
```

……反复几次。这应该使表格每次都变大一倍。

的`NULL`第一个槽`SELECT`确保`AUTO_INCREMENT`踢入和增量`id`。

如果你想让桌子变得更快，你可以做

```
INSERT INTO table SELECT NULL, '503', NOW() FROM table AS t1 CROSS JOIN table t2; 
```

...重复几次，这将使表格的大小增加，前一个大小的两倍 + 前一个大小 (100^2+100) 的幂。

这也允许您自定义插入的值，例如，如果您想创建“随机” `responseCodes`，您可以使用类似的东西`CONCAT(ROUND(1+RAND()*4), '0', ROUND(RAND()*5))`，它将为您提供从 100 到 505 的响应代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T21:24:26.210

PHP 解决方案以 100 个批量加载它们：

```
for ($i = 0; $i < 100000; $i+=100) {
  $vals = implode(', ', 
                  array_map(function($j) { return "($j, default, default)";},
                            range($i, $i+100)));
  mysqli_query($dbh, 'insert into status values ' . $vals) or die mysqli_error($dbh);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T19:56:20.107

您正在创建一个要执行的 LARGE 批处理语句。尝试使用例如将其拆分为较小的包。在循环内每增加 1000 个 i（使用 mod(i) yadddayadda）调用 executeBatch()。这应该加快这个过程：

```
for( int i = 1; i <= 100000; i++ ) {
    st.setInt(1,i);
    st.addBatch();
    if (mod(i,1000)=0) {
       st.executeBatch();
    }
} 
```

# android - 确定 Android 中的 Wi-Fi 可用性

> ID：12788495
> 
> 赞同：1
> 
> 时间：2012-10-08T19:50:36.030
> 
> 标签：android, nullpointerexception, android-wifi, wifimanager

当试图确定 Wi-fi 是否可用时，我的应用程序崩溃了。

我周围有一个 try/catch 块

```
WifiManager wifi = (WifiManager) activity.getSystemService(Context.WIFI_SERVICE); 
```

但它只是存在使应用程序因空指针异常而崩溃。

清单权限：

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" /> 
```

如何确定 Wi-Fi 是否可用？

**编辑**

堆栈跟踪：

```
10-08 20:10:21.820: E/AndroidRuntime(14331): FATAL EXCEPTION: main
10-08 20:10:21.820: E/AndroidRuntime(14331): java.lang.NullPointerException
10-08 20:10:21.820: E/AndroidRuntime(14331):    at com.myapp.ui.FragmentSettingsDetailWireless.loadControls(FragmentSettingsDetailWireless.jav   a:121)
10-08 20:10:21.820: E/AndroidRuntime(14331):    at com.myapp.ui.FragmentSettingsDetailWireless.onActivityCreated(FragmentSettingsDetailWireles    s.java:110)
10-08 20:10:21.820: E/AndroidRuntime(14331):    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:814)
10-08 20:10:21.820: E/AndroidRuntime(14331):    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:998)
10-08 20:10:21.820: E/AndroidRuntime(14331):    at android.app.BackStackRecord.run(BackStackRecord.java:622)
10-08 20:10:21.820: E/AndroidRuntime(14331):    at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1330)
10-08 20:10:21.820: E/AndroidRuntime(14331):    at android.app.FragmentManagerImpl$1.run(FragmentManager.java:417)
10-08 20:10:21.820: E/AndroidRuntime(14331):    at android.os.Handler.handleCallback(Handler.java:605)
10-08 20:10:21.820: E/AndroidRuntime(14331):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-08 20:10:21.820: E/AndroidRuntime(14331):    at android.os.Looper.loop(Looper.java:137)
10-08 20:10:21.820: E/AndroidRuntime(14331):    at android.app.ActivityThread.main(ActivityThread.java:4340)
10-08 20:10:21.820: E/AndroidRuntime(14331):    at java.lang.reflect.Method.invokeNative(Native Method)
10-08 20:10:21.820: E/AndroidRuntime(14331):    at java.lang.reflect.Method.invoke(Method.java:511)
10-08 20:10:21.820: E/AndroidRuntime(14331):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-08 20:10:21.820: E/AndroidRuntime(14331):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-08 20:10:21.820: E/AndroidRuntime(14331):    at dalvik.system.NativeStart.main(Native Method) 
```

**活动变量为 NULL。过错！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:06:55.250

我会看一下[Android 高级培训：管理网络使用情况，检查设备的网络连接](http://developer.android.com/training/basics/network-ops/managing.html)。这是一个关于如何正确检查 Android 设备网络状态的好教程。

在里面，您会找到一种更一般地查询网络状态的方法，然后特别是，您可以检查用户是否在 WiFi 上。

相关代码：

```
ConnectivityManager connMgr = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
NetworkInfo networkInfo = connMgr.getNetworkInfo(ConnectivityManager.TYPE_WIFI); 
boolean isWifiConn = networkInfo.isConnected();
Log.d(DEBUG_TAG, "Wifi connected: " + isWifiConn); 
```

相关权限：

```
android.permission.INTERNET - Allows applications to open network sockets.
android.permission.ACCESS_NETWORK_STATE - Allows applications to access information about networks. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:55:08.617

用您的活动名称替换`activity`上面的代码，或者如果您在活动中，则将其删除。

# c# - 使用 VB.NET 代码访问 Exchange server 2010 代码

> ID：12788498
> 
> 赞同：0
> 
> 时间：2012-10-08T19:50:58.143
> 
> 标签：c#, vb.net, exchange-server, exchange-server-2010

我必须创建一个控制台应用程序。在这个应用程序中，我必须创建不同用户的联系方式。如果我传递的联系人详细信息已经存在，那么我不必创建该联系人，否则我必须创建该联系人并将其保存在主帐户以及相应的用户帐户中。任何人都可以知道什么是最好的和优化的方法。我相信我必须做一些授权和说服逻辑，但我不确定。

# vba - PivotCaches.Add 不匹配错误 - 为什么以前没有发生过？

> ID：12788500
> 
> 赞同：1
> 
> 时间：2012-10-08T19:51:12.600
> 
> 标签：vba, excel, excel-2003, pivot-table

运行以下代码时出现不匹配错误 13。整个代码模块已经使用了一年多，几乎没有变化，我最近没有改变任何东西，而且我是这本工作簿的唯一用户。

**非工作代码：**

```
Private Sub CreateMIAPivots(MIABook As Workbook, MIASheet As Worksheet, MaxRow As Long)

Dim wksPivotSheet As Worksheet
Dim PivotRange As Range

    Set wksPivotSheet = MIABook.Sheets.Add
    wksPivotSheet.Name = "Summary"
    wksPivotSheet.Tab.Color = RGB(255, 0, 0)

    Set PivotRange = MIASheet.Range("A1:Y" & MaxRow)
    With MIABook.PivotCaches.Add(xlDatabase, PivotRange) 'Error sets here
    'More code below 
```

`MaxRow`是可变的，但我已经根据大约 600 到大约 7,000 行的文件对其进行了检查，`Range`如果我尝试以任何其他方式与之交互，则该对象正在生成有效的引用。

我在这里回顾了一些相关的问题：

*   [我只在 2003 年工作，无论如何，错误是不同的。](https://stackoverflow.com/q/11854203/698590)
*   [`PivotCaches`在尝试创建新工作簿之前，我已确认工作簿中没有其他内容。](https://stackoverflow.com/q/8450450/698590)
*   [我已经使用此处接受的解决方案成功完成了这项工作：使用命名范围（请参阅下面的后续代码）](https://stackoverflow.com/q/10423071/698590)

**变通代码：**

```
Private Sub CreateMIAPivots(MIABook As Workbook, MIASheet As Worksheet, MaxRow As Long)

Dim wksPivotSheet As Worksheet
Dim pc As PivotCache
Dim lVBAVer As Long
Dim PivotRange As Range

    lVBAVer = CLng(Application.Version)

    Set wksPivotSheet = MIABook.Sheets.Add
    wksPivotSheet.Name = "Summary"
    wksPivotSheet.Tab.Color = RGB(255, 0, 0)

    Set PivotRange = MIASheet.Range("A1:Y" & MaxRow)

    MIABook.Names.Add Name:="PivotRange", RefersTo:=PivotRange

    'Using answer from https://stackoverflow.com/a/11868231/698590 (StackOverflow) 
    'as a guide for version checking. Original answer of 
    'CLng(Application.VBE.Version) did not work here.
    #If lVBAVer <= 11 Then
        Set pc = MIABook.PivotCaches.Add(xlDatabase, "PivotRange")
    #Else
        Set pc = MIABook.PivotCaches.Create(xlDatabase, "PivotRange")
    #End If
    With pc
    'More code below 
```

我现在的问题是*为什么*上述解决方案是必要的？似乎我不是唯一一个`PivotCaches`像我最初一样在使用时突然停止完美运行的代码的人。那么这里真正的根本原因是什么？是什么导致代码停止运行？

我想知道，如果可能的话，我可以防止将来出现意外错误。我知道答案可能在于我在代码/工作簿的其他地方所做的事情（此处未引用），但我无法终生追踪发生了什么变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:21:35.513

因此，您已经知道问题与此有关： http: [//answers.microsoft.com/en-us/office/forum/office_2010-customize/pivotcache-type-mismatch-error-when-65536-rows/0827889e- b671-e011-8dfc-68b599b31bf5?msgId=4e3a2b20-7a72-e011-8dfc-68b599b31bf5](http://answers.microsoft.com/en-us/office/forum/office_2010-customize/pivotcache-type-mismatch-error-when-65536-rows/0827889e-b671-e011-8dfc-68b599b31bf5?msgId=4e3a2b20-7a72-e011-8dfc-68b599b31bf5)

原因似乎是数据透视表的 VBA 语法/用法从 2003 年更改为 2007/2010 年。

所以它使用这个通用语法在工作簿中设置一个命名范围：

```
MIABook.Names.Add Name:="PivotRange", RefersTo:=PivotRange 
```

这部分代码：

```
#If  lVBAVer <= 11 Then 
    Set pc = MIABook.PivotCaches.Add(xlDatabase, "PivotRange") 
#Else 
    Set pc = MIABook.PivotCaches.Create(xlDatabase, "PivotRange") 
#End If 
```

正在检查 lVBAver 是否小于或等于 11，如果小于 - 那么它使用以下语法：

```
Set pc = MIABook.PivotCaches.Add(xlDatabase, "PivotRange") 
```

如果是新版本，则使用以下语法：

```
Set pc = MIABook.PivotCaches.Create(xlDatabase, "PivotRange") 
```

有时你只需要接受微软并不完美（哈哈讽刺），他们像其他公司一样做愚蠢的事情。无论如何，这是我的理论。祝你好运。

# css - 样式 或填充/边距元素

> ID：12788503
> 
> 赞同：22
> 
> 时间：2012-10-08T19:51:18.657
> 
> 标签：css, html

这些天来使用 HTML5 和 CSS3，`<br>`当可以使用边距/填充时，标签的使用是否令人不悦？

编辑：这是关于我的用例的 div 元素之间的间距，但也欢迎一般最佳实践建议。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-10-08T19:54:25.487

实际上，围绕它的使用有非常明确的规则，可以追溯到[HTML 2.0](https://www.rfc-editor.org/rfc/rfc1866.txt)首次引入的时代：

> 该`<BR>`元素指定单词之间的换行符（参见 6，“字符、单词和段落”）。例如：
> 
> ```
> <P> Pease porridge hot<BR>
> Pease porridge cold<BR>
> Pease porridge in the pot<BR>
> Nine days old. 
> ```

`<br>`元素本身从未打算用于控制边距/填充。尽管他们`clear`在 HTML 3.2 中引入了一个表示属性来处理浮动图像之类的事情，但它很快在 HTML 4 和 XHTML 1 中被弃用，取而代之的是 CSS。那是差不多 15 年前的事了，所以这真的不是什么新鲜事。

在[HTML5](http://www.w3.org/TR/html5/text-level-semantics.html#the-br-element)中，他们通过示例（并且[该](http://www.w3.org/TR/html-markup/br.html#br-constraints)[属性已过时](http://www.w3.org/TR/html-markup/br.html#br-constraints)`<br>`）更清楚地说明了不用于演示或布局的内容：[`clear`](http://www.w3.org/TR/html-markup/br.html#br-constraints)

> `br`元素只能用于实际上是内容一部分的换行符，如诗歌或地址。
> 
> > 以下示例是该`br`元素的正确用法：
> > 
> > ```
> > <p>P. Sherman<br>
> > 42 Wallaby Way<br>
> > Sydney</p> 
> > ```
> 
> `br`元素不得用于分隔段落中的主题组。
> 
> > 以下示例不符合标准，因为它们滥用了该`br`元素：
> > 
> > ```
> > <p><a ...>34 comments.</a><br>
> > <a ...>Add a comment.</a></p>
> > <p><label>Name: <input name="name"></label><br>
> > <label>Address: <input name="address"></label></p> 
> > ```
> > 
> > 以下是上述的替代方案，它们是正确的：
> > 
> > ```
> > <p><a ...>34 comments.</a></p>
> > <p><a ...>Add a comment.</a></p>
> > 
> > <p><label>Name: <input name="name"></label></p>
> > <p><label>Address: <input name="address"></label></p> 
> > ```

因此`<br>`，为了布局目的而使用 CSS 边距来代替 CSS 一直是不受欢迎的，至少编写规范的人是这样。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-08T19:52:19.543

取决于您是否喜欢使用 line-height 或 margin/padding。

# android - 捕获的照片扫描android

> ID：12788506
> 
> 赞同：-2
> 
> 时间：2012-10-08T19:51:29.590
> 
> 标签：android, android-camera, photo, qr-code

如何扫描相机拍摄的照片并获取拍摄的文字或数字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:53:48.803

您应该阅读 OCR：[http ://en.wikipedia.org/wiki/Optical_character_recognition](http://en.wikipedia.org/wiki/Optical_character_recognition)

找到一个适用于 android 的库并将其集成到您的项目中。

# crystal-reports - 如何将 Crystal Report 数据源从 Jet DB 表更改为 CSV 平面文件？

> ID：12788511
> 
> 赞同：2
> 
> 时间：2012-10-08T19:51:40.500
> 
> 标签：crystal-reports

我们目前有几个 Crystal Reports (CR) 8.5 报告模板，我们希望将数据源从 Jet DB 表更改为 CSV 平面文件。这是我们使用现代 CR 13 运行时获取应用程序的项目的一部分。我们遇到的问题是，当我们使用 Visual Studio 2010 IDE 将报告的数据源从 Jet DB 表更改为新的 CSV 平面文件时，嵌入在报告模板中的 DB 字段正在被删除。

我们希望在报告模板中指向新型数据源（CSV 平面文件），而不会丢失报告中现有的嵌入数据字段。换句话说，我们使用 CR IDE 将当前 DB 数据字段重新映射到 CSV 文件中的新字段。我们真的希望避免在将报告指向平面文件后重新嵌入然后重新格式化数据字段。

到目前为止，我们还没有找到一种方法来做到这一点。我们的谷歌搜索在这个主题上是空的。感谢您提供的任何帮助。

# asp.net - 使用Log4net通过smtp发送邮件，邮件一直收不到

> ID：12788513
> 
> 赞同：1
> 
> 时间：2012-10-08T19:51:47.317
> 
> 标签：asp.net, logging, smtp, log4net, error-logging

要为我的 WebAPI 应用程序执行错误日志记录，我使用的是 Log4net。我有两个 log4net 附加程序，一个 SmtpEmail 附加程序，它使用另一个配备 smtp 的服务器来发送错误通知电子邮件，以及一个指向本地 .txt 文件的 FileAppender。我的问题是我的 FileAppender 正在按预期记录我的 log.txt 文件中的所有内容，但是 SmtpEmail 附加程序无法正常工作。没有收到电子邮件，也没有收到任何错误消息。我注意到 DOMConfigurator.Configure() 需要很长时间才能返回，并且在它返回之后，我经常会留下许多相同的运行进程继续返回。关于出了什么问题的任何想法，或者我可以做些什么来监控对 smtp 服务器（以下称为“baz.bar.com”）的调用是否通过？

这是 .config 文件中相关的 log4net 代码：

```
<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />

<log4net>
<appender name="FileAppender" type="log4net.Appender.FileAppender">
  <file value="log-file.txt" />
  <appendToFile value="true" />
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
  </layout>
</appender>
<appender name="SmtpAppender" type="log4net.Appender.SmtpAppender">
  <to value="foo@bar.com" />
  <from value="foo@bar.com" />
  <subject value="Write to AX Error" />
  <smtpHost value="baz.bar.com" />
  <bufferSize value="1" />
  <lossy value="false" />
  <evaluator type="log4net.Core.LevelEvaluator">
    <threshold value="WARN"/>
  </evaluator>
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%newline%date [%thread] %-5level %logger [%property{NDC}] - %message%newline%newline%newline" />
  </layout>
</appender>
<root>
  <level value ="DEBUG" />
  <appender-ref ref ="FileAppender"/>
  <appender-ref ref ="SmtpAppender"/>
</root> 
```

我正在使用统一。我怀疑这是问题所在，因为我的 FileAppender 正在工作，但无论如何这里是代码：

```
 private static IUnityContainer BuildUnityContainer()
    {
        var container = new UnityContainer();

        container.RegisterType<ILog>().RegisterInstance(LogManager.GetLogger(typeof(ILog)));

        return container;
    }

    private ILog _log;

    public LERService(ILog log)
    {
        _log = log;
    } 
```

这是我在 LERService 的函数中对日志的调用：

```
 catch(Exception e)
        {
            _log.Fatal("Cannot submit to client with following exception: " + e.Message, e);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:58:19.460

所以事实证明有一些我没有提供的授权。

此链接提供了一种检查电子邮件是否正在发送的方法。 [http://david.gardiner.net.au/2008/11/log4nets-smtpappender-with-multiple.html](http://david.gardiner.net.au/2008/11/log4nets-smtpappender-with-multiple.html)

# list - haskell - 将列表列表转换为一个列表

> ID：12788514
> 
> 赞同：9
> 
> 时间：2012-10-08T19:51:54.590
> 
> 标签：list, function, haskell

如果我有一个列表列表，比如说`[[1,2,3],[1,2,3],[1,2,3]]`，Haskell 有什么办法可以将它变成只有 1 个列表，比如`[1,2,3,1,2,3,1,2,3]`？

提前致谢！

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-08T19:53:48.170

Concat 做你想做的事：

```
concat [[1,2,3],[1,2,3],[1,2,3]] 
```

以后要找到这类功能，可以使用hoogle [http://www.haskell.org/hoogle/](http://www.haskell.org/hoogle/)

您可以搜索类型 - 您需要的功能是`[[Int]] -> [Int]`，因此您可以进行[此搜索](http://www.haskell.org/hoogle/?hoogle=%5b%5bInt%5d%5d+-%3E+%5bInt%5d)。顶层函数是 concat。

我应该提到事实上

```
concat :: [[a]] -> [a] 
```

所以它适用于任何列表列表，您也可以很高兴地使用该类型搜索 hoogle。不过，Hoogle 足够聪明，可以理解哪些类型与您的要求非常接近。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-08T19:54:24.990

有一些方法可以做到这一点，您可以使用列表推导，例如：

```
[y | x <- [[1,2,3],[1,2,3],[1,2,3]], y <- x] 
```

或加入函数，实际上，同样的方式：

```
import Control.Monad (join)
join [[1,2,3],[1,2,3],[1,2,3]] 
```

或连接函数：

```
concat [[1,2,3],[1,2,3],[1,2,3]] 
```

或 msum（与 concat 相同）：

```
import Control.Monad (msum)
msum [[1,2,3],[1,2,3],[1,2,3]] 
```

或 mconcat（与 concat 相同）：

```
import Data.Monoid (mconcat)
mconcat [[1,2,3],[1,2,3],[1,2,3]] 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-08T19:53:48.230

直接回答

```
> concat [[1,2,3],[1,2,3],[1,2,3]]
[1,2,3,1,2,3,1,2,3] 
```

每当您想搜索任何功能时，都应该尝试[hoogle 。](http://www.haskell.org/hoogle/?hoogle=%5B%5Ba%5D%5D%20-%3E%20%5Ba%5D)有时类型足以获取有关您需要的功能的信息。

# gcc - gcc 起始地址

> ID：12788515
> 
> 赞同：0
> 
> 时间：2012-10-08T19:51:57.513
> 
> 标签：gcc, embedded, arm, bootloader, cortex-m3

我目前正在尝试使用 gcc-arm-embedded 离线编译 mbed 项目，但我想更改起始地址，因为该程序旨在与引导加载程序一起使用，因此最终必须从 0x10000 运行。我已将我的项目导出为 GCC-ARM-EMBEDDED，并且能够使用 gcc 构建项目。但是我不知道如何将起始地址指定为 0x10000。我曾尝试更改LPC1768.ld 脚本，将FLASH 的ORIGIN 更改为0x10000，但它似乎没有做任何事情。

```
MEMORY
{
  FLASH (rx) : ORIGIN = 0x00010000, LENGTH = 0x70000
  RAM (rwx) : ORIGIN = 0x100000C8, LENGTH = 0x7F38

  USB_RAM(rwx) : ORIGIN = 0x2007C000, LENGTH = 16K
  ETH_RAM(rwx) : ORIGIN = 0x20080000, LENGTH = 16K
} 
```

Makefile 或其他地方是否有一个选项可以帮助更改程序的起始地址，以便当我从引导加载程序跳转到地址 0x10000 时它可以正确运行？

**编辑：**

我想我明白了我需要达到的目标，这要归功于这几个回应，但由于某些原因，我无法让它发挥作用。Mbed 不会导出 startup_LPC17xx.s 文件，所以我尝试使用 CMSIS 中的文件，但没有成功。我想知道我是否真的需要更改启动代码，因为过程如下：

*   引导加载程序在 0x0000 处运行
*   Bootloader 将进行一些检查，最终将运行位于 0x10000 的用户应用程序。引导加载程序实际上在跳转到 0x10000 之前移动了向量表。这个用户应用程序是我正在尝试使用 gcc 构建的用户应用程序，并且不会在启动时运行，仅在引导加载程序自行启动后运行。不确定这是否清楚，但我认为只有更改链接器脚本才能工作......但事实并非如此。

我已将此部分地址更改为 0x10000 的链接器脚本的详细信息：

> 部分{

```
.text : 
{
    *startup_LPC17xx.o 
    KEEP(*(.isr_vector))
    *(.text*)

    KEEP(*(.init))
    KEEP(*(.fini))

    /* .ctors */
    *crtbegin.o(.ctors)
    *crtbegin?.o(.ctors)
    *(EXCLUDE_FILE(*crtend?.o *crtend.o) .ctors)
    *(SORT(.ctors.*))
    *(.ctors)

    /* .dtors */
    *crtbegin.o(.dtors)
    *crtbegin?.o(.dtors)
    *(EXCLUDE_FILE(*crtend?.o *crtend.o) .dtors)
    *(SORT(.dtors.*))
    *(.dtors)

    *(.rodata*)

    KEEP(*(.eh_frame*))
} > FLASH

.ARM.extab : etc.. 
```

**EDIT2：**我在我的脚本中添加了 *startup_LPC17xx.o，现在这似乎工作正常 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T23:33:51.503

在链接器文件中，指定从 0x10000 开始的部分。然后在您的 crt0 或类似的启动代码中，您需要将您的重置条目处理程序定义为驻留在本节中，以便链接器将其放在那里。这可以通过一种`.section`或`#pragma`类似的机制。您可以通过查看链接器生成的映射文件来验证它是否将您的重置处理程序放置在 0x10000。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T23:07:35.927

> 我曾尝试更改LPC1768.ld 脚本，将FLASH 的ORIGIN 更改为0x10000，但它似乎没有做任何事情。

检查您的链接器设置，是否使用正确的链接器脚本。在此处更改 ORIGIN 和大小*有效*（LPC1768 with arm-none-eabi-gcc）。请注意，生成的程序将*不再*在裸机上执行，因为向量表将位于错误的位置：您的引导加载程序必须到位才能启动它。

请注意，您的引导加载程序不能跳转到，`0x10000`而是从表中加载复位向量`0x10004`到 PC。`0x10000`当您从之前加载 MSP（主堆栈指针）时获得奖励积分。

# excel - 将单元格的内容括在括号中，ms excel，格式

> ID：12788520
> 
> 赞同：1
> 
> 时间：2012-10-08T19:52:08.220
> 
> 标签：excel, numbers, format, excel-2010, parentheses

我想格式化我的 MS excel 单元格的内容，以便每个数字（所有条目都是数字）括在括号中，如下所示：

```
[-23.293], [23.394] 
```

我使用自定义格式并将格式指定为`"["00.000"]"`. 但是，这会产生如下条目：

```
-[23.293], [23.394] 
```

我无法弄清楚如何解决这个问题。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T19:57:34.803

将自定义格式指定为`"["00.000"]";"["-00.000"]"`. 第二个参数是负数的显示方式。如果添加第三个选项，则为 0 值。

# nuget - NuGet 包还原在构建服务器上不起作用

> ID：12788521
> 
> 赞同：21
> 
> 时间：2012-10-08T19:52:09.547
> 
> 标签：nuget, nuget-package

我已经在我的解决方案上设置了 NuGet 包还原，它在我的本地机器上运行良好。我按照此处提供的说明进行操作：

[http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)

我遇到的问题是在我的构建服务器上发生以下错误：

*默认情况下禁用包还原。要同意，请打开 Visual Studio 选项对话框，单击包管理器节点并选中“允许 NuGet 在构建期间下载丢失的包”。您还可以通过将环境变量“EnableNuGetPackageRestore”设置为“true”来表示同意。*

不幸的是，我无法访问构建服务器，因为它是在场外控制的，因此无法更新环境变量。有没有其他方法可以解决这个问题？我可以添加到解决方案文件或类似文件中以允许包恢复的任何内容吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-08T22:07:07.347

试试这个包：

```
Install-Package NuGetEnablePackageRestore 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-10-30T20:02:46.030

NuGet 可以对其行为使用本地设置，如果您不能 100% 确定服务器的配置方式，则可能无法预测。

我更喜欢将 NuGet 设置放在受`<sln root>/.nuget/NuGet.targets`版本控制的文件中并放在一个位置。我通过 3 次快速编辑得到了这个，编辑后 `<sln root>/.nuget/NuGet.targets`它们应该如下所示：

**变化1**：

```
<!-- Enable the restore command to run before builds -->
<RestorePackages Condition="  '$(RestorePackages)' == '' ">true</RestorePackages> 
```

**变化 2**：

```
<!-- Determines if package restore consent is required to restore packages -->
<RequireRestoreConsent Condition=" '$(RequireRestoreConsent)' != 'false' ">false</RequireRestoreConsent> 
```

> 我的评论：笨拙的逻辑，但认为“*要求同意不等于假必须为真*”（原文）因为“*要求同意等于真必须为真”（翻译）并且将最后一部分更改为“**假*”是有意义的（编辑）

**更改 3**：我还添加/取消注释`<PackageSource ... >`标记以删除对

```
<ItemGroup Condition=" '$(PackageSources)' == '' ">
    <PackageSource Include="https://nuget.org/api/v2/" />        
</ItemGroup> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-23T05:34:13.723

当我尝试使用 Jenkins 构建我的一个项目时遇到了这个问题，并通过简单地将`.nuget\NuGet.targets`文件中的一个值从更改`true`为`false`.

我变了：

```
<!-- Determines if package restore consent is required to restore packages -->
<RequireRestoreConsent Condition=" '$(RequireRestoreConsent)' != 'false' ">true</RequireRestoreConsent> 
```

至

```
<!-- Determines if package restore consent is required to restore packages -->
<RequireRestoreConsent Condition=" '$(RequireRestoreConsent)' != 'false' ">false</RequireRestoreConsent> 
```

请注意元素值已更改。希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-16T00:57:43.400

在 %appdata%\NuGet\NuGet.Config 添加以下部分

```
 <packageRestore>
    <!-- Package Restore and MSBuild-Integrated Package Restore -->
    <add key="enabled" value="True" />

    <!-- Automatic Package Restore in Visual Studio -->
    <add key="automatic" value="True" />
  </packageRestore> 
```

完整示例

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <activePackageSource>
    <add key="nuget.org" value="https://www.nuget.org/api/v2/" />
  </activePackageSource>
  <packageRestore>
    <!-- Package Restore and MSBuild-Integrated Package Restore -->
    <add key="enabled" value="True" />

    <!-- Automatic Package Restore in Visual Studio -->
    <add key="automatic" value="True" />
  </packageRestore>
</configuration> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T20:00:47.003

我可能可以尝试在 .nuget\NuGet.targets 文件中将 RestorePackages 属性设置为 true：

```
<RestorePackages Condition="  '$(RestorePackages)' == '' ">true</RestorePackages> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-23T13:16:40.787

对于遇到此问题的任何人，正在寻找一种在构建服务器上恢复包的方法，[NuGet Package Restore](https://docs.nuget.org/consume/package-restore)很好地概述了当前选项。

我选择使用*命令行包还原*方法。就像发出以下命令行一样简单：

```
C:><path to nuget.exe> restore <path to solution.sln> 
```

nuget.exe 可以从[https://docs.nuget.org/consume/installing-nuget](https://docs.nuget.org/consume/installing-nuget)获得。我使用*了 Command-Line Utility Latest 3.X*版本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-04T06:38:13.690

运行此命令以修复 NuGet 启用包

`Install-NuGetEnablePackageRestoreFix`

然后在运行启用命令之后

`Install-Package NuGetEnablePackageRestore`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-10T09:10:51.730

安装包 NuGetEnablePackageRestore

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-09-10T13:44:51.003

- 转到工具 -> 库包管理器 -> “包还原” -> 取消选中“允许 NuGet 下载丢失的包”和“自动检查...”

*   重建解决方案

*   清洁解决方案

*   现在选中“允许 NuGet 下载丢失的包”和“自动检查...”

*   重建解决方案

# ruby-on-rails - Rails 后处理数据的最佳实践

> ID：12788528
> 
> 赞同：1
> 
> 时间：2012-10-08T19:52:48.843
> 
> 标签：ruby-on-rails

我对 Rails 很陌生，我开始学习 MVC 框架和 RESTful 架构背后的概念。一个对我来说一直是灰色地带的问题是，后处理数据背后的逻辑可能最好由模型、视图还是控制器来处理？直觉上，它属于控制器对我来说是有意义的，但我不确定什么被认为是最佳实践。例如，如果我有一个资源学生，并且我想通过将他们的总分相加并除以可能的总分来显示他们的最终成绩，我应该在哪里计算？如果我想计算班级平均值怎么办？还是他们的 GPA？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:15:07.487

我倾向于遵循 Fat Model Skinny Controller 的口头禅。计算值应该是模型中的方法。您应该使用实例方法来计算单个学生的成绩，并使用班级方法来计算全班平均成绩。

```
Class Student < ActiveRecord::Base

  POSSIBLE_POINTS = 100

  def grade
     points / POSSIBLE_POINTS
  end

  def self.class_averags
    students = all #or use where to filter results
    total = students.inject(0){ |total, student| total + student.grade }
    total / students.size
  end

end 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:16:49.617

由于模型处理所有业务逻辑，因此您的所有计算都应放入模型中。`Controller`作为请求此类数据的用户和视图之间的层，将执行来自 的方法`Model`并将检索到的数据分配给稍后将用于`Views`显示该数据的变量。此外，最好使用诸如[sidekiq 之](http://mperham.github.com/sidekiq/)类的 gem以及[在](https://github.com/javan/whenever)预定的后台 rake 作业中计算统计数据。

# php - php 循环浏览动态创建的博客页面

> ID：12788531
> 
> 赞同：1
> 
> 时间：2012-10-08T19:53:00.270
> 
> 标签：php, dynamic, blogs

我目前正在为我正在构建的网站从头开始构建博客，因为我的客户要求我这样做，而不是使用简单的库。每个帖子都是一个动态创建的页面，文件名是创建日期（我已确保解决每天发布多个帖子的问题）。

问题是我不知道如何制作“下一篇文章”按钮。“上一篇文章”按钮不会有问题，因为我可以将它链接到当前帖子创建期间的最新帖子。我在博客的数据库中的表如下：

```
 num - auto increment post number
    date - date posted
    src - page location 
```

我可以将博客重建为完全服务器端的，并且只为博客提供一个页面，该页面将循环浏览每篇文章。不过，我真的不想这样做，因为您无法向某人发送指向单个博客文章的直接链接。我的另一个想法是根据帖子编号重命名每个页面，但是如果我们不得不删除帖子，那将行不通。

我真的不知道该怎么办。我的解决方案都不是最优的，它们都会在未来造成问题。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T20:28:00.323

你写：

> 我可以将博客重建为完全服务器端的，并且只为博客提供一个页面，该页面将循环浏览每篇文章。不过，我真的不想这样做，因为您无法向某人发送指向单个博客文章的直接链接。

我强烈建议使用数据库解决方案，而不是创建包含博客内容的静态文件。从长远来看，它更加灵活。如果您想删除帖子、编辑帖子、移动帖子，如果一切都可以轻松访问，那么它会更容易访问。

您提出的无法直接链接到博客文章的问题可以很容易地规避：在您的 URL 中使用 GET 变量。如果你有一个 PHP 页面来显示博客文章，比如 displaypost.php，你可以在末尾添加一个变量来告诉页面要显示*哪个*文章。您的网址可能是：yoursite.com/displaypost.php?postid=12

这也将使您更容易链接到上一个和下一个帖子的问题；只需检查数据库下一个 id 是什么，高于当前一个（或一个低一个）。

在我看来，您不可避免地会在以后的某个地方切换到数据库驱动的解决方案——而不是迟早，以防止不得不做两次事情。

# javascript - 我怎样才能在前面画一个图层，但让它在后面可以选择？

> ID：12788533
> 
> 赞同：4
> 
> 时间：2012-10-08T19:53:00.713
> 
> 标签：javascript, html, css

想想 Google Chrome 的“检查元素”。当用户将鼠标悬停在开发人员工具中的一行上时，该元素在屏幕上“突出显示”。我正在尝试复制相同的功能，只是当用户将鼠标悬停在该元素上而不是从列表中时，该元素可能会突出显示。

我的问题是：当我突出显示元素时（通过创建一个具有与原始元素相同尺寸并定位在与原始元素相同位置的半透明背景颜色的 div），必须将 div 绘制得高于该元素（为了可见。）但是，在某些情况下，应该可以突出显示子元素，“突出显示” div 位于顶部，从而阻止它们被选择。

某些元素将具有背景图像或颜色，从而阻止突出显示。此外，标记可以包含任意数量的具有不同 z-index 值的元素。我将更新我的问题以反映这些限制。

如果这是不可能的，我正在寻找有关解决方法或替代方案的任何建议。

这是一个[小提琴](http://jsfiddle.net/BU27J/7/)来说明我的意思。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:00:23.107

您可以使用 CSS3 `pointer-events:none;`：http: [//jsfiddle.net/Shmiddty/BU27J/9/](http://jsfiddle.net/Shmiddty/BU27J/9/)

或者，您可以使用`z-index:-1;`，但如果您的“突出显示”元素有自己的背景，您将看不到突出显示的 div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:57:03.427

您需要设置高亮元素的 zIndex ：

```
div.style.width = this.offsetWidth + 'px';
div.style.height = this.offsetHeight + 'px';
div.style.zIndex = -1; // this puts it behind everything 
```

这是您[更新的 jsFiddle](http://jsfiddle.net/BU27J/8/)

或者，如果这与背景中断，您可以使用：

```
div.style.pointerEvents = 'none'; 
```

# ruby-on-rails - 如何在 Ruby / ROR 中取消设置变量？

> ID：12788536
> 
> 赞同：4
> 
> 时间：2012-10-08T19:53:11.867
> 
> 标签：ruby-on-rails, ruby

> **可能重复：**
> [在 Ruby 中取消定义变量](https://stackoverflow.com/questions/2011654/undefine-variable-in-ruby)

在 php 中，我可以执行以下操作：

```
 $myVariable = 'foo';
    echo $myVariable;
    unset( $myVariable ); 
```

我怎样才能在红宝石土地上做基本相同的事情？

* * *

## 回答 #1

> 赞同：-5
> 
> 时间：2012-10-08T19:57:15.157

您可以将其分配为零值。示例： your_variable = "yourname" 现在，当您想“取消设置”它时，您可以执行 your_variable = nil

# c++ - 派生类的 push_back shared_ptr

> ID：12788538
> 
> 赞同：0
> 
> 时间：2012-10-08T19:53:34.600
> 
> 标签：c++, containers, shared-ptr

我无法理解我的代码发生了什么：为什么我收到“没有匹配函数调用 push_back”错误。我只能猜测这是一个新的错误...

```
int main(){
  typedef std::tr1::shared_ptr<Base> Base_p;
  typedef std::vector<Base_p> VectorPointers_t;

  std::tr1::shared_ptr<Derived> myDer01(Derived); 
  VectorPointers_t myVector = VectorPointers_t();
  myVector.push_back(myDer01);  
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T19:57:47.337

试试这个：

```
VectorPointers_t myVector;

myVector.push_back(Base_p(new Derived)); 
```

* * *

您的代码中有一个大错误：声明的行`myDer01`实际上声明了一个*函数*而不是一个变量。但即使你写了`(Derived())`而不是`Derived`它也是错误的，因为你不能从一个对象构造一个共享指针——只能从一个指针！所以你真的很想说`new Derived`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-08T19:58:31.950

shared_ptr 是一个类模板，每次使用不同参数调用该模板都会产生一个单独的类。解决方案是只创建指向基类的共享指针。

# javascript - Onkeypress 输入事件未触发

> ID：12788554
> 
> 赞同：0
> 
> 时间：2012-10-08T19:54:36.770
> 
> 标签：javascript

我的 onkeypress 事件在我网站的搜索栏上不起作用。这是我的 javascript 和 html 代码：

```
window.onload = function() {
    document.getElementById("SearchText").value = getParameterByName("s");

    var a = document.getElementById("SearchLink");

    a.onclick = function() {
        search();
    }
}

function search() {
    var searchResultsUrl = "/search/";
    document.location.href = searchResultsUrl + "?s=" +
    document.getElementById("SearchText").value;
    return false;
}

function getParameterByName(name) {
    var match = RegExp('[?&]' + name + '=([^&]*)')
        .exec(window.location.search);

    return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
} 
```

这是html代码：

```
<input type="text" id="SearchText" onkeypress="if(SearchText.keyCode==13)search()" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T20:03:39.383

文本框没有`keyCode`属性 - 这是事件对象的属性。试试这个。

HTML：

```
<input type="text" id="SearchText" /> 
```

JS：

```
window.onload = function() {
    var textbox = document.getElementById("SearchText");
    textbox.value = getParameterByName("s");

    ... snip ...

    textbox.onkeypress = function (e) {
        if (e.keyCode === 13) {
            search();
        }
    };
}

... snip ... 
```

[固定的小提琴。](http://jsfiddle.net/jbabey/mgvPs/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:08:21.107

onkeypress scriptlet 中的`SearchText`变量将未定义。我建议在 Javascript 中定义您的事件处理程序，如下所示：

```
SearchTextbox = document.getElementById("SearchText");
SearchTextbox.onkeypress = function(evt) {
    if (evt.keyCode === 13) {
        // Handle key press event here
    }
} 
```

供你参考：

键盘事件：[https ://developer.mozilla.org/en-US/docs/DOM/KeyboardEvent](https://developer.mozilla.org/en-US/docs/DOM/KeyboardEvent)

element.onkeypress：[https ://developer.mozilla.org/en-US/docs/DOM/element.onkeypress](https://developer.mozilla.org/en-US/docs/DOM/element.onkeypress)

编辑：`event`按照建议更改参数名称。

# php - 如何使用 PHP 将 JPEG 转换为 Flash 视频？

> ID：12788557
> 
> 赞同：-3
> 
> 时间：2012-10-08T19:55:02.027
> 
> 标签：php, flash, video, jpeg

> **可能重复：**
> [如何使用 imagemagik 和 php 将一系列 jpeg 转换为 flv？](https://stackoverflow.com/questions/8404427/how-to-convert-series-of-jpegs-to-flv-using-imagemagik-and-php)

甚至可以将一批 JPEG 图像转换为 Flash 视频吗？

如果是这样，关于我将如何开始的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:10:26.317

您可以使用[SWFBitmap](http://php.net/manual/en/swfbitmap.construct.php)将图像导入电影[使用 PHP Ming](http://www.php.net/manual/en/book.ming.php)函数到 [SWFMovie]

例子

```
$img = new SWFBitmap(file_get_contents('test.jpg'));

$s = new SWFShape();
$imgf = $s->addFill($img);
$s->setRightFill($imgf);
$s->movePenTo(0, 0);
$s->drawLineTo($img->getWidth(), 0);
$s->drawLineTo($img->getWidth(), $img->getHeight());
$s->drawLineTo(0, $img->getHeight());
$s->drawLineTo(0, 0);

$m = new SWFMovie();
$m->setDimension($img->getWidth() * 2, $img->getHeight() * 2);
$is = $m->add($s);
$is->moveTo($img->getWidth() / 2, $img->getHeight() / 2);

for($i = 0; $i < 10; $i ++) {
    $is->skewx(0.02);
    $is->skewy(- 0.03);
    $m->nextframe();
}

$m->save('image.swf'); 
```

图像幻灯片放映

*   [创建一个 swf 幻灯片](http://www.navioo.com/php/tutorials/Create_a_swf_slideshow_832.html)
*   [jpg 幻灯片 2.0 版](http://www.gazbming.com/getexample.php?id=3)

# java - Java 错误“线程“主”java.lang.NullPointerException 中的异常”

> ID：12788560
> 
> 赞同：0
> 
> 时间：2012-10-08T19:55:18.960
> 
> 标签：java

错误：“com.vipgamming.Frytree.Game.main(Game.java:47) 处的线程“主”java.lang.NullPointerException 中的异常”

我不是一个很好的程序员。只是说英语不好。

游戏.java：

```
package com.vipgamming.Frytree;

import java.awt.Canvas;
import java.awt.Dimension;

import javax.swing.JFrame;

public class Game extends Canvas implements Runnable {

private static final long serialVersionUID = 1L;
public static int width = 300;
public static int height = width /16 * 9;
public static int scale = 3;

private Thread thread;
private JFrame frame;
private boolean running = false;

public Game() {
    Dimension size = new Dimension(width * scale, height * scale);
    setPreferredSize(size);
}

public synchronized void start() {
    running = true;
    thread = new Thread(this, "Display");
    thread.start();
}

public synchronized void stop() {
    running = false;
    try {
        thread.join();
    }catch (InterruptedException e) {
        e.printStackTrace();
    }
}

public void run() {
    while (running) {
            System.out.println("FryTree...Loading...");
        }
    }

    public static void main(String [] args) {
        Game game = new Game();
        game.frame.setResizable(true);
        game.frame.setTitle("Frytree");
        game.frame.add(game);
        game.frame.pack();
        game.frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        game.frame.setLocationRelativeTo(null);
        game.frame.setVisible(true);

        game.start();
    }
} 
```

抱歉，我不明白如何发布代码。（不是英语。葡萄牙语）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T19:57:56.303

您需要在使用它之前实例化框架：

```
game.frame = new JFrame();
game.frame.setResizable(true);
... 
```

你也可以把它放在构造函数中：

```
public Game() {
 this.frame = new JFrame();
 Dimension size = new Dimension(width * scale, height * scale);
 setPreferredSize(size);
} 
```

如果中定义的设置`main`每次都相同，那么您可以将整个部分分解为构造函数，而不仅仅是创建一个空白。如果没有，你总是可以像这样重载构造函数：

```
public Game() {//base constructor
 this.frame = new JFrame();
 Dimension size = new Dimension(width * scale, height * scale);
 setPreferredSize(size);
}

public Game(JFrame jframe)//injected frame constructor
{
 this.frame = jframe;
 Dimension size = new Dimension(width * scale, height * scale);
 setPreferredSize(size);
} 
```

或让游戏创建设置

```
public Game()
{
 this.ConstructFrame();
 Dimension size = new Dimension(width * scale, height * scale);
 setPreferredSize(size);
}

private void ConstructFrame()
{
    this.frame = new JFrame();
    this.frame.setResizable(true);
    this.frame.setTitle("Frytree");
    this.frame.add(game);
    this.frame.pack();
    this.frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.frame.setLocationRelativeTo(null);
    this.frame.setVisible(true);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T19:58:09.613

`Game.frame`没有在任何地方初始化，因此是 NPE。最好将此帧初始化保存在单独的`init`方法中：

```
private void init() {
    frame = new JFrame();
    frame.setSize(400, 300);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setResizable(true);
    frame.setTitle("Frytree");
    frame.add(this);
    frame.pack();
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);
} 
```

（也更好地扩展`JPanel`而不是重量级 AWT `Canvas`）

# iphone - 如何从界面生成器在 UITableViewCell 中设置背景图像

> ID：12788561
> 
> 赞同：1
> 
> 时间：2012-10-08T19:55:21.210
> 
> 标签：iphone, objective-c, ios, xcode

我知道如何以编程方式为静态 UITavleView 中的单元格设置图像：

```
cell.backgroundView = [ [[UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"image1.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0] ]autorelease]; 
```

我可以设置背景颜色，但不能设置图像。是否可以从界面生成器中设置它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:00:33.223

创建一个新的用户界面 Xib 文件。删除初始视图。将您的 uitableviewcell 拖放到构建器中。自定义...然后把这个放在viewDidLoad中：

```
 UINib *cellNib = [UINib nibWithNibName:@"pizzaCell" bundle:[NSBundle mainBundle]];
[self.tableView registerNib:cellNib
      forCellWithReuseIdentifier:@"pizzaCell"]; 
```

然后在 cellForRowAtIndexPath 中执行以下操作：

```
static NSString *cellIdent = @"pizzaCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdent]; 
```

现在你有了你的笔尖细胞。如果您想获取对添加到单元格的视图的引用，我这样做的方式是提供 em 标签并在单元格上调用 viewWithTag。

您可能还只是在寻找：

```
 cell.contentView.imageView.image = [UIImage imageNamed:@"PizzaImage"]; 
```

不确定您要自定义多少

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:09:21.830

可以通过连接 tableViewCell 的 backgroundView 出口（与 nib 文件中的另一个视图）。但是您*不能*在界面构建器中制作可拉伸的图像..

# ajax - MVC3 Ajax.begin 表单适用于 chrome 和 IE，但不适用于 firefox？

> ID：12788568
> 
> 赞同：1
> 
> 时间：2012-10-08T19:55:41.497
> 
> 标签：ajax, asp.net-mvc-3

我正在开发一个 MVC3 项目，并且正在努力解决这个问题。这可能是我忽略的超级简单的事情，但我现在看不到它。问题是当我在 Firefox 中单击提交按钮时，实际上没有任何反应。控制台中没有错误，它永远不会碰到我的控制器，只是什么都没有。看着我在 chrome 中观看 XHR 请求，它完全符合它的预期。在萤火虫中观看 XHR 请求，什么也没有。

这是代码..查看。-- 这只是部分视图，在完整视图模板文件的头部，我确实包含了 jquery.ajax-unobtrusive.js、Microsoft.ajax.js 和 Microsoft.mvcajx.js...按此顺序

```
@using Infragistics.Web.Mvc
@model FuelPortal.Models.ViewModels.UserMaintenanceViewModel

@*changed this div and ajax update from wrapperData to wrapperData because having it as wrapperData was screwing up the JS on user submit, it had two of the same id's...*@
    <style type="text/css">
        input[type=text] 
        {
            margin-bottom: 10px; 
        }

        .disabled 
        {
            background-color: #CECECE !important;
            background-image: url('') !important;
        }
    </style>
<script src="../../Scripts/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script>
<div id="wrapperData2">   
   <!-- jared's table thingymabobber starts here yo -->
   @if (Model != null)
   { 
   <div class='frmBG'>
        <table width='100%' style='margin-top: 10px'>
          @using (Ajax.BeginForm("DetailUser", new AjaxOptions { UpdateTargetId = "wrapperData2", InsertionMode = InsertionMode.Replace, HttpMethod = "POST" }))
          {

                    <tr>
                        <td><b>First Name:</b></td>
                        <td>@Html.TextBoxFor(mbox => mbox.User.firstName)</td>
                    </tr>
                    <tr>
                        <td><b>Last Name:</b></td>
                        <td>@Html.TextBoxFor(mbox => mbox.User.lastName)</td>
                    </tr>
                    <tr>
                        <td><b>Email:</b></td>
                        <td>@Html.TextBoxFor(mbox => mbox.User.email)</td>
                    </tr>
                    <tr>
                        <td><b>Username:</b></td>
                        <td>@Html.TextBoxFor(mbox => mbox.User.userName, new {@readonly="true", @class="disabled"})</td>
                    </tr>
                    <tr>
                        <td><b>Phone:</b></td>
                        <td>@Html.TextBoxFor(mbox => mbox.User.phone)</td>
                    </tr>
                    <tr>
                        <td><b>Account Expiration Date:</b></td>
                        <td>@Html.TextBoxFor(mbox => mbox.User.expireDate)</td>
                    </tr>
                    <tr>
                        <td>@Html.HiddenFor(mbox => mbox.User.LoginAccountId)</td>
                        <td><input type="submit" value='Save' /></td>
                    </tr>

          }
        </table>
   </div> 
   }
</div> 
```

控制器动作——第一个动作是在加载局部视图时执行的，当提交局部视图的表单时执行 HTTP POST 重载。

```
 //view details 
    public ActionResult DetailUser(int id)
    {
        UserMaintenanceViewModel model = new UserMaintenanceViewModel();
        model = repository.getUserById(Session["UserId"].ToString(), id);

        return PartialView("_ViewUserDetail", model); 

    }

    [HttpPost]
    public ActionResult DetailUser(int id, UserMaintenanceViewModel model)
    {
        var test = model.User.LoginAccountId;
        var test2 = model.User.firstName; 
         var result = repository.updateUser(model.User);
         return PartialView("_ViewUserDetail", model);
    } 
```

非常感谢任何帮助，为大家欢呼！

# java - 无法使用 ImageIO 从控制器写入 tif 文件

> ID：12788571
> 
> 赞同：0
> 
> 时间：2012-10-08T19:55:50.020
> 
> 标签：java, servlets, image-processing, jai

我有 jai-imageio jar 并将其添加到我的类路径中。我只是不知道将 .tif 图像写入响应的输出流。有人能帮我吗？

这是我的代码：

```
RenderedOp image = JAI.create("fileload", filepath);
ImageIO.write(image.getAsBufferdImage(), "tif", response.getOutputStream()); 
```

我知道 javax.imageio.ImageIO 不支持 tif 图像，那么我该如何使用 jai-imageio 来使其工作？我迷路了。

注意：上面的代码适用于其他图像类型，如 jpeg 和 png。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:11:45.880

看起来您在存储和提供上传的图像方面走错了方向。您根本不需要整个 Java 2D API。

当您检索上传的图像时，只需执行

```
InputStream input = uploadedFile.getInputStream();
OutputStream output = new FileOutputStream(uniqueImagePath);
// Now write input to output in a loop the usual way. 
```

当您提供上传的图片时，只需执行

```
InputStream input = new FileInputStream(uniqueImagePath);
OutputStream output = response.getOutputStream();
// Now write input to output in a loop the usual way. 
```

您根本不需要按摩/操作字节。只需未经修改即可流式传输它们。

# asp.net-mvc - 防止在模型中继承验证属性

> ID：12788575
> 
> 赞同：6
> 
> 时间：2012-10-08T19:56:36.843
> 
> 标签：asp.net-mvc, inheritance, validationattribute

我正在使用其他自定义联系人模型类继承的基本联系人模型。

```
public class BaseContactModel
{
    [Required(ErrorMessage = "Firstname is required")]
    public virtual string FirstName { get; set; }
} 
```

基本联系人模型使用验证属性来标记需要的属性，但在某些情况下我想覆盖或停止它。这有可能吗？

```
public class ContactModel : BaseContactModel
{
    [NotRequired]
    public override string FirstName { get; set; }
} 
```

我试图使用一个新的验证属性**NotRequired**来返回 true，但似乎属性只是被堆叠起来，所以Required & NotRequired 正在运行并且验证失败。

在寻找解决方案（我找不到）时，我发现一些不相关的属性具有“继承”属性，但我在**System.ComponentModel.DataAnnotations**的本机验证属性中没有看到这一点。

这是一个失败的原因吗？我是否需要推出自己的支持禁用继承的版本？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:11:05.570

见下文，我创建了一个`Model`继承自另一个的类`BaseModel`，使用 new 关键字然后验证每个实例中的一个。据我所知，它们都使用基本属性。

为了清楚地说明验证例程，我添加了一个控件类`ControlModel`。

```
class Program
{
    static void Main(string[] args)
    {
        ValidationTest<Model>();
        ValidationTest<BaseModel>();
        ValidationTest<ControlModel>();

        Console.Read();
    }

    private static void WriteAttributeInfo<T>()
    {
        Console.WriteLine(string.Concat(typeof(T), " attributes:"));
        typeof(T).GetProperties().SelectMany(m => m.GetCustomAttributes(true)).Select(a => { Console.WriteLine(a); return a; }).ToList();
    }

    private static void ValidationTest<T>()
    {
        object obj = Activator.CreateInstance<T>();
        Console.WriteLine(string.Concat(typeof(T), " test: isValid = ", Validator.TryValidateObject(obj, new ValidationContext(obj, serviceProvider: null, items: null), new List<ValidationResult>())));
    }
}

class ControlModel
{
    public string FirstName { get; set; }

    public string Email { get; set; }
}

class BaseModel
{
    [RequiredAttribute]
    public virtual string FirstName { get; set; }

    [RequiredAttribute]
    public virtual string Email { get; set; }
}

class Model : BaseModel
{
    public new string FirstName { get; set; }

    public new string Email { get; set; }
} 
```

ConsoleApplication1.Model 测试：**isValid = False**

ConsoleApplication1.BaseModel 测试：**isValid = False**

ConsoleApplication1.ControlModel 测试：**isValid = True**

在此示例中，您似乎无法覆盖/隐藏/忽略继承的必需验证（尚未尝试其他）属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:00:19.277

这可能是您实际上想要一个新属性的情况

```
 public class ContactModel : BaseContactModel 
{
        [NotRequired]
        public new string FirstName { get; set; } 
} 
```

# maven - Gradle 无法解决档案依赖关系

> ID：12788581
> 
> 赞同：3
> 
> 时间：2012-10-08T19:57:06.580
> 
> 标签：maven, gradle, archiva

我在这里查看了答案，但它并不完全适用：[Gradle Not Resolving Maven Repo on localhost](https://stackoverflow.com/questions/9378872/gradle-not-resolving-maven-repo-on-localhost)

基本上，我有一个简单的 gradle 项目和相应的 build.gradle：

```
apply plugin: 'maven'
apply plugin: 'java'

repositories {
  mavenRepo (
    name: 'Snapfish Repo',
    url: 'op2-ivy1.hpd5.aus1.snapfish.com:40000/archiva/repository/snapfish/'
  )
  // mavenCentral()
}

dependencies {
  compile group:'org.slf4j', name: 'slf4j-api', version: '1.6.6'
} 
```

当我跑步时

```
gradle dependencies 
```

我得到以下输出：

```
compile - Classpath for compiling the main sources.
No dependencies
:dependencies FAILED

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':dependencies'.
> Could not resolve all dependencies for configuration ':compile'.
   > Could not resolve group:org.slf4j, module:slf4j-api, version:1.6.6.
     Required by:
         :junk:unspecified
      > Target host must not be null, or set in parameters.

* Try:
Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output.

BUILD FAILED 
```

如果我使用 mavenCental()，它可以正常工作。相关的调试输出是这样的：

```
13:52:35.494 [DEBUG] [org.gradle.cache.internal.btree.BTreePersistentIndexedCache] Opening cache dynamic-revisions.bin (/home/julio/.gradle/caches/artifacts-14/dynamic-revisions.bin)
13:52:35.498 [DEBUG] [org.gradle.cache.internal.btree.BTreePersistentIndexedCache] Opening cache module-metadata.bin (/home/julio/.gradle/caches/artifacts-14/module-metadata.bin)
13:52:35.502 [DEBUG] [org.gradle.cache.internal.btree.BTreePersistentIndexedCache] Closing cache module-metadata.bin (/home/julio/.gradle/caches/artifacts-14/module-metadata.bin)
13:52:35.502 [DEBUG] [org.gradle.cache.internal.btree.BTreePersistentIndexedCache] Closing cache dynamic-revisions.bin (/home/julio/.gradle/caches/artifacts-14/dynamic-revisions.bin)
13:52:35.503 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on artifact cache (/home/julio/.gradle/caches/artifacts-14).
13:52:35.505 [DEBUG] [org.gradle.api.internal.artifacts.ivyservice.IvyLoggingAdaper] Snapfish Repo: no namespace defined: using system
13:52:35.510 [DEBUG] [org.gradle.api.internal.artifacts.ivyservice.IvyLoggingAdaper]                tried op2-ivy1.hpd5.aus1.snapfish.com:40000/archiva/repository/snapfish/org/slf4j/slf4j-api/1.6.6/slf4j-api-1.6.6.pom
13:52:35.511 [DEBUG] [org.gradle.api.internal.artifacts.repositories.ExternalResourceResolver] Loading op2-ivy1.hpd5.aus1.snapfish.com:40000/archiva/repository/snapfish/org/slf4j/slf4j-api/1.6.6/slf4j-api-1.6.6.pom
13:52:35.514 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Waiting to acquire exclusive lock on artifact cache (/home/julio/.gradle/caches/artifacts-14).
13:52:35.515 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Lock acquired.
13:52:35.516 [DEBUG] [org.gradle.cache.internal.btree.BTreePersistentIndexedCache] Opening cache artifact-at-url.bin (/home/julio/.gradle/caches/artifacts-14/artifact-at-url.bin)
13:52:35.517 [DEBUG] [org.gradle.cache.internal.btree.BTreePersistentIndexedCache] Closing cache artifact-at-url.bin (/home/julio/.gradle/caches/artifacts-14/artifact-at-url.bin)
13:52:35.517 [DEBUG] [org.gradle.cache.internal.DefaultFileLockManager] Releasing lock on artifact cache (/home/julio/.gradle/caches/artifacts-14).
13:52:35.518 [DEBUG] [org.gradle.api.internal.externalresource.transfer.DefaultCacheAwareExternalResourceAccessor] Constructing external resource: op2-ivy1.hpd5.aus1.snapfish.com:40000/archiva/repository/snapfish/org/slf4j/slf4j-api/1.6.6/slf4j-api-1.6.6.pom
13:52:35.579 [INFO] [org.gradle.api.internal.file.collections.DirectoryFileTree] file or directory '/home/julio/.gradle/caches/artifacts-14/filestore', not found
13:52:35.581 [DEBUG] [org.gradle.api.internal.externalresource.transport.http.HttpResourceAccessor] Constructing external resource: op2-ivy1.hpd5.aus1.snapfish.com:40000/archiva/repository/snapfish/org/slf4j/slf4j-api/1.6.6/slf4j-api-1.6.6.pom
13:52:35.583 [DEBUG] [org.gradle.api.internal.externalresource.transport.http.HttpClientHelper] Performing HTTP GET: op2-ivy1.hpd5.aus1.snapfish.com:40000/archiva/repository/snapfish/org/slf4j/slf4j-api/1.6.6/slf4j-api-1.6.6.pom
13:52:35.719 [DEBUG] [org.gradle.api.internal.artifacts.ivyservice.resolveengine.DependencyGraphBuilder] Attaching #junk;unspecified(compile) to its parents.
13:52:35.726 [QUIET] [org.gradle.api.tasks.diagnostics.DependencyReportTask_Decorated] No dependencies
13:52:35.727 [DEBUG] [org.gradle.logging.internal.DefaultLoggingConfigurer] Finished configuring with level: DEBUG, configurers: [org.gradle.logging.internal.OutputEventRenderer@303020ad, org.gradle.logging.internal.logback.LogbackLoggingConfigurer@27b15692, org.gradle.logging.internal.JavaUtilLoggingConfigurer@6baa9f99]
13:52:35.728 [DEBUG] [org.gradle.api.internal.tasks.execution.ExecuteAtMostOnceTaskExecuter] Finished executing task ':dependencies'
13:52:35.728 [LIFECYCLE] [org.gradle.TaskExecutionLogger] :dependencies FAILED
13:52:35.735 [ERROR] [org.gradle.BuildExceptionReporter]
13:52:35.736 [ERROR] [org.gradle.BuildExceptionReporter] FAILURE: Build failed with an exception.
13:52:35.737 [ERROR] [org.gradle.BuildExceptionReporter]
13:52:35.737 [ERROR] [org.gradle.BuildExceptionReporter] * What went wrong:
13:52:35.738 [ERROR] [org.gradle.BuildExceptionReporter] Execution failed for task ':dependencies'.
13:52:35.738 [ERROR] [org.gradle.BuildExceptionReporter] > Could not resolve all dependencies for configuration ':compile'.
13:52:35.739 [ERROR] [org.gradle.BuildExceptionReporter]    > Could not resolve group:org.slf4j, module:slf4j-api, version:1.6.6.
13:52:35.740 [ERROR] [org.gradle.BuildExceptionReporter]      Required by:
13:52:35.740 [ERROR] [org.gradle.BuildExceptionReporter]          :junk:unspecified
13:52:35.741 [ERROR] [org.gradle.BuildExceptionReporter]       > Target host must not be null, or set in parameters.
13:52:35.744 [ERROR] [org.gradle.BuildExceptionReporter]
13:52:35.744 [ERROR] [org.gradle.BuildExceptionReporter] * Exception is:
13:52:35.746 [ERROR] [org.gradle.BuildExceptionReporter] org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':dependencies'.
13:52:35.746 [ERROR] [org.gradle.BuildExceptionReporter]    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeActions(ExecuteActionsTaskExecuter.java:68)
13:52:35.747 [ERROR] [org.gradle.BuildExceptionReporter]    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:46) 
```

我不明白为什么 gradle 对档案不起作用。在我们的网络中，链接 op2-ivy1.hpd5.aus1.snapfish.com:40000/archiva/repository/snapfish/org/slf4j/slf4j-api/1.6.6/slf4j-api-1.6.6.pom 检索 POM . 我究竟做错了什么？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T21:18:15.873

尝试`http://`在 URL 的开头添加：

```
url: 'http://op2-ivy1.hpd5.aus1.snapfish.com:40000/archiva/repository/snapfish/' 
```

# android - andengine 何时准备好进行 registerEntityModifier 调用？

> ID：12788583
> 
> 赞同：2
> 
> 时间：2012-10-08T19:57:09.297
> 
> 标签：android, animation, andengine

我正在使用 AndEngine 库创建游戏，我希望在游戏启动时出现一些动画。现在，我在 onGameResume() 方法中执行此操作：

```
@Override
public synchronized void onResumeGame() 
{
     super.onResumeGame();
     if (started==false)
     {
         doStartupAnimatons();
         started = true;
     }
} 
```

在功能强大的设备（例如：三星 Galaxy S）上，它运行得很好。在较小的设备（例如：三星 Galaxy mini 2）上，当游戏出现在屏幕上时，动画已经完成。

所以我的问题是，andengine 何时真正准备好执行动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T19:34:10.193

我是怎么做启动动画的

1.  添加了一个场景转换器，在附加时为每个场景调用 onAttached() [我认为它会自动执行此操作，但显然它没有]
2.  让每个需要入口动画的场景覆盖 onAttached() 方法并在那里制作动画

场景变换器应该首先改变当前场景然后调用 onAttached() ，应该这样做

# persistence - 不同服务器上的 EclipseLink 复合持久性单元

> ID：12788587
> 
> 赞同：8
> 
> 时间：2012-10-08T19:57:20.183
> 
> 标签：persistence, eclipselink

我的问题几乎在这个线程中得到了回答：

[EclipseLink，EntityManager 需要两个持久性单元](https://stackoverflow.com/questions/1742338/eclipselink-entitymanager-with-two-persistence-units-needed)

但是我使用了一个 persistence.xml 文件来声明 3 个持久性单元，它运行良好。但是现在我需要一个复合持久性单元，我不知道也不想为每个持久性单元构建单独的 jar。有没有办法做到这一点没有`<jar-file>`标签。如果没有，谁能给我一个如何使用单个持久性单元制作 jar 文件的示例？

**编辑1：** 这个配置我结束了，但它仍然不起作用 - 我得到的只是这个输出，当我尝试使用 em.createNamedQuery （当我有单独的持久性单元时，女巫工作之前）没有任何反应代码停止createEntity 线就是这样。

持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="persistenceUnit" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <properties>
      <property name="eclipselink.composite-unit" value="true"/>
    </properties>
  </persistence-unit>
    <persistence-unit name="Minutis" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <class>database.entity.Entity1</class>
    <class>database.entity.Entity2</class>
    ...
    <properties>
      <property name="eclipselink.composite-unit.member" value="true"/>
    </properties>
  </persistence-unit>
  <persistence-unit name="Minutis2" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <class>database.entity.EEntity1</class>
    <class>database.entity.EEntity2</class>
    ...
    <properties>
      <property name="eclipselink.composite-unit.member" value="true"/>
    </properties>
  </persistence-unit>
  <persistence-unit name="Minutis3" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <class>database.entity.EEEntity1</class>
    <class>database.entity.EEEntity2</class>
    ...
    <properties>
      <property name="eclipselink.composite-unit.member" value="true"/>
    </properties>
  </persistence-unit>
</persistence> 
```

这是如何`EntityManager`创建的：

```
Map minutis = new HashMap();
minutis.put("javax.persistence.jdbc.user", "user");
minutis.put("javax.persistence.jdbc.password", "password");
minutis.put("javax.persistence.jdbc.driver", "driver");
minutis.put("javax.persistence.jdbc.url", "url");

Map minutis2= new HashMap();
minutis2.put("javax.persistence.jdbc.user", "user");
minutis2.put("javax.persistence.jdbc.password", "password");
minutis2.put("javax.persistence.jdbc.driver", "driver");
minutis2.put("javax.persistence.jdbc.url", "url");

Map minutis3= new HashMap();
minutis3.put("javax.persistence.jdbc.user", "user");
minutis3.put("javax.persistence.jdbc.password", "password");
minutis3.put("javax.persistence.jdbc.driver", "driver");
minutis3.put("javax.persistence.jdbc.url", "url");

Map persistanceUnitsProps = new HashMap();
persistanceUnitsProps.put("Minutis", minutis);
persistanceUnitsProps.put("Minutis2", minutis2);
persistanceUnitsProps.put("Minutis3", minutis3);

Map props = new HashMap();
props.put("eclipselink.logging.level", "FINEST");
props.put("eclipselink.composite-unit.properties", persistanceUnitsProps);

EntityManagerFactory emf = Persistence.createEntityManagerFactory("persistenceUnit", props);
em = emf.createEntityManager(); 
```

这是我得到的输出：

```
run:
[EL Finest]: 2012-10-09 09:04:43.071--SessionBroker(2079047885)--Thread(Thread[SwingWorker-pool-1-thread-1,5,main])--Begin predeploying Persistence Unit persistenceUnit; session file:/C:/Users/Minutis/Documents/NetBeansProjects/JavaApplication4/build/classes/_persistenceUnit; state Initial; factoryCount 0
[EL Finest]: 2012-10-09 09:04:43.099--SessionBroker(2079047885)--Thread(Thread[SwingWorker-pool-1-thread-1,5,main])--property=eclipselink.orm.throw.exceptions; default value=true
[EL Finest]: 2012-10-09 09:04:43.116--SessionBroker(2079047885)--Thread(Thread[SwingWorker-pool-1-thread-1,5,main])--End predeploying Persistence Unit persistenceUnit; session file:/C:/Users/Minutis/Documents/NetBeansProjects/JavaApplication4/build/classes/_persistenceUnit; state Predeployed; factoryCount 0
[EL Finer]: 2012-10-09 09:04:43.117--Thread(Thread[SwingWorker-pool-1-thread-1,5,main])--JavaSECMPInitializer - transformer is null.
[EL Finest]: 2012-10-09 09:04:43.117--SessionBroker(2079047885)--Thread(Thread[SwingWorker-pool-1-thread-1,5,main])--Begin predeploying Persistence Unit persistenceUnit; session file:/C:/Users/Minutis/Documents/NetBeansProjects/JavaApplication4/build/classes/_persistenceUnit; state Predeployed; factoryCount 0
[EL Finest]: 2012-10-09 09:04:43.117--SessionBroker(2079047885)--Thread(Thread[SwingWorker-pool-1-thread-1,5,main])--End predeploying Persistence Unit persistenceUnit; session file:/C:/Users/Minutis/Documents/NetBeansProjects/JavaApplication4/build/classes/_persistenceUnit; state Predeployed; factoryCount 1
[EL Finest]: 2012-10-09 09:04:43.125--SessionBroker(2079047885)--Thread(Thread[SwingWorker-pool-1-thread-1,5,main])--Begin deploying Persistence Unit persistenceUnit; session file:/C:/Users/Minutis/Documents/NetBeansProjects/JavaApplication4/build/classes/_persistenceUnit; state Predeployed; factoryCount 1
[EL Finest]: 2012-10-09 09:04:43.128--SessionBroker(2079047885)--Thread(Thread[SwingWorker-pool-1-thread-1,5,main])--property=eclipselink.logging.level; value=FINEST
[EL Finest]: 2012-10-09 09:04:43.128--SessionBroker(2079047885)--Thread(Thread[SwingWorker-pool-1-thread-1,5,main])--property=eclipselink.logging.level; value=FINEST
[EL Info]: 2012-10-09 09:04:43.13--SessionBroker(2079047885)--Thread(Thread[SwingWorker-pool-1-thread-1,5,main])--EclipseLink, version: Eclipse Persistence Services - 2.3.0.v20110604-r9504
[EL Info]: 2012-10-09 09:04:43.138--SessionBroker(2079047885)--Thread(Thread[SwingWorker-pool-1-thread-1,5,main])--file:/C:/Users/Minutis/Documents/NetBeansProjects/JavaApplication4/build/classes/_persistenceUnit login successful
[EL Warning]: 2012-10-09 09:04:43.146--Thread(Thread[SwingWorker-pool-1-thread-1,5,main])--The collection of metamodel types is empty. Model classes may not have been found during entity search for Java SE and some Java EE container managed persistence units.  Please verify that your entity classes are referenced in persistence.xml using either <class> elements or a global <exclude-unlisted-classes>false</exclude-unlisted-classes> element
[EL Finer]: 2012-10-09 09:04:43.146--SessionBroker(2079047885)--Thread(Thread[SwingWorker-pool-1-thread-1,5,main])--The collection of metamodel types is empty. Model classes may not have been found during entity search for Java SE and some Java EE container managed persistence units.  Please verify that your entity classes are referenced in persistence.xml using either <class> elements or a global <exclude-unlisted-classes>false</exclude-unlisted-classes> element
[EL Finest]: 2012-10-09 09:04:43.147--SessionBroker(2079047885)--Thread(Thread[SwingWorker-pool-1-thread-1,5,main])--End deploying Persistence Unit persistenceUnit; session file:/C:/Users/Minutis/Documents/NetBeansProjects/JavaApplication4/build/classes/_persistenceUnit; state Deployed; factoryCount 1 
```

**编辑2：**

我认为问题在于持久性单元没有看到任何实体，尽管我使用类标签声明它们......对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:14:58.107

你遇到了什么错误？还是挂了？如果它挂起，你需要打破它并获取堆栈跟踪。

通常，您需要 , 这是指定子持久性单元的唯一方法。您不需要将类放在 jar 文件中（尽管这是最简单的做法），您可以只在 jar 中包含 persistence.xml 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T15:20:52.953

我遇到了同样的问题，采用了类似的方法，但我被困在下一步。我确实通过在另一个项目中创建实体然后将它们粘贴到主项目中解决了这个问题，最后将实体包括在持久性单元中（我在persistence.xml中预定义。我在执行时重新定义数据库）。之后实体被识别，但该单位将它们“混合”了一点。

# c# - 多个图像处理程序调用导致 IE 在弹出窗口中挂起

> ID：12788597
> 
> 赞同：5
> 
> 时间：2012-10-08T19:58:02.740
> 
> 标签：c#, asp.net, image, internet-explorer, ashx

我们有一个**ashx**图像处理程序，它在过去几年中表现相当不错，但我们最近注意到**IE8**和**IE9**中出现了一些奇怪的间歇性行为。我们有一个画廊页面，它作为图像 src 属性的一部分多次调用图像处理程序，该页面在弹出窗口中打开。

页面工作正常，但是当窗口快速连续打开和关闭时（在页面上的所有图像完成加载之前），它会导致浏览器挂起，随后必须重新启动。

以下是我们的图像处理程序代码示例，我怀疑当窗口关闭并且浏览器和服务器之间的连接仍在运行并导致其崩溃时，对图像的请求并未“结束”。

查看日志，有多次尝试通过处理程序获取相同的图像，因此看起来浏览器正在*重试*，因为它认为它未能完成请求。

我是否可以对处理程序（或客户端代码）进行任何更改，以确保浏览器在窗口关闭后不会继续请求图像，或者这是 IE 的复杂性？Safari、Firefox 和 Chrome 可以很好地处理这种类型的行为。

另请注意：显示图像的页面在网格周围有一个更新面板 - 但我不认为这是相关的。

```
Response.Clear();
Response.ContentType = "image/jpeg";
System.Drawing.Image returnImage = System.Drawing.Image.FromFile(completeImageFilePath);
using (MemoryStream stream = new MemoryStream())
{
    returnImage.Save(stream, ImageFormat.Jpeg);
    stream.WriteTo(Response.OutputStream);
}
returnImage.Dispose();
if (Response.IsClientConnected)
{
    Response.Flush();
}
Response.End(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:14:30.747

您是否尝试过使用 using`returnImage`来“确保”调用 .dispose() ？

```
Response.Clear();
Response.ContentType = "image/jpeg";
using (System.Drawing.Image returnImage = System.Drawing.Image.FromFile(completeImageFilePath))
{
    using (MemoryStream stream = new MemoryStream())
    {
        returnImage.Save(stream, ImageFormat.Jpeg);
        stream.WriteTo(Response.OutputStream);
    }
}
if (Response.IsClientConnected)
{
    Response.Flush();
}
Response.End(); 
```

# java - 在应用服务器上托管 Java Swing 应用程序

> ID：12788598
> 
> 赞同：2
> 
> 时间：2012-10-08T19:58:03.633
> 
> 标签：java, swing, websphere

现在，这可能真的很愚蠢。但是我们可以在像 WAS（Websphere 应用服务器）这样的应用服务器上部署 Java Swing 应用（桌面应用）吗？如果是，为什么以及何时我们想这样做？

对不起，这一切都是新的。

其实我并不想让它在网络上运行。我只是问 java swing 客户端应用程序如何与应用程序服务器一起工作。架构可能是什么，为什么需要一个带有 java swing 应用程序的应用程序服务器，我的意思是用例是什么。我刚刚找到了这篇文章，这是我想要的； [带有 Swing 瘦客户端的 Java Server 应用程序架构](https://stackoverflow.com/questions/1089983/java-server-application-architecture-with-swing-thin-client)

但是所有针对链接帖子的答案和评论也无济于事

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T20:01:28.840

您可以使用实际上不需要真正的应用程序服务器的[Java Webstart 。](http://docs.oracle.com/javase/tutorial/deployment/webstart/deploying.html)只需要一个网络服务器；）

如果客户端是 Java 客户端，除了引导之外，我看不到使用 Web 服务的意义。

对于 WebService-Client-APP-Interation（如您在评论中所述），您可以使用您选择的中间件，例如 RMI、CORBA、JMS、SOAP、WebServices、XML RPC ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:05:21.960

您可能会在该应用程序服务器上部署以启用应用程序服务器提供的某些功能，例如消息传递、数据库连接池、安全性等

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-10-19T17:25:50.010

查看 ajaxSwing [http://www.creamtec.com/products/ajaxswing/](http://www.creamtec.com/products/ajaxswing/) 他们似乎在这方面做了很多工作

# node.js - 从单个 Node.js 应用程序打开多个 Mongo 连接是个好主意吗？

> ID：12788601
> 
> 赞同：10
> 
> 时间：2012-10-08T19:58:14.040
> 
> 标签：node.js, mongodb, mongoose

**背景**：我正在尝试优化我的 Node.js API 的速度，该 API 在 Amazon Cloud 上使用 Express 和 Mongoose 构建。我有一个 API 调用需要很长时间才能运行（我的 /stats API 调用会编译来自大量来源的数据，因此会进行数百个 mongo 查询，因此运行大约需要 20 秒）。我注意到，当这个 API 调用正在运行时，其他也命中 Mongo 副本集的 API 调用返回缓慢。我的第一个想法是统计查询很慢，因此阻塞，但根据我的统计面板，我没有任何查询需要超过 100 毫秒才能运行，而且我的 Mongo DB 统计数据都在相当健康的范围内（每个查询 20 多个）第二，<1% btree 未命中，<5% 锁定）。

**问题**：现在，我的 Node.js 应用程序在启动时建立到 Mongo 集的单个连接，并且所有查询都使用该连接。建立多个连接会更好吗？例如，我应该为每个入站 API 请求建立一个新的 Mongo 连接吗？或者，也许我应该有一个到副本集的静态连接数，并在执行查询时在这些连接之间进行负载平衡？

或者也许我完全不在基地？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-08T20:53:26.260

您绝对应该使用多个连接，否则一次只能执行一个查询。最简洁的方法是`mongodb.Server`在创建对象时简单地在对象上启用连接池`Db`。例如：

```
var serverOptions = {
    'auto_reconnect': true,
    'poolSize': 5
};

var mdb = new mongodb.Db('test', new mongodb.Server('127.0.0.1', 27017, serverOptions));
mdb.open(function (err, mdb) { ... } 
```

您在统计数据中没有看到缓慢的查询时间的原因是您的并发查询只是在客户端排队等待连接可用。该等待时间不会显示在服务器端查询时间中。

# manifest - 为一键安装添加文件。添加清单文件时出错

> ID：12788602
> 
> 赞同：3
> 
> 时间：2012-10-08T19:58:21.173
> 
> 标签：manifest, oneclick

我正在使用 OpenWebKitSharp 并尝试在我一键发布时包含文件。我几乎已经完成了我的项目，但我在使用 OpenWebKitSharp.manifest 文件时遇到了问题。调试时一切正常，并且我已经能够使用“Visual Studio 安装程序”安装它。但是，我想使用 One Click 安装程序，以便它会自动检查更新。因此，我已将所有文件复制到我的项目中并设置了引用，以便在安装其他所有文件时安装 WebKitSharp。在所有 WebKitSharp 文件中，我将“构建操作”设置为“复制”，将“复制到输出”设置为“如果更新则复制”（正如我之前所说，所有内容都可以正常复制到调试文件夹并正常运行）。我切换并使用“PublishWizard” 并将其发布到文件夹。一切都正确显示在安装文件夹中。

但是，现在我去将它安装在计算机上。完成后它会尝试运行程序，我收到一条错误消息。“激活上下文尚未初始化。” 好吧，经过一点调试，我发现当我点击安装到计算机上时，“OpenWebKitSharp.manifest”的内容完全改变了。如果我复制旧文件并将其粘贴到安装目录中，而不是写入它创建的新文件，那么一切正常。

我该如何解决这个问题？

PS这可能相关也可能不相关，但我有一些 TrueType 字体 (TTF) 似乎没有复制到我的安装文件夹中。他们确实会复制到我的调试文件夹中，而不是在我发布时。

# c# - 仅覆盖 ComboBox 的垂直滚动条部分？

> ID：12788603
> 
> 赞同：1
> 
> 时间：2012-10-08T19:58:22.557
> 
> 标签：c#, winforms, c#-4.0, scrollbar

有没有办法在 C# 中获取 ComboBox 的垂直滚动条部分？我正在编写一个将在触摸屏上运行的应用程序，并且我想加宽 ComboBox 的垂直滚动条部分。有没有办法获得 ComboBox 的那个组件，或者我只是不走运？我正在使用 WinForms。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T06:30:04.307

您不能仅在一个控件上更改滚动条宽度。宽度是系统设置，Winforms 中的 SystemInformation.VerticalScrollBarWidth 属性。

解决方法是认识到这不仅仅是组合框的问题，任何滚动条都很难在触摸屏上使用。所以改变系统设置。在 Windows 7 上，使用控制面板 + 显示、个性化、窗口颜色、高级外观设置。Item = 滚动条，增加大小。您还需要增加 Caption Buttons 的大小，以便更容易点击关闭按钮。等等。

![在此处输入图像描述](../Images/db13bba772af22e6cf99b72906b43173.png)

请注意，关于基本主题的评论是无稽之谈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-09T15:12:31.607

由于@Hans Passant 提供的答案仅适用于 Windows 7，并且在 Windows 10 中不再可用，因此您实际上可以使用我在以下链接中发布在我的 GitHub 上的工具：

[https://github.com/codewondo/Windows-Scrollbar-Width-Changer](https://github.com/codewondo/Windows-Scrollbar-Width-Changer)

此工具通过修改注册表来更改滚动条。

# android - Flash 移动开发 - 如何使用 AIR 3.4 检测麦克风可用性？

> ID：12788604
> 
> 赞同：0
> 
> 时间：2012-10-08T19:58:24.707
> 
> 标签：android, mobile, air, microphone

我在使用 AIR 3.4 和新的 Kindle Fire（第 2 代，非高清）时遇到问题。没有麦克风，正如亚马逊的比较图表所示：[https](https://developer.amazon.com/sdk/fire/specifications.html) ://developer.amazon.com/sdk/fire/specifications.html ，但 AIR 告诉我有麦克风。它还报告 Camera.isSupported 和 CameraUI.isSupported 的值为 TRUE。

所以这里是关于 Kindle Fire 的独家新闻：

*   第一代 Kindle Fire 不能正确支持从 AIR 中捕获音频（即使连接了外部麦克风）。有关详细信息，请参阅：[https ://bugbase.adobe.com/index.cfm?event=bug&id=3197063](https://bugbase.adobe.com/index.cfm?event=bug&id=3197063)
*   除非连接了外部麦克风，否则第二代 Kindle Fire 不支持音频捕获。但是，我不知道在 AIR 中区分耳机与否的方法，因为 Microphone.isSupported 始终返回 TRUE。
*   Kindle Fire HD 支持带或不带外部麦克风的音频捕捉。

到目前为止，我所知道的处理此问题的最佳指标是使用“android.os.Build.MODEL”来禁用第一代 Kindle 的麦克风使用。不过，这有点笨拙。它也不允许我正确处理第二代 Fire，因为（据我所知）无法确定用户是否插入了麦克风。

你们有谁知道更可靠的方法来检查这个吗？

**编辑**：这是我创建的一个测试项目，它说明了这个问题：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" applicationComplete="init()"
               xmlns:s="library://ns.adobe.com/flex/spark" applicationDPI="160">

    <fx:Script>
        <![CDATA[
            private function init():void {
                cameraLabel.text = "Camera: " + Camera.isSupported.toString();
                cameraUILabel.text = "CameraUI: " + CameraUI.isSupported.toString();
                microphoneLabel.text = "Microphone: " + Microphone.isSupported.toString() + " => " + Microphone.getMicrophone();
            }
        ]]>
    </fx:Script>

    <s:VGroup horizontalCenter="0" verticalCenter="0">
        <s:Label id="cameraLabel" />
        <s:Label id="cameraUILabel" />
        <s:Label id="microphoneLabel" />
    </s:VGroup>

</s:Application> 
```

在第二代 Kindle Fire 上运行此程序会导致屏幕上显示以下值：

> 相机：真实
> 
> 相机UI：真
> 
> 麦克风：true => [对象麦克风]

# iphone - 如何在 Mac 上安装 UDK？

> ID：12788605
> 
> 赞同：0
> 
> 时间：2012-10-08T19:58:26.550
> 
> 标签：iphone, ios, unreal-development-kit

嗨，最近有人告诉我 UDK 是一个很棒的游戏引擎，可以在 iPhone 上运行。但是UDK只能在PC上使用对吧？我没有PC，推荐UDK的同一个人说可以在Mac上制作UDK游戏，但您必须先下载其他东西？这可能吗？如果是这样，怎么做？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T07:51:41.237

OP，您不想在 macbook air 上运行 UDK，您需要 iMac、带专用 gpu 的 macbook pro、游戏 PC 或笔记本电脑，或者像 mac pro 这样的工作站，UDK 是非常苛刻的软件，它的响应速度不够快在较慢的硬件上运行，并且可能在 air 的集成显卡上存在其他问题 - 虽然某些 UE3 游戏可以在 air 的集成显卡硬件上运行，但开发它们是另一回事，而且更加繁重。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T06:19:19.117

UDK 或 Unreal Development Kit 用于制作游戏，据我所知，它不能在 iPhone 上运行，也不会在 Mac 上运行。您一定听说过 UE3 或 Unreal Engine 3 将在 iPhone、Mac 或 Linux 计算机上运行。但是，它内置于游戏中，即 iPhone 上的 Infinity Blade 或 Mac 上的 UE3 驱动的游戏。据我所知，UDK 不会在 Mac 上运行，除非在 VMWare、Parallels 或 Boot Camp 下运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-19T00:04:43.467

我不确定它在您的系统上运行得有多好，但最好的办法是简单地虚拟运行 Windows（让 ios 成为主机操作系统，让 Windows 成为来宾）。这样你就可以模仿windows，你可以很容易地安装UDK。我没有 mac，所以我不太清楚，但我认为 BootCamp 是开始寻找虚拟机软件的好地方。

# linux - 如何使用 bash 获取服务器的 IP 地址

> ID：12788607
> 
> 赞同：1
> 
> 时间：2012-10-08T19:58:29.667
> 
> 标签：linux, bash, shell, awk, grep

目标：从服务器中提取 IP 地址。但是，问题开始发挥作用，即专用和 VPS 非常不同。提取并检查和打印 IP 地址的最佳或最理想的方法是什么？

我想我可以检查以下内容？

```
root@host]# /sbin/ifconfig venet0:0 | grep 'inet addr:' | cut -d: -f2 | awk '{ print $1}'
IP IS HERE
root@host]# /sbin/ifconfig eth0 | grep 'inet addr:' | cut -d: -f2 | awk '{ print $1}'
eth0: error fetching interface information: Device not found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:16:52.800

要获取服务器的 IP 地址，无论它是否是 VPS，您都可以执行以下操作：

```
#!/bin/bash

a="`netstat -i | cut -d' ' -f1 | grep eth0`";
b="`netstat -i | cut -d' ' -f1 | grep venet0:0`";

if [ "$a" == "eth0" ]; then
  echo "eth0 found"
  ip="`/sbin/ifconfig eth0 | awk -F':| +' '/inet addr/{print $4}'`";
elif [ "$b" == "venet0:0" ]; then
  echo "venet found"
  ip="`/sbin/ifconfig venet0:0 | awk -F':| +' '/inet addr/{print $4}'`"; 
fi

echo $ip; 
```

希望这可以帮助。

提示[jwpat7](https://stackoverflow.com/users/837847/jwpat7)提供比 grep、cut、awk 更简洁的 awk 命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:28:10.647

有关如何确定要查看的接口，请参阅先前的答案。下面显示了如何用单个 awk 替换 grep/cut/awk 的 3 进程序列。使用以下任一形式。在第一行中，awk 匹配任何包含`inet addr`并在默认 FS 字段分隔符上拆分后的行，然后拆分为冒号。在第二行中，awk 在 ":" 的正则表达式或一串空格上拆分。

```
ifconfig eth0 | awk '/inet addr/{split($2,a,":"); print a[2]}'
ifconfig eth0 | awk -F':| +' '/inet addr/{print $4}' 
```

# windows-phone-7 - Windows Phone 弹出窗口打开并且父页面仍然启用

> ID：12788614
> 
> 赞同：3
> 
> 时间：2012-10-08T19:58:52.863
> 
> 标签：windows-phone-7

当我打开一个弹出控件时遇到问题，这个弹出窗口比我的父页面小，并且父页面中的所有控件仍在工作，当我的弹出窗口打开时，如何“禁用”父页面获得焦点?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T09:05:40.427

parentpage.IsHitTestVisible = false

那么父页面不能接收任何事件。

当弹出窗口关闭时，确保调用 IsHitTestVisible = true

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T05:20:53.750

您可以将`IsEnabled`父母的属性设置为`false`，如以下问题中所述：

[是否为容器启用？](https://stackoverflow.com/questions/4049605/isenabled-for-a-container)

或者，您可以创建一个“覆盖”，即一个全屏元素，例如 a `Grid`，它具有更高的 z-index，您可以在弹出窗口打开时使其可见。

# android - textview 不能转换为 org.mapsforge.android.maps.MapView

> ID：12788616
> 
> 赞同：0
> 
> 时间：2012-10-08T19:58:57.950
> 
> 标签：android, casting, textview, android-mapview

我发现了 android 编程，我面临以下错误：textview 无法转换为 org.mapsforge.android.maps.MapView。

以下命令正在生成此错误：

```
this.vuemap = (MapView) findViewById(R.id.vuemap); 
```

我的 mainscreen.xml 如下：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainView"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <TextView
        android:id="@+id/trtext"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#47FFFFFF"      
        android:gravity="right"
        android:text="0"
        android:textSize="50dp">
    </TextView>
    <TextView
        android:id="@+id/tltext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:background="#47000000" 
        android:text="0"
        android:textSize="50dp" >
    </TextView> 
    <org.mapsforge.android.maps.MapView
    android:id="@+id/vuemap"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"   
    android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true" >
    </org.mapsforge.android.maps.MapView>

</RelativeLayout>` 
```

比较奇怪的是，如果我在布局中反转 textview/mapview 的位置，就没有问题了。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainView"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
   <org.mapsforge.android.maps.MapView
    android:id="@+id/vuemap"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"   
    android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true" >
    </org.mapsforge.android.maps.MapView>

    <TextView
        android:id="@+id/trtext"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#47FFFFFF"      
        android:gravity="right"
        android:text="0"
        android:textSize="50dp">
   </TextView>
   <TextView
        android:id="@+id/tltext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:background="#47000000" 
        android:text="0"
        android:textSize="50dp" >
   </TextView>
</RelativeLayout>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T06:12:19.210

清理项目（“项目 -> 清理”）可以解决修改 xml 布局文件的转换错误。如果文本出现在另一个文本视图中而不是它应该出现的文本视图中，我认为此操作也可以解决问题。感谢格雷格！

# objective-c - 应用程序在 iPad 上抛出 EXC_BAD_ACCESS（代码 1，地址 = 0xa0000008）

> ID：12788622
> 
> 赞同：0
> 
> 时间：2012-10-08T19:59:53.270
> 
> 标签：objective-c, ios, cocos2d-iphone

我的应用程序在 iPhone 上编译得很好但是当我尝试在 iPad 上编译它时会抛出错误：EXC_BAD_ACCESS (code 1, address = 0xa0000008)

此时在我的代码中：

```
[self addChild:settings z:2]; 
```

不知道为什么会这样……有人吗？

主菜单.m：

```
#import "mainMenu.h"
#import "gameData.h"
#import "gameDataParser.h"

BOOL settingsOut;

@implementation mainMenu

@synthesize iPad;

- (id)init{

if( (self=[super init])) {

    CGSize screenSize = [CCDirector sharedDirector].winSize;

    mainMenu *menuLayer = [[mainMenu alloc] autorelease];
    [self addChild:menuLayer];

    settingsMenu *settings = [settingsMenu node]; <----- app breaks at breakpoint here
    [self addChild:settings z:2];                 <----- receive error if breakpoint here

    _settings = settings; 
    settingsOut = FALSE;

    CGPoint offScreenPoint = ccp(screenSize.width+(screenSize.width/2), 0);

    settings.position = offScreenPoint;

    // gameData *gameData = [gameDataParser loadData];

    // [gameDataParser saveData:gameData];

    self.iPad = UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad;

    if (screenSize.height > 490){
        CCSprite *background = [CCSprite spriteWithFile:@"mainBackgroundiPhoneFive.png"];
        background.position = ccp(screenSize.width/2, screenSize.height/2);
        [self addChild:background];
    }

    else{
        CCSprite *background = [CCSprite spriteWithFile:@"mainBackground.png"];
        background.position = ccp(screenSize.width/2, screenSize.height/2);
        [self addChild:background];
    }

    [self addButtons: screenSize.height];

}
return self;
} 
```

主菜单.h：

```
#import "cocos2d.h"
#import "SceneManager.h"
#import "settingsMenu.h"

extern BOOL settingsOut;

@interface mainMenu : CCScene {

    CCLayer * _settings;
    CCMenu * _play;
}

@property (nonatomic, assign) BOOL iPad;
@property (nonatomic, retain) CCLayer *settings;
@property (nonatomic, retain) CCMenu *play;

- (void) addButtons: (int) screenSize;

@end 
```

设置菜单.h：

```
#import "gameData.h"
#import "gameDataParser.h"
#import "cocos2d.h"

@interface settingsMenu : CCLayer {
CCMenuItem *_musicOn;
CCMenuItem *_musicOff;
CCMenuItem *_invertControlsOn;
CCMenuItem *_invertControlsOff;
}

@property (nonatomic, assign) BOOL iPad;

@end 
```

设置菜单.m

```
#import "settingsMenu.h"
#import "SimpleAudioEngine.h"
#import "mainMenu.h"
#import "sceneManager.h"

BOOL settingsOut;

@implementation settingsMenu

- (id)init{
    if((self=[super init])) {

    // Determine Screen Size
    CGSize screenSize = [CCDirector sharedDirector].winSize;
    self.iPad = UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad;

    if (screenSize.height > 490){
        CCSprite *background = [CCSprite spriteWithFile:@"settingsiPhoneFive.png"];
        background.position = ccp(screenSize.width/2, screenSize.height/2);
        [self addChild:background];
    }

    else{
        CCSprite *background = [CCSprite spriteWithFile:@"settings.png"];
        background.position = ccp(screenSize.width/2, screenSize.height/2);
        [self addChild:background];
    }
    [self addButtons];

}
return self;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-08T22:32:32.993

我自己为此找到了一个奇怪的解决方案，在最终断点后更改代码中的某些内容导致代码被修复，在 mainMenu.m 我更改了 if 语句：`if (screenSize.height > 490)`出于`if (!self.iPad && screenSize.height > 490)`同样的原因，我在 settingsMenu.m 中更改了它（因为我意识到我的检测 iPhone 5 的代码也检测到了 iPad）这似乎解决了我的问题，奇怪的是！

# sql-server - 如何有效地根据其他行更新表？

> ID：12788635
> 
> 赞同：0
> 
> 时间：2012-10-08T20:01:00.937
> 
> 标签：sql-server, tsql

我有一个包含此列的表（除其他外）：

```
id int identity(1,1) not null 
```

我添加了一个列来存储插入记录的大致日期：

```
insertdate smalldatetime null 
```

我已经填写了`insertdate`我可以使用在相关表和日志的取证搜索中找到的最早参考资料的地方。但是，这确实会在数据中留下许多 NULL“空白”，以及 ID 号较低的记录具有`insertdate`比后续 ID 值更新的值的情况。

该`identity`属性提供了充分的基础来假设必须在任何具有更高`ID`值的记录之前创建记录，因此我决定更新`insertdate`它为 null 或后续 ID 具有更早日期的任何记录：

```
UPDATE
table
SET
insertdate = (SELECT MIN(insertdate) 
      FROM table t2
      WHERE
        t2.id >= table.id 
        AND t2.insertdate IS NOT NULL
      ) 
```

不幸的是，像这样的更新正在吃服务器的午餐...... 1 小时并计算 250 万条记录。

关于如何更有效地做到这一点的任何想法？

它只需要完成一次，但这是一个生产服务器，所以我宁愿不要锁定表超过必要的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:24:57.483

不确定这会有所帮助，但您不需要测试 null。
Min() 不会考虑空值。

```
UPDATE
table 
SET
insertdate = (SELECT MIN(t2.insertdate) 
                FROM table t2
               WHERE t2.id >= table.id 
                 AND t2.ID < table.id + 10000) 
```

你能限制到接下来的 x 行吗？
有没有一点你很确定你不会找到更小的约会对象？

当您设置默认日期时，您可以将 table 和 t2 限制为第一行的 ID。

可能会填满事务日志并将整个事情回滚。
如果发生这种情况，请耐心等待并让它回滚。
如果您现在中止它，它将不得不回滚。
100000 分批拆分是要让事务日志清零的。

# .net - Microsoft Visual Studio 2010/2012 看不到最新的 .NET Framework

> ID：12788639
> 
> 赞同：1
> 
> 时间：2012-10-08T20:01:14.720
> 
> 标签：.net, visual-studio, frameworks, ide

我有一个愚蠢的问题，无法以任何明显的方式解决。关键是，我的旧 MSVS 2010 和最新的 MSVS 2012 “看不到” .NET Framework 4 或 4.5 版。这些库应该与 Visual Studio 一起自动安装，以便它可以随时使用相关的 C#（而不仅仅是）功能。

但是我尝试过多次重新安装 IDE - 不，尝试创建新项目时只有 2,3 和 3.5 框架版本可用。也不能打开任何为最新 .NET 版本外部创建的项目。在不同的硬盘上重新安装IDE，手动重新安装框架等都没有带来成功。IDE 都是终极版。

我非常希望在不尝试重新安装 Windows 7 Home Basic 的情况下解决问题。有人可以请给我一些关于它的好建议吗？

PS[几乎类似的问题](http://social.msdn.microsoft.com/Forums/en/vssetup/thread/4ac31087-5557-4e60-ba60-98086d523fdb)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T22:06:49.363

尝试安装 .NET 4 Multitargeting Pack：

[适用于 Microsoft .NET Framework 4.0.2 的多目标包 (KB2544526)](http://www.microsoft.com/en-us/download/details.aspx?id=27758)

[适用于 Microsoft .NET Framework 4.0.3 的多目标包 (KB2600213)](http://www.microsoft.com/en-us/download/details.aspx?id=29052)

# java - java中通用树（n-ary树）的级别顺序遍历

> ID：12788641
> 
> 赞同：0
> 
> 时间：2012-10-08T20:01:20.170
> 
> 标签：java, algorithm, tree, queue, tree-traversal

（如果您想避免冗长的解释，我正在寻找的只是java中通用树（n-ary树）的级别顺序遍历。提供的代码有效并且需要级别顺序显示功能。四处寻找一个小时，但找不到对通用 n 元树的引用。如果 soemone 可以帮助我在我的代码之上构建 LevelOrderDisplay 函数将不胜感激，因为它将帮助我理解我得到的队列错误。谢谢！）

我一直在尝试在工作中实现 Autosys 作业计划的树表示。由于每个作业（流程）都可以有一个或多个相关作业，因此我决定使用 n-ary tree 实现，以便我可以映射流程。我正在使用 java 集合。我需要执行级别顺序遍历以显示作业依赖关系。首先打印根，然后是第一层的所有节点，然后是第二层的所有节点，依此类推。

我试图在 StackOverflow 上搜索一个多小时，但我遇到的大多数示例都是针对二叉树的。我明白我需要为此使用队列。

根据我在研究过程中得到的信息，算法应该是这样的：如果这是错误的，请纠正我，如果可能的话，提供一个代码。也欢迎替代方法，但我真正要寻找的是通用树的简单基本级顺序遍历。

让我们让它成为通用树实现的资源丰富的线程。大多数代码已经在工作了。请帮忙。

```
Algo: 
```

对于每个节点，首先访问该节点，然后将其子节点放入 FIFO 队列中。

```
printLevelorder(tree)
1) Create an empty queue q
2) temp_node = root /*start from root*/
3) Loop while temp_node is not NULL
    a) print temp_node->data.
    b) Enqueue temp_node’s children (first left then right children) to q
    c) Dequeue a node from q and assign it’s value to temp_node 
```

出于某种奇怪的原因，我无法在我的 Eclipse IDE 中声明一个队列。我已经导入了 java.util.*；我在这里遗漏了一些东西，请查看以下错误。

第一次尝试：

```
Queue<NaryTreeNode> BFSqueue = new LinkedList<NaryTreeNode>(); 
```

> 错误：LinkedList 类型不是通用的；它不能用参数参数化

第二次尝试：

```
QueueList<NaryTreeNode> BFSqueue = new QueueList<NaryTreeNode>(); 
```

> 错误：- QueueList 无法解析为一种类型

当前树结构供参考：

```
 root(100)
    /      |       \
  90       50       70
  /        \
20 30   200  300 
```

当前显示函数的输出是预先排序的：100 90 20 30 50 200 300 70 我需要一个水平顺序遍历。所需的输出。

```
> 100
> 90 50 70
> 20 30 200 300 
```

如果有人想在他们的机器上运行它并添加级别顺序遍历功能，这是一个工作代码。请为队列操作提供注释解释，因为那是我卡住的地方。

谢谢！

```
import java.util.*;
import java.io.*;
import java.util.List;

//The node for the n-ary tree
public class NaryTreeNode {
  int data;
  List <NaryTreeNode> nary_list = new ArrayList<NaryTreeNode>();
}

public class NaryTree {

  void display(NaryTreeNode t) {
    if(t==null)
      return;

    System.out.print(t.data + " ");

    for(NaryTreeNode n : t.nary_list) 
          display(n) ;            //Recursive Call
 }

  public static void main(String args[]){

    NaryTree t1 = new NaryTree();

    NaryTreeNode root = new NaryTreeNode();

    root.data = 100;

    NaryTreeNode lev_11 = new NaryTreeNode();   lev_11.data=90;
    NaryTreeNode lev_12 = new NaryTreeNode();   lev_12.data=50;
    NaryTreeNode lev_13 = new NaryTreeNode();   lev_13.data=70;
    NaryTreeNode lev_21 = new NaryTreeNode();   lev_21.data=20;
    NaryTreeNode lev_22 = new NaryTreeNode();   lev_22.data=30;
    NaryTreeNode lev_23 = new NaryTreeNode();   lev_23.data=200;
    NaryTreeNode lev_24 = new NaryTreeNode();   lev_24.data=300;

    //Add all the nodes to a list.

    List<NaryTreeNode> temp2 = new ArrayList<NaryTreeNode>();  //Level two first branch
    temp2.add(lev_21);
    temp2.add(lev_22);

    List<NaryTreeNode> temp3 = new ArrayList<NaryTreeNode>();  //level two second branch
    temp3.add(lev_23);
    temp3.add(lev_24);

    lev_11.nary_list.addAll(temp2);
    lev_12.nary_list.addAll(temp3);

    List<NaryTreeNode> temp = new ArrayList<NaryTreeNode>();  //level one
    temp.add(lev_11);
    temp.add(lev_12);
    temp.add(lev_13);

    // Add Temp to root  to form a leaf of the root
    root.nary_list.addAll(temp);

    // root=null;
    //Call the display function.
    t1.display(root);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:31:13.703

以下似乎有效。为了额外的功劳，可以使用增强的 for 循环来完成迭代，并随时中止。您可能想要添加访问修饰符。

```
import java.util.*;

class NaryTree {
    final int data;
    final List<NaryTree> children;

    public NaryTree(int data, NaryTree... children) {
        this.data = data;
        this.children = Arrays.asList(children);
    }

    static class InOrderIterator implements Iterator<Integer> {
        final Queue<NaryTree> queue = new LinkedList<NaryTree>();

        public InOrderIterator(NaryTree tree) {
            queue.add(tree);
        }

        @Override
        public boolean hasNext() {
            return !queue.isEmpty();
        }

        @Override
        public Integer next() {
            NaryTree node = queue.remove();
            queue.addAll(node.children);
            return node.data;
        }

        @Override
        public void remove() {
            throw new UnsupportedOperationException();
        }
    }

    Iterable<Integer> inOrderView = new Iterable<Integer>() {
        @Override
        public Iterator<Integer> iterator() {
            return new InOrderIterator(NaryTree.this);
        } 
    };
} 
```

测试代码：

```
public class Test {
    public static void main(String[] args) throws Exception {
        NaryTree tree = new NaryTree(100,
            new NaryTree(90, 
                new NaryTree(20),
                new NaryTree(30)
            ), new NaryTree(50, 
                new NaryTree(200),
                new NaryTree(300)
            ), new NaryTree(70)
        );
        for (int x : tree.inOrderView) {
            System.out.println(x);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-04T07:17:05.427

使用队列的级别顺序遍历：

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.LinkedList;
import java.util.List;
import java.util.Objects;
import java.util.Queue;
import java.util.stream.Collectors;

public class LevelOrderTraversal {
    static class Node {
        int data;

        Node children[];

        Node(int data, int n) {
            children = new Node[n];
            this.data = data;
        }
    }

    public static void main(String[] args) {
        /*  
                       1 
                    /  |  \ 
                   2   3   4 
                 / | \ 
                5  6  7 
        */
        int n = 3;
        Node root = new Node(1, n);
        root.children[0] = new Node(2, n);
        root.children[1] = new Node(3, n);
        root.children[2] = new Node(4, n);
        root.children[0].children[0] = new Node(5, n);
        root.children[0].children[1] = new Node(6, n);
        root.children[0].children[2] = new Node(7, n);

        List<List<Integer>> levelList = levelOrder(root);
        for (List<Integer> level : levelList) {
            for (Integer val : level) {
                System.out.print(val + " ");
            }
            System.out.println();
        }
    }

    public static List<List<Integer>> levelOrder(Node root) {
        List<List<Integer>> levelList = new ArrayList<>();

        if (root == null) {
            return levelList;
        }

        Queue<Node> queue = new LinkedList<>();
        queue.add(root);

        while (!queue.isEmpty()) {
            int n = queue.size();
            List<Integer> level = new ArrayList<>();

            while (n-- > 0) {
                Node node = queue.remove();
                level.add(node.data);
                queue.addAll(Arrays.stream(node.children).filter(Objects::nonNull).collect(Collectors.toList()));
            }
            levelList.add(level);
        }
        return levelList;
    }

} 
```

# ruby-on-rails - Capistrano 任务中的捆绑配置找不到 Gemfile

> ID：12788642
> 
> 赞同：2
> 
> 时间：2012-10-08T20:01:23.223
> 
> 标签：ruby-on-rails, gem, capistrano, bundler

我正在尝试添加一个配置参数，`deploy.rb`以便`pg`gem 正确构建：

```
before "bundle:install" do
  run "ls -l #{fetch(:latest_release)}/Gemfile"
  run "bundle config  --local --gemfile=#{fetch(:latest_release)}/Gemfile build.pg --with-pg-config=/usr/pgsql-9.1/bin/pg_config"
end 
```

在输出中，添加的诊断代码清楚地显示了非空 Gemfile 的存在：

```
 * executing `bundle:install'
    triggering before callbacks for `bundle:install'
  * executing "ls -l /apps/my_app/releases/20121008195429/Gemfile"
    servers: ["my_server.com"]
    [my_server.com] executing command
 ** [out :: my_server.com] -rw-r--r-- 1 webapp webapp 1291 Oct  5 22:34 /apps/my_app/releases/20121008195429/Gemfile
    command finished in 157ms
  * executing "bundle config  --local --gemfile=/apps/my_app/releases/20121008195429/Gemfile build.pg --with-pg-config=/usr/pgsql-9.1/bin/pg_config"
    servers: ["my_server.com"]
    [my_server.com] executing command
 ** [out :: my_server.com] Could not locate Gemfile 
```

如果我使用`--global`Vice ，我会得到相同的结果`--local`。如果我删除`global`/`local`标志，我会得到一个不同的错误：

```
** [out :: my_server.com] Invalid scope --gemfile=/apps/my_app/releases/20121008194937/Gemfile given. Please use --local or --global. 
```

似乎有一个全局配置或上下文使情况混乱。我怎样才能`bundle config`看到我的`Gemfile`？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T22:50:06.250

与命令中`--gemfile`使用的标志相反，标志中的标志仅标识Gemfile的**名称：**`bundle install``bundle config`

 **```
# man bundle-config
...
gemfile (BUNDLE_GEMFILE)
The name of the file that bundler should use as the Gemfile. This location of this file
also sets the root of the project, which is used to resolve relative paths in the Gemfile,
among other things. By default, bundler will search up from the current working directory
until it finds a Gemfile. 
```

我首先通过 cd'ing 到该目录来解决问题：

```
run "cd #{fetch(:latest_release)} && bundle config build.pg --with-pg-config=/usr/pgsql-9.1/bin/pg_config" 
```

更多信息： http: [//gembundler.com/man/bundle-install.1.html](http://gembundler.com/man/bundle-install.1.html) & [http://gembundler.com/man/bundle-config.1.html](http://gembundler.com/man/bundle-config.1.html)**

# sql - 使用哈希字节比较 SQL Server 表比不使用慢

> ID：12788643
> 
> 赞同：2
> 
> 时间：2012-10-08T20:01:26.160
> 
> 标签：sql, sql-server

我正在使用 SQL Server 2012 LocalDB。

一位客户希望我比较 2 个表，这些表包含 200 个（！）值列中的每一个（信不信由你）`nvarchar(max)`。没有索引，也没有唯一键。

我用谷歌搜索了我的方法（[http://weblogs.sqlteam.com/jeffs/archive/2004/11/10/2737.aspx](http://weblogs.sqlteam.com/jeffs/archive/2004/11/10/2737.aspx)）并且该方法有效。但是，在 union all / group by 表达式中使用 200 列有点慢。

查询看起来像这样

```
SELECT 
    MIN(TableName) as TableName , header1, header2, header3, header....
INTO RESULTS  
FROM 
    (SELECT 
        'table1' as TableName, table1.header1, table1.header2, table1.header3, table1.header...
     FROM table1 

     UNION ALL 

     SELECT 
         'table2' as TableName , table2.header1, table2.header2, table2.header3, table2.header...
    ) tmp 
GROUP BY 
    header1, header2, header3, header...
HAVING 
    COUNT(*) = 1 
```

![第一次查询的执行计划](../Images/abc7f95f7005db17f281959e6811b0d2.png)

我的想法是计算此处描述的任何行的哈希字节值（[http://www.bidn.com/blogs/TomLannen/bidn-blog/2265/using-hashbytes-to-compare-columns](http://www.bidn.com/blogs/TomLannen/bidn-blog/2265/using-hashbytes-to-compare-columns)）并将其保存在额外的列（在这种情况下再增加一个不会受到伤害:-)）。哈希字节本身的计算速度非常快，但是当我之后仅使用 union all / group by /having 子句中的哈希字节值运行查询时，查询速度要慢得多。在第一种情况下，它运行大约 15 分钟，而不是大约 25 秒！

第二个查询如下所示（compareHash 是插入的 hashbyte 列）：

```
SELECT 
    MIN(TableName) as TableName, compareHash 
INTO RESULTS  
FROM 
   (SELECT 
       'table1' as TableName , compareHash 
    FROM table1 

    UNION ALL 

    SELECT 
       'table2' as TableName , compareHash 
    FROM table2) tmp 
GROUP BY 
    compareHash 
HAVING 
    COUNT(*) = 1 
```

![第二次查询的执行计划](../Images/909c187002efd788553dd4f5321e8758.png) 我本来期望完全相反。任何人都可以考虑这种行为的原因吗？

最好的问候塞巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T21:48:39.393

如果查看查询计划，您会注意到第二个查询返回的行数明显减少（根据箭头的粗细判断）。

这让我想知道您是否正确填充了该`compareHash`列。即，如果所有 200 列都正确包含在哈希中。

如果有的话，我希望第二个查询返回*更多*行，因为散列字符数据将强制比较区分大小写。sql server 中的默认排序规则将为您对 varchar 值的第一个查询执行不区分大小写的比较。

虽然这更多地与正确性有关，但您通常希望在比较性能时比较产生相同答案的方法。

* * *

除了正确性之外，另一个观察结果是，在第一个查询中，数据被排序，然后应用流式聚合。在第二个查询中，构建了一个哈希表，并使用第二个表来探测哈希表。您可以尝试通过在查询`OPTION (ORDER GROUP)`末尾添加并查看是否会更改执行时间来强制第二个查询中的排序流聚合计划，但我怀疑它会改善它。

我的猜测是原始 varchar 数据具有一些自然顺序，sql server 在第一个查询中利用了这些顺序。

如果您愿意在`compareHash`列上创建索引，您可能会在第二个查询中看到显着的性能提升，因为它将使用合并连接。

# php - 数组排序比 array_multisort 更快？

> ID：12788646
> 
> 赞同：2
> 
> 时间：2012-10-08T20:01:47.830
> 
> 标签：php

我正在尝试根据一列订单对一个大数组进行排序。构建数组的方式不允许我在查询中做太多排序，但我想知道是否有比[`array_multisort()`](http://php.net/array-multisort)PHP 更快的方法？

我的代码是：

```
foreach ($returnArr as $key => $row) {
    $tmp[$key] = $row['orders'];
}

array_multisort($tmp, SORT_DESC, $returnArr); 
```

我还想就如何构建单个查询并让我的一些 where 条件仅适用于单个列提出建议。如果这是可能的，那么我将能够使用 MySQL 而不是 PHP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:09:05.480

没有您的查询很难回答，但我怀疑 multisort 是否是您想要的。它本质上也对您的列名进行排序，您可以在查询本身中轻松完成。您还可以让数据库为您排序值，因此您的查询将类似于：

```
select
  Col_AAA, Col_BBB, Col_HHH, Col_ZZZ
from
  YourTable
order by
  Col_AAA, Col_BBB, Col_HHH, Col_ZZZ 
```

这将返回排序的值，以及您指定它们的顺序的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:13:44.023

如果`array_multisort()`是答案，那么问题是错误的。我还没有看到需要 array_multisort 的情况，PHP 数组是一种非常强大的数据结构，实际上不需要多排序。

为什么要从`$returnArr`$tmp 中获取所有订单，然后对这个数组进行排序？您应该简单地以保持它的数组键的方式对 $tmp 进行排序，如果您想迭代这个 $tmp 数组，则 foreach 中的键与指向 $returnArr 的键相同 - 您可以访问匹配的数据在 $returnArr 中设置而无需对其进行排序。$tmp 和 $returnArr 中的相同键将始终属于同一个数据集。

另一方面，你没有说明你想做什么。

# c++ - MAC c++控制交互式命令行工具

> ID：12788648
> 
> 赞同：0
> 
> 时间：2012-10-08T20:01:50.950
> 
> 标签：c++, macos, command-line, interactive

我想从我的 c++ 代码中控制解压缩命令。我的问题是，如果我要解压缩的 ZIP 文件是密码加密的，解压缩工具会要求输入密码。

所以我需要从我的 c++ 代码中给它密码并按回车，但我希望我的代码自动执行此操作。

所以这是我到目前为止得到的，但是当我运行它时，首先会执行 system() 命令然后程序继续运行，但是当解压缩要求它时它不会将密码写入终端:(

```
#include <iostream>
#include </System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Headers/CGEvent.h>
#include <Carbon/Carbon.h>

int main (int argc, const char * argv[])
{

    using namespace std;

    system("clear");

    //----------------------------------------------

    {
        system("unzip /Users/das_virus/Desktop/NeuerOrdner2/M1/Auswahl.zip"),
        cout << "a";

        /*CGEventRef event1, event2, event3, event4;

        event1 = CGEventCreateKeyboardEvent (NULL,(CGKeyCode)0,true);
        event2 = CGEventCreateKeyboardEvent (NULL,(CGKeyCode)0,false);
        event3 = CGEventCreateKeyboardEvent (NULL,(CGKeyCode)36,true);
        event4 = CGEventCreateKeyboardEvent (NULL,(CGKeyCode)36,false);

        ProcessSerialNumber psn;
        GetFrontProcess(&psn);

        CGEventPostToPSN(&psn,event1);
        CGEventPostToPSN(&psn,event2);
        CGEventPostToPSN(&psn,event3);
        CGEventPostToPSN(&psn,event4);*/
    }

    return 0;
} 
```

我希望有人能给我一个答案:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:11:36.290

使用`-P password`命令行开关将密码作为参数传递。

# joomla - 另一个项目中的 Joomla K2 项目？

> ID：12788656
> 
> 赞同：0
> 
> 时间：2012-10-08T20:02:07.767
> 
> 标签：joomla, joomla1.7, joomla-k2

所以，我必须使用这个 Joomla 1.7 安装，我之前的程序员并没有很好地对待它。
它使用 K2 插件，主页上有一个带有 4 个选项卡的 flash 部分，每个选项卡中都有一个“更多”按钮，指向一个 K2 项目。
因此，我想做的是更改每个“更多”按钮指向的项目，并且自然地，我搜索了一个 .xml 文件，希望它包含有关按钮文本和 url 的数据。
我发现 .xml 文件，更改了文本和 URL，文本更改没有问题 - 它立即反映在网站上，但按钮仍然指向旧的 K2 项目，而不是我在 .xml 文件中指定的 URL。
所以，我现在的想法是在每个按钮通向的K2项目中加载我需要的K2项目。例如，您将使用 {rokbox}{/rokbox} 加载视频。

有人有想法吗？

在我想出这个想法之前，我尝试从管理菜单中的组件 -> 重定向设置重定向。它没有用。

# java - Android - URL 编码器无法正常工作

> ID：12788657
> 
> 赞同：0
> 
> 时间：2012-10-08T20:02:09.353
> 
> 标签：java, android, url

我的 URL 字符串有两部分，第一部分是

```
http://abcabc.com/xyz/mmm/lorum/ 
```

第二个是“abc def ghi”，这是我使用的最后一部分

```
URLEncoder.encode("abc def ghi","utf-8"); 
```

这将返回“abc+def+ghi”

最终到达网址变为

```
http://abcabc.com/xyz/mmm/lorum/abc+def+ghi 
```

哪个是错的，应该是

```
http://abcabc.com/xyz/mmm/lorum/abc%20def%20ghi 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T20:09:05.857

来自[维基百科](http://en.wikipedia.org/wiki/Url_encoding#The_application.2Fx-www-form-urlencoded_type)：

> 当提交已输入 HTML 表单的数据时，表单字段名称和值将被编码并使用方法 GET 或 POST 或过去通过电子邮件在 HTTP 请求消息中发送到服务器。[2](http://docs.oracle.com/javase/6/docs/api/java/net/URLEncoder.html)默认使用的编码基于通用 URI 百分比编码规则的早期版本，并进行了一些修改，例如换行规范化和用“+”代替“%20”替换空格

所以 + 是编码空格的有效方式。

顺便说一句，这是明确[记录](http://docs.oracle.com/javase/6/docs/api/java/net/URLEncoder.html)的：

> HTML 表单编码的实用程序类。此类包含用于将 String 转换为 application/x-www-form-urlencoded MIME 格式的静态方法
> 
> [...]
> 
> 空格字符“”转换为加号“+”。

# ios - 在哪里保存以编程方式创建的文件以保护它们免受更新？

> ID：12788658
> 
> 赞同：1
> 
> 时间：2012-10-08T20:02:16.227
> 
> 标签：ios, iphone, objective-c, xcode

当我以编程方式创建图像时，我使用这种类型的代码：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                     NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *photoname=@"image.jpeg";
NSString *path = [documentsDirectory stringByAppendingPathComponent:photoname];
NSData *data;
UIImage *image= [UIImage imageWithData:[values objectForKey:@"imgdata"]];
data = UIImageJPEGRepresentation(image, 0.4f);
[data writeToFile:path atomically:YES]; 
```

我想知道，当我更新应用程序时，这些文件会被保留吗？如果没有，我该怎么办？
提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T22:32:21.390

即使用户更新应用程序，文档目录中的文件也不会被删除（除非用户进行全新安装）。

如果要处理干净安装的情况，则必须使用 iCloud。

# c# - 查看实时执行的代码

> ID：12788659
> 
> 赞同：1
> 
> 时间：2012-10-08T20:02:27.207
> 
> 标签：c#, .net, visual-studio, visual-studio-2012

我正在**调试模式下从****Visual Studio** 2012运行应用程序，

 **我想看看实时执行了哪些代码，这相当于做

```
Console.WriteLine(" command.do ... etc. "); 
```

在每一行之后

是否可以实时查看执行了哪些代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:10:29.380

是和不是。

是的，从技术上讲，做到这一点是可行的。

不，您不会找到执行此操作的工具（当然，我不能 100% 确定什么不存在）。

* * *

这可以使用 .NET 框架提供的分析 API 来完成。一些分析器甚至宣传逐行跟踪，但这仅意味着他们将测量每一行的时间，而不是使用一些快捷方式来降低性能损失。

然而，你应该试着解释你最终想要完成的事情，而不是试图强迫自己走最短的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T22:13:29.883

我建议你看看像 JetBrains 这样的工具。它有 10 天的免费试用期，并且可以很好地集成到 Visual Studio 中。

[http://www.jetbrains.com/profiler/](http://www.jetbrains.com/profiler/)

这并不完全符合您的要求。但我想不出更好的了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-17T16:10:02.387

实时调试时，不应延迟程序。这可以使用不便宜的外部硬件来完成，例如逻辑分析仪。

与其跟踪每一行的执行，不如只跟踪一些重要行的执行。该跟踪必须非常快。Visual Studio 的跟踪太慢了，并且阻塞了调用 Trace 的第二个线程，这是实时调试中的一大禁忌。

幸运的是，编写自己的内存跟踪很容易，这只会导致微秒延迟并且是非阻塞的：

```
const int maxMessages = 0x100;
const int indexMask = maxMessages-1;
string[] messages = new string[maxMessages];
int messagesIndex = -1;

public void Trace(string message) {
  int thisIndex = Interlocked.Increment(ref messagesIndex) & indexMask;
  messages[thisIndex] = message;
} 
```

对于这种方法的更详细描述，它还收集线程和计时信息并很好地输出跟踪，位于：CodeProject：实时调试多线程代码[1](http://www.codeproject.com/Articles/792532/Debugging-multithreaded-code-in-real-time)**

# google-maps - Google Maps API：Geocode 返回的坐标与 Google 地图不同

> ID：12788664
> 
> 赞同：6
> 
> 时间：2012-10-08T20:02:47.107
> 
> 标签：google-maps, geocoding

我目前正在尝试对地址进行地理编码，但在获取准确坐标时遇到了问题。例如，如果我将地址输入谷歌地图，它会正确显示，但如果我对相同的地址进行地理编码，我只能从地理编码 json 响应以及不同的坐标中获得一个近似的位置类型。

是什么导致了这种差异，我能做些什么来提高我的地理编码的准确性，以达到手动谷歌地图地址搜索的水平？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:52:14.210

尝试将国家添加到查询中。对于都柏林 Lucan 的 Fonthill Road，它给出了不同的尺寸结果：

1.  [http://maps.google.com/maps/geo?q=Fonthill%20Road,卢肯,都柏林,即](http://maps.google.com/maps/geo?q=Fonthill%20Road,Lucan,Dublin,Ie)
2.  [http://maps.google.com/maps/geo?q=Fonthill%20Road,Lucan,Dublin](http://maps.google.com/maps/geo?q=Fonthill%20Road,Lucan,Dublin)

注意：我使用都柏林 Lucan 的 Fonthill Road。因此，将区域放入查询中会使响应的大小产生巨大差异。地理编码 -6.4059442, 53.3473048 非常靠近 Unit 1,Fonthill Retail Park,Lucan,Co。都柏林。

我的结论是您需要比较姓名和地址，因为您的查询结果是：

"name": "Fonthill Retail Park,Lucan,Co. Dublin,Ie", "address": "Lucan, Co. Dublin, Irland",

因此，谷歌中没有 Fonthill 零售公园，所以反向地理编码是都柏林的卢坎，这正是您在地图上找到的！？！

在我的示例中，我使用地址 Fonthill Road ...，结果给出

“名称”：“Fonthill Road,Lucan,Dublin,Ie”和地址：“地址”：“Fonthill Rd N, Dublin, Co. Dublin, Irland”,

这是完全相同的，地理编码也显示了正确的位置，但我不确定该区域是否如此重要，这可能是我错了，但我认为如果你想提高你的准确性，你需要遍历响应反正？？

您是否阅读过：[https](https://developers.google.com/maps/documentation/geocoding/index#RegionCodes) ://developers.google.com/maps/documentation/geocoding/index#RegionCodes ？

# php - 为什么我的 CKEditor 会添加垃圾代码？

> ID：12788667
> 
> 赞同：1
> 
> 时间：2012-10-08T20:03:15.957
> 
> 标签：php, javascript, ckeditor

我将 CKEditor 用于我的后端应用程序。

我已经按照官方文档中的说明进行了安装（非常简单）。然而，例如，当尝试添加此文本时（我可以在这篇文章中从 SO 复制/粘贴它，它完全相同）：

> 你不只是想让人们听到你的声音。你想让他们听。
> 
> 新闻剪辑和专栏文章每时每刻都被链接、博客、发布、推文和转发，这对我们来说是一个很大的要求。全国无数的声音在现代媒体的回音室中相互淹没。潜在的革命可能会在公司备忘录上留下脚注，而声誉可能会在发布 Facebook 状态所需的时间内消失或重生。
> 
> 对于全球的企业和议程制定者来说，这一切都相当于一个重要的问题：“我们如何超越噪音并真正产生影响？”
> 
> 这就是我们进来的地方。
> 
> ***N** **** Communications凭借在政治、宣传和企业领域的丰富公共关系经验，引领着创造性和彻底有效的传播活动，这些活动渗透到全国性的对话中，并将其引导至我们客户的目标。同步嗡嗡声意味着协调噪音。突然间，你被倾听了，而不仅仅是被听到了。
> 
> 我们为非营利和营利领域的客户提供服务，领导从政治竞选战略到行政演讲写作的项目。我们曾为首席执行官、民选官员、从总统到地方一级的政治候选人以及从 527 个团体到主要国家工会的进步组织工作。

我有这样的事情：

```
<p>
    &nbsp;</p>
<p 0px="" color:="" font-family:="" font-size:="" hear="" helvetica="" just="" line-height:="" p="" people="" style="margin: 0px 0px 10px; text-align: justify; font-size: 16px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 20px; " t="" them="" to="" want="" you="" you.="">
    &nbsp;</p>
<p 0px="" color:="" font-family:="" font-size:="" hear="" helvetica="" just="" line-height:="" p="" people="" style="margin: 0px 0px 10px; " t="" them="" to="" want="" you="" you.="">
    Barraged as we are with news clips and op-eds that get linked, blogged, posted, tweeted and re-tweeted on a minute-to-minute basis, that&#39;s a lot to ask for. Countless voices across the nation drown each other out in the echochamber of modern media. Would-be revolutions can wind up footnotes on corporate memos, and reputations can die or reincarnate in the time it takes to post a Facebook status.</p>
<p 0px="" above="" agenda-setters="" all="" amounts="" an="" and="" businesses="" color:="" do="" font-family:="" font-size:="" for="" helvetica="" how="" important="" line-height:="" make="" noise="" one="" p="" question:="" really="" rise="" style="margin: 0px 0px 10px; " the="" this="" to="" we="">
    That&#39;s where we come in.</p>
<p 0px="" a="" advocacy="" and="" buzz="" campaigns="" color:="" communications="" conversations="" corporate="" creative="" direct="" downright="" drawing="" effective="" experience="" font-family:="" font-size:="" from="" goals.="" harmonizing="" heights="" helvetica="" in="" infiltrate="" just="" line-height:="" listened="" means="" national="" new="" noise.="" not="" of="" our="" p="" public="" re="" relations="" spearheads="" style="margin: 0px 0px 10px; " suddenly="" synchronizing="" that="" the="" them="" to="" wealth="">
    We service clients in both the nonprofit and for-profit spheres, leading projects which range from political campaign strategy to executive speechwriting. We&#39;ve worked for CEOs, elected officials, political candidates from the presidential to local level, and progressive organizations from 527 groups to major national unions.</p> 
```

这完全是垃圾且无法使用，所以如果我决定保存该文本，这就是我在源代码（如果我单击源代码）和数据库中获得的内容。它似乎肯定来自 CKEditor 本身。

这个问题从何而来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T15:14:48.180

您确定您使用的是最新版本的 CKEditor 并且您没有以某种奇怪的方式对其进行修改吗？我正在选择、复制引用的文本并粘贴到[http://ckeditor.com/demo](http://ckeditor.com/demo)上的编辑器中，这是源代码的一部分：

火狐：

```
<blockquote>
    <p>
        You don&#39;t just want people to hear you. You want them to listen.</p>
    <p>
        Barraged as we are with news clips and op-eds that get linked, blogged, posted, tweeted and re-tweeted on a minute-to-minute basis, that&#39;s a lot to ask for. Countless voices across the nation drown each other out in the echo chamber of modern media. Would-be revolutions can wind up footnotes on corporate memos, and reputations can die or reincarnate in the time it takes to post a Facebook status.</p>
    <p>
        For businesses and agenda-setters worldwide, this all amounts to one important question: &quot;How do we rise above the noise and really make an impact?&quot;</p> 
```

铬合金：

```
<p>
    &nbsp;</p>
<p style="margin: 0px 0px 1em; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background-color: transparent; clear: both; word-wrap: break-word; color: rgb(0, 0, 0); font-family: Arial, 'Liberation Sans', 'DejaVu Sans', sans-serif; line-height: 18px; ">
    You don&#39;t just want people to hear you. You want them to listen.</p>
<p style="margin: 0px 0px 1em; padding: 0px; border: 0px; font-size: 14px; vertical-align: baseline; background-color: transparent; clear: both; word-wrap: break-word; color: rgb(0, 0, 0); font-family: Arial, 'Liberation Sans', 'DejaVu Sans', sans-serif; line-height: 18px; ">
    Barraged as we are with news clips and op-eds that get linked, blogged, posted, tweeted and re-tweeted on a minute-to-minute basis, that&#39;s a lot to ask for. Countless voices across the nation drown each other out in the echo chamber of modern media. Would-be revolutions can wind up footnotes on corporate memos, and reputations can die or reincarnate in the time it takes to post a Facebook status.</p>
<div>
    &nbsp;</div> 
```

现在，是什么导致了浏览器之间的这种差异，第二个来源是否正确？

首先 - 这不是 CKEditor 的错，而是 Chrome 的错，它看起来像这样。它放入剪贴板**样式的 HTML**，我们对此无能为力。当然你可以说在 TinyMCE 中你只会得到文本，没有格式化。但这是处理粘贴内容的一种盲目方式。这样，TinyMCE 也会丢失编辑器中应用的内联样式 - 例如字体大小。在那里写几个字，应用字体大小，复制和粘贴，你就会失去它。

所以......两个输出（Firefox 和 Chrome）都是正确的，这是我们能做的最好的。但是，如果您的 HTML 确实与您附加的内容相似，那么问题很可能出在您的网站上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T23:14:06.963

您的页面中可能与其他 JavaScript 存在冲突，页面中是否正在加载任何其他 JavaScript 库或脚本？

尝试使用在测试页面中设置默认配置设置的基本 CKEditor 可能是一个好主意。这会让你知道它是否真的是 CKEditor 的问题。

如果仍然有问题，请重新下载 CKEditor 和 jQuery，然后再做一个独立的测试页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-10T16:13:25.250

我找到了解决我的问题的方法。这是因为我拥有的 post 变量在添加到数据库之前被传递到了 trim 和 xss 过滤预处理函数。这就是导致这种奇怪行为的原因。

# ruby - 使用 Ruby 解析 JSON 对象时出错

> ID：12788668
> 
> 赞同：1
> 
> 时间：2012-10-08T20:03:32.323
> 
> 标签：ruby, json

我正在尝试使用以下代码解析 ruby​​ 中的 JSON 对象：

```
def parseUrls(mFile, dirname)

    f = File.open(File.join(dirname, mFile), 'r') 
    mF = f.read

    json = JSON.parse(mF)

    commands = json["commands"]
    #puts commands

    commands.each do |url|
        puts url

        mUrl = url["#EXAMPLE_DOCUMENTATION_CALL"]["URL"]
        puts mUrl

        #mString = String.new(DMMSERVER)
        #i = mString.count(DMMSERVER)
        #mUrl = mString.insert(i, tUrl)

        #puts mUrl

    end 
```

但我不断收到此错误：

```
 TypeError: can't convert String into Integer
                  [] at org/jruby/RubyArray.java:1348
           parseUrls at ./fileParser.rb:48
                each at org/jruby/RubyHash.java:1181
           parseUrls at ./fileParser.rb:45
  sendServiceRequest at testmdxservices.rb:31
             getFile at testmdxservices.rb:20
                each at org/jruby/RubyArray.java:1620
             getFile at testmdxservices.rb:17
              (root) at testmdxservices.rb:39 
```

使用这个 JSON：

```
"commands":{
        "#EXAMPLE_DOCUMENTATION_CALL":{
            "TYPE"  : "this is the server set we are comunicating with. example DMM, WDPRO, GOREG, ONESOURCE..etc if you don't know what these are ask some one from the team or look at QUICNY",
            "URL"   : "the full url of the call that will be turned into an http header",
            "METHOD": "this is a flag that tells the user what kind of call in http to make. 0 = post, 1 = get, 2 = postmulti  See int/uie_HttpRequests.ent for complete",
            "BODY": "this is the body of the http call depending on the call type this will change or not exist often with things that need to be filled in about it.",
            "NOTE": "comment section for information about how to use or what to expect when making this call."
        }, 
```

谁能告诉我我做错了什么以及如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T20:44:35.667

`commands`是一个散列，因此块产生的值是一个两元素数组，`[key,value]`而我认为你假设你传递的只是值。因此`url`是一个数组，所以当你请求时，ruby 不知道该怎么做`url['#EXAMPLE_DOCUMENTATION_CALL']`

正确的做法取决于 json 的其余部分是什么样的——如果你只想提取那个 url，那么

```
commands['#EXAMPLE_DOCUMENTATION_CALL']['URL'] 
```

应该做的伎俩。如果你确实想遍历`commands`然后

```
commands.each |key, value| do
  ...
end 
```

比拥有一个数组的单个块参数更容易使用

# delphi - 如何修复 TComboBox Ctl3D 属性错误？

> ID：12788670
> 
> 赞同：3
> 
> 时间：2012-10-08T20:03:35.537
> 
> 标签：delphi, interface, combobox, delphi-2006

这是一张来自顶部和`TForm`底部的图像。`TEdit``TComboBox`

![在此处输入图像描述](../Images/0d4edc4397a1cb260614afed12bee35e.png)

如您所见，TEdit 没有 Windows 控件默认主题的经典 3D 边框。那是因为我`Ctl3D property`将该组件的 设置为`False`. 然后您会看到 TComboBox 具有正常的 3D 边框，但在这种情况下，我还将`Ctl3D property`该组件的 设置为`False`，但它继续显示 3D 边框。

这似乎是开发级别的 Delphi 错误。我怎么能在代码中解决这个问题？

* * *

在测试了 RRUZ 的答案后`BevelKind=bkFlat`，出现了：

![在此处输入图像描述](../Images/f51f636a3e852c7867ea30b363bad2c4.png)

我不知道为什么它如此不同......而且很奇怪。：-/

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T20:26:48.407

您可以将 3D 边框设置为的[`BevelKind`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Controls.TWinControl.BevelKind)属性。[`TComboBox`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.StdCtrls.TComboBox)`bkFlat`

![在此处输入图像描述](../Images/1ae7321b9756fa207b318d3fff41251a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:10:24.917

我找到了：

我们必须设置：

`BevelInner`到`bvNone`;

`BevelKind`到`bkFlat`;

`BevelOuter`到`bvSpace`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-02T09:19:51.993

这是支持`BidiMode`和调整大小的最佳方式；并且可以用客户端颜色填充边框：

```
TTestComboBox=class(TComboBox)
protected
  procedure WMPaint(var Msg: TMessage); message WM_Paint;
End;

Procedure TTestComboBox.WMPaint(var Msg: TMessage);
var MCanvas: TControlCanvas;
    R: TRect;
Begin
  inherited;
  MCanvas:=TControlCanvas.Create;
  Try
    MCanvas.Control:=Self;
    With MCanvas do begin
      R:=ClientRect;
      Brush.Style:= bsClear;
      Pen.Color:= Color;
      Pen.Width:= 3;
      if BiDiMode in [bdRightToLeft, bdRightToLeftNoAlign] then begin
        if Style = csSimple then                   //remove border and space
          Rectangle(1, 1, R.Width - 1, R.Height-1) else Rectangle(-1, 1, R.Width, R.Height-1);
        if Style in [csDropDown, csOwnerDrawFixed, csOwnerDrawVariable] then begin
          Pen.Width:= 5;                           //remove space btw editor and button
          MoveTo(18, 0);
          LineTo(18, R.Height-1);
        end;
      end else begin
        if Style = csSimple then
          Rectangle(1, 1, r.Width - 1, R.Height-1) else Rectangle(1, 1, r.Width + 1, R.Height-1);
        if Style in [csDropDown, csOwnerDrawFixed, csOwnerDrawVariable] then begin
          Pen.Width:= 5;
          MoveTo(R.Width - 18, 0);
          LineTo(R.Width - 18, R.Height-1);
        end;
      end;
    end;
  finally
    MCanvas.Free;
  End;
End; 
```

# android - 使用 Drawable 进行 EditText 测量

> ID：12788676
> 
> 赞同：0
> 
> 时间：2012-10-08T20:04:11.397
> 
> 标签：android, android-layout, android-widget

我想创建类似 ComboBox 的东西，但在 TextView 的右侧有箭头按钮。到目前为止，我看到的所有方法都将箭头放在文本字段之外（作为一个额外的按钮）——我不喜欢。为了模拟它，我想我可以这样做

```
 android:drawableRight="@android:drawable/arrow_up_float"
 android:ems="10" 
```

看起来不错，从某种意义上说，箭头在右侧。我想我可以在它后面放一个渐变色，比如：

```
 int witdhComboBox = 50;
  @Override
  protected void onDraw(Canvas canvas) {
    //
    Paint paint = new Paint();

    final int bottom = getBottom() - 10;
    paint.setShader(new LinearGradient(0, 0, 0,bottom,
                                       Color.WHITE,
                                       Color.GRAY,
                                       Shader.TileMode.REPEAT));
    canvas.drawRect(new Rect(getRight() - witdhComboBox,
                             getTop() - getPaddingTop() - getTopPaddingOffset()
                                 + getBottomPaddingOffset()
                                 + getPaddingBottom(),
                             getRight() - 8,
                             bottom), paint);
    super.onDraw(canvas);
  } 
```

但遭受明显不适当的填充物。布局中的尺寸不正确。我在日食时看起来很好：

![在此处输入图像描述](../Images/85c30c9916bb1fa2eed287c085c3e07e.png)

但是当我登上我的 Galaxy Note 时，它​​看起来太窄了：

![太窄](../Images/6a3cc3aefcd5c2b98cc2283ad7c40726.png)

在 HTC Desire 上它看起来太宽了（并且没有正确结束，我不会那么介意）：

![在此处输入图像描述](../Images/06cda73f3f654664df7baea8473d24ea.png)

有没有把渐变直接**放在**箭头下面的好方法？因为目前我猜它是分辨率和不同样式的附加空间的综合问题。

# android - 使用nfc的android解锁屏幕

> ID：12788679
> 
> 赞同：1
> 
> 时间：2012-10-08T20:04:39.290
> 
> 标签：android, screen, nfc, unlock

我想在检测到标签时解锁安卓屏幕 - 基于标签 ID。

类似于 com.biwota.cerbero 是如何完成的。这里有人有任何经验或知道如何做到这一点。? 你能指出正确的方向吗？

谢谢多尼克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T05:21:53.127

不幸的是，这是不可能的。从 Android 4.0 ICS 开始，当屏幕关闭或锁定时，NFC 轮询会关闭。只有使用自定义 ROM，您才能修改此行为。

# html - 链接文本比普通文本粗

> ID：12788683
> 
> 赞同：0
> 
> 时间：2012-10-08T20:04:46.110
> 
> 标签：html, css

如何在保持链接不变的同时使下面的文本变粗？

```
li
{
    list-style-type:none;
    font-size: 14px;
    line-height:28px;
    font-weight:thick 
}

a:link 
{
color:#3399CC; 
}

...

<div id="left_column" >
    <ul>
    <li><a href="a.html">Im happy as I am</a>&nbsp-&nbspI want to be less thick</li>
    <li><a href="b.html">Im also happy as I am</a>&nbsp-&nbspI also want to be less thick</li>
    </ul>    
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:20:08.250

看起来您希望链接加粗，文本不那么粗（即不加粗）

看看下面的代码，除了我在你的标签中定义之外`font-weight:normal;`，`<li>`和你的一样。[这是工作示例](http://jsfiddle.net/dsanto/vnHKR/)。`font-weight:700;``<a>`

在你的代码中试试这个：

```
li
{
    list-style-type:none;
    font-size: 14px;
    line-height:28px;
    font-weight:normal; 
}

a:link 
{
font-weight: 700;
color:#3399CC;
}

<div id="left_column" >
    <ul>
    <li><a href="a.html">Im happy as I am</a>&nbsp-&nbspI want to be less thick</li>
    <li><a href="b.html">Im also happy as I am</a>&nbsp-&nbspI also want to be less thick</li>
    </ul>    
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T06:25:22.220

我认为[这段代码](http://jsfiddle.net/gYFxQ/)可以回答您的查询。

```
<html>
<head>
<style>
body
{
    color:#3399CC;
    font-size: 10px;
}
li {
    list-style-type:none;
    font-size: 22px;
    line-height:28px;
    font-weight:thick 
}
ol>li>a{
    color:#3399CC; 
    font-size: 10px;
}

</style>
<body>
<div id="left_column" >
    <ol>
    <li><a href="a.html">Im happy as I am</a>&nbsp;&nbsp;I want to be less thick</li>
    <li><a href="b.html">Im also happy as I am</a>&nbsp;&nbsp;I also want to be less thick</li>
    </ol>    
    hree
</div>
</body>
</html> 
```

# java - 在数据库中保存语言环境

> ID：12788685
> 
> 赞同：3
> 
> 时间：2012-10-08T20:04:59.280
> 
> 标签：java, database, locale

在我的带有 JDK 7 的 JSF 2.1 应用程序中，我搜索了一种解决方案，为我的用户提供保存他们首选语言的可能性。因此，在下次登录时，应该从数据库接收语言并替换为默认语言（浏览器）。我现在唯一的问题是，如何将 java.util.Locale 保存在我的数据库中？经过数小时的谷歌搜索，我在 JDK 7 中发现了一个新功能，即“forLanguageTag 工厂方法”。此方法返回一个区域设置，并且只需要一个 IETF BCP 47 标准字符串。

这听起来很简单，对我来说很棒。但是我怎样才能从现有的语言环境中获得这个“IETF BCP 47 标准”-String？我查看了 API，但没有发现任何可以与“IETF BCP 47 标准”相媲美的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T22:01:57.257

考虑[Locale.toLanguageTag](http://docs.oracle.com/javase/7/docs/api/java/util/Locale.html#toLanguageTag%28%29)：

> 返回表示 [a] 语言环境的格式良好的**IETF BCP 47**语言标签。

示例用法：

```
String expectedTag = "en-US";
Locale locale = Locale.forLanguageTag( expectedTag );
String actualTag = locale.toLanguageTag();
Assert.assertEquals( expectedTag, actualTag ); 
```

**注意：** [javadocs](http://docs.oracle.com/javase/7/docs/api/java/util/Locale.html#toLanguageTag%28%29)中提到了一些限制。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T20:51:53.197

如果您只是对语言感兴趣，只需使用[`Locale.getLanguage()`](http://docs.oracle.com/javase/6/docs/api/java/util/Locale.html#getLanguage%28%29)将语言环境转换为字符串，并将[`new Locale(String language)`](http://docs.oracle.com/javase/6/docs/api/java/util/Locale.html#Locale%28java.lang.String%29)字符串转换为语言环境。

如果要存储整个 Locale，请使用[`Locale.toString()`](http://docs.oracle.com/javase/6/docs/api/java/util/Locale.html#toString%28%29), 和一个自定义方法，该方法将`_`字符串转换为 Locale 的三个部分。

# cocoa - 提取 NSString 的第一个 Unicode 代码点（在 BMP 之外）的最简单方法？

> ID：12788691
> 
> 赞同：4
> 
> 时间：2012-10-08T20:05:41.403
> 
> 标签：cocoa, nsstring, surrogate-pairs

由于历史原因，Cocoa 的 Unicode 实现是 16 位的：它`0xFFFF`通过“代理对”处理上面的 Unicode 字符。这意味着以下代码将不起作用：

```
NSString myString = @"";
uint32_t codepoint = [myString characterAtIndex:0];
printf("%04x\n", codepoint);  // incorrectly prints "d842" 
```

现在，*这段*代码 100% 的时间都有效，但它非常冗长：

```
NSString myString = @"";
uint32_t codepoint;
[@"" getBytes:&codepoint maxLength:4 usedLength:nil
    encoding:NSUTF32StringEncoding options:0
    range:NSMakeRange(0,2) remainingRange:nil];
printf("%04x\n", codepoint);  // prints "20d20" 
```

*这段*代码使用工作，`mbtowc`但它仍然非常冗长，影响全局状态，不是线程安全的，并且可能会填满自动释放池：

```
setlocale(LC_CTYPE, "UTF-8");
wchar_t codepoint;
mbtowc(&codepoint, [@"" UTF8String], 16);
printf("%04x\n", codepoint);  // prints "20d20" 
```

是否有任何*简单的*Cocoa/Foundation 习惯用法用于从 NSString 中提取第一个（或第 N 个）Unicode 代码点？最好是只返回代码点的单行代码？

[在这篇关于 Cocoa Unicode 支持的出色总结](http://blog.ablepear.com/2010/09/objective-c-tuesdays-slicing-and-dicing.html)（接近文章末尾）中给出的答案只是“不要尝试。如果您的输入包含代理对，请将它们过滤掉或其他什么，因为没有理智的方法来处理它们适当地。”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T23:11:54.797

单个 Unicode 代码点可能是代理对，但并非所有语言字符都是单个代码点。即不是所有的语言字符都由一个或两个 UTF-16 单元表示。许多字符由一系列 Unicode 代码点表示。

这意味着除非您正在处理 Ascii，否则您必须将语言字符视为子字符串，而不是索引处的 unicode 代码点。

要获取索引 0 处字符的子字符串：

```
NSRange r = [[myString rangeOfComposedCharacterSequenceAtIndex:0];
[myString substringWithRange:r]; 
```

这可能是也可能不是您想要的，这取决于您实际希望做什么。例如，尽管这会给您“字符边界”，但它们不会对应于特定于语言的光标插入点。

# jquery - 如何通过在当前页面上滑动来加载新页面

> ID：12788692
> 
> 赞同：0
> 
> 时间：2012-10-08T20:05:42.137
> 
> 标签：jquery, pagination

我喜欢这个网站向您展示某个项目 [http://www.craigandkarl.com/# 的详细信息的方式！](http://www.craigandkarl.com/#!)转到他们的工作部分并单击缩略图。我想复制这个效果。我试图获取与该网站相关的所有代码和文件，但是当我尝试查看某个项目的详细信息时，我的页面中断了。

我可能必须在[此处使用输入链接描述](http://demos.flesler.com/jquery/localScroll/)来完成我需要完成的工作，但这不是 craig 和 karl 用于他们的投资组合的内容。任何帮助将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:09:23.990

实现这种效果的一个简单方法是让一个 div 向左飞出。这[可以使用 jQuery 轻松完成](http://docs.jquery.com/Tutorials:How_jQuery_Works)。

然后，您可以根据您按下的缩略图指定要通过 ajax 加载到此 div 中的内容。同样，[jQuery 可以做到这一点](http://api.jquery.com/jQuery.ajax/)。

这是一个你肯定可以扩展做你想做的例子：http: [//jsfiddle.net/HVFhE/](http://jsfiddle.net/HVFhE/)

但是，您可以通过像这样检查其资源来查看该站点正在使用的内容：

![在此处输入图像描述](../Images/eeb39f6652c77ce9c1e76b710eb70495.png)

例如，在他们的`common.js`

```
.animate({top: $(window).height() + 'px'}, 0)
.load('pages/project.cfm?projectid=' + $.address.parameter('projectid') + '&image=1&top=1', function() {
$('#project-2-footer').stop() 
```

免责声明：我不提倡窃取他人的代码。

# wpf - 无法动态更改内容模板

> ID：12788694
> 
> 赞同：1
> 
> 时间：2012-10-08T20:05:59.853
> 
> 标签：wpf, triggers, datatemplate

我有一个`ContentControl`需要`ContentTemplate`动态设置的。

所以我决定写 2 `DataTemplates`，然后设置我的样式`ContentControl`，以便在我的视图模型中的布尔依赖属性更改（真/假）时触发触发器并设置正确的模板（dt1/dt2）。

但问题是如果 Boolean 属性主要设置为`true`，则数据模板将始终为`dt1`，并且将属性更改为`false`不会将模板更改为`dt2`。

由于数据触发器绑定到布尔依赖属性，不应该更改属性导致触发触发器吗？

笔记：

*   有一个按钮`MyView`可以改变`BooleanDependencyProp`它的点击事件。
*   `MyViewModel`继承自实现`INotifyPropertyChanged`.

xml:

```
<UserControl x:Class="Views.MyView">
...

<StackPanel>
    <ContentControl Content="{Binding RelativeSource={RelativeSource AncestorType=MyView}, Path=MyViewModel}">
        <ContentControl.Style>
            <Style TargetType="{x:Type ContentControl}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding BooleanDependencyProp}" Value="true">
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <dt1 ... />
                                                    </Setter.Value>
                                                </Setter>
                    <DataTrigger Binding="{Binding BooleanDependencyProp}" Value="false">
                                                <Setter Property="ContentTemplate">
                                                    <Setter.Value>
                                                        <dt2 ... />
                                                    </Setter.Value>
                                                </Setter>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </ContentControl.Style>
    </ContentControl>
</StackPanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:09:55.157

这是 WPF 框架的一个已知缺点，如果您想应用不同的数据模板，请考虑使用可视状态管理器来更改表​​示，或者将内容数据模板换成基于触发器更改的用户控件，你会得到更多的里程。

我可以说的还有很多，但这将涉及了解您的场景以及这些 DataTemplate 中的差异、您为什么要消除歧义等等。还有，MVVM 无处不在？还是带有几个视图模型的直接代码+标记样式？

# ruby-on-rails - Rails - 如何根据子属性调整父属性？

> ID：12788695
> 
> 赞同：0
> 
> 时间：2012-10-08T20:05:59.150
> 
> 标签：ruby-on-rails, ruby, activerecord

好的，我希望在 Rails 应用程序中实现一些相当直接的东西，但是 Rails 回调、事务和缓存正在变得更好。

**这就是我想要实现的目标：**
两个对象`project`和`task`. 两者都有一个属性`finish_date`。还有一个`project :has_many => :tasks`。

我想告诉它`project`，它自己的`finish_date`永远不能早于`finish_date`它的最新版本`tasks`。每当`task`更新 a 时，如果需要，`project`父级应检查并调整自己的`finish_date`。

我一直在搞乱`after_save`回调，由于事务和内存中同一对象的多个版本，它并不像我想象的那么简单。也许我只是做错了。

**我如何在 Rails 中实现它？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:57:11.350

你可以使用**touch**选项而不是**after_save**。

如果将 :touch 选项设置为 :true，那么每当保存或销毁该对象时，关联对象上的 updated_at 或 updated_on 时间戳将设置为当前时间。您还可以指定要更新的特定时间戳属性。

```
class Task < ActiveRecord::Base
  belongs_to :project, :touch => :project_end_date
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:29:23.770

下面的模型怎么样`Task`：

```
class Task < ActiveRecord::Base
  belongs_to :project

  def after_save(task)
    self.project.finish_date = self.finish_date
  end
end 
```

项目的`finish_date`将设置为任务的`finish_date`. 代码假设，当前保存的任务总是`finished_date`和其他任务一样。这是一个错误的假设，只需添加适当的`if`语句:)

**编辑**

我从评论中的建议是使用`Task`上面列出的内容并像这样覆盖`finish_date`setter `Project`：

```
class Project < ActiveRecord::Base
  has_many :tasks

  def finished_date=(new_finish_date)
    self[:finish_date] = new_finish_date if self[:finish_date] < new_finish_date
  end
end 
```

由于我是从头开始编码的，因此我不确定在此之后是否应该保存项目实例。也许`update_attributes`在 setter 中使用可能是一个更好的主意。

**关于这里的其他解决方案**

@Joelios 解决方案建议了我所做的，只是没有覆盖设置器。问题在于，Rails 包含的方法总是使用 setter（偶数`update_attributes`和`create`）。因此，您必须自己调用`update_task_date`可能会忘记的方法。

@saverios 解决方案建议使用 Observer/Observable 模式。因此，正如我所见，它将成为其所有对象`Project`的观察者。`Task`当 a`Task`发生变化时，它会调用它的所有观察者，即它的项目，它本身会更新它的`finish_date`. 这与我仅使用设计模式所建议的不太一样，因此变得更加困难。

另一个可以考虑的解决方案是定义一个新函数`update`，比如`Project`遍历所有连接的任务，寻找最新的`finish_date`. `update`每当任务更新时，都必须调用该方法。这将是一个非常糟糕的设计，因为 n 个任务之一的每次更新都会触发 n 个数据库查询并减慢一切。

希望对面临同样问题的人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T20:23:18.640

我不确定您的问题是什么，但请先尝试不使用回调：

向您的任务添加一个名为 update_task_date 的方法

```
def update_task_date(new_date)
  project.finish_date = new_date if self.project.finish_date < new_date
  project.save
  finish_date = new_date
  self.save 
```

结尾

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T23:13:17.473

观察者呢？您的模型将不受其他模型的知识影响，并且您将把这些知识封装到一个单独的类中。

[http://api.rubyonrails.org/classes/ActiveRecord/Observer.html](http://api.rubyonrails.org/classes/ActiveRecord/Observer.html)

# objective-c - NSMutableArray 排序返回错误的顺序

> ID：12788705
> 
> 赞同：0
> 
> 时间：2012-10-08T20:07:42.120
> 
> 标签：objective-c, ios, sorting, comparison, nsmutablearray

我正在尝试根据两个位置之间的距离（当前位置和第一个 for 循环中的指定坐标）对 NSMutableArray 进行排序。但是，排序不会返回任何特定的顺序，而是完全随机的顺序（参见此处的图片：http: [//u.maxk.me/iz7Z](http://u.maxk.me/iz7Z)）。

请你能告诉我哪里出错了吗？

排序：

```
[self.venues sortUsingComparator:^NSComparisonResult(id obj1, id obj2) {

    return [[obj1 objectForKey:@"distance"] compare:[obj2 objectForKey:@"distance"]];

}]; 
```

`-setVenues:`

```
- (void) setVenues:(NSMutableArray *)_venues {

    if (venues != _venues) {

        [venues release];

        ...

        NSMutableArray *updatedVenues = [NSMutableArray array];            

        for (NSDictionary *venue in _venues) {

            ...

            if (address != nil && city != nil) {

                CLLocationCoordinate2D coord = CLLocationCoordinate2DMake([[_location objectForKey:@"lat"] floatValue], [[_location objectForKey:@"lng"] floatValue]);

                CLLocation *currentLoc = [[CLLocation alloc] initWithLatitude:self.currentLocation.latitude longitude:self.currentLocation.longitude];
                CLLocation *venueLoc = [[CLLocation alloc] initWithLatitude:coord.latitude longitude:coord.longitude];

                CLLocationDistance distance = [venueLoc distanceFromLocation:currentLoc];

                float miles = distance / 1000;
                miles *= 0.621371192; // metres to miles

                NSMutableDictionary *newLocation = [NSMutableDictionary dictionaryWithDictionary:_location];
                [newLocation removeObjectForKey:@"distance"];
                [newLocation setObject:[NSNumber numberWithFloat:miles] forKey:@"distance"];
                _location = [NSDictionary dictionaryWithDictionary:newLocation];

                ...

                NSMutableDictionary *newVenue = [NSMutableDictionary dictionaryWithDictionary:venue];
                [newVenue removeObjectForKey:@"location"];
                [newVenue setObject:_location forKey:@"location"];                   
                [updatedVenues addObject:newVenue];

            }

        }

        venues = [updatedVenues retain];

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T20:57:38.347

看起来您需要按场地.location.distance 进行排序：

```
[self.venues sortUsingComparator:^NSComparisonResult(id obj1, id obj2) {

    NSNumber *distance1 = [[obj1 objectForKey:@"location"] objectForKey:@"distance"];
    NSNumber *distance2 = [[obj2 objectForKey:@"location"] objectForKey:@"distance"];
    return [distance1 compare:distance2];

}]; 
```

如果您使用的是 Xcode >= 4.4（iOS 为 4.5）的版本，您可以这样做：

```
[self.venues sortUsingComparator:^NSComparisonResult(id obj1, id obj2) {
    return [obj1[@"location"][@"distance"] compare:obj2[@"location"][@"distance"]];

}]; 
```

# c# - 以编程方式访问 WPF 控件

> ID：12788709
> 
> 赞同：2
> 
> 时间：2012-10-08T20:08:08.697
> 
> 标签：c#, wpf, .net-4.5

这个问题可能很明显，但我很难看到它。

我有以下 XAML：

```
<ItemsControl x:Name="contentList">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="200" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="{Binding Name}" TextWrapping="Wrap" />
                    <ItemsControl x:Name="imageContent" Grid.Column="1">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding ImageCollection.FullName}" TextWrapping="Wrap" />
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </Grid>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl> 
```

我已经为 contentList 设置了 itemsSource，如下所示：

```
contentList.ItemsSource = myObservableCollection; 
```

但是，当我尝试对 imageContent 执行相同操作时，我似乎无法通过 IntelliSense 访问它。我已经尝试过清理/重建项目，但没有任何区别。

我需要以不同的方式访问 imageContent 吗？

我想对 contentList 和 imageContent 使用 myObservableCollection，因为它具有以下结构：

*   名称（字符串）
*   图像集合（可观察集合）

旨在生成以下 UI：

![在此处输入图像描述](../Images/50af8fcb363de75e556d1c575785d965.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:37:16.430

您需要在外部集合的列表对象中定义另一个 ObservableCollection。像这样的东西：

```
ObservableCollection<MyObject> OuterList = new ObservableCollection<MyObject>();

//...

public class MyObject
{
    public ObservableCollection<FileInfo> ImageCollection {get; set;}
    public MyObject()
    {
        ImageCollection = new ObservableCollection<FileInfo>();
    }
} 
```

然后像这样更新你的xaml：

```
...
<ItemsControl x:Name="imageContent" ItemsSource="{Binding ImageCollection}">
... 
```

因此，这将导致您的外部列表中的每个项目都保存它自己的可观察集合来保存它的列表。

同样通过此更改确保您更新文本块上的绑定，因为每个项目将代表一个 FileInfo 对象，您可以简单地编写以下代码：

```
<DataTemplate>
    <TextBlock Text="{Binding FullName}" TextWrapping="Wrap" />
</DataTemplate> 
```

# c - 搜索 C 中的最大整数（大于 2）

> ID：12788713
> 
> 赞同：0
> 
> 时间：2012-10-08T20:08:22.207
> 
> 标签：c, search, numbers

如何在一组整数（cat1、cat2、cat3、cat4）中搜索最大数字这样做的方法，而不是为每个可能的解决方案制作一个 IF 语句？如果数字的数量更大？（例如 10 ！！！！）谢谢。这是我的代码

```
if (cat1 > cat2 && cat1> cat3 && cat1>cat4)
    printf("cat 1 is the biggest", cat1);  

if (cat2 > cat1 && cat2> cat3 && cat2>cat4)
    printf("cat 2 is the biggest", cat2) ;  

if (cat3 > cat1 && cat3> cat2 && cat3>cat4)
    printf("cat 3 is the biggest", cat3) ;  

if (cat4 > cat1 && cat4> cat2 && cat4>cat3)
    printf("cat 4 is the biggest", cat4); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T20:11:40.083

使用数组非常简单：

```
int data[10] = // ... your ints;
int max = data[0];
for (int i = 1 ; i < 10 ; i++ ) 
    if (data[i] > max ) max = data[i]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:11:35.840

只需使用一个数组。这是一个查找任意大小数组的最大数的示例。

```
int main(){
  int size,i,biggest;
  int *a = NULL;      

  printf("\nEnter the size of the array: ");
  scanf("%d",&size);

  a = malloc(size * sizeof(int));
  printf("\nEnter %d elements in to the array: ”, size);
  for(i=0; i<size; i++)
      scanf("%d",&a[i]);

  // assume the first number is the biggest
  biggest=a[0];

  // iterate on the array and update the biggest number if the current value is bigger than 'biggest'
  for(i=1; i<size; i++){
      if( biggest < a[i])
           biggest=a[i];
  }
  printf("\nYour biggest number is: %d",biggest);

  free(a)
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T20:13:04.267

此函数接受一个数组及其大小作为输入。

```
int biggest(int *nn,int n) {
    int rv = *nn;
    for(++nn,--n;n;--n,++nn) if(rv<*nn) rv = *nn;
    return rv;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T20:12:43.090

```
int MAX(int a, int b) {
     return a > b ? a : b;
}

// later on...

return MAX(cat1, MAX(cat2, MAX(cat3, cat4))); 
```

# web-services - 如何在 Web 服务中使用 Intersystem 的会话

> ID：12788715
> 
> 赞同：1
> 
> 时间：2012-10-08T20:08:49.380
> 
> 标签：web-services, intersystems-cache, objectscript

我正在尝试在一个 Web 方法中设置一些会话信息并在另一个 Web 方法中返回它，但在第二个 Web 方法上会话数据始终为空。这是我尝试过的

**Web 方法 1 - 设置会话信息**

```
Method StartSession() As %String [WebMethod]
{
     set %session.NewSession = 1
     set %session.Data("key") = "dude"
     Quit "Session Started"
} 
```

**Web 方法 2 - 获取会话信息应该返回老兄，但返回空白**

```
Method TestSession() As %String [WebMethod]
{
    Quit $Get(%session.Data("key"))         
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:42:44.100

要将会话与缓存 Web 服务一起使用，您需要将 Web 服务类的 SOAPSESSION 类参数设置为等于 1。

这样做会导致 Web 服务在响应中返回 SOAP 会话标头。如果您使用的是为预期此标头而构建的客户端，您可能不需要设置任何其他内容。否则，您的客户端应用程序将必须读取此标头并将其包含在所有进一步的请求中，以便服务器可以知道您正在使用哪个会话。文档中给出的此标头的示例是：

```
<csp:CSPCHD xmlns:csp="http://www.intersystems.com/SOAPheaders">value of
CPSCHD token</csp:CSPCHD> 
```

请注意，安全性是您的示例未解决的单独问题。

另请注意，Intersystems 已决定 Web 服务将在调用后的一段时间内继续使用许可证。我找不到这方面的文档，我相信每次通话大约需要几秒钟。我相信这可能会导致许可证问题，如果您使用其他软件提供 Web 服务，并且让其他软件通过 Web 服务以外的某种机制调用 Cache，则不会发生许可证问题。我相信即使其他软件仔细遵循许可协议中关于命名用户和匿名用户的所有规则也是如此。但是，我不确定这些许可的任何内容。不过，您可能希望在提交架构之前进行一些测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T21:06:41.997

作为 psr 回答的另一种处理状态的方法是使用自定义 SOAP 标头。

例如：

为您的自定义 SOAP 标头创建一个类，如下所示：

```
Class Headers.TimeStamp Extends %SOAP.Header
{
     Property TimeSent As %TimeStamp;    
} 
```

在 web 方法中这样做：

```
set h=##class(Headers.TimeStamp).%New()
set h.TimeSent=$ZTIMESTAMP
do ..HeadersOut.SetAt(h,"Timestamp") 
```

这将生成以下 SOAP 标头：

```
 <SOAP-ENV:Header>
    <TimeStamp xmlns:hdr="http://www.myapp.org">
      <TimeSent>60712,70996.027Z</TimeSent>
    </TimeStamp>  
  </SOAP-ENV:Header> 
```

这将允许在 SOAP 标头中维护状态，而不是使用 Cache 的会话管理。

# java - 如何使用 Java 收集 AMD CPU 缓存命中率？

> ID：12788717
> 
> 赞同：3
> 
> 时间：2012-10-08T20:08:50.700
> 
> 标签：java, caching, amd-processor

我正在用 Java 编写程序

在这个程序中，我正在读取和更改一组数据。这是代码示例：

```
public double computation() {
    char c = 0;
    char target = 'a';
    int x = 0, y = 1;

    for (int i = 0; i < data.length; i++) {
        // Read Data
        c = data[index[i]];

        if (c == target)
            x++;
        else
            y++;

        //Change Value
        if (Character.isUpperCase(c))
            Character.toLowerCase(c);
        else
            Character.toUpperCase(c);

        //Write Data
        data[index[i]] = c;
    }
    return (double) x / (double) y;
} 
```

顺便说一句，INDEX 数组以随机顺序包含 DATA 数组的索引，以防止预取。我通过在 INDEX 数组中使用随机索引来强制**错过所有缓存访问。**

现在我想通过收集有关其命中率的信息来检查 CPU 缓存的行为。

有没有为此目的开发的工具？如果没有，有什么技术吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:12:38.750

我认为您无法从 Java 获得如此低级的信息，但有人可能知道得更好。您可以编写没有缓存未命中的相同程序并检查差异。例如，这就是我在[另一篇文章](https://stackoverflow.com/a/12480386/829571)中提出的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-18T08:29:49.760

在 Linux 上，可以通过[OProfile](http://oprofile.sourceforge.net)收集此类信息。每个 CPU 都有性能事件计数器。有关 AMD K15 系列活动的列表，请参见此处：http: [//oprofile.sourceforge.net/docs/amd-family15h-events.php](http://oprofile.sourceforge.net/docs/amd-family15h-events.php)

OProfile 定期对事件计数器和程序计数器进行采样。程序运行后，您可以分析发生了多少事件以及在（统计上）什么程序位置。

OProfile 已内置 Java 支持。它与 Java JIT 交互并创建一个合成符号表来查找 Java 方法名称，以便生成 JIT 代码。

初始设置并不容易。如果有兴趣，我可以指导你或写更多关于它的内容。

# caching - 服务器切换的 DNS TTL 有多可靠？（DNS TTL 覆盖）

> ID：12788719
> 
> 赞同：1
> 
> 时间：2012-10-08T20:09:01.910
> 
> 标签：caching, dns

DNS 作为在服务器之间切换的机制有多可靠？使用低 TTL，测试似乎很棒，但我想知道这对于公共生产系统有多可靠？

我对这种策略的担忧是我不确定 DNS 记录缓存是否可以被 DNS 代理覆盖，并且一些提供商可能会使用它来节省流量。如果我们使用与其他系统的集成（例如移动网络服务）会怎样？

虽然我了解符合 RFC 的 DNS 是如何工作的，但我实际上并不确定投诉网络的一般情况。（并且 DNS rr 也适用于分发，但这专门用于切换）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T23:05:10.890

对于大多数观众来说，它“足够可靠”。

是的，如果您将其设置得太低，递归 DNS 解析器确实允许管理不服从您的 TTL（例如cache-min-ttl）。此外，还有一些软件堆栈会在其默认配置中永久缓存记录（Java < 1.6）。

即使在切换很久之后，您也应该始终为旧主机的一些剩余流量做好准备。不过，根据我的经验，它们大多是写得很糟糕的爬虫。如果您想 100% 确定不会丢失任何流量，请将旧主机的所有流量代理到新主机。Nginx/Apache 可以很容易地做到这一点。

您可以查询递归服务器以获取它将缓存记录的剩余 TTL。重复输入，您会看到 TTL 随时间减少：

```
dig @208.67.222.222 stackoverflow.com 
```

记录过期后，它应该从您在区域中配置的 TTL 开始。

这样，您至少可以针对公共解析器对其进行测试，以查看它是否遵守您的 TTL。

# c# - 如何从 ActivityTrackingRecord 读取添加到我的活动的属性

> ID：12788723
> 
> 赞同：1
> 
> 时间：2012-10-08T20:09:12.727
> 
> 标签：c#, workflow-foundation, event-tracking

我已添加`TypeDescriptionProvider`到我的活动课程 ( *`SequentialWorkflow`*)。我跟踪我有`ActivityTrackingRecord`记录。记录有`ActivityType`属性，但我看不到我添加的属性。如何从`TypeDescriptionProvider`工作流跟踪中读取值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:11:43.917

您可以将元属性添加到您的属性

```
[DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)] 
```

样本

```
public static DependencyProperty TestProperty 
  = DependencyProperty.Register(
      "Test", typeof(string), typeof(YourActivity));

[DesignerSerializationVisibility(DesignerSerializationVisibility.Visible)]
[ValidationOption(ValidationOption.Optional)]
[Browsable(true)]
[Description("Enter ....")]
public string Test
{
   get { return ((string)(base.GetValue(YourActivity.TestProperty))); }
   set { base.SetValue(YourActivity.TestProperty, value); }
} 
```

# javascript - 没有重力的小型 JavaScript Box2D 程序无论如何都会移动……为什么？

> ID：12788728
> 
> 赞同：0
> 
> 时间：2012-10-08T20:09:28.070
> 
> 标签：javascript, box2d

我有一个小的 Box2D 东西（使用 box2dweb.js），但是尽管将重力设置为 (0,0)，并且没有对任何对象施加力/脉冲，但当我开始绘图时，我在场景中拥有的唯一动态形状会移动环形。我不知道为什么O_O

有谁知道为什么[http://pomax.nihongoresources.com/downloads/temp/box2d/physics.html](http://pomax.nihongoresources.com/downloads/temp/box2d/physics.html)在点击开始后“球”会移动？

相关的代码位是：

```
// shortcut aliasses
var d = Box2D.Dynamics,
    v = Box2D.Common.Math,
    s = Box2D.Collision.Shapes;

var ball,
    gravity = new v.b2Vec2(0,0);
    world = new d.b2World(gravity, true);

// setup the world box
var setupWorldBox = function(worldbox) {
  var fixDef = new d.b2FixtureDef;
  fixDef.density = 0;
  fixDef.friction = 0;
  fixDef.restitution = 0;

  var bodyDef = new d.b2BodyDef;
  bodyDef.type = d.b2Body.b2_staticBody;
  bodyDef.position.x = worldbox.width/2;
  bodyDef.position.y = worldbox.height/2;
  fixDef.shape = new s.b2PolygonShape;
  fixDef.shape.SetAsBox(worldbox.width/2, worldbox.height/2);
  world.CreateBody(bodyDef).CreateFixture(fixDef);
}

// draw loop
var drawFrame = function() {
   world.Step(1/60,10,10);
   world.ClearForces();
   ball.update(); // only updates the ball's DOM element position
   requestAnimFrame(drawFrame);
};

// start the game
function start() {
  var worldParent = document.querySelector("#world");
  setupWorldBox(worldParent.getBoundingClientRect());
  ball = new Ball(worldParent, document.querySelector(".ball"), d,v,s, world);
  drawFrame();
} 
```

对于主体，以及定义“球”的以下代码：

```
var Ball = function(gamediv, element, d,v,s, world) {
  var pbbox = gamediv.getBoundingClientRect();
  var bbox = element.getBoundingClientRect();
  this.el = element;
  this.width = bbox.width;
  this.height = bbox.height;

  var bodyDef = new d.b2BodyDef;
  bodyDef.type = d.b2Body.b2_dynamicBody;

  var fixDef = new d.b2FixtureDef;
  fixDef.shape = new s.b2PolygonShape;
  fixDef.shape.SetAsBox(bbox.width/2, bbox.height/2);

  bodyDef.position.x = bbox.left - pbbox.left;
  bodyDef.position.y = bbox.top - pbbox.top;

  this.b2 = world.CreateBody(bodyDef);
  this.b2.CreateFixture(fixDef);
};

Ball.prototype = {
  el: null,
  b2: null,
  width: 0, height: 0,

  // Box2D position for the ball
  center: function() { return this.b2.GetWorldCenter(); },

  // update the DOM element based on Box2D position
  update: function() {
    var c = this.center();
    this.el.style.left = c.x + "px";
    this.el.style.top = c.y + "px";
  }
};

Ball.prototype.constructor = Ball; 
```

据我所知，这些代码都没有引入力，所以如果有人知道为什么球的坐标会改变，请告诉我，这样我就可以把它变成有用的东西而不是令人困惑的东西 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:02:08.580

事实证明，我的代码正在创建一个实体对象作为游戏世界，这意味着 Box2D 正在尝试执行碰撞解决，因为“球”位于另一个实体对象内。

解决方案（基于[http://box2d-js.sourceforge.net](http://box2d-js.sourceforge.net)但使用 box2dweb API 调用）是这样的：

```
// setup the world box
var setupWorldBox = function(worldbox) {
  var worldAABB = new Box2D.Collision.b2AABB;
  worldAABB.lowerBound.Set(0,0);
  worldAABB.upperBound.Set(worldbox.width, worldbox.height);
  var gravity = new b2Vec2(0, 0);
  var doSleep = true;
  var world = new b2World(worldAABB, gravity, doSleep);
  [....]
} 
```

# iis-7 - Orchard CMS 中的永久重定向 (1.5)

> ID：12788731
> 
> 赞同：0
> 
> 时间：2012-10-08T20:09:37.673
> 
> 标签：iis-7, url-rewriting, orchardcms

我使用 Orchard CMS 重新创建了一个旧网站，但在各种搜索引擎中有一堆旧链接，我想将它们重定向到他们的 Orchard 同行。我知道我需要修改 web.config 但我不确定如何。

编辑：发现这个网站[http://iis7-rewrite.heroku.com/](http://iis7-rewrite.heroku.com/)对 web.config 进行了 301 次重写

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T20:44:11.990

是的，您可以使用 web.config，在这种情况下，您需要阅读有关该主题的 IIS 文档，或者您可以使用重写规则模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T07:29:32.000

这是一个通用的 ASP.Net 主题，而不是特定于 Orchard 的主题。根据您的服务器，您可以使用不同的方式来执行此操作。如果您使用的是 IIS 7 及更高版本，那么任务会更容易，因为您可以在 web.config 中执行此操作。搜索 IIS 7 URL Rewrite 以获取更多信息，或尝试将此作为入门[http://blogs.msdn.com/b/carlosag/archive/2008/09/02/iis7urlrewriteseo.aspx](http://blogs.msdn.com/b/carlosag/archive/2008/09/02/iis7urlrewriteseo.aspx)

# jquery - 带有 django 的 jquery 弹出窗口

> ID：12788732
> 
> 赞同：0
> 
> 时间：2012-10-08T20:09:40.090
> 
> 标签：jquery, django, popup

我不太了解 javascript，所以我想只使用 django 来实现这一点。问题是，当使用 django 弹出窗口时，我意识到，我必须为所有列表项填充 1 个弹出窗口。想象一下，您的列表项都像这样链接。

```
sale/01_0001_02
sale/01_0002_02
sale/01_0003_02 
```

我如何为每个项目创建弹出菜单，将它们单独链接起来

```
sale/01_0001_02/confirm
sale/01_0001_02/reject
sale/01_0001_02/cancel ...

sale/01_0002_02/confirm
sale/01_0002_02/reject
sale/01_0002_02/cancel ...

sale/01_0003_02/confirm
sale/01_0003_02/reject
sale/01_0003_02/cancel ... 
```

填充所有这些弹出窗口是可能的，但这似乎是一个相当糟糕的可能性。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:35:49.803

最好的方法是将 json 对象发送到客户端浏览器并使用它们的 javascript 逻辑来显示图像。有内置的 javascript 插件，如[Lightbox](http://buckwilson.me/lightboxme/)和[Fancybox](http://fancybox.net)。你可以使用它们。

谢谢

# multithreading - 如何知道线程是否在 Lazarus 中完成

> ID：12788733
> 
> 赞同：1
> 
> 时间：2012-10-08T20:09:47.220
> 
> 标签：multithreading, lazarus

我是线程新手，所以这是我的问题：

如何检查线程是否结束。

场景：

我的应用程序启动，然后当我单击一个按钮时，线程启动，并且在同一个单击事件中，我想检查线程是否已完成，以便我可以调用一个取决于线程抛出的信息的新窗口。

```
MyThread:=TMyThread.Create(True);

        if Assigned(MyThread.FatalException) then begin
           raise MyThread.FatalException;
        end;

        MyThread.Start; 

        //check if it's done
        //How can I check if the Thread is finished so I can call the form
        frmUpdateLog.ShowModal; 
```

当我按照消息窗口下方的代码显示但没有信息时，因为线程仍在运行。

# proxy - Apache2 代理更改 HTML

> ID：12788737
> 
> 赞同：1
> 
> 时间：2012-10-08T20:10:02.287
> 
> 标签：proxy, apache2, doctype

我们在 Ubuntu 10.04.1 LTS 上运行了 Apache2 代理，并且注意到 DOCTYPE 在每个服务页面中都被删除了。此外，某些 CSS 字体设置会被忽略。我们的网络服务器正在运行 Win 2008 R2。有没有办法告诉 Apache 按原样提供页面并绕过任何修改？

任何建议或建议将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T14:37:31.200

imo ProxyPass 不会改变任何东西。但要确保您可以使用 tcpdump 捕获网络流量，请将占位符替换为您的 Windows 网络服务器的 IP 地址。在您向 ubuntu 网络服务器发出请求并在浏览器中看到来自 Windows 机器的响应后，停止 tcpdump (ctrl+c) 并使用 wireshark 检查 test.log。

```
sudo tcpdump -A -n -s 0 -w test.log port 80 and host HTTPD_ON_WINDOWS 
```

# asp.net-mvc - MVC 自定义 RazorViewEngine 初始化不起作用

> ID：12788739
> 
> 赞同：0
> 
> 时间：2012-10-08T20:10:05.107
> 
> 标签：asp.net-mvc, razor, viewengine

我创建了一个自定义 Razor View 引擎

现在当我这样做时：

```
public class ConfigViewEngine : RazorViewEngine
{
    public ConfigViewEngine()
    {
        var existingViewLocationFormats = new List<string>();
        var partialViewLocationFormats = new List<string>();

        //Folder Structure: Views\Desktop\Home and Views\Mobile\Home
        existingViewLocationFormats.Insert(0,
                                         "~/Views/" + ConfigurationManager.AppSettings["configName"] +
                                         "/Shared/{0}.cshtml");
        partialViewLocationFormats.Insert(0,
                                        "~/Views/" + ConfigurationManager.AppSettings["configName"] +
                                        "/Shared/{0}.cshtml");
        existingViewLocationFormats.Insert(0,
                                         "~/Views/" + ConfigurationManager.AppSettings["configName"] +
                                         "/{1}/{0}.cshtml");
        partialViewLocationFormats.Insert(0,
                                        "~/Views/" + ConfigurationManager.AppSettings["configName"] +
                                        "/{1}/{0}.cshtml");

        ViewLocationFormats = existingViewLocationFormats.ToArray();
        PartialViewLocationFormats = partialViewLocationFormats.ToArray();
    }
} 
```

我的 _ViewStart.cshtml 看起来像

```
ViewEngines.Engines.Clear();
ViewEngines.Engines.Add(new ConfigViewEngine());
Layout = "~/Views/" + ConfigurationManager.AppSettings["configName"] + "/Shared/_Layout.cshtml"; 
```

当我转到 /Home/Dashboard 时出现以下错误

```
The view 'Dashboard' or its master was not found or no view engine supports the searched locations. The following locations were searched:
~/Views/Home/Dashboard.aspx
~/Views/Home/Dashboard.ascx
~/Views/Shared/Dashboard.aspx
~/Views/Shared/Dashboard.ascx
~/Views/Home/Dashboard.cshtml
~/Views/Home/Dashboard.vbhtml
~/Views/Shared/Dashboard.cshtml
~/Views/Shared/Dashboard.vbhtml 
```

如果我在 中放置一个空`Dashboard.cshtml`文件`/Views/Home/`，它将使用该文件，然后当我刷新时，它将提供正确的文件`/Views/configName/Home/Dashboard`

有人知道为什么它没有正确初始化吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:16:40.610

弄清楚了。我不应该把那个代码放在 _ViewStart.cshtml 中，我应该把它放在 Global.asax.cs

# java - Java，可以在抽象类层次结构中修改超类的方法声明吗？

> ID：12788742
> 
> 赞同：1
> 
> 时间：2012-10-08T20:10:09.717
> 
> 标签：java, generics, abstract-class, abstract, class-hierarchy

我有一个`UserdataUpdater`扩展的抽象类`Updater`

`Updater`有一个方法声明

```
 public abstract void processRow (Cluster cluster, IAppendOnlyData row); 
```

有没有办法在里面修改这个方法声明`UserdataUpdater`，使它更具体，比如

```
 public abstract void processRow (Cluster cluster, IUserData row); 
```

`IUserData`extends `IAppendOnlyData`，因为我想要扩展的类`UserdataUpdater`只接受`IUserData`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-08T20:15:16.907

不，你不能。这将打破超类的约定，即：此方法接受 IAppendOnlyData 作为第二个参数。

请记住，子类的实例也是其超类的实例。所以任何人都可以将子类实例称为它的超类，并调用基方法，传递一个 IAppendOnlyData，而不知道该实例实际上是一个子类实例。

阅读有关[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)的更多信息。

做到这一点的唯一方法是使超类泛型：

```
public class Updater<T extends IAppendOnlyData> {
    ...
    public abstract void processRow(Cluster cluster, T row);

}

public class UserdataUpdater extends Updater<IUserData> {
    @Override
    public void processRow(Cluster cluster, IUserData row) {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:15:24.677

您不能修改派生类中的方法声明。如果派生类方法具有完全相同的方法签名，则只能覆盖超类方法。您必须使用函数重载并使用`processRow`您提到的新参数类型创建一个新方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T20:19:54.047

假设您无法控制 Updater 类，则不能这样做……您必须使用完全相同的签名来实现该方法。但是，您可以在您的实现中检查 , 的类型`row`并决定适当的处理：

```
public void processRow (Cluster cluster, IAppendOnlyData row)
{
    if( row instanceof IUserData )
    {
        // your processing here
    }
    else
    {
        // Otherwise do whatever is appropriate.
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T20:15:44.990

根据我的经验，您必须使用第一个声明，然后在实现中检查以确保：

```
row instanceof IUserData 
```

当然，这是在运行时而不是在编译期间检查的，但我不知道有任何其他方法。当然，您也可以将行强制转换为 IUserData 类型，无论是盲目地还是在检查其类型后（上图）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T20:17:00.493

简短的回答：没有。

你可以创建这样的函数，但是由于签名不同，编译器会将其视为不同的函数。

如果您考虑一下，您正在尝试做的事情并没有真正的意义。假设您编写了一个函数，该函数将 Updater 作为参数并使用不是 IUserData 的内容对其调用 processRow。在编译时，Java 无法知道对象是在 Updater、UserdataUpdater 还是 Updater 的其他子类中传递的。那么它是否应该允许通话？编译器应该做什么？

您可以在 UserdataUpdater.processRow 中包含检查在运行时传入的类型并抛出异常或在其无效时进行其他类型的错误处理的代码。

# java - Java/Scala - 从一个不断变化的网站读取

> ID：12788743
> 
> 赞同：1
> 
> 时间：2012-10-08T20:10:11.777
> 
> 标签：java, scala, url, io

我有一个从不断修改的 URL 读取的问题。这个 URL 确实是以某种预定义格式对数据库进行了更新的最新视图。每次刷新不仅会修改每一行的值，而且可能会产生完全不同的行顺序，这是最可怕的一点。不幸的是，内容太大，无法 100% 确定任何阅读器在下一次刷新之前实际上能够读取整个内容。最重要的是，通常使用缓冲阅读器，它只存储 2-4kB 的数据......你会如何处理这个问题？

# jquery - 查找具有名称以某个字符串开头的特定属性的所有元素

> ID：12788753
> 
> 赞同：2
> 
> 时间：2012-10-08T20:10:59.407
> 
> 标签：jquery, html, dom

假设我有这样的元素：

```
<h1 data-myapp-title>Title</h1>
<p data-myapp-description>Description</p> 
```

如何使用 jQuery 按属性名称“data-myapp-*”过滤它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T20:31:41.643

不是防弹的，但这应该让你接近。我将其放入选择器以使其更容易一些，但这是一般前提：

*   返回具有与选择器匹配的属性的任何元素
*   允许您指定通配符或正则表达式模式。（简单的测试有效，但可能应该做更多）

```
(function($){
    $.expr[':']['attr'] = function(obj,index,meta,stack){
        var re = new RegExp(meta[3]), m = false;
        for (var a = 0; a < obj.attributes.length; a++){
            m |= re.test(obj.attributes[a].name);
        }
        return m;
    };
})(jQuery);

$(':attr(data-myapp-*)').css('color','#f0f'); 
```

[jsFiddle](http://jsfiddle.net/bradchristie/pkqgH/)

# c - 如何通过进程属性限制对 Linux 目录的写访问？

> ID：12788754
> 
> 赞同：1
> 
> 时间：2012-10-08T20:11:04.840
> 
> 标签：c, linux, security, permissions

我们遇到了这样一种情况，将日志目录的写访问权限限制为用户进程的特定子集是有利的。这些特定进程（例如，telnet 等）已被我们修改，以便在发生重大用户操作（如远程连接等）时生成日志记录。我们不希望用户通过复制和编辑现有日志记录来手动创建这些记录。

`syslog`接近但仍然允许用户生成虚假记录，`SELinux`似乎合理但作为难以管理的野兽而臭名昭著。

任何见解都值得赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T00:54:13.307

以 root 身份运行本地日志记录守护程序。让它监听一个 Unix 域套接字（通常`/var/run/my-logger.socket`或类似的）。

编写一个简单的日志库，其中事件消息通过 Unix 域套接字发送到本地运行的守护进程。对于每个事件，还通过辅助消息发送流程凭据。有关详细信息，请参阅[man 7 unix](http://www.kernel.org/doc/man-pages/online/pages/man7/unix.7.html)。

当本地日志守护进程收到一条消息时，它会检查辅助消息，如果没有，则丢弃该消息。凭据的`uid`和`gid`准确地告诉谁在运行发送日志请求的进程；这些是由内核本身验证的，所以它们不能被欺骗（除非你有 root 权限）。

聪明的地方来了：守护进程还检查`PID`凭据中的 ，并根据其值，`/proc/PID/exe`. 它是发送消息的进程正在执行的实际进程二进制文件的符号链接，这是用户无法伪造的。为了能够伪造消息，他们必须用自己的二进制文件覆盖实际的二进制文件，这需要 root 权限。

（有一个可能的竞争条件：用户可以制作一个执行相同操作的特殊程序，并立即`exec()`生成他们知道允许的二进制文件。为了避免这种竞争，您可能需要让守护程序在检查凭据后做出响应，并且日志客户端发送另一条消息（带有凭据），因此守护进程可以验证凭据仍然相同，并且`/proc/PID/exe`符号链接没有更改。我个人会使用它来检查消息的真实性（通过记录器要求确认事件，使用随机 cookie，并让请求者用校验和和 cookie 来响应事件校验和是否正确。包括随机 cookie 应该使之前不可能在套接字队列中填充确认`exec()`。）

使用 ，`pid`您还可以进行进一步检查。例如，您可以通过跟踪父进程来跟踪进程父级以查看人类用户如何连接，直到您通过 ssh 或控制台检测到登录。这有点乏味，因为您需要解析`/proc/PID/stat`或`/proc/PID/status`文件，并且不可移植。OSX 和 BSD 有一个 sysctl 调用，可用于查找父进程 ID，因此您*可以*`parent_process_of(pid_t pid)`通过编写特定于平台的函数使其可移植。

这种方法将确保您的日志守护进程确切知道 1) 日志请求来自哪个可执行文件，以及 2) 哪个用户（以及如何连接，如果您进行进程跟踪）运行了该命令。

由于本地日志守护程序以 root 身份运行，它可以将事件记录到仅根目录中的文件，和/或将消息转发到远程机器。

显然，这并不完全是轻量级的，但假设您每秒处理的事件少于十二个，那么日志记录开销应该完全可以忽略不计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:18:17.580

通常有两种方法可以做到这一点。一，运行这些进程`root`并写保护目录（主要出于历史目的提及）。然后除了root之外没有人可以在那里写。第二个也是更安全的方法是将它们作为另一个用户（不是`root`）运行并授予该用户（但没有其他人）对日志目录的写入权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T10:28:56.443

我们采用的方法是使用 setuid 二进制文件来允许对日志目录进行写访问，该二进制文件可由所有用户执行，但仅当父进程路径由 /proc/$PPID 定义时才允许写入日志记录/exe 匹配我们放置在系统上的修改后的二进制路径的子集。

# eclipse - Eclipse grails 作为 JUnit 测试运行

> ID：12788755
> 
> 赞同：1
> 
> 时间：2012-10-08T20:11:08.550
> 
> 标签：eclipse, testing, grails, junit

我是使用 Eclipse for Grails（使用 STS）的新手，我正在尝试找出一种简单的方法来运行单元测试。我已经看到我可以通过右键单击来做到这一点`Run As > Grails Command (test-app)`。这可行，但速度很慢，并且测试输出会转到测试报告 html 页面，并且没有明显的可点击堆栈跟踪。

我也可以`Run As > JUnit Test`，这似乎要快得多，并为我提供了非 Grails 测试中可用的传统 JUnit 控制台。运行单元测试时，两者有区别吗？grails 命令是在设置其他事情还是做其他事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:43:32.890

你正在执行一个全面的测试，所有的花里胡哨。:)

根据文档：

```
test-app: Runs all Grails unit and integration tests and generates reports. 
```

为集成测试设置容器是使它更加“昂贵”的原因。

您可以通过使用“单元：”作为参数来限制正在运行的测试用例，以指示只需要运行单元测试。（当不直接从 eclipse 使用 JUnit 时）

在你的情况下，你可以这样做：

```
test-app unit: 
```

或者对于特定的 FooBarTests.groovy 文件：

```
test-app unit: FooBar 
```

您可以选择添加 -echoOut 或 -echoErr 以获得更详细的输出。

[查看文档以获取更多信息和不同的测试阶段。](http://grails.org/doc/latest/guide/testing.html)

# google-app-engine - App Engine 数据存储区 - 数据模型

> ID：12788757
> 
> 赞同：0
> 
> 时间：2012-10-08T20:11:33.040
> 
> 标签：google-app-engine, google-cloud-datastore

几天以来，我一直在使用 App Engine。现在对我来说最重要的是建模数据，所以我对此有一些疑问。假设我有简单的`MyUser`课程。我也有`Buddy`课，看起来像这样：

```
@Entity
public class Buddy {
  @Id
  @GeneratedValue(strategy = GenerationType.IDENTITY)
  private Key id;
  private Date createAt;
  private MyUser user;
  private Key buddyOf;
} 
```

在这堂课中，我有`MyUser`字段，因为每个好友都是用户，而我有 buddyOf 字段，因为还有另一个 MyUser，他的好友列表中有这个好友。问题是如果我从 Datastore 获得一个示例伙伴，我`MyUser`也会得到这个吗？如果是的话，什么时候在`MyUser`课堂上将嵌入另一个`Entity`和另一个`Entity`，等等......？`Key`也许我应该只将字段保留给其他实体？主要问题是我应该如何在数据存储中存储数据？我应该使用组合并且在其他对象中有对象吗？如果是的话，对象中的对象等等……最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T00:53:31.263

DataStore 对象模型设计应该不同于通常用于关系数据库的设计。您应该检查支持的属性类型[https://developers.google.com/appengine/docs/java/datastore/entities#Properties_and_Value_Types](https://developers.google.com/appengine/docs/java/datastore/entities#Properties_and_Value_Types)没有对象作为属性类型。您仍然可以使用嵌入式注释，但这不是您的情况的最佳方式。

您应该为用户存储密钥甚至 ID 作为参考。它将使实例更小并解决您描述的问题。但是您将无法达到参考完整性。这是 NoSQL 设计的限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T03:06:57.077

我认为您正在建模 n:m 关系。您可以创建这样的结构：

*   对于每个 MyUser 实体，它都有一组元素类型为 Buddy 的实体（该组代表此 MyUser 实体的所有好友）。
*   每个 Buddy 实体都将 MyUser 实体作为其祖先。
*   每个 Buddy 实体通过包含一个字段表示所有者 MyUser 和另一个 MyUser 对象之间的关系：另一个 MyUser 的 id

因此，数据存储区的以下操作变得简单而自然：

*   添加/删除好友到 MyUser 实体（只需添加/删除新的子好友实体）
*   查询 MyUser 实体的所有好友（列出所有孩子）

这种结构对 gae-datastore high replaca 有几个好处。例如，如果您将好友（子实体）添加到 MyUser 实体，则可以立即查询他们，因为他们在同一个实体组中（您总是可以毫不拖延地看到一致的数据）。

# c++ - QTreeWidget 扩展选择改变信号

> ID：12788759
> 
> 赞同：0
> 
> 时间：2012-10-08T20:11:39.170
> 
> 标签：c++, qt

我已更改 QTreeWidget 以允许扩展选择：

树_->setSelectionMode(QAbstractItemView::ExtendedSelection);

存在未发出 selectionChanged 信号的情况。这是我直接用鼠标选择多个项目的时候。如果我首先单击一个项目，然后保持 shift 并选择一个范围，则会发出 selectionChanged 信号。

有人见过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:04:14.597

您使用的是哪个操作系统/Qt 版本？我在一个操作系统上看到过这样的奇怪错误，这些错误会在另一个操作系统上消失（不过我还没有看到这个）。

我在 Linux 下使用 Qt 4.8.2，但我认为我没有看到这种行为。这是我得到的代码：

我的窗口.h：

```
#include <QMainWindow>
#include <QWidget>

class MyWindow : public QMainWindow
{
  Q_OBJECT
public:
  MyWindow(QWidget * = 0, Qt::WindowFlags = 0 );

private slots:
  void printSelectionChanged();

}; 
```

我的窗口.cpp：

```
#include "MyWindow.h"

#include <QAbstractItemView>
#include <QList>
#include <QString>
#include <QStringList>
#include <QTreeWidget>
#include <QTreeWidgetItem>

#include <iostream>
using namespace std;

MyWindow::MyWindow(QWidget *parent, Qt::WindowFlags flags)
 : QMainWindow(parent, flags)
{
  QTreeWidget *treeWidget = new QTreeWidget(this);
  treeWidget->setSelectionMode(QAbstractItemView::ExtendedSelection);
  treeWidget->setColumnCount(1);
  QList<QTreeWidgetItem *> items;

  for (int i = 0; i < 10; ++i)
    items.append(new QTreeWidgetItem((QTreeWidget*)0, QStringList(QString("item: %1").arg(i))));
  treeWidget->insertTopLevelItems(0, items);

  connect(treeWidget, SIGNAL(itemSelectionChanged()), this, SLOT(printSelectionChanged()));

  setCentralWidget(treeWidget);

}

void MyWindow::printSelectionChanged()
{
  cout << "selection has changed." << endl;
} 
```

如果您正在做不同的事情，也许您应该发布您的代码（或其一些简化版本）。

# asp.net-mvc - ajax 请求返回部分视图

> ID：12788762
> 
> 赞同：0
> 
> 时间：2012-10-08T20:11:41.443
> 
> 标签：asp.net-mvc, jquery, partial-views

我正在尝试在 ajax 更新的部分视图上返回请求。显然请求不是从 ajax 函数返回的。这里的ajax代码：

```
<script type="text/javascript">
function doAjaxPost(myid) {
    // get the form values
    var ApplSort = $('#DropDownListSort').val();
    var radio_check_val=0;

    for (i = 0; i < document.getElementsByName('radio').length; i++) {
        if (document.getElementsByName('radio')[i].checked) {
            radio_check_val = document.getElementsByName('radio')[i].value;
        }
    }

    // alert("myid=" + myid +";"+ "ApplSort=" + ApplSort + ";" + "radio_check_val=" + radio_check_val);

    $.ajax(
 {
     type: 'POST',
     contentType: 'application/json; charset=utf-8',
     data: { ApplSort: ApplSort, radio_check_val: radio_check_val, myid: myid },
     UpdateTargetId: "tabledata",
     dataType: 'html',
     url: 'Partner/PartnerApplications',
     success: function (data) { 
      var result = data;
      $('tabledata').html(result);
},

     error: function (error) {
         alert('Ошибка AJAX-запроса. Обновите страницу!');
     }
 });
}
</script> 
```

调用失败并且页面完全更新。

以下是视图中的更新内容：

```
<div id="target">
@Html.Partial("~/Views/Partner/PartnerApplicationsPartial.cshtml")
</div> 
```

控制器代码：

```
[HttpPost]
    public ActionResult PartnerApplications(int[] ApplSort, int[] radio_check_val, int[] myid)
    {
        MordaPartner MrdPrt = new MordaPartner(Server, Request);

        if (Request.IsAjaxRequest())
        {
            var obj = MrdPrt.morda_obj.CookieAuthenticationPartner(Server, Request, Response, MrdPrt.PartnerLogin, MrdPrt.PartnerPassword);
            if (obj != null)
            {
                //alert("ApplSort=" + ApplSort + ";" + "ApplSelectOffer=" + ApplSelectOffer + ";" + "ApplSelectAuction=" + ApplSelectAuction + ";" + "ApplSelectNoOffer=" + ApplSelectNoOffer);

                var objs = from s in MrdPrt.morda_obj.entities.applications where s.application_user_city == obj.partner_city & s.application_blocked != 1 orderby s.application_id ascending select s;

                return Json(new { data = this.RenderPartialViewToString("PartnerApplicationsPartial", objs) });
            }
            else
            {
                return RedirectToAction("Registration");

            }
        }
        else { return RedirectToAction("PartnerApplications"); }
    } 
```

RenderPartialViewToString 取自这里：[http ://www.c-sharpcorner.com/blogs/7150/implementing-renderpartialviewtostring-in-asp-net-mvc-3.aspx](http://www.c-sharpcorner.com/blogs/7150/implementing-renderpartialviewtostring-in-asp-net-mvc-3.aspx)

脚本已加载：

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:24:57.487

我认为你最简单的解决方案，因为你只是想做部分......

```
@using( Ajax.BeginForm( "PartnerApplications", 
                        null, 
                        new AjaxOptions() { 
                             HttpMethod = "POST", 
                             InsertionMode = InsertionMode.Replace,  
                             UpdateTargetId = "target", 
                             LoadingElementId = "AjaxSearch" }, 
                        new { id = "UserSearchForm" } ) ) {
    <input type="text" id="id" name="id" placeholder="Enter Search" />
} 
```

这是 MVC 中内置的一项功能，可以**非常**轻松地使用部分结果更新元素。

这就是说您想要一个调用`PartnerApplications`Action 的新 Ajax 表单。您希望使用作为`HttpMethod`请求的 an 调用的操作，`POST`并且您希望结果替换 ( `InsertionMode.Replace`) 中的现有元素`target`（无论可能是什么），并且在请求发生时您希望元素`AjaxSearch`可见（这是可选的，但是我用来证明它正在工作）。

这将为您生成所需的 JavaScript，直到您完成一些事情，而不仅仅是返回部分作品 EXCELLENT！

编辑：您还需要更新您的操作...

`return Json(new { data = this.RenderPartialViewToString("PartnerApplicationsPartial", objs) });`

需要改为....

`return PartialView("PartnerApplicationsPartial", objs);`

**根据评论进行编辑：**

在不更好地了解发送到服务器的数据的情况下，我无法告诉您要编写什么来替换该方法。但是，我会查看 的属性，`new AjaxOptions(){}`因为它有一些额外的属性，允许您指定 JavaScript 函数的名称以调用 Ajax 请求的四种状态（之前/之后/成功/失败）。因此，如果您需要计算某些内容，您可以通过指定将在提交 Ajax 请求之前处理的 JavaScript 函数来执行此操作。

此外，您还需要做更多的工作来获取选定的单选按钮值（尤其是因为您使用的是 jQuery）。

你可以换...

```
var radio_check_val=0;

for (i = 0; i < document.getElementsByName('radio').length; i++) {
    if (document.getElementsByName('radio')[i].checked) {
        radio_check_val = document.getElementsByName('radio')[i].value;
    }
} 
```

与...类似的东西

```
var radio_check_val = $('radio').filter(':checked').val(); 
//this will only work if there is only one set of radio buttons on the page.
//Otherwise you will need to add a name to the selector. 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-08T20:19:40.033

你不应该`RedirectToAction`。而不是重定向 return `PartialView('Registration');`。

相关问题：
[MVC Return Partial View as JSON](https://stackoverflow.com/questions/4730777/mvc-return-partial-view-as-json)。
[为 AJAX 加载 PartialView 和为非 AJAX 请求加载视图](https://stackoverflow.com/questions/6562814/load-partialview-for-ajax-and-view-for-non-ajax-request)

# objective-c - memcpy 导致 EXC_BAD_ACCESS

> ID：12788763
> 
> 赞同：3
> 
> 时间：2012-10-08T20:11:42.243
> 
> 标签：objective-c, c, memcpy

我正在将别人的 C++ 转换为（Objective）C，但我遇到了`memcpy`. 我使用它如下：

```
memcpy((void *)virtualFlash[virtualFlashAddress], data, dataLength); 
```

变量定义如下：

```
unsigned char virtualFlash[5 * 1024 * 1024]; // 5MB
NSUInteger virtualFlashAddress; // set to 8 later on
unsigned char *data = (unsigned char *)[recordData bytes]; // recordData is an NSData object
NSUInteger dataLength = [recordData length]; // same NSData object 
```

我在 memcpy 的行上得到一个 EXC_BAD_ACCESS。我调试`recordData`了返回`<d8ffbd27 2000b1af 1c00b0af 2400bfaf>`的 和返回 16 的 dataLength——两者都是正确的。

`memcpy((void*)virtualFlash[8], data, 16);`

这崩溃了。我读过它`memmove`有时有效，但在我的情况下不是（相同的 EXC_BAD_ACCESS）。我不确定该怎么做，因为这几乎完全是从它工作正常的 C++ 程序中复制而来的。我对 C 的了解非常少，所以我可能遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T20:17:10.810

```
unsigned char virtualFlash[5 * 1024 * 1024]; // 5MB 
```

您的堆栈可能足够大，也可能不足以容纳 5MB 的分配。即使是这样，这也确实有点推动它，我会动态分配这个数量。下一个问题：

```
(void *)virtualFlash[virtualFlashAddress] 
```

`virtualFlash[virtualFlashAddress]`返回 a `char`，不太可能是有效地址。好像你打算写：

```
virtualFlash + virtualFlashAddress 
```

where`virtualFlashAddress`是应用于基地址`virtualFlash`（即数组中第一个元素的地址）的偏移量。

该名称`virtualFlashAddress`令人困惑，因为它被用作该数组的索引，但这是我最好的猜测，没有看到更多代码。

# php - 如何添加嵌套类以悬停菜单

> ID：12788764
> 
> 赞同：0
> 
> 时间：2012-10-08T20:11:44.777
> 
> 标签：php, html, css

我希望菜单悬停在当前页面上。所以我添加了下面的代码来调用jokesmenu >ul> li > a:hover 当当前页面打开菜单应该hilight.But如何用这个css悬停当前页面

```
 <li class=" <?php $jokes_ur="http://www.domain.com/jokes/";
    $url="http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];

    if ($jokes_ur==$url){
echo "jokesmenu" 
    }       
    ?>
"><a href="http://www.domain.com/jokes/">jokes<span>jokes</span></a></li>

.jokesmenu >ul> li > a:hover {
 background-image:-webkit-linear-gradient(top, rgb(69, 199, 235), rgb(38, 152, 219));background-image:-moz-linear-gradient(top, rgb(69, 199, 235), rgb(38, 152, 219));
background-image:-o-linear-gradient(top, rgb(69, 199, 235), rgb(38, 152, 219));background-image:-ms-linear-gradient(top, rgb(69, 199, 235), rgb(38, 152, 219));
background-image:linear-gradient(top, rgb(69, 199, 235), rgb(38, 152, 219));filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,StartColorStr='#45c7eb', EndColorStr='#2698db');
color:#fff;list-style:none;text-decoration:none; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:18:20.527

您希望它具有与悬停相同的外观，即使它没有悬停以显示其当前页面对吗？因此，首先，您已将类添加到`li`您的 css 应该阅读

```
.jokesmenu a, ul> li > a:hover { ... } 
```

这样你的悬停仍然有效，如果 li 有，`.jokesmenu`那么它也会突出显示。

# matlab - 在matlab中，计算一列中另一列满足条件的部分的平均值

> ID：12788767
> 
> 赞同：3
> 
> 时间：2012-10-08T20:11:54.030
> 
> 标签：matlab, matrix, extract, conditional-statements

我对matlab很陌生，我很好奇如何做到这一点：

我有一个相当大的（27000x11）矩阵，第 8 列包含一个有时会发生变化但对于 2000 行（不一定是连续的）保持不变的数字。

我想计算第 8 列具有相同值的那些行的第 3 列条目的平均值。这适用于第 8 列的每个值。我还想将第 3 列的平均值绘制为第 8 列值的函数，但如果我能得到一个包含 [mean_of_3rd,8th] 的新矩阵 (2x2)，我可以这样做。

例如：（为方便起见，使用较小的矩阵）

1 ***2*** 3 4 5
3 7 5 3 2
1 **3** 2 5 3
4 **5** 7 5 8
2 ***4*** 7 4 4

由于第 4 列在第 1 行和第 5 行中具有相同的值，我想计算 2 和 4 的平均值（第 2 列的相应元素，斜体粗体）并将其与第 4 列的值一起放入另一个矩阵中。3 和 5（粗体）相同，因为第 4 列对这两者具有相同的值。

3 4
4 5

等等......这可能很简单吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T20:23:41.790

使用全能的，未充分利用的`accumarray`：

此行为您提供了由第 2 列累积的第 4 列的平均值：

```
means = accumarray( A(:,4) ,A(:,2),[],@mean) 
```

此行为您提供每组中的元素数量：

```
count = accumarray( A(:,4) ,ones(size(A(:,4)))) 
```

现在，如果您只想过滤至少出现一次的那些：

```
>> filtered = means(count>1)

filtered =

     3
     4 
```

这仅适用于第 4 列中的正整数。

* * *

计算每个集合中元素数量的另一种可能性：

```
 count = accumarray( A(:,4) ,A(:,4),[],@numel) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T08:32:40.017

一种基于 Andrey 和 Rody 的想法的略微改进的方法。我们不能直接使用 accumarray，因为数据是实数，而不是整数。**但是**，我们可以使用 unique 来查找重复条目的**索引**。然后我们对整数进行操作。

```
% get unique entries in 4th column
[R, I, J] = unique(A(:,4));

% count the repeating entries: now we have integer indices!
counts = accumarray(J, 1, size(R));

% sum the 2nd column for all entries
sums   = accumarray(J, A(:,2), size(R));

% compute means
means  = sums./counts;

% choose only the entries that show more than once in 4th column
inds   = counts>1;
result = [means(inds) R(inds)]; 
```

以下合成数据的时间比较：

```
A=randi(100, 1000000, 5);

% Rody's solution
Elapsed time is 0.448222 seconds.

% The above code
Elapsed time is 0.148304 seconds. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T04:54:09.807

我的官方回答：

```
A4 = A(:,4);
R = unique(A4);   

means = zeros(size(R));
inds  = false(size(R));

for jj = 1:numel(R)        
    I = A4==R(jj);
    sumI = sum(I);        
    inds(jj)  = sumI>1;
    means(jj) = sum(A(I,2))/sumI;        
end

result = [means(inds) R(inds)]; 
```

这是因为以下原因。以下是我们以分析形式提出的所有替代方案：

```
%# sample data
A = [
    1 2 3 4 5
    3 7 5 3 2
    1 3 2 5 3
    4 5 7 5 8
    2 4 7 4 4];

%# accumarray
%# works only on positive integers in A(:,4)
tic
for ii = 1:1e4
    means = accumarray( A(:,4) ,A(:,2),[],@mean);
    count = accumarray( A(:,4) ,ones(size(A(:,4))));
    filtered = means(count>1);
end
toc

%# arrayfun
%# works only on integers in A(:,4)
tic
for ii = 1:1e4
    B = arrayfun(@(x) A(A(:,4)==x, 2), min(A(:,4)):max(A(:,4)), 'uniformoutput', false);
    filtered = cellfun(@mean, B(cellfun(@(x) numel(x)>1, B)) );    
end
toc

%# ordinary loop
%# works only on integers in A(:,4)    
tic
for ii = 1:1e4

    A4 = A(:,4);
    R = min(A4):max(A4);

    means = zeros(size(R));
    inds  = false(size(R));
    for jj = 1:numel(R)
        I = A4==R(jj);
        sumI = sum(I);        
        inds(jj) = sumI>1;
        means(jj) = sum(A(I,2))/sumI; 
    end

    filtered = means(inds);   
end
toc 
```

结果：

```
Elapsed time is 1.238352 seconds.  %# (accumarray)
Elapsed time is 7.208585 seconds.  %# (arrayfun + cellfun)
Elapsed time is 0.225792 seconds.  %# (for loop) 
```

普通的循环显然是要走的路。

注意`mean`内部循环中没有。这是因为`mean`不是 Matlab 内置函数（至少在 R2010 上），因此在循环中使用它会使循环不适合 JIT 编译，这会使其速度减慢 10 倍以上。使用上面的形式会加速循环几乎是`accumarray`求解速度的 5.5 倍。

根据您的评论判断，将循环更改为处理所有条目`A(:,4)`（不仅仅是整数）几乎是微不足道的：

```
A4 = A(:,4);
R = unique(A4);   

means = zeros(size(R));
inds  = false(size(R));
for jj = 1:numel(A4)
    I = A4==R(jj);
    sumI = sum(I);        
    inds(jj) = sumI>1;
    means(jj) = sum(A(I,2))/sumI;
end

filtered = means(inds); 
```

我将复制粘贴到顶部作为我的官方答案:)

# ios - 选择退出单个视图的自动布局？

> ID：12788769
> 
> 赞同：14
> 
> 时间：2012-10-08T20:11:58.797
> 
> 标签：ios, autolayout

我有一个在代码中执行其子视图布局的视图。布局对于自动布局来说太复杂了，自动布局会破坏布局代码。有没有办法强制自动布局让这个视图的子视图单独存在？我尝试过覆盖 layoutSubviews，但没有任何乐趣。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T20:14:41.433

每个情节提要或 XIB 启用或禁用自动布局。如果您的视图位于其自己的 XIB 中，那么您可以禁用该 XIB 的自动布局。如果您的 XIB 中还有其他依赖于自动布局的视图，则您必须找到不同的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-17T16:58:57.863

在 WWDC 视频中找到了答案。layoutSubviews 在自动布局下的工作方式与以前不同。它不会阻止自动布局的发生，而是在布局期间添加/更改/删除约束的机会。

昨晚我尝试将自定义视图移动到不同的 NIB，这似乎是唯一的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-23T00:33:54.480

[您可以混合使用自动布局和手动布局！](http://oleb.net/blog/2014/03/how-i-learned-to-stop-worrying-and-love-auto-layout/)

只要视图的子视图***不***涉及***任何***会触发该视图上的另一个自动布局传递的自动布局约束，您就可以`layoutSubviews`手动覆盖并设置每个子视图上的框架：

```
class MyView : UIView {

    //
    // mySubview is not involved in any constraints 
    // that would trigger another layout pass.
    // e.g., no explicit constraints set in IB.
    // 
    @IBOutlet weak var mySubview: UIView!

    override func layoutSubviews() {
       super.layoutSubviews()  // let auto layout engine run first

       //
       // Auto layout engine now done with this view so we can
       // set the frames how ever we wish since we have the last
       // word! 
       //
       mySubview.frame  = CGRectMake(...)
       ...

    }

} 
```

这样做的原因是，在`super.layoutSubviews()`调用之后，更改任何子视图上的框架*不会*触发另一个布局传递（与子视图相关的所有约束都已满足并且自动布局引擎已完成它们）；因此，此方法获得了关于其子视图位置的最后一句话！

*   请注意，`MyView`实例*可以*设置相关的自动布局约束，并且一切正常。

*   只要您*不对*子视图设置任何约束，IB*就不会发出警告。*

# c# - Ironpython 2.7.3 Visual Studio 缺少项目

> ID：12788772
> 
> 赞同：0
> 
> 时间：2012-10-08T20:12:22.240
> 
> 标签：c#, .net, visual-studio-2010, visual-studio, ironpython

我已经安装了 IronPython 2.7.3。我会在视觉工作室看到一个 IronPython 项目。我有视觉工作室 2010 专业版。我的问题是这样的。我没有看到 Iron Project。为什么，那是哪里？现在我正在下载终极版。也许视觉工作室的版本是问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:36:06.833

项目模板是[PTVS](http://pytools.codeplex.com)的一部分，而不是 IronPython。IronPython 的旧版本确实包含 Visual Studio 模板，但它们被删除以支持 PTVS。

# image - 如何将图像与文本对齐？

> ID：12788774
> 
> 赞同：2
> 
> 时间：2012-10-08T20:12:28.017
> 
> 标签：image, text, alignment

我想将品牌形象与产品标题对齐，但我不知道如何在 php..

这是我的代码：

```
<div class="product-name">
    <?php echo $this->getChildHtml('product_attributes_placeholder'); //Placeholder for brands ?>
    <h1><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name')?></h1>
</div> 
```

图片[http://postimage.org/image/n0md49tqp/](http://postimage.org/image/n0md49tqp/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:27:15.613

将图片包裹在与产品名称相同的 div 中，并设置 display: inline; 还要明确：两者都以防万一您在那里有浮子。

```
.product-name{
  display:inline;
  clear: both;
} 
```

如果这不起作用，您可能想尝试将两个元素都设置为浮动：左；

# scala - Scala、Morphia 和枚举

> ID：12788781
> 
> 赞同：9
> 
> 时间：2012-10-08T20:13:09.690
> 
> 标签：scala, enums, morphia

我需要在 Morphia 中存储 Scala 类。除非我尝试存储**_ <: Enumeration的集合，否则使用注释它工作得很好**

Morphia 抱怨它没有该类型的序列化程序，我想知道如何提供一个。现在我将集合类型更改为**Seq[String]** ，并在集合中的每个项目上调用**toString**来填充它。

效果很好，但是我不确定这是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-04T08:28:03.303

这个问题在 MongoDB 之上的几个可用抽象层中很常见。这一切都回到了一个基本原因：在 json/bson 中没有等效的枚举。例如，*Salat也有同样的问题。*

事实上，**MongoDB Java 驱动程序不支持枚举**，您可以在此处的讨论中阅读：[https](https://jira.mongodb.org/browse/JAVA-268) ://jira.mongodb.org/browse/JAVA-268 ，您可以在其中看到问题仍然存在。我见过的大多数使用 MongoDB 和 Java 的框架都没有实现像这个这样的低级功能。我认为这个选择很有意义，因为它们让您可以选择如何处理未由低级驱动程序处理的数据结构，而不是强加给您如何处理。

总的来说，我觉得缺乏支持不是来自技术限制，而是来自设计选择。对于枚举，有多种方法可以将它们与其优缺点进行映射，而对于其他数据类型可能更简单。我不详细了解 MongoDB Java 驱动程序，但我想支持多种“模式”需要一些重构（也许这就是他们谈论新版本的序列化的原因？）

这是我正在考虑的两种策略：

*   如果要对枚举进行索引并最小化空间占用，请将枚举映射为整数（不使用序数，请[在 java 中设置枚举起始值](https://stackoverflow.com/questions/1067352/can-set-enum-start-value-in-java)）。
*   如果您担心 mongoshell 上的可查询性，因为您的数据将被数据科学家访问，您宁愿使用其字符串值存储枚举

总而言之，在本机对象和 MongoDB 之间添加中间数据结构并没有错。Salat 通过 CustomTransformers 支持它，在 Morphia 上，您可能需要明确地进行转换。去吧。

# php - 每次更新行时添加一个额外的表

> ID：12788782
> 
> 赞同：-1
> 
> 时间：2012-10-08T20:13:09.580
> 
> 标签：php

我基本上有一个输入系统，人们在其中输入数据，数据以特定顺序打印在 HTML 表中。

我有一些代码在下面可以正常工作，除了每次更新行时，都会编辑表而不是添加一个包含数据的新表。另外当我刷新数据时消失了？

我的代码如下：

```
 $query = "SELECT * FROM rumours";
        $query = mysql_query($query) or die('MySQL Query Error: ' . mysql_error( $connect ));
        while ($row = mysql_fetch_assoc($query)) {
                        $id = $row['id'];
                        $band = $row['band'];
                        $title = $row['Title'];
                        $description = $row['description'];
                         }
$sql="INSERT INTO rumours (band, Title, description)
VALUES
('$_POST[firstname]','$_POST[lastname]','$_POST[age]')";

if (!mysql_query($sql,$connect))
  {
  die('Error: ' . mysql_error());
  }
 if (mysql_query($sql, $connect)) {
echo "<table border='1'>";
echo "<tr>";
echo "<td> $title  </td>";
echo "</tr>";
echo "<tr>";
echo "<td class = 'td1'> $description </td>";
echo "</tr>";
echo "</table>";
    }
echo "1 record added";

mysql_close($connect); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:17:23.650

您仅从*插入*的 db 行生成表，而不是 db 表中的所有 db 行。为此，您还必须`echo`为每个找到的行提供表格代码：

```
$query = "SELECT * FROM rumours";
$query = mysql_query($query) or die('MySQL Query Error: ' . mysql_error( $connect ));
while ($row = mysql_fetch_assoc($query)) {
  $id = $row['id'];
  $band = $row['band'];
  $title = $row['Title'];
  $description = $row['description'];
  echo "<table border='1'>";
  echo "<tr>";
  echo "<td> $title  </td>";
  echo "</tr>";
  echo "<tr>";
  echo "<td class = 'td1'> $description </td>";
  echo "</tr>";
  echo "</table>";
}
$sql="INSERT INTO rumours (band, Title, description)
VALUES
('$_POST[firstname]','$_POST[lastname]','$_POST[age]')";
/* ... Code truncated to save space */ 
```

# javascript - Ajax 发布总是导致错误，即使一切看起来都是正确的

> ID：12788785
> 
> 赞同：0
> 
> 时间：2012-10-08T20:13:23.277
> 
> 标签：javascript, jquery, ajax, cors, recaptcha

我正在尝试使用谷歌的 reCaptcha 在表单验证中处理验证码。基本上，我的验证函数是在表单标签中使用 onSubmit 调用的，然后调用第二个函数来使用 recaptcha api。

这是代码：

```
 var returnValue;

        var myData = {
            privatekey  : "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",
            remoteip : ip,
            challenge : challenge,
            response : response
        };

        $.ajax({
            url: "http://www.google.com/recaptcha/api/verify",
            type: "POST",
            data: JSON.stringify(myData),
            dataType: "text",
            success: function(data) {
                var result = data.split("\n");
                if (result[0] == "true") {
                    returnValue = true;
                }
                else {
                    returnValue = false;
                }
            },
            error: function(jqXHR, textStatus, errorThrown) {
                alert("There was an error submitting the captcha.  Please contact an administrator. \n\nError:\n" + textStatus, errorThrown);
                returnValue = false;                    
            },
            complete: function(jqXHR, textStatus) {
                return returnValue;
            }
        }); 
```

在 Firefox 中使用 LiveHTTPHeaders，我可以看到请求发送到服务，并且看起来一切都被正确发送。我得到一个 HTTP/1.1 200 OK 响应，但每次代码都进入错误函数。当错误函数运行时，jqXHR 为：

对象 { readyState=0, status=0, statusText="error"}

textStatus 是“错误”，errorThrown 是“”

我已经尝试了多种方法，包括 $.POST，并使用 .done()、.fail()、.always()，它的行为总是相同的。

我在这里看到了一些与跨域请求问题有关的其他帖子，但这些情况似乎都不相关，因为我实际上正在执行跨域请求，而这些似乎是它们所在的问题向同一域上的文件发出请求，并且它被错误地处理为跨域请求。

我在这里束手无策。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:24:36.670

> 我在这里看到了一些与跨域请求问题有关的其他帖子，但这些情况似乎都不是真正相关的，因为我实际上是在做一个跨域请求

当我运行该代码时，我收到错误：

```
XMLHttpRequest cannot load http://www.google.com/recaptcha/api/verify.
Origin http://fiddle.jshell.net is not allowed by Access-Control-Allow-Origin. 
```

所以这是一个跨域问题。您可能想要发出跨域请求，但 Google 并未设置为允许它。

我很确定需要使用*服务器*端代码来实现 recaptcha。如果您使用 JS 完全在客户端上执行此操作，那么客户端可以撒谎并说它已经通过了验证码，而实际上没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T09:30:48.407

```
function check(){
    $.post('check.php',{
        'check':1,
        'challenge':$('#recaptcha_challenge_field').val(),
        'response':$('#recaptcha_response_field').val()},
        function(a){
            console.log(a);
        });
} 
```

检查.php：

```
if($_POST){
    if(isset($_POST['check'])){
        $url = 'http://www.google.com/recaptcha/api/verify';

        $data = array(
            'privatekey'=>  "**********************************",
            'remoteip'  =>  $_SERVER['REMOTE_ADDR'],
            'challenge' =>  $_POST['challenge'],
            'response'  =>  $_POST['response'],
        );
        $options = array(
            'http' => array(
                'header'  => "Content-type: application/x-www-form-urlencoded\r\n",
                'method'  => 'POST',
                'content' => http_build_query($data),           
            ),
        );
        echo print_r($data,true);
        die(file_get_contents($url, false, stream_context_create($options)));
    }
} 
```

*警告：您只有一个选择要检查！（[参考](https://stackoverflow.com/a/1264782/669677)）*

# vba - VBA - 来自 csv 文件的记录集

> ID：12788787
> 
> 赞同：0
> 
> 时间：2012-10-08T20:14:00.513
> 
> 标签：vba, excel, adodb, recordset

> **可能重复：**
> [通过 ADO 连接打开 csv 文件 - 列限制为 255 / 或仅使用其他文件类型？](https://stackoverflow.com/questions/11185191/opening-csv-file-via-ado-connection-column-limitation-to-255-or-just-use-ano)

我有以下代码来打开一个 csv 文件作为记录集

```
Set cN = New ADODB.Connection
Set RS = New ADODB.Recordset
cN.Open ("Provider=Microsoft.Jet.OLEDB.4.0;" & _
               "Data Source=C:\data;" & _
               "Extended Properties=""text; HDR=Yes; FMT=Delimited; IMEX=1;""")
RS.ActiveConnection = cN
RS.Source = "select * from myFile.csv" 
```

上面的代码适用于少于 255 列的文件。但是，如果我的 CSV 文件有超过 255 列，我只会得到前 255 列数据。有没有其他方法可以将 CSV 文件打开到 ADODB 记录集中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T22:55:46.223

问题在于访问数据库。每个表的字段不能超过 255 个：

[http://office.microsoft.com/en-us/access-help/access-2007-specifications-HA010030739.aspx](http://office.microsoft.com/en-us/access-help/access-2007-specifications-HA010030739.aspx) http://office.microsoft.com/en-us/access-help/access-2010-specifications -HA010341462.aspx

根据您的数据，您是否可以将其转置，或将其拆分为多个表？

# css - 用于网站使用的类似 Metro 字体

> ID：12788789
> 
> 赞同：14
> 
> 时间：2012-10-08T20:14:06.497
> 
> 标签：css, fonts

对于像 Metro Windows 8 这样风格的网站，您会建议什么字体（免费用于商业用途）？如果它在谷歌字体等上会最好。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-08T20:39:02.273

与“Metro”品牌一起使用的字体是[Segoe UI](https://www.microsoft.com/typography/fonts/family.aspx?FID=331)。不幸的是，正如其他人所提到的，它不能免费下载。

但是，即使您碰巧拥有 Segoe，您的 web 应用程序的其他用户也可能没有。因此，要使其始终如一地显示给您的用户，您将需要`@font-face`它。但是，唉，由于许可，将其简单地托管在您的服务器上并对其进行字体处理是违法的。使用 Segoe UI 的唯一合法方式是[购买使用它的许可证](http://www.ascendercorp.com/font/segoe-ui/)。

但是你想要一个免费的选项，所以让我们看看一些 Segoe 相似的东西。

Segoe UI 与[Frutiger](http://www.myfonts.com/fonts/adobe/frutiger/)非常相似——事实上，如此相似，以至于[微软被 Linotype 告上了法庭](http://arstechnica.com/uncategorized/2006/04/6517-2/)——当然，这种字体也不是免费的。

如果你特别想使用谷歌字体，流行的[Open Sans](http://www.google.com/webfonts#UsePlace:use/Collection:Open+Sans)可能是你最好的选择，尽管它和 Segoe 之间有一些明显的区别。

你可能会更幸运地找到那些不是那么有名但深受著名的昂贵字体启发的字体（有些人可能会称它们为无耻的抄袭）。两个例子是[CartoGothic Std](http://www.fontsite.com/2129/cartogothic-std/)和[WeblySleek UI](http://www.dafont.com/weblysleek-ui.font)。对于大多数用户来说，您会发现这些字体之间的差异是难以察觉的。而且您很幸运，因为在撰写本文时，您可以自己托管这些字体以通过以下方式提供它们`@font-face`（免责声明：我建议您在执行此操作之前阅读许可证以了解详细信息。它们受改变）。

想要快速比较？这是一些图像，在 OSX 上的 Photoshop 中呈现。字体大小都在 10pt 左右。它们都设置为正常或书本重量。

如您所见，前三种字体与 Open Sans 最大的区别在于小写*g*。我确信大写字母之间存在更多差异，我鼓励您探索这些细节。

世高用户界面

[Segoe UI http://jmeas.com/stackoverflow/segoe.jpg](http://jmeas.com/stackoverflow/segoe.jpg)

果子

[Segoe UI http://jmeas.com/stackoverflow/frutiger.jpg](http://jmeas.com/stackoverflow/frutiger.jpg)

CartoGothic STD

[Cartogothic STD http://jmeas.com/stackoverflow/cartogothic.jpg](http://jmeas.com/stackoverflow/cartogothic.jpg)

WeblySleek 用户界面

[Cartoothic STD http://so.jmeas.com/weblysleek.jpg](http://so.jmeas.com/weblysleek.jpg)

打开 Sans

[打开 Sans http://jmeas.com/stackoverflow/open-sans.jpg](http://jmeas.com/stackoverflow/open-sans.jpg)

我希望其中之一适合您的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T20:21:01.637

如果您希望它与 Metro 完全一样，您可以使用[http://www.fontsquirrel.com/](http://www.fontsquirrel.com/)并上传字体。

**注意：**如果使用 fontsquirrel，请确保您拥有该字体的许可证，如评论中所述。

否则可能**是 Helvetica**或**Arial**。这些是我能想到的壁橱网络安全字体。

新的 Metro 字体是 Sans Serif 字体，而 Arial 一直是与 Windows 最密切相关的 Sans Serif 字体。

我也在使用这个带有地铁字体标志的谷歌字体，我觉得它们非常相似。

```
<link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400' rel='stylesheet" type="text/css"> 
```

还可以查看微软的网站。他们正在使用这个字体系列..`font-family: segoe ui, verdana, arial, sans-serif;`

[http://windows.microsoft.com/en-US/windows/home](http://windows.microsoft.com/en-US/windows/home)

另请查看此帖子，似乎非常相似。 [https://superuser.com/questions/336031/what-font-is-used-on-windows-8-or-windows-phone-7](https://superuser.com/questions/336031/what-font-is-used-on-windows-8-or-windows-phone-7)

# qt - 减小图像大小

> ID：12788793
> 
> 赞同：0
> 
> 时间：2012-10-08T20:14:18.743
> 
> 标签：qt

我正在尝试将图像插入到我的项目中。我写了以下代码：

```
void MainWindow::on_Layer_Updated(int arg1)
{
    if(ui->scrnCheck1->checkState() == Qt::Checked && ui->insCheck1->checkState() == Qt::Checked && ui->scrnCheck2->checkState() == Qt::Checked && ui->sheathCheck1->checkState() == Qt::Checked
            && ui->insCheck3->checkState() == Qt::Checked && ui->concentricCheck2->checkState() == Qt::Checked && ui->insCheck2->checkState() == Qt::Checked && ui->armorCheck->checkState() == Qt::Checked
            && ui->jacketCheck->checkState() == Qt::Checked)
    {
        QImage image;

        image.load(":/CondScrnInsScrnSheathInsCentricInsWiresArmJacket.png");
        ui->label_2->setPixmap(QPixmap::fromImage(image));
        ui->frame_10->setMinimumHeight(image.size().height() + 20);
        ui->groupBox_3->setMinimumHeight(ui->frame_10->size().height() + 20);
    } 
```

当我运行程序时，图像会弹出，但图像的大小很大，以至于它与另一个网格重叠。所以我减小了 mainwindow.ui 中的图像视图-> 高度大小。然后只显示一半的图像。如何调整图像使其不会与其他网格重叠？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T08:36:33.190

如果最终得到重叠的小部件，则意味着您没有为主小部件或其中的任何容器小部件设置布局。布局可防止小部件重叠。

要减小图像的大小，请使用 QImage::scaled() 或 QPixmap::scaled()。

# mysql - 在sql中删除表并添加

> ID：12788794
> 
> 赞同：0
> 
> 时间：2012-10-08T20:14:21.200
> 
> 标签：mysql, sql, sql-drop

我有一些通过 API 下载到 SQL 数据库中的信息。我正在设置 cron 在半夜执行此操作。有时会添加新产品或编辑旧产品。我需要添加新的并更新旧的（如果存在）。我很确定它看起来像：

```
If (id exists){
    update product
}else{
    insert product 
```

这是最好的方法吗？只是放下然后重新构建它呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:20:40.733

我会更新现有产品，特别是如果 ID 是自动编号。但即使您有除此 ID 之外的代理键，我仍然会更新现有产品。将来，您的数据库可能会变得更加复杂，并且您的产品可能会获得几个子表。您不想重建所有这些。

只需更新它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:43:02.320

您正在寻找 INSERT ... ON DUPLICATE UPDATE，我猜。见[这里](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)。

# string - 如何使用 Erlang 生成随机字母数字字符串？

> ID：12788799
> 
> 赞同：16
> 
> 时间：2012-10-08T20:14:47.627
> 
> 标签：string, utf-8, erlang

我正在尝试使用 Erlang 生成一个随机的字母数字 ID。我天真地尝试`crypto:strong_rand_bytes(Bytes)`生成一个随机二进制文件，然后像创建它一样使用该二进制文件`<<"my_unique_random_id">>`- 这不起作用，因为随机位不一定是有效的 UTF-8 字符串，对吧？

好吧，我在 erlang 文档和其他地方寻找其他选项，但我没有找到任何东西。有人可以指出我的解决方案吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-09T07:35:28.123

这可能取决于您需要的随机性。Erlang 的`crypto`模块产生比模块更强的随机数据`random`（另见[[erlang-questions] Yaws 安全警报 - Yaws 1.93](http://erlang.org/pipermail/erlang-questions/2012-June/067566.html)和[这个问题](https://stackoverflow.com/questions/10318156/how-to-create-a-list-of-1000-random-number-in-erlang/10319823#10319823)）。如果你想用来`strong_rand_bytes`生成一个 ID，也许得到它的 base64 可能就足够了：

```
> base64:encode(crypto:strong_rand_bytes(Bytes)). 
```

如果需要，您可以将其转换为列表。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-08T20:20:52.447

根据[在 Erlang 中生成随机字符串，](http://blog.teemu.im/2009/11/07/generating-random-strings-in-erlang/)只需几行 Erlang 即可从一组字符生成指定长度的字符串。

```
get_random_string(Length, AllowedChars) ->
    lists:foldl(fun(_, Acc) ->
                        [lists:nth(random:uniform(length(AllowedChars)),
                                   AllowedChars)]
                            ++ Acc
                end, [], lists:seq(1, Length)). 
```

博客文章对代码进行了逐行解释。查看评论以获取一些优化技巧。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-06-04T14:19:20.593

我已经准备了小模块，
它也使用`crypto:rand_uniform/2`但没有过时`random:uniform`

```
module(cloud_rnd).

-export([rnd_chars/1, rnd_numbers/1, rnd_chars_numbers/1]).

rnd_chars(L)         -> get_rnd(L, chars).
rnd_numbers(L)       -> get_rnd(L, numbers).
rnd_chars_numbers(L) -> get_rnd(L, chars_numbers).

get_rnd(L, chars)         -> gen_rnd(L, "abcdefghijklmnopqrstuvwxyz");
get_rnd(L, numbers)       -> gen_rnd(L, "1234567890");
get_rnd(L, chars_numbers) -> gen_rnd(L, "abcdefghijklmnopqrstuvwxyz1234567890").

gen_rnd(Length, AllowedChars) ->
  MaxLength = length(AllowedChars),
  lists:foldl(
    fun(_, Acc) -> [lists:nth(crypto:rand_uniform(1, MaxLength), AllowedChars)] ++ Acc end,
    [], lists:seq(1, Length)
  ). 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-09-01T21:06:42.557

对各种“我需要随机字符串”问题（无论使用何种语言）的回答的问题是几乎每个解决方案都使用有缺陷的规范，即字符串长度。这些问题本身很少揭示为什么需要随机字符串，但我会大胆假设它们将用作需要唯一的标识符。

有两种主要的方法来获取严格唯一的字符串：确定性（不是随机的）和存储/比较（这是繁重的）。该怎么办？放弃鬼。改为使用*概率唯一性*。也就是说，接受您的字符串不是唯一的（尽管很小）风险。这就是理解碰撞概率和熵有帮助的地方。

因此，我将改写我的大胆假设，因为您需要一些重复风险很小的标识符。作为一个具体的例子，假设您需要 500 万个重复风险小于万亿分之一的 Id。那么你需要多长的字符串呢？好吧，这个问题没有详细说明，因为它取决于所使用的字符。但更重要的是，它被误导了。您需要的是字符串熵的规范，而不是它们的长度。

这就是[EntropyString](https://github.com/EntropyString/Erlang)可以提供帮助的地方。

```
Bits = entropy_string:bits(5.0e6, 1.0e12).
83.37013046707142
entropy_string:random_string(Bits).
<<"QDrjGQFGgGjJ4t9r2">> 
```

还有其他预定义的字符集，您也可以指定自己的字符（尽管出于效率原因，仅支持具有 2 个字符的幂的集）。最重要的是，在指定数量的字符串中重复的风险是明确的。不再猜测字符串长度。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-17T04:50:23.003

```
randchar(N) ->
   randchar(N, []).

randchar(0, Acc) ->
   Acc;
randchar(N, Acc) ->
   randchar(N - 1, [random:uniform(26) + 96 | Acc]). 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-02T12:30:25.227

`uef_bin:random_latin_binary/2`您可以从这里 使用函数： [https ://github.com/DOBRO/uef-lib#uef_binrandom_latin_binary2](https://github.com/DOBRO/uef-lib#uef_binrandom_latin_binary2)

```
Bin = uef_bin:random_latin_binary(Length, any) 
```

然后，如果你需要一个`string()`类型：

```
String = erlang:binary_to_list(Bin) 
```

# ef-code-first - 代码优先：当一侧可以是 0 或多时，如何表示多对多？

> ID：12788801
> 
> 赞同：0
> 
> 时间：2012-10-08T20:14:52.757
> 
> 标签：ef-code-first

开发人员可能会受到 0 个或多个任务的影响。一项任务需要至少一个开发人员才能执行。我如何首先在代码中表达这一点？

```
public class Task
{
   public int ID
   //more properties here

   public virtual ICollection<Developer> Developers { get; set; }
}

public class Developer
{
   public int ID
   //more properties here

   public virtual ICollection<Task> Tasks { get; set; }
} 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T13:44:44.927

它仍然是一个常规的多对多关系，默认情况下应该正确映射。特定的业务（验证）规则不会改变其性质。

如果要在保存时强制执行特定的基数，可以实现[IValidatableObject 。](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.ivalidatableobject.aspx)

# android - 如何截断TextView，然后在Android中添加省略号

> ID：12788803
> 
> 赞同：8
> 
> 时间：2012-10-08T20:14:57.010
> 
> 标签：android

我在这里阅读了一些其他有类似问题的主题，但他们的答案似乎都对我不起作用。

[无法在 Android 上使用省略号](https://stackoverflow.com/questions/1698881/cant-get-ellipsis-to-work-on-android)

[Android：比 android:ellipsize="end" 添加“...”到截断的长字符串更好的东西？](https://stackoverflow.com/questions/3769105/android-something-better-than-androidellipsize-end-to-add-to-truncated)

我有一个包含 2 个元素的相对布局，一个文本视图和一个图像视图。我需要文本视图为 1 行并截断图像视图约 5sp 的长度，并将省略号应用于文本的末尾。

```
<RelativeLayout
                android:id="@+id/title_close"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="5sp">

                <TextView
                    android:id="@+id/"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:textSize="10sp"
                    android:textColor="#FFFFFF"
                    android:text="title"
                    android:maxLines="1"
                    android:ellipsize="end"/>

                <ImageView
                    android:id="@+id/"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:layout_marginRight="5sp"
                    android:layout_marginLeft="5sp"
                    android:background="@drawable/home"/>

</RelativeLayout> 
```

在上面的代码中，我试图对 Image View 应用一个边距，以强制文本视图在其左边截断与我放入边距一样多的 sp。

上面的代码会将文本视图截断为一行并添加 (...) 但仅添加到该行的末尾；无论 ImageView 是否正确，无论我应用什么边距。图像视图出现在文本上方。我认为这可能是由于它们处于相对布局中。

任何帮助弄清楚如何使文本视图尊重图像视图占用的边距/空间将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T20:25:06.053

我相信您要做的是首先放置图像视图（带边距），然后将文本设置为与左边框对齐并放置在图像的左侧。

# jquery - jQuery 自动完成“响应”事件

> ID：12788804
> 
> 赞同：8
> 
> 时间：2012-10-08T20:15:03.913
> 
> 标签：jquery, jquery-ui, jquery-autocomplete

我正在使用 jQuery UI 自动完成，如 [http://api.jqueryui.com/autocomplete/] 所述

在执行搜索之前和之后，我需要做一些事情。通过阅读上述 URL 上的文档，它描述了两种方法“搜索”和“响应”，它们在查询运行之前和之后触发 - 完美。但是，如果我将这些添加到我的代码中，“搜索​​”会完美运行，但永远不会调用“响应”。我究竟做错了什么？我所有的代码都有效，没有 javascript 错误，自动完成功能完美。但我只是没有触发“响应”方法。

```
$(function() {
             $("#tv").autocomplete({
                source: "a_url_providing_json",
                minLength: 4,
                select: function(event, ui) {
                    $('#state_id').val(ui.item.id);
                    $('#abbrev').val(ui.item.abbrev);
                },
                search : function(a,b) {
                     alert('this works!');
                },
                response : function(a,b) {
                     alert('this doesnt!');
                } 
        })    
    }); 
```

非常感谢您的任何建议！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T10:28:27.407

这个回调方法与新的 jquery-ui 一起出现。我无法让它工作，但在我从**1.8.20**更新到**1.9.2**之后，回调会按预期触发。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T16:14:49.963

假设您的所有代码都是正确的，您可能需要升级您的 jQuery UI 版本（以及相应的 jQuery）。这是因为尽管您正在查看的文档显示“添加了自动完成小部件版本：1.8”，但响应事件直到 1.9 才添加（请参阅[jQuery 1.9 升级指南：响应事件](http://jqueryui.com/upgrade-guide/1.9/#added-response-event)）这也意味着您将无法“如指南所述，将事件侦听器绑定到 autocompleteresponse 事件”。

升级到支持自动完成响应事件的 jQuery 和 jQuery UI 版本后，此代码将按预期工作。

作为给刚接触此事件的任何人的提示，请记住，如果您修改数据，则需要为要添加的每个项目包括 value 和 label 属性，即使您的源数据只是一个值数组。这是因为一旦内容进入这个事件，它就已经被“规范化”了（也就是说，标签已经被分配了一个值）。

因此，如果您想在返回的结果中添加“其他”，您的响应事件将如下所示：

```
response: function (e, ui) {
  ui.content.push(
    {label:"Other", value:"Option"}
  );
} 
```

这将为每个列表添加一个“其他”选项，其输入值为“选项”。

# java - 在persist（）之后但在flush（）之前更改JPA实体不起作用

> ID：12788808
> 
> 赞同：1
> 
> 时间：2012-10-08T20:15:20.200
> 
> 标签：java, hibernate, jpa, jpa-2.0

我将 JPA 2 与 Hibernate 版本一起使用。4.1.7.Final 作为 JPA 实现。我也在使用 Spring framework v. 3.1.2.RELEASE 来明确。这是我的问题。

我已经编写了一种方法来添加/更新我的用户实体。

```
@Override
@Transactional
public void saveUser(UserForm userForm) {
    User user;

    if (userForm.getId() == null) { // new user
        user = new User();
        user.setCreationDate(new Date());
        entityManager.persist(user); // !!!
    } else {
        user = entityManager.find(User.class, userForm.getId());
    }

    user.setFirstName(userForm.getFirstName());
    user.setLastName(userForm.getLastName());
    user.setMiddleName(userForm.getMiddleName());

    user.setEmail(userForm.getEmail());

    user.setRole(entityManager.find(Role.class, 1));//TODO

    user.setLogin(userForm.getLogin());
    user.setPassword(userForm.getPassword1());

    entityManager.flush();
} 
```

我正在测试添加用户（userForm.getId() == null）。上面的代码不起作用，报错：

```
javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: Column 'first_name' cannot be null
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1377)
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1300)
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1306)
at org.hibernate.ejb.AbstractEntityManagerImpl.flush(AbstractEntityManagerImpl.java:989)
... 
```

**但。**如果我在 flush() 之前将调用 persist() 移到最后，一切正常：

```
@Override
@Transactional
public void saveUser(UserForm userForm) {
    User user;

    if (userForm.getId() == null) { // new user
        user = new User();
        user.setCreationDate(new Date());
    } else {
        user = entityManager.find(User.class, userForm.getId());
    }

    user.setFirstName(userForm.getFirstName());
    user.setLastName(userForm.getLastName());
    user.setMiddleName(userForm.getMiddleName());

    user.setEmail(userForm.getEmail());

    user.setRole(entityManager.find(Role.class, 1));//TODO

    user.setLogin(userForm.getLogin());
    user.setPassword(userForm.getPassword1());

    entityManager.persist(user);// !!!
    entityManager.flush();
} 
```

我认为发生的情况是在第一种（问题）情况下，它尝试存储在持久调用时存在的用户对象数据，尽管在刷新（）期间执行的实际保存（**更新。**错误。它试图在持久（ ） 称呼）。让我这么想的原因是，当我尝试调试时，我发现它仍然尝试在内部某处插入正确的 creation_date，但其他值是空值。

但我发誓，在几年前我一直在从事的另一个项目中，这工作得很好，尽管后来我使用了 Oracle 而不是 MySQL（我不认为这是原因）和旧版本的框架。

这里可能是什么问题？也许 Hibernate 有一些配置选项会影响这个？

或者这是正确的行为和我对 JPA API 的误解？

**UPD。**我在用着

```
@Id
@GeneratedValue
@Column(columnDefinition="INT")
private int id; 
```

用于用户条目中的 id 字段。我相信这意味着生成策略 = AUTO，这适用于 mysql auto_increment 键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:22:23.680

您将用户名设置为 null ( `user.setFirstName(userForm.getFirstName());`)，因为`userForm.getFirstName()`返回 null，并且您的错误显示：`Column 'first_name' cannot be null`。

您应该检查为什么`userForm.getFirstName()`返回 null 或允许用户的名字为 null，因为您当前的实体配置不允许这样做。

也许您可以向我们展示用户实体？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:04:32.583

那是正确的行为。在您第一次调用 persist() 时，用户的 firstName 为空。尽管您在这一点之后设置了名字，但在刷新之前，JPA/Hibernate 准备的命令将类似于，

在持久化时，用户对象的状态可以说，user@version1 从 user@version1 对象插入用户值（id、creationdate、null、null..）

现在存在一个新的用户版本 user@version2

冲水的时候，

检查是否有任何挂起的插入/更新.. 将所有对象带到 version1，这是最后一次持久化的时间。

请注意，flush 可能会或可能不会在 DB 中进行物理插入操作，但对象会被带到正确的状态，这意味着非持久性更改将丢失。

不要担心它之前是否可以正常工作，可能是在休眠 3 中，并且在您迁移到休眠 4 时开始无法正常工作。我有几个问题，休眠 3 没有问题，但在没有额外修复的情况下无法在休眠 4 上工作。

# oracle - 如何在 Oracle 中注册 XML 模式

> ID：12788810
> 
> 赞同：-1
> 
> 时间：2012-10-08T20:15:24.193
> 
> 标签：oracle, xsd

我有一堆使用 XMLSpy 验证的模式。

我想在 Oracle 中注册它们。怎么办？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:22:48.887

使用内置的 DBMS_XMLSCHEMA 包。 [了解更多](http://docs.oracle.com/cd/E11882_01/appdev.112/e23094/xdb05sto.htm#i1031977)。

# android - 如果按下自定义布局中的按钮，则使用自定义布局更新 AlertDialog

> ID：12788811
> 
> 赞同：0
> 
> 时间：2012-10-08T20:15:30.597
> 
> 标签：android, dialog

如果在自定义布局中按下按钮，是否可以更新 AlertDialog 内容？

显示带有自定义布局的 AlertDialog！自定义布局有六个按钮。

每次在自定义布局中按下六个按钮之一时，我都想更新标题。

布局是这样的：

**标题行**

带有 6 个按钮的自定义布局

**3 个警报对话框按钮**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:26:30.853

是的，保留对 AlertDialog 和 Button 的 OnClickListener 的引用应该如下所示：

```
public void onClick(View v) {
    mDialog.setTitle("New Title");
} 
```

# android - Android 从对话框中启动谷歌地图意图

> ID：12788815
> 
> 赞同：0
> 
> 时间：2012-10-08T20:15:50.537
> 
> 标签：android, google-maps-api-3, dialog, itemizedoverlay

我正在使用带有叠加项目的谷歌地图 api，并且希望能够在用户单击这些叠加时获得方向。

我希望它链接到我的对话框的中间按钮：

```
// Middle button
    dialog.setNeutralButton("Directions",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {

                    Intent intent = new Intent(android.content.Intent.ACTION_VIEW, 
                            Uri.parse("http://maps.google.com/maps?saddr=20.344,34.34&daddr=20.5666,45.345"));
                    intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");

                    startActivity(intent);

                }
            }); 
```

我收到以下错误“未定义类型 new DialogInterface.OnClickListener(){} 的方法 startActivity(Intent)”

这里有几个答案，但我无法让它们中的任何一个工作。我已经尝试过创建构造函数和调用 getContext()。

我不确定是不是因为我的课是：

```
public class ItemizedOverlayLayoutActivity extends ItemizedOverlay { 
```

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:34:04.780

在您的类的构造函数中`ItemizedOverlayLayoutActivity`添加一个参数 Context：

```
private Context context;
public MyItemizedNewOverlay(Drawable defaultMarker, Context context) {
    //...
    this.context = context;
} 
```

在您创建对话框之前添加：

```
final Context fcontext = context; 
```

然后在对话框中间按钮中使用：

```
fcontext.startActivity(intent); 
```

祝你好运

# python - 将 XML 元素的标签与 python 中的字符串进行比较

> ID：12788816
> 
> 赞同：1
> 
> 时间：2012-10-08T20:15:53.680
> 
> 标签：python, xml, python-3.x, elementtree

我有以下 XML 结构

```
<root>
    <OuterLevel>
        <Node>
            <Name>NodeA</Name>
        </Node>
        <Node>
            <Name>NodeB</Name>
        <Node>
        <SpecialNode>
            <Name>NodeZ</Name>
        </SpecialNode>
    </OuterLevel>
 </root> 
```

我对 python 的 ElementTree XML API 做了一些阅读，我想将元素的标签与字符串进行比较。根据[http://docs.python.org/library/xml.etree.elementtree.html](http://docs.python.org/library/xml.etree.elementtree.html)上的文档，元素的标签是一个字符串。我编写了以下 python 代码来测试是否相等：

```
import xml.etree.ElementTree as ET
tree = ET.parse('sampleFile.xml')
root = tree.getroot()

if root[0][0].tag != 'Node'
print("not equal") 
```

但是，当我运行 python 代码时。我不断收到 SyntaxError: invalid syntax，胡萝卜符号指向 Node 之后的 '。我可以打印 root[0][0].tag 的结果 不能将其与字符串进行比较吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:16:46.493

`if`语句后需要一个冒号。例如：

```
if root[0][0].tag != 'Node':
    print("not equal") 
```

语法错误意味着在尝试理解您的代码时出错 - 而不是在尝试运行它时。值得注意的是，它可以更容易地找到问题的根本原因。

# java - 无法从 java 中的类访问泛型的变量

> ID：12788817
> 
> 赞同：-1
> 
> 时间：2012-10-08T20:15:57.983
> 
> 标签：java

```
class example{ 
    private int x=1;
    public int xreturned(){
    return x;
   }
}
class example2<N>{
    example2<N> variable;
    public int fun(){
        int x=variable.xreturned(); 
    }
}
class mainclass{
    public static void main(String[] args){
       example2<example>obj=new example2<example>();
       if(1.equals(obj.fun()))
       System.out.println("correct");
       return 0;
   }
} 
```

在 fun 函数变量中的 example2 类中找不到类示例的 xreturned() 函数，我怎样才能让它找到它？现在你可能会问我应该如何找到它？我想有可能找到它，因为 obj 具有示例（示例类的类型）通用 .. 所以请告诉我如何让它以最少的更改找到它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T20:25:06.360

[在运行时，由于类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，无法确定提供了什么类。在您的情况下，看起来 N 将始终属于示例类型，因此您的类定义可能是

```
class Example2<N extends Example> 
```

这将使您的示例工作，但我怀疑它可能过于简化以突出一个点（或家庭作业）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:17:30.770

除了大卫的回答和安娜的评论，这里是完整的代码（经过测试）

请注意我必须做的一些其他更改才能使其编译（请参阅注释和解释）

```
class Example{ 
    private int x=1;
    public int xreturned(){
    return x;
   }
}
class Example2<N extends Example> { //as in David's answer
    N variable; //as in Anna's comment
    public int fun(){
        int x=variable.xreturned(); 
        return x;
    }
}
class Mainclass{
    public static void main(String[] args){
       Example2<Example>obj=new Example2<Example>();
       if(1 == obj.fun()) // 1 doesn't have an equals method
           System.out.println("correct"); //indentation added, it's a condition

       //return 0; <-- you can't return 0 from main, it's return type is void
   }
} 
```

# iphone - 单击 iPhone Safari 时图像消失

> ID：12788818
> 
> 赞同：4
> 
> 时间：2012-10-08T20:16:10.730
> 
> 标签：iphone, ios, safari

好的，奇怪的问题：

1) 在 iPhone（Safari 浏览器）上访问：http: [//powellcreative.com/our-team/](http://powellcreative.com/our-team/)

2) 点击任意团队图片进入团队成员页面

3) 点击浏览器上的返回按钮

4）图像现在在团队页面上消失了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-14T23:57:43.900

我知道这个问题有点老了，但我一直在寻找类似问题的解决方案，经过搜索，我找到了解决方案。希望这可以帮助其他有同样问题的人。问题是当你给iOS一个像onmouseover或onmouseout这样的javascript事件时它不喜欢它，主要是因为当你的手指在iOS中“鼠​​标悬停”一个元素时，你实际上是在点击它，所以这就是我来的解决方案在iOS中点击后退按钮后似乎重新加载图像。

这里是：

确保所有图像都在各自独立的 div 中，并具有独特的名称。例子：

```
<div name="div1"><a href="dosomething"><img src="yourimage" onmouseover="javascript:this.src='yourimage2';" onmouseout="javascript:this.src='yourimage';"></a></div> 
```

在页面的 javascript head 部分中，您要插入以下内容：

```
window.onpageshow = 
function(event){
if (event.persisted){
//for every div and image you want changed back you can add a loop here to change all at once or just one div by name//
document.getElementById('div1').innerHTML = '<a href="dosomething"><img src="yourimage" onmouseover="this.src="yourimage2";" onmouseout="this.src="yourimage";"></a>';
}
} 
```

这将检查页面返回，因为 Mobile Safari 使用 bfcache 并将您的图像重新加载到 div 中。希望这有助于 OP 或其他人。

# java - 返回一个范围以与 BigDecimal 进行比较

> ID：12788821
> 
> 赞同：0
> 
> 时间：2012-10-08T20:16:17.983
> 
> 标签：java, bigdecimal

在我的代码中，用户使用此方法输入指定的温度范围（默认范围为 0 - 100）：

```
public class range {   
     public void rangeset ()
      {
        int range1 = 0;
        int range2 = 100;

        System.out.println("Please note that the default temp range is 0-100");
        System.out.println("What is the starting temperature range?");
        range1 = sc.nextInt();
        System.out.println("What is the ending temperature range?");
        range2 = sc.nextInt();
        System.out.println("Your temperature range is " + range1 + " - " + range2);  

      HW_5.mainMenureturn();

    }//end rangeset method (instance method)

}//range class 
```

再往下，我有一个输入要求用户输入他们想要转换为华氏温度的数字。

```
public class HW_5 {
   public static double fahrenheit2Centigrade  ()
    {
        double result;
        BigDecimal quotient = new BigDecimal("1.8");

        //take in input, take input as BigDecimal
        System.out.println("Please enter the fahrenheit temperature you wish to convert to celsius");   
        BigDecimal fah = sc.nextBigDecimal();

     }
} 
```

所以，我想要做的是确保他们输入的数字（这是一个 BigDecimal）在另一种方法中指定的范围内。

1）我如何让我的**rangeset**方法返回范围的开始编号和范围的结束编号，因为您不能返回两个值？

2) 然后我如何使用这些返回值来检查**fahrenheit2centigrade**方法中的 BigDecimal 是否在这些值范围内？

请要求澄清。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:28:20.697

这是一个范围问题。当前，您在 rangeset() 方法中声明了两个范围变量，这意味着它们仅在方法的“范围”内可见（也就是只有该方法可以访问这些变量）。

相反，您应该考虑让这些变量对整个班级可见。

```
public class range {   
     private int lowerBound;
     private int upperBound;

     public void rangeset ()
      {
        int lowerBound = 0;
        int upperBound = 100;

        System.out.println("Please note that the default temp range is 0-100");
        System.out.println("What is the starting temperature range?");
        lowerBound = sc.nextInt();
        System.out.println("What is the ending temperature range?");
        upperBound = sc.nextInt();
        System.out.println("Your temperature range is " + range1 + " - " + range2);  

         HW_5.mainMenureturn();

       }//end rangeset method (instance method)

    public int getLowerBound()
    {
        return lowerBound;
    }

    public int getUpperBound()
    {
        return upperBound;
    }

}//range class 
```

一旦你以这种方式设置好东西，你就可以`range`在你的主类中创建一个新类，调用它的相关方法，并使用你的 getter 方法来提取你关心的数据。就像是：

```
public class HW_5 {
   public static double fahrenheit2Centigrade  ()
    {
        double result;
        BigDecimal quotient = new BigDecimal("1.8");
        range myRange = new range();
        myRange.rangeset();
        System.out.printf("%d - %d", myRange.getLowerBound(), myRange.getUpperBound());

        //take in input, take input as BigDecimal
        System.out.println("Please enter the fahrenheit temperature you wish to convert to celsius");   
        BigDecimal fah = sc.nextBigDecimal();

     }
} 
```

附言。通常你应该使用大写字母来开始你的类名，即。`Range`而不是`range`.

# ant - 在 Weblogic 中热部署具有大量静态内容的项目

> ID：12788822
> 
> 赞同：1
> 
> 时间：2012-10-08T20:16:24.217
> 
> 标签：ant, weblogic, static-content

我有一个包含大量静态内容的 Java EE 应用程序：Javascript、图像、css 等。现在我们正在使用 Eclipse 的 weblogic 插件来部署我们的应用程序以进行测试，但是它变得非常慢，而且只会变得更慢。由于我们有很多 javascript，因此我们通常必须进行一些小的更改并快速连续地测试它们，这变得非常头疼。

我们还想摆脱在 Eclipse 上使用 weblogic 插件。我们希望找到一种在测试环境中部署的解决方案，它只复制自上次部署以来更改的内容。我们考虑过使用 Ant 脚本，但我在 Internet 上找到的所有解决方案都涉及制作一个 .EAR 并将其复制到服务器上测试域中的 autodeploy 文件夹中。这不会解决问题，因为生成耳朵会导致更多开销。

有什么办法可以使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T22:59:23.170

如果您部署到开发机器上的本地 weblogic 环境，您可以使用爆炸部署（即解压缩的战争或耳朵）。对静态内容和 jsps 的所有更改都将立即用于测试。

# php - heroku 崩溃，没有关于错误的数据，只有 http 500

> ID：12788824
> 
> 赞同：1
> 
> 时间：2012-10-08T20:16:26.703
> 
> 标签：php, heroku

我通过 git 在 heroku 服务器上获取了我的应用程序，现在在我的本地 php 服务器上运行的东西不断崩溃，但是 - 而对于 localhost 上的崩溃，php 引擎总是会给我有关错误的信息，在这里我只得到 HTTP500。

例如 - 如果我创建空 php，我所做的只是除以零，easyphp 会给我警告\通知，而 heroku 服务器什么也不做 - 空页面。

现在服务器由于与数据库相关的字符串而崩溃（我检查过），但它给出的所有反馈都是 HTTP500 错误，没有详细信息。在 localhost 上，此字符串有效。我该如何找出问题所在？有没有办法从heroku服务器获得任何反馈？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T22:31:23.323

只需使用`heroku logs`！Apache 应该记录实际的异常。

# php - PHP iFrame 上传确认

> ID：12788835
> 
> 赞同：0
> 
> 时间：2012-10-08T20:17:11.967
> 
> 标签：php, html, iframe, file-upload, upload

所以我在我的网站上有一个文件上传功能，而不是重定向到 php 脚本页面，我想要一个 iframe 来显示脚本返回的消息。所以这是我的html：

```
<iframe class="iframe" name="my_iframe" src="upload_file.php" style="display:none;"></iframe>
<form id="uploadForm" action="upload_file.php" method="post" enctype="multipart/form-data" target="my_iframe"> 
```

所以基本上我想隐藏我的 iframe，*直到*上传过程完成并且脚本返回一条消息。这是我的 php 脚本：

```
<?php
    ini_set('display_errors', 'On');
    error_reporting(E_ALL | E_STRICT);
    session_start();
    $allowedExts = array("doc", "docx");
    $extension = pathinfo( $_FILES["upload"]["name"],PATHINFO_EXTENSION);
    $username = $_SESSION["username"];

    if (($_FILES["upload"]["size"] < 200000)
    && in_array($extension, $allowedExts)) {
        if ($_FILES["upload"]["error"] > 0)
        {
            echo "Return Code: " . $_FILES["upload"]["error"] . "<br />";
        }
        else
        {
            echo "Upload: " . $_FILES["upload"]["name"] . "<br />";
            echo "Type: " . $_FILES["upload"]["type"] . "<br />";
            echo "Size: " . ($_FILES["upload"]["size"] / 1024) . " Kb<br />";
            echo "Temp file: " . $_FILES["upload"]["tmp_name"] . "<br />";

            $dir_exists = is_dir("/disks/*/*/*/*/". $_SESSION["FirstName"] ."-".$_SESSION["username"]."/");
            $file_exists = file_exists("/disks/*/*/*/*/".$_SESSION["FirstName"] ."-".$_SESSION["username"]."/" . $_FILES["upload"]["name"]);
            $folderName=$_SESSION["FirstName"];
            $baseDir = "/disks/*/*/*/*/";
            // Create directory if it does not exist
            if (! $dir_exists) {
                if (is_writable($baseDir)) {
                    mkdir($baseDir . $_SESSION["FirstName"]."-".$_SESSION["username"]);
                } else {
                    trigger_error($baseDir.  " is not writeable");
                }
            }

            if ($file_exists) {
                echo $_FILES["upload"]["name"] . " already exists. ";
            } else {
                $link = new PDO('mysql:host=***;dbname=***;charset=UTF-8','***','***');
                $proptype = $_POST["prop_cat"];
                $stmt = $link->prepare("UPDATE Table SET `PType`=:proptype WHERE Username=:username");
                $stmt->bindParam(':username', $username);
                $stmt->bindParam(':proptype', $proptype);
                $stmt->execute();
                move_uploaded_file($_FILES["upload"]["tmp_name"],
                $baseDir. $_SESSION["FirstName"] ."-".$_SESSION["username"]."/". $_FILES["upload"]["name"]);
                echo "Stored in: " . $baseDir. $_SESSION["FirstName"] ."-".$_SESSION["username"]."/". $_FILES["upload"]["name"];
            }
        }
    } else {
        echo "Invalid file";
    }
?> 
```

所以基本上总结了我的问题：如何在上传完成之前隐藏 iframe，然后显示用户可以像警报框一样关闭的消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:29:29.993

您可以在上传结束时回显 iframe，而不是尝试隐藏它然后在顶部显示它吗？

```
if ($file_exists) {
            echo $_FILES["upload"]["name"] . " already exists. ";
        } else {
            $link = new PDO('mysql:host=***;dbname=***;charset=UTF-8','***','***');
            $proptype = $_POST["prop_cat"];
            $stmt = $link->prepare("UPDATE Table SET `PType`=:proptype WHERE Username=:username");
            $stmt->bindParam(':username', $username);
            $stmt->bindParam(':proptype', $proptype);
            $stmt->execute();
            move_uploaded_file($_FILES["upload"]["tmp_name"],
            $baseDir. $_SESSION["FirstName"] ."-".$_SESSION["username"]."/". $_FILES["upload"]["name"]);
            echo "Stored in: " . $baseDir. $_SESSION["FirstName"] ."-".$_SESSION["username"]."/". $_FILES["upload"]["name"];

            /// load the iframe now ///////////////
            echo '<iframe class="iframe" name="my_iframe" src="upload_file.php"></iframe>';
            ///////////////////////////////////////
         } 
```

# java - 扩展返回的实例

> ID：12788836
> 
> 赞同：0
> 
> 时间：2012-10-08T20:17:18.207
> 
> 标签：java, class, inheritance, instance

我是 Java 新手，遇到了一些问题。我想让一个班级变成另一个班级。很难用抽象的方式解释，所以我举个例子。

```
public class WorldGuard extends WorldGuardPlugin {
    public WorldGuard(Plugin parent) {
        WorldGuardPlugin plugin = parent.getServer().getPluginManager().getPlugin("WorldGuard")
        // make plugin the actual class
    }
} 
```

`WorldGuard`在这里应该像某种包装器一样。构造时，它会获得一个参数`parent`，根据该参数找到`WorldGuardPlugin`. 该类现在应该*成为*该实例。这在 JavaScript 中很简单，我只返回实例，但在 Java 中我不能这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:23:19.317

我不太确定你想做什么。一个类不能“成为另一个类”。但也许您的问题只是您在应该使用普通函数时尝试使用构造函数。也许你想要做的是：

```
public class WorldGuard extends WorldGuardPlugin
{
  public static WorldGuard getFromPlugin(Plugin parent)
  {
    return (WorldGuard) parent.getServer().getPluginManager().getPlugin("WorldGuard");
  }
} 
```

这将通过父对象获取对象并将其作为 WorldGuard 对象返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T20:25:57.470

班级不能成为其他班级。

我认为您可以在以下可能性中进行选择。

1.  创建类实例的用户工厂。工厂将根据您想要的任何逻辑选择具体类并创建“正确”类的实例。如果您希望工厂操作的所有类都可以实现特定的接口，那么调用者甚至不知道创建了哪个类的实例。
2.  使用包装模式。在这种情况下，您的实际`WordGuard`类将包装其他类的实际实例并将所有调用委托给那里。
3.  使用动态代理或字节码工程解决方案。但它要复杂得多，在大多数情况下并不是最好的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T20:27:06.050

您应该调用`WorldGuardPlugin`. 我的意思是`WorldGuardPlugin`应该有一个构造函数，可以创建类的给定实例的副本，例如：

```
WorldGuardPlugin pg = new WorldGuardPlugin(anInstance); 
```

如果是这种情况，那么你很幸运。你可以简单地做：

```
public class WorldGuard extends WorldGuardPlugin {
    public WorldGuard(Plugin parent) {
        super( parent.getServer().getPluginManager().getPlugin("WorldGuard"));
    }
} 
```

这将使“WorldGuard 在这里起到某种包装器的作用”。您仍然可以在`WorldGuardPlugin`实例上调用定义的方法，`WorldGuard`同时能够为其`WorldGuard`自身添加方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T20:23:45.133

您不能更改在构造函数中构造的对象的类型。根据定义，构造函数构造该类（例如，`A`构造函数创建类型`A`）。

在您的示例中，`WorldGuard`extends ，`WorldGuardPlugin`这意味着它`WorldGuard` *是*. `WorldGuardPlugin`也许有一种方法可以使用您想要的属性来初始化`WorldGuardPluin`类（使用构造函数中的调用）。`super`

# css - 是否有可以让您动态编译文件的 CDN？

> ID：12788841
> 
> 赞同：1
> 
> 时间：2012-10-08T20:17:45.110
> 
> 标签：css, cdn, amazon-cloudfront, akamai

我有一个应用程序，让用户可以指定自定义 css 以及我们预先确定的 css。我希望这样当我们请求用户的 css 文件时，我们返回一个文件，该文件使用用户特定的 css 动态编译基本 css。如果我们从自己的服务器提供资产，这相对容易做到，但如果在某个时候我想从 CDN 提供我所有的静态资产，是否有一个 CDN 可以让你这样做？我知道我总是可以为每个用户上传一个单独的 css 文件到 CDN，但是会有大量的基本 CSS 重复，这会不必要地增加存储成本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:30:49.060

为什么不将 CSS 拆分为两个单独的文件？

1.  CDN 提供的静态 CSS
2.  由服务器上的脚本提供的动态（用户生成）CSS

您的 HTML 将如下所示：

```
<link href="./dynStyles.css" rel="stylesheet" type="text/css" media="all">
<link href="http://my.cdn.com/staticStyles.css" rel="stylesheet" type="text/css" media="all"> 
```

# html - 使最后一个类别无边框

> ID：12788843
> 
> 赞同：1
> 
> 时间：2012-10-08T20:17:53.680
> 
> 标签：html, css

我正在尝试使最后一个类别没有底部边框，是否有任何技巧可以在没有编程的情况下完成它？

HTML 和 CSS：

```
<style>
#menu {
  border:1px red solid;padding:10px
}
#menu a {
  display:block;
  border-bottom:1px #000 dotted
}
</style>
<div id="menu">
  <p>MAIN MENU</p>
  <a>Computers</a>
  <a>Design</a>
  <a>Programming</a>
</div> 
```

示例：http: [//jsfiddle.net/GLJWp/](http://jsfiddle.net/GLJWp/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T20:19:53.573

看看`:last-child`伪类，它只会将 css 规则应用于最后一项：[http ://www.quirksmode.org/css/firstchild.html](http://www.quirksmode.org/css/firstchild.html)

在这种情况下，您可以通过以下方式设置最后一个链接的样式：

```
#menu a:last-child {border-bottom:none} 
```

为了支持 IE <9，看看[这个漂亮可怕的条件样式表黑客](https://stackoverflow.com/questions/3786434/last-child-psuedo-class-selector-in-css-and-internet-explorer/3786484)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T21:14:45.367

你可以试试这个，因为`last-child`不起作用`IE`

**HTML**

```
<div id="menu">
    <p>MAIN MENU</p>
    <a>Computers</a>
    <a>Design</a>
    <a>Programming</a>
</div>​ 
```

**CSS**

```
#menu{
    border:1px red solid;padding:10px
}
#menu a{
    display:block;
    border-top:1px #000 dotted
} 
```

以下将影响`a`之后的第一个`p`，`a:first-child`在 IE 中不起作用，因为`p`它是第一个子元素

```
#menu p + a{
    border-top: none;
} 
```

[**演示**](http://jsfiddle.net/GLJWp/5/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T20:23:07.780

在这里完成：http: [//jsfiddle.net/GLJWp/2/](http://jsfiddle.net/GLJWp/2/)

# android - 强制 Android WebView 在新浏览器中打开

> ID：12788848
> 
> 赞同：3
> 
> 时间：2012-10-08T20:18:22.617
> 
> 标签：android, android-webview

Android 已更改其打开点击的默认方法，现在它在 web 视图中而不是新浏览器中打开它们。这已经在[这里](https://stackoverflow.com/questions/7384384/android-webview-not-launching-new-browser)问过了，但是我尝试过的每件事都会打开 WebView 中的链接。有人可以给我有关捕获点击的详细信息，以便我强制使用`link to open in the default browser`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:23:46.447

在您的按钮 onclick 中使用它：

```
Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com")); 
```

开始活动（浏览器意图）；

为了解析它需要一个*http://*在开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T16:10:23.097

最后工作不知道这是否是最好的方法，但它有效。我将以下代码放在 onCreate 中。字符串 strSiteUrl 设置为我希望 WebView 显示的页面。

```
/* Load WebView in memory */
WebView webv = (WebView) findViewById(R.id.webv);
webv.setWebViewClient(new WebViewClient() { 
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        Intent browserIntent = new Intent();
        browserIntent.setAction(Intent.ACTION_VIEW);
        browserIntent.addCategory(Intent.CATEGORY_BROWSABLE);
        browserIntent.setData(Uri.parse(url));
        startActivity(browserIntent);
        return false;
    }
}); //End webv.setVewView
/* Configure WebView */
    WebSettings webSettings = webv.getSettings();
    webSettings.setJavaScriptEnabled(true);
    webSettings.setJavaScriptCanOpenWindowsAutomatically(true);
    webSettings.setSupportMultipleWindows(true);                
    webv.loadUrl(strSiteUrl); 
```

当用户单击 WebView 页面中的链接时，它将打开默认浏览器并显示链接页面。但是，在单击返回按钮后，取决于单击了哪个链接，WebView 将返回到原始页面或显示链接的页面。这不是我想要的，我只希望 WebView 显示原始页面。我不知道为什么有些链接没有正确返回，也许这些链接是重定向？所以为了解决这个问题，我使用了 onStart 调用。我通过放置使视图 webv 全球化

```
WebView webv; 
```

在我的全球声明中。将 webv 分配更改为

```
webv = (WebView) findViewById(R.id.webv); 
```

然后创建了以下onStart

```
@Override
public void onStart() {
    super.onStart();
    String strReturnUrl = String.valueOf(webv.getUrl());
    Log.i("URL!", strReturnUrl);
    if (!strReturnUrl.contentEquals(strSiteUrl)) { 
        webv.loadUrl(strSiteUrl);
    }
} 
```

将返回的 url 写入日志证明当按下后退按钮时，它会返回不同的 url，具体取决于单击的链接。我使用 if 语句来防止不必要地重新加载原始 url。

# css - CSS 未在 Visual Studio 2012 设计器中应用？

> ID：12788854
> 
> 赞同：0
> 
> 时间：2012-10-08T20:19:03.627
> 
> 标签：css, visual-studio-2010, visual-studio, visual-studio-2012, designer

我有一些 css，在我的 CSS 文件中没有应用到我在 Visual Studio 中的设计器，但在我发布它时应用到了页面。这个问题大大减慢了网站开发速度，因为我正在尝试拿起 CSS...

这是 CSS 的一个示例：

```
.header {
    background-color: #ccc;
    border-bottom: 1px solid #666;
    color: #222;
    display: block;
    font-size: 20px;
    font-weight: bold;
    padding: 100px 100px 100px 100px;
    text-align: center;
    text-decoration: none;
        text-shadow: 0px 1px 0px #fff;
    background-image: -webkit-gradient(linear, left top, left bottom, 
                                       from(#ccc), to(#999));
} 
```

我在页面上应用 CSS：

```
<header>
    <asp:Label ID="lblQuestion" runat="server" Font-Bold="True" Font-Size="16pt" Text="Your question goes here..." CssClass="header"></asp:Label>
</header> 
```

我将 CSS 添加到页面：

```
<link rel="stylesheet" type="text/css" href="mycss.css" media="only screen and (max-width: 480px)" /> 
```

我对 CSS 很陌生，所以我希望有人能告诉我我在做什么，正在阻止 Visual Studio 在设计器中正确渲染 CSS ...

此外，如果我将我的 CSS 标签直接放在页面中，那么它可以工作，但我更愿意将我的 CSS 保留在它自己的文件中，以便可以重复使用。

示例样式工作：

```
<style>
    .header {
        background-color: #ccc;
        border-bottom: 1px solid #666;
        color: #222;
        display: block;
        font-size: 20px;
        font-weight: bold;
        padding: 100px 100px 100px 100px;
        text-align: center;
        text-decoration: none;
        text-shadow: 0px 1px 0px #fff;
        background-image: -webkit-gradient(linear, left top, left bottom, from(#ccc), to(#999));
    }
</style> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:30:18.417

我建议看看 Jeff Widmer 的博客文章，[为什么 Visual Studio 不能解析我的 CSS 类名？](http://weblogs.asp.net/jeffwids/archive/2009/06/07/why-does-visual-studio-not-resolve-my-css-class-names.aspx)

基本上，Visual Studio 不支持站点相对路径。这与智能感知不适用于 javascript 的原因相同。

他为这个问题提供了一个修复：

```
<link href="/content/default.css" rel="stylesheet" type="text/css" />
    <% if (false) {%>
        <link href="../../content/default.css" rel="stylesheet" type="text/css" />
    <% } %> 
```

更新：

这里的问题是css的链接标签中的媒体元素。VS 似乎不知道该标签是什么，因此不会尝试解析 url。

在这种情况下，css 文件与页面位于同一文件夹中，因此可以正常工作。但是，如果将 css 文件移动到另一个文件夹，那么它将停止工作，上面的修复将解决问题。

# android - 如何通过 Phonegap/ZXing 将二维码中的 vCard 信息保存到 Android 联系人应用程序中？

> ID：12788855
> 
> 赞同：2
> 
> 时间：2012-10-08T20:19:03.560
> 
> 标签：android, cordova, qr-code, zxing, vcf-vcard

我正在使用带有 ZXing 插件的 PhoneGap 创建一个 Android Barcode Scanner 应用程序。目前，它能够解码和区分所有二维码结果标题并采取相应措施。

例如：

1.  ***电话：1234567890***启动电话拨号器；
2.  ***smsto:12345:blablabla***启动消息应用程序；
3.  ***geo:111.111,222.222***启动地图应用程序；
4.  ***http://website.com***启动浏览器；等等。

该应用程序现在剩下***vCard***和***iCal***。

我的问题是如何从本地联系人应用程序启动***“创建联系人卡片/表单”***，该应用程序预先填充了***vCard***字符串中的信息（从 QR 码获取）并询问您是否要保存联系人？***iCal***也是如此，它将启动日历应用程序，该应用程序预先填充了***iCal***字符串中的信息。

提前致谢！

# telerik-mvc - Telerik MVC 扩展、网格、镀铬和垂直滚动条消失

> ID：12788857
> 
> 赞同：0
> 
> 时间：2012-10-08T20:19:28.487
> 
> 标签：telerik-mvc

我们最近注意到，我们网站中的网格以及网格演示页面上的网格显示垂直滚动条，直到页面完成加载然后消失。它似乎正在将“溢出：隐藏”添加到具有删除滚动条效果的表格中。当我删除这个 css（在 Chrome 调试器中）时，滚动条会重新出现。我已经在多个用户的系统上确认了这种行为。

有谁知道解决这个问题？我有一种感觉，这是 Telerik 必须解决的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T16:34:51.523

发生此错误的原因是位于 Chrome 调试器设置中的名为“模拟触摸事件”的设置。当 Telerik 网格检测到支持触摸的浏览器时，它会将溢出：隐藏添加到网格中。就我而言，我工作中的大多数笔记本电脑都启用了触摸屏，因此这些机器上出现了“错误”。

# multithreading - 函数式语言中的并行性

> ID：12788858
> 
> 赞同：10
> 
> 时间：2012-10-08T20:19:32.467
> 
> 标签：multithreading, parallel-processing, functional-programming, lang

宣传的 FP 功能之一是程序“默认并行”，并且自然适合现代多核处理器。事实上，减少一棵树本质上是平行的。但是，我不明白它如何映射到多线程。考虑以下片段（伪代码）：

```
let y = read-and-parse-a-number-from-console
let x = get-integer-from-web-service-call
let r = 5 * x - y * 4
write-r-to-file 
```

翻译器如何确定应该在线程上运行哪些树枝？在您获得`x`或在单独的线程上减少或表达式之后`y`会很愚蠢（即使我们从线程池中获取它），不是吗？那么不同的函数式语言是如何处理这个问题的呢？`5 * x``y * 4`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T02:46:03.063

我们还没有完全做到。

纯声明式的程序（函数式风格包括在这个类别中，但其他一些风格也是如此）往往更适合并行化，因为所有数据依赖关系都是显式的。这使得程序员可以很容易地手动使用语言提供的原语来指定两个独立的计算应该并行完成，无论它们是否共享对任何数据的访问；如果一切都是不可变的并且没有副作用，那么改变事情完成的顺序不会影响结果。

如果语言*强制执行*纯度（如 Haskell、Mercury 等，但与鼓励但不强制执行纯度的 Scala、F# 等不同），那么编译器*可能*会尝试自动并行化程序，但不存在我知道的语言默认情况下会这样做。如果该语言允许未经检查的不纯操作，那么编译器通常不可能进行必要的分析来证明给定的自动并行化程序的尝试是有效的。所以我不希望任何这样的语言能够非常有效地支持自动并行化。

请注意，您编写的伪程序可能**不是**纯声明性代码。`let y = read-and-parse-a-number-from-console`并且`let x = get-integer-from-web-service-call`正在计算`x`并且`y`来自不纯的外部操作，并且程序中没有任何东西可以确定它们应该运行的顺序。一般来说，以任一顺序执行两个不纯操作都会产生不同的结果，并且在不同的线程中运行这两个操作会放弃对它们运行顺序的控制。因此，如果像这样的语言要自动并行化您的程序，它几乎肯定会引入可怕的并发错误，或者拒绝显着并行化任何东西。

然而，函数式风格仍然可以很容易地手动并行化这些程序。人类程序员可以说，您从控制台和网络读取的顺序几乎肯定无关紧要。知道没有共享的可变状态可以决定并行运行这两个操作而无需深入研究它们的实现（您必须在命令式算法中这样做，其中可能存在可变共享状态，即使它看起来不像来自界面）。

但是，强制纯语言的自动并行编译器的最大复杂性是知道要进行*多少*并行化。当您尝试在少量处理器上运行大量非常短暂的线程时，并行运行所有可能的计算极大地压倒了产生新线程的所有启动成本（更不用说上下文切换）的任何可能收益。编译器需要识别数量相当少的相当大的计算“块”，并在按顺序运行每个块的子计算的同时并行运行这些块。

但是只有“令人尴尬的并行”程序才能很好地分解成非常大的完全独立的计算。大多数程序更加相互依赖。因此，除非您只想能够自动并行化非常容易手动并行化的程序，否则您的自动并行化可能需要能够识别并并行运行部分相互依赖的“块”，让它们等待当他们到达真正需要一个应该由另一个“块”计算的结果的点时。这会在线程之间引入额外的同步开销，因此选择并行运行的逻辑需要更好，以击败仅按顺序运行所有内容的琐碎策略。

Mercury（一种纯逻辑编程语言）的开发人员正在研究解决这些问题的各种方法，从静态分析到使用分析数据。如果你有兴趣，他们的[研究论文](http://www.mercury.csse.unimelb.edu.au/information/papers.html)有更多的信息。我想其他研究正在用其他语言研究这个领域，但我对任何其他项目知之甚少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T20:21:55.490

在该*特定*示例中，第三个语句依赖于第一个和第二个语句，但第一个和第二个语句之间没有相互依赖关系。因此，运行时环境可以`read-and-parse-a-number-from-console`在与 不同的线程`get-integer-from-web-service-call`上执行，但第三条语句的执行必须等到前两条语句完成。

`y * 4`某些语言或运行时环境可能能够在获得 的实际值之前计算部分结果（例如） `x`。但是，作为高级程序员，您不太可能检测到这一点。

# python - wxPython Notebook更改时调用函数？

> ID：12788859
> 
> 赞同：0
> 
> 时间：2012-10-08T20:19:36.067
> 
> 标签：python, wxpython

我有一个与[wxPy Wiki 上的](http://wiki.wxpython.org/Simple%20wx.Notebook%20Example)几乎相同的 Python 脚本，并且我想在每次更改选项卡时运行一个函数（无缩进）。我已经尝试`theFunction()`在Notebook 使用的三个类中`wx.Frame.__init__...`的每一个中添加一行。`def __init__`当我这样做时，窗口在关闭后立即关闭，终端中没有错误。我究竟做错了什么？这是笔记本使用的每个类的内容：

```
class Textures(wx.Panel):
    def __init__(self, parent):
        wx.Panel.__init__(self, parent)
        self.textureslist = wx.ListBox(choices = ['One', 'Two', 'Three'], id = -1, name = 'textureslist', parent = self, pos = (6, 0), size = (382, 150))
        getDivVars() 
```

编辑：它退出的原因与意外使用 App 有关，而不是 PySimpleApp。但是，每次更改选项卡时，列表仍然不会更新（getDivVars() 会更新）。我仍然需要这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:11:19.510

要在笔记本页面更改时调用函数，请将`EVT_NOTEBOOK_PAGE_CHANGED`事件绑定到函数或方法。以“简单 wx.Notebook 示例”为起点，您将添加一行

```
 nb.Bind(wx.EVT_NOTEBOOK_PAGE_CHANGED, self.some_method) 
```

或者，如果您想调用类之外的函数而不是方法，

```
 nb.Bind(wx.EVT_NOTEBOOK_PAGE_CHANGED, some_function) 
```

`some_function`将需要采用单个参数，并且`some_method`除了. 之外还需要采用单个参数`self`。

# javascript - 只需使用鼠标指针交换水平和垂直滚动

> ID：12788861
> 
> 赞同：3
> 
> 时间：2012-10-08T20:19:48.743
> 
> 标签：javascript, html, css

我不确定我在这里寻找什么代码 - 我想可能是 javascript 虽然我想知道它是否可以用 CSS 实现

**情况：** 我有一个 div（具有固定的宽度和高度） - 这个 div 的内容超过了其父级的宽度和高度，因此在垂直和水平上都有一个滚动条。

**影响的行为：** 当我在垂直滚动条上按住鼠标并向上或向下拉时，内容会垂直滚动。当我在水平滚动上按住鼠标并向左或向右移动时，内容会水平滚动。这是我知道的默认和预期行为，我很准确，以便我的问题很清楚。

**问题：** 我想做的是直接交换这些行为，所以：

当我在垂直滚动条上按住鼠标并向上或向下拉时，内容会水平滚动

和

当我在水平滚动条上按住鼠标并向左或向右移动时

我意识到这是一个坏主意的原因很明显，但我需要能够证明这一点并且似乎无法找到任何示例。当我垂直滚动鼠标或类似的东西似乎经常出现时，我不想让页面水平滚动，我只是想交换垂直和水平滚动条的行为。

如有必要，我可以发布代码，但我认为情况很一般，只是一个带有水平和垂直滚动条的 div。

任何帮助将非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T22:51:11.743

这绝对是可能的，起初我认为这要么是不可能的，要么需要大量的工作来解决许多不同的事情，但我在 jsFiidle 中为你做了这个：

[jsFiddle 示例](http://jsfiddle.net/FYwUT/4/)

之所以可行，是因为每次滚动事件发生时，我首先使用我的 2 个变量`cur_left`和`cur_top`.

`new_left`然后我用和设置两个滚动条的新滚动位置`new_top`。

使用这些信息，我使用一个函数来检查哪个滚动条首先被操作，只需检查 if `orig_left != cur_left`。

然后我简单地设置新的滚动位置相对于哪个事件首先出现，我还放置了确切的位置以及哪个事件发生在示例下方。

我希望这是您想要的并且易于理解，如果不是，我会为您完善我的代码！

**笔记**

*   正如 meetamit 所指出的，由于触摸滚动的工作方式，这在很多手持设备中都不起作用——在 iPad 上测试，它会抖动和反弹
*   这个例子是用 jQuery 编码的，以便于使用
*   如果内容的高度与宽度不相等，则此示例将不起作用示例：

    宽度 = 250 像素；高度 = 200 像素；

    当垂直滚动时，这只会在水平滚动条上滚动最多 200px

*   这只在*Frontmotion Firefox中测试过*

**编辑**

我注意到在我的输出框中它总是说 top 而从不说 left，这是因为事件发生得太快了，因为我将 top 设置为 left 之后，它会在你看到它改变之前覆盖目标变量，调试这个我只是`console.log()`在函数中放了一个，你肯定可以看到它出现了

# php - 如何在 jQuery 提交中发送表单值而不将它们放入表单中？

> ID：12788864
> 
> 赞同：0
> 
> 时间：2012-10-08T20:19:54.683
> 
> 标签：php, jquery, ajax, forms

我在一个页面上有多个表单，它们都具有相同的字段：

```
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="p3" value="2">
<input type="hidden" name="t3" value="D"> 
```

只有提交按钮和表单操作是不同的。有没有办法在 JQuery 提交中发送这些数据，这样我就不必为每个表单复制 8 次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:27:09.757

在提交给定表单时将它们附加到表单如何？

```
$("form").on("submit", function(){
   $(this).append('<input type="hidden" name="cmd" value="_s-xclick">')
   $(this).append('<input type="hidden" name="p3" value="2">')
   $(this).append('<input type="hidden" name="t3" value="D">')
}); 
```

[http://api.jquery.com/submit/](http://api.jquery.com/submit/)

[http://api.jquery.com/append/](http://api.jquery.com/append/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:29:09.247

您可以在帖子发生之前添加值

```
<form id="form1" onsubmit="add_values('form1');">
...
</form>
<form id="form1" onsubmit="add_values('form2');">
...
</form>

<script>
    function add_values(formid) {
        var input1 = $("<input>").attr("type", "hidden").attr("name", "cmd").val("_s-xclick");
        var input2 = $("<input>").attr("type", "hidden").attr("name", "p3").val("2");
        var input3 = $("<input>").attr("type", "hidden").attr("name", "t3").val("D");
        $('#'+formid).append($(input1));
        $('#'+formid).append($(input2));
        $('#'+formid).append($(input3));
        $('#'+formid).submit();
    }
</script> 
```

# java - Numbers 上不需要的自动装箱魔法

> ID：12788865
> 
> 赞同：8
> 
> 时间：2012-10-08T20:20:04.500
> 
> 标签：java, autoboxing

以下程序分别打印“false”和“true”：

```
Number n = true ? new Long(1) : new Double(2.0);
System.out.println(n instanceof Long);
System.out.println(n instanceof Double); 
```

所以它不会是 Long 而是 Double。但是，它在普通类上按预期工作：

```
class B {}
class D1 extends B {}
class D2 extends B {} 
```

这将打印“真”：

```
B b = true ? new D1() : new D2();
System.out.println(b instanceof D1); 
```

这意味着它与上面的示例不同。

我确信有一些与自动装箱有关的东西，但这真的是它应该工作的方式吗？当 Number 类是 Long 和 Double 的超类时，为什么她使用拳击，以便表达式可以计算为 Number？

这真的很痛苦，因为在打印 n 时，它会打印为 double 值。（我知道这很容易解决，但让我发疯了）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T20:46:07.357

让我们在这里拿出语言律师的书：[JLS §15.25](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.25)

> 条件表达式的类型确定如下：
> 
> *   如果第二个和第三个操作数的类型相同（可能是 null 类型），那么这就是条件表达式的类型。

Long 和 Double 不是同一类型 - 不适用。

> *   如果第二个和第三个操作数之一是原始类型 T，而另一个的类型是对 T 应用装箱转换（第 5.1.7 节）的结果，则条件表达式的类型是 T。

这两个值都不是原始值 - 不适用。

> *   如果第二个和第三个操作数之一是空类型，另一个是引用类型，那么条件表达式的类型就是那个引用类型。

两个值都不是 null - 不适用。

> *   否则，如果第二个和第三个操作数具有可转换（[第 5.1.8 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.8)）为数字类型的类型，则有几种情况：
>     *   [...字节/短/字符及其盒装等价物的特殊情况...]
>     *   否则，二进制数值提升（第[5.6.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.6.2)节）将应用于操作数类型，条件表达式的类型是第二个和第三个操作数的提升类型。

此规则在这里适用，这意味着条件运算符的结果类型就像两个值都未装箱一样。假设其背后的原因是否则`Number n = bool ? 1 : 2.0`并且`Number n = bool ? new Long(1) : new Double(2.0)`具有不同的值。这种行为也会出乎意料，而且——更糟糕的是——不一致。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T20:50:08.573

它只是查看字节码，您会看到（只需修改您的示例）

```
Number n = true ? new Long(166666) : new Double(24444.0);
System.out.println(Boolean.toString(n instanceof Long));
System.out.println(Boolean.toString(n instanceof Double)); 
```

字节码

_new 'java/lang/Long'

```
dup
ldc 166666
invokespecial 'java/lang/Long.<init>','(J)V'
invokevirtual 'java/lang/Long.longValue','()J'
l2d
invokestatic 'java/lang/Double.valueOf','(D)Ljava/lang/Double;'
astore 1 
```

重点是`l2d`它使下一步

> 从堆栈中弹出一个长整数，将其转换为双精度浮点数，然后将双精度数推回堆栈。请注意，这可能会导致精度损失（double 的有效位是 54 位，而 long 是 64 位），但不会损失幅度（因为 double 的范围大于 long 的范围）。使用 IEEE 754 舍入到最近模式进行舍入。

在这一切都很好之后，你将拥有**Double**实例，但具有**Long Value**！如果您在 Debug 模式下查看，您会看到我们的数字是 Double 但值来自 Long，它在上面的字节码中描述

我们可以在字节码中看到它

```
getstatic 'java/lang/System.out','Ljava/io/PrintStream;'
aload 1
_instanceof 'java/lang/Long'
invokestatic 'java/lang/Boolean.toString','(Z)Ljava/lang/String;'
invokevirtual 'java/io/PrintStream.println','(Ljava/lang/String;)V'
getstatic 'java/lang/System.out','Ljava/io/PrintStream;'
aload 1
_instanceof 'java/lang/Double'
invokestatic 'java/lang/Boolean.toString','(Z)Ljava/lang/String;'
invokevirtual 'java/io/PrintStream.println','(Ljava/lang/String;)V'
return 
```

# php - 在缺少某些元素时爆炸字符串

> ID：12788866
> 
> 赞同：2
> 
> 时间：2012-10-08T20:20:05.473
> 
> 标签：php, regex, arrays

如果有嵌套在某物内，任何人都知道如何处理爆炸以丢失元素？下面的例子。

所以我有一个像这样的数据结构......

```
 {1,2,3,{4,2},5,6} 
```

我正在尝试将其转换为像这样的 php 数组...

```
 array( 1, 2, 3, array( 4, 2 ), 5, 6); 
```

关于如何工作的任何想法？一些建议是正则表达式还是在监控状态机时爆炸？（但我不知道它们是如何工作的：S）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:28:53.037

你可以试试

```
$string  =  "{1,2,{3,2},4,5}" ;
var_dump(__array($string));

$string  =  "[1,2,3,[4,2],5]" ;
var_dump(__array($string));

$string  =  "(1,2,(3,2),4,5)" ;
var_dump(__array($string,array("(",")")));

$string  =  "+1,2,+3,2-,4,5-" ;
var_dump(__array($string,array("+","-")));

function __array($string,$seperator = array("{","}"))
{
    $string  = str_replace($seperator, array("[","]"), $string);
    return json_decode($string);
} 
```

输出

```
array
  0 => int 1
  1 => int 2
  2 => 
    array
      0 => int 3
      1 => int 2
  3 => int 4
  4 => int 5 
```

# delphi - 有条件地为 FMX 或 VCL 编译单元

> ID：12788870
> 
> 赞同：8
> 
> 时间：2012-10-08T20:20:18.893
> 
> 标签：delphi, compiler-construction, delphi-xe2, vcl, firemonkey

我想`uses`根据 FMX 或 VCL 的编译在子句中有不同的单元列表。在下面的代码中，我尝试测试`FireMonkeyVersion`哪个在 FMX 项目中有效（`label1.Text`是“FMX”）。当我将 $IF 语句移到`uses`子句中时，我收到一条错误消息 ( `[dcc32 Error] fmx_text.pas(7): E2026 Constant expression expected`)。有没有办法获得所需的条件编译？

```
unit fmx_text;

interface

uses
  System.SysUtils, System.Types, System.UITypes, System.Rtti, System.Classes,
  System.Variants, FMX.Controls, FMX.Forms, FMX.Dialogs, FMX.Types;
{$IF FireMonkeyVersion >= 16}
   {$DEFINE HAS_FMX}
{$ELSE}
   {$DEFINE HAS_VCL}
{$IFEND}

type

  TForm2 = class(TForm)
    Label1: TLabel;
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form2: TForm2;

implementation

{$R *.fmx}

procedure TForm2.FormCreate(Sender: TObject);
begin
   label1.Text := 'Undefined';
{$IFDEF HAS_FMX}
   label1.Text := 'FMX';
{$ENDIF}
{$IFDEF HAS_VCL}
   label1.Text := 'VCL';
{$ENDIF}
end;

end. 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-08T20:53:23.780

`FireMonkeyVersion`不是编译器定义的值。它是在`FMX.Types`单元中声明的命名常量。尝试使用`{$IF DECLARED(FireMonkeyVersion)}`，例如：

```
{$DEFINE HAS_VCL}
{$IF DECLARED(FireMonkeyVersion) AND (FireMonkeyVersion >= 16)}
  {$UNDEF HAS_VCL}
  {$DEFINE HAS_FMX}
{$IFEND} 
```

但我没有理由检查它的数值。您要么拥有 FireMonkey，要么没有：

```
{$IF DECLARED(FireMonkeyVersion)}
  {$DEFINE HAS_FMX}
{$ELSE}
  {$DEFINE HAS_VCL}
{$IFEND} 
```

话虽如此，请记住，在同一个项目中混合 FireMonkey 和 VCL 是可能的（尽管没有官方支持）。因此，您可能需要重新考虑通过区分框架来尝试完成的任何事情。

# javascript - 替代 Javascript 的 body onload = (string)

> ID：12788876
> 
> 赞同：2
> 
> 时间：2012-10-08T20:20:38.573
> 
> 标签：javascript, html, dom-events, onload

我（有点）是 JavaScript 新手，我正在编写一个需要

```
<body onload="mktClock_standard(); setInterval('mktClock_standard()', 1000 ); mktClock_military(); setInterval('mktClock_standard()', 1000 )"> 
```

我想知道是否有办法做到这一点，但是在 JavaScript 中，比如 using 之类的`window.onload`。我简单地尝试了：

```
window.onload = mktClock_standard(); setInterval('mktClock_standard()', 1000 ); mktClock_military(); setInterval('mktClock_standard()', 1000 ) 
```

但**显然**有很多错误的语法错误和东西，所以......我去了谷歌，但我找不到任何与我的问题有关的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T20:21:58.220

`window.onload`与属性完全相同`onload`，但它需要一个函数：

```
window.onload = function() {
    mktClock_standard(); 
    setInterval('mktClock_standard()', 1000 ); 
    mktClock_military(); 
    setInterval('mktClock_standard()', 1000 )
} 
```

实际上，当您将代码添加到 等属性时`<body onload="code...">`，浏览器会将它们视为有一个包装匿名函数。

此外，现代浏览器支持`DOMContentLoaded`类似的事件，但更早触发。它会在 DOM 加载后立即触发，同时`window.onload`等待其他资源（例如图像）被加载。要绑定到`DOMContentLoaded`，请使用`addEventListener`：

```
document.addEventListener('DOMContentLoaded', function(evt) {
    // event handler code here
}); 
```

（以上不适用于 IE8 及更早版本）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T20:22:15.577

您想使用函数声明：

```
window.onload = function() {
    mktClock_standard();
    setInterval('mktClock_standard()', 1000 ); 
    mktClock_military(); 
    setInterval('mktClock_standard()', 1000 )
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T20:22:20.637

有几种方法可以附加您的活动。所有这些都需要有一个包含您的语句的函数。

使用[`window.onload`](https://developer.mozilla.org/en-US/docs/DOM/window.onload)事件处理程序：

```
window.onload = function() {
  mktClock_standard(); 
  setInterval('mktClock_standard()', 1000 ); 
  mktClock_military(); 
  setInterval('mktClock_standard()', 1000 );
}; 
```

或使用[`addEventListener()`](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)

```
window.addEventListener( 'DOMContentLoaded', function() {
  mktClock_standard(); 
  setInterval('mktClock_standard()', 1000 ); 
  mktClock_military(); 
  setInterval('mktClock_standard()', 1000 );
} ); 
```

# iphone - 视图下的 UIButton 不接收事件

> ID：12788882
> 
> 赞同：-1
> 
> 时间：2012-10-08T20:21:24.787
> 
> 标签：iphone, objective-c, ios

三个嵌套视图下的 UIButton 不接收事件，但如果我把它放在上面的一个视图中，它会接收事件。这第三个视图不以任何方式接收事件，所以我不明白什么元素正在捕获事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:24:40.670

关闭`.userInteractionEnabled`按钮上方的视图。

# css - Twitter Bootstrap Modal 受 opacity CSS 规则的影响

> ID：12788883
> 
> 赞同：0
> 
> 时间：2012-10-08T20:21:25.320
> 
> 标签：css, twitter-bootstrap, modal-dialog

如果在模态的 html 所在的主体上设置了“不透明度”（小于 1），则 Twitter 引导模态在模态顶部设置背景时遇到问题。

html布局：

```
<div id="content-area">
  ...some html

  <div id="someModelId">
     <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3>Some Title</h3>
    </div>
    <div class="modal-body">
      <div>
         ...some content
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    </div>
  </div>
</div> 
```

CSS

```
.content-area {
 opacity:0.9;
} 
```

因此，结果是当 Modal 被调用时：

$("#someModelId").modal();

模态指定的背景位于模态前面，单击模态就像您在模态上下文之外单击并导致它关闭一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T18:59:28.293

事实证明，这需要将受影响的对话框 html 移动到通过 css 应用不透明度规则的区域之外。

# perl - 不确定我是否正确使用 Perl 的 Try::Tiny

> ID：12788884
> 
> 赞同：2
> 
> 时间：2012-10-08T20:21:29.993
> 
> 标签：perl, scope, try-catch, eval

我是使用对象的新手，不明白为什么[Try::Tiny](http://search.cpan.org/~doy/Try-Tiny-0.11/lib/Try/Tiny.pm)不会`catch`出现我的`try`陈述中的错误。这是我正在尝试做的一个示例：

```
use strict;  
use warnings;
use Net::FTP;
use Try::Tiny;

my $TIMEOUT = 5;
my $HOST = 'replace_with_hostname';
my $USER = 'replace_with_username';
my $PASS = 'replace_with_password';
my @ERRORS;
my $ftp = undef;

sub my_sub {
  my $err = shift;
  push(@ERRORS,$err);
  goto END;
}

try {
  local $SIG{ALRM} = sub { die "new\n" };
  alarm $TIMEOUT;
  $ftp = Net::FTP->new($HOST, Passive=>1, DEBUG=>3, Timeout=>2);
  alarm 0;
}
catch {
  die $_ if $_ ne "new\n"; 
  my_sub("FTP: cannot connect to [$HOST]");
};

try {
  local $SIG{ALRM} = sub { die "login\n" };
  alarm $TIMEOUT;
  $ftp->login($USER,$PASS);
  alarm 0;
}
catch {
  die $_ if $_ ne "login\n"; 
  my_sub("FTP: cannot cannot log in");
};

END: {
  if (@ERRORS) {
    print "$ERRORS[0]\n";
    exit -1;
  }
  print "Success\n";
  exit 0;
} 
```

我正在使用该`goto`功能，因为我最终将获得用于 WebDAV 和 CMIS 测试的块，并且希望在我点击之前捕获所有错误`END`。`try-catch`我可以通过像这样更改块来使前面做我想做的事情：

```
try {
  local $SIG{ALRM} = sub { die "new\n" };
  alarm $TIMEOUT;
  $ftp = Net::FTP->new($HOST, Passive=>1, DEBUG=>3, Timeout=>2) 
    or my_sub("FTP: cannot connect to [$HOST]");
  alarm 0;
}
catch {
  die $_ if $_ ne "new\n"; 
}; 
```

但是，在这两种情况下，我都觉得我没有很好地使用[Try::Tiny](http://search.cpan.org/~doy/Try-Tiny-0.11/lib/Try/Tiny.pm)。

当然，我真正想做的是将`try-catch`块放入一个函数中，就像[sid_com 所做](https://stackoverflow.com/questions/2871619/why-doesnt-perls-trytinys-try-catch-give-me-the-same-results-as-eval)的那样。这对我不起作用：

```
sub try_f {
  my $cmd = shift;
  my $msg = shift;
  try {
    local $SIG{ALRM} = sub { die "timeout '$cmd'\n" };
    alarm $TIMEOUT;
    \$cmd or my_sub($msg);
    alarm 0;
  }
  catch {
    die $_ if $_ ne "timeout '$cmd'\n"; 
  };
} # sub

try_f("$ftp = Net::FTP->new(Host=>$HOST, Passive=>1)", "FTP: cannot connect to [$HOST]");

try_f("$ftp->login($USER,$PASS)", "FTP: cannot cannot log in"); 
```

错误说`$ftp`是一个未初始化的值，但我不知道如何解决这个问题。

编辑：这是我收到的两个答案的工作综合。谢谢，Max 和 LeoNerd！

```
use strict;  
use warnings;
use Net::FTP;
use Try::Tiny;

my $HOST = 'replace_with_hostname';
my $USER = 'replace_with_username';
my $PASS = 'replace_with_password';
my @ERRORS;
my $ftp = undef;

sub try_f {
  my $timeout = shift;
  my $command = shift;
  my $message = shift;
  my $label   = shift;
  try {
    local $SIG{ALRM} = sub { die "timeout\n" };
    alarm $timeout;
    $command->() or die "module\n";
    alarm 0;
  }
  catch {
    if ( $_ eq "module\n" || $_ eq "timeout\n" ) {
      push(@ERRORS,"$message: $_");
      goto $label;
    }
    die $_;
  };
}

FTP_BLOCK: {
  try_f(4, sub { $ftp = Net::FTP->new($HOST, Passive=>1, Debug=>3) }, "FTP: cannot connect to [$HOST]", 'END');
  try_f(2, sub { $ftp->login($USER,$PASS) }, "FTP: cannot log in", 'END');
}

END: {
  if (@ERRORS) {
    foreach my $e (@ERRORS) { print "$e"; }
    exit -1;
  }
  print "Success\n";
  exit 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T22:14:46.347

[`Net::FTP->new`](http://search.cpan.org/~gbarr/libnet-1.22/Net/FTP.pm#CONSTRUCTOR)不会`die`出错。相反，它只是返回`undef`. 因此，`Try::Tiny`无法确定出了什么问题，并且该`catch`块没有被执行。

而不是`my_sub`，使用

```
$ftp = Net::FTP->new($HOST, Passive=>1, DEBUG=>3, Timeout=>2) or die $@; 
```

Try::Tiny 文档说**在****block**`$@`中不会出现错误，但表示如果返回，它将在此处放置错误消息。这就是为什么您可以**在****块**中使用该消息的原因（如果需要，您也可以在这种情况下使用自己的消息）。**`catch`**`Net::FTP->new``undef``die`**`try`**

同样，在 error 上`login` [返回*false*值](http://search.cpan.org/~gbarr/libnet-1.22/Net/FTP.pm#METHODS)，因此您需要添加一个 " `or die`" 语句（不幸的是，`login`似乎不会在 error 上给出错误消息）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T10:30:25.240

您正在尝试在字符串中传递代码：

```
try_f("$ftp = Net::FTP->new(Host=>$HOST, Passive=>1)", "FTP: cannot connect to [$HOST]");

\$cmd or my_sub($msg); 
```

那是行不通的。

我可以建议改为使用`sub { }`创建匿名代码引用吗？

```
try_f( sub { $ftp = ..... } ); 
```

然后稍后

```
$cmd->() or my_sub($msg); 
```

# php - PHP / 文本文件保存 / FTP - 发送电子邮件错误（用一些 3dsMax 来玩）

> ID：12788888
> 
> 赞同：1
> 
> 时间：2012-10-08T20:21:40.013
> 
> 标签：php, email, ftp, phpmailer, 3dsmax

我目前正面临一个困扰我一天的时髦错误，感谢任何帮助或见解。

设置：

1.  使用 PHP 在 Linux 服务器上生成 .txt 文件
2.  通过电子邮件将 .txt 文件发送到电子邮件帐户
3.  Outlook 将电子邮件保存在文件夹中
4.  3dsmax 有一个脚本正在运行并读取 .txt 文件以进行操作。

问题：突然 3dsmax 吐出一个错误“编译错误：错误的数字或时间语法”并中断。它曾经工作得很好。

奇怪的部分：如果我在写字板中打开 .txt 文件，将其另存为新的 .txt 文件，脚本可以正常工作。或者，如果我通过 ftp 从服务器将 .txt 文件下载到本地计算机，则脚本可以正常工作。假设我在服务器上将 .txt 文件重命名为 .zip，下载它并将其重命名为 .txt ...脚本中断。

什么可能导致这种情况发生？3dsmax的问题​​？.txt 文件的保存方式？发送？为什么文件的 FTP 与电子邮件或直接下载不同？

txt文件生成如下：

```
$fh          = fopen($myFile, 'w') or die("can't open file");
$nl          = "\n";
$stringData  = 'blah blah 3d stuff'.$nl;
$stringData .= 'blah blah 3d stuff'.$nl;
fwrite($fh, $stringData);
fclose($fh); 
```

并使用 PHPMailer 类发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:17:55.967

强制二进制和/或 Windows 中断修复了我认为的错误。

fopen($myFile, 'w') 到 fopen($myFile, 'wb') 和 $nl = "\n"; 到 $nl = "\r\n";

# linux - Linux 解压具有权限的文件

> ID：12788895
> 
> 赞同：0
> 
> 时间：2012-10-08T20:22:17.177
> 
> 标签：linux, unix, tar

我收到一个错误 - “未知文件类型'A'，提取为普通文件”，同时取消一组具有 acl 权限集的文件。

我已经在 solaris 中将 tar 文件创建为 tar -cpfv Tarfilename.tar 目录，如果我将其解压缩为 tar xvpf Tarfilename.tar，它在 solaris 中效果很好 我已将 tar 文件复制到 Linux 并尝试使用 tar xvpf 解压缩，它引发警告未知文件类型“A”，提取为普通文件并创建没有 ACL 权限的文件。

tar --version : Linux 中的 tar (GNU tar) 1.15.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T14:30:33.887

scp getfacl | setfacl 是唯一对我有用的解决方案。[尚未尝试 rsync]

# iframe - 为什么浏览器允许在 iframe 的父（跨）域上设置 cookie？

> ID：12788896
> 
> 赞同：16
> 
> 时间：2012-10-08T20:22:16.880
> 
> 标签：iframe, cookies, browser, privacy, user-tracking

为什么具有指向另一个域 (b.com) 的 iframe 的站点 (a.com) 可以通过其他域文档查看和更改其 cookie？

刚刚在一个广告中看到了这种情况，然后去做了一个概念验证，它起作用了……这就是我所做的：首先，将 a.com 和 b.com 指向我的测试机 IP。

然后我有：[http](http://a.com/a.html) ://a.com/a.html （这将是我看到广告的网站）

`<html><body><script src="http://b.com/b.js"></script>`

[http://b.com/b.js](http://b.com/b.js)（这将是内嵌在网站中的广告脚本，指向广告商公司域）

`document.write('<iframe src="http://b.com/b.html"></iframe>');`

在[http://b.com/b.html](http://b.com/b.html)：

`<html><body><script>document.cookie = "test=1;domain=.a.com;path=/;expires=Tue, 30 Oct 2012 02:47:11 UTC";</script></body></html>`

在我运行之后，在 Firefox 14 库存中，我在 a.com 中有一个 cookie。

什么支配它？这种行为在哪里定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-30T07:30:19.823

在我看来，这是由于[CORS 机制](https://en.wikipedia.org/wiki/Cross-origin_resource_sharing)的结合以及大多数浏览器默认允许第三方 cookie 的事实。

* * *

[您将在开发者 Mozilla Cookies 网页上](https://developer.mozilla.org/en-US/docs/Web/HTTP/Cookies)找到有用的信息：

> 虽然第一方 cookie 仅发送到设置它们的服务器，但网页可能包含存储在其他域中的服务器上的图像或其他组件（如**广告横幅**）。通过这些第三方组件发送的 Cookie 称为**第三方 Cookie**，主要**用于**网络上的广告和跟踪。
> 
> [...] 大多数浏览器**默认允许第三方 cookie**

为避免此默认设置，您可能会担心以下`SameSite`cookie：

> 让服务器要求 cookie**不应与跨站点**请求一起发送

但

> SameSite cookie**仍处于试验**阶段，**尚未得到所有浏览器的支持**。

* * *

还可以查看[CORS（跨域资源共享）文档](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS)，您可以在其中阅读：

> CORS 机制支持浏览器和 Web 服务器之间的安全跨域请求和数据传输。[...]
> 
> 此跨域共享标准用于**启用跨站点 HTTP 请求**：
> 
> [...]
> 
> *   **脚本**（用于非静音异常）。

* * *

您还可以在[开发者 Mozilla Security Same-Origin 网页](https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy)中注意到`<frame>`并且`<iframe>`是可能嵌入跨域的资源

* * *

[如果您担心并且不会在Firefox](https://www.mozilla.org/en-US/firefox/)上接受任何第三方 cookie ，您仍然可以安装[Privacy Badger](https://addons.mozilla.org/en-US/firefox/addon/privacy-badger-firefox/)插件（由[EFF](https://www.eff.org/)制作），但此解决方案需要在用户浏览器上访问。

# python - `return (value == 'ok') 的 Pythonic 方式？“好”：“好”`

> ID：12788899
> 
> 赞同：31
> 
> 时间：2012-10-08T20:22:28.517
> 
> 标签：python, python-2.7

> **可能重复：**
> [Python 中的三元条件运算符](https://stackoverflow.com/questions/394809/ternary-conditional-operator-in-python)

我有这个问题，不知道问谷歌这个：

`(value == 'ok') ? 'ok' : 'not ok'`

我的意思是语法：

```
(expression) ? (return if <expresion> is true) : (return this value if <expresion> is false 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-08T20:23:35.827

十分简单：

```
'String ok' if value == 'ok' else 'String nok' 
```

这是一个[条件表达式](http://docs.python.org/reference/expressions.html#conditional-expressions)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-08T20:36:31.990

这个案例怎么样：

```
{True: 'String ok', False: 'String nok'}[value == 'ok'] 
```

*不要当真:)

# c# - 如何通过C#确定SQL Server数据库用户的有效权限？

> ID：12788904
> 
> 赞同：9
> 
> 时间：2012-10-08T20:22:43.210
> 
> 标签：c#, sql-server, sql-server-2008, sql-server-2008-r2, ssms

当我说有效权限时，我指的是当您进入 SQL Server Management Studio 中的数据库属性时列出的权限，单击“权限”，然后单击“有效”选项卡。

到目前为止，我已经能够使用以下代码确定显式权限：

```
using Microsoft.SqlServer.Management.Smo;
...
DatabasePermissionInfo[] permissions = database.EnumDatabasePermissions("username"); 
```

但是，我仍然需要获得有效的权限。`db_datareader`在这种情况下，我为用户添加了一个登录名，并`db_datawriter`通过用户映射为其 赋予了数据库的角色。

在数据库的权限中，列出的有效权限是`CONNECT, DELETE, INSERT, SELECT,`and `UPDATE`，但显式权限仅列出 connect （这是上面代码唯一拉回的东西）。那么有没有办法以编程方式检索有效权限呢？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T20:37:17.083

我相信您可以致电[`sys.fn_my_permissions`](http://msdn.microsoft.com/en-us/library/ms176097.aspx)：

```
execute as user = 'SomeUserName' -- Set this to the user name you wish to check
select * from fn_my_permissions(null, 'DATABASE') -- Leave these arguments, don't change to MyDatabaseName
order by subentity_name, permission_name
revert 
```

这给了我与您提到的 SSMS 选项相同的结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T20:34:35.377

看起来`sys.database_principals`并`sys.database_permissions`在其中有一些很好的信息。该线程：[SQL Server query to find all permissions/access for all users in a database](https://stackoverflow.com/questions/7048839/sql-server-query-to-find-all-permissions-access-for-all-users-in-a-database)进一步讨论了它。

注意：我假设对数据库的 C# 调用是可接受的解决方案。

# printing - 从 CMD.EXE 打印到文件

> ID：12788907
> 
> 赞同：0
> 
> 时间：2012-10-08T20:23:00.080
> 
> 标签：printing, dos, foxpro

我有一个旧的 FoxPro 程序，它可以通过 LPT1 端口向我的网络打印机发送报告，但我想将报告打印到文件中以记录某些内容。有没有办法捕获 LPT1 端口并将其文档发送到文件？我尝试过无纸打印机、Adobe PDF 和 Microsoft XPS Document Writer，但没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:52:02.240

不确定您使用的是哪个版本，但您可以尝试 SET PRINTER 命令：

> 将打印机设置为 output.txt

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:45:08.213

DOSBox Megabuild 支持从 DOS 应用程序打印

[连锁](http://home.arcor.de/h-a-l-9000/)

查看 dosbox.conf 以设置您的配置选项。有关打印选项，请查看此文件的 [parallel] 和 [printer] 部分。

例如，我设置一个客户端从他的 DOS 应用程序打印到网络上其他地方的打印机。工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T07:59:01.987

假设您使用的是 Windows 2000、XP、Vista、7 或 8，您可以：

在 PC 上安装通用/纯文本打印机，设置打印到文件：共享它。将 LPT1 重定向到共享。即在提示下：

净使用 lpt1 \mymachine\mysharedprinter /是

这*有时*有效。

如果不是，我会研究 DosBox，它是一个免费的 MS-DOS 模拟器，主要为旧游戏设计。[这个链接](http://www.printfil.com/efaq32.htm)可能会让你开始。

# iphone - 在通用应用程序中呈现视图控制器，iOS 4 到 6

> ID：12788912
> 
> 赞同：2
> 
> 时间：2012-10-08T20:23:18.230
> 
> 标签：iphone, objective-c, uiviewcontroller, modalviewcontroller

当想要在通用应用程序中支持 iOS 4 及更高版本（适用于 iPhone 3G）时，是否有更短的方法来呈现视图控制器？

目前我在下面有这个，但我不喜欢如何需要一个UIPopoverController属性，其中我需要特别是因为如果观看控制器被挑选图像，则需要解雇POLPOVER时。

```
@interface SASuccessViewController ()
@property (nonatomic, retain) UIPopoverController *myPopoverController;
@end

@implementation SASuccessViewController
-(void)showViewController:(UIBarButtonItem *)sender {
    UIViewController *viewController = [[UIViewController alloc] init];
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
        if ([self respondsToSelector:@selector(presentViewController:animated:completion:)]) {
            [self presentViewController:viewController animated:NO completion:nil];//iOS 5 and above
        } else {
            [self presentModalViewController:viewController animated:NO]; //iOS 4, deprecated in iOS 6
        }
    } else {
        if (!self.myPopoverController) {
            self.myPopoverController = [[[UIPopoverController alloc] initWithContentViewController:viewController] autorelease];
        } else {
            [self.myPopoverController setContentViewController:viewController];
        }
        [self.myPopoverController presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
    }
    [viewController release];
}
-(void)dealloc {
    [_popoverController release];
    [super dealloc];
}
@end 
```

考虑到当 iOS 4 是最新的（而不是通用应用程序）时，该方法将是：

```
-(void)showViewController:(UIBarButtonItem *)sender {
    UIViewController *viewController = [[UIViewController alloc] init];
    [self presentModalViewController:viewController animated:NO];
    [viewController release];
} 
```

我现在看起来很臃肿。有没有更好的方法在通用应用程序上显示视图控制器（更不用说支持 iOS 4）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T00:47:32.587

您可以在 UIViewController 上编写一个类别来执行此操作：

```
@implementation UIViewController (PresentViewController)

- (void)presentViewController:(UIViewController *)viewControllerToPresent animated:(BOOL)flag completion:(void (^)(void))completion;

@end

@interface UIViewController (PresentViewController)

- (void)presentViewController:(UIViewController *)viewControllerToPresent animated:(BOOL)flag completion:(void (^)(void))completion {
    if([super respondsToSelector:@selector(presentViewController:animated:completion:)]){
        [super presentViewController:viewControllerToPresent animated:flag completion:completion];
    } else {
        [super presentModalViewController:viewControllerToPresent animated:flag];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T15:09:16.180

不幸的是，没有更好的方法在通用应用程序中呈现模态视图。你所拥有的逻辑都是非常必要的。不过，这里有一些提示：

1.  `presentViewController:animated:`考虑到您没有指定完成块，在您删除对 iOS 4.0 的支持之前，坚持使用已弃用的方法可能是可以的。换句话说，你可以这样做：

    ```
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
        [self presentModalViewController:viewController animated:NO];        
    } 
    ```

2.  或者，正如其他人所说，您可以为 presentModalViewController 方法创建一个 UIViewController 类别。至少这会清理你的 UIViewController 一点。

3.  如果您的 SASuccessViewController 直接从 UIViewController 继承，您可以考虑为 SASuccessViewController 创建另一个 UIViewController 来继承。例如，MasterViewController 可以是您的任何视图控制器都可以继承的视图控制器。这里的想法是通过将代码移动到超类来清理视图控制器，同时消除在不同视图控制器中呈现模态控制器时的代码重复。

    ```
    @interface MasterViewController ()
    @property (nonatomic, retain) UIPopoverController *popoverController;
    - (void)presentViewController:(UIViewController *)viewController origin:(id)origin;
    @end

    @implementation MasterViewController
    @synthesize popoverController;

    - (void)presentViewController:(UIViewController *)viewController origin:(id)origin {
        if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
            if ([self respondsToSelector:@selector(presentViewController:animated:completion:)]) {
                [self presentViewController:viewController animated:NO completion:nil];//iOS 5 and above
            } else {
                [self presentModalViewController:viewController animated:NO]; //iOS 4, deprecated in iOS 6
            }
        } else {
            if (!self.popoverController) {
                self.popoverController = [[[UIPopoverController alloc] initWithContentViewController:viewController] autorelease];
            } else {
                [self.popoverController setContentViewController:viewController];
            }

            if(![self.popoverController isPopoverVisible]) {
                if([origin isKindOfClass:[UIBarButtonItem class]]) {
                    [self.popoverController presentPopoverFromBarButtonItem:origin
                                                   permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
                } else {
                    [self.popoverController presentPopoverFromRect:CGRectZero inView:origin permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
                }
            }
        }
    }

    @end 
    ```

然后你可以从你的`SASuccessViewController`：

```
-(void)showViewController:(UIBarButtonItem *)sender {
    [self presentViewController:x origin:sender];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T04:41:12.623

您可以创建您的实例`UIViewController`并将模态演示样式设置`UIModalPresentationStyle`为 formsheet 或 currentContext 如果您希望它在弹出窗口中并使用动画`transitionStyle`然后最终呈现它。我希望这能解决你的问题。

```
 UIViewController *viewController = [[UIViewController alloc] init];
        [viewController setModalPresentationStyle:UIModalPresentationFormSheet];
        [viewController setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];            
        [self presentViewController:viewController animated:YES completion:nil]; 
```

所以如果它不适用于 ios4 我们可以直接使用 presentasmodalview 控制器

# javascript - 字母数字正则表达式

> ID：12788917
> 
> 赞同：-3
> 
> 时间：2012-10-08T20:23:27.940
> 
> 标签：javascript, regex

一些在正则表达式上混淆以验证以下格式的字母数字字段：

XX77777（最大字符数必须为 7）

前两个字符必须是字母 (AZ)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T20:25:05.707

试试这个正则表达式：

```
[A-Z]{2}\d{0,5} 
```

我想知道你的困惑可能来自哪里。这是一个非常基础的，你应该通过一个正则表达式参考（比如[这个](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)），这将花费你 10 分钟。

# asp.net - EF 数据库作为 DLL 提供具有相同密钥的项目已经存在

> ID：12788928
> 
> 赞同：-3
> 
> 时间：2012-10-08T20:23:55.483
> 
> 标签：asp.net, c#-4.0, entity-framework-4

我在将 edmx 文件用作 dll 以在其他项目中使用它时遇到问题。

问题是数据库模型在 App_Code 文件中使用时效果很好，但在部署为 DLL 时效果不佳！

任何想法是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:21:45.400

经过多次测试后，我使用以下方法修复它：

*   重新创建数据库模型。
*   添加关联。
*   添加约束。
*   从模型生成数据库。

# asp.net - 如何使用按钮重新绑定 jqgrid

> ID：12788931
> 
> 赞同：0
> 
> 时间：2012-10-08T20:23:58.657
> 
> 标签：asp.net, jquery, jqgrid

我想重新绑定我的 jqgrid。这是我绑定网格的脚本代码：

```
 $(document).ready(function () {

        var categoryId = $('#<%=hdnCategoryId.ClientID %>').val();

        var productName = $('#tags').val();

        jQuery("#tblList").jqGrid({
            url: 'ArenaProductList.aspx/GroupProductList',
            mtype: 'POST',
            datatype: 'json',
            postData: {
                sidx: '',
                sord: '',
                page: '',
                rows: '',
                categoryId: categoryId,
                productName: productName
            },
            ajaxGridOptions: { contentType: "application/json" },
            serializeGridData: function (postData) {
                var propertyName, propertyValue, dataToSend = {};
                for (propertyName in postData) {
                    if (postData.hasOwnProperty(propertyName)) {
                        propertyValue = postData[propertyName];
                        if ($.isFunction(propertyValue)) {
                            dataToSend[propertyName] = propertyValue();
                        } else {
                            dataToSend[propertyName] = propertyValue;
                        }
                    }
                }
                return JSON.stringify(dataToSend);
            },
            jsonReader: {
                root: "d.rows",
                page: "d.page",
                total: "d.total",
                records: "d.records"
            },
            colNames: ['ArenaProductId', 'Açıklama', 'Ana Kategori', 'Alt Kategori', 'Marka', 'KDV', 'Stok', 'Bayi Fiyatı', 'Son Kullanıcı Fiyatı', 'Para Birimi', 'Yüzde'],
            colModel: [
                { name: 'ArenaProductId', index: 'ArenaProductId', hidden: true },
                { name: 'Description1', index: 'Description1', width: 150 },
                { name: 'MainGroupCode', index: 'MainGroupCode', width: 150 },
                { name: 'SubGroupCode', index: 'SubGroupCode', hidden: true },
                { name: 'Brand', index: 'Brand', width: 220 },
                { name: 'Kdv', index: 'Kdv', width: 120 },
                { name: 'Stock', index: 'Stock', width: 100 },
                { name: 'DealerPrice', index: 'DealerPrice', width: 100 },
                { name: 'Price', index: 'Price', width: 100 },
                { name: 'Currency', index: 'Currency', width: 100 },
                { name: 'Rate', index: 'Rate', width: 100 }
            ],
            pager: '#tblPager',
            rowList: [10, 20, 30],
            sortname: 'UserId',
            sortorder: 'desc',
            rowNum: 10,
            loadtext: "Yukleniyor....",
            shrinkToFit: false,
            multiselect: false,
            emptyrecords: "Kayit Bulunamadi",
            autowidth: true,
            shrinkToFit: true,
            height: "400",
            width: "740",
            rownumbers: true,
            //subGrid: true,
            caption: 'Arena Ürünler'
        });
        jQuery("#tblList").jqGrid('navGrid', '#prod_pager',
            { edit: false, add: false, del: false, excel: false, search: false });

        $('#ddlSubCategory').change(function () {
            $('#tags').val('');
            $('#<%=hdnCategoryId.ClientID %>').val($('#<%=ddlSubCategory.ClientID %>').val());
            jQuery("#tblList").trigger('reloadGrid');
        });

        $('#ddlMainCategory').change(function () {
            $('#tags').val('');
            $('#<%=hdnCategoryId.ClientID %>').val($('#<%=ddlMainCategory.ClientID %>').val());
            jQuery("#tblList").trigger('reloadGrid');
        });

    }); 
```

我有一个提交按钮。单击按钮后，我想用不同的 productName 值重新加载网格。你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:03:32.880

如果您不想将`sidx`,`sord`和发送`page`到`rows`您应该使用的服务器

```
prmNames: { page: null, rows: null, sort: null, order: null } 
```

jqGrid的参数而不是用法

```
postData: { sidx: '', sord: '', page: '', rows: '' } 
```

要始终发送`categoryId`和`productName`参数作为*实际*值，`$('#<%=hdnCategoryId.ClientID %>')`您`$('#tags').val()`可以定义as*方法*`categoryId`的属性和`productName`属性：`postData`

 *```
postData: {
    categoryId: function() { return $('#<%=hdnCategoryId.ClientID %>').val(); },
    productName: function() { return $('#tags').val(); }
} 
```

有关详细信息，请参阅[答案](https://stackoverflow.com/a/2928819/315935)。您已经使用了我在[答案](https://stackoverflow.com/a/5811359/315935)`serializeGridData`中建议的代码。所以数据的序列化会正常工作。*

# android - 无法让库 jar 与 Android 和 Proguard 一起使用

> ID：12788932
> 
> 赞同：4
> 
> 时间：2012-10-08T20:24:07.703
> 
> 标签：android, proguard, flurry

我在 Eclipse 中有一个 Android 库项目 (A) 和 Android 应用程序 (B)。对于这个设置，我使用 Proguard，到目前为止没有问题。现在我想将 Flurry 库 (.jar) 添加到我的库项目中，它在模拟器上的调试模式下工作正常。

但是，当我想使用 Proguard 导出应用程序的最终和签名 apk 时，我收到许多“找不到引用的类 ...”警告，并且无法创建 apk。

其中一些类是：

```
org.joda.time.LocalDateTime  
org.joda.time.format.DateTimeFormatter
org.xerial.snappy.Snappy
com.jumptap.adtag.JtAdView
... 
```

好的，所以我在 proguard.cfg 文件中添加了以下内容：

```
...
-dontskipnonpubliclibraryclassmembers
-libraryjars ../libproj/libs/FlurryAgent.jar
...
-keep public class com.flurry.android.FlurryAgent { *; }
-keep class com.flurry.** { *; }
-keep class org.codehaus.jackson.** { *; }
-keep class org.apache.avro.** { *; }
-keep interface com.flurry.** { *; }
-keep public class org.joda.time.** { public protected *; }
... 
```

但是，我仍然收到 sam 错误 :(
有什么我在这里缺少的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-05T20:13:05.373

显然，flurry jar 可以选择引用其他一些库（joda-time，snappy，...）。

为缺少的引用添加`-keep`选项根本没有帮助，因为它只会保留指定的类，但它们却丢失了。相反，您应该添加适当`-dontwarn`的指令：

```
-dontwarn com.flurry.** 
```

应该忽略任何来自 Flurry 类的警告。

# random - 世界一代噪音概念

> ID：12788936
> 
> 赞同：0
> 
> 时间：2012-10-08T20:24:33.350
> 
> 标签：random, noise, noise-generator

所以，我一直在做我的游戏，但我遇到了一些死胡同。我不明白世界生成中噪声的概念。

很久以前，我尝试通过对 500x500 图像进行编码并告诉程序“如果 * 这种像素接近，你有 % 的机会复制它”来制作自己的“地图生成器”。

然而，结果非常丑陋，所以我正在努力为我的世界一代寻找更好的替代品。

现在我希望我的世界生成只支持 2D，只有 3 个瓷砖的平面景观。然而，无论我使用什么“噪音”生成器，我都希望能够添加超过 12 个不同的生物群落、80 个图块等，并且拥有更多 3D 的地图，因为它也会有山丘等（尽管它用于 2D 游戏）。

所以，我几乎试图理解地图的“受控”噪声生成的概念，以便我可以创建自己的生成器。

我研究了许多 Perlin 噪声生成器的来源，但我不能完全理解程序似乎在做的所有复杂数学背后发生了什么。

所以，我的问题是，受控噪声生成背后的想法是什么？大多数程序实际上在做什么，我应该尝试复制并变形为我自己的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-09T03:46:32.763

受控 - 意味着：1/每次加载可重复，每个代码运行 2/风格化，形状噪声

有噪音质量：其中缺乏可见的人工图案，如正方形和重复

深度：噪声有多复杂，有多少噪声相互叠加

和噪音速度：处理器的速度有多快

perlin 使之字形摆动就像不规则的波浪一样。它从不规则点开始，然后使用三次插值将它们连接成曲线而不是直线。为了使其成为 2d，它沿 x 和 y 取不规则点，并以高级方式将它们混合。最好学习 3d 图形来解决这个问题，例如 Milkdrop 程序，您可以在其中将 sin(x) 和 sin(y) 相乘或相加，然后查看它的形状。不是罪恶，而是噪音是不规则的。

# asp.net-mvc - 没有mvc可以进行模型绑定吗？

> ID：12788948
> 
> 赞同：1
> 
> 时间：2012-10-08T20:25:09.653
> 
> 标签：asp.net-mvc, model-binding

假设我有一个`Dictionary<string, string>`并且我想用字典中的值更新一个对象，就像 MVC 中的模型绑定......如果没有 MVC，你将如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T06:51:50.063

您可以使用 DefaultModelBinder 来实现此目的，但您需要将 System.Web.Mvc 程序集引用到您的项目中。这是一个例子：

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Globalization;
using System.Linq;
using System.Web.Mvc;

public class MyViewModel
{
    [Required]
    public string Foo { get; set; }

    public Bar Bar { get; set; }
}

public class Bar
{
    public int Id { get; set; }
}

public class Program
{
    static void Main()
    {
        var dic = new Dictionary<string, object>
        {
            { "foo", "" }, // explicitly left empty to show a model error
            { "bar.id", "123" },
        };

        var modelState = new ModelStateDictionary();
        var model = new MyViewModel();
        if (!TryUpdateModel(model, dic, modelState))
        {
            var errors = modelState
                .Where(x => x.Value.Errors.Count > 0)
                .SelectMany(x => x.Value.Errors)
                .Select(x => x.ErrorMessage);
            Console.WriteLine(string.Join(Environment.NewLine, errors));
        }
        else
        {
            Console.WriteLine("the model was successfully bound");
            // you could use the model instance here, all the properties
            // will be bound from the dictionary
        }
    }

    public static bool TryUpdateModel<TModel>(TModel model, IDictionary<string, object> values, ModelStateDictionary modelState) where TModel : class
    {
        var binder = new DefaultModelBinder();
        var vp = new DictionaryValueProvider<object>(values, CultureInfo.CurrentCulture);
        var bindingContext = new ModelBindingContext
        {
            ModelMetadata = ModelMetadataProviders.Current.GetMetadataForType(() => model, typeof(TModel)),
            ModelState = modelState,
            PropertyFilter = propertyName => true,
            ValueProvider = vp
        };
        var ctx = new ControllerContext();
        binder.BindModel(ctx, bindingContext);
        return modelState.IsValid;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T20:32:41.023

你可以这样做，但显然你仍然需要引用 System.Web.Mvc。这或多或少是构造一个 ModelBinder 的问题，也许是`DefaultModelBinder`，然后使用适当的参数调用它 - 但不幸的是，这些参数与 Web 场景密切相关。

根据您的确切需求，推出您自己的基于反射的简单解决方案可能更有意义。

# android - 当 ListView 中的 ItemClicked 时应用程序崩溃

> ID：12788949
> 
> 赞同：0
> 
> 时间：2012-10-08T20:25:14.973
> 
> 标签：android, android-listview

在我的应用程序中，我有一个 ListView 显示我设置的值（例如联系人列表）。当我单击任何值时，我的应用程序崩溃。但是在代码`OnItemClickListener`中甚至没有给我一个问题的原因。

日志猫：

```
10-08 20:14:07.453: E/AndroidRuntime(261): FATAL EXCEPTION: main
10-08 20:14:07.453: E/AndroidRuntime(261): java.lang.IllegalStateException: get field slot from row 0 col -1 failed
10-08 20:14:07.453: E/AndroidRuntime(261):  at android.database.CursorWindow.getString_native(Native Method)
10-08 20:14:07.453: E/AndroidRuntime(261):  at android.database.CursorWindow.getString(CursorWindow.java:329)
10-08 20:14:07.453: E/AndroidRuntime(261):  at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:49)
10-08 20:14:07.453: E/AndroidRuntime(261):  at com.example.mensagem.Mensagenssalvas$1.onItemClick(Mensagenssalvas.java:59)
10-08 20:14:07.453: E/AndroidRuntime(261):  at android.widget.AdapterView.performItemClick(AdapterView.java:284)
10-08 20:14:07.453: E/AndroidRuntime(261):  at android.widget.ListView.performItemClick(ListView.java:3382)
10-08 20:14:07.453: E/AndroidRuntime(261):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
10-08 20:14:07.453: E/AndroidRuntime(261):  at android.os.Handler.handleCallback(Handler.java:587)
10-08 20:14:07.453: E/AndroidRuntime(261):  at android.os.Handler.dispatchMessage(Handler.java:92)
10-08 20:14:07.453: E/AndroidRuntime(261):  at android.os.Looper.loop(Looper.java:123)
10-08 20:14:07.453: E/AndroidRuntime(261):  at android.app.ActivityThread.main(ActivityThread.java:4627)
10-08 20:14:07.453: E/AndroidRuntime(261):  at java.lang.reflect.Method.invokeNative(Native Method)
10-08 20:14:07.453: E/AndroidRuntime(261):  at java.lang.reflect.Method.invoke(Method.java:521)
10-08 20:14:07.453: E/AndroidRuntime(261):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-08 20:14:07.453: E/AndroidRuntime(261):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-08 20:14:07.453: E/AndroidRuntime(261):  at dalvik.system.NativeStart.main(Native Method) 
```

我的 .java 代码：（不包含`OnItemClickListener`）

```
public class Mensagenssalvas extends Activity {

    public SQLiteDatabase db;

    ArrayList<String> list = null;
    Cursor c;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mensagenssalvas);

    db = openOrCreateDatabase("banco.db", Context.MODE_WORLD_WRITEABLE, null);

    Mensagens();
}

private void Mensagens() {
    // TODO Auto-generated method stub

    ListView user = (ListView) findViewById(R.id.lvMensagens);
    String[] campos = new String[] {"mensagenssalvas", "mensagemsalva"};

    list = new ArrayList<String>();
    c = db.query( "mensagens", campos, null, null, null, null, null);
    c.moveToFirst();
    if(c.getCount() > 0) {
        while(true) {
           list.add(c.getString(c.getColumnIndex("mensagenssalvas")).toString());
            if(!c.moveToNext()) break;
        }
    }

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, list);

    user.setAdapter(adapter);

   }
 } 
```

如果我的代码中什至没有，为什么它会显示错误`OnItemClickListener`？

# c++ - 在非常大的数字序列中查找周期

> ID：12788950
> 
> 赞同：0
> 
> 时间：2012-10-08T20:25:21.540
> 
> 标签：c++

是否有可能在很大一部分数字中找到循环长度（超过 C/C++ 中最大整数类型的最大值，比如说 2^20），而不涉及磁盘来执行它？最好的情况是按顺序分析它们，因为它们来自标准输入，但我很确定这是不可能的，我需要将它们存储在内存中。但我希望我是错的。数字值是整数，它们来自标准输入。

示例：输入：( 1 2 3 ... (2^20 三元组 1 2 3) ... 1 2 3) 期望结果：3

**编辑**

让我们将周期视为一个周期（f(x) = f(x+t) 对于某些 t） - 寻找 t 的值

假设操作内存太少，无法存储所有数字（数字可以超过 2^20）并且可能是 gmp 类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:11:12.723

这是一个经过充分研究的问题，有很多算法取决于您的资源和约束到底是什么：

[http://en.wikipedia.org/wiki/Cycle_detection](http://en.wikipedia.org/wiki/Cycle_detection)

您不需要将所有内容都存储在内存中（基本算法中只需两个指针/索引），但您需要能够多次访问该序列。

也可以看看：

[弗洛伊德的循环寻找算法](https://stackoverflow.com/questions/3880735/floyds-cycle-finding-algorithm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T21:04:34.597

查找句点长度的标准方法是想象您的序列是整数字母表上的字符串 S，然后找到可以在字符串 SS 中找到 S 的最左侧位置（大于 0）（字符串 S 的串联与自身）。也就是说，如果`S = 'abcabc'`，您必须找到`i`大于零的第一个位置，以便`i`在字符串中的位置找到`SS = 'abcabcabcabc'`S。在这种情况下，这是 3，这就是周期的长度。

这可以通过任何具有线性性能的字符串搜索算法来完成，并且对于现代计算机上的 2^20 个数字应该可以正常工作。我怀疑您是否可以避免将数字保存在内存中。

# javascript - IE浏览器超时需要解决方案

> ID：12788951
> 
> 赞同：0
> 
> 时间：2012-10-08T20:25:22.007
> 
> 标签：javascript, html, internet-explorer, jsf, timeout

场景就像有一个屏幕，用户提交一个表单，他必须等待 15 分钟的响应（在服务器端处理大量数据）但 IE 在 5 分钟内抛出 broser 超时

我不能使用异步表单提交 我不能在用户机器上修改任何注册表值 我不能做 ajax 轮询（虚拟调用）

有什么办法可以避免这个问题吗？

或者下面的代码片段会避免我的问题

获取一个 html UI 组件并使用 javascript 每秒更新一次执行时间......！

任何解决方案都适用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:45:58.497

服务器端应该进行某种批处理，客户端应该轮询服务器，直到完成。您不应该只保留一个连接长时间保持打开状态。

# python - Scrapy管道open_sider没有被调用

> ID：12788953
> 
> 赞同：0
> 
> 时间：2012-10-08T20:25:35.707
> 
> 标签：python, screen-scraping, scrapy, web-crawler

我看到[了这个问题](https://stackoverflow.com/questions/4113275/scrapy-pipeline-spider-opened-and-spider-closed-not-being-called)，也看到[了这个问题](https://stackoverflow.com/questions/9608391/write-text-file-to-pipeline)，但是[管道上的官方 Scrapy 页面](http://doc.scrapy.org/en/latest/topics/item-pipeline.html)没有提及信号。

这是我到目前为止的代码：

```
import sqlite3
import datetime
from scrapy import signals
from scrapy.xlib.pydispatch import dispatcher
from scrapy import log

class Sqlite3StorePipeline(object):
    def __init__(self):
        print 'wtf'
        dispatcher.connect(self.open_spider, signals.spider_opened)
        dispatcher.connect(self.close_spider, signals.spider_closed)

    def open_spider(self, spider):
        print 'wtf2'
        ... 
```

当我使用命令运行我的蜘蛛时`scrapy crawl <spider name>`，我只看到“wtf”而不是“wtf2”正在输出。

我怎样才能让我的`open_spider`函数被调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T00:23:16.213

我现在正在玩scrapy，到目前为止，我在标准输出方面遇到了奇怪的问题。你试过记录'wtf'2吗？IE

```
 def open_spider(self,spider):
        spider.log('wtf2 from spider %s' % spider.name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:21:51.607

你用的是哪个版本的scrapy？信号 API大约在 7 个月前[更改](https://github.com/scrapy/scrapy/commit/1e12c92b8f4114b75bac7bed714d2e59e12b701d)，影响 0.15 及更高版本。

# jquery - jQuery .find() 结果未定义

> ID：12788954
> 
> 赞同：0
> 
> 时间：2012-10-08T20:25:37.843
> 
> 标签：jquery, find, undefined

嗨，我在显示从我的 php 文件返回的结果时遇到问题。

jQuery部分：

```
$("#dates").load('input_date.php');
    $("#datepicker").datepicker({
        dateFormat: "dd-mm-yy",
        onClose: function() { 

            var $form = $( "#input" ),
            treat = $('#treatment option:selected').val(),
            book = $( '#datepicker' ).val(),
            url = "input_date.php" ;

            $.post( url , { treatment: treat, bookdate: book  },
                function(data) {
                    var content = $( data ).find( '#timeslots' );
                    alert(treat);
                    console.log(content);
                    $( "#dates" ).empty().append( content );}

            /*$.post( "input_date.php" , { treatment: treat, bookdate: book  },
                function(data) {
                    var $data = $(data);
                    var content = $data.is('#timeslots') ?   $data : $data.find('#timeslots');
                    alert(content);
                    $( "#dates" ).empty().append( content );}*/
        );

    }}); 
```

php 部分（在 input_date.php 中）

```
<?php
include('connection.php');
error_reporting(E_ALL);
$treatment = $_POST['treatment'];
$bookdate = $_POST['bookdate'];
if(isset($treatment) && isset($bookdate)){

$exp = explode("-", $bookdate);

//determine what day of the week it is
$timestamp = mktime(0,0,0,$exp[1],$exp[0],$exp[2]);
$dw = date( "w", $timestamp); // sun0,mon1,tue2,wed3,thur4,fri5,sat6
echo $dw."weekday"; //week day 
echo"<br/>";

//find bookings with same date
$q = mysql_query("SELECT BOOK_SLOT_ID FROM BOOKINGS WHERE BOOK_DATE='$bookdate'");
//make array of booking slots
$array1 = array();
while ($s = mysql_fetch_array($q)) {
$array1[] = $s['BOOK_SLOT_ID'];
}
$q2 = mysql_query("SELECT SL_ID FROM SLOTS");
//make array of all slots
$array2 = array();
while ($s2 = mysql_fetch_array($q2)) {
$array2[] =  $s2['SL_ID'];
}

//remove bookings from all slots
$arr_res = array_diff($array2, $array1);

//make selectable options of results
echo '<SELECT id="timeslots">';
foreach($arr_res as $op){
$r = mysql_query("SELECT SL_TIME FROM SLOTS WHERE SL_ID='$op'");
$q3 = mysql_fetch_array($r);
echo "<OPTION value=".$op.">".$q3['SL_TIME']."</OPTION>";
}
echo '</SELECT>';
}else{
$else = mysql_query("SELECT * FROM SLOTS");
echo '<SELECT>';
while($array_else = mysql_fetch_array($else)){
echo "<OPTION value=".$array_else['SL_ID'].">".$array_else['SL_TIME']."</OPTION>";
}
echo "</SELECT>";
print $bookdate;
}

?> 
```

大更新：我在 $.post 部分发现了一个错误，导致变量无法正确传递给 php。现在，如果我检查我的控制台，最初它会给出 php 未定义的错误，但是我从 post 获得的返回显示了它应该显示的内容，它不会显示在我的 #dates div 中。关于如何让信息显示的任何想法？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T21:00:12.187

`jQuery.find()`只搜索给定元素的后代，而不是元素本身。由于`#timeslots`是脚本输出的顶级元素，因此找不到它。你可以写：

```
var $data = $(data);
var contents = $data.is('#timeslots') ? $data : $data.find('#timeslots'); 
```

# java - 使用字符串在 Java 中创建 Mongo 查询

> ID：12788957
> 
> 赞同：2
> 
> 时间：2012-10-08T20:26:06.797
> 
> 标签：java, mongodb, jackson, mongomapper, bson

Mongo Java 驱动程序提供了`JSON.parse(String query)`一种将查询转换为`DBObject`.

```
public void find() {
    DBObject query = JSON.parse("{name:{$exists:true}}");
    DBCursor cursor = collection.find(query);
} 
```

使用[Jackson](https://github.com/FasterXML/jackson-databind)对象可以以相同的方式取消/编组：

```
DBCollection collection = new Mongo().getDB("db").getCollection("friends");

public void save() {
    DBObject document = jsonMarshall(new Friend("John", 24));
    collection.save(document);
    // db.peoples.save({name: 'John', age: 24})
}

ObjectMapper jsonMapper = new ObjectMapper();

public DBObject jsonMarshall(Object obj) throws Exception {
    Writer writer = new StringWriter();
    jsonMapper.writer().writeValue(writer, obj);
    return (DBObject) JSON.parse(writer.toString());
} 
```

幸运的是，库[bson4jackson](https://github.com/michel-kraemer/bson4jackson)允许使用 Jackson 对对象进行 un/marshalled，而无需`JSON.parse(String)`：

```
public void save() {
    DBObject document = bsonMarshall(new Friend("John", 24));
    collection.save(document);
    // db.peoples.save({name: 'John', age: 24})
}

ObjectMapper bsonMapper = new ObjectMapper(new BsonFactory());

public DBObject bsonMarshall(Object obj) throws Exception {
    ByteArrayOutputStream output = new ByteArrayOutputStream();
    bsonMapper.writer().writeValue(output, obj);
    return new LazyWriteableDBObject(output.toByteArray(), new LazyBSONCallback());
} 
```

但是，不幸的是，这种技术似乎不适用于查询。有没有办法使用 bson4jackson 将字符串编组到 DBObject？喜欢：

```
public void find() {
    DBObject query = bsonMarshall("{name:{$exists:true}}");
    DBCursor cursor = collection.find(query);
} 
```

非常感谢。

# php - 使用存储在 Javascript 中的较大数据在 PHP 中创建 XML

> ID：12788960
> 
> 赞同：-1
> 
> 时间：2012-10-08T20:26:21.477
> 
> 标签：php, javascript, xml

> **可能重复：**
> [Javascript 中的 XML <-> JSON 转换](https://stackoverflow.com/questions/1773550/xml-json-conversion-in-javascript)

我在 Javascript 中有大量数据存储，最终需要将其转换为 PHP 服务器上的 XML 文件。将数据转换为 JSON 对象，通过 ajax POST 将其发送到 PHP，然后使用 PHP 库创建 XML 对象并创建 XML 文件，这似乎很麻烦。

似乎我更愿意在 javascript 上创建某种 XML 对象，然后通过 dojo/ajax 调用将其发送到 PHP。遗憾的是，我找不到任何好的 Dojo 或 Javascript 库来创建 XML，而且手动创建 XML 似乎很乏味且容易出错。有没有在 Javascript 中创建 XML 的好方法？我做错了吗？我是否应该将所有数据作为大 JSON 发送，然后在 PHP 中对其进行解密？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:33:00.620

我会将 JSON 传递给 PHP，将 JSON 解码为数组，然后将数组转换为 XML 文档。

要将 JSON 转换为数组，请使用：

```
 $data_array = json_decode('{"JSON":"STRING"}', true); 
```

然后[查看这篇](https://stackoverflow.com/questions/3755952/save-array-as-xml)关于将数组保存为 xml 的帖子。

# image - JPG文件中的图像标题？

> ID：12788961
> 
> 赞同：0
> 
> 时间：2012-10-08T20:26:24.203
> 
> 标签：image, jpeg, caption

是否有将图像标题放入/INSIDE .jpg/jpeg 文件的标准（即类似于在文件中传输并由大多数播放器显示的 MP3 标签）？有没有这样的工具（在我的情况下最好是用于Windoze）？

JPEG 标准不提供该功能吗？我一直认为，确实如此，但是搜索了一段时间，我找不到有关图像说明的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T07:47:17.480

注释 JPEG 图像（也支持 TIFF）的通用标准是[IPTC 数据](http://en.wikipedia.org/wiki/IPTC_Information_Interchange_Model)。与 ID3 类似，数据被附加到 JPEG 图像中。

与 Exif 数据不同的是，Exif 数据旨在保存有关相机的数据及其拍摄照片时的设置，IPTC 数据允许您设置关键字、标题、版权字符串等等。

很多图片管理软件都支持读写IPTC数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T07:37:49.567

感谢您的提示！JPEG **Exif**元数据是缺少的关键字或搜索词。Exif 似乎允许设置所有类型的标签，并且有杂项。允许阅读和编辑这些的工具。还没有决定哪一个，但是你的建议让我走了。谢谢！M。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T20:31:15.390

您正在寻找的术语可能是元数据而不是标题。谷歌那个。如果做不到这一点，只需使用 ac# 脚本对其进行批处理。

[如何使用 C# 向 JPEG 文件添加“评论”](https://stackoverflow.com/questions/1755185/how-to-add-comments-to-a-jpeg-file-using-c-sharp)

# c++ - C++ 内存映射文件数据预取

> ID：12788964
> 
> 赞同：2
> 
> 时间：2012-10-08T20:26:30.853
> 
> 标签：c++, mmap, prefetch

我正在处理非常大的内存映射文件（200+ GB），这些文件无法完全加载到内存中，并且可以随机访问。映射文件存储在固态驱动器阵列上，但我仍然发现一次访问所需的部分非常慢，除非之前已经完成了相同的搜索，并且使用的页面已经被读入内存。

添加多个线程同时读取 mmap 中的变量可以显着提高速度，并且我无法达到测试改进的上限，但是超过 1000 个线程会导致 openmp 抛出资源不可用错误。

我还尝试过 madvise 向内核建议将需要的特定部分（MADV_WILLNEED），但内核似乎没有足够快地按照建议采取行动以产生影响。

我正在寻找一种在实际使用之前同时预取所需数据部分的方法。读取变量（或包含它的映射文件的内存页面大小的片段）强制它进入内存而不阻塞读取的最不占用资源的方法是什么。

如果无法避免阻塞，那么运行大量非常轻量级的线程来进行读取的方法也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:48:13.973

你似乎已经回答了你自己的问题。除了线程之外，您唯一的解决方案是循环遍历您可以`madvise`为每个执行的许多访问。然后在一些 x 数量的`madvise`s（比如 10,000）之后，你回来访问内存。但是应该注意的是，O/S 不**保证**I/O 将按照调用 madvise 的顺序完成。因此，O/S 可能会处理第一个 madvise，然后跳转到 madvise 的末尾，或者地址最低的那个，基本上任何它喜欢的。根本没有办法显着加快 I/O 到您想要的程度。

例子：

```
for(i=0; i < accesses + 10000; ++i)
{
    madvise(access[i].addr, access[i].length, MADV_WILLNEED);
    if(i >= 10000)
    {
        // Access location access[i-10000].addr
    }
} 
```

但是，您应该问自己，如果您使用随机访问，内存映射此文件是否真的是您想要做的。似乎异步 I/O 更有意义。

# c# - 没有返回值的条件运算符 (?:)

> ID：12788965
> 
> 赞同：2
> 
> 时间：2012-10-08T20:26:33.273
> 
> 标签：c#, linq

首先，我刚刚开始使用 LINQ，但我并不真正了解它。

无论如何，我想做的是使用 LINQ 和 .Where 语句添加到列表中。

这是我尝试过的：

```
List<object> FirstList = new List<object>();
List<object> SecondList = new List<object>();
Listener.Clients.Where(x => (x.Value.Authenticated) ? FirstList.Add(x.Value.UserID) : SecondList.Add(x.Value.UserID)); 
```

Listener 是一个套接字包装类，而 Clients 是一个类 Client 的数组。

在该 Client 类中，我需要一些值，我想检查该客户端是否经过身份验证（登录），如果是，将其添加到第一个列表中，如果不是，将其添加到第二个列表，但似乎 ?: 运算符必须有返回值，但添加到列表不会返回任何内容。

我希望我解释得很好；我不是最会说话的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T20:28:04.160

`IEnumerable.Where`仅用于过滤列表中与特定条件匹配的元素。您试图在 Where 子句中进行操作，这是不正确的。

我猜你想要类似的东西：

```
var firstList = 
    Listener
        .Clients
        .Where(c => c.Value.Authenticated).Select(c => c.Value.UserID).ToList();
var secondList = 
    Listener
        .Clients
        .Where(c => !c.Value.Authenticated).Select(c => c.Value.UserID).ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T20:41:11.177

您正在尝试使用一个枚举创建两个（或更多）列表。考虑`ToLookup`改用：

```
ILookup<bool, Client> lookup = source.ToLookup(c => c.Value.Authenticated);
List<Client> firstList = lookup[true].ToList();
List<Client> secondList = lookup[false].ToList(); 
```

当未知键被发送到查找时，它将返回一个空集合。

* * *

您需要 UserIds 而不是 Clients，因此请使用选择值的 ToLookup 的重载。

```
ILookup<bool, string> lookup = source
  .ToLookup(c => c.Value.Authenticated, c => c.Value.UserId);
List<string> firstList = lookup[true].ToList();
List<string> secondList = lookup[false].ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T20:31:17.750

此 IEnumerable.Where 扩展方法旨在检索过滤的元素列表，并将匿名方法作为参数，该方法必须接收元素的类型并返回布尔值。

# android - 为什么使用 MediaPlayer 时 BroadcastReceiver 会崩溃？

> ID：12788968
> 
> 赞同：1
> 
> 时间：2012-10-08T20:26:48.120
> 
> 标签：android, broadcastreceiver, android-mediaplayer

我在使用 MediaPlayer 的 BroadcastReceiver 中遇到了奇怪的情况。播放一定数量的 mp3 文件后应用程序崩溃。

所以，我有活动

```
public class MyActivity extends Activity
{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        initButtons();
    }

    private void onStartButtonClicked()
    {
        Intent service = new Intent("com.ggspot.action.LAUNCH_MY_SERVICE");
        startService(service);
    }

    protected void onStopButtonClicked()
    {
        MyAlarm.stop(this);
    }

    private void initButtons()
    {
        Button startButton = (Button) findViewById(R.id.startButton);
        Button stopButton = (Button) findViewById(R.id.stopButton);

        startButton.setOnClickListener(new OnClickListener()
        {

            @Override
            public void onClick(View v)
            {
                onStartButtonClicked();
            }
        });

        stopButton.setOnClickListener(new OnClickListener()
        {

            @Override
            public void onClick(View v)
            {
                onStopButtonClicked();
            }
        });
    }
} 
```

此活动通过按下按钮启动我的服务

```
public class MyService extends Service
{
    @Override
    public IBinder onBind(Intent intent)
    {
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId)
    {
        MyAlarm alarm = new MyAlarm(getApplicationContext(), 3);
        return START_STICKY;
    }    
} 
```

服务只是创建 BroadcastReceiver

```
public class MyAlarm extends BroadcastReceiver
{
    public MyAlarm()
    {
    }

    public MyAlarm(Context context, int timeoutInSeconds)
    {
        AlarmManager alarmMgr = (AlarmManager) context
                .getSystemService(Context.ALARM_SERVICE);
        Intent intent = new Intent(context, MyAlarm.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0,
                intent, PendingIntent.FLAG_UPDATE_CURRENT);
        Calendar time = Calendar.getInstance();
        alarmMgr.setRepeating(AlarmManager.RTC_WAKEUP, time.getTimeInMillis(),
                timeoutInSeconds * 1000, pendingIntent);
    }

    @Override
    public void onReceive(Context context, Intent intent)
    {
        File file = new File(Environment.getExternalStorageDirectory()
            + "/music/beep-7.mp3");

        Uri uri = Uri.fromFile(file);
        MediaPlayer player = MediaPlayer.create(context, uri);
        player.start();
    }

    public static void stop(Context context)
    {
        AlarmManager alarmMgr = (AlarmManager) context
                .getSystemService(Context.ALARM_SERVICE);
        Intent intent = new Intent(context, MyAlarm.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0,
                intent, PendingIntent.FLAG_UPDATE_CURRENT);
        alarmMgr.cancel(pendingIntent);
    }
} 
```

文件**/music/beep-7.mp3**只是持续不到半秒的短哔声。

我的安卓清单：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".MyActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <service
        android:name=".MyService">
        <intent-filter>
            <action android:name="com.ggspot.action.LAUNCH_MY_SERVICE"/>
        </intent-filter>
    </service>

    <receiver
        android:name=".MyAlarm">
    </receiver>
</application> 
```

所以，我希望在按下开始按钮后，我会在三秒内听到一次哔哔声。即使我关闭应用程序，蜂鸣声也会继续。为了停止哔哔声，我应该启动活动并按停止按钮。
我现在拥有的对我来说真的很奇怪：

*   按下开始按钮后，我听到哔哔声 7 次，然后应用程序崩溃
*   崩溃后按下“强制关闭”按钮后，我可以再次听到哔哔声 7 次。然后我想服务崩溃了。

我不太了解LogCat。它说：
**无法启动接收器 com.ggspot.test.services.MyAlarm: java.lang.NullPointerException**
但我不明白在哪里。以及为什么只有在第七次尝试播放 mp3 文件之后。

**更新：**

LogCat 跟踪：

```
10-09 08:42:23.479: E/AndroidRuntime(12578): FATAL EXCEPTION: main
10-09 08:42:23.479: E/AndroidRuntime(12578): java.lang.RuntimeException: Unable to start receiver com.ggspot.test.services.MyAlarm: java.lang.NullPointerException
10-09 08:42:23.479: E/AndroidRuntime(12578):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:1809)
10-09 08:42:23.479: E/AndroidRuntime(12578):    at android.app.ActivityThread.access$2400(ActivityThread.java:117)
10-09 08:42:23.479: E/AndroidRuntime(12578):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:985)
10-09 08:42:23.479: E/AndroidRuntime(12578):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-09 08:42:23.479: E/AndroidRuntime(12578):    at android.os.Looper.loop(Looper.java:123)
10-09 08:42:23.479: E/AndroidRuntime(12578):    at android.app.ActivityThread.main(ActivityThread.java:3687)
10-09 08:42:23.479: E/AndroidRuntime(12578):    at java.lang.reflect.Method.invokeNative(Native Method)
10-09 08:42:23.479: E/AndroidRuntime(12578):    at java.lang.reflect.Method.invoke(Method.java:507)
10-09 08:42:23.479: E/AndroidRuntime(12578):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
10-09 08:42:23.479: E/AndroidRuntime(12578):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
10-09 08:42:23.479: E/AndroidRuntime(12578):    at dalvik.system.NativeStart.main(Native Method)
10-09 08:42:23.479: E/AndroidRuntime(12578): Caused by: java.lang.NullPointerException
10-09 08:42:23.479: E/AndroidRuntime(12578):    at com.ggspot.test.services.MyAlarm.onReceive(MyAlarm.java:58)
10-09 08:42:23.479: E/AndroidRuntime(12578):    at android.app.ActivityThread.handleReceiver(ActivityThread.java:1798)
10-09 08:42:23.479: E/AndroidRuntime(12578):    ... 10 more 
```

**更新**
的解决方案是将 CompletionListener 添加到媒体播放器并在播放 mp3 后释放它：

```
@Override
public void onReceive(Context context, Intent intent)
{
    File file = new File(Environment.getExternalStorageDirectory()
            + "/music/beep-7.mp3");

    Uri uri = Uri.fromFile(file);
    MediaPlayer player = MediaPlayer.create(context, uri);
    player.start();

    player.setOnCompletionListener(new OnCompletionListener()
    {

        @Override
        public void onCompletion(MediaPlayer mp)
        {
            mp.release();                
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T16:39:06.543

**阅读 LogCat**

```
Caused by: java.lang.NullPointerException
    at com.ggspot.test.services.MyAlarm.onReceive(MyAlarm.java:58) 
```

这表示 NullPointerException 发生在 MyAlarm.java 的第 58 行。

**问题**
我相信您正在尝试使用重复警报来重播`beep-7.mp3`，这是不正确的。当第二个警报响起时，`onReceive()`您正在尝试重新创建 MediaPlayer：

```
MediaPlayer player = MediaPlayer.create(context, uri); 
```

但是您从未*发布*过第一个，此 MediaPlayer 的一个副本可以随时存在。所以第二个`player`是`null`并且`player.start()`（第 58 行）抛出 NullPointerException：

**解决方案**
要重复`beep-7.mp3`，只需使用[`MediaPlayer#setLooping()`](http://developer.android.com/reference/android/media/MediaPlayer.html#setLooping%28boolean%29)：

```
player.setLooping(true); 
```

完成 MediaPlayer 后，您*必须*`player.release()`在尝试创建第二个 MediaPlayer 之前调用，否则您可能会遇到同样的问题。

# knockout.js - 带有敲除验证的对象级别验证

> ID：12788971
> 
> 赞同：1
> 
> 时间：2012-10-08T20:26:57.267
> 
> 标签：knockout.js, knockout-validation

我有一个带有子列表的父对象。我想验证子项属性之一的总和是否等于父项属性的值。

在下面的小提琴中：如何检查“股票金额”的总和是否等于“投资组合总金额”

[http://jsfiddle.net/casudeo/xR5st/](http://jsfiddle.net/casudeo/xR5st/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:50:21.127

在阅读了上面 Tyrsius 的评论后，我进一步思考了我的问题并想出了一个解决方案。我最终创建了一个自定义验证器，我向该验证器传递了一个迭代子级的函数。我仍然欢迎任何其他解决方案和/或评论。

我的解决方案：http: [//jsfiddle.net/casudeo/z6yEu/](http://jsfiddle.net/casudeo/z6yEu/)

# c# - 在实体框架中设置数据库超时

> ID：12788972
> 
> 赞同：176
> 
> 时间：2012-10-08T20:26:59.777
> 
> 标签：c#, .net, asp.net-mvc, entity-framework, connection-timeout

我的命令一直超时，所以我需要更改默认的命令超时值。

我找到了`myDb.Database.Connection.ConnectionTimeout`，但它是`readonly`。

**如何在*Entity Framework 5*中设置命令超时？**

* * *

## 回答 #1

> 赞同：213
> 
> 时间：2012-10-08T20:29:22.913

在您的上下文中尝试此操作：

```
public class MyDatabase : DbContext
{
    public MyDatabase ()
        : base(ContextHelper.CreateConnection("Connection string"), true)
    {
        ((IObjectContextAdapter)this).ObjectContext.CommandTimeout = 180; // seconds
    }
} 
```

* * *

如果要在连接字符串中定义超时，请使用`Connection Timeout`以下连接字符串中的参数：

```
<connectionStrings>

<add name="AdventureWorksEntities"
connectionString="metadata=.\AdventureWorks.csdl|.\AdventureWorks.ssdl|.\AdventureWorks.msl;
provider=System.Data.SqlClient;provider connection string='Data Source=localhost;
Initial Catalog=AdventureWorks;Integrated Security=True;Connection Timeout=60;
multipleactiveresultsets=true'" providerName="System.Data.EntityClient" />

</connectionStrings> 
```

来源：[如何：定义连接字符串](http://msdn.microsoft.com/en-us/library/bb896291.aspx)

* * *

## 回答 #2

> 赞同：195
> 
> 时间：2014-05-21T01:35:38.923

您可以使用`DbContext.Database.CommandTimeout = 180; // seconds`

这很简单，不需要演员表。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-10-08T20:34:56.563

我的部分上下文如下所示：

```
public partial class MyContext : DbContext
{
    public MyContext (string ConnectionString)
        : base(ConnectionString)
    {
        this.SetCommandTimeOut(300);
    }

    public void SetCommandTimeOut(int Timeout)
    {
        var objectContext = (this as IObjectContextAdapter).ObjectContext;
        objectContext.CommandTimeout = Timeout;
    }
} 
```

我离开了`SetCommandTimeOut`公众，所以我只修改了我需要花费很长时间（超过 5 分钟）而不是全局超时的例程。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-03-25T10:46:58.127

在生成的构造函数代码中，它应该调用`OnContextCreated()`

我添加了这个部分类来解决问题：

```
partial class MyContext: ObjectContext
{
    partial void OnContextCreated()
    {
        this.CommandTimeout = 300;
    }
} 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2013-07-17T20:30:45.880

我用一个流畅的实现扩展了 Ronnie 的答案，所以你可以像这样使用它：

`dm.Context.SetCommandTimeout(120).Database.SqlQuery...`

```
public static class EF
{
    public static DbContext SetCommandTimeout(this DbContext db, TimeSpan? timeout)
    {
        ((IObjectContextAdapter)db).ObjectContext.CommandTimeout = timeout.HasValue ? (int?) timeout.Value.TotalSeconds : null;

        return db;
    }

    public static DbContext SetCommandTimeout(this DbContext db, int seconds)
    {
        return db.SetCommandTimeout(TimeSpan.FromSeconds(seconds));
    } 
} 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2016-06-18T01:33:38.127

对于数据库优先方法：

我们仍然可以在构造函数中设置它，通过这样覆盖**ContextName.Context.tt** T4 模板：

```
<#=Accessibility.ForType(container)#> partial class <#=code.Escape(container)#> : DbContext
{
    public <#=code.Escape(container)#>()
        : base("name=<#=container.Name#>")
    {
        Database.CommandTimeout = 180;
<#
if (!loader.IsLazyLoadingEnabled(container))
{
#>
        this.Configuration.LazyLoadingEnabled = false;
<#
} 
```

`Database.CommandTimeout = 180;`是真正的变化。

生成的输出是这样的：

```
public ContextName() : base("name=ContextName")
{
    Database.CommandTimeout = 180;
} 
```

如果您更改数据库模型，此模板将保留，但实际类将被更新。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2013-05-08T13:01:25.630

与其他答案相同，但作为扩展方法：

```
static class Extensions
{
    public static void SetCommandTimeout(this IObjectContextAdapter db, TimeSpan? timeout)
    {
        db.ObjectContext.CommandTimeout = timeout.HasValue ? (int?) timeout.Value.TotalSeconds : null;
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-04-24T16:37:16.210

我刚刚遇到这个问题并通过更新我的应用程序配置文件来解决它。对于有问题的连接，指定“Connection Timeout=60”（我使用的是实体框架版本 5.0.0.0）

[连接超时设置](https://i.stack.imgur.com/khk1C.png)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-12-03T09:53:07.460

你可以使用这个简单的：
`dbContext.Database.SetCommandTimeout(300);`

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2021-04-02T08:41:11.763

您应该在 Web 配置中的 Connection String 标记中进行更改，并使 EntityFrameWork 在其构造函数中从中读取。

1.  将此术语添加到 web.config 连接字符串：连接超时 = 300；

2.  在构造函数中添加以下代码：

    Database.CommandTimeout = 数据库.Connection.ConnectionTimeout;

通过这种方法，您将使用户能够控制超时，而无需为他进行新的发布。

# vb.net - 将长度 > 2^16 的 1d 数组传递给带有 vb.net 的 excel 列

> ID：12788981
> 
> 赞同：0
> 
> 时间：2012-10-08T20:27:15.363
> 
> 标签：vb.net

如果我有一个包含 100 万个索引的一维数组，有没有办法做一个单行来将数组传递到一张表中？

这适用于 arr.length < 2^16

```
wk.Range(String.Concat("a1:a", arr.Length)).Value = XlApp.Application.transpose(arr) 
```

但不适用于 arr.length = 100 万。我已经在 VBA 中完成了这项工作，但它需要几行代码并且效率不高。

我还看到了用 Python 完成的单行程序，所以我想知道 Vb.net 是否可以做到。

# python - Python - Linux 上的 Excel - 有没有办法提取评论和超链接？

> ID：12788984
> 
> 赞同：3
> 
> 时间：2012-10-08T20:27:31.790
> 
> 标签：python, linux, excel, openpyxl

有没有办法从 Linux 上的 excel 电子表格中提取单元格注释和超链接？

刚刚尝试在 openpyxl 上获取超链接：

```
c = worksheet.cell('A378')
c.hyperlink 
```

c.value 返回单元格值/链接文本，但 .hyperlink 返回一个空字符串，尽管电子表格上有一个链接......

也许还有另一个模块可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:19:41.863

如果您使用`openpyxl`的是 .xlsx 文件，那么您可能正在使用它。现在，您可能必须自己动手（这意味着您必须解压缩 .xlsx 并自己四处寻找相关的部分；Python 确实为这些提供了工具，但级别低于 .xlsx `openpyxl`）。

如果您可以改为使用 .xls，那么您很幸运：从 0.7.2 版开始，[`xlrd`](http://pypi.python.org/pypi/xlrd)将阅读评论和超链接。查找`cell_note_map`和`hyperlink_map`sheet 属性。（请注意，最新版本的`xlrd`(0.8.0) 也可以读取 .xlsx 文件，但没有明确支持评论或超链接，所以现在会让您处于同一条船上`openpyxl`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-10T13:35:52.523

如果您使用的是 openpyxl，则使用工作表的超链接属性来获取超链接：

```
wb = load_workbook("file path")
ws= wb['Name of the sheet']

ws.cell(row = rowNumber , column = columnNUmber).hyperlink.target #this will give you the link as output . 
```

# php - 将每个用户从 Web 应用程序中注销

> ID：12788986
> 
> 赞同：0
> 
> 时间：2012-10-08T20:27:50.867
> 
> 标签：php, ajax, session, login

我正在帮助我工作的公司的一个部门开发一个 Web 应用程序。
我被要求研究一种方法来立即注销可能在应用程序上的每个用户，这样如果 Web 应用程序的更新被推出，人们就不会使用它的旧版本。

我的问题是，由于我对我们正在使用的 PHP、JQuery、AJAX 等不是很精通，所以我不知道要寻找什么。

我们有一个计时器脚本在后台每隔几秒钟运行一次，所以我想我可以添加一个管理按钮来更新数据库中的一个字段，这个脚本可以经常检查这个字段，如果设置了字段，注销脚本可以被执行。但这似乎是解决该问题的一种技巧。

与我一起工作的人建议我研究自定义 SESSION 处理程序。

你们有什么感想？有任何想法吗？

任何帮助，将不胜感激。即使这是一个关于开始搜索的想法。

提前致谢！

**编辑：** 我应该提到这是一个单页网络应用程序。用户没有关注任何链接或离开页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:32:59.197

在您选择的数据库中为登录用户创建一个条目，如果性能是标准，则可能是 memcached。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T20:33:10.977

使用将会话存储在数据库或文件中的自定义会话保存处理程序。当您想销毁所有会话时，您可以清除存储（无论是数据库还是文件）。

从 - [http://php.net/manual/en/function.session-set-save-handler.php开始](http://php.net/manual/en/function.session-set-save-handler.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T17:25:38.667

我最终做的是以下内容：

我在其中一个数据库表中添加了一个字段，并在每次浏览器滴答声通过时（大约每分钟左右）检查它的值。如果在滴答声通过时设置了该字段，则刷新他们的页面，从而将他们从应用程序中注销并破坏他们的会话（当有人离开页面时我们会破坏会话）。
在该字段恢复为“0”之前，用户无法重新登录

管理员帐户可以通过单击按钮更改该字段。因此他们在数据库中的字段保持为“0”

这可能是一种 hack，但即使在每个人的帮助下，我也能想到它。唯一的问题是，让每个人都注销需要一点时间。我猜是拉与推的问题。

是的，在注销所有人之前一段时间，我们会发送一封电子邮件，这样他们就不会失去工作。

感谢大家的帮助！