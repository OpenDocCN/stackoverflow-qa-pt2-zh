# StackOverflow 问答 12751000-12751999

# javascript - 我们可以为页面中的所有文本区域重用相同的代码吗？

> ID：12751007
> 
> 赞同：0
> 
> 时间：2012-10-05T17:13:41.997
> 
> 标签：javascript

目前，我通过用不同的变量捕获它们的值来为每个文本区域使用相同的 JS 代码。

有什么方法可以为页面中的每个文本区域重复使用相同的代码，因为我每页有 20/30 个文本区域。请建议？

```
<textarea id="TextArea1" class="txtClass" cols="20" rows="2"></textarea>
<textarea id="TextArea2" class="txtClass" cols="20" rows="2"></textarea> 
```

**JS 脚本**

```
objTextBox1 = document.getElementById("TextArea1");
oldValue1 = objTextBox1.value;

objTextBox2 = document.getElementById("TextArea2");
oldValue2 = objTextBox2.value;

var somethingChanged = false;

function track_change()
  {
    //for text box 1 change
    if(objTextBox1.value != oldValue1)
     {
       oldValue1 = objTextBox1.value;
       somethingChanged = true;
     }

    //for text box 2 change
    if(objTextBox2.value != oldValue2)
     {
       oldValue2 = objTextBox2.value;
       somethingChanged = true;
     }

   } 

  setInterval (function() { track_change()}, 100); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:18:00.527

您可以尝试使用**更改**事件，而不是使用 setInterval 跟踪更改以密切关注更改。

```
$(function() {

    var somethingChanged = false;
    $('.txtClass').on('change', function(){
         somethingChanged = true;
        alert('Something Changed !!');
    });    

});​ 
```

[检查演示](http://jsfiddle.net/sushanth009/XCwLQ/)

仅使用 Javascript .. 你可以试试这个

```
<textarea id="TextArea1" class="txtClass" cols="20" onchange="Changed(this)" rows="2"></textarea>
<textarea id="TextArea2" class="txtClass" cols="20" onchange="Changed(this)" rows="2"></textarea>
<script type="text/javascript">
    var somethingChanged = false;
    function Changed(elem){

        somethingChanged = true;
        alert('Something Changed !!');
    };

</script>
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:19:55.937

您最初将您的问题标记为`jquery`。您没有使用`jquery`. 如果这样做，减少代码重复将非常简单：

```
$("textarea").data('oldValue', function () { $(this).val(); })
   .on('change', function () {
      if ($(this).val() != $(this).data('oldValue') {
         somethingChanged = true;
      }
   }); 
```

如果您实际上不能或不想使用 jQuery，您仍然可以使用`getElementsByTagName`或可能`querySelectorAll`的 .

```
for (elem in document.getElementsByTagName('textarea')) {
   elem.data.oldValue = this.innerHTML;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T17:20:26.080

您绝对可以使用元素的 jquery 绑定。更多细节在这里[http://api.jquery.com/change/](http://api.jquery.com/change/)

```
$('.txtClass').change(function() {
  alert('Handler for .change() called.');
}); 
```

您还需要对存储和更新值的变量做些什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T17:31:44.223

我认为您的逻辑是错误的，因为在第一次使用您的代码*时*，当, `somethingChanged`is但与，您只是在检测 中是否发生了变化，这将始终给您。`false``textarea``somethingChanged``true``oldValue1``objTextBox1.value`*`textarea``true`*

 ***例如**

使用您的代码的结果：

**oldValue1** : oscar / **objTextBox1.value** : oscar / **somethingChanged** = true;

***（因为“奥斯卡”永远是“奥斯卡”，所以你没有得到任何旧值）***

如果您打算获取旧值，正确的逻辑将是这样的：

**oldValue1:** osca / **objTextBox1.value** : oscar / **somethingChanged** = true;

***（因为“osca”是写完“oscar”之前的旧文本，如果这是你想要达到的情况，你需要重新制定你的逻辑）***

* * *

根据我写的，你不需要使用任何`setInterval`东西，我只是尝试重新创建你需要使用`keyUp`的东西，看看：

## **使用 javascript，而不是 jQuery：**

*解释*：当用户完成输入某些内容（`keyup`）时，不管是哪个`textarea`，检测方法都会查找`defaultValue`（`textarea`第一时刻的值）并检查它是否已更改。

***HTML：***

```
<textarea id="TextArea1" class="txtClass" cols="20" rows="2" onKeyup="detect(this);"></textarea>
<textarea id="TextArea2" class="txtClass" cols="20" rows="2" onKeyup="detect(this);"></textarea> 
```

***JS：***

```
function detect(elem){
    if(elem.defaultValue != elem.value){
        somethingChanged = true;
        alert("text changed!");
    }
}; 
```

* * *

## **使用 jQuery：**

仅针对这种情况，我会向您推荐此插件：

[http://www.zurb.com/playground/javascripts/plugins/jquery.textchange.min.js](http://www.zurb.com/playground/javascripts/plugins/jquery.textchange.min.js)

然后你就这样做：

**现场演示：http:** [//jsfiddle.net/oscarj24/bs8hJ/2/](http://jsfiddle.net/oscarj24/bs8hJ/2/)

```
$('textarea').bind('textchange', function (event, previousTxt) {
    somethingChanged = true;
}); 
```

* * **

# c# - 如何通过 WinRT 中的颜色进行枚举？

> ID：12751008
> 
> 赞同：4
> 
> 时间：2012-10-05T17:13:48.190
> 
> 标签：c#, windows-8, windows-runtime

在非 WinRT 中通过颜色进行枚举是一个常见问题，答案很简单。但是，由于颜色“ENUM”实际上只是一个具有静态“颜色”属性的类，因此您不能在 WinRT 中使用标准方法。

如何在 WinRT 中枚举颜色？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-05T17:13:48.190

像这样：

通过 WinRT 中的颜色进行枚举需要`using System.Reflection`，因此您可以获取容器类“颜色”中子类的静态属性。像这样：

```
Dictionary<string, Windows.UI.Color> Colors()
{
    var _Colors = typeof(Windows.UI.Colors)
        // using System.Reflection;
        .GetRuntimeProperties()
        .Select(c => new
        {
            Color = (Windows.UI.Color)c.GetValue(null),
            Name = c.Name
        });
    return _Colors.ToDictionary(x => x.Name, x => x.Color);
} 
```

来源：[http ://codepaste.net/j3mzrw](http://codepaste.net/j3mzrw)

注意：如果您不喜欢反射（出于某种原因），那么也没有什么能阻止您手动编写可枚举的颜色。创建一个“动态”颜色列表真的只是为了花哨的缘故——颜色不会更新。只写清单！

**在这里，我为你做了：**

```
public class ColorList : List<Windows.UI.Color>
{
    public ColorList()
    {
        this.Add(Windows.UI.Colors.AliceBlue);
        this.Add(Windows.UI.Colors.AntiqueWhite);
        this.Add(Windows.UI.Colors.Aqua);
        this.Add(Windows.UI.Colors.Aquamarine);
        this.Add(Windows.UI.Colors.Azure);
        this.Add(Windows.UI.Colors.Beige);
        this.Add(Windows.UI.Colors.Bisque);
        this.Add(Windows.UI.Colors.Black);
        this.Add(Windows.UI.Colors.BlanchedAlmond);
        this.Add(Windows.UI.Colors.Blue);
        this.Add(Windows.UI.Colors.BlueViolet);
        this.Add(Windows.UI.Colors.Brown);
        this.Add(Windows.UI.Colors.BurlyWood);
        this.Add(Windows.UI.Colors.CadetBlue);
        this.Add(Windows.UI.Colors.Chartreuse);
        this.Add(Windows.UI.Colors.Chocolate);
        this.Add(Windows.UI.Colors.Coral);
        this.Add(Windows.UI.Colors.CornflowerBlue);
        this.Add(Windows.UI.Colors.Cornsilk);
        this.Add(Windows.UI.Colors.Crimson);
        this.Add(Windows.UI.Colors.Cyan);
        this.Add(Windows.UI.Colors.DarkBlue);
        this.Add(Windows.UI.Colors.DarkCyan);
        this.Add(Windows.UI.Colors.DarkGoldenrod);
        this.Add(Windows.UI.Colors.DarkGray);
        this.Add(Windows.UI.Colors.DarkGreen);
        this.Add(Windows.UI.Colors.DarkKhaki);
        this.Add(Windows.UI.Colors.DarkMagenta);
        this.Add(Windows.UI.Colors.DarkOliveGreen);
        this.Add(Windows.UI.Colors.DarkOrange);
        this.Add(Windows.UI.Colors.DarkOrchid);
        this.Add(Windows.UI.Colors.DarkRed);
        this.Add(Windows.UI.Colors.DarkSalmon);
        this.Add(Windows.UI.Colors.DarkSeaGreen);
        this.Add(Windows.UI.Colors.DarkSlateBlue);
        this.Add(Windows.UI.Colors.DarkSlateGray);
        this.Add(Windows.UI.Colors.DarkTurquoise);
        this.Add(Windows.UI.Colors.DarkViolet);
        this.Add(Windows.UI.Colors.DeepPink);
        this.Add(Windows.UI.Colors.DeepSkyBlue);
        this.Add(Windows.UI.Colors.DimGray);
        this.Add(Windows.UI.Colors.DodgerBlue);
        this.Add(Windows.UI.Colors.Firebrick);
        this.Add(Windows.UI.Colors.FloralWhite);
        this.Add(Windows.UI.Colors.ForestGreen);
        this.Add(Windows.UI.Colors.Fuchsia);
        this.Add(Windows.UI.Colors.Gainsboro);
        this.Add(Windows.UI.Colors.GhostWhite);
        this.Add(Windows.UI.Colors.Gold);
        this.Add(Windows.UI.Colors.Goldenrod);
        this.Add(Windows.UI.Colors.Gray);
        this.Add(Windows.UI.Colors.Green);
        this.Add(Windows.UI.Colors.GreenYellow);
        this.Add(Windows.UI.Colors.Honeydew);
        this.Add(Windows.UI.Colors.HotPink);
        this.Add(Windows.UI.Colors.IndianRed);
        this.Add(Windows.UI.Colors.Indigo);
        this.Add(Windows.UI.Colors.Ivory);
        this.Add(Windows.UI.Colors.Khaki);
        this.Add(Windows.UI.Colors.Lavender);
        this.Add(Windows.UI.Colors.LavenderBlush);
        this.Add(Windows.UI.Colors.LawnGreen);
        this.Add(Windows.UI.Colors.LemonChiffon);
        this.Add(Windows.UI.Colors.LightBlue);
        this.Add(Windows.UI.Colors.LightCoral);
        this.Add(Windows.UI.Colors.LightCyan);
        this.Add(Windows.UI.Colors.LightGoldenrodYellow);
        this.Add(Windows.UI.Colors.LightGray);
        this.Add(Windows.UI.Colors.LightGreen);
        this.Add(Windows.UI.Colors.LightPink);
        this.Add(Windows.UI.Colors.LightSalmon);
        this.Add(Windows.UI.Colors.LightSeaGreen);
        this.Add(Windows.UI.Colors.LightSkyBlue);
        this.Add(Windows.UI.Colors.LightSlateGray);
        this.Add(Windows.UI.Colors.LightSteelBlue);
        this.Add(Windows.UI.Colors.LightYellow);
        this.Add(Windows.UI.Colors.Lime);
        this.Add(Windows.UI.Colors.LimeGreen);
        this.Add(Windows.UI.Colors.Linen);
        this.Add(Windows.UI.Colors.Magenta);
        this.Add(Windows.UI.Colors.Maroon);
        this.Add(Windows.UI.Colors.MediumAquamarine);
        this.Add(Windows.UI.Colors.MediumBlue);
        this.Add(Windows.UI.Colors.MediumOrchid);
        this.Add(Windows.UI.Colors.MediumPurple);
        this.Add(Windows.UI.Colors.MediumSeaGreen);
        this.Add(Windows.UI.Colors.MediumSlateBlue);
        this.Add(Windows.UI.Colors.MediumSpringGreen);
        this.Add(Windows.UI.Colors.MediumTurquoise);
        this.Add(Windows.UI.Colors.MediumVioletRed);
        this.Add(Windows.UI.Colors.MidnightBlue);
        this.Add(Windows.UI.Colors.MintCream);
        this.Add(Windows.UI.Colors.MistyRose);
        this.Add(Windows.UI.Colors.Moccasin);
        this.Add(Windows.UI.Colors.NavajoWhite);
        this.Add(Windows.UI.Colors.Navy);
        this.Add(Windows.UI.Colors.OldLace);
        this.Add(Windows.UI.Colors.Olive);
        this.Add(Windows.UI.Colors.OliveDrab);
        this.Add(Windows.UI.Colors.Orange);
        this.Add(Windows.UI.Colors.OrangeRed);
        this.Add(Windows.UI.Colors.Orchid);
        this.Add(Windows.UI.Colors.PaleGoldenrod);
        this.Add(Windows.UI.Colors.PaleGreen);
        this.Add(Windows.UI.Colors.PaleTurquoise);
        this.Add(Windows.UI.Colors.PaleVioletRed);
        this.Add(Windows.UI.Colors.PapayaWhip);
        this.Add(Windows.UI.Colors.PeachPuff);
        this.Add(Windows.UI.Colors.Peru);
        this.Add(Windows.UI.Colors.Pink);
        this.Add(Windows.UI.Colors.Plum);
        this.Add(Windows.UI.Colors.PowderBlue);
        this.Add(Windows.UI.Colors.Purple);
        this.Add(Windows.UI.Colors.Red);
        this.Add(Windows.UI.Colors.RosyBrown);
        this.Add(Windows.UI.Colors.RoyalBlue);
        this.Add(Windows.UI.Colors.SaddleBrown);
        this.Add(Windows.UI.Colors.Salmon);
        this.Add(Windows.UI.Colors.SandyBrown);
        this.Add(Windows.UI.Colors.SeaGreen);
        this.Add(Windows.UI.Colors.SeaShell);
        this.Add(Windows.UI.Colors.Sienna);
        this.Add(Windows.UI.Colors.Silver);
        this.Add(Windows.UI.Colors.SkyBlue);
        this.Add(Windows.UI.Colors.SlateBlue);
        this.Add(Windows.UI.Colors.SlateGray);
        this.Add(Windows.UI.Colors.Snow);
        this.Add(Windows.UI.Colors.SpringGreen);
        this.Add(Windows.UI.Colors.SteelBlue);
        this.Add(Windows.UI.Colors.Tan);
        this.Add(Windows.UI.Colors.Teal);
        this.Add(Windows.UI.Colors.Thistle);
        this.Add(Windows.UI.Colors.Tomato);
        this.Add(Windows.UI.Colors.Transparent);
        this.Add(Windows.UI.Colors.Turquoise);
        this.Add(Windows.UI.Colors.Violet);
        this.Add(Windows.UI.Colors.Wheat);
        this.Add(Windows.UI.Colors.White);
        this.Add(Windows.UI.Colors.WhiteSmoke);
        this.Add(Windows.UI.Colors.Yellow);
        this.Add(Windows.UI.Colors.YellowGreen);
    }
} 
```

要么工作。

# android - Android相机预览看起来很奇怪

> ID：12751016
> 
> 赞同：6
> 
> 时间：2012-10-05T17:14:31.277
> 
> 标签：android, api, camera

我正在实现一个相机应用程序，当我查看预览时（尤其是前置摄像头），图像非常胖。看起来图像被水平拉伸。我按照优化相机尺寸的 sdk 示例进行操作，但没有帮助。如何调整我的相机设置，以便它可以像其他相机应用程序一样预览？

谢谢。

我的代码如下。

```
public class CameraActivity extends Activity implements SurfaceHolder.Callback, Camera.ShutterCallback, Camera.PictureCallback {

Camera m_camera;
SurfaceView m_surfaceView;
int m_numOfCamera;
int m_defaultCameraId;
int m_currentCamera;
int m_surfaceWidth;
int m_surfaceHeight;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_camera);
    getActionBar().setDisplayHomeAsUpEnabled(true);

    m_surfaceView = (SurfaceView)findViewById(R.id.cameraPreview);
    m_surfaceView.getHolder().addCallback(this);

    m_camera = Camera.open();

    m_numOfCamera = Camera.getNumberOfCameras();

    CameraInfo cameraInfo = new CameraInfo();
    for (int i = 0; i < m_numOfCamera; ++i) {
        Camera.getCameraInfo(i, cameraInfo);
        if (cameraInfo.facing == CameraInfo.CAMERA_FACING_BACK) {
            m_defaultCameraId = i;
            m_currentCamera = m_defaultCameraId;
        }       
    }

    if (m_numOfCamera < 1) {
        MenuItem switchCam = (MenuItem)findViewById(R.id.menu_switch_camera);
        switchCam.setVisible(false);
    }
}

@Override
public void onPause() {
    super.onPause();
    m_camera.stopPreview();
}

@Override
public void onDestroy() {
    super.onDestroy();
    m_camera.release();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_camera, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(final MenuItem item) 
{
    if (item.getItemId() == android.R.id.home) 
    {
        Intent intent = new Intent(this, MainActivity.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);

        return true;
    } 
    else if (item.getItemId() == R.id.menu_switch_camera)
    {
        if (m_camera != null) {
            m_camera.stopPreview();
            m_camera.release();
            m_camera = null;
        }   

        m_camera = Camera.open((m_currentCamera + 1) % m_numOfCamera);
        m_currentCamera = (m_currentCamera + 1) % m_numOfCamera;

        Camera.Parameters params = m_camera.getParameters();
        List<Camera.Size> sizes = params.getSupportedPreviewSizes();
        Camera.Size size = getOptimalPreviewSize(sizes, m_surfaceWidth, m_surfaceHeight);

        params.setPreviewSize(size.width,  size.height);

        m_camera.setParameters(params);
        setCameraDisplayOrientation(this, m_currentCamera, m_camera);
        m_camera.startPreview();
        try {
            m_camera.setPreviewDisplay(m_surfaceView.getHolder());
        } catch (Exception e) {
            e.printStackTrace();
        }   
        return true;
    }
    return true;
}

public void onPictureTaken(byte[] arg0, Camera arg1) {
    // TODO Auto-generated method stub

}

public void onShutter() {
    // TODO Auto-generated method stub

}

public void surfaceChanged(SurfaceHolder arg0, int format, int w, int h) {
    m_surfaceWidth = w;
    m_surfaceHeight = h;
    Camera.Parameters params = m_camera.getParameters();
    List<Camera.Size> sizes = params.getSupportedPreviewSizes();
    Camera.Size selected = getOptimalPreviewSize(sizes, w, h);

    params.setPreviewSize(selected.width,  selected.height);

    m_camera.setParameters(params);
    setCameraDisplayOrientation(this, m_currentCamera, m_camera);
    m_camera.startPreview();    
}

private static void setCameraDisplayOrientation(Activity activity,
         int cameraId, android.hardware.Camera camera) {
     android.hardware.Camera.CameraInfo info =
             new android.hardware.Camera.CameraInfo();
     android.hardware.Camera.getCameraInfo(cameraId, info);
     int rotation = activity.getWindowManager().getDefaultDisplay()
             .getRotation();
     int degrees = 0;
     switch (rotation) {
         case Surface.ROTATION_0: degrees = 0; break;
         case Surface.ROTATION_90: degrees = 90; break;
         case Surface.ROTATION_180: degrees = 180; break;
         case Surface.ROTATION_270: degrees = 270; break;
     }

     int result;
     if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
         result = (info.orientation + degrees) % 360;
         result = (360 - result) % 360;  // compensate the mirror
     } else {  // back-facing
         result = (info.orientation - degrees + 360) % 360;
     }
     camera.setDisplayOrientation(result);
 }

public void surfaceCreated(SurfaceHolder arg0) {
    try {
        m_camera.setPreviewDisplay(m_surfaceView.getHolder());
    } catch (Exception e) {
        e.printStackTrace();
    }   
}

public void surfaceDestroyed(SurfaceHolder arg0) {
    // TODO Auto-generated method stub

}

private Size getOptimalPreviewSize(List<Size> sizes, int w, int h) {

    final double ASPECT_TOLERANCE = 0.1;
    double targetRatio = (double) w / h;
    if (sizes == null)
        return null;

    Size optimalSize = null;
    double minDiff = Double.MAX_VALUE;

    int targetHeight = h;

    // Try to find an size match aspect ratio and size
    for (Size size : sizes) {
        double ratio = (double) size.width / size.height;
        if (Math.abs(ratio - targetRatio) > ASPECT_TOLERANCE)
            continue;
        if (Math.abs(size.height - targetHeight) < minDiff) {
            optimalSize = size;
            minDiff = Math.abs(size.height - targetHeight);
        }
    }

    // Cannot find the one match the aspect ratio, ignore the requirement
    if (optimalSize == null) {
        minDiff = Double.MAX_VALUE;
        for (Size size : sizes) {
            if (Math.abs(size.height - targetHeight) < minDiff) {
                optimalSize = size;
                minDiff = Math.abs(size.height - targetHeight);
            }
        }
    }

    return optimalSize;
}

} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-05T17:29:31.033

相机预览总是填满`SurfaceView`显示它。如果 的纵横比`m_surfaceView`与相机的纵横比不匹配，则预览将被拉伸。

您需要创建`m_surfaceView`匹配的纵横比。这意味着，您需要从代码创建它，而不是从布局 XML 文件。

您可以在 android 示例项目中找到一个示例项目**APIDemos 。**在项目中有一个名为**`CameraPreview`**. 这个有一个很好的演示，用于在`SurfaceView`. 它有一个类 that ，并从代码中`extends ViewGroup`添加作为它的子项。`SurfaceView`该`onMeasure()`方法已被覆盖以确定 的高度和宽度`SurfaceView`，因此保留了纵横比。看看这个项目，我希望它会很清楚。

[抱歉，我无法在此处发布链接 -[**这**](http://developer.android.com/guide/samples/ApiDemos/index.html)应该是链接，但我发现它已损坏。但是如果您已经安装了带有 Android SDK 的示例项目，您可以在示例中找到该项目。打开一个新的 Android 示例项目，选择 APIDemos，然后查找名为`CameraPreview`. `com.example.android.apis.graphics`据我记得，它应该在包装里。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-21T11:26:39.900

我改变了 onLayout 方法，而不是相机预览没有被拉伸。其余部分与 APiDemo 相同，可在此处找到 sdk/sample/adroid-18。我们的想法是我们只有一些受支持的预览大小，但我们的视图大小可能并不总是与预览大小匹配。所以我采用了更大的预览尺寸然后是我的 imageview 尺寸。这个对我有用。可以帮助某人..

```
@Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        if (changed && getChildCount() > 0) {
            final View child = getChildAt(0);

            final int width = r - l;
            final int height = b - t;

            int previewWidth = width;
            int previewHeight = height;
            if (mPreviewSize != null) {
                previewWidth = mPreviewSize.width;
                previewHeight = mPreviewSize.height;
            }

            // Center the child SurfaceView within the parent.
            if (width * previewHeight < height * previewWidth) {

                final int scaledChildWidth = previewWidth * height
                        / previewHeight;

                left = (width - scaledChildWidth) / 2;
                top = 0;
                right = (width + scaledChildWidth) / 2;
                bottom = height;

                child.layout(left, top, right, bottom);
            } else {
                final int scaledChildHeight = previewHeight * width
                        / previewWidth;

                left = 0;
                top = (height - scaledChildHeight) / 2;
                right = width;
                bottom = (height + scaledChildHeight) / 2;

                child.layout(left, top, right, bottom);
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-21T14:41:37.107

我对过度拉伸相机预览有疑问。在垂直和横向模式下太**拉伸了。**

所以在清单中我添加了 screenOrentation="Portrait"，但它没有帮助，仍然在任何位置重新缩放预览（垂直 - 预览太宽或横向太长）你可以在屏幕上看到这个。我想在三星 ace III 上添加一切都很好，但在 LG Nexus 4 正在**伸展**

```
 package pl.probs.camera.component;

import java.io.IOException;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Context;
import android.graphics.Point;
import android.hardware.Camera;
import android.hardware.Camera.AutoFocusCallback;
import android.hardware.Camera.CameraInfo;
import android.hardware.Camera.Parameters;
import android.hardware.Camera.Size;
import android.util.Log;
import android.view.Display;
import android.view.MotionEvent;
import android.view.Surface;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import pl.probs.lib.debug.L;

public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {
    private static final String TAG = "CameraPreview";
    private static boolean showLogs = true;
    private SurfaceHolder mHolder;
    private Camera mCamera;
    private Context context;
    private Parameters resolution;
    private List<Size> lSuportedPreviewSize;
    private static int cOrientation = 0; // aktualny kat orientacji
    private static boolean cOrientationChanged = false; // Stan orientacji
                                                        // zostal zmieniony
                                                        // wzgledem poprzedniego
    private Display display; // Rozmiar ekranu
    private Point displaySize; // Zmienna przechowuje Rozmiar Ekranu
    private Point optimalPreviewSize;
public CameraPreview(Context context, Camera camera, int resolution) {
    super(context);
    this.optimalPreviewSize = new Point();
    this.context = context;
    this.mCamera = camera;
    setDisplaySize(this.display);
    setFocusable(true);
    setFocusableInTouchMode(true);
    mHolder = getHolder();
    mHolder.addCallback(this);
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    this.resolution = getMinResolution(resolution);
    this.optimalPreviewSize = getOptimalPreviewResolution(this.display);
    Size s = mCamera.getParameters().getPreviewSize(); // Sprawdzenie jaki
                                                        // prewiev ustawiony
}

public Point getOptimalPreviewSize() {
    return optimalPreviewSize;
}

public void surfaceCreated(SurfaceHolder holder) {
    try {
        if (mCamera != null) {
            mCamera.stopPreview();
            mCamera.setPreviewDisplay(holder);
            Size s = mCamera.getParameters().getPreviewSize();
            mCamera.startPreview();
        }
    } catch (IOException e) {
        L.d("Błąd ustawiania podglÄ…du: " + e.getMessage());
    }
}

protected void onPause() {
    // Because the Camera object is a shared resource, it's very
    // important to release it when the activity is paused.
    if (mCamera != null) {
        mCamera.release();
        mCamera = null;
    }
}

public void surfaceDestroyed(SurfaceHolder holder) {
    if (mCamera != null) {
        mCamera.stopPreview();
    }
}

public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    Camera.Parameters setPrevOrientation = mCamera.getParameters();
    if (mHolder.getSurface() == null)
        return;

    try {
        mCamera.stopPreview();
        Size sizeBefore = mCamera.getParameters().getPreviewSize();
        setPrevOrientation.setRotation(setCameraDisplayOrientation((Activity) context, getCameraId(), mCamera));
        // Orientacja Portrait np 640x480 Landscape 480x640
        this.resolution.setPreviewSize(this.optimalPreviewSize.x, this.optimalPreviewSize.y);
        mCamera.setParameters(this.resolution);
        Size sizeAfter = mCamera.getParameters().getPreviewSize();
    } catch (RuntimeException e) {
        L.d("Podgląd nie istnieje");
    }

    try {
        mCamera.stopPreview();
        mCamera.setPreviewDisplay(mHolder);
        mCamera.startPreview();

    } catch (Exception e) {
        L.d("błąd podgladu: " + e.getMessage());
    }
}

@SuppressLint("ClickableViewAccessibility")
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        mCamera.autoFocus(new AutoFocusCallback() {

            @Override
            public void onAutoFocus(boolean success, Camera camera) {
                // do something
            }
        });

    }

    return true;
}

private static int setCameraDisplayOrientation(Activity activity, int cameraId, android.hardware.Camera camera) {
    android.hardware.Camera.CameraInfo info = new android.hardware.Camera.CameraInfo();

    android.hardware.Camera.getCameraInfo(cameraId, info);
    int rotation = activity.getWindowManager().getDefaultDisplay().getRotation();
    int degrees = 0;
    switch (rotation) {
    case Surface.ROTATION_0:
        degrees = 0;
        break;
    case Surface.ROTATION_90:
        degrees = 90;
        break;
    case Surface.ROTATION_180:
        degrees = 180;
        break;
    case Surface.ROTATION_270:
        degrees = 270;
        break;
    }

    cOrientation = degrees;

    int result;
    if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
        result = (info.orientation + degrees) % 360;
        result = (360 - result) % 360; // compensate the mirror
    } else { // back-facing
        result = (info.orientation - degrees + 360) % 360;
    }

    camera.setDisplayOrientation(result);
    return result;
}

private int getCameraId() {
    int cameraId = -1;
    int numberOfCameras = Camera.getNumberOfCameras();
    for (int i = 0; i < numberOfCameras; i++) {
        CameraInfo info = new CameraInfo();
        Camera.getCameraInfo(i, info);
        if (info.facing == CameraInfo.CAMERA_FACING_BACK) {
            cameraId = i;
            break;
        }
    }
    return cameraId;
}

private Parameters getMinResolution(int desireResolutionInMpx) {
    int height[], width[], size;
    float megapixels;
    Camera.Parameters p = mCamera.getParameters();
    size = p.getSupportedPictureSizes().size();
    height = new int[size];
    width = new int[size];
    for (int i = 0; i < size; i++) {
        height[i] = p.getSupportedPictureSizes().get(i).height;
        width[i] = p.getSupportedPictureSizes().get(i).width;
        megapixels = (float) (((float) height[i] * (float) width[i]) / 1024000);
        if (megapixels <= desireResolutionInMpx) {
            p.setPictureSize(width[i], height[i]);
            break;
        }
    }
    return p;
}

private Point getOptimalPreviewResolution(Display displaySize) {
    lSuportedPreviewSize = mCamera.getParameters().getSupportedPreviewSizes();
    Point optimalPreviewSize = new Point();
    int displayWidth = displaySize.getWidth(); // szerokosc ekranu
    int displayHeight = displaySize.getHeight(); // wysokosc ekranu
    int cameraHeight; // wspierana wysokosc kamery
    int cameraWidth; // wspierana szerokosc kamery

    // Lista przechowywujace SupportedPreviewSize kamery, wszyskie
    // rozdzielczosci mniejsze od szerokosc i wysokosci ekranu
    List<Point> lOptimalPoint = new ArrayList<Point>();

    // Pomocniczo do listowania zawartosci listy
    // TODO manta displayHeight cameraHeight brak oraz width brak zgodnosci
    // (
    System.out.println(lOptimalPoint.toString());
    for (int i = 0; i < lSuportedPreviewSize.size(); i++) {
        Log.i(TAG, "w " + lSuportedPreviewSize.get(i).width + " h " + lSuportedPreviewSize.get(i).height + " \n");
    }

    // Wyszukanie wszystkich wysokosci kamery mniejszej od wysokosci ekranu
    for (int i = 0; i < lSuportedPreviewSize.size(); i++) {
        // TODO Uwazaj kamera zapisuje swoj rozmiar dla pozycji landscape
        // gdzie height = 480 a width = 800
        cameraHeight = lSuportedPreviewSize.get(i).width;
        cameraWidth = lSuportedPreviewSize.get(i).height;
        // Porownaj wysokosc ekranu urzadzenia z wysokosci supportedPreview
        // dodaj do listy
        if (displayHeight > cameraHeight) {
            lOptimalPoint.add(new Point(cameraHeight, cameraWidth));
        }
    }

    // Sortowanie rosnaco
    Collections.sort(lOptimalPoint, new ComapreSupportedPreviewByWidth());
    // Ostatni element listy optymalny
    optimalPreviewSize = lOptimalPoint.get(lOptimalPoint.size()-1);

    // Zwracana rozdzielczosc landscape aparatu np (800x600)
    return optimalPreviewSize;
}

private void setDisplaySize(Display display) {
    Activity activity = (Activity) this.context; // Pobierz aktywnosc aby
                                                    // znać rozmiar ekranu

    this.display = activity.getWindowManager().getDefaultDisplay();
}

class ComapreSupportedPreviewByWidth implements Comparator<Point> {

    @Override
    public int compare(Point lhs, Point rhs) {
        return lhs.x - rhs.x;
    }
} 
```

}

[链接到在 Eclipse 中进行的屏幕和项目](https://drive.google.com/folderview?id=0B1mG2OJ1tptwfktFcHdMeWhVRVVHeG1Bek9YNFlPVFpQanlheFl0UGd4UzFGTlBqam04dzQ&usp=sharing)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-04T19:48:19.033

我已经解决了问题。什么可能导致奇怪的相机预览出现问题。

*   状态栏需要空格 - 你可以隐藏它[隐藏状态栏](https://developer.android.com/training/system-ui/status.html)

*   一些空间也采用 TitleBar - 您可以在清单中关闭它

> android:theme="@android:style/Theme.NoTitleBar">

*   将活动方向更改为横向“因为相机预览支持该方向” - 您可以在[API demo](https://play.google.com/store/apps/details?id=com.hmh.api) Graphics->CameraPreview中查看

*   算法比较Display.getWidth()的大小，Camera.getParameters的大小()。getSupportedPreviewSizes (); 如果它们相同，是您在搜索列表时收到的 surfaceChanged 更改 Parametrs.setPreviewSize (x, y) 的函数

* * *

```
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    Camera.Parameters setPrevOrientation = mCamera.getParameters();
    if (mHolder.getSurface() == null)
        return;

    try {
        mCamera.stopPreview();
        Size sizeBefore = mCamera.getParameters().getPreviewSize();
        setPrevOrientation.setRotation(setCameraDisplayOrientation(
                (Activity) context, getCameraId(), mCamera));
        // Orientacja Portrait np 640x480 Landscape 480x640
        this.resolution.setPreviewSize(this.optimalPreviewSize.x,
                this.optimalPreviewSize.y);
        mCamera.setParameters(this.resolution);
        Size sizeAfter = mCamera.getParameters().getPreviewSize();
    } catch (RuntimeException e) {

        L.d("Podgląd nie istnieje");
    }

    try {
        mCamera.stopPreview();
        mCamera.setPreviewDisplay(mHolder);
        mCamera.startPreview();

    } catch (Exception e) {
        L.d("błąd podgladu: " + e.getMessage());
    }
 } 
```

* * *

```
 private Point getOptimalPreviewResolution(Display displaySize) {

        lSuportedPreviewSize = mCamera.getParameters()
                .getSupportedPreviewSizes();
        Point optimalPreviewSize = new Point();
        int displayWidth = displaySize.getWidth();
        int displayHeight = displaySize.getHeight();
        int cameraHeight;
        int cameraWidth;

        List<Point> lOptimalPoint = new ArrayList<Point>();

        for (int i = 0; i < lSuportedPreviewSize.size(); i++) {
            cameraHeight = lSuportedPreviewSize.get(i).width;
            cameraWidth = lSuportedPreviewSize.get(i).height;
            if (displayHeight >= cameraHeight) {
                lOptimalPoint.add(new Point(cameraHeight, cameraWidth));
            }
        }

        // Sort ascending
        Collections.sort(lOptimalPoint,
                new ComapreSupportedPreviewByWidth());
        // Last element is optimal
        optimalPreviewSize = lOptimalPoint.get(lOptimalPoint.size() - 1);

        // Return resolution - camera at landscape mode (800x600)
        return optimalPreviewSize;
    } 
```

* * *

```
 class ComapreSupportedPreviewByWidth implements Comparator<Point> {

    @Override
    public int compare(Point lhs, Point rhs) {
        return lhs.x - rhs.x;
    } 
```

# javascript - Html5 Canvas 旋转单个元素

> ID：12751023
> 
> 赞同：0
> 
> 时间：2012-10-05T17:14:49.750
> 
> 标签：javascript, html, html5-canvas

我知道在 stackoverflow 上已经有很多类似的问题，但我仍然不知道该怎么做。我只想旋转球纹理。用计时器调用draw：

```
var canvas;
var ctx;
var width;
var height;
var ready;
var textures;
var loadIndex;
var loadCount;
var keyCodes;
var mouseLoc;

var playerX;
var playerY;
var playerVelocity;

function init() {
    canvas = document.getElementById('game');
    ctx = canvas.getContext("2d");
    width = canvas.width;
    height = canvas.height;
    textures = [];
    loadingCount = 0;
    keyCodes = [];
    mouseLoc = {};

    playerX = 0;
    playerY = 0;
    playerVelocity = 6;

    textures['Background'] = loadTexture('./textures/Background.png');
    textures['Ball'] = loadTexture('./textures/Ball.png');

    setInterval(function(){ 
        if(loadingCount == 0) {
            update();
            draw();
        }
    }, 50);
}

function update(){
    if(keyCodes[37])
        playerX -= playerVelocity;
    if(keyCodes[38])
        playerY -= playerVelocity;
    if(keyCodes[39])
        playerX += playerVelocity;
    if(keyCodes[40])
        playerY += playerVelocity;
}

function draw() {
    //ctx.clearRect(0, 0, width, height);
    //ctx.beginPath();
    drawBackground();
    drawPlayer();
    //ctx.closePath();
    //ctx.fill();
}

function drawBackground(){
    ctx.drawImage(textures['Background'], 0, 0, width, height);
}

function drawPlayer(){
    ctx.save();
    ctx.rotate(0.17);
    ctx.drawImage(textures['Ball'], playerX, playerY, 100, 100);
    ctx.restore();
}

function loadTexture(src){
    var image = new Image();
    image.src = src;
    loadingCount++;
    image.onload = function(){
        loadingCount--;
    };
    return image;
}

document.onkeydown = function(evt){
    keyCodes[evt.keyCode] = true;
    evt.returnValue = false;
}
document.onkeyup = function(evt){
    keyCodes[evt.keyCode] = false;
}

document.onmousemove = function(evt){
    mouseLoc.x = evt.layerX;
    mouseLoc.y = evt.layerY;
}
document.onmousedown = function(evt){
    mouseLoc.down = true;
}
document.onmouseup = function(evt){
    mouseLoc.down = false;
}

init(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:38:30.127

您只需要保存和恢复画布的状态（状态机）

```
function drawPlayer(){
    ctx.save();
    ctx.rotate(0.17);
    ctx.drawImage(textures['Ball'], playerX, playerY, 100, 100);
    ctx.restore();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:48:44.337

假设您想给出小球*继续*旋转的错觉，您应该为绘制的每一帧增加旋转角度。

如所写，您的代码将在每帧上为球提供 0.17 弧度的*固定*旋转。

```
var frame = 0;

function drawPlayer() {
    ctx.save();
    ctx.rotate(0.17 * frame);
    ...
    ctx.restore();
}

function draw() {
    ++frame;
    drawPlayer();
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T03:48:41.693

您想使用增量时间来计算旋转距离。也就是说，自上一帧以来经过的时间。如果您的浏览器打嗝并在这里或那里丢失帧，这将使您的旋转更平滑。

所以存储每一帧的时间，这样你就可以在帧之间进行比较，并将你的旋转速度设置为每秒弧度。

# c - 当使用更多内存时，C 中的程序崩溃

> ID：12751026
> 
> 赞同：1
> 
> 时间：2012-10-05T17:14:58.387
> 
> 标签：c, memory

我必须在 C 语言中作为一个学校作业小程序来读取标准输入并打印一些标准输出。更具体地说，它是关于读取数字并对其进行排序。

（你可以跳过这个，它只是为了理解代码）输入的第一行应该确定有多少行数字。第二行是下一行数字的数量。第三行是具体数字。第四行是下一行的数字数量，依此类推，直到达到 K 行。限制为 0 < K <= 10（最多 10 个序列），每个序列最多可以包含 10.000.000 个数字，每个数字的值最大为 10.000.000

**示例** 输入：

1.  2 *//这意味着将有2个数字序列（行）及其对应的数量*
2.  3 *//在第一个序列中将有3个数字*
3.  5 99912 45 //第一个序列
4.  6 *//在第二个序列中将有6个数字*
5.  9489498 22131 0 521313 7988956 5 //第二个序列

输出：

0 5 5 45 22131 99912 521313 7988956 9489498

所以我做了一个工作程序，但它似乎不稳定，价值更高。但是我无法确定程序究竟何时何地失败。在我的计算机上，我测试了所有可能的最大值，并在合理的时间内返回了正确的输出，但在完成测试的学校服务器上，它无法处理高值并失败。

有一件事，程序应该只使用 C，而不是 C++，但我不太确定它们之间的区别，因为我使用的是 C++ 编译器，所以我的代码可能不仅仅是原始 C。

我是一个 C 初学者，这对我来说就像“Hello world”，所以请你快速浏览一下代码并说出会导致不稳定的原因吗？谢谢

```
#include <stdio.h>
#include <stdlib.h>

int main(void) {    
    int k, n, i, y, x, index = 0;
    int *numbers = (int*) malloc(100000000 * sizeof(int));
    if(numbers == NULL){
        exit(1);
    }
    scanf("%d", &k);
    for (x = 0; x < k; x++) {
        y = 0;
        scanf("%d", &n);
        while(scanf("%d", &i) > 0){
            numbers[index++] = i;
            if(++y == n){
                break;
            }
        }
    }
    for(y = 0;y < index;y++){   //find and print all 0's, because later I will use 0 as a
                                //already used (printed) element in array and ignore it      
        if(numbers[y] == 0){
            if(y == index-1){
                printf("0");
            }else{
                printf("0 ");
            }
        }
    }
    int smallest, smallestIndex;
    for(x = 0;x < index;x++){   //print all other numbers in ascending order
        smallest = 0;
        for(y = 0;y < index;y++){  //find current smallest number
            if((numbers[y] < smallest || smallest == 0) && numbers[y] != 0){
                smallest = numbers[y];
                smallestIndex = y;
            }
        }
        numbers[smallestIndex] = 0;
        if(smallest > 0){
            if(x == index-1){
                printf("%d", smallest);
            }else{
                printf("%d ", smallest);
            }
        }
    }
    free(numbers);
    numbers = NULL;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:18:50.447

根据您提供的信息，我认为这只是服务器上的资源限制。服务器只是内存不足而您`malloc()`失败了。我建议你调试或这样做：

```
if(numbers == NULL){
    printf("malloc() failed\n");
    exit(1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:00:43.547

打印初始零的代码是可疑的：

```
for(y = 0;y < index;y++){   //find and print all 0's, because later I will use 0 as a
                            //already used (printed) element in array and ignore it      
    if(numbers[y] == 0){
        if(y == index-1){
            printf("0");
        }else{
            printf("0 ");
        }
    } 
```

假设您有一个以 0 作为最后一个元素的序列（例如 1 2 3 4 5 0）；我猜这段代码会打印`0`出来，后面没有空格，后面的代码会打印出来`1 2 3 4 5`，所以你会得到类似`01 2 3 4 5`.

我了解您希望输出尽可能美观，即末尾没有空格。另请注意，`\n`输出末尾的换行符 ( ) 可能很好。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-05T18:48:52.820

我重写了你程序的开始部分，让你走上正确的道路。这应该对您有所帮助，但我不能确定，因为我真的不知道是什么导致您的程序崩溃。

这实现了`realloc`应该使您的程序比现在更加高效的功能。如果您不知道是什么`realloc`，您可以在[此处](http://linux.die.net/man/3/realloc)和[此处](http://www.cplusplus.com/reference/clibrary/cstdlib/realloc/)阅读。

```
#include <stdio.h>
#include <stdlib.h>
#define BUFFER 256                                                  //for memory management         

int main(void) 
{    
    int k, n, i, y , x, index = 0, bff;                             //declare integer 'bff' and set it to BUFFER
    int *numbers = NULL, *tmp;                                      //declare a pointer (numbers) for allocated memory, and a pointer (tmp) for the realloc function

    if(!(numbers = malloc(BUFFER * sizeof(int))))                   //allocate space for 'bff' integers
    {
        exit(1);                                                    //allocation failed
    }
    scanf("%d", &k);
    for (x = 0; x < k; x++) 
    {
        scanf("%d", &n);
        while(scanf("%d", &i) > 0)
        {
            if(bff <= index)                                        //if the size of index grows larger than the amount of space we allocated
            {
                bff += BUFFER;                                      //increase the size of bff by BUFFER
                if(!(tmp = realloc(numbers, bff * sizeof(int))))    //resize our allocated memory block using the tmp pointer 
                {
                    free(numbers);                                      //allocation failed so free already allocated memory
                    exit(1);                                        //and terminate the program
                }
                numbers = tmp;                                      //make numbers point to the same location as tmp
                numbers[index++] = i;                               
                if(++y == n) break;
            }
        }
    }
    .
    .
    .
    free(numbers);
    return 0;
} 
```

请记住，使用 realloc 有更有效的方法。我刚刚在这里发布了这个让你走上正轨。祝你好运！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-05T18:54:16.703

您分配了错误的内存量。规范规定**每个**序列可以包含 1000 万个值，而您分配的数量是固定的。最多可能有**k*1000 万**个输入值，你无法知道你分配的数量是否足够。

正如 m0skit0 所指出的，问题也可能是由于过度分配造成的。

要解决此问题，您应该分配所需的内存量，不多也不少。使用为每个序列提供的序列长度来执行此操作。此外，您需要检查`malloc`and的返回值`realloc`。如果返回值是`NULL`分配失败，您应该打印一条错误消息和`exit`.

# c# - 如何在 C# 中创建可插入的 GUI 和 DLL

> ID：12751030
> 
> 赞同：4
> 
> 时间：2012-10-05T17:15:00.797
> 
> 标签：c#, winforms, pluggable

不确定此处使用的确切术语，因此将不胜感激。

最简单的是，我有一个表单应用程序。当我加载“form.exe”时，表单有一个控件，一个菜单。此菜单有一个菜单项“退出”。我想要的是，在加载表单时，能够将参数传递给这个表单应用程序，这些应用程序指定可以添加专门方法、控件等的 DLL。

现在，当我加载“form.exe add_plugable.dll”时，我的菜单有另一个菜单项“添加”。当我加载“form.exe add_plugable.dll remove_pluggable.dll”时，菜单有 3 个项目“退出”、“添加”和“删除”。

希望这是有道理的。我需要在 Forms 应用程序中包含什么以及如何创建我的 DLL？我知道我需要一个通用接口，但不知道如何使用命名空间、接口和抽象类来实现这一点。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T17:16:37.720

我建议查看[Managed Extensibility Framework](http://msdn.microsoft.com/en-us/library/dd460648.aspx)。它是为这种确切类型的场景而设计的。

例如，Visual Studio 使用它的可扩展性，因此可以在运行时动态发现和插入插件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T17:49:44.020

您可以使用预先编写的框架，但如果您正在寻找“基本”解决方案，请尝试以下操作：

1.  创建一个接口（或一组接口，如果您愿意），其中包含表单应用程序将调用的所有方法，例如`IPlugin`. 将接口放在单独的类库中。
2.  在每个插件 DLL 中，创建一个实现`IPlugin`.
3.  在表单应用程序中，决定加载哪些插件以及何时调用它们。这个逻辑完全取决于你。

像这样加载一个插件，然后调用接口成员来完成你想要的。`app.config`您可以根据您的要求从数据库中读取插件文件和类名，或通过命名约定计算它们。

```
var pluginAssembly = Assembly.Load(pluginFileName);
var plugin = (IPlugin) pluginAssembly.CreateInstance(pluginClassName); 
```

这些方法有几个重载，允许对过程进行更多控制。例如，您可以使用`AssemblyName`而不是简单的字符串来加载插件程序集。实例化类时，您可以指定绑定标志和一组参数值以传递给类的构造函数。

# multithreading - 在 Delphi XE2 的无限等待线程中调用哪个等待方法

> ID：12751031
> 
> 赞同：3
> 
> 时间：2012-10-05T17:15:07.300
> 
> 标签：multithreading, delphi, delphi-xe2

如果我有一个

```
While not terminated do
begin
     doStuff;

end 
```

在 Delphi XE2 线程的执行方法中循环，我不想让它成为我所有的失败者。

我该怎么称呼，

在 Delphi 7 中，这很容易，我会调用 Sleep(X)，其中 X 与我认为线程的有趣程度成反比。

但现在，我有

```
SpinWait(X); 
```

哪个调用 YieldProcessor X 次

和

```
Yield; 
```

它调用windows函数“SwitchToThread”。

我应该使用其中任何一个还是应该只设置线程的优先级？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T17:43:33.367

`SpinWait`浪费时间而不放弃处理器。就像`Sleep`，但在延迟期间没有将控制权交给任何其他线程。如果您没有多个内核，那么这完全是一种浪费，因为在您旋转时没有其他线程可以做任何事情。据我所知，`Yield`类似于`Sleep(0)`，除了如果没有其他线程准备好运行，那么调用线程将立即继续。

如果您知道您的线程确实无事可做，那么这些听起来都不像您想要的。

最好的解决方案是找到或建立一些可等待的对象（如信号量、事件或进程句柄），您可以等待它们发出信号。这样您就不必费心起床了，这样您就可以轮询您的状态并再次入睡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:43:28.177

线程池示例：

```
unit ThreadPool;

    interface

    uses
      Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
      Dialogs, StdCtrls, contnrs, syncobjs;

    type

    TpooledTask=class(TObject)
    private
      FonComplete:TNotifyEvent;
    protected
      Fparam:TObject;
      procedure execute; virtual; abstract;
    public
      constructor create(onComplete:TNotifyEvent;param:TObject);
    end;

    TThreadPool=class(TObjectQueue)
    private
      access:TcriticalSection;
      taskCounter:THandle;
      threadCount:integer;
    public
      constructor create(initThreads:integer);
      procedure addTask(aTask:TpooledTask);
    end;

    TpoolThread=class(Tthread)
    private
      FmyPool:TThreadPool;
    protected
      procedure Execute; override;
    public
      constructor create(pool:TThreadPool);
    end;

    implementation

    { TpooledTask }

    constructor TpooledTask.create(onComplete: TNotifyEvent; param: TObject);
    begin
      FonComplete:=onComplete;
      Fparam:=param;
    end;

    { TThreadPool }

    procedure TThreadPool.addTask(aTask: TpooledTask);
    begin
      access.acquire;
      try
        push(aTask);
      finally
        access.release;
      end;
      releaseSemaphore(taskCounter,1,nil); // release one unit to semaphore
    end;

    constructor TThreadPool.create(initThreads: integer);
    begin
      inherited create;
      access:=TcriticalSection.create;
      taskCounter:=createSemaphore(nil,0,maxInt,'');
      while(threadCount<initThreads) do
      begin
        TpoolThread.create(self);
        inc(threadCount);
      end;
    end;

    { TpoolThread }

    constructor TpoolThread.create(pool: TThreadPool);
    begin
      inherited create(true);
      FmyPool:=pool;
      FreeOnTerminate:=true;
      resume;
    end;

    procedure TpoolThread.execute;
    var thisTask:TpooledTask;
    begin
      while (WAIT_OBJECT_0=waitForSingleObject(FmyPool.taskCounter,INFINITE)) do
      begin
        FmyPool.access.acquire;
        try
          thisTask:=TpooledTask(FmyPool.pop);
        finally
          FmyPool.access.release;
        end;
        thisTask.execute;
        if assigned(thisTask.FonComplete) then thisTask.FonComplete(thisTask);
      end;
    end;

    end. 
```

# sql - 如何删除左侧的任何内容并在字符串中包含特殊字符的第一个实例

> ID：12751034
> 
> 赞同：0
> 
> 时间：2012-10-05T17:15:26.113
> 
> 标签：sql, sql-server, sql-server-2008

执行以下操作的 SQL 语句是什么？有点卡在这里*从头开始

*   139G - 你好世界（快乐档案）
*   140G - 迈克泰森（美国档案）

成为

*   你好世界（快乐档案）
*   迈克·泰森（美国档案）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:19:33.070

```
select substring(Value, charindex(' - ', Value) + 2, len(Value))
from MyTable 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/d9b4a/9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:25:32.793

```
select substring(Value, charindex(' - ', Value) + 2, (len(Value) - charindex(' - ', Value) + 1) ) from MyTable 
```

# python - Openpyxl单元格值未到来

> ID：12751037
> 
> 赞同：1
> 
> 时间：2012-10-05T17:15:38.220
> 
> 标签：python, openpyxl

我来自 Matlab 环境，最近试图深入研究 python。从 excel 中读取是 Matlab 通过创建 COM excel 组件、派生工作簿、然后工作表和范围来完成的更重要的日常工作之一。很高兴看到从工作簿到工作表到单元格/范围的类似方法。

所以，

```
w = openpyxl.load_workbook('D:/ass.csv')
s = w.get_sheet_by_name('Sheet1')
c = s.cell('a2') 
```

最后：`c.value`应该给我价值，并且`c.value = 12`应该分配价值。两者似乎都没有发生。但是，一旦我分配`c.value = 12`，然后进一步调用 c.value 给我 12，尽管基础 csv 没有发生任何变化。

当我尝试这样的事情时，`s.get_highest_column()`我得到了正确的预期答案。`w.get_sheet_names()`也给出了预期的响应。关于可能出了什么问题的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T17:36:20.523

`openpyxl`仅适用于 Excel 2007 和更高版本的格式，文件通常具有扩展名`.xlsx`或`.xlsm`.

如果您想阅读旧`.csv`格式，请使用[CVS](http://docs.python.org/2/library/csv.html)模块。

AFAIK 没有 Python 库可以同时打开`.csv`和更现代的`.xls`resp。`.xlsx`文件。如果您想拥有这种灵活性，您也可以使用 Python 中的 COM 与 Excel 交互。我主要`win32com.client`用于那个，但你也可以使用`comtypes.client`。

# c# - MoonAPNS 在未连接的套接字上不允许操作

> ID：12751042
> 
> 赞同：1
> 
> 时间：2012-10-05T17:15:55.367
> 
> 标签：c#, asp.net, moonapns

我正在使用 Moonapns asp.net 库向苹果设备发送推送通知。

它在我的 64 位操作系统的本地机器上运行良好，但是当我尝试将其部署到具有 64 位操作系统的客户端服务器时，它会出现以下错误，有人指导我可能是什么问题？

**事件簿：**

```
System.InvalidOperationException: The operation is not allowed on non-connected sockets.
   at System.Net.Sockets.TcpClient.GetStream()
   at MoonAPNS.PushNotification.OpenSslStream(String host, X509CertificateCollection certificates)
   at MoonAPNS.PushNotification.Connect(String host, Int32 port, X509CertificateCollection certificates)
   at MoonAPNS.PushNotification.SendQueueToapple(IEnumerable`1 queue)
   at MoonAPNS.PushNotification.SendToApple(List`1 queue)
   at NeoFaceWatchMobileClient.watchservice.Timer_Elapsed(Object sender, EventArgs e) 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:02:05.613

我猜这是由于服务器对 MoonAPNS 正在使用的端口的限制，我询问了网络管理员，他取消了限制并且它起作用了，所以它与我或编程无关，但与服务器无关。

# url-rewriting - 使用 URl 重写向每个 URl 添加 8080？

> ID：12751043
> 
> 赞同：0
> 
> 时间：2012-10-05T17:16:03.410
> 
> 标签：url-rewriting

我有一个像 www.mytest.com 这样的域。现在对于该页面的每个子页面和域本身，我要添加：8080。像这样：

*www.mytest.com/correct.php --> www.mytest.com:8080/correct.php*

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:29:59.700

假设您在 httpd.conf 文件或 VirtualHost 文件中激活（侦听）端口 8080（假设您使用的是 Apache HTTPD 并具有 root 访问权限），则可以使用代理传递反向。如果没有，相信您可以将其放入 .htaccess 中：

```
<VirtualHost *:80>
...
<Proxy *>
AddDefaultCharset Off
Order deny,allow
Allow from all
</Proxy>
ProxyPass / http://www.mytest.com:8080
ProxyPassReverse / http://www.mytest.com:8080
</VirtualHost> 
```

# javascript - 使用新图像进行链接验证

> ID：12751044
> 
> 赞同：0
> 
> 时间：2012-10-05T17:16:04.163
> 
> 标签：javascript, javascript-events

为什么它会给出错误的域？有没有更好的解决方案

```
var domainlerimtek=["bock.com","sok.com","www.google.co.uk","coaskkdak.com"];
for(var i=0;i<domainlerimtek.length;i++)
{
var im = new Image();
im.src = document.location.protocol+"//"+domainlerimtek[i]+"/images/srpr/logo3w.png";
im.onload = function(){alert(im.src);};
} 
```

或者

```
var domainlerimtek=["bock.com","sok.com","www.google.co.uk","coaskkdak.com"];
for(var i=0;i<domainlerimtek.length;i++)
{
var im = new Image();var geci=i;
im.src = document.location.protocol+"//"+domainlerimtek[i]+"/images/srpr/logo3w.png";
im.onerror = function(){alert(geci);};
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:38:15.523

出于某种奇怪的原因

```
 document.location.protocol 
```

正在本地搜索文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:01:54.987

我只能在 Internet Explorer 中重现错误。为了让它在那里工作，我做了两个改变：

1.  删除数组声明中的最后一个逗号： var domainlerimtek=["bock.com","sok.com","www.google.co.uk","coaskkdak.com" **,** ]; // <-- 删除最后一个逗号
2.  将**文档**.location.protocol 更改为**window** .location.protocol

# sql - 带有单引号的sql在where子句中的参数

> ID：12751048
> 
> 赞同：0
> 
> 时间：2012-10-05T17:16:17.860
> 
> 标签：sql, parameters, quotes

我在下面的 sql 中尝试将 name 参数传递给 sql，我该如何追加，我收到语法错误..

我必须@name 代替 steeve

```
if @name not null BEGIN
        set @sql = @sql + ' AND name=''steeve''';
    END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:17:45.723

```
if @name is not null then
BEGIN
    set @sql = @sql + ' AND name=''' + @name + '''';
END 
```

# jquery - jQuery 字符数

> ID：12751056
> 
> 赞同：0
> 
> 时间：2012-10-05T17:17:01.043
> 
> 标签：jquery

我正在[根据这篇文章](https://stackoverflow.com/questions/5371089/jquery-count-characters-in-textarea)进行字符计数。
我想在窗口加载时调用该函数，但似乎有问题，否则一切正常。
任何人都可以帮忙计算负载。
[这是我的小提琴](http://jsfiddle.net/nalagg/PrtXH/)

```
function countChar(val){
    var len = val.value.length;

    if (len >= 500) {
            val.value = val.value.substring(0, 500);
            $('#stat span').text(0);
    }else {
            $('#stat span').text(500 - len);
    }
}

$(function(){
    var inputT = $('#descTextArea').val();
    //countChar(inputT);//this is breaking the code

    $('#descTextArea').keyup(function(){
        countChar(this);
    });

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T17:23:59.077

试试这个

```
function countChar(val) {
    var len = val.value.length;
    if (len >= 500) {
        val.value = val.value.substring(0, 500);
        $('#stat span').text(0);
    } else {
        $('#stat span').text(500 - len);
    }
}
countChar($('#descTextArea').get(0));
$('#descTextArea').keyup(function() {
    countChar(this);
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/PrtXH/1/)**

在您的代码中，您将字符串（值）传递给试图获取元素长度的函数。相反，通过调用`countChar($('#descTextArea').get(0));`您只是传递元素并允许函数按照您的意图查找输入的长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-14T09:32:22.690

这是我写的一个快速简单的 jQuery 插件。您需要做的就是`$("#element_id").jqCounter();`给输入或文本区域一个字符计数器。它响应粘贴、更改和我能想到的所有其他内容。

**您必须设置 maxlength 属性才能使其工作**，即。`<input maxlength=45 />`或者`<textarea maxlength=45></textarea>`

```
<script>
(function($) {
    $.fn.extend({
        jqCounter : function(givenOptions) {
            return this.each(function() {
                var $this = $(this),
                    options = $.extend({
                        divider: "/"    // The diveder character between the count and max
                    }, givenOptions);
                // 0 chars or max count not set or already setup
                if($this.attr("maxlength") <= 0 || $this.hasClass("jqCounter")) return;

                // Add the counter text after the element
                var span= $("<span style=\"font-size:10px;\">"+$this.val().length+options.divider+$this.attr("maxlength")+"</span>")
                .insertAfter($this);

                // Add a class
                $this.addClass("jqCounter")
                // React to keypresses, changes, paste, etc. and change the counter
                .on('focus blur propertychange change input paste keydown keyup keypress', function(){
                    setTimeout(function(){
                        var maxChars = $this.attr("maxlength"),
                            txtLength = $this.val().length;
                        span.text( txtLength + options.divider + maxChars );
                        },
                    1);
                });
            });
        }
    });
})(jQuery);

$(document).ready(function()
{
  // All text areas will have a content counter
  $("textarea").jqCounter();
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T17:22:35.160

使用 $(document).ready() 在窗口加载时绑定事件处理程序，如下所示：

```
$(document).ready(function() {
    $('#descTextArea').keyup(function(){
      countChar(this);
 });
}); 
```

# haskell - Parsec 3.x 的 Data.Text 解析器

> ID：12751059
> 
> 赞同：3
> 
> 时间：2012-10-05T17:17:28.000
> 
> 标签：haskell, parsec

我正在寻找 Data.Text 类型的 Text.Parsec.Char.satisfy 的变体或一些多态替代，具有以下签名：

`satisfy :: Stream s m Text => (Text -> Bool) -> ParsecT s u m Text`

当提供的函数 (Text->Bool) 返回 True 时，任何 Data.Text 都会成功。

我错过了这样的功能还是必须从头开始编写它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T18:28:14.160

Have you somewhere imported `Text.Parsec.String`? Import `Text.Parsec.Text` instead. Then you can use the standard `satisfy`, as hammar says.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T20:00:31.640

这是一个简单的组合器：http://hackage.haskell.org/packages/archive/parsec/3.1.1/doc/html/Text-Parsec-Combinator.html#v `anyToken`: [anyToken](http://hackage.haskell.org/packages/archive/parsec/3.1.1/doc/html/Text-Parsec-Combinator.html#v:anyToken)

# javascript - 远程 html 文件是否可以将文件下载到客户端？

> ID：12751061
> 
> 赞同：1
> 
> 时间：2012-10-05T17:17:41.747
> 
> 标签：javascript, html

我是一名 iOS 开发人员，正在研究将本地 html 页面加载到 UIWebView 中的原生 iPhone 应用程序的某些安全方面（这是为原生应用程序提供浏览器功能的 iOS 类）。

如果应用程序加载本地 html 文件并且该文件包含指向外部 html 文件的链接，那么该外部文件是否可以将文件下载到客户端（另一个 html 文件或 javascript 文件）？我对 html/javascript 的了解在这方面不够详细。

例如，如果`A.html`文件物理存在于手机上并`A.html`包含服务器上`B.html`位置的 href，`B.html`那么（使用任何方式）是否可以`B.html`（使用任何方式）将文件（`C.html`或`D.js`等）从服务器移动到设备上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:53:51.433

您可能的意思是：HTML 页面是否能够在设备上下载（并可能执行或覆盖）内容/代码？我只是假设在下面。

*   首先，未经用户同意，浏览器**不应下载任何内容。**在 iOS 上尤其如此，浏览器实际上根本无法下载任何内容。*（好吧，您实际上可以通过长按来下载图像，但它们只会进入相册。任何其他下载都会失败。）*

*   HTML 页面（和 JavaScript、图像...）当然会在浏览器之前下载到设备或`UIWebView`显示它们，但它们**无法访问文件系统上的任何内容**。

*   更重要的是，由于**同源**策略，网页**无法访问其域之外的任何内容**（*跨域请求*允许这样做，但它们需要服务器发送特定的标头）。

    假设您的页面已打开`http://mywebsite.com`：`http://blah.org`如果设置不正确，甚至（更危险）`file:///etc/passwd`（您无法正确设置），您将无法提出请求。

*   我不确定本地页面，但是（至少在桌面上的 Chrome 上）*本地网页* **根本无法下载任何东西**。

当然，所有这些都是预期的行为。

有一些漏洞（例如[这个](http://www.idownloadblog.com/2012/09/19/iphone-4s-pwn2own/)），其中 Safari 允许对文件系统进行非特权访问，但在大多数情况下，它们已被 Apple 快速修补，您不必（如果您想避免，也不应该这样做）不必要的头痛）担心他们。

# ruby - 在 Ruby 中解析大字符串值

> ID：12751067
> 
> 赞同：0
> 
> 时间：2012-10-05T17:18:03.163
> 
> 标签：ruby, regex, database, string, parsing

我正在使用的字符串示例：

`s = "{new {value1 value2 value3}} {old {value2 value1 value1}} {{old school} {value2 value3 value1}}"`

{} 受空格影响，这就是为什么“old school”被包围而“new”和“old”没有被包围的原因。

解析前两个（新旧）很容易使用`s.split[1]`访问“新”和`s.split[3..5]`值来完成。当“新”或“旧”有空间时，问题就来了，在这种情况下是“老派”。在我正在访问的数据库中，这些带有空格的名称是随机出现的。

我怎样才能改变我的解析来解释这些事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:55:52.133

你不想用正则表达式来解析它，你应该逐个字符地去记住你在括号层次结构中的位置。

这是我的解决方案：http: [//pastebin.com/kLLnS5qB](http://pastebin.com/kLLnS5qB)

（这只是一个粗略的剪辑，有些电话并不是很干，而且缺乏测试。）

```
$ ruby foo.rb 
[#<struct key="new", values=["value1", "value2", "value3"]>, #<struct key="old", values=["value2", "value1", "value1"]>, #<struct key="old school", values=["value2", "value3", "value1"]>] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:13:13.327

你可以用这一行来做到这一点：

```
s.split("}} {").map{|x| x.split(" {")}.map{|x| x.map{|y| y.gsub("{","").gsub("}","")}} 
```

有点难看，但适用于您的示例，返回：

```
[["new", "value1 value2 value3"], ["old", "value2 value1 value1"], ["old school", "value2 value3 value1"]] 
```

然后，您可以通过将值分解为它们自己的对象等来进一步解析 if。如果您希望它作为散列，您可以像这样得到它：

```
Hash[s.split("}} {").map{|x| x.split(" {")}.map{|x| x.map{|y| y.gsub("{","").gsub("}","")}}] 
```

这将返回：

```
{"new"=>"value1 value2 value3", "old"=>"value2 value1 value1", "old school"=>"value2 value3 value1"} 
```

# php - 跨浏览器跨操作系统文件对话框（只能选择目录和文件） 非 Java

> ID：12751068
> 
> 赞同：3
> 
> 时间：2012-10-05T17:18:04.147
> 
> 标签：php, javascript, jquery, file

所以我正在寻找一种打开浏览器文件对话框的方法，并允许用户选择一个目录并让它填充路径，或者选择一个文件或一组（在同一目录中）。这不是Java Applet。有这种对话的方法吗？那能支持IE 7及以上吗？还是我坚持使用 Java 解决方案？

我们目前有一个几年前由某人编写的基于 Java 的解决方案，由于新版本的 Java 的出现，由于操作系统的安全性越来越严格等等，它开始越来越失败。所以我试图找到替代解决方案，希望它更容易维护，不需要（最好）java来做。

我最终只是被困在哪里寻找甚至开始寻找任何正确的方法来做到这一点，如果它首先可能的话。似乎我所做的每一次搜索，都会让我陷入不适用的答案

***编辑*** 我应该强调，这个对话框的唯一目标是让我可以在他们的本地机器上从用户那里获得一个目录和/或文件路径，而无需在完整路径中使用用户密钥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:41:38.343

据我所知，在这种情况下，它只是 Java 或者可能是一些[AIR+Flash 混合](http://www.actionscript.org/forums/showthread.php3?t=186249)，真的。这样做的原因是您需要一些技术来：

*   将您的选择识别为文件或目录
*   从所选目录中读取所有文件和可能的子文件夹
*   将它们排队上传，然后可能能够在服务器端恢复它们的结构

因此，您至少需要可以在本地使用客户端文件结构的东西，以及可以选择在服务器上重新创建相同结构的东西。

编辑：您可能还想检查一下：[Upload a folder in ASP.NET of Flash or Silverlight](https://stackoverflow.com/questions/1542415/upload-a-folder-in-asp-net-of-flash-or-silverlight)

# jquery - 为什么 jQuery '$(document).html(data)' 不刷新页面

> ID：12751069
> 
> 赞同：0
> 
> 时间：2012-10-05T17:18:07.797
> 
> 标签：jquery

怎么没有

```
 $('#submit').click(function(){
        $.post('PHP/script.php', $('#form').serialize(), function(data){
                $(document).html(data);
        });
    }); 
```

在这种情况下，当 script.php 返回时刷新整个页面，例如：

```
echo '<p>Some text</p>'; 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:19:48.810

代替

```
$(document).html(data); 
```

经过

```
$(document.body).html(data); 
```

您无法在不重新加载文档的情况下替换它，只能替换它的内容。

# html - Wordpress 导航 CSS 兼容性问题

> ID：12751071
> 
> 赞同：0
> 
> 时间：2012-10-05T17:18:12.430
> 
> 标签：html, css, wordpress

我刚开始创建客户网站，但是我已经遇到了绊脚石；我正在尝试在 Wordpress 中为导航添加功能区类型外观，但是每当我在导航（即 .menu ul）中添加填充或边距时，在 iPhone 和 iPad 等 iOS 设备上，功能区的右侧都会延伸屏幕比它应该的更远。

知道是什么原因造成的吗？

有问题的网站： http: [//site.n8geeks.com](http://site.n8geeks.com)

编辑：我更改了 .menu ul 的宽度 - 当我添加像素值时出现，它在 iOS 浏览器中的解释不同，但是当我添加百分比值时，它在 iOS 上似乎很好。任何想法为什么会这样？

Edit2：现在的问题是，功能区的顶部没有显示在 iOS 设备的右侧（页面“弯曲”的位）。有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:04:59.680

对于那些将来可能与我有类似问题的人来说，问题在于 Safari 正在采用父包装器并调整其大小以适应屏幕。解决这个问题需要添加一个比 #page 包装器更大的新包装器。

# jquery - HoverIntent 和 Superfish 延迟不起作用

> ID：12751072
> 
> 赞同：1
> 
> 时间：2012-08-07T14:21:37.307
> 
> 标签：jquery

我无法让延迟参数适用于 WordPress 网站的 HoverIntent 和 Superfish。在这里找到的网站：http: [//bit.ly/MJ8KT6](http://bit.ly/MJ8KT6)正在消失，但根本没有使用以下代码提供鼠标移出延迟：

```
<script type="text/javascript">

// initialise plugins
jQuery(function(){
    jQuery('ul#menu-primary-navigation').superfish({
     delay:600
    });
});

</script> 
```

我尝试设置**disableHI: false**以确保 HoverIntent 不会被禁用。作为一个 WordPress 网站，我还使用 wp_enqueue_script 检查了脚本是否正确加载，但同样无济于事。该代码在 HTML 文件中运行良好，因此它必须与 WordPress 有关。我想知道这是否是我忽略的东西。非常感谢任何反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T15:19:37.507

这与 WordPress 无关，与您的 CSS 定义有关。（因此它将作为上面的题外话关闭）。但既然你仍然需要一个答案......

在您的默认样式表中，您将包含子菜单的列表元素定义为：

```
.menu ul li ul.sub-menu {
    position: absolute;
    left: -9999em;
    z-index: 9999;
    width: 200px;
} 
```

这会将菜单完全推离屏幕，这很好。`left: -9999em;`但是您随后使用悬停伪状态覆盖声明：

```
.menu ul li:hover ul {
    left: auto;
} 
```

即使没有安装 Superfish，当您将鼠标悬停在主菜单项上时，这种 CSS 组合也会使子菜单在屏幕上出现和消失。不幸的是，这也意味着当您停止悬停时菜单会立即消失。它仍然被 Superfish 隐藏......它不再出现在屏幕上。

如果您只是`left: -9999em;`从 CSS 中删除声明，则当您将鼠标移离屏幕时，菜单将保持可见，直到计时器达到设置的延迟......然后它就会消失。

# ios - 升级应用以支持 ios5

> ID：12751076
> 
> 赞同：0
> 
> 时间：2012-10-05T17:18:21.727
> 
> 标签：ios, xcode, ios5, ios4

我希望更新一个应用程序以支持 ios5 及更高版本。目前该应用程序支持 ios5 及以下版本，我想知道将构建设置为 ios5 及以上版本对仍在 ios4 上使用 ios4 应用程序的客户有何影响。应用商店会拒绝下载 ios5 及更高版本的应用更新并抱怨用户将他们的操作系统更新到 5 吗？在这种情况下究竟会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:24:30.383

App Store 会简单地拒绝升级应用程序并告诉用户升级到 iOS 5（或 6）。这是标准政策，因此如果您使用的是旧 iOS，您仍然可以使用旧应用程序。

顺便说一句，iOS 5 及更高版本的累计市场份额[超过 90%](http://david-smith.org/iosversionstats/)，因此您不必担心是否支持旧版本。我认识的大多数 iOS 开发者都在继续前进或已经有了。

# javascript - for循环中的javascript函数不会导致浏览器崩溃

> ID：12751077
> 
> 赞同：0
> 
> 时间：2012-10-05T17:18:26.893
> 
> 标签：javascript

我是编码新手，正在试图弄清楚为什么这不起作用。该函数工作正常我假设 sumArray 函数中存在未处理的基本缺陷

```
// SET UP FUNCTIONS FOR LATER USE   

// sumArray - takes all values within an array and adds them 
var sumArray = function(x){
    var sum = 0;
    for(i=0;i<x.length;i++) {
        sum += parseInt(x[i]);
    };
    return sum;     
};

// create an array and use sumArray function inside of a loop.

// This works
var arrayTest = new Array(1,2,3,4,5,6,7,8,9,10);
document.write (sumArray(arrayTest);

// This crashes the browser
for(i=0;i<10;i++){
document.write("<br/>" + sumArray(arrayTest) + "<br/>"); 
}; 
```

提前感谢您的任何见解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T17:19:34.613

您需要使用以下命令声明“i” `var`：

```
for(var i=0;i<10;i++){ 
```

在两个循环中。如果你不这样做，那么两个循环只会破坏一个全局“i”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T17:19:43.490

就在第二个循环之前，您缺少一个`)`.

```
document.write (sumArray(arrayTest) ); // <-- right here 
```

* * *

此外，要非常小心`document.write`. 如果它在文档加载时运行*，*你可能会没事的。确保在文档加载后不要使用它。

# wcf - WCF 更改凭据

> ID：12751078
> 
> 赞同：0
> 
> 时间：2012-10-05T17:18:27.423
> 
> 标签：wcf, impersonation, credentials, basichttpbinding

我有一个 Web 应用程序，它在不同的服务器（Web 服务器、应用程序服务器和数据库服务器）上调用具有多个服务的 WCF Web 应用程序，所有服务都使用 basicHttBinding。其中一项服务必须连接到必须使用活动目录帐户调用的数据库。从网站进来的用户是匿名的。

我已获得将此用户设置为的凭据，但我无法使其正常工作。我在网络服务器上创建我的频道，如下所示：

```
ChannelFactory<T> channelFactory = GetChannelFactoryFromPool<T>(enpointAddress);       
channelFactory.Credentials.Windows.ClientCredential.UserName = username;
channelFactory.Credentials.Windows.ClientCredential.Password = password;
channelFactory.Credentials.Windows.ClientCredential.Domain = domain;
proxy = channelFactory.CreateChannel(); 
```

在应用服务器上的服务中，我试图通过执行以下操作来确定凭据是否正确：

```
var ssc = ServiceSecurityContext.Current; 
```

但 ssc 始终为空。这可以用 basicHttpBinding 完成吗？

谢谢，保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:21:28.400

basicHttpBinding 确实支持 Windows 身份验证，如[这篇优秀的 MSDN 文章中所述。](http://msdn.microsoft.com/en-us/library/ms730088%28v=vs.100%29.aspx)您还需要确保将服务操作配置为[允许模拟客户端凭据](http://msdn.microsoft.com/en-us/library/ms731090%28v=vs.100%29.aspx)以按预期填充安全上下文。

# opengl - GLSL点内盒测试

> ID：12751080
> 
> 赞同：8
> 
> 时间：2012-10-05T17:18:32.490
> 
> 标签：opengl, glsl

下面是一个 GLSL 片段着色器，如果给定的纹理坐标在框内，则输出纹理像素，否则输出颜色。这只是感觉很愚蠢，必须有一种方法可以在不分支的情况下做到这一点？

```
uniform sampler2D texUnit;

varying vec4 color;
varying vec2 texCoord;

void main() {
  vec4 texel = texture2D(texUnit, texCoord);
  if (any(lessThan(texCoord, vec2(0.0, 0.0))) ||
      any(greaterThan(texCoord, vec2(1.0, 1.0))))
    gl_FragColor = color;
  else
    gl_FragColor = texel;
} 
```

下面是一个没有分支的版本，但是感觉还是很笨拙。“纹理坐标夹紧”的最佳实践是什么？

```
uniform sampler2D texUnit;

varying vec4 color;
varying vec4 labelColor;
varying vec2 texCoord;

void main() {
  vec4 texel = texture2D(texUnit, texCoord);
  bool outside = any(lessThan(texCoord, vec2(0.0, 0.0))) ||
                 any(greaterThan(texCoord, vec2(1.0, 1.0)));
  gl_FragColor = mix(texel*labelColor, color,
                     vec4(outside,outside,outside,outside));
} 
```

![这是渲染结果](../Images/8218126873c78730d3c13c2a2c42673b.png)

我将纹素夹在标签为的区域中——在这种情况下，纹理 s & t 坐标将介于 0 和 1 之间。否则，我会在没有标签的地方使用棕色。

请注意，我还可以构建代码的分支版本，在不需要时*不*执行纹理查找。这会比总是执行纹理查找的非分支版本更快吗？也许是时候进行一些测试...

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-11-02T08:58:27.763

使用`step`函数避免分支并获得最佳性能：

```
// return 1 if v inside the box, return 0 otherwise
float insideBox(vec2 v, vec2 bottomLeft, vec2 topRight) {
    vec2 s = step(bottomLeft, v) - step(topRight, v);
    return s.x * s.y;   
}

float insideBox3D(vec3 v, vec3 bottomLeft, vec3 topRight) {
    vec3 s = step(bottomLeft, v) - step(topRight, v);
    return s.x * s.y * s.z; 
}

void main() {
    vec4 texel = texture2D(texUnit, texCoord);

    float t = insideBox(v_position, vec2(0, 0), vec2(1, 1));
    gl_FragColor = t * texel + (1 - t) * color;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-25T01:45:39.237

根据damhat的回答，我实现了一个在矩形内部和外部之间平滑过渡的函数：

```
float inside_rectangle_smooth(vec2 p, vec2 bottom_left, vec2 top_right, float transition_area)
{
    vec2 s = smoothstep(bottom_left, bottom_left + vec2(transition_area), p) -
             smoothstep(top_right - vec2(transition_area), top_right, p);
    return(s.x * s.y);
} 
```

使用“transition_area”参数来调整矩形内部和外部之间的过渡区域的大小。过渡在矩形**内**淡出，而不是在矩形外。还要确保“transition_area”参数小于“bottom_left”和“top_right”之间的距离（在每个维度中）。
我成功地使用此功能在我的引擎中淡化阴影（使用阴影贴图坐标）。

演示： 上图是通过调用生成的：
[![inside_rectangle_smooth(v_texture_coordinate, vec2(0.0), vec2(1.0), 0.1)](../Images/dd9e63b73fb2f41fe2bbf4b77c98c2a6.png)](https://i.stack.imgur.com/72HGR.png)

`inside_rectangle_smooth(v_texture_coordinate, vec2(0.0), vec2(1.0), 0.1)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-18T21:18:51.127

我刚刚发现了这个解决方案。通过[https://github.com/stackgl/shader-school](https://github.com/stackgl/shader-school)

```
bool inBox(highp vec2 lo, highp vec2 hi, highp vec2 p) {
    bvec4 b = bvec4(greaterThan(p, lo), lessThan(p, hi));
    return all(b);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-06T14:36:17.903

**以下是两种可能的实现方式：**

（请对他们的表现发表评论，特别是如果你碰巧对他们进行了基准测试。）

1.  比较是通过一次调用来完成的`step()`：

    ```
    bool rectContainsPoint(vec2 rectBottomLeft, vec2 rectTopRight, vec2 point)
    {
        vec4 pt = vec4(point, -point);
        vec4 r = vec4(rectBottomLeft, -rectTopRight);
        vec4 inside = step(r, pt);
        return all(bvec4(inside));
    } 
    ```

2.  这个看起来简单的实现会更快吗？还是更慢？

    ```
    bool rectContainsPoint(vec2 rectBottomLeft, vec2 rectTopRight, vec2 point) 
    {
        return all(point == clamp(point, rectBottomLeft, rectTopRight));
    } 
    ```

# php - 在贝宝付款期间传递 vars

> ID：12751090
> 
> 赞同：-2
> 
> 时间：2012-10-05T17:19:27.077
> 
> 标签：php, variables, paypal, paypal-ipn

如何在贝宝付款期间传递 vars？我想取回用户的 ID 和商品编号（交易完成后）。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:35:28.383

不幸的是，似乎 api 没有返回我能找到的用户 ID 或电子邮件——但它确实需要你发送它。有一个可以在您自己的数据库中交叉引用的交易编号 - 这是一个链接以供更多阅读。

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APExecutePaymentAPI](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APExecutePaymentAPI)

我建议在您自己的数据库中维护所有客户信息，并且在使用 api 调用时，由于您将立即收到确认，您将知道它是否成功 - 并且可以使用它来触发将相同信息写入您的数据库您刚刚发送，连同回复。

# javascript - IF小框隐藏刷新页面

> ID：12751091
> 
> 赞同：0
> 
> 时间：2012-10-05T17:19:30.463
> 
> 标签：javascript

我在我的页面上使用[TinyBox2](http://sandbox.scriptiny.com/tinybox2/)，我想在 TinyBox 关闭时刷新页面。

我用它来关闭小盒子：

```
window.parent.TINY.box.hide(); 
```

知道调用此函数后如何刷新页面吗？

对不起我的英语不好

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:00:56.300

也许这有点帮助，

```
<script type="text/javascript">
function closeJS(){location.reload();}
</script> 
```

我使用 self 的 closeJS 来在主页之后刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:59:58.543

一种简单（但不好）的方法是（未经测试）：

```
window.parent.TINY.box.hideAndReload = function() {
  this.hide();
  window.location.reload();
} 
```

然后你就可以打电话了`window.parent.TINY.box.hideAndReload()`。但这是一种 hack，所以我不确定你是否应该使用它，而不是绝对确定这是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-14T18:27:46.053

如果有人仍在寻找，一个可行的解决方案是：

```
<script type="text/javascript">
      parent.window.location.reload();
      parent.TINY.box.hide();
 </script> 
```

# jquery - 如何在单击不同元素时切换单个复选框？

> ID：12751096
> 
> 赞同：1
> 
> 时间：2012-10-05T17:19:41.773
> 
> 标签：jquery, checkbox

当我单击 div 元素时，我正在尝试找到一种更清洁、更简单的方法来选中和取消选中复选框。这是我目前使用的代码，可用于检查，但取消检查不起作用。

[http://codepen.io/jimmykup/full/xkoqJ](http://codepen.io/jimmykup/full/xkoqJ)

我知道我所写的内容可以以更快和/或更简单的方式完成，但我不知道如何做。

注意：我正在使用将通过 javascript 插入的复选框。

HTML：

```
<div class="container">

  <input type="checkbox" class="confirm" name="ld_Confirm" id="ld_Confirm"><div class="click-me unchecked">Click here to check the checkbox.</div>

</div> 
```

jQuery：

```
(function() {

$('.click-me').before('<input type="checkbox" class="confirm" name="ld_Confirm" id="ld_Confirm">');

$(".container .click-me.unchecked").click(function() {
  $(".confirm").prop("checked", true);
  $(".click-me").toggleClass("unchecked");
  $(".click-me").toggleClass("checked");
});

$(".container .click-me.checked").click(function() {
  $(".confirm").prop("checked", false);
  $(".click-me").toggleClass("unchecked");
  $(".click-me").toggleClass("checked");
});

})(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:30:22.600

问题是您`click`在文档加载时创建了一个事件处理程序，但是由于您正在切换容器的类，因此处理程序没有绑定到`div`. 换句话说：在加载代码时，没有`div`带有 class 的 s `unchecked`，因此事件处理程序没有绑定到任何东西。

快速的解决方案是使用*事件委托*来动态绑定处理程序：

```
$(".container").on('click','.click-me.unchecked',function() {
    $(".confirm").prop("checked", true);
    $(".click-me").toggleClass("unchecked");
    $(".click-me").toggleClass("checked");
});
$(".container").on('click','.click-me.checked',function() {
    $(".confirm").prop("checked", false);
    $(".click-me").toggleClass("unchecked");
    $(".click-me").toggleClass("checked");
}); 
```

但是，存在更好的方法。`checked`您可以通过将复选框的属性设置为它自己的逆来极大地简化您的代码。通过这样做，您消除了对委托的需求，实际上完全消除了对`checked`和`unchecked`类的需求（假设您没有将它们用于样式或其他脚本）：

```
$(".container").on('click','.click-me',function() {
    $(".confirm").prop("checked", !$(".confirm").prop("checked"));
}); 
```

[http://jsfiddle.net/mblase75/bNkxG/](http://jsfiddle.net/mblase75/bNkxG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:24:31.417

```
$('.click-me').click(function() {
    var checkBoxes = $(".confirm");
    checkBoxes.attr("checked", !checkBoxes.attr("checked"));
}); 
```

从[这里](https://stackoverflow.com/questions/4177159/jquery-toggle-checkboxes-on-off)

您可以随时尝试搜索 google 或 SO ，以获取“jquery toggle checkbox”

以防此 div 在文档加载时不会出现

```
$(document).on( 'click' , '.click-me', (function() {
    var checkBoxes = $(".confirm");
    checkBoxes.attr("checked", !checkBoxes.attr("checked"));
}); 
```

页面加载时是否存在带有“.confirm”类的复选框并不重要，只要在触发此点击时存在

# sql - 使用 AutoIT 连接到远程 SQL Server 时出现问题

> ID：12751102
> 
> 赞同：0
> 
> 时间：2012-10-05T17:20:03.523
> 
> 标签：sql, database, sql-server-2008, autoit, remote-connection

我正在尝试创建一种登录机制，如果凭据正确，您可以通过该机制访问专用网络中的远程 SQL Server 2008 R2 数据库。我打算在我的工作服务器上实现数据库，并在与服务器位于同一子网的客户端上实现这个程序。到目前为止，这是我的代码：

```
Func Login()

   $loginGUI = GUICreate("Login", 250, 150, -1, -1) ; will create a dialog box that when displayed is centered
   GUISetState(@SW_SHOW)
   GUICtrlCreateLabel ( "Input valid credentials to login", 40, 10,-1,-1) 
   GUICtrlCreateLabel ( "Username", 40, 40,-1,-1)
   Local $userInput = GUICtrlCreateInput("", 100, 37, 100, 20)
   GUICtrlSetState($userInput, $GUI_FOCUS)
   GUICtrlCreateLabel ( "Password", 40, 70,-1,-1)
   Local $passwordInput = GUICtrlCreateInput("", 100, 67, 100, 20, $ES_PASSWORD)
   Local $loginButton = GUICtrlCreateButton("Login", 40, 105, 70)
   Local $exitButton = GUICtrlCreateButton("Exit", 130, 105, 70)

   GUISetState()
   ; Run the GUI until the dialog is closed
   While 1
      $msg = GUIGetMsg(1)
      Switch $msg[0]
         Case $loginButton
            $user = GUICtrlRead($userInput)
            $password = GUICtrlRead($passwordInput)
            Global $loginCon = ObjCreate( "ADODB.Connection" )
            With $loginCon
               .ConnectionString =("DRIVER={SQL Server};SERVER=192.168.1.30\SQLEXPRESS;DATABASE=Test;UID="&$user&";PWD="&$password&";")
               .Open
            EndWith
            If ($user ="" and $password="") or @error Then
               MsgBox(48, "Login error", "Connection failed! Wrong Username/Password.")
               GUICtrlSetData($userInput, "")
               GUICtrlSetData($passwordInput, "")
               GUICtrlSetState($userInput, $GUI_FOCUS)
            Else
               $loginCon.Close
               GUIDelete()
               Main()
               ExitLoop
            EndIf
         Case $exitButton
            GUIDelete()
            ExitLoop
         Case $GUI_EVENT_CLOSE
            GUIDelete()
            ExitLoop
      EndSwitch
   WEnd

EndFunc 
```

我还做了以下操作：

1.  使用 SQL Server Management Studio 允许远程连接以及正确用户访问数据库的适当权限。
2.  使用 SQL Server 配置管理器启用 SQL Server Browser 和具有适当配置的 TCP/IP 协议以访问服务器。
3.  创建防火墙入站和出站规则，允许服务器和客户端访问 TCP 端口 1433 和 UDP 端口 1434（以防万一）。
4.  添加`sqlservr.exe`和`sqlbrowser.exe`到防火墙允许的程序列表。
5.  在客户端 PC 上安装了 SQL Server Native Client 2008 R2。

我可以使用服务器 IP 在本地连接到我的数据库，但是在尝试从远程客户端连接到服务器时出现以下错误：

> *err.description 是：[Microsoft][ODBC SQL Server Driver][DBNETLIB]SQL Server 不存在或访问被拒绝。*

奇怪的是，我可以使用`sqlcmd`. 我还必须提到，我目前正在使用我的笔记本电脑来保存我的测试数据库。它的 IP 由 DCHP 服务器从工作中分配，并且始终保持不变。

我的代码不正确还是我必须进行额外的服务器/客户端配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T01:03:01.657

Instead of doing that way I suggest to have client and server written in autoit. Put server to remote computer and make it interact with database locally. Than return what you want to client. This approach is more secure also. [Here is where you can start](http://www.autoitscript.com/forum/topic/98820-tcp-server-client-examples-to-learn-from/)

# objective-c - 无法调整 UIPopupController 显示图像

> ID：12751104
> 
> 赞同：0
> 
> 时间：2012-10-05T17:20:10.027
> 
> 标签：objective-c, ios, ipad, uipopovercontroller

在我的应用程序（下面列出的代码）中，我使用一个弹出框来显示一系列用户可以选择的颜色。这些颜色用于他们在上面完成的绘图的颜色。我正在尝试修改弹出框以相同的方式工作，除了这次我想显示图像（图像作为 png 文件保存在应用程序的文档文件夹中）而不是颜色块。下面列出的是颜色选择器弹出框的工作代码。ColorGrid 是一个 UIview，它包含一个 NSArray 颜色，以及两个 NSUIntegers columnCount 和 rowCount。我试图用 png 文件的 UIImages 以及 UIImageViews 替换颜色数组中的项目，但我无法获得成功的结果（或可编译的结果）。下面列出的是工作代码。

```
- (IBAction)popoverStrokeColor:(id)sender {
StrokeColorController *scc = [[[StrokeColorController alloc] initWithNibName:@"SelectColorController" bundle:nil] autorelease];
scc.selectedColor = self.strokeColor;
[self doPopoverSelectColorController:scc sender:sender];
}

- (void)doPopoverSelectColorController:(SelectColorController*)scc sender:(id)sender {
  [self setupNewPopoverControllerForViewController:scc];
  scc.container = self.currentPopover;
self.currentPopover.popoverContentSize = scc.view.frame.size;

 scc.colorGrid.columnCount = 2;
 scc.colorGrid.rowCount = 3;

scc.colorGrid.colors = [NSArray arrayWithObjects:
                     //put the following below back in after testing
                      [UIColor blackColor],
                      [UIColor blueColor],
                      [UIColor redColor],
                      [UIColor greenColor],
                      [UIColor yellowColor],
                      [UIColor orangeColor],

                      //[UIColor purpleColor],
                     // [UIColor brownColor],
                     // [UIColor whiteColor],
                     // [UIColor lightGrayColor],
                      //[UIColor cyanColor],
                      //[UIColor magentaColor],

                      nil];
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(colorSelectionDone:) name:ColorSelectionDone object:scc];

[self.currentPopover presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; //displays the popover and anchors it to the button
} 
```

谢谢你的帮助。我是objective-c的新手。

编辑 - 这是我尝试插入图像而不是颜色的功能

```
- (void)doPopoverSelectColorController:(SelectColorController*)scc sender:(id)sender {
[self setupNewPopoverControllerForViewController:scc];
scc.container = self.currentPopover;
self.currentPopover.popoverContentSize = scc.view.frame.size;

// these have to be set after the view is already loaded (which happened
// a couple of lines ago, thanks to scc.view...
scc.colorGrid.columnCount = 2;
scc.colorGrid.rowCount = 3;

//here we need to get the UIImage items to try to put in the array.
NSArray *pathforsave = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentDirectory = [pathforsave objectAtIndex:0];
//here we need to add the file extension onto the file name before we add the name to the path
//[fileName appendString:@".hmat"];
NSString *strFile = [documentDirectory stringByAppendingPathComponent:@"test.png"];
NSString *strFile1 = [documentDirectory stringByAppendingPathComponent:@"test1.png"];
NSString *strFile2 = [documentDirectory stringByAppendingPathComponent:@"test2.png"];
NSString *strFile3 = [documentDirectory stringByAppendingPathComponent:@"test3.png"];
NSString *strFile4 = [documentDirectory stringByAppendingPathComponent:@"test4.png"];
NSString *strFile5 = [documentDirectory stringByAppendingPathComponent:@"test5.png"];

//now for the Images
UIImage *image = [ UIImage imageWithContentsOfFile: strFile];
UIImage *image1 = [ UIImage imageWithContentsOfFile: strFile1];
UIImage *image2 = [ UIImage imageWithContentsOfFile: strFile2];
UIImage *image3 = [ UIImage imageWithContentsOfFile: strFile3];
UIImage *image4 = [ UIImage imageWithContentsOfFile: strFile4];
UIImage *image5 = [ UIImage imageWithContentsOfFile: strFile5];

UIImageView *imageview = [[[UIImageView alloc] initWithImage:image] autorelease];
[self.view addSubview:imageview];
UIImageView *imageview1 = [[[UIImageView alloc] initWithImage:image1] autorelease];
[self.view addSubview:imageview1];
UIImageView *imageview2 = [[[UIImageView alloc] initWithImage:image2] autorelease];
[self.view addSubview:imageview2];
UIImageView *imageview3 = [[[UIImageView alloc] initWithImage:image3] autorelease];
[self.view addSubview:imageview3];
UIImageView *imageview4 = [[[UIImageView alloc] initWithImage:image4] autorelease];
[self.view addSubview:imageview4];
UIImageView *imageview5 = [[[UIImageView alloc] initWithImage:image5] autorelease];
[self.view addSubview:imageview5];

imageview.image = image;
imageview1.image = image1;
imageview2.image = image2;
imageview3.image = image3;
imageview4.image = image4;
imageview5.image = image5;

scc.colorGrid.colors = [NSArray arrayWithObjects:
// When attempting to add the images like this - get the error identified expected 
// after the e in image, at the end bracket. Putting a * does nothing to change the error
[image],

// When adding one of the Imageviews, i get the same error as above 
//below is how I attempted to add it
[imageView],

// 

                      nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(colorSelectionDone:) name:ColorSelectionDone object:scc];

[self.currentPopover presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; //displays the popover and anchors it to the button
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:28:55.690

删除 image 和/或 imageView 周围的方括号：

```
scc.colorGrid.colors = [NSArray arrayWithObjects:
// Not : [image] but
 image,
// or
imageView,
// Not : [imageView],
 nil]; 
```

# ruby - 如何从 rake 任务中访问命名空间？

> ID：12751107
> 
> 赞同：2
> 
> 时间：2012-10-05T17:20:15.440
> 
> 标签：ruby, rake, rake-task

我的 rake 任务（rake v 0.9.2.2）包含一些打印任务名称的功能。我希望它也打印它的名称空间。有点像以下：

```
namespace :yelp do
    desc "..."
    task :scrape => :environment do
        puts "rake #{task.namespace}:#{task.name}"
    end
end 
```

问题是这`namespace`是一个私有方法。

```
rake aborted!
private method `namespace' called for <Rake::Task  => []>:Rake::Task 
```

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:28:17.217

`task.name`包括命名空间。使用[此技巧](https://stackoverflow.com/a/8781522/1167833)在`task.name`rake 0.9.2.2 下进行打印。

# python - 在 Python 中，如何在打印函数中显示方程的值？

> ID：12751111
> 
> 赞同：0
> 
> 时间：2012-10-05T17:20:26.623
> 
> 标签：python

这是我的代码，在 Python 中：

```
x=float(raw_input('How many total orders have accumulated: '))
y=float(raw_input('How many units are in the inventory: '))
z=float(raw_input('How many accumulated orders have you placed: '))
print 'order (x/25)+(y/10)+(z/25) units' 
```

我知道单行代码很长，但我希望它像程序一样按顺序执行。不是一步一步的，你必须输入代码才能进行下一步。我写这篇文章是为了给一个同事复制和粘贴，并且能够运行这个方程成百上千次而不用每次都写出方程。

请注意，代码的第一部分工作正常，问题仅在于代码的最后一部分。该行末尾的打印命令是：

```
print 'order (x/25)+(y/10)+(z/25) units' 
```

如何正确设置语法，以便显示该方程的值，而不仅仅是显示方程本身？

我对编程非常陌生，仅将其用作加快其他工作的工具。我不熟悉术语，所以我很难找到这个问题的信息。我搜索了谷歌和堆栈交换，但找不到任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T17:23:10.310

使用 分隔各种元素`comma(,)`，这将连接它们..在评估存在的任何表达式之后..

因此，将评估您的表达式，然后将获得的值与它之前和之后的字符串连接起来，使用`comma(,)`..

** 编辑： - 实际上，你不需要那些括号..

```
print 'order:', x/25 + y/10 + z/25 ,' units' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T17:34:07.823

@Rohit 答案的替代方法是使用[字符串格式](http://docs.python.org/library/stdtypes.html#string-formatting)：

```
print 'order %s units' % (x / 25 + y / 10 + z / 25) 
```

或使用较新的[`str.format()`](http://docs.python.org/library/stdtypes.html#str.format)方法：

```
print 'order {0} units'.format(x / 25 + y / 10 + z / 25) 
```

* * *

**编辑**：为了更好的可读性，包括我对整数除法的评论。

根据您的 Python 版本，使用除以两个整数`/`可能无法达到您的预期。

在 3.x 之前的 Python 版本中，两个整数相除的结果也总是一个整数（向下舍入，称为“地板除法”）。

```
Python 2.7.2 (default, Oct 30 2011, 13:00:18)
>>> 5 / 2
2 
```

所以`5 / 2 == 2`。如果要进行“真正的除法”，则需要先将其中一个参数转换为浮点数：

```
Python 2.7.2 (default, Oct 30 2011, 13:00:18) 
>>> 5 / 2.0
2.5
>>> 5 / 2.0 == 2.5
True 
```

在 Python 3.0 中，`/`操作符的行为发生了变化：

```
Python 3.2.2 (default, Apr 15 2012, 16:59:18) 
>>> 5 / 2
2.5 
```

转换为浮点数可以使用`float(i)`.

有关所有详细信息、原因和阅读内容`from __future__ import division`，请参阅[PEP238](http://docs.python.org/release/2.2.3/whatsnew/node7.html)和[本文](http://www.informit.com/articles/article.aspx?p=1439189)例如。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-12T08:41:50.173

我看到您使用的是 Python 2，因为 Python 3 需要括号用于 print 语句，例如`print()`.

我强烈建议您继续使用 Python 3，因为它是最新版本，不再支持和更新 Python 2。至少在撰写本文时，最新版本的 Python 是 Python 3.9.2 。

就像@Lukas Graf 所说，您可以使用字符串格式。Python 3.6 及更高版本的好处是`f-strings`. 它就像`str.format()`但甚至更好。要使用`f-strings`，您可以在字符串前面加上an `f`，然后用花括号( `{}`)将实际代码括起来。

```
print(f'order {(x / 25) + (y / 10) + (z / 250)} units') 
```

希望这可以帮助。（我知道，我迟到了 9 年）

# javascript - ExpressionEngine中使用CSS动态改变页脚位置的策略

> ID：12751114
> 
> 赞同：0
> 
> 时间：2012-10-05T17:20:40.743
> 
> 标签：javascript, css, html, css-position

所以使用ExpressionEngine，我可以使用相同的模板生成很多不同内容的网页。我的问题是我无法让页脚出现在我希望它出现的位置：在每个单独网页的背景图像的底部。

例如，假设我的一个页面是关于狗的，另一个是关于猫的。我喜欢狗，所以我写了两段关于狗的文章，而只写了一段关于猫的文章。我希望背景图像增长并且页脚相对定位在背景图像的底部。我曾尝试在 css 中弄乱相对定位和绝对定位，但是在我为“狗”页面正确定位的那一刻，它搞砸了“猫”页面的格式。我也尝试过调整背景图像的高度。

我错过了什么吗？也许有一种更简单的方法可以将一个对象相对于我不知道的 css 中的另一个对象定位？提前致谢。

正如我之前提到的，这并没有达到我想要的结果：

```
#landing_details {
position: relative;
bottom: -20px;
left: 40px;
height: 900px;
}

#belowTitle {
position: relative;
bottom: 25px;
}

#landingBodyCopy {
width: 400px;
position: relative;
bottom: -50px;
 }

#landing_footer {
position: relative;
left: 120px;
bottom: -105px;
 } 
```

它们都嵌套在一个 div id="wrapper" 中，我从未在我的 css 中引用它。着陆细节是每个条目的变化。此外，landing_footer div 保存在landing_details div 中。

更新： ![正确的页脚](../Images/aea2c94d37a640584e6a12ba9ff45e59.png)

![页脚不正确](../Images/ba79229ba450fc8084f9f426d44d8ea8.png)

*   所以我用红色突出显示的部分代表我想从页面中删除的空间。

更新：基本的html布局如下

```
{exp:channel:entries channel="landing_pages" url_title="{segment_2}" sort="asc" disable="categories|pagination"}

    <div id="wrapper">

<link rel="stylesheet" type="text/css" media="all" href="{stylesheet='in-store-analytics/LandingBodyStyle'}" />
    <div id="landing_details">

        <h3 class="LandingHeader"> {landing_page_header} </h3>
        <div id="belowTitle">
            <h4 class="LandingSubTitle"> {landing_page_sub_title} </h4>
                <div id="landingBodyCopy">
                    <div class="landingBodyCopyText"> {landing_body_copy} </div>
                </div>

            <div id="landing_footer">

                        {embed="embed/footer"}
            </div> <!-- End of landing footer>
        </div> <!--- End of below title-->
        </div> <!-- End of the landing details -->

         </div> <!-- END div wrapper -->

{/exp:channel:entries} 
```

再次感谢，任何有关此事的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:02:53.473

如果你没有绝对定位你的页脚，它的默认位置值将是`static`，这意味着它会自然地出现在任何静态或相对定位的前面元素的下方（“在底部”，就像你要求的那样），无论有多少可能，不管它们有多大。

对于根据内容长度增长的背景图片，任何没有明确设置高度的div都会根据其内容的大小进行扩展。因此，您关于狗的两段内容 div 将大于关于猫的单段页面。如果内容 div 上有背景图像，则该 div 将充当一个窗口，根据其大小显示部分背景。更多内容 -> 更大的内容 div -> 显示更多背景图像。这可能不是让背景图像“增长”的意思，但它确实有效地增长。

如果您想对 bg 图像执行某种动态缩放，您应该更具体地说明您希望它如何工作，因为我只是在猜测您的意图。同样，如果您可以使用 jsFiddle 或 jsbin*提供渲染*页面的准系统版本，它将帮助人们回答您。隔离您需要帮助的布局部分并对其进行模拟。

# ruby - 一种指定和初始化地图值类型的方法？

> ID：12751120
> 
> 赞同：1
> 
> 时间：2012-10-05T17:21:25.767
> 
> 标签：ruby, map, initialization

我想计算一行文本中的所有单词。我正在使用地图来执行此操作，其中键表示单词，值表示整数。我不知道如何告诉 Ruby 所有的值都是整数。它迫使我在我的迭代器块中放置一个丑陋的分支：

```
# in the constructor
@individual_words = {}

def count_words_from( text_line )
  text_line.each do |line|
    line.scan(/\p{Word}+/)
    .reject{ |string| string =~ /\d/ }
    .each do |word|
      if @individual_words[ word ] == nil then   # This is ugly
        @individual_words[ word ] = 1            # This is ugly as well
      else
        @individual_words[ word ] += 1
      end
    end
  end
end 
```

简单来说，我想做这样的 Java 行：

```
Map<String, Integer> individualWords; 
```

以避免必须将单词第一次出现的类型从 更改`Nil`为`Integer`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T17:29:20.077

您可以像这样在哈希中设置默认值：

```
individual_words = Hash.new(0) 
```

那么当你遇到一个词时，无论它的键是否在哈希中，你所要做的就是：

```
individual_words[word] += 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:32:05.237

你也可以做这样的事情

```
@individual_words[word] ||= 0
@individual_words[word] += 1 
```

`||=`确保值在不真实的情况下被设置（即 nil）

# php - 如何使用 ajax 使用 jquery 提交 post 数据？

> ID：12751123
> 
> 赞同：0
> 
> 时间：2012-10-05T17:21:40.257
> 
> 标签：php, codeigniter, jquery

我无法让 ajax 与 jquery 和 codeigniter 一起使用。我已经遵循了多个教程，但似乎没有任何效果。我正在尝试实现一个投票按钮，该按钮使用 ajax 发送帖子数据以插入数据库。任何帮助深表感谢。

我认为的代码：

```
<pre>
<?php foreach($query->result() as $row): ?>
<div>
<form action="" method="post">
<input type="hidden" name="story_id" value=<?php echo $row->id; ?>>
<input type="submit" name="story_id" class="button" id="submit_btn" value=<?php echo      $row->id;?>>
</form>
</div>
<?php endforeach; ?>
</pre> 
```

我正在使用的 jquery 脚本：

```
<pre>
<script type="text/javascript">
$(document).ready(function(){
$(".button").click(function(){
    var form_data = {
        story_id: $(this).val()
    };
    $.ajax({
        url: "<?php echo base_url('cyoa/upvote'); ?>",
        type: 'POST',
        data: form_data,
        success: function() 
            {
            $("#upvote").hide();
            }
    });
    return false;
});
});

</script>
</pre> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:28:04.133

最好的方法是序列化您的表单数据并将其发送到服务器：

```
<script type="text/javascript">
$(document).ready(function(){
  $(".button").click(function(){
    var form_data = $("#myform").serialize();
    $.ajax({
        url: "<?php echo base_url('cyoa/upvote'); ?>",
        type: 'POST',
        data: form_data,
        success: function() 
            {
            $("#upvote").hide();
            }
    });
    return false;
  });
});

</script> 
```

要访问表单，请给它一个 id：

```
<form id="myform" action="" method="post"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T10:31:06.563

尝试使用 json 对象，

看法....

```
<pre>
<?php foreach($query->result() as $row): ?>
<div>
<form action=" controller_name/upvote" method="post">
<input type="hidden" name="story_id" id = "story_id" value=<?php echo $row->id; ?>>
<input type="submit" name="story_id" class="button" id="submit_btn" value=<?php     echo      $row->id;?>>
</form>
</div>
<?php endforeach; ?>
 </pre> 
```

然后你的控制器，

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Controller_name extends CI_Controller {

function __construct()
{
    parent::__construct();

    //loading libraries
    $this->load->helper(array('form','url'));

    $this->load->library('form_validation');

}
//##############################################################################
    function upvote(){

    //setting validation rules
    $this->form_validation->set_rules('story_id', 'story Id', 'required|xss_clean');

    if ($this->form_validation->run() == true){

        //if validations ok, send the  data to  database
        $this->load->model('your_model');

        $params = ($this->input->post('story_id');

        $query = 'INSERT INTO table_name (story_id) VALUES(?)';
        $result = $this->your_model_name->method_name($query,$params);

        echo '{"validation_result": "passed"}';

    }
    else{
        $output = '{"story_id":"'.form_error('story_id').'"}';

        echo $output;
        }

}
}
?> 
```

然后你的java脚本文件

```
$(document).ready(function(){
$('#submit_btn').live('click',function(){

    var form_data = {
                    $story_id: $('#story_id').val()
                };

                $.ajax({
                    type: "POST",
                    url: baseurl+"controller_name/upvote",
                    dataType: "json",
                    data : form_data,
                    success: 
                        function(data){

                            if(data.validation_result == "passed"){

                                $("#upvote").hide();

                            }
                            else{
                                //form_validation errors
                                }
                        }
                    });

        return false;   
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T17:23:21.160

我强烈建议看看这个插件（并使用它）：

[jQuery 表单插件](http://www.malsup.com/jquery/form/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T17:27:09.403

您可以使用表单序列化将数据传递给 php，如下所示

首先给你的表单标签ID“storyform”

```
$.ajax({
        url: "<?php echo base_url('cyoa/upvote'); ?>",
        type: 'POST',
        data: $("#storyform").serialize(),
        success: function() 
            {
            $("#upvote").hide();
            }
    }); 
```

# sql - 将两个选择查询连接在一起

> ID：12751126
> 
> 赞同：0
> 
> 时间：2012-10-05T17:21:50.167
> 
> 标签：sql, sql-server-2005

我有两个选择查询需要合并....

```
 SELECT [DatapointID]
  ,[AssetID]
  ,[DatapointID]
  ,[SourceTag]
  ,'-' + [TimeStep] + [TimeStepValue] AS TimeStep
  ,[DataRetrievalInterval] + [DataRetrievalIntervalValue] AS [RetInterval]
  ,NULL AS DatapointDate
  ,NULL AS DatapointValue
  ,0 As DataFlagID
  ,DateADD(-1, d @SearchDateEnd) + @SearchTimeEnd DateDataGrabbed
  ,GetDate() DateTimeAddedtoDB
FROM [dbo].[tblTSS_Assets_Datapoints]
Where AssetID = 204     

Select DatapointDate, SUM(DataPointValue) as DataPointValue From @temp
GROUP BY DatapointDate
ORDER BY DatapointDate 
```

第一个选择查询是我想要的最终结果，而不是 NULL 作为 DatapointDate 和 DatapointValue 我想要来自 @temp 的值

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:35:06.587

连接将组合两个表中的值。在这种情况下，没有明显的连接键，所以你会有一个交叉连接：

```
SELECT [DatapointID], [AssetID], [DatapointID], [SourceTag],
       '-' + [TimeStep] + [TimeStepValue] AS TimeStep,
       [DataRetrievalInterval] + [DataRetrievalIntervalValue] AS [RetInterval],
       d.DatePointDate, d.DatapointValue,
       0 As DataFlagID,
       DateADD(-1, d @SearchDateEnd) + @SearchTimeEnd DateDataGrabbed,
       GetDate() DateTimeAddedtoDB
FROM [dbo].[tblTSS_Assets_Datapoints] cross join
     (Select DatapointDate, SUM(DataPointValue) as DataPointValue From @temp
      GROUP BY DatapointDate
     ) d
Where AssetID = 204 
```

但是，这将增加行数，每个日期一个。您是否有选择其中一行的特定规则？

# html - 类似于 HTML5/CSS3 的软件 UI 设计？

> ID：12751130
> 
> 赞同：2
> 
> 时间：2012-10-05T17:22:31.260
> 
> 标签：html, css, user-interface

当我为 Web 构建用户界面时，我喜欢 HTML5/CSS3 为我提供的灵活性。这些技术让我可以相当快速地创建丰富的网站原型，并且与桌面不同，我可以轻松地为按钮等 UI 元素设置皮肤。

到目前为止，我还无法在桌面上复制这种体验。在几年的时间里，我使用过 Visual C#、Qt（使用 Qt Creator）和 Java Swing，但对于相同的设计任务，它们都需要更多的工作。

是否有一个 GUI 工具包，可能与具有 UI 设计能力的 IDE 相结合，可以复制 HTML5/CSS3 体验的易用性和灵活性？有没有办法将类似 CSS 的规则应用于 C#、Qt、Java Swing 或其他 GUI？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T06:20:22.750

对于 HTML5 / CSS3 UI 设计，我一直在使用[kendoui](http://www.kendoui.com/)和[twitter bootstrap](http://twitter.github.com/bootstrap/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T06:48:39.147

WPF（Windows Presentation Foundation）是一种可能。这是 .net 3.5 中的新功能。它不使用 HTML5/CSS。但这是最接近您所描述的内容的想法。我会提到我所知道的，老实说这并不多。

我知道它不使用 HTML5/CSS，但构建应用程序的技术是相似的，因为您使用类似 XML 的结构（他们称之为 XAML）创建 UI。这将您的 UI 与后端代码分开，类似于您构建网站的方式。

使用 WPF，您可以利用 Directx 的强大功能为您的应用程序提供媒体、可换肤的用户界面、3D 动画和屏幕转换等。简而言之，我知道它允许您自定义 UI，远远超过典型的将使用 .net 框架开发的 windows 窗体应用程序。

这是 WPF 应用程序的示例屏幕截图...

![在此处输入图像描述](../Images/e50911091d6e490e9cc1a67ffb5e6b30.png)

如果这是您尚未研究过的东西，我认为值得一试。希望这会有所帮助。

# jquery - 如何绕过 Chrome 扩展的 iframe 的同源策略？

> ID：12751135
> 
> 赞同：0
> 
> 时间：2012-10-05T17:22:39.583
> 
> 标签：jquery, iframe, google-chrome-extension, cross-domain, same-origin-policy

> **可能重复：**
> [从 chrome 的扩展内容脚本访问 iframe 内容](https://stackoverflow.com/questions/11325415/access-iframe-content-from-a-chromes-extension-content-script)

我正在尝试通过 Chrome 扩展来操作网页上 iframe 的一部分。

每次我这样做时，我都会收到“不安全的 JavaScript 尝试使用 URL 访问框架”错误。 [阅读 Chrome 扩展文档，看来我应该能够](http://developer.chrome.com/extensions/xhr.html#requesting-permission)在 manifest.json 中请求执行此操作的权限。但我所做的一切似乎都不允许我这样做。

我的清单.json：

```
{
  "name": "Manipulate an iframe",
  "description": "Test to manipulate an iframe",
  "version": "1.0",
  "background": { "scripts": ["background.js"] },

  "permissions": [
    "tabs", 
    "http://*/",
    "https://*/",
    "<all_urls>"
  ],
  "browser_action": {
    "name": "Modify iframe",
    "icons": ["icon.png"]
  },
  "manifest_version": 2
} 
```

我的背景.js：

```
chrome.browserAction.onClicked.addListener(function(tab) {
  chrome.tabs.executeScript(null, { allFrames:true, runAt:"document_end", file: "jquery-latest.min.js" }, function() {
    chrome.tabs.executeScript(null, { allFrames:true, runAt:"document_end", file: "content-script.js" });
  });
}); 
```

我的内容-script.js：

```
$('.container').css('width','98%');
$('#myPage iframe').contents().find('#code').unwrap() 
```

当我单击扩展按钮时，容器的大小已正确调整，但我无法触摸 iframe。在我看来，我已经授予了所有权限，那么我还需要在其他地方指定权限吗？

编辑 ：

我发现这个答案有助于理解 Chrome 扩展程序中不同类型的脚本：[https ://stackoverflow.com/a/9916089/1698152](https://stackoverflow.com/a/9916089/1698152)

标记的重复答案：[从 chrome 的扩展内容脚本访问 iframe 内容](https://stackoverflow.com/questions/11325415/access-iframe-content-from-a-chromes-extension-content-script)足以回答我的问题。

我没有尝试通过 tabs.executeScript 将内容脚本注入所有帧，而是通过在清单中定义它们将内容脚本注入所有帧。然后，我可以通过消息传递从后台页面脚本调用这些脚本中的函数。

但是，我仍然不明白为什么这与我已经在做的有任何不同。

# actionscript-3 - AS3 - 如何关闭 tcp 连接？

> ID：12751136
> 
> 赞同：1
> 
> 时间：2012-10-05T17:22:41.557
> 
> 标签：actionscript-3, httpconnection

尽管使用 close() 方法关闭了 URLLoader 实例，但 AS3 程序仍保持连接打开。加载数据后有什么方法可以立即关闭连接吗？

使用 netstat 命令从命令行检查连接状态，它显示为 Eshtablished。

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:01:49.803

URLLoader 是一个 HTTP 包装器。你必须使用 HTTP 的东西来完成它。**为了关闭连接，您必须将`Connection: close`HTTP 标头与网络服务器响应一起发送。**（请注意，大多数网络服务器的默认设置是`Connection: Keep-Alive`，这是您看到的行为）。

为了将它从 Flash 发送到服务器，您必须拥有沙箱`local-trusted`或 `AIR application`沙箱。在浏览器（在互联网上）中运行时这是不可能的。

从[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLRequestHeader.html)：

在 Flash Player 和应用程序安全沙箱之外的 Adob​​e AIR 内容中，**不能使用以下请求标头**，并且受限术语不区分大小写（例如，Get、get 和 GET 均不允许使用）。此外，如果使用下划线字符（例如，Content-Length 和 Content_Length 都不允许），则适用连字符：

接受字符集，接受编码，接受范围，年龄，允许，允许，授权，收费，连接，**连接**，内容长度，内容位置，内容范围，Cookie，日期，删除，ETag，期望，获取、头、主机、If-Modified-Since、Keep-Alive、Last-Modified、位置、Max-Forwards、选项、来源、发布、代理验证、代理授权、代理连接、公共、放置、范围、 Referer、Request-Range、Retry-After、Server、TE、Trace、Trailer、Transfer-Encoding、Upgrade、URI、User-Agent、Vary、Via、Warning、WWW-Authenticate、x-flash-version。

# java - 如何为小型 Java 程序获取 Web 界面？

> ID：12751139
> 
> 赞同：3
> 
> 时间：2012-10-05T17:22:50.847
> 
> 标签：java, html, webserver, embeddedwebserver

实际上，我有一个 Java 应用程序作为守护程序在 Linux 服务器上运行。现在我将提供一个简单的基于 Web 的配置页面。如果不使用大型框架，我不知道如何解决这个问题。

我不想要的是使用 Java EE 或类似的东西。一个“小型”免费（用于商业用途）库是可以的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T18:04:06.163

我建议您将 Jetty（它可能是大多数 Java 轻量级服务器）与纯 Servlet 和 JSP 一起使用。如果您只需要一两页的配置选项很少，那么任何框架在我看来都是不必要的矫枉过正。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T17:56:00.277

如果您想留在 Java 领域，或者如果您喜欢冒险，我可以推荐[play 框架，您可以考虑使用其他语言的任意数量的微框架/环境。](http://www.playframework.org/)

*   烧瓶（蟒蛇）
*   斯卡拉特拉(scala)
*   流星.js(javascript)
*   node.js(javascript)
*   扭曲（蟒蛇）
*   辛纳特拉（红宝石）

所有这些都提供了非常轻量级的 Web 服务器（通常允许您在几行代码中创建动态 Web 内容）以及具有操作系统集成的语言，允许您管理应用程序的配置和状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T17:25:52.260

您可以使用[Apache Tomcat](http://tomcat.apache.org/)或[Jetty](http://jetty.codehaus.org/jetty/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T17:50:43.037

如果您使用的是 jre，请查看 com.sun.net.httpserver。嵌入已经很容易了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T18:00:27.747

对于配置，您还可以使用 JMX。jconsole 可以轻松访问您的应用程序，并且还有一个 JMX HTTP 适配器。此适配器允许您监控设置并更改它们。这为您提供了一个免费的网页，但它当然不是一个“漂亮”的网页。

# asp.net - 在视图中创建包含项目的填充下拉列表

> ID：12751142
> 
> 赞同：0
> 
> 时间：2012-10-05T17:23:17.437
> 
> 标签：asp.net, asp.net-mvc, razor

我正在尝试创建一个包含项目列表的下拉列表：

```
@Html.DropDownList("displayCount", new SelectList(        
    new[]
    {
        new SelectListItem { Value = "25", Text = "25" },
        new SelectListItem { Value = "50", Text = "50" },
        new SelectListItem { Value = "100", Text = "100" },
    }
)); 
```

当我查看我的下拉列表时，它只有 3 个选项，上面写着“System.Web.Mvc.SelectListItem”

我需要在这里做些什么不同的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:27:24.350

您需要告诉 SelectList 使用哪些字段：

```
new SelectList(..., "Value", "Text") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T17:29:26.720

尝试：

```
@Html.DropDownList("displayCount", new SelectList(        
    new[]
    {
        new SelectListItem { Value = "25", Text = "25" },
        new SelectListItem { Value = "50", Text = "50" },
        new SelectListItem { Value = "100", Text = "100" },
    },
    "Value",
    "Text"
)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T17:34:26.963

您在下拉列表中列出的原因`"System.Web.Mvc.SelectListItem"`是因为您没有指定要用于下拉列表`Text`的列表项的哪个属性。`Value`现在，它是根据列表中每个项目的 显示的，它返回类`.ToString()`的全名`SelectListItem`

```
@Html.DropDownList("displayCount", new SelectList(        
    new[]
    {
        new SelectListItem { Value = "25", Text = "25" },
        new SelectListItem { Value = "50", Text = "50" },
        new SelectListItem { Value = "100", Text = "100" },
    },
    "Value",
    "Text"
)); 
```

# node.js - CentOS 中 nodejs 守护程序的 Upstart 脚本不起作用（启动时崩溃）

> ID：12751144
> 
> 赞同：2
> 
> 时间：2012-10-05T17:23:25.717
> 
> 标签：node.js, centos, daemon, upstart

我在 CentOS 服务器的 /etc/init/ 目录中的 .conf 文件中有以下内容：

```
#!upstart
description "shortnr server for fmc.io"
author      "Felix Milea-Ciobanu"

start on startup
stop on shutdown

respawn
respawn limit 10 30

script
    export HOME="/root"
    exec /usr/local/bin/node /var/www/fmc.io/nodejs/app.js >> /var/www/fmc.io/logs/shortnr.upstart.log 2>&1
end script

pre-start script
    echo "[`date -u +%Y-%m-%dT%T.%3NZ`] (sys) Starting" >> /var/www/fmc.io/logs/shortnr.upstart.log
end script

pre-stop script
    echo "[`date -u +%Y-%m-%dT%T.%3NZ`] (sys) Stopping" >> /var/www/fmc.io/logs/shortnr.upstart.log
end script 
```

这是一个非常简单直接的暴发户脚本。我`shortnr`在脚本启动的 nodejs 软件之后命名了这个服务。

如果我在命令行输入，`start shortnr`我会得到类似`shortnr start/running, process 28350`.

但是，我似乎无法访问 nodejs 服务器；如果我`ps aux | grep shortnr`在命令 shell 中执行此操作，则什么也没有出现。

如果我`stop shortnr`在运行 start 后这样做，我会得到`stop: Unknown instance:`，这意味着原始服务从未启动。

我在 Upstart 脚本中设置的日志文件如下所示：

```
[2012-10-05T17:00:17.174Z] (sys) Starting
[2012-10-05T17:00:17.181Z] (sys) Starting
[2012-10-05T17:00:17.190Z] (sys) Starting
[2012-10-05T17:00:17.197Z] (sys) Starting
[2012-10-05T17:00:17.204Z] (sys) Starting 
```

基本上，当我发出启动命令时，脚本每秒尝试启动多次，这意味着服务必须在启动时崩溃或尝试重生？

但是，如果我之后复制命令`exec`并将其粘贴到 shell 提示符中，nodejs 脚本就会启动并正常运行。

所以这意味着我的 Upstart 脚本一定有问题。

如果我尝试使用`initctl`命令启动/停止服务，我会得到相同的结果。

我正在运行 CentOS 6.3 和 Upstart 0.6.5

任何人都知道可能导致此问题的原因或如何修复我的脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T19:03:54.880

虽然我无法弄清楚我的问题的答案，但我最终还是使用了forever：[https ://github.com/nodejitsu/forever-monitor](https://github.com/nodejitsu/forever-monitor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T16:09:14.180

我在 CentOS 6.3、Upstart 0.6.5 和 Node.Js 0.10.5 上也遇到了类似的问题。我专门升级了 Node，这样我就可以使用守护程序模块并能够将守护程序化的 Node 应用程序置于 Upstart 的控制之下。

这是我的 /etc/init/job-worker.conf：

```
description "job-worker under Upstart/init control"

start on job-worker-start-event
stop on job-worker-stop-event

expect daemon

script
  #setuid myuser
  exec /root/BasicJobWorker/bin/basic-job-worker
  #sleep 5
end script

respawn
respawn limit 10 5 
```

这是我的基本工作脚本：

```
\#!/usr/bin/env node

// this code is run twice
// see implementation notes below
console.log(process.pid);

// after this point, we are a daemon
require('daemon')();

// different pid because we are now forked
// original parent has exited
console.log(process.pid);

var BasicJobWorker = require('../lib/basic-job-worker.js');

new BasicJobWorker().boot(); 
```

我尝试过使用“expect fork”、“expect daemon”以及根本没有任何期望。在所有情况下，作业的重生速度都太快，最终会停止。

# php - 如何在php中发送包含html和css的电子邮件

> ID：12751147
> 
> 赞同：1
> 
> 时间：2012-10-05T17:23:44.020
> 
> 标签：php, email, html-email

当我通过 PHP 邮件功能发送电子邮件时（我将此 html 代码放在一行中并将其添加到消息中），让我们说出我想要发送的内容：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Frameset//EN" "http://www.w3.org/TR/html4/frameset.dtd">
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <style type="text/css">
        .box h3{
                text-align:right;
                position:relative;
                direction: rtl;
        }
        .box {
                width:70%;
                top:80px;
                height:200px;
                background: whitesmoke;
                margin:40px auto;
                text-align:right;
                direction: rtl;
        }
        /*==================================================
         * Effect 2
         * ===============================================*/
        .effect2
        {
                position: relative;
        }
        .effect2:before, .effect2:after
        {
                z-index: -1;
                position: absolute;
                content: "";
                bottom: 15px;
                left: 10px;
                width: 50%;
                top: 80%;
                max-width:300px;
                background: #777;
                -webkit-box-shadow: 0 15px 10px #777;
                -moz-box-shadow: 0 15px 10px #777;
                box-shadow: 0 15px 10px #777;
                -webkit-transform: rotate(-3deg);
                -moz-transform: rotate(-3deg);
                -o-transform: rotate(-3deg);
                -ms-transform: rotate(-3deg);
                transform: rotate(-3deg);
        }
        .effect2:after
        {
                -webkit-transform: rotate(3deg);
                -moz-transform: rotate(3deg);
                -o-transform: rotate(3deg);
                -ms-transform: rotate(3deg);
                transform: rotate(3deg);
                right: 10px;
                left: auto;
        }
        </style>
    </head>
    <body>
        <div class="box effect2">
            <b>שלום,</b>
            <p>
                אנא לחץ על הקישור המצורף ע"מ לאשר את התחברותך לאתרץ
            </p>
            <p>
                הלינק הוא:
            </p>
            <b>
                תודה מראש,
            </b>
            <p><b>
                צוות האתר
                </b></p>

        </div>
    </body>
</html> 
```

我想通过php发送它。当我发送这封电子邮件时，我收到了带有标签的电子邮件，并且没有按照我的意愿进行样式设置。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T17:25:18.917

电子邮件客户端不支持 css ..

你必须正确的内联样式..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T17:43:45.023

向接收者显示您希望它们出现的 HTML 电子邮件并不简单。它们更像是 90 年代后期的 html。样式应该是内联的，并且你应该使用表格进行布局。背景不能在许多客户端上可靠地工作，并且肯定您在各种客户端上进行测试，因为不同客户端之间的 html 会千差万别。

奖励：忘记javascript / jQuery之类的......

此外，不要指望能够显示 CSS3 和 html5 元素等。许多客户端不支持。Outlook 甚至不能很好地支持边距，更不用说我们已经习惯的所有 css。所以保持非常简单，使用表格进行布局，广泛测试，不要认为你甚至会接近像素完美......

[这是关于普遍支持的 html/css 的一些帮助](http://www.emailology.org/#3)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T17:42:20.037

由于您已经拥有 CSS 和 HTML，您可以利用此网站将 CSS 样式转换为 HTML 电子邮件的内联 CSS 样式。

[http://inlinestyler.torchboxapps.com/](http://inlinestyler.torchboxapps.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-24T11:34:34.040

电子邮件客户端不支持 CSS。因此，尝试编写如下内联 CSS：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<body style="margin:0;padding:0;border=0;font-size:14px;font-family:YOUR_FONT_FAMILY_NAME">
<div style="position:relative;">
<h3 style="text-align:right;position:relative;direction:rtl;">This is heading 3</h3>
<b>שלום,</b>
<p>אנא לחץ על הקישור המצורף ע"מ לאשר את התחברותך לאתרץ</p>
<p>הלינק הוא:</p>
<b>תודה מראש,</b>
<p><b>צוות האתר</b></p>
</div>
</body>
</html> 
```

# ios - Xcode - 打开官方 Facebook 应用程序（5.0.1）没有指向正确的链接

> ID：12751149
> 
> 赞同：2
> 
> 时间：2012-10-05T17:23:46.250
> 
> 标签：ios, xcode, facebook, sdk

我使用的是 Xcode 4.5.1（和 iOS 6）并且没有 Facebook SDK；我以前可以毫无问题地链接到 Facebook 应用程序。但是，我的理论是，一旦 Facebook 发布了他们的官方应用程序的 5.0 版本，我的链接就不再起作用了。它仍会打开应用程序，但不会将用户定向到我公司的页面，它要么在新闻提要中启动，要么在 Facebook 应用程序所处的最后一个状态下打开（即，在消息、朋友列表等中）

```
NSURL *facebookLink = [NSURL URLWithString:@"fb://page/316429551772278"];        
[[UIApplication sharedApplication] openURL:facebookLink]; 
```

正如我所提到的，这段代码在 Facebook 发布主要更新之前就已经工作了；我的问题是，我是否可以使用另一个链接来打开应用程序并将用户定向到此特定页面，或者这只是 Facebook 的错误？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:32:42.877

似乎在 URL中替换`page`为[有效](https://stackoverflow.com/questions/12726745/facebook-link-fb-page-fbid-not-working)。`profile`

# api - 确定谷歌地图标记显示状态

> ID：12751150
> 
> 赞同：0
> 
> 时间：2012-10-05T17:23:52.850
> 
> 标签：api, maps

直接来自他们 API 上的谷歌参考资料

隐藏以前绘制的一组地图标记以隐藏

```
mapArray[i].setMap(null); 
```

简单的。

但是，有什么东西可以让我评估标记的显示状态，从而让我可以简单地切换显示状态？

我一直在谷歌搜索并搜索他们的 api refs 但看不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T20:00:46.443

试试`google.maps.Marker.getMap()`。

# python - python numpy数组的结构

> ID：12751152
> 
> 赞同：1
> 
> 时间：2012-10-05T17:24:20.120
> 
> 标签：python, numpy, scipy

我想就[这段代码](https://stackoverflow.com/q/12736278/117700)提出一个全新的问题。

`open`上面链接中的代码为and返回一个 numpy 数组`close`：

```
open = np.array([q.open for q in quotes]).astype(np.float)
close = np.array([q.close for q in quotes]).astype(np.float) 
```

根据[Dan 的帮助](https://stackoverflow.com/a/12736914/117700)，`quotes`返回：

> 在您的情况下，您使用的是 asobject=True，因此您获得的格式是日期、年、月、日、d、打开、关闭、高、低、音量、调整关闭。

因此， open 和 close 必须是`[5]`和`[6]`的元素`quotes`。

```
>>> open
array([[ 28.12235692,  28.32908451,  28.482779  , ...,  84.8198783 ,
         84.1401    ,  84.64308037],
       [ 22.49848073,  22.66286426,  22.91112016, ...,  63.66703704,
         64.57105722,  64.12120097]]) 
```

和：

```
>>> close
array([[ 28.5 ,  28.53,  29.23, ...,  83.8 ,  84.99,  83.82],
       [ 22.91,  22.71,  23.53, ...,  63.52,  64.78,  63.92]])
>>> 
```

我不明白究竟是什么`open`和`close`代表。

开盘和收盘的每个元素是该特定股票的所有价格吗？

您能帮我准确理解 open 和 close 包含的内容吗？**它们只是每天每个符号的价格列表吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:24:45.050

`quotes`是一个列表，其中包含每个符号的股票信息：

```
In [43]: len(quotes)
Out[43]: 61

In [44]: len(symbols)
Out[44]: 61

In [45]: symbols
Out[45]: 
array(['COP', 'AXP', 'RTN', 'BA', 'AAPL', 'PEP', 'NAV', 'GSK', 'MSFT',
       'KMB', 'R', 'SAP', 'GS', 'CL', 'WAG', 'WMT', 'GE', 'SNE', 'PFE',
       'AMZN', 'MAR', 'NVS', 'KO', 'MMM', 'CMCSA', 'SNY', 'IBM', 'CVX',
       'WFC', 'DD', 'CVS', 'TOT', 'CAT', 'CAJ', 'BAC', 'AIG', 'TWX', 'HD',
       'TXN', 'KFT', 'VLO', 'NWS', 'F', 'CVC', 'TM', 'PG', 'LMT', 'K',
       'HMC', 'GD', 'HPQ', 'DELL', 'MTU', 'XRX', 'YHOO', 'XOM', 'JPM',
       'MCD', 'CSCO', 'NOC', 'UN'], 
      dtype='|S17') 
```

例如，中的第一个元素`quotes`是 'COP' 符号并包含按日期排列的值数组：

```
In [49]: symbols[0]
Out[49]: 'COP'

In [50]: quotes[0].open
Out[50]: 
array([ 13.81001419,  14.01678947,  14.01500099, ...,  56.77238579,
        56.82699428,  56.89080408])

In [51]: quotes[0].date
Out[51]: 
array([2003-01-02, 2003-01-03, 2003-01-06, ..., 2007-12-27, 2007-12-28,
       2007-12-31], dtype=object) 
```

# r - ggplot2：更改图例中的符号

> ID：12751159
> 
> 赞同：3
> 
> 时间：2012-10-05T17:24:45.533
> 
> 标签：r, ggplot2, legend

我在使情节图例中的符号与情节本身中的符号匹配时遇到问题。

假设数据有四列这样

```
data = data.frame(x = sample(1:10, 10, replace=TRUE), y = sample(1:10, 10, replace=TRUE), 
           Rank = sample(1:10, 10, replace = TRUE), Quantified = factor(sample(1:2, 10, replace = TRUE))
) 
```

我希望点的大小不同（用“等级”区分）并用不同的符号表示（十字和空心圆圈，用“量化”区分）。

我的代码是

```
ggplot(data, aes(x = x, y = y)) +
          geom_point(aes(size = Rank, shape = Quantified)) +
          scale_shape_manual("Quantified", labels = c("Yes", "No"), values = c(1, 4)
 ) 
```

图中的符号是我想要的。

我的问题是我希望顶部图例中的圆圈在情节中 **没有填充。**

我已经在代码的不同部分尝试了各种命令（例如，fill = "white"），但似乎没有什么能正常工作。

有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T17:43:03.307

现在我确定这是你想要的：

```
library(scales)
ggplot(data, aes(x = x, y = y)) +
          geom_point(aes(size = Rank, shape = Quantified)) +
          scale_shape_manual("Quantified", labels = c("Yes", "No"), values = c(1, 4)) + 
          guides(size = guide_legend(override.aes = list(shape = 1))) 
```

![在此处输入图像描述](../Images/e32052e1f71d0c4f7b498f0b75cb7f53.png)

# jquery - 动态 rel 选择器不起作用

> ID：12751166
> 
> 赞同：0
> 
> 时间：2012-10-05T17:25:22.447
> 
> 标签：jquery, dynamic, attr, rel

我正在使用 jquery 使用 Flexslider 的 API 动态创建活动状态。这是我的 jQuery：

```
var curslide = slider.animatingTo;
var parsed = parseInt(curslide);

$("#pillarControl li").each(function(){
     $(this).removeClass("active");
});

$("#pillarControl  li a[rel='parsed']").parent().addClass("active"); 
```

底线不起作用。如果我`parsed`用一个实际的整数替换，它会很好用。但是由于某种原因，该变量`parsed`不会导致添加活动类。我做了一个测试，看看变量`parsed`是否存储了正确的值，确实如此。似乎是语法问题？不确定，有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T17:28:24.300

问题是您没有传递变量值，而只是“解析”为文本。尝试：

```
$("#pillarControl  li a[rel='" + parsed + "']").parent().addClass("active"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:29:04.580

尝试这个：

```
$("#pillarControl  li a[rel='" + parsed + "']").parent().addClass("active"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T17:29:15.260

您似乎将**parsed**作为 string 传递。你需要通过

```
var parsed = parseInt(curslide); 
```

所以你的旧选择器正在寻找`rel="parsed"` 而不是 parsed..

```
$("#pillarControl  li a[rel='" + parsed + "']").parent().addClass("active"); 
```

# linux - Linux 中的 fget_light 有什么作用？

> ID：12751167
> 
> 赞同：1
> 
> 时间：2012-10-05T17:25:29.153
> 
> 标签：linux, system-calls

我正在研究 Linux 中的系统调用，并阅读了 read() 系统调用。

```
SYSCALL_DEFINE3(read, unsigned int, fd, char __user *, buf, size_t, count)
{
    struct file *file;
    ssize_t ret = -EBADF;
    int fput_needed;

    file = fget_light(fd, &fput_needed);
    if (file) {
        loff_t pos = file_pos_read(file);
        ret = vfs_read(file, buf, count, &pos);
        file_pos_write(file, pos);
        fput_light(file, fput_needed);
    }

    return ret;
} 
```

这是 fget_light() 的定义

```
struct file *fget_light(unsigned int fd, int *fput_needed)
 {
         struct file *file;
         struct files_struct *files = current->files;

         *fput_needed = 0;
         if (likely((atomic_read(&files->count) == 1))) {
                 file = fcheck_files(files, fd);
         } else {
                 rcu_read_lock();
                 file = fcheck_files(files, fd);
                 if (file) {
                         if (atomic_long_inc_not_zero(&file->f_count))
                                 *fput_needed = 1;
                         else
                                 /* Didn't get the reference, someone's freed */
                                 file = NULL;
                 }
                 rcu_read_unlock();
         }

         return file;
 } 
```

你能解释一下， fget_light 是做什么的？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T23:23:40.130

每个任务都有一个文件描述符表。该文件描述符表由文件描述符编号索引，并包含有关每个打开文件的信息（文件描述）。

与内核中的许多其他对象一样，文件描述是引用计数的。这意味着当内核的某些部分想要访问文件描述时，它必须获取一个引用，做它需要做的任何事情，然后释放这个引用。当引用计数降为零时，可以释放对象。对于文件描述，`open()`增加引用计数并`close()`减少它，因此文件描述在打开和/或内核正在使用它们时不能被释放（例如：想象你的进程中的一个线程正在处理`close()`文件，而另一个线程仍在`read()`处理文件：文件描述在读取`fput()`它的引用之前不会真正发布）。

要从文件描述符中获取对文件描述的引用，内核具有函数`fget()`，并`fput()`释放该引用。由于多个线程可能在不同的 CPU 上同时访问相同的文件描述，`fget()`因此`fput()`必须使用适当的锁定。在现代，他们使用 RCU；仅仅读取文件描述符表不会/几乎没有成本。

但是 RCU 是不够优化的。考虑到拥有非多线程的进程是很常见的。在这种情况下，您不必担心来自同一进程的其他线程访问相同的文件描述。唯一可以访问我们的文件描述符表的任务是我们。因此，作为一种优化，当当前文件描述符表仅用于单个任务时，不要触及引用计数`fget_light()`。`fput_light()`

```
struct file *fget_light(unsigned int fd, int *fput_needed)
{
     struct file *file;
     /* The file descriptor table for our _current_ task */
     struct files_struct *files = current->files;

     /* Assume we won't need to touch the reference count, 
      *  since the count won't reach zero (we are not close(), 
      *  and hope we don't run concurrently to close()),
      *  fput_light() won't actually need to fput().
      */
     *fput_needed = 0;

     /* Check whether we are actually the only task with access to the fd table */
     if (likely((atomic_read(&files->count) == 1))) {
             /* Yep, get the reference to the file description */
             file = fcheck_files(files, fd);
     } else {
             /* Nope, we'll need some locking */
             rcu_read_lock();
             /* Get the reference to the file description */
             file = fcheck_files(files, fd);
             if (file) {
                     /* Increment the reference count */
                     if (atomic_long_inc_not_zero(&file->f_count))
                             /* fput_light() will actually need to fput() */
                             *fput_needed = 1;
                     else
                             /* Didn't get the reference, someone's freed */
                             /* Happens if the file was close()d and all the 
                              *  other accessors ended its work and fput().
                              */
                             file = NULL;
             }
             rcu_read_unlock();
     }

     return file;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:48:17.810

基本上，该函数通过调用查看进程文件表的函数（这将是它的参数） ，将`fd`用户传递的系统调用转换为内核内部`file`结构指针的系统调用。有关更多信息，[请阅读此](http://www.mjmwired.net/kernel/Documentation/filesystems/files.txt)。`fcheck_files``files`

# mysql - 无法创建 FOREIGN KEY MySQL 错误 150

> ID：12751169
> 
> 赞同：0
> 
> 时间：2012-10-05T17:25:37.183
> 
> 标签：mysql

我在 table 上添加外键时遇到问题`votes`。

```
mysql> describe votes;
+----------+------------------+------+-----+---------+----------------+
| Field    | Type             | Null | Key | Default | Extra          |
+----------+------------------+------+-----+---------+----------------+
| id       | int(11) unsigned | NO   | PRI | NULL    | auto_increment |
| user_id  | int(11) unsigned | NO   |     | NULL    |                |
| video_id | int(11) unsigned | NO   |     | NULL    |                |
| vote     | int(11)          | NO   |     | NULL    |                |
+----------+------------------+------+-----+---------+----------------+

mysql> describe user;
+----------+------------------+------+-----+---------+----------------+
| Field    | Type             | Null | Key | Default | Extra          |
+----------+------------------+------+-----+---------+----------------+
| id       | int(11) unsigned | NO   | PRI | NULL    | auto_increment |
| email    | varchar(256)     | NO   | MUL | NULL    |                |
| password | varchar(32)      | NO   |     | NULL    |                |
| name     | varchar(24)      | NO   |     | NULL    |                |
+----------+------------------+------+-----+---------+----------------+ 
```

Votes.user_id 是 User.id 的外键。但是当我运行时，Bot 有相同的时间：

```
mysql> alter table `votes` 
       add CONSTRAINT `votes_FK_1` 
       FOREIGN KEY (`user_id`) REFERENCES `user` (`id`); 
```

MySQL正在抛出一个很好的老150

```
ERROR 1005 (HY000): Can't create table 'crocko.#sql-6e1_3c5' (errno: 150) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:30:34.647

您需要检查表中是否存储了任何数据。如果是，则需要删除它们。

或者，如果您的 MySQL 数据库引擎是**MyISAM**，您将无法在创建表后添加外键..

您可以检查如何将其更改为**InnoDB** ..

# java - 无法创建新类的对象。无法识别导入

> ID：12751172
> 
> 赞同：0
> 
> 时间：2012-10-05T17:25:56.953
> 
> 标签：java, import

我正在处理一个 java 项目，我创建了一个数据传输对象，这样我就可以从另一个类的方法返回多个值。但是，当我尝试导入此类时，它说无法解决导入问题。除了在我的导入中没有使用正确的路径之外，还有其他可能导致此问题的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:27:38.170

事实证明，我所说的关于在导入时不使用正确路径的第一件事是正确的。嗯，这很容易！

# objective-c - CIImage饱和度使用CIFilters，有可能吗？

> ID：12751174
> 
> 赞同：1
> 
> 时间：2012-10-05T17:26:24.750
> 
> 标签：objective-c, cifilter, ciimage

我正在使用 CIImage 对象，试图获得饱和值。但我找不到获得图像饱和度的方法，至少使用 OS X 中可用的 CIFilters。
是否可以使用标准 CIFilters 获得 CIImage 的饱和度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T17:55:11.930

看看`CIColorControls`过滤器。使用此滤镜可以调整图像的饱和度、亮度和对比度。

> 为了计算饱和度，该滤波器在灰度图像（饱和度 = 0.0）和原始图像（饱和度 = 1.0）之间进行线性插值。过滤器支持外推：对于大于 1.0 的值，它会增加饱和度。

例子：

```
CIFilter *colorControlsFilter = [CIFilter filterWithName:@"CIColorControls"];
[colorControlsFilter setDefaults];
[colorControlsFilter setValue:sourceImage forKey:@"inputImage"];
[colorControlsFilter setValue:[NSNumber numberWithFloat:1.0] forKey:@"inputSaturation"];
[colorControlsFilter setValue:[NSNumber numberWithFloat:0.2] forKey:@"inputBrightness"];
[colorControlsFilter setValue:[NSNumber numberWithFloat:1.0] forKey:@"inputContrast"];

CIImage *outputImage = [colorControlsFilter valueForKey:@"outputImage"]; 
```

▸`CIColorControls`参考[这里](https://developer.apple.com/library/content/documentation/GraphicsImaging/Reference/CoreImageFilterReference/index.html#//apple_ref/doc/filter/ci/CIColorControls)。
▸ 所有 CIFilters[在这里](https://developer.apple.com/library/content/documentation/GraphicsImaging/Reference/CoreImageFilterReference/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:57:30.237

You cannot do it using built-in CIFilter but you can code it quite simply. I won't give you full implementation but I can give you the cikernel that'll do the work :

```
vec4 rgbToHsv(vec4 rgb) {
    float x = min(rgb.r, min(rgb.g, rgb.b));
    float v = max(rgb.r, max(rgb.g, rgb.b));
    float f = (rgb.r == x) ? rgb.g - rgb.b : ((rgb.g == x) ? rgb.b - rgb.r : rgb.r - rgb.g);
    float i = (rgb.r == x) ? 3.0 : ((rgb.g == x) ? 5.0 : 1.0);
    float h = i - (f / (v - x));
    float s = (v - x) / v;
    return (v == x) ? vec4(-1, 0, v, rgb.a) : vec4(h, s, v, rgb.a);
}

kernel vec4 saturationToGrayscale(sampler image) {
    vec4 color = sample(image, samplerCoord(image));
    vec4 hsv = rgbToHsv(color);
    return premultiply(vec4(vec3(hsv.g), color.a));
} 
```

rgbToHsv function comes from [Andy Finnell's blog](http://losingfight.com/blog/2007/01/26/image-filter-theatre-hsb-mixer/)

Output result is a grayscale image where white means sat == 1.0 and black means sat == 0.0\. You can revert this by using "1.0-hsv.g" instead of "hsv.g" in the return argument. You can also retrieve hue and value by using respectively hsv.r and rsv.b.

Making it a CIFilter is left to you. Take a Look at Apple's [Creating Custom Filters](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/CoreImaging/ci_custom_filters/ci_custom_filters.html) to do this. The code above takes place in the .cikernel file.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-26T13:20:24.557

您可以通过将 RGB 图像转换为 YpCbCr 并更改`cb`和`cr`值来调整其饱和度。Accelerate.vimage 可以为您完成此转换，Apple 有一个示例代码项目[在此处](https://developer.apple.com/documentation/accelerate/vimage/real-time_video_effects_with_vimage)讨论该主题。

您可以将 vImage 操作包装在 a`CIImageProcessorKernel`中以使它们可用于 Core Image。同样，Apple 有一篇文章解释了如何做到这[一点](https://developer.apple.com/documentation/accelerate/vimage/reading_from_and_writing_to_core_video_pixel_buffers)。

希望有帮助，

西蒙

# php - 鞋/衬衫尺码可点击列表而不是下拉菜单

> ID：12751178
> 
> 赞同：1
> 
> 时间：2012-10-05T17:26:33.683
> 
> 标签：php, html, css, magento, e-commerce

我被困在这里。我正在尝试创建代码，该代码将列出该项目的所有可用尺寸，而无需使用下拉菜单。在下面的两个链接中，您将看到我在说什么。任何缺货的商品都显示为灰色，当您单击库存商品时，商品可用性会在您的选择下方以红色显示。

谁能指出我如何完成这项工作的正确方向（也许是教程）？我正在尝试在我的 magento 站点中实现它。我需要使用php还是magento中有一个选项？

鞋类示例： [http ://www.karmaloop.com/product/The-AR-20-Sneaker-in-Craft-Blue-Running-White/263936](http://www.karmaloop.com/product/The-AR-20-Sneaker-in-Craft-Blue-Running-White/263936)

衬衫示例： [http ://www.karmaloop.com/product/The-We-Win-Hoody-in-Black/271919](http://www.karmaloop.com/product/The-We-Win-Hoody-in-Black/271919)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-21T11:16:03.450

[Magento 中的可配置产品](http://www.magentocommerce.com/knowledge-base/entry/tutorial-creating-a-configurable-product) 这将有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:21:02.887

为了做你想做的事，首先你必须创建可配置的产品（针对每个产品的所有尺寸/选项），以跟踪哪个选项缺货。

我能想到的最简单的方法是创建一个自定义模块并修改 /app/code/core/Mage/Catalog/Block/Product/View/Options/Type/Select.php 以制作无序 HTML 列表，然后使用 css 来设置样式。（您可以使用 javascript 来执行此操作，但您可能会遇到此问题[如何停止 Chrome 和 Opera 通过 Index ASC 对 JSON 对象进行排序？](https://stackoverflow.com/questions/5020699/how-do-you-stop-chrome-and-opera-sorting-json-objects-by-index-asc)）

然后查看 app/code/core/Mage/Catalog/Block/Product/View/Type/Configurable.php 中的 getJsonConfig() 这将生成一个 json 对象，该对象在产品页面上可用，并且应该有哪些产品. 然后你可以使用 javascript/css 来突出显示哪些是有货的。

[这是我在http://www.contempospace.com/bedroom-furniture/wardrobe-closets/custom-closet-systems/isa-custom-closet-4-module/isa-closet-system](http://www.contempospace.com/bedroom-furniture/wardrobe-closets/custom-closet-systems/isa-custom-closet-4-module/isa-closet-system-xl-maximize-large-closet-drawers-shelves-hanging.html)上工作的一个站点的示例[-xl-maximize-large-closet-drawers-shelves-hanging.html](http://www.contempospace.com/bedroom-furniture/wardrobe-closets/custom-closet-systems/isa-custom-closet-4-module/isa-closet-system-xl-maximize-large-closet-drawers-shelves-hanging.html)具有该功能。但正如前人提到的，这是一个很大的要求。我建议找到一个付费/免费模块，然后进行您需要的任何更改。

# android - 从 DDMS 导出时如何打开数据库以查看值？

> ID：12751180
> 
> 赞同：0
> 
> 时间：2012-10-05T17:26:34.877
> 
> 标签：android, database

我有一个有数据库的应用程序......所以通过 DDMS 我导出了它的数据库，`.db`所以我想知道如何打开它来查看它的表/值？是否有特定的程序可以打开它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:30:02.307

您可以使用任何 SQLite 软件，例如[SQLite Database Browser](http://sqlitebrowser.sourceforge.net/)或[SQLiteSpy](http://www.yunqa.de/delphi/doku.php/products/sqlitespy/index)。如果您使用 FireFox，则可以使用[SQLite Manager](https://addons.mozilla.org/en-US/firefox/addon/sqlite-manager/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:17:19.340

此外，如果您可以通过 SSH 访问您的 root android 设备，您可以从控制台使用 sqlite3 程序并执行您想要的任何 SQL 查询。通过这种方式，您不需要从设备复制数据库，并且可以实时调试您需要的内容。

# django - 显示上传（图像）文件的最简单方法？

> ID：12751183
> 
> 赞同：2
> 
> 时间：2012-10-05T17:26:55.473
> 
> 标签：django, django-forms, filefield, django-file-upload

我正在尝试第一次尝试 django 文件上传，目前我需要的只是一种向上传的用户显示上传图像（png/jpg）的方法。

无需将其保存在任何地方。

我的views.py：（我正在使用django表单，顺便说一句）

```
if request.method == 'POST':
    form = UploadFileForm(request.POST, request.FILES)
    if form.is_valid():
        upFile = request.FILES['upFile']
        f={"upFile":upFile}
        return render_to_response('upload2.html', f) 
```

正如预期的那样，我可以使用 {{ upFile.name }} 和 {{ upFile.size }} 在模板中显示我的文件的名称和大小

有没有办法直接在渲染的模板中加载/显示它作为“InMemoryUploadedFile”，而无需努力保存文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T17:57:08.400

您可以像这样从图像数据中创建数据 URI：

[从http://djangosnippets.org/snippets/2516/](http://djangosnippets.org/snippets/2516/)借用的 URI 创建：

```
if form.is_valid():
    upFile = request.FILES['upFile']
    data = upFile.read()
    encoded = b64encode(data)
    mime = # the appropriate mimetype here, maybe "image/jpeg"
    mime = mime + ";" if mime else ";"
    f = {"upFile": "data:%sbase64,%s" % (mime, encoded)}
    return render_to_response('upload2.html', f) 
```

然后在模板中使用它：

```
<img src="{{ upFile }}"> 
```

# java - 我正在尝试获取当前屏幕空间的尺寸。我认为这是根布局尺寸

> ID：12751190
> 
> 赞同：0
> 
> 时间：2012-10-05T17:27:28.897
> 
> 标签：java, android, xml, android-layout

当你设计一些东西时，你必须从布局开始。

屏幕通常包含：

```
 [         title bar                ]
 |----------------------------------|
 |                                  |
 |         layout/activity          |
 |                                  |
 |----------------------------------|
 [         menu bar                 ] 
```

我删除了标题栏，但试图考虑菜单栏来获取布局或活动的宽度和高度。

我的事情是，因为我在创建时这样做，尺寸还没有弄清楚。当程序运行时，我可以使用 layout.getWidth()。我将如何获得适用工作空间的尺寸？如果我得到屏幕尺寸，它是全屏，我不想要那个......因为菜单栏被计算在内。

这是用于平板电脑的，我不能只删除菜单栏。你们有谁知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:50:22.527

当你有一个视图时，你可以使用 View.post() 它将像一个线程一样运行它（这就是为什么它被称为可运行的）。这样做的好处是，当您在根布局中实现它时，它会将内容发布到屏幕上。这样，您就可以获取正在寻找的资产，屏幕尺寸。

您没有获得屏幕尺寸的原因是基于程序的生命周期。onCreate 没有在屏幕上呈现任何内容，因此无法在运行时知道内容的尺寸。

onCreate() 中的示例代码：

```
LinearLayout ll = (LinearLayout)findViewById(R.id.LinearLayout);
ll.post(new Runnable(){
    public void run() {
        //get dimensions in here.   
    }
}); 
```

# c# - 用于切换布尔成员的更好的代码

> ID：12751194
> 
> 赞同：33
> 
> 时间：2012-10-05T17:27:40.163
> 
> 标签：c#

请注意，问题不是关于否定布尔值，而是关于最优雅、最有效和最好的方法。

单击切换按钮后，我执行以下代码以将新状态存储在 private`bool`中。

```
_isIt = !_isIt; 
```

它确实有效。它是可读的，当然。但是`i = i + 1`，我们仍然总是写作`i++`。有没有更简洁的方法来切换 a `bool`？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-05T17:34:03.577

事实上，还有另一个选项可以切换布尔值，这将起作用：

```
_isIt ^= true; 
```

然而，这并不比你做的更好......

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-05T17:32:12.893

不，这是最佳方式。恭喜！

**即使如果**有其他方式（正如您评论的那样 - `_isIt!!`），我相信最好不要使用它，因为无论如何您都会引起很多关注。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-10-15T20:40:07.703

## 速记

虽然答案已被接受，但我相信更深入的答案对于未来的读者来说会很好。正如这篇文章所指出的，`!`or`NOT`运算符是最广泛接受的，也是最佳解决方案。事实上，与`^`或`XOR`超过 10,000 次迭代相比，它大约快 100 毫秒。老实说，用法都取决于具体情况。无论哪种方式，您都会在下面找到切换值的三种最常用方法`bool`，并且您应该在允许使用的标准范围内选择最适合使用的方法。

* * *

## `if-else`方法_

切换`bool`值的最简单方法是写出一个`if-else`分配新值的值；这样，即使是完全的开发初学者也可以理解正在发生的事情。这实际上是在大多数概念课程中教授切换的方式。

```
bool b = true;
if (b == true)
    b = false;
else
    b = true; 
```

当然，`if`可以简化为`if (b)`，但传统上，为了清晰和学习目的，你会一直写出来。

* * *

## NOT 运算符

随着您更多地了解开发和逻辑操作，您将了解`NOT`运算符或`!`在`C#`. 由于多种原因，该运算符的使用在行业中被最广泛接受。简单、易读、易懂、速度快：

```
x = !x; 
```

这分解为`!true = false`和`!false = true`。

* * *

## XOR 运算符

`XOR`or `^`in是该`C#`任务选择较少的运算符，但根据具体情况，它是可接受的运算符。正如一些人在评论中指出的那样，此运算符在处理较长的名称或深度访问成员时特别有用。如果性能很重要，并且该操作将执行多次，则最好与`NOT`操作员一起使用，因为它更快。如果性能不是真正的问题，那么使用`XOR`操作符是可以接受的；尽管在专业环境中，您可能需要证明使用的合理性。

```
b ^= true;
b = b ^ true; 
```

`XOR`在将其用于切换之前要了解的最重要的事情是了解它的逻辑工作原理：

```
true ^ false = true;
true ^ true = false;
false ^ true = true;
false ^ false = false; 
```

该逻辑表解释了为什么`b ^= false`不会切换。A`XOR`要求运算符的一侧是，另一侧`true`是`false`。它是哪一边无关紧要，但任何一边都不能是相同的值，否则它将评估为`false`. 因此：

```
bool b = true;
b ^= false; // true.
b ^= false; // true. So on, and so forth.

bool b = false;
b ^= false; // false.
b ^= false; // false. So on, and so forth. 
```

* * *

## 最后的想法

OP问题的答案很简单：

*   操作员是最`NOT`干净、最有效的切换解决方案。

祝你在未来的工作中一切顺利，希望这个答案有助于进一步阐明这个话题！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-05T17:30:54.760

不，我相信这是切换 a 的惯用 C# 方式`bool`（即为其分配相反的值）。

我的意见：保持你的代码不变。它清楚地传达了代码的意图，这对未来的读者来说是最重要的。

如果您对*替代*方法感兴趣，可以使用 XOR，但我认为它的可读性较差。

```
_isIt ^= true; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T17:31:17.433

不，没有。我不知道还有什么要添加到这个答案:)

# c# - 如何从 SQL Server 获取数据从一个环境到另一个环境？

> ID：12751195
> 
> 赞同：0
> 
> 时间：2012-10-05T17:27:48.323
> 
> 标签：c#, sql, sql-server, visual-studio

我有一个名为（本地）和其他（备份）的环境。

从备份数据库中，我有一些存储过程以及填充的表。

在我的本地，我有那些存储过程和表，但其中没有存储任何内容。

所以我想从我的备份环境中获取数据到我的本地数据库环境，我该如何实现呢？

我正在使用 SQL Server

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T17:54:24.903

其他答案中列出了一些不错的选择。但是根据您需要执行此活动的频率或您需要的粒度控制，Red Gate 的[SQL 数据比较](http://www.red-gate.com/products/sql-development/sql-data-compare/)让您可以比较数据库并确定应该移动哪些数据，向哪个方向移动。非常强大且易于使用。它并不便宜：起价 400 美元，但有 14 天的试用期。

我与他们没有任何关系，我只是一个非常满意的客户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T17:49:30.293

如果您只想获取数据库中的数据，在 MS SQL Server Management Studio 中执行此操作的一种方法是将数据从一个源导出到另一个源。

右键单击源数据库，选择“任务”，然后选择“导出数据”并按照向导的说明进行操作。您可能需要修改一些设置，例如“身份插入”。

要处理数据库的结构，可以生成脚本，即右键单击源数据库，选择“tasks”，然后选择“generate scriptis”

最后，您始终可以通过本地数据库对“备份”数据库进行备份/恢复。右键单击源数据库，选择“任务”，然后选择“备份...”并按照向导的说明进行操作。在这种情况下，您需要备份到文件

之后，您可以使用类似的方式恢复它。右键单击目标数据库，选择“任务”，然后选择恢复。在这种情况下，您需要选择从文件中恢复。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T17:40:50.830

我建议使用 SSIS（来自 Management Studio 的“导入数据”）来复制表数据。（在 SQL Management Studio 中，右键单击您的数据库并选择 Tasks->Import）

通过 SQL 脚本导入存储过程（IMO）更好（在 SQL Management Studio 中，右键单击数据库并选择任务，“生成脚本”。注意：通过 SQL 获取您的 SP 默认情况下不会导入任何权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T15:03:57.313

如果它们具有相同的模式，则将数据从一个数据库导出到另一个数据库非常容易。您只需在 ssms 中使用导入导出向导 inbuild 并指定源数据库和目标数据库，然后选择要复制的表列表

```
watch this video 

www.youtube.com%2Fwatch%3Fv%3DeDfhTPU7P-M&ei=DUhwULvhM4LPrQeY9oDoCA&usg=AFQjCNGA5a1o-yL9z-31EQQAQed-r5Pvlg&sig2=SiSTQ9tDackePFXw9-5vmw 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T20:54:41.623

我建议创建 SSIS(ETL) 包。它是非常强大的工具，而不是像 Redgate SQL 数据比较或备份/恢复这样的临时解决方案。

在更大的环境中，我会推荐 Replication，但它的主题要大得多。

# python - 如何在不使用 python 中的 min() 方法的情况下找到数字列表中的最小值？

> ID：12751197
> 
> 赞同：-2
> 
> 时间：2012-10-05T17:27:56.243
> 
> 标签：python, methods, min

我尝试通过一个for循环循环比较列表中的每个元素，但是我这样做的方式只有在列表中的数字为正时才有效，如果它们都是负数则不起作用。有谁我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:32:29.773

利用

```
mini = scores[0] 
```

而不是 0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:01:20.290

```
scores = [1, 2, 3, 4, 5] 
```

这些中的任何一个都可以：

```
sorted(scores)[0]
sorted(scores, reverse=True)[-1]
[s for s in scores if all(s<=i for i in scores)][0]

def getMin(L):
    answer = L[0]
    for i in L:
        if i < answer:
            answer = i
    return answer
getMin(scores) 
```

# c++ - G++ 编译统计

> ID：12751199
> 
> 赞同：10
> 
> 时间：2012-10-05T17:28:09.513
> 
> 标签：c++, gcc, statistics, code-metrics

我想知道是否有任何方法可以从 GCC/G++ 编译过程中收集统计信息。诸如整个过程中编译的行数、编译总时间、错误/警告的数量、编译对象的数量/大小等指标。

我想制作一个脚本（可能在 python 中）以每天、每周和每月生成统计信息。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T17:40:40.780

我知道有一个，它叫做[Cdash](http://www.cdash.org/)，它是一个更大、更理想的套件的一部分，该套件实际上包括 Cmake、Ctest 和 Cpack。

[这](http://www.youtube.com/watch?v=8Ut9o4OdSC0)对你来说可能是一个有趣的视频

# php - 静态页面上的 URL 重写

> ID：12751218
> 
> 赞同：0
> 
> 时间：2012-10-05T17:29:19.427
> 
> 标签：php, wordpress, url-rewriting

我有一个带有永久链接的 Wordpress 博客。我创建了一个显示产品表的静态页面（www.abc.xx/database/）。如果用户单击其中一个产品，它会打开一个名为“产品”的新静态页面，该页面通过产品 ID 从数据库中检索并显示有关产品的信息。URL 是 www.abc.xx/database/product?id=1。

但我想要一个像 www.abc.xx/database/product/my-product 这样的 URL 而不是 www.abc.xx/database/product?id=1？有人可以解释它是如何工作的吗？

**更新：**

我在博客上发布了一些解决方案。我将以下代码段添加到我的 functions.php 文件中。

```
add_filter('rewrite_rules_array', 'add_rewrite_rules');
function add_rewrite_rules($aRules) {
    $aNewRules = array('database/product/([^/]*)/?$' => $wp_rewrite->index .'index.php?pagename=product&product-name=$matches[1]');
    $aRules = $aNewRules + $aRules;
    return $aRules;
}

add_filter('query_vars', 'add_query_vars');
function add_query_vars($aVars) {
    $aVars[] = 'product-name';
    return $aVars;
} 
```

在我添加的产品页面网站上

```
if(isset($wp_query->query_vars['product-name'])) {
echo urldecode($wp_query->query_vars['product-name']);
} 
```

现在，如果我调用 www.abc.xx/database/product/my-product，产品页面会打开，但“my-product”未发货。未设置“产品名称”变量。有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:35:35.130

首先，请`mod_rewrite`通过检查`<?php phpinfo(); ?>`.

在您正在使用的目录中创建一个`.htaccess`。

```
RewriteEngine on
RewriteRule ^product/([^/\.]+)/?$ product?id=$1 [L] 
```

如需参考/指南，请访问[http://www.workingwith.me.uk/articles/scripting/mod_rewrite](http://www.workingwith.me.uk/articles/scripting/mod_rewrite)

# magento - 本地模块的 Magento XML 布局不起作用

> ID：12751219
> 
> 赞同：0
> 
> 时间：2012-10-05T17:29:22.723
> 
> 标签：magento, layout

我尝试为我的模块指定一个自定义布局，如下所示：

```
<frontend>
...
      <layout>
            <updates>
                <learn>
                    <file>learnx.xml</file>
                <learn>
            </updates>
        </layout>
...
    </frontend> 
```

但我收到 401（找不到页面）错误。我尽量避免对所有本地模块使用 local.xml 布局。

我提到如果我删除上面的layot-update并将与learnx.xml相同的内容放在local.xml中，它就可以工作。

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T23:04:54.260

您的 config.xml 文件中似乎有错误。例如，您还没有关闭`<learn>`标签。还要确保在说明要使用的布局之前放置此模块的正确路由器信息。下面的例子应该给你一个线索：

```
<frontend>
         <routers>
            <learnx>
                  <use>standard</use>
                  <args>
                     <module>Yourpackage_Learnx</module>
                     <frontName>yourfrontname</frontName>
                  </args>
            </learnx>
         </routers>
         <layout>
            <updates>
                <learnx>
                    <file>learnx.xml</file>
                </learnx>
            </updates>
        </layout>
</frontend> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:05:14.533

需要更多信息，哪个文件返回 401？是找不到帮手还是xml文件本身？

替换以下标签

```
<learn> 
```

和

```
<learnx> 
```

可能会修复错误。

Magento 按以下顺序查找 xml 文件：

app/design/frontend/[interface_name]/[theme_name]/layout/learnx.xml app/design/frontend/[interface_name]/default/layout/learnx.xml app/design/frontend/base/default/layout/learnx。 xml

您是否确保您的文件位于这些位置之一

# google-apps-script - 处理程序中是否可以有一个静态变量？

> ID：12751224
> 
> 赞同：2
> 
> 时间：2012-10-05T17:29:48.500
> 
> 标签：google-apps-script

我想制作一个脚本来跟踪按下按钮的时间。众所周知，javascript 缺乏对静态变量的支持，但这通常可以作为在目标函数之外定义变量的解决方法。

然而，这对我来说在一个简单的谷歌脚本网络应用程序上不起作用。代码如下，它是模板 Web 应用程序的简单扩展。

任何人都知道如何实现这一目标？

这是谷歌应用程序的代码：

```
// Script-as-app template.

function doGet() {
  var app = UiApp.createApplication();
  var button = app.createButton('Click Me');
  app.add(button);
  var label = app.createLabel('The button was clicked.')
                 .setId('statusLabel')
                 .setVisible(false);
  app.add(label);
  myClickHandler.counter = 0;

  var handler = app.createServerHandler('myClickHandler');
  handler.addCallbackElement(label);
  button.addClickHandler(handler);

  return app;
}

function myClickHandler(e) {
  var app = UiApp.getActiveApplication();

  var label = app.getElementById('statusLabel');
  label.setVisible(true);
  label.setText('Clicked ' + myClickHandler.counter + ' times.')
  myClickHandler.counter++;
  //app.close();
  return app;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T07:25:22.427

有几种可能的方法可以实现这一点，这里是其中一种使用隐藏小部件来保存值的方法。

```
function doGet(){
  var app = UiApp.createApplication();
  var button = app.createButton('Click Me');
  app.add(button);
  var counterValue = 0;
  var label = app.createLabel('The button was clicked.')
                 .setId('statusLabel')
                 .setVisible(false);
  var counter = app.createHidden('counter').setId('counter').setValue(counterValue)               
  app.add(label).add(counter);

  var handler = app.createServerHandler('myClickHandler');
  handler.addCallbackElement(counter);
  button.addClickHandler(handler);

  return app;
}

function myClickHandler(e) {
  var app = UiApp.getActiveApplication();

  var label = app.getElementById('statusLabel');
  label.setVisible(true);
  var counterValue = Number(e.parameter.counter)
  var counter = app.getElementById('counter')
  counterValue++;
  counter.setValue(counterValue.toString())
  label.setText('Clicked ' + counterValue + ' times.')
  return app; 
} 
```

# python - BMI计算器/平方根问题

> ID：12751225
> 
> 赞同：-3
> 
> 时间：2012-10-05T17:29:49.317
> 
> 标签：python, math, python-3.x, calculator, square-root

我在我的第一个 CSC 课程中有一个作业，重点是 Python 3。这是我的第二批代码，如果它是初级的，请原谅。

任务是创建一个 BMI 计算器。BMI 由一个人的体重（磅）乘以 720.0 除以该人的身高（英寸）的平方得出。

要求是： 提示用户以磅为单位输入他/她的体重。提示用户以英尺为单位输入部分高度。提示用户以英寸为单位输入部分高度。判断用户是否高于或低于或低于健康范围。(19-25)

到目前为止，这是我的代码：

```
#problem1_<tomjenk>.py
#A program used to calculate range of BMI.
import math

def main():
    print("BMI Calculator")
    print()
    print("Please fill out the following:")
    x = eval(input("Your weight in pounds: "))
    y = eval(input("Your Height in feet: "))
    z = eval(input("Your remainder inches: "))
    q = y / 12.0
    f = x * 720.0
    t = q + z
    d = math.sqrt(t)
    total = f / d 
    print("Total", total)
main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:34:40.457

您不需要使用平方根。它是高度的平方，即 t*t。顺便说一句，你并没有真正提出问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T18:38:40.740

```
 q = y / 12.0 
```

1 英寸 = 12 英尺？你不应该把英尺乘以 12 得到英寸吗？

```
 d = math.sqrt(t)
   total = f / d 
```

这不是你描述的公式。你应该平方t，而不是平方根。

# parsing - groovy 更新配置文件

> ID：12751230
> 
> 赞同：3
> 
> 时间：2012-10-05T17:30:06.280
> 
> 标签：parsing, properties, groovy

我有一个 groovy 配置文件，看起来像

```
section1 {
    prop1 = val1
    prop2 = val2
    section2 {
       prop3 = val3
    {
}

// other style properties in this file
anotherprop = someval

// as well as some other statements
println "hello there" 
```

例如，我想编写一个 groovy 脚本来更改 prop3 的值。在 groovy 中有没有好的方法来做到这一点？这有点困难，因为该文件包含多种样式的属性以及 println。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T09:31:39.040

据我了解，您想修改配置**文件**。

由于您`println`在文件中有其他语句，因此无法使用 configurationSlurper 读取文件。

我想最简单的方法（但我希望得到 thsi 解决方案的反对票）-: 是使用 regsub：

```
def config = new File('config.groovy').getText()
def newValue = 18
def newConfig = config.replaceAll(/(?ms)(prop3[ \t]*=[ \t]*)([0-9]*)/,'$1'+newValue)
new File('config.groovy').write(newConfig) 
```

在大多数情况下，这应该是相当稳定的......

# asp.net-mvc - ASP.NET MVC 服务器端文件上传进度计算器

> ID：12751231
> 
> 赞同：3
> 
> 时间：2012-10-05T17:30:07.073
> 
> 标签：asp.net-mvc, file-upload, progress-bar, httprequest, httphandler

我正在尝试实现文件上传的基本进度条以跨多个浏览器工作，而无需额外的插件，如 Flash 或 Silverlight。有多种方法可以在客户端解决这个问题，但是我在服务器上找不到任何工作。

MVC 控制器上的任何位置（授权前/授权前和执行操作前/执行操作前）文件已作为 HttpPostedFileBase 上传到服务器。如果我使用基本的 HTTP 处理程序进行表单提交，我可以访问 Context.Request.InputStream 以及 Context.Request.Files，但只要我访问属性，流/文件就会静默加载。

我进行了广泛的研究，但找不到任何可以让我在 Session 中缓存或存储文件上传过程的东西。这至少允许我使用来自客户端的定期 AJAX 请求来监控进度。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T13:19:48.073

您应该尝试使用 Javascript 替代方案，而不是在服务器端处理它。控制器应该只在请求完成发送时才起作用。

试试这个 JavaScript/jQuery 替代 Flash/SL

[http://blueimp.github.io/jQuery-File-Upload/](http://blueimp.github.io/jQuery-File-Upload/)

# java - 按钮点击后的 Wicket 添加方法

> ID：12751233
> 
> 赞同：0
> 
> 时间：2012-10-05T17:30:19.497
> 
> 标签：java, wicket

我有一个问题，单击按钮后如何“重新加载”添加方法？例如：

```
ArrayList list = new ArrayList();
DataView dataView = new DataView("listview", new ListDataProvider(list)) {
    public void populateItem(final Item item) {
            final DBUser user = (DBUser) item.getModelObject();
            item.add(new Label("id", String.valueOf(user.getid())));
     }
};
final Load load = new Load(dataView);
    Form<?> form2 = new Form<Void>("form2") {
        @Override
        protected void onSubmit() {

            load.tick();
        }
};
add(dataView); 
```

现在加载类：

```
public class Load {
private DataView dataView;

public Load(DataView dataView)
{
    this.dataView = dataView;
}

public DataView tick()
{
    Session session = HibernateUtil.getSessionFactory().openSession();//getCurrentSession();
    session.beginTransaction();
    Query query = session.createQuery(
            "from DBUser");
    ArrayList list = new ArrayList();
    for (Iterator it=query.iterate();it.hasNext();) {
        DBUser row = (DBUser) it.next();
        DBUser dbuser = new DBUser(row.getid());
        list.add(dbuser);
    }

    dataView = new DataView("listview", new ListDataProvider(list)) {
        public void populateItem(final Item item) {
            final DBUser user = (DBUser) item.getModelObject();
            item.add(new Label("id", String.valueOf(user.getid())));
        }
    };
    session.close();
    return dataView;
} 
```

}

现在 add(line) 方法只调用了一次，如何在每次单击按钮后调用它？

这是我的 .html

```
<table frame="below" border=1>
    <tr wicket:id="listview">
         <td align="center" width="40"><span wicket:id="id"></span></td>
     </tr>
 </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T00:06:13.130

我认为，您可以通过以下方式重新加载 DataView：

```
Form<?> form2 = new Form<Void>("form2") {

    @Override
    protected void onSubmit() {
        StartPage.this.replace( load.tick() );
        // or you can use 
        // StartPage.this.addOrReplace( load.tick() ) 
        // instead
    }
}; 
```

但是您的代码也需要认真重构！至于我，我会这样写以提高可读性：

```
final Load load = new Load();

Form<?> form2 = new Form<Void>("form2") {
    @Override
    protected void onSubmit() {
        StartPage.this.replace( createDataView( load.tick() ) );
    }
};
add(form2);

add( createDataView( new ArrayList() ) ); 
```

createDataView(list) 方法的实现：

```
private DataView createDataView(List list) {
    return new DataView("listview", new ListDataProvider(list)) {
        public void populateItem(final Item item) {
            final DBUser user = (DBUser) item.getModelObject();
            item.add(new Label("id", String.valueOf(user.getid())));
        }
    };
} 
```

Load类的实现：

```
public class Load {

    public List tick() {
        List result = new ArrayList();
        // ...
        // populate list from database
        // ...
        return result;
    }
} 
```

希望这可以帮助。

# php - HTTP 请求标头缺少来自 prod 服务器的“cookie”，但包括来自本地环境

> ID：12751237
> 
> 赞同：0
> 
> 时间：2012-10-05T17:30:49.280
> 
> 标签：php, http-headers, apache2, session-cookies

我有一个使用 PHP 会话 cookie 的网络应用程序。我在云 LAMP 服务器和带有 MAMP 的桌面上运行了这个应用程序。我通过具有不同域的另一个网站上的 iframe 提供对这个应用程序的访问。该应用程序在 FF 和 Safari 上运行良好，但我在 chrome 上遇到问题。如果我将 iframe 设置为指向我的本地 MAMP 环境，则 iframe 在 http 请求标头中接收“cookie”，并且工作正常，但如果我将其设置为我的 prod 服务器，则请求标头缺少“cookie”。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:39:36.307

当您从生产服务器运行它时，您有一个 3rd 方 cookie，我猜您在 IE 上也会遇到同样的问题。

您需要制定 P3P 政策： [http ://www.w3.org/P3P/usep3p.html](http://www.w3.org/P3P/usep3p.html)

谷歌找到了一种作弊的方法，所以检查一下，它可能会有所帮助：http: [//blogs.msdn.com/b/ie/archive/2012/02/20/google-bypassing-user-privacy-settings.aspx](http://blogs.msdn.com/b/ie/archive/2012/02/20/google-bypassing-user-privacy-settings.aspx)

# python - 将浏览器功能添加到现有的 python 脚本

> ID：12751238
> 
> 赞同：1
> 
> 时间：2012-10-05T17:30:50.717
> 
> 标签：python, user-interface

本质上，我想通过 Web 浏览器运行现有的 python 脚本，显示文本和绘图（如果有的话），并保持通过命令行运行它们的能力。

我想知道是否有任何工具包可以帮助我进行开发。如果该工具包确实或允许基于 JavaScript 的交互式绘图，那就太好了。

谢谢！-阿比

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:39:48.250

[WSGI](http://wsgi.readthedocs.org/en/latest/index.html)就是为这个目的而设计的——它为 web 服务器提供了一个接口来启动 python 脚本。

您可能不想在原始状态下使用 WSGI。[Flask](http://flask.pocoo.org/)是一个简单明了的框架，你可以使用它。

如何实际构建 WSGI Web 服务器的细节远远超出了 stackoverflow 答案的范围——你可以在 Flask 的网站上找到大量的教程文档。

# c# - 使用正则表达式拆分字符串

> ID：12751240
> 
> 赞同：2
> 
> 时间：2012-10-05T17:30:53.320
> 
> 标签：c#, regex

我有以下一组字符串：

> *H。NGUYEN1, J. SATZ2,3,4,5, R. TURK2,3,4,5, K. CAMPBELL2,3,4,5, S. MOORE1
> 1Pathology, 2Mol. 生理学。和生物物理学，3Neurol.，4Intrnl。医学，大学。爱荷华州爱荷华州爱荷华州；5霍华德休斯医学。Inst.，爱荷华城，IA

预期的输出是：

> 1) *H。NGUYEN1, J. SATZ2,3,4,5, R. TURK2,3,4,5, K. CAMPBELL2,3,4,5, S. MOORE1
> 2) 1Pathology, 2Mol. 生理学。和生物物理学，3Neurol.，4Intrnl。医学，大学。爱荷华州爱荷华州爱荷华州；5霍华德休斯医学。Inst.，爱荷华城，IA

上面的字符串是作者姓名和地址的组合。
有时，字符串在名称结尾后包含 (;)，即**S. MOORE1；**有时不是，即**S. MOORE1**

我尝试了下面的正则表达式，但没有给出预期的结果。请帮助我，因为我是 Regex 的学习者。

> ;?[\d*]\w+

模式是：

> 单词后跟数字后跟分号或空格后跟数字后跟单词。例如：S. MOORE1(; Or Space)1Pathology。需要将线分割为 S.MOORE1 和 1Pathology
> 
> 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:03:07.700

试试这个：

```
(?<=\w\d)[; ](?=\d\w) 
```

它将匹配；或空格前面是一个字母，然后是一个数字，然后是一个数字和一个字母。

编辑：考虑到 , 和 ;space 和可能的换行符

```
(?<=[\w,]\d)[; ]+[\r\n\f]*(?=\d\w) 
```

[这是一个参考： http:](http://refiddle.com/9ed) //refiddle.com/9ed

你也可以使用[Expresso](http://www.ultrapico.com/Expresso.htm)来测试正则表达式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:39:43.373

试试这个：

```
(.*)S. MOORE1;{0,1}(.*) 
```

在“S. MOORE1”之前和之后捕获 2 组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T17:58:47.733

你的描述我看了很多遍，但我没有说清楚。

我最好的猜测是您需要在以“1”开头的单词之前换行，并以大写字母作为第二个字符继续，这很简单：

```
1[A-Z] 
```

# mercurial - 我可以还原变更集并保持以后的变更集完整吗

> ID：12751244
> 
> 赞同：2
> 
> 时间：2012-10-05T17:31:18.137
> 
> 标签：mercurial

假设我们有

*   变更集 14
*   变更集 15
*   变更集 16

我在变更集 16 上，我需要取出我在变更集 #14 中所做的更改，但保持 #15 和 #16 不变。

我可以用 hg 做到这一点吗？我觉得这是不可能的，因为变更集 #15 和 #16 取决于 #14.... 我听说过队列补丁。是否相关？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T17:45:27.380

看一下[退出](http://mercurial.selenic.com/wiki/Backout)命令。它只是你想要的。它将删除 chageset 14 中的更改并尝试应用以后的更改，询问您是否由于丢失信息而无法理解。

# javascript - 动态内容变化，如 github

> ID：12751245
> 
> 赞同：0
> 
> 时间：2012-10-05T17:31:18.997
> 
> 标签：javascript, jquery, dynamic-content

我正在开发一个相当大的网站，所有内容的更改都是基于`ajax`.

所有的`urls`都带有斜杠，没有使用查询字符串，例如：

`http://website.com/user/john/`

那么，什么是制作动态系统的最佳方式，就像`github`拥有一样，最重要的功能之一必须是，用户将能够`"go back"`或通过`"forward"`他的浏览历史，就像你可以在 github 中做的那样。

我目前正在使用`jquery`以及其他一些插件，所以我想避免使用大型框架。

据我了解，概念应该是这样的：

```
$("a").live("click", function(event){
    //prevent from actualy loading that page
    event.stopFromRedirecting;

    //get url
    url = $(this).attr("href");

    //get new html
    $.post(url, {},
        function(response){
            $(".my_content").html(response);
        }
    );
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:34:07.870

[https://github.com/defunkt/jquery-pjax](https://github.com/defunkt/jquery-pjax)是一个好的开始。它没有做漂亮的动画，但它会为你做历史管理和内容交换。

# java - 与 Maven Nexus 服务器共享 JARS...仅在工作站上看到使用通用代码的更新

> ID：12751247
> 
> 赞同：1
> 
> 时间：2012-10-05T17:31:21.727
> 
> 标签：java, maven, nexus

我正在尝试为我的公司设置一个 Maven Nexus 服务器，以共享我们内部构建的常见 JAR。我使用我的工作站（称为工作站 1）来构建通用 JAR，然后将`mvn deploy`其部署到 Nexus Maven 服务器。然后我将它添加到需要它的项目的 pom.xml 的依赖项中，然后我做了我的`mvn package`，一切都很好。

现在，如果我更改通用代码并`mvn deploy`使用相同的版本号运行，然后`mvn package`在第二个项目上重新运行，它将看到更改并且一切都很好。

现在让我们移动到工作站 2。如果我`mvn package`在需要通用代码的项目上做一个，一切都很好。但是，如果通用代码发生更改并且我重新运行`mvn package`命令，它看起来像是要进入工作站上的本地存储库并使用该版本，而不是 Nexus 中的新版本！

所以我的问题如下......

1.  是否`mvn deploy`在连接存储库之前在本地存储库中保存副本？
2.  如何让项目在工作站上的本地存储库之前检查 nexus 存储库以获取最新文件？

该代码是一个接受快照，因此我希望每次用户尝试访问它时都对其进行更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:48:10.160

1) maven 咨询本地存储库，只有错过它才使用在线存储库 (nexus)

2) 我不知道

无论如何：（SNAPSHOTS 除外）您不应该修改已发布的人工制品而不更新其版本！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:20:25.863

你可以运行`mvn -U package`。使用 -U Maven 将始终检查存储库（在您的情况下为 Nexus）以获取更新的 SNAPSHOT 版本的依赖项。

您还可以将配置添加到您的 settings.xml 以始终查找新版本的依赖项。请参阅[设置参考](http://maven.apache.org/settings.html#Repositories)，配置名为`<updatePolicy>always</updatePolicy>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T18:20:34.873

我明白了..我必须始终在我的 settings.xml 中添加快照设置

# php - php处理时间以更正日期并进行比较

> ID：12751255
> 
> 赞同：0
> 
> 时间：2012-10-05T17:31:44.000
> 
> 标签：php, com, process

> **可能重复：**
> [如何在 PHP 中以分钟为单位获取时差](https://stackoverflow.com/questions/365191/how-to-get-time-difference-in-minutes-in-php)

我一直在尝试获取某个进程的时间，但我想将它与当前时间进行比较，我的意思是我想获得进程开始时的总差异，在这个博客上：[php get process creation time](http://geeks-wiki.blogspot.com/2012/10/php-get-process-creation-time.html)

这家伙已经告诉程序来获取进程时间，它工作正常，但我只停留在将时间与当前时间进行比较！

有什么解决办法吗？或任何替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:42:52.160

使用这样的东西

```
$msc=microtime(true);
$mysql_query($sql);
// or any process
$msc=microtime(true)-$msc; 
```

# mysql - Mysql: #1064 更改时存储过程出错

> ID：12751256
> 
> 赞同：-1
> 
> 时间：2012-10-05T17:31:59.097
> 
> 标签：mysql, database, stored-procedures, mysql-error-1064

成功创建后，我尝试更改存储过程。

```
DELIMITER $$
ALTER PROCEDURE `purchaseItem`(
      IN productID INT, 
      IN quantity INT,  
      IN memID INT,
      OUT stat INT)
BEGIN
            DECLARE qnty INT;
            DECLARE price decimal(10,2);
            DECLARE description VARCHAR(500);

            SET qnty = (SELECT p_Unit FROM product WHERE p_ID = productID);
            IF qnty >= quantity && qnty != 0 THEN
                SELECT p_Price INTO price FROM product WHERE p_ID = productID;
                                SELECT p_Desc INTO description FROM product WHERE p_ID = productID;
                INSERT INTO purchase VALUES 
                      (NULL, productID, quantity, price, description , memID, 0, NULL);
                UPDATE product 
                SET p_Unit = (qnty - quantity) 
                WHERE p_ID = productID;
                SET stat = 0;
            ELSE
                SET stat = 1;
            END IF;

    END$$

DELIMITER ; 
```

但是，在尝试更改 SP 时出现以下错误。

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '( IN productID INT, IN quantity INT, IN memID INT, ' at line 1 
```

有人可以指出我在哪里做错了。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:44:01.530

根据[*MySQL 5.6 参考手册*](https://dev.mysql.com/doc/refman/5.6/en/alter-procedure.html)[中的第13.1.4 节“`ALTER PROCEDURE`语法”](https://dev.mysql.com/doc/refman/5.6/en/alter-procedure.html)

 *> [...] 您不能使用 [the `ALTER PROCEDURE`] 语句更改存储过程的参数或主体；`DROP PROCEDURE`要进行此类更改，您必须使用和删除并重新创建过程`CREATE PROCEDURE`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:47:31.230

由于您无法使用 ALTER PROCEDURE 更改程序主体，因此您必须删除并重新创建相同的程序或使用一些 GUI 工具来编辑/更新 Mysql 存储过程。

```
ex. alter procedure employeetest sql security invoker; 
```

**注意*您可以更改安全类型，例如..INVOKER 或 DEFINER**

GUI 工具免费软件：[Mysql 的 TOAD。](http://toadformysql.com/index.jspa)*

# html - 如何将视频放在图像顶部

> ID：12751257
> 
> 赞同：0
> 
> 时间：2012-10-05T17:32:01.643
> 
> 标签：html

将视频放在较大图像之上并使其水平和垂直居中在图像中的正确 HTML 是什么？

这是视频的代码：

```
<br>
<div style="float:right;">
  <div id="ext-gen1825" autoplay="false" height="187" width="224" class="ddcPlayer-holder" style="-moz-user-select: none; background-color: #515151; -moz-border-radius: 5px; border-radius: 5px; background-repeat: no-repeat; background-position: center;width: 224px;height: 187px;background-image: url(http://videos2.dealer.com/clients/b/baierlautomotivemars/b9716e230a0d02b7010c94a788f23c9e_clicktoplay_en_US.png);" ddcplayerinfo="http://videos2.dealer.com/clients/b/baierlautomotivemars/b9716e230a0d02b7010c94a788f23c9e.xml-224px-187px">
    &nbsp;
  </div>
</div> 
```

这是图像的代码：

```
<img id="ext-gen2174" src="http://pictures.dealer.com/b/baierlusedcars/0487/31f397280a0d02b700ae8af470747bb2.png"href="http://pictures.dealer.com/b/baierlusedcars/0487/31f397280a0d02b700ae8af470747bb2.png" title="Better Story.png" class="wysiwyg-image" tabindex="30000" style="height: 202px; width: 236px;"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:38:49.407

没有代码，可能很难确切地知道您在寻找什么......有不同的方法可以实现这一点。

在这个 div 中有一个带有背景图像和视频的 div。

还;

与您的图像`position: relative;`有一个 div，在该 div 内有一个与您的视频和设置的 div `position: absolute;`。相应地设置顶部和左侧 css 属性（50%，但有时您可能需要更少）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:39:02.280

我认为最简单的方法是使用表格。该表格将只有一个单元格，您填充该单元格，这将自动为您居中图像。我在下面使用了 iframe，因为这是来自 youtube 的嵌入式视频的默认代码。

```
<table background="http://www.example.com/images/example.jpg" cellpadding=50>
<tr>
<td>
<iframe width="420" height="315" src="http://www.youtube.com/embed/te6qG4yn-Ps"  frameborder="0" allowfullscreen></iframe>
</td>
</tr>
</table> 
```

# entity-framework - 批量更新/删除EF5

> ID：12751258
> 
> 赞同：41
> 
> 时间：2012-10-05T17:32:04.863
> 
> 标签：entity-framework, batch-processing, entity-framework-5

使用（实体框架）EF5 处理批量更新的最佳方法是什么？我有两个我感兴趣的特殊案例：

1.  更新 100 到 100.000 个 Id 之间的列表 (List) 的字段（例如 UpdateDate），该列表是主键。单独调用每个更新似乎开销很大并且需要很长时间。

2.  一次插入许多（也在 100 和 100.000 之间）相同的对象（例如用户）。

有什么好的建议吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-05T17:45:00.770

1.  有两个开源项目允许这样做：[EntityFramework.Extended](https://github.com/loresoft/EntityFramework.Extended)和[Entity Framework Extensions](http://efe.codeplex.com/)。您还可以在 EF 的 codeplex 站点上查看有关批量更新的[讨论。](https://entityframework.codeplex.com/discussions/376901)
2.  通过 EF 插入 10 万条记录首先是错误的应用程序架构。您应该为数据导入选择不同的轻量级技术。即使是 EF 的内部操作，拥有如此庞大的记录集，也会花费您大量的处理时间。目前没有针对 EF 的批量插入的解决方案，但在 EF 的代码 plex 站点上对此功能进行了[广泛讨论。](https://entityframework.codeplex.com/discussions/377636)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-10-23T05:57:45.083

我看到以下选项：

1\. 最简单的方法 - 手动创建 SQL 请求并通过[ObjectContext.ExecuteStoreCommand执行](http://msdn.microsoft.com/en-us/library/system.data.objects.objectcontext.executestorecommand.aspx)

```
context.ExecuteStoreCommand("UPDATE TABLE SET FIELD1 = {0} WHERE FIELD2 = {1}", value1, value2); 
```

2\. 使用[EntityFramework.Extended](https://github.com/loresoft/EntityFramework.Extended)

```
context.Tasks.Update(
    t => t.StatusId == 1, 
    t => new Task {StatusId = 2}); 
```

3\. 为 EF 创建自己的扩展。有一篇文章[Bulk Delete](http://msmvps.com/blogs/matthieu/archive/2010/05/21/bulk-delete-v3.aspx)通过继承*ObjectContext*类来实现这个目标。值得一看。批量插入/更新可以以相同的方式实现。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T17:44:09.303

您可能不想听到它，但最好的选择是不要将 EF 用于批量操作。要跨记录表更新字段，请在数据库中使用 Update 语句（可能通过映射到 EF 函数的存储过程调用）。您还可以使用 Context.ExecuteStoreQuery 方法向数据库发出更新语句。

对于大量插入，最好的选择是使用批量复制或 SSIS。EF 将要求为插入的每一行单独命中数据库。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-20T15:10:18.487

应该使用 SqlBulkCopy 类来完成批量插入。请参阅预先存在的 StackOverflow Q&A 关于整合两者：[SqlBulkCopy 和实体框架](https://stackoverflow.com/questions/2553545/sqlbulkcopy-and-entity-framework)

SqlBulkCopy 比 bcp（批量复制命令行实用程序）甚至 OPEN ROWSET 更加用户友好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-06T03:46:03.953

```
 public static bool BulkDelete(string tableName, string columnName, List<object> val)
    {
        bool ret = true;

        var max = 2000;
        var pages = Math.Ceiling((double)val.Count / max);
        for (int i = 0; i < pages; i++)
        {
            var count = max;
            if (i == pages - 1) { count = val.Count % max; }

            var args = val.GetRange(i * max, count);
            var cond = string.Join("", args.Select((t, index) => $",@p{index}")).Substring(1);
            var sql = $"DELETE FROM {tableName} WHERE {columnName} IN ({cond}) ";

            ret &= Db.ExecuteSqlCommand(sql, args.ToArray()) > 0;
        }

        return ret;
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-16T11:52:54.460

我同意公认的答案，即 ef 可能是批量插入的错误技术。但是，我认为值得一看[EntityFramework.BulkInsert](https://efbulkinsert.codeplex.com/)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-27T15:24:54.670

这是我成功完成的工作：

```
private void BulkUpdate()
{
    var oc = ((IObjectContextAdapter)_dbContext).ObjectContext;
    var updateQuery = myIQueryable.ToString(); // This MUST be above the call to get the parameters.
    var updateParams = GetSqlParametersForIQueryable(updateQuery).ToArray();
    var updateSql = $@"UPDATE dbo.myTable
                       SET col1 = x.alias2
                       FROM dbo.myTable
                       JOIN ({updateQuery}) x(alias1, alias2) ON x.alias1 = dbo.myTable.Id";
    oc.ExecuteStoreCommand(updateSql, updateParams);
}

private void BulkInsert()
{
    var oc = ((IObjectContextAdapter)_dbContext).ObjectContext;
    var insertQuery = myIQueryable.ToString(); // This MUST be above the call to get the parameters.
    var insertParams = GetSqlParametersForIQueryable(insertQuery).ToArray();
    var insertSql = $@"INSERT INTO dbo.myTable (col1, col2)
                       SELECT x.alias1, x.alias2
                       FROM ({insertQuery}) x(alias1, alias2)";
    oc.ExecuteStoreCommand(insertSql, insertParams.ToArray());
}    

private static IEnumerable<SqlParameter> GetSqlParametersForIQueryable<T>(IQueryable<T> queryable)
{
    var objectQuery = GetObjectQueryFromIQueryable(queryable);
    return objectQuery.Parameters.Select(x => new SqlParameter(x.Name, x.Value));
}

private static ObjectQuery<T> GetObjectQueryFromIQueryable<T>(IQueryable<T> queryable)
{
    var dbQuery = (DbQuery<T>)queryable;
    var iqProp = dbQuery.GetType().GetProperty("InternalQuery", BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public);
    var iq = iqProp.GetValue(dbQuery, null);
    var oqProp = iq.GetType().GetProperty("ObjectQuery", BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public);
    return (ObjectQuery<T>)oqProp.GetValue(iq, null);
} 
```

# websolr - 多种语言的 Websolr 同义词

> ID：12751260
> 
> 赞同：0
> 
> 时间：2012-10-05T17:32:07.743
> 
> 标签：websolr

如何为 websolr 使用单独的同义词词典？（配置面板中只有一个同义词文件。我可能需要为每种语言设置单独的同义词）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:01:43.437

现在我们只支持一个同义词文件。我们对更灵活的配置有一些想法，将来可能会解决这个问题。最好在我们的官方支持渠道向我们提出这些问题：http: [//help.websolr.com/](http://help.websolr.com/)

# visual-studio - 即使操作成功，PowerShell 也会在控制台中将一些 git 命令结果显示为错误

> ID：12751261
> 
> 赞同：13
> 
> 时间：2012-10-05T17:32:11.713
> 
> 标签：visual-studio, git, powershell, visual-studio-2012, nuget

当我在 PowerShell 中执行 Git 命令时，一切都很好，除了 PowerShell 控制台和 NuGet 控制台之间的一个小区别。“”的输出`git push`在 NuGet 窗口中以红色错误文本显示，但在 PowerShell 窗口中显示正常。

这是一个显示差异的视频。" `git push`" 在包管理器控制台中将其结果显示为错误。该操作有效，只是令人讨厌的是操作的输出显示为错误。

[看视频](http://www.youtube.com/watch?v=5KL2vhBrtd0)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-10-08T21:47:42.980

根本原因：`git push`将输出发送到标准错误，而不是标准输出。看[这里](http://git.661346.n2.nabble.com/git-push-output-goes-into-stderr-td6758028.html)，[这里](https://github.com/sbt/sbt-release/issues/20)。

当本机工具将输出发送到 stderr 时，作为主机的 Powershell.exe 不会担心，因为这不仅是打印错误消息而且打印状态消息和其他内容的一种常见方式。例如，尝试运行一些完全虚假的东西，例如

```
PS C:\> $result = findstr.exe q w e r t y 
```

Findstr 正在向 stderr 发送错误消息，因此 Powershell.exe 知道不将该“错误”输出分配给您的变量，但它也不会惊慌失措。

另一方面，NuGet 包管理器主机在这方面并不聪明。在运行任何本机工具时，此主机会将 stderr 中的任何内容解释为真正的错误。因此，您会看到红色文本、诊断消息等。`findstr`在 PM 中尝试上面的相同示例，您将看到完整的错误。

一些解决方法/建议：

*   使用该`--porcelain`参数，这会导致输出转到[stdout，而不是 stderr](http://man.he.net/man1/git-push)。
*   设置`$errorView = 'CategoryView'`至少会最小化错误消息，但不会删除它们
*   重定向 stderr 并像这样进行简单的控制台编写： `git push 2>&1 | write-host`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-29T11:42:21.417

要解决此问题并继续使用 Powershell ISE，您可以创建一个包含以下内容的 cmd 文件：

```
@echo off
git.exe %1 %2 %3 %4 %5 %6 %7 %8 %9 2>&1 
```

并将其注册为别名（在您的个人资料中）：

```
Set-Alias git "git.cmd" 
```

# c# - 找不到解决有些复杂和不寻常的要求的方法

> ID：12751274
> 
> 赞同：0
> 
> 时间：2012-10-05T17:33:07.383
> 
> 标签：c#, asp.net, sql, entity-framework, database-design

我正在使用 ASP.NET / C# 开发 CMS。它工作正常，生活很好。但是，决定添加额外的功能来支持更广泛的网站。基本上，当前的 CMS 仍处于 alpha 阶段，但将能够托管为同一组公司运行的多个网站的数据，这些公司都有相同的要求。

我按照下图构建了数据库：

“出于安全原因删除了图像”

现在，除了这个图表，我还被要求添加对不同“属性”下的产品的支持，而不是扇区。这意味着产品现在可以具有一个`type`和许多其他属性。因此，假设您正在使用我们的网站之一，而我们制作薄纸。产品应该以某种方式支持按“类型”（例如“组织”）和“应用程序”（例如“您如何使用它”）以及将来可能出现的其他未知“属性”进行过滤。

例如，产品可能属于“农业包装”部门，属于“袋”类型，并通过某种应用方式应用。最终结果是能够根据产品的使用方式和/或它们的类型和/或它们所属的部门对产品进行分类。甚至都在一起。

将此类问题包含到数据模型和 CMS 中的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:08:25.220

看起来你正在采取正确的方法。如果可以为产品分配多个新的“属性”，那么您将需要创建一个新的属性表，您可以在其中定义一组有限的属性。然后通过交叉引用表将该表链接到 Products，就像您对 Products & Sectors 所做的那样。如果只能为产品分配单个属性，则添加 Attributes 表，但不使用交叉引用表，而是在 Products 表中添加 AttributeID 列以连接两者。

然而，我觉得我可能会告诉你一些你已经知道的事情。因此，如果有任何其他信息或您想要的更多细节，也许您可​​以发布更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:17:27.553

您正在寻找的模式称为[EAV](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model) 您最终将得到一个属性表和一个属性值表，其中包含产品 ID、属性 ID 和属性值。

# backbone.js - Chaplin Backbone 框架 - 视图 - 如何使用初始化和渲染方法？

> ID：12751275
> 
> 赞同：1
> 
> 时间：2012-10-05T17:33:06.900
> 
> 标签：backbone.js, chaplinjs

我需要在初始化和渲染方法上执行一些代码，但据我所知，在使用卓别林时我不能直接修改它们——当我定义自己的初始化方法时，我的路由停止工作。

我也试过 afterInitialize() 但它似乎并不意味着被覆盖：[https ://github.com/chaplinjs/chaplin/issues/168#issuecomment-8015915](https://github.com/chaplinjs/chaplin/issues/168#issuecomment-8015915)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:08:05.510

> [...] 但据我了解，我不能在使用卓别林时直接修改它们

只要您适当地委托给扩展原型，您*就可以直接修改它们。*

由于您尚未标记您的问题`javascript`或`coffeescript`，以下是每种解决方案的两种解决方案。首先是javascript。注意我们必须如何显式调用扩展函数。

```
var View = Chaplin.View.extend({
  initialize: function(options) {
    // Add code here ..

    // The below invokes the initialize function of the
    // base Chaplin.View class in the context of 
    // this class
    Chaplin.View.prototype.initialize.call(this, arguments);

    // .. or here
  }
}); 
```

接下来是`coffeescript`，这使得这种事情变得更加容易。

```
class View extends Chaplin.View
  initialize: ->
    // Add code here ..

    // The below auto-magically invokes the 
    // initialize method of the base class
    super

    // .. or here 
```

# android - 如何在android中打开/关闭蓝牙？

> ID：12751276
> 
> 赞同：0
> 
> 时间：2012-10-05T17:33:09.587
> 
> 标签：android, bluetooth

我一直在尝试通过以下代码获取android中蓝牙的状态：我`BluetoothAdapter`在方法中实例化......并像这样`onCreate()`调用`blue.isEnabled()`

```
if(blue.isEnabled()){
....
} 
```

但是我一直收到这个错误。是的，我已经声明了所有权限`Bluetooth`

**错误日志**

```
10-05 21:48:16.881: E/AndroidRuntime(538): FATAL EXCEPTION: main
10-05 21:48:16.881: E/AndroidRuntime(538): java.lang.NullPointerException
10-05 21:48:16.881: E/AndroidRuntime(538):  at com.emazdoor.remind.me.main.onClick(main.java:58)
10-05 21:48:16.881: E/AndroidRuntime(538):  at android.view.View.performClick(View.java:2485)
10-05 21:48:16.881: E/AndroidRuntime(538):  at android.view.View$PerformClick.run(View.java:9080)
10-05 21:48:16.881: E/AndroidRuntime(538):  at android.os.Handler.handleCallback(Handler.java:587)
10-05 21:48:16.881: E/AndroidRuntime(538):  at android.os.Handler.dispatchMessage(Handler.java:92)
10-05 21:48:16.881: E/AndroidRuntime(538):  at android.os.Looper.loop(Looper.java:123)
10-05 21:48:16.881: E/AndroidRuntime(538):  at android.app.ActivityThread.main(ActivityThread.java:3683)
10-05 21:48:16.881: E/AndroidRuntime(538):  at java.lang.reflect.Method.invokeNative(Native Method)
10-05 21:48:16.881: E/AndroidRuntime(538):  at java.lang.reflect.Method.invoke(Method.java:507)
10-05 21:48:16.881: E/AndroidRuntime(538):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-05 21:48:16.881: E/AndroidRuntime(538):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-05 21:48:16.881: E/AndroidRuntime(538):  at dalvik.system.NativeStart.main(Native Method) 
```

请帮忙！谢谢

**完整代码**

```
public class main extends Activity implements OnClickListener{

    Button CallButton, SMSButton, BirthdayButton, BusinessButton; 
    BluetoothAdapter b1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout_main);
        b1 = BluetoothAdapter.getDefaultAdapter();

        Initialiser();

    }

    private void Initialiser() {

        CallButton = (Button) findViewById(R.id.CallButton);
        SMSButton = (Button) findViewById(R.id.SMSButton);
        BirthdayButton = (Button) findViewById(R.id.BirthdayButton);
        BusinessButton = (Button) findViewById(R.id.BusinessButton);

        CallButton.setOnClickListener(this);
        SMSButton.setOnClickListener(this);
        BirthdayButton.setOnClickListener(this);
        BusinessButton.setOnClickListener(this);

    }

    public void onClick(View arg0) {
    switch(arg0.getId()){
    case R.id.CallButton:
        startActivity(new Intent(this, CallRemind.class));
        break;
    case R.id.SMSButton:
        Toast.makeText(this, "SMS Button", Toast.LENGTH_LONG).show();
        startActivity(new Intent(this, SMSReminder.class));
        break;
    case R.id.BirthdayButton:
        Toast.makeText(this, "Birthday Button", Toast.LENGTH_LONG).show();

        b1.enable();
        break;
    case R.id.BusinessButton:
        Toast.makeText(this, "Business Button", Toast.LENGTH_LONG).show();
        break;
    }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.layout_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:08:19.947

从`BluetoothAdapter.getDefaultAdapter()`文档：

```
Returns
the default local adapter, or null if Bluetooth is not supported on this hardware platform 
```

你在模拟器上检查你的代码吗？或者也许在没有蓝牙的手机上？

# wpf - Tag Dependency Property 的祖先绑定失败，Property not found

> ID：12751277
> 
> 赞同：0
> 
> 时间：2012-10-05T17:33:10.863
> 
> 标签：wpf, xaml, data-binding, dependency-properties

我正在构建一个基于 MEF 的模块加载框架……基本布局是主 MEF 应用程序加载模块并将数据绑定到各种导出对象，包括模块的功能区和模块主视图（作为 UserControl）。

在模块中，功能区在一个 XAML 文件中定义为 ResourceDictionary，主视图（模块的窗口内容）在单独的 XAML 文件中定义为 UserControl。

MEF 框架应用程序的主窗口 XAML 绑定了模块的用户控件和功能区。通过功能区，它还将功能区的标记依赖属性链接到用户控件。这样，实际的模块功能区可以访问 UserControl（用于确定在网格中选择了哪些元素）。

这一切都很好......标签与用户控件正确关联。我遇到的问题出在模块的功能区中。我尝试绑定到 UserControl 中的子元素，但绑定失败。以下是模块的功能区绑定失败的示例：

```
<ribbon:RibbonButton
   Command=”blah”
   Label={“Binding RelativeSource={RelativeSource AncestorType=ribbon:Ribbon},
   Path=Tag.Username.Text}”/> 
```

正如我所提到的，标签已正确解析为模块的 UserControl ......但随后我在用户名上收到绑定错误（未找到属性）。

以下是我在 MEF 框架应用程序的主窗口中绑定 Tag 属性的方法：

```
<ribbon:Ribbon x:Name=”Ribbon”
   DataContext=”blah”,
   Tag=”{Binding ElementName=RibbonWindow,              
   Path=DataContext.ModuleList.CurrentItem.View}”&gt; 
```

顺便说一句，我无法使用 Prism 有点手足无措……

# android - 在第一次触摸时放大 TextView，在第二次触摸时缩小

> ID：12751278
> 
> 赞同：0
> 
> 时间：2012-10-05T17:33:16.260
> 
> 标签：android, android-layout, android-animation, textview

我对 Android 比较陌生。

描述 -

我有一个`LinearLayout`with `TextView`。我正在`TextView`动态添加。

当我触摸它时`TextView`，我想要它`ScaleUp`，当我`TextView`再次触摸它时，我想要它`ScaleDown`。

我的问题是——

1.  当一个`TextView`是`scaled up`并且任何其他`TextView`是`touched`。旧的`TextView`应该`scale down`和新的`touched` `TextView`应该`scale up`。
2.  当我触摸 a 时`scaled up` `TextView`，它`TextView`应该按比例缩小。

**这是我尝试过的**

我有 2 组 xml。1 用于放大

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
 <scale
    android:fromXScale="1.0"
    android:fromYScale="1.0"
    android:toXScale="3.0"
    android:toYScale="3.0" >
</scale> 
```

另一个用于缩小

```
<set xmlns:android="http://schemas.android.com/apk/res/android">
 <scale
    android:fromXScale="3.0"
    android:fromYScale="3.0"
    android:toXScale="1.0"
    android:toYScale="1.0" >
</scale> 
```

我的`Activity`课——

```
myTextView.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {

                if (event.getAction() == MotionEvent.ACTION_DOWN) {
                    if (myTextView.getAnimation() == null) {
                        Animation a = AnimationUtils.loadAnimation(
                                getBaseContext(), R.anim.scale_up);
                        a.setFillAfter(true);
                        v.startAnimation(a);
                    } else {
                        v.setOnTouchListener(new OnTouchListener() {
                            @Override
                            public boolean onTouch(View v1,
                                    MotionEvent event) {
                                if (event.getAction() == MotionEvent.ACTION_DOWN) {
                                    Animation a1 = AnimationUtils
                                            .loadAnimation(
                                                    getBaseContext(),
                                                    R.anim.scale_down);
                                    a1.setFillAfter(true);
                                    v1.startAnimation(a1);

                                }
                                return true;
                            }
                        });
                    }
                }
                return false;
            }

        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:52:49.320

制作一个 textview 集合并在其中存储状态。每次触摸时，您都会循环此集合并搜索正确的 textview 并用它做适当的事情。您还可以通过此集合搜索并检查哪些文本视图被放大或缩小，因为您自己管理状态。

# c# - 计时器不会重置为 30 分钟 - 每次我返回此页面时，计时器仍在运行

> ID：12751279
> 
> 赞同：1
> 
> 时间：2012-10-05T17:33:20.073
> 
> 标签：c#, asp.net

> **可能重复：**
> [有谁知道如何解决这个问题？每当我返回网页时，我的计时器都不会重置为 30 分钟](https://stackoverflow.com/questions/12734366/does-anyone-knows-how-to-fix-thismy-timer-wont-reset-to-30mins-whenever-i-go-b)

这是我的代码，希望有人能帮助我，谢谢

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        Timer1.Enabled = true;
        if (Session["CountdownTimer"] == null )
        {
            Session["CountdownTimer"] = new CountDownTimer(TimeSpan.Parse("00:30:00"));
            (Session["CountdownTimer"] as CountDownTimer).Start();
        }
    }
}

protected void Timer1_Tick(object sender, EventArgs e)
{
    if (Session["CountdownTimer"] != null)
    {
        if (Label1.Text != "00:00:00")
        {
            Label1.Text = (Session["CountdownTimer"] as CountDownTimer).TimeLeft.ToString();
            Session["time"] = Label1.Text;
        }
        else if((Session["CountdownTimer"] as CountDownTimer).TimeLeft.Seconds <= 0)
        {
            (Session["CountdownTimer"] as CountDownTimer).Stop();
            Timer1.Enabled = false;
            Response.Redirect("timer.aspx");
        }
    }
}

public class CountDownTimer
{
    public TimeSpan TimeLeft;
    System.Threading.Thread thread;
    public CountDownTimer(TimeSpan original)
    {
        this.TimeLeft = original;
    }
    public void Start()
    {
        // Start a background thread to count down time
        thread = new System.Threading.Thread(() =>
        {
            while (true)
            {
                System.Threading.Thread.Sleep(1000);
                TimeLeft = TimeLeft.Subtract(TimeSpan.Parse("00:00:01"));

            }
        });
        thread.Start();
    }

    public void Stop()
    {
        // Start a background thread to count down time
        thread = new System.Threading.Thread(() =>
        {
            while (true)
            {
                System.Threading.Thread.Sleep(1000);
                TimeLeft = (TimeSpan.Parse("00:00:00"));

            }
        });
        thread.Abort();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T17:44:10.873

我想我不确定您要达到的目标。但是，一些观察结果可能会帮助您获得所需的东西？

*   `Timer1_Tick`永远不会被调用。
*   `CountDownTimer.Start`有一个`while(true)`永远不会退出的循环。
*   `CountDownTimer.Start`睡后不做任何有趣的事
*   `CountDownTimer.Stop`还有一个永远不会退出的 while(true)` 循环。
*   做什么`Timer1.Enable`？
*   你想在这里做什么？这完全不清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:48:31.797

不是真的回答...但不适合评论...

在大多数情况下，要实现任何类型的计时器，可以依靠现有时间（DateTime.Now）并知道计时器何时开始/停止。

重新考虑您的设计可能是个好主意。以下事情会导致奇怪/意外的行为：

*   将不可序列化的对象置于会话状态，
*   依赖内存中的会话状态是持久的（即在应用程序重建、服务器重新启动后幸存下来）
*   在 ASP.Net 应用程序中使用线程
*   使用 Thread.Abort
*   使用 Thread.Sleep

# asp.net-mvc-3 - mvc3 和 linq to sql 架构

> ID：12751280
> 
> 赞同：0
> 
> 时间：2012-10-05T17:33:24.843
> 
> 标签：asp.net-mvc-3, data-access-layer

我正在构建一个 MVC3 应用程序，并且我正在为我的 DAL 使用 Linq to sql。我的 DAL 称为 MyDataReader 并处理创建/初始化数据上下文，此外它还定义了从数据库中检索数据的所有方法。所有的方法都是实例方法，所以为了调用这些方法，我需要实例化一个 MyDataReader 对象。

我的问题是：在我的 DAL 中调用方法的最佳方法是什么。最初，每当我需要调用 DAL 方法时，我都会从控制器中实例化一个 MyDataReader 对象。然后我意识到每次实例化 MyDataReader 对象时，都会创建 datacontext 对象并建立连接。

在我的第二种方法中，我在 Global.asax 文件中创建了一个静态参数，如下所示：

```
public class MvcApplication : System.Web.HttpApplication
{

        public static MyDataReader reader;
        protected void Application_Start()
         {
            reader = new MyDataReader();
            AreaRegistration.RegisterAllAreas();
            RegisterGlobalFilters(GlobalFilters.Filters);
            RegisterRoutes(RouteTable.Routes);
         }
} 
```

这将数据库初始化操作限制在最低限度。我可以通过以下方式从我的所有控制器中调用 DAL 方法：

```
MvcApplication.reader.CallTheMethod() 
```

这是一个好方法吗？调用 DAL 方法的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:39:05.673

不，这绝对是最糟糕的做法。最大的原因是所有并发用户之间共享静态对象。这意味着多个用户添加、删除、查询相同的上下文。这是灾难的根源，可能会导致数据损坏。

另一个问题是数据上下文被设计为短暂存在的，因此它们不管理其内部缓存和列表，它们只是假设您在完成操作后将处理它们。

您无需担心连接管理。在内部，这是在连接池中管理的，.net 会自动重用连接，并在它们空闲一段时间后将其丢弃。

不要过早地优化。你通常是错的。

# objective-c - 如何设置在满足约束后应该调整哪些视图？

> ID：12751284
> 
> 赞同：0
> 
> 时间：2012-10-05T17:33:56.643
> 
> 标签：objective-c, macos, autolayout

在调整窗口大小时满足所有自动布局约束时，如何指定首选调整大小的视图？

例如，当下面的窗口改变其大小时，我想调整视图 A 而不是视图 B 的大小。![在此处输入图像描述](../Images/d24f4edaa4a9d842cb92ed17631fb2cf.png)

如果我什么都不做，视图 B 会调整大小而不是视图 A。![在此处输入图像描述](../Images/e6f6d160a81c8314c40ada766e05828d.png)

我想要的是调整视图 A 的大小而不是视图 B。

非常感谢！;-)

# python - 如何使用Python检索需要http登录的xml页面？

> ID：12751293
> 
> 赞同：1
> 
> 时间：2012-10-05T17:34:14.647
> 
> 标签：python, xml, iis, login, urllib

当我访问 IIS 服务器上的页面以检索 xml 时，通过浏览器使用查询参数（使用下面示例中的 http）我会弹出一个用户名和密码登录对话框（似乎是系统标准对话框/形式）。一旦提交，数据就会到达。作为一个xml页面。

如何使用 urllib 处理这个问题？当我执行以下操作时，我永远不会提示输入 uid/psw。我只是得到一个回溯，指示服务器（正确）id 是我未授权的。在 Ipython 笔记本中使用 python 2.7

```
f = urllib.urlopen("http://www.nalmls.com/SERetsHuntsville/Search.aspx?SearchType=Property&Class=RES&StandardNames=0&Format=COMPACT&Query=(DATE_MODIFIED=2012-09-28T00:00:00%2B)&Limit=10")
s = f.read()
f.close() 
```

指向 doc 的指针也很感激！没有找到这个确切的用例。

我计划将 xml 解析为 csv，如果这有影响的话。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T17:36:55.347

您正在处理[http authentication](http://en.wikipedia.org/wiki/Basic_access_authentication)。我一直觉得快速使用 urllib 库很棘手。[requests](http://docs.python-requests.org/en/latest/) python包使它超级简单。

```
url = "http://www.nalmls.com/SERetsHuntsville/Search.aspx?SearchType=Property&Class=RES&StandardNames=0&Format=COMPACT&Query=(DATE_MODIFIED=2012-09-28T00:00:00%2B)&Limit=10"
r = requests.get(url, auth=('user', 'pass'))
page = r.text 
```

如果您查看该 url 的标头，您会发现它正在使用摘要身份验证：

> {'content-length': '1893', 'x-powered-by': 'ASP.NET', 'x-aspnet-version': '4.0.30319', 'server': 'Microsoft-IIS/7.5' , 'cache-control': 'private', 'date': 'Fri, 05 Oct 2012 18:20:54 GMT', 'content-type': 'text/html; charset=utf-8', 'www-authenticate': **'Digest realm=** "Solid Earth", nonce="MTAvNS8yMDEyIDE6MjE6MjUgUE0", opaque="0000000000000000", stale=false, algorithm=MD5, qop="auth"'}

所以你需要：

```
from requests.auth import HTTPDigestAuth
r = requests.get(url, auth=HTTPDigestAuth('user', 'pass')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:39:41.950

有很多方法可以做到，但我建议你从[urllib2](http://docs.python.org/library/urllib2.html)开始，它包括电池。

```
import urllib2, base64

req = urllib2.Request("http://webpage.com//user")
b64str = base64.encodestring('%s:%s' % (username, password)).replace('\n', '')
request.add_header("Authorization", "Basic %s" % b64str)   
result = urllib2.urlopen(req) 
```

如果您的任务变得更难，您可以使用[requests](http://docs.python-requests.org/en/latest/)、[beautifulsoup](http://www.crummy.com/software/BeautifulSoup/)、[mechanize](http://wwwsearch.sourceforge.net/mechanize/)或[selenium 。](http://pypi.python.org/pypi/selenium)谷歌搜索将为您提供足够的示例，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T17:53:52.773

这可以通过以下几种方式完成：

1.  使用`urllib`/`urllib2`和`requests`其他人建议的那样
2.  用于[`Mechanize`](http://wwwsearch.sourceforge.net/mechanize/)模拟手动填表并取回响应

# ruby-on-rails - 可安装引擎中非标准资产的 Rails 路线

> ID：12751295
> 
> 赞同：3
> 
> 时间：2012-10-05T17:34:37.120
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, routes, asset-pipeline, rails-engines

我有一些非标准资产（即不是图像/javascript 文件/样式表的文件，例如 json 和二进制文件）`isolate_namespace`位于`app/assets/data`. 我希望这些成为资产管道的一部分（与例如图像相同）。我可以将它们添加到资产路径集合中，例如

```
class Engine < ::Rails::Engine
  config.after_initialize do
    Rails.application.config.assets.paths << root.join("app", "assets", "data")
  end
end 
```

我可以在 Rails 控制台中看到资产对资产管道是可见的（例如，通过`Rails.application.assets[]`和`ActionController::Base.helpers.asset_path`）。例如，对于一个文件`app/assets/data/foo.json`，`asset_path`托管应用程序的 rails 控制台中的助手给了我一个路径`assets/foo.json`，但是该路径不起作用，我得到一个

```
ActionController::RoutingError (No route matches [GET] "/assets/foo.json") 
```

错误。

如何让托管 Rails 应用程序提供这些文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:27:14.090

事实证明，对于具有特定名称的 json 文件，这是一些奇怪的行为。有问题的文件被命名为`schema-[UUID].json`. `schema`Rails 似乎认为这些是对某些需要返回 json 格式数据的控制器（即使没有这样的路由，也没有控制器）的调用。当我将文件重命名为 时`[UUID]-schema.json`，它们突然起作用了。

# android - 按钮 onclick 未触发 Android 中的事件

> ID：12751299
> 
> 赞同：1
> 
> 时间：2012-10-05T17:34:50.380
> 
> 标签：android

这是我在点击监听器上的按钮。我正在尝试听 onclick 事件触发。但它不起作用。我已经尝试过develop.android.com 中给出的方法。但这种方法似乎行不通。谁能指出我在这里做的错误？

```
 public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
      Bundle args = getArguments();
      v = inflater.inflate(R.layout.product_fragment, container, false);          
    Button button = (Button) v.findViewById(R.id.buynow_button);
     button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Toast.makeText(getActivity(), "test", 2000);
        }
    });
    return v;
   } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T17:36:58.083

您没有在 Toast 上调用 show 函数。

```
 Toast.makeText(getActivity(), "test", 2000).show(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-05T17:37:46.977

```
Toast.makeText(getActivity(), "test", 2000); 
```

需要改为：

```
Toast.makeText(getActivity(), "test", Toast.LENGTH_SHORT).show(); 
```

# ios - 是什么让 searchDisplayController 显示 scopeBar？

> ID：12751307
> 
> 赞同：4
> 
> 时间：2012-10-05T17:35:29.653
> 
> 标签：ios, uisearchbar, uisearchdisplaycontroller

我知道有一个属性`searchDisplayController.searchBar.showsScopeBar`，但在我的发现中，即使我们设置`showsScopeBar`为 NO，但将其`searchDisplayController.searchBar.scopeButtonTitles`属性设置为某个数组，范围栏也会显示指定的标题。设置`showsScopeBar`为 YES 和设置`scopeButtonTitles`为`nil`不会显示`scopeBar`.

所以，我认为`showsScopeBar`属性确实没有用，但显示或隐藏`scopeBar`实际上取决于我们是否将数组设置为`scopeButtonTitles`属性。

这可能吗？还是我错过了其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-23T10:59:28.647

确保您的 UISearchBar 在范围栏出现时有一个可以延伸的空间。我犯了一个错误，将 UISearchBar 放在 320x44px 的固定框架内，当范围栏打开时，它根本没有空间可见（320x88px）。UISearchBar 也位于表格的标题视图中，也必须被告知刷新。

```
[self.tableView beginUpdates];
[self.searchBar setShowsScopeBar:YES]; 
[self.tableView endUpdates]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T16:34:22.327

首先，准确地说，showsScopeBar 和 scopeButtonTitles 是 UISearchBar 类的属性。

它是这样的：

*   如果 scopeButtonTitles 有值并且 showsScopeBar == NO
    范围按钮只会在用户单击搜索文本框后出现。

*   如果 scopeButtonTitles 有值并且 showsScopeBar == YES
    范围按钮甚至在用户单击搜索文本框之前显示。
    （很丑，别走这条路）

*   如果 scopeButtonTitles 为 nil
    ，则无论 showScopeBar 值或用户交互如何，都不会显示范围按钮。

您可以使用 Interface Builder 来玩它：
单击“搜索栏”控制器并转到“属性检查器”选项卡。

# iis - 解密我们的 IIS 和第 3 方站点之间的 Web 服务流量

> ID：12751308
> 
> 赞同：1
> 
> 时间：2012-10-05T17:35:32.313
> 
> 标签：iis, service, web, encryption

我们在我们的系统 (IIS) 和使用 IIS Web 服务的附属商城站点之间传递令牌时遇到问题。

我需要查看传递的数据以调试问题，但流量已加密。如果我有私钥，我了解使用 Wireshark 或 Fiddler2 的场景……我怀疑合作伙伴会向我们提供他们的……

那么，是否有 IIS7 上的日志记录方法或调试模式可以用来解密流量，或者是否有另一种不需要解密的方法。我的感觉是我们必须看看合作伙伴是否有他们可以标记的调试模式，以便我们可以暂时查看数据包中的数据。

# ios - 您可以将 SDK 5.0 与 iPhone 5 的基本 SDK 6.0 一起定位吗？

> ID：12751311
> 
> 赞同：0
> 
> 时间：2012-10-05T17:35:44.587
> 
> 标签：ios, appstore-approval, iphone-5

我听说 Apple 拒绝带有使用 SDK 5.1 构建的 iPhone 5 启动映像的应用程序。

Apple 会拒绝使用 iOS SDK 6.0 构建并以 IPHONEOS_DEPLOYMENT_TARGET 5.0 为目标并包含对 iPhone 5 的支持的应用程序吗？如果重要的话，我也会针对 armv7 而​​不是 armv7s 构建第三方库。

我知道关于 SO 还有其他类似的问题，但我还没有看到任何解决这个特定应用商店拒绝问题的问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:40:26.460

在这种情况下，您只是尝试为运行 iOS 5 及更高版本的设备提供支持，同时还利用 iOS 6 和 iPhone 5 的更大显示屏。这不应成为拒绝的理由。

# twitter - 我可以有多个 twitter oauth 回调 url

> ID：12751312
> 
> 赞同：10
> 
> 时间：2012-10-05T17:35:52.143
> 
> 标签：twitter, twitter-oauth

我创建了一个 Twitter 应用程序并将以下 url 指定为回调 url：

[http://www.myapp.com/login](http://www.myapp.com/login)

但是，当用户从 url myapp.com（缺少 www 前缀）访问我的站点时，身份验证失败。

显然，我不能有多个网址。那么有什么办法可以解决呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T17:46:18.817

你可以

1.  通过根据用户用于访问您的应用程序的主机名更改它来提供正确的 OAuth URL。
2.  实施规范域名，确保访问者被重定向到 www 版本（反之亦然）。

不可以，您不能将多个 URL 提供给 OAuth 服务。

# grep - grep 输出模式

> ID：12751314
> 
> 赞同：0
> 
> 时间：2012-10-05T17:36:08.170
> 
> 标签：grep

如果我有一个包含以下内容的 bash 文件：

```
ls \
/tmp 
```

有没有办法grep这个文件并得到

```
ls \
/tmp 
```

代替

```
ls \ 
```

?

请注意，如果输入是一个大文件并且具有其他匹配模式，则 grep 的其他行为应该保持不变。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:40:13.440

您可以使用*上下文*选项`-A`（之后的行）、`-B`（之前的行）和`-C`（之前和之后的行上下文）：

```
$ grep -A1 ls test.sh
ls \
/tmp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:50:17.250

假设您想将 final`\`视为行继续字符，您可以使用`awk`来连接行：

```
awk '{ while( sub( "\\\\$", "" )) { getline n; $0 = $0 n; }} /ls/' input-file 
```

这将删除行继续字符并将所有内容合并为一行，然后如果 if 匹配 regex 则打印该行`ls`。

# module - 图片标题/描述未出现在媒体库灯箱中

> ID：12751317
> 
> 赞同：0
> 
> 时间：2012-10-05T17:36:25.840
> 
> 标签：module, drupal-7, gallery, media, colorbox

我正在使用 Drupal 的媒体库模块（[http://drupal.org/project/media_gallery](http://drupal.org/project/media_gallery)）。我有一个画廊，所有的图片都有标题和描述。当我单击图库中的图像时，会打开一个灯箱并显示该图像，但它不显示标题或描述。当我单击灯箱内的图像时，我被带到另一个页面，该图像再次显示，这次是标题和描述。

我需要知道是否有办法执行以下操作之一，如果有，该怎么做。

1.  有没有办法让图像标题和描述显示在媒体库灯箱中？（目前，灯箱显示导航箭头、幻灯片链接、关闭按钮和“项目 X 的​​ Y”）
2.  有没有办法直接将用户带到详细信息页面而不是打开灯箱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:43:05.543

如果您转到“编辑画廊”选项卡，请确保选中“显示标题和描述”复选框，如下所示：

![在此处输入图像描述](../Images/e3c74c846a0a73800550e7ab8f4f07e9.png)

一旦将标题/描述设置为显示（并且您可能已经知道这一点，因为您在实际页面中显示了标题和描述），您可以通过转到“编辑媒体”选项卡来添加或修改标题/描述。

希望这可以帮助！

# sql-server-2008 - SQL Server CE 使用 Entity Framework Code First 标识循环引用，但 SQL Server 2008 没有

> ID：12751318
> 
> 赞同：1
> 
> 时间：2012-10-05T17:36:42.413
> 
> 标签：sql-server-2008, entity-framework, code-first, sql-server-ce-4

我正在开发一个实体框架代码优先项目，该项目具有相当复杂的数据模型，在 SQL Server 2008 上部署得非常好。

但是，在为某些本地端到端测试创建 SQL Server CE 数据库时，我在 EF 创建数据库时收到以下错误消息：

`System.Data.SqlServerCe.SqlCeException: The referential relationship will result in a cyclical reference that is not allowed. [ Constraint name = FK_Sites_Persons_PersonId ].`

我`ManyToManyCascadeDeleteConvention`在我的 DataContext 模型创建方法中禁用了，所以这不是问题的原因。我遇到的问题是，有问题的关系在 SQL Server 2008 数据库中看起来很好——据我所知，它似乎是一个普通的外键，我看不到任何东西朝另一个方向回流，尽管它不是不可能有更长路径的循环引用。我不知道为什么 CE 会失败而 2008 年会成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:08:14.117

事实证明这个问题很简单地解决了——虽然我已经禁用了，但`ManyToManyCascadeDeleteConvention`我还需要禁用它`OneToManyCascadeDeleteConvention`以避免循环引用问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T17:58:02.300

您还可以考虑明确定义级联更新和删除，而不是全局禁用它们。假设一个模型：

```
namespace Models
{
    public class Parent
    {
        public Parent() { this.Children = new HashSet<Child>(); }

        public int id { get; set; }
        public string description { get; set; }

        public ICollection<Child> Children { get; set; }
    }

    public class Child
    {
        public int id { get; set; }
        public string description { get; set; }

        public Parent Parent { get; set; }
    }
} 
```

在您的上下文中覆盖 OnModelCreating 并使用 fluent api 来指定给定关系的级联选项。

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Parent>().HasMany<Child>(p => p.Children).WithRequired(c => c.Parent).WillCascadeOnDelete(false);

        base.OnModelCreating(modelBuilder);
    } 
```

当然这是一个简单的例子，但是您可以将相同的原则应用于您的下层实体，并专门排除导致循环引用的级联删除。

# asp.net - 在 ASP.NET 的另一个请求中传递经过身份验证的会话

> ID：12751325
> 
> 赞同：0
> 
> 时间：2012-10-05T17:37:17.717
> 
> 标签：asp.net, session, forms-authentication, abcpdf

我正在使用 ABCPDF.net 将我的 HTML 呈现为 PDF 页面，但我想使用当前经过身份验证的会话来保护这些页面。但是，获取 HTML 以呈现 PDF 的请求不会延续会话，而是创建一个新会话。我正在使用 ASP.NET 成员资格，并在会话 ID 中传递并在 ASP.NET 请求上创建 cookie。

```
 var sessionId = HttpUtility.ParseQueryString(Url)["sid"];

    if(sessionId != null)
    {
        doc.HtmlOptions.HttpAdditionalHeaders = string.Format("Cookie: 
                                    ASP.NET_SessionId={0}", sessionId);
    } 
```

我在 ABCPDF.net 文档中阅读了这个并且正在这样做，但请求总是使用不同的会话。

[httpadditionalheaders](http://www.websupergoo.com/helppdf8net/source/5-abcpdf/xhtmloptions/2-properties/httpadditionalheaders.htm)

我需要传递其他东西，还是可以做其他事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:26:58.897

通过在 URL 中发送 auth cookie 并更新 cookie 来修复它。

**要调用的网址**

```
Url.ActionAbsolute(MVC.Events.Pools(eventId).AddRouteValue(FormsAuthentication.FormsCookieName, Request.Cookies[FormsAuthentication.FormsCookieName].Value) 
```

**全球.asax**

```
 protected void Application_BeginRequest()
        {
            try
            {
                string auth_cookie_name = FormsAuthentication.FormsCookieName;

                if (HttpContext.Current.Request.Form[FormsAuthentication.FormsCookieName] != null)
                {
                    UpdateCookie(auth_cookie_name, HttpContext.Current.Request.Form[FormsAuthentication.FormsCookieName]);
                }
                else if (HttpContext.Current.Request.QueryString[FormsAuthentication.FormsCookieName] != null)
                {
                    UpdateCookie(auth_cookie_name, HttpContext.Current.Request.QueryString[FormsAuthentication.FormsCookieName]);
                }

            }
            catch
            {
            }
        }

        void UpdateCookie(string cookieName, string cookieValue)
        {
            HttpCookie cookie = HttpContext.Current.Request.Cookies.Get(cookieName);
            if (cookie == null)
            {
                cookie = new HttpCookie(cookieName);
                HttpContext.Current.Request.Cookies.Add(cookie);
            }
            cookie.Value = cookieValue;
            HttpContext.Current.Request.Cookies.Set(cookie);

    } 
```

# php - 仅使用 query_posts() 的第一个参数

> ID：12751340
> 
> 赞同：0
> 
> 时间：2012-10-05T17:38:39.717
> 
> 标签：php, wordpress

我可能在这里遗漏了一些明显的东西，因为我只是在学习 php，但只是想知道为什么当我使用时只有第一个参数有效`query_posts`

例如这里它使用`$paged`正确，但不排除类别..

```
query_posts('posts_per_page=5&paged=' . $paged, "cat=-16,-15,-14"   ); 
```

这里反之亦然，

```
query_posts( "cat=-16,-15,-14", 'posts_per_page=5&paged=' . $paged   ); 
```

是否有适当的方法我应该包括这些我缺少的？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T17:42:17.293

我想你想要：

```
query_posts('posts_per_page=5&paged='.$paged.'&cat=-16,-15,-14'); 
```

他们的方式是您使用两个参数调用 query_posts，而该函数只需要一个参数。

# asp.net - 什么是“选项属性”？

> ID：12751344
> 
> 赞同：0
> 
> 时间：2012-10-05T17:39:00.530
> 
> 标签：asp.net

这是 Measure Up 的 Microsoft 证书考试 70-515(ASP.NET 4) 的练习题。我不确定“选项属性”在这里的含义。我知道答案，但我的问题是什么是“选项属性”？

您正在使用 .NET Framework 4 和 Visual Studio 2010 创建服务器控件。从 Visual Studio 工具箱将服务器控件添加到 Web 窗体时，您需要确保将以下标记添加到页面：

```
<uc:MyControl ID="MyControl1" runat="server" BackColor="beige" ForeColor="black" /> 
```

您还希望确保在 Web 窗体上选择控件时，会显示 Options 属性。你该怎么办？

1.  使用 ToolboxData 属性装饰类，使用 DefaultProperty 属性装饰 Options 属性。
2.  使用 ToolboxItem 属性和 DefaultProperty 属性装饰类。
3.  使用 ToolboxItem 属性装饰类，使用 DefaultProperty 属性装饰 Options 属性。
4.  使用 ToolboxData 属性和 DefaultProperty 属性装饰类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:45:17.837

一个名为“选项”的属性（以下所有内容）：

1.  用户自定义。
2.  可在 Visual Studio 2010 设计器的“属性窗口”中修改。
3.  可在 ASPX 标记中访问。
4.  在 UserControl 的代码隐藏类中定义。
5.  可在 UserControl 的代码隐藏类中访问。

# asp.net-mvc - 在reportviewer rdlc中分组和过滤行

> ID：12751346
> 
> 赞同：0
> 
> 时间：2012-10-05T17:39:04.863
> 
> 标签：asp.net-mvc, expression, reportviewer, rdlc

我目前有一个报表查看器页面 - rdlc 并显示来自数据集的信息。我的数据集返回如下信息：

会议 - 3 小时 5 个案例
访问 - 2 小时 2 个案例

* * *

组织 - 5 小时
准备 - 3 小时

我想在表格中显示所有具有“案例”的活动的总计行，第二行将是没有“案例”的所有活动的总计。

像这样：
有案例的总计：5 小时 7 个案例
没有案例的总计：8 小时

有没有一种方法可以通过输入特定表达式以根据案例数量进行过滤来显示此信息？

我尝试了这个单元格的表达式，我想显示没有案例的小时数，但总是会得到案例和没有案例的总数。

```
=IIf(Fields!Cases.Value is Nothing, Sum(Fields!Hours.Value), Nothing) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:23:48.660

我想出了解决办法。我创建了一个单行表，并为该行输入了 GoupOn 的以下表达式：

```
=IIf(Fields!Cases.Value is Nothing," " ,Fields!OfficeName.Value) 
```

在第一列中，我写了一个表达式，根据案例数量查看它是案例还是非案例。该表在运行时产生了两行，一行用于案例，另一行用于非案例，每行都包含适当的信息。

# php - 使用 XPath 解析 HTML NFL.com

> ID：12751349
> 
> 赞同：0
> 
> 时间：2012-10-05T17:39:06.850
> 
> 标签：php, html, xpath

[http://www.nfl.com/widget/gc/2011/tabs/cat-post-boxscore?gameId=2012093000](http://www.nfl.com/widget/gc/2011/tabs/cat-post-boxscore?gameId=2012093000)

我希望从上面链接之类的页面中抓取数据（即游戏级别的 NFL 数据）。

NFL.com 有一个方便的 JSON API，可以让大量此类数据可访问。也就是说，对于 2010 年及以后的游戏。对于早期的游戏，我将不得不解析类似于上述页面的 HTML。

我一直在尝试使用 Xpath 来抓取它。但是，我发现很难区分作为“thd2”类表行的表头和作为“tbdy1”类表行的数据

如果有人知道如何遍历这些数据并提取数据、表头并将它们放入一个数组中，我想看看你的方法！

```
$curl = curl_init('http://www.nfl.com/widget/gc/2011/tabs/cat-post-boxscore?gameId=2012093000');
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($curl, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/534.10 (KHTML, like Gecko) Chrome/8.0.552.224 Safari/534.10');

$html = curl_exec($curl);
curl_close($curl);

$dom = new DOMDocument();
@$dom->loadHTML($html);

$xpath = new DOMXPath($dom);

$tables = $xpath->query('//table[1]/tbody/td');
var_dump($tables); 
```

# php - UTF8 文字显示？？？从 db 查询时

> ID：12751352
> 
> 赞同：0
> 
> 时间：2012-10-05T17:39:17.397
> 
> 标签：php, javascript, mysql, sql, json

当我输入此代码并从数据库中调用它时，它会将文本显示为问号或字母，它们是阿拉伯字母，所以 UTF8 应该可以工作，但我不知道现在不会。

```
<?php
header("Content-Type: application/json; charset=UTF-8");

$server   = "";
$username = "";
$password = "";
$database = "";

$con = mysql_connect($server, $username, $password) or die ("Could not connect: " . mysql_error());
mysql_select_db($database, $con);

$sql = "SELECT * FROM events WHERE id='1' ";
$result = mysql_query($sql) or die ("Query error: " . mysql_error());

$records = array();

while($row = mysql_fetch_assoc($result)) {
    $records[] = $row;
}

mysql_close($con);

print_r($records);

?> 
```

它显示为结果

```
Array
(
    [0] => Array
        (
            [id] => 1
            [event] => ????? ?????
            [speaker] => ???? ???????
            [area] => ???????
            [place] => ???? ??????
            [addr] => ??? ???? ????????
            [datefrom] => 2012-10-05
            [dateto] => 
            [timefrom] => 19:26:27
            [timeto] => 
        )

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:42:34.527

检查您的数据库是否也使用 UTF-8：

```
SHOW CREATE DATABASE `your_db_name` 
```

你是如何插入数据的？

还要验证您的 Web 服务器是否配置正确（使用 UTF8）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:34:55.687

您需要在存储 utf8 的列上设置 utf8 排序规则：

```
rowname varchar(100) COLLATE utf8_unicode_ci NOT NULL, 
```

...而且联系也很重要（请参阅 Roger Ng 的回答）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-05T17:46:40.923

这是将客户端和数据库之间的连接设置为 UTF-8 的代码

```
$con = mysql_connect($server, $username, $password) or die ("Could not connect: " . mysql_error());
mysql_select_db($database, $con);

mysql_query('SET NAMES utf8');
mysql_query('SET CHARACTER_SET_CLIENT=utf8');
mysql_query('SET CHARACTER_SET_RESULTS=utf8');

$sql = "SELECT * FROM events WHERE id='1' ";
$result = mysql_query($sql) or die ("Query error: " . mysql_error()); 
```

在开始 SQL 语句之前放置这些代码。

# c# - 将字典序列化为数组（键值对）

> ID：12751354
> 
> 赞同：37
> 
> 时间：2012-10-05T17:39:35.443
> 
> 标签：c#, json.net

Json.Net 通常将 a 序列`Dictionary<k,v>`化为一个集合；

```
"MyDict": {
  "Apples": {
    "Taste": 1341181398,
    "Title": "Granny Smith",
  },
  "Oranges": {
    "Taste": 9999999999,
    "Title": "Coxes Pippin",
  },
 } 
```

这是伟大的。从 SO 上环顾四周，这似乎是大多数人想要的。但是，在这种特殊情况下，我想在 my`Dictionary<k,v>`和 Array 格式之间进行序列化；

```
"MyDict": [
    "k": "Apples",
    "v": {
        "Taste": 1341181398,
        "Title": "Granny Smith",
    }
  },
    "k:": "Oranges",
    "v:": {
        "Taste": 9999999999,
        "Title": "Coxes Pippin",
    }
  },
] 
```

有没有一种简单的方法可以用我现有的字段类型来做到这一点？例如，是否有我可以注释的属性？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-07-31T16:48:37.683

实现此目的的另一种方法是使用自定义`ContractResolver`. 这样，您不必在`Dictionary<K,V>`每次序列化时进行子类化或应用转换，如其他答案中所建议的那样。

以下解析器将导致所有字典序列化为具有“Key”和“Value”属性的对象数组：

```
class DictionaryAsArrayResolver : DefaultContractResolver
{
    protected override JsonContract CreateContract(Type objectType)
    {
        if (objectType.GetInterfaces().Any(i => i == typeof(IDictionary) || 
           (i.IsGenericType && i.GetGenericTypeDefinition() == typeof(IDictionary<,>))))
        {
            return base.CreateArrayContract(objectType);
        }

        return base.CreateContract(objectType);
    }
} 
```

要使用解析器，请将其添加到您的`JsonSerializerSettings`，然后将设置传递给`JsonConvert.SerializeObject()`这样的：

```
JsonSerializerSettings settings = new JsonSerializerSettings();
settings.ContractResolver = new DictionaryAsArrayResolver();

string json = JsonConvert.SerializeObject(obj, settings); 
```

这是一个[工作演示](https://dotnetfiddle.net/P1SeP2)。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-10-05T21:57:47.190

啊，事实证明这和我希望的一样简单。我`Dictionary<k,v>`的已经被子类化了，我发现我可以用`[JsonArrayAttribute]`. 这正是我需要的格式；

```
"MyDict": [
  {
    "Key": "Apples",
    "Value": {
        "Taste": 1341181398,
        "Title": "Granny Smith",
    }
  },
  {
    "Key:": "Oranges",
    "Value:": {
        "Taste": 9999999999,
        "Title": "Coxes Pippin",
    }
  },
] 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-10-05T18:33:14.187

对于这个例子，我将使用字典：

```
var myDict = new Dictionary<string,string>() { 
    {"a","123"}, 
    {"b","234"}, 
    {"c","345"} 
}; 
```

将（与`Newtonsoft.Json.JsonConvert.SerializeObject(myDict)`）序列化为：

```
{"a":"123","b":"234","c":"345"} 
```

* * *

您可以使用 LINQ 进行转换以创建匿名对象，并将其序列化：

```
 var myDictTransformed = from key in myDict.Keys
                         select new { k = key, v = myDict[key] }; 
```

或者你可以使用一个真实的对象

```
class MyDictEntry 
{
    public string k { get; set; }
    public string v { get; set; }
} 
```

以及上述或替代 LINQ 语法：

```
var myDictTransformed = myDict.Keys.AsEnumerable()
                        .Select(key => new MyDictEntry{ 
                            k = key, 
                            v = myDict[key] 
                        }); 
```

无论哪种方式，这都会序列化为：

```
[
  {"k":"a", "v":"123"},
  {"k":"b", "v":"234"},
  {"k":"c", "v":"345"}
] 
```

* * *

.NET 小提琴链接：[https ://dotnetfiddle.net/LhisVW](https://dotnetfiddle.net/LhisVW)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2015-08-25T01:09:26.560

我找到的最简单的解决方案是将您的转换`Dictionary<string, string>`为`List<KeyValuePair<string, string>>`. JSON.NET 然后将您`List`转换为具有`{ Key: 'keyname', Value: 'value' }`. 如果您接受所需的模型更改并且不想继承您的`Dictionary`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T23:33:22.590

gregmac 的回答很有帮助，但不太奏效。以下是相同的想法......没有双关语。

```
var dictionaryTransformed = dictionary.Select(item => item.Key).Select(i => 
                        new {Key = i, Value = dictionary[i] }); 
```

或者当然

```
var dictionaryTransformed = dictionary.Select(item => 
                        new {item.Key, Value = dictionary[item.Key] }); 
```

然后到json

```
var json = (new JavaScriptSerializer()).Serialize( 
                        new { Container = dictionaryTransformed.ToArray() } ) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-11-20T21:05:40.340

我不确定为什么，但上面列出的 Brian Rogers 的自定义 ContractResolver 对我不起作用。它似乎在内部某个地方陷入了无限循环。可能是由于我的 json.net 设置的其他部分。

无论如何-这种解决方法对我有用。

```
public interface IStrongIdentifier
    {
        string StringValue { get; set; }
    }

public class StrongIdentifierKeyedDictionaryWrapper<TKey, TValue> : Dictionary<string, TValue>
        where TKey : IStrongIdentifier
    {
        public void Add(TKey key, TValue value)
        {
            base.Add(key.StringValue, value);
        }

        public void Remove(TKey key)
        {
            base.Remove(key.StringValue);
        }

        public TValue this[TKey index]
        {
            get => base[index.StringValue];
            set => base[index.StringValue] = value;
        }

        public bool ContainsKey(TKey key)
        {
            return base.ContainsKey(key.StringValue);
        }
    } 
```

# python - 编写 Python 服务器的选项，它将持续检查数据库的更新和更改

> ID：12751359
> 
> 赞同：2
> 
> 时间：2012-10-05T17:39:45.703
> 
> 标签：python, database, sql-server-2008, client, twisted

我是一名自学成才的 Python 程序员，我对一个项目有一个想法，我想用它来更好地理解 Socket 编程和网络。我希望有人能够告诉我我是否走在正确的道路上，或者将我指向另一个方向。

一般的想法是能够通过网站 UI 更新数据库，然后 Python 服务器将持续检查该数据库的更改。如果它注意到更改，它将向第一个可用的连接客户端分发一组指令。

目标是
A - 创建一个从数据库读取的服务器。
B - 创建从远程机器连接到所述服务器的客户端。
C - 然后服务器将持续读取数据库并查找更改，例如表示运行/不运行的布尔值列。
D - 如果说 run Boolean 为真，则服务器会将指令交给第一个可用的客户端。
E - 然后客户端本身将处理更新某些运行时事件的数据库

问题/疑虑
A - 我首先关心的是不断读取数据库和搜索更改所需的资源。有没有更好的方法来做到这一点？或者我可以写一个循环来做到这一点而不用太担心吗？
B - 我一直在阅读 Twisted 上的文档/教程，目前这看起来是一个可行的选择，能够处理多个客户端的连接（为了争论，20-30）。从我读过的内容来看，线程看起来比它的价值更麻烦。

我在正确的轨道上吗？有什么建议么？还是值得一看的读物？
先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:20:37.410

[Django Web 框架](https://www.djangoproject.com/)实现了一种称为[Signals](https://docs.djangoproject.com/en/dev/topics/signals/)的东西，它在[ORM](https://docs.djangoproject.com/en/dev/topics/db/)级别允许您检测对特定数据库对象的更改并将处理程序附加到这些更改。由于它是一个开源项目，您可能需要[查看源代码](https://github.com/django/django/tree/master/django/dispatch)以了解 Django 在支持多个数据库后端（Mysql、postgres、oracle、sqlite）的同时如何做到这一点。

如果您直接想监听数据库更改，那么大多数数据库都有某种记录每个事务更改的系统。例如[，MySql 有二进制日志](http://www.databasejournal.com/features/article.php/3903646/Inside-MySQL-Binary-Logs.htm)，您可以从中读取以检测对数据库的更改。

此外，虽然 Twisted 很棒，但我建议您使用[Gevent/Greenlet](http://www.gevent.org/gevent.html) + [this](http://sdiehl.github.com/gevent-tutorial/)。如果要与Django集成，[如何结合django加gevent的基础？](https://stackoverflow.com/questions/10964571/how-to-combine-django-plus-gevent-the-basics)有助于

# c# - 如何将带有嵌入式设计器代码的旧表单类转换为单独的部分类？

> ID：12751361
> 
> 赞同：0
> 
> 时间：2012-10-05T17:39:59.903
> 
> 标签：c#, visual-studio-2010, visual-studio, macros, windows-forms-designer

我看到了[这个线程](https://stackoverflow.com/questions/669540/split-old-net-code-into-designer-partial-class)，但是手动方式需要永远并且宏很好，但是每次我运行它时，我的所有事件处理程序都会在 Visual Studio 解析设计器文件时被删除。此外，宏有点旧，并且以与当代 Visual Studio 不同的方式放置部分和函数，所以这也有点烦人。

我必须对大约 20 个表格执行此操作，到目前为止，每个表格都需要半个多小时（它们很大）并且容易出错，因为我可能会忘记重新链接某些东西。有人知道更好的方法吗？或者至少有一种方法可以使 Visual Studio 在重新分析设计器文件时不会删除事件处理程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T21:36:16.547

问题是事件处理程序和其他设计器代码没有使用完全限定的名称空间和`this`分配。结果，当 Visual Studio 解析分部类中的设计器代码时，许多事件处理程序被删除，因为它们的格式不正确。

修复方法是事先检查所有设计器代码，并确保`this`在任何地方都使用了所有类，并且在运行宏脚本之前，所有类都与其完全限定的名称空间一起使用。

# java - UndoableEditListener - 添加到 JLabel 和 JTextPane

> ID：12751364
> 
> 赞同：1
> 
> 时间：2012-10-05T17:40:10.720
> 
> 标签：java, swing, jpanel, jlabel, undo-redo

我有一个 9x9 面板，`panel1[][]` 每个面板都有一个 JLabel，所以`label1[][]`

我在 for 循环中将每个标签添加到面板中：

```
for (int y = 0; y < 9; y++) {
        for (int x = 0; x < 9; x++) {
            label[y][x] = new Grid(x, y);
            panel1[y][x].add(label[y][x]);                
        }
    } 
```

主要目标是能够将 addUndoableEditListener() 添加到这些 JLabel 中的每一个。用户将选择一个数字（int）放置在 JLabel 中，我希望他们能够通过单击撤消/重做按钮来撤消/重做他们的选择。

我试过：

```
UndoManager manager = new UndoManager();
label1.addUndoableEditListener(manager); 
```

但是我看到您显然不能将“UndoableEditListener”添加到 JLabels。（对？）

我看到了一些示例，您可以将“UndoableEditListener”添加到 JTextPane，所以我想也许我可以创建一个 JTextPane 窗格 [9][9]，并向每个 JLabels（添加到 JPanel）添加一个文本窗格。所以这将解决 UndoableEditListener 的问题。

这看起来合乎逻辑吗？我真的很感激一个更简单的方法，欢迎所有建议:)

我只是在将 UndoableEditListener 添加到组件时遇到了一些问题。

（我宁愿保留 JLabel，因为我需要能够更改背景颜色功能，否则有更好的方法吗？？）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:00:06.420

看起来您并不真正想要 JLabel。如果您希望它是可编辑的（和可撤销的），为什么不使用 JTextField？

JTextField 和 JLabel 一样可以更改其背景颜色：

```
JTextField tf = new JTextField();
tf.setColor(Color.RED); 
```

# php - 覆盖 PHP 变量并记住它

> ID：12751369
> 
> 赞同：1
> 
> 时间：2012-10-05T17:40:29.923
> 
> 标签：php, html, variables, pagination, session-variables

所以我在 MySQL 中的一些数据显示在我的 PHP 页面上的表格中。我已将其设置为每个页面仅显示 3 个结果（在它上线之前是临时的，然后会更多）。一切正常，它在每一页上显示这 3 个结果就好了。

我想要做的是能够直接从 PHP 主页面更改每个页面上的结果数量。我可以更改那一页上显示的数量，但是一旦我转到第 2 页，它就会重置为 3 个结果。我怎样才能记住存储在变量中的数字，并将其显示在每一页上？我尝试使用 SESSIONS，但无法正常工作。顺便说一句，我仍然是初学者。

```
$item = $_REQUEST['item'];
if(isset($_REQUEST['item'])){
    $limit=$item;
}
else{
    $limit=3;
}

//A few lines down -->    

<form action="<?php $_SERVER['REQUEST_URI']?>" method="post">
    Items: <input type="text" name="item">
    <input type="submit" name"go" value="Go">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:47:05.580

您可以通过这种方式添加 SESSION ：

```
$item = $_REQUEST['item'];
if(isset($_REQUEST['item'])){
    $limit=$item;
    $_SESSION['item_limit'] = $limit;
}
else{
    // If we find a limit set in the session use that
    if (!empty($_SESSION['item_limit']) {
        $limit = $_SESSION['item_limit'];
    }
    else {
        $limit=3;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:52:05.657

如果您不需要在用户下次访问页面时记住该值，您可以简单地将 $limit 作为“item”输入的值属性输出。

```
Items: <input type="text" name="item" value="<?php echo $limit; ?>"> 
```

# objective-c - 向下钻取表视图

> ID：12751373
> 
> 赞同：0
> 
> 时间：2012-10-05T17:40:56.317
> 
> 标签：objective-c, drilldown

我有一个正在处理的项目，它需要深入了解 UITableView。我已经将我的代码改编为情节提要，它从第一个 UITableView 到第二个 UITableView 向下钻取，但是当我选择第二个 UITableView 中的行时，我只得到一个数组。选择任何其他行时，它只显示其中一行的详细信息。我知道描述含糊不清，所以我将我的代码包括在内以进行更多说明。任何帮助都非常感谢。

## 团队表.m

```
@implementation TeamTable

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)dealloc
{
    [super dealloc];
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];

    teamArray = [[NSMutableArray alloc] init];
    [teamArray addObject:@"East Cobb"];
    [teamArray addObject:@"West Cobb"];
    [teamArray addObject:@"Buckhead Thunder"];
    [teamArray addObject:@"Fulton East"];
    [teamArray addObject:@"Atlanta Braves"];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:  (UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [teamArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault     reuseIdentifier:CellIdentifier] autorelease];
    }

    // Configure the cell...
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:cell.frame];
    UIImage *image = [UIImage imageNamed:@"bgp.png"];
    imageView.image = image;
    cell.backgroundView = imageView;
    [[cell textLabel] setBackgroundColor:[UIColor clearColor]];
    [[cell detailTextLabel] setBackgroundColor:[UIColor clearColor]];
    cell.textLabel.text = [[teamArray objectAtIndex:indexPath.row] autorelease];

    return cell;
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"Table"]){
        TeamTable1 *teams = [segue destinationViewController];
        NSIndexPath *indexPath = [self.tableView indexPathForCell:sender];
        if ([[teamArray objectAtIndex:indexPath.row] isEqual:@"East Cobb"]) {
            teams.teamsInt = 0;
            [teams setTitle:[teamArray objectAtIndex:indexPath.row]];
        }
        if ([[teamArray objectAtIndex:indexPath.row] isEqual:@"West Cobb"]) {
            teams.teamsInt = 1;
            [teams setTitle:[teamArray objectAtIndex:indexPath.row]];
        }
        if ([[teamArray objectAtIndex:indexPath.row] isEqual:@"Buckhead Thunder"]) {
            teams.teamsInt = 2;
            [teams setTitle:[teamArray objectAtIndex:indexPath.row]];
        }
        if ([[teamArray objectAtIndex:indexPath.row] isEqual:@"Fulton East"]) {
            teams.teamsInt = 3;
            [teams setTitle:[teamArray objectAtIndex:indexPath.row]];
        }
        if ([[teamArray objectAtIndex:indexPath.row] isEqual:@"Atlanta Braves"]) {
            teams.teamsInt = 4;
            [teams setTitle:[teamArray objectAtIndex:indexPath.row]];
        }
    }
}
@end
second table .h file

@interface TeamTable1 : UITableViewController{

    NSMutableArray *eastCobbArray;
    NSMutableArray *westCobbArray;
    NSMutableArray *buckheadThunderArray;
    NSMutableArray *fultonEastArray;
    NSMutableArray *atlantaBravesArray;

    NSMutableArray *sectionArray;
    NSMutableArray *data;

    int teamsInt;

}

@property int teamsInt;

- (void) makeData;

@end

second table .m file

@implementation TeamTable1
@synthesize teamsInt;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)dealloc
{
    [sectionArray release];
    [data release];
    [eastCobbArray release];
    [westCobbArray release];
    [buckheadThunderArray release];
    [fultonEastArray release];
    [atlantaBravesArray release];
    [super dealloc];
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad{
    [self makeData];
    [super viewDidLoad];
}

- (void) makeData
{
    data = [[NSMutableArray alloc] init];
    sectionArray = [[NSMutableArray alloc] init];

    eastCobbArray = [[NSMutableArray alloc] init];
    westCobbArray = [[NSMutableArray alloc] init];
    buckheadThunderArray = [[NSMutableArray alloc] init];
    fultonEastArray = [[NSMutableArray alloc] init];
    atlantaBravesArray = [[NSMutableArray alloc] init];

    if (teamsInt == 0) {
        [sectionArray addObject:@"East Cobb"];
    }
    if (teamsInt == 1) {
        [sectionArray addObject:@"West Cobb"];
    }
    if (teamsInt == 2) {
        [sectionArray addObject:@"Buckhead Thunder"];
    }
    if (teamsInt == 3) {
        [sectionArray addObject:@"Fulton East"];
    }
    if (teamsInt == 4) {
        [sectionArray addObject:@"Atlanta Braves"];
    }

    [eastCobbArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Coaches", @"name" , @"image1.JPG", @"image" , @"Mark Bayle 3rd Base\nSusane Ballor First Base\nJim Thally Pitching\nSam Bradley Batting", @"description", nil]];
    [eastCobbArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Team Outlook", @"name" , @"image2.jpg", @"image" , @"our team has won 26 out of the 35 and it is in first place. We have 2 players on DL and have recalled two players to replace them.", @"description", nil]];
    [eastCobbArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Schedule", @"name" , @"image3.jpg", @"image" , @"Sun June 30 VS Thunders @ Home\nMon June 31 VS Braves @ away\nTue July 1 VS East Cobb @ Home", @"description", nil]];
    [eastCobbArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Upcomming Events", @"name" , @"image4.jpg", @"image" , @"This is the list of the upcomming events for the month of july:\nJuly 1st:\nBake them all.\nJuly 2nd:\nFamily reunion\nJuly 3rd:\nSuppliers convention.", @"description", nil]];
    [eastCobbArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Roster", @"name" , @"image5.jpg", @"image" , @"Jim this 17\nTim duncan 22\nJim thalos 21\nFredrick nitche 24\n", @"description", nil]];

    [westCobbArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Coaches", @"name" , @"image1.JPG", @"image" , @"Mark Bayle 3rd Base\nSusane Ballor First Base\nJim Thally Pitching\nSam Bradley Batting", @"description", nil]];
    [westCobbArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Team Outlook", @"name" , @"image2.jpg", @"image" , @"our team has won 26 out of the 35 and it is in first place. We have 2 players on DL and have recalled two players to replace them.", @"description", nil]];
    [westCobbArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Schedule", @"name" , @"image3.jpg", @"image" , @"Sun June 30 VS Thunders @ Home\n Mon June 31 VS Braves @ away \n Tue July 1 VS East Cobb @ Home \n", @"description", nil]];
    [westCobbArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Upcomming Events", @"name" , @"image4.jpg", @"image" , @"This is the list of the upcomming events for the month of july:\nJuly 1st:\nBake them all.\nJuly 2nd:\nFamily reunion\nJuly 3rd:\nSuppliers convention.", @"description", nil]];
    [westCobbArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Roster", @"name" , @"image5.jpg", @"image" , @"Jim this 17\nTim duncan 22\nJim thalos 21\nFredrick nitche 24\n", @"description", nil]];

    [buckheadThunderArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Coaches", @"name" , @"image1.JPG", @"image" , @"Mark Bayle 3rd Base\nSusane Ballor First Base\nJim Thally Pitching\nSam Bradley Batting", @"description", nil]];
    [buckheadThunderArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Team Outlook", @"name" , @"image2.jpg", @"image" , @"our team has won 26 out of the 35 and it is in first place. We have 2 players on DL and have recalled two players to replace them.", @"description", nil]];
    [buckheadThunderArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Schedule", @"name" , @"image3.jpg", @"image" , @"Sun June 30 VS Thunders @ Home \n MOn June 31 VS Braves @ away \n Tue July 1 VS East Cobb @ Home \n", @"description", nil]];
    [buckheadThunderArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Upcomming Events", @"name" , @"image4.jpg", @"image" , @"This is the list of the upcomming events for the month of july:\nJuly 1st:\nBake them all.\nJuly 2nd:\nFamily reunion\nJuly 3rd:\nSuppliers convention.", @"description", nil]];
    [buckheadThunderArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Roster", @"name" , @"image5.jpg", @"image" , @"Jim this 17\nTim duncan 22\nJim thalos 21\nFredrick nitche 24\n", @"description", nil]];

    [fultonEastArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Coaches", @"name" , @"image1.JPG", @"image" , @"Mark Bayle 3rd Base\nSusane Ballor First Base\nJim Thally Pitching\nSam Bradley Batting", @"description", nil]];
    [fultonEastArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Team Outlook", @"name" , @"image2.jpg", @"image" , @"our team has won 26 out of the 35 and it is in first place. We have 2 players on DL and have recalled two players to replace them.", @"description", nil]];
    [fultonEastArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Schedule", @"name" , @"image3.jpg", @"image" , @"Sun June 30 VS Thunders @ Home \n MOn June 31 VS Braves @ away \n Tue July 1 VS East Cobb @ Home \n", @"description", nil]];
    [fultonEastArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Upcomming Events", @"name" , @"image4.jpg", @"image" , @"This is the list of the upcomming events for the month of july:\nJuly 1st:\nBake them all.\nJuly 2nd:\nFamily reunion\nJuly 3rd:\nSuppliers convention.", @"description", nil]];
    [fultonEastArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Roster", @"name" , @"image5.jpg", @"image" , @"Jim this 17\nTim duncan 22\nJim thalos 21\nFredrick nitche 24\n", @"description", nil]];

    [atlantaBravesArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Coaches", @"name" , @"image1.JPG", @"image" , @"Mark Bayle 3rd Base\nSusane Ballor First Base\nJim Thally Pitching\nSam Bradley Batting", @"description", nil]];
    [atlantaBravesArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Team Outlook", @"name" , @"image2.jpg", @"image" , @"our team has won 26 out of the 35 and it is in first place. We have 2 players on DL and have recalled two players to replace them.", @"description", nil]];
    [atlantaBravesArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Schedule", @"name" , @"image3.jpg", @"image" , @"Sun June 30 VS Thunders @ Home\nMon June 31 VS Braves @ away\nTue July 1 VS East Cobb @ Home\n", @"description", nil]];
    [atlantaBravesArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Upcomming Events", @"name" , @"image4.jpg", @"image" , @"This is the list of the upcomming events for the month of july:\nJuly 1st:\nBake them all.\nJuly 2nd:\nFamily reunion\nJuly 3rd:\nSuppliers convention.", @"description", nil]];
    [atlantaBravesArray addObject:[[NSMutableDictionary alloc] initWithObjectsAndKeys:@"Roster", @"name" , @"image5.jpg", @"image" , @"Jim this 17\nTim duncan 22\nJim thalos 21\nFredrick nitche 24\n", @"description", nil]];

    if (teamsInt == 0) {
        [data addObject:eastCobbArray];
    }
    if (teamsInt == 1) {
        [data addObject:westCobbArray];
    }
    if (teamsInt == 2) {
        [data addObject:buckheadThunderArray];
    }
    if (teamsInt == 3) {
        [data addObject:fultonEastArray];
    }
    if (teamsInt == 4) {
        [data addObject:atlantaBravesArray];
    }
}

- (void)viewDidUnload{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    return [sectionArray objectAtIndex:section];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    // Return the number of sections.
    return [sectionArray count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [[data objectAtIndex:section] count];
    [self.tableView reloadData];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell1";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    // Configure the cell...
    UIImageView *imageView = [[UIImageView alloc] initWithFrame:cell.frame];
    UIImage *image = [UIImage imageNamed:@"bgp.png"];
    imageView.image = image;
    cell.backgroundView = imageView;
    [[cell textLabel] setBackgroundColor:[UIColor clearColor]];
    [[cell detailTextLabel] setBackgroundColor:[UIColor clearColor]];
    cell.textLabel.text = [[[data objectAtIndex:indexPath.section] objectAtIndex:indexPath.row] objectForKey:@"name"];

    return cell;
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"Detail"]){
        TeamDetail *teamDetail = [segue destinationViewController];
        NSIndexPath *indexPath = [self.tableView indexPathForCell:sender];
        if (teamsInt == 0)
        {
            teamDetail.teamImageString = [[NSString alloc] initWithString:[[eastCobbArray objectAtIndex:indexPath.row] objectForKey:@"image"]];
            teamDetail.teamTextString = [[NSString alloc] initWithString:[[eastCobbArray objectAtIndex:indexPath.row] objectForKey:@"description"]];
            teamDetail.title = [[NSString alloc] initWithString:[[eastCobbArray objectAtIndex:indexPath.row] objectForKey:@"name"]];
        }
        if (teamsInt == 1)
        {
            teamDetail.teamImageString = [[NSString alloc] initWithString:[[westCobbArray objectAtIndex:indexPath.row] objectForKey:@"image"]];
            teamDetail.teamTextString = [[NSString alloc] initWithString:[[westCobbArray objectAtIndex:indexPath.row] objectForKey:@"description"]];
            teamDetail.title = [[NSString alloc] initWithString:[[westCobbArray objectAtIndex:indexPath.row] objectForKey:@"name"]];
        }
        if (teamsInt == 2)
        {
            teamDetail.teamImageString = [[NSString alloc] initWithString:[[buckheadThunderArray objectAtIndex:indexPath.row] objectForKey:@"image"]];
            teamDetail.teamTextString = [[NSString alloc] initWithString:[[buckheadThunderArray objectAtIndex:indexPath.row] objectForKey:@"description"]];
            teamDetail.title = [[NSString alloc] initWithString:[[buckheadThunderArray objectAtIndex:indexPath.row] objectForKey:@"name"]];
        }
        if (teamsInt == 3)
        {
            teamDetail.teamImageString = [[NSString alloc] initWithString:[[fultonEastArray objectAtIndex:indexPath.row] objectForKey:@"image"]];
            teamDetail.teamTextString = [[NSString alloc] initWithString:[[fultonEastArray objectAtIndex:indexPath.row] objectForKey:@"description"]];
            teamDetail.title = [[NSString alloc] initWithString:[[fultonEastArray objectAtIndex:indexPath.row] objectForKey:@"name"]];
        }
        if (teamsInt == 4)
        {
            teamDetail.teamImageString = [[NSString alloc] initWithString:[[atlantaBravesArray objectAtIndex:indexPath.row] objectForKey:@"image"]];
            teamDetail.teamTextString = [[NSString alloc] initWithString:[[atlantaBravesArray objectAtIndex:indexPath.row] objectForKey:@"description"]];
            teamDetail.title = [[NSString alloc] initWithString:[[atlantaBravesArray objectAtIndex:indexPath.row] objectForKey:@"name"]];
        }
    }
}

@end 
```

## TeamDetail.h

```
@interface TeamDetail : UIViewController{

    IBOutlet UIImageView *teamImage;
    IBOutlet UITextView *teamText;
    NSString *teamImageString;
    NSString *teamTextString;
}

@property (nonatomic, retain) NSString *teamImageString;
@property (nonatomic, retain) NSString *teamTextString;

@end 
```

## TeamDetail.m

```
@implementation TeamDetail
@synthesize teamImageString, teamTextString;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"bcp.png"]];
    teamImage.image = [UIImage imageNamed:teamImageString];
    teamText.text = teamTextString;

    // Do any additional setup after loading the view.
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

现在连接和segue标识符都很好，它一直向下钻取到detailview，但只显示第一个数组信息和部分，其余的数组没有显示。

在此先感谢您的帮助

阿德里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:14:45.287

无论如何，我似乎发现你的错误）你得到这样的物品，对吧：

```
if (teamsInt == 0)
        {
            teamDetail.teamImageString = [[NSString alloc] initWithString:[[eastCobbArray objectAtIndex:indexPath.row] objectForKey:@"image"]];
            teamDetail.teamTextString = [[NSString alloc] initWithString:[[eastCobbArray objectAtIndex:indexPath.row] objectForKey:@"description"]];
            teamDetail.title = [[NSString alloc] initWithString:[[eastCobbArray objectAtIndex:indexPath.row] objectForKey:@"name"]];
        } 
```

但仔细看 - 你使用 indexPath.row 但应该使用 indexPath.section ！您的行始终为 0。试试这个（准备好复制粘贴；））：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([[segue identifier] isEqualToString:@"Detail"]){
        TeamDetail *teamDetail = [segue destinationViewController];
        NSIndexPath *indexPath = [self.tableView indexPathForCell:sender];
        if (teamsInt == 0)
        {
            teamDetail.teamImageString = [[NSString alloc] initWithString:[[eastCobbArray objectAtIndex:indexPath.section] objectForKey:@"image"]];
            teamDetail.teamTextString = [[NSString alloc] initWithString:[[eastCobbArray objectAtIndex:indexPath.section] objectForKey:@"description"]];
            teamDetail.title = [[NSString alloc] initWithString:[[eastCobbArray objectAtIndex:indexPath.section] objectForKey:@"name"]];
        }
        if (teamsInt == 1)
        {
            teamDetail.teamImageString = [[NSString alloc] initWithString:[[westCobbArray objectAtIndex:indexPath.section] objectForKey:@"image"]];
            teamDetail.teamTextString = [[NSString alloc] initWithString:[[westCobbArray objectAtIndex:indexPath.section] objectForKey:@"description"]];
            teamDetail.title = [[NSString alloc] initWithString:[[westCobbArray objectAtIndex:indexPath.section] objectForKey:@"name"]];
        }
        if (teamsInt == 2)
        {
            teamDetail.teamImageString = [[NSString alloc] initWithString:[[buckheadThunderArray objectAtIndex:indexPath.section] objectForKey:@"image"]];
            teamDetail.teamTextString = [[NSString alloc] initWithString:[[buckheadThunderArray objectAtIndex:indexPath.section] objectForKey:@"description"]];
            teamDetail.title = [[NSString alloc] initWithString:[[buckheadThunderArray objectAtIndex:indexPath.section] objectForKey:@"name"]];
        }
        if (teamsInt == 3)
        {
            teamDetail.teamImageString = [[NSString alloc] initWithString:[[fultonEastArray objectAtIndex:indexPath.section] objectForKey:@"image"]];
            teamDetail.teamTextString = [[NSString alloc] initWithString:[[fultonEastArray objectAtIndex:indexPath.section] objectForKey:@"description"]];
            teamDetail.title = [[NSString alloc] initWithString:[[fultonEastArray objectAtIndex:indexPath.section] objectForKey:@"name"]];
        }
        if (teamsInt == 4)
        {
            teamDetail.teamImageString = [[NSString alloc] initWithString:[[atlantaBravesArray objectAtIndex:indexPath.section] objectForKey:@"image"]];
            teamDetail.teamTextString = [[NSString alloc] initWithString:[[atlantaBravesArray objectAtIndex:indexPath.section] objectForKey:@"description"]];
            teamDetail.title = [[NSString alloc] initWithString:[[atlantaBravesArray objectAtIndex:indexPath.section] objectForKey:@"name"]];
        }
    }
} 
```

ps 考虑重构您的代码。不要将对象添加到数组中，而是在一个字符串中创建它，例如：

```
teamArray = [[NSMutableArray alloc] initWithObjects:@"East Cobb", @"West Cobb", @"Buckhead Thunder", @"Fulton East", @"Atlanta Braves", nil]; 
```

或者：

```
teamArray = @[@"East Cobb", @"West Cobb", @"Buckhead Thunder", @"Fulton East", @"Atlanta Braves"]; 
```

使用带有数值的开关代替 if()

```
>     teams.teamsInt = indexPath.row;
>     switch (indexPath.row) {
>         case:0
>         teams.title = [teamArray objectAtIndex:indexPath.row];
>         break;
>         //and so on 
```

# css - 如何在我的行中第一个的右侧创建一个粗边框？

> ID：12751382
> 
> 赞同：1
> 
> 时间：2012-10-05T17:42:02.123
> 
> 标签：css

`<td>`如何仅在每行的第一行创建一个厚的右侧边框：

```
<table class="code">
   <tbody>
      <tr>
         <td>01</td><td></td>
      </tr>    
      <tr>
         <td>02</td><td>interface Transport {}</td>
      </tr>
   </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:44:11.197

这是[一个演示](http://jsfiddle.net/gionaf/CCgME/)

这是代码

```
.code tr td:first-child {
    border-right:5px solid red;
}​ 
```

哦，好吧，太晚了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:43:07.723

```
td:first-child {
   border-right: 5px solid black;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T17:43:30.177

```
td:first-child
{
 border-right: 1px solid red;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T17:44:03.637

```
td:first-of-type {
  border-right: 3px solid black;
} 
```

# vim - vim 自动完成某些关键字

> ID：12751384
> 
> 赞同：1
> 
> 时间：2012-10-05T17:42:12.060
> 
> 标签：vim, autocomplete

> **可能重复：**
> [Vim 中的自动完成方法结构](https://stackoverflow.com/questions/11498492/autocomplete-method-structure-in-vim)

所以我的 vim 上有智能自动完成功能，它在新行上自动完成 '{' 和 '}' 并将控制重定向到下一行，就像 eclipse 一样。所以输入'{'并按回车给我

```
{
  |
} 
```

哪里'|' 显示我的光标位置。我想要一些 Eclipse 风格的红宝石，只要写 'def' 它应该会导致

```
def |
end 
```

问题是这应该只在'def'在行首时生效，否则不生效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:21:33.147

似乎有一个名为[endwise](http://www.vim.org/scripts/script.php?script_id=2386)的插件。我从未尝试过，但这听起来像你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T22:41:20.883

为此，我还推荐一个插件。扩展文本的通用插件（但通常只有您按下和附加键才会发生扩展，例如`tab`snipmate 或我最喜欢的[ultisnips](http://www.vim.org/scripts/script.php?script_id=2715)。

使用这些带有适当片段的插件，您可以键入`def<tab>`它，它会扩展到您喜欢的内容。我知道 ultisnips 让您可以选择仅在行首扩展，不确定 snipmate。

如果您不想使用插件，只是为了好玩，您可以在 .vimrc 中定义以下内容，它会完成您想要的：

```
imap <expr> def (getpos(".")[2] == 1) ? "def\<CR>end\<UP> ":"def" 
```

# plot - 在鼠尾草中绘图

> ID：12751385
> 
> 赞同：1
> 
> 时间：2012-10-05T17:42:16.523
> 
> 标签：plot, sage

我的问题涉及以下内容：我的基本任务是通过将向量绘制为条形图来可视化排序算法中的步骤。没问题，我已经有了解决方案。唯一的问题是我认为我的解决方案在某种意义上是丑陋的，我总是调用绘图函数，因此总是得到一个新窗口，导致很多。

问题：我能否以某种方式制作一个函数，将前一个图作为参数并在同一个窗口中绘制图形？或类似的东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T01:00:48.513

您应该只使用 Sage 中的 Jupyter 笔记本（使用 SageMath 内核）。然后，当您想要更新图表时，您可以重新评估单元格。或者，如果我正确理解了这个问题，你可以

```
Cell 1 - basic functions
Cell 2 - function that updates graph using P += new_plot syntax
Cell 3 - cell where you do the plotting 
```

不过，我不确定我是否理解了。

* * *

之前：

您可能应该尝试使用 Sage 笔记本。

# button - KnockOut JS - 将按钮绑定到集合中的项目

> ID：12751387
> 
> 赞同：0
> 
> 时间：2012-10-05T17:42:18.047
> 
> 标签：button, binding, knockout.js

这是一个稍微难以用语言表达的问题。基本上，我一直在尝试基于 KnockoutJS 网站 (http://knockoutjs.com/examples/cartEditor.html) 中的一个示例在 KnockoutJS 中构建购物车页面。但是我想使用 jQueryUI 滑块，以便我可以调整购物车中每个产品的值。

我已经设法让工作正常，我可以将产品（在本例中为 Motorcars）添加到我的购物篮中并调整价值，并根据汽车是否有运动套件或敞篷车来增加/减少价值。

[http://jsfiddle.net/FloatLeft/UjRrJ/](http://jsfiddle.net/FloatLeft/UjRrJ/)

但是，不是添加产品（“添加汽车”按钮）然后选择汽车类型，而是希望能够通过单击按钮（例如单击在“添加宝马”按钮上 - 目前没有任何作用）。

然而，我的简单大脑无法弄清楚如何将按钮绑定到集合中的特定汽车。我想我可以通过创建一个遍历集合并找到类型与字符串匹配的汽车的函数来检索汽车，例如

```
 function GetCar(carType) {
        for (var i = 0; i < sampleCars.length; i++) {
            if (sampleCars[i].Type == carType) {
                return sampleCars[i];
            }
        }
    } 
```

所以基本上我想知道如何将“添加宝马”按钮的点击事件绑定到集合中的特定汽车并将其添加到我的购物车中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T18:12:10.397

如果您计划制作多个按钮，您可以创建一个函数，该函数可以创建可以接受汽车类型的事件处理程序。

```
self.addSpecificCarLine = function (carType) {
    return function () {
        var car = ko.utils.arrayFirst(sampleCars, function (car) {
            return car.Type === carType;
        });
        var cartLine = new CartLine();
        cartLine.car(car);
        self.lines.push(cartLine);
    };
}; 
```

然后你可以像这样绑定到处理程序：

```
<button data-bind='click: addSpecificCarLine("BMW")'>Add BMW</button> 
```

[更新的小提琴](http://jsfiddle.net/jeff1203/UjRrJ/7/)

# php - 正则表达式大写字母组合

> ID：12751390
> 
> 赞同：1
> 
> 时间：2012-10-05T17:42:27.020
> 
> 标签：php, regex

REGEX 对我来说是个谜。在 SO 上搜索后，我确实下载了 Espresso 并完成了教程，但事情仍然没有为我所用。这可能只是我的特定需求，但我还没有找到任何例子。我想要做的是找到恰好是两个特定大写（或小写，混合）然后是一串数字的匹配项。以下是我要测试的案例：

*   `TL123`
*   `TL 123`
*   `tl123`
*   `tl 123`
*   `TLABC123`
*   `tlabc123`

然后我要做的是[`preg_replace`](http://php.net/manual/en/function.preg-replace.php)该匹配的结果（并且最终总是返回`TL-123`- 例如）。

因此，后面的任何字母或数字组合`TL`都会返回`TL-`，反之亦然。任何朝着正确方向的推动都会非常有帮助。谢谢！

*编辑*

它实际上可能是我需要的[preg_match_all 。](http://php.net/manual/en/function.preg-match-all.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:53:03.230

要匹配指定的模式，您可以使用：

```
TL(?:[^0-9]*)(\d+) 
```

这将匹配 a`TL`后跟任何不是数字（或什么都不是）的内容，然后是数字列表。

您可以将其与 PHP 一起使用，`preg_replace()`例如：

```
$str = preg_replace('/TL(?:[^0-9]*)(\d+)/i', 'TL-$1', $str); 
```

当然，此示例假定这`TL`是您要匹配的确切字符。If`TL`只是一个占位符，您可以匹配任何内容，您可以使用以下内容：

```
preg_replace('/([a-z]{2})(?:[^0-9]*)(\d+)/i', '$1-$2', $str); 
```

有了这个，我将其硬编码为只允许 2 个字符匹配 ( `{2}`)。如果需要更改，可以将其修改为任何数字。

另外，由于您希望匹配的字符始终为大写，但可以*匹配*小写，我建议只`strtoupper()`在结果周围使用（而不是回调）。

# javascript - 将 HTML 页面定位为 div 标签？

> ID：12751391
> 
> 赞同：-2
> 
> 时间：2012-10-05T17:42:27.397
> 
> 标签：javascript, html

我正在设计一个 Web 应用程序，其中主页上有 3 个部分。1.页眉：包含菜单栏 2.内容：用于加载页面 3.页脚

所有这些都是 div 标签，现在我希望每当我点击菜单栏上的链接时，我的相关页面都会打开到 div 标签。你能建议我这样做的好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:45:42.483

您可以使用`iframe`with`innerHTML`来实现这一点

```
<div id="myFrame"></div>
<script type="text/javascript">
onload=function(){
var element=document.getElementById("myFrame")
el.innerHTML="<iframe src=\"http://www.mySite.com"></iframe>"
}
</script> 
```

# math - 在 Mathematica 中评估积分的极限

> ID：12751395
> 
> 赞同：0
> 
> 时间：2012-10-05T17:42:56.377
> 
> 标签：math, wolfram-mathematica, integration, limit

我有以下积分

![在此处输入图像描述](../Images/1cf1548662ee1ab15a6c81571e5dd90f.png)

我想知道如何显示

![在此处输入图像描述](../Images/f40ba77aab7f0ccf3a4dd16577d4ec6f.png)

下面我将我当前的尝试粘贴在 Mathematica 中。

```
tmp1 = Sqrt[Sum[(1/i), {i, 1, d}]]
Limit[Integrate[1/Sqrt[(2*\[Pi])] * Exp[-1/2 * z^2], {z, tmp1, Infinity}], d -> Infinity] 
```

提前感谢任何指针或提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:04:25.697

我们可以手动显示。鉴于我们知道内部函数从 0 到无穷大积分为 1/2，我们可以说

1/2 = 从 0 到 sqrt(sum( 1/i )) 的积分 + 从 sqrt(sum(1/i)) 到无穷大的积分。

然后

1/2 - 从 0 到 sqrt(sum(1/i)) 的积分 = 从 sqrt(sum(1/i)) 到无穷大的积分

由于 lim d -> infinity of sqrt(sum(1/i)) = infinity 我们知道左侧为零，因此积分收敛到零。

# javascript - 浏览器不呈现表格元素 | jsFiddle 示例

> ID：12751400
> 
> 赞同：1
> 
> 时间：2012-10-05T17:43:19.340
> 
> 标签：javascript, jquery

我的代码使用 James Padolsey 的“jQuery 的跨域模块”发出跨域请求以获取网页的源代码： [https](https://github.com/padolsey/jQuery-Plugins/tree/master/cross-domain-ajax) ://github.com/padolsey/jQuery-Plugins/tree/master/cross-domain-ajax ；

然后它选择第一个表并将其附加到现有的 div 中。

但是附加的表格没有正确呈现。谁能看看这个小提琴并告诉我为什么？

[http://jsfiddle.net/6ZgRf/](http://jsfiddle.net/6ZgRf/)

 `* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:46:30.827

您正在使用 jQuery.. 所以您可以通过将其转换为 jQuery 对象来遍历它

```
function stripViewResponse() {
// Select table element
  var fetchedTable = $(antwort).find('table')[0]; // find first table
// append table
  $('#new').append(fetchedTable);
} 
```

[http://jsfiddle.net/6ZgRf/1/](http://jsfiddle.net/6ZgRf/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:49:51.670

你也可以试试这个

```
function stripViewResponse() {
// Select table element
    var fetchedTable = $(antwort).find('table').eq(0);
// append table
  $('#new').append(fetchedTable);
} 
````

# python - Python 和 Web 开发 | Mako - 很多问题

> ID：12751401
> 
> 赞同：0
> 
> 时间：2012-10-05T17:43:19.117
> 
> 标签：python, django, python-2.7, web-deployment, mako

不是来自 MVC 背景，而是纯粹使用 php，最大的挑战之一是掌握框架和 MVC 意识形态。虽然我确信许多人坚持将 MCV 作为推送代码的标准方式，但我缺乏对框架的基本介绍，而且虽然它们上手似乎也很乏味，但我的目标纯粹是在 html 文档中编写一些 Python 代码。

乍一看，Mako 似乎是解决问题的方法，它允许我将 Python 代码写入 html，但乍一看，它似乎需要更多的工作，而不仅仅是“那个”。

我在任何地方都找不到答案是“如何从 Mako 开始”的整个方面。

看看 Mako 网站，出现了这样的情况：

```
<%inherit file="base.html"/>
<%
rows = [[v for v in range(0,10)] for row in range(0,10)]
%>
<table>
% for row in rows:
    ${makerow(row)}
% endfor
</table>

<%def name="makerow(row)">
<tr>
% for name in row:
    <td>${name}</td>\
% endfor
</tr>
</%def> 
```

我再次看到整个模板意识形态 (yuk) 出现了，但我只想将 Python 代码写入我的 html 中。所以我的一些问题是：

*   安装 Mako 后，我可以开始将 Python 代码放入 HTML 中吗？
*   如果不是，那么我假设我需要将上面的示例代码放入一个 .py 文件并将 base.html 放在同一目录中？还是我将 .py 文件放在其他地方？
*   在我在 html 文件中包含对 .py 文件（或 .mako 文件或其他任何名称）的类似调用的意义上，这是否会像 CSS 一样工作。
*   既然听起来很框架，我是否需要将 html 文件和 .py/.mako 放在同一目录中，还是必须将它们分开？
*   编辑：我不妨问我是否可以调用我的扩展名 .psp（即使它不是 mod_python）。

我知道很多人会说这很愚蠢，并且有更好的方法可以做到这一点，我犯了一个大错误。但显然没有菜鸟教程更详细地解释了这一点，因此按照我认为合适的方式去做，即。将 Python 代码放在一个文件中并完成它。

我也查看了这个 mod_python，但由于它似乎是一个旧的解决方案，我实际上想跳过那个。但是，我希望有一个“新”的解决方案可以将 Python 嵌入 HTML。

PS。我知道所有的框架布道者都会让我兴奋，但目的不是争论如何编写代码。由于在 Python、Django 或 Makos 网站上以及 Pylons、Pyramid 等网站上都找不到新手/分步教程，因此必须假设任何想要这样做的人都知道他们的框架实现方法。但我不这样做，所以我只想将 Python 代码放入 HTML 中，而不是花费/浪费时间学习 Python 已经应该首先完美解决的东西。

聚苯乙烯。菜鸟，我的意思是我很想知道诸如此类的基础知识。将此代码放入此类文件中，然后将该文件放在那里。然后拿走这个文件并这样做。我只是在任何地方都找不到这个。这就像一个公开的秘密......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:00:07.340

首先，要了解与 PHP 不同——它是一种专门用于*Web 开发*的定制开发语言，Python 是一种通用编程语言。使用 Python，您可以开发 Windows 应用程序、Mac 应用程序、服务器端脚本、移动应用程序、服务器、网络客户端——通用编程允许您做的所有事情。就像 Java 或 C# 一样。

因此，有多种方法可以在 Python 中进行 Web 开发。认为“PHP 是 Web 开发”是错误的，并且认为“Python Web 开发将像 PHP Web 开发一样”也是错误的。

最后，请记住，由于 PHP 专为 Web 开发而设计，它“隐藏”了许多杂乱无章的细节，这些细节需要编写代码，这些代码需要位于 Web 服务器后面并以严格的格式处理请求和返回响应。

要使用 Python 进行 Web 开发，您首先需要学习 Python。这与 PHP 不同。你在学习 PHP 时学习 Web 开发（因为这是它的主要目的）。一旦你学会了 Python，你就可以开发各种应用程序；许多 Python 开发人员并不为 Web 开发。

> 由于在 Python、Django 或 Makos 网站以及 Pylons、Pyramid 等网站上都找不到新手/分步教程，因此必须假设任何想要这样做的人都知道他们的框架实现方法。

Mako 是一种模板语言（如 Smarty）。“独立”使用它是没有意义的，就像没有 PHP 支持 Smarty 一样。

所有 Web 框架都有初学者指南。有些比其他更好。Django 拥有最好的文档之一。[从这里](https://docs.djangoproject.com/en/1.4/#first-steps)开始。要使用任何框架，您需要知道它们公开的方法。就像你需要知道`mysql_*`PHP 与 MySQL 交互的方法一样。

你剩下的问题源于 Python 不像 PHP。因此，您对 PHP 的期望是在 Python 生态系统中找不到的。

# mongodb - 增量插入与映射/减少

> ID：12751402
> 
> 赞同：1
> 
> 时间：2012-10-05T17:43:29.757
> 
> 标签：mongodb, mapreduce

假设您有一组文档，其结构如下：

```
{ username: "jones",
    likes: 20,
    text: "Hello world!"
  } 
```

此外，假设您正在构建的应用程序需要显示每个用户的喜欢总数的统计信息。Mongodb 文档显示您可以使用以下 Map/Reduce 函数来完成此操作：

```
function() {
    emit( this.username, {count: 1, likes: this.likes} );
  } 
```

但是，对我来说，每次将新文档插入数据库时​​简单地增加一个“Like”计数器似乎更直观。这不需要像 Map/Reduce 那样遍历整个集合。它会立即更新计数器，而不是在下次 Map/Reduce 进程运行时更新。而且架构看起来更简单。

有人可以在答案中解释为什么 Map/Reduce 函数是更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:48:52.463

我认为 MongoDB 文档中提出的 MapReduce 解决方案旨在更通用。也就是说，如果您对每条记录`stat(x)`的某些功能感兴趣，并且在设置数据集时不知道自己会感兴趣，那么 MapReduce 提供了一种很好*的后验*方法来聚合这样的跨记录的统计。`stat()``x``stat`

 *如果您*已经知道*您将始终对 each 感兴趣`stat(x)`，`x`那么请务必尽可能多地进行预计算和存储，因为您认为是合适的。

不过，我可以想象，在索引和搜索统计数据的时间与每次需要时计算它们之间存在一些权衡。如果数据集变得巨大（我不确定这里是否有一个好的估计），那么理论上每次只用 MapReduce 计算它可能更有利，因为检索的等待时间会很糟糕。

虽然我猜测 MapReduce 赢得该权衡的数据大小非常大，即使那样，如果您想对数据后计算做更多的事情，它可能并不是真的更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T23:03:20.937

MapReduce 不是为临时的实时查询而设计的。它很慢。它更像是一种批处理机制，因此您提出的设计在性能方面会更有效率。*

# java - Google App Engine 中的日志不起作用

> ID：12751407
> 
> 赞同：0
> 
> 时间：2012-10-05T17:43:38.107
> 
> 标签：java, google-app-engine

我正在使用 Google App Engine 构建 Java Google App，并按照[这些说明](https://developers.google.com/appengine/docs/java/runtime#Logging)来了解如何使用 Logging。

基本上，我想做的很简单。我正在向 App Engine 中的 servlet 发出 POST 请求，我只想通过日志打印出来以查看是否正确获取数据。日志中根本没有任何语句，除了自动生成的一条说收到了 POST，但我的调试语句不存在。

在这些方向之外，我是否遗漏了一些简单的东西？我很困惑为什么这不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T17:51:17.897

您很可能在日志记录期间使用调试级别，但您的 logging.properties 文件具有 INFO 级别。将其更改为调试：

```
# Set the default logging level for all loggers to WARNING
.level = DEBUG 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:51:21.827

确保您在 logging.properties 文件中设置了最低日志级别。

[AppEngine 日志记录](https://developers.google.com/appengine/docs/java/runtime#Logging)

# sass - 在 Sass 3.2 中使用占位符选择器避免重复

> ID：12751410
> 
> 赞同：7
> 
> 时间：2012-10-05T17:43:54.540
> 
> 标签：sass

问题是我的 Sass 代码在编译的 CSS 文件中生成了重复的声明。我的 Sass 代码被组织成多个部分，我将它们 @import 到最终的 screen.scss 文件中

我有一个`_placeholders.scss`包含`%alignright`和`%alignleft`。我有一个`_content.scss`使用这些的文件，所以我`@import "_placeholder.scss"`在该文件的顶部，我在 _footer.scss 中做同样的事情。所以我猜`@import "_placeholders.scss"`有两个地方导致了重复？

如果我刚`@import "_placeholders.scss"`开始`screen.scss`让它们全局可访问，那么它会混淆 CSS 声明的顺序。第一个使用占位符选择器的 CSS 选择器将以 I 的顺序插入`@import "_placeholders.scss"`，而不是 I 的位置`@import "_conntent.scss"`。

例如，在 screen.scss 中：

```
@import "placeholders";
@import "reset";
@import "typography"
@import "content" // uses placeholder %alignleft
@import "footer" // uses placeholder alignleft 
```

生成的 CSS：

```
/* Content styles that use placeholders */
/* reset styles */
/* typography styles  */
/* expected order of content styles  */
/* footer styles  */ 
```

如何避免重复并将样式输出到编译后的 CSS 中的正确位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T01:45:02.553

这是一个你需要`@include`一个`@mixin`而不是`@extending`占位符的地方。

```
// in _placeholders.scss

@mixin alignleft {
    text-align: left;
}

// in _content.scss

div.whatever {
    @include alignleft;
}

// in _footer.scss

div.whatever-footer {
    @include alignleft;
} 
```

# c# - 如何从 ViewModel 在 WPF 中附加 windows 元素？

> ID：12751417
> 
> 赞同：0
> 
> 时间：2012-10-05T17:44:14.690
> 
> 标签：c#, wpf, mvvm

我正在使用 WPF 和 MVVM 模式，我需要将元素从 ViewModel 附加到窗口。场景是：用户将有一组文本框模拟表格的字段来插入产品，并且会有一个按钮来添加更多行。我的问题只是创建一种使此按钮起作用的方法。我怎样才能做到这一点 ？

有没有更好的方法来解决这样的问题？需要一次添加多个实体向表中添加行？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:12:23.920

在绑定到 ItemsControl 的视图模型中使用 ObservableCollection。在按钮单击事件上，将新对象添加到集合中。UI 将被通知另一个对象已添加到集合中并呈现新行。

# java - 使用返回常量值的方法

> ID：12751424
> 
> 赞同：6
> 
> 时间：2012-10-05T17:44:32.617
> 
> 标签：java

我们真的需要 Java 中的静态最终常量吗？

假设我有以下代码：

```
public class Test {

    public static final int A = 1234;

    public static int getA()
    {
        return 1234;
    }
} 
```

您能否从效率方面比较以下两种情况？

1.  `Test.A`

2.  `Test.getA()`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-05T17:48:22.780

假设一个 JIT 编译器，在效率上应该没有明显的差异 - 至少不足以对应用程序的执行速度产生显着影响。

但是，在灵活性方面有明显的提升：将值封装在方法中几乎总是好的，因为它可以让您更改以后计算值的方式。

该规则的一个值得注意的例外是纯常数，例如，来自数学世界：封装对 的访问没有多大意义`Math.PI`，因为这个基本常数的值不可能改变，因此需要切换程序中获取值的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T20:43:14.457

常量的`static` `final`行为与从方法返回的文字值不同。在某些情况下，java 编译器也在**编译时**使用这些。

一个例子，

```
public static boolean DEBUG = false;

...

if (DEBUG)
{
   ...do something...
} 
```

对比

```
public boolean debug()
{
    return false;
}

...

if (debug())
{
    ...do something 2...
} 
```

在第一种情况下，条件和...做某事...代码不会包含在编译的字节码（类文件）中。在第二种情况下，条件和 ...do something 2... 代码将被包含但从不执行 - 在这种情况下，JIT 可能会进行充分的分析，但会在运行时删除代码。

有一次，在 Java 的早期，JIT 不存在或不够聪明，无法优化返回文字值的简单方法。然后，性能需要一个恒定值。如果您记住外部类（用于公共/受保护的静态最终常量）将在编译时将值烘焙到该字节码中，那么以这种方式定义常量也更方便；而不是在运行时从源类中获取值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T17:47:07.273

在效率方面，`test.getA()`往往可以`test.A`通过 JIT 降低到相当于。尽管如此，这种差异充其量只能忽略不计。

> 我们真的需要 Java 中的静态最终常量吗？

不，但它有助于防止重复分配。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T17:53:33.350

静态最终变量不能被外部代码更改，因此无需封装它们。

此外，没有参数的静态方法暗示访问对象的状态，这是一个谎言，因为该方法是静态的。

编译器方面的效率应该不会有太大差异，但在程序易读性和自文档代码方面，静态 final 是一个更好且经过时间考验的选择。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-05T17:52:22.430

您展示的案例相当琐碎，我相信这是有意的。您的第一种情况更直接和更有效，因为它在堆栈上的调用更少，但我相信更好的编码风格是将两者结合起来。我认为这不会是您在课堂上使用此变量的唯一地方。

```
public class Test {

public static final int A = 1234;

public static int getA()
{
   return A;
}

public static int doSomething()
{
   int result = A * 10;
   //do more stuff
   return result;
}
} 
```

这允许您仅在需要更改时在一个地方更改变量并在整个程序中获得预期的结果。就个人而言，我会将 int A 设为私有只是为了使用 get 方法的一致性，这就是必须设置类的方式。这样，您将永远不会遇到一个问题，即您不记得在变量名之后是否需要“()”，并且所有位于类之外的变量都以相同的方式访问。其中大部分只是编码风格，而不是对或错。

# php - PHP - $total = 0 和 var $total = 0。哪个是正确的？

> ID：12751428
> 
> 赞同：1
> 
> 时间：2012-10-05T17:44:59.563
> 
> 标签：php, class, var

> **可能重复：**
> [PHP 关键字 'var' 有什么作用？](https://stackoverflow.com/questions/1206105/what-does-php-keyword-var-do)

我知道这听起来像是一个奇怪的问题，但这是我无法摆脱的。我正在定义一个类来处理发票行及其各自的税款，我当前的“原型”如下所示：

```
 public function getRate() {
        if (!empty($this->lines)) {
            var $total = 0;

            foreach ($this->lines as $line) {
                $total += $line->subtotal;
            }

            return ['title' => $this->attributes['title'], 'value' => $this->attributes['value'], 'type' => $this->attributes['type'], 'total' => $total];
        }
    } 
```

**$total**只是用来计算行的总金额（在这种情况下，按税率计算），所以在我看来，一旦函数返回数组，它就必须被丢弃。问题是......哪个更合适（更正确）？`$total = 0;`还是`var $total = 0;`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T17:46:16.083

> 注意：出于兼容性原因（作为 public 关键字的同义词），仍然支持使用 var 关键字声明变量的 PHP 4 方法。在 5.1.3 之前的 PHP 5 中，使用它会产生一个 E_STRICT 警告。

在任何情况下，变量都在函数内部，而不是在类内部，因此可见性无论如何都不适用。只需删除`var`

# php - PHP打印游戏服务器信息PNG

> ID：12751433
> 
> 赞同：0
> 
> 时间：2012-10-05T17:45:32.670
> 
> 标签：php

好吧，我制作了一个简单的脚本，可以将服务器信息打印到 PNG 图片中，它确实有效，但存在一些问题。

我使用了一个免费脚本，该脚本使用 php 从源服务器获取变量，然后打印输出，我对其进行了编辑，以便将其打印成图片，但不知何故，它不会打印玩家和地图值。

这是脚本使用的 config.php。

```
<?php

$servers = array (array ('name' => '[TF2] gameTek Idle Trade Server #1 [NO]',
                         'ip' => '84.234.160.79',
                         'port' => 27015),
                         array ('name' => '[TF2] gameTek Achevments Idle Trade Server #2 [NO]',
                         'ip' => '84.234.160.79',
                         'port' => 27017), 

                         array ('name' => '[TF2] gameTek BOT Fun #3 [NO]',
                         'ip' => '84.234.160.79',
                         'port' => 27016),
                           array ('name' => '[TF2] gameTek Achevments Idle Trade Server #5 [DFW]',
                         'ip' => '50.56.179.18',
                         'port' => 27015)
                         );
/*
$cachelifetime = 30;
$cachefile = './cache/servers.html';
*/
$output = '
<p><a href="steam://connect/#ip#:#port#">
<img 
src="Generate.php?n=#name#&p=#players#/#maxplayers#&m=#map#" alt="" /></a></p>
';

?> 
```

打印时的输出是这样的

```
http://teamgamers.net/GetInfoServer/Generate.php?n=[TF2]%20gameTek%20Idle%20Trade%20Server%20#1 [NO]&p=3/32&m=tek_idle_trade_v5 
```

那么，我怎样才能使它完美地工作，而不是像现在这样，它只打印服务器名称而不是其余的？我试着弄清楚了一点，但没有运气。

生成.php

```
<?php
$Name = $_GET['n'];
$Players = $_GET['p'];
$Map = $_GET['m'];
$Image = @ImageCreateFromPNG("./Server.png");
$Cord = imagecolorallocate($Image, 255, 255, 255);
imagestring($Image,15,60,7,$Name,14);
imagestring($Image,15,62,37,$Players,14);
imagestring($Image,15,140,37,$Map,14);
header('Content-type: image/png');
imagepng($Image);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:30:41.030

[查看 urlencode](http://php.net/manual/en/function.urlencode.php)；基本上，您放入 url 的所有内容都需要传递到 urlencode 以确保它不包含任何元字符。

```
$servers = array (array ('name' => urlencode('[TF2] gameTek Idle Trade Server #1 [NO]'),
// and so on... 
```

# bluetooth - 蓝牙扩展查询响应

> ID：12751434
> 
> 赞同：2
> 
> 时间：2012-10-05T17:45:37.913
> 
> 标签：bluetooth

我正在尝试使用蓝牙扩展查询响应来打包一条简短的消息，但我似乎找不到任何允许访问此信息的 API（我与语言无关，我只需要找到一种方法来获取这个工作！）也没有任何使用此数据的示例。根据我的发现，我相信现在大多数堆栈在响应查询响应时都会发送 EIR 数据？尽管除了“这个”支持“EIR之外，甚至没有真正记录过。有没有人可以指出我正确的方向？

仅供参考，我可以访问运行 Ubuntu、Win 7 的机器，如果需要的话，可能还有其他几个操作系统。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:01:33.300

在 Linux 上，您可以使用 BlueZ 实用程序[hciconfig](http://linux.die.net/man/8/hciconfig)和[hcitool](http://linux.die.net/man/1/hcitool)。

对于`hciconfig`，请查看选项`inqmode`（扩展为模式 2）和`inqdata`。使用 hcitool，您可以使用`inq`.

# perl - Perl DBI Oracle 在 SELECT 之后不保留列顺序

> ID：12751437
> 
> 赞同：1
> 
> 时间：2012-10-05T17:45:42.093
> 
> 标签：perl, dbi, dbd

我在 Windows 上使用由 ActiveState 构建的 Perl v5.12.3。DBD::Oracle 版本 1.27。DBI 版本 1.616。我正在按此特定顺序选择下面的数据，并希望以相同的顺序检索结果数据。下面是代码示例和一些示例。

SQL 片段（下面 $report_sql 的内容）

```
select student_number, lastfirst, counselor, 
   a.dateenrolled as "Date Enrolled 1", a.dateleft as "Date Left 1", a.termid as "Term ID 1", a.course_number as "Course Number 1", 
   a.expression as "Expression 1", b.dateenrolled as "Date Enrolled 2", b.dateleft as "Date Left 2", 
   b.termid as "Term ID 2", b.course_number as "Course Number 2", b.expression as "Expression 2" 
```

Perl 代码片段

```
## run the resulting query
my $report_result = $dbh->prepare( $report_sql );
$report_result->execute();   
while( my $report_row = $report_result->fetchrow_hashref())
        {
            print Dumper(\$report_row); ## contents of this posted below 
```

$report_row 的打印 Dumper 的内容

```
$VAR1 = \{
        'Expression 2' => 'x',
        'LASTFIRST' => 'xx',
        'Term ID 1' => 'xx',
        'Date Enrolled 2' => 'xx',
        'Course Number 1' => 'xx',
        'Term ID 2' => 'xx',
        'STUDENT_NUMBER' => 'xx',
        'Date Left 2' => 'xx',
        'Expression 1' => 'xx',
        'COUNSELOR' => 'xx',
        'Date Left 1' => 'xx',
        'Course Number 2' => 'xx',
        'Date Enrolled 1' => 'xx'
      }; 
```

订单我希望它被打印

```
$VAR1 = \{
        'STUDENT_NUMBER' => 'xx',
        'LASTFIRST' => 'xx',
        'COUNSELOR' => 'xx',
        'Date Enrolled 1' => 'xx',
        'Date Left 1' => 'xx',
        'Term ID 1' => 'xx',
        'Course Number 1' => 'xx',
        'Expression 1' => 'xx',
        'Date Enrolled 2' => 'xx',
        'Date Left 2' => 'xx',
        'Term ID 2' => 'xx',
        'Course Number 2' => 'xx',
        'Expression 2' => 'x'
      }; 
```

需要注意的一点是，正在运行的这个查询是正在运行的众多查询之一。此特定脚本运行一系列查询并根据返回的结果生成报告。查询与 perl 脚本一起存储在 hd 上的文件中。查询被读入然后运行。并不总是选择相同的列。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T17:51:17.347

您使用了哈希。哈希元素没有可控的顺序*。可以控制数组中元素的顺序。如果要显示接收字段的顺序，请使用数组而不是哈希。

如果您确实需要这些名称，您可以使用`@{ $sth->{NAME} }`. 出于效率原因，您仍应使用数组，但如果您愿意，可以使用散列。

* * *

* — 就像数组元素按照它们在数组中“物理”组织的顺序返回一样，哈希元素按照它们在哈希中物理组织的顺序返回。您无法控制元素在散列中的物理放置位置，并且位置会随着散列的变化而变化。使用数组，您可以确定元素的物理位置，并且它将保持在该位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T18:56:57.163

当 DBI 结果中的列顺序很重要时，您可以获取列名和值作为数组引用。

```
...
my $names = $report_result->{NAME}; # or NAME_lc or NAME_uc
while( my $report_row = $report_result->fetchrow_arrayref() ) {
    for my $col_idx ( 0 .. $#{$names} ) {
        print "$names->[$col_idx]: $report_row->[$col_idx]\n";
    }
} 
```

在我不得不担心国际化之前，我经常使用它来生成 CSV 报告，只需将`NAME`数组传递给，`Text::CSV`然后再传递结果数组，编写报告就变成了编写查询。

# asp.net - 继承了一个 ASP.NET 应用程序并有一些简单的问题

> ID：12751439
> 
> 赞同：2
> 
> 时间：2012-10-05T17:45:48.720
> 
> 标签：asp.net

我是一名 PHP/Rails 开发人员，并且继承了一个 ASP.NET 应用程序（及其维护）。所以我有几个简单的问题。

1.) ASP.NET 中典型的渲染（编译？）HTML 页面的组成是什么。也就是说，当发出请求时，从初始请求到 HTML 显示在浏览器中会发生什么？我假设一些模板被组合并最终呈现，但我想要一个更深入的答案。

2.) 我被要求从一个 aspx 页面的登录表单中删除一个链接。查看 aspx 页面本身，它有一个继承语句、一个到代码隐藏文件的链接，并链接了一些其他资源。我实际上在哪里从登录页面/模板中删除链接？到目前为止，我一直无法找到链接的确切位置，以便我可以将其删除或注释掉。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:50:42.480

> 也就是说，当发出请求时，从初始请求到 HTML 显示在浏览器中会发生什么？

我会开始学习[ASP.Net Page Life Cycle](http://msdn.microsoft.com/en-us/library/ms178472%28v=VS.100%29.aspx)。

> 到目前为止，我一直无法找到链接的确切位置，以便我可以将其删除或注释掉。

在您至少对 ASP.Net 的工作原理有一定的了解之前，我不会做任何事情。浏览一些教程会很好。[ASP.Net](http://www.asp.net/)有一个很好的[入门](http://www.asp.net/get-started)部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:05:41.177

```
What's the makeup of a typical rendered(compiled?) 
```

给你一个很简单的说明（尝试），帮助你快速理解：

1.  有一个带有 aspx 标签的页面，asp.net 正在运行后面的代码并用数据填充这个标签。
2.  在后面的代码中填充数据后，asp.net 正在“运行”整个页面，如果您`<% %>`在 aspx 页面内，则运行其中存在的附加代码。

这是一个简单的例子：

```
public partial class Dokimes_StackOverFlow_Diafora : System.Web.UI.Page
{
    public string cRenderMeAlso = "test";

    protected void Page_Load(object sender, EventArgs e)
    {
        txtText.Text = "One Test";        
    }
}

<form id="form1" runat="server">
     This will fill when the page is prepared
     <asp:Literal runat="server" ID="txtText"></asp:Literal>
     <br />
     This will be render as the page reads out to send it to the browser
     as php do
     <%=cRenderMeAlso%>
</form> 
```

现在在 Literal 控件的位置，您可以拥有一个完整的自定义渲染控件，这可能是页面的一个新的复杂部分，其中包含他的元素和渲染。

每个页面、母版页、用户控件都有一个调用循环，以帮助首先从 Init() 传递所有内容并准备它们，然后从 Load() 和另一个阶段传递所有内容，从而能够并行初始化它们 - 一起。

现在，在 PostBack 页面上保留了一些信息`ViewState`，这些信息与其余的帖子数据一起发布，后面的代码使用所有这些数据来填充控件。它还会触发您在按钮上初始化的任何单击事件背后的代码，您可以在那里运行一些代码来完成您的工作。

```
 I've been asked to remove a link from a Login form 
```

如果您找不到该链接可能在 asp.net 提供的标准登录表单上，则解决方案是呈现表单的完整模板，并将其从那里删除 - 但因为存在破坏登录的情况表单，最好不要删除它而只是隐藏它 - 因为如果你删除它并且后面的代码要求它，它会抛出一个错误 - 我的意思是标准的 asp.net 表单登录代码，它是 asp 的一部分。网。

因此，如果是这种情况，请将登录控件呈现为模板（从设计模式，在属性上执行此操作），查看您搜索的链接和 ether 在 code behind 上创建的链接`Link.Visible = false`，ether 将其删除并删除其所有引用背后的代码。

# iphone - 如何在 Cocos2d 中为场景创建平铺、叠加层？

> ID：12751454
> 
> 赞同：0
> 
> 时间：2012-10-05T17:47:27.007
> 
> 标签：iphone, objective-c, ios, cocos2d-iphone

我是 Cocos2d 的新手，但我似乎无法找到答案。我想在我的应用程序中添加一个大部分透明的图像作为覆盖。图像覆盖在应用程序上，并且不响应屏幕点击。所有手势都应该“通过”到应用程序。

叠加图像实际上应该是平铺的。这是一个应该在水平和垂直方向重复的小图像。

我怎样才能做到这一点？事实上，这是我想在整个应用程序的持续时间内显示的叠加层——而不仅仅是一个特定的场景。有没有一种简单的方法可以做到这一点？

* * *

我的叠加点是我想为具有“8 位”音调的游戏创建伪扫描线效果。扫描线将通过将覆盖应用到游戏来生成。覆盖是非交互式的，应该始终存在。所以，这不是一个“基于瓷砖的游戏”，但我确实需要一个平铺效果来实现这个功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:13:07.960

您应该能够在每个场景中创建一个图层，将 zOrder 设置为较大的值以便它覆盖其他所有内容，并将其 isTouchEnabled 属性设置为 NO。然后，您可以将任何您想要的内容添加到图层，这可能是您的图案图像。要更改 alpha，只需设置图像的不透明度属性。我可以预见的唯一问题是覆盖可能会禁用其下方图层的触摸事件。

# c# - 使用 C# 动态创建图形图像

> ID：12751456
> 
> 赞同：0
> 
> 时间：2012-10-05T17:47:35.040
> 
> 标签：c#, .net

这是一个.net 网站。我有一个 100 x,y 坐标的列表。

我需要显示 100 个八角形，其中心点位于各自的坐标处。

我通过将数组传递给 javascript 并动态创建和定位图像来玩弄这个。但它看起来很糟糕，调整浏览器窗口的大小会导致问题等。

那么，我可以自己创建图形吗？我看到这段代码回答了一个类似的问题：

```
 using (Bitmap bmp = new Bitmap(10, 10))
    { 
        using (Graphics g = Graphics.FromImage(bmp)) 
        { 
            g.Clear(Color.White); 
            g.DrawLine(Pens.Black, new PointF(9.56f, 4.1f), 
                                           new PointF(3.456789f, 2.12345f)); 
        } 
        bmp.Save(@"c:\myimage.jpg", ImageFormat.Jpeg);
    } 
```

你能用这个很容易地画出八边形吗？

但是，当我尝试运行上面的代码时，我收到了这个错误。

GDI+ 中出现一般错误

如果我不能让它运行，我不想花很长时间锻炼来画八边形等。

最后一件事，我不需要保存图形，我只想显示它，就好像它是我从图像文件夹中获取的图像一样。

编辑：根据下面的建议，我修改了如下代码：

```
using (MemoryStream ms = new MemoryStream())
            {
                bmp.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);
                byte[] buffer = ms.GetBuffer();
                HttpContext.Current.Response.OutputStream.Write(buffer, 0, buffer.Length); 
            } 
```

这是把我的画放在屏幕上。有什么需要调整的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:49:45.340

您可能没有对`C:\`.

您应该保存到 a `MemoryStream`，然后将其呈现给 HTTP 响应，而不是保存到磁盘。（在 ASHX 或 MVC 操作内）

# php - DOM 尚未加载 | 该怎么办？

> ID：12751458
> 
> 赞同：0
> 
> 时间：2012-10-05T17:47:41.247
> 
> 标签：php, javascript, html

下面代码中的 PHP 片段创建了一个 id 通用的 div。

然而，在 javascript 中，当我尝试访问这个值时，我得到了 null。显然PHP是在服务器端生成的。所以我会认为当脚本在客户端运行时数据就可用了。

我能做些什么来解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:58:58.337

在体内做一个加载。在你的身体后面加上这个

```
onload="whateverfunction()" 
```

# javascript - 无法调整 JQuery 模式窗口的大小

> ID：12751459
> 
> 赞同：0
> 
> 时间：2012-10-05T17:47:59.963
> 
> 标签：javascript, jquery, window, modal-dialog

CSS：

```
#mask {
    position: absolute;
    z-index: 9000;
    background-color: #000;
    display: none;          
}
#boxes .window {
    position: fixed;
    width: 800px;
    height: 600px;
}   
#boxes #dialog {
    background: #f2f2f2 url('App_Themes/prompt_panel_gradient.png') top left repeat-x;           
    width: 800px;
    height: 600px;
} 
```

HTML：

```
<div id="boxes">
    <div id="dialog" class="window">
        <b>Testing modal window</b> |
        <a href="#" class="close">Close it</a>            
    </div>
    <div id="mask">
    </div>
</div> 
```

Javascript：

```
<script type="text/javascript">
$(document).ready(function() {

$('a[name=modal]').click(function(e) {
    //Cancel the link behavior
e.preventDefault();
//Get the A tag
var id = $(this).attr('href');

//Get the screen height and width
var maskHeight = $(document).height();
var maskWidth = $(window).width();

//Set height and width to mask to fill up the whole screen
$('#mask').css({ 'width': maskWidth, 'height': maskHeight });

//transition effect     
$('#mask').fadeIn(500);
$('#mask').fadeTo("slow", 0.9);

    //Get the window height and width
    var winH = $(window).height();
    var winW = $(window).width();

    //Set the popup window to center
    $(id).css('top', winH / 2 - $(id).height() / 2);
    $(id).css('left', winW / 2 - $(id).width() / 2);                

    //transition effect
    $(id).fadeIn(500);
});

//if close button is clicked
    $('.window .close').click(function(e) {
    //Cancel the link behavior
    e.preventDefault();
        $('#mask, .window').hide();
    });

    $('#mask').click(function() {
    $(this).hide();
    $('.window').hide();
    });
});

</script> 
```

一切正常，模态窗口以背景图像打开，链接工作正常，但大小不是 800x600，我也不能更改模态窗口的大小。我错过了什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:05:09.553

因此，在查看了您的代码之后，这就是我想出的...如果这是您正在寻找的内容，您可能想要研究 jQuery 选择器以及它们是如何工作的...

[http://jsfiddle.net/Mutmatt/Mr5Qe/8/](http://jsfiddle.net/Mutmatt/Mr5Qe/8/)

JS：

```
$('a.close').click(function(e) {//Note this gets the 'a' with the class (dot notation) 'close'
    //Cancel the link behavior
    e.preventDefault();
    //Get the A tag
    var id = $(this).attr('href');

    //Get the screen height and width
    var maskHeight = $(this).parent().height();//this ('a' with 'close' class) parent (dialog div)
    var maskWidth = $(this).parent().width();
    console.log("Mask Height [" + maskHeight + "]");
    console.log("Mask Width [" + maskWidth + "]");

    //Set height and width to mask to fill up the whole screen
    $('#mask').css({
        'width': maskWidth,
        'height': maskHeight
    });

    //transition effect     
    $('#mask').fadeIn(500);
    $('#mask').fadeTo("slow", 0.9);

    //Get the window height and width
    var winH = $(window).height();
    var winW = $(window).width();

    //Set the popup window to center
    $(id).css('top', winH / 2 - $(id).height() / 2);
    $(id).css('left', winW / 2 - $(id).width() / 2);

    //transition effect
    $(id).fadeIn(500);
});

//if close button is clicked
$('.window .close').click(function(e) {
    //Cancel the link behavior
    e.preventDefault();
    $('#mask, .window').hide();
});

$('#mask').click(function() {
    $(this).hide();
    $('.window').hide();
}); 
```

​ HTML

```
<div id="boxes">
    <div id="dialog" class="window">
        <b>Testing modal window</b> |
        <a href="#" class="close">Close it</a>            
    </div>
    <div id="mask">
    </div>
</div>​ 
```

CSS：

```
#mask {
    position: absolute;
    z-index: 9000;
    background-color: #000;
    display: none;          
}
#boxes .window {
    position: fixed;
    width: 800px;
    height: 600px;
}   
#boxes #dialog {
    background: #f2f2f2 top left repeat-x;           
    width: 800px;
    height: 600px;
}​ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-05T18:16:14.250

我发现只需在 html 中的 div 声明中添加宽度和高度即可解决问题。我仍然不确定为什么它在 css 代码中使用时没有影响。

代码：

```
<div id="dialog" class="window" style="width:800px;height:600px;"> 
```

# android - 创建弹出列表并从列表中选择

> ID：12751463
> 
> 赞同：0
> 
> 时间：2012-10-05T17:48:10.390
> 
> 标签：android, popupmenu

我想在该列表中创建一个像上面一样的弹出列表，会有不同的距离，当我单击该距离中的距离时，将从以下列表中显示该距离的描述。请帮助至少告诉如何制作弹出列表。安卓感谢

![在此处输入图像描述](../Images/a8d87c83dd8ec9a15d99e82278483d03.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T00:28:10.133

我认为您指的是[Spinner](http://developer.android.com/guide/topics/ui/controls/spinner.html)。它非常易于使用。如果您只为下拉列表使用一组特定的值，则可以使用字符串数组资源作为 Spinner 的数据源。在值目录下的 XML 中定义一个像这样的数组。将尽可能多的项目放入 Spinners 下拉列表中。

```
<string-array name="distances">
    <item>1 Mile</item>
    <item>2 Miles</item>
</string-array> 
```

在布局文件中定义一个 Spinner 小部件

```
<Spinner
    android:id="@+id/spinnerDistances"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" /> 
```

然后在任何活动中使用该布局：

```
Spinner spinner = (Spinner) findViewById(R.id.spinnerDistances);
// Create an ArrayAdapter using the string array and a default spinner layout
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
R.array.distances, android.R.layout.simple_spinner_item);
// Specify the layout to use when the list of choices appears
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
// Apply the adapter to the spinner
spinner.setAdapter(adapter); 
```

不要忘记为微调器定义一个事件侦听器，以便当用户在微调器上选择某些内容时程序可以执行某些操作。

编辑：要在从微调器中选择项目时执行某些操作，您需要覆盖 OnItemSelectedListener.onItemSelected() 并将微调器设置为通过 Spinner.setOnItemSelectedListener() 使用该侦听器。您可以通过使您的类实现 OnItemSelectedListener 并实现所需的方法或类似的东西来做到这一点：

```
mySpinner.setOnItemSelectedListener(new OnItemSelectedListener()
    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int position, long id)         
    {
    // TODO Auto-generated method stub
}

    @Override
public void onNothingSelected(AdapterView<?> parent) {
// TODO Auto-generated method stub
}
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:02:46.983

那么你可以在android中创建活动

```
<activity
            android:name=".youractivityname"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.Dialog" /> 
```

并在此活动中添加列表视图，并在列表中添加您想要的项目。主题对话框将您的活动创建为对话框并显示为一种弹出窗口如果这对您有帮助，请告诉我

# jquery - 当值不相关时更改单元格的样式

> ID：12751465
> 
> 赞同：0
> 
> 时间：2012-10-05T17:48:12.617
> 
> 标签：jquery, css

事情是这样的，账单是从点阵打印机出来的，纸是连续格式的（就像你们中的大多数人可能在销售部门看到的那样）。有时为了完成一笔销售，推销员会拿一张账单（不是打印一张空白的）手工制作。现在的系统可以通过让人们手动设置值然后继续增加值来处理这种跳跃。

但是还有一个空白，我必须在空白之前突出显示该行（只是带有 id 的单元格），只是为了让人们更清楚地看到有人拿了一张账单，手工制作并且还没有注册。

是这样的：（id列的css类是clave，意思是key）

```
|  id | qtty | price |
|-----+------+-------+
| 001 |   25 |     3 |
| 002 |   35 |     5 |
| 004 |   86 |     3 |
| 005 |   96 |     1 |
| 007 |   85 |     2 |
| 008 |   24 |     1 | 
```

因此 id 002 和 005 的行应该显示 font-weight: bold css，以使丢失的钞票更容易被发现。我遇到的另一个问题是这个 html 结构不是表格，它实际上是由层（div 标签）组成的。

我有很多代码，我不知道为什么它不工作......你可以看到它在这里运行： [in this JSbin](http://jsbin.com/isaruj/2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:19:25.927

经过很长时间看了你的解释，我认为这就是你想要做的

```
$(document).ready(function() {
    $(".clave").each(function(i, v) { // loop through each elem with class=clave
        var $next = $.trim($(".clave").eq(i + 1).text()); // get next text
        var $ele = $.trim($(v).text()); // get this text
        if ((+$next) - (+$ele) > 1) { // subtract next from now - if greateer than 1
            $(v).css('color', 'red').css('font-weight','bold'); // turn current text bold
        };
    });
});​ 
```

编辑：忘记使用 $.trim() 而不是 .trim() 来支持跨浏览器

[http://jsfiddle.net/Zxc2w/](http://jsfiddle.net/Zxc2w/)

[http://jsbin.com/isaruj/5/](http://jsbin.com/isaruj/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:22:38.013

解决问题的一种方法：

```
function ensureConsecutive(el) {
    if (!el || !el.parentNode.nextElementSibling) {
        return false;
    }
    else {
        var curId = parseInt(el.textContent,10),
            parent = el.parentNode,
            nextRow = parent.nextElementSibling,
            nextId = parseInt(nextRow
            .getElementsByClassName('id')[0].textContent,10);

        if (curId + 1 !== nextId) {
            $(el).addClass('nonConsecutive');
        }
    }
}

$('td.id').each(
    function(i,el){
        ensureConsecutive(el);
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/VbnPV/1/)。

虽然这不是跨浏览器兼容的，但由于`nextElementSibling`和`textContent`使用，这可能成为使用更多 jQuery 方法或通过替代纯 JavaScript 方法（例如`innerText`）的跨浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T17:50:56.570

使用 jQuery 选择器，然后遍历所有选择并使用 .css 方法更改 css

# websphere - 发布到 WAS7 失败并出现错误“期间发生内部错误：“在本地主机上发布到 WAS7...”

> ID：12751471
> 
> 赞同：0
> 
> 时间：2012-10-05T17:48:29.300
> 
> 标签：websphere, publishing

在“发布到本地主机上的 WebSphere Application Server v7.0...”期间发生内部错误。org.eclipse.emf.ecore.resource.ResourceSet

Workspace 中没有编译错误。我正在使用 WAS 7 服务器和 RAD 7.5。有没有人见过这个错误？如何解决这个问题？

谢谢尼拉吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:25:53.983

那些 org.eclipse... 错误几乎总是开发环境中的临时故障。关闭 RAD，重新启动它，看看是否能解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-19T18:07:21.243

我在日食中遇到了同样的问题。我重新启动，它工作。但是我们要记住的是，当我们关闭 eclipse 时，我们需要进入“任务管理器”，确保 eclipse 和 java 已经完全关闭，然后再重新启动 eclipse。

# google-apps-script - 在 Google Docs 电子表格中，我如何索引到 REGEXEXTRACT 返回的数组

> ID：12751473
> 
> 赞同：0
> 
> 时间：2012-10-05T17:48:37.177
> 
> 标签：google-apps-script, google-docs, google-sheets

我正在尝试对 REGEXEXTRACT 的结果进行索引，以提取作为路径的文本字符串的特定部分。如何访问特定匹配项。

```
  A1 A2
  ------------------------------------ ------------
  =REGEXEXTRACT($B$2,"/[A-Za-z_-]+/") /a/b/c/d.txt

```

上面的公式将第一个数组值“/a/”放入单元格 A1，我将如何访问数组中的第四个或最后一个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T17:54:16.103

如果您坚持使用`REGEXTRACT()`来打破您的道路，您可能会发现以下资源会有所帮助：

*   [用于从路径中提取文件名的正则表达式](https://stackoverflow.com/questions/9363145/regex-for-extracting-filename-from-path)
*   [如何使用正则表达式检索类路径字符串的所有部分？](https://stackoverflow.com/questions/13201481/how-to-retrieve-all-parts-of-path-like-string-using-regular-expressions)（结论是“不要 - 改用javascript”......所以我从那里的一个例子中提升代码开始！）
*   [使用 logstash grok 过滤器提取文件路径的一部分的正则表达式](https://stackoverflow.com/questions/13523493/regular-expression-to-extract-part-of-a-file-path-using-the-logstash-grok-filter)
*   ……还有更多。

但是，在 Google 电子表格中，访问路径和文件名字符串的特定部分的最有效方法是在嵌入式脚本中使用**自定义函数。**我假设您熟悉应用程序脚本编程；请参阅[构建您的第一个脚本](https://developers.google.com/apps-script/your_first_script)。

以下代码包含两个脚本，一个建立在另一个之上。例如，调用`pathExtract()`将返回给定路径字符串的指定段。

```
/**
 * Split path into parts, return in array. If path started
 * at 'root', first part will be "/". This function may be used
 * as a custom function in Google Spreadsheets.
 *
 * @var {string} path   The search path, e.g. "/a/b/c/d.txt"
 * @return {array}      Result of splitting path at "/". 
 */
function pathSplit( path ) {
  var arr = path.split('/');
  if (path[0] === "/") {
    arr[0] = "/";
  }
  return ( arr );
}

/*
 * Get a portion of a path string. To match INDEX() function,
 * the parameter index is 1-based. Requesting index 0 will
 * result in the last element from the string. This function
 * may be used as a custom function in Google Spreadsheets.
 *
 * @var {string} path   The search path, e.g. "/a/b/c/d.txt".
 * @var {number} index  1-n, the element to extract. 0 for last.
 * @return {string}     Element [index] from path, or *ERROR*.
 */
function pathExtract( path, index ) {
  var result = "*ERROR*";
  var pathArray = pathSplit( path );
  if (index >= 1 && index <= pathArray.length) {
    result = pathArray[index-1];
  }
  if (index === 0) {
    result = pathArray[pathArray.length-1];
  }

  return ( result );
} 
```

以下是您可以对添加到电子表格中的这些脚本执行哪些操作的一些示例： ![显示的公式](../Images/50cc8fd142594c18ed9b60f7f5bfb723.png)

![结果显示](../Images/5420b9ecf98b7f9d1fb11e7c91372a11.png)

# c# - 如何在可接受的误差范围内检查两位小数的相等性

> ID：12751476
> 
> 赞同：6
> 
> 时间：2012-10-05T17:48:57.117
> 
> 标签：c#, .net, math, decimal

我有两位小数：

```
var first = 1.567m;
var second = 1.568m;
var areEqual = first == second; // false 
```

我有一个可接受的误差范围；这是`0.010`。
所以我需要的是一个检查方法：

```
Check(first: 1.567m, second: 1.577m, margin: 0.010m); // true
Check(first: 1.567m, second: 1.578m, margin: 0.010m); // false
Check(first: 1.567m, second: 1.578m, margin: 0.011m); // true 
```

我该怎么写？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-05T17:50:52.873

```
if (Math.Abs(first - second) <= margin) 
```

# autosys - 不包含 CMD 的 Autosys BOX 作业

> ID：12751477
> 
> 赞同：0
> 
> 时间：2012-10-05T17:49:01.487
> 
> 标签：autosys

我是新工作的新手，我的职责之一是维护 Autosys 用完的一系列工作负载自动化流程。在浏览这些工作时，我注意到其中一些`job_type: BOX`没有内在的孩子，`job_type: CMD`也没有条件。我想不出这样一份工作的目的。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T08:08:02.520

这里有几个原因：

造成这种情况的一个可能原因是，包含作业的子项被一个一个退役，但盒子从未退役。

可能是未来工作的占位符，这些工作将在以后投入，现在正处于设计阶段。

可能是编码错误，其中将包含在框中的作业包含在主框中。

尝试运行以下命令以查看您的盒子上是否有相关作业。job_depends -c -J box_name 如果你没有得到任何依赖进程，你可以验证它是否是未来工作的占位符，如果不是，你可以继续删除它。希望这可以帮助。

# android - 无法使用通过 openFileOutput 保存的 openFileInput 打开文件

> ID：12751478
> 
> 赞同：0
> 
> 时间：2012-10-05T17:49:04.353
> 
> 标签：android, filestream

这是我将数据写入文件的方式

```
FileOutputStream fos = openFileOutput("ThisWeekDatabase", Context.MODE_PRIVATE);
String Line;
while ((Line = thisWeekReader.readLine()) != null) {
        fos.write(Line.getBytes()); 
}
fos.close(); 
```

这就是我试图读取同一个文件的方式

```
FileInputStream fIn = openFileInput ("ThisWeekDatabase") ;
InputStreamReader isr = new InputStreamReader ( fIn ) ;
BufferedReader buffreader = new BufferedReader ( isr ) ;
String Line;
while ((Line = buffreader.readLine ()) != null ) {
    if (Line.contains("xyz")){
        doSomething();
    }
}
isr.close ( ) ; 
```

但我得到`java.io.FileNotFoundException`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:55:16.020

```
Thread thread = new Thread() {

    @Override
    public void run() {
        try {
            saveDataFromWeb();// here i write data into a file
        } catch (Throwable e) {
            AlertDialog.Builder builder = new AlertDialog.Builder(
                    findViewById(R.id.viewpager).getContext());
            StringWriter sw = new StringWriter();
            PrintWriter pw = new PrintWriter(sw);
            e.printStackTrace(pw);
            sw.toString();
            builder.setMessage(sw.toString());
            AlertDialog alert = builder.create();
            alert.show();
        }
    }
};
if (CONDITION) {
    thread.start();
    parseData("ThisWeekDatabase"); // here I read the data from the 
    parseData("NextWeekDatabase");
} 
```

我发现了错误。这是因为当我尝试读取这些文件时，线程没有完成它的工作（将数据从网络写入文件）。现在我需要一种“等待”线程的方法，以便它在`parseData(xyz)`需要时完成写入文件。

我将数据写入文件的方式或从文件中读取数据的方式也是错误的，因为当我读出之前写入的文件时，我得到一个长行而不是多个短行。

我明白了

```
div.lvsdrt {background-color:#e3f1ff; border-top:black 1px dotted;padding:0.1em;}div.lvwer{background-color:#f2f9ff;border-top:black 1px dotted;padding:0.1em;}div.nobreak {page-break-inside:avoid;} 
```

代替

```
div.lvsdrt {
    background-color:#e3f1ff;
    border-top:black 1px dotted;
    padding:0.1em;
}
div.lvwer {
    background-color:#f2f9ff;
    border-top:black 1px dotted;
    padding:0.1em;
}
div.nobreak {
    page-break-inside:avoid;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-04T01:37:40.477

```
if (CONDITION) {
    final CountDownLatch latch = new CountDownLatch(1);
    Thread thread = new Thread() {

        @Override
        public void run() {
            try {
                saveDataFromWeb();// here i write data into a file
            } catch (Throwable e) { // CATCH THROWABLE ??!! WHY ?
                AlertDialog.Builder builder = new AlertDialog.Builder(
                        findViewById(R.id.viewpager).getContext());
                StringWriter sw = new StringWriter();
                PrintWriter pw = new PrintWriter(sw);
                e.printStackTrace(pw);
                sw.toString();
                builder.setMessage(sw.toString());
                AlertDialog alert = builder.create();
                alert.show();
            } finally {
                latch.notify();
            }
        }
    };
    thread.start();
    latch.await();
    parseData("ThisWeekDatabase"); // here I read the data from the
    parseData("NextWeekDatabase");
} 
```

至于新线：

```
while ((line = thisWeekReader.readLine()) != null) {
    fos.write((line + "\n").getBytes());
} 
```

`\n`只是一个 hack - 如果你在 Windows 上使用`\r\n`或者更好，请阅读[这个](https://stackoverflow.com/questions/207947/java-how-do-i-get-a-platform-independent-new-line-character)

**编辑**：如果您不能使闩锁工作，请使用：

```
thread.start();
try {
    thread.join();
} catch (InterruptedException e) {
    // TODO handle
}
parseData("ThisWeekDatabase"); // here I read the data from the
parseData("NextWeekDatabase"); 
```

# apache - 重定向 IE 7 或更低版本的用户

> ID：12751480
> 
> 赞同：1
> 
> 时间：2012-10-05T17:49:08.420
> 
> 标签：apache, internet-explorer, redirect

我有这个 100% 基于 javascript/html/css 的应用程序。我们将功能支持 IE8 并使用 ie6nomore 方法在顶部显示升级消息。

我遇到的问题是阻止使用 IE 和版本 7 或更低版本的所有人访问该页面。我正在运行 apache，所以我也许可以只进行 mod 重写，以便版本 7 或更低版本的所有 IE 用户都被重定向到强制升级通知页面。

我将如何完成这个 Apache mod-rewrite？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T17:55:24.443

虽然我知道这是 Perl，但您应该能够在您喜欢的语言中使用这个正则表达式：

```
if ($ENV{'HTTP_USER_AGENT'} =~ /MSIE [67]/)
{
  blah
} 
```

当然，这不是万无一失的，但是当您计划信任客户时，什么都不会。

# mysql - SQL 返回按条件分隔的行的 COUNT()

> ID：12751483
> 
> 赞同：0
> 
> 时间：2012-10-05T17:49:32.840
> 
> 标签：mysql, count, group-by

我需要`COUNT()`（或者可能是另一个 MySQL 函数）我的查询行，但我需要不同的计数，如下所示：

我得到了什么：

```
 id  | date       | costumer_id
  -----+------- ----+-------------
   1   | 2012-10-05 | 103
   2   | 2012-10-05 | 103
   3   | 2012-10-05 | 103
   4   | 2012-10-05 | 59
   5   | 2012-10-05 | 59
   6   | 2012-10-05 | 90 
```

我需要的：

```
 id  | date       | costumer_id | count
  -----+------------+-------------+------
   1   | 2012-10-05 | 103         | 3
   5   | 2012-10-05 | 59          | 2
   6   | 2012-10-05 | 90          | 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:52:30.917

您需要一个简单的按查询分组。我怀疑您将 id 留在 group by 中。尝试这样的事情：

```
select max(id), date, customer_id, count(*)
from t
group by date, customer_id
order by 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:52:41.003

```
SELECT id, `date`, customer_id, COUNT(1) AS `count`
FROM `table`
GROUP BY `customer_id` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T17:58:59.647

你必须使用[GROUP BY](http://dev.mysql.com/doc/refman/5.0/en/group-by-modifiers.html)

以下查询将为您提供所需的结果：

选择 id、日期、costumer_id 、count(costumer_id) as c from table1 group by costumer_id order by c desc

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T18:03:19.290

```
select 
    min(id) as id, 
    date, 
    customer_id, 
    count(*) as count
from tatble
group by 
    date, 
    customer_id
order by 1; 
```

# iphone - 具有 clearColor 背景的 UITableView 部分？

> ID：12751489
> 
> 赞同：8
> 
> 时间：2012-10-05T17:49:57.893
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我有一个带有径向渐变背景的 ViewController。在里面我有一个带有单元格和部分的 UITableView。现在我想在滚动时显示表格视图后面的渐变。问题是当该部分锁定在顶部时，您可以看到该部分后面的单元格。我会设置部分背景颜色，但如果我这样做，它与径向渐变背景不匹配。无论如何，在保持clearColor背景的同时将单元格夹在部分下方吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-03-24T16:32:52.647

无需创建自己的标题视图即可获得透明节标题的简单方法。

```
- (void)tableView:(UITableView *)tableView willDisplayHeaderView:(UIView *)view forSection:(NSInteger)section
{
    if ([view isKindOfClass:[UITableViewHeaderFooterView class]]) {
        UITableViewHeaderFooterView *headerView = (UITableViewHeaderFooterView *)view;
        headerView.contentView.backgroundColor = [UIColor clearColor];
        headerView.backgroundView.backgroundColor = [UIColor clearColor];
    }
} 
```

这段代码在 iOS 7 中运行良好。

**编辑** 我知道这有点晚了，但是您必须添加 2 行以确保 uitableview 的背景颜色（和背景视图的背景颜色？）也清晰。

```
tableView.backgroundColor = [UIColor clearColor];
tableView.backgroundView.backgroundColor = [UIColor clearColor]; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-05T18:01:16.887

如果我理解的话，您需要一个完全清晰的 tableview 和 tableview 单元格，这样您就可以看到视图控制器的背景。

您可以通过将 tableview 设置为没有背景来实现这一点

```
tableview.backgroundColor = [UIColor clearColor];
tableView.opaque = NO;
tableView.backgroundView = nil; 
```

还有细胞

```
cell.backgroundColor = [UIColor clearColor] 
```

如果您还希望该部分是透明的，则可以使用此方法：

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section { 
```

制作自定义视图（例如，创建一个带有透明 .png 作为背景的图像视图）

我希望我能正确理解你的问题。

* * *

**澄清后编辑**

给出单元格在进入节标题下方之前停止的外观：

使用此 ivar 创建一个作为 uitableview 子类的类：

```
@interface CustomTableView : UITableView
{
        CAGradientLayer* maskLayer;
} 
```

显然这将创建一个渐变，但如果您愿意，您可以调整它或使用`CALayer`而不是以编程方式创建蒙版，而是创建一个具有正确宽度/高度的节标题的 .png。

无论如何：如果您使用`CAGradientLayer`：

```
- (id)initWithCoder:(NSCoder *)coder
{
    self = [super initWithCoder:coder];
    if (self) 
    {
        [self setupGradients]; //call your method
    }
    return self;
}

- (void)setupGradients
{
    [self addObserver:self forKeyPath:@"contentOffset" options:0 context:nil];

    */ ***** if you choose to use CALayer instead of CAGradient ****** */
    //maskLayer = [[CALayer layer] retain]; 
    //maskLayer.contents = (id) [UIImage imageNamed:@"maskLayer.png"].CGImage; 
    //maskLayer.backgroundColor = [UIColor clearColor].CGColor; 
    */ ***** if you choose to use CALayer instead of CAGradient ****** */

    maskLayer = [[CAGradientLayer layer] retain];

    CGColorRef outerColor = [UIColor colorWithWhite:1.0 alpha:0.0].CGColor;
    CGColorRef innerColor = [UIColor colorWithWhite:1.0 alpha:1.0].CGColor;

    maskLayer.colors = [NSArray arrayWithObjects:(id)outerColor, 
                        (id)innerColor, (id)innerColor, (id)outerColor, nil];
    maskLayer.locations = [NSArray arrayWithObjects:[NSNumber numberWithFloat:0.0], 
                           [NSNumber numberWithFloat:0.0], 
                           [NSNumber numberWithFloat:0.9], 
                           [NSNumber numberWithFloat:1.0], nil]; //this creates a gradient     effect. Tweak these numbers for a hard line. 

    maskLayer.bounds = CGRectMake(0, 0, self.frame.size.width, self.frame.size.height);
    maskLayer.anchorPoint = CGPointZero;

    self.layer.mask = maskLayer;
    }

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{        
    [CATransaction begin];
    [CATransaction setDisableActions:YES];
    maskLayer.position = CGPointMake(0, self.contentOffset.y);
    [CATransaction commit];
} 
```

然后在您的视图控制器中：

```
 CustomTableView *_tableView; //ivar

   _tableView = [[CustomTableView alloc] initWithFrame:YOUR_FRAME]; 
```

基本思想是一个蒙版，您在表格视图的顶部创建一个与节标题大小相同的蒙版形状。看起来它后面的单元格“消失”了。这有点棘手，但它会起作用。

# java - 当我刷新包含数据表的页面时，我丢失了添加的新数据 Primefaces JSF

> ID：12751490
> 
> 赞同：1
> 
> 时间：2012-10-05T17:50:01.210
> 
> 标签：java, hibernate, jsf, primefaces, tomcat7

当我刷新包含数据表的页面时，我丢失了添加到数据表中的新数据，我刷新它几乎 5 次，或者我重新启动 tomcat 应用程序服务器以获取我发布的数据。我正在使用 Primefaces3.4 Hibernate 3 Jsf 2 Tomcat 7。这是 ManagedBean 的摘录：

```
import java.util.ArrayList;
import java.util.Date;
import java.util.List;
import java.util.TimeZone;

import javax.enterprise.inject.New;
import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedProperty;
import javax.faces.context.FacesContext;
import javax.faces.event.ValueChangeEvent;
import javax.faces.model.SelectItem;

import org.primefaces.event.FlowEvent;
import org.primefaces.event.RowEditEvent;

import com.oxynord.dao.RetourDao;
import com.oxynord.dao.BonbonneDao;
import com.oxynord.dao.BonbonneDataModel;
import com.oxynord.dao.ChargementDao;
import com.oxynord.dao.ChauffeurDao;
import com.oxynord.dao.EnvoiDao;
import com.oxynord.dao.UtilisateurDao;
import com.oxynord.dao.VenteDao;
import com.oxynord.data.*;
public class BonBonneManagedBean {
//test test
//private BonbonneDao BDAO=new BonbonneDao();
private Bonbonne bonbonne=new Bonbonne();
private Bonbonne selectedBonbonne;
private Chauffeur chauffeur=new Chauffeur();
private Chargement chargement=new Chargement();
private Chargement selectedChargement;
private Envoi envoi=new Envoi();
private Envoi selectedEnvoi;
private Client client=new Client();
private Vente vente=new Vente();
private Retour retour=new Retour();
private Client selectedClient;
private List<Client> listClients;
private List<Historiquebonbonne> listhistorique;

// Test Vente
List<Bonbonne> bs=new ArrayList<Bonbonne>();
List<Bonbonne> bs2=new ArrayList<Bonbonne>();

// get user connecté from session
private AuthenticationController authen = (AuthenticationController)FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("authenticationController");

private Date date=new Date();

// -- Table à cocher des bonbonnes --
private BonbonneDataModel bonbonneDataModel;
private Bonbonne[] selectedBonbonnes;

boolean next=false;

public boolean isNext() {
    return next;
}

public void setNext(boolean next) {
    this.next = next;
}

// -------------------------------- edit -----------------------------------------------

// modifier une bonbonne
public void onEdit(RowEditEvent event) throws Exception {  
        BonbonneDao.ModifierBonbonne(((Bonbonne) event.getObject()));   
} 
// modifier un chauffeur
public void onEditChauffeur(RowEditEvent event) throws Exception {  
    BonbonneDao.ModifierChauffeur(((Chauffeur) event.getObject())); 
 } 
```

这是 BonbonneDAO ：

```
 import java.util.ArrayList;
     import java.util.Date;
     import java.util.List;

     import javax.faces.application.FacesMessage;
     import javax.faces.context.FacesContext;

     import org.hibernate.Session;

     import com.oxynord.data.Bonbonne;
     import com.oxynord.data.Chauffeur;
     import com.oxynord.data.Client;
     import com.oxynord.data.Domaine;
     import com.oxynord.data.Etatactuelle;
     import com.oxynord.data.Historiquebonbonne;
     import com.oxynord.data.Produit;
     import com.oxynord.data.Stock;
     import com.oxynord.data.Utilisateur;
     import com.oxynord.data.Ville;
     import com.oxynord.data.Volume;
     import com.oxynord.utile.HibernateUtil;

     public class BonbonneDao {
Date date=new Date();

//----------List Historiquebonbonne--------------------------

    @SuppressWarnings("unchecked")
    public static List<Historiquebonbonne> HistoriqueBonbonne(Bonbonne bonbonne) {
        Session session = HibernateUtil.getSessionFactory().getCurrentSession();
        session.beginTransaction();
        List<Historiquebonbonne> listHistoriquebonbonne= new ArrayList<Historiquebonbonne>();
        listHistoriquebonbonne= session.createQuery("from Historiquebonbonne as h where h.bonbonne.idBonbonne='"+bonbonne.getIdBonbonne()+"' order by h.idHistorique desc ").list();
        return listHistoriquebonbonne;
    }

//----------List des bonbonnes qui ont dépasser la date de 3 mois--------------------------

@SuppressWarnings("unchecked")
public static List<Bonbonne> BonbonnesVendu() {
    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();
    List<Bonbonne> listBonbonnesVente= new ArrayList<Bonbonne>();
    listBonbonnesVente = session.createQuery("from Etatactuelle where libelle= 'Vendu' ").list();
    return listBonbonnesVente;
}

//--------------------------------------------------------------------------

@SuppressWarnings("unchecked")
public static List<Bonbonne> ListBonbonnesVide() {
    try {
    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();
    List<Bonbonne> listBonbonnes= new ArrayList<Bonbonne>();
    listBonbonnes = session.createQuery("from Bonbonne where etatactuelle.idEtat=1 and stock.idStock=1").list();
    return listBonbonnes;
    } catch (Exception e) {
        System.out.println(e);
    }
    return null;
}

@SuppressWarnings("unchecked")
public static  List<Bonbonne> AllBonbonnes() {
    try {
    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();
    List<Bonbonne> listBonbonnes= new ArrayList<Bonbonne>();
    listBonbonnes = session.createQuery("from Bonbonne").list();
    return listBonbonnes;
    } catch (Exception e) {
        System.out.println(e);
    }
    return null;
}

@SuppressWarnings("unchecked")
public static List<Produit> AllProduits() {
    try {
    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();
    List<Produit> listProduit= new ArrayList<Produit>();
    listProduit = session.createQuery("from Produit").list();
    return listProduit;
    } catch (Exception e) {
        System.out.println(e);
    }
    return null;
}

@SuppressWarnings("unchecked")
public static List<Ville> AllVille() {
    try {
    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();
    List<Ville> listVille= new ArrayList<Ville>();
    listVille = session.createQuery("from Ville").list();
    return listVille;
    } catch (Exception e) {
        System.out.println(e);
    }
    return null;
}

@SuppressWarnings("unchecked")
public static List<Domaine> AllDomaine() {
    try {
    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();
    List<Domaine> listDomaine= new ArrayList<Domaine>();
    listDomaine = session.createQuery("from Domaine").list();
    return listDomaine;
    } catch (Exception e) {
        System.out.println(e);
    }
    return null;
}

@SuppressWarnings("unchecked")
public static List<Volume> AllVolumes() {
    try {
    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();
    List<Volume> listVolume= new ArrayList<Volume>();
    listVolume = session.createQuery("from Volume").list();
    return listVolume;
    } catch (Exception e) {
        System.out.println(e);
    }
    return null;
}

@SuppressWarnings("unchecked")
public static List<Etatactuelle> AllEtatsActuelleBonbonne() {
    try {
    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();
    List<Etatactuelle> listEtatactuelle= new ArrayList<Etatactuelle>();
    listEtatactuelle = session.createQuery("from Etatactuelle").list();
    return listEtatactuelle;
    } catch (Exception e) {
        System.out.println(e);
    }
    return null;
}

@SuppressWarnings("unchecked")
public static List<Stock> AllStocks() {
    try {
    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();
    List<Stock> listStock= new ArrayList<Stock>();
    listStock = session.createQuery("from Stock").list();
    return listStock;
    } catch (Exception e) {
        System.out.println(e);
    }
    return null;
}

// ---------------------------- Ajouter Bonbonne -----------------------------------------------

@SuppressWarnings("unchecked")
public static boolean addBonbonne(Bonbonne bonbonne) throws Exception {
    try {
    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    org.hibernate.Transaction tx = session.beginTransaction();
    List<Bonbonne> b=session.createQuery("from Bonbonne where codebare='"+bonbonne.getCodebare()+"' or numeroSerie='"+bonbonne.getNumeroSerie()+"'").list();

    /* Test si le bonbonne est deja enregistrer
     si oui --> afficher que le bobonne est deja enregistrer
     si non --> enregistrer le bonbonne */

    if(b.size()==0) {
    //Utilisateur u=(Utilisateur) session.createQuery("from Utilisateur").list().get(0);    
    //bonbonne.setUtilisateur(u);
    session.save(bonbonne); 
    tx.commit();
    FacesContext.getCurrentInstance().addMessage(null, new FacesMessage("une bonbonne a été enregister avec succes"));
    return true;
    } else {
    FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_WARN,"Il existe déjà un Code barre:"+b.get(0).getCodebare()+" avec un numero de série:"+b.get(0).getNumeroSerie()+"", "Code barre ou numero de série déjà enregistrer"));  
    return false;
    }

    } catch (Exception e) {
    FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR,"Erreur d'enregistrement", "Erreur d'enregistrement"));  
    System.out.println(e);
    return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T06:14:12.890

将托管 bean 的范围更改为：@javax.faces.bean.ViewScoped

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T08:35:45.597

您应该使用`@ViewScoped`它来确保只要您停留在同一个视图（又名 yourpage.xhtml）中，数据就会持续存在。

如果您在同一页面中执行操作，请确保您的方法是 type`void`或返回 null 否则。这将使您保持相同的观点。

`flush`在你的 DAO 层持久化之后执行一次。

这是基于您所描述的行为的猜测。如果它有效，您应该调整您的 Hibernate 层刷新/提交选项，因为似乎项目正在持久化但未提交/刷新，然后不更新持久性上下文，因此之后不会显示在页面中。

我希望它有所帮助。

# jquery - 即使通过 jQuery 提交表单也返回 false

> ID：12751491
> 
> 赞同：1
> 
> 时间：2012-10-05T17:50:01.610
> 
> 标签：jquery, forms, submit, return

我遇到的问题是，即使在和或所有字段为空的情况下代码返回 false，表单仍会提交。

我的 HTML：

```
<form action="" method="post" name="contactForm" id="contactForm">
    <input type="text" name="contactName" id="contactName" class="contactTextfield" />
    <input type="text" name="contactPhone" id="contactPhone" class="contactTextfield" />
    <input type="text" name="contactEmail" id="contactEmail" class="contactTextfield" />
    <textarea name="contactMessage" id="contactMessage" class="contactTextarea" rows="5"></textarea>
    <input type="submit" name="contactSubmit" id="contactSubmit" value="Send"/>
</form> 
```

我的 jQuery：

```
$("#contactForm").submit( function() {
    var contactName = $("#contactName").val();
    var contactEmail = $("#contactEmail").val();
    var contactMessage = $("#contactMessage").val();
    var emailFormat = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;

    if ( contactEmail != '' && emailFormat.test(contactEmail) ) {
        var contactEmailCheck = true;   
    }

    if ( contactName != '' ) {
        var contactNameCheck = true;
    }

    if ( contactMessage != '' ) {
        var contactMessageCheck = true;
    }

    if ( contactEmailCheck == true && contactNameCheck == true && contactMessageCheck == true ) {
        return true;
    } else {
        return false;
    }
}); 
```

固定的：

原来它不起作用，因为 jquery 代码位于索引页面的标题中，而表单本身仅通过 ajax 从单独的 html 文件加载到页面上。我必须将 jquery 代码放在与表单相同的文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:51:22.403

这是一个范围界定问题。在 if 语句之外为您分配变量。

尝试这个

```
$("#contactForm").submit(function() {
    var contactName = $("#contactName").val();
    var contactEmail = $("#contactEmail").val();
    var contactMessage = $("#contactMessage").val();
    var emailFormat = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;

    var contactEmailCheck = false;
    var contactNameCheck = false;
    var contactMessageCheck = false;
    if (contactEmail != '' && emailFormat.test(contactEmail)) {
        contactEmailCheck = true;
    }

    if (contactName != '') {
        contactNameCheck = true;
    }

    if (contactMessage != '') {
        contactMessageCheck = true;
    }

    if (contactEmailCheck && contactNameCheck && contactMessageCheck) {
        return true;
    } else {
        return false;
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:42:54.450

我建议这样做：首先将发送按钮的输入类型从“提交”更改为“按钮”。

```
<input type="button" name="contactSubmit" id="contactSubmit" value="Send"/> 
```

将单击事件绑定到 jquery 文档就绪功能中的此按钮或您认为正确的任何其他位置。点击发送按钮调用一个函数，您可以在其中进行所有验证，如果一切正常，则从那里提交您的表单，否则会显示错误或警报。

```
#('#contactForm').click(function(){
    validateForm();
}); 
```

同样在您的函数中编写的 ro 验证表单存在一些范围问题。

```
function validateForm() {
    var contactName = $("#contactName").val();
    var contactEmail = $("#contactEmail").val();
    var contactMessage = $("#contactMessage").val();
    var emailFormat = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
    var contactEmailCheck = false;
    var contactNameCheck = false;
    var contactMessageCheck = false;

    if ( contactEmail != '' && emailFormat.test(contactEmail) ) {
        contactEmailCheck = true;
    }

    if ( contactName != '' ) {
        contactNameCheck = true;
    }

    if ( contactMessage != '' ) {
        contactMessageCheck = true;
    }

    if ( contactEmailCheck == true && contactNameCheck == true && contactMessageCheck ==     true ) {
        //submit form from here since everything is fine
        $('#contactForm').submit(); //contactForm is your form id
    } else {
        //show errors here & don't submit form
    }
} 
```

试试看。肯定会工作。

# ruby-on-rails - Rails 脚手架 scss 每次生成脚手架时都会重置

> ID：12751493
> 
> 赞同：6
> 
> 时间：2012-10-05T17:50:08.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, sass, scaffolding

每次我做 a`rails generate scaffold Name`时，`app/assets/stylesheets/scaffolds.css.scss`文件都会被覆盖（好吧，我会被提示覆盖它）。我不想要这个，所以我当然可以`n`在提示覆盖时输入，但我想知道处理脚手架样式的正确方法。

我可以将 css 写入稍后加载的 css 文件中，以覆盖脚手架.css.scss 文件中必要的 css。但这不仅丑陋（生成并加载了每个请求的不必要/未使用的 css），而且我不知道如何在将鼠标悬停在链接上时不更改前景色和背景色（来自scaffolds.css.scss）：

```
a {
  &:hover {
    color: #fff;
    background-color: #000;
  }
} 
```

什么是从上面删除类似内容的正确方法`scaffolds.css.scss`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-20T20:26:00.760

想要永远禁用禁用样式表，或者通常忘记`--no-stylesheets`开关（我愿意！）

**在生成器中禁用样式表！！**

配置/应用程序.rb

```
config.generators do |g|
 g.stylesheets false
end 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-05T18:25:40.620

看看这个[StackOverflow 答案](https://stackoverflow.com/questions/5966776/rails-scaffold-without-the-css-file)

`rails g scaffold MyModel --no-stylesheets`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-12T18:43:17.680

请记住，您始终可以在自己的样式表中重新定义这些内容，并通过修改 assets/stylesheets/application.css 将它们包含在脚手架样式表之后

```
 *= require_self
 *= require scaffolds
 *= require YOUR_FILE 
```

（如果您不摆弄 application.css，默认情况下样式表按字母顺序包含，这可能是您想要的，也可能不是。）

# r - 如何将包含网络数据的csv文件转换为GML

> ID：12751497
> 
> 赞同：3
> 
> 时间：2012-10-05T17:50:40.887
> 
> 标签：r, network-programming, graph-modelling-language

我有一个数据集，其中包含电子邮件对话的网络数据，该数据集由代表代理之间连接的两列组成。

可以从[这里访问数据集](https://dl.dropbox.com/u/22681355/email.csv)

由于我在 RI 中使用 igraph，因此想将此文件转换为 GML 格式。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T18:27:09.160

希望有帮助。

```
library(igraph)
my.data <- read.delim(url("http://dl.dropbox.com/u/22681355/email.csv"), sep = '')
my.graph <- graph.data.frame(d = my.data, directed = FALSE)
write.graph(graph = my.graph, file = 'email.gml', format = 'gml') 
```

# ios - NSDateFormatter dateFromString 行为在 iOS6 中改变

> ID：12751499
> 
> 赞同：1
> 
> 时间：2012-10-05T17:50:50.820
> 
> 标签：ios, ios6, nsdateformatter

```
 NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    NSTimeZone *gmt = [NSTimeZone timeZoneWithAbbreviation:@"UTC"];
    [dateFormat setTimeZone:gmt];
    [dateFormat setDateFormat:@"h:mm a"];
    return [dateFormat dateFromString:text]; 
```

其中文本是上午 9:16，用于在 iOS6 中返回从 1970 年开始的日期，它返回这样的日期

2000-01-01 09:16:00 +0000

这是一个错误吗？无论如何要切换到旧的vehaviour

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:06:05.453

解决方案是简单地在时间文本中添加“1970”，然后在格式中添加“yyyy”，但这似乎很笨拙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:15:40.440

他们肯定在 iOS 6 中通过日期解析改变*了一些东西。*我已经向 Apple 提交了一个关于它的错误。发行说明中有关于任何 NSDateFormatter 更改的注释。另请参阅我今天添加的有关此解析[的类似错误。](https://stackoverflow.com/questions/14774433/ios-6-1-nsdateformatter-has-changed-since-ios-5-broken-parsing)

# r - 在 R 中优化我自己的距离函数

> ID：12751501
> 
> 赞同：2
> 
> 时间：2012-10-05T17:50:55.613
> 
> 标签：r, function, distance

我正在尝试为我的数据创建一个新的距离函数。但是，与 stats 包中的 dist 函数相比，我的代码的性能非常慢。例如，查看欧几里得距离的结果：

```
mydist = function (x){

  euclidean = function (a, b){
    sqrt(sum((a-b)^2))
  }

  distances = matrix(0, nrow=nrow(x), ncol=nrow(x))
  for (i in 1:nrow(x))
    for (j in 1:(i-1)){  # <- corrected this
      if (j > 0){
         distances[i,j]=euclidean(x[i,], x[j,])
         distances[j,i]=distances[i,j]
      }
    }

  distances
}

m=matrix(1:800, ncol=2)
system.time(as.dist(mydist(m)))
  usuário   sistema decorrido 
    0.714     0.000     0.716      # <- updated values with corrected version

system.time(dist(m))
  usuário   sistema decorrido 
    0.004     0.000     0.002 
```

我不会使用欧几里得距离。例如，我正在开发一个新的，它使用一些特定于我的数据的统计数据，它与代理包的统计数据不同。我在数据集中有数百个变量和数千个示例（行）。不能等待几个小时只是为了计算距离。

**我尝试了另一个使用外部应用的代码。它比两个循环快，但仍然很慢。**任何人都可以提出任何建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:32:11.403

关键是从*整个矩阵*中减去每一行，而不是每一行。由于减法是按列进行的，因此只需转置矩阵。

```
m=matrix(1:800, ncol=2)
system.time(a<-as.dist(mydist(m)))
# user  system elapsed
# 1.32    0.00    1.32 

t.m<-t(m)
system.time(x<-as.dist(apply(m,1,function(x) sqrt(colSums((x - t.m)^2)))))
# user  system elapsed
# 0.04    0.00    0.03 

any(x!=a) # FALSE 
```

但如果你真的想要速度，你应该使用 C 库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:05:12.000

加快速度的关键是

*   您的距离函数可以很容易地矢量化。如果是这种情况，请查看`? outer`, 和/或`? rep`.
    这种方法可能非常快，但也很消耗内存。

*   `apply`将基本上将两个循环减少为一个，但实际矢量化通常要快得多。

*   或者您可能想使用例如内联 C 代码，请参阅 package inline。

*   您不小心计算出所需距离的两倍（您进行了对称复制，但两者都`i`循环`j`了整个`1 : nrow (x)`）。

# wpf - 设置 MenuItem.Icon 中所有图像的宽度和高度

> ID：12751504
> 
> 赞同：1
> 
> 时间：2012-10-05T17:50:58.377
> 
> 标签：wpf, xaml

像大多数人一样，我正在为我`MenuItem`的 s 使用图标。我希望所有这些图像都显示为 16x16 像素的图标。大多数源图像都具有这种格式，有些可能是 32x32，但它们都略微缩放（到 18x18 左右）。

我已经尝试过了，但它不会影响图标（如果这是可怕的编码，请通知我。我是 xaml 的新手。）：

```
<Style TargetType="MenuItem">
    <Setter Property="Padding" Value="6,3" />
    <Setter Property="Height" Value="22" />
    <Setter Property="ItemContainerStyle">
        <Setter.Value>
            <Style TargetType="Image">
                <Setter Property="Height" Value="16" />
                <Setter Property="Width" Value="16" />
            </Style>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:23:55.800

我想`TargetType="Image"`为菜单的`ItemContainerStyle`属性设置样式没有多大意义。根本不需要设置`ItemContainerStyle`. 只需使用固定每个 MenuItem 高度的样式即可。然后图标图像将自动缩放。

```
<Style TargetType="MenuItem">
    <Setter Property="Height" Value="22" />
</Style> 
```

然后将该`Icon`属性设置为某个图像，可能为图像的 Margin 设置一个较小的值。

```
<MenuItem Header=... >
    <MenuItem.Icon>
        <Image Margin="2" Source=... />
    </MenuItem.Icon>
</MenuItem> 
```

如果您确实需要将图像大小固定为某个值，只需设置 Image 的`Width`and`Height`属性即可。

```
<MenuItem Header=... >
    <MenuItem.Icon>
        <Image Width="16" Height="16" Source=... />
    </MenuItem.Icon>
</MenuItem> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T07:54:43.270

After browsing for quite a while, I came across the keyword "nested style", which yielded [https://stackoverflow.com/a/4078275/653473](https://stackoverflow.com/a/4078275/653473) after some google searches.

```
<Style TargetType="MenuItem">
    <Setter Property="Padding" Value="6,3" />
    <Setter Property="Height" Value="22" />
    <Style.Resources>
        <Style TargetType="Image">
            <Setter Property="Height" Value="16" />
            <Setter Property="Width" Value="16" />
        </Style>
    </Style.Resources>
</Style> 
```

# facebook - opengraph 操作 read_article 未在时间轴上发布

> ID：12751511
> 
> 赞同：1
> 
> 时间：2012-10-05T17:51:27.547
> 
> 标签：facebook, facebook-opengraph, article

我设置了“阅读文章”操作，并在提交给 FB 以供批准之前使用 Auth_User 测试应用程序。问题：时间轴上没有显示任何内容，我必须在活动页面中手动选择“在时间轴上显示”，然后才能在时间轴上显示动作。有人经历过这种行为或有解决办法吗？

我添加了 publish_actions、publish_stream，我检查了调试，那里没有错误。我还禁用了在 Wordpress 中加载 FB 元标记。

我错过了什么吗？

# php - 计算颜色深浅

> ID：12751512
> 
> 赞同：4
> 
> 时间：2012-10-05T17:51:29.483
> 
> 标签：php, algorithm, colors

我有下一个问题。
我有一个带有几种不同色调的基色。

**例子：**

*   底色：#4085c5
*   灯罩：#005cb1

现在，我有不同的颜色（比如说#d60620），但没有阴影。从颜色我想计算阴影，与第一段中提到的颜色有相似的差异。

首先，我尝试计算**RGB**元素的差异并将它们应用于第二种颜色，但结果并不像我预期的那样。
我尝试**将颜色转换为 HSV**，读取**饱和度值**并将差异应用于第二种颜色，但结果颜色仍然很奇怪。

公式类似于：***(HSV(BaseColor)[S] - HSV(Shade)[S]) + HSV(SecondColor)[H]***

有谁知道如何解决这个问题？我知道我做错了什么，但我不知道是什么。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-07T03:34:50.037

有两种方法可以加深颜色：

*   从 R、G、B 中减去等量。这增加了饱和度。显然，您只能减去等于 R、G、B 值中最小值的挂载。
*   将 R、G、B 乘以小于 1.0 的值。这使饱和度或多或少完好无损。

同样，有两种方法可以使颜色变亮：

*   将等量添加到 R、G、B 中。这会降低饱和度。
*   将 R,G,B 乘以大于 1.0 的值。这增加了颜色的鲜艳度，从而增加了明显的饱和度。

您的示例似乎已经完成了两者 - 从每个值中减去 0x40 并乘以 1.33。

使用您的第二种颜色，我们可以从每种颜色中减去 06，得到 #d0000a 但这还不够暗。将其乘以 0.735 得到 #990013。

![在此处输入图像描述](../Images/ca6a96370be0bce5bf5e1f5ef7d490e0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T17:55:42.117

您的前两种颜色的“H”（色调）值均为 209，并且“S”和“V”的值各不相同。

这种常见的色调将第二种颜色定义为第一种颜色的“阴影”。

要找到第三种颜色的替代色调，请使用 RGB 到 HSV 的转换来查找其色调，根据需要修改其 S 和 V 值，然后再转换回 RGB。

# c# - Windows 窗体显示大量数据但也可选择

> ID：12751515
> 
> 赞同：1
> 
> 时间：2012-10-05T17:51:37.020
> 
> 标签：c#, logging, grep

我之前有一个关于如何从大约 600mbs 的日志文本文件信息中读取大块数据的问题。以及在文件中搜索以找到有用的信息

我想知道显示数据的最佳方式/有效方式是什么。以前对于大约 1mb 的日志文件数据，我使用列表框来显示文件中包含 1 个条目的字符串。这将为仅 1mb 的数据填充大约 7000 个列表框条目。显然我不能为 ~600mb 的日志文件执行此操作。

我希望用户能够“扩展”一个日志条目并“向下钻取”并查看有关特定信息/调试/错误的更多详细信息。我认为因为列表框本质上是基于索引的数组，所以我需要使用不同的容器来显示信息，但仍然保持选择条目和展开详细信息的能力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:07:37.260

好吧，一棵树是有意义的，您可以变得聪明并在后台线程中进行延迟加载构建节点/索引，例如选择节点作为后备。

同样的事情，但有多个列表框用于基于过滤器的选择也是可能的

节点可以是 MonthYear、Date、Hour、Entry 等 Source 或类型（如果它在其中）。

您想要的最后一件事是列表框，其中包含大量可供选择的条目，没有人愿意使用它，任何不得不使用它的人都会厌恶它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:24:18.093

我会这样处理设计：

1.  顶部的一组过滤器通过分析日志文件的内容生成，并带有“立即搜索”按钮或类似的东西。
2.  在过滤器中，我会要求页面大小（如每页显示 10、50、100 个结果）
3.  底部的搜索结果窗口将包含与所选过滤条件匹配的每个日志节点的摘要数据列表，然后在必要时将结果分解为页面。
4.  选择特定日志节点时可见的详细信息窗格
5.  记录匹配记录数的页脚状态栏

这将允许您的用户快速搜索他们正在寻找的内容，但不会被找到的结果的数量所淹没，并且考虑到他们可能想要在显示任何结果之前对其进行过滤的数据集的大小节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T18:07:53.380

对于 600mb 数据，大约 7000*600 (4.2M) 行，您将无法在一个窗口中显示所有数据。最好使用一种方式来浏览不同的页面（比如每个页面只有 100 行）。如果我是你，我会预处理日志文件，然后将日志插入数据库。然后使用分页从数据库加载行。如果你这样做，你仍然可以使用列表视图或网格视图。

# c - 如何在 shell 脚本中使用多核（i7 机器）运行 ac 程序

> ID：12751516
> 
> 赞同：1
> 
> 时间：2012-10-05T17:51:38.267
> 
> 标签：c, shell, parallel-processing

我有一个 C 程序 fextract，它以 wavfile 作为输入并以某种 fcc 格式提供输出。语法类似于“fextract file.wav file.fcc”。现在我有 75000 个 wav 文件需要转换成 fcc 格式。为了加快这个过程，我打算使用我 i7 机器的所有内核。首先，我将所有输入和输出路径保存在一个文件中，我将其称为 scp 文件，例如：/mnt/disk1/file1.wav /mnt/disk2/file1.fcc /mnt/disk1/file2.wav /mnt/disk2 /file2.fcc 等等

现在使用以下 shell 脚本，我将 scp 文件分成 8 个文件并存储在临时目录中

```
mkdir $tmpDir
cd $tmpDir

nCores=`cat /proc/cpuinfo | grep processor | wc -l`
nLines=`cat $scpFile|wc -l`

split -l $((nLines/nCores + 1)) $scpFile 
```

现在我的临时文件有八个子文件。我如何评估它们以使用多个内核运行程序 fextract

```
for i in `ls`
do 

fextract &i

done 
```

需要这样的东西。请帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:59:09.557

使用 GNU 并行：

```
parallel -j $nCores fextract -- `ls` 
```

或者您可以`xargs`与 -P 键一起使用（与 一起使用`find`）。

这些命令将在多个线程中启动您的代码，这将允许它们在多个内核上执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T00:11:49.517

使用 GNU 并行：

```
cat filenames | parallel fextract {} {.}.fcc 
```

由于磁盘 I/O 花费了一些时间，因此每个 cpu 内核运行 1 个多一点可能会更快：

```
cat filenames | parallel -j150% {} {.}.fcc 
```

如果您只想要当前目录中的所有文件：

```
parallel -j150% {} {.}.fcc ::: *.wav 
```

如果您想在以空格分隔的单行上同时给出输入和输出文件名，您可以使用：

```
cat filenames_2_per_line | parallel --colsep ' ' -j150% {1} {2} 
```

如果文件名不在同一行而是一个接一个，那么您需要一次读取 2 行：

```
cat filenames_interleaved | parallel -N2 -j150% {1} {2} 
```

观看介绍视频以了解更多信息：[https ://www.youtube.com/playlist?list=PL284C9FF2488BC6D1](https://www.youtube.com/playlist?list=PL284C9FF2488BC6D1)

# forms - 在 tpl 文件中显示“添加内容”表单

> ID：12751524
> 
> 赞同：1
> 
> 时间：2012-10-05T17:52:36.853
> 
> 标签：forms, drupal-7, content-type

我是drupal的新手。我想在其中加载一个带有“添加内容”表单（在内容类型“故事”下添加故事的表单）的滑块。我不知道如何在滑块内创建它。

我的主题文件夹中没有 template.php。是否可以在 tpl 文件中调用表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:14:25.810

您可以使用[drupal_get_form](http://api.drupal.org/api/drupal/includes!form.inc/function/drupal_get_form/7)函数为您的内容类型加载节点表单。尽管理想情况下您不想在 .tpl 文件中执行此操作，而是在创建块的自定义模块中执行此操作，其中包含该表单。

您的 .tpl 示例

```
<?php

    global $user;
    module_load_include('inc','node','node.pages');
    $node_form = drupal_get_form('story_node_form',array('uid'=>$user->uid,'type'=>'story'));
    echo render($node_form); 
```

# c++ - 如何在 ATI 卡上安装 CUDA，Ubuntu

> ID：12751525
> 
> 赞同：0
> 
> 时间：2012-10-05T17:52:37.297
> 
> 标签：c++, cuda

我需要编译 FLANN，一个 C++ 库。编译需要 CUDA。

鉴于我有 ATI 显卡，如何在 Ubuntu 上安装 CUDA？

我需要安装它以便 FLANN 编译完成，我不会使用任何与 CUDA 相关的代码。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T18:46:42.147

如果您只需要 CUDA 用于编译，而不需要运行，则可以从 NVIDIA 网站下载最新的 CUDA Toolkit for ubuntu 并将其安装在基于 ATI 的系统上。安装很简单，您只需要运行 .run 文件。将其安装在默认路径中，并在安装后将以下行添加到命令行的末尾`~/.bashrc`（`nvcc`用于编译 FLANN）：

```
export PATH=$PATH:/usr/local/cuda/bin/
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/cuda/lib64:/usr/local/cuda/lib 
```

# php - 防止数据库攻击

> ID：12751534
> 
> 赞同：0
> 
> 时间：2012-10-05T17:53:16.677
> 
> 标签：php, database, arrays

使用 get_magic_quotes_gpc 来防止数据库攻击是否仍然相关？如果启用了魔术引号，我想去掉多余的斜线。

```
if(get_magic_quotes_gpc()){
    If magic quotes is enabled, strip the extra slashes
    array_walk_recursive($_GET,create_function('&$v,$k','$v = stripslashes($v);'));
    array_walk_recursive($_POST,create_function('&$v,$k','$v = stripslashes($v);'));
} 
```

我查看了 php 手册，发现它已被弃用。我不确定我可以使用哪些替代方案，或者是否有我不知道的调整。因为我对编程和学习不同的编码技术仍然很陌生。任何提示将非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T17:54:30.200

用这个

```
function mysql_prep($value)
{
    $magic_quotes_active = get_magic_quotes_gpc();
    $new_enough_php = function_exists("mysql_real_escape_string");
    if ($new_enough_php) { 
        // undo any magic quote effects so mysql_real_escape_string can do the work
        if ($magic_quotes_active) {
            $value = stripslashes($value);
        }
        $value = mysql_real_escape_string($value);
    } else { 
        // if magic quotes aren't already on then add slashes manually
        if (!$magic_quotes_active) {
            $value = addslashes($value);
        }
        // if magic quotes are active, then the slashes already exist
    }
    return ($value);
} 
```

我会建议你 pdo`prepared statement`

```
$q=$pdo->prepare("query where id=:id");
$q->execute(array(":id"=>1)) 
```

# php - 来自 PayPal 的回调。如何立即知道用户支付成功？

> ID：12751535
> 
> 赞同：1
> 
> 时间：2012-10-05T17:53:16.797
> 
> 标签：php, web, paypal, e-commerce, paypal-ipn

我正在运行一个电子商务网站，我想集成 PayPal。我需要立即知道用户在通过信用卡付款后是否成功付款。我有机会用 PayPal 做到这一点吗？

我听说 PayPal 有一项名为 IPN 的服务，它可以发布到我的服务器并告诉我交易的状态。但是很多人抱怨 IPN 的 PHP API 存在巨大的延迟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T21:02:06.693

几个小时前刚刚完成了 IPN 集成 :)。

IPN 代表即时付款通知。在大多数情况下，它只是工作（嗨应用粉丝！）。

您添加了一个表单，其中包含货币和返回 URL 等变量，以及一个您希望 Paypal 在付款时发送交易信息的特殊页面。收到通知并不意味着资金已发送到您的账户，但交易已完成。（无法将资金存入您账户的可能原因包括卡提供商问题、账户不完整等）

您将面临一些关于特定问题的问题。但我建议检查贝宝网站及其 API 文档。它们非常简单，只要对您的编程语言和 HTTP 的工作原理有一点了解，您就可以实现它。

我看过一些关于 PayPal IPN 系统很慢的帖子。我自己没有看到它，但在大多数情况下，我确信在用户返回您的站点之前您会收到 paypal API 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:07:13.850

我在[nSoftware 的](http://www.nsoftware.com/download/php.aspx)PayPal 插件上取得了巨大的成功。

# python - 使用 urllib 检索所有标头数据

> ID：12751536
> 
> 赞同：3
> 
> 时间：2012-10-05T17:53:19.513
> 
> 标签：python, http-headers, urllib

我浏览了许多网站，并且经常想知道为什么 Firebug 中显示的响应标头和返回的响应标头`urllib.urlopen(url).info()`通常不同，因为 Firebug 报告了 MORE 标头。

我今天遇到了一个有趣的人。我通过在重定向到最终页面之前完全加载（返回 200 状态代码）的“搜索 url”来抓取网站。执行抓取的最简单方法是返回`Location`响应标头并发出另一个请求。但是，当我运行 'urllib.urlopen(url).info() 时，该特定标题不存在。

这是区别：

萤火虫标头：

```
Cache-Control : no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Connection : keep-alive
Content-Encoding : gzip
Content-Length : 2433
Content-Type : text/html
Date : Fri, 05 Oct 2012 15:59:31 GMT
Expires : Thu, 19 Nov 1981 08:52:00 GMT
Location : /catalog/display/1292/index.html
Pragma : no-cache
Server : Apache/2.0.55
Set-Cookie : PHPSESSID=9b99dd9a4afb0ef0ca267b853265b540; path=/
Vary : Accept-Encoding,User-Agent
X-Powered-By : PHP/4.4.0 
```

我的代码返回的标头：

```
Date: Fri, 05 Oct 2012 17:16:23 GMT
Server: Apache/2.0.55
X-Powered-By: PHP/4.4.0
Set-Cookie: PHPSESSID=39ccc547fc407daab21d3c83451d9a04; path=/
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Vary: Accept-Encoding,User-Agent
Content-Type: text/html
Connection: close 
```

这是我的代码：

```
from BeautifulSoup import BeautifulSoup
import urllib
import psycopg2
import psycopg2.extras
import scrape_tools

tools = scrape_tools.tool_box()
db = tools.db_connect()

cursor = db.cursor(cursor_factory = psycopg2.extras.RealDictCursor)
cursor.execute("SELECT data FROM table WHERE variable = 'Constant' ORDER BY data")

for row in cursor:
    url = 'http://www.website.com/search/' + row['data']    
    headers = {
            'Accept' : 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',
            'Accept-Encoding' : 'gzip, deflate',
            'Accept-Language' : 'en-us,en;q=0.5',
            'Connection' : 'keep-alive',
            'Host' : 'www.website.com',
            'User-Agent' : 'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1'
            }
    post_params = {
                'query' : row['data'],
                'searchtype' : 'products'
                }
    post_args = urllib.urlencode(post_params)
    soup = tools.request(url, post_args, headers)

    print tools.get_headers(url, post_args, headers) 
```

请注意：`scrape_tools`是我自己编写的模块。模块中包含的用于检索标头的代码（基本上）如下：

```
class tool_box:
    def get_headers(self, url, post, headers):
        file_pointer = urllib.urlopen(url, post, headers)
        return file_pointer.info() 
```

有差异的原因吗？我在我的代码中犯了一个愚蠢的错误吗？如何检索丢失的标头数据？我对 Python 还很陌生，所以请原谅任何愚蠢的错误。

提前致谢。非常感谢任何建议！

另外...对不起代码墙=\

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T19:05:18.807

对于这两个请求，您没有得到相同类型的响应。例如，对 Firefox 请求的响应包含一个`Location:`标头，因此它可能是 a`302 Moved temporarily`或 a `301`。这些不包含任何实际的正文数据，而是导致您的 Firefox 向`Location:`标头中的 URL 发出第二个请求（urllib 不这样做）。

`Connection : keep-alive`当 urllib 请求得到答复时，Firefox 响应也会使用`Connection: close`.

此外，Firefox 响应是 gzipped ( `Content-Encoding : gzip`)，而 urllib 则不是。这可能是因为您的 Firefox`Accept-Encoding: gzip, deflate`在其请求中发送了一个标头。

不要依赖 Firebug 告诉您 HTTP 标头（即使它在大多数情况下都是如此真实），而是使用像[wireshark](http://www.wireshark.org/)这样的嗅探器来检查*实际*通过网络传输的内容。

您显然正在处理两种不同的响应。

这可能有几个原因。一方面，Web 服务器*应该*`Accept-Language`根据客户端在其请求中发送的内容、标头等做出不同`Accept-Encoding`的响应。然后服务器也有可能进行某种`User-Agent`嗅探。

[无论哪种方式，使用wireshark](http://www.wireshark.org/)捕获您的请求`urllib`以及使用Firefox的请求并首先比较请求（不是标头，而是实际部分。它们真的相同吗？如果是，继续比较请求标头并开始手动设置请求的相同标头，直到您确定哪些标头有所不同。`GET / HTTP/1.0``urllib`

# iphone - 如何在 iOS 应用程序中调用 python 脚本？

> ID：12751539
> 
> 赞同：4
> 
> 时间：2012-10-05T17:53:31.210
> 
> 标签：iphone, python, objective-c, ios, ios6

我想制作一个原生 iOS 应用程序。它将主要用 Objective-C 编写。但我需要调用一些 python 脚本。我已经研究了几个小时。

问题：

1：我发现这篇文章（[在 iPhone 上运行 python/ruby 脚本？](https://stackoverflow.com/questions/2683565/running-python-ruby-script-on-iphone)来自 iPhone OS 4 条款 --- 3.3.1 - 应用程序只能以 Apple 规定的方式使用文档化 API，不得使用或调用任何私有 API。应用程序必须最初是用 iPhone OS WebKit 引擎执行的 Objective-C、C、C++ 或 JavaScript 编写的，并且只有用 C、C++ 和 Objective-C 编写的代码才能编译并直接链接到文档化 API（例如，禁止通过中间翻译或兼容层或工具链接到文档化 API 的应用程序））。但是已经2年了。本协议是否有任何变更？

2：如果可以在iOS应用程序中调用python脚本，有人可以用一些代码示例向我解释吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T19:22:35.617

您需要将解释器嵌入到您的应用程序中。我相信这是您正在寻找的线程。 [在 iPhone 应用程序中嵌入 Python](https://stackoverflow.com/questions/3691655/embedding-python-in-an-iphone-app)

# spring - 测试 Spring MVC 处理程序映射

> ID：12751544
> 
> 赞同：1
> 
> 时间：2012-10-05T17:53:53.583
> 
> 标签：spring, spring-mvc

我正在尝试测试 Spring MVC 中是否存在处理程序映射。这将帮助我抽象一些自定义案例，其中某个请求需要由非标准处理程序映射处理。

我真的没有看到一个简单的说法：映射“/*/registration/register/custom”，它存在吗？

有任何想法吗？

马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T09:01:00.380

测试映射的简单方法：

```
import java.net.HttpURLConnection;
import java.net.URL;
import junit.framework.TestCase;
import org.junit.Test;
public class HomeControllerTest extends TestCase{

    @Test
    public void test() {
        assertEquals(true, checkIfURLExists("http://localhost:8080/test"));
    }

    public static boolean checkIfURLExists(String targetUrl) {
        HttpURLConnection httpUrlConn;
        try {
            httpUrlConn = (HttpURLConnection) new URL(targetUrl).openConnection();
            httpUrlConn.setRequestMethod("GET");

            // Set timeouts in milliseconds
            httpUrlConn.setConnectTimeout(30000);
            httpUrlConn.setReadTimeout(30000);

            // Print HTTP status code/message for your information.
            System.out.println("Response Code: " + httpUrlConn.getResponseCode());
            System.out.println("Response Message: " + httpUrlConn.getResponseMessage());

            return (httpUrlConn.getResponseCode() == HttpURLConnection.HTTP_OK);
        } catch (Exception e) {
            System.out.println("Error: " + e.getMessage());
            return false;
        }
    }
} 
```

来自 Spring 文档： [http ://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/htmlsingle/#unit-testing-spring-mvc](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/htmlsingle/#unit-testing-spring-mvc)

> 9.2.2.2 Spring MVC
> 
> org.springframework.test.web 包包含 ModelAndViewAssert，您可以将其与 JUnit 4+、TestNG 等结合使用，用于处理 Spring MVC ModelAndView 对象的单元测试。
> 
> 单元测试 Spring MVC 控制器 要测试您的 Spring MVC 控制器，请使用 ModelAndViewAssert 结合 org.springframework.mock.web 包中的 MockHttpServletRequest、MockHttpSession 等。

# artificial-intelligence - 推荐的人工智能/机器学习：档案输入、收入预测

> ID：12751546
> 
> 赞同：0
> 
> 时间：2012-10-05T17:54:26.183
> 
> 标签：artificial-intelligence, genetic-algorithm, bayesian-networks

我的项目如下所示：我的数据集是一堆人的资料，具有各种属性，例如 boolean hasJob 和 int healthScore，以及他们的收入。使用这些数据，我试图预测他们未来的收入。每个配置文件也有一个历史：例如，他们过去的属性和收入。

所以本质上我正在尝试将多组（x booleans，y numbers）映射到一个数字（来年的薪水）。

我考虑过神经网络、贝叶斯网络和用于函数拟合的遗传算法。有什么建议或意见吗？

提前致谢！——艾米丽

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:31:30.483

您要做的就是所谓的“时间序列建模”。但是，每个系列（每人）可能只有很少的数据。我认为很难找到适合每个人的模型，因为您会做出一些一般性假设，例如每个人都同样以职业为导向。这也是一个如此嘈杂的目标，例如，您可能必须考虑某人是否是甜言蜜语者。你如何衡量这样的事情？我很确定您当前的属性有足够的噪音，很难预测任何事情。当您说健康状况时，您是指身体健康还是心理健康。在不同的业务中，不同的事情很重要。他们从事的业务或行业呢？它的健康和增长潜力？我认为这会极大地影响他们的收入。我还认为您有因变量以及属性可能（并且可能）受目标变量的影响。例如。收入较高的人健康状况较好。这听起来是一件非常复杂和困难的事情，绝对没有什么“我天真地对我的数据进行分组并尝试了一堆方法”会给出*有意义的*结果。我建议更多地了解时间序列建模，尤其是你所拥有的数据。也许可以尝试从最初的属性对人进行聚类，看看他们是如何发展的。有没有与这种发展相关的变量？

你的研究问题是什么？

# bash - 当特定子进程终止时，如何在 bash 脚本中接收通知？

> ID：12751547
> 
> 赞同：4
> 
> 时间：2012-10-05T17:54:27.570
> 
> 标签：bash, nonblocking, child-process, sigchld

我想知道是否有人可以帮助解决这个问题？

我有一个 bash 脚本。它启动一个子进程，这是另一个基于 gui 的应用程序。然后 bash 脚本进入交互模式，从用户那里获取输入。这种交互模式无限期地继续下去。我希望它在子进程中的 gui 应用程序退出时终止。

我看过 SIGCHLD 但这似乎不是答案。这是我尝试过的，但是当 prog 结束时我没有收到信号。

```
set -o monitor

"${prog}" &
prog_pid=$!

function check_pid {
    kill -0 $1 2> /dev/null
}

function cleanup {
    ### does cleanup stuff here
    exit
}

function sigchld {
    check_pid $prog_pid
    [[ $? == 1 ]] && cleanup
}

trap sigchld SIGCHLD 
```

**更新了以下答案。**我现在使用“nosid”的建议进行这项工作。我现在有另一个相关的问题，即接下来的交互过程是一个基本的菜单驱动过程，它阻止等待用户的键输入。如果子进程结束 USR1 信号直到收到输入后才被处理。有没有办法强制立即处理信号？

等待看起来像这样：

```
stty raw                 # set the tty driver to raw mode 
max=$1                   # maximum valid choice
choice=$(expr $max + 1)  # invalid choice
while [[ $choice -gt $max ]]; do
    choice=`dd if=/dev/tty bs=1 count=1 2>/dev/null`
done
stty sane                # restore tty 
```

**更新了解决方案**。我已经解决了这个问题。诀窍是使用非阻塞 I/O 进行读取。现在，有了“nosid”的答案和我的修改，我得到了我想要的。为了完整起见，这对我有用：

```
#!/bin/bash -bm
{
"${1}"
kill -USR1 $$
} &

function cleanup {
    # cleanup stuff
    exit
}

trap cleanup SIGUSR1

while true ; do
   stty raw                 # set the tty driver to raw mode 
   max=9                    # maximum valid choice
   while [[ $choice -gt $max || -z $choice ]]; do
       choice=`dd iflag=nonblock if=/dev/tty bs=1 count=1 2>/dev/null`
   done
   stty sane                # restore tty

   # process choice       

done 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T18:04:31.240

这是一种不同的方法。您可以在 GUI 应用程序终止后立即执行任意命令，而不是使用 SIGCHLD。

```
{
    some_command args...
    kill -USR1 $$
} &

function sigusr1() { ... }

trap sigusr1 SIGUSR1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:44:19.120

行。我想我明白你需要什么。看看我的 .xinitrc：

```
 xrdb ~/.Xdefaults
   source ~/.xinitrc.hw.settings
   xcompmgr &
   xscreensaver &
   # after starting some arbitrary crap we want to start the main gui.       

   startfluxbox &  PIDOFAPP=$! ## THIS IS THE IMPORTANT PART
   setxkbmap genja

   wmclockmon -bl &

   sleep 1
   wmctrl -s 3  && aterms sone &
   sleep 1
   wmctrl -s 0

   wait $PIDOFAPP ## THIS IS THE SECOND PART OF THE IMPORTANT PART

   xeyes -geometry 400x400+500+400 &
   sleep 2
   echo im out! 
```

发生的情况是，在将进程发送到后台后，您可以使用 wait 等到进程终止。只要应用程序正在运行，等待之后的任何内容都不会执行。在 GUI 关闭后，您可以使用它退出。

PS：我运行 bash。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T17:59:00.210

我认为你需要这样做：

```
set -bm 
```

或者

```
set -o monitor notify 
```

根据[bash 手册](http://www.gnu.org/software/bash/manual/html_node/The-Set-Builtin.html)：

```
-b
    Cause the status of terminated background jobs to be reported immediately, rather than before printing the next primary prompt. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T18:02:15.310

shell 的主要工作是执行子进程，它需要捕获 SIGCHLD 以达到自己的目的。这以某种方式限制了它将信号传递给脚本本身。

你能检查一下孩子`pid`并根据它发送警报吗？您可以通过以下方式找到孩子`pid`——

```
bash_pid=$$
while true
do
    children=`ps -eo ppid | grep -w $bash_pid`
    if [ -z "$children" ]; then
        cleanup
        alert
        exit
    fi
done 
```

# alignment - 使用 metafizzy 同位素创建行中项目的自定义中心对齐，这可能吗？

> ID：12751550
> 
> 赞同：0
> 
> 时间：2012-10-05T17:54:44.737
> 
> 标签：alignment, customization, center, jquery-isotope

我有一个带有自定义布局的设计，用于许多图像，看起来很简单，但在开发方面并非如此。我想做的是使用同位素来对齐和过滤所有图像，但对齐是自定义的。图像应始终在其容器中居中，并且一行中的最大项目数交替出现，因此第 1 行最多有 3 个图像，第 2 行最多有 2 个图像，对所有其他行重复此顺序。我提供了一个快速图表的链接，该图表说明了这将如何处理不同数量的图像。我不确定同位素如何或是否可以使这些图像居中，无论每行的总数是多少。对这个有什么想法吗？

![图表链接](../Images/39f6016b8f63890f16cfcb83fe2da7e6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:48:20.223

不，对于这样的事情，你最好研究一下与[circle packing](http://en.wikipedia.org/wiki/Circle_packing)和[bin packing](http://en.wikipedia.org/wiki/Bin_packing)相关的算法。您可以通过 MATLAB 和 Mathematica 找到好的算法。

# algorithm - 动态规划的递归解决方案

> ID：12751554
> 
> 赞同：3
> 
> 时间：2012-10-05T17:55:00.790
> 
> 标签：algorithm, dynamic-programming

> **可能的重复：**
> [动态规划和背包应用程序](https://stackoverflow.com/questions/12626854/dynamic-programming-and-knapsack-application)

我一直在尝试理解动态编程，但是对于每个新问题，我都会对如何为其编写递归感到有些困惑。

举个问题：有一块L×H的金属板，可以用机器垂直或水平切割成两块。L、H都是整数，切割也沿着整数值发生。有n个矩形图案l（ i) × h(i) , i ≤ n (l , h 也是整数) 其中第 i 个模式的利润为 c(i)。设计一种有效的算法来切割板材，以使总利润最大化。

现在我认为为了解决它，我们将创建一个 LxH 表（将按对角线填充）。但是我们如何形成一个递归来解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T21:28:41.830

我会为每个 T(L, H) 尝试类似的东西，验证以下之间的最佳选择：

*   立即收取利润
*   水平切割所有可能的方式
*   垂直切割所有可能的方式

就像是：

```
T(L, H) = max(
    c(L, H),  
    T(i, H)+T(L-i, H), // 0<i<L
    T(L, i)+T(L, H-i)  // 0<i<H
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T21:41:27.620

我不明白为什么你真的想在有 dp 关系时使用递归。回溯递归通常效率很低，因为它的复杂度通常为 O(2^N) 或更高。

然而，那些指数算法很像这样：

```
function rec(state)
    if state = end
       return
    Choose the current element
    rec(state + 1)
    Don't choose the current element
    rec(state + 1) 
```

在你的情况下，这可能是这样的蛮力：

```
 function rec(rect r)
      if r is empty
        return 0
      Max = 0
      for i = 1 to r.width
          for j = 1 to r.hight
             rect g = cut(r, i, j)
             Max = max(Max, profit(g) + rec(r - g))
      return Max 
```

# css - CSS：前一个 DIV 中的高度使用 Clear:Both 向下推页脚

> ID：12751555
> 
> 赞同：0
> 
> 时间：2012-10-05T17:55:04.677
> 
> 标签：css

我遇到了一个问题，我在页脚上方的 div 中设置了最小高度。为了使页脚中的文本居中对齐，我在 CSS 中使用 clear:both。唯一的问题是现在内容和页脚之间有很大的空间？

这是我正在开发的网站：http: [//brimbar.com/no_crawl/RiverHollow/about.html](http://brimbar.com/no_crawl/RiverHollow/about.html)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:02:59.617

这是因为你有巨人的浮动图像`margin-bottom`。`clear: both`表示“该元素的任何一侧都不应有任何元素”，因此页脚必须低于 600px 边距。

页脚文本没有居中的原因`clear: both`是因为它仅在 div 的开头和该图像的左侧（加上其巨大的边距）之间的宽度内居中。

您应该做的是更改标记，以便您的图像出现在内容 div 内的另一个列 div 中，因为您似乎希望将其显示在自己的列中而不是浮动的。如果你这样做，你将不需要巨大的边距，也不需要`clear: both`在你的页脚元素上。

这是一个演示：http: [//jsbin.com/uxiqer/1/edit](http://jsbin.com/uxiqer/1/edit)

请注意，您可以使用浮点数或`position: absolute`将`.images`div 定位在右侧；我只是觉得`position: absolute`更容易使用。

如果您不需要图像显示在它们自己的列中，那么您可以简单地将浮动保留在图像上并将其删除`margin-bottom`，然后文本将很好地环绕图像及其边缘。这是 的预期目的`float`。然后在没有溢出内容 div 的巨大边距的情况下，页脚文本可以正确居中而无需`clear: both`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:11:22.553

删除 clear: both 并向页脚添加特定高度，而不仅仅是最小高度。我无法让您的文本对齐，但我敢打赌，如果您删除了“位置：静态”就可以了。

由于您在容器本身上硬编码了 1550px 高度，因此页脚占用了其余可用空间，因为它只有“最小高度”要求而不是最大高度。

# batch-file - 如何编写批处理文件来运行在不同命令提示符下打开的应用程序？

> ID：12751557
> 
> 赞同：0
> 
> 时间：2012-10-05T17:55:09.037
> 
> 标签：batch-file

我想从命令提示符在我的 Windows 机器上运行三台服务器。为此，我想编写一个批处理文件来运行这些打开的三个不同的命令提示符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T04:44:43.920

To generate 3 new CMD windows that remain open, use the following command syntax:

```
start "application1" cmd.exe /k dir *.exe
start "application2" cmd.exe /k dir *.xml
start "application3" cmd.exe /k dir *.bat 
```

Where the command after `/k` is whatever application command line that you want to launch.

Replace the "application#" with some TITLE for the window, that makes sense for you (otherwise it will just say something like C:\Windows\System32\CMD.exe).

The windows will stay open, but that doesn't mean your application will still be running. Like the `Dir` examples above, it may end but the window will remain.

*The full command syntax for START is found [here](http://ss64.com/nt/start.html).
The full command syntax for CMD is found [here](http://ss64.com/nt/cmd.html).*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T17:58:44.173

为什么要分批？

如果可以的话，我最好的建议是放弃批处理并下载 cygwin 以改用 bash。

您会发现 bash 更加灵活、使用（这意味着您更有可能从其他人那里获得支持）和支持。

我是 Windows 用户，前段时间尝试学习批处理，但真的很沮丧。bash 更加用户友好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T11:25:57.003

这应该做你想做的

```
start application1
start application2
start application3 
```

这将启动 3 个应用程序，这些应用程序将使用 3 个不同的命令提示符打开，它们是否会继续运行取决于应用程序。

# vb.net - Visual Basic 如果没有问题

> ID：12751561
> 
> 赞同：0
> 
> 时间：2012-10-05T17:55:22.517
> 
> 标签：vb.net, exception, loops

我正在为我的视觉基础课做作业。我已经编写了大部分代码，并且一切似乎都运行良好，除了我的 If Not 语句在循环找不到它要查找的内容时捕获异常。任何人都认为代码的外观有问题。该文件已使用浏览按钮加载，当我输入循环可以找到的信息时，它可以找到。

```
Private Sub btnSearch_Click(ByVal sender As System.Object, ByVal e As   
System.EventArgs)

Handles btnSearch.Click
    'event level variables
    Dim Found As Boolean
    Dim Counter As Integer

    'looks for entry match
    If rdoAbbrev.Checked = True Then
        Do Until Found Or Counter > 257
            If Country(Counter).Abbreviation.ToUpper = txtAbbrev.Text.ToUpper Then
                Found = True
                txtCountry.Text = Country(Counter).Names
            Else
                Counter += 1
            End If
        Loop
    Else
        Do Until Found Or Counter > 257
            If Country(Counter).Names.ToUpper = txtCountry.Text.ToUpper Then
                Found = True
                txtAbbrev.Text = Country(Counter).Abbreviation
            Else
                Counter += 1
            End If
        Loop
        If Not Found Then
            MessageBox.Show("This is not a valid entry.", "NO MATCH FOUND", MessageBoxButtons.OK)
            If rdoAbbrev.Checked = True Then
                txtAbbrev.Text = ""
                txtAbbrev.Focus()
            Else
                txtCountry.Text = ""
                txtCountry.Focus()

            End If
        End If
    End If
    'match not found response

    'reset variables
    Counter = 0
    Found = False
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:14:24.653

您`If Not Found`阻塞仅在`rdoAbbrev.Checked = True`. 那是你的意图吗？如果不是，那么该代码块应该位于第一个`If`块之外（在其下方），或者您应该在第一个循环`If`之后有第二个块。`While`

**编辑**
看起来 Country 是一个数组。您可能应该使用`Counter >= Country.Length`.

VB.NET 中的数组是从 0 开始的。这意味着第一项位于`Country(0)`，第二项位于`Country(1)`，依此类推。如果数组中有 100 个元素，则最后一个元素位于`Country(99)`。`Country(100)`不存在，如果您尝试访问它会导致异常。

我不确定您的作业要求是什么，但通常要遍历集合的元素（数组、列表等），您会使用 For 循环。您可以使用 Exit 命令提前退出循环。

```
For Counter As Integer = 0 To Country.Length - 1
     '...Country(Counter)
     If Found Then Exit For
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:14:18.293

假设您希望无论属性如何都执行“未找到”部分`rdoAbbrev.Checked`，它看起来像是您的逻辑中的一个小错误（很容易修复）。

```
Private Sub btnSearch_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSearch.Click
    'event level variables
    Dim Found As Boolean
    Dim Counter As Integer

    'looks for entry match
    If rdoAbbrev.Checked = True Then
        Do Until Found Or Counter > 257
            If Country(Counter).Abbreviation.ToUpper = txtAbbrev.Text.ToUpper Then
                Found = True
                txtCountry.Text = Country(Counter).Names
            Else
                Counter += 1
            End If
            'You could also write this as:
            'Found = Country(Counter).Abbreviation.ToUpper = txtAbbrev.Text.ToUpper
            'If Found Then
            '    txtCountry.Text = Country(Counter).Names
            'Else
            '    Counter += 1
            'End If
        Loop
    Else
        Do Until Found Or Counter > 257
            If Country(Counter).Names.ToUpper = txtCountry.Text.ToUpper Then
                Found = True
                txtAbbrev.Text = Country(Counter).Abbreviation
            Else
                Counter += 1
            End If
            'You could also write this as:
            'Found = Country(Counter).Names.ToUpper = txtCountry.Text.ToUpper
            'If Found Then
            '    txtAbbrev.Text = Country(Counter).Abbreviation
            'Else
            '    Counter += 1
            'End If
        Loop
    End If
    'match not found response
    'Move your "Not Found" here so that the not found works regardless of the rdoAbbrev.Checked property.
    If Not Found Then
        MessageBox.Show("This is not a valid entry.", "NO MATCH FOUND", MessageBoxButtons.OK)
        If rdoAbbrev.Checked = True Then
            txtAbbrev.Text = ""
            txtAbbrev.Focus()
        Else
            txtCountry.Text = ""
            txtCountry.Focus()

        End If
    End If

    'reset variables
    Counter = 0
    Found = False
End Sub 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-11T19:34:21.320

可能您应该在代码的范围内结束 If 语句，并避免在代码行末尾结束所有 If 语句。通常在 Basic 中对我有用。我认为 Basic 有很多优点，但对我来说，它仍然不是一种有问题的高级语言，因为它很容易使用。

# asp.net-mvc - DropDownListFor 枚举不绑定回模型

> ID：12751565
> 
> 赞同：2
> 
> 时间：2012-10-05T17:55:40.493
> 
> 标签：asp.net-mvc, asp.net-mvc-3, validation

在我的 MVC 表单上，我需要将一个下拉框绑定到我的 ViewModel 上的一个枚举。我发现这样做的最佳方法[在此处](https://stackoverflow.com/a/8538813/356544)进行了描述。

起初它似乎可以工作，但现在我已经向我的表单添加了验证，我发现它没有绑定回 ViewModel。

这是我的剃须刀代码：

```
<div class="editor-field">
    @Html.DropDownListFor(model => model.response, 
                          new SelectList(Enum.GetValues(typeof(Vouchers.Models.ResponseType))),
                          "Please Select")
</div> 
```

这是我对该字段的视图模型定义：

```
[DisplayName("Response")]
[Range(1, int.MaxValue, ErrorMessage = "You must select a response before submitting this form.")]
public ResponseType response { get; set; } 
```

问题是我无法提交表格；即使从我的下拉列表中选择了响应，也会显示 Range 属性的验证错误消息，并且客户端验证会阻止表单提交。

我相信这是因为下拉列表的 SelectList 只包含枚举的字符串名称，而不是基础整数值。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T19:28:29.910

创建字典，其中键将是枚举的整数表示和字符串 - 枚举的名称。

```
@Html.DropDownListFor(model => model.response, 
                      new SelectList(Enum.GetValues(typeof(Vouchers.Models.ResponseType)).OfType<Vouchers.Models.VoucherResponseType>().ToDictionary(x => Convert.ToInt32(x), y => y.ToString()), "Key", "Value"), "Please Select") 
```

对不起，可能的错误，我没有尝试过。

# php - AJAX 通过 PHP 更新值后更新并显示最近的记录（在 DB 中）

> ID：12751568
> 
> 赞同：-1
> 
> 时间：2012-10-05T17:55:43.937
> 
> 标签：php, ajax, database, onmouseout

所以我正在建立一个像 Flickr 这样的 PHP 网站，除了这些照片可以评级。所以我在 AJAX 中设置了评分系统，这样当用户单击星号对照片进行评分时，照片上的星号会反映计算出的新评分。（照片的等级由黄色或空白的 10 颗星表示）。

当您将鼠标悬停在星星上时，星星会做出反应，它们会在光标指向的位置亮起。当您单击一个星时，相应的值会记录在 photo_rating 表中并在 photo 表中更新。然后新计算的评级通过星星反映。

***更新*** 这几乎都归结为这个调用没有返回正确的评级，它仍然在页面加载时返回照片的原始评级。而不是通过 AJAX 保存在数据库中的新评级（即使数据库中的值已更改）

```
onmouseout="stars_current_rating(<?php echo Photograph::find_by_id($_GET['id'])->rating;?>);" 
```

**问题出在这里：**点击后，星星会更新为正确的新计算评级。但是当我将鼠标移回星星上时，鼠标移开。星级评分会回到用户首次加载页面时的原始评分。因此，正在反映的评级是页面加载时从数据库中提取的评级。不是现在位于照片表评级列中的值。

最初我使用的是 $photo->rating 但我认为自从我使用了 AJAX 之后，该值就不再被计算了。于是我将 onmouseout 切换为调用 Photo::find_by_id($_GET['id'])->rating; 它应该通过从其 id 检查数据库并获取当前评级来实例化一个新对象。但即使这似乎并没有给我更新的价值。

我使用了 firebug、firePHP 并正在进行分析，以查看当我单击并将鼠标悬停在这些方法上时传递给这些方法的确切值。出于某种原因，新评级只是从数据库中提取，在用户投票后立即显示新值。但是，当您将鼠标悬停在星星上时，它们会回到您加载页面时的状态。无论如何，我可以在不刷新整个页面的情况下将更新后的值反映在下面的代码中吗？如果我刷新页面，那么它可以工作，但重点是通过 AJAX 完成所有操作，因此不必重新加载整个页面......

这就是在页面上设置呼叫的方式。

```
 <div id="rating" class="rating">
        <?php 
            for($i=1; $i<11; $i++){
        ?>
        <a id="rating_star<?php echo $i ?>" href="#" onmouseover="decide_rating(<?php echo $i ?>);" 
        onmouseout="stars_current_rating(<?php echo Photograph::find_by_id($_GET['id'])->rating;?>);" 
        onmousedown="set_rating(<?php echo $photo->id.", ".$i ?>);">
        <img id="star<?php echo $i ?>" class="rating_star" src=
        <?php 
            // keeps stars always set at rating for photo when not being rated
            if($photo->rating >= $i){ 
                echo "images/assets/rating_star.png";
            } else {
                echo "images/assets/rating_star_off.png";
            }
        ?>
        />
        </a>
        <?php } ?>

    </div> 
```

这是我的 rating.js 文件，其中包含上面用于 onmouseactions 的 3 个（我知道 decision_rating 和 stars_current_rating 是相同的代码，当我将它们设置为不同的页面时它们是不同的，其中逻辑不同，但更新没有工作，所以我回到这个更简单的例子）

```
 // Makes stars light up, up to where you have your cursor pointing
// pass in current rating of star hovered over 
function decide_rating( r ){
    for(var i=1; i<=10; i++){
        var star = document.getElementById("star"+i);
        if(i<=r){
            star.src = "images/assets/rating_star.png";
        } else {
            star.src = "images/assets/rating_star_off.png";
        }
    }
    return false;
}

// defaults the stars to light up with the current rating
function stars_current_rating(r){
    for(var i=1; i<=10; i++){
        var star = document.getElementById("star"+i);
        if(i<=r){
            star.src = "images/assets/rating_star.png";
        } else {
            star.src = "images/assets/rating_star_off.png";
        }
    }
    return false;
}

function set_rating(pid, rating){

    if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    } else {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function(){
        if(xmlhttp.readyState==4 && xmlhttp.status==200){
            // no message to be displayed
            //document.getElementById("message").innerHTML=xmlhttp.responseText;

            // for this to work ratings.js must be before this file when linked to
            // set_ratings is echoing the $photo->rating for the calling pid 
            // as the xmlhttp.responseText
            stars_current_rating(xmlhttp.responseText);
        }
    }
    xmlhttp.open("GET","../includes/set_rating.php?pid="+pid+"&rating="+rating,true);
    xmlhttp.send();
} 
```

我在我的数据库中设置了 2 个表。一种是具有 user_id、photo_id 和 rating 的 photo_rating。photo 表还有一列表示其当前评级（计算为 photo_rating 中相应行的平均值）。

下面是 AJAX 调用的 set_rating.php 文件

```
<?php
// This file is called by the ratings.js function set_rating
// echo output is used by to update the current rating of the 
// photo after it has been saved in the database

require_once('initialize.php');
// create new photo rating and set up attributes

if(isset($session->user_id)){
    $pr = new PhotoRating( $_GET['pid'], $session->user_id, $_GET['rating']);
} else {
    $pr = new PhotoRating( $_GET['pid'], NULL, $_GET['rating']);
}

// save the rating in photo_ratings table
// and the rating in the photograph table
$pr->save_rating_update_photo();

echo Photograph::find_by_id($_GET['pid'])->rating;  
?> 
```

这些是在 PhotoRating 中调用的函数

```
 // saves the current photo_rating into the database
// Then calls update photo rating up update the 
// rating in the photo database table
function save_rating_update_photo(){
    if($this->save()){
        // Success
        $message = "entry saved in photo_rating";
        //$session->message("{$photo->filename} was uploaded");     
    } else {
        // Failure
        $message = join("<br />", $this->errors);
    }

    $this->update_photo_rating();
}

function update_photo_rating(){
    $photo = Photograph::find_by_id($this->p_id);
    $newRating = ($this->rating + self::sum_all_ratings($this->p_id))/($this->count_all()+1);

    $photo->rating = $newRating%10;

    if($photo->save()){
        // Success

    } else {
        // Failure
        $message = join("<br />", $photo->errors);
    }
} 
```

任何见解都将不胜感激，自从我昨天晚些时候开始测试以来，我一直在敲桌子。我知道我可以重新加载页面，但我觉得这否定了通过 AJAX 实现这一切的效率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T20:06:27.883

在简要查看您的问题/问题并检查您的实时网站的来源之后，我会这样做：

在 ratings.js 的顶部，添加：

```
// Global variable to hold the current rating
var star_rating = 0; 
```

改为`stars_current_rating(r)`：

```
// defaults the stars to light up with the current rating
function stars_current_rating(){ // no "r"
    for(var i=1; i<=10; i++){
        var star = document.getElementById("star"+i);
        if(i<=star_rating){ // !!!
            star.src = "images/assets/rating_star.png";
        } else {
            star.src = "images/assets/rating_star_off.png";
        }
    }
    return false;
} 
```

在`set_rating(pid, rating)`中，将当前第 48 行更改为：

```
star_rating = xmlhttp.responseText;
stars_current_rating(); 
```

在`photo.php`，在每个 中`a`，将 更改`onmouseout`为：

```
onmouseout="stars_current_rating();" 
```

您没有得到您期望的结果的原因是评级的值被硬编码到`onmouseout`函数调用中。在 javascript 中拥有一个随 xmlhttp 响应而变化的变量是至关重要的。

为了在页面加载时也能正常工作，请在 photo.php 中创建一个脚本部分，以`star_rating`正确设置（通过`<?php echo Photograph::find_by_id($_GET['id'])->rating;?>`）

希望这可以帮助！

# ember.js - Ember.js Observer 对子数组不起作用，我的错误是什么？

> ID：12751571
> 
> 赞同：0
> 
> 时间：2012-10-05T17:55:54.957
> 
> 标签：ember.js

在这个例子中：

[http://jsfiddle.net/stephane_klein/yU6PZ/4/](http://jsfiddle.net/stephane_klein/yU6PZ/4/)

为什么观察者在我做的时候没有被执行？

```
monday.pushObject(App.Event.create({ title: 'event 1' })); 
```

我需要在观察者中放置什么“路径”来修复它？

最好的问候，斯蒂芬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:19:48.797

Ember 中有一个关于这个问题的开放错误，[https://github.com/emberjs/ember.js/issues/541 。](https://github.com/emberjs/ember.js/issues/541)目前，这个错误似乎阻止了嵌套数组观察者。

# mysql - phpmyadmin MySQL 访问错误

> ID：12751574
> 
> 赞同：0
> 
> 时间：2012-10-05T17:56:10.207
> 
> 标签：mysql, iis-7, phpmyadmin, wamp

我在尝试访问本地 phpmyadmin 时遇到问题；我敢肯定有些人以前可能遇到过这个问题。

该问题似乎是由以前的安装和配置引起的。

我安装了IIS，它自然占用了80端口。但是我已经成功安装了WAMP并将其附加到8080端口以避免冲突。我已经安装了 phpmyadmin 以在两个平台上运行，但是两者都不起作用。

通过 IIS，浏览器抛出 403.14 - Forbidden 错误，而通过 WAMP phpmyadmin 返回以下消息

> MySQL 说：
> 
> 1045 - 用户 'root'@'localhost' 的访问被拒绝（使用密码：否）

我相信这些错误中至少有一个是由于早期通过 WebMatrix 安装 Wordpress（主要未使用）导致的，这改变了 MySQL（5.1）用户名和密码默认值。

谷歌搜索这个问题导致了一个看起来很有希望的消息来源，它声称可以编辑一个名为 config.inc.php 的文件，其中包含 phpmyadmin 用来登录本地 MySQL 数据库的密码详细信息。但是，我找不到这样的文件（取而代之的是一个名为 config.sample.inc.php 的文件，其中包含教程中包含的一些类似信息，但关键是没有相关的密码字段）。

这不是一个绝对关键的问题，因为最终需要托管数据库，但是本地版本仍然可以简化开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T05:11:36.273

如果你没有找到 config.inc.php 那么你可以创建一个..

有关详细信息，您可以查看[此链接](http://wiki.phpmyadmin.net/pma/Quick_Install#Manually)..

# php - 为什么我看不到使用 jquery post 从 PHP 返回的 JSON 数据？

> ID：12751575
> 
> 赞同：6
> 
> 时间：2012-10-05T17:56:12.177
> 
> 标签：php, jquery

我正在像这样进行 jquery post call：

```
 var t1 = $("#form").serialize();

    $.ajax({
        type: "POST",
        url: "save_test.php",
        data: t1,
        cache: false,
        success: function(data){

            if (data.st) {
                alert("Success");
            }
            else if (data.error) {
                alert("Error");
            }                
        }
    }); 
```

对于我的错误测试，我的 PHP 看起来像这样：

```
$res = new stdClass();

$res->error = 'ERROR SEEN';
echo json_encode($res);
exit(); 
```

为什么我无法访问从 PHP 返回的 json 编码数据？我希望这会触发我的 data.error 警报。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T17:57:57.200

`datatype:json`在 jquery 代码中使用

或者你可以使用

```
var d=$.parseJSON(data) 
```

然后使用`d.st`

# html - 删除 IE8 中选择元素内的多余填充

> ID：12751577
> 
> 赞同：0
> 
> 时间：2012-10-05T17:56:19.997
> 
> 标签：html, css, internet-explorer

我正在尝试`select`使用 CSS 从元素中删除样式。例如：http: [//jsfiddle.net/HTseX/](http://jsfiddle.net/HTseX/)

不管我怎么尝试，元素的边框和文本之间都有额外的填充，主要是在 IE8 中。Firefox、Chrome 和 IE9 相似，但 IE8 更高。

我猜这是不可能的。我总是尝试在所有浏览器中使用相同的代码，所以我尝试确保我确实需要为 IE8 进行特定编码，或者使用 JS 下拉菜单。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:00:37.527

> 根据所使用的浏览器和操作系统，select 的呈现方式略有不同，并且众所周知，使用 CSS 设置样式是一个麻烦的 HTML 元素（因为显示是从操作系统继承的，而不是由浏览器提供的）。

[参考](http://reference.sitepoint.com/html/select)

# android - 在android中读取短信，显示错误计数

> ID：12751578
> 
> 赞同：0
> 
> 时间：2012-10-05T17:56:20.083
> 
> 标签：android, sms

我正在尝试在 android 中阅读短信。在我的清单文件中，我有：

```
<uses-permission android:name="android.permission.READ_SMS" /> 
```

我的代码：

```
Cursor cursor = getContentResolver().query(Uri.parse("content://mms-sms/inbox"), null, null, null,null);
((TextView) findViewById(R.id.info1)).setText("Number of messages: " + cursor.getColumnCount()); 
```

问题是我的收件箱中有超过 17 条短信，但它给出的输出是

**消息数量：17**

我看过[这个](https://stackoverflow.com/questions/848728/how-can-i-read-sms-messages-from-the-inbox-programmatically-in-android)， [这个](https://stackoverflow.com/questions/8209507/retreive-all-inbox-meseges-of-device-in-android?lq=1)，[这个](http://mobdev.olin.edu/mobdevwiki/FrontPage/Tutorials/SMS%20Messaging)和[这个](http://pastebin.com/iPt7MLyM)。有人可以告诉问题是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T18:05:26.867

您要求*列数*：

```
cursor.getColumnCount() 
```

这与您想要的非常不同：

```
cursor.getCount() 
```

* * *

`getCount()`返回光标中的行数，或者在本例中为收件箱中的邮件数。

`getColumnCount()`返回每行的列数；比如 id、sender、message、time 等。在这里阅读第二个答案：[Android 中与 SMS 关联的数据库列有多少？](https://stackoverflow.com/q/4022088/1267661)

# php - 添加子节点后缺少格式？

> ID：12751583
> 
> 赞同：0
> 
> 时间：2012-10-05T17:56:40.993
> 
> 标签：php, xml

我正在尝试使用 PHP 在 XML 文档中添加一个子节点，并且到目前为止一切正常，除了一件事。无法正确格式化？

这是脚本：

```
$xmldoc = new DOMDocument();
$xml->formatOutput = true;
$xml->preserveWhiteSpace = false;
$xmldoc->loadXML('<?xml version="1.0" encoding="ISO-8859-1"?>
<data>
  <udate>1347730639</udate>
  <userid>3</userid>
</data>');

echo "<xmp>OLD:\n". $xmldoc->saveXML() ."</xmp>";

$root = $xmldoc->firstChild;

$newElement = $xmldoc->createElement('popup');
$root->appendChild($newElement);
$newText = $xmldoc->createTextNode("0");
$newElement->appendChild($newText);

echo "<xmp>NEW:\n". $xmldoc->saveXML() ."</xmp>"; 
```

添加节点后，我得到了这个：

```
<data>
  <udate>1347730639</udate>
  <userid>3</userid>
<popup>0</popup></data> 
```

我希望它是这样的：

```
<data>
  <udate>1347730639</udate>
  <userid>3</userid>
  <popup>0</popup>
</data> 
```

我哪里错了？

请提前帮助和感谢:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:05:39.290

`createElement`将打破`formatOutput`这是一个普遍的问题

见 PHP BUG 报告

*   [formatOutput 不适用于 saveHTML](https://bugs.php.net/bug.php?id=48509)
*   [DOMDocument->formatOutput = true 不起作用](https://bugs.php.net/bug.php?id=54972)

但是您可以通过重新加载和格式化来解决问题。

```
$xmldoc = new DOMDocument();
$xmldoc->loadXML('<?xml version="1.0" encoding="ISO-8859-1"?>
<data>
  <udate>1347730639</udate>
  <userid>3</userid>
</data>');

echo "<xmp>OLD:\n". $xmldoc->saveXML() ."</xmp>";

$root = $xmldoc->firstChild;

$newElement = $xmldoc->createElement('popup');
$root->appendChild($newElement);
$newText = $xmldoc->createTextNode("0");
$newElement->appendChild($newText);

$xml = new DOMDocument();
$xml->preserveWhiteSpace = false;
$xml->formatOutput = true;
$xml->loadXML( $xmldoc->saveXML());
echo "<xmp>NEW:\n". $xml->saveXML()."</xmp>"; 
```

输出

```
OLD:
<?xml version="1.0" encoding="ISO-8859-1"?>
<data>
  <udate>1347730639</udate>
  <userid>3</userid>
</data>
NEW:
<?xml version="1.0" encoding="ISO-8859-1"?>
<data>
  <udate>1347730639</udate>
  <userid>3</userid>
  <popup>0</popup>
</data> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:06:23.863

您可能想尝试先删除所有空格，然后再进行格式化。

强制它从头开始重新制作 xml。

```
$xml->preserveWhiteSpace = false; 
$xml->formatOutput = true; 
```

# scala - 重复上一个 sbt 命令？

> ID：12751589
> 
> 赞同：2
> 
> 时间：2012-10-05T17:57:20.823
> 
> 标签：scala, intellij-idea, sbt

是否有一个简短的 sbt 命令或键盘快捷键来重新调用最后发出的命令？我发现自己不得不重复执行此操作：

```
> test-only my.long.package.etc.class.name 
```

复制+粘贴有点烦人。我正在使用 IntelliJ IDEA 中的 sbt 控制台，因此向上滚动浏览历史记录不起作用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T18:02:27.497

你想要`!!`。要查看 的帮助`sbt`，请`help`在提示符处键入：

```
> help

  help                         Displays this help message or prints detailed help on requested commands (run 'help <command>').
  about                        Displays basic information about sbt and the build.
  reload                       (Re)loads the project in the current directory
  settings                     Lists the settings defined for the current project.
  tasks                        Lists the tasks defined for the current project.
  projects                     Lists the names of available projects or temporarily adds/removes extra builds to the session.
  project                      Displays the current project or changes to the provided `project`.
  set                          Evaluates a Setting and applies it to the current project.
  session                      Manipulates session settings.  For details, run 'help session'.
  inspect                      Prints the value for 'key', the defining scope, delegates, related definitions, and dependencies.
  ; <command> (; <command>)*   Runs the provided semicolon-separated commands.
  ~ <command>                  Executes the specified command whenever source files change.
  last                         Displays output from a previous command or the output from a specific task.
  last-grep                    Shows lines from the last output for 'key' that match 'pattern'.
  exit                         Terminates the build.
  show <key>                   Displays the result of evaluating the setting or task associated with 'key'.

More command help available using 'help <command>' for:
  !, -, <, alias, append, apply, eval, iflast, reboot, shell 
```

然后获得帮助`!`：

```
> !
History commands:
   !!    Execute the last command again
   !:    Show all previous commands
   !:n    Show the last n commands
   !n    Execute the command with index n, as shown by the !: command
   !-n    Execute the nth command before this one
   !string    Execute the most recent command starting with 'string'
   !?string    Execute the most recent command containing 'string' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T21:22:27.977

升级到 IDEA 的 sbt 插件的最新版本 1.4.0，因为它支持箭头键历史记录。

# c# - C# HashSet Generic 允许重复

> ID：12751591
> 
> 赞同：1
> 
> 时间：2012-10-05T17:57:21.570
> 
> 标签：c#, hashset

阅读 MSDN 上的 HashSet，它说`HashSet<T>`，如果 T 实现，`IEquatable<T>`则 HashSet 将其用于`IEqualityComparer<T>.Default`.

所以，让 Person 类：

```
public class Person : IEquality<Person>
{
    private string pName;
    public Person(string name){ pName=name; }
    public string Name
    {
        get { return pName; }
        set
        {
            if (pName.Equals(value, StringComparison.InvariantCultureIgnoreCase))
            {
              return;
            }
            pName = value;
        }
    }

    public bool Equals(Person other)
    {
        if(other==null){return false;}
        return pName.Equals(other.pName, StringComparison.InvariantCultureIgnoreCase);
    }

    public override bool Equals(object obj)
    {
        Person other = obj as Person;
        if(other==null){return false;}
        return Equals(other);
    }

    public override int GetHashCode(){return pName.GetHashCode();}

    public override string ToString(){return pName;}
} 
```

所以，让我们在另一个类或主函数中定义：

```
HashSet<Person> set = new HashSet<Person>();
set.Add(new Person("Smith"); // return true
Person p = new Person("Smi");
set.Add(p); // return true
p.Name = "Smith"; // no error occurs 
```

现在，您在 HashSet 中有两个同名的 Person 对象（因此，有“Equals”）。

HashSet 让我们放置重复的对象。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T18:00:52.643

> HashSet 让我们放置重复的对象。

它不允许您放入重复的对象。问题是您在添加对象后对其进行了*变异。*

变异对象被用作字典中的键或存储为哈希值总是有问题的，我建议避免这样做。

# http - CentOS VirtualBox 5 秒的 http 请求延迟

> ID：12751597
> 
> 赞同：10
> 
> 时间：2012-10-05T17:57:40.710
> 
> 标签：http, centos, virtualbox, latency, vagrant

我在我的 OSX 10.8.2 机器上的 VirtualBox 4.2.1 内运行 centos 6.3，遇到了我不理解的延迟问题。基本上，对任何地方的每个 http 请求都有额外的 5000 毫秒延迟。Ping 没有额外的延迟。

![延迟问题的屏幕截图](../Images/eb20092bc8ea4939ccef1b5402500092.png)

```
[vagrant@localhost ~]$ curl -o /dev/null https://google.com -w ""
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
110   220  110   220    0     0     42      0  0:00:05  0:00:05 --:--:--  7586
[vagrant@localhost ~]$ curl -o /dev/null https://google.com -w ""
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
110   220  110   220    0     0     42      0  0:00:05  0:00:05 --:--:--  7586
[vagrant@localhost ~]$ curl -o /dev/null https://google.com -w ""
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
110   220  110   220    0     0     42      0  0:00:05  0:00:05 --:--:--  7857
[vagrant@localhost ~]$ ping google.com
PING google.com (74.125.224.66) 56(84) bytes of data.
64 bytes from nuq04s07-in-f2.1e100.net (74.125.224.66): icmp_seq=1 ttl=63 time=7.64 ms
64 bytes from nuq04s07-in-f2.1e100.net (74.125.224.66): icmp_seq=2 ttl=63 time=6.26 ms
64 bytes from nuq04s07-in-f2.1e100.net (74.125.224.66): icmp_seq=3 ttl=63 time=8.69 ms
64 bytes from nuq04s07-in-f2.1e100.net (74.125.224.66): icmp_seq=4 ttl=63 time=7.89 ms
64 bytes from nuq04s07-in-f2.1e100.net (74.125.224.66): icmp_seq=5 ttl=63 time=5.99 ms
64 bytes from nuq04s07-in-f2.1e100.net (74.125.224.66): icmp_seq=6 ttl=63 time=8.64 ms 
```

作为记录，我在同一个 VirtualBox/OSX 环境中有一个 ubuntu 12.04.1 虚拟机，没有遇到这个问题。

![非延迟问题的屏幕截图](../Images/40ccb8db2e3aeae15e37a4b149473663.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T18:17:04.633

好的，事实证明问题是 DNS 问题。

基本上 CentOS VirtualBox 被配置为使用一个 10.0.2.3 的 DNS 服务器，该服务器是其内部的，但可能与我们网络上的某些东西发生冲突。

无论如何，使用不同的 DNS 服务器解决了这个问题。

# java - 在 ANTLR AST 中保留生产订单

> ID：12751598
> 
> 赞同：2
> 
> 时间：2012-10-05T17:57:42.817
> 
> 标签：java, antlr, grammar, abstract-syntax-tree

对于像这样的语法，如何保留产生式出现的顺序。

```
class: 'class' ID 
        '{' (fields 
         | methods) * '}'         -> ^(CLASS ID ^(FIELD fields*) ^(METHOD methods) 
         ; 
```

生产按我的预期工作，但如果有这样的课程

```
class abc {
   field 1 
   field 2
   method 1
   method 2
   field 3
   method 3
   field 4
} 
```

所有字段都在单个列表中，方法在第二个列表中。保持秩序的正确方法是什么？我试着做..

```
class: 'class' ID 
        '{' (fields               -> ^(FIELD fields)
         | methods                -> ^(METHOD methods)
         )* '}'                   -> ^(CLASS ID $class)
         ; 
```

我什至尝试在两者之间插入一个假头，但没有成功。

```
class: 'class' ID 
        '{' (fields 
         | methods) * '}'         -> ^(CLASS ID ^(FIELD fields*) ^NODE ^(METHOD methods) 
         ; 
```

但这没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T20:16:37.380

在第一种情况下，节点包含`CLASS`一系列`FIELD`节点（`FIELD fields*``METHOD``METHOD methods*``field``method`

```
-> ^(CLASS ID ^(FIELD fields*) ^(METHOD methods) 
```

你没有提到第二种和第三种方法产生了什么，但它可能不如第一种理想。

`body`改用表达式尝试以下方法：

```
grammar temp;
options {output=AST;}
tokens { KLASS; FIELD; METHOD; }

klass   :   'class' ID body -> ^(KLASS ID body)
        ;

body    :   '{'!
                (field | method) *
            '}'! 
        ;

field   : 'field' INT -> ^(FIELD INT)
        ;

method  : 'method' INT -> ^(METHOD INT)
        ;

ID      : ('a'..'z')+;
INT     : ('0'..'9')+;
WS      : (' '|'\r'|'\n')+ {$channel = HIDDEN;} ; 
```

您将获得以下 AST 结果：

```
-KLASS
   -abc
   -FIELD
      -1
   -FIELD
      -2
   -METHOD
      -1
   -METHOD
      -2
   -FIELD
      -3
   -METHOD
      -3
   -FIELD
      -4 
```

如果您想使用 ANTLRWorks 测试语法，请使用它打开（或创建）语法：

![在此处输入图像描述](../Images/5599a6157ea2e19e87c022d277fd929a.png)

并按`CTRL`+`D`启动调试器（不要使用解释器，它有问题！）：

![在此处输入图像描述](../Images/72adb0c819c50a993fef8dfce091a01b.png)

将您的输入粘贴到弹出的窗口中，并确保您选择了正确的开始生产规则（`klass`在本例中为 ）。然后按`OK`。

启动调试器后，按*end-arrow*按钮`>|`解析输入，然后单击`AST`按钮查看解析器创建的 AST 的样子：

![在此处输入图像描述](../Images/b656d55d86f2ec346b7c37368a59c0d8.png)

# php - PHP计数器，获取计数

> ID：12751600
> 
> 赞同：0
> 
> 时间：2012-10-05T17:57:53.083
> 
> 标签：php, javascript, jquery, ajax, get

我已经设置了一个 php 计数器，该计数器通过使用脚本元素并在 url 上设置参数插入到一个完全不同的服务器/网站上的网页中。计数文件保存为 PARAMETER.txt 。如何检索计数并将其插入外部网页？我曾尝试使用 jQuery $.ajax $.get 等加载 txt 文件，但它们不起作用。如何从具有唯一参数的 php 文件或 txt 文件中获取计数？

```
<?php
$id = $_REQUEST['id'];
$post = $_REQUEST['post']; 
if (!is_dir($id)) {
    mkdir($id);
}
if (!empty($post)) {
    if(!file_exists($id.'/'.$post.'.txt')) { 
        $fp = fopen($id.'/'.$post.'.txt',"w");  
        fwrite($fp,"1");  
        fclose($fp); 
    } else {
        $hit_count = @file_get_contents($id.'/'.$post.'.txt');
        echo $hit_count;
        $hit_count++;
        @file_put_contents($id.'/'.$post.'.txt', $hit_count);
    }
} else {
    echo "no post id";
}  
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:03:16.393

我刚在大学电脑上试过这个。这个“错误”似乎是由于服务器的配置方式造成的。您的代码在我自己的 apache 上按预期返回一个数字，但是当我在远程主机上执行相同操作时，响应为 200 ok，但响应文本中没有任何内容。我的猜测是您的服务器未配置为响应这样的外部调用。

# java - 数组列表重复值

> ID：12751603
> 
> 赞同：0
> 
> 时间：2012-10-05T17:57:56.110
> 
> 标签：java, arrays, arraylist

请帮我处理我的代码。我正在使用一个名为 tempAns 的数组列表，它包含值 [2, 9, 2]。我尝试添加最后两个数字，然后用正确的答案替换它们，因此结果将是 [2, 11]。但不知何故，输出总是 [9, 11]。似乎它正在删除重复的值。

```
 else if(scan.equals("+"))
            {
                double num2 = Double.parseDouble(tempAns.get(tempAns.size()-1));
                double num1 = Double.parseDouble(tempAns.get(tempAns.size()-2));
                double ans = num1 + num2;
                String stringAns = Double.toString(ans);
                System.out.println("before deleting: " +tempAns + "\n");

                tempAns.remove(tempAns.get(tempAns.size()-1));
                tempAns.remove(tempAns.get(tempAns.size()-1));

                System.out.println("before adding: " +tempAns);
                tempAns.add(stringAns);
                System.out.println(num1 + " + " +num2+ " = " +ans);
                System.out.println("after deleting: " +tempAns + "\n");
            } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T18:05:37.310

该`remove()`方法使用该`equals()`方法来查找应该删除哪个对象。然后

```
 tempAns.remove(tempAns.get(tempAns.size()-1)); 
```

方法

```
 tempAns.remove(2); 
```

并且第一个元素与等号匹配，列表带有`[9, 2]`. 然后，再次调用`tempAns.remove(tempAns.get(tempAns.size()-1));`，将删除另一个`2`，列表将是`[9]`。

您可以使用该`remove(index)`方法或使用`LinkedList`替代`ArrayList`，并调用该`removeLast()`方法两次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:04:51.070

```
tempAns.remove(tempAns.get(tempAns.size()-1));
//above remove is evaluated to 
tempAns.remove(2);  // Removes the 2 at index 0 
```

问题是，您首先获取索引 2.. 处的值，即 2。现在您要删除值 2，这实际上删除了`2`索引 0..

您应该按索引删除：-

```
tempAns.remove(tempAns.size()-1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T18:05:03.337

```
 tempAns.remove(tempAns.get(tempAns.size()-1)); You shold do below
 tempAns.remove(tempAns.size()-1); //remove last
 tempAns.remove(tempAns.size()-1); //remove second last 
```

原因是`tempAns.get(tempAns.size()-1)`返回`2`，它也在开始，所以 remove 将`2`在开始时删除。

[公共布尔删除（对象o）](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#remove%28java.lang.Object%29)

> 从此列表中删除第一次出现的指定元素（如果存在）。如果列表不包含该元素，则它不变。更正式地说，删除具有最低索引 i 的元素，使得 (o==null ? get(i)==null : o.equals(get(i))) （如果存在这样的元素）。如果此列表包含指定的元素（或等效地，如果此列表因调用而更改），则返回 true。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T18:08:36.310

使用`tempAns.remove(tempAns.size()-1)`而不是使用`tempAns.remove(tempAns.get(tempAns.size()-1));`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T18:11:37.497

问题是您在使用时使用的是从 AbstractCollection 继承的 remove 方法：`tempAns.remove(tempAns.get(tempAns.size()-1));`。根据您的描述，您需要从 ArrayList 中删除，即使用索引，因此您应该将调用更改为：`tempAns.remove(tempAns.size()-1);`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-05T18:12:19.957

要考虑的一件事是，您可以合并检索 num1 和 num2 的位置以及删除它们的位置，如下所示：

```
 System.out.println("before deleting: " +tempAns + "\n");
        double num2 = Double.parseDouble(tempAns.remove(tempAns.size()-1));
        double num1 = Double.parseDouble(tempAns.remove(tempAns.size()-1));
        double ans = num1 + num2;
        String stringAns = Double.toString(ans);

        System.out.println("before adding: " +tempAns);
        tempAns.add(stringAns);
        System.out.println(num1 + " + " +num2+ " = " +ans);
        System.out.println("after deleting: " +tempAns + "\n"); 
```

前面的代码解决了您遇到的问题，并且可能更容易理解，因为您没有尝试跟踪项目在列表中的偏移量。这更接近于从堆栈中弹出列表，然后在计算值时将其推回。

# windows-8 - 使用 WinJs.XHR 调用服务时出错

> ID：12751605
> 
> 赞同：0
> 
> 时间：2012-10-05T17:58:08.653
> 
> 标签：windows-8, microsoft-metro, winjs, windows-store

我正在尝试在 Windows 8 应用程序中使用 WinJs.XHR 调用 Web 服务；当我不使用防火墙时，代码工作正常；但是，当我使用防火墙时，出现以下错误：

```
**Forbidden ( Forefront TMG denied the specified Uniform Resource Locator (URL).  )** 
```

任何线索？

```
 WinJS.Promise.timeout(50000, WinJS.xhr({
        url: "<Service_URL>"

    })
        .then(function (rss) {

        }, function (onRError) {

            });
        },
        function progress(result) {

        }) ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:41:32.523

如果不查看 URL，这可能很难确定。我敢打赌 URL 中的一个字符被防火墙拒绝了。您可以使用[Fiddler](http://www.fiddler2.com/fiddler2/)查看防火墙关闭/打开时的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T14:50:58.763

问题不存在了，我所做的只是添加了互联网（客户端/服务器）和专用网络，然后他们删除了它们。

不确定是代码还是 ISA server/client 的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T13:57:58.160

您可能需要查看此处描述的企业身份验证功能：

[http://msdn.microsoft.com/en-us/library/windows/apps/hh464936.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh464936.aspx)

我没有使用它，但它可能会给你你需要的东西。

# git - 计算每个作者在特定文件夹中创建的特定类型的数量

> ID：12751606
> 
> 赞同：0
> 
> 时间：2012-10-05T17:58:11.163
> 
> 标签：git

例如，当我需要计算每个作者在 git 存储库的特定文件夹中创建（作者，而不是提交者）的 .py 文件的数量时？反正有存档吗？
谢谢你。

# objective-c - 我的应用程序应该在 iOS 上的哪里存储大量 PDF 文件？

> ID：12751609
> 
> 赞同：5
> 
> 时间：2012-10-05T17:58:37.730
> 
> 标签：objective-c, ios, core-data, nsfilemanager

我正在编写一个 iOS iPad 应用程序，它将从网上下载数百个大型 PDF 文件并将它们缓存在 iPad 上以供离线使用。

在 iPad 上存放它们的最佳位置在哪里？本地文件系统、核心数据或其他地方？我计划将核心数据用于索引和搜索机制（使用缩略图等），并且仅在用户特别请求完整文档时才访问 PDF 文档。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T18:17:11.063

这样做的最佳位置是*Documents*目录或*Cache*目录。*Documents*目录中的文档应该是*用户生成的*内容，所以我相信这不是您要查找的内容。

相反，我认为您应该使用*Cache*目录，您可以使用以下方法访问该目录：

```
- (NSString *)cacheDirectory {
{
    NSArray *pathList = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *path    = [pathList objectAtIndex:0];
    return path;
} 
```

请注意，如果设备上没有足够的空间，系统可能会清空*Cache目录。*以我的经验，这几乎不会发生，但如果您想绝对、绝对地确保文件永远不会被删除，您可能希望将文档存储在*Cache*以外的*Library目录的子目录中。*

 *在这种情况下，您*必须*在目录和文件上都设置`do not backup`标志，否则您的应用程序*将*被拒绝。

有关官方信息，请参阅[Apple 指南](https://developer.apple.com/icloud/documentation/data-storage/)（需要开发者帐户）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:20:14.813

我会将 PDF 保存在 Documents 文件夹下。并创建一个核心数据 sqlite 数据库。创建一个可能包含三个属性的核心数据实体：thumbNail、localURL 和 title。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T18:14:00.523

您应该将它们保存在 /documents 文件夹中。该文件夹的目的正是为了存储无法重新下载（或太大而无法重新下载）的数据。如果是临时数据或您可以轻松重新下载的数据，Apple 建议改用 /cache 文件夹。

您可以使用特定名称保存文件，只需将该名称保存在 CoreData 中即可找到它们。*

# javascript - jquery ui可拖动手风琴棒在Chrome中的鼠标

> ID：12751611
> 
> 赞同：1
> 
> 时间：2012-10-05T17:58:45.110
> 
> 标签：javascript, jquery-ui, google-chrome

我正在一个 jquery ui 网站上工作，并且有一个可拖动的手风琴 div，当鼠标只粘在滚动条上时，它会出现奇怪的行为。

```
$("#item_accordion").draggable(); 
```

这种行为似乎只发生在陌生的谷歌浏览器中。我最终可以通过右键单击并快速移动鼠标来让鼠标松开手风琴。我很好奇是否有人对此问题有经验并希望有解决方案。

非常感谢，德里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:01:19.290

我有同样的问题。不幸的是，我不知道是什么原因造成的，因为我不想深入研究 JQuery，但我能够通过为我的可拖动对象指定一个“句柄”来解决它。“手柄”是唯一可以启动拖动的地方，因为我的“手柄”不包含滚动条，所以我不再遇到这个问题。

```
$('#overlays_dialog').draggable({handle: '.dialog-header'}); 
```

overlays_dialog 是一个 div，其中包含一个具有“.dialog-header”类的子 div。

# knockout.js - 淘汰赛js根据属性值更新可见性

> ID：12751619
> 
> 赞同：0
> 
> 时间：2012-10-05T17:59:10.630
> 
> 标签：knockout.js

我正在从这样的 Web API 加载数据：

```
$.getJSON("/api/Rule", function (rules) {
    self.Rules(rules);
}); 
```

然后我`Rules`使用 foreach 绑定绑定到一个表。每个`Rule`都有属性：`Keyword`、`Attribute`和`Value`。

我想检查是否`Keyword`是某个控制某些控件可见性的值。

```
data-bind="options: viewModel.Attributes, visible : Keyword != 'Else'" 
```

问题是当我将 的值更改为`Keyword`不同的值时，可见性没有更新。

我怎样才能让它工作？

如果它应该通过某种绑定，我没有在我的视图模型中声明一个特殊的对象，我只是使用从服务器返回的任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T03:16:14.300

坦率地说，您*必须*将您的对象映射到可观察对象。这就是淘汰赛能够发挥其魔力的方式。使用[映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)将使这变得微不足道。

```
$.getJSON("/api/Rule", function (rules) {
    var mappedRules = ko.mapping.fromJS(rules);
    self.Rules(mappedRules);
}); 
```

否则，您可以自己映射它。

```
$.getJSON("/api/Rule", function (rules) {
    var mappedRules = ko.utils.arrayMap(rules, function (rule) {
        return {
            Keyword: ko.observable(rule.Keyword),
            Attribute: ko.observable(rule.Attribute),
            Value: ko.observable(rule.Value)
        };
    });
    self.Rules(mappedRules);
}); 
```

请记住，您现在正在处理可观察对象，因此您需要调整绑定。

```
data-bind="options: viewModel.Attributes, visible : Keyword() != 'Else'" 
```

# java - 控制台上的光标似乎滞后

> ID：12751620
> 
> 赞同：1
> 
> 时间：2012-10-05T17:59:10.850
> 
> 标签：java, multithreading, cursor, lag

我一直在用 java 编写一个基于文本的视频游戏（我是 java 新手，顺便说一句），它没有我一直希望的性能，特别是语音。我希望文本看起来好像这个人在说话（我不希望它一次出现，只是一个字符一个字符地出现）。我用这段代码实现了效果：

```
void speak(String speak){
    for(int x = 0; x < speak.length(); x++){
        System.out.print(speak.charAt(x));
        pause(talkSpeed);
    }
} 
```

talkSpeed 是对象说话的速度。pause 是我为使 Thread.sleep 更容易而制作的函数。一直懒得写try catch。我对这段代码的唯一问题是它不能非常顺利地打印到控制台。它看起来很生涩，好像有点滞后。看起来它是逐字打印世界而不是逐字打印。我不明白为什么，这是一段相当简单的代码。也许是暂停，我应该只使用 Thread.sleep。另外，我想知道如何使光标跟随文本。

或者我应该用 C++ 重写它来获得性能提升？我知道大约相同数量的 C++

```
void pause(double time){
    long y = (long) (1000 * time);
    try {
        Thread.sleep(y);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
} 
```

有人要求提供暂停功能的代码，所以在这里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:04:54.800

我相信 System.out 已缓冲，请尝试在暂停前调用 System.out.flush() 。

# android - 如何使俄语数量字符串正常工作？

> ID：12751622
> 
> 赞同：6
> 
> 时间：2012-10-05T17:59:29.977
> 
> 标签：android

我遇到了数量字符串（复数）的问题。

[手册上说](http://developer.android.com/guide/topics/resources/string-resource.html#Plurals)，我可能会为每个本地化提供特定的数量字符串，并且有几种常见的情况：“零”、“一”、“二”、“少”、“多”和“其他”。我不知道是否涵盖了世界上所有语言的所有可能案例；无论如何，对于我正在尝试进行本地化的俄语来说，这已经绰绰有余了。

在俄语中，从 2 到 4 的数字应该被视为“少数”（规则实际上更复杂，但我只需要 10 以下的数字）。

但是，当我请求 2 的数量字符串时，系统会采用“其他”字符串。它既不需要“两个”字符串，也不需要“很少”一个（我在我的资源中提供了它们）。如果我删除了“其他”字符串，我会得到异常：

```
android.content.res.Resources$NotFoundException: 
    Plural resource ID #0x7f080000 quantity=2 item=other 
```

我在模拟器（Android 2.1）和真实设备（Android 2.3）上都试过了，这两种情况下的行为都是错误的。显然，某处存在错误 - 系统无法识别我的语言的特定于区域设置的数量。难道Android在这里有一些错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T18:03:33.453

我相信这目前在Android中被打破了。

[http://code.google.com/p/android/issues/detail?id=8287](http://code.google.com/p/android/issues/detail?id=8287)

具体来说，PluralRules.java 中的以下代码表明大多数语言只使用`one`or`other`字符串，但捷克语将使用`few`字符串：

```
static final PluralRules ruleForLocale(Locale locale) {
    String lang = locale.getLanguage();
    if ("cs".equals(lang)) {
        if (cs == null) cs = new cs();
        return cs;
    }
    else {
        if (en == null) en = new en();
        return en;
    }
}

private static PluralRules cs;
private static class cs extends PluralRules {
    int quantityForNumber(int n) {
        if (n == 1) {
            return QUANTITY_ONE;
        }
        else if (n >= 2 && n <= 4) {
            return QUANTITY_FEW;
        }
        else {
            return QUANTITY_OTHER;
        }
    }
}

private static PluralRules en;
private static class en extends PluralRules {
    int quantityForNumber(int n) {
        if (n == 1) {
            return QUANTITY_ONE;
        }
        else {
            return QUANTITY_OTHER;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-06T07:05:10.030

感谢[Brigham](https://stackoverflow.com/users/164553/brigham)指出了[问题](http://code.google.com/p/android/issues/detail?id=8287)所在的问题；这种解释首先引发了更多问题，但现在它们似乎得到了解决。确实，数量字符串不能正常工作（至少在 API 11 之前，即 Android 3.x 之前），因此您必须使用替代方法。

[注释 15](http://code.google.com/p/android/issues/detail?id=8287#c15)中提到了版本 11 之前的 API 解决方案，其中包含指向[项目的链接，用于替代处理数量字符串](http://code.google.com/p/android-i18n-plurals/)。该项目是一个程序，它只是做系统应该做的事情。它可以轻松转换为库，因此您只需将其添加到项目中，导入类即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-25T13:10:40.893

1.  **在values-ru/strings.xml**中定义您的复数字符串，而不是在**values/strings.xml中**
2.  将您的移动设备语言设置为俄语（从设置->语言和输入->语言->选择俄语）

**如果您的语言不是俄语，它将从 values/strings.xml 中获取复数字符串**

# jakarta-ee - 为什么即使抛出异常，我的 JPA 对象更改也会被写入？

> ID：12751623
> 
> 赞同：0
> 
> 时间：2012-10-05T17:59:34.283
> 
> 标签：jakarta-ee, jpa

我有一个 Java EE Web 应用程序，如下所示：

```
UserService.java -> UserDAO.java -> Oracle db 
```

对象 User.java 是一个 JPA 对象。

在 UserService 中，假设我有一个类似这样的方法：

```
public User updateLastName(Long userId, String lastName) throws Exception {
    User u = this.getUser(userId);
    u.setLastName(lastName);
    if (lastName.equals("Jones")) {
       throw new Exception("No Jones allowed!");
    }
    this.updateUser(u);
} 
```

我遇到的问题是，抛出异常，但姓氏“Jones”仍在写入数据库。

我究竟做错了什么？

# algorithm - 如何将数字编码为字符串，以使生成的字符串的字典顺序与数字顺序相同

> ID：12751624
> 
> 赞同：1
> 
> 时间：2012-10-05T17:59:34.283
> 
> 标签：algorithm, lexicographic

例如。如果我们有两个字符串 2 和 10，如果我们按字典顺序排序，那么 10 会排在第一位。

最简单的方法是重复一个字符 n 次。

```
eg. 2 can be encoded as aa

10 as aaaaaaaaaa

This way the lex order is same as the numeric one. 
```

但是，有没有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T18:02:11.753

将数字转换为字符串时，确保所有字符串的长度相同，必要时在前面附加 0。所以 2 和 10 将被编码为“02”和“10”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T21:19:05.477

虽然 kjampani 的解决方案在普通应用程序中可能是最好和最简单的，但另一种更节省空间的方法是在每个字符串前面加上自己的长度。当然，您需要以一种一致排序的方式对长度进行编码。

如果您知道所有字符串都很短，您可以将它们的长度编码为固定长度的 base-X 序列，其中 X 是您愿意使用的字符代码数（常用值是 64、96、255 和256.) 请注意，您必须按字典顺序使用字符代码，因此正常的 base64 将不起作用。

一种可变长度的保序编码是 UTF-8 使用的编码。（不是直接使用 UTF-8，它有一些会妨碍的极端情况，但相同的编码技术。UTF-8 的顺序保留属性有时非常有用。）此类压缩代码的全部范围可以编码长达 42 位的值，平均每个字节有 5 个有效负载位。这对于相当长的字符串来说已经足够了；4 TB 长的字符串在野外非常罕见；但如果您需要更长的时间，也可以通过将大小前缀扩展超过一个字节。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-05T18:29:27.980

将字符串分解为连续的字母和数字子字符串，然后通过将每个子字符串作为整数进行比较（如果它是数字字符串）进行排序

“aaa2” ---> aaa + 2

“aaa1000” ---> aaa + 1000

aaa == aaa

由于它们是平等的，我们继续：

1000 > 2

因此，aaa1000 > aaa2。

# php - 为什么这段代码不能将可排序列表保存到新的 xml 页面？

> ID：12751626
> 
> 赞同：0
> 
> 时间：2012-10-05T17:59:51.457
> 
> 标签：php, jquery, sorting, save

我正在使用 Jquery UI 的可排序代码从外部页面加载 li 元素。在用户重新排序这些元素后，我想将订单保存到同一个外部页面。我做错了什么？

这是相关的Javascript：

```
<script>

    $(document).ready(function(){
    $('#sortable').sortable({
        update: function(event, ui) {
            var newOrder = $('#sortable').sortable.toString();
            $.post('preview.php', {order:newOrder});
        }
    });
});

</script> 
```

这是PHP：

```
<?php

$neworder = $_POST('order');
file_put_contents('file.xml', $neworder);

?> 
```

这是HTML：

```
 </div>
    <div id="tabs-2">

     <ul id="sortable">

  // populated via $("#sortable").load("file.xml"); //

        </ul>

    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:01:48.247

```
$_POST['order']; 
```

不是`$_POST('order');`

`$_POST`是一个环境后变量数组..你想访问它的索引..

# c# - 无需在 C# 中重新编译即可更改数据

> ID：12751628
> 
> 赞同：4
> 
> 时间：2012-10-05T17:59:59.367
> 
> 标签：c#

我正在编写一个将在服务器上持续运行的程序。我希望能够更改一些输入而不需要重新编译的硬编码。

我知道这可以通过使用文本文件来完成，但是我不想为每个值都有一个文本文件。

我也知道我可以使用一个表格，但我也不希望这个程序有一个只有一行的表格。

还有其他解决方案吗？

正如您可能猜到的那样，我是 .NET/C# 世界的新手，所以如果这是一个太基本的问题，请原谅。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T18:02:52.053

使用[app.config的](http://msdn.microsoft.com/en-us/library/ms184658.aspx)[appsettings](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.appsettings.aspx)部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-05T18:06:14.017

根据您要完成的任务，[应用程序设置](http://msdn.microsoft.com/en-us/library/a65txexh.aspx)也可能满足您的需求。这些存储在客户端计算机上。例如，您可以在此处保存用户设置。

我的首选是大多数情况下是 App.config（ASP.NET 中的 Web.config），但正如其他回复所建议的那样。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T18:03:37.060

听起来您需要一个或多个配置文件，C# 内置了对 XML 格式的配置文件的支持，`App.Config`该访问点位于`System.Configuration.ConfigurationManger.AppSettings`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-05T18:30:14.737

你有很多可能性：

*   具有分隔值的文本文件
*   带有元素值的 XML 文件
*   如果您的程序是 ASP.NET，则为 Web.config
*   应用程序配置
*   数据库（但不是你的情况）
*   从另一个程序到 Web 服务（也许矫枉过正）
*   html 中的硬编码值（非编译文件）

最简单的是 Web.config 或 App.config，因为当您需要这些值时，.net 已经为您提供了工具：ConfigurationSettings.AppSettings["Key"];

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-05T18:03:49.227

不太清楚您要完成什么，但是如果我理解得很好，您希望程序中的值可以动态更改。如果是这种情况，您可以使用 XML 配置 System.Xml 命名空间中的 XmlReader 和 XmlWriter 类。

# iphone - sqlite3 查询适用于 cmd 行，但在 iOS 6 模拟器中不返回任何数据

> ID：12751629
> 
> 赞同：1
> 
> 时间：2012-10-05T17:59:59.210
> 
> 标签：iphone, ios, xcode, sqlite

我在 iPad 的 iOS 6 应用程序中使用了这个 sqlite3 表：

```
CREATE TABLE notes(id INTEGER PRIMARY KEY, note TEXT, noteDate TEXT, wasUploaded INTEGER); 
```

从 sqlite3 命令行，此查询有效：

```
sqlite> Select `id`,`note`,`noteDate`,`wasUploaded` FROM `notes` WHERE `wasUploaded`=0;

1|Well|2012-10-04 22:46:23|0 
```

在 iOS iPad 6.0 模拟器上，这些查询中的每一个都返回与上面完全相同的数据：

```
const char *sqlStatement = "Select `id`,`note`,`noteDate`,`wasUploaded` FROM `notes` WHERE `id`=1";

const char *sqlStatement = "Select `id`,`note`,`noteDate`,`wasUploaded` FROM `notes` WHERE `note`='Well'";

const char *sqlStatement = "Select `id`,`note`,`noteDate`,`wasUploaded` FROM `notes` WHERE `noteDate`='2012-10-04 22:46:23'"; 
```

但是这个在命令行上运行良好的查询现在不返回任何数据：

```
const char *sqlStatement = "Select `id`,`note`,`noteDate`,`wasUploaded` FROM `notes` WHERE `wasUploaded`=0"; 
```

有没有让我困惑。为什么最后一个查询不起作用？我是否需要将该列设为索引或其他内容？其他两个非索引列有效，但不是这个。

没有错误。最后一个不返回数据的查询给出的正常返回码为 101（sqlite3_step() 已完成执行），没有 where 子句的查询返回与其他三个查询相同的数据。

编辑：这是完整的代码

```
- (NSString *)getNotesToBeUploaded {
sqlite3 *stuDb;
NSString *thisNote;
NSMutableString *notes = [[NSMutableString alloc]init];

if (self.filePath == @"empty") {
    [self setDatabaseFilePath];
}

if (sqlite3_open([self.filePath UTF8String], &stuDb) == SQLITE_OK)
{
    // this is the query line that get changed to show stackoverflow the different results:
    const char *sqlStatement = "Select `id`,`note`,`noteDate` FROM notes WHERE `wasUploaded`=0";
    sqlite3_stmt *compiledStatement;
    int nResult = sqlite3_prepare_v2(stuDb, sqlStatement, -1, &compiledStatement, NULL);
    if ( nResult == SQLITE_OK)
    {
        int nret; // diagnostic used to watch return vaues when single stepping
        while ((nret = sqlite3_step(compiledStatement)) == SQLITE_ROW)
        {
            int id =  sqlite3_column_int(compiledStatement, 0);
            const unsigned char *note =  sqlite3_column_text(compiledStatement, 1);
            const unsigned char *noteDate =  sqlite3_column_text(compiledStatement, 2);
            int wu =  sqlite3_column_int(compiledStatement, 4);
            if (strlen((const char *)note) > 0 && strlen((const char *)noteDate) > 0)
            {
                thisNote = [NSString stringWithFormat:@"%d,%s,%s,%d\n",id, noteDate, note, wu];
                [notes appendString:thisNote];
            }
        }
    } else {
        sqlite3_finalize(compiledStatement);// prevent small memory leaks
        sqlite3_close(stuDb);
        thisNote =
        [NSString stringWithFormat:@"prepare failed with status:%d in %s at line %d path was %@,0,0\n",nResult,__FILE__,__LINE__,self.filePath];
        [notes appendString:thisNote];
        [notes appendString:@"\n"];
        return (NSString *)notes;
    }
    sqlite3_finalize(compiledStatement);
    sqlite3_close(stuDb);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:33:23.237

您是否正在检查`sqlite3`电话的返回码？并且，如果您没有得到`SQLITE_OK`或`SQLITE_ROW`，则应酌情检查`sqlite3_errmsg`结果以诊断发生了什么。如果您希望我们帮助您，您真的应该分享您的代码。但首次使用 iOS SQLite 应用程序中最常见的问题是

*   未能将数据库包含在您的应用程序包中。检查您的目标设置并确保您已将数据库包含在`Build Phases`. `~/Library/Application Support/iPhone Simulator`您还可以通过在文件夹中的模拟器中查看您的应用程序包来确认这一点。如果您想这样做，您可能需要通过在终端命令行界面中`~/Library`输入来取消隐藏您的文件夹。`chflags no hidden ~/Library`

*   如果您计划从应用程序更新数据库，则`Documents`在尝试开始使用它之前未能先将数据库从捆绑包复制到文件夹。

*   使用`sqlite3_open`并解释成功的返回码作为数据库已成功打开的证据......但是如果它没有找到数据库，该`sqlite3_open`函数会烦人地创建一个新的空白数据库......我总是建议人们`sqlite3_open_v2`改用，其中如果没有找到它，如果这不是您想要的，您可以省略该参数以创建一个空白数据库。

当然，也可能存在大量与代码相关的问题（调用函数的顺序、未能检查返回码等）。没有看到代码就不可能进一步评论。

我觉得有义务分享我最后的 SQLite 编程建议，值得一[试 FMDB Objective-C SQLite 包装库](https://github.com/ccgus/fmdb)，它极大地简化了 iOS 中的 SQLite 编程。

* * *

**更新：**

查看您的代码后，它看起来不错。我只是运行它（仅调整为只是`NSLog`而不是附加注释）：

```
- (void)test2
{
    sqlite3 *stuDb;
    NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSString *databaseName = [documentsDirectory stringByAppendingPathComponent:@"test.db"];

    if (sqlite3_open([databaseName UTF8String], &stuDb) == SQLITE_OK)
    {
        // this is the query line that get changed to show stackoverflow the different results:
        const char *sqlStatement = "Select `id`,`note`,`noteDate` FROM notes WHERE `wasUploaded`=0";
        sqlite3_stmt *compiledStatement;
        int nResult = sqlite3_prepare_v2(stuDb, sqlStatement, -1, &compiledStatement, NULL);
        if ( nResult == SQLITE_OK)
        {
            int nret; // diagnostic used to watch return vaues when single stepping
            while ((nret = sqlite3_step(compiledStatement)) == SQLITE_ROW)
            {
                int id =  sqlite3_column_int(compiledStatement, 0);
                const unsigned char *note =  sqlite3_column_text(compiledStatement, 1);
                const unsigned char *noteDate =  sqlite3_column_text(compiledStatement, 2);
                int wu =  sqlite3_column_int(compiledStatement, 4);
                if (strlen((const char *)note) > 0 && strlen((const char *)noteDate) > 0)
                {
                    // thisNote = [NSString stringWithFormat:@"%d,%s,%s,%d\n",id, noteDate, note, wu];
                    // [notes appendString:thisNote];
                    NSLog(@"%d,%s,%s,%d\n",id, noteDate, note, wu);
                }
            }
        } else {
            //sqlite3_finalize(compiledStatement);// prevent small memory leaks, not needed if the prepare failed
            sqlite3_close(stuDb);
            NSLog(@"prepare failed with error %s", sqlite3_errmsg(stuDb));
            return;
        }
        sqlite3_finalize(compiledStatement);
        sqlite3_close(stuDb);
    }
} 
```

我得到了结果：

```
2012-10-05 15:44:06.075 test8[1574:c07] 1,2012-10-05 19:43:37,ABC,0
2012-10-05 15:44:06.076 test8[1574:c07] 2,2012-10-05 19:43:46,XYZ,0 
```

所以问题一定出在数据库本身。从您上一条评论来看，听起来重建数据库是为您完成的。那太棒了。

# cocoa-touch - 视图控制器中有太多方法，但不知道要创建哪些其他类或将哪些方法移到那里

> ID：12751630
> 
> 赞同：1
> 
> 时间：2012-10-05T18:00:02.753
> 
> 标签：cocoa-touch, model-view-controller

我是一个新手，正在开发一个应用程序，该应用程序既显示用户从应用程序附带的集合中随机选择的俳句，又允许他/她编写俳句来添加该集合。它还将用户带到一个网页的网页视图，她/他可以从中购买俳句书籍。问题是，我已经将几乎所有的方法都放在了视图控制器中，而且我觉得好的 MVC 工作会以不同的方式划分它。以下是我的基本方法（为简洁起见，我合并了一些，省略了一些其他方法的子方法，还有 Foundation 和 UIKit 方法），并附有简要说明：

```
GHHaiku.m //This is a model class, or at least I think it is.

-(int)chooseNumber {
returns a random number 
}

-(NSString *)haikuToShow {
uses that number to return haiku from collection
}

GHViewController.m

-(void) viewDidLoad
-(void) viewDidUnload

-(void) clearScreen {
gets rid of all UITextFields and images so that a new set of them can be created, perhaps with different parameters.
}

-(void) saveData {
saves persistent information like whether user has read the instructions
}

-(void)home {
takes user “home” from whatever screen we're in and shows next haiku
}

//--code to set up navBar and Toolbar

-(void)createNavBar:title {
creates and adds buttons to a UINavigationItem with “title” as title and adds UINavigationBar to view
}

-(void) loadToolbar {
loads toolbar at bottom of screen and adds buttons
}

//--code for instructions page

-(void) haikuInstructions {
shows instructions on screen
}

//--code for Amazon page

-(void) loadAmazon {
loads webview of haiku page at amazon.com
}

-(void) webViewDidFinishLoad:(UIWebView)
-(BOOL) webview:(UIWebView) shouldStartLoadWithRequest:(NSURLRequest) navigationType:(UIWebViewNavigationType)
-(void) connectWithURL☹NSString) andBaseURLString: (NSString)
-(BOOL) connection: (NSURLConnection) didFailWithError: (NSError)

-(void) doneWithAmazon {
takes user out of webview Amazon and shows next haiku
}

//--code for compose page

-(void) createSpaceToWrite {
sets up and shows an editable UITextView
}

-(void) userWritesHaiku {
allows user to write haiku
}

-(void) userEditsHaiku {
takes user to edit screen for haiku s/he’s already written.

-(void) userFinishedWritingHaiku {
shows action sheet once user’s done
}

-(void) deleteHaiku {
allows user to delete haiku s/he’s written
}

-(void) saveUserHaiku {
saves user haiku to documents folder
}

-(void) takeToOptOut {
allows user to opt out of sending haiku to central database
}

//--code for sharing

-(void) createImage {
creates image of haiku
}

-(void) showActionSheet {
gives user options to tweet, faceBook, or email
}

-(void) share {
allows user to tweet, email, or facebook that image
}

//--code for display page

-(IBAction)chooseDatabase: (UISegmentedControl) {
allows user to choose whether to see his/her own haiku and/or haiku that come with the application
}

-(void) fadeView {
fades the UISegmentedControl for chooseDatabase
}

-(void) nextHaiku {
shows next haiku
}

-(void) previousHaiku {
shows previous haiku
} 
```

我不得不想象其中一些属于不同的类，但我不知道在 GHViewController 中放置什么以及保留什么。（我认为我的部分困惑是因为“视图控制器”同时包含“视图”和“控制器”，我不明白它是视图、控制器还是两者都不是......）

无论如何，我很喜欢关于我应该创建的其他类以及我应该在其中放入哪些方法的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:12:47.417

这些方法中的大多数都适用于视图控制器（任何“显示”某些东西或用视图做某事的东西）。您可能想要提取管理俳句的逻辑......就像 saveUserHaiku: 和 deleteHaiku: 方法至少应该调用一个模型。然后模型可能会发布通知或回调委托以通知更改的数据......您的视图控制器是该委托或观察者，并且它将适当地响应现在删除的俳句，或者如果有可见的更改则保存的俳句。

nextHaiku 和 previousHaiku 方法在视图控制器中是有意义的，但同样应该调用模型对象来实际检索数据。

模型应该跟踪它正在使用的数据库，因此虽然允许用户选择数据库的代码驻留在视图控制器中，但可用的数据库和选定的数据库来自模型。

此外，您共享事物的代码也可以划分。显示视觉元素和控件的代码应该在视图控制器中，但您可能有一个共享实用程序对象，它知道如何打包数据并将其发送到适当的位置。

# ios - facebook ios sdk 3.1.1 FBSession completionHandler 未删除

> ID：12751635
> 
> 赞同：15
> 
> 时间：2012-10-05T18:00:20.557
> 
> 标签：ios, facebook

当我打开 Facebook 会话时，一切正常，完成块被调用。

```
[FBSession openActiveSessionWithReadPermissions:nil allowLoginUI:allowLoginUI 
completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
                                             NSLog(@"openSession handler");
                                     }]; 
```

但是后来当我要求额外的权限时，两个完成块都被调用，而不仅仅是新的。

```
 [FBSession.activeSession reauthorizeWithReadPermissions:
    [NSArray arrayWithObject:@"user_photos"] 
completionHandler:^(FBSession *session, NSError *error) {
                    NSLog(@"reauthorize handler");
                }]; 
```

这是一个错误还是应该是这样的？我怎样才能避免这种行为？是否可以在调用后删除完成块？

我查看了 Scrumptious 样本，其行为完全相同。当应用程序请求发布权限时，将调用发布完成块并再次调用登录块。

我正在 iOS5 和 Facebook-ios-sdk 3.1.1 上进行测试

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T17:45:06.603

从我可以从 API 中的 Facebook 文档中收集到的信息来看，这是一种预期的行为（恕我直言，这不是好的设计，但这是另一回事）。

completionHandler 参数描述中的片段：

> “...每次会话更改状态时，FBSession 对象都会调用该块”

我无法为您提供修复，但我可以提供一种解决方法：

```
// <Your description of why the workaround is needed.
//
// REF: http://stackoverflow.com/questions/12751635/facebook-ios-sdk-3-1-1-fbsession-completionhandler-not-removed
//
__block BOOL workaroundOneTimeRunFlag = NO;

[FBSession openActiveSessionWithReadPermissions:nil allowLoginUI:allowLoginUI completionHandler:^(FBSession *session, FBSessionState state, NSError *error)
{
    if (!workaroundOneTimeRunFlag)
    {
        workaroundOneTimeRunFlag = YES;

        // Your handler was executed for the first time
        // Run some code...
    }
}]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T20:17:48.400

这不是错误，SDK 有意调用这两个处理程序。如文档中所述[，](https://developers.facebook.com/docs/reference/ios/3.1/class/FBSession#openActiveSessionWithReadPermissions%3aallowLoginUI%3acompletionHandler%3a)只要发生会话状态更改，就会调用 openActiveSession 的处理程序。请求额外权限会将状态更改为 FBSessionStateTokenExtended；因此，第一个处理程序被调用，然后是您在 reauthorizeWithReadPermissions 中提供的显式处理程序：

# model-view-controller - AngularJS 的验证策略

> ID：12751638
> 
> 赞同：7
> 
> 时间：2012-10-05T18:00:30.987
> 
> 标签：model-view-controller, validation, angularjs

我正在评估 AngularJS，到目前为止我对此非常热情。但是在验证方面缺少一些东西：可用的选项，例如[内置机制](http://docs.angularjs.org/guide/forms)和[AngularUI 倡议](http://angular-ui.github.com/)，通过指令实现验证器，因此，每个验证都应该在视图中声明：

```
<form ng-controller="SomeController">
    <!-- Notice the 'required' attribute directive below: -->
    <input type="text" ng-model="user.name" name="uName" required />
</form> 
```

在此示例中，视图正在定义`user.name`所需的内容。这就像说视图定义了模型的正确形状。是不是有点倒退？视图不应该反映状态，包括错误状态吗？

我弄错了吗？我想知道是否可以在**控制器**中应用任何验证器，发出模型数据有效/无效的信号，并相应地更新视图（用红色绘制表单控件，显示错误消息，清除以前的错误等等）。我假设 AngularJS 足够强大，但在文档和示例中，到目前为止我还没有看到像我上面描述的那样。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:59:05.973

我想这都是关于视角的。我看到的方式是，您正在定义一个包含表单的视图，并且该表单包含文本类型的输入。您正在根据需要标记此文本输入。如果您注意到，角度不关心文本是 user.name 还是 user.age 或其他任何内容。它只是将该文本输入与所需相关联。所以它只是验证文本输入和与该模型关联的模型是最终结果（如果验证通过，值进入的地方！）。

看一下

[http://docs.angularjs.org/guide/forms](http://docs.angularjs.org/guide/forms)

对于自定义表单验证，如果您想要进行非默认验证。

由于您已经知道提前生成的视图（让我们在编译时调用它！），您可以关联视图中的所有验证器，因此不必在控制器中执行它（这可能是用于运行时验证！ ）。

# git - 不小心把临时分支推到了origin，想丢弃

> ID：12751640
> 
> 赞同：4
> 
> 时间：2012-10-05T18:00:43.440
> 
> 标签：git, github

我创建了一个本地一次性分支`temp`，不小心调用了

```
git push --all origin 
```

将其添加到我的 github 存储库中。

然后我在本地删除了`temp`分支并做了另一个

```
git push --all origin 
```

但该分支仍然存在于 github 中，尽管不再与 master 分支关联。如何告诉我的远程仓库 git 摆脱`temp`分支？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T18:13:33.433

以下命令将解决您的问题

`git push origin :temp`

该命令必须理解为*“将远程分支替换为`temp`空”*

或者，您也可以执行以下一项，这是上述一项的快捷方式。

`git push --delete origin temp`

有关更多信息，您可以参考**[文档](http://git-scm.com/docs/git-push)**。

# c++ - 使用动态分配的内存（指针）

> ID：12751644
> 
> 赞同：1
> 
> 时间：2012-10-05T18:00:58.680
> 
> 标签：c++, visual-c++, pointers, io, dynamic-memory-allocation

当我尝试学习 C++ 时，我一直在玩指针和动态内存，并且在编译时不断收到此错误。

```
error C2678: binary '>>' : no operator found which takes a left-hand operand of type 'std::istream' (or there is no acceptable conversion) 
```

我的代码如下：

```
int * ageP;    
ageP = new (nothrow) int;

if (ageP == 0)
{
    cout << "Error: memory could not be allocated";
}
else
{
    cout<<"What is your age?"<<endl;
    cin>> ageP;                       <--this is the error line
    youDoneIt(ageP);                                            
    delete ageP;
} 
```

有任何想法吗？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T18:21:52.697

您有指向`ageP`内存的指针，由此调用分配：`ageP = new int;`您可以通过取消引用指针来访问此内存（即通过使用[取消引用运算符](http://en.wikipedia.org/wiki/Dereference_operator): `*ageP`）：

```
 MEMORY
|        |
|--------|
|  ageP  | - - - 
|--------|      |
|  ...   |      |
|--------|      |
| *ageP  | < - -
|--------|
|        | 
```

然后就像你使用变量类型一样`int`，所以在你使用这样的类型变量之前`int`：

```
int age;
cin >> age; 
```

现在它会变成：

```
int *ageP = new int;
cin >> *ageP; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T18:08:25.497

问题是您需要对 int 的引用，而不是 int*。例如

```
int ageP;
cin >> ageP; 
```

因此，删除也是不必要的，因为您不会使用指针。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T18:15:35.763

约翰基本上是正确的，你的问题是提供一个需要引用的指针。

但是，由于您正在尝试了解动态分配，因此使用自动变量并不是一个好的解决方案。相反，您可以使用`*`解引用运算符从指针创建引用。

```
int* ageP = new (nothrow) int;
std::cout << "What is your age?" << std::endl;
std::cin >> *ageP;                                           
delete ageP; 
```

# database - 在 Amazon dynamodb 中设计表格

> ID：12751660
> 
> 赞同：9
> 
> 时间：2012-10-05T18:02:08.387
> 
> 标签：database, database-design, nosql, amazon-dynamodb

我是 DynamoDB 的新手，我有一大堆问题：我的表应该是什么样子。

我已经阅读了这里的帖子：（推荐给尚未阅读的人） [http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/BestPractices.html](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/BestPractices.html)

现在我有一些困境，我认为每个开始使用 DynamoDB 的人都会遇到。

首先，我的表：学生、团队、项目

***学生***： **身份证**，年龄...

**团队**: **id** , student-1-id, student-2-id, current-project, prev-project, last-updated-on

**PROJECTS** : **id** , team-id, 问题列表, student1answers 列表, student2answers 列表

**一些评论：**

1.  如您所见，我不使用范围键。**我需要吗？**.
2.  每个答案都是（问题数量、文本、插入日期）的 json
3.  每个学生都可以在多个团队中。

**我的困境：**

1.  我想获取在特定日期之后更新的特定学生的所有团队。

现在我正在使用 2 次扫描操作：一次搜索 student1，第二次搜索 student2。

```
 **Is there a better way ?** 
```

我考虑过添加一个新表： user-Battles: student-id, team-id 这样我就可以查询特定学生的团队，然后对所有团队进行批处理，但是最后一次更新呢？我怎样才能在 batch_get_item 中通过这个查询？

2.  当一个项目结束时，我不再使用它。旧物品怎么办？删除 ？把它们移到另一张桌子上？

3.  在项目表中，可以更新的属性是答案属性，所以我想将它们移到另一个表中进行表演。

如果只更新两次，我真的需要移动它们吗？（当学生 1 发送答案和学生 2 发送答案时 - 然后项目是旧的）

*如果我为答案创建一个新表，我将不必以 JSON 格式存储它们

你会如何设计桌子？请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T18:41:40.067

有很多细节的好问题:)

如果我只有一个建议，那就是：

> 请记住，对于 NoSQL，它不仅可以而且正常，甚至建议对数据进行反规范化。

这就是说，对于您的“困境”，您的建议非常好。您应该将日期反规范化为`range_key`. 一种方法是添加这样的表：

*   `hash_key`： 学生
*   `range_key`： 日期
*   `team`：team_id

但是，这并不完美，因为表格会继续增长。每次更新都会插入一个新对象。实际上，无法编辑密钥。您必须自己编写清洁代码。

在 DynamoDB 中，您不必担心“旧”项（扫描除外）导致性能下降，这是 DynamoDB 的主要优势。尽管如此，这始终是保持数据清洁但保持一致的好习惯。如果您开始移动过期的项目，请移动*所有*项目，否则您最终将不知道您的数据在哪里。

最后一个建议：您确定“ids”是描述您的对象的最佳方式吗？大多数情况下，名称、日期或任何唯一属性都是更好的键。

# windows - 如何确定文件碎片的程度？

> ID：12751684
> 
> 赞同：10
> 
> 时间：2012-10-05T18:03:35.437
> 
> 标签：windows, winapi, filesystems, ntfs

我想提供一种方法来识别大文件何时碎片化到一定程度，并在用户应该执行碎片整理时提醒用户。此外，我想向他们展示一个可视化的展示，展示文件实际上是如何在磁盘上分解成碎片的。

我不需要知道如何计算它的碎片化程度，或者如何进行视觉展示。我需要知道两件事：1）如何识别包含任何特定给定文件片段的任何磁盘上的特定集群，以及 2）如何识别该磁盘上的集群总数。我基本上需要一个包含该文件片段的所有集群的列表，以及每个集群在磁盘上的位置。

大多数碎片整理实用程序都有一个可视化的显示，显示文件是如何分布在磁盘上的。我的显示器将显示一个特定文件如何被拆分到磁盘的不同区域。我只需要知道如何检索必要的数据来告诉我文件的集群/扇区在磁盘上的位置，这样我就可以进一步确定它的碎片程度。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-05T21:54:44.207

您可以将该[`DeviceIoControl`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363216%28v=vs.85%29.aspx)功能与[`FSCTL_GET_RETRIEVAL_POINTERS`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364572%28v=vs.85%29.aspx)控制代码一起使用。

> FSCTL_GET_RETRIEVAL_POINTERS 操作检索一个可变大小的数据结构，该结构描述了特定文件在磁盘上的分配和位置。该结构描述了虚拟集群号（文件或流空间内的 VCN 偏移量）和逻辑集群号（卷空间内的 LCN 偏移量）之间的映射。

# html5-audio - HTML5 音频不会在 Safari 中触发/工作

> ID：12751686
> 
> 赞同：0
> 
> 时间：2012-10-05T18:03:38.853
> 
> 标签：html5-audio, safari

以下代码可在除 Safari 之外的所有浏览器上按预期工作（Windows 7 使用 5.1.7 版）。

```
var texto01 = document.getElementById("texto01");
texto01.onkeyup = function(tecla){
    if(tecla.keyCode == 13){    //If Enter is keyup
        if((valorAnt[0] != texto01.value) && (texto01.value != "")){    //Check to see if answer has changed and field is not empty
            valorAnt[0] = texto01.value;    //Since value has change, set it to be new previous answer
            if(texto01.value == "5747"){    //Correct answer user has to type
                ctx.clearRect(739, 57, 35, 35);
                ctx.drawImage(bienImg, 739, 57);    //Tick image
                var cBien = Math.ceil(Math.random()*2); //There are two audio files that can be played if answer is correct
                var cSonidoB = "bien" + cBien;
                document.getElementById(cSonidoB).play();   //play the "random" audio for right answer
            }
            else{ //Answer is wrong
                ctx.clearRect(739, 57, 35, 35);
                ctx.drawImage(malImg, 739, 57); //X mark image
                var cMal = Math.ceil(Math.random()*3);  //There are three audio files that can be played if answer is wrong
                var cSonidoM = "mal" + cMal;
                document.getElementById(cSonidoM).play();   //play the "random" audio for wrong answer
            }
        }
    }
}//texto01 
```

所有的音频标签都是这样声明的：

```
<audio id = "mal1" preload = "auto"> 
    <source src="Sounds/mal01.ogg" type="audio/ogg"></source>
    <source src="Sounds/mal01.mp3" type="audio/mpeg"></source>
</audio> 
```

我尝试了以下但没有成功：1）将MP3源放在OGG之前。2) 将类型更改为“音频/mp3” 3) 删除选择要播放的音频并直接分配要播放的音频 ID 的“随机”部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:07:02.903

也许您必须在 .htaccess 中添加一些代码，如下所示：

```
AddType audio/mpeg mp3
AddType audio/mp4 m4a
AddType audio/ogg ogg
AddType audio/ogg oga
AddType audio/webm webma
AddType audio/wav wav

AddType video/mp4 mp4
AddType video/mp4 m4v
AddType video/ogg ogv
AddType video/webm webm
AddType video/webm webmv

AddType audio/mpeg .mp3
AddType audio/mp4 .m4a
AddType audio/ogg .ogg
AddType audio/ogg .oga
AddType audio/webm .webma
AddType audio/wav .wav

AddType video/mp4 .mp4
AddType video/mp4 .m4v
AddType video/ogg .ogv
AddType video/webm .webm
AddType video/webm .webmv 
```

# python - Python - 仅打印少于五个字符的单词

> ID：12751687
> 
> 赞同：2
> 
> 时间：2012-10-05T18:03:42.863
> 
> 标签：python, split, definition

这个问题与我的教育有关，也就是说我希望您能尽可能详细地为我提供任何帮助-我不想复制粘贴代码并将其交给。:)

任务很简单 - 创建一个名为 writeshort(txt) 的定义，获取一串单词，只打印少于五个字符的单词。现在我已经完成了这个，但问题是该任务专门使用了一个*定义*。我在这里失败了。

没有定义的代码，有效：

```
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

string = raw_input(”Write a few lines: ”)
txt = string.split()
result = []

for words in txt:
    if len(words) > 4:
        continue
    result.append(words)

print ', '.join(result), ”have less than five letters!” 
```

现在看起来不错，并且打印时没有任何讨厌的 [' ']。但是定义呢？我已经尝试了几件事，这是最新的，但它只打印少于五个字母的第一个单词，而忽略其余的：

```
#!/usr/bin/env python3
# -*- coding: utf-8 -*-

string = raw_input(”Write a few lines: ”)
txt = string.split()

def writeshort(txt):
    for txt in txt:
        if len(txt) > 4: #Yes I know its a 4, but since it counts 0...
            continue
        return txt

print writeshort(txt), "have fewer letters than five!" 
```

我很感激任何帮助。感谢您花时间帮助我学习 Python！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-05T18:05:40.550

是的，因为循环in`writeshort`遇到了return语句，找到了一个短单词，立即返回。

如果您需要来自 的所有短词`writeshort`，您需要先将它们*收集*到一个列表中，然后最后返回该列表。也许是这样的：

```
def writeshort(txt):
    wordlist = []
    for item in txt:
        if len(item) > 4:
            continue
        wordlist += [item] # or wordlist.append(item) as in your first snippet
    return wordlist 
```

整个函数可以用一个单行和更多的pythonic代码代替：

```
[word for word in txt if len(word) <= 4] 
```

你已经写`for txt in txt:`了，这很奇怪。它将执行预期的操作（对 original 中的每个项目执行`txt`），但`txt`会在每次迭代中更改为列表中的一个项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:05:50.970

你的问题是`return txt`; 在`for`循环期间，Python 第一次命中该语句时，它将返回`txt`并*完全**停止调用`writeshort`*.

为什么不像您的旧代码那样将它们收集到一个列表中然后使用它呢？

```
def writeshort(txt):
    result = []
    for word in txt:
        if len(word) > 4:
            continue
        result.append(word)
    return result 
```

（我将混淆更改`for txt in txt`为`for word in txt`，它不会覆盖名为 的旧变量`txt`。）

另外，您对的评论`if len(word) > 4`让我认为您可能对此有些困惑：`len`不“计数 0”-您可能正在考虑索引，它从 0 开始。您需要的原因`> 4`是因为它检查它是否*大于*4，即5个或更多。你也可以说`>= 5`。

* * *

当我们这样做的时候，为什么不让你的代码更好一点呢？

除了`continue`在你的循环中使用，你可以通过否定条件更直接地做到这一点：

```
result = []
for word in txt:
    if len(word) < 5:
        result.append(word) 
```

顺便说一句，这种将事物收集到列表中的模式实际上非常普遍，以至于 Python 有一种特殊的语法来处理它（以及一些更一般的情况），称为列表推导：

```
def writeshort(txt):
    return [word for word in txt if len(word) < 5] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T18:12:27.193

几个想法：

1）您将 txt 用作循环的集合和当前元素：

```
for txt in txt: 
```

这在最好的情况下会令人困惑。尝试

```
for word in txt: 
```

2）这里的主要问题是，一旦发现一个短于五个字符的单词，您就会从函数中返回。您应该查看保存这些单词的列表，然后在检查 txt 中的每个单词后返回整个列表。

```
def writeshort(txt):
    shortwords = []
    for word in txt:
        if len(txt) > 4: 
            continue
        shortwords += [word]
    return shortwords 
```

# java - GWT - UiBinder 中的停靠布局面板

> ID：12751690
> 
> 赞同：2
> 
> 时间：2012-10-05T18:03:51.007
> 
> 标签：java, gwt, uibinder, docklayoutpanel

我需要在 UiBinder 中实现一个 DockLayoutPanel。我知道我们可以在 UiBinder 中使用 <g:north> <g:west> 等来做与 DockLayoutPanel.addNorth()、DockLayoutPanel.addWest() 一样的事情。

我的问题是，Uibinder 中有什么东西可以和 DockLayoutPanel.insertNorth()、DockLayoutPanel.insertWest() 做同样的事情吗？

另外，是否有任何官方文档可以搜索 Uibinder 命令，以便我可以知道我可以用于 uibinder 什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:34:54.837

这是您要查找的内容：

```
<g:FlowPanel>
    <g:DockLayoutPanel ui:field="myPanel">
        <g:west size="300">
            <g:VerticalPanel ui:field="mySideBar" />
        </g:west>
        <g:center>
            <g:VerticalPanel ui:field="myMainPanel" />
        </g:center>
    </g:DockLayoutPanel>
</g:FlowPanel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:57:35.490

Ui:Binder 中没有“命令”。您可以使用小部件和 HTML 指定布局，并且可以为小部件设置各种属性（如类、宽度、高度、文本、标题、值等）。但是你不能告诉 Ui:Binder 在一种情况下插入一个小部件，而不是在另一种情况下插入它。您可以在您的应用程序代码中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T19:05:40.900

DockLayoutPanel的`add*()`和`insert*()`方法都用于以编程方式运行时添加子面板。UiBinder 不会做与那些方法“相同的事情”。您直接使用 UiBinder 的工作仅在设计时发生。

UiBinder 是一个静态布局工具，它是您的小部件在初始化后立即的“快照”，一种描述元素相对于彼此的定位的方式。

您使用 UiBinder 指定的小部件可以在初始化后以编程方式进行操作。假设您指定了以下布局：

```
 <g:DockLayoutPanel ui:field="myDockPanel">
    <g:north size="100">
        <g:Label ui:field="northernLabel">I am far north</g:Label>
    </g:north>
    <g:center>
        <g:Label ui:field="centerLabel">Center Stage</g:Label>
    </g:center>
</g:DockLayoutPanel> 
```

在视图初始化后运行的代码中，您现在可以执行以下操作：

```
myDockPanel.insertNorth(new Label("I am even farther north!"), 100.0, northernLabel); 
```

> 另外，是否有任何官方文档可以搜索 Uibinder 命令，以便我可以知道我可以用于 uibinder 什么？

[关于使用 UiBinder 进行声明式布局的](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder)Google 开发指南部分是官方的，AFAIK。

# php - 使用 Active Record 模式执行查询 INSERT INTO 时出错

> ID：12751692
> 
> 赞同：0
> 
> 时间：2012-10-05T18:03:56.693
> 
> 标签：php, mysql, activerecord

我正在尝试用 PHP 实现 Active Record 模式；我有以下代码

```
<?php

// define 'MySQL' class
class users{
  private $result;

  public function __construct($host='localhost',$user='user',$password='password',$database='pruebalabo'){
    // connect to MySQL and select database
    if(!($conId = @mysql_connect("127.0.0.1","root",""))){
       throw new Exception('Error connecting to the server');
    }
    if(!mysql_select_db("pruebalabo",$conId)){
       throw new Exception('Error selecting database');
    }
  }

  // run SQL query
  public function query($query){
    if(!$this->result=mysql_query($query)){
      throw new Exception('Error performing query '.$query);
    }
  }
  // fetch one row
  public function fetchRow(){
    while($row=mysql_fetch_array($this->result)){
      return $row;
    }
    return false;
  }
  // fetch all rows
  public function fetchAll($table='users'){
     $this->query('SELECT * FROM '.$table);
     $rows=array();
     while($row=$this->fetchRow()){
        $rows[]=$row;
     }
     return $rows;
  }
  // insert row
  public function insert($params=array(),$table='default_table'){
     $sql='INSERT INTO '.$table.' ('.implode(',', array_keys($params)).') VALUES ('.implode("','",array_values($params)).')';
     $this->query($sql);
  }

}

try{
  // connect to MySQL and select a database
  $db=new users("host","root","","pruebalabo");
  $result=$db->fetchAll('users');
  foreach($result as $row){
     echo $row['firstname'].' '.$row['lastname'].' '.$row['email'].'<br />';
  }

  // connect to MySQL and select a database
  $db=new users("127.0.0.1","root","","pruebalabo");
  // insert new row into selected MySQL table
  $db->insert(array('firstname'=>'Sebas','lastname'=>'Guajardo','email'=>'tururus@domain.com'),'users');

}

catch(Exception $e){
  echo $e->getMessage();
  exit();
}

?> 
```

但是，当我尝试运行代码时，以下行出现错误

```
$db->insert(array('firstname'=>'Sebas','lastname'=>'Guajardo','email'=>'tururus@domain.com'),'users'); 
```

我没有看到语法错误，我几乎直接从[这个](http://www.devshed.com/c/a/PHP/Using-the-Active-Record-Pattern-with-PHP-and-MySQL/3/)页面中获取了这个例子。我的数据库（在 MySQL 上实现）的名称是“pruebalabo”，表的名称是“users”。

编辑：修正错误指出。仍然出现错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:06:18.823

您的函数包含一个变量`$firstname`，但该变量不存在。看起来您打算在`implode(',' , array_keys($params))`将数组值内爆到`VALUES()`列表中时将数组键作为列名提供。

```
 public function insert($params=array(),$table='default_table'){
   // Pass the array keys as column names to match the VALUES().
   // I have surrounded them all in `backquotes` in the implode() here
   $sql="INSERT INTO ".$table." (`" . implode('`,`', array_keys($params)) . "`) VALUES ('".implode("','",array_values($params))."')";
   $this->query($sql);
 } 
```

始终在`mysql_query()`调用中检查成功或失败，并在失败时检查`mysql_error()`.

注意：我们假设您`$params`在将它们传递给您的查询之前安全地转义了这些值，以防它们没有像在这个中那样进行硬编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:08:45.430

这个功能

```
public function insert($params=array(),$table='default_table'){
     $sql='INSERT INTO '.$table.' ('.$firstName.') VALUES ('.implode("','",array_values($params)).')';
     $this->query($sql);
  } 
```

使用未定义的变量 "$firstName" 并注意您指定的值应与您在 ('.$firstName.') 中指定的列相对应

将此代码用于该函数，问题似乎是缺少“'”字符：

```
$sql= "INSERT INTO $table (".implode(',', array_keys($params))
 .") VALUES ('".implode("','",array_values($params))."')"; 
$this->query($sql); 
```

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T18:18:41.037

如下更改插入功能

```
public function insert($params=array(),$table='default_table'){
     $sql='INSERT INTO '.$table.' ('.implode(',', array_keys($params)).') VALUES ('.'\''.implode("','",array_values($params)).'\''.')';
     $this->query($sql);
  } 
```

# shell - Gitlab 在“gem”安装时失败

> ID：12751698
> 
> 赞同：0
> 
> 时间：2012-10-05T18:04:21.860
> 
> 标签：shell, ubuntu, gem, gitlab

我已经安装了这个：

```
# Install curl and sudo
apt-get install curl sudo

# 3 steps in 1 command :)
curl https://raw.github.com/gitlabhq/gitlab-recipes/master/install/debian_ubuntu.sh | sh 
```

[教程在这里...](https://github.com/gitlabhq/gitlabhq/blob/stable/doc/installation.md#4-install-gitlab-and-configuration-check-status-configuration)

但是当我尝试第 4 步时

```
sudo gem install charlock_holmes --version '0.6.8' 
```

我有这个错误 - 有人可以帮助我吗？

```
$ sudo gem install charlock_holmes --version '0.6.8'
/usr/local/lib/ruby/1.9.1/yaml.rb:56:in `<top (required)>':
It seems your ruby installation is missing psych (for YAML output).
To eliminate this warning, please install libyaml and reinstall your ruby.
ERROR:  Loading command: install (LoadError)
cannot load such file -- zlib
ERROR:  While executing gem ... (NameError)
uninitialized constant Gem::Commands::InstallCommand
$ 
```

我的错误是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:23:18.730

好的，我找到了一个解决方案，这很简单......

我不得不安装 libyaml 并重新安装 ruby​​。

看看这个[网站](http://collectiveidea.com/blog/archives/2011/10/31/install-ruby-193-with-libyaml-on-centos/)

# java - 位操作性能：屏蔽或移位

> ID：12751699
> 
> 赞同：0
> 
> 时间：2012-10-05T18:04:24.627
> 
> 标签：java, android, bit-manipulation

我不太熟悉低级（硬件关闭）细节（忘记了很多）。

我的应用程序需要在很短的时间内执行数百万（甚至更多）位操作操作，因此性能很重要。

我需要检查某个值的某个部分（由 4、5 或 6 位组成）`int`是否等于指定值。

我可以通过使用`int`一个完整的掩码来解决这个问题；或通过使用位移（以摆脱令人不安的部分），然后进行直接比较（==）。这些是否具有相同的性能？哪个更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T19:27:18.837

一般来说 ((a & b )== c) 应该非常快，并且比具有额外移位的相同操作更快。((a>>n)&b)==c)

其他优化技术（例如循环展开）可能比尝试猜测哪些移位和掩码操作最快更有效。

如果您真的关心该级别的性能，答案是对实际部署环境中所有可能的变化进行基准测试。

# mysql - mysql默认值错误

> ID：12751702
> 
> 赞同：0
> 
> 时间：2012-10-05T18:04:42.703
> 
> 标签：mysql, sinatra

我正在测试一个使用 mysql 数据库的链接缩短器 Sinatra 应用程序。当我输入要缩短的链接时，我收到了这个 mysql 错误

```
 (mysql_errno=1364, sql_state=HY000) Field 'link_identifier' doesn't have a default value Query: INSERT INTO `urls` (`original`) VALUES ('http://pryrepl.org/screencasts.html') 
```

我假设这意味着字段 link_identifier 应该有一个默认值

urls 和visits 表都有link_identifier 字段，但links 表没有。但是，在创建表的代码中，复制到下面，它是具有“属性：标识符”的 Link 类。有谁知道我将如何解决这个问题？

```
mysql> show columns from urls;
+-----------------+------------------+------+-----+---------+----------------+
| Field           | Type             | Null | Key | Default | Extra          |
+-----------------+------------------+------+-----+---------+----------------+
| id              | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| original        | varchar(255)     | YES  |     | NULL    |                |
| link_identifier | varchar(50)      | NO   | MUL | NULL    |                |
+-----------------+------------------+------+-----+---------+----------------+
3 rows in set (0.12 sec)

mysql> show columns from visits
    -> ;
+-----------------+------------------+------+-----+---------+----------------+
| Field           | Type             | Null | Key | Default | Extra          |
+-----------------+------------------+------+-----+---------+----------------+
| id              | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| created_at      | datetime         | YES  |     | NULL    |                |
| ip              | varchar(39)      | YES  |     | NULL    |                |
| country         | varchar(50)      | YES  |     | NULL    |                |
| link_identifier | varchar(50)      | NO   | MUL | NULL    |                |
+-----------------+------------------+------+-----+---------+----------------+
5 rows in set (0.08 sec)

mysql> show columns from links
    -> ;
+------------+-------------+------+-----+---------+-------+
| Field      | Type        | Null | Key | Default | Extra |
+------------+-------------+------+-----+---------+-------+
| identifier | varchar(50) | NO   | PRI | NULL    |       |
| created_at | datetime    | YES  |     | NULL    |       |
+------------+-------------+------+-----+---------+-------+ 
```

**代码**

```
class Url
  include DataMapper::Resource
  property  :id,          Serial
  property  :original,    String, :length => 255   
  belongs_to  :link
end
....

class Link
  include DataMapper::Resource
  property  :identifier,  String, :key => true
  property  :created_at,  DateTime 
  has 1, :url
  has n, :visits

...

class Visit
  include DataMapper::Resource

  property  :id,          Serial
  property  :created_at,  DateTime
  property  :ip,          IPAddress
  property  :country,     String
  belongs_to  :link

  after :create, :set_country

.... 
```

更新 - 源代码似乎已经有办法创建一个链接标识符来满足 mysql 的要求，但它似乎没有工作

```
def self.create_link(original)
    url = Url.create(:original => original)
    if Link.first(:identifier => url.id.to_s(36)).nil? or !DIRTY_WORDS.include? url.id.to_s(36)
      link = Link.new(:identifier => url.id.to_s(36))
      link.url = url
      link.save 
      return link     
    else
      create_link(original)
    end    
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:11:00.003

该错误意味着您没有`link_identifier`在插入语句中设置值。并且`link_identifier`不能`null`由表定义。

您需要为 指定一个值`link_identifier`。例子

```
INSERT INTO `urls` (`original`, `link_identifier`) 
VALUES ('http://pryrepl.org/screencasts.html', 'value_for_link_identifier') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:11:35.827

发送查询时

```
 INSERT INTO `urls` (`original`) VALUES ('http://pryrepl.org/screencasts.html') 
```

的值`link_identifier`未设置。

您将 urls 表定义为

```
mysql> show columns from urls;
+-----------------+------------------+------+-----+---------+----------------+
| Field           | Type             | Null | Key | Default | Extra          |
+-----------------+------------------+------+-----+---------+----------------+
| id              | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| original        | varchar(255)     | YES  |     | NULL    |                |
| link_identifier | varchar(50)      | NO   | MUL | NULL    |                |
+-----------------+------------------+------+-----+---------+----------------+
3 rows in set (0.12 sec) 
```

link_identifier 的默认值为 NULL（或未设置），但由于该值不能为 NULL，mysql 不知道该设置为什么值。

将mysql查询更改为

```
 INSERT INTO `urls` (`original`, `link_identifier`) VALUES ('http://pryrepl.org/screencasts.html', '<your identifier here>') 
```

# javascript - Javascript 数组未正确填充

> ID：12751703
> 
> 赞同：0
> 
> 时间：2012-10-05T18:04:45.763
> 
> 标签：javascript, json, flot

我正在使用 Flot 在页面上显示时间序列数据图。该图表适用于单个数据集，但是我想添加按标签分组的多个数据集的功能。

我将 JSON 输出格式化为正常工作所需的格式，但在绘制之前组合多个数据集时遇到了问题。

我想将数据集放入 seriesArray 数组中，但是当我绘制图表时，该数组下面的代码不会被填充。

函数末尾的 tagsList 数组中有数据，所以我将 seriesArray 设置为以相同的方式填充但无济于事。

我错过了什么？

```
var plotarea = $("#placeholder");
var data;   
var plot;
var tagsList=[];
var seriesArray = [];
$.getJSON("/items/getTags.json", function(tagsJSON) {
  $.each(tagsJSON, function(key, val) {
    tagsList.push(val.name);
    $.getJSON("/data/"+val.name+".json", function(json) {
      data = [{label:val.name, data:format(json)}];
      seriesArray.push(data);
    });  
  });
  plot = $.plot(plotarea , seriesArray, {series:{ lines: {show: true},points: {show:true}},
      xaxis: {
          mode: "time",
          timeformat: "%m/%d/%y",
          tickDecimals: 0,
          minTickSize: [2,"day"]
      },
      yaxis: {
          minTickSize: 1,
          tickDecimals: 0
      }
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:11:24.137

您需要等到所有 AJAX 调用`/data/tag.json`完成。你可以用它 [`$.when().then()`](http://api.jquery.com/jQuery.when/)来做到这一点。

```
var plotarea = $("#placeholder");
var data;
var plot;
var tagsList=[];
var seriesArray = [];
$.getJSON("/items/getTags.json", function(tagsJSON) {
    var deferreds = [];
    $.each(tagsJSON, function(key, val) {
        tagsList.push(val.name);
        deferreds.push($.getJSON("/data/"+val.name+".json", function(json) {
            data = [{label:val.name, data:format(json)}];
            seriesArray.push(data);
        }));
    });
    $.when(deferreds).then(function(){
        plot = $.plot(plotarea , seriesArray, {series:{ lines: {show: true},points: {show:true}},
            xaxis: {
                mode: "time",
                timeformat: "%m/%d/%y",
                tickDecimals: 0,
                minTickSize: [2,"day"]
            },
            yaxis: {
                minTickSize: 1,
                tickDecimals: 0
            }
        });
    });
}); 
```

# java - 如何有一个 JFrame 最大化图标

> ID：12751704
> 
> 赞同：0
> 
> 时间：2012-10-05T18:04:46.370
> 
> 标签：java, swing, jframe

如何`JFrame`在 Mac 上的 Eclipse 中创建一个窗口，该窗口具有使窗口全屏显示的图标，就像右上角大多数窗口上的双箭头图标一样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T19:03:09.240

看一眼

*   [OSX Lion 上 Java 应用程序的全屏功能](https://stackoverflow.com/questions/6873568/fullscreen-feature-for-java-apps-on-osx-lion)
*   和[Java Runtime System Properties](http://developer.apple.com/library/mac/ipad/#documentation/Java/Reference/Java_PropertiesRef/Articles/JavaSystemProperties.html)，可能有兴趣
*   或者如果这些是您想要的错误功能，[我如何在 OSX 上使用 Java 进行全屏显示](https://stackoverflow.com/questions/1155838/how-can-i-do-full-screen-in-java-on-osx)

**更新**

幸运的是你`JFrame`通过......`Window``Frame`

![在此处输入图像描述](../Images/6836d8be41a0d2372e6315e0bcc01f4d.png)

```
public class TestMacFullScreen {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setSize(200, 200);
                frame.setLocationRelativeTo(null);
                frame.setLayout(new BorderLayout());

                JLabel label = new JLabel("Look ma, no hands");

                frame.add(label);

                enableOSXFullscreen(frame);

                frame.setVisible(true);

            }
        });
    }

    public static void enableOSXFullscreen(Window window) {
        try {
            Class util = Class.forName("com.apple.eawt.FullScreenUtilities");
            Class params[] = new Class[]{Window.class, Boolean.TYPE};
            Method method = util.getMethod("setWindowCanFullScreen", params);
            method.invoke(util, window, true);
        } catch (ClassNotFoundException exp) {
            exp.printStackTrace();
        } catch (Exception exp) {
            exp.printStackTrace();
        }
    }
} 
```

# java - 键入一个 Jtextfield 时从数据库中获取数据到 Jtextfield

> ID：12751706
> 
> 赞同：0
> 
> 时间：2012-10-05T18:04:49.197
> 
> 标签：java, swing, autocomplete, oracle11g

嗨，伙计们，我有一个连接到 oracle 数据库的 Swing 应用程序，我希望它一旦我在 JTextField 中键入一个值，JFrame 上的其他 JTextfields 就会加载来自数据库的后续数据，但我似乎没有实现这。我已经尝试了以下代码，但它什么也没得到。

```
txtNo.addKeyListener(new KeyAdapter() {
        public void keyTyped(KeyEvent ke) {
            Connection conn = null;
            try{
                Class.forName("oracle.jdbc.driver.OracleDriver");

        conn = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE", "Username", "Password");
        Statement st = conn.createStatement();
        String load = "Select * from Store_info_table where PART_NUMBER = '" + txtNo.getText() + "'";
        ResultSet rs = st.executeQuery(load);
        while(rs.next()){
            txtName.setText(rs.getString("SPARE_DESC"));
        }
            }catch(Exception ae){

            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:10:45.503

*   替换`KeyListener`为`DocumentListener`
*   EDT 上的数据库连接是个坏主意（太慢）。有关更多信息，请参阅[Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)指南中的并发性
*   您容易受到 SQL 注入的攻击
*   避免空`catch`语句，否则您不知道出了什么问题。如果您不选择体面的错误处理，至少记录堆栈跟踪（通过打印它，或使用`Logger`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T22:14:46.053

罗宾和尼克都是对的。

这是如何实施他们正在讨论的内容的示例...

```
public class TestForm02 {

    public static void main(String[] args) {
        new TestForm02();
    }

    public TestForm02() {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {

                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setLayout(new BorderLayout());
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new MyForm());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

            }
        });
    }

    protected class MyForm extends JPanel {

        private JTextField txtNo;
        private JTextField txtName;
        private String partToLoad;
        private Timer loadTimer;

        public MyForm() {

            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.insets = new Insets(2, 2, 2, 2);
            gbc.anchor = GridBagConstraints.WEST;

            txtName = new JTextField(12);
            txtNo = new JTextField(12);
            txtName.setEnabled(false);

            add(new JLabel("Parts #:"), gbc);
            gbc.gridx++;
            add(txtNo, gbc);

            gbc.gridy++;
            gbc.gridx = 0;
            add(new JLabel("Description:"), gbc);
            gbc.gridx++;
            add(txtName, gbc);

            txtNo.addFocusListener(new FocusAdapter() {
                @Override
                public void focusLost(FocusEvent e) {
                    loadParts();
                }
            });

            txtNo.getDocument().addDocumentListener(new DocumentListener() {
                protected void update() {
                    loadTimer.restart();
                }

                @Override
                public void insertUpdate(DocumentEvent e) {
                    update();
                }

                @Override
                public void removeUpdate(DocumentEvent e) {
                    update();
                }

                @Override
                public void changedUpdate(DocumentEvent e) {
                    update();
                }
            });

            loadTimer = new Timer(250, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    loadParts();
                }
            });
            loadTimer.setRepeats(false);
            loadTimer.setCoalesce(true);

        }

        protected void loadParts() {

            String text = txtNo.getText();
            // Don't want to trigger this twice...
            if (text == null ? partToLoad != null : !text.equals(partToLoad)) {
                partToLoad = text;
                txtNo.setEnabled(false);
                txtName.setEnabled(false);
                BackgroundWorker worker = new BackgroundWorker();
                worker.execute();
            }

        }

        protected class BackgroundWorker extends SwingWorker<String, String> {

            @Override
            protected String doInBackground() throws Exception {

                // Do you're database load here.  Rather then updating the text
                // field, assign it to variable and return it from here

                String desc = "Some description"; // load me :D

                // Inserted delay for simulation...
                Thread.sleep(2000);

                return desc;

            }

            @Override
            protected void done() {
                try {
                    String value = get();
                    txtName.setText(value);

                    txtName.setEnabled(true);
                    txtNo.setEnabled(true);
                } catch (InterruptedException exp) {
                    exp.printStackTrace(); // Log these some where useful
                } catch (ExecutionException exp) {
                    exp.printStackTrace(); // Log these some where useful
                }
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T18:15:14.813

你知道你的数据库连接是否正常吗？例如，您可以在侦听器之外运行数据库部分并且它可以工作吗？

如果是这样，我建议使用`ActionListener`or a`FocusListener`代替。KeyListeners（虽然有时是必要的）通常很笨拙——通常有更好的方法（参见[Java Swing: Using ActionMap](https://stackoverflow.com/questions/7253712/java-swing-using-actionmap) for and explaination）：

```
import java.awt.event.*;
import javax.swing.*;

public class Example extends Box{

    JLabel txtName = new JLabel("Nothing Entered");

    public temp(){
        super(BoxLayout.Y_AXIS);
        // Add FocusListener to first field
        final JTextField txtNo = new JTextField(20);
        txtNo.addFocusListener(new CustomFocusListener(txtNo));
        add(txtNo);

        // Add TextListener to first field
        final JTextField txtNo2 = new JTextField(20);
        txtNo2.addFocusListener(new CustomFocusListener(txtNo2));
        add(txtNo2);

        // Add TextListener to first field
        final JTextField txtNo3 = new JTextField(20);
        txtNo3.addFocusListener(new CustomFocusListener(txtNo3));
        add(txtNo3);

        add(new JButton("Do Something"));

        add(txtName);

    }

    public static void main(String[] args){
        final JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new Example());
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    /**
     * Your custom focust listener that does all your SQL Work
     */
    public class CustomFocusListener extends FocusAdapter{
        JTextField field;

        public CustomFocusListener(JTextField field){
            this.field = field;
        }

        @Override
        public void focusLost(FocusEvent e) {
            //Assuming your database connection works, this gives you an example to follow
            txtName.setText(field.getText());
            /*Connection conn = null;
            try{
                Class.forName("oracle.jdbc.driver.OracleDriver");

                conn = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE", "Username", "Password");
                Statement st = conn.createStatement();
                String load = "Select * from Store_info_table where PART_NUMBER = '" + field.getText() + "'";
                ResultSet rs = st.executeQuery(load);
                while(rs.next()){
                   txtName.setText(rs.getString("SPARE_DESC"));
                }
            }catch(Exception ae){

            }*/
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T19:34:12.257

谢谢你们的帮助。按照尼克的建议，我得到了我想要的使用 FocusListener ：

```
 txtNo.addFocusListener(new FocusAdapter() {
        public void focusLost(FocusEvent e) {
            Connection conn = null;
            try{
                Class.forName("oracle.jdbc.driver.OracleDriver");

        conn = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE", "Username", "Password");
        Statement st = conn.createStatement();
        String load = "Select * from Store_info_table where PART_NUMBER = '" + txtNo.getText().trim() + "'";
        ResultSet rs = st.executeQuery(load);
        while(rs.next()){
            txtName.setText(rs.getString("SPARE_DESC"));

        }
            }catch(Exception ae){

            }
        }
    }); 
```

# c# - VS2012代码分析工具如何全局排除某条消息的错误？

> ID：12751711
> 
> 赞同：4
> 
> 时间：2012-10-05T18:04:56.217
> 
> 标签：c#, visual-studio, visual-studio-2012, code-analysis, system.diagnostics

我目前从 VS2012 代码分析工具收到以下消息：

> CA1709 标识符应正确大小写在成员“Action.ExecuteAction(string, string)”中，通过将参数名称“merchantID”中的“ID”更改为“Id”来更正其大小写。“Id”是一个缩写，因此不受首字母缩写词大小写指南的约束。

我在 GlobalSuppressions.cs 文件中定义了这个：

```
[assembly: System.Diagnostics.CodeAnalysis.SuppressMessage(
    "Microsoft.Naming", 
    "CA1709:IdentifiersShouldBeCasedCorrectly", 
    MessageId = "ID", 
    Scope = "Global")] 
```

如何定义一条规则，上面写着“忽略所有文件中的这个特定拼写（我想要 ID，而不是 Id）”？

编辑：迈克的解决方案奏效了，这就是我最终得到的结果：

```
<?xml version="1.0" encoding="utf-8" ?>
<Dictionary>
    <Acronyms>
        <CasingExceptions>
            <Acronym>ID</Acronym>
        </CasingExceptions>
    </Acronyms>
</Dictionary> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T18:26:21.260

**我相信**，您想要做的是为自定义字典添加首字母缩写`ID`词，然后您就可以取消全局抑制。请按照[这些说明](http://msdn.microsoft.com/en-us/library/bb514188.aspx)进行操作。

但是，简而言之，这是从该文档中提取的一个片段，应该是你的样子......

```
<Dictionary>
      <Acronyms>
         <CasingExceptions>
            <Acronym>ID</Acronym>   <!-- Identifier -->
            ...
         </CasingExceptions>
         ...
      </Acronyms>
      ...
</Dictionary> 
```

...但是，如果它不是首字母缩写词，那么它就是这些类别之一。

# android - 在 IntelliJ IDEA 中构建 ActionBarSherlock 失败

> ID：12751723
> 
> 赞同：2
> 
> 时间：2012-10-05T18:05:26.823
> 
> 标签：android, intellij-idea, actionbarsherlock

我已将库模块 ActionBarSherlock 包含到我的项目中。最低 SDK 版本为 10，两个项目的目标 SDK - 13。

但是当我尝试构建项目时，我遇到了很多错误，例如：

```
[Library] /Users/rankor777/src/ActionBarSherlock/library/res/values-v14/abs__styles.xml:4: error: Error retrieving parent for item: No resource found that matches the given name 'android:Widget.Holo.ActionBar'. 
```

为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-25T07:39:01.977

*   下载 ActionBarSherlock zip 文件并将其解压缩到您将使用 ActionBarSherlock 的应用程序模块旁边。从 ActionBarSherlock 文件夹下的 IntelliJ IDEASelect 库文件夹中选择 File->Import Module 并将其作为新模块导入。它将作为 Android 库模块导入。
*   打开ActionBarSherlock库模块的模块设置，导出android-support-v4.jar依赖

*   打开应用程序的模块设置，这将使用 ActionBarSherlock 并添加新的模块依赖项

*   从模块列表中选择 ActionBarSherlock

请参阅[带图片的分步说明](http://www.denizoguz.com/2012/12/22/using-actionbarsherlock-with-intellij-idea/)

PS：互联网上的一些教程指导您将 android-support-v4.jar 添加到应用程序的 libs 文件夹并添加为库依赖项。由于 ActionBarSherlock 已经包含它，您不必这样做，只需从 ActionBarSherlock 导出它。如果您还将 android-support-v4.jar 作为库添加到您自己的模块中，您可能会遇到 UNXPECTED TOP LEVEL EXCEPTION。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:07:44.970

如果我没记错的话，这个问题是由 Java 编译器设置引起的。打开 App Settings 对话框，选择 Compiler -> Java Compiler 并确保您已选择“Javac in-process (Java6+ only)”作为您要使用的编译器。

仅供参考，Google 建议使用最新的 SDK 进行构建，因此您可能应该将目标 SDK 升级到 16。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-09T21:46:05.207

你需要碰撞你的**目标**sdk。（此答案的先前修订错误地表示“您需要提高您的*min* sdk，但这是不正确的，如下面粘贴的 ABS 文档所证明的那样）。

即使它打算在旧版本的 Android 平台上工作，您仍然必须针对 Android SDK 的 4.0（或更新）版本编译 ActionBarSherlock。

在这里检查：

[http://actionbarsherlock.com/usage.html](http://actionbarsherlock.com/usage.html)

> 要求
> 
> 由于它在 Ice Cream Sandwich 上使用本机操作栏及其相关类，因此该库要求它和您的项目都使用 Android 4.0 或更高版本进行编译。该项目还要求您在您的编辑器和您可能使用的任何构建系统中都使用 JDK 1.6 进行编译。
> 
> 由于该库是官方支持库的扩展，因此您还必须拥有项目引用的 android-support-v4.jar。

也在这里：

[http://actionbarsherlock.com/faq.html](http://actionbarsherlock.com/faq.html)

> 库本身必须针对 Android 4.0（API 级别 14）构建。您的项目应尽可能使用最新版本的 SDK 构建，只要它是 4.0 或更高版本。
> 
> 需要以 API 级别 11 或更高版本为目标，因为它会导致 Android 在较新的设备上运行时自动添加本机操作栏。由于您将针对新的 API 进行编译，但您的应用程序可能会在具有旧版本 Android 的设备上运行，因此必须特别注意避免使用或正确检查和调用在您的最低 SDK 版本之后引入的任何方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T18:28:51.903

转到文件->项目结构->模块->您的应用程序->依赖项。单击左下角的 +，然后选择 Module Dependency。选择 ActionBarSherlock。

如果它不存在，请确保它是一个库模块 - 展开 ActionBarSherlock 模块并单击 Android，然后选中 Is Library Project。

# maven - 我可以修改 Maven 部署阶段以用我自己的插件替换 maven-deploy-plugin 吗？

> ID：12751724
> 
> 赞同：12
> 
> 时间：2012-10-05T18:05:34.960
> 
> 标签：maven, deployment, phase, maven-deploy-plugin

我对Maven很陌生...

我要做的是在部署阶段跳过 maven-deploy-plugin，同时用我自己的插件替换它（即我正在部署到非存储库位置）。

我意识到我可以通过多种其他方式做到这一点，但老板希望能够运行：

> mvn 部署

要获得我当前解决方法的结果，即禁用 maven-deploy-plugin（这似乎正在禁用整个部署阶段），并从命令行手动指定自定义上传目标。

我目前未能成功完成以下任务：

```
<executions>
    <execution>
        <phase>deploy</phase>
    </execution>
</executions> 
```

在包含我的插件规范的 build/plugins/plugin 部分中，因为部署阶段被跳过：

```
 <plugin>
            <artifactId>maven-deploy-plugin</artifactId>
            <version>2.7</version>
            <configuration>
                <skip>true</skip>
            </configuration>
        </plugin> 
```

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-08T07:17:22.753

> 禁用 maven-deploy-plugin （这似乎禁用了整个部署阶段）

这是不正确的。禁用`maven-deploy-plugin`不会禁用整个部署阶段。这是应该如何完成的（看起来你已经这样做了）：

```
<build>
  <pluginManagement>
    <plugins>
      <plugin>
        <artifactId>maven-deploy-plugin</artifactId>
        <configuration>
            <skip>true</skip>
        </configuration>
      </plugin>
    </plugins>
  </pluginManagement>
</build> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-05T18:52:36.883

试试这个（未经测试的）替代方法来禁用标准部署插件：

```
<plugin>
    <artifactId>maven-deploy-plugin</artifactId>
    <version>2.7</version>
    <executions>
        <execution>
            <id>default-deploy</id>
            <phase>none</phase>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-08T04:01:03.673

我想在@yegor256 的回答的基础上再做一点…… 8 年零 4 个月后！

我发现自己在这里陷入了一些遗留的 Maven 配置的杂草中，这些配置充满了[cruft](http://catb.org/jargon/html/C/cruft.html)。来自 Maven 的思维模式，尽管从现在到积极的黑客攻击已经有几年了，但我正在重新熟悉 Maven 生命周期。

TLDR……`mvn help:effective-pom`是你的朋友。经常使用 IDE 的工具查看有效的 POM（NetBeans 使这变得容易。我在 IntelliJ 中添加了一个键盘快捷键。）

在我正在审查的配置中，以前的开发人员创建了两 (2) 个`deploy-file`执行，一`war`、一`jar`。

```
<build>
...
  <plugins>
  ...
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-deploy-plugin</artifactId>
      <version>2.8.2</version>
      <executions>
        <execution>
          <id>deploy-war</id>
          <phase>deploy</phase>
          <goals>
            <goal>deploy-file</goal>
          </goals>
          <configuration>
            ... omitted ...
          </configuration>
        </execution>
        <execution>
          <id>deploy-jar</id>
          <phase>deploy</phase>
          <goals>
            <goal>deploy-file</goal>
          </goals>
          <configuration>
            ... omitted ...
          </configuration>
        </execution>
      </executions>
    </plugin>
  ...
  </plugins>
...
</build> 
```

我知道这些执行将附加到阶段的`default-deploy`绑定，`deploy`并在日志中观察到这种行为。将`default-deploy`运行，上传一个空的战争文件，然后`deploy-war`将运行，上传并覆盖第一个战争文件。

存在几个选项。

## `skip`和`combine.self="override"`（我的偏好）

如前所述，`<skip>`作为一个`<configuration>`选项使用是可行的。`<phase>`它比设置设置为更安全且更便携`none`。

但是，它将被其他执行继承（当然如介绍的那样）。为了防止这种情况，[您必须明确告诉您的其他`<execution>`配置不要继承](https://maven.apache.org/pom.html#advanced_configuration_inheritance)。

```
...
...
      <executions>
        <execution>
          <id>deploy-war</id>
          <phase>deploy</phase>
          <goals>
            <goal>deploy-file</goal>
          </goals>
          <configuration combine.self="override">
            ... omitted ...
          </configuration>
        </execution>
...
... 
```

## 覆盖`default-deploy`

`combine.self="override"`另一种选择，可能比[覆盖`default-deploy`](https://maven.apache.org/guides/mini/guide-default-execution-ids.html) `<id>`插件的执行更冗长且更不深奥。

```
...
        <execution>
          <id>default-deploy</id>
          <configuration>
            <skip>true</skip>
          </configuration>
        </execution>
... 
```

这不会被附加的`<executions>`.

## 另外的选择

正如@yegor256 所指出的，但在附加配置中明确声明要“重置”从插件`<skip>false</skip>`继承的。`<skip>`

HTH。

# ms-access - 使用动态创建的 SQL 更新和显示 Access 子表单的结果

> ID：12751744
> 
> 赞同：0
> 
> 时间：2012-10-05T18:06:37.583
> 
> 标签：ms-access, vba, subform

我有一个主窗体frm_Main，其中有一个子窗体subform_Child。当显示主窗体时，子窗体也会显示，它只是空白，因为其中没有数据（这很好）。当用户单击**主窗体上**的按钮时，代码会根据用户在文本框中输入的内容构建一个包含 WHERE 子句的 SQL 字符串。到目前为止一切顺利，我以前做过。现在我无法弄清楚的部分（因为我以前没有做过）正在使用刚刚创建的 SQL 填充该子表单！构建 SQL 字符串没有问题，我只是不太了解 Access VBA，无法知道使用什么代码从主窗体更新子窗体并让它在查询运行后显示记录集。

编辑：据我了解，不推荐使用 QueryDef 方法，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:45:05.170

这就是我所做的，因为它似乎是唯一的方法。

1) 构建了一个名为“zqry_PlaceHolder”的查询。在我的情况下，这是正在使用的数据集（只有 WHERE 会改变）。我确实在此 (WHERE dbo_project.projectid = "_") 中添加了一个 WHERE 子句，但它不会返回任何内容，以免延迟主窗体的显示。

2) 在子表单中，将源对象设置为我刚刚构建的查询“Query.zqry_PlaceHolder”。这是必需的。

3) 当用户单击主窗体上的按钮时，VBA 代码将运行。*它在字符串变量sWhereFilter*中创建 WHERE 子句，然后将其添加到 SQL 字符串中：

```
'Build SQL string
sSQL = Empty  'Ensure string is empty
sSQL = "SELECT Proj_Locs.ProjectID, dbo_PROJECTS.PROJECTID, Proj_Locs.Location, Master_Scans.FileName, Proj_Locs.Title, dbo_PROJECTS.TITLE" & vbCrLf
sSQL = sSQL & "FROM (tbl_Project_Locations AS Proj_Locs" & vbCrLf
sSQL = sSQL & "    LEFT JOIN dbo_PROJECT AS dbo_PROJECTS ON Proj_Locs.ProjectID = dbo_PROJECTS.PROJECTID)" & vbCrLf
sSQL = sSQL & "    LEFT JOIN tblMasterScans AS Master_Scans ON Proj_Locs.ProjectID = Master_Scans.Project" & vbCrLf
sSQL = sSQL & sWhereFilter
sSQL = sSQL & "ORDER BY Proj_Locs.ProjectID ASC, dbo_PROJECTS.PROJECTID ASC;" 
```

然后我抛出一个“请稍候”表单，让用户知道事情正在处理，并将子表单的 RecordSource 设置为构建的 SQL 字符串：

```
DoCmd.OpenForm "frm_PleaseWait", acNormal
DoCmd.Hourglass True
DoCmd.RepaintObject acForm, "frm_PleaseWait"  'Needed to show everything in the form immediately, otherwise there's a delay
Me.subform_Results.Form.RecordSource = sSQL  'This updates the subform AND executes it, refreshing the results
Beep  'Let user know processing completed
Me.txt_RecordsReturned = Me.subform_Results.Form.Recordset.RecordCount  'Let user know how many records were returned with their query (if any) 
```

这有效，并且不会更改占位符查询“zqry_PlaceHolder”。

我希望这对其他人有帮助，因为它对我来说并不那么直观。如果有另一种/更好的方法，我完全愿意学习新东西！

# image - 矩形或圆形的 SVG 图像显示为黑色

> ID：12751745
> 
> 赞同：3
> 
> 时间：2012-10-05T18:06:47.050
> 
> 标签：image, svg, d3.js

我一直在搜索 stackoverflow 和谷歌，以找到我的代码无法正常工作的原因。我正在尝试放置一个图像作为一个圆圈的填充，但它只显示为黑色。这就是我所拥有的。

```
<svg width="100%" height="99%">
    <defs>
        <pattern id="tile-ww" x="0" y="0" patternunits="userSpaceOnUse" width="24" height="24">    
            <img xlink:href="distributor-sprite.png" width="24" height="24" x="0" y="0">
        </pattern>
        <pattern id="tile-us" x="0" y="0" patternunits="userSpaceOnUse" width="24" height="24">
            <img xlink:href="distributor-sprite.png" width="24" height="24" x="0" y="0">
        </pattern>
    </defs>

    <g id="stage" transform="translate(80,10)">
        <g class="node" transform="translate(380,44.375)">
            <rect class="name" ry="3" rx="3" height="15" x="-32" width="32"></rect>
            <circle r="54.5" id="circle-4" fill="url(#tile-ww)"></circle>
            <text id="text-4" x="-10" dy=".35em" text-anchor="end" z="1">Jon</text>
        </g>
    </g>
</svg> 
```

我也尝试过使用 css 应用该模式，但无济于事

```
.node circle {
    cursor: pointer;
    stroke: #282828;
    stroke-width: 1.5px;
    fill: url(#tile-ww);
} 
```

我已经两次和三次检查图像是否正确。我尝试过相对路径和绝对路径，但没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T18:12:07.867

在你的定义中使用`<image />`而不是。为我工作！`<img />``pattern`

`<img>`是 HTML5 规范元素，同时`<image>`是 SVG 规范的一部分。更多信息：http: [//www.w3.org/TR/SVG/struct.html#ImageElement](http://www.w3.org/TR/SVG/struct.html#ImageElement)

# java - java变量参数列表中至少需要一个元素

> ID：12751746
> 
> 赞同：27
> 
> 时间：2012-10-05T18:06:46.913
> 
> 标签：java, arguments, minimum, variadic-functions

在此代码结构中：

```
public MyClass(Integer... numbers) {
    do_something_with(numbers[]);
} 
```

是否可以要求`numbers`至少包含一个条目，以便在编译时检查？（当然，在运行时，我可以检查 numbers.length。）

显然我可以这样做：

```
public MyClass(Integer number, Integer... more_numbers) {
    do_something_with(number, more_numbers[]);
} 
```

但这不会很优雅。

我想这样做的原因是确保子类不会简单地忘记调用这个构造函数，这将默认调用`super()`列表中没有数字的调用。在这种情况下，我宁愿得到熟悉的错误信息：`Implicit super constructor is undefined. Must explicitly invoke another constructor`.

是否有另一种方法可以实现相同的目标，例如一些将这个构造函数标记为非隐式的@-annotation？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-12-07T19:51:09.423

我认为拥有至少 1 个参数的最佳方法是添加一个这样的参数：

```
public MyClass (int num, int... nums) {
    //Handle num and nums separately
    int total = num;
    for(i=0;i<nums.length;i++) {
        total += nums[i];
    }
    //...
} 
```

添加相同类型的参数和可变参数将强制构造函数需要它（至少一个参数）。然后，您只需要单独处理您的第一个参数。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-05T22:23:06.647

我想一种令人难以置信的 hacky 方法是创建一个无参数方法并将其标记为已弃用。然后用这两个标志编译：`-Xlint:deprecation -Werror`. 这将导致对已弃用方法的任何使用都成为编译时错误。

编辑（在最初的答案之后很长时间）：

一个不那么老套的解决方案是放弃`MyClass(Integer... numbers)`构造函数并将其替换为`MyClass(Integer[] numbers)`（并添加一个私有的无参数构造函数）。它阻止编译器隐式使用超类构造函数，但没有任何参数，并为您提供编译时错误消息。

```
./some_package/Child.java:7: error: constructor Parent in class Parent cannot be applied to given types;
    public Child(Integer[] args) {
                                 ^
  required: Integer[]
  found: no arguments
  reason: actual and formal argument lists differ in length 
```

代价是您的调用语法会变得更加冗长：

```
new Child(new Integer[] {1, 2, 3}); 
```

您当然可以编写一个辅助函数来帮助解决这个问题，例如。

```
public static Child newInstance(Integer... numbers) {
    return new Child(numbers);
}

@SafeVarargs
public static <T> T[] array(T... items) {
    return items;
} 
```

进而：

```
Child c0 = Child.newInstance(1, 2, 3);
Child c1 = new Child(array(1, 2, 3)); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-05T18:37:34.827

验证的唯一方法是验证参数。

验证参数：

```
if (numbers == null || numbers.length == 0 ) {
            throw new IllegalArgumentException("Your angry message comes here");
        } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-05T18:39:02.003

如评论中所述，不，似乎不可能强制 var arg 至少大小为 1。

我能想到的唯一编译时修复是简单地要求一个数组 ( `Integer[]`) 作为构造函数的参数。子类仍然可以在其构造函数中使用 var arg，并且该类的任何其他用户只需在调用构造函数之前从所需的参数创建一个数组。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T19:31:05.220

```
public MyClass(boolean ignore, Integer... numbers) {
    do_something_with(numbers[]);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-05T18:46:32.177

您可以做到这一点的一种非常hacky的方法是制作该方法的私有版本，不带参数。这至少会阻止此类之外的任何人在编译时传递一个参数，但它不会提供有用的错误消息。但是如果它是非常重要的，至少传入一个值，那就是这样。

```
private MyClass() {
    // This exception will be thrown only if you manage to do a "new MyClass()"
    // within your own class since it is private.
    throw new RuntimeException("Why did you do this?!?"); 
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-05T19:45:12.470

我认为它不在 ̶f̶u̶n̶c̶t̶i̶o̶n̶ 类本身，而是当您调用 ̶f̶u̶n̶c̶t̶i̶o̶n̶ 类时。在调用 ̶f̶u̶n̶c̶t̶i̶o̶n̶ 类之前，请确保您的数组具有元素。

# java - 如何通过代码获取mp4格式的youtube视频的url

> ID：12751748
> 
> 赞同：0
> 
> 时间：2012-10-05T18:07:01.010
> 
> 标签：java, android, youtube, youtube-api

我有自己的视频播放器，只支持 mp4 格式。所以我需要为它提供 mp4 格式的视频。

我正在解析从 youtube 数据 api 获得的内容。目前 youtube 提供带有 chromeless 播放器的 swf 格式或 flash 格式的视频内容。但我想获取包含 mp4 格式视频的 url。我无法使用keepvid等其他软件将该链接转换为mp4格式。我希望它只通过代码完成。

请提出一些建议。

# oracle - Toad for Oracle 10.6 与 11.5：编辑大型包时的性能问题

> ID：12751752
> 
> 赞同：1
> 
> 时间：2012-10-05T18:07:08.200
> 
> 标签：oracle, plsql, package, toad, utility

实际上，我正在使用 Toad 10.6 来处理 PL-SQL 代码。现在，我们公司正准备迁移到 Toad 11.5，但是，我注意到 11.5 上的大型 PL-SQL 编辑速度非常慢，以至于我无法使用该版本。

实际上，在 Toad 10.5 上加载一个包含大约 1.4Mb 代码的包文件需要***5 秒***，而当我们使用“格式化程序实用程序”自动格式化该文件时，也会花费同样的时间。

**相同**的文件，在 11.5 版上，加载需要***3.5 分钟***，当我们尝试格式化文档时花费相同的时间。在此期间，应用程序在 Windows 任务管理器中报告为“无响应”。

有人知道如何提高 11.5 版本的性能吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T19:26:13.223

经过一些研究，我发现应该**禁用****Check Rule as you Type**选项以避免我们正在讨论的行为。

 **要禁用：

1.  打开编辑器
2.  右键单击它
3.  搜索**分析**
4.  **键入时**取消选中检查规则

 **非常感谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T21:42:49.863

[您是否向https://support.quest.com/](https://support.quest.com/)提交了支持请求？

我没有任何大的源文件可以玩。我拥有的最大的包大约是 200kb。在 9.7 中，我能够在约 20 秒内和 11.6 中约 40 秒内打开一个 12mb 的 .sql 文件，其中包含 43,000 行插入语句。

我对 TOAD 10 从来没有任何运气，我讨厌它，它经常崩溃并占用大量内存，所以我坚持使用 9.7 几年。最近我也使用了 11.5 和 11.6，运气好得多。这三个并排运行，我可以毫无问题地同时打开它们。您可以只安装两个版本并在一个中打开大文件并在另一个中执行其他所有操作吗？****

# logic - 一阶逻辑推理的混乱

> ID：12751753
> 
> 赞同：0
> 
> 时间：2012-10-05T18:07:08.727
> 
> 标签：logic, artificial-intelligence

我在理解《人工智能现代方法》一书中关于一阶逻辑推理的以下段落时遇到了一些困难：

命题化技术可以完全通用；也就是说，每个一阶知识库和查询都可以以保留蕴涵的方式进行命题化。因此，我们有一个完整的蕴涵决策程序......或者可能没有。有一个问题：当知识库包含一个函数符号时，可能的基础术语替换的集合是无限的！例如，如果知识库提到了*父亲*符号，则可以构造无限多个嵌套术语，例如*父亲(Father(Father(John))) 。*我们的命题算法将难以处理无限大的句子集。

幸运的是，由于 Jacques Herbrand（1930）有一个著名的定理，即如果一个句子被原始的一阶知识库所蕴涵，那么就有一个证明只涉及命题化知识库的*有限*子集。任何这样的子集在它的基本术语中都有最大的嵌套深度，我们可以找到子集 y 首先生成所有具有常量符号（*理查德*和*约翰*）的实例，然后是深度为 1 的所有术语（*父亲（理查德）*和*父亲（约翰）* )，然后是深度为 2 的所有项，依此类推，直到我们能够构造出蕴涵句子的命题证明。

* * *

我知道在替换过程中会产生无限的嵌套项——但是下一段谈论这个定理完全超出了我的想象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T16:08:18.187

Herbrand 定理是半可判定的。目标是找到不再满足查询的实例。您从深度 1 开始并继续，直到发现不可满足。如果可以满足，它可能会无限循环。

# javascript - 悬停时的jquery图像预览-如何设置固定位置？

> ID：12751755
> 
> 赞同：0
> 
> 时间：2012-10-05T18:07:20.800
> 
> 标签：javascript, jquery, css, jquery-plugins, jquery-selectors

请参考[这里](http://jsfiddle.net/FsPSZ/)。无论我翻转什么图像缩略图，我都希望图像预览/工具提示位于相同的位置，我无法让它工作。我已经设法使用内联 CSS 将它设置为绝对位置，但是根据我将鼠标悬停在它上面的缩略图仍然会改变该位置。

这是我的 jsfiddle：http: [//jsfiddle.net/FsPSZ/](http://jsfiddle.net/FsPSZ/)

如果有人能解释我如何让预览图像保持在所有 3 个确定的位置，那就太好了。

编辑：感谢凝灰岩​​在此处发布我所追求的内容：http://jsbin.com/ogutiv/1/edit[问题](http://jsbin.com/ogutiv/1/edit)是，我怎样才能拥有这个动画？我尝试使用 CSS3 和 Opacity 过渡，但无法使其正常工作。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:34:05.867

好的，我不确定你的意思是工具提示的位置应该相对于它们各自的缩略图是固定的，还是所有工具提示都应该出现在一个固定的位置。

无论哪种情况，您都可以在没有 JS 的情况下执行此操作，因为您的所有 JS 都用于计算相对于光标的位置，而您说您不想要。

这是一个演示，在相对于缩略图的固定位置显示工具提示：http: [//jsbin.com/ogutiv/2/edit](http://jsbin.com/ogutiv/2/edit)

这是一个演示，在相对于所有缩略图的容器的单个固定位置显示工具提示：http: [//jsbin.com/ogutiv/1/edit](http://jsbin.com/ogutiv/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:11:25.007

使用这样的东西

```
$("#img").mouseover(function(){
$(this).css("postion","absolute");
})

$("#img").mouseout(function(){
$(this).css("postion","relative");
}) 
```

# objective-c - 属性在第一次按下按钮时设置，并且在随后按下时不会更改

> ID：12751761
> 
> 赞同：0
> 
> 时间：2012-10-05T18:07:48.570
> 
> 标签：objective-c, cocoa-touch, properties

我创建了一个包含一个选择器的 ViewController。它的视图被触发以显示并使用四个数据数组之一填充选择器，具体取决于在超级视图中按下了四个按钮中的哪一个。我给子视图一个`int`名为 的属性`pickerType`，然后在按钮代码中设置它，如下所示：

```
 - (IBAction)chooseDepType:(id)sender
    {

        if (pickerView==nil)
        {
           pickerView = [[Picker alloc] initWithNibName:@"Picker" bundle:nil];
           //send message to next view telling which array to load in picker
           pickerView.pickerType=1;
        }
        [self.view addSubview:pickerView.view];
    } 
```

其他按钮方法看起来相同，只是`pickerType`设置为不同的值。然后，在子视图中，我设置了数据源和委托方法，如下所示：

```
 -(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView;
    {
        if(pickerType_ ==1)
        {
            // return the appropriate number of components, for instance
            return 1;
        }
    } 
```

我遇到的问题是，即使我`pickerView`在每个按钮的代码中设置了一个新值，我的子视图也没有识别出该值已更改。基本上，无论我按下哪个按钮，它都会向我显示一个选择器，其中填充了与我按下的*第一个*按钮相对应的数据。使事情复杂化，也许，superview 是 Master-Detail 模板中的 Detail 视图。

`pickerType`属性是这样创建的：

```
 @property (assign) int pickerType;

    @synthesize pickerType=pickerType_; 
```

我正在使用 ARC。我不知道这是否是我的一个愚蠢的编程错误，或者与视图的生命周期有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:15:21.703

由于您正在检查您的`Picker`是否已经创建：

```
if (pickerView==nil) 
```

在设置类型之前：

```
 pickerView.pickerType=1; 
```

下次按下按钮时，`pickerView`已经存在，执行会跳过的主体`if`并且类型不会改变。

要解决此问题，请将排版语句移出`if`块。

顺便说一句，如果你有四个按钮几乎都做同样的事情，你可以让它们都触发相同的动作，并通过它们的属性`IBAction`区分哪个按钮被按下：`tag`

```
- (IBAction)showPicker: (id)sender
{
    if (pickerView==nil)
    {
       pickerView = [[Picker alloc] initWithNibName:@"Picker" bundle:nil];
    }
    // Each button's tag could correspond exactly to the appropriate pickerType,
    // or have any other meaning you choose.
    [pickerView setPickerType:[sender tag]];
    [self.view addSubview:pickerView.view];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:16:22.060

如果`pickerView`不是 nil，那么您所做的就是使其视图成为当前控制器的子视图（如果没有其他代码将其删除，则它已经是），而不更改属性。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-05T19:20:12.277

分配新类型后尝试调用 [pickerView reloadAllComponents]；

# python - 被压入堆栈的帧顺序

> ID：12751763
> 
> 赞同：1
> 
> 时间：2012-10-05T18:08:11.560
> 
> 标签：python, compiler-construction, stack, vm-implementation

假设您有以下代码。

```
def square(x):
    print ("Just before square returns")
    for k in dir():
        print ("{0} -------> {1}".format(k, eval(k)))
    return x*x
def cube(x):
    print ("Just before cube returns")
    for k in dir():
        print ("{0} -------> {1}".format(k, eval(k)))
    return x*x*x

x = 5
print ("cube(square({0})) = {1}".format(x, cube(square(x))))
print ("Just before main returns")
for k in dir():
    print ("{0} -------> {1}".format(k, eval(k))) 
```

运行此代码会显示以下内容

```
Just before square returns
x -------> 5
Just before cube returns
x -------> 25
cube(square(5)) = 15625
Just before main returns
__builtins__ -------> <module 'builtins' (built-in)>
__cached__ -------> None
__doc__ -------> None
__file__ -------> exampleOne.py
__name__ -------> __main__
__package__ -------> None
cube -------> <function cube at 0x1037b78>
square -------> <function square at 0x1037af0>
x -------> 5 
```

我们很困惑。square 函数是否首先被压入堆栈并计算其返回值并将其传递给 cube 函数？另一种可能是先调用cube函数，然后在解析参数的过程中，必须调用square函数。你能告诉我们什么？这取决于编译器或语言吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:11:52.680

好吧，当然它可以取决于语言，但您的示例是 Python。

在 Python 中，函数参数总是在调用它们作为参数的函数之前进行评估。（请参阅[文档](http://docs.python.org/reference/expressions.html#calls)。）由于`square(x)`作为 的参数传递`cube`，`square`因此首先调用，然后将结果传递给`cube`. 换句话说，表达式中的函数调用总是“从内到外”进行评估，最里面的首先评估。这就像数学表达式的求值顺序（最里面的括号在前）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:19:33.627

```
x= 0
def j(i):
     global x
     x+=2
     print (x)

     return i+1

def h(i):
     global x
     print (x)
     return i+1

print h(j(1))  \\prints 2,2,3 
```

参数在通过之前进行评估。可能可以编写它以便事情以另一种方式发生，但我不知道有任何语言可以这样做，因为它看起来非常不直观。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T18:24:18.750

最里面的总是首先被评估，即最后一个被放置在堆栈上。

看看这个例子：

```
>>> def func():
        def func1():
            print (1)
        def func2(x):
            print (2)
        def func3(y):
            print (3)
        func3(func2(func1()))

>>> func()
1                         #func1() was called first
2                         #then func2()   
3                         #last is func3() 
```

使用`dis.dis()`：

```
>>> dis.dis(func)
  2           0 LOAD_CONST               1 (<code object func1 at 0xb76aa770, file "<pyshell#19>", line 2>)
              3 MAKE_FUNCTION            0
              6 STORE_FAST               0 (func1)

  4           9 LOAD_CONST               2 (<code object func2 at 0x8a10530, file "<pyshell#19>", line 4>)
             12 MAKE_FUNCTION            0
             15 STORE_FAST               1 (func2)

  6          18 LOAD_CONST               3 (<code object func3 at 0x8a102f0, file "<pyshell#19>", line 6>)
             21 MAKE_FUNCTION            0
             24 STORE_FAST               2 (func3)

  8          27 LOAD_FAST                2 (func3)      #func3 is placed on stack
             30 LOAD_FAST                1 (func2)      #func2 gets placed on the stack
             33 LOAD_FAST                0 (func1)      #finally it's func1 that gets
                                                        # placed on stack
             36 CALL_FUNCTION            0
             39 CALL_FUNCTION            1
             42 CALL_FUNCTION            1
             45 POP_TOP                          #Removes the top-of-stack item.
             46 LOAD_CONST               0 (None)
             49 RETURN_VALUE 
```

# javascript - 如何动态编辑 JW Player JavaScript？

> ID：12751766
> 
> 赞同：1
> 
> 时间：2012-10-05T18:08:28.597
> 
> 标签：javascript, jquery, jwplayer

我的页面中有一个文本框，其中包含 JW 播放器的代码：

```
<div id="video-container">Loading the player ...</div>

<script type="text/javascript">
    jwplayer("video-container").setup({
        autostart: false,
        skin: "/skins/modieus/modieus.zip",
        image: "/wp-content/uploads/picture-filename.jpg",
        file: "/wp-content/uploads/video-filename.mp4",
        flashplayer: "/jwplayer/player.swf",
        volume: 80,
        width: 853,
        height: 480
    });
</script> 
```

此外，我还有其他三个文本区域和两个复选框：

1.  第一个文本框是图像的名称。
2.  第二个是视频文件的名称。
3.  第三个是一个单独的占位符，将放置生成的脚本输出（见下文）。

您可以在上面的 JavaScript 中看到它们：

*   `image: "/wp-content/uploads/picture-filename.jpg"`
*   `file: "/wp-content/uploads/video-filename.mp4"`

当您单击第一个复选框时，我们需要从文本区域中抓取脚本，并将图像和视频文件的名称从它们自己的文本框中添加到正确的位置。然后，此生成的代码将添加到页面底部的第三个文本区域。

如果用户点击第二个复选框，那么 JW Player 的原始（简单）代码应该从文本区域中获取并插入到页面底部的第三个文本区域中，而不进行任何修改。

我需要使用什么代码来实现这一点？这是通过服务器端的 PHP 还是客户端的 jQuery 更好地完成？

# javascript - Jquery Search Auto Complete 不调用第一个 ajax 加载

> ID：12751773
> 
> 赞同：1
> 
> 时间：2012-10-05T18:09:09.187
> 
> 标签：javascript, jquery, ajax, search, autocomplete

当用户在输入框中输入至少三个字符时，我想在我的网站上放置自动完成功能。我为此使用了 autocomplete.js 插件。我正在做的是keyup，ajax调用发送到一个url，它以数组的形式返回所有搜索结果。然后我们调用我们的 autoComplete.Set("mygroup1", srvcsCitiesSafe, "newPopupStyle"); $("#CAT_Custom_283923").trigger('keyup');

问题是它没有在第一次 keyup ajax 调用时显示结果。但在第二次 ajax 调用和儿子它工作正常。谁能告诉我发生了什么...这是我网站的[网址 http://dbtrialsite.businesscatalyst.com/](http://dbtrialsite.businesscatalyst.com/)自动完成文本框字段是郊区/城市：

以下是我的代码

```
$(document).ready(function() {

    $("#CAT_Custom_283923").keyup(function() {

        var mystring = $('#CAT_Custom_283923').val();    

        if (mystring.length == 2) {
            console.log(mystring);
            console.log(mystring.length);
            console.log("Lenght is greater than 2");

            var srvcsCitiesSafe=[];
            var srvcsPCSafe=[];

            var dataString = 'CAT_Custom_283923='+ $('#CAT_Custom_283923').val()+
                '&CAT_Custom_284431='+$('#CAT_Custom_284431').val() ;

            $.ajax({
                type: "POST",
                url: 'http://dbtrialsite.businesscatalyst.com/Default.aspx?CCID=17248&FID=100351&ExcludeBoolFalse=True&PageID=9350053',

                data: dataString,

                beforeSend: function () {
                    //put loader here, or hide something    
                    console.log('Loading...');
                },
                success: function (response) {

                    console.log('Ok Results Loaded');

                    var srvcs_json = [];
                    mydata=$(response);

                    $(".srvcs", mydata).each(function() {
                        var myString=$(this).html();
                        srvcs_json.push( jQuery.parseJSON( myString ) );
                    });

                    var srvcsCities =[];
                    var srvcsPC =[];
                    for (var i=0; i < srvcs_json.length; i++) {
                        srvcsCities[i] = srvcs_json[i]['city'];
                        srvcsPC[i] = srvcs_json[i]['postcode'];
                    }

                    srvcsCitiesSafe = eliminateDuplicates(srvcsCities);
                    srvcsPCSafe     = eliminateDuplicates(srvcsPC);
                },
                complete: function () {
                    //calling autofill function
                    console.log("auto called");
                    autoComplete.Set("mygroup1", srvcsCitiesSafe, "newPopupStyle");
                    $("#CAT_Custom_283923").trigger('keyup');
                }

            });    //end ajax call
        }

    });
////////////////////////////////////////////////////////////////////////////////////

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:03:31.787

测试您的网络服务我发现了一个问题。在第一次 ajax 调用之后，自动完成不会显示内容，但它就在那里。然后，当我调试 JavaScript 代码并将焦点放在输入上时，显示了选项。也许，这个自动完成版本有一个错误。为了“解决”您的问题，我这样做了：

```
$.ajax({
type: "POST",
url: 'http://dbtrialsite.businesscatalyst.com/Default.aspx?CCID=17248&FID=100351&ExcludeBoolFalse=True&PageID=9350053',

data: dataString,

beforeSend : function() {
    //put loader here, or hide something    
    console.log('Loading...');
    $('#ajax-loader').show();
},

success: function(response){
    console.log('Ok Results Loaded');
    $('#ajax-loader').hide();

    var srvcs_json = [];
    mydata=$(response);

    $(".srvcs", mydata).each(function(){
        var myString=$(this).html();
        srvcs_json.push( jQuery.parseJSON( myString ) );
    });

    var srvcsCities =[];
    var srvcsPC =[];
    for (var i=0; i < srvcs_json.length; i++) {
        srvcsCities[i] = srvcs_json[i]['city'];
        srvcsPC[i] = srvcs_json[i]['postcode'];
    }

    srvcsCitiesSafe = eliminateDuplicates(srvcsCities);
    srvcsPCSafe     = eliminateDuplicates(srvcsPC);

    console.log("auto called");
    autoComplete.Set("mygroup1", srvcsCitiesSafe, "newPopupStyle");
    $("#CAT_Custom_284431").focus();
    $("#CAT_Custom_283923").focus();
}
});//end ajax call 
```

我希望我对你有所帮助。

# patch - 为什么 bsdiff.exe 对这个较小的文件有问题？

> ID：12751775
> 
> 赞同：1
> 
> 时间：2012-10-05T18:09:18.200
> 
> 标签：patch, binary-data, binary-diff

我正在使用 bsdiff.exe 构建软件补丁并将其与 bspatch.exe 一起应用，到目前为止，对于小于 120MB 的文件没有任何问题。我拥有的一个二进制文件以前是 21MB，现在是 77MB，而且 bsdiff 似乎无限期地挂在上面。

根据[文档](http://www.daemonology.net/bsdiff/)，“bsdiff 非常消耗内存。它需要 max(17*n,9*n+m)+O(1) 字节的内存，其中 n 是旧文件的大小，m 是大小的新文件。” *这解释了大文件的问题，但是当增量*较大时，问题似乎发生了。

有没有人有这方面的信息？任何事情都会有帮助，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-30T20:51:06.480

在尝试处理仅包含 2MB DSP 可执行代码的文件时，我还遇到了 bsdiff 崩溃的问题。

经过一些调试后，我确定问题出在 qsufsort 函数中，该函数用于基于“旧”文件创建后缀数组。qsufsort 调用一个名为 split 的函数，该函数递归地调用自身。在崩溃的情况下，递归调用发生了很多次，以至于程序耗尽了堆栈空间并引发了异常。

正如该线程所建议的那样： [http](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=409664) ://bugs.debian.org/cgi-bin/bugreport.cgi?bug=409664 解决方案是用不同的解决方案替换 qsufsort 以生成后缀数组。后缀数组的维基百科条目引用 SA-IS，所以我从这里下载了源代码： [https ://sites.google.com/site/yuta256/sais](https://sites.google.com/site/yuta256/sais)

然后，我将 bsdiff.c 与 sais.c 和 sais.h 一起重建，并将对 qsufsort 的调用替换为：

I[0] = 旧尺寸；sais(old, I+1, oldsize);

现在 bsdiff 每次都有效，而且速度也更快！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:21:20.623

尝试此处列出的其他二进制差异程序之一：

[https://stackoverflow.com/questions/688504/binary-diff-tool-for-very-large-files](https://stackoverflow.com/questions/688504/binary-diff-tool-for-very-large-files)

这两个文件之间的差异需要的内存超出了表示这两个文件所需的内存。因此，处理两个具有许多差异的二进制文件将需要比两个相同文件更多的内存。

较小的文件有问题，因为软件中存在错误。Colin Percival，写它的人已经承认了这个错误，并说他没有时间修复它。

[https://www.daemonology.net/bsdiff/](https://www.daemonology.net/bsdiff/)

# tsql - SSRS 2008：为什么声明的查询变量会显示在“定义查询参数”窗口中？

> ID：12751778
> 
> 赞同：0
> 
> 时间：2012-10-05T18:10:29.890
> 
> 标签：tsql, ssrs-2008, bids

我在 Reporting Services 2008 中创建数据集时遇到问题。这是我要使用的查询（通用化以供公众使用）：

```
Declare @PersonID as int
set @PersonID = (select top 1 personID from People where name = @PersonName)

select (some columns)
from [otherTable]
where personID = @PersonID 
```

我只有一个输入参数：`@PersonName`. 但是，Studio 2008 似乎认为“定义查询参数”窗口中`@PersonID` *还*需要一个值。所以当我尝试只输入一个值时`@PersonName`，它给了我“这个变量已经被定义”。

我之所以通过`@PersonName`，是因为我需要显示一个人类可读的人员列表，以便从下拉列表中选择，作为报告的唯一面向用户的参数。我意识到我可以做一个子查询并忘记上面示例中的变量，但是我的实际查询更大/更丑，而且我不能准确地向数据表添加索引，所以我想限制表扫描。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:41:59.583

您可以创建一个新数据集以与您的参数一起使用。

首先，一个带有查询的新数据集

```
SELECT PersonID, PersonName FROM People 
```

然后，在您的报告参数上（为了清楚起见，我将名称更改为*Person*），在“可用值”部分中，将其切换为“从查询中获取值”。选择您的新数据集，并将 Value 字段设置为 PersonID，将 Label 字段设置为 PersonName。

最后，将主数据集的 @PersonID 参数设置为报表参数 [@Person]。

这样，您可以显示列表，但仍然可以使用 ID。不需要 PersonName 报告参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T23:44:01.853

```
Declare @PersonName char(20) 

select (some columns)
from  [otherTable] 
join  [People]
  on  [otherTable].[personID] = [People].[personID]
where [People].[name] = @PersonName 
```

在您认为它会出现性能问题之前先试一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T21:54:47.577

为什么不把查询变成一个存储过程呢？根据我的经验，存储过程提供了更好的性能（但要注意参数嗅探）以及可重用性。

编辑：

它会明确消除您的问题。

# eclipse - 只需要在服务器端将外部库添加到 GWT 项目

> ID：12751783
> 
> 赞同：1
> 
> 时间：2012-10-05T18:11:00.737
> 
> 标签：eclipse, gwt

我希望将一堆外部 java 库（jar 文件）集成到 GWT 项目中。请注意，我不需要将它们编译成 javascript，因为它们仅在服务器端被调用。我已将文件复制到 web-inf/lib 中，但 eclipse 似乎无法识别它们。我只需要从服务器端调用这些 jar 文件中的函数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T18:19:19.577

要在 Eclipse 的 GWT 项目中包含外部 jar，您必须执行 2 个步骤：

*   像你已经做的那样把文件放在 WEB-INF/lib 目录中
*   在 Eclipse 中的 Java 构建路径中包含这些 jar。您将在项目 -> 属性 -> Java 构建路径中找到它

如果你把罐子放在 WEB-INF 中，并且只从服务器端调用它的方法，你会没事的。

# python - 尽管给出了 2 个参数，为什么 lambda 仍要求 2 个参数？

> ID：12751787
> 
> 赞同：9
> 
> 时间：2012-10-05T18:11:23.117
> 
> 标签：python, map, filter, lambda

这是我的代码：

`filter(lambda n,r: not n%r,range(10,20))`

我得到错误：

`TypeError: <lambda>() takes exactly 2 arguments (1 given)`

所以我尝试了：

`foo=lambda n,r:not n%r`

效果很好。所以我认为这会起作用：

`bar=filter(foo,range(10,20))`

但同样：

`TypeError: <lambda>() takes exactly 2 arguments (1 given)`

类似的事情也发生在地图上。但减少工作正常。我究竟做错了什么？我是否遗漏了使用过滤器或地图所需的重要内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T18:14:25.347

为什么使用 2 个参数？`filter()`并且`map()`只需要一个带有单个参数的函数，例如：

```
filter(lambda x: x >= 2, [1, 2, 3])
>>> [2, 3] 
```

要找到一个数字的因数（您也可以用 lambda 替换它）：

```
def factors(x):
    return [n for n in range(1, x + 1) if x % n == 0]

factors(20)
>>> [1, 2, 4, 5, 10, 20] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-15T14:31:18.793

如果您在键值集上运行 map 或 filter，则在 (k,v) 周围添加括号，例如：

```
 .filter(lambda (k,v): k*2 + v) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-05T18:13:52.407

因为`filter`在 python 中只接受一个参数。因此，如果您想在过滤器中使用它，您需要定义一个只接受一个参数的 lambda/函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T18:14:26.773

您的 lambda 函数有两个参数`n`和`r`. `filter`必须使用一个函数调用，该函数接受一个参数并`True`在应保留该项目时返回。也许您打算定义`r`或`n`在您的 lambda 函数之外，然后在闭包中捕获它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-03T04:27:23.187

这是因为 map 函数实现的性质，map、reduce 和 filter 的第二个参数是列表，但它如何读取并将值传递给这些方法的第一个参数不同，如果您在下面看到 reduce 函数默认从列表中选择 2 个元素并传递给 lambda 但是 filter 和 map 只需要一个元素。

```
>>>reduce(lambda x,y: x+ y,range(10))  
45  

>>>filter(lambda x,y: x+ y,range(10))  
Traceback (most recent call last):  
File "<stdin>", line 1, in <module>  
TypeError: <lambda>() takes exactly 2 arguments (1 given)  
>>>filter(lambda x: x+ 1,range(10))  
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]  
>>>  

>>>map(lambda x,y: x+ y,range(10))    
Traceback (most recent call last):  
File "<stdin>", line 1, in <module>  
TypeError: <lambda>() takes exactly 2 arguments (1 given)  
>>>  
>>>map(lambda x: x+1, range(10))  
[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]  
>>> 
```

# android - 保存内部数据的最佳方法？

> ID：12751789
> 
> 赞同：2
> 
> 时间：2012-10-05T18:11:23.700
> 
> 标签：android, android-lifecycle

问题是：当我开始学习为 android 开发时，我想我会将我的内部数据存储在一个专用类中的公共静态变量中，仅用于此目的，因此我可以轻松地从任何活动中访问它们，而且它仍然存在非常重要，不会有任何重复，并且这些值始终是唯一的，就像 Singleton 模型一样。这非常有效，但它肯定不是最漂亮的解决方案。当用户通过主页按钮将应用程序置于后台时，问题就开始了。它仍然存在，因为天知道有多少时间，也许是几分钟，也许是几天，甚至更多......然后他重新打开应用程序，所有这些静态变量都变为空，因为系统已经破坏了它们。这些变量中的一些是简单的字符串，但有些是非常复杂的、自己的类。

第一个问题是，当应用程序进入后台时，我可以依赖任何全局挂钩，我可以在哪里保存这些数据？因此，当用户再次将应用程序拉到前台时，我可以从保存状态重新初始化这些变量。

第二个问题是，保存这些复杂数据的最佳方法是什么？据我了解，对于保存字符串 SharedPreferences 很好，但是更复杂的类呢？我也可以使用 SharedPreferences，还是应该使用其他东西？

目前我能想到的就这些了，谢谢提前帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T18:13:46.107

类中的整个静态变量的坏主意。忽略整个全局变量崩溃，它们不会持续存在。如果您需要持久化数据，您应该使用[SharedPreferences或数据库。](http://developer.android.com/reference/android/content/SharedPreferences.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:16:37.997

对于您的第一个问题，我相信您正在寻找类似于活动生命周期中的 onResume() 方法的东西。

对于有关存储的问题，可以使用 sqlLite。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T18:16:44.447

本[文档](http://developer.android.com/guide/topics/data/data-storage.html)解释了 Android 上的所有数据存储选项。SharedPreferences 非常适合简单类型，但听起来你最好使用一个或多个[SQLite](http://developer.android.com/guide/topics/data/data-storage.html#db)数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-03T13:47:22.317

您肯定需要使用共享首选项，这是一个最简单的示例：

```
//Create a new class

public class PizzaApplication extends Application {

private static String sharedPreferences = "Pizza";
private static Context context;

@Override
public void onCreate (){
    super.onCreate();
    context = this;
}

public static void saveString(Context context, String key, String value) {
    SharedPreferences sharedPref = context.getSharedPreferences(sharedPreferences,Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPref.edit();
    editor.putString(key, value);
    editor.commit();
}

public static String getString(Context context, String pKey) {
    SharedPreferences sharedPref = context.getSharedPreferences(sharedPreferences,Context.MODE_PRIVATE);
    return sharedPref.getString(pKey, null);
}
}

//FROM ACTIVITY
//Save string

PizzaApplication.saveString(getApplicationContext(), "country", "test");

//Receive it 

String testString = PizzaApplication.getString(getApplicationContext(), "country"); //returns "test" 
```

# javascript - 将 HiddenField 值传递给 javascript 中的用户控件

> ID：12751796
> 
> 赞同：0
> 
> 时间：2012-10-05T18:12:02.780
> 
> 标签：javascript, asp.net

我有一个`HiddenField`根据用户单击的内容更改值的值。在同一页上，我有一个不可见`Panel`的`User Control`内部。当面板变得可见时，我想将此值传递给控件。

编码：

```
<asp:HiddenField ID="hfdSelectedDeliveryAddressID" runat="server" Value="0" />
<asp:Panel ID="pnlOrder" runat="server" Visible="false">
    <uc3:AddressBook ID="AddressBook1" runat="server" AddressID="[value]" />
</asp:Panel> 
```

我想我在问插入`$("#<%= hfdSelectedDeliveryAddressID.ClientID %>").val()`“[value]”的语法是什么。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:20:23.207

使用`Visible="false"`set ，您必须返回服务器进行 set `Visible = true`，对吗？设置时`Visible = true`，还要设置属性：

```
AddressBook1.AddressID = hfdSelectedDeliveryAddressID.Value;
AddressBook1.Visible = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:19:02.043

我假设你正在使用 jquery，因为你有

`$("#<%= hfdSelectedDeliveryAddressID.ClientID %>").val()`

您可以使用

```
var value = $("#<%= hfdSelectedDeliveryAddressID.ClientID %>").val();
$("#<%= AddressBook1.ClientID %>").attr("AddressID", value) 
```

`.attr()`将第一个参数（本例中为“AddressID”）指定的属性设置为第二个参数中指定的值（本例中为隐藏字段的值）。

希望能帮助到你。

# esper - Esper - 使用后跟模式处理随机事件序列 -->

> ID：12751804
> 
> 赞同：1
> 
> 时间：2012-10-05T18:12:30.830
> 
> 标签：esper

我们有两种类型的事件 - InventoryEvent(Order) 和 InventoryEvent(Cancel)。我想在 6 秒内跟踪没有取消事件的订单事件。这是正在使用的查询

```
select a as InventoryEvent from pattern ["
                + " every a=InventoryEvent(system='Order') -> "
                + "("
                 + "(timer:interval("
                 + intervalSecs
                 + " sec) and "
                + " not InventoryEvent(system='Cancel',keyValue('MessageKey')=a.keyValue('MessageKey')))"
                + ")] 
```

时间间隔为 6 秒，订单事件和取消事件由一个公共消息键（订单 ID）连接

这在大多数情况下都非常有效，如下所示

*   订单事件(id1) --> 取消事件(id1) >6 秒
*   订单事件(id1) --> 取消事件(id1) <6 秒
*   Order Events(id1) not --> Cancel Event in 6 secs
*   多个订单事件后跟取消事件

现在我们遇到了无法保证 order 和 cancel 事件发生的顺序的情况。所以我们有一个案例

*   OE(id1) -->( **6secs** ) OE(id2) -->(6secs) CE(id1) -->(6secs) CE(id2)。

基本上是两个订单事件，然后是两个取消事件，间隔为 6 秒。这也有效。现在我们将二阶事件的时间改为 4 秒而不是 6 秒，

*   OE(id1) -->( **4secs** ) OE(id2) -->(6secs) CE(id1) -->(6secs) CE(id2)。

对于二阶事件，它不会失败。不确定我们在查询方面缺少什么。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T20:53:50.760

如果您不能保证顺序，请改用连接或重新排序事件（有一个重新排序视图会有所帮助）。第一个场景也不会与 id1 进行模式匹配，如果您不这么认为，请向用户邮件列表提交一个测试用例。

# python - 安装 Python 模块错误

> ID：12751806
> 
> 赞同：1
> 
> 时间：2012-10-05T18:12:59.490
> 
> 标签：python, windows

我正在使用 Windows 7、Python 2.6。我已经从[http://code.google.com/p/pylevenshtein/downloads/detail?name=python-Levenshtein-0.10.1.tar.bz2&can=2&q=下载了 Levenshtein 扩展](http://code.google.com/p/pylevenshtein/downloads/detail?name=python-Levenshtein-0.10.1.tar.bz2&can=2&q=)

我已将环境变量设置为 C:\PYTHON26;C:\PYTHON26\DLLs;C:\PYTHON26\LIB;C:\PYTHON26\LIB\LIB-TK

当我运行 python install setup.py 来实际安装它时，我得到：

```
running install
running build
running build_ext
building 'Levenshtein' extension
error: None 
```

然后我尝试`import Levenshtein` 并得到`ImportError: No module named Levenshtein`

导入 StringMatcher 产生：

```
Traceback (most recent call last):
File "(stdin)", line 1, in (module)
File "stringMatcher.py", line 1, in (module)
from Levenshtein imoprt *
ImportError: No module name Levenshtein 
```

我错过了什么愚蠢的东西吗？我尝试安装的每个额外模块似乎都会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:26:02.970

如果您正确安装它，它应该通过将 C:\Python26\Lib\site-packages 添加到您的 python 路径来工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:12:13.287

似乎您的环境没有到 c 编译器的路径。Levenshtein 库是用 C 编写的，应该使用 ac 编译器进行编译。

我有同样的问题，但如下所述解决。

首先，您应该拥有 Microsoft Visual Studio（用于 c 编译器）。我从未尝试过其他适用于 Windows 的 c 编译器。

然后执行以下步骤：

1.  设置路径=C:\Python26\Scripts;C:\Python26;%path%
2.  只需运行：C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\bin\vcvars32.bat（路径因您的 Visual Studio 安装区域而异）。这是设置 MS VS 的路径。
    1.  设置 VS90COMNTOOLS=C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\Tools\ （将您的安装路径放入 Visual Studio）
    2.  python setup.py build （可选你可以使用--compiler msvc，即python setup.py build --compiler msvc）

# java - Spring MongoDB 查询正则表达式

> ID：12751807
> 
> 赞同：3
> 
> 时间：2012-10-05T18:13:00.430
> 
> 标签：java, spring, mongodb

我正在尝试使用 spring 查询 MongoDB，但我无法让我的正则表达式工作。

我在 mongodb 中有一个树作为物化路径，就像在 MongoDB 文档（http://www.mongodb.org/display/DOCS/Trees+in+MongoDB）中一样。

在外壳中查询

```
db.categories.find({path:/^\w+,$/}) 
```

可以很好地找到第一个逗号之前的路径。

例如： {"path" : "a,"} 返回但不是 {"path: "a,b,"} 这就是我想要的。

如何在春季进行相同的查询？我试过了：

```
new Query(Criteria.where("path").regex("/^\\w+,$/")) 
```

但这不起作用。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T22:28:43.843

我刚刚解决了我的问题。

```
query = new Query(Criteria.where("path").regex("^([A-Z]|[a-z])+,$")); 
```

虽然**\w**代表“任何单词字符”，通常表示字母数字，但我只需要字母字符。

我以后可以抛出**[0-9]**和**\_**以与**\w**相同。

如果有人可以解释如何使**\w**工作，我将非常感激:)

# javascript - 将功能注入到 iframe 中显示的页面中？

> ID：12751808
> 
> 赞同：1
> 
> 时间：2012-10-05T18:13:06.060
> 
> 标签：javascript, jquery, html

我想在 iframe 中显示一个页面，它将与我的应用程序在同一台服务器上运行，我想通过在页面上定位一个元素然后在该元素旁边添加一个按钮，每当出现某个页面时触发一个事件具有一些功能。这可行吗？我将如何在 iframe 上放置一个事件，以便每当创建具有该类的项目时，它都会运行我的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:50:17.063

请参阅此处[jQuery/JavaScript：访问 iframe 的内容](https://stackoverflow.com/questions/364952/jquery-javascript-accessing-contents-of-an-iframe)

假设域相同，取自另一个答案

```
$("#iFrame").contents().find("#someDiv").removeClass("hidden");

// gets the element
$("#iFrame").contents().find("#someDiv")

// so I assume this would work
$("#iFrame").contents().find("#someDiv").on(...) 
```

# batch-file - BAT 文件中的“输入行太长”

> ID：12751809
> 
> 赞同：0
> 
> 时间：2012-10-05T18:13:06.057
> 
> 标签：batch-file, call

我需要在一天内多次编译我的**.jar文件，所以我有了一个想法，我可以将****BAT**文件更快地编译为：

```
call "jar cmf 'META-INF/MANIFEST.MF' 'Bounce Tales.jar' a a.class aa.png ab.png ac.png ad.png ae.png af.png ag.png ah.png ai.png aj.png ak.png al.png am.png an.png ao.png ap.png aq.png ar.png as.png at.png au.png av.png aw.mid ax.mid ay.mid az.mid b b.class ba.mid bb.mid bc.mid bd.mid be bf bg bh bi bj bk bl bm bn bo bp bq br bs bt bu bv c.class c.png d.class d.png e.class e.png f.class f.png g.class g.png h.class h.png i.class i.png icon.png j.class j.png k.class k.png l.class l.png lang.bs-BA lang.cs-CZ lang.de lang.hr-HR lang.hu-HU lang.mk-MK lang.sk-SK lang.sl-SI lang.sq lang.sr-YU lang.xx m.class m.png n.class n.png o.class o.png p.class p.png q.class q.png r.class r.png RMIDlet.class s.png t.png u.png v.png w.png x.png y.png z.png" 
```

这导致了一个错误：

> 输入行太长。

我不知道如何使它更短，当我将命令复制粘贴到控制台时，它编译得很好......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T06:13:51.623

您可以将您的线路分成几个变量，并使用它们来调用您的流程。这就是我们用来使路径长于 MSDOS 限制命令行的字符数的方式。

```
set a=a a.class aa.png ab.png ac.png ad.png ae.png af.png ag.png ah.png ai.png aj.png ak.png al.png am.png an.png ao.png ap.png aq.png ar.png as.png at.png au.png av.png aw.mid ax.mid ay.mid az.mid 

set b=b b.class ba.mid bb.mid bc.mid bd.mid be bf bg bh bi bj bk bl bm bn bo bp bq br bs bt bu bv c.class c.png d.class d.png e.class e.png f.class f.png g.class g.png h.class h.png i.class i.png icon.png j.class j.png

set c=k.class k.png l.class l.png lang.bs-BA lang.cs-CZ lang.de lang.hr-HR lang.hu-HU lang.mk-MK lang.sk-SK lang.sl-SI lang.sq lang.sr-YU lang.xx m.class m.png n.class n.png o.class o.png p.class p.png q.class q.png

set d= r.class r.png RMIDlet.class s.png t.png u.png v.png w.png x.png y.png z.png

call "jar cmf 'META-INF/MANIFEST.MF' 'Bounce Tales.jar' %a% %b% %c% %d%" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:20:19.673

这个问题是一个副本：[如何增加 windows 中的输入行长度（最大）？](https://stackoverflow.com/questions/3930579/how-to-increase-the-input-line-lengthmax-in-windows)

要运行具有长输入字符串的批处理文件，您必须使用 ^ 字符对其进行分隔。

```
call "jar cmf 'META-INF/MANIFEST.MF' 'Bounce Tales.jar' a a.class aa.png ab.png ac.pngad.png ae.png af.png ag.png ^
ah.png ai.png aj.png ak.png al.png am.png an.png ao.png ap.png aq.png ar.png as.png at.png au.png av.png aw.mid ax.mid ^
ay.mid az.mid b b.class ba.mid bb.mid bc.mid bd.mid be bf bg bh bi bj bk bl bm bn bo bp bq br bs bt bu bv c.class ^
c.png d.class d.png e.class e.png f.class f.png g.class g.png h.class h.png i.class i.png icon.png j.class j.png ^
k.class k.png l.class l.png lang.bs-BA lang.cs-CZ lang.de lang.hr-HR lang.hu-HU lang.mk-MK lang.sk-SK lang.sl-SI ^
lang.sq lang.sr-YU lang.xx m.class m.png n.class n.png o.class o.png p.class p.png q.class q.png r.class r.png ^
RMIDlet.class s.png t.png u.png v.png w.png x.png y.png z.png" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T18:21:57.113

好的，我找到了。我用这个：

```
jar cmf "META-INF/MANIFEST.MF" "Bounce Tales.jar" a a.class aa.png ab.png ac.png ad.png ae.png af.png ag.png ah.png ai.png aj.png ak.png al.png am.png an.png ao.png ap.png aq.png ar.png as.png at.png au.png av.png aw.mid ax.mid ay.mid az.mid b b.class ba.mid bb.mid bc.mid bd.mid be bf bg bh bi bj bk bl bm bn bo bp bq br bs bt bu bv c.class c.png d.class d.png e.class e.png f.class f.png g.class g.png h.class h.png i.class i.png icon.png j.class j.png k.class k.png l.class l.png lang.bs-BA lang.cs-CZ lang.de lang.hr-HR lang.hu-HU lang.mk-MK lang.sk-SK lang.sl-SI lang.sq lang.sr-YU lang.xx m.class m.png n.class n.png o.class o.png p.class p.png q.class q.png r.class r.png RMIDlet.class s.png t.png u.png v.png w.png x.png y.png z.png 
```

我把它放在BAT文件中。

# c - 使用队列进行基数排序

> ID：12751815
> 
> 赞同：8
> 
> 时间：2012-10-05T18:13:27.640
> 
> 标签：c, linked-list, queue, radix-sort

我想使用队列创建一个[基数排序实现。](http://en.wikipedia.org/wiki/Radix_sort)

我不知道我的代码的哪一部分有问题或者我应该阅读哪些资源。我的代码可能完全错误，但这是我没有任何帮助的实现（我还没有上过数据结构和算法课程）。

我创建了一个函数，但它不起作用。在进行研究时，我看到了一些代码示例，但它们对我来说似乎更复杂。

**首先**我想找到所有整数的最低有效位 **然后**将它们排序到下标匹配的队列元素中， **然后**在排序后将所有队列复制到第 11 个队列元素的末尾。再次在第 11 个队列元素中进行此排序，直到达到最高有效位。

我可以找到最低有效数字。并按照这个数字排序。但是，我无法分析其他数字。例如; 我可以对 1, 2 , 4, 5, 3 进行排序，但是当需要对 2 个或更多数字进行排序时，它会失败......

我希望，我很清楚并简要解释了我的问题。

```
// My function declaration
// Pre: arrInts holds the linked list of integers which are going to be sort.
// Post: queue will return result and its 11th element should hold sorted integers in
//       that queue
queue_node_t * radixSort(const queue_node_t *arrInts, queue_t *queue[], int size){
    queue_node_t *curNodep = arrInts; // Node to be checked
    int i, curNum = curNodep->element.key;
    if(curNodep == NULL){
        // If there is no other node left then assign them into 11th queue.
        for(i=0;i<=9;i++){
            if(queue[i]->rearp!=NULL){
                if(queue[10]->size == 0){
                    queue[10]->rearp = (queue_node_t *)malloc (sizeof(queue_node_t));
                    queue[10]->frontp = queue[10]->rearp;
                } else {
                    queue[10]->rearp->restp = (queue_node_t *)malloc(sizeof(queue_node_t));
                    queue[10]->rearp = queue[10]->rearp->restp;
                }
                queue[10]->rearp = queue[i]->rearp;
                queue[10]->size += queue[i]->size;
            }
        }
        queue[10]->rearp = radixSort(queue[10]->rearp, queue, size);
    } else {
                // I used switch statement to handle least significant digit
        switch(curNum%10){
        case 0:
            if(queue[0]->size == 0){
                queue[0]->rearp = (queue_node_t *)malloc (sizeof(queue_node_t));
                queue[0]->frontp = queue[0]->rearp;
            } else {
                queue[0]->rearp->restp = (queue_node_t *)malloc(sizeof(queue_node_t));
                queue[0]->rearp = queue[0]->rearp->restp;
            }
            ++(queue[0]->size);
            queue[0]->rearp->element = curNodep->element;
            queue[0]->rearp->restp = NULL;
            radixSort(curNodep->restp, queue, size);
            break;
        case 1:
            if(queue[1]->size == 0){
                queue[1]->rearp = (queue_node_t *)malloc (sizeof(queue_node_t));
                queue[1]->frontp = queue[0]->rearp;
            } else {
                queue[1]->rearp->restp = (queue_node_t *)malloc(sizeof(queue_node_t));
                queue[1]->rearp = queue[1]->rearp->restp;
            }
            ++(queue[1]->size);
            queue[1]->rearp->element = curNodep->element;
            queue[1]->rearp->restp = NULL;
                        // I tried to make recursion but I guess this is one the problems
            radixSort(curNodep->restp, queue, size);
            break;
        case 2:
            if(queue[2]->size == 0){
                queue[2]->rearp = (queue_node_t *)malloc (sizeof(queue_node_t));
                queue[2]->frontp = queue[2]->rearp;
            } else {
                queue[2]->rearp->restp = (queue_node_t *)malloc(sizeof(queue_node_t));
                queue[2]->rearp = queue[2]->rearp->restp;
            }
            ++(queue[2]->size);
            queue[2]->rearp->element = curNodep->element;
            queue[2]->rearp->restp = NULL;
            radixSort(curNodep->restp, queue, size);
            break;
        case 3:
            if(queue[3]->size == 0){
                queue[3]->rearp = (queue_node_t *)malloc (sizeof(queue_node_t));
                queue[3]->frontp = queue[3]->rearp;
            } else {
                queue[3]->rearp->restp = (queue_node_t *)malloc(sizeof(queue_node_t));
                queue[3]->rearp = queue[3]->rearp->restp;
            }
            ++(queue[3]->size);
            queue[3]->rearp->element = curNodep->element;
            queue[3]->rearp->restp = NULL;

            queue[10]->rearp = radixSort(curNodep->restp, queue, size);
            break;
        case 4:
            if(queue[4]->size == 0){
                queue[4]->rearp = (queue_node_t *)malloc (sizeof(queue_node_t));
                queue[4]->frontp = queue[4]->rearp;
            } else {
                queue[4]->rearp->restp = (queue_node_t *)malloc(sizeof(queue_node_t));
                queue[4]->rearp = queue[4]->rearp->restp;
            }
            ++(queue[4]->size);
            queue[4]->rearp->element = curNodep->element;
            queue[4]->rearp->restp = NULL;
            radixSort(curNodep->restp, queue, size);
            break;
        case 5:
            if(queue[5]->size == 0){
                queue[5]->rearp = (queue_node_t *)malloc (sizeof(queue_node_t));
                queue[5]->frontp = queue[5]->rearp;
            } else {
                queue[5]->rearp->restp = (queue_node_t *)malloc(sizeof(queue_node_t));
                queue[5]->rearp = queue[5]->rearp->restp;
            }
            ++(queue[5]->size);
            queue[5]->rearp->element = curNodep->element;
            queue[5]->rearp->restp = NULL;

            radixSort(curNodep->restp, queue, size);
            break;
        case 6:
            if(queue[6]->size == 0){
                queue[6]->rearp = (queue_node_t *)malloc (sizeof(queue_node_t));
                queue[6]->frontp = queue[6]->rearp;
            } else {
                queue[6]->rearp->restp = (queue_node_t *)malloc(sizeof(queue_node_t));
                queue[6]->rearp = queue[6]->rearp->restp;
            }
            ++(queue[6]->size);
            queue[6]->rearp->element = curNodep->element;
            queue[6]->rearp->restp = NULL;

            radixSort(curNodep->restp, queue, size);
            break;
        case 7:
            if(queue[7]->size == 0){
                queue[7]->rearp = (queue_node_t *)malloc (sizeof(queue_node_t));
                queue[7]->frontp = queue[7]->rearp;
            } else {
                queue[7]->rearp->restp = (queue_node_t *)malloc(sizeof(queue_node_t));
                queue[7]->rearp = queue[7]->rearp->restp;
            }
            ++(queue[7]->size);
            queue[7]->rearp->element = curNodep->element;
            queue[7]->rearp->restp = NULL;

            radixSort(curNodep->restp, queue, size);
            break;
        case 8:
            if(queue[8]->size == 0){
                queue[8]->rearp = (queue_node_t *)malloc (sizeof(queue_node_t));
                queue[8]->frontp = queue[8]->rearp;
            } else {
                queue[8]->rearp->restp = (queue_node_t *)malloc(sizeof(queue_node_t));
                queue[8]->rearp = queue[8]->rearp->restp;
            }
            ++(queue[8]->size);
            queue[8]->rearp->element = curNodep->element;
            queue[8]->rearp->restp = NULL;

            radixSort(curNodep->restp, queue, size);
            break;
        case 9:
            if(queue[9]->size == 0){
                queue[9]->rearp = (queue_node_t *)malloc (sizeof(queue_node_t));
                queue[9]->frontp = queue[9]->rearp;
            } else {
                queue[9]->rearp->restp = (queue_node_t *)malloc(sizeof(queue_node_t));
                queue[9]->rearp = queue[9]->rearp->restp;
            }
            ++(queue[9]->size);
            queue[9]->rearp->element = curNodep->element;
            queue[9]->rearp->restp = NULL;

            radixSort(curNodep->restp, queue, size);
            break;
        }
    }

    return queue[10]->rearp;
} 
```

**编辑1（取得了一些进展）**

我听从了威廉·莫里斯的建议。我不得不在 CodeReview 上问同样的问题，他给了我一些说明，让我的代码更清晰。

我将我的函数划分为函数，并且也停止使用递归。

*首先*，我创建了一个 add_to_q 函数，它为相关队列增加了价值，它有助于摆脱代码重复。顺便说一句，James Khoury 的方法是最简单的，但它再次使用递归。

```
void add_to_q(queue_t *queue_arr[], int value, int pos) {
if(queue_arr[pos]->size == 0){
    queue_arr[pos]->rearp = (queue_node_t *)malloc (sizeof(queue_node_t));
    queue_arr[pos]->frontp = queue_arr[pos]->rearp;
} else {
    queue_arr[pos]->rearp->restp = (queue_node_t *)malloc(sizeof(queue_node_t));
    queue_arr[pos]->rearp = queue_arr[pos]->rearp->restp;
}
queue_arr[pos]->rearp->element = value;
queue_arr[pos]->size++;
} 
```

*其次*，我创建了其他辅助函数。一个是 add_to_eleventh，它简单地将所有队列元素添加到第十一个队列的后面。在我看来，它正在做问题想要的事情。

```
queue_t * add_to_eleventh(queue_t *queue[]) {
int i;
for(i=0;i<=9;i++){
    while(queue[i]->frontp != NULL){
        if(queue[10]->size == 0){
            queue[10]->rearp = (queue_node_t *)malloc (sizeof(queue_node_t));
            queue[10]->frontp = queue[10]->rearp;
        } else {
            queue[10]->rearp->restp = (queue_node_t *)malloc(sizeof(queue_node_t));
            queue[10]->rearp = queue[10]->rearp->restp;
        }
        if ( queue[i]->size != 0 ){
            queue[10]->rearp->element = queue[i]->frontp->element;
            printf("---%d***",queue[i]->frontp->element);
        }
        queue[10]->size+=1;
        queue[i]->frontp = queue[i]->frontp->restp;
        queue[10]->rearp->restp = NULL;
    }
}
return queue[10];
} 
```

*第三*，我的最后一个辅助函数是 back_to_ints。其目的是将第 11 个队列中的元素除以 10 并以整数数组的形式返回。

```
void back_to_ints(queue_t *arr[], int *new_arr) {
queue_node_t *cur_nodep;
cur_nodep = arr[10]->frontp;
int i = 0, digit;
while(cur_nodep != NULL){
    cur_nodep->element/=10;
    digit = cur_nodep->element / 10;
    new_arr[i++] = digit;
    cur_nodep = cur_nodep->restp;
}
} 
```

*最后*，我的新排序函数现在对同一位数的整数进行排序。这样，数字[7] = {112,133,122,334,345,447,346};

```
queue_t * radix_sort(int *arr, const int size,queue_t *sorted_arr[]) {
int i, digit[size], initials[size],j;
for(i=0;i<size;i++)
    initials[i] = arr[i];
i = 0;
while(initials[i] != 0){
    j = i;
    printf("initialssss%d", initials[--j]);
    back_to_ints(sorted_arr, initials);

    for(i=0;i<size;i++){
    digit[i] = initials[i] % 10;

    switch (digit[i]) {
    case 0:
        add_to_q(sorted_arr, arr[i], 0);
        break;
    case 1:
        add_to_q(sorted_arr, arr[i], 1);
        break;
    case 2:
        add_to_q(sorted_arr, arr[i], 2);
        break;
    case 3:
        add_to_q(sorted_arr, arr[i], 3);
        break;
    case 4:
        add_to_q(sorted_arr, arr[i], 4);
        break;
    case 5:
        add_to_q(sorted_arr, arr[i], 5);
        break;
    case 6:
        add_to_q(sorted_arr, arr[i], 6);
        break;
    case 7:
        add_to_q(sorted_arr, arr[i], 7);
        break;
    case 8:
        add_to_q(sorted_arr, arr[i], 8);
        break;
    case 9:
        add_to_q(sorted_arr, arr[i], 9);
        break;
        }
    }
    sorted_arr[10] = add_to_eleventh(sorted_arr);
    i++;
}
return sorted_arr[10];
} 
```

我部分解决了这个问题。如果您想对相同数字的数字进行排序，它可以工作。否则，它会失败。例如，您的输入是 112,133,122,334,345,447,346 那么结果将是**112 122 133 334 345 346 447**。但是，如果用户想要对类似的东西进行排序（111,13,12,334,345,447,1），它会给出**111 1 12 13 334 345 447**。那么，我该如何克服这个问题。

另外，我已经稍微更改了我的头文件。

```
#ifndef RADIX_H_
#define RADIX_H_

typedef struct queue_node_s {
    int element;
    struct queue_node_s *restp;
}queue_node_t;

typedef struct {
    queue_node_t *frontp,
             *rearp;
    int size;
}queue_t;

queue_t * radix_sort(int *arr,const int size, queue_t *sorted_arr[]);
void add_to_q(queue_t *queue_arr[], int value, int pos);
queue_t * add_to_eleventh(queue_t *queue[]);
void back_to_ints(queue_t *arr[], int *new_arr);
void displayRadixed(queue_t *sorted[]);
#endif /* RADIX_H_ */ 
```

感谢您重新打开我的线程...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:25:11.763

我稍微修改了你的队列。为了更好地理解代码，我使用前后端作为全局变量。

```
typedef struct queue *queue_ptr;
        struct queue {
               int data;
               queue_ptr next;
        };
queue_ptr front[10], rear[10];  /* For base 10, The 11th queue is not needed */ 
```

所以加入队列的操作就变成了

```
void add_queue(int i, int data) {
        queue_ptr tmp;

        tmp = (queue_ptr) malloc(sizeof(*tmp));
        tmp->next = NULL;
        tmp->data = data;
        if (front[i]) {
                rear[i]->next = tmp;
        } else {
                front[i] = tmp;
        }   
        rear[i] = tmp;
} 
```

并添加从队列中删除的操作（也返回数据）

```
int delete_queue(int i) {
        int data;
        queue_ptr tmp;

        tmp = front[i];
        if (!tmp) {
                return -1;  /* So that we can check if queue is empty */
        }   
        data = tmp->data;
        front[i] = tmp->next;
        free(tmp);
        return data;
} 
```

所以现在我们可以实现基数排序了。使用实际数字而不是单个数字将数据移动到队列中可能更容易。请注意，如果您可以修改测试数组 *arr，则不需要第 11 个队列，并且您的 radix_sort 函数可能是这样的：

```
void radix_sort(int *arr, const int size) {
        int i, j, k, radix, digits, tmp;

        if (size < 1) {
                return;  /* don't do anything if invalid size */
        }

        /* get the number of digits */
        for (digits = 0, radix = 1; arr[0] >= radix; digits++, radix *= 10);

        /* perform sort (digits) times from LSB to MSB */
        for (i = 0, radix = 1; i < digits; i++, radix *= 10) {
                /* distribute into queues */
                for (j = 0; j < size; j++) {
                        add_queue((arr[j] / radix) % 10, arr[j]);
                }
                /* take them out from each queue to the original test array */
                for (j = 0, k = 0; j < 10; j++) {
                        for (tmp = delete_queue(j); tmp != -1;\
                             tmp = delete_queue(j), k++) {
                                arr[k] = tmp;
                        }
                }
        }
} 
```

最后你可以通过调用 radix_sort(your_array, your_array_size) 来测试，完整的代码是

```
#include <stdio.h>
#include <stdlib.h>

typedef struct queue *queue_ptr;
        struct queue {
               int data;
               queue_ptr next;
        };

queue_ptr front[10], rear[10];  /* For base 10, The 11th queue is not needed */

void add_queue(int i, int data) {
        queue_ptr tmp;

        tmp = (queue_ptr) malloc(sizeof(*tmp));
        tmp->next = NULL;
        tmp->data = data;
        if (front[i]) {
                rear[i]->next = tmp;
        } else {
                front[i] = tmp;
        }
        rear[i] = tmp;
}

int delete_queue(int i) {
        int data;
        queue_ptr tmp;

        tmp = front[i];
        if (!tmp) {
                return -1;  /* So that we can check if queue is empty */
        }
        data = tmp->data;
        front[i] = tmp->next;
        free(tmp);
        return data;
}

void radix_sort(int *arr, const int size) {
        int i, j, k, radix, digits, tmp;

        if (size < 1) {
                return;  /* don't do anything if invalid size */
        }

        /* get the number of digits */
        for (digits = 0, radix = 1; arr[0] >= radix; digits++, radix *=10);

        /* perform sort (digits) times from LSB to MSB */
        for (i = 0, radix = 1; i < digits; i++, radix *= 10) {
                /* distribute to queues */
                for (j = 0; j < size; j++) {
                        add_queue((arr[j] / radix) % 10, arr[j]);
                }
                /* take them out from each queue to the original test array */
                for (j = 0, k = 0; j < 10; j++) {
                        for (tmp = delete_queue(j); tmp != -1;\
                             tmp = delete_queue(j), k++) {
                                arr[k] = tmp;
                        }
                }
        }
}

int main(void) {
        int i;
        int a[5] = {133, 34, 555, 111, 12},
            b[12] = {1, 1, 1, 4, 5, 6, 7, 8, 9, 11, 11, 12};

        radix_sort(a, 5);
        radix_sort(b, 5);

        for (i = 0; i < 5; i++) {
                printf("%d ", a[i]);
        }
        printf("\n");

        for (i = 0; i < 12; i++) {
                printf("%d ", b[i]);
        }
        printf("\n");

        return 0;
} 
```

输出是

```
12 34 111 133 555
1 1 1 4 5 6 7 8 9 11 11 12 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T04:18:10.210

这里已经有一些很好的信息。在更高的层次上，调试你的代码会很困难，因为它比它需要的更复杂。下面是一个不同的代码，它使用 C 以更惯用的风格表达算法。

总体而言，当涉及到代码时，通常少即是多：简单是您的朋友。此处显示的功能：

1.  队列的循环单链表。队列是指向列表*尾节点*的指针。有了这个，追加和连接是快速的恒定时间操作。
2.  逻辑的、可重用的功能分解。
3.  只有大约 80 SLOC，包括一个简单的测试。排序函数为 18 SLOC。
4.  轻度测试。

这是排序：

```
// Radix sort the given queue.
void sort(QUEUE *queue)
{
  unsigned i, j, div;
  QUEUE queues[RADIX], accum;

  // Handle case of nothing to sort.
  if (*queue == NULL) return;

  // Accumulator queue initially holds unsorted input.
  accum = *queue;

  // Make one pass per radix digit.
  for (i = 0, div = RADIX; i < MAX_DIGITS; i++, div *= RADIX) {

    // Clear the radix queues.
    for (j = 0; j < RADIX; j++) queues[j] = NULL;

    // Append accumulator nodes onto radix queues based on current digit.
    NODE *p = accum, *p_next = p->next;
    do {
      // Save p->next here because append below will change it.
      p = p_next; p_next = p->next;
      append_node(&queues[p->val / div % RADIX], p);
    } while (p != accum);

    // Gather all the radix queues into the accumulator again.
    for (accum = NULL, j = 0; j < RADIX; j++) cat(&accum, queues[j]);
  }
  // Accumulator now holds sorted input.
  *queue = accum;
} 
```

其余的：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define RADIX 10
#define MAX_DIGITS 9

// Node and circular queue. A queue is either null or a pointer to the _tail_ node.
typedef struct node_s {
  struct node_s *next;
  unsigned val;
} NODE, *QUEUE;

// Make a new node with given value.
NODE *new_node(unsigned val)
{
  NODE *node = calloc(1, sizeof *node);
  // Must trap null return value here in production code!
  node->val = val;
  return node;
}

// Append given node to the tail of a queue.
void append_node(QUEUE *queue, NODE *node)
{
  NODE *tail = *queue;
  if (tail) {
    node->next = tail->next;
    tail->next = node;
  }
  else {
    node->next = node;
  }
  *queue = node;
}

// Concatenate the second queue onto the tail of the first. 
// First queue is changed (because it's a pointer to a tail node).
void cat(QUEUE *a, QUEUE b_tail)
{
  NODE *a_tail, *a_head;

  if (b_tail == NULL) return;
  a_tail = *a;
  if (a_tail) {
    a_head = a_tail->next;
    a_tail->next = b_tail->next;
    b_tail->next = a_head;
  }
  *a = b_tail;
}
// Sort code above goes here if you're compiling it.
// And test main goes here. 
```

一个小测试主要：

```
int main(void)
{
  int i;
  unsigned data[] = { 98, 111, 42, 1111, 21 , 997, 0, 99999, 20903};

  // Make a queue from data.
  QUEUE a = NULL;
  for (i = 0; i < sizeof data / sizeof data[0]; i++)
    append_node(&a, new_node(data[i]));

  sort(&a);

  // Print the circular list.
  NODE *p = a;
  do {
    p = p->next;
    printf("%u\n", p->val);
  } while (p != a);

  return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T01:03:56.850

*免责声明：我之前没有实现基数排序或测试下面的代码。我会把它留给你作为练习。*

当你发现自己不止一次地复制粘贴某些东西时，停下来想一想：一定有一个模式。

您的 switch 语句是大量的复制粘贴。在`case 1:`你有一行：

```
queue[1]->frontp = queue[0]->rearp; 
```

我猜应该是：

```
queue[1]->frontp = queue[1]->rearp; 
```

如果你重构了这段代码，你可能会更容易看到这一点？

将整个 switch 语句替换为：

```
int leastSignificantDigit = curNum%10;

if(queue[leastSignificantDigit]->size == 0){
    queue[leastSignificantDigit]->rearp = (queue_node_t *)malloc (sizeof(queue_node_t));
    queue[leastSignificantDigit]->frontp = queue[leastSignificantDigit]->rearp;
} else {
    queue[leastSignificantDigit]->rearp->restp = (queue_node_t *)malloc(sizeof(queue_node_t));
    queue[leastSignificantDigit]->rearp = queue[leastSignificantDigit]->rearp->restp;
}
++(queue[leastSignificantDigit]->size);
queue[leastSignificantDigit]->rearp->element = curNodep->element;
queue[leastSignificantDigit]->rearp->restp = NULL;
radixSort(curNodep->restp, queue, size); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T13:35:39.037

我在第一个代码示例中看到的问题是

**curNum = curNodep->element.key**

curNum 总是有完整的数字，switch 语句总是做 **curNum % 10**，这只是测试最后一位数字。

在您的递归解决方案（递归不是问题）中，您必须传递一个参数才能知道它必须处理的数字。

我知道这种技术是沉浸式的。

如果您看到放在答案末尾的样本，您可以看到最后一位数字是 orderer，您可以更改输入样本以更好地查看这一点。将大数字与最后一个小数字相加，例如“901”，然后查看结果。

对不起我的英语不好...

# c# - 使用 OpenXML 从表中生成电子表格

> ID：12751821
> 
> 赞同：0
> 
> 时间：2012-10-05T18:13:49.510
> 
> 标签：c#, excel, openxml, closedxml

**目标：**生成一个电子表格，其中工作表命名为每个工作表第一行列出的表和列名。这些实际上将基于从这些表构建的类。

**问题：**打开电子表格后，它声称发现“不可读的内容”并询问我是否要恢复。如果我选择是，它确实可以完美地恢复电子表格，但用户不必这样做。

**观察：**使用 SDK，我能够看到电子表格的内部工作原理，并且我注意到工作表的 xml 名称是真正的问题。在最初下载的版本中，它们被命名为 Sheet1 到 Sheet9，但随后它们进入到 Sheet1a 到 Sheet1f。所以基本上它用十六进制1-f对它们进行编号。在我对其进行修复后，他们将名称更正为纯数字。

不确定您是否可以看到图片，看起来我的工作阻止了该网站：/ ![SDK查看](../Images/4db6abdb5a19f4597ff54752084d747c.png)

**注意：**我查看了我的代码，但没有看到任何可以具体命名这些内部 xml 工作表的地方，因此我不确定要与您分享哪些代码，但我发布了创建这些工作表的代码部分。

构建电子表格的方法：

```
 public MemoryStream CreatePartsFromAssembly(MemoryStream spreadsheetStrem, Type typeInAssembly)
    {
        using (SpreadsheetDocument document = SpreadsheetDocument.Create(spreadsheetStrem, SpreadsheetDocumentType.Workbook))
        {
            //List<Type> types = null;
            var types = ExcelTypeHelper.GetTableTypes(typeInAssembly);

            ExtendedFilePropertiesPart extendedFilePropertiesPart1 = document.AddNewPart<ExtendedFilePropertiesPart>("rId" + (types.Count).ToString());
            GenerateExtendedFilePropertiesPart1Content(extendedFilePropertiesPart1, types);

            WorkbookPart workbookPart1 = document.AddWorkbookPart();
            GenerateWorkbookPart1Content(workbookPart1, types);

            var sharedStringOffsets = new List<int>();

            foreach (var type in types)
            {
                sharedStringOffsets.Add(ExcelTypeHelper.GetPropertyCount(type));
            }

            //int j = 0;
            int sharedStringOffset = 0;
            int sharedStringSum = sharedStringOffsets.Sum();
            int sharedStringRunningSum = 0;

            for (int i = types.Count; i > 0; i--)
            {
                var type = types[i - 1];
                sharedStringRunningSum += sharedStringOffsets[i - 1];
                sharedStringOffset = sharedStringSum - sharedStringRunningSum;

                WorksheetPart worksheetPart = workbookPart1.AddNewPart<WorksheetPart>("rId" + (i).ToString());
                GenerateWorksheetPartContent(worksheetPart, types[i - 1], sharedStringOffset);

                //j++;
            }

            SharedStringTablePart sharedStringTablePart1 = workbookPart1.AddNewPart<SharedStringTablePart>("rId" + (types.Count + 3).ToString());
            GenerateSharedStringTablePartContent(sharedStringTablePart1, types);

            WorkbookStylesPart workbookStylesPart1 = workbookPart1.AddNewPart<WorkbookStylesPart>("rId" + (types.Count + 2).ToString());
            GenerateWorkbookStylesPart1Content(workbookStylesPart1);

            ThemePart themePart1 = workbookPart1.AddNewPart<ThemePart>("rId" + (types.Count + 1).ToString());
            GenerateThemePart1Content(themePart1);

            SetPackageProperties1(document);
        }

        return spreadsheetStrem;
    } 
```

构建工作表的方法：

```
 private void GenerateWorksheetPartContent(WorksheetPart worksheetPart, Type type, int sharedStringOffset)
    {
        var propertyNames = ExcelTypeHelper.GetPropertyNames(type);

        string referenceRange = "A1:" + ColumnHeaderFromRowColumn((uint)1, (uint)propertyNames.Count);

        Worksheet worksheet = new Worksheet();
        worksheet.AddNamespaceDeclaration("r", "http://schemas.openxmlformats.org/officeDocument/2006/relationships");
        SheetDimension sheetDimension = new SheetDimension() { Reference = referenceRange };

        SheetViews sheetViews = new SheetViews();

        SheetView sheetView = new SheetView() { WorkbookViewId = (UInt32Value)0U };
        Selection selection = new Selection() { ActiveCell = "A2", SequenceOfReferences = new ListValue<StringValue>() { InnerText = "A2" } };

        sheetView.Append(selection);

        sheetViews.Append(sheetView);
        SheetFormatProperties sheetFormatProperties2 = new SheetFormatProperties() { DefaultRowHeight = 15D };

        SheetData sheetData = new SheetData();

        Row row = new Row() { RowIndex = (UInt32Value)1U, Spans = new ListValue<StringValue>() { InnerText = "1:" + propertyNames.Count } };

        for (int i = 0; i < propertyNames.Count; i++)
        {
            Cell cell = new Cell() { CellReference = ColumnHeaderFromRowColumn((uint)1, (uint)i + 1), DataType = CellValues.SharedString };
            CellValue cellValue = new CellValue();
            cellValue.Text = (i + sharedStringOffset).ToString();   //Shared string reference

            cell.Append(cellValue);
            row.Append(cell);
        }

        sheetData.Append(row);
        PageMargins pageMargins = new PageMargins() { Left = 0.7D, Right = 0.7D, Top = 0.75D, Bottom = 0.75D, Header = 0.3D, Footer = 0.3D };

        worksheet.Append(sheetDimension);
        worksheet.Append(sheetViews);
        worksheet.Append(sheetFormatProperties2);
        worksheet.Append(sheetData);
        worksheet.Append(pageMargins);

        worksheetPart.Worksheet = worksheet;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:35:50.580

所以这个问题的答案是.. 不要使用 OPENXML！！！！

我找到了一个使用 OpenXML 的库，但将其全部转换为对象。我在不到一天的时间内重写了一个相当大的实现。我能够用 20 行代码从头开始生成电子表格。对模块的支持很棒，业主反应迅速。

如果您正在使用 OpenXML 将其丢弃并获得 ClosedXML，他们有很好的文档，这是一个很棒的实现！

[http://closedxml.codeplex.com/](http://closedxml.codeplex.com/)

你不会后悔的:)

还要澄清一下，一旦我使用 ClosedXML，我一开始就能够生成工作簿而没有任何错误。它还使更改单元格背景颜色变得非常简单，我能够非常轻松地更改单元格数据类型。你真的不会出错！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T12:04:12.613

您可以尝试不显式设置关系 ID 吗？具体这部分：

```
WorksheetPart worksheetPart = workbookPart1.AddNewPart<WorksheetPart>("rId" + (i).ToString()); 
```

做就是了：

```
WorksheetPart worksheetPart = workbookPart1.AddNewPart<WorksheetPart>(); 
```

这只是意味着 SDK 会自动为您分配关系 ID。如果您确实需要该 ID，请使用此 ID 获取它：

```
workbookPart1.GetIdOfPart(worksheetPart); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-05T14:19:29.073

如果您正在构建一个相对较小的电子表格，ClosedXML 是一个很好的库。但是，数百行/列/选项卡后性能下降。一旦你超越了这些，你就会想要继续使用 OpenXML，尤其是使用 OpenXMLWriter 类的 WriteStartElement()、WriteElement() 和 WriteEndElement() 方法。这称为 SAX（XML 的简单 API）方法。

阅读这篇 MSDN 文章了解更多背景信息：[SAX 与 DOM](https://msdn.microsoft.com/en-us/library/office/gg575571.aspx)

# javascript - jQuery检查用户名能力

> ID：12751831
> 
> 赞同：0
> 
> 时间：2012-10-05T18:14:33.440
> 
> 标签：javascript, ajax, jquery-ui, jquery

大家好，我在注册时尝试检查用户名的可用性，但我返回 false 时遇到问题，知道我必须提交表格吗

所以我用 2 vars 做到了 - 结果并等待，但是当我等待结果时页面冻结

```
function checkUser( u ) {
    var wait = true,result;
    $.ajax({
        url: "register.php",
        data: "Available=" + u.val(),
        type: "GET",
        cache: false,
        success: function(Answer){
            if(Answer == "Taken"){
                result = false;
                updateTips("Потребителското име е заето!");
            } else{
                result = true;
            }
            wait = false;
        }
    });
    while(wait){}
    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:16:29.137

哎呀。

你不需要把它放在一个while循环中。当您使用 AJAX 请求轰炸服务器时，也会冻结客户端上的 JS。

删除 While 循环并调用该函数。

```
function checkUser( u ) {
    $.ajax({
            url: "register.php",
            data: "Available=" + u.val(),
            type: "GET",
            cache: false,
            success: function(Answer){
                if(Answer == "Taken"){
                     alert("USERNAME TAKEN");
                }
                else{
                    $('#myform').submit();
                }

            }

         });
   } 
```

称呼它，

```
<input type="submit" onclick="checkUser(data); return false;" /> 
```

或者，DarkWater 建议的首选方法

```
<form onsubmit="checkUser(data); return false;">

</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:17:31.787

使用一个简单的jquery`GET()`函数来做一个ajax post

```
function checkUser( u ) {
 $.get("register.php?availabe="+u.val(),function(data){
   if(data=="1")
  {  // echo 1 if username is available
        $("form").submit();
  }  //else it would not be submited 
    }) 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T19:12:58.713

摆脱那个丑陋的while循环，并将这个属性添加到你的ajax调用中：

```
async: false 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T19:21:52.827

试试这个，我希望这会奏效

```
// assume myForm is your form element id.
$("#myForm").submit(function(e){
  e.preventDefault();
  var formEle = $(this);
  $.ajax({
    url: "register.php",
    data: "Available=" + u.val(),
    type: "GET",
    cache: false,
    success: function(Answer){
        if(Answer == "Taken"){
            updateTips("Потребителското име е заето!");
        } else {
           formEle.unbind("submit").submit();
        }
   }
  });
}); 
```

# android - Android Scroll View同时水平和垂直移动？

> ID：12751832
> 
> 赞同：2
> 
> 时间：2012-10-05T18:14:48.980
> 
> 标签：android, layout, view

> **可能重复：**
> [在android中垂直和水平滚动视图](https://stackoverflow.com/questions/2044775/scrollview-vertical-and-horizontal-in-android)

我想找到一个可以垂直和水平滚动的视图。因为我有以下问题。我想围绕实际视图大小移动视口。有谁知道怎么解决？？

```
 Actual view size
----------------------------        
|            |             |
|            |             |
|  Viewport  |             |
|            |             |
|            |             |
|-------------             |
|                          |
|                          |
|--------------------------- 
```

谢谢。

# git - Git密码缓存

> ID：12751834
> 
> 赞同：0
> 
> 时间：2012-10-05T18:14:56.343
> 
> 标签：git, caching, github, passwords

git noob 在这里。我正在尝试按照[他们的文档](https://help.github.com/articles/set-up-git)为 GitHub 设置密码缓存。

当我进入下面的步骤时，我使用“which git”来查看我的目录是否与示例相同。我的目录是 /usr/bin/git 。正如说明所说，我用我的路径替换了示例路径。

```
(Example Path) $ sudo mv git-credential-osxkeychain /usr/local/git/bin

(My Path) $ sudo mv git-credential-osxkeychain /usr/bin/git 
```

不幸的是，现在 Git 似乎出现了问题。我无法运行任何 Git 命令。例如（git --help）。如果我尝试，它只会返回一个空行。如果我只是在终端中输入 Git，它会返回

```
Usage: git credential-osxkeychain <get|store|erase> 
```

我不知道从这里去哪里。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T19:35:52.853

看起来您已经`git`使用`git-credential-osxkeychain`. 你可能想做：

```
$ sudo mv git-credential-osxkeychain /usr/bin/ 
```

反而。

您需要重新安装 git，然后将`git-credential-osxkeychain`二进制文件复制到正确的位置。

当您说`which git`您获得实际`git`程序的名称时，而不是文件夹的名称。

# c++ - 如何将“const char”类型的无效操作数修复为二进制“operator+”？

> ID：12751835
> 
> 赞同：10
> 
> 时间：2012-10-05T18:15:05.697
> 
> 标签：c++, concatenation, std

> **可能重复：**
> [如何在一行上连接多个 C++ 字符串？](https://stackoverflow.com/questions/662918/how-do-i-concatenate-multiple-c-strings-on-one-line)

根据[this](https://stackoverflow.com/a/5354179/398460) C++ std::string 使用operator+ 连接。那为什么这段代码

```
using namespace std;
string sql = "create table m_table(" + 
    "path TEXT," +
    "quality REAL," +
    "found INTEGER);"; 
```

导致这个错误？

> 'const char [22]' 和 'const char [17]' 类型的无效操作数到二进制 'operator+'

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-05T18:18:42.900

克里斯说了什么，但在这种特殊情况下，你可以做

```
string sql = "create table m_table("
    "path TEXT,"
    "quality REAL,"
    "found INTEGER);"; 
```

*这将在编译时*连接字符串。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-05T18:16:10.150

您需要将其显式转换为字符串以匹配参数列表：

```
string sql = std::string("create table m_table(") + 
"path TEXT," +
"quality REAL," +
"found INTEGER);"; 
```

现在第一个是与 a 匹配的字符串`const char[N]`，它匹配其中一个`operator+`重载并返回一个 new `std::string`，用于重复其余的过程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-05T18:25:55.767

更好的方法是使用 std::ostringstream

```
#include <sstream>

const std::string myFunc(const std::string& s1, const std::string& s2)
{
  std::ostringstream os;
  os<<s1<<" "<<s2;
  return os.str();
} 
```

优点是您也可以使用 std::ostream << 运算符重载来字符串化非字符串值

# php - 访问使用 jQuery 的 load() 函数加载的 html 内容

> ID：12751839
> 
> 赞同：2
> 
> 时间：2012-10-05T18:15:14.713
> 
> 标签：php, jquery, html, ajax, content-management-system

我对 jQuery ajax 的工作方式有点困惑。我正在尝试使用 jQuery 和 php 创建一个客户管理系统 (CMS)。

我想给用户创造汽车的机会。假设他必须定义一个“汽车名称”并检查复选框列表中的一些选项。在同一页面上，我让用户有机会添加或删除一些选项。这种添加和删除发生在 jQuery 和 ajax 中。当用户添加一个选项时，我调用一个处理该选项的 php 页面 (addOption.php) 并将其添加到数据库中。如果 ajax 调用成功，我使用 ajax load() 函数重新加载 div 中的选项。谁调用了一个 php 页面 (reloadOptions.php)，该页面从数据库中读出选项并将它们构造成一个复选框列表。

这一切都很好。当我尝试检查选中了哪些复选框时会出现问题。（此处难句） 页面源中似乎不存在数据。我认为这是因为 ajax 的异步工作而发生的。我真的需要创建汽车的选项！

最后，我的问题是如何访问该选项数据？如果你不能，还有办法访问这些数据吗？您如何看待我处理 cms 系统的方法？好 / 坏 / 天哪 / ...

以下是我使用的一些代码块：

页面 index.php ：处理选项和 html 代码的 jQuery/ajax

```
 //At the start i load the options in
$('.options').load('./php/OptionsReload.php');

$("#FormOptions").submit(function(e) {
    $.ajax({
        type: "POST",
        url: "./php/addOption.php",
        data: $(e.target).serialize(),
        dataType: "json",
        success: function(data) {
            $('.options').load('./php/reloadOptions.php');
        }
    });
    return false; 
});

..................
//Form where you can add the option
     <form id="FormOptions">
             <input type="text" name="optionName" />
             <input type="submit" name="submitOption" value="Add option" />
</form>

......................
 //Div where i show the options to the user
      <form name="formChecks" method="post" enctype="multipart/form-data">
             <div class="options">
                   //Content loaded with jQuery
             </div>
       </form> 
```

页面 addOption.php ：将选项添加到数据库的代码

```
 //Database connect
...
return mysql_query("INSERT INTO options(option) VALUES('". $POST_['optionName'] ."');"); 
```

页面 reloadOptions.php ：使用选项构造 html 的代码

```
<select name="mydropdown">
    <?php 
            $options = ...... connect with DB and select all the options
              while($row = mysql_fetch_assoc($options))
               {
                      echo ("<option value='" . $row['Id'] . "'>" . $row['optionName'] . "</option>");
               }
     ?>
</select> 
```

在此先感谢，伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:26:34.880

也许我不明白你要做什么，但似乎你只是想获得所选选项的值。你能试一下吗？

```
$(document).ready(function() {
    $('.options').click(function() {
        var optionsArray = [];
        $('.options input:checked').each(function() {
            optionsArray.push(this.name);
        });
        // now optionsArray has all your options
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:27:38.237

好的，所以我首先编辑了您的 JS。（编辑原始问题）

关于你的 PHP。它应该是 $_POST，你在这里写 $POST_：

```
return mysql_query("INSERT INTO options(option) VALUES('". $POST_['optionName'] ."');"); 
```

它应该是

```
return mysql_query("INSERT INTO options(option) VALUES('". $_POST['optionName'] ."');"); 
```

此外，请使用[mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)以避免任何类型的 SQLi 漏洞。

至于“复选框”，您不会生成复选框，而是通过使用带有选项的选择标签生成下拉菜单。为了允许多项选择，您可以继续将其更改为复选框（使用`<input type="checkbox">`）或将 multiple 属性添加到您的选择中（`<select name="options[]" multiple="multiple">`）。两者都会好的；就个人而言，我更喜欢复选框。

关于保存选择的值。您将不得不制作一个“缓存”。您可以执行以下操作：

```
$("#FormOptions").submit(function(e) {
    //if you stick to select>option, then selector should be:
    // $('.options option:selected')
    var savedOptions = $('.options input:checked');
    $.ajax({
        type: "POST",
        url: "./php/addOption.php",
        data: { optionName : this.optionName },
        dataType: "json",
        success: function(data) {
            var _savedOptions = savedOptions;
            $('.options').load('./php/reloadOptions.php', function () {
                //if you stick to select>option, then selector should be:
                // $('.options option:selected')
                $('.options input:checked').each(function() {
                    for (var i in _savedOptions) {
                        if (_savedOptions[i].value == this.value) {
                            $(this).prop("checked", true);
                        }
                    }
                })
            });
        }
    });
    return false; 
}); 
```

请注意在评论中我为复选框或选择>选项指定了两个选择器

我认为这应该做的工作。但是，要小心 XSS 漏洞。如果您继续这样做，最好在生成 HTML 时使用 htmlentities，如下所示：

```
<select name="mydropdown" selected="selected">
    <?php 
            $options = ...... connect with DB and select all the options
              while($row = mysql_fetch_assoc($options))
               {
                      echo ("<option value='" . $row['Id'] . "'>" . 
                        htmlentities($row['optionName']) . "</option>");
               }
     ?>
</select> 
```

如果您的客户端在 utf8 上运行，则只需为其添加参数（如果您在 PHP 5.4 上运行，则不再需要此参数）：

```
htmlentities($someStringInThisCaseOptionName, ENT_COMPAT | ENT_HTML401, "UTF-8"); 
```

但是，请允许我说您重新加载整个表单的方法不是最佳的。为此，您只需要一个 POST 请求：使 addOption.php 脚本返回 JSON，如下所示：`{ valueGenerated : "some id"}`。然后继续获取数据并添加选项。为此，您必须让 PHP 脚本[查询 MySQL 以检查生成的 ID](http://php.net/manual/en/function.mysql-insert-id.php)并仅返回以下内容：

```
echo "{ \"valueGenerated\" : \"$generatedID\" }"; 
```

然后在 JS 端做这样的事情：

```
$("#FormOptions").submit(function(e) {
    var optionName = this.optionName;
    $.ajax({
        type: "POST",
        url: "./php/addOption.php",
        data: { optionName : optionName },
        dataType: "json",
        success: function(data) {
            var optionValue = data.valueGenerated;
            $('#formChecks select[name="dropdown"]').append(
                "<option value='" + optionValue + "'>" + optionName + "</option>"
            );
        }
    });
    return false; 
}); 
```

请注明：按照我做的代码，`optionName`必须转义，否则会导致 XSS 漏洞。您可以从 PHP 端或通过正确的 JS 来完成此操作，而不是我刚刚展示的快速附加。

我认为从 PHP 端执行此操作更容易（只需使用[htmlentities](http://php.net/manual/en/function.htmlentities.php)），但是如果您希望其他客户端使用相同的 Web 请求，他们会“受苦”。所以，忽略前面的 JS 代码，更好的使用：

```
$("#FormOptions").submit(function(e) {
    var optionName = this.optionName;
    $.ajax({
        type: "POST",
        url: "./php/addOption.php",
        data: { optionName : optionName },
        dataType: "json",
        success: function(data) {
            var optionValue = data.valueGenerated;
            var newOpt = $("<option></option>").val(optionValue).text(optionName);
            $('#formChecks select[name="dropdown"]').append(newOpt);
        }
    });
    return false; 
}); 
```

# google-chrome - Google Chrome, Sub-Navigation Options Vanish

> ID：12751848
> 
> 赞同：0
> 
> 时间：2012-10-05T18:15:45.657
> 
> 标签：google-chrome

Why does three quarters of my sub-navigation vanish in Google Chrome but not in Firefox nor Internet Explorer?

**Steps to recreate the problem:**

1.  Open Google Chrome Version 22.0.1229.79 m
2.  Navigate to bigfont.ca
3.  Click About Us, then Services, then Client List.
4.  When you click Client List, the three quarters of the sub-navigation menu disappears.

**Here is what the sub-navigation usually looks like:**

![enter image description here](../Images/5e6b2e29d6b3026e8c41b65f7f2dedfd.png)

**Here is how is breaks after steps 1-4:**

![enter image description here](../Images/4557b81ca7529d78f966e5d784d5cf40.png)

Why does three quarters of the sub-navigation vanish after clicking in a specific sequence?!

**Here are some interesting observations:**

1.  After completing steps 1-4 above, I can bring back the missing aspects of the sub-navigation by hovering over where we would expect them to be. They just come back.
2.  The problem only occurs in very specific sub-navigation click orders.

**Here are the specific click orders that break it.**

-the last click needs to be Client List

-the second to last click needs to be Services

-the third to last click needs to be something other than Client List.

**Here are some more examples**

About Us > Services > Client List = Vanish

About Us > Services > Services > Client List = Vanish

Shaun Luttin > Services > Client List = Vanish

About Us > Shaun Luttin > Services > Client List = Vanish

About Us > Shaun Luttin > Client List = No Problem!!!

About Us > Client List = No Problem

**What is going on here?**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:39:42.390

We figured it out. Chrome renders well after we changed our menu element class to **nav-list** NOT **nav-tab**. Go figure.

# javascript - 使用jQuery多次将相同的html插入元素

> ID：12751851
> 
> 赞同：1
> 
> 时间：2012-10-05T18:16:08.637
> 
> 标签：javascript, jquery, html

我希望用户单击一个按钮，然后将一些 html 弹出到一个元素中。我这样做了，它有效，但它只有效一次。如果他们再次单击该按钮，则不会发生任何事情。我认为使用 empty() 可以解决问题，但事实并非如此。我的代码有什么问题。

```
<script type="text/javascript" >

$(document).ready( function() {

   $('#button').on('click', function () {

     $('#ul').html('<li>testing testing</li>').hide(1000, function() {

        $(this).empty();    

     });    

   });

});

</script>

<input type="button" value="click me" id="button" />

<ul id="ul">

</ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T18:18:40.933

第二次单击该按钮时，该元素将被隐藏。你可以做：

```
$('#ul').show().html('... 
```

[http://jsfiddle.net/KXkgZ/](http://jsfiddle.net/KXkgZ/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T18:20:27.297

```
$("#button").click(function(){ 
    $("#ul").append("testing testing");
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T18:21:30.760

因为您想在每次单击按钮时弹出 html，您应该使用`append`

```
$('#ul').append('<li>testing testing</li>'); 
```

见[附录](http://api.jquery.com/append/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T18:22:22.580

```
jQuery('<li>testing testing</li>').appendTo('#ul').hide(1000, function() {
    $(this).remove();    
 }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-05T18:22:46.863

当您执行 .hide() 设置 CSS 选择器 "display" = "NONE" 您需要将其更改为如下内容：

```
$('#ul').html('<li>testing testing</li>').hide(1000, function() {
  $(this).empty();
  $(this).show();
}); 
```

# wordpress - 修改引导导航栏？

> ID：12751857
> 
> 赞同：0
> 
> 时间：2012-10-05T18:16:22.880
> 
> 标签：wordpress, twitter-bootstrap, navigation

我在使用引导程序默认布局时遇到问题。我正在尝试更改当前为蓝色的活动导航项的背景颜色，但我的 css 无法正常工作。这是一个片段，如果我检查一个选定的导航项目，它将显示在 google chrome 控制台上，但它不会工作。

```
.dropdown-menu .active{
background:red; 
} 
```

css 存在，但链接背景仍然是蓝色的。

我想我并没有说清楚，这里有一个关于导航默认外观的演示。[http://demo.rootstheme.com/](http://demo.rootstheme.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:47:21.773

这应该做的工作：

```
.dropdown-menu li.active > a {
    background-color: red;
    background-image: -webkit-linear-gradient(top, white, red);
} 
```

问题是 Bootstrap 的`background-image`属性覆盖了你的。

# iphone - 应用商店是否也向 iPhone 5 用户显示较小的屏幕截图，反之亦然？

> ID：12751863
> 
> 赞同：4
> 
> 时间：2012-10-05T18:17:03.893
> 
> 标签：iphone, ios, app-store, iphone-5

我想知道是否需要为常规 iPhone 尺寸和 iPhone 5 尺寸重复截图，或者是否需要同时向两个用户显示。例如，iPhone 5 用户会看到非 iPhone 5 的屏幕截图以及他们自己的屏幕截图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T12:08:33.837

根据我的理解和经验：

1.  您必须有常规的 iPhone 屏幕截图 (3.5") 才能提交应用程序。一直都是这样，并且没有改变。
2.  如果您的应用程序支持 iPhone 5 屏幕（意味着您放置了 4" 启动屏幕图像），您**必须**上传 iPhone 5 的屏幕截图，如果您不这样做，您将被拒绝并显示“屏幕截图不可用”，实际上您的应用程序不会被审查，直到你这样做。
3.  现在，您可以创建仅 3.5 英寸屏幕的应用程序，因此您可以跳过创建 4 英寸屏幕截图，但似乎很快就会结束，甚至更新也会请求 4 英寸屏幕截图（据媒体报道）。
4.  即使您的应用程序不支持 4"，您也可以添加 4" 屏幕截图，但它**不会在 iPhone 5 上显示**。将显示 3.5" 屏幕截图。

现在对于业务：

1.  如果您有 3.5" 仅支持应用程序并且您提供 3.5" 屏幕截图（您必须这样做），它将显示在 iPhone 5 上并且不会偏离路线（在旧设备上也是如此），即使您添加了 4" 屏幕截图。
2.  如果应用支持 iPhone 5 屏幕，每部手机都会显示您提交的相应屏幕截图（相对于手机类型），iPhone 5 会显示 iPhone 5 屏幕截图（您提交的 4 英寸屏幕截图），旧设备会显示 3.5 英寸屏幕截图。没有混合。

我的建议是在有时间的时候创建 4" 屏幕截图，因为很快它可能是更新的必要条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T03:32:46.153

正确答案是，如果您提供 iPhone 5 屏幕截图，则默认情况下会在 iPhone 5 上显示它们，而不会在其他设备上显示。我认为这是相同的，反之亦然。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-05T20:12:15.990

App Store 不知道用户使用的是 iPhone 4 还是 iPhone 5……因此，您在 App Store 上的 App 配置文件将显示您提交的屏幕截图。如果您只提交 3.5 英寸或 4 英寸的屏幕截图，它将显示您发送的内容。建议发送您的应用兼容的所有屏幕截图...

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-05T18:32:06.973

如果没有 iPhone 5 屏幕截图，您将无法提交支持 iPhone 5 的应用程序，所以这个问题没有实际意义。您需要提供两种设备尺寸的屏幕截图。

# c#-4.0 - 为什么没有运行新代码时 JIT 会在程序中间运行？

> ID：12751864
> 
> 赞同：1
> 
> 时间：2012-10-05T18:17:05.663
> 
> 标签：c#-4.0, .net-4.0, clr, jit

我正在一些托管 .Net 4.0 代码的网络服务器上运行一些性能测试。我注意到 JIT 计数器中的 % 在测试过程中会看似随机地飙升。

这些测试相当简单，它们都运行相同的代码。没有其他人访问这些服务器，所以它只运行我放在那里的代码，而且我只测试一个代码路径。

在一个小时的测试中，我会看到 JIT 计数器中的 % 飙升 50%-100% 大约 30-40 次。这只是很短的一段时间，其余时间都是 0%，但我想不出任何原因会发生这种情况。我做了所有正常的检查事件日志并在不同的日志文件中寻找错误，但一切似乎都运行正常，所以它甚至不需要捕获和异常并运行不同的代码。

我意识到这是一个模糊的问题，我确信 JIT 编译器可能运行有 1,000 多种不同的原因，但我希望有人可能知道为什么它会在已经“升温”的代码中发生的一些常见原因up”，当没有任何新的代码路径正在运行时。或者，如果这只是正常的日常行为。

# android - 列出 Android 4+ 中特定日期的事件（ALL_DAY 问题）

> ID：12751865
> 
> 赞同：33
> 
> 时间：2012-10-05T18:17:09.080
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-calendar

我试图让所有事件在 Android 4+ 中的选定日期发生。

据我了解， CalendarContract.Instances 是获取事件的最简单方法，因为它同时处理重复事件和单次事件。

但是，我在处理时间戳的方式上存在一些问题。具体来说，它似乎以不同的方式对待 ALL_DAY 事件。

我从以下代码开始（`start`是我获取事件的那一天，毫秒“数学”是为了避免从第二天上午 12 点开始的不必要的事件，日历使用默认时区）。

```
public Cursor fetchCursor(Calendar start) {
    Calendar end = (Calendar) start.clone();
    end.add(Calendar.DATE, 1);

    long startTime = start.getTimeInMillis() + 1;
    long endTime = end.getTimeInMillis() - 1;

    ContentResolver resolver = mContext.getContentResolver();
    return CalendarContract.Instances.query(resolver, projection, startTime, endTime);
} 
```

这段代码似乎适用于许多边缘情况、不同的时区、跨越多天的事件......除了全天事件之外的所有内容。

当我检查带有 ALL_DAY 标志的返回事件时：

```
 Cursor c = fetchCursor(date);
    Log.e("SIZE", String.valueOf(c.getCount()));
    while (c.moveToNext()) {
        long begin = c.getLong(2); // CalendarContract.Instances.BEGIN
        long end = c.getLong(3);   // CalendarContract.Instances.END
        Date beginDate = new Date(begin);
        Date endDate = new Date(end);
        Log.e("EVENT", String.valueOf(begin) + " - " + String.valueOf(end));
        Log.e("EVENT", beginDate.toString() + " - " + endDate.toString());
    } 
```

我得到了：`EVENT(10075): Thu Sep 13 02:00:00 CEST 2012 - Sat Sep 15 02:00:00 CEST 2012`。

`query`对我来说，自 MY TIMEZONE 中的纪元以来，它似乎期望范围以毫秒开始和结束（但 API 声明它需要基于 UTC 的时间戳）。但是标记为 ALL_DAY 的事件自 UTC 纪元以来使用毫秒（因此由于 +2 时区，我得到了 2 个额外的小时）。

我还尝试计算和添加时区偏移量。然后一整天的活动都很好，但其他一切......不是。

```
private long getTimezoneOffset(TimeZone zone, long date) {
    long delta = zone.getOffset(date);
    return delta;
}

private long getTimeInUTC(Calendar date) {
    long time = date.getTimeInMillis();
    time += getTimezoneOffset(date.getTimeZone(), time);
    return time;
}

public Cursor fetchCursor(Calendar start) {
    Calendar end = (Calendar) start.clone();
    end.add(Calendar.DATE, 1);

    long startTime = getTimeInUTC(start) + 1;
    long endTime = getTimeInUTC(end) - 1;

    ContentResolver resolver = mContext.getContentResolver();
    return CalendarContract.Instances.query(resolver, projection, startTime, endTime);
} 
```

虽然通过遍历光标、更改 ALL_DAY 事件和删除不必要的事件来解决这个问题很简单，但我想知道是否有更好的方法。或者也许这是Android错误？但如果这是一个错误，那么为什么系统日历可以正常工作？这种不一致的行为对我来说似乎很奇怪。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-29T06:58:36.980

`Calendar`api 也是依赖于设备的，您的代码在其他设备中运行良好，`Android - 4.4.4 KitKat`但在其他设备中却没有。以下代码在我测试过的所有设备上都能完美运行。

尝试这个：

```
public Cursor fetchCursor(Calendar start) {
    Calendar end = (Calendar) start.clone();
    end.add(Calendar.DATE, 1);
    ContentResolver resolver = this.getContentResolver();
    return CalendarContract.Instances.query(resolver,  new String[] { "calendar_id", "title", "description",
                "dtstart", "dtend", "eventLocation" }, start.getTimeInMillis(),
                end.getTimeInMillis());
} 
```

# scala - 隐式参数和重载问题

> ID：12751870
> 
> 赞同：2
> 
> 时间：2012-10-05T18:17:49.237
> 
> 标签：scala, overloading, implicit

```
trait DAOContract[T <: Entity] {
  // default create
  def create(t: T): Option[Int]
}

trait UserContract extends DAOContract[User] {
  // provide alternate create method for transactional blocks
  def create(u: User)(implicit ss: Session): Either[String, Int]
  ...
}

// DAO provides create implementation with embedded session
class UserDAO(implicit val db: Connection) 
  extends DAO[User] with UserContract {

  import db.Driver.Implicit._
  import org.scalaquery.ql._
  ...
} 
```

在控制器中

```
dao.create(model) // boom, no implicit session 
```

我希望我在这里遗漏了一些东西：为什么 scala 编译器无法区分上面的 2 个创建方法签名？

基本上，如果不为事务性（即返回 Either）或独立的操作提出不同的方法命名约定，我就不可能重载 DAO 操作。

或者，我只是以错误的方式做事，完全有可能......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T10:45:30.583

Scala 禁止这样做是有原因的：

1.  想象一下，您的`create`方法是：

    ```
    def create(t: User): Function[Int,Something]
    def create(u: User)(implicit ss: Session): Either[String, Int] 
    ```

    然后调用`create(x)(y)`将适用于他们两个。

2.  即使 (1.) 中的问题可以通过 Scala 编译器仔细检查函数的类型来解决，**但它很容易出错**。在这样的设置中，程序员很容易出错。为函数强制使用不同的名称可确保程序员始终知道他们调用的是什么。

* * *

如果将您的方法更改为具有相同的返回类型并且您愿意采取冒险的方式，您可以尝试这样的事情：

```
trait Broken {
  final def foo(x: Int)(implicit session: String = null): Option[Int] =
    if (session == null) foo1(x)
    else foo2(x, session);

  def foo1(x: Int): Option[Int]
  def foo2(x: Int, session: String): Option[Int]
}
class Example extends Broken {
  def foo2(x: Int, y: String) = Some(2)
  def foo1(x: Int) = Some(1)
}

object Test extends App {
  def withImplicit(e: Example) = {
    implicit val imp = "hey"
    e.foo(1) // (imp)
  }
  def withoutImplicit(e: Example) = e.foo(1)

  println(withImplicit(new Example()));
  println(withoutImplicit(new Example()));
} 
```

当一个隐式值可用时，调用相应的方法。否则，调用没有“会话”参数的方法。但我*强烈*反对这种方法。一个轻微的错误就会导致调用错误的变体，这将很难调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T01:08:33.097

您的创建方法有不同的信号。一个返回 Either，另一个返回 Option。加上隐含的。您可能需要隐式使用并从两者返回 Option[Int]

# python - 遍历两个列表并通过另一个列表中的值扩展一个列表

> ID：12751874
> 
> 赞同：0
> 
> 时间：2012-10-05T18:18:01.543
> 
> 标签：python, list, loops, append, extend

我想通过另一个列表的值来扩展列表中的列表：

```
list1 = [['a', 'a'], ['b','b'], ['c','c']]
list2 = [1,2,3] 
```

我想要这个：

```
list3 = [['a','a',1], ['b','b',2], ['c','c',3]] 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T18:20:51.730

```
>>> [x + [y] for x, y in zip(list1, list2)]
[['a', 'a', 1], ['b', 'b', 2], ['c', 'c', 3]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T18:21:47.733

```
[x+[y] for x,y in zip(list1,list2)] 
```

zip(list1,list2) 会给你一个元组对的列表：

```
[(['a', 'a'], 1), (['b', 'b'], 2), (['c', 'c'], 3)] 
```

其余的是列表理解。它采用每个元组并将第零个元素与第一个元素连接起来。然后所有这些都作为列表返回。

# php - 如何在 php 中使用 foreach() 回显数组数据？

> ID：12751875
> 
> 赞同：-2
> 
> 时间：2012-10-05T18:18:02.300
> 
> 标签：php, foreach

我有一个像下面给出的数组。我想一一呼应这些元素。帖子中还添加了预期输出

```
$myArray => Array
        (
            [0] => Array
                (
                    ['id'] => 1
                    ['name'] => "Amla"
                    ['age'] => 25
                )

            [1] => Array
                (
                    ['id'] => 2
                    ['name'] => "Kallis"
                    ['age'] => 35
            )
       ) 
```

// 预期输出

```
1  Amla  25
2  Kallis 35 
```

我的代码：

```
foreach ($myArray as $key => $value){
    echo "$myArray[$key]=>$value"."</br>";
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T18:21:31.417

简单的方法。如果需要，将 css 添加到跨度。

```
 foreach($my_array as $item):
      echo '<span>'.$item['id'].'</span>';
      echo '<span>'.$item['name'].'</span>';
      echo '<span>'.$item['age'].';</span>';
 endforeach; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T18:21:59.490

尝试

```
foreach ($myArray  as $v1) {
    foreach ($v1 as $v2) {
        echo "$v2\n";
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-05T18:26:06.937

最简单的方法：

```
<?php
    foreach($my_array as $item) {
        echo $item['id'], " ", $item['name'], " ", $item['age'];
    }
?> 
```

您可以使用 CSS 编辑输出格式。请注意，我使用逗号而不是点来表示`echo()`: 多次调用该函数比连接更快。

资料来源：

[http://wolfprojects.altervista.org/articles/output-in-php/](http://wolfprojects.altervista.org/articles/output-in-php/)

[http://www.simplemachines.org/community/index.php?topic=27423.0](http://www.simplemachines.org/community/index.php?topic=27423.0)

# wpf - WPF：使用两个 DatePickers 来表示日期范围

> ID：12751876
> 
> 赞同：1
> 
> 时间：2012-10-05T18:18:13.417
> 
> 标签：wpf, xaml, datepicker

我有一个包含一对 DateTime 的视图模型？对象 - 可为空的日期时间。

```
private DateTime? _xmitdtFrom;
public DateTime? xmitdtFrom
{
    get { return this._xmitdtFrom; }
    set
    {
        this._xmitdtFrom = value;
        notifyPropertyChanged("xmitdtFrom");
    }
}

private DateTime? _xmitdtTo;
public DateTime? xmitdtTo
{
    get { return this._xmitdtTo; }
    set
    {
        this._xmitdtTo = value;
        notifyPropertyChanged("xmitdtTo");
    }
} 
```

xmitdtFrom 日期不能大于 xmitdtFrom 日期，xmitdtTo 日期不能早于 xmitdtFrom 日期，xmitdtTo 日期和 xmitdtFrom 都不能晚于今天。

所以，在标记中我有这个：

```
<Label Grid.Row="1" Grid.Column="1">
    From:
</Label>
<DatePicker Grid.Row="1" Grid.Column="2" 
        SelectedDate="{Binding xmitdtFrom, Mode=TwoWay}"
        DisplayDateEnd="{Binding xmitdtTo}"
        />
<Label Grid.Row="2" Grid.Column="1">
    Through:
</Label>
<DatePicker Grid.Row="2" Grid.Column="2"
        SelectedDate="{Binding xmitdtTo, Mode=TwoWay}"
        DisplayDateStart="{Binding xmitdtFrom}"
        DisplayDateEnd="{x:Static sys:DateTime.Now}"
        /> 
```

这工作正常，除非 xmitdtTo 为空 - 在这种情况下 xmitdtFrom 不受限制，这是一个问题。

我想要的是将 xmitdtFrom 的 DisplayDateEnd 设置为 xmitdtTo（如果它不为空）或 DateTime.Now（如果是）。

我想知道实现这一目标的最干净的方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T12:46:54.477

I decided to go with another approach entirely.

Instead of messing about with the viewmodel, I created an IfNullConverter, that when used in a binding would pass the bound object, if it was not null, or would pass its ConversionParameter, if it was.

And I used that in binding the from date's DisplayDateEnd - with xmitDTTo as the bound property, and DateTime.Now as the ConversionParameter.

Solves the problem cleanly, entirely within the UI (and this is a UI problem, not a data problem, so I'd prefer a solution that doesn't pollute the viewmodel). And it creates a general purpose functionality, that will be available to use in other similar circumstances.

The converter:

```
public class IfNullConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value == null)
            return parameter;
        else
            return value;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

The binding:

```
<DatePicker Grid.Row="1" Grid.Column="2" 
    SelectedDate="{Binding Path=xmitdtFrom, Mode=TwoWay}"
    DisplayDateEnd="{Binding xmitdtThrough, Converter={StaticResource ifNullConverter}, ConverterParameter={x:Static sys:DateTime.Now}}"
    /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:43:09.893

也许您可以尝试添加另一个可以在 DisplayDateEnd 中绑定的属性。像这样的东西（未经测试）：

```
 private DateTime? _displayDateEnd;
    public DateTime? DisplayDateEnd
    {
        get { return this._displayDateEnd; }
        set
        {
            this._displayDateEnd = value; 
            notifyPropertyChanged("DisplayDateEnd");
        } 
```

从 xmidtTo 设置新属性的值：

```
 private DateTime? _xmitdtTo; 
    public DateTime? xmitdtTo 
    { 
        get { return this._xmitdtTo; }
        set 
        { 
            this._xmitdtTo = value;

            if (_xmitdtTo == null)
                DisplayDateEnd = _xmitdtTo;
            else
                DisplayDateEnd = DateTime.Now();

            notifyPropertyChanged("DisplayDateEnd"); 
            notifyPropertyChanged("xmitdtTo"); 
        } 
    } 
```

您更新的 xaml：

```
<DatePicker ... DisplayDateEnd="{Binding DisplayDateEnd}"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T18:58:49.880

你真的需要 xmitdtTo 为空吗？我的意思是，当它为空时，您不会获取或保留重要数据，对吗？如果是这种情况，那么我会通过将 _xmitdtTo 设置为今天作为默认值来规避整个问题。

```
private DateTime? _xmitdtTo = DateTime.Today; 
```

如果您需要保留数据，则可以更改属性，改为在 _xmitdtTo 为空时返回今天。

```
public DateTime? xmitdtTo   
{   
    get
    {
        if (!_xmitdtTo.HasValue)
            return DateTime.Today;
        return this._xmitdtTo; 
    } 
```

如果你*真的*想保留你的数据的空性，那么你可以在你的对象上创建一个单独的属性来分配给 xmitdtTo 的 DisplayDateEnd：

```
public DateTime xmitdtDateEnd
{
    get
    {
        return _xmitdtTo ?? DateTime.Today;
    }
} 
```

不要忘记在 xmitdtTo 属性分配中添加对 notifyPropertyChanged("xmitdtDateEnd") 的调用，以便在您更改 xmitdtTo 时更新 UI。

```
set 
{ 
    this._xmitdtTo = value; 
    notifyPropertyChanged("xmitdtTo"); 
    notifyPropertyChanged("xmitdtDateEnd"); 
} 
```

# java - PLS-00306：在 Java 中调用 GET_NEW_EVENTS 时参数的数量或类型错误

> ID：12751878
> 
> 赞同：1
> 
> 时间：2012-10-05T18:18:23.290
> 
> 标签：java, oracle, stored-procedures, jdbc, oracle10g

从 Java 调用存储过程时出现以下错误：

**“java.sql.SQLException：[Oracle][ODBC][Ora]ORA-06550：第 1 行，第 7 列：PLS-00306：调用 'GET_NEW_EVENTS' ORA-06550：第 1 行，第 1 列的参数数量或类型错误7: PL/SQL: 语句被忽略”**

存储过程如下：

```
 create or replace package body event_subscription as
    procedure get_new_events( p_events in out SYS_REFCURSOR ) as
    begin
        open p_events for
            select log_id from event_alert_log;         
    end get_new_events;
end event_subscription; 
```

调用存储过程的Java代码如下：

```
 sqlString = "BEGIN event_subscription.get_new_events(?); END;";
CallableStatement  cs = connection.prepareCall(sqlString);
cs.registerOutParameter(1,OracleTypes.CURSOR);
cs.execute(); // This line is failing and throwing the SQLException
ResultSet rs = (ResultSet) cs.getObject(1); 
```

Oracle 版本为：Oracle Database 10g Express Edition Release 10.2.0.1.0 - 产品 Java 版本为：1.6。

有人可以在这个问题上帮助我。我一直在尝试所有可能的解决方案来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T22:36:15.917

奇怪的。我无法重现这个。我在 Windows 7 x64 上使用 Oracle XE 11.2.0.2.0，版本 11.2.0.2.0 为`ojdbc6.jar`.

我没有你的表，所以我查询了一个数据字典视图。我创建了以下包

```
create or replace package event_subscription as
   procedure get_new_events( p_events out SYS_REFCURSOR );
end;

create or replace package body event_subscription as
    procedure get_new_events( p_events out SYS_REFCURSOR )
    as
    begin
        open p_events for
            select object_name, object_type from all_objects where rownum <= 10;
    end get_new_events;
end event_subscription; 
```

并编译了以下 Java 类：

```
import java.sql.*;

public class So12751878 {
    public static void main(String[] args) throws Exception {
        new oracle.jdbc.OracleDriver();
        Connection connection = DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE", "user", "password");
        String sqlString = "BEGIN event_subscription.get_new_events(?); END;";
        CallableStatement cs = connection.prepareCall(sqlString);
        cs.registerOutParameter(1, oracle.jdbc.OracleTypes.CURSOR);
        cs.execute();
        ResultSet rs = (ResultSet) cs.getObject(1);
        while (rs.next()) {
            System.out.println("Got '" + rs.getString(1) + "' and '" + rs.getString(2) + "'.");
        }
    }
} 
```

这运行成功。`OUT`如果我将存储过程的参数从更改为 ，它也可以成功运行`IN OUT`。

**编辑**：您现在已经在评论中澄清您正在使用 JDBC-ODBC 桥驱动程序连接到 Oracle。但是，您将参数的类型注册为`oracle.jdbc.OracleTypes.CURSOR`. 这种类型特定于 Oracle JDBC 驱动程序，因此我不希望 JDBC-ODBC 桥驱动程序能够理解，因为它必须支持多个数据库。

`OracleTypes.*`故事的寓意：如果使用常量，请不要使用 JDBC-ODBC 桥驱动程序连接到 Oracle 。更好的是，不要使用 JDBC-ODBC 桥驱动程序连接到 Oracle。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T19:48:55.350

那是因为你有一个IN OUT参数，所以你必须设置IN，例如：

```
cs.setInt(1, -2); 
```

然后是你已经拥有的超参数。两个都。

```
cs.registerOutParameter(1,OracleTypes.CURSOR); 
```

您遇到的问题是光标 IN... 不能作为 IN 参数工作。你真的要发送一个 refcursor 作为参数吗？

# java - 为什么我的比较计数功能不计数交换？

> ID：12751880
> 
> 赞同：0
> 
> 时间：2012-10-05T18:18:25.587
> 
> 标签：java

因此，此代码确实计算了比较，但不计算交换（每个循环中的 countswap）。

有谁知道为什么，它太“嵌入式”还是什么？感谢一百万的帮助。

```
 */
package sorts;

import java.util.*;

public class Sorts {

    Random rand = new Random();

    private int countcomp;
    private int countswap;

    public Sorts() {
        countcomp = 0;
        countswap = 0;
    }

    public int getcomparisions() {
        return countcomp;
    }

    public int getswaps() {
        return countswap;
    }

    public static void main(String args[]) {

        Sorts sorts = new Sorts();

        //int[] unsorted = {2, 4, 1, 9, 5, 10, 3, 6, 8, 7};
        //int[] unsorted = {10, 9, 8, 7, 6, 5, 4, 3, 2, 1};
        //int[] unsorted = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};
        int[] unsorted = new int[100];
        for(int i = 0; i < 100; i++){
            unsorted[i] = i;
    }
        //GENERATOR OF INT ARRAYS

        System.out.println("\n\tSelection sort");
        Sorts sortsselect = new Sorts();
        sortsselect.selection(unsorted);
        System.out.println("\nSwap Count : " + sortsselect.getswaps() + "\nComparision Count : " + sortsselect.getcomparisions());

        System.out.println("\n\tBubble sort");
        Sorts sortsbubble = new Sorts();
        sortsbubble.bubble(unsorted);
        System.out.println("\nSwap Count : " + sortsbubble.getswaps() + "\nComparision Count : " + sortsbubble.getcomparisions());

        System.out.println("\n\n\tInsertion sort");
        Sorts sortsinsertion = new Sorts();
        sortsinsertion.insertion(unsorted);
        System.out.println("\nSwap Count : " + sortsinsertion.getswaps() + "\nComparision Count : " + sortsinsertion.getcomparisions());

        System.out.println("\n\n\tExchange sort");
        Sorts sortsexchange = new Sorts();
        sortsexchange.exchange(unsorted);
        System.out.println("\nSwap Count : " + sortsexchange.getswaps() + "\nComparision Count : " + sortsexchange.getcomparisions());

    }

    //selection takes in a unsorted array and returns a sorted one
    public void selection(int[] selunsorted) {

        int i, j, max;
        countcomp = 0;
        countswap = 0;
        max = selunsorted.length;

        //iterate through the array and move the smallest number into an incrementing position
        for (i = 0; i < max - 1; i++) {
            int smallpos = i;
            int smallest = selunsorted[i];

            for (j = i + 1; j < max; j++) {
                countcomp++;
                if (selunsorted[j] < smallest) {
                    countswap++;
                    smallest = selunsorted[j];
                    smallpos = j;
                }
            }
            int temp = selunsorted[i];
            selunsorted[i] = selunsorted[smallpos];
            selunsorted[smallpos] = temp;
        }
        for (i = 0; i < max; i++) {
            j = selunsorted[i];
            System.out.print(j + ",");
        }
    }

    public void bubble(int[] bubunsorted) {

        int max = bubunsorted.length;
        int i, imax, j;
        countcomp = 0;
        countswap = 0;

        for (imax = max; imax > 0; imax--) {
            for (j = 0; j + 1 < imax; j++) {
                countcomp++;
                if (bubunsorted[j] > bubunsorted[j + 1]) {
                    int temp = bubunsorted[j + 1];
                    bubunsorted[j + 1] = bubunsorted[j];
                    bubunsorted[j] = temp;
                    countswap++;
                }
            }
        }
        for (i = 0; i < max; i++) {
            j = bubunsorted[i];
            System.out.print(j + ",");
        }
    }

    public void insertion(int[] insertunsorted) {

        int i, j, a;
        int max = insertunsorted.length;
        countcomp = 0;
        countswap = 0;

        for (i = 0; i < max; i++) {
            for (j = 0; j < i; j++) {
                countcomp++;
            }
            if (insertunsorted[j] > insertunsorted[i]) {
                int temp = insertunsorted[j + 1];
                insertunsorted[j + 1] = insertunsorted[i];
                countswap++;
                for (a = (j + 2); a < (i + 1); a++) {
                    int temp1 = insertunsorted[a];
                    insertunsorted[a] = temp;
                    temp = temp1;
                    countswap++;
                }
            }
        }

        for (i = 0; i < max; i++) {
            j = insertunsorted[i];
            System.out.print(j + ",");
        }
    }

    public void exchange(int[] exchangeunsorted) {

        int max = exchangeunsorted.length;
        int i, j;
        countcomp = 0;
        countswap = 0;

        for (i = 0; i < max; i++) {
            for (j = i; j < max; j++) {
                countcomp++;
                if (exchangeunsorted[j] < exchangeunsorted[i]) {
                    countswap++;
                    int temp = exchangeunsorted[j];
                    exchangeunsorted[i] = exchangeunsorted[j];
                    exchangeunsorted[j] = temp;
                }
            }
        }
        for (i = 0; i < max; i++) {
            j = exchangeunsorted[i];
            System.out.print(j + ",");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:25:10.117

**在您的 main()**方法开始时查看您的**数组初始化**：-

 **```
int[] unsorted = new int[100];
for(int i = 0; i < 100; i++){
        unsorted[i] = i;
} 
```

您的数组已经排序..所以，不会发生交换..所以，swapCount 为 0..但仍然会进行比较..因此它们被计算在内..

尝试使用较小的数组..并向其中添加随机值..未排序的..它将起作用..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:59:29.883

是的，你正在创建一个排序数组，所以没有交换发生。你应该这样做：

```
Random r = new Random();
for(int i = 0; i < 100; i++)  {
unsorted[i] = r.nextInt(500);
} 
```

您还需要为每个不同的排序算法创建一个新的未排序数组（或仅使用 Arrays.copyOf(array) 复制数组），因为数组将按第一个排序算法排序。如果你这样做，交换会正确显示。

此外，我复制并测试了您的代码，并且在交换排序或插入排序中某处有问题，因为交换排序的输出很多为 1。**

# ruby-on-rails - 无法在山狮中使用 rvm 安装 ruby 1.9.2

> ID：12751881
> 
> 赞同：2
> 
> 时间：2012-10-05T18:18:33.243
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rvm

当我执行以下操作时，我安装了 rvm，现在尝试安装 ruby​​ 1.9.2：

```
~% rvm install 1.9.2
No binary rubies available for: ///ruby-1.9.2-p320.
Continuing with compilation. Please read 'rvm mount' to get more information on binary  rubies.
Fetching yaml-0.1.4.tar.gz to /Users/info/.rvm/archives
Extracting yaml-0.1.4.tar.gz to /Users/info/.rvm/src
Configuring yaml in /Users/info/.rvm/src/yaml-0.1.4. 
```

我不知道我在这里做错了什么，请注意我使用的是山狮 OS X，并且我已经安装了 ruby​​ 1.9.3 和 rvm

```
~% rvm list 

rvm rubies

=* ruby-1.9.3-p194 [ x86_64 ]

# => - current
# =* - current && default
#  * - default 
```

你知道我在这里做错了什么吗？

请注意，rvm 要求给了我以下结果：[https ://gist.github.com/edb19698cd23e52999f5](https://gist.github.com/edb19698cd23e52999f5)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T17:11:25.527

这项工作对我来说确保 RVM 是最新的

```
rvm get head

CC=/usr/bin/gcc rvm install 1.9.2 --enable-shared 
```

注意：/usr/bin/gcc ==> path/to/gcc

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:37:28.727

RVM 刚刚升级了他们的版本并添加了二进制 ruby​​ 选项，这意味着它将在您的机器上下载并编译 ruby​​，因为它没有找到合适的二进制文件。这不是错误，只是一个信息。看起来它只是在花时间，下载/编译需求可能需要 30 分钟。

# jquery - 如何使用 jQuery 创建多个显示和隐藏切换按钮？

> ID：12751883
> 
> 赞同：3
> 
> 时间：2012-10-05T18:18:34.680
> 
> 标签：jquery, html, css, dreamweaver

基本上我一直在尝试使用 jQuery 在我的内容中显示（）和隐藏（）子导航。我找到了在单击按钮时显示和隐藏的代码，但是，我一直在尝试这样做，以便当单击一个导航按钮时，它将打开其下方的内容，但是当单击该列表中的另一个导航按钮时之后，它将显示该内容并隐藏前一个内容。

任何帮助将不胜感激。

**子导航 HTML**

```
 <ul id="subNav">
                            <li>
                                <a class="showSingle" target="1">
                                    BLOMFIELD ROAD, 2012
                                    <img src="images/sub-nav-1.jpg" alt="Blomfield Road 2012" />
                                </a>
                            </li>
                            <li>
                                <a class="showSingle" target="2">
                                    KIDDERPORE GARDENS
                                    <img src="images/sub-nav-2.jpg" alt="Kidderpore Gardens"/>
                                </a>
                            </li>
                            <li>
                                <a class="showSingle" target="3">
                                    BLOMFIELD ROAD, 2010
                                    <img src="images/sub-nav-3.jpg" alt="Blomfield Road 2010" />
                                </a>
                            </li>
                            <li>
                                <a class="showSingle" target="4">
                                    CECILE PARK
                                    <img src="images/sub-nav-4.jpg" alt="Cecile Park" />
                                </a>
                            </li>
                            <li>
                                <a class="showSingle" target="5">
                                    LANSDOWNE ROAD
                                    <img src="images/sub-nav-5.jpg" alt="Landsdowne Road" />
                                </a>
                            </li>
                            <li>
                                <a class="showSingle" target="6">
                                    BLOMFIELD ROAD, 2007
                                    <img src="images/sub-nav-6.jpg" alt="Blomfield Road 2007" />
                                </a>
                            </li>
                            <li>
                                <a class="showSingle" target="7">
                                    HANOVER TERRACE
                                    <img src="images/sub-nav-7.jpg" alt="Hanover Terrace" />
                                </a>
                            </li>
                        </ul>
                  </div> <!--END OF subHeader --> 
```

**内容 HTML**

```
<div id="div1" class="targetDiv">
                      <div class="content">
                          <p class="projHeader">
                              BLOMFIELD ROAD, 2012
                          </p>
                          <div class="sqBox"></div>
                          <p class="address">
                               2012, Little Venice, London W9
                          </p>
                          <p class="jobDescrip">
                              Complete strip out and refurbishment of 
                              a fire damaged Grade II listed 4 storey building. 
                              Including replacement of fire damaged wall 
                              & floor structures, chemical cleaning to 
                              remove smoke odours and reinstatement to 
                              match original fit out.
                          </p>
                          <p class="projectCompletion">
                              <span class="pcCss">PROJECT COMPLETION</span> <br>
                              April 2011 – February 2012 (10 months)
                          </p>
                          <p class="architect">
                              <span class="title">ARCHITECT</span> <br>
                              <span class="company">Metropolitan Development Consultancy Ltd</span> <br>
                              <a href="www.mdclondon.com"> www.mdclondon.com </a>
                          </p>
                          <div class="spec">
                              <ul>
                                  <li> Control 4 automation system </li>
                                  <li> Bespoke joinery by Ottima </li>
                                  <li> High specification M&amp;E services </li>
                                  <li> Lutron Homeworks lighting system </li>
                                  <li> Poggenpohl kitchen by Nicholas Anthony  </li>
                                  <li> Air conditioning, audio visual & underfloor <br>
                                      heating system automated via Control 4 system.  
                                  </li>
                              </ul>
                         </div> <!-- END OF spec -->
                        </div> <!-- END OF content -->
                        <div class="slideshow">

                        </div><!-- END OF slideshow -->
                </div><!-- END OF div1 -->
                <div id="div2" class="targetDiv">
                  <div class="content">
                          <p class="projHeader">
                              BLOMFIELD ROAD, 2012
                          </p>
                          <div class="sqBox"></div>
                          <p class="address">
                               2012, Little Venice, London W9
                          </p>
                          <p class="jobDescrip">
                              Complete strip out and refurbishment of 
                              a fire damaged Grade II listed 4 storey building. 
                              Including replacement of fire damaged wall 
                              & floor structures, chemical cleaning to 
                              remove smoke odours and reinstatement to 
                              match original fit out.
                          </p>
                          <p class="projectCompletion">
                              <span class="pcCss">PROJECT COMPLETION</span> 
                              April 2011 – February 2012 (10 months)
                          </p>
                          <p class="architect">
                              <span class="title">ARCHITECT</span> <br>
                              <span class="company">Metropolitan Development Consultancy Ltd</span> <br>
                              <a href="www.mdclondon.com"> www.mdclondon.com </a>
                          </p>
                          <div class="spec">
                              <ul>
                                  <li> Control 4 automation system </li>
                                  <li> Bespoke joinery by Ottima </li>
                                  <li> High specification M&amp;E services </li>
                                  <li> Lutron Homeworks lighting system </li>
                                  <li> Poggenpohl kitchen by Nicholas Anthony  </li>
                                  <li> Air conditioning, audio visual & underfloor <br>
                                      heating system automated via Control 4 system.  
                                  </li>
                              </ul>
                            </div> <!-- END OF spec -->
                        </div> <!-- END OF content -->
                        <div class="slideshow">

                        </div><!-- END OF slideshow -->
                    </div> <!--END OF kpg --> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T18:24:19.693

jQuery 插件中提供了一个名为手风琴的好解决方案：jQuery UI。试试看这个：http: [//jqueryui.com/demos/accordion/](http://jqueryui.com/demos/accordion/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:27:18.193

可以编写一些额外的 jQuery：

当您单击一个新项目时，您可以遍历其兄弟姐妹并查看其中是否有人当前处于活动状态。该活动同级的 just switch 类为*inactive*，并使当前单击的项目**处于活动状态**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T18:33:21.733

我相信你正在寻找这样的**[东西](http://jsfiddle.net/Rwx7P/3/)**。这只是一个示例，向您展示了切换文章内容所涉及的 jQuery，您应该对其进行调整以适合您的特定情况。

**HTML**：

```
<div class="article">
    <h1>TITLE 1</h1>
    <div class="content">content 1</div>
</div>
<div class="article">
    <h1>TITLE 2</h1>
    <div class="content">content 2</div>
</div>
<div class="article">
    <h1>TITLE 3</h1>
    <div class="content">content 3</div>
</div>
<div class="article">
    <h1>TITLE 4</h1>
    <div class="content">content 4</div>
</div> 
```

**​CSS** ：

```
.content{
 display:none;
 margin: 10px;   
}

h1{
    font-size: 16px;
    font-wieght: bold;
    color: gray;
    border: 1px solid black;
    background: #eee;
    padding: 5px;
}
h1:hover{
 cursor: pointer;
 color: black;   
} 
```

**jQuery** :

```
$("h1").on("click", function(){
    console.log($(this).children("div"));
    $(this).siblings("div.content").slideToggle();
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T18:41:03.967

您是否要显示和隐藏那些`targetDiv`s？如果是这样，您可以使用类似的东西

```
$('a.showSingle').click(function(e){ 
   e.preventDefault(); 
   $('div.targetDiv').hide().filter('#div' + $(this).attr('target')).show();
}); 
```

这是一个例子：http: [//jsfiddle.net/TqtXz/](http://jsfiddle.net/TqtXz/)

# mysql - MySQL Foreign Key Error 1005 errno 150（表引擎、字段类型、长度和索引都可以）

> ID：12751890
> 
> 赞同：0
> 
> 时间：2012-10-05T18:18:58.733
> 
> 标签：mysql, foreign-keys

我知道关于这个错误有很多类似的问题（外键在创建或更新表时失败）。我已经检查过：

*   两个表都是 InnoDb
*   所有字段都被索引（或PK，所以..索引），int和长度10

但它仍然不起作用......现在，我只希望有人看看我的 SQL 代码并告诉我是否有问题:(

```
-- ----------------------------
-- Table structure for `hotels`
-- ----------------------------
DROP TABLE IF EXISTS `hotels`;
CREATE TABLE `hotels` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  -- other fields
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Table structure for `hotelsearch_query`
-- ----------------------------
DROP TABLE IF EXISTS `hotelsearch_query`;
CREATE TABLE `hotelsearch_query` (
  `id` int(10) NOT NULL,
  -- other fields
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- ----------------------------
-- Table structure for `hotelsearch_result`
-- ----------------------------
DROP TABLE IF EXISTS `hotelsearch_result`;
CREATE TABLE `hotelsearch_result` (
  `query_id` int(10) unsigned NOT NULL,
  `hotel_id` int(10) unsigned NOT NULL,
  -- other fields
  PRIMARY KEY (`query_id`,`hotel_id`),
  KEY `IDX_QUERY` (`query_id`),
  KEY `IDX_HOTEL` (`hotel_id`),
  FOREIGN KEY (`query_id`) REFERENCES `hotelsearch_query`(`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY (`hotel_id`) REFERENCES `hotels`(`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 ROW_FORMAT=COMPACT; 
```

当我删除关于外键的 2 行时，一切正常。当我尝试两者或一个一个时，我也有错误。

请帮我 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T18:23:35.257

列和引用的数据类型必须相同。像这样更改定义，它将起作用：

```
CREATE TABLE `hotelsearch_result` (
  `query_id` int(10)  NOT NULL,
  `hotel_id` int(10)  NOT NULL,
  ... 
```

您的 id 类型`int unsigned`和类型的引用`int`

[SQLFiddle 示例](http://sqlfiddle.com/#!2/46ac5)

# ios - 将自定义活动添加到 UIActivityController 时出现问题

> ID：12751891
> 
> 赞同：8
> 
> 时间：2012-10-05T18:19:00.760
> 
> 标签：ios, android-activity, uiactivity

我正在尝试对标准活动（打印、邮件、FaceBook 等）实施自定义活动，但现在只需要标准打印（用于 AirPrint）和我自己通过直接方法进行的自定义打印。我显然缺少一些基本的东西，因为我的自定义类中的任何方法都没有被调用过。现在我只有一些 NSLog 语句来确定调用顺序，并让框架运行。

以下是我对自定义活动类的测试代码：

```
//  PrintActivity.h

#import <UIKit/UIKit.h>

@interface PrintActivity : UIActivity

@end 
```

还有他们

```
#import "PrintActivity.h"

@interface PrintActivity ()
@property (nonatomic, strong) UIWebView *dummyWebView;
@end

@implementation PrintActivity

- (NSString *)activityType {
    NSLog(@"activityType");
    return @"MetriScan Print";
}

- (NSString *)activityTitle {
    NSLog(@"activityTitle");
    return @"MetriScan\nPrint";
}

- (UIImage *)activityImage {
    NSLog(@"activityImage");
    UIImage *icon = [UIImage imageNamed:@"metriscan_57_c2a_3.png"];
    return icon;
}

- (BOOL)canPerformWithActivityItems:(NSArray *)activityItems {
    NSLog(@"canPerformWithActivityItems");
    return YES;
}

- (void)prepareWithActivityItems:(NSArray *)activityItems {
    NSLog(@"prepareWithActivityItems");
}

- (void)performActivity {
    NSLog(@"Do the actual printing here");
// My custom code here

} 
```

这是主程序中的调用：

```
- (IBAction)printReport:(UIBarButtonItem *)sender {
    NSLog(@"Print Report");

    PrintActivity *metriscanPrint = [[PrintActivity alloc] init];

    UIViewPrintFormatter *printFormatter = [self.webView viewPrintFormatter];

    NSArray *activityItems = [NSArray arrayWithObjects:printFormatter, nil];
    NSArray *appActivities = [NSArray arrayWithObjects:metriscanPrint, nil];
    UIActivityViewController *activityController = [[UIActivityViewController alloc] initWithActivityItems:activityItems applicationActivities:appActivities];
    //activityController.excludedActivityTypes = [NSArray arrayWithObjects:UIActivityTypePostToFacebook, UIActivityTypePostToTwitter, UIActivityTypePostToWeibo, UIActivityTypeMail, UIActivityTypeMessage, nil];
    activityController.completionHandler = ^(NSString *activityType, BOOL completed) {
        sender.enabled = YES;
    };

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        [self presentViewController:activityController animated:YES completion:nil];
    } else {
        sender.enabled = NO;
        self.printPop = [[UIPopoverController alloc] initWithContentViewController:activityController];
        [self.printPop presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES];
    } 
```

正如我所说，没有调用自定义类中的任何方法，但系统邮件、消息和复制图标显示在活动表中，而不是打印图标。我只希望系统打印图标（和我自己的）。

如果我取消注释顶部的语句块（并注释掉 NSArray *activityItems ......），则系统邮件、消息、打印和复制图标。在这个实验中，我认为我通过创建自己的格式化程序来混合不同的方法，但这似乎是 WWDC 2012 的建议？

如果我随后取消注释带有“excludeActivityTypes”的行，我只会得到系统打印图标。

我欢迎任何意见来帮助我解决这个问题。

如果有人知道任何示例代码来做我想做的事，那就太好了。

**编辑：**将代码更新为我的工作代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-07T18:18:17.640

在过去的一周里，我也在 UIActivity 上大发雷霆，Apple 确实需要更好地解释它并添加更多功能；尝试这个：

打印活动.h

```
#import <UIKit/UIKit.h>
@interface PrintActivity : UIActivity
@end 
```

打印活动.m

```
#import "PrintActivity.h"

@implementation PrintActivity

- (NSString *)activityType
{
   return @"MetriScan.Print";
}

- (NSString *)activityTitle
{
    return @"Print MtriScan";
}

- (UIImage *)activityImage
{   
    //***** Note: I recommend using two sizes, as the iPad's UIActivity image size differs from 
    //***** the iPhone's. Also, create @2x sizes for Retina compatible devices. So you will     
    //***** have a total of 4 images.
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
{
    return [UIImage imageNamed:@"test_72.png"];
}

    return [UIImage imageNamed:@"test_57.png"];
}

- (BOOL)canPerformWithActivityItems:(NSArray *)activityItems
{
    NSLog(@"%s", __FUNCTION__);
    return YES;
}

- (void)prepareWithActivityItems:(NSArray *)activityItems
{
    NSLog(@"%s",__FUNCTION__);
}

- (UIViewController *)activityViewController
{
    NSLog(@"%s",__FUNCTION__);
    return nil;
}

- (void)performActivity
{
    // This is where your custom print code should go

}

@end 
```

不要忘记也制作这两个文件：

PrintProvider.h

```
#import <UIKit/UIKit.h>

@interface PrintProvider : UIActivityItemProvider <UIActivityItemSource>

@end 
```

PrintProvider.m

```
#import "PrintProvider.h"

@implementation PrintProvider

#pragma mark - UIActivityItemSource

- (id)activityViewController:(UIActivityViewController *)activityViewController itemForActivityType:(NSString *)activityType
{
    NSLog(@"%s",__FUNCTION__);
    NSLog(@"%@", activityType);
    return [super activityViewController:activityViewController itemForActivityType:activityType];
}

@end 
```

现在我们终于可以调用它了：

```
- (IBAction)printReport:(UIBarButtonItem *)sender {

CustomProvider *customProvider =
                [[CustomProvider alloc]init];
                NSArray *items = [NSArray arrayWithObjects:customProvider,nil];

                CustomActivity *ca = [[CustomActivity alloc]init];

                UIActivityViewController *activityVC =
                [[UIActivityViewController alloc] initWithActivityItems:items
                                                  applicationActivities:[NSArray arrayWithObject:ca]];

                activityVC.excludedActivityTypes = @[UIActivityTypePostToWeibo,
                UIActivityTypeAssignToContact,UIActivityTypeCopyToPasteboard,
                UIActivityTypeSaveToCameraRoll,UIActivityTypeMail,UIActivityTypePostToTwitter,
                UIActivityTypePostToFacebook,UIActivityTypeMessage];

                activityVC.completionHandler = ^(NSString *activityType, BOOL completed)
                {
                    NSLog(@" activityType: %@", activityType);
                    NSLog(@" completed: %i", completed);
                };

                    self.popoverController = [[UIPopoverController alloc] initWithContentViewController:activityVC];

                    CGRect rect = [[UIScreen mainScreen] bounds];

                    [self.popoverController
                     presentPopoverFromRect:rect inView:self.view
                     permittedArrowDirections:0
                     animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T21:46:18.613

@troop231 - great answer, and very helpful.

The only thing I'd add is to be sure to signal completion of the operation or the completion routine won't get called and the popover won't dismiss. Something like:

```
- (void)performActivity {
    NSLog(@"Do the actual activity here");
    // My custom code here

    [self activityDidFinish:YES];  // indicate completion here!!
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-21T07:05:52.707

谢谢你的帮助，伙计们！而且，对于活动图像，我们似乎必须在 Apple 文档之后提供图像：

> 图像的 alpha 通道用作掩码以生成呈现给用户的最终图像。图像本身中的任何颜色数据都将被忽略。不透明的像素应用了一个渐变，然后这个渐变被放置在标准背景的顶部。因此，一个完全不透明的图像会产生一个渐变填充的矩形。对于 iPhone 和 iPod touch，图像不应大于 43 x 43 点（对于配备 Retina 显示屏的设备，这相当于 86 x 86 像素。）对于 iPad，图像不应大于 55 x 55 点（相当于 110 x对于配备 Retina 显示屏的 iPad，为 110 像素。）

# android - 单线程应用中 Handler 的使用

> ID：12751895
> 
> 赞同：0
> 
> 时间：2012-10-05T18:19:19.433
> 
> 标签：android, multithreading, handler

根据Android文档

> “一个 Handler 允许您发送和处理与线程的 MessageQueue 关联的 Message 和 Runnable 对象。每个 Handler 实例都与一个线程和该线程的消息队列相关联。当您创建一个新的 Handler 时，它会绑定到线程/消息队列创建它的线程——从那时起，它会将消息和可运行对象传递到该消息队列，并在它们从消息队列中出来时执行它们。”

我完全在多线程应用程序中使用 Handler，其中一个线程将使用 Handler 发布到另一个线程消息队列，但是在单线程应用程序中 Handler 的用途是什么。我之所以问这个问题是因为我在 developer.google.com 上看到了几个在单线程应用程序中使用 HAndler 的示例应用程序。[这](http://developer.android.com/training/basics/location/index.html)是一个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:24:58.827

您发布的代码示例不是单线程的 - 例如 AsyncTask 的 doInBackground() 方法在与 UI 线程分开的线程上运行。这就是在该方法中调用 Handler 的原因。

阅读 AsyncTasks，然后查看示例中的 ReverseGeocodingTask。

# c++ - Collada剥皮

> ID：12751900
> 
> 赞同：4
> 
> 时间：2012-10-05T18:19:37.643
> 
> 标签：c++, c

我希望你能帮助我。我的问题是 collada 的剥皮方程：

```
v += {[(v * BSM) * IBMi * JMi] * JW} 
```

*   `n`: 影响顶点 v 的关节数
*   `BSM`: 绑定形状矩阵
*   `IBMi`: 关节 i 的逆绑定姿势矩阵
*   `JMi`: 关节 i 的变换矩阵
*   `JW`: 关节 i 对顶点 v 影响的权重

必须计算每个顶点“v”（即通过“for”bucle）。但是，如果我有 10,000 个或更多顶点的网格，它不是非常非常慢吗？这必须实时计算吗？没有其他方法来计算“v”吗？

非常感谢你。:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:59:54.527

您可能可以使用阈值`JW`- 对于每个顶点，您可以跳过低于某个阈值的任何关节的`v`进一步计算。`i``v``JWi`

`IBMi * JMi`你也可以为每个关节预先计算一次，对吧？

# php - 附件作为编码文本发送

> ID：12751901
> 
> 赞同：0
> 
> 时间：2012-10-05T18:19:40.443
> 
> 标签：php, email

我正在尝试使用此脚本和快速邮件程序库将我的电子邮件中的附件自动转发到另一个帐户。事情似乎在一定程度上有效，但附件是作为编码文本发送的。我想按原样发送附件。我是 php 新手，无法弄清楚问题出在哪里。请帮我。

```
<?php
require_once 'lib/swift_required.php';
$hostname = '{imap.asd.com:993/imap/ssl}INBOX';
$username = 'abc@as.com';
$password = 'ppwppw';

/* try to connect */
$connection = imap_open($hostname,$username,$password) or die('Cannot connect to Tiriyo: ' . imap_last_error());

ini_set('memory_limit', '256M');

function Message_Parse($id)

{

global $connection;

    if (is_resource($connection))
    {
        $result = array
        (
            'text' => null,
            'html' => null,
            'attachments' => array(),
        );

                $structure = imap_fetchstructure($connection, $id, FT_UID);

        if (is_array($structure) && array_key_exists('parts', $structure))
        {
            foreach ($structure->parts as $key => $part)
            {
                if (($part->type >= 2) || (($part->ifdisposition == 1) && ($part->disposition == 'ATTACHMENT')))
                {
                    $filename = null;

                    if ($part->ifparameters == 1)
                    {
                        $total_parameters = count($part->parameters);

                        for ($i = 0; $i < $total_parameters; $i++)
                        {
                            if (($part->parameters[$i]->attribute == 'NAME') || ($part->parameters[$i]->attribute == 'FILENAME'))
                            {
                                $filename = $part->parameters[$i]->value;

                                break;
                            }
                        }

                        if (is_null($filename))
                        {
                            if ($part->ifdparameters == 1)
                            {
                                $total_dparameters = count($part->dparameters);

                                for ($i = 0; $i < $total_dparameters; $i++)
                                {
                                    if (($part->dparameters[$i]->attribute == 'NAME') || ($part->dparameters[$i]->attribute == 'FILENAME'))
                                    {
                                        $filename = $part->dparameters[$i]->value;

                                        break;
                                    }
                                }
                            }
                        }
                    }

                    $result['attachments'][] = array
                    (
                        'filename' => $filename,
                        'content' => str_replace(array("\r", "\n"), '', trim(imap_fetchbody($connection, $id, ($key + 1), FT_UID))),
                    );
                }

                else
                {
                    if ($part->subtype == 'PLAIN')
                    {
                        $result['text'] = imap_fetchbody($connection, $id, ($key + 1), FT_UID);
                    }

                    else if ($part->subtype == 'HTML')
                    {
                        $result['html'] = imap_fetchbody($connection, $id, ($key + 1), FT_UID);
                    }

                    else
                    {
                        foreach ($part->parts as $alternative_key => $alternative_part)
                        {
                            if ($alternative_part->subtype == 'PLAIN')
                            {
                                echo '<h2>' . $alternative_part->subtype . ' ' . $alternative_part->encoding . '</h2>';

                                $result['text'] = imap_fetchbody($connection, $id, ($key + 1) . '.' . ($alternative_key + 1), FT_UID);
                            }

                            else if ($alternative_part->subtype == 'HTML')
                            {
                                echo '<h2>' . $alternative_part->subtype . ' ' . $alternative_part->encoding . '</h2>';

                                $result['html'] = imap_fetchbody($connection, $id, ($key + 1) . '.' . ($alternative_key + 1), FT_UID);
                            }
                        }
                    }
                }
            }
        }

        else
        {
            $result['text'] = imap_body($connection, $id, FT_UID);
        }

        $result['text'] = imap_qprint($result['text']);
        $result['html'] = imap_qprint(imap_8bit($result['html']));

        return $result;

    }

    return false;
}

 $emails = imap_search($connection,'ALL');
  rsort($emails);

 foreach($emails as $email_number) {

$result = Message_Parse($email_number);
$data = $result['attachments'];
$transport = Swift_MailTransport::newInstance();
$mailer = Swift_Mailer::newInstance($transport);
$attachment = Swift_Attachment::newInstance($data, 'recorded.mp3', 'audio/mp3');
$message = Swift_Message::newInstance('new messaeg')
  ->setFrom(array('aaa@bbb.com' => 'name'))
  ->setTo(array('aaa@ccc.com'))
  ->setBody($result['text'], 'Here is the message itself')
  ->attach($attachment);

  $result1 = $mailer->send($message);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:39:15.993

$data 之后是`$data = $result['attachments'];`什么？认为它是某种附件容器对象。您可能需要进一步挖掘以获得正确的属性（附件），然后重新附加它。见：[http ://dev.kayako.com/browse/SWIFT-2341](http://dev.kayako.com/browse/SWIFT-2341)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T20:56:19.667

这看起来不对：

```
$data = $result['attachments'];
...
$attachment = Swift_Attachment::newInstance($data, 'recorded.mp3', 'audio/mp3'); 
```

当您使用此方法创建附件时，我认为`$data`应该是一个包含附件内容的字符串。但是`$result['attachments']`是原始邮件中所有附件的数组。似乎您应该遍历这些附件，为每个附件创建一个单独的 Swift_Attachment。您还应该保存原始消息中的文件名和内容类型，而不是将它们硬编码为recorded.mp3 和audio/mp3（除非应用程序确保这就是全部内容）。

至于它们被编码——MP3 不是纯文本，那么你有什么期望呢？

# crystal-reports - 回溯日志报告

> ID：12751906
> 
> 赞同：0
> 
> 时间：2012-10-05T18:20:19.200
> 
> 标签：crystal-reports, crystal-reports-xi

我正在尝试在附加到 Fluke Met/Track 数据库（Sybase 后端）的 Crystal Reports XI 中编写积压报告，
我让它在开始和结束日期之间运行，然后按月和日分组。我需要它来显示在开始日期和结束日期之间的日子里实验室中的所有单位

```
October     Units
2
            22525
            22526
3    
            22525
            22526
            22527
4
            22526
            22527
            22530 
```

单位的顺序无关紧要，只是单位出现了。也许我只是度过了艰难的一天，但我不知道如何实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:25:59.857

您可以通过为您的日期添加一个组，打开组专家，单击您的组单击选项来完成此操作，然后您应该会看到类似于“将打印该部分：”的内容，并且您可以选择：**每天。**. 这应该允许每天分组。

# c - 数组中的负索引

> ID：12751918
> 
> 赞同：5
> 
> 时间：2012-10-05T18:20:40.840
> 
> 标签：c, arrays

> **可能重复：**
> [C 中的负数组索引？](https://stackoverflow.com/questions/3473675/negative-array-indexes-in-c)

我可以在数组中使用负索引吗？

```
#include <stdio.h>

int main(void)
{
    char a[] = "pascual";
    char *p = a;

    p += 3;
    printf("%c\n", p[-1]); /* -1 is valid here? */
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T18:22:18.990

是的，`-1`在这种情况下有效，因为它指向分配给`char a[]`数组的内存中的有效位置。`p[-1]`相当于`*(p-1)`。按照您示例中的分配链，它与有效的`a+3-1`, 或相同`a+2`。

**编辑：**一般规则是整数和指针的加法/减法（以及扩展，指针上的等效索引操作）需要产生指向同一数组或数组末尾之外的一个元素的结果为了有效。谢谢，[Eric Postpischil](https://stackoverflow.com/users/298225/eric-postpischil)的精彩笔记。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T18:39:03.920

[C 2011在线草案](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)

> ### 6.5.6 加法运算符
> 
> 8 ...如果表达式`P`指向数组对象的第*i*`(P)+N`个元素，则表达式（等效地，`N+(P)`）和 `(P)-N`（其中`N`的值为*n*）分别指向第*i+n*个和第*i−n 个*数组对象的元素，**只要它们存在**......

强调我的。因此，在您的具体示例中，`p[-1]`它是有效的，因为它指向 ; 的现有元素`a`。然而，`a[-1]`这将是*无效*的，因为`a[-1]`指向一个不存在的元素`a`。同样，`p[-4]`将无效，`a[10]`无效等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T18:21:39.667

当然是有效的。

> (C99, 6.5.2p1) “其中一个表达式的类型应为“指向对象类型的指针”，另一个表达式应为整数类型，结果的类型为“类型”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T18:32:57.630

通常使用这种负面索引是一个坏主意(TM)。但是，我发现了一个有用的地方：三角查找表。对于这样的查找表，我们需要使用一些角度度量作为索引。例如，我可以`sin`使用度数作为索引来索引 -180 度和 +180 度之间的角度值。或者，如果我想使用 radions，我可以使用 PI 的某个分数的倍数，例如`PI/3`，作为索引。然后我可以得到.的倍数`cos`之间`-PI`的值。`PI``PI/3`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-05T18:22:12.733

是的，这是合法的，因为 C 允许您整天进行不安全的指针运算。但是，这很令人困惑，所以不要这样做。另请参阅[同一问题的答案](https://stackoverflow.com/a/3473684/1026671)。

# php - 使用 php post 到数据库处理 javascript 中动态生成的表单

> ID：12751919
> 
> 赞同：1
> 
> 时间：2012-10-05T18:20:48.017
> 
> 标签：php, javascript

我有一个包含动态生成字段的表单。提交的表单中可以有任意数量的字段，具体取决于用户添加了多少字段。这是一个 JSFIDDLE，您可以参考它来了解我动态生成的字段类型。[链接到 JSFIDDLE](http://jsfiddle.net/RASG/bYBPD/)

这个 JSFIDDLE 和我的项目的唯一区别是，我不是在一组中生成 2 个下拉列表和 2 个输入字段，而是在一组中生成 3 个下拉列表和 1 个输入字段。到目前为止，可以生成的集合数量最多为 15 个，用户可以从 jsfiddle 的下拉列表中进行选择。

需要知道的是，如果用户生成了 7 个集合，我如何知道每个字段的名称，因为我必须使用 PHP 来处理此表单的数据并提交到数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T18:28:31.027

看看[这个](http://jsfiddle.net/bYBPD/11/)。它在每个输入的末尾添加一个变量，因此您可以跟踪输入。

**Edit1：**名称将是这样的，

第 1 行 - 输入 1_1、输入 2_1、输入 3_1、输入 4_1

第 2 行 - 输入 1_2、输入 2_2、输入 3_2、输入 4_2 ...等等

**Edit2：**这个[jsfiddle](http://jsfiddle.net/bYBPD/22/)删除了添加的最新行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T18:57:49.740

您的 jQuery 代码已经明确命名了这些字段。例如：

```
$("<input>").attr("name", "a").appendTo(newDiv); 
```

这将创建一个名为的输入`a`：

```
<input name="a" /> 
```

您的 jQuery 为每个动态创建的输入提供相同的名称。如果您提交以下具有 3 个具有相同名称的字段的表单，服务器将收到`a=value1&a=value2&a=value3`.

```
<form>
    <input name="a" value="value1" />
    <input name="a" value="value2" />
    <input name="a" value="value3" />
    <input type="submit" />
</form> 
```

这适用于大多数服务器技术，但不适用于 PHP。PHP 用最后一个值覆盖现有值。因此，如果您`a`在 PHP 中检查 的值，您只会看到`value3`. 但是，好消息是您可以稍微更改输入名称并让 PHP 识别所有值。在 PHP 中，当您将方括号附加到输入名称 ( `name="a"`become `name="a[]"`) 时，PHP 会将值解析为一个数组。所以对于以下稍微修改的形式：

```
<form>
    <input name="a[]" value="value1" />
    <input name="a[]" value="value2" />
    <input name="a[]" value="value3" />
    <input type="submit" />
</form> 
```

当您在 PHP 中查看 的值时，您将得到一个包含、和`a`的值数组。因此，只需将您的 jQuery 代码更改为在名称末尾使用方括号：`value1``value2``value3`

```
$("<input>").attr("name", "a[]").appendTo(newDiv); 
```

# perl - 如何扩展字符串中的哈希变量？

> ID：12751922
> 
> 赞同：1
> 
> 时间：2012-10-05T18:21:06.380
> 
> 标签：perl

如果字符串中的变量是简单的标量，例如使用正则表达式的“$foo = 5”，我已经找到了执行此操作的方法。但问题是，如果字符串中的变量是：$foo->{bar}，它等于 5。

所以示例字符串是：

“这是一个哈希值为 $foo->{bar} 的字符串”。

我怎样才能将其扩展为：

“这是一个哈希值为 5 的字符串”

谢谢。

编辑以获取更多解释：

我有一个字符串文字（我相信？我不是最擅长这个词汇的），它是我从某个文本源收到的“Lorem Ipsum $foo->{bar} Lorem Ipsum”。我想取那个字符串，用我的代码中变量的实际值替换所有变量名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T18:36:55.640

您在那里拥有的东西称为“模板”。因此，您正在寻找一个模板系统。

假设这些引号实际上不在字符串中，我所知道的唯一能够理解模板语言的模板系统是[String::Interpolate](http://search.cpan.org/perldoc?String%3a%3aInterpolate)。

```
$ perl -E'
   use String::Interpolate qw( interpolate );
   my $template = q!This is a string with hash value of $foo->{bar}!;
   local our $foo = { bar => 123 };
   say interpolate($template);
'
This is a string with hash value of 123 
```

如果引号是字符串的一部分，那么您所拥有的是 Perl 代码。因此，您可以通过执行字符串来获得所需的内容。这可以使用[`eval EXPR`](http://perldoc.perl.org/functions/eval.html).

```
$ perl -E'
   my $template = q!"This is a string with hash value of $foo->{bar}"!;
   my $foo = { bar => 123 };
   my $result = eval($template);
   die $@ if $@;
   say $result;
'
This is a string with hash value of 123 
```

我强烈建议不要这样做。我也不是特别发现 String::Interpolate 。[Template::Toolkit](http://search.cpan.org/perldoc?Template%3a%3aToolkit)可能是模板系统的流行选择。

```
$ perl -e'
   use Template qw( );
   my $template = q!This is a string with hash value of [% foo.bar %]!."\n";
   my %vars = ( foo => { bar => 123 } );
   Template->new()->process(\$template, \%vars);
'
This is a string with hash value of 123 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-05T18:27:27.640

这应该有效：

```
$foo->{"bar"} = 5;
printf "This is a string with hash value of $foo->{\"bar\"}]"; 
```

# python - 在 WSGIREF.simple_server 旁边运行的线程内部调用 POpen 会导致 os.fork 死锁

> ID：12751932
> 
> 赞同：1
> 
> 时间：2012-10-05T18:21:45.807
> 
> 标签：python, rest, fork, wsgi, popen

这个问题与[A Django Related Question 有关](https://stackoverflow.com/questions/12815133/django-web-server-hangs-after-it-started-a-daemon)

我正在使用 wsgiref.simple_server 运行一个 restlite WSGI 应用程序。我有这个设置，以便在 serve_forever() 方法被调用之前它初始化一些对象。最相关的是这些课程。

```
import Queue
import threading
import Deployer
import ParallelRunner
import sys
import subprocess

class DeployManager:
def __init__(self):
    self.inputQueue = Queue.Queue() 
    self.workerThread = DeployManagerWorkerThread(self.inputQueue)
    self.workerThread.start()   
def addDeployJob(self, appList):
    self.inputQueue.put(appList)  #make sure this handles the queue being full
def stopWorker(self):
    self.workerThread.running = False
def __del__(self):
    self.stopWorker()

class DeployManagerWorkerThread(threading.Thread):
def __init__(self, Queue):
    super(DeployManagerWorkerThread, self).__init__()
    self.queue = Queue
    self.running = True
    self.deployer = Deployer.Deployer()
    self.runner = ParallelRunner.ParallelRunner()

def run(self):
    while self.running:
        try:
            appList = self.queue.get(timeout = 10) #This blocks until something is in the queue
            sys.stdout.write('Got deployment job\n')
                            command = "ssh " + server.sshUsername + "@" + server.hostname + "" + " -i " + server.sshPrivateKeyPath + r" 'bash -s' < " + pathToScript 
                            self.process = subprocess.Popen(command,shell=True ,stdin=subprocess.PIPE, stdout=subprocess.PIPE)
            output = process.communicate()[0]
            sys.stdout.write(output + '\n')
        except Queue.Empty:
            pass
    sys.stdout.write('DeployManagerWorkerThread exiting\n') 
```

restlite请求是这样设置的

```
@restlite.resource
def deployAll():
def POST(request, entity):
    GlobalDeployManager.addDeployJob(GlobalAppList) #TODO should runners be configurable at start up
    #print output                                               #or on a run by run basis
    return 'Job added'
return locals() 
```

这会将一个条目放入队列中，然后 workerThread 将抓取并开始处理。然而，对 POpen 的调用总是挂起，我介入了它，它似乎挂在对 os.fork() 的调用中，这将“冻结”服务器。当线程到达 POpen 命令时，主线程位于它接受新请求的行。我相信服务器正在为此使用 epoll。如果队列中有多个作业，我可以在服务器正在运行的控制台上按 control-C，主线程将退出（不在等待请求的行），然后线程将能够运行按预期工作，然后关闭。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T19:04:02.180

我最终想通了……我需要在 run 方法中创建线程对象。我不小心忘记了**init**方法是从主线程调用的，然后新线程本身永远不会执行**init**。

# mysql - MySQL COUNT IF 在多个表之间

> ID：12751936
> 
> 赞同：0
> 
> 时间：2012-10-05T18:21:51.587
> 
> 标签：mysql, join

我正在尝试基于两个 MySQL 表运行一个相当简单的计数，但我无法获得正确的语法。

```
 Table_1                                Table_2
Actor | Behavior | Receiver |       | Behavior | Type_of_behavior |
 Eric        a        ann                a            Good
 Eric        b        ann                b            Bad 
 Bob         a        Susan              a            Good
 Bob         c        Bob                c            shy 
```

我想`COUNT Table 1.Behavior`通过`table_2.Type_of_behavior WHERE Table_1.Behavior = Table_2 Behavior`and `group by Table_1.Actor`。我尝试过的语法如下。
我意识到我可以加入表格，但出于其他原因，我需要将它们分开。

```
SELECT actor, JOIN Table_1, Table_2
COUNT(IF(Table_2.Type_of_behavior = "good", 1,0))
 AS 'good' FROM Table_1.Behavior GROUP BY actor; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:28:25.753

我不完全确定这是否是您想要的，但是您至少应该可以修改以下内容。

```
SELECT actor, COUNT(Type_of_behavior)
FROM table_1 JOIN table_2
ON table_1.behavior=table_2.behavior
WHERE Type_of_behavior = 'good'
GROUP BY actor 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T18:28:38.763

```
SELECT actor, 
       sum(t2.Type_of_behavior = 'good') AS good
from Table_1 t1
join Table_2 t2 on t1.behaviour = t2.behaviour
GROUP BY actor; 
```

# .net - 有更好的 Visual Studio QuickWatch 窗口的空间。有没有办法自己制作？

> ID：12751945
> 
> 赞同：3
> 
> 时间：2012-10-05T18:22:03.410
> 
> 标签：.net, visual-studio, envdte

我认为 QuickWatch 窗口还有改进的空间。可能有一种方法可以为某些类型实现特殊的查看器。例如：，

*   EntityFramework`ObjectQueries`可以显示生成的 SQL。
*   `IEnumerables`可以选择以可检查的方式显示元素列表。
*   `Bitmap`可以显示位图。
*   `GraphicsPath`可以画出路径。

是不是太难实现了？我搜索了`DTE`API，但没有找到访问运行/调试程序内存的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T05:44:46.180

Visual Studio 总是有添加的空间。作为一名开发人员，我总是喜欢“如果它不是一个特性，那就添加它”的理念。我从来没有做过，但看起来[这对你来说是一个很好的起点](https://stackoverflow.com/questions/718770/visual-studio-add-in-api-resources)：

# mysql - 无法通过 Rails 删除记录

> ID：12751954
> 
> 赞同：0
> 
> 时间：2012-10-05T18:22:50.543
> 
> 标签：mysql, activerecord, ruby-on-rails-3.1, destroy

我有一张桌子，说人，如果我这样做

```
person = Person.find(:first)
person.delete 
```

我明白了

```
NoMethodError: undefined method `to_sym' for nil:NilClass
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activesupport-3.1.1/lib/active_support/whiny_nil.rb:48:in `method_missing'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/base.rb:1403:in `block in expand_hash_conditions_for_aggregates'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/base.rb:1402:in `each'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/base.rb:1402:in `expand_hash_conditions_for_aggregates'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/relation/query_methods.rb:261:in `build_where'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/relation/query_methods.rb:124:in `where'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/relation.rb:380:in `delete'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/base.rb:442:in `delete'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/persistence.rb:72:in `delete'
        from (irb):60
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/railties-3.1.1/lib/rails/commands/console.rb:45:in `start'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/railties-3.1.1/lib/rails/commands/console.rb:8:in `start'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/railties-3.1.1/lib/rails/commands.rb:40:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

如果我做

```
person.destroy 
```

我明白了

```
 SQL (0.2ms)  BEGIN
Could not log "sql.active_record" event. NoMethodError: undefined method `name' for nil:NilClass
Mysql::Error: Unknown column 'persons.' in 'where clause': DELETE FROM `persons` WHERE `persons`.`` = ?
   (0.1ms)  ROLLBACK
ActiveRecord::StatementInvalid: Mysql::Error: Unknown column 'persons.' in 'where clause': DELETE FROM `persons` WHERE `persons`.`` = ?
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters/mysql_adapter.rb:883:in `prepare'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters/mysql_adapter.rb:883:in `exec_stmt'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters/mysql_adapter.rb:490:in `block in exec_delete'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters/abstract_adapter.rb:244:in `block in log'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activesupport-3.1.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters/abstract_adapter.rb:239:in `log'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters/mysql_adapter.rb:489:in `exec_delete'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters/abstract/database_statements.rb:101:in `delete'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters/abstract/query_cache.rb:14:in `delete'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/relation.rb:351:in `delete_all'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/persistence.rb:94:in `destroy'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/locking/optimistic.rb:119:in `destroy'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/callbacks.rb:254:in `block in destroy'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activesupport-3.1.1/lib/active_support/callbacks.rb:390:in `_run_destroy_callbacks'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activesupport-3.1.1/lib/active_support/callbacks.rb:81:in `run_callbacks'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/callbacks.rb:254:in `destroy'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/transactions.rb:236:in `block in destroy'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/transactions.rb:295:in `block in with_transaction_returning_status'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/transactions.rb:208:in `transaction'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/transactions.rb:293:in `with_transaction_returning_status'
        from .rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/transactions.rb:236:in `destroy'
        from (irb):61 
```

但是如果我写一个 SQL 删除语句，我可以通过 MySQL 控制台删除记录。知道会发生什么吗？

**其他信息：** Person 表有一个 id 列，但是数据库中的主键是使用 id 和其他一些列的复合键。person 模型是由其他人编写的，并且编写了许多方法，但没有一个名为 delete 或 destroy 的方法被显式编写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:29:26.173

```
@person = Person.first
@person.destroy 
```

如果您使用了非标准主键，则需要先设置它：

```
Person.primary_key = 'person_id'
@person = Person.first
@person.destroy 
```

如果一切都失败了......我觉得输入这个不好：

```
Person.connection.execute("delete from persons where id = 1 and state_id = 2 and project_id = 5") 
```

为了避免当前和未来的噩梦，您应该重构您的数据库以遵循 Rails 存储数据的标准方式。人员表应仅包含具有唯一 id 列的唯一人员，该列是主键。应该创建新的 project_assignments 表/模型来处理具有自己唯一 ID 以及 state_id、project_id 和 person_id 的分配。属于 Person 的数据应驻留在该表中，分配数据应移动到 project_assignments 等。

# postgresql - 为什么 Heroku 清楚地告诉我“您的应用程序没有数据库”？

> ID：12751958
> 
> 赞同：1
> 
> 时间：2012-10-05T18:23:38.490
> 
> 标签：postgresql, heroku, migration

我知道迁移 Heroku 数据库的主题有很多文档，但我还没有找到答案，而且似乎没有人提到我遇到的错误。

我使用 Heroku 的基本/免费版本开发了我的应用程序，在那里我得到了我的两个随机字典单词和一个数字。我在这个实例中运行了一个 Rails 应用程序，其中填充了数据。这是我用来演示给管理层的。

我的公司现在已经在 Heroku 上支付了空间，包括 Postgres。我已经将我的应用程序部署到了这个新空间，包括一个空的 Postgres 数据库（我已经运行了迁移），现在我想将我的数据从免费/共享空间移动到我的付费空间。

我相信这是我应该遵循的方向页面：

[https://devcenter.heroku.com/articles/migrating-from-shared-database-to-heroku-postgres](https://devcenter.heroku.com/articles/migrating-from-shared-database-to-heroku-postgres)

但是当我到达这一步时：

```
heroku pgbackups:capture --expire -a [my_app] 
```

我的问题中出现错误，“您的应用没有数据库。” 我已经完成了必要的步骤，添加了 pgbackups 插件等等。如果我对我新创建的付费应用程序（使用空数据库）执行此命令，它可以正常工作。但是为我的旧/免费/共享数据库版本运行它会出错。

我知道它没有付费数据库，没有。如果我去[http://postgres.heroku.com](http://postgres.heroku.com)它甚至不会出现。但是我有数据存在于 Heroku 世界的某个数据库中，我想了解它。文档确实让我相信这些是离开 5mb 共享空间的说明，这就是我正在做的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T22:36:54.473

在为客户编写的更新中，我没有考虑到一些极端情况。我想你已经知道了，后来的版本修复了它。对不起。

# android - 单选按钮警报框

> ID：12751961
> 
> 赞同：0
> 
> 时间：2012-10-05T18:23:55.297
> 
> 标签：单选按钮, 警报框, android-google-maps, android

```
public void mapDisplay() {
    final String[] selectedItem= getResources().getStringArray(R.array.map_display_choices);
    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    // Set the dialog title
    builder.setTitle(R.string.mapDisplay)
           .setSingleChoiceItems(R.array.map_display_choices, mapDisplayOpt,
                      new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int which) {
                if(selectedItem[which].equals(Satellite)){
                    mapDisplayOpt = 1;
                    mapView.setSatellite(true);
                    dialog.dismiss();
                }else if(selectedItem[which].equals[Traffic]){
                    mapDisplayOpt = 2;
                    mapView.setTraffic(true);
                    dialog.dismiss();
                }else {
                    mapDisplayOpt = 0;
                    mapView.setStreetView(true);
                    dialog.dismiss();
                }
            }
           });             
    AlertDialog alert = builder.create();
    alert.show();      
} 
```

我想问你很多事情，所以如果你们中的任何一个可以回答其中任何一个，请回答。
1）如何在出现警报框时选择正确的[单选按钮](/questions/tagged/radio-button "显示标记为“单选按钮”的问题")。我正在使用 mapDisplayOpt 为单选按钮输入正确的数字，但我不确定单选按钮是否具有 1,2 的序列， 3 还是随机数？
2）当我选择 o 按钮时，[警报框](/questions/tagged/alert-box "显示标记为“警报框”的问题")立即消失，我看不到所选选项。我怎样才能解决这个问题？
3）在[android-google-maps](/questions/tagged/android-google-maps "显示标记为“android-google-maps”的问题")中，我将 mapView 从默认更改为卫星或交通之一。我怎样才能返回到默认的地图视图？我使用的街景已被弃用。
谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:24:46.923

用于`.equals()`比较 java(Android) 中的字符串。

`==`比较字符串（对象）引用（内存位置）

`.equals()`比较字符串（对象）值...

```
 if(selectedItem[which].equals("Satellite")){

} 
```

# android - 在 UI 线程之外模拟 Webview？

> ID：12751964
> 
> 赞同：1
> 
> 时间：2012-10-05T18:24:09.937
> 
> 标签：android, android-webview

我有一个客户要求我让 webview 访问一个 url（这是 Android 顺便说一句），它将运行一些 javascript 并进行重定向，他们希望它不会中断 UI 线程。我需要能够读取它被重定向到的 url，并读取页面源。

我知道如何用 webview 做这些事情，但我担心它最终会崩溃，因为目前它会抛出一个警告，说将来可能不支持在 UI 线程之外运行 webview。

在这种情况下，我们不使用 webview 来渲染任何东西。我们只使用它以便运行 javascript 并进行重定向。

我不太了解 web 的工作原理，有没有办法让这些事情发生在我可以在 UI 线程之外运行的东西上？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:43:51.623

好吧，我真的不需要我想要的东西，我可以在 UI 线程上添加一个 webview，但不将它分配给一个视图，如果我尝试加载一个 URL 等等，它仍然可以工作。

所以，这不完全是我的问题的答案，但问题本身有点愚蠢，因为 webview 无论如何都不会阻塞 UI 线程。我真正需要的是知道 webview 是否可以工作，而不必在应用程序中实际显示它，答案是肯定的。

# javascript - SharePoint 2010 Motools JavaScript 不兼容

> ID：12751969
> 
> 赞同：0
> 
> 时间：2012-10-05T18:24:38.657
> 
> 标签：javascript, sharepoint, mootools, slideshow

我使用 Mootools在[Slideshow2](https://code.google.com/p/slideshow/)的基础上创建了一个 JavaScript 幻灯片。它可以独立运行。我决定将它合并到我的 SharePoint 2010 母版页中，乍一看它运行良好，但由于某些奇怪的原因，页面上的其他本机 SharePoint javascript 代码停止工作。一些 JavaScript 代码，例如“查看所有站点内容”中的“创建”按钮什么都不做，全局导航菜单中的一些下拉菜单。当我尝试批准保存的 master.page 时，我首先注意到当我单击 Approve 时没有任何反应。

我开始删除我所有的 JavaScript 代码，并从消除过程中注意到，只要离开这行：`<script type="text/javascript" src="/_catalogs/javascript/mootools-1.3.2-core.js"></script>`就会导致错误。其他每一行似乎都不会影响其他 JavaScript 代码。我什至将其替换为最新版本并得到了相同的结果：`<script type="text/javascript" src="/_catalogs/javascript/mootools-core-1.4.5-full-compat.js"></script>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T22:23:33.267

MooTools 和 SharePoint 脚本库可能正在争夺“$”别名。根据 MooTools 的说法，较新的版本将尝试检测正在使用的美元别名，而不是窃取它。这取决于在其他脚本之后加载的 Mootools 库。有关更多信息，请参阅[“美元安全模式”](http://mootools.net/blog/2009/06/22/the-dollar-safe-mode/)。

我建议将 MooTools 移动到母版页的底部（就在结束`body`标记之前），看看是否有帮助。我没有使用过 MooTools，但我假设有一些类似于 jQuery 的[`$(document).ready()`](http://docs.jquery.com/Tutorials%3aIntroducing_%24%28document%29.ready%28%29)方法允许您仅在加载核心库后调用您的 MooTools 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-07T07:21:59.720

尝试将此代码插入到母版页以包含 MooTools 库：<SharePoint:ScriptLink ID="MooToolsJS" runat="server" Name="/_catalogs/javascript/mootools-core-1.4.5-full-compat.js "LoadAfterUI="true" OnDemand="false" />

# html - 如何更好地将表单中的多个选项值存储在数据库中？

> ID：12751979
> 
> 赞同：-1
> 
> 时间：2012-10-05T18:25:38.270
> 
> 标签：html, database, forms

我必须开发一个网络系统。作为每个网络系统，它都有表单，用户必须从多个选项中选择一个，或者完全选择多个选项。它们还将具有描述性文本，并且该数据将用于系统内的其他部分。因此，将数据存储在信息系统的数据库中。但是，我不知道关于多个选项的最佳做法是什么。

让我给你举个例子。假设我有以下内容：

```
<select>
    <option value="1">My first option</option>
    <option value="2">My second option</option>
    <option value="3">My third option</option>
</select> 
```

该数据与一个人有关。我如何在我的数据库中表示它？我应该使用一个单独的表，其中值 id 作为 PK 和一个带有描述的字符串吗？我应该只存储值，只存储字符串吗？我在这里有点迷路了。

事先谢谢你。

编辑：我主要担心的是创建一个额外的表会很麻烦。我必须创建一个相关对象及其对应的 DAO，只有一个类将使用该对象。然而，使用其他方法似乎不会很好地升级，并且会造成整体混乱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:15:57.363

没关系，我得到了答案。

我能做的不是一切，而且因为我在 Java 中工作，所以使用 an`enum`来代替。从长远来看，数据不太可能发生变化，所以这是我最安全的选择。

# oracle - 名为 COUNT 问题的列

> ID：12751980
> 
> 赞同：0
> 
> 时间：2012-10-05T18:25:38.907
> 
> 标签：oracle

我有一个名为 COUNT 的列的表。

如果我执行以下查询： Select count From mytable

从 SQL Developer 它工作正常。从 JDBC 连接它不起作用。

我无法修改表结构...

你知道我该如何解决这个问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:29:56.380

这将有助于：

```
Select a.count from mytable a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T18:29:42.353

`COUNT`是一个[保留字](http://docs.oracle.com/cd/B19306_01/em.102/b40103/app_oracle_reserved_words.htm)，所以你需要转义它：

```
select "COUNT" 
from yourtable 
```

# iphone - 为 youtube 旋转 ipad/iphone webview 时大小不匹配

> ID：12751982
> 
> 赞同：4
> 
> 时间：2012-10-05T18:25:53.413
> 
> 标签：iphone, ios, ipad, uiwebview

我正在开发 YouTube 视频播放应用程序，`UIWebView`当我将设备从纵向模式旋转到横向模式时，我需要通过其正常工作来播放视频。但是当我单击缩放选项（缩放选项意味着通过`UIWebView`）并尝试从纵向旋转屏幕时到横向模式，它在右下角显示白色空白屏幕。如果在底部从横向到纵向，它显示白色空白屏幕。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T10:31:16.960

我想这与您的 webviews 背景颜色有关。无论如何，您可以提供一些屏幕截图以使其更清晰。

# android - Android系列动画多个子视图

> ID：12751983
> 
> 赞同：1
> 
> 时间：2012-10-05T18:25:54.007
> 
> 标签：android, animation, android-view

尝试向我们的应用程序添加帮助覆盖。此叠加层是一个具有半透明背景的 RelativeLayout，它包含一些 TextView 和一些 ImageView 子元素。现在，我希望每个 TextView / ImageView 一个接一个地淡入。

我正在使用淡入动画集（在 XML 中定义）并在 AnimationListener 的方法中调用`.startAnimation()`每个视图。`OnAnimationEnd`所以，当第一个视图完成淡入时，我调用`startAnimation`下一个视图上的方法来淡入。我使用相同的动画对象 (animationFadeIn) 作为所有视图的 startAnimation 的参数。像这样：

```
...
Animation animationFadeIn = AnimationUtils.loadAnimation(this.context, R.anim.fadein);
...
AnimationListener animationInListener = new AnimationListener(){
    @Override
    public void onAnimationEnd(Animation animation) {
      animation_activity++;
      switch(animation_activity) {
        case SHOW_TEXT_DROP:
            txtDrop.startAnimation(animationFadeIn);
            break;
        case SHOW_TEXT_SEND:
            txtSend.startAnimation(animationFadeIn);
            break;
        case SHOW_IMAGE_TOUCH:
            imgTouch.startAnimation(animationFadeIn);
            break;
        case SHOW_TEXT_DISABLE:
            txtDisable.startAnimation(animationFadeIn);
            break;
      }
    }
}; 
```

对于淡入动画，我参考[了这个教程](http://android-er.blogspot.in/2011/09/handle-animation-event.html)

现在，问题来了：

*   第一个视图淡入
*   第二个视图淡入，但第一个视图也随之淡入
*   继续进行，直到所有视图都完成淡入

另外，如何在下一个视图淡入之前添加一些延迟`setStartOffset`？

**更新**

我注意到如果我创建第二个动画对象

```
animationFadeIn2 = AnimationUtils.loadAnimation(this.context, R.anim.fadein); 
```

然后将其用于其他元素的 startAnimation ，则不会产生此问题。所以，我相信，必须在 Animation 对象上设置一些属性以避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T20:14:49.000

我终于继续为每个元素创建了多个动画对象。这解决了暂时的问题。这可能不是正确/最好的方法。

# javascript - 来自字符串属性和值的 Javascript 对象

> ID：12751988
> 
> 赞同：0
> 
> 时间：2012-10-05T18:26:07.667
> 
> 标签：javascript

是否可以基于字符串值创建属性。

我有一个 Json 对象，用于填充 UI（选择框）。

```
"Conf" :{
    "Color":[
        {
            "Value":"BLUE"
        },
        {
            "Value":"GOLD"
        }   
    ],
    "Size":[
        {
            "Value":"12"
        },
        {
            "Value":"11"
        }
    ],
} 
```

根据选择，我需要将其添加到对象（`Item.Conf`如下）。 `addSel`提供选择类型（`Color, Size`等）和值（`BLUE, 11`等）。如何添加选择，如下所示。所以如果选择是`Color : BLUE`，我需要添加它 `Item.Conf[0].Color.Value = "BLUE"` 是否可能？

```
Item = {
    Conf: [],
    addSel: function(type, val){ //for example type="Size", val = "11"

        //.... need to selection to Conf 
        // add a member "Size" from type string
        //set its value as val
        console.log(Conf[0].Size.Value) //=> 11
    }
} 
```

本质上是有可能使一个对象像

```
"Size":{
    "Value": 11
} 
```

从字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:49:36.283

您的问题并不完全清楚您到底要做什么，但也许您只需要了解使用`[variable]`语法来使用字符串来寻址属性名称。

例子：

```
var x = {};
var propName = "Value";
x[propName] = 11; 
```

这相当于：

```
var x = {};
x.Value = 11; 
```

但是，第一种形式允许属性名称是在您编写代码时未知的变量中的字符串，而第二种形式只能在提前知道属性名称时使用。

# c# - 维护 html 元素的视图状态？

> ID：12751991
> 
> 赞同：3
> 
> 时间：2012-10-05T18:26:18.607
> 
> 标签：c#, asp.net, .net-4.0

我有一个通用的“表单页面”用户控件，我们使用它允许编辑者在其中插入他们想要的任何类型的 html 表单，并处理所有表单帖子。

我的问题是，有没有办法将普通的非 asp 表单条目存储在视图状态中，或者以其他方式将条目保存在表单帖子中，以防某些服务器端验证失败，因此可以在页面刷新时恢复它们?

我们目前已经进行了捕获大部分输入错误的前期 javascript 验证。在进行进一步处理之前，我们将所有表单发布数据存储在数据库中，并且某些条目包含垃圾邮件（我们希望忽略的垃圾邮件）或仅部分信息（我假设这些是用户没有 javascript 的情况启用）。我试图抓住这些最后的边缘案例，所以我们不处理它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:35:25.247

如果您不提前知道表单字段是什么，那么我建议您查看部分回发。

或者通过ajax发布表格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:56:53.747

如果我理解正确，1>用户填写表单 2>点击提交 3>在服务器端检测到错误 4>回发的 Html 应该包含我已经在顶部填写错误消息的表单。

您是否考虑过使用 JQuery Ajax？

jquery ajax 将发布到 web 方法。Web 方法返回 JSON 响应。如果响应成功，则将用户重定向到下一页，否则在页面顶部显示错误。

这样您就不需要维护用户输入的状态（因为它永远不会丢失）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T18:49:11.050

您可以将文本 HTML 存储在

```
 <asp:HiddenField ID="hid1" runat="server" /> 
```

这将在视图状态中传递

# c++ - Arduino 还是树莓派？

> ID：12751995
> 
> 赞同：0
> 
> 时间：2012-10-05T18:26:29.970
> 
> 标签：c++, arduino, raspberry-pi

基本上我已经用 C++ 开发了一个应用程序并且有四个类。代码的功能与只输出结果的“主”界面配合得很好。

我构建的应用程序是[语音识别](http://en.wikipedia.org/wiki/Speech_recognition)，我需要使用 Arduino 或 Raspberry Pi 来演示它，并将包括三个 LED，它们将根据结果打开。这是问题/问题...

*   我不想更改课程以适应不同的平台。它工作得很好，我只是想以此作为代码/功能如何工作的演示。使用 Arduino / Raspberry Pi 可以做到这一点吗？

*   我不希望 Arduino / Raspberry Pi 物理处理（[WAV](http://en.wikipedia.org/wiki/WAV)）文件，因为我需要更改条件。相反，我只想将（WAV）文件发送到设备，然后使用我已经构建的处理 WAV 文件的代码。这可能吗？Arduino 或 Raspberry Pi 会是更好的选择吗？

我希望我已经足够详细地解释了这一点。

PS 我已经包含了 C++ 标签，因为它确实与 C++ 相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T18:33:50.110

如果您的应用程序已经用 C++ 编写，我会推荐 Raspberry Pi，因为它比 Arduino 具有更多功能，而且我不确定 C++ 代码是否与 Arduino 兼容（我拥有的那些支持 ATMEL 程序集、netduino 上的 C# 和一些 C/Java 混合，所以我不确定）。如果您想在 Pi 上运行，您只需要为 LED 照明编写一些代码，网上已经有示例，并且 Pi 可以运行整个 Linux 操作系统来帮助您调试您可能遇到的任何问题（在玩起来很有趣）。

此外，对于处理 .wav 文件传输，Pi 会更好地处理它，因为您选择处理文件的方式有更多种类（将其放在 SD 卡、网络等...）。