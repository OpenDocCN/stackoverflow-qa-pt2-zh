# StackOverflow 问答 14517000-14517999

# c - 在 fscanf 中格式化字符串

> ID：14517000
> 
> 赞同：-1
> 
> 时间：2013-01-25T07:06:06.960
> 
> 标签：c, string, format, scanf

我想使用 fscanf 从一个数字列表的文件中读取（长度是任意的）

```
42
20
8
5
0 
```

但是，我不确定如何构造一个读取任意数量的值的格式字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T07:14:56.817

尝试这个

```
while(fscanf(fp,"%d",&number) == 1)  
{  
       printf("%d",number);  
} 
```

`fscanf`返回读取的项目数并在文件末尾返回 EOF

# jquery - 以椭圆形 highcharts 重绘饼图

> ID：14517005
> 
> 赞同：2
> 
> 时间：2013-01-25T07:06:46.063
> 
> 标签：jquery, highcharts

是否可以将饼图（highcharts.com）重新绘制为椭圆形，如图所示![在此处输入图像描述](../Images/5bb0f5a16bb60057fc9406b07b6238f2.png)

还有右边的阴影之类的东西。

我试过这段代码

```
// Radialize the colors
            Highcharts.getOptions().colors = Highcharts.map(Highcharts.getOptions().colors, function(color) {
                return {
                    radialGradient: { cx: 0.5, cy: 0.3, r: 0.7 },
                    stops: [
                        [0, color],
                        [1, Highcharts.Color(color).brighten(-0.3).get('rgb')] // darken
                    ]
                };
            }); 
```

但显示的变化不大，这里是 jsfiddle [http://jsfiddle.net/jhAD8/](http://jsfiddle.net/jhAD8/)

请看一看，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:17:43.260

不支持 3D 图表，包括您在上面发布的更改视角。但你可以投票给它[http://highcharts.uservoice.com](http://highcharts.uservoice.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-16T15:06:29.447

Update: 3D charts are supported. To get the chart you are looking for you could set a beta angle rotation in a 3D pie chart. Demo: [http://jsfiddle.net/41004emr/](http://jsfiddle.net/41004emr/)

```
$(function () {
    $('#container').highcharts({
        chart: {
            type: 'pie',
            options3d: {
                enabled: true,
                alpha: 0,
                beta: 45
            }
        },
        title: {
            text: 'Browser market shares at a specific website, 2014'
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                depth: 35,
                dataLabels: {
                    enabled: true,
                    format: '{point.name}'
                }
            }
        },
        series: [{
            type: 'pie',
            name: 'Browser share',
            data: [
                ['Firefox', 45.0],
                ['IE', 26.8],
                ['Chrome',12.8],
                ['Safari', 8.5],
                ['Opera', 6.2],
                ['Others', 0.7]
            ]
        }]
    });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/highcharts-3d.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

<div id="container" style="height: 400px"></div>
```

# javascript - 将值从javascript传递到servlet在chrome中不起作用

> ID：14517011
> 
> 赞同：2
> 
> 时间：2013-01-25T07:07:02.600
> 
> 标签：javascript, ajax, servlets

我试图从 javascript 将参数传递给 servlet：

```
function selectHandler() {
  var selection = table.getChart().getSelection()[0];
  var topping = data.getValue(selection.row, 0);
  var answer=confirm("Delete "+topping+"?");
  if(answer){
    document.location.href="/item?_method=delete&id="+topping;
    alert(topping+" has been deleted");
    location.reload();
  }
  else return false;
} 
```

这些值正在传递给 servlet，并且当我使用**firefox**时工作正常，因为我将 url 获取为：`http://XXXXXXX/item?_method=delete&id=xxxx` 但是当我使用**chrome**时，发送的 URL 是`http://XXXXXXX/item`. 因为价值观没有通过！！我也试过`window.location.href`没有改变。可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T07:33:50.270

您需要的是 ajax 调用或说 XMLHttpRequest 如下：

```
<script type="text/javascript">
    function doAjax () {
        var request,
            selection = table.getChart().getSelection()[0],
            topping = data.getValue(selection.row, 0),
            answer=confirm("Delete "+topping+"?");

        if (answer && (request = getXmlHttpRequest())) {
            // post request, add getTime to prevent cache
            request.open('POST', "item?_method=delete&id="+topping+'&time='+new Date().getTime());
            request.send(null);
            request.onreadystatechange = function() {
                if(request.readyState === 4) {
                    // success
                    if(request.status === 200) {
                        // do what you want with the content responded by servlet
                        var content = request.responseText;
                    } else if(request.status === 400 || request.status === 500) {
                        // error handling as needed
                        document.location.href = 'index.jsp';
                    }
                }
            };
        }
    }
    // get XMLHttpRequest object
    function getXmlHttpRequest () {
        if (window.XMLHttpRequest
            && (window.location.protocol !== 'file:' 
            || !window.ActiveXObject))
            return new XMLHttpRequest();
        try {
            return new ActiveXObject('Microsoft.XMLHTTP');
        } catch(e) {
            throw new Error('XMLHttpRequest not supported');
        }
    }
</script> 
```

您也可以通过 jquery 轻松完成，

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" />
<script type="text/javascript">
    function doAjax () {
        ...
        $.ajax({
            url: "item?_method=delete&id="+topping+'&time='+new Date().getTime()),
            type: "post",
            // callback handler that will be called on success
            success: function(response, textStatus, jqXHR){
                // log a message to the console
                console.log("It worked!");
                // do what you want with the content responded by servlet
            }
        });
    }
</script> 
```

参考：[jQuery.ajax()](http://api.jquery.com/jQuery.ajax/)

# asp.net - 动态显示面包屑

> ID：14517014
> 
> 赞同：0
> 
> 时间：2013-01-25T07:07:10.853
> 
> 标签：asp.net, .net, asp.net-mvc-3, breadcrumbs, mvcsitemapprovider

我需要动态区分父级的相同控制器和操作。我有一个名为“Note”的动作和一个名为“Note”的控制器。

现在我的要求是：首页>注意

主页>索引>来自两个不同屏幕的笔记。

在我的“注释”视图中，我使用的是 @Html.MvcSiteMap().SiteMapPath()

显示面包屑。

在 xml 文件中，在 Index 节点下，

如何动态显示面包屑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T00:49:35.683

您需要在 XML 中配置每个节点，然后 SiteMapPath HTML 帮助器将显示记住用户所在的位置。

```
<mvcSiteMapNode title="Home" controller="Home" action="Index">
    <mvcSiteMapNode title="Note" controller="Home" action="Note"/>
</mvcSiteMapNode> 
```

请注意，您提供的示例无法执行，因为`/`和`/Index`映射到相同的控制器操作。整个原理基于将当前请求映射到唯一的站点地图节点。

站点地图是静态的，并放置在站点的所有用户之间共享的缓存中。如果您需要基于数据库中的动态数据，您可以使用[DynamicNodeProvider](http://github.com/maartenba/MvcSiteMapProvider/wiki/Defining-sitemap-nodes-using-IDynamicNodeProvider)的一个或多个自定义实现将数据加载到站点地图中，而不是基于 XML 的节点。

# css - 更改打开网站的字体系列

> ID：14517020
> 
> 赞同：-1
> 
> 时间：2013-01-25T07:08:00.060
> 
> 标签：css, internet-explorer

是否可以通过编程将网站的当前字体系列更改为不同的字体系列？例如，Google 的搜索框（您在其中键入搜索查询的 HTML 输入元素）。我想将它的默认字体系列（我认为是 Arial 或 Sans Serif）更改为 Windings。（或任何人眼无法阅读的字体）伙计们，这里有什么想法吗？顺便说一句，首选浏览器是 Internet Explorer。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:12:47.830

我相信你想在自己的网站上做，而不是在别人的网站上（比如谷歌）。在你的 CSS 中你可以这样做

```
*{
font-family: Calibri;
} 
```

* 将为您的所有网站设置字体。如果你想在别人的网站上做，我认为这是不可能的。

# php - 如何制作具有上一页和下一页功能的博客类型页面？

> ID：14517024
> 
> 赞同：0
> 
> 时间：2013-01-25T07:08:23.910
> 
> 标签：php, javascript, wordpress, navigation, blogs

我想知道我是否需要学习 javascript 和/或 php 来制作一个可以在添加新内容时将内容从一个页面移动到另一个页面的网站（如博客）。我正在考虑使用 wordpress 并擦除设计并编写自己的 css，但似乎您需要进行 30 美元的更新才能访问 css。

是否有一个免费网站（如 wordpress）可以帮助我处理 php 部分或任何需要具备这种功能的东西？如果我现在只知道 html/css，使用一点 javascript 并且可以管理 jquery 插件，那么学习 php 以使“博客”正常运行需要多少小时。

非常感谢任何答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:15:37.957

如果我没记错的话，WordPress 是完全免费的，并且可以根据您的喜好进行完全定制——不收费。

PHP 将是您执行此操作的答案，而 Javascript 只会帮助补充过渡。如果您从未修改过 PHP 或任何其他软件编程语言，那么您将花费数月时间来完善它。这是一个完全不同的球类游戏。

但就像我说的，WordPress 是完全免费的，而且修改 CSS 也是如此。我从未听说过更改 WordPress CSS 文件需要 30 美元的费用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:28:11.547

您正在谈论升级[WordPress.com](http://wordpress.com/)网站，他们为您托管并严格控制您可以执行的操作。

您想访问[WordPress.org](http://wordpress.org/) - 它是免费的，您可以做任何您喜欢的事情 - 但您确实需要整理好自己的主机。

# java - 如何在向下滚动事件时动态加载新数据并将其附加到相同的扩展可折叠 div 部分

> ID：14517026
> 
> 赞同：0
> 
> 时间：2013-01-25T07:08:29.807
> 
> 标签：java, jquery, jquery-mobile

使用 jquery 移动可折叠集（手风琴）div，我已经加载了多个带有数据的部分。在展开可折叠部分 div 时，我只需要显示来自服务器端的前 20 个数据。在向下滚动并到达展开的可折叠 div 部分的第 20 个数据的末尾时，我需要从服务器端加载到下一个 20 个数据并将其附加到同一展开的可折叠部分的末尾。

用于检测光标向下滚动事件的事件或侦听器已到达展开的可折叠 div 部分的末尾？以及如何在向下滚动事件时动态加载和附加新数据到同一个扩展的可折叠 div 部分（如 facebook 加载数据？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:27:03.700

$().scroll(function...) 是您的解决方案。每次用户滚动时都会调用您的函数。

# android - 检测 Android Cordova webview 何时完成加载

> ID：14517028
> 
> 赞同：3
> 
> 时间：2013-01-25T07:08:32.467
> 
> 标签：android, cordova, webviewclient

很难找到对此的深入了解，但我需要检测 Cordova webview 何时完成加载，以便我可以在本机端运行一些初始化代码。此代码对 webview 的 javascript 进行回调，因此 javascript 必须就位并加载（因此需要在 webview 完成加载时通知。

我发现的唯一示例是用于检测 a 何时`WebViewClient`完成加载，但我需要知道初始 phonegap webview 何时完成加载。

我是 Android 的新手，来自 iOS 世界，并且习惯于有一种`webviewDidFinishLoading`方法可供我使用。希望在 Android 的 java 中有类似的方法来处理这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T06:13:11.097

您可以探索以下可能的解决方法：

[为 Android](http://docs.phonegap.com/en/2.3.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android)创建一个Apache Cordova 插件，并在 JavaScript 代码中像这样调用：

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
   if (isAndroid) {
       cordova.exec(function(winParam) {}, function(error) {}, "service", "webviewDidFinishLoading", []);
   }
} 
```

cordova.exec 详细信息[在这里](http://docs.phonegap.com/en/2.3.0/guide_plugin-development_index.md.html#Plugin%20Development%20Guide)。isAndroid 详细信息[在这里](https://stackoverflow.com/a/9942656/186909)。

`webviewDidFinishLoading`您将在插件的方法内添加 WebView 启动后需要执行的本机代码`service`。

# java - 在java中将值插入表中

> ID：14517030
> 
> 赞同：-3
> 
> 时间：2013-01-25T07:08:41.617
> 
> 标签：java, jdbc

我是 java 新手，正在尝试学习将用户名和密码以及个人资料图像路径插入 Mysql 数据库。当我运行以下代码时，它将插入到表中，但表“table_profile”第三列的路径字段如下所示

如果路径等于`"C:/Users/Manohar/Documents/FileUplaodDemo/build/web/uploads/x.jpg"`

然后它被插入为路径等于`"C:UsersManoharDocumentsFileUplaodDemo uildwebuploads`

```
stmt = connection.prepareStatement(
    "insert into table_profile values('"+userId+"','"+userName+"','"+path+"')"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T07:31:59.193

用户参数绑定如下：

```
stmt = connection.prepareStatement("insert into table_profile values(?, ?, ?)");
stmt.setInt(1, userId);
stmt.setString(2, userName);
stmt.setString(3, path); 
```

让 Java 为您完成所有艰苦的工作 :)

# android - 如何在我的列表视图中获取 sqlite 计数？

> ID：14517032
> 
> 赞同：0
> 
> 时间：2013-01-25T07:08:57.297
> 
> 标签：android, sqlite, android-listview, count

这是计算任务的正确代码吗？如何在我的列表视图中获取这些计数？//获取联系人计数

```
public int getTaskCount() {
     String countQuery = "SELECT Count(KEY_ROWID_REL) FROM  " + DATABASE_TABLE_REL;
     SQLiteDatabase db = this.getReadableDatabase();
     Cursor mcursor = db.rawQuery(countQuery, null);
     mcursor.moveToFirst();

     // return count
     return mcursor.getCount();
 }    

 private SQLiteDatabase getReadableDatabase() {
 // TODO Auto-generated method stub
 return null;
}

public long fetchAllProjectscount(int rowId) {
   String countQuery = "SELECT Count KEY_ROWID_REL FROM  " + DATABASE_TABLE_REL;
   SQLiteStatement statement =mDb.compileStatement(countQuery);
   return (int) statement.simpleQueryForLong();     
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:13:30.577

您的查询是错误的，这是正确的：

```
SELECT Count(KEY_ROWID_REL) FROM DATABASE_TABLE_REL; 
```

# facebook - 发生了一个错误。请稍后重试

> ID：14517042
> 
> 赞同：-5
> 
> 时间：2013-01-25T07:09:38.690
> 
> 标签：facebook, facebook-graph-api, authentication, titanium, app-id

我有我的 facebook 应用程序 ID，但它似乎已损坏。我丢失了我从中创建此 Facebook 应用程序 ID 的 fb 帐户。现在，当我尝试通过 fb 按钮登录时，响应为 `An error occurred, please try again later". when i do https://graph.facebook.com/XXXXXXXX`，其中 XXXXXXX 是我的 fb 应用程序 ID。它给了我

```
{
"error": { "message": "Unsupported get request.", "type": "GraphMethodException", "code": 100 }
} 
```

有什么建议吗？这是facebook错误还是我犯了一些错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:32:41.657

Facebook 应用程序将始终链接到创建它的 Facebook 帐户（开发者的）。这就是您获得 的`GraphMethodException`原因，因为您只有在使用所述帐户请求时才能访问该数据。所以不幸的是，您将不得不使用新的 Facebook 帐户重新创建应用程序并更新您的代码以反映新的 AppId 和 AppSecret。

# python - 即使存在 __init__.py，python 导入也会失败

> ID：14517044
> 
> 赞同：1
> 
> 时间：2013-01-25T07:09:52.143
> 
> 标签：python

假设我有这个目录结构

```
package /
         __init__.py
         cpackage.py

        subpackage1/
                    __init__.py
                    subpack1_call.py

                    /lib
                        __init__.py
                        sub_lib.py
        subpackage2/
                    __init__.py
                    subpack2_call.py 
```

我想在 subpackage1 和 subpackage2 中导入 cpackage 我无法导入我得到 valuename 错误和 module not found 错误

我可以在 subpackage1 中轻松做到这一点

```
from lib.sub_lib import hello_pr

hello_pr() 
```

这里没有错误，hello_pr 打印出我在 sub_lib 中定义的内容，但我无法向上移动目录，在上述情况下，我可以轻松地向下移动目录结构

我错过了什么。我在这个站点和 pydoc 中查看了这么多解决方案，也许我遗漏了一些东西，因为似乎没有任何效果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:17:03.847

在多次解析和重新解析您的问题后，我决定您要查找的是[**相对导入**](http://www.python.org/dev/peps/pep-0328/)。

```
from ..cpackage import somename 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T07:18:18.587

如果您可以导入 lib.sub_lib，则意味着您的 PYTHONPATH 指向 subpackage1。它应该指向包含包的目录，然后你就可以导入 package.cpackage、package.subpackage1.lib.sub_lib 等。

你也可以把你的PYTHONPATH指向cpackage，然后把这个目录下的**init** .py去掉，因为它没用，你可以导入cpackage、subpackage1.lib.sub_lib等。

基本规则是：如果 PYTHONPATH=dir，则

```
dir\
  bob.py
  sub\
    __init__.py
    bib.py
    inner\
      __init__.py
      bub.py

import bob
import sub       (will import sub\__init__.py)
import sub.bib   (will import sub\__init__.py then bib.py)
import sub.inner (will import sub\__init__.py then sub\inner\__init__.py)
import sub.inner.bub (will import sub\__init__.py then sub\inner\__init__.py
                      and finally bub.py) 
```

# ruby - 这里的方括号是什么意思？

> ID：14517046
> 
> 赞同：1
> 
> 时间：2013-01-25T07:10:02.467
> 
> 标签：ruby

我在 Rails 应用程序中看到这样一行：

```
Order::PAYMENT_TYPES.map {|p| [t('.payment_type.'+p), p]} 
```

`PAYMENT_TYPE`是一个字符串数组，字母`t`在 Rails 中用于 i18n。

我不确定这里如何使用方括号。显然它们不适用于数组或方法。我会将其重写为`{|p| t('.payment_type.'+p) }`.

那么这个例子中的 Ruby 语法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:11:37.173

> 显然它们不适用于数组或方法

嗯，它**是**一个数组字面量

```
[t('.payment_type.'+p), p]
# ^ first element       ^ second 
```

> 我会将其重写为...

如果这对您有用，请继续。我们不知道您的应用程序的细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T07:12:51.390

Ruby 从方法或块返回最后一条语句。在这种情况下，使用方括号，该块返回一个包含两个项目的数组，因此在 中调用该块`map`，如果`PAYMENT_TYPES`有三个项目，将导致类似`[ [a1, b1], [a2, b2], [a3, b3] ]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T07:23:09.370

您是正确的，方括号不仅用于数组，还可以调用 Procs。

```
proc = lambda { |name| "Hello, #{name}" }
proc.call('Bob')
=> "Hello, Bob"

proc = lambda { |name| "Hello, #{name}" }
proc['Bob']
=> "Hello, Bob" 
```

但是在这种情况下，正如其他人所指出的那样，正在返回一个新数组，从而导致嵌套的数组数组。

# javascript - 将两个数组组合成选项数组

> ID：14517047
> 
> 赞同：0
> 
> 时间：2013-01-25T07:10:06.113
> 
> 标签：javascript, jquery

我有两个字符串数组：`hrefs`, `thumbs`. 需要将此数组组合成另一个具有如下结构的数组。怎么做 ？为清楚起见 - 我需要使用[Lightview API](http://projects.nickstakenburg.com/lightview/documentation/api)来调用函数`Lightview.show(elements)`，其中元素是我需要构建的结果数组。

HTML：

```
<a href="/one" class="lv" thumbnail="one.jpg">one</a>
<a href="/two" class="lv" thumbnail="two.jpg">two</a>
<a href="/three" class="lv" thumbnail="three.jpg">three</a> 
```

数组：

```
var hrefs = $('.lv').map(function() { return $(this).attr('href'); }).get();
var thumbs = $('.lv').map(function() { return $(this).attr('thumbnail'); }).get(); 
```

所需的结果数组（元素）：

```
{
    {hrefs[0], 
        {
           thumbnail: thumbs[0]   
        }
    },
    {hrefs[1],
        {
           thumbnail: thumbs[1]   
        }
    },
    ...
} 
```

我已经开始了，但我认为这是错误的......

```
var e = new Array();
$.each(hrefs, function(i, value) {
    e[i] = new Array();
    e[i][0] = value;
    e[i][1] = {thumbnail: thumbs[i]};
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:13:49.807

你是这个意思吗？

```
var result = $('.lv').map(function() {
    var o = {};
    o[$(this).attr('href')] = { thumbnail: $(this).attr('thumbnail') } };
    return o;
}).get(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T07:17:13.083

你在寻找这样的东西吗？

```
var hrefs = $('.lv').map(function() { return $(this).attr('href'); }).get();
var thumbs = $('.lv').map(function() { return $(this).attr('thumbnail'); }).get();

var arr = {};
for (i in hrefs) {
    arr[hrefs[i]] = {
        thumbnail: thumbs[i]
    }
} 
```

另一个建议，尽量少使用 JQuery 以加快执行速度

```
var lvs = $('.lv');
var arr = {};
for (i=0; i< lvs.length; i++) {
    arr[lvs[i].getAttribute('href')] = {
        thumbnail: lvs[i].getAttribute('thumbnail')
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T07:16:22.657

您快到了。做就是了：

```
var e = [];
$.each(hrefs, function(i, value) {
    e[i] = [];
    e[i] = [ value, {thumbnail: thumbs[i]} ];
}); 
```

甚至更短：

```
var e = [];
$.each(hrefs, function(i, value) {
    e[i] = [ value, {thumbnail: thumbs[i]} ];
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T07:14:02.803

试试这个

```
var result = {};

$.each( hrefs, function ( index ) {
    result[ hrefs[ index ] ] = { thumbnail: thumbs[ index ] };
}); 
```

# database - 在 Worklight 中构建和部署失败并出现 openjpa 致命一般错误

> ID：14517052
> 
> 赞同：0
> 
> 时间：2013-01-25T07:10:35.110
> 
> 标签：database, deployment, ibm-mobilefirst

一段时间以来，我一直面临嵌套异常问题，请参阅下面给出的日志详细信息。使用 Worklight 5.0.5.x 和 5.0.6.x 测试：

> 将应用程序部署到 Worklight Server 失败：事务已回滚。有关发生的错误的详细信息，请参阅嵌套异常。嵌套异常是 org.apache.openjpa.persistence.PersistenceException：事务已回滚。有关发生的错误的详细信息，请参阅嵌套异常。

在添加环境之前它工作正常，但只要我添加一个（在 Android 和 iPhone 环境中测试），就会发生错误。

**系统：**

*   Windows 7的
*   日蚀朱诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:02:10.530

尝试关闭 Eclipse 并删除工作区中的 WorklightServerHome 文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T19:53:24.693

在 Worklight 5.0.6.1 中，应用程序的 .wlapp 文件大小不应再阻止部署过程成功。请升级并再次检查。

如果您使用 MySQL 作为 Worklight 的数据库，请遵循以下说明：[如何更改 max_allowed_pa​​cket 大小](https://stackoverflow.com/questions/8062496/how-to-change-max-allowed-packet-size)，以允许部署通过 MySQL。

# ruby-on-rails - Error_Messages 计数在所有模型实例中增加

> ID：14517057
> 
> 赞同：0
> 
> 时间：2013-01-25T07:11:11.453
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, mongoid, mongoid3

我正在开发一个带有 Mongoid 后端的 rails 3.2.9 项目。我正在尝试创建帖子，如果帖子缺少标题和内容，则模型应该无法正确保存它。当一个对象被修复并通过验证时，我保存它并现在创建一个新帖子。如果我尝试用丢失的项目保存这个，错误计数似乎只是附加前一个，即使它们是两个不同的对象。

我正在使用来自[dynamic_form](https://github.com/joelmoss/dynamic_form)的 error_messages 助手来显示我的错误。有任何想法吗？

这是一个示例错误消息：

> 152 错误禁止保存该帖子 以下字段存在问题： 标题不能为空 标题不能为空 标题不能为空 标题不能为空 标题不能为空

这份名单还在继续。代码只是基本的表单代码：

```
= form_for @post,:as => :post, :url => post_path(:id=>@post.id), :method => :put do |f|
  =f.hidden_field :is_question
  #content        
    .title-page
      %h1 
        New Post        
    = f.error_messages 
```

在我的模型中：

```
validates_presence_of :title
validates_presence_of :content 
```

和我的控制器方法：

```
def publish      
  @post = Post.first(conditions:{_id:params[:post_id]}) 
  @post.assign_attributes(params[:post])

  @post.published=true  

  if @post.save           
    redirect_to "/"
  else
    @video = Video.new    
    render action: "new"
  end    

end 
```

# ruby-on-rails-3 - 在具有自引用和多对一映射的 Rails 中的 Active Record 关联中需要帮助

> ID：14517060
> 
> 赞同：0
> 
> 时间：2013-01-25T07:11:23.137
> 
> 标签：ruby-on-rails-3, activerecord, associations, polymorphic-associations

**要求：** 我正在为本地校园创建一个类似 twitter 的 Web 应用程序，用户可以像 twitter 一样在 140 个字符内通过服务分享他们的反馈。

对于每个反馈，可以对反馈有多个响应。这些回复类似于 twitter 回复，其中回复也是 140 个字符的回复，如推文。

本质上，用于输入反馈或响应的屏幕与相同的功能元素相同。
示例是：-

> 这是一个演示反馈 - 用户 1
>   这是对反馈的回应 - 用户 2

* * *

我正在使用 Rails 进行开发，这就是我的反馈模型的样子

```
class Feedback < ActiveRecord::Base
  attr_accessible :title     

end 
```

我在数据库中的表结构如下所示：-
**反馈表**

> id , integer , 主键
> 标题, varchar (255)

这就是我想要管理对反馈的响应的方式

一个名为“ **Feedback_Responses** ”的单独表格，其结构如下：

> feedback_id (int) [这是父反馈id]
> response_id (int) [这是对父反馈id的响应]

**我的问题** 我知道这里需要具有多对一关系的自引用映射。但是，我不清楚如何从用于创建**反馈的同一****视图**继续创建响应。其次，响应是对系统的另一个反馈，因此除非创建响应并生成其 id，否则 Feedback_Responses 表不会填充所需的映射。所以，在这种情况下，我真的一无所知，也许对如何在单独的表上创建响应和管理它们的映射感到困惑。我开始使用这个应用程序学习 Rails。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:30:04.990

```
class Feedback < ActiveRecord::Base
  attr_accessible :title 
  validates :title, :length => { :maximum => 140 }
  has_many_and_belong_to :responses   
end

class Response < ActiveRecord::Base
  has_many_and_belong_to :feedbacks      
end 
```

要从反馈对象中获取响应，请使用`@feedback.responses` 相同的响应对象`@response.feedbacks` 这种关系很容易维护。如果需要，您可以添加中间表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:43:01.567

我不太了解您的设计，但看起来您的主要实体（相当于推文）是“反馈”，每个“反馈”可以有许多“响应”（如评论）。我不清楚的是“响应”本身是否可以是“反馈”，但我现在假设它不是。因此，根据此描述，您的设计表明反馈有很多响应。我发现“feedback_responses”表与此事无关，因为听起来响应与一个且只有一个反馈有关。所以，放下桌子。

所以，我会这样写：

```
# table feedbacks
# id: Integer
# title: Varchar 140
class Feedback < ActiveRecord::Base
  has_many :responses
end

# table responses
# id: Integer
# feedback_id: Integer
class Response < ActiveRecord::Base
  belongs_to :feedback
end 
```

尽管如此，如果你想处理一个反馈而不是对另一个反馈的响应，你可以使用继承作为解决方案：

```
# additionally feedback_id: Integer to the feebacks table
class Feedback < ActiveRecord::Base
  has_many :responses
end

class Response < Feedback
  belongs_to :feedback
end 
```

只要您有两个可区分的模型，视图生成就会自动变得容易。**

# c# - Windows 窗体 - 如何设置控件堆栈之间的边距

> ID：14517063
> 
> 赞同：0
> 
> 时间：2013-01-25T07:11:31.310
> 
> 标签：c#, winforms, styling

我的问题是关于我目前遇到的某个问题，但我在很多情况下都遇到了不同的 Windows 窗体控件。我有17个`labels`喜欢：

```
label 1
label 2
label 3
.
.
label 17 
```

我想让它们之间的空间更大，但同时在所有标签之间保持相同。我尝试更改`margin`属性，但似乎没有影响。那么有没有办法像在这种情况下为一堆控件设置一些属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T07:18:16.307

选择所有控件，然后转到“格式 -> 垂直间距 -> 增加”

# java - 位图未使用 java 从 MySQL 成功检索

> ID：14517066
> 
> 赞同：0
> 
> 时间：2013-01-25T07:11:45.663
> 
> 标签：java, android, mysql, bitmap, android-imageview

我正在从 java 将数据发布到一个 URL，该 URL 用于从 Web 服务器上的 MySQL 字段`PHP`返回一个`json_encode(d)`blob。

现在，当我使用返回的数据（使用`InputStream`or `getBytes`）创建 a`bitmap`并将 a 设置`ImageView`为此位图`setImageBitmap`时，我得到空的 imageview。即，`decodeByteArray`或`decodeStream`返回**NULL**。

我在整个互联网上搜索了这个，发现许多开发人员都面临这个问题。请尽快帮忙。

谢谢你。

我检索文本细节没有问题，检索图像是个问题。这是Java和PHP的代码片段..

这是我的 java 的 onCreate 方法。

```
public void onCreate(Bundle icicle) {

super.onCreate(icicle);

setContentView(R.layout.loginlayout);
TextView tv1, tv2, tv3, tv4, tv5;
imageview = (ImageView) findViewById(R.id.imageView1);

button  = (Button) findViewById(R.id.button1);
tv1 = (TextView) findViewById(R.id.dispuser);
tv2 = (TextView) findViewById(R.id.tv2);
tv3 = (TextView) findViewById(R.id.tv3);
tv4 = (TextView) findViewById(R.id.tv4);
tv5 = (TextView) findViewById(R.id.tv5);

SharedPreferences userDetails = this.getSharedPreferences("logindetails",      MODE_PRIVATE);
String username = userDetails.getString("username", "");
String password = userDetails.getString("password", "");

button.setOnClickListener(this);

httpclient = new DefaultHttpClient();

httppost = new HttpPost("myurl");

try{

nameValuePairs = new ArrayList<NameValuePair>();

nameValuePairs.add(new BasicNameValuePair("username", username));
nameValuePairs.add(new BasicNameValuePair("password", password));

httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

response = httpclient.execute(httppost);

if(response.getStatusLine().getStatusCode() == 200){

    entity = response.getEntity();

    if(entity != null) {

        InputStream instream = entity.getContent();

        JSONObject jsonResponse = new JSONObject(convertStreamToString(instream));

String sex = jsonResponse.getString("Sex");
String age = jsonResponse.getString("Age");
String name = jsonResponse.getString("Name");
String phone = jsonResponse.getString("Phone");
String pic = jsonResponse.getString("picture");

byte[] image = Base64.encodeBytesToBytes(pic.getBytes("UTF-8"));

imageview.setImageBitmap(BitmapFactory.decodeByteArray(image, 0, image.length));

 tv1.setText("Welcome " + username);
 tv2.setText("Your  is Name: " + name);
 tv3.setText("Your phone " + phone);
 tv4.setText("Your a  " + sex );
 tv5.setText("Your age is " + age);

}
} 

}
catch (Exception e) {

e.printStackTrace();

}
finally {
httppost.abort();
}
} 
```

在PHP方面..

```
 <?
    include 'connect.php';

    $username = $_POST['username'];
    $password = $_POST['password'];

    $query = mysql_query("SELECT * FROM applogin WHERE username = '$username' AND password = '$password'");

    $num = mysql_num_rows($query);

    if($num == 1)
    {
    while($list = mysql_fetch_assoc($query))
    {
    $output = $list;
    }
    echo json_encode($output);
    mysql_close();
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:41:20.607

```
String input;//your pic string 
byte[] decodedByte = Base64.decode(input, 0);
BitmapFactory.decodeByteArray(decodedByte, 0, decodedByte.length); 
```

# php - 在 Codeigniter 中两次发布相同的控制器时使用 flashdata

> ID：14517069
> 
> 赞同：0
> 
> 时间：2013-01-25T07:11:59.167
> 
> 标签：php, codeigniter

我正在尝试提交编辑用户学术详细信息的 EDIT 表单，这些详细信息在 DB 中具有唯一 ID，而我的简短代码如下所示：

```
class edit extends ci_controller
{

function user_academics($id = NULL)
    {
        if(isset($id) == FALSE)     //if link is ./edit/user_academics
        {
            $id = NULL;
            $link = site_url('profile');
            show_error("Invalid Page Request! <a href='$link' Go to Profile </a>");
        }

        $user_id = $this->session->userdata('user_id');        
        $data['fill'] = $this->edit_model->get_user_academics($id);

        if($user_id != $data['fill']['user_id'])    // check if logged in user is accessing his record or others
        {
             $link = site_url('profile');
            show_error("This is an Invalid Request ! <a href='$link'>Go to Profile </a>");
        }
        else // actual work starts here
        {
            $this->session->set_flashdata('ua_id',$id); // update_academics will get this data

            $this->load->view('edit/edit_3_view',$data);

        }
    }

 function update_academics()
    {
        $ua_id =  $this->session->flashdata('ua_id');   // flash data used here .
        if( !$ua_id )
        {
            show_error('Sorry, This request is not valid!');

        }
      $academics = array( 
            // All post values
        );

        $this->edit_model->update_user_academics($academics,$ua_id);
        //print_r($academics);
        redirect('profile');

    }

} 
```

现在的问题是 - 如果我打开两条不同的记录进行编辑，那么它将只设置一个 Session Flash 值。- 无论我编辑什么，最后一个闪存值的现有值都会更新。如果我在上面的代码中有错误，请建议我另一种方式或纠正我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:27:07.930

将该 flashdata 保存在数组中，例如：

```
$myArr = array('value 1', 'value 1');
//set it
$this->session->set_flashdata('some_name', $myArr); 
```

并认为：

```
$dataArrs = $this->session->flashdata('some_name');
//loop thru $dataArrs to show the flashdata 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:28:34.303

Flash 数据就像仅在下一个请求中可用的变量一样，您可以通过使用其中包含记录 ID 的两个不同键来绕过此行为，这样当您使用 Flash 数据显示消息时，您可以访问具有特定记录 ID 的键。

# ivr - 在应用程序模拟器中测试 VXML 应用程序

> ID：14517071
> 
> 赞同：4
> 
> 时间：2013-01-25T07:12:13.473
> 
> 标签：ivr, vxml, voicexml, avaya

我正在寻找一种在桌面/网络浏览器中模拟 vxml 应用程序的解决方案。

**挑战**
我在每个新的 vxml 应用程序开发中都有数百个单元测试用例。不可能总是进行测试调用来测试我拥有的每个单元测试用例。如果我可以在模拟器中测试 vxml 应用程序，它会更容易测试..

* * *

我知道 avaya Dialog Designer/AAOD 具有在其内置应用程序模拟器中测试应用程序的功能，该模拟器附带 AAOD/DD Eclipse 包，但该工具可以单独在工作区中运行 AAOD/DD 项目。请参考：[Avaya 开发指南第 16 章](http://downloads.avaya.com/css/P8/documents/100088393)

AAOD的工具长这样 ![Avaya AAOD 中的应用程序模拟器工具](../Images/4a4fd2c3b95e4dc09c0f8cdb603044c0.png)

是否可以自定义使用此工具来模拟基于静态 VXML/Nuance NDF 的 VXML 应用程序？

或任何其他可用的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:10:53.333

IVR 应用程序的单元测试具有挑战性，几乎不可能在任何规模的应用程序的调用流程中找到任何可能的路径。我不知道您是否可以根据需要自定义 Avaya 的工具。但是有一种产品可能符合您的某些要求。它是[Syntellect 的 Voiyager](http://www.syntellect.com/pages/products/voiyager_eng.aspx)。如果您想尝试一下，他们现在似乎有[免费试用版。](http://voiyager.com/)几年前，我在 SpeechTEK 上看到了它的演示，这令人印象深刻。我当时没有追求它的唯一原因是它非常昂贵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-04T06:46:00.413

Avaya od/dd 是一个平台相关工具 (IDE)，您可以在其中创建 (vxml+java)、测试和调试应用程序。但是在环境之外（Avaya OD/DD 工具）创建的代码是不可能的。因为avaya OD生成的代码是java格式，在语音浏览器中执行时会转换成vxml，需要给webLM一个avaya工具的license。你可以使用一些ivr自动化工具，比如hammer等。但是你需要付费为软件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-21T14:25:27.790

如上所述，有些东西不能进行单元测试。Nuance NDF 和 SVF 应用程序带有测试页面，您可以在其中模拟呼叫流程；类似的工具退出语法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-29T13:41:34.453

VXML 应用程序只是 WAR。在页面调用之间传输的唯一会话信息是会话 ID。我们使用[Apache JMeter](http://jmeter.apache.org)创建应用程序。

你可以做什么尝试看看你想做的事情是否可以通过网络浏览器完成，去`http://<server>/<Application/Start`那里填写你需要的框（大多数时候只需填写标记为 ANI 和 DNIS 的框就足够了）。如果您的呼叫可以通过这种方式进行测试，您可以使用这些工具进行 Web 测试，而无需使用 Orchestration Designer。

如果您的应用具有 CTI/AES 连接器，您可能无法执行此操作，因为 Web 服务器会在提交第一页时尝试连接到 AES。

# lua - CORONA SDK 中的闪电阴影效果

> ID：14517079
> 
> 赞同：0
> 
> 时间：2013-01-25T07:12:59.693
> 
> 标签：lua, coronasdk

我正在尝试在我的故事书中创建聚光灯效果，这样当角色从一个位置移动到另一个位置时，光线焦点就会移向同一个角色。是否可以在 Corona SDK 中做到这一点？我该怎么做，因为精灵对我没有帮助。关于这个的任何想法。我发现一些参考告诉我我不能那样做

[http://web-c2.anscamobile.com/forum/2012/10/27/dynamic-shadows-2d](http://web-c2.anscamobile.com/forum/2012/10/27/dynamic-shadows-2d)

[http://developer.coronalabs.com/forum/2012/09/13/lightingshadows](http://developer.coronalabs.com/forum/2012/09/13/lightingshadows)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T20:20:04.160

这两个线程似乎非常确定。你可以很容易地创建一个聚光灯，但你不能投射阴影，而且光线很容易移动到不同的方向。

如果你想做一个没有阴影的聚光灯，只需创建一个全黑的图像，中间有一个透明孔，孔周围有一些羽毛。使黑色部分透明，以便您可以看到场景，但让它更暗一些。你可以让他们移动图像作为你的聚光灯。您也可以使用 maskk 来完成（请参阅示例代码中的 Flashlight 示例）

# javascript - 从 javascript 更改子 JSP

> ID：14517083
> 
> 赞同：0
> 
> 时间：2013-01-25T07:13:20.297
> 
> 标签：javascript, jquery, jsp

假设我有一个 home.jsp 由

> /common/_header.jsp
> /_homebody.jsp
> /common/_footer.jsp

而search.jsp由

> /common/_header.jsp
> /_searchbody.jsp
> /common/_footer.jsp

标题有一个搜索框。在提交字符串时，我想转到搜索页面，但更喜欢 ajax 调用。那么显示搜索页面的最佳方式是什么。我有以下解决方案。

1.  `$(selector).empty()`使用或删除 _homebody 内容`$(selector).remove()`
2.  使用添加 _searchbody 内容`$(selector).append(content)`

删除部分很好，但附加部分很脏并且容易出错，因为我需要将 HTML 字符串存储在我的 javascript 中。有什么解决办法吗？两种可能的解决方案可能是

1.  在 javascript 中存储 HTML 字符串的更好方法或
2.  一种可以删除 JSP 的子元素并添加新元素的方法。

或者任何更好的解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:18:51.393

您可以使用 html() 函数来替换内容

在ajax成功

```
$(selector).html(content); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:18:59.560

如果您将服务器设置为以 HTML 格式返回搜索结果，则只需使用[http://api.jquery.com/load/](http://api.jquery.com/load/)插入生成的结果。

解决此问题的一种方法是隐藏`_homebody`内容并显示一个 div，您可以定期更新其内容。然后在每次搜索后，将内容替换为`load`ed 内容的内容

# ruby-on-rails - 如何更新 AR 模型上的属性的属性？

> ID：14517088
> 
> 赞同：0
> 
> 时间：2013-01-25T07:13:41.650
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用[piggybak gem](http://www.piggybak.org/index.html)。

我有一个产品`q`：

```
1.9.3p194 :009 > q
 => #<Product id: 20, name: "iPad", description: "<p>\r\n\tiPad 11&quot; tablet that will change the way...", price: 499.0, vendor_id: 11, created_at: "2012-12-15 23:40:27", updated_at: "2013-01-01 00:18:39", image: "ipad.png", sku: "AB-09123"> 
```

`q`具有`piggybak_sellable`具有其他属性的属性。

```
1.9.3p194 :010 > q.piggybak_sellable
 => nil 
```

`Product`这是在 Rails Admin UI 中分配的可用属性的示例。

```
1.9.3p194 :011 > p.piggybak_sellable
 => #<Piggybak::Sellable id: 1, sku: "AR4590", description: "Blue Shirt", price: #<BigDecimal:7ffa1ba863b8,'0.2499E2',18(45)>, quantity: 100, item_id: 19, item_type: "Product", active: true, unlimited_inventory: false> 
```

我想将这些属性添加到`nil`记录中。

我想更新所有这些属性，`q.piggybak_sellable`而不必手动进行，即设置`q.piggybak_sellable.sku = "ARJHR"`等。

我试过做`update_attributes`，但没有奏效：

```
1.9.3p194 :008 > q.piggybak_sellable.update_attributes(:sku => "YJ4567", :description => "Awesome tablet", :price => 399, :quantity => 100, :item_id => 20, :item_type => "Product", :active => true)
NoMethodError: undefined method `update_attributes' for nil:NilClass 
```

关于如何做到这一点的想法？

我试图把它放在我的`Product`模型上的回调中——为了它的价值。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:25:40.800

如果您收到的错误消息指出对象已经存在，则更新属性起作用。尝试这样的事情：

```
1.9.3p194 :008 > q.piggybak_sellable.create(:sku => "YJ4567", :description => "Awesome tablet", :price => 399, :quantity => 100, :item_id => 20, :item_type => "Product", :active => true) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:51:24.580

正如marcamillion 已经说过的，您的协会显然不存在，至少在某些情况下是这样。现在的问题是如何让它静默初始化，以便在关联不存在时它不会中断。我会尝试像这样实现它：

```
( q.piggybak_sellable || q.build_piggyback_sellable ).
update_attributes(:sku => "YJ4567", :description => "Awesome tablet", 
                  :price => 399, :quantity => 100, :item_id => 20, 
                  :item_type => "Product", :active => true) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T18:11:19.957

所以看来我需要做的是设置`piggybak_sellable`我的产品的属性，等于`Piggybak::Sellable`可以这样做的类的实例：

```
1.9.3p194 :006 > m.piggybak_sellable = Piggybak::Sellable.new({:sku => "YJ4567", :description => "Awesome tablet", :price => 399, :quantity => 50, :item_id => 20, :item_type => "Product", :active => true})
   (0.3ms)  begin transaction
  Piggybak::Sellable Exists (18.7ms)  SELECT 1 AS one FROM "sellables" WHERE "sellables"."sku" = 'YJ4567' LIMIT 1
  SQL (29.6ms)  INSERT INTO "sellables" ("active", "description", "item_id", "item_type", "price", "quantity", "sku", "unlimited_inventory") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["active", true], ["description", "Awesome tablet"], ["item_id", 20], ["item_type", "Product"], ["price", #<BigDecimal:7fa97c8f29d8,'0.399E3',9(36)>], ["quantity", 50], ["sku", "YJ4567"], ["unlimited_inventory", false]]
   (2.7ms)  commit transaction
 => #<Piggybak::Sellable id: 3, sku: "YJ4567", description: "Awesome tablet", price: #<BigDecimal:7fa97cf2ec98,'0.399E3',9(36)>, quantity: 50, item_id: 20, item_type: "Product", active: true, unlimited_inventory: false> 
```

# php - 无法在 codeigniter 中使图像上传成为可选

> ID：14517089
> 
> 赞同：0
> 
> 时间：2013-01-25T07:13:44.927
> 
> 标签：php, codeigniter, image-upload

我有四张图片要上传。在我的表格中，所有这四个图像都是可选的。

我试图让它成为可选的，但我无法解决我的问题。请检查我下面的代码，让我知道任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:45:54.257

```
<?php

if(isset($_FILES))
{
    if(empty($_FILES['testfile']['name']))
    {
        echo 'no';
    }else{
        // do the form validation here
    }
}
?>

<form action="<?php echo $_SERVER['PHP_SELF']?>" method="POST" enctype="multipart/form-data">
<input type="file" name="testfile"/>
<input type="submit" value="upload">
</form> 
```

这是一些您可以尝试的测试，希望对您有所帮助

# ruby - 为什么在Ruby中获取返回零

> ID：14517092
> 
> 赞同：3
> 
> 时间：2013-01-25T07:13:59.017
> 
> 标签：ruby, file-io, irb, rubymine, gets

我有一个简单的方法

```
def save_logline
  print "What's the name of the movie"
  movie_name = gets.strip
  print "And what is your precious logline?"
  logline = gets.strip
  File::open(movie_name + '.txt', 'w') do |f|
    f.write(logline)
  end
end 
```

每当我运行代码时，我都会收到插入电影名称的第一个提示，但是一旦我按下回车键，就会调用第二个打印，给我这个消息。

```
And what is your precious logline?=> 0 
```

该文件已写入，但我无法在文本文件中插入任何内容。我的逻辑有什么问题，我该如何解决？我在 Ubuntu 的 RubyMine 中使用 irb。

编辑：似乎由于其他用户对我的代码工作的响应以及我自己在另一台开发机器上的测试，我的代码只是不能在那台机器上工作。我只能说我使用的是 RubyMine 的 irb 控制台。现在的问题一定是它是 RubyMine 问题还是我的开发机器有更大的问题？

最终编辑：我检查了我的第二个具有 RubyMine 的 comp，它似乎在 RubyMine 的 irb 控制台中也不起作用。除非有人知道为什么 RubyMine 的 irb 表现得很古怪，否则我将在一两天内将 bug 发布给 RubyMine 并感谢 Jeremy。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T07:19:38.710

您的代码有效。是的`0`返回值`f.write`。这是说它向您的文件写入了零字节，因为您没有给它任何输入。

编辑：也许你不小心按了两次回车......

# php - 将php生成的图像动态文本居中对齐

> ID：14517094
> 
> 赞同：20
> 
> 时间：2013-01-25T07:14:02.133
> 
> 标签：php, imagettftext

我想将图像上生成的文本与图像的中心对齐。目前，我不知道是否可以对齐它。下面是代码。

```
$im = @imagecreatefromjpeg('poloroid.jpg');

// Create some colors
$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0, 0, 0);
//imagefilledrectangle($im, 0, 0, 399, 29, $white);

// The text to draw
//$text = 'John...';
$fbid = $_POST["id"]; 
$text = $_POST["want"];
$fb_email =$_POST["email"];
$fb_name=$_POST["name"];

$uploads_dir = 'uploaded_files/';
// Replace path by your own font path
$font = 'verdana.ttf';

//image file name
//$name ="$fbid.png";
$name = $uploads_dir.$fbid.".png"; //this saves the image inside uploaded_files folder

// Add some shadow to the text
imagettftext($im, 20, 0,  25, 126, $grey, $font, $text);

// Add the text
imagettftext($im, 20, 0, 25, 125, $black, $font, $text);

// Using imagepng() results in clearer text compared with imagejpeg()
//imagepng($im);
imagepng($im,$name,9);
imagedestroy($im); 
```

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-25T07:42:12.390

```
$im = @imagecreatefromjpeg('poloroid.jpg');

// Create some colors
$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0, 0, 0);
//imagefilledrectangle($im, 0, 0, 399, 29, $white);

// The text to draw
//$text = 'John...';
$fbid = $_POST["id"]; 
$text = $_POST["want"];
$fb_email =$_POST["email"];
$fb_name=$_POST["name"];

$uploads_dir = 'uploaded_files/';
// Replace path by your own font path
$font = 'verdana.ttf';
$font_size = 20;
$angle = 45;

//image file name
//$name ="$fbid.png";
$name = $uploads_dir.$fbid.".png"; //this saves the image inside uploaded_files folder

// Get image Width and Height
$image_width = imagesx($im);  
$image_height = imagesy($im);

// Get Bounding Box Size
$text_box = imagettfbbox($font_size,$angle,$font,$text);

// Get your Text Width and Height
$text_width = $text_box[2]-$text_box[0];
$text_height = $text_box[7]-$text_box[1];

// Calculate coordinates of the text
$x = ($image_width/2) - ($text_width/2);
$y = ($image_height/2) - ($text_height/2);

// Add some shadow to the text
imagettftext($im, $font_size, 0, $x, $y+1, $grey, $font, $text);

// Add the text
imagettftext($im, $font_size, 0, $x, $y, $black, $font, $text);

// Using imagepng() results in clearer text compared with imagejpeg()
//imagepng($im);
imagepng($im,$name,9);
imagedestroy($im); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-01-02T13:16:46.317

您可以使用[stil/gd-text](https://github.com/stil/gd-text)类。免责声明：我是作者。

```
<?php
use GDText\Box;
use GDText\Color;

$im = @imagecreatefromjpeg('poloroid.jpg');

$textbox = new Box($im);
$textbox->setFontSize(20);
$textbox->setFontFace('verdana.ttf');
$textbox->setFontColor(new Color(0, 0, 0)); // black
$textbox->setTextShadow(
    new Color(0, 0, 0, 80), // black color, but 60% transparent
    0,
    -1 // shadow shifted 1px to top
);
$textbox->setBox(
    0,  // distance from left edge
    0,  // distance from top edge
    imagesx($im), // textbox width, equal to image width
    imagesy($im)  // textbox height, equal to image height
);

// now we have to align the text horizontally and vertically inside the textbox
// the texbox covers whole image, so text will be centered relatively to it
$textbox->setTextAlign('center', 'center');
// it accepts multiline text
$textbox->draw($text);

$uploads_dir = 'uploaded_files/';
//image file name
//$name ="$fbid.png";
$name = $uploads_dir.$fbid.".png"; //this saves the image inside uploaded_files folder
imagepng($im, $name, 9);
imagedestroy($im); 
```

示范：

![演示](../Images/20296a2604c9f9a545b5dc72260c094a.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T07:26:06.290

我已经稍微更新了你的代码：

```
function ImageTTFCenter($image, $text, $font, $size, $angle = 45) 
{
    $xi = imagesx($image);
    $yi = imagesy($image);

    $box = imagettfbbox($size, $angle, $font, $text);

    $xr = abs(max($box[2], $box[4]));
    $yr = abs(max($box[5], $box[7]));

    $x = intval(($xi - $xr) / 2);
    $y = intval(($yi + $yr) / 2);

    return array($x, $y);
}

$im = @imagecreatefromjpeg('poloroid.jpg');

// Create some colors
$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0, 0, 0);
//imagefilledrectangle($im, 0, 0, 399, 29, $white);

// The text to draw
//$text = 'John...';
$fbid = $_POST["id"]; 
$text = $_POST["want"];
$fb_email =$_POST["email"];
$fb_name=$_POST["name"];

$uploads_dir = 'uploaded_files/';
// Replace path by your own font path
$font = 'verdana.ttf';

//image file name
//$name ="$fbid.png";
$name = $uploads_dir.$fbid.".png"; //this saves the image inside uploaded_files folder

list($x, $y) = ImageTTFCenter($im, $text, $font, 20)
// Add some shadow to the4 text
imagettftext($im, 20, 0, $x, $y+1, $grey, $font, $text);

// Add the text
imagettftext($im, 20, 0, $x, $y, $black, $font, $text);

// Using imagepng() results in clearer text compared with imagejpeg()
//imagepng($im);
imagepng($im,$name,9);
imagedestroy($im); 
```

该`ImageTTFCenter`功能将找到您将告诉您的图像的中心坐标`imagettftext`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-04-13T13:38:19.413

```
foreach ($user as $key=>$value){    
    $bb = imagettfbbox($value['font-size'],0,$fontname,$value['name']);    
    $WW = abs($bb[2]-$bb[0]);    
    $XX = ($value['XPos']+$WW);    
    $HH = abs($bb[5]-$bb[3]);    
    $HH +=1;
    $HHH += $HH;
    imagettftext($im, $value['font-size'], 0, $value['XPos'],   $value['YPos'], $color[$value['color']], $fontname, $value['name']);  
    $HHH += 1;
    $WIDE = abs($bb[2]-$bb[0]);  
    $endpoint=$value['XPos']+$WIDE;  
    $bb2 = imagettfbbox($value['font-size'],0,$fontname,$value['name']);  
    $WW2 = abs($bb2[2]-$bb2[0]);     
    $x2pos= $endpoint-$WW2;    
    imagettftext($im, $value['font-size'], 0, $x2pos, $value['YPos'], $color[$value['color']], $fontname, $value['name']);
} 
```

# python - 扩展切片语法实际上对负步骤有什么作用？

> ID：14517101
> 
> 赞同：23
> 
> 时间：2013-01-25T07:14:15.440
> 
> 标签：python, list, slice, syntactic-sugar

python 中的扩展切片语法已向我解释为“ `a[n:m:k] returns every kth element from n to m`”。

这让我很好地了解了当 k 为正时会发生什么。但我不知道如何解释`a[n:m:k]`负 k。我知道`a[::-1]`反转a，并且`a[::-k]`需要反转a的第k个元素。

但这如何概括 k 正数的定义？我想知道`a[n:m:k]`实际上是如何定义的，以便（例如）我可以理解为什么：

```
"abcd"[-1:0:-1] = "dcb" 
```

是`a[n:m:-k]`反转序列a，然后取原始索引从n开始并在m之前结束的元素吗？我不这么认为，因为这种模式不适合我尝试过的其他 n 和 m 值。但是我不知道这是如何定义的，搜索让我无处可去。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-25T07:28:17.410

`[-1:0:-1]`意思是：从索引开始`len(string)-1`向上移动到`0`（不包括在内）并走一步`-1`（反向）。

因此，将获取以下索引：

```
le-1, le-1-1, le-1-1-1  .... 1  # le is len(string) 
```

例子：

```
In [24]: strs = 'foobar'

In [25]: le = len(strs)

In [26]: strs[-1:0:-1]  # the first -1 is equivalent to len(strs)-1

Out[26]: 'raboo'

In [27]: strs[le-1:0:-1]   
Out[27]: 'raboo' 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-25T07:19:11.377

The Python documentation ([here's the technical one](http://docs.python.org/2/reference/expressions.html#slicings); the explanation for [`range()`](http://docs.python.org/2/library/functions.html#range) is a bit easier to understand) is more correct than the simplified "every kth element" explanation. The slicing parameters are aptly named

```
slice[start:stop:step] 
```

so the slice starts at the location defined by `start`, stops before the location `stop` is reached, and moves from one position to the next by `step` items.

# hadoop - Hbase Region 服务器关闭

> ID：14517110
> 
> 赞同：5
> 
> 时间：2013-01-25T07:15:02.350
> 
> 标签：hadoop, hbase

我是 Mohanselvakumar 并且是 Hbase 系统的新手，请求在我的一台 hbase 服务器上帮助我完成以下工作。

场景是我设置了 10 个节点集群和 2 个名称节点（一个主节点和一个辅助节点）。

在 10 个节点上，我在所有节点上运行 Datanode 和 Regionserver 服务。

现在问题出在 10 个节点之外，其中一个节点由于以下异常而持续宕机；

```
Frequent Error No:01

2013-01-25 12:10:51,918 FATAL org.apache.hadoop.hbase.regionserver.HRegionServer: ABORTING region server serverName=DC1AuthDFSC1D1.cidr.gov.in,6020,1359093222948, load=(requests=10, regions=876, usedHeap=1925, maxHeap=11897): regionserver:6020-0x3c13d364d92db2-0x3c13d364d92db2 regionserver:6020-0x3c13d364d92db2-0x3c13d364d92db2 received expired from ZooKeeper, aborting
org.apache.zookeeper.KeeperException$SessionExpiredException: KeeperErrorCode = Session expired
    at org.apache.hadoop.hbase.zookeeper.ZooKeeperWatcher.connectionEvent(ZooKeeperWatcher.java:328)
    at org.apache.hadoop.hbase.zookeeper.ZooKeeperWatcher.process(ZooKeeperWatcher.java:246)
    at org.apache.zookeeper.ClientCnxn$EventThread.processEvent(ClientCnxn.java:530)
    at org.apache.zookeeper.ClientCnxn$EventThread.run(ClientCnxn.java:506)
2013-01-25 12:10:51,931 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: Dump of metrics: request=0.0, regions=876, stores=992, storefiles=2380, storefileIndexSize=769, memstoreSize=19, compactionQueueSize=0, flushQueueSize=0, usedHeap=2043, maxHeap=11897, blockCacheSize=808359784, blockCacheFree=1686753176, blockCacheCount=11005, blockCacheHitCount=80692, blockCacheMissCount=149039, blockCacheEvictedCount=0, blockCacheHitRatio=35, blockCacheHitCachingRatio=87
2013-01-25 12:10:51,931 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: STOPPED: regionserver:6020-0x3c13d364d92db2-0x3c13d364d92db2 regionserver:6020-0x3c13d364d92db2-0x3c13d364d92db2 received expired from ZooKeeper, aborting
2013-01-25 12:10:51,932 INFO org.apache.zookeeper.ClientCnxn: EventThread shut down
2013-01-25 12:10:54,703 INFO org.apache.hadoop.hbase.regionserver.LogRoller: LogRoller exiting.
2013-01-25 12:10:58,660 INFO org.apache.hadoop.hbase.regionserver.CompactSplitThread: regionserver6020.compactor exiting
2013-01-25 12:11:00,866 INFO org.apache.hadoop.hbase.regionserver.MemStoreFlusher: regionserver6020.cacheFlusher exiting
2013-01-25 12:11:02,647 INFO org.apache.hadoop.ipc.HBaseServer: Stopping server on 6020
2013-01-25 12:11:02,648 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 0 on 6020: exiting
2013-01-25 12:11:02,648 INFO org.apache.hadoop.ipc.HBaseServer: PRI IPC Server handler 5 on 6020: exiting
2013-01-25 12:11:02,648 INFO org.apache.hadoop.ipc.HBaseServer: PRI IPC Server handler 3 on 6020: exiting
2013-01-25 12:11:02,648 INFO org.apache.hadoop.ipc.HBaseServer: Stopping IPC Server listener on 6020
2013-01-25 12:11:02,648 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 7 on 6020: exiting
2013-01-25 12:11:02,648 INFO org.apache.hadoop.ipc.HBaseServer: PRI IPC Server handler 6 on 6020: exiting
2013-01-25 12:11:02,648 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 5 on 6020: exiting
2013-01-25 12:11:02,648 INFO org.apache.hadoop.ipc.HBaseServer: Stopping IPC Server Responder
2013-01-25 12:11:02,649 INFO org.apache.hadoop.ipc.HBaseServer: IPC Server handler 3 on 6020: exiting
2013-01-25 12:11:02,649 INFO org.apache.hadoop.ipc.HBaseServer: PRI IPC Server handler 0 on 6020: exiting 
```

* * *

```
Frequent Error No:02

    2013-01-25 12:11:19,106 INFO org.apache.hadoop.hbase.regionserver.Leases: regionserver6020 closing leases
    2013-01-25 12:11:19,106 INFO org.apache.hadoop.hbase.regionserver.Leases: regionserver6020 closed leases
    2013-01-25 12:11:19,136 INFO org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation: Closed zookeeper sessionid=0x13c13d323792d99
    2013-01-25 12:11:19,138 INFO org.apache.zookeeper.ZooKeeper: Session: 0x13c13d323792d99 closed
    2013-01-25 12:11:19,138 INFO org.apache.zookeeper.ClientCnxn: EventThread shut down
    2013-01-25 12:11:19,143 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: regionserver6020 exiting
    2013-01-25 12:11:19,152 INFO org.apache.hadoop.hbase.regionserver.ShutdownHook: Shutdown hook starting; hbase.shutdown.hook=true; fsShutdownHook=Thread[Thread-14,5,main]
    2013-01-25 12:11:19,152 INFO org.apache.hadoop.hbase.regionserver.HRegionServer: STOPPED: Shutdown hook
    2013-01-25 12:11:19,152 INFO org.apache.hadoop.hbase.regionserver.ShutdownHook: Starting fs shutdown hook thread.
    2013-01-25 12:11:19,153 ERROR org.apache.hadoop.hdfs.DFSClient: Exception closing file 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T08:42:36.187

Zookeeper 过期可能是由于节点内存不足、GC 太长等原因而发生的。请参阅[此处](http://hbase.apache.org/book/trouble.rs.html)的第 12.9.2.7 节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-21T05:05:07.947

您可以像这样在 hbase-site.xml 中添加会话超时

```
 <property>
        <name>zookeeper.session.timeout</name>
        <value>60000</value>
      </property> 
```

跳过这个帮助

# python - Numpy：`arange`的数组

> ID：14517114
> 
> 赞同：6
> 
> 时间：2013-01-25T07:15:17.410
> 
> 标签：python, numpy

有没有办法取...

```
>>> x = np.array([0, 8, 10, 15, 50]).reshape((-1, 1)); ncols = 5 
```

……把它变成……

```
array([[ 0,  1,  2,  3,  4],
       [ 8,  9, 10, 11, 12],
       [10, 11, 12, 13, 14],
       [15, 16, 17, 18, 19],
       [50, 51, 52, 53, 54]]) 
```

我能够做到`np.apply_along_axis`...

```
>>> def myFunc(a, ncols):
        return np.arange(a, (a+ncols))

>>> np.apply_along_axis(myFunc, axis=1, arr=x) 
```

并带有`for`循环...

```
>>> X = np.zeros((x.size,ncols))
>>> for a,b in izip(xrange(x.size),x):
        X[a] = myFunc(b, ncols) 
```

但他们太慢了。有更快的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T07:44:28.377

以下将做到这一点：

```
In [9]: x = np.array([0, 8, 10, 15, 50]).reshape((-1, 1))

In [10]: ncols = 5

In [11]: x + np.arange(ncols)
Out[11]: 
array([[ 0,  1,  2,  3,  4],
       [ 8,  9, 10, 11, 12],
       [10, 11, 12, 13, 14],
       [15, 16, 17, 18, 19],
       [50, 51, 52, 53, 54]]) 
```

它将一个行向量添加到一个列向量，并依靠[广播](http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html)来完成其余的工作。

这应该和任何东西一样快：生成一个 1000x1000 矩阵需要大约 1.6 毫秒：

```
In [17]: %timeit np.arange(1000).reshape((-1, 1)) + np.arange(1000)
1000 loops, best of 3: 1.61 ms per loop 
```

# java - Spring MVC 请求和原型范围不起作用

> ID：14517115
> 
> 赞同：1
> 
> 时间：2013-01-25T07:15:17.980
> 
> 标签：java, spring-mvc, scope

在我的 Spring Application 中，以下是场景：

我有一个控制器`A`。另一个`B`用 scope 定义的bean `Request`。

```
@Service("name")
@Scope("request")
class B{
   private String name;
   public void init(String name){
     this.name = name
}
} 
```

和

```
@Controller
class A{

@Autowired
@Qualifier("name")
B ob;

//using B
} 
```

1.  现在，当我运行应用程序时，我得到了无法创建新 bean 的异常。
2.  如果我将范围更改为`prototype`. 如果我为每个请求打印 B 的 hashCode，我会得到相同的输出，这意味着它不会为每个请求注入新对象。
3.  上面如果解决了仍然不是线程安全的，因为`ob`引用将指向一个新的原型对象或请求对象，而其他处理的请求将引用新`B`对象。最好的方法是获取对主要 Spring MVC 应用程序上下文的引用，然后从方法内部获取 getBean。这样我就可以在本地访问它并获得一个新的实例。但是我该如何解决线程安全问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:25:27.140

@Controller 在单例范围内。使用代理 bean。

```
@Service("name")
@Scope(value = WebApplicationContext.SCOPE_REQUEST, proxyMode = ScopedProxyMode.TARGET_CLASS)
class B{
} 
```

# animation - 如何同时缩放和翻译？

> ID：14517116
> 
> 赞同：2
> 
> 时间：2013-01-25T07:15:25.250
> 
> 标签：animation, d3.js

我想同时缩放和平移 D3 力图。例如，在单击按钮时，它应该缩放到 400%，然后使自己在屏幕上居中。这一切都应该发生在平滑的动画效果中。

```
//animate vis to visible area 
vis.transition()
    .duration(2000)
    .attr("transform", "scale(" + someScaleValue + ")" + "center("0,0)"); 
```

这样做，缩放工作正常，但图形不居中。它向右下角移动。

```
vis.transition()
    .duration(2000)
    .attr("transform", "scale(" + someScaleValue + ")"); 
```

为什么我第二次翻译时比例会重置为 100%。

我也尝试过使用：

```
vis.transition()
    .duration(2000)
    .attr("transform", "scale(" + scaleValue + ")" + "translate(0,0)");` 
```

这也行不通。请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T13:15:39.600

`center(0,0)`[根据规范](http://www.w3.org/TR/SVG/coords.html#TransformAttribute)`transform`，不是与 一起使用的有效转换定义。

如果要将`translate(0, 0)`对象带到屏幕的中心（通常是 的左上角`vis`），则可能需要将外部元素的[viewBox](http://www.w3.org/TR/SVG/coords.html#ViewBoxAttribute)设置为： 。这将在元素内部设置坐标系，使中心位于。或者，您可以使用.`svg``"-width/2 -height/2 width height"``svg``(0, 0)``translate(width/2, height/2)`

此外，每次调用 时`.attr('transform', ...)`，都会覆盖`transform`属性的旧值。这可能是您在翻译时失去原始缩放比例的可能原因。最好的解决方案是将`vis`元素放在 a中，该元素在保持不变`g`的属性中具有缩放。`transform`

# iphone - 更改 UIimagePickerController 的默认选项

> ID：14517117
> 
> 赞同：0
> 
> 时间：2013-01-25T07:15:30.950
> 
> 标签：iphone, xcode, uiimagepickercontroller

拍照后显示重拍、预览和使用按钮。我需要将使用按钮更改为保存按钮。可以吗？

```
UIImagePickerController * imagePicker = [[UIImagePickerController alloc] init];
        imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
        imagePicker.delegate = self;
        [self presentModalViewController:imagePicker animated:YES]; 
```

# c - 从十进制获取二进制信息

> ID：14517120
> 
> 赞同：0
> 
> 时间：2013-01-25T07:15:52.280
> 
> 标签：c

假设一条指令`aw`是由 32 位结构定义的代码 010，如下所示：

```
bits 31-25  unused (all 0s)
bits 24-22: code
bits 21-19: argument 1
bits 18-16: argument 2
bits 15-0:  offset (a 16-bit, 2's complement number with a range of -32768 to 32767) 
```

给定数字 8454151，我如何确定代码是否为`aw`？

我试图将数字移动 22 位，例如 8454151 >> 22，但我一直得到 0。关于如何获取代码的位信息的任何想法（以检查它是否是`aw`或其他）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:43:35.610

如果您只需要验证一条指令是否属于某个操作，则需要最少周期的代码如下：

```
const uint32_t mask = 7 << 22;    // Shift 3 set bits by 22 in order to build 
                                  // a mask where bits 22-24 are set.
const uint32_t inst_aw = 2 << 22; // Shift the opcode by 22 to build a comparable value

uint32_t instruction = ...;       // Your instruction word

if ((instruction & mask) == inst_aw) {
  // Do your thing
} 
```

无论如何，如果您必须构建诸如“指令解码器”或“解释器”之类的东西，我建议使用由指令代码索引的指令名称（或函数指针）的查找表：

```
/*! \brief Instruction names lookup table. Make sure it has always 8 entries 
           in order to avoid access beyond the array limits */
const char *instruction_names[] = {
  /* 000 */ "Unknown instruction 000",
  /* 001 */ "Unknown instruction 001",
  /* 010 */ "AW",
  ...
  /* 111 */ "Unknown instruction 111"
};

uint32_t instruction = ...;
unsigned int opcode = (instruction >> 22) & 0x07; // Retrieving the opcode by shifting right 22 
                                                  // times and mask out all bit except the last 3

printf("Instruction is: %s", instruction_names[opcode]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:21:54.350

位移应该起作用。请务必检查数据类型。您也可以将数字与 0x01C000 “和”，然后进行比较。

# python - PyQt 中的图标未正确显示

> ID：14517124
> 
> 赞同：1
> 
> 时间：2013-01-25T07:16:16.903
> 
> 标签：python, icons, pyqt4, system-tray

我在 Python 2.6.4 和 PyQt4 中开发了一个带有系统托盘的应用程序。

每个客户端系统都在本地安装了 python，并从网络位置访问 PyQt4。

我为菜单项设置了 SystemTray 和所需的图标，如下所示。应用程序文件夹有`icons`我正在使用的文件夹。所以我用`os.getcwd()`

我将此应用程序文件夹保存在网络中，以便每个人都可以访问。

```
self.mnuItem_1 = QtGui.QAction(QtGui.QIcon(r'%s\icons\icon1.ico' % (os.getcwd())), "Menu Item 1", self)
self.mnuItem_2 = QtGui.QAction(QtGui.QIcon(r'%s\icons\icon1.ico' % (os.getcwd())), "Menu Item 1", self)

self.trayIconMenu = QtGui.QMenu(self)
self.trayIconMenu.addAction(self.mnuItem_1)
self.trayIconMenu.addAction(self.mnuItem_2)
self.trayIcon = QtGui.QSystemTrayIcon(self)
self.trayIcon.setContextMenu(self.trayIconMenu)
TrayIcon = (r'%s\ShowTime_Addons\Media\showtimeIcon.ico' % (os.getcwd()))
self.trayIcon.setIcon(QtGui.QIcon(TrayIcon))
self.trayIcon.setToolTip('Showtime')
self.trayIcon.show() 
```

在某些系统中我可以看到图标，但在某些系统中未显示图标。

为了测试，我放置了 .png 并使用它并且它工作。

```
self.mnuItem_1 = QtGui.QAction(QtGui.QIcon(r'%s\icons\icon1.png' % (os.getcwd())), "Menu Item 1", self)
self.mnuItem_2 = QtGui.QAction(QtGui.QIcon(r'%s\icons\icon1.png' % (os.getcwd())), "Menu Item 1", self) 
```

因此，我们了解到问题不在于路径，而在于其他问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T10:21:28.060

不确定这是解决方案，但尽量不要使用[`os.getcwd()`](http://docs.python.org/2/library/os.html#os.getcwd)它为您提供当前工作目录，它可能与您的应用程序目录不同。要确定应用程序目录，请使用：

```
base_dir = os.path.dirname(os.path.abspath(__file__)) 
```

然后使用`base_dir`代替`os.getcwd()`或做：

```
os.chdir(base_dir) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T10:45:48.610

我找到了针对这种情况的解决方案

一种方法是在文件中设置路径`qt.config`并将其放在可执行文件的位置。（在我的例子中是 C:\Python26）

正如我在我的问题中所描述的，我正在从网络位置访问 PyQt4 说`\\somesystem\Share\PyQt4`

我们将`qt.config`在 Take it 中找到一个文件`\\somesystem\Share\PyQt4` 并将其放入以下行`qt.conf`

```
[Paths]
Prefix = //somesystem/Share/PyQt4
Binaries = //somesystem/Share/PyQt4 
```

一切正常，甚至会加载 sqldrivers。无需使用`app.addLibraryPath`

# entity-framework - Where to put a data transfer object used in a Repository class with entity framework

> ID：14517126
> 
> 赞同：0
> 
> 时间：2013-01-25T07:16:22.333
> 
> 标签：entity-framework, repository, dto

Due to a technical restriction of the entity framework I have to return my data in an extra class which is a data transfer object instead of return the data with a Module class.

```
from m in context.Modules.Where(x => x.ParentId == null)
          join child in context.Modules on m.Id equals child.ParentId
              into groupJoin
          select new ModuleDTO { m.Id, HasChildren = groupJoin.Any() } 
```

The ModuleDTO is not my business object. It is used within my ModuleRepository.

Where should I put this DTO object which just holds getter/setter (no logic of course)

# linux - linux centos 6.3 hostname (dhcppc4) assigned automatically

> ID：14517131
> 
> 赞同：1
> 
> 时间：2013-01-25T07:16:47.340
> 
> 标签：linux, centos

Linux terminal showing hostname dhcppc4 that i never configured. As per configuration files hostname must be localhost :

```
[root@dhcppc4 ~]# cat /etc/sysconfig/network
NETWORKING=yes
HOSTNAME=localhost.localdomain

[root@dhcppc4 ~]# cat /etc/hosts
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1 localhost localhost.localdomain localhost6 localhost6.localdomain6 
```

Note : I attached a new monitor to my laptop.

Don't know how but sometimes terminal shows localhost as hostname.

what is dhcppc4? How to resolve the issue?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:32:54.163

这个问题不适合stackoverflow（我猜这应该在serverfault上）

无论如何，`DHCP`服务器甚至可以为您的机器分配一个主机名

看这里：[RFC 1553 - DHCP](https://www.rfc-editor.org/rfc/rfc1533#section-3.14)

也许这是你的情况？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T23:31:12.580

您绝对可以编辑您在问题中引用的配置文件的**HOSTNAME**行。

在您注销并重新登录之前，它不会显示。您还需要运行**/etc/init.d/rsyslogd restart**（或您正在使用的任何 syslog 守护程序）以使该名称在日志文件中生效。

您可能需要也可能不需要运行**vi /etc/hosts**来根据特定应用程序的需要调整其中的行。大多数都可以，但有些非常挑剔，比如其他非常棒的软件 Zimbra，例如，如果这些线不完美，它就无法工作。Asterisk 可能是另一个可能需要该文件与您的配置完美匹配的文件。

您可以或不能使用您的 DHCP 服务器来设置它，但大多数人不这样做，大多数人编辑 HOSTNAME 并继续。

但是，它实际上很重要，并且实际上要解决这个问题，不要只是离开它，因为当您的所有 6 个服务器都说“localhost”时，我们的系统管理员不希望在错误的机器上的 BASH 提示符下键入关键任务命令.

# mysql - 从与 CakePhp 中的外键关联的两个表中检索数据

> ID：14517134
> 
> 赞同：1
> 
> 时间：2013-01-25T07:16:57.920
> 
> 标签：mysql, cakephp, join, inner-join

我有两个名为 login 和 userDetail 的表

```
 Login

                        login_id
                        uname
                        pswd
                        userdetail_id 
```

和

```
 userdetails

                          userdetail_id
                          name
                          address
                          email 
```

登录表包含 userDetail 表中的 userdetails_id。我想从 Login 表和 userDetail 表中获取所有数据并将其保存到变量中，如果有人知道，请回答我......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T07:46:56.810

首先，您的表结构必须如下。

```
logins Table.
  Id auto_increment
  username
  password
```

```
userDetails Table.
  Id auto_increment
  user_id
  name
  address
  etc...
```

现在每个表的模型都是。

**登录**

```
<?php
class Login extends AppModel
{
    var $name = 'User';

    var $hasMany = array
    (
        'UserDetail' => array
        (
            'className' => 'UserDetail',
            'foreignKey' => 'user_id',
            'dependent' => false,
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => '',
            'offset' => '',
            'exclusive' => '',
            'finderQuery' => '',
            'counterQuery' => ''
        )
}
?>
```

**用户详情**

```
<?php
class UserDetail extends AppModel
{
    var $name = 'UserDetail';

    var $belongsTo = array
    (
        'User' => array
        (
            'className' => 'User',
            'foreignKey' => 'user_id',
            'dependent' => false,
            'conditions' => '',
            'fields' => '',
            'order' => '',
            'limit' => ''
        )
}
?>
```

最后在您需要获取登录详细信息的控制器中。

`$login_detail = $this->Login->find('all');`

您将在结果中看到 userDetail 表记录`$login_detail`。采用

```
pr($login_detail);
```

在控制器中查看它的运行情况。

干杯。随意问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T07:45:27.027

确保[ContainableBehavior](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)已启用。之后，您可以使用以下查询：

```
$login = $this->Login->find('first', array(
    'contain' => array(
        'Userdetail.userdetail_id'
        'Userdetail.name',
        'Userdetail.address',
        'Userdetail.email'
    ),
    'fields' => array(
        'Login.login_id'
        'Login.uname',
        'Login.pswd'
    ),
    'conditions' => array(
        'Login.login_id' => 1
    )
)); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-25T07:31:38.380

此任务的查询将是：

```
SELECT Login.*, name,address,email
        FROM Login JOIN userdetails
        ON Login.userdetail_id=userdetails.userdetail_id 
```

这个查询的结果可以通过在 cakephp 中循环保存到变量中。

# coldfusion - 将 CFTRY 标签包裹在所有内容周围

> ID：14517139
> 
> 赞同：1
> 
> 时间：2013-01-25T07:17:08.717
> 
> 标签：coldfusion, error-handling, coldfusion-8

我们有一个允许用户上传文件的系统，我们遍历该文件，然后制作另一个文件。上传文件的用户是登录用户。

问题是文件包含敏感数据，所以我们必须删除它们。正如您可以想象的那样，有几个地方可以将更多信息写入文件并读取文件。有时此页面上会发生错误（通常与 CFFILE 有关）。

所以我的问题是，将所有代码（大部分代码）放在一个巨大的 CFTRY 中是否可以？然后捕获发生的任何异常，~~然后在 CFCATCH 中运行另一个 CFTRY 以删除这两个文件？~~（阅读更新）我不太担心性能，因为这个过程不是每天完成一百万次，也许一个月 3 次。

这是确保文件被删除的可接受做法吗？

**更新**我不会删除 CFCATCH 中的文件。我会先检查是否存在。然后删除它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T08:18:25.280

只要有保证，就可以使用 try/catch。如果您将 try/catch 放在 101 行代码左右而不是允许的 100 行代码，那么没有 CFML 警察会在半夜将您拖走。

但是 - 正如@Tomalak 所说 - 您的措辞有点暗示代码可以进行一些重构。你说你不能重构代码，但是添加异常处理已经是重构，那么显然你*可以*做到。所以要正确地做。隔离一些功能，并将它们放入单独的模块中（我的意思不是像调用的那样`<cfmodule>`，我的意思是一般的术语），无论是 UDF，一个或多个 CFC 中的方法（它们可能是不同的，所以可能不合适对于单个 CFC），甚至只是包含文件。以后可以*更好*地重构它们。开发是迭代和循环的，记住：你不需要它是*完美的*每次你做出改变。一方面，“完美”的定义随着需求的变化而变化。但是您应该在维护代码时始终致力于*改进代码。*而且我不认为简单地在整个事情上打一个 try/catch 就意味着改进，更像是“这段代码失控”。

我可以建议的另一件事是进行改进并将其发布到[https://codereview.stackexchange.com/](https://codereview.stackexchange.com/)并了解其他人的想法。我不知道该网站上有多少 CFers，所以当你这样做后，在 Twitter 上发布一些标有#ColdFusion 的东西可能会很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T15:36:57.453

关于一个巨大的 try/catch 块，我唯一要说的是它会停止 try 块中的所有处理，所以如果你还有一些可以完成的事情，仅仅因为轨道上有四分之一就停止整个火车可能是矫枉过正.

我有一个类似的处理一堆文件的过程，我们将每个进程放在一个单独的 try/catch 块中，这样它们就不会相互干扰。即一个损坏的第一个文件不会搞砸接下来的 3 个完美的文件。catch 块只是简单地将错误消息添加到一个字符串中，然后通知用户文件中的错误格式（或其他格式），这些格式是错误的，但好的文件按预期处理。

```
<!--- file one --->
<cftry>
  some stuff
  <cfcatch>
    <cfset errors = errors & "file one did not work because #cfcatch.message#">
  </cfcatch>
</cftry>

<!--- file 2 --->
<cftry>
  some stuff
  <cfcatch>
    <cfset errors = errors & "file two did not work because #cfcatch.message#">
  </cfcatch>
</cftry> 
<cfetc...> 
```

如果你在一个动态集合上循环，你可以将 try/catch 块放在循环内部，这样 try/catch 就不会停止循环并且其他东西可以处理。当然，如果文件 2 依赖于文件 1，这将不起作用...

```
<cfloop index = "i" ...>
  <cftry>
    some stuff
    <cfcatch>
      <cfset errors = errors & "file #i# did not work because #cfcatch.message#">
    </cfcatch>
  </cftry>
</cfloop> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T13:33:07.127

我们在文件方面也有类似的情况，并采取了不同的方法。

第 1 步是限制对包含文件的目录的访问。

第 2 步是计划清理。我们有一个每天都在运行的 ColdFusion 作业。它检查各种目录并删除任何超过 x 天的文件。x 的值取决于目录。

这种方法可能适合也可能不适合您的情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T07:26:10.063

我不得不写一段新的代码，几乎和我问的一样。而不是将单独的行写入文件，然后围绕它包装一个大的 CFTRY。相反，我将每一行写入一个变量，并以换行符结束每一行，在我的情况下（Windows），换行符 where `Chr(13) & Chr(10)`. 但是您应该使用以下代码行

```
<cfset NL = CreateObject("java", "java.lang.System").getProperty("line.separator")> 
```

这将使变量`NL`等于当前系统换行符。

然后你可以有一个小的 CFTRY，你可以在其中将整个变量写入文件。

# ios - 如何为 iPhone/iPad 创建一个可以缓冲和播放来自服务器的歌曲的音乐播放器？

> ID：14517140
> 
> 赞同：0
> 
> 时间：2013-01-25T07:17:10.090
> 
> 标签：ios, avaudioplayer, avplayer, buffering

我想开发一个`iPhone/iPad`具有以下功能的音乐播放器：

-`Buffer`和`Play MP3`来自服务器的歌曲（不下载）。-玩。-暂停。-停止。- 调整音量（滑块）。- 歌曲状态/播放时间（滑块）。- 重复歌曲。-随机播放。- 在音乐播放器的中心，必须有 eq，比如有歌曲的跳舞酒吧等。

我为此使用 AVPlayer，但它在调整音量、停止、歌曲计时器等方面给我带来了麻烦。仅使用 AVPlayer`play/pause`并且缓冲正在工作。即使我也使用过`AVAudioPlayer`，它可以很好地处理我需要的所有功能，但只使用本地文件，可能我不知道任何方法从服务器中播放歌曲`AVAudioPlayer`。

帮助我提供任何建议、示例、示例代码或教程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T07:23:58.807

播放 MP3 流似乎应该是 Cocoa API 可以轻松处理的简单任务。

看这个帖子[直播](http://www.cocoawithlove.com/2008/09/streaming-and-playing-live-mp3-stream.html)

# python - How to change projection with MODIS hdf file using GDAL in Python?

> ID：14517143
> 
> 赞同：0
> 
> 时间：2013-01-25T07:17:30.787
> 
> 标签：python, projection, hdf5, gdal

I have some MODIS hdf files and trying to change the projection from Sinusoidal to Lambert Conformal Conic using GDAL module in Python.Here is my python code and it returns error message:

```
import os,sys
import gdal
import numpy

os.sys('gdalwarp test.hdf outfile.hdf -t_srs "+proj=lcc"')

  File "projection_cmd.py", line 5, in ?
    os.sys('gdalwarp test.hdf outfile.hdf -t_srs "+proj=lcc"')
TypeError: 'module' object is not callable 
```

When I use command line to run :

```
gdalwarp test.hdf outfile.hdf -t_srs "+proj=lcc"
ERROR 1: Unable to compute a transformation between pixel/line
and georeferenced coordinates for test.hdf.
There is no affine transformation and no GCPs. 
```

How can I fix it?Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:45:56.063

os.sys 是一个模块名称。如果您需要运行系统命令行，则需要使用 os.system('command')

# python - 使用python提取文件中的某些偏移量

> ID：14517144
> 
> 赞同：0
> 
> 时间：2013-01-25T07:17:30.430
> 
> 标签：python

我正在努力学习python，但我遇到了砖墙。

我只是想在 .bin 文件中提取某些偏移量。我有一个长度为“00FFFFF0”的 bin 文件

假设我想从块大小为“0x800”的“0x3F000”中提取，然后将其放入文件中，我该怎么做？我还没有任何代码，希望我能得到一些好的输入。我是 python 的初学者（已经做了几个月），并且想学习如何做到这一点，只是为了教育目的。

但关键是我希望能够提取特定的（偏移量；块大小）我希望你明白我的意思。我非常感谢我得到的任何帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:41:02.367

实际上，这是[不言自明的](http://docs.python.org/2/tutorial/inputoutput.html#methods-of-file-objects)：

```
# Use the with statement to open a file so it will later be closed automatically
with open("in.bin", "rb") as infile:  # rb = read binary
    infile.seek(0x3F000, 0)           # 0 = start of file, optional in this case
    data = infile.read(0x800)

with open("out.bin", "wb") as outfile:
    outfile.write(data) 
```

# c# - format string error in c#

> ID：14517146
> 
> 赞同：0
> 
> 时间：2013-01-25T07:17:38.970
> 
> 标签：c#

The following line gives an error:

```
 Console.WriteLine("Order:{0},\n Placed:{1},\nshipped:{2},\nTo address:{3} ,{4}, {5}\n\n" + orderid, orderdate, shipdate, shipname, shipaddr, shipcity); 
```

It shows an error as:

> (Index (zero based) must be greater than or equal to zero an d less than the size of the argument list.)

Help me out to resolve this error. I know this error happened because of the place holder provided are greater than the variables provided.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T07:20:23.017

我猜你想要：

```
Console.WriteLine("Order:{0},\n Placed:{1},\nshipped:{2},\nTo address:{3} ,{4}, {5}\n\n", orderid, orderdate, shipdate, shipname, shipaddr, shipcity); 
```

请注意 + 不存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T07:20:08.240

```
Console.WriteLine("Order:{0},\n Placed:{1},\nshipped:{2},\nTo address:{3} ,{4}, {5}\n\n",orderid, orderdate, shipdate, shipname, shipaddr, shipcity); 
```

应该解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T07:21:16.287

在你的第一个论点之前你有 a`+`而不是 a 。`,`更正：

```
Console.WriteLine("Order:{0},\n Placed:{1},\nshipped:{2},\nTo address:{3} ,{4}, {5}\n\n", orderid, orderdate, shipdate, shipname, shipaddr, shipcity); 
```

因此，该方法仅识别 5 个参数，而不是 6 个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T07:22:17.937

为什么格式字符串的末尾有一个加号？当格式字符串需要 6 时，这会导致参数为 5。

更改如下：

```
Console.WriteLine("Order:{0},\n Placed:{1},\nshipped:{2},\nTo address:{3} ,{4}, {5}\n\n", orderid, orderdate, shipdate, shipname, shipaddr, shipcity); 
```

# makefile - 为什么不在第一次运行时构建目标文件？

> ID：14517147
> 
> 赞同：2
> 
> 时间：2013-01-25T07:17:40.747
> 
> 标签：makefile, target

我有[这个 Makefile](https://github.com/theory/flex-lemon-example/blob/master/Makefile)：

```
CFLAGS := $(CFLAGS) -std=c99

shell: main.o shellparser.o shellscanner.o
    $(CC) -o shell main.o shellparser.o shellscanner.o

main.o: main.c shellparser.h shellscanner.h

shellparser.o: shellparser.h

shellparser.h: shellparser.y lemon
    ./lemon shellparser.y

shellscanner.o: shellscanner.h

shellscanner.h: shellscanner.l
    flex --outfile=shellscanner.c --header-file=shellscanner.h shellscanner.l

# Prevent yacc from trying to build parsers.
# http://stackoverflow.com/a/5395195/79202
%.c: %.y

lemon: lemon.c
    $(CC) -o lemon lemon.c 
```

出于某种原因，在第一次运行时`make`，`shellparser.o`未构建：

```
> make
cc -o lemon lemon.c
./lemon shellparser.y
flex --outfile=shellscanner.c --header-file=shellscanner.h shellscanner.l
cc  -std=c99   -c -o main.o main.c
cc  -std=c99   -c -o shellscanner.o shellscanner.c
cc -o shell main.o shellparser.o shellscanner.o
i686-apple-darwin10-gcc-4.2.1: shellparser.o: No such file or directory
make: *** [shell] Error 1
rm shellscanner.c 
```

如果我再次运行它，它将正确构建它：

```
> make
cc  -std=c99   -c -o shellparser.o shellparser.c
cc -o shell main.o shellparser.o shellscanner.o 
```

那么我有什么乱序以至于它不会第一次构建它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:28:12.783

第一次尝试构建时，Make 不知道`lemon`输出`shellparser.c`，因此它不会尝试构建它。当你重建时，`shellparser.c`确实存在，所以 Make 使用它。解决方案是明确告诉 Make`lemon`输出`shellparser.c`：

```
diff --git a/Makefile b/Makefile
index bf2655e..d6b288d 100644
--- a/Makefile
+++ b/Makefile
@@ -7,7 +7,7 @@ main.o: main.c shellparser.h shellscanner.h

 shellparser.o: shellparser.h

-shellparser.h: shellparser.y lemon
+shellparser.c shellparser.h: shellparser.y lemon
        ./lemon shellparser.y

 shellscanner.o: shellscanner.h
diff --git a/main.c b/main.c
index 81ec151..4179981 100644
--- a/main.c
+++ b/main.c
@@ -33,7 +33,7 @@ void parse(const char *commandLine) {
 }

 // Borrowed from http://stackoverflow.com/a/314422/79202.
-char * getline(void) {
+char * my_getline(void) {
     char * line = malloc(100), * linep = line;
     size_t lenmax = 100, len = lenmax;
     int c;
@@ -69,7 +69,7 @@ int main(int argc, char** argv) {
     void* shellParser = ParseAlloc(malloc);
     char *line;
     printf("> ");
-    while ( line = getline() ) {
+    while ( line = my_getline() ) {
         parse(line);
         printf("> ");
     } 
```

我也重命名`getline`了，所以它会建立在我的 Mac 上；感谢您发布所有资源！

# r - Using gvisAnnotatedTimeLine to draw X-axis in terms of hour:min:sec graph

> ID：14517148
> 
> 赞同：0
> 
> 时间：2013-01-25T07:17:45.410
> 
> 标签：r, graph, google-visualization

Have data with POXIS date and Events Y:/R/Rtest.txt

```
 Date          ?NUM   ?Label
 201301241035  ?1     ?Event1
 201301241036  ?2     ?Event2
 201301241037  ?3     ?Event3 
```

So all the data are for the same day. I need to plot a X-Y grap where X-axis is Mins"Sec and Y axis is the values in Num and when mouse curser goes over the dots, it needs show "Event1" etc strings.

How to use gvisAnnotatedTimeLine() ? to draw the plot. Can you provide examples. I can change the date/time format if needed.

Program tried are

```
data3=read.table(file="Y:/R/Rtest.txt", header=TRUE, sep="?")

 line3=gvisAnnotatedTimeLine(data3, datevar="Date"))
  Error: unexpected ')' in "line3=gvisAnnotatedTimeLine(data3, datevar="Date"))"

  line3=gvisAnnotatedTimeLine(data3, datevar="Date")
  Error in as.Date.numeric(x) : 'origin' must be supplied
   class(data3$Date) = c('POSIXt', 'POSIXct')
   line3=gvisAnnotatedTimeLine(data3, datevar="Date")
   plot(line3) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:38:54.827

这应该工作

```
## read your data with header, you replace text ='..' with file=fileName
dat <- read.table(text = 'Date          ?NUM   ?Label
201301241035  ?1     ?Event1
201301241036  ?2     ?Event2
201301241037  ?3     ?Event3',header=T)
## rename the columns
colnames(dat) <- c('Date','Value','Label')
## format columns and remove special character
dat$Date <- as.POSIXct(strptime(dat$Date,'%Y%m%d%H%M'))
dat$Value <- as.numeric(gsub('[?]','',dat$Value ))
dat$Label <- gsub('[?]','',dat$Label)
## build the plot, here I use minimum options,
## to show the plot as below
A1 <- gvisAnnotatedTimeLine(dat, 
                            datevar ="Date",
                            numvar  ="Value",
                            annotationvar="Label",
                            options=list(displayAnnotations=TRUE,
                                         width=600, height=350))
plot(A1) 
```

![在此处输入图像描述](../Images/d936df4aaf07b0d5ba7f1b4d80c01a84.png)

# javascript - jQuery - trying to event capture a blur of an element w/ keypress (or leaving the div), can't

> ID：14517150
> 
> 赞同：0
> 
> 时间：2013-01-25T07:17:50.323
> 
> 标签：javascript, jquery

**NOTE:**

**I believe I found my solution, sorry for the long post: I use "focusout" on the last href in the last li. seems to work so far.**

```
 var lastLi = jQuery("#items").find('li:last');
 jQuery(lastLi).last('a').focusout(function(eve){
    // close em'
 }); 
```

So, I am creating some code to tab thru a CSS menu. As such, I need to be aware of persons who use tab to go thru menu items. I have things working pretty good EXCEPT when they leave the last link (last LI in code below) and move to the next nav item (Link that Might exist). The menu sticks (stays open). I could just as easily put a keyup on that link and just close the previous menus, BUT because the site is dynamic, those "other links" might not exist so I can't really plan for what link follows the .

I was hoping to do a

```
jQuery('#itemsForSale').bind('blur', function() {//close menu}) 
```

no luck.

So here is a snippet of the code.

```
<ul id='siteNavigation'>
    <li id="itemsForSale">
       <div id="items">
          <ul id='itemNav'>
             <li>
                 <div id="menu1">
                    <ul>
                       <li>menu 1 item 1</li>
                       <li>menu 1 item 2</li>
                    </ul>
                 </div>
             </li>
             <li>
                  <div id="menu2">
                    <ul>
                       <li>menu 2 item 1</li>
                       <li>menu 2 item 2</li>
                    </ul>
                 </div>
             </li>
          </ul>
       </div>
    </li>
    <li>Link that Might exist</li>
    <li>AnotherLink that Might exist</li>
</ul> 
```

So, because the last two li's might or might not be there, I am trying to capture the "blur" event on id "itemsForSale" - no luck. There doesn't seem to be a "keyout" event. Is there a way to know via tabing when I exit this particular li id="menu 2 item 2" OR the parent li id="itemsForSale"?

Mind you, I have pretty much all of the other tabbing etc.. working just fine. But WHen the user gets to that last item (in my case above: menu 2 item 2 ) and moves off of it, how to know that.

I also tried capturing the "last LI" in "itemsForSale" - that was also a no go. Blur just doens't seem to work. I also tried using a setTimeout with it, nada. Any advice?

Note: Remember, I have to make this determination with a keypress of tab or "shift tab".

```
jQuery("#items").find('li:last') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:20:57.733

您可以查看`focus`事件，然后他们确定刚刚获得焦点的元素是否是菜单的子元素？

# asp.net-web-api - 如何确保 ASP.net Web API 控制器的参数不为空？

> ID：14517151
> 
> 赞同：9
> 
> 时间：2013-01-25T07:17:55.800
> 
> 标签：asp.net-web-api

我创建了一个这样的 ASP.net Web API 控制器：

```
public class UsersController : ApiController
{
    //...
    public void Put([FromBody]User_API user, long UpdateTicks)
    {
        user.UpdateTicks = UpdateTicks;
        //...
    }
} 
```

如果客户端没有提供正确的参数，“user”参数将为空。我可以做一个全局过滤器来检查这样的每个参数，如果发生任何错误，将返回 400 消息。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T07:42:59.247

最后，我得到了解决方案：

```
public class ModelValidateFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        if (actionContext.ActionArguments.Any(v => v.Value==null))
        {
            actionContext.Response = actionContext.Request.CreateResponse(HttpStatusCode.BadRequest);
        }
    }
} 
```

和...

```
//In Application_Start()
GlobalConfiguration.Configuration.Filters.Add(new ModelValidateFilterAttribute()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:33:30.910

这篇文章详细介绍了如何创建操作过滤器并在全局范围内注册它：

[http://blogs.msdn.com/b/youssefm/archive/2012/06/28/error-handling-in-asp-net-webapi.aspx](http://blogs.msdn.com/b/youssefm/archive/2012/06/28/error-handling-in-asp-net-webapi.aspx)

它位于页面底部。

# erlang - `erl -make` 命令是否可以扩展来执行编译 .erl 文件以外的操作？

> ID：14517164
> 
> 赞同：1
> 
> 时间：2013-01-25T07:19:04.507
> 
> 标签：erlang, makefile, elixir, erl

我想将 Elixir 集成到我们的项目中，并且好的旧代码不使用`rebar`，所以我认为编写构建`.ex`文件的规则`Emakefile`可能是一个好主意，但是[这里](http://www.erlang.org/doc/man/make.html)的手册页没有提到任何相关内容。

编辑：

我们团队主要是在Windows环境下工作，但是部署会在Linux服务器上完成，所以我需要一个跨平台的解决方案。由于 Erlang 本身是跨平台的，所以我想用`erl -make`命令来做。

当然我可以写一个`Makefile`，但是我需要一个`build.bat`或类似的东西来在我们的开发环境中构建代码，因为我们的开发机器上没有`make`命令。

有人有更好的主意吗？

更新：

如果有人想知道，我是这样做的：

1.  将 Elixir 源代码树中的目录复制`lib/elixir`到我们的源目录，例如`some_project/src/tools/elixir`.
2.  `some_project/src/tools/elixir/src/elixir_transform.erl`按顺序将和添加`some_project/src/tools/elixir/src/*`到`Emakefile`,。将输出目录设置为`some_project/ebin`（所有其他`.beam`文件都位于那里）。
3.  将`src/elixir.app.src`Elixir 源代码树复制到`some_project/ebin/elixir.app`，并对其进行编辑以修复版本代码。
4.  在dir中运行`erl -pa ebin -make`,构建 Erlang 代码。`some_project`
5.  通过运行构建 Elixir 编译器`erl -pa ebin -s elixir_compiler core -s erlang halt`
6.  现在我们的代码中有一个可用的 Elixir 环境，我使用以下 escript 来构建我们的自定义`.ex`文件：

> ```
> %%! -pa ./ebin
> main(_) ->
>     ExList = [ 
>         <<"source_1.ex">>,
>         <<"source_2.ex">>,
>         <<"source_3.ex">>],
>     application:start(elixir),
>     gen_server:call(elixir_code_server, {compiler_options, [{docs, true}, {debug_info, true}]}),
>     [elixir_compiler:file_to_path(F, <<"./ebin">>) || F <- ExList],
>     erlang:halt(0). 
> ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T21:00:38.130

If you want to explicitly compile Elixir, I would go with the Makefile approach since it will always be supported by Elixir. However, I would recommend the precompiled binaries or even assume Elixir is installed in each developer machine. You can even add a task to your Emakefile to guarantee everyone is using the proper Elixir version.

Finally, about compiling your own Elixir code, I would recommend simply using `mix`. `mix` is a binary that ships with Elixir and you can simply do `./src/tools/elixir/bin/mix compile` from your `Emakefile`.

In case using mix is not possible, you should use the parallel compiler, since it will compile files using all cores available in your machine and it will automatically detect and solve dependency in between files. Here is an example of calling the parallel compiler from erlang:

[https://github.com/basho/rebar/pull/347/files#L1R62](https://github.com/basho/rebar/pull/347/files#L1R62)

The API is very simple. It expects a list of file names to compile as binary and the directory to output files to as another binary.

# typescript - 在 TypeScript 中使用静态成员时

> ID：14517173
> 
> 赞同：0
> 
> 时间：2013-01-25T07:19:34.217
> 
> 标签：typescript

我有一个问题，什么时候我们必须在客户端脚本中使用静态成员，比如 TypeScript ？

第二个问题：实例成员（使用 new 关键字）和客户端脚本（如 TypeScript）中的静态成员有什么不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:35:42.243

实例是具有自己数据的方法的集合。每个实例都有自己的一组数据。

```
class Example {
    constructor(public name: string) {
    }

    showName() {
        alert(this.name);
    }
}

var a = new Example('Sally');
var b = new Example('Jane');

a.showName(); // Sally

b.showName(); // Jane 
```

使用 static 关键字时，可以在没有实例的情况下调用属性或方法，并由所有调用共享。

# javascript - 将模板文件动态加载到在 IE8 中不起作用的 div 中-

> ID：14517174
> 
> 赞同：0
> 
> 时间：2013-01-25T07:19:36.930
> 
> 标签：javascript, html, internet-explorer, dynamic-loading

我使用以下代码将包含我的模板的 html 文件动态加载到 div 中，它在所有浏览器中都可以正常工作，除了`IE8 and lower`

JS功能：

```
function loadHTML(url, callback) {
    $.ajax({
        url: url,
        success: function(res) {
            var div = document.createElement("div");
            div.setAttribute("id", "downloadIFrame");
            document.body.appendChild(div);
            document.getElementById("downloadIFrame").innerHTML = (res);            
            callback();
        }
    });
} 
```

模板.html：

```
<script type="text/html" id="tmpl1">
    <div>sdfsdf</div>
</script>

<script type="text/html" id="tmpl2">
    <div>dddd</div>
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:31:00.090

既然您已经在使用 jQuery，为什么不执行以下操作：

```
function loadHTML(url, callback) {
  $.get(url, function(res){
    $('<div>')
      .attr('id', 'downloadIFrame')
      // I add the element to the DOM **after**
      // setting the html to increase performance.
      // Manipulating elements already in the DOM
      // is computationally expensive
      .html(res)
      .appendTo('body')
    ;//div

    if(callback) callback();
  });
} 
```

# php - 是否可以在while循环中嵌套for循环？

> ID：14517176
> 
> 赞同：0
> 
> 时间：2013-01-25T07:19:55.297
> 
> 标签：php, mysql

我想这应该很容易。我很新，正如你会在我草率的代码中看到的那样，但我无法让这个 for 循环在更大的 while 循环中工作。我收到一个解析错误，但我已经检查了数百次代码，但找不到丢失的分号或逗号。任何提示表示赞赏。

谢谢！

```
 $result = mysql_query("SELECT `alias`, `max_seats` FROM `rsvp` WHERE `id` = '$id' ");
        $alias = $r['alias'];
        $seats = $r['max_seats'];

        while($r = mysql_fetch_array($result)){
            echo '<h3>Welcome, ' . $alias . '. Please complete your RSVP</h3>';
            echo '<form class="register" method="post">'; 
            echo '<input type="radio" id="responded" name="responded" value="1">Attending (confirm details in the next step)<br />';
            echo '<input type="radio" id="responded" name="responded" value="0"><em><strong>NOT</strong></em> Attending (we\'re sorry you can\'t make it!)<br /><div class="hide" id="hide1">';
            echo '<p>Please select the number of seats you\'d like to confirm (' . $seats . ' seats maximum)</p>';
            echo '<label for="seats">Seats</label>';
            echo '<select name="seats" id="seats">';
            for ($i=1; i=$seats; $i++){
                echo '<option value="' . $i . '">' . $i . '</option>';
            }   
            echo '</select> <input type="text" placeholder="How many Chicken?"></input><br />';
            echo '<input type="text" placeholder="How many Beef?"></input><br /></div>';
            echo '<input type="reset" value="Clear"><input type="submit" value="Submit"></form>'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T07:22:43.317

# 是的，您可以使用嵌套循环！[点击我！](http://www.dmxzone.com/go/4937/php-nested-loop-tutorial/)

* * *

固定for循环

```
 for ($i=1; $i <= $seats; $i++){
            echo '<option value="' . $i . '">' . $i . '</option>';
        } 
```

条件`$i = $seats`不是比较（它是赋值），仅当 $seats 为零时返回 false，对于每个条件，它将返回 true，并且在每次迭代后，值`$i`将设置为`$seats`

比较的正确方法是

```
$i != $seats  // not equals
$i == $seats  // equals
$i > $seats  // greater than
$i < $seats  // less than
$i >= $seats  // greater then or equal
$i <= $seats  // less then or equal 
```

* * *

```
 $result = mysql_query("SELECT `alias`, `max_seats` FROM `rsvp` WHERE `id` = '$id' ");
        $alias = $r['alias'];
        $seats = $r['max_seats'];

        while($r = mysql_fetch_array($result))
        {
            echo '<h3>Welcome, ' . $alias . '. Please complete your RSVP</h3>';
            echo '<form class="register" method="post">'; 
            echo '<input type="radio" id="responded" name="responded" value="1">Attending (confirm details in the next step)<br />';
            echo '<input type="radio" id="responded" name="responded" value="0"><em><strong>NOT</strong></em> Attending (we\'re sorry you can\'t make it!)<br /><div class="hide" id="hide1">';
            echo '<p>Please select the number of seats you\'d like to confirm (' . $seats . ' seats maximum)</p>';
            echo '<label for="seats">Seats</label>';
            echo '<select name="seats" id="seats">';
            for ($i=1; $i <= $seats; $i++){
                echo '<option value="' . $i . '">' . $i . '</option>';
            }   
            echo '</select> <input type="text" placeholder="How many Chicken?"></input><br />';
            echo '<input type="text" placeholder="How many Beef?"></input><br /></div>';
            echo '<input type="reset" value="Clear"><input type="submit" value="Submit"></form>';
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T07:23:45.700

是的..您可以在while循环中使用for循环。在您的代码中，您在 for 循环中缺少一个 $ 。它应该只是这样。您还需要在 for 循环中编写条件。

```
for ($i=1; $i==$seats; $i++){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T07:25:08.087

这是正确的，请检查一次............

```
$result = mysql_query("SELECT `alias`, `max_seats` FROM `rsvp` WHERE `id` = '$id' ");

        while($r = mysql_fetch_array($result)){
            $alias = $r['alias'];
            $seats = $r['max_seats'];
            echo '<h3>Welcome, ' . $alias . '. Please complete your RSVP</h3>';
            echo '<form class="register" method="post">'; 
            echo '<input type="radio" id="responded" name="responded" value="1">Attending (confirm details in the next step)<br />';
            echo '<input type="radio" id="responded" name="responded" value="0"><em><strong>NOT</strong></em> Attending (we\'re sorry you can\'t make it!)<br /><div class="hide" id="hide1">';
            echo '<p>Please select the number of seats you\'d like to confirm (' . $seats . ' seats maximum)</p>';
            echo '<label for="seats">Seats</label>';
            echo '<select name="seats" id="seats">';
            for ($i=1; $i=$seats; $i++){
                echo '<option value="' . $i . '">' . $i . '</option>';
            }   
            echo '</select> <input type="text" placeholder="How many Chicken?"></input><br />'; 
```

# specflow - 我可以编辑 specflow 的 feature.cs 文件吗？

> ID：14517180
> 
> 赞同：1
> 
> 时间：2013-01-25T07:20:03.923
> 
> 标签：specflow

我正在尝试在 specflow 中为 Feature.cs 文件创建一个构造函数。但是当我尝试调试时行为异常。有没有办法为此 feature.cs 文件创建构造函数？或者我们不能编辑这个文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:46:46.827

编辑此文件没有意义，因为每次修改 xxx.feature 时都会覆盖它。

但是 xxx.feature.cs 中的类被声明为部分的，因此您可以使用类似的部分类声明将 xxx.anythingYouLike.cs 添加到您的解决方案中，例如`public partial class xxxFeature`并在那里添加您喜欢的任何代码。

我并不是说这是一种好的做法，但它可能很有用。

# javascript - Chrome 扩展中的异常处理

> ID：14517184
> 
> 赞同：16
> 
> 时间：2013-01-25T07:20:19.517
> 
> 标签：javascript, google-chrome-extension

我似乎在 Chrome 扩展文档中找不到任何关于异常处理的内容。所有的异步 api 都使得在不到处乱扔 try / catch 语句的代码中变得非常困难..

如何将全局异常处理程序添加到我的后台页面，以便在发生异常时进行一些资源清理？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-11-15T09:22:04.713

您可以使用以下命令在执行脚本回调中获取错误[`chrome.runtime.lastError`](https://developer.chrome.com/extensions/runtime#property-lastError)：

```
chrome.tabs.executeScript(tabId, details, function() {
    if (chrome.runtime.lastError) {
       var errorMsg = chrome.runtime.lastError.message
       if (errorMsg == "Cannot access a chrome:// URL") {
           // Error handling here
       }
    }
}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-15T21:36:27.037

我无法找到全局错误处理程序，但我能够提出一个同样有效的解决方案。

它确实取决于您调用的方法。我的大部分错误来自调用`chrome.tabs.executeScript()`页面`chrome://`或 chrome webstore 页面。此函数的最后一个参数是一个包含`results`数组的回调。我发现如果这是`undefined`我收到的错误消息。通过这种方式，我能够设置一个简单的错误处理功能，以便在出现错误时通知用户。

```
chrome.tabs.executeScript(null, {file: '/path/to/file.js'}, function(results) {
    if (results === undefined) {
        // Fire error handling code
    }
}); 
```

同样，Idk 如果这适用于您调用的方法，但我能够以这种方式做我想做的事。

# eclipse - Git分支搞砸了

> ID：14517186
> 
> 赞同：1
> 
> 时间：2013-01-25T07:20:23.703
> 
> 标签：eclipse, git, github, git-branch, egit

我在 Eclipse Mac 和 PC 上使用 Egit 来同步具有三个分支的项目：

```
master
dev
rendersystem 
```

我在 Mac 上创建了项目，当我创建两个分支**dev**和**rendersystem**时，我使用**revs/heads/master**作为 Source ref 和 Pull 策略，我使用了 Merge。

现在我已经切换到我的 PC 并使用 Egit incl 导入了项目。所有三个分支。但是，如果我更改为**dev**或**rendersystem**分支，它会告诉我这些分支是远程跟踪的（在分支对话框中，远程跟踪 /origin/dev 和 /orginin/rendersystem）。

如果我检查**dev**或**rendersystem**分支并更改我的代码，然后提交它并尝试将其推送到 Github，它不会推送**dev**或**rendersystem**分支，只会推送它推送的**master**。

我现在的问题是：如何更改**dev**和**rendersystem**分支，使它们处于可以从 Mac 和 PC 推送到 Github 的状态？

对不起，如果这个问题听起来令人困惑，但 Git 对初学者来说是一个令人困惑的地狱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:36:46.640

远程跟踪分支在 git 中是只读的，因为它们代表远程更改。Fetch 只会更新这些远程跟踪分支。Pull 首先执行 Fetch，然后将更改与本地可编辑分支合并。

在源计算机上不需要创建这个分支，因为它是在本地初始化的，推送分支可以创建远程分支。

您可以通过在 Git Repositories 视图中右键单击 Remote 分支，然后选择 Create branch... 从远程分支创建本地分支。之后，您的分支将是可写的。

# javascript - 防止用户通过调试器更改 websql 中的数据

> ID：14517188
> 
> 赞同：0
> 
> 时间：2013-01-25T07:20:31.380
> 
> 标签：javascript, security, google-chrome, firefox

您如何确保用户无法通过 firefox 或 chrome 的调试器更改 websql 数据库数据？目前我可以运行查询来插入、更新和删除数据。

这对应用程序的安全性有何影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:36:08.377

为每一行生成校验和。想要更多安全吗？在服务器上生成校验和，并在服务器上进行验证。但这样做会很慢。或者您可以在客户端生成校验和，将其保存在服务器上，稍后进行验证。

# java - 休眠中的 BLOB

> ID：14517191
> 
> 赞同：1
> 
> 时间：2013-01-25T07:20:40.903
> 
> 标签：java, hibernate

我需要将图像存储在数据库中，因此我决定使用表格设计来容纳它。桌子设计是

```
FILE_ID INT,
FILE_NAME VARCHAR(200),
FILE_CONTENTS BLOB. 
```

我正在使用 Oracle 数据库。我认为 Oracle 支持最多 2 GB 的 BLOB 存储。我使用休眠作为 JPA 提供程序。模型类使用 Hibernate 注释进行注释，其中 blob 字段使用 byte[]（字节数组类型）。如果图像大小只有几兆字节，那么休眠可以将内容带入内存。如果内容的大小超过了jvm的大小，那么hibernate是如何完成将内容带入内存的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:32:48.650

不要将`byte`数组用于这些目的。使用 sql`Blob`类型，并使用`streams`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T07:26:58.603

Hibernate 将无法将内容拉到内存中，因为没有足够的内存可以将其拉到内存中。您最终会遇到 OutOfMemoryException。

# c - C 可以实现为混合语言吗？

> ID：14517193
> 
> 赞同：-1
> 
> 时间：2013-01-25T07:20:51.463
> 
> 标签：c, compiler-construction

> **可能重复：**
> [在 JVM 之上运行/解释 C？](https://stackoverflow.com/questions/421951/running-interpreting-c-on-top-of-the-jvm)

我所说的混合语言是指由混合编译器（如Java）编译的语言。我知道这是不切实际的，因为 C 旨在轻松映射到机器指令，但我不知道是否有任何原因无法为它编写混合编译器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:29:36.377

许多体系结构都存在 C 编译器。Java 使用的字节码可能可以简单地看作只是一个指令集，那么为什么不可能呢？指针可能不是“真正的指针”，而是一些内部 VM 引用。

曾经是 axiomsol 提供的商业编译器，但现在所有指向它的链接都显示为死 (404)。

将 C 编译成 Java 代码然后编译 Java 是可能的，但许多人认为似乎确实以次优方式解决了问题。使用 byte[]，您甚至无法一次读取整数。C 可能会受益于它自己的更简单的虚拟机（因为不需要垃圾收集器）。或者，至少，C 必须直接编译成字节码。谁知道 C 可以研究一下[JamVM](http://jamvm.sourceforge.net/)项目，它可能会提供一个有趣的开始。它是一个运行 Java 字节码的简单虚拟机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:57:18.677

创建一个专为运行 C 设计的自定义虚拟机当然可以工作，并且工作得非常好，许多字节码指令与真实 CPU 指令的 1-1 映射，因此也可以轻松快速[地进行 JIT](http://en.wikipedia.org/wiki/Just-in-time_compilation)。实际上，例如[LLVM](http://en.wikipedia.org/wiki/Low_Level_Virtual_Machine)实际上非常像这样。

以 JVM 为目标的 C 编译器可能需要使 C 堆成为 Java byte[] 数组，并且指针将成为该数组的索引。堆栈中的 C 变量也可能需要使用模拟的 byte[] 堆栈来完成，因为必须有可能获得指向它们的指针（与堆指针兼容）。

这是必需的，因为使用直接 Java 引用，不可能在 C 中进行指针算术和整数指针强制转换。优化这一点的一种选择是使 C char 为 32 位，这是 C 标准所允许的，但它会使 C 实现很难用于处理例如文本文件或任何真正带有字节数据的东西......无论如何，编译成 Java 字节码的 C 会非常慢，因为 Java 字节码不能“本机”做很多 C 的事情用单字节码指令。

# c# - 二维数组，程序崩溃

> ID：14517203
> 
> 赞同：2
> 
> 时间：2013-01-25T07:21:49.630
> 
> 标签：c#, multidimensional-array

这是一段来自使用二维数组的 C# 项目的代码。出于某种原因，我不明白我的程序可以完美编译，但在运行时它会崩溃。

```
public class Tile_Info
{
  public int id;

  public Tile_Info(int _id)
  {
    id = _id;
  }
}

class Program
{

  public static void Main(string[] args)
  {
    int width = 20;
    int height = 30;

    Tile_Info[,] my_tile;
    my_tile = new Tile_Info[width, height];

    for(int y = 0; y < height; y++)
    {
      for(int x = 0; x < width; x++)
      {
        my_tile[x, y].id = 0;
      }
    }
  }
} 
```

根据调试器，这是因为“对象引用未设置为对象的实例”，但我很确定这是我在这里所做的：`my_tile = new Tile_Info[width, height];`.

任何人都可以告诉什么是错的？谢谢您的支持！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T07:24:05.137

数组的创建不会创建对象本身，就像停车场的创建不会创建停在那里的汽车一样。

您仍然需要自己创建对象。改变

```
my_tile[x, y].id = 0; 
```

到

```
my_tile[x, y] = new Tile_Info(0); 
```

这仅在使用引用类型 ( `class`) 时发生，因为存储在数组中的是对实例的引用，而不是实例本身。在较低级别上，这（或多或少）意味着尚未分配实例的内存，只是用于其引用的内存，因此您必须`new`启动一个实例来初始化它。另一方面，如果`Tile_Info`是值类型 ( `struct`)，则数组将包含实际实例，并且`new Tile_Info[width, height]` 会将分配的内存初始化为有效的开始状态（全为零），这正是值类型的默认无参数构造函数所做的.

因此，如果您像这样定义 Tile_Info：

```
public struct Tile_Info
{
  public int id; // this should be a property, public fields are baaad
  public Tile_Info(int _id){ id = _id;}
} 
```

两者都是合法的`my_tile[x, y].id = 0`。`my_tile[x, y] = new Tile_Info(0)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T07:28:29.110

您已经通过第一个新关键字创建了一个新的 2D Tile_Info 数组。

您只创建了一个可以保存 Tile_Info 类型项目的空数组。创建单个项目并将它们放入数组中是您的工作。

# c# - Linq 查询从两个表中获取不同的记录

> ID：14517206
> 
> 赞同：3
> 
> 时间：2013-01-25T07:22:04.753
> 
> 标签：c#, linq, sqlite, linq-to-sql, inner-join

我有两个表 - tblExpenses 和 tblCategories 如下

# tbl费用

```
ID (PK),
Place,
DateSpent,
CategoryID (FK) 
```

# tbl类别

```
ID (PK),
Name 
```

我尝试了各种 LINQ 方法来从上述两个表中获取所有不同的记录，但没有取得多大成功。我尝试使用 UNION 和 DISTINCT 但它没有用。

上述两个表在我的项目的模型部分中定义，这反过来将在 SQLite 中创建表。我需要从两个表中检索所有不同的记录以在 gridview 中显示值。

请为我提供一些输入以完成此任务。我做了一些研究来找到这个问题的答案，但似乎没有什么接近我想要的。如果我重复了这个问题，请原谅。

这是我尝试过的 UNION, DISTINCT 方法：

# DISTINCT # ==> 给我重复的价值观

```
(from exp in db.Table<tblExpenses >()
                                   from cat in db.Table<tblCategory>()                                       
                                   select new { exp.Id, exp.CategoryId, exp.DateSpent, exp.Expense, exp.Place, cat.Name }).Distinct(); 
```

# UNION # ==> 使用 UNION 时出错

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T07:32:16.013

我认为当你加入两张桌子时，工会已经做了不同的事情，你可以尝试类似的东西

```
 var query=(from c in db.tblExpenses select c).Concat(from c in 
            db.tblCategory select c).Distinct().ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T08:19:52.307

您将始终获得`DISTINCT`记录，因为您也在选择`tblExpenses.ID`。（*除非有多个类别具有相同的 ID。但这当然是非常非常糟糕的设计。*）

请记住，`JOIN`在 LINQ 中创建时，字段名称和数据类型应该相同。是领域`tblExpenses.CategoryID`是可为空的字段吗？

如果是这样，试试这个`JOIN`：

```
db.Table<tblExpenses>()
.Join(db.Table<tblCategory>(), 
       exp => new { exp.CategoryId }, 
       cat => new { CategoryId = (int?)cat.ID }, 
       (exp, cat) => new { 
                           exp.Id, 
                           exp.CategoryId, 
                           exp.DateSpent, 
                           exp.Expense, 
                           exp.Place, 
                           cat.Name 
                         })
.Select(j => new { 
                   j.Id, 
                   j.CategoryId, 
                   j.DateSpent, 
                   j.Expense, 
                   j.Place, 
                   j.Name 
                 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T07:46:34.487

您可以尝试以下查询：

SELECT **DISTINCT**查询如下：

```
SELECT DISTINCT Name FROM tblCategory INNER JOIN tblExpenses ON tblCategory.categoryID = tblExpenses.categoryID; 
```

将结果限制为输出字段中的唯一值。查询结果不可更新。

或

这样的**SELECT DISTINCTROW**查询：

```
SELECT DISTINCTROW Name FROM tblCategory INNER JOIN tblExpenses ON tblCategory.categoryID = tblExpenses.categoryID;<br/><br/> 
```

查看整个基础表，而不仅仅是输出字段，以查找唯一行。

参考：[http ://www.fmsinc.com/microsoftaccess/query/distinct_vs_distinctrow/unique_values_records.asp](http://www.fmsinc.com/microsoftaccess/query/distinct_vs_distinctrow/unique_values_records.asp)

# c# - 异步添加元素到列表

> ID：14517210
> 
> 赞同：4
> 
> 时间：2013-01-25T07:22:18.683
> 
> 标签：c#, asp.net, asynchronous

我在 Asp.net C# **、.net 3.5中遇到问题**

我有以下代码：

```
List<object> objectList = new List<object>();

foreach(var item in listItem)
{
  object obj = getData (item);
  objectList.add(obj);
}
Console.Write("Finish all"); 
```

每次`getData (item);`触发大约需要1s；

我希望所有项目`ListItem`同时运行（这里是`getData(item)`），然后在 foreach 完成`Console.write("Finish all")`.

我怎样才能做到这一点？任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:18:57.670

您可以使用[ThreadPool](http://msdn.microsoft.com/en-us/library/system.threading.threadpool%28v=vs.90%29.aspx)和[ManualResetEvent](http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent%28v=vs.90%29.aspx)：

```
int itemCount = listItem.Length;
List<object> objectList = new List<object>();
ManualResetEvent[] resetEvents = new ManualResetEvent[itemCount];

for (int i = 0; i < itemCount; i++)
{
    var item = listItem[i];

    resetEvents[i] = new ManualResetEvent(false);
    ThreadPool.QueueUserWorkItem(new WaitCallback((object index) =>
    {
        object obj = getData(item);

        lock (objectList)
            objectList.add(obj);

        resetEvents[(int)index].Set();
    }), i);
}

WaitHandle.WaitAll(resetEvents);
Console.Write("Finish all"); 
```

ThreadPool 将在后台运行任务，当前线程将等待所有工作人员完成 ManualResetEvent。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T07:47:29.507

使用 Parallel.ForEach / For 异步执行所有项目的 getData。Paralle.ForEach / For 在所有迭代完成之前不会返回。

既然您添加了有关使用 .net 3.5 的评论，我的答案可能会被省略。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T07:51:06.557

您好，只需运行此控制台应用程序代码并使用 foreach 和 Parallel.Foreach 比较结果。基本上并行在长时间运行的任务或那些消耗太多时间的任务中很有用。

```
using System;
using System.Collections.Generic;
using System.Globalization;
using System.IO;
using System.Linq;
using System.Net;
using System.Text;
using System.Threading;
using System.Threading.Tasks;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            List<object> objectList = new List<object>();
            var listItem = new List<Person> { new Person { Id = 1, Name = "Person 1" }, new Person { Id = 2, Name = "Person 2" }, new Person { Id = 3, Name = "Person 3" } , new Person { Id = 4, Name = "Person 4" } };
            var start = DateTime.Now;
            var parallelList = listItem;
            //using foreach
            foreach (var item in listItem)
            {
                object obj = getData(item);
                objectList.Add(obj);
            }
            var end = DateTime.Now.Subtract(start).TotalSeconds;
            Console.Write("\nUsing foreach...Finish all in " + end + " second \n");

            start = DateTime.Now;
            //using Parallel
            Parallel.ForEach(parallelList, item =>
            {
                object obj = getData(item);
                objectList.Add(obj);
            });
            end = DateTime.Now.Subtract(start).TotalSeconds;
            Console.Write("Using Parallel...Finish all in "+ end +" second");
            Console.ReadLine();
        }

        private static object getData(Person item)
        {
            Thread.Sleep(1000);
            return "Test Object " + item.Id;
        }
    }
    public class Person
    {
        public int Id { get; set; }
        public string Name { get; set; }
    } 
```

**输出**

![在此处输入图像描述](../Images/7be9a319d74c52027a4ec5e00d3a8e54.png)

# php - 获取 url 重定向时 File_get_contents() 不起作用

> ID：14517211
> 
> 赞同：3
> 
> 时间：2013-01-25T07:22:25.080
> 
> 标签：php, file-get-contents

我正在使用的功能是：

```
function http_post ($url, $data)
{
$data_url = http_build_query ($data);
$data_len = strlen ($data_url);
date_default_timezone_set('America/New_York');

return array ('content'=>file_get_contents ($url, false
    , stream_context_create (array ('http'=>array (
    'method'=>'GET', 
    'header'=>"Connection: close\r\nContent-Length: $data_len\r\nContent-type: application/x-www-form-urlencoded\r\n", 
    'content'=>$data_url
    )))), 
    'headers'=>$http_response_header
    );
} 
```

电话是：

```
http_post('http://www.wunderground.com/cgi-bin/findweather/getForecast/', array('airportorwmo'=>'query','historytype'=>'DailyHistory','backurl'=>"/history/index.html",'code'=>"$myCode",'month'=>"$myMonth",'day'=>"$myDay",'year'=>"$myYear")); 
```

原始表单位于以下页面，但我在调用中使用表单的操作页面：

```
wunderground.com/history/ 
```

最终我想从重定向页面获取内容，例如：

```
http://www.wunderground.com/history/airport/CWTA/2013/1/24/DailyHistory.html?req_city=McTavish&req_state=QC&req_statename=Quebec&MR=1 
```

然而，如上所述，表格采用不同的元素，即代码、月、日、年。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T07:50:05.063

为什么不[`cURL`](http://php.net/manual/en/book.curl.php)呢？

```
function http_post ($url, $data)
{
    $data_url = http_build_query ($data);
    $data_len = strlen ($data_url);
    date_default_timezone_set('America/New_York');
    $curl = curl_init($url);
    curl_setopt_array(array(
        CURLOPT_RETURNTRANSFER => true,
        CURLOPT_FOLLOWLOCATION => true,
    ));

    $content = curl_exec();

    curl_close($curl);

    return array (
        'content' => $content,
        'headers' => $http_response_header,
    );

 } 
```

此外，您的函数已命名`post`，但您正在`GET`请求

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-25T07:43:34.307

试试下面的功能

```
function http_post ($url, $data)
{
    $data_url = http_build_query ($data);
    $data_len = strlen ($data_url);
   date_default_timezone_set('America/New_York');

   return array ('content'=>file_get_contents ($url, true
, stream_context_create (array ('http'=>array (
'method'=>'GET', 
'header'=>"Connection: close\r\nContent-Length: $data_len\r\nContent-type: application/x-www-form-urlencoded\r\n", 
'content'=>$data_url
)))), 
'headers'=>$http_response_header
);

 } 
```

# sql - 选择每个客户的最短预订日期

> ID：14517213
> 
> 赞同：0
> 
> 时间：2013-01-25T07:22:28.093
> 
> 标签：sql, sql-server, tsql

我有 2 张桌子，`CustomerMaster`, `EntBookings`，现在对于每个客户，我在`EntBookings`表格中记录了他们的每个预订。我想要的是，找出所有客户的第一个预订日期。

我试过的，

```
SELECT cm.CustomerCode,
       cm.CustomerName,
       MIN(eb.BookingDate) OVER(PARTITION BY eb.BookingByCustomer)
FROM   EntBookings eb
       INNER JOIN CustomerMaster cm
            ON  cm.CustomerCode = eb.BookingByCustomer
GROUP BY
       cm.CustomerCode,
       cm.CustomerName,
       eb.BookingByCustomer,
       eb.BookingDate 
```

它给出的结果为

```
Cust1   ABC     2013-01-24 00:00:00.000
Cust2   ABCD    2013-01-24 00:00:00.000
Cust2   ABCD    2013-01-24 00:00:00.000
Cust3   BCD     2013-01-25 00:00:00.000
Cust4   BCDE    2013-01-24 00:00:00.000
Cust7   DEF     2013-01-02 00:00:00.000 
```

我不知道为什么`Cust2`，它显示 2 行？我怎样才能让它只返回一行？

如果我这样做..

```
SELECT cm.CustomerCode,
       cm.CustomerName,
       MIN(eb.BookingDate) OVER(PARTITION BY eb.BookingDate)
FROM   EntBookings eb
       INNER JOIN CustomerMaster cm
            ON  cm.CustomerCode = eb.BookingByCustomer
GROUP BY
       cm.CustomerCode,
       cm.CustomerName,
       eb.BookingByCustomer,
       eb.BookingDate 
```

我明白这个...

```
Cust7   DEF     2013-01-02 00:00:00.000
Cust1   ABC     2013-01-24 00:00:00.000
Cust2   ABCD    2013-01-24 00:00:00.000
Cust4   BCDE    2013-01-24 00:00:00.000
Cust3   BCD     2013-01-25 00:00:00.000
Cust2   ABCD    2013-02-13 00:00:00.000 
```

在这种情况下，虽然我仍然得到 2 行`Cust2`，但日期是错误的，它应该是`2013-01-24 00:00:00.000`（如第一种情况），但返回 2 行。因此，这两个查询都不正确。谁能帮我弄清楚我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:26:27.183

你把事情复杂化了，你分组太多了。您似乎只想对客户代码和名称进行分组。

```
SELECT 
     cm.CustomerCode, 
     cm.CustomerName, 
     MIN(eb.BookingDate) 
 FROM 
      EntBookings eb
 JOIN
      CustomerMaster cm     ON       
       cm.CustomerCode = eb.BookingByCustomer
 GROUP BY
       cm.CustomerCode, cm.CustomerName 
```

# c# - 如何将我们自己的集合绑定到pivotviewer

> ID：14517215
> 
> 赞同：0
> 
> 时间：2013-01-25T07:22:30.057
> 
> 标签：c#, pivotviewer, cxml-collectionxml

我正在尝试创建简单的 PivotViewer 应用程序，它将我的图像集合绑定到 PivotViewer 中。我在文件夹中创建了图像`collection.xml`文件`clientbin`。为了绑定这个集合，我编写了以下代码`mainpage.xaml.cs`

```
pviewer.LoadCollection("http://localhost:32768/pivotcontrol.Web/ClientBin/collection.xml", null); 
```

但是，每当我尝试调试应用程序时，它都会加载但只是显示集合的 URL，而从未实际构建 PivotViewer。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T13:29:30.413

在看起来您正在使用的 PivotViewer 的原始 SL4 版本中，从调试器运行它时存在错误。您需要确保 Web 项目是启动项目而不是 SL 项目。

希望这会照顾它。如果不是，那么您的 cxml 文件中很可能有错误。

# android - 将滚动视图添加到 Edditext

> ID：14517218
> 
> 赞同：0
> 
> 时间：2013-01-25T07:22:35.267
> 
> 标签：android, android-edittext, scrollview

我有一个输入框 - android中的edittext，它不是单行。我希望当三行完成时，edittext 应该停止扩展，并且滚动视图应该在那个时候附加到 edittext。

我可以直接添加滚动视图吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T07:30:14.583

像这样试试

```
 <EditText
    android:id="@+id/users_first_name" 
    android:layout_height="fill_parent" 
    android:layout_width="fill_parent" 
    android:hint="First"
    android:focusable="true"
    android:inputType="textPersonName"
    android:enabled="true"
    android:maxLines="3"
   >
    </EditText> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T07:24:05.837

用于`android:maxLines="3"`您`EditText`在 xml 中的标记。

# android - 在 Eclipse 中为 android 项目使用生成 javadoc 时出错

> ID：14517222
> 
> 赞同：0
> 
> 时间：2013-01-25T07:22:46.873
> 
> 标签：android, javadoc

我尝试了许多可用的解决方案，但无法为我的 android 项目创建 javadoc。检查了以下内容： [解决方案 1](https://stackoverflow.com/questions/2101867/generate-a-javadoc-for-my-android-project) [解决方案 2](https://stackoverflow.com/questions/2818204/how-to-generate-links-to-the-android-classes-reference-in-javadoc)

但我得到以下错误为所有包和类构建树...

```
java.lang.NullPointerException
at com.sun.tools.javadoc.TypeMaker.getType(TypeMaker.java:83)
at com.sun.tools.javadoc.TypeMaker.getType(TypeMaker.java:44)
at com.sun.tools.javadoc.ClassDocImpl.superclassType(ClassDocImpl.java:496)..... 
```

还尝试了 ant 命令工具 ant -f javadoc.xml

但是控制台最后一个输出上没有输出是空指针异常和“BUILD SUCCESSFUL”但没有在dest文件夹中生成文件...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:54:17.983

我得到了解决方案

将以下行添加到 javadoc.xml 对我有用

```
classpath="D:\AndroidEclipse\android-sdks\platforms\android-8\android.jar;libs/GraphView-3.0.jar..... 
```

我刚刚添加了 android.jar 文件的路径并执行了 ant -f javadoc.xml 命令，我的文档已经创建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-20T12:06:22.357

如果要从 eclipse 创建 java doc，请将 android.jar 添加到项目的 lib 文件夹中。然后转到 Project .. 生成 javadoc。这对我有用。

# java - 致命异常：UpdateThread，空指针异常

> ID：14517226
> 
> 赞同：-1
> 
> 时间：2013-01-25T07:23:07.873
> 
> 标签：java, android, eclipse, sqlite, andengine

我为一个游戏做了三个活动：

1\. `gameActivity` -- 从 databaseActivity 调用方法来更新分数 2\. --- 从 3`databaseActivity` 调用 update 方法。 --- 有更新方法`dataHelperActivity``dataHelperActivity`

> 无法调用 datahelper `databaseActivity`，正在获取`NullPointerException`.

```
01-25 12:22:38.352: E/AndroidRuntime(2869): FATAL EXCEPTION: UpdateThread
01-25 12:22:38.352: E/AndroidRuntime(2869): java.lang.NullPointerException
01-25 12:22:38.352: E/AndroidRuntime(2869):     at com.snakegame.database.SnakeDatabase.manipulateCurrency(SnakeDatabase.java:1597)
01-25 12:22:38.352: E/AndroidRuntime(2869):     at com.snakegame.classic_mode.SnakeGameWithLevelActivity$16.run(SnakeGameWithLevelActivity.java:1779)
01-25 12:22:38.352: E/AndroidRuntime(2869):     at org.andengine.engine.handler.runnable.RunnableHandler.onUpdate(RunnableHandler.java:42)
 01-25 12:22:38.352: E/AndroidRuntime(2869):    at org.andengine.engine.Engine.onUpdateUpdateHandlers(Engine.java:596)
 01-25 12:22:38.352: E/AndroidRuntime(2869):    at org.andengine.engine.Engine.onUpdate(Engine.java:585)
 01-25 12:22:38.352: E/AndroidRuntime(2869):    at org.andengine.engine.Engine.onTickUpdate(Engine.java:548)
01-25 12:22:38.352: E/AndroidRuntime(2869):     at org.andengine.engine.Engine$UpdateThread.run(Engine.java:820)
01-25 12:22:38.398: D/AndEngine(2869): SnakeGameWithLevelActivity.onPause @(Thread: 'main')
01-25 12:27:38.398: I/Process(2869): Sending signal. PID: 2869 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:43:19.220

将此添加到您的清单文件中

```
<activity
        android:name="databaseActivity"
        android:label="@string/title" > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T07:27:23.090

我认为这是问题所在。在调用`DatabaseHelper`类时，将当前的实例传递`Activity`给它，如下所示：

```
 DataBaseHelper myDbHelper = new DataBaseHelper(this); //Here this is the instance of the current activity 
```

# javascript - 我如何设置 Angular js 服务

> ID：14517229
> 
> 赞同：3
> 
> 时间：2013-01-25T07:23:14.190
> 
> 标签：javascript, model-view-controller, rest, frameworks, angularjs

我正在构建一个应用程序来管理员工奖励计划，我想我会尝试学习一些我经常听到的这些新的 js 框架，所以我决定查看 Angular。现在我希望实际使用过这个框架的人可以帮助为我构建一个快速示例。

我现在坚持的是如何制作复杂的角度模型和服务以使其与 REST 后端保持同步。

我不知道如何正确表达，但是..我希望有一个员工（模型？）有一个帐户（另一个模型？）并且该帐户将有很多交易（模型？）至少我就是这样我的数据库现在设置好了。账户和交易数据就像员工可以获得奖金的银行账户。员工、账户和交易位于 URI，例如[http://api.mydomain.com/employees](http://api.mydomain.com/employees) /accounts /transactions

我已经知道数据绑定和交互是如何工作的，并且我已经能够使用 $http 服务从我的服务器成功获取 JSON 数据，但它正在监视模型的更改、验证并与拥有的后端服务器保持同步我难住了。

所以我真的很感激任何帮助让球滚动:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T09:04:21.760

如果您想使用 angular.js 构建一个“纯”RESTful 应用程序，该应用程序为后端的每个端点创建一个关联的模型在前端，然后在端点创建、读取、更新和删除资源应该使用[`$resource`](http://docs.angularjs.org/api/ngResource.%24resource)插入的插件`$http`。

[这](http://www.bennadel.com/blog/2433-Using-RESTful-Controllers-In-An-AngularJS-Resource.htm)是一篇帮助您入门的文章。

# javascript - 当按钮在 HTML 中处于活动状态时向按钮添加提示

> ID：14517232
> 
> 赞同：0
> 
> 时间：2013-01-25T07:23:31.850
> 
> 标签：javascript, html, css, button, tooltip

![在此处输入图像描述](../Images/7e4195eff4df46db59e6829dfb42aac4.png)

![在此处输入图像描述](../Images/cabe38a67ad3e661425b42f4791ca166.png)

如何在第二张图片处于活动状态时为其添加提示。我试过这个[例子](http://www.red-team-design.com/css3-tooltips)来显示提示，但我没有帮助我的要求。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:32:39.547

尝试这个

**HTML**

```
<div id="pointed"> Arrow </div> 
```

**CSS**

```
#pointed {
    position: relative;
    margin: 0 auto;
    width: 200px;
    height: 200px;
    background-color: black;color:white
}

#pointed::after {
    position: absolute;
    top: 100%;
    left: 30%;
    content: '';
    width: 0;
    height: 0;
    border-top: solid 10px black;
    border-left: solid 10px transparent;
    border-right: solid 10px transparent;
} 
```

**[演示](http://jsfiddle.net/Mqat9/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:01:01.223

```
try this

<div id="pointed"> <a href="#">Arrow </a></div>

#pointed {
position: relative;
margin: 0 auto;
width: 200px;
height: 200px;
background-color: black;color:white
          }

#pointed:active::after {
position: absolute;
top: 100%;
left: 45%;
content: '';
width: 0;
height: 0;
border-top: solid 10px black;
border-left: solid 10px transparent;
border-right: solid 10px transparent;
} 
```

# web-services - 停止循环，直到在 wp7 中获得服务结果

> ID：14517236
> 
> 赞同：1
> 
> 时间：2013-01-25T07:23:52.913
> 
> 标签：web-services, for-loop, windows-phone

我是 Windows Phone 开发的新手。

我正在使用 for 循环为列表中的每个元素调用 web 服务。我想只有在获得服务结果后才能进入下一个循环。我的循环是这样的：

```
for (int i = 0; i < count; i++)
        {
            selectedInfo = lstReorderItems[i];
            if (string.IsNullOrEmpty(selectedInfo.ItemCostVariantValueIDs))
            {
                client.AddItemstoCartCompleted += client_AddItemstoCartCompleted;
                client.AddItemstoCartAsync(//params);
            }
            else
            {
                client.CheckItemQuantityInCartCompleted += client_CheckItemQuantityInCartCompleted;
                client.CheckItemQuantityInCartAsync(//params);
            }
        } 
```

但循环继续，无需等待结果的到来。那么有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T06:18:08.147

经过这个问题后，我的理解是，您正在进行**系列网络服务调用**。我认为**这不好**，因为要获得最终结果，用户必须等待，直到所有服务调用完成并且有**机会在中途获得失败响应**，这也会阻塞最终结果。所以去并行调用，以支持 WebClient 设计有后台选项。

如果完全有必要，则将循环变量声明为类成员

```
Public class xxxxxx
{
  int i = (startCount ) 0; 
```

然后像往常一样启动服务，

```
 selectedInfo = lstReorderItems[i];
 if (string.IsNullOrEmpty(selectedInfo.ItemCostVariantValueIDs))
  {
        client.AddItemstoCartCompleted += client_AddItemstoCartCompleted;
        client.AddItemstoCartAsync(//params);
  } 
```

在服务响应完成事件中，在您的情况下，client_AddItemstoCartCompleted 在增加循环变量后调用相同的服务，在此之前您必须将循环变量与计数进行比较

```
if(i< count)
{
 i++;
 selectedInfo = lstReorderItems[i];
 if (string.IsNullOrEmpty(selectedInfo.ItemCostVariantValueIDs))
   {
      client.AddItemstoCartAsync(//params);
   }
} 
```

# iphone - 如何在 iPhone 中以编程方式仅使用一个 UIButton 使用 BCGenieEffect？

> ID：14517241
> 
> 赞同：0
> 
> 时间：2013-01-25T07:24:06.330
> 
> 标签：iphone, ios, objective-c, xcode, uibutton

我想在我的应用程序中使用 BCGenieEffect。我从 github 下载演示示例。 [https://github.com/Ciechan/BCGenieEffect](https://github.com/Ciechan/BCGenieEffect)

在这个例子中使用了 xib，并且 4 个 UIButtons 与 xib 一起使用。我想在没有 xib 的情况下使用此代码，并且仅用于一个按钮。我不想拖动我的视图，这就是我删除该代码的原因。

我有一个 UIButton：

```
UIButton *Pop_Hidebtn = [[UIButton alloc]initWithFrame:CGRectMake(290, 5, 15, 15)];
Pop_Hidebtn.backgroundColor = [UIColor clearColor];
[Pop_Hidebtn setImage:[UIImage imageNamed:@"close.png"] forState:UIControlStateNormal];

Pop_Hidebtn.titleLabel.textColor = [UIColor blueColor];
[Pop_Hidebtn addTarget:self action:@selector(Hidden_pop:) forControlEvents:UIControlEventTouchUpInside];  
[popup_View addSubview:Pop_Hidebtn];

-(void)Hidden_pop:(UIButton *)sender{

[self genieToRect:sender.frame edge:BCRectEdgeBottom];
}

// I modified this and it says-> UIButton may not respond to enumerateobjectsusingblock

- (void) genieToRect: (CGRect)rect edge: (BCRectEdge) edge
{
NSTimeInterval duration = 3.0;

CGRect endRect = CGRectInset(rect, 5.0, 5.0);

[help_Button enumerateObjectsUsingBlock:^(UIButton *button, NSUInteger idx, BOOL   *stop)     
{ 
help_Button.enabled = NO;
}];

if (self.viewIsIn) {

[popup_View_under2 genieOutTransitionWithDuration:duration startRect:endRect     startEdge:edge completion:^{
popup_View_under2.userInteractionEnabled = YES;

[help_Button enumerateObjectsUsingBlock:^(UIButton *button, NSUInteger idx,  BOOL  *stop) {
help_Button.enabled = YES;

}];
}];
} else {
popup_View_under2.userInteractionEnabled = NO;
[popup_View_under2 genieInTransitionWithDuration:duration destinationRect:endRect   destinationEdge:edge completion:
^{
[help_Button enumerateObjectsUsingBlock:^(UIButton *button, NSUInteger idx,  BOOL  *stop) {
button.enabled = YES;
}];}];
}
self.viewIsIn = ! self.viewIsIn;
} 
```

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T14:45:12.807

由于您在示例中只使用了一个按钮而不是四个按钮，因此您不需要`enumerateObjectsUsingBlock`按`help_Button`，就`help_Button.enabled = YES;`可以了。

# java - 如何为 Android 表示 Math.cos 或 Math.acos？

> ID：14517242
> 
> 赞同：-2
> 
> 时间：2013-01-25T07:24:09.427
> 
> 标签：java

我曾尝试在 Android 中编写此代码，结果得到 NAN。这是我当前的代码，有人可以验证这一点，如果不正确，请提供正确的方程式。

```
 Math.acos((((a*a)+(c*c))-(b*b))/(2*b*c)); 
```

![在此处输入图像描述](../Images/debf179c9a5cd3c5d9900fffbe366215.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:27:32.993

```
Math.acos((a*a+c*c-b*b)/(2.0*b*c)) 
```

2.0 用于将其转换为双精度，您也可以使用 Math.acos((a*a+c*cb*b)/(2d*b*c)) 代替，其中 2d 中的 d 表示将 int 2 视为双精度类型

# java - JSF 项目的迁移问题

> ID：14517244
> 
> 赞同：-6
> 
> 时间：2013-01-25T07:24:29.837
> 
> 标签：java, jsf, jakarta-ee, oracle-adf

请检查以下日志...有谁知道这个错误 Migrating JDEVTP4 from JDEV11.1.2.3 using ADF and JSF technology

```
Server Logs

<25 Jan, 2013 12:44:39 PM IST> <Warning> <HTTP> <BEA-101164> <User defined class com.sun.faces.application.WebappLifecycleListener is not a Listener, as it does not implement the correct interface(s).> 
<ConfigureListener> <contextInitialized> Critical error during deployment: 
com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! null
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:357)
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:226)
    at weblogic.servlet.internal.EventsManager$FireContextListenerAction.run(EventsManager.java:481)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.EventsManager.notifyContextCreatedEvent(EventsManager.java:181)
    at weblogic.servlet.internal.WebAppServletContext.preloadResources(WebAppServletContext.java:1872)
    at weblogic.servlet.internal.WebAppServletContext.start(WebAppServletContext.java:3153)
    at weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1508)
    at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:482)
    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
    at weblogic.application.internal.flow.ScopedModuleDriver.start(ScopedModuleDriver.java:200)
    at weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:247)
    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
    at weblogic.application.internal.flow.StartModulesFlow.activate(StartModulesFlow.java:27)
    at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:636)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:205)
    at weblogic.application.internal.EarDeployment.activate(EarDeployment.java:58)
    at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:161)
    at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:79)
    at weblogic.deploy.internal.targetserver.BasicDeployment.activate(BasicDeployment.java:184)
    at weblogic.deploy.internal.targetserver.BasicDeployment.activateFromServerLifecycle(BasicDeployment.java:361)
    at weblogic.management.deploy.internal.DeploymentAdapter$1.doActivate(DeploymentAdapter.java:51)
    at weblogic.management.deploy.internal.DeploymentAdapter.activate(DeploymentAdapter.java:200)
    at weblogic.management.deploy.internal.AppTransition$2.transitionApp(AppTransition.java:30)
    at weblogic.management.deploy.internal.ConfiguredDeployments.transitionApps(ConfiguredDeployments.java:240)
    at weblogic.management.deploy.internal.ConfiguredDeployments.activate(ConfiguredDeployments.java:169)
    at weblogic.management.deploy.internal.ConfiguredDeployments.deploy(ConfiguredDeployments.java:123)
    at weblogic.management.deploy.internal.DeploymentServerService.resume(DeploymentServerService.java:180)
    at weblogic.management.deploy.internal.DeploymentServerService.start(DeploymentServerService.java:96)
    at weblogic.t3.srvr.SubsystemRequest.run(SubsystemRequest.java:64)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:178)
Caused by: java.lang.NullPointerException
    at oracle.adfinternal.view.faces.unified.renderkit.UnifiedRenderKit.<init>(UnifiedRenderKit.java:125)
    at oracle.adfinternal.view.faces.unified.renderkit.UnifiedRenderKit.createRenderKit(UnifiedRenderKit.java:107)
    at oracle.adfinternal.view.faces.unified.renderkit.UnifiedRenderKitFactory.getRenderKit(UnifiedRenderKitFactory.java:59)
    at org.apache.myfaces.trinidadinternal.renderkit.CoreRenderKitFactory.getRenderKit(CoreRenderKitFactory.java:55)
    at org.apache.myfaces.trinidadinternal.renderkit.CoreRenderKitFactory.getRenderKit(CoreRenderKitFactory.java:55)
    at oracle.adfinternal.view.faces.unified.renderkit.UnifiedRenderKitFactory.getRenderKit(UnifiedRenderKitFactory.java:53)
    at com.sun.faces.config.processor.RenderKitConfigProcessor.addRenderKits(RenderKitConfigProcessor.java:240)
    at com.sun.faces.config.processor.RenderKitConfigProcessor.process(RenderKitConfigProcessor.java:159)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.ManagedBeanConfigProcessor.process(ManagedBeanConfigProcessor.java:270)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.ValidatorConfigProcessor.process(ValidatorConfigProcessor.java:120)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.ConverterConfigProcessor.process(ConverterConfigProcessor.java:126)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.ComponentConfigProcessor.process(ComponentConfigProcessor.java:117)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.ApplicationConfigProcessor.process(ApplicationConfigProcessor.java:341)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.LifecycleConfigProcessor.process(LifecycleConfigProcessor.java:116)
    at com.sun.faces.config.processor.AbstractConfigProcessor.invokeNext(AbstractConfigProcessor.java:114)
    at com.sun.faces.config.processor.FactoryConfigProcessor.process(FactoryConfigProcessor.java:216)
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:338)
    ... 37 more
<25 Jan, 2013 12:45:11 PM IST> <Warning> <HTTP> <BEA-101162> <User defined listener com.sun.faces.config.ConfigureListener failed: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! null.
java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! null
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:293)
    at weblogic.servlet.internal.EventsManager$FireContextListenerAction.run(EventsManager.java:481)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.EventsManager.notifyContextCreatedEvent(EventsManager.java:181)
    Truncated. see log file for complete stacktrace
Caused By: com.sun.faces.config.ConfigurationException: CONFIGURATION FAILED! null
    at com.sun.faces.config.ConfigManager.initialize(ConfigManager.java:357)
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:226)
    at weblogic.servlet.internal.EventsManager$FireContextListenerAction.run(EventsManager.java:481)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    Truncated. see log file for complete stacktrace
Caused By: java.lang.NullPointerException
    at oracle.adfinternal.view.faces.unified.renderkit.UnifiedRenderKit.<init>(UnifiedRenderKit.java:125)
    at oracle.adfinternal.view.faces.unified.renderkit.UnifiedRenderKit.createRenderKit(UnifiedRenderKit.java:107)
    at oracle.adfinternal.view.faces.unified.renderkit.UnifiedRenderKitFactory.getRenderKit(UnifiedRenderKitFactory.java:59)
    at org.apache.myfaces.trinidadinternal.renderkit.CoreRenderKitFactory.getRenderKit(CoreRenderKitFactory.java:55)
    at org.apache.myfaces.trinidadinternal.renderkit.CoreRenderKitFactory.getRenderKit(CoreRenderKitFactory.java:55)
    Truncated. see log file for complete stacktrace
> 
<FactoryFinder$FactoryManager> <getFactory> Application was not properly initialized at startup, could not find Factory: javax.faces.application.ApplicationFactory. Attempting to find backup.
<ConfigureListener> <contextDestroyed> Unexpected exception when attempting to tear down the Mojarra runtime
java.lang.IllegalStateException: Could not find backup for factory javax.faces.application.ApplicationFactory. 
    at javax.faces.FactoryFinder$FactoryManager.getFactory(FactoryFinder.java:996)
    at javax.faces.FactoryFinder.getFactory(FactoryFinder.java:331)
    at com.sun.faces.config.InitFacesContext.getApplication(InitFacesContext.java:131)
    at com.sun.faces.config.ConfigureListener.contextDestroyed(ConfigureListener.java:329)
    at weblogic.servlet.internal.EventsManager$FireContextListenerAction.run(EventsManager.java:482)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:120)
    at weblogic.servlet.internal.EventsManager.notifyContextDestroyedEvent(EventsManager.java:200)
    at weblogic.servlet.internal.WebAppServletContext.destroy(WebAppServletContext.java:3224)
    at weblogic.servlet.internal.ServletContextManager.destroyContext(ServletContextManager.java:247)
    at weblogic.servlet.internal.HttpServer.unloadWebApp(HttpServer.java:461)
    at weblogic.servlet.internal.WebAppModule.destroyContexts(WebAppModule.java:1535)
    at weblogic.servlet.internal.WebAppModule.deactivate(WebAppModule.java:507)
    at weblogic.application.internal.flow.ModuleStateDriver$2.previous(ModuleStateDriver.java:387)
    at weblogic.application.utils.StateMachineDriver.previousState(StateMachineDriver.java:223)
    at weblogic.application.utils.StateMachineDriver.previousState(StateMachineDriver.java:215)
    at weblogic.application.internal.flow.ModuleStateDriver.deactivate(ModuleStateDriver.java:141)
    at weblogic.application.internal.flow.ScopedModuleDriver.deactivate(ScopedModuleDriver.java:206)
    at weblogic.application.internal.flow.ModuleListenerInvoker.deactivate(ModuleListenerInvoker.java:261)
    at weblogic.application.internal.flow.DeploymentCallbackFlow$2.previous(DeploymentCallbackFlow.java:547)
    at weblogic.application.utils.StateMachineDriver.previousState(StateMachineDriver.java:223)
    at weblogic.application.utils.StateMachineDriver.previousState(StateMachineDriver.java:215)
    at weblogic.application.internal.flow.DeploymentCallbackFlow.deactivate(DeploymentCallbackFlow.java:192)
    at weblogic.application.internal.flow.DeploymentCallbackFlow.deactivate(DeploymentCallbackFlow.java:184)
    at weblogic.application.internal.BaseDeployment$2.previous(BaseDeployment.java:642)
    at weblogic.application.utils.StateMachineDriver.previousState(StateMachineDriver.java:223)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:63)
    at weblogic.application.internal.BaseDeployment.activate(BaseDeployment.java:205)
    at weblogic.application.internal.EarDeployment.activate(EarDeployment.java:58)
    at weblogic.application.internal.DeploymentStateChecker.activate(DeploymentStateChecker.java:161)
    at weblogic.deploy.internal.targetserver.AppContainerInvoker.activate(AppContainerInvoker.java:79)
    at weblogic.deploy.internal.targetserver.BasicDeployment.activate(BasicDeployment.java:184)
    at weblogic.deploy.internal.targetserver.BasicDeployment.activateFromServerLifecycle(BasicDeployment.java:361)
    at weblogic.management.deploy.internal.DeploymentAdapter$1.doActivate(DeploymentAdapter.java:51)
    at weblogic.management.deploy.internal.DeploymentAdapter.activate(DeploymentAdapter.java:200)
    at weblogic.management.deploy.internal.AppTransition$2.transitionApp(AppTransition.java:30)
    at weblogic.management.deploy.internal.ConfiguredDeployments.transitionApps(ConfiguredDeployments.java:240)
    at weblogic.management.deploy.internal.ConfiguredDeployments.activate(ConfiguredDeployments.java:169)
    at weblogic.management.deploy.internal.ConfiguredDeployments.deploy(ConfiguredDeployments.java:123)
    at weblogic.management.deploy.internal.DeploymentServerService.resume(DeploymentServerService.java:180)
    at weblogic.management.deploy.internal.DeploymentServerService.start(DeploymentServerService.java:96)
    at weblogic.t3.srvr.SubsystemRequest.run(SubsystemRequest.java:64)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:178)
<25 Jan, 2013 12:45:11 PM IST> <Error> <Deployer> <BEA-149231> <Unable to set the activation state to true for the application 'DEV_4.5'.
weblogic.application.ModuleException: 
    at weblogic.servlet.internal.WebAppModule.startContexts(WebAppModule.java:1510)
    at weblogic.servlet.internal.WebAppModule.start(WebAppModule.java:482)
    at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:425)
    at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:52)
    at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:119)
    Truncated. see log file for complete stacktrace
Caused By: java.lang.NullPointerException
    at oracle.adfinternal.view.faces.unified.renderkit.UnifiedRenderKit.<init>(UnifiedRenderKit.java:125)
    at oracle.adfinternal.view.faces.unified.renderkit.UnifiedRenderKit.createRenderKit(UnifiedRenderKit.java:107)
    at oracle.adfinternal.view.faces.unified.renderkit.UnifiedRenderKitFactory.getRenderKit(UnifiedRenderKitFactory.java:59)
    at org.apache.myfaces.trinidadinternal.renderkit.CoreRenderKitFactory.getRenderKit(CoreRenderKitFactory.java:55)
    at org.apache.myfaces.trinidadinternal.renderkit.CoreRenderKitFactory.getRenderKit(CoreRenderKitFactory.java:55)
    Truncated. see log file for complete stacktrace 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:33:41.250

目前尚不清楚您尝试做什么。您想将现有应用程序从哪个应用程序服务器迁移到哪个应用程序服务器？哪些技术使用您要迁移的应用程序？[但是，您可能会在此处](https://forums.oracle.com/forums/thread.jspa?messageID=10680643)找到可能的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:20:26.027

您的 JSF 侦听器应该实现来自 JSF 库的[侦听器。](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/api/javax/faces/event/FacesListener.html)如果你想在你的应用程序中安装 Servlet 监听器，你应该通过`web.xml`...

# oauth-2.0 - Google OAuth 登录在 IE 中不起作用

> ID：14517245
> 
> 赞同：1
> 
> 时间：2013-01-25T07:24:34.827
> 
> 标签：oauth-2.0

我的网站使用 OAUTH2.0 允许用户使用他们的 gmail 帐户登录。我使用以下代码显示 OAUTH 登录页面：

不幸的是，这段代码在 IE 上引发了异常（在 Chrome 和 Firefox 中完美运行）。

谁能告诉我IE中的问题是什么。弹出窗口未关闭且功能在 IE 中不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T05:28:53.043

尝试使用 poltimer 5000 而不是 500 ms

# perl - 我无法在 Perl 下使用 Win32_Process::GetOwner 调用获得正确的 Name&Domain 属性

> ID：14517250
> 
> 赞同：1
> 
> 时间：2013-01-25T07:25:07.047
> 
> 标签：perl, wmi

我想在 Perl 下使用 Win32_Process::GetOwner 方法枚举所有正在运行的进程的名称和域属性，我的代码如下所示：

```
use strict;
use warnings;
use Win32::OLE('in');
use Win32::OLE::Variant;

my $retval;
my $machine = ".";
my $outParam;
my $CLASS = "Winmgmts:{impersonationlevel=impersonate}!\\\\$machine\\root\\cimv2";
my $WMI = Win32::OLE->GetObject($CLASS) or die("GetObject:" . Win32::OLE->LastError());
my $process = $WMI->InstancesOf("Win32_Process");

my $vtName = Win32::OLE::Variant->new(VT_CY, VT_EMPTY);
my $vtDomain = Win32::OLE::Variant->new(VT_CY, VT_EMPTY);
foreach my $obj(in $process)
{
    $retval = $obj->GetOwner($vtName, $vtDomain);
    if($retval == 0){
        print $vtName->Value() . "\t" . $vtDomain->Value() . "\n";
    }
} 
```

该脚本可以正常运行，但我每次都得到“零”回显字符串：

![回声](../Images/8301b7208a065628c6bc2a431055efa3.png)

谁能告诉我是什么导致了这个问题以及如何解决它？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T20:12:45.933

似乎 Karthik 已经有了[您正在寻找的代码](https://stackoverflow.com/questions/14257565/how-to-find-a-process-of-the-current-user-in-perl-using-wmi)：

```
my $objWMIService = Win32::OLE->GetObject("winmgmts:\\\\localhost\\root\\CIMV2");
my $sqry = "SELECT * FROM Win32_Process where Name = \"$processName\" ";` 
```

似乎其他人也有同样的问题，Perl 发出状态代码 0 而不是实际数据： [http ://code.activestate.com/lists/perl-win32-users/16230/](http://code.activestate.com/lists/perl-win32-users/16230/)

# c - 读取中间值时双向 fifo 通信阻塞

> ID：14517252
> 
> 赞同：2
> 
> 时间：2013-01-25T02:49:48.017
> 
> 标签：c, linux, named-pipes, system-calls, fifo

我正在尝试使用 fifo 在两个进程之间来回发送信息。它可以工作到一定程度，但随后会出现读取块。我怀疑 Process2 是错误所在。

过程1：

```
#include<fcntl.h>
#include<sys/types.h>
#include<sys/stat.h>
main()
{
 char oprtr;
 int fd1,fd0;
 float oprnd1,oprnd2,result;

 mkfifo("fifo1",0777);
 fd1=open("fifo1",O_RDWR);

 printf("fd1:%d\n",fd1);
 printf("Add(+)\n");
 printf("subtract(-)\n");
 printf("multiply(*)\n");
 printf("division(/)\n");

 printf("Enter operator\n");
 scanf("%c",&oprtr);
 getchar();
 write(fd1,&oprtr,sizeof(oprtr));

 printf("Enter oprnd1\n");
 scanf("%f",&oprnd1);
 getchar();
 write(fd1,&oprnd1,sizeof(oprnd1));

 fd0=dup(fd1);
 printf("Enter oprnd2\n");
 scanf("%f",&oprnd2);
 getchar();

 if(write(fd0,&oprnd2,sizeof(oprnd2))==0)
  perror("write : oprnd2:");
 else
  printf("writing oprnd2 done\n");

 read(fd1,&result,sizeof(result));
 printf("Result:%f\n",result);
} 
```

过程2：

```
#include<fcntl.h>
#include<sys/types.h>
#include<sys/stat.h>
main()
{
 int fd2,fd3;
 char oprtr;
 float oprnd1,oprnd2,result;
 fd2=open("fifo1",O_RDWR);
 printf("fd2:%d\n",fd2);

 read(fd2,&oprtr,sizeof(oprtr));
 printf("oprtr:%c\n",oprtr);

 read(fd2,&oprnd1,sizeof(oprnd1));
 printf("oprnd1:%f\n",oprnd1);

 fd3=dup(fd2); 
```

这是读取功能被阻塞的地方

上面的两个 read() 调用似乎工作正常，但是下面的 read() 调用被阻塞了。为什么？

```
 if(read(fd3,&oprnd2,sizeof(oprnd2))==0) ////This is the problem
  perror("read : oprnd2:");
 else
  printf("oprnd2:%f\n",oprnd2);

switch(oprtr)
 {
 case '+':result=oprnd1+oprnd2;
          write(fd2,&result,sizeof(result));break;
 case '-':result=oprnd1-oprnd2;
          write(fd2,&result,sizeof(result));break;
 case '*':result=oprnd1*oprnd2;
          write(fd2,&result,sizeof(result));break;
 case '/':result=oprnd1/oprnd2;
          write(fd2,&result,sizeof(result));break;
 default: printf("Wrong Choice\n");break;
 }
} 
```

1号航站楼：

```
Add(+)
subtract(-)
multiply(*)
division(/)
Enter operator
+
Enter oprnd1
14.56
Enter oprnd2
16.44
writing oprnd2 done
Result:16.440089 
```

2号航站楼：

```
fd2:3
oprtr:+
oprnd1:14.560000 
```

**然后它就被阻塞了**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T03:17:30.413

简短而简单的答案是，如果没有一些外部同步机制，您不应该使用单个 fifo 进行双向通信。

详细说明：Unix 管道或 fifo 不是最好的可视化管道类型管道。它更像是一个储罐，有管道进出它。标准用法是一个进程写入，从而填充容器，另一个进程读取，从而排空容器。在您的程序中，写入 fifo 的所有内容都放在容器中，直到有人出现并读取它，先到先得。因此，您的 Process1 程序读取 16.44 值，它从 写入`oprnd2`，回到`result`. 这使水箱空着，因此 Process2 没有任何内容可供读取。它归结为比赛条件。我怀疑，如果你运行这两个命令几百次，它们会按照你想要的方式运行几次。 

如果您只想要概念验证，请在来自 fifo`sleep`之前添加一个到 Process1 。`read`更好的解决方案是使用两个 fifo，每个方向一个。或者您可以为 Process2 设计一些方法，让 Process1 知道它 (Process2) 已经读取了运算符和两个操作数并写入了结果——例如，一个信号或一个信号量——但这可能比它的价值更麻烦.

另一方面，我强烈建议不要在`scanf`玩具、演示或一次性原型类型的程序中使用。如果用户点击 just `Enter`，程序将永远坐在那里。我建议阅读一行（确保解决缓冲区溢出）然后调用`sscanf`它。

哦，还有，请缩进你的代码。

# java - Android 浏览器：隐藏 URL 栏和进度条

> ID：14517262
> 
> 赞同：0
> 
> 时间：2013-01-25T07:25:36.390
> 
> 标签：java, android, webview, webkit, actionbarsherlock

我正在开发一个 Android 网络浏览器，我想在我的应用程序中实现一个自定义 URL 栏，让我的用户导航到他们自己的网页，而不是尝试谷歌所有内容。有人知道怎么做吗？

我不确定这是否重要，但我已`ActionbarSherlock`在我的项目中添加为库。

非常感谢任何人的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:43:16.407

使用以下 youtube 教程作为参考。这很简单。

[http://www.youtube.com/watch?v=NcKSFlYEqYY](http://www.youtube.com/watch?v=NcKSFlYEqYY)

看到这个问题..

[Android — 像 Google Chrome 新按钮一样单击按钮时添加新标签？](https://stackoverflow.com/questions/13097931/android-add-new-tab-when-button-click-like-google-chrome-new-button)

# git - 如何确定在 git 中压缩了哪些提交？

> ID：14517265
> 
> 赞同：4
> 
> 时间：2013-01-25T07:25:59.113
> 
> 标签：git, git-rebase, githooks

我正在编写一个脚本，它保留对存储库中某些提交的引用，但是如果某些提交被压缩，那么引用将变得无效。我知道有`pre-rebase`钩子，但没有`post-rebase`钩子，那么有没有办法确定哪些提交被压在一起？

例如，在变基之前，我有这样的历史：

```
cf79121 Refactor the trim_file_name method. Closes #1965.
82ed26a Updated dependencies and project versions.
8047297 Updated Node.js implementation package information.
b2b727c Added "finished" callback, which is called for each "completed" or "failed" event. 
```

变基后我得到：

```
cf79121 Refactor the trim_file_name method. Closes #1965.
9b7ac26 Updated dependencies, project versions, and node.js package information.
b2b727c Added "finished" callback, which is called for each "completed" or "failed" event. 
```

我怎样才能知道`82ed26a`+ `8047297`= `9b7ac26`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T07:43:17.347

除非该信息仍在您*只需*git squash 提交的 repo 的 reflog 中，否则...我认为您无法取回该信息。
请参阅“[如何撤消 git merge squash？](https://stackoverflow.com/questions/7457942/how-to-undo-a-git-merge-squash) ”。

因此，您的脚本可以在发生壁球的本地 git 存储库中运行，但它不能在同一个存储库的克隆中运行。

除非用户在评论中系统地记录了一个 squash，否则该信息（提交已被压缩）将不可用。

# android - 从内部连接结果中检索所有列的所有数据

> ID：14517271
> 
> 赞同：0
> 
> 时间：2013-01-25T07:26:20.953
> 
> 标签：android, sqlite

如何从`INNER JOIN`结果中检索所有列的数据？我使用这个查询：

```
SELECT course.course_title, 
       course.course_body, 
       course. course_image, 
       instructor.instructor_title, 
       instructor.instructor_body, 
       instructor.instructor_photo
FROM  course
INNER JOIN instructor
ON  course.course_instructor1=instructor.instructor_nid
WHERE course_id=4 
```

`COURSE_OUTLINE`这是我将用来执行的等效变量

```
String COURSE_OUTLINE = 
        "SELECT " + Qualified.COURSE_TITLE + ", " 
                  + Qualified.COURSE_BODY + ", " 
                  + Qualified.COURSE_IMAGE + ", "
                  + Qualified.INSTRUCTOR_TITLE + ", "
                  + Qualified.INSTRUCTOR_BODY + ", "
                  + Qualified.INSTRUCTOR_IMAGE + ", " +
        "FROM "   + Tables.COURSE_JOIN_INSTRUCTOR +
        "WHERE "  + CourseColumns.COURSE_ID + 
        "=?"; 
```

在我的代码中，

```
Cursor cur = mSqliteDb.rawQuery(SubQuery.COURSE_OUTLINE, new String[] {position}); 
```

这给出了 1 条记录。我知道如何从特定列中检索数据，但我不确定如何从所有列中检索数据。

这是我用来从特定列检索数据的代码

```
public String getCourseImage(int position) {
    String image = "";
    String pos = Integer.toString(position);

    Cursor cur = mSqliteDb.rawQuery(SelectQuery.ALL_COURSES, new String[] {pos});
    if (cur != null) {
        if (cur.moveToFirst()) {
            do {
                image = cur.getString(cur.getColumnIndex(CourseColumns.COURSE_IMAGE)); 
            } while (cur.moveToNext());
        }
        cur.close();
    }
    return image;
} 
```

我的意图是将列中的每个数据映射到`View`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:33:02.527

[getColumnNames](http://developer.android.com/reference/android/database/sqlite/SQLiteCursor.html)为您提供一个包含所有列的数组......如果这就是您要问的。这有点难说。

# css - 如何从 QCombobox 弹出窗口中删除箭头？

> ID：14517275
> 
> 赞同：3
> 
> 时间：2013-01-25T07:26:39.977
> 
> 标签：css, qt, stylesheet

我有一个 QComboBox，单击时默认在左侧显示一个选择箭头 - 下面附有快照。

![在此处输入图像描述](../Images/31ac44976d5450414e4e98c30ae79e1f.png)

我的样式表如下

```
#define PROFILE_PAGE_COMBOBOX_CSS_ACTIVE " \
    QComboBox { \
        background:white; \
        border:1px solid gray \
    } \
    QComboBox::down-arrow { \
        image: url(:/images/profilecomboboxdropdown.png); width:15px; height: 15px; \
    } \
    QComboBox::drop-down { \
        subcontrol-origin: padding; \
        subcontrol-position: right; \
        width: 15px; \
        height: 15px; \
        border:0px; \
        padding-right:8px; \
    } \
    QComboBox QAbstractItemView { \
        border: 0px; \
        padding: 1px; \
        background-color: #ffffff; \
        color: gray; \
        selection-background-color: #ffffff; \
        selection-color: blue; \
    } \
"

this->m_CountryEdit->setStyleSheet(PROFILE_PAGE_COMBOBOX_CSS_ACTIVE); 
```

我怎样才能摆脱这个选择箭头？我在 Mac 和 Windows 上都使用 Qt 4.7.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:30:22.017

这是一个特定于mac的问题，似乎有几种方法可以解决它 - 使用样式表定位使选择标记离开屏幕 - 通过删除周围的边框使其看起来不那么难看（这是一个删除使该边框的样式的问题显示） - 所以可能没有在组合框中设置“当前”项目

# iphone - 如何获取 iPhone 设备的当前经纬度

> ID：14517278
> 
> 赞同：0
> 
> 时间：2013-01-25T07:26:58.650
> 
> 标签：iphone, ios5, core-location

我正在开发一个应用程序，如果我想为 iPhone 获取设备当前的纬度和经度。是否可以在不使用 GPS 的情况下获取此信息。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T15:36:34.127

您可以使用`CoreLocation framework`

Core Location 框架有一个重要的类`CLLocationManager`。

每当位置更改时，`CLLocationManager`该类都会处理向委托发送更新。它使用委托`CLLocationManagerDelegate`协议。

你可以像这样使用它

```
#import <CoreLocation/CoreLocation.h>

@interface ViewController : UIViewController 
  <CLLocationManagerDelegate>
{
  CLLocationManager *locationManager;

} 
```

在 viewDidLoad 中像这样设置 locationManager

```
- (void)viewDidLoad {
  [super viewDidLoad];
  locationManager = [[CLLocationManager alloc] init];
  locationManager.delegate = self;
  locationManager.distanceFilter = kCLDistanceFilterNone; // whenever we move
  locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m
  [locationManager startUpdatingLocation];
} 
```

实现以下委托方法以获取更改位置

```
 - (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation
{
  NSInteger degrees = newLocation.coordinate.latitude;
  double decimal = fabs(newLocation.coordinate.latitude - degrees);
  int minutes = decimal * 60;
  double seconds = decimal * 3600 - minutes * 60;
  NSString *lattitudeStr = [NSString stringWithFormat:@"%d° %d' %1.4f\"", 
                   degrees, minutes, seconds];
  lattitudeLabel.text = lattitudeStr;
  degrees = newLocation.coordinate.longitude;
  decimal = fabs(newLocation.coordinate.longitude - degrees);
  minutes = decimal * 60;
  seconds = decimal * 3600 - minutes * 60;
  NSString *longitudeStr = [NSString stringWithFormat:@"%d° %d' %1.4f\"", 
                     degrees, minutes, seconds];
  longitudeLabel.text = longitudeStr;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T07:31:28.697

您可以使用`CLLocationManager`获取当前的纬度和经度。创建一个`iVar`并`CLLocationManager`使用它。

这是代码：

```
- (void)viewDidLoad
{
[super viewDidLoad];
locationManager = [[CLLocationManager alloc] init];
locationManager.delegate = self;
locationManager.distanceFilter = kCLDistanceFilterNone;
locationManager.desiredAccuracy = kCLLocationAccuracyBest;
[locationManager startUpdatingLocation];
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
NSLog(@"OldLocation %f %f", oldLocation.coordinate.latitude, oldLocation.coordinate.longitude);
NSLog(@"NewLocation %f %f", newLocation.coordinate.latitude, newLocation.coordinate.longitude);

currentLat = [NSString stringWithFormat:@"%f",newLocation.coordinate.latitude];
currentLong = [NSString stringWithFormat:@"%f",newLocation.coordinate.longitude];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T07:51:17.270

```
CLLocationManager *locationManager = [[CLLocationManager alloc] init];
CLLocation* currentLocation = [locationManager location];

NSString *loc = [NSString stringWithFormat:@"%f,%f",currentLocation.coordinate.latitude, currentLocation.coordinate.longitude];
NSLog(@"location:%@", loc); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T13:30:08.007

如果设备有 WiFi 或蜂窝数据服务，您可以在没有 GPS 的情况下使用 CLLocationManager 获取当前位置。该位置不会像您从 GPS 获得的那样准确，但您获得结果的速度比从 GPS 获得的快。

您可以通过将 desiredAccuracy 属性设置为 kCLLocationAccuracyKilometer 从 CLLocationManager 请求非 GPS 位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-28T09:23:57.927

使用斯威夫特

```
import CoreLocation 
```

获取当前位置

```
let locationManager = CLLocationManager()
locationManager.distanceFilter = kCLDistanceFilterNone
locationManager.desiredAccuracy = kCLLocationAccuracyBest

//get the most recently retrieved user location
if let currentLocation = locationManager.location {
    let longitude = currentLocation.coordinate.longitude
    let latitude = currentLocation.coordinate.latitude
    //work with the received data
} 
```

请注意，这`locationManager.location`是一个可选的，因此应该安全地展开。

# android - Proguard 错误，无法导出应用程序

> ID：14517282
> 
> 赞同：4
> 
> 时间：2013-01-25T07:27:12.547
> 
> 标签：android, proguard

```
[2013-01-25 15:20:55 - CQAQI] Proguard returned with error code 1\. See console
[2013-01-25 15:20:55 - CQAQI] Note: there were 208 duplicate class definitions.
[2013-01-25 15:20:55 - CQAQI] Warning: android.support.v4.view.ViewCompatJellybeanMr1: can't find referenced method 'int getLabelFor()' in class android.view.View
[2013-01-25 15:20:55 - CQAQI] Warning: android.support.v4.view.ViewCompatJellybeanMr1: can't find referenced method 'void setLabelFor(int)' in class android.view.View
[2013-01-25 15:20:55 - CQAQI] Warning: there were 2 unresolved references to program class members.
[2013-01-25 15:20:55 - CQAQI]          Your input classes appear to be inconsistent.
[2013-01-25 15:20:55 - CQAQI]          You may need to recompile them and try again.
[2013-01-25 15:20:55 - CQAQI]          Alternatively, you may have to specify the option 
[2013-01-25 15:20:55 - CQAQI]          '-dontskipnonpubliclibraryclassmembers'.
[2013-01-25 15:20:55 - CQAQI] Error: Please correct the above warnings first. 
```

当我导出应用程序时出现错误，即使更新到 Proguard 4.8 也是如此。我能做些什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T04:45:55.607

尝试这个：

```
-dontwarn android.support.v4.view.**
-keep class android.support.v4.** { *; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T01:50:06.380

我有同样的错误。
使用 SDK 级别 4.2.2 构建对我有用！

# jsf - JSF Extended Datatable 选择性排序和过滤

> ID：14517284
> 
> 赞同：0
> 
> 时间：2013-01-25T07:27:18.707
> 
> 标签：jsf, richfaces

我有一个扩展的数据表，RICHFACES 3.3.3，启用了排序和过滤。**该表是动态**呈现的。根据要求，我需要在显示表格时禁用某些行（包含可编辑字段）。我在 javascript 函数**rowBlur()**中编写了该逻辑，并在显示页面时调用它。因此，当加载表时，所需的行将按预期禁用。问题是每当我过滤/排序表时，禁用的行会再次启用。

有什么方法可以在过滤或排序发生时调用 javascript 函数。

```
HtmlExtendedDataTable dynamicDataTable = new HtmlExtendedDataTable();
dynamicDataTable.setOnkeydown("filterAllOnEnter(event)");

function filterAllOnEnter(event)
    {
       if(event.keyCode == 13)
       {
          jQuery(".rich-filter-input").blur();
          rowblur();
          return false;
       }
       else return true;
    } 
```

rowblur **()**在过滤时不能正常工作，在对列进行排序时它根本不起作用。

# ruby-on-rails - 验证rails 3中postgres整数字段的数值

> ID：14517285
> 
> 赞同：1
> 
> 时间：2013-01-25T07:27:20.927
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

我的 postgres 数据库表是用

```
t.integer :time_employed 
```

我有这样的验证

```
validates :time_employed, numericality: true, allow_blank: true 
```

我也试过

```
validates_numericality_of :time_employed, allow_blank: true 
```

但他们都没有给我我想要的结果。我在控制台中做了一些测试，似乎该字段总是设置为`0`or `nil`。如果我输入一个字符串，它被设置为`0`.

我将数据库字段更改为

```
t.string :time_employed 
```

现在一切正常。这不是一个大问题，但我希望保持模式正确描述的数据。

我对数据库还不太了解，所以这让我陷入了困境。谁能解释这里发生了什么？

编辑：

问题是它允许空白条目，但如果我输入非数值，它不会抛出错误。任何东西都会被验证为好，只是没有保存到数据库中。在更改为`t.string`并且没有更改验证后，它工作正常。

我也试过`allow_nil: true`，但效果是一样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:36:04.807

替换这个

```
validates_numericality_of :time_employed, allow_blank: true 
```

经过

```
validates_numericality_of :time_employed, allow_nil: true 
```

**[api 文档](http://api.rubyonrails.org/classes/ActiveModel/Validations/HelperMethods.html#method-i-validates_numericality_of)中不存在**allow_blank**这可能是原因之一。**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-10T08:52:31.177

因为您的`time_employed`列在验证之前进行了类型转换。

```
validates_numericality_of :time_employed_before_type_cast, allow_blank: true 
```

应该管用。**

# javascript - 如果 URL 包含任何内容，则触发 Javascript 函数

> ID：14517292
> 
> 赞同：0
> 
> 时间：2013-01-25T07:27:34.767
> 
> 标签：javascript, jquery

基本上，如果 URL/`window.location`绝对包含任何变量（当然是过去的 domain.com/），我希望 javascript 执行某些操作。

目前，我有以下 jQuery 代码，它仅在`window.location`包含确切的措辞“#hash”时执行，但如前所述，我想扩展所有变量的功能。

**编辑：**抱歉，澄清一下，变量是指以下任何一个示例：

*   domain.com/#hash **_**
*   domain.com/#hash2 **_**
*   domain.com/**子/文件夹**
*   domain.com/ **textwithoutahash**

*此外，如果有人知道如何在基本的 Javascript 中做到这一点并且不需要 jQuery 库，那将是一个额外的好处！*

```
$(function() {
    if ( window.location.href.indexOf('#hash') > -1 ) {
        myfunctionhere;
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T07:31:44.800

**请参阅最后更新您的说明**

将脚本放在页面末尾，就在关闭之前`</body>`，并且：

如果“变量”是指文档片段标识符（“哈希”），则：

```
<script>
if (location.hash) {
    callYourFunction();
}
</script> 
```

如果“变量”是指查询字符串，那么

```
<script>
if (location.search) {
    callYourFunction();
}
</script> 
```

如果“变量”是指资源名称，例如 not `http://domain.com`but `http://domain.com/page`，则：

```
<script>
if (location.pathname && location.pathname !== "/") {
    callYourFunction();
}
</script> 
```

[更多关于 MDN](https://developer.mozilla.org/en-US/docs/DOM/window.location#Properties)上的 location 对象。

* * *

重新澄清：

> 编辑：抱歉，澄清一下，变量是指以下任何一个示例：

这些例子归结为有一个`hash`或`pathname`两个，所以：

```
<script>
if ((location.pathname && location.pathname !== "/") || location.hash) {
    callYourFunction();
}
</script> 
```

...当然，如果您还想处理`http://domain.com?foo=bar`，那么也添加`search`：

```
<script>
if ((location.pathname && location.pathname !== "/") ||
    location.search ||
    location.hash) {

    callYourFunction();
}
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T07:36:58.377

您可以检查是否有 a `hash`、 a`pathname`或 a `search`。

或者，为了简化，你可以简单地使用这个：

```
if (window.location.href.split('/').filter(Boolean).length > 2) {
    callYourFunction();
} 
```

`window.location.href`只是整个 URL。如果域后面有东西，它会显示出来。

此功能将在以下情况下触发：

*   domain.com/some/path
*   domain.com/#hash
*   domain.com/?some=变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T07:32:39.680

您可以检查是否将`search`属性`window.location`设置为某个值。此外，您可以检查`hash`属性：

```
if (window.location.search || window.location.hash) {
  yourfunctionhere();
} 
```

要在没有 jQuery 的情况下调用它，只需将其包含在“onload”脚本中：

```
<script type='text/javascript'>
  document.onload = function () {
    if (window.location.search || window.location.hash) {
      yourfunctionhere();
    }
  }
</script> 
```

# r - 将数据输入“R Commander”

> ID：14517294
> 
> 赞同：0
> 
> 时间：2013-01-25T07:27:42.103
> 
> 标签：r, dataset, r-commander

我安装了 R Commander 并没有成功输入数据集。我已经在网上阅读了如何做到这一点，但它似乎不起作用。以下是我已采取的步骤。

1.  打开 R。
2.  打开*R 指挥官*
3.  单击“数据”，然后单击“新数据集”并输入“test”作为数据集的名称，单击“*确定”*
4.  在*数据编辑器中，*双击*var1*并将其更改为“a”（类型：数字）
5.  在第一列输入数字
6.  在“数据编辑器”窗口中，单击“文件”，然后单击“关闭”

但是，当我单击它时，会打开另一个“数据编辑器”窗口。关闭后，会出现一个名为“选择数据集”的窗口。我单击“测试”并在 R Commander 的消息部分中显示*注意：数据集有 0 行和 0 列*

我缺少一个步骤吗？

提前感谢您的回复。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:44:07.137

抱歉，这不是您问题的直接答案，而是一种可能的解决方法：我不太了解 R Commander，但总的来说，在 Excel 或 OpenOffice Calc 等外部应用程序中输入数据会更容易，将它们保存到CSV 文件，然后将此文件导入 R。

R Commander 菜单*Data* > *Import data*应该允许您很容易地导入许多不同的格式。

优点之一是外部应用程序通常提供更简单的数据输入方式。顺便说一句，您还学习了如何将数据导入 R，如果您决定继续使用它，这应该很有用。

# c# - Windows Phone 8 中的“钱包交易”中的编辑选项

> ID：14517295
> 
> 赞同：0
> 
> 时间：2013-01-25T07:27:46.543
> 
> 标签：c#, xaml, windows-phone-8

到目前为止，我正在开发 Windows Phone 应用程序，该应用程序使 Wallet API 可以在 Windows Phone 8 中为 Wallet 工作。通常我们可以使用`Deal`对象将交易添加到 Wallet 应用程序中。但在每次尝试中，添加的交易都没有编辑选项。但是，如果它是通过内置钱包应用程序添加的，显然它有一个编辑选项。我为这个问题苦恼了很长时间。能否请任何人帮助我通过`Deal`API 启用编辑选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T19:24:15.853

那是故意的。想想钱包的禅意。当用户手动输入交易时，除了用户之外，它对任何人都没有任何意义。当您的应用程序创建交易时，对其他人（收银员查看它，机器扫描条形码等）意味着什么。因此，重要的是您的交易不会被用户更改。

您在手机上本地存储的交易只是存储在服务器上的交易的表面。因此，如果您想更新这些，您需要创建一个 WalletAgent，从远程源提取数据并在后台更新这些交易。

这是一个普通 WalletAgent 的代码示例，它始终将您的所有钱包项目标记为“需要注意”。显然，这是查询远程 Web 服务和更新 WalletItem 属性的好地方。

```
public class myWalletAgent : WalletAgent
{
    protected override void OnRefreshData(RefreshDataEventArgs args)
    {
        foreach (WalletItem item in args.Items)
        {
            item.SetUserAttentionRequiredNotification(true);
        }

        base.OnRefreshData(args);
        NotifyComplete();
    }
} 
```

# windows - Putty - 将接收到的数据输出到单独的窗口

> ID：14517297
> 
> 赞同：0
> 
> 时间：2013-01-25T07:27:57.817
> 
> 标签：windows, putty

我正在使用 putty 连接到自定义应用程序，以便为其提供一些命令并接收记录的信息。日志数据过多并且向我的腻子终端窗口发送垃圾邮件的问题。我想，真正好的是将所有这些接收到的数据放在一个单独的窗口中，与命令窗口分开。当然，我可以更改我的应用程序以将日志数据发送到不同的端口（并创建第二个腻子会话来接收此数据），但我想知道腻子是否可以 - 将命令和日志窗口分开？

# mysql - mysql系统变量table_type不起作用

> ID：14517323
> 
> 赞同：4
> 
> 时间：2013-01-25T07:30:08.000
> 
> 标签：mysql, amazon-ec2

我无法设置系统变量 table_type。当我尝试这样做时，我收到以下错误。

```
mysql> SET table_type=InnoDB;
ERROR 1193 (HY000): Unknown system variable 'table_type' 
```

当我执行“SHOW VARIABLES”时，我看到“table_type”没有列出。这是设置问题吗？

要安装 mysql，我刚刚在 Amazon EC2 实例上执行了“sudo yum install mysql mysql-server mysql-libs”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T07:33:47.267

从[文档中](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_table_type)：

> 这个变量在 MySQL 5.5.3 中被移除。请改用[storage_engine](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_storage_engine)。

反过来说：

> 从 MySQL 5.5.3 开始不推荐使用此变量。请改用[default_storage_engine](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_default_storage_engine) 。

因此你应该使用`SET default_storage_engine=InnoDB`，它是自 MySQL 5.5.5 以来的默认 FWIW。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T07:32:49.867

请试试这个

```
ALTER TABLE t1 ENGINE = InnoDB; 
```

# matlab - 如何在 Matlab 中用白色替换边框？

> ID：14517335
> 
> 赞同：2
> 
> 时间：2013-01-25T07:31:03.620
> 
> 标签：matlab

这是原始图像。

![在此处输入图像描述](../Images/49ef5614767320a46c2ad3102cf787e3.png)

我将其更改为 1) 灰度并应用 2) 阈值。

如原图所示，应用上述两种方法后仍有一些阴影存在。

但大多数图像在 2 方法后都是完美的。

![在此处输入图像描述](../Images/fe18386a1dbdcc31c3a83d32800cb51d.png)

我需要提取文本，所以我需要消除噪音。我几乎完成了这项工作，但问题是某些情况下有黑色边框，我想将其替换为白色。

我坚持只希望边框变成白色

我想创建一些白色矩形并用这些矩形填充边框，但我不知道该怎么做。

如何使用 Matlab 实现这一点？任何其他方法也将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:40:16.667

如果您可以确定只有边框是黑色的，为什么不简单地裁剪图像，直到所有孤立的形状都是可识别的字符？类似的东西

```
done = false;
ii = 1;
while (~done)

    % fill the outer border
    img(:,ii)       = 255;    img(ii,:)       = 255;
    img(:,end-ii+1) = 255;    img(end-ii+1,:) = 255;

    % (run your algorithms here. It positive match, done = true)

end 
```

这可能是计算密集型的，因为您必须在每次迭代中进行模式识别，但您表示它仅在“某些情况下”发生。

否则，我怀疑也可以使用一些[形态学操作，可能是腐蚀或细化或类似的。](http://en.wikipedia.org/wiki/Mathematical_morphology)但这有改变你想要匹配的字符的缺点。但是，如果您必须处理的所有图像看起来都像您展示的那样，我几乎不怀疑这会给您带来任何问题。

[这个问题](https://stackoverflow.com/questions/2596722/is-there-any-super-fast-algorithm-for-finding-lines-on-picture)中提到了一些检测直线的方法。我想说您可以检测到所有线条，并删除那些完全水平/垂直*且*位于其中一个边缘的线条（周围有一个小的公差）。

# javascript - Jquery UI 嵌套手风琴的问题；标题选项干扰嵌套手风琴

> ID：14517336
> 
> 赞同：0
> 
> 时间：2013-01-25T07:31:04.590
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-accordion

Tl; dr：滚动到底部以获得更简单的解释。

我想我有一个稍微独特的问题。首先也是最重要的.. 我已经查看了互联网/谷歌，包括该网站，以及提出这个问题时的建议。

回到手头的主题，我正在生成一个嵌套的手风琴系列，其中嵌套的数量是动态生成的。也就是说，底层项目可以有多少个父项没有设置限制，因此它是不是去'.acord1，.acord2，.acord3'等的选项。

问题..手风琴中的一些标题是底层项目，它们没有子项，没有附加手风琴。

下面的示例 html 不包含上述项目，因为它重现了面临的问题，即添加`header:`选项（我用来排除前面提到的项目）时，它触发顶级手风琴，关闭它当其中一个孩子被点击时。

以下是我设法用最少的代码重现的测试用例：

```
<div class="acord">
    <h3>test1</h3>
    <div class="acord">
        <h3>test2</h3>
        <div>test2cont</div>
    </div>
    <h3 class="item">test3</h3>
</div> 
```

```
$(".acord").accordion({
    header: "h3:not(.item)",
    heightStyle: "content",
    active: false,
    collapsible: true,
}); 
```

如果上述情况是`tl;dr`，指定带有嵌套手风琴的标题选项不起作用，因为子手风琴（被点击）的父级，然后关闭。

[Js小提琴](http://jsfiddle.net/5Eh6A/1/)

有解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:16:41.397

以下是我管理的解决方法。这很丑陋，但还有其他一些事情可以完成工作。如果有人有比删除 jquery 手风琴标题的图标和填充以及单击功能更好的想法，请回答这个问题。直到那时：

```
$(".acord").accordion({
    heightStyle: "content",
    active: false,
    collapsible: true,
    changestart: function (event, ui) {
        if ($(event.currentTarget).hasClass("item")) {
            event.preventDefault();
            $(event.currentTarget).removeClass("ui-corner-top").addClass("ui-corner-all");
        }
    }
}); 
```

**编辑：**

感谢[jQuery bug tracker](http://bugs.jqueryui.com/ticket/9020)的人们，这个问题已经用更好的解决方案解决了：

```
$(".acord").accordion({
    header: "> h3:not(.item)", //this line
    heightStyle: "content",
    active: false,
    collapsible: true
}); 
```

# android - Android : 检查手机是否为双卡

> ID：14517338
> 
> 赞同：115
> 
> 时间：2013-01-25T07:31:06.743
> 
> 标签：android, imei, dual-sim

经过论坛的大量研究，现在我知道没有办法找到双卡手机中两张SIM卡的IMSI或SIM序列号（除了联系制造商）。现在我改变的问题是，我们能否检测到手机有两个 SIM 卡？我相信它可以通过一些情报来检测。我能想到的几种方法是：

1.  拨打 USSD 代码并跟踪 IMEI 号码的日志（我在印度使用 *139# 进行了尝试。它成功了。）这将为我提供我拨打 USSD 代码的 SIM 卡的 IMEI 号码。（推测该手机遵循安卓指南并有两个 IMEI 号码。）

2.  存储 SIM 的序列号和/或 SIM 的 IMSI。并且在检测到任何其他 IMSI/序列号后，即使手机没有重新启动（即 SIM 已切换），也可以通过跟踪一些日志或一些广播事件处理。

3.  通过拨打 *06#，您将看到两个 IMEI 号码。通过某种方式，得到这两个数字。（例如屏幕捕获和文本图像解析。）

如果有人能想到一些其他的方法，他们是最受欢迎的。我真的很感激任何关于这方面的帮助。此外，如果有人有任何有关任何制造商 API 的信息或联系他们的链接，请与社区人员分享。

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2013-07-06T05:09:14.730

**2015 年 3 月 23 日更新：**

> [从 Android 5.1 开始，现在可以使用官方的多 SIM 卡 API](https://developer.android.com/about/versions/android-5.1.html#multisim)

**其他可能的选择：**

您可以使用**Java 反射**来获取两个 IMEI 号码。

使用这些 IMEI 号码，您可以检查手机是否为双 SIM 卡。

尝试以下活动：

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TelephonyInfo telephonyInfo = TelephonyInfo.getInstance(this);

        String imeiSIM1 = telephonyInfo.getImsiSIM1();
        String imeiSIM2 = telephonyInfo.getImsiSIM2();

        boolean isSIM1Ready = telephonyInfo.isSIM1Ready();
        boolean isSIM2Ready = telephonyInfo.isSIM2Ready();

        boolean isDualSIM = telephonyInfo.isDualSIM();

        TextView tv = (TextView) findViewById(R.id.tv);
        tv.setText(" IME1 : " + imeiSIM1 + "\n" +
                " IME2 : " + imeiSIM2 + "\n" +
                " IS DUAL SIM : " + isDualSIM + "\n" +
                " IS SIM1 READY : " + isSIM1Ready + "\n" +
                " IS SIM2 READY : " + isSIM2Ready + "\n");
    }
} 
```

这是**`TelephonyInfo.java`**：

```
import java.lang.reflect.Method;

import android.content.Context;
import android.telephony.TelephonyManager;

public final class TelephonyInfo {

    private static TelephonyInfo telephonyInfo;
    private String imeiSIM1;
    private String imeiSIM2;
    private boolean isSIM1Ready;
    private boolean isSIM2Ready;

    public String getImsiSIM1() {
        return imeiSIM1;
    }

    /*public static void setImsiSIM1(String imeiSIM1) {
        TelephonyInfo.imeiSIM1 = imeiSIM1;
    }*/

    public String getImsiSIM2() {
        return imeiSIM2;
    }

    /*public static void setImsiSIM2(String imeiSIM2) {
        TelephonyInfo.imeiSIM2 = imeiSIM2;
    }*/

    public boolean isSIM1Ready() {
        return isSIM1Ready;
    }

    /*public static void setSIM1Ready(boolean isSIM1Ready) {
        TelephonyInfo.isSIM1Ready = isSIM1Ready;
    }*/

    public boolean isSIM2Ready() {
        return isSIM2Ready;
    }

    /*public static void setSIM2Ready(boolean isSIM2Ready) {
        TelephonyInfo.isSIM2Ready = isSIM2Ready;
    }*/

    public boolean isDualSIM() {
        return imeiSIM2 != null;
    }

    private TelephonyInfo() {
    }

    public static TelephonyInfo getInstance(Context context){

        if(telephonyInfo == null) {

            telephonyInfo = new TelephonyInfo();

            TelephonyManager telephonyManager = ((TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE));

            telephonyInfo.imeiSIM1 = telephonyManager.getDeviceId();;
            telephonyInfo.imeiSIM2 = null;

            try {
                telephonyInfo.imeiSIM1 = getDeviceIdBySlot(context, "getDeviceIdGemini", 0);
                telephonyInfo.imeiSIM2 = getDeviceIdBySlot(context, "getDeviceIdGemini", 1);
            } catch (GeminiMethodNotFoundException e) {
                e.printStackTrace();

                try {
                    telephonyInfo.imeiSIM1 = getDeviceIdBySlot(context, "getDeviceId", 0);
                    telephonyInfo.imeiSIM2 = getDeviceIdBySlot(context, "getDeviceId", 1);
                } catch (GeminiMethodNotFoundException e1) {
                    //Call here for next manufacturer's predicted method name if you wish
                    e1.printStackTrace();
                }
            }

            telephonyInfo.isSIM1Ready = telephonyManager.getSimState() == TelephonyManager.SIM_STATE_READY;
            telephonyInfo.isSIM2Ready = false;

            try {
                telephonyInfo.isSIM1Ready = getSIMStateBySlot(context, "getSimStateGemini", 0);
                telephonyInfo.isSIM2Ready = getSIMStateBySlot(context, "getSimStateGemini", 1);
            } catch (GeminiMethodNotFoundException e) {

                e.printStackTrace();

                try {
                    telephonyInfo.isSIM1Ready = getSIMStateBySlot(context, "getSimState", 0);
                    telephonyInfo.isSIM2Ready = getSIMStateBySlot(context, "getSimState", 1);
                } catch (GeminiMethodNotFoundException e1) {
                    //Call here for next manufacturer's predicted method name if you wish
                    e1.printStackTrace();
                }
            }
        }

        return telephonyInfo;
    }

    private static String getDeviceIdBySlot(Context context, String predictedMethodName, int slotID) throws GeminiMethodNotFoundException {

        String imei = null;

        TelephonyManager telephony = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);

        try{

            Class<?> telephonyClass = Class.forName(telephony.getClass().getName());

            Class<?>[] parameter = new Class[1];
            parameter[0] = int.class;
            Method getSimID = telephonyClass.getMethod(predictedMethodName, parameter);

            Object[] obParameter = new Object[1];
            obParameter[0] = slotID;
            Object ob_phone = getSimID.invoke(telephony, obParameter);

            if(ob_phone != null){
                imei = ob_phone.toString();

            }
        } catch (Exception e) {
            e.printStackTrace();
            throw new GeminiMethodNotFoundException(predictedMethodName);
        }

        return imei;
    }

    private static  boolean getSIMStateBySlot(Context context, String predictedMethodName, int slotID) throws GeminiMethodNotFoundException {

        boolean isReady = false;

        TelephonyManager telephony = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);

        try{

            Class<?> telephonyClass = Class.forName(telephony.getClass().getName());

            Class<?>[] parameter = new Class[1];
            parameter[0] = int.class;
            Method getSimStateGemini = telephonyClass.getMethod(predictedMethodName, parameter);

            Object[] obParameter = new Object[1];
            obParameter[0] = slotID;
            Object ob_phone = getSimStateGemini.invoke(telephony, obParameter);

            if(ob_phone != null){
                int simState = Integer.parseInt(ob_phone.toString());
                if(simState == TelephonyManager.SIM_STATE_READY){
                    isReady = true;
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
            throw new GeminiMethodNotFoundException(predictedMethodName);
        }

        return isReady;
    }

    private static class GeminiMethodNotFoundException extends Exception {

        private static final long serialVersionUID = -996812356902545308L;

        public GeminiMethodNotFoundException(String info) {
            super(info);
        }
    }
} 
```

**编辑 ：**

获取其他 SIM 插槽详细信息的“getDeviceIdGemini”等方法的访问权限预测该方法存在。

如果该方法的名称与设备制造商提供的名称不匹配，则它将不起作用。您必须为这些设备找到相应的方法名称。

可以使用 Java 反射来查找其他制造商的方法名称，如下所示：

```
public static void printTelephonyManagerMethodNamesForThisDevice(Context context) {

    TelephonyManager telephony = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
    Class<?> telephonyClass;
    try {
        telephonyClass = Class.forName(telephony.getClass().getName());
        Method[] methods = telephonyClass.getMethods();
        for (int idx = 0; idx < methods.length; idx++) {

            System.out.println("\n" + methods[idx] + " declared by " + methods[idx].getDeclaringClass());
        }
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
} 
```

***编辑 ：***

正如[Seetha](https://stackoverflow.com/users/2194978/seetha)在她的评论中指出的那样：

```
telephonyInfo.imeiSIM1 = getDeviceIdBySlot(context, "getDeviceIdDs", 0);
telephonyInfo.imeiSIM2 = getDeviceIdBySlot(context, "getDeviceIdDs", 1); 
```

它对她有用。她成功地为三星 Duos 设备中的 SIM 卡获取了两个 IMEI 号码。

添加`<uses-permission android:name="android.permission.READ_PHONE_STATE" />`

***编辑 2：***

用于检索数据的方法适用于联想 A319 和该制造商的其他手机（Credit [Maher Abuthraa](https://stackoverflow.com/users/2267723/maher-abuthraa)）：

```
telephonyInfo.imeiSIM1 = getDeviceIdBySlot(context, "getSimSerialNumberGemini", 0); 
telephonyInfo.imeiSIM2 = getDeviceIdBySlot(context, "getSimSerialNumberGemini", 1); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-16T18:35:52.477

我有一台装有 Android 4.4.4 的三星 Duos 设备，Seetha 在接受的答案中建议的方法（即调用 getDeviceIdDs）对我不起作用，因为该方法不存在。通过调用“getDefault(int slotID)”方法，我能够恢复我需要的所有信息，如下所示：

```
public static void samsungTwoSims(Context context) {
    TelephonyManager telephony = (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);

    try{

        Class<?> telephonyClass = Class.forName(telephony.getClass().getName());

        Class<?>[] parameter = new Class[1];
        parameter[0] = int.class;
        Method getFirstMethod = telephonyClass.getMethod("getDefault", parameter);

        Log.d(TAG, getFirstMethod.toString());

        Object[] obParameter = new Object[1];
        obParameter[0] = 0;
        TelephonyManager first = (TelephonyManager) getFirstMethod.invoke(null, obParameter);

        Log.d(TAG, "Device Id: " + first.getDeviceId() + ", device status: " + first.getSimState() + ", operator: " + first.getNetworkOperator() + "/" + first.getNetworkOperatorName());

        obParameter[0] = 1;
        TelephonyManager second = (TelephonyManager) getFirstMethod.invoke(null, obParameter);

        Log.d(TAG, "Device Id: " + second.getDeviceId() + ", device status: " + second.getSimState()+ ", operator: " + second.getNetworkOperator() + "/" + second.getNetworkOperatorName());
    } catch (Exception e) {
        e.printStackTrace();
    }   
} 
```

此外，我重写了迭代测试方法以恢复此信息的代码，以便它使用方法名称数组而不是 try/catch 序列。例如，要确定我们是否有两个活动的 SIM 卡，我们可以这样做：

```
private static String[] simStatusMethodNames = {"getSimStateGemini", "getSimState"};

public static boolean hasTwoActiveSims(Context context) {
    boolean first = false, second = false;

    for (String methodName: simStatusMethodNames) {
        // try with sim 0 first
        try {
            first = getSIMStateBySlot(context, methodName, 0);
            // no exception thrown, means method exists
            second = getSIMStateBySlot(context, methodName, 1);
           return first && second;
        } catch (GeminiMethodNotFoundException e) {
            // method does not exist, nothing to do but test the next
        }
    }
    return false;
} 
```

这样，如果为某些设备建议了一个新的方法名称，您只需将其添加到数组中即可。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-10T11:57:09.600

我可以从 OnePlus 2 手机读取两个 IMEI

```
 if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
                TelephonyManager manager = (TelephonyManager) getActivity().getSystemService(Context.TELEPHONY_SERVICE);
                Log.i(TAG, "Single or Dual Sim " + manager.getPhoneCount());
                Log.i(TAG, "Default device ID " + manager.getDeviceId());
                Log.i(TAG, "Single 1 " + manager.getDeviceId(0));
                Log.i(TAG, "Single 2 " + manager.getDeviceId(1));
            } 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-11-05T15:04:23.523

在搜索检查网络运营商的方法时，我发现了几种原生解决方案。

对于 API >=17：

```
TelephonyManager manager = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);

// Get information about all radio modules on device board
// and check what you need by calling #getCellIdentity.

final List<CellInfo> allCellInfo = manager.getAllCellInfo();
for (CellInfo cellInfo : allCellInfo) {
    if (cellInfo instanceof CellInfoGsm) {
        CellIdentityGsm cellIdentity = ((CellInfoGsm) cellInfo).getCellIdentity();
        //TODO Use cellIdentity to check MCC/MNC code, for instance.
    } else if (cellInfo instanceof CellInfoWcdma) {
        CellIdentityWcdma cellIdentity = ((CellInfoWcdma) cellInfo).getCellIdentity();
    } else if (cellInfo instanceof CellInfoLte) {
        CellIdentityLte cellIdentity = ((CellInfoLte) cellInfo).getCellIdentity();
    } else if (cellInfo instanceof CellInfoCdma) {
        CellIdentityCdma cellIdentity = ((CellInfoCdma) cellInfo).getCellIdentity();
    } 
} 
```

在 AndroidManifest 添加权限：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
</manifest> 
```

要获得网络运营商，您可以检查 mcc 和 mnc 代码：

*   [https://en.wikipedia.org/wiki/Mobile_country_code](https://en.wikipedia.org/wiki/Mobile_country_code)（一般信息）。
*   [https://clients.txtnation.com/hc/en-us/articles/218719768-MCCMNC-mobile-country-code-and-mobile-network-code-list-](https://clients.txtnation.com/hc/en-us/articles/218719768-MCCMNC-mobile-country-code-and-mobile-network-code-list-)（非常完整且非常最新的运营商列表）。

对于 API >=22：

```
final SubscriptionManager subscriptionManager = SubscriptionManager.from(context);
final List<SubscriptionInfo> activeSubscriptionInfoList = subscriptionManager.getActiveSubscriptionInfoList();
for (SubscriptionInfo subscriptionInfo : activeSubscriptionInfoList) {
    final CharSequence carrierName = subscriptionInfo.getCarrierName();
    final CharSequence displayName = subscriptionInfo.getDisplayName();
    final int mcc = subscriptionInfo.getMcc();
    final int mnc = subscriptionInfo.getMnc();
    final String subscriptionInfoNumber = subscriptionInfo.getNumber();
} 
```

对于 API >=23。只检查手机是否为双/三/多卡：

```
TelephonyManager manager = (TelephonyManager)context.getSystemService(Context.TELEPHONY_SERVICE);
if (manager.getPhoneCount() == 2) {
    // Dual sim
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-07T20:21:02.433

我正在查看通话记录，我注意到除了 managedCursor 内容中的常用字段外，我们在双 SIM 手机中有一个“simid”列（我查看了 Xolo A500s Lite），以便标记每个通话使用 SIM 卡在通话记录中。该值为 1 或 2，最有可能表示 SIM1/SIM2。

```
managedCursor = context.getContentResolver().query(contacts, null, null, null, null);
managedCursor.moveToNext();        
for(int i=0;i<managedCursor.getColumnCount();i++)
{//for dual sim phones
    if(managedCursor.getColumnName(i).toLowerCase().equals("simid"))
        indexSIMID=i;
} 
```

我没有在单个 SIM 手机中找到此列（我在 Xperia L 上查看过）。

因此，尽管我认为这不是检查双 SIM 卡性质的万无一失的方法，但我将其发布在这里是因为它可能对某人有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-30T04:40:41.317

尖端：

你可以尝试使用

`ctx.getSystemService("phone_msim")`

代替

`ctx.getSystemService(Context.TELEPHONY_SERVICE)`

如果您已经尝试过 Vaibhav 的回答但`telephony.getClass().getMethod()`失败了，那么以上就是适用于我的*Qualcomm*手机的方法。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-05-25T05:48:30.410

我在三星 S8 上找到了这些系统属性

```
SystemProperties.getInt("ro.multisim.simslotcount", 1) > 1 
```

另外，根据来源：[https ://android.googlesource.com/platform/frameworks/base/+/master/telephony/java/com/android/internal/telephony/TelephonyProperties.java](https://android.googlesource.com/platform/frameworks/base/+/master/telephony/java/com/android/internal/telephony/TelephonyProperties.java)

`getprop persist.radio.multisim.config`在多卡上返回“ `dsds`”或“ ”。`dsda`

我已经在三星 S8 上测试过了，它可以工作

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-04-25T22:46:38.693

Commonsware 说这是不可能的。请参阅以下内容：

[无法使用 Android SDK 检测双 SIM 卡。](https://stackoverflow.com/questions/7996197/detect-the-status-of-two-sim-cards-in-a-dual-sim-android-phone)

以下是关于该主题的进一步对话：

[谷歌开发团队的人说使用 Android SDK 检测双 SIM 卡是不可能的。](https://stackoverflow.com/questions/5255147/dual-sim-card-android)

# python - 使用 Python dulwich 检查哪些分支包含特定的 git commit sha？

> ID：14517343
> 
> 赞同：0
> 
> 时间：2013-01-25T07:31:29.383
> 
> 标签：python, git, python-3.x, python-2.7, dulwich

我想使用 dulwich 从 Python 脚本执行以下命令：

`$ git branch --contains <myCommitSha> | wc -l`

我打算检查一个特定的提交（sha）是否放置在多个分支中。

当然，我认为我可以从 Python 执行上述命令并解析输出（解析分支数），但这是不得已的解决方案。

还有其他想法/意见吗？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2019-03-14T11:42:13.450

以防万一有人想知道现在如何使用 gitpython 执行此操作：

```
repo.git.branch('--contains', YOURSHA) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T11:18:45.757

由于分支只是指向随机提交的指针，并且它们不会以任何方式“描述”树，因此没有任何东西将一些随机提交链接**到**分支。

如果给定的提交是某个提交的祖先，那么我将采取的唯一明智的方法是从分支顶部提交向下遍历所有祖先链。

换句话说，在德威我会遍历分支并向后遍历以查看链上是否有 sha。

我相当肯定这正是`git branch --contains <myCommitSha>`我不知道任何其他捷径​​的作用。

由于您的选择是 (a) 让 python 进行迭代或 (b) 让 C 进行相同的迭代，所以我会选择 C。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T14:38:18.790

没有内置函数，但你当然可以自己实现。

你也可以这样做（未经测试）：

```
branches = [ref for ref in repo.refs.keys("refs/heads/") if
            any((True for commit in repo.get_walker(include=[repo.refs[ref]])
                 if commit.id == YOURSHA))] 
```

这将为您提供包含给定提交的所有分支头的列表，但运行时间为*O(n*m)*，*n*表示您的仓库中的提交数量，*m*表示分支的数量。git 实现的运行时间可能为*O(n)*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-24T21:46:22.157

如果有人使用 GitPython 并想要所有分支

```
import git
gLocal = git.Git("<LocalRepoLocation>")
gLocal.branch('-a','--contains', '<CommitSHA>').split('\n') 
```

# linux - 设置jenkins进程的umask

> ID：14517348
> 
> 赞同：10
> 
> 时间：2013-01-25T07:31:51.320
> 
> 标签：linux, jenkins, file-permissions, umask

我们的 jenkins CI 服务器 (v1.499) 在 CI 机器上运行调用 URL 的测试。这些 URL 背后的应用程序会随着单元测试过程的更改而更改相同的临时文件，因此这些文件需要是组可写的。我[已经为 apache](https://stackoverflow.com/q/428416/282601)解决了这个问题，但是 jenkins 完全失败了。

修改`/etc/default/jenkins`以包含`umask 002`命令无济于事。重新启动服务后，我正在[检查。`gdb`](https://stackoverflow.com/a/165718/282601)

那么如何更改詹金斯的 umask 设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-07T19:01:56.563

我在 Ubuntu 12.04.5 上遇到了同样的问题

似乎他们已将标准 umask 从 022 更改为 027 以提高安全性

[https://www.mail-archive.com/jenkinsci-commits@googlegroups.com/msg30397.html](https://www.mail-archive.com/jenkinsci-commits@googlegroups.com/msg30397.html)

因此，我通过更改`/etc/default/jenkins`为`UMASK=002` 解决了我的问题，将其切换回了我的设置，也许你确实设置错了，或者忘记重新启动詹金斯。

检查正在运行的守护进程的umask

`ps ax | grep jenkins | grep umask`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:20:07.477

如果这些测试使用 Ant 运行，那么您可以尝试`~/.antrc`在 Ant 启动时调用的文件中设置 umask。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-05T09:41:08.680

通过配置守护进程来设置umask，只需添加`--umask=002`到/etc/init.d/jenkins中的守护进程args：

```
DAEMON_ARGS="--name=$NAME --inherit --env=JENKINS_HOME=$JENKINS_HOME --output=$JENKINS_LOG --pidfile=$PIDFILE --umask=002" 
```

# php - Zend 框架表单助手

> ID：14517350
> 
> 赞同：0
> 
> 时间：2013-01-25T07:31:59.320
> 
> 标签：php, zend-framework

我正在尝试弄清楚下面的工作原理......

从哪里来`Jobs_Form_Report_Productivity()`？

```
public function productivityAction(){
        $this->view->headTitle('Number of Unique Jobs by Portfolio');
        $this->view->form = new Jobs_Form_Report_Productivity();

        if($this->view->form->isValid($_POST))
        {
            $report = new Model_Users();

            $this->view->results = $report->reportProductivity(
                $this->view->form->getStartDate('yyy-MM-dd'), 
                $this->view->form->getEndDate('yyy-MM-dd')
            );
        }

    } 
```

这是某种形式的模型类吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:36:37.180

ZF1 使用 PEAR 命名空间（注意下划线），每个下划线都成为目录分隔符，类名的最后一部分通常是文件名，通常类似于 'Pr​​oductivity.php'，因此 Jobs_From_Report_Productivity 应该位于 Jobs/Form/Report在一个名为“Productivity.php”的文件中。由于您要查找的类名不是以“Application_”开头，因此我的建议是它是一个名为“jobs”的模块命名空间，因此您可能正在寻找“application/modules/jobs/forms/report/Productivity.php”，否则它可能在库目录中，如 library/jobs/forms/report/Productivity.php。当然，用 ZF1 用来定位类的位置完全可以做一些奇怪而奇妙的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:07:21.080

Zend Framework 使用 Zend_Loader_Autoloader 加载被调用但在脚本范围内没有找到的类。当调用未找到的类时，自动加载器会启动并通过几个简单的步骤找到并包含类文件。

1) 将类名中的所有 _（下划线符号）转换为 /（斜杠）。例子： Zend_Loader_Autoloade 变成 Zend/Loader/Autoloader

2) 后缀 .php 附加到转换后的字符串的末尾，变为：Zend/Loader/Autoloader.php

3) 检查“Zend_”名称空间（名称空间作为类前缀，而不是 PHP5.3 名称空间）是否已向自动加载器注册。如果名称空间已注册，那么自动加载器将发出：include Zend/Loader/Autoloader.php。

4）如果找到该类，则返回它并继续脚本。如果根据配置找不到类，则抛出异常或错误。

前提条件： Zend/Loader/Autoloader.php 文件应该在当前脚本的 PHP 包含路径中。

因此，Jobs_Form_Report_Productivity 将对应于 Jobs/Form/Report/Productivity.php，并且可以在一个（或多个）包含路径中找到。使用 PHP 查找包含路径：get_include_path()。大多数时候（在 ZF1 中）包含路径是在 Zend Framework 应用程序的公共目录中的 index.php 文件中设置的。

请参阅：[https](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md) ://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md ，因为来自 PHP-FIG 的人将这种自动加载方法作为标准的“PSR-O”

希望这可以帮助 ：）

# coldfusion - Coldfusion的未来是否有保障？

> ID：14517353
> 
> 赞同：0
> 
> 时间：2013-01-25T07:32:17.713
> 
> 标签：coldfusion, coldfusion-9, coldfusion-10

我是一名拥有 3 年经验的软件开发人员。在冷融合中。可能这个问题是最愚蠢的一个。 **冷聚有没有未来？**

有些点迫使我问这个问题

*   非常小的开发者社区。
*   Coldfusion 10 看起来并不那么令人印象深刻[这个版本有很多与性能相关的问题]
*   Web 应用程序中只有 1.1% 的 CF 份额。
*   非常贵

我只是想知道不同人对冷聚变未来的体验。继续作为冷融合开发人员是否是一个好的决定/我是否应该开始学习其他技术来确保我的未来。请分享您对此的看法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:57:59.980

这不是一个真正的编程问题。然而：

1) 小型开发者社区 - 是的。但我认为社区质量很高。

2) 我想了解更多关于您对 ColdFusion 10 的性能问题的了解。CF10 主要是对其在 Tomcat 上的内部部署与过时的 JRUN 服务器的返工。我听说过各种错误，但老实说大多数并没有影响到我，Adobe 现在确实在 CF 中内置了修补机制，但它仍然需要工作。

3) 我认为你可以看到许多不同语言中的份额非常低，这不是大 2：.NET/PHP。然而，Adobe 报告说他们现在已经恢复到 ColdFusion Server 2008 年的销售水平。

4) 如果成本对您来说是个问题，可以使用 Railo 和 Open Blue Dragon 形式的开源服务器。Adobe 还免费提供 CF Server 的开发者版，并且还有免费的许可证可供教育/学生使用。

Adobe 已承诺定期发布周期，并已承诺在未来几年内发布/支持。但当然，这种情况随时可能改变。

我认为最好学习另一种语言，我强烈建议学习 JavaScript，因为它可以补充您的 ColdFusion 技能，并且您可以冒险使用 NodeJS 进行后端 JavaScript 编程

这是一篇有趣的文章： [http ://highscalability.com/blog/2013/1/16/what-if-cars-were-rented-like-we-hire-programmers.html](http://highscalability.com/blog/2013/1/16/what-if-cars-were-rented-like-we-hire-programmers.html)

我认为，如果您学习了可以应用于大多数语言的技能，那么您作为开发人员仍然很有价值，并且更改语言应该主要是语义问题。我最近看了一个 Java 和 C# Web 开发演示文稿，我真的很高兴看到这些语言与我目前的知识有多么相似......他们使用类、ORM、测试等，我可以很容易地看到自己过渡到这些语言中的任何一种给了一点时间。

# iphone - 获取 iPhone 的物理屏幕尺寸（以英寸为单位）

> ID：14517356
> 
> 赞同：6
> 
> 时间：2013-01-25T07:32:32.503
> 
> 标签：iphone, ios, screen, screen-size

如何以英寸为单位以编程方式获取屏幕尺寸（例如 iPhone 4、3.5 英寸）。

我通过检测 iPhone/iPad 型号找到了一种方法，但硬编码不是我想要的，所以我看起来不像那样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-01-30T14:55:20.030

用于屏幕的 Swift 4 版本

```
 let scale = UIScreen.main.scale

    let ppi = scale * ((UIDevice.current.userInterfaceIdiom == .pad) ? 132 : 163);

    let width = UIScreen.main.bounds.size.width * scale
    let height = UIScreen.main.bounds.size.height * scale

    let horizontal = width / ppi, vertical = height / ppi;

    let diagonal = sqrt(pow(horizontal, 2) + pow(vertical, 2))
    let screenSize = String(format: "%0.1f", diagonal) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T07:41:09.953

我找到了一个不错的 GitHub 项目，名为“GBDeviceInfo”：

```
if ([GBDeviceInfo deviceDetails].display == GBDeviceDisplayiPhone35Inch) {
    //3.5 inch iphone
}
else if ([GBDeviceInfo deviceDetails].display == GBDeviceDisplayiPhone4Inch) {
    //4 inch iphone
}
else if ([GBDeviceInfo deviceDetails].display == GBDeviceDisplayiPad) {
    //ipad
} 
```

这是：[GBDeviceInfo](https://github.com/lmirosevic/GBDeviceInfo)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-25T08:27:34.590

这将找到设备的对角线屏幕尺寸：

```
float scale = [[UIScreen mainScreen] scale];

float ppi = scale * ((UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) ? 132 : 163);

float width = ([[UIScreen mainScreen] bounds].size.width * scale);
float height = ([[UIScreen mainScreen] bounds].size.height * scale);

float horizontal = width / ppi, vertical = height / ppi;

float diagonal = sqrt(pow(horizontal, 2) + pow(vertical, 2)); 
```

`diagonal`将包含屏幕的对角线大小（以英寸为单位）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-08-20T05:32:49.667

我找到了这个库，它可以用来获取以英寸为单位的屏幕尺寸

[https://github.com/detroit-labs/IRLSize](https://github.com/detroit-labs/IRLSize)

您可以按以下方式获得以英寸为单位的屏幕尺寸

```
let screenHeight = UIDevice.current.physicalScreenHeight
let screenWidth = UIDevice.current.physicalScreenWidth 
```

# freemarker - 无法在 freemarker 模板中加载图像

> ID：14517362
> 
> 赞同：3
> 
> 时间：2013-01-25T07:32:59.847
> 
> 标签：freemarker, dropwizard

我对使用 Dropwizard 和 Freemarker 模板非常陌生。我正在尝试加载免费的标记模板。但是，图像未加载到正在显示的页面中

我使用 html 的标准 img 标签来显示图像

```
<img src="/media/images/mload.png" width="18" height="18" /> 
```

图像在 jar 文件中可用。

这是项目的结构

源代码 | - 主要 | --资源 | --媒体 | ---图片 | ---mload.png

请让我知道是否缺少任何显示图像的内容

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T10:03:28.773

从[官方文档](http://www.dropwizard.io/0.9.2/docs/manual/core.html#bundles)：

> `AssetBundle`提供了一种简单的方法来提供服务`src/main/resources/assets`目录中的静态资产作为服务中可用的文件`/assets/*`。

您需要使用以下内容将其添加`AssetBundle`到您的服务中：

```
@Override
public void initialize(Bootstrap<HelloWorldConfiguration> bootstrap) {
    bootstrap.setName("hello-world");
    bootstrap.addBundle(new AssetsBundle());
} 
```

# html - CSS3 background-size:cover 显示意外行为

> ID：14517375
> 
> 赞同：0
> 
> 时间：2013-01-25T07:34:11.213
> 
> 标签：html, css

我有一个 HTML 文件，如下所示。它使用元素上的“背景大小：覆盖”设置。

当我在 IE9 上使用 File/Open 选项打开文件时，它会显示覆盖整个窗口的背景图像。这是预期的行为。

但是，当我通过 Apache 服务器（http://127.0.0.1/test.html）打开同一个文件时，背景图像不会水平覆盖整个窗口.....它会在右端留下一个空白的垂直条的窗户。这不是预期的行为。

我也看到其他背景图像文件的行为相同。似乎从 Apache 服务器获取 HTML 页面时，“background-size:cover”设置只会将图像放大到一定程度。但是当使用 File/Open 选项获取它时，它会将背景图像放大到足以覆盖整个元素的宽度。

并且，还可以看到与背景大小值的其他设置类似的行为（例如，当我设置背景大小：100% 100%；）。

**这是 HTML 文件：**

```
<html>
<head>
<style>
        body
        {
            background:url('desert.jpg');
            background-size:cover;
            background-repeat:no-repeat;
        }
</style>
</head>

<body>

        This is a line

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:21:17.767

试试这个代码，它应该可以解决你的问题：

```
<style>
    body
    {
        background: url("desert.jpg") center center fixed no-repeat;            
        background-size: cover;
        background-color: #000;
        overflow: auto;
        filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='desert.jpg', sizingMethod='scale');
        -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='desert.jpg', sizingMethod='scale')";
    }
</style> 
```

![图片](../Images/96be4d447cce437be619ed3c0301c802.png) 如需进一步解释，请阅读本文：[http ://cookbooks.adobe.com/post_scale_background_image_to_browser_size-17590.html](http://cookbooks.adobe.com/post_scale_background_image_to_browser_size-17590.html)

# php - 如何使用 Javascript 或 PHP 将 html 转换为 pdf 或图像

> ID：14517378
> 
> 赞同：-1
> 
> 时间：2013-01-25T07:34:45.910
> 
> 标签：php, javascript, image, pdf

> **可能重复：**
> [使用 PHP 将 HTML + CSS 转换为 PDF？](https://stackoverflow.com/questions/391005/convert-html-css-to-pdf-with-php)

如何转换浏览器中呈现的当前html

转换为图像或 pdf（所以稍后我可以将其转换为图像），

使用javascript（画布或任何东西）或php？

什么是替代解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T07:36:48.370

对于 PDF 转换，它将为您提供帮助。

[dompdf：HTML 到 PDF 转换器](https://github.com/dompdf/dompdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T07:39:17.867

如果你想通过 PHP 生成 HTML+CSS 的 PDF，那么有用于从 HTML + CSS 生成 PDF 的[TCPDF](http://www.tcpdf.org/)。

> TCPDF 是一个 PHP 类，用于在不需要外部扩展的情况下生成 PDF 文档。TCPDF 支持 UTF-8、Unicode、RTL 语言、XHTML、Javascript、数字签名、条形码等等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T07:38:20.953

对于使用 FPDF - php 库创建 pdf im，如果您有一个选项，请使用它...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T07:46:45.873

[为了在客户端将 html 转换为 PDF，您可以使用[printElement](http://archive.plugins.jquery.com/project/printElement)

# mysql - 我们如何在活动记录中进行多重联接Codeigniter

> ID：14517379
> 
> 赞同：1
> 
> 时间：2013-01-25T07:34:54.357
> 
> 标签：mysql, codeigniter, activerecord

大家好，作为数据库和 Codeigniter 的初学者，您能帮助我吗？我们如何在活动记录中编写这个多重内连接和左连接查询。

```
SELECT suppliers.*, category.strCategory, category_1.strCategory AS strParent, 
tblcitylist.city_name
FROM ((suppliers INNER JOIN category ON suppliers.intCat=Category.intId) INNER JOIN tblcitylist ON 
suppliers.intCity=tblcitylist.city_id) LEFT JOIN category AS category_1 ON 
category.intParent=Category_1.intId
WHERE status='y'; 
```

我有三个表供应商，tblcitylist 和类别。想要获取具有 intCat 和 intCity 的供应商的数据，结果是供应商表的数据具有城市名称（city_name）和类别名称（strCategory）。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:51:21.970

也许这就是你所追求的......

```
$query = $this->db->select('suppliers.*, category.strCategory, category_1.strCategory AS strParent, tblcitylist.city_name')
            ->from('suppliers')
            ->join('category',                  'suppliers.intCat=Category.intId',          'inner')
            ->join('tblcitylist',               'suppliers.intCity=tblcitylist.city_id',    'inner')
            ->join('category as `category_1',   'category.intParent=Category_1.intId',      'left')
            ->where('status','y')
                ->get(); 
```

CI 数据库文档：[https ://www.codeigniter.com/user_guide/database/index.html](https://www.codeigniter.com/user_guide/database/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:58:37.193

这似乎是使用直接 SQL 会更简单的情况。更不用说它执行得更快了。

```
$sql = "SELECT........";
$query = $this->db->query($sql); 
```

# javascript - 如何在 Chrome 开发者工具中解析 console.log？

> ID：14517380
> 
> 赞同：0
> 
> 时间：2013-01-25T07:35:03.273
> 
> 标签：javascript, unit-testing, google-chrome, cordova, logging

现在我正在尝试对一个简单的 Phonegap 应用程序进行单元测试。特别是，我想在这个应用程序中测试振动功能。[此处](https://stackoverflow.com/questions/14457801/how-to-test-vibration-function-in-android)描述了此问题。

在建议的解决方案中，通过调用将振动事件写入 Chrome 的日志`console.log()`。为了编写单元测试，我想在那之后解析 Chrome 的日志。是否可以通过 JavaScript 做到这一点？

在这个[参考问题](https://stackoverflow.com/questions/7627113/save-the-console-log-in-chrome-to-a-file)中，日志的内容首先写入磁盘。我还想知道是否可以在不将其保存到磁盘的情况下读取日志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:37:39.290

我在引用问题中的回答为您提供了一种登录控制台的方法，但您可以用任何您想要的东西替换抽象中的逻辑。您可以将振动事件添加到字典或数组中，然后稍后处理这些值。

# mysql - 从 MySQL 获取类似的查询

> ID：14517384
> 
> 赞同：0
> 
> 时间：2013-01-25T07:35:29.643
> 
> 标签：mysql, sql

如何进行查询以仅获取具有相同`screen_name`和`skip`= 0 值的记录？

```
---------------------------
| id | screen_name | skip |
---------------------------
| 1  | mary        | 0    |
| 2  | john        | 0    |
| 3  | tom         | 1    |
| 4  | mary        | 0    |
| 5  | ben         | 1    |
| 6  | john        | 1    |
--------------------------- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:37:15.240

```
SELECT  screen_Name
FROM    tableName
WHERE   skip = 0
GROUP   BY screen_name
HAVING  COUNT(*) > 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/50d86/1)

**更新**

如果您想获取所有记录而不仅仅是`screen_name`, 使用`JOIN`而不是`IN`

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT  screen_Name
            FROm    tableName
            WHERE   skip = 0
            GROUP   BY screen_name
            HAVING  COUNT(*) > 1
        ) b ON a.screen_name = b.screen_name 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/50d86/2)

要获得更快的性能，请添加一个`INDEX`on 列`screen_name`以获得更快的性能。

```
ALTER TABLE tableName ADD INDEX index_name (screen_Name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:39:57.853

你可以尝试使用：

```
select id,screen_name,skip
  from TABLE
 where skip=0
   and screen_name in (select t2.screen_name
                         from TABLE t2
                     group by t2.screen_name
                    having count(*)>1 
                      ) 
```

这将为您提供所有带有 skip=0 和重复 screen_name 的记录

# java - BODMAS系统的加减法

> ID：14517390
> 
> 赞同：2
> 
> 时间：2013-01-25T07:36:01.300
> 
> 标签：java, math, arraylist

我一直在构建一个简单的公式计算器，并且被加法和减法困住了。如您所知，在计算方程式时，您遵循优先级的算术规则，即括号，顺序：*幂函数，除法，乘法，加法和减法*。问题是加法和减法的优先级相同，因此您可以从左到右阅读它。到目前为止，这是我的代码：

```
{
ArrayList<String> equation = java.util.Arrays.asList({"2","-","2","+","5"});

  while(equation.contains("+")){
          addMe(equation);
  }
  while(equation.contains("-")){
          minusMe(equation);            
  }
}

public static void addMe(ArrayList<String> numberList){
 for (int i = 0, n = numberList.size(); i < n; i++) { 
   String value = (String) numberList.get(i); 
   if(value.equals("+")){

    String wordBefore = (String) numberList.get(i-1);
    String wordAfter = (String) numberList.get(i+1);
    System.out.println("This is the word before " + wordBefore);
    System.out.println("This is the word after " + wordAfter);
    double doubleFromBefore = Double.parseDouble(wordBefore);
    double doubleFromAfter = Double.parseDouble(wordAfter);
    double answer = doubleFromBefore + doubleFromAfter;
    System.out.println("This is the answer: " + answer);
    String stringAnswer = String.valueOf(answer);
    String newNum2 = value.replace(value, stringAnswer);
    numberList.set(i,newNum2);
    numberList.remove(i-1);
    numberList.remove(i);
    break;
  }
 }   
} 
```

minusMe 方法与 addMe 方法完全一样，只是在相关位置带有“-”。我遇到的问题是一次从左到右读取一个项目，然后执行加法或减法。理想情况下，我认为我需要将我的 2 个 while 循环与迭代器结合起来，以解决问题，但我的尝试没有奏效。关于这是否能解决我的问题的任何想法？如果是这样，请提供修改后的循环。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T07:56:19.693

看看这个

```
java.uti.ArrayList<String> equation = java.util.Arrays.asList({"2","-","2","+","5"});
java.util.Iterator<String> equIterator = equation.iterator();
int result = 0;
int multiplier = 1;
while(equIterator.hasNext()){
     String operandOrOperator = equIterator.next();
     if(operandOrOperator.equals("+")){
          multiplier=1;
     }else if(operandOrOperator.equals("-")){
          multiplier=-1;
     }else if(operandOrOperator.equals("*")){
          result*=Integer.parseInt(equIterator.next()); // Assuming that next element will be there always after operator.
     }else{
          result+=(multiplier * Integer.parseInt(operandOrOperator));
     }
}
System.out.println("Final result : " + result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T23:39:51.827

你做这一切都是错的。您至少需要使用递归下降表达式解析器，或 Dijkstra 的 shunting-yard 算法，如果要发展成某种语言，甚至可能需要使用解析器生成器。您将通过网络搜索找到所有这些内容。

# c# - 动态更改上传控件的图像路径

> ID：14517392
> 
> 赞同：0
> 
> 时间：2013-01-25T07:36:08.283
> 
> 标签：c#, asp.net

我在 ASP.NET 和 C# 中工作。

我的应用程序中有一个`Fileupload`控件。我想在上传过程中更改图像的存储路径（在硬盘上）。我该怎么做。

C#代码：

```
 string filename = Path.GetFileName(fileuploadimages.PostedFile.FileName);
    //Save images into Images folder
    fileuploadimages.SaveAs(Server.MapPath("**~/database/**" + filename));
    //Getting dbconnection from web.config connectionstring
    SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["constr"].ToString());
    //Open the database connection
    con.Open();
    //Query to insert images path and name into database
    SqlCommand cmd = new SqlCommand("Insert into tblImageupload1(Imagename,Imagepath) values(@ImageName,@ImagePath)", con);
    //Passing parameters to query
    cmd.Parameters.AddWithValue("@Imagename", filename);
    cmd.Parameters.AddWithValue("@Imagepath", "../Database/" + filename);
    //cmd.Parameters.Add("@price");
    cmd.ExecuteNonQuery();
    //Close dbconnection
    con.Close(); 
```

**注意**：我想`~/database/`在上传期间动态更改路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:51:07.587

你说“当我上传时我需要改变。因为我有不同类型的图像的单独文件夹”，所以你可能有一种方法来检测图像的类型。假设您已经检测到当前上传图像的类型并将其存储在变量 中`imagetype`。

```
string imagetype = ""; // type of image is here, i.e. "Bird", "Forest", "Mountain"

string imagepath = "/images";
switch (imagetype)
{
  case "Bird": imagepath = "/ImagesOfBirds"; break;
  case "Forest": imagepath = "/ImagesOfForests"; break;
  case "Mountain": imagepath = "/ImagesOfMountains"; break;
}

string path = Path.Combine(imagepath, filename);
fileuploadimages.SaveAs(path); 
```

# javascript - 如何在jquery中为div id动态添加“#”

> ID：14517396
> 
> 赞同：-7
> 
> 时间：2013-01-25T07:36:19.760
> 
> 标签：javascript, jquery, asp.net

当我们单击拇指图像时，我想将动态图像标签添加到动态 div 中。请找到下面的代码，我无法使用 html() 将 img 标签设置为动态 div。

div 受 asp.net 控制

```
<script type="text/javascript">
    function setImage(Divid) {

        $(Divid).html("<img style=\"height:150px;width:150px;\" src=" + "" + names + "" + ">"); 

    }
</script> 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:39:21.163

使用您的功能，如下所示。

```
function setImage(Divid)
 { 
  $('#'+Divid).html("");
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:42:02.667

在创建动态 div 时给出一个 id

喜欢

```
var createDiv =('<div id="dynamicdiv"></div>'); 
```

然后将图像附加到它之后

```
var dynamicImageDiv =         $('#'+dynamicdiv).html("<img style=\"height:150px;width:150px;\" src=" + "" + names +"" + ">"); 
```

确保在追加之前创建了动态 div。

# javascript - 为 jCarousel 自定义 Next 和 Back 按钮回调

> ID：14517401
> 
> 赞同：0
> 
> 时间：2013-01-25T07:36:57.080
> 
> 标签：javascript, jquery-plugins, jquery, jcarousel

我已经实现了 jCarousel 从图像列表中显示 4 个可见图像。

在加载 jcarousel 时，第一个图像被突出显示。当用户单击另一个图像时，它会突出显示。请检查演示 html。

我正在努力添加以下功能。

*   单击下一个或上一个按钮时，应突出显示轮播中的第一个可见图像。我无法在列表中获得可见图像。

请在下面找到带有 jquery 代码的测试 html。

提前致谢..！

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="http://sorgalla.com/projects/jcarousel/lib/jquery.jcarousel.js"></script> 
<style>
.jcarousel-skin-tango .jcarousel-container {
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
   border-radius: 10px;
    background: #F0F6F9;
    border: 1px solid #346F97;
}
.jcarousel-skin-tango .jcarousel-container-horizontal {
    width: 335px;
    padding: 20px 40px;

}
.jcarousel-skin-tango .jcarousel-container-vertical {
    width: 75px;
    height: 245px;
    padding: 40px 20px;
}
.jcarousel-skin-tango .jcarousel-clip-horizontal {
    width: 335px;
    height: 80px;
    overflow:hidden;
}
.jcarousel-skin-tango .jcarousel-item {
    width: 75px;
    height: 75px;
}
.jcarousel-skin-tango .jcarousel-item-horizontal {
    margin-left: 0;
    margin-right: 10px;
}

.jcarousel-skin-tango .jcarousel-next-horizontal {
    position: absolute;
    top: 43px;
    right: 5px;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: transparent url(http://sorgalla.com/projects/jcarousel/skins/tango/next-horizontal.png) no-repeat 0 0;
}

.jcarousel-skin-tango .jcarousel-direction-rtl .jcarousel-next-horizontal {
    left: 5px;
    right: auto;
    background-image: url(http://sorgalla.com/projects/jcarousel/skins/tango/prev-horizontal.png);
}

.jcarousel-skin-tango .jcarousel-next-horizontal:hover,
.jcarousel-skin-tango .jcarousel-next-horizontal:focus {
    background-position: -32px 0;
}

.jcarousel-skin-tango .jcarousel-next-horizontal:active {
    background-position: -64px 0;
}

.jcarousel-skin-tango .jcarousel-next-disabled-horizontal,
.jcarousel-skin-tango .jcarousel-next-disabled-horizontal:hover,
.jcarousel-skin-tango .jcarousel-next-disabled-horizontal:focus,
.jcarousel-skin-tango .jcarousel-next-disabled-horizontal:active {
    cursor: default;
    background-position: -96px 0;
}

.jcarousel-skin-tango .jcarousel-prev-horizontal {
    position: absolute;
    top: 43px;
    left: 5px;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: transparent url(http://sorgalla.com/projects/jcarousel/skins/tango/prev-horizontal.png) no-repeat 0 0;
}

.jcarousel-skin-tango .jcarousel-direction-rtl .jcarousel-prev-horizontal {
    left: auto;
    right: 5px;
    background-image: url(next-horizontal.png);
}

.jcarousel-skin-tango .jcarousel-prev-horizontal:hover, 
.jcarousel-skin-tango .jcarousel-prev-horizontal:focus {
    background-position: -32px 0;
}

.jcarousel-skin-tango .jcarousel-prev-horizontal:active {
    background-position: -64px 0;
}

.jcarousel-skin-tango .jcarousel-prev-disabled-horizontal,
.jcarousel-skin-tango .jcarousel-prev-disabled-horizontal:hover,
.jcarousel-skin-tango .jcarousel-prev-disabled-horizontal:focus,
.jcarousel-skin-tango .jcarousel-prev-disabled-horizontal:active {
    cursor: default;
    background-position: -96px 0;
}
</style>
<script>
 $(document).ready(function(){
            var i = 0;
            function nextCall(carousel, button, enabled) {              
                console.log('nextCall '+i, enabled);            
            }

            function prevCall(carousel, button, enabled) {          
                console.log('prevCall '+i, enabled);            
            }

 jQuery('#mycarousel').jcarousel({
        scroll:2,   
        animation:'slow',   
        initCallback:function(){
             $("#mycarousel li:eq(0)").css('border','3px solid green');
            }
        ,
        buttonNextCallback:   nextCall,
        buttonPrevCallback:   prevCall  
     });
     $("#mycarousel li").click(function(){
         $("#mycarousel li").css('border','none');
         $(this).css('border','3px solid green');
     });     
     });
</script>
<title>Smart JCarousel</title>
</head>
<body>
<div class="tab-container">
    <ul id="mycarousel" class="jcarousel-skin-tango">
        <li><img src="http://static.flickr.com/66/199481236_dc98b5abb3_s.jpg" width="75" height="75" alt="" /></li>
        <li><img src="http://static.flickr.com/75/199481072_b4a0d09597_s.jpg" width="75" height="75" alt="" /></li>
        <li><img src="http://static.flickr.com/57/199481087_33ae73a8de_s.jpg" width="75" height="75" alt="" /></li>
        <li><img src="http://static.flickr.com/77/199481108_4359e6b971_s.jpg" width="75" height="75" alt="" /></li>
        <li><img src="http://static.flickr.com/58/199481143_3c148d9dd3_s.jpg" width="75" height="75" alt="" /></li>
        <li><img src="http://static.flickr.com/72/199481203_ad4cdcf109_s.jpg" width="75" height="75" alt="" /></li>
        <li><img src="http://static.flickr.com/58/199481218_264ce20da0_s.jpg" width="75" height="75" alt="" /></li>
        <li><img src="http://static.flickr.com/69/199481255_fdfe885f87_s.jpg" width="75" height="75" alt="" /></li>
        <li><img src="http://static.flickr.com/60/199480111_87d4cb3e38_s.jpg" width="75" height="75" alt="" /></li>
        <li><img src="http://static.flickr.com/70/229228324_08223b70fa_s.jpg" width="75" height="75" alt="" /></li>
      </ul>
    </ul>
</div>
</body>
</html> 
```

# c++ - openCV 出错

> ID：14517406
> 
> 赞同：3
> 
> 时间：2013-01-25T07:37:15.647
> 
> 标签：c++, opencv, makefile

我一直在尝试在最近发布的 openCV（2.4.3）上运行 make，但我遇到了问题。我在 openCV 目录中创建了一个构建文件夹并运行了以下命令：

```
cmake -G "Unix Makefiles" ..
make -js 
```

我收到以下错误：

```
Linking CXX shared library ../../lib/libopencv_highgui.dylib
[ 35%] Building CXX object modules/video/CMakeFiles/opencv_video.dir/src/bgfg_gaussmix.cpp.o
Undefined symbols for architecture x86_64:
  "_ModPlug_GetCurrentOrder", referenced from:
     _modplug_read_packet in libavformat.a(libmodplug.o)
  "_ModPlug_GetCurrentPattern", referenced from:
     _modplug_read_packet in libavformat.a(libmodplug.o)
  "_ModPlug_GetCurrentRow", referenced from:
     _modplug_read_packet in libavformat.a(libmodplug.o)
  "_ModPlug_GetCurrentSpeed", referenced from:
     _modplug_read_packet in libavformat.a(libmodplug.o)
  "_ModPlug_GetCurrentTempo", referenced from:
     _modplug_read_packet in libavformat.a(libmodplug.o)
  "_ModPlug_GetLength", referenced from:
     _modplug_read_header in libavformat.a(libmodplug.o)
  "_ModPlug_GetMessage", referenced from:
     _modplug_read_header in libavformat.a(libmodplug.o)
  "_ModPlug_GetName", referenced from:
     _modplug_read_header in libavformat.a(libmodplug.o) 
```

还有更多，但消息的其余部分与此类似。看起来链接器在使用 highgui 时遇到了困难。

尝试使用 XCode 运行代码时，当我（不知何故奇迹般地）以前安装了 openCV（我删除了以前的安装）时，我收到了类似的错误

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-26T07:59:58.473

我不知道这个特定问题的原因。但是，我找到了适合我情况的解决方法。我禁用了 ffmpeg，它似乎可以编译。我清理了我的构建目录并使用选项 -DWITH_FFMPEG=OFF 运行 cmake

# c# - IComparable 需要对列进行排序

> ID：14517409
> 
> 赞同：2
> 
> 时间：2013-01-25T07:37:42.743
> 
> 标签：c#, devexpress, xtragrid, icomparable

我的 DevExpress xtragrid 中的一列不是排序、分组或过滤。对类似问题的回答表明我需要实现 IComparable，但是当我这样做时，它根本不再显示在列中。

```
public class Flow : System.IComparable<Flow>
{
  public Flow(int id, string name, string description)
  {
    this.ID = id;
    this.Name = name;
    this.Description = description;
  }

  public int ID { get; private set; }

  public string Name { get; private set; }

  public string Description { get; private set; }

  public override string ToString()
  {
    return Name;
  }

  public override bool Equals(object obj)
  {
    Flow flow = obj as Flow;
    if (flow == null) return false;
    return this.ID == flow.ID;
  }

  public static bool operator ==(Flow flow1, Flow flow2)
  {
    if (object.ReferenceEquals(null, flow1))
      return object.ReferenceEquals(null, flow2);
    return flow1.Equals(flow2);
  }

  public static bool operator !=(Flow flow1, Flow flow2)
  {
    return !(flow1 == flow2);
  }

  public override int GetHashCode()
  {
    return ID;
  }

  public int CompareTo(Flow other)
  {
    return this.Name.CompareTo(other.Name);
  }
} 
```

我做错了什么？

**更新：**

[在DevExpress](http://www.devexpress.com/Support/Center/Question/Details/Q470102)上询问...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:21:52.847

消失的内容是一个不相关的问题 - 一个红鲱鱼。一旦我实施，该列就允许排序，`IComparable`而不是`IComparable<Flow>`

```
public int CompareTo(object obj)
{
  if (object.ReferenceEquals(null, obj))
    return 1;
  Flow flow = obj as Flow;
  if (flow == null)
    throw new ArgumentException("Object is not of type Flow");
  return this.Name.CompareTo(flow.Name);
} 
```

[来自Method](http://msdn.microsoft.com/en-us/library/system.icomparable.compareto.aspx)的 MSDN 文档[`IComparable.CompareTo`](http://msdn.microsoft.com/en-us/library/system.icomparable.compareto.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:32:54.380

看起来您的 CompareTo 方法是错误的。尝试将以下内容添加到 CompareTo() 方法中，看看它是否有效：

```
 public int CompareTo(Flow other)
    {
      // Alphabetic sort if name is equal.
      if this.Name == other.Name
      {
        return this.Name.CompareTo(other.Name);
      }
     //Default sort.
     return other.Name.CompareTo(this.Name);
    } 
```

让我知道它是否解决了您的问题。

# matlab - 创建矩阵时的Matlab错误

> ID：14517411
> 
> 赞同：0
> 
> 时间：2013-01-25T07:37:47.150
> 
> 标签：matlab, matrix

我想在矩阵中插入“双”类型值。为此，我正在使用以下 Matlab 代码行创建一个矩阵：

```
dpitchcnt=(N/256); %N is total number of byte
pitchvec(1:int64(dpitchcnt)); %creating a matrix 'pitchvec' with 1 row and int64(dpitchcnt)' columns   
size(pitchvec) %Trying to display the size. 
```

执行上述操作时出现以下错误：

> “int64”类型的输入参数的未定义函数或方法“_colonobj”。==> 31 pitchevec(1:int64(dpitchcnt)) 处的样本错误；

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T07:43:01.627

该语法`varName(1:10)`将获取 的前 10 个值`varName`，而不是创建变量`varName`；

要创建矩阵，您可以使用

```
pitchvec = zeros(1,int64(dpitchcnt)); %A zero-matrix
matrixSize = size(pitchvec); 
```

你也可以使用`ones(n,m);%Create a n times m matrix with 1 all over.`

# c# - 什么是 inproc 变量，它们如何使会话更快？

> ID：14517415
> 
> 赞同：2
> 
> 时间：2013-01-25T07:38:33.437
> 
> 标签：c#, asp.net, visual-studio-2008

我了解 InProc 变量是什么，但它们如何使会话更快？是因为他们的访问时间少吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:48:55.483

检查此主题和 adt 给出的答案。

[对于 asp.net 中的会话状态模式，InProc 或 SQL Server 哪个更好？](https://stackoverflow.com/questions/8688047/which-one-is-better-inproc-or-sql-server-for-session-state-mode-in-asp-net)

InProc 将数据保存在内存中，SQL 将数据保存到磁盘。肯定更快！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T07:42:09.090

InProc 会话基本上保存在进程的内存中。

使用数据库会话的替代方法会给您带来查询数据库的开销，而不仅仅是直接访问内存中的变量。然而，在较小的应用程序中应该不明显。

您应该考虑在数据库中拥有会话将使您能够运行多个工作进程并在它们之间共享相同的会话。

# maven - 使用 maven 从命令行更改生成的战争文件的名称

> ID：14517421
> 
> 赞同：5
> 
> 时间：2013-01-25T07:38:53.927
> 
> 标签：maven

根据[Maven 战争插件文档](http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html)，我应该能够使用参数设置生成的战争文件的名称`warName`。不能从命令行执行此操作`mvn -DwarName=mySpecificName package`吗？当我像这样运行 maven 时，war 文件仍然获得默认名称。

我的 webapp 项目是多模块项目的一部分，我只想更改 war 文件的最终名称，而不是任何其他项目生成的工件。

我正在使用 maven 3.0.4 和 2.3 版的 war 插件。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-25T09:07:58.457

您可以通过 Maven 属性实现相同的效果。

1）通过定义属性

```
 <properties>
           <my.warName>xxx</my.warName>
       </properties> 
```

您可以通过“-Dmy.warName=commandlineWarName”覆盖默认值

2）重新定义战争名称

```
 <build>
           <finalName>${my.warName}</finalName>
           <!-- ... -->
      </build> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T09:04:23.550

查看war插件的代码后，我意识到无法`warName`从命令行设置参数。我假设所有参数都可以从命令行设置。这个假设是不正确的。

# ruby-on-rails - Heroku 数据库配置指定不存在的 mysql 适配器

> ID：14517426
> 
> 赞同：0
> 
> 时间：2013-01-25T07:39:25.290
> 
> 标签：ruby-on-rails, heroku, mysql2

我似乎无法克服 heroku 上的上述错误。我在本地运行带有 mysql2 gem 的 rails 3 就好了，但是当移动到 heroku 时这似乎中断了。

首先，我使用的是 ClearDB。

其次，当我部署并尝试运行时`heroku run rake db:migrate`，heroku 告诉我需要添加 mysql gem 和 activerecord-mysql-adapter。为什么在我使用mysql2时会发生这种情况？

第三，当我将 mysql 和适配器添加到我的项目中时，我解决了 heroku 告诉我我的项目中需要这些 gems 的问题。所以，我`rake db:migrate`再次运行，现在我得到不同的错误......

```
rake aborted!
database configuration specifies nonexistent mysql adapter
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/connection_adapters/abstract/connection_specification.rb:133:in `establish_connection'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/railtie.rb:82:in `block (2 levels) in <class:Railtie>'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/lazy_load_hooks.rb:26:in `block in on_load'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/lazy_load_hooks.rb:25:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/lazy_load_hooks.rb:25:in `on_load'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.9/lib/active_record/railtie.rb:74:in `block in <class:Railtie>'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/initializable.rb:30:in `instance_exec'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/initializable.rb:30:in `run'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/initializable.rb:55:in `block in run_initializers'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/initializable.rb:54:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/initializable.rb:54:in `run_initializers'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/application.rb:136:in `initialize!'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/railtie/configurable.rb:30:in `method_missing'
/app/config/environment.rb:5:in `<top (required)>'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `block in require'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:251:in `require'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/application.rb:103:in `require_environment!'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.9/lib/rails/application.rb:297:in `block (2 levels) in initialize_tasks' 
```

当我检查我的时`database.yml`，我看到 heroku 已经注入了 postgresql 作为适配器，但是输出的错误清楚地表明了 mysql ...如果有人可以在这个问题上帮助我，我将非常感激。我不知道该怎么处理heroku...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-23T16:34:09.043

Heroku 注入了 postgresql，因为您未能指定 heroku 配置属性 DATABASE_URL。

我在这篇文章中给出了详细的说明 - [https://stackoverflow.com/a/17815729/1626020](https://stackoverflow.com/a/17815729/1626020)

但简而言之，您需要使用以下内容进行设置：

```
heroku config:set DATABASE_URL=mysql2://bb06ca765fb123:71b6d123@us-cdbr-east-04.cleardb.com/heroku_703eded6aebc123?reconnect=true 
```

请记住，Heroku 完全忽略了您的 database.yml。没错，无视。DATABASE_URL 是最重要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:31:31.957

Heroku 使用 Postgresql。

您可以在开发/测试环境中使用 mysql2，在生产环境中使用 postgresql（即在 Heroku 上）。

```
group :development, :test do
  gem 'mysql2'
end

group :production do
  gem 'pg'
end 
```

# java - 如何验证命令行参数中的用户输入以获得更高的安全性？

> ID：14517427
> 
> 赞同：1
> 
> 时间：2013-01-25T07:39:31.680
> 
> 标签：java, security, console, command-line-arguments

我正在通过命令行参数从用户那里获取`String`Java程序**。**

问题是我应该执行什么样的检查来防止可能的攻击和漏洞？

我不是安全领域的专家，但据我所知

*   在**C**中，用户指定的行太长并且处理不当可能导致缓冲区溢出
*   在**PHP**行中包含 ` 字符并且处理不当可能导致 SQL 注入

现在我想不出任何特定格式的 a`String`来应用一些正则表达式来检查。它可以是任意的，但如果看起来有害，我想立即退出。该字符串可能会通过网络发送到 Java 服务器，在那里它可能用于 SQL 查询。

```
if (args.length > 0) {
    String arg0 = args[0];
    if (!isValidString(arg0)){
        System.exit(1);
    }
}

public boolean isValidString (String str) {
    if (str == null) return false;

    //TODO: many more checks here

    return true;
} 
```

我确信 Java 比 C 或早期的 PHP 安全得多，但**我应该注意什么？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T07:45:43.757

如果这个主类除了将它的参数传递给其他地方之外什么都不做，那么验证字符串不是它的责任。

如果这个字符串最终进入了一个在 SQL 查询中使用它的类，那么这个类有责任使用准备好的语句，从而确保没有 SQL 注入攻击是可能的。

如果此字符串最终成为生成的 HTML 页面的一部分，则 HTML 生成器负责对字符串进行 HTML 转义。

字符串本身永远不会有害。如果您必须验证它，那么您需要知道它何时有效，何时无效。这取决于上下文。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T07:46:15.090

这完全取决于您对字符串所做的事情，因为您期望的输入显然总是在使用它们之前仔细检查它们。

如果您担心来自用户的 SQL 注入，您可以使用准备好的语句来帮助防止 SQL 注入，因为该语句在使用之前进行编译，并且存储了查询计划以供进一步使用，因此参数不会成为可执行 SQL 的一部分。

如果您担心用户输入出现在网页等上，那么您应该为网页转义它： [推荐的在 Java 中转义 HTML 的方法](https://stackoverflow.com/questions/1265282/recommended-method-for-escaping-html-in-java)

您应该执行的转义/验证完全取决于您对字符串的使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T07:47:48.963

恐怕，这个问题是牵强附会的问题。

在最坏的情况下，我认为，（我无法想象它如何被复制）`OutOfMemory`如果传递给`main()`方法的字符串数组足够大，你可以处理异常。

# append - rsync 同时使用 --update 和 --append

> ID：14517433
> 
> 赞同：2
> 
> 时间：2013-01-25T07:40:41.753
> 
> 标签：append, rsync, resume

我在使用 rsync 时遇到问题。其实我想同步2个文件夹，一个在服务器上（192.168.1.5），一个在我的电脑上，我使用的rsync命令是：

```
rsync -rvzru --exclude=._* xxx@192.168.1.5::Folder /Users/blabla/boh/received 
```

它工作正常，如果在我的服务器上修改了文件，它也会在我的电脑上修改它，跳过所有其他文件。现在我想介绍简历功能，所以我添加 --append 如下：

```
rsync -rvzru --exclude=._* --append xxx@192.168.1.5::Folder /Users/blabla/boh/received 
```

我也尝试过使用--partial，但它根本不起作用，它会跳过未完成的文件，而如果有修改则会更新所有其他文件。如果我从命令中删除 -U 恢复工作正常，但如果我修改服务器上的文件，我无法在我的 PC 上看到修改。

```
rsync -rvzr --exclude=._* --append xxx@192.168.1.5::Folder /Users/blabla/boh/received 
```

有一种方法可以让这项工作既恢复又更新新文件？谢谢

# actionscript-3 - 我无法从 flex 获取 flashvars

> ID：14517436
> 
> 赞同：0
> 
> 时间：2013-01-25T07:40:57.883
> 
> 标签：actionscript-3, apache-flex

我正在尝试通过 swfobject oject 通过 javascript 初始化一些 flash 变量：

```
var flashvars = {param: "one"};
var params = {};
var attributes = {};
attributes.id = "as3_js";
swfobject.embedSWF("test.swf", "alt", "450", "450", "9.0.0", false, flashvars, params, attributes); 
```

我正在尝试使用 Flex 4，但 my_param 从未从 flashvars 中获取值，也从未发出警报：

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark" 
    xmlns:mx="library://ns.adobe.com/flex/mx" creationComplete="initApp()">

public function initApp():void 
{
    var paramObj:Object = LoaderInfo(this.root.loaderInfo).parameters;
    var icon_url:String;
    icon_url = paramObj['param'];
    my_param = icon_url;
    Alert.show(my_param);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:26:03.103

您可以找到@skabir 提到的解决方案链接。这里只提一下出错的地方你可以使用 FlexGlobals.topLevelApplication 代替 LoaderInfo(this.root.loaderInfo)。

```
public function initApp():void 
{
    var paramObj:Object = Application(FlexGlobals.topLevelApplication).parameters;
    var my_param:String = paramObj['param'];
    Alert.show(my_param);
} 
```

# xcode - 如何将 .gitignore 文件添加到 Xcode 项目中

> ID：14517440
> 
> 赞同：37
> 
> 时间：2013-01-25T07:41:11.520
> 
> 标签：xcode, gitignore, hidden-files

当确保可以通过版本控制 (git) 将 iPhone 项目作为精确副本安装到全新计算机中时，我才意识到**.gitignore**文件丢失了。在版本控制下添加，但现在想将该文件也添加**到 Xcode 项目**中以便于查看和编辑。

使用“ `Control-click`+ `Add Files to myProject...`”弹出菜单时，我看不到任何以`.`（即点）开头的文件名。如何将我的 .gitignore 文件添加到 Xcode 项目中？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-01-25T07:51:22.433

1.  当显示打开面板时，按`Command-Shift-.`隐藏文件将出现，包括`.gitignore`.
2.  选择`.gitignore`文件并按添加按钮。

这适用于任何应用程序，而不仅仅是 Xcode。[这是 的一个不起眼的功能`NSOpenPanel`](https://cocoadev.github.io/ShowingHiddenFilesInAnNSOpenPanel/)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-10-04T01:36:23.613

这个解决方案在 XCode 8.0 和 El Capitan 中对我不起作用。

我打开一个终端并输入：

```
defaults write com.apple.finder AppleShowAllFiles YES
cd ../PATH_TO_GIT_ROOT 
touch .gitignore 
```

然后重新启动 Finder，我的 .gitignore 文件可见。根据[.gitignore 文档编辑](https://git-scm.com/docs/gitignore)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-19T16:30:27.023

您只需将三行代码写入终端即可为 Xcode 12+ 更新 .gitignore 文件。

第一步是从[Gitignore.io为 .gitignore 文件设置全局配置](https://www.gitignore.io)

```
git config --global alias.ignore '!gi() { curl -L -s https://www.gitignore.io/api/$@ ;}; gi' 
```

在第二步中，转到您的项目文件夹，然后为您的项目生成 .gitignore 文件。

```
git ignore swift,macos >.gitignore 
```

最后，提交生成的文件。

```
git commit -m "Add .gitignore file" 
```

您可以使用文本编辑器打开 .gitignore 文件并取消注释您不想提交到您的存储库中的任何文件夹文件。（例如 Pods/）

# python - Enthought Mayavi 动画空白显示

> ID：14517443
> 
> 赞同：1
> 
> 时间：2013-01-25T07:41:22.423
> 
> 标签：python, pip, enthought, mayavi

我一直在尝试运行以下 python 代码（来自 Enthought 的网站）来测试 Enthought 的 Mayavi 模块的动画功能。

```
from mayavi import mlab
import numpy
n_mer, n_long = 6, 11
pi = numpy.pi
dphi = pi/1000.0
phi = numpy.arange(0.0, 2*pi + 0.5*dphi, dphi, 'd')
mu = phi*n_mer
x = numpy.cos(mu)*(1+numpy.cos(n_long*mu/n_mer)*0.5)
y = numpy.sin(mu)*(1+numpy.cos(n_long*mu/n_mer)*0.5)
z = numpy.sin(n_long*mu/n_mer)*0.5

# View it.
l = mlab.plot3d(x, y, z, numpy.sin(mu), tube_radius=0.025, colormap='Spectral')

# Now animate the data.
ms = l.mlab_source
for i in range(10):
    x = numpy.cos(mu)*(1+numpy.cos(n_long*mu/n_mer +
                                  numpy.pi*(i+1)/5.)*0.5)
    scalars = numpy.sin(mu + numpy.pi*(i+1)/5.)
    ms.set(x=x, scalars=scalars) 
```

但是，执行后，什么也没有发生。它运行没有错误，但只有 TVTK 场景窗口弹出空白 - 没有图像，没有动画。问题可能出在 Mayavi 模块导入上吗？网站上的示例以：from enthought.mayavi import mlab 开头，而我有：from mayavi import mlab “enthought.mayavi”导入字符串对我不起作用。我使用的 Mayavi 是 pip 安装。
我应该怎么做才能解决这个问题？我正在使用 Mac OSX 10.8.2。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:24:37.500

此演示适用于我的机器（刚刚升级到 OS 10.8.2）。

不过，第一件事是回答您有关导入的问题。大约一年半前的某个时候，我们重构了这些包以从导入中删除经过深思熟虑的名称。因此，导入 mayavi 的 mlab 的标准方式从

```
from enthought.mayavi import mlab 
```

至

```
from mayavi import mlab 
```

设置的设计使前者仍然有效，但我们试图将示例代码中的导入重构为第二种模式。因此，我们可以非常确定 import 语句没有问题。

你有什么可以在 Mayavi 中运行的吗？尝试这个：

```
from mayavi import mlab
mlab.test_plot3d() 
```

另外，mayavi 的版本是什么，你有哪个 EPD（32 位或 64 位），以及终端中的以下结果是什么？

```
$ echo $ETS_TOOLKIT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-19T07:40:03.267

在 Win 7 64 上使用 Canopy 我遇到了类似的问题。只有它显示最后一帧，没有动画。我通过将 pylab 后端更改为 wx 而不是 qt 来修复它。

# javascript - 识别 D3.js 图

> ID：14517446
> 
> 赞同：2
> 
> 时间：2013-01-25T07:41:51.877
> 
> 标签：javascript, svg, d3.js, data-visualization, arc-diagram

这个由[D3.js](http://mbostock.github.com/d3/ex/stack.html)生成的图叫什么？

![在此处输入图像描述](../Images/b7be6681f0e4ae82550103dbe1b7de88.png)

它有名字吗？

我在文档中查找关键字时未能描述它，并花了相当多的时间在网上搜索。

一旦确定了它，D3 文档中包含与此类似的图表的一个示例是什么？我似乎找不到任何类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:46:33.423

这很可能是通过[捆绑布局](https://github.com/mbostock/d3/wiki/Bundle-Layout)构建的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-08T11:18:03.933

这种图称为*弧图*。

* * *

可以在[Manuel Lima 的博客文章](http://www.visualcomplexity.com/vc/blog/?p=1159)中找到有关弧形图的有趣背景。它包括一些历史事实和这些有趣的插图：

![在此处输入图像描述](../Images/22e8064044120a3cd19dac2d36a3c0c9.png)

![在此处输入图像描述](../Images/70f2c0169718e8231a0f5cc3b65cda4d.png)

![在此处输入图像描述](../Images/a3c2473bd4234adc760a592fefdcea85.png)

* * *

有几个使用 D3 制作的弧形图示例：

## 示例 1

Sophie Engle[的《悲惨世界》中的人物。](http://bl.ocks.org/sjengle/5431779)

![在此处输入图像描述](../Images/8006546ca50ce2d8afdc7238a881326b.png)

## 示例 2

Lynn Cherny[的“达芬奇密码”章节。](http://www.ghostweather.com/essays/talks/openvisconf/topic_arc_diagram/TopicArc.html)

![在此处输入图像描述](../Images/3f2d1ea02dbcf1ffc2ad2b92d2fe339d.png)

## 示例 3

[斯坦福自然语言解析器应用于句子的结果](http://bl.ocks.org/goodmami/fd03b250588e1e1143bd)，作者：Michael Wayne Goodman。

![在此处输入图像描述](../Images/495675289242251f9b85674c32da014d.png)

## 示例 4

Daniel Lai、Jeff R. Proctor、Jing Yun A. Zhu 和 Irmtraud M. Meyer 绘制[的 RNA 二级结构的弧形图。](http://www.e-rna.org/r-chie/)

[![在此处输入图像描述](../Images/07e7be9ab939d8dc5c20142ed7c035b0.png)](https://i.stack.imgur.com/zYrN0.png)

# jsch - 使用带有特定 unix 用户的 java ( process Builder ) 运行 Shell 脚本

> ID：14517449
> 
> 赞同：0
> 
> 时间：2013-01-25T07:42:10.237
> 
> 标签：jsch, processbuilder

我开发了一个 web 应用程序（部署在 weblogic 服务器上），我想连接到 solaris 服务器并使用特定的 unix 用户执行 shell 脚本。目前，该脚本以 wls 用户运行。这是我的代码的一部分：

```
String CLA="-d";
out.println("Stopping ASAP for the changes to reflect ...");
                        ProcessBuilder processBuilder = new ProcessBuilder("/bin/ksh","/apps/vpn/asap/scripts/stop_asap_sys_tool"+" "+CLA);
                        process = processBuilder.start();
                        InputStream is = process.getInputStream();
                        InputStream isErr = process.getErrorStream();
                        InputStreamReader isr = new InputStreamReader(is);
                        InputStreamReader isrErr = new InputStreamReader(isErr);
                        BufferedReader br = new BufferedReader(isr);
                        BufferedReader brErr = new BufferedReader(isrErr);
                        String line;
                        String lineErr;

                        while ((line = br.readLine()) != null) {
                            System.out.println(line);
                        }
                        while ((lineErr = brErr.readLine()) != null) {
                            System.out.println(lineErr);
                        } 
```

我的搜索结果建议使用 Jsch。有人可以给我一个关于我使用 Jsch 的实现的例子吗？还是有其他方法？！

谢谢，巴文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:52:26.463

Jsch 是一个不错的选择，这里有一些可以帮助您完成您尝试做的事情：

*   涵盖远程执行的主站点示例
    [[单击]](http://www.jcraft.com/jsch/examples/)
*   这也是 StackOverflow 上已经为您完成的代码[[点击]](https://stackoverflow.com/questions/2405885/any-good-jsch-examples)

一个忠告，当你执行脚本时，你已经在 Windows 上编写或打开它们，你需要在文件上运行一个 dos2unix（如果你在 Linux 上执行）；否则您的远程执行将严重失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T09:52:40.130

我认为这可以帮助你

```
/**
 * This method allows you to send and execute *nix command through SSH
 * to specified removed host and returns command output, in case incorrect
 * command will return command output error
 * 
 * @param user - ssh user name for login
 * @param password - ssh password for login
 * @param host - ip or domain with ssh server
 * @param command - command to execute 
 * @return string with command output or output error
 * @author Roman Kukharuk
 */

public String execNixComAndGetRez(String user, String password, String host,
        String command) {

    int port = 22;
    String rez = "+!";

    try {
        JSch jsch = new JSch();
        Session session = jsch.getSession(user, host, port);
        session.setPassword(password);
        session.setConfig("StrictHostKeyChecking", "no");

        // System.out.println("Establishing Connection...");
        session.connect();

        // System.out.println("Connection established.");
        Channel channel = session.openChannel("exec");
        ((ChannelExec) channel).setCommand(command); //setting command

        channel.setInputStream(null);

        ((ChannelExec) channel).setErrStream(System.err);

        InputStream in = channel.getInputStream();

        channel.connect();

        byte[] tmp = new byte[1024];
        while (true) {
            while (in.available() > 0) {
                int i = in.read(tmp, 0, 1024);
                if (i < 0)
                    break;
                // System.out.print(new String(tmp, 0, i));
                rez = new String(tmp, 0, i);
            }
            if (channel.isClosed()) {
                // System.out.println("exit-status: "+channel.getExitStatus());
                break;
            }
            try {
                Thread.sleep(1000);
            } catch (Exception e) {
                rez = e.toString();
            }
        }
        channel.disconnect();
        session.disconnect();
    }

    catch (Exception e) {
        rez = e.toString();
    }
    return rez;
} 
```

# javascript - 每 x 秒为 SVG 元素设置动画

> ID：14517454
> 
> 赞同：5
> 
> 时间：2013-01-25T07:42:25.360
> 
> 标签：javascript, dom, svg, svg-animate

**介绍**

`SVG`我知道一些同时使用`Javascript`DOM`<animate>`元素的基本动画技术。所以我创建了这个 SVG，但我不知道如何在没有太多代码的情况下每 x 秒触发一次动画。我试过`begin="4s"`了，但它只等待第一次。

**问题：**

有一个类似`begin`or的 DOM 属性`dur`，但是要以秒为单位定义间隔？实现这一目标的更好方法是什么？

**我尝试过的**：

```
<animateTransform attributeName="transform" additive="sum" attributeType="XML" 
type="rotate" dur="1s" repeatCount="indefinite" from="0 54.2 43.3" 
to="360 54.2 43.3" begin="3s" fill="freeze"/> 
```

此处的完整示例：[SVG Fiddle](http://jsfiddle.net/bzrpC/)

**笔记：**

*   我已经检查了[SVG 规范](http://www.w3.org/TR/SVG11/animate.html#ValueAttributes)
*   添加一些 Javascript 代码是一个选项
*   使用 CSS3 也是一种选择

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T18:17:39.463

```
<g> 
    <rect x="0" y="0" width="30" height="20" fill="#f83"/>      
    <animateTransform id="id1" attributeName="transform" additive="sum" 
     type="scale" calcMode="linear" begin="4;id1.end+4" dur="2" keyTimes="0;1" 
     values="1 1;2 2" fill="freeze" />

</g> 
```

这里动画开始是相对于动画结束指定的，这样您的动画将始终等待您指定的时间（此处为 4 秒）并重新开始播放...

试试这个，一切顺利

**更新**

如果您能够使用 id.end 而不是 id.end+some_clock_value 然后正确使用 keyTimes 和 values 属性，将您的旋转动画替换为以下 animateTransform 并查看是否获得所需的输出，

```
<animateTransform id="id1" attributeName="transform" additive="sum" 
     type="rotate" calcMode="linear" begin="0" dur="4" 
     repeatCount="indefinite"   keyTimes="0;0.75;1" 
     values="0 54.2 43.3 ; 0 54.2 43.3 ; 360 54.2 43.3" fill="freeze" /> 
```

# triggers - CruiseControl.NET - 如何在项目失败时触发构建

> ID：14517455
> 
> 赞同：0
> 
> 时间：2013-01-25T07:42:34.483
> 
> 标签：triggers, cruisecontrol.net, multitrigger

在 VS2010 中构建复杂解决方案期间，我遇到了来自 3rd 方库的一些内部错误，有时在访问网络上的时间服务器时也会出错。我可以通过解析构建日志文件来检测这些特定的构建错误。

我的正常触发器是：

```
<intervalTrigger
               name="Build Upon Check-In Modifications"
               seconds="300"
               buildCondition="IfModificationExists"
               initialSeconds="300"/> 
```

如果项目构建由于上述错误而失败，我如何添加一个再次触发构建的触发器？通常重复构建会消除错误......（另外，我对构建日志文件的解析是在 C# 中并且在我的控制之下）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:05:10.173

我唯一能马上想到的就是有另一个项目，指向相同的源，但由项目触发器触发，而项目触发器又与第一个项目相关联。可以将项目触发器配置为仅在主构建失败的情况下启动构建。

这是对技术方面的回答，但从语义上讲，以这种方式解决它看起来很奇怪。更好的方法是花一些时间找出确切的问题并妥善处理。例如，如果您依赖不可用的 Web 服务，您可以创建一个尝试循环并配置尝试次数，等等。

希望你能明白。

# python - 如何将表单传递给基于类的通用视图（TodayArchiveView）？

> ID：14517456
> 
> 赞同：0
> 
> 时间：2013-01-25T07:42:38.860
> 
> 标签：python, django, python-2.7, django-generic-views, django-1.4

网址.py

```
from django.conf.urls import patterns, include, url
import os.path
from crm.views import *

urlpatterns += patterns('',
    (r'^test/$', tView.as_view()),
) 
```

视图.py

```
from django.views.generic import TodayArchiveView
from crm.forms import *
from crm.models import *

class tView(TodayArchiveView):
    model = WorkDailyRecord
    context_object_name = 'workDailyRecord'
    date_field = 'date'
    month_format = '%m'
    template_name = "onlyWorkDailyRecord.html"
    form_class = WorkDailyRecordForm ################## ADD 
```

tView 是通用视图.... WorkDailyRecord 在 models.py 中定义模型

我想将表单（forms.py中的'WorkDailyRecordForm'类）传递给模板（onlyWorkDailyRecord.html）

如何？？

添加

表格.py

```
from django import forms

class WorkDailyRecordForm(forms.Form):
    contents = forms.CharField(label='',
            widget=forms.Textarea(attrs={'placeholder': 'contents', 'style':'width:764px; height:35px;'}),
            required=False,
        )
    target_user = forms.CharField(label='',
            widget=forms.TextInput(attrs={'placeholder': 'target', 'style':'width:724px'}),
            required=False,
        ) 
```

onlyWorkDailyRecord.html

```
<form method="post" action="." class="form-inline" id="save-form">
    {{ form.as_table }}
    <button type="submit" class="btn btn-mini" id="workDailyRecord-add">작성</button>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:47:08.657

在基于类的视图中，您需要提及`form_class`：

```
form_class = WorkDailyRecordForm 
```

一个简单的例子：

```
class tView(TodayArchiveView):
    form_class = WorkDailyRecordForm
    template_name = 'onlyWorkDailyRecord.html'
    model = WorkDailyRecord

    def form_valid(self, form, **kwargs):
        instance = form.save(commit=True)
        return HttpResponse('Done')

    def dispatch(self, request, *args, **kwargs):
        return super(tView, self).dispatch(request, *args, **kwargs) 
```

有关更多信息，请阅读[基于类的视图中的通用编辑](https://docs.djangoproject.com/en/dev/topics/class-based-views/generic-editing/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-18T13:25:57.223

我在将表单类传递给泛型时遇到了麻烦，我可以通过覆盖 get_context_data() 函数来做到这一点，以防有人也在寻找这个。

Mozilla 文档中的一个示例：

```
class BookListView(generic.ListView):
    model = Book

    def get_context_data(self, **kwargs):
        # Call the base implementation first to get the context
        context = super(BookListView, self).get_context_data(**kwargs)
        # Create any data and add it to the context
        context['some_data'] = 'This is just some data'
        return context 
```

您可以将表单对象传递给上下文字典中的键。

[可以在这里](https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/Generic_views)找到更多信息 。

# iphone - 如何根据需要格式化字符串

> ID：14517458
> 
> 赞同：0
> 
> 时间：2013-01-25T07:42:45.410
> 
> 标签：iphone, ios, nsstring

我有三种类型的字符串，我想格式化该字符串以获取街道号码、街道名称、城市名称。

```
The first type is : 34 Ellis Street, San Francisco
Here i want to make it like 
street number : 34
street name : Ellis Street
city name : San Francisco

The second type is : 4FL, 800 Market Street, San Francisco
Here i want to delete 4FL, 
And i want to make it like 
street number : 800
street name : Market Street
city name : San Francisco

The third type is : Ellis & Market, San Francisco
Here i want to make it like 
street number : 
street name : Ellis & Market
city name : San Francisco 
```

我该如何执行此操作或任何显示此类字符串格式的链接，而不是建议。是的，我在这里写的字符串只是我得到的字符串格式，每次都会更改字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:27:14.263

1) 分开：

```
NSArray *arrayOfComponents = [yourString componentsSeparatedByString:@","]; 
```

2）最后一个组件将始终是您的城市名称

3) 然后检查 (Last - 1) 组件

```
NSArray *array = [yourString componentsSeparatedByString:@" "]; 
```

2）取数组的第一个元素并使用它

```
NSCharacterSet* notDigits = [[NSCharacterSet decimalDigitCharacterSet] invertedSet];
if ([newString rangeOfCharacterFromSet:notDigits].location == NSNotFound)
{
    // newString consists only of the digits 0 through 9
} 
```

3）如果它只有数字，那么第一个元素是你的街道号码，只需通过附加剩余元素来创建一个新字符串以获得街道名称。否则，前一个数组中的过去（最后一个 -1）是街道名称。

**这是基本思路，逻辑显然可以改进。**

编辑：既然你提到这个字符串是由 google api 提供的，这意味着你可能会得到一个 JSON 响应。您应该使用完整的 JSON 响应来填充您的文本字段。您可以使用 JSON 到 NSDictionary 类：请参阅[**此处**](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T08:35:02.003

地址字符串传递给此方法，然后将其转换为具有 3 个字符串对象的数组，其中包含 streetNumber、streetName 和 cityName。然后将数组返回给调用者。

```
-(NSArray *)brakeAddress:(NSString *)address{

     NSMutableArray *arr=[NSMutableArray arrayWithArray:[address componentsSeparatedByString:@","]];

     if (arr.count>2) {
     [arr removeObjectAtIndex:0];
     }

     NSInteger streetNameInd=[arr count]-2, cityNameInd=[arr count]-1;

     NSMutableArray *streetNameArray=[NSMutableArray arrayWithObjects:arr[0], nil];

     if ([arr[streetNameInd] intValue]) {

     streetNameArray=[NSMutableArray arrayWithArray:([arr[streetNameInd] componentsSeparatedByString:@" "])];

     [streetNameArray removeObjectAtIndex:0];
     if ([streetNameArray[0] intValue] ==[arr[streetNameInd] intValue]) {
     [streetNameArray removeObjectAtIndex:0];
     }
     }

     NSString *streetName=[streetNameArray componentsJoinedByString:@" "];

     NSString *streetNumber=@"";
     if ([arr[streetNameInd] intValue]!=0) {
     streetNumber=[NSString stringWithFormat:@"%d", [arr[streetNameInd] intValue]];
     }

    NSString *city=arr[cityNameInd];
    // NSLog(@"\nstreet number :%@\nstreet name  :%@\ncity name :%@",streetNumber, streetName,city);

    NSArray *addressParts=[NSArray arrayWithObjects:streetNumber, streetName, city, nil];

    return addressParts;
}

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification{

    NSString *str1=@"34 Ellis Street, San Francisco";
    NSString *str2=@"4FL, 800 Market Street, San Francisco";
    NSString *str3=@"Ellis & Market, San Francisco";

    NSArray *firstAddress=[self brakeAddress:str1];
    NSArray *secondAddress=[self brakeAddress:str2];
    NSArray *thirdAddress=[self brakeAddress:str3];

    NSLog(@"\n1st : street number :%@\nstreet name  :%@\ncity name :%@",firstAddress[0],firstAddress[1],firstAddress[2]);
    NSLog(@"\n2nd : street number :%@\nstreet name  :%@\ncity name :%@",secondAddress[0],secondAddress[1],secondAddress[2]);
    NSLog(@"\n3rd : street number :%@\nstreet name  :%@\ncity name :%@",thirdAddress[0],thirdAddress[1],thirdAddress[2]);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T07:49:40.480

可能首先您可以实现代码将地址字符串分解为不同的变量，例如`_streetNum,_streetName,_cityName`然后您可以使用以下代码行来格式化字符串

```
NSString* formattedString = [[NSString alloc] initWithFormat:@"street number : %@\nstreet name :%@\ncity name :%@",_streetNum,_streetName,_cityName]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T07:58:54.463

试试这个：

```
NSArray *array = [yourString componentsSeparatedByString:@" "]; 
```

它将为您提供一个数组，其中包含由“”分隔的所有字符串；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T08:03:46.727

尝试以下方式并解析与该地址相关的任何您需要的响应

```
http://maps.googleapis.com/maps/api/geocode/json?address=34%20Ellis%20Street,%20San%20Francisco,+CA&sensor=true 
```

希望它可以帮助你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T08:09:18.693

您需要使用正则表达式。看看这个：[正则表达式](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-25T09:20:51.140

这是一段可能对您有所帮助的代码。

```
NSString *addressString;
NSArray *tempArray = [addressString componentsSeparatedByString:@", "];
if([tempArray count]==3){
    city = [tempArray objectAtIndex:2];
    NSString *tempString = [tempArray objectAtIndex:1];

    NSArray *temp1Array = [tempString componentsSeparatedByString:@" "];
    if ([temp1Array count]>1) {
        st_num = [tempArray objectAtIndex:0];
        st_name = [tempString stringByReplacingOccurrencesOfString:
                             [NSString stringWithFormat:@"%@ ",st_num] withString:@""];
    }
} 
```

您可以根据您的要求扩展其逻辑。

# android - Android-如何防止手动安装android应用

> ID：14517459
> 
> 赞同：2
> 
> 时间：2013-01-25T07:42:49.637
> 
> 标签：android

我有一个应用程序 A 启动了安装应用程序 B 的意图（它存在于应用程序 A 的数据文件夹中）。

安装应用程序 B 后，ASTRO 等文件管理器可以备份应用程序 B 的 apk 文件。

所以我想阻止用户手动安装它（比如如果他点击应用程序 B 的备份 apk 文件，它不应该安装）。

有没有办法禁用手动安装...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:58:33.543

但是有两种方法可以监控app。一种是，可以使用File Observer

监控应用程序。每当应用程序被用作备份时，都会采取措施防止它发生。另一种方法是

例如：如果它存储在 sdcard\am\ 中，请像这样使用。

```
 File f=new File("\mnt\sdcard\am\abc.apk");// file location of your app
    {
       if(f.exists)
       {
           f.delete();
       }
    } 
```

对于 File Observer，看看这个。它可能会对你有所帮助。

[http://developer.android.com/reference/android/os/FileObserver.html](http://developer.android.com/reference/android/os/FileObserver.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:47:19.540

你能找到备份的位置并删除apk吗？

如果文件管理器可以使用 APk，那么它可以打开它并安装它，我不知道有什么方法可以阻止它，因为它超出了您的应用程序范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T08:07:19.703

不确定它是否可行，但我会通过让应用程序`A`吐出必须在安装应用程序时手动输入的代码（如两步验证）来解决这个问题`B`，然后在服务器端验证它。因此，像您提到的流氓安装将变得毫无用处。也许您可以向用户弹出一个错误，通知他们这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T07:53:56.633

这在 AOSP Android 上是不可能的。

从未知来源安装选项是`Settings.Global`（以前在`Settings.Secure`）中的设置，无法由第三方应用程序控制。

但是，如果您愿意为要使用它的每台设备修改和编译 Android 本身，就可以实现这一点，就像 AT&T 在他们的一些设备上所做的那样。

您可以做的最好的事情是尝试找到备份文件并在您有权访问该部分存储时将其删除。

# c# - Reflection.Assembly::Load 方法

> ID：14517466
> 
> 赞同：3
> 
> 时间：2013-01-25T07:43:10.250
> 
> 标签：c#, reflection

当我尝试使用此方法加载程序集时，长名称和部分名称之间有什么区别？从[MSDN](http://msdn.microsoft.com/en-us/library/0a7zy9z5%28v=vs.71%29.aspx)中，我得到以下信息：对于长名称：如果您引用属于公共语言运行时的任何程序集或位于全局程序集缓存中的任何程序集，则需要完整的程序集引用。对于部分名称：运行时仅在应用程序目录中查找程序集

一个客户遇到错误，因为我使用部分名称加载程序集，但程序集恰好在应用程序目录中。

所以，我想知道，在使用 Load(string) 方法时，长名称和部分名称之间还有其他区别吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T03:41:43.140

@gTiancai：在更安全的方面，设置[AssemblyName.CodeBase](http://msdn.microsoft.com/en-us/library/system.reflection.assemblyname.codebase.aspx)属性可能会有所帮助。

这可能会有所帮助：[程序集加载的最佳实践](http://msdn.microsoft.com/en-us/library/dd153782.aspx)

# jquery - jquery img 和 img 标题交换

> ID：14517481
> 
> 赞同：-1
> 
> 时间：2013-01-25T07:44:42.027
> 
> 标签：jquery, title, swap

我有一个图片库，可以在单击缩略图时交换主图片。我也希望在单击时将 img 标题显示在主图像上方的 div 中。图像交换正在使用此代码。我是 jquery 的新手，所以会很感激任何帮助。

```
$(document).ready(function() {
$("#gallery li img").click(function(){
    $('#main-img').attr('src',$(this).attr('src').replace('thumb/', ''));   
});

var imgSwap = [];
 $("#gallery li img").each(function(){
    imgUrl = this.src.replace('thumb/', '');
    imgSwap.push(imgUrl);   
});

$(imgSwap).preload();
});

$.fn.preload = function() {
this.each(function(){
    $('<img/>')[0].src = this;
});
}

<div class="wrap">
<div id="gallery">
<div id="caption"></div><img src="gallery/img_1.jpg" alt="" width="940" height="534" id="main-img" />
<ul>
  <li><img src="gallery/thumb/img_1.jpg" id="imgcap" title="this is cap 1" alt="" width="220" height="125" /></li>
  <li><img src="gallery/thumb/img_2.jpg" id="imgcap" title="this is cap 2" alt="" width="220" height="125" /></li>
  <li><img src="gallery/thumb/img_3.jpg" id="imgcap" title="this is cap 3" alt="" width="220" height="125" /></li>
  <li><img src="gallery/thumb/img_4.jpg" id="imgcap" title="this is cap 4" alt="" width="220" height="125" /></li>
  <li><img src="gallery/thumb/img_5.jpg" id="imgcap" title="this is cap 5" alt="" width="220" height="125" /></li>
  <li><img src="gallery/thumb/img_6.jpg" id="imgcap" title="this is cap 6" alt="" width="220" height="125" /></li>
  <li><img src="gallery/thumb/img_5.jpg" id="imgcap" title="this is cap 7" alt="" width="220" height="125" /></li>
  <li><img src="gallery/thumb/img_6.jpg" id="imgcap" title="this is cap 8" alt="" width="220" height="125" /></li>
</ul></div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:47:28.177

试试这个，

```
$("#gallery li img").click(function(){
    $('#main-img').attr('src',$(this).attr('src').replace('thumb/', ''));   
    $("#caption").html($(this).attr('title'));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:54:29.003

我认为这应该更好：

```
$(document).ready(function(){

    // for each element exists now and will be added in the future and is matched by this selector, will add a click function that does the work
    $("#gallery li img").live("click", function(){
        $('#main-img').attr('src',$(this).attr('src').replace('thumb/', ''));   
        $("#caption").html($(this).attr('title'));
    });
    $("#gallery li img").first().click();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T08:42:03.377

你可以这样做

```
<html>
    <head>
    <title></title>
    <meta charset="utf-8">
    <script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script>
        $(document).ready(function(){ 
            $("#thumb_gallery > li > img").click(function(){ 
                $("#caption").html($(this).attr('title'));
            });
        });
    </script>
    </head>
    <body>
    <div id="gallery">
<div id="caption"></div><img src="gallery/img_1.jpg" alt="" width="500" height="200" id="main-img" />
<ul id="thumb_gallery">
  <li><img src="gallery/thumb/img_1.jpg" id="imgcap" title="this is cap 1" alt="" width="20" height="12" /></li>
  <li><img src="gallery/thumb/img_2.jpg" id="imgcap" title="this is cap 2" alt="" width="20" height="12" /></li>
  <li><img src="gallery/thumb/img_3.jpg" id="imgcap" title="this is cap 3" alt="" width="20" height="12" /></li>
  <li><img src="gallery/thumb/img_4.jpg" id="imgcap" title="this is cap 4" alt="" width="20" height="12" /></li>
  <li><img src="gallery/thumb/img_5.jpg" id="imgcap" title="this is cap 5" alt="" width="20" height="12" /></li>
  <li><img src="gallery/thumb/img_6.jpg" id="imgcap" title="this is cap 6" alt="" width="20" height="12" /></li>
  <li><img src="gallery/thumb/img_5.jpg" id="imgcap" title="this is cap 7" alt="" width="20" height="12" /></li>
  <li><img src="gallery/thumb/img_6.jpg" id="imgcap" title="this is cap 8" alt="" width="20" height="12" /></li>
</ul></div>

    </body>
</html> 
```

我改变了我的测试尺寸

# html - 当上面的div扩展时按下div？

> ID：14517485
> 
> 赞同：0
> 
> 时间：2013-01-25T07:44:59.077
> 
> 标签：html, css

制作单页网站。HTML如下

```
<!-- Landing Page-->
    <div id="landing">
        <img src="front.png" alt="Cover Page">
    </div>
    <!-- About -->
    <div id="page1">
      <a id="about"></a>
        <img src="Who.png" alt="About Me">
        <p>
            xxx
        </p>
    </div>

    <!-- Work -->
    <div id="page2">
      <a id="portfolio"></a>
        <div id="container">
            <a class="fancybox" href="portfolio1.jpg" title="'Consumed' </br>Digital/Print Work"><img src="portfolio1s.png"/></a>
</div>
    </div>

    <!-- Contact -->
    <div id="page3">
      <a id="contact"></a>
        <img src="Contact.png" alt="Contact Information">
        <p>
            xxx
        </p>
    </div>
</body> 
```

我从 div #container 中删除了图像链接，但总共有 10 多个。我的问题是当我缩小窗口（以查看如何在移动设备上查看）时，div #container 中的图像与我在我的联系页面上的图像。我希望它在扩展时将联系页面向下推。我试过用 position:relative 来做这件事，但似乎没有用。

相关CSS：

```
#container
{
padding:50px;
display:table-cell;
vertical-align:center;
width:auto;
}

#container a img
{
padding:10px;
opacity:1.0;
filter:alpha (opacity=100); /*for >IE8 */
}

#page1 img 
{
display:block;
margin-left:auto;
margin-right:auto;
width:400px;    
position:relative;
top:15px;
}

#page2 {
height:1200px;
font-family: Arial, sans-serif;
font-weight: bold;
color:purple;
}

#page3 {
height:1200px;
font-family: Arial, sans-serif;
font-weight: bold;
color:red;
}

#page3 img
{
display:block;
margin-left:auto;
margin-right:auto;
margin-bottom:-20px;
width:400px;
position:relative;
top:15px;
} 
```

# symfony - Tinymcebundle 不适用于 Ajax xhr 请求

> ID：14517498
> 
> 赞同：1
> 
> 时间：2013-01-25T07:46:28.013
> 
> 标签：symfony, tinymce

我正在使用带有 symfony2.1 的 TinymceBundle。该插件可与除 Ajax 请求以外的任何页面完美配合。我知道为了让 tinymce 工作，需要运行一些 javascript 才能将 textarea 更改为所见即所得。我正在使用[https://github.com/stfalcon/TinymceBundle](https://github.com/stfalcon/TinymceBundle)。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-25T09:11:44.423

您可能需要包括`tiny_mce.js`. 检查此文件是否已加载到您的页面上。

# perl - bash 通过匹配列合并文件

> ID：14517509
> 
> 赞同：2
> 
> 时间：2013-01-25T07:47:28.327
> 
> 标签：perl, bash, sed, awk

我确实有两个文件：

```
 File1

 12    abc
 34    cde
 42    dfg
 11    df
 9     e   

 File2

 23    abc
 24    gjr
 12    dfg
 8     df 
```

我想逐列合并文件（如果第 2 列相同），输出如下：

```
 File1  File2
   12    23    abc
   42    12    dfg
   11    8     df
   34    NA    cde
   9     NA    e
   NA    24    gjr 
```

我怎样才能做到这一点？

我试过这样：

```
 cat File* >> tmp; sort tmp | uniq -c | awk '{print $2}' > column2; for i in
 $(cat column2); do grep -w "$i" File* 
```

但这就是我卡住的地方......
不知道在greping之后我应该如何逐列合并文件并在缺少值的地方写入NA。

希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-25T08:07:43.243

由于我正在使用`bash`运行 as 的 3.2进行测试`sh`（它没有进程替换 as `sh`），因此我使用了两个临时文件来准备数据以供使用`join`：

```
$ sort -k2b File2 > f2.sort
$ sort -k2b File1 > f1.sort
$ cat f1.sort
12    abc
34    cde
11    df
42    dfg
9     e  
$ cat f2.sort
23    abc
8     df
12    dfg
24    gjr
$ join -1 2 -2 2 -o 1.1,2.1,0 -a 1 -a 2 -e NA f1.sort f2.sort
12 23 abc
34 NA cde
11 8 df
42 12 dfg
9 NA e
NA 24 gjr
$ 
```

使用进程替换，您可以编写：

```
join -1 2 -2 2 -o 1.1,2.1,0 -a 1 -a 2 -e NA <(sort -k2b File1) <(sort -k2b File2) 
```

如果您希望数据格式不同，请使用`awk`后处理输出：

```
$ join -1 2 -2 2 -o 1.1,2.1,0 -a 1 -a 2 -e NA f1.sort f2.sort |
> awk '{ printf "%-5s %-5s %s\n", $1, $2, $3 }'
12    23    abc
34    NA    cde
11    8     df
42    12    dfg
9     NA    e
NA    24    gjr
$ 
```

# windows - 如何在 windows web server 2008 R2 64bits 上加密 SSL paypal 按钮，

> ID：14517512
> 
> 赞同：1
> 
> 时间：2013-01-25T07:47:36.637
> 
> 标签：windows, ssl, paypal, openssl, apache2.2

我尝试在我的 windows web server 2008 R2 64bits 上使用 SSL paypal 按钮进行加密。我已经安装了 apache 2.2.22 、 php 5.4.3 和 openssl 。

我在 ssl paypal 按钮中找到要加密的类，但它不起作用。我没有任何错误，只是按钮的代码没有加密。

加密类：

```
<?php

class PaypalCrypt{

    private $privateKey = '';
    private $publicKey = '';
    private $paypalKey = '';
    //private $pathOpenSSL = '/usr/bin/openssl';
    private $pathOpenSSL = 'C:/wamp/bin/apache/apache2.2.22/bin/openssl.exe';
    private $data = array(
        'bn' => 'Boutique_BuyNow_WPS_FR',
        'cmd' => '_xclick',
        'lc' => 'FR',
        'custom' => '',
        'invoice' => '',
        'currency_code' => 'EUR',
        'charset' => 'UTF-8', //Définit le charset utilisé sur le site
        'no_shipping' => '1'
    );

    public function __construct(){
        // Nothing
    }

    public function addData($key, $data){
        $this->data[$key] = $data;
        return $this;
    }

    public function setPrivateKey($privateKey){
        $this->privateKey = $privateKey;
        return $this;
    }

    public function setPublicKey($publicKey){
        $this->publicKey = $publicKey;
        return $this;
    }

    public function setPaypalKey($paypalKey){
        $this->paypalKey = $paypalKey;
        return $this;
    }

    public function getCryptedData(){
        if (!file_exists($this->privateKey))
            throw new Exception('ERROR: MY_KEY_FILE '.$this->privateKey.' not found');
        if (!file_exists($this->publicKey))
            throw new Exception('ERROR: MY_CERT_FILE '.$this->publicKey.' not found');
        if (!file_exists($this->paypalKey))
            throw new Exception('ERROR: PAYPAL_CERT_FILE '.$this->paypalKey.' not found');

        $openssl_cmd = "$this->pathOpenSSL  smime -sign -signer $this->publicKey  -inkey $this->privateKey ".
                "-outform der -nodetach -binary| $this->pathOpenSSL smime -encrypt ".
                "-des3 -binary -outform pem $this->paypalKey";

        $descriptors = array(
            0 => array("pipe", "r"),
            1 => array("pipe", "w"),
        );

        $process = proc_open($openssl_cmd, $descriptors, $pipes);
        if (is_resource($process)) {
            foreach ($this->data as $key => &$value)
                if ($value != "")
                    fwrite($pipes[0], "$key=$value\n");
            fflush($pipes[0]);
            fclose($pipes[0]);

            $output = "";
            while (!feof($pipes[1]))
                $output .= fgets($pipes[1]);

            fclose($pipes[1]);
            $return_value = proc_close($process);
            return $output;
        }
        throw new Exception('ERROR: encryption failed');
    }

    public function setOpenSSLPath($path){
        if(!file_exists($path))
            throw new Exception('OpenSSLPath "'.$path.'" don\'t exists');
        $this->pathOpenSSL = $path;
    }
}

$MY_KEY_FILE = "prvkey.pem";

# public certificate file to use
$MY_CERT_FILE = "pubcert.pem";

# Paypal?s public certificate
$PAYPAL_CERT_FILE = "paypal_cert.pem";

// Initialisation cryptage Paypal
$paypalCrypt = new PaypalCrypt();
$paypalCrypt->setPrivateKey($MY_KEY_FILE);
$paypalCrypt->setPublicKey($MY_CERT_FILE);
$paypalCrypt->setPaypalKey($PAYPAL_CERT_FILE);
$paypalCrypt->addData('cert_id','id_certificat_fourni_par_paypal')
            ->addData('business','email@email.com')
            ->addData('no_note','1')
            ->addData('shipping','0')
            ->addData('tax','0')
            ->addData('rm','2')
            ->addData('cbt','Retour sur la boutique')
            ->addData('custom','id_membre')
            ->addData('return','http://mon_site.com/return.php')
            ->addData('cancel_return','http://mon_site.com/cancel.php')
            ->addData('notify_url','http://mon_site.com/ipn.php')
            ->addData('amount','10')
            ->addData('item_name', 'Boite à meuh')
            ->addData('item_number', 'identifiant_produit');
$data = $paypalCrypt->getCryptedData();

?>
<form action="https://www.paypal.com/fr/cgi-bin/webscr" method="post">
    <input type="hidden" name="cmd" value="_s-xclick">
    <input type="hidden" name="encrypted" value="<?php echo $data?>"/>
    <input type="submit" value="Commander" class="input_button">
</form> 
```

我不知道为什么它在 windows 上不起作用，但它在 1and1 (linux ？)

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:09:42.293

我今晚找到了解决办法。事实上，解决方案是使用 PHP 加密 SSL paypal 按钮，无需命令 openssl。Paypal 给出了一个使用它的例子： [https](https://cms.paypal.com/fr/cgi-bin/?cmd=_render-content&content_ID=developer/library_download_sdks#WPST) ://cms.paypal.com/fr/cgi-bin/?cmd=_render-content&content_ID=developer/library_download_sdks#WPST并下载网站支付标准工具包。

非常感谢很快见到你

# c - 汇编 cmp 如何检查它比较的值？

> ID：14517520
> 
> 赞同：1
> 
> 时间：2013-01-25T07:48:05.507
> 
> 标签：c, linux, assembly, gdb

我从 objdump 获得以下信息。这是 gcc 为 IA32 编译的 C 代码。

```
08048e9a <my_func>:
8048e9a:    55                      push   %ebp
8048e9b:    89 e5                   mov    %esp,%ebp
8048e9d:    83 ec 48                sub    $0x48,%esp
8048ea0:    89 5d f4                mov    %ebx,-0xc(%ebp)
8048ea3:    89 75 f8                mov    %esi,-0x8(%ebp)
8048ea6:    89 7d fc                mov    %edi,-0x4(%ebp)
8048ea9:    8d 5d d0                lea    -0x30(%ebp),%ebx
8048eac:    89 5c 24 04             mov    %ebx,0x4(%esp)
8048eb0:    8b 45 08                mov    0x8(%ebp),%eax
8048eb3:    89 04 24                mov    %eax,(%esp)
8048eb6:    e8 52 04 00 00          call   804930d <read_num>
8048ebb:    8d 7d dc                lea    -0x24(%ebp),%edi
8048ebe:    be 00 00 00 00          mov    $0x0,%esi
8048ec3:    8b 03                   mov    (%ebx),%eax
8048ec5:    3b 43 0c                cmp    0xc(%ebx),%eax
8048ec8:    74 05                   je     8048ecf <my_func+0x35>
8048eca:    e8 fc 03 00 00          call   80492cb <other_func>
8048ecf:    03 33                   add    (%ebx),%esi 
```

我有兴趣找出在线比较的值`8048ec5`在 gdb 中，我可以进入这一行，我可以从中`%eax`很好地阅读，`info registers`但我该如何阅读`0xc(%ebx)`？这意味着`0xc`偏移`%ebx`或`0xc + %ebx`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:50:03.310

`%ebx + 0xc`它指的是内存中地址处的 32 位值。

# javascript - Ajax 无限滚动功能触发两次。

> ID：14517521
> 
> 赞同：1
> 
> 时间：2013-01-25T07:48:13.487
> 
> 标签：javascript, ajax, jquery

由于某些奇怪的原因，下面的 ajax 函数触发了两次。loadMoreResults(); 函数用于从服务器检索数据。我使用谷歌开发工具跟踪发送到服务器的数据，它显示 ajax 请求连续两次被触发。我猜这发生在用户快速滚动时。

```
 //Executed when user has scrolled bottom of the page
$(window).scroll(function (e) {
 if ($(window).scrollTop() == $(document).height() - $(window).height()) {
    loadMoreResults();
 }
 }); 
```

关于如何防止这种情况发生的任何想法？感谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T07:52:27.020

正如您所说，这可能是因为用户滚动速度太快，并且文档没有更新为新结果。

尝试使用一个标志来阻止`loadMoreResults()`在函数仍在执行时调用。

在函数开始时将其设置为 true，最后在获得结果后将其设置为 false。标志的检查可以放在`loadMoreresults()`函数的开头，在将标志设置为 之前`true`。

例如：

```
function loadMoreResults() {
  if (flag) return;
  flag = true;
[...]
  flag = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-15T15:36:33.300

由于某种原因，我无法弄清楚。设置标志对我不起作用。函数调用仍然会触发两次。我不得不在我的成功回调中使用超时

```
.then(function(resp) {
  var i, len, ref, t;
  ref = resp.data.users;
  for (i = 0, len = ref.length; i < len; i++) {
    t = ref[i];
    $scope.users.push(t);
  }

  return setTimeout((function() {
    if (resp.data.users.length > 0) {
      return $scope.busy = false;
    }
  }), 500); 
```

# python - 自动简化/重构 Python 代码（例如 for 循环 -> 列表理解）？

> ID：14517524
> 
> 赞同：5
> 
> 时间：2013-01-25T07:48:43.937
> 
> 标签：python, refactoring, list-comprehension, simplify, automated-refactoring

在 Python 中，我真的很享受使用列表推导时实现的简洁性。我喜欢做简洁的列表理解：

```
myList = [1, 5, 11, 20, 30, 35] #input data
bigNumbers = [x for x in myList if x > 10] 
```

但是，我经常遇到像这样更冗长的实现：

```
myList = [1, 5, 11, 20, 30, 35] #input data
bigNumbers = []
for i in xrange(0, len(myList)):
    if myList[i] > 10:
        bigNumbers.append(myList[i]) 
```

当 a`for loop`只查看一个数据结构（例如`myList[]`）时，通常有一个直接的列表理解语句，它等效于循环。
**考虑到这一点，是否有一个重构工具可以将冗长的 Python 循环转换为简洁的列表理解语句？**

* * *

[以前的](https://stackoverflow.com/questions/2532525/how-do-i-make-this-simple-list-comprehension?rq=1) [StackOverflow](https://stackoverflow.com/questions/10637037/replacing-while-loop-with-list-comprehension) [问题](https://stackoverflow.com/questions/2532525/how-do-i-make-this-simple-list-comprehension?rq=1)已要求有关将循环转换为列表理解的建议。但是，我还没有找到关于**自动**将循环转换为列表理解表达式的问题。

* * *

**动机：**有很多方法可以回答“代码干净意味着什么？”这个问题。就个人而言，我发现使代码简洁并消除一些绒毛往往会使代码更清晰和更具可读性。在“简洁的代码”和“难以理解的单行代码”之间自然有一条界限。尽管如此，我经常发现编写和使用简洁的代码是令人满意的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T14:56:56.507

[2to3](http://docs.python.org/2/library/2to3.html)是一种重构工具，可以执行任意重构，只要您可以使用语法模式指定它们即可。您可能想要寻找的模式是这个

```
VARIABLE1 = []
for VARIABLE2 in EXPRESSION1:
    if EXPRESSION2:
        VARIABLE1.append(EXPRESSION3) 
```

这可以安全地重构为

```
VARIABLE1 = [EXPRESSION3 for VARIABLE2 in EXPRESSION1 if EXPRESSION2] 
```

在您的具体示例中，这将给出

```
bigNumbers = [myList[i] for i in xrange(0, len(myList)) if myList[i] > 10] 
```

然后，您可以进行另一次重构，将 xrange(0, N) 替换为 xrange(N)，并进行另一次重构

```
[VARIABLE1[VARIABLE2] for VARIABLE2 in xrange(len(VARIABLE1)) if EXPRESSION1] 
```

和

```
[VARIABLE3 for VARIABLE3 in VARIABLE1 if EXPRESSION1PRIME] 
```

这种重构有几个问题：

*   `EXPRESSION1PRIME`必须用 VARIABLE3 替换`EXPRESSION1`所有出现的 。`VARIABLE1[VARIABLE2]`这对于 2to3 是可能的，但需要显式代码来执行遍历和替换。
*   `EXPRESSION1PRIME`then 不能再包含 `VARIABLE1`. 这也可以使用显式代码进行检查。
*   需要为 VARIABLE3 命名。你选择了`x`；没有合理的方法可以自动完成此操作。您可以为此选择回收`VARIABLE1`（即`i`），但这可能会令人困惑，因为它表明它`i`仍然是一个索引。它可能会选择一个合成名称，例如`VARIABLE1_VARIABLE2`(ie `myList_i`)，并检查是否未使用其他名称。
*   需要确保 VARIABLE1[VARIABLE2] 产生的结果与使用`iter(VARIABLE1)`. 不可能自动执行此操作。

如果您想学习如何编写 2to3 修复程序，请查看[Lennart Regebro 的](http://python3porting.com/fixers.html)书。

# python - 在 RHEL 6 中启动时无法识别“ctrl + c”

> ID：14517527
> 
> 赞同：0
> 
> 时间：2013-01-25T07:48:55.327
> 
> 标签：python

似乎`Ctrl`+`c`无法识别。虽然我在终端中运行`Ctrl`+`c`被识别，并且它会按预期发出信号处理函数。但是当脚本作为启动脚本运行时，它应该识别`Ctrl`+`c`并进入信号处理程序，但它没有发生。这是脚本的一部分..

```
def signal_handler(signal, frame):
    print 'Going to Linux terminal....'
    sys.exit(0)
print 'Press Ctrl+C to abort script and enter Linux terminal....'
signal.signal(signal.SIGINT, signal_handler)
time.sleep(5) 
```

脚本工作正常，但问题是它没有得到终端。ssh 到 termianl 是可能的，

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:01:57.633

当您在脚本中收到`CTRL`-`C`事件时，您的脚本将自行终止。它*不会*终止整个引导序列。

检查*确实*退出到 shell 的引导脚本（使用命令检查磁盘的脚本`fsck`），您将看到如下内容：

```
# Start a single user shell on the console
if ! sulogin $CONSOLE
then
    log_failure_msg "Attempt to start maintenance shell failed. 
Continuing with system boot in 5 seconds."
    sleep 5
fi 
```

[`sulogin`](http://linux.die.net/man/8/sulogin)在这种情况下就是这样做的。

# c++ - 如何在来自外部库处理的设备的数据流上方显示 QWidget

> ID：14517532
> 
> 赞同：0
> 
> 时间：2013-01-25T07:49:02.003
> 
> 标签：c++, qt, com, directshow

我正在创建应用程序来分析来自设备的数据并将其显示在屏幕上。处理此设备的 SDK 具有通过设置窗口处理程序 (HWND) 在特定窗口中显示当前数据帧的功能。

在我的 Qt Gui 应用程序中，我试图在视频流上显示我自己的小部件，该小部件显示在我的 QGLWidget 中（它由 winId 函数和 HWND 设置）。MainWidget 是显示数据流的 QGLWidget 的父级，并且 QWidget（或一些图形标记，例如 Circle）应该显示在来自 QGLWidget 的数据流上方。

一切工作几乎完美，但**我得到了闪烁效果（闪烁效果？） - 我的圆形小部件正在隐藏并以人眼可以看到的频率显示，我尽量避免它。**消除这种情况的唯一选择是将这个圆圈创建为小部件并为其设置 Qt::Popup 标志，因为它有很大的缺点 - 我无法访问其余的界面（我知道，这是 Popup 标志错误）。我尝试了其他选项，例如：

*   设置 Qt::WindowStaysOnTopHint 和其他一些标志，
*   创建父为 QGLWidget 的布局对象，我在其中显示来自设备的数据，然后将圆形小部件设置为布局项，但这里黑色背景是显示数据的阴影（我已经关闭了背景，但我已经意识到Qt 无法知道我的小部件下有什么，因为它是由外部库处理的）。

在文档中，我发现我可以创建自己的 directshow+COM 对象（或接口，对吗？）来处理视频流，但我并不真正了解这种技术，我非常想避免这个选项！

[编辑] 我发现我可以将当​​前帧数据作为 IPictureDisp 接口，但正如我之前所说，我并不真正了解 COM 技术。我试图找到一些关于如何使用 IPictureDisp 的信息，但我没有关于 COM 技术的基本知识。有没有人有任何关于它的好教程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:39:29.987

试试这个小部件层次结构：

```
MainWindget
|-QGLWidget
|-MarkerWidet 
```

`MarkerWidet`应该是一个小的方形小部件。

通过调用确保`MarkerWidet`在上面。但是打电话之前先打电话。Qt 有一个错误，这个错误通过调用来消除。`QGLWidget``MarkerWidet::raise()``MarkerWidet::lower()``MarkerWidet::raise()``QWidget::raise()``lower(); raise();`

启动应用程序后检查实际的小部件层次结构，使用 Spy++ 来完成。Spy++ 可以在 Visual Studio 安装中找到，或[在此处](http://mdb-blog.blogspot.ru/2010/11/microsoft-spy-or-spyxx-for-download.html)下载。

伪代码：

```
MainWindget* mainWidget = new MainWindget;
QGLWidget* glWidget = new QGLWidget(mainWidget);
device->setHwnd(glWidget->winId());
mainWidget->show();
...
MarkerWidet* marker = new MarkerWidet(mainWidget);
marker->resize(30, 30);
marker->move(10, 10);
marker->lower();
marker->raise(); 
```

# node.js - 直接调用全局安装的 Node.js 模块

> ID：14517535
> 
> 赞同：5
> 
> 时间：2013-01-25T07:49:09.220
> 
> 标签：node.js, module, executable, npm

假设我想为 Node.js 编写一个模块，该模块将被全局安装。我不想编写任何 C++（或其他东西），而是简单的 Node.js 代码。

基本上，这很容易。只需编写模块，然后使用`npm install -g`.

现在，大多数全局安装的模块都提供了直接调用它们的可能性，例如，您可以`express`在命令提示符下键入并运行 Express 的全局安装应用程序引导程序。

现在我的问题是：我如何实现这一目标？

如果我只是全局安装一个模块，这不会使其中一个文件作为可执行文件可用，或者将该文件放到`PATH`.

为了实现这一目标，我需要执行哪些步骤？

所以我的问题基本上是：需要执行哪些步骤才能从“普通”Node.js 模块创建全局可用的可执行文件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-25T07:51:34.040

您需要编写一个可执行文件。这是当用户键入您的命令时将执行的操作。这是一个取自[JSHint](https://github.com/jshint/jshint)的示例：

```
#!/usr/bin/env node

require("./../src/cli/cli.js").interpret(process.argv); 
```

约定说将此文件放在项目根目录的*bin目录中。*然后你只需要更新你的*package.json*文件来告诉它在哪里可以找到你的可执行文件：

```
{
    "bin": {
        "jshint": "./bin/jshint"
    }
} 
```

在这种情况下，可执行文件可以使用`jshint`命令从终端运行。当它运行时，它只需要另一个文件并在其中调用一个方法，并传递任何命令行参数。

# c# - 如何获得一年中的特定日期？

> ID：14517539
> 
> 赞同：-5
> 
> 时间：2013-01-25T07:49:21.100
> 
> 标签：c#, asp.net, datetime

我想做一个课程调度器。例如，所有星期五的课程都相同，应该在调度程序上显示。我怎样才能得到一年中所有星期五的日期？我有一些数据字段；

```
-Dayofweek  int
-Starthour  int
-finishhour int 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:04:51.433

就是这样，注意365可能是366。你可以判断一下。。

```
 DateTime dt=DateTime.Parse(DateTime.Now.ToString("yyyy-01-01"));
   for (int i = 0; i < 365;i++ )
   {
       if (dt.AddDays(i).DayOfWeek==DayOfWeek.Friday)
       {
           Console.WriteLine(dt.AddDays(i).ToShortDateString());
       }

   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T00:45:03.460

```
static IEnumerable<DateTime> GetAllDaysInYearByDayOfWeek(int year, DayOfWeek dayOfWeek)
{
    var startOfYear = new DateTime(year, 1, 1);
    var firstMatchingDate = startOfYear.AddDays((dayOfWeek - startOfYear.DayOfWeek + 7) % 7);
    for (var dt = firstMatchingDate; dt.Year == year; dt = dt.AddDays(7))
        yield return dt;
} 
```

例如：

```
var fridays = GetAllDaysInYearByDayOfWeek(2013, DayOfWeek.Friday);
foreach (DateTime day in fridays)
    Console.WriteLine(day.ToShortDateString()); 
```

结果：

```
01/04/2013
01/11/2013
01/18/2013
...
12/13/2013
12/20/2013
12/27/2013 
```

# ios - 将 iOS TabBar 用作任务栏

> ID：14517540
> 
> 赞同：0
> 
> 时间：2013-01-25T07:49:25.957
> 
> 标签：ios, uitabbar

我正在制作一个需要使用扩展坞（想想 Mac 扩展坞）的应用程序，我可以在其中将不同的项目拖到地图视图上。

对我来说，只使用 UITabBar 并将其子类化是有意义的，因为您可以在界面构建器中轻松地将项目添加到该栏。但是，我不确定如何将 UITabBar 转换为更动态的东西，比如 Mac 扩展坞，只有当用户触摸它们时才会突出显示内容，可以拖出该选项卡的副本等。

为此，只是一个附带问题，UITabBarDelegate 和 UITabBarControllerDelegate 协议有什么区别？

我还想到了另一种方法，我可以使用带有 UIImageViews 的某种集合视图来实现我的任务栏/停靠。这在实现拖放、突出显示选择等方面会更容易，但我会失去 UITabBar 所具有的那种不错的原生 iOS 感觉。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:53:16.423

做一件事。为标签栏创建一个自定义类，在其上添加一个视图。并在视图上添加图像视图在该视图中放置小图像并在其上添加手势识别器。当手指过来时，它会用较大的图像替换较小的图像。如果用户点击它，还可以更改标签栏选择。您可以通过使用 tabbar 属性来做到这一点。或者您在点击时手动调用标签栏委托。

# rendering - 有了纬度和经度，在 2d 中绘图，我可以使用 3d 公式吗？

> ID：14517543
> 
> 赞同：0
> 
> 时间：2013-01-25T07:49:56.337
> 
> 标签：rendering, geocoding, latitude-longitude, openstreetmap

这个方程接受纬度和经度并返回 y 和 x 坐标：

```
 y = R * cos(latitude) * sin(longitude);                 

    x = R * cos(latitude) * cos(longitude); 
```

例如经度和纬度：“lat”：19.0733000，“lon”：82.9479000，

z 坐标不作为它的 2d 存在。现在我显示了某种地图部分，但在大多数情况下并不那么正确，我用谷歌搜索从经度纬度转换，并且由于 openStreetMap 使用墨卡托投影，但是使用我有一个单独的问题，即如何处理绘制浮点数的值x 和 y 在屏幕上？

如何应用公式？为什么使用我正在使用的方程式是合适的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:32:40.877

不，您不能使用上述公式在 2d 平面上绘图。尝试 (0N, 0E) 给出坐标 (R, 0) 并且 (0N, 90E) 给出坐标 (0, R)。

此 gis 链接讨论墨卡托投影：[https ://gis.stackexchange.com/questions/20686/mercator-projection-problem-with-latitude-formula](https://gis.stackexchange.com/questions/20686/mercator-projection-problem-with-latitude-formula)

# c++ - C++ 头文件如何包含实现？

> ID：14517546
> 
> 赞同：99
> 
> 时间：2013-01-25T07:50:04.703
> 
> 标签：c++, header-files

好吧，无论如何都不是 C/C++ 专家，但我认为头文件的重点是声明函数，然后 C/CPP 文件是定义实现。

然而，今晚查看一些 C++ 代码时，我在一个类的头文件中发现了这个......

```
public:
    UInt32 GetNumberChannels() const { return _numberChannels; } // <-- Huh??

private:
    UInt32 _numberChannels; 
```

那么为什么在标头中有实现呢？跟`const`关键字有关系吗？这是否内联类方法？与在 CPP 文件中定义实现相比，这样做的好处/要点是什么？

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2013-01-25T08:22:59.507

> 好吧，无论如何都不是 C/C++ 专家，但我认为头文件的重点是声明函数，然后 C/CPP 文件是定义实现。

头文件的真正目的是在多个源文件之间共享代码。它**通常**用于将声明与实现分开以获得更好的代码管理，但这不是必需的。可以编写不依赖于头文件的代码，也可以编写仅由头文件组成的代码（STL 和 Boost 库就是很好的例子）。请记住，当**预处理器**遇到`#include`语句时，它会将语句替换为被引用文件的内容，然后**编译器**只看到完成的预处理代码。

因此，例如，如果您有以下文件：

富.h：

```
#ifndef FooH
#define FooH

class Foo
{
public:
    UInt32 GetNumberChannels() const;

private:
    UInt32 _numberChannels;
};

#endif 
```

Foo.cpp：

```
#include "Foo.h"

UInt32 Foo::GetNumberChannels() const
{
    return _numberChannels;
} 
```

酒吧.cpp：

```
#include "Foo.h"

Foo f;
UInt32 chans = f.GetNumberChannels(); 
```

预**处理器**分别解析 Foo.cpp 和 Bar.cpp 并生成**编译器**随后解析的以下代码：

Foo.cpp：

```
class Foo
{
public:
    UInt32 GetNumberChannels() const;

private:
    UInt32 _numberChannels;
};

UInt32 Foo::GetNumberChannels() const
{
    return _numberChannels;
} 
```

酒吧.cpp：

```
class Foo
{
public:
    UInt32 GetNumberChannels() const;

private:
    UInt32 _numberChannels;
};

Foo f;
UInt32 chans = f.GetNumberChannels(); 
```

Bar.cpp 编译成 Bar.obj 并包含调用 into 的引用`Foo::GetNumberChannels()`。Foo.cpp 编译成 Foo.obj 并包含`Foo::GetNumberChannels()`. 编译后，**链接器**将匹配 .obj 文件并将它们链接在一起以生成最终的可执行文件。

> 那么为什么在标头中有实现呢？

通过在方法声明中包含方法实现，它被隐式声明为内联（也`inline`可以显式使用一个实际关键字）。指出编译器应该内联一个函数只是一个提示，并不能保证该函数实际上会被内联。但如果是这样，那么无论从哪里调用内联函数，函数的内容都会直接复制到调用站点，而不是生成一个`CALL`语句来跳转到函数并在退出时跳转回调用者。然后，编译器可以考虑周围的代码，并在可能的情况下进一步优化复制的代码。 

> 它与 const 关键字有关吗？

不会。`const`关键字仅向编译器表明该方法不会改变运行时正在调用的对象的状态。

> 与在 CPP 文件中定义实现相比，这样做的好处/要点是什么？

当有效使用时，它通常允许编译器生成更快和更好优化的机器代码。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-01-25T07:56:32.327

在头文件中实现函数是完全有效的。唯一的问题是打破单一定义规则。也就是说，如果您包含来自多个其他文件的标头，您将收到编译器错误。

但是，有一个例外。如果您将函数声明为内联，则它不受单一定义规则的约束。这就是这里发生的事情，因为在类定义中定义的成员函数是隐式内联的。

内联本身是对编译器的一个提示，即函数可能是内联的良好候选者。也就是说，将对它的任何调用扩展为函数的定义，而不是简单的函数调用。这是一种优化，它以生成文件的大小换取更快的代码。在现代编译器中，为函数提供这种内联提示大多被忽略，除了它对单一定义规则的影响。此外，编译器总是可以自由地内联它认为合适的任何函数，即使它没有被声明`inline`（显式或隐式）。

在您的示例中，使用`const`after 参数列表表示成员函数不会修改调用它的对象。实际上，这意味着将考虑 指向的对象`this`以及所有类成员`const`。也就是说，尝试修改它们会产生编译时错误。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-25T07:54:58.947

由于是在类声明中*定义*的成员函数，因此它被隐式*声明。* 这并不意味着编译器*必须*内联它，而是意味着您不会破坏[单一定义规则](http://en.wikipedia.org/wiki/One_Definition_Rule)。它与^*完全无关。它也与函数的长度和复杂性无关。`inline`**`const`**

 **如果它是一个非成员函数，那么您必须将其显式声明为`inline`：

```
inline void foo() { std::cout << "foo!\n"; } 
```

^*有关成员函数末尾的更多信息，请参见[此处。](https://stackoverflow.com/questions/4059932/what-is-the-meaning-of-a-const-at-end-of-a-member-function)`const`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-25T08:02:23.093

即使在纯 C 中，也可以将代码放在头文件中。如果这样做，通常需要声明它`static`，否则包含相同标头的多个 .c 文件将导致“多重定义函数”错误。

预处理器在文本上包含一个包含文件，因此包含文件中的代码成为源文件的一部分（至少从编译器的角度来看）。

C++ 的设计者希望能够实现具有良好数据隐藏的面向对象编程，因此他们希望看到大量的 getter 和 setter 函数。他们不想要不合理的性能惩罚。因此，他们设计了 C++，使得 getter 和 setter 不仅可以在头文件中声明，而且可以实际实现，因此它们可以内联。你展示的那个函数是一个getter，当编译那个C++代码时，不会有任何函数调用；获取该值的代码将被编译到位。

可以制作一种没有头文件/源文件区别的计算机语言，但只有编译器可以理解的实际“模块”。（C++ 没有这样做；它们只是建立在源文件和文本包含的头文件的成功 C 模型之上。）如果源文件是模块，编译器可能会从模块中提取代码，然后内联该代码。但是 C++ 的方式实现起来更简单。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-25T07:59:12.903

据我所知，有两种方法，可以在头文件里面安全的实现。

*   内联方法 - 它们的实现被复制到使用它们的地方，因此双定义链接器错误没有问题；
*   模板方法——它们实际上是在模板实例化的那一刻编译的（例如，当有人输入一个类型代替模板时），所以再次没有双重定义问题的可能性。

我相信，你的例子适合第一种情况。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-08T06:45:40.730

**C++ 标准引号**

[C++17 N4659 标准草案](https://github.com/cplusplus/draft/blob/master/papers/n4659.pdf)10.1.6 “内联说明符”说方法是隐式内联的：

> 4 在类定义中定义的函数是内联函数。

然后再往下，我们看到内联方法不仅可以，而且*必须*在所有翻译单元上定义：

> 6 内联函数或变量应在使用 odr 的每个翻译单元中定义，并且在每种情况下都应具有完全相同的定义（6.2）。

这也在 12.2.1 “成员函数”的注释中明确提到：

> 1 成员函数可以在其类定义中定义 (11.4)，在这种情况下，它是内联成员函数 (10.1.6) [...]
> 
> 3 [ 注意：一个程序中最多可以有一个非内联成员函数的定义。一个程序中可能有多个内联成员函数定义。见 6.2 和 10.1.6。——尾注]

**GCC 8.3 实现**

主文件

```
struct MyClass {
    void myMethod() {}
};

int main() {
    MyClass().myMethod();
} 
```

编译和查看符号：

```
g++ -c main.cpp
nm -C main.o 
```

输出：

```
 U _GLOBAL_OFFSET_TABLE_
0000000000000000 W MyClass::myMethod()
                 U __stack_chk_fail
0000000000000000 T main 
```

然后我们从ELF目标文件中看到`man nm`该`MyClass::myMethod`符号被标记为弱，这意味着它可以出现在多个目标文件中：

> “W” “w” 该符号是一个弱符号，尚未被专门标记为弱对象符号。当弱定义符号与正常定义符号链接时，使用正常定义符号不会出错。当链接弱未定义符号且未定义符号时，符号的值以系统特定的方式确定而不会出错。在某些系统上，大写表示已指定默认值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-25T08:24:45.847

将实现保留在类头文件中是可行的，因为我确定您是否知道您是否编译了代码。该`const`关键字确保您不会更改任何成员，它使实例在方法调用期间保持[不变](http://en.wikipedia.org/wiki/Mutable)。**

# javascript - 带有requirejs的主干

> ID：14517548
> 
> 赞同：1
> 
> 时间：2013-01-25T07:50:05.640
> 
> 标签：javascript, backbone.js, requirejs

我正在构建一个复杂的 Web 应用程序并尝试将 requirejs 与骨干一起使用。我发现backbonejs 是一个非AMD 框架，它限制我使用requirejs 开箱即用。

我在互联网上进行了研究，发现有一些补丁可以使骨干 AMD 兼容。

如果以这种方式修补是一个没有问题的设置，请指导。由于在backbonejs中修补核心文件，我会在应用程序开发过程中遇到任何问题吗？

如果这是一个愚蠢的问题，我深表歉意:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T07:53:23.327

不，这不是一个愚蠢的问题。我们实际上已经做到了这一点，并且到目前为止对我们来说工作得很好:)

您可以按照本指南了解如何操作：http: [//kilon.org/blog/2012/08/build-backbone-apps-using-requirejs/](http://kilon.org/blog/2012/08/build-backbone-apps-using-requirejs/)

不要忘记阅读有关使用 Jasmine 进行单元测试的章节。很好的组合在一起。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-25T07:53:34.643

在 Require.js 2.0 之前，您必须修补 Backbone 以兼容 AMD。你可以在 github 上找到一些与 AMD 兼容的 Backbone 分支（例如[amdjs](https://github.com/amdjs/backbone)）。幸运的是，Require.js 2.0+ 添加了对使用 Shim 配置加载非 AMD 兼容脚本的支持。例子：

```
requirejs.config({
    shim: {
      "backbone": {
          deps: ["underscore", "jquery"],
          exports: "Backbone"
      }
    },

    paths: {
    // as usual
}); 
```

# iphone - 如何使用 WCDL2OBJC 从 wcf 服务获取数据

> ID：14517549
> 
> 赞同：1
> 
> 时间：2013-01-25T07:50:08.323
> 
> 标签：iphone, ios, ipad

嗨，我使用 获得了项目文件`WCDL2OBJC`，并将其包含在我的项目中。但我不知道如何提供输入和获取数据，我在这里空白无法前进。

作为我的网址：

```
[http://parentportal.technologyorg.com/ParentPortal.svc?wsdl][1] 
```

我想将参数传递`studentID='E6A83233-7D7F-49AF-B54E-375BBF3E3E59'`给这个 url 并从 WSDL2OBJC 的文件中获取 IBAction 中的输出。

任何人都可以有一些示例或源代码来执行此操作。我有，这是我在文件`@class GetSchoolEvents`中获取数据的方法。`WCDL2OBJC`如何访问它并获取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:59:42.597

在 WSDL2OBJC 页面上，您可以找到一些如何使用生成的代码的示例。[http://code.google.com/p/wsdl2objc/wiki/UsageInstructions](http://code.google.com/p/wsdl2objc/wiki/UsageInstructions) 只需创建一个 ..OperationRequest 对象并为变量设置属性

# json - 动态生成按钮并使用 JSON 将变量传递到新窗口

> ID：14517550
> 
> 赞同：2
> 
> 时间：2013-01-25T07:50:18.757
> 
> 标签：json, titanium-mobile

首先我是一个初学者，这是我的第一个应用程序。我已经在这个应用程序上工作了几天，但我被卡住了。在 remote_read-org-3.js 页面上，我正在创建作为状态列表的按钮。这些是从 mySQL 数据库中提取的。这部分正在工作。单击按钮时，我需要将 stateabbr 传递到下一个窗口。问题是无论我单击哪个按钮，它都会传递列表中的最后一个状态。这是 remote_read-org.js 它可能不是最干净的代码，但我仍在研究如何做

```
var currentWin = Ti.UI.currentWindow;

var view02 = Titanium.UI.createView({
         top:0,
        left:0,
        height: '100%',
        width: '100%',
        backgroundImage: 'images/wcs_background_2.jpg',
})

var label01 = Titanium.UI.createLabel({
    text: "US STATES",
    top:25,
    left:125,
    height:'auto',
    width:'175',
    textAlign: "left",
    font:{fontFamily:'Arial',fontWeight:'bold',fontSize:24},
    color: "#1c1e3b",
})

var label02 = Titanium.UI.createLabel({
    text: "Attachments",
    top:50,
    left: 125,
    height:'24',
    width:'150',
    textAlign: "left",
    font:{fontFamily:'Arial',fontWeight:'bold',fontSize:18},
    color: "#1c1e3b",
})

var view01 = Titanium.UI.createView({
        top:90,
        left:70,
        height: 375,
        width: Ti.UI.FILL,
})

var currentWin = Ti.UI.currentWindow;

var sendit = Ti.Network.createHTTPClient();
sendit.open('GET', 'http://localhost/test/read.php');
sendit.send();
sendit.onload = function(){
    var json = JSON.parse(this.responseText);

    var json = json.states;

    var dataArray = [];

    var scroller =  Ti.UI.createScrollView({
    height: Ti.UI.FILL,
    width: Ti.UI.FILL,
});

    var brandView = Ti.UI.createView({   //Primary view for buttons
        title: 'Hello',
        top:0,
        left:0,
        height      : Ti.UI.FILL,
        width       : Ti.UI.FILL,
        contentHeight : "auto",
        backgroundColor : "transparent",
        layout      : "horizontal",
        horizontalBounce :false,
});

scroller.add(brandView);

view01.add(scroller);

    var pos;
    for( pos=0; pos < json.length; pos++){

        dataArray.push({title:'' + json[pos].stateAbbr + ''});
        // set the array to the tableView
        var btn = Ti.UI.createButton({
        title: json[pos].stateAbbr,
        width: 60,
        height: 70,
        top: pos * 0, // space the buttons at 105
        left: 2,
        backgroundImage: 'images/state_icon.png', 
        MyID: json[pos].stateAbbr,
    });

    btn.addEventListener('click', function(e) { 

        var newWindow = Titanium.UI.createWindow({ 
            url: 'remote_read_acc.js', 
            MyID: btn.MyID
            }); 
newWindow.open(newWindow);

});

    brandView.add(btn);

    };

};

var brandView = Ti.UI.createView({
});

view02.add(view01);

view02.add(label01);
view02.add(label02);

currentWin.add(view02); 
```

我需要将 stateabbr 传递给这个新窗口 remote_read_acc.js

```
var currentWin = Ti.UI.currentWindow;

var view02 = Titanium.UI.createView({
         top:0,
        left:0,
        height: '100%',
        width: '100%',
        backgroundImage: 'images/wcs_background_2.jpg',
})

var label01 = Titanium.UI.createLabel({
    text: "US STATES",
    top:25,
    left:125,
    height:'auto',
    width:'175',
    textAlign: "left",
    font:{fontFamily:'Arial',fontWeight:'bold',fontSize:24},
    color: "#1c1e3b",
})

var label02 = Titanium.UI.createLabel({
    text: "Attachments",
    top:50,
    left: 125,
    height:'24',
    width:'150',
    textAlign: "left",
    font:{fontFamily:'Arial',fontWeight:'bold',fontSize:18},
    color: "#1c1e3b",
})

var view01 = Titanium.UI.createView({
        top:90,
        left:90,
        height: 375,
        width: Ti.UI.FILL,
})

var currentWin = Ti.UI.currentWindow;

var sendit = Ti.Network.createHTTPClient();
sendit.open('GET', 'http://localhost/test/attachments.php');
sendit.send();
sendit.onload = function(){
    var json = JSON.parse(this.responseText);

    var json = json.attachments;

    var dataArray = [];

    var scroller =  Ti.UI.createScrollView({
    height: Ti.UI.FILL,
    width: Ti.UI.FILL,
});

    var brandView = Ti.UI.createView({   //Primary view for buttons
        title: 'Hello',
        top:0,
        left:0,
        height      : Ti.UI.FILL,
        width       : Ti.UI.FILL,
        contentHeight : "auto",
        backgroundColor : "transparent",
        layout      : "horizontal",
        horizontalBounce :false,
});

scroller.add(brandView);

view01.add(scroller);

    var pos;
    for( pos=0; pos < json.length; pos++){

        dataArray.push({title:'' + json[pos].attachmentName + ''});
        // set the array to the tableView
        var btn = Ti.UI.createButton({
        title: json[pos].attachmentName ,
        width: 190,
        height: 30,
        top: pos * 0, // space the buttons at 105
        left: 2,
        MyID: json[pos].attachmentName,
    });

    btn.addEventListener('click', function(e) { 

        var newWindow = Titanium.UI.createWindow({ 
            url: '', 
            }); 
newWindow.open(newWindow);

    brandView.add(btn);

    };

};

var brandView = Ti.UI.createView({
});

view02.add(view01);

view02.add(label01);
view02.add(label02);

currentWin.add(view02); 
```

然后，我还需要使用我传递的 stateabbr 来查询 dataArray 以从数组中提取与 stateabbr 变量匹配的值。所以我可以在这个页面上显示它们。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T04:31:35.823

它传递了列表中的最后一个状态，因为您在 for 循环中添加事件侦听器并忽略 JavaScript 范围规则（它们肯定不是最容易理解的）。所以发生的事情`btn`总是等于`btn`你创建的最后一个。而是尝试这个，使用`source`每个事件的属性`click`，这将您的内部范围与 for 循环的外部范围分开：

```
btn.addEventListener('click', function(e) { 

    var newWindow = Titanium.UI.createWindow({ 
        url: 'remote_read_acc.js', 
        MyID: e.source.MyID // Get the actual button that was clicked
    }); 
    newWindow.open(newWindow);
}); 
```

为了进一步优化这一点，我会将事件侦听器函数移到循环之外。另外，我不会使用`url`window 的属性，因为这将打开一个完全不同的 JavaScript 上下文，这是相当重量级的，而是尝试使用`require()`CommonJS 指令。

# android - Android 代码中的 NullPointerException

> ID：14517551
> 
> 赞同：2
> 
> 时间：2013-01-25T07:50:25.310
> 
> 标签：android, nullpointerexception

错误是：

```
java.lang.NullPointerException.onCreateOptionsMenu(AddMyMarketsActivity.java:44) 
```

我的代码是：

```
41 if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
42          SearchManager searchManager = (SearchManager) getSystemService(Context.SEARCH_SERVICE);
43          SearchView searchView = (SearchView) menu.findItem(R.id.menu_search).getActionView();       
44          searchView.setSearchableInfo(searchManager.getSearchableInfo(getComponentName()));
            Log.i("searchView", "set searchable configuration for searchView "); 
```

我的代码可能有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-14T22:01:20.650

如果您使用 androids 支持库来显示您的操作栏，请确保您在 SearchView 声明中使用正确的 actionViewClass。

应该是`app:actionViewClass="android.support.v7.widget.SearchView"`。

之后，您可以将其用作尝试获取 ActionView 的代码的替代品：

```
MenuItem searchItem = menu.findItem(R.id.search_view);
SearchView searchView = (SearchView) MenuItemCompat.getActionView(searchItem); 
```

在调用它之前一定要调用 getMenuInfalter().inflate(...)。

更多信息：http: [//developer.android.com/guide/topics/ui/actionbar.html#ActionView](http://developer.android.com/guide/topics/ui/actionbar.html#ActionView)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-08T11:04:30.673

我遇到了同样的错误，并通过更改将其删除：

```
android:actionViewClass="android.widget.SearchView" 
```

到

```
app:actionViewClass="android.widget.SearchView" 
```

来自 menu.xml 文件

> 即改变 android: 到 app:

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-24T17:43:25.817

我正在描述将搜索视图添加到操作栏的整个过程。这段代码对我有用。

**在菜单中添加搜索视图**：在需要搜索视图的活动的菜单布局中添加以下项目。

```
<item
android:id="@+id/search"
android:title="@string/search_title"
android:icon="@drawable/ic_action_search"
app:showAsAction="collapseActionView|ifRoom"
app:actionViewClass="android.support.v7.widget.SearchView"/> 
```

注意：菜单布局文件应包含以下架构。xmlns:app="http://schemas.android.com/apk/res-auto"

**创建可搜索配置**：在目录 res/xml 中创建文件 searchable.xml。将以下代码复制到其中。

```
<?xml version="1.0" encoding="utf-8"?>
<searchable xmlns:android="http://schemas.android.com/apk/res/android"
    android:label="@string/app_name"
    android:hint="@string/search_hint" /> 
```

**修改 onCreateOptionsMenu() 方法**：在活动的 onCreateOptionsMenu() 方法中，通过调用 setSearchableInfo(SearchableInfo) 将可搜索配置与 SearchView 相关联：您的 onCreateOptionsMenu 应该如下所示。

```
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.menu_display_cards, menu);
    // Associate searchable configuration with the SearchView
    SearchManager searchManager =
            (SearchManager) getSystemService(Context.SEARCH_SERVICE);
    //SearchView searchView =
     //       (SearchView) menu.findItem(R.id.search).getActionView();
    MenuItem mSearchMenuItem = menu.findItem(R.id.search);
    SearchView searchView =
    (SearchView)MenuItemCompat.getActionView(mSearchMenuItem);         
    searchView.setSearchableInfo(searchManager.getSearchableInfo(
            new ComponentName(getApplicationContext(), 
            SearchResultsActivity.class)));
    return true;
} 
```

**创建一个活动 SearchResultsActivity**以显示搜索结果。在清单文件中，添加以下内容

```
<activity
        android:name=".SearchResultsActivity"
        android:label="@string/title_activity_search_results" >
        <intent-filter>
            <action android:name="android.intent.action.SEARCH" />
        </intent-filter>
        <meta-data
            android:name="android.app.searchable"
            android:resource="@xml/searchable"
            android:value=".SearchResultsActivity"/>
 </activity> 
```

您的 SearchResultsActivity 应该实现以下方法

```
@Override
protected void onNewIntent(Intent intent) {
    ...
    handleIntent(intent);
}

private void handleIntent(Intent intent) {

    if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
        String query = intent.getStringExtra(SearchManager.QUERY);
        //use the query to search your data and show it in 
        //SearchResultsActivity
    }
} 
```

注意：您应该从 SearchResultsActivity 的 onCreate 方法中调用以下内容

```
handleIntent(getIntent()); 
```

# emacs - emacs 中的自动分帧

> ID：14517552
> 
> 赞同：2
> 
> 时间：2013-01-25T07:50:28.257
> 
> 标签：emacs, elisp, customization

某些`emacs`函数拆分当前帧，例如`magit-status`或`compile`（可能有几十个）。如何`emacs`决定是*垂直*分割还是*水平*分割？

我的实验表明，如果框架的宽度大于 162 个字符，那么它会进行垂直分割，否则会进行水平分割。它是正确的值吗？更重要的是，这个值存储在哪里，我怎样才能改变这个阈值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:04:29.670

> `split-width-threshold`：
> 
> 合理分割窗口的最小宽度。隐藏 如果这是一个整数，`split-window-sensibly`则仅当窗口至少有这么多列时才可以水平拆分窗口。如果为 nil， `split-window-sensibly`则不允许水平拆分窗口。

此处的标准值为 160，看起来与您找到的非常接近。

# php - file_exists() 与 scandir() 的 in_array() ——哪个更快？

> ID：14517556
> 
> 赞同：6
> 
> 时间：2013-01-25T07:51:02.173
> 
> 标签：php

假设我们有一个这样的循环：

```
foreach($entries as $entry){ // let's say this loops 1000 times
   if (file_exists('/some/dir/'.$entry.'.jpg')){
      echo 'file exists';
   }
} 
```

我假设这必须访问 HDD 1000 次并检查每个文件是否存在。

不如这样做呢？

```
$files = scandir('/some/dir/');
foreach($entries as $entry){ // let's say this loops 1000 times
   if (in_array($entry.'.jpg', $files)){
      echo 'file exists';
   }
} 
```

**问题1：**如果这访问硬盘一次，那么我相信它应该会快很多。我是对的吗？

但是，如果我必须检查文件的子目录怎么办，如下所示：

```
foreach($entries as $entry){ // let's say this loops 1000 times
   if (file_exists('/some/dir/'.$entry['id'].'/'.$entry['name'].'.jpg')){
      echo 'file exists';
   }
} 
```

**问题2：**如果我想应用上述技术（数组中的文件）来检查条目是否存在，我如何将`scandir()`子目录放入数组中，以便我可以使用这种方法比较文件是否存在？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T08:09:08.743

我的观点是，我相信它`scandir()`会更快，因为它只读取一次目录，`file_exists()`而且速度很慢。

此外，您可以使用`glob()`. 这将列出目录中与特定模式匹配的所有文件。看[这里](http://php.net/manual/en/function.glob.php)

不管我怎么看，你都可以像这样运行一个简单的脚本来测试速度：

```
<?php

// Get the start time
$time_start = microtime(true);

// Do the glob() method here

// Get the finish time
$time_end = microtime(true);
$time = $time_end - $time_start;

echo '\'glob()\' finished in ' . $time . 'seconds';

// Do the file_exists() method here

// Get the finish time
$time_end = microtime(true);
$time = $time_end - $time_start;

echo '\'file_exists()\' finished in ' . $time . 'seconds';

// Do the scandir() method here

// Get the finish time
$time_end = microtime(true);
$time = $time_end - $time_start;

echo '\'scandir()\' finished in ' . $time . 'seconds';

?> 
```

***不确定上述脚本将如何处理缓存，您可能必须将测试分成单独的文件并单独运行***

## 更新 1

您还可以实现该函数`memory_get_usage()`以返回当前分配给 PHP 脚本的内存量。您可能会发现这很有用。有关更多详细信息，请参见[此处](http://php.net/manual/en/function.memory-get-usage.php)。

## 更新 2

至于你的第二个问题，有几种方法可以列出目录中的所有文件，包括子目录。查看这个问题的答案：

[扫描目录和子目录中的文件，并使用 php 将它们的路径存储在数组中](https://stackoverflow.com/questions/8870731/scan-files-in-a-directory-and-sub-directory-and-store-their-path-in-array-using)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:09:19.527

你可以看看[这里](https://stackoverflow.com/questions/21133/simplest-way-to-profile-a-php-script)。

我修改了“问题代码”，例如，您可以通过以下方式快速检查，

```
<?php
   $start = microtime();
    //Your code
    $end = microtime();
    $result= $now-$then;
    echo $result;
?> 
```

我个人认为`scandir()`会比`in_array()`.

# asp.net-mvc-3 - 在 mvc4 中使用 Razor 语法的复选框

> ID：14517557
> 
> 赞同：0
> 
> 时间：2013-01-25T07:51:02.507
> 
> 标签：asp.net-mvc-3, razor, asp.net-mvc-4

我想使用剃刀语法在视图中显示一个复选框。模型属性 IsActive 应该是 int。型号是：-

```
public class Student
    {
        public int StudentID { get; set; }
        public string Code { get; set; }
        public string Description { get; set; }
        public int IsActive { get; set; }           
} 
```

观点是：-

```
<div class="editor-label">
        @Html.LabelFor(model => model.IsActive)
    </div>
    <div class="editor-field">
        @Html.CheckBoxFor(model => model.IsActive)
        @Html.ValidationMessageFor(model => model.IsActive)
    </div> 
```

我应该显示复选框，如果选中复选框，则应将 1 保存到数据库中，如果未选中，则应保存 0。

请帮助我...谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T07:54:10.207

您在错误消息中不明白什么？您不能将 CheckBoxFor 用于 int 属性。

你应该改变你的模型并设置

```
public bool IsActive {get;set;} 
```

现在，它可能是一个 int 的充分理由，但很难用你的代码说明为什么......

如果 IsActive 只能是 0 或 1，您应该使用 ViewModel 类，并使用布尔属性，您将映射到您的类。

```
public class StudentViewModel
    {
        public int StudentID { get; set; }
        public string Code { get; set; }
        public string Description { get; set; }
        public bool IsActive { get; set; }           
} 
```

然后当你从你的数据库中得到你的学生时（在你的“GET”动作中）

类似的东西（乡村）

```
public ActionResult StudentEdit(int id) {
  var student = getStudentById(id);
  var model = new StudentViewModel {
                  StudentId = student.StudentID,
                  Code = student.Code,
                  Description = student.Description,
                  IsActive = student.IsActive == 1 
              };

  return View(model);
} 
```

您的视图应使用 StudentViewModel 输入

```
@model StudentViewModel 
```

然后在您的 POST 操作中，反转

```
[HttpPost]
public ActionResult StudentEdit(StudentViewModel model) {
    var student = getStudentById(model.StudentID);
    student.Code = model.Code;
    student.Description = model.Description;
    student.IsActive = model.IsActive ? 1 : 0;
    UpdateStudent(student);

    return Redirect...
} 
```

**编辑**：

这是一个非常质朴的答案，我相信你可以做得更好。

为此，我们需要更多信息：

您使用的是实体框架（版本）吗？

如果是，代码优先，数据库优先，模型优先？

哪个数据库落后？

你能改变数据库的东西吗？

IsActive 在数据库中有什么类型？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:54:06.670

`IsActive`应该是布尔值，`@Html.CheckBoxFor()`辅助方法需要布尔参数

将代码更改为

```
public bool IsActive { get; set; } 
```

# sql - 使用窗口函数的 SQL Server 中用户活动的每月移动平均值

> ID：14517560
> 
> 赞同：1
> 
> 时间：2013-01-25T07:51:11.600
> 
> 标签：sql, sql-server-2012

假设我在 SQL Server 2012 中有一个包含两列的表 UserActivity：

*   活动日期时间
*   用户身份

我想每天计算 30 天内有任何活动的不同用户的数量（我的每月活跃用户）。（所以我有一个 30 天的窗口，每次递增一天。如何使用 SQL Server 中的窗口函数有效地做到这一点？

输出将如下所示：

```
Date,NumberActiveUsersInPrevious30Days
01-01-2010,13567
01-02-2010,14780
01-03-2010,13490
01-04-2010,15231
01-05-2010,15321
01-06-2010,14513
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:48:18.017

SQL Server doesn't support `COUNT(DISTINCT ... ) OVER ()` or a numeric value (`30 PRECEDING`) in conjunction with `RANGE`

I wouldn't bother trying to coerce window functions into doing this. Because of the `COUNT(DISTINCT UserID)` requirement it is always going to have to re-examine the entire 30 day window for each date.

You can create a calendar table with a row for each date and use

```
SELECT C.Date,
       NumberActiveUsersInPrevious30Days
FROM   Calendar C
       CROSS APPLY (SELECT COUNT(DISTINCT UserID)
                   FROM   UserActivity
                   WHERE  ActivityDateTime >= DATEADD(DAY, -30, C.[Date])
                   AND ActivityDateTime < C.[Date]) CA(NumberActiveUsersInPrevious30Days)
WHERE  C.Date BETWEEN '2010-01-01' AND '2010-01-06' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:23:16.380

**选项 1：** For (while) 每天循环并为每个选择向后 30 天（显然很慢）。

**选项 2：**一个单独的表，每天有一行，并加入原始表（同样很慢）。

**选项 3：**递归 CTE 或存储过程（仍然没有做得更好）。

**选项 4：**结合游标的 For (while) 循环（高效，但需要一些高级 SQL 知识）。使用此解决方案，您将按顺序遍历每一天和每一行并跟踪平均值（您需要某种环绕数组来知道当一天超出范围时要减去什么值）。

**选项 5：**通用/脚本编程语言（C++/Java/PHP）中的选项 3（只需具备其中一种语言的基本知识即可轻松完成，高效）。

[一些](https://stackoverflow.com/questions/10706012/how-to-compute-the-moving-average-over-the-last-n-hours) [相关的](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=93911) [问题](https://stackoverflow.com/questions/5407273/window-moving-average-in-sql-server)。

# c# - Quartz Scheduler 的工作被解雇但 JobListener 没有收到事件？

> ID：14517563
> 
> 赞同：1
> 
> 时间：2013-01-25T07:51:17.850
> 
> 标签：c#, quartz-scheduler

几天来，我一直在努力完成这项工作。我正在尝试使用石英调度程序在我的主窗体上触发一个事件，从中可以调用一个方法。我的主窗体上的代码如下：

```
void StartSchedule()
{
    string AuctionTime = "0 0 0 ? * MON-FRI *";

    JobKey jobkey = new JobKey("Auction", "G");

    IJobDetail job = JobBuilder.Create<AuctionJob>()
                                .WithIdentity(jobkey)
                                .Build();

    CronScheduleBuilder csb = CronScheduleBuilder.CronSchedule(new CronExpression(AuctionTime)).InTimeZone(TimeZoneInfo.Local);

    ICronTrigger trigger = (ICronTrigger)TriggerBuilder.Create()
                                                        .WithIdentity("Auction-Trigger", "G")
                                                        .WithSchedule(csb)
                                                        .Build();

    // Create listener
    JobListener auctionListener = new JobListener();
    auctionListener.JobExecutedHandler += new EventHandler(SendAuctionOrders);
    IMatcher<JobKey> matcher = KeyMatcher<JobKey>.KeyEquals(jobkey);
    _scheduler.ListenerManager.AddJobListener(auctionlistener, matcher);

    // Add to scheduler
    DateTimeOffset ft = _scheduler.ScheduleJob(job, trigger);

    LogEvent(job.Key + " scheduled at: " + ft.ToLocalTime());

    jobkey = new JobKey("Auction2", "G");

    IJobDetail job = JobBuilder.Create<AuctionJob>()
                                .WithIdentity(jobkey)
                                .Build();

    csb = CronScheduleBuilder.CronSchedule(new CronExpression(AuctionTime)).InTimeZone(TimeZoneInfo.Local);

    ICronTrigger trigger = (ICronTrigger)TriggerBuilder.Create()
                                                        .WithIdentity("Auction-Trigger", "G")
                                                        .WithSchedule(csb)
                                                        .Build();

    // Create listener
    JobListener auction2Listener = new JobListener();
    auction2Listener.JobExecutedHandler += new EventHandler(SendAuctionOrders);
    IMatcher<JobKey> matcher = KeyMatcher<JobKey>.KeyEquals(jobkey);
    _scheduler.ListenerManager.AddJobListener(auction2listener, matcher);

    // Add to scheduler
    ft = _scheduler.ScheduleJob(job, trigger);

    LogEvent(job.Key + " scheduled at: " + ft.ToLocalTime());

    _scheduler.Start();
}

void SendAuctionOrders()
{
    // Do something
} 
```

AuctionJob 类如下所示：

```
public class AuctionJob : IJob
{
    public void Execute(IJobExecutionContext context)
    {
        // Empty
        Console.WriteLine("auction exec");
    }
} 
```

虽然作业侦听器看起来像这样：

```
public class JobListener : IJobListener
{
    private static readonly ILog logger = LogManager.GetLogger(typeof(JobListener));

    public event EventHandler JobExecutedHandler;

    public void JobExecutionVetoed(IJobExecutionContext context)
    {
        logger.Info("JobExecutionVetoed");
    }

    public void JobToBeExecuted(IJobExecutionContext context)
    {
        logger.Info("JobToBeExecuted");
    }

    public void JobWasExecuted(IJobExecutionContext context, JobExecutionException jobException)
    {
        // Raise the event on executed
        OnJobExecuted(EventArgs.Empty);

        logger.Info("JobWasExecuted");
    }

    public string Name
    {
        get
        {
            return "JobListener";
        }
    }

    // Event raiser
    protected virtual void OnJobExecuted(EventArgs args)
    {
        // This code will prevent IllegalThreadContext exceptions
        EventHandler jobExecHandler = JobExecutedHandler;

        if (jobExecHandler != null)
        {
            ISynchronizeInvoke target = jobExecHandler.Target as ISynchronizeInvoke;

            if (target != null && target.InvokeRequired)
            {
                target.Invoke(jobExecHandler, new object[] { this, args });
            }
            else
            {
                jobExecHandler(this, args);
            }
        }
    }
} 
```

当作业被触发时，作业被执行（控制台打印“auction exec”）但作业侦听器的 JobWasExecuted 没有拾取它。谁能帮我解决这个问题？

附加问题：还有其他方法可以调用主窗体的方法吗？此外，作业侦听器类是否会在整个应用程序中持续存在（理论上不会关闭）。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T08:53:36.103

问题解决了。在实现 IJobListener 类时，Name 属性受到保护，当添加到 ListenerManager 时，它会覆盖之前的条目。诀窍是在实例化 JobListener 类并将其添加到：

```
public string Name
{
    get
    {
        return instanceName + "JobListener";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-09T17:57:40.617

我今天遇到了类似的事情，我有（log4net）调试行在我的 JobWasExecuted 方法中没有输出任何内容，即使 JobToBeExecuted 中的类似行正在工作。在击败它大约两个小时后，我通过在我的工作成功完成后引发自定义异常来破解它。（当我真的只是想获取最终的工作状态时，“hack”部分必须引发异常以让 JobWasExecuted 做出反应。）

我想如果我是为一个不平凡的项目做这件事，我只会让我的工作将消息放到一个队列中（并观察它），并且我可能会错过一些我应该在我的工作中设置的东西提出一个事件，但我仍然发现 Quartz.NET 世界的这一部分非常混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-09T19:45:28.027

我的情况类似，但有不同的原因 - 我想我会在这里分享它，以防其他人有同样的问题。事件和听众似乎没有被解雇。我正在动态创建作业/触发器，从数据库中提取触发器开始时间。问题是虽然我从数据库中提取的日期时间是 UTC，但在 C# 中使用时并没有标记为 UTC（而是本地）。这些工作正在安排中，但在未来 9 小时内，我预计它们会在一分钟内触发。将日期时间标记为 UTC 解决了这个问题：

```
DateTime NextExecutionStartDate = DateTime.SpecifyKind(myDBObject.NextExecutionStartDate, DateTimeKind.Utc);

...Trigger.StartAt(NextExecutionStartDate) 
```

代替

```
...Trigger.StartAt(myDBObject.NextExecutionStartDate) 
```

# sql-server - CTE递归查询的逻辑处理

> ID：14517567
> 
> 赞同：0
> 
> 时间：2013-01-25T07:51:52.410
> 
> 标签：sql-server, sql-server-2008, tsql

此查询返回使用变量定义的日期范围之间的所有天数，结果集是 31 个不同的值。但是，递归 CTE 的工作方式是第一个查询只执行一次，第二个查询对之前创建的结果集起作用。因此，似乎会有重复，但它返回了不同的结果集。CTE 是在内部应用 DISTINCT 子句还是其他什么？我如何获得 DISTINCT 值？

```
DECLARE 
    @DateFrom DATE = '20130101' ,
    @DateTo DATE = '20130131'

WITH Days
AS ( SELECT CAST(@DateFrom AS DATETIME) AS dt
     UNION ALL
     SELECT DATEADD(dd, 1, dt)
     FROM Days s
     WHERE DATEADD(dd, 1, dt) <= CAST(@DateTo AS DATETIME)
   )

SELECT dt 
FROM Days 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:58:32.763

每次 CTE 递归时，它都会使用前一次递归产生的行（如果这是它第一次递归，则使用初始行集）。

因此，对于您的查询，第一次运行会产生一行 -`'20130101'`转换为日期时间。

对于第一个递归步骤，我们获取最后一次递归或初始集合 ( `'20130101'`) 生成的所有行，并使用它来生成一个新行，其中包含`'20130102'`.

对于下一个递归步骤，我们将最后一次递归产生的所有行 ( `'20130102'`) 并使用它来产生一个新行 ( `'20130103'`)

对于下一个递归步骤，我们将最后一次递归产生的所有行 ( `'20130103'`) 并使用它来产生一个新行 ( `'20130104'`)

我看不到任何地方会出现重复。

[在这里](http://msdn.microsoft.com/en-gb/library/ms186243(v=sql.105).aspx)阅读更多：

> 递归执行的语义如下：
> 
> 1.  将 CTE 表达式拆分为锚和递归成员。
>     
>     
> 2.  运行创建第一个调用或基本结果集 ( `T0`) 的锚成员。
>     
>     
> 3.  将递归成员`Ti`作为输入和`Ti+1`输出运行。
>     
>     
> 4.  重复步骤 3，直到返回一个空集。
>     
>     
> 5.  返回结果集。这是`UNION ALL`一个`T0`to `Tn`。

# api - Drupal 7 商务搜索 API

> ID：14517568
> 
> 赞同：0
> 
> 时间：2013-01-25T07:51:59.167
> 
> 标签：api, search, drupal-7, commerce

我想创建一个像 Drupal 中的标准搜索框但用于 Drupal Commerce (1.4) 的搜索框。我没有使用产品展示，但我所有的产品都是创建的。

有没有办法做到这一点？

我发现了这个：[http](http://drupal.org/project/commerce_search_api) ://drupal.org/project/commerce_search_api 和这个：[http](http://commerceguys.com/blog/commerce-module-tuesday-commerce-search-api) ://commerceguys.com/blog/commerce-module-tuesday-commerce-search-api （有趣的英语:-)）

我试过第二个，但我不需要价格标尺。我只想让访问者可以搜索我的产品。不仅是标题字段，还有描述字段，如果可能的话，还有分类术语。无论如何它都没有用。

需要帮忙！谢谢！

我想用视图来创建它，但欢迎所有好的建议。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-10T10:58:11.253

您可以禁用搜索 API 模块并简单地使用 Drupal 提供的默认搜索模块，这样就可以像往常一样通过节点、用户等进行搜索。

搜索 API 可能无法满足您的需求，除非您希望用户将其用作搜索过滤器（价格范围、每个属性等）的变体、价格、产品属性等的良好组合。

# ruby-on-rails - 导轨中的奇怪缺失部分错误

> ID：14517569
> 
> 赞同：1
> 
> 时间：2013-01-25T07:52:07.877
> 
> 标签：ruby-on-rails, partials

您好，我的 rails 应用程序出现了一个奇怪的错误。

```
ActionView::MissingTemplate (Missing partial foo/bar, application/bar with {:locale=>[:en], :formats=>[:js, "application/ecmascript", "application/x-ecmascript", :html, :text, :js, :css, :ics, :csv, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :handlers=>[:erb, :builder, :coffee]}. Searched in: blah blah
):
  app/controllers/foo_controller.rb:9:in `doSomething' 
```

现在我非常确定 app/views/foo 中有 bar.html.erb 文件。有任何想法吗？我听说当文件名中可能有空格时有时会发生这种情况，但事实并非如此。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T07:55:55.883

in`app/views/foo bar.html.erb`应该是`_bar.html.erb`，因为所有部分名称都应该以`"_"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T07:54:46.000

部分名称以“_”下划线开头。看起来您在前缀 bar.html.erb 中错过了下划线

# ruby-on-rails-3 - Rails 3表单中的日期格式

> ID：14517571
> 
> 赞同：2
> 
> 时间：2013-01-25T07:52:24.867
> 
> 标签：ruby-on-rails-3, date

我的问题类似于这个 SO 问题，但它没有回答我的问题：

[没有UTC的Rails 3默认日期时间格式](https://stackoverflow.com/questions/3694352/rails-3-default-datetime-format-without-utc)

我知道我可以添加

```
Time::DATE_FORMATS[:default] = "%Y/%m/%d" 
```

到我的`environment.rb`，它会相应地改变我的默认时间格式。

所以当我这样做时，`Time.now.to_s`我会得到正确的格式。

但是，我的问题是，为什么这不适用于 form_builder。例如：

```
<%= f.text_field :date %> 
```

将返回完整的 UTC 时间戳：`2013-01-25 07:45:21`

我知道我可以做到这一点

```
<%= f.text_field :date, :value => @post.date.to_s %> 
```

它会给我正确的格式。

但是这个解决方案对我来说似乎很老套。这真的是唯一的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T04:58:17.103

我不是百分百确定。但答案很可能是否定的。rails formhelper 只是为您提供数据库中的任何值。

以下是检索值供您参考的位置：

[http://api.rubyonrails.org/classes/ActionView/Helpers/InstanceTag.html#method-i-to_input_field_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/InstanceTag.html#method-i-to_input_field_tag)

没有对其进行特殊处理，例如`localize`or `to_s`，这是应用格式化的地方。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-25T09:21:07.107

如果日期看起来像`timestamp`( `2013-01-25 07:45:21 UTC`)，

您可以执行以下操作来查看本地化时间戳：

```
<%= localize(@post.date, :format => :long) %> 
```

根据您的问题，您可以尝试使用`date_select`而不是`text_field.`

```
<%= f.date_select :date, :order => [:day, :month, :year] %> 
```

# java - Java web start 无法启动 - JRE 7 32 位（在 64 位 Windows 系统上运行）

> ID：14517577
> 
> 赞同：2
> 
> 时间：2013-01-25T07:52:36.497
> 
> 标签：java, java-web-start

我已经删除了所有 JDK/JRE（使用卸载程序），从注册表中删除了 JavaSoft 内容，从环境变量中删除了 JAVA_HOME，在“路径”环境变量中删除了对 Java 的任何引用。

然后我为 32 位系统安装了 JDK 7u11。

当我尝试使用 Java webstart（通过浏览器或直接从命令行）时，我会短暂地看到 Java 7 启动屏幕，然后是一个显示“无法启动应用程序”的对话框，单击“详细信息”按钮产生这个：

```
java.lang.NullPointerException
    at com.sun.deploy.config.JREInfo.validateHomeJRE_int(Unknown Source)
    at com.sun.deploy.config.JREInfo.initialize(Unknown Source)
    at com.sun.deploy.config.ClientConfig.refreshProperties(Unknown Source)
    at com.sun.deploy.config.ClientConfig.init(Unknown Source)
    at com.sun.deploy.config.WebStartConfig.init(Unknown Source)
    at com.sun.deploy.config.ClientConfig.<init>(Unknown Source)
    at com.sun.deploy.config.WebStartConfig.<init>(Unknown Source)
    at com.sun.javaws.Main.main(Unknown Source) 
```

我正在执行正确的 javaws.exe 文件（我正在尝试使用命令行来确定）。

我用谷歌搜索了这个，发现只有一个无用的链接：

[http://fxexperience.com/2011/05/maps-in-javafx-2-0/](http://fxexperience.com/2011/05/maps-in-javafx-2-0/) （看评论部分，显然其他人也有同样的问题，但没有解决）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-02T11:33:56.420

解决方案在这里

[http://allenwu.logdown.com/posts/253492-not-open-the-java-control-panel](http://allenwu.logdown.com/posts/253492-not-open-the-java-control-panel)

照原样删除 \LocalLow\Sun\Java\Deployment\deployment.properties 下的所有内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-05T18:54:03.413

我的步骤：

*   卸载所有 JRE 和 JDK 程序版本。
*   删除所有目录：
    *   甲骨文/Java
    *   爪哇软件
    *   爪哇
    *   太阳/爪哇
*   从所有系统目录：

    *   程序文件
    *   程序文件(x86)
    *   `C:\Users\[user]\AppData\Local\`
    *   `C:\Users\[user]\AppData\LocalLow\`
*   重新安装 Oracle JRE 或 JDK

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T08:34:41.217

解决了。我从 Oracle 站点重新下载了 32 位 Java 并再次安装它并且它工作正常。

当我卸载 64 位版本并安装 32 位版本时，它并没有正确地将 jnlp 文件与 javaws.exe 关联，因此我不得不使用 Windows 机制手动执行此操作。一旦完成，它就可以工作。

感谢大家的帮助！

# r - 在图形设备上缓慢绘图

> ID：14517578
> 
> 赞同：1
> 
> 时间：2013-01-25T07:52:39.763
> 
> 标签：r, map, rgdal

我正在使用 R 通过 rgdal 进行一些地图绘制。我正在使用一张底图，然后我制作了一些（大约 30 张）不同的地图，底图上有一些轨道。

如果我在例如 qgis 中打开底图，它们会立即渲染，但 R 需要大约 30 秒来渲染底图。由于我一直使用相同的底图，是否可以设置一次然后将其复制到其他地图？

我试着做

```
plot(basemap)
dev.copy(device=x11) 
```

这给了我一个带有底图的新设备，但是在复制过程中，地图被重新绘制，所以我在上面花了很多时间......在 R 中复制图形设备的任何其他方法？

# java - 如何避免并发 UDP 服务器丢包

> ID：14517579
> 
> 赞同：2
> 
> 时间：2013-01-25T07:52:43.540
> 
> 标签：java, sockets, udp

这是产生这个问题[的原始链接。](https://stackoverflow.com/questions/14516734/java-udp-server-concurrent-clients)

所以，显然 DataGramSocket 不会排队接收到的数据包。因此，如果两个系统同时发送，其中一个数据包将丢失（使用链接中的代码）。我正在寻找避免在这种情况下丢弃数据包的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:01:27.540

如果您想确保没有数据（数据包）丢失，请使用 TCP！

UDP 的一个优点是开销较小，因此可用于拥塞、高流量的连接，例如视频或游戏流。较低开销的一个原因是缺乏关于数据在传输过程中不会丢失的保证。

从您的问题来看，您似乎确实关心丢失的数据，因此您需要建立措施来检测这一点。如果您愿意，您可能希望数据在正确到达之前重新发送？这就是 TCP 为您提供的……！

如果真的是 Java 正在丢弃数据，那可能是由于队列已满。UDP 协议可能“结束”了，但 Java 知道有一个 UDP 协议及其所有“后果”。由于 UDP 是为高吞吐量而设计的，Java 部分也是为同样的要求而设计的。*对所有内容*进行排队会导致（大量）开销，这与 UDP 设计相反，因此这极不可能。此外，从队列中删除数据与在传输过程中丢失数据（恕我直言）没有什么不同，所以 Java 删除数据并不让我感到惊讶！

如果要防止这种情况发生，则需要更大的队列（尽管也可能会填满），更重要的是更快地处理排队的数据（以防止填满队列）。

但*最重要*的是接受数据丢失！如果您的应用程序/服务器无法处理：请勿*使用 UDP*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T08:02:31.787

有队列，但它们总是有限的，你总是可以达到极限。没有办法完全避免这样的问题。您可以通过在服务器上设置低负载来最大限度地减少影响，以便它可以快速耗尽队列，并为 UDP 流量提供专用网络。

通常，您必须为丢失的数据包预留一些余量，并且必须使协议可靠。

# google-chrome - Chrome 扩展假冒用户

> ID：14517580
> 
> 赞同：0
> 
> 时间：2013-01-25T07:53:00.237
> 
> 标签：google-chrome, google-chrome-extension, webstore

> **可能重复：**
> [Chrome 扩展的明显虚假安装](https://stackoverflow.com/questions/14552237/apparent-fake-installs-of-chrome-extension)

我真的希望有人可以帮助我们，因为我们对此感到非常沮丧：

大约 2 周前，我们开发了一个新的 Chrome 扩展并在网上商店发布。

将我们的扩展添加到 Chrome 时，扩展与我们的 API 进行通信，并为每个新用户获取一个唯一的 User_ID。

在我们的数据库中，我们有一个带有 User_ID 和 IP 的用户表。

奇怪的部分：我们每天在该表中看到大约 10-15 个新用户——所有用户都有不同的 IP，但根据 chrome 网上商店没有任何新用户（这些用户在安装后也没有活跃）。

我们的猜测是机器人可能正在“安装”我们的扩展程序——但是每天 10 到 15 次来自不同的 IP 听起来特别奇怪！

有人可以帮忙吗？

# java - 检测html元素更改的最佳方法？

> ID：14517585
> 
> 赞同：2
> 
> 时间：2013-01-25T07:53:14.010
> 
> 标签：java, php, html, sql

我目前正在使用 Java HtmlUnit 加载网页和这些页面中的各种 Html 元素。每 100 毫秒，我检查一下这些元素是否有变化。

HtmlUnit 似乎只是寻找这些元素的变化有点过头了，有没有更好的方法来做到这一点？

我还需要将这些结果写入 sql 数据库，那么我应该使用 JDBC，还是将它们发送到 php 脚本将结果写入数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:59:28.397

我不知道这个搜索的上下文是什么。100 毫秒非常频繁，可能对您的服务器来说有点过分了。不过，您可以使用 CURL 和正则表达式的组合轻松完成此操作。两者都可以在任何语言中使用（包括 linux 命令行），因此由您决定放置它的最佳位置。

# java - MongoDB 池超时

> ID：14517590
> 
> 赞同：2
> 
> 时间：2013-01-25T07:53:43.220
> 
> 标签：java, multithreading, mongodb, connection, pool

我需要一些帮助来分析我在过去几周遇到的问题。

时不时地我的应用程序挂起。基本上它基于 postgres，但对于一些非常快速的交互，我们将关键数据传输到保持同步的 mongodb。这行得通 - 它非常快，而且我们没有问题保持它同步。

我们使用 java 1.6 和 spring 3.2。我在大约 15 个业务逻辑类中实例化了一个 Mongo 类和 @Autowire。

现在我的问题是：大约 2 天后，我得到了异常：

```
com.mongodb.DBPortPool$ConnectionWaitTimeOut: Connection wait timeout after 120000 ms
    at com.mongodb.DBPortPool.get(DBPortPool.java:186)
    at com.mongodb.DBTCPConnector$MyPort.get(DBTCPConnector.java:327)
    at com.mongodb.DBTCPConnector.call(DBTCPConnector.java:212)
    at com.mongodb.DBTCPConnector.call(DBTCPConnector.java:189)
    at com.mongodb.DBApiLayer$Result._advance(DBApiLayer.java:452)
    at com.mongodb.DBApiLayer$Result.hasNext(DBApiLayer.java:418)
    at com.mongodb.DBCursor._hasNext(DBCursor.java:503)
    at com.mongodb.DBCursor.hasNext(DBCursor.java:523) 
```

我想，池的连接用完了。

现在我的问题：

我是否总是需要调用 db.requestDone()？

根据此页面：

[http://www.mongodb.org/display/DOCS/Java+Driver+Concurrency](http://www.mongodb.org/display/DOCS/Java+Driver+Concurrency) - 第一段，我读到：

> Mongo 对象维护一个到数据库的内部连接池（默认池大小为 10）。对于对数据库的每个请求（查找、插入等），java 线程将从池中获取连接，执行操作并释放连接。

对我来说，这听起来就像每当线程关闭时连接就会被传回，这应该在请求完成后发生。我们的应用程序中没有任何长期存在的线程访问 mongodb。

感谢您的任何提示！

简

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-30T18:37:16.337

我们在阅读后未能关闭游标时遇到了这个问题。`cursor.close()` 在我们所有的游标操作之后添加一个，问题就消失了

# c# - 如何在 C# 中循环一个 sql 查询

> ID：14517604
> 
> 赞同：-4
> 
> 时间：2013-01-25T07:54:36.093
> 
> 标签：c#, loops, execute

我想执行 Query 10 次以获取随机值，但我的代码永远不会停止，
它一直在循环并且没有响应。

这是我的代码

```
int j = 0;
do {
    DataSet AVATARLINE = new DataSet();
    SqlDataAdapter AVATARLINE_1 = new SqlDataAdapter("DECLARE
            @Random INT,@Upper INT,
            @Lower INT SET @Lower = (select MIN(ID)from MastryID)SET
            @Upper = (select MAX(ID)from MastryID)+1 SELECT
            @Random = ROUND(((@Upper - @Lower -1) * RAND() + @Lower), 0)SELECT @Random", connection);
    AVATARLINE_1.Fill(AVATARLINE);
    foreach (DataRow row in AVATARLINE.Tables[0].Rows)
    {
        for (int i = 0; i < AVATARLINE.Tables[0].Columns.Count; i++)
        richTextBox1.Text += row[i].ToString() + Environment.NewLine;
    }
}
while (j < 10); // 0-9 
```

任何想法如何使它只工作 10 次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T08:04:15.963

给你:)......你似乎没有`j`在你的循环中增加

```
int j = 0;
    do {
            DataSet AVATARLINE = new DataSet();
            SqlDataAdapter AVATARLINE_1 = new SqlDataAdapter("DECLARE @Random INT,@Upper INT,@Lower INT SET @Lower = (select MIN(ID)from MastryID)SET @Upper = (select MAX(ID)from MastryID)+1 SELECT @Random = ROUND(((@Upper - @Lower -1) * RAND() + @Lower), 0)SELECT @Random", connection);
            AVATARLINE_1.Fill(AVATARLINE);
            foreach (DataRow row in AVATARLINE.Tables[0].Rows)
            {
                for (int i = 0; i < AVATARLINE.Tables[0].Columns.Count; i++)
                    richTextBox1.Text += row[i].ToString() + Environment.NewLine;
            } 
        j++; 
        }
    while (j < 10); // 0-9 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:04:14.573

添加`++`：

```
int j = 0;
do {
        DataSet AVATARLINE = new DataSet();
        SqlDataAdapter AVATARLINE_1 = new SqlDataAdapter("DECLARE @Random INT,@Upper INT,@Lower INT SET @Lower = (select MIN(ID)from MastryID)SET @Upper = (select MAX(ID)from MastryID)+1 SELECT @Random = ROUND(((@Upper - @Lower -1) * RAND() + @Lower), 0)SELECT @Random", connection);
        AVATARLINE_1.Fill(AVATARLINE);
        foreach (DataRow row in AVATARLINE.Tables[0].Rows)
        {
            for (int i = 0; i < AVATARLINE.Tables[0].Columns.Count; i++)
                richTextBox1.Text += row[i].ToString() + Environment.NewLine;
        }  
    }
while (++j < 10); // 0-9 
```

任何其他递增方法`j`都可以。更传统的方法是 for 循环：

```
for (int j = 0; j < 10; j++)
{
    DataSet AVATARLINE = new DataSet();
    SqlDataAdapter AVATARLINE_1 = new SqlDataAdapter("DECLARE @Random INT,@Upper INT,@Lower INT SET @Lower = (select MIN(ID)from MastryID)SET @Upper = (select MAX(ID)from MastryID)+1 SELECT @Random = ROUND(((@Upper - @Lower -1) * RAND() + @Lower), 0)SELECT @Random", connection);
    AVATARLINE_1.Fill(AVATARLINE);
    foreach (DataRow row in AVATARLINE.Tables[0].Rows)
    {
        for (int i = 0; i < AVATARLINE.Tables[0].Columns.Count; i++)
            richTextBox1.Text += row[i].ToString() + Environment.NewLine;
    }  
} 
```

最后，您可能想了解该`Random`课程：http: [//msdn.microsoft.com/en-us/library/system.random.aspx](http://msdn.microsoft.com/en-us/library/system.random.aspx)

# vba - 如何使用 vba 宏从 Outlook 获取 From 字段

> ID：14517614
> 
> 赞同：0
> 
> 时间：2013-01-25T07:55:18.370
> 
> 标签：vba, outlook-2010

我正在编写宏，它将在选择 From 字段或例如单击回复后设置签名。我的问题是我不知道如何获取 From 字段值。我知道如何设置这个字段。

```
Function GetBoiler(ByVal sFile As String) As String
    Dim fso As Object
    Dim ts As Object
    Set fso = CreateObject("Scripting.FileSystemObject")
    Set ts = fso.GetFile(sFile).OpenAsTextStream(1, -2)
    GetBoiler = ts.readall
    ts.Close
End Function

Function GetSignature(Mailbox As String) As String
   Dim Signature As String
   Dim SigStringPL As String
   Dim SigStringUK As String
    SigStringPL = Environ("appdata") & _
                  "\Microsoft\Signatures\Poland.htm"

    SigStringUK = Environ("appdata") & _
                  "\Microsoft\Signatures\United Kingdom.htm"

    If Mailbox = "poland@poland.pl" Then
        If Dir(SigStringPL) <> "" Then
            GetSignature = GetBoiler(SigStringPL)
        Else
            GetSignature = ""
        End If
    Else
        If Dir(SigStringUK) <> "" Then
            GetSignature = GetBoiler(SigStringUK)
        Else
            GetSignature = ""
        End If
    End If
End Function

Sub Mail_Outlook_With_Signature_Plain()
' Don't forget to copy the function GetBoiler in the module.
' Working in Office 2000-2010
    Dim OutApp As Object
    Dim OutMail As Object
    Dim strbody As String

    Dim Signature As String

    Set OutApp = CreateObject("Outlook.Application")
    Set OutMail = OutApp.CreateItem(0)

    strbody = "content"    

    Signature = GetSignature("erni@erni.pl")
    MsgBox (OutMail.SentOnBehalfOfName)

        On Error Resume Next
    With OutMail
        .To = ""
        .CC = ""
        .BCC = ""
        .subject = "This is the Subject line"
        .HTMLBody = strbody & "<br><br>" & Signature
        'You can add files also like this
        '.Attachments.Add ("C:\test.txt")
        .Display
    End With

    On Error GoTo 0

    Set OutMail = Nothing
    Set OutApp = Nothing
End Sub 
```

问候，厄尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-21T17:40:26.920

From 是 SentOnBehalfOfName。在正常使用中，在项目发送之前它是空的。

不要手动选择从。

```
Sub replySentOnBehalf()

Dim objMsg As mailitem

Set objMsg = ActiveInspector.currentItem.reply
objMsg.SentOnBehalfOfName = "someone@somewhere.com"

' Now that objMsg.SentOnBehalfOfName is available run your code

objMsg.Display

Set objMsg = Nothing

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-20T18:12:44.920

SenderName 是“发件人”字段的字段名称。

# jquery - 在带有 JQuery 的 vb.net 中使用 asp.net gridview 下载多个音频文件

> ID：14517616
> 
> 赞同：0
> 
> 时间：2013-01-25T07:55:30.920
> 
> 标签：jquery, vb.net

我目前正在尝试使用 JQuery 从 asp.net gridview 下载多个音频文件。我目前将文件下载为 zip 文件，但如果我可以在不压缩的情况下下载所有音频文件，即只需将音频文件按原样下载到指定文件夹，我会希望它。我在 VB.net 2010 中编程。

它现在编程的方式是使用 asp.net gridview 显示文件，并带有复选框以选择要下载的文件，但它会下载到 zip 文件夹。我想要相同的方法，但只是摆脱 zipfolder。

如果有任何人可以帮助我，那对我来说意义重大。

# jaxb - 使用 xsd:choice 生成 Jaxb + xjc 代码

> ID：14517628
> 
> 赞同：1
> 
> 时间：2013-01-25T07:56:55.230
> 
> 标签：jaxb, code-generation, xjc

我们收到了一个 XSD 文档，该文档将两个应用程序之间的数据传输格式指定为 XML 文档。映射并不像我希望的那样，我想使用自定义`.xjb`映射文件对其进行自定义。

xsd如下

```
<xsd:complexType name="selection">
    <xsd:choice minOccurs="1" maxOccurs="unbounded">
        <xsd:element name="area" type="area"/>
        <xsd:element name="range" type="range"/>
        <xsd:element name="exact" type="exact"/>
    </xsd:choice>
</xsd:complexType>
<xsd:simpleType name="area">
    <xsd:restriction base="xsd:string">
        <xsd:pattern value="[0-9]{2}"/>
    </xsd:restriction>
</xsd:simpleType>
<xsd:simpleType name="range">
    <xsd:restriction base="xsd:string">
        <xsd:pattern value="[0-9]{2}-[0-9]{2}"/>
    </xsd:restriction>
</xsd:simpleType>
<xsd:simpleType name="exact">
    <xsd:restriction base="xsd:string">
        <xsd:pattern value="[0-9]{5}"/>
    </xsd:restriction>
</xsd:simpleType> 
```

默认情况下，这会生成以下`Selection`类

```
public class Selection {

    @XmlElementRefs({
        @XmlElementRef(name = "exact", type = JAXBElement.class),
        @XmlElementRef(name = "range", type = JAXBElement.class),
        @XmlElementRef(name = "area", type = JAXBElement.class)
    })
    protected List<JAXBElement<String>> areaOrRangeOrExact;
    ...
} 
```

最好，我希望它产生类似的东西

```
public class Selection {
    protected List<Exact> exacts;
    protected List<Area> areas;
    protected List<Range> ranges;
    ...
} 
```

或者，如果他们扩展了一个超类，比如说`SelectionType`

```
public class Selection {

    @XmlElementRefs({
        @XmlElementRef(name = "exact", type = Exact.class),
        @XmlElementRef(name = "range", type = Range.class),
        @XmlElementRef(name = "area", type = Area.class)
    })
    protected List<SelectionType> selection;
    ...
} 
```

我可以在不修改原始 XSD 的情况下实现这一点吗？

# xml - 产品布局更新取决于属性集

> ID：14517636
> 
> 赞同：1
> 
> 时间：2013-01-25T07:57:48.863
> 
> 标签：xml, magento, layout

我希望我的属于属性集 X 的产品使用不同的模板，而不是在所有产品中一一设置布局更新。

我在布局文件中创建了这个新句柄：

```
<product_view_bis>
        <reference name="product.info">
        <action method="setTemplate"><template>catalog/product/view7.phtml</template></action>
        <block type="core/template" name="replacements" template="catalog/product/replacements.phtml">
            <block type="replacements/replacement" name="replacement_options" template="catalog/product/replacement_options.phtml">
                <action method="addOptionRenderer"><type>select</type><block>replacements/options</block><template>catalog/product/view/options/type/replacement.phtml</template></action>
            </block>
        </block>
    </reference>
</product_view_bis> 
```

然后我扩展了相关助手（Mage_Catalog_Helper_Product_View）以适应它：

```
if ($product->getAttributeSetId()==X) $update->addHandle('product_view_bis'); 
```

这应该用我自己的文件替换 catalog/product/view.phtml 调用一些自定义块

它根本不起作用。但如果我把这个：

```
<reference name="product.info">
    <action method="setTemplate"><template>catalog/product/view7.phtml</template></action>
    <block type="core/template" name="replacements" template="catalog/product/replacements.phtml">
        <block type="replacements/replacement" name="replacement_options" template="catalog/product/replacement_options.phtml">
            <action method="addOptionRenderer"><type>select</type><block>replacements/options</block><template>catalog/product/view/options/type/replacement.phtml</template></action>
        </block>
    </block>
</reference> 
```

进入后端的产品自定义布局更新它可以工作。

谁能帮我 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:46:43.670

我设法让它通过观察者工作

我在 controller_action_layout_generate_blocks_after 上设置了一个事件观察器

```
public function generateBlocksAfter($event)
{                      
    $controller   = $event->getAction();
//limit to the product view page 
if($controller->getFullActionName() != 'catalog_product_view')
{
    return;
}
$layout       = $controller->getLayout();
$root = $layout->getBlock('root');
$product_info = $layout->getBlock('product.info');
if(!$product_info)
{
    Mage::log('Could not find product.info block');
    return;
}
$id = Mage::registry('current_product')->getId();
$prod = Mage::getModel('catalog/product')->load($id);
if ($prod->getAttributeSetId()==X) {
$product_info->setTemplate('catalog/product/view7.phtml');
$root->setTemplate('page/view7.phtml');
$replacement =   $layout->createBlock('core/template')->setBlockAlias('replacements')->setTemplate('catalog/product/replacements.phtml')->setLayout($layout)->setNameInLayout('replacements');

$options =     $layout->createBlock('replacements/replacement')->setBlockAlias('replacement_options')->setTemplate('catalog/product/replacement_options.phtml')->setLayout($layout)->setNameInLayout('replacement_options');
$options->addOptionRenderer('select','replacements/options','catalog/product/view/options/type/replacement.phtml');
$product_info->setChild('replacements',$replacement);
$replacement->setChild('replacement_options',$options);
}

} 
```

# jquery - 在html5视频末尾执行功能

> ID：14517639
> 
> 赞同：34
> 
> 时间：2013-01-25T07:58:15.920
> 
> 标签：jquery, html, html5-video

我有一个 html 视频，我想在视频结束时运行一个函数。我尝试了以下方法，但我什么也没得到：

```
$(document).ready(function(){

    $('video').live('ended',function(){

        alert('video ended');

    });

}); 
```

任何想法为什么这不会在视频结束时触发？还是我没有提供足够的信息来回答这里的任何问题？

注意：我使用 live() 函数而不是 on() 因为这个项目需要 jQuery 1.7。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2014-07-10T10:32:57.887

为了您的粘贴和复制乐趣，jQuery 解决方案：

```
<video width="320" height="240">
  <source src="movie.mp4" type="video/mp4">
</video>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script>/*<![CDATA[*/
  $(document).ready(function(){
    $('video').on('ended',function(){
      console.log('Video has ended!');
    });
  });
/*]]>*/</script>
```

将`'video'`-part 替换为视频的正确选择器。

**编辑**：这是没有 jQuery 的解决方案：

```
<video width="320" height="240">
  <source src="movie.mp4" type="video/mp4">
</video>
<script>/*<![CDATA[*/
  document.querySelector('video').addEventListener('ended',function(){
    console.log('Video has ended!');
  }, false);
/*]]>*/</script>
```

将`'video'`-part 替换为视频的正确选择器。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-05-25T23:01:53.877

```
<html>
<head>
    <title></title>

    <script>
function videoEnded() {
    alert('video ended');
}

    </script>
</head>
<body>

<video src="video/endscene.mp4" id="video" controls onended="videoEnded()">
    video not supported
</video>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-25T08:02:39.947

使用**结束**事件

```
var video = document.getElementsByTagName('video')[0];

video.onended = function(e) {
  alert('video ended');
} 
```

阅读更多[**关于 HTML5 视频和音频你需要知道的一切**](http://dev.opera.com/articles/view/everything-you-need-to-know-about-html5-video-and-audio/)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-10-31T08:07:21.037

我管理它工作的唯一方法是以下代码：

```
$('video')[0].on('ended',function(){
    console.log('Video has ended!');
}); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-03-10T14:02:34.710

您可以尝试以下方法：

```
$(document).on('ended', 'video', function (e) {
    alert('video ended');
}); 
```

您说视频是在加载 DOM*后动态插入的。*在此脚本中，您在 DOM 上搜索`video`元素并将其与`ended`函数绑定。

这是[.on()](http://api.jquery.com/on/)的文档。
这是[动态项目](https://stackoverflow.com/questions/203198/event-binding-on-dynamically-created-elements)的 SO 问题。

我希望这有帮助！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-09-22T07:24:22.243

你可以在现场使用。因为 jquery 新版本支持 on 方法，而新版本不推荐使用 live 方法。

您可以将代码替换为此，您的问题将得到解决。

```
$(document).ready(function(){

$('video').on('ended',function(){

    alert('video ended');

}); 
```

});

# android - 在 Android 中以编程方式更改字体大小

> ID：14517643
> 
> 赞同：2
> 
> 时间：2013-01-25T07:58:35.057
> 
> 标签：android, string, font-size

嗨，我是android的新手。我只是想知道是否有任何方法可以更改 android 中字符串的字体大小？

```
String name = db.getName(Id)
String str = "Name : " + name; 
```

我希望“名称”的字体大小大于“名称”中的值。其中“名称”是我从数据库中获得的值。

请建议任何方法来做到这一点！提前致谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:05:46.233

采用

```
TextView textView = (TextView) findViewById(R.id.textView);
Spannable span = new SpannableString(str);
span.setSpan(new RelativeSizeSpan(0.8f), start, end, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
textView.setText(span); 
```

在 TextView 上获取不同的 TextSizes。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T08:06:19.813

当您将文本放入 textView 时，您可以增加字体。例如

```
textView.setText(yourString);
textView.setTextSize(20); 
```

或者您可以在 Layout.xml 文件本身中给出字体大小

```
<TextView
      android:id = "@+id/textView"
       ........
       android:textSize = "20dp"/> 
```

如果您需要进一步澄清，请随时提出任何进一步的疑问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T08:00:34.157

您不会更改 a 的字体大小，`String`而是在显示时更改文本的字体大小`String`（例如，`TextView`如果您使用的是 a）。A只是一个数据对象，包含您要显示的文本，与**您显示它的方式**`String`无关。

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T08:01:24.607

您需要使用 Spannable 并将其提供给您的 TextView 以便仅修改部分文本。要更改大小，请使用：

```
 span.setSpan(new RelativeSizeSpan(0.8f), start, end, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T08:01:02.953

您无法更改 a 的字体大小`String`，因为`String`它只是一组字符，但您可以使用[setTextSize()](http://developer.android.com/reference/android/widget/TextView.html#setTextSize%28int,%20float%29)方法更改`TextView`包含此字符的 a 的字体大小。希望这可以帮助。`String`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T08:01:33.183

你不能。因为你不能用任何其他语言。您需要做的是更改将显示文本的元素的字体大小，而不是字符串本身。

尝试在文件夹中创建布局`res/layout/`，添加 TextView 元素，然后搜索`textSize`属性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-25T08:22:48.103

在 ListView 中显示差异的最佳想法是显示标题。[此处](http://w2davids.wordpress.com/android-sectioned-headers-in-listviews/)解释了一个简单的示例它说明了以下代码：

简单活动 Xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ListView
        android:id="@+id/add_journalentry_menuitem"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
    <ListView
        android:id="@+id/list_journal"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
</LinearLayout> 
```

列表标题

```
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/list_header_title"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingTop="2dip"
    android:paddingBottom="2dip"
    android:paddingLeft="5dip"
    style="?android:attr/listSeparatorTextViewStyle" /> 
```

项目清单

```
<?xml version="1.0" encoding="utf-8"?>
<!-- list_item.xml -->
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/list_item_title"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingTop="10dip"
    android:paddingBottom="10dip"
    android:paddingLeft="15dip"
    android:textAppearance="?android:attr/textAppearanceLarge"
    /> 
```

主要活动

```
import java.util.HashMap;
import java.util.Map;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.Toast;
import android.widget.AdapterView.OnItemClickListener;

public class ListSample extends Activity
    {

        public final static String ITEM_TITLE = "title";
        public final static String ITEM_CAPTION = "caption";

        // SectionHeaders
        private final static String[] days = new String[]{"Mon", "Tue", "Wed", "Thur", "Fri"};

        // Section Contents
        private final static String[] notes = new String[]{"Ate Breakfast", "Ran a Marathan ...yah really", "Slept all day"};

        // MENU - ListView
        private ListView addJournalEntryItem;

        // Adapter for ListView Contents
        private SeparatedListAdapter adapter;

        // ListView Contents
        private ListView journalListView;

        public Map<String, ?> createItem(String title, String caption)
            {
                Map<String, String> item = new HashMap<String, String>();
                item.put(ITEM_TITLE, title);
                item.put(ITEM_CAPTION, caption);
                return item;
            }

        @Override
        public void onCreate(Bundle icicle)
            {
                super.onCreate(icicle);

                // Sets the View Layer
                setContentView(R.layout.main);

                // Interactive Tools
                final ArrayAdapter<String> journalEntryAdapter = new ArrayAdapter<String>(this, R.layout.add_journalentry_menuitem, new String[]{"Add Journal Entry"});

                // AddJournalEntryItem
                addJournalEntryItem = (ListView) this.findViewById(R.id.add_journalentry_menuitem);
                addJournalEntryItem.setAdapter(journalEntryAdapter);
                addJournalEntryItem.setOnItemClickListener(new OnItemClickListener()
                    {
                        @Override
                        public void onItemClick(AdapterView<?> parent, View view, int position, long duration)
                            {
                                String item = journalEntryAdapter.getItem(position);
                                Toast.makeText(getApplicationContext(), item, Toast.LENGTH_SHORT).show();
                            }
                    });

                // Create the ListView Adapter
                adapter = new SeparatedListAdapter(this);
                ArrayAdapter<String> listadapter = new ArrayAdapter<String>(this, R.layout.list_item, notes);

                // Add Sections
                for (int i = 0; i < days.length; i++)
                    {
                        adapter.addSection(days[i], listadapter);
                    }

                // Get a reference to the ListView holder
                journalListView = (ListView) this.findViewById(R.id.list_journal);

                // Set the adapter on the ListView holder
                journalListView.setAdapter(adapter);

                // Listen for Click events
                journalListView.setOnItemClickListener(new OnItemClickListener()
                    {
                        @Override
                        public void onItemClick(AdapterView<?> parent, View view, int position, long duration)
                            {
                                String item = (String) adapter.getItem(position);
                                Toast.makeText(getApplicationContext(), item, Toast.LENGTH_SHORT).show();
                            }
                    });
            }

    } 
```

那里还有另外两个 XML，但是通过这些给定的结构，您可以以更好的方式实现您想要的，而不仅仅是大小差异。

PS-完整的应用程序可[在此处获得](http://www.filefactory.com/file/b3g5g1b/n/TestSectionedHeaderList.zip)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-02-09T19:17:40.157

Spannable font：为了给文本的某些部分设置不同的字体大小，可以使用RelativeSizeSpan，如下例所示：

```
Spannable spannable = new SpannableString(firstWord+lastWord); 
spannable.setSpan(new ForegroundColorSpan(firstWordColor), 0, firstWord.length(),Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
spannable.setSpan(new ForegroundColorSpan(lastWordColor), firstWord.length(), firstWord.length()+lastWord.length(), Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); 
textview.setText( spannable ); 
```

[信用：从这个网页](https://www.shibajidebnath.com/working-with-android-textview/)复制和粘贴。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-01-25T08:01:12.810

你不能这样做。您可以添加`string`到视图让我们说`EditText`或`TextView`并在 xml 中设置视图的文本大小，如下所示：

```
android:textSize="18dp" 
```

或以编程方式，您可以这样做：

```
<YourTextView>.setTextSize(18); 
```

由于之前缺乏想法，我在[这里](https://stackoverflow.com/questions/8308564/how-to-change-the-string-style-in-java)问过类似的问题。我希望你能通过这个链接得到一个想法。**

# php - 404 错误页面显示 HTTP 状态 200 而不是 404

> ID：14517647
> 
> 赞同：2
> 
> 时间：2013-01-25T07:58:55.727
> 
> 标签：php, redirect, seo, http-headers, http-status-code-404

我有以下代码用于执行重定向。如果 my`$includeFile`不存在，它将重定向到 404 页面。这是我的一个片段`index.php`

```
if ( !file_exists($includeFile) )
     Header( "HTTP/1.1 404 Page Not Found" );
     Header( "Location: http://legascy.com/404_error/"); 
```

但`http://legascy.com/404_error/`显示 HTTP 状态 200 OK 而不是 404。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:02:03.693

您需要将 404 的标头功能放在“404_error”页面上，而不是重定向的页面上。这是因为浏览器被发送到具有默认 200 状态代码的 404_error。

```
if ( !file_exists($includeFile) ) {
     header("Location: http://legascy.com/404_error/");
} 
```

在 404_error/index.php 上：

```
header("HTTP/1.1 404 Page Not Found"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:02:15.697

您之前发送 404 错误代码的标头被 Location 标头丢弃，浏览器会将用户带到新页面。你重定向到的页面是可用的，所以它总是显示 200。

# php - php函数不返回foreach中MySQL查询的所有结果

> ID：14517652
> 
> 赞同：0
> 
> 时间：2013-01-25T07:59:22.713
> 
> 标签：php, mysql, foreach, return-value

嘿伙计们，我有一个从 MySQL 数据库中检索数据的函数的小问题，然后我使用 foreach 循环遍历结果，检查一个值以查看它是否为空，如果是，则将其替换为另一个值。

这个函数的问题是，在返回数据后，我只能查看从数据库中检索到的一条记录。可能是一些简单的事情，但它超出了我的范围。

我想在将其传递给控制器​​或视图之前执行此操作。也许这对于 foreach 循环是不可能的？我错过了什么？

这是我的代码示例。

```
public function get_basic_user_data(){
    $sql = 'SELECT Account.First_Name, Account.Last_Name, Account.User_Name, Profile_Photos.Thumb_Url 
            FROM Account 
            LEFT JOIN Profile_Photos ON Account.idAccount = Profile_Photos.Account_Id 
            AND Profile_Photos.Active = 1
            WHERE Account.idAccount != ?';
    $account_id = $this->get_account_id();
    $data = $this->db->query($sql, $account_id);

    foreach($data->result() as $row){

            if($row->Thumb_Url == NULL){
                $image = base_url().'assets/images/no_photo_thumb.png';
            }else{
                $image = $row->Thumb_Url; 
            }

    $new_data = new stdClass;
    $new_data->First_Name = $row->First_Name;
    $new_data->Last_Name = $row->Last_Name;
    $new_data->User_Name = $row->User_Name;
    $new_data->Thumb_Url = $image;

    }   

    return $new_data;

} 
```

希望有人可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:02:33.177

目前您只是返回最后一个数据行。像这样更改代码以从该函数返回所有行的数组：

```
$rows = array()
foreach($data->result() as $row){

    if($row->Thumb_Url == NULL){
        $image = base_url().'assets/images/no_photo_thumb.png';
    }else{
        $image = $row->Thumb_Url; 
    }

    $new_data = new stdClass;
    $new_data->First_Name = $row->First_Name;
    $new_data->Last_Name = $row->Last_Name;
    $new_data->User_Name = $row->User_Name;
    $new_data->Thumb_Url = $image;

    $rows[] = $new_data;
}   

return $rows; 
```

这样，从数据库返回的每一行都将被添加到一个名为`$rows`. 最后你必须返回你的新数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:03:31.997

您正在覆盖 $new_data 每次迭代。试试这个

```
$new_data = new stdClass
...
$all_data[] = $new_data; 
```

您可以在 SQL 查询中使用 IFNULL 语句，而不是检查代码中的空值，这确实将逻辑分开了一点，但在这种情况下它可能是值得的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T08:05:42.217

该函数仅返回结果中的最后一行，因为 new_data 变量在循环的每一步都被覆盖。在函数开头声明 new_data 数组并将行添加为数组元素

```
...
$new_data[] = new stdClass;
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T08:11:55.303

foreach 的每次迭代都会覆盖 $new_data ，因此最终当函数返回时，只会返回最后获取的行。要返回多行，您可以将所有行存储在一个数组中，然后最后返回该数组。它看起来像这样：

```
public function get_basic_user_data(){
    $sql = 'SELECT Account.First_Name, Account.Last_Name, Account.User_Name, Profile_Photos.Thumb_Url 
            FROM Account 
            LEFT JOIN Profile_Photos ON Account.idAccount = Profile_Photos.Account_Id 
            AND Profile_Photos.Active = 1
            WHERE Account.idAccount != ?';
    $account_id = $this->get_account_id();
    $data = $this->db->query($sql, $account_id);

    $data = array();
    foreach($data->result() as $row){

        if($row->Thumb_Url == NULL){
            $image = base_url().'assets/images/no_photo_thumb.png';
        }else{
            $image = $row->Thumb_Url; 
        }

        $new_data = new stdClass;
        $new_data->First_Name = $row->First_Name;
        $new_data->Last_Name = $row->Last_Name;
        $new_data->User_Name = $row->User_Name;
        $new_data->Thumb_Url = $image;

        $data[] = $new_data;
    }   

return $data;

} 
```

为了能够使用此函数，您必须更改使用它循环对象数组的代码。

# sql - Excel 记录插入 Sql 数据库

> ID：14517654
> 
> 赞同：0
> 
> 时间：2013-01-25T07:59:30.093
> 
> 标签：sql, excel

我的问题是：

Excel文件DATA是这样的：

```
id 类 单元测试 1 单元测试 2
                      英语数学科学英语数学科学
1 va 20 15 22 16 18 ab
2 vb 14 ab 20 19 17 20

```

数据库中的表是这样的：

```
id 类主题标记 test_category
1 VA ENG 20 UT-1
1 VA ENG 16 UT-2
1 VA 数学 15 UT-1
1 VA 数学 18 UT-2
1 va sci 22 UT-1
1 va sci null UT-2
2 vb 英语 14 UT-1
2 vb 英语 19 UT-2
2 vb 数学空 UT-1
2 VB 数学 17 UT-2
2 vb sci 20 UT-1
2 vb sci 20 UT-2

```

在数据库中的列必须与显示的相同。但我需要的是插入整个记录，如 excel 文件中所示。Excel 文件有 ab 单元格。这里数据库插入空值。

在 ASP 项目的 ON 按钮单击事件中，excel 文件中存在的所有记录都应插入数据库中。

我想在 aspx.cs 中执行此操作（实现此目的的 C# 代码）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:27:49.483

您可以使用以下方法将另一个 Excel 工作表中的 Excel 数据转换为数据库格式：

（假设：数据在 Sheet1 的 A 到 H 列中，第 1 行是 ID、类、单元测试、第 2 行 eng、math... 和第 3 行+数据：

在新工作表中，使用以下公式（从第 2 行开始）

*   Col A ("Temp col"):`=IF(ISTEXT(A1),1,IF(A1=6,1,A1+1))`
*   B栏（“id”）：`=IF(ISTEXT(B1),1,IF(A1=1,B1+1,B1))`
*   Col C（“班级”）`=INDEX(Sheet1!$B:B$,B2+1)`
*   Col D（“主题”）`=INDEX(Sheet1!$C$2:$H$2,1,A2)`
*   Col F（“标记”）`=INDEX(Sheet1!$C:H$,B2+1,A2)`
*   Col G（“测试类别”）`=IF(A2<4,"UT-1","UT-2")`

现在您只需复制原始数据行数的六倍的第 2 行。- 然后导入此表。

# c++ - 函数指针作为模板类函数的输入参数

> ID：14517656
> 
> 赞同：1
> 
> 时间：2013-01-25T07:59:36.507
> 
> 标签：c++, templates

我得到一段代码如下：

```
 template <typename T>
 class Ordered_list{
 public:
     Ordered_list(bool (*less_than_function)(const T&, const T&)): less_than(less_than_function){}

 private:
     bool (*less_than) (const T&, const T&);
 };

 bool less_than_f(const int& i1, const int& i2){
     return i1 < i2;
 }   

 class Collection{
 public:
     Ordered_list<int> list(less_than_f);
 }; 
```

代码没有编译，我得到了错误：

```
test.cpp:16: error: 'less_than_f' is not a type 
```

我试图为 Ordered_list 类创建一个对象，我需要传入一个函数指针。我试图谷歌搜索的原因，但没有得到太多。谁能告诉我我应该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T08:09:43.500

```
class Collection{
  public:
    Ordered_list<int> list(less_than_f);
 }; 
```

在这里，您要声明一个带有 return 的函数`Ordered_list<int>`并采用类型的未命名参数`less_than_f`（Opss！无类型），而您希望拥有一个成员“ `list`”。您需要在构造函数的初始化列表中对其进行初始化（因为 `Ordered_list`没有默认构造函数）[嗯..不确定要初始化的 C++11 新选项，但现在在 VC2012 中没有]。

```
 class Collection{
  public:
    Ordered_list<int> list;
    Collection (): list(less_than_f){} 
    explicit Collection (   bool (*less_than_function)(const int& i1, const int& i2)   )
       : list(less_than_function)  {}
   }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T08:04:44.330

您的成员变量未正确声明。它不能像你在声明中那样被初始化。

试试这个：

```
 class Collection
 {
 public:
     Collection() : list(less_than_f) {}

     Ordered_list<int> list;
 }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T08:35:46.947

类成员只能在声明中使用大括号初始化器进行初始化：

```
Ordered_list<int> list {less_than_f}; 
```

或使用`=`：

```
Ordered_list<int> list = less_than_f; 
```

（尽管后者仅起作用，因为您的构造函数不是`explicit`）。

在 2011 年之前（在撰写本文时，在大多数可用的编译器中），非静态类成员根本无法在其声明中初始化；需要一个构造函数：

```
Collection() : list(less_than_f) {} 
```

# javascript - 如何在javascript中获取元素的完整开始标签（不仅是tagName）？

> ID：14517659
> 
> 赞同：0
> 
> 时间：2013-01-25T07:59:38.907
> 
> 标签：javascript

有没有简单的方法可以在 javascript 中将元素的起始标记作为字符串？假设我有一个 DOM 节点，它是一个变量中的 html 元素，我想写一些类似的东西：

```
var tagName = element.tagName; //Works
var startingTag = element.startingTag; // Is there any way?
var startingTag = getStartingTag(element);  // Or do I have to write my own function? 
```

谢谢回答

例如，这是我想进入字符串的起始标签：

```
 <Table class="anyClass" width="100" ... > 
```

其中 tagName 只给出：“Table”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:08:16.430

好吧，你可以这样做：

```
var elStr    = element.outerHTML
   ,startTag = elStr.substr(0,elStr.indexOf('>')+1); 
```

或者`element.attributes`如果您需要有关属性的信息，请使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T08:18:18.403

您可以遍历属性并将它们附加到某个字符串。

```
function getStartingTag(elem)
    var str = '',
        attr = elem.attributes,
        value;

    // Beginning of tag. toLowerCase() for a cleaner string.
    str += '<' + elem.nodeName.toLowerCase() + ' ';

    for (var i = 0, l = attr.length; i < l; i++) {

        // Safety check.
        value = attr[i].nodeValue.replace('"', '\\"');

        // Append the name + value of the attribute.
        str += attr[i].nodeName + '="' + attr[i].nodeValue + '" ';
    }
    str += '>';

    return str;
} 
```

# c - 在 C 中实现二叉树

> ID：14517662
> 
> 赞同：-1
> 
> 时间：2013-01-25T07:59:51.653
> 
> 标签：c, binary-tree

我正在尝试在 C 中实现二叉树。首先插入值，然后将它们遍历到 Preorder。但是当我调用函数 preorder() 时，它给了我无限循环，只插入了最后一个值。我正在使用以下代码：

```
struct node* insert(struct node *root,int num);

void preorder(struct node *root);

struct node *root=NULL;

int count=1;

struct node {

    struct node *lchild;
    struct node *rchild; 
int data;
};

int main(){

    root=insert(root,1);
//root=insert(root,2);
preorder(root); 
return;
}

struct node* insert(struct node *root,int num){//insert a node into tree

   //struct node *q;
if(root==NULL)
{
    root=(struct node*)malloc(sizeof(struct node)); 
    root->data=num;
    root->lchild=NULL;
    root->rchild=NULL;
    //root=q;
    count++;
}
else{
    if(count % 2==0){
        root->lchild=insert(root->lchild,num);
    }
    else{
        root->rchild=insert(root->rchild,num);
    }
}
return(root);
}

void preorder(struct node *root){

    while(root!=NULL){
    printf("%d\t",root->data);
    preorder(root->lchild);
    preorder(root->rchild);     
}
} 
```

这里我最初只插入 1 个值，但出现了错误。所以在 insert() 中不应该有任何错误，应该在 preorder() 或 main() 中进行一些更正。它可以是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T08:04:28.393

我不确定`preorder()`应该怎么做，但是这条线会导致无限循环：

```
 while(root!=NULL){ 
```

我猜你的意思是`if`不写`while`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T08:05:31.853

您需要在预购函数中使用 if 语句而不是 while 语句。

```
while(root!=NULL){ //This is causing the infinite loop 
```

在循环体中，您不会在任何时候更改根指针，因此，如果条件为真，即根元素的条件为真，它将永远不会退出循环。

它应该是：

```
if(root!=NULL){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T10:26:29.720

您必须编写`if`而不是`while`使递归循环具有基本条件并在某处结束。

在你的代码中而不是`if(root!=NULL)`写写`while(root!=NULL)`

# sql - 我有开始日期和时间和结束日期和时间...我需要开始和结束之间的区别

> ID：14517663
> 
> 赞同：0
> 
> 时间：2013-01-25T07:59:57.217
> 
> 标签：sql, date

我有开始日期和时间和结束日期和时间。我需要这两者之间的差异，当结束日期和时间为空时，我需要开始日期和时间与当前日期和时间之间的差异......提前致谢。

```
select pwr.ondate ONDATE,pwr.offdate OFFDATE,mp.process FROMPROCESS,
    (select mp.process   from mas_process mp where pwr.protoid=mp.p_id) TOPROCESS,
    USEDHOURS = case when pwr.offdate is null then 
        datediff(HH,pwr.ondate,getdate()) else
        datediff(d,pwr.ondate,pwr.offdate)
    end 
from powerreport pwr
inner join mas_process mp on pwr.proid=mp.p_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T06:20:02.723

如果您想以小时：分钟的格式表示两个日期时间之间的差异，您可以通过首先使用 datediff 计算两个日期时间之间的总分钟数来获得分钟部分：`datediff(MI, startDate, endDate)`然后根据结果计算模 60日期差异。

SQL Server 中的[模](http://msdn.microsoft.com/en-us/library/ms190279%28v=sql.105%29.aspx)运算符是 % 所以这个表达式是`datediff(MI, startDate, endDate) % 60`

我建议创建一个局部变量并用`GETDATE()`调用结果填充它，以便在特定记录的结束日期为空的情况下使用完全相同的日期时间计算结果中的所有行。此外，如果您使用[`IsNull()`](http://msdn.microsoft.com/en-us/library/ms184325%28v=sql.105%29.aspx)结束日期，则可以简化查询，如果结束日期为空，则返回当前时间。

如果将所有这三个放在一起，您将有一个如下所示的查询来计算 powerreport 表中所有记录的差异：

```
DECLARE @currentTime AS DATETIME;

SET @currentTime = GETDATE();

SELECT *,
       USEDHOURS = 
       CAST (datediff(HH, pwr.ondate, 
             IsNull(pwr.offdate, @currentTime)) AS VARCHAR) + ':' +
       CAST (datediff(MI, pwr.ondate, 
             IsNull(pwr.offdate, @currentTime)) % 60 AS VARCHAR)
FROM   powerreport AS pwr; 
```

这是一个显示此操作的 SQL Fiddle：[http ://sqlfiddle.com/#!3/e47af/1](http://sqlfiddle.com/#!3/e47af/1)

如果您将其插入原始查询，则结果应如下所示：

```
DECLARE @currentTime AS DATETIME;

SET @currentTime = GETDATE();

SELECT pwr.ondate AS ONDATE,
       pwr.offdate AS OFFDATE,
       mp.process AS FROMPROCESS,
       (SELECT mp.process
        FROM   mas_process AS mp
        WHERE  pwr.protoid = mp.p_id) AS TOPROCESS,
       USEDHOURS = 
       CAST (datediff(HH, pwr.ondate,
             IsNull(pwr.offdate, @currentTime)) AS VARCHAR) + ':' +
       CAST (datediff(MI, pwr.ondate,
             IsNull(pwr.offdate, @currentTime)) % 60 AS VARCHAR)
FROM   powerreport AS pwr
       INNER JOIN
       mas_process AS mp
       ON pwr.proid = mp.p_id; 
```

# php - 为什么 substr() 不返回正确的值？

> ID：14517664
> 
> 赞同：0
> 
> 时间：2013-01-25T07:59:57.863
> 
> 标签：php

我有以下代码：

```
$string = "aaa<test>xxx</test>bbb";
echo substr($string, 9); 
```

结果应该是： **xxx</test>bbb**

与此同时，我只收到： **xxxbbb**

标签怎么了？为什么这个功能会自动裁剪它！如果我用 [ 替换 < 作品...我想在我的变量中获得一个结束标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:01:56.580

如果您查看源代码，您还将有`</test>`标签。它在浏览器中不可见，因为它已经被渲染为空。

要打印这种结果，请使用

```
var_dump( substr($string, 9) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:04:03.093

这是因为浏览器将其`<test></test>`作为 html 标签，因此您无法在浏览器中看到它。

查看源代码会对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T08:05:04.417

如果你在浏览器中查看 php 文件的查看源（在 chrome 中是 crtl+u），你可以看到

```
xxx</test>bbb 
```

你可以看到它，因为它`</test>`被浏览器解释为标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T08:01:54.133

如果您在命令行中执行此操作，则效果很好。您是否正在通过浏览器查看输出？浏览器可能会尝试解析标签然后忽略它。

# jquery - 使用 jQuery 加载存储在 HTML5 数据标签中的图像 URL

> ID：14517666
> 
> 赞同：1
> 
> 时间：2013-01-25T08:00:12.773
> 
> 标签：jquery, html, load

**问题**

当用户单击图像的缩略图时，应加载存储在 HTML5 数据属性中的图像 URL `data-url`，其余功能应在之后继续。但是，我不知道如何使用 jQuery 选择器加载图像。

**代码**

```
$(document).ready(function() {
    $("img").on("click", function() {

        var url = $(this).data("url");

        $('<img data-url="">').load(function() {
            console.log("loaded");
            $("#wrapper").html('<img src="' + url + '">');
        });
    });
}); 
```

**请注意**，首先加载的图像是缩略图，当单击它时，jQuery 应该等到`data-url`属性中的图像加载完毕。加载后，它应该将该图像注入`#wrapper`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:12:42.713

未经测试，但它应该像这样工作：

```
$(document).ready(function() {
    $("img").on("click", function() {
        // grep the data attribute
        var url = $(this).data("url");
        if(url) {
            // if it is an url, create an image
            var img = $('<img />').appendTo('#Wrapper').hide();
            // set the src with the url
            img.attr("src", url);
            img.load(function() {    
                // if it is loaded, show the image
                // and do whatever you want.
                img.show();
            }); 
        }
    });
}); 
```

在否决票之后，我尝试了代码，为我工作，你在这里找到了[小提琴](http://jsfiddle.net/s3Qss/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:48:48.353

我会做这样的事情

```
$('#img_id').click(function(){
    $("#wrapper").html('<img src="' + $(this).attr)('data-url') + '?' + new Date().getTime() + '">');
}); 
```

# drupal - 与 2 个域 drupal 相同的 cookie，这是一个站点

> ID：14517667
> 
> 赞同：2
> 
> 时间：2013-01-25T08:00:21.340
> 
> 标签：drupal

我有一个 Drupal 6.22 网页。我有一个 .de 和一个 .at 顶级域。现在.at 域是.de 的别名。而且我要：

*   我想分别使用 .at 和 .de 域，正是当有人打开我的 .at/indexp.php 时，而不是通过 .de 域。
*   我想监控传入的用户。

所以我想从 1 个服务器托管 2 个站点，并且我想拥有一个相同的登录 cookie，所以任何人登录 .at 并导航到 .de，他都保持登录状态。

我知道，具有相同内容的 2 页正在扼杀 SEO，所以这是一个新的问题。

我试图解决宽度 $cookie_domain 的“相同 Cookie”问题，但我不能。正如我所读到的，它只适用于 2 个不同服务器的 2 个不同站点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T18:59:57.307

如果没有一些编码来验证两个站点之间的用户，您将无法执行此操作。

从技术上讲，浏览器不会将 cookie 发送到其他域。如果`$cookie_domain`是的`example.com`话 `www.example.com`，`extras.example.com`就不会得到cookies了`example.com`。

如果是`.example.com`，则所有`example.com`及其子域都将从浏览器获取 cookie。（注意前面的前导点`example.com`）您不能`example.com`从另一个域发送 cookie。这就是为什么当您登录 google 域时，您会看到您被重定向到 Youtube 并返回到 google。

您可以将两个域都指向同一个域，它可以毫无问题地工作。但是用户必须在两个站点中登录两次。或者，您可以在用户登录后立即将其发送到其他站点。

例如，当用户登录时`example.com`，当登录成功时，立即将用户发送到其他域，其他站点（例如example.net）可以进行相同的身份验证并将用户发送回源站点。我不知道有任何模块可以做到这一点。

# maven-plugin - 无法使用 maven-database-plugin (Googlecode)

> ID：14517678
> 
> 赞同：1
> 
> 时间：2013-01-25T08:01:35.277
> 
> 标签：maven-plugin

[我在这里](https://stackoverflow.com/questions/10297553/specifying-new-maven-repository)发布了几乎相同的问题，并尝试了提到的东西，但得到了同样的错误。

```
...        
    <repository>
        <id>maven-db-plugin-repo</id>
        <name>maven db plugin repository</name>
        <url>http://maven-db-plugin.googlecode.com/svn/maven/repo</url>
        <layout>default</layout>
    </repository>
</repositories>

...
    <pluginRepository>
        <id>maven-db-plugin-repo</id>
        <name>maven db plugin repository</name>
        <url>http://maven-db-plugin.googlecode.com/svn/maven/repo</url>
        <layout>default</layout>
    </pluginRepository>
</pluginRepositories>
<dependencies>
    <dependency>
        <groupId>com.googlecode</groupId>
        <artifactId>maven-db-plugin</artifactId>
        <version>1.3</version>
        <type>jar</type>

                     <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>sql-maven-plugin</artifactId>
                    <version>1.5</version>
                    <dependencies>
                        <dependency>
                            <groupId>postgresql</groupId>
                            <artifactId>postgresql</artifactId>
                            <version>9.1-901.jdbc4</version>
                        </dependency>
                    </dependencies>
                    <configuration>
                        <driver>org.postgresql.Driver</driver>
                        <url>${database.url}</url>
                        <username>${database.username}</username>
                        <password>${database.password}</password>
                    </configuration>
                    <executions>
                        <execution>
                            <id>create-schema</id>
                            <phase>install</phase>
                            <goals>
                                <goal>execute</goal>
                            </goals>
                            <configuration>
                                <autocommit>true</autocommit>
                                <!--<url>jdbc:postgresql://${database.server.host}:${database.server.port}:${database.name}</url>-->
                                <srcFiles>
                                    <srcFile>src/main/sql/schema.sql</srcFile>
                                </srcFiles>
                            </configuration>
                        </execution> 
```

我的任务是在数据库中插入种子数据。由于我无法按照 StackOverflow 的建议在该线程之上回复，因此我发布了这个新问题。请帮忙。

谢谢

# javascript - 如何使用 javascript 停用选择选项？

> ID：14517679
> 
> 赞同：3
> 
> 时间：2013-01-25T08:01:43.167
> 
> 标签：javascript, html, html-select

在下面的 HTML 代码中，我想用 JavaScript 实现以下内容。当用户选择`Audi`时，他只有选择的选项`application 2`（`application 1`在这种情况下必须消失）。

```
<select>
    <option value="volvo">Volvo</option>
    <option value="audi">Audi</option>
</select>
<select>
    <option value="app1">application 1</option>
    <option value="app2">application 2</option>
</select> 
```

[我在这里](http://jsfiddle.net/L2NFA/)写了代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T08:35:06.203

html:

```
 <select>
  <option id="app1" value="volvo">Volvo</option>
  <option id="app2" value="audi">Audi</option>
  </select>
 <select>
  <option value="app1">application 1</option>
  <option value="app2">application 2</option>
</select> 
```

js：

```
var selections = document.getElementsByTagName('select');
selections[0].onchange = carSelection;

function carSelection(e) {
    var first = selections[0];
    var id = first.options[first.selectedIndex].id;

    var second = selections[1];
    var  j = 0;
    while (second.options[j])  {
        second.options[j].disabled = (second.options[j].value != id );
        if (second.options[j].value == id)
            second.selectedIndex = j;
        j++;
    }    
} 
```

[http://jsfiddle.net/U4y2J/3/](http://jsfiddle.net/U4y2J/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T08:21:27.417

HTML：

```
 <select id="1">
  <option value="volvo">Volvo</option>
  <option value="audi">Audi</option>
  </select>
 <select id="2">
  <option id="2a" value="app1">application 1</option>
  <option id="2b" value="app2">application 2</option>
</select> 
```

Javascript：

```
<script type="text/javascript">
document.getElementById("1").onchange = change;
function change(){
    var s_a = document.getElementById("1");
    var car = s_a.options[s_a.selectedIndex].value;
    var s_b = document.getElementById("2");
    if(car === "audi"){
        s_b.options["2b"].disabled = true ;
        s_b.options["2a"].selected = true;
    }
    else {
        s_b.options["2b"].disabled = false ;
    }
}
</script> 
```

并**[链接到提琴手](http://jsfiddle.net/U4y2J/5/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T08:28:57.833

`application 1`选择时自动取消`Audi`选择。

[http://jsfiddle.net/KQMLQ/1/](http://jsfiddle.net/KQMLQ/1/)

HTML

```
 <select id="1">
  <option value="volvo">Volvo</option>
  <option value="audi">Audi</option>
  </select>
 <select id="2">
  <option value="app1">application 1</option>
  <option value="app2">application 2</option>
</select> 
```

jQuery

```
$("#1").click(function() {
if($("#1").val() === 'volvo') {
    $("#2").find('option[value="app1"]').removeAttr('disabled');
}
if($("#1").val() === 'audi') {
    $("#2").find('option[value="app1"]').attr('disabled', 'disabled').removeAttr('selected');
    $("#2").find('option[value="app2"]').removeAttr('disabled');
}
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T12:30:04.587

Here is a jQuery version [DEMO](http://jsfiddle.net/mplungjan/37ARZ/)
where I remove the option when the select is audi - it is removed based on values so you can have as many options you want surrounding the option to remove

```
var opts=[];
$(function() {
    $("#sel2 option").each(function(){ // save all options
        var opt = {};
        opt.value=this.value;
        opt.text=this.text;
        opts.push(opt);
    });

    $("#sel1").on("change",function() { // restore relevant options
        var sel = $("#sel2");
        sel.empty();
        var val = $(this).val();
        $.each(opts,function(i,opt) {
          if (val == "audi" && opt.value=="app2") return;
          sel.append('<option value="'+opt.value+'">'+opt.text+'</option>');
        });
    });
}); 
```

# actionscript-3 - 为 scaleform 创建皮肤组件和 UI 编辑器

> ID：14517680
> 
> 赞同：2
> 
> 时间：2013-01-25T08:01:44.300
> 
> 标签：actionscript-3, flash, user-interface, actionscript, project-management

我们的项目是一个 MMORPG，`scaleform`用来渲染 UI。现在我们`Flash CS5`使用`scaleform CLIK`. 随着这个项目的发展，我们遇到了一些问题：

1.  `CLIK`没有蒙皮，我们必须为每个具有不同消失的组件创建单独的符号，所以我们有`PushButton1`, `PushButton2`, `RadioButton1`, `RadioButton2`...

2.  `Flash CS5`不是*所见即所得的*工具。例如，我们有一个名为 的共享组件`Window`，它有一个`close`按钮作为它的子元素。在 a`fla`中，我们先将 a 拉到`Window`舞台上，并修改它的大小，`close`按钮会在舞台上进行缩放。我们可以将按钮限制为代码，但艺术家必须在运行时`close`看到正确的结果。`Gfx Player`

3.  我们有一些常见的组件，`fla`例如`common_button.fla`其中的大多数按钮组件。公共组件在不同的运行时共享`fla`。在 UI `fla`（例如`friendpanel.fla`）中，当我们需要一个通用组件时，我们将其复制`common_xxx.fla`并粘贴到新`fla`库中。如果面板很复杂，它的库会很混乱，不容易管理。如果普通的不满足要求，我们会双击粘贴的组件在本地进行修改`fla`，这样会造成更多的资源管理麻烦。

所以我考虑是否应该创建一个皮肤 UI 组件库和一个 UI 编辑器来处理这个问题。有没有人有类似的经历？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:44:53.897

不幸的是，这些是许多 Flash IDE 用户报告的常见工作流程问题。当然，创建自己的工具来解决这些问题是一个不错的选择，但成本很高。Scaleform 团队正在为 SDK 的未来版本研究这些类型问题的可能解决方案。与此同时，我无法采取任何措施来解决我所知道的这些问题。

# ruby-on-rails - 将 Elasticsearch 与 Activerecord 集成

> ID：14517686
> 
> 赞同：2
> 
> 时间：2013-01-25T08:02:11.993
> 
> 标签：ruby-on-rails, ruby, elasticsearch

例如，在 Java 中，当使用 Hibernate Search 时，您将 JPA 插入、删除和更新事件绑定到搜索引擎，以便它自动从搜索引擎索引中插入、更新和删除元素，同时从数据库中插入、更新或删除元素。在 Ruby 中和使用活动记录时是否相同？还是您必须手动注册观察者？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T10:14:10.980

至少有三个值得注意的 gem 允许您将 Elasticsearch 与 ActiveRecord 集成，其中一些（如 elasticsearch-rails、flex、retire）带有用于 ActiveRecord 的回调挂钩，这些挂钩将在适当的操作上自动添加、更新或销毁 elasticsearch 记录。

1.  [**elasticsearch-rails**](https://github.com/elasticsearch/elasticsearch-rails)：新的默认值
2.  [**flex**](https://github.com/ddnexus/flex) : 非常棒的维基
3.  [**担架**](https://github.com/PoseBiz/stretcher)：亚军，新选择

所有这些都得到积极维护和开发。一个仍然被广泛使用但不再维护的宝石正在退役。

1.  [**退休**](https://github.com/karmi/tire)：广泛使用，但不再支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T08:49:20.990

[*Tire*](https://github.com/karmi/tire) Rubygem 带有强大的ActiveModel [/ActiveRecord 集成](https://github.com/karmi/tire#activemodel-integration)。

快速启动的最佳选择是生成一个示例 Rails 应用程序：

```
rails new searchapp -m https://raw.github.com/karmi/tire/master/examples/rails-application-template.rb 
```

此外，[*Railscasts*插曲](http://railscasts.com/episodes/306-elasticsearch-part-1)对集成进行了快速概述。轮胎自述文件和集成测试套件包含所有信息。

# c++ - 仅在一端生长的序列的合适名称

> ID：14517696
> 
> 赞同：8
> 
> 时间：2013-01-25T08:02:44.107
> 
> 标签：c++, containers, sequence

有几次我在一个`vector`或另一个可变序列（序列适配器）上使用受限接口，它只允许`push_back`and `clear`。它有一些不错的属性，例如，可以基于始终稳定的索引设计迭代器（例如`stable_vector`但也具有元素连续性），因此可以存储而不必担心失效，除非它被清除。

我想直接使用适配器类而不是`vector`其他序列来强调接口（以及防止使用不支持的操作（例如 等）发生任何意外错误`insert`）`erase`。

是否存在与该`append_only`序列匹配的现有 ADT？否则任何人都可以为这个序列适配器推荐一个合适的名称吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:07:12.880

我认为没有任何现有的 ADT 可以做你想做的事。至于我会用的名字`PushOnlyVector`或类似的东西。事实上，我也喜欢`append_only`你的问题，所以你也可以使用它：`AppendOnlyVector`. 最后一个选项：`GrowingArray`. 我保留`vector`or`array`作为名称的一部分以强调您支持索引操作。

# php - 在 php 中注销（cookie 和会话）

> ID：14517700
> 
> 赞同：1
> 
> 时间：2013-01-25T08:03:28.117
> 
> 标签：php, session, cookies

我已经在 php 中编写了登录和注销脚本。我可以登录但注销不起作用。有人请指出错误。我完全迷路了。这是完整的代码。

1.登录php代码：

```
 <?php
session_start();
require_once('login/connectvars.php');
$msg = "";

if(!isset($_SESSION['username']) && isset($_COOKIE['username']))
{
    $_SESSION['username'] = $_COOKIE['username'];
}

if(isset($_POST['submit']))
{
    $dbc = mysqli_connect(DB_HOST,DB_USER,DB_PASSWORD,DB_NAME);
    $username = mysqli_real_escape_string($dbc,trim($_POST['username']));
    $password = mysqli_real_escape_string($dbc,trim($_POST['password']));

    if(!empty($username) && !empty($password))
    {
        $query = "SELECT username FROM users_dns WHERE username = '$username' AND password = SHA('$password')";
        $data = mysqli_query($dbc,$query) or die(mysqli_error($dbc));

        if(mysqli_num_rows($data) == 1)
        {
            $row = mysqli_fetch_array($data);
            $_SESSION['username'] = $row['username'];
            setcookie('username',$row['username'],time()+(60*6));
            $msg = 'success';
        }
        else
        {
            $msg = 'enter correct values..';
        }
    }
    else
    {
        $msg = 'Enter all fields..';
    }
}

?> 
```

2.我在 HTML 中用于检查会话的代码。

```
 <div id="login_form">
          <h2>
            <?php echo $msg; ?>
          </h2>
       <?php
       if(isset($_SESSION['username']))
        {
            echo 'nothing<br />';
            echo '<a href="login/logout.php">log out'.$_SESSION['username'].'</a><br />';
        }
        else
        {
       ?>
         <form id="login"  method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">
            <table>
                  <tr>
                     <th>Username:</th>
                     <th>Password:</th>
                  </tr>
                  <tr>
                     <td><input type="text" name="username" /></td>
                     <td><input type="password" name="password" /></td>
                   </tr>
                   <tr>
                      <td><input type="submit" name="submit" value="Log In" class="submit" /></td>
                      <td><a href="login/signup.php"><input type="button" class="submit" value="Sign Up" /></a></td>
                   </tr>
            </table>
         </form>
         <?php
         }
         ?>
    <!-- login form -->

   </div> 
```

3.注销脚本

```
 <?php
session_start();

if(isset($_SESSION['username']))
{
    $_SESSION = array();

    if(isset($_COOKIE[session_name()]))
    {
        setcookie(session_name(),'',time() - 3600);
    }
    session_destroy();
}

setcookie('username','',time() - 3600);

echo 'redirecting you...please wait..';
header("Refresh: 3;url=http://localhost/");
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T08:24:10.287

尝试删除所有 cookie。

```
<?php

if (isset($_SERVER['HTTP_COOKIE']))
{
    $cookies = explode(';', $_SERVER['HTTP_COOKIE']);
    foreach($cookies as $cookie)
    {
        $mainCookies = explode('=', $cookie);
        $name = trim($mainCookies[0]);
        setcookie($name, '', time()-1000);
        setcookie($name, '', time()-1000, '/');
    }
}
```

并且`session`您需要了解更多关于`ob_start(); and ob_flush();`. 干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:13:09.607

对于注销只需使用：

```
session_destroy();
header('Location: index.php'); // file name where you want to redirect after logout
exit(); 
```

# sql-server - 如何将 SQL 数据透视表插入到常规 sql 表中

> ID：14517701
> 
> 赞同：1
> 
> 时间：2013-01-25T08:03:29.627
> 
> 标签：sql-server

如何插入`sql pivot table`常规sql表？

我有一个数据透视查询

```
SELECT country,
       PARTNER_ID,
       PARTNER_NAME,
       [BCS] AS BCS,
       [HPN] AS HPN,
       [ISS] AS ISS,
       [HPSD] AS HPSD
FROM   (
           SELECT COUNTRY,
                  PARTNER_ID,
                  PARTNER_NAME,
                  BU,
                  FUNDING
           FROM   ESSN_DP_CALCULATION
       ) p
       PIVOT(AVG(FUNDING)FOR BU IN ([BCS], [ISS], [HPN], [HPSD])) AS pvt 
```

哪个工作正常，但我需要帮助才能将这些值插入到`FINAL` 具有相同列的名为的表中 -`country, PARTNER_ID,PARTNER_NAME, BCS, HPN ,ISS, HPSD`

# php - 2 带条件的日期输入验证php

> ID：14517703
> 
> 赞同：0
> 
> 时间：2013-01-25T08:03:43.030
> 
> 标签：php, codeigniter, date, validation

我想验证codeigniter中的2个日期输入，条件是，如果结束日期大于开始日期，将出现警告[javascript警告或其他内容]或无法输入数据

我这样的形式，

```
<h1><?php echo $title; ?></h1>
<form action="<?= base_url(); ?>index.php/admin/kalender/buat" method="post" enctype="multipart/form-data" name="form" id="form">
<?php
echo "<p><label for='IDKategori'>Tingkatan Pimpinan :</label><br/>";
echo form_dropdown('IDKategori', $kategori) . "</p>";

echo "<label for='ptitle'>Kegiatan / Lokasi :</label><br/>";
$data = array('class' => 'validate[required] text-input', 'name' => 'judul', 'id' => 'ptitle', 'size' => 80);
echo form_input($data);

echo "<p><label for='long'>Uraian Kegiatan / Keterangan / Catatan :</label><br/>";
$data = array('class' => 'validate[required] text-input', 'name' => 'konten', 'rows' => '13', 'cols' => '60', 'style' => 'width: 60%');
echo form_textarea($data) . "</p>";

echo "<p><label for='ptitle'>Waktu Mulai :</label><br/>";
$data = array('class' => 'validate[required] text-input', 'name' => 'TanggalMulai', 'id' => 'basic_example_1');
echo form_input($data) . "</p>";

echo "<p><label for='ptitle'>Waktu Akhir :</label><br/>";
$data = array('class' => 'validate[required] text-input', 'name' => 'TanggalAkhir', 'id' => 'basic_example_2');
echo form_input($data) . "</p>";

echo form_submit('submit', 'Tambah Even');
?>
&nbsp;&nbsp;<input type="button" value="Kembali" onClick="javascript: history.go(-1)" /> 
```

如何在“Waktu Akhir & Waktu Mulai”表格中验证？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T08:10:52.573

试试这个。它是通过使用 CI 验证库。它使用回调类型的验证。

把这个放在`if(isset($_POST['submit_button_name'])) {}`部分。首先，加载验证数组，

```
$validation = array(
  array('field' => 'startDate', 'label' => 'StartDate', 'rules' => 'required|callback_compareDate'),
  array('field' => 'endDate', 'label' => 'endDate', 'rules' => 'required|callback_compareDate'),
); 
```

然后加载 CI 验证库，

```
$this->form_validation->set_rules($validation);
$this->form_validation->set_message('required', '%s is required.'); 
```

这是回调函数。

```
function compareDate() {
  $startDate = strtotime($_POST['startDate']);
  $endDate = strtotime($_POST['endDate']);

  if ($endDate >= $startDate)
    return True;
  else {
    $this->form_validation->set_message('compareDate', '%s should be greater than Contract Start Date.');
    return False;
  }
} 
```

“必需”验证使字段必须填写某些内容。在这种情况下，回调函数比较日期，如果开始日期小于起始日期，则进一步处理表单，否则标记错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:20:33.133

同时，如果你想在 Jquery 中使用，你可以使用它。

```
var startDate = new Date($('#startDate').val());
var endDate = new Date($('#endDate').val());

if (startDate > endDate){
       alert("Start Date should be less than End Date");
       return false;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-05-09T09:46:42.010

这是工作代码

```
$params['toDate'] = $this->input->post('toDate', TRUE);
$params['fromDate'] = $this->input->post('fromDate', TRUE);$this->load->model('your_model');
$this->load->library('form_validation');
$this->form_validation->set_data($params);

$startDate = strtotime($params['fromDate']);
$endDate = strtotime($params['toDate']);

if ($endDate >= $startDate):
    $this->form_validation->set_rules('fromDate', 'From Date', 'required|trim');
    $this->form_validation->set_rules('branchCode', 'Branch Code', 'required|trim');
else:
    $json = array(
        "success" => false,
        "msg" => "Start date must be greater than end date"
    );

    echo json_encode($json);
    die();
endif; 
```

# php - 将 if 与我的 foreach 结构一起使用

> ID：14517704
> 
> 赞同：0
> 
> 时间：2013-01-25T08:03:45.637
> 
> 标签：php, if-statement, foreach

我为我的 foreach 使用以下结构我将如何使用相同格式的 if 语句？

```
<?php foreach($property as $section):?>

    if(!empty($section))
    {
      echo <p>data here </p>;
    }else{
      html
    }

<?php endforeach;?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T08:07:11.343

```
<?php foreach($property as $section):
    if(!empty($section)):
      echo "<p>data here </p>";
    endif;
endforeach;?> 
```

或者

```
<?php foreach($property as $section):
    if(!empty($section)):
      echo "<p>data here </p>";
    else:
       echo "html";
    endif;
endforeach;?> 
```

请参阅：[替代语法](http://php.net/manual/en/control-structures.alternative-syntax.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T08:06:04.133

不知道你的意思，但你没有有效的 php.ini 文件。

```
foreach($property as $section) {
    if(!empty($section))
    {
      echo '<p>data here </p>';
    }else{
      echo 'html';
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T08:10:25.303

我想你正在寻找这个。

```
<?php foreach($property as $section): ?>
    <?php
        if(!empty($section)) :
            echo <p>data here </p>;
        else :
            html
        endif;
endforeach; ?>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T08:10:32.317

简写：

```
<?php foreach($property as $section):?>
    <?php if(!empty($section)):?>
      <p>data here </p>;
    <?php else: ?>
      html
    <?php endif;?>
<?php endforeach;?> 
```

其他：

```
<?php foreach($property as $section)
 {
   if(!empty($section))
   {
     echo '<p>data here </p>';
   }else{
       echo 'html';
   }
 }
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-25T08:10:48.343

这是一个示例，`}elseif{`还包含：

```
<?php foreach($property as $section):?>

<?php    if(!empty($section)): ?>

      <p>data here </p>

<?php   elseif ([another condition]): ?>

      ...

<?php   else: ?>

      html

<?php   endif: ?>

<?php endforeach;?> 
```

整个文档在这里： http: [//php.net/manual/en/control-structures.alternative-syntax.php](http://php.net/manual/en/control-structures.alternative-syntax.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T08:13:48.747

我认为最好的解决方案是：

```
<?php
foreach($property as $section) {
    if(!empty($section))
    {
        echo '<p>data here </p>';
    }
    else
    {
        ?>
        <div id="dosome">really crazy html stuff here</div>
        <?php
    }
}
?> 
```

# angularjs - 如何从 angularjs 中的 JSONP 错误回调中获取数据？

> ID：14517709
> 
> 赞同：2
> 
> 时间：2013-01-25T08:03:49.757
> 
> 标签：angularjs, jsonp

我正在尝试从 angularjs 中的 jsonp 错误回调中获取响应消息，但响应数据未定义。我用 409 http 代码返回响应。如果直接在浏览器中打开 jsonp url，它会显示“angular.callbacks._0({"message":"Reset link is wrong"})”，但我无法在错误回调中收到此消息。我究竟做错了什么？

```
// Extend angular app for api requests
app.factory('User', function($http) {

    var User = function(data) {
        angular.extend(this, data);
    };

    // Send link for password reset to entered email
    User.reset_password = function() {
        return $http.jsonp(jsonp_url + 'user/reset_pass?_method=post&user_key=' + user_key + '&callback=JSON_CALLBACK');
    };

    return User;
});

app.controller('ResetPasswordController', function ResetPasswordController($scope, User){

    $scope.submit = function() {

        var response = User.reset_password();

        response.then(function(data){
            //Success callback
        }, function(data){
            // Error callback
            console.log(data) // Output: {config : {...}, data: undefined}
        });
    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:20:13.213

正如 Brandon Tilley 所说，不可能从带有 http 错误代码的 jsonp 响应中获取数据。如果您无论如何都希望收到错误消息，则需要发送类似 {result: false, msg: 'Error occurred...'} 的“好”http代码，例如 200。

# vnc - 在 noVNC 中有一种方法可以从服务器接收字符串（日志），它不是帧（屏幕）的一部分

> ID：14517716
> 
> 赞同：1
> 
> 时间：2013-01-25T08:04:27.367
> 
> 标签：vnc, vnc-server, vnc-viewer

在 noVNC 中，有一种方法可以使用在 websock.js 中实现的 api 'send_string' 将字符串从客户端发送到服务器，我注意到的一件事是这样发送字符串是它不是 RFB 编码的（如果我错了，请纠正我)，因此在这种情况下的优势是可以将命令发送到中间代理，该代理连接到 VNC 服务器...

现在我的查询是..这个中间代理有没有办法将一些字符串发回给vnc客户端......意味着它不是RFB编码的，所以将在@客户端进行不同的处理

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T17:42:39.567

websock.js 库是[websockify](https://github.com/kanaka/websockify)项目的客户端部分。websockify 的目的是在 WebSocket（基于消息）和普通 TCP 套接字（基于流）之间架起桥梁。

websock.js 提供的 API 是流式 API，而不是基于消息的 API。此外，websockify/websock.js 允许向远程目标发送/接收二进制数据，即使使用了本机不支持二进制数据的旧 WebSocket 协议 (Hixie)。

send_string 函数是一个便利函数，因此您不必在发送之前将字符串转换为数据的数组形式。数据仍然发送到最终目标（它不会被 websockify 拦截）。RFB 握手的开始是基于字符串的，因此 noVNC 在几个地方使用 send_string （再次，为了方便）。

如果你想在 websock.js 和 websockify 之间进行带外通信，那么你需要修改双方，也许通过在每条消息中添加一个初始字节来指示它是带外信号还是部分带内流。它不是内置功能。

**免责声明**：我制作了 noVNC 和 websockify。

# cronexpression - 如何为 Everyday 1.00 AM 和 Everyday 2.00 AM 编写 cron 表达式

> ID：14517723
> 
> 赞同：0
> 
> 时间：2013-01-25T08:04:52.590
> 
> 标签：cronexpression

我是 cron 表达式的新手。我想为**Everyday 1.00 AM**和**Everyday 2.00 AM**编写 cron 表达式？. 我该如何编写 cron 表达式？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:07:55.187

如果我没记错的话应该是这样的：

```
0 1  *   *   *    command

0 2  *   *   *    command 
```

# java - 访问 ArrayList 中其他项目之间的所有项目

> ID：14517727
> 
> 赞同：1
> 
> 时间：2013-01-25T08:05:17.730
> 
> 标签：java, math, arraylist

给定一个`ArrayList`形式：

```
{ "(", "2", "+", "4", ")", "/", "2"} 
```

我想访问括号之间的所有项目，然后对这些项目运行一个方法。

为此，我将不得不说：

```
while(arrayList.contains("(")&&arrayList.contains(")")){
    // access the items between the brackets
} 
```

括号不会总是在相同的位置，并且它们之间会有不同数量的项目。我将如何访问这些项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T08:24:20.900

您需要获取数组列表中括号的索引。对于您使用的数据结构，我认为应该查看 javadoc 以获取有关您可以使用它做什么的信息。ArrayList.contains() 是 ArrayList 的一个有用方法，但是 ArrayList.indexOf() 在这种情况下会更有用。

`public int indexOf(Object o)` 

`Returns the index of the first occurrence of the specified element in this list, or -1 if this list does not contain the element. More formally, returns the lowest index i such that (o==null ? get(i)==null : o.equals(get(i))), or -1 if there is no such index.`

使用这种方法，您可以获得两个连续的开闭括号的索引，当然，如果它们存在的话。获得索引后，您可以在它们之间进行迭代。这是一种解析工作，因此您可能会通过尝试实现一些递归方法来弄脏您的手。例如，{“（”，“（”，“2”，“+”，“4”，“）”，“ /"、"2"、")"}。对于这样的嵌套语句，您应该进行更多研究。

您应该需要知道的是复杂语句的树。我强烈建议您检查树数据结构。

编辑：您还可以找到许多针对此问题的堆栈实现。关键词：栈表达式解析器算法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T08:17:51.897

使用这样的东西

```
String exp=/*ArrayList.toString()*/
exp=exp.replace(",","");
exp=exp.replace("[",""); 
```

得到表达式后

您可以使用内置的 Javascript 引擎。

```
import javax.script.ScriptEngineManager;
import javax.script.ScriptEngine;

public class Test {
  public static void main(String[] args) throws Exception{
    ScriptEngineManager mgr = new ScriptEngineManager();
    ScriptEngine engine = mgr.getEngineByName("JavaScript");
    String foo = "40+2";
    System.out.println(engine.eval(foo));
    } 
} 
```

参考：[堆栈溢出](https://stackoverflow.com/questions/3422673/evaluating-a-math-expression-given-in-string-form)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T08:29:46.880

你可以这样做：

```
ArrayList<String> list; // The list you want to process
for (int i = list.indexOf("(") + 1; i < list.indexOf(")"); i++) {
    // Do something with list.get(i)
} 
```

这仅适用于恰好出现一次“（”和“）”，但您可以根据需要轻松修改代码。

# html - 如何从xml中的html表中获取表数据？

> ID：14517732
> 
> 赞同：0
> 
> 时间：2013-01-25T08:05:35.117
> 
> 标签：html, r, xml-parsing, html-table

我有一个 xml 文件，其中包含一些 html 内容，如粗体、段落和表格。我编写了 shell 脚本来解析除表格之外的所有 html 标签。我正在使用 XML（R 包）来解析数据。

```
<Root>
    <Title> This is dummy xml file </Title>
    <Content> This table summarises data in BMC format.
        <div class="abctable">
            <table border="1" cellspacing="0" cellpadding="0" width="100%"   class="coder">
                <tbody>
                    <tr>
                        <th width="50%">ABC</th>
                        <th width="50%">Weight status</th>
                    </tr>
                    <tr>
                        <td>are 18.5</td>
                        <td>arew</td>
                    </tr>
                    <tr>
                        <td>18.5 &amp;mdash; 24.9</td>
                        <td>rweq</td>
                    </tr>
                    <tr>
                        <td>25.0 &amp;mdash; 29.9</td>
                        <td>qewrte</td>
                    </tr>
                    <tr>
                        <td>30.0 and hwerqer</td>
                        <td>rwqe</td>
                    </tr>
                    <tr>
                        <td>40.0 rweq rweq</td>
                        <td>rqwe reqw</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </Content>
    <Section>blah blah blah</Section>
</Root> 
```

如何解析xml中存在的该表的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:23:35.903

好吧，包中调用`readHTMLTable`了一个函数`XML`，这似乎正是您需要的？

这是一种使用以下 xml 文件的方法：

```
<Root>
    <Title> This is dummy xml file </Title>
    <Content>
      This table summarises data in BMC format.

     <div class="abctable">
     <table border="1" cellspacing="0" cellpadding="0" width="100%"   class="coder">
   <tbody>
   <tr>
       <th width="50%">ABC</th><th width="50%">Weight status</th>
   </tr>
   <tr>
       <td>are 18.5</td>
       <td>arew</td>
   </tr>
   <tr>
       <td>18.5 &amp;mdash; 24.9</td>
       <td>rweq</td>
   </tr>
   <tr>
       <td>25.0 &amp;mdash; 29.9</td>
       <td>qewrte</td>
   </tr>
   <tr>
       <td>30.0 and hwerqer</td>
       <td>rwqe</td>
   </tr>
   <tr>
       <td>40.0 rweq rweq</td>
       <td>rqwe reqw</td>
   </tr>
   </tbody>
  </table>
   </Content>
 </div>
 <Section>blah blah blah</Section>
 </Root> 
```

如果将其保存在名为的文件中，`/tmp/data.xml`则可以使用以下代码：

```
doc <- htmlParse("/tmp/data.xml")
tableNodes <- getNodeSet(doc, "//table")
tb <- readHTMLTable(tableNodes[[1]]) 
```

哪五个：

```
R> tb
                 V1            V2
1               ABC Weight status
2          are 18.5          arew
3 18.5 &mdash; 24.9          rweq
4 25.0 &mdash; 29.9        qewrte
5  30.0 and hwerqer          rwqe
6    40.0 rweq rweq     rqwe reqw 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T08:16:01.713

xml 解析的最佳方法是使用 xpath 表达式

[Xpath 教程](http://www.w3schools.com/xpath/)

[Xpath 和 R](http://www.omegahat.org/RSXML/shortIntro.html)

[如何使用 XPath 和 R stackoverflow](https://stackoverflow.com/questions/4870207/xpath-within-r-using-xml-package)

# c# - 在 Unity 中使用标签访问所有对象上的脚本

> ID：14517733
> 
> 赞同：4
> 
> 时间：2013-01-25T08:05:39.760
> 
> 标签：c#, foreach, unity3d

我的问题很简单，如何通过 foreach 访问我的游戏对象自定义 C# 脚本。

我试过以下：

```
foreach(TowerController go in GameObject.FindGameObjectsWithTag("Tower")) {
        go.upgradeTowerProgress = false;    
    } 
```

似乎不起作用。不知道为什么，这就是为什么我在这里问！xD

TowerController 是我在带有标签 Tower 的 gameObjects 上的自定义脚本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-26T00:24:18.360

这应该有效（未经测试）：

```
foreach(GameObject go in GameObject.FindGameObjectsWithTag("Tower")) {
        go.GetComponent<TowerController>().upgradeTowerProgress = false;    
    } 
```

我改变的是你正在迭代一个 GameObject 数组，所以你需要这样做`foreach(GameObject go...`，然后你使用[GetComponent](http://docs.unity3d.com/Documentation/ScriptReference/GameObject.GetComponent.html)函数来获取该类型的组件，`TowerController`然后你可以访问它的`updateTowerProgress`. [这个](http://docs.unity3d.com/Documentation/ScriptReference/index.Accessing_Other_Game_Objects.html)页面总是一个很好的参考。

# c++ - 在 C++ 中计算公式时遇到问题

> ID：14517735
> 
> 赞同：-4
> 
> 时间：2013-01-25T08:05:42.053
> 
> 标签：c++

我无法让该程序通过公式评估一系列值。

> 范围 = (-3.0,4.0) 公式 = (9(x^3)-27(x^2)-4x+12) / (sqrt(3(x^2)+1) + abs(5-(x^ 4)))

程序打印出`y as -1.IND`

任何有助于阐明为什么所有 y 都会出现的任何帮助都值得`-1.IND`赞赏。

谢谢，戴夫

```
#include <iostream>
#include <cmath>
using namespace std;

int main() {
    cout << "This program outputs formula results\n";
    long double x = -3.0;
    long double y = 1.0;
    long double a = (9*(pow(x,3))-27*(pow(x,2))-4*x+12);
    long double b = (sqrt(3*(pow(x,2))+1) + abs(5-(pow(x,4))));
    y = a/b;

        for(;x <4.5; x=x+.5){
            cout << "X = " << x << ", " << "Y = " << y;
        if(y==0)
            cout << "Y IS ZERO" << endl;
        else if(y<0)
            cout << "Y IS NEGATIVE" << endl;
        else if(y>0)
            cout << "Y IS POSITIVE\n" << endl;
        }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T08:11:26.723

什么时候`x`是`-3`，或者一般来说是负数，你试图计算`sqrt(3*(pow(x,3))`哪个是负数的平方根。这就是为什么你会得到奇怪的结果。使用`pow`计算整数幂的效率不是很高。但对于小程序，这可能无关紧要。

附录：正如 Nawaz 在评论中指出的那样，请务必在循环中每次重新评估 y，否则您只会得到初始 x 的 y。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T08:12:41.933

您需要`y`在循环中计算，而不仅仅是一次。

正如@simonc 评论的那样——整个方程需要为每个重新计算`x`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T08:14:57.563

您仅针对 x = -3 计算公式，并且对于该值，您试图获得负数的平方根。在循环内移动 y 的计算。

# mysql - 在连接子句中显示空单元格

> ID：14517739
> 
> 赞同：1
> 
> 时间：2013-01-25T08:05:53.980
> 
> 标签：mysql, sql, select

我正在尝试制作一个表格来显示它的全部内容，即使可能有一些空单元格。该表包含一个小俱乐部的十个可能的职位（即主席、秘书等）。每个职位指的是成员表中的一个成员 ID，具体取决于谁被选为该职位。一个职位可能是空缺的，这就是我想要完成的。结构（简化）如下：

**表“成员”**

```
CREATE TABLE members (
    id_member INT NOT NULL,
    member_name VARCHAR(45),
    PRIMARY KEY (id_member)); 
```

**表“职位”**

```
CREATE TABLE positions (
    id_position INT NOT NULL,
    position_name VARCHAR(45),
    PRIMARY KEY (id_position)
    FOREIGN KEY (id_member) REFERENCES members(id_member)); 
```

**选择语法**

```
SELECT position_name, member_name
FROM members
JOIN positions USING(id_members); 
```

只要位置上有成员，它就可以很好地工作，但如果它是空的，则不会出现该行。即使列 id_member 有空单元格，是否有某种方法可以使表位置始终返回每一行？
期望的结果：
Chariman - Jack Carver
秘书 - Joe Hill
Accounter - NULL
Webmaster - Joanna Robson

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T08:07:05.100

改为使用`LEFT JOIN`并交换 tableNames

```
SELECT position_name, member_name
FROM   positions
       LEFT JOIN members USING(id_members); 
```

要全面了解联接，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:10:37.067

```
SELECT position_name, member_name
FROM members
LEFT JOIN positions
ON members.id_member = positions.id_member; 
```

# sql - 评论结构表

> ID：14517740
> 
> 赞同：0
> 
> 时间：2013-01-25T08:05:53.997
> 
> 标签：sql, sql-server-2008, asp.net-mvc-4

我开发网站。数据库有很多表，如**“新闻”、“博客”**等。所以，我必须添加评论功能。你能建议我如何实现这一点吗？我应该将不同表的评论存储到**单个“评论”**表中吗？这些表的结构是什么？或者我应该创建**多个表**，例如：**“News”->“News_comments”**、“Blogs”->“Blogs_comments”？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:15:55.427

只有一个表，其中有一列标识评论的类型。为同一目的拥有多个表只是维护噩梦。一张桌子就够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T08:29:10.507

在您有单独的表格用于类别（例如新、博客等）的情况下，拥有多个表格是明智的，因为这些类别是硬编码表格。

最好的办法是创建两个表，一个有类别，另一个有评论，这样您就可以在评论表上拥有类别的外键。

# iphone - 如何使用基本身份验证为 github api 创建 oAuth2 令牌？

> ID：14517744
> 
> 赞同：0
> 
> 时间：2013-01-25T08:06:02.260
> 
> 标签：iphone, ios, oauth, github, github-api

我正在开发我正在使用的 iPhone 应用程序`github api`。

要访问 github，我将 Oauth 与`web application`flow 一起使用。意味着首先它打开登录屏幕，然后我提供用户名和密码。

但现在我想使用`OAuth`密码授权类型。这意味着我想通过在请求 URL 中提供用户名和密码直接访问，（没有单独的登录屏幕）。

怎么可能？有谁能够帮我 ？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-03T12:23:11.327

如[非 Web 应用程序流](http://developer.github.com/v3/oauth/#non-web-application-flow)的 github 开发人员文档中所述，您将需要创建新的授权。

例子：

```
curl https://api.github.com/authorizations \
--user "put_username_here" \
--data '{"scopes":["user"], "client_id":"your_client_id", "client_secret":"your_client_secret}' 
```

这将提示您输入 github 密码并返回 oAuth 令牌作为响应。

有关如何在 iPhone 上进行 HTTP 基本身份验证的信息，请查看[此链接](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)。

# sql-server - 用户 'id/id2' 登录失败

> ID：14517747
> 
> 赞同：0
> 
> 时间：2013-01-25T08:06:07.160
> 
> 标签：sql-server, vb.net, visual-studio-2010

我打算检查我的数据库是否连接到我在 vb.net 中的项目，但似乎我的代码或我的 SQL 服务器有问题。它总是向我显示一条消息“用户 'id/id2' 登录失败”。

这是我的代码：

```
Imports System.Data.SqlClient
Public Class Form1

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim sqlconn As New SqlConnection
    sqlconn.ConnectionString = "server = (local);Database=OJT;integrated security=true"
    Try
        sqlconn.Open()
    Catch ex As Exception
        MessageBox.Show(ex.Message, "Connection to Sql Server Failed!", MessageBoxButtons.OK)
    End Try
    Me.Text = "You are successfully connected to Sql Server"
End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:18:14.923

试试这个

```
sqlconn.ConnectionString = "Data Source=(local);Initial Catalog=OJT;Integrated Security=True" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T03:06:32.960

试试这个：

```
"Data Source=(local);Initial Catalog=OJT;Persist Security Info=True;User ID=(Your User ID);Password=(Your Password)" 
```

希望它能解决你的问题。再会！

# java - Jenkins 中的 Fitnesse 插件

> ID：14517755
> 
> 赞同：4
> 
> 时间：2013-01-25T08:06:49.043
> 
> 标签：java, jenkins, continuous-integration, fitnesse

我正在尝试在 Jenkins 中配置 Fitness，但在 wiki 中遇到了以下句子：[https](https://wiki.jenkins-ci.org/display/JENKINS/Fitnesse+Plugin) ://wiki.jenkins-ci.org/display/JENKINS/Fitnesse+Plugin ：

> 构建步骤中的项目设置

当我打开 Jenkins 配置时，我根本找不到任何 Fitnesse-settings。当我打开项目配置时，唯一与健身相关的是“发布健身结果报告”

那么，在我的 Jenkins 配置中，如何以及在哪里设置我的 Fitnesse-server 的 url？或者这是我应该在 Maven .pom 中做的事情？

詹金斯 1.406 Fitnesse 插件 1.8。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-15T07:06:27.400

我也花了一段时间才弄清楚这一点。然而，在**仔细**阅读手册并玩了一段时间后，我让它像我知道的那样工作。

您需要在作业配置中包含**两次**jenkins FitNesse 插件：

*   第一次是执行测试
*   第二次收集结果

**测试执行：**

在“添加构建后步骤”下配置对插件的第一次调用，并将信息发送到 FitNesse 服务器和要执行的测试。我将测试结果放在工作区中，并在构建之间清理工作区。

[![添加构建后步骤](../Images/45728d492bb3d7e7015c3208b94f8f3f.png)](https://i.stack.imgur.com/VFqYL.png)

**收集结果：**

这是评估结果并检查作业成功或失败的步骤。它还将测试链接放入工作概述中。

在“添加构建后操作”下配置第二步，并包括您要评估的测试结果（或结果 - 允许使用蚂蚁类型通配符）：

[![添加构建后操作](../Images/b6654f45b91bc40ba1d96f4248613e69.png)](https://i.stack.imgur.com/g1nPs.png)

现在，在运行构建时，除了您拥有的其他测试步骤外，还会根据 FitNesse 结果评估 FitNesse 结果并根据 FitNesse 结果通过或失败。

您可以在构建摘要中看到结果：

[![在此处输入图像描述](../Images/2bb839ea1a3c963a2609d94467608309.png)](https://i.stack.imgur.com/w0MkR.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T13:44:24.623

如果 Fitnesse 插件安装正确，“运行 Fitnesse 测试”应显示为“添加构建步骤”按钮下的选项之一（以及“执行 Shell”、“执行 Windows 批处理命令”等）。

# sql - 使用Oracle SQL，如何输出星期几和星期几？

> ID：14517761
> 
> 赞同：12
> 
> 时间：2013-01-25T08:07:17.470
> 
> 标签：sql, oracle

使用 Oracle SQL，如何创建结果集：

*   星期几（1-7）
*   日期名称（星期一、星期二、星期三等）

例如：

```
日期名称
1 星期一
2 星期二
3 星期三
4 星期四
5 星期五
6 星期六
7 星期日

```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-25T09:02:36.637

[Florin 的回答是我会怎么做，但是你需要对NLS](https://docs.oracle.com/cd/A84870_01/doc/server.816/a76966/ch1.htm)设置有点小心。星期几受 NLS 领土的影响，所以如果我像在美国一样运行它，它会起作用：

```
alter session set nls_territory = 'AMERICA';

select to_char(sysdate, 'D') as d, to_char(sysdate, 'Day') as day from dual;

D DAY
- ------------------------------------
6 Friday

select level as dow,
    to_char(trunc(sysdate ,'D') + level, 'Day') as day
from dual
connect by level <= 7;

DOW DAY
--- ------------------------------------
  1 Monday
  2 Tuesday
  3 Wednesday
  4 Thursday
  5 Friday
  6 Saturday
  7 Sunday 
```

但是在英国运行相同的查询是休息日：

```
alter session set nls_territory = 'UNITED KINGDOM';

select to_char(sysdate, 'D') as d, to_char(sysdate, 'Day') as day from dual;

D DAY
- ------------------------------------
5 Friday

select level as dow,
    to_char(trunc(sysdate ,'D') + level, 'Day') as day
from dual
connect by level <= 7;

DOW DAY
--- ------------------------------------
  1 Tuesday
  2 Wednesday
  3 Thursday
  4 Friday
  5 Saturday
  6 Sunday
  7 Monday 
```

...我需要调整计算以纠正这一点：

```
select level as dow,
    to_char(trunc(sysdate ,'D') + level - 1, 'Day') as day
from dual
connect by level <= 7;

DOW DAY
--- ------------------------------------
  1 Monday
  2 Tuesday
  3 Wednesday
  4 Thursday
  5 Friday
  6 Saturday
  7 Sunday 
```

如果需要，您还可以单独指定用于日期名称的语言：

```
select level as dow,
    to_char(trunc(sysdate ,'day') + level - 1, 'Day',
        'NLS_DATE_LANGUAGE=FRENCH') as day
from dual
connect by level <= 7;

DOW DAY
--- --------------------------------
  1 Lundi
  2 Mardi
  3 Mercredi
  4 Jeudi
  5 Vendredi
  6 Samedi
  7 Dimanche 
```

[`to_char()`与`nls_date_language`](http://docs.oracle.com/cd/E14072_01/server.112/e10592/functions198.htm)和[星期几的](http://docs.oracle.com/cd/E11882_01/server.112/e10592/sql_elements004.htm#autoId6)文档，以及[全球化支持指南中的](http://docs.oracle.com/cd/E11882_01/server.112/e10729/ch3globenv.htm#i1007202)更多内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T08:27:24.077

```
select level as dow, 
    to_char(level+trunc(sysdate,'D'),'Day') as day
from dual
connect by level <= 7; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-11T13:31:30.813

没有改变会话

```
 CASE 
    WHEN to_char(sysdate, 'd')-1 = 0 THEN 7 
    ELSE to_char(sysdate, 'd')-1 
 END 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-25T08:14:33.550

```
Select 1, 'Monday' from dual union all select 2, 'Tuesday' from dual ... 
```

# c# - 网页未在按钮单击时加载

> ID：14517763
> 
> 赞同：1
> 
> 时间：2013-01-25T08:07:28.253
> 
> 标签：c#, asp.net, pageload

我做了一个安装网站的设置，当我在自己的桌面上运行它时它运行得非常好。单击按钮时，页面会生成一个 XML 文件并将数据保存在数据库中。但是当我安装后尝试在其他桌面上运行它时，页面只显示加载栏并挂在两者之间。

这让我发疯，但我仍然无法弄清楚问题所在！

我安装了 IIS 7.5。我的桌面有 Windows 7，而我要安装的是 XP。

有什么建议么？

**编辑**

我正在尝试将 XML 文件保存在**C:\**中。是因为权限还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:23:07.823

您需要完全控制“网络服务”。只需按照 Windows 7 的此步骤操作即可。

转到您的 Web 应用程序目录，您将在其中编写 XML 文件。单击属性转到安全选项卡。

检查“网络服务”是否在组或用户名列表中。如果未单击“编辑”，请单击“添加”，然后在“输入对象名称”框中输入“网络”，单击“检查名称”，从结果中选择“网络服务”，然后单击“确定”。通过突出显示新添加的“网络服务”或选择它然后单击“编辑”来完全控制。再次突出显示“网络服务”，然后选中“完全控制”。单击“确定”。现在再次测试您的网络应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T04:42:17.277

好吧，谢谢你的一切！

但我的主要问题是 C: 有一些权利问题。所以我创建了一个新文件夹来存储我的 XML 文件，之后它运行良好！

# download - didReceiveData 仅在恢复下载时被调用一次

> ID：14517765
> 
> 赞同：1
> 
> 时间：2013-01-25T08:07:33.560
> 
> 标签：download, nsurlconnection, resume

我有一个问题，我真的可以通过一些帮助来解决

我正在使用 NSURLconnection 下载一个大文件（27MB）。当没有网络中断时，代码可以正常工作。为了解决网络问题和仅部分下载的文件，我添加了代码来检查下载了多少文件，然后使用服务器请求下载丢失的部分。

如果我下载部分文件，停止程序运行然后再次运行，则代码可以正常工作 - 然后下载从它停止的地方开始并且我有完整的文件。

但是，如果我在没有停止程序的情况下再次点击下载按钮，那么 didReceiveData 只会被调用一次，并且只向文件添加 200KB，它告诉我文件已成功下载。

请帮忙 - 我花了很长时间试图弄清楚我做错了什么。

下面的代码：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{

    NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse*)response;

    NSLog(@"Response code = %d",httpResponse.statusCode );
     file = [NSFileHandle fileHandleForUpdatingAtPath:filename] ;// file is in .h

    if (file)   {
       [file seekToEndOfFile];
    }

}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{

    if (file)  {

        [file seekToEndOfFile];
        NSLog(@"file is %@",file);

    }

    [self.file writeData:data];
 }

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{

    if([[NSFileManager defaultManager] fileExistsAtPath:filename])
    {
       [file closeFile];
        file = nil;
        theConnection = nil;
        filename = nil;
        theRequest = nil;
     }
     NSLog(@"Connection failed! Error - %@ %@",
     [error localizedDescription],
     [[error userInfo] objectForKey:NSURLErrorFailingURLStringErrorKey]);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{

    [file closeFile];
    file = nil;
    theConnection = nil;
    filename = nil;

}

- (IBAction)downloadFile:(id)sender {

    filename = [[NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:movie1]; // filename is in .h file

    theRequest=[NSMutableURLRequest requestWithURL:[NSURL URLWithString:movieDownload1]                                          cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];

    NSUInteger downloadedBytes = 0;
    NSFileManager *fm = [NSFileManager defaultManager];
    if ([fm fileExistsAtPath:filename]) {
        NSError *error = nil;
        NSDictionary *fileDictionary = [fm attributesOfItemAtPath:filename error:&error];
        if (!error && fileDictionary)
        downloadedBytes = [fileDictionary fileSize];
    } else {
        [fm createFileAtPath:filename contents:nil attributes:nil];
    }

    if (downloadedBytes > 0) {
         NSString *requestRange = [NSString stringWithFormat:@"bytes=%d-",downloadedBytes];
        [theRequest setValue:requestRange forHTTPHeaderField:@"Range"];
    }

    theConnection = nil;
    theConnection = [NSURLConnection connectionWithRequest:theRequest delegate:self];

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T12:35:40.037

您可以尝试以下代码片段，而不是在 didReceiveResponse 和 didReceiveData 中使用 seekToEndOfFile。它对我来说效果很好。

```
- (id)initWithURL:(NSString *)downloadString
{
    if (![super init])
        return nil;

    // Construct the URL to be downloaded
    self.downloadURL = [[NSURL alloc]initWithString:downloadString];
    self.downloadData = [[NSMutableData alloc] init];
    self.downloadedFilename   =   [[self.downloadURL path] lastPathComponent];

    [self downloadFile];

    return self;
}

-(void) downloadFile
{
    // set the filePath
    docFolderPath = [NSHomeDirectory() stringByAppendingPathComponent: [NSString stringWithFormat: @"Documents/%@", self.downloadedFilename]];

    self.downloadStream = [NSOutputStream outputStreamToFileAtPath:docFolderPath append:NO];

    if (!self.downloadStream)
    {
        self.error = [NSError errorWithDomain:[NSBundle mainBundle].bundleIdentifier
                                         code:-1
                                     userInfo:@{@"message": @"Unable to create      NSOutputStream", @"function" : @(__FUNCTION__), @"path" : self.downloadedFilename}];

        return;
    }
    [self.downloadStream open];

    self.downloadConnection = [[NSURLConnection alloc] initWithRequest:downloadRequest delegate:self];
    [self.downloadConnection start];
}

//code snippet for the Resume functionality after your downloading gets paused/cancel

-(void) resumeInterruptedDownload
{
    NSFileManager *fm = [NSFileManager defaultManager];
    if ([fm fileExistsAtPath:docFolderPath])
    {
        NSError *error = nil;
        NSDictionary *fileDictionary = [fm attributesOfItemAtPath:docFolderPath
                                                            error:&error];
        if (!error && fileDictionary)
            self.downloadedBytes = [fileDictionary fileSize];

    } else
    {
        [fm createFileAtPath:docFolderPath contents:nil attributes:nil];
    }

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:self.downloadURL cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:30.0];

    // Define the bytes we wish to download.

    if(self.downloadedBytes != 0)
    {
        NSString *range = [NSString stringWithFormat:@"bytes=%i-", self.downloadedBytes];
        [request setValue:range forHTTPHeaderField:@"Range"];
    }

    // Data should immediately start downloading after the connection is created.

    self.downloadConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:TRUE];
} 
```

对于 Mbs 中的大文件，它对我来说非常有效，但对于 Kbs 中的小文件，它有时会失败。您不必在所有这些 NSURLConnection 的委托方法中尝试太多。您可以做的一件事是为每个状态设置宏，即取消、暂停、下载、已下载，这样您就可以知道何时要恢复下载。您也可以尝试以下[http://nachbaur.com/blog/resuming-large-downloads-with-nsurlconnection](http://nachbaur.com/blog/resuming-large-downloads-with-nsurlconnection)。

我知道现在回复为时已晚，但我刚刚进入 IOS。如果你尝试这个，请让我知道它是否有效。谢谢 ：） ：）

# ruby - 如何点击登录？

> ID：14517768
> 
> 赞同：0
> 
> 时间：2013-01-25T08:07:48.360
> 
> 标签：ruby, selenium-webdriver

如何点击下方`Login`？

```
<div style="margin: 20px 0; text-align: center;">
<a class="button" href='/aems/login.do'>Login</a>
</div> 
```

我写了下面但得到了错误：

```
driver.find_element(:class, "button").submit 
```

***错误***

```
[remote server] file:///C:/DOCUME~1/rakshiar/LOCALS~1/Temp/webdriver-profile2013
0125-6116-rvc0z6/extensions/fxdriver@googlecode.com/components/driver_component.
js:8251:in `FirefoxDriver.prototype.findElementInternal_': Unable to locate elem
ent: {"method":"class name","selector":"button"} (Selenium::WebDriver::Error::No 
```

请帮我在这里修复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:42:23.390

以下方法应该有效：

```
driver.findElement(By.xpath("//a[contains(@href,'login') and text()='Login']")).click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:15:07.467

添加一个 id`<a>...</a>`并尝试脚本：`document.getElementById(yourid).click()`.

让我知道你是否能解决它。

# .net - 使用正则表达式用 XML 标记包装部分文本

> ID：14517770
> 
> 赞同：0
> 
> 时间：2013-01-25T08:07:57.403
> 
> 标签：.net, xml, regex, tags

我们正在开发我们的内部工具来为我们的 .NET 产品生成文档。

作为其功能的一部分，我们需要用`<para>`标签包装普通段落。

在这种情况下，“普通段落”意味着它是一行文本，可能带有一些类似 XML 的内联标签，但不在其他块标签内，如`<cell>`or `<description>`。

源文件示例：

```
Description paragraph #1.
Description paragraph #2.
<code>
Method1();
Method2();
</code>
<list type="number">
  <item>
    <description>
      If you need to do something, use the <see cref="P:foo1" /> method.
    </description>
  </item>
  <item>
    <description> The <see cref="P:foo2" /> method does this.
The <see cref="P:foo3" /> method does that.</description>
  </item>
</list>

<section>
<title>Section title</title>
<content>
Section paragraph #1.
Section paragraph #2.
</content>
</section> 
```

这应该转换为以下内容：

```
<para>Description paragraph #1.</para>
<para>Description paragraph #2.</para>
<code>
Method1();
Method2();
</code>
<list type="number">
  <item>
    <description>
      If you need to do something, use the <see cref="P:foo1" /> method.
    </description>
  </item>
  <item>
    <description> The <see cref="P:foo2" /> method does this.
The <see cref="P:foo3" /> method does that.</description>
  </item>
</list>

<section>
<title>Section title</title>
<content>
<para>Section paragraph #1.</para>
<para>Section paragraph #2.</para>
</content>
</section> 
```

正式地，任务听起来像这样：用 .. 包裹每一行文本，但不仅限于它不在其他标签的有限列表中。标签中的每个未来段落都允许出现 CR/LF、制表符、空格字符等空格。

显然，应该为此使用正则表达式，但我们还没有设法构建适合这种情况的东西。有什么想法或提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:12:01.497

你说“显然应该使用正则表达式”。许多人会说您在该断言中缺少“不”。看到[这个众所周知的答案](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。

如果您确定没有嵌套外层标签，您可能可以拆分一些可怕的正则表达式，例如：

```
(<list([^<]|<(?!/list))+</list>)|(<code([^<]|<(?!/code))+</code>)|([^\n]+) 
```

并替换非标签部分的那些匹配项。但实际上，您为什么不使用众多 XML 解析器之一并简单地替换适当的文本节点呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:24:52.543

很难从您的示例中推断出全部要求，但是如果您的示例是典型的，那么在将提供的内容包装在一个`<wrapper>`元素中以使其格式正确之后，以下 XSLT 2.0 样式表将完成这项工作：

```
<xsl:template match="/wrapper/*">
  <xsl:copy-of select="."/>
</xsl:template>

<xsl:template match="/wrapper/text()">
  <xsl:for-each select="tokenize(., '\n')">
    <para><xsl:copy-of select="."/></para>
  </xsl:for-each>
</xsl:template> 
```

# android - Service + BroadcastReceiver：在后台上传文件？

> ID：14517771
> 
> 赞同：0
> 
> 时间：2013-01-25T08:07:59.080
> 
> 标签：android, service, broadcastreceiver

我正在申请。我目前有一个数据库和一个方法，该方法使用服务器上的 PHP 脚本上传图片（以及与图片对应的数据，存储在数据库中）。目的和数据库的模式都不重要。我以前没有真正做过这样的事情，但已经研究了一下。基本上，用户将使用该应用程序拍照。如果有网络连接，图片及其数据将上传，但如果没有连接则不会上传（duh）。一旦存在连接，我希望上传待处理的图像。

为此...我目前的计划是使用 BroadcastReceiver 来检测用户何时连接到网络，然后使用 Service 上传文件。这是正确的方法吗？当且仅当存在挂起的上传时，如果存在连接，我基本上如何才能启动服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:14:21.230

总的来说，你的方法对我来说听起来很合理。

你会在你的包中注册一个广播接收器，监听`android.net.conn.CONNECTIVITY_CHANGE`.

如果活动也触发了您的服务，您可能能够`IntentService`单独处理每个案例，因此您不必处理有关何时停止或启动具有特定生命周期的服务的许多问题。

希望这可以帮助; 你听起来不像是初学者，所以你可以维持生计。

# wso2 - XSLT 用于在 BPEL 中合并多个 xml 文档

> ID：14517779
> 
> 赞同：0
> 
> 时间：2013-01-25T08:08:32.173
> 
> 标签：wso2

这是关于 BPEL 中的 xml 转换。在我的 bpel 流程中，数据来自两个不同的来源（partnerLinks）。来自两个来源的数据采用相同的 xml 格式。我需要将两个 XML 文档中的数据合并为一个 xml 文档，然后将其传递回 ESB。我正在尝试使用 bpel:doXslTransform())。我不确定如何在一次调用中将来自 partnerLinks 的两个响应传递给该函数。

我尝试将两个响应连接成一个消息类型变量中的字符串，然后将其传递给 bpel:doXslTransform()。这是合并数据的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:54:06.230

是的，您可以在此处执行 bpel:doXslTransform。

这涉及从一个服务接收 XML 文档，将其转换为不同的模式以形成新的请求消息，并将新请求发送到另一个服务。这种文档转换可以通过 bpel:doXslTransform 函数使用 XSLT 完成。

```
<variables>
   <variable name="A" element="foo:AElement" />
   <variable name="B" element="bar:BElement" />
</variables>
...
<sequence>
   <invoke ... inputVariable="..." outputVariable="A" />
   <assign>
      <copy>
         <from>
            bpel:doXslTransform("urn:stylesheets:A2B.xsl", $A)
         </from>
         <to variable="B" />
      </copy>
   </assign>
   <invoke ... inputVariable="B" ... />
</sequence> 
```

请参阅[http://docs.oasis-open.org/wsbpel/2.0/OS/wsbpel-v2.0-OS.html](http://docs.oasis-open.org/wsbpel/2.0/OS/wsbpel-v2.0-OS.html)了解更多信息。

# c# - 时间：2019-04-10 标签：c#object detection

> ID：14517783
> 
> 赞同：0
> 
> 时间：2013-01-25T08:08:49.530
> 
> 标签：c#, image, object, detection, aforge

[http://img5.imageshack.us/img5/3315/yenidusuk100003.jpg](http://img5.imageshack.us/img5/3315/yenidusuk100003.jpg)

**如何使用 Aforge 或任何 c# 库在上图中找到矩形的坐标？**

*我努力了。但它太慢了。*

并且这些矩形的位置和大小是静态的。

我找到了以下代码。但不能得到任何结果。

```
Bitmap image = sourceImage; //(Bitmap)Bitmap.FromFile(path);

     BlobCounter blobCounter = new BlobCounter();

     blobCounter.FilterBlobs = true;
     blobCounter.MinHeight = 1;
     blobCounter.MinWidth = 1;

     blobCounter.ProcessImage(image);
     Blob[] blobs = blobCounter.GetObjectsInformation();

     SimpleShapeChecker shapeChecker = new SimpleShapeChecker();

     foreach (var blob in blobs)
     {
         List<IntPoint> edgePoints = blobCounter.GetBlobsEdgePoints(blob);
         List<IntPoint> cornerPoints;

         if (shapeChecker.IsQuadrilateral(edgePoints, out cornerPoints))
         {

             if (shapeChecker.CheckPolygonSubType(cornerPoints) == PolygonSubType.Rectangle)
             {

                 List<System.Drawing.Point> Points = new List<System.Drawing.Point>();
                 foreach (var point in cornerPoints)
                 {
                     Points.Add(new System.Drawing.Point(point.X, point.Y));
                 }

                 Graphics g = Graphics.FromImage(image);
                 g.DrawPolygon(new Pen(Color.Red, 5.0f), Points.ToArray());

                 image.Save("result.png");
             }
         }
     } 
```

# android - Canvas.drawArc() 不画任何东西

> ID：14517785
> 
> 赞同：2
> 
> 时间：2013-01-25T08:09:15.473
> 
> 标签：android, android-canvas, ondraw

我正在尝试绘制一条弧线以覆盖在现有圆的某些部分之上。我的两个圆圈都画得很好，但我的 drawArc() 调用或 drawRect() 调用似乎都没有做任何事情。该应用程序不会崩溃，也不例外。它只是默默地失败。

onDraw() 代码：

```
@Override
protected void onDraw(Canvas canvas) {
    int width = getWidth();
    int height = getHeight();

    int size = (width > height) ? height : width;

    float cx = width / 2;
    float cy = height / 2;
    float radius = size / 2;

    float left = cx - radius;
    float right = cx + radius;
    float top = cy - radius;
    float bottom = cy + radius;

    RectF rect = new RectF(left, top, right, bottom);
    RectF rect2 = new RectF(canvas.getClipBounds());

    Log.d("MyTag", "Left: " + rect.left + "Right: " + rect.right + "Top: " + rect.top + "Bottom: " + rect.bottom);
    Log.d("MyTag", "Left: " + rect2.left + "Right: " + rect2.right + "Top: " + rect2.top + "Bottom: "
            + rect2.bottom);

    canvas.drawCircle(cx, cy, radius, circleRing);//Works
    canvas.drawCircle(cx, cy, radius - barWidth, innerColor);//Works
    canvas.drawArc(rect, 0, angle, true, circleColor);//Doesn't work
    canvas.drawRect(rect, circleColor);//Doesn't work

    super.onDraw(canvas);
} 
```

我已经确认我的`circleColor`Paint 设置正确，这`angle`是一个弧线的有效值。

我的油漆在 {} 块中设置如下，以便所有构造函数都使用它：

```
{
    circleColor = new Paint();
    innerColor = new Paint();
    circleRing = new Paint();

    circleColor.setColor(color.holo_blue_light);
    innerColor.setColor(Color.BLACK);
    circleRing.setColor(Color.GRAY);

    circleColor.setAntiAlias(true);
    innerColor.setAntiAlias(true);
    circleRing.setAntiAlias(true);

    circleColor.setStrokeWidth(50);
    innerColor.setStrokeWidth(5);
    circleRing.setStrokeWidth(5);

    circleColor.setStyle(Paint.Style.FILL);
} 
```

我试过的：

*   硬编码坐标
*   使用圆圈使用的颜料
*   只有 drawArc() 调用存在并注释掉其余的平局
*   禁用硬件加速

Logcat 显示我的 RectF 具有有效点，只是顶部和底部缩放以形成一个正方形：

```
01-25 13:33:39.877: D/MyTag(21612): Left: 0.0 Right: 720.0 Top: 159.0 Bottom: 879.0 //Mine
01-25 13:33:39.877: D/MyTag(21612): Left: 0.0 Right: 720.0 Top: 0.0 Bottom: 1038.0 //Canvas' 
```

有人知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:28:38.630

原来问题是线路

```
circleColor.setColor(color.holo_blue_light); 
```

虽然 Android SDK 将其定义为：

> 浅蓝色的 Holo 阴影
> 
> 常数值：17170450 (0x01060012)

就我的 Canvas 而言，它似乎不是有效的颜色（请注意，这是在 API 14 中添加的，我正在 Android 4.2 上进行测试，因此它应该可供我使用）。但是，将其更改为使用更...正常的颜色可以正常工作：

```
circleColor.setColor(Color.GREEN); 
```

# c# - 在出现不可恢复的错误后，如何终止 IIS 上的 ASP.NET 应用程序？

> ID：14517788
> 
> 赞同：0
> 
> 时间：2013-01-25T08:09:24.033
> 
> 标签：c#, asp.net, security, error-handling

假设我有一个未处理的异常（或已知的严重、不可恢复的错误）。最可怕的情况是安全漏洞，但它可能适用于任何意味着我的状态如此严重以至于无法安全继续下去的事情。

我该怎么办？

在传统应用程序中，通常的技术是快速结束我的进程。尽早。我正在调用 Process.Exit、TerminateProcess、die 或环境具有的任何其他意味着“END. NOW”的工具。[Eric Lippert 的帖子](http://blogs.msdn.com/b/ericlippert/archive/2010/11/23/asynchrony-in-c-5-part-eight-more-exceptions.aspx)很好地表达了这种态度的原因。

在 IIS 上运行的生产 ASP.NET 应用程序中，情况并非如此简单。我当然可以结束当前进程并将错误记录到事件日志或任何地方。这基本上就是任何未处理的异常都会发生的情况。但是下一次请求进来时，IIS 将启动一个新的工作进程。如果我的致命错误是一个短暂的问题，那就太好了。

但是，如果我的问题在我的流程生命周期之后仍然存在，那么新的问题也不会好转。它甚至可能因初始化代码或重新尝试而复杂化。另外，如果 IIS 在同一个应用程序池中运行多个工作进程，即使终止我的进程也不会终止应用程序。从逻辑上讲，所有其他工人可能也被灌输了，只是还不知道。

到目前为止，我只提出了两个选择。

*   结束这个过程并希望最好。知道应用程序将重新启动，这与“catch(Exception) {}”几乎相同。很难令人满意。
*   “伸出手”告诉 IIS 禁用应用程序、停止 IIS、机器等。这似乎是一个残酷的 hack。此外，我猜它可能需要提升安全凭证。在终止可能受损的进程期间，似乎是一个糟糕的时间来拥有这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:02:45.783

我能想到的有以下几点：

1.  您可以继续使用IIS中名为**“Rapid-Fail protection”**的应用程序池的高级设置，将**Failure Interval**设置为足够长，并将**Maximum Failures**设置为1，然后继续抛出异常并使IIS认为此应用程序池无法正常工作，因此它将**服务不可用**发送回客户端，甚至重置连接（取决于您的设置）。有关更多详细信息，请在此处查看：[应用程序池的故障设置](http://www.iis.net/configreference/system.applicationhost/applicationpools/add/failure). 但是您需要非常小心不要过度杀伤，我的意思是您需要编写一个非常好的应用程序，所有异常都得到正确处理，并且只有您想要终止应用程序的应用程序才能被 IIS 真正检测到，否则可能只是单个用户单击关闭了您的网站。

2.  另一种解决方案是继续编写自己的代码，我的意思是你可以以某种方式记录这样的错误，比如创建一个名为**SystemCrashed**的文件，然后终止应用程序，然后检查文件是否存在于**Application_Startup**上，除了终止之外什么都不做找到文件后申请。像锁一样的东西。这需要更多的代码，但可能比 IIS 设置更安全，我的意思是只要你能正确地移除锁，就不会有太多的矫枉过正。

# android - 在 Android 上使用 vlclib

> ID：14517792
> 
> 赞同：5
> 
> 时间：2013-01-25T08:09:45.203
> 
> 标签：android, android-ndk, udp, vlc, rtsp

好吧，我正在尝试创建一个应该显示一些流（udp/rtsp ..）的应用程序，我发现 vlc-player 可以处理其中的大部分！所以我决定使用 vlclib。在 windows 上有一个 vlclib 可以很容易地使用。但是我如何将 vlc-android 项目用作我自己的应用程序的 vlclib？

在网上我发现了另一个问题： [Using libvlc on android with NDK](https://stackoverflow.com/questions/12893578/using-libvlc-on-android-with-ndk)

答案链接到这边： [https ://bitbucket.org/tewilove/nyan.tv-jni/src](https://bitbucket.org/tewilove/nyan.tv-jni/src)

但是自述文件真的很奇怪。它告诉我只能使用 shell 脚本编译它......但是这方面指的是 nyan.tv-jni 项目告诉我，我可以将它简单地用作我的代码中的包装器？[http://blog.moenyan.net/?p=18](http://blog.moenyan.net/?p=18)

所以现在我真的很困惑......谁能帮我解释一下如何使用lib创建我自己的应用程序？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-03T16:39:57.657

我找到了解决我的问题的方法。我决定将我的应用程序构建到 vlc 应用程序中。我从 vlc 克隆了 git-project 并按照说明构建了一个 ARM-CPU 版本。成功编译后，我能够将我的项目合并到 vlc 应用程序中。

只需更改 AndroidManifest.xml 中的包，更改声明的类，例如：

```
.GUI.Main to org.videolan.GUI.Main 
```

请记住不要将您的 Main 注册为起始活动。在完成 VLC-Main 活动的 onCreate() 后开始您的活动。记得在 VLC-Main 活动的 onResume() 中调用 finish()。onResume() 将在您销毁自己的活动后调用。

```
// OnCreate
VLC.Main.onCreate() -> startActivity(Intent) -> MyApplication.Main.onCreate()
// OnDestroy
MyApplication.Main.onDestroy() -> VLC.Main.onResume() -> VLC.Main.onDestroy() 
```

/!\ 记得感谢 VLC 团队的伟大基础！

# jquery - 加入多个作为 jQuery 变量的选择器

> ID：14517794
> 
> 赞同：0
> 
> 时间：2013-01-25T08:10:09.953
> 
> 标签：jquery, jquery-selectors

是否可以加入已兑现选择器的变量？

```
$('.active').each(function(){
  var $a = $(this);
  var $a_h5 = $a.closest('h5');
  var $a_h4 = $a.closest('h4');
}); 
```

不起作用：

```
$('[name=get]').html($($a_h4,$a_h5,$a).map(function() {
  return $(this).html();
}).get().join(', ')); 
```

不起作用：

```
$('[name=get]').html($a_h4.add($a_h5).add($a).map(function() {
  return $(this).html();
}).get().join(', ')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:14:49.547

你可以使用

```
$('[name=get]').html($($.merge($a_h4,$a_h5,$a)).map(function() { 
```

# cron - 以下 cron 表达式是否意味着每 45 分钟？

> ID：14517795
> 
> 赞同：13
> 
> 时间：2013-01-25T08:10:12.657
> 
> 标签：cron

我愿意每 45 分钟运行一次脚本（不是每小时的第 45 分钟）

例如 10:00、10:45、11:30、12:15 等。

```
*/45 * * * * 
```

我不确定这是正确的表达方式。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-25T08:28:10.877

我*怀疑*（编辑：我现在很确定）它没有做你想做的事：字段是分开的，`*/45`几分钟之内只不过是`0,45`. `*/45`如果不做这项工作，我会使用以下三个条目：

```
0,45  0-23/3 * * *
30    1-23/3 * * *
15    2-23/3 * * * 
```

如果您查看`entry.c`vixie cron 源中的文件，您会注意到每个条目的每个*字段*都被解析`get_list`并表示为该字段允许值的位图。这几乎排除了任何“智能”解释，因为在这个阶段已经失去了`*/45`和的区别`0,45`......但是有一个`MIN_STAR`标志，设置`*`在几分钟内（包括`*/45`）。所以我们看一下`cron.c`，一个`MIN_STAR`被检查的地方，以了解它与我们的问题无关。现在我们确定这`*/45`意味着“*每小时*的每 45 分钟”：0:00、0:45、1:00、1:45 等等。

这里有两个答案自信地说相反，引用手册中的一段不幸的段落：

> 星号后也允许执行步骤，因此如果您想说“每两个小时”，只需使用“*/2”

我们很幸运有一个 24 小时的一天，包含偶数小时，使得“每天从 0:00 开始每两个小时”和“通常每两个小时”无法区分。太糟糕了，手册没有深入到记录不平凡的案例，给人的印象`* */22`是每 22 小时一次。它不是。带有步骤的星号只是*使用它的字段中*值列表的简写；它不与其他字段交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-10T17:10:49.140

在 cron 的基本计时，您的系统每分钟检查一次以查看是否有任何 cronjobs 可以运行。它会查看你的 crontab，如果该运行了，噗，它运行了！但是每 45 分钟是一个间隔，它总是会在钟面上达到 15 分钟的标记。例如从零开始，第一个是 0:45。接下来将是从零开始的 90 分钟，或 1:30，下一个将是 2:15... 您可以很容易地看到您想要执行脚本的每个实例的时间，分针将在 12、3、 6 或 9。如果您每 15 分钟执行一次脚本，并检查小时是否正确，则可以执行您的脚本。您可能会使用表格，或者也可能使用模数功能。干杯!

# c# - 将值附加到查询字符串

> ID：14517798
> 
> 赞同：197
> 
> 时间：2013-01-25T08:10:25.883
> 
> 标签：c#, parameters, query-string

我在列表中有一组类似于下面的 URL

*   [http://somesite.com/backup/lol.php?id=1&server=4&location=us](http://somesite.com/backup/lol.php?id=1&server=4&location=us)
*   [http://somesite.com/news.php?article=1&lang=en](http://somesite.com/news.php?article=1&lang=en)

我设法使用以下代码获取查询字符串：

```
myurl = longurl.Split('?');
NameValueCollection qs = HttpUtility.ParseQueryString(myurl [1]);

foreach (string lol in qs)
{
    // results will return
} 
```

但它仅 根据提供的 URL返回**id**、**server**、**location等参数。**

我需要的是向现有查询字符串添加/附加值。

以 URL 为例：

[http://somesite.com/backup/index.php?action=login&attempts=1](http://somesite.com/backup/index.php?action=login&attempts=1)

我需要更改查询字符串参数的值：

**动作=登录 1**

**尝试=11**

如您所见，我为每个值附加了“1”。我需要从其中包含不同查询字符串的字符串中获取一组 URL，并在末尾为每个参数添加一个值并再次将它们添加到列表中。

* * *

## 回答 #1

> 赞同：402
> 
> 时间：2013-01-25T08:24:24.670

您可以使用[`HttpUtility.ParseQueryString`](http://msdn.microsoft.com/en-us/library/ms150046.aspx)method 和 an[`UriBuilder`](http://msdn.microsoft.com/en-us/library/system.uribuilder.aspx)它提供了一种处理查询字符串参数的好方法，而无需担心解析、url 编码等事情：

```
string longurl = "http://somesite.com/news.php?article=1&lang=en";
var uriBuilder = new UriBuilder(longurl);
var query = HttpUtility.ParseQueryString(uriBuilder.Query);
query["action"] = "login1";
query["attempts"] = "11";
uriBuilder.Query = query.ToString();
longurl = uriBuilder.ToString();
// "http://somesite.com:80/news.php?article=1&lang=en&action=login1&attempts=11" 
```

* * *

## 回答 #2

> 赞同：132
> 
> 时间：2013-10-30T10:00:10.433

我已经将[Darin 的答案](https://stackoverflow.com/a/14517976)包装成一个很好的可重用扩展方法。

```
public static class UriExtensions
{
    /// <summary>
    /// Adds the specified parameter to the Query String.
    /// </summary>
    /// <param name="url"></param>
    /// <param name="paramName">Name of the parameter to add.</param>
    /// <param name="paramValue">Value for the parameter to add.</param>
    /// <returns>Url with added parameter.</returns>
    public static Uri AddParameter(this Uri url, string paramName, string paramValue)
    {
        var uriBuilder = new UriBuilder(url);
        var query = HttpUtility.ParseQueryString(uriBuilder.Query);
        query[paramName] = paramValue;
        uriBuilder.Query = query.ToString();

        return uriBuilder.Uri;
    }
} 
```

我希望这有帮助！

* * *

## 回答 #3

> 赞同：60
> 
> 时间：2014-12-18T11:02:10.670

提供的答案与相对 URL 存在问题，例如“/some/path/” 这是 Uri 和 UriBuilder 类的限制，这很难理解，因为我看不出相对 URL 会有问题的任何原因当涉及到查询操作时。

这是一种适用于绝对路径和相对路径的解决方法，在 .NET 4 中编写和测试：

（小提示：这也应该适用于 .NET 4.5，您只需更改`propInfo.GetValue(values, null)`为`propInfo.GetValue(values)`）

```
 public static class UriExtensions{
    /// <summary>
    ///     Adds query string value to an existing url, both absolute and relative URI's are supported.
    /// </summary>
    /// <example>
    /// <code>
    ///     // returns "www.domain.com/test?param1=val1&amp;param2=val2&amp;param3=val3"
    ///     new Uri("www.domain.com/test?param1=val1").ExtendQuery(new Dictionary&lt;string, string&gt; { { "param2", "val2" }, { "param3", "val3" } }); 
    /// 
    ///     // returns "/test?param1=val1&amp;param2=val2&amp;param3=val3"
    ///     new Uri("/test?param1=val1").ExtendQuery(new Dictionary&lt;string, string&gt; { { "param2", "val2" }, { "param3", "val3" } }); 
    /// </code>
    /// </example>
    /// <param name="uri"></param>
    /// <param name="values"></param>
    /// <returns></returns>
    public static Uri ExtendQuery(this Uri uri, IDictionary<string, string> values) {
      var baseUrl = uri.ToString();
      var queryString = string.Empty;
      if (baseUrl.Contains("?")) {
        var urlSplit = baseUrl.Split('?');
        baseUrl = urlSplit[0];
        queryString = urlSplit.Length > 1 ? urlSplit[1] : string.Empty;
      }

      NameValueCollection queryCollection = HttpUtility.ParseQueryString(queryString);
      foreach (var kvp in values ?? new Dictionary<string, string>()) {
        queryCollection[kvp.Key] = kvp.Value;
      }
      var uriKind = uri.IsAbsoluteUri ? UriKind.Absolute : UriKind.Relative;
      return queryCollection.Count == 0 
        ? new Uri(baseUrl, uriKind) 
        : new Uri(string.Format("{0}?{1}", baseUrl, queryCollection), uriKind);
    }

    /// <summary>
    ///     Adds query string value to an existing url, both absolute and relative URI's are supported.
    /// </summary>
    /// <example>
    /// <code>
    ///     // returns "www.domain.com/test?param1=val1&amp;param2=val2&amp;param3=val3"
    ///     new Uri("www.domain.com/test?param1=val1").ExtendQuery(new { param2 = "val2", param3 = "val3" }); 
    /// 
    ///     // returns "/test?param1=val1&amp;param2=val2&amp;param3=val3"
    ///     new Uri("/test?param1=val1").ExtendQuery(new { param2 = "val2", param3 = "val3" }); 
    /// </code>
    /// </example>
    /// <param name="uri"></param>
    /// <param name="values"></param>
    /// <returns></returns>
    public static Uri ExtendQuery(this Uri uri, object values) {
      return ExtendQuery(uri, values.GetType().GetProperties().ToDictionary
      (
          propInfo => propInfo.Name,
          propInfo => { var value = propInfo.GetValue(values, null); return value != null ? value.ToString() : null; }
      ));
    }
  } 
```

这是一套用于测试行为的单元测试：

```
 [TestFixture]
  public class UriExtensionsTests {
    [Test]
    public void Add_to_query_string_dictionary_when_url_contains_no_query_string_and_values_is_empty_should_return_url_without_changing_it() {
      Uri url = new Uri("http://www.domain.com/test");
      var values = new Dictionary<string, string>();
      var result = url.ExtendQuery(values);
      Assert.That(result, Is.EqualTo(new Uri("http://www.domain.com/test")));
    }

    [Test]
    public void Add_to_query_string_dictionary_when_url_contains_hash_and_query_string_values_are_empty_should_return_url_without_changing_it() {
      Uri url = new Uri("http://www.domain.com/test#div");
      var values = new Dictionary<string, string>();
      var result = url.ExtendQuery(values);
      Assert.That(result, Is.EqualTo(new Uri("http://www.domain.com/test#div")));
    }

    [Test]
    public void Add_to_query_string_dictionary_when_url_contains_no_query_string_should_add_values() {
      Uri url = new Uri("http://www.domain.com/test");
      var values = new Dictionary<string, string> { { "param1", "val1" }, { "param2", "val2" } };
      var result = url.ExtendQuery(values);
      Assert.That(result, Is.EqualTo(new Uri("http://www.domain.com/test?param1=val1&param2=val2")));
    }

    [Test]
    public void Add_to_query_string_dictionary_when_url_contains_hash_and_no_query_string_should_add_values() {
      Uri url = new Uri("http://www.domain.com/test#div");
      var values = new Dictionary<string, string> { { "param1", "val1" }, { "param2", "val2" } };
      var result = url.ExtendQuery(values);
      Assert.That(result, Is.EqualTo(new Uri("http://www.domain.com/test#div?param1=val1&param2=val2")));
    }

    [Test]
    public void Add_to_query_string_dictionary_when_url_contains_query_string_should_add_values_and_keep_original_query_string() {
      Uri url = new Uri("http://www.domain.com/test?param1=val1");
      var values = new Dictionary<string, string> { { "param2", "val2" } };
      var result = url.ExtendQuery(values);
      Assert.That(result, Is.EqualTo(new Uri("http://www.domain.com/test?param1=val1&param2=val2")));
    }

    [Test]
    public void Add_to_query_string_dictionary_when_url_is_relative_contains_no_query_string_should_add_values() {
      Uri url = new Uri("/test", UriKind.Relative);
      var values = new Dictionary<string, string> { { "param1", "val1" }, { "param2", "val2" } };
      var result = url.ExtendQuery(values);
      Assert.That(result, Is.EqualTo(new Uri("/test?param1=val1&param2=val2", UriKind.Relative)));
    }

    [Test]
    public void Add_to_query_string_dictionary_when_url_is_relative_and_contains_query_string_should_add_values_and_keep_original_query_string() {
      Uri url = new Uri("/test?param1=val1", UriKind.Relative);
      var values = new Dictionary<string, string> { { "param2", "val2" } };
      var result = url.ExtendQuery(values);
      Assert.That(result, Is.EqualTo(new Uri("/test?param1=val1&param2=val2", UriKind.Relative)));
    }

    [Test]
    public void Add_to_query_string_dictionary_when_url_is_relative_and_contains_query_string_with_existing_value_should_add_new_values_and_update_existing_ones() {
      Uri url = new Uri("/test?param1=val1", UriKind.Relative);
      var values = new Dictionary<string, string> { { "param1", "new-value" }, { "param2", "val2" } };
      var result = url.ExtendQuery(values);
      Assert.That(result, Is.EqualTo(new Uri("/test?param1=new-value&param2=val2", UriKind.Relative)));
    }

    [Test]
    public void Add_to_query_string_object_when_url_contains_no_query_string_should_add_values() {
      Uri url = new Uri("http://www.domain.com/test");
      var values = new { param1 = "val1", param2 = "val2" };
      var result = url.ExtendQuery(values);
      Assert.That(result, Is.EqualTo(new Uri("http://www.domain.com/test?param1=val1&param2=val2")));
    }

    [Test]
    public void Add_to_query_string_object_when_url_contains_query_string_should_add_values_and_keep_original_query_string() {
      Uri url = new Uri("http://www.domain.com/test?param1=val1");
      var values = new { param2 = "val2" };
      var result = url.ExtendQuery(values);
      Assert.That(result, Is.EqualTo(new Uri("http://www.domain.com/test?param1=val1&param2=val2")));
    }

    [Test]
    public void Add_to_query_string_object_when_url_is_relative_contains_no_query_string_should_add_values() {
      Uri url = new Uri("/test", UriKind.Relative);
      var values = new { param1 = "val1", param2 = "val2" };
      var result = url.ExtendQuery(values);
      Assert.That(result, Is.EqualTo(new Uri("/test?param1=val1&param2=val2", UriKind.Relative)));
    }

    [Test]
    public void Add_to_query_string_object_when_url_is_relative_and_contains_query_string_should_add_values_and_keep_original_query_string() {
      Uri url = new Uri("/test?param1=val1", UriKind.Relative);
      var values = new { param2 = "val2" };
      var result = url.ExtendQuery(values);
      Assert.That(result, Is.EqualTo(new Uri("/test?param1=val1&param2=val2", UriKind.Relative)));
    }

    [Test]
    public void Add_to_query_string_object_when_url_is_relative_and_contains_query_string_with_existing_value_should_add_new_values_and_update_existing_ones() {
      Uri url = new Uri("/test?param1=val1", UriKind.Relative);
      var values = new { param1 = "new-value", param2 = "val2" };
      var result = url.ExtendQuery(values);
      Assert.That(result, Is.EqualTo(new Uri("/test?param1=new-value&param2=val2", UriKind.Relative)));
    }
  } 
```

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2018-04-16T09:50:37.273

请注意，您可以添加`Microsoft.AspNetCore.WebUtilities`来自 Microsoft 的 nuget 包，然后使用它来将值附加到查询字符串：

```
QueryHelpers.AddQueryString(longurl, "action", "login1")
QueryHelpers.AddQueryString(longurl, new Dictionary<string, string> { { "action", "login1" }, { "attempts", "11" } }); 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2015-08-28T03:56:08.000

以下解决方案适用于 ASP.NET 5 (vNext)，它使用 QueryHelpers 类来构建带有参数的 URI。

```
 public Uri GetUri()
    {
        var location = _config.Get("http://iberia.com");
        Dictionary<string, string> values = GetDictionaryParameters();

        var uri = Microsoft.AspNetCore.WebUtilities.QueryHelpers.AddQueryString(location, values);
        return new Uri(uri);
    }

    private Dictionary<string,string> GetDictionaryParameters()
    {
        Dictionary<string, string> values = new Dictionary<string, string>
        {
            { "param1", "value1" },
            { "param2", "value2"},
            { "param3", "value3"}
        };
        return values;
    } 
```

结果 URI 将具有`http://iberia.com?param1=value1&param2=value2&param3=value3`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-01-01T18:09:01.550

这更令人沮丧，因为现在（.net 5）MS 已经将他们的许多（所有）方法标记`Uri`为过时的字符串而不是 a。

无论如何，操纵 relative `Uri`s 的更好方法可能是给它想要的东西：

```
var requestUri = new Uri("x://x").MakeRelativeUri(
   new UriBuilder("x://x") { Path = path, Query = query }.Uri); 
```

您可以使用其他答案来实际构建查询字符串。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-03-07T12:15:29.867

我喜欢 Bjorn 的回答，但是他提供的解决方案具有误导性，因为该方法会更新现有参数，而不是在不存在时添加它。为了使它更安全，我在下面对其进行了调整。

```
public static class UriExtensions
{
    /// <summary>
    /// Adds or Updates the specified parameter to the Query String.
    /// </summary>
    /// <param name="url"></param>
    /// <param name="paramName">Name of the parameter to add.</param>
    /// <param name="paramValue">Value for the parameter to add.</param>
    /// <returns>Url with added parameter.</returns>
    public static Uri AddOrUpdateParameter(this Uri url, string paramName, string paramValue)
    {
        var uriBuilder = new UriBuilder(url);
        var query = HttpUtility.ParseQueryString(uriBuilder.Query);

        if (query.AllKeys.Contains(paramName))
        {
            query[paramName] = paramValue;
        }
        else
        {
            query.Add(paramName, paramValue);
        }
        uriBuilder.Query = query.ToString();

        return uriBuilder.Uri;
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-03-17T11:38:37.970

## *所有 URL 查询字符串编辑问题的终结*

经过大量的辛勤工作和摆弄 Uri 类和其他解决方案，这是我的*字符串*扩展方法来解决我的问题。

```
using System;
using System.Collections.Specialized;
using System.Linq;
using System.Web;

public static class StringExtensions
{
    public static string AddToQueryString(this string url, params object[] keysAndValues)
    {
        return UpdateQueryString(url, q =>
        {
            for (var i = 0; i < keysAndValues.Length; i += 2)
            {
                q.Set(keysAndValues[i].ToString(), keysAndValues[i + 1].ToString());
            }
        });
    }

    public static string RemoveFromQueryString(this string url, params string[] keys)
    {
        return UpdateQueryString(url, q =>
        {
            foreach (var key in keys)
            {
                q.Remove(key);
            }
        });
    }

    public static string UpdateQueryString(string url, Action<NameValueCollection> func)
    {
        var urlWithoutQueryString = url.Contains('?') ? url.Substring(0, url.IndexOf('?')) : url;
        var queryString = url.Contains('?') ? url.Substring(url.IndexOf('?')) : null;
        var query = HttpUtility.ParseQueryString(queryString ?? string.Empty);

        func(query);

        return urlWithoutQueryString + (query.Count > 0 ? "?" : string.Empty) + query;
    }
} 
```

# mongodb - 在 MongoDB 或 Hadoop 中存储大日志以进行分析与在文件管理器上存储 Zip 文件的优势？

> ID：14517806
> 
> 赞同：2
> 
> 时间：2013-01-25T08:11:19.170
> 
> 标签：mongodb, logging, hadoop, analytics

目前，我们存储了一个文件管理器的大量日志（30G/天 x3 机器 = av. 100G）。日志被压缩。

搜索该日志的实际工具是搜索相应的日志（根据时间范围），将它们复制到本地，解压缩它们，然后在 xml 中搜索信息并显示。

我们正在研究制作类似 spunk 的工具来搜索该日志的可能性（它是消息总线的输出：发送到其他系统的 xml 消息）。

依靠类似mongo的数据库而不是直接查询压缩的日志文件有什么好处？我们还可以索引数据库中的一些数据，并让程序搜索目标 zip 文件……是什么带来了 mongodb……或 hadoop 更多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T17:36:15.443

我曾在 MongoDB 上工作，目前在 Hadoop 上工作，因此我可以列出一些您可能会感兴趣的差异。

1.  MongoDB 将需要您将文件存储为文档（而不是原始文本数据）。HDFS 可以将其存储为文件，并允许您使用自定义 MapReduce 程序来处理它们。
2.  MongoDB 将要求您选择一个好的分片键，以便在集群中有效地分配负载。由于您正在存储日志文件，因此可能会很困难。
3.  如果您可以将格式化的日志存储在 MongoDB 中的文档中，它将允许您在大量日志中以极低的延迟查询数据。我的上一个项目有基于 MongoDB 的内置日志记录，与原始文本日志的 MapReduce 分析相比，分析速度非常快。但是必须从头开始进行日志记录。
4.  在 Hadoop 中，您拥有 Hive、HBase 和 Impala 等技术，它们将帮助您分析文本格式日志，但需要牢记 MapReduce 的延迟（尽管有一些方法可以优化延迟）。

总结一下：如果您可以在整个堆栈中实现基于 mongoDB 的日志记录，请选择 MongoDB，但如果您已经拥有文本格式的日志，则选择 Hadoop。如果您可以将您的 XML 数据实时转换为 MongoDB 文档，那么您可以获得一个非常有效的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T10:29:35.580

我对 Hadoop 的了解有限，所以我将专注于 MongoDB。

您可以将每个日志条目存储在 MongoDB 中。当您在时间字段上创建索引时，您可以轻松获取特定的时间范围。[MongoDB 将在 2.4 版中支持全文搜索，](http://blog.mongodb.org/post/40513621310/mongodb-text-search-experimental-feature-in-mongodb)这对于您的用例来说肯定是一个有趣的功能，但它还没有准备好生产。在那之前，搜索子字符串是一个非常缓慢的操作。因此，您必须将与您的搜索相关的 XML 树转换为 mongodb 对象，并为搜索最多的字段创建索引。

但是您应该知道，将日志存储在 MongoDB 中意味着**您需要更多的硬盘空间**。MongoDB 不压缩有效负载数据并且还增加了一些自己的元数据开销，因此它需要比解压缩日志更多的磁盘空间。此外，当您使用新的文本搜索功能时，它会占用更多的磁盘空间。在我看到的一次演示中，文本索引是它所索引的数据的两倍。当然，这个功能仍在开发中，但我不会打赌它在最终版本中会少很多。

# java - C# 中的“扩展”和“实现”Java 等效项

> ID：14517808
> 
> 赞同：62
> 
> 时间：2013-01-25T08:11:43.960
> 
> 标签：java, c#

以下 Java 语句的 C# 等效语法是什么：

```
public class Lion extends Animal implements Diurnal()
{
} 
```

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-01-25T08:12:39.667

*   动物是基类
*   昼夜是一个界面

继承可以这样声明。

```
public class Lion : Animal, Diurnal
{

} 
```

在`C#`中，可以继承一个基类，也可以是多个接口。

还有一个提示，如果您使用`Interface`C# 制作，请在其前面加上`I`. 例如`IDiurnal`

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-25T08:13:28.017

```
public class Lion : Animal, // base class must go first
                    Diurnal // then interface(s) if any
{
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-01-25T08:13:06.500

看起来像这样：

```
public class Lion :Animal, Diurnal {
} 
```

哪里`Animal`是*类*，哪里`Diurnal`是*接口*。

请注意，根据 C# 命名约定，*接口*名称前必须有“I”，所以最终它*应该*如下所示：

```
public class Lion :Animal, IDiurnal {
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-25T08:13:52.343

在 C# 中，扩展类和实现接口有统一的语法。

```
public class Lion : Animal, Diurnal {

} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-06-17T12:24:37.190

你需要写下第一个基类，比如（`Animal`是基类），最近的接口比如 as（`Diurnal`是一个接口）

```
public class Lion : Animal, Diurnal {} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-25T08:16:08.093

: 后面的名字是扩展类，后面是实现的接口

```
public class Lion : Animal, Diurnal
{
} 
```

c#不允许多类扩展，但可以实现很多接口

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-05-13T10:22:54.673

```
public class Lion : Animal, Diurnal
{
}

interface Diurnal
{
}

class Animal
{
} 
```

类`Animal`是由`Lion`类继承的。`Diurnal`类是接口。

# laravel - Laravel flash session 存储两次数据

> ID：14517809
> 
> 赞同：3
> 
> 时间：2013-01-25T08:11:46.360
> 
> 标签：laravel

这让人头疼！根据我对 laravel 的会话 flash 方法的理解，一旦设置然后调用，它将被销毁......

```
Session::flash( 'key', $data ); 
```

某处下线

```
{{ Session::get( 'key' ) }} 
```

我正在使用它进行表单验证。现在当表单没有验证时，应用程序显示错误，如果我修改表单并再次发布，数据库更新，详细信息显示正确，但错误再次出现！如果我发布未验证的表单也是如此，它会显示错误，但如果我然后单击同一页面的导航链接，它会再次显示！

有人遇到过这个吗？

问候

卢克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-29T18:32:25.137

当我在 Controller@update 方法中执行`return view()`/`return View::Make`时，我遇到过这个问题。`return redirect()->route()`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-04-03T09:19:35.263

从 Laravel 5.1 开始，你可以使用[now()](https://laravel.com/api/5.1/Illuminate/Session/Store.html#method_now)方法，它只会影响当前的请求：

```
Session::now('key', 'message'); 
```

或者

```
session()->now('key', 'message'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-25T10:37:47.930

在 laravel 文档中：

> **flash 方法在会话中存储一个项目，该项目将在下一次请求后**过期。它对于存储状态或错误消息等临时数据很有用。

这意味着，它在当前和下一个请求中都可用。如果您访问它，它不会自动刷新。为此，请使用`Session::flush('key');`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-01-25T18:43:25.937

会话 Flash 保留 2 个请求的会话数据，因为它是在重定向期间使用的。

但是，我遇到了一个用例，我确实想在下一个视图中仅对 1 个请求使用 flash，并找到了一种简单的方法，即从会话中提取而不是获取它。`Session::pull()`获取会话数据并从会话中删除。

```
@if (Session::has('message'))
   <div class="alert alert-message">{{Session::pull('message'}}</div>
@endif 
```

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-26T19:36:12.587

您的代码可能存在其他问题，如果您可以分享您的代码，它将帮助我们更好地了解这个问题。

您可以使用以下代码片段将错误消息闪烁到您的 laravel 刀片模板。

```
@if (Session::has('message'))

    <div class="alert alert-success">{{Session::get('message')}}</div>

@endif 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-22T08:52:40.057

我曾经有过类似的问题，因为我`Session::reflash()`在我的控制器中使用过。

确保您`Session::reflash()`的控制器或应用程序中没有任何地方，因为它会刷新整个会话...使用示例：`Session::keep(array('username', 'email'));`仅重新刷新 Flash 数据的子集

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-18T21:47:13.710

该`flash`方法用于存储下一个请求的数据。理想情况下，将数据刷新到会话后，您应该重定向到新路由。（这是公认的答案所暗示的。）

但是，如果您没有重定向，则可以`forget`在刀片模板中显示会话后调用该方法：

```
{{ session()->flash('key') }}

@php
    session()->forget('flash-info');
@endphp 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-07-31T10:25:26.943

当您创建视图（而不是重定向）时，一种简单的闪现消息的方法是：

```
Session::flash($key, $value);
Session::push('flash.old', $key); 
```

参考[这里。](https://stackoverflow.com/questions/24579580/laravel-session-flash-persists-for-2-requests/31743850#31743850)

# asp.net - 如何在gridview的占位符内找到动态控件（单选按钮）

> ID：14517812
> 
> 赞同：1
> 
> 时间：2013-01-25T08:11:56.963
> 
> 标签：asp.net, gridview, radio-button

我有 4 列的网格视图；在第 1 列中，我添加了一个占位符，其他 3 列是绑定字段。在第 1 列中，我使用 html 代码动态添加单选按钮，通过该代码我只能选择一个单选按钮。它运行良好，但问题是当单击gridview 之外的按钮时，我无法找到单选按钮控件。

请帮忙，我已经被这个问题困了4天了。

先感谢您。

我使用了以下代码

.aspx 文件

```
<form id="form1" runat="server">

            <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False"
            BackColor="White" BorderColor="#999999" BorderStyle="Solid" BorderWidth="1px" 
            CellPadding="3" ForeColor="Black" GridLines="Vertical" 
                onrowdatabound="GridView1_RowDataBound" 
                >
            <AlternatingRowStyle BackColor="#CCCCCC" />
        <Columns>
        <asp:TemplateField HeaderText="Select">
        <ItemTemplate>

        <asp:PlaceHolder ID="ph" runat="server"></asp:PlaceHolder>
        </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField  HeaderText="FIRST NAME" DataField="FNAME"/>
        <asp:BoundField  HeaderText="LAST NAME" DataField="LNAME"/>
        <asp:BoundField  HeaderText="EMAIL" DataField="EMAIL"/>
        <asp:BoundField  HeaderText="AGE" DataField="AGE"/>
        </Columns>
            <FooterStyle BackColor="#CCCCCC" />
            <HeaderStyle BackColor="Black" Font-Bold="True" ForeColor="White" />
            <PagerStyle BackColor="#999999" ForeColor="Black" HorizontalAlign="Center" />
            <SelectedRowStyle BackColor="#000099" Font-Bold="True" ForeColor="White" />
            <SortedAscendingCellStyle BackColor="#F1F1F1" />
            <SortedAscendingHeaderStyle BackColor="#808080" />
            <SortedDescendingCellStyle BackColor="#CAC9C9" />
            <SortedDescendingHeaderStyle BackColor="#383838" />
        </asp:GridView>
        <asp:Button  ID="btnSave" Text="Save" runat="server" onclick="btnSave_Click1"  />

    </form> 
```

代码隐藏文件

```
 protected void GridView1_RowCreated(object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowIndex != -1 && e.Row.DataItem != null)
        {
            PlaceHolder holder = (PlaceHolder)e.Row.FindControl("ph");
            RadioButton rb = new RadioButton();
            rb.ID = "rbSelect";
            holder.Controls.Add(rb);
        }
    }

 protected void btnSave_Click1(object sender, EventArgs e)
    {
        for (int i = 0; i < GridView1.Rows.Count; i++)
        {

            PlaceHolder holder = (PlaceHolder)GridView1.Rows[i].Cells[0].FindControl("ph");
            RadioButton rbtn = holder.FindControl("rb") as RadioButton;
            if (rbtn.Checked == true)
            {
                Response.Write("<Script>alert('Radiocheck')</Script>");
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:18:16.787

根本不清楚为什么需要创建动态`RadioButton`s。在这种情况下，如果没有任何好处，这会使一切变得更加困难（即使嵌套`Repeater`或`GridView`会更容易）。

然而，

您不应该在其中创建动态控件，`RowDataBound`因为只有在数据`GridView`绑定时才会触发该控件。但是由于默认情况下`ViewState`已启用，因此您不会`DataBind`在回发时使用它。另一方面，必须**在每次回**发时重新创建动态控件。

因此，创建它们在`RowCreated`每次回发时触发。但请注意，您（当然）没有`DataItem`，因为它`null`处于此阶段（即使网格将是数据绑定的）。

因此，您应该在其中创建动态控件，`RowCreated`但从`RowDataBound`您也可以访问它们的位置加载它们（fe via `FindControl`）。

但是不要像添加 html-control 那样`<input type='radio'`创建并添加一个`RadioButton`带有 id 的控件。否则，您以后将无法访问它，因为它不是服务器控件，所以`holder.FindControl("rb")`也会如此。`null`

这是完整的修改代码：

```
protected void GridView1_RowCreated(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        PlaceHolder holder = (PlaceHolder)e.Row.FindControl("ph");
        var rb = new RadioButton();
        rb.ID = "RbSample";
        rb.Text = "rb";
        holder.Controls.Add(rb);
    }
}

protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        var row = ((DataRowView)e.Row.DataItem).Row;
        var rb = (RadioButton)e.Row.FindControl("RbSample");
        rb.Checked = row.Field<bool>("SampleActive");
    }
}

protected void btnSave_Click1(object sender, EventArgs e)
{
    for (int i = 0; i < GridView1.Rows.Count; i++)
    {
        RadioButton rbtn = (RadioButton)GridView1.Rows[i].FindControl("RbSample");
        if (rbtn.Checked)
        {
            ScriptManager.RegisterClientScriptBlock(this, this.GetType(), "alert", "alert('Radiocheck');", true);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:23:03.510

看起来您正在使用输入的“值”执行 FindControl，但没有使用控件的 ASP.NET ID，因为它没有。因为它不是 ASP.NET 控件，所以您无法使用 FindControl 找到它。

我也不知道你是否可以遍历 holder 的 Controls 属性，因为它是一个普通的 html 控件。但是您可以尝试在 FindControl 行上放置一个断点并探索 holder 的 Controls 属性。

# android - 收到 WIFI_STATE_ENABLED 后，WifiInfo SSID 直接为空

> ID：14517813
> 
> 赞同：2
> 
> 时间：2013-01-25T08:12:12.307
> 
> 标签：android, android-intent, android-wifi

当我的 BroadcastReceiver 直接接收到 WIFI_STATE_ENABLED 之后，WifiInfo 的 SSID 值为空。但是，当我添加 Thread.Sleep() 800 毫秒时，它会起作用。连接 wifi 和 WifiInfo 对象实际获取信息的事件似乎存在延迟。下面的代码片段有效：

```
 else if (intent.getAction().equals(WifiManager.WIFI_STATE_CHANGED_ACTION)) {
        int extraWifiState = intent.getIntExtra(WifiManager.EXTRA_WIFI_STATE, WifiManager.WIFI_STATE_UNKNOWN);
        switch (extraWifiState) {
        case WifiManager.WIFI_STATE_ENABLED:
            // The SSID is null just after connection is established. This
            // event seems over eager.
            try {
                Thread.sleep(800, 0);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            if (!wifiFunctions.connectedToGConnectHotspot()) {
                removeConnectedNotification();
            } else {
                settings.setLastNotificationTime(System.currentTimeMillis());
                notifyUserOfAvailableHotspot(true);
                return;
            }
            break; 
```

这行得通，但它非常狡猾。如果在某些设备上需要更长的时间怎么办？是否有另一种方法来获取连接的 SSID。我查看了 EXTRA_NETWORK_INFO，但它从 API 级别 14 开始已被弃用，而且似乎也不包含 SSID。是否有另一种方法可以在不引入人工等待的情况下获取 SSID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:19:13.033

`WIFI_STATE_ENABLED`如果您要获取 SSID，则不是您要捕获的操作。您可能更感兴趣的是[NETWORK_STATE_CHANGED](http://developer.android.com/reference/android/net/wifi/WifiManager.html#NETWORK_STATE_CHANGED_ACTION)。

WIFI_STATE_ENABLED 发生在手机上的 WiFi 设备打开时——它不一定在那个时候连接到任何地方。

编辑：正如评论中指出的那样，NETWORK_STATE_CHANGED 也会触发许多其他事件。为了严格监控与 WiFi 接入点的连接，[SUPPLICANT_CONNECTION_CHANGE_ACTION](http://developer.android.com/reference/android/net/wifi/WifiManager.html#SUPPLICANT_CONNECTION_CHANGE_ACTION)是正确的监听动作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T11:16:01.853

我一直在为我正在开发的应用程序使用 SUPPLICANT_CONNECTION_CHANGE_ACTION，发现它在启用 Wifi 然后连接时效果很好。

问题在于，在 Wifi 保持启用状态时更改 Wifi 网络时似乎永远不会触发它。在这种情况下似乎发生的唯一操作是 NETWORK_STATE_CHANGED（3 次，前 2 次将 WifiInfo 设为空）。

我只尝试了 1 台设备（Galaxy S3 4.1），所以我不知道这有多普遍，但似乎 SUPPLICANT_CONNECTION_CHANGE_ACTION 应该适用于此。另一个警告是我在同一个接入点（2.4 和 5.2）上的 2 个 SSID 之间切换，所以也许 Android 实际上并没有将其视为网络更改。

编辑：使用 Galaxy S3 作为第二个 Wifi 热点，使用运行 CyanogenMod 10 的触摸板进行测试。在 Wifi 保持启用状态时切换 SSID（和接入点）时，SUPPLICANT_CONNECTION_CHANGE_ACTION 不会触发。该事件似乎仅在由于启用 Wifi 而建立连接时发生。这实际上看起来像一个错误 - 我有一个旧的 Android 2.2 Legend ，所以我也会尝试。不幸的是，这些都不能在虚拟设备上测试。

# dart - Dart 中的子 Web 组件

> ID：14517814
> 
> 赞同：1
> 
> 时间：2013-01-25T08:12:33.233
> 
> 标签：dart, dart-webui

是否可以在中制作子 Web 组件`Dart`？

比如说，我有一个`x-chatwindow`自定义元素，我希望它有一个`x-textarea`和`x-textinput`子组件。

一个虚构的实现是：

```
<x-chatwindow>
    <x-textarea/>
    <x-textinput/>
</x-chatwindow> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T16:27:50.097

Is there a specific problem you are facing?

You can use the [`<content></content>`](http://www.dartlang.org/articles/dart-web-components/#composition) inside your `ChatWindowComponent` template:

```
<element name="x-chat-window" constructor="ChatWindowComponent" extends="div">
  <template>
    <content></content>
  </template>
</element> 
```

Then the page where you use them:

```
<!DOCTYPE html>
<html>
  <head>
    <link rel="components" href="components/chat_window.html" />
    <link rel="components" href="components/text_area.html" />
    <link rel="components" href="components/text_input.html" />
  </head>
  <body>
    <x-chat-window>
      <x-text-area></x-text-area>
      <x-text-input></x-text-input>
    </x-chat-window>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T17:19:32.313

在“Dart M3”、“Dart Editor build 20259”和“web_ui 0.4.2 + 5”上测试的答案

除了 Kai Sellgren 的回答，WebComponents 可以隐藏在其他 WebComponents 中。在“xchatwindow.html”内的情况下，文本区域和文本输入可以链接为；

```
<!DOCTYPE html>

<head>
  <link rel="components" href="components/xtextarea.html">
  <link rel="components" href="components/xtextinput.html">
</head>
<body>
  <element name="x-chat-window" constructor="FormComponent" extends="div">

... 
```

# ruby-on-rails - 设计 2.2 + Google OAuth2 未定义方法 `serialize_into_session'

> ID：14517819
> 
> 赞同：0
> 
> 时间：2013-01-25T08:12:47.890
> 
> 标签：ruby-on-rails, devise, oauth-2.0

我得到了设计设置并为我的应用程序工作。当我添加

`gem omniauth-google-oauth2`

`sign_in_and_redirect`我在控制器方法中遇到错误。

**错误：**

```
NoMethodError (undefined method `serialize_into_session' for String:Class):
  app/controllers/users/omniauth_callbacks_controller.rb:9:in `google_oauth2' 
```

**代码：**

omn​​iauth_callbacks_controller.rb

```
def google_oauth2
    @user = User.find_for_google_oauth2(request.env["omniauth.auth"], current_user)
    if @user.persisted?
      flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => "Google"
      sign_in_and_redirect sites_path, :event => :authentication
    else
      session["devise.google_data"] = request.env["omniauth.auth"]
      redirect_to new_user_registration_url
    end
end 
```

用户.rb

```
def self.find_for_google_oauth2(access_token, signed_in_resource=nil)
    data = access_token.info
    user = User.where(:email => data["email"]).first

    unless user
      user = User.create(email: data["email"],
                         password: Devise.friendly_token[0, 20]
      )
    end
    user
end 
```

设计.rb

```
require "omniauth-google-oauth2"
config.omniauth :google_oauth2, 'CLIENT_ID', 'CLIENT_SECRET', {access_type: "offline", approval_prompt: ""} 
```

如果我遗漏了什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:16:26.350

您的配置很好，但我在这种情况下使用`omniauth-google-oauth2`这个 gem [https://rubygems.org/gems/omniauth-openid](https://rubygems.org/gems/omniauth-openid)。

添加到您`/config/initializer/devise.rb`的下一个：

```
require 'openid/store/filesystem'
config.omniauth :open_id, :store => OpenID::Store::Filesystem.new('/tmp'), :name => 'google', :identifier => 'https://www.google.com/accounts/o8/id', :require => 'omniauth-openid' 
```

在你`omniauth_callbacks_controller.rb`改变方法`User.find_for_google_oauth2...`之后`User.find_for_open_id...`

在您的`user`模型上更改`self.find_for_google_oauth2`by `self.find_for_open_id`。

**请尝试使用此宝石！**

# javascript - 这是在javascript中返回另一个函数的好方法吗？

> ID：14517832
> 
> 赞同：0
> 
> 时间：2013-01-25T08:13:38.530
> 
> 标签：javascript, function, return

当阅读一些 javascript 源代码时，我发现以下代码：

```
var fullname = function(){
     var shorts = { pos: "position", w: "width", h: "height", l: "left", t: "top" };
        return function(name){
          return shorts[name] || name;
      }
 }(); 
```

返回另一个函数是更有效还是其他原因？为什么不使用：

```
 function fullname(name){
         var shorts = { pos: "position", w: "width", h: "height", l: "left", t: "top" };
         return shorts[name] || name; 
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:18:59.220

这相当于

```
var shorts = { pos: "position", w: "width", h: "height", l: "left", t: "top" };

function fullname(name){
      return shorts[name] || name;
} 
```

......它的作用。但

```
var fullname = function(){
     var shorts = { pos: "position", w: "width", h: "height", l: "left", t: "top" };
        return function(name){
          return shorts[name] || name;
      }
 }(); 
```

... 确保 hash/object`shorts`是 *仅对函数**私有**`fullname`的* 。

所以回答你的问题，为什么不

```
 function fullname(name){
         var shorts = { pos: "position", w: "width", h: "height", l: "left", t: "top" };
         return shorts[name] || name; 
  } 
```

Here'`shorts`隐藏在里面`fullname`，但正如 Dogbert 指出的那样，它更慢，因为*在每次调用时都会创建*`shorts`散列。

 *但这提供了两全其美：

```
var fullname = function(){
     var shorts = { pos: "position", w: "width", h: "height", l: "left", t: "top" };
        return function(name){
          return shorts[name] || name;
      }
 }(); 
```

`shorts` 同时保持*私有*，只实例化*一次*，因此性能也会很好。`fullname``shorts`

 *这就是他们所说的*IIFE*（立即调用函数表达式）。这个想法是在函数`A`内部创建一个函数，并 在函数的范围内`B`声明使用的变量，以便只有函数可以看到它们。`A``B``A`

```
 var B = function(){
    // this is B
    // 
    val foo = {x:1}; // this is ONLY for A

    val A = function(arg0) {
       // do something with arg0, foo, and whatever
       // and maybe return something
    };

    return A;
 };

 val A = B(); 
```

如您所见，这与

```
 var A = (function(){
    // this is in 'B'
    // 
    val foo = {x:1}; // this is ONLY for A

    return function(arg0) { // this is in A
       // do something with arg0, foo, and whatever
       // and maybe return something
    };

 })(/*calling B to get A! */); 
```

在功能上，这与

```
 val foo = {x:1};  // foo is visible OUTSIDE foo!

 val A = function(arg0) {
    // do something with arg0, foo, and whatever
    // and maybe return something**strong text**
 }; 
```

~~我没有看到任何其他用途。~~ 所以这只是保持变量私有的一种方式，**同时又**不会失去性能。

（请参阅[JavaScript 中的 (function() { } )() 构造是什么？](https://stackoverflow.com/questions/8228281/what-is-this-construct-in-javascript)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:15:41.027

在另一个函数中返回一个函数会导致创建一个闭包。在这种情况下，内部函数将可以访问外部函数范围，其中包括 object `shorts`。**

# db2 - 为什么子查询在 DB2 的 ON 子句中不起作用

> ID：14517836
> 
> 赞同：1
> 
> 时间：2013-01-25T08:13:54.243
> 
> 标签：db2, subquery, on-clause

为什么这个简单的查询在 oracle 中可以正常工作，但在 DB2 中却不行：

```
select * 
from 
sysibm.dual d1 
left join sysibm.dual d2 on 1=1 and exists (select 1 from sysibm.dual) 
```

将涉及子查询的条件移动到 where 子句可能会有所帮助，但这会将外部联接限制为内部联接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T14:24:13.437

当我尝试运行您的查询时，我收到一个[`-338`错误](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.messages.sql.doc/doc/msql00338n.html)，根据信息中心（请参阅链接），该`ON`子句有以下限制：

> 由于以下原因之一，与 JOIN 运算符或 MERGE 语句关联的 ON 子句无效。
> 
> ```
> * The ON clause cannot include any subqueries.
> * Column references in an ON clause must only reference columns
>   of tables that are in the scope of the ON clause.
> * Scalar fullselects are not allowed in the expressions of an ON clause.
> * A function referenced in an ON clause of a full outer join 
>   must be deterministic and have no external action.
> * A dereference operation (->) cannot be used.
> * A SQL function or SQL method cannot be used.
> * The ON clause cannot include an XMLQUERY or XMLEXISTS expression. 
> ```

我不确定您的查询是否可行，但您认为也许您可以重新编写如下内容：

```
select * 
from 
sysibm.dual d1 
left join (
    SELECT dl.*,
    CASE WHEN EXISTS (SELECT 1 FROM sysibm.dual)
         THEN 1
         ELSE 0
    END AS jn
    FROM sysibm.dual dl
) D2
  on 1=1 and 1=d2.jn 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T07:56:59.657

这适用于 DB2 V10.1！没有安装补丁包。

# ios - 无法删除图片上方的黑线

> ID：14517837
> 
> 赞同：1
> 
> 时间：2013-01-25T08:13:55.007
> 
> 标签：ios, objective-c, cocoa-touch

我正在使用`[BJImageCropper]`[1](https://github.com/barrettj/BJImageCropper)并试图弄清楚如何消除裁剪区域周围的正方形效果。我想在裁剪区域周围有一个完整的黑色 alpha 区域。听起来很简单，所以我在上面的项目中唯一改变的就是改变`alpha to 0.75`了`BJImageCropper.m:`

```
- (UIView*)newEdgeView {
    UIView *view = [[UIView alloc] init];
    view.backgroundColor = [UIColor blackColor];
    view.alpha = 0.75;    //(was 0.5)
    [self.imageView addSubview:view];    
    return view;
} 
```

我的问题是在裁剪区域的右上角有一条黑线跟随我。无论我在代码中更改了什么 - 我都无法摆脱。

![](../Images/7adb57597929bb0b91c9ad6dfeaa1cc7.png)

# multithreading - Web 应用程序多次调用可执行文件

> ID：14517838
> 
> 赞同：0
> 
> 时间：2013-01-25T08:14:02.273
> 
> 标签：multithreading, web-applications, executable

抱歉，但我完全是 web 应用程序的菜鸟，我只是想知道如果我的 web 应用程序调用一个外部二进制可执行文件会需要一些时间来处理输入文件，并且多个用户尝试调用它会发生什么同时，或者当一个用户在它仍在运行前一个进程时尝试调用它？

我认为这与线程有关，但我不确定这如何适用于外部可执行文件......如果有人可以为我提供资源来了解它是如何工作的，那也很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:17:24.897

当一个进程启动时，它与其他进程是隔离的，同一个进程可以启动多次，唯一的限制是 CPU 和内存利用率。如果写入共享文件，您必须使用一些并发访问保护，但如果您进行数据库访问，则数据库引擎会处理并发访问，因此这不是问题。

# c# - 如何将带有数据库连接的 Windows 窗体项目部署到其他机器？

> ID：14517839
> 
> 赞同：0
> 
> 时间：2013-01-25T08:14:12.310
> 
> 标签：c#, winforms, sql-server-2008, ado.net

我有一个小的演示 windows 窗体应用程序，它有 2 个窗体。

1.  在第一个表单中输入名称，这会将名称添加到数据库中的表中。使用的后端是 SQL Server 2008。

2.  成功进入数据库后，提示用户进入第二种形式，基本上是一个演示计算器。

我的问题是如何将这个项目部署到其他机器上。Wana 创建一个正常的可执行文件，在另一台机器上。

通过使用 VS 2008 的设置和部署向导，我能够部署另一个没有 SQL 数据库连接的 windows 窗体应用程序。

另外，另一台机器是否必须具有某些先决条件，例如其中是否存在 SQL 服务器？

我用谷歌搜索...找到了一些 MSDN 链接，但找不到有意义的结果。

对此场景的任何帮助或外部指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:15:45.373

您可以尝试将设置项目添加到您的解决方案中，并依靠它带来的自动依赖检测来为您的应用程序构建一个 MSI 设置工具包，该工具包将捆绑任何依赖关系。虽然不确定SQL Server...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:24:45.927

由于它需要一个数据库来执行，因此您必须为其提供一个 sql server 实例。这可以是下面提到的任何一个

1.  网络上的专用 SQL 服务器
2.  SQLServer 安装在网络上的任何一台机器上，并正确配置为接受来自网络上其他机器的连接
3.  如果第二台计算机不在网络上或程序独立于网络，则在第二台计算机上安装 SQL Server 本地实例。

AFAIK，对于部署，您可以复制 exe（在正确的连接字符串配置后构建），或者您可以依赖安装项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T08:29:19.377

您可以`ConfigurationManager`在 app.config 中使用和设置连接字符串来获取连接字符串。从 app.config 示例获取连接字符串：

```
string connStr = ConfigurationManager.ConnectionStrings["myConnStr"].ConnectionString; 
```

部署应用程序后，您可以手动更改 app.config 或在您的应用程序中制作简单的表单以设置连接字符串。

# php - mysql - 从 xyz 选择电子邮件，其中 email="%gmail.com"

> ID：14517846
> 
> 赞同：0
> 
> 时间：2013-01-25T08:14:24.710
> 
> 标签：php, mysql, wildcard

有没有办法从数据库中选择具有某些数据的条目？我在数据库中有很多电子邮件地址，但我只想从一个域中选择。甚至可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T08:16:54.630

当然 - 只需使用[LIKE](http://www.w3schools.com/sql/sql_like.asp)运算符。

```
SELECT email FROM Persons
WHERE email LIKE '%gmail.com' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T08:24:53.297

不建议您进行通配符搜索。
这是因为 mysql 无法使用索引来固定选择查询。
特别是您提到数据库中有很多电子邮件。

或者，您可以使用附加字段，`hostname`仅存储主机名。
当然，还要为它建立一个索引。

如果您需要使用 搜索电子邮件`gmail.com`，
则可以进行直接字符串比较

```
SELECT email FROM Persons
WHERE hostname='gmail.com'; 
```

由于直接字符串比较是 mysql 索引的好搭档，因此您的查询将得到优化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T09:05:40.720

正如[ajreal 指出的那样](https://stackoverflow.com/a/14517985/592139)，在一般情况下，MySQL 不能使用索引来优化 LIKE 查询。*然而，在尾随*通配符的特定情况下，其中 only`%`位于模式的最后（实际上是“开始于”查询），优化器可以很好地使用索引加速查询。

因此，如果您要添加一个额外的索引列来存储电子邮件地址，您可以有效地查询

```
SELECT email FROM xyz WHERE reverse_email LIKE 'moc.liamg@%` 
```

查找所有 gmail 地址，或`LIKE 'ku.%`英国域下的所有地址等。您可以让数据库使用触发器为您保持此列的最新状态，因此它不会影响您现有的更新代码

```
CREATE TRIGGER emailinsert BEFORE INSERT ON xyz
FOR EACH ROW SET NEW.reverse_email = REVERSE(NEW.email);

CREATE TRIGGER emailupdate BEFORE UPDATE ON xyz
FOR EACH ROW SET NEW.reverse_email = REVERSE(NEW.email); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T08:16:06.187

你需要使用`LIKE MYSQL CLAUSE`

```
SELECT * FROM email_table WHERE email LIKE "%gmail.com"
```

# .net - c#中的智能感知错误

> ID：14517850
> 
> 赞同：1
> 
> 时间：2013-01-25T08:14:35.803
> 
> 标签：.net, winforms, c#-4.0, intellisense

我正在尝试创建一个安装项目并将现有项目添加到其中。但我可以看到我的新安装项目的 3 个解决方案，如果我尝试运行代码会给我 intelliSense 错误。它是否试图重命名我的应用程序？而且我正在尝试将现有的 2 个项目与 setup.exe 一起添加，我的一个应用程序在 .net 3.5 中编码，其他在 4.0 中编码。这是否会产生任何问题。我在网上阅读了许多示例，但找不到相关代码。

```
 IntelliSense: cannot open source file "C:/project/workspace/code/MyApplication/Application1/Debug/libid:AC0714F2-3D04-11D1-AE7D-00A0C90F26F4.tlh"   c:\project\workspace\code\myaplicationl\application1\stdafx.h   48  2   MyAppliation 
```

我该如何解决这个问题？？？

我正在使用 c# win forms .net 2010

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:22:10.963

尝试在每个项目中编译 StdAfx.cpp 文件。.tlh 文件是由#import 指令（即C++）创建的自动生成的文件。但当然，您需要编译任何具有#import 指令的文件才能生成 .tlh 文件。

# android - 如何在 Android Maps V2 中自定义标记弹出信息窗口的宽度

> ID：14517851
> 
> 赞同：2
> 
> 时间：2013-01-25T08:14:44.837
> 
> 标签：android, maps, google-maps-markers, android-maps-v2

我正在使用 Android Maps V2 并有一组标记，可以在弹出信息窗口中显示自定义内容，点击即可。我使用 InfoWindowAdapter 的自定义实现在自定义布局中提供弹出动态内容。但默认情况下，弹出窗口的宽度将始终占据地图布局的整个宽度。有没有办法自定义它，添加一些横向填充，控制宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:02:50.193

您可以覆盖 getInfoWindow 以返回自定义视图：

```
@Override
public View getInfoWindow(Marker marker) {
} 
```

您可以在 InfoWindowAdapter 构造函数中扩展自定义视图资源 (xml)（例如）：

```
getLayoutInflater().inflate(R.layout.custom_info_window, null); 
```

如果您安装了 google play services sdk，则在 samples/maps 中有一个用于地图的示例应用程序（示例代码的来源）

# ruby-on-rails - 删除 ruby JSON 中的换行符

> ID：14517854
> 
> 赞同：0
> 
> 时间：2013-01-25T08:15:01.590
> 
> 标签：ruby-on-rails, ruby, json

因此，我使用 to_json 将 Ruby on Rails 中的对象序列化为 JSON 格式。产生的输出是：

```
'{"description":"---\n- Nulla adipisci quia consequuntur nam ab et. Eius enim ad aut. Asperiores recusandae\n  labore exercitationem.\n    quos provident.\n","id":295,"name":"Animi enim dolorem soluta eligendi inventore quia distinctio magni.","privacy":0,"updated_at":"2012-11-18T22:24:17Z","user_id":1}' 
```

这需要由 JSON.parse 解析以反序列化客户端 javascript 中的对象。`\n`目前，由于“描述”值中的换行符，这失败了。我尝试使用`gsub("\n","\\n")`和其他排列对字符进行适当的编码，但我似乎找不到正确匹配换行符（并且只有换行符）的字符串或正则表达式。我已经尝试过`/\n/`, `'\n'`, `"\n"`, `"\\n"`（由于某种原因，这匹配字符串上的任何地方）`/\\n/`等等，但找不到任何东西。有什么我想念的想法吗？

**更新**：这是我试图用来填充 javascript 对象的代码（javascript，但嵌入了 ruby​​）（它在 ERB 视图中，因此是尖括号）：

```
var object = JSON.parse('<%= raw @object.to_json %>'); 
```

`to_json`在我的目标代码中没有被覆盖，只是标准的 rails 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:45:20.043

```
j = %Q!{"description":"---\n- Nulla adipisci quia consequuntur nam ab et. Eius enim ad aut. Asperiores recusandae\n  labore exercitationem.\n    quos provident.\n","id":295,"name":"Animi enim dolorem soluta eligendi inventore quia distinctio magni.","privacy":0,"updated_at":"2012-11-18T22:24:17Z","user_id":1}!
j.gsub! /\n/, '\\n'
JSON.parse j
# => {"description"=>"---\n- Nulla adipisci quia consequuntur nam ab et. Eius enim ad aut. Asperiores recusandae\n  labore exercitationem.\n    quos provident.\n", "id"=>295, "name"=>"Animi enim dolorem soluta eligendi inventore quia distinctio magni.", "privacy"=>0, "updated_at"=>"2012-11-18T22:24:17Z", "user_id"=>1} 
```

让您的生活更轻松，当您需要操作转义字符时，请在转义字符周围使用单引号。

* * *

更新后……</p>

```
var object = JSON.parse('<%= raw @object.to_json.gsub(/\n/, %q!\\n!) %>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:44:15.977

你的 JSON 包含一个 YAML 字符串，所以不要浪费时间尝试删除换行符，否则你会让事情变得更糟，或者至少会让你自己做太多的工作。

```
require 'json'
require 'yaml'

json = '{"description":"---\n- Nulla adipisci quia consequuntur nam ab et. Eius enim ad aut. Asperiores recusandae\n  labore exercitationem.\n    quos provident.\n","id":295,"name":"Animi enim dolorem soluta eligendi inventore quia distinctio magni.","privacy":0,"updated_at":"2012-11-18T22:24:17Z","user_id":1}'

hash = JSON[json]
puts YAML.load(hash['description']) 
```

输出：

```
Nulla adipisci quia consequuntur nam ab et. Eius enim ad aut. Asperiores recusandae labore exercitationem. quos provident. 
```

在解码回 Ruby 哈希后，JSON 看起来像：

```
{“描述”=>
  "---\n- Nulla adipisci quia consequuntur nam ab et. Eius enim ad aut. Asperiores recusandae\n labore exercitationem.\n quos provident.\n",
 “身份证”=> 295，
 "name"=>"Animi enim dolorem soluta eligendiinvente quia distinctio magni.",
 “隐私”=>0，
 "updated_at"=>"2012-11-18T22:24:17Z",
 “用户 ID”=>1}

```

要将其转换回真正的 JSON 字符串，而`description`不是编码为 YAML，请使用：

```
hash['description'] = YAML.load(hash['description']).shift
puts hash.to_json 
```

现在看起来像：

```
{"description":"Nulla adipisci quia consequuntur nam ab et. Eius enim ad aut. Asperiores recusandae labore exercitationem. quos provident.","id":295,"name":"Animi enim dolorem soluta eligendi inventore quia distinctio magni.","privacy":0,"updated_at":"2012-11-18T22:24:17Z","user_id":1} 
```

# android - 我的 Android 应用不支持任何设备

> ID：14517857
> 
> 赞同：1
> 
> 时间：2013-01-25T08:15:15.877
> 
> 标签：android, google-play

昨天早上我在 google playstore 上发布了我的应用程序，直到现在它还没有出现在 playstore 中。尽管开发人员控制台上有一条评论说我的应用程序受 0 台设备支持，但我还是发布了它。

我搜索了这个主题，发现它可能是开发者控制台的一个错误。但是现在无法在 Playstore 中找到该应用程序。也许它不是一个错误，它是一个功能:-) 我的应用程序上的某些东西是这个 0 支持设备的原因。我知道该问题还有其他 stackoverflow 主题，但我找不到这些答案的解决方案

这是我的清单，这些 0 设备可能是什么原因

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="de.al.phaba.myApp"
    android:installLocation="preferExternal"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

    <uses-feature android:name="android.hardware.Location.network" />

    <uses-permission android:name="android.permission.READ_LOGS" />

    <application
        android:name="de.al.phaba.myApp.AttachApplication"
        android:icon="@drawable/camera"
        android:label="@string/app_name"
        android:largeHeap="false"
        android:screenOrientation="nosensor"
        android:theme="@style/AppTheme" >
        <activity
            android:name="de.al.phaba.myApp.activies.MainActivity"
            android:label="@string/title_activity_main"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="de.al.phaba.myApp.activies.ActionActivity"
            android:screenOrientation="portrait" />
        <activity
            android:name="de.al.phaba.myApp.activies.FormSelectionActivity"
            android:screenOrientation="portrait" />
        <activity
            android:name="de.al.phaba.myApp.activies.InstanceSelectionActivity"
            android:screenOrientation="portrait" />
        <activity
            android:name="de.al.phaba.myApp.activies.CommentActivity"
            android:screenOrientation="portrait" />
        <activity
            android:name="de.al.phaba.myApp.activies.MultiPhotoSelectActivity"
            android:screenOrientation="portrait" />
        <!-- <activity android:name="de.al.phaba.myApp.activies.Prefs" /> -->
        <activity
            android:name="de.al.phaba.myApp.activies.SettingsActivity"
            android:screenOrientation="portrait" />
        <activity
            android:name="de.al.phaba.myApp.activies.InformationActivity"
            android:screenOrientation="portrait" />

        <service
            android:name="de.al.phaba.myApp.services.AttachService"
            android:icon="@drawable/loading_icon"
            android:label="@string/attachServiceName"
            android:process=":attachServiceBackground" />

        <receiver
            android:name="de.al.phaba.myApp.AttachmentStartupReceiver"
            android:process=":attachServiceBackground" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver>

         <activity
             android:name="org.acra.CrashReportDialog"
             android:excludeFromRecents="true"
             android:finishOnTaskLaunch="true"
             android:launchMode="singleInstance"
             android:theme="@android:style/Theme.Dialog" />

    </application>

    <intent-filter>
        <action android:name="android.intent.action.SEND_MULTIPLE" />

        <category android:name="android.intent.category.DEFAULT" />

        <data android:mimeType="image/*" />
    </intent-filter>

</manifest> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T08:20:21.977

试试这个方法。

我有同样的问题来解决这个问题

我在清单中添加了这么多行。

```
 <supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true"
        android:resizeable="true"   />

    <compatible-screens>

    <!-- small size screens -->
     <screen android:screenSize="small" android:screenDensity="ldpi" />
    <screen android:screenSize="small" android:screenDensity="mdpi" />
    <screen android:screenSize="small" android:screenDensity="hdpi" />
    <screen android:screenSize="small" android:screenDensity="xhdpi" />

    <!--Only hdpi and xhdpi for normal size screens -->
    <screen android:screenSize="normal" android:screenDensity="ldpi" />
    <screen android:screenSize="normal" android:screenDensity="mdpi" />
    <screen android:screenSize="normal" android:screenDensity="hdpi" />
    <screen android:screenSize="normal" android:screenDensity="xhdpi" />

    <!-- all large size screens -->
    <screen android:screenSize="large" android:screenDensity="ldpi" />
    <screen android:screenSize="large" android:screenDensity="mdpi" />
    <screen android:screenSize="large" android:screenDensity="hdpi" />
    <screen android:screenSize="large" android:screenDensity="xhdpi" />

    <!-- all xlarge size screens -->
    <screen android:screenSize="xlarge" android:screenDensity="ldpi" />
    <screen android:screenSize="xlarge" android:screenDensity="mdpi" />
    <screen android:screenSize="xlarge" android:screenDensity="hdpi" />
    <screen android:screenSize="xlarge" android:screenDensity="xhdpi" />

    <!-- Special case for Nexus 7 -->
    <screen android:screenSize="large" android:screenDensity="213" />

    </compatible-screens> 
```

**编辑：** 我检查了这个标签是没有用的，把它从你的清单中删除。

```
<uses-feature android:name="android.hardware.Location.network" /> 
```

# c++ - Qt 和 C++ 类给我一个错误

> ID：14517858
> 
> 赞同：0
> 
> 时间：2013-01-25T08:15:28.293
> 
> 标签：c++, qt

我究竟做错了什么？

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include "fileoperations.h"

namespace Ui {
class MainWindow;
}
class FileOperations;
class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();
    FileOperations FileController;

private slots:
    void on_OpenButton_clicked();
    void on_SaveButton_clicked();
    void on_EncodeButton_clicked();
    void on_DecodeButton_clicked();
private:
    Ui::MainWindow *ui;
};

#endif // MAINWINDOW_H 
```

当我尝试编译和运行程序时，它说：

```
g:\ke\c++ projects\projects\qt\shitlencoder\mainwindow.h:18: error: C2079: 'MainWindow::FileController' uses undefined class 'FileOperations' 
```

这是奇怪的事情，如果我改变'FileOperations FileController;' 到'FileOperations *FileController;'（显然这编译错误，因为你看不到的其余代码没有适应'->'而不是'。'）然后如果我把它改回'FileOperations文件控制器；' 它让我编译一次程序（它工作正常），然后在我下次尝试编译它时出现错误。

我正在使用 Qt 5.0。

文件操作.h：

```
#ifndef FILEOPERATIONS_H
#define FILEOPERATIONS_H
#include "ui_mainwindow.h"
#include "mainwindow.h"
#include <QFileDialog>
#include <string>
#include <time.h>
#include <iostream>
#include <conio.h>
#include <windows.h>
#include <fstream>
using namespace std;
class FileOperations
{
public:
    FileOperations();
    void SetInputFile(QString x);
    void SetOutputFile(QString x);
    void EncryptAndSave(Ui::MainWindow *NUI);
    void DecryptAndSave(Ui::MainWindow *NUI);
    void createid(int id, int id2);
    int GetCFuncion();
    void SetCFuncion(int x);
    long long Get_Size(string filename);
    bool Get_Toobig(string path);
    //DWORD WINAPI Thread_no_1();
private:
    string InputFilename;
    string OutputFilename;
    int CFuncion;//CurrentFunction;
    vector<int> conbyte1;
    vector<int> conbyte2;
    vector<int> opbyte1;
    vector<int> opbyte2;
    vector<int> passwordbytes;
};

#endif // FILEOPERATIONS_H 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T08:23:46.013

我假设，在您的 .cpp 文件中，您正在使用

```
#include "fileoperations.h" 
```

然后，在 中，由于您使用对象作为参数，因此`fileoperations.h`您`mainwindow.h`再次包含了`fileoperations.h`哪个基本上正确的内容。`FileOperations`但是，由于守卫，`class FileOperations`这次编译器看不到，因此`FileOperations`在您的方法中用作参数时是未知的。您需要打破这种依赖关系：

在`fileoperations.h`中，使用前向声明`Ui::MainWindow`并删除`#include "mainwindow.h"`：

```
namespace Ui {
class MainWindow;
}

... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T08:17:20.683

由于您在类中持有一个`FileOperations`对象，因此您需要完整的类声明。这意味着您必须包含标头，您不能像现在这样简单地转发声明该类。如果您只持有一个指针，并且在您的标头中没有任何尝试取消引用该指针的代码，那么前向声明就足够了。

**编辑**你有一个周期性的包含。您包括`mainwindow.h`在`fileoperations.h`. 您可以通过完全删除该包含来修复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T08:25:47.173

您有循环包含问题，mainwindow.h 和 fileoperations.h 相互包含，请尝试从以下行中删除`fileoperations.h`

```
#include "mainwindow.h" 
```

# c++ - 我可以在 glTexImage2D 调用后释放分配给 Image 的内存吗？

> ID：14517859
> 
> 赞同：10
> 
> 时间：2013-01-25T08:15:38.810
> 
> 标签：c++, opengl, 3d

glTexImage2D 函数采用指向图像数据的指针。现在我调用了 glGenTextures、glBindTexture 和 glTexImage2D

在 OpenGL 中使用纹理。我可以释放分配给图像数据 ptr 的内存吗？还是opengl在调用glTexImage2D后从指针复制数据将其保留在GPU内，或者它使用我的图像数据作为纹理？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-25T08:25:31.010

是的，一旦将信息指针提供给 glTexImage2D，您就可以安全地删除它，它只会将其复制到更靠近卡的位置（例如显卡内存）并从那里使用它。

```
int *p = getImagePixels();

glTexImage2D(GL_TEXTURE..., p);

delete [] p; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T08:28:04.990

查看[这个类似的问题](https://stackoverflow.com/questions/766167/what-happens-to-pixels-after-passing-them-into-glteximage2d)，了解有关释放 glTexImage2D 的讨论。不过，您似乎可以。

# css - 为大型 ExtJS 应用程序设计样式

> ID：14517861
> 
> 赞同：2
> 
> 时间：2013-01-25T08:15:42.340
> 
> 标签：css, extjs, extjs4, sass, compass-sass

我正在使用 Ext JS 4 开发一个大型 RIA 应用程序。在我的 index.html 中，我有以下定义：

```
<link rel="stylesheet" href="ext/resources/css/ext-all.css">
<link rel="stylesheet" href="ext/src/ux/grid/css/GridFilters.css">
<link rel="stylesheet" href="ext/src/ux/grid/css/RangeMenu.css">
<link rel="stylesheet" href="resources/css/default/index.css">
<link rel="stylesheet" href="resources/css/default/profile/user.css">
<link rel="stylesheet" href="resources/css/default/profile/documents.css"> 
```

**问题**
仅存在于提供的代码`index.css`中，但我的应用程序中的每个视图都有自己的 CSS 样式表，它将使用自己的精灵/图像（我已添加`user.css`并`documents.css`在提供的代码中作为示例）。这一切都会变成大量未缩小的 CSS 文件，这将显着减慢应用程序的加载时间。
此外，某些样式的 Ext JS 'ux' 组件不包含在`ext-all.css`（`GridFilters.css`和`RangeMenu.css`提供的代码中）。

我可以写一个脚本，它将所有这些 CSS 文件压缩到一个文件中，但是......

**问题**

1.  哪种是设置 Ext JS 4 应用程序样式的正确方法？也许应该创建`SCSS`文件并在那里进行所有样式设置，并每次编译`compass compile`以创建 CSS 文件并进行开发？
2.  有什么方法可以包含标准 Ext JS 4 发行版中的“ux”组件的样式？类似于`ext-all.css`'ux 组件的东西（类似于`ext-ux-all.css`）

我希望很多人都在使用 Ext JS 来创建出色的应用程序，并且他们已经为自己考虑或解决了这些问题。我将不胜感激有关此主题的任何知识分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T11:15:23.073

我有和你类似的情况。

我要做的是首先包含 ext css 文件：

```
<link rel="stylesheet" type="text/css" href="resources/css/ext-all-gray.css"> 
```

然后我所有的应用程序 css 都是使用指南针生成的。所以有大量的 scss 文件被编译成一个 css 文件。您可以使用`compass watch`，以便在 scss 文件更改时编译您的 css。

我不得不说，一旦你习惯了 compass 和 sass/scss，就很难证明纯 css 文件是正确的 - compass 和 sass 生成更好的跨浏览器 css，并且与纯 css 相比，scss 文件更容易维护和自定义。

至于 ux css。我不会太担心，但你有两个选择：

*   只需在您的主 scss 文件中导入您的 ux css 文件（请参阅[此答案](https://stackoverflow.com/questions/13025865/sass-compass-compile-all-css-file-to-one)）；
*   使用众多的 CSS 统一器/合并器/压缩器之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T21:19:02.457

Creating your theme is the only way you can keep your code well and is a good way to deploy optimized css.

Using secnha's mixins ( now partially documented in docs) you can create multiple looks for your buttons, pannels,etc. You might have some hard time to figure out how it works, but is the only way to do things well.

You will find good resources on their docs ( guides and video). Also their scss sources are a good source.

# javascript - 处理属性的 JSON 到 XML 转换器 - javascript

> ID：14517866
> 
> 赞同：0
> 
> 时间：2013-01-25T08:15:59.117
> 
> 标签：javascript, xml, json

我有一个 JSON 对象，不幸的是我需要将其转换为 XML。XML 必须非常具体，包括哪些部分是属性以及哪些部分是值。是否有任何 JSON 到 XML javascript 工具允许指定哪些部分是属性？

例如，这个 JSON（忽略这个 JSON 示例中的任何格式错误，因为我只是输入它 - 假设实际的 JSON 格式正确）：

```
{content: { type: "text", content: "blah blah blah" }} 
```

到这个 XML：

```
<content type="text">blah blah blah</content> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:22:18.957

Json.net 将用于服务器端转换

我已经链接了一个 github 项目。如果它不支持您开箱即用的需求，您可以对其进行按摩以支持您的转换

[JSON.net XML- JSON Json-XML](http://james.newtonking.com/projects/json/help/index.html?topic=html/ConvertingJSONandXML.htm)

[Github json转xml](https://github.com/SiegfriedEhret/json2xml/blob/master/json2xml.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T07:22:02.313

答案似乎是否定的。我最终在一个自定义函数中浏览了 JSON，将每个部分转换为 xml 字符串，将它们连接在一起，然后`jQuery.parseXML()`在其上运行。也许不是最优雅的，但它使代码变成了完美的（对于我的情况）XML。

# ios - 删除本地化并重命名 uibutton 后应用程序无法启动

> ID：14517867
> 
> 赞同：0
> 
> 时间：2013-01-25T08:16:00.137
> 
> 标签：ios, compiler-errors, localization

我用 2 种语言制作了简单的应用程序。完成后，我决定删除一种语言（并且这样做了）：我从 project-info-localizations 中删除了语言。

之后，我在设备（iPhone）上测试了应用程序，发现该应用程序仍然有其他（已删除）语言。然后我从 iPhone 中删除了该应用程序并再次运行项目 - 这对我的更改毫无意义。我不明白原因......但是，后来我发现按钮名称中有错误（语法）并将其重命名。该操作完全杀死了我的应用程序——从那一刻起，它就无法在 iPhone 上运行。

> 错误是：2013-01-25 11:46:34.087 timeLimiter[13649:907] *** 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类不是键值编码-符合关键 startAlerButton。

它提到了重命名的“startAlerButton”（我检查了 .h、.m、storyboard 中的所有关系）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:18:04.377

请检查 xib 文件中是否仍有与 outlet startAlerButton 的连接。

# c# - 什么在位置安装文件 - Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5

> ID：14517873
> 
> 赞同：12
> 
> 时间：2013-01-25T08:16:31.323
> 
> 标签：c#, asp.net-mvc-4, assemblies, .net-4.5

请多多包涵，我会尽量解释清楚。

我开始了一个针对 4.5 而不是客户端配置文件 4.5 的新项目（类库）。

我添加了一个引用“System.Runtime.Serialization”，属性表明它位于“C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.5\System.Runtime.Serialization.dll”位置

在我的电脑上，它使用 msbuild 的构建脚本编译得很好。

在使用团队城市的构建服务器上 - 它抱怨

> 错误 CS0012：类型“System.Object”在未引用的程序集中定义。您必须添加对程序集 'System.Runtime, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' 的引用

buildserver 安装了完整的 .net 框架 - “dotnetfx45_full_x86_x64.exe”

它唯一会构建的时间是，如果我将我的“C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.5”版本复制到目标机器。

我已使用此链接进行检查并安装了 .net 4.5 - [http://myspworld.wordpress.com/2012/10/18/how-to-check-if-net-4-5-is-installed-on-a -服务器/](http://myspworld.wordpress.com/2012/10/18/how-to-check-if-net-4-5-is-installed-on-a-server/)

我在问两个问题：1.这是如何安装的？2\. 如果它确实在这个位置找到它，它肯定应该在 GAC 中查找吗？

将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T08:25:12.897

这是[Windows SDK](http://msdn.microsoft.com/en-us/windows/hardware/hh852363.aspx)：

> Windows SDK 包括构建面向 .NET Framework 4.5 的应用程序所需的参考程序集、工具、标头和库。

（对于 1.1 和 2.0，有一个单独的 .NET Framework SDK，但我找不到任何更新版本的链接 - 我不认为它是单独可用的）

* * *

对于第 2 部分，没有。在编译时不搜索 GAC。它仅在运行时使用。

# .htaccess - 将 301 重定向添加到 Codeigniter .htaccess

> ID：14517874
> 
> 赞同：0
> 
> 时间：2013-01-25T08:16:36.170
> 
> 标签：.htaccess, codeigniter, mod-rewrite, redirect

我一直在尝试为最近移动的页面设置重定向。该页面最初位于`http://example.com/foo/`，但后来移至`http://example.com/foo/bar/`。

我在我的站点`.htaccess`文件中尝试了以下规则：

`RedirectMatch 301 ^/foo/$ /foo/bar/`

但是，转到 url 会`http://example.com/foo/`导致重定向到 url `http://example.com/foo/bar/?/foo/`。虽然 url 有效并且我想重定向到加载的页面，但我很想摆脱`?/foo/`url 末尾的额外内容。

这是我的完整 .htaccess：

```
RewriteEngine On
RewriteBase /

# add trailing slash
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ $1/ [R=301,L]

# allow access to certain directories in webroot
RewriteCond $1 !^(index\.php|robots\.txt|css/|lib/|js/|images/|^(.*)/images)

# gets rid of index.php
RewriteRule ^(.*)$ index.php?/$1 [L] 
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# page redirects
RedirectMatch 301 ^/foo/$ /foo/bar/ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T08:26:26.447

在文件`RewriteRrule`的顶部添加 a解决了问题。`.htaccess``RewriteBase /`

`RewriteRule ^foo/$ /foo/bar [R=301,L]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-07T12:46:22.940

我发现从控制器而不是 .htaccess 重定向更容易，因为 .htaccess 在末尾添加了一个查询字符串。

例如，我将其放入控制器的操作中：

```
if ($this->uri->segment(2)==='old_url') {
  redirect(base_url() . $this->lang->lang() .'/new-url', 'location', 301);
} 
```

# javascript - 如何在 TinyMCE 上创建选择按钮？

> ID：14517875
> 
> 赞同：2
> 
> 时间：2013-01-25T08:16:40.763
> 
> 标签：javascript, tinymce

我正在使用 tinyMCE，但我不知道如何在工具栏上创建取消选择按钮？

例如，看看这个演示：[http ://www.tinymce.com/tryit/full.php](http://www.tinymce.com/tryit/full.php)

我想创建“样式”、“段落”、“字体系列”等按钮...

你有什么想法 ？

谢谢 ！

编辑：我知道如何使用基本按钮创建插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:32:35.960

我试图创建一个自己的示例，但发现 moxiecode 已经创建了一个。这是：[http ://www.tinymce.com/tryit/listbox_splitbutton.php](http://www.tinymce.com/tryit/listbox_splitbutton.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:20:11.680

您需要安装插件，或者如果这些按钮是标准功能的一部分，那么您需要修改您的 tinyMCE 配置。在您的链接上，可以查看该示例的来源。如果你这样做，那么你可以看到有用于`theme_advanced_buttons*`添加按钮的设置。要获得你想要的，你应该
`theme_advanced_buttons1 : "styleselect,formatselect,fontselect"`
在 tinyMCE 初始化配置中使用。

# ruby-on-rails-3 - 我的做法是否适合使用 Rails 引擎进行辅助测试？

> ID：14517879
> 
> 赞同：1
> 
> 时间：2013-01-25T08:16:56.473
> 
> 标签：ruby-on-rails-3, unit-testing

我写了一个引擎来添加一些辅助方法，只是为了学习。

```
module SharpAssets
  class Engine < ::Rails::Engine
    initializer "sharp_asssets.assets_precompile" do |app|
      ActionView::Base.send(:include, SharpAssets::Helper)
    end
  end

  module Helper
    def hi_engine
      "test"
    end
  end
end 
```

我的测试用例是：

```
require 'test_helper'

class SharpAssetsTest < ActionView::TestCase
  include SharpAssets::Helper  
  test "should work" do
    assert_equal "test", hi_engine
  end
end 
```

我想知道这种方式是一种好习惯吗？

另一个问题是为什么我可以包含`SharpAssets::Helper`在我的测试用例中？我不需要 lib 文件夹中的任何文件。

# jquery - ajax - onchange 事件仅在单击字段外时起作用

> ID：14517886
> 
> 赞同：0
> 
> 时间：2013-01-25T08:17:15.470
> 
> 标签：jquery, ajax

我正在寻找能够在用户键入时过滤结果的东西，而不仅仅是当用户点击该字段时，这就是它现在的工作方式。我添加了实时和自动完成功能，但这并没有产生我想要的结果。

知道我怎样才能让它工作吗？

```
$(document).ready(function(){
    $("form#submit").live('change.autocomplete', function() { 
        // we want to store the values from the form input box, then send via ajax below
        var thissearch = $('#thissearch').attr('value');
        $.ajax({
            type: "POST",
            url: "includes/searchinventorytest.php?",
            data: "thissearch="+ thissearch,
            success: function(data){
                $('div.success').fadeIn();
                $('div.success').html(data);
            }
        });
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T08:24:12.673

从 facebook 得到我的答案，我想我会分享。我需要“on”和“keyup”

```
$("form#submit").on('keyup', function() { 
        // we want to store the values from the form input box, then send via ajax below
        var thissearch = $('#thissearch').attr('value');
        $.ajax({
        type: "POST",
        url: "includes/searchinventorytest.php?",
        data: "thissearch="+ thissearch,
        success: function(data){
        $('div.success').fadeIn();
        $('div.success').html(data);
        }
        });
        return false;
        });
}); 
```

# c# - MVC 2 - 要在列表中呈现的错误消息

> ID：14517889
> 
> 赞同：0
> 
> 时间：2013-01-25T08:17:38.777
> 
> 标签：c#, asp.net-mvc

我正在使用 DataAnnotations 进行表单字段验证。因此，例如，我有一个具有以下属性的联系人模型：

```
 [Required(ErrorMessage = "Please enter your first name.")]  
   [StringLength(100)]
   public string   FirstName      { get; set; } 
```

但是，我需要它们出现在表单本身上方的列表中，而不是出现在每个控件的侧面。最好的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:21:28.880

看：

```
 @Html.ValidationSummary(true)  // to not show property error
 @Html.ValidationSummary(false)  // to include property errors 
```

把它放在表单的顶部或任何地方，它会总结你所有的验证错误。

# java - 将 billing.phtml 中的更多字段传递给我的 java web 服务？

> ID：14517894
> 
> 赞同：1
> 
> 时间：2013-01-25T08:18:03.443
> 
> 标签：java, php, web-services, zend-framework, magento

我使用 Magento 1.6 并使用 Web 服务来处理我传递的一些字段。我在 zend 的`billing.phtml`表单中添加了两个字段，并且我还想将其传递给 Web 服务。

我看到我可以访问内置字段，但我也希望添加我的自定义字段。做这个的最好方式是什么？

我现在看到的解决方案是，当我选择并输入字段（它是一个下拉框和一个输入菜单）时，使用`AJAX`，我将其发布到`PHP`表单并将其存储为会话变量，但我看到了更像是绷带修复比其他任何东西。

# android - Android本身内置了“屏幕捕获”功能？

> ID：14517896
> 
> 赞同：1
> 
> 时间：2013-01-25T08:18:04.863
> 
> 标签：android

全部

(1) 尝试捕获谷歌地图 v2 屏幕，但与这篇文章的结果相同。 [捕获 GoogleMap Android API V2 的屏幕截图](https://stackoverflow.com/questions/13773658/capture-screen-shot-of-googlemap-android-api-v2)

（2）从 [如何通过IP访问DDMS的屏幕截图功能](https://stackoverflow.com/questions/7814476/how-to-access-screen-capture-function-of-ddms-by-ip) 我看到**“实际上，“屏幕截图”功能是Android本身内置的 - DDMS只是调用“**。

但是如何通过java语言而不是通过DDMS调用“Android本身内置的屏幕捕获功能”？（因为我可以从 DDMS 捕获谷歌地图 v2 屏幕，结果还可以。）

谢谢。

# google-maps-markers - 在 Android Maps V2 中，有没有办法在点击标记时控制地图的定位？

> ID：14517897
> 
> 赞同：2
> 
> 时间：2013-01-25T08:18:12.403
> 
> 标签：google-maps-markers, android-maps-v2

目前，默认情况下，当点击标记时，地图以标记为中心。有没有办法控制它，引入一些偏移值。我有一个弹出式信息窗口，它有时会更高一些，我想定位地图，这样它就不会在顶部被切断。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T19:47:35.080

您可能会覆盖 GoogleMap 标记单击事件并在那里调整相机。

例如

```
Maker lastOpened = null;

mMap.setOnMarkerClickListener(new OnMarkerClickListener() {
    public boolean onMarkerClick(Marker marker) { 
        // Check if there is an open info window
        if (lastOpened != null) {
            // Close the info window
            lastOpened.hideInfoWindow();

            // Is the marker the same marker that was already open
            if (lastOpened.equals(marker)) {
                // Nullify the lastOpened object
                lastOpened = null;
                // Return so that the info window isn't opened again
                return true;
            } 
        }

        // Open the info window for the marker
        marker.showInfoWindow();
        // Re-assign the last opened such that we can close it later
        lastOpened = marker;

        // Get the markers current position
        LatLng curMarkerPos = marker.getPosition();

        // Use the markers position to get a new latlng to move the camera to such that it adjusts appropriately to your infowindows height (might be more or less then 0.3 and might need to subtract vs add this is just an example)
        LatLng camMove = new LatLng(curMarkerPos.latitude + 0.3, curMarkerPos.longitude);

        // Create a camera update with the new latlng to move to            
        CameraUpdate camUpdate = CameraUpdateFactory.newLatLng(camMove);
        // Move the map to this position
        mMap.moveCamera(camUpdate);

        // Event was handled by our code do not launch default behaviour.
        return true;
    }
});

mMap.setOnMapClickListener(new OnMapClickListener() {

    @Override
    public void onMapClick(LatLng point) {
        if (lastOpened != null) {
            // Hide the last opened
            lastOpened.hideInfoWindow();

            // Nullify lastOpened
            lastOpened == null;
        }

        // Move the camera to the new position
        final CameraPosition cameraPosition = new CameraPosition.Builder().target(point).zoom(mMap.getCameraPosition().zoom).build();

        mMap.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));
    }); 
```

此代码尚未经过测试，但至少应该让您有一个很好的开始。onMarkerClick 的默认行为是移动相机并打开信息窗口。因此，覆盖这一点并实施您自己的应该允许您将相机移动到您喜欢的地方。

谢谢， 曼

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-06T03:48:57.603

对于只想删除标记单击的移动到中心默认行为的任何人，我修改了上面非常好的答案：

将此添加到 setUpMap()：

```
mMap.setOnMarkerClickListener(getMarkerClickListener()); 
```

然后添加方法：

```
Marker lastOpened = null;

public OnMarkerClickListener getMarkerClickListener()  {
    return new OnMarkerClickListener()  {
        public boolean onMarkerClick(Marker marker) { 
            if (lastOpened != null) {
                lastOpened.hideInfoWindow();
                if (lastOpened.equals(marker)) {
                    lastOpened = null;
                    return true;
                } 
            }

            marker.showInfoWindow();
            lastOpened = marker;
            return true;
        }
    };
} 
```

# jquery - Jquery Mobile，在事件 OnChange 上提交表单

> ID：14517898
> 
> 赞同：1
> 
> 时间：2013-01-25T08:18:13.907
> 
> 标签：jquery, mobile

使用此代码，我在菜单的 onChange 事件上发送一个表单：

```
$(function() {
$('#tag_id').change(function() {
    $.mobile.changePage('page.php', {
        type: 'get',
        data: $('form#formAnnunci').serialize()
    });
}); 
```

});

它工作正常......但是当它打开“page.php”并发送正确的数据时，我无法重新发送表单。在更改表单时，页面保持固定.. 不发送数据。为什么？谢谢！

# java - 将无边界的摆动窗口带到前面

> ID：14517903
> 
> 赞同：3
> 
> 时间：2013-01-25T08:18:16.250
> 
> 标签：java, swing, jframe, visibility

我有一个创建全屏无边框窗口的摇摆程序——我在 Windows 7 上运行。我需要该程序能够集中注意力并将自己带到前面。但是，当我尝试使用此处找到的方法时，[如何将窗口放在前面？](https://stackoverflow.com/questions/309023/howto-bring-a-java-window-to-the-front)，而不是将窗口带到前面，窗口只是在任务栏中闪烁并且不接受输入。下面我写了一个小程序来演示这个问题：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class WindowTest extends JFrame{

WindowTest(){
    setTitle("Window Test");
    setSize(600, 600);
    setLocationRelativeTo(null);
    setUndecorated(true);
    setExtendedState(JFrame.MAXIMIZED_BOTH);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
}

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            final WindowTest wt = new WindowTest();
            wt.setVisible(true);

            Timer t = new Timer(3000,new ActionListener(){
                @Override
                public void actionPerformed(ActionEvent arg0) {
                    java.awt.EventQueue.invokeLater(new Runnable() {
                        @Override
                        public void run() {
                            wt.toFront();
                            wt.repaint();
                        }
                    });             
                }   
            });

            t.setRepeats(false);
            t.start();

            wt.addKeyListener(new KeyListener(){
                @Override
                public void keyPressed(KeyEvent arg0) {
                    if(arg0.getKeyCode() == KeyEvent.VK_ESCAPE){
                        wt.dispose();
                        System.exit(0);
                        return;
                    }
                }

                @Override
                public void keyReleased(KeyEvent arg0) {
                    // TODO Auto-generated method stub

                }

                @Override
                public void keyTyped(KeyEvent arg0) {
                    // TODO Auto-generated method stub

                }   
            });
        }
    });

}

 } 
```

这将创建一个无边界的最大化窗口，然后三秒钟后将尝试将其置于最前面。如果在此之前切换到另一个窗口，任务栏按钮会闪烁，但窗口不会被带到前面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T08:34:28.440

*   `toFront(quite common issue)`不适用`JFrame`，这是基本属性`JDialog`

*   基本上`toFront()`只能移动一个`JFrame`，必须使用`setExtendedState`，但是有副作用在屏幕上闪烁和跳跃，请`JDialog`改用

*   不要使用[KeyListener](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)，因为`JFrame`不可聚焦`KeyEvent`，必须使用[KeyBindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

例如

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class WindowTest extends JFrame {

    private static final long serialVersionUID = 1L;
    private JFrame frame = new JFrame();

    public WindowTest() {
        frame.setTitle("Window Test");
        frame.setSize(600, 600);
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.setVisible(true);
        frame.setExtendedState(JFrame.ICONIFIED);
        Timer t = new Timer(3000, new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent arg0) {
                java.awt.EventQueue.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        frame.setExtendedState(JFrame.NORMAL);
                    }
                });
            }
        });
        t.setRepeats(false);
        t.start();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                final WindowTest wt = new WindowTest();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-04T00:54:57.683

如果您不想最小化然后最大化窗口，可以使用另一个技巧。我不知道它为什么会起作用，但是如果您在使窗口可见之前移动鼠标，它将出现在前面。我知道这很奇怪，但它似乎至少适用于 JRE 1.4 到 1.8。为了尽量减少对鼠标的影响，您可以先查看它的位置，然后稍微移动一下。您的代码可能如下所示：

```
PointerInfo mInfo = MouseInfo.getPointerInfo();
Point mWhere = mInfo.getLocation();
(new Robot()).mouseMove(mWhere.x + 2, mWhere.y + 2); 
frame_.setVisible(true); 
```

我意识到对于发布问题的人来说这是一个相当晚的回复，但其他人可能仍在寻找答案。

# algorithm - 从混合图中提取链组件

> ID：14517904
> 
> 赞同：2
> 
> 时间：2013-01-25T08:18:16.577
> 
> 标签：algorithm, graph

给定一个由有向和无向边组成的混合无环图，我想将此图分解为链组件的有向图（链组件中的每个节点将仅通过无向边相互连接）及其排序。

我很困惑是否应该首先对所有有向边进行拓扑排序，然后将无向边作为链组件进行搜索，或者我应该首先遍历所有无向边并给它们组 ID，然后找到一些有向边来连接这些组件。

由于该图是非循环的，我认为可以将它们从低编号组件排序到高编号组件，但无法得出一个可靠的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-01-29T02:05:38.030

定义链组件的等价关系是[Drton 2009](https://projecteuclid.org/euclid.bj/1251463279)的以下内容：如果存在一条路径使得G 中所有 0 ≤ i ≤ k - 1 ，则在链图中定义两个顶点`v_0`和G 是等价的。`v_k``(v_0,..., v_k)``v_i − v_{i+1}`

这种等价关系下的等价类是 G 的链分量。粗略地说，这意味着由链图的无向边构成的图的所有连通分量，加上仅与有向边相关的所有节点，加上所有与根本没有邻居，这相当于[彼得的回答](https://stackoverflow.com/a/14518552/7330813)

这是正确分解 Cowell 2005,Probabilistic Networks and ..., p. 中给出的链图 CH-Asia 的函数。110 图 6.1。它是我作为业余项目开发的[图形模型库的一部分。](https://github.com/Viva-Lambda/graphical-models)

虽然它使用自定义数据结构，但它应该不难适应其他涉及图形模型的代码库。

```
def get_chain_components(self) -> Set[Set[Node]]:
    """!
    """
    # filter out undirected edges
    edges = set()
    for e in self.edges():
        if e.type() == EdgeType.UNDIRECTED:
            edges.add(e)

    # make a graph from undirected edges
    undi = UndiGraph.from_graph(Graph.from_edge_node_set(edges, self.nodes()))
    return undi.get_components_as_node_set() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:15:53.693

您描述的混合图又是有向图。只需将每个无向边替换为两个指向相反方向的有向边。

此外，您不能拥有具有无向边的无环图。至少一个长度为 2 的循环将始终存在，所以我不确定你的意思是什么。

看来您正在此图中寻找强连接的组件，因此我建议您使用[Tarjan 的算法](http://en.wikipedia.org/wiki/Tarjan%27s_strongly_connected_components_algorithm)来查找它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T09:08:20.777

我认为您的两种方法都可以正常工作。

在我看来，第二种方法似乎更自然。

如果我在 networkx 中执行此操作，我将通过以下方式实现您的第二种方法：

1.  创建一个包含所有顶点但仅包含无向边的新图 H。

2.  在 H 上调用[connected_components](http://networkx.github.com/documentation/latest/reference/generated/networkx.algorithms.components.connected.connected_components.html#networkx.algorithms.components.connected.connected_components)以提取链组件并为每个组件分配不同的组 id。

3.  为每个组 id 创建一个具有 1 个节点的新图 F。基于原始图中的有向边将 F 中的组与有向边连接。

4.  在 F 上调用[topological_sort](http://networkx.github.com/documentation/latest/reference/generated/networkx.algorithms.dag.topological_sort.html#networkx.algorithms.dag.topological_sort)来计算组 ID 的排序。

# javascript - 将值从javascript中的文本框传递到jsp页面

> ID：14517908
> 
> 赞同：-4
> 
> 时间：2013-01-25T08:18:37.543
> 
> 标签：javascript, html, jsp

我在 javascript 中有一个文本框。如何将文本框中的值传递到jsp页面中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:20:32.437

通过提交包含文本框的表单，或者通过读取 JavaScript 中的框值并向 JSP 发送 AJAX 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T09:22:34.757

回答你问先生的问题。Jb Nizet

用于表单提交

[http://www.w3schools.com/html/html_forms.asp](http://www.w3schools.com/html/html_forms.asp)

用于 Ajax 提交

[http://www.simonerodriguez.com/ajax-form-submit-example/](http://www.simonerodriguez.com/ajax-form-submit-example/)

当然最后

[http://www.google.com](http://www.google.com)

对于基本查询。

一切顺利，欢迎来到 Web 开发。:)

# iphone - 自定义 iphone cameraview(overlay)

> ID：14517909
> 
> 赞同：0
> 
> 时间：2013-01-25T08:18:52.137
> 
> 标签：iphone, objective-c, camera, uiimagepickercontroller

我的 iPhone 应用程序允许用户录制视频。如何像在屏幕截图中一样自定义我的相机视图。（我还需要自定义计时器倒计时）

![在此处输入图像描述](../Images/5c2c91e368cbb5c5a8ec47f3b6ac7dff.png) ![在此处输入图像描述](../Images/55eb874efbd78e0be9c75d0dc612531a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:31:00.243

您需要将所有自定义元素放在 a 中`UIView`并将该视图分配给`cameraOverlayView`属性。

```
- (void)takePicture {
    if (([UIImagePickerController isSourceTypeAvailable:
          UIImagePickerControllerSourceTypeCamera] == NO)) return;

    UIImagePickerController *imagePickerController = [[UIImagePickerController alloc] init];
    imagePickerController.delegate = self;
    imagePickerController.sourceType = UIImagePickerControllerSourceTypeCamera;
    // add a custom view overlay
    [imagePickerController setCameraOverlayView:customView];

    [self presentModalViewController:imagePickerController animated:YES];
    [imagePickerController release];
} 
```

另请参阅[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html#//apple_ref/occ/instm/UIImagePickerController/cameraOverlayView](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html#//apple_ref/occ/instm/UIImagePickerController/cameraOverlayView)

# ruby - 红宝石卡门'NameError'

> ID：14517913
> 
> 赞同：3
> 
> 时间：2013-01-25T08:18:59.300
> 
> 标签：ruby, carmen

我正在使用[carmen](https://github.com/jim/carmen) gem 并按照那里的说明进行操作。当我执行这些语句时：

```
require 'carmen'
include Carmen

us = Country.named('United States') 
```

我得到一个

```
NameError: uninitialized constant Country 
```

即使我已经要求并包含`Carmen`. `require`退货`true`和`include`退货`Object`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:31:56.243

原因是您看到的 Github 源代码和文档是最新的*未发布*版本。把它放在你的 Gemfile 中：

```
gem "carmen", :git => "git://github.com/jim/carmen.git", :branch => "master" 
```

最好去[Rubygems](https://rubygems.org/gems/carmen)并订阅库以获取更新，因为在项目中必须依赖未标记的分支并不是很好。

# ruby-on-rails - 根据 env 更改 Unicorn worker_process

> ID：14517915
> 
> 赞同：1
> 
> 时间：2013-01-25T08:19:09.493
> 
> 标签：ruby-on-rails, unicorn

我有一个 unicorn.rb 文件，我想根据环境变量设置 worker_process。我尝试了以下方法但没有成功：

```
environment = ENV['RACK_ENV'] || ENV['RAILS_ENV'] || 'production'
# Save on RAM while in development
if environment == 'development'
  worker_processes 1
else
  worker_processes 4
end 
```

当我使用时，`foreman start`我收到以下错误：

```
21:07:49 web.1    | /home/hg/.rvm/gems/ruby-1.9.3-p194@px/gems/unicorn-4.3.1/lib/unicorn/configurator.rb:74:in `instance_eval': ./unicorn.rb:4: syntax error, unexpected ':', expecting keyword_then or ';' or '\n' (SyntaxError)
21:07:49 web.1    | ./unicorn.rb:6: syntax error, unexpected keyword_else, expecting $end
21:07:49 web.1    |     from /home/hg/.rvm/gems/ruby-1.9.3-p194@px/gems/unicorn-4.3.1/lib/unicorn/configurator.rb:74:in `reload'
21:07:49 web.1    |     from /home/hg/.rvm/gems/ruby-1.9.3-p194@px/gems/unicorn-4.3.1/lib/unicorn/configurator.rb:67:in `initialize'
21:07:49 web.1    |     from /home/hg/.rvm/gems/ruby-1.9.3-p194@px/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:104:in `new'
21:07:49 web.1    |     from /home/hg/.rvm/gems/ruby-1.9.3-p194@px/gems/unicorn-4.3.1/lib/unicorn/http_server.rb:104:in `initialize'
21:07:49 web.1    |     from /home/hg/.rvm/gems/ruby-1.9.3-p194@px/gems/unicorn-4.3.1/bin/unicorn_rails:209:in `new'
21:07:49 web.1    |     from /home/hg/.rvm/gems/ruby-1.9.3-p194@px/gems/unicorn-4.3.1/bin/unicorn_rails:209:in `<top (required)>'
21:07:49 web.1    |     from /home/hg/.rvm/gems/ruby-1.9.3-p194@px/bin/unicorn_rails:19:in `load'
21:07:49 web.1    |     from /home/hg/.rvm/gems/ruby-1.9.3-p194@px/bin/unicorn_rails:19:in `<main>'
21:07:49 web.1    |     from /home/hg/.rvm/gems/ruby-1.9.3-p194@px/bin/ruby_noexec_wrapper:14:in `eval'
21:07:49 web.1    |     from /home/hg/.rvm/gems/ruby-1.9.3-p194@px/bin/ruby_noexec_wrapper:14:in `<main>'
21:07:49 web.1    | exited with code 1
21:07:49 system   | sending SIGTERM to all processes
SIGTERM received 
```

我能否请教一下如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T04:18:52.803

我相信这是我的错误，我怀疑删除`:`解决了我的问题。但是，对于任何寻求调整 unicorn 的 worker_processes 的人来说，因为他们的开发环境受到 RAM 限制，这里是我的`unicorn.rb`文件：

```
environment = ENV['RACK_ENV'] || ENV['RAILS_ENV'] || 'production'

# Save on RAM while in development
if environment == 'development'
  worker_processes 1
else
  worker_processes 4
end

timeout 30
preload_app true

before_fork do |server, worker|
  # Close all open connections
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.connection.disconnect!
  end

  @resque_pid ||= spawn("bundle exec rake resque:work QUEUES=fast")
end

after_fork do |server, worker|
  # Reopen all connections
  if defined?(ActiveRecord::Base)
    ActiveRecord::Base.establish_connection
  end
end 
```

[https://gist.github.com/4633113](https://gist.github.com/4633113)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-11T23:21:19.807

对于那些对此感兴趣的人，我使用了一种更特定于主机的方法，该方法允许具有硬编码默认值的特定于机器的独角兽进程。

```
ENV['UNICORN_PROCESSES'] ||= '4'
worker_processes ENV['UNICORN_PROCESSES'].to_i 
```

# shell - 打印一个逗号，除了 Awk 的最后一行

> ID：14517930
> 
> 赞同：13
> 
> 时间：2013-01-25T08:20:42.093
> 
> 标签：shell, awk, separator

我有以下脚本

```
awk '{printf "%s", $1"-"$2", "}' $a >> positions; 
```

其中`$a`存储文件的名称。我实际上是将多个列值写入一行。但是，只有当我不在最后一行时，我才想打印一个逗号。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-25T09:24:16.920

单程方法：

```
cat "$a" | # look, I can use this in a pipeline! 
  awk 'NR > 1 { printf(", ") } { printf("%s-%s", $1, $2) }' 
```

请注意，我还简化了字符串格式。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-11-18T10:58:20.820

享受这个：

```
awk '{printf t $1"-"$2} {t=", "}' $a >> positions 
```

是的，第一眼看起来有点棘手。所以我会解释一下，首先让我们为了`printf`清楚`print`起见：

```
awk '{print t $1"-"$2} {t=", "}' file 
```

看看它做了什么，例如，对于具有以下简单内容的文件：

```
1 A
2 B
3 C
4 D 
```

所以它将产生以下内容：

```
 1-A
 , 2-B
 , 3-C
 , 4-D 
```

诀窍是前面的`t`变量在开始时为空。该变量将`{t=...}`仅在显示后的下一步处理中设置`{print t ...}`。因此，如果我们 ( `awk`) 继续迭代，我们将得到所需的序列。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-25T08:26:33.003

我会通过在运行脚本之前找到行数来做到这一点，例如使用 coreutils 和 bash：

```
awk -v nlines=$(wc -l < $a) '{printf "%s", $1"-"$2} NR != nlines { printf ", " }' $a >>positions 
```

如果您的文件只有 2 列，则以下 coreutils 替代方案也适用。示例数据：

```
paste <(seq 5) <(seq 5 -1 1) | tee testfile 
```

输出：

```
1   5
2   4
3   3
4   2
5   1 
```

现在用换行符替换制表符，`paste`可以轻松地将日期组合成所需的格式：

```
 <testfile tr '\t' '\n' | paste -sd-, 
```

输出：

```
1-5,2-4,3-3,4-2,5-1 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-03-10T18:47:29.867

您可能认为 awk 的 ORS 和 OFS 是处理此问题的合理方法：

```
$ awk '{print $1,$2}' OFS="-" ORS=", " input.txt 
```

但这会导致最终的 ORS，因为输入在最后一行包含换行符。换行符是一个记录分隔符，因此从 awk 的角度来看，输入中有一条空的最后一条记录。您可以通过一些技巧来解决这个问题，但由此产生的复杂性消除了单线的优雅。

所以这是我对此的看法。由于您说您正在“编写多个列值”，因此使用 ORS 和 OFS 可能会导致问题。所以我们可以完全通过格式化来实现所需的输出。

```
$ cat input.txt
3 2
5 4
1 8
$ awk '{printf "%s%d-%d",t,$1,$2; t=", "} END{print ""}' input.txt
3-2, 5-4, 1-8 
```

这类似于 Michael 和 rook 的单遍方法，但它使用单遍`printf`并正确使用格式字符串进行格式化。

这可能会比 Michael 的解决方案执行得好到可以忽略不计，因为分配应该比测试占用更少的 CPU，并且明显优于任何多通道解决方案，因为文件只需要读取一次。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-25T08:58:37.820

这是一种更好的方法，无需借助 coreutils：

```
awk 'FNR==NR { c++; next } { ORS = (FNR==c ? "\n" : ", "); print $1, $2 }' OFS="-" file file 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-25T09:26:01.467

```
awk '{a[NR]=$1"-"$2;next}END{for(i=1;i<NR;i++){print a[i]", " }}' $a > positions 
```

# c# - unity3d怎么能多音频？

> ID：14517931
> 
> 赞同：2
> 
> 时间：2013-01-25T08:20:50.270
> 
> 标签：c#, audio, mobile, unity3d

我的环境：
Win7 x64
Unity Pro 3.5.5
c#(Visual Studio 2010)

我的目标：
我正在用 unity3d 制作手机游戏。
我做了一个炸弹效果。
效果在显示时播放自己的声音。

规格：
效果是一个带有平面图、精灵纹理的预制件。
并有一个音频源（将 wav 文件拖放到 Inspector 中
的 Prefab），炸弹效果由我的自定义对象池管理，因此我在 Inspector 中禁用**了“唤醒时播放”**选项。（因为它被我的自定义规则回收）
所以我编码：

```
//when the booming is begin

GameObject obj;
obj = MyObjectPool.Recycle("Prefabs/BombEffect");  //try recycle
if(obj != null)
{
    //every object's first creation is doing here
    obj = Instantiate("Prefabs/BombEffect") as GameObject;
    MyObjectPool.StartManage(obj);
}
obj.audio.play(); //play 
```

问题：
炸弹效应迅速产生。（攻击速度非常快）
但声音播放就像一个单人。这意味着如果开始播放炸弹效果音频，则无法播放其他炸弹效果游戏对象的音频。直到第一个**播放**炸弹效果自然停止。

但据我所知，预制件的**音频源**可以与另一个预制件的**音频源**同时多次播放。但事实并非如此。我不明白。如何播放多个播放相同的音频 wav 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:57:11.227

我觉得你的逻辑可能有问题。如果 MyObjectPool 中没有任何可用的对象，MyObjectPool.Recycle() 将返回 null，除非您的 Recycle() 实现正在做我不知道的事情。

我认为这就是你要找的：

```
 if(obj == null)
    {
       //every object's first creation is doing here
       obj = Instantiate("Prefabs/BombEffect") as GameObject;
       MyObjectPool.StartManage(obj);
    } 
```

可能发生的情况是，您实际上从未实例化过一个对象。一旦它完成播放，它就会返回到池中，然后被回收再次播放。

# ruby-on-rails - 创建嵌套散列来组织对象

> ID：14517933
> 
> 赞同：3
> 
> 时间：2013-01-25T08:20:53.143
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个`Payment`属于`Currency`and的模型`PaymentMode`。`Currency`并且`PaymentMode`有很多`Payments`。

在我的付款索引页面上，我有每笔付款的清单，我希望能够按货币和付款方式对它们进行排序。

例如，假设我有三种货币（瑞士法郎、美元、欧元）和两种支付方式（现金和蓝卡）。

我想要得到的是这样的：

```
{
  CHF => {
           Cash => [array of corresponding payments], 
           BlueCard => [...]}, 
  Dollars => {
               Cash => [...], 
               BlueCard => [...]}, 
  Euros => {
             Cash => [...], 
             BlueCard => [...]}
} 
```

实现这一目标的最佳方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T08:44:03.303

这样的事情呢？

```
def get_hash_from_payments(payments)
  result_hash = {}
  payments.each do |payment|
    result_hash[payment.currency.symbol] ||= {}
    result_hash[payment.currency.symbol][payment.payment_mode.name] ||= []
    result_hash[payment.currency.symbol][payment.payment_mode.name] << payment #Or whatever info you need from payment.
  end
  result_hash
end 
```

# javascript - 创建 html 模板 textarea 或 script 或 div 或其他

> ID：14517934
> 
> 赞同：0
> 
> 时间：2013-01-25T08:20:55.603
> 
> 标签：javascript, html, templates

我见过使用以下任何标签创建的 html 模板

```
<textarea>
<script>
<div> 
```

哪个更好，为什么？

以下哪种创建 html 模板的方式更好？

CSS：

```
.template {
  display: none;
} 
```

文本区域：

```
<textarea class="template" id="tmpl1">
  <div>adfsdfsdfs</div>
</textarea> 
```

脚本 ：

```
<script type="text/html" id="tmpl1">
  <div>adfsdfsdfs</div>
</script> 
```

分区：

```
<div class="template" id="tmpl1">
  <div>adfsdfsdfs</div>
</div> 
```

[我在这里](https://stackoverflow.com/questions/14517174/dynamic-loading-of-template-files-into-a-div-not-working-in-ie8)遇到了`script`标签问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:04:11.510

我建议以上选项都不要看一下 Mustache，它是由 git hub 的创始人之一创建的

[http://mustache.github.com/](http://mustache.github.com/)

绝对是我最喜欢的 html 模板制作方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T13:11:52.023

他们都是糟糕的选择。

**textarea**旨在接受用户输入

**div**元素旨在向用户呈现内容

**脚本**元素旨在保存程序

如果您想将模板嵌入 HTML 文档，那么我会编写一个 JavaScript 程序将其存储在一个变量中（并使用 json 序列化程序生成分配给该变量的 JavaScript 文字）。然后该程序可以进入脚本元素。

或者，将模板存储在`data-*`适当元素的属性中。

# python - 如何将十进制字符串更改为十六进制格式的字符串？

> ID：14517935
> 
> 赞同：0
> 
> 时间：2013-01-25T08:20:56.173
> 
> 标签：python

如何将十进制字符串更改`123456789`为十六进制格式的字符串，如下所示：

```
07:5B:CD:15 
```

我看过 hex 函数，但它没有给我上述格式。

**更新**

我还希望 -123456789 是：

```
-07:5B:CD:15 
```

而不是

```
-7:5B:CD:15 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T08:28:43.893

```
s = '123456789'
a = '{:08X}'.format(int(s))
print ':'.join(a[i:i+2] for i in xrange(0, len(a), 2)) 
```

印刷

```
07:5B:CD:15 
```

# mysql - 如何在两个选择之间在mysql中使用算术减号？

> ID：14517936
> 
> 赞同：0
> 
> 时间：2013-01-25T08:20:57.173
> 
> 标签：mysql

```
select player.ActionTime from question_log log inner join player_question player 
where log.ActionType='96'

select player.ActionTime from question_log log inner join player_question player 
where log.ActionType='97' 
```

如何在 mysql 语法中实现这一点？选择 ActionType 为 96 减去另一个为 97 的 Actiontime。算术减。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T08:25:05.527

```
SELECT t96.ActionTime - t97.ActionTime
FROM
(
    select player.ActionTime 
    from question_log log 
    inner join player_question player 
    where log.ActionType='96'
) t96
CROSS JOIN
(
    select player.ActionTime 
    from question_log log 
    inner join player_question player 
    where log.ActionType='97'
) t97 
```

请注意，您的两个查询之间似乎没有任何关系，所以我只能建议一个`CROSS JOIN`（笛卡尔积）。如果你有不止一行 log.ActionType = '96' 或 log.ActionType = '97' 你将有很多结果行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T08:26:27.293

使用子查询：

```
SELECT player.ActionTime - (SELECT player.ActionTime from question_log log inner join     player_question player where log.ActionType='97' LIMIT 1)
from question_log log inner join player_question player where log.ActionType='96' 
```

# maven - Maven：需要将图像复制到Javadoc，LICENSE/NOTICE文件到META-INF

> ID：14517938
> 
> 赞同：0
> 
> 时间：2013-01-25T08:21:10.073
> 
> 标签：maven, jar, javadoc, meta-inf

我一直在尝试完成两件我认为使用 Maven 非常简单的事情（我使用的是 3.0.3 和所有插件的最新版本），但无论我做什么，我似乎都无法做到工作。我需要：

1.  将所有文件（它们是图像）从 build/javadoc-css/resources/（相对于项目根目录）复制到 Javadoc 输出中的 resources/ 目录。我使用的样式表引用了该资源目录中的图像，我需要将关联的图像复制到该资源/目录中。到目前为止，您似乎只能复制 doc-files/ 目录中的文件。我希望我错过了一些东西，因为那是严重缺乏的。
2.  将 build/jar/META-INF 中的所有文件（LICENSE.txt 和 NOTICE.txt，我认为这是每个人都需要复制的常见内容）复制到我所有输出 jar 中的 META-INF 目录。（注意：我不想将 META-INF 目录与我的 LICENSE 和 NOTICE 文件放在源目录中，因为我有很多模块，并且我不想要这些文件的很多副本。）

为了完成 #1，我将精力集中在 <javadocDirectory> 和 <docfilessubdirs> 标记上，但这些仅适用于它出现的 doc-files/ 目录。

对于#2，我尝试了 <resource> 标签的几种变体：

变体#1：

```
<resource>
    <directory>build/jar/META-INF</directory>
    <targetPath>META-INF</targetPath>
    <includes>
        <include>LICENSE.txt</include>
        <include>NOTICE.txt</include>
    </includes>
</resource> 
```

变体#2：

```
<resource>
    <directory>build/jar</directory>
    <targetPath>META-INF</targetPath>
    <includes>
        <include>META-INF</include>
    </includes>
</resource> 
```

变化#3：

```
<resource>
    <directory>build/jar/META-INF</directory>
    <targetPath>META-INF</targetPath>
    <includes>
        <include>**</include>
    </includes>
</resource> 
```

没有错误或文件在错误的地方。就像我的资源标签甚至不存在一样。什么都没发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T08:37:42.637

我建议将[javadoc 的资源放入](http://maven.apache.org/plugins/maven-javadoc-plugin/examples/javadoc-resources.html)Maven 中的适当文件夹中：

```
yourproject
  |-- src
     |-- main
        |-- java
        |  |-- org
        |     |-- apache
        |        |-- myapp
        |         `-- App.java
        |         `-- package-info.java
        |-- javadoc
         `-- overview.html
           |-resources
           |-- org
              |-- apache
                 |-- myapp
                  `-- package.html
                    |-- doc-files
                     `-- app.png 
```

# python - 转换时间字符串并将其插入时间字段django的有效方法

> ID：14517939
> 
> 赞同：4
> 
> 时间：2013-01-25T08:21:15.473
> 
> 标签：python, django

例如，我有一个来自 csv 的输入，它是 08:00:00，所以这是字符串类型。我在模型中有一个时间域。我需要在时间字段中插入该字符串。有没有一种有效的方法来转换它并将其插入到时间域中？我知道一些事情，但这有点像很长的路要走。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T08:34:37.993

您可以使用`datetime`python的模块对其进行转换

```
from datetime import datetime
t = '08:00:00'
t = datetime.strptime(t, '%H:%M:%S')
print t, type(t)
>>> 1900-01-01 08:00:00 <type 'datetime.datetime'> 
```

请注意，年、月、日将从开始，`1900-01-01`因为字符串中没有可用的日期信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-25T08:55:17.653

TimeField 将接受一个 datetime.time 实例。因此，您需要为它提供一个时间对象

```
import datetime
a = YourModel()
a.YourTimeField = datetime.datetime.strptime('12:12:12', '%H:%M:%S').time()
a.save() 
```

# actionscript-3 - (AS3) 将变量设置为私有有助于垃圾收集吗？

> ID：14517944
> 
> 赞同：2
> 
> 时间：2013-01-25T08:21:41.883
> 
> 标签：actionscript-3, memory, memory-management, actionscript, garbage-collection

新手程序员在这里。

我目前正在编写一个简单的游戏，标题屏幕和主游戏循环在单独的“关键帧”中（这是在 CS6 中）。一旦我从标题屏幕过渡到游戏关键帧，我担心按钮/电影剪辑/变量会留下来并浪费内存+使屏幕混乱。

如果我将变量/函数设置为“私有”，这会帮助垃圾收集器处理它们吗？我应该如何“清除屏幕”并确保我没有浪费/泄漏内存？

我一直在阅读的学习 AS3 的教程或书籍都没有真正涵盖这个主题，如果有任何好的指南或明显的提示我错过了就 AS3 中的内存管理最佳实践而言，我有兴趣看到它们. 到目前为止，我学到的唯一一件事是我应该手动将所有事件侦听器设置为弱引用。

额外的问题：我正在使用全屏位图并在其上显示内容。如果我每帧将几十个对象blitting 到屏幕上，我就不需要担心被blitted 的“sprites”被“掩盖”，不是吗？我希望位图是一个像素厚，而不仅仅是将东西堆叠在一起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:41:41.933

首先，您可以完全控制您的资源的唯一方法是，如果您将时间线保留为预期用途，以 swc 或 swf 格式创建和导出资产，您可以嵌入前者，然后嵌入或加载后者.

您应该做的是学习如何以面向对象的方式进行开发，从 Document 类开始（当您使用 CS6 时），然后使用一系列已定义任务的类来构建您的游戏。使用类可以提高整个游戏的可重用性。根据复杂性，我会考虑像 PureMVC 或机器人腿这样的框架。

Flash 中的垃圾收集是标记和清除，这意味着您必须取消引用所有对象，这通常从删除关联的侦听器、计时器以及对它们的任何进一步引用开始，例如。从数组或对象哈希中清除。最后，您将有问题的对象设置为 null ，这使其“符合”垃圾收集条件，但实际上并不能保证它。Flash 会在它认为合适的时候进行清理。

就个人而言，如果你能掌握 Flash Builder，它有一个很棒的内存管理分析工具，当你使用上面提到的 OOP 进行开发时，你可以使用这个工具来查看游戏中存在的所有实例。现在这里的好处是您可以及时进行内存快照，并比较它们以查看哪些对象徘徊并导致内存泄漏。您应该在捕获快照之间调用一个垃圾收集按钮，这仅在您正在开发时可用，尽管使用 Adob​​e AIR 您可以手动强制 gc 调用。

关于你的奖金问题，我不确定你是如何做这个 blitting 的，如果你在舞台上添加对象，这会增加内存，你无法避免这种情况。你所说的 1px 厚的是 flash 渲染的内容，你可以通过右键单击舞台并选择重绘区域选项来查看正在重绘的内容，看到一个红色框显示 flash 必须重绘的内容，它只会重绘它需要的内容到，这对于检查您的帧速率是否受到影响很有用。

所以总结一下：

考虑使用 Flash CS6 创建资源。

了解 Actionscript 3 中的面向对象编程。

考虑在 Flash Builder（或免费的 Flash Develop）中进行开发。

OOP 将帮助组织和取消引用垃圾收集的对象。

我希望这对您的游戏有所帮助并祝您好运。

# breeze - 在 BeforeSaveEntity 中使用 this.Context

> ID：14517945
> 
> 赞同：6
> 
> 时间：2013-01-25T08:21:46.533
> 
> 标签：breeze

我正在寻找一种在 BeforeSaveEntity 方法中组织验证规则的好方法，我在文件中找到了这条评论：项目中的 TodoContextProvider.cs：BreezeMvcSPATemplate：

```
// A second DbContext for db access during custom save validation. 
// "this.Context" is reserved for Breeze save only! 
```

为什么this.Context不能用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-27T08:21:30.330

很好的问题。答案并不明显，也不容易简单介绍。我会尝试。

从`EFContextProvider`客户端获取保存数据并（最终）将这些数据转换为`EFContextProvider.Context`. 批准保存后，`EFContextProvider`调用`SaveChanges`此 EF 上的方法`Context`并将其所有内容保存为单个事务。

有两个潜在的问题。

## 1\. 数据完整性和安全性

**客户数据永远无法完全信任**。如果您的业务规则限制授权用户可以查看或更改的内容，则必须将客户端派生实体与数据库中的相应实体进行比较。

EF`Context`不能包含“同一实体”的两个副本。它不能容纳具有相同密钥的两个实体。因此，您不能同时使用`EFContextProvider.Context`两者来从数据库中获取干净的副本并保存带有更改的副本。

您需要一秒钟`Context`来获得干净的副本，并且您必须编写逻辑来比较要保存的实体的关键值和`EFContextProvider.Context`第二个中的干净实体的值`Context`。

## 2\. 跨实体验证

许多验证不需要将值与干净的实体进行比较。

例如，*开箱即用的* `System.ComponentModel.DataAnnotations`属性，例如`Required`和`MaxLength`是简单的数据验证，用于确定实体是否是**自洽的**。要么有价值，要么没有。该值小于最大长度或不是。对于此类测试，您不需要比较实体。

您可以编写自己的自定义`System.ComponentModel.DataAnnotations`属性来比较单个实体中的*数据值。*您可能有一条规则说`order.InvoiceDate`must be on-or-before `order.ShipDate`。这也是一个**自我一致性**测试，您也不需要比较实体。

如果这些是您关心的唯一验证类型 - 并且您正在使用 EF `DbContext`- 您可以让 EF 在*其*保存处理期间为您运行它们。你不需要第二个`Context`。

但是**跨实体验证**是另一回事。在跨实体验证中，实体“A”仅在实体“B”（可能还有“C”、“D”、“E”……）的某些条件为真时才有效。例如，您可能要求订单项目具有已在数据库中的父订单。

`EFContextProvider.Context`在您验证订单项目时，父订单很可能不在其中。

“没问题，”你说。“我将使用 导航到父级`someItem.Order`。”

你不能。首先，它不起作用，因为`EFContextProvider.Context`. 禁用延迟加载主要是为了`EFContextProvider`在序列化过程中破坏循环引用，同时也是为了防止性能杀死服务器上的[“n+1”错误](http://www.codeproject.com/Articles/102647/Select-N-1-Problem-How-to-Decrease-Your-ORM-Perfor)。

您可以通过随意加载任何实体或相关实体来解决此问题。但是随后您遇到了第二个问题：您加载以进行验证的实体可能与您尝试在此批次中保存的另一个实体发生冲突。

`EFContextProvider`不会`Context`一次全部填充。它开始一个一个地验证实体，并将它们添加到其中`Context`。

`someItem`继续我们的示例，假设我们在验证期间加载了父订单。该订单现在在`EFContextProvider.Context`.

保存过程继续到下一个实体，然后......惊喜，惊喜......下一个实体恰好是同一个父订单。`EFContextProvider`尝试将此副本附加到已经有副本的副本（我们刚刚加载的`Context`副本）......它不能。

有冲突。这两个订单中的哪一个属于`EFContextProvider`？我们刚刚加载的用于验证目的的干净副本……还是来自客户端的要保存修改的副本？

也许你认为你知道答案。也许我同意。但事实是，`EFContextProvider`引发异常，因为`Context`.

## 结论

如果您的所有验证都是**自一致性检查**，那么这`EFContextProvider.Context`就是您所需要的。您不必再创建第二个`Context`

但是**，如果您有涉及其他实体的数据安全问题和/或业务逻辑，则需要第二个`Context`**......并且您需要足够的 EF 技能来使用它`Context`。

这**不是 Breeze 或 Entity Framework 的限制**。无论您选择哪种技术，重要的业务逻辑都需要相当的服务器端复杂性。这就是野兽的本性。

# arrays - Crystal Reports 错误：下标必须介于 1 和数组大小之间

> ID：14517946
> 
> 赞同：1
> 
> 时间：2013-01-25T08:21:46.420
> 
> 标签：arrays, function, crystal-reports

以下函数在 Crystal Reports XI 中运行时返回“下标必须介于 1 和数组大小之间”-错误。知道为什么以及如何解决它吗？

```
Function (optional BooleanVar start := true)

DateVar Array reportdates := [
    cDate(2012, 10, 22),
    cDate(2012, 11, 15),
    cDate(2013, 01, 23),
    cDate(2013, 02, 20),
    // some more lines of dates...
    cDate(2014, 01, 02)
];

// Here is some code that sorts the array just to be sure.
// Removed from question

// Find index of last reportdate not later than today
NumberVar stopIndex;
for i := 1 to UBound(reportdates) do (
    if CurrentDate >= reportdates[i] then
        stopIndex := i
    );

DateTimeVar returnDateTime;
if start = true then (  // return start date
    NumberVar startIndex;
    if stopIndex = 1 then
        startIndex = 1
    else
        startIndex = stopIndex - 1;
//*** The error occurs here
    returnDateTime := cDateTime(reportdates[startIndex], cTime(0,0,0));
//*** The error occurs here
    )
else (  // return stop date
    DateVar stopDate = reportdates[stopIndex];
    returnDateTime := dateAdd("d", -1, cDateTime(reportdates[stopIndex], cTime(23,59,59)));
    );

returnDateTime; 
```

注意：我发现如果在数组中的第二个日期之前运行，上述函数会返回比开始日期更早的停止日期。我重写了函数来解决这个问题，然后我没有遇到产生问题的错误的情况，但我仍然会对为什么在这个函数中发生错误以及如何处理它感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:45:44.503

```
NumberVar startIndex;
if stopIndex = 1 then
    startIndex = 1
else
    startIndex = stopIndex - 1; 
```

当然应该是

```
NumberVar startIndex;
if stopIndex = 1 then
    startIndex := 1
else
    startIndex := stopIndex - 1; 
```

现在它可以工作了......

```
NumberVar stopIndex; 
```

也应该改为

```
NumberVar stopIndex := 1; 
```

如果报告在第一个报告日期之前运行，以避免错误。

# c++ - 为什么是 2 和 -2 而不是 1 和 -1？

> ID：14517947
> 
> 赞同：-7
> 
> 时间：2013-01-25T08:21:50.687
> 
> 标签：c++, increment, decrement

我写了这个非常简单的程序：

```
 #include <iostream>

using namespace std;

int main()
{
    int x = 0;

    cout << x++<<endl;
    cout<<++x<<endl;
    int y = 0;

    cout<<y--<<endl;
    cout<<--y<<endl;
    return 0;
} 
```

这就是我运行它时得到的：

```
0

2

0

-2 
```

我使用 code::blocks 编写程序，我的操作系统是 Ubuntu 12.10。我应该如何修复我的程序，所以我会看到 0 1 0 -1？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T08:22:43.663

您需要了解[post increment(decrement) 和 pre increment(decrement) 的概念](http://bytes.com/topic/c/answers/506780-difference-between-pre-increment-post-increment)。

### 后增量

```
cout << x++<<endl; 
```

您可以将这一行理解为“返回 x 的值”+“增加 x 的值”。即返回值在增量之前。

所以返回 0 并将 x 的值增加到 1。

### 预增量

```
cout<<++x<<endl; 
```

这是相反的 - 返回增加的值。

所以将 x 的值增加到 2 并返回 2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T08:26:06.793

```
cout << x++ << endl; 
```

后增量`x`从 0 增加到 1，并产生*旧*值 0。 的值`x`现在为 1。

```
cout << ++x << endl; 
```

预增量`x`从 1 增加到 2，并产生*新*值 2。 的值`x`现在为 2。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T08:24:19.637

`x++`将使您的变量为 1，但由于 after++ 的行为而被计算为 0，届时`++x`将为 2

[“for”循环中的后增量和前增量产生相同的输出](https://stackoverflow.com/questions/4706199/post-increment-and-pre-increment-in-for-loop)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-25T08:25:41.647

X++ 首先打印它，然后递增该值。++X 首先增加值，然后打印它。

所以，

```
cout<<x++<<endl   // Prints '0' and increments to '1'
cout<<++x<<endl   // Increments '1' to '2' and prints it 
```

# objectiveflickr - 在 ObjectiveFlickr 中调用 callAPIMethodWithGET 时出错

> ID：14517955
> 
> 赞同：0
> 
> 时间：2013-01-25T08:22:47.800
> 
> 标签：objectiveflickr

我正在尝试将[ObjectiveFlickr](https://github.com/lukhnos/objectiveflickr/blob/master/README.markdown)与以下示例 API 调用一起使用，但我的代码以 EXC_BAD_ACCESS 结尾。我确保我的密钥和共享密钥存在于 flickr 中：

```
OFFlickrAPIContext *context = [[OFFlickrAPIContext alloc] initWithAPIKey:apiKey sharedSecret:sharedSecret];    
OFFlickrAPIRequest *request = [[OFFlickrAPIRequest alloc] initWithAPIContext:context];
[request setDelegate:self];
[request callAPIMethodWithGET:@"flickr.photos.getRecent" arguments:[NSDictionary dictionaryWithObjectsAndKeys:@"1", @"per_page", nil]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:25:22.103

我有同样的错误，看这里：[ObjectiveFlickr & Xcode 4.5.2](https://stackoverflow.com/questions/14289125/objectiveflickr-xcode-4-5-2/14958642#14958642)

将上下文和请求变量声明为属性，它将摆脱 EXC_BAD_ACCESS

# android - 如何设置多个警报并相应地删除它们

> ID：14517960
> 
> 赞同：3
> 
> 时间：2013-01-25T08:23:05.617
> 
> 标签：android, alarm

我想开发一个有多个闹钟的闹钟。假设我必须同时发出 5 个警报，现在我无法为每个警报提供特定的 id，以便当用户单击相应的取消按钮时我可以取消该特定警报，我的代码是这样的

```
 on1=(ToggleButton) findViewById(R.id.toggleButton1);
    on2=(ToggleButton) findViewById(R.id.toggleButton2);
    on3=(ToggleButton) findViewById(R.id.toggleButton3);
    on4=(ToggleButton) findViewById(R.id.toggleButton4);
    on5=(ToggleButton) findViewById(R.id.toggleButton5);

    on1.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            en=on1.isChecked();
            getdeta(1, en);     
            setalarm(en, m, h,1);
        }
    });

    on2.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            en=on2.isChecked();
            getdeta(2, en);     
            setalarm(en, m, h,2);
        }
    });

    on3.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            en=on3.isChecked();
            getdeta(3, en); 
            setalarm(en, m, h,3);
        }
    });

    on4.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            en=on4.isChecked();
            getdeta(4, en);     
            setalarm(en, m, h,4);
        }
    });

    on5.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            en=on5.isChecked();
            getdeta(5, en); 
            setalarm(en, m, h,5);
        }
    }); 
```

肉类是：-

```
public void getdeta(int number,boolean enable){
    String MYPR=(""+number);
    if(enable=true){
        SharedPreferences alarm=getSharedPreferences(MYPR, 0);
        SharedPreferences.Editor edit=alarm.edit();
        edit.putBoolean("en", true);
        edit.commit();
    }
    else{
        SharedPreferences alarm=getSharedPreferences(MYPR, 0);
        SharedPreferences.Editor edit=alarm.edit();
        edit.putBoolean("en", false);
        edit.commit();
    }

    SharedPreferences set1=getSharedPreferences(MYPR, 0);
    h=set1.getInt("Ahh", 00);
    m=set1.getInt("Amm", 00);
    en=set1.getBoolean("en", false);
}

public void setalarm (boolean en,int mm,int hh,int number)
{
    // meathod to set the alarm time and its enability
    if(en==true)
    {   //create an alarm calendar
        Calendar Alarm=Calendar.getInstance();
        Alarm.set(Calendar.MILLISECOND, 0);
        Alarm.set(Calendar.SECOND, 0);
        Alarm.set(Calendar.MINUTE, mm);
        Alarm.set(Calendar.HOUR_OF_DAY,hh);
        Alarm.set(Calendar.DAY_OF_WEEK, 2);

        //creating and assigning value to alarm manager class
        Intent AlarmIntent = new Intent(Multiple.this, AlarmReciever.class);
        AlarmManager AlmMgr = (AlarmManager)getSystemService(ALARM_SERVICE);
        PendingIntent Sender = PendingIntent.getBroadcast(Multiple.this, number, AlarmIntent, 0);    
        AlmMgr.set(AlarmManager.RTC_WAKEUP, Alarm.getTimeInMillis(), Sender);
    }
    else
    {   //Build Intent/Pending Intent for canceling the alarm
        Intent AlarmIntent = new Intent(Multiple.this, AlarmReciever.class);
        AlarmManager AlmMgr = (AlarmManager)getSystemService(ALARM_SERVICE);
        PendingIntent Sender = PendingIntent.getBroadcast(Multiple.this, number, AlarmIntent, 0);  
        AlmMgr.cancel(Sender);
    }
} 
```

任何人都可以帮助我创建我的闹钟............？

# mysql - Mysql SELECT查询名称忽略第一个单词，如果它是“the”，“a”，“an”等

> ID：14517984
> 
> 赞同：2
> 
> 时间：2013-01-25T08:24:48.200
> 
> 标签：mysql, regex, select

我一直在尝试（没有成功）构建一个 MYSQL 查询，该查询将选择一组记录，其“标题”字段以单个字母字符开头，但如果它是“The”、“An”或“A”则忽略第一个单词”。我已经找到了很多针对查询的 ORDER BY 部分执行此操作的示例，但这是我需要为其执行的初始 WHERE 部分，因为如果未找到正确的记录，则顺序无关紧要。使用

```
WHERE title LIKE "R%" 
```

只会给我以这个作为第一个字母的标题（例如“Robin Hood”），但不会匹配“The Red House”。我想我需要某种正则表达式，但我似乎无法让它工作。

例如，给定以下电影标题，

*路屋*

*王者回归*

*妈妈咪呀*

*阿尔戈*

*泰坦尼克号*

*一条河流穿过它*

选择以“R”开头的电影标题将返回以下内容：

*王者回归*

*一条河流穿过它*

*客栈*

（其他字段省略）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T08:29:38.580

最简单的方法是以编程方式将查询扩展为类似

```
SELECT
...
WHERE
  title LIKE 'R%'
  OR title LIKE 'The R%'
  OR title LIKE 'A R%'
  OR title LIKE 'An R%'
  ... 
```

这应该比 REGEX 执行得更好，因为它将能够使用 REGEX 永远不会使用的索引。

顺便说一句：执行此操作的规范方法是将文章存储在单独的字段中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T08:30:54.460

此正则表达式应满足您的需求：

```
WHERE title REGEXP '^(The |An? )?R.*$' 
```

但正如@EugenRieck 注意到的那样，由于您可能在`title`列上使用索引，因此您应该更好地使用`WHERE... OR...`子句。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T09:32:43.603

要添加到上述建议（我都同意），对于排序，您可能需要使用 CASE 为 ORDER BY 子句派生一个字段。

```
SELECT somefield, 
CASE 
WHEN title LIKE 'R%' THEN title
WHEN title LIKE 'The R%' THEN SUBSTRING(title FROM 5)
WHEN title LIKE 'A R%' THEN SUBSTRING(title FROM 3)
WHEN title LIKE 'An R%' THEN SUBSTRING(title FROM 4)
ELSE title
END AS SortTitle
FROM sometable
ORDER BY SortTitle 
```

# c# - 如何检查软键盘是否在设备上打开

> ID：14517986
> 
> 赞同：1
> 
> 时间：2013-01-25T08:25:02.347
> 
> 标签：c#, android, xamarin.android

我必须检测是否打开了软键盘。我在这里阅读了一些关于如何做到这一点的文章，一个例子是[>this<](https://stackoverflow.com/questions/12369140/android-how-to-track-if-soft-keyboard-is-openned)还有另一个，也许更好的一个，但是两个 ar 针对同一个目标，以检查布局/视图是否被迫调整大小。

我的问题是，这一切都是 java 代码，我不能用 java 代码做任何事情，因为我不知道 API 的 Monodroid 等价物，以及其他一些小事情......

我发现的另一件事是，有一个 InputMethodService.OnWindowShown() 方法/事件，以及是否显示键盘的标识符。

```
var inputManager = (InputMethodService)GetSystemService(InputMethodService);
inputManager.OnWindowShown();
bool bla = inputManager.IsInputViewShown; 
```

有没有办法通过这些行来识别键盘是否打开，或者我是否必须调整大小？如果调整大小是唯一的事情，它如何在 Mono for Android 中工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T08:48:57.140

尝试这个：

```
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);

    if (imm.isAcceptingText()) {
        writeToLog("Software Keyboard was shown");
    } else {
        writeToLog("Software Keyboard was not shown");
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T10:03:03.383

您**无法检测**是否显示软键盘，但您可以通过知道**您的活动视图已调整大小**来间接知道显示了软键盘。
这 2 行隐藏了软键盘..

```
var input = (InputMethodManager)GetSystemService(InputMethodService);
input.HideSoftInputFromWindow(editText1.WindowToken, HideSoftInputFlags.None); 
```

也能看。。

*   [Android.InputMethodServices.InputMethodService.InputMethodImpl.HideSoftInput](http://androidapi.xamarin.com/?link=M%3aAndroid.InputMethodServices.InputMethodService.InputMethodImpl.HideSoftInput#)

# java - String.replace 实现真的有效吗？

> ID：14517990
> 
> 赞同：15
> 
> 时间：2013-01-25T08:25:09.807
> 
> 标签：java

我曾经认为 String.replace 比 String.replaceAll 快，因为后者使用 Pattern 正则表达式，而前者没有。但实际上无论是性能还是实现上都没有显着差异。就是这个：

```
public String replace(CharSequence target, CharSequence replacement) {
    return Pattern.compile(target.toString(), Pattern.LITERAL).matcher(
        this).replaceAll(Matcher.quoteReplacement(replacement.toString()));
} 
```

这里有什么需要使用 Pattern 的？我写了一个非正则表达式替换版本

```
static String replace(String s, String target, String replacement) {
    StringBuilder sb = new StringBuilder(s);
    for (int i = 0; (i = sb.indexOf(target, i)) != -1; i += replacement.length()) {
        sb.replace(i, i + target.length(), replacement);
    }
    return sb.toString();
} 
```

并比较性能

```
 public static void main(String args[]) throws Exception {
        String s1 = "11112233211";
        for (;;) {
            long t0 = System.currentTimeMillis();
            for (int i = 0; i < 1000000; i++) {
//              String s2 = s1.replace("11", "xxx");
                 String s2 = replace(s1, "11", "22");
            }
            System.out.println(System.currentTimeMillis() - t0);
        }
    } 
```

基准测试：我的版本 - `400ms`; JDK 版本 - `1700ms`.

我的测试是错误的还是 String.replace 真的低效？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-25T08:28:24.900

为了让您了解 String.replace 的效率如何

来自 Java 7 更新 11 的源代码。

```
public String replace(CharSequence target, CharSequence replacement) {
    return Pattern.compile(target.toString(), Pattern.LITERAL).matcher(
        this).replaceAll(Matcher.quoteReplacement(replacement.toString()));
} 
```

AFAIK，使用 Pattern 和 Matcher.quiteReplacement 等是为了清晰而不是高效。我怀疑它可以追溯到许多内部库在没有性能考虑的情况下编写的时候。

恕我直言，Java 7 已经看到许多内部库提高了性能，特别是减少了不必要的对象创建。这种方法是一个明显的改进候选者。

* * *

您可以通过执行一次复制来提高性能，而不是尝试插入现有的 StringBuilder。

```
static String replace2(String s, String target, String replacement) {
    StringBuilder sb = null;
    int start = 0;
    for (int i; (i = s.indexOf(target, start)) != -1; ) {
        if (sb == null) sb = new StringBuilder();
        sb.append(s, start, i);
        sb.append(replacement);
        start = i + target.length();
    }
    if (sb == null) return s;
    sb.append(s, start, s.length());
    return sb.toString();
}

public static void main(String... ignored) {
    String s1 = "11112233211";
    for (; ; ) {
        timeReplace(s1);
        timeReplace2(s1);
        timeStringReplaceRefactored(s1);
        timeStringReplace(s1);
    }
}

private static void timeStringReplace(String s1) {
    long start0 = System.currentTimeMillis();
    for (int i = 0; i < 1000000; i++) {
        String s2 = s1.replace("11", "xxx");
        if (s2.length() <= s1.length()) throw new AssertionError();
    }
    System.out.printf("String.replace %,d ns avg%n", System.currentTimeMillis() - start0);
}

private static void timeStringReplaceRefactored(String s1) {
    long start0 = System.currentTimeMillis();
    Pattern compile = Pattern.compile("11", Pattern.LITERAL);
    String xxx = Matcher.quoteReplacement("xxx");
    for (int i = 0; i < 1000000; i++) {
        String s2 = compile.matcher(s1).replaceAll(xxx);
        if (s2.length() <= s1.length()) throw new AssertionError();
    }
    System.out.printf("String.replace %,d ns avg (Refactored)%n", System.currentTimeMillis() - start0);
}
private static void timeReplace(String s1) {
    long start0 = System.currentTimeMillis();
    for (int i = 0; i < 1000000; i++) {
        String s2 = replace(s1, "11", "xxx");
        if (s2.length() <= s1.length()) throw new AssertionError();
    }
    System.out.printf("Replace %,d ns avg%n", System.currentTimeMillis() - start0);
}

private static void timeReplace2(String s1) {
    long start0 = System.currentTimeMillis();
    for (int i = 0; i < 1000000; i++) {
        String s2 = replace2(s1, "11", "xxx");
        if (s2.length() <= s1.length()) throw new AssertionError();
    }
    System.out.printf("My replace %,d ns avg%n", System.currentTimeMillis() - start0);
}

static String replace(String s, String target, String replacement) {
    StringBuilder sb = new StringBuilder(s);
    for (int i = 0; (i = sb.indexOf(target, i)) != -1; i += replacement.length()) {
        sb.replace(i, i + target.length(), replacement);
    }
    return sb.toString();
} 
```

印刷

```
Replace 177 ns avg
My replace 108 ns avg
String.replace 436 ns avg (Refactored)
String.replace 598 ns avg 
```

捕捉模式并替换文本会有所帮助，但不如使用自定义例程进行替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T09:07:57.507

至少在我的机器上比较这两种解决方案时，有一个有趣的方面。当涉及到更大的字符串时，内置版本的扩展性要好得多。给定一个稍微修改过的测试版本：

```
for (int i = 0; i < 10; i++) {
    s1 = s1 + s1;
    long t0 = call1(s1); // your implementation
    long t1 = call2(s1); // 1.7_07 Oracle
    long delta = t0 - t1;

    System.out.println(
      String.format("Iteration %s, string length %s, call1 %s, call2 %s, delta %s", i, s1.length(), t0, t1, delta));

    try {
        Thread.sleep(200);
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
} 
```

通过每次调用将字符串长度加倍，在迭代 3 或 4 之后已经达到收支平衡：

```
Iteration 0, string length 22, call1 450, call2 1715, delta -1265
Iteration 1, string length 44, call1 1048, call2 2152, delta -1104
Iteration 2, string length 88, call1 2695, call2 4024, delta -1329
Iteration 3, string length 176, call1 7737, call2 7574, delta 163
Iteration 4, string length 352, call1 24662, call2 15560, delta 9102 
```

作为参考 call1 和 call2 的两个实现：

```
static long call1(String s) {
    long t0 = System.currentTimeMillis();
    for (int i = 0; i < 1000000; i++) {
        String s2 = replace(s, "11", "22");
    }
    return System.currentTimeMillis() - t0;
}

static long call2(String s) {
    long t0 = System.currentTimeMillis();
    for (int i = 0; i < 1000000; i++) {
        String s2 = s.replace("11", "xxx");
    }
    return System.currentTimeMillis() - t0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-18T19:13:45.977

字符串替换和替换所有方法在效率或时间上没有差异

```
package com.jav.exec;

public class replace {

    static String s1="This the India the india the nation";

    public static String replace(String s2,String s3)
    {
        int counter=0;
        int count=s3.length()-1;
        int count1=0;
        char[] ca1=s1.toCharArray();
        char[] ca2=s2.toCharArray();
        char[] ca3=s3.toCharArray();

        for(int f1=0;f1<ca1.length;f1++)//finding the number of occurances
        {
            if(ca1[f1]==ca2[counter])//increasing counter if charecters matches
            {
                counter++;

                if(counter==s2.length())//if consecutive charecters makes count equal to replacing string
                {
                    count1++;//increasing the count if consecutive charecters matches the striing
                    counter=0;//making counter 0 for next occurence
                }
            }
            else
            {
                counter=0;//making counter 0 if occurence less than the string 
            }
        }

        char[] ca4=new char[ca1.length+(count1*ca3.length)-(count1*ca2.length)];
        //creating new sized array for storing values
        counter=0;
        count=s3.length()-1;
        count1=0;
        int count2=0;

        for(int f=0;f<ca4.length;f++)
        {
            ca4[f]=ca1[count2];//storing the values into the new array of original long array
            //increasing the count  
            if(ca1[count2]==ca2[counter])//if charecters matches replacing array charecters
            {
                counter++;
                if(counter==ca2.length)//if counter is equal to length of replacing array
                {
                    f=f+ca3.length-ca2.length;//increasing the count of f
                    for(int f1=0;f1<ca3.length;f1++)//storing replaced array charecters to new array
                    {
                        ca4[f-count]=ca3[count1];
                        count1++;
                        count--;
                    }
                    counter=0;//redeclaring variables to their inital values for next replacement
                    count1=0;
                    count=s3.length()-1;
                }
            }

            else
            {   
                while(counter>0)
                {   
                    ca4[f-counter]=ca1[count2-counter];
                    counter--;
                }
            }
            count2++;
        }
        return new String(ca4);
    }

    public static void main(String[] args)
    {
        System.out.println(replace("the","mother"));
    }
} 
```

# android - 在 android 中使用 HPACK 或 CJSON 的库

> ID：14517993
> 
> 赞同：5
> 
> 时间：2013-01-25T08:25:28.153
> 
> 标签：android, json

是否有任何库可以使用 HPACK 或 CJSON 在 android 中压缩 json 对象？

# typo3 - Typo3 TCA itemsProcFunc with extbase

> ID：14517994
> 
> 赞同：1
> 
> 时间：2013-01-25T08:25:28.917
> 
> 标签：typo3, extbase

我尝试使用 extbase-action 填充我的 tca 中的选择框。

```
"config" => Array (
    "type" => "select",
    "itemsProcFunc" => 'classname->function'
} 
```

我让它调用函数，但没有调用注入方法。我的错误是什么？

我认为没有 extbase 引导调用，但我怎样才能实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T09:41:19.857

最简单的方法是创建一个在内部调用 extbase 的“遗留”PHP 类。

# android - ViewGroup 在 dispatchDraw 导致 StackOverflow

> ID：14517997
> 
> 赞同：3
> 
> 时间：2013-01-25T08:25:42.670
> 
> 标签：android, android-viewpager, android-view, stack-overflow

我有一个覆盖 ViewGroup 的类。这是我对 dispatchDraw 的实现：

```
@Override
protected void dispatchDraw(final Canvas canvas) {
    super.dispatchDraw(canvas);

    mViewBehind.drawShadow(mContent, canvas);
    mViewBehind.drawFade(mContent, canvas, getPercentOpen());
    mViewBehind.drawSelector(mContent, canvas, getPercentOpen());
} 
```

但是，有时我会收到此 StackOverflowError：

```
01-25 09:20:38.569: E/AndroidRuntime(15480): FATAL EXCEPTION: main
01-25 09:20:38.569: E/AndroidRuntime(15480): java.lang.StackOverflowError
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.text.BoringLayout.draw(BoringLayout.java:365)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.widget.TextView.onDraw(TextView.java:4225)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.View.draw(View.java:6880)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.View.draw(View.java:6883)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.widget.AbsListView.dispatchDraw(AbsListView.java:1586)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.widget.GridView.dispatchDraw(GridView.java:1948)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.View.draw(View.java:6986)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.widget.AbsListView.draw(AbsListView.java:2967)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.View.draw(View.java:6883)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.View.draw(View.java:6986)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.widget.ScrollView.draw(ScrollView.java:1423)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.View.draw(View.java:6883)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.View.draw(View.java:6883)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at com.ui.library.slidingmenu2.CustomViewAbove.dispatchDraw(CustomViewAbove.java:931)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.View.draw(View.java:6883)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.View.draw(View.java:6883)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at com.ui.library.slidingmenu2.CustomViewAbove.dispatchDraw(CustomViewAbove.java:931)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.View.draw(View.java:6883)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.View.draw(View.java:6883)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at com.ui.library.slidingmenu2.CustomViewAbove.dispatchDraw(CustomViewAbove.java:931)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.View.draw(View.java:6883)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.View.draw(View.java:6883)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1921)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.ViewRoot.draw(ViewRoot.java:1528)
01-25 09:20:38.569: E/AndroidRuntime(15480):    at android.view.Vie 
```

堆栈跟踪显示`com.ui.library.slidingmenu2.CustomViewAbove.dispatchDraw(CustomViewAbove.java:931)`（即`super.dispatchDraw(canvas)`）至少被调用了 4 次。

只有当我返回某个包含 ViewPager 的活动时才会发生异常，该活动的第一个 Fragment 包含一个 GridView，而且只有几次。

（顺便说一句，`BoringLayout`反正是什么？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-14T12:12:29.393

BoringLayout 是一个非常简单的 Layout 实现，适用于适合一行的文本，并且都是从左到右的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T09:36:19.683

一定有太多的层，尽量减少你的布局层。

# php - 将数据从joomla中的单个组件存储在不同组件的多个表中

> ID：14517998
> 
> 赞同：1
> 
> 时间：2013-01-25T08:25:44.987
> 
> 标签：php, database, components, joomla2.5

是否可以将数据存储在单个组件的不同组件的多个表中？

我想同时存储`com_ccnewsletter`和`com_ccnewsletter`的数据`com_content`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T03:28:48.963

是的，除非您知道表结构以及要存储到其中的数据，否则您可以直到。只需将查询写入您的组件即可。