# StackOverflow 问答 16025000-16025999

# android - android：延迟调用适配器的 getView()

> ID：16025000
> 
> 赞同：1
> 
> 时间：2013-04-15T21:27:56.150
> 
> 标签：android, android-listview, android-arrayadapter, android-animation

我有一个列表视图，并且我已经实现了一个扩展的适配器，`ArrayAdapter`
我已经覆盖了`getView()`实现自定义视图的方法。

我正在尝试对 List 元素的渲染进行动画处理，以赋予它们滑动效果，从而使行看起来一个接一个地滑动...
我尝试使用以下代码对其进行动画处理：

`Animation animation = AnimationUtils.loadAnimation(myActivity, R.anim.slide_in_left); animation.setDuration(duration);`
`if(myActivity.flinging) duration+=50;`
`rowView.startAnimation(animation);`

这确实为行设置了动画，但动画并不流畅。
有没有办法做到这一点？我正在考虑这样做的另一种方法是延迟对 getView() 的调用，但找不到这样做的方法。

有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:35:27.737

您应该使用 LayoutAnimationController 为列表视图项提供动画。

```
 AnimationSet set = new AnimationSet(true);
    Animation animation1 = AnimationUtils.loadAnimation(this, R.anim.slide_in_left);
    animation1.setDuration(300);
    set.addAnimation(animation1);
    LayoutAnimationController controller = new LayoutAnimationController(set,1.0f);

    mListView.setLayoutAnimation(controller); 
```

作为参考，您可以检查此文件。

[示例参考](https://code.google.com/p/localguide/source/browse/trunk/src/com/mani/localguide/results.java)

# image-processing - 如何将jpg转换为只有黑白的位图

> ID：16025005
> 
> 赞同：0
> 
> 时间：2013-04-15T21:28:34.667
> 
> 标签：image-processing, bitmap, imagemagick

我有一个 jpeg 文件，我想为它找到每个像素的颜色。所以我想先将jpg转换为位图，然后将阈值应用于位图文件[将每个像素转换为黑色或白色]，然后编写一个C代码，消除文件头的前54个字节，然后以三个 [RGB] 为一组获取字节并检查颜色。

现在，如何从 jpeg 转换为位图，以及如何使用 imagemagick 对其应用阈值？我应该使用什么命令？

另外，我是否在处理我的 C 代码的像素部分时得到纠正？即，我将拒绝位图文件中的前 54 个字节，然后一次获取三个字节，并以不同方式存储每个字节。并对所有其他“三个字节的块”执行相同的操作。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T13:10:56.960

```
convert <jpgfile> -threshold xx% <bmpfile> 
```

至于 BMP 标头信息，我不认为它那么简单......我在 C 方面很弱，但请查看[http://en.wikipedia.org/wiki/BMP_file_format](http://en.wikipedia.org/wiki/BMP_file_format)以获取您的标头信息. 它说它的长度是可变的。我建议在 Google 上搜索有关在 C 中读取 BMP 文件的示例代码。

或 ==> "[将位图文件读入结构](https://stackoverflow.com/questions/14279242/read-bitmap-file-into-structure)"

# javascript - Wysihtml5 - 关闭 HTML Sanitizer

> ID：16025006
> 
> 赞同：4
> 
> 时间：2013-04-15T21:28:48.113
> 
> 标签：javascript, html, twitter-bootstrap, wysiwyg, wysihtml5

我正在构建一个像 WordPress 页面构建器一样使用的页面构建器 - 它不需要更改我在页面中编程的任何 html（我是一名程序员并且正在使用它 - 这样我就可以轻松地修改页面并且它是更改，而不必处理 GIT 的工具）。

我之所以把它做成所见即所得的编辑器，是因为我想让一些与我一起工作的非技术人员编辑一些内容（即更改图像、修复拼写、添加内容等）。

我正在使用 bootstrap-wysihtml5（[链接](http://jhollingworth.github.io/bootstrap-wysihtml5/)）。

## **编辑：**

查看源代码后，我发现我想关闭部分 HTML Sanitizer。显然我需要一些帮助来确保我的代码是好的，但我不希望它删除类/标签/...等。

具有相同 jist 的另一个问题：[link](https://stackoverflow.com/questions/13681594/how-to-disabled-wysihtml5-html-clean-up-in-editor)

* * *

## 原始问题：

我已经研究了如何做到这一点，并发现我可以使用`ParserRules`. 但是在写了 25 多行之后，它似乎仍然在弄乱我的 html。

现在我可以继续并继续关闭这些 parserRules，但我认为这可能不是正确的方法，因为我将继续遇到这个天才系统的怪癖。

有没有办法删除它，这样它就不会剥离 html？

## 原始 HTML

```
<form action="/contact-us/send" name="contact-form" id="contact-form" method="post">
    <table class="form-table"><tbody>
            <tr class="field">
                <td class="form-label"><label for="fullname"><span class="req"></span> Full Name</label></td>
                <td class="form-input"><input type="text" name="fullname" id="fullname"></td>
            </tr>
            <tr class="field">
                <td class="form-label"><label for="email"><span class="req"></span> Email</label></td>
                <td class="form-input"><input type="text" name="email" id="email"></td>
            </tr>
            <tr class="field">
                <td class="form-label"><label for="phone"><span class="req"></span> Phone</label></td>
                <td class="form-input"><input type="text" name="phone" id="phone"></td>
            </tr>
            <tr class="field">
                <td class="form-label"><label for="feedback"><span class="req"></span> Questions/Feedback</label></td>
                <td class="form-input"><textarea name="feedback" id="feedback"></textarea></td>
            </tr>
        </tbody></table>
</form> 
```

## 当前输出 HTML

```
<form>
    <span>
        <span>
            <label> Full Name</label>
            <input>
        </span>
        <span>
            <label> Email</label>
            <input>
        </span>
        <span>
            <label> Phone</label>
            <input>
        </span>
        <span>
            <label> Questions/Feedback</label>
            <textarea></textarea>
        </span>
    </span>
</form> 
```

## 当前的 ParserRules

```
 parserRules: {
            classes: {
                // (path_to_project/lib/css/wysiwyg-color.css)
                "wysiwyg-color-silver": 1,
                "wysiwyg-color-gray": 1,
                "wysiwyg-color-white": 1,
                "wysiwyg-color-maroon": 1,
                "wysiwyg-color-red": 1,
                "wysiwyg-color-purple": 1,
                "wysiwyg-color-fuchsia": 1,
                "wysiwyg-color-green": 1,
                "wysiwyg-color-lime": 1,
                "wysiwyg-color-olive": 1,
                "wysiwyg-color-yellow": 1,
                "wysiwyg-color-navy": 1,
                "wysiwyg-color-blue": 1,
                "wysiwyg-color-teal": 1,
                "wysiwyg-color-aqua": 1,
                "wysiwyg-color-orange": 1
            },
            tags: {
                "b": {},
                "i": {},
                "br": {},
                "ol": {},
                "ul": {},
                "li": {},
                "h1": {},
                "h2": {},
                "h3": {},
                "blockquote": {},
                "u": 1,
                "img": {
                    "check_attributes": {
                        "width": "numbers",
                        "alt": "alt",
                        "src": "url",
                        "height": "numbers"
                    }
                },
                "a": {
                    set_attributes: {
                        target: "_blank",
                        rel: "nofollow"
                    },
                    check_attributes: {
                        href: "url" // important to avoid XSS
                    }
                },
                "span": 1,
                "div": 1,
                // to allow save and edit files with code tag hacks
                "code": 1,
                "pre": 1,
                "label": {},
                "legend": {},
                "textarea": {},
                "html": {},
                "button": {},
                "select": {},
                "option": {},
                "iframe": {},
                "form": {},
                "head": {},
                "object": {},
                "noscript": {},
                "svg": {},
                "input": {},
                "meta": {},
                "video": {},
                "canvas": {},
                "source": {},
                "frame": {},
                "style": {},
                "xml": {},
                "param": {},
                "audio": {},
                "link": {},
                "script": {},
                "colgroup": {},
                "comment": {},
                "header": {}
            }
        }, 
```

我还试图切换它是如何删除课程的（正如[这个](https://stackoverflow.com/questions/15906030/how-to-toggle-remove-classes-in-wysihtml5)问题所问的那样 - 不知道他在做什么......但标题很合适） - 这似乎是由`ParserRules:classes`; 再次，我想我需要关闭整个 ParserRules。

# jms - 我应该使用 JMS 进行 Web 日志记录吗？

> ID：16025008
> 
> 赞同：0
> 
> 时间：2013-04-15T21:28:58.427
> 
> 标签：jms

我正在设计一个网络日志系统。其中一项要求是在不显着影响 Web 应用程序性能的情况下记录页面请求（多个节点）。我有两个实现：

1.  将数据插入远程数据库。
2.  通过 JMS 将数据作为消息发送。如果节点和 Web 记录器主系统之间的连接暂时中断，则让 JMS 处理重试尝试。

第二种方法是否矫枉过正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:05:08.447

JMS 应该是一个很好的方法。

您可以通过简单的 log4j 配置来实现这一点。

[http://www.slf4j.org/nlog4j/api/org/apache/log4j/net/JMSAppender.html](http://www.slf4j.org/nlog4j/api/org/apache/log4j/net/JMSAppender.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:05:25.110

如果您想要远程日志记录，我认为第二种方法是正确的。

使用 Log4j JMSAppender 将消息附加到 JMS 队列。将 JMS Appenders 与 ActiveMQ 一起使用的示例位于以下链接，

[http://activemq.apache.org/how-do-i-use-log4j-jms-appender-with-activemq.html](http://activemq.apache.org/how-do-i-use-log4j-jms-appender-with-activemq.html)

如果您不使用 ActiveMQ，只需相应地更改 InitialContextFactoryName 和 ProviderURL 属性。

# javascript - 如何在 javascript 中使用自定义方法来扩充对象？

> ID：16025021
> 
> 赞同：0
> 
> 时间：2013-04-15T21:30:27.490
> 
> 标签：javascript, factory

我想知道如何在javascript（nodejs）中为从外部（数据库，网络等）接收的对象提供行为的最佳实践。

例如，假设我有一些`getById(<Id>)`从数据库中获取正确对象的函数，你将如何`save`在这个函数返回的对象上添加一个方法？

这是我想要的：

```
var getById = function (id) {
   var obj = callSomeExternalCode(id);
   return obj;
};
var myObj = getById('1234');
myObj.aProperty = 'a_new_value';
myObj.save(); 
```

我宁愿避免使用伪经典的解决方案（无论如何，如果你能给我一个好的解决方案，我可能会根据我的风格调整它）

编辑：我忘了提，将这些方法定义在一个单独的“父”对象中会非常好（即使，我想，原型继承不是答案）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:48:13.070

为什么不将 myObj 传递给前面的另一个工厂/装饰对象？

IE

```
myAugmentedObj = User.augment(myObj);
myAugmentedObj.save(); 
```

编辑：

更具体地说：

```
var UserModule = {
  save: function ( ... ) { ... },
  anotherFunction: function ( ... ) { ... }
};

var User = {
  augment: function (user) {
    return $.extend(user, UserModule);
  }
}; 
```

顺便一提，

我实际上会让 User 成为一个类，并将 UserModule 作为它的一部分而不是一个单独的对象，然后创建新对象作为 User 的实例。但是您明确提到避免经典继承。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T22:04:42.650

> 将这些方法定义在单独的“父”对象中会非常好

然后这样做：

```
var parent = {
    save: function() {…}
};
function getById(id) {
    // There's a shortcut function called "extend" for this in many libs:
    // return extend(callSomeExternalCode(id), parent);
    // which does
    var obj = callSomeExternalCode(id);
    for (var p in parent)
        obj[p] = parent[p]; // copy
    return obj;
} 
```

> 我想，原始继承不是答案

可能是这样，尤其是如果在 new 上的属性`parent`比在新的`obj`. 然后你可以这样做（即使没有任何伪经典代码）：

```
function getById(id) {
    // return extend(Object.create(parent), callSomeExternalCode(id));
    // long:
    var obj = callSomeExternalCode(id),
        res = Object.create(parent);
    for (var p in obj)
        res[p] = obj[p]; // copy
    return res;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T21:37:35.867

像这样的东西？

```
var getById = function (id) {
    var obj = callSomeExternalCode(id);

    obj.save = function() {
        // do something
    }

    return obj;
}; 
```

# java - org.apache.axis.wsdl.toJava.DuplicateFileException：重复的文件名：

> ID：16025023
> 
> 赞同：2
> 
> 时间：2013-04-15T21:30:39.467
> 
> 标签：java, web-services, wsdl, wsdl2java

我正在尝试使用 Axis 1.4 从 WSDL 文件创建客户端项目（我没有其他选择，甚至无法使用 Axis 2）并出现以下错误。任何人都可以建议我如何解决它？WSDL 文件由供应商提供。

```
org.apache.axis.wsdl.toJava.DuplicateFileException: Duplicate file name: C:\Documents and Settings\My Documents\CalculateTax\com\NewProj\CompanyCodeType.java.  
Hint: you may have mapped two namespaces with elements of the same name to the same package name.
    at org.apache.axis.wsdl.toJava.JavaWriter.generate(JavaWriter.java:110)
    at org.apache.axis.wsdl.toJava.JavaBeanWriter.generate(JavaBeanWriter.java:1405)
    at org.apache.axis.wsdl.toJava.JavaTypeWriter.generate(JavaTypeWriter.java:113)
    at org.apache.axis.wsdl.toJava.JavaGeneratorFactory$Writers.generate(JavaGeneratorFactory.java:421)
    at org.apache.axis.wsdl.gen.Parser.generateTypes(Parser.java:547)
    at org.apache.axis.wsdl.gen.Parser.generate(Parser.java:432)
    at org.apache.axis.wsdl.gen.Parser.access$000(Parser.java:45)
    at org.apache.axis.wsdl.gen.Parser$WSDLRunnable.run(Parser.java:362)
    at java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-27T08:05:14.493

Axis 1.4 错误描述是 ( [https://issues.apache.org/jira/browse/AXIS-2606](https://issues.apache.org/jira/browse/AXIS-2606) )

```
Hint: you may have mapped two namespaces with elements of the same name to the same package name. 
```

因此，您可以通过省略可选参数来解决此问题

```
-p, --package <argument>
    override all namespace to package mappings, use this package
     name instead 
```

...它将生成您的 WSDL 类而不会出错。如有必要，您可以稍后重构它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-19T08:31:14.180

您不必使用轴 2。

例如，如果您有这样的 wsdl 的一部分：

```
 ...
  <xs:complexType name="Address">
    <xs:sequence>
      <xs:element name="Country" type="xs:string"/>
      <xs:element name="City" type="xs:string"/>
      <xs:element name="Town" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="address">
    <xs:sequence>
      <xs:element name="leftSideOfAt" type="xs:string"/>
      <xs:element name="domain" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="OwnerAddress" type="tns:Address" />
  <xs:element name="EmailAddress" type="tns:address" />
  <xs:element name="CompanyEmailAddress" type="tns:address" />
  ... 
```

这是一个合法的 WSDL 定义，但 Axis 失败了。您可以通过重命名 complexTypes 来解决此问题。对于上面的例子：

```
 ...
  <xs:complexType name="Address">
    <xs:sequence>
      <xs:element name="Country" type="xs:string"/>
      <xs:element name="City" type="xs:string"/>
      <xs:element name="Town" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="Email">
    <xs:sequence>
      <xs:element name="leftSideOfAt" type="xs:string"/>
      <xs:element name="domain" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
  <xs:element name="OwnerAddress" type="tns:Address" />
  <xs:element name="EmailAddress" type="tns:Email" />
  <xs:element name="CompanyEmailAddress" type="tns:Email" />
  ... 
```

关键是当您将 complexType 的名称写为“ **PascalCase** ”时，它会与另一个名称冲突！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-23T07:37:29.520

当您尝试使用具有相同元素名称的 wsdl 生成 java 客户端时，就会出现此问题。请更改元素名称并尝试。否则可以使用eclipse工具生成java客户端。它将自动检测相同的元素名称并为其创建单独的包。 **使用 Eclipse 生成 java 客户端：右键单击 wsdl 文件 > Web 服务 > 生成客户端。** 这应该可以帮助你。

# knockout.js - 使用knockout foreach生成元素，但保留静态元素

> ID：16025025
> 
> 赞同：0
> 
> 时间：2013-04-15T21:30:49.017
> 
> 标签：knockout.js

我想使用 Knockout 生成以下 HTML

```
<tr>
    <th>Substatus</th>
    <th>Header 1</th>
    <th>Header 2</th>
    <th>Total</th>
</tr> 
```

如果数据模型看起来像这样......

```
function Model() {
    var self = this;
    self.headers = ko.observableArray([{ Description: 'Header 1' }, { Description: 'Header 2' }]);
} 
```

请注意，第一个和最后一个列标题不是由数据模型指定的，而是静态定义的。我将如何更改以下模板以输出我需要的标题？

```
<script type="text/html" id="vendorReportTemplate">
    <tr>
        <th>Substatus</th>

        <!--somehow i need knockout to generate the dynamic headers here-->

        <th>Total</th>
    </tr>
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:34:16.663

[虚拟元素](http://knockoutjs.com/documentation/custom-bindings-for-virtual-elements.html)

```
<tr>
    <th>Substatus</th>

    <!-- ko foreach: headers -->
    <th data-bind="text: Description"></th>
    <!-- /ko -->
    <th>Total</th>
</tr> 
```

[例子](http://jsfiddle.net/QrMEy/)

# php - php页脚链接

> ID：16025033
> 
> 赞同：-1
> 
> 时间：2013-04-15T21:31:22.540
> 
> 标签：php, html, css, wordpress, hyperlink

如何让页脚的页眉成为链接？目前我有这个代码：

```
 <div id="footer">
                     <div id="foot">
                     <ul class="clearfix">
                  <li>Stores 
                     <ul>
            <li><a href="/stores/speedway">Speedway</a></li>
            <li><a href="/stores/ina">Ina</a></li>
            <li><a href="/stores/grant">Grant</a></li>
            <li><a href="/stores/phoenix">Phoenix</a></li>
            <li><a href="/stores/mesa">Mesa</a></li>
            <li><a href="/stores/flagstaff">Flagstaff</a></li>
        <li><a href="/stores/sports">Sports Exchange</a></li>
    </ul>
</li> 
```

我希望标题商店成为链接或可点击并转到商店的主页我如何在不改变白色的情况下做到这一点。我怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:32:51.157

只需使用内联样式来覆盖颜色。

```
<a href="/stores/" style="text-decoration:none;color:white">Stores</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:35:53.823

您可以在 onclick 事件中使用 jQuery 或 JavaScript 来执行链接行为。

```
<li id="#stores" onclick="location.href='/stores/';">Stores
... 
```

然后在样式表中为商店 ID 设置样式：

```
#stores {
   color: white;
   ...
} 
```

# objective-c - 更改 UIView 框架时移动元素

> ID：16025034
> 
> 赞同：2
> 
> 时间：2013-04-15T21:31:23.410
> 
> 标签：objective-c, ios6, autolayout

我的 UITextView 很少。每个 TextView 都会在焦点上改变它的大小 - 它会增长大约 50 像素，动画如下所示：

```
[UITextView animateWithDuration:.1f animations:^{
    CGRect new_frame = textView.frame;
    new_frame.size.height += height;
    textView.frame = new_frame;
}]; 
```

现在我的问题是我需要将 TextViews 向下移动 50px（显然也带有动画）。我想知道如何以最简单的方式做到这一点。我的应用程序只有 iOS6，所以我可以使用自动布局。我尝试过，但失败了。我尝试使用支柱和弹簧 - 也失败了。

想到的唯一解决方案是使用动画将每个元素向下移动 50 像素。但这对我来说听起来很便宜。任何想法如何做到这一点？自动布局可以吗？

**编辑**

以下是我一直在尝试的布局：

![垂直布局](https://i.stack.imgur.com/1KIF9.png)

![在此处输入图像描述](https://i.stack.imgur.com/k0sCW.png)

这是单击第一个 TextView 后在模拟器中的外观：

![在此处输入图像描述](https://i.stack.imgur.com/11bFg.png)

所以你可以看到它宁愿覆盖下一个视图并且不保留约束。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T12:54:57.093

不要将帧与自动布局结合起来，这会给你带来不可预知的结果。

删除从第二个顶部到其父视图顶部的约束`UITextView`。

然后为 的高度约束创建一个出口`UITextView`。

使用以下代码调整高度`UITextView`：

```
- (void)textViewDidBeginEditing:(UITextView *)textView
{
    [UITextView animateWithDuration:.1f animations:^{
        self.textViewHeightConstraint.constant +=50;
        [self.view layoutIfNeeded];
    }];
}

-(void)textViewDidEndEditing:(UITextView *)textView
{
    [UITextView animateWithDuration:.1f animations:^{
        self.textViewHeightConstraint.constant -=50;
        [self.view layoutIfNeeded];
    }];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T21:46:05.930

这应该很容易通过自动布局实现，您需要在每个文本视图上设置一个垂直空间约束，告诉它在其上方的文本视图之间留下 x 像素。

这是一个很好的自动布局教程，它应该有助于解释一些概念，如果你在它有点棘手之前没有使用过自动布局。

[在 iOS 6 中开始自动布局](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T21:46:37.167

在我看来，这听起来像是 Apple 提供了一个带有表格视图的解决方案的问题。

您可以在表格视图中增加一行的高度，随后的行将自动下推。对此进行动画处理也很简单。

# .net - 回收工作进程后从会话 cookie 中读取的 ClaimsIdentity 类型不正确

> ID：16025035
> 
> 赞同：3
> 
> 时间：2013-04-15T21:31:29.250
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-4, .net-4.5, claims-based-identity

在 VS 2012 / .NET 4.5 / ASP.NET MVC 4 应用程序中，我有一个从`ClaimsIdentity`. 为了方便起见，它只是向基类添加了一些只读属性，这些属性从一些声明中读取值：

```
public class AppIdentity : ClaimsIdentity
{
    public AppIdentity(IEnumerable<Claim> claims) : base(claims, "Custom")

    public string CustomProp { get { return FindFirst("CustomClaim").Value; } }
    // etc.
} 
```

在自定义`ClaimsAuthenticationManager`中，我将传入的主体转换为包装上述身份的主体，为此主体创建令牌并将令牌写入 cookie：

```
var claims = new List<Claim>
{
    new Claim("CustomClaim", "CustomValue"),
    // etc.
};
var newPrincipal = new ClaimsPrincipal(new AppIdentity(claims));
var sessionToken = new SessionToken(newPrincipal, TimeSpan,FromHours(24));
FederatedAuthentication.SessionAuthenticationModule
    .WriteSessionTokenToCookie(sessionToken); 
```

如果我在这样的控制器操作中获取后续请求的身份......

```
var identity = ClaimsPrincipal.Current.Identity; 
```

...我发现有时运行时类型`identity`is`AppIdentity`有时它只是它的基本类型`ClaimsIdentity`。我的自定义声明始终存在`Claims`于`identity`.

当工作进程被回收时，身份似乎“丢失”了`AppIdentity`我期望的类型。目前我只在这个项目中使用 IIS Express 开发服务器，例如，当我在 web.config 中做一些小的更改时，我可以强制这种行为。之后，身份始终具有类型`ClaimsIdentity`，而`AppIdentity`不再具有。

问题：这种将自定义声明身份类型保存在 cookie 中的方法是否错误并且可能不受支持？会话 cookie 是否存储了派生的类型信息`ClaimsIdentity`（我猜，这对于从 cookie 中实现正确的身份类型是必要的）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T05:20:17.023

类型标识在序列化往返期间丢失。我在这里写过：http: [//leastprivilege.com/2012/10/08/custom-claims-principals-in-net-4-5/](http://leastprivilege.com/2012/10/08/custom-claims-principals-in-net-4-5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-06T14:09:10.220

您可以实现一个简单`HttpModule`的检查主体中的传入身份，并将其转换为您自己的实现

```
public class MyClaimsAuthenticationModule : IHttpModule
{
    public void Init(HttpApplication context)
    {
        context.PostAuthenticateRequest += Context_PostAuthenticateRequest;

    }

    public void Dispose()
    {
        // Nothing to dispose, method required by IHttpModule
    }

    void Context_PostAuthenticateRequest(object sender, EventArgs e)
    {
        var transformer = FederatedAuthentication.FederationConfiguration.IdentityConfiguration.ClaimsAuthenticationManager;
        if (transformer != null)
        {
            var context = ((HttpApplication)sender).Context;
            var principal = context.User as ClaimsPrincipal;

            var oo = principal.Identity is DaIdentity;
            if (!oo)
                principal = new ClaimsPrincipal(new DaIdentity(principal.Identity as ClaimsIdentity));

            var transformedPrincipal = transformer.Authenticate(context.Request.RawUrl, principal);

            context.User = transformedPrincipal;
            Thread.CurrentPrincipal = transformedPrincipal;
        }
    }
} 
```

然后像这样在 Web.config 中注册它

```
 <modules runAllManagedModulesForAllRequests="true">

      <add name="TestAuthenticationModule" Type="MyAssemby.MyClaimsAuthenticationModule, MyAssembly" preCondition="managedHandler" />

      <add name="SessionAuthenticationModule" type="System.IdentityModel.Services.SessionAuthenticationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" preCondition="managedHandler" />
      <add name="ClaimsAuthorizationModule" type="System.IdentityModel.Services.ClaimsAuthorizationModule, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" preCondition="managedHandler" />
      <remove name="FormsAuthentication" />
      <remove name="WebDAVModule" />
    </modules> 
```

# wso2esb - wso2 无法从注册表中找到指定的 wsdl

> ID：16025038
> 
> 赞同：2
> 
> 时间：2013-04-15T21:31:38.417
> 
> 标签：wso2esb

好的，我们开始吧。问题是，使用我的代理服务，我单击设计视图，从注册表发布 wsdl，我选择已加载到注册表中的 wsdl，然后尝试保存代理，但出现以下错误：

```
Couldn't build the proxy service : gasd_lookup. Unable to locate the specified WSDL to build the service {org.wso2.carbon.proxyadmin.service.ProxyServiceAdmin} 
```

org.wso2.carbon.proxyadmin.ProxyAdminException：尝试将代理服务添加到 ESB 配置时出错：gasd_lookup :: 无法构建代理服务：gasd_lookup。找不到指定的 WSDL 来构建服务

当然，这很烦人，因为我已经通过 web gui 从注册表中选择了资源，所以它显然在那里......

这是我的设置： wso2esb 4.6.0 服务代码来自 gov 注册表 4.5.3，通过部署同步器自定义证书用于连接到 BAM 2.2.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T21:17:10.973

我通过启用缓存消除了我的评论中的上述错误，之后我能够看到真正的错误，不幸的是，它被记录为调试。错误是：

faultCode=INVALID_WSDL：遇到非法扩展元素 '{ [http://schemas.xmlsoap.org/wsdl/](http://schemas.xmlsoap.org/wsdl/) }porttype'

当我从 chrome 中取出 wsdl 并保存它时，chrome 已经自动将一些驼色外壳更改为小写。这是一个铬错误。

当然，wso2 报告的初始错误是完全不正确的，因为它确实在注册表中找到了该文件，但它是无效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T10:59:52.593

这里有同样的错误信息。也许是一个更快的解决方案：我使用 WSO2 Developer Studio 来验证项目 WSDL，它很快就发现了问题。（进入WSDL，右击，“验证”，你的错误出现在问题视图中）

# javascript - 没有重新定义的Javascript关闭

> ID：16025049
> 
> 赞同：2
> 
> 时间：2013-04-15T21:32:48.837
> 
> 标签：javascript, closures

如果这是重复的，请告诉我这是什么重复。如何让 js 闭包在多个函数中重用？似乎我无法弄清楚，我可能遗漏了一些东西，但我要么必须继续重新实现内部函数（以创建闭包），要么将函数放在外面（但是，它不再是闭包了）。我如何同时做这两个？

示例：所以一个 js 闭包是这样创建的：

```
function a()
{
    var x = "99";
    var b = function()
    {
       //x=99
    }
}

function z()
{
    var x = "99";
    var b = function()
    {
       //x=99
    }
} 
```

但是，这不是关闭：

```
function bTemplate()
{
   //when coming from call of b() in m, x will not be the x from function m!
}
function m()
{
    var x = "99";
    var b = bTemplate;
    b(); //x is not the x from function m
}
function n()
{
    var x = "98";
    var b = bTemplate;
    b(); //x is not the x from function m
} 
```

我的问题是： **如何从外部定义一个函数（以避免重复），同时创建一个闭包，这样就不必传入参数？也许这真的很明显，但由于某种原因，无法弄清楚。**

**例如上面，如果 m 和 n 是稍微不同的包装函数，如何在不将 bTemplate 实现为两者的内部函数的情况下捕获两者的状态？**

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:49:10.620

这是一种潜在的方法：

```
function make_b(x) {
    var b = function() {
        //x come from argument to make_b
    };
    return b;
}

function a() {
    var x = "99";
    var b = make_b(x);
}

function z() {
    var x = "99";
    var b = make_b(x);
} 
```

这允许您仅在一个地方定义函数，并且`b`在两个地方都可以访问的值，而无需使用闭包传入。我认为这符合您的要求，尽管您还不清楚为什么您不想只通过.`a``z``x``b``x``b`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T21:39:24.890

```
function Wrapper(){
    var x = "99";
    this.bTemplate = function()
    {
       //has access now to x because x is closed over by wrapper function 
    }

    this.m = function()
    {
        var b = bTemplate;
        b(); //x is now the same x as m because it is declared in Wrapper
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T21:40:11.080

你能解决你的问题吗：

```
function cl() {
    var x = 99;

    var funcs = {};
    funcs.a = function() {
        return x;
    }

    funcs.b = function() {
        return 2*x;
    }
    return funcs;
}

theFuncs = cl();

theFuncs.a();
theFuncs.b(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T21:44:46.133

你完全错过了词汇范围的意义。

在您的示例中，函数 a 和 b 属于同一范围，因此每个函数都应该有一个彼此完全不可见的内部范围链。您尝试这样做的方式违反了 JavaScript 解释器的工作方式，因此如果不发明自己的 DSL 或其他东西，这是不可能的。

您应该使用第二个示例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-16T19:59:46.053

您可以利用`this`隐式传递给函数的参数。但同样，它仍然在“传递”一些东西，即使它没有明确声明为参数。

```
function bTemplate()
{
   // here use this.x
}
function m()
{
    this.x = "99";
    bTemplate.call(this);
}
function n()
{
    this.x = "98";
    bTemplate.call(this);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-15T22:34:38.897

我认为你们都说得对，我不能同时做这两件事。我必须重新定义它，或者通过它。我想没有什么能阻止我确保内部函数具有定义为自身属性的变量，然后通过函数调用将该内部函数本身传递给外部模板函数，然后以这种方式捕获环境，如果我真的想拥有多个内部函数将自己传递给外部，这可能是唯一的方法不是吗？我想我现在明白了。谢谢！

**示例：http: [//jsfiddle.net/BY3Kc/3/](http://jsfiddle.net/BY3Kc/3/)**

HTML：

```
<div id="a"></div> 
```

CSS：

```
$("#a").css({"width":500,"height":500,"border":"3px solid"});

function outsider(obj,cb)
{
    console.log(obj.o);
    cb();
}

$("#a").on("click",function(){
   var that = arguments.callee;
    that.o = "a";
    outsider(that,function(){console.log("done")});

});

$("#a").on("dblclick",function(){
   var that = arguments.callee;
    that.o = "b";
    outsider(that,function(){console.log("done2")});

}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-16T08:16:24.590

你不能。这是**词法作用域**的要点——变量的使用是指在*词法封闭作用域中*定义的变量，即在源代码中物理地围绕它的作用域。因此，您可以通过查看源代码来确定单独引用的变量。

因此，如果要`x`在函数中使用变量，它必须是参数或局部变量，或者必须在词法范围内定义。

如果您希望能够在*调用范围内*引用变量，则称为**动态范围**。动态范围很有趣，但并不直观。历史上有些语言使用动态范围。今天常用的语言都没有使用动态作用域（Perl 可以做动态作用域，但默认情况下它仍然是词法作用域）。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-04-15T22:01:57.297

两种可能的解决方案。

一。使用有争议的`eval()`.

```
function changeX() {
  x += 40;
  console.log(x);
}

function a() {
  var x = 7;
  eval(changeX.toString());
  changeX();
} 
```

二。放弃与闭包的恋情。只需使用您喜欢的任何口味的“普通”对象。

```
function Closure() {
  this.changeX = function() {
    this.x += 40;
    console.log(this.x);
  }
}

function a() {
  Closure.apply(this);
  this.x = 1;
  this.changeX();
}

function b() {
  Closure.apply(this);
  this.x = 2;
  this.changeX();
}

function c() {
  this.x = 3;
  this.changeX();
}
c.prototype = new Closure(); 
```

...或者您更喜欢构建您的对象。

请记住，“正常”对象和闭包之间的唯一区别（至少与您的问题有关）是`this.`变量前面是否存在缺失。

我个人建议方法二：只需构建对象并习惯于键入`this.`和`that.`. `eval()`完成工作，但这是有争议的和不必要的。

# ios - 在 Storyboard 中加载 ViewController

> ID：16025053
> 
> 赞同：2
> 
> 时间：2013-04-15T21:33:05.000
> 
> 标签：ios, ios5, uiviewcontroller, storyboard, uistoryboard

我正在使用侧视图控制器设置：[https ://github.com/edgecase/ECSlidingViewController](https://github.com/edgecase/ECSlidingViewController)

初始视图控制器使用标识符为“InitialViewController”的情节提要加载。

一旦为此加载到 viewDidLoad 中，我将使用以下命令检查用户是否已登录：

```
UIStoryboard *storyboard;

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
    storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
} else if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPad" bundle:nil];
}

if (![PFUser currentUser]){
    self.topViewController = [storyboard instantiateViewControllerWithIdentifier:@"WelcomeVC"];
} else {
    self.topViewController = [storyboard instantiateViewControllerWithIdentifier:@"HomeVC"];
} 
```

根据上述，如果用户没有登录，它会加载 WelcomeVC。WelcomeVC 是一个导航控制器，其中包含 3 个 Vc。欢迎/登录/注册。

用户登录后，我需要将 topViewController（如上）更改为 HomeVC。如果可能，可以关闭名为 WelcomeVC 的导航控制器。如何更改此 topViewController 我已经尝试过，但它不起作用：

UIStoryboard *故事板；

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) {
    storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
} else if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPad" bundle:nil];
}

self.EVC = [storyboard instantiateViewControllerWithIdentifier:@"InitialViewController"];
self.EVC.topViewController = [storyboard instantiateViewControllerWithIdentifier:@"HomeVC"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:15:28.033

就个人而言，我喜欢从一开始就将主屏幕设置为根视图控制器，并`viewDidAppear`通过非动画模式转场自动将我带到登录屏幕（我更喜欢`performSegueWithIdentifier`故事板的转场显示整个流程，而不是手动实例化控制器并调用`pushViewController`，但不管对你有用）。然后，我在成功登录后，只需返回主屏幕即可。这样，我就不必更改顶级控制器。

所以我的故事板看起来像：

![在此处输入图像描述](https://i.stack.imgur.com/qpwis.png)

所以我的主要“家”视图控制器具有以下内容`viewDidAppear`：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    if (![[Model sharedManager] loggedIn])
        [self performSegueWithIdentifier:@"login" sender:self];
} 
```

显然，您确定是否登录的逻辑会有所不同，但您明白了。我的登录对登录屏幕进行了模态搜索（无动画），而我恰好在一系列登录屏幕上使用了导航控制器。

然后，我的最终成功登录过程会：

```
- (IBAction)didTouchUpInsideDoneButton:(id)sender
{
    // ok, assuming at this point that everything has been validated and 
    // I'm ready to return, so just dismiss the navigation controller.
    // You could use unwind segue in iOS 6, as well.

    [[Model sharedManager] setLoggedIn:YES];

    [self.navigationController dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-08T13:06:48.777

在 application:didFinishLaunchingWithOptions: 中，我检查用户是否已经登录，如果是，我跳转到配置文件：

```
-(void)goToProfile {
    UIStoryboard *storyboard = self.window.rootViewController.storyboard;
    UINavigationController *rootNav = [storyboard instantiateViewControllerWithIdentifier:@"MainNavigationController"];
    if (![self.window.rootViewController isKindOfClass:[rootNav class]]) {
        self.window.rootViewController = rootNav;
    }
    else {
        [(UINavigationController *)self.window.rootViewController popToRootViewControllerAnimated:YES];
    }
} 
```

didFinishLaunchingWithOptions 不需要任何其他内容。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    if ([self isLoggedIn]) {
        [self goToProfile];
    }
    else {
        NSLog(@"Not logged in");
    }
    return YES;    
} 
```

在我的故事板中，主分支进入注册流程，登录视图的导航控制器的故事板 ID 为 MainNavigationController。 ![我的故事板](https://i.imgur.com/V9SIPbS.png)

# javascript - 为什么我的模型框架的 forEach 原型不起作用？

> ID：16025054
> 
> 赞同：0
> 
> 时间：2013-04-15T21:33:11.133
> 
> 标签：javascript

演示：http: [//jsfiddle.net/3WpNG/17/](http://jsfiddle.net/3WpNG/17/)

我只是在制作一个框架（出于学习目的），我正在尝试添加一个 forEach 方法，所以当我调用`ezWork().class('big').forEach(function(element) { console.log(element) });`

它会做它应该做的事情，但我收到错误，任何信息都会很棒，这是我到目前为止的代码：

```
var ezWork = (function (win, doc) {

    function EzWork(element) {
        this.element = this.iD(element);
    }

    EzWork.prototype = {
        iD: function (element) {
            return document.getElementById(element);
        },

        on: function (event, callback, override) {
            var attach = window.hasOwnProperty('addEventListener'),
                meth = attach ? 'attachEvent' : 'addEventListener',
                prefix = attach ? 'on' : '';
            if (!override) {
                this.element[meth](prefix + event, callback, false);
            } else {
                this['on' + event] = callback;
            }
            return this;
        },
        class: function(element) {
         return doc.getElementsByClassName(element);   
        },

        forEach: function() {
            if(!Array.prototype.forEach) {
                Array.prototype.forEach = function(fn, scope) {
                    for(var i = 0, len = this.length; i < len ; i += 1) {
                         fn.call(scope, this[i], i, this);
                    }
                }
            }
        }
    };
    //
    return function (element) {
        return new EzWork(element);
    }
})(window, document);

console.log(ezWork().class('button'));

ezWork().class('button').forEach(function(element) {
    console.log(element);
}); 
```

`Error: Uncaught TypeError: Object #<NodeList> has no method 'forEach'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:37:23.573

下次最好使用控制台。从那里开始，错误就很清楚了。

```
for(var i = 0; len = this.length; i < len ; i += 1)
//           ^---- this should be a comma 
```

* * *

这是[一个粗略](http://jsfiddle.net/3WpNG/21/)的包装示例：

```
function EzWork(element) {
    //stores the data into an instance property
    this.element = element;
}

EzWork.prototype = {
    class: function (element) {
        //wraps the result into the instance and returns the instance
        return new EzWork(doc.getElementsByClassName(element));
    },
    forEach: function (fn) {

        var instance = this;

        //run through the data in the instance
        for (var i = 0, len = instance.element.length; i < len; i += 1) {
            fn.call(instance.element, instance.element[i], i, instance.element);
        }

    }
}; 
```

# php - 无法使 PHP 更新功能正常工作

> ID：16025057
> 
> 赞同：1
> 
> 时间：2013-04-15T21:33:19.393
> 
> 标签：php, html, mysql, web, project

您好我正在使用 html 和 PHP 来更新数据库表中的变量，我已确保 html 表单可以正常工作，并使用 echos 来确保脚本正在运行。它没有给我任何错误迹象，但不会更新表格。为了澄清我的 html 代码工作正常，因为该功能正在工作并且所有正确的回声都出来了。这是我希望有人能告诉我哪里出错的代码。谢谢！

```
<?php
session_start();
$healthyPig = 50;
$userNamer = $_SESSION['rememberMe'];
echo $userNamer;
$connect=(mysql_connect("localhost","lpwd10","lpwd10","lpwd10_proj"));
if (mysql_error())
  {
  echo "Failed to connect";
  }
echo "connected SON";
mysql_query($connect,"UPDATE user SET 'pigHealth' = $healthyPig WHERE userName='$userNamer'");
header('Location: pigManager.php');
echo "Complete";
mysql_close($con);

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:35:47.180

该值应该用引号引起来，而不是列名

`"UPDATE user SET pigHealth = '$healthyPig' WHERE userName='$userNamer'"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-18T16:50:10.650

我认为你把`mysql_`和`mysqli_`扩展搞混了。

使用`mysql_`扩展名你的`query()`陈述是错误的

```
mysql_query($connect,"UPDATE user SET 'pigHealth' = $healthyPig WHERE   userName='$userNamer'"); 
```

应该

```
mysql_query("UPDATE user SET 'pigHealth' = $healthyPig WHERE userName='$userNamer'", $connect); 
```

> 但是您不应该再使用该`mysql_`扩展，它已被弃用多年并且已从 PHP7 中完全删除，因此您使用它编写的任何代码都不会在 PHP7 上运行。
> 
> 特别是如果您只是学习 PHP，请花精力学习`PDO`数据库扩展。 [从这里开始](http://php.net/manual/en/book.pdo.php)

# haskell - 编写 lambda 表达式的“curried 版本”

> ID：16025060
> 
> 赞同：1
> 
> 时间：2013-04-15T21:33:24.767
> 
> 标签：haskell, lambda, currying

我正在研究 Haskell，并试图了解如何将柯里化的概念应用于函数。我理解柯里化本质上是一种采用具有多个参数的函数并将该函数应用于一个参数，返回一个应用于第二个参数的函数，依此类推......而不会失去任何表现力。我正在研究的一个教程要求：

“写一个咖喱版的`2 * (\x y -> x*y)2 3`”

我希望有人可以帮助告诉我如何解决这个问题。提前致谢

编辑：在回复两位评论者时，我可以看到认识到

`(\x y -> x*y) :: Num a => a -> a -> a`

...是我的第一步。在函数式编程方面，我的学习曲线相当缓慢（还有新的 SO 海报，所以请原谅我打破的任何礼仪）......我的下一步是什么？

编辑2：@Mikhail，我看到`uncurry`应用于 lambda 表达式的类型将是某种形式（给定`uncurry :: (a -> b -> c) -> (a,b) -> c`）

```
Num a => (a,a) -> a 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T09:48:53.963

您对柯里化的基本理解是正确的。具体来说，它是关于转换一个将其参数作为元组的函数，例如

```
add :: (Int, Int) -> Int
add    (x, y)     =  x + y 
```

进入一个函数，一次只接受一个参数：

```
add' :: Int -> Int -> Int
add'    x      y   =  x + y 
```

该方案允许您将现在柯里化的函数应用于*部分应用程序*，即，应用它的一些但不是全部的参数。例如我们可以有

```
succ :: Int -> Int
succ =  add' 1 
```

我们应用`add'`到它的第一个参数并产生一个仍然期望剩余参数的函数。

逆变换称为 uncurrying，它将一个“一个接一个”接受参数的函数转换为一个“一次”接受其参数作为元组的函数。

这两种转换都可以被高阶函数族捕获。也就是说，对于二元函数有

```
curry :: ((a, b) -> c) -> (a -> b -> c)
curry    f             =  \x y -> f (x, y)

uncurry :: (a -> b -> c) -> ((a, b) -> c)
uncurry    f             =  \(x, y) -> f x y 
```

对于三元函数有

```
curry3 :: ((a, b, c) -> d) -> (a -> b -> c -> d)
curry3    f                =  \x y z -> f (x, y, z)

uncurry3 :: (a -> b -> c -> d) -> ((a, b, c) -> d)
uncurry3    f                  =  \(x, y, z) -> f x y z 
```

等等。

现在让我们看一下您的示例：

```
2 * (\x y -> x * y) 2 3 
```

在这里，您将文字`2`与应用程序的结果相乘，该函数`(\x y -> x * y)`将其两个参数`x`和`y`. 正如你所看到的，这个函数已经“一个接一个”地接受它的参数。因此，它已经咖喱了。因此，如果他们要求编写此表达式的咖喱版本，您的教程中的含义超出了我的范围。我们可以做的是通过让乘法函数“一次性”接受它的参数来编写一个非*柯里化*`(\(x, y) -> x * y)`版本：然后我们得到

```
2 * (\(x, y) -> x * y) (2, 3) 
```

现在请注意，可以写`(\(x, y) -> x * y)`为`uncurry (*)`，这将给我们

```
2 * uncurry (*) (2, 3) 
```

如果我们也 uncurry 的第一个应用程序（或者实际上是应用程序，复数;-)）`(*)`，我们产生

```
uncurry (*) (2, uncurry (*) (2, 3)) 
```

我怀疑这是否是您教程中练习的意图，但我希望这能让您对 currying 和 uncurrying 有所了解。

# xaml - 相当于 WinRT 中的可编辑组合框？

> ID：16025064
> 
> 赞同：4
> 
> 时间：2013-04-15T21:33:34.200
> 
> 标签：xaml, windows-8, windows-store-apps, winrt-xaml

标准（桌面）窗口组合框具有三种样式；简单、下拉和下拉列表。Dropdown 像编辑控件和组合框一样工作，而 Drop List 不允许编辑。

我是否遗漏了什么，或者 Windows 8 商店应用程序中的 XAML ComboBox 控件仅支持下拉列表样式？

当我遇到这个问题时，我正在实施一些事情，而且我越看，似乎越不支持它。

我真的需要用编辑控件和列表框替换屏幕中的组合框吗？

呸。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-09T15:05:30.107

感谢 edward.ho.tpe 的回答，我通过使用`TextBox`里面的`ComboBoxItem`. 如果您想多次使用它，最好创建一个 UserControl。

然而，这就是我的做法：

### 样式：

```
<SolidColorBrush x:Key="TransparentBrush" Color="Transparent"/>
<Style x:Key="ComboBoxItemTextBox" TargetType="TextBox">
    <Setter Property="MinWidth" Value="{ThemeResource TextControlThemeMinWidth}"/>
    <Setter Property="MinHeight" Value="{ThemeResource TextControlThemeMinHeight}"/>
    <Setter Property="Foreground" Value="{ThemeResource TextBoxForegroundThemeBrush}"/>
    <Setter Property="Background" Value="{StaticResource TransparentBrush}"/>
    <Setter Property="BorderBrush" Value="{StaticResource TransparentBrush}"/>
    <Setter Property="SelectionHighlightColor" Value="{ThemeResource TextSelectionHighlightColorThemeBrush}"/>
    <Setter Property="BorderThickness" Value="0"/>
    <Setter Property="FontFamily" Value="{ThemeResource ContentControlThemeFontFamily}"/>
    <Setter Property="FontSize" Value="{ThemeResource ControlContentThemeFontSize}"/>
    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Hidden"/>
    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Hidden"/>
    <Setter Property="ScrollViewer.IsDeferredScrollingEnabled" Value="False"/>
    <Setter Property="Padding" Value="{ThemeResource TextControlThemePadding}"/>
    <Setter Property="Margin" Value="-10,0,0,0"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="TextBox">
                <Grid>
                    <Grid.Resources>
                        <Style x:Name="DeleteButtonStyle" TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Grid>
                                            <VisualStateManager.VisualStateGroups>
                                                <VisualStateGroup x:Name="CommonStates">
                                                    <VisualState x:Name="Normal"/>
                                                    <VisualState x:Name="PointerOver">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="BackgroundElement">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextBoxButtonPointerOverBackgroundThemeBrush}"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="BorderElement">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextBoxButtonPointerOverBorderThemeBrush}"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="GlyphElement">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextBoxButtonPointerOverForegroundThemeBrush}"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="Pressed">
                                                        <Storyboard>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="BackgroundElement">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextBoxButtonPressedBackgroundThemeBrush}"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="BorderElement">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextBoxButtonPressedBorderThemeBrush}"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="GlyphElement">
                                                                <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextBoxButtonPressedForegroundThemeBrush}"/>
                                                            </ObjectAnimationUsingKeyFrames>
                                                        </Storyboard>
                                                    </VisualState>
                                                    <VisualState x:Name="Disabled">
                                                        <Storyboard>
                                                            <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BackgroundElement"/>
                                                            <DoubleAnimation Duration="0" To="0" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderElement"/>
                                                        </Storyboard>
                                                    </VisualState>
                                                </VisualStateGroup>
                                            </VisualStateManager.VisualStateGroups>
                                            <Border x:Name="BorderElement" BorderBrush="{ThemeResource TextBoxButtonBorderThemeBrush}" BorderThickness="{TemplateBinding BorderThickness}"/>
                                            <Border x:Name="BackgroundElement" Background="{ThemeResource TextBoxButtonBackgroundThemeBrush}" Margin="{TemplateBinding BorderThickness}">
                                                <TextBlock x:Name="GlyphElement" AutomationProperties.AccessibilityView="Raw" Foreground="{ThemeResource TextBoxButtonForegroundThemeBrush}" FontStyle="Normal" FontFamily="{ThemeResource SymbolThemeFontFamily}" HorizontalAlignment="Center" Text="&#xE0A4;" VerticalAlignment="Center"/>
                                            </Border>
                                        </Grid>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </Grid.Resources>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Disabled">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="BackgroundElement">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextBoxDisabledBackgroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="BorderBrush" Storyboard.TargetName="BorderElement">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextBoxDisabledBorderThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentElement">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextBoxDisabledForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="PlaceholderTextContentPresenter">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource TextBoxDisabledForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Normal">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="{ThemeResource TextControlBackgroundThemeOpacity}" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BackgroundElement"/>
                                    <DoubleAnimation Duration="0" To="{ThemeResource TextControlBorderThemeOpacity}" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderElement"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="PointerOver">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="{ThemeResource TextControlPointerOverBackgroundThemeOpacity}" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BackgroundElement"/>
                                    <DoubleAnimation Duration="0" To="{ThemeResource TextControlPointerOverBorderThemeOpacity}" Storyboard.TargetProperty="Opacity" Storyboard.TargetName="BorderElement"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Focused"/>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="ButtonStates">
                            <VisualState x:Name="ButtonVisible"/>
                            <VisualState x:Name="ButtonCollapsed"/>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <Border x:Name="BackgroundElement" Background="{TemplateBinding Background}" Grid.ColumnSpan="2" Margin="{TemplateBinding BorderThickness}" Grid.Row="1" Grid.RowSpan="1"/>
                    <Border x:Name="BorderElement" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Grid.ColumnSpan="2" Grid.Row="1" Grid.RowSpan="1"/>
                    <ContentPresenter x:Name="HeaderContentPresenter" Grid.ColumnSpan="2" ContentTemplate="{TemplateBinding HeaderTemplate}" Content="{TemplateBinding Header}" Foreground="{ThemeResource TextBoxForegroundHeaderThemeBrush}" FontWeight="Semilight" Margin="0,4,0,4" Grid.Row="0"/>
                    <ScrollViewer x:Name="ContentElement" AutomationProperties.AccessibilityView="Raw" HorizontalScrollMode="{TemplateBinding ScrollViewer.HorizontalScrollMode}" HorizontalScrollBarVisibility="{TemplateBinding ScrollViewer.HorizontalScrollBarVisibility}" IsTabStop="False" IsHorizontalRailEnabled="{TemplateBinding ScrollViewer.IsHorizontalRailEnabled}" IsVerticalRailEnabled="{TemplateBinding ScrollViewer.IsVerticalRailEnabled}" IsDeferredScrollingEnabled="{TemplateBinding ScrollViewer.IsDeferredScrollingEnabled}" Margin="{TemplateBinding BorderThickness}" Padding="{TemplateBinding Padding}" Grid.Row="1" VerticalScrollBarVisibility="{TemplateBinding ScrollViewer.VerticalScrollBarVisibility}" VerticalScrollMode="{TemplateBinding ScrollViewer.VerticalScrollMode}" ZoomMode="Disabled"/>
                    <ContentControl x:Name="PlaceholderTextContentPresenter" Grid.ColumnSpan="2" Content="{TemplateBinding PlaceholderText}" Foreground="{ThemeResource TextBoxPlaceholderTextThemeBrush}" IsHitTestVisible="False" IsTabStop="False" Margin="{TemplateBinding BorderThickness}" Padding="{TemplateBinding Padding}" Grid.Row="1"/>
                    <Button x:Name="DeleteButton" BorderThickness="{TemplateBinding BorderThickness}" Grid.Column="1" FontSize="{TemplateBinding FontSize}" IsTabStop="False" Grid.Row="1" Style="{StaticResource DeleteButtonStyle}" Visibility="Collapsed" VerticalAlignment="Stretch"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

### 组合框：

```
<ComboBox SelectionChanged="ComboBox_SelectionChanged">
    <ComboBoxItem IsSelected="True">
        <TextBox x:Name="tbComboBox" Style="{StaticResource ComboBoxItemTextBox}" KeyDown="tbComboBox_KeyDown"/>
    </ComboBoxItem>
    <ComboBoxItem>Item 1</ComboBoxItem>
    <ComboBoxItem>Item 2</ComboBoxItem>
    <ComboBoxItem>Item 3</ComboBoxItem>
    <ComboBoxItem>Item 4</ComboBoxItem>
</ComboBox> 
```

### 事件处理程序：

```
private void ComboBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    if (e.AddedItems.Count == 1 && e.AddedItems[0] != (sender as ComboBox).Items[0])
    {
        (sender as ComboBox).SelectedIndex = 0;
        tbComboBox.Text = (e.AddedItems[0] as ComboBoxItem).Content as String;
    }
}

private void tbComboBox_KeyDown(object sender, KeyRoutedEventArgs e)
{
    if (e.Key == Windows.System.VirtualKey.Space)
    {
        if (tbComboBox.SelectionLength > 0)
        {
            tbComboBox.Text = tbComboBox.Text.Remove(tbComboBox.SelectionStart, tbComboBox.SelectionLength);
            tbComboBox.SelectionLength = 0;
        }
        int pos = tbComboBox.SelectionStart;
        tbComboBox.Text = tbComboBox.Text.Insert(pos, " ");
        tbComboBox.SelectionStart = pos + 1;
        e.Handled = true;
    }
} 
```

## 所以基本上这是什么：

正如 edward.ho.tpe 建议 a`TextBox`作为 a 的第一项的内容`ComboBox`。有`TextBox`一个自定义样式，可以删除背景、边框，将其向左移动一点（可选 - 但我喜欢它，因为它提供了更多的书写空间），并更改了删除按钮以保持折叠状态。事件`SelectionChanged`处理程序确保`TextBox`保持`SelectedItem`并且仅`Text`根据所选项目的内容更改 ，并且`KeyDown`事件处理程序处理空格 keydown ，否则会触发`ComboBox`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-02T10:38:12.303

[WinRT 的 Syncfusion Controls](http://www.syncfusion.com/products/winrt/controls)也包含一个 ComboBox。但它不是免费的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-08-22T05:12:52.047

由于 WinRT 中的组合框项目可以是任何东西，您可以：

```
<ComboBoxItem>
<TextBox Text="something"/>
</ComboBoxItem> 
```

当用户单击该项目时，他/她可以编辑其内容。

是否让编辑结果更改该项目的编辑框或只是将新的组合框项目添加到该组合框取决于您。在 LostFocus 事件中处理它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-22T20:40:22.007

你没有错过任何东西。开箱即用的工具箱中没有可编辑的组合框。

您可能已经尝试过 winrt xaml 工具包@http [://winrtxamltoolkit.codeplex.com/](http://winrtxamltoolkit.codeplex.com/) 但它也没有。太糟糕了，因为它是免费的。

您可能已经看过 ComponentOne @ [http://www.componentone.com/SuperProducts/StudioWinRTXAML/](http://www.componentone.com/SuperProducts/StudioWinRTXAML/) 但这也没有。

您可能看过 Infragistics @ [http://www.infragistics.com/products/technology-previews/windows8/](http://www.infragistics.com/products/technology-previews/windows8/) 但该工具包仍处于“预览”状态。

您可能看过 Telerik @ [http://www.telerik.com/products/windows-8/overview.aspx](http://www.telerik.com/products/windows-8/overview.aspx) 他们有一个组合框[http://www.telerik.com/products/windows-8/controls/combo-盒子.aspx](http://www.telerik.com/products/windows-8/controls/combo-box.aspx)

但你可能想要一些免费的东西。目前没有 Microsoft XAML 工具包。所以你需要自己构建或者找一个开源项目。我暂时找不到这样的项目。

但是什么是真正的可编辑组合框？一个标准的组合框和一个文本框，对吧？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-10-22T05:05:27.737

通过设置

```
combobox.ComboBoxMode = ComboBoxModes.Editable 
```

在syncfusion SfComboBox 中，您可以编辑组合框。

问候，

埃拉瓦拉桑 M

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-08-01T11:42:59.363

我知道这是一个老问题，但对于像我这样的新搜索者，我发现 [ComboBox.IsEditable](https://msdn.microsoft.com/en-us/library/system.windows.controls.combobox.iseditable(v=vs.110).aspx)属性很好

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-04-18T14:32:48.383

[![AutoSuggestBox UI 控件](https://i.stack.imgur.com/Ajoup.png)](https://i.stack.imgur.com/Ajoup.png)

试试名为[AutoSuggestBox的 UIControl](https://docs.microsoft.com/en-us/uwp/api/windows.ui.xaml.controls.autosuggestbox)

```
<AutoSuggestBox PlaceholderText="Company">
     <AutoSuggestBox.QueryIcon>
         <SymbolIcon Symbol="find"/>
     </AutoSuggestBox.QueryIcon>
</AutoSuggestBox> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-12-22T10:28:12.323

我到处寻找可搜索组合框，并决定编写自己的组合框。它不像您的可编辑组合框，但会在键入时过滤组合框中的选项。也许这可以帮助某人。

您将像这样定义一个新控件：

```
<control:SearchableComboBox Margin='5'
          x:Name='ComboBoxCountry'
          ItemsSourceList='{Binding CountryList}'
          ItemsSourceListBase='{Binding CountryListBase}'
          PlaceholderText='Select Country'/> 
```

不幸的是，您仍然需要提供一个重复的列表 CountryListBase。如果您有改进的建议，请告诉我！

```
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using Windows.System;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Input;

namespace eMoyoConnect.Controls
{
    public class SearchableComboBox : ComboBox
    {

        public ObservableCollection<string> ItemsSourceList
        {
            get { return (ObservableCollection<string>)GetValue(ItemsSourceListProperty); }
            set
            {
                SetValue(ItemsSourceListProperty, value);
                this.ItemsSource = ItemsSourceList;
            }
        }

        public static readonly DependencyProperty ItemsSourceListProperty =
            DependencyProperty.Register("ItemsSourceList", typeof(ObservableCollection<string>), typeof(SearchableComboBox),
            new PropertyMetadata(null, ItemsSourceListChanged));

        private static void ItemsSourceListChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            var plv = d as SearchableComboBox;
            plv.ItemsSource = e.NewValue;
        }

        public Collection<string> ItemsSourceListBase
        {
            get { return (Collection<string>)GetValue(ItemsSourceListBaseProperty); }
            set
            {
                SetValue(ItemsSourceListBaseProperty, value);
                this.ItemsSource = ItemsSourceListBase;
            }
        }

        public static readonly DependencyProperty ItemsSourceListBaseProperty =
            DependencyProperty.Register("ItemsSourceListBase", typeof(Collection<string>), typeof(SearchableComboBox),
            new PropertyMetadata(null, ItemsSourceListBaseChanged));

        private static void ItemsSourceListBaseChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            var plv = d as SearchableComboBox;
            plv.ItemsSource = e.NewValue;
        }

        string FilterString = "";
        protected override void OnKeyDown(KeyRoutedEventArgs e)
        {
            if (IsLetterOrSpace(e.Key))
            {
                if (e.Key == VirtualKey.Space)
                    FilterString += " ";
                else
                    FilterString += e.Key.ToString();
                FilterList(FilterString);
                this.ItemsSource = ItemsSourceList;
                if (ItemsSourceList.Count > 0)
                    this.SelectedIndex = 0;
            }
            else if (e.Key == VirtualKey.Back)
            {
                if (FilterString.Length > 0)
                {
                    FilterString = FilterString.Substring(0, FilterString.Length - 1);
                    FilterList(FilterString);
                    this.ItemsSource = ItemsSourceList;
                    if (ItemsSourceList.Count > 0)
                        this.SelectedIndex = 0;
                }
            }

            if (e.Key != VirtualKey.Space)
            {
                base.OnKeyDown(e);
            }
        }

        protected override void OnGotFocus(RoutedEventArgs e)
        {
            string selectedValue = "";
            if (this.SelectedValue != null)
                selectedValue = (string)this.SelectedValue;
            FilterString = "";
            FilterList(FilterString);
            if (!string.IsNullOrEmpty(selectedValue))
                this.SelectedValue = selectedValue;
        }

        internal void FilterList(string FilterString)
        {
            ItemsSourceList.Clear();
            IEnumerable<string> list;
            if (!string.IsNullOrEmpty(FilterString))
                list = ItemsSourceListBase.Where(x => x.StartsWith(FilterString));
            else
                list = ItemsSourceListBase;
            foreach (var item in list)
                ItemsSourceList.Add(item);
        }

        private bool IsLetterOrSpace(VirtualKey key)
        {
            return (key == VirtualKey.A
                || key == VirtualKey.B
                || key == VirtualKey.C
                || key == VirtualKey.D
                || key == VirtualKey.E
                || key == VirtualKey.F
                || key == VirtualKey.G
                || key == VirtualKey.H
                || key == VirtualKey.I
                || key == VirtualKey.J
                || key == VirtualKey.K
                || key == VirtualKey.L
                || key == VirtualKey.M
                || key == VirtualKey.N
                || key == VirtualKey.O
                || key == VirtualKey.P
                || key == VirtualKey.Q
                || key == VirtualKey.R
                || key == VirtualKey.S
                || key == VirtualKey.T
                || key == VirtualKey.U
                || key == VirtualKey.V
                || key == VirtualKey.W
                || key == VirtualKey.X
                || key == VirtualKey.Y
                || key == VirtualKey.Z
                || key == VirtualKey.Space);
        }
    }
} 
```

# asp.net-mvc-4 - 如何使用 knockout.js 映射来动态加载模态框内容？

> ID：16025065
> 
> 赞同：0
> 
> 时间：2013-04-15T21:33:48.393
> 
> 标签：asp.net-mvc-4, knockout.js, knockout-mapping-plugin

我有一个模式框，我想根据主页上的选择加载数据。我认为这将是使用 knockout.js 的一个很好的介绍，稍后将在应用程序的其他方面使用它。我正在为模态使用 Bootstrap 模态。

这是我想要的：

1.  通过按下按钮选择要处理的时间表。每个时间表都有不同的 ID。
2.  在该时间表上显示更多详细信息。
3.  如果该时间表有问题，请列出错误。
4.  如果没有问题，给他们签名的能力。

所以我将我的模态定义为：

```
<div class="modal hide fade" id="signModal" tabindex="-1" role="dialog" aria-labelledby="signModalLabel" aria-hidden="true">
<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3>Sign time sheet</h3>
</div>
<div class="modal-body">
    <div data-bind="foreach: summary">
        <p><span data-bind="text: HoursCodeDescription"></span>(<span data-bind="text: HoursCode"></span>) - <span data-bind="text: TotalHours"></span></p>
    </div>
</div>
<div class="modal-footer">
    <button class="btn btn-danger" type="button" data-dismiss="modal">Cancel</button>
    <button class="btn btn-success disabled">Sign time sheet</button>
</div>
</div> 
```

然后我通过使用[这篇文章来提取我的数据摘要](http://softwaredevelopmentexperiences.blogspot.com/2012/03/how-to-build-grid-with-knockout-and.html)

```
<script>
    var id = 0;
    var viewModel;

    $(document).ready(function () {

        // Sign the timesheet
        $('.signTimesheet').click(function () {
            id = $(this).closest("div").find("h3.empId").attr("id");
            $('#signModal').modal('show');
            viewModel = SummaryViewModel();

        });
    });

    function SummaryViewModel() {
        var _this = {}

        _this.summary = ko.observableArray();
        ko.applyBindings(_this, $('.modal-body').get(0));

        function LoadSummary() {
            $.ajax({
                'beforeSend': function (xhrObj) {
                    xhrObj.setRequestHeader("Content-Type", "application/json");
                    xhrObj.setRequestHeader("Accept", "application/json");
                },
                'async': false,
                'cache': false,
                'dataType': 'text json',
                'data': ({ "id": id }),
                'url': '/api/Timesheet/',
                'type': 'GET',
                'success': function (data) {
                    var results = ko.observableArray();
                    ko.mapping.fromJS(data.HoursSummary, {}, results);
                    for (var i = 0; i < results().length; i++) {
                        _this.summary.push(results()[i]);
                    };
                }
            });
        }

        LoadSummary();

        return _this;
    }
</script> 
```

我确信我所采用的方法遗漏了一些东西，但我找不到任何与我希望它的操作方式相似的示例。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T16:16:07.210

这是我实际需要做的：

```
<script>
    var id = 0;
    var viewModel = {
        summary: ko.observableArray([{ HoursCodeDescription: "", HoursCode: "", TotalHours: 0 }])
    };

    $(document).ready(function () {

        ko.applyBindings(viewModel);

        // Sign the timesheet
        $('.signTimesheet').click(function () {
            id = $(this).closest("div").find("h3.empId").attr("id");
            $('#signModal').modal('show');
            $.ajax({
                'beforeSend': function (xhrObj) {
                    xhrObj.setRequestHeader("Content-Type", "application/json");
                    xhrObj.setRequestHeader("Accept", "application/json");
                },
                'async': false,
                'cache': false,
                'dataType': 'text json',
                'data': ({ "id": id }),
                'url': '/api/Timesheet/',
                'type': 'GET',
                'success': function (data) {
                    viewModel.summary(data.HoursSummary);
                }
            });

        });
    });
</script> 
```

# java - 的动作属性 不叫

> ID：16025066
> 
> 赞同：0
> 
> 时间：2013-04-15T21:33:49.207
> 
> 标签：java, jsf, jsf-2, xhtml, facelets

我试图`addMoreStatus`通过使用 的`action`属性来调用该方法`<p:commandButton>`，但它没有被调用。我还使用 ajax 来查看会话变量的值是否发生变化。不幸的是，在获取更多状态中的会话变量永远不会被更新。toIndex 始终显示 5。

1)xhtml

```
<h:body>
    <c:if test="#{statusBean.init == null}"/>
    <h:form id="foo">
        <p:commandButton id="bar" action="#{statusBean.addMoreStatus}"
             value="test" update="test"></p:commandButton> 

        <h:outputLabel value="#{sessionScope['toIndex']}" id="test" />
    </h:form>
</h:body> 
```

2）状态豆

```
public String getInit(){

        System.out.println("inside getInit");

        FacesContext context = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) context.getExternalContext().getSession(true);
        int toIndex = 5;
        session.setAttribute("toIndex", toIndex);

        return null;        
    }

    public void addMoreStatus(){

        System.out.println("inside addMoreStatus");
        FacesContext context = FacesContext.getCurrentInstance();
        HttpSession session = (HttpSession) context.getExternalContext().getSession(true);
        int toIndex = (int) session.getAttribute("toIndex");
        toIndex = toIndex + 5;
        session.setAttribute("toIndex", toIndex);
    } 
```

# c++ - 使用 Visual Studio 2012 构建 C++ 解决方案时如何显示总构建时间？

> ID：16025077
> 
> 赞同：2
> 
> 时间：2013-04-15T21:34:29.513
> 
> 标签：c++, visual-studio-2012

使用 Visual Studio 2012 构建 C++ 解决方案时如何显示总构建时间？我认为打开它的选项必须隐藏在某个地方，但我找不到它。谢谢。

[在 Visual Studio](https://stackoverflow.com/questions/82128/displaying-build-times-in-visual-studio)中显示构建时间中的答案提供了不同的结果。它显示了每个函数的构建时间，而不是我在 VS2012 上测试的总构建时间。

[我想要这个（从这篇文章](https://stackoverflow.com/questions/3082049/vs-2010-prevent-display-of-build-summary-in-the-output-window)中借来的 c# 解决方案）

```
Build Summary
-------------
00:06.772 - Success - UI\TestBed\JLTA.JBS.UI.TestBed.csproj
00:05.926 - Success - UI\Main\JLTA.JBS.UI.Main.csproj
... <bunch of lines deleted here>
00:00.035 - Success - Bus\Budget\JLTA.JBS.Bus.Budget.csproj
00:00.032 - Success - Core\JLTA.JBS.Core.csproj

Total build time: 01:06.088  // This line is necessary; the above is optional. 
```

# r - R中的基本2D颜色平滑

> ID：16025078
> 
> 赞同：4
> 
> 时间：2013-04-15T21:34:31.987
> 
> 标签：r, colors, scatter-plot

我有以下颜色的数据

```
x = c(2,3,4,2,3,7,8,7,5,6,2,3,6,8,9,10)
y = c(5,6,5,6,5,11,12,11,16,17,12,12,10,5,6,5)
col = sample(c("red","green"),16,rep=T)
plot(x,y,col=col,xlim=c(0,20),ylim=c(0,20),pch=16) 
```

如果您运行此代码，您可以看到它是一个在 x 和 y 方向上从 0 到 20 的 2D 图。我现在想平滑红色和绿色的颜色，应该保持这种状态。这意味着在有红点和绿点的地块区域，它们会变成褐色。当前没有颜色的绘图部分应该是白色的。所以应该有白色区域、红色区域、绿色区域、褐色区域以及介于两者之间的区域。

更正式地说，我想您可以将其视为颜色插值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T17:32:48.593

我不太清楚你在找什么，但也许你想让这些点更大更透明，这样它们就可以重叠。

```
library(scales)
plot(x,y,col=alpha(col,0.5),xlim=c(0,20),ylim=c(0,20),pch=16,cex=20) 
```

alpha() 函数允许您使点透明。

# c# - 创建故事板和双重动画

> ID：16025079
> 
> 赞同：-1
> 
> 时间：2013-04-15T21:34:32.220
> 
> 标签：c#, wpf, animation, storyboard

我正在 WPF 上制作游戏[SizzlingHot](http://kazinoigri.com/267/sizzling-hot/)。我有一个画布，可以在其中加载水果掉落的图像。当我单击 startButton 时，它应该为落下的水果创建一个带有 doubleAnimation 的故事板。我在方法中有以下代码：

```
NameScope.SetNameScope(this, new NameScope());

Cherry cherry = new Cherry(); // I get the image from this class
// GameCanvas.Children.Add(cherry.FruitImage); // idk if this should be here and its invalid because the parameter in the parantheses shoud be UI element it does not allow BitmapImage                    

DoubleAnimation myDoubleAnimation = new DoubleAnimation(100, 500, new Duration(TimeSpan.FromSeconds(5)));
myDoubleAnimation.From = -150;
myDoubleAnimation.To = 500;            

Storyboard.SetTargetProperty(myDoubleAnimation, new PropertyPath("(Canvas.Top)"));
Storyboard.SetTarget(myDoubleAnimation, cherry.FruitImage); 
Storyboard myStoryboard = new Storyboard();                    

myStoryboard.Children.Add(myDoubleAnimation);
GameCanvas.Resources.Add(myStoryboard,cherry.FruitImage);

myStoryboard.Begin(this, true); 
```

当我运行它时，在最后一行，它给了我一个

> InvalidOperationException - 由于对象的当前阶段，操作无效。

当我调试它时，我不明白这里似乎是什么问题我可以看到找到了图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:59:25.273

只能添加`UIElement`到 a中，直接`Canvas`添加 a是行不通的。`BitmapImage``Canvas`

一种选择可能是添加一个动态`Image`并将其设置`Source`为您的`FruitImage`然后您可以`Image`在您的`GameCanvas`

例子：

```
Cherry cherry = new Cherry();

// Create host for BitmapImage
Image imageHost = new Image { Source = cherry.FruitImage };
GameCanvas.Children.Add(imageHost);

// Animate Image
imageHost.BeginAnimation(Canvas.TopProperty, new DoubleAnimation(-150, 500, new Duration(TimeSpan.FromSeconds(5)))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:38:24.530

如果您还没有，请尝试在您的图像上执行此操作：

```
image.BeginInit();
image.UriSource = new Uri(filename, UriKind.Relative);
image.EndInit();
cherryImage.Source = image; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T21:53:27.710

如果`cherry.FruitImage`是[Image](http://msdn.microsoft.com/en-us/library/system.windows.controls.image.aspx)，您可以像这样简单地对其进行动画处理：

```
cherry.FruitImage.BeginAnimation(
    Canvas.TopProperty,
    new DoubleAnimation(-150, 500, TimeSpan.FromSeconds(5))); 
```

不需要故事板。

# sql-server - MAXDOP 和有趣的性能体验

> ID：16025081
> 
> 赞同：0
> 
> 时间：2013-04-15T21:34:36.107
> 
> 标签：sql-server, performance

我想就以下主题提出一些建议。

使用我们公司的一种产品，我们“连接”到客户方的现有数据库，并将订单导入我们自己的 SQL Server，让我们的桌面产品计划和优化它们。它们适用于不同的货车，它们将采取不同的路线将货物从 A 运送到 B。

在导入期间，我们遇到了一些性能问题，可以通过以下方式解决：

我们已经制定了几个维护计划（据我所知，这并不总是最好的方法，我们现在遵循 Ola Hallengren 的维护解决方案）来重建索引和更新统计信息。

但是性能问题仍然存在。

前 DBA 试图诊断 SQL Server 发生了什么，他使用了这个脚本：

```
SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED

SELECT 'Identify what is causing the waits.' AS [Step01];
SELECT TOP 10
        [Wait type] = wait_type,
        [Wait time (s)] = wait_time_ms / 1000,
        [% waiting] = CONVERT(DECIMAL(12,2), wait_time_ms * 100.0 / SUM(wait_time_ms)     OVER())
FROM sys.dm_os_wait_stats
WHERE wait_type NOT LIKE '%SLEEP%'
ORDER BY wait_time_ms DESC; 
```

他发现 CXPACKET 一直比较高。

他搜索了一下，发现 MAXDOP 参数与它有关。所以他们去了 SSMS 并将 MAXDOP 从一个值“0”更改为另一个值“1”，反之亦然。

一旦参数改变（无论哪个方向），性能立即变得更好。在切换参数之前，CPU 非常高（几乎不可能使用该产品）在切换之后它立即进入最小 CPU-Usage。看起来好像 SQL Server 无聊得要死。

如果我们的人试图将 MAXDOP 切换到每个脚本的其他值：

```
EXEC sys.sp_configure N'show advanced options', N'1'  RECONFIGURE WITH OVERRIDE
GO
EXEC sys.sp_configure N'max degree of parallelism', N'1'
GO
RECONFIGURE WITH OVERRIDE
GO
EXEC sys.sp_configure N'show advanced options', N'0'  RECONFIGURE WITH OVERRIDE
GO 
```

令人惊讶的是，它根本没有显示出任何效果。CPU-Usage 与执行脚本前一样高。

我对你们的问题是：你们知道为什么在 SSMS 中切换 MAXDOP 会使 CPU-Usage 降低到正常值吗？

我知道我不能指望一个完全令人满意的答案，因为我对那个故事的细节不够详细。但如果你能指出我正确的方向，我将不胜感激

> 嘿，看看 I/O，像这样设置你的 PerfMon，等等等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-22T12:40:38.463

我看到没有答案被标记为最佳答案，所以让我尝试并提供帮助。

在网上搜索以找到一些帮助我们诊断高 CXPACKET 值的原因时，我找到了一篇很好的文章，该文章显示了对我们有帮助的高 CXPACKET 值的一些不同方面和原因： [http ://www.sqlshack.com/故障排除-cxpacket-wait-type-in​​-sql-server/](http://www.sqlshack.com/troubleshooting-the-cxpacket-wait-type-in-sql-server/)

以下是我在文章中找到的建议：

*   不要将 MAXDOP 设置为 1（这永远不是解决方案）。要了解更多信息，请导航至此[页面](https://support.microsoft.com/en-us/kb/2806535)

*   调查您的查询和 CXPACKET 历史以了解并确定它是否只发生了一次或两次，因为它可能只是系统中通常正常工作的异常

*   检查查询使用的表的索引和统计信息，并确保它们是最新的

*   检查**并行成本阈值 (CTFP)**并确保使用的值适合您的系统

*   检查 CXPACKET 是否带有 LATCH_XX（也可能带有 PAGEIOLATCH_XX 或 SOS_SCHEDULER_YIELD）。如果是这种情况，则应降低 MAXDOP 值以适合您的硬件

*   检查 CXPACKET 是否带有 LCK_M_XX（通常带有 IO_COMPLETION 和 ASYNC_IO_COMPLETION）。如果是这种情况，那么并行性就不是瓶颈。对这些等待统计信息进行故障排除，以找到问题的根本原因和解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:26:22.903

由于之前有很多 CXPacket 等待，因此 DOP 值必须为 0（默认），后来设置为 1（禁用并行性）。

围绕这个话题有很多争议。对于高度优化的纯 OLTP 负载可能没问题，但大多数负载是混合的，并且往往包含通常会受益于并行性的“繁重”查询。

一般来说，我不会对将 MAXDOP 设置为 1 感到满意 - 如果您*必须*减少它，最好尝试将其设置为 2 或 4，看看效果如何。同样值得将“并行成本阈值”提高到高于默认值 5（初学者尝试 25）的值。这将减少考虑用于并行计划的查询数量。

# mysql - 更改我的 MySQL 查询以实现排序

> ID：16025084
> 
> 赞同：0
> 
> 时间：2013-04-15T21:34:43.920
> 
> 标签：mysql

我目前实现以下查询以获取数据库中与用户具有特定兴趣标签的所有帖子，并通过发布时间对这些帖子进行排序。我目前的查询非常完美。但是，我正在计划一个排序工具，供用户按分数（按喜欢或不喜欢计算）对帖子进行排序。

```
SELECT DISTINCT p.* FROM posts AS p
  INNER JOIN post_tag AS posttag ON p.post_id = posttag.post_id
  INNER JOIN profile_tag AS profiletag ON posttag.tag_id = profiletag.tag_id
  INNER JOIN profile AS profile ON profile.profile_id = profiletag.profile_id
WHERE     profile.username = 'username'
ORDER BY time_posted DESC 
```

现在，喜欢保存在一个“喜欢”表中，其中包含以下列：

```
post_id | score 
```

因此，当用户对帖子进行评分时，`post_id`和`score`会添加到此表中，因此并非每个帖子都会有分数。我被困在实现按分数对帖子进行排序的能力上的哪些步骤。

没有分数的帖子将是 0。

编辑：

一个例子：

```
post_id|score
    1     1
    1     1 
    2     1 
```

所以post 1一共有2个like，post有1个，所以按照每个post的总和排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:39:09.470

您应该能够在不向 SELECT 语句添加任何内容的情况下对 Likes 表进行 INNER JOIN。然后，您可以对其进行排序：

```
SELECT DISTINCT p.* FROM posts AS p
  INNER JOIN post_tag AS posttag ON p.post_id = posttag.post_id
  INNER JOIN profile_tag AS profiletag ON posttag.tag_id = profiletag.tag_id
  INNER JOIN profile AS profile ON profile.profile_id = profiletag.profile_id
  INNER JOIN Likes AS l ON l.post_id = p.post_id
WHERE     profile.username = 'username'
ORDER BY l.score, time_posted DESC 
```

# java - MouseListener on a radio button in swing

> ID：16025085
> 
> 赞同：2
> 
> 时间：2013-04-15T21:34:50.883
> 
> 标签：java, swing

I have a panel in which I put 2 radio buttons. I want to implement double click action on a radio button but it seems it doesn't work. In conclusion I want to make another component visible while double clicking one of the radio button, more precisely when clicking on its label.

Is there any explanation why the mouse listener works only if the radio buttons are disabled?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T21:53:11.283

编辑：

查看这段代码，我们在 JLabel/JTextField 中分隔单选按钮的文本

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.FocusAdapter;
import java.awt.event.FocusEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.BorderFactory;
import javax.swing.BoxLayout;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JRadioButton;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

public class TestRadioButton {

    private void initUI() {
        JFrame frame = new JFrame(TestRadioButton.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JPanel panel = new JPanel();
        panel.setLayout(new BoxLayout(panel, BoxLayout.LINE_AXIS));
        final JRadioButton button = new JRadioButton();
        final JLabel label = new JLabel("Double click me");
        final JTextField editionTF = new JTextField();
        editionTF.setOpaque(false);
        editionTF.addFocusListener(new FocusAdapter() {
            @Override
            public void focusLost(FocusEvent e) {
                stopEdition(panel, label, editionTF);
            }

        });
        editionTF.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                stopEdition(panel, label, editionTF);
            }
        });
        label.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                if (e.getClickCount() == 2) {
                    startEdition(panel, label, editionTF);
                }
            }
        });
        editionTF.setBorder(BorderFactory.createEmptyBorder());
        editionTF.setFont(label.getFont());
        editionTF.setVisible(false);
        panel.add(button);
        panel.add(label);
        panel.add(editionTF);
        frame.add(panel, BorderLayout.NORTH);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    protected void stopEdition(final JPanel panel, final JLabel label, final JTextField editionTF) {
        label.setText(editionTF.getText());
        label.setVisible(true);
        editionTF.setVisible(false);
    }

    protected void startEdition(final JPanel panel, final JLabel label, final JTextField editionTF) {
        editionTF.setText(label.getText());
        label.setVisible(false);
        editionTF.setVisible(true);
    }

    public static void main(String[] args) {
        final TestRadioButton test = new TestRadioButton();
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                test.initUI();
            }
        });
    }
} 
```

不是真正的答案，但评论太少了。使用以下代码，这对我来说很好。一定有其他问题你没有告诉我们。考虑发布[SSCCE](http://sscce.org)

```
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JRadioButton;
import javax.swing.SwingUtilities;

public class TestRadioButton {

    private void initUI() {
        JFrame frame = new JFrame(TestRadioButton.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JRadioButton button = new JRadioButton("Double click me");
        button.addMouseListener(new MouseAdapter() {
            @Override
            public void mouseClicked(MouseEvent e) {
                if (e.getClickCount() == 2) {
                    SwingUtilities.invokeLater(new Runnable() {

                            @Override
                            public void run() {
                                 JOptionPane.showMessageDialog(button, "Radio button has been double clicked");
                            }
                    };
                }
            }
        });

        frame.add(button);
        frame.setSize(400, 400);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        final TestRadioButton test = new TestRadioButton();
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                test.initUI();
            }
        });
    }
} 
```

# sql-server - SQL readmits in 30 day partitions

> ID：16025086
> 
> 赞同：3
> 
> 时间：2013-04-15T21:34:54.377
> 
> 标签：sql-server, sql-server-2008, tsql

I'm trying to group patient readmissions that occur within separate 30 day windows (SQL Server 2008). After multiple attempts at recursive CTE's, I'm just going in circles. All help is greatly appreciated.

Problem:

If a patient is admitted within 30 days of the first discharge, count all those admissions in the first period (in the example below, the second admit date of 7/7/2011 is within the 7/20/2011 window).

The first admit immediately after the above 30 day period should be treated as a new 30 day window and any admits within 30 days of its discharge become part of group 2, etc.

So, record 3 is the start of a new 30 day window, even though this admit is within 30 days of the discharge of the prior record (admit on 8/5/2011 is before 8/26/2011, but 8/5/2011 is greater than the 7/20/2011 terminus that started the first 30 day window).

Record 4 was admitted prior to 8/31/2011, therefore it should be included in group 2.

Record 5 stands alone because it was admitted more than 30 days after the 8/31/2011 date that ended group 2.

The desired output for the example recordset is the sum of charges for each 30 day start point.

Desired result:

```
MRN   Admit      TotalCharge
555   6/14/2011  $25
555   7/30/2011  $39
555   11/3/2011  $10

```

Example recordset:

```
Acct MRN    Admit       Disc        Disch+30    Charge
590  555    6/14/2011   6/20/2011   7/20/2011   15
938  555    7/7/2011    7/27/2011   8/26/2011   10
1011 555    7/30/2011   8/1/2011    8/31/2011    9
1089 555    8/5/2011    9/14/2011   10/14/2011  30
3011 555    11/3/2011   11/23/2011  12/23/2011  10

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:13:01.260

看起来我可能有点野心勃勃，坚持认为这可以通过单通道、基于集合的查询来完成。这非常接近，但仍将结果转储到 #temp 表以支持准并行更新（每个 MRN 值一个“线程”，而不是一次通过一个 MRN 的游标）。

```
DECLARE @t TABLE(Acct INT, MRN INT, Admit DATE, Disc DATE, Charge INT);

INSERT @t VALUES
(590 , 555, '20110614','20110620',15), 
(938 , 555, '20110707','20110727',10),
(1011, 555, '20110730','20110801', 9),
(1089, 555, '20110805','20110914',30),
(3011, 555, '20111103','20111123',10);

SELECT MRN, [group] = CONVERT(INT, NULL), Admit, Disc, Charge, 
   rn = ROW_NUMBER() OVER (PARTITION BY MRN ORDER BY Admit),
  da = DATEADD(DAY, 30, Disc)
  INTO #x FROM @t; -- add a WHERE clause if examining a set in a bigger table

DECLARE @rn INT = 0;

WHILE @rn IS NOT NULL
BEGIN
  SELECT @rn = MIN(rn) FROM #x WHERE [group] IS NULL;

  UPDATE agg SET [group] = @rn
    FROM #x AS agg
    INNER JOIN #x AS src
    ON agg.MRN = src.MRN
    AND agg.Admit <= src.da
    AND agg.[group] IS NULL
    AND src.rn = @rn;
END
GO
SELECT MRN, Admit = MIN(Admit), TotalCharge = SUM(Charge)
  FROM #x GROUP BY MRN, [group];
GO
DROP TABLE #x; 
```

结果：

```
MRN  Admit       TotalCharge
---  ----------  -----------
555  2011-06-14  25
555  2011-07-30  39
555  2011-11-03  10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:06:36.990

对自身执行日期表的自联接，以识别所有在 30 天内没有被另一次录取的录取；调用该关系 T1 并使其成为主查询的子查询。

现在再次将 T1 加入数据，以从 T1 中每一行的数据中获取所有二次录取。

今晚晚些时候我可能有时间再看一遍。

# php - PHP Include does not show headers and footers

> ID：16025089
> 
> 赞同：4
> 
> 时间：2013-04-15T21:35:18.810
> 
> 标签：php, include

This is my first question on this site.

I am very new to programming.

I have index.html file at C:/Wamp/WWW/AddressBook/Index.html and the header.html and footer.html files are located at C:/Wamp/WWW/AddressBook/Includes/

Now I am trying to include these files in my index.html

For Header

```
<?php include 'Includes/Header.html'; ?> 
```

and for footer

```
<?php include 'Includes/Footer.html'; ?> 
```

But none of both header and footer are showing up when i open index.html in my browser.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T21:36:52.893

您的 Apache 是否理解`.html`为 php 文件？

如果没有，请将您的重命名`index.html`为`index.php`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T21:38:10.467

您不能在 *.html 文件中使用 PHP 代码。您必须改用 *.php。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T22:05:18.503

试试

```
require('url'); 
```

而是用 () 围绕它的函数：

```
<?php require('Includes/Header.html'); ?>
<?php require('Includes/Feader.html'); ?> 
```

还要确保您的文件夹实际上是包含大写 I 并确保您的页眉和页脚实际上也是大写的。

我真的建议不要在文件夹和文件名中使用大写字母；它变得更加混乱。CLASSES 是一个例外，函数和文件应该（以避免错误）以小写字母开头，但类应该以大写字母开头。

返回要求：

如果找不到所需文件，网站应该会崩溃，因此您可以确保您确实需要特定文件。

如果这不起作用，那么您可能必须检查您的 PHP 配置。如果您不使用项目 localhost，那么您应该考虑更改 Web 服务，除非您可以联系服务提供商或自行修改它。

# javascript - jquery: using slideDown and animating opacity with a tabbed container

> ID：16025094
> 
> 赞同：0
> 
> 时间：2013-04-15T21:35:38.727
> 
> 标签：javascript, jquery, tabs

**THE AIM**

To create a tabbed interface, animated such that when you click on a different tab, the content fades out, then the container resizes (by sliding up or down), and then the new content fades in.

**THE PROBLEM**

I've successfully made a tabbed interface that works but I'm having trouble animating it how I want it. When you click on a tab, the panel slides down, you catch a glimpse of the text fading in but then it slides back up again - and I have no clue as to why.

This is my first time using jquery and I'd really appreciate it if someone would take a quick look and find out what I've done wrong/how to fix it. It's quite a simple project so I doubt it'll be very difficult for someone who knows what they're doing!

Here's the jsfiddle: [http://jsfiddle.net/dronzy/MKmTK/](http://jsfiddle.net/dronzy/MKmTK/)

Here's what the javascript looks like:

```
$(document).ready(function () {
    $('#tabs li a:not(:first)').addClass('inactive');
    $('.content:not(:first)').animate({
        opacity: "0"
    }, 0);
    $('.panel:not(:first)').hide();
    $('#tabs li a').click(function () {
        var t = $(this).attr('href');
        var s = $(this).attr('data-name');
        if ($(this).hasClass('inactive')) {
            $('#tabs li a').addClass('inactive');
            $(this).removeClass('inactive');
            $('.content').animate({
                opacity: "0"
            }, 600, function () {
                $('.panel').slideUp();
            });
            $(s).slideDown(600, function () {
                $(t).animate({
                    opacity: "1"
                }, 600)
            });
        }
        return false;
    })
}); 
```

Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:49:43.280

试试这个小提琴[http://jsfiddle.net/MKmTK/1/](http://jsfiddle.net/MKmTK/1/)。`content`您正在使用 class和为所有项目设置动画`panel`，您可以使用`:visible`它来仅获取当前可见的项目，我还在`slideDown`回调中移动了 ，以便在隐藏完成后执行它。

# node.js - node js .Cannot pass a mongodb query result to a jade view

> ID：16025099
> 
> 赞同：0
> 
> 时间：2013-04-15T21:35:51.883
> 
> 标签：node.js, mongodb, express

I have this code

```
exports.index = function (req, res) {
res.render('product/index.jade', {
    products: db.products.find().toArray(function (err, prods) {
        if (!err)
            return prods;
        return [];
    })
}); 
```

};

What I'm trying to do here is pass the query result to a jade view which expects a parameter named "products". I ve tried a lot of combinations but neither of them works (right now i'm getting "cannot read proprty lenght...."). I know it must be a rookie mistake, but i cannot figure it out, any help will be apreciated!

PS: I'm using express and mongodb. And yes, the products collection does contain products.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:56:10.097

toArray 实际上并不返回值。相反，一旦查找完成，回调函数就会被调用，并将产品作为参数。这是由于节点的异步 I/O 特性。

您的代码应该看起来像这样

```
exports.index = function (req, res) {
    db.products.find().toArray(function (err, prods) {
        if (!err)
            res.render('product/index.jade', {products: prods});
        else
            res.render('product/index.jade', {products: []});
    });
}); 
```

# django - 在模态对话框中使用 Django 线程注释并获取 KeyError

> ID：16025101
> 
> 赞同：0
> 
> 时间：2013-04-15T21:35:56.743
> 
> 标签：django

我`KeyError (Exception Value: 'request)`在使用模式对话框和使用 Ajax 时遇到了问题。这是我的设置：

当有人点击一个链接时，会有一个 ajax 调用运行一个函数来查询一个名为 part 的对象：

```
<script type="text/javascript">
$(document).ready(function() {
  $(document).on("click", ".lib", function () {
       var id = $(this).attr("id");
         $.get("/models/"+id+"/viewmodelinfo/", function(data) {
           $(".modal-body").html(data);
           $('#mySymModal').modal('show');
       });
  });
});
</script> 
```

这是查询零件对象的函数：

```
def viewmodelinfo(request, model_id):
  part = Part.objects.get(id=model_id)
  return render_to_response("models/viewmodelmodal.html", {"part": part }) 
```

这会发回 html 数据，这些数据在`modal-body`我的模态对话框的 div 中被替换。

这一切都很好，除非我在`viewmodelmodal`模板中有以下代码行：

```
{% comments part %} 
```

在这种情况下，我得到一个`KeyError`.

这是回溯：

追溯：

```
File "/Users/user1/Desktop/myenv2/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Users/user1/Desktop/store/models/views.py" in viewmodelinfo
  467\.   return render_to_response("models/viewmodelmodal.html", {"part": part })
File "/Users/user1/Desktop/myenv2/lib/python2.7/site-packages/django/shortcuts/__init__.py" in render_to_response
  20\.     return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs)
File "/Users/user1/Desktop/myenv2/lib/python2.7/site-packages/django/template/loader.py" in render_to_string
  171\.         return t.render(Context(dictionary))
File "/Users/user1/Desktop/myenv2/lib/python2.7/site-packages/django/template/base.py" in render
  140\.             return self._render(context)
File "/Users/user1/Desktop/myenv2/lib/python2.7/site-packages/django/test/utils.py" in instrumented_test_render
  62\.     return self.nodelist.render(context)
File "/Users/user1/Desktop/myenv2/lib/python2.7/site-packages/django/template/base.py" in render
  823\.                 bit = self.render_node(node, context)
File "/Users/user1/Desktop/myenv2/lib/python2.7/site-packages/django/template/debug.py" in render_node
  74\.             return node.render(context)
File "/Users/user1/Desktop/myenv2/lib/python2.7/site-packages/django/template/base.py" in render
  1178\.                     _dict = func(*resolved_args, **resolved_kwargs)
File "/Users/user1/Desktop/store/apps/threadedcomments_extras/templatetags/comments_tag.py" in comments
  13\.         "request": context["request"],
File "/Users/user1/Desktop/myenv2/lib/python2.7/site-packages/django/template/context.py" in __getitem__
  54\.         raise KeyError(key)

Exception Type: KeyError at /models/384/viewmodelinfo/
Exception Value: 'request' 
```

此评论在我使用它的其他任何地方都可以正常工作。这使我认为我应该包括一些我缺少的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T00:55:44.753

好的，经过大量搜索，我找到了答案，这与在 django 自定义模板标签中访问请求有关....

你可以在这里看到答案：[在 django custom template tags 中访问请求](https://stackoverflow.com/questions/2160261/access-request-in-django-custom-template-tags)

我使用了以下内容：

```
from django.template import RequestContext 
```

然后更改以下行：

```
 return render_to_response("models/viewmodelmodal.html", {"part": part }),
                              context_instance = RequestContext(request)) 
```

我真的希望这对其他人有帮助！:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:09:11.113

如果我理解正确，你想用来自服务器的新数据重新加载你的 div。没有页面刷新。我有几乎同样的问题。如果您正在使用`django-mptt`，重新加载 a`mptt tag`有点棘手。

我不了解您的模型和视图架构，但是可以帮助您解决此问题的方法之一是将`html`具有 mptt 标记（like`recursetree`或其他标记）的标记保留在另一个 html 文件中。`jQuery's` `load`并在执行 ajax 或 post 函数时通过函数将其加载到您的 div 中。

```
$('#pre_comments').load('comments_div.html #comments'); 
```

此代码将所有具有 id `comments`in的 div 加载`comments_div.html`到`pre_comments`当前页面的 div 中。

因此，请使用 comments_div.html 页面在您的视图中保存和阅读。您可以将其内容加载到您的模态中。

如果我弄错了这个问题，我很抱歉。

**注意**：如果需要更多代码或解释，请随时说出来。

**更新：**

你能像这样更新你的观点吗？然后再次检查您的 $.get 请求`data.part`。

```
def viewmodelinfo(request, model_id):
    from django.core import serializers
    part = Part.objects.get(id=model_id)
    if part:
        json = {part,}
        data = serializers.serialize('json',json)
        return HttpResponse(data)       

    return render_to_response("models/viewmodelmodal.html", {"part": part }) 
```

# c# - readin prefix file error

> ID：16025102
> 
> 赞同：1
> 
> 时间：2013-04-15T21:35:58.257
> 
> 标签：c#, text

I have code that works properly reading a csv file as shown:

```
var lines = File.ReadAllLines("filename.csv").Select(a => a.Split(',')).ToList(); 
```

I want to rewrite this statement to read all files in the folder by prefix.

```
var lines = Directory.GetFiles("prefix*.csv").Select(a => a.Split(',')).ToList(); 
```

This code does not work due to the invalid * character in the path name. I know I can do something similar to this with fileinfo.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T21:38:37.717

`Directory.GetFiles()`只是获取文件名，它不读取行。

尝试类似的东西

```
var lines = Directory.GetFiles(@"c:\", "prefix*.csv").Select(
            fn => File.ReadAllLines(fn).Select(a => a.Split(',')).ToList()).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T21:41:18.280

模式匹配必须使用第二个参数，如下所示：

`var files = Directory.GetFiles(directory, "prefix*.csv");`

# paypal - eBay 接受多少个通知 URL？

> ID：16025104
> 
> 赞同：0
> 
> 时间：2013-04-15T21:36:01.120
> 
> 标签：paypal, notifications, ebay-api

我对 eBay API 了解不多，他们的文档也不好，因为它们根本不是完整的信息。

Paypal 通知仅接受 1 个 URL。我想知道 eBay 接受多少个通知 URL？

他们如何将通知发送到您的网络服务器？他们会向您的 Web 服务器 URL（如 Paypal）发送 HTTP 请求，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:05:31.510

我实际上认为他们有[很多关于它的优秀文档](https://www.x.com/developers/ebay/products/platform-notifications-api)。eBay 平台通知系统通过 API 工作，因此您可以为不同的通知设置不同的侦听器。该链接包含您开始工作所需的所有信息。

# java - java utf-8转十进制

> ID：16025106
> 
> 赞同：0
> 
> 时间：2013-04-15T21:36:12.460
> 
> 标签：java, utf-8, encode, html-entities

要求是读取文件。根据一些规则，修改文本并将它们写入不同的文件。源文件为 UTF-8 格式，所有特殊字符都需要转换为 HTML 实体表示。

写了下面的代码，用来转换非ascii字符

```
 private String convertNonASCIIToDecimal(String ref) throws Exception
    {
    Pattern pat = Pattern.compile("[^\\p{ASCII}]");
    Matcher matcher = pat.matcher(ref);
    String temp;
    String tempSrc = ref;
    int charValue = 0;
    while (matcher.find())
    {
        temp=matcher.group();
        charValue = (int)temp.charAt(0);
        logger.debug("As:"+temp +":" +charValue);
        tempSrc=tempSrc.replaceAll(temp, "&#" + charValue + ";");
    }
    return tempSrc;
    } 
```

我想知道，是否有更好的方法或功能可以做到这一点。将非 ascii 转换为其 HTML 实体表示。

# git - TortoiseGit：应用补丁跳过添加的文件

> ID：16025109
> 
> 赞同：0
> 
> 时间：2013-04-15T21:36:23.517
> 
> 标签：git, tortoisegit

我有 2 个文件（一个已修改，一个新文件）为提交而修改。我想为此创建一个补丁。我使用 TortoiseGit 创建了一个补丁，我可以看到该补丁包含两个文件的更改。

但是，当我将此补丁应用到某个存储库时，它会同时应用更改，但新文件未显示为已添加。因此，如果我简单地说：git commit，则新添加的文件会丢失提交。

这是 TortoiseGit 的错误还是我做错了什么？

我尝试使用“git --diff”创建补丁，但在这种情况下，它根本不包含添加的文件作为补丁的一部分。

谢谢， Vibhav Agrawal

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:46:20.963

使用 TortoiseGit，您应该通过提交更改（修改和添加）、右键单击存储库并选择`Create serial patch...`并选择`Number of Commits`as来创建补丁`1`。

然后在另一个存储库中，您右键单击该存储库并选择`Apply serial patch...`使用`Add`以添加之前创建的补丁文件。然后单击`Apply`。

这应该在包含修改和新文件的另一个存储库中创建一个新提交。

# jquery - jquery .append 在 IE 中无法按预期工作

> ID：16025116
> 
> 赞同：0
> 
> 时间：2013-04-15T21:36:54.620
> 
> 标签：jquery

我有这个部分。

```
<section class="note">
    Content-0: SomeContent that needs to be removed. Anything below this stays.
    <br />
    <div class="content1">Content-1: Stays <br /><br /></div>
    <div class="content2"><p>Content-2: Stays</p></div>
</section> 
```

我想要的是在页面加载中删除 Content-0 行并且只有两个 s。所以我在加载这个代码......

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript">
    $(function () {
        var content1 = $('section.note div.content1');
        var content2 = $('section.note div.content2');

        $('section.note').html('').append(content1).append(content2);
        alert($('section.note').html());
    });
</script> 
```

但它在 IE（所有版本）中表现得很奇怪。在 IE 10 中，它附加了 div，但没有内容。在其他 IE 版本中，它不会删除 Content-0 并保持所有内容不变。

它在 FireFox 中运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:48:36.157

试试这个：

```
$(function () {
    var content1 = $('section.note div.content1').clone();
    var content2 = $('section.note div.content2').clone();

    $('section.note').html('').append(content1).append(content2);
    alert($('section.note').html());
}); 
```

基本上发生的事情是，这里：`var content1 = $('section.note div.content1')`您指的是实际的 DOM 元素，然后您首先删除 DOM 元素，`$('section.note').html('')`然后再次附加这些引用，但与此同时，通过将 html 设置为 ''，文本已经消失。因此，克隆这些 div 可以修复它，因为您不再引用原始 DOM 元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T21:54:01.613

似乎 IE 清理元素的速度如此之快，以至于 jquery 无法正确移动它们，因为它们已被前面的`.html('')`调用删除。您可以通过克隆或分离来解决这个问题。

[http://jsfiddle.net/DrxFV/2/](http://jsfiddle.net/DrxFV/2/)

```
var content1 = $('section.note div.content1').detach();
var content2 = $('section.note div.content2').detach();
$('section.note').html('').append(content1).append(content2); 
```

# wordpress - 登录paypal沙箱，paypal页面无法登录

> ID：16025117
> 
> 赞同：3
> 
> 时间：2013-04-15T21:37:04.377
> 
> 标签：wordpress, paypal, sandbox, woocommerce

我在另一个选项卡中登录了我的沙盒帐户，然后从我的商店单击继续使用贝宝。它会将我带到我在沙盒中设置的使用贝宝付款页面。但是一旦我尝试登录以进行一个模拟付款，上面写着“请检查您的电子邮件地址和密码，然后再试一次”

我正在尝试使用我已经登录的贝宝帐户登录，说它不起作用..我什至尝试另一个贝宝帐户..仍然说这是错误的详细信息。

我得到了我的客户 ID 和秘密，但我不确定我需要把它们放在哪里。

我正在使用 Woocommerce WP 插件

我正在贝宝开发者网站上查看[此页面](https://developer.paypal.com/webapps/developer/docs/integration/direct/make-your-first-call/#get-an-access-token)，但不确定如何执行此操作，因为 WP 提供了许多功能

感谢任何可以提供帮助的人

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T04:59:41.207

我玩这个多一点，因为我需要做一些测试，我弄明白了。登录到您的贝宝开发帐户后，您需要在贝宝沙箱中做的第一件事是单击应用程序 -> 沙箱帐户您将看到列出的企业帐户。复制该电子邮件，返回您的 woocommerce Paypal 付款设置页面并将该电子邮件作为 Paypal 电子邮件和接收方电子邮件。然后返回沙盒帐户并创建一个新帐户。这将是个人帐户。您将作为客户使用的个人帐户。

希望能帮助本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T04:42:23.853

这里同样的问题。我尝试了不同的设置帐户，在沙箱中不起作用。所以我所做的是设置了一笔 1 美元的交易，设置了商店，并以这种方式进行了测试，并且成功了。除了我无法弄清楚为什么客户订单在成功交易后总是被搁置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T19:12:59.737

您需要编辑插件代码并将 paypal URL 更改为 sandbox.paypal.com 而不仅仅是 paypay.com。

Wordpress 管理面板 -> 插件 -> 编辑器 在右上角选择您的插件，单击选择按钮 通常您可以找到

```
"<form action=.." 
```

在那里调用并更改 URL，除非您的插件首先将 URL 隐藏到变量中，在这种情况下，希望它位于顶部并且易于查找/替换。

完成后别忘了把它改回来！

*   米奇

# javascript - 按下提交按钮后隐藏的输入从链接发布

> ID：16025119
> 
> 赞同：0
> 
> 时间：2013-04-15T21:37:17.573
> 
> 标签：javascript, jquery, input, hyperlink, hidden

我使用 perl 脚本生成一个语言测试页面，其中包含多个链接（没有一个链接指向不同的页面，它们用于取消隐藏一些提示）、复选框和单个提交按钮。单击按钮时，我显然希望传递复选框的内容（通过 POST 方法），但我也想知道通过单击链接窥视了哪些提示。

[现在，在store values 从 clicked link 到 post 的隐藏输入](https://stackoverflow.com/questions/11783721/store-values-from-clicked-link-into-hidden-input-for-post)中回答了类似的问题。但是，它似乎对我不起作用。

我脑子里有这个（除其他外）

```
<script src="jquery.js" type="text/javascript">
  $('a.mini-view').click(function(){
    var clicked = $(this).attr("clicked");
    var value = $(this).attr("data-student");
    if (!clicked){
        var newValue = $('hiddenfield').val() + "," + value;
        $('hiddenfield').val(newValue);
        $(this).attr("clicked", true);
    }
});
</script> 
```

我的身体里有这个

```
<form action="./index.pl" method="post">
    <input type="hidden" name="hiddenfield" id="hiddenfield">
    <a  class="mini-view" id="HSntj" href="javascript:toggle25('CSntj','HSntj');" data-student="1">More</a>
    <a id="HSnt2j" href="javascript:toggle25('CSnt2j','HSnt2j');" data-student="2" class="mini-view">More</a></span>"; 
    <span align=left id="CSnt2j" style="display: none; margin-top: 6px;">something</span>
</form> 
```

但是当我将所有输入提交给 index.pl 脚本时

```
print $input{'hiddenfield'}; 
```

...它实际上什么也没打印。我很确定这不是解析输入的问题，因为读取其他隐藏值可以正常工作。

你有什么想法我做错了吗？

我会很感激你在这方面的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:52:20.067

我将您的代码复制到[jsFiddle](http://jsfiddle.net/3HpWh/)并使其正常工作。看起来您最大的问题是没有正确识别隐藏字段（这意味着您缺少 $('#hiddenfield') 的 # 符号

```
$('a.mini-view').click(function(){
    var clicked = $(this).attr("clicked");
    var value = $(this).attr("data-student");
    if (!clicked){
        var newValue = $('#hiddenfield').val() + "," + value;
        $('#hiddenfield').val(newValue);
        $(this).attr("clicked", true);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:44:50.177

一个问题是您定义脚本标记的方式。你有一个`src`属性和一个脚本主体。这意味着不会应用body。

尝试这个：

```
<script src="jquery.js" type="text/javascript" />
<script type="text/javascript">
    ...blah blah
</script> 
```

但是，我不认为这`$(this).attr("clicked");`是一回事。你想用这个来达到什么目的？

**编辑**：好的，我明白你在做什么。这是一个自定义属性。更好的方法可能是使用数据属性，因为它实际上是 HTML5 中的有效 HTML。

```
var clicked = $(this).data("clicked") 
```

和

```
$(this).attr("clicked", true); 
```

这也适用于学生数据，你可以这样写：

```
var value = $(this).attr("data-student"); 
```

# php - 如何使用表单构建 url

> ID：16025122
> 
> 赞同：0
> 
> 时间：2013-04-15T21:37:26.167
> 
> 标签：php, html, post

该网站将使用 php & mysql

对于我的新网站，我正在尝试使用干净的 url，而不是拥有可怕的页面？x=1&y=23&ee=23 我想要更好的东西。

使用带有 POST 方法的表单，我想得到类似的东西

[http://www.xxx.com/page-color-blue-size-12-light](http://www.xxx.com/page-color-blue-size-12-light)

如果 action="action-page.php" 则加载的页面将需要从 action-page.php 读取 $_POST 并创建一个新 URL 并重定向到新 URL，这似乎不是一个好主意。

如果我使用 $_GET，我会以 url 结尾？和 & 作为参数。

解决方案可以是在单击提交之前更新方法的 JS，但在这种情况下，该网站将不适用于谷歌...

如您所见，我找不到一个好的解决方案...任何想法？

笔记 -

感谢您的回复，但我不是在寻找 URL 重写，如果我试图阅读 [http://www.xxx.com/page-color-blue-size-12-light](http://www.xxx.com/page-color-blue-size-12-light) 但它不是我正在尝试做什么，我正在尝试从帖子中构建此 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:43:12.303

通过 POST 请求发送参数

```
<form action="page.php" method="post">
  <input type="hidden" name="data" value="1" />
  <input type="submit" value="Submit">
</form> 
```

请求 URL 将是 just `page.php`，并且`$_POST['data']`将包含您的参数。

如果你想使用类似的 URL `http://www.xxx.com/page-color-blue-size-12-light`，那么你需要

*   通过一些重写规则由 Web 服务器重定向；
*   通过解析 PHP 脚本中的 URL 路由到其他页面。

可能是第一个解决方案更好，因为第二个解决方案意味着处理 2 个 HTTP 请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T21:44:17.247

这只不过是所谓的 URL 重写。您可以从以下网站找到更多信息。

[http://www.cyberdesignz.com/blog/website-design/url-rewriting-top-5-ways-of-php-url-rewriting/](http://www.cyberdesignz.com/blog/website-design/url-rewriting-top-5-ways-of-php-url-rewriting/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T21:42:54.987

在我看来，您正在寻求帮助进行[URL 重写](http://www.sitepoint.com/guide-url-rewriting/)。它们涵盖了让您的位置栏显示一些漂亮的东西而不是您提到的所有查询字符串参数的基础知识。更新：

我对您的问题理解得更好一些，我想我可能有一个解决方案，至少可以让您了解问题的第一部分。我把它放在[jsfiddle 上供](http://jsfiddle.net/66cGv/)你查看。

```
<form id="myform" action="" method="POST">
    <input type="text" id="color" name="color" value="blue"/>
    <br />
    <input type="text" id="size" name="size" value="12-light"/>
    <br />
    <input type="submit" value="Go" />
</form>

<script type="text/javascript">
jQuery(function($) {
    $("#myform").submit(function() {
        var color = $("#color").val();
        var size = $("#size").val();
        $("#myform").attr("action", "/page-color-" + color + "-size-" + size);
        $("#myform").submit();
    });
});
</script> 
```

# localization - 在 App Store 中本地化现有应用的标题？

> ID：16025124
> 
> 赞同：0
> 
> 时间：2013-04-15T21:37:33.373
> 
> 标签：localization, app-store

我有一个刚刚发布到 App Store 的应用程序；对于它的第一次更新，我想尝试本地化，包括在一些非英语语言环境（以及字符串等）中本地化应用程序的标题。有人知道我是否可以通过更新更改外国应用商店中的标题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T21:39:51.393

是的，您可以，在 iTunes Connect 中您可以编辑更新的元数据。

添加版本时，您必须提供新的更新版本号和更改内容的说明，这是一些英文信息。

然后你会被带到页面上传你的二进制文件并设置其他选项，如发布日期等......这里有一个名为“元数据和上传”的部分，用于应用程序名称、描述、关键字、支持 URL、屏幕截图上传之类的...

在这里，您可以添加本地化，​​让您更改为每个本地化选择应用程序名称。

希望有帮助

# c - Get target length of *printf function family

> ID：16025127
> 
> 赞同：1
> 
> 时间：2013-04-15T21:38:04.043
> 
> 标签：c, malloc, printf

I need the target length of how many characters I will need in a `*printf` function. My scenario is a logging facility that should finally create a string (what happens to it is irrelevant, it must end in a `char *`).

I currently have this:

```
void log(char *format, ...)
{
    char *full_message, *message;
    FILE *nullfile;
    va_list args;

    va_start(args, format);
    nullfile = fopen("/dev/null", "w");
    message_len = vfprintf(nullfile, format, args) + 1;
    fclose(nullfile);
    va_end(args);

    va_start(args, format);
    message = malloc(message_len);
    vsnprintf(message, message_len, format, args);
    va_end(args);

    // now do something with the final message
} 
```

That works like a charm, but it seems overly complicated. Is there an easier way? Something that makes more sense.

Additional detail: I finally format the string further and dump it into an OpenSSL `BIO`, so its not as easy as using `vfprinf`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T21:43:29.720

一个理智且合理的简化是使用`vsnprintf()`而不是`vfprintf()`，因为您只需要一个`NULL`指针和一个为零的缓冲区大小，而不是一个文件。优雅一些。（别担心，C 中的一个常见习惯用法是两次调用类似的函数：第一次是为了计算缓冲区长度，第二次是为了真正完成工作。）

```
va_start(args, format);
int message_len = vsnprintf(NULL, 0, format, args) + 1;
va_end(args); 
```

**哦，还有……**

```
void log(char *format, ...) 
```

应该

```
void log(const char *format, ...) 
```

真的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T21:45:30.887

这就是 snprintf 的用途：

```
void log(char *format, ...)
{
    char *message;
    va_list args;

    va_start(args, format);
    message_len = vsnprintf(0, 0, format, args) + 1;
    va_end(args);

    va_start(args, format);
    message = malloc(message_len);
    vsnprintf(message, message_len, format, args);
    va_end(args);

    // now do something with the final message
} 
```

# union - 如何为包含联合的类编写析构函数

> ID：16025132
> 
> 赞同：4
> 
> 时间：2013-04-15T21:38:31.080
> 
> 标签：union, destructor

我有一个类包含像这样的不同类型的变量。

```
class Field
{
  union DATATYPE
  {
    int intValue;
    double doubleValue;
    char* charValue;
    MyClass* MyClassValue;
  } Value;
  ~Field()
  {
    delete[] Value.charValue;
    delete Value.MyClassValue;
  }
} 
```

这个析构函数给出错误。由于某些对象没有初始化 charValue，因此尝试删除它会引发错误。

# vba - 复制目标方法不适用于大量数据/公式

> ID：16025136
> 
> 赞同：0
> 
> 时间：2013-04-15T21:38:46.007
> 
> 标签：vba, excel, excel-2010

如果 iRow 达到 40,000（请注意，它会导致总共 3,720,000 个公式......），则下面提取的代码可以完美运行。我现在需要为超过 100,000 的 iRow 做同样的事情，如果它完成的话，它是指数级的糟糕......我让 PC 开启超过一天，但它没有。

```
Dim iRow    As LongPtr

Application.ScreenUpdating = False
Application.DisplayAlerts = False
Application.EnableEvents = False
Application.Calculation = xlCalculationManual

WSD.Range("K2:CZ2").Copy Destination:=WSD.Range("K3:CZ" & iRow)
Application.Calculation = xlCalculationAutomatic
Application.Calculation = xlCalculationManual
WSD.Range("K3:CZ" & iRow).Value = WSD.Range("K3:CZ" & iRow).Value

Application.Calculation = xlCalculationAutomatic
Application.ScreenUpdating = True
Application.DisplayAlerts = True
Application.EnableEvents = True 
```

非常感谢您对这个问题的任何了解。

配置：Excel 2010 x64 VBA7 WIN64

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:52:20.867

这对我有用，不到 30 秒：

```
Sub CopyExample()
Dim iRow As Long
Dim calcState As Long

iRow = 100000
calcState = Application.Calculation
Application.ScreenUpdating = False
Application.Calculation = xlCalculationManual
ActiveSheet.Range("A1:CZ1").Copy Destination:=ActiveSheet.Range("A2:CZ" & iRow)
Application.Calculation = calcState
Application.ScreenUpdating = True
End Sub 
```

`.Copy`如果这仍然给您带来麻烦，您可能想做一些其他的事情。

**编辑#1**尝试使用`AutoFill`方法而不是`Copy`方法。对于 50,000 行，这需要不到 2 分钟。我的虚拟数据具有 volatile`Rand()`函数，以及基于此函数的另一个函数，跨越 A1:CZ1 的所有列。

```
Option Explicit

Sub CopyExample2()
Dim iRow As Long
Dim calcState As Long
Dim sourceRange As Range
Dim pasteRange As Range
Dim t As Long

t = Timer
iRow = 100000
calcState = Application.Calculation

'Turn off screenupdating, calculation, etc.'
Application.ScreenUpdating = False
Application.Calculation = xlCalculationManual

Set sourceRange = ActiveSheet.Range("A1:CZ1")
Set pasteRange = ActiveSheet.Range("A1:CZ" & iRow)
    With sourceRange
        .AutoFill pasteRange
    End With

'Turn on calculation, screenupdating, etc.'
Application.Calculation = xlCalculationAutomatic
Application.ScreenUpdating = True

Debug.Print Timer - t

End Sub 
```

# php - 创建间隔插入加权项的数组

> ID：16025137
> 
> 赞同：0
> 
> 时间：2013-04-15T21:38:46.153
> 
> 标签：php, jquery

我正在开发一个用于客户大厅的消息板。

“rundown”是从 PHP 创建的 JSON，每 5 分钟通过 AJAX 调用检查更新。概要从包含项目、其持续时间以及开始和停止时间的 MySQL 数据库中填充。JQuery 遍历内容然后循环到数据的开头。目前没有项目在列表中重复。

已请求加权系统，以便当重要项目（$$$ 客户、员工会议等）出现时，它会更频繁地出现在列表中（而不是在循环发生之前只出现一次）。

我在数据库中添加了一个权重列，但在我的最终数组构建中无法弄清楚如何实现它：

```
$i = 0;
foreach ($rundown_standard as $item) {
            $return[$i]["playlist_id"] = $i;
            $return[$i]["item_id"] = $item["id"];
            $return[$i]["weight"] = $item["weight"];
            $return[$i]["duration"] = $item["duration"];
            $return[$i]["template"] = $item["template"];
            $return[$i]["headline"] = htmlentities($item["headline"]);

        $content = $helper->isJson($item["content"]);
        if ($content) {
            $return[$i]["content"] = $content; 
        } else { 
            $return[$i]["content"] = str_replace(array('{images_path_absolute}', '{images_path_relative}'), array(IMAGES_PATH_ABSOLUTE, IMAGES_PATH_RELATIVE), $item["content"]);
        }

    i++;
} 
```

`$return`是我发送给调用此函数的函数的格式化数据。

默认权重`0`意味着它应该按照添加到数组的顺序只显示一次，权重为 的东西`90`应该出现在每个其他项目之后。

我尝试设置另一个计数器变量，然后插入项目并重置计数器，这仅适用于一个加权项目，但不适用于多个加权项目

清如泥？

感谢您的任何建议。

编辑 17:45：JavaScript 只是为了动态更新页面；遍历 JSON 并将下一项附加到列表中：

```
if (window.item_content[i].template == "1") {
    return '<div class="featured-item" id="featured-item-'+window.item_content[i].playlist_id+'"><img src="'+window.item_content[i].content+'" /></div>';
} 
```

这是我的问题所在的数组，如果要插入多个元素，我该如何以指定的间隔插入一个元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:24:39.543

听起来你知道如何编码，只需要一个算法，所以我会给你一些伪代码。如果你需要我把它变成更好的代码，我可以这样做。

1.  使用两个数组：`return`和`highPriority`. `return`不会在乎重量，而`highPriority`会。
2.  遍历您的给定列表，并将所有 0 权重放入`return`，将所有其他权重放入`highPriority`.
3.  按重量排序`highPriority`，从低到高。
4.  对于 中的每个项目`highPriority`，数学运算很容易，但来​​自典型的“标准化和缩放”操作：标准化权重 ( `n = weight / 90`)，然后将其缩放到数组的大小 ( `n *= return.length`) 以找到要添加的项目数数组。`return`然后要找出分配数组中的项目需要多少空间，您可以这样做`return.length / n`。不过，这简单地归结为`90/weight`！

    1.  `var step = 90 / item.weight;`
    2.  `for (var i = 0; i <= 90; i += step) place item at i[step]`

注意事项：

*   我们从零权重开始，因为它们的优先级很低，并且只需要存在一次。
*   对于所有其他人，由于它们的权重较高，我们将它们从阵列的*前面开始。*
*   我们计算的`step`每个元素都会发生变化，因为 return.length 在每次迭代中都会发生变化，但是由于我们最后添加最高优先级的元素，它们仍然会获得最高优先级。
*   我们`i <= 90`用来确保这些加权值至少出现两次。如果只有`i < 90`，并且权重为 1，我们最终只能得到一项，并且权重 1 应该不同于权重 0。
*   我还没有完全检查过这个算法。我们可能需要一些`Math.floor`或`Math.ceiling`在计算步骤。检查你的边缘案例（比我做的更好）！

那应该让你继续前进。希望能帮助到你！

# javascript - 从同一个 onclick 调用两个函数

> ID：16025138
> 
> 赞同：141
> 
> 时间：2013-04-15T21:38:48.477
> 
> 标签：javascript, html, onclick

**HTML & JS**

如何从一个 onclick 事件中调用 2 个函数？这是我的代码

```
 <input id ="btn" type="button" value="click" onclick="pay() cls()"/> 
```

两个函数是 pay() 和 cls()。谢谢！

* * *

## 回答 #1

> 赞同：257
> 
> 时间：2013-04-15T21:41:26.517

在函数调用的末尾添加分号`;`，以使它们都能正常工作。

```
 <input id="btn" type="button" value="click" onclick="pay(); cls();"/> 
```

我不相信最后一个是*必需*的，但是嘿，不妨将它添加进去。

这是 SitePoint [http://reference.sitepoint.com/html/event-attributes/onclick的一个很好的参考](http://reference.sitepoint.com/html/event-attributes/onclick)

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-04-15T21:41:04.040

您可以创建一个调用这两个函数的函数，然后在事件中使用它。

```
function myFunction(){
    pay();
    cls();
} 
```

然后，对于按钮：

```
<input id="btn" type="button" value="click" onclick="myFunction();"/> 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-04-15T21:40:20.683

您可以从另一个函数内部调用函数

```
<input id ="btn" type="button" value="click" onclick="todo()"/>

function todo(){
pay(); cls();
} 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-04-15T21:47:59.980

```
onclick="pay(); cls();" 
```

但是，如果您在“pay”函数中使用 return 语句，则执行将停止并且“cls”不会执行，

解决方法：

```
onclick="var temp = function1();function2(); return temp;" 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2014-07-12T18:07:44.000

不推荐从 html 绑定事件。这是推荐的方式：

```
document.getElementById('btn').addEventListener('click', function(){
    pay();
    cls();
}); 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2013-04-15T21:42:20.573

使用 jQuery：

```
jQuery("#btn").on("click",function(event){
    event.preventDefault();
    pay();
    cls();
}); 
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2013-04-15T21:47:01.347

只是为了提供一些多样性，也可以使用[逗号运算符，但有些人可能会说“noooooo！”，但它有效：](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comma_Operator)

```
<input type="button" onclick="one(), two(), three(), four()"/> 
```

[http://jsbin.com/oqizir/1/edit](http://jsbin.com/oqizir/1/edit)

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-04-15T21:42:06.127

试试这个

```
<input id ="btn" type="button" value="click" onclick="pay();cls()"/> 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2014-04-15T10:08:38.767

在两个函数之间放置一个分号作为语句终止符。

# libgit2 - 如何创建历史图表

> ID：16025145
> 
> 赞同：4
> 
> 时间：2013-04-15T21:39:28.133
> 
> 标签：libgit2, revision-history

我正在尝试获取足够的信息来使用 libgit2 创建历史图表，但我不确定如何获得适当的提交分支名称等内容。

我想重现使用以下 git 命令生成的类似内容：

```
git log --oneline --graph --decorate --all 
```

这是我正在使用的代码：

```
git_commit* old_head = NULL;
error = git_revparse_single( (git_object**) &old_head, open_repo, "refs/heads/master" );
if( error != 0 )
{
  return SG_PLUGIN_OK;
}

const git_oid *head_oid = git_object_id( (git_object*)old_head );

git_revwalk *walk;

git_revwalk_new( &walk, open_repo );
git_revwalk_sorting( walk, GIT_SORT_TOPOLOGICAL | GIT_SORT_TIME );
git_revwalk_push( walk, head_oid );

const git_signature *cauth;
const char *cmsg;
git_time_t ctime;

git_oid newoid;
while( ( git_revwalk_next( &newoid, walk ) ) == 0 )
{
  git_commit *wcommit;
  error = git_commit_lookup( &wcommit, open_repo, &newoid );
  if( error != 0 )
  {
    return SG_PLUGIN_OK;
  }

  ctime = git_commit_time( wcommit );
  cmsg  = git_commit_message( wcommit );
  cauth = git_commit_author( wcommit );

  TRACE("\t%s (%s at %d)\n", cmsg, cauth->email, ctime );

  git_commit_free( wcommit );
}

git_revwalk_free( walk ); 
```

我可以遍历提交，但上面的代码有几个问题：

*   我只是得到主主分支的提交，如果我迭代代码来更改每个分支名称的 revparse_single，那么我会得到所有提交，但有些提交显然是重复的，其中提交位于多个分支下
*   我只是得到提交消息，作者和时间，那么我如何找出分支名称是什么？
*   我做对了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T13:54:30.140

使用一次步行并推送您想要使用的任何提示，`push_glob`如果您愿意，您可以使用它来推送所有分支。

如果你想构建一个图表，那么你需要查看提交有哪些父级，并使用该信息构建你的图表。

至于分支名称，如果您指的是 git-log`--decorate`选项的作用，您只需记住每个分支提示指向的提交，然后在打印出该信息时将其绘制在旁边。

# android - Dropbox Core API 用户限制

> ID：16025149
> 
> 赞同：0
> 
> 时间：2013-04-15T21:39:40.433
> 
> 标签：android, api, dropbox

我正在使用 Dropbox Core API 构建一个 Android 应用程序。

我在编写应用程序时仍在使用开发人员模式，在控制台中我可以看到 API 的用户限制为 100 个。

申请公用后会解锁吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:26:01.437

是的，当您申请公共使用时，用户限制将被取消。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-14T06:09:58.633

当您希望每个用户都使用您的应用程序时，您必须为您的应用程序申请“生产模式”。请获取下面的链接，然后您可以更改您的设置。

[为您的应用申请生产模式](https://www.dropbox.com/developers/apps/info/9mme9plibstwejq)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-15T12:14:39.670

*   [1在此处](https://www.dropbox.com/developers/apps)访问您的应用
*   2 设置
*   3 开发用户
*   如果状态只有你
*   --> 4 启用其他用户
*   else --> 4 如果你想链接超过500个用户，请申请生产状态。[Dropbox 文档](https://www.dropbox.com/developers/reference/developer-guide#production-approval)中的更多详细信息

# php - Using a HTML vaule as a paramiter

> ID：16025153
> 
> 赞同：0
> 
> 时间：2013-04-15T21:39:52.860
> 
> 标签：php, html

I have the following code

```
<form name="form" id="form">
  <select name="name"  onChange=" <?php $do=&something('val')?>">
    <option value="val1">val2</option>
    <option>val1</option>
  </select>
</form> 
```

Im trying to use the options value as a parameter for a function that passes by referance how do i do this correctly

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:42:34.260

您不能在 select html 元素的 onChange 事件中使用 PHP 代码。您应该在 onChange 事件中使用 Javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:47:54.450

除了您有错误的 HTML 和错误的 javascript 之外，问题仍然是如何将值用作函数的变量？所以...

```
<select name="name">
<option value="value2">value2</option>
<option value="value3">value3</option
</select> 
```

与`value3`选定

发布后，您将创建这样的变量

```
$_POST['name'] = 'value3' 
```

然后

```
$param1 = $_POST['name']; 
```

将收到价值`'value3'`。

所以你可以将它传递给一个函数：

```
function myFunc($param1) {
....
}
myFunc($param1); 
```

# java - Random Color Change Each Iteration

> ID：16025158
> 
> 赞同：0
> 
> 时间：2013-04-15T21:40:05.557
> 
> 标签：java, graphics

While using an ArrayList, I can't seem to figure out how to reset and re-apply the random color for each iteration of the for loop. I am trying to reset and apply my random color every time my XLeft position is changed. This is only a section of one class I am using, and my getMax() was defined by a Scanner input. Any suggestions?

```
import java.util.ArrayList;
import java.util.Random;
import java.awt.Color;
import java.awt.Graphics2D;
import java.awt.Rectangle;

public class BarChart {

private int width, height;
private ArrayList<Double> values = new ArrayList<Double>();
private Random generator = new Random();
int red = generator.nextInt(255);
int green = generator.nextInt(255);
int blue = generator.nextInt(255);
private Color randomColor = new Color(red, green, blue);

public BarChart(int aWidth, int aHeight) {

    width = aWidth;
    height = aHeight;

}

public void add(double inputValues) {
    values.add(inputValues);
}

public double getMax() {

    double max = values.get(0);

    for (int i = 1; i < values.size(); i++) {
        if ((values.get(i)) > max)
            max = values.get(i);

    }
    return max;
}

public void draw(Graphics2D g2) {

    int xLeft = 0;
    double barWidth = width / values.size();

    for (int i = 0; i < values.size(); i++) {

        double barHeight = (values.get(i) / getMax()) * height;
        Rectangle bar = new Rectangle(xLeft, height - ((int) barHeight),
                (int) barWidth, (int) barHeight);
        g2.setColor(randomColor);
        g2.fill(bar);
        xLeft = (int) (xLeft + barWidth);
        xLeft++;

    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:50:45.073

听起来您在循环之前定义了一次随机颜色。这意味着当您运行循环时，它每次都使用相同的“随机颜色”。您需要将随机颜色的定义移动到循环中，以便它在每次迭代中运行。

编辑（根据您的评论）：

```
public void draw(Graphics2D g2) {

int xLeft = 0;
double barWidth = width / values.size();

for (int i = 0; i < values.size(); i++) {

    double barHeight = (values.get(i) / getMax()) * height;
    Rectangle bar = new Rectangle(xLeft, height - ((int) barHeight),
            (int) barWidth, (int) barHeight);

    red = generator.nextInt(255); 
    green = generator.nextInt(255);
    blue = generator.nextInt(255);
    randomColor = new Color(red, green, blue);

    g2.setColor(randomColor);
    g2.fill(bar);
    xLeft = (int) (xLeft + barWidth);
    xLeft++;

} 
```

# c# - 如何使用 SQLite 将连接查询返回到类中

> ID：16025159
> 
> 赞同：0
> 
> 时间：2013-04-15T21:40:05.707
> 
> 标签：c#, sqlite, xamarin.android

我正在编写的 Android 应用程序中使用 SQLite。该代码在查询中将两个参数连接为一个，但不会将其返回到持有类

我的查询代码如下所示

```
public List<BoyRecords> getBoyOrderedList(bool direction)
{
    string order = direction ? "LastName, Firstname" : "FirstName, LastName";
    string sql = "SELECT BoyID, FirstName || \' \' || LastName AS FullName FROM BoyRecords ORDER BY " + order;
    lock (this.dbLock)
    {
        using (SQLiteConnection sqlCon = new SQLiteConnection(this.DBPath))
        {
            sqlCon.Execute(Constants.DBClauseSyncOff);
            List<BoyRecords> br = sqlCon.Query<BoyRecords>(sql);
            return br;
        }
    }
} 
```

BoyRecords 只是一个类

```
public class BoyRecords
{
    [PreserveProps(AllMembers=true)]
    public BoyRecords()
    {
    }

    public int BoyID
    { get; set; }

    [Ignore()]
    public Guid ReplicationID
    { get; set; }

    private string lastname;
    public string LastName
    {
        get { return string.IsNullOrEmpty(lastname) ? string.Empty : lastname;}
        set
        {
            lastname = value.Length > 30 ? value.Substring(0, 30).ToLower() : value.ToLower();
        }
    }

    private string firstname;
    public string FirstName
    {
        get { return string.IsNullOrEmpty(firstname) ? string.Empty : firstname;}
        set
        {
            firstname = value.Length > 30 ? value.Substring(0, 30).ToLower() : value.ToLower();
        }
    }

    private string FullName
    { get; set; }
} 
```

（这只是类的一个子集，它实际上要大得多）。

虽然 BoyID 返回到类中，但 FullName 不是。这可能是因为我误解了 SQLite 手册，但是有没有办法将连接返回到 FullName 字段？

# python - 在模板中填充表单并更新新数据

> ID：16025165
> 
> 赞同：0
> 
> 时间：2013-04-15T21:40:54.147
> 
> 标签：python, django

我试过这个，但在 django 中没有更新。

```
def update_product(request):
    a= ProductForm(instance=Product.objects.get(product_id =2))#static id
    render_to_response('profiles/updateproduct.html',{'form': a},RequestContext(request))
    if request.method == "POST":
        form = ProductForm(request.POST, instance=a)
        if form.is_valid():
            j=form.save(commit=False)
            j.save
            confirmation_message = "product information updated successfully!"
        return HttpResponse("hhhh")
    else:
        form = ProductForm( instance = a ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:49:11.107

`save`因为你丢失了，所以你从来没有真正调用模型的方法`()`。您必须提供这些才能调用该方法。

```
j = form.save(commit=False)
j.save() 
```

作为旁注，由于在保存模型之前您没有对模型做任何事情，您可以简单地将这两行替换为

```
j = form.save() 
```

这里没有真正的需要`commit=False`。

# nginx - 当用户在我的网站上观看视频时，为什么我在日志中看到错误 206 或 404？

> ID：16025167
> 
> 赞同：0
> 
> 时间：2013-04-15T21:40:56.210
> 
> 标签：nginx, video-streaming, jwplayer

我使用 nginx、jw 播放器，有时我会看到那些错误 206 和 404。但通常，响应是 200。我的日志：

XX.XX.XX.XX - - [15/Apr/2013:21:23:40 +0400] "GET /route/86258d45ffc3403789b73e5ff2af83ce/106/video.flv HTTP/1.1" 206 1 " [http://example.com /course/36/files/106/](http://example.com/course/36/files/106/) " "Mozilla/5.0 (Linux; U; Android 4.0.4; ru-ru; GT-P5100 Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) 版本/4.0 Safari/534.30 "

我红色关于错误 206 - 部分内容。但我不明白它何时以及为什么会发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:53:38.893

HTTP 状态 206（或从 200 到 299 的任何其他状态）不是错误。它指示在客户端请求时发送的[部分内容响应。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.7)由于它是视频，我猜用户跳过了视频的一部分，因此客户端上的播放器软件发送了对其余部分的部分请求。

# r - 来自单个数据帧的多个或多个时间序列图输出

> ID：16025168
> 
> 赞同：3
> 
> 时间：2013-04-15T21:40:57.163
> 
> 标签：r, time-series, apply, par

# 你好，

我已经为这个问题苦苦挣扎了一段时间，任何能帮助我的人我都会非常感激。

首先，我正在处理包含多个时间序列的单个数据框中的时间序列数据。太多，无法单独输出到图表中。我尝试通过 ddply() 传递 qplot() 但是 r 告诉我它 qplot 不是一个函数，因此它不起作用。

我的数据结构是这样的......

```
goodlocs <- 
 Loc    Year    dir
Artesia 1983    1490
Artesia 1984    1575
Artesia 1986    1567
Artesia 1987    1630
Artesia 1990    1680
Bogota  1983    1525
Bogota  1984    1610
Bogota  1985    1602
Bogota  1986    1665
Bogota  1990    1715
Carlsbad    1983    1560
Carlsbad    1985    1645
Carlsbad    1986    1637
Carlsbad    1987    1700
Carlsbad    1990    1750
Carlsbad    1992    1595
Datil   1987    1680
Datil   1990    1672
Datil   1991    1735
Datil   1992    1785 
```

我有大约 250 个位置（Locs），并且希望能够在如下图所示的图表上查看每个站点的数据，这样我就可以直观地检查我的所有数据。

```
Artesia <- goodlocs[goodlocs$Loc == "Artesia",]

qplot(YEAR, dir, data = Artesia, geom = c("point", "line"), xlab = "Year", 
  ylab = "DIR", main = "Artesia DIR Over Record Period") + 
  geom_smooth(method=lm) 
```

我知道 Par() 应该有助于做到这一点，但我一生都无法弄清楚。任何帮助是极大的赞赏。

谢谢，

-齐亚

编辑 -

正如 Arun 指出的那样，我正在尝试保存我的 goodlocs df 按“Loc”分割的 250 个不同图形的 .pdf，其中包含用于数据审查的点和线几何图形......

我还尝试通过 qplot 将我的 df 的 ddply 作为数据传递，但它也不起作用，我并没有真正期待它，但我不得不尝试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:40:50.613

这个怎么样？

```
require(ggplot2)
require(plyr)
require(gridExtra)
pl <- dlply(df, .(Loc), function(dat) {
    ggplot(data = dat, aes(x = Year, y = dir)) + geom_line() + 
    geom_point() + xlab("x-label") + ylab("y-label") + 
    geom_smooth(method = "lm")
})

ml <- do.call(marrangeGrob, c(pl, list(nrow = 2, ncol = 2)))
ggsave("my_plots.pdf", ml, height = 7, width = 13, units = "in") 
```

* * *

**想法：**首先拆分数据`Loc`并为每个子集创建图。拆分部分是使用基本上将 a作为输入并提供 a作为输出的`plyr`函数完成的。绘图元素存储在与子集对应的列表的每个元素中。然后，我们使用包的功能来排列多个图（它也有非常有用的和参数来设置参数）。然后，您可以使用from保存它。`dlply``data.frame``list``gridExtra``marrangeGrob``nrow``ncol``ggsave``ggplot2`

我将留给您可能需要的任何其他调整。

# xslt - 使用 XPATH 计算最小属性元素并将其添加到另一个属性

> ID：16025169
> 
> 赞同：0
> 
> 时间：2013-04-15T21:41:00.607
> 
> 标签：xslt, attributes, minimum

我的问题与[此](https://stackoverflow.com/questions/1128745/how-can-i-use-xpath-to-find-the-minimum-value-of-an-attribute-in-a-set-of-elemen)类似，作者询问如何找到一组元素的最小属性。我是 xpath 的初学者，我无法接受该答案并将其添加到我的 XSLT。我需要找到一个计划的最低价格（见下文）并向包含该最低价格的细分添加一个属性。

我有以下 XML 片段：

```
<Subdivision Status="Active">
  <SubdivisionName>Chesla</SubdivisionName>
  <Plan Type="SingleFamily">
    <PlanNumber>555</PlanNumber>
    <PlanName>Pinewood</PlanName>
    <BasePrice>200500.0000</BasePrice>
  </Plan>
  <Plan Type="MultiFamily">
    <PlanNumber>444</PlanNumber>
    <PlanName>Westfield</PlanName>
    <BasePrice>270000.0000</BasePrice>
  </Plan> 
```

*注意：我的 XML 文档中可以有多个细分。为简洁起见，我只是在示例中显示一个。*

我的最终输出与输入相同，只是在 Subdivision 元素中添加了 PriceLow 属性，该元素包含作为 Subdivision 兄弟的所有 Plans 的最小 BasePrice：

```
<Subdivision Status="Active" PriceLow="200500.00"> <==== ADDED!!!
  <SubdivisionName>Chesla</SubdivisionName>
  <Plan Type="SingleFamily">
    <PlanNumber>555</PlanNumber>
    <PlanName>Pinewood</PlanName>
    <BasePrice>200500.00</BasePrice>
  </Plan>
  <Plan Type="MultiFamily">
    <PlanNumber>444</PlanNumber>
    <PlanName>Westfield</PlanName>
    <BasePrice>270000.00</BasePrice>
  </Plan> 
```

我不完整的 xsl 文件如下所示：

```
<xsl:output omit-xml-declaration="yes" indent="yes"/>

<xsl:template match="node()|@*">
    <xsl:copy>
        <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="Subdivision">
   ... something goes here ...
</xsl:template> 
```

有人可以帮我完成这个 XSLT 文件吗？我正在阅读一些关于 XSLT 的书籍，但与此同时我需要尽快完成这个项目。

干杯，布雷特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:17:23.053

这应该这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="Subdivision">
    <xsl:copy>
      <xsl:apply-templates select="@*" />
      <xsl:attribute name="PriceLow">
        <xsl:apply-templates select="Plan/BasePrice" mode="min">
          <xsl:sort select="." order="ascending" data-type="number" />
        </xsl:apply-templates>
      </xsl:attribute>

      <xsl:apply-templates select="node()" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="node()" mode="min">
    <xsl:if test="position() = 1">
      <xsl:value-of select="."/>
    </xsl:if>
  </xsl:template>
</xsl:stylesheet> 
```

或者更简洁但可能效率较低的方法：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="Subdivision">
    <Subdivision PriceLow="{Plan/BasePrice[not(. > current()/Plan/BasePrice)]}">
      <xsl:apply-templates select="@*[name() != 'PriceLow'] | node()" />
    </Subdivision>
  </xsl:template>
</xsl:stylesheet> 
```

在此示例数据上运行其中任何一个时：

```
<root>
  <Subdivision Status="Active">
    <SubdivisionName>Chesla</SubdivisionName>
    <Plan Type="SingleFamily">
      <PlanNumber>555</PlanNumber>
      <PlanName>Pinewood</PlanName>
      <BasePrice>200500.0000</BasePrice>
    </Plan>
    <Plan Type="MultiFamily">
      <PlanNumber>444</PlanNumber>
      <PlanName>Westfield</PlanName>
      <BasePrice>270000.0000</BasePrice>
    </Plan>
  </Subdivision>

  <Subdivision Status="Active">
    <SubdivisionName>Newhaven</SubdivisionName>
    <Plan Type="SingleFamily">
      <PlanNumber>555</PlanNumber>
      <PlanName>Pinewood</PlanName>
      <BasePrice>200900.0000</BasePrice>
    </Plan>
    <Plan Type="MultiFamily">
      <PlanNumber>444</PlanNumber>
      <PlanName>Westfield</PlanName>
      <BasePrice>200100.0000</BasePrice>
    </Plan>
    <Plan Type="QuadrupleFamily">
      <PlanNumber>111</PlanNumber>
      <PlanName>Pinewood</PlanName>
      <BasePrice>200050.0000</BasePrice>
    </Plan>
    <Plan Type="QuintupleFamily">
      <PlanNumber>222</PlanNumber>
      <PlanName>Pinewood</PlanName>
      <BasePrice>200300.0000</BasePrice>
    </Plan>
  </Subdivision>
</root> 
```

结果是：

```
<root>
  <Subdivision Status="Active" PriceLow="200500.0000">
    <SubdivisionName>Chesla</SubdivisionName>
    <Plan Type="SingleFamily">
      <PlanNumber>555</PlanNumber>
      <PlanName>Pinewood</PlanName>
      <BasePrice>200500.0000</BasePrice>
    </Plan>
    <Plan Type="MultiFamily">
      <PlanNumber>444</PlanNumber>
      <PlanName>Westfield</PlanName>
      <BasePrice>270000.0000</BasePrice>
    </Plan>
  </Subdivision>

  <Subdivision Status="Active" PriceLow="200050.0000">
    <SubdivisionName>Newhaven</SubdivisionName>
    <Plan Type="SingleFamily">
      <PlanNumber>555</PlanNumber>
      <PlanName>Pinewood</PlanName>
      <BasePrice>200900.0000</BasePrice>
    </Plan>
    <Plan Type="MultiFamily">
      <PlanNumber>444</PlanNumber>
      <PlanName>Westfield</PlanName>
      <BasePrice>200100.0000</BasePrice>
    </Plan>
    <Plan Type="QuadrupleFamily">
      <PlanNumber>111</PlanNumber>
      <PlanName>Pinewood</PlanName>
      <BasePrice>200050.0000</BasePrice>
    </Plan>
    <Plan Type="QuintupleFamily">
      <PlanNumber>222</PlanNumber>
      <PlanName>Pinewood</PlanName>
      <BasePrice>200300.0000</BasePrice>
    </Plan>
  </Subdivision>
</root> 
```

# compiler-construction - 带有 sfml 的 Valgrind

> ID：16025170
> 
> 赞同：0
> 
> 时间：2013-04-15T21:41:01.253
> 
> 标签：compiler-construction, valgrind, sfml

我对使用 Valgrind 完全陌生。目前我已经为程序编译了一个exe来测试；然而，测试带来了超过 250k 的错误。这是使用新 sfml 项目制作的基本项目。除了图像和窗口以及关闭程序的能力之外，它实际上什么都没有。我编译得很好，但如前所述，Valgrind 产生 250k+ 错误。有几次是1000万。有谁知道我做错了什么？

valgrind --leak-check=yes ./test

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T12:37:43.300

它可能没有任何问题。在我的系统上，我得到了用于 opengl 的 fglrx-driver(ati system)，valgrind 产生这些是很常见的。所以这些实际上并不是 sfml 的内存泄漏。这些不是您应该担心的内存泄漏：它们中的大多数将来自一个库。只需将错误放在您的默认抑制文件 valgrind 中，这样您就可以看到实际的内存泄漏。

# sql - 计算重复项

> ID：16025173
> 
> 赞同：-2
> 
> 时间：2013-04-15T21:41:07.327
> 
> 标签：sql, duplicates

我有一张销售表

```
Store | Transaction | ItemID

    A | 1000 | A1
    A | 1000 | A2
    A | 1001 | A3
    A | 1001 | A3
    A | 1001 | A4
    B | 2000 | B1
    B | 2000 | B3
    B | 2001 | B2
    B | 2002 | B4 
```

我想查询计算以下结果：

```
Store | Total Transactions | Total Item Sales

    A | 2 | 5
    B | 3 | 4 
```

你能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:50:10.467

我假设您对 SQL 很陌生。查询是一个简单的聚合：

```
select store, count(distinct Transaction) as NumTransactions,
       count(*) as NumItems
from t
group by store; 
```

# caching - OutputCache 在应用程序级别 mvc3

> ID：16025181
> 
> 赞同：2
> 
> 时间：2013-04-15T21:41:44.113
> 
> 标签：caching, asp.net-mvc-4, iis-7

我有一个 MVC4/Razor 网站。内容在大约一个月左右是静态的 - 所以没有数据库命中。仅供参考，它的区域很好。

如何为整个应用程序实现缓存？有没有办法在集中位置（比如 global.asax）添加 [OutputCache] 属性，而不是将其添加到单个控制器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:08:29.703

您可以在 Global.asax 中全局注册过滤器

```
var filters = GlobalFilters.Filters;
filters.Add(new MyOutputCacheFilter()); 
```

# javascript - d3.js 动画/过渡圈更新

> ID：16025183
> 
> 赞同：2
> 
> 时间：2013-04-15T21:41:49.403
> 
> 标签：javascript, animation, d3.js, transitions

我有一个简单的折线图，每 5 秒检查一次更新并在需要时重新绘制线/比例。这一切都很好，除了：数据点。

我在重绘中缺少什么来移动点？首次渲染图形时，这些点就在那里。但是在更新时，当线重新绘制时它们不会移动。所以我在更新时选择了一个新的数据源，而旧的数据点保持不变。

更新时重绘

```
var svgAnimate = d3.select("#animateLine").transition();

        svgAnimate.select(".line") // change the line
            .duration(750)
            .attr("d", valueline(data));
        svgAnimate.selectAll(".circle") // change the circle
            .duration(750)
            .attr("d", valueline(data));
        svgAnimate.select(".x.axis") // change the  x axis
            .duration(750)
            .call(xAxis);
        svgAnimate.select(".y.axis") // change the y axis
            .duration(750)
            .call(yAxis); 
```

初始图：

```
svgAnimate.selectAll("dot")
        .data(data)
    .enter().append("circle")
        .attr("class", "circle")
        .attr("r", 5)
        .style("fill", function(d) { 
            if (d.close <= 400) {return "red"} 
            else { return "black" }
        ;})
        .attr("cx", function(d) { return x(d.date); })
        .attr("cy", function(d) { return y(d.close); }) 
```

这是我不想要的。 ![在此处输入图像描述](https://i.stack.imgur.com/R7nLd.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T02:26:25.590

你的问题是函数`valueLine`是你用来画线的函数。因此，当使用新数据再次调用它时，您会重新绘制该线。

对于圆圈，该属性`d`没有意义。但是，如果我们认为`y`轴没有变化，那么您可以执行以下操作：

```
svgAnimate.selectAll(".circle") // change the circle
    .data(newData)
    .duration(750)
    .attr("cx", function(d){return x(d.date)}; 
```

如果需要更改`y`坐标，则必须修改`cy`圆的属性。

我的代码可能没有必要那么严格，如果您仍有问题，请发布 jsFiddle。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-17T13:40:40.807

我在更新图表中的圆圈时也遇到了一些问题。这是一个有效的小提琴，如果他们有同样的问题，可能会有一些人在未来进行搜索：http: [//jsfiddle.net/noo8k17n/](http://jsfiddle.net/noo8k17n/)

问题是这一行：

```
var svgAnimate = d3.select("#animateLine").transition(); 
```

它需要被删除，然后在更新方法中您可以添加和删除圈子。

# asp.net - 如何查看 HTMLTextWriter 的内容？

> ID：16025187
> 
> 赞同：1
> 
> 时间：2013-04-15T21:42:11.837
> 
> 标签：asp.net, c#-4.0, htmltextwriter

我有一个 HtmlTextWriter 对象（theWriter）被传递给一个方法。此方法处于中间层。我想在调试模式下阅读 theWriter 的内容。方法是：

```
protected override void Render (HtmlTextWriter theWriter) {...} 
```

它继承自 Panel:WebControl。

我试过了

```
theWriter.Flush();
theWriter.InnerWriter.ToString(); 
```

但这只输出对象类型：“System.Web.HttpWriter”。我已经看到一些示例在 Response 对象上使用方法。但我无权访问这一层的 Response 。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T21:53:09.420

这`InnerWriter`是一个`TextWriter`派生类，它写入流。您必须打开该流并从中读取数据。您是否可以打开并从该流中读取是一个悬而未决的问题，并且很大程度上取决于它是什么类型的流。

因此，使用您的示例，`theWriter.InnerWriter`是一个派生自`TextWriter`. 但是你不知道是什么类型，而且`TextWriter`它本身并没有暴露底层流。

现在，如果`InnerWriter`是 a `StreamWriter`，那么您也许可以这样写：

```
var sWriter = theWriter.InnerWriter as StreamWriter;
var stream = sWriter.BaseStream;
var savePosition = stream.Position;
stream.Position = 0;
// now, you can read the stream
// when you're done reading the stream, be sure to reset its position
stream.Position = savePosition; 
```

不过，你必须非常小心。如果您获得基本流，然后用 . 将其打开`StreamReader`，则关闭`StreamReader`将关闭基础流。然后你`HtmlTextWriter`下次尝试写入它时会抛出一个异常。

您也可能无法读取流。例如，如果基本流是 a `NetworkStream`，则您无法读取它。或者它可能是一个`FileStream`只对写开放的。没有好的通用方法可以做到这一点，因为它不仅完全取决于特定的`TextWriter`派生类，还取决于`TextWriter`正在写入的流。

例如，`HtmlTextWriter`可能正在写入 a `StreamWriter`，它连接到`BufferedStream`连接到 a 的 a `GZipStream`，最终写入 a `MemoryStream`。

因此，总的来说，我建议您寻找其他解决方案来解决您的问题。除非您确定底层流是什么，并且您可以阅读它......并且事情不会意外地改变您。

# java - 取消选中复选框

> ID：16025189
> 
> 赞同：0
> 
> 时间：2013-04-15T21:42:21.283
> 
> 标签：java, javascript, jsp

我在 JSP 中有一个带有三个复选框的表单。当我选择一个复选框时，应该取消选择其他两个复选框。同样，对于所有三个复选框。如何编写这个的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:58:51.420

这应该适合你：

用 div 容器包装复选框并给它一个 id，然后将 onchange 属性分配给每个复选框，如下所示：

```
<div id="container">
    <input type="checkbox" value="0" onchange="setValues(this)"/><label>option 1</label><br/>
    <input type="checkbox" value="1" onchange="setValues(this)"/><label>option 2</label><br/>
    <input type="checkbox" value="2" onchange="setValues(this)"/><label>option 3</label><br/>
</div> 
```

然后使用此代码：

```
function setValues(elm){
    var checkboxes = document.getElementById('container').getElementsByTagName('checkbox');
    for(var i=0; i< checkboxes.length; i++)
    {
      checkboxes[i].checked = (checkboxes[i] === elm) ? true: false;
    }
} 
```

[jsfiddle](http://jsfiddle.net/arcm111/FJ2PD/)

# iphone - Xcode 对应用程序的更改出现在模拟器中但不在手机上

> ID：16025190
> 
> 赞同：0
> 
> 时间：2013-04-15T21:42:25.670
> 
> 标签：iphone, xcode4.2, xcode4.5

我一直在创建一个应用程序并将其完美地部署到我的设备上。今天我在应用程序中添加了一些图像，但设备上只显示一两张图像，但在模拟器上都可以完美运行。我已经尝试从设备上清理和卸载应用程序，但没有成功并且控制台中没有警告，我还有什么可以尝试或做的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:02:02.493

检查文件名大小写。该设备区分大小写。模拟器不是。

# php - PHP 对象运算符 "->" 被读取为 PHP end "?>"

> ID：16025195
> 
> 赞同：1
> 
> 时间：2013-04-15T21:43:09.913
> 
> 标签：php

我编写了这个 PHP 用于在 SQL 中编辑记录。我有一个几乎相同的页面来编辑另一个工作正常的表上的其他记录。

这是我的代码：

```
<?php

$con=mysqli_connect("localhost","----","----","mitchpol_gigs");

if (mysqli_connect_errno())
  {
  echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

$adds['v_venue'] = $con->/*Text-Start*/real_escape_string($_POST['v_venue']);
$adds['v_url'] = $con->real_escape_string($_POST['v_url']);
$adds['v_address'] = $con->real_escape_string($_POST['v_address']);

$sql = "
UPDATE `venues` 
SET v_venue='". $adds['v_venue']. "', v_url='". $adds['v_url']. "', v_address='". $adds['v_address']. "'
WHERE v_id='$_POST[v_id]'";

if ($con->query($sql) === TRUE) {
    echo "Venue edited successfully.<br><br>
    Input summary:
    <br>Edited: ID" . $_POST['v_id'] . "
    <br>Venue: " . $_POST['v_venue'] . "
    <br>URL: " . $_POST['v_url'] . "
    <br>Address: " . $_POST['v_address'] . "
    <br><br>";
    } else {
        echo 'Error: '. $con->error . '<br>';
        }

include 'venueedit.php';
?> 
```

页面没有执行代码，而是返回从我在代码“Text-Start”中记下的所有文本到文档末尾的所有文本。

这是我得到的错误：PHP Parse error: syntax error, unexpected '$con' (T_VARIABLE) in (path)insertvenuesedit.php on line 1

就好像“->”被识别为代码的结尾，而不是“？>”。

我的文件绝对是 .php 而不是 .html。

我阅读以确保我的 php.ini 文件中的 short_open_tag 已关闭。这是。我想知道是否还有另一个 php.ini 变量可能导致这种情况？

编辑 - 问题已解决，但对解决方案感到好奇。

原来这是我的编辑器中的一个问题。我正在使用记事本++。我从另一个页面复制并粘贴了我的代码，并进行了一些我需要的编辑以将其应用于这种情况。我在上面发布的代码正在显示，但是在关闭文件并重新打开它之后，我的所有代码都显示在一行上。在适当地间隔所有内容之后，代码就可以正常工作了。

换句话说，?php $con=mysqli_connect 发布为 php$con=mysqli_connect，在 ?php 和 $con 之间没有空格。

有人使用记事本++遇到过这种事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T23:34:59.750

您的 PHP 没有被解析。该`->`运算符恰好是开始后的第一个大于号，因此浏览器会看到一个无效的 HTML 标记，然后是它之后的所有内容。如果您选择在浏览器中查看源代码，您将在那里看到所有 PHP。

# c - autotools：一个项目，一个可执行文件，一个共享 obj 和一个“共享”内部库

> ID：16025203
> 
> 赞同：3
> 
> 时间：2013-04-15T21:43:37.633
> 
> 标签：c, autotools, libtool

我正在尝试使用自动工具。我有以下项目层次结构：

```
 project/src
    project/src/utilities
    project/src/utilities/util.c
    project/src/utilities/util.h
    project/src/sharedObject
    project/src/sharedObject/sharedObject.c
    project/src/sharedObject/sharedObject.h
    project/src/sharedObject/thing.c
    project/src/executable
    project/src/executable/exec.c
    project/src/executable/exec.h
    project/src/executable/thing1.c
    project/src/executable/thing2.c 
```

`"executable"`并且`"sharedObject.so"`都依赖于`"util.o"`和`"util.h"`。我已经看到了创建便利库的示例，但我不确定如何`"Makefile.am"`在其他两个子项目的文件中指定它们。这些类型的项目间依赖关系是如何定义的？

两者都`"executable"`将`"sharedObject.so"`被安装。`"util.o"`和文件将`"util.h"`仅在构建过程中使用。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T03:15:55.560

在`utilities/Makefile.am`：

```
noinst_LTLIBRARIES = libutil.la   
libutil_la_SOURCES = util.h util.c 
```

中`executable/Makefile.am`，库的使用应使用`LDADD`主库，例如，

```
bin_PROGRAMS = exec
exec_SOURCES = exec.h exec.c thing.h thing.c
exec_LDADD = ../utilities/libutil.la 
```

在`sharedObject/Makefile.am`中，使用`LIBADD`初级：

```
lib_LTLIBRARIES = sharedObject.la
sharedObject_la_SOURCES = sharedObject.h sharedObject.c thing.c
sharedObject_la_LIBADD = ../utilities/libutil.la 
```

如果你真的想要一个`sharedObject.so`动态加载的，你还需要：

```
sharedObject_la_LDFLAGS = -module 
```

否则，应该调用目标`libsharedObject`。

* * *

顶层 Makefile.am 应该[排序](http://www.gnu.org/software/automake/manual/automake.html#Subdirectories) `SUBDIRS`，以便首先构建依赖项：

`SUBDIRS = utilities executable sharedObject`

# jquery - jQuery移动功能从JSON返回未知

> ID：16025205
> 
> 赞同：0
> 
> 时间：2013-04-15T21:43:44.423
> 
> 标签：jquery, json, function, mobile

当我给他 ex_id 时，我试图使用这个函数返回一个练习的名称，但它只是返回未定义的。

```
function getExerciseName(ex_id){
        $.getJSON('db.json', function(data_ex) {
            for (var i in data_ex.exercises) {
                if(data_ex.exercises[i].id == ex_id)
                {
                    return data_ex.exercises[i].name;        
                } else { 
                    return 'failure'
                }
            }
        });
    } 
```

ex_id 是正确的，我似乎找不到任何问题。

感谢您的帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:49:49.350

您的函数`getExerciseName`不返回任何内容。它调用`$.getJSON`具有回调函数的函数。回调函数在结束时被`getJSON`异步调用。您无法从异步函数中返回同步结果。

我建议你尝试这样的事情：

```
function getExerciseName(ex_id){
        $.getJSON('db.json', function(data_ex) {
            for (var i in data_ex.exercises) {
                if(data_ex.exercises[i].id == ex_id)
                {
                    return dosomethingWithExerciseName(data_ex.exercises[i].name);
                }
            }
            alert("failure");
        });
    } 
```

恐怕这是您摆脱异步回调函数的唯一方法。

编辑：更改返回值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:52:50.907

您期望从哪里获得返回值？`getExerciseName`使用目标和回调进行调用`$.getJSON`，然后它返回`undefined`，因为您尚未定义 return 语句。

稍后将调用回调，并且它的返回值会丢失，因为它没有被处理。

我认为您需要阅读异步函数。

一个选项是返回实际 $.getJSON 调用的结果，这将是一个承诺，然后对其进行处理或传递一个回调以将返回值处理到函数调用中

编辑：实际上代码中还有另一个错误。if 子句将使 for 循环在第一个元素之后中断，无论它是否正确。我希望您希望代码仅在返回数组中的任何元素的测试不正确时才返回 false？

尝试这样的事情：

```
function getExerciseName(ex_id, callback){
   $.getJSON('db.json', function(data_ex) {
      for (var i in data_ex.exercises) {
         if(data_ex.exercises[i].id == ex_id) {
            return callback(data_ex.exercises[i].name);        
         }
      }
      callback('failure');
   });
}

// and call it with something like this
getExerciseName(2, function(data) { console.log(data); }); 
```

# java - 解析名称没有空格？

> ID：16025211
> 
> 赞同：-3
> 
> 时间：2013-04-15T21:44:24.177
> 
> 标签：java

当用户输入多个空格时，我的程序无法正确打印出用户名。例如，如果用户输入他们的名字后跟 2 个空格，然后是他们的姓氏，我的程序假定这些额外的空格是中间名，并将中间名打印为空格，将姓氏打印为输入的第二个字符串，即使只输入了两个字符串。如何改进此问题，使用户可能输入的额外空间不计为中间名或姓氏？

```
public static void main(String[] args)
{
    Scanner sc = new Scanner(System.in);

    System.out.println("Welcome to the name parser.\n");
    System.out.print("Enter a name: ");
    String name = sc.nextLine();

    name = name.trim();

    int startSpace = name.indexOf(" ");
    int endSpace = name.indexOflast(" ");
    String firstName = "";
    String middleName = "";
    String lastName = "";

    if(startSpace >= 0)
    {
        firstName = name.substring(0, startSpace);
        if(endSpace > startSpace)
        {
            middleName = name.substring(startSpace + 1, endSpace);
        }
        lastName = name.substring(endSpace + 1, name.length());
    }
    System.out.println("First Name: " + firstName);
    System.out.println("Middle Name: " + middleName);
    System.out.println("Last Name: " + lastName);
} 
```

输出：乔马克

```
First name: joe
Middle name: // This shouldn't print but because the user enter extra spaces after first name the spaces becomes the middle name.
Last name: mark 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T21:46:03.317

尝试这个

```
 // replaceAll needs regex so "\\s+" (for whitespaces)
 // s+ look for one or more whitespaces
 // replaceAll will replace those whitespaces with single whitespace.
 // trim will remove leading and trailing whitespaces

 name = name.trim().replaceAll("\\s+", " "); 
```

[1.Java正则表达式](http://www.vogella.com/articles/JavaRegularExpressions/article.html)

[2.替换所有API](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)

# jquery - 滚动到下一堂课

> ID：16025215
> 
> 赞同：0
> 
> 时间：2013-04-15T21:45:09.247
> 
> 标签：jquery

我如何使这个滚动到下一堂课？

```
var $root = $('html, body');
$('a.scroll-to-next-nav').click(function(){
    $root.animate({
        scrollTop: $( $(this).closest('.header-icons').nextAll('.header-icons') ).offset().top
    }, 500);
    return false;
});

<div class="header-icons"><a href="#" class="scroll-to-next-nav" title="Go to next section">Go to next section</a></div>

<div class="header-icons"><a href="#" class="scroll-to-next-nav" title="Go to next section">Go to next section</a></div>
<div class="header-icons"><a href="#" class="scroll-to-next-nav" title="Go to next section">Go to next section</a></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:53:15.027

试试这个：

```
scrollTop: $(this).closest('.header-icons').next('.header-icons').offset().top 
```

您想转到下一个 div ( `next()`)，而不是`nextAll()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T23:45:48.057

希望这可以帮助！:)

```
var $root = $('html, body');
var i=$('a.next').length, v=1;
$('a.next').click(function(){
    var to = v<i ? $(this).closest('.page').next('.page').offset().top : 0;
    $root.animate({
        scrollTop: to
    }, 500);
    if(v<i) {v++;} else {v=1;}
    return false;
}); 
```

# wordpress - 拒绝文件请求并使用 .htaccess 重定向到 .php 页面

> ID：16025218
> 
> 赞同：2
> 
> 时间：2013-04-15T21:45:30.257
> 
> 标签：wordpress, .htaccess, redirect, directory

我正在使用 wordpress，并且正在使用 .htaccess，但我并不真正了解它的功能。

场景如下：当用户尝试从上传目录访问文件时（例如 `http://[localhost]/wordpress/uploads/video.mp4`：），他被重定向到一个 php 页面，该页面决定用户是否有权下载/查看文件（例如，重定向到以下：）`http://[localhost]/wordpress/serve.php?filename=video.mp4`。

有谁知道我应该如何处理 .htaccess？

.htaccess 文件应该放在哪个目录中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:26:50.447

您可以`.htaccess`为此使用 WordPress 根文件，也可以在上传目录中创建一个。我建议坚持使用您已经用于 WordPress 的文件。

**`/wordpress/.htaccess`修改内容**

```
RewriteBase /wordpress/
# ^ your base should already be set - if it hasn't, put this just under RewriteEngine On

RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^uploads\/(.*) serve.php?filename=$1 [R,L] 
```

**注意：**如果你不想重定向，你仍然可以将它伪装成实际的文件名，它仍然会返回 PHP 响应。您可以通过删除`R`标志来做到这一点。（这会将最初请求的 URL 保留在地址栏中。）

* * *

**编辑：**根据您的评论，并揭示您的`.htaccess`文件所在的位置，请尝试以下操作：

```
RewriteBase /wordpress/wp-content/uploads/
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^(.*) /wp-content/themes/fun&share/serve.php?filename=$1 [R,L] 
```

* * *

**编辑 2：**抱歉，我没有考虑`RewriteBase`. 请看下面的代码：

```
RewriteEngine On
RewriteBase /wordpress/wp-content/uploads/
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^(.*) ../themes/fun&share/serve.php?filename=$1 [R,L] 
```

该`.htaccess`文件**必须**放在您的`uploads folder`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T02:11:55.657

尝试将这些规则添加到`/wordpress/uploads`目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^(.*)$ /wordpress/serve.php?filename=$1 [L] 
```

# iphone - 这是ios的bug吗？

> ID：16025234
> 
> 赞同：0
> 
> 时间：2013-04-15T21:46:43.823
> 
> 标签：iphone, ios, ios5, ios6

```
- (void)applicationWillResignActive:(UIApplication *)application
    {
        NSLog(@"resign active");
    }

    - (void)applicationDidEnterBackground:(UIApplication *)application
    {
        NSLog(@"background");  
    }

    - (void)applicationWillEnterForeground:(UIApplication *)application
    {
        // Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
    }

    - (void)applicationDidBecomeActive:(UIApplication *)application
    {
        NSLog(@"Active");
    }

    - (void)applicationWillTerminate:(UIApplication *)application
    {
        // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.
    } 
```

当我向左滑动四指时（不要完全更改应用程序），我可以看到日志 `resign active`，然后将四指向右移动`Active`。

如果我用四指滑动到顶部，我可以看到`resign active`。之后，如果我向右滑动四指（实际上并没有关闭您看到所有正在运行的应用程序的下栏），我看不到`active`.

这是一个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:19:57.360

没有。您的应用程序并没有真正再次变得活跃，对吧？当您查看任务切换器视图时，没有任何应用程序处于活动状态。

# installation - LGHT0132 使用 Wix 将 Json.Net 添加到 GAC

> ID：16025235
> 
> 赞同：2
> 
> 时间：2013-04-15T21:46:45.903
> 
> 标签：installation, wix, windows-installer

我正在构建一个将 json.net 添加到 GAC 的 Wix 安装程序（我知道...... GAC 不好，但订单就是订单）。在构建期间，我收到此错误：

> 错误 LGHT0132：程序集文件 'path\Newtonsoft.Json.dll' 似乎无效。请确保这是一个有效的程序集文件，并且用户对该文件具有适当的访问权限。更多信息：HRESULT：0x8013101b

我正在使用的 json.net 用于 .NET 4。如果我将 json.net 用于 .NET 2，它构建得很好，完全没有问题。

我的注册很简单：

```
<Component Id="newtonsoft.json.gac.comp" Directory="GAC">
    <File Id="newtonsoft.json.gac.file" KeyPath="yes" Assembly=".net" Source="path\Newtonsoft.Json.dll" />
</Component> 
```

我正在使用 Wix 3.5。任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:13:00.483

我刚刚针对 WiX v3.8 进行了测试，它对我来说效果很好。我不知道自 v3.5 RTM 以来 WiX 工具集的那部分有任何变化。错误`0x8013101b`表示“此程序集由比当前加载的运行时更新的运行时构建，无法加载”。这几乎可以肯定意味着 WiX 工具集在 CLR2 上运行并且无法读取 CLR4 程序集。

您的 light.exe.config 文件应如下所示：

```
<configuration>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" />
    <supportedRuntime version="v2.0.50727" />
  </startup>
</configuration> 
```

秩序很重要。尝试删除`v2.0.50727`线。这将迫使 WiX 工具集仅在 CLR4 上运行。如果失败，您将需要调查您的环境。

# java - 在 Java 和 R 之间工作

> ID：16025236
> 
> 赞同：4
> 
> 时间：2013-04-15T21:46:49.480
> 
> 标签：java, r, statistics, chi-squared

我正在尝试将一个双精度数组传递给 R，对其值求和，然后将其返回给 Java。这是我在 Java 中尝试做的事情：

```
import org.rosuda.JRI.REXP;
import org.rosuda.JRI.Rengine;

// Start R session.
Rengine re = new Rengine (new String [] {"--vanilla"}, false, null);

// Check if the session is working.
if (!re.waitForR()) {
    return;
}

re.assign("x", new double[] {1.5, 2.5, 3.5});
REXP result = re.eval("(sum(x))");
System.out.println(result.asDouble());
re.end(); 
```

但是，我收到错误：无法解析导入 org.rosuda.JRI.REXP 无法解析导入 org.rosuda.JRI.Rengine 无法解析 Rengine 无法解析为类型

即使对于我所做的进口，情况也是如此：

```
import java.lang.Object.org.rosuda.JRI.REXP;
import java.lang.Object.org.rosuda.JRI.Rengine; 
```

有什么建议吗？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:01:55.180

你的进口*应该*是：

```
import org.rosuda.JRI.REXP;
import org.rosuda.JRI.Rengine; 
```

附加`java.lang.Object`在他们面前会产生垃圾。要解决编译错误，请确保在构建类路径中包含（正确版本的）JRI-x-.xx.jar。例如。

```
javac -cp ".:/some/path/to/JRI-0.8-4.jar" *.java 
```

如果您使用的是 IDE，则将 JAR 包含在项目构建路径中。例如，使用 Eclipse，您可以通过右键单击项目将 JAR 添加到（常规项目），然后导航到 Properties->Java Build Path->Add External JARs，找到并选择 JAR，然后单击 OK所有对话框。然后您的导入应该干净地解决：

![在构建路径上带有 JRI 库的 Eclipse 项目](https://i.stack.imgur.com/WswSL.png)

*请注意，JRI-0.8-4.jar 显示在 Referenced Libraries 下，用于项目*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:29:16.227

正如我在[您之前的问题](https://stackoverflow.com/questions/16019654/call-r-from-java-to-get-chi-squared-statistic-and-p-value/16020281?noredirect=1#comment22859380_16020281)中所说，我强烈建议您（或将来访问此线程的任何人）使用[此插件](http://www.studytrails.com/RJava-Eclipse-Plugin/)在 Eclipse 中设置 JRI。它为你做一切。我链接的页面将引导您完成整个过程。

# mysql - 关于如何优化此 SQL 查询的想法

> ID：16025240
> 
> 赞同：1
> 
> 时间：2013-04-15T21:47:42.840
> 
> 标签：mysql, sql, memory, wordpress, query-optimization

我正在使用[feedwordpress WordPress](http://wordpress.org/extend/plugins/feedwordpress/)插件。

它使用在我的服务器上非常繁重的查询，我不确定如何（或是否）可以改进它们。Bellow 是我从托管公司获得的输出，是否有改进的希望？

（很抱歉没有更具体的问题，但我不知道如何 - 随时编辑问题以改进它 - 谢谢！）

```
most memory usage likely comes from the MySQL service:
Uptime: 3 hours 32 min 48 sec

Threads: 4 Questions: 761936 Slow queries: 254 Opens: 610 Flush tables: 1 Open tables: 603 Queries per second avg: 59.675

It is up 3 and a half hour and already had more than 250 slow queries, I will list the last few queries, and once you manage to optimize these I'm sure the memory usage will decrease as well:
# User@Host: rblogger_rblogr[rblogger_rblogr] @ localhost []
# Thread_id: 5737 Schema: rblogger_rblog Last_errno: 0 Killed: 0
# Query_time: 11.448474 Lock_time: 0.000059 Rows_sent: 0 Rows_examined: 66004 Rows_affected: 0 Rows_read: 66004
# Bytes_sent: 89 Tmp_tables: 0 Tmp_disk_tables: 0 Tmp_table_sizes: 0
# InnoDB_trx_id: 25335B6
SET timestamp=1366020031;
SELECT ID FROM wp_rb_posts WHERE to_ping <> '' AND post_status = 'publish';
# Time: 130415 5:01:01
# User@Host: rblogger_rblogr[rblogger_rblogr] @ localhost []
# Thread_id: 5785 Schema: rblogger_rblog Last_errno: 0 Killed: 0
# Query_time: 4.344107 Lock_time: 0.000129 Rows_sent: 2219 Rows_examined: 13192 Rows_affected: 0 Rows_read: 13192
# Bytes_sent: 23262206 Tmp_tables: 0 Tmp_disk_tables: 0 Tmp_table_sizes: 0
# InnoDB_trx_id: 25335D9
SET timestamp=1366020061;
SELECT wp_rb_posts.* FROM wp_rb_posts WHERE 1=1 AND (((wp_rb_posts.post_title LIKE '%git%') OR (wp_rb_posts.post_content LIKE '%git%'))) AND (wp_rb_posts.post_password = '') AND wp_rb_posts.post_type IN ('post', 'page', 'attachment') AND (wp_rb_posts.post_status = 'publish') ORDER BY wp_rb_posts.post_date DESC;
# Time: 130415 6:03:28
# User@Host: rblogger_rblogr[rblogger_rblogr] @ localhost []
# Thread_id: 8619 Schema: rblogger_rblog Last_errno: 0 Killed: 0
# Query_time: 7.299722 Lock_time: 0.000092 Rows_sent: 0 Rows_examined: 66005 Rows_affected: 0 Rows_read: 66005
# Bytes_sent: 89 Tmp_tables: 0 Tmp_disk_tables: 0 Tmp_table_sizes: 0
# InnoDB_trx_id: 2534534
SET timestamp=1366023808;
SELECT ID FROM wp_rb_posts WHERE to_ping <> '' AND post_status = 'publish';
# User@Host: rblogger_rblogr[rblogger_rblogr] @ localhost []
# Thread_id: 8620 Schema: rblogger_rblog Last_errno: 0 Killed: 0
# Query_time: 9.666021 Lock_time: 0.000037 Rows_sent: 0 Rows_examined: 66005 Rows_affected: 0 Rows_read: 66005
# Bytes_sent: 89 Tmp_tables: 0 Tmp_disk_tables: 0 Tmp_table_sizes: 0
# InnoDB_trx_id: 2534533
SET timestamp=1366023808;
SELECT ID FROM wp_rb_posts WHERE to_ping <> '' AND post_status = 'publish';
# Time: 130415 6:58:25
# User@Host: rblogger_rblogr[rblogger_rblogr] @ localhost []
# Thread_id: 11340 Schema: rblogger_rblog Last_errno: 0 Killed: 0
# Query_time: 4.616263 Lock_time: 0.000067 Rows_sent: 10 Rows_examined: 6014 Rows_affected: 0 Rows_read: 6014
# Bytes_sent: 189 Tmp_tables: 0 Tmp_disk_tables: 0 Tmp_table_sizes: 0
# InnoDB_trx_id: 253530A
SET timestamp=1366027105;
SELECT SQL_CALC_FOUND_ROWS wp_rb_posts.ID FROM wp_rb_posts WHERE 1=1 AND (wp_rb_posts.post_author = 56) AND wp_rb_posts.post_type = 'post' AND (wp_rb_posts.post_status = 'publish') ORDER BY wp_rb_posts.post_date DESC LIMIT 0, 10; 
```

这是结果`SHOW CREATE TABLE wp_rb_posts`：

```
CREATE TABLE `wp_rb_posts` (
 `ID` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
 `post_author` bigint(20) unsigned NOT NULL DEFAULT '0',
 `post_date` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
 `post_date_gmt` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
 `post_content` longtext NOT NULL,
 `post_title` text NOT NULL,
 `post_excerpt` text NOT NULL,
 `post_status` varchar(20) NOT NULL DEFAULT 'publish',
 `comment_status` varchar(20) NOT NULL DEFAULT 'open',
 `ping_status` varchar(20) NOT NULL DEFAULT 'open',
 `post_password` varchar(20) NOT NULL DEFAULT '',
 `post_name` varchar(200) NOT NULL DEFAULT '',
 `to_ping` text NOT NULL,
 `pinged` text NOT NULL,
 `post_modified` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
 `post_modified_gmt` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
 `post_content_filtered` longtext NOT NULL,
 `post_parent` bigint(20) unsigned NOT NULL DEFAULT '0',
 `guid` varchar(255) NOT NULL DEFAULT '',
 `menu_order` int(11) NOT NULL DEFAULT '0',
 `post_type` varchar(20) NOT NULL DEFAULT 'post',
 `post_mime_type` varchar(100) NOT NULL DEFAULT '',
 `comment_count` bigint(20) NOT NULL DEFAULT '0',
 PRIMARY KEY (`ID`),
 KEY `post_name` (`post_name`),
 KEY `type_status_date` (`post_type`,`post_status`,`post_date`,`ID`),
 KEY `post_parent` (`post_parent`),
 KEY `wp_rb_posts_guid_idx` (`guid`),
 KEY `post_author` (`post_author`),
 KEY `guid` (`guid`)
) ENGINE=InnoDB AUTO_INCREMENT=69681 DEFAULT CHARSET=utf8 
```

下一次诊断运行是：

```
EXPLAIN SELECT SQL_CALC_FOUND_ROWS wp_rb_posts.ID
FROM wp_rb_posts
WHERE 1 =1
AND (
wp_rb_posts.post_author =56
)
AND wp_rb_posts.post_type =  'post'
AND (
wp_rb_posts.post_status =  'publish'
)
ORDER BY wp_rb_posts.post_date DESC 
LIMIT 0 , 10 
```

使用以下输出：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  wp_rb_posts ref type_status_date,post_author    post_author 8   const   5624    Using where; Using filesort 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T22:42:35.147

首先，看看支持论坛上的[这个](http://wordpress.org/support/topic/plugin-feedwordpress-site-is-mega-slow-when-the-plugin-is-active)帖子（我看到你也在那里寻求帮助）——你不是唯一一个有问题的人，这个帖子中有一些建议。

其次，使用远程托管的数据库来调试性能问题是一场可怕的游戏——尤其是如果这是您的实时服务器。为了您自己的理智，我强烈建议在您可以实际工作和试验的机器上重新创建系统。

您可能需要的最起码是让 MySQL 运行（最好与您的服务器版本相同），并从您的实时环境中恢复数据库。

接下来，进行运行缓慢的查询，并弄清楚发生了什么——据我所知，你最严重的违规者没有匹配的索引。

```
SELECT ID FROM wp_rb_posts WHERE to_ping <> '' AND post_status = 'publish'; 
```

将受益于 to_ping 和可能 post_status 的复合索引（该列的基数可能太低而无济于事）。

```
SELECT SQL_CALC_FOUND_ROWS wp_rb_posts.ID
FROM wp_rb_posts
WHERE 1 =1
AND (
wp_rb_posts.post_author =56
)
AND wp_rb_posts.post_type =  'post'
AND (
wp_rb_posts.post_status =  'publish'
)
ORDER BY wp_rb_posts.post_date DESC 
LIMIT 0 , 10 
```

看起来它在大多数列中的基数也很低 - 但如果你有很多行，根据 post_date 选择前 10 名将会很昂贵；考虑 where 子句中所有列的复合索引，加上 post_date。

```
SELECT wp_rb_posts.* 
FROM wp_rb_posts 
WHERE 1=1 
AND (
     (
      (wp_rb_posts.post_title LIKE '%git%') 
     OR 
      (wp_rb_posts.post_content LIKE '%git%')
     )
    ) 
AND (wp_rb_posts.post_password = '') 
AND wp_rb_posts.post_type IN ('post', 'page', 'attachment') 
AND (wp_rb_posts.post_status = 'publish') 
ORDER BY wp_rb_posts.post_date DESC; 
```

很讨厌——文本搜索应该真正使用自由文本搜索；对于大型数据集，这可能非常慢。如果您无法更改该查询，则不确定您可以做些什么来修复它 - 您可以在其他列上添加一个复合键，但在我看来，该查询会搜索所有当前帖子中的文本。

在您的本地机器上创建索引，测量它们是否有任何区别，并在理想情况下测试您没有破坏任何东西（例如通过意外添加唯一索引......）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T22:09:39.137

```
SELECT wp_rb_posts.* FROM wp_rb_posts WHERE 1=1 AND (((wp_rb_posts.post_title LIKE '%git%') OR (wp_rb_posts.post_content LIKE '%git%'))) AND (wp_rb_posts.post_password = '') AND wp_rb_posts.post_type IN ('post', 'page', 'attachment') AND (wp_rb_posts.post_status = 'publish') ORDER BY wp_rb_posts.post_date DESC; 
```

至于一个，我确信一个问题是 % 通配符，在文字前后使用，即包含字符串操作。例如，更快的查询是 LIKE 'git%' - StartsWith 操作。至于其他查询，发布索引在表中的定义方式非常重要。

作为在某些情况下解决 %git% 问题的示例，我将创建一个触发器（我使用 MSSQL），它在插入/更新操作时将计算两者中是否包含“git”字符串记录的标题和内容，如果是，则将位字段标记为（真）。这会减慢表上的插入/更新操作（在一次只插入或更新一条记录时微不足道），但会大大提高搜索查询的性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T21:51:43.263

有几个 Linux 软件包可以帮助您诊断和调整 MySQL 服务器，即：

*   诺托普
*   mysql调谐器
*   调音入门

# php - 使用会话从循环文本框中显示另一个页面中的值

> ID：16025242
> 
> 赞同：0
> 
> 时间：2013-04-15T21:47:44.263
> 
> 标签：php, session

这是我的page1.php。它有一个循环的文本框。当用户单击按钮时，它转到 page2.php

```
<?php 
  for($i = 0; $i < 2; $i++) {               
    Full Name : <input type='text' name='txtName' />
  } ?>
  <input type="submit" name="Proceed" value="Proceed" class="button" />

<?php
  $name = $_POST['txtName'];
  if(isset($_POST['Proceed'])) {
    for($i = 0; $i < 2; $i++) {
    if(!empty($name[$i])) {
      session_start(); 
          $_SESSION['nme'] = $name; 
          header("Location: page2.php");
     } } }
?> 
```

这是我的 page2.php，它应该显示来自循环文本框的数据

```
<?php
  session_start();
  $naming = $_SESSION['nme'];

  $length = count($naming);
  for($i=0; $i< $length; $i++){    
    echo $naming." &nbsp; ";
  }
?> 
```

问题是它只显示文本框中的最后一个数据。它没有显示文本框中的所有值。

# php - 如何使用ajax输出正确的带有json的html

> ID：16025243
> 
> 赞同：0
> 
> 时间：2013-04-15T21:47:48.857
> 
> 标签：php, javascript, json

嗨，我想将代码输出`[json['information']`为实际转换的 html 代码。

目前，它似乎只是将整个字符串输出为纯文本（未格式化的 html，因此您可以看到所有标签等）我仍在学习，`json`所以我不确定应该如何处理收到的内容以使其成为正确的 html .

提前致谢

```
$('.engineering-services').live('click', function() {     
$.ajax({
    url: 'index.php?route=information/information/homepage_info',
    type: 'post',
    data: {info_for : 'engineering'},
    dataType: 'json',
    success:    function(json){

    $('#engineering-content').html(json['information']);
    },
    error: function(json) {
    alert('fail');
    }
    });
   }); 
```

编辑，这是 PHP ...

```
 public function homepage_info() {
    $this->load->model('catalog/information');
    $json = array();
    if (isset($this->request->post['info_for'])) {
        if ($this->request->post['info_for'] == 'engineering') {    
            $information_info = $this->model_catalog_information->getInformation(10);
            $json['information'] = $information_info['description'];                
            }
            $this->response->setOutput(json_encode($json));
            }

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:05:43.750

您的 HTML 字符串似乎将特殊字符编码为 HTML 实体，例如`<`to`&lt;`等。从您展示的 PHP 中，它可能已在数据库中编码（也许您在保存之前进行了编码）。

您应该可以使用以下方法修复它[`html_entity_decode`](http://php.net/manual/en/function.html-entity-decode.php)：

```
$json['information'] = html_entity_decode($information_info['description']);
// or, a few lines later:
// $this->response->setOutput(html_entity_decode(json_encode($json))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:24:20.230

看起来您正在为您的 php 控制器使用 Open cart。为了发回带有正确 json 标头的响应，Open Cart 方式如下：

```
$this->load->library('json');
$this->response->setOutput(Json::encode($json)); 
```

希望有帮助。

# scala - 为什么在隐式类上部分应用函数会给我一个错误？

> ID：16025245
> 
> 赞同：2
> 
> 时间：2013-04-15T21:47:54.147
> 
> 标签：scala, implicit

```
object RegexImplicits{
  implicit class RegexWrapper(r: scala.util.matching.Regex) {
    def matches(s: CharSequence): Boolean = r.pattern.matcher(s).find
  }

  def something(s:String):Boolean = s == "42"
}
import RegexImplicits._

//This errors with the message
//<console>:16: error: missing arguments for method matches in class RegexWrapper;
//follow this method with `_' if you want to treat it as a partially applied function
//              "a".r.matches _ 
"a".r.matches _ 

//But this works fine...
something _ 
```

为什么`something _`起作用但涉及隐式类的值不起作用？

这是否与隐式类有关，或者这是一个红鲱鱼，我遇到了不同的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T22:55:02.607

事实证明，正如 om-nom-nom 指出的那样，这是 scala 编译器中的一个已知错误。

[http://issues.scala-lang.org/browse/SI-3218](http://issues.scala-lang.org/browse/SI-3218)

Paulp 的建议是使用无点形式或将 _ 括在括号中。

```
"a".r matches _ 
```

或者

```
"a".r.matches(_) 
```

# python - 如何创建异步 Tornado HTTP 服务器？

> ID：16025249
> 
> 赞同：1
> 
> 时间：2013-04-15T21:47:58.060
> 
> 标签：python, asynchronous, tornado, couchbase

我编写了以下 HTTP 重定向服务器。在测试期间，我意识到它以阻塞方式进行调用，主要是因为对 couchbase 的同步调用。如何在给定的套接字上运行并行请求响应？我应该对 db 进行异步调用吗？

```
class ABC(web.RequestHandler):

        def get(self):
                self.MartiniTagKey = self.get_argument("mtag", strip=True) #TEST1
                self.couchbase_start_time = time.time()
                couchbase_query_result = bucket.get(self.MartiniTagKey) #TEST2
                self.CouchbaseMS = time.time() - self.couchbase_start_time
                url_to_redirect = json.loads(couchbase_query_result[2])['metaTag'] #TEST3
                self.redirect(url_to_redirect)  

if __name__=="__main__":
        options.options.log_file_prefix = log_directory
        options.parse_command_line()
        db=MySQLdb.connect(host=mysql_host, user=mysql_user,
        passwd=mysql_password, port=int(mysql_port), db=mysql_db)
        cursor = db.cursor()
        couchbase = Couchbase(couchbase_host+':'+couchbase_port, couchbase_bucket, couchbase_password)
        process.fork_processes(0)
        bucket = couchbase[couchbase_bucket]
        app = web.Application(handlers=[(r"/", ABC),])
        app.listen(8080,"")
        io_loop = ioloop.IOLoop.instance()
        io_loop.start() 
```

# java - 将 java 正则表达式转换为 php 正则表达式

> ID：16025253
> 
> 赞同：0
> 
> 时间：2013-04-15T21:48:14.047
> 
> 标签：java, php, regex

我在Java中有一个正则表达式： `[^a-zA-Z0-9.-_]`

如何形成这个正则表达式 from `java`to `php`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T21:49:16.627

在 php (PCRE) 中，这个正则表达式看起来像

```
[^a-zA-Z0-9.-_] 
```

[*是的，完全一样*]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:52:04.470

这个特定的正则表达式也是如此。

但是您可以通过以下方式缩短：

```
[^\w.-] 
```

并且不要忘记 - 字符必须放在字符类中的最后一个位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T21:52:40.060

完全相同，*但*您可能需要在其周围放置分隔符，例如括号：

```
([^a-zA-Z0-9._-]) 
```

看到将减号移到最后的细微差别。那是因为`[.-_]`匹配`./0...9:;<=>?@A...Z[\]^_`. 我猜你不是在寻找否定，因为你已经覆盖了 0-9 和 AZ。

# java - 为什么我不能将嵌入式 EJB 容器与我自己的持久性单元一起使用？

> ID：16025254
> 
> 赞同：0
> 
> 时间：2013-04-15T21:48:17.617
> 
> 标签：java, unit-testing, jakarta-ee, junit, ejb

我想在我的项目中使用 junit，但一直无法这样做，因为我总是遇到以下异常：

```
SEVERE: Exception while invoking class org.glassfish.persistence.jpa.JPADeployer prepare method
Apr 15, 2013 11:03:43 PM org.glassfish.api.ActionReport failure

SEVERE: Exception while preparing the app
Apr 15, 2013 11:03:43 PM com.sun.enterprise.v3.server.ApplicationLifecycle deploy

SEVERE: Invalid resource : mysql/myapp__pm
java.lang.RuntimeException: Invalid resource : mysql/myapp__pm 
```

对于我的项目，我将 Hibernate 与位于虚拟机上的 MySQL 数据库一起使用，现在该项目可以正常工作。当我第一次为项目配置连接时，我遇到了类似的问题，但是在我发现如何让 Netbeans 为我生成足够的资源后，我解决了这个问题。但是，现在这应该不是问题，因为我正在尝试使用相同的持久性单元，它已经可以工作并且拥有所有需要的资源（包括 glassfish 中的连接池）。此外，为什么它在末尾附加一个 __pm ？

此外，我还看到了一些人们使用 OpenEJB 进行测试的帖子。使用 OpenEJB（仅用于测试）而不是使用 glassfish 安装中的嵌入式容器会更容易吗？

持久性.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
  <persistence-unit name="myapp-ejb_ejb_1.0-SNAPSHOTPU" transaction-type="JTA">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <jta-data-source>mysql/myapp</jta-data-source>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <properties>
    </properties>
  </persistence-unit>
</persistence> 
```

glassfish-resources.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE resources PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Resource Definitions//EN" "http://glassfish.org/dtds/glassfish-resources_1_5.dtd">
<resources>
    <jdbc-connection-pool allow-non-component-callers="false" associate-with-thread="false" connection-creation-retry-attempts="0" connection-creation-retry-interval-in-seconds="10" connection-leak-reclaim="false" connection-leak-timeout-in-seconds="0" connection-validation-method="auto-commit" datasource-classname="com.mysql.jdbc.jdbc2.optional.MysqlDataSource" fail-all-connections="false" idle-timeout-in-seconds="300" is-connection-validation-required="false" is-isolation-level-guaranteed="true" lazy-connection-association="false" lazy-connection-enlistment="false" match-connections="false" max-connection-usage-count="0" max-pool-size="32" max-wait-time-in-millis="60000" name="mysql_myapp_rootPool" non-transactional-connections="false" pool-resize-quantity="2" res-type="javax.sql.DataSource" statement-timeout-in-seconds="-1" steady-pool-size="8" validate-atmost-once-period-in-seconds="0" wrap-jdbc-objects="false">
        <property name="serverName" value="myapp_servername"/>
        <property name="portNumber" value="3306"/>
        <property name="databaseName" value="myapp"/>
        <property name="User" value="******"/>
        <property name="Password" value="*********"/>
        <property name="URL" value="jdbc:mysql://myapp_servername:3306/myapp?zeroDateTimeBehavior=convertToNull"/>
        <property name="driverClass" value="com.mysql.jdbc.Driver"/>
    </jdbc-connection-pool>
    <jdbc-resource enabled="true" jndi-name="mysql/myapp" object-type="user" pool-name="mysql_myapp_rootPool"/>
</resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-19T03:47:20.827

基本上，当您使用 glassfish 嵌入式 EJB 容器时，您需要记住这是一个独立的容器，需要拥有自己的资源（最重要的是数据源）

那么问题就变成了，如何为我的嵌入式 ejb 容器定义数据源？只需让您的嵌入式 ejb 容器指向您定义了数据源的 domain.xml 文件。

```
Map<String, Object> properties = new HashMap<String, Object>();

properties.put(
    "org.glassfish.ejb.embedded.glassfish.configuration.file",
    "C:/Users/Ahmad/AppData/Roaming/NetBeans/8.0.1/config/GF_4.1/domain1/config/domain.xml"
);
EJBContainer container = javax.ejb.embeddable.EJBContainer.createEJBContainer(properties); 
```

建议创建一个单独的数据源进行测试，并将包含该数据源的 domain.xml 放在`tests/resources`包中的某个位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:36:42.223

您需要`ConnectionPool`在 GlassFish 中使用`Datasource`, 并使用`JNDI`连接池的 来访问 DB。这可以通过遵循[此处](http://itsolutionsforall.com/datasource_jpa.php)的指南来完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T06:44:46.913

看看`Arquillian`设置一个容器用于测试目的。

您可以使用 glassfish arquillian 嵌入式容器或已安装的 glassfish 容器以及相关配置。

# .net - .NET 和 Oracle.DataAccess.Client，我应该发送什么日期格式？

> ID：16025262
> 
> 赞同：0
> 
> 时间：2013-04-15T21:49:13.357
> 
> 标签：.net, database, oracle, data-access

我正在尝试将 .net 中的日期插入 Oracle 10g 数据库。我正在以这种格式 dd-MM-yyyy 发送日期，但是如果我尝试发送格式 dd-MMM-yyyy，我会收到一条错误消息，上面写着“无效的月份”（我已经尝试过了，因为当我这样做时从 .NET 日期到 OracleDate 的 Ctype 向我显示了例如 01-JAN-2013），当我这样做时，我收到一条消息，说 oracle 在它期望一个数字的地方得到了文本。我需要一些帮助，拜托。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:34:10.957

我假设您有一个 sql 查询，其中包含 :dateToInsert 之类的参数。

在您的 .NET 代码中，您需要将日期作为字符串传递给您的参数：

`yourdate.ToString("MM-dd-yyyy"), OracleDbType.Varchar2`

并且您的 sql 查询的日期部分应该是这样的：

`to_date(:dateToInsert, 'YYYY/MM/DD')`

to_date 是 oracle 将字符串转换为日期格式的函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T05:56:57.313

首先，Date没有任何格式……它是可以用dd-MM-yyyy形式表示的字符串，这是字符串。日期将被视为您当前的文化信息，例如，如果您通过 16-04-2013，那么它将被隐式转换为 MM-dd-yyyy，因此一个月需要 16 天并且您会收到错误消息。您必须在传递之前将其转换为 MM-dd-yyyy，将其`yourdate.ToString("MM-dd-yyyy")`传递到您想要的任何地方，然后您就完成了。

# java - 服务类中的光标为空 - 但在独立活动类中返回值

> ID：16025263
> 
> 赞同：-1
> 
> 时间：2013-04-15T21:49:16.130
> 
> 标签：java, android, service, nullpointerexception, alarmmanager

我和我的同学都被我们正在构建的 android 应用程序所困扰。

我们已经成功构建了一个 Android 应用程序，其中包含一个活动，该活动在我们的浏览器历史记录/书签中搜索特定 URL，并在找到匹配项时启动另一个活动（成功）作为成人内容警告实施的示例。

这运行良好。

现在我们正在实现一个服务类，以每隔几秒钟连续执行一次——以便使用我们的新服务类执行对我们最近历史的搜索——但我们遇到了一些问题。

我们的问题是，当我们尝试将 Nanny.java 中的“Nanny”源代码添加到服务类时，“Nanny”脚本将连续搜索历史记录，而不是只搜索一次 - “Nanny”应用程序不断强制关闭 - 由于游标初始化时出现空指针异常：`if (cursor.moveToFirst()) {`

这有点奇怪，因为在我们拥有的测试文件（Main.java）中的服务类之外执行完全相同的脚本时，不会发生 NullPointerException

我们工作的 Main.java 和工作的服务类 [每隔几秒成功显示一次 toast] 以及我们的 [失败] 两者的组合 - 如下所示：

空服务类：

```
public class Service_class extends Service {

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();
        return START_STICKY;
    }

    @Override
    public void onDestroy() {

        super.onDestroy();
        Toast.makeText(this, "Service Stopped", Toast.LENGTH_LONG).show();

    }

    @Override
    public void onCreate() {
        super.onCreate();
    }

} 
```

工作保姆.java

```
import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.Browser;
import android.widget.TextView;

public class Nanny extends Activity {

    String Dirty1 = "www.playboy.com";
    String Dirty2 = "www.penthouse.com";
    String Dirty3 = "www.pornhub.com";
    String Dirty4 = "www.playboy.com";
    String Dirty5 = "www.playboy.com";
    String Dirty6 = "www.playboy.com";
    String Dirty7 = "www.playboy.com";
    String Dirty8 = "www.playboy.com";
    String Dirty9 = "www.playboy.com";
    String Dirty10 = "www.playboy.com";

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.nanny);
TextView tv = (TextView) findViewById(R.id.hello);
String[] projection = new String[] { Browser.BookmarkColumns.TITLE,
Browser.BookmarkColumns.URL };
Cursor cursor = managedQuery(android.provider.Browser.BOOKMARKS_URI,
        projection, null, null, null);
String urls = "";
if (cursor.moveToFirst()) {
String url1 = null;
String url2 = null;
do {
String url = cursor.getString(cursor.getColumnIndex(Browser.BookmarkColumns.URL));

if (url.toLowerCase().contains(Dirty1)) {
} else if (url.toLowerCase().contains(Dirty2)) {
} else if (url.toLowerCase().contains(Dirty3)) {
} else if (url.toLowerCase().contains(Dirty4)) {
} else if (url.toLowerCase().contains(Dirty5)) {
} else if (url.toLowerCase().contains(Dirty6)) {
} else if (url.toLowerCase().contains(Dirty7)) {
} else if (url.toLowerCase().contains(Dirty8)) {
} else if (url.toLowerCase().contains(Dirty9)) {
} else if (url.toLowerCase().contains(Dirty10)) {
//if (url.toLowerCase().contains(Filthy)) {
urls = urls
+ cursor.getString(cursor.getColumnIndex(Browser.BookmarkColumns.TITLE)) + " : "
+ url + "\n";
Intent intent = new Intent(Nanny.this, Warning.class);
Nanny.this.startActivity(intent);
}
} while (cursor.moveToNext()); 
tv.setText(urls);
}}} 
```

我们尝试实现的不成功方法（将正常运行的 nanny 脚本添加到服务类）导致 NullPointerException：if (cursor.moveToFirst()) {

```
public class Service_class extends Service {
    String Dirty1 = "www.playboy.com";
    String Dirty2 = "www.penthouse.com";
    String Dirty3 = "www.pornhub.com";
    String Dirty4 = "www.playboy.com";
    String Dirty5 = "www.playboy.com";
    String Dirty6 = "www.playboy.com";
    String Dirty7 = "www.playboy.com";
    String Dirty8 = "www.playboy.com";
    String Dirty9 = "www.playboy.com";
    String Dirty10 = "www.playboy.com";

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();
        //setContentView(R.layout.main3);
      //  TextView tv = (TextView) findViewById(R.id.hello);
        String[] projection = new String[] { Browser.BookmarkColumns.TITLE,
        Browser.BookmarkColumns.URL };
        Cursor  cursor = managedQuery(android.provider.Browser.BOOKMARKS_URI,
                projection, null, null, null);
        String urls = "";
        if (cursor.moveToFirst()) {
        String url1 = null;
        String url2 = null;
        do {
        String url = cursor.getString(cursor.getColumnIndex(Browser.BookmarkColumns.URL));

        if (url.toLowerCase().contains(Dirty1)) {
        } else if (url.toLowerCase().contains(Dirty2)) {
        } else if (url.toLowerCase().contains(Dirty3)) {
        } else if (url.toLowerCase().contains(Dirty4)) {
        } else if (url.toLowerCase().contains(Dirty5)) {
        } else if (url.toLowerCase().contains(Dirty6)) {
        } else if (url.toLowerCase().contains(Dirty7)) {
        } else if (url.toLowerCase().contains(Dirty8)) {
        } else if (url.toLowerCase().contains(Dirty9)) {
        } else if (url.toLowerCase().contains(Dirty10)) {
        urls = urls
        + cursor.getString(cursor.getColumnIndex(Browser.BookmarkColumns.TITLE)) + " : "
        + url + "\n";
        Intent warning_intent = new Intent(Service_class.this, Warning.class);
        Service_class.this.startActivity(intent);
        }
        } while (cursor.moveToNext()); 
      //  tv.setText(urls);

        return START_STICKY;

        }
        return startId;}
    @Override
    public void onDestroy() {

        super.onDestroy();
        Toast.makeText(this, "Service Stopped", Toast.LENGTH_LONG).show();

    }

    @Override
    public void onCreate() {
        super.onCreate();
    }
    private void setContentView(int main3) {
        // TODO Auto-generated method stub

    }

    private TextView findViewById(int hello) {
        // TODO Auto-generated method stub
        return null;
    }

    private Cursor managedQuery(Uri bookmarksUri, String[] projection,
            Object object, Object object2, Object object3) {
        // TODO Auto-generated method stub
        return null;
    }} 
```

LOGCAT（使用上述组合实现时）

第 53 行失败： if (cursor.moveToFirst()) {

```
04-15 18:26:24.761: D/dalvikvm(7466): Late-enabling CheckJNI
04-15 18:26:25.651: D/dalvikvm(7466): GC_FOR_ALLOC freed 82K, 4% free 7379K/7608K, paused 13ms, total 13ms
04-15 18:26:25.651: I/dalvikvm-heap(7466): Grow heap (frag case) to 10.861MB for 3686416-byte allocation
04-15 18:26:25.661: D/dalvikvm(7466): GC_FOR_ALLOC freed 1K, 3% free 10977K/11212K, paused 13ms, total 13ms
04-15 18:26:25.681: D/dalvikvm(7466): GC_CONCURRENT freed <1K, 3% free 10977K/11212K, paused 3ms+2ms, total 17ms
04-15 18:26:25.901: D/dalvikvm(7466): GC_FOR_ALLOC freed <1K, 3% free 10977K/11212K, paused 11ms, total 11ms
04-15 18:26:25.911: I/dalvikvm-heap(7466): Grow heap (frag case) to 17.086MB for 6529744-byte allocation
04-15 18:26:25.931: D/dalvikvm(7466): GC_FOR_ALLOC freed 0K, 2% free 17354K/17592K, paused 13ms, total 13ms
04-15 18:26:25.941: D/dalvikvm(7466): GC_CONCURRENT freed <1K, 2% free 17354K/17592K, paused 3ms+2ms, total 16ms
04-15 18:26:26.051: D/libEGL(7466): loaded /system/lib/egl/libEGL_tegra.so
04-15 18:26:26.061: D/libEGL(7466): loaded /system/lib/egl/libGLESv1_CM_tegra.so
04-15 18:26:26.071: D/libEGL(7466): loaded /system/lib/egl/libGLESv2_tegra.so
04-15 18:26:26.091: D/OpenGLRenderer(7466): Enabling debug mode 0
04-15 18:26:31.181: D/AndroidRuntime(7466): Shutting down VM
04-15 18:26:31.181: W/dalvikvm(7466): threadid=1: thread exiting with uncaught exception (group=0x40f4f930)
04-15 18:26:31.181: E/AndroidRuntime(7466): FATAL EXCEPTION: main
04-15 18:26:31.181: E/AndroidRuntime(7466): java.lang.RuntimeException: Unable to start service com.ut.appdemo.Service_class@41698e90 with Intent { cmp=com.ut.appdemo/.Service_class }: java.lang.NullPointerException
04-15 18:26:31.181: E/AndroidRuntime(7466):     at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2673)
04-15 18:26:31.181: E/AndroidRuntime(7466):     at android.app.ActivityThread.access$1900(ActivityThread.java:141)
04-15 18:26:31.181: E/AndroidRuntime(7466):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1331)
04-15 18:26:31.181: E/AndroidRuntime(7466):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-15 18:26:31.181: E/AndroidRuntime(7466):     at android.os.Looper.loop(Looper.java:137)
04-15 18:26:31.181: E/AndroidRuntime(7466):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-15 18:26:31.181: E/AndroidRuntime(7466):     at java.lang.reflect.Method.invokeNative(Native Method)
04-15 18:26:31.181: E/AndroidRuntime(7466):     at java.lang.reflect.Method.invoke(Method.java:511)
04-15 18:26:31.181: E/AndroidRuntime(7466):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-15 18:26:31.181: E/AndroidRuntime(7466):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-15 18:26:31.181: E/AndroidRuntime(7466):     at dalvik.system.NativeStart.main(Native Method)
04-15 18:26:31.181: E/AndroidRuntime(7466): Caused by: java.lang.NullPointerException
04-15 18:26:31.181: E/AndroidRuntime(7466):     at com.ut.appdemo.Service_class.onStartCommand(Service_class.java:53)
04-15 18:26:31.181: E/AndroidRuntime(7466):     at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2656)
04-15 18:26:31.181: E/AndroidRuntime(7466):     ... 10 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T01:50:24.403

您正在将光标设置为空...

您使用此方法来实例化游标：

```
Cursor  cursor = managedQuery(android.provider.Browser.BOOKMARKS_URI,projection, null, null, null); 
```

然后像这样定义 managedQuery() 方法：

```
private Cursor managedQuery(Uri bookmarksUri, String[] projection, Object object, Object object2, Object object3) {
    // TODO Auto-generated method stub
    return null;
}} 
```

基本上你的代码说的是：

```
Cursor cursor = null;
curser.doSomething(); 
```

这将始终导致 nullPointer。我强烈建议你在深入研究 android 之前回去学习 java 基础知识，如果你试图在 android 中完成一些对 java 缺乏了解的事情，你只会感到头疼。

# php - 使用 jQuery 获取多维输入

> ID：16025266
> 
> 赞同：0
> 
> 时间：2013-04-15T21:49:21.717
> 
> 标签：php, jquery, html, arrays, multidimensional-array

我有一个用于 php 提交的多维数组复选框。现在我正在重建我的代码以使用 ajax。

```
<li class="formVariationParent">
  <input checked="" name="variationParent[]" autocomplete="off" value="3" type="checkbox">colors
    <ul>
      <li class="formVariationChild">
        <input checked="" name="variationChild[edit_var_val][3][4]" autocomplete="off" value="1" type="checkbox">red</li>
   </ul>
   <ul>
     <li class="formVariationChild">
       <input checked="" name="variationChild[edit_var_val][3][5]" autocomplete="off" value="1" type="checkbox">green
     </li>
   </ul>
   <ul>
     <li class="formVariationChild">
       <input checked="" name="variationChild[edit_var_val][3][6]" autocomplete="off" value="1" type="checkbox">blue
     </li>
   </ul> 
```

这就是它的生成方式：

```
<fieldset>

    <a class="btn btn-new btn-primary" onclick="apfGenerateVariation(<?php echo $current_post ?>,<?php echo $get_admin_blog ?>,data);" style="cursor: pointer">
        <b><i class="icofont-star"></i></b>
    </a>
    <ul class="formVariations" id="formVariationsID"><li>
        <?php
            $parentArray = array();
            foreach ($parentVariations as $variation) {
                $parentArray[] = $variation->term_id;
            }
            foreach($variationCategories as $category) {
                //var_dump($category);
                //echo ;
                // check if this variation is already checked
                if (in_array($category->term_id, $parentArray)) {
                    if ($category->parent == 0) {
                        echo "</li><li class='formVariationParent'><input type='checkbox' checked name='variationParent[]' autocomplete='off' value='". $category->term_id ."'>" . $category->name . "";
                    } else {
                        echo "<ul><li class='formVariationChild'><input type='checkbox' checked name='variationChild[edit_var_val][". $category->parent ."][". $category->term_id ."]' autocomplete='off' value='1'>" . $category->name . "</li></ul>";
                    }
                } else {
                    if ($category->parent == 0) {
                        echo "</li><li class='formVariationParent'><input type='checkbox' name='variationParent[]' autocomplete='off' value='". $category->term_id ."'>" . $category->name . "";
                    } else {
                        echo "<ul><li class='formVariationChild'><input type='checkbox' name='variationChild[edit_var_val][". $category->parent ."][". $category->term_id ."]' autocomplete='off' value='1'>" . $category->name . "</li></ul>";
                    }
                }
            }
        ?>
    </ul>
</fieldset> 
```

现在我想`variationChild`用 jQuery 选择它并保存在变量`data`中，就像它被提交一样。

在输入名称中，第二个双亲是`parentID`和第三个`childID`。我在 php 中有 thouse 变量，所以我可以重建这个输入但是我想要但是在和检查中`data`应该看起来像这样：

```
array(1) {
    ["edit_var_val"]=> array(2) {
        [3]=> array(3) {
            [6]=> string(1) "1"
            [5]=> string(1) "1"
            [4]=> string(1) "1"
        }
        [12]=> array(3) {
            [13]=> string(1) "1"
            [14]=> string(1) "1"
            [15]=> string(1) "1"
        }
    }
} 
```

这里第一个数组是这个输入，`parentID 3`第二个是这个形式的继续，其他`ParentID`。

这是我尝试使用的 jQuery。

```
var data = { 'edit_var_val[]' : []};
jQuery(".formVariationChild input:checked").each(function() {       
    data['edit_var_val[]'].push(jQuery(this).attr('name'));
}); 
```

我正在使用 jQuery`.map()`和`.get()`函数，但我想这是不同的情况。

那么如何获取检查输入并将变量保存为这个数组呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:42:23.373

如果我理解正确，您正在寻找这样的东西吗？

```
var data = {}; //create an object (instead of an array)
$('.formVariationChild input[type=checkbox]').each(function() {
    data[$(this).attr('value')] = $(this).attr('checked');
}); 
```

# android - 使用广播接收器进行警报管理器和通知

> ID：16025270
> 
> 赞同：0
> 
> 时间：2013-04-15T21:49:47.030
> 
> 标签：android, notifications, broadcastreceiver, alarmmanager

我创建了一个闹钟应用程序，可以在闹钟响起时播放音乐。我也设置了一个通知。我正在使用广播接收器，但是当我离开创建它的活动并播放音乐时它就结束了。我的第一个问题是，广播接收器是否是处理此问题的最佳方法，并且在清单中实现接收器是消除丢失接收器问题的唯一方法。当我离开创建应用程序的活动时，我收到一个错误，因为我没有取消注册接收器。我的第一个应用程序，需要一些建议。如果需要，我可以提供代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:51:00.200

您可以使用内置警报使用挂起的意图触发。这样你就不需要广播接收器了。

# xml - 如何使用 Google App Script 解析来自给定 XML 元素的所有值？

> ID：16025276
> 
> 赞同：0
> 
> 时间：2013-04-15T21:50:22.547
> 
> 标签：xml, xml-parsing, google-apps-script

我正在尝试将温度数据解析为来自 NOAA 源的 google 电子表格，其格式为 xml：

...... `<parameters applicable-location="point1">`
`<temperature type="maximum" units="Fahrenheit" time-layout="k-p24h-n7-1">`
`<name>Daily Maximum Temperature</name>`
`<value>63</value>`
`<value>72</value>`
`<value>76</value>`
`<value>78</value>`
`<value>74</value>`
`<value>62</value>`
`<value>58</value>`
`</temperature>`
`<temperature type="minimum" units="Fahrenheit" time-layout="k-p24h-n6-2">`
`<name>Daily Minimum Temperature</name>`
`<value>52</value>`
`<value>58</value>`
`<value>56</value>`
`<value>60</value>`
`<value>48</value>`
`<value>45</value>`
`</temperature>`
`</parameters>`
`</data>`
`</dwml>`

我希望最大和最小标题中标签内的每个数字都位于电子表格中的单独单元格中。我当前的脚本是：

`function Temperatures() { var text = UrlFetchApp.fetch("http://graphical.weather.gov/xml/SOAP_server/ndfdXMLclient.php?whichClient=NDFDgen&lat=38.99&lon=-77.01&listLatLon=&lat1=&lon1=&lat2=&lon2=&resolutionSub=&listLat1=&listLon1=&listLat2=&listLon2=&resolutionList=&endPoint1Lat=&endPoint1Lon=&endPoint2Lat=&endPoint2Lon=&listEndPoint1Lat=&listEndPoint1Lon=&listEndPoint2Lat=&listEndPoint2Lon=&zipCodeList=&listZipCodeList=&centerPointLat=&centerPointLon=&distanceLat=&distanceLon=&resolutionSquare=&listCenterPointLat=&listCenterPointLon=&listDistanceLat=&listDistanceLon=&listResolutionSquare=&citiesLevel=&listCitiesLevel=&sector=&gmlListLatLon=&featureType=&requestedTime=&startTime=&endTime=&compType=&propertyName=&product=time-series&begin=2004-01-01T00%3A00%3A00&end=2017-04-12T00%3A00%3A00&Unit=e&maxt=maxt&mint=mint&Submit=Submit").getContentText();`
`return parse(text);`
`function parse(text) {`
`var doc = Xml.parse(text, true);`
`var temps = doc.dwml.data.getElement("parameters").getElement("temperature").getElements("value").getText();`
`return temps`
`}`
`}`

但是，运行此脚本只会将一个读数（第一个标签 63）解析为一个单元格。如果我改变 .getElement(“value”).getText(); 到 .getElements(“值”).getText(); 我收到以下错误消息：“TypeError: Cannot find function getText in object.”</p>

感谢您提供的任何建议。

罗恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:15:01.323

首先通过调用 .getElements("value") 将元素读入一个数组，然后循环遍历结果数组和每个数组的 getText。

```
var doc = Xml.parse(text, true);
var temps = [];  // temps will be an array
temps = doc.dwml.data.getElement("parameters").getElement("temperature").getElements("value");
for (var i=0; i < temps.length; i++)
{
  var value = temps[i].getText();
  // do something with the value..
  Logger.log(value);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-13T07:38:29.887

这是一篇旧帖子，但我找不到很好的答案。这是一对使用新的 XmlService 很好地工作的脚本，并且可以迭代以获得任意深度的子级。

```
function XMLtoAssocArray(xmlString) {
  var xml = XmlService.parse(xmlString)
  var root = xml.getRootElement()
  return XMLhelper(root)
}

function XMLhelper(Element){
  var children = Element.getChildren()
  var out = {}
  if(children.length>0){
    for (var ii = 0; ii<children.length; ii++){
      var child = children[ii]
      var name = child.getName();
      out[name] = XMLhelper(child)
    }
  } else {
    out = Element.getText()
  }
  return out
}
```

# html - 带有 Dojo 的 HTML 文件拒绝在我的本地计算机上工作

> ID：16025279
> 
> 赞同：0
> 
> 时间：2013-04-15T21:50:32.807
> 
> 标签：html, dojo, modal-dialog, alert

我在直接从 dojo 教程复制的文件中使用了一些 CDN 链接。我不知道为什么它不起作用。当您单击 Show Me! 时应该有一个对话框！按钮，但对话框的某些部分仅在页面上可见，并且该按钮不执行任何操作。

```
<!DOCTYPE html>
<html >
<head>

<link href="http://ajax.googleapis.com/ajax/libs/dojo/1.7.4/dijit/themes/claro/claro.css" type="text/css" rel="stylesheet" />

<script>dojoConfig = {parseOnLoad: true}</script>
<script src="//ajax.googleapis.com/ajax/libs/dojo/1.7.4/dojo/dojo.js"
           data-dojo-config="async: true"></script>

<script>
 require(["dijit/Dialog", "dijit/form/TextBox", "dijit/form/Button"]);
</script>
</head>
<body class="claro">
<div data-dojo-type="dijit/Dialog" data-dojo-id="myDialog" title="Name and Address">
<table class="dijitDialogPaneContentArea">
    <tr>
        <td><label for="name">Name:</label></td>
        <td><input data-dojo-type="dijit/form/TextBox" name="name" id="name"></td>
    </tr>
    <tr>
        <td><label for="address">Address:</label></td>
        <td><input data-dojo-type="dijit/form/TextBox" name="address" id="address">     </td>
    </tr>
</table>

<div class="dijitDialogPaneActionBar">
    <button data-dojo-type="dijit/form/Button" type="submit" id="ok">OK</button>
    <button data-dojo-type="dijit/form/Button" type="button" data-dojo-props="onClick:function(){myDialog.hide();}"
            id="cancel">Cancel</button>
</div>
 </div>

<button data-dojo-type="dijit/form/Button" type="button" onClick="myDialog.show();">
Show me!
</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:22:20.850

即使您在本地查看，也总是需要使用网络服务器。它根本不会从您的本地文件系统运行。

> 从 Web 服务器而不是文件系统运行您的源代码，即使 Web 服务器正在您的开发机器上运行。浏览器对来自本地文件系统的 HTTP 请求的处理比来自 Web 服务器的请求更严格，即使它在同一台机器上运行也是如此。为了获得一致的结果，您应该始终在任何 HTTP Web 服务器（Apache、nginx、Tomcat、IIS、Jetty 等）中运行 Dojo。

Lucian 关于丢失 http: 的评论，这不是问题：

> 您也可以从 CDN 加载 Dojo。这对于快速使用 Dojo 很有用，因为它不需要您托管自己的 Dojo 副本。您会注意到在我们的许多教程中，我们展示了无协议 URL，例如 . 这允许您在 http 和 https 应用程序中使用 Dojo，而无需调整 URL。有关更多信息，请查看 Dojo CDN 教程

参见：[道场开始](http://dojotoolkit.org/documentation/tutorials/1.8/start/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:48:57.327

首先，您在第二个 CDN 加载内容中缺少“http：”。然后似乎以某种方式没有加载 dijit 对话框文件......！您可以手动加载它们，**或者** 您可以通过加载 1.8 文件将 dojo 的版本从 1.7.4 切换到 1.8（我建议这样做），然后它应该可以工作。这是代码：

```
<!DOCTYPE html>
<html >
<head>

<link href="http://ajax.googleapis.com/ajax/libs/dojo/1.8/dijit/themes/claro/claro.css" type="text/css" rel="stylesheet" />

<script>dojoConfig = {parseOnLoad: true}</script>
<script src="http://ajax.googleapis.com/ajax/libs/dojo/1.8/dojo/dojo.js"
           data-dojo-config="async: true"></script>

<script>
 require(["dijit/Dialog", "dijit/form/TextBox", "dijit/form/Button"]);
</script>
</head>
<body class="claro">
<div data-dojo-type="dijit/Dialog" data-dojo-id="myDialog" title="Name and Address">
<table class="dijitDialogPaneContentArea">
    <tr>
        <td><label for="name">Name:</label></td>
        <td><input data-dojo-type="dijit/form/TextBox" name="name" id="name"></td>
    </tr>
    <tr>
        <td><label for="address">Address:</label></td>
        <td><input data-dojo-type="dijit/form/TextBox" name="address" id="address">     </td>
    </tr>
</table>

<div class="dijitDialogPaneActionBar">
    <button data-dojo-type="dijit/form/Button" type="submit" id="ok">OK</button>
    <button data-dojo-type="dijit/form/Button" type="button" data-dojo-props="onClick:function(){myDialog.hide();}"
            id="cancel">Cancel</button>
</div>
 </div>

<button data-dojo-type="dijit/form/Button" type="button" onClick="myDialog.show();">
Show me!
</button>
</body>
</html> 
```

# c++ - 清理此代码 [文件输入]

> ID：16025285
> 
> 赞同：1
> 
> 时间：2013-04-15T21:51:01.340
> 
> 标签：c++, oop, file-io

我必须从具有如下行的文件中读取：

```
255 0 0 15 x l Red Yellow,Gray,Blue,Green 
```

假设我想读取这一行的前 5 个元素（空格分隔）。我目前正在这样做：

```
std::string line;
while(file.good()) {
    getline(worldfile, line);
    unsigned space = line.find(" ");
    unsigned r = atoi(line.substr(0, space).c_str());
    line = line.substr(space + 1);
    space = line.find(" ");
    unsigned g = atoi(line.substr(0, space).c_str());
    line = line.substr(space + 1);
    space = line.find(" ");
    unsigned b = atoi(line.substr(0, space).c_str());
    line = line.substr(space + 1);
    space = line.find(" ");
    unsigned gold = atoi(line.substr(0, space).c_str());
    line = line.substr(space + 1);
    space = line.find(" ");
    char resource = line.substr(0, space).c_str()[0];
    // do something with these values
} 
```

我不喜欢这段代码的外观。虽然它对我的文件非常有效，但我不喜欢它只是一行又一行的代码。这使得它真的很难阅读。我还计划在完成后将我的代码（用于游戏）作为开源发布，但我对发布这样的代码感到羞耻。

我怎样才能清理这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T22:02:18.713

像这样的东西应该可以全部阅读：

```
#include <iostream>
#include <string>
#include <fstream>

using namespace std;

int main ()
{
   fstream file;
    file.open("file.txt",ios::in);
    unsigned r,g,b,gold;
    char i,f;
    string line;
    while(file >> r >> g >> b >> gold >> i >> f)
    {
        getline(file,line);
        cout << r << " " << g << " "<< b << " "<< gold << " "<< i << " "<< f << endl;
    }
    return 0;
} 
```

# xml - XSD 验证错误：“cvc-elt.1.a：找不到元素 'school' 的声明。”

> ID：16025286
> 
> 赞同：0
> 
> 时间：2013-04-15T21:51:16.217
> 
> 标签：xml, xsd, schema

我一直在尝试通过查看类似的问题来找到我的问题的答案。但是，无论我如何更改命名空间，我总是会遇到同样的问题。有人知道出了什么问题吗？

这是我的 XML 文件

```
<?xml version="1.0" encoding="UTF-8"?>

<school
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://www.somesite.org"  
xsi:schemaLocation="http://www.somesite.org/schemas Schema.xsd">
    <student id ="1000">
        <phone> 312-453-3495 </phone>
        <name> Hazael Mladen </name>
        <email> bkb@gmail.com </email>
        <borrowed amount = "2">
            <book>
                <isbn> 184356028-3 </isbn>
                <date> 10-12-2012 </date>
                <return> 10-14-2013 </return>
            </book>
            <book>
                <isbn> 184357328-3 </isbn>
                <date> 10-12-2012 </date>
                <return> 10-14-2013 </return>
            </book>
        </borrowed>
    </student>

    <student id = "1001">
        <phone> 434-213-5434 </phone>
        <name> Pankratios Kenyon </name>
        <email> rrrrr@gmail.com </email>
        <borrowed amount = "2">
            <book>
                <isbn> 184356028-6 </isbn>
                <date> 10-12-2012 </date>
                <return> 10-14-2013 </return>
            </book>
            <book>
                <isbn> 184356548-7 </isbn>
                <date> 10-12-2012 </date>
                <return> 10-14-2013 </return>
            </book>
        </borrowed>
    </student>

    <student id = "1002">
        <phone> 432-419-3645 </phone>
        <name> Mike Abhay </name>
        <email> qqmoar@gmail.com </email>
        <borrowed amount = "1">
            <book>
                <isbn> 184356028-3 </isbn>
                <date> 10-12-2012 </date>
                <return> 10-14-2013 </return>
            </book>
        </borrowed>
    </student>

    <student id = "1003">
        <phone> 945-325-4586 </phone>
        <name> Genghis Hollis </name>
        <email> qqmoar@gmail.com </email>
        <borrowed amount = "2">
            <book>
                <isbn> 184356028-3 </isbn>
                <date> 10-12-2012 </date>
                <return> 10-14-2013 </return>
            </book>
            <book>
                <isbn> 184356028-3 </isbn>
                <date> 10-12-2012 </date>
                <return> 10-14-2013 </return>
            </book>
        </borrowed>
    </student>

    <student id = "1004">
        <studentID> 1000 </studentID>
        <phone> 348-628-9546 </phone>
        <name> Jengo Giuliano </name>
        <email> qqmoar@gmail.com </email>
        <borrowed amount = "3">
            <book>
                <isbn> 184356028-3 </isbn>
                <date> 10-12-2012 </date>
                <return> 10-14-2013 </return>
            </book>
            <book>
                <isbn> 184356028-3 </isbn>
                <date> 10-12-2012 </date>
                <return> 10-14-2013 </return>
            </book>
            <book>
                <isbn> 184356028-3 </isbn>
                <date> 10-12-2012 </date>
                <return> 10-14-2013 </return>
            </book>
        </borrowed>
    </student>
</school> 
```

这是我的 XSD 架构文件：

```
<?xml version="1.0" encoding="UTF-8"?>

<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
targetNamespace="http://www.somesite.org/schemas"
elementFormDefault="qualified">

    <xs:element name="school">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="student" minOccurs="1">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="phone" type="xs:string"/>
                            <xs:element name="name" type="xs:string"/>
                            <xs:element name="email" type="xs:string"/>
                            <xs:element name="borrowed">
                                <xs:complexType>
                                    <xs:sequence>
                                        <xs:element name="book">
                                            <xs:complexType>
                                                <xs:sequence>
                                                    <xs:element name="isbn" type="xs:string"/>
                                                    <xs:element name="date" type="xs:date"/>
                                                    <xs:element name="return" type="xs:date"/>
                                                </xs:sequence>
                                            </xs:complexType>
                                        </xs:element>
                                    </xs:sequence>
                                    <xs:attribute name="amount" type="xs:integer" default="0"/>
                                </xs:complexType>
                            </xs:element>
                        </xs:sequence>
                        <xs:attribute name="id" type="xs:integer" use="required"/>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>

</xs:schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T23:47:34.253

```
xmlns="http://www.somesite.org"  
xsi:schemaLocation="http://www.somesite.org/schemas Schema.xsd" 
```

我相信第一行应该是：

```
xmlns="http://www.somesite.org/schemas" 
```

# c# - 内部连接的实体框架查询

> ID：16025287
> 
> 赞同：76
> 
> 时间：2013-04-15T21:51:29.280
> 
> 标签：c#, entity-framework

什么是查询：

```
select s.* from Service s 
inner join ServiceAssignment sa on sa.ServiceId = s.Id
where  sa.LocationId = 1 
```

在实体框架中？

这是我写的：

```
 var serv = (from s in db.Services
                join sl in Location on s.id equals sl.id
                where sl.id = s.id
                select s).ToList(); 
```

但这是错误的。有人可以引导我走上这条路吗？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-04-15T22:04:13.760

```
from s in db.Services
join sa in db.ServiceAssignments on s.Id equals sa.ServiceId
where sa.LocationId == 1
select s 
```

你`db`的`DbContext`. 生成的查询将如下所示（EF6 示例）：

```
SELECT [Extent1].[Id] AS [Id]
       -- other fields from Services table
FROM [dbo].[Services] AS [Extent1]
INNER JOIN [dbo].[ServiceAssignments] AS [Extent2]
    ON [Extent1].[Id] = [Extent2].[ServiceId]
WHERE [Extent2].[LocationId] = 1 
```

* * *

## 回答 #2

> 赞同：67
> 
> 时间：2016-04-21T15:34:17.347

如果有人对 Method 语法感兴趣，如果你有一个导航属性，这很容易：

```
db.Services.Where(s=>s.ServiceAssignment.LocationId == 1); 
```

如果你不这样做，除非有一些`Join()`我不知道的覆盖，我认为它看起来很粗糙（而且我是一个方法语法纯粹主义者）：

```
db.Services.Join(db.ServiceAssignments, 
     s => s.Id,
     sa => sa.ServiceId, 
     (s, sa) => new {service = s, asgnmt = sa})
.Where(ssa => ssa.asgnmt.LocationId == 1)
.Select(ssa => ssa.service); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-09-17T16:07:19.063

如果可用，您可以使用导航属性。它在 SQL 中产生一个内连接。

```
from s in db.Services
where s.ServiceAssignment.LocationId == 1
select s 
```

# javascript - 多次调用主干视图渲染函数

> ID：16025289
> 
> 赞同：0
> 
> 时间：2013-04-15T21:51:36.763
> 
> 标签：javascript, backbone.js, backbone-views, backbone-events

我有一个代表文件夹的视图。我有一堆子视图，这个文件夹视图创建，每个代表该文件夹中的唯一缩略图。事实证明，每个子视图的渲染方法都被多次调用（3）。有没有办法找出视图的渲染方法是如何被调用的。有不同的地方可以呈现触发事件，例如，如果模型元数据被更改。它已经变得一团糟，我正在寻找一种调试主干视图的方法，以了解究竟是什么触发了渲染方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T03:43:29.377

我总是调试事件的方式是：

```
view.on('all', function(eventName){
    console.log('Name of View: ' + eventName);
}); 
```

您可以在视图、模型或集合上执行此操作。

**示例**：http: [//jsfiddle.net/CoryDanielson/phw4t/6/](http://jsfiddle.net/CoryDanielson/phw4t/6/)

我手动添加了`request`and`sync`方法来模拟主干的实际执行情况。该`rendered`事件是自定义的——没有人听它。只是为了向您展示它是如何/何时发生的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:29:57.717

因此，根据您的要求，这是一个如何覆盖该`trigger`方法的示例。请注意，您必须为所有类型的类（模型、视图、集合、路由器）覆盖它。

```
var trigger = Backbone.Model.prototype.trigger;
Backbone.Model.prototype.trigger = Backbone.View.prototype.trigger = Backbone.Collection.prototype.trigger = Backbone.Router.prototype.trigger = function(name) {
  trigger.apply(this, arguments);
  console.log(this, 'triggered the event', name, '.').
} 
```

您可以通过单独覆盖每个方法以在日志中添加对象类型来更具体。但是你明白了一般的想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T21:58:54.987

你可能会[`backbone.debug`](http://andrewterris.com/backbone.debug/)尝试一下。应该让您深入了解正在触发的事件。

# mongodb - 如何确定一个盒子是否与使用地理空间方法的 mongoDB 盒子集合相交？

> ID：16025291
> 
> 赞同：0
> 
> 时间：2013-04-15T21:51:45.703
> 
> 标签：mongodb, geospatial

我已经弄清楚如何对交集进行查询，但无法弄清楚如何在数据库中定义框，以便它返回与我的查询参数相交的所有框。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T21:55:24.757

我发现这个网站最有帮助。只需使用他们的示例，一切都应该清楚。如果不是，请考虑将那个复杂的多边形变成一个正方形（这也是一个多边形）。

您可以将这些命令用于名为“test”的数据库和名为“geo”的集合：

```
test.geo.insert( {_id: "Poly1", shape: {type: "Polygon", coordinates: [[ [1,2], [1,4], [4,4], [4,2], [1,2] ]] } });
test.geo.ensureIndex( {shape:"2dsphere"} );
geo.find( {shape: {$geoIntersects: {$geometry: {type: "Polygon", coordinates: [[ [2,4], [2,8], [3,8], [3,4], [2,4] ]] }}}} ) 
```

这个特定示例的多边形在第 4 列相交。我尚未测试所有可能的组合，但从我测试的组合来看，它确实有效。

# php - PHP - 搜索具有多个值的多维数组

> ID：16025292
> 
> 赞同：2
> 
> 时间：2013-04-15T21:51:47.763
> 
> 标签：php, arrays, multidimensional-array

我的函数在多维数组中搜索匹配项。它有效，但我想知道是否有更好的方法来做到这一点。

```
$arrays = array(
    array('id' => 1, 'color_id' => 2, 'store_id' => 1),
    array('id' => 1, 'color_id' => 2, 'store_id' => 2),
    array('id' => 2, 'color_id' => 3, 'store_id' => 1)
);

function query_array($array, $keys = array(), $values = array()){
    $match = array();
    for($i = 0; $i < count($array); $i++){
        for($x = 0; $x < count($keys); $x++){
            if($array[$i][$keys[$x]] == $values[$x]){
                $match[$i][] = 'increment';
                if(count($match[$i]) == count($keys)){
                    return $array[$i];
                }
            }
        }
    }
    return $match;
}
$searchKeys = array('item_id', 'store_id');
$searchValues = array(2,1);
$match = query_array($arrays, $searchKeys, $searchValues);

echo '<pre>';
print_r($match);
echo '<pre>'; 
```

# python - 关闭文件python

> ID：16025296
> 
> 赞同：2
> 
> 时间：2013-04-15T21:52:08.297
> 
> 标签：python, file

我读过有一种方法可以用..在python中打开文件

os.startfile('file.exe')

有没有办法在打开时关闭同一个文件？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T21:59:04.307

从[os.startfile() 文档](http://docs.python.org/2/library/os.html#os.startfile)：

> startfile() 会在关联的应用程序启动后立即返回。没有等待应用程序关闭的选项，也没有办法检索应用程序的退出状态。

所以，基本上，不，没有办法关闭用`startfile`.

从问题中不清楚您是要*启动*文件还是*打开*文件（用于读/写）。

如果您想启动一个进程，子进程是运行其他进程并通过子shell控制它们（包括杀死它们）的更好选择。

如果你想打开一个文件进行读/写，那么[open()](http://docs.python.org/2/library/functions.html#open)将是一个不错的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:55:40.377

正如 Python Wiki 所说，此函数执行以下操作：

> 启动一个文件及其关联的应用程序。

所以最好的办法是用来`os.kill`杀死打开它的应用程序。问题在于识别与以下扩展名的文件相关联的应用程序并找到打开该文件的确切实例的 pid。

您在示例中使用了 .exe 文件，它是可执行文件扩展名，因此您可能误解了该函数的作用。你想达到什么目的？你确定这是正确的做法吗？

如果你真的想启动可执行文件，你可能应该使用`os.system()`. 如果你想创建一个新文件，在里面写一些东西然后关闭它，寻找python文件操作，这里有很好的例子：[http ://www.tutorialspoint.com/python/python_files_io.htm](http://www.tutorialspoint.com/python/python_files_io.htm)

# android - 尝试向 TableRow 添加边框时出错

> ID：16025299
> 
> 赞同：0
> 
> 时间：2013-04-15T21:52:12.610
> 
> 标签：android, tablerow, xml-drawable

我发现了很多这样的例子，据我所知，我做得对，但我仍然得到一个错误。我创建了一个border.xml 文件并将其放入一个drawable 文件夹中。该文件夹不存在，所以我必须创建它。我感觉我的问题是我保存文件的位置，或者可能需要在某个地方注册它。在这里你可以看到文件。 ![在此处输入图像描述](https://i.stack.imgur.com/ZOz5q.png)

这是border.xml的代码

```
<?xml version="1.0" encoding="UTF-8"?>
  <shape xmlns:android="http://schemas.android.com/apk/res/android">
  <solid android:color="#ffffff" />
  <stroke android:width="2dp" android:color="#515151"/>
  <corners android:radius="3dp" />
  <padding android:left="10dp" android:top="5dp"
    android:right="10dp" android:bottom="5dp" />
</shape> 
```

这就是我尝试使用它的方式

```
<TableRow 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="@drawable/border.xml"
    android:padding="5dp"> 
```

我得到的错误是：

```
error: Error: No resource found that matches the given name (at 'background' with value 
 '@drawable/border.xml'). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:03:57.413

尝试`android:background="@drawable/border"`不使用`.xml`

# javascript - MarkerClustererPlus：设置与大小无关的图标颜色/url

> ID：16025306
> 
> 赞同：5
> 
> 时间：2013-04-15T21:52:38.830
> 
> 标签：javascript, markerclusterer

我正在通过 MarkerClustererPlus 绘制几十万个点，我想根据一些外部属性（*而不是*基于表示的标记数量）设置集群图标（颜色）组。

我能想到的唯一方法是创建多个 MarkerClusterer 对象并传入不同的`options`对象，但我觉得这样做会对性能造成很大影响。有没有更好的办法？

![Marker Clusterer Plus 具有不同大小的图标，可缩放以适应。](https://i.stack.imgur.com/yMjwE.png)

鉴于上图，我希望 139、24 和 5 为黄色，而 213、25、30 和 2 为红色；如果可能的话，通过 setOptions 更新他们的样式/选项：
`mc.group[0].setOptions({"url": imgPath +lookupThreshold(severity)+ '.svg' });`
`mc.group[1].setOptions({"url": imgPath +lookupThreshold(severity)+ '.svg' });`

PS如果有人感兴趣，我调整了lib，^(通过提供一个svg图像并增加选项对象的宽度和高度，集群图标缩放到它的大小†</sup>：)

```
var mcOptions = {
  "styles": [{
    "height": 19,
    "url": img/map/clusters/",
    "width": 19
  },{
    "height": 24,
    "url": img/map/clusters/",
    "width": 24
  }, {…}]
};
for ( var s = mcOptions.styles.length-1; s >= 0; s-- )
{ mcOptions.styles[s].url += lookupThreshold(severity) + '.svg'; }
// lookupThreshold switches severity and returns a string: red, orange, … 
```

然后将以下内容添加到`markerclusterer.js`：

```
line 275: this.backgroundSize_ = style.backgroundSize || "contain";
line 300: style.push('background-size:' + this.backgroundSize_ + ';'); 
```

^(†</sup> 适用于 Ffx 19.0.2、Chrome 26.x、Chrome Canary 28.x、Safari 6.0.2、IE 9.0.8（但不适用于 Opera 12.15）。)

**编辑**创建多个 MarkerClusterer 实例似乎对性能没有太大影响；但是，似乎传递给 MC 的属性/选项对象在 MC的实例之间是*共享的。*

**解决**了我必须修改第 665 行附近的 MarkerClusterPlus 库以进行克隆`opt_options`（该库使用引用，这导致所有以前的 opt_options 都被最新/最后一个传递的选项覆盖）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T18:10:13.047

所以事实证明，问题出在[MarkerClustererPlus 库](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/src/markerclusterer.js)本身：

```
656:  function MarkerClusterer(map, opt_markers, opt_options) {
…
665:    opt_options = opt_options || {}; 
```

第 *665*行创建对现有对象的**引用**，而不是新副本。我不能`MarkerClusterer.prototype.extend`从第*1539*行开始使用，因为它不会进行深层复制（并且它仅扩展对象的原型）。

因此，我编写了自己的深拷贝函数（[jsfiddle](http://jsfiddle.net/jshado1/QKQGR/)），我将其设为全局可用（而不是将其添加到*Array*和*Object*的原型中）：

```
function deepCopy(obj) {  
  this.cloneArr = function (arr) {
    var newArr = [];
    for ( var i = arr.length-1; i >= 0; i-- ) newArr[i] = this.evalObj( arr[i] );
    return newArr;
  };
  this.cloneObj = function(obj) {
    var newObj = {};
    for ( var prop in obj ) newObj[prop] = this.evalObj( obj[prop] );
    return newObj;
  };
  this.evalObj = function(obj) {
    switch ( typeof obj ) {
      case 'object':
        if ( Array.isArray( obj ) ) return this.cloneArr( obj );
        if ( obj instanceof Date === false ) return this.cloneObj( obj );
        // pass thru dates, strings, numbers, booleans, and functions
      default: return obj; // primitive
    }
  };
  return this.evalObj(obj);
} 
```

然后我将*MarkerClustererPlus.js*更改为以下内容：

```
656:  function MarkerClusterer(map, opt_markers, opt_optionsG) {
…
665:    var opt_options = deepCopy( opt_optionsG ) || {}; 
```

我测试了 5 个 MarkerClusterPlus 实例（每个实例有 5000 个标记，总共 25000 个），与单个 MC+ 实例相比，没有明显的性能影响。

![MarkerClusterPlus 多个实例的屏幕截图](https://i.stack.imgur.com/g1erW.png)

# css - CSS 将 2 img 与链接和表单对齐

> ID：16025309
> 
> 赞同：0
> 
> 时间：2013-04-15T21:52:48.033
> 
> 标签：css, image, forms, alignment

嗨，我正在用 html 创建一个 1000px 的菜单，其中有 2 个图像，一个在左侧，另一个在菜单的右侧，高度为 40px，左侧还有一组链接，右侧有一个搜索表单这个：

```
<div class="menu">
    <div align="left">
        <img src="/img/menu_left.jpg"/>
        <a href="">link 1</a> | 
        <a href="">link 2</a> | 
        <a href="">link 3</a>
    </div>
    <div align="right">
        <form>
            <input type="text"/>
            <select>
                <option>opt1</option>
                <option>opt2</option>
            </select>
        </form>
        <img src="/img/menu_right.jpg"/>
    </div>
</div> 
```

我正在尝试使用 css 而不是表格来水平和垂直对齐所有的东西。但是我的css从不做我想做的:(

```
.menu {
    width:1000px;
    background-image:url('/img/menu_middle.jpg');
    background-repeat:repeat-x;
    background-color:#bf2b27;
    height:40px;
    vertical-align:middle;
    font-family: sans-serif, Verdana, Arial, Helvetica;
    font-size: 12pt;
    color:#ffffff;
    display:inline;
    float:left;
} 
```

菜单有 1000 像素，背景图像工作正常，链接出现在底部而不是中间，表单在右侧但向下一行，右侧菜单图像在表单后又向下一行出现。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T23:40:51.643

对于更干净的 DOM，尽管有 img src，您仍可以在左侧 div 中使用带有填充的背景图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T23:49:09.993

这是正确的版本：http: [//jsfiddle.net/534J7/](http://jsfiddle.net/534J7/)

1.  不要使用对齐属性。它已被弃用。
2.  使用浮动对齐。
3.  垂直对齐的一个技巧是设置`line-height: = container_height`*. 您还可以使用边距（例如图像）。

*而不是“container_height”，写实际高度。

# java - 斐波那契谜题几乎需要快速修复和简单解决

> ID：16025311
> 
> 赞同：-1
> 
> 时间：2013-04-15T21:52:53.957
> 
> 标签：java, fibonacci

帮助我有一个需要解决的难题！我做了一个斐波那契数列，但我忘了包括 0 谁能帮我解决这个谜语？如果输入序列中的五个输出应该是 0,1,1,2,3 我应该改变什么来清理代码并获得所需的结果而不完全从头开始？

```
//Class Assignment 9 little Fibonacci series based on what input
//the user provides
import java.util.Scanner;
public class LittleFibonacci {

    int number;// This declares an int variable
    public static void main(String[] args){

        //itnu is the new object
        LittleFibonacci itnu = new LittleFibonacci ();
        itnu.GetNumberInput();
     }

    public void GetNumberInput()
    {
        Scanner input = new Scanner(System.in);
        System.out.println("Enter a number and that number will be a" +
                " \nrepresentitive of the length of a sequence in the Fibonocci series.");
        number = input.nextInt();
        int f1, f2=0, f3=1;

        for(int i = 1 ; i <= number ; i++ )
        {
            System.out.print(" "+f3+" ");
            f1 = f2;
            f2 = f3;
            f3 = f1 + f2;
        }    
        input.close();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T23:36:58.073

只需从零而不是一开始循环，并相应地更改初始化`{f1,f2,f3}`（留给读者练习）。

这里告诉您首先输出零的其他解决方案基本上是作弊。您不妨硬编码所有斐波那契数。这样做你不会得到任何分数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T21:56:20.920

添加

```
 System.out.print(" "+f2+" "); 
```

在 for 循环之前。将 for 循环终止条件更改为 <。

我想要真正完整，我们还应该检查用户是否输入 0（或负数），在这种情况下甚至不打印 f2 。

这可能看起来有点“不干净”，但斐波那契数列有两个起始数字，它们很特殊，需要特殊处理。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-15T21:58:25.613

我会采取的方法是先打印您的基本案例，然后在每次迭代后重置它们

```
int fPrev = 0, fCur = 1;

System.out.print(fPrev+" "+fCur);

for(int i = 2 ; i <= number ; i++ )
{
    int fNew = fPrev + fCur

    System.out.print(" "+fNew);
    fPrev = fCur;
    fCur = fNew;
} 
```

# windows - 从 PowerShell 启动 WinRT 应用程序

> ID：16025315
> 
> 赞同：3
> 
> 时间：2013-04-15T21:53:12.080
> 
> 标签：windows, powershell, windows-runtime

我有一个需要使用脚本启动的 Windows RT 应用程序。我已经使用 PowerShell 在设备上安装了该应用程序，但我需要使用 PowerShell 或命令提示符启动该应用程序。有没有办法做到这一点？谢谢。

PS 看起来有一种方法可以使用 Start-MetroApp 命令在 Windows 8 上启动 Metro 应用程序，但这在 Windows RT 上不起作用。Windows RT 是否有某种等价物？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T09:20:59.190

你可以使用协议激活，如果你想让你的应用程序让任何人都可以从资源管理器、运行、powershell 或 cmd 打开它

[这是协议激活](http://code.msdn.microsoft.com/windowsapps/Association-Launching-535d2cec)的 MSDN 示例。

这是启动应用程序的方法。

对于运行和资源管理器：`myapp://`

对于 cmd 和 power shell ：`explorer.exe myapp://`

此外，阅读这篇很棒的博文，[Inter-Process communication (Windows Store App & Desktop Apps) with protocol association in WinRT](http://iinspectable.wordpress.com/2013/04/09/inter-process-communication-with-protocol-association-in-winrt-part-3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T23:53:38.907

我会看看[Launch Windows 8 Metro Apps From a Desktop Shortcut or Command Line](http://www.itsjustwhatever.com/2012/10/28/launch-windows-8-metro-apps-from-a-desktop-shortcut-or-command-line/)中提到的技术，例如：

```
explorer.exe bingnews:// 
```

它还提到了一个[MetroLauncher](http://www.itsjustwhatever.com/downloads/)实用程序，该实用程序适用于没有协议的应用程序。

# c++ - C++11 中的奇怪初始化

> ID：16025316
> 
> 赞同：1
> 
> 时间：2013-04-15T21:53:14.160
> 
> 标签：c++, c++11

我听说我可以使用以下语法初始化一个值：

```
int foo = {5}; 
```

此外，我可以使用更少的代码来做同样的事情：

```
int foo{5}; 
```

那么，使用它们有什么优点/缺点吗？这是一个好习惯，还是使用标准更好：？

```
int foo = 5; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T22:02:04.837

你举的三个例子，不太一样。统一初始化（带有 的初始化`{ }`）不允许缩小转换范围

```
int i = 5.0;   // Fine, stores 5
int i{5.0};    // Won't compile!
int i = {5.0}; // Won't compile! 
```

此外，复制初始化（带有 的那些`=`）不允许显式构造函数。

新的 C++11 特性统一初始化及其表亲初始化器列表（将大括号初始化语法推广到例如标准容器）是一个具有许多怪癖的棘手动物。@Praetorian 的评论中提到的最令人头疼的解析只是其中之一，元组和多维数组是另一个潘多拉魔盒。

# xml - persistence.xml - 解析 XML 时出错：XML InputStream(1) 文件过早结束

> ID：16025318
> 
> 赞同：1
> 
> 时间：2013-04-15T21:53:19.610
> 
> 标签：xml, hibernate, maven

当我尝试在我的代码中创建实体管理器时出现此错误。

```
EntityManagerFactory emf = Persistence.createEntityManagerFactory("puDS1", myproperties); 
```

关于为什么会发生这种情况的任何提示？我的 persistence.xml 似乎是一个有效的 xml。

```
ERROR [main] (PersistenceXmlLoader.java:251) - Error parsing XML: XML InputStream(1) Premature end of file.
javax.persistence.PersistenceException: Unable to configure EntityManagerFactory
        at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:265)
        at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:125)
        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:52)
Caused by: org.xml.sax.SAXParseException: Premature end of file.
        at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(Unknown Source)
        at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(Unknown Source)
        at org.hibernate.ejb.packaging.PersistenceXmlLoader.loadURL(PersistenceXmlLoader.java:70)
        at org.hibernate.ejb.packaging.PersistenceXmlLoader.deploy(PersistenceXmlLoader.java:89)
        at org.hibernate.ejb.Ejb3Configuration.configure(Ejb3Configuration.java:222)
        ... 4 more 
```

持久性 xml 看起来像这样。请注意，我在这个 persistence.xml 上使用了 maven 资源过滤，因此在编译期间 ${jar_file_name_ds1} 和 ${jar_file_name_ds2} 被替换为有效名称。我已经验证了最终的 persistence.xml 已正确替换了值。我不知道 Maven 资源过滤是否搞砸了。

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd" version="2.0">
    <persistence-unit name="puDS1" transaction-type="RESOURCE_LOCAL">
      <provider>org.hibernate.ejb.HibernatePersistence</provider>
      <jar-file>${jar_file_name_ds1}</jar-file>      
      <properties>         
         <property name="hibernate.max_fetch_depth" value="3"/>
      </properties>
   </persistence-unit>   
   <persistence-unit name="puDS2" transaction-type="RESOURCE_LOCAL">
      <provider>org.hibernate.ejb.HibernatePersistence</provider>
      <jar-file>${jar_file_name_ds2}</jar-file>
      <properties>
         <property name="hibernate.max_fetch_depth" value="3"/>
      </properties>
   </persistence-unit>   
</persistence> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T05:51:06.477

问题是代码试图连接到互联网（我假设让 xsd 验证 persistence.xml）。当我将机器连接到互联网时，它开始工作。我试图克服这个问题，这样我就不需要连接到互联网，但这是一个不同的问题。

# html - Html 5 Canvas 完整箭头

> ID：16025326
> 
> 赞同：3
> 
> 时间：2013-04-15T21:53:43.863
> 
> 标签：html, canvas, html5-canvas

我正在使用 wPaint 插件，并尝试添加更多功能。我需要的是一条以“箭头”结尾的画线。我已经尝试了几乎所有我能想到的东西，但我只能得到箭头的一半（想象<-----，但头部只延伸到底部或顶部，但从来没有两个方向。）

这是绘制线的函数（带有半箭头）：

```
 drawArrowMove: function(e, _self)
  {
        var xo = _self.canvasTempLeftOriginal;
        var yo = _self.canvasTempTopOriginal;

        if(e.pageX < xo) { e.x = e.x + e.w; e.w = e.w * -1}
        if(e.pageY < yo) { e.y = e.y + e.h; e.h = e.h * -1}

        _self.ctxTemp.lineJoin = "round";
        _self.ctxTemp.beginPath();
        _self.ctxTemp.moveTo(e.x, e.y);
        _self.ctxTemp.lineTo(e.x + e.w, e.y + e.h);

        _self.ctxTemp.closePath();
        _self.ctxTemp.moveTo(e.x, e.y);

        _self.ctxTemp.lineTo(15,10);                   
        _self.ctxTemp.stroke();
  } 
```

任何帮助/想法/提示都会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-16T01:47:27.843

**这是如何创建一个在两端绘制箭头的线对象**

有趣的部分是计算箭头的角度，如下所示：

```
var startRadians=Math.atan((this.y2-this.y1)/(this.x2-this.x1));
startRadians+=((this.x2>=this.x1)?-90:90)*Math.PI/180;

var endRadians=Math.atan((this.y2-this.y1)/(this.x2-this.x1));
endRadians+=((this.x2>=this.x1)?90:-90)*Math.PI/180; 
```

其余的只是为箭头绘制线和 2 个三角形计算的旋转

```
Line.prototype.drawArrowhead=function(ctx,x,y,radians){
    ctx.save();
    ctx.beginPath();
    ctx.translate(x,y);
    ctx.rotate(radians);
    ctx.moveTo(0,0);
    ctx.lineTo(5,20);
    ctx.lineTo(-5,20);
    ctx.closePath();
    ctx.restore();
    ctx.fill();
} 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/Sg7EZ/](http://jsfiddle.net/m1erickson/Sg7EZ/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var context=canvas.getContext("2d");

    function Line(x1,y1,x2,y2){
        this.x1=x1;
        this.y1=y1;
        this.x2=x2;
        this.y2=y2;
    }
    Line.prototype.drawWithArrowheads=function(ctx){

        // arbitrary styling
        ctx.strokeStyle="blue";
        ctx.fillStyle="blue";
        ctx.lineWidth=1;

        // draw the line
        ctx.beginPath();
        ctx.moveTo(this.x1,this.y1);
        ctx.lineTo(this.x2,this.y2);
        ctx.stroke();

        // draw the starting arrowhead
        var startRadians=Math.atan((this.y2-this.y1)/(this.x2-this.x1));
        startRadians+=((this.x2>this.x1)?-90:90)*Math.PI/180;
        this.drawArrowhead(ctx,this.x1,this.y1,startRadians);
        // draw the ending arrowhead
        var endRadians=Math.atan((this.y2-this.y1)/(this.x2-this.x1));
        endRadians+=((this.x2>this.x1)?90:-90)*Math.PI/180;
        this.drawArrowhead(ctx,this.x2,this.y2,endRadians);

    }
    Line.prototype.drawArrowhead=function(ctx,x,y,radians){
        ctx.save();
        ctx.beginPath();
        ctx.translate(x,y);
        ctx.rotate(radians);
        ctx.moveTo(0,0);
        ctx.lineTo(5,20);
        ctx.lineTo(-5,20);
        ctx.closePath();
        ctx.restore();
        ctx.fill();
    }

    // create a new line object
    var line=new Line(50,50,150,150);
    // draw the line
    line.drawWithArrowheads(context);

}); // end $(function(){});
</script>

</head>

<body>
    <canvas id="canvas" width=300 height=300></canvas>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-02T16:39:37.247

这对于垂直线是错误的。尝试

`var line=new Line(50,50,50,275)`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-28T11:45:05.437

除了**markE**的答案与**user1707810**评论相结合：

（开始/结束弧度）的两个块：

```
 - ((this.x2 > this.x1)?-90:90)*Math.PI/180; 
```

应改为：

```
 - ((this.x2 >= this.x1)?-90:90)*Math.PI/180; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-08T16:42:14.347

更简单的版本

关键区别。使用`Math.atan2`消除了对`if`

这个也将箭头放在行尾而不是行尾

换句话说

这个

```
start         end
    |<------->| 
```

对比这个

```
 <|---------|> 
```

```
function arrow(ctx, x1, y1, x2, y2, start, end) {
  var rot = -Math.atan2(x1 - x2, y1 - y2);
  ctx.beginPath();
  ctx.moveTo(x1, y1);
  ctx.lineTo(x2, y2);
  ctx.stroke();
  if (start) {
    arrowHead(x1, y1, rot);
  }
  if (end) {
    arrowHead(x2, y2, rot + Math.PI);
  }
}

function arrowHead(x, y, rot) {
  ctx.save();
  ctx.translate(x, y);
  ctx.rotate(rot);
  ctx.beginPath();
  ctx.moveTo(0, 0);
  ctx.lineTo(-5, -12);
  ctx.lineTo(5, -12);
  ctx.closePath();
  ctx.fill();
  ctx.restore();
}

// test it -------

var ctx = document.createElement("canvas").getContext("2d");
document.body.appendChild(ctx.canvas);

// draw some arrows
ctx.save();
ctx.translate(ctx.canvas.width / 2, ctx.canvas.height / 2);

for (var ii = 0; ii <= 12; ++ii) {
  var u = ii / 12;
  var color = hsl(u * 360, 1, 0.5);
  ctx.fillStyle = color;
  ctx.strokeStyle = color;
  var a = u * Math.PI;
  var x = Math.cos(a) * 120;
  var y = Math.sin(a) * 70;
  arrow(ctx, -x, -y, x, y, true, true);

  // draw the end points to see the arrowheads match
  ctx.fillStyle = "#000";
  ctx.fillRect(-x - 1, -y - 1, 3, 3);
  ctx.fillRect( x - 1,  y - 1, 3, 3);
}

ctx.restore();

function hsl(h, s, l) {
  return `hsl(${h},${s * 100}%,${l * 100}%)`;
}
```

```
canvas { border: 1px solid black; }
```

上述解决方案的一个问题是，如果你加粗线条笔划，它会戳穿箭头。修复起来并不难，但您必须以像素为单位计算线条的长度，然后从两侧减去箭头的大小。

像这样的东西

```
function arrow(ctx, x1, y1, x2, y2, start, end) {
  var dx = x2 - x1;
  var dy = y2 - y1;
  var rot = -Math.atan2(dx, dy);
  var len = Math.sqrt(dx * dx + dy * dy);
  var arrowHeadLen = 10;
  ctx.save();
  ctx.translate(x1, y1);
  ctx.rotate(rot);
  ctx.beginPath();    
  ctx.moveTo(0, start ? arrowHeadLen : 0);
  ctx.lineTo(0, len - (end ? arrowHeadLen : 0));
  ctx.stroke();
  if (end) {
    ctx.save();
    ctx.translate(0, len);
    arrowHead(ctx);
    ctx.restore();
  }
  if (start) {
    ctx.rotate(Math.PI);
    arrowHead(ctx);
  }
  ctx.restore();
}

function arrowHead(ctx) {
  ctx.beginPath();
  ctx.moveTo(0, 0);
  ctx.lineTo(-5, -12);
  ctx.lineTo(5, -12);
  ctx.closePath();
  ctx.fill();
}

// test it -------

var ctx = document.createElement("canvas").getContext("2d");
document.body.appendChild(ctx.canvas);

// draw some arrows
ctx.save();
ctx.translate(ctx.canvas.width / 2, ctx.canvas.height / 2);

for (var ii = 0; ii < 12; ++ii) {
  var u = ii / 12;
  var color = hsl(u * 360, 1, 0.5);
  ctx.fillStyle = color;
  ctx.strokeStyle = color;
  var a = u * Math.PI;
  var x = Math.cos(a) * 120;
  var y = Math.sin(a) * 70;
  arrow(ctx, -x, -y, x, y, true, true);
  ctx.fillStyle = "#000";  // mark the ends so we can see where they are
  ctx.fillRect(-x - 1, -y - 1, 3, 3);
  ctx.fillRect( x - 1,  y - 1, 3, 3);
}

ctx.restore();

function hsl(h, s, l) {
  return `hsl(${h},${s * 100}%,${l * 100}%)`;
}
```

```
canvas { border: 1px solid black; }
```

换句话说，第一个解决方案绘制这样的箭头

[![顶部箭头](https://i.stack.imgur.com/shkmO.png)](https://i.stack.imgur.com/shkmO.png)

当第二个解决方案绘制这样的箭头时

[![底部箭头](https://i.stack.imgur.com/5gFSO.png)](https://i.stack.imgur.com/5gFSO.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-01-13T21:03:04.550

我的简单解决方案

```
ctx.beginPath(); 
ctx.moveTo(ax,ay);
ctx.lineTo(bx,by);
ctx.stroke();
ctx.closePath();
angle=Math.PI+Math.atan2(by-ay,bx-ax);
angle1=angle+Math.PI/6;
angle2=angle-Math.PI/6;
ctx.beginPath(); 
ctx.moveTo(bx,by);
ctx.arc(bx,by,5,angle1,angle2,true);
ctx.lineTo(bx,by);
ctx.fill();
ctx.closePath(); 
```

# jsrender - jsrender中的内联条件语句

> ID：16025331
> 
> 赞同：0
> 
> 时间：2013-04-15T21:53:59.670
> 
> 标签：jsrender

只是一个快速的，似乎无法弄清楚为什么这不起作用：

```
list :  '<div id="{{>id}}" class="gridRow cf">' +
    '   <div class="threeCol"><img src="{{>image}}" /></div>' +
    '   <div class="threeCol">{{>name}}</div>' +
    '   <div class="sixCol last">' +
    '       <div class="button cupid-green" {{if buttonAction}} data-action="{{>buttonAction"}} {{/if}} {{if gameId}} data-game-id="{{>gameId}}" {{/if}}>{{>buttonText}}</div>' +
    '   </div>' + 
    '</div>' 
```

我收到一个错误

```
04-15 22:46:56.960: E/Web Console(20319): Uncaught JsRender Error: Syntax error
04-15 22:46:56.960: E/Web Console(20319): Compiled template code:
04-15 22:46:56.960: E/Web Console(20319): // list/if
04-15 22:46:56.960: E/Web Console(20319): var j=j||jQuery.views,h=j.converters.html,ret="";
04-15 22:46:56.960: E/Web Console(20319): try{
04-15 22:46:56.960: E/Web Console(20319): ret+=" data-action=\"";
04-15 22:46:56.960: E/Web Console(20319): ret+=h(data.buttonAction");
04-15 22:46:56.960: E/Web Console(20319): ret+=" ";
04-15 22:46:56.960: E/Web Console(20319): return ret;
04-15 22:46:56.960: E/Web Console(20319): }catch(e){return j._err(e);}:854 
```

有谁知道这是什么原因？

问候

# actionscript-3 - AS3 将子添加到父

> ID：16025332
> 
> 赞同：0
> 
> 时间：2013-04-15T21:54:01.077
> 
> 标签：actionscript-3, add, parent

我基本上需要一个孩子向父母添加另一个孩子。我知道 localConnection 或任何它被称为的东西，这对我来说太乱了，无法使用。我有什么办法可以做到这一点吗？

这是主要代码 var c:childboy = new childboy(); //在类的构造函数中，它应该添加一个孩子

这是 childboy package { import flash.display.Loader; 的代码。

```
public class childboy
{
    var ass:Loader = new Loader();

    public function childboy()
    {
        parent.addChild(ass);
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:21:44.667

父属性仅在您先创建 addChild(obj) 时才存在。

所以在你的类中创建一个这样的函数并删除构造函数的内容。

```
public function start():void {
    parent.addChild(ass);
} 
```

在你的课堂之外，你必须这样做。

```
var o:childboy = new childboy();
addChild(o);
o.start(); 
```

# 7zip - 有没有办法将文件夹添加到现有的 7za 存档？

> ID：16025334
> 
> 赞同：2
> 
> 时间：2013-04-15T21:54:10.000
> 
> 标签：7zip, zipfile

我尝试使用命令提示符下的以下命令将新文件夹添加到现有的 7za 存档中：

```
7za.exe a repo.zip \res\pub\newfolder newfolder 
```

上述命令将文件夹添加到 repo.zip 的根目录。我的意图是将新文件夹添加到位置：repo.zip 内的 \res\pub\folder

任何人都可以建议或给我一个正确的命令来将文件夹添加到存档的特定路径吗？

谢谢， 普拉迪普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-19T17:58:51.560

尝试创建用于更新目标存档的源位置文件夹。

例如

7za.exe "x:\destination_archive.7z" -up1q0r2x1y2z1w2 "c:\source_folder\*" -t7z -ms=off -mx1

我每天都使用这行代码来更新 7-zip 存档。您需要根据需要调整“-u”参数。

# css - CSS背景图片问题

> ID：16025336
> 
> 赞同：1
> 
> 时间：2013-04-15T21:54:53.423
> 
> 标签：css, background-image

所以我有一个带有覆盖整个页面的背景图像的包装器 div。这通常有效......我可以最大化浏览器并且背景完全覆盖，但是如果有滚动，图像会在滚动点停止。

此图像显示了[jsFiddle example/1](http://jsfiddle.net/2b3sB/1/)的滚动和间隙： ![在此处输入图像描述](https://i.stack.imgur.com/MYDOn.jpg)

```
#wrapper
{
    background: url("../../Images/bgMain.jpg") no-repeat 50% 0 fixed;
    background-size: cover;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    width: 100%;
} 
```

和内部 div

```
#inner
{
    margin: 0 auto;
    height: 100%;
    width: 980px;
} 
```

任何意见将是有益的。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T21:56:43.060

问题似乎是 .inner 上的固定宽度

```
.inner{
    //...
    width:980px;//this appears to be breaking the css3 background-size
} 
```

一种可能的解决方案是在 .wrapper 上应用 min-width

```
#wrapper {
    background: url("http://placekitten.com/400/300") no-repeat 50% 0 scroll;
    background-size: cover;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    width: 100%;
    min-width:980px;
} 
```

然而，这意味着你的可爱猫在小屏幕上会很大（但由于你在 .inner 上应用了固定宽度，这可能无关紧要）

[见小提琴](http://jsfiddle.net/2b3sB/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:42:40.060

我最近做了一些可能会做你想做的事情 - 任何事情都值得一试，对吧？

```
 background: #000 url(**snip**) no-repeat 50% 0 fixed !important; 
```

尝试将**!important**添加到 CSS 的末尾，它会“覆盖”其他类的任何其他样式，等等。你永远不知道，它可能会起作用——但它也可能会破坏其他东西。

!important 的作用可以在[这里](https://stackoverflow.com/questions/9245353/what-does-important-in-css-mean)找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T18:13:09.410

虽然这不是我想要采取的路线......通过将图像及其所有参数设置在`body`而不是 div 中，我可以获得我正在寻找的行为。

我不知道为什么会这样......不知何故，body 的处理方式与 div 不同（尽管我确实有一个重置脚本，所以我不希望是这种情况）......

# r - 在 R 中解析这种平面文本格式的最佳方法是什么？

> ID：16025342
> 
> 赞同：1
> 
> 时间：2013-04-15T21:55:33.713
> 
> 标签：r, parsing, flat-file

```
1\. ZFP112
Official Symbol: ZFP112 and Name: zinc finger protein 112 homolog (mouse)[Homo sapiens]
Other Aliases: ZNF112, ZNF228
Other Designations: zfp-112; zinc finger protein 112; zinc finger protein 228
Chromosome: 19; Location: 19q13.2
Annotation: Chromosome 19NC_000019.9 (44830706..44860856, complement)
ID: 7771

2\. SEP15
15 kDa selenoprotein[Homo sapiens]
Chromosome: 1; Location: 1p31
Annotation: Chromosome 1NC_000001.10 (87328128..87380107, complement)
MIM: 606254
ID: 9403

3\. MLL4
myeloid/lymphoid or mixed-lineage leukemia 4[Homo sapiens]
Other Aliases: HRX2, KMT2B, MLL2, TRX2, WBP7
Other Designations: KMT2D; WBP-7; WW domain binding protein 7; WW domain-binding protein 7; histone-lysine N-methyltransferase MLL4; lysine N-methyltransferase 2B; lysine N-methyltransferase 2D; mixed lineage leukemia gene homolog 2; myeloid/lymphoid or mixed-lineage leukemia protein 4; trithorax homolog 2; trithorax homologue 2
Chromosome: 19; Location: 19q13.1
Annotation: Chromosome 19NC_000019.9 (36208921..36229779)
MIM: 606834
ID: 9757

37\. LOC100509547
hypothetical protein LOC100509547[Homo sapiens]
This record was discontinued.
ID: 100509547

43\. LOC100509587
hypothetical protein LOC100509587[Homo sapiens]
Chromosome: 6
This record was replaced with GeneID: 100506601
ID: 100509587 
```

我想获取基因名称（ZFP112、SEP15、MLL4）、位置字段（如果存在）、ID 字段，并跳过其他内容。所有像 scan() 这样的字符串实用程序似乎都面向更常规的数据。记录之间的空白行实际上是记录分隔符。我可以将它写入磁盘并使用 readLines() 将其读回，但我更喜欢从内存中执行它，因为我通过 HTTP 下载了它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T23:59:01.727

例如，从 中读取数据`"myfile.dat"`（或者`L`如果您之前已将其作为单独的行读取，则从下面开始）。现在提取那些以数字开头的行，后跟一个点，后跟一个空格，或者包含单词`Location:`或以 . 开头的行`ID:`。然后删除这些行中的所有内容，包括最后一个空格。创建一个组向量`g`，用于标识每个组件`v2`所属的组。（我们使用了这样一个事实，即每个组的开始字段以非数字开头，而其他字段以数字开头。）然后分成`v2`这些组。通过适当地插入一个 NA 来扩展 short 组件，`s`假设如果它的 short`Location:`丢失了。（我们假设第一个字段和`ID`字段不能丢失。）最后转置它，使字段在列中，案例在行中。

```
L <- readLines("myfile.dat")
v <- grep("^\\d+\\. |Location: |^ID: ", L, value = TRUE)
v2 <- sub(".* ", "", v)

g <- cumsum(regexpr("^\\D", v2) > 0)
s <- split(v2, g)
m <- sapply(s, function(x) if (length(x) == 2) c(x[[1]], NA, x[[2]]) else x)
t(m) 
```

使用帖子中的示例数据，我们从最后一行得到：

```
 [,1]           [,2]      [,3]       
1 "ZFP112"       "19q13.2" "7771"     
2 "SEP15"        "1p31"    "9403"     
3 "MLL4"         "19q13.1" "9757"     
4 "LOC100509547" NA        "100509547"
5 "LOC100509587" NA        "100509587" 
```

# javascript - 检测用户是否会离开像 Bounce Exchange 这样的网站

> ID：16025343
> 
> 赞同：7
> 
> 时间：2013-04-15T21:55:36.110
> 
> 标签：javascript, jquery

Bounce Exchange 找到了一种检测用户是否会离开网站的近乎完美的方法。他们基于跟踪鼠标手势、鼠标速度和浏览器平面的中断来执行此操作。如果他们检测到有人离开，他们会在灯箱上弹出一个弹出窗口。

我可以通过以下方式很好地模仿这一点：

```
$("body").mouseleave(function() {
    jQuery('#avoid-bounce').show();
}); 
```

唯一的问题是这很烦人。就算是抓住了人，离开身体的那一刻也会再次开火。

考虑鼠标速度并只允许事件触发一次的可能性有多大？我对 JavaScript 和 jQuery 还很陌生，但我正在学习。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-27T03:06:08.837

这正是[`.one()`](http://api.jquery.com/one/)为了：

```
$("body").one('mouseleave', function() {
    jQuery('#avoid-bounce').show();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T22:05:28.970

您可以在代码中添加标志：

```
$("body").mouseleave(function() {
    if ( jQuery('#avoid-bounce').data('shown') != true ) {
        jQuery('#avoid-bounce').data('shown', true).show();
    }
}); 
```

创建一个标志将确保`show()`代码不会被第二次调用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-14T10:56:22.807

或者您可以尝试 OuiBounce，反弹交换替代方案：[https ://github.com/carlsednaoui/bounce-exchange-alternative](https://github.com/carlsednaoui/bounce-exchange-alternative)

# java - 使用正则表达式 Java 在其他已知（但可选）字符串之间查找未知子字符串

> ID：16025347
> 
> 赞同：0
> 
> 时间：2013-04-15T21:55:40.753
> 
> 标签：java, regex

我需要在这种字符串中找到一个地方的名称（例如圣安东尼奥，但可以是任何名称）

1.  圣安东尼奥的天气如何
2.  明天圣安东尼奥的天气如何
3.  圣安东尼奥明天天气如何

使用这个 JAVA 正则表达式：

```
(What's|What is|What will be) the weather( tomorrow)?( in (\D*))? 
```

我分别得到：

1.  开始（） = 0，结束（） = 33

    ```
    group(0) = "What's the weather in San Antonio"

    group(1) = "What's"

    group(2) = "null"

    group(3) = " in San Antonio"

    group(4) = "San Antonio" 
    ```

2.  开始（） = 0，结束（） = 48

    ```
    group(0) = "What will be the weather in San Antonio tomorrow"

    group(1) = "What will be"

    group(2) = "null"

    group(3) = " in San Antonio tomorrow"

    group(4) = "San Antonio tomorrow" 
    ```

3.  开始（） = 0，结束（） = 48

    ```
    group(0) = "What will be the weather tomorrow in San Antonio"

    group(1) = "What will be"

    group(2) = " tomorrow"

    group(3) = " in San Antonio"

    group(4) = "San Antonio" 
    ```

如果句子总是以城市名称本身结束，那么问题可以很容易地解决，我会寻找“in”这个词，剩下的就是城市名称。但问题是，在第 2 句中，我无法理解“明天”是否存在以及如何将其从城市名称组中删除。

对于正则表达式测试，我正在使用此页面

[http://www.cis.upenn.edu/~matuszek/General/RegexTester/regex-tester.html](http://www.cis.upenn.edu/~matuszek/General/RegexTester/regex-tester.html)

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:02:22.340

以下应该适用于您的所有测试字符串：

```
(What's|What is|What will be) the weather( tomorrow)?( in (\D*?)( tomorrow)?$)? 
```

新结果（第 4 组永远是城市）：

1.  圣安东尼奥的天气如何

    ```
    start() = 0, end() = 33
    group(0) = "What's the weather in San Antonio"
    group(1) = "What's"
    group(2) = "null"
    group(3) = " in San Antonio"
    group(4) = "San Antonio"
    group(5) = "null" 
    ```

2.  明天圣安东尼奥的天气如何

    ```
    start() = 0, end() = 48
    group(0) = "What will be the weather in San Antonio tomorrow"
    group(1) = "What will be"
    group(2) = "null"
    group(3) = " in San Antonio tomorrow"
    group(4) = "San Antonio"
    group(5) = " tomorrow" 
    ```

3.  圣安东尼奥明天天气如何

    ```
    start() = 0, end() = 48
    group(0) = "What will be the weather tomorrow in San Antonio"
    group(1) = "What will be"
    group(2) = " tomorrow"
    group(3) = " in San Antonio"
    group(4) = "San Antonio"
    group(5) = "null" 
    ```

# ruby-on-rails - Rails - 在不同区域显示评论

> ID：16025349
> 
> 赞同：0
> 
> 时间：2013-04-15T21:55:50.613
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, models, posts

我试图创建一个系统，允许运动员响应他们的教练训练计划，为此我允许教练创建内容，但是我正在使用基于博客的系统来创建它......目前页面显示如下

内容标题

内容信息1...

内容信息 2...

内容信息 3...

注释...

评论 1

评论 2

评论 3

。ETC

但是我想设置它，以便每个帖子最多只能有 7 条评论，并且每个帖子都像这样设置......

内容标题

内容信息1...

评论 1

内容信息 2...

评论 2

内容信息 3...

评论 3

。ETC

我意识到这可能不是我想要的最好方法，但它有效（只是不会出现在我想要的地方）我确实做了创建更多模型的实验，但每当我尝试运行超过每个帖子有 1 个评论系统。我想知道我是否可以帮助解决这个问题，或者我可以采取什么方法来使这更容易，或者如果模型可以工作并且我只是做错了什么，甚至更好？告诉我这是否还不足以提供足够的信息，我会尝试提供更多信息！谢谢

.

.

编辑：

我使用的模型是程序 - 与本周的训练计划一样 教练 - 向骑手输入数据的教练 车手 - 用他们自己的数据评论教练数据。

我不确定到底需要什么文件，所以我已经包含了我要推送到的 github 页面的链接（[https://github.com/effectonedesign/coacheasy1](https://github.com/effectonedesign/coacheasy1)），如果需要任何其他信息，请告诉我！

我喜欢“头脑”所说的话，但是，我已经完成了所说的一切，在我的 def 显示（程序控制器）中说有一个错误，我不断收到这条消息 undefined method `coaches' for nil:NilClass 一切都是相同的对他来说，但我遇到了问题，我真的很感谢你的帮助！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T00:56:50.840

我可能会为上述创建 3 个模型`TrainingPlan`，`Section`（或内容、text_block 等）和`Comment`.

然后执行以下操作

*   TrainingPlan has_many :sections
*   部分 belongs_to :training_plan
*   Section has_one :comment （如果每个部分只允许 1 条评论，否则使用 has_many）
*   评论belongs_to :section

现在，要实现您想要的格式，请在您的视图中执行以下操作：

```
<% @training_plan.sections.each do |section| %>
  <%= section.text %>
  <%= section.comment.text %>
<% end %> 
```

如果您允许多条评论：

```
<% @training_plan.sections.each do |section| %>
  <%= section.text %>
  <% section.comments.each do |comment| %>
    <%= comment.text %>
  <% end %>
<% end %> 
```

### 意见表

我尚未测试以下内容，因此您可能需要调整一些部分。
训练计划控制器：

```
def show
  # using includes will query the database 3 times only (once for each table) rather than
  # querying it 1 + N + N (in this case 7 sections, 7 comments possibly, so 15 times)
  @training_plan = TrainingPlan.includes(:sections, sections: :comment).find(params[:id])
  @sections = @training_plan.sections
  @sections.each do |section|
    # only build a new comment if there is no comment for that section already
    section.build_comment unless section.comment
  end
end 
```

在你看来views/training_plans/show.html.erb

```
<%= @training_plan.title %> # or whatever
<% @sections.each do |section|
  <%= @section.content %>
  <% if section.comment %>
    <%= section.comment.content %>
  <% else %>
    <%= render 'comments/form', comment: section.comment %> # or wherever you have the form
  <% end %>
<% end %> 
```

意见/评论/_form.html.erb

```
# This might break if you have a separate comment action somewhere which passes an
# instance variable @comment to the form
<%= form_for comment do |f| %>
  # normal form stuff
<% end %> 
```

如果一切正常，那么在您的培训计划显示页面上，您应该会看到每个部分，如果有评论，则将呈现该评论，否则将显示一个表格。

根据您的路线，您可能需要运行`rake routes`并查看您的评论创建操作在哪里，然后将其传递给表单`<%= form for comment, url: some_url_helper_here do |comment| %>`

如果是我，我会通过 JavaScript 创建添加评论部分，有点像在[这个 railscast](http://railscasts.com/episodes/197-nested-model-form-part-2)中，但由于你是 RoR 的新手，我试图让它保持简单。

# r - 在 R 中插值数据

> ID：16025357
> 
> 赞同：6
> 
> 时间：2013-04-15T21:56:23.357
> 
> 标签：r, gaussian, interpolation

假设我在 R 中有一个 3 x 5 的矩阵：

```
4  5  5  6  8
3  4  4  5  6
2  3  3  3  4 
```

我想在这些值之间进行插值以创建大小为 15 x 25 的矩阵。我还想指定插值是线性的、高斯的等。我该怎么做？

例如，如果我有一个像这样的小矩阵

```
2 3
1 3 
```

我希望它变成 3 by 3，那么它可能看起来像

```
 2    2.5   3
  1.5  2.2   3
  1    2     3 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T22:40:09.970

```
app <- function(x, n) approx(x, n=n)$y # Or whatever interpolation that you want

apply(t(apply(x, 1, function(x) app(x, nc))), 2, function(x) app(x, nr))
     [,1] [,2] [,3]
[1,]  2.0 2.50    3
[2,]  1.5 2.25    3
[3,]  1.0 2.00    3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:07:06.397

很久以前我写了一个类似的玩具，只是我从来没有开始定义插值函数。还有`raster::disaggregate`。

```
zexpand<-function(inarray, fact=2, interp=FALSE,  ...)  {
# do same analysis of fact to allow one or two values, fact >=1 required, etc.
fact<-as.integer(round(fact))
switch(as.character(length(fact)),
            '1' = xfact<-yfact<-fact,
            '2'= {xfact<-fact[1]; yfact<-fact[2]},
            {xfact<-fact[1]; yfact<-fact[2];warning(' fact is too long. First two values used.')})
if (xfact < 1) { stop('fact[1] must be > 0') } 
if (yfact < 1) { stop('fact[2] must be > 0') }
bigtmp <- matrix(rep(t(inarray), each=xfact), nrow(inarray), ncol(inarray)*xfact, byr=T)  #does column expansion
bigx <- t(matrix(rep((bigtmp),each=yfact),ncol(bigtmp),nrow(bigtmp)*yfact,byr=T))
# the interpolation would go here. Or use interp.loess on output (won't
# handle complex data). Also, look at fields::Tps which probably does
# a much better job anyway.  Just do separately on Re and Im data
return(invisible(bigx))
} 
```

# ios - 带有多个目标的苹果或谷歌地图的 ios 导航

> ID：16025358
> 
> 赞同：0
> 
> 时间：2013-04-15T21:56:26.787
> 
> 标签：ios, map, routes

我可以从我的应用程序打开苹果地图应用程序来计算从当前位置到我的地标的路线，它工作正常。

但现在我有一个按给定顺序排列的几个地标的列表，并希望将它们发送到地图应用程序，以用作从第一个地标到最后一个地标的路线之间的目标。这可能吗？

作为替代方案，我可以在 safari 上启动谷歌地图，它允许在 url 中设置多个目标： [https ://maps.google.com/maps?saddr=first&daddr=second&daddr=third+to:final&hl=en](https://maps.google.com/maps?saddr=first&daddr=second&daddr=third+to:final&hl=en)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-09T22:55:56.920

我使用了下面的代码，它运行了几个月，但现在新的在线版本的谷歌地图不再支持这样请求的多个目标。

因此您需要像这样调整您的网址：https: [//www.google.com/maps/dir/longitude,latitude/longitude,latitude](https://www.google.com/maps/dir/longitude,latitude/longitude,latitude)

在这里您可以找到有关 url 搜索的更多信息：http: [//gearside.com/easily-link-to-locations-and-directions-using-the-new-google-maps/](http://gearside.com/easily-link-to-locations-and-directions-using-the-new-google-maps/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T18:54:05.157

我目前的解决方案是使用链接在 safari 上打开谷歌地图，我在其中添加 +to: 目标：

```
for (int i == 0; int i < route.count; i++) {
        if (i == 0) {
            NSString *start = [NSString stringWithFormat:@"http://maps.google.com/maps?saddr=%f,%f", latitude, longitude];
            locationString = start;
        }

        if (i != 0 && i != route.count - 1) {
            NSString *between = [NSString stringWithFormat:@"+to:%f,%f", latitude, longitude];
            locationString = [locationString stringByAppendingString:between];
        }

        if (i == route.count - 1) {
            NSString *end = [NSString stringWithFormat:@"&daddr=%f,%f", latitude, longitude];
            NSString *type = @"&dirflg=w";
            locationString = [locationString stringByAppendingString:end];
            locationString = [locationString stringByAppendingString:type];
        }
    }

NSURL *url = [NSURL URLWithString:locationString];
[[UIApplication sharedApplication] openURL:url]; 
```

如果我使用的是 iOS 5 或 6 sSimulator，它会在移动版 maps.google.com 上的 Safari 中打开链接，这可以正常工作

但是当我在 iOS 5 设备上运行它时，并且可能在安装了 Google Maps 的 iOS6 设备上运行它时，链接在 Google Maps 中开始，并且路线绘制错误（尤其是有很多目标）并且中间的目标没有注释......

有人知道如何强制在 Safari 中打开链接吗？

# php - PHP PDO 占位符被替换为相同的值

> ID：16025363
> 
> 赞同：0
> 
> 时间：2013-04-15T21:56:52.920
> 
> 标签：php, mysql, pdo

PHP PDO 显示一些莫名其妙的行为。参数占位符被替换为相同的值。

$查询

```
UPDATE `newsletters` SET `title` = :title , `scheduled` = :scheduled , `modified` = :modified WHERE `id` = :id 
```

$参数

```
Array
(
    [:title] => New Newsletter22
    [:scheduled] => 2013-04-15 21:47:00
    [:modified] => 2013-04-15 21:47:51
    [:id] => 35
) 
```

功能

```
public  static function execute($query=null,$parameters=array())
{
    global $dbnew;

    $statement= $dbnew->prepare($query);

        foreach($parameters as $k=>$v){
            if(is_array($v)){
                $statement->bindParam($k, $v[0],$v[1]);
            }else{
                $statement->bindParam($k, $v);
            }
        }

    $statement->execute();
    return $statement;
} 
```

执行查询

```
1132 Query  UPDATE `newsletters` SET `title` = '35' , `scheduled` = '35' , `modified` = '35' WHERE `id` = '35' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T23:03:16.380

该`bindParam`方法绑定对变量的引用，而不是变量的值。

您的循环在每次迭代时`foreach`更新 的值。`$v`

由于`bindParam`在您实际执行查询之前不会绑定值，因此示例中所有绑定参数的值将相同。它们都将绑定到`$v`您上次循环迭代的值。

用于`bindValue`绑定变量的实际值而不是引用。

`$statement->bindValue($k, $v);`

来自[php.net 文档](http://php.net/manual/en/pdostatement.bindparam.php)：

> **bool PDOStatement::bindParam**
> 将 PHP 变量绑定到用于准备语句的 SQL 语句中的相应命名或问号占位符。与 PDOStatement::bindValue() 不同，该变量被绑定为引用，并且只会在调用 PDOStatement::execute() 时进行评估。

# c++ - 为自定义流类设置 std::io_base 标志

> ID：16025364
> 
> 赞同：1
> 
> 时间：2013-04-15T21:56:56.457
> 
> 标签：c++, iostream, cout, flags, ostringstream

我有一个名为 Stream 的自定义类

```
class Stream
public:
    Stream& operator<<(int i) { stream_ << i; return *this;}
            template <typename CustomClass>
            Stream& operator<<(const CustomClass& c) { stream_ << c.toString() /* assume this template always have toString(); return *this; }
private:
    std::stringstream stream_;
}; 
```

这是我实际拥有的一个非常基本的例子。我正在尝试设置 std::ios_base 标志，如下所示：

```
Stream() << 1 << std::hex << 2; 
```

使用运算符；

```
Stream& operator<<(std::ios_base& b) { stream_.setf(b.flags()); return *this; } 
```

据我了解，因为 std::hex 返回 std::ios_base 所以它应该调用它并设置流的标志。但它总是调用模板。注意：如果我删除此模板，一切都会像您期望的那样工作，但有没有办法两者兼得？

如果您需要更多说明，请随时进一步询问

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-21T20:31:31.837

IOStream 操纵器不是 type 的对象`std::ios_base`，它们是获取和返回`std::ios_base`引用的函数。因此，当您想要对这些对象进行流插入时，您必须重载*函数指针*：

```
Stream& operator<<(std::ios_base& (*manip)(std::ios_base&))
//                 ^^^^^^^^^^^^^^ ^^^^^^^^^^^^^^^^^^^^^^^^
{
    manip(this->stream);
    return *this;
} 
```

# c# - 滚动后Datagrid选择了错误的行

> ID：16025366
> 
> 赞同：9
> 
> 时间：2013-04-15T21:57:24.973
> 
> 标签：c#, winforms, datagrid

我在绑定到地址列表的 WinForm 应用程序中有一个数据网格。地址列表很长，所以我必须滚动选择我想要的地址。但是，在我滚动并找到我想要的地址并选择它之后，数据网格将选择第一次加载表单时位于网格上相同位置的地址。我想知道我做错了什么以及如何获得我想要的结果。

```
 // 
// bindingSource1
// 
   private System.Windows.Forms.BindingSource bindingSource1;
   this.bindingSource1 = new System.Windows.Forms.BindingSource(this.components);
this.bindingSource1.DataSource = typeof(ViewModels.ListAddressViewModel);

            // 
        // dataGridView1
        // 
        this.dataGridView1.AllowUserToAddRows = false;
        this.dataGridView1.AllowUserToDeleteRows = false;
        this.dataGridView1.AllowUserToOrderColumns = true;
        this.dataGridView1.ColumnHeadersHeightSizeMode = System.Windows.Forms.DataGridViewColumnHeadersHeightSizeMode.AutoSize;
        this.dataGridView1.Columns.AddRange(new System.Windows.Forms.DataGridViewColumn[] {
        this.HouseNumber,
        this.Prefix,
        this.StreetName,
        this.StreetType,
        this.StreetSuffix,
        this.SecondaryType,
        this.SecondaryNumber,
        this.City,
        this.State,
        this.ZipCode});
        this.dataGridView1.DataBindings.Add(new System.Windows.Forms.Binding("DataSource", this.bindingSource1, "AddressList", true, System.Windows.Forms.DataSourceUpdateMode.OnPropertyChanged));
        this.dataGridView1.Dock = System.Windows.Forms.DockStyle.Fill;
        this.dataGridView1.Location = new System.Drawing.Point(0, 50);
        this.dataGridView1.MultiSelect = false;
        this.dataGridView1.Name = "dataGridView1";
        this.dataGridView1.ReadOnly = true;
        this.dataGridView1.RowHeadersVisible = false;
        this.dataGridView1.SelectionMode = System.Windows.Forms.DataGridViewSelectionMode.FullRowSelect;
        this.dataGridView1.ShowCellErrors = false;
        this.dataGridView1.ShowCellToolTips = false;
        this.dataGridView1.ShowEditingIcon = false;
        this.dataGridView1.ShowRowErrors = false;
        this.dataGridView1.Size = new System.Drawing.Size(1014, 421);
        this.dataGridView1.TabIndex = 2;
        this.dataGridView1.SelectionChanged += new System.EventHandler(this.dataGridView1_SelectionChanged);

                //Selection Change Handler
    private void dataGridView1_SelectionChanged(object sender, EventArgs e)
    {
        if (dataGridView1.SelectedRows.Count > 0)
        {
            _vm.SelectedAddress = (Address)dataGridView1.SelectedRows[0].DataBoundItem;
        }
    }

//My View Model (_vm) 
public class ListAddressViewModel
{
      public IList<Address> AddressList { get; set; }
      private IAddressRepository _repo;
      public Address SelectedAddress {get;set;}

      public ListAddressViewModel()
      {
         AddressList = new List<Address>();
      }

      public ListAddressViewModel(IAddressRepository AddrRepo)
          :this()
      { 
          _repo = AddrRepo
          init();
      }

      private void init()
      {
         if(_repo != null)
         { 
            AddressList = _repo.FindAll();
         }
      }

      ... etc..
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T19:07:11.030

像这样的东西......

```
 if (dataGridView1.SelectedRows.Count > 0)
    {
    _vm.SelectedAddress =(Address)dataGridView1.Rows[dataGridView1.CurrentRow.Index].Cells["Address"].Value.ToString();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T07:31:21.300

尝试使用行的选定索引而不是选定的行集合。由于网格的虚拟化，我在使用 Telerik 的 gridview 时遇到了问题。

有很多方法可以使用被选中的当前行的索引，但这里还有另一种方法。

```
 private void dataGridView1_CellClick(object sender, DataGridViewCellEventArgs e)
    {
       //e holds column and row index's selected
    } 
```

我不能说更多，因为我不知道您的代码的整个范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T07:36:58.300

String AddressLine1 = dataGridView1.SelectedRows[0].Cells[Columnindex].Value.ToString()

字符串城市 = dataGridView1.SelectedRows[0].Cells[Columnindex].Value.ToString()

String PostCode = dataGridView1.SelectedRows[0].Cells[Columnindex].Value.ToString()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T15:08:53.700

可能不是一个很有帮助的答案，但我无法复制您的问题。我已经发布了我使用的代码，并且每次都得到了正确的选择。我所做的唯一更改是将 datagridview1.DataSource 更改为 ListAddressViewModel 的实例而不是类型 - 这本身可能无法解决问题，因为它只是我输入数据的一种方式。无论如何，这是我的代码的价值！希望它会帮助别人。 **注意**我已经注释掉了我在*表单*代码中进行修改的原始代码。

```
public class Address
{
    public string AddressLine1 { get; set; }
    public string City { get; set; }
    public string PostCode { get; set; }
}

public class ListAddressViewModel
{
    public IList<Address> AddressList { get; set; }
    public Address SelectedAddress { get; set; }

    public ListAddressViewModel()
    {
        AddressList = new List<Address>();
        init();
    }

    private void init()
    {
        AddressList = new List<Address>
        {
            new Address { AddressLine1 = "Address 1", City = "City 1", PostCode = "PostCode 1" },
            new Address { AddressLine1 = "Address 2", City = "City 2", PostCode = "PostCode 2" },
            new Address { AddressLine1 = "Address 3", City = "City 3", PostCode = "PostCode 3" },
            new Address { AddressLine1 = "Address 4", City = "City 4", PostCode = "PostCode 4" },
            new Address { AddressLine1 = "Address 5", City = "City 5", PostCode = "PostCode 5" },
            new Address { AddressLine1 = "Address 6", City = "City 6", PostCode = "PostCode 6" },
            new Address { AddressLine1 = "Address 7", City = "City 7", PostCode = "PostCode 7" },
            new Address { AddressLine1 = "Address 8", City = "City 8", PostCode = "PostCode 8" },
            new Address { AddressLine1 = "Address 9", City = "City 9", PostCode = "PostCode 9" },
            new Address { AddressLine1 = "Address 10", City = "City 10", PostCode = "PostCode 10" },
            new Address { AddressLine1 = "Address 11", City = "City 11", PostCode = "PostCode 11" },
            new Address { AddressLine1 = "Address 12", City = "City 12", PostCode = "PostCode 12" },
            new Address { AddressLine1 = "Address 13", City = "City 13", PostCode = "PostCode 13" },
            new Address { AddressLine1 = "Address 14", City = "City 14", PostCode = "PostCode 14" },
            new Address { AddressLine1 = "Address 15", City = "City 15", PostCode = "PostCode 15" },
            new Address { AddressLine1 = "Address 16", City = "City 16", PostCode = "PostCode 16" },
            new Address { AddressLine1 = "Address 17", City = "City 17", PostCode = "PostCode 17" },
            new Address { AddressLine1 = "Address 18", City = "City 18", PostCode = "PostCode 18" },
            new Address { AddressLine1 = "Address 19", City = "City 19", PostCode = "PostCode 19" }
        };
    }

}

public partial class Form3 : Form
{
    private System.Windows.Forms.BindingSource bindingSource1;
    private ListAddressViewModel VM { get; set; }
    private DataGridView dataGridView1;

    public Form3()
    {
        InitializeComponent();

        this.dataGridView1 = new DataGridView();
        this.VM = new ListAddressViewModel();
        this.bindingSource1 = new System.Windows.Forms.BindingSource(this.components);
        //this.bindingSource1.DataSource = typeof(ListAddressViewModel);
        this.bindingSource1.DataSource = this.VM;

        this.dataGridView1.AllowUserToAddRows = false;
        this.dataGridView1.AllowUserToDeleteRows = false;
        this.dataGridView1.AllowUserToOrderColumns = true;
        this.dataGridView1.ColumnHeadersHeightSizeMode = System.Windows.Forms.DataGridViewColumnHeadersHeightSizeMode.AutoSize;
        //this.dataGridView1.Columns.AddRange(new System.Windows.Forms.DataGridViewColumn[] {
        //    this.AddressLine1,
        //    this.City,
        //    this.PostCode});
        this.dataGridView1.DataBindings.Add(new System.Windows.Forms.Binding("DataSource", this.bindingSource1, "AddressList", true, System.Windows.Forms.DataSourceUpdateMode.OnPropertyChanged));
        //this.dataGridView1.Dock = System.Windows.Forms.DockStyle.Fill;
        //this.dataGridView1.Location = new System.Drawing.Point(0, 50);
        this.dataGridView1.Location = new System.Drawing.Point(33, 27);
        this.dataGridView1.MultiSelect = false;
        this.dataGridView1.Name = "dataGridView1";
        this.dataGridView1.ReadOnly = true;
        this.dataGridView1.RowHeadersVisible = false;
        this.dataGridView1.SelectionMode = System.Windows.Forms.DataGridViewSelectionMode.FullRowSelect;
        this.dataGridView1.ShowCellErrors = false;
        this.dataGridView1.ShowCellToolTips = false;
        this.dataGridView1.ShowEditingIcon = false;
        this.dataGridView1.ShowRowErrors = false;
        //this.dataGridView1.Size = new System.Drawing.Size(1014, 421);
        this.dataGridView1.Size = new System.Drawing.Size(345, 150);
        this.dataGridView1.TabIndex = 2;
        this.dataGridView1.SelectionChanged += new System.EventHandler(this.dataGridView1_SelectionChanged);
        this.Controls.Add(this.dataGridView1);
    }

    //Selection Change Handler
    private void dataGridView1_SelectionChanged(object sender, EventArgs e)
    {
        if (dataGridView1.SelectedRows.Count > 0)
        {
            var addr = (Address)dataGridView1.SelectedRows[0].DataBoundItem;
            var msg = String.Format("{0}, {1}, {2}", addr.AddressLine1, addr.City, addr.PostCode);
            MessageBox.Show(msg, "Message", MessageBoxButtons.OK);
        //    _vm.SelectedAddress = (Address)dataGridView1.SelectedRows[0].DataBoundItem;
        }
    }
} 
```

# python - 在python中将文件下载为字符串

> ID：16025368
> 
> 赞同：8
> 
> 时间：2013-04-15T21:57:39.813
> 
> 标签：python, string, file, python-3.x, download

我想将文件作为字符串下载到 python。我尝试了以下方法，但似乎不起作用。我做错了什么，或者我还能做什么？

```
from urllib import request

webFile = request.urlopen(url).read()
print(webFile) 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-15T21:59:14.097

以下示例有效。

```
from urllib.request import urlopen

url = 'http://winterolympicsmedals.com/medals.csv'
output = urlopen(url).read()
print(output.decode('utf-8')) 
```

或者，您可以使用[请求](http://docs.python-requests.org/en/latest/index.html)，它提供了更易于阅读的语法。请记住，请求需要您安装额外的依赖项，这可能会增加部署应用程序的复杂性，具体取决于您的生产环境。

```
import requests

url = 'http://winterolympicsmedals.com/medals.csv'
output = requests.get(url).text
print(output) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-16T02:40:25.510

在 Python3.x 中，像这样使用包 'urllib'：

```
from urllib.request import urlopen

data = urlopen('http://www.google.com').read() #bytes
body = data.decode('utf-8') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T22:06:29.310

另一个很好的库是[http://docs.python-requests.org](http://docs.python-requests.org)

它不是内置的，但我发现它比 urllib* 更有用。

# git - 将提交移回主控

> ID：16025372
> 
> 赞同：4
> 
> 时间：2013-04-15T21:58:10.163
> 
> 标签：git

我不小心向一个我不打算的分支提交了一系列提交。我本来打算把它们放进去，`master`但最终把它们放在我们将调用的共享分支上`integ`。我想找到一种方法来删除这些提交`integ`并将它们放在上面`master`；我希望他们永远不会存在于`integ`.

两者都已在 github 上共享`integ`。`master`该`integ`分支由我们的 CI 环境使用。

我读过这`git rebase`是一个选项，但从我读过的内容来看，它将使 integ 分支无法继续使用，因为它的历史记录中有已被重新播放到`master`. 具体来说，我指的是：

[http://blog.evan.pro/a-simple-explanation-of-git-rebase](http://blog.evan.pro/a-simple-explanation-of-git-rebase)

它在哪里说：

> 此时不要从原点/功能/我的主题拉取、合并或变基！！！
> 
> 为什么不？因为 Git 只是想，“哦，看，origin/feature/my-topic 有两个提交（D 和 E），我们在 feature/my-topic 本地没有。让我们把它们合并进去！”……虽然这是个问题，因为我们确实有这些提交，但是当我们运行 git rebase 时，它​​们的哈希值被重新写入 F 和 G。

我的问题是：

*   我怎样才能恢复这些分支的状态，以使 10 次提交`integ`最终出现`master`并且`integ`看起来好像从未有过这些提交？
*   那可能吗？
*   如果没有，我如何回到可以继续的地方？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T01:30:13.513

以下是将最后 3 个提交从`integ`移至`master`.

```
git checkout master
git cherry-pick integ^^
git cherry-pick integ^
git cherry-pick integ
git checkout integ
git reset --hard HEAD~3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T22:02:34.750

你不能从 git 的历史中“删除”一些东西。您可以`revert`使用提交

```
git revert HEAD~n 
```

或者

```
git revert $SHA1_HASH 
```

完成此操作后，您必须从提交中创建补丁并手动将它们应用到您的 master 分支或 use `git cherry-pick`，这基本上是相同的（感谢 sleske 的提及！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T22:26:48.560

如果您想将提交从“integ”应用到“master”，您应该进行合并。首先尝试执行此操作以确保不会丢失更改。如果没有人对 master 进行提交，则将是快进合并。然后你可以担心你将如何从 integ 中删除这些提交（我不知道如何）。

# wpf - WPF 中的触摸/手势支持与 Windows Store API 相比如何

> ID：16025373
> 
> 赞同：2
> 
> 时间：2013-04-15T21:58:14.020
> 
> 标签：wpf, wpf-controls

我一直在寻找，但尚未找到 Windows Store 应用程序 API 和 WPF 之间的触摸/手势支持差异的很好比较。

我已经看到 WPF 包含一些基本的触摸事件，但是 WPF 控件是否处理诸如滑动、按住和点击之类的手势，或者我们是否需要使用基本的触摸事件来实现我们自己对这些 getsures 的识别？

谢谢加文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-25T11:06:44.513

以下是 Windows Store App 控件的完整列表： [wpf 控件](http://msdn.microsoft.com/en-us/library/windows/apps/hh465351.aspx)

在开发 Windows 应用商店应用程序时，您将使用那里的控件。它们（如果适用）内置了手势支持。

# iphone - 如何允许在 UIWebView 中进行 HTML 渲染？

> ID：16025374
> 
> 赞同：0
> 
> 时间：2013-04-15T21:58:19.427
> 
> 标签：iphone, html, uiwebview

我有一个`UIWebView`在其中显示数组中的某个对象（在本例中为电子邮件正文）。我正在使用以下代码执行此操作：

```
NSString *string = [messages objectAtIndex:count-row-1];
NSString *string2 = [string stringByReplacingOccurrencesOfString:@"\n" withString:@"<br/>"];

[self.webView loadHTMLString:string2 baseURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] bundlePath]]]; 
```

我当前使用的这段代码的问题是，当邮件正文包含一些富文本或大量 HTML 图像、格式等时，它无法正确显示邮件。

当我说“它没有正确显示到消息中”时，我的意思是忽略上述所有格式，只提取并显示图像中的纯文本。

这是我将消息正文加载到`messages`数组中的方式：

```
for (CTCoreMessage *msg in messageSet) {
                [messages addObject:[msg bodyPreferringPlainText:&isHTML]]; 
```

`isHTML`是一个`BOOL`设置`NO`，我不知道这是否是一个问题？

我现在尝试将 设置`isHTML` `BOOL`为`YES`，并且它解决了一半的问题。现在，显示了一些（大多数）格式（CSS/图像/富文本），但不幸的是，在一些消息的中间，我得到这样的标签，在中间没有位置：

```
style="margin-bottom: 15px; width: 570px; text-align: left; margin-left: auto; margin-right: auto;" 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:14:50.150

考虑[`htmlBody`](http://libmailcore.com/api/Classes/CTCoreMessage.html#//api/name/htmlBody)on`CTCoreMessage`而不是 的方法`bodyPreferringPlainText:`，它在可能的情况下更喜欢纯文本。如果您故意拉出消息正文的纯文本版本，您将永远看不到格式。

# .net - 如何使用 DataContractJsonSerializer 创建嵌套的 JSON 对象和数组？

> ID：16025376
> 
> 赞同：0
> 
> 时间：2013-04-15T21:58:29.313
> 
> 标签：.net, json, datacontractjsonserializer

我想用这样的嵌套数组和对象创建 JSON：

```
{"orderId": "AF34235", 
 "recipients": [{"name": "Jane Doe", "address": "123 Main"},
                {"name": "Bob Doe", "address": "456 Broad"}],
 "sender": {"id": 123, "address": "789 Spruce"}
} 
```

这可能`DataContractJsonSerializer`吗？如果是这样，我的实体应该是什么样子？

```
[DataContract]
class Order
{
    [DataMember(Name = "orderId")]
    public string OrderId { get; set; }

    // what next?

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:08:40.500

> 我的实体应该是什么样子？

看到[这个网站http://json2csharp.com/](http://json2csharp.com/)

```
public class Recipient
{
    public string name { get; set; }
    public string address { get; set; }
}

public class Sender
{
    public int id { get; set; }
    public string address { get; set; }
}

public class RootObject
{
    public string orderId { get; set; }
    public List<Recipient> recipients { get; set; }
    public Sender sender { get; set; }
} 
```

# spring - 最佳实践：Spring Autowired、具体类和 Builder

> ID：16025377
> 
> 赞同：1
> 
> 时间：2013-04-15T21:58:32.683
> 
> 标签：spring, interface, builder, autowired, concreteclass

我们有一个接口：

```
public interface NotifyService {

  public void send(); 
```

以及一个实现它的类

```
public class EmailNotifyService implements NotifyService {

  private EmailBuilder _builder;

  @Autowired
  PersonRepository _personRepository;

  ... other Autowired Repositories ...

  public EmailNotifyService(EmailBuilder builder) {
   this._builder = builder;
  }

  public void send() {
    // send mail using _builder.getRecipient().getEmailAddress(), etc.
  } 
```

我们曾经使用构建器实例化 EmailNotifyService：

```
public class EmailBuilder {

  private Person _recipient;

  private EmailType _type;

  private Event _event;

  public EmailNotifyService build() {
    return new EmailNotifyService(this);
  }

  public EmailBuilder recipient(Person recipient) {
    this._recipient = recipient;
    return this;
  } 
```

... 等等。但是现在，我们不再使用 build() 创建一个新的 EmailNotifyService，而是尝试使用 Autowire 和 Spring。问题是在我们应用程序的其他任何地方，我们都是自动装配接口，而不是类。从我读到的内容来看，总的来说这是一个好主意。事实上，我已经尝试将 NotifyService 重写为 Abstract 类，然后让 EmailNotifyService 扩展它。但是 Spring 没有正确地自动装配它，它没有像为接口创建代理一样，而且我所有的 Autowired 字段都是空的。

所以看起来我们被自动装配 NotifyService 接口所困。美好的。我无法理解的是 - 我怎样才能将我用来分配给构建器的数据 - Person、EmailType 和 Event - 放入 Spring Autowired 接口中？

我想我可以将接口定义更改为具有 setPerson()、setEmailType() 等，但除了非常丑陋之外，它首先违背了使用接口的目的。不同的 NotifyService（例如 WebServiceNotifyService 或 RestNotifyService）晚上不需要该信息。

是否有任何优雅的最佳实践方法来做到这一点？

谢谢。

**编辑**

我正在使用注释，很少使用 xml。而且我也在使用事务管理，这可以解释为什么抽象类没有正确自动装配？这是我在 xml 中唯一的相关信息：

```
<context:annotation-config />  
<context:component-scan base-package="com.myco.myapp" />  
<tx:annotation-driven transaction-manager="transactionManager"/> 
```

当我说“自动装配无法正常工作”时，我的意思是当我尝试自动装配抽象类时，Spring 似乎并没有像为接口创建代理一样，而且我的 EmailNotifyService 中的所有 Autowired 字段（ PersonRepository, others ...) 为空。当我使用接口时，所有 Autowired 字段都正确连接。

但我的主要问题是我曾经明确地使用具体类，使用构建器直接创建一个新的 EmailNotifyService()，并将信息传递给它——Person、EmailType 和 Event。这些只是普通的豆子。在 EmailNotifyService 中没有针对它们的 setter/getter，但是有 EmailBuilder，它曾经存在于 EmailNotifyService 中。

但现在我使用的是 NotifyService 接口，它对 Person、EmailType 或 Event 一无所知。但我需要这些信息才能使 EmailNotifyService 工作。

所以我的问题是，如果我使用 Spring 像这样自动装配我的 EmailNotifyService：

```
@Autowired
@Qualifier("email") // so Spring knows I want to use the EmailNotifyService implementation
NotifyService _notifyService 
```

我如何设置 Person、EmailType 和 Event 数据，因为 NotifyService 对它们一无所知？

目前我们在 web 应用程序中使用邮件服务，但理论上邮件服务应该能够独立工作。无论如何，我看不到请求范围的 bean 如何在这里帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:26:57.273

罗伯特不正确自动装配是什么意思？你有什么错误吗？

一般来说，接口和类的自动装配都可以在 Spring 中工作，除非你有一些 autoproxy 配置的例子`@Transactional`。

您不需要在您的界面中有 setPerson()、setEmailType() 等，而是在需要它们的具体类中自动装配它们。

但似乎 Person 不是一个服务，而是一个持有数据及其特定于请求的 bean。如果您的应用程序是 Web 应用程序，那么请查看请求范围代理以注入 Person like bean。

* * *

因此，您正在使用事务，这就是基于类的注入失败的原因。添加`proxy-target-class="true"`到`tx:annotation-driven`.

关于您的注入，`Person`然后`EmailType`您必须对 bean 执行此操作`EmailNotifyService`。在`EmailNotifyService`我没有看到任何`Person`或`EmailType`变量定义。另请阅读我在上面所说的关于 Person bean 的内容。

* * *

你的设计不正确。您不应该制作`EmailBuilder`bean 并希望自动装配到`EmailNotifyService`. 相反，`EmailNotifyService`您应该有一个方法`send(EmailBuilder builder)`，您可以在其中传递您在某处动态创建的构建器。

# java - MigLayout 给组件太多空间

> ID：16025378
> 
> 赞同：0
> 
> 时间：2013-04-15T21:58:35.133
> 
> 标签：java, swing, miglayout

我有两个组件 C1 和 c2，我希望 C1 获得所需的水平空间，然后 C2 应该增长并占用剩余的水平空间，但是 c1 被赋予了太多的空间，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/Xyk7q.png)

我想要它，以便按钮的绿色边框边缘和红色边框之间没有空间。

我布置组件的代码如下：（c1 是 ProposalButtons）（c2 是 scrollBox）

```
this.setLayout(new MigLayout("insets 2, debug, fill"));
this.propositionalButtons = new PropositionalButtons(this.controller);
this.add(propositionalButtons, "top");

this.scrollBox = new JScrollPane();
this.scrollBox.setBorder(BorderFactory.createLineBorder(Color.green));
this.add(scrollBox, "grow");

this.setBackground(Color.BLUE); 
```

任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:24:26.507

我手边没有编译器，但请尝试：

```
new MigLayout("insets 2, debug, fill", "[][grow]") 
```

这将允许您的第二列增长。目前，您的所有列都没有设置为增长，因此空间分布在所有列中。MiG 布局不够聪明，无法将组件约束级联到行/列级别。

# sql-server - 如何将表从数据库复制到 SQL Azure 中的另一个数据库？

> ID：16025383
> 
> 赞同：0
> 
> 时间：2013-04-15T21:58:55.930
> 
> 标签：sql-server, ssms, database-backups, bacpac

我们从需要更改许多表的数据库进行了两次备份，一个是该数据库的精确副本，另一个是 BACPAC 文件。

数据库的新模型已经准备好，但我想知道，如何从原始数据库的副本中复制我们想要恢复的表的内容？可能吗？

我尝试使用 SQL Server Management Studio 2012，但找不到可以让我从 BACPAC 文件中复制的选项，这很奇怪，因为无论我在哪里看到人们都说通过右键单击任务子菜单上的数据库名称应该有一个 Import 选项，但其中没有这样的选项。

我可以将表的内容从不同的数据库复制到另一个表中吗？或者有没有办法将 BACPAC 文件中的数据导入我们修改后的数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:23:26.167

您是否尝试过以下操作？

```
Insert into dbA.user.table (a,b,c)
Select a,b,c from dbB.user.table 
```

或者

```
 SELECT a,b,c 
  INTO dbA.user.table
  FROM dbB.user.table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-03T12:04:45.400

在 SQL Server Management Studio（版本 2012 或更高版本）中，右键单击“数据库”节点（不在您的数据库上）并选择“导入数据层应用程序”以恢复 BACPAC 文件（或选择“部署数据层应用程序”恢复 DACPAC 文件）。

[![右键单击 SSMS 中的数据库节点](https://i.stack.imgur.com/efcCj.png)](https://i.stack.imgur.com/efcCj.png)

# jenkins - 詹金斯：有什么方法可以使用配置屏幕中的内部版本号来完成工作吗？

> ID：16025386
> 
> 赞同：-1
> 
> 时间：2013-04-15T21:59:05.377
> 
> 标签：jenkins, jenkins-plugins

我使用 build # through 环境和许多工具来生成报告等。一些新插件看起来在其中一些文件上使用可能会很有趣，但为了提供文件路径，我需要在该插件的作业配置屏幕中使用当前构建 #...

无论如何都可以将构建＃作为插件配置屏幕的变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:39:45.787

尝试`${BUILD_NUMBER}`在作业配置屏幕中给出并检查它是否有效。

# r - 具有混合数据类型的数据帧

> ID：16025388
> 
> 赞同：8
> 
> 时间：2013-04-15T21:59:10.610
> 
> 标签：r, type-conversion, dataframe

我使用 R 已经有一段时间了，但我仍然在为因素和数据框架而苦苦挣扎。这是我的问题。

我正在尝试预先分配由多个不同类型的列组成的数据框，如下所示：

```
cb <- data.frame(S=character(1000), I=numeric(1000), A=as.Date(rep(0,1000), origin = "1900-01-01"), SD=as.POSIXct(rep(0,1000), origin = "1900-01-01 00:00:00"), CC=numeric(1000), stringsAsFactors=FALSE) 
```

满足我想要的数据帧类型（str（cb）的输出）：

```
'data.frame':   1000 obs. of  5 variables:
 $ S : chr  "" "" "" "" ...
 $ I : num  0 0 0 0 0 0 0 0 0 0 ...
 $ A : Date, format: "1900-01-01" "1900-01-01" "1900-01-01" "1900-01-01" ...
 $ SD: POSIXct, format: "1900-01-01" "1900-01-01" "1900-01-01" "1900-01-01" ...
 $ CC: num  0 0 0 0 0 0 0 0 0 0 ... 
```

当我分配数据框中的第一项时，CC和我变成了字符：

```
cb[1, ] <- c("ABCD", 4, "2005-12-12", "2008-04-03 20:30", 3) 
```

str(cb) 的输出：

```
'data.frame':   1000 obs. of  5 variables:
 $ S : chr  "ABCD" "" "" "" ...
 $ I : chr  "4" "0" "0" "0" ...
 $ A : Date, format: "2005-12-12" "1900-01-01" "1900-01-01" "1900-01-01" ...
 $ SD: POSIXct, format: "2008-04-03 20:30:00" "1900-01-01 00:00:00" "1900-01-01 00:00:00" "1900-01-01 00:00:00" ...
 $ CC: chr  "3" "0" "0" "0" ... 
```

这使得它对我的目的相当不可用。

当我在 data.frame 定义中省略 stringsAsFactors=FALSE 时，我（显然）收到不同的错误消息（已将警告设置为 2）：

```
Error in `[<-.factor`(`*tmp*`, iseq, value = "ABCD") : 
  (converted from warning) invalid factor level, NAs generated 
```

我理解，但我也不知道如何克服。

我究竟做错了什么？如何确保保留 I 和 SD 列的数字类型？非常感谢你的帮助。

干杯

乙

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T22:03:59.820

您不能在向量中混合类型，因此您的向量被强制转换为字符。

```
R> c("ABCD", 4, "2005-12-12", "2008-04-03 20:30", 3)
[1] "ABCD"             "4"               
[3] "2005-12-12"       "2008-04-03 20:30"
[5] "3" 
```

`[<-.data.frame`然后将 data.frame 的数字列强制转换为字符，因此该列将是一种类型；虽然我发现它也没有将 Date/POSIXt 字段也转换为字符有点不一致......

您可以在列表中混合类型。此替换有效，因为 data.frames 是下面的列表。

```
cb[1, ] <- list("ABCD", 4, "2005-12-12", "2008-04-03 20:30", 3) 
```

稍后回顾代码时，将 data.frame 的一行替换为 1 行 data.frame 可能更有意义：

```
cb[1, ] <- data.frame("ABCD", 4, "2005-12-12", "2008-04-03 20:30", 3,
                      stringsAsFactors=FALSE) 
```

# html - 表格单元格在 IE9 上不会断字

> ID：16025393
> 
> 赞同：0
> 
> 时间：2013-04-15T21:59:29.457
> 
> 标签：html, css

看看[http://jsfiddle.net/Y7NAR/2/](http://jsfiddle.net/Y7NAR/2/)。

`display: table-cell; max-width:100px; word-wrap:break-word;`在 chrome 中工作正常，但在 IE9 中不会中断。

任何解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:23:39.850

请在您的 CSS 中尝试以下操作：

```
#cntnr .section {
    display: table-cell;
    background: #fcc;
    text-align: center;
    max-width:100px;
    -ms-word-break: break-all;
    word-wrap:break-word;
} 
```

参考：http: [//msdn.microsoft.com/en-us/library/ie/ms531184%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ie/ms531184%28v=vs.85%29.aspx) \

小提琴更新：http: [//jsfiddle.net/audetwebdesign/BwaMt/](http://jsfiddle.net/audetwebdesign/BwaMt/)

# jquery - jQuery .change() 不适用于 textarea

> ID：16025396
> 
> 赞同：6
> 
> 时间：2013-04-15T22:00:07.910
> 
> 标签：jquery, forms, text, input, textarea

这是我第一次在 StackOverflow 上提问，但我目前对我正在创建的一些公司代码感到困惑。它根本不会接受 .change() 或绑定到 keyup。我以前没有遇到过问题，但今天它不再对我有用。查看我的代码，看看是否有任何可能导致问题的内容。

对不起格式，我是新人。

```
var currentContent = "null";
var customeri = "";
var optionsi = "";
var equipmenti = "";
var picturei = "";
$(document).ready(function() {
    $("#preview").hide();
    $("#previewPane").hide();
    $("#previewHeading").hide();
$(".uiFonts").click(function() {
    var clickedID = $(this).attr("id");
    if(clickedID !== null) {
        $("#main").hide();
        loadContent(clickedID);
    }
});

$("#Equipment").bind('change keyup', function() {
        equipmenti = $(this).val();
                    $("#preview").html('<br /><span class="reg">Customer Info<br /></span>'+customeri+'<br /><br /><span class="reg">Options<br /></span>'+optionsi+'<br /><br /><span class="reg">Equipment<br /></span>'+equipmenti+'<br /><br /><span class="reg">Picture:<br /></span><img src="'+picturei+'" />');
});
});
function loadContent(cID) {
$("#main").load(cID + ".html", function() {
    $("#main").slideDown(1500);
    $("#preview").fadeIn(1500);
    $("#previewPane").fadeIn(1500);
    $("#previewHeading").fadeIn(1500);
    currentContent = cID;
});
} 
```

包含 textareas 的 .html 文件如下：

```
<p><span class="reg">Customer Info - Name, Address, Phone, Email</span><br />
<textarea name="Customer Info" class="textAreas inputs" id="Customer"></textarea>
<br />
<br />
<span class="reg">Trailer Options</span>
<br />
<textarea name="Options" class="inputs textAreas" id="Options"></textarea>
<br />
<br />
<span class="reg">Trailer Equipment</span>
<br />
<textarea name="Equipment" class="inputs textAreas" id="Equipment"></textarea>
<br>
<br>
<span class="reg">Picture URL</span></p>
<input type="text" id="picture" class="inputs"></input> 
```

而且我尝试过将它们绑定在一起，例如：

```
$(".inputs").change(function() {
    customeri = $("#Customer").val();
    optionsi = $("#Options").val();
    //etc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T20:00:48.620

加载外部 .html 文件时，jquery 无法定期访问它并对其应用操作。之所以出现这个问题，是因为在触发器 $(document).ready 中，它在加载之前找不到指向 .html 中找到的 id 的链接，如果在文档之后调用外部 .html，它就太晚了。准备好了。

一种解决方法是将 .change 包含在单独的 jquery 函数中，或者在文档完成加载之前加载 .html。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T02:17:38.637

工作[小提琴](http://jsfiddle.net/2JST2/3/)。为了确认，我添加了 `<div id='test'/>`,`$("#Equipment").bind('change keyup', function(e) { $('#test').append(e.type);`并按预期获取和更改。

**更新** 我认为您的问题出在其他地方，因为事件都在触发。（你知道改变只有在留下`textarea`不同的价值后才会触发？）

# javascript - javascript：选择最大值

> ID：16025398
> 
> 赞同：-3
> 
> 时间：2013-04-15T22:00:21.977
> 
> 标签：javascript

非常简单的javascript问题。

我有两个价值观`value1 = 20`和`value2 = 30`

如何将`bigger_number`具有较高数字的值分配给变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:02:25.443

```
var bigger_number = Math.max(value1, value2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T22:02:32.860

```
var bigger_number = Math.max(value1, value2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T22:03:29.380

一点谷歌搜索给出了[Math.max的参考](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/max)

例如：

```
Math.max([value1[,value2[, ...]]]) 
```

# asp.net - 如何在转发器的数据绑定事件期间显示计算值？

> ID：16025399
> 
> 赞同：1
> 
> 时间：2013-04-15T22:00:24.833
> 
> 标签：asp.net, .net, webforms, repeater

我在 WebForm 网页中有一个中继器，它为 html 表生成行。该表的列显示来自源的绑定值，例如`<%# Eval("name") %>`. 一个 html 列将显示每一行的计算值。值未绑定到数据源中的任何列。该值是在转发器的 OnItemDataBound 事件期间计算的。我不想在源中创建一个虚拟列，仅用于显示它。

呈现页面时如何显示这些值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:09:43.653

在代码中声明一个受保护的属性或字段，您应该能够在以下内容中访问它：
`<%# RunningTotal %>`

```
Protected int RunningTotal {get; set;}

void OnItemDataBound(object s, EventArgs e)
{
   RunningTotal += ....
} 
```

# javascript - addEventListner 仅在应用程序创建时工作

> ID：16025401
> 
> 赞同：1
> 
> 时间：2013-04-15T22:00:32.443
> 
> 标签：javascript, windows-8, winjs

由于某种原因，我的 eventHandling 代码停止工作。我正在处理一些函数来处理 indexedDB 的东西，当我回到界面上工作时，我注意到 eventHandlers 只在应用程序创建时起作用，即使我没有对它们执行任何操作，它们也会消失。这是我的 default.js

```
(function () {
"use strict";

WinJS.Binding.optimizeBindingReferences = true;

var app = WinJS.Application;
var activation = Windows.ApplicationModel.Activation;
var _swAlarm;

app.onactivated = function (args) {
    if (args.detail.kind === activation.ActivationKind.launch) {
        if (args.detail.previousExecutionState !== activation.ApplicationExecutionState.terminated) {

        } else {

        }
        args.setPromise(WinJS.UI.processAll());
    }
};

app.oncheckpoint = function (args) {

};

function testSelection(value) {
    console.log("from event listner "+value)
}

function getDomElements() {
    _swAlarm = document.getElementById("swAlarm");
}

function registerHandlers() {
    _swAlarm.addEventListener("onchange", console.log("ola"));
}

app.onready = function () {
    getDomElements();
    registerHandlers();
}

app.start(); 
```

这是我的 default.html

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>MyApp</title>

    <!-- WinJS references -->
    <link href="//Microsoft.WinJS.1.0/css/ui-dark.css" rel="stylesheet" />
    <script src="//Microsoft.WinJS.1.0/js/base.js"></script>
    <script src="//Microsoft.WinJS.1.0/js/ui.js"></script>

    <!-- my references -->
    <link href="/css/default.css" rel="stylesheet" />
    <script src="/js/default.js"></script>
    <script src="/js/database.js"></script>

    <!-- jquery references -->
    <script src="js/jquery-1.8.2-win8-1.0.js"></script>
    <script src="js/visualize.jQuery.js"></script>
    <script type="text/javascript"> jQuery.isUnsafe = true;</script>
    <link href="/css/default.css" rel="stylesheet" type="text/css">
</head>

<body>
    <div id="content">
        <div id="settings">
            <h2 id="lAlarm">Alarm</h2>
            <div id="swAlarm" data-win-control="WinJS.UI.ToggleSwitch" ></div>
            <input id="iMaxval" type="number">
            <input id="iMinval" type="number">
            <button id="bSave">Save</button>

        </div>

        <div id="graph">
            <h2 id="hGraph" class="graph">Graph</h2>
        </div>

        <div id="stats">
            <h2 id="hStats" class="stats">Stats</h2>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:06:54.237

当您运行此代码时：

`_swAlarm.addEventListener("onchange", console.log("ola"));`

你是：

1.  跑步`console.log("ola")`
2.  影响结果作为 _swAlarm 的事件 onchange 的回调。

这在很多层面上都是错误的。

1.  `console.log("ola")`不返回回调。我想我明白你的意思，正确的代码可能是：`function() { console.log("ola"); }`
2.  使用时，`addEventListener`您必须使用带有事件面额的[dom lexique 。](http://www.w3.org/TR/DOM-Level-2-Events/events.html)在您的情况下，`onchange`需要改为`change`. 如果您必须直接在 html 中影响此事件，您确实必须使用`onchange="console.log("ola");"`. 但不与`addEventListener`.

最终结果是：

`_swAlarm.addEventListener("change", function() { console.log("ola"); }, false);`

至于为什么它在应用程序创建上起作用，我认为这仅仅是因为`console.log("ola")`在事件影响时立即调用了应用程序创建，但是由于后来没有任何事件受到实际影响，所以你不会得到该`onchange`事件的任何结果。

* * *

附带说明一下，由于我猜您正在从“旧”语法（onchange ...等）迁移到`addEventListener`api，因此我将添加两种模式之间的重要区别：执行事件时老办法，`this`参考`window`。但是通过影响回调`addEventListener`使`domElement`自身（`_swAlarm`在您的情况下）成为`this`回调执行期间的目标。

# c - 打印 630 反转 36 时。为什么不显示0？

> ID：16025403
> 
> 赞同：-5
> 
> 时间：2013-04-15T22:00:36.163
> 
> 标签：c

下面的程序采用整数值并返回数字反转的数字。对于 6540063 或 675 或 9600012 之类的数字可以正常工作，但对于以 0 结尾的数字，对于 630 ,50 或 10 输出不正确。630 返回 36。我不明白为什么。你能建议我应该添加什么吗？这看起来像意大利面条代码，不是吗？

```
#include <stdio.h>
#include <math.h>

void getDigit(int number);
void getReverse(int number);

int main(void) {

int namba=630;    //Enter here number to be reversed

getReverse(namba);

return 0;
}

void getDigit(int number) {

int div=1,reverse=0,count=0,i=0;

//to find max dividend
while (number>10*div){
    div*=10;  
    ++count;                                        
}       

while(div!=0&&i<=count){

    printf("%d ",number/div);
    number=number%div;
    div/=10;

}

}

void getReverse(int number){

int div=1,reverse=0,count=0,i=0;
    //to find max dividend
while (number>10*div){
    div*=10;  
    ++count;                                        
}       

while(div!=0&&i<=count){

    reverse+=(number/div)*pow(10,i++);      //to find reverse digits  
    number=number%div;
    div/=10;

}

printf("Reverse is: %d\n",reverse);

getDigit(reverse);

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T22:02:06.207

因为你失去了前导零。

036 = 36

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T22:08:17.873

```
void getReverse(int number){
    ...
    printf("Reverse is: %0*d\n",count + 1,reverse);
    ...
} 
```

# visual-studio-2012 - Visual Studio 2012 中的文件复制对话框在哪里？

> ID：16025406
> 
> 赞同：0
> 
> 时间：2013-04-15T22:01:01.240
> 
> 标签：visual-studio-2012, file-browser

我使用 VS 2010 中的文件复制对话框有选择地将 Web 文件推送到生产服务器。我可以在 VS 2012 中找到的唯一类似的工具是 Web Publish Activity 对话框。它迫使您完全同步整个站点。这是不现实的，因为我并不总是希望一次部署所有站点更改。

我在哪里可以找到/启用具有文件夹同步的旧文件复制工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T19:15:08.633

好的，因此访问网站复制工具的按钮已从解决方案资源管理器工具窗口中删除，但它仍然存在于网站导航菜单下。我从来不知道它在那里，我的错。

# google-sheets - VLOOKUP 替代品

> ID：16025409
> 
> 赞同：0
> 
> 时间：2013-04-15T22:01:28.027
> 
> 标签：google-sheets, google-apps, gs-vlookup

我正在尝试做一个 VLOOKUP，但它只是不会切芥末。我无法按字母顺序排列列表中的第一列。

我想知道在列表无法按字母顺序排列的情况下，我可以在 VLOOKUP 中使用任何替代方法或功能组合吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T22:12:24.360

从您对 OP 的评论中的[链接：](http://office.microsoft.com/en-us/excel-help/vlookup-HP005209335.aspx)

> Range_lookup 一个逻辑值，指定您希望 VLOOKUP 找到完全匹配还是近似匹配：
> 
> 如果为 TRUE 或省略，则返回精确或近似匹配。如果未找到完全匹配，则返回小于 lookup_value 的下一个最大值。
> 
> table_array 第一列的值必须按升序排列；否则，VLOOKUP 可能不会给出正确的值。您可以通过从数据菜单中选择排序命令并选择升序来将值按升序排列。有关详细信息，请参阅默认排序顺序。
> 
> 如果为 FALSE，VLOOKUP 只会找到完全匹配。在这种情况下，table_array 的第一列中的值不需要排序。如果 table_array 的第一列中有两个或多个值与 lookup_value 匹配，则使用找到的第一个值。如果未找到精确匹配，则返回错误值 #N/A。

文档的格式不是很明显，但查找范围必须按升序排序的条件仅适用于 VLOOKUP 中的第 4 个参数为 TRUE、非零正数或省略时。（如果第 4 个参数是非零*负数*，则第一列必须按*降序*排序。）在这些情况下，您允许公式返回非精确匹配。

**如果您只寻找完全匹配，那么您必须为第四个参数指定 FALSE（或零），并且根本不需要对第一列进行排序。**

如果您要在未排序的范围内寻找非精确匹配，那么这样的事情应该在 Google 表格中工作（假设您在 A 列中寻找 C1 的匹配项，并在 B 列中返回相应的条目）：

`=INDEX(SORT(FILTER(A:B;LEN(A:A));1;1);MATCH(C1;SORT(FILTER(A:A;LEN(A:A));1;1));2)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:44:28.983

DGET - 谷歌电子表格中有一堆数据库风格的函数，我怀疑 DGET 是你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T05:52:41.423

**纯文本**：与 vlookup 1 和“1”不一样。如果将列格式化为纯文本，它可以进行查找。即使您的单元格具有生成数字的公式，这也有效。

# php - 新文件的 Ubuntu 编码

> ID：16025410
> 
> 赞同：0
> 
> 时间：2013-04-15T22:01:39.523
> 
> 标签：php, eclipse, ubuntu, encoding, utf-8

我在那里搜索了很长时间，但没有任何有用的结果。

我正在 Ubuntu 11.04 VM 上使用 eclipse 开发一个 PHP 项目。每件事都很好。我从来不需要寻找文件编码。但是在将项目部署到我的服务器后，所有内容都以错误的编码显示。使用 Notepad++ 手动转换为 UTF8 后，我的问题就解决了。

现在我也想在我的 Ubuntu VM 中更改它。这就是问题所在。我检查了 Eclipse 中的首选项，但每个属性都设置为 UTF8：常规内容类型、工作区、项目设置、所有内容......

如果我在终端上查找编码，它会显示“test_new.dat: text/plain; charset=us-ascii”。所有文件都保存为 ascii 格式。如果我尝试使用终端（“触摸”）创建一个新文件，它也是一样的。

然后我尝试使用 iconv 转换文件：

```
iconv -f US-ASCII -t UTF8 -o test.dat test_new.dat 
```

但编码不会改变。特别是 PHP 文件似乎是有抵抗力的。我的项目中有一些 *.ini 文件可以进行转换？！

知道该怎么做吗？

这是我的 Ubuntu 语言环境设置：

```
LANG=de_DE.UTF-8
LANGUAGE=de_DE:en
LC_CTYPE="de_DE.UTF-8"
LC_NUMERIC="de_DE.UTF-8"
LC_TIME="de_DE.UTF-8"
LC_COLLATE="de_DE.UTF-8"
LC_MONETARY="de_DE.UTF-8"
LC_MESSAGES="de_DE.UTF-8"
LC_PAPER="de_DE.UTF-8"
LC_NAME="de_DE.UTF-8"
LC_ADDRESS="de_DE.UTF-8"
LC_TELEPHONE="de_DE.UTF-8"
LC_MEASUREMENT="de_DE.UTF-8"
LC_IDENTIFICATION="de_DE.UTF-8"
LC_ALL= 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T16:15:44.313

我也想知道字符编码，并在这里发现了一些可能有用的东西。

当我在我的 ubuntu 12.04 上创建一个新的空 .txt 文件并要求其字符编码为：“file -bi filename.txt”时，它向我显示：charset=binary。打开它并在里面写一些像“哈哈”这样的东西后，我使用“另存为”保存了它，并明确选择了 UTF-8 作为字符编码。现在很奇怪，再次询问后它没有显示 charset=UTF-8，而是返回了 charset=us-ascii。这似乎已经很奇怪了。但它变得更加奇怪，当我再次执行整个操作时，但这次在文件中包含了一些德语特定字符（在本例中为ä）并再次保存（这次没有另存为，我只是按了保存）。现在它说 charset=UTF-8。

因此，如果不需要 UTF-8，似乎至少 gedit 正在检查文件并从 UTF-8 降级到 us-ascii，因为可以使用 us-ascii 对文件进行编码。

希望这会有所帮助，即使它与 php 无关。

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:34:15.550

UTF-8 与 ASCII 兼容。因此，ASCII 文本文件也是有效的 UTF-8，从 ASCII 到 UTF-8 的转换是无操作的。

# php - 在插入数据库之前从 csv 中删除引号

> ID：16025412
> 
> 赞同：0
> 
> 时间：2013-04-15T22:01:48.773
> 
> 标签：php, string, sql-server-2008, parsing

我有一个类似于下面的 csv

```
"0","Task 1","456461608"
"0","Task 2","483727014"
"1","Task 3","277047414" 
```

我有以下 php 代码（$prep 只是将数组中的数据写入数据库）

```
$csv_array = file($file_name);
foreach ($csv_array as $row_num => $row) {
    $row = trim ($row);
    $column = explode ( ',' , $row );
    $param1 = $column[2];
    $param2 = $column[1];
    $param3 = $column[0];

    // insert the row
    $result = execute ( $prep );
} 
```

我需要删除第一列 ($param3) 和最后一列 ($param1) 周围的引号。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:13:14.347

PHP 具有[csv 特定功能](http://php.net/manual/en/function.fgetcsv.php)。您应该使用它们，因为它们可以解决您面临的问题，即，如果列值包含引号怎么办。还：

`$column = explode ( ',' , $row );`

如果其中一列的值包含逗号怎么办？

csv 函数将确保正确解析数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T22:41:28.200

有时数组太笨了，无法完成工作。[有些对象](http://php.net/splfileobject)更聪明：

```
$rows = new SplFileObject($path);
$rows->setFlags(SplFileObject::READ_CSV);

foreach($rows as $row)
{
    var_dump($row);
} 
```

输出：

```
array(3) {
  [0]=> string(1) "0"
  [1]=> string(6) "Task 1"
  [2]=> string(9) "456461608"
}
array(3) {
  [0]=> string(1) "0"
  [1]=> string(6) "Task 2"
  [2]=> string(9) "483727014"
}
array(3) {
  [0]=> string(1) "1"
  [1]=> string(6) "Task 3"
  [2]=> string(9) "277047414"
} 
```

[在行动中看到它。](http://eval.in/16455)

# java - 动态嵌套 TableColumn 的

> ID：16025419
> 
> 赞同：0
> 
> 时间：2013-04-15T22:02:01.710
> 
> 标签：java, javafx-2, javafx

我对 JavaFX 非常陌生，我正在尝试填充 TableView，这些列是动态填充的。我的卡住是从第二列等等必须嵌套，例如，Column2 必须有两个或 X 嵌套列等等......我正在使用这个来获取数据......例如

```
ObservableList<ObservableList>data = FXCollections.observableArrayList();
while(rs2.next()){
  ObservableList<String> row = FXCollections.observableArrayList();
  if(rs2.getInt("connectionid")!=0){
   row.add(rs2.getString("tdestname"));
   row.add(rs2.getBigDecimal("tdusdprice").toString()); // Dynamic fields...
   row.add(rs2.getBigDecimal("tdeurprice").toString());
   ......
   data.add(row);
  }
}
tvRates.setItems(data); 
```

在这些之后，我的 TableView 无法显示数据，你能教我如何读取嵌套列上获取的数据吗？

# .net - 为什么 ORM 不支持 IoC 容器

> ID：16025423
> 
> 赞同：3
> 
> 时间：2013-04-15T22:02:15.603
> 
> 标签：.net, entity-framework, nhibernate, design-patterns, inversion-of-control

这个问题有很多部分：

1.  有没有真正支持使用 IoC 容器的 .NET 的 ORM？
2.  如果没有，为什么不呢？
3.  这不会迫使喜欢领域驱动设计的人（包括我）在领域模型中使用大量服务类，使所有领域对象都是纯数据结构而没有行为（不知道这是否真的很糟糕事情）或更糟的是使用方法或属性注入。
4.  未来是否有支持 IoC 容器的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T12:01:11.393

对于 NHibernate，是的，可以注入依赖项。但是对于实体框架，我不是 100% 确定的。

### 休眠

关于 NHibernate，在 SO 上已经有很多类似的问题了。

[使用 Nhibernate (ASP.NET MVC + IOC) 将依赖项注入域模型类](https://stackoverflow.com/questions/2053557/injecting-dependencies-into-domain-model-classes-with-nhibernate-asp-net-mvc)

[使用 NHibernate 对象进行依赖注入](https://stackoverflow.com/questions/340461/dependency-injection-with-nhibernate-objects)

[DI/IoC、NHibernate 并帮助他们一起工作](https://stackoverflow.com/questions/387783/di-ioc-nhibernate-and-help-in-getting-them-to-work-together)

[总结这些答案，可以使用Interceptors](http://nhforge.org/doc/nh/en/#manipulatingdata-interceptors)将依赖项注入您的 POCO 。

### 实体框架

对于实体框架，我了解 EF 4.0 及更高版本可能有可能，请参阅[此](http://rogeralsing.com/2009/05/30/entity-framework-4-entity-dependency-injection/)博客文章。这种方法的主要缺点似乎是它不适用于延迟加载。

# javascript - 如何查看访问者的 RAM 和 GPU 信息？

> ID：16025428
> 
> 赞同：5
> 
> 时间：2013-04-15T22:02:22.407
> 
> 标签：javascript, browser, gpu, ram

我想知道我的访问者有多少 RAM 以及有关他们的 GPU 的所有可用信息。有没有办法通过 JavaScript 或 ActionScript (Flash) 来实现这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-09-24T01:52:33.090

利用

```
navigator.deviceMemory 
```

以千兆字节为单位查找设备 RAM。

请参阅[浏览器支持](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/deviceMemory#Browser_compatibility)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-15T22:06:32.300

JavaScript、浏览器扩展和插件都被严格沙盒化，它们受到限制，出于安全目的无法访问系统。只有有限的硬件可以直接访问（在用户同意的情况下），例如用于 JavaScript`getUserMedia`或 Flash 的相机和麦克风。

最接近的方法是让用户在 PC 上安装与浏览器交互的东西，例如 Java 小程序。[Can You Run It](http://www.systemrequirementslab.com/cyri)使用此方法检查用户的 PC 是否符合游戏要求。

# iphone - iOS 无法在 UITableViewCell 中设置 UITextField 文本属性

> ID：16025434
> 
> 赞同：0
> 
> 时间：2013-04-15T22:02:42.317
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uitableview

我的 iOS 应用程序有一个`UITableView`“人”。我创建了一个“添加”屏幕来将新人添加到我的持久存储中，效果很好。

这个添加视图使用一个用 a`UITableView`和子类创建的表单`UITableViewCell`，用一个`UITextField`and `UILabel`，虽然效果很好，但我对 iOS 编程很陌生，觉得这可能不是最有效的方法。

我正在尝试将此添加视图重新用作我的详细信息、添加和编辑视图，并且我可以成功地将“人员”实体设置为详细信息视图中的属性。我的`viewDidLoad`方法中有以下代码，其中`adding`属性是`prepareForSegue`在前一个 ViewController 的方法中设置的：

```
if (self.adding)
{
    self.editing = YES;
    self.title   = @"Add Person";
}
else
{
    self.title = self.person.name;

    [self setDetail];
} 
```

我的问题是，当我尝试预填充我的详细视图的字段（我的`setDetail`方法）时，我无法使用我的 person 实体的 name 属性设置我的 UITextField 文本。这是我用来检索 UITextField 并设置它的`text`属性的代码：

`form`是 UITableView；

```
UITableViewCell *nameCell  = [form cellForRowAtIndexPath:[NSIndexPath indexPathForItem:0 inSection:0]];
UITextField     *nameField = (UITextField *)[nameCell viewWithTag:100];
nameField.text = self.person.name; 
```

如果我 NSLog`nameCell`它返回`(null)`

我希望这是足够的解释。任何指针都会有很大帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:26:54.707

而不是在 viewDidLoad: 中设置，而是在表视图数据源方法中进行。IE

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
     // Deque the nameCell and prepare the cell if its not available.
     UITextField     *nameField = (UITextField *)[nameCell viewWithTag:100];
     nameField.text = self.person.name;
     return nameCell.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T02:33:11.277

我不太明白你的问题，但`cellForRowAtIndexPath`可能会返回 nil 因为

> 返回值
> 表示表格单元格的对象，如果单元格不可见或 indexPath 超出范围，则返回 nil。

官方文档：[cellForRowAtIndexPath：](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/cellForRowAtIndexPath%3a)

# android - tmux 使用我当前的环境启动新窗格

> ID：16025436
> 
> 赞同：0
> 
> 时间：2013-04-15T22:02:47.067
> 
> 标签：android, build, tmux

我正在做一个 Android 构建，它需要获取构建环境。如果我创建一个新的 tmux 窗格，如何在不再次获取 buildenv 的情况下继承所有环境变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-09T02:38:22.753

[tmuxinator](https://github.com/aziz/tmuxinator)可能适合您的需求，请参阅[如何设置 tmux 以便在打开指定窗口的情况下启动？](https://stackoverflow.com/questions/5609192/how-to-set-up-tmux-so-that-it-starts-up-with-specified-windows-opened)

希望这会有所帮助:)

# ruby-on-rails - 每个belongs_to has_many 关联都需要嵌套路由吗？

> ID：16025437
> 
> 赞同：1
> 
> 时间：2013-04-15T22:02:47.317
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes, associations

这是一个相当基本的问题，但我无法在网上找到具体的答案。每个`has_many belongs_to`不需要嵌套路由正确吗？当您查找表单的 URL 时，您是否应该只使用嵌套路由`class/:id/class/:id`？

例如，假设我有两个班级`Profile`和`Post`.

型号/配置文件

```
has_many :posts 
```

模型/帖子

```
belongs_to :profile 
```

没有单独的`post`URL，`posts`显示在`profiles/show`. 路由（在这种情况下，它只是像 :new、:create 和 :destroy 这样的操作）是否应该`post`嵌套在`:profiles`资源中？rails 指南指出，资源的嵌套深度不应超过一层，而且经常嵌套。为每个关联制作嵌套资源似乎很快就会违反此规则。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T22:13:18.667

如果您没有使用`/profile/1/posts`或`/profile/1/posts/1`不需要嵌套路由。但是，我敦促您重新考虑，嵌套路由可以生成干净的 RESTful API

例如，整洁的小嵌套路由：

```
resources :profile, :shallow => true do
  resources :posts
end 
```

将为您提供所有这些真正有用的路线：

```
   profile_posts GET /profile/:profile_id/posts(.:format) 帖子#index
                 POST /profile/:profile_id/posts(.:format) 帖子#create
new_profile_post GET /profile/:profile_id/posts/new(.:format) 帖子#new
       edit_post GET /posts/:id/edit(.:format) 帖子#edit
            发布 GET /posts/:id(.:format) 帖子#show
                 PUT /posts/:id(.:format) 帖子#update
                 删除 /posts/:id(.:format) 帖子#destroy
   profile_index GET /profile(.:format) profile#index
                 POST /profile(.:format) profile#create
     new_profile GET /profile/new(.:format) profile#new
    edit_profile GET /profile/:id/edit(.:format) profile#edit
         profile GET /profile/:id(.:format) profile#show
                 PUT /profile/:id(.:format) profile#update
                 删除 /profile/:id(.:format) profile#destroy
```

这样，您必须在必要/有用时自由选择嵌套路由，例如

```
GET /profile/:profile_id/posts/new(.:format) # create a new post for the given profile_id
GET /profile/:profile_id/posts(.:format) # return all posts for the given profile_id 
```

并使用不需要嵌套路由的浅层路由

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T02:45:04.600

如果您阅读 Ruby on Rails 指南的第 2.7 节，它会指出：

> 嵌套路由允许您在路由中捕获这种关系。

请参阅 - [http://guides.rubyonrails.org/routing.html#resource-routing-the-rails-default](http://guides.rubyonrails.org/routing.html#resource-routing-the-rails-default)以供参考。

除此之外，您可能希望对`user`具有`create`等的类执行特定操作`edit`...每个用户都与特定预订相关联。这意味着每当您对用户做任何事情时，您实际上是在对用户/预订做某事。因为这与此有关。

RESTful 路由是一种设置应用程序并充分利用统一资源标识符的干净方式。这方面的一个示例是识别特定用户，例如 /users/1/bookings/3 这将显示第一个用户。

# linux - Bash脚本在列表中查找文件，将它们复制到dest，打印未找到的文件

> ID：16025439
> 
> 赞同：1
> 
> 时间：2013-04-15T22:02:57.310
> 
> 标签：linux, bash, find

我想以我在这里找到的答案为基础：[Bash script to find specific files in a hierarchy of files](https://stackoverflow.com/questions/8269455/bash-script-to-find-specific-files-in-a-hierarchy-of-files)

```
find $dir -name $name -exec scp {} $destination \; 
```

我有一个包含文件名列表的文件，我需要在备份磁盘上找到这些文件，然后将找到的这些文件复制到目标文件夹，最后将找不到的文件打印到新文件中。

最后一步会很有帮助，这样我就不需要复制另一个文件列表，然后与原始列表进行比较。

如果脚本可以列出复制的文件，并进行比较，然后打印差异，那么这正是所需要的。除非 shell 进程 find 每次“找不到”文件时都可以打印到文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:25:51.053

假设您的列表由换行符分隔；像这样的东西应该工作

```
#!/bin/bash

dir=someWhere
dest=someWhereElse
toCopyList=filesomewhere
notCopied=filesomewhereElse

while read line; do
   find "$dir" -name "$line" -exec cp '{}' $dest \; -printf "%f\n"     
done < "$toCopyList" > cpList

#sed -i 's#'$dir'/##' cpList
# I used # instead of / in sed to not confuse sed with / in $dir
# Also, I assumed the string in $dir doesnot end with a /

cat cpList "$toCopyList" | sort | uniq -c | sed -nr '/^ +1/s/^ +1 +(.*)/\1/p' > "$notCopied"
# Will not work if you give wild cards in your "toCopyList" 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T09:44:27.457

```
while read fname ; do
  find /FROM/WHERE/TO/COPY/ \
       -type f \
       -name "$fname" \
       -exec cp \{\} /DESTINATION/DIR/ \; 2>/dev/null 
  find /DESTINATION/DIR/ \
       -type f \
       -name "$fname" &>/dev/null || \
       echo $fname
done < FILESTOCOPY > MISSEDFILES 
```

会做。

# php - jquery datepicker 将日期格式更改为 yyyy-mm-dd php

> ID：16025441
> 
> 赞同：-1
> 
> 时间：2013-04-15T22:03:00.217
> 
> 标签：php, jquery, phpmyadmin, datepicker, jquery-ui-datepicker

您好我正在尝试格式化 jquery datepicker，使其显示为 yyyy-mm-dd

我有一个 start_date 和 end_date..

我尝试将头部的脚本更改为：

```
 <script>
          $(function() {
            $( "#datepicker" ).datepicker();
            $( "#datepicker" ).datepicker({dateFormat: 'yy-mm-dd'});
  });
  </script> 
```

但是，当我尝试将其作为 00-00-000 放入数据库时​​，它仍然会出现

我真的很感激任何帮助！

瑞安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:05:06.373

```
$(function(){
    $("#to").datepicker({ dateFormat: 'yy-mm-dd' });
    $("#from").datepicker({ dateFormat: 'yy-mm-dd' }).bind("change",function(){
        var minValue = $(this).val();
        minValue = $.datepicker.parseDate("yy-mm-dd", minValue);
        minValue.setDate(minValue.getDate()+1);
        $("#to").datepicker( "option", "minDate", minValue );
    })
}); 
```

[http://jsfiddle.net/gaby/WArtA/](http://jsfiddle.net/gaby/WArtA/)

# rdf - 在 SPARQL 查询中指定多个 rdf:types

> ID：16025442
> 
> 赞同：14
> 
> 时间：2013-04-15T22:03:02.260
> 
> 标签：rdf, sparql

我有一个像这样的 SPARQL 查询

```
PREFIX prefix: <http://example.org/ns#>
SELECT *
WHERE 
{
    ?x rdf:type ?type .
} 
```

假设现在我想将类型指定`?type`为`prefix:type1`or `prefix:type2`; 这应该怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-30T13:52:04.567

比`FILTER IN`函数快得多的是使用`BINDINGS`. 我强烈建议使用以下查询的内容，而不是`FILTER(?type IN (wo:Kingdon, wo:Phylum)`.

```
SELECT * WHERE { ?x rdf:type ?type } BINDINGS ?type {(prefix:type1) (prefix:type2)} 
```

Using`BINDINGS`允许 SPARQL 引擎在处理结果时限制结果，而不是在过滤之前返回所有结果。这使得返回结果更快。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-15T22:28:32.110

你可以使用`UNION`例如

```
PREFIX prefix: <http://example.org/ns#>
SELECT *
WHERE {
    { ?x a prefix:type1 } UNION { ?x a prefix:type2 }
} 
```

注意其中的使用`a`是一个 SPARQL 关键字，它可以用在谓词位置并且对应于 RDF 类型 URI`http://www.w3.org/1999/02/22-rdf-syntax-ns#type`

还有其他方法可以做到这一点，例如使用`FILTER`带有各种表达式的子句：

*   `?type = prefix:type1`与条件或运算符组合的系列`||`
*   `?type IN (prefix:type1, prefix:type2)`

或者你可以使用一个`VALUES`子句来指定选项`?type`

如果您的查询更复杂并且您不想将大部分查询复制到两侧`UNION`或有两个以上的可能性要考虑，这些可能会更好。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-04T09:57:28.000

您可以使用 FILTER 语法来做到这一点，如下所示：

```
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX prefix: <http://example.org/ns#>

SELECT ?s ?p ?o ?type
WHERE {
   ?s a ?type .
   ?s ?p ?o .
  FILTER(?type IN (prefix:Type1, prefix:Type2))
} 
```

请注意，我不能保证效率，因为我不知道在返回所有结果之后是否会应用过滤。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-08-25T09:54:14.047

正如 Joshua 所提到的，在 SPARQL 1.1 中接受的答案不再准确。

在 SPARQL 1.1 中，可以使用[VALUES关键字，但对于像这样的用例，语法看起来更复杂。](https://www.w3.org/TR/sparql11-query/#inline-data)但是，您也可以以紧凑的形式编写它：

```
SELECT * WHERE {
  VALUES ?type { prefix:Type1 prefix:Type2 }
  ?x rdf:type ?type
} 
```

# sql - 涉及 MAX 的 SQL 查询

> ID：16025445
> 
> 赞同：-1
> 
> 时间：2013-04-15T22:03:15.883
> 
> 标签：sql, sqlite, max

我有下表我想写一个查询：

表名：Stats_State_County

```
Column name    Type     Constraint 
-----------------------------------
Population     number 
CountyName     string
State          number   Primary key 
```

我想找到每个州人口最多的县。我只想打印出该县的名称和该县的最大人口。目前，我有一些东西可以返回州及其最大人口，但我需要返回县名而不是州名。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:24:39.770

使用 SQLite 3.7.11 或更高版本，您可以使用：

```
SELECT CountyName,
       MAX(Population)
FROM Stats_State_County
GROUP BY State 
```

在早期的 SQLite 版本中，不能保证 like 非聚合字段`CountName`来自与 匹配的同一记录`MAX`，因此您必须在单独的步骤中从总体中查找名称：

```
SELECT (SELECT CountyName
        FROM Stats_State_County
        WHERE State = T1.State
          AND Population = T1.MaxPop),
       MaxPop
FROM (SELECT State,
             MAX(Population) AS MaxPop
      FROM Stats_State_County
      GROUP BY State
     ) AS T1 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-15T22:20:41.197

使用协同子查询来确定同一州内一个县的最大人口。

```
With CTE as
(Select 'A' as state,1000 as population, 'A1' as county FROM DUAL UNION ALL
Select 'A',1000, 'A2' FROM DUAL UNION ALL
Select 'A',1001, 'A3' FROM DUAL UNION ALL
Select 'A',1001, 'A3' FROM DUAL UNION ALL
Select 'A',1001, 'A4' FROM DUAL UNION ALL
Select 'B',2000, 'B1' FROM DUAL UNION ALL
Select 'B',2000, 'B3' FROM DUAL UNION ALL
Select 'B',2001, 'B2' FROM DUAL UNION ALL
Select 'B',2002, 'B4' FROM DUAL) 
Select population, county from CTE A1 
  where a1.population >= (Select max(A2.population) from CTE A2 Where A2.State = A1.State) Group by population, county 
```

回报：

```
Population County
1001       A3
1001       A4
2002       B4 
```

在此选择中的两种情况下，将 CTE 替换为您的表名，您应该没问题。

从 CTE A1 中选择人口，县 where a1.population >= (Select max(A2.population) from CTE A2 Where A2.State = A1.State) 按人口，县分组

注意：如果两个县的人口相同，则返回两个县。如果一个县由于某种原因被列出两次，它们会通过 group by 被删除。如果同一个县存在于人口相同的两个州，除非您将州添加到选择并按...分组，否则您可能不会得到您想要的结果...

# ruby - 如何在命令行上将实例变量传递给 HAML 模板？

> ID：16025453
> 
> 赞同：8
> 
> 时间：2013-04-15T22:04:06.023
> 
> 标签：ruby, haml, command-line-interface, interpolation, instance-variables

## 背景

我正在尝试在Rails*之外测试一些 HAML 模板的格式。*这个想法是在命令行或通过包含的 Ruby 文件传递​​一些实例变量，将模板呈现为标准输出。我尝试了几种不同的方法但没有成功，如下所述。

## 需要一个 Ruby 文件

例如，给定以下两个文件：

*   HAML 模板：“test.haml”

    ```
    !!!
    %h1 Testing HAML CLI
    %p= @bar
    %p= @baz 
    ```

*   红宝石文件：“test.rb”

    ```
    @foo = 'abc'
    @bar = '123' 
    ```

我希望调用会`haml -r ./test test.haml`在标准输出上返回一个内插的 HTML 文件，但事实并非如此。相反，我得到的只是 HTML：

```
<!DOCTYPE html>
<h1>Testing HAML CLI</h1>
<p></p>
<p></p> 
```

## 程序化尝试

由于这不起作用，我也尝试以编程方式执行此操作。例如：

```
#!/usr/bin/env ruby
require 'haml'

@foo = 'abc'
@bar = '123'

engine = Haml::Engine.new(File.read 'test.haml')
puts engine.render 
```

具有完全相同的结果，例如只有没有变量插值的 HTML。

## 重述问题

显然，需要其他东西才能让 HAML 呈现带有相关变量的模板。我更愿意从命令行执行此操作，通过传递参数或包含文件。我应该如何从命令行调用 HAML 来实现它？

如果由于某种原因这不可能，我应该如何以编程方式调用 HAML 来执行插值而不依赖于 Rails？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-15T22:25:14.580

您可以为该方法提供范围对象和局部变量哈希`render`。在您的示例中，您将调用：

```
engine = Haml::Engine.new(File.read 'test.haml')
engine.render(Object.new, { :@foo => 'abc', :@bar => '123' }) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T22:26:54.013

这两个示例都不起作用的原因是您试图从不同的类访问实例变量。最简单的解决方案是定义和使用方法，而不是尝试访问其他类的实例变量，就好像它们是你自己的一样。

test.rb 中的 IE

```
def foo
  'abc'
end 
```

测试.haml

```
!!!
%h1 Testing HAML CLI
%p= foo 
```

# linux - 显式调用 EGLIBC 动态链接器可提高 ARM Linux 可执行文件的性能

> ID：16025454
> 
> 赞同：0
> 
> 时间：2013-04-15T22:04:06.973
> 
> 标签：linux, performance, arm, embedded-linux

如果我显式调用动态链接器，我会看到大约 5% 的性能提升：

```
 /lib/ld-linux.so.3 ./executable 
```

LD_DEBUG=statistics 具有相同的输出。LD_DEBUG=libs 表明加载了相同的 DSO 即使 LD_DEBUG=all 的输出是相同的。（使用差异）

仅当我使用带有内核 3.2.1 的 EGLIBC sysroot 时才会发生这种情况如果我使用相同的 EGLIBC sysroot 但内核 2.6.33 则性能不会改变。

**显式调用链接器和隐式调用链接器之间有什么区别？**

# android - Android In app billing 购买历史查询

> ID：16025459
> 
> 赞同：2
> 
> 时间：2013-04-15T22:04:26.387
> 
> 标签：android, in-app-purchase, google-play, in-app-billing

我正在构建一个我想在应用计费中使用 Google 的应用。Google 是否会为我跟踪应用内购买历史记录，以便我可以查询历史记录并获取数据，例如按日期或按项目等。还是我的应用程序本身必须在我自己的后端存储用户的购买历史记录？另外，如果您可以请提供一个链接，以便我可以验证此信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T15:56:16.307

对于您的问题，答案是**“是”和“否”，** Google 将根据**产品类型**处理所有购买。如果您使用**的是非消耗品或基于订阅**的产品，Google 将保留记录，在其他情况下，如果您使用的是**消耗品**， Google 将保留记录，直到您的应用使用该产品。

如果您的应用发送购买请求，Google 会将其与在 android 设备上注册的**主要 gmail**帐户相关联，并且不允许两次购买相同的产品。

**注意**：- 如果您使用的是**IAB-2**，那么上述产品类型和流程将略有不同 **非消耗品** 称为 **托管产品** **订阅* 与***订阅**相同 **消耗品** 称为**非托管**产品

在**IAB-2**的情况下，谷歌将永远不会保留非托管产品的记录，如果您愿意，您有责任保留记录。

有关更多详细信息，请参阅下面的开发人员指南链接。

[开发者指南](http://developer.android.com/google/play/billing/billing_overview.html)

# python-2.7 - X 对象没有属性“数据”

> ID：16025461
> 
> 赞同：0
> 
> 时间：2013-04-15T22:04:31.210
> 
> 标签：python-2.7

我正在阅读[Dive into python 2](http://www.diveintopython.net/object_oriented_framework/special_class_methods.html)并且我在这个例子中遇到了麻烦：

```
class FileInfo(dict):

   def __init__(self, filename = None):
      self['name'] = filename

   def __getitem__(self, key):
     return self.data[key]

if __name__ == '__main__':
   f = FileInfo('pixies.mp3')
   print f.__getitem__('name') 
```

我收到此错误：

```
Traceback (most recent call last):
  File "FileInfo.py", line 12, in <module>
     print f.__getitem__('name')
  File "FileInfo.py", line 7, in __getitem__
     return self.data[key]
AttributeError: 'FileInfo' object has no attribute 'data' 
```

我正在使用 Python2.7

**编辑** 实际上，这段代码工作正常：

```
class FileInfo(dict):

  def __init__(self, filename = None):
     dict.__setitem__(self, 'name', filename)

  def __getitem__(self, key):
     return dict.__getitem__(self, key)

if __name__ == '__main__':
   f = FileInfo('pixies.mp3')
   print f.__getitem__('name') 
```

但我想知道为什么另一个代码不起作用（Dive into Python 2 过时了吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:08:28.947

它抱怨您的 FileInfo 没有数据属性。**您可以通过在您的init**函数下添加“self.data=XXX”来解决它。取决于你需要什么。您需要**初始化 init下的所有属性**

# python - 将文档字符串放在 Python 属性上的正确方法是什么？

> ID：16025462
> 
> 赞同：56
> 
> 时间：2013-04-15T22:04:31.900
> 
> 标签：python, properties, decorator

我应该制作几个文档字符串，还是只制作一个（我应该把它放在哪里）？

```
@property
def x(self):
     return 0
@x.setter
def x(self, values):
     pass 
```

我看到它`property()`接受一个 doc 参数。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-04-15T22:30:20.830

将文档字符串写在 getter 上，因为 1) 这就是`help(MyClass)`显示的内容，以及 2) 它也是[Python 文档中的完成方式——参见 x.setter 示例](https://docs.python.org/3.6/library/functions.html#property)。

关于1）：

```
class C(object):
    @property
    def x(self):
        """Get x"""
        return getattr(self, '_x', 42)

    @x.setter
    def x(self, value):
        """Set x"""
        self._x = value 
```

进而：

```
>>> c = C()
>>> help(c)
Help on C in module __main__ object:

class C(__builtin__.object)
 |  Data descriptors defined here:
 |
 |  __dict__
 |      dictionary for instance variables (if defined)
 |
 |  __weakref__
 |      list of weak references to the object (if defined)
 |
 |  x
 |      Get x

>>> 
```

请注意，setter 的文档字符串“Set x”被忽略。

因此，您应该在 getter 函数上编写整个属性（getter 和 setter）的文档字符串，以使其可见。一个好的属性文档字符串的示例可能是：

```
class Serial(object):
    @property
    def baudrate(self):
        """Get or set the current baudrate. Setting the baudrate to a new value
        will reconfigure the serial port automatically.
        """
        return self._baudrate

    @baudrate.setter
    def baudrate(self, value):
        if self._baudrate != value:
            self._baudrate = value
            self._reconfigure_port() 
```

# android - 寻找代码示例以使用 Kii Cloud 在 Android 应用程序上显示广告

> ID：16025463
> 
> 赞同：1
> 
> 时间：2013-04-15T22:04:41.860
> 
> 标签：android, admob, backend, paas, kiicloud

我在 Android 应用程序上使用[Kii Cloud](http://developer.kii.com)移动后端即服务 (MBaaS)，我刚刚添加了 SDK 以使用广告网络。我正在寻找一个代码片段，它显示如何同时显示来自多个广告网络的广告。有人可以贡献吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T23:08:07.777

首先，请确保您已按照[此处](http://documentation.kii.com/en/adding-kii-ads-sdk)所述在开发者控制台上设置了要使用的广告网络。然后尝试将 Kii 广告布局添加到您的屏幕布局中，如下所示：

```
// get scaledDensity 
Display display = getWindowManager().getDefaultDisplay(); 
DisplayMetrics metrics = new DisplayMetrics(); 
display.getMetrics(metrics); 
float scaledDensity = metrics.scaledDensity;  
// set targeting parameter 
KiiAdNetTargeting.setGender(KiiAdNetTargeting.Gender.FEMALE);
KiiAdNetTargeting.setKeywords("Application"); 
KiiAdNetTargeting.setAge(35); 
KiiAdNetTargeting.setPostalCode("30900");  
// create an KiiAdnetLayout 
KiiAdNetLayout adLayout = new KiiAdNetLayout(this, APP_ID, APP_KEY, KiiAdNetLayout.SiteID.US); 
layout.addView(adLayout); 
adLayout.setMaxWidth((int)(scaledDensity * 320)); 
adLayout.setMaxHeight((int)(scaledDensity * 52)); 
```

其中“布局”是您要在其中嵌入广告框的顶级 Android 布局。当然，定位参数只是关于如何限制受众的示例。

通过添加这个 Kii 广告框，您已经根据您为每个广告网络定义的显示时间百分比同时显示了您在开发者控制台上配置的所有广告网络。

*重要提示：您需要将 APP_ID 和 APP_KEY 替换为您的真实应用值*

# html - 如何格式化链接，使它们在所有角落的视口中占 25%？

> ID：16025466
> 
> 赞同：1
> 
> 时间：2013-04-15T22:04:53.707
> 
> 标签：html, css, responsive-design, permalinks

我已经成功设置了四个 div，使它们在每个角落占视口的 25%。现在我想让它们成为可点击的链接，这样我就可以应用悬停时更改的背景图像。

这是我所拥有的：

html:

```
<div id="intro">
    <div class="box topleft">
        <a href="#1"><h4 class="blockhead">link1</h4></a>
    </div>
    <div class="box topright">
        <a href="#2"><h4 class="blockhead">link2</h4></a>
    </div>
    <div class="box bottomleft">
        <a href="#3"><h4 class="blockhead">link3</h4></a>
    </div>
    <div class="box bottomright">
        <a href="#4"><h4 class="blockhead">link4</h4></a>
    </div>
  </div> 
```

CSS：

```
#intro {
    position: absolute;
    width: 100%;
    height: 100%;
}
.box {
    position: inherit;
    width: 50%;
    height: 50%;
}
.box a:active,
.box a:link {
    padding: 0;
    background: none;
    width: 100%;
    height: 100%;
}
.box h4.blockhead {
    position: absolute;
    color: #ffffff;
    padding: 5%;
}
.box.topleft h4.blockhead,
.box.topright h4.blockhead { bottom: 0 }
.box.topleft h4.blockhead,
.box.bottomleft h4.blockhead { right: 0 }
.box.topleft {
    background: #bad80a;
    top: 0;
    left: 0;
}
.box.topright {
    background: #0083d6;
    top: 0;
    right: 0;
}
.box.bottomleft {
    background: #003f87;
    bottom: 0;
    left: 0;
}
.box.bottomright {
    background: #ffc61e;
    bottom: 0;
    right: 0;
} 
```

div 中的文本必须保持原样对齐。非常感谢您在正确方向上的任何帮助。

这里是 jsfiddle：http: [//jsfiddle.net/blackessej/j47Ye/3/](http://jsfiddle.net/blackessej/j47Ye/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:11:28.200

```
.box a:link {
    /* rest of code */
    display: block;
} 
```

[http://jsfiddle.net/j47Ye/1/](http://jsfiddle.net/j47Ye/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T22:15:52.033

您需要使用的是`display:inline-block;`. `inline-block`像`block`属性一样工作，但它使所有内容都在同一行。[如Miljan](https://stackoverflow.com/a/16025555/1470950)`block`所示，在这种情况下使用可能会起作用，但这是不正确的。所以我会添加类似的东西

```
.box a {
  display:inline-block;
} 
```

那么你应该很高兴

[JSFiddle](http://jsfiddle.net/blackessej/j47Ye/3/)

# javascript - 在不更改值的情况下在输入字段中以不同方式显示值？

> ID：16025469
> 
> 赞同：3
> 
> 时间：2013-04-15T22:05:05.647
> 
> 标签：javascript, html

我有一个应用程序，其输入字段采用美元值。我需要更改此美元值的显示方式，以便使用 $ 和逗号对数字进行格式化，例如，如果用户输入 5550，则为 $5,550.00。

我找到了一种方法来做到这一点，但是这样做会导致使用该字段值的代码完全崩溃——它会做很多事情，包括如果给出 5,550.00 美元而不是 5550 美元，数据库更新就会中断。

有大量的底层代码，我无权去修复它。我需要想办法将这个值显示给用户 5,550.00 美元，但将基础值保持为 5550。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:10:42.220

使用 2 个文本输入。用户看到的“外观”，以及实际与表单一起提交给服务器的“真实”。当用户在可见输入中输入文本时，您可以使用 JavaScript 将所需的任何相应值设置为“真实”（隐藏）输入。这有效地将显示的值与提交的值分离。您甚至可以使用诸如[jQuery Masked Input](http://digitalbush.com/projects/masked-input-plugin/)之类的插件来为您进行前端数字格式设置。

确保仅在浏览器中启用 JS 时应用此设置，否则您的表单将在 JS 禁用时被破坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T22:11:27.067

如果您谈论的是 HTML 表单，我会使用 javascript 提交表单。

您可以在提交表单之前将值恢复为未格式化。

# java - 将 Bintray maven 存储库与 Ivy 一起使用

> ID：16025471
> 
> 赞同：7
> 
> 时间：2013-04-15T22:05:12.063
> 
> 标签：java, ivy, bintray

我正在考虑使用[bintray](https://bintray.com)在 Maven 存储库中托管一些项目依赖项。我的问题是我正在使用 Ivy，我似乎无法弄清楚如何采用这个 maven 配置（由 bintray 提供）：

```
<?xml version="1.0" encoding="UTF-8" ?>
<settings xsi:schemaLocation='http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd'
xmlns='http://maven.apache.org/SETTINGS/1.0.0' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'>
  <profiles>
    <profile>
      <repositories>
        <repository>
          <snapshots>
            <enabled>false</enabled>
          </snapshots>
          <id>central</id>
          <name>bintray</name>
          <url>http://dl.bintray.com/content/example/external-deps</url>
        </repository>
      </repositories>
      <pluginRepositories>
        <pluginRepository>
          <snapshots>
            <enabled>false</enabled>
          </snapshots>
          <id>central</id>
          <name>bintray-plugins</name>
          <url>http://dl.bintray.com/content/example/external-deps</url>
        </pluginRepository>
      </pluginRepositories>
      <id>bintray</id>
    </profile>
  </profiles>
  <activeProfiles>
    <activeProfile>bintray</activeProfile>
  </activeProfiles>
</settings> 
```

并将其变成常春藤可以使用的东西。谁能帮我这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T01:08:09.247

您可以像这样添加存储库：

```
<ivysettings>
    <resolvers>
        <ibiblio name="bintray"
                 m2compatible="true"
                 root="http://dl.bintray.com/content/example/external-deps"/>
    </resolvers>
</ivysettings> 
```

# postgresql - postgresql 9.2 中的 pg_test_fsync contrib 模块是否已弃用？

> ID：16025473
> 
> 赞同：3
> 
> 时间：2013-04-15T22:05:19.820
> 
> 标签：postgresql, psql, fsync

我已经在装有 Ubuntu 12.04.1 LTS 的机器上安装了 postgresql 9.2.4。根据此文档页面（[http://www.postgresql.org/docs/9.2/static/pgtestfsync.html](http://www.postgresql.org/docs/9.2/static/pgtestfsync.html)），似乎 *pg_test_fsync* contrib 模块是 postgresql 9.2.4 的一部分。但是当我检查 *pg_available_extensions* 系统视图以及系统*/usr/share/postgresql/9.2/extension*上的以下位置时，我找不到这个模块。即使在此处的 contrib 文档中也似乎缺少它（[http://packages.debian.org/experimental/postgresql-contrib-9.2](http://packages.debian.org/experimental/postgresql-contrib-9.2)）。

我错过了什么吗？谁能指导我如何在 postgresql 9.2.4 上测试 'pg_test_fsync' ？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T22:39:00.810

您链接到的手册页是针对命令行工具的，而不是在数据库本身内部运行的函数，因此在询问系统视图以获取可用扩展时不会显示。

尽管[Debian 软件包描述](http://packages.debian.org/experimental/postgresql-contrib-9.2)没有提到它，但[包含的文件列表](http://packages.debian.org/experimental/amd64/postgresql-contrib-9.2/filelist)却提到了。该列表同时包含`/usr/lib/postgresql/9.2/bin/pg_test_fsync`and `/usr/share/postgresql/9.2/man/man1/pg_test_fsync.1.gz`，因此一旦安装了该软件包，您应该能够键入`man pg_test_fsync`以确认支持的选项。

# django - django模板：遍历类/字符串列表

> ID：16025477
> 
> 赞同：1
> 
> 时间：2013-04-15T22:05:36.407
> 
> 标签：django, templates

有没有类似的东西：

```
{% for class in "red", "green", "blue" %}
   <div class="{{ class }}"></div>
{% endfor %} 
```

在 Django 模板中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T22:19:00.033

好吧，不是直接的，但您可以使用循环与动态列表结合：

```
{% for cnt in "123"|make_list %}
    <div class="{% cycle 'red' 'green' 'blue' %}"></div>
{% endfor %} 
```

...另一种选择是为您的 css_classes 提供更通用的名称，例如：color_1、color_2、color_3，然后：

```
{% for cnt in "123"|make_list %}
    <div class="color_{{ cnt }}"></div>
{% endfor %} 
```

如果您稍后在 css 上更改颜色，这会将您的 css 类与固定颜色分离，这可能是一个好主意。

- - 更新 - -

好的，阅读 nickromano 发布的链接上的答案，我现在意识到我错了。有一种使用 expr 在模板上声明真实列表对象的方法。而且 split 方法比 make_list + cycle 更好:-)

# multithreading - QML：在并行线程中运行函数

> ID：16025478
> 
> 赞同：5
> 
> 时间：2013-04-15T22:05:40.343
> 
> 标签：multithreading, parallel-processing, qml

在我的代码中，我正在循环创建 16x16 按钮，这需要几秒钟。

```
onCreateField:
{
    for(var i=0;i<fieldWidth;i++)
    {
        for(var j=0;j<fieldHeight;j++)
        {
            createButton(i, j);
        }
    }
}

function createButton(x, y)
{
    __buttonX = x;
    __buttonY = y;

    __component = Qt.createComponent("GameButton.qml");

    if(__component != null)
        continueButtonCreation();
    else
        __component.ready.connect(continueButtonCreation);
}

function continueButtonCreation()
{
    var button = __component.createObject(field, {"row": __buttonY, "column": __buttonX});

     if (button == null) {
         // Error Handling
         console.log("Error creating object");

         return;
     }

     updateValveState.connect(button.stateUpdated);
     button.buttonClicked.connect(buttonClicked);

     field.clearField.connect(button.release);
} 
```

当创建按钮的功能运行时，应用程序冻结。我想在此功能运行时显示加载动画。那么，如何在并行线程中运行这个函数来避免冻结呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T13:02:38.820

要在线程中工作，您有两种可能的方法：

1.  阅读有关[WorkerScript](http://qt-project.org/doc/qt-4.8/qml-workerscript.html)元素的信息。它允许您通过将 javascript 函数作为线程运行来执行某些操作。

**注意：**如文档中所述，有一个限制：

> 由于 WorkerScript.onMessage() 函数在单独的线程中运行，因此 JavaScript 文件在与主 QML 引擎不同的上下文中进行评估。这意味着与导入QML的普通JavaScript文件不同，上例中的script.js不能访问QML项的属性、方法或其他属性，也不能通过QDeclarativeContext访问QML对象上设置的任何上下文属性. 此外，对可以传入和传出工作脚本的值类型有限制。有关详细信息，请参阅 sendMessage() 文档。

只要看看，它是否适合您的特定用例。

2\. 实现与C++ 线程一样*重的功能。*每当需要时，生成一个信号以在 C++ 端启动此线程。完成后，如果需要，将数据从 C++ 传回 Qml 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-16T19:59:53.573

正如您在其他帖子中可能确定或未确定的那样，您不能在 javascript 中并行加载 QML 对象。根据您的情况，您可能应该将 GridView 与呈现按钮的委托一起使用。这允许底层代码有效地呈现按钮，而不是在 javascript 中按顺序创建它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-11T15:20:28.510

其他不阻止 UI 的选项可能是

*   使用`incubateObject`而不是`createObject`
*   不要在单个 (16ms) 帧内创建所有按钮：使用计时器将按钮的创建分散到多个帧

# javascript - 谷歌 Adsense JavaScript 和 IIS 7

> ID：16025481
> 
> 赞同：1
> 
> 时间：2013-04-15T22:05:48.560
> 
> 标签：javascript, iis-7, adsense

我正在从 LAMP 设置切换到 WIMP 设置，除了我的 Google Adsense 之外一切都很好。当我使用下面显示的代码创建一个名为 adsense.html 的文档时，它可以在我的 Linux 服务器上正确加载，而在我的 Windows 服务器上什么也没有显示。两个页面的页面源是相同的，这让我很困惑。

```
<script type="text/javascript"><!--
google_ad_client = "*******";
/* Banner */
google_ad_slot = "*********";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script> 
```

此外，当我从 Windows 服务器本身 (localhost/adsense.html) 浏览页面时，Adsense 广告显示得非常好。当我从外部导航到它时，什么都没有显示。我已经用谷歌搜索了 2 个小时，尝试了我能想到的一切。有没有人有任何想法？

# jquery - 如何覆盖 x-editable ajax 响应值？

> ID：16025483
> 
> 赞同：9
> 
> 时间：2013-04-15T22:05:57.587
> 
> 标签：jquery, ajax

我正在使用 x-editable 进行内联编辑。当我通过 ajax 和 x-editable 更新值以获得响应时，我发现很难覆盖包含新 x-editable 值的 div。

例如，我的 x-editable 链接如下所示：

```
 <a href="#" id="freight">$100</a> 
```

我在 x-editable 提供的弹出窗口中输入我的编辑，然后输入值 300.00

当我进行编辑时，我会进行如下操作：

```
 $('#freight').editable({
            validate: function(value) {
                if($.trim(value) == '') return 'This value is required.';
            },
            type: 'text',
            url: '{{ path('update_purchase_order_ajax') }}',
            pk: {{ purchaseOrder.id }},
            title: 'Enter Freight Value',
            ajaxOptions: {
                dataType: 'json'
            },
            success: function(response, newValue) {
                // Update the purchase order amounts...
                $('#freight').html('$' + newValue);
            }
        }); 
```

当 x-editable 完成后，页面上显示的值现在是 300.00（没有 $ 美元符号）。正如您在我的 jquery 代码中看到的那样，我试图用 $('#freight').html('$' + newValue); 覆盖 x-editable 放在页面上的值；

由于某种原因，这不起作用。我想要 300.00 美元，而不是 300.00 美元。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-10-17T06:14:12.257

您需要做的是防止该`display`方法覆盖您的`success`方法。

```
display: function(value, response) {
  return false;   //disable this method
},
success: function(response, newValue) {
  $(this).html('$' + newValue);
} 
```

在服务器端，你的 JSON 应该是这样的，`{newValue : <value>}`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-02T19:57:36.923

只要您的回复采用以下格式：

```
{"success":true,"pk":2311,"newValue":"somenewvalue"} 
```

**并且**您确保从成功回调中返回响应：

```
success: function(response) {
   var newValue = '$'+response.newValue;
   response.newValue = newValue;
   return response;
} 
```

然后 x-editable 应该为您更新该字段。请记住在响应中包含`success`、`pk`和键。`newValue`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T18:38:09.363

x-editable 有一个选项“display:function(value, response){}”，可以用来修改页面上出现的数据：

```
 ,
 display: function(value, response) {
      $(this).text(response.new_value);
      // new_value being the value that is returned via the json response...
      // this value can either be modified here in the javascript or in the controller which set the value...
 }, 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-23T12:41:29.027

以下是两种情况

**案例 1**：您只想以不同的方式显示值

你可以使用渲染事件

```
$('#action').on('render', function(e, editable) {
    var colors = {0: "gray", 1: "green", 2: "blue", 3: "red"};
    $(this).css("color", colors[editable.value]); 
}); 
```

**情况 2**：您想将值设置为在 ajax 响应中返回的元素，而不是在客户端设置的值，例如 uesr 插入值“Hello”但服务器将其转换为“hello”（小写）然后执行以下操作

在 ajax 响应中设置新值，例如`{"success":true,"pk":13,"value":"hello"}`

使用以下代码

```
success:function(data, config) {
    if(typeof(data) == 'object'){
        var api_id = data.pk;
        var success = data.success;
        if(success == true){
            return {newValue:data.value}
        }   
    }
} 
```

确保您返回具有确切名称**newValue的对象**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-24T11:12:45.357

```
success: function(response, newValue) {
  // Update the purchase order amounts...
  $('#freight').editable('option', 'value', newValue);
} 
```

# php - 为什么php脚本没有从表单位于div标签下的xhtml表单输入中捕获值？

> ID：16025486
> 
> 赞同：-1
> 
> 时间：2013-04-15T22:06:13.240
> 
> 标签：php, javascript, xhtml, xhtml-1.0-strict

我在一页中处理多个表单。基本上我有一个表单，其中有一些元素，当用户从表单的下拉列表中选择一个类别时，它会根据选择的类别在表单上添加附加元素。当我尝试从用户输入中获取值并将其保存到数据库中时，就会出现我的问题。在摆弄代码之后，我意识到代码在一个 div 标签发生后无法捕获表单的值。让我通过代码来解释。

```
<form>
<input type="text" name="" >
<select name="category" id="category" onchange="show()">
<option name="Phone" value="Phone" >Smartphone</option>
<option name="Laptop" value="Laptop" >laptop </option>
</select>
 //(show() function will make one of the div tag visible(depending on category selected) and so it will display on screen.)

<div id="phone" style="visibility:hidden">
<form>
<some input elements....>
</form>
</div>

 <div id="laptops" style="visibility:hidden">
 <form>
 <some input elements....>
 </form>
 </div>

 </form> 
```

现在在 php 中，当我尝试使用 $_POST 获取输入值时，我只能访问 id="phone" 的第一个 div 标签的值，但是当我选择笔记本电脑类别时，即使它正确显示在屏幕上，我也没有得到用户输入的价值。我检查了表格，没有错误，因为当我交换表格时，它有同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:10:46.507

您有其他表单包含的表单。这在 HTML 中是不允许的，并且通常会产生不一致和不希望的结果。

您还至少有一个其他错误（您重复）。[使用验证器](http://validator.w3.org/)测试您的 HTML 。

> 我只能访问 id="phone" 的第一个 div 标签的值

在您模糊地说的地方`<some input elements....>`，您可能有共享名称的输入。不可见元素仍然存在，因此第一个（非法）嵌套子表单中的元素将始终被提交。

当 PHP 填充`$_POST`和朋友时，只有与给定名称关联的第一组数据将被存储，其余的将被丢弃。（除非您用`[]`字符命名输入）。

# asp.net - ASP.NET Formauthentication.Signout() 不工作

> ID：16025488
> 
> 赞同：0
> 
> 时间：2013-04-15T22:06:29.200
> 
> 标签：asp.net, cookies, forms-authentication

我正在为我正在构建的网站使用表单身份验证，它工作得很好，除了我无法让身份验证 cookie 删除或过期。我尝试了许多方法，但似乎都没有奏效。这是我创建 cookie 的内容。

```
FormsAuthentication.SetAuthCookie(model.userName, false);

                    HttpCookie cookie = new HttpCookie("user");
                    Response.Cookies["user"].Value = model.userName; 
```

现在第二个 cookie 不是实际的 authcookie，它用于每个客户端请求的站点的一些内部工作。下一部分是我尝试删除 cookie 的各种内容。

```
FormsAuthentication.SignOut();
        Roles.DeleteCookie();
        Session.Clear();
        //Response.Cache.SetExpires(DateTime.Now);
        //foreach (var cookie in Request.Cookies.AllKeys)
        //{
        //    Request.Cookies.Remove(cookie);
        //}
        //foreach (var cookie in Response.Cookies.AllKeys)
        //{
        //    Response.Cookies.Remove(cookie);
        //}
        //Session.Abandon();

        //// clear authentication cookie
        HttpCookie cookie1 = new HttpCookie(FormsAuthentication.FormsCookieName, "");
        cookie1.Path = FormsAuthentication.FormsCookiePath;
        cookie1.Expires = DateTime.Now.AddYears(-1);
        Response.Cookies.Add(cookie1);

        HttpCookie cookie = Request.Cookies["user"];
        string userName = cookie.Value;
        cookie.Expires.AddDays(-30);

        //HttpCookie cookie2 = new HttpCookie("ASP.NET_SessionId", "");
        //cookie2.Expires = DateTime.Now.AddYears(-1);
        //Response.Cookies.Add(cookie2);

        //HttpCookie cookie = Request.Cookies["user"];
        //cookie.Expires = DateTime.Now.AddDays(-1d);
        //HttpCookie user = Request.Cookies["user"];
        //role.Expires = DateTime.Now.AddDays(-1d);
        //Response.Cookies["user"].Value = null;
        Session.Abandon(); 
```

我只是将整个内容剪切并粘贴在那里，其中一些现在已被注释掉，但在某些时候，我尝试使用该代码中的每种方法来删除 cookie。其中一些尝试只是猜测，因为我已经有一段时间了。最后这里是我的 web.config 的 auth 部分

```
<authentication mode="Forms" >
  <forms loginUrl="~/login" timeout="90" name=".ASPXFORMS" />
</authentication> 
```

感谢任何关于我做错了什么的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:16:08.330

试着打电话

```
 FormsAuthentication.SignOut() 
```

在调用会话之前。我通常把它放在一个单独的方法中，以便从多个地方调用。像这样的东西：

```
internal void SignOut(HttpContext context)
{
     FormsAuthentication.SignOut();

     HttpSessionState session = context.Session;

     if(session != null)
     {
          session.Abandon();
     }
} 
```

# jenkins - 詹金斯：关于如何发布/报告由构建构建的目录的任何想法？

> ID：16025493
> 
> 赞同：0
> 
> 时间：2013-04-15T22:06:41.500
> 
> 标签：jenkins, jenkins-plugins

如果成功，我们的 CI 会将构建的安装文件放在已备份的网络驱动器上。Jenkins build # 是目录名称的一部分。

关于构建完成后如何发布此网络文件路径的任何想法？如果用户可以单击链接或 ctrl 单击链接以打开该文件夹，那就太好了。

这将适用于 Window 环境......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:31:00.860

“[通过 CIFS 发布插件](https://wiki.jenkins-ci.org/display/JENKINS/Publish+Over+CIFS+Plugin)”运行良好。我自己用过。

它提供“将构建工件发送到 Windows 共享 (CIFS/SMB/samba)”功能。每个服务器配置都可以使用“测试配置”按钮进行测试。

# silverstripe - 会员通过API登录

> ID：16025495
> 
> 赞同：1
> 
> 时间：2013-04-15T22:06:43.253
> 
> 标签：silverstripe

我想通过 curl 请求将成员登录到 Silverstripe。例如：site.com/subdomain/login/authenticate?email=address&username=name&etc

快速而肮脏的示例控制器动作......

```
class RemoteLoginController extends Controller {
    public function authenticate($request) {
        $email = $request->getVar('email');
        ....

        if (($member = DataObject::get_one('Member', "Member.Email = '$email'"...))) {
            Debug::show($member);
            $member->logIn();
        }
    }
} 
```

Debug::show($member) 正在返回我的会员，但 $member->logIn() 没有登录会员。当我在浏览器中拨打电话后导航到网站的主页时，我没有登录作为会员。

如何通过 API 将会员登录到 Silverstripe？

# javascript - Highcharts 表单提交 var 不起作用

> ID：16025496
> 
> 赞同：1
> 
> 时间：2013-04-15T22:06:43.470
> 
> 标签：javascript, jquery, highcharts

我正在尝试通过表单提交/单击功能填充我的 Highcharts 图表。出于某种原因，我无法让 var 传递任何值。

```
$('#button').click(function() {
  var gaA = $('#gaA').val();
  var chart = $('#container').highcharts();
  chart.series[0].data[0].update(gaA);
  chart.series[0].data[1].update(50);
  chart.series[0].data[2].update(50);
}); 
```

如果我改变

```
var gaA = $('#gaA').val(); 
```

至

```
var gaA = 500; 
```

它传递了 500 的值。但我需要从表单中填充它。

这是完整的代码：http: [//jsfiddle.net/reLuP/1/](http://jsfiddle.net/reLuP/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T00:32:31.363

`val`返回一个字符串，但您需要一个数字。使用一元加号运算符将其强制为一个数字或`parseFloat`

```
chart.series[0].data[0].update(+gaA); 
```

[jsFiddle](http://jsfiddle.net/reLuP/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:54:16.457

你应该使用

```
var gaA = parseFloat($('#gaA').val()); 
```

接收 highcharts 使用的数字格式，而不是文本值。

# mysql - SQL 错误：#1005 - 无法创建表

> ID：16025497
> 
> 赞同：1
> 
> 时间：2013-04-15T22:06:45.973
> 
> 标签：mysql, foreign-keys

这是我的代码：

```
 create table if not exists Pelajar (
    no_pelajar char(7) not null,
    nama varchar(30) not null,
    alamat varchar(50) not null,
    no_telepon varchar(10),
    grade integer not null,
    primary key (no_pelajar)
);

create table if not exists Kelas (
    kode_kelas char(5) not null,
    no_pengajar char(9) not null,
    no_pelajaran char(4) not null,
    ruang integer not null,
    waktu char(5) not null,
    primary key (kode_kelas)
);

create table if not exists Pelajaran (
    no_pelajaran char(4) not null,
    grade integer not null,
    subjek varchar(30) not null,
    primary key (no_pelajaran)
);

create table if not exists Pengajar (
    no_pengajar char(9) not null,
    nama varchar(30) not null,
    alamat varchar(50) not null,
    no_telepon varchar(10) not null,
    primary key (no_pengajar)
);

create table if not exists Pembayaran (
    no_pembayaran char(11) not null,
    status_pembayaran varchar(11) not null,
    tgl_pembayaran char(8) not null,
    primary key (no_pembayaran)
);

create table if not exists KartuAnggota (
    no_pelajar char(7) not null,
    kode_kelas char(5) not null
);

create table if not exists SlipPembayaran (
    no_pembayaran char(11) not null,
    no_pelajar char(7) not null
);

alter table SlipPembayaran
    add foreign key (no_pembayaran)
    references Pembayaran(no_pembayaran);

alter table SlipPembayaran  
    add foreign key (no_pelajar)
    references Pelajar(no_pelajar);

alter table KartuAnggota
    add foreign key (kode_kelas) 
    references  Kelas(kode_kelas);

alter table KartuAnggota
    add foreign key (no_pelajar)
    references Pelajar(no_pelajar); 

alter table Kelas
    add foreign key (no_pelajaran) 
    references  Pelajaran(no_pelajaran);

alter table Kelas
    add foreign key (no_pengajar) 
    references  Pengajar(no_pengajar); 
```

==================================================== ================================ 运行代码后，我收到消息：SQL查询：

```
ALTER TABLE KartuAnggota ADD FOREIGN KEY ( kode_kelas ) REFERENCES Kelas( kode_kelas ) ; 
```

MySQL 说：

# #1005 - 无法创建表 'bimbel.#sql-2f2c_1c6' (errno: 150)

你能解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:10:21.560

如果您重新创建已删除的表，则它必须具有符合引用它的外键约束的定义。如前所述，它必须具有正确的列名和类型，并且必须在引用的键上具有索引。如果这些不满足，MySQL 返回错误号 1005 并在错误消息中引用错误 150。

# wcf - 将 MSMQ 端到端跟踪与 WCF 跟踪和应用程序级日志记录相关联

> ID：16025502
> 
> 赞同：37
> 
> 时间：2013-04-15T22:07:05.993
> 
> 标签：wcf, msmq

# 背景：

我正在解决一个问题，即 WCF 通过事务性 MSMQ（使用 netMsmqBinding）发送的消息似乎消失了。使用 WCF 的代码位于我无法更改的第三方程序集中。我对问题所在几乎没有线索，但计划启用各种跟踪功能，以便查明问题所在。

# 语境：

1.  我已启用 MSMQ[端到端跟踪](http://technet.microsoft.com/en-us/library/cc730882.aspx)。它为每条发送的消息记录两个事件。

    *   将消息写入传出队列时的一个事件。此消息包含 MSMQ 消息 ID（由 guid 和整数组成，即 7B476ADF-DEFD-49F2-AF5A-0CF27C5152C0\6481271）。
    *   该消息通过网络发送时的另一个事件。
2.  我启用了详细的[WCF 跟踪](http://msdn.microsoft.com/en-us/library/ms733025.aspx)。

3.  我还有应用程序级别的日志记录，它记录由应用程序代码定义的消息 ID（我们称之为“应用程序消息 ID”）。

4.  我在发送的 MSMQ 消息上启用了正负源日志。

5.  我在接收队列上启用了日志。

# 问题：

当消息丢失时，我知道丢失消息的应用程序 ID（它由发送方记录）。我现在想查看端到端跟踪以查看消息是否已写入传出队列。

**如何将端到端跟踪中的事件与应用程序级别日志和 WCF 跟踪相关联？**

# 想法：

*   使用 System.Messaging 中的托管 MSMQ API 发送 MSMQ 消息时，消息的 MSMQ id 在消息发送后可用。但是，当 WCF 执行发送操作时，我还没有找到记录此内容的方法。WCF 跟踪记录了一个 MSMQMessageId guid，但令人惊讶的是，这个值并不是我猜想的实际 MSMQ id。**是否可以访问实际的 MSMQ 消息 ID 并记录它？**

*   在应用程序日志中记录本机线程 ID 以及应用程序级别 ID 和时间戳。本机线程 ID 由 MSMQ 记录到端到端跟踪，因此这实际上可能足以关联。如果我找不到更优雅的解决方案，这对我来说是 B 计划。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-13T23:16:46.470

你听起来像是在正确的轨道上。但是，您可以通过以下方式提高一点：

使用 SvcConfigEditor.exe

1.  为传播活动和活动跟踪配置 WCF 详细跟踪
2.  为“格式错误的消息、服务消息、传输消息”配置 WCF 消息记录

[![周转基金 1](https://i.stack.imgur.com/mmDOo.png)](https://i.stack.imgur.com/mmDOo.png)

使用 LogEntireMessage

[![周转基金 3](https://i.stack.imgur.com/PfosV.png)](https://i.stack.imgur.com/PfosV.png)

端到端，追踪一切 [![WCF 2](https://i.stack.imgur.com/Qx2U1.png)](https://i.stack.imgur.com/Qx2U1.png)

确保在您的和第 3 方可执行文件的双方都启用这些 *.config。

收集您的日志文件，并将它们全部添加到 SvcTraceViewer.exe

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-21T14:08:42.513

您可以配置 Windows MSMQ 以感知消息的主题，如果主题包含关键字，则触发应用程序。此应用程序可以记录传入的消息。在发件人方面，您可以将实际消息 ID 写入消息主题并将关键字添加到主题。在接收方触发的应用程序中，可以访问主题中添加的关键字附近的实际消息 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-13T11:28:35.430

看起来您的消息正在被 WCF 丢弃，因为它在某些方面格式不正确（即合同不匹配，超出了 WCF 消息大小限制之一）。

要捕获此错误，您可以编写一个审核这些错误的 ErrorHanlder。这里是一个示例的[链接。](https://stackoverflow.com/questions/12426351/how-to-setup-up-web-config-for-wcf-ierrorhandler)

如果您使用的是 Win 2008 R2 及更高版本，另一种选择是使用内置的有害消息处理。这是文档的[链接](https://msdn.microsoft.com/en-us/library/aa395218(v=vs.110).aspx)。

**对于这个问题**，使用应用程序跟踪标识符进行端到端跟踪：我将在消息头中传递应用程序跟踪 id（请参阅[此处的示例](https://stackoverflow.com/a/964461/488699)）。

要在服务端审核消息头，我将使用 WCF`IOperationInvoker`拦截每个调用，并审核消息头中的 id。

这可以在进程的配置文件中进行配置，而无需更改第三方代码。[这](https://stackoverflow.com/a/4396996/488699)是一个如何实现调用程序以及如何在配置中设置它的示例。

# php - 在特定时间内保持会话活跃

> ID：16025504
> 
> 赞同：0
> 
> 时间：2013-04-15T22:07:38.583
> 
> 标签：php, session

我正在构建一个带有购物车的网站，该购物车存储在这样的会话中：

```
if (!array_key_exists($pid, $_SESSION['cart'])) 
    {
        $_SESSION['cart'][$pid] = array(
            'itemId'=>$pid,
            'qty'=>0
        );  
    } 
```

问题是会话很快就会过期，可能是 30 分钟。我希望能够保持会话至少 1 天。

有什么具体的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:14:05.873

您应该能够通过在 php.ini 中编辑以下内容来扩展会话：

; 在此秒数之后，存储的数据将被视为“垃圾”并且 ; 由垃圾收集过程清理。; [http://php.net/session.gc-maxlifetime](http://php.net/session.gc-maxlifetime)

```
session.gc_maxlifetime = 1440 
```

# vhdl - VHDL 两个自然数的乘积

> ID：16025506
> 
> 赞同：-3
> 
> 时间：2013-04-15T22:07:53.340
> 
> 标签：vhdl

我正在编写小代码以求完美。我可以实现两个自然数的算术运算，比如 1223 (-,+,*,/ 4455？？我已经尝试通过将它们转换为二进制来实现对小数的算术运算，但是在大数字的情况下呢？有什么事情吗？我可以试试吗？？您的所有建议都会有所帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:45:48.763

这是一个非常基本的问题；请从一些教程开始！但是，这是一个非常基本的示例：

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;

entity SIMPLE is
Port ( 
    a : in  integer;
    b : in  integer;
    c : out  integer
);
end SIMPLE;

architecture Behavioral of SIMPLE is

begin
    c<=a*b;
    -- c<=a-b;
    -- c<=a+b;
end Behavioral; 
```

# java - hsqldb中的mysql方言

> ID：16025507
> 
> 赞同：0
> 
> 时间：2013-04-15T22:08:02.537
> 
> 标签：java, mysql, hibernate, hsqldb

我在我的应用程序中使用休眠来管理数据库操作和 MySQL - 使用 org.hibernate.dialect.MySQLInnoDBDialect 作为休眠方言。但出于测试目的，我使用的是 HSQLDB 1.8.0.10。

我对这样的查询有疑问（在 mysql 上运行良好而不是在 hsql 上）：

```
SELECT DISTINCT(id) FROM table ORDER BY name; 
```

我知道问题出在 distinct 和 order by （[http://weblogs.sqlteam.com/jeffs/archive/2007/12/13/select-distinct-order-by-error.aspx](http://weblogs.sqlteam.com/jeffs/archive/2007/12/13/select-distinct-order-by-error.aspx)），解决方案可能是例如：

```
SELECT DISTINCT(id) FROM table GROUP BY id ORDER BY MAX(name); 
```

但我的问题是，是否有可能在 HSQLDB 中使用 MySQL 方言而不必使用此解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T18:09:54.640

HSQLDB 正确地实现了 SQL 标准，不允许歧义查询。不可能改变它的行为。

最好将您的 MySQL 查询修改为符合标准。这使您可以更轻松地将应用程序移植到另一个数据库。

# javascript - Angularjs应用额外的选择来过滤

> ID：16025512
> 
> 赞同：0
> 
> 时间：2013-04-15T22:08:26.043
> 
> 标签：javascript, angularjs

我有一个转发器，并且正在使用过滤器来过滤查询，例如

`ng-repeat="item in items | filter:query"`

我添加了一个选择选项，并希望将其添加为附加过滤器。

关于如何将其与当前过滤器一起添加的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:47:04.327

尝试

```
ng-repeat="item in items | filter:myFilterFunc" 
```

在哪里

```
$scope.myFilterFunc = function (item) {
  //return true or false depending on multiple conditions
}; 
```

您可以访问该函数内`item`的任何内容。`$scope`使用一些`if`语句，您应该能够实现所需的行为。

# java - 使用位于 JAR 库中的抽象类的静态成员

> ID：16025513
> 
> 赞同：3
> 
> 时间：2013-04-15T22:08:26.927
> 
> 标签：java

我有两个 Java 项目：一个是库，另一个是控制台应用程序。在库项目中，我有一个带有一些静态成员变量（用于全局访问）的抽象类。它看起来有点像这样：

```
public abstract class AbstractHelper
{
    public static final VarType someVar = new VarType();
} 
```

我从两个不同的类中的控制台应用程序访问静态成员变量。

出于某种原因，“someVar”在访问它的两个不同类中具有唯一的实例。如果我从 A 类的实例访问“someVar”，我得到的对象与从 B 类的实例访问“someVar”时不同。

但是，如果我将 AbstractHelper 从库项目移动到我的控制台应用程序项目中，那么它具有预期的行为（静态成员变量的单个实例在多个类之间共享）

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-05T22:55:48.970

这可以通过使用不同的类加载器来实现。OSGI、java-ee 服务器和其他几种技术允许将不同的类加载器轻松注入 JVM。

您可以解决这个问题：在同一个类路径上定义您的库和控制台应用程序类。

# internet-explorer - 在 iframe 中设置的相同域 cookie 在外部无法访问

> ID：16025516
> 
> 赞同：1
> 
> 时间：2013-04-15T22:08:33.993
> 
> 标签：internet-explorer, iframe, cookies

我有一个来自 domain1.com 的页面，其中包含 domain2.com 中的另一个页面。domain2.com 页面设置了一些 cookie。cookie 可以在 iframe 中访问，但是当我尝试从 domain2.com 打开另一个页面时，cookie 不可用。这在其他浏览器中运行良好，我尝试设置 p3p 策略，但仍然没有效果。

问候， 吉什努

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T19:39:12.817

您是否尝试将[cookie](http://php.net/manual/en/function.setcookie.php)的域设置为您的整个网站域？我遇到了这样的问题，但是如果您更改域，它可以让您访问它们

例子：

`setcookie("TestCookie", $value, time()+3600, "/", "example.com", 1);`

将在下的每个页面中提供`www.example.com`

**编辑**

我相信您正在寻找的答案在这里：[iframe 中的 Cookies](https://stackoverflow.com/questions/19012633/facebook-php-page-tab-app-session-does-not-sustain-when-a-user-closes-their/19012868#19012868)

# matlab - MATLAB 中的函数错误

> ID：16025520
> 
> 赞同：0
> 
> 时间：2013-04-15T22:08:50.930
> 
> 标签：matlab, function

我对 MATLAB 很陌生，我有以下代码：

```
a=500;
PI=3.14159265;
radconvert=PI/180;
degconvert=180/PI;

% values at t=9, t=10 and t=11 respectively
alpha=[54.80 54.06 53.34];
beta=[65.59 64.59 63.62];

% converting degrees to radians
for i = 1:3
    alpha(i) = alpha(i)*radconvert;
end

for i = 1:3
    beta(i) = beta(i)*radconvert;
end

% declaring x and y functions
function x(a, alpha, beta)
    (a*tan(beta))/(tan(beta)-tan(alpha));

function y(a, alpha, beta)
    (a*tan(alpha)*tan(beta))/(tan(beta)-tan(alpha));

% doing the calculations
vx1=x(a, alpha(2), beta(2)) - x(a, alpha(1), beta(1));
vy1=y(a, alpha(2), beta(2)) - y(a, alpha(1), beta(1));
vf1=sqrt(vx1^2 + vy1^2);

vx2=x(a, alpha(3), beta(3)) - x(a, alpha(2), beta(2));
vy2=y(a, alpha(3), beta(3)) - y(a, alpha(2), beta(2));
vf2=sqrt(vx2^2 + vy2^2);

vf=(vf1+vf2)/2;
vxavg=(vx1+vx2)/2;
vyavg=(vy1+vy2)/2;

theta = atan(vyavg/vxavg)*degconvert;

% printing the values
sprintf('Velocity at t=10 is: %.2f\n', vf);
sprintf('Climb angle theta is: %.2f\n', theta); 
```

如果我尝试运行它，我会收到以下错误消息：

> ？？？错误：文件：code.m 行：20 列：1 在此上下文中不允许函数定义。

我想我不能在同一个 .m 文件中声明和使用函数。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T23:33:20.763

不允许在脚本中定义函数。这是两个不同的东西。您的 .m 文件是脚本的函数。但是，您*可以*在 MATLAB 脚本中定义[匿名函数。](http://www.mathworks.com/products/matlab/examples.html?file=/products/demos/shipping/matlab/anondemo.html)由于我不会在这里展开的范围问题，您的函数参数不应与主脚本中的变量具有相同的名称。他们的范围相交。如果上一句没有意义，请确保您的参数名称与您在脚本中所称的名称不同。您的带有任意函数的代码应如下所示：

```
a=500;
PI=3.14159265;
radconvert=PI/180;
degconvert=180/PI;

% values at t=9, t=10 and t=11 respectively
alpha=[54.80 54.06 53.34];
beta=[65.59 64.59 63.62];

% converting degrees to radians
for i = 1:3
    alpha(i) = alpha(i)*radconvert;
end

for i = 1:3
    beta(i) = beta(i)*radconvert;
end

% declaring ananymous x and y functions
x = @(mA, mAlpha, mBeta) ...
    (mA*tan(mBeta))/(tan(mBeta)-tan(mAlpha));

y = @(mA, mAlpha, mBeta) ...
    (mA*tan(mAlpha)*tan(mBeta))/(tan(mBeta)-tan(mAlpha));

% doing the calculations
vx1=x(a, alpha(2), beta(2)) - x(a, alpha(1), beta(1));
vy1=y(a, alpha(2), beta(2)) - y(a, alpha(1), beta(1));
vf1=sqrt(vx1^2 + vy1^2);

vx2=x(a, alpha(3), beta(3)) - x(a, alpha(2), beta(2));
vy2=y(a, alpha(3), beta(3)) - y(a, alpha(2), beta(2));
vf2=sqrt(vx2^2 + vy2^2);

vf=(vf1+vf2)/2;
vxavg=(vx1+vx2)/2;
vyavg=(vy1+vy2)/2;

theta = atan(vyavg/vxavg)*degconvert;

% printing the values
msg = sprintf('Velocity at t=10 is: %.2f\n', vf);
disp(msg);
msg = sprintf('Climb angle theta is: %.2f\n', theta);
disp(msg); 
```

最后我还修复了你的打印。

# c# - 当 XML 可以引用多个对象之一时，您如何处理在 C# 中解析 XML？

> ID：16025521
> 
> 赞同：-5
> 
> 时间：2013-04-15T22:08:55.233
> 
> 标签：c#, xml

我收到一个包含 XML 响应的状态对象。

此响应可以是“成功”消息、“错误”消息或 null（尚未处理，因此没有消息）。

我想不出一种优雅的方式来解析这个 XML。

我能想到的唯一两个选项是尝试解析每个错误消息上的 XML 字符串，或者执行 String.Contains("Success") 或 String.Contains("Error")。

在这两种方法中，TryParse 似乎是最好的……但看起来仍然很丑。

我想知道是否有更好的方法来处理这个问题。

接收对象可能如下所示：

```
public class ReturnedObject{
    public string MessageId
    public string MessageDescription
    public string XML
} 
```

XML 可以为 null 或以下示例之一：

```
<Success>
    <paymentReference>123</paymentReference>
    <targetBankAccount>01-0002-3948</targetBankAccount>
</Success> 
```

或者

```
<Error>
    <errorMessage>Your bank account was invalid</errorMessage>
    <errorBelongsToField>BankNumber</errorBelongsToField>
</Error> 
```

我当前的解析器看起来像：

```
 if (documentStatusResponse.Xml == null)
        {
            return disassociatedDocumentStatusResponse;
        }

        var root = XDocument.Parse(documentStatusResponse.Xml).Root;

        if (root != null)
        {
            if (root.Name == "Error")
            {
                disassociatedDocumentStatusResponse.Errors = _xmlExtractor.RetrieveStatusErrors(documentStatusResponse.Xml);
            }
            else if (root.Name == "Success")
            {
                disassociatedDocumentStatusResponse.Reconciliation =
                    _xmlExtractor.RetrieveStatusReconciliation(documentStatusResponse.Xml);
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:12:08.210

为什么不使用 XML 库（在我的示例中为 Linq-XML）来解析根节点，然后将 XML 传递给可以解析它的类。

例如：

```
ParseMessage(string xml)
{
   XDocument doc = XDocument.Parse(xml);
   String rootName = doc.Root.Name;

   if (rootName == "SuccessMessageName")
   {  
       //Depending if you deserialize from an XDocument...
       ProcessSuccessMessage(doc);
       // or String.
       ProcessSuccessMessage(xml);
   }
   else if (rootName == "ErrorMessageName")
       //etc.
} 
```

或者，如果您[不需要](https://stackoverflow.com/questions/4498423/how-do-i-get-the-xml-root-node-with-c)将整个消息作为`XDocument`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:11:38.683

我通常创建一个可以接受所有可能的 XML 输入的类结构。如果这是不可能的 - 进行最一般的剪辑并预先测试您的输入以对其进行序列化。很少需要这样做，而且当其中一个输入不是格式良好的 XML 时，我大多不得不这样做。

如果根元素不同，您可以将整个输入包装在里面`<MyXML> .... </MyXML>`，现在您有一个已知的根元素可以反序列化

# c++ - 不能包含 ifstream “致命错误：找不到‘ifstream’文件”

> ID：16025523
> 
> 赞同：0
> 
> 时间：2013-04-15T22:09:02.440
> 
> 标签：c++, compiler-errors, include

这里正在发生一些非常奇怪的事情。我做了一个非常简单的测试代码来包含一个 if 流，我得到一个致命错误：编译时找不到'ifstream'文件。我怀疑这与编译器有关。

```
#include <ifstream>
using namespace std;
int main(){
    cout <<"hello world" <<endl;
} 
```

以上是使用命令 clang++ *.cpp -o "test" 用 clang 编译的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T22:11:32.153

错误的标题名称，没有`ifstream`标题。如果你想使用`cout`你可能意味着包括`iostream`：

```
#include <iostream> 
```

# windows-8 - XAML Windows 应用商店应用程序 - 拖动期间忽略 Slider.ValueChanged

> ID：16025524
> 
> 赞同：3
> 
> 时间：2013-04-15T22:09:03.483
> 
> 标签：windows-8, slider, windows-store-apps

Slider.ValueChanged 事件的默认行为是在用户拖动控件时多次触发 ValueChanged。有没有办法只在拖动结束时触发这个事件？

我已经尝试过的一件事是绑定到 Thumb.DragStarted 和 Thumb.DragCompleted 事件，并添加一些标志来控制进程，但是如果用户在滑块之外单击滑块的主体，则不会触发这些事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T23:27:35.490

如果您不想自定义控件，您可以处理`KeyUp`事件和`PointerCaptureLost`事件而不是处理`ValueChanged`事件。

```
private void slider_PointerCaptureLost(object sender, PointerRoutedEventArgs e)
{
    HandleSliderValueChange();
}

private void slider_KeyUp(object sender, KeyRoutedEventArgs e)
{
    //Make sure an arrow key, Home, or End was pressed
    //either explicitly perform the flag checks
    //if(e.Key.HasFlag(VirtualKey.Up & VirtualKey.Down & VirtualKey.Left & VirtualKey.Right & VirtualKey.Home & VirtualKey.End))

    //or check the int values
    int keyVal = (int)e.Key;
    if(keyVal >= 35 && keyVal <= 40)
       HandleSliderValueChange();
}

private void HandleSliderValueChange()
{
    //your value changed code
} 
```

这应该`HandleSliderValueChange`在用户完成拖动、单击滑块本身或使用箭头、Home 或 End 键更改值时调用该方法。

# javascript - Html 报价计算 - javascript

> ID：16025525
> 
> 赞同：-2
> 
> 时间：2013-04-15T22:09:08.170
> 
> 标签：javascript, html

我正在尝试计算我的 html 表单值。

我已经尝试了以下 javascript 计算，但它没有在我的总字段（'total1'）中计算一个值。javascript可能有问题还是我没有正确引用表单？

```
 <form action="" method="get" id="quote">

<table width="532" border="1" cellspacing="1" cellpadding="0.5">
  <tr>
    <th width="109" scope="col"><div align="center">Date</div></th>
    <th width="158" scope="col"><div align="center">Half day</div></th>
    <th width="112"><div align="center">Full day</div></th>
    <th width="134"><div align="center">Total for the day</div></th>
  </tr>
  <tr>
    <td><div align="center">
      <input name="date1" type="text" size="15" />
    </div></td>
    <td><div align="center">
      <input name="halfday1" type="text" size="15" maxlength="10" />
    </div></td>
    <td><div align="center">
      <input name="fullday1" type="text" size="15" />
    </div></td>
    <td><div align="center">
      <input name="total1" type="text" size="15" />
    </div></td>
  </tr>
  <tr>
    <td><div align="center">
      <input name="date2" type="text" size="15" />
    </div></td>
    <td><div align="center">
      <input name="halfday2" type="text" size="15" />
    </div></td>
    <td><div align="center">
      <input name="fullday2" type="text" size="15" />
    </div></td>
    <td><div align="center">
      <input name="total2" type="text" size="15" />
    </div></td>
  </tr>
  <tr>
    <td><div align="center">
      <input name="date3" type="text" size="15" />
    </div></td>
    <td><div align="center">
      <input name="halfday3" type="text" size="15" />
    </div></td>
    <td><div align="center">
      <input name="fullday3" type="text" size="15" />
    </div></td>
    <td><div align="center">
      <input name="total3" type="text" size="15" />
    </div></td>

  </tr>
  <tr>
    <td><div align="center"></div></td>
    <td><div align="center"></div></td>
    <td><div align="center"></div></td>
    <td><div align="center"></div></td>
  </tr>
</table>

</form>

      function doTotal(quote) {
    var a = (form.halfday1.value != '') ? eval(form.halfday1.value) : 0;
    var b = (form.fullday1.value != '') ? eval(form.fullday1.value) : 0;

    form.total1.value = a + b + c + d + e;
} 
```

[http://jsfiddle.net/ZR5LD/](http://jsfiddle.net/ZR5LD/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:25:26.617

[http://jsfiddle.net/ZR5LD/2/](http://jsfiddle.net/ZR5LD/2/)

```
function doTotal(form) {
    var a = (+form.halfday1.value);
    var b = (+form.fullday1.value);

    form.total1.value = a + b ;
}
document.getElementById("quote").onclick = function (){doTotal(this)}; 
```

我不知道 c,d,e 是什么，但`form`没有定义，我假设你的意思是 form `"quote"`。`doTotal`我还在表单的`onclick`属性中添加了调用

# java - Java pong 不能同时移动两个球拍

> ID：16025533
> 
> 赞同：2
> 
> 时间：2013-04-15T22:10:09.873
> 
> 标签：java, swing, keypress, pong

试图在 Java 中制作乒乓球，但不能同时移动两个桨。您可以移动其中一个，但不能同时移动两者。我需要用 2 个不同的面板创建 2 个线程吗？

这是我指定关键事件的地方

```
public void keyPressed(KeyEvent e) {

        if(e.getKeyCode() == KeyEvent.VK_A || e.getKeyCode() == KeyEvent.VK_S || e.getKeyCode() == KeyEvent.VK_QUOTE || e.getKeyCode() == KeyEvent.VK_SEMICOLON){
               if(e.getKeyCode() == KeyEvent.VK_A){
                   y-=10;
               }

         if(e.getKeyCode() == KeyEvent.VK_S){
                        y+=10;
                }

        if(e.getKeyCode() == KeyEvent.VK_QUOTE){
                ytwo-=10;
        }
         if(e.getKeyCode() == KeyEvent.VK_SEMICOLON){
                        ytwo+=10;
                }

        }
        } 
```

这是完整的代码

```
import java.awt.Color;
import java.awt.Event;
import java.awt.Graphics;
import java.util.Random;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Pong extends JFrame implements ActionListener{

        //implement constants

        PongPanel pongPanel = new PongPanel();  

        //JFrame pong x and y coordinates 
        static final int jfpX = 150;
        static final int jfpY = 20;

        // JFrame pong width and height
        static final int jfpW = 800;
        static final int jfpH = 600;

        Thread thrd;

        public static void main(String[] args) {
                Pong jfp = new Pong();
                jfp.setVisible(true);

        }

        public Pong(){
                setBounds(jfpX,jfpY,jfpW,jfpH); 
                setTitle("Pong");
                setResizable(false);
                setDefaultCloseOperation(EXIT_ON_CLOSE);
                setBackground(Color.black);

                add(pongPanel);
                addKeyListener(pongPanel);
                thrd = new Thread (pongPanel);
        thrd.start();
        }

        public void actionPerformed(ActionEvent e) {

        }

}

class PongPanel extends JPanel implements Runnable, KeyListener{
        Random random = new Random();
        static final int jpW = 800;
        static final int jpH = 600;
        int paddleStart = (jpH/2)-35;
        int paddleStarttwo = (jpH/2)-35;
        int ballStartX = (jpW/2)-20;
        int ballStartY = (jpH/2)-20;
        int ytwo,x,y;
        int ballD = 30;
        int paddleW1 = 20;
        int paddleH1 = 100;
        int paddleW2 = 20;
        int paddleH2 = 100;
        int min = -2;
        int max = 2;
        int randomBallx, randomBally;
//        int randomBallx = random.nextInt(max-min+1)+min;
//        int randomBally = random.nextInt(max-min+1)+min;

        int rand1 = random.nextInt(2-1 + 1)+1; // random for function to determine ballx and bally
        int rand2 = random.nextInt(2-1+2)+1;
        int dx = 4;
        int dy = 4; //direction of y

        public void ballNotZero(){// makes sure the ball doesnt go straight up and down
        if (randomBallx ==0){
              randomBallx = random.nextInt(max-min+1)+min;
             }
             if(randomBally == 0){
              randomBally=random.nextInt(max-min+1)+min;
             }
//         if(rand1 ==1){
//         randomBallx=-1;
//         }
//         if(rand1 ==2){
//         randomBallx=1;
//         }
//         if(rand2 ==1){
//         randomBally =-1;
//         }
//         if(rand2==2){
//         randomBally = 1;
//         }

        }

        public PongPanel(){

        }

        protected void paintComponent(Graphics g) 
        {
        super.paintComponent(g);

        Color ball;
        Color paddleOne;
        Color paddleTwo;
        ball = new Color(255,0,255);
        paddleOne = new Color(255,0,0);
        paddleTwo = new Color(0,0,255);

        g.setColor(ball);
        g.fillOval(ballStartX+randomBallx,ballStartY+randomBally,ballD,ballD);

        g.setColor(paddleOne);
        g.fillRect(20,paddleStart+y,paddleW1,paddleH1);

        g.setColor(paddleTwo);
        g.fillRect(760,paddleStarttwo+ytwo,paddleW2,paddleH2);

        }
        public void run() {
                while(true){
                ballNotZero(); 
                detectPaddle();
                randomBall();
                ballMove();
                repaint();
        try {Thread.sleep(75); } catch(Exception e){

        };

                }
        }
        public static boolean intervallContains(int low, int high, int n) { //determines if something is in a certain range
            return n >= low && n <= high;
        }
        public void detectPaddle(){  //determines if ball is close enough to paddle for detection
        int withinY = (paddleStart+y) -(ballStartY+randomBally);
        int withinY1 = (paddleStarttwo+ytwo)-(ballStartY+randomBally);

        if (ballStartX+randomBallx <=20  &&  intervallContains(-50,50,withinY)){
        dx = -dx;
        }
        if(ballStartX+randomBallx >=760 && intervallContains(-50,50,withinY1)){
        dx = -dx;
        }
        }

        public void randomBall(){
        if(randomBallx >=0 ){
        randomBallx+=dx;
        }
        if(randomBallx<0){
        randomBallx-=dx;
        }
        if(randomBally>=0){
        randomBally+=dy;
        }
        if(randomBally<0){
        randomBally-=dy;
        }
//                randomBallx+=randomBallx;
//                randomBally+=randomBally;
        }
        public void ballMove(){
        if(ballStartY+randomBally > jpH-60){
        dy= -dy;

        }
        if(ballStartY+randomBally <0){
        dy = -dy;
        }
        }

        public void keyPressed(KeyEvent e) {

        if(e.getKeyCode() == KeyEvent.VK_A || e.getKeyCode() == KeyEvent.VK_S || e.getKeyCode() == KeyEvent.VK_QUOTE || e.getKeyCode() == KeyEvent.VK_SEMICOLON){
               if(e.getKeyCode() == KeyEvent.VK_A){
                   y-=10;
               }

         if(e.getKeyCode() == KeyEvent.VK_S){
                        y+=10;
                }

        if(e.getKeyCode() == KeyEvent.VK_QUOTE){
                ytwo-=10;
        }
         if(e.getKeyCode() == KeyEvent.VK_SEMICOLON){
                        ytwo+=10;
                }

        }
        }

        public void keyTyped(KeyEvent e) {

        }

        @Override
        public void keyReleased(KeyEvent e) {
                // TODO Auto-generated method stub

        }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T22:16:54.903

*   不要使用`while (true)`，而是使用 Swing 计时器。
*   不要使用 KeyListeners 而是使用 Key Bindings。
*   考虑打开一个摇摆定时器（它可以充当你的“背景线程”），当绑定检测到正确的键被按下时，它会移动一个桨，
*   并在释放同一键时停止移动桨的计时器。
*   另一个桨也一样，但它的动作当然会响应不同键对的绑定。
*   当试图让这样的东西工作时，首先尝试让它在一个非常简单的程序中工作，一个没有主程序所需的所有其他垃圾，但一个允许你测试和证明你的概念的程序。然后，如果你在你的小程序中工作，很好，你将功能添加到你的主程序中。如果您的小程序代码不起作用并且需要我们的帮助，您可以在此处发布自包含的小程序（一个[sscce](http://sscce.org)）供我们测试和修改。

# java - 进程间测试

> ID：16025534
> 
> 赞同：-1
> 
> 时间：2013-04-15T22:10:21.147
> 
> 标签：java, python, testing

我有一个 Python 和一个 Java 应用程序 (GUI)，它们使用网络相互通信。

我应该使用什么策略来执行测试，即。如果我更改 Python 或 Java 代码中的任何内容，两者之间的流程不会以意想不到的方式中断？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:40:42.470

您可以编写一个集成测试，将两个项目的套接字代码放在一个执行您要测试的通信的测试工具中。也许您想从 Python 中执行此操作，方法是启动 python 进程，然后在此示例中使用子进程调用 Java 代码链接。 [Python：如何通过 python 脚本执行 jar 文件](https://stackoverflow.com/questions/7372592/python-how-can-execute-a-jar-file-through-a-python-script)

# c - Scanf() 不读取数字 0 或读取错误

> ID：16025536
> 
> 赞同：1
> 
> 时间：2013-04-15T22:10:21.903
> 
> 标签：c, scanf

你好我有一个litlle问题。我试图制作一个银行等待时间程序，但是当我用 scanf() 读取 0 值时，它没有读取或读取错误。我做了一些搜索，但注意到这解决了我的问题。

这是代码..它是C语言的。

```
#include <stdio.h>
int main(){
int c, n, t,i,d;//entradas do usuário (caixas, usuários, momento de chegada, tempo de atendimento
int menor_espera=0;// caixa de menor tempo de espera
int tempo_maximo = 20;// tempo maximo de espera por atencimento
int resultado=0;//Numero de pessoas com mais de 20 minutos de espera por atendimento

scanf(" %u %u %*c\n", &c, &n);// Lê o numero de caixas, numero de clientes no dia
if(c>0 && n>0){//iniciação só com valores positivos e possiveis c>1, n>1 (1 caixa e um cliente)
    int caixa[c];// declara o um vetor de caixas
    for(i=0;i<n;i++){// Loop de numero de usuários
    scanf(" %u %u %*c\n", &t, &d);//Lê um cliente (T e D)
    printf("print: %u %u\n", c, n);
        int j;
        for(j=0; j<c;j++){// loop de caixas
            if(caixa[j]<caixa[menor_espera]){//chaca se o caixa atual é o primeiro caixa disponivel (caixa com menos tempo de uso)
                menor_espera = j;//positivo, atualiza o caixa de menor espera
            }
        }if(caixa[menor_espera]-t>tempo_maximo){//checa se o cliente terá de esperar mais que o tempo maximo para ser atendido baseado na sua chegada
            resultado++;//positivo, atualiza o contador de usuário que esperaram mais que o tempo maximo
        }caixa[menor_espera] += d;// atualiza o tempo de uso do caixa que foi utilizado
    }
    printf("Resultado final: %d\n", resultado);// exibe resultado final
}getch(); 
```

}

这是一个输入

```
1 16
0 10
0 10
0 10
3 10
5 10
7 10
11 10
13 10
14 10
15 10
16 10
17 10
18 3
19 10
20 10
23 3 
```

这就是我的输出

```
print: 10 0
print: 0 0
print: 0 3
print: 0 5
print: 0 7
print: 0 11
print: 0 13
print: 0 14
print: 0 15
print: 0 16
print: 0 17
print: 0 18
print: 19 10
print: 0 10
print: 3 3
print: 3 3
Resultado final: 16 
```

但它不应该是这样的。

感谢任何帮助。如果我找到了解决方案，我会在这里发布。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:13:36.253

一个问题是您没有捕获或测试来自`scanf()`. 它返回它解析的项目数，或在 i/o 错误时返回 -1。

考虑这样的事情至少找出这是否可能是一个问题：

```
if (scanf(" %u %u %*c\n", &t, &d) < 2)  //Lê um cliente (T e D)
     printf ("input conversion or i/o error\n"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T22:20:33.743

这是有问题的：

```
scanf(" %u %u %*c\n", &c, &n); 
```

它查找两个数字、一些空格和一个被忽略的非空格字符，然后是更多的空格（可能是也可能不是换行符）。

给定您的输入文件，第一个`scanf()`内容为：

```
1 16
0 
```

下一个要读取的字符将是`1`第二`10`行数据的 。这就是你有问题的原因。

用于`fgets()`一次读取一行，并`sscanf()`解析该行。并测试两者的结果`fgets()`和`sscanf()`（或者`scanf()`如果你坚持使用它）。

这是您需要的近似值。

```
#include <stdio.h>

int main(void)
{
    int c, n, t,d;
    int menor_espera = 0;
    int tempo_maximo = 20;
    int resultado = 0;
    char line[4096];

    if (fgets(line, sizeof(line), stdin) != 0)
    {
        if (sscanf(line, "%u %u", &c, &n) != 2)
            return(1);
        if (c > 0 && n > 0)
        {
            int caixa[c];   // VLA - uninitialized
            for (int i = 0;i < n; i++)
            {
                if (fgets(line, sizeof(line), stdin) == 0)
                    break;  // EOF or error
                if (scanf(line, "%u %u", &t, &d) != 2)
                    break;  // EOF or error
                printf("print: %u %u\n", c, n);  // Not t and d??
                for (int j = 0; j < c; j++)
                {
                    // Accessing uninitialized data in caixa array!
                    if (caixa[j] < caixa[menor_espera])
                        menor_espera = j;
                }
                if (caixa[menor_espera] - t > tempo_maximo)
                    resultado++;
                caixa[menor_espera] += d;
            }
            printf("Resultado final: %d\n", resultado);
        }
    }
    return(0);
} 
```

我认为原始代码中存在一些逻辑错误（一些用注释突出显示），但我不确定应该更正什么。

# ruby - Selenium Grid 2 - Chromedriver 不会在新运行时启动新配置文件

> ID：16025537
> 
> 赞同：0
> 
> 时间：2013-04-15T22:10:28.583
> 
> 标签：ruby, selenium, webdriver, selenium-webdriver, selenium-chromedriver

`selenium webdriver`在使用( `chromedriver`) 和`ruby`和测试 Chrome 上的网站时`selenium grid 2`，我手动单击`Allow`以跟踪我的位置。

从那时起，每一次新的运行都从 Chrome 浏览器开始跟踪我的位置，不再请求许可。

据我了解，这不应该发生，因为 Selenium 应该创建一个新的配置文件并且不记得之前运行中的任何用户交互。

我还尝试以管理员身份（手动）打开 Chrome 浏览器并更改设置以忘记为正在测试的站点的位置服务设置的任何权限。但这也没有帮助。

我也尝试过重新启动电网，但这也无济于事。

有谁知道如何让浏览器忘记我的许可？

**更新**

启动驱动程序的代码

```
@driver = Selenium::WebDriver.for(:remote, :url => @sel_grid_url, :desired_capabilities => @browser) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:27:56.200

尝试这个..

```
profile = Selenium::WebDriver::Chrome::Profile.new

data = profile.as_json

caps = Selenium::WebDriver::Remote::Capabilities.chrome
caps['chromeOptions'] = {
  'profile'    => data['zip'],
  'extensions' => data['extensions']
}

driver = Selenium::WebDriver.for(:remote, :url => @sel_grid_url, :desired_capabilities => caps) 
```

还要验证您是否`Ask me when a site tries to track my physical location (recommended)`选中了 . 下的选项`Settings -> Advanced Settings -> Privacy -> Content Settings -> Location`。

**更新：**

再试一次。。

```
profile = Selenium::WebDriver::Chrome::Profile.new
profile['download.prompt_for_download'] = false
profile['download.default_directory'] = "/path/to/dir"
profile['profile.managed_default_content_settings.geolocation'] = 2 #Try 1 and 0 as well

data = profile.as_json

caps = Selenium::WebDriver::Remote::Capabilities.chrome
caps['chromeOptions'] = {
  'profile'    => data['zip'],
  'extensions' => data['extensions']
}

driver = Selenium::WebDriver.for(:remote, :url => @sel_grid_url, :desired_capabilities => caps) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T20:26:40.527

试试这个本地 WebDriver 修复：

```
@driver = Selenium::WebDriver.for(:chrome, :no_website_testing_defaults => true, :switches => %w[--disable-geolocation]) 
```

要远程执行此操作，我认为它可能看起来像这样：

```
caps = Selenium::WebDriver::Remote::Capabilities.chrome(:no_website_testing_defaults => true, :switches => %w[--disable-geolocation])
@driver = Selenium::WebDriver.for(:remote, :desired_capabilities => caps) 
```

有关使用开关的信息，请参阅 RubyBindings 文档[https://code.google.com/p/selenium/wiki/RubyBindings#Chrome](https://code.google.com/p/selenium/wiki/RubyBindings#Chrome)

您可以在此处查看 Chrome 开关列表：http: [//peter.sh/experiments/chromium-command-line-switches/](http://peter.sh/experiments/chromium-command-line-switches/)

**更新**

看起来 Chromedriver 需要先关闭测试默认值，然后才能设置一些设置（如地理位置跟踪）（根据此处找到的 ChromeDriver Capabilities wiki 的修订版：[http ://wiki.chromedriver.googlecode.com/git-history /c790ec6b0b32a31a8797a0fa97b7f4dccb4f5da4/CapabilitiesAndSwitches.wiki](http://wiki.chromedriver.googlecode.com/git-history/c790ec6b0b32a31a8797a0fa97b7f4dccb4f5da4/CapabilitiesAndSwitches.wiki) )。

我更新了上面的代码以包含要设置为关闭测试默认值的配置（请参阅[http://code.google.com/p/chromium/issues/detail?id=113884](http://code.google.com/p/chromium/issues/detail?id=113884)和[http://code.google.com /p/selenium/issues/detail?id=4622](http://code.google.com/p/selenium/issues/detail?id=4622)）。

请确保您使用的是 selenium-webdriver 2.26.0 或更高版本。

# design-patterns - 在域模型中使用大量服务类是什么的标志

> ID：16025538
> 
> 赞同：3
> 
> 时间：2013-04-15T22:10:30.827
> 
> 标签：design-patterns, domain-driven-design

我最近尝试练习 DDD，我发现我自己正在转向许多领域模型对象，这些对象是纯数据结构，在领域模型中没有行为和大量服务，我想知道这是否是糟糕设计、影响的标志我的设计中的架构（实体框架）或使用错误的技术来开发这种应用程序，我认为这是一个 90% 的 CRUD 应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T07:55:48.960

领域服务的百分比并不是衡量领域模型质量的有用指标。

**但是，如果您需要域模型，** “没有行为的纯数据结构”是**[代码异味](http://en.wikipedia.org/wiki/Anemic_domain_model)**。

现在，如果您的应用程序处理的业务非常复杂以至于您需要领域专家来理解它，那么您就需要一个领域模型。很少有应用程序需要 DDD（Evans 曾说过只有 5%），但它们通常是高预算的。这样的预算来自两个考虑：业务的**高度复杂性**和利益相关者从中获得的**竞争优势**。

即使是整个项目中域类的百分比也不是一个有用的指标：例如，在 CQRS 应用程序中，您将拥有许多 DTO，但您仍然可以拥有一个接收命令的良好域模型。此外，拥有 90% 的 CRUD 应用程序很好，它**在有界的操作上下文**中需要域模型来强制执行复杂的业务不变量。

但是，如果您不需要领域专家，您可能不需要领域模型。

如果是这样，请记住**流行语驱动的开发**非常昂贵。[如果你真的不需要它，你不](http://www.slideshare.net/giacomotesio/epicnet-processes-patterns-and-architectures)
应该“尝试”使用 DDD 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T22:27:08.777

如果应用程序确实是 90% 的 CRUD，那么它没有富域。DDD 适用于富域，可能不适合该应用程序。正如第一条评论所指出的，您所拥有的是贫血域模型，它在 DDD 的上下文中被认为是一种反模式，但实际上对于大多数应用程序来说已经足够了。Eric Evans 在他的书中指出，大多数时候 DDD 是不必要的。

# php - PHP、MySQL、FastCGI - 处理许多查询的最佳方式

> ID：16025541
> 
> 赞同：0
> 
> 时间：2013-04-15T22:10:39.040
> 
> 标签：php, mysql, pdo

我试图找出通过 FastCGI 和使用 PHP-FPM 在 PHP、MySQL 设置中处理数据库通信的最佳方法；这适用于一个使用量相对较大的站点，每秒有 100 到 1,000 个 SQL 查询，所以我想让事情尽可能高效。

我正在重写网站的部分内容，并且在新代码中我正在使用 PDO，并通过执行 database::insertEmployee($name, $SIN, $DOB, $position) 来处理 DB 查询和连接。我担心的是，每次查询都会建立一个新的 PDO 连接。我应该尝试建立持久连接吗？？？

```
class database
{
    protected $dbh;
    protected static $instance;

    private function __construct()
    {
        try {
        // building data source name from config
            $dsn = 'mysql:=' . DB_Config::read('db.host') .
                   ';dbname='  . DB_Config::read('db.name');
            $user = DB_Config::read('db.user');
            $password = DB_Config::read('db.password');
            $this->dbh = new PDO($dsn, $user, $password);
            $this->dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        } catch (PDOException $e) {
            //@TODO-KP: log and alert
            print "Error!: " . $e->getMessage() . "<br/>";
            die();
        }

    }

    public static function getInstance()
    {
        if (!isset(self::$instance)) {
            $object = __CLASS__;
            self::$instance = new $object;
        }
        return self::$instance;
    }

    public static function insertEmployee($name, $position, $SIN, $DOB)
    {
        $dbi = self::getInstance();

        try {
            $sthEmployee = $dbi->dbh->prepare('INSERT INTO employees SET
                                                name = :name
                                                , position = :position
                                                , SIN = :SIN
                                                , DOB = :DOB'
            );

            $sthEmployee->bindParam(':name', $name);
            $sthEmployee->bindParam(':position', $position);
            $sthEmployee->bindParam(':SIN', $SIN);
            $sthEmployee->bindParam(':DOB', date('Y-m-d G:i:s', $DOB));

            return $sthEmployee->execute();

        } catch (PDOException $e) {
            //@FIXME-KP: log and alert
            print "Error!: " . $e->getMessage() . "-- name [$name]";
            return '';
        }
    }
} 
```

任何关于最有效方法的想法都将非常非常感激！

凯瑟琳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:15:38.487

> 我担心的是，每次查询都会建立一个新的 PDO 连接。

好吧，请验证您的担忧，因为我会说情况可能并非如此。

出于性能原因，请注意在后台使用 mysql 本机驱动程序，因为这允许 PHP 与数据库交互的扩展指标。

还可以从 Oracle 获得针对 Mysql 的专业支持计划，他们有很好的监控工具和非常好的支持，可以帮助您准备好数据库和 PHP 代码以处理流量。

# sql - 尝试使用连接查找从一年到下一年的继续学生

> ID：16025545
> 
> 赞同：0
> 
> 时间：2013-04-15T22:10:47.617
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2

我正在尝试查找 2007 年返回的 2006 年学生记录。我有一个 2006 年的文件和一个 2007 年的文件。我有以下查询，但不确定我是否使用了正确的联接。也应该是 File2006.ENTRY CODE = 'CONT' 或 File2007.ENTRY CODE = 'CONT'

“CONT”表示学生从 2006 年持续到 2007 年

```
SELECT * 
FROM File2006 inner join File2007 ON File2006.StudentID = File2007.StudentID
WHERE File2006.ENTRY CODE = 'CONT' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:13:52.080

不，我认为您需要在这里使用 where 子句。`Inner join`将返回两年的普通学生

```
SELECT * FROM
File2006 inner join File2007 ON File2006.StudentID = File2007.StudentID 
```

如果*“CONT”表示学生从 2006 年持续到 2007 年，* 那么为什么不使用简单的选择查询来获取那些有`code='CONT'`

```
SELECT * FROM File2007.ENTRYCODE = 'CONT' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:14:56.950

您可以使用`EXISTS`：

```
SELECT * 
FROM   file2006 f6
WHERE EXISTS
(
   SELECT 1 FROM file2007 f7 
   WHERE f6.studentid = f7.studentid 
   AND ( f6.entry_code = 'CONT' OR f7.entry_code = 'CONT' )
) 
```

# vb.net - 将标签页和数据动态加载到这些标签页中

> ID：16025547
> 
> 赞同：0
> 
> 时间：2013-04-15T22:10:57.790
> 
> 标签：vb.net

我是新学习者。我正在用 Visual Basic 创建一个应用程序，我需要帮助才能将数据库中的动态数据加载到我的标签页中。

我希望 TabPages 名称为“Category Names”（来自 Tbl_Category），并且在每个 Tabpages 中我希望创建按钮，这些按钮是来自“Tbl_ItemDetails.

按钮名称将来自“ItemSKU”列。按钮图像将来自“Item_Image”列。

我搜索了很多，但无法做到。请帮助我。如果你们知道任何其他方式（没有标签页），请分享。谢谢！

这是我尝试过的一些代码。1.图像代码不起作用。2\. 如果我在标签页上有更多项目，它不会显示任何滚动条。所以我只能看到几个按钮而不是全部。![在此处输入图像描述][1]

私有子 AddProductsToTabbedPanel()

```
 Dim i As Integer = 1
    For Each tp As TabPage In TabControl1.TabPages
        Dim filteredProduct As ObjectQuery(Of Tbl_ItemDetails) = New ObjectQuery(Of Tbl_ItemDetails)(("SELECT VALUE P FROM Tbl_ItemDetails AS P WHERE P.CatID = " + i.ToString), cse)
        Dim flp As FlowLayoutPanel = New FlowLayoutPanel
        flp.Dock = DockStyle.Fill
        For Each tprod As Tbl_ItemDetails In filteredProduct
            Dim b As Button = New Button
            b.Size = New Size(100, 100)
            b.Text = tprod.ItemSKU

            ' ''how can i get image on button. bellow code is not working

            'b.BackgroundImage = tprod.Item_Image
            'b.Image = tprod.Item_Image

            b.Tag = tprod
            AddHandler b.Click, AddressOf Me.UpdateProductList
            flp.Controls.Add(b)

        Next
        tp.Controls.Add(flp)
        i = (i + 1)

    Next

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T07:19:28.497

## 1：图像将如何工作

a) 如果您只提供现有文件的路径名

```
 button.Image = New Bitmap("C:\temp\Info.bmp") 
```

b）如果您从包含位图的数据库中获取字节数组

```
 Dim byteArrayFromDB As Byte()
  Dim memStream As System.IO.MemoryStream
  Dim img As Image

  memStream = New System.IO.MemoryStream(byteArrayFromDB)
  img = Image.FromStream(memStream) 
```

## 2：可滚动的FlowLayoutPanel

```
 flp.AutoScroll = True 
```

# javascript - esri javascript api 符号化图层

> ID：16025553
> 
> 赞同：0
> 
> 时间：2013-04-15T22:11:24.807
> 
> 标签：javascript, api, layer, esri, arcgis-js-api

我在这里有一个工作应用程序：http: [//dola.colorado.gov/gis-cms/sites/default/files/html/census2000v2.html](http://dola.colorado.gov/gis-cms/sites/default/files/html/census2000v2.html)

我在 ArcGIS Online 中使用 Javascript API。我在 AGOL 的“网络地图”中加载并预符号化了一堆图层。

我希望能够使用 javascript 动态自定义每一层的符号系统。理想情况下，我希望使用渲染器并能够为每个人口统计变量创建不同的符号系统。

我碰到了一堵大砖墙。为了能够更改符号系统，我需要能够遍历特征集中的图形——但我不知道从哪里获取特征集对象。我看到的所有示例都使用通过 URL 加载的“特征层”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T09:00:30.173

我认为首先您需要从网络地图中获取图层：

```
var featureLayer = mapObject.getLayer(layerName) 
```

然后您可以查询`featurelayer`，这将返回一个`featureSet`.

这是一个例子：

```
var query = new esri.tasks.Query();
query.outFields = ["*"];

featureLayer.queryFeatures(query, function(featureSet) {
    //do something with the featureSet here!
}); 
```

# python - 在特定文件夹中循环具有特定名称的文件

> ID：16025567
> 
> 赞同：-1
> 
> 时间：2013-04-15T22:13:02.220
> 
> 标签：python, file-io

我正在尝试编写一个脚本，但可以考虑任何花哨的东西（我对 Python 有点陌生）。这是我需要的。有一个根文件夹，我需要在其中找到具有特定名称的所有文件夹，在这些文件夹中找到具有特定名称的文件，在该文件中找到特定字符串并从该字符串中获取一个数字。

我尝试做 os.walk 等，但不知道如何正确指定所有条件。提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:24:24.033

```
import os

def find(file):
    #your code to retrieve number from some file

def search(loc='.'):
    for content in os.listdir(loc):
        pth = os.path.join(loc, content)
        if os.path.isdir(pth): #is it a folder?
            if #specific-name-in-folder:
                search(pth)
        elif #it is a file, but if there is specific-name-in-file:
            find(pth) 
```

使用`os`和`os.path`处理文件系统。

# paypal - 嵌入式 PayPal 登录按钮

> ID：16025569
> 
> 赞同：1
> 
> 时间：2013-04-15T22:13:10.307
> 
> 标签：paypal, paypal-sandbox

全部，

我正在尝试基于[https://developer.paypal.com/webapps/developer/docs/classic/loginwithpaypal/integration/](https://developer.paypal.com/webapps/developer/docs/classic/loginwithpaypal/integration/)向我的网站添加一个 PayPal 登录按钮。目前，我正在使用 PayPal 沙箱，因此我使用静态 AppID“APP-80W284485P519543T”（[https://www.x.com/developers/paypal/documentation-tools/quick-start-guides/paypal-apis-getting-started -指南](https://www.x.com/developers/paypal/documentation-tools/quick-start-guides/paypal-apis-getting-started-guide)）。

以下是我的 JavaScript 代码

```
 <script src="https://www.paypalobjects.com/js/external/api.js"></script>
    <script>
        paypal.use( ["login"], function(login) {
        login.render ({
            "appid": "APP-80W284485P519543T",
            "authend": "https://www.sandbox.paypal.com/",
            "scopes": "profile email address phone https://uri.paypal.com/services/paypalattributes",
            "containerid": "myContainer",
            "locale": "en-us",
            "returnurl": "http://localhost:3000/"
            });
        });
    </script> 
```

当我运行它时，我收到错误“依赖方验证错误：请求中提供的 client_id 与任何注册的客户端都不匹配。请检查请求。”

知道为什么以及如何解决它吗？

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T18:06:35.643

这发生在我身上。

在沙盒中创建卖家。

[https://developer.paypal.com/webapps/developer/applications/accounts](https://developer.paypal.com/webapps/developer/applications/accounts)

转到卖家的个人资料并检查使用 PayPal 凭据登录下的客户 ID，将其用作您的 appid。我也只使用“沙盒”作为“authend”的值

有趣的是，在我执行以下步骤并再次检查个人资料之前，我没有出现使用 PayPal 凭据登录，我真的不知道为什么：

使用创建的卖家账户登录 www.sandbox.paypal.com

转到：配置文件->请求 API 凭据 选项 1 - PayPal API 设置 PayPal API 凭据和权限 选项 2 - 请求 API 凭据以创建您自己的 API 用户名和密码。

此外，它只有在我在生产中创建一个假应用程序时才开始工作......

新的沙盒仍然是测试版...

让我知道它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T14:04:05.897

您必须提供有效的 client_id，如

> [https://developer.paypal.com/webapps/developer/applications/accounts](https://developer.paypal.com/webapps/developer/applications/accounts)

使用 PayPal 按钮登录正在发送到下面的 URI，其中包含 client_id

[https://www.paypal.com/webapps/auth/protocol/openidconnect/v1/authorize](https://www.paypal.com/webapps/auth/protocol/openidconnect/v1/authorize)？**client_id=eee5d94d000903b29b1263ae5654b369** &response_type=code&scope=openid%20profile%20email%20address%20https://uri.paypal.com/services/paypalattributes&redirect_uri= [https://developer.paypal.com/webapps/developer/access&nonce=05d0a60ee1f44361f449496505e05116&state=784d8bc3fe3a48a5105b4f8ddd8ae0e7](https://developer.paypal.com/webapps/developer/access&nonce=05d0a60ee1f44361f449496505e05116&state=784d8bc3fe3a48a5105b4f8ddd8ae0e7)

# xcode - xcode 不在提交窗口中显示文件

> ID：16025573
> 
> 赞同：2
> 
> 时间：2013-04-15T22:13:27.650
> 
> 标签：xcode

我检查了一个 SVN 项目的副本，我修改了一些文件并希望提交更改。如果我转到文件 > 源代码管理 > 提交。我看到一个空列表和一个显示“提交 X 文件”的按钮。我期望修改文件的列表。

现在，我使用命令行工具（svn ...）。但我想带回 Xcode 提交窗口。我该如何解决？

顺便提一句。我正在使用 Xcode 4.6.1

![这就是我所看到的](https://i.stack.imgur.com/Iffqm.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:17:03.910

这是一个非常非常奇怪的屏幕截图。有时 Xcode 的 svn 集成可能有点奇怪。如果我是你，我会取消奇怪的空对话框，而是在终端的命令行中使用 svn。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-12T02:01:25.193

在文件 > 首选项中有一个源代码控制部分。您可能已选中复选框以自动更新源代码管理。所以，因为它已经在更新源代码控制，所以它不允许你这样做。

因此，您可以取消选中该框以使其不自动，然后更改项目中的某些内容并尝试提交更改。您现在可能会看到一些文件。

# php - PHPUnit 锁定对象

> ID：16025574
> 
> 赞同：0
> 
> 时间：2013-04-15T22:13:28.807
> 
> 标签：php, codeigniter, tdd, phpunit

我有一个关于 PHPUnit 以及它似乎如何锁定对象的问题，以及我是否以不正确的方式进行测试，或者它是否只是 PHPUnit 上的某些东西。这是我的测试代码

```
$t = Track::create(array('name'=>'test track'));
$this->assertEquals(0, $t->student_tracks, 'Empty track should be empty');
$st = StudentTrack::create(array('track_id' => $t->id, 'completion'=>'0')); //Add item
$this->assertEquals(1, $t->student_tracks, 'There should now be something in this track'); 
```

最后一个断言失败。数据库中的所有内容看起来都是正确的，如果我 print_r 两个对象（$t 和 $st）它都会显示正确的信息。在研究了这些问题后，我发现如果我在第一个断言之前添加一个克隆，它就可以工作：

```
$t = Track::create(array('name'=>'test track'));
$cl = clone $t;
$this->assertEquals(0, $cl->student_tracks, 'Empty track should be empty');
$st = StudentTrack::create(array('track_id' => $t->id, 'completion'=>'0')); //Add item
$this->assertEquals(1, $t->student_tracks, 'There should now be something in this track'); 
```

所以我的问题是：

1.  PHPUnit 是否会锁定对象，因此我无法在断言后使用它？

2.  我测试错了吗，每次测试我应该只有一个断言吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:20:06.303

> PHPUnit 是否会锁定对象，因此我无法在断言后使用它？

不，PHPUnit 在这个方向上什么也没做。

> 我测试错了吗，每次测试我应该只有一个断言吗？

您可能测试错误，但不是因为断言的数量。每个测试可以有多个断言，但实际上，在你的情况下，这闻起来有点像你想使用[*Data Provider*](http://www.phpunit.de/manual/3.8/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.data-providers)。

```
class DataTest extends PHPUnit_Framework_TestCase
{
    /**
     * @dataProvider provider
     */
    public function testStudentTracks($track, $expected, $message)
    {
        $this->assertEquals($expected, $track->student_tracks, $message);
    }

    public function provider()
    {
        return array(
          array(TrackTestCreator::createWithNoStudenTracks(), 0, 'Empty track should be empty'),
          array(TrackTestCreator::createWithOneStudenTracks(), 1, 'There should now be something in this track'),
        );
    }
} 
```

测试的一个关键点是让它们保持简单。例如，您很可能在创建对象时出错，因此您测试了一些您可能期望但您不知道的东西。因此测试失败。那你就纳闷了。

这就是为什么在我给出的示例中，我创建了另外两个全局函数来说明它们返回的内容。你需要实现它们中的每一个，如果你这样做是孤立的，你更有可能发现错误。

# django - 简单的 GET 请求返回空

> ID：16025576
> 
> 赞同：0
> 
> 时间：2013-04-15T22:13:36.433
> 
> 标签：django

这是我的 HTML 代码：

```
{% extends "base.html" %}

{% block content %}

<form class="form-horizontal" action="/application/" method="get">
    <div class="control-group">
        <label class="control-label" for="userid">User ID</label>
        <div class="controls">
            <input type="text" id="userid" placeholder="Email">
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="pass">Password</label>
        <div class="controls">
            <input type="password" id="pass" placeholder="Password">
        </div>
    </div>
    <div class="control-group">
        <div class="controls">
              <input type="submit" class="btn" value="Sign in">
            <br>
            <a href="forgot">Forgot password?</a>
            <br>
            <a href="change">Change password?</a>
        </div>

    </div>

</form>

{% endblock %} 
```

在我看来，这是我的功能：

```
def application(request):
    print request.GET
    message=[]
    for key,value in request.GET:
        message.append("%s:%s"%key,value)
    return HttpResponse(message) 
```

无论我输入什么，我的'print request.GET'都会打印一个 `<QueryDict: {}>`.

我不知道如何调试它。有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:31:28.613

您的所有输入都没有`name`属性，

`name`属性是用来为 GET 请求填充数据的。

`<input type="password" id="pass" name="pass" placeholder="Password">`

上面将显示与 key `name`in`request.GET`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:26:33.347

您正在返回最后一条消息，我想您想改为呈现模板？

请改用[render_to_response](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#django.shortcuts.render_to_response)。

# c# - 指定父 MDI 表单

> ID：16025583
> 
> 赞同：0
> 
> 时间：2013-04-15T22:14:11.407
> 
> 标签：c#, .net, winforms, mdi

在 c# 中显示表单时，我试图指定父 MDI 表单

所有的例子都建议只使用

```
FormVariable.Parent = this; 
```

假设您希望始终从父窗口打开表单，这可以正常工作。

我希望能够通过指定名称打开一个表单并将父表单设置为我的 MDI 父表单。

在 VB.net 我用过

```
Me.MdiParent = TheNameOfMyParentForm 
```

当我在 c# 中尝试类似的东西时

```
this.MdiParent = CruxMDI(); 
```

我明白了

> “Crux.CruxMDI”是一种“类型”，但用作“变量”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:23:59.097

`Form.MdiParent`必须引用一个具体的实例。所以，也许在父容器中实现一个单例模式（您可能不想允许多个父窗口，对吗？）是个好主意，这样您就可以从任何需要的地方引用它。然后你只需输入：

```
this.MdiParent = CruxMDI.Instance; 
```

如果您想自动添加此类行为并且它需要在您的应用程序中的许多表单中发生，您可以在创建从 Form 继承的自定义基类时考虑一个选项。这样，您只需指定一次，然后您只需要确保从该基类继承您的新表单，而不是默认表单。

无论哪种方式，您都需要某种机制来引用 MDI 容器的实例。

# database - Delphi - 数据库刷新替代

> ID：16025585
> 
> 赞同：3
> 
> 时间：2013-04-15T22:14:20.363
> 
> 标签：database, delphi, firebird

我在一个显示许多计算的软件中使用 Delphi 和 Firebird DB，并且根据要求，每当其他相关表被更新时，我需要存储和显示总数。

我目前正在对几个 TIBTable 组件使用刷新方法来向用户显示这些计算的结果。考虑到这是一个多用户应用程序以及刷新会使发布速度变慢的事实，是否有任何替代刷新或更优化的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T06:06:15.860

对于客户端需要接收通知的多用户应用程序，一种选择是使用**[Firebird 事件](http://www.janus-software.com/fbmanual/manual.php?book=psql&topic=102)**为每次数据更改（SQL INSERT、UPDATE 或 DELETE）发送“广播”消息。

客户端可以“注册”（监听）特定的消息类型，并且每当 Firebird 服务器发送此类型的消息时，他们都会接收它，并运行客户端应用程序代码，在您的情况下，这将刷新用户界面对象以显示全部的。

虽然这在许多简单的用例中可能是一个足够的解决方案，但也有一些限制。我最近在这里写了关于这个主题的博客：

*   [Firebird 数据库事件和面向消息的中间件](http://mikejustin.wordpress.com/2012/11/06/firebird-database-events-and-message-oriented-middleware/)

（我是 Delphi 和 Free Pascal 中间件库的作者）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T22:20:10.730

确实没有办法刷新以获取新数据。但是，如果您使用[IBObjects](http://www.ibobjects.com/)进行数据库访问，则可以使用该`TIBOTable.InvalidateBookmark`方法使其仅刷新特定行。这比调用`Refresh`刷新整个数据集要快得多。

查看[文档](http://docwiki.embarcadero.com/Libraries/XE2/en/IBTable.TIBTable)，不幸的是，TIBTable 似乎没有任何可比性。

# merge - 关于 Pandas 合并的困惑

> ID：16025586
> 
> 赞同：1
> 
> 时间：2013-04-15T22:14:23.490
> 
> 标签：merge, pandas

我正在尝试合并两个没有索引的熊猫数据框：

```
In [127]: df1
Out[127]: 
   value1        date id    value2    group
0 -0.2284  2012-04-01  a -0.067469  group d
1 -0.4875  2012-04-01  b -0.021274  group d
2  0.1139  2012-04-01  c -0.015978  group d
3  0.3191  2012-04-01  d  0.022634  group d
4 -0.0077  2012-04-01  e  0.000000  group d

In [128]: df2
Out[128]: 
             date id      value2    group
23044  2012-04-01  a -0.06701001  group c
23045  2012-04-01  b    -0.02128  group c
23046  2012-04-01  c           0  group c
23047  2012-04-01  d           0  group c
23048  2012-04-01  e           0  group c

In [129]: pd.merge(df1, df2, how = 'outer', on = ['date', 'id', 'value2', 'group'])
Out[129]: 
   value1        date id    value2    group
0 -0.2284  2012-04-01  a -0.067469  group d
1 -0.4875  2012-04-01  b -0.021274  group d
2  0.1139  2012-04-01  c -0.015978  group d
3  0.3191  2012-04-01  d  0.022634  group d
4 -0.0077  2012-04-01  e  0.000000  group d
5     NaN  2012-04-01  a -0.067010  group c
6     NaN  2012-04-01  b -0.021280  group c
7     NaN  2012-04-01  c  0.000000  group c
8     NaN  2012-04-01  d  0.000000  group c
9     NaN  2012-04-01  e  0.000000  group c 
```

这几乎是所需的输出，除了我希望根据日期和 id 由组 d 中的 value1 填充 c 组的 value1 的 NaN。实现这一目标的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:57:54.980

我认为这不可避免地是一个两步过程。

要“填写”value1，您需要将任何和所有具有相同（日期、id）的行关联起来，而不管组或值如何。

```
In [5]: df3 = df2.set_index(['date', 'id']).join(
  ....:     df1.set_index(['date', 'id'])['value1']).reset_index() 
```

要获得最终结果，您将按所有属性列出可区分的行，不再将组和值混为一谈。

```
In [6]: pd.merge(df1, df3, how = 'outer', 
  ....:     on = ['date', 'id', 'value1', 'value2', 'group'])
Out[6]: 
   value1        date id    value2    group
0 -0.2284  2012-04-01  a -0.067469  group_d
1 -0.4875  2012-04-01  b -0.021274  group_d
2  0.1139  2012-04-01  c -0.015978  group_d
3  0.3191  2012-04-01  d  0.022634  group_d
4 -0.0077  2012-04-01  e  0.000000  group_d
5 -0.2284  2012-04-01  a -0.067010  group_c
6 -0.4875  2012-04-01  b -0.021280  group_c
7  0.1139  2012-04-01  c  0.000000  group_c
8  0.3191  2012-04-01  d  0.000000  group_c
9 -0.0077  2012-04-01  e  0.000000  group_c 
```

# delphi-7 - ConvertHexToWideString - 反向函数

> ID：16025587
> 
> 赞同：0
> 
> 时间：2013-04-15T22:14:27.270
> 
> 标签：delphi-7

我正在使用此功能，需要反向功能。它将 HEX (unicode) 字符串转换为 unicode (WideString)。我需要反向函数将其转换回来，即 Widestring 回 HEX（unicode）。

```
function _ConvertHexToWideString(AHex: AnsiString): WideString;
var wBinaryStream: TMemoryStream;
begin

  try
    wBinaryStream := TMemoryStream.Create;

    try
      wBinaryStream.Size := Length(AHex) div 2;

      if wBinaryStream.Size > 0 then
        HexToBin(PAnsiChar(AHex), wBinaryStream.Memory, wBinaryStream.Size);
    except
    end;
    SetString(Result, 
              PWideChar(wBinaryStream.Memory), 
              wBinaryStream.Size div SizeOf(WideChar));
  finally
    FreeAndNil(wBinaryStream);
  end;
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T23:10:52.700

您只需使用`BinToHex()`相反的方法，例如：

```
function _ConvertWideStringToHex(AStr: WideString): AnsiString;
var
  wBinaryStream: TMemoryStream;
  iBufSize: Integer;
begin
  try
    wBinaryStream := TMemoryStream.Create;
    try
      iBufSize := Length(AStr) * SizeOf(WideChar);
      wBinaryStream.Size := iBufSize * 2;
      if iBufSize > 0 then
        BinToHex(PAnsiChar(Pointer(AStr)), PAnsiChar(wBinaryStream.Memory), iBufSize);
    except
    end;
    SetString(Result, 
              PAnsiChar(wBinaryStream.Memory), 
              wBinaryStream.Size div SizeOf(AnsiChar));
  finally
    FreeAndNil(wBinaryStream);
  end;
end; 
```

可以简化为：

```
function _ConvertWideStringToHex(AStr: WideString): AnsiString;
var
  iBufSize: Integer;
begin
  iBufSize := Length(AStr) * SizeOf(WideChar);
  if iBufSize > 0 then begin
    SetLength(Result, iBufSize * 2);
    BinToHex(PAnsiChar(Pointer(AStr)), PAnsiChar(Result), iBufSize);
  end else
    Result := '';
end; 
```

# sql - VB.Net 更新不更新我的数据库

> ID：16025588
> 
> 赞同：0
> 
> 时间：2013-04-15T22:14:37.280
> 
> 标签：sql, vb.net, sql-update, parameterized-query

这是我要运行的代码。它会正常运行，但不会更新我的数据库。

当它没有参数化时它会起作用，但是当我在其中添加参数时它开始起作用。这是有问题的代码。

```
Public Sub updateItem()

    Dim sqlConnection1 As New OleDb.OleDbConnection(dbProvider + dbSource)
    Dim cmd As New OleDb.OleDbCommand

    cmd.CommandText = "Update Inventory set PartNumber='@PartNumber', Brand='@Brand', PartDescription='@PartDescription', PartCost=@PartCost, InventoryOnHand=@InventoryOnHand, PartSupplier='@PartSupplier' where PartNumber = '@PartNumMatch' and Brand = '@PartManMatch';"
    cmd.Parameters.AddWithValue("@PartNumber", partNumberText.Text().ToUpper())
    cmd.Parameters.AddWithValue("@Brand", ManufacturerText.Text())
    cmd.Parameters.AddWithValue("@PartDescription", partDescriptionText.Text())
    cmd.Parameters.AddWithValue("@PartCost", Convert.ToDouble(partCostText.Text()))
    cmd.Parameters.AddWithValue("@InventoryOnHand", Convert.ToInt32(quantityText.Text()))
    cmd.Parameters.AddWithValue("@PartSupplier", partSupplierText.Text())
    cmd.Parameters.AddWithValue("@PartNumMatch", partNumberText.Text().ToUpper().Trim())
    cmd.Parameters.AddWithValue("@PartManMatch", ManufacturerText.Text().ToUpper().Trim())

    cmd.CommandType = CommandType.Text
    cmd.Connection = sqlConnection1

    Try

        sqlConnection1.Open()

        cmd.ExecuteNonQuery()

        sqlConnection1.Close()

    Catch ex As Exception
        MessageBox.Show(ex.Message)
        sqlConnection1.Close()
    End Try

    'SQl statement to try to update the selected row's data matched against the database.

    'update listview here.
End Sub 
```

我几乎可以肯定语法是正确的，因为我的插入有效。这是我插入的代码。

```
Private Sub addItem()
    'SQL statement here to add the item into the database, if successful, move the information entered to listview.

    Dim sqlConnection1 As New OleDb.OleDbConnection(dbProvider + dbSource)
    Dim cmd As New OleDb.OleDbCommand
    'Dim reader As SqlDataReader

    cmd.CommandText = "Insert into Inventory ([PartNumber], [Brand], [PartDescription], [PartCost], [InventoryOnHand], [PartSupplier]) values (@PartNumber, @Brand, @PartDescription, @PartCost, @InventoryOnHand, @PartSupplier);"
    cmd.Parameters.AddWithValue("@PartNumber", partNumberText.Text().ToUpper().Trim())
    cmd.Parameters.AddWithValue("@Brand", ManufacturerText.Text().ToUpper().Trim())
    cmd.Parameters.AddWithValue("@PartDescription", partDescriptionText.Text().Trim())
    cmd.Parameters.AddWithValue("@PartCost", partCostText.Text())
    cmd.Parameters.AddWithValue("@InventoryOnHand", quantityText.Text())
    cmd.Parameters.AddWithValue("@PartSupplier", partSupplierText.Text().Trim())
    cmd.CommandType = CommandType.Text
    cmd.Connection = sqlConnection1
    Dim found As Boolean = False

    Try
        sqlConnection1.Open()

        cmd.ExecuteNonQuery()

        MessageBox.Show(cmd.CommandText)

        sqlConnection1.Close()

    Catch ex As Exception
        MessageBox.Show(ex.Message)
        sqlConnection1.Close()
    End Try

End Sub 
```

我知道 where 子句是正确的，我对值进行了硬编码，我还将值与消息框进行比较，并将它们直接与数据库中的信息进行比较。

提前感谢任何和所有的意见，我希望我们能弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:20:05.817

参数占位符不应用单引号括起来

```
cmd.CommandText = "Update Inventory set PartNumber=@PartNumber, Brand=@Brand, " + 
                  "PartDescription=@PartDescription, PartCost=@PartCost, " + 
                  "InventoryOnHand=@InventoryOnHand, PartSupplier=@PartSupplier " +  
                  "where PartNumber = @PartNumMatch and Brand = @PartManMatch;" 
```

您不需要这样做，它只会混淆尝试将参数占位符替换为实际值的代码。它们将被视为文字字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T06:26:13.407

尝试这个，

```
cmd.CommandText = "Update Inventory set PartNumber=@PartNumber, Brand=@Brand, " + 
                  "PartDescription=@PartDescription, PartCost=@PartCost, " + 
                  "InventoryOnHand=@InventoryOnHand, PartSupplier=@PartSupplier " +  
                  "where PartNumber = @PartNumMatch and Brand = @PartManMatch;"

cmd.Parameters.AddWithValue("@PartDescription", partDescriptionText.Text())
cmd.Parameters.AddWithValue("@PartCost", Convert.ToDouble(partCostText.Text()))
cmd.Parameters.AddWithValue("@InventoryOnHand", Convert.ToInt32(quantityText.Text()))
cmd.Parameters.AddWithValue("@PartSupplier", partSupplierText.Text())
cmd.Parameters.AddWithValue("@PartNumMatch", partNumberText.Text().ToUpper().Trim())
cmd.Parameters.AddWithValue("@PartManMatch", ManufacturerText.Text().ToUpper().Trim()) 
```

# java - 根据项目的输出文件夹结构配置 Tomcat webapps 目录

> ID：16025589
> 
> 赞同：0
> 
> 时间：2013-04-15T22:14:40.307
> 
> 标签：java, eclipse, tomcat

我的项目的输出文件夹结构是`webapps\WEB-INF\classes`. 这里 War 文件获取文件夹内的所有内容`webapps`。但是当我构建我的项目时，tomcat 只获取`webapps\WEB-INF\classes`文件夹下的内容。所以在 Tomcat 的 webapps 文件夹`<contextRoot>/content of classes folder`中。我想配置为`<contextRoot>/content under webapps folder`.
IDE 是 Eclipse Juno 3.6 和 tomcat 6.0 服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:08:41.113

如果您的项目是动态 Web 项目，您可以在项目属性的部署程序集中配置这些设置。（右键单击您的项目 -> 属性 -> 部署程序集。）

希望这可以帮助。

# sublimetext2 - Sublime Text 中的自定义括号自动关闭

> ID：16025592
> 
> 赞同：6
> 
> 时间：2013-04-15T22:14:56.250
> 
> 标签：sublimetext2, auto-close

我正在尝试自动关闭`*`Markdown 文件中的星号 ( ) 字符。
我一直在查看所有语言设置文件，但没有找到任何可以用作示例的内容。我也尝试过编写一个片段，但发现它效率低下（它不会环绕选择）。

我四处搜索，发现 BracketHighlighter（它声称允许自定义自动关闭配对）但没有运气（通过 Package Control 安装，也重新启动）。

关于我应该从哪里开始或我做错了什么的任何想法？

* * *

**解决方案（感谢@skuroda）**

skuroda 的回答会很好 - 但是，我做了一些调整，我想将它们附加到他们的回答中：

```
{ "keys": ["*"], "command": "insert_snippet", "args": {"contents": "$0**"}, "context":
    [
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
        { "key": "preceding_text", "operator": "regex_contains", "operand": "\\*\\*", "match_all": true },
        { "key": "selector", "operator": "equal", "operand": "text.html.markdown", "match_all": true }

    ]
} 
```

`**`如果在两个前面的星号旁边按下星号键，则添加两个（例如，`**|`然后`***|`变为光标`**|**`所在`|`的位置。这对加粗文本有很大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T00:18:37.687

您可能需要对上下文进行一些调整，但这应该是一个开始。这是基于内置括号的自动配对键绑定。

```
{ "keys": ["*"], "command": "insert_snippet", "args": {"contents": "*$0*"}, "context":
    [
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
        { "key": "following_text", "operator": "regex_contains", "operand": "^(?:\t| |\\)|]|;|\\}|$)", "match_all": true },
        { "key": "selector", "operator": "equal", "operand": "text.html.markdown", "match_all": true }

    ]
},
{ "keys": ["*"], "command": "insert_snippet", "args": {"contents": "*${0:$SELECTION}*"}, "context":
    [
        { "key": "selection_empty", "operator": "equal", "operand": false, "match_all": true },
        { "key": "selector", "operator": "equal", "operand": "text.html.markdown", "match_all": true }
    ]
},
{ "keys": ["*"], "command": "move", "args": {"by": "characters", "forward": true}, "context":
    [
        { "key": "selection_empty", "operator": "equal", "operand": true, "match_all": true },
        { "key": "following_text", "operator": "regex_contains", "operand": "^\\*", "match_all": true },
        { "key": "selector", "operator": "equal", "operand": "text.html.markdown", "match_all": true }
    ]
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-16T04:28:46.507

用这个

```
{ "keys": ["*"], "command": "insert_snippet", "args": {"name": "Packages/User/my-snippet.sublime-snippet" }} 
```

现在去首选项>浏览包，然后用户文件夹创建一个文件

> 我的片段。崇高的片段

并在里面使用以下代码

```
<snippet><content><![CDATA[
*${0:$SELECTION}*
]]></content></snippet> 
```

祝你好运

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-19T15:48:54.103

# google-apps-script - 通过名称验证元素是否具有特定元素

> ID：16025596
> 
> 赞同：0
> 
> 时间：2013-04-15T22:15:18.987
> 
> 标签：google-apps-script

使用 google-apps-script，我尝试验证元素是否具有特定元素。我尝试使用元素的名称来执行此操作，验证：

```
var results=doc.getElement().getElements();
Browser.msgBox(results[0].getElement("name").getText()); //results[0] have a element "name"
Browser.msgBox(results[0].getElement("name1").getText()); //results[0] no have a element name1, show nothing 
```

我尝试`Browser.msgBox(results[0].getElement("name1").getText()!==undefined)`但什么都不显示（真或假）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:40:18.497

你可以做 `var results=doc.getElement().getElements('byName'); if (0 < results.length) Browser.msgBox(results[0].getName()+' found '+results.length+' time(s)');`

应该返回：**byName found 1 次**（如果有）

# javascript - css如何设置选择框的样式

> ID：16025602
> 
> 赞同：3
> 
> 时间：2013-04-15T22:16:01.580
> 
> 标签：javascript, html, css

我已经成功地设计了一个选择框。但是，我无法处理溢出问题。请看图片。

![](https://i.stack.imgur.com/Kys3G.png)

每当我在选择字段中尝试太长时间时，文本都会覆盖下拉图标（我为此使用背景图像）。如果文本字段太长，有人知道如何制作下拉图标来覆盖文本吗？对此，我真的非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:52:57.560

简单的

HTML

```
<select>
    <option>blabòaablabmalkbmakbvnozeetjztjzrjdjttjtjetjtjetja</option>
</select> 
```

CSS

```
select {
    max-width:200px; /* just my style, edit to what you want */
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    background-image:url('http://pediatrics.evms.edu/assets/images/icon_arrow_down.png'); /* the first icon on google :) replace with your own */
    background-repeat:no-repeat;
    background-position:right;
    padding-right:15px; /* this do the trick */
} 
```

[**小提琴**](http://jsfiddle.net/BdajH/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T22:17:36.810

您应该首先在每个浏览器中进行更正。然后添加填充以使箭头单独位于右侧。试试看。

```
-webkit-appearance: none;
-moz-appearance: none;
appearance: none; 
```

然后添加您自己的样式，例如背景边框、填充、框阴影等等......

祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T22:19:12.177

您可以设置`padding`，例如：

```
input[type="text"] // Or whatever selector you're using
{
    padding-right: 15px;
} 
```

所以文字不会与你的背景图片重叠......

演示：http: [//jsfiddle.net/darkajax/nekdS/](http://jsfiddle.net/darkajax/nekdS/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T22:26:28.803

向其中添加类似 ID 的内容，然后执行以下操作：

CSS：

```
#id {
border: 2px;
padding-top: 5px;
padding-bottom: 5px;
padding-left: 10px;
padding-right: 10px;
border-color: black;
and so on...
} 
```

# c++ - c++ 关于通过引用返回值的谜题

> ID：16025606
> 
> 赞同：4
> 
> 时间：2013-04-15T22:16:22.493
> 
> 标签：c++, reference

```
set<string> foo {
  set<string> a;
  // operation on a
  return a;
} 
```

如果我这样做，是否有任何性能差异：

```
set<string>& foo {
  set<string> a;
  // ops on a
  return a;
} 
```

如果是这样，我的理解是 a 将在堆栈上分配。foo() 返回后，内存空间将被回收。我们如何引用已声明的记忆？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T22:19:00.100

在情况 B 中，任何实际使用返回值都会导致未定义的行为。您不能通过引用返回本地自动变量并期望任何人都能够访问它。

请参阅此[实时工作空间](http://liveworkspace.org/code/3jlfYn%243)警告消息。当您执行此类操作时，您的编译器通常会警告您，但并不总是建议您依赖它。

请注意，在 C++11 中，第一个示例非常高效。在基于左值引用的移动和 NRVO 之间，`std::vector<std::string>`按值返回本地的成本大约是几个 if 和复制 32 位内存，或者在某些情况下更少（即实际上是零成本，因为`std::set`在调用者直接作用域）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T22:24:10.760

讨论不正确的代码的性能是没有意义的，比如你的第二个片段，哪些行为是未定义的（这通常会使你的程序崩溃）。您不能返回对函数本地的自动对象（在堆栈上分配）的引用。

例如，如果您的`foo`函数是类的成员函数，并且正在返回对该类成员的引用，那就没问题了：

```
class C {
public:
  set<string>& foo1 { return a_; }
  set<string> foo2 { return a_; }
private:
  set<string> a_;
} 
```

在上面的示例中，它比不创建任何新对象`foo1`更有效`foo2`，只返回对现有对象的引用。

# android - 当前位置未在 google maps api v2 for android 中正确显示

> ID：16025607
> 
> 赞同：0
> 
> 时间：2013-04-15T22:16:23.590
> 
> 标签：android, networking, location, maps, location-provider

我已经编写了代码来使用可用的最佳提供商检测用户的位置，但它没有显示当前位置。相反，它把我带到了前一个位置，并且标记也​​没有显示。请帮助调整它。

```
package com.example.mapexample;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.Canvas;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.util.DisplayMetrics;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.widget.TextView;
import android.widget.Toast;

import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.maps.CameraUpdate;
import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.GoogleMap.InfoWindowAdapter;
import com.google.android.gms.maps.GoogleMap.OnInfoWindowClickListener;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.Marker;
import com.google.android.gms.maps.model.MarkerOptions;

public class MainActivity extends FragmentActivity implements LocationListener {

    private GoogleMap myMap;
    private LocationManager locationManager;
    private String provider;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);
        FragmentManager myFragmentManager = getSupportFragmentManager();
        SupportMapFragment mySupportMapFragment = (SupportMapFragment) myFragmentManager
                .findFragmentById(R.id.map);
        myMap = mySupportMapFragment.getMap();
        myMap.setMyLocationEnabled(true);
        myMap.setMyLocationEnabled(true);

        View marker = ((LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.custom_marker_layout, null);
        TextView atmText  = (TextView) marker.findViewById(R.id.num_txt);
        atmText.setText("ATM");

            // Get the location manager
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        // Define the criteria how to select the locatioin provider -> use
        // default
        Criteria criteria = new Criteria();

        provider = locationManager.getBestProvider(criteria, true);
        Location location = locationManager.getLastKnownLocation(provider);

        // Initialize the location fields
        if (location != null) {
            Toast.makeText(this,
                    "Provider " + provider + " has been selected.",
                    Toast.LENGTH_SHORT).show();

            onLocationChanged(location);
        } else {
            Toast.makeText(getApplicationContext(), "Location not available",
                    Toast.LENGTH_LONG).show();

        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.menu_legalnotices:
            String LicenseInfo = GooglePlayServicesUtil
                    .getOpenSourceSoftwareLicenseInfo(getApplicationContext());
            AlertDialog.Builder LicenseDialog = new AlertDialog.Builder(
                    MainActivity.this);
            LicenseDialog.setTitle("Legal Notices");
            LicenseDialog.setMessage(LicenseInfo);
            LicenseDialog.show();
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

    /* Request updates at startup */
    @Override
    protected void onResume() {
        super.onResume();
        locationManager.requestLocationUpdates(provider, 0, 0, this);

    }

    /* Remove the locationlistener updates when Activity is paused */
    @Override
    protected void onPause() {
        super.onPause();
        locationManager.removeUpdates(this);
    }

    public void onLocationChanged(Location location) {

        LatLng latLng = new LatLng(location.getLatitude(), location.getLongitude());;
        Toast.makeText(getApplicationContext(),
                "Location" + latLng.toString(), Toast.LENGTH_LONG).show();
        CameraUpdate cameraUpdate = CameraUpdateFactory.newLatLngZoom(latLng, 17);
            myMap.animateCamera(cameraUpdate);
            locationManager.removeUpdates(this);

    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    public void onProviderEnabled(String provider) {
        Toast.makeText(this, "Enabled new provider " + provider,
                Toast.LENGTH_SHORT).show();

    }

    public void onProviderDisabled(String provider) {
        Toast.makeText(this, "Disabled provider " + provider,
                Toast.LENGTH_SHORT).show();
    }

} 
```

# uitableview - Monotouch 自定义 UITableViewCell GetCell 未初始化新的自定义视图单元格

> ID：16025617
> 
> 赞同：2
> 
> 时间：2013-04-15T22:17:30.433
> 
> 标签：uitableview, xamarin.ios, xamarin

我一直在学习许多教程，以使用故事板将自定义表格视图单元格组合在一起作为原型表格视图。

我是 monotouch 的新手，并设法为标准单元类型找到了一个可行的解决方案。由于我无法以正确的方式初始化新的单元格，因此遇到了自定义视图单元格的问题。一些旧教程似乎加载了一个单元笔尖文件，但我正在使用带有以下代码的情节提要。

我哪里错了？

（我会使用单点触控对话框，但我想不出一种方法以简单的方式在附件等上添加可爱的 uipickerviews）。

[http://docs.xamarin.com/guides/ios/user_interface/tables/part_5_-_using_xcode%2C_interface_builder%2C_and_storyboards](http://docs.xamarin.com/guides/ios/user_interface/tables/part_5_-_using_xcode%2C_interface_builder%2C_and_storyboards)

```
public override UITableViewCell GetCell (UITableView tableView, MonoTouch.Foundation.NSIndexPath indexPath)
{
    // in a Storyboard, Dequeue will ALWAYS return a cell
    //*** above comment doesnt seem to hold for custom uitableview cells
    UITableViewCell cell = tableView.DequeueReusableCell (cellIdentifier);
    // now set the properties as normal
    cell.TextLabel.Text = tableItems[indexPath.Row].Name;
    if (tableItems[indexPath.Row].Done) 
        cell.Accessory = UITableViewCellAccessory.Checkmark;
    else
        cell.Accessory = UITableViewCellAccessory.None;
    return cell;
}

// here's my implementation of GetCell but problem is that I can't seem to generate a new cell
public override UITableViewCell GetCell (UITableView tableView, NSIndexPath indexPath)
{
        _cellIdentifier = "SingleTimeViewCell";
        CustomViewCell cell = tableView.DequeueReusableCell (_cellIdentifier) as 

//      if (cell == null)
//      {
//          cell = new SingleTimeViewCell();
//      }

         cell.myCustomProperty = "hello";
         return cell;
}

// here's the auto generated CustomViewCell class from Xcode storyboard
public partial class CustomViewCell : UITableViewCell
{
    public CustomViewCell () : base()  // I added this ctor but it didnt seem to help matters
    {
    }

    public CustomViewCell (IntPtr handle) : base (handle)
    { 
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-07T09:15:39.320

只能使用带有原型单元的情节提要来完成，请参阅[Xamarin 论坛中的此示例](http://forums.xamarin.com/discussion/comment/23067/#Comment_23067)。

以下是相关代码（Stephane Cordonnier 提供）：

```
public partial class CustomCellStoryBoardViewController : UIViewController
{
    public CustomCellStoryBoardViewController(IntPtr handle) : base (handle)
    {
    }

    public override void DidReceiveMemoryWarning()
    {
        base.DidReceiveMemoryWarning();
    }

    public override void ViewDidLoad()
    {
        base.ViewDidLoad();

        this.MyTableView.DataSource = new MyDataSource();
    }

    private class MyDataSource : UITableViewDataSource
    {
        private String[] items = {"Item 1", "Item 2", "Item 3", "Item 4", "Item 5" };

        public MyDataSource()
        {
        }

        public override int RowsInSection(UITableView tableView, int section)
        {
            return this.items.Length;
        }

        public override UITableViewCell GetCell(UITableView tableView, NSIndexPath indexPath)
        {
            MyCustomCell cell = (MyCustomCell)tableView.DequeueReusableCell(MyCustomCell.Key);
            cell.SetTitle(this.items[indexPath.Row]);
            return cell;
        }
    }
} 
```

自定义单元格：

```
[Register ("MyCustomCell")]
public class MyCustomCell : UITableViewCell
{
    [Outlet]
    MonoTouch.UIKit.UILabel TitleLabel { get; set; }

    public static readonly NSString Key = new NSString("MyCustomCell");

    public MyCustomCell(IntPtr handle) : base(handle)
    {
    }

    public void SetTitle(String title)
    {
        this.TitleLabel.Text = title;
    }
} 
```

确保您已将自定义单元类和标识符设置为情节提要中单元类的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T13:08:58.470

你不能用故事板来做。对单元格使用主故事板和单独的 xib 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T23:53:27.483

在您的 .xib 文件中，对于该单元格，您是否使用相同的单元格标识符“SingleTimeViewCell”。我不确定您是如何创建自定义单元格的，但我知道我遇到了同样的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-05T15:53:13.140

我读到了关于 tableview 单元格和重用以及 Xib 的非常无意义的内容，几乎每个找到的示例代码都没有正确重用......

在 iOS6 上以及更简单的方法：

1.  从 Xamarin 创建一个新的 UITABLEVIEWCELL。（假设是 MyCustomCell）
2.  在 InterfaceBuilder 中将单元格的 Identifier 设置为 MyCustomCell.Key 的值（在 Xamarin Studio 创建的 MyCsutomCell.cs 中找到该值）
3.  在您的 ViewController 中以这种方式注册笔尖：

`tableView.RegisterNibForCellReuse (MyCsutomCell.Nib, MyCsutomCell.Key);`

4.  然后在 dataSource 中的 GetCell 方法上，将一个单元格出列（如果不存在，它将创建一个）：

`MyCsutomCell cell = tableView.DequeueReusableCell (MyCsutomCell.Key) as MyCsutomCell;`

# ios - 在事件中显示容器视图

> ID：16025618
> 
> 赞同：2
> 
> 时间：2013-04-15T22:17:34.087
> 
> 标签：ios, xcode, uistoryboard, uistoryboardsegue

我正在尝试将 IB / 故事板（不知道他们现在如何称呼它）与容器视图一起使用，如 WWDC 2012“在您的应用程序中采用故事板”视频中所述。一切正常，除了我想稍微改变一下流程。我想用一个事件来执行嵌入 segue。没有任何代码行有可能吗？

它看起来真的很基本，（触摸一个使子视图控制器出现的按钮并不是一个棘手的情况）所以我认为可能有一种方法，但我找不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T00:18:36.643

嵌入式控制器将与主控制器同时实例化，但您可以在 IB 中隐藏嵌入式控制器的视图，然后在按钮的操作方法中显示它：

```
-(IBAction)makeVisible:(id)sender {

    [self.childViewControllers[0] view].hidden = NO;
} 
```

相反，如果您想添加子视图控制器以响应事件，您可以在代码中添加它，如下所示：

```
 UIViewController *child = [self.storyboard instantiateViewControllerWithIdentifier:@"Child"];
    [self addChildViewController:child];
    [child didMoveToParentViewController:self];
    child.view.frame = CGRectMake(50, 50, 150, 150);
    [self.view addSubview:child.view]; 
```

# algorithm - 沿着两个平面的交点找到线

> ID：16025620
> 
> 赞同：9
> 
> 时间：2013-04-15T22:17:38.123
> 
> 标签：algorithm, math, 3d, three.js, linear-algebra

我正在尝试绘制由 3D 中两个平面的交点形成的线，但我无法理解数学，这已在[此处](http://mathinsight.org/intersecting_planes_examples)和[此处](http://mathworld.wolfram.com/Plane-PlaneIntersection.html)进行了解释。

我试图自己弄清楚，但最接近解决方案的是一个向量，它通过使用平面法线的叉积，指向与相交线相同的方向。我不知道如何在相交线上找到一个点，任何点都可以。我认为这种方法是死胡同。这是此尝试的屏幕截图： ![平面及其法线及其法线的叉积](https://i.stack.imgur.com/qO50g.png)

我尝试使用[这个](https://stackoverflow.com/questions/6993462/algorithm-to-get-the-line-of-two-planes-intersection)问题中提到的解决方案，但它与原始解释有一个死链接，并且该等式对我不起作用（它有不平衡的括号，我试图在下面更正）。

```
var planeA = new THREE.Plane((new THREE.Vector3(0, 0, 1)).normalize(), 100);
var planeB = new THREE.Plane((new THREE.Vector3(1, 1, 1)).normalize(), -100);

var x1 = planeA.normal.x,
    y1 = planeA.normal.y,
    z1 = planeA.normal.z,
    d1 = planeA.constant;

var x2 = planeB.normal.x,
    y2 = planeB.normal.y,
    z2 = planeB.normal.z,
    d2 = planeB.constant;

var point1 = new THREE.Vector3();
point1.x = 0;
point1.z = (y2 / y1) * (d1 - d2) / (z2 - z1 * y2 / y1);
point1.y = (-z1 * point1.z - d1) / y1;

var point2 = new THREE.Vector3();
point2.x = 1;
point2.z = (y2 / y1) * (x1 * point2.x + d1) - (x2 * point2.x - d2) / (z2 - z1 * y2 / y1);
point2.y = (-z1 * point2.z - x1 * point2.x - d1) / y1;

console.log(point1, point2); 
```

输出：

```
THREE.Vector3 {x: -1, y: NaN, z: NaN, …}
THREE.Vector3 {x: 1, y: Infinity, z: -Infinity, …} 
```

预期输出：

*   沿交叉点 x = 0 的点，以及
*   同一行上的另一个点 x = 1

如果有人能指出我应该如何工作的一个很好的解释，或者一个平面 - 平面相交算法的例子，我将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-07-18T13:20:52.407

[这是http://geomalgorithms.com/a05-_intersect-1.html](http://geomalgorithms.com/a05-_intersect-1.html)中描述的平面-平面相交解决方案的实现。本质上，您首先使用平面法线的叉积来找到两个平面中线的方向。其次，您在平面的隐式方程上使用一些代数（P . n + d = 0，其中 P 是平面上的某个点，n 是法线，d 是平面常数）来求解位于平面上的点平面的交点，并且也在 x=0、y=0 或 z=0 平面之一上。解决方案是由一个点和一个向量描述的线。我使用的是three.js 79版

```
/*

Algorithm taken from http://geomalgorithms.com/a05-_intersect-1.html. See the
section 'Intersection of 2 Planes' and specifically the subsection
(A) Direct Linear Equation

*/
function intersectPlanes(p1, p2) {

  // the cross product gives us the direction of the line at the intersection
  // of the two planes, and gives us an easy way to check if the two planes
  // are parallel - the cross product will have zero magnitude
  var direction = new THREE.Vector3().crossVectors(p1.normal, p2.normal)
  var magnitude = direction.distanceTo(new THREE.Vector3(0, 0, 0))
  if (magnitude === 0) {
    return null
  }

  // now find a point on the intersection. We use the 'Direct Linear Equation'
  // method described in the linked page, and we choose which coordinate
  // to set as zero by seeing which has the largest absolute value in the
  // directional vector

  var X = Math.abs(direction.x)
  var Y = Math.abs(direction.y)
  var Z = Math.abs(direction.z)

  var point

  if (Z >= X && Z >= Y) {
    point = solveIntersectingPoint('z', 'x', 'y', p1, p2)
  } else if (Y >= Z && Y >= X){
    point = solveIntersectingPoint('y', 'z', 'x', p1, p2)
  } else {
    point = solveIntersectingPoint('x', 'y', 'z', p1, p2)
  }

  return [point, direction]
}

/*

This method helps finding a point on the intersection between two planes.
Depending on the orientation of the planes, the problem could solve for the
zero point on either the x, y or z axis

*/
function solveIntersectingPoint(zeroCoord, A, B, p1, p2){
    var a1 = p1.normal[A]
    var b1 = p1.normal[B]
    var d1 = p1.constant

    var a2 = p2.normal[A]
    var b2 = p2.normal[B]
    var d2 = p2.constant

    var A0 = ((b2 * d1) - (b1 * d2)) / ((a1 * b2 - a2 * b1))
    var B0 = ((a1 * d2) - (a2 * d1)) / ((a1 * b2 - a2 * b1))

    var point = new THREE.Vector3()
    point[zeroCoord] = 0
    point[A] = A0
    point[B] = B0

    return point
}

var planeA = new THREE.Plane((new THREE.Vector3(0, 0, 1)).normalize(), 100)
var planeB = new THREE.Plane((new THREE.Vector3(1, 1, 1)).normalize(), -100)

var [point, direction] = intersectPlanes(planeA, planeB) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-15T23:15:10.220

当我遇到这样的问题时，我通常让一个符号代数包（在这种情况下是 Mathematica）来处理它。输入后

```
In[1]:= n1={x1,y1,z1};n2={x2,y2,z2};p={x,y,z};

In[2]:= Solve[n1.p==d1&&n2.p==d2,p] 
```

并简化和替换 x=0 和 x=1，我得到

```
 d2 z1 - d1 z2        d2 y1 - d1 y2
Out[5]= {{{y -> -------------, z -> ----------------}}, 
                y2 z1 - y1 z2       -(y2 z1) + y1 z2

            d2 z1 - x2 z1 - d1 z2 + x1 z2
>    {{y -> -----------------------------, 
                    y2 z1 - y1 z2

            d2 y1 - x2 y1 + (-d1 + x1) y2
>      z -> -----------------------------}}}
                  -(y2 z1) + y1 z2 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-15T23:51:07.940

## 先决条件

* * *

回想一下，要表示一条线，我们需要一个向量来描述它的方向和这条线所经过的点。这称为参数化形式：

```
line_point(t) = t * (point_2 - point_1) + point_1 
```

其中`point_1`和`point_2`是线通过的任意点，并且`t`是**参数化**我们的线的标量。现在，如果我们将任意点放入上面的等式中，我们就可以找到`line_point(t)`线上的任何点。`t`

**注意：**这个术语`(point_2 - point_1)`什么都不是，而是一个描述我们线方向的向量，这个术语`point_1`什么都不是，但是我们的线经过的点（当然`point_2`）也可以使用。

## 算法

* * *

1.  通过取平面法线的叉积来找到相交线的方向`direction`，即`direction = cross(normal_1, normal_2)`。

2.  以任何平面为例，例如**第**一个平面，并在该平面上找到**任意 2 个不同的点** ：`point_1`和`point_2`。如果我们假设平面方程的形式为`a1 * x + b1 * y + c1 * z + d1 = 0`，那么要找到 2 个不同的点，我们可以执行以下操作：

    ```
    y1 = 1
    z1 = 0
    x1 = -(b1 + d1) / a1

    y2 = 0
    z2 = 1
    x2 = -(c1 + d1) / a1 
    ```

    哪里`point_1 = (x1, y1, z1)`和`point_2 = (x2, y2, z2)`。

3.  现在我们有 2 个点，我们可以构造位于第一个平面上的线的**参数**化表示： ，**其中**描述 了这条线上的任何点，并且只是一个输入标量（通常称为**参数**）。**`line_point(t) = t * (point_2 - point_1) + point_1``line_point(t)``t`**

*****   使用标准[线平面相交算法](http://en.wikipedia.org/wiki/Line-plane_intersection)找到`intersection_point`线 `line_point(t)`和**第二个**平面的交点（注意 **代数形式**部分，因为这是实现线平面相交所需的全部，如果您还没有这样做的话） .`a2 * x + b2 * y + c2 * z + d2 = 0`

    ***   现在找到了我们的交线，并且可以像往常一样以参数化形式构造：`intersection_line_point(s) = s * direction + intersection_point`，其中`intersection_line_point(s)` 描述了该交线上的任何点，并且`s`是**参数**。****** 

 ******注意：**我没有在任何地方读过这个算法，我只是根据我对线性代数的知识从头顶设计了它。这并不意味着它不起作用，但是这个算法可能可以进一步优化。

## 调理

* * *

当 2 个法向量几乎共线时，这个问题变得`normal_1`非常[病态](http://en.wikipedia.org/wiki/Condition_number)。在几何上，这意味着这两个平面**几乎彼此平行**，并且在这种情况下是**浮点**算术的**有限精度算术中以****可接受的精度**确定相交线变得**不可能。**`normal_2`

 ******* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-17T21:57:49.057

让three.js为您解决这个问题很容易。

如果你用矩阵表示法表达你的问题

```
m * x = v 
```

那么 x 的解是

```
x = inverse( m ) * v 
```

我们将为 m 使用 4x4 矩阵，因为 three.js 有一个`inverse()`用于`Matrix4`该类的方法。

```
var x1 = 0,
    y1 = 0,
    z1 = 1,
    d1 = 100;

var x2 = 1,
    y2 = 1,
    z2 = 1,
    d2 = -100;

var c = 0; // the desired value for the x-coordinate

var v = new THREE.Vector4( d1, d2, c, 1 );

var m = new THREE.Matrix4( x1, y1, z1, 0, 
                           x2, y2, z2, 0,
                           1,  0,  0,  0,
                           0,  0,  0,  1
                         );

var minv = new THREE.Matrix4().getInverse( m );

v.applyMatrix4( minv );

console.log( v ); 
```

根据需要，v 的 x 分量将等于 c，y 和 z 分量将包含您要查找的值。w 分量是不相关的。

现在，重复 c 的下一个值，c = 1。

三.js r.58**********

# php - 使用 getLogoutUrl() 时无法在我的网站上注销

> ID：16025621
> 
> 赞同：0
> 
> 时间：2013-04-15T22:17:39.373
> 
> 标签：php, facebook-php-sdk

我在 Firefox 中打开了 2 个选项卡，一个是我的网站，另一个是 Facebook。在没有授权应用程序的情况下，我会获得一个登录链接，然后单击此链接，然后系统会提示我对我这样做的应用程序进行身份验证。

我现在在屏幕上显示了 getLogoutUrl() 提供的注销 URL - 当我单击它时，它会重定向回我很满意的网站，但它仍然将我归类为已登录。如果我在 Facebook 上刷新另一个选项卡我现在退出了。会议上似乎有些宿醉？

```
<?php
require_once("fb/facebook.php");

$config = array();
$config['appId'] = '...';
$config['secret'] = '...';
$config['fileUpload'] = false; // optional

$facebook = new Facebook($config);
$user_id = $facebook->getUser();

if($user_id) {
    //Got an ID - Facebook says we're logged in
    try {

        $user_profile = $facebook->api('/me','GET');
        echo "<img src=\"http://graph.facebook.com/".$user_profile['username']."/picture\"><a href=\"".$user_profile['link']."\">" . $user_profile['name']."</a>";
        $logout_url = $facebook->getLogoutUrl();
        echo "<a href=\"" . $logout_url . "\">Logout</a><br><br><br>";

    } 
    catch(FacebookApiException $e) {
        $login_url = $facebook->getLoginUrl(); 
        echo 'Please <a href="' . $login_url . '">login.</a>';
        error_log($e->getType());
        error_log($e->getMessage());
    }   
} 
else {
    // Not logged in - give URL to login
    $login_url = $facebook->getLoginUrl();
    echo 'Please <a href="' . $login_url . '">login.</a>';
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T15:11:34.367

您需要销毁会话。

```
$config = array();
$config['appId'] = 'xxxx';
$config['secret'] = 'xxxxx';

$facebook = new Facebook($config);

if(isset($_GET['act']) && $_GET['act'] == "logout") {
    $facebook->destroySession();
}

$user = $facebook->getUser();
echo $user;
if ($user) {

    try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
    } catch (FacebookApiException $e) {
    echo '<pre>'.htmlspecialchars(print_r($e, true)).'</pre>';
    $user = null;
    }
    echo "<pre>";
    print_r($user_profile);
    echo "</pre>";  
    $logout = $facebook->getLogoutUrl();

    //echo $logout;

    echo "<a href='test.php?act=logout'>Logout</a>";

} else {

    $login = $facebook->getLoginUrl(array("scope"=>"email","display"=>"popup","redirect_uri"=>"http://domain.com/test.php"));

    echo "<a href='".$login."'>Login</a>";

} 
```

# javascript - Javascript If 语句评估无法正常工作

> ID：16025624
> 
> 赞同：2
> 
> 时间：2013-04-15T22:18:20.260
> 
> 标签：javascript, if-statement

所以这是我正在做的一些 ajax 的代码。

```
function check_password(){

  var username = $("#username").val();
  if(username.length > 0){
    var bool = -1;
    $('#Loading2').show();
    $.post("check_login.php", {
      username: $('#username').val(),
      password: $('#password').val(),
    },
    function(response) {
      $('#Info2').fadeOut(500);
      $('#Loading2').hide();
      bool = response.indexOf('success');
      setTimeout("finishAjax('Info2', '"+escape(response)+"')", 450);
      $('#password').after(bool);
      return response.indexOf('success');  
    });

  }
}

function finishAjax(id, response){

  $('#'+id).html(unescape(response));
  $('#'+id).fadeIn(750);
} 
```

在这里我试图处理检查密码函数的返回值。

```
jQuery(function() {
  $("#submitl").click(function(){
    $(".error").hide();
    var hasError = false;
    var passwordVal = $("#password").val();
    var username = $("#username").val();

    if (username == '') {
      $("#username").after('<span style="color:red" class="error"><p></p>Please enter a username.</span>');
      hasError = true;
    } else if (passwordVal == '') {
      $("#password").after('<span style="color:red" class="error"><p></p>Please enter a password.</span>');
      hasError = true;
    } else if (check_password() != 73) {
      hasError = true;
      $("#password").after(check_password());
    }
    if (hasError == true) {
      return false;
    }
  });
}); 
```

出于某种原因，即使索引（返回值）为 73，if 语句也会返回 true。我通过在 if 语句中使用 jquery 打印出返回函数的值并打印出 73 来测试这一点。我有一种感觉错误是由于 javascript 中的动态类型变量引起的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:22:31.037

AJAX 调用的典型`asynchronous`行为问题。您`response.indexOf('success');`从 AJAX 回调中返回，但由于它是异步回调，因此没有可返回的内容。当回调被调用时，其余的`check_password`函数早就完成了。

要解决此问题，您需要完全重构代码。在您的点击处理程序中，您首先需要调用您的`post()`函数，然后在回调中您需要遍历您的`if/else if`块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:25:33.360

您的函数“checkpassword()”实际上并没有返回值。它向 PHP 文件发起请求并立即返回（没有值）。

您确实为调用返回时指定了一个回调，但这永远不会回到您的原始函数。

你可以这样做：

```
function check_password(callback){

  var username = $("#username").val();
  if(username.length > 0){
    var bool = -1;
    $('#Loading2').show();
    $.post("check_login.php", {
      username: $('#username').val(),
      password: $('#password').val(),
    }, function(response){
      $('#Info2').fadeOut(500);
       $('#Loading2').hide();
      bool = response.indexOf('success');
      setTimeout("finishAjax('Info2', '"+escape(response)+"')", 450);
      $('#password').after(bool);
      callback(response.indexOf('success'));
    });

  }
}
function finishAjax(id, response){

  $('#'+id).html(unescape(response));
  $('#'+id).fadeIn(750);
} 

jQuery(function(){
        $("#submitl").click(function(){
        $(".error").hide();
        var hasError = false;
        var passwordVal = $("#password").val();
        var username = $("#username").val();
    if (username == '') {
            $("#username").after('<span style="color:red" class="error"><p></p>Please enter a username.</span>');
            hasError = true;
        } 
    else if (passwordVal == '') {
            $("#password").after('<span style="color:red" class="error"><p></p>Please enter a password.</span>');
            hasError = true;
        } 
    else (
        check_password(function(returnValue) {
            if (returnValue  != 73) {
                hasError = true;
                $("#password").after(check_password());            
            }
         })){

        }
        if(hasError == true) {return false;}
    });
}); 
```

当然，这段代码只是向你展示了如何在另一个函数中获取值，但你仍然需要处理你是另一个函数不会立即返回的事实，例如 HasError 的值没有立即设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T22:29:07.330

您的问题是您从内部函数中返回，这在 JavaScript 中永远不会起作用。传递回调：

```
function check_password(callback) {
    // ...
    callback(response.indexOf('success'));
}
// ...
check_password(function(result) {
    if(result != 73) {
        // ...
    }
}) 
```

只要搜索JavaScript AJAX，你就会发现很多网站要研究。这是其中之一： http: [//www.html5rocks.com/en/tutorials/async/deferred/](http://www.html5rocks.com/en/tutorials/async/deferred/)

# r - 按端点对 ABM 结果进行子集化

> ID：16025625
> 
> 赞同：0
> 
> 时间：2013-04-15T22:18:26.590
> 
> 标签：r

这可能很容易，但我可以使用一些帮助......我已经构建了一个基于代理的模型，该模型可以运行 300 次任意数量的步骤，具体取决于模型内部发生的情况。结果数据的结构如下：

![在此处输入图像描述](https://i.stack.imgur.com/Hwyov.png)

我想隔离以 150 步或更少步结束的运行，并对其进行整体分析（不仅仅是最后一步）。在 R 中执行此操作的最佳方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:56:35.053

首先，用于`aggregate`获取每次运行的步数：

`n_steps <- aggregate(AT6$run, by=list(run=AT6$run), FUN=length)`

现在计算一个过滤器变量：

`n_steps <- within(n_steps, filter <- x<=150)`

与原始数据合并并仅保留过滤的运行：

`AT6_f <- merge(AT6, n_steps)`

`AT6_f <- AT6_f[AT6_f$filter,]`

最后通过运行拆分 data.frame：

`result <- split(AT6_f, AT6_f$run)`

注意：结果是一个列表，每个元素都是一个包含单个运行的 data.frame。如果你有一个`f`分析每次运行的函数，你应该将上面的结果传递给它：

`lapply(result, f)`

# ios - AFNetworking 和同步请求来完成在线注册过程

> ID：16025631
> 
> 赞同：0
> 
> 时间：2013-04-15T22:19:02.740
> 
> 标签：ios, objective-c, cocoa-touch, afnetworking

我正在使用 AFNetworking，并且我读过不鼓励同步响应。但是我需要检查用户是否已经存在于在线数据库中，然后该用户才能进入应用程序的下一阶段。是的，一个典型的注册过程。

我的代码现在返回 NO，因为它是异步的。我需要找到一种方法来检查成功调用并返回`YES`或`NO`取决于此回调。

谁能指出我如何编写等待成功调用的应用程序的正确方向，以便我知道尚未设置用户？

```
-(BOOL)doesTheUserExistAlreadyOnServer:(NSString *)parsedEmail
{
    BOOL *methodResponse = NO;

    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"http://www.myurl.co.uk/"]];
    NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST"
                                                            path:@"http://www.myurl.co.uk/igym.php"
                                                      parameters:@{@"myvar2":@"piggy"}];
    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
    [httpClient registerHTTPOperationClass:[AFHTTPRequestOperation class]];
    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        // Print the response body in text

      //  NSLog(@"Response: %@", [[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding]);
        if ([[[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding] isEqualToString:@"piggy"]) {
            __block methodResponse = YES;
            NSLog(@"%@",[[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding]);
        }
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"Error: %@", error);
    }];
    [operation start];

    return (BOOL)methodResponse;

} 
```

**编辑：**

我使用以下逻辑解决了这个问题。

用户点击注册按钮。main 方法执行所有初步的非 Web 检查，然后调用`[self doesTheUserExistAlreadyOnServer:_email.text];`

该方法代码现在是

```
-(void)doesTheUserExistAlreadyOnServer:(NSString *)parsedEmail
{ 
    if(![_spinner isAnimating])
    {
        [_spinner startAnimating];
    }

    __block RegistrationViewController* me = self;
    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"http://www.myurl.co.uk/"]];
    NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST"
                                                            path:@"http://www.myurl.co.uk/igym.php"
                                                      parameters:@{@"myvar2":@"piggy"}];
    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
    [httpClient registerHTTPOperationClass:[AFHTTPRequestOperation class]];
    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        // Print the response body in text

        if ([[[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding] isEqualToString:@"piggy"]) {

            NSLog(@"%@",[[NSString alloc] initWithData:responseObject encoding:NSUTF8StringEncoding]);
            [me registrationPartTwo:YES];
        } else
        {
            [me registrationPartTwo:NO];
        }
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"Error: %@", error);
    }];

    [operation start];

} 
```

然后，一旦该块/回调成功，它就会调用

```
-(void)registrationPartTwo:(BOOL)doesItExistOnServer
{
    [_spinner stopAnimating];
    NSString *emailAlreadyInUseMessage = [NSString stringWithFormat:@"This email is already in use"];
    if (doesItExistOnServer)
    {
        self.screenMsg.text = emailAlreadyInUseMessage;
//here more code to send the user the the next step
    }
} 
```

基本上我使用依赖于回调的 2method 注册过程解决了这个问题，不知道那是最好还是最有效的方法。但这就是我可以自己解决的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:25:58.247

使用委托回调来通知操作何时完成。如果需要，在开始操作之前，放置一个`UIActivityIndicatorView`（微调器）以防止用户与应用程序交互。

# cmd - 使用命令行如何修改文件名

> ID：16025637
> 
> 赞同：0
> 
> 时间：2013-04-15T22:19:48.777
> 
> 标签：cmd, filenames

如何根据文件名中的分隔符修改文件夹中的文件名？

我有一个文件夹，其中包含由不同程序根据时间表拾取的图像 - 程序只能分析图像，如果它只包含主名称 (sku#) 而不是摄影师在名称后添加的附加数据

使用命令行我可以运行某种脚本来修改文件名并删除下划线或连字符后的所有字符（还需要删除下划线或连字符）

（我不知道是否以及如何通过 Windows 命令行执行此操作，但我确实可以选择在 cygwin 中运行这样的“脚本”——我更喜欢使用最有效的方法......）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T23:45:30.070

```
@ECHO OFF
SETLOCAL
FOR /f "delims=" %%a IN ('dir /b /a-d ^|findstr "_ -"') DO (
 FOR /f "delims=_-" %%i IN ("%%a") DO ECHO REN "%%a" "%%i%%~xa" 2>nul
)
FOR /f "delims=" %%a IN ('dir /b /a-d ^|findstr "_ -"') DO ECHO failed ON "%%a" 
```

这应该可以完成这项工作。

第一步是以`/b`基本形式（没有标题 - 仅名称）和`/a-d`没有目录名称执行目录列表。这由`findstr`on（下划线或破折号）过滤，并且 %%a 依次获取每个过滤后的文件名。

下一步是获取这些文件名并将它们拆分为`_`或上的部分`-`。第一个标记（最多，但不包括分隔符）应用于 %%i，因此`rename`需要从`"%%a"`（原始文件名）到`"%%i%%~xa"`- 第一个标记+原始文件名的扩展名。

重命名的尝试很可能会失败，因为新名称已经存在，因此错误消息被简单地忽略（`2>nul`）

最后，查找任何未重命名的文件并报告它们（当然是可选的）

请注意，`REN`ame 命令只是`ECHO`ed。这样可以确保在您验证这是您想要做的事情时实际上没有任何更改。只需删除`ECHO`之前的`REN`激活重命名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:29:42.630

我不需要这样做：但是通过快速搜索，我[在另一个 Stack Exchange 站点上找到了这个链接。](https://superuser.com/questions/16007/how-can-i-mass-rename-files-from-the-command-line-or-using-a-3rd-party-tool)

一些人上传了一些powershell脚本。最佳答案是进行大规模名称更改的 GUI 工具。

有这个 CMD 示例：

```
dir /B > fileList.txt
for /f "tokens=1,2,3" %i in (fileList.txt) DO ren "%i %j %l" %l 
```

> 第一行将文件列表输出到名为 fileList.txt 的文件中。第二行将列表中的每个名称分成 3 部分，#、“-”和名称的其余部分。对于其中的每一个，它都会执行重命名命令。

# java - 如何让 WSS4J 从回调中加载密钥库密码？

> ID：16025645
> 
> 赞同：7
> 
> 时间：2013-04-15T22:20:17.317
> 
> 标签：java, cxf, ws-security, wss4j

我正在使用 Apache CXF 构建 Web 服务。它使用 Apache WSS4J 来提供 WS-Security 功能。我需要发出一个 SOAP 请求并且它必须被签名。

这是我传递给 WSS4J 的属性文件的内容：

```
org.apache.ws.security.crypto.provider = org.apache.ws.security.components.crypto.Merlin
org.apache.ws.security.crypto.merlin.keystore.type = PKCS12
org.apache.ws.security.crypto.merlin.keystore.provider = BC
org.apache.ws.security.crypto.merlin.keystore.password = 12345678
org.apache.ws.security.crypto.merlin.keystore.alias = my-alias
org.apache.ws.security.crypto.merlin.keystore.file = my_certificate.p12 
```

我想用我的密码写成纯文本来摆脱那一行。我删除了该行并向我的 WSS4JOutInterceptor 提供了一个密码回调处理程序，就像上面的代码一样：

```
public SoapInterceptor newSignerInterceptor() {
    Map<String, Object> outProps = new HashMap<String, Object>();
    outProps.put(WSHandlerConstants.ACTION, "Signature");
    outProps.put(WSHandlerConstants.USER, config.getKeyAlias());
    outProps.put(WSHandlerConstants.SIG_KEY_ID, "DirectReference");
    outProps.put(WSHandlerConstants.USE_REQ_SIG_CERT, WSHandlerConstants.SIGNATURE_USER);
    outProps.put(WSHandlerConstants.USE_SINGLE_CERTIFICATE, "false");
    outProps.put(WSHandlerConstants.PW_CALLBACK_CLASS, this.getClass().getName());
    outProps.put(WSHandlerConstants.SIG_PROP_FILE, config.getPropertiesFileName());
    return new WSS4JOutInterceptor(outProps);

}

@Override
public void handle(Callback[] callbacks) throws IOException, UnsupportedCallbackException {
    for (int i = 0; i < callbacks.length; i++) {
        if (callbacks[i] instanceof WSPasswordCallback) {
            ((WSPasswordCallback) callbacks[i]).setPassword(password);
        }
    }
} 
```

但这没有用。它在属性文件中找不到密码并使用默认密码“security”。

如何让它使用回调来获取密码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-08T23:40:42.420

您可以实现[CallbackHandler](http://docs.oracle.com/javase/7/docs/api/javax/security/auth/callback/CallbackHandler.html)：

```
public class PasswordCallbackHandler implements CallbackHandler {

    @Override
    public void handle(Callback[] callbacks) throws IOException, UnsupportedCallbackException {
        for(Callback callBack:callbacks){
            if(callBack instanceof WSPasswordCallback){
                ((WSPasswordCallback)callBack).setPassword("password");
            }
        }
    }
} 
```

然后将处理程序添加到属性中：

```
outProps.put(WSHandlerConstants.PW_CALLBACK_CLASS, PasswordCallbackHandler.class); 
```

您还可以使用 PW_CALLBACK_REF 设置处理程序的引用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-02-20T17:45:27.430

Merlin 不会为 Keystore 密码调用回调，因此密码始终必须在属性文件中。幸运的是它可以被加密。

该解决方案在这里很好地描述了： [加密密码属性文件中的密码](https://stackoverflow.com/questions/31023223/encrypting-passwords-in-crypto-property-files)

从上面的链接复制的解决方案：

1.  下载 jasypt-1.9.2-dist.zip
2.  使用此命令获取编码密码`encrypt input=real_keystore_password password=master_password algorithm=PBEWithMD5AndTripleDES`
3.  复制输出（例如：0laAaRahTQJzlsDu771tYi）
4.  当您使用此算法时，您需要 Java Cryptography Extension (JCE) Unlimited Strength。放入你的JDK。
5.  将编码后的输出放在属性中

    ```
    org.apache.wss4j.crypto.provider=org.apache.wss4j.common.crypto.Merlin

    org.apache.wss4j.crypto.merlin.keystore.type=jks 
    org.apache.wss4j.crypto.merlin.keystore.password=ENC(0laAaRahTQJzlsDu771tYi)

    org.apache.wss4j.crypto.merlin.keystore.alias=my_alias 
    org.apache.wss4j.crypto.merlin.keystore.file=/etc/cert/my_keystore.jks 
    ```

6.  在 CallbackHandler 中，输入您用来生成编码密码的 master_password：

    ```
    public class WsPasswordHandler implements CallbackHandler {
    @Override
    public void handle(Callback[] callbacks) throws IOException, UnsupportedCallbackException {

        for (Callback callback: callbacks){
            WSPasswordCallback pwdCallback= (WSPasswordCallback) callback;
            final int usage =pwdCallback.getUsage();
            if (usage == WSPasswordCallback.SIGNATURE || usage==WSPasswordCallback.DECRYPT) {
            pwdCallback.setPassword("parKeyPassword");
        }
        if (usage==WSPasswordCallback.PASSWORD_ENCRYPTOR_PASSWORD){
            pwdCallback.setPassword("master_password");
        }
        }           
    } 
    ```

    }

# ruby-on-rails - 更新应该匹配器后未定义的方法'assign_to'

> ID：16025654
> 
> 赞同：6
> 
> 时间：2013-04-15T22:21:04.110
> 
> 标签：ruby-on-rails, testing, rspec, gem, shoulda

我`'shoulda-matchers'`在我的 rails 项目的 Gemfile 中从版本 1.4.2 更新到 2.0.0 现在当我运行我的 rspec 测试时，它给了我以下错误

```
undefined method `assign_to' for #<RSpec::Core::ExampleGroup::Nested_4::Nested_1::Nested_4::Nested_1:0x007fc96eaaaf48> 
```

这个方法在新的 2.0.0 版本中被删除了吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-15T22:21:04.110

是的，以下方法在 1.5.0 版中已被弃用，并在 shoulda-matchers 的 2.0.0 版中被删除。

*   `assign_to`
*   `respond_with_content_type`
*   `query_the_database`
*   `validate_format_of`
*   `have_sent_email`
*   `permit`（强参数匹配器）
*   `delegate_method`

如果您当前正在使用这些方法，开发人员建议您以另一种方式测试代码。

有关更改的简要列表，您可以访问[https://github.com/thoughtbot/should-matchers/blob/master/NEWS.md#v-200](https://github.com/thoughtbot/shoulda-matchers/blob/master/NEWS.md#v-200)。

有关删除这些方法的更改和原因的更详细列表，您可以访问他们的博客[http://robots.thoughtbot.com/post/47031676783/shoulda-matchers-2-0](http://robots.thoughtbot.com/post/47031676783/shoulda-matchers-2-0)。

# javascript - asp.net MVC中的Javascript...初学者问题

> ID：16025656
> 
> 赞同：2
> 
> 时间：2013-04-15T22:21:09.910
> 
> 标签：javascript, html, asp.net-mvc

我创建了一个 Asp.Net MVC Internet 应用程序，在 Home Controller 的索引视图中我有这个

```
This is the first line, before the script results.

<script type="text/javascript" src="~/Script/Teste.js"></script>
<br />

This line comes after the script. 
```

在我的 Teste.js 我有这个：

```
document.write("Yes! I am now a JavaScript coder!"); 
```

但什么也没有发生。如果我更改 src 属性并输入一些随机名称 src="aaaa"，尽管事实上“aaaa”不存在，但我在运行时不会出错。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T22:31:48.853

**编辑**

另外，再次检查您的路径。VS 中的默认 MVC 模板会创建一个名为 的文件夹`Scripts`，而不是`Script`. (" `~/Scripts/teste.js`")

*根据下面的评论，这不是问题的根本原因，但在其他情况下很容易咬新的 JavaScript 开发人员。*

最有可能的是，您的 document.write 函数在文档准备好之前被触发，导致看起来什么都没有发生。在您的 Teste.js 文件中尝试以下操作

```
window.onload = function ()
{
   document.write("Yes! I am now a JavaScript coder!");
   //or even better as a test
   alert("This alert was called");
} 
```

还要检查页面的来源，它可能是正在写入的文档，由于标记/页面样式，您只是看不到它。

至于您的第二个问题，如果您引用不存在的文件，则不会引发“运行时异常”。如果您使用 Firebug 或 Chrome 的开发者工具等工具，您应该会看到一个`http://siteDomain/Scripts/aaaa.js`响应为 404 的请求，未找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:38:52.907

您通常应该避免使用 document.write() ，除非您出于某种原因绝对必须使用它...我认为我从未遇到过这种情况，并且编写了很多 Javascript。

尝试这个：

1）把它放在你的HTML中：

```
<script src="/scripts/teste.js"></script> 
```

2）把这个放在你的JS中：

```
alert('Yes! I am now a JavaScript coder!'); 
```

3）打开Chrome，因为它可以轻松查找外部资源加载并打开开发者工具中的网络选项卡（单击右上角的菜单按钮，工具>开发者工具，网络选项卡）。

4) 运行您的项目并将 URL 复制/粘贴到出现在此 Chrome 窗口中的浏览器中，然后按 Enter。

当您的页面加载时，会发生以下两种情况之一：

A）你会得到你想要的警报框或

B) 你会发现为什么它没有加载，因为网络选项卡将显示浏览器尝试获取 teste.js 并以某种方式失败，例如 404，这表明你在路径中有错字，或者脚本不在您认为的位置，等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T22:40:05.530

将以下行放在文档的最后。后面不应该有什么。然后尝试加载页面。

```
<script type="text/javascript" src="~/Script/Teste.js"></script> 
```

此外，在页面加载后尝试按 F12 以查看源代码。检查您的脚本是否存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T22:46:14.730

在 MVC 中，波浪号用于引用应用程序的根 URL。但是，它通常无法解析此信息。如果你写：

```
<script src="~/Script/Teste.js"></script> 
```

查找将失败，因为这`~`在 HTML 中没有什么特别之处。如果您使用 Razor 作为视图引擎（而不是 ASPX），则需要`Url.Content`像这样包装该调用：

```
<script src="@Url.Content(~/Script/Teste.js)"></script> 
```

这样做将确保向浏览器提供有效的 URL。

考虑到这一点，您需要检查文件名和文件夹名是否正确。您还需要确保该文件与您的应用程序一起部署。您可以在解决方案资源管理器中选择文件并按 时打开属性面板来执行此操作`F4`。

# python - 使 eyeD3 模块可用于在 python 中导入

> ID：16025662
> 
> 赞同：3
> 
> 时间：2013-04-15T22:22:37.820
> 
> 标签：python, windows, eyed3

在 Windows 上，我安装了 Python 2.7 并将*python.exe 的*目录添加到 PATH。然后我安装了*pip* und used`pip install eyeD3`来成功安装 eyeD3 模块。但是， using`import eyeD3`不起作用，而是抛出一个`ImportError`. 我有在命令行中调整`PYTHONPATH`-environment-variable 的想法，但不知道我必须设置什么。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-15T22:40:29.690

尝试`import eyed3`（没有大写 D）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-21T05:55:13.497

命名空间在 0.7 中更改为 eyed3，API 也是如此。在所有平台上。

# json - 使用 Google Refine 从 Google Maps API JSON 中提取邮政编码

> ID：16025666
> 
> 赞同：0
> 
> 时间：2013-04-15T22:22:46.617
> 
> 标签：json, google-maps, postal-code, google-refine

我正在尝试使用 Google Refine 从 Google Maps API JSON 中提取邮政编码。

我通过获取 URL 添加了一个新列：

`"http://maps.googleapis.com/maps/api/geocode/json?sensor=false&address=" + escape(value, "url")`

那么生成的JSON如下：

```
{ "results" : [ { "address_components" : [ { "long_name" : "44", "short_name" : "44", "types" : [ "street_number" ] }, { "long_name" : "Homer Street", "short_name" : "Homer St", "types" : [ "route" ] }, { "long_name" : "London", "short_name" : "London", "types" : [ "locality", "political" ] }, { "long_name" : "Greater London", "short_name" : "Gt Lon", "types" : [ "administrative_area_level_2", "political" ] }, { "long_name" : "United Kingdom", "short_name" : "GB", "types" : [ "country", "political" ] }, { "long_name" : "W1H 4NW", "short_name" : "W1H 4NW", "types" : [ "postal_code" ] }, { "long_name" : "London", "short_name" : "London", "types" : [ "postal_town" ] } ], "formatted_address" : "44 Homer Street, London, Greater London W1H 4NW, UK", "geometry" : { "location" : { "lat" : 51.51981750, "lng" : -0.16534040 }, "location_type" : "ROOFTOP", "viewport" : { "northeast" : { "lat" : 51.52116648029151, "lng" : -0.1639914197084980 }, "southwest" : { "lat" : 51.51846851970851, "lng" : -0.1666893802915020 } } }, "types" : [ "street_address" ] } ], "status" : "OK" } 
```

在浏览了一些博客以找到相关代码后，我尝试使用此转换列...

```
value.parseJson().results[0]["formatted_address"] 
```

...这对完整地址很有用。

当我尝试提取邮政编码时出现问题。我试着摆弄，但一无所获，然后我下载了 JSONPad 并将 JSON 粘贴到树形图中以获取路径：

```
value.parseJson().results[0]["address_components"][5]["long_name"] 
```

问题在于，这对于某些条目来说是完美地提取了邮政编码，而对于其他条目来说却不是那么完美，它提取了其他东西——例如城镇或国家。

将 [5] 更改为 [6] 似乎可以提取其他地址的邮政编码，但是有没有办法只提取邮政编码，而不管它在结构中的哪个位置？

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T00:28:05.807

您可以将邓肯的回答从 Javascript 翻译成 Python 并将其与 Jython 解释器一起使用，或者您可以使用以下 GREL 表达式（我发布到 Google Groups 以响应您的查询）：

> filter(forEach(value.parseJson().results[0].address_components,c,if(c.types[0]=='postal_code',c.long_name,'')),v,v!='') [0]

当然，这一切都假定您根据 API 的服务条款使用这些数据在 Google 地图上显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:10:43.670

您可能需要做的是遍历 address_components 数组中的结构，检查每个结构的“类型”。当 types 包含“postal_code”时，然后是 tada，那就是您的邮政编码。

类似于以下代码（对我有用）：

```
<script type="text/javascript">
var stuData = 
{
    "results": [{
            "address_components": [{
                    "long_name": "44",
                    "short_name": "44",
                    "types": ["street_number"]
                }, {
                    "long_name": "Homer Street",
                    "short_name": "Homer St",
                    "types": ["route"]
                }, {
                    "long_name": "London",
                    "short_name": "London",
                    "types": ["locality", "political"]
                }, {
                    "long_name": "Greater London",
                    "short_name": "Gt Lon",
                    "types": ["administrative_area_level_2", "political"]
                }, {
                    "long_name": "United Kingdom",
                    "short_name": "GB",
                    "types": ["country", "political"]
                }, {
                    "long_name": "W1H 4NW",
                    "short_name": "W1H 4NW",
                    "types": ["postal_code"]
                }, {
                    "long_name": "London",
                    "short_name": "London",
                    "types": ["postal_town"]
                }
            ],
            "formatted_address": "44 Homer Street, London, Greater London W1H 4NW, UK",
            "geometry": {
                "location": {
                    "lat": 51.51981750,
                    "lng": -0.16534040
                },
                "location_type": "ROOFTOP",
                "viewport": {
                    "northeast": {
                        "lat": 51.52116648029151,
                        "lng": -0.1639914197084980
                    },
                    "southwest": {
                        "lat": 51.51846851970851,
                        "lng": -0.1666893802915020
                    }
                }
            },
            "types": ["street_address"]
        }
    ],
    "status": "OK"
};

var myPostcode;

for (var i = 0; i < stuData.results[0].address_components.length; i++) {
    for (var j = 0; j < stuData.results[0].address_components[i].types.length; j++) {
        if (stuData.results[0].address_components[i].types[j] == "postal_code") {
            myPostcode = stuData.results[0].address_components[i].long_name;
            break;
        }
    }
}

console.log(myPostcode);
</script> 
```

# python - 使用模板标签引发错误

> ID：16025671
> 
> 赞同：-1
> 
> 时间：2013-04-15T22:23:35.270
> 
> 标签：python, django

如果满足条件，我想定义一个变量：

```
 {% if order_item.status.ordering >= 60 and is_client %}
        {% with readonly=1 %}
    {% else %}
        {% with readonly=0 %}
    {% endif %}

    ...some code

    {% endwith %} 
```

但是，我收到以下错误：

```
Invalid block tag: 'else', expected 'endwith' 
```

如何在 django 中修复此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:31:54.283

这段代码没有任何意义，首先你应该学习 with 语法。您已经打开它两次并关闭了一次，但里面没有任何有用的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:33:50.167

也许最好将`readonly`属性/方法添加到您的`order_item.status`.

或者，您也可以尝试使用模板过滤器或模板标签。

# angularjs - 带有斜线的angularjs $http参数

> ID：16025678
> 
> 赞同：4
> 
> 时间：2013-04-15T22:23:59.353
> 
> 标签：angularjs, slim

我正在使用带有 slim php 的 angularjs，并且我在 slim 中有一个 GET 操作

```
action/param1/param2 
```

然后在我的 angularJS

```
$http({
 url: 'action',
method: 'GET',
params:{param1: param1, param2: param2}
}).success(); 
```

它使用控制台返回错误？和&，但我需要在参数之间加上斜线

```
http://xxxxxx/action?param=aaa&param2=bbb 
```

我已经尝试过，我将 $http 参数更改为下面并且它可以工作

```
 url: 'action/' + param1 + '/' + param2 
```

好的，我的问题是，有没有比我更好的解决方案？因为我觉得我的愚蠢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T09:19:24.407

改用[$resource](http://docs.angularjs.org/api/ngResource.%24resource)：

```
var myResource = $resource('action/:foo/:bar', {},
                           { get: { method: 'GET' } }
                          );
myResource.get({foo:1, bar:2}); 
```

将调用：

[http://yourserver.com/action/1/2](http://yourserver.com/action/1/2)

# visual-studio-2010 - Visual Studio 2012 SSRS 连接到基于声明的 SharePoint 网站？

> ID：16025685
> 
> 赞同：2
> 
> 时间：2013-04-15T22:24:23.017
> 
> 标签：visual-studio-2010, authentication, sharepoint-2010, claims-based-identity

我有一个使用基于声明的 sharePoint Web 应用程序。

在我的开发客户端（Visual Studio 2012 和商业智能 2012）上，我正在尝试使用告诉我**Forbidden 403**的用户/密码与 sharePoint 列表建立连接。我也尝试过集成，但它告诉我此连接类型（XML 和/或 SharePoint 列表）不支持集成

**有什么方法可以连接到基于 SSRS 2012 开发客户端的声明下的此 SharePoint 2010 列表？**

我敢肯定，一旦部署报告，我还会遇到另一组问题。就像我可以获得一个本地 SSRS 服务器（未集成 SP）来使用基于声明的......托管在 SharePoint 中）在 SP webparts 中**没有安全提示**？

# javascript - 如何使用 Google 自定义搜索 API 下载 100 张图像以用于处理？

> ID：16025688
> 
> 赞同：2
> 
> 时间：2013-04-15T22:24:53.223
> 
> 标签：javascript, image-processing, processing, google-search-api

我和一个朋友正在尝试在 Processing 中创建一个 Photomosaic 生成器。我们希望能够使用自定义搜索 API 从 Google 提取 100 张图像，限制图像大小和主色，以及其他一些东西。我们想保存这些图像，以便我们可以在我们的程序中处理它们。我们还希望使用来自 GUI 的数据来构建 API 调用，即搜索关键字。

以下代码片段显示了我们希望使用哪些参数来约束我们的图像搜索：

```
var searcher = new google.search.customSearchControl.getImageSearcher();
searcher.setRestriction(
  google.search.Search.RESTRICT_SAFESEARCH,
  google.search.Search.SAFESEARCH_STRICT
);
searcher.setRestriction(
  google.search.customSearchControl.getImageSearcher.RESTRICT_IMAGESIZE,
  google.search.customSearchControl.getImageSearcher.IMAGESIZE_MEDUIM
);
searcher.setRestriction(
  google.search.customSearchControl.getImageSearcher.RESTRICT_COLORFILTER,
  google.search.customSearchControl.getImageSearcher.COLOR_RED
);
searcher.execute(keyword); 
```

我们只是不确定如何限制搜索结果的数量或数据返回的格式。是 JSON 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T23:24:50.523

这是如果您正在构建一个 URL，而不是以编程方式进行的。

*   要指定`JSON`为返回值，请附加`&alt=json`到请求 URL 的末尾。
*   要限制返回的搜索次数，`num=50`请用作参数之一

来源：[https ://developers.google.com/custom-search/v1/using_rest#query-params](https://developers.google.com/custom-search/v1/using_rest#query-params)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:35:47.823

以下页面包含 Google 自定义搜索 API 的所有文档：

[https://developers.google.com/custom-search/v1/overview](https://developers.google.com/custom-search/v1/overview)

乍一看，我可以看到它是一个 JSON / atom api。所以我猜可能默认返回格式是 JSON 并且通过内容协商您也可以请求 atom（但请再次阅读文档以确保）。

# c++ - 添加两个大数

> ID：16025689
> 
> 赞同：1
> 
> 时间：2013-04-15T22:24:55.457
> 
> 标签：c++

我实现了一个名为的类`bignumber`，它将一个大数字作为一个字符串并将其存储在一个数组中。

我为它交了一个朋友`operation +`来添加两个大数字。运行后，我收到程序没有响应的错误。问题是什么？

### .h 文件：

```
class bignumber
{
        private:
            int *number;
            int size;
            string num;
        public:
        bignumber(int);
        bignumber(string ,int);
        ~bignumber();
        friend bignumber operator+(bignumber,bignumber);
}; 
```

### 定义：

```
bignumber :: bignumber(int numsize)
{
this->size= numsize;
this->number= new int[size];
};

bignumber :: bignumber(string inputnum,int numsize)
{
int *number = new int[numsize];
size = numsize;
num = inputnum;
for(int i=0;i<numsize;i++){
    number[i] = int(num[i])-48;
    };
};

bignumber :: ~bignumber()
{
delete [] number;
};

bignumber operator+(bignumber num1,bignumber num2)
{
if(num2.size>num1.size){
    int e = num2.size - num1.size - 1;
    int *tempnum = new int [num2.size];
    for(int i=0;i<num1.size;i++){
        tempnum[e+i] = num1.number[i];
    }
    delete [] num1.number;
    num1.number = new int[num2.size];
    for(int i=0;i<num2.size;i++){
        num1.number[i] = tempnum[i];
    }
    delete [] tempnum;
}
else if(num1.size>num2.size){
    int e = num1.size - num2.size - 1;
    int *tempnum = new int [num1.size];
    for(int i=0;i<num2.size;i++){
        tempnum[e+i] = num2.number[i];
    }
    delete [] num2.number;
    num2.number = new int[num1.size];
    for(int i=0;i<num1.size;i++){
        num2.number[i] = tempnum[i];
    }
    delete [] tempnum;
}
bignumber temp(max(num1.size,num2.size));
int carry = 0;
for(int i = 0;i < temp.size;i++){
    temp.number[i] = num1.number[i] + num2.number[i] + carry;
    if (temp.number[i] > 10){
        temp.number[i] -= 10;
        int carry = 1;
    }
};
if(carry = 1){
    int *temp2 = new int[temp.size+1];
    temp2[0] = carry;
    for(int j = 1;j < temp.size+1;j++){
        temp2[j] = temp.number[j-1];
    };
    temp.size += 1;
    delete [] temp.number;
    temp.number = new int[temp.size];
    for(int i=0;i<temp.size;i++){
        temp.number[i] = temp2[i];
    }
    delete [] temp2;
};
}; 
```

另外我不知道如何定义`operator >>`输入数字。我是作为朋友写的，但它不起作用：

```
istream& operator>>(string s,int size)
{
bignumber(s,size);

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:24:05.103

1）您没有提供复制构造函数，因此编译器使复制构造函数具有浅拷贝。运算符 = 也是如此。当您手动分配内存时，这是非常错误的。

调用按值传递参数的 operator+ 将导致创建操作数的两个浅临时副本。然后修改这些临时变量，删除指针并将它们设置为新值。但是操作数对此一无所知，它们的`number`指针仍将指向已删除的内存，因此操作数将变得不可用并在对它们的任何访问或销毁时使您的程序崩溃（当它们的析构函数将尝试删除已删除的内存时）。

您不会在您的 operator+ 中返回任何内容，但您必须这样做，并且缺少复制构造函数将导致另一个分配错误。

2）通过值传递复杂对象很少是一个好习惯，只有在你有真正的理由时才这样做。否则，请`const myclass& param`改用。对于您的 operator+，签名将是 `bignumber operator+(const bignumber& num1, const bignumber& num2)`. 是的，由于您无法修改 num1 和 num2，您仍然需要需要增长的数字的本地副本，但这是一个副本，而不是您拥有的两个副本。

3）实现operator+最好在你已经实现过更简单的时候再做，`MyClass& MyClass::operator+=(const MyClass& that);`之后就可以使用

```
MyClass operator+(const MyClass& first, const MyClass& second)
  {
  MyClass retval(first);
  retval+=second;
  return retval;
  } 
```

您的 operator+ 仍然会比需要的更复杂，因为您没有提供一些基本功能。您`number`多次调整大小 - 为什么不将其设为成员函数`resize(int newsize)`？您可以单独测试和调试它，然后您的操作员会简单得多。

...这一切都导致了一个明显的问题：你为什么不使用`vector<int>`数字？它将解决上述所有问题：编译器生成的构造函数和 operator= 可以正常工作，没有分配噩梦，`resize()`并且已经提供了许多其他有用的函数并经过全面测试。或者，您可以仅使用字符串：整数实际上在您的代码中被浪费了，因为您在每个整数中只存储数字 0..9。定义像 int2character 和 character2int 这样的成员函数，你已经摆脱了大部分问题。

4) 流的 operator>> 应该有一个签名

```
istream& operator>>(istream& is, bignumber& num); 
```

并且是这样的：

```
istream& operator>>(istream& is, bignumber& num)
  {
  string strTmp;
  is>>strTmp;
  //checks for istream state etc
  //...
  //calculate size of number from the extracted string
  //...
  //then construct a temporary
  bignumber tmp(strTmp, calcsize);
  num=tmp;//don't forget assignment operator
  //or
  //just provide a method to reset value of bignumber from string
  //it can be a member function
  num.assign(strTmp);
  //or operator=(const string& str);
  num=strTmp;
  return is;
  } 
```

也就是说，通常为了使您的流运算符，您使用已经为其他类型定义的流运算符。

5) 使用后不要在循环中重置进位标志。

# launch - Zookeeper 在单节点模式下启动错误

> ID：16025695
> 
> 赞同：0
> 
> 时间：2013-04-15T22:25:20.140
> 
> 标签：launch, apache-zookeeper

这是命令行： bin/zookeeper-server-start.sh config/zookeeper.properties

这是输出： [2013-04-15 18:18:05,570] INFO tickTime 设置为 3000 (org.apache.zookeeper.server.ZooKeeperServer) [2013-04-15 18:18:05,570] INFO minSessionTimeout 设置为 - 1 (org.apache.zookeeper.server.ZooKeeperServer) [2013-04-15 18:18:05,570] INFO maxSessionTimeout 设置为 -1 (org.apache.zookeeper.server.ZooKeeperServer) [2013-04-15 18:18 :05,590] 信息绑定到端口 0.0.0.0/0.0.0.0:2181 (org.apache.zookeeper.server.NIOServerCnxn) [2013-04-15 18:18:05,601] 信息读取快照 /tmp/zookeeper/version-2 /snapshot.0 (org.apache.zookeeper.server.persistence.FileSnap) [2013-04-15 18:18:05,607] 信息快照：0 (org.apache.zookeeper.server.persistence.FileTxnSnapLog)

它卡在这里，永远不会前进

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T11:31:56.543

我试过了，它确实停在那里，但服务器正在运行，所以这似乎是默认行为。尝试通过 zkClient 连接到 ZooKeeper 实例，它工作正常:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-15T16:38:15.070

这意味着您的服务运行良好。使用[nohup](http://linux.101hacks.com/unix/nohup-command/)。它在后台运行您的命令，您不必等待它。

# php - 如何从mysql数据库中删除

> ID：16025698
> 
> 赞同：-6
> 
> 时间：2013-04-15T22:25:32.267
> 
> 标签：php, mysql, forms

我有一个像这样的html表单：

```
<form method="post" action="input.php">
<label for="name">NAME</label>
<input type="text" name="name" size="20">
<label for="address">ADDIE</label>
<input type="text" name="address" size="40">
<input type="submit" name="submit" value="Send"> 
```

我有：

```
<?php

mysql_connect("localhost","formuser","password") or die(mysql_error());
mysql_select_db("formpractice") or die(mysql_error());

$name = $_POST['name'];
$address = $_POST['address'];

$query = "INSERT INTO Users(name, address) VALUES ('$name', '$address')";

$qresult = mysql_query($query);

if ($qresult) {
    echo "Success";
} else {
    echo "Failed to submit";
}

?> 
```

我正在尝试这个：

```
<form method="post" action="input.php">
<label for="name">NAME</label>
<input type="text" name="name" size="20">
<label for="address">ADDIE</label>
<input type="text" name="address" size="40">
<input type="submit" name="submit" value="Send">
// Here is where I get trouble. How do I get this button to execute a delete statement?
<input type="submit" name="Delete" value="Delete"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:33:32.703

```
<form action="something.php" method=post">
Name: <input type=text name="name">
Price: <input type=text name="othername">
<input type=submit value="remove this from the database on the web server">
</form> 
```

添加这个 php：

```
<?=
$name=$_POST['name'];
$price=$_POST['price'];

$sql = "Delete * from (whatever) VALUES ('$name','$othername')";
$result = mysql_query($sql); 
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T23:27:47.007

```
<form method="post" action="input.php">
<label for="name">NAME</label>
<input type="text" name="name" size="20">
<label for="address">ADDIE</label>
<input type="text" name="address" size="40">
<input type="submit" name="submit" value="Send">
// Here is where I get trouble. How do I get this button to execute a delete statement?
<input type="submit" name="Delete" value="Delete"> 
```

您在“名称”中输入的任何内容都将以用于表单的方法（在本例中为 POST）发送；您可以在全局变量 $_POST 中找到它。为了使该按钮“删除”，您需要在某个地方（在这种情况下，它将位于您的 forgm 标记的“action”属性中的 .php 文件中）具有执行的 php 代码使用您通过表格传递的信息（姓名和地址）进行删除。

如果您要保持相同的表单，这意味着您将使用两个提交按钮，那么您的 php 代码必须以某种方式确定您希望它执行什么操作（输入或删除），这就是您将使用的地方输入标签的名称属性。

```
<?php
     if($_POST['Delete']{ 
         //connect to database, issue query, close database
     }

     if($_POST['submit']{
           //the code you had for sending the data
     }
?> 
```

I strongly recommend the book Head First PHP and MySQL for learning!

# facebook - 事件搜索 API 中的分页

> ID：16025701
> 
> 赞同：-1
> 
> 时间：2013-04-15T22:25:37.453
> 
> 标签：facebook, facebook-graph-api

我正在使用 type=event 对 facebooks 搜索 API 执行休息调用

前任

```
search?fields=id,name,picture,owner,description,start_time,end_time,location,venue,updated_time,ticket_uri&q=concert&type=event 
```

我查看了文档，但对于事件搜索 API 的特定分页行为仍有一些疑问。

1.  如果我使用像“ma”这样的广泛搜索词并继续查询分页 ['next'] URL，我会循环浏览所有以“ma”开头的 Facebook 事件吗？当没有更多结果要返回时，分页数组是否给出任何指示？

2.  这些搜索是否包括过去的事件？如果是这样，是否可以使用“since”参数消除过去的事件？

3.  限制参数的最大值是多少？

更新：

据我所知，您可以从 facebook 搜索中获得的页面数量限制为 500。这包括可以通过分页访问的页面。换句话说，限制 >=500 的查询不会返回分页 url，同样，限制为 250 的查询只会返回一页的分页。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T01:50:25.993

1.  您将“下一页”，直到结果数少于限制

2.  我不确定这是否可以使用简单的图形请求。也许使用 FQL

3.  我不确切知道。但我一天使用了 2000 个限制。它奏效了。

其他疑问，您可以使用此工具测试您的请求得到答案

[https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T07:55:50.597

我也在做和你一样的事情。我正在使用图形搜索 api 收集公共帖子。

1.  当没有可用的结果或您达到最大限制时，分页部分将不会有响应。因此，您始终可以检查 json 响应中是否存在分页或类似的内容。

    NextResult = DeserJsonFBResponce.paging != null ？DeserJsonFBResponce.paging.next : string.Empty;

2.  我对事件不太确定，但对于公共帖子，我可以使用科学和直到参数来消除帖子。

3.  每个 get 请求的 limit 参数最大值为 2000。

# c# - c# 获取特定文件名

> ID：16025704
> 
> 赞同：0
> 
> 时间：2013-04-15T22:25:53.757
> 
> 标签：c#, file

如何根据我当前的读入方法获取文件的特定文件名，

我以这种方式获取文件：

```
 var lines = Directory.GetFiles(path, "prefix*.csv").Select(
        fn => File.ReadAllLines(fn).Select(a => a.Split(',')).ToList()).ToList(); 
```

每个文件完成后，我想将文件从一个位置移动到另一个位置，但我没有确切的文件名：

```
 File.Move(path, destPath); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T22:29:24.887

不要滥用 LINQ。如果您需要中间数据片段（如文件名），则从链接的 LINQ 语句中分出片段以执行您想要执行的操作。

```
foreach (var filename in Directory.GetFiles(path, "prefix*.csv)) {
    var linesFromOneFile = File.ReadAllLines(filename)
                               .Select(a => a.Split(',')).ToList();

    // Whatever else with 'filename'
    File.Move(...);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:28:02.947

在这种情况下，我相信将您的操作分成多个步骤而不是一个链接命令会更明智。存储您的文件名，根据需要处理它，然后遍历文件名集合并将它们简单地移动到您想要的位置。

# box-api - 是否可以仅授予某些文件夹对应用程序的访问权限？

> ID：16025710
> 
> 赞同：1
> 
> 时间：2013-04-15T22:26:14.327
> 
> 标签：box-api

我阅读了 Box 网站上的 OAuth 文档，并了解了授予应用程序资源访问权限的步骤。

但是，看起来盒子帐户下的所有资源（所有文件夹和文件）都将暴露给授权的应用程序。是否可以只授予某些文件夹对应用程序的访问权限而不是全部？

非常感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T23:16:37.077

我们正在构建其他范围，但目前唯一可用的范围是完整帐户读/写。

# asp.net-mvc-3 - 使用 iTextSharp 从视图中生成 PDF

> ID：16025713
> 
> 赞同：1
> 
> 时间：2013-04-15T22:26:30.303
> 
> 标签：asp.net-mvc-3, pdf-generation, itextsharp

我的要求是在我的视图中有一个按钮，单击该按钮应从该视图生成 PDF 报告。（应避免再次访问数据库以获取 PDF 报告的数据）。

我决定使用 iTextSharp。有人可以发布一些示例或将我引导到适当的文章吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T12:03:12.070

我在此链接上回答了类似的问题。

您将需要从数据库中整理出缓存数据，这个版本只是再次查询它。

[如何在 mvc3 中制作特定视图的 pdf 报告](https://stackoverflow.com/questions/12796940/how-to-make-a-pdf-report-of-a-particular-view-in-mvc3/12798212#12798212)

# c# - 为什么数据驱动的单元测试在 vs2010 中运行良好时却在 vs2012 中失败？

> ID：16025719
> 
> 赞同：5
> 
> 时间：2013-04-15T22:26:46.760
> 
> 标签：c#, visual-studio-2010, visual-studio-2012, data-driven-tests, deploymentitem

我有一些在 Visual Studio 2010 中运行良好的数据驱动单元测试。这些测试是使用以下模式实现的。

```
[TestMethod()]
[DeploymentItem("path_to_data_dir_relative_to_solution\\my_data.xml")]
[DataSource("Microsoft.VisualStudio.TestTools.DataSource.XML", "|DataDirectory|\\my_data.xml", "Token", DataAccessMethod.Sequential)]
public void MyTestMethod()
{
    // Arrange
    const string EXPECTED_PARAM_NAME = "table";
    string data = TestContext.DataRow["Data"].ToString();
    var sut = new MyClassUnderTest();

    // Act
    sut.DoSomething(data);

    // Assert
    Assert.IsTrue(sut.DidSomething);
} 
```

这是我的解决方案结构。

*   我的解决方案文件夹
    *   我的测试项目文件夹
    *   我的测试数据文件夹
        *   my_data.xml

当我在 Visual Studio 2012 中运行相同的测试时，它们会失败并显示以下错误消息。

结果消息：单元测试适配器未能连接到数据源或读取数据。有关解决此错误的详细信息，请参阅 MSDN 库中的“数据驱动单元测试故障排除”( [http://go.microsoft.com/fwlink/?LinkId=62412](http://go.microsoft.com/fwlink/?LinkId=62412) )。错误详细信息：对象引用未设置为对象的实例。

为什么我的单元测试突然失败了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T22:30:34.760

在 Visual Studio 2010 中，`DeploymentItem`属性是相对于**解决方案**的，但在 Visual Studio 2012 中，它是相对于**项目**的。只需指定`DeploymentItem`相对于项目文件夹的路径，单元测试将再次开始工作。

有关更多信息，请参阅以下链接。

[http://social.msdn.microsoft.com/Forums/en-US/vsunittest/thread/4a8403a2-b495-4120-aad3-0d0becc7e45e/](http://social.msdn.microsoft.com/Forums/en-US/vsunittest/thread/4a8403a2-b495-4120-aad3-0d0becc7e45e/)

# arrays - 无法用 VBA 累积数组元素的总和

> ID：16025722
> 
> 赞同：0
> 
> 时间：2013-04-15T22:26:53.553
> 
> 标签：arrays, vba, sum

我正在尝试在 4 值维度 (4,1) 的 excel 列中累积值的总和。

所以，我构造了下面的代码。对于 Result 侧列中的第一行，它应该与原始数组中的值相同。但是，一旦它大于第一行，它应该获取结果的前一个元素（i-1）并将当前列元素（i）添加到它。

VBA 告诉我下标超出范围：/ 我不知道为什么......所以我什至不知道我的代码是否符合我的要求。

```
Sub CumulativeSum()
    Dim i As Integer
    Dim j As Integer
    Dim rColumn() As Variant
    Dim result() As Variant
    ReDim result(1 To 4)
    rColumn = Worksheets("Sheet1").Range("E1:E4").Value2

    For i = 1 To 4
        result(1) = rColumn(1, 1)
        For j = 2 To 3
            result(j) = rColumn(j, 1) + result(j - 1)
        Next j
   Next i
   Dim dest As Range
   Set dest = Worksheets("Sheet1").Range("F1")
   dest.Resize(4, 1).Value = result
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T00:57:04.787

```
Sub CumulativeSum()

    Dim dest As Range
    Dim i As Integer
    Dim j As Integer
    Dim rColumn() As Variant
    Dim result() As Variant
    ReDim result(1 To 4)
    rColumn = Worksheets("Sheet1").Range("E1:E4").Value2

    result(1) = rColumn(1, 1)
    For j = 2 To 4
        result(j) = rColumn(j, 1) + result(j - 1)
    Next j

    Set dest = Worksheets("Sheet1").Range("F1")
    dest.Resize(4, 1).Value = Application.Transpose(result)

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-08T19:52:40.327

没有足够的代表来添加评论但是..您收到错误的原因是因为 Cells 的语法是 Cells([Row],[Column])。您将其输入为 Cells([Column],[Row])。

尝试 Range(Cells(1, 5), Cells(4, 5)) 代替。

# playframework - 播放框架迁移错误

> ID：16025729
> 
> 赞同：1
> 
> 时间：2013-04-15T22:27:23.323
> 
> 标签：playframework, migration, playframework-2.0, playframework-2.1

从 Play 2.0.4 迁移到 Play 2.1.1 后，我收到以下错误：

```
[error] /home/xxx/project/app/controllers/Application.scala:489: type mismatch;
[error]  found   : play.api.data.Form[contents.Entry]
[error]  required: play.data.Form[contents.Entry]
[error]     Ok(views.html.shareKnowledge(contentForm, loadEntries(Option(request.user.id), Option(request.user.id), None, None), Map("deleteButton"->"show"))) 
```

HTML 模板中对应的行是

```
@(contentForm: Form[contents.Entry], entries: Array[contents.Entry], streamDisplayOptions: Map[String,String]) 
```

我只是通过了一个表格...

我阅读了[http://www.playframework.com/documentation/2.1.0/Migration](http://www.playframework.com/documentation/2.1.0/Migration) 但我仍然不知道如何解决它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T07:00:38.077

看起来在您的迁移过程中混合使用了 Java 和 Scala。

`play.api.data.Form[contents.Entry]`用于 Scala。

`play.data.Form[contents.Entry]`用于Java。

如果您遵循[迁移指南](http://www.playframework.com/documentation/2.1.1/Migration)，那么您可能会这样做：

```
val appDependencies = Seq(
   javaCore, javaJdbc, javaEbean
) 
```

但既然你有一个 Scala 项目，那么你也应该阅读之后的段落：

> 不再需要项目的**mainLang参数。**主要语言是根据添加到项目中的依赖项确定的。如果依赖项包含**javaCore**则语言设置为**JAVA**否则**SCALA**。**请注意appDependencies**部分中的模块化依赖项。

这意味着您`appDependencies`应该如下所示：

```
val appDependencies = Seq(
   jdbc
) 
```

# c++ - 动态内存分配的交叉编译器问题

> ID：16025734
> 
> 赞同：1
> 
> 时间：2013-04-15T22:28:02.523
> 
> 标签：c++, memory-management, cross-compiling, ansi

我为分配内存编写了一个程序，我以这种方式分配内存： `EdgeBucket* edgeTable[ n_scanlines ];`. 我知道这在 C 中通常是非法的，但我不知道它也不能在 C++ 中完成。但是，当我使用 g++ 编译它时，它没有给出编译错误。但是我的评分者正在使用视觉工作室，当他尝试构建我的程序时，它给出了错误，指出数组的长度必须是恒定的。我通常使用 -ansi 和 -Wall 选项编译我的程序以确保交叉编译器的完整性，但即使这样也没有检测到这一点。我担心我的成绩会因此受到影响，所以有谁知道为什么 -ansi 编译器没有捕捉到这一点，以及可以做些什么来防止进一步的交叉编译器差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:30:15.207

使用`-pedantic-errors`标志。[例子](http://liveworkspace.org/code/5yx2Z%240)。

它们被称为 VLA（可变长度数组）。从 C99 开始在 C 中是合法的，在 C++ 中是非法的。

# php - MySQL 行数 > 1 但 SELECT 只返回 1？

> ID：16025737
> 
> 赞同：-1
> 
> 时间：2013-04-15T22:28:08.020
> 
> 标签：php, mysql, while-loop

我有一个带有 PDO 的简单 MySQL 查询，即`SELECT * FROM table WHERE variable=:variable`，然后我执行它。我使用该函数获取受影响的行数`rowCount();`，然后返回 20，以符合我所追求的特定标准。但是，当我移动到 时`while statement`，只有一个结果被回显。此外，这是一个新问题，实际上是 20 分钟前才开始发生的。建议？

**编辑以添加代码**

```
 $stmt = $db->prepare("SELECT * FROM files WHERE `subject`=:subject ORDER BY title");
        $stmt->execute(array(':subject' => $_GET['subject']));
        $row_count = $stmt->rowCount();     
        if ($row_count > 0) {
            echo $row_count;
            echo "<div class='row'>";
            while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
                $stmt = $db->prepare("SELECT * FROM users WHERE userID=:userID");
                $stmt->execute(array(':userID' => $row['userID']));
                $resultsArray = $stmt->fetchAll(PDO::FETCH_ASSOC);
                $resultsArray = $resultsArray[0];
                $fullName = $resultsArray['name'];
                $authorEmail = $resultsArray['email'];
             }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:38:04.953

您正在`$stmt`基于同一变量的 while 循环内分配给您的`$stmt`变量。

替换您的以下代码：

```
while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
            $stmt = $db->prepare("SELECT * FROM users WHERE userID=:userID");
            $stmt->execute(array(':userID' => $row['userID']));
            $resultsArray = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

对于这个：

```
 while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
            $stmt2 = $db->prepare("SELECT * FROM users WHERE userID=:userID");
            $stmt2->execute(array(':userID' => $row['userID']));
            $resultsArray = $stmt2->fetchAll(PDO::FETCH_ASSOC); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:38:20.423

您正在`$stmt`循环内部覆盖，因此它会停止正确获取行。

您可以将它们更改为类似`$stmt2`（或者甚至更具描述性的内容）：

```
 while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
            $stmt2 = $db->prepare("SELECT * FROM users WHERE userID=:userID");
            $stmt2->execute(array(':userID' => $row['userID']));
            $resultsArray = $stmt2->fetchAll(PDO::FETCH_ASSOC);
            $resultsArray = $resultsArray[0];
            $fullName = $resultsArray['name'];
            $authorEmail = $resultsArray['email'];
         } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T22:42:37.207

在**while**块中，您正在执行以下语句：

> $stmt = $db->prepare("SELECT * FROM users WHERE userID=:userID");

这将覆盖**while**语句中使用的**$stmt**变量。

# scala - scala.runtime.BoxedUnit 的 Jerkson (Jackson) 问题？

> ID：16025742
> 
> 赞同：2
> 
> 时间：2013-04-15T22:28:44.323
> 
> 标签：scala, jackson, jerkson

Jerkson 开始抛出一个我以前从未见过的非常奇怪的错误。

`com.fasterxml.jackson.databind.JsonMappingException: No serializer found for class scala.runtime.BoxedUnit and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationConfig.SerializationFeature.FAIL_ON_EMPTY_BEANS) ) (through reference chain: scala.collection.MapWrapper["data"])`

我正在从 API 解析一些基本数据。我定义的类是：

```
case class Segmentation(
  @(JsonProperty@field)("legend_size")
  val legend_size: Int,

  @(JsonProperty@field)("data")
  val data: Data

) 
```

看起来`Data`像：

```
case class Data(
  @(JsonProperty@field)("series")
  val series: List[String],

  @(JsonProperty@field)("values")
  val values: Map[String, Map[String, Any]]

) 
```

任何线索为什么这会触发错误？似乎是 Jerkson 可以处理的简单类。

**编辑：**样本数据：

```
{"legend_size": 1, "data": {"series": ["2013-04-06", "2013-04-07", "2013-04-08", "2013-04-09", "2013-04-10", "2013-04-11", "2013-04-12", "2013-04-13", "2013-04-14", "2013-04-15"], "values": {"datapoint": {"2013-04-12": 0, "2013-04-15": 4, "2013-04-14": 0, "2013-04-08":
0, "2013-04-09": 0, "2013-04-11": 0, "2013-04-10": 0, "2013-04-13": 0, "2013-04-06": 0, "2013-04-07": 0}}}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-23T22:43:50.803

这不是上述示例的答案，但我将提供它，因为它是我类似的“BoxedUnit”场景的答案：

```
No serializer found for class scala.runtime.BoxedUnit and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) 
```

就我而言，杰克逊抱怨反序列化 scala.runtime.BoxedUnit 对象的实例。

问：那么什么是 scala.runtime.BoxedUnit？

A：它是“Unit”的scala java表示。Jackson 的核心部分（即 java 代码）试图反序列化 scala Unit 非实体的 java 表示。

问：那为什么会这样呢？

答：在我的情况下，这是由带有未声明返回值的错误方法引起的下游副作用。有问题的方法包装了一个匹配子句（无意中）没有为每种情况返回一个值。由于上面描述的错误代码，Scala 动态地将捕获此方法结果的 var 声明为“Unit”。稍后在代码中，当此 var 序列化为 json 时，会发生杰克逊错误。

因此，如果您遇到这样的问题，我的建议是检查任何具有未定义返回值的隐式类型变量/方法，并确保它们正在做您认为他们正在做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T02:16:43.667

我也有同样的例外。在我的情况下导致它的原因是我在没有'='的伴随对象中定义了一个应用方法：

```
object Somthing {
   def apply(s: SomthingElse)  {
      ...
   }
} 
```

代替

```
object Somthing {
   def apply(s: SomthingElse) = {
      ...
   }
} 
```

这导致应用方法返回类型为 Unit，当我将对象传递给杰克逊时导致异常。不确定您的代码中是否是这种情况，或者这个问题是否仍然相关，但这可能会帮助其他人解决此类问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-23T21:59:22.560

自从我第一次发布这个问题以来已经有一段时间了。撰写此答案时的解决方案似乎是从 Jerkson 继续前进，并将 Jackson-module-scala 或 Json4s 与 Jackson 后端一起使用。许多 Scala 类型都包含在默认的序列化中并且是本地处理的。

另外，我看到的原因`BoxedUnit`是因为 Jerkson 看到的显式类型是`Any`（的一部分`Map[String, Map[String, Any]]`）。`Any`是一个基本类型，不提供 Jerkson/Jackson 关于它正在反序列化的信息。因此，它抱怨缺少序列化程序。

# c++ - C++ 从不同的类成员函数调用成员函数

> ID：16025744
> 
> 赞同：2
> 
> 时间：2013-04-15T22:28:54.033
> 
> 标签：c++

我正在编写一个简单的程序来模拟手表。上课日期、上课时间、上课时间。手表源自日期和时间。试图从 Time 成员函数调用日期成员函数。它说我不能没有对象。我正在学习，我相信大部分都是废话哈哈。任何帮助都将不胜感激。基本上在 Time::Tick 结束时，我试图在 Day 中调用 Class Date 成员函数。从另一个类成员函数调用一个成员函数。我不知道如何从另一个班级做朋友功能。我试图让我的函数静态化，但它让我走上了一条漫长的错误之路。有什么建议吗？

```
#include <iostream>
#include <iomanip>
#include <windows.h>
using namespace std;

class Date
{
public:
    Date();      
    void inDay();;// increments day, tests if month increments, if true, increment
    void inMonth();   // increments month, tests if year increments, if true, increment
    void inYear();    // increment year
    void displayWatch();   // calls daysInMonthSwith, calls inDay, Display date
    int daysInMonthSwitch(); // determines the number of days in the month based on which month using a switch
    //void testPrint(); //Testing purposes only
    void setDay();
    void setMonth();
    void setYear();

private:

    int day;
    int month;
    int year;
    int daysInMonth;
};

class Time{       
public:
    Time();

    void setTime(int, int, int ); // set hours, minutes, seconds
    void printStandard(); // print time in standard time format 12h
    void setHour();
    void setMin();
    void setSec();
    void tick();

private:
    int hour; 
    int minute;
    int second;
};

class Watch: public Time, public Date {       
public:
    Watch();

    int getDate();
    void setTime(int, int, int);
    int getTime();

private:

};

//class Time::

Date::Date() : // Class Constructor
day(27),
    month(2),
    year(2013),
    daysInMonth(31)
{            
} // End Constructor

void Date::setDay()
{
    int tempDay;
    cout << "There are " << daysInMonth << " in the current month. Please enter a day between 1 and " << daysInMonth << ": ";
    cin >> tempDay;
    while (tempDay < 1 || tempDay > daysInMonth)
    {
        cout << "You entered a day outside the range." << endl;
        cout << "There are " << daysInMonth << " in the current month. Please enter a day between 1 and " << daysInMonth << ": ";
        cin >> tempDay;
    }
    day = tempDay;
}

void Date::setMonth()
{
    int tempMonth;
    cout << "There are 12 in the year. Please enter a day between 1 and 12: ";
    cin >> tempMonth;
    while (tempMonth < 1 || tempMonth > 12)
    {
        cout << "You entered a month outside the range." << endl;
        cout << "There are 12 in the year. Please enter a day between 1 and 12: ";
        cin >> tempMonth;
    }
    month = tempMonth;    
}     

void Date::setYear()
{
    int tempYear;
    cout << "Please enter a year in the full number(Correct: 2005, Incorrect: 05): ";
    cin >> tempYear;
    year = tempYear;     
}

void Date::displayWatch()
{
    daysInMonthSwitch();
    cout << "Date: " << month << "/" << day << "/" << year << endl; 
    //testPrint(); // Prints number of days in current month for testing only
    //cout << "Month: " << month << endl; // Prints month for testing purposes
    //inDay();
}
////////////// inDay function increments day and if conditions are met, increments month and year
void Date::inDay() //increments month and if day is more greater than number of days in month, call inMonth function
{  
    day++;

    if (day > daysInMonth)
    {     
        inMonth();
        day = 1;
    }
}// end function
void Date::inMonth() // increment month and if month is more greater than or equal to 12, call inYear function
{
    month++;

    if (month >= 12)
    {
        Date::inYear();
    }
} // end function
void Date::inYear() // increment year
{
    year++;
    month = 1;
} // end function

//void Date::testPrint()
//{
// cout << "Days in month: " << daysInMonth << endl;
//} // for testing purposes only

int Date::daysInMonthSwitch() // Function contains switch that determines the number of days in the current month
{
    //int month = m;
    int result;

    switch(month)
    {
    case 1:
        result = 31;
        break;
    case 2:
        result = 28; 
        break;
    case 3:
        result = 31;
        break;
    case 4:
        result = 30;
        break;
    case 5:
        result = 31;
        break;
    case 6:
        result = 30;
        break;
    case 7:
        result = 31;
        break;
    case 8:
        result = 31;
        break;
    case 9:
        result = 30;
        break;
    case 10:
        result = 31;
        break;
    case 11:
        result = 30;
        break;
    case 12:
        result = 31;
        break;
    default :
        cout << "Invalid Month" << endl;
    }
    daysInMonth = result;
    return daysInMonth;
} // end daysInMonthSwitch function

//////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////

Time::Time()
{
    const time_t currentTime = time(0);
    const tm *localTime = localtime( &currentTime );
    setTime(localTime->tm_hour, localTime->tm_min, localTime->tm_sec);
}
void Time::setHour()
{
    int h;
    cout << "Please enter the hour: ";
    cin >> h;
    hour = ( h >= 0 && h <= 24 ) ? h : 0;
}

void Time::setMin()
{
    int m;
    cout << "Please enter the minute: ";
    cin >> m;
    minute = ( m >= 0 && m <= 60 ) ? m : 0;
}

void Time::setSec()
{
    int s;
    cout << "Please enter the second: ";
    cin >> s;
    second = ( s >= 0 && s <= 60 ) ? s : 0;
}

void Time::setTime( int h, int m, int s )
{ // validating time time, if incorrent, set to 0
    hour = ( h >= 0 && h <= 24 ) ? h : 0;
    minute = ( m >= 0 && m <= 60 ) ? m : 0;
    second = ( s >= 0 && s <= 60 ) ? s : 0;
}
///void Time::tick();

void Time::printStandard()
{
    cout << ((hour == 0 || hour == 12) ? 12 : hour % 12) << ":" <<
        setfill('0') << setw(2) << minute << ":" << setw(2) << second 
        << ( hour < 12 ? " AM" : " PM");
}

void Time::tick()
{
    while (second >=0 && second <=60)
    {

        if (second < 59)
        {
            Sleep(1000);
            second++;
        }
        else  
        {   
            Sleep(1000);     
            minute++;
            second = 0;
            if (minute >= 60)
            {
                hour++;
                minute = 0;
                if (hour >= 24)
                    hour = 0;
                inDay();
            }
        }
    }
};

///////////////////////////////////////////////////////////////////
Watch::Watch()
{}

////////////////////////////////////////////////////////////////// End Member Functions
int main()
{

    Watch watch1;
    watch1.displayWatch();
    watch1.printStandard();
    system("pause");  

    watch1.setDay();  
    watch1.displayWatch();
    watch1.printStandard();
    system("pause");  

    watch1.inDay();
    watch1.displayWatch();
    watch1.printStandard();
    system("pause");  

    return 0;
} // end main 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T22:38:01.343

你的班级`Time`不是从`Date`. 它不能调用可能恰好是子类父类的方法。想象一下，如果你`Time`单独实例化 a 。它会在什么`Date`上运作？

一个递增`Time`直到它翻转然后递增的`Date`方法需要`Watch`在它可以看到两者的地方。

# sql - 从地址获取街道名称和 Apt 编号

> ID：16025746
> 
> 赞同：4
> 
> 时间：2013-04-15T22:29:12.033
> 
> 标签：sql, sql-server, tsql

感谢您查看我的帖子，我一直在摸不着头脑，现在听起来很简单的要求结果却是一个艰巨的要求，下面是要求....

我需要分开（街道编号、街道名称、Suite\Apt 信息或找到的任何 zip）

地址如下所示：

1.  主街 123 号
2.  123 NW.17 街
3.  华盛顿路一号套房 405
4.  1 Governement Dr #400，华盛顿，01211

到目前为止，我能够分离出 123 Main St，但是每当我在字符串中进一步使用 Char\Pat 索引时，第 2 行上方的地址就会被打乱，例如变成 (123 NW St)

我的主要目标是打破htis字符串并将其放在桌子上然后连接.....

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T22:37:03.970

根据我的经验，解析地址是一场噩梦。可能至少有十几种方法可以表示同一个地址，而且您将很难想出一种可靠的方法来将各个部分分开。

我的建议是将您拥有的任何地址传递给地图服务（谷歌，雅虎等）并使用他们传回给您的结果。比你和我更聪明的人已经找到了一种非常可靠的方法来做到这一点。我建议利用他们提供的服务。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-04-16T12:08:56.467

好吧，这是我的替代建议，不是您问题的答案。

字符串操作操作总是非常关键和乏味的工作，而且很多时候它不能完美地工作。

我有一个很好的替代选择，您会喜欢它。与其拥有单行地址，不如将其划分为不同的部分。

例如 street1 street2 city state country

现在在数据库中，您可以创建 XML 数据类型并将上述所有字段存储到一个 XML 格式字段中，例如

```
<Address>
    <street1>data1</street1>
    <street2>data2</street2>
    <city>data3</city>
    <state>data4</state>
    <country>data5</country>
</Address> 
```

优点：

1.如果用户不想输入任何字段或者您不想显示任何字段，现在您可以灵活地插入和检索数据，那么这是最好的方法。
2.它也会给你很好的性能，因为 XML Parsing 比 String 操作更快。
3.XML返回比字符串操作更准确。

# php - 如何使用 PHP 将日期时间与日期时间 + X 小时进行比较？

> ID：16025747
> 
> 赞同：0
> 
> 时间：2013-04-15T22:29:16.823
> 
> 标签：php, date, datetime

我有 2 个日期时间对象。一是当前日期时间。另一个是用户签到时。我想增加 6 个小时。

我首先初始化当前日期时间：

```
$now=date("Y-m-d H:i:s"); 
```

然后我使用 datediff 但我现在不知道如何添加 6 小时，我想我必须使用 modify，但我不明白如何使用它。

```
 $datetimeIn = date_create($result->getDateCheckIn());

   $datetimeOut = date_create($now);
    date_modify($datetimeOut, '+6 hours');
    $interval = date_diff($datetimeIn, $datetimeOut);
    if ($interval->format('%a minute') > 0)
        $UsersToCheckOut[] = $result; 
```

有人可以帮我弄清楚如何将 X 小时添加到日期时间以将其与另一个进行比较吗？

我收到了这个错误： date_create() 期望参数 1 是字符串，对象在 date_modify($datetimeOut, '+6 hours'); 行中给出

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:45:35.453

我将尝试回答您的标题和我从您的问题正文中推断出您提出的问题。

PHP手册对实际比较日期时间非常清楚。这是示例代码：

```
$date1 = new DateTime("now");
$date2 = new DateTime("+6 hours");

var_dump($date1 == $date2);
var_dump($date1 < $date2);
var_dump($date1 > $date2);

//bool(false)
//bool(true)
//bool(false) 
```

您实际添加 6 小时的部分也是正确的。我复制了您的代码并对其进行了测试，看看我是否会遇到与您相同的错误。当我的 $datetimeIn 参数不好时，我这样做了。基于此和您发布的错误，看起来问题很像您的 $datetimeIn 参数。我在下面复制了我的工作代码：

```
$now=date("Y-m-d H:i:s", strtotime('2013-04-15 04:00:0'));

$datetimeIn = date_create($now);
$datetimeOut = date_create($now);
date_modify($datetimeOut, '+6 hours');
$interval = date_diff($datetimeIn, $datetimeOut);

if ($interval->format('%a minute') > 0) {
    echo "success";     
} else {
    echo "fail";
} 
```

根据错误消息，这是因为在您的行“$datetimeOut = date_create($now);”中，变量 $now 存在并且是某种对象；date_create() 要求第一个参数是某种字符串。[在此处](http://php.net/datetime.formats)查看有关有效日期和时间格式的文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T22:48:06.940

你可以得到一个副本，偏移量为 6 小时，如下所示：

```
$now    = date_create('now');
$future = date_modify(clone $now, '+ 6 hours');
$diff   = date_diff($now, $future);
var_dump($diff);die; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T22:52:31.200

```
$datetimein =  date("m/d/Y H:i:s");
$datetimeout = date("m/d/Y H:i:s", strtotime($datetimein) + 6 * 60 * 60); 
```

现场观看：[http ://codepad.viper-7.com/6wn8dK](http://codepad.viper-7.com/6wn8dK)

# java - 在android上的java文件中创建一个按钮

> ID：16025750
> 
> 赞同：0
> 
> 时间：2013-04-15T22:29:25.423
> 
> 标签：java, android, layout

我正在制作游戏，目前我有这个 java 文件

```
 package pap.crowslanding;

    import android.os.Bundle;

    public class Game extends MainActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.tester1);

} 
```

}

使用我的自定义布局 GameView，我尝试将它与我的 xml 文件 tester1 合并

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/cl_bg"
android:gravity="fill_horizontal">

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="32dp"
    android:layout_marginTop="42dp"
    android:text="@string/hello_world" />

<LinearLayout
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_alignParentBottom="true"
android:layout_alignParentLeft="true"
android:layout_marginBottom="31dp"
android:orientation="horizontal" >

<Button
    android:id="@+id/play_button"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:background="@drawable/custom_button"
    android:text="@string/first_button"
    android:textColor="@drawable/text_color_white" />

<Button
    android:id="@+id/sbutton"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"      
    android:layout_weight="1"
    android:background="@drawable/custom_button"
    android:text="@string/menu_settings"
    android:textColor="@drawable/text_color_white" />
</LinearLayout>

</RelativeLayout>

<pap.crowslanding.GameView 
 android:id="@+id/GameView" 
 android:layout_width="wrap_content" 
 android:layout_height="wrap_content"></pap.crowslanding.GameView
>

 </RelativeLayout> 
```

现在：

```
setContentView(R.layout.tester1); 
```

由于某种原因无法正常工作，但

```
setContentView(GameView(this)); 
```

工作，请任何帮助

抱歉，如果这看起来很容易，我还是个新手，但我仍然在思考它。感谢您的阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T23:22:36.070

您不能自己绘制按钮。您需要将自定义 View 包装到 XML 布局中并在其中添加 Button。有关示例，请参见[此处。](https://stackoverflow.com/questions/3260876/custom-view-in-xml-layout)如果你真的想在代码中做同样的事情，你可以以编程方式做同样的事情，但你仍然需要将它包装在布局中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T23:55:06.943

您可以创建一个包含 GameView 和 Button 的布局，并将其用作您的内容视图。

在 res/layout 中创建一个文件 main.xml，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button Text" />

    <pap.crowslanding.GameView
        android:id="@+id/game_view"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" />

</LinearLayout> 
```

然后，`onCreate`在您的 Activity 中，告诉它使用布局作为内容视图。然后，您可以获取对 GameView 和 Button 的引用，添加点击侦听器或诸如此类的东西。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    GameView gameView = (GameView) findViewById(R.id.game_view);
    Button button = (Button) findViewById(R.id.button);

    button.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View view) {
            // respond to clicks
        }
    });
} 
```

编辑：确保您的 GameView 类从其超类实现所有三个构造函数：

```
public GameView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    // TODO
}

public GameView(Context context, AttributeSet attrs) {
    super(context, attrs);
    // TODO
}

public GameView(Context context) {
    super(context);
    // TODO
} 
```

# jquery - JQuery fadeIn 与显示方法的区别

> ID：16025752
> 
> 赞同：7
> 
> 时间：2013-04-15T22:30:01.300
> 
> 标签：jquery

JQuery fadeIn() 和 show() 方法实现之间有什么真正的不同吗？当然，除了淡入淡出的动画正在发生的事实。我问这个问题是因为我看到了一种奇怪的行为。

我有一些主干视图，我在其中创建图像标签并加载它们。当我想显示它们时，它们在fadeIn() 上工作，而不是在show() 上工作。那么是我的代码问题还是 JQuery 实现它的方式的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-15T22:43:32.540

不传递任何参数的调用`show`等效于调用`.css('display', 'block')`. 如果您`opacity`设置为`0`您仍然不会看到该元素。

但是，根据[文档](http://api.jquery.com/show/)：

> 当提供持续时间、普通对象或“完整”函数时，.show() 成为动画方法。.show() 方法同时为匹配元素的宽度、高度和不透明度设置动画。

所以，如果你想`.show`表现得像`.fadeIn`，你需要传递一个参数给它。

# css - 没有滚动指示器的触摸滚动。可能的？

> ID：16025759
> 
> 赞同：-2
> 
> 时间：2013-04-15T22:31:15.637
> 
> 标签：css, mobile-webkit

我担心这个问题的简短答案是否定的。

但在我接受这个命运之前，我会尝试做最后的努力。

除了可用性问题，有什么方法可以为 webkit 移动设备进行 div 溢出，在滚动时，我看不到滚动指示器？

我真的希望避免在纯 JS 中构建自定义滚动条，因为苹果坚持强制指示器始终可见。

任何指针都非常感谢。我环顾四周，但没有发现任何有用的东西。

提醒：**我不是在问滚动条定制！！！**我在询问 touchmove 期间显示的指示器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:40:25.987

我认为您可以使用此代码。但这仅适用于 Chrome 和 Safari。

`#element::-webkit-scrollbar { display: none; }`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-16T00:25:07.083

Keeping with my tradition of answering my own question after extended research, the indicator can be hidden only by removing `-webkit-overflow-scrolling:true` CSS attribute.

This, unfortunately, also removes the spiffy scroll-elasticity feature, which is of course whey one would want to use the above CSS.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-15T23:08:34.660

从技术上讲，您可以使用以下 CSS 在 Chrome 和 Safari 中执行此操作：

```
body::-webkit-scrollbar { display: none; } 
```

但是，对于所有其他浏览器，您将需要 Javascript。基本算法如下：

**HTML**

```
<div id="container">
    <div id="content">Hello, here's lots of text...</div>
</div> 
```

**CSS**

```
#container {
    overflow: hidden;
    width: 100%;
    height: 100%;
    position: relative;
}

#content {
    position: absolute;
    left: 0px;
    top: 0px;
} 
```

**JAVASCRIPT（伪代码）**

```
When clicking on #content, check for drag
If dragging then measure amount and invert amount
Set that amount to top position of #content 
```

# php - openssl_encrypt 的替代品

> ID：16025764
> 
> 赞同：2
> 
> 时间：2013-04-15T22:31:50.777
> 
> 标签：php, openssl, vtiger

我正在使用一个名为 vTiger 的 CRM 软件，它使用函数 openssl_encrypt。不幸的是，我的主机（Hostgator）在 php 5.2.17 上不支持它。他们确实在 php 5.3 上支持它，但我不能使用它，因为 vTiger 有很多不推荐使用的功能。那是一些背景知识，所以您知道问题的出处，现在是问题：

可以用其他函数替换 openssl_encrypt 吗？我怎么能那样做

提前致谢。如果这不可能，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T22:48:40.117

除了 mcrypt，您还可以使用[phpseclib，一个纯 PHP AES 实现](http://phpseclib.sourceforge.net/)。例如

```
<?php
include('Crypt/AES.php');

$cipher = new Crypt_AES(CRYPT_AES_MODE_ECB);
$cipher->setKey('abcdefghijklmnopijklmnop');

$size = 10 * 1024;
$plaintext = str_repeat('a', $size);

echo $cipher->decrypt($cipher->encrypt($plaintext));
?> 
```

# php - php打开pentaho报告时PDF文件无效或损坏

> ID：16025767
> 
> 赞同：0
> 
> 时间：2013-04-15T22:31:54.213
> 
> 标签：php, pdf, curl, report, pentaho

我们有一个 PHP 应用程序来处理公司的订单。

在开发和生产服务器上，我们可以在打印之前在firefox内置的PDF查看器中查看订单。订单模板是用 Pentaho Report Designer 制作的，并填充了动态数据。

我想使用我的计算机的本地数据（生产数据库的副本）查看订单，但它只会打开一个空白的 pdf 选项卡。

我猜我需要在我的计算机上安装 Pentaho BI-Server 或 Pentaho Data Integration，但我似乎无法理解是哪一个。

* * *

**编辑**

我忘了说一切都已经适用于开发和生产分支。Pentaho Data Integration 安装在 svn 存储库所在的服务器上（用于开发和生产），并且 Pentaho BI-Server 仅安装在开发部署服务器上（因此如果空白选项卡是因为没有 BI-server 而应该不起作用安装）。

我认为我的本地数据源在 Pentaho 报表设计器中是错误的。

当空白 pdf 选项卡打开时，我收到这些带有 firebug 的警告和错误。

> 警告：线性化数据不可用或发现无法读取的 pdf 数据
> 
> 警告：索引所有 PDF 对象
> 
> PDF 文件无效或损坏。PDF.JS 构建：e22ee54 消息：InvalidPDFException

在代码的某个地方，curl_exec 失败了

```
curl_setopt($this->ch, CURLOPT_URL, $this->url);
$result = curl_exec($this->ch); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T07:33:27.020

我可以解决您的疑问，BI-Server 您可以将您的报告可视化到报告查看器中，数据集成用于将数据从示例 Excel 转换为任何数据库，您可以在其中创建转换和作业。

因此，如果您不想显式执行任何操作或不想创建任何批处理，那么数据集成就没有用了..

下载并解压 BI-Server rest 你会自动理解。

# c++ - Difference between two omp for loops

> ID：16025768
> 
> 赞同：1
> 
> 时间：2013-04-15T22:31:56.113
> 
> 标签：c++, parallel-processing, openmp

I'm just starting to use OpenMP and am writing a function which divides an array into `numBlocks` blocks and computes a histogram on every block (i.e., one histogram per block) by inspecting the `blockSize` elements of each block (in the code I'm providing, the histogram is recording the divisibility of the elements in the block by the integers `1` to `numBuckets`).

In the first `omp for` loop I create a thread for each block using:

```
#pragma omp for schedule(static)
for(uint blockNum = 0; blockNum < numBlocks; blockNum++){
    for(uint blockSubIdx = 0; blockSubIdx < blockSize; blockSubIdx++){
        uint idx = blockNum * blockSize + blockSubIdx;
        // Compute histogram here by examining array[idx]
    }
} 
```

Implementing it another way, I request threads to each operate on `blockSize` elements, where I have previously asserted that `array.size() == numBlocks * blockSize`:

```
#pragma omp for schedule(static, blockSize)
for(uint idx = 0; idx < array.size(); idx++){
    uint blockNum = idx / blockSize;
    // Compute histogram here by examining array[idx]
} 
```

This second method does not work correctly if I increase the number of threads (using `export OMP_NUM_THREADS`) above some threshold (78 on my compute node)--the resulting histogram values do not match those from a serial computation.

According to [https://computing.llnl.gov/tutorials/openMP/](https://computing.llnl.gov/tutorials/openMP/), it looks like the blocks of size `blockSize` in the second method are contiguous, so I'm not clear as to why it's failing. It seems like multiple threads are writing to the same index in the histogram, though. Is there a subtlety that I'm missing?

Here is a gist of the whole source code: [https://gist.github.com/anonymous/5391777](https://gist.github.com/anonymous/5391777).

**UPDATE**: The thread threshold does show some dependence on `array.size()`. It's not the particular value of the threshold that I'm trying to understand, but rather the existence of the threshold.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T08:58:13.260

It looks to me like you are trying to fuse the loop. You could try this. I don't know if that answers your question.

```
#pragma omp parallel for schedule(static)
for(uint n = 0; n < (numBlocks*blockSize); n++){
    uint blockNum = n/blockSize;
    uint blockSubIdx = n%blockSize;
    uint idx = blockNum * blockSize + blockSubIdx;
    // Compute histogram here by examining array[idx]
} 
```

Also, why are you trying to increase the number of threads? Your CPU can only run a certain number of hardware threads at once. Increasing the number of threads for OpenMP I don't think is going to help performance. Why not just leave them at the default?

Lastly if computing the histogram takes different time depending on idx you might want to try `schedule(dynamic)` instead.

# ios - 如何同时为 UIImageView 的图像和 UIImageView 本身设置动画？

> ID：16025769
> 
> 赞同：2
> 
> 时间：2013-04-15T22:31:59.557
> 
> 标签：ios, objective-c, animation, uiimageview, cabasicanimation

标题可能不太清楚，但我想做的是让 UIImageView 显示一系列图像（有点像 gif），我通过将 设置`animationImages`为图像数组然后调用`[imageView startAnimating];`. 这工作正常。我还有用 CABasicAnimation 移动 UIImageView 的代码，这个动画代码也可以正常工作。但是，当我尝试同时为 UIImageView 的图像设置动画并尝试移动 UIImageView 时，UIImageView 的图像停止动画。有解决方法吗？

这是我为 UIImageView 的内容设置动画的代码：

```
 self.playerSprite = [[UIImageView alloc] initWithImage:[self.player.animationImages objectAtIndex:0]];
    [self.playerSprite setFrame:CGRectMake(self.center.x, self.center.y, self.tileSet.constants.TILE_WIDTH, self.tileSet.constants.TILE_HEIGHT)];
    self.playerSprite.animationImages = self.player.animationImages;
    self.playerSprite.animationDuration = self.tileSet.constants.animationDuration;
    self.playerSprite.animationRepeatCount = 0; //Makes it repeat indefinitely 
```

这是我使用 CABasicAnimation 为 UIImageView 设置动画的代码：

```
float playerSpriteX = self.playerSprite.center.x;
float playerSpriteY = self.playerSprite.center.y;

CABasicAnimation *moveAnimation = [CABasicAnimation animation];
moveAnimation.toValue = [NSValue valueWithCGPoint:CGPointMake(playerSpriteX + TILE_WIDTH, playerSpriteY)];
[moveAnimation setDelegate:self];
[moveAnimation setFillMode:kCAFillModeForwards];
[moveAnimation setRemovedOnCompletion:NO];
[moveAnimation setDuration:MOVE_ANIMATION_DURATION];       
[self.playerSprite.layer addAnimation:moveAnimation forKey:@"position"]; 
```

因此，当 UIImageView 的位置被动画化时，gif 效果不起作用。我的问题是**如何做到这一点，以便 UIImageView 在其位置被动画化时循环遍历一组图像？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T23:18:07.750

这是猜测，我根本没有测试过这个想法，但是您是否考虑过以与动画位置相同的方式实现图像动画，使用`CAKeyframeAnimation`? 您需要`CGImage`从您的数组构造一个对象`UIImage`数组（以设置`values`关键帧动画的属性），但它看起来像一个非常简单的转换：

```
CAKeyframeAnimation *imageAnimation = [CAKeyframeAnimation animation];
imageAnimation.calculationMode = kCAAnimationDiscrete; // or maybe kCAAnimationPaced
imageAnimation.duration = self.tileSet.constants.animationDuration;
imageAnimation.repeatCount = HUGE_VALF;
// the following method will need to be implemented to cast your UIImage array to CGImages
imageAnimation.values = [self animationCGImagesArray];
[self.playerSprite.layer addAnimation:imageAnimation forKey:@"contents"];

-(NSArray*)animationCGImagesArray {
    NSMutableArray *array = [NSMutableArray arrayWithCapacity:[self.player.animationImages count]];
    for (UIImage *image in self.player.animationImages) {
        [array addObject:(id)[image CGImage]];
    }
    return [NSArray arrayWithArray:array];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T04:39:24.030

您的“基本”问题从这一行开始：

```
CABasicAnimation *moveAnimation = [CABasicAnimation animation]; 
```

一个`CABasicAnimation`对象[只使用一个关键帧](https://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/CABasicAnimation_class/Introduction/Introduction.html#//apple_ref/occ/cl/CABasicAnimation)。这意味着您正在制作动画的图层的内容只绘制一次，然后在动画期间使用该图像。

Seamus 建议使用 a`CAKeyframeAnimation`是解决该问题的一种方法——关键帧动画将多次重绘动画层的内容，因此为每个关键帧绘制连续图像将为内容和位置设置动画。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T23:15:59.723

我刚刚做了类似的事情。我使用的代码如下所示：

```
 CGRect r = ziv.frame;
    r.origin.x += WrongDistance;
    [ziv startAnimating];
    [UIView animateWithDuration:3.0 animations:^(void){
        [ziv setFrame:r];
    } completion:^(BOOL finished){

        [ziv stopAnimating];

        if (finished){
            // not canceled in flight
            if (NumWrong == MaxWrong)
                [self endOfGame:NO];
            else
                [self nextRound:self];
        }
    }]; 
```

也许您遇到的问题是因为两个动画都在同一个线程上？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-15T23:29:00.837

这不是制作精灵的好方法。我可以坚持认为您应该使用 OpenGL，但可能没有必要走那么远；你可以用一个层的核心动画来完成这一切，我认为你这样做比尝试使用成熟的 UIImageView 更好。

使用一个图层的核心动画，我可以让这个吃豆人精灵在他的嘴巴张开和合拢的同时在屏幕上显示动画；这不就是你的想法吗？

![在此处输入图像描述](https://i.stack.imgur.com/WJoyW.png)

这是一个显示动画的视频！

[http://www.youtube.com/watch?v=WXCLc9ww8MI](http://www.youtube.com/watch?v=WXCLc9ww8MI)

然而创建动画的实际代码非常简单：只有两层动画（核心动画），一层用于变化的图像，另一层用于位置。

**你不应该*奖励*这个答案！我现在只是在附和 Seamus Campbell 的话；我只是稍微填写他的答案的细节。**

好的，这是生成上面链接的电影的代码：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    // construct arr, an array of CGImage (omitted)
    // it happens I've got 5 images, the last being the same as the first
    self.images = [arr copy];
    // place sprite into the interface
    self.sprite = [CALayer new];
    self.sprite.frame = CGRectMake(30,30,24,24);
    self.sprite.contentsScale = [UIScreen mainScreen].scale;
    [self.view.layer addSublayer:self.sprite];
    self.sprite.contents = self.images[0];
}

- (void)animate {
    CAKeyframeAnimation* anim = 
        [CAKeyframeAnimation animationWithKeyPath:@"contents"];
    anim.values = self.images;
    anim.keyTimes = @[@0,@0.25,@0.5,@0.75,@1];
    anim.calculationMode = kCAAnimationDiscrete;
    anim.duration = 1.5;
    anim.repeatCount = HUGE_VALF;

    CABasicAnimation* anim2 = 
        [CABasicAnimation animationWithKeyPath:@"position"];
    anim2.duration = 10;
    anim2.toValue = [NSValue valueWithCGPoint: CGPointMake(350,30)];

    CAAnimationGroup* group = [CAAnimationGroup animation];
    group.animations = @[anim, anim2];
    group.duration = 10;

    [self.sprite addAnimation:group forKey:nil];
} 
```

# python - SQLAlchemy 中的我的类有一个总是返回 True 的布尔字段

> ID：16025771
> 
> 赞同：0
> 
> 时间：2013-04-15T22:32:05.493
> 
> 标签：python, sqlalchemy

我将 MySQL 与 SQLAlchemy 一起使用。我有一个这样定义的类：

```
Base = sqlalchemy.ext.declarative.declarative_base()
class process(Base):
    __tablename__ = 'processes'
    process = sqlalchemy.Column(sqlalchemy.Integer, primary_key=True, nullable=False)
    get_javascript = sqlalchemy.Column(sqlalchemy.types.Boolean, nullable=False) 
```

我的架构定义如下：

```
CREATE TABLE processes
(
  process Mediumint NOT NULL AUTO_INCREMENT,
  get_javascript Varchar(1) NOT NULL,
 PRIMARY KEY (process)
) ENGINE = InnoDB 
```

在我的数据库中，我有以下行：

```
+---------+----------------+
| process | get_javascript |
+---------+----------------+
|      17 | 0              |
|      18 | 1              |
+---------+----------------+ 
```

在 Python 中查询它们总是让我对这个`get_javascript`领域很满意。

```
>>> for i in s.query(db_classes.process).all():
...     print i.process, i.get_javascript
... 
17 True
18 True 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:39:39.560

`VarChar(1)`显然，当您用于布尔字段时，SQLAlchemy 不喜欢它。将其切换到`BOOLEAN`并重新创建数据库。有效。

# eclipse - 我无法在 Ubuntu 12.04 上为我的 Tomcat 6 Web 应用程序设置远程调试，谁能帮助我？

> ID：16025779
> 
> 赞同：0
> 
> 时间：2013-04-15T22:33:04.500
> 
> 标签：eclipse, tomcat6, remote-debugging, iptables, nmap

我无法在 Ubuntu 12.04 上为我的 Tomcat 6 Web 应用程序设置远程调试。

我已经尝试过以下相关问题中提供的解决方案： [Remote debugging Tomcat with Eclipse](https://stackoverflow.com/questions/3835612/remote-debugging-tomcat-with-eclipse)

排名最高的解决方案说我应该打开 catalina.sh 并将 JPDA_OPTS 变量更改为： JPDA_OPTS="-agentlib:jdwp=transport=dt_socket,address=8000,server=y,suspend=n"

然后使用jpda启动tomcat：catalina.sh jpda start

我在 localhost 的 8000 端口检查了我的应用程序并收到“无法连接错误”。

下一个最佳解决方案是：

在 catalina.bat 文件中，请修改以下内容。

```
Step 1: CATALINA_OPTS="-Xdebug -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n"

Step 2: JPDA_OPTS="-agentlib:jdwp=transport=dt_socket,address=8000,server=y,suspend=n"

Step 3: Run Tomcat from command prompt like below: catalina.sh jpda start 
```

当我检查 localhost 时，端口 8000 我得到了相同的“无法连接错误”。在这两次尝试之后尝试通过 Eclipse 连接到 tomcat 调试器给了我一个错误：

```
Failed to connect to remote VM. Connection refused.
Connection refused 
```

这让我认为端口 8000 可能已关闭，所以我运行了一个 nmap 命令来显示我的“本地主机”上的哪些端口是打开的。它返回以下内容：

```
ryan@ryan-K53E:~$ nmap -v localhost

Starting Nmap 5.21 ( http://nmap.org ) at 2013-04-15 22:12 BST
Initiating Ping Scan at 22:12
Scanning localhost (127.0.0.1) [2 ports]
Completed Ping Scan at 22:12, 0.00s elapsed (1 total hosts)
Initiating Connect Scan at 22:12
Scanning localhost (127.0.0.1) [1000 ports]
Discovered open port 80/tcp on 127.0.0.1
Discovered open port 3306/tcp on 127.0.0.1
Discovered open port 53/tcp on 127.0.0.1
Discovered open port 22/tcp on 127.0.0.1
Discovered open port 8080/tcp on 127.0.0.1
Discovered open port 631/tcp on 127.0.0.1
Completed Connect Scan at 22:12, 0.02s elapsed (1000 total ports)
Nmap scan report for localhost (127.0.0.1)
Host is up (0.00028s latency).
Not shown: 994 closed ports
PORT     STATE SERVICE
22/tcp   open  ssh
53/tcp   open  domain
80/tcp   open  http
631/tcp  open  ipp
3306/tcp open  mysql
8080/tcp open  http-proxy

Read data files from: /usr/share/nmap
Nmap done: 1 IP address (1 host up) scanned in 0.07 seconds 
```

这看起来确认端口 8000 已关闭，因此我将“tomcat-debug”定义为“/etc/services”文件中的服务，如下所示：

```
tomcat-debug        8000/tcp        # Remote tomcat debugging 
```

然后尝试使用以下命令使用 iptables 打开端口 8000：

```
sudo iptables -A INPUT -p tcp --dport tomcat-debug -j ACCEPT 
```

这似乎没有什么不同，因为 nmap 仍然显示与以前相同的开放端口列表。在这里的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T09:46:16.493

在检查端口 8000 是否可以在外部访问（您使用 nmap 进行的测试）之前，您是否尝试过检查 tomcat 是否正在侦听端口 8000？

我会 `sudo netstat -pnl | grep 8000` 用来获取侦听端口的所有进程的列表，并过滤此列表以查找包含 8000 的行。您应该收到如下内容：

`tcp 0 0 127.0.0.1:8000 0.0.0.0:* LISTEN 14236/java`

这一行告诉进程 java (pid 14236) 正在侦听**localhost** (127.0.0.1) 端口**8000**上的 tcp 。

如果您想从外部连接，您应该检查您的 tomcat 进程是否正在侦听外部地址。

# divshot - 下载的 divshot 文件不显示为 divshot 中所示

> ID：16025780
> 
> 赞同：1
> 
> 时间：2013-04-15T22:33:13.157
> 
> 标签：divshot

我在 DivShot 中创建了一个简单的页面模型：

[https://dl.dropboxusercontent.com/u/4255620/page-in-divshot.png](https://dl.dropboxusercontent.com/u/4255620/page-in-divshot.png)

然后我下载了文件。当我在浏览器中查看同一页面时，导航栏会剪切“搜索”窗格：

[https://dl.dropboxusercontent.com/u/4255620/page-displayed-locally.png](https://dl.dropboxusercontent.com/u/4255620/page-displayed-locally.png)

为什么它们不同？我究竟做错了什么？（我可以通过将 <body> 标记编辑为 <body style="padding-top: 50px"> 来解决此问题，但这仍然不能解释为什么页面在 divshot 中的显示与在我的本地环境中不同。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:33:15.467

这是一个已知问题，解决它的快速方法是向正文添加 60px 的填充：

```
body{ padding-top: 60px; } 
```

我们正在修复这个问题，期待在接下来的几周内！

# octave - 八度图：默认设置为关闭，覆盖出厂默认值

> ID：16025784
> 
> 赞同：0
> 
> 时间：2013-04-15T22:33:28.493
> 
> 标签：octave

我试图覆盖 Octave 中有关绘图的默认设置。例如，我总是`box off;`在绘图时设置，所以我想默认设置该框。也许`factoryaxesbox`是涉及的设置（这些出厂设置是否记录在任何地方？）。

当我看到由 返回的设置时`get(0, "factory")`，如何分配一个新的默认值来覆盖它？

我已经阅读了 Octave 手册的这一部分，[第 15.3.5 节：管理默认属性](http://www.gnu.org/software/octave/doc/interpreter/Managing-Default-Properties.html)，但它说的很少，我觉得它相当混乱。对象类型、根对象、子对象……嗯？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:33:28.493

经过一些试验和错误后想通了。

绘图的可用属性的名称是那些返回的`get(0, "factory")`，*不带*前缀`factory`。为了覆盖其中任何一个，您必须在属性名称前面加上`default`, 格式`set(0, "defaultNameOfProperty", "newsetting")`。

为所有绘图默认设置`box off`： `set(0, "defaultaxesbox", "off")`

在此之前，如果您检查此属性是否存在`defaultaxesbox`，使用`get(0, "default")`，您将一无所获，这让您想知道是否可以设置一个似乎不存在的设置。使用 进行分配后`set()`，它将显示在 中`get(0, "default")`。

如果`set()`was`gca()`或其他数字的第一个参数，则将零替换为上面的`get()`.

# python - 为什么 pip 因包的 md5 哈希错误而失败？

> ID：16025788
> 
> 赞同：23
> 
> 时间：2013-04-15T22:33:57.677
> 
> 标签：python, django, hash, virtualenv, pypi

我正在尝试在 virtualenv 中安装 Django 包。我在一台新电脑上（OSX 10.8.2）。我通过easy_install安装了virtualenv。激活 virtualenv 后，我运行：

```
(pyenv)$ pip install Django
Downloading/unpacking Django
  Downloading Django-1.5.1.tar.gz (8.0MB): 2.0MB downloaded
  Hash of the package https://pypi.python.org/packages/source/D/Django/Django-1.5.1.tar.gz#md5=7465f6383264ba167a9a031d6b058bff (from https://pypi.python.org/simple/Django/) (<md5 HASH object @ 0x108453df0>) doesn't match the expected hash 7465f6383264ba167a9a031d6b058bff!
Bad md5 hash for package https://pypi.python.org/packages/source/D/Django/Django-1.5.1.tar.gz#md5=7465f6383264ba167a9a031d6b058bff (from https://pypi.python.org/simple/Django/) 
```

即使我删除 virtualenv 并重新开始，也会发生这种情况。在过去的几个小时里，我反复尝试过，它总是会发生。有什么建议么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-15T22:44:54.227

如果只是这个包无法安装，您可以手动下载 tarball，然后使用 pip 从该文件安装它。[Django 下载站点](https://www.djangoproject.com/download/)具有校验和，您也可以手动验证。我不使用 osx，但可能这样的事情会有所帮助：

```
cd /tmp
wget https://pypi.python.org/packages/source/D/Django/Django-1.5.1.tar.gz
md5sum Django-1.5.1.tar.gz
pip install Django-1.5.1.tar.gz 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-08-05T08:24:08.123

我尝试时遇到同样的问题`sudo pip install Pillow`，我尝试`sudo pip install --no-cache-dir Pillow`了，它对我有用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-11-25T06:44:15.873

我现在多次遇到这个问题。

就像我之前提到的其他人一样，`pip install [module] --no-cache-dir` 大部分时间都有帮助。

但有时，您需要先安装一些依赖项，但安装其中一个时会失败（md5 验证失败）。

我自己刚遇到这个问题。在这种情况下，单独**安装**这个**依赖**项就像`pip install dependency` **工作**一样，之后我就可以安装第一个模块。

也`pip install -vvv`很适合收集有关一般问题解决的更多信息

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-11-28T04:07:04.780

对我来说，下面的命令有效

`pip install django --no-cache-dir`

# perl - 如何从shell脚本执行perl文件

> ID：16025792
> 
> 赞同：8
> 
> 时间：2013-04-15T22:34:16.653
> 
> 标签：perl, shell

我有一个关于如何在 shell 脚本中执行 perl 文件的问题

我现在有 2 个文件，“test.sh”和“test.pl”，这是我的脚本示例

外壳脚本

```
#!/bin/bash
perl FILEPATH/test.pl
...... 
```

PERL 脚本

```
#!/usr/bin/perl
my $a = "hello"
sub saysomething
{
    print $a;
}
..... 
```

我调用shell脚本的方式是：在shell脚本路径下，执行“./test.sh”

以上都是在 GUN bash 版本 4.2.24(1)-release (i686-pc-linux-gnu) + perl (v5.14.2) 环境下工作

但是，如果我将这些脚本放在服务器上（我无法更改 bash / perl 版本）GNU bash，版本 4.2.10(1)-release (x86_64-pc-linux-gnu) + perl (v5.12.4)，我收到以下消息：

FILEPATH/test.pl：第 2 行：我的：找不到命令

有谁知道我该如何解决这个问题？

顺便说一句，如果我单独执行 perl 脚本（perl FILEPATH/FILENAME.pl），它可以完美运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-05T07:18:04.760

为了通过 .sh 脚本执行 perl 脚本，您不需要使用 perl 前缀，而只需：

```
#!/bin/sh

/somewhere/perlScript.pl 
```

它将毫无问题地工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-09-26T19:41:32.813

这个问题至少有两个方面。一，你必须在你的环境 PATH 中有 Perl 的位置。二、Perl在不同机器上的位置可能不同。我和其他人多年来一直使用的这两个问题的一种解决方案是在 Perl 程序的顶部使用某种“魔术头”。标头将自己标识为 sh shell 脚本，并利用 /bin/sh 存在于 Linux/UNIX 的每个版本/风格中的事实。头文件的工作是用各种可能的 Perl 位置来强化 PATH，然后运行 ​​Perl 脚本来代替它自己（通过 exec）。这是一个“Hello World”示例：

```
1  #! /bin/sh --
2  eval '(exit $?0)' && eval 'PERL_BADLANG=x;PATH="/usr/bin:/bin:/usr/local/bin:$PATH";export PERL_BADLANG;: \
3  ;exec perl -x -S -- "$0" ${1+"$@"};#'if 0;
4  exec 'setenv PERL_BADLANG x;exec perl -x -S -- "$0" $argv:q;#'.q
5  #!/bin/perl -w
6  +($0=~/(.*)/s);do(index($1,"/")<0?"./$1":$1);die$@if$@;__END__+if 0;
7  # Above is magic header ... real Perl code begins here
8  use strict;
9  use warnings;
10 print "hello world!\n"; 
```

注意：我添加行号只是为了清楚行的开始和结束位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-16T02:33:52.830

首先检查 perl 在您的系统上安装的位置，例如，如果它不同，则`which perl`使用 shebang 行中的该位置而不是。`/usr/bin/perl`

如果所有其他建议均失败，请通过以下操作检查未正常运行的机器上脚本的第一行`head -1 test.pl | xxd`：输出是否将最后两个字节显示为`0d 0a`？如果是这样，您可能通过 Windows 复制了该文件并且没有进行 dos2unix 转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T22:50:28.870

“找不到命令”是外壳程序发出的错误。您试图通过 shell 运行您的 Perl 脚本，而不是通过 Perl。

# javascript - Highcharts：组合双轴中的动态向下钻取（堆叠图表）

> ID：16025795
> 
> 赞同：0
> 
> 时间：2013-04-15T22:34:41.570
> 
> 标签：javascript, charts, highcharts

好吧，我有这个问题，这是我的 jsfiddle：http: [//jsfiddle.net/pLDeq/1/](http://jsfiddle.net/pLDeq/1/)

你能看到，当我点击一个列时，我变成了一个堆叠图表，但有时我会有 3 列、5 列等，我的问题是，是否存在检测这种情况的方法？

```
if (drilldown) { 
     setChart([drilldown.name, drilldown.name1, drilldown.name2, drilldown.name3, drilldown.name4, drilldown.name5],  drilldown.categories,  [drilldown.data, drilldown.data1, drilldown.data2, drilldown.data3, drilldown.data4, drilldown.data5], drilldown.color, [drilldown.type]); 
} 
```

我还无法解决的另一件事是，为什么我无法在图例和工具提示的明细中获取名称？我可以为向下钻取格式化工具提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:36:21.430

1）从data1，data2，data3等更改为：

```
 data:[[
                    {name:'Recomendación',y:17},
                    {name:'Recomendación',y:20},
                    {name:'Recomendación',y:50}
                ],[
                    {name:'Area de Oportunidad',y:3},
                    {name:'Area de Oportunidad',y:0},
                    {name:'Area de Oportunidad',y:3}
                ],[
                    {name:'Observación',y:1},
                    {name:'Observación',y:1},
                    {name:'Observación',y:2}
                ]], 
```

然后在 setChart 中使用：

```
setChart([drilldown.name, drilldown.name1, drilldown.name2, drilldown.name3, drilldown.name4, drilldown.name5],  drilldown.categories,  drilldown.data, drilldown.color, [drilldown.type]); 
```

2）对名字做同样的事情。

# asp.net-mvc-2 - MVC 中的简单 foreach 循环

> ID：16025796
> 
> 赞同：1
> 
> 时间：2013-04-15T22:34:49.667
> 
> 标签：asp.net-mvc-2

```
 <% foreach (var car in Model.AvailableCars)
  { %>
       <label><%car.Text; %></label>

   <% } %> 
```

上面的代码抛出错误

***只有赋值、调用、递增、递减和新对象表达式可以用作语句。***

我知道我可以使用 html 助手来做到这一点，但为什么上面的代码不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T22:37:29.560

```
<label><%car.Text; %></label> 
```

应该读

```
<label><%= car.Text; %></label>  
         ^ 
```

或者你可以使用

```
<label><%: car.Text; %></label>
         ^ 
```

这将自动`HTML.Encode`为您提供价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T22:36:24.027

给标签加冒号，将`car.Text`其写入文档，如：

```
<label><%: car.Text %></label> 
```

`<%:`这是对与asp.net mvc 标签的一个很好的解释`<%=` [： <%: %> vs. <%= %>](https://stackoverflow.com/questions/3799112/asp-net-mvc-tags-vs)

# bash - Unix中的多个if条件

> ID：16025803
> 
> 赞同：1
> 
> 时间：2013-04-15T22:35:54.720
> 
> 标签：bash, shell, unix

我正在尝试运行以下逻辑

```
if [-f $file] && [$variable -lt 1] ; then
  some logic 
else
print "This is wrong"
fi 
```

它失败并出现以下错误

`MyScipt.ksh[10]: [-f: not found`

第 10 行是 if 条件，我输入了。

我也试过

`if [-f $file && $variable -lt 1] ; then`

这给出了同样的错误。

我知道这是一个语法错误，但我不确定，当我`&&`在 a 中使用多个条件时正确的语法是什么`if block`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T22:38:00.017

`[`不是运算符，它是程序的名称（有时是内置程序）。用来`type [`检查。无论如何，您需要在其后放置一个空格，以便命令行解析器知道该做什么：

```
if [ -f $file ] 
```

在这种`&&`情况下，操作员也可能不会做你想做的事。您可能应该阅读[`bash(1)`文档。](http://www.gnu.org/software/bash/manual/bashref.html#Conditional-Constructs) 在这种特定情况下，您想要的似乎是：

```
if [ -f $file -a $variable -lt 1 ] 
```

或者在更现代的 bash 语法中：

```
if [[ -f $file && $variable -lt 1 ]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T22:52:57.850

语法暗地里是`[`程序！

```
$ type [
[ is a shell builtin
$ ls -l $(which [)
-rwxr-xr-x 1 root root 35264 Nov 19 16:25 /usr/bin/[ 
```

由于 shell 解析（技术上“lexes”）你的命令行的方式，它会看到：

*   **`if`**- 关键字
*   **`[-f`**- 该程序`[-f`
*   **`$file]`**- 程序的字符串参数`[-f`，由 和 的值`$file`组成`]`。如果`$file`是“asdf”，那么这将是`asdf]`

等等，听从你的命令。您需要做的是包含空格，shell 使用空格来分隔命令的不同部分（标记）：

```
if [ -f "$file" ]; then 
```

现在`[`独立存在，可以被识别为命令/程序。此外，`]`作为 的论据独立存在`[`，否则`[`会抱怨。关于这一点的更多注意事项：

*   您不需要在 之前或之后放置空格`;`，因为这是 shell 识别的特殊分隔符。
*   您应该始终“双引号” $variables 因为它们在 shell 进行词法分析之前被扩展。这意味着如果一个未加引号的变量包含一个空格，shell 将把该值视为单独的标记，而不是一个字符串。

在这样的 if-test 中使用`&&`不是通常的方法。`[`（也称为`test`）理解`-a`为“和”，因此这符合您的意图：

```
if [ -f "$file" -a "$variable" -lt 1 ]; then 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T22:38:43.167

在块中使用 -a`if`来表示 AND。注意 -f 选项前面的空格。

```
if [ -f $file -a $variable -lt 1] ; then
    some logic 
else
     print "This is wrong"
fi 
```

# ruby-on-rails - 在 Rails 中创建新模型时预选表单中的属性

> ID：16025807
> 
> 赞同：0
> 
> 时间：2013-04-15T22:36:25.837
> 
> 标签：ruby-on-rails, ruby-on-rails-3, redirect, activerecord, ruby-on-rails-3.2

我正在尝试执行以下操作：

`<%= link_to 'Create new Register', new_register_path(:date => Date.yesterday) %>`

![在此处输入图像描述](https://i.stack.imgur.com/d17a5.png)

这样当一个新的寄存器被创建时，其中的日期被预选为昨天的日期（实际上我希望根据用户单击“创建新寄存器”链接的事件来预选事件）。

即如果用户在`events/2`，当他们点击链接时，`registers/new`页面被加载，并且ID号为2的事件应该被预先选择。

使用上面的代码只会将该信息传递到 URL 中，这不是我需要的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T01:06:45.300

您可以尝试将参数传递给控制器​​中的新对象，这应该会自动填充表单：

```
def new
  @regiser = Register.new(registered_at: params[:date]) #I don't know the column's name
end 
```

# python - Django `object of type 'instancemethod' has no len()`

> ID：16025808
> 
> 赞同：0
> 
> 时间：2013-04-15T22:36:39.953
> 
> 标签：python, django

I have a following code in django:

```
def index(request):
    template_name = 'desks.html'

   # query = Desk.objects.all()

    desk_list = Desk.objects.all

    paginator = Paginator(desk_list, 5)
    page = paginator.page(1)

    return render_to_response(template_name, {'desk_list': page}, ) 
```

Unfortunately, I get the following error: `object of type 'instancemethod' has no len()`

At my model, I have defined only attributes.

Any idea what a mistake it can be?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T22:38:12.813

You probably want to call `all`:

```
desk_list = Desk.objects.all() 
```

# c++ - Dijkstra 的算法问题 [repost]

> ID：16025814
> 
> 赞同：0
> 
> 时间：2013-04-15T22:37:44.317
> 
> 标签：c++, dijkstra

我意识到由于我的低代表或其他原因，我无法发布自己问题的答案，所以我删除了我的旧问题并重新提出。我改变了一些东西，但仍然无法得到我正在寻找的东西。

这是大部分代码，我省略了一些更简单的实现，例如 pathFinder 类的部分，因为我确信它们可以工作，这就是为什么你会在那里随机看到 playerVertex 和 time。在他们使用 reductionKey 函数的示例中，我不确定这是否是我所缺少的？我是这里的初学者，所以欢迎提出建设性的批评。（希望尽可能礼貌）大声笑。我的问题是打印路径，我一遍又一遍地得到相同的两个值的循环。

```
class Heap 
{
public: Heap();
    ~Heap();
    void insert(double element);
    double  deletemin();
    void print();
    int size(){return heap.size();}

private:
 int currentIndex;
 int left(int parent);
 int right(int parent);
 int parent(int child);
 void heapifyup(int index);
 void heapifydown(int index);
private:
 vector<double> heap;
};

Heap::Heap()
{
 currentIndex = 0;
}
Heap::~Heap()
{}

void Heap::insert(double element)
{
heap.push_back(element);
currentIndex++;
heapifyup(heap.size() - 1);
}

double Heap::deletemin()
{
double min = heap.front();
heap[0] = heap.at(heap.size()-1);
heap.pop_back();
heapifydown(0);
currentIndex--;
return min;
}
void Heap::print()
{
vector<double>::iterator pos = heap.begin();
cout << "Heap = ";
while ( pos != heap.end() ) 
{
    cout << *pos;
    ++pos;
    cout << endl;
 }
}
void Heap::heapifyup(int index)
{

while((index>0) && (parent(index) >=0) && (heap[parent(index)] > heap[index]))
{
 double tmp = heap[parent(index)];
 heap[parent(index)] = heap[index];
 heap[index] = tmp;
 index = parent(index);

}
}

void Heap::heapifydown(int index)
{

int child = left(index);

if((child > 0) && (right(index) > 0) && (heap[child]>heap[right(index)]))
{
 child = right(index);

}
if(child > 0)
{
double tmp = heap[index];
heap[index] = heap[child];
heap[child] = tmp;
heapifydown(child);
}
}

int Heap::left(int parent)
{
int i = ( parent <<1) + 1; 
return(i<heap.size()) ? i : - 1;
}

int Heap::right(int parent)
{
int i = ( parent <<1) + 2; 
return(i<heap.size()) ? i : - 1;
}

int Heap::parent(int child)
{
if(child != 0)
{
 int i = (child - 1) >>1;
 return i;
}
return -1;
}

class pathFinder : public weightedGraph
{

private:

vertex* playerVertex;
double time;

public:
string source;
pathFinder()
{
    playerVertex = NULL;
    time = 0;

}

  void Dijkstra(int s,int t)
{
    vertex *verts = findVertex(grid[s][t]);
    Heap H;
    for each(vertex *v in vertexList)
    {

        if(v->data == verts->data)
        {
            verts->distance = 0;
            verts->pred = NULL;
        }
        v->distance = INFINITY;
        v->pred = NULL;
        H.insert(v->data);
    }
    while(H.size() != 0)
    {

        vertex *x = findVertex(H.deletemin());

        for each(edge *v in x->adjacencyList)
        {

            if(v->end->visited != true)
            {    
            relax(x,v->end);
            v->end->visited = true;
            }
            else
                break;

        }

    }
}

void relax(vertex *a, vertex *b)
{

    if(a->distance + weightFrom(a,b) > b->distance)
        {
            b->distance = a->distance + weightFrom(a,b);
            b->pred = a;
        }

}

void printPath(double dest,double dest1)
{
    vertex *verta = findVertex(dest);
    while(verta->pred->data != dest1)
    {
    cout<<verta->data<<endl;
    verta = verta->pred;
    }
} 
```

而且我不确定打印路径是否如此。我刚刚使用了我之前实现的 BFS 算法的打印路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T23:49:03.860

在你的`printPath`函数中，你在哪里寻找列表的结尾？

您继续前进，`verta = verta->pred`直到数据不等于某个值。

顺便说一句，不要比较双打的平等，因为它不会发生。看看[每个计算机科学家应该知道的关于浮点的知识。](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

当您使用调试器单步执行时会发生什么？
（尝试绘制链接以及如何遍历它们。）

# javascript - JavaScript 到 jQuery 语法 在转换方面仍然需要帮助

> ID：16025815
> 
> 赞同：0
> 
> 时间：2013-04-15T22:37:45.253
> 
> 标签：javascript, jquery

我无法找出运行时出了什么问题。在这里，我试图将 JavaScript 重写为 jQuery 语法。究竟是什么不正确？我做错了什么。

遗产 >>

```
var cssmenuids = ["navmenu"];

    function createcssmenu()
    {
        for (var i = 0; i < cssmenuids.length; i++)
             var ultags = document.getElementById(cssmenuids[i]).getElementsByTagName("ul");
            for (var t = 0; t < ultags.length; t++)
            {
                ultags[t].style.top = ultags[t].parentNode.offsetHeight + "-1px";
                ultags[t].parentNode.onmouseover = function()
                {
                    this.style.zIndex = 100;
                    this.getElementsByTagName("ul")[0].style.visibility = "visible";
                    this.getElementsByTagName("ul")[0].style.zIndex = 0;
                }
                ultags[t].parentNode.onmouseout = function()
                {
                    this.style.zIndex = 0;
                    this.getElementsByTagName("ul")[0].style.visibility = "hidden";
                    this.getElementsByTagName("ul")[0].style.zIndex = 100;
                }
            }
        }
    }

    if (window.addEventListener)
        window.addEventListener("load", createcssmenu, false);
    else if (window.attachEvent)
        window.attachEvent("onload", createcssmenu); 
```

jQuery 语法 >>

```
 $(document).ready(function ()
    {
        $('ul#navmenu').height = $('ul#navmenu').parent.height + "-1px";

        $('ul#navmenu').parent.bind('mouseover', function ()
        {
            $(this).css('z-index', 100);
            $(this).$('ul')[0].css("visibility", "visible");
            $(this).$('ul')[0].css('z-index', 0);
        });
        $('ul#navmenu').parent.bind('mouseout', function ()
        {
            $(this).css('z-index', 0);
            $(this).$('ul')[0].css("visibility", "hidden");
            $(this).$('ul')[0].css('z-index', 100);
        });
    }); 
```

这就是 JSfiddle [http://jsfiddle.net/sublay/HCajr/](http://jsfiddle.net/sublay/HCajr/)

相关问题[JavaScript 到 jQuery 语法构建自定义 CSS 水平菜单](https://stackoverflow.com/questions/16035139/javascript-to-jquery-syntax-building-custom-css-horizontal-menu)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:43:54.390

您在大多数电话中都缺少括号。

声明高度应该是这样的

```
$('ul#navmenu').height($('ul#navmenu').parent().height() -1) 
```

你需要使用`.parent()`不`.parent`

```
$('ul#navmenu').parent().bind('mouseover' 
```

下面，似乎您正在尝试首先`ul`在`#navmenu`. 当您使用时，`[0]`您实际上是在调用`.get()`将 jQuery 对象转换为 javascript DOM 元素的方法。这样做将消除您对它运行 jQuery 函数的能力。此外，对于选择器，链接不会像那样发生。此外，`.css()`将接受具有键：值对的对象。

```
$(this).find('ul:first').css({
    "visibility" : "visible",
    "z-index" : 0
}); 
```

再一次，错过了`()`for`.parent()`

```
$('ul#navmenu').parent().bind('mouseout', 
```

再一次，选择器链是错误的。

```
$(this).find('ul:first').css({
    "visibility" : "hidden",
    'z-index' : 100
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:42:59.297

高度是一种方法，而不是属性。你必须同样设置它：

```
$('ul#navmenu').height($('ul#navmenu').parent.height + "-1px"); 
```

# jquery - 部分 jQuery 函数只执行一次。Slides js 只被调用一次

> ID：16025816
> 
> 赞同：-1
> 
> 时间：2013-04-15T22:37:57.447
> 
> 标签：jquery

jquery 函数的第二部分只执行一次幻灯片 js 部分在第一次单击时`$('#slides').slidesjs()`工作一次，而在第二次单击时不工作，等等。警报部分和 htlm 替换是可以的。任何帮助将非常感激。谢谢

```
$(document).ready(function(){
   $(".linkA").live("click", function(){
      $("#slides").html("");
      var jQueryfilterType = (jQuery(this).parent().parent().html());
      $("#slides").html(jQueryfilterType);
      $("#slides a").contents().unwrap();
      $("#slides li").contents().unwrap();

      alert("test");

      $('#slides').slidesjs({
         width: 940,
         height: 528,
         navigation: {
            effect: "fade"
         },
         pagination: {
            effect: "fade"
         },
         effect: {
            fade: {
               speed: 400
            }
         }
      });
   });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:47:50.197

在您第一次单击时，您正在清空`#slides`元素（通过调用`html("")`）并用新内容重新填充它。然后你调用`slidesjs()`它。所以这很好用。在您第二次单击时，您`#slides`再次清空，添加新内容并再次尝试调用`slidejs()`。但是，这一次，`slidesjs`已经初始化了那个元素一次，所以它不会再做一次，即使内容已经改变了。

要解决此问题，您可能希望完全使用`remove`该`#slides`元素并再次添加一个新的（未初始化的）元素。这样，`slidesjs()`将在新元素/内容上正常工作。

# java - Neo4j 启动时出现未知类型错误

> ID：16025823
> 
> 赞同：2
> 
> 时间：2013-04-15T22:38:20.807
> 
> 标签：java, neo4j

我突然无法在 Tomcat 中启动我的嵌入式 Neo4j 实例。我已将其范围缩小到包含数据的内容，因为当我将其指向一个空的数据目录时，应用程序会正常运行。有什么方法可以恢复我的数据吗？

这是我在启动时得到的堆栈跟踪：

```
2013-04-15 22:16:12.057+0000 INFO  [o.n.k.i.DiagnosticsManager]: --- INITIALIZED diagnostics END ---
2013-04-15 22:16:12.263+0000 ERROR [o.n.k.i.t.TxManager]: Unable to start TM
java.io.IOException: Unknown type: -5
    at org.neo4j.kernel.impl.transaction.TxLog.getDanglingRecords(TxLog.java:492) ~[neo4j-kernel-1.9.M05.jar:1.9.M05]
    at org.neo4j.kernel.impl.transaction.TxLog.recreateActiveTransactionState(TxLog.java:119) ~[neo4j-kernel-1.9.M05.jar:1.9.M05]
    at org.neo4j.kernel.impl.transaction.TxLog.<init>(TxLog.java:114) ~[neo4j-kernel-1.9.M05.jar:1.9.M05]
    at org.neo4j.kernel.impl.transaction.TxManager.openLog(TxManager.java:730) [neo4j-kernel-1.9.M05.jar:1.9.M05]
    at org.neo4j.kernel.impl.transaction.TxManager.start(TxManager.java:138) [neo4j-kernel-1.9.M05.jar:1.9.M05]
    at org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.start(LifeSupport.java:492) [neo4j-kernel-1.9.M05.jar:1.9.M05]
    at org.neo4j.kernel.lifecycle.LifeSupport.start(LifeSupport.java:104) [neo4j-kernel-1.9.M05.jar:1.9.M05]
    at org.neo4j.kernel.InternalAbstractGraphDatabase.run(InternalAbstractGraphDatabase.java:258) [neo4j-kernel-1.9.M05.jar:1.9.M05]
    at org.neo4j.kernel.ha.HighlyAvailableGraphDatabase.<init>(HighlyAvailableGraphDatabase.java:150) [neo4j-ha-1.9.M05.jar:1.9.M05]
    at org.neo4j.graphdb.factory.HighlyAvailableGraphDatabaseFactory$1.newDatabase(HighlyAvailableGraphDatabaseFactory.java:47) [neo4j-ha-1.9.M05.jar:1.9.M05]
    at org.neo4j.graphdb.factory.GraphDatabaseBuilder.newGraphDatabase(GraphDatabaseBuilder.java:205) [neo4j-kernel-1.9.M05.jar:1.9.M05]
    at io.foo.socialservice.configuration.Neo4JConfig.graphDatabaseService(Neo4JConfig.java:77) [Neo4JConfig.class:na]
    at io.foo.socialservice.configuration.Neo4JConfig$$EnhancerByCGLIB$$51b1a038.CGLIB$graphDatabaseService$1(<generated>) [spring-core-3.2.1.RELEASE.jar:na]
    at io.foo.socialservice.configuration.Neo4JConfig$$EnhancerByCGLIB$$51b1a038$$FastClassByCGLIB$$631211a4.invoke(<generated>) [spring-core-3.2.1.RELEASE.jar:na]
    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228) [spring-core-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:285) [spring-context-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at io.foo.socialservice.configuration.Neo4JConfig$$EnhancerByCGLIB$$51b1a038.graphDatabaseService(<generated>) [spring-core-3.2.1.RELEASE.jar:na]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.7.0_07]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) ~[na:1.7.0_07]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.7.0_07]
    at java.lang.reflect.Method.invoke(Method.java:601) ~[na:1.7.0_07]
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:160) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:570) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1029) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:925) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:490) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:891) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:834) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:749) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:558) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1120) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:522) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:353) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1029) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:925) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:490) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:323) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:107) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1391) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1132) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:522) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:608) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932) [spring-context-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479) [spring-context-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:389) [spring-web-3.2.2.BUILD-20130313.181400-102.jar:3.2.2.BUILD-SNAPSHOT]
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:294) [spring-web-3.2.2.BUILD-20130313.181400-102.jar:3.2.2.BUILD-SNAPSHOT]
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112) [spring-web-3.2.2.BUILD-20130313.181400-102.jar:3.2.2.BUILD-SNAPSHOT]
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791) [catalina.jar:7.0.32]
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285) [catalina.jar:7.0.32]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [catalina.jar:7.0.32]
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901) [catalina.jar:7.0.32]
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877) [catalina.jar:7.0.32]
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633) [catalina.jar:7.0.32]
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:968) [catalina.jar:7.0.32]
    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1646) [catalina.jar:7.0.32]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) [na:1.7.0_07]
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334) [na:1.7.0_07]
    at java.util.concurrent.FutureTask.run(FutureTask.java:166) [na:1.7.0_07]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [na:1.7.0_07]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [na:1.7.0_07]
    at java.lang.Thread.run(Thread.java:722) [na:1.7.0_07]
2013-04-15 22:16:12.267+0000 ERROR [o.n.k.i.t.TxManager]: TM startup failure
org.neo4j.graphdb.TransactionFailureException: Unable to start TM
    at org.neo4j.kernel.impl.transaction.TxManager.openLog(TxManager.java:759) [neo4j-kernel-1.9.M05.jar:1.9.M05]
    at org.neo4j.kernel.impl.transaction.TxManager.start(TxManager.java:138) [neo4j-kernel-1.9.M05.jar:1.9.M05]
    at org.neo4j.kernel.lifecycle.LifeSupport$LifecycleInstance.start(LifeSupport.java:492) [neo4j-kernel-1.9.M05.jar:1.9.M05]
    at org.neo4j.kernel.lifecycle.LifeSupport.start(LifeSupport.java:104) [neo4j-kernel-1.9.M05.jar:1.9.M05]
    at org.neo4j.kernel.InternalAbstractGraphDatabase.run(InternalAbstractGraphDatabase.java:258) [neo4j-kernel-1.9.M05.jar:1.9.M05]
    at org.neo4j.kernel.ha.HighlyAvailableGraphDatabase.<init>(HighlyAvailableGraphDatabase.java:150) [neo4j-ha-1.9.M05.jar:1.9.M05]
    at org.neo4j.graphdb.factory.HighlyAvailableGraphDatabaseFactory$1.newDatabase(HighlyAvailableGraphDatabaseFactory.java:47) [neo4j-ha-1.9.M05.jar:1.9.M05]
    at org.neo4j.graphdb.factory.GraphDatabaseBuilder.newGraphDatabase(GraphDatabaseBuilder.java:205) [neo4j-kernel-1.9.M05.jar:1.9.M05]
    at io.foo.socialservice.configuration.Neo4JConfig.graphDatabaseService(Neo4JConfig.java:77) [Neo4JConfig.class:na]
    at io.foo.socialservice.configuration.Neo4JConfig$$EnhancerByCGLIB$$51b1a038.CGLIB$graphDatabaseService$1(<generated>) [spring-core-3.2.1.RELEASE.jar:na]
    at io.foo.socialservice.configuration.Neo4JConfig$$EnhancerByCGLIB$$51b1a038$$FastClassByCGLIB$$631211a4.invoke(<generated>) [spring-core-3.2.1.RELEASE.jar:na]
    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228) [spring-core-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:285) [spring-context-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at io.foo.socialservice.configuration.Neo4JConfig$$EnhancerByCGLIB$$51b1a038.graphDatabaseService(<generated>) [spring-core-3.2.1.RELEASE.jar:na]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.7.0_07]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) ~[na:1.7.0_07]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.7.0_07]
    at java.lang.reflect.Method.invoke(Method.java:601) ~[na:1.7.0_07]
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:160) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:570) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1029) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:925) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:490) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:891) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:834) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:749) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:558) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:87) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:285) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1120) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:522) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:353) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1029) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:925) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:490) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:323) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:107) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1391) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1132) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:522) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:608) [spring-beans-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932) [spring-context-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479) [spring-context-3.2.1.RELEASE.jar:3.2.1.RELEASE]
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:389) [spring-web-3.2.2.BUILD-20130313.181400-102.jar:3.2.2.BUILD-SNAPSHOT]
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:294) [spring-web-3.2.2.BUILD-20130313.181400-102.jar:3.2.2.BUILD-SNAPSHOT]
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112) [spring-web-3.2.2.BUILD-20130313.181400-102.jar:3.2.2.BUILD-SNAPSHOT]
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791) [catalina.jar:7.0.32]
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285) [catalina.jar:7.0.32]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) [catalina.jar:7.0.32]
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901) [catalina.jar:7.0.32]
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877) [catalina.jar:7.0.32]
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633) [catalina.jar:7.0.32]
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:968) [catalina.jar:7.0.32]
    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1646) [catalina.jar:7.0.32]
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471) [na:1.7.0_07]
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334) [na:1.7.0_07]
    at java.util.concurrent.FutureTask.run(FutureTask.java:166) [na:1.7.0_07]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [na:1.7.0_07]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [na:1.7.0_07]
    at java.lang.Thread.run(Thread.java:722) [na:1.7.0_07]
Caused by: java.io.IOException: Unknown type: -5
    at org.neo4j.kernel.impl.transaction.TxLog.getDanglingRecords(TxLog.java:492) ~[neo4j-kernel-1.9.M05.jar:1.9.M05]
    at org.neo4j.kernel.impl.transaction.TxLog.recreateActiveTransactionState(TxLog.java:119) ~[neo4j-kernel-1.9.M05.jar:1.9.M05]
    at org.neo4j.kernel.impl.transaction.TxLog.<init>(TxLog.java:114) ~[neo4j-kernel-1.9.M05.jar:1.9.M05]
    at org.neo4j.kernel.impl.transaction.TxManager.openLog(TxManager.java:730) [neo4j-kernel-1.9.M05.jar:1.9.M05]
    ... 79 common frames omitted
2013-04-15 22:16:12.288+0000 INFO  [o.n.k.i.DiagnosticsManager]: --- STOPPING diagnostics START ---
2013-04-15 22:16:12.288+0000 INFO  [o.n.k.i.DiagnosticsManager]: High Availability diagnostics 
```

# php - 关于预赛的基本资料

> ID：16025829
> 
> 赞同：-1
> 
> 时间：2013-04-15T22:39:05.527
> 
> 标签：php, regex, preg-match

所以，我想从这个预赛中改变@符号：

```
[A-Z0-9._%+-]+@[A-Z0-9.-]{3,65}\.[A-Z]{2,4} 
```

到（at）字符串，如何使它工作；/无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T22:50:15.740

我相信你正在寻找

[ideone 演示](http://ideone.com/6U6Y3q)

```
$your_string = str_replace('@', '(at)', $your_string); 
```

或者

```
if(preg_match("/[A-Z0-9._%+-]+(@|\(at\))[A-Z0-9.-]{3,65}\.[A-Z]{2,4}/i", $your_string)){} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:50:12.897

您需要创建组并在替换时参考这些（反向引用）。

```
search:  ([A-Z0-9._%+-]+)@([A-Z0-9.-]{3,65}.[A-Z]{2,4})
         `-- group #1 --´ `-------- group #2 ---------´

replace: \1(at)\2 
```

# php - PHP：提供用于填充数据表的 JSON

> ID：16025831
> 
> 赞同：0
> 
> 时间：2013-04-15T22:39:32.967
> 
> 标签：php, json, datatables

有 PHP 经验，但对 jQuery 不熟悉：我想用 ajax 从 json 编码的 php 文件中获取数据来填充一个简单的数据表。

**`table.php`: HTML 片段**

```
<head>...
<script type="text/javascript" charset="utf-8">
    $(document).ready(function() {
        $('#example').dataTable({
            "bProcessing": true,
            "sAjaxSource": 'deliver_tests.php',
            "sScrollY": "200px",
        "bPaginate": false
        });
    } );
</script>
</head>    
<body> ...
<div id="demo">
    <table cellpadding="0" cellspacing="0" border="0" class="display" id="example" width="100%">
    <thead>
        <tr>
        <th>id</th>
        <th>Status</th>
        <th>Abkürzung</th>
        <th>Test</th>
        <th>Patient</th>
        <th>Datum</th>
    </tr>
    </thead>
    <tbody></tbody>
    </table>
</div> 
```

**`deliver_tests.php`：代码片段：**

```
try {
    $sql = "SELECT tsID, tsStatus, tbShortname, tbName, paCode, tsCompleted_Date FROM test LEFT JOIN testbase ON tsTestBaseID = tbID LEFT JOIN patient ON tsPatientID = paID WHERE tsAccountID=:accID ORDER BY tsCompleted_Date DESC";
    $dbTests = $objDB->prepare($sql);
    $bind=array('accID' => $_SESSION['aID']);
    $dbTests->execute($bind);
    $tests = $dbTests->fetchAll(PDO::FETCH_ASSOC);
} catch (PDOException $dbe) {
    // error 
}
$tests = array('aaData' => $tests);
echo json_encode($tests); 
```

**在此处查看其输出**：http : [//pastebin.com/uZiLepSb](http://pastebin.com/uZiLepSb)

调用`table.php`，我得到一个**js-alert：**

```
DataTables warning (table id = 'example'): 
Requested unknown parameter '0' from the data source for row 0 
```

我想我必须重新组合那个数组？
我需要关于如何从这里继续的提示 - 提前谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T23:10:42.577

每个表格行都需要是一个数组而不是 JSON 中的一个对象，您应该能够通过使用`PDO::FETCH_NUM`而不是来做到这一点`PDO::FETCH_ASSOC`。

请参阅：[DataTables AJAX 源示例](http://www.datatables.net/release-datatables/examples/data_sources/ajax.html#latest_xhr)

# ruby-on-rails - Ruby on Rails 图像循环

> ID：16025833
> 
> 赞同：0
> 
> 时间：2013-04-15T22:39:45.467
> 
> 标签：ruby-on-rails, ruby, image, loops

我正在尝试创建一个循环，在为产品放置评论时显示星星，我拥有它以便它将评级显示为一个数字，但是我希望它显示与评级数字相关的图像，

我目前有

```
<%=product.no_of_stars.to_i do image_tag "star-on.png" end %> 
```

但是它只显示评级数字而不是数字，毫无疑问我错过了一些简单的东西。

我研究了其他问题，他们说这应该足以满足我的需求，但当然它没有按预期工作。

谢谢，本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:42:28.173

尝试这个。

```
<%=product.no_of_stars.to_i.times do image_tag "star-on.png" end %> 
```

您缺少`times`方法。这就是允许您一遍又一遍地将数字作为循环运行的原因（超级简化）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T23:05:51.880

上面的答案并不完全正确。问题是 Integer#times 返回调用它的整数，所以你仍然会得到 5 作为结果。尝试

```
<% product.no_of_starts.to_i.times do %>
  <%= image_tag "star-on.png" %>
<% end %> 
```

# php - 如何在php和android之间建立连接

> ID：16025837
> 
> 赞同：-1
> 
> 时间：2013-04-15T22:40:12.850
> 
> 标签：php, android, sockets

这是 android 应用程序中的一个方法，在 web 服务器中收听 php 文件发送的消息

```
public void run() {

try {
    Log.i("------Connect--------", "------------1-------------");
    //System.out.println("S: Connecting...");
    ServerSocket serverSocket = new ServerSocket(SERVERPORT);
    Log.i("------xxxxxxxxx--------", "------------2-------------");

    while (true) {
        x++;
        Log.i("------xxxxxxxxxx--------","-----------"+x+"-----------");
        Log.i("------xxxxxxxxxx--------", "-----------pret de listener------------");
        Socket client = serverSocket.accept();
        Log.i("------xxxxxxxxxx--------", "-----------en cours de listening-------------");

        try {
            BufferedReader in = new BufferedReader(new InputStreamReader(client.getInputStream()));
            String str = in.readLine();
            Log.i("------xxxxxxxxxx--------", str + "-------------");
            //System.out.println("S: Received: '" +);

        } catch(Exception e) {
            Log.i("------xxxxxxxxxx--------", "S: Error");

        } finally {
            client.close();
            Log.i("------xxxxxxxxxx--------","S: Done.");
        }

    }

} catch (Exception e) {
    Log.i("------xxxxxxxxxx--------","S: Error");
} 
```

下一个 php 代码将字符串从模拟器 android 发送到 ip

```
<?php

error_reporting(E_ALL);

/* define socket server ip and port here.. */
$socket_ip = "10.0.0.2";

$socket_port = 6060;

set_time_limit(0);
/* create a tcp/ip socket.. */
$socket = socket_create(AF_INET, SOCK_STREAM, 0);
if ($socket === false) {
    $error = socket_strerror(socket_last_error());
    echo "socket_create() failed: [$result] $error\n";
} else {
    echo "socket_create() ok.\n";
}

/* connect to socket server ip and port */
$result = socket_connect($socket, $socket_ip, $socket_port);
if ($result === false) {
    $error = socket_strerror(socket_last_error($socket));
    echo "socket_connect() failed: [$result] $error\n";
} else {
    echo "socket_connect() ok.\n";
}

$in = "\r\n\r\n";
$len = strlen($in);

echo "sending input data request.\n";
socket_write($socket, $in, $len);
echo "socket_write() ok.\n";

echo "reading return data.\n";
while ($out = socket_read($socket, 6060)) {
    echo "socket_read() : $out";
}

echo "closing the socket.";
socket_close($socket);
echo "socket_close() ok.\n\n";
?> 
```

问题是当执行命令'$ result = socket_connect($ socket, $ socket_ip, $ socket_port);'找不到答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T23:09:24.117

如果要从服务器中提取数据，请使用 Josephs 教程。如果您想将数据从服务器推送到手机，请使用[Google Cloud Messaging](http://developer.android.com/google/gcm/index.html)。这样，服务器可以让电话知道有新数据可用。你仍然需要拉它。您不应该通过套接字将数据推送到手机。

# c++ - std::vector 内存管理的不同乘数

> ID：16025840
> 
> 赞同：3
> 
> 时间：2013-04-15T22:40:16.227
> 
> 标签：c++, memory-management, stdvector

我一直在玩动态数组结构，并且我注意到 g++ 标准库的向量实现通过在当前容量被填满后调用的每个 push_back() 上将 std::vector 的容量增加一倍。我认为有人提到微软编译器使用 1.5 作为乘数是在 stackoverflow 上的某个地方。我很好奇，这些值是硬编码的还是我可以在某处设置自定义乘数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:57:26.010

我相当确定这是一个“实施细节，不需要披露”，我希望它也不必是一个常数，它可能是这样的：

```
std::vector::grow()
{
    if (size <= 100)
    {
       newsize = size * 2;
    }
    else if (size <= 10000)
    {
       newsize = size * 3 / 2;  /* 1.5x */
    }
    else
    {
       newsize = size * 5 / 4;  /* 1.2x */
    }
    .... allocate a "newsize" chunk of memory etc ... 
} 
```

据我所知，没有“设置乘数”的界面。由每个实现来选择增长率。当数字变得非常大时，2x 有点浪费，并且您冒着“用完虚拟空间”的风险（例如，在 的向量中使用 512M 元素超过 2GB 的限制`int`，这可能无法作为 32 中的单个分配工作位系统）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T23:04:43.607

该标准不要求为您提供一种自定义乘数的方法，尽管您当然可以编写自己的集合或覆盖一个集合并使用它做任何您想做的事情。这是微软的实现，来自 VS 2012：

```
void _Reserve(size_type _Count)
    {   // ensure room for _Count new elements, grow exponentially
    size_type _Size = size();
    if (max_size() - _Count < _Size)
        _Xlen();
    else if ((_Size += _Count) <= capacity())
        ;
    else
        reserve(_Grow_to(_Size));
    } 
```

您可以看到它们总是以`size()`--从而使容量增加一倍而增长，并且它不是您（作为程序员）打算覆盖的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T23:51:10.703

> 我可以在某处设置自定义乘数吗？

其他答案已经直接处理了这个（以及你的问题的其余部分），所以我不会费心重复任何一个。但是，如果您想控制`vector`自己的增长，请使用[`std::vector::reserve`](http://en.cppreference.com/w/cpp/container/vector/reserve). 如果您在将元素插入到已满的任何时候调用它`vector`，那么您可以获得相同的结果（尽管需要一些额外的开销，因为您需要一个冗余条件来检查大小）。

# mysql - 如何在 Zend Framework 2 中设置 sql_mode？

> ID：16025841
> 
> 赞同：1
> 
> 时间：2013-04-15T22:40:20.730
> 
> 标签：mysql, sql, zend-framework2, zend-db, sql-mode

我目前在 Zend Framework 2 中遇到分页问题。

这段代码

```
public function findAllByCriteria(CourseSearchInput $input) {
    $concatDelimiter = self::CONCAT_DELIMITER;
    $select = new Select();
    $where = new Where();
    $having = new Having();
    $select->columns(array(
        'id', 'title', 'description'
    ));
    $select->from($this->tableGateway->getTable());
    $select
        ->join('coursedata', 'courses.id = coursedata.id', array(
            'relevance' => $this->buildRelevanceExpressionFromCriteria($input)
        ))
    ;
    $having
        ->greaterThanOrEqualTo('relevance', self::RELEVANCE_MIN);
    ;
    $select->where($where, Predicate::OP_AND);
    $select->having($having);
    $select->group(array('courses.id'));

    $dbAdapter = $this->tableGateway->getAdapter();
    // $dbAdapter->getDriver()->getConnection()->execute('SET sql_mode = "";');
    $adapter = new \Zend\Paginator\Adapter\DbSelect($select, $dbAdapter);
    $paginator = new \Zend\Paginator\Paginator($adapter);
    return $paginator;
} 
```

创建此 SQL：

```
SELECT
    `courses`.`id` AS `id`,
    `courses`.`title` AS `title`,
    `courses`.`description` AS `description`,
    MATCH (coursedata.title) AGAINST ('Salsa') * 5 + MATCH (coursedata.description) AGAINST ('Salsa') * 2 AS `relevance`
FROM `courses`
INNER JOIN `coursedata` ON `courses`.`id` = `coursedata`.`id`
GROUP BY `courses`.`id`
HAVING `relevance` >= '3' 
```

如果设置为，则它使用[`MySQL Extensions to GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html)并且无法执行。所以，我试图在语句执行之前重置（见上面注释掉的行：）。但它没有奏效。那么，我该如何设置才能执行我的非标准 SQL 呢？`sql_mode``ONLY_FULL_GROUP_BY``sql_mode``$dbAdapter->getDriver()->getConnection()->execute('SET sql_mode = "";');``sql_mode`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T08:39:26.523

这可能不是您所问问题的答案，但我可以看到无论何时使用 Paginator，您的查询都会遇到问题。

分页器的 DbSelect 适配器不喜欢其中的聚合函数（分组依据）

Paginator 将尝试使用您的查询来构建它自己的查询来计算集合中项目的“计数”。由于您在查询中使用了聚合，这被破坏了，任何组等都会破坏适配器。

如果您检查默认实现，您将看到：

```
/**
 * Returns the total number of rows in the result set.
 *
 * @return integer
 */
public function count()
{
    if ($this->rowCount !== null) {
        return $this->rowCount;
    }

    $select = clone $this->select;
    $select->reset(Select::COLUMNS);
    $select->reset(Select::LIMIT);
    $select->reset(Select::OFFSET);

    // This won't work if you've got a Group By in your query
    $select->columns(array('c' => new Expression('COUNT(1)')));

    $statement = $this->sql->prepareStatementForSqlObject($select);
    $result    = $statement->execute();
    $row       = $result->current();

    $this->rowCount = $row['c'];

    return $this->rowCount;
} 
```

这不喜欢您使用 Group BY 并且会返回不正确的结果。

您可以创建自己的 adataper，并在计划使用 Group BY 时扩展现有的 DbSelect 并覆盖 count 方法；

在我的脑海中，这样的事情应该可以工作，但可能不是最有效的方法

```
/**
 * Returns the total number of rows in the result set.
 * 
 * @return integer
 */
public function count()
{
    if ($this->rowCount !== null) {
        return $this->rowCount;
    }

    /**
     * If the query hasn't got 'GROUP BY' just try and use the old method
     */
    $stateGroup = $this->select->getRawState('group');
    if( ! isset($stateGroup) || empty($stateGroup)) {
        return parent::count();
    }

    $select = clone $this->select;
    $select->reset(Select::LIMIT);
    $select->reset(Select::OFFSET);

    $statement = $this->sql->prepareStatementForSqlObject($select);
    $result    = $statement->execute();

    $this->rowCount = $result->count();

    return $this->rowCount;
} 
```

# javascript - Node.JS EventEmitter 监听器必须是一个函数

> ID：16025844
> 
> 赞同：6
> 
> 时间：2013-04-15T22:40:26.800
> 
> 标签：javascript, node.js, eventemitter

尝试在函数中设置侦听器时出现错误。我已经查看了其他适用的代码，但似乎无法让它为我的目的工作。

这是我试图完成的简化版本。

```
var ticketGenerator = function(){
    var self = this;
    console.log('ticket generator');
    var rows = "";
    this.emit("getQueue")

    var _getQueue = function(){
    console.log('Getting Queue');
    var connection = mysql.createConnection({
        //Connection Data
    }); 
    connection.connect();
    connection.query("SELECT * FROM `queue` WHERE `run` = 0 ORDER BY `queueID` ASC LIMIT 1", function(err, rows, fields){
        if(err){
            //self.emit("error", "Unable to get data from the database.")
            console.log(err);
        }
        else if(typeof rows[0] == "undefined"){
            console.log("Waiting to run again.");
            connection.end();
            setTimeout(function(){ticketGenerator()}, 60000);
        }
        else{
            console.log("Passing Ticket Data");
            self.emit("newTicketData", rows);
            connection.end();
        }
    })
    };

    this.on("getQueue", _getQueue);
} 
```

我无法让它运行 _getQueue 的函数。当我放入侦听器 _getQueue() 时，它将运行该函数，但会引发错误（TypeError：侦听器必须是一个函数）。我不确定我做错了什么，因为我已经看到以这种方式编写的其他代码有效。

我已验证我已使用 this.on('newListener' . . . ) 设置了侦听器。我假设因为我可以让它在更改侦听器上的名称时调用该函数，所以发射器也在执行它的工作。

请注意，此 ticketGenerator 函数正在使用 requires 从另一个文件中调用。我不知道这是否会影响此问题的解决方案，但我认为细节可能很重要。

---------------------------- EDIT---------------- 我在发布此内容后最终弄清楚了这一点。我需要调用一个构造函数来让这些事件通过。代码如下所示。

```
events.EventEmitter.call(this); 
```

由于代表，我无法回答我自己的问题，但我会尽可能更新答案区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-28T23:13:28.757

这是针对您的不同问题的解决方案：

*   在您的示例中，self 将与窗口或全局命名空间相关联。您无法使用它访问您的 EventEmitter。
*   在附加侦听器之前发出第一个 getQueue 事件。您必须实例化您的 TicketGenerator，然后发出第一个 getQueue 以启动轮子。
*   在你的超时时间里，只需要发出一个新的 getQueue 来重试，不需要再次实例化 TicketGenerator。

希望这可以帮助。

```
TicketGenerator = function() {
    var self = this;
    console.log('ticket generator');
    var rows = "";

    EventEmitter.call(this);

    var _getQueue = function() {
        console.log('Getting Queue');
        var connection = mysql.createConnection({
            //Connection Data
        }); 
        connection.connect();
        connection.query("SELECT * FROM `queue` WHERE `run` = 0 ORDER BY `queueID` ASC LIMIT 1", function(err, rows, fields){
            if(err){
                //self.emit("error", "Unable to get data from the database.")
                console.log(err);
            }
            else if(typeof rows[0] == "undefined"){
                console.log("Waiting to run again.");
                connection.end();
                setTimeout(function(){
                    self.emit('getQueue');
                }, 60000);
            }
            else {
                console.log("Passing Ticket Data");
                self.emit("newTicketData", rows);
                connection.end();
            }
       });
    }

    this.on("getQueue", _getQueue);
};

// Instantiate the ticket generator and initiate the first queue retrieval
var ticketGenerator = new TicketGenerator();
ticketGenerator.emit('getQueue'); 
```

# c# - 如何将小数位最小化为 0？

> ID：16025846
> 
> 赞同：0
> 
> 时间：2013-04-15T22:40:27.987
> 
> 标签：c#, sharepoint, decimal

目前，我正在从 SharePoint 网站检索数据，并且可以这样做，但是，我希望将小数位限制为 0。

```
if (item["ows_Amount_x0020__x0028_LC_x0029_"] != null)
{
    str.AppendLine("<td bgcolor='#FFFFFF';align='right';> " + item["ows_Amount_x0020__x0028_LC_x0029_"].ToString() + "</td>");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T22:42:55.687

在（或，或您的项目的任何实际数据类型）的`ToString()`方法中使用标准数字格式字符串：`Decimal``Double`

```
Convert.ToDecimal(item["ows_Amount_x0020__x0028_LC_x0029_"]).ToString("N0"); 
```

这里的意思是小数点后的`"N0"`“数字” 。`0`如果您不想添加逗号，请`"F0"`改用。

号码格式参考：[MSDN](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:43:48.247

尝试这个

```
Convert.ToDecimal(item["ows_Amount_x0020__x0028_LC_x0029_"]).ToString("N1") //1 decimal place 
```

或者

```
Convert.ToDecimal(item["ows_Amount_x0020__x0028_LC_x0029_"]).ToString("N0") //No decimal 
```

或者

```
String.Format("{0:N1}", item["ows_Amount_x0020__x0028_LC_x0029_"]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T23:09:10.870

好吧，这取决于以下类型： item["ows_Amount_x0020__x0028_LC_x0029_"]

假设它总是一个恰好是字符串的金额，例如：56.78

然后你可以使用：

```
if (item["ows_Amount_x0020__x0028_LC_x0029_"] != null)
{
  decimal temp = 0;
  if (decimal.TryParse(item["ows_Amount_x0020__x0028_LC_x0029_"], out temp))
      str.AppendLine(" " + (long) temp + "");
  else
      str.AppendLine(" " + item["ows_Amount_x0020__x0028_LC_x0029_"].ToString() + "");
} 
```

# sql - 从一个表中选择多列插入到另一个表的多行中

> ID：16025849
> 
> 赞同：0
> 
> 时间：2013-04-15T22:40:37.743
> 
> 标签：sql, oracle

如果值不为空，如何从 table1 中选择多个列并插入到 table2 的多行中

```
create table table2
(
label_id NUMBER(4),
level_name VARCHAR2(20)
);

create table table1 
(
level_name VARCHAR2(20), 
class_name1 VARCHAR2(20),
class_name2 VARCHAR2(20),
class_name3 VARCHARS2(20)
)

create table table2
(
   level_id NUMBER(4),
   class_name VARCHAR2(20)
)

data in table0
1, k1
2, k2

data in table1
k1, roomA5, roomA6, roomA7
k2, roomB1, roomB2

the result table2 
1, roomA5
1, roomA6
1, roomA7
2, roomB1
2, roomB2 
```

我可能需要在 table2 中添加另一列以使其正确。也许 table2 应该是(level_id, room_id, class_name)

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T14:32:20.170

你看过 unpivot 命令吗？

[http://www.oracle.com/technetwork/articles/sql/11g-pivot-097235.html](http://www.oracle.com/technetwork/articles/sql/11g-pivot-097235.html)

当然，这是假设您使用的是 oracle 11g，此时这是一个假设。

```
insert into table2  
select *
  from table1
unpivot
(
  level_name 
  for class_name in ("class_name1","class_name2","class_name3")
)
order by "Puchase Frequency", state_code 
```

我没有要测试的数据库，但这可能会有所帮助。这似乎是一种干净的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T23:04:54.750

尝试：

```
insert into Table2 t2
( 
  Level_Id,
  Class_Name  
)select 
   t0.Level_Id, 
   t1.Class_Name1
 from  Table0 t0
 inner join Table1 t1 on t1.level_name = t0.level_name 
```

对每个类执行此操作，只需将 Class_Name1 替换为 Class_Name2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T23:05:53.647

如果您为每个类名列合并所有 3 个选择语句，那么这是如何做到的，这很容易。

```
insert into table2 
  select a.level_id, b.classname1
  from table0 a
  join table1 b on a.level_name = b.level_name
  where b.classname1 is not null
union all
  select a.level_id, b.classname2
  from table0 a
  join table1 b on a.level_name = b.level_name
  where b.classname2 is not null
union all
  select a.level_id, b.classname3
  from table0 a
  join table1 b on a.level_name = b.level_name
  where b.classname3 is not null 
```

# css - 为什么 Firefox 和 google chrome 不显示圆角边框，而 Internet Explorer 使用边框图像可以正常工作？

> ID：16025853
> 
> 赞同：0
> 
> 时间：2013-04-15T22:41:16.527
> 
> 标签：css

现在我已经尝试了所有我能想到的让 Firefox 和 Google Chrome 显示圆形边框，即使使用 moz 和 webkits，但它似乎不起作用。任何有关 Internet Explorer 以我想要的方式显示的问题可能是什么有用的提示，而其他两个不是，将不胜感激。我应该说，PIE 确实运作良好。

```
 background-color: #F0F0F0;
    /* Moz  Firefox */
    -moz-transform: translate(100px, 50px);
    /* Rounded Corners */
    -moz-border-radius: 15px;
     border-radius: 15px;
     border-width: 12px;
   /* WebKit - Chrome and Safari */
   -webkit-border-radius:15px;
   -webkit-transform: translate(100px, 50px);
   /* Internet Explorer 9 */
   -ms-transform: translate(100px, 50px);
   behavior: url('/PIE/PIE.htc');
   /* Opera */
   -o-transform: translate(100px, 50px);
   /* general syntax */
   transform: translate(100px, 50px);
   /* Border Changes */
    width: 1000px;
    border-style: Solid;
    border-image: url('/images/fire.jpg') 10 10 10 10 round round;  
    padding: 5px;
    overflow: hidden; 
```

# sql-server - 黑客可以欺骗或注入表单字段吗？

> ID：16025856
> 
> 赞同：3
> 
> 时间：2013-04-15T22:41:28.660
> 
> 标签：sql-server, forms, security

我正在浏览我的应用程序，试图尽可能多地保护它，这让我开始思考。我总是验证用户的输入并且总是清理输入，例如，如果我有一个“生日”字段，我会在将其放入数据库之前确保它是一个有效的日期。但是我的数据库中也有像“passwordresettoken”这样的字段，如果用户请求，我的代码会生成这个字段。

现在在我的普通用户个人资料页面上，我显然没有名为“passwordresettoken”的字段，所以我不验证或清理它，因为它不应该存在于将要传递的表单中。事实上，它永远不应该被传递，因为它不是用户输入的东西。

所以我的问题是，是否可以欺骗输入字段？他们是否可以编辑我页面上的 HTML 以包含密码重置令牌字段，然后在传递表单时造成一些损害？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T22:42:40.273

是的，一点没错。我什至不必查看您的 HTML。我可以直接使用 curl 提交。

[http://curl.haxx.se/docs/httpscripting.html](http://curl.haxx.se/docs/httpscripting.html)

这个 html

```
 <form method="POST" action="junk.cgi">
      <input type=text name="birthyear">
      <input type=submit name=press value=" OK ">
    </form> 
```

相当于这个 curl 请求

```
curl --data "birthyear=1905&press=%20OK%20" http://www.example.com/junk.cgi 
```

# groovy - 从 GroovyConsole 对 Geb Spock Test 的后续调用失败并出现 UnreachableBrowserException

> ID：16025857
> 
> 赞同：1
> 
> 时间：2013-04-15T22:41:29.353
> 
> 标签：groovy, spock, geb

我正在`GebReportingSpec`从内部运行以下脚本（一个测试用例）`GroovyConsole.exe`。当 GroovyConsole 启动时，它第一次正常运行。它打开 FF，运行场景，然后在退出浏览器时关闭 FF。

但是，当我从同一个 GroovyConsole 再次运行同一个脚本时，我得到一个`UnreachableBrowserException`. 它首先调用`setupSpec()`方法，然后在调用`go`测试用例中的方法时，它调用`cleanupSpec()`...

**GEB**：0.9.0

**硒**：2.26.0

**时髦的**：2.0.5

**法郎**：14.0.1

**JDK**：1.6.0_37 64 位

**脚本**：

```
@Grapes([
    @Grab("org.gebish:geb-core:0.9.0"),
    @Grab("org.gebish:geb-spock:0.9.0"),
    @Grab("org.seleniumhq.selenium:selenium-firefox-driver:2.26.0"),
    //@Grab("org.seleniumhq.selenium:selenium-chrome-driver:2.26.0"),
    @Grab("org.seleniumhq.selenium:selenium-support:2.26.0")
])
import geb.Browser
import geb.spock.GebReportingSpec
import org.openqa.selenium.firefox.*

class Google_Search_Test extends GebReportingSpec {
def setupSpec() {
    println "Inside setupSpec()..."
    browser.config.autoClearCookies = true
}

def cleanupSpec() {
    println "Inside cleanupSpec()..."
    println "Quitting browser..."
    browser.quit()
}

def "google_search_wikipedia"() {
    println "Inside google_search_wikipedia..."
    when:
        println "Going to google.com..."
        go "http://google.com/ncr"

        // make sure we actually got to the page
        assert title == "Google"

        // enter wikipedia into the search field
        $("input", name: "q").value("wikipedia")

        // wait for the change to results page to happen
        // (google updates the page dynamically without a new request)
        waitFor { title.endsWith("Google Search") }

        // is the first link to wikipedia?
        def firstLink = $("li.g", 0).find("a.l")
    then:
        firstLink.text() == "Wikipedia"
        println "Finished test execution..."

}
} 
```

**GebConfig.groovy**：

```
import org.openqa.selenium.firefox.*
import java.util.concurrent.*

driver = { 
    FirefoxProfile firefoxProfile = new FirefoxProfile()
    firefoxProfile.setPreference("capability.policy.default.Window.frameElement", "allAccess")

    def driver = new FirefoxDriver(firefoxProfile)
    driver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS)
    driver.manage().timeouts().pageLoadTimeout(60, TimeUnit.SECONDS)

    driver
}

waiting {
    // all values are in seconds
    timeout = 60
    retryInterval = 0.5
}

reportsDir = "SeleniumReports" 
```

**成功运行**：

```
Inside setupSpec()...
Inside google_search_wikipedia...
Going to google.com...
Finished test execution...
Inside cleanupSpec()...
Quitting browser...
JUnit 4 Runner, Tests: 1, Failures: 0, Time: 15739 
```

**后续运行（异常）**：

```
Inside setupSpec()...
Inside google_search_wikipedia...
Going to google.com...
Inside cleanupSpec()...
Quitting browser...
JUnit 4 Runner, Tests: 1, Failures: 2, Time: 687
Test Failure: google_search_wikipedia(Google_Search_Test)
org.openqa.selenium.remote.UnreachableBrowserException: Error communicating with the remote browser. It may have died.
Build info: version: '2.26.0', revision: '18040', time: '2012-11-02 09:44:45'
System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.6.0_37'
Driver info: driver.version: RemoteWebDriver
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:526)
    at org.openqa.selenium.remote.RemoteWebDriver.get(RemoteWebDriver.java:275)
    at geb.Browser.go(Browser.groovy:371)
    at geb.Browser.go(Browser.groovy:363)
    at geb.spock.GebSpec.methodMissing(GebSpec.groovy:51)
    at Google_Search_Test.google_search_wikipedia(Google_Search.groovy:27)
Caused by: org.openqa.selenium.WebDriverException: The FirefoxDriver cannot be used after quit() was called.
Build info: version: '2.26.0', revision: '18040', time: '2012-11-02 09:44:45'
System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.6.0_37'
Driver info: driver.version: RemoteWebDriver
    at org.openqa.selenium.firefox.FirefoxDriver$LazyCommandExecutor.execute(FirefoxDriver.java:351)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:505)
    ... 5 more

Test Failure: google_search_wikipedia(Google_Search_Test)
org.openqa.selenium.remote.UnreachableBrowserException: Error communicating with the remote browser. It may have died.
Build info: version: '2.26.0', revision: '18040', time: '2012-11-02 09:44:45'
System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.6.0_37'
Driver info: driver.version: RemoteWebDriver
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:526)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:535)
    at org.openqa.selenium.remote.RemoteWebDriver.getPageSource(RemoteWebDriver.java:396)
    at geb.report.PageSourceReporter.getPageSource(PageSourceReporter.groovy:42)
    at geb.report.PageSourceReporter.writePageSource(PageSourceReporter.groovy:38)
    at geb.report.PageSourceReporter.writeReport(PageSourceReporter.groovy:29)
    at geb.report.CompositeReporter.writeReport(CompositeReporter.groovy:31)
    at geb.Browser.report(Browser.groovy:698)
    at geb.spock.GebReportingSpec.report(GebReportingSpec.groovy:43)
    at geb.spock.GebReportingSpec.cleanup(GebReportingSpec.groovy:39)
Caused by: org.openqa.selenium.WebDriverException: The FirefoxDriver cannot be used after quit() was called.
Build info: version: '2.26.0', revision: '18040', time: '2012-11-02 09:44:45'
System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.6.0_37'
Driver info: driver.version: RemoteWebDriver
    at org.openqa.selenium.firefox.FirefoxDriver$LazyCommandExecutor.execute(FirefoxDriver.java:351)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:505)
    ... 9 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T16:32:39.430

Geb 有一个[驱动缓存](http://www.gebish.org/manual/current/configuration.html#driver_caching)的概念，因此只有一个浏览器窗口被打开和重用，你在 groovy 控制台中使用它时遇到了问题。Geb 为您管理驱动程序/浏览器实例，并且缓存在 VM 的整个生命周期内都处于活动状态。您收到错误是因为您正在手动退出驱动程序（如果启用了驱动程序缓存，则不应这样做）并且 VM 尚未关闭（groovy 控制台仍在两次执行之间运行），这意味着浏览器管理由从缓存中检索的驱动程序已关闭。

您在这里有两个选择，我认为第二个更好：

*   不要退出驱动程序 - 将打开一个浏览器窗口并在随后的测试执行中重复使用
*   使用构建系统，例如[Gradle （](http://www.gradle.org/)[此处](https://github.com/geb/geb-example-gradle)提供了使用 Gradle 构建的示例 Geb 项目） - 这将在执行测试后关闭 VM，并且还会自动关闭浏览器

# c# - system.decimal 上的成员访问不合法 - LINQ

> ID：16025858
> 
> 赞同：0
> 
> 时间：2013-04-15T22:42:03.507
> 
> 标签：c#, sql-server, linq

我的 LINQ 查询有问题。每次运行时我都会收到此错误：

> “S00117372_FOOP202_CA2.Order_Detail”的成员访问“System.Decimal UnitPrice”在“S00117372_FOOP202_CA2.Order”类型上不合法。

我无法找出问题所在，但我认为它很简单。

```
var t3 = from o in db.Orders
         join OrderID in db.Order_Details
         on o.OrderID equals OrderID.OrderID
         into g
         group o by new { o.CustomerID, g }
         into od
         select new 
         {
             od.Key,
             Column1 = (System.Decimal?)od.Key.g.Sum(p => p.UnitPrice * p.Quantity )
         };
Tab3.DataContext = t3; 
```

这是 SQL 中代码的工作版本：

```
use Northwind
go
select CustomerID, sum(UnitPrice * Quantity)
from dbo.[Order Details]
join Orders
on dbo.[Order Details].OrderID = dbo.Orders.OrderID
group by dbo.Orders.CustomerID 
```

# php - header("内容类型：图片/jpeg"); 返回损坏的图像

> ID：16025859
> 
> 赞同：-3
> 
> 时间：2013-04-15T22:42:10.087
> 
> 标签：php, mysql, pdo

我从我的数据库中获取一个 blob 图像，但它返回损坏。

如果我删除`header("Content-Type: image/jpeg");`

它返回文件扩展名应该是因为它是PNG文件

```
‰PNG  IHDR\r¨fÆÉIDAT 
```

有什么想法有什么问题吗？是的。`header("Content-Type: image/png");`我也试过了

我试过 ob_start 和 ob_end_flush();

代码

```
 ob_start();

    $query = $db->query("SELECT `image` FROM `userdetails` WHERE id = '{$_SESSION['uid']}' ");
    $row = $query->fetch(PDO::FETCH_ASSOC);

    echo $row['image'];

    header("Content-Type: image/jpeg");
    ob_end_flush(); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T23:00:13.087

您在问题中所问的内容受制于许多参数，我担心您的问题会 - 如果有的话 - 只会涉及其中的一些参数。

映入眼帘的是 PNG 标头：

```
‰PNG  IHDR\r¨fÆÉIDAT 
```

看起来没有破碎。因此，您可能确实在将图像存储到数据库中时遇到了问题。也许数据被截断/修改而这种变化没有被注意到？

解决这个问题的一种方法是在将文件放入 blob*之前*创建文件的校验和，以便以后能够验证数据完整性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T23:02:08.280

您需要在图像数据**之前**输出标题，而不是之后：

```
header("Content-Type: image/png");
echo $row['image']; 
```

# sql - SQL 查询仅列出结果中的“非空”字段

> ID：16025861
> 
> 赞同：2
> 
> 时间：2013-04-15T22:42:25.557
> 
> 标签：sql, oracle11g, oracle-sqldeveloper

我有一张有 70 多列的表。我经常在表格中搜索一行。

前任：

```
select * from customer where customer_id='xyz'; 
```

`customer_id`是独一无二的。

结果，很可能会有 30 到 40 列具有空值。

我总是只对非空字段感兴趣。

**SQL中有没有办法只列出那些非空的列？**

PS：不幸的是，非空字段不会是所有客户的相同字段。比如说，如果“客户 A”在“R 列”中有空值，那么“客户 B”可能在该列中有一个有效值。最后，在任何给定时间，我的查询将始终只关注一位客户。

简要示例：

询问：

```
select * from customer where cust_id='826122'; 
```

实际结果：

cust_id - 826122

cust_fname - 玛莎

cust_lname - 凯恩

cust_alt_add - 空

cust_cell_acode - 210

cust_home_phone - 空

预期结果：（我不希望具有空值的列出现在我的结果中）

cust_id - 826122

cust_fname - 玛莎

cust_lname - 凯恩

cust_cell_acode - 210

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-15T22:44:10.310

你可以做类似的事情

```
SELECT * FROM Customer WHERE customer_id = 'xyz' AND some_col IS NOT NULL; 
```

或者

```
SELECT * FROM Customer WHERE customer_id IS NOT NULL 
```

希望有帮助。

**编辑**

在尝试找到合适的答案后，似乎很少有简单的方法可以做你想做的事。我认为你最好的办法是使用这篇[文章的](https://stackoverflow.com/questions/63291/sql-select-columns-with-null-values-only)答案。

尽管问题略有不同，但我认为您可能会发现这些答案很有帮助。我很抱歉不能给你你正在寻找的答案。

# java - JLayeredPane 不尊重图层

> ID：16025874
> 
> 赞同：1
> 
> 时间：2013-04-15T22:43:02.120
> 
> 标签：java, swing, layout-manager, jlayeredpane, null-layout-manager

我有一个 JLayeredPane。我的程序是这样工作的：

```
JPanel p1 = new JPanel(new BoxLayout(p1, BoxLayout.X_AXIS));
JPanel p2 = new JPanel(new BoxLayout(p2, BoxLayout.Y_AXIS));
JLayeredPane lp = new JLayeredPane();
lp.add(p1, 1);
lp.add(p2, 0); 
```

p1 和 p2 都有按钮等组件...

问题是当我将两个 JPanel 添加到 JLayeredPane 时，没有出现。

我尝试更改 JLayeredPane() 的布局。

例如，我做了：

```
lp.setLayout(new BoxLayout(lp, BoxLayout.X_AXIS)); 
```

然后，JPanels 会显示，但它们显示为相邻，不考虑 JLayeredPane 的层。

我是否被迫使用空布局？

如何让我的 JLayeredPane 尊重图层并正确显示我的两个 BoxLayout JPanel？

当我给我的 JLayeredPane 一个布局时，它会显示面板，但它根本不尊重图层。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T22:57:26.190

您需要一个了解 Z 轴的布局管理器。默认布局管理器不理解 JLayeredPane 的 Z 轴。

如果您只是想将东西叠加在一起，您可以使用这样的 LayoutManager：

```
JLayeredPane layeredFooPane = new JLayeredPane();
// The magic!
layeredFooPane.setLayout(new LayeredPaneLayout(layeredPane));
// Add components:
layeredFooPane.add(fooComponent, new Integer(JLayeredPane.DEFAULT_LAYER + 10));
layeredFooPane.add(barComponent, JLayeredPane.DEFAULT_LAYER); 
```

布局管理器类：

```
public class LayeredPaneLayout implements LayoutManager {

    private final Container target;
    private static final Dimension preferredSize = new Dimension(500, 500);

    public LayeredPaneLayout(final Container target) {
            this.target = target;
    }

    @Override
    public void addLayoutComponent(final String name, final Component comp) {
    }

    @Override
    public void layoutContainer(final Container container) {
            for (final Component component : container.getComponents()) {
                    component.setBounds(new Rectangle(0, 0, target.getWidth(), target.getHeight()));
            }
    }

    @Override
    public Dimension minimumLayoutSize(final Container parent) {
            return preferredLayoutSize(parent);
    }

    @Override
    public Dimension preferredLayoutSize(final Container parent) {
            return preferredSize;
    }

    @Override
    public void removeLayoutComponent(final Component comp) {
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T23:03:20.690

JLayeredPane 的行为就像它使用空布局一样。在将 JPanel 添加到 JLayeredPane 时，您必须指定 JPanel 的大小和位置。我会推荐这个的少数几次之一：

```
JPanel p1 = new JPanel(new BoxLayout(p1, BoxLayout.X_AXIS));
JPanel p2 = new JPanel(new BoxLayout(p2, BoxLayout.Y_AXIS));
JLayeredPane lp = new JLayeredPane();
lp.add(p1, 1);
lp.add(p2, 0);

p1.setSize(lp.getPreferredSize());
p2.setSize(lp.getPreferredSize()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-07T00:00:27.823

我遇到了类似的问题。添加窗格时不要传递图层，而是尝试单独进行：

```
lp.setLayer(p1, 1);
lp.setLayer(p2, 0);
lp.add(p1);
lp.add(p2); 
```

必须在添加组件之前定义层。您也可以尝试使用 JLayeredPane.DEFAULT_LAYER 而不是 0。

就我而言，我的 JLayeredPane 有 GridBagLayout，我不知道它是否适用于默认布局。

# javascript - 两个 javascript 表单提交的 IE10 下载问题

> ID：16025875
> 
> 赞同：2
> 
> 时间：2013-04-15T22:43:07.920
> 
> 标签：javascript, asp-classic, internet-explorer-10

所以我有一个我认为有些独特的问题，我不确定解决它的最佳方法是什么。我有一些过去在所有浏览器中运行良好的遗留代码，突然在 IE10 中它无法运行。我会尽力解释它是如何工作的以及我认为是什么问题。

我正在开发一个在线银行页面，用户可以选择将他们的帐户历史记录下载为 QIF、CSV 等。该页面是用经典的 ASP 和 VB 服务器代码编写的。该功能的工作方式是用户单击下载按钮，该按钮使用一系列可点击的图像重新加载页面，每个下载文件类型都有一个。根据他们单击的那个，然后调用一个 javascript 函数，该函数在页面上提交一个隐藏表单，然后提交第二个隐藏表单，以便重新加载包含帐户历史记录和过滤器的原始视图。第一个表单动作调用一个构建文件的 asp 页面并将其作为响应附件返回，该附件通常会提示浏览器下载文件，然后第二个提交动作只是带有历史详细信息的原始 asp 页面。在 IE10 中，文件没有

我在查找中发现，如果我注释掉提交第二个表单的 javascript 行，那么下载工作，所以我认为正在发生的事情是提交是异步发生的，并且重定向在下载之前返回。或类似的东西。我不确定。我正在尝试找出一种解决方法，而不必完全重写该功能。有什么想法吗？

编辑：

这一切发生的页面是 accountDetails.asp

javascript——

```
function SetOFX(type){
    // There is some code that does conditional handling of the @type parameter
    document.forms.DownloadForm.submit();
    document.forms.Finished.submit();
    return false
} 
```

下载表格——

```
<form name="DownloadForm" id="DownloadForm" action="downloadofx.asp" method="post">
    <!-- a bunch of input type="hidden" elements -->
</form> 
```

完成的表格——

```
<form name="Finished " id="Finished " action="accountDetails.asp" method="post">
    <!-- a bunch of input type="hidden" elements -->
</form> 
```

因此，DownloadForm 调用一个单独的 asp 页面来获取下载文件，然后将 Finished 表单发布到用户已经打开的页面以重新加载帐户历史详细信息，而不是显示下载图像按钮。我首先意识到这是一种非常糟糕的方式。这是由正在学习的人编写的遗留代码，并且已经被数百个客户用于生产，所以我不能在没有我的老板和我们所有客户的重大项目批准的情况下重写它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T00:12:54.047

这是我们最终得出的答案。上面的 javascript 一开始就不应该工作，事实上我们在测试后发现它在很多地方都不能工作，但我们关心的部分（文件下载）总是工作。事实证明，直到 IE10，所有浏览器都足够聪明，知道您不应该以这种方式提交两个表单，并且最终忽略了第二个提交。然而，IE10 正在处理它们，并且重定向在文件下载之前返回。因为我们不关心自动重定向，所以我们只是把提交去掉，而是在完成的表单中添加了一个提交按钮，这样用户就可以手动返回到之前的视图。

固定的Javascript——

```
function SetOFX(type){
    // There is some code that does conditional handling of the @type parameter
    document.forms.DownloadForm.submit();
    return false
} 
```

固定完成的表格

```
<form name="Finished" id="Finished" action="accountDetails.asp" method="post">
    <!-- a bunch of input type="hidden" elements -->
    <input type="submit" value="Return to Account Details" />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T23:13:54.977

我没有测试过这些想法，但如果你想保留当前的架构，你可以尝试检测文件何时完全下载然后离开。

看看**[这个问题](https://stackoverflow.com/questions/1106377/detect-when-browser-receives-file-download)**，了解如何检测文件何时被浏览器下载。

另一个想法是放弃第一个表单提交，转而使用带有指向文件下载链接`a`的`href`属性的简单链接，使用查询字符串参数传递附加数据。`taget="_blank"`如果您在没有它的情况下仍然遇到同样的问题，您可能还想添加该链接。

# android - Android sqlite 应用程序在打开应用程序后不会立即启动并崩溃

> ID：16025876
> 
> 赞同：-1
> 
> 时间：2013-04-15T22:43:14.697
> 
> 标签：android, database, eclipse, sqlite, android-sqlite

我目前正在使用 android adt 在 eclipse 中工作，无法打开我的应用程序。我曾多次尝试清理应用程序并卸载它，但我不确定我还能做些什么来让我的数据库显示信息。我正在模拟器和我的摩托罗拉机器人仿生安卓设备上尝试这个。我对在 android 中编程非常陌生，因此将不胜感激任何类型的帮助，我的代码可以在下面找到。eclipse软件的具体细节是：

Eclipse SDK 版本：4.2.1 构建 ID：M20120914-1800

创建数据库的主要活动：

```
package com.example.database;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class MainActivity 
{
    public static final String KEY_ROWID = "_id";
    public static final String KEY_BUSINESS = "business";
    public static final String KEY_ADDRESS = "address";
    public static final String KEY_PHONE = "phone";
    public static final String KEY_HOURS = "hours";
    public static final String KEY_WEB = "website";

    private static final String TAG = "MainActivity";

    private static final String DATABASE_NAME = "BloomBusiness";
    private static final String DATABASE_TABLE = "Business";
    private static final int DATABASE_VERSION = 1;

    private static final String DATABASE_CREATE =
        "create table Business (_id integer primary key autoincrement, "
        + "business text not null, address text not null, phone text not null, hours text not null" 
        + "website text not null)";

    private final Context context; 

    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    public MainActivity(Context ctx) 
    {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }

    private static class DatabaseHelper extends SQLiteOpenHelper 
    {
        DatabaseHelper(Context context) 
        {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) 
        {
            db.execSQL(DATABASE_CREATE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, 
        int newVersion) 
        {
            Log.w(TAG, "Upgrading database from version " + oldVersion 
                    + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS Business");
            onCreate(db);
        }
    }    

    //---opens the database---
    public MainActivity open() throws SQLException 
    {
        db = DBHelper.getWritableDatabase();
        return this;
    }

    //---closes the database---    
    public void close() 
    {
        DBHelper.close();
    }

    //---insert a title into the database---
    public long insertTitle(String business, String address, String phone, String hours, String website) 
    {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_BUSINESS, business);
        initialValues.put(KEY_ADDRESS, address);
        initialValues.put(KEY_PHONE, phone);
        initialValues.put(KEY_HOURS, hours);
        initialValues.put(KEY_WEB, hours);
        return db.insert(DATABASE_TABLE, null, initialValues);
    }

    //---deletes a particular title---
    public boolean deleteTitle(long rowId) 
    {
        return db.delete(DATABASE_TABLE, KEY_ROWID + 
                "=" + rowId, null) > 0;
    }

    //---retrieves all the titles---
    public Cursor getAllTitles() 
    {
        return db.query(DATABASE_TABLE, new String[] {
                KEY_ROWID, 
                KEY_BUSINESS,
                KEY_ADDRESS,
                KEY_PHONE,
                KEY_HOURS,
                KEY_WEB}, 
                null, 
                null, 
                null, 
                null, 
                null);
    }

    //---retrieves a particular title---
    public Cursor getTitle(long rowId) throws SQLException 
    {
        Cursor mCursor =
                db.query(true, DATABASE_TABLE, new String[] {
                        KEY_ROWID,
                        KEY_BUSINESS, 
                        KEY_ADDRESS,
                        KEY_PHONE,
                        KEY_HOURS,
                        KEY_WEB
                        }, 
                        KEY_ROWID + "=" + rowId, 
                        null,
                        null, 
                        null, 
                        null, 
                        null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    }

    //---updates a title---
    public boolean updateTitle(long rowId, String business, 
    String address, String phone, String hours, String website) 
    {
        ContentValues args = new ContentValues();
        args.put(KEY_BUSINESS, business);
        args.put(KEY_ADDRESS, address);
        args.put(KEY_PHONE, phone);
        args.put(KEY_HOURS,hours);
        args.put(KEY_WEB,website);
        return db.update(DATABASE_TABLE, args, 
                         KEY_ROWID + "=" + rowId, null) > 0;
    }
} 
```

正在显示的数据库信息：

```
package com.example.database;

import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.widget.Toast;

public class DBUse extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        MainActivity db = new MainActivity(this);

        db.open();
        Cursor c = db.getAllTitles();
        if(c.moveToFirst())
        {
            do{DisplayTitle(c);
        }while (c.moveToNext());
    }   
        db.open();
        Cursor b = db.getTitle(1);

        if (b.moveToFirst())
            DisplayTitle(c);
        else
            Toast.makeText(this,"No business found",Toast.LENGTH_LONG).show();
        db.close();
    db.close();

}

    public void DisplayTitle(Cursor c) {
        Toast.makeText(this,
        "Name: " + c.getString(1)+"\n"+
        "Address:" + c.getString(2)+"\n"+
        "Phone:" + c.getString(3)+"\n"+
        "Hours:" + c.getString(4)+"\n"+
        "Website"+ c.getShort(5),
        Toast.LENGTH_LONG).show();
    }

    } 
```

正在添加的数据库信息：

```
package com.example.database;
import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.widget.Toast;
public class DBActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        MainActivity db= new MainActivity(this);

        db.open();
        long id;

        id=db.insertTitle("BloomingFoods","419 E. Kirkwood Ave. Bloomington, IN", "812-336-5300", "M-S:8AM-9PM Sun:9am-8PM","http://www.bloomingfoods.coop");
        id=db.insertTitle("BloomingFoods","316 W. 6th Street Bloomington, IN", "812-333-5300", "M-S:7AM-10PM Sun:9am-9PM","http://www.bloomingfoods.coop");
        id=db.insertTitle("BloomingFoods","3220 E. 3rd Street Bloomington, IN", "812-336-5300", "M-Sun:8AM-10PM","http://www.bloomingfoods.coop");
        id=db.insertTitle("The Uptown Cafe","102 E. Kirkwood Ave. Bloomington, IN", "812-339-0900", "M-S:8AM-9PM Sun:9am-8PM", "http://www.the-uptown.com/");

    }

} 
```

清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.database"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.database.DBUse"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

日志猫：

```
04-15 20:50:23.122: E/Trace(638): error opening trace file: No such file or directory (2)
04-15 20:50:24.062: E/SQLiteLog(638): (1) no such column: website
04-15 20:50:24.072: D/AndroidRuntime(638): Shutting down VM
04-15 20:50:24.072: W/dalvikvm(638): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
04-15 20:50:24.084: E/AndroidRuntime(638): FATAL EXCEPTION: main
04-15 20:50:24.084: E/AndroidRuntime(638): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.database/com.example.database.DBUse}: android.database.sqlite.SQLiteException: no such column: website (code 1): , while compiling: SELECT _id, business, address, phone, hours, website FROM Business
04-15 20:50:24.084: E/AndroidRuntime(638):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
04-15 20:50:24.084: E/AndroidRuntime(638):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
04-15 20:50:24.084: E/AndroidRuntime(638):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
04-15 20:50:24.084: E/AndroidRuntime(638):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
04-15 20:50:24.084: E/AndroidRuntime(638):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-15 20:50:24.084: E/AndroidRuntime(638):  at android.os.Looper.loop(Looper.java:137)
04-15 20:50:24.084: E/AndroidRuntime(638):  at android.app.ActivityThread.main(ActivityThread.java:4745)
04-15 20:50:24.084: E/AndroidRuntime(638):  at java.lang.reflect.Method.invokeNative(Native Method)
04-15 20:50:24.084: E/AndroidRuntime(638):  at java.lang.reflect.Method.invoke(Method.java:511)
04-15 20:50:24.084: E/AndroidRuntime(638):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-15 20:50:24.084: E/AndroidRuntime(638):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-15 20:50:24.084: E/AndroidRuntime(638):  at dalvik.system.NativeStart.main(Native Method)
04-15 20:50:24.084: E/AndroidRuntime(638): Caused by: android.database.sqlite.SQLiteException: no such column: website (code 1): , while compiling: SELECT _id, business, address, phone, hours, website FROM Business
04-15 20:50:24.084: E/AndroidRuntime(638):  at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
04-15 20:50:24.084: E/AndroidRuntime(638):  at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
04-15 20:50:24.084: E/AndroidRuntime(638):  at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
04-15 20:50:24.084: E/AndroidRuntime(638):  at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
04-15 20:50:24.084: E/AndroidRuntime(638):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
04-15 20:50:24.084: E/AndroidRuntime(638):  at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:37)
04-15 20:50:24.084: E/AndroidRuntime(638):  at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:44)
04-15 20:50:24.084: E/AndroidRuntime(638):  at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
04-15 20:50:24.084: E/AndroidRuntime(638):  at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1161)
04-15 20:50:24.084: E/AndroidRuntime(638):  at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1032)
04-15 20:50:24.084: E/AndroidRuntime(638):  at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1200)
04-15 20:50:24.084: E/AndroidRuntime(638):  at com.example.database.MainActivity.getAllTitles(MainActivity.java:101)
04-15 20:50:24.084: E/AndroidRuntime(638):  at com.example.database.DBUse.onCreate(DBUse.java:19)
04-15 20:50:24.084: E/AndroidRuntime(638):  at android.app.Activity.performCreate(Activity.java:5008)
04-15 20:50:24.084: E/AndroidRuntime(638):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
04-15 20:50:24.084: E/AndroidRuntime(638):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
04-15 20:50:24.084: E/AndroidRuntime(638):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T00:27:02.647

您正在尝试选择“webiste”列中包含数据的记录，但您的 DATABASE_CREATE 未添加此列。

```
Caused by: android.database.sqlite.SQLiteException: no such column: webiste (code 1): , while compiling: SELECT _id, business, address, phone, hours, webiste FROM Business 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:45:33.023

您需要在 null 和 phone 之间使用逗号。

```
 private static final String DATABASE_CREATE =
    "create table Business (_id integer primary key autoincrement, "
    + "business text not null, address text not null, hours text not null," 
    + "phone text not null);"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T22:59:36.420

去除 ; 从您的创建表字符串中尝试。在我的项目中，我没有使用；在 create 语句的末尾。

```
private static final String DATABASE_CREATE =
    "create table Business (_id integer primary key autoincrement, "
    + "business text not null, address text not null, hours text not null," 
    + "phone text not null)"; 
```

我删除了 ; 就在语句末尾的 null) 之后。

# coldfusion - 从 Web 管理员编译站点时出现堆栈大小过大错误

> ID：16025886
> 
> 赞同：1
> 
> 时间：2013-04-15T22:44:48.687
> 
> 标签：coldfusion, railo

我正在尝试在我们刚刚配置的新构建服务器上从 Railo Web Administrator 编译我们的站点。它具有使用 Helicon Zoo Web 安装程序安装的 Railo 3 的最新安装。当我尝试编译时，我收到以下错误：

```
(class: admin/applications/appbuilder_create_app_cfm$cf, method: _call000005 signature:
(Lrailo/runtime/PageContext;)V) Stack size too large, Error Occurred in File 
[C:\inetpub\wwwroot\Version120Daily\Admin\Applications\appbuilder_create_app.cfm:46] 
```

文件和行号指向大型 SQL 插入语句的中间。我还尝试了 Railo 进程在其下运行的 Java 实例的 Java 内存变量，但没有成功。目前的设置是这样的： `-Xms256M -Xmx512M -Xss1m` 但是，我尝试将 Xss 增加到 128m。

有没有其他人遇到过类似的问题，或者有谁知道可能导致此错误发生的原因。我将不胜感激有人可以提供的任何帮助。

# mysql - 如何重写使用 MySQL Extensions to GROUP BY 到标准 SQL 语句的语句？

> ID：16025888
> 
> 赞同：1
> 
> 时间：2013-04-15T22:45:07.973
> 
> 标签：mysql, group-by, having-clause, sql-mode

如果设置为，则它使用[`MySQL Extensions to GROUP BY`](http://dev.mysql.com/doc/refman/5.0/en/group-by-extensions.html)并且无法执行。`sql_mode``ONLY_FULL_GROUP_BY`

```
-- SET sql_mode = ""; -- reset sql_mode and execute statement
SELECT
    `courses`.`id` AS `id`,
    `courses`.`title` AS `title`,
    `courses`.`description` AS `description`,
    MATCH (coursedata.title) AGAINST ('Salsa') * 5 + MATCH (coursedata.description) AGAINST ('Salsa') * 2 AS `relevance`
FROM `courses`
INNER JOIN `coursedata` ON `courses`.`id` = `coursedata`.`id`
GROUP BY `courses`.`id`
HAVING `relevance` >= '3' 
```

用标准的SQL能达到同样的效果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:59:53.377

似乎工作...

```
SELECT * FROM (
    SELECT
        DISTINCT `courses`.`id` AS `id`,
        `courses`.`title` AS `title`,
        `courses`.`description` AS `description`,
        MATCH (coursedata.title) AGAINST ('Salsa') * 5 + MATCH (coursedata.description) AGAINST ('Salsa') * 2 AS `relevance`
    FROM `courses`
    INNER JOIN `coursedata` ON `courses`.`id` = `coursedata`.`id`
) AS subselect
WHERE `relevance` >= '3' 
```

# php - jQuery 无法从 Yii 框架的答案中解析 JSON

> ID：16025898
> 
> 赞同：0
> 
> 时间：2013-04-15T22:46:25.267
> 
> 标签：php, javascript, ajax, yii

我是 Yii 的新手，对不起，如果我的问题如此愚蠢。

我正在尝试使用下一个 js 代码发送帖子查询。

```
 var post_data = { 'ajax': 'true', 'action': 'get', 'id': id };
    $.post('/index.php?r=admin/staticPages', post_data, function(data) {
        var answer = $.parseJSON(data);
        $("input[name='id']").val(answer.id);
        $("input[name='lang']").val(answer.lang);
        $("input[name='title']").val(answer.title);
        $("input[name='description']").val(answer.description);
        $("input[name='keywords']").val(answer.keywords);
        $("textarea[name='content']").val(answer.content);
    }); 
```

管理控制器中的下一个代码。

```
if ($_POST['action'] == 'get')
{
    $id = $_POST['id'];
    $staticPage = StaticPage::model()->find('id = :id', array(':id' => $id));

    echo json_encode($staticPage);
} 
```

例如，在 php 代码中，我可以使用 $static Page->id 它给我页面的 id。但是在js中，我做不到。为什么？

我认为，我必须序列化或刷新对象（$staticPage）的属性，并且只有在此之后才能为我的 JS 脚本提供答案。但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T22:56:14.283

你试过这个吗？

```
$id = $_POST['id'];
$staticPage = StaticPage::model()->find('id = :id', array(':id' => $id));

if (!headers_sent()) {
    header('Content-type: application/json');
}

echo CJSON::encode($staticPage->attributes); 
```

# android - Spring 3/Square Retrofit - MultipartParams 但没有 MultipartFiles

> ID：16025904
> 
> 赞同：1
> 
> 时间：2013-04-15T22:47:03.633
> 
> 标签：android, spring, rest, spring-mvc, file-upload

我设置了以下控制器：

```
@PreAuthorize("hasAuthority('ROLE_USER')")
@RequestMapping(value = "/me/avatar", method = RequestMethod.POST)
public @ResponseBody boolean setAvatar(Principal principal, MultipartHttpServletRequest request) {

    String username = ((User) ((OAuth2Authentication) principal).getPrincipal()).getUsername();

    MultipartFile file = request.getFile("avatar");
    return Boolean.TRUE;
} 
```

当我使用 Square Retrofit 发布到这个控制器时：

```
@Multipart
@POST("/user/me/avatar?access_token={access_token}")
void uploadAvatar(@Name("access_token") String accessToken, @Name("avatar") TypedFile image, retrofit.http.Callback<Boolean> callback); 
```

我得到一个 MultipartHttpServletRequest，它具有“avatar”参数，具有正确的文件名和所有内容，但没有多部分文件。

我做错了什么会导致我得到 MultipartParams 但没有 MultipartFiles？我尝试了各种其他 TypedOutput 格式，但得到了相同的结果。如果我从 Postman（一个 Chrome 插件）点击同一个控制器，一切都会按预期工作，让我认为这是 Retrofit 中的错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T00:16:54.810

这是由于 Retrofit 中的一个错误，该错误已在今天得到修复。上面的代码现在可以将文件从 Retrofit 上传到基于 Spring 的 api 服务器。

# android - 9-patch 应用程序无法正常运行？

> ID：16025907
> 
> 赞同：0
> 
> 时间：2013-04-15T22:47:39.613
> 
> 标签：android, nine-patch

我正在尝试创建一个仅水平拉伸的 9 块图像，正如您在所附图像中看到的那样，我仅在顶部中心绘制。

预览中的第二张图片（中间一张）显示了我认为它是错误的。我只是想拉伸中间，所以对我来说为什么它没有显示图像的正确部分 - 褶边是没有意义的。左边部分还可以，心想。

任何帮助表示赞赏！

![在此处输入图像描述](https://i.stack.imgur.com/b7Zdf.png)

编辑：添加了另一个图像以显示它，启用“显示补丁”和“显示内容”：

![在此处输入图像描述](https://i.stack.imgur.com/AkXMg.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T23:42:58.987

它在应用程序中的外观如何？可能只是 draw9patch 工具没有正确预览它。尝试尽可能宽地拉伸窗口。还检查“显示内容”和“显示补丁”复选框可能有助于向您展示该工具的想法。

此外，请确保包含拉伸像素的托盘完全透明，宽度正好为 1 像素，并且环绕整个位图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T23:01:13.010

布局定义了图像被拉伸的程度和方向。9-patch 只能定义图像的哪些部分应该拉伸，哪些部分不应该拉伸。您基本上可以从拉伸中排除部分图像。在您的示例中，左右部分不会被水平拉伸。但是，它们仍将垂直拉伸。由于您在垂直侧没有选择任何内容，因此图像会被平均拉伸。

# regex - 正则表达式到字符串开头的特定值

> ID：16025910
> 
> 赞同：-1
> 
> 时间：2013-04-15T22:48:00.467
> 
> 标签：regex, string, match

嗨，我需要一个正则表达式来查找字符串是否以“（＃）”开头，其中＃可以是从 1 到 99999 等的任何数字，并且在“（＃）”之后可以跟随任何数字，包括符号

字符串 例如。

```
"(1) S0m3 - Str!n9" - Must found positive
"(67) my $tr!n9 goes H3R3" - Must found positive
"@n0Th3R (7) $tr!nG" - Must found negative
"L0Ok @t the 3nD (57)" - Must found negative 
```

我在谷歌上搜索过，但找不到任何结果，或者我不知道要搜索什么，所以请指导我找到这个问题的答案

谢谢你的时间：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T23:22:15.610

尝试这个：

```
/^\(\d{1,5}\)/ 
```

尊重位置和最大值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T22:52:46.423

您正在寻找`^`指定字符串开头的运算符。该模式`/^\(\d+\)/`将匹配字符串开头的任意数量的数字（由括号括起来）。

# ios - Box2D 碰撞不会在低 FPS 下触发？

> ID：16025911
> 
> 赞同：0
> 
> 时间：2013-04-15T22:48:01.887
> 
> 标签：ios, cocos2d-iphone, box2d, collision, frame-rate

所以在我的游戏中我集成了 Cocos2D + Box2D。我知道不建议这样做，但我让我的 b2Bodys 跟随我的 CCSprites，因为我只需要 Box2D 的碰撞部分。无论如何，使用 PhysicsEditor，我已经创建了最有效的身体形状，并且我的游戏通常以 60FPS 运行良好。我唯一的问题是，我想在这里为最坏的情况做准备。假设在非常罕见的情况下（例如万分之一），游戏会延迟 5 秒，因此 FPS 约为 10FPS。这将导致我的主角不会与它下面的平台发生碰撞。反过来，它会使角色跌落平台，游戏会意外结束。所以总的来说，我只想在发生这种情况时制定一个后备计划。

所以这就是我调用 Box2D 步骤的方式：

```
world->Step(1/60.0f ,8, 8); 
```

然后在我的更新方法中，我这样做是为了检测碰撞：

```
std::vector<b2Body *>toDestroy;
std::vector<MyContact>::iterator pos;
for(pos = _contactListener->_contacts.begin();
    pos != _contactListener->_contacts.end(); ++pos) {
    MyContact contact = *pos;

    b2Body *bodyA = contact.fixtureA->GetBody();
    b2Body *bodyB = contact.fixtureB->GetBody();
    if (bodyA->GetUserData() != NULL && bodyB->GetUserData() != NULL) {
        CCSprite *spriteA = (CCSprite *) bodyA->GetUserData();
        CCSprite *spriteB = (CCSprite *) bodyB->GetUserData();

        if (spriteA.tag == 1 && spriteB.tag == 2) {
            toDestroy.push_back(bodyA);
        } else if (spriteA.tag == 2 && spriteB.tag == 1) {
            toDestroy.push_back(bodyB);
        }
    }
} 
```

那么我将如何调整我现在正在做的事情来处理我上面解释的可能情况呢？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T23:14:09.913

您**不会**遇到此问题，因为您的 Box2D 步长间隔是固定的。当帧速率降低时，您的模拟只会减慢速度。

如果时间步长乘以帧的增量时间，则*可能会发生这种情况。*但即便如此，您也应该首先通过在进行任何代码更改之前强制游戏以 10 fps 运行来验证您是否会遇到这些问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T23:08:53.637

Box2D 可以选择将对象定义为项目符号。这是为了处理快速移动的物体不会穿过固体物体。

语法是这样的：

```
bodyDef.bullet = true; 
```

这使得 Box2D 从旧位置扫描到新位置，并且会捕捉到由于低帧率而没有碰到的那些障碍物。

# java - 按字典顺序获取第二大元素

> ID：16025921
> 
> 赞同：0
> 
> 时间：2013-04-15T22:49:04.717
> 
> 标签：java

我正在尝试按字典顺序或字母顺序打印数组中的第二大元素。pop确实是第二大的。然而; 当我测试另一组数组时，我的代码不是我想的那样设计的，显然我只打印最后一个元素。关于我哪里出错的任何建议？

```
import java.util.ArrayList;
public class test {
public static void main(String[] args)
{
    ArrayList<String> list = new ArrayList<String>();
    list.add("bob");
    list.add("mill");
    list.add("sun");
    list.add("opera");
    list.add("bun");
    list.add("pop");
    System.out.println("list: " + list);
    String s = list.get(0);
    for ( int i = 0; i < list.size() - 1; i++) {
        if (list.get(i).compareTo(list.get(i + 1)) > 0) {
            s = list.get(i);
            list.set(i, list.get(i + 1));   
        } else if (list.get(i).compareTo(list.get(i + 1)) < 0) {
            s = list.get(i + 1);
        }
    }
    System.out.println("second largest: " + s);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:54:39.950

我建议使用以下伪代码来打印第二大元素：

```
element largest = ""
element secondlargest = ""
for each element in list:
   if element > largest:
      secondlargest = largest
      largest = element
   else if element > secondlargest:
      secondlargest = element
print secondlargest 
```

（如果您希望将其扩展为能够打印第三个、第四个或第 n 个元素，更智能的方法会更好 - 在极端情况下，您只需创建列表的排序副本并从末尾返回第 n 个项目)

# fiddler - DFP 返回空的大量文件（广告）

> ID：16025923
> 
> 赞同：0
> 
> 时间：2013-04-15T22:49:40.287
> 
> 标签：fiddler, ads, double-click

我使用 DFP 来投放广告，并使用 fiddler 来监控请求。

在向 dfp 服务器发出 3 次 GET 请求后，在很短的时间内（例如 30 秒），每个后续请求都会列出一个空广告列表。

DFP 是否具有某种垃圾邮件防护功能？如果是这样，有没有办法解决它？当您的广告负载为空时，调试广告实施会非常慢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T22:29:43.690

DFP 中肯定有一些速率限制......我遇到过很多次！据我所知，我认为它可能是每个广告单元......而且它不会持续很长时间......

至于调试您是否尝试过 DFP 谷歌控制台？这使调试变得更加容易......而且我很确定它会为您提供调试所需的诊断信息，而不会出现速率限制问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-30T21:47:16.740

您是否考虑过在参数中添加“校正器”值？只需 &c=rand(10000,99999)。

# arrays - 多维数组中的两种类型的数组是否有公认的名称？

> ID：16025924
> 
> 赞同：0
> 
> 时间：2013-04-15T22:49:42.243
> 
> 标签：arrays, multidimensional-array, 2d, convention

对不起，如果这个问题有点初级，但我想知道二维数组中是否有不同数组的名称。例如，在：

```
int[][] array = new int[5][10]; 
```

长度为 5 的数组叫什么？那么长度为 10 的数组呢？我在想像“主数组”和“辅助数组”这样的东西，因为辅助数组存储在主数组中......

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T23:06:09.710

查看多维数组（数组数组）时，第一个长度是行数。第二个长度是列的数量。因此，通常说，如果通过 for 循环运行，您可以这样引用它们。

多维数组 int [][] arr = new int[2][3] 的示例可能如下所示：

[1, 2, 3] [4, 5, 6]

所以有 [2] 行，[3] 列。

# c - 什么时候将变量放在“.rdata”部分而不是“.text”部分？

> ID：16025929
> 
> 赞同：8
> 
> 时间：2013-04-15T22:50:23.597
> 
> 标签：c, gcc, linker

我试图了解`.rdata`部分与`.text`部分的含义。我正在尝试一个简单的程序如下

```
int main()
{
    const int a = 10;
    printf("%d\n", a);
    return 0;
} 
```

当我构建和转储`map`文件`gcc -o a.out sample.c -Wl,Map,test.map`并搜索时`sample.o`，我发现以下分配

```
.text          0x0040138c       0x34 sample.o
.data          0x00402000        0x0 sample.o
.rdata         0x00403064        0x8 sample.o
.eh_frame      0x00404060       0x38 sample.o
.bss           0x00405020        0x0 sample.o 
```

现在，如果我稍微修改我的程序以使`a`全局变量为

```
const int a = 10;
int main()
{
     printf("%d\n", a);
     return 0;
} 
```

通过重复与上述相同的步骤，我观察到分配如下

```
.text          0x0040138c       0x2c sample.o
.data          0x00402000        0x0 sample.o
.rdata         0x00403064        0xc sample.o
.eh_frame      0x00404060       0x38 sample.o
.bss           0x00405020        0x0 sample.o 
```

其中清楚地表明`a`被分配到`.rdata`部分为

```
.rdata         0x00403064        0xc sample.o
               0x00403064            a 
```

从这些实验中，我了解到`global` `const`被分配到`.rdata`部分中，而`.text`部分大小已经下降。因此，我假设在第一个示例中`a`已分配到`.text`部分中。

我的问题是：

1.  `const`在确定变量的位置时是否考虑变量的范围`.rdata`or `.text`？

2.  `.text`从我的实验中，我观察到变量在分配到部分时需要 8 个字节，而在部分中需要 4 个字节`.rdata`。造成这种差异的原因是什么？

3.  如果局部变量过多`const`，则相应`.text`部分的大小会显着增加。在这种情况下推荐的编程实践是什么？

提前谢谢了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-16T00:27:02.997

在第一种情况下，变量被声明为**局部变量**。它具有“自动”存储持续时间，这意味着它会在封闭范围结束时消失。由于其存储持续时间，它不能永久占用任何内存（无论 是否都是如此`const`）。因此，它通常存储在堆栈或寄存器中。

在第二种情况下，变量被声明为**全局变量**。它具有静态存储持续时间，因此它会在程序的生命周期内持续存在。这可以存储在许多地方，例如`.data`、`.bss`、`.text`或`.rdata`( 或`.rodata`)。

`.data`通常用于具有一些预定义（非零）内容的可写静态数据，例如全局`int foo = 42;`. `.bss`用于初始化为零（或未初始化）的可写静态数据。`rdata`用于常量静态数据，如字符串和`const`变量。当然，这些用途都是“一般的”，并且可能因编译器而异。

那么为什么`.text`在第一种情况下会变大呢？这是因为编译器必须生成一些额外的指令才能加载`10`到堆栈或寄存器中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T23:38:56.683

此行为因目标而异。在第一个示例中，您认为`a`最终出现在`.text`部分中的`10`是（可能）最终出现在文本部分中并被加载到`a`堆栈中。某些具有例如 pc 相对寻址的体系结构会将此类常量放置在代码之间的某个位置。其他架构将编码`10`为立即寻址模式，这也会导致代码大小稍大。

在第二个示例`a`中，创建了一个全局变量，并将位于`.data`您所观察到的部分中。

因此，让我们根据上述情况回答您的问题。

1.  `const`在 C 中并不意味着它是一个常量（uuh??），这意味着程序员承诺不会编写它。编译器会在您执行此操作或您有执行此操作的危险时*发出警告*，但仍会编译。因此，您的案例之间的区别实际上`a`是第一个示例中的局部变量和第二个示例中的全局变量。嗯，我只是尝试公然写 a `const int`，它确实给出了一个错误，而不仅仅是一个警告。但是，可以`const`通过引用将更改它的函数来传递这样的 a。跨单元的东西甚至可能未被编译器检测到。

2.  如果它位于该`.data`部分中，则它是对象的大小，在您的情况下为 4 个字节。如果`10`它位于代码中，无论是在常量表中还是作为立即寻址模式，那么它实际上将取决于体系结构它将变得多大以及对周围代码的影响。

3.  如果您的代码中有许多常量并且架构支持 pc 相对寻址（如 ARM），那么它可能会将所有这些常量定位在靠近使用它们的代码的某个位置，但所有这些都在一起，所以一次跳转就足够了在它上面，或者如果有一个可以隐藏常量表的自然分支，则没有。因此，常数占用了它们需要的空间，而不是（更多）。如果它们都被实现为立即寻址，那么如果有更有效的方法以这种方式获取常量，编译器仍可能决定从中制作一个表。

# python - 保护bottle.py web应用程序免受XSS和CSRF的方法？

> ID：16025932
> 
> 赞同：1
> 
> 时间：2013-04-15T22:50:31.557
> 
> 标签：python, security, wsgi, bottle

我正在使用`bottle.py`,`Beaker`为会话和一个自定义的 AAA 编写模块编写一个 Web 应用程序，因为我担心许多人担心安全性以及防止像我提到的那样的目标攻击的最佳方法。

例如，我有以下代码：

```
@route('/manage/adddomain',method='POST')
def adddomain():
    #This checks if user has enough power to create a domain
    aaa.require(50,'/forbidden') 

    user = aaa.getusername() # This is retrieved from a server side session
    domainname = request.forms.get('domain')
    description = request.forms.get('description')

    # Additional checks are performed in the sql module 
    # to protect against forged requests with valid login
    return sql.createdomain(user,domainname,description) 
```

您会执行哪些额外检查来保护您的 Web 应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T05:14:09.637

**Blender**几乎涵盖了您需要的内容，但我想添加另一种方法。您可以添加一个包装器，而不是检查每个 POST：

```
def wrap_requires_csrf(*methods):
    def wrapper(fn):
        @wraps(fn)
        def wrapped(*args, **kwargs):
            if request.method in methods:
                if request.method == 'POST':
                    csrf = request.form.get('csrf')
                elif request.method == 'GET':
                    csrf = request.args.get('csrf')
                if not csrf or csrf != session.get('csrf'):
                    abort(400)
                session['csrf'] = generate_csrf_token()
            return fn(*args, **kwargs)
        return wrapped
    return wrapper

@app.route('/some/page', methods=['GET','POST'])
@wrap_requires_csrf('POST')
def some_page():
    ... 
```

然后，在您的模板中，您将提供隐藏字段

```
<input name="csrf" type="hidden" name="{{session.csrf}}" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T23:02:00.950

您需要在每个重要的表单字段中包含一个 CSRF 令牌，并使用您的模板引擎清理所有输出。

这是一个[Flask 片段](http://flask.pocoo.org/snippets/3/)，您可以将其调整为您的 Bottle 应用程序：

> [针对CSRF](http://en.wikipedia.org/wiki/CSRF)攻击的一种常用技术是向会话中添加一个随机字符串，并根据 POST 中的隐藏字段检查该字符串。
> 
> ```
> @app.before_request
> def csrf_protect():
>     if request.method == "POST":
>         token = session.pop('_csrf_token', None)
>         if not token or token != request.form.get('_csrf_token'):
>             abort(403)
> 
> def generate_csrf_token():
>     if '_csrf_token' not in session:
>         session['_csrf_token'] = some_random_string()
>     return session['_csrf_token']
> 
> app.jinja_env.globals['csrf_token'] = generate_csrf_token 
> ```
> 
> 然后在您的模板中：
> 
> ```
> <form method=post action="">
>     <input name=_csrf_token type=hidden value="{{ csrf_token() }}"> 
> ```

至于清理，这取决于您的模板引擎。Jinja2 有`e`or`escape`过滤器：

```
<h2>No results for {{ search_query|escape }}</h2> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-16T10:40:03.683

我将**@Blender**的解决方案改编为瓶子，这里是：

```
from string import ascii_letters, digits
from random import choice
from bottle import Bottle, request, Jinja2Template, abort

app = Bottle()

@app.hook('before_request')
def csrf_protect():
    if request.method == 'POST':
        sess = request.environ['beaker.session']
        req_token = request.forms.get('csrf_token')

        # if no token is in session or it doesn't match the request one, abort
        if 'csrf_token' not in sess or sess['csrf_token'] != req_token:
            abort(403)

def str_random(length):
    '''Generate a random string using range [a-zA-Z0-9].'''
    chars = ascii_letters + digits
    return ''.join([choice(chars) for i in range(length)])

def gen_token():
    '''Put a generated token in session if none exist and return it.'''
    sess = request.environ['beaker.session']
    if 'csrf_token' not in sess:
        sess['csrf_token'] = str_random(32)
    return sess['csrf_token']

# allow access of the token generator using csrf_token
Jinja2Template.defaults['csrf_token'] = gen_token 
```

Bottle 默认情况下不附带会话，因此我使用的是[bottle-beaker](https://github.com/bottlepy/bottle-beaker)。

需要包含在每个表单中的输入：

```
<input type="hidden" name="csrf_token" value="{{ csrf_token() }}"> 
```

# google-finance - 使用谷歌 URL 获取期权链数据的指南？

> ID：16025936
> 
> 赞同：2
> 
> 时间：2013-04-15T22:50:56.887
> 
> 标签：google-finance

我想在谷歌中输入一个 URL 并获取特定股票的所有期权链数据。是否有指南向您展示如何使用它，例如如果我想在不知道个别到期日期的情况下获取明年到期的所有期权，或者我只是想要一个特定的执行价格？我发现了另一个问题，它给了我基本的大纲，但没有具体说明细节：

[谷歌金融 API 上的金融历史期权数据（包括罢工等）](https://stackoverflow.com/questions/9649052/finance-historical-options-data-with-strikes-etc-on-google-finance-api)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-26T16:27:45.400

这是一个关于如何使用 ImportHTML 函数执行此操作的示例，尽管数据当然存在延迟。

```
=importhtml("http://finance.yahoo.com/q/op?s=QQQ&m=2013-12","table",0) 
```

# javascript - jqGrid 工具栏搜索小数

> ID：16025939
> 
> 赞同：1
> 
> 时间：2013-04-15T22:51:21.110
> 
> 标签：javascript, jquery, jqgrid

我正在使用启用了工具栏搜索的 jqGrid。我已将搜索选项配置为`'eq'`. 但是，当我在搜索栏上输入十进制数字时，不会显示有效记录。

例如：当我输入`12`时，记录`12.00`显示，这是正确的。当我输入不显示`12.50`的记录时，这是不正确的。`12.50`

我尝试了`sorttype`数字，`formatter`小数位，但我似乎无法让它工作。

网格定义：

```
$("#productListingGrid").jqGrid({
    datastr: products,
    datatype: 'jsonstring',
    jsonReader: {
        root: 'products',
        repeatitems: false,
        cell: 'products.branches',
        id: 'productNumber'
    },
    loadonce: true,
    // -1 no longer works: https://github.com/tonytomov/jqGrid/issues/317
    rowNum: 10000,
    height: 580,
    width: 1250,
    colNames: columnNames,
    colModel: columnModel,
    sortname: 'productNumber',
    sortorder: "asc",
    caption: 'PRODUCT LIST',
    headertitles: true,
    altRows: true,
    altclass: 'gridStripe',
    gridview: true,
    footerrow: true,
    ignoreCase: true,
    shrinkToFit: false
}); 
```

我的列模型定义：

```
{ name: 'totalValue' , width:55, align:'right', formatter: 'currency', searchoptions:{sopt:['eq']} } 
```

启用工具栏搜索的代码：

```
grid.jqGrid('filterToolbar', {searchOnEnter: false}); 
```

我可以知道这是否是当前的限制吗？

非常感谢。

注意：我目前正在使用以下内容：

```
jQuery - 1.9.1
jQuery UI - 1.10.2
jqGrid - 4.4.5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T00:01:08.123

我通过将`sorttype`值设置为`'float'`.

从

```
{ name: 'totalValue' , width:55, align:'right', formatter: 'currency', searchoptions:{sopt:['eq']} } 
```

至

```
{ name: 'totalValue' , width:55, align:'right', sorttype:'float', formatter: 'currency', searchoptions:{sopt:['eq']} } 
```

我发现设置排序类型以使搜索正常工作是非常违反直觉的。改用数据类型可能会更好。

# php - 使用复选框实现 many_to_many 关系

> ID：16025944
> 
> 赞同：0
> 
> 时间：2013-04-15T22:51:42.143
> 
> 标签：php, yii, many-to-many

我陷入了一些我认为是由于我对多对多关系的经验不足的问题。

在我的应用程序中，我将兴趣映射到具有多对多的产品。我希望创建以下场景，其中完整的兴趣列表列在带有复选框的特定产品下。对于提交表单时选中的每个复选框，都会在 InterestProductAssignment 表中添加一行。

在我的产品控制器中，我调用了完整的兴趣列表-

```
$interests = Interest::model()->findAll(); 
```

实际上，我并没有比这更进一步，因为我的思绪很纠结，想知道从哪里开始。到目前为止，我尝试的是构建一个 InterestProductAssignment 对象数组来匹配我上面返回的兴趣数组。我已经尝试将它传递给视图并构建表单，但是我试图将两者匹配起来让自己相当困惑，我不敢相信我正在正确使用 Yii，因为它很乱。

是否有人能够概述此问题的解决方案，使我能够针对每个兴趣添加一个复选框，以便在提交时在产品和兴趣之间添加链接？我很想看看你在控制器和视图中写了什么。

澄清一下，这个页面只是一个产品的主题。

**延期**

对于我遇到的补充问题，我发布了我得到的代码，一旦我们发现错误，这也可以帮助其他人实现类似的事情。

**我在我的产品控制器中的关系是这样的——**

```
 'interests'=>array(self::MANY_MANY, 'Interest', 'interest_product_assignment(interest_id, product_id)') 
```

**控制器**

```
 public function actionUpdate($id)
{
            // loadModel as been adapted to be called "->with('interests')"
    $model=$this->loadModel($id);

    // Uncomment the following line if AJAX validation is needed
    // $this->performAjaxValidation($model);

    if(isset($_POST['Product']))
    {
        $model->attributes=$_POST['Product'];
        if($model->save())
            foreach($_POST['ProductInterest'] as $i => $interest_id){
                $this_interest = new InterestProductAssignment;
                $this_interest->product_id = $model->id;
                $this_interest->interest_id = $interest_id;
                $this_interest->save();
            }
            $this->redirect(array('view','id'=>$model->id));
    }

    $this->render('update',array(
        'model'=>$model,
    ));
} 
```

**视图_form.php的相关部分**

```
<div class="row">
    <?php echo CHtml::checkBoxList('ProductInterest', CHtml::listData($model->interests, 'interest_id', true), CHtml::listData(Interest::model()->findAll(), 'id', 'interest'));?>
</div> 
```

问题是 checkBoxList 中的第二个字段似乎没有正确填写已选中的复选框。我怀疑这的根本原因可能是一个愚蠢的错误。我无法发现它，而且我对 checkBoxList 还不够熟悉。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T00:57:39.783

鹅，

我认为您在这里寻找的是[CheckBoxList](http://www.yiiframework.com/doc/api/1.1/CHtml#checkBoxList-detail)。

在您的表格中，您可以使用代码

```
echo CHtml::checkBoxList('Product_Interests', $model->getInterests(), CHtml::listData(Interest::model()->findAll(), 'interest_id', 'interest_title'));
//$model->getInterests() is a method that should returns an array of IDs of all the currently selected interests 
```

然后在您的控制器中，您可以使用以下代码：

```
foreach($_POST['Product_Interests'] as $interest_id=>$checked)
    if($checked)
      $model->addInterest($interest_id); //Add Interest
    else
      $model->removeInterest($interest_id); //Remove an Interest if it exists
//Note: If you have a model that connects these tables those can be created or destroyed here 
```

# database - Perl DBI - 使用未初始化的值

> ID：16025946
> 
> 赞同：0
> 
> 时间：2013-04-15T22:51:48.517
> 
> 标签：database, perl, hashtable

所以。

我正在使用 Perl 的 DBI 从 Perl 脚本查询 Oracle 数据库。我使用 fetchrow_hashref 获取返回的行（因为稍后我需要列名）。我将返回的每一行放入一个数组中，并返回对该数组的引用。所以基本上我正在返回对哈希引用数组的引用。像这样的东西：

```
my $sth = $dbh->prepare($query);
$sth->execute();

# Fetch all rows returned as hash references and put each of those
# references into the array @rows
@returned_rows = ();
while ($row =  $sth->fetchrow_hashref()) {
    push(@returned_rows, $row);
}

# Return a reference to the array @rows
# Return a reference to an array of hash references
return \@returned_rows; 
```

如果其中一个字段为空，我得到：

```
Use of uninitialized value in concatenation (.) or string at sqlesl.pl line 49. 
```

这没关系，因为我期待数据库中的空值，但即使我测试 undef，我也会得到同样的错误，这让我认为事情并不完全像 DBI 文档所说的那样：

> fetchrow_arrayref 的替代方法。获取下一行数据并将其作为对包含字段名称和字段值对的哈希的引用返回。空字段作为散列中的 undef 值返回。

这是我用来测试上面代码片段的一段代码。假设 *$rows_ref* 是上面的代码片段返回的内容。

```
@rows = @$rows_ref;
$hash_ref = $rows[0];
%hash = %$hash_ref;
@keys = keys %hash;

foreach $key (@keys) {
    next if (undef($hash{$key}));
    print "$key: $hash{$key}\n";
} 
```

有人对此有一些启示吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T23:00:00.157

`undef`是取消定义其参数的函数。在条件下，您应该`defined`改用：

```
next unless defined $hash{$key}; 
```

# c - 将数组与C中的二维数组进行比较

> ID：16025947
> 
> 赞同：0
> 
> 时间：2013-04-15T22:51:50.967
> 
> 标签：c, arrays

我正在尝试将某个字符数组与二维数组进行比较，但我不确定该怎么做。假设我有以下代码：

```
char colors[10][4] = {"bla", "bro", "red", "ora", "yel", "gre", "blu", "vio", "gra", "whi"};
char name[11] = "red"; 
```

我想看看 name[] 的值是否与二维数组颜色中的任何“行”相同。如果是这样，它需要返回哪一行是相等的。所以在上面的代码中，它会返回一个 2，因为 red 是二维数组中的第二个值。

这是我一直在尝试的：

```
int x, y;
for(x=0; x<10; x++) {
        if (strncmp(colors, name) == 0) {
              break;
    }
} 
```

然后理论上，我可以抓住 x 的值来找出它来自哪一行。显然这是行不通的。：/这里有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T22:54:40.077

我想你忘记了**[x]**：

```
int x;
for(x=0; x<10; x++) {
        if (strncmp(colors[x], name) == 0) {
              break;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T22:56:32.460

您必须索引数组 ( `colors[x]`) 并且不要忘记 的最后一个参数`strncmp`，它是要比较的字符串的长度。改变

```
strncmp(colors,  name) 
```

至

```
strncmp(colors[x], name, strlen(name)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T22:57:52.283

我看到一个可能的错误。您没有以您尝试比较的颜色来索引位置。

```
int x, y;
for(x=0; x<10; x++) {
    if (strncmp(colors[x], name) == 0) {
          printf("Found the color %s", name);
          break;
    }
} 
```

# export - Sqoop 导出可以创建新表吗？

> ID：16025949
> 
> 赞同：10
> 
> 时间：2013-04-15T22:51:59.410
> 
> 标签：export, hdfs, rdbms, sqoop

可以使用 Sqoop 将数据从 HDFS 导出到 RDBMS 表。但似乎我们需要有现有的表。

**是否有一些参数可以告诉 Sqoop 执行“CREATE TABLE”并将数据导出到这个新创建的表？**

如果是，它会与 Oracle 一起工作吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-16T02:18:43.763

恐怕 Sqoop 目前不支持在 RDBMS 中创建表。Sqoop 使用 RDBMS 中的表来获取元数据（列数及其数据类型），所以我不确定 Sqoop 可以从哪里获取元数据来为您创建表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-07T21:24:15.740

您实际上可以通过 sqoop eval 执行任意 SQL 查询和 DDL，至少使用 MySQL 和 MSSQL。我希望它也可以与 Oracle 一起使用。MSSQL 示例：

```
sqoop eval --connect 'jdbc:sqlserver://<DB SERVER>:<DB PORT>;
database=<DB NAME>'  --query "CREATE TABLE..."
--username <USERNAME> -P 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-30T23:32:31.380

我注意到你也使用 Oracle。某些 sqoop 供应商特定的 sqoop 连接器支持这一点，包括 Oracle。Sqoop 的 Oracle 直接连接模式可以选择这样做

[https://sqoop.apache.org/docs/1.4.6/SqoopUserGuide.html#_create_oracle_tables](https://sqoop.apache.org/docs/1.4.6/SqoopUserGuide.html#_create_oracle_tables)

> 24.8.5.4。创建 Oracle 表
> 
> -Doraoop.template.table=模板表名
> 
> 通过复制 TemplateTableName 的结构和数据类型来创建 OracleTableName。TemplateTableName 是执行 Sqoop 命令之前存在于 Oracle 中的表。

附言。您必须使用 --direct sqoop 导出选项来激活 sqoop 直接模式 = 'Data Connector for Oracle and Hadoop'（又名 OraOOP - 旧名称）。

# url - 将老式查询字符串重写为现代 cakephp URL

> ID：16025957
> 
> 赞同：2
> 
> 时间：2013-04-15T22:53:17.123
> 
> 标签：url, cakephp, query-string, routes

恳求你的放纵。我已经寻找答案并尝试了很多东西，所以我现在谦虚地转向这里寻求帮助。应该很简单：我正在迁移到 CakePhp，我想将我的旧查询字符串 (action=show&id=2) 重定向到 groovy cake URL (/Feature/view/2)。

我在 webroot 的 .htaccess 文件中试过这个：

```
RewriteCond %{QUERY_STRING} ^action=show&id=([0-9]+)$
RewriteRule /Features/view/%1? [R,L] 
```

没爱。我也试过：

```
RewriteRule action=show&id=([0-9]+) /Features/view/$1 [L] 
```

没爱。

我尝试了 Cakephp 的 routes.php ：

```
Router::connect('index.php?action=show&id=([0-9]+)',array('controller' => 'features', 'action' => 'view', 'id' => $1)); 
```

但是我没有看到任何证据表明可以在 routes.php 中以这种方式使用正则表达式，所以这实际上只是在祈祷。

有可能做到这一点。正确的？感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T02:55:53.107

我认为你可以在 router.php 中做到这一点！

也许，你可以逃脱：

```
Router::connect('?action=:action&id=:id', 
    array(
        'controller' => 'myController', 
        'action' => 'myAction',
    ), 
    array(
        'action' => '[a-zA-Z]+',
        'id' => '[0-9]+',
    )
); 
```

或者（可能更好）一系列更具体的形式，如：

```
Router::connect('?action=show&id=:id', 
    array(
        'controller' => 'features', 
        'action' => 'view',
    ), 
    array(
        'id' => '[0-9]+',
    )
); 
```

在这种情况下，`action`并且`id`可以`$this->request->params`在 myController 中使用（对于像这样的标准`id`，甚至可能有自动魔法来帮助！）

虽然我不确定路由元素（：foo）是否会像这样获取 GET 参数。

或者，无论如何，您都可以将所有内容发送到一个控制器，并且您应该会发现 GET 参数列在 中`$this->request->params['url']`，因此您可以将控制器中的所有内容路由（我猜是到其他控制器）。

无论哪种方式听起来都不太好，但我知道您想保持一些旧版网址运行！

# qt - QML：如何删除使用 Qt.createQmlObject 创建的对象？

> ID：16025962
> 
> 赞同：7
> 
> 时间：2013-04-15T22:53:33.610
> 
> 标签：qt, qml

我在 QML 代码中创建了一些对象

```
Qt.createQmlObject (...) 
```

如何删除/移除这些对象？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-16T02:34:33.583

```
something = Qt.createQmlObject (...);
something.destroy(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-04T17:27:21.723

看看这篇文章： [QML 中的动态对象管理，](http://qt-project.org/doc/qt-4.8/qdeclarativedynamicobjects.html) 尤其是这一部分：

> 请注意，在该对象内的对象上调用 destroy() 是安全的。对象在调用 destroy() 时不会被销毁，但会在该脚本块结束和下一帧之间的某个时间被清理（除非您指定了非零延迟）。

# javascript - 输入值不会更新

> ID：16025963
> 
> 赞同：2
> 
> 时间：2013-04-15T22:53:43.587
> 
> 标签：javascript, ajax, jquery, input

好的，我一直试图让这个脚本工作，但我就是不知道出了什么问题。我试图让 tinyMCE 使用 jquery 对话从 2 个字段中获取输入并以特定格式输出。这是我的 tinyMCE 插件代码：

```
(function() {
tinymce.create('tinymce.plugins.RMFtooltip', {
    init : function(ed, url) {
        ed.addButton('RMFtooltip', {
            title : 'ToolTip',
            image : url+'/RMFtooltipbutton.png',
            onclick : function() {
                i = jQuery('<div title="Create your tooltip" ></div>');
               /*jQuery.get(url+'/ajax/form.html', function(data) {
                  i.html(data);
                });*/
                i.load(url+'/ajax/form.html');
                i.dialog({
                    autoOpen: true,
                    draggable: false,
                    resizable: false,
                    modal: true,
                    buttons: {
                        "OK": function() {
                            RMFtooltip_text = jQuery("#RMFtooltip_text").val();
                            RMFtooltip_tip = jQuery("#RMFtooltip_tip").val();
                            if (RMFtooltip_text != null && RMFtooltip_text != '' && RMFtooltip_tip != null && RMFtooltip_tip != ''){
                                ed.execCommand('mceInsertContent', false, '[tooltip tip="'+RMFtooltip_tip+'"]'+RMFtooltip_text+'[/tooltip]');
                            }
                            jQuery( this ).dialog( "close" );
                        },
                        Cancel: function() {
                            jQuery( this ).dialog( "destroy" );
                        }
                    }
                });
... 
```

现在，我第一次单击 tinyMCE 中的按钮时一切正常，但如果我再次单击它，无论输入是什么，我都会得到相同的输出。例如：我在文本中输入 foo 并在提示中输入 bar 并单击确定，一切正常（我得到“[tooltip tip="bar"]foo[/tooltip]"），然后我再次使用它，这次我输入文本中的废话和提示中的蓝色，但我仍然得到相同的输出（“[tooltip tip="bar"]foo[/tooltip]"）。似乎它没有重新读取输入...请帮助

* * *

PS：我正在使用 ajax 来获取表单（因为这是一个 js 文件），我可以在此处附加它，但它似乎对我来说并不重要......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T00:16:01.077

每次关闭对话框时都需要清空对话框，因为每次调用 click 函数时 jQuery 都会在后台继续创建新的 html。您将永远不会再看到这个 html，但它就在那里，并且正在使用表单元素的 ID 干扰您的调用。

要解决此问题，只需在每次通话后清空对话框

```
//...
buttons: {
        "OK": function() {
            RMFtooltip_text = jQuery("#RMFtooltip_text").val();
            RMFtooltip_tip = jQuery("#RMFtooltip_tip").val();
            if (RMFtooltip_text != null && RMFtooltip_text != '' && RMFtooltip_tip != null && RMFtooltip_tip != ''){
                ed.execCommand('mceInsertContent', false, '[tooltip tip="'+RMFtooltip_tip+'"]'+RMFtooltip_text+'[/tooltip]');
            }
            jQuery( this ).dialog( "close" );
            jQuery(this).empty(); //Add this

        },
            Cancel: function() {
                jQuery( this ).dialog( "destroy" );
                jQuery(this).empty(); //Add this
            }
    }
//... 
```

# ios - AF网络和缓存

> ID：16025964
> 
> 赞同：3
> 
> 时间：2013-04-15T22:53:46.397
> 
> 标签：ios, objective-c, afnetworking

我正在下载要缓存的 WMS 切片。我正在使用包含 NSURLCache 的 AFNetworking。来自服务器的响应在标头中不包含 Cache-Control 协议。

我向服务器人员询问了这一点，并且不熟悉服务器端缓存控制。目前，他正忙于其他工作。我是否需要他来实现缓存控制，或者我可以强制 NSURLCache 在没有响应头信息的情况下缓存它们？

NSURLCache 是持久的吗？如果是这样，我该如何清除缓存？每个会话都需要检索磁贴，并且不能持久化。

或者我应该创建自己的缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:04:30.070

当您激活 NSURLCache 时，它​​将适用于任何基于 NSUrlRequest 的请求（如 AFNetworking）。激活 NSURLCache 的那一刻，您可以指定它的最大大小。您还可以通过调用 removeAllCachedResponses 或 removeCachedResponsesForRequest 方法来清除缓存。如果服务器没有发送任何缓存控制信息，那么缓存仍然会缓存文件。如果您想完全控制缓存，您可以创建自己的缓存。如果您想查看示例代码，请查看[https://github.com/evermeer/EVURLCache](https://github.com/evermeer/EVURLCache)

# ios5 - 如何在没有自动布局的情况下在 iOS 中自动调整视图大小

> ID：16025965
> 
> 赞同：0
> 
> 时间：2013-04-15T22:53:49.383
> 
> 标签：ios5, ios6, interface-builder, autolayout, autosize

我有一个我无法理解**调整**视图大小的问题。我的部署目标是*iOS 5.0*，所以我`auto layout`在 interface builder 中禁用以使其与*iOS 5.0*兼容。视图不会自动调整大小。下面是一个例子：

**界面生成器快照：**

![在此处输入图像描述](https://i.stack.imgur.com/RCVUi.png)

**4英寸屏幕：**

![在此处输入图像描述](https://i.stack.imgur.com/iobaG.png)

**3.5寸屏幕*（有问题）*：**

![在此处输入图像描述](https://i.stack.imgur.com/yQ9dM.png)

如您所见，视图底部的按钮离开了屏幕。背景图像也不会自动调整大小。我不明白如何解决这个问题。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T00:33:39.400

欢迎来到预自动布局世界！您必须设置自动调整大小的“弹簧和支柱”，以便底部的东西附加到超级视图的底部而*不是*顶部。因此，支柱到底部，弹簧到顶部。这样，随着超级视图变得越来越小，底部的东西会随着底部移动。

您*也可以*在代码中重新定位这些内容，但在这种情况下没有必要。

这是我书中关于自动调整大小的部分：

[http://www.aeth.com/iOSBook/ch14.html#_autoresizing](http://www.apeth.com/iOSBook/ch14.html#_autoresizing)

关于超级视图和未调整大小的背景图像的部分是另一回事。这是 UIViewController 的视图吗？如果是这样，那么如果您正确地将 UIViewController 放入视图控制器父子层次结构中，它将由其父级*调整*大小。但是您没有显示任何代码，因此不知道这个视图可能是什么或它应该如何进入界面。

# iphone - 如何将字体嵌入到 UIWebview 中显示的 PDF 文件中？

> ID：16025966
> 
> 赞同：0
> 
> 时间：2013-04-15T22:53:49.790
> 
> 标签：iphone, ios, objective-c, pdf, uiwebview

我正在打开从服务器下载到 UIWebview 的 pdf 文件。但是，pdf 可以正确打开到 web 视图中，但控制台上显示错误：

```
LLALCK+MyriadPro-SemiboldIt: FT_Select_Charmap failed: error 6 
```

经过一番研发，我发现这个问题与字体有关。

我想知道如何在pdf中嵌入字体，以便消除上述错误。我尝试在 Mac 上安装 font.otf 文件并尝试在模拟器上运行 pdf 显示，但它仍然给出相同的错误。

以下是我用来在 uiwebview 中显示 pdf 的代码：

```
NSData* data = [NSData dataWithContentsOfFile:path];

[webView
 loadData:data
 MIMEType:@"application/pdf"
 textEncodingName:@"UTF-8"
 baseURL:nil]; 
```

请帮忙。

严重卡住！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T23:51:58.843

问题是您的 PDF 引用了设备没有的字体。您可以尝试将此字体添加到您的捆绑包中，但这在几个关键领域可能会出现问题。首先，我不确定 WebView 是否可以读取用于 PDF 的自定义字体；但更重要的是，其次，您可能没有在您的应用程序中嵌入该字体的许可证。

我建议从不同的角度解决这个问题。您的 PDF 是如何在服务器上创建的？在您的 PDF 中使用安全字体（在[此处](http://iosfonts.com/)查看 iOS 字体的完整列表），或者使用 PDF 的字体嵌入功能并使用它。在 PDF 中嵌入某些字形时，字体通常带有更宽松的许可证。

# r - 通过分组变量为每一行插入一个计数字段

> ID：16025967
> 
> 赞同：0
> 
> 时间：2013-04-15T22:53:53.267
> 
> 标签：r

我有一个数据集，其中包含分组和排序（按等级）的观察结果。我想添加第三个变量，它是每个分组变量的观察次数的计数。我知道对变量进行分组和计数的方法，但我找不到将这些计数重新插入到具有更多行的原始数据集中的方法。我想在下面的示例表中获取变量 C。

```
A B C
1 1 3 
1 2 3
1 3 3
2 1 4
2 2 4
2 3 4
2 4 4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T06:17:23.490

这是一种`data.table`使用 的方法`.N`，它在“data.table”的帮助文件中进行了描述，因为*.N 是一个长度为 1 的整数，包含组中的行数。*

```
> library(data.table)
> DT <- data.table(A = rep(c(1, 2), times = c(3, 4)), B = c(1:3, 1:4))
> DT
   A B
1: 1 1
2: 1 2
3: 1 3
4: 2 1
5: 2 2
6: 2 3
7: 2 4
> DT[, C := .N, by = "A"]
> DT
   A B C
1: 1 1 3
2: 1 2 3
3: 1 3 3
4: 2 1 4
5: 2 2 4
6: 2 3 4
7: 2 4 4 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T22:57:49.097

这是一种使用方法`ave`：

```
DF <- within(DF, {C <- ave(A, A, FUN=length)})
#   A B C
# 1 1 1 3
# 2 1 2 3
# 3 1 3 3
# 4 2 1 4
# 5 2 2 4
# 6 2 3 4
# 7 2 4 4 
```

# php - 在 Amazon 的 S3 上批量恢复以前的版本

> ID：16025971
> 
> 赞同：4
> 
> 时间：2013-04-15T22:54:25.887
> 
> 标签：php, python, amazon-web-services, amazon-s3, boto

所以。我是个白痴。星期五，我以编程方式覆盖了一个存储桶中的大约 14,000 个文件，直到今天才意识到这一点。幸运的是，这些文件是版本化的。不幸的是，我找不到一个很好的清晰示例来说明如何编写脚本来遍历文件，然后恢复第二个最新版本。我一直在浏览 Boto 文档，我看到了如何删除版本，但不恢复。如果有人能给我一些代码来展示如何恢复特定版本，我很乐意使用 php 或 python。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T01:32:36.820

这需要您小心谨慎。我不想尝试为您提供完整的解决方案，因为我没有时间彻底测试它，也不想做出任何承诺。

但是，也许这会有所帮助。

首先，假设我们要在 boto 的特定存储桶中找到特定密钥的所有版本。我们可以这样做：

```
import boto

conn = boto.connect_s3()
bucket_name = 'mybucket'
key_name = 'mykey'

bucket = conn.lookup(bucket_name)
for k in bucket.list_versions(key_name):
    print(k.name, k.version_id, k.last_modified) 
```

这应该打印出如下内容：

```
mykey TyvPH4UUD4zRnGhmmLH6HGHOcOnsJgQG 2013-03-03T19:10:39.000Z
mykey IxNYlmoyDsOSspR6SwuGVNM7Nr83ZTSI 2013-03-03T15:11:06.000Z
mykey XVI9_yxQYU6B2KXQv0VLj7luYOGwWCoh 2013-03-03T15:10:55.000Z
mykey qh0zjxWjRC8WvXQc_RmvVdCJ.S3gF2ui 2013-03-03T15:07:46.000Z 
```

假设我们要“恢复”最旧的文件。为此，我们实际上将所需版本的对象复制回自身。在 boto 中，它看起来像这样：

```
bucket.copy_key(new_key_name=key_name, src_bucket_name=bucket_name, src_key_name=key_name, src_version_id='qh0zjxWjRC8WvXQc_RmvVdCJ.S3gF2ui') 
```

这会将指定版本的密钥复制回同一存储桶中的自身。

我认为在松开脚本之前，您必须对此进行一些探索并进行大量测试。例如，您可以尝试将所需版本的对象复制到另一个存储桶中，并在复制到所需的存储桶之前查看您是否获得了所需的内容。

希望这可以帮助。

# java - 区分线程，即使它们具有相同的名称

> ID：16025977
> 
> 赞同：0
> 
> 时间：2013-04-15T22:55:16.750
> 
> 标签：java, multithreading

我创建了一个非常简单的 Java 游戏，其中包含玩家和随机移动的机器人。玩家可以通过按下按钮将机器人添加到地图中，从而为机器人创建一个新线程。

所以它看起来像这样......

```
Thread newBotThread = new Thread(new Runnable(){

            public void run(){ 
```

如果我多次按下按钮，会创建几个机器人，它们是否都在线程名称“newBotThread”下运行？我正在添加允许玩家与机器人交互的功能，有没有办法区分线程，即使它们都具有相同的名称？所以我可以停止一个机器人，而其他机器人仍然继续？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T23:05:03.013

您可以将它们添加到 a`Collection`中，例如`ArrayList`：

```
ArrayList<Thread> botThreads = new ArrayList<Thread>();
...
botThreads.add(new Thread(new Runnable(){ 
... 
```

当然，您应该`botThreads`在按钮事件处理程序之外声明其他类可以访问的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T23:02:12.687

简短的回答：有一个方法 Thread#setName(String) 和一个构造函数 Thread(String) 设置线程的名称，并且必须在调用 start() 方法之前设置。

长答案：您很可能不应该使用此名称来控制您的机器人。我建议创建一个实现 Runnable 的类，其中包含诸如 go()、stop()、continue() 或任何您需要的方法，并且每当您创建这些类的新实例时，您将引用保存在某处（可能是 Map 或 BotManager或其他），而且您可能应该使用 Executor 执行它们。只是我的观点

# python - 如何检查 str int 列表和元组？

> ID：16025980
> 
> 赞同：-4
> 
> 时间：2013-04-15T22:55:34.417
> 
> 标签：python, string, list, class, python-3.x

有一个文件包括 str int 列表和元组。我想把它们放在不同的列表中。

这是我的示例代码：

```
for word in file:
    if type(word) == int:
        ......
    if type(word) == list:
        ...... 
```

我可以检查 int 使用 type(word) == int

但我不能在我的代码中使用 'type(word) == list'。

那么，如何检查文件是“列表”还是“元组”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T23:03:30.693

这应该工作 -

```
for word in file:
    if isinstance(word, int):
        ...
    elif isinstance(word, list):
        ...
    elif isinstance(word, tuple):
        ...
    elif isinstance(word, str):
        ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T23:14:11.377

如果没有可以利用的模式来预测文件的每一行将代表什么，那么您可以提前尝试这个快速而肮脏的解决方案：

```
for word in file:
    # Read the word as the appropriate type (int, str, list, etc.)
    try:
        word = eval(word) # will be as though you pasted the line from the file directly into the Python file (e.g. "word = 342.54" if word is the string "342.54").  Works for lists and tuples as well.
    except:
        pass # word remains as the String that was read from the file

    # Find what type it is and do whatever you're doing
    if type(word) == int:
        # add to list of ints
    elif type(word) == list:
        # add to list of lists
    elif type(word) == tuple:
        # add to list of tuples
    elif type(word) == str:
        # add to list of strs 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-15T22:58:19.297

你可以使用类型

```
from types import *
type(word) == ListType
type(word) == TupleType 
```

作为您的问题，您可以简单地编码为：

```
>>> from types import *
>>> file = [1,"aa",3,'d',[23,1],(12,34)]
>>> int_list = [item for item in file if type(item)==int]
>>> int_list
[1, 3] 
```

# php - PHP Explode 删除“额外”文本

> ID：16025981
> 
> 赞同：0
> 
> 时间：2013-04-15T22:55:38.770
> 
> 标签：php, explode

假设我在网页上有以下 URL，我如何利用该`explode()`功能只给我 ID，而不是 ID 后面的 URL 的其余部分？

```
file.php?id=12345&foo=bar 
```

我可以得到ID，但总是有以下“ `&foo=bar`”。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-15T22:58:33.360

如果您需要处理有效的 URL，您可以使用

```
parse_url 
```

[parse_url 文档](http://nc1.php.net/parse_url)

将 URL 分解为不同的部分（SCHEME、HOST、PORT、USER...）

然后，使用

```
parse_str 
```

[parse_str 文档](http://nc1.php.net/parse_str)

就`QUERY`部分而言，为了检索包含所有参数的数组。然后，您可以捕获所需的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T23:01:37.480

```
parse_str($_SERVER['QUERY_STRING']);
echo $id; 
```

`parse_str`将从查询字符串变量创建 PHP 变量。 [http://www.php.net/manual/en/function.parse-str.php](http://www.php.net/manual/en/function.parse-str.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T22:59:58.820

如果它是一个完整的 URL，您可以使用它`parse_url()`来获取查询字符串部分。

如果它只是一个片段，你可以使用`explode()`它来获取它，那么`parse_str()`：

```
list($path, $qs) = explode('?', $url, 2);
parse_str($qs, $args);
echo $args['id']; 
```

`2`告诉将`explode()`字符串分成最多 2 个部分（`?`在这种情况下，在 之前和之后）。

# c# - 使用外部列表填充 ComboBox

> ID：16025983
> 
> 赞同：0
> 
> 时间：2013-04-15T22:55:49.200
> 
> 标签：c#, string, data-binding, external

所以我有一个程序和一个 API。在我的 API 中，我存储了一个 String 类型的列表，其中包含我希望在实际程序的 ComboBox 中显示的所有值。

我的 ComboBox 被命名为： Cloud_ComboBox 并且在我的 API 中的“Cloud”类中

我的列表名为：CloudType

我不知道如何实现这一点，我已经在网上看过但还没有找到解决方案。

谢谢！

编辑：我已经尝试过但没有成功：

在程序内：

```
private void Cloud_ComboBox_DropDownOpened(object sender, EventArgs e)
    {
        Cloud_ComboBox.ItemsSource = CloudType;
    } 
```

在 XAML 中：

```
ItemsSource="{Binding Path=CloudType}" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T23:06:19.887

第一种是一种非常奇怪的方法，如果它不起作用，我不会感到惊讶。您应该在窗口初始化时设置一次 ItemsSource。

如果 DataContext 设置正确，第二个应该可以工作。如果没有看到更多代码，可能很难说出让 binging 工作的最佳方式。

# model-view-controller - Grails 生成一个 zip 文件供用户下载

> ID：16025984
> 
> 赞同：0
> 
> 时间：2013-04-15T22:55:58.617
> 
> 标签：model-view-controller, grails, controller, grails-orm

我是**grails的****新手**，目前正在开发一个与用户上传图片的网络应用程序项目。用户可以使用提示列表创建“搜索”。每个“提示”都是参与者的目标（例如：上传您最喜欢的糖果的图片。）基本上，网络应用程序是摄影师在社交上分享他们的作品的“寻宝”工具。

 **现在，我无法尝试在我的用户控制器中编写一个函数来生成一个包含用户上传的所有图片的 zip 文件。这就是我的控制器功能目前的样子。我用这个我发现的例子开始。 [生成一个 zip 文件。](http://thegrailstrail.blogspot.com/2012/07/generating-zip-files-from-multiple.html)

```
def downloadAlbum(){

    ByteArrayOutputStream baos = new ByteArrayOutputStream()
    ZipOutputStream zipFile = new ZipOutputStream(baos)

    //Instance of a user domain class
    def userInstance = User.findByLogin(auth.user())

    //pictures are uploaded to a prompt and stored as a photoInstance
    //this line of code gets the actual file stored as byte[]
        photoInstance.myFile = image.getBytes()

    //select all photos that belong to the user and store them into a list
    def photoInstanceList = userInstance ? Photo.findAllByMyUser(userInstance) : []

    //Mapping
    [userInstance: userInstance, photoInstanceList: photoInstanceList]      

      photoInstanceList.each {photo ->
        if (photoInstance.myFile != "") {
          File file = new File(photoInstance.myFile)
          zipFile.putNextEntry(new ZipEntry(Photo.title+".jpeg"))
          file.withInputStream { i ->

            zipFile << i

          }
          zipFile.closeEntry()
         }
        }
        zipFile.finish()
        response.setHeader("Content-disposition", "filename=\"${login}.zip\"")
        response.contentType = "application/zip"
        response.outputStream << baos.toByteArray()
        response.outputStream.flush()   

} 
```

然后，我在用户视图中使用此代码生成一个链接，该链接调用用户控制器中的函数。我接近了吗？我的代码中是否缺少某些部分？

顺便说一句，这是我在 Stack Overflow 上写的第一个问题。感谢您花时间阅读这篇文章。如果有什么不够清楚，请在哪里可以改进这个问题。我正在使用 grails 2.1.1

感谢您的时间！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T23:43:05.610

如果上面的代码已按原样复制在这里，我们不应该使用`photo.title`而不是`Photo.title`在下面的行中

`zipFile.putNextEntry(new ZipEntry(Photo.title+".jpeg"))`**

# jquery - jQuery 将字符串作为函数执行

> ID：16025986
> 
> 赞同：3
> 
> 时间：2013-04-15T22:56:09.130
> 
> 标签：jquery, string, function

我想将一个 jQuery 命令（以字符串的形式）从服务器端 JS 传递到客户端 js。这允许我从服务器端修改客户端 DOM 的东西。

功能：

```
$("textArea").attr("disabled","true"); 
```

我想做的事：

```
$['$("textArea").attr("disabled","true")'](); 
```

引发错误。想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-15T23:07:21.490

您可以在客户端使用 eval 函数：

这将立即执行您的 javascript：

```
eval('$("textArea").attr("disabled","true")'); 
```

但是，正如评论中所说，要小心你所做的，因为这是一种非常粗糙的方法。

此外，就安全性而言，您并没有真正获得任何好处，因为仍然可以打开开发工具并删除 disabled 属性

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-19T18:38:06.020

或者，您可以将字符串分解为从服务器传递的多个字符串。例如：

```
// variables passed from the server
selector = 'textArea';
method = 'attr';
arguments = ['disabled', 'true']; 
```

然后你可以这样评估它：

```
$(selector)[method](arguments[0], arguments[1]); 
```

当然，如果参数的数量需要是动态的，它会变得有点棘手。

# html - CSS 内容 div 展开到页面底部

> ID：16025987
> 
> 赞同：3
> 
> 时间：2013-04-15T22:56:09.900
> 
> 标签：html, css, expand

好的，我已经尝试了 StackOverflow 中提供的关于这个问题的很多解决方案，但没有一个有效。我想这是一件棘手的事情，需要一个棘手的解决方案。

据我所见，这种“占据”身体的东西每个问题都不同，所以我想我在这里遇到了不同的问题。

我真的需要帮助，伙计们。

这是我的问题：http: [//jsfiddle.net/Ff49Z/5/](http://jsfiddle.net/Ff49Z/5/)

这就是我想要的：当“包装器” div 不满足主体时，我希望 div 无论如何都扩展到它的底部。所以，在小提琴中，我想要实现的不是我的布局上的灰色点。如您所见，包装器的高度为 100%（这是 SO 中针对此问题提供的一种常见解决方案），但没有帮助。

正是这个 div 不适合包装器：

```
div#middle {
    padding:10px;
    margin:0 auto;
    height: 100%;
} 
```

顺便说一句，当过度滚动时，页脚棒和包装滚动。这是期望的行为，并且它完美无缺。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T23:16:17.093

我只是补充说：

```
div#middlewrap {
    width:100%;
    position:absolute;
    margin-top:60px;
} 
```

并按您的要求工作。**编辑：这是错误的 - 下面的正确答案**

* * *

当我决定从头开始重写 css 时，我正要放弃，结果比我预期的要简单。我将您的 CSS 简化为骨骼，并`overflow-y:auto;`为中间包装添加了一些酷炫的内容，`position:fixed;`并为页眉和页脚添加了一些甜美的元素。然后我调整了`#middle`内容 div的填充，并`height:100%;`在 body 和 html 中添加了一个（以便 body 的每个子项都可以成功设置为`height:100%;`），结果如下：

```
body, html {
    margin:0;
    height:100%;
}
div#headerwrap, div#footerwrap {
    position: fixed;
    left: 0;
    right: 0;
}
div#headerwrap {
    top: 0;
    height:64px;
    background-color: red;
}
div#middlewrap {
    height:100%;
    overflow-y:auto;
    background-color: blue;
}
div#middle {
    padding-top:70px;
    padding-bottom:35px;
}
div#footerwrap {
    bottom: 0;
    height:32px;
    background-color: green;
} 
```

这就是您需要的所有 CSS。很酷吧？
[**这是FIDDLE**](http://jsfiddle.net/Ff49Z/11/)
注意：我尊重你的语法，这也是正确的，但没有必要在你的 css 中的每个#ID 之前写 DIV。删除这些选择器将显着降低您在较大项目中的 css 文件重量。
干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T23:30:50.973

将所有父元素设为`height:100%`：

```
body, html, body>div#middlewrap {
    height: 100%;
}
div#middle {
    min-height:100%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T23:13:07.000

仅使用 CSS 是不可能的。需要涉及javascript。取客户端高度 - (header + footer) = 内容的最小高度

使用 % height 不起作用，因为父级没有定义高度。

# c# - 缓冲区是从共享堆中为大小为 64 KB 的进程分配的吗？

> ID：16025990
> 
> 赞同：5
> 
> 时间：2013-04-15T22:56:21.473
> 
> 标签：c#, winapi, heap-memory, pinvoke

有人愿意为那些对非托管代码和复杂的内存管理一无所知的人翻译这句话吗？

> 此缓冲区的存储空间是从大小为 64 KB 的进程的共享堆中分配的。缓冲区的最大大小将取决于堆使用情况。

它出现在几十个 MSDN 页面上，例如[WriteConsole](http://msdn.microsoft.com/library/ms687401.aspx)，但我找不到任何 API 可以计算这种数组在爆炸之前允许的最大大小，凭经验我可以告诉它在 61 到 62.5 KB 之间（通过调用 64 , 63, 62 等直到它停止设置`DllImport`) `SetLastError`。是否有类似`GetTotalHeapSize`的东西（如果它不是独立于 Windows 版本、平台架构、默认值等的 const 64KB）和类似的东西`GetCurrentHeapInUse`？如何获得我可以传递给该方法和其他 P/Invoked 方法的最大字节数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T23:48:48.367

这不是堆的工作方式。他们不跟踪您可以进行的最大分配。这是不可预测的，因为堆可能会变得碎片化。空闲块可以与分配的块交错。例如，释放一个小的分配可能会突然使可用空间增加一倍。非托管堆没有托管堆的优势，它们不能被压缩。尽管 .NET 大对象堆也有这个问题。没有测量最大可用空间的功能，不可能使该线程安全。

如果你不能，你只能*尝试*分配和处理后果。

# sql - SQL 替换表格行中的逗号

> ID：16025999
> 
> 赞同：1
> 
> 时间：2013-04-15T22:57:37.327
> 
> 标签：sql

我有表格`test( ID Numeric(11,0), report varchar(255) )` 和数据如下

```
1   ,Age,,,,,,family_status,,,,,,
2   ,,,,,,,,retaliation,hostile environment,,,,
3   ,,,,,,,,,,,,,
4   ,,,,,,,,retaliation,,,,,
5   ,,,,,,,,,hostile environment,,,,
6   ,Age,,,,,,,,,,,,
7   ,,,,national_origin,,,,,,,,,
8   Sex,,,,,,,,,,,,,
9   ,,,,national_origin,,disability,,retaliation,,,,,
10  Sex,,,,,,,,retaliation,,,,,
11  ,,,,,,,, 
```

我想通过替换或使用任何其他数据来删除额外的逗号来更新此表，以便数据看起来

```
1   Age,family_status
2   retaliation,hostile environment
3   
4   retaliation
5   hostile environment
6   Age
7   national_origin,
8   Sex
9   national_origin,disability,retaliation
10  Sex,retaliation
11 
```

我尝试使用以下语句，但不确定如何循环，以便检查并删除所有逗号

```
UPDATE table test SET report = replace(report , ',,', ',') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T23:17:00.890

如果您只是将其作为一次性任务（而不是您希望重复使用的脚本化过程），您总是可以重复运行此查询，直到更新 0 行

```
UPDATE table test SET report = replace(report , ',,', ',')
WHERE report like '%,,%' 
```

如果您需要一遍又一遍地执行此操作，或者将其放入程序中，我建议您使用您的程序（非 SQL 代码）在您有更好的文本操作命令的地方进行替换。

如果您对此不满意，请查看我写的关于替换字符串中重复空格的类似问题的[这篇博客文章。](http://improvingsoftware.com/2011/03/21/replacing-multiple-spaces-in-a-string-with-a-single-space-in-sql/)