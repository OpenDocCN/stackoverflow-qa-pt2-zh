# StackOverflow 问答 14507000-14507999

# sql - 如何通过函数的结果（总和）订购选择？

> ID：14507005
> 
> 赞同：1
> 
> 时间：2013-01-24T17:17:18.210
> 
> 标签：sql, informix, 4gl

我有一张有一堆列的表。三列是整数，分别标记为消费、消费 2 和消费 3。

我想选择表格的每一整行，但按三个消费字段的总和降序排列选择。

我可以按每个消费列单独订购

```
order by consumption3 desc, consumption 2 desc, consumption desc 
```

但我更愿意对这些值求和，然后按该求和值排序。

我也可以编写一个 4GL 程序来做到这一点，但我试图在 SQL 中解决这个问题。

如果我这样做，

```
select  *
from    ws_bill
order by sum(consumption) + sum(consumption2) + sum(consumption3) 
```

然后 Informix 的 SQL 想要列表中的每一列`group by`。

有没有更简单的方法可以做到这一点，还是我应该只编写程序？

在 Ubuntu 12.04 上运行的 Informix SE/4GL 版本

```
ics@steamboy:~/icsdev$ dbaccess -V
DB-Access Version 7.25.UC6R1 
Software Serial Number ACP#J267193
ics@steamboy:~/icsdev$ fglpc -V

Pcode Version 732-750

Software Serial Number ACP#J267193
ics@steamboy:~/icsdev$ 
```

这是表格：

```
create table "ics".ws_bill 
  (
    yr char(2),
    bill_no integer,
    bill_month smallint,
    due_date date,
    tran_date date,
    prev_reading integer,
    curr_reading integer,
    consumption integer,
    consumption2 integer,
    consumption3 integer,
    water_charge money(10,2),
    sewer_charge money(10,2),
    other_charge decimal(10,2),
    curr_bal money(10,2),
    estimated char(1),
    prev_due_date date,
    time_billed datetime year to second,
    override char(1),
    curr_bal_save money(10,2)
  );
revoke all on "ics".ws_bill from "public";

create unique index "ics".ws_indx on "ics".ws_bill (bill_no,yr,
    bill_month); 
```

* * *

这是本文接受的答案中表示的主要光标。

```
declare wb_cp cursor for
select  b.yr,b.bill_no,
        sum(b.consumption + b.consumption2 + b.consumption3) as adj_tot
into    cons_rec.* #defined record variable
from    ws_bill b
where   b.yr >= start_yearG and b.yr <= end_yearG
group   by b.yr, b.bill_no
order by adj_tot desc, b.yr desc, b.bill_no desc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:38:19.643

您正在谈论对三列求和。这是一个简单的表达式（消费 + 消费 2 + 消费 3）。您不需要 sum(...) 函数，除非您想对要组合在一起的多行求和。

所以，你需要这些方面的东西：

```
select bill_no, bill_month, ..., (consumption + consumption2 + consumption3) as tot_sum
  from ws_bill
 order by tot_sum desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:19:45.017

```
select  *, (sum(consumption) + sum(consumption2) + sum(consumption3)) as tot_sum
from ws_bill
order by tot_sum desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T17:34:19.527

你用的是什么版本的informix？假设您的表具有唯一标识符并且您的 informx 版本支持子查询，则尝试：

```
SELECT *
FROM ws_bill w 
   JOIN (
      SELECT id, sum(consumption) + sum(consumption2) + sum(consumption3) as tot
      FROM ws_bill
      GROUP BY id
   ) w2 on w.id = w2.id
ORDER BY tot DESC 
```

祝你好运。

# javascript - 使用 jQuery 动态创建 hello world 页面不起作用

> ID：14507008
> 
> 赞同：0
> 
> 时间：2013-01-24T17:17:24.023
> 
> 标签：javascript, jquery, html

## 编辑

我不明白为什么人们在没有实际尝试问题的情况下投反对票。我将重写这个问题，试图更清楚地解释我自己。对不起，如果我错误地解释了我自己。

我有一个简单的 hello world 页面：

```
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

</head>
<body>
    <div id="c">

        <div data-role="page">
            <div data-role="header"> <h1 style="font-size: 150%;"> My Title </h1></div>
            <br />  <br />

            <div data-role="Number">
                <p>
                    <h1 style="text-align: center; font-size: 310%;">
                        Hello Wold</h1>
                </p>
            </div>            
        </div>

    </div>
</body>
</html> 
```

## 它呈现如下：

![在此处输入图像描述](../Images/4d244076389fe932669c55ff30c212a8.png)

（这就是为什么我标记它 jquery 我想要 jquery 的外观和感觉）

请注意页面呈现良好。问题是我想动态放置那个html。我在 ajax 的帮助下获得了以下内容：

```
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

</head>
<body>
    <div id="c">
        <!-- Content will be replaced -->               
    </div>

<script type="text/javascript">

    $.ajax({
        url: 'someUrl',
        success: function (result) {

            // result should equal =
            result= '<div data-role="page"> <div data-role="header"> <h1 style="font-size: 150%;"> My Title </h1></div> <br /> <br /> <div data-role="Number"> <p> <h1 style="text-align: center; font-size: 310%;"> Hello Wold</h1> </p> </div> </div>';
            $('$c').append( result );

        } 
    });

</script>

</body>
</html> 
```

如果我运行，什么都不会渲染！我想知道哪个 jquery 函数负责为 html 设置样式。一旦我的 ajax 响应返回，我想再次执行它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T17:19:18.463

我认为真正的问题是你不能`<script>`在`<html>`. 试着把它移到右边`</body>`。

`setTimeout`除非你真的希望它在运行你的代码之前多等一秒钟，否则没有必要。

重要的是您需要在元素*之后运行代码。*`<div id="c">`这可能意味着就在它之后，或者在`<body>`. 在您的情况下，您的页面很简单，“紧随其后”与“结束`<body>`”相同。

尽管如此，你需要有`<script>`内部`<html>`，最好是内部`<head>`或`<body>`（我已经看到它放在中间时可以工作`<head>`，`<body>`但我不建议这样做。

作为一个建议，既然您使用的是 jQuery，那么您不妨利用它的 DOM 操作。不要使用`DOMElement.innerHTML =`，而是尝试使用 jQuery 选择器来按 ID ( `#`) 及其`.html()`方法进行选择：

```
var htmlContent = '<div data-role="page"> <div data-role="header"> <h1 style="font-size: 150%;"> My Title </h1></div> <br /> <br /> <div data-role="Number"> <p> <h1 style="text-align: center; font-size: 310%;"> Hello Wold</h1> </p> </div> </div>';
$("#c").html(htmlContent); 
```

使用`.html()`并不总是正确的选择，但应该适合您，因为您只是包含 HTML。另一种选择是使用`.append(htmlContent)`.

# javascript - 如何跟踪随机生成的元素？

> ID：14507010
> 
> 赞同：0
> 
> 时间：2013-01-24T17:17:25.243
> 
> 标签：javascript, jquery, html5-audio

我有 3 个按钮，当鼠标靠近其中一个按钮时会播放随机声音。

```
var audio_1 = new Audio("1.mp3");
var audio_2 = new Audio("2.mp3");
var audio_3 = new Audio("3.mp3");

var array_son_video = new Array(audio_1, audio_2, audio_3); 
```

鼠标靠近元素时播放的功能：

```
$('body').mousemove(function(e){
    $('#mouse_position').html("mouse position: x=" + e.pageX + "; y=" + e.pageY);
    if (e.pageX > 300 && e.pageX < 400) {
        var random_number = Math.floor ( Math.random() * 2 );
        son_bt_video_1 = array_son_video[random_number];
        son_bt_video_1.play();
        $("#son_bt_video_1").text('son random : '+random_number);
    }
}); 
```

这部分有效，但我发现它不干净：

1）鼠标每次移动都会产生一个随机数。我只需要在声音完成后生成一个。2）另外，我需要跟踪声音以验证它是否已暂停：

```
if (son_bt_video_1.paused) {
    // generate a new sound
} 
```

像这样 ：

```
if (e.pageX > 300 && e.pageX < 400) {
    if (son_bt_video_1.paused) {
        var random_number = Math.floor ( Math.random() * 2 );
        son_bt_video_1 = array_son_video[random_number];
        son_bt_video_1.play();
        $("#son_bt_video_1").text('son random : '+random_number);
    }
} 
```

由于声音是随机生成的，我不知道如何跟踪它们。你能给我建议吗？

编辑 ：

用户没有控制权（没有播放和暂停按钮）。当鼠标靠近按钮时，只会播放声音。播放结束后，如果鼠标靠近按钮，用户可以再次播放。

此代码不使用随机代码：

```
$('body').mousemove(function(e){
    if (e.pageX > 300 && e.pageX < 485) {               
    son_bt_video_1 = array_son_video[0];
    son_bt_video_1.play();
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:17:53.233

塞巴斯蒂安，

我从未使用过`new Audio()`，但假设它与 HTML5 元素的工作方式相同`<audio>`，那么以下几行应该可以工作：

```
var tracks = [
    new Audio("1.mp3"),
    new Audio("2.mp3"),
    new Audio("3.mp3")
];
tracks.current = null;

$('body').mousemove(function(e){
    if(!tracks.current || tracks.current.ended) {
        $('#mouse_position').html("mouse position: x=" + e.pageX + "; y=" + e.pageY);
        if (e.pageX > 300 && e.pageX < 400) {
            var random_number = Math.min(tracks.length-1, Math.floor ( Math.random() * tracks.length ));
            tracks.current = tracks[random_number];
            tracks.current.play();
            $("#son_bt_video_1").text(['son random : (' , random_number, ') ', tracks.current.src].join(''));
        }
    }
}); 
```

# ruby - 我如何获得 RSpec 的共享示例，例如 Ruby Test::Unit 中的行为？

> ID：14507011
> 
> 赞同：8
> 
> 时间：2013-01-24T17:17:30.647
> 
> 标签：ruby, rspec, testunit, minitest

是否有类似于 RSpec 中用于 Test::Unit 测试的 shared_examples 的插件/扩展？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-12-29T04:53:52.960

如果您使用的是 rails（或只是 active_support），请使用[`Concern`](https://github.com/rails/rails/blob/f37ad331089f64ab0386e8ac94b6626b45c38a1e/activesupport/lib/active_support/concern.rb).

```
require 'active_support/concern'

module SharedTests
  extend ActiveSupport::Concern

  included do

    # This way, test name can be a string :)
    test 'banana banana banana' do
      assert true
    end

  end
end 
```

如果您不使用 active_support，只需使用`Module#class_eval`.

这种技术建立在[Andy H.](https://stackoverflow.com/users/725792/andy-h)的回答之上，他指出：

> Test::Unit 测试只是 Ruby 类，所以你可以使用代码重用的[普通技术]

但是因为它可以使用[`ActiveSupport::Testing::Declarative#test`](https://github.com/rails/rails/blob/a5ab38c7bb99e135e29f5727e3e75a1e562d8216/activesupport/lib/active_support/testing/declarative.rb)它的优点是不会磨损你的下划线键:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T22:19:47.920

我能够使用以下代码实现共享测试（类似于 RSpec 共享示例）：

```
module SharedTests
  def shared_test_for(test_name, &block)
    @@shared_tests ||= {}
    @@shared_tests[test_name] = block
  end

  def shared_test(test_name, scenario, *args)
    define_method "test_#{test_name}_for_#{scenario}" do
      instance_exec *args, &@@shared_tests[test_name]
    end
  end
end 
```

在 Test::Unit 测试中定义和使用共享测试：

```
class BookTest < ActiveSupport::TestCase
  extend SharedTests

  shared_test_for "validate_presence" do |attr_name|
    assert_false Books.new(valid_attrs.merge(attr_name => nil)).valid?
  end

  shared_test "validate_presence", 'foo', :foo
  shared_test "validate_presence", 'bar', :bar
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T17:27:32.520

`Test::Unit`测试只是 Ruby 类，因此您可以使用与任何其他 Ruby 类相同的代码重用方法。

要编写共享示例，您可以使用模块。

```
module SharedExamplesForAThing
  def test_a_thing_does_something
    ...
  end
end

class ThingTest < Test::Unit::TestCase
  include SharedExamplesForAThing
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-09T07:47:28.100

看看我几年前写的这个要点。它仍然很好用：[https ://gist.github.com/jodosha/1560208](https://gist.github.com/jodosha/1560208)

```
# adapter_test.rb
require 'test_helper'

shared_examples_for 'An Adapter' do
  describe '#read' do
    # ...
  end
end 
```

像这样使用：

```
# memory_test.rb
require 'test_helper'

describe Memory do
  it_behaves_like 'An Adapter'
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-06T19:36:55.687

```
require 'minitest/unit'
require 'minitest/spec'
require 'minitest/autorun'

#shared tests in proc/lambda/->
basics = -> do
  describe 'other tests' do
    #override variables if necessary
    before do
      @var  = false
      @var3 = true
    end

    it 'should still make sense' do
      @var.must_equal false
      @var2.must_equal true
      @var3.must_equal true
    end
  end
end

describe 'my tests' do

  before do
    @var = true
    @var2 = true
  end

  it "should make sense" do
    @var.must_equal true
    @var2.must_equal true
  end

  #call shared tests here
  basics.call
end 
```

# mysql - MySQL Doctrine2 映射：转换和模式：更新更改键字段属性：错误 1005

> ID：14507012
> 
> 赞同：2
> 
> 时间：2013-01-24T17:17:38.480
> 
> 标签：mysql, doctrine, doctrine-orm, mysql-error-1005

我使用了doctrine:mapping:convert 命令从使用Doctrine 1 构建的现有mysql 数据库中对模式进行逆向工程。原始数据库具有整数键字段，例如：

```
`client_id` int(10) unsigned default NULL,
KEY `FK_activity_client` (`client_id`), 
```

和

```
`client_id` int(10) unsigned NOT NULL auto_increment, 
```

创建实体后，我得到的代码如下所示：

```
/**
 * @var \Client
 *
 * @ORM\ManyToOne(targetEntity="Client")
 * @ORM\JoinColumns({
 *   @ORM\JoinColumn(name="client_id", referencedColumnName="client_id")
 * })
 */
private $client; 
```

和

```
/**
 * @var integer
 *
 * @ORM\Column(name="client_id", type="integer", nullable=false)
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="IDENTITY")
 */
private $clientId; 
```

到目前为止一切顺利，正是我所期望的。然后，我对另一个不相关的实体进行了小改动，并尝试运行学说：模式：更新。它对以下字段进行了更改：

```
ALTER TABLE activity CHANGE client_id client_id INT DEFAULT NULL, ... 
```

和

```
ALTER TABLE activity ADD CONSTRAINT FK_AC74095A8DB60186 FOREIGN KEY (client_id) REFERENCES client (client_id);
DROP INDEX UN_client ON client;
ALTER TABLE client CHANGE client_id client_id INT AUTO_INCREMENT NOT NULL, ... 
```

这会将活动 client_id 更改为已签名的 unsigned int(11)，然后尝试为 unsigned int(10) 创建外键。

我们看到了我们的老朋友 Error 1005，这是 MySQL 最友好的错误消息。

现在我知道了一些解决方法，所以我可以使用它，我可以将数据库中的字段调整为 Doctrine 想要的，或者使用以下方法关闭外键检查：

```
SET foreign_key_checks = 0; 
```

在这种情况下，这些解决方法很好。我的问题是：

有没有办法让 Doctrine 使用数据库的字段大小和属性，在实体中记住它们，并且在不需要时不要乱用它们。当数据库很大并且与其他应用程序共享时，这可能很重要，这些应用程序对这些属性应该是什么有自己的要求。

# jquery - jQuery - 加载 3 个 iframe 时发出警报

> ID：14507014
> 
> 赞同：1
> 
> 时间：2013-01-24T17:17:44.640
> 
> 标签：jquery

我的网站中有三个我不拥有的 src 的 iframe。

**HTML**

```
 <iframe id="iframe" src="http://a.com"></iframe>
    <iframe id="iframe" src="http://b.com"></iframe>
    <iframe id="iframe" src="http://c.com"></iframe> 
```

**jQuery**

```
$('iframe').load(function(){
     alert("Loaded");
}); 
```

**问题**：消息“已加载”显示三次。我希望messaje“已加载”仅在所有 iframe 加载时显示一次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T17:18:44.750

您可以使用计数器变量来计算为 iframe 触发加载事件的次数。只有当计数器达到 3 时，您才能显示警报。

```
count = 0;    
$('iframe').load(function(){
     count++;
     if(count == 3)
        alert("Loaded");
}); 
```

**编辑：**在页面中的所有 iframe 加载时发出警报。[我们可以在doucment.ready](http://api.jquery.com/ready/)中找到 iframe 的总数，以确保我们获得所有 iframe。

```
count = 0;   
totalFrames = 0; 
$(function(){
    totalFrames = $('iframe').length;
});
$('iframe').load(function(){
     count++;
     if(count == totalFrames)
        alert("Loaded");
}); 
```

# php - 获取二维数组的所有子数组中的所有第 n 个位置元素的本机方式

> ID：14507015
> 
> 赞同：1
> 
> 时间：2013-01-24T17:17:46.577
> 
> 标签：php, arrays

是否有像`combine_subarrays`下面这样工作的本机功能？

```
$foo = array(
   array(1,2,3),
   array(4,5,6),
   array(7,8,9)
);

$n = 1;   // desired element's position in each subarray 
$bar = combine_subarrays($foo, $n);

// Result: $bar is array of all elements in 1st positions - [2,5,8] 
```

现在，我遍历 $foo 并将 $nth 元素推送到一个新数组上，然后返回该数组。如果有本地方法可以做到这一点，那就更好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T22:42:19.773

没有函数可以*完全*做到这一点，但有几种方法可以使用数组函数而不是编写循环。例如[`array_reduce`](http://php.net/array-reduce)*:

```
$bar = array_reduce($foo, function(&$result, $item) use ($n) {
    $result[] = $item[$n]
}); 
```

**[`array_map`](http://php.net/array-map)可能是更好的选择，它还保留了原始密钥。查看[@zeldi的回答](https://stackoverflow.com/questions/14507015/native-way-to-get-all-nth-position-elements-in-all-subarrays-of-a-2d-array/15100738#15100738)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T22:34:42.190

全局引用 $n 的快速解决方案是：

```
$n = 1;
$bar = array_map(function($item) { 
        global $n; 
        return $item[$n]; 
    }, 
    $foo); 
```

结果是：

```
Array ( [0] => 2 [1] => 5 [2] => 8 ) 
```

# javascript - 在单页 js 应用程序中持久保存身份验证令牌的安全方法

> ID：14507021
> 
> 赞同：3
> 
> 时间：2013-01-24T17:18:10.490
> 
> 标签：javascript, asp.net-mvc, asp.net-web-api, forms-authentication

我们的场景：

我们的解决方案包括一个提供单页 javascript 应用程序的 MVC 应用程序和一个旨在用作独立 api 和 SPA 数据源的 Asp.Net WebAPI 应用程序。

我们已经设置好一切，以便两个应用程序共享身份验证令牌和成员资格，因此如果我们登录到 SPA，那么相同的表单身份验证 cookie 也将允许我们访问 API。

如果您在浏览器地址栏中发出 API 请求，但不是通过 AJAX，这可以正常工作。我们遵循了使用 Thinktecture 设置基本身份验证的示例，如果我们将 username\password 硬编码为 ajax 调用的身份验证标头，那么这也可以正常工作。

但是，我的问题是，在客户端保留这些详细信息的正确方法是什么？到目前为止，我们唯一真正的解决方案是将用户名\密码的 base 64 哈希作为 SPA 初始加载的一部分，然后在需要时将其取出。然而，这似乎不安全。

所以基本上，只是想知道在这种情况下“正确”的方法是什么......我们是接近还是我们忽略了另一种方法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T00:12:38.963

我们使用 Thinktecture.IdentityModel 提供的会话令牌支持，然后通过动态生成的脚本使客户端可以使用令牌。

详情请见[http://ben.onfabrik.com/posts/dog-fooding-our-api-authentication](http://ben.onfabrik.com/posts/dog-fooding-our-api-authentication)

我还在[https://github.com/benfoster/ApiDogFood](https://github.com/benfoster/ApiDogFood)上发布了一个示例应用程序来演示这些概念。

# python - 如何使用 Python 从文件的一部分制作整数列表？

> ID：14507027
> 
> 赞同：0
> 
> 时间：2013-01-24T17:18:28.213
> 
> 标签：python, file-io, python-2.7

**我有一个**如下所示的文件：

```
@ junk
...
@ junk
    1.0  -100.102487081243
    1.1  -100.102497023421
    ...   ...
    3.0  -100.102473082342
&
@ junk
... 
```

我只对`@`和`&`字符之间给出的两列数字感兴趣。这些字符可能出现在文件中的任何其他位置，但绝不会出现在数字块内。

**我想创建两个列表**，一个带有第一列，一个带有第二列。

```
List1 = [1.0, 1.1,..., 3.0]
List2 = [-100.102487081243, -100.102497023421,..., -100.102473082342] 
```

我一直在使用 shell 脚本为这些文件准备一个更简单的生成列表的 Python 脚本，但是，我正在尝试将这些进程迁移到 Python 以获得更一致的应用程序。有任何想法吗？我在 Python 和文件处理方面的经验有限。

编辑：我应该提一下，这个数字块出现在文件的两个地方。两个数字块是相同的。

Edit2：一般功能对此最满意，因为我会将其放入自定义库中。

**目前的努力**

我目前使用 shell 脚本将除数字块之外的所有内容修剪成两个单独的列。从那里使用以下功能对我来说是微不足道的

```
def ReadLL(infile):
    List = open(infile).read().splitlines()
    intL = [int(i) for i in List]
    return intL 
```

通过从我的主要调用它

```
import sys
import eLIBc
infile = sys.argv[1]
sList = eLIBc.ReadLL(infile) 
```

问题是知道如何使用 Python 从原始文件中提取数字块，而不是使用 shell 脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:50:36.217

您想循环遍历文件本身，并在发现第一行*没有*字符时设置一个标志`@`，之后您就可以开始收集数字了。当你在一行中找到`&`字符时停止阅读。

```
def readll(infile):    
    with open(infile) as data:
        floatlist1, floatlist2 = [], []
        reading = False

        for line in data:
            if not reading:
                if '@' not in line:
                    reading = True
                else:
                    continue

            if '&' in line:
                return floatlist1, floatlist2

            numbers = map(float, line.split())
            floatlist1.append(numbers[0])
            floatlist2.append(numbers[1]) 
```

所以以上：

*   将 'reading' 设置为`False`，并且仅当`'@'`找到没有的行时，才设置为`True`。
*   当“阅读”是`True`：
    *   如果该行包含，则返回读取的数据`&`
    *   否则假定该行包含两个由空格分隔的浮点值，它们被添加到各自的列表中

通过返回，函数结束，文件自动关闭。只有第一个块被读取，文件的其余部分被简单地忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:50:37.593

试试这个：

```
with open("i.txt") as fp:
    lines = fp.readlines()
    data = False
    List1 = []
    List2 = []
    for line in lines:
        if line[0] not in ['&', '@']:
            print line
            line = line.split()
            List1.append(line[0])
            List2.append(line[1])
            data = True
        elif data == True:
            break

print List1
print List2 
```

这应该给你第一个数字块。

输入：

```
@ junk
@ junk
1.0  -100.102487081243
1.1  -100.102497023421
3.0  -100.102473082342
&
@ junk
1.0  -100.102487081243
1.1  -100.102497023421 
```

输出：

```
['1.0', '1.1', '3.0']
['-100.102487081243', '-100.102497023421', '-100.102473082342'] 
```

**更新**

如果你需要两个块，那么使用这个：

```
with open("i.txt") as fp:
    lines = fp.readlines()
    List1 = []
    List2 = []
    for line in lines:
        if line[0] not in ['&', '@']:
            print line
            line = line.split()
            List1.append(line[0])
            List2.append(line[1])

print List1
print List2 
```

# python - 写入 UDP 套接字会阻塞吗？

> ID：14507028
> 
> 赞同：14
> 
> 时间：2013-01-24T17:18:38.513
> 
> 标签：python, udp, twisted, statsd

如果是这样，在什么条件下？或者，换一种说法，在 twisted 中运行此代码是否安全：

```
class StatsdClient(AbstractStatsdClient):
  def __init__(self, host, port):
    super(StatsdClient, self).__init__()
    self.addr = (host, port)
    self.server_hostname = socket.gethostname()
    self.udp_sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

  def incr(self, stat, amount=1):
    data = {"%s|c" % stat: amount}
    self._send(data)

  def _send(self, data):
    for stat, value in data.iteritems():
      self.udp_sock.sendto("servers.%s.%s:%s" % (self.server_hostname, stat, value), self.addr) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T18:15:30.030

是的，奇怪的是，UDP 套接字可以阻塞。

发生这种情况的条件基本上是，某处的某些缓冲区已满，您的操作系统决定是时候阻止某些事情了。这些可以说是内核错误，但我到处都看到过它们。有时你肯定会遇到`EWOULDBLOCK`晦涩难懂、无法重现的情况。

为什么要在 Twisted 中执行此操作，而不是使用 Twisted 的[内置 UDP 支持](https://twistedmatrix.com/documents/current/core/howto/udp.html)？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T18:01:19.363

如果您的网络接口出现故障，它可能会失败，例如：

[ENETDOWN] 用于到达目的地的本地网络接口已关闭。

# ruby-on-rails - 注册中出现 ActiveRecord::RecordNotUnique#create 为什么？

> ID：14507029
> 
> 赞同：2
> 
> 时间：2013-01-24T17:18:39.777
> 
> 标签：ruby-on-rails, ruby, exception, unicorn, rails-activerecord

我得到一个例外，我想了解原因。我创建了一个 git repo，所以任何人都可以测试它。

安装了 Devise 的 rails 应用程序很新鲜。

运行尝试创建相同用户的应用程序和此脚本：

```
1000.times do
  fork do
    `curl -d "user[email]=your@mail.com&user[password]=pwd&user[password_confirmation]=pwd" localhost:3000/users`
  end
end 
```

我得到以下异常：

```
An ActiveRecord::RecordNotUnique occurred in registrations#create:

Mysql2::Error: Duplicate entry 'your@mail.com' for key 'index_users_on_email': INSERT INTO `users` (`authentication_token`, `confirmation_sent_at`, `confirmation_token`, `confirmed_at`, `created_at`, `current_sign_in_at`, `current_sign_in_ip`, `email`, `encrypted_password`, `failed_attempts`, `last_sign_in_at`, `last_sign_in_ip`, `locked_at`, `remember_created_at`, `reset_password_sent_at`, `reset_password_token`, `sign_in_count`, `unconfirmed_email`, `unlock_token`, `updated_at`) VALUES (NULL, '2013-01-24 16:48:23', 'GQwbJzsawxRsbvhp1LkR', NULL, '2013-01-24 16:48:23', NULL, NULL, 'your@mail.com', '$2a$10$koMNiiZQuhkeWhmYV8PtcOUlvi6rZHTKMs82MGWNa2M/GsUQ0cIHO', 0, NULL, NULL, NULL, NULL, NULL, NULL, 0, NULL, NULL, '2013-01-24 16:48:23')
activerecord (3.2.11) lib/active_record/connection_adapters/abstract_mysql_adapter.rb:245:in `query' 
```

为什么我得到这个异常而不是验证错误？如果我尝试使用已从网页“http://localhost:3000/users/sign_up”使用的电子邮件创建用户，我不会收到此异常，而是出现验证错误...

如果我在没有 fork 的情况下运行脚本（请求是顺序的），我不会收到错误。

似乎是一个竞争条件问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T17:34:55.837

在您的脚本中，您尝试使用电子邮件“your@mail.com”创建 1000 个用户。您对用户电子邮件索引有唯一性约束（正确 - 每个电子邮件地址只需要一个用户）。第二次尝试使用该电子邮件创建用户时，您将收到错误消息。

当您分叉您的请求时`validates_uniqueness_of`，设计提供的验证可能会成功，因为它使用相同的电子邮件查询另一条记录。但是，在实际写入记录时，可能存在另一条记录。

例如，

1.  请求 1 检查现有电子邮件“your@mail.com” - 好的
2.  请求 2 检查现有电子邮件“your@mail.com” - 好的
3.  请求 1 使用电子邮件“your@mail.com”写入记录 - 好的
4.  请求 2 使用电子邮件“your@mail.com”写入记录 - 违反唯一性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:34:16.353

好吧，就像异常说的那样，您违反了索引唯一性约束。当您运行设计生成器时，它会为您创建一个迁移（它是您在测试应用程序中的 db/migrate 中唯一拥有的一个）。在此迁移中，您有以下内容：

```
add_index :users, :email,                :unique => true 
```

当您尝试使用同一封电子邮件创建一千条记录时，这就是您的脚本失败的原因。

对于初学者，我会将您的示例脚本更改为类似这样的内容，这样您每次都会收到一封独特的邮件：

```
1000.times do |i|
  fork do
    `curl -d "user[email]=your#{i}@mail.com&user[password]=pwd&user[password_confirmation]=pwd" localhost:3000/users`
  end
end 
```

如果您尝试使用假用户为开发数据库播种，请查看 railscasts on [database population](http://railscasts.com/episodes/126-populating-a-database)和[seed data](http://railscasts.com/episodes/179-seed-data)。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-24T17:31:43.247

Devise 使用电子邮件作为您用户的唯一标识符。您不能将相同的电子邮件分配给所有这些人。

或者您在脚本中尝试做的是更新用户而不是创建新用户？

# qml - 在黑莓10级联的groupdatamodel末尾插入列表数据？

> ID：14507032
> 
> 赞同：-1
> 
> 时间：2013-01-24T17:18:49.477
> 
> 标签：qml, cascade, blackberry-10

我有一个带有 groupdatamodel 的列表视图，我需要在 groupdatamodel 的末尾插入列表数据，在这里我粘贴了我所做的代码

```
 GroupDataModel {
                        id: grouplistdatamodel
                    },
                    DataSource {
                        id: dataSource
                        source: "http://myurl.com"
                        onDataLoaded: {
                              grouplistdatamodel.insertList(data); //it will insert the data at first position in listview but i need to insert the data at last position
                         }
                    } 
```

任何人都可以帮我解决这个问题，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:29:30.297

我正在考虑两种方法来实现这一目标。
首先，您可以尝试使用 GroupDataModel 方法 setSortedAscending(bool ascending)。
否则，您可以使用 setSortingKeys(const QStringList &keys) 并将特定键添加到您放入 GroupDataModel 的数据中，该键仅用于对列表进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:20:17.587

在 GroupDataModel 中应该无法在特定位置插入数据，所以我更改了 ArrayDataModel 而不是 GroupDataModel。

# android - 如何处理“循环应用程序”？

> ID：14507033
> 
> 赞同：-1
> 
> 时间：2013-01-24T17:18:50.453
> 
> 标签：android, optimization, android-activity

我的应用程序包含 3 个活动：A1、A2 和 A3。

这些活动之间存在一个“循环”：A1--starts--> A2 --starts--> A3 --starts--> A1 等等。

此外，可以从 A3 回到 A2 和从 A2 回到 A1（仅这两种情况）

我的问题是，我的应用程序在点击活动后变得非常缓慢。我认为这是因为活动没有正确关闭。在开始下一个活动后，我无法完成活动 A1 和 A2，因为（我怎么说）可以返回。

我该如何处理这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:09:28.783

当您在 Activity A3 并想再次启动 Activity A1 时，请执行..

```
intent = new Intent(getApplicationContext(), ActivityA1.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
startActivity(intent); 
```

它将清除堆栈并重新启动 Activity A1

# android - 当另一个活动开始时，Phonegap 应用程序关闭。为什么？

> ID：14507035
> 
> 赞同：2
> 
> 时间：2013-01-24T17:19:17.373
> 
> 标签：android, cordova

我在我的 DroidGap 类上设置了一个 javascript 接口，

```
mc = new MyClass(this, appView);
appView.addJavascriptInterface(mc, "MyCls"); 
```

我从中启动媒体播放器

```
 public void playAudio(String audioFile){
      copyFileToDir(audioFile);
      File dest = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_MUSIC + "/" + audioFile + ".mp3");
      Uri r = Uri.fromFile(dest);         
      Intent viewMediaIntent = new Intent();   
      viewMediaIntent.setAction(android.content.Intent.ACTION_VIEW);                                 
      viewMediaIntent.setDataAndType(r, "audio/*");   
      viewMediaIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP);          
      Intent i = Intent.createChooser(viewMediaIntent, "Play Music");
        mGap.startActivity(i);

  } 
```

但是当我这样做时，当我按下返回时，我的应用程序不再运行，我被发送到主屏幕。我尝试将 keepRunning 设置为 true 但没有太大帮助。

```
super.setBooleanProperty("keepRunning", true); 
```

即使我开始另一个活动，我怎样才能让它继续运行？

**更新**

现在它变得更奇怪了。该活动不会在运行 4.2 的 nexus 7、运行 2.2 的 HTC 愿望/Htc Bravo 上被破坏，但在运行 4.1.2 的我的 Galaxy s3 上失败。关于如何找出原因的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T11:28:11.730

我的问题是自己造成的。有一个选项`Settings -> Developer Options -> Apps`被调用`do not keep activities`。一旦用户离开它，它就会破坏每个活动。所以一旦我取消了那个可爱的复选框，我的问题就解决了。

# r - 从R中列表的每个元素中提取特定对象

> ID：14507037
> 
> 赞同：2
> 
> 时间：2013-01-24T17:19:22.710
> 
> 标签：r, list, subset

我有一个由不同长度的不同数字向量组成的列表，我想知道您是否对如何提取具有相同索引的对象有任何建议（例如，每个元素的第三个对象）

想象一下我有这样的事情：

```
States<-list(Italy=rbinom(5,4,0.5),Spain=rnorm(12,6,1),Greece=sample(1:14, 6))
> States
$Italy
[1] 2 2 1 4 2

$Spain
 [1] 5.403135 5.616146 7.224063 5.602878 6.738619 6.732706 7.636093 5.917246 5.901094
[10] 5.818594 7.420575 5.545782

$Greece
[1]  8  9  3 11  4 14 
```

如何获得一个数字向量，其中每个元素的第一个对象是一个向量，例如：

```
[1] 2 5.403135 8 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-03T20:54:21.203

Consider using `lapply` or `sapply`, which will both eventually get you to the same result:

For `lapply`:

```
> lapply(States,function(x)x[1])
$Italy
[1] 2

$Spain
[1] 6.694136

$Greece
[1] 10
> unlist(lapply(States,function(x)x[1]), use.names=FALSE)
[1]  2.000000  6.694136 10.000000 
```

For `sapply`:

```
> sapply(States,function(x)x[1])
    Italy     Spain    Greece 
 2.000000  6.694136 10.000000
> as.vector(sapply(States,function(x)x[1]))
[1]  2.000000  6.694136 10.000000 
```

# facebook - 使用规范 url 和传递变量

> ID：14507043
> 
> 赞同：0
> 
> 时间：2013-01-24T17:19:37.857
> 
> 标签：facebook, html, url, addthis

我正在为一个网站构建一个共享系统，使用 facebook like & addthis。

例子，

1.  member_ID 177 共享一个产品页面“http://www.example.com/product.php?item=swedish-fish&member_ID=177”，

2.  有人点击该链接，页面将“member_ID=177”注册为该项目的“推荐人”，以获得奖励。

3.  如果是这样，每个成员的页面“http://www.example.com/product.php?item=swedish-fish&member_ID=...”都会有所不同。分享不能复合。

使用规范 url 似乎没有帮助，因为我仍然需要传递“member_ID=177”。

基本上，我想要实现的是分享“http://www.example.com/product.php?item=swedish-fish&member_ID=177”，

但在“http://www.example.com/product.php?item=swedish-fish”上复合“喜欢”和“分享”数字

```
<link rel="canonical" href="http://www.example.com/product.php?item=swedish-fish"/>
<meta property='og:url' content='https://www.example.com/product.php?item=swedish-fish' /> 
```

可能吗？如果是这样，怎么做？如果没有，关于替代品的任何建议？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:34:25.527

您必须将 添加`&member_ID=177`到`og:url`标签中，并且`rel='canonical'`标签才能正常工作。如果您不这样做，Facebook 将聚合所有不同的成员 ID，就好像它们是一个 URL 一样。

# symfony - 限制 Symfony 2 php 表单的默认年份范围

> ID：14507049
> 
> 赞同：0
> 
> 时间：2013-01-24T17:19:48.417
> 
> 标签：symfony

我在 Symfony 上使用 php 生成一个表单字段，如下所示：

```
 <?php
  echo $view['form'] -> row($form["validend"], array(
      //widget
        "widgetArgs" => array("attr" => array('id' => "gift_validbegin")), 'label'  => 'Data Fine',
        "widgetArgsDay" => array("attr" => array("class"=>"span1",'validate-type'=>'complete')),
        "widgetArgsMonth" => array("attr" => array("class"=>"span1",'validate-type'=>'complete')),
        "widgetArgsYear" => array("attr" => array("class"=>"cspan1",'validate-type'=>'complete'))));
 ?> 
```

这会生成默认的年份范围，我想知道如何设置不同的范围，比如说从实际年份到 5 年以上。

# c# - 最可靠的 SQL Azure 连接代码？

> ID：14507052
> 
> 赞同：0
> 
> 时间：2013-01-24T17:19:57.363
> 
> 标签：c#, sql-server, azure-sql-database

对于 SQL Azure，我的心痛多于成功，我正在寻找有关创建与 SQL Azure 的连接的最新方法和最可靠代码的指导。我的理解是

1.  发生了重大变化，最近在 2013 年 1 月 1 日（又一次）影响了 SQL Azure 的性能。
2.  MS 发布了 SQL Azure 特定库，这些库使连接到 SQL Azure 更加可靠，并且不再需要重试代码。那是对的吗？我没有跟上这些变化，但我的理解是它更可靠。

如果这对任何人都很重要，我目前使用（传统？）方法尝试连接到 SQL Azure，然后检查异常并再次尝试连接。我希望得到能帮助我消除这些废话的答复。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:42:45.587

我一直在使用他们推荐的传统重试逻辑并且没有遇到真正的问题。但如果引发异常，我通常会尝试多次，最多 10 次，每次重试之间间隔几秒钟。

# c++ - 从 doxygen 中删除函数列表

> ID：14507065
> 
> 赞同：3
> 
> 时间：2013-01-24T17:20:45.717
> 
> 标签：c++, doxygen

我遇到了 doxygen 文档的问题。在“文件”部分，是否可以使用 doxyfile 中的标志删除页面顶部的函数列表？如果没有，有没有办法在这个“函数”列表之前插入一个部分（在我的 cpp 源代码中使用 doxygen 命令）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T13:48:08.857

设置`EXTRACT_ALL`为`NO`。

设置`HIDE_UNDOC_MEMBERS`为`YES`。

不要记录您想要隐藏的成员。

您还可以使用`EXCLUDE_SYMBOLS`排除一些记录的项目： EXCLUDE_SYMBOLS 标记可用于指定一个或多个应从输出中排除的符号名称（命名空间、类、函数等）。符号名称可以是完全限定名称、单词，或者如果使用通配符 *，则可以是子字符串。示例：ANamespace、AClass、AClass::ANamespace、ANamespace::*Test

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-18T15:50:45.583

请参阅此文档页面： http: [//www.doxygen.nl/manual/customize.html](http://www.doxygen.nl/manual/customize.html)

“更改页面布局”一章解释了如何包含/排除和更一般地组织生成的文档。如果我理解正确，我遇到了像你这样的问题，并按照上述文档中指示的步骤操作：

1）通过使用命令“doxygen -l”，我得到了一个标准的“DoxygenLayout.xml”布局文件

2) 准备一个自定义布局文件，通过修改标准文件，注释掉整个 <memberdecl>...</memberdecl> XML 部分

3) 在我的 Doxyfile 中，将自定义布局文件指定为选项“LAYOUT_FILE”的值

小心路径，以便 doxygen 知道在哪里可以找到 Doxyfile 和自定义布局文件。

# java - 覆盖方法而不更改任何原始代码

> ID：14507067
> 
> 赞同：0
> 
> 时间：2013-01-24T17:20:56.247
> 
> 标签：java, class, methods, overriding

我有一个 Main 类、一个 X 类和一个 Z 类。

X 有方法 a()。

Z 有方法 b()。

Main 在 Z 中调用方法 b()，然后在 X 中调用方法 a()。

然后我有我的类 X2 及其方法 a2()。

是否可以在不更改 Main 或 X 的情况下通过 Z 的 b() 方法强制 Main 使用 X2 中的方法 a2() 而不是 X 中的 a()？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:29:16.740

不，你不能这样做，因为 Main 类仍然创建 X 的实例`X x = new X()`。

让 Main 类调用覆盖的方法的唯一方法是将 Main 中`X.a()`的调用更改为`X x = new X2()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:48:04.197

如果我理解您的问题，那么是的，如果 Z 负责创建 X，并且 X2 扩展 X。这称为多态性。考虑这个例子：

```
public class X {
    public void a() {
        System.out.println("X.a");
    }
}

public class X2 extends X {
    public void a() {
        System.out.println("X2.a");
    }
}

public class Z {
    private X my_x;
    public Z() {
        this.my_x = new X2();
    }

    public X getX() {
        return my_x;
    }

    public void b() {
        System.out.println("Z.b");
    }
}

public class Main {
    public static void main(String[] Args) {
        Z z = new Z();
        X x = z.getX();
        z.b();
        x.a();  // this prints. X2.a
    }
} 
```

# magento - magento 将变量从控制器传递到另一个模型

> ID：14507071
> 
> 赞同：0
> 
> 时间：2013-01-24T17:21:04.670
> 
> 标签：magento, model, controller, smtp, zend-mail

我想通过 smtp 发送自定义邮件。
我为此安装了[http://www.magentocommerce.com/magento-connect/aschroder-com-smtp-pro-email-free-and-easy-magento-emailing-for-smtp-gmail-or-google-apps-电子邮件.html](http://www.magentocommerce.com/magento-connect/aschroder-com-smtp-pro-email-free-and-easy-magento-emailing-for-smtp-gmail-or-google-apps-email.html)。
默认情况下，它适用于 magento 提供的每封邮件。
现在，由于管理员拥有 google apps 的邮件 ID，管理员没有收到我的自定义邮件。
因此，出于这个原因，我想将我的控制器与 ashrodder 扩展的发送邮件功能集成在一起。 **我的控制器代码：**

```
$frm = 'mail@domainname.com';
$to = 'admin@domainname.com';
$subject = "UPDATE";
$mail = new Zend_Mail('utf-8');
$mail->setBodyHtml($message)
->setFrom($frm, 'Admin')
->addTo($to, 'Site Admin')
->setSubject($subject);
try {
$mail->send();
Mage::getSingleton('core/session')->addSuccess('Mail sent successfully.');              
}
catch(Exception $e) {
Mage::getSingleton('core/session')->addError('Unable to send email.');
} 
```

我的问题很简单：我应该如何将**[to,from,body]**变量传递给任何其他模型/控制器？
请帮忙 。
提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T04:57:00.223

我认为覆盖扩展控制器将是最好的解决方案。检查此链接[如何扩展控制器](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/how_to_overload_a_controller)

# javascript - Javascript ajax 延迟加载和函数组织

> ID：14507072
> 
> 赞同：2
> 
> 时间：2013-01-24T17:21:05.293
> 
> 标签：javascript, jquery, caching, lazy-loading, javascript-objects

我是这种东西的新手，所以我想要一些设计建议。假设我有这样的事情

```
$(function () {
    $('#menuBtn').on('click', app.openUsersMenu);
});
var app = {
    users: null,
    openUsersMenu: function () {
        if (app.users != null) {
            //render menu
        } else {
            $.ajax({
                url: '/getUsers.json'
            }).success(function (data) {
                app.users = data;
                //render menu     
            });
        }
    }
} 
```

这是进行延迟加载和缓存的好方法，还是您会提出更好的替代方案？避免两次编写渲染函数的有用解决方案是什么？当然你可以有类似的东西：

```
var app = {
    users: null,
    openUsersMenu: function() {
        if (app.users != null) {
            app.renderMenu();
        } else {
            $.ajax({
                url: '/getUsers.json'
            }).success(function (data) {
                app.users = data;
                app.renderMenu();  
            });
        }
    },
    renderMenu: function() {
        //use app.users to render
    }
} 
```

但是随后这两个函数及其名称变得相当混乱，因此最好执行以下操作：

```
var app = {
    users: null,
    openUsersMenu: function () {
        if (app.users != null) {
            //render menu
        } else {
            $.ajax({
                url: '/getUsers.json'
            }).success(function (data) {
                app.users = data;
                app.openUsersMenu(); // Call itself, now with data    
            });
        }
    }
} 
```

最后一个模式是个好主意吗？这样做的通常方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:32:56.520

我相信你会得到很多关于不同库的建议，这些建议可以用于缓存（例如[amplifyJS](http://amplifyjs.com/)），并且它们有自己的位置。但是，如果您所做的只是在内存中缓存，那么您的解决方案就完美了。在幕后，这就是库无论如何都会为内存缓存做的事情——只是抽象了一点。

但是，你所拥有的很简单，很容易理解，而且最重要的是它有效。

关于加载/缓存代码的不同选项。如果永远不会直接调用 renderMenu，我会将它移到 openUsersMenu 中以使其私有：

```
var app = {
    users: null,
    openUsersMenu: function() {
        var renderMenu = function() {
            //use app.users to render
        };

        if (app.users != null) {
            renderMenu();
        } else {
            $.ajax({
                url: '/getUsers/json'
            }).success(function (data) {
                app.users = data;
                renderMenu();  
            });
        }
    }
} 
```

否则，选项#2 是桃色的。Lee Meador 是对的，选项 #3 很酷，但有点难以阅读。如果您需要任何进一步的说明，请告诉我。

# php - PHP Implode不分离数组

> ID：14507075
> 
> 赞同：-1
> 
> 时间：2013-01-24T17:21:17.347
> 
> 标签：php, html, mysql, arrays

我正在使用 $_POST 从表单页面中提取 MySQL 查询。上一页正在发送来自数据库的 ID 列表。但是，当我使用 implode 时，它​​会回显一个字符串：

2210222022362244

即使我使用的是 Implode 函数：

```
$variable = implode(',' ,$_POST['job_ids']);
echo $variable 
```

我也尝试过这种变化：

```
$variable = implode(',' ,(array)$_POST['job_ids']);
echo $variable 
```

但是，这会回显相同的字符串。我还尝试了一个“get”，它产生了这个 URL 字符串，它产生了相同的：“2210222022362244”字符串：

testing.php?job_ids%5B%5D=%0D%0A%09%09%09%09%09++%09%09%0D%0A%09%09%09%09%09++%09%092210222022362244 %09%09%09%09%09++%09%09%0D%0A%09%09%09%09%09++%09%09&supervisorid=58

我正在寻找的输出是：

2210,2220,2236,2244

我想将这些值存储在一个变量中，然后在 MySQL 更新查询中使用它们。我假设这意味着我从上一页发送的数组有问题。我在该页面上使用的代码在这里：

```
<form action="testing.php" method="post">
<input type="hidden" name="job_ids[]" value="

<?php
$senditbaby=0;

while ($senditbaby < $num)                      
{
$senditbabyID=mysql_result($result,$senditbaby,"job_id");                       
echo $senditbabyID;                     
$senditbaby++;
}

?>
">

<div class="modal-footer">
<input type="submit" class="btn btn-primary" value="Approve all tickets">
</div></form> 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:28:44.417

你真的为一个简单的错误写了一个很长的问题：你错过了输出逗号，所以没有。

但是我的建议是：首先收集数据，然后关心输出：

```
function get_job_ids_array($num, $result)
{
    $ids = array();
    $senditbaby = 0;

    while ($senditbaby < $num)                      
    {
         $senditbabyID = mysql_result($result, $senditbaby, "job_id");
         $ids[] = $senditbabyID;
         $senditbaby++;
    }

    return $ids;
} 
```

并获得逗号分隔的列表：

```
echo implode(', ', get_job_ids_array($num, $result)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:24:02.420

是只有一个`job_ids[]`输入，所以 中只有一个值`$_POST['job_ids']`。因此，没有什么可以内爆的。您在其中创建值的循环`job_ids[]`只是在一个接一个地回显这些值，而不是以任何方式将它们拆分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T17:26:16.657

尝试这个：

```
$variable = implode(',', str_split($_POST['job_ids'], 4));
echo $variable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T17:49:36.443

您可以使用[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)在单个查询中获取逗号分隔的 job_ids。这种方式有助于避免内爆和多重查询。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T17:24:50.903

当您手动解码输入时，它确实是“2210222022362244”，没有任何分隔符。所以没有办法告诉你的数字在输入中彼此分开。如果每个数字都是四位数字，那么您需要为此编写特定的代码，因为这是 php 无法猜测的。

此外，php 将 $_POST['job_ids'] 视为字符串，您需要先将其分解为数组。这仅仅是因为没有通过 HTTP 直接传输数组的概念。

也许只是示例中的一个错误：您使用 $_POST，但示例 url 使用 GET，因此您实际上需要 $_GET['job_ids']

# c - c getline() - 我如何解析一行？

> ID：14507080
> 
> 赞同：1
> 
> 时间：2013-01-24T17:21:37.303
> 
> 标签：c, getline

我不知道如何解析 getline() 中的行。我想看看行中的每个字符。

因此，如果有人在标准输入中输入：“Hello”，我希望能够以这种方式访问​​ char 数组：

```
line[0] = 'H' 
line[1] = 'e' 
line[2] = 'l'
line[3] = 'l'
line[4] = 'o'
line[5] = '/0'; 
```

我看过 getchar()，但我想尝试使用 getline()，因为我觉得它更方便。我还查看了 scanf()，但它会跳过空格，并且不能像 getchar() 或 getline() 那样很好地解析输入。

这是尝试通过标准输入获取行的第一个字符的简单代码，但会导致段错误：

```
#include <stdio.h>                                                                                                
#include <stdlib.h>                                                                                               

int main()                                                                                                        
{                                                                                                                 
  int len;                                                                                                        
  int nbytes = 100;                                                                                               
  char *line = (char *) malloc (nbytes + 1);                                                                      

  while(getline(&line, &nbytes, stdin) > 0){                                                                      
    printf("first char: %s", line[0]);  //try and get the first char from input

    /**
     * other code that would traverse line, and look at other chars 
     */                                                                         
  };                                                                                                              

  return 0;                                                                                                       
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T17:23:04.977

使用`%c`格式说明符打印出单个字符。

编码

```
printf("first char: %s", line[0]) 
```

将尝试将其`line[0]`视为 char 数组的地址。如果您只想打印出第一个字符，请将其更改为

```
printf("first char: %c", line[0])
//                   ^ 
```

您可以在代码的其他部分考虑其他一些小的更改：

*   你不需要从 malloc 中转换返回值
*   你应该`free(line)`在你的while循环之后

# json - 发音示例 JSON 将地图显示为数组

> ID：14507084
> 
> 赞同：0
> 
> 时间：2013-01-24T17:21:59.267
> 
> 标签：json, enunciate

Enunciate docs 模块中的示例 JSON 将地图显示为对象数组。

例如，我有一个像这样的对象：

```
@JsonRootType
@JsonName("MyObj")
@XmlRootElement
public class MyObject {
  @DocumentationExample("John Doe")
  private String name;
  private Map<String, String> attributes;

  public MyObject() {}

  public String getName() { return name; }
  public Map<String, String> getAttributes() { return attributes; }
} 
```

来自 enunciate 的示例 JSON 如下所示：

```
{
  "name" : "John Doe",
  "attributes" : [{
    "..." : ...
  },{
  }]
} 
```

我希望示例 JSON 看起来像：

```
{
  "name" : "John Doe",
  "attributes" : {
    "..." : ...,
  }
} 
```

看起来 GenerateExampleJsonMethod 在看到 Map 时总是在创建 ArrayNode。有没有办法获得预期的 JSON？

我正在使用发音版本 1.26.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T20:30:50.493

是的。这在 1.27 中得到了修复，本周等待发布。

# javascript - 使用敲除绑定值的条件

> ID：14507085
> 
> 赞同：1
> 
> 时间：2013-01-24T17:22:04.153
> 
> 标签：javascript, jquery, knockout.js, knockout-mvc

所以我使用敲除将一组值绑定到网格，使用类似于我下面的 foreach 。

```
<table id="pcc-batch-list" class="table table-striped" >
            <thead>
                <tr>
                    <th>Column 1</th>
                    <th>Column 2</th>
                    <th>Column 3</th>
                    <th>Column 4</th>
                </tr>
            </thead>
            <tbody data-bind="foreach:stuff">
                <tr>
                    <td data-bind="text: Something1"></td>
                    <td data-bind="text: Something2"></td>
                    <td data-bind="text: Something3"></td>
                    <td data-bind="text: Something4"></td>
                </tr>
            </tbody>
        </table> 
```

我想根据 say Something2 的实际值有条件地更改显示文本的颜色。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:33:24.837

尝试 css 绑定[http://knockoutjs.com/documentation/css-binding.html](http://knockoutjs.com/documentation/css-binding.html)记得在表达式中使用 ()。

```
data-bind="text: Something1, css: {colorClass: isSomething() > 0}" 
```

# string - 在 8086 汇编中对字符串进行排序

> ID：14507086
> 
> 赞同：2
> 
> 时间：2013-01-24T17:22:10.597
> 
> 标签：string, sorting, assembly, x86, x86-16

我想编写一个 8086 汇编程序，它从用户那里获取 5 个字符串作为输入，然后对这些字符串进行排序并将排序结果打印为输出。我实际上做了所有事情，但排序部分有一个大问题。我知道如何使用例如冒泡排序对数组中从特定地址开始的项目进行排序，但在这里我有 5 个不同的字符串，它们不在同一个数组中。每个字符串都有自己的地址和自己的字符。我尝试将每个字符串的最后一个字符相互比较，然后如果一个大于另一个，我交换整个字符串，然后我继续对所有字符串的整个字符执行此操作到第一个。

例如，如果我们的输入字符串是：

```
eab    
abe    
cbd    
cda    
adb 
```

我将首先对每个字符串的最后一个字符进行排序，然后得出以下结论：

```
cda    
eab    
adb    
cbd    
abe 
```

然后我将通过中间字符进行比较：

```
eab    
cbd    
abe    
cda    
adb 
```

最后是第一个字符，所有内容都已排序：

```
abe
adb
cbd
cda    
eab 
```

但这实际上是我的想法，我不知道谁来为我的工作实施它。

```
; 多段可执行文件模板。

数据段
    data1 db 64,?,64 dup(?)
    data2 db 64,?,64 dup(?)
    data3 db 64,?,64 dup(?)
    data4 db 64,?,64 dup(?)
    data5 db 64,?,64 dup(?)

    更改 db 66 重复（？）

    msg db 0ah,0dh,"你输入了错误的选项",0ah,0dh,"再试一次",0ah,0dh,"$"
    提示 db 0ah,0dh,"选择一个选项：",0ah,0dh,"$"
    prompt1 db ".a: 升序排序",0ah,0dh,"$"
    prompt2 db ".d: 降序排序",0ah,0dh,"$"
    prompt3 db ".q: 退出",0ah,0ah,0dh,"$"
    输入 db 0ah,0ah,0dh,"输入 5 个字符串：",0ah,0dh,"$"
    pkey db 0ah,0dh,"按任意键...$"
结束

堆栈段
    dw 128 重复（0）
结束

代码段
主要过程远
; 设置段寄存器：
    mov 斧头，数据
    mov ds, ax
    移动，斧头

再次：
; 为用户打印提示
    领导 dx，提示
    mov 啊, 09h
    整数 21 小时   

    铅dx，提示1
    mov 啊, 09h
    整数 21 小时

    铅dx，提示2
    mov 啊, 09h
    整数 21 小时

    铅dx，提示3
    mov 啊, 09h
    整数 21 小时   

; 从用户那里获取一个字符作为输入
    mov 啊, 01h
    整数 21 小时

; 确定用户选择哪个选项    
    cmp al, 'a'
    je 上升
    cmp al, 'd'
    je 下降
    cmp al, 'q'
    退出

; 这是用户输入错误字符的时间    
    铅dx，味精
    mov 啊, 09h
    整数 21 小时
    再次跳转；再次调用应用程序启动

上升：
    呼叫输入
    调用 AscendSort
    再次跳转；再次调用应用程序启动

降序：
    呼叫输入
    调用 DescendSort
    再次跳转；再次调用应用程序启动

辞职：            
    铅 dx, pkey
    动啊，9
    诠释 21 小时；在 ds:dx 处输出字符串

    ; 等待任何关键....    
    动啊，1
    整数 21 小时

    移动斧头，4c00h；退出操作系统。
    整数 21 小时  
主要终端
;..................................................
; 这个子程序从用户那里得到输入
输入过程

    领导 dx，输入
    mov 啊, 09h
    整数 21 小时
    调用换行符

    动啊，0啊
    铅dx，数据1
    整数 21 小时      
    调用换行符

    动啊，0啊
    铅dx，数据2
    整数 21 小时
    调用换行符

    动啊，0啊
    铅dx，数据3
    整数 21 小时
    调用换行符

    动啊，0啊
    铅dx，data4
    整数 21 小时
    调用换行符

    动啊，0啊
    铅dx，数据2
    整数 21 小时
    调用换行符

    ret
输入端
………………………………………………………………………………………………………………
; 按升序对字符串进行排序
AscendSort 过程         

    mov si, 65
    领导 dx，改变
    移动，数据1[si]
    cmp al, data2[si]
    ja l1    
    ？？？

    ret
升序排序结束
………………………………………………………………………………………………………………
; 按降序对字符串进行排序
DescendSort 过程

    ret
降序排序结束
………………………………………………………………………………………………………………
; 新队
换行程序

    mov 啊, 02h
    mov dl, 0ah
    整数 21 小时

    移动 dl, 0dh
    整数 21 小时   

    ret        
换行符 endp    
结束

结束主要；设置入口点并停止汇编程序。

```

用于对这些整个字符串进行排序的任何其他算法也将受到赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T20:04:50.777

实际上我自己想出了答案，我使用字符串命令将字符串 2 2 相互比较，看看它们是更大、更小还是相等。类似于下面特定宏中的代码，它需要两个字符串来检查它们并执行所需的操作，例如交换字符串以使它们排序：

```
check macro a, b
    local next, finish
    cld
    mov cx, 64  ; the size of our buffer that saves the string
    mov si, a
    mov di, b

    repe cmpsb  ; comparing two strings with each other
    ja next
    jmp finish

next:
    ; swaping our strings if needed
    mov cx, 64
    mov si, a
    lea di, change
    rep movsb 

    mov cx, 64
    mov si, b
    mov di, a
    rep movsb

    mov cx, 64
    lea si, change
    mov di, b
    rep movsb 

finish:

endm 
```

# stata - 如何回车一个长的本地列表以及如何只定义一次列表

> ID：14507087
> 
> 赞同：0
> 
> 时间：2013-01-24T17:22:13.200
> 
> 标签：stata, local, stata-macros

我的第一个问题很简单，但在任何地方都找不到任何答案，这让我发疯：

*   在Stata中定义本地列表时，如果列表真的很长，我该如何回车？

通常`///`在双引号内时不起作用。

例如，这不起作用：

```
local reglist "lcostcrp lacres lrain ltmax ///
ltmin lrainsq lpkgmaiz lwage2 hyb gend leducavg ///
lageavg ldextn lfertskm ldtmroad" 
```

当我删除引号时它确实有效，但我被警告我应该包含引号。

我的第二个问题是一个更严重的问题：

*   定义了 local`reglist`后，我怎样才能让 Stata 记住它以供后续多次使用（即，不仅仅是一次）？

例如：

```
local reglist lcostcrp lacres lrain ltmax ///
ltmin lrainsq ///
lpkgmaiz lwage2 ///
hyb gend leducavg lageavg ldextn lfertskm ldtmroad

reg lrevcrp `reglist' if lrevcrp~=.,r
mat brev=e(b)
mat lis brev

/*Here I have to define the local list again.  How do I get Stata to remember 
it from the first time ??? */

local reglist lcostcrp lacres lrain ltmax ///
ltmin lrainsq ///
lpkgmaiz lwage2 ///
hyb gend leducavg lageavg ldextn lfertskm ldtmroad

quietly tabstat `reglist' if lrevcrp~=., save
mat Xrev=r(StatTotal),1
mat lis Xrev 
```

在这里，我定义了 local `reglist`，然后`regression`使用这个列表运行 a 并做一些其他的事情。

然后，当我想获取 local 中所有变量的均值时`reglist`，Stata 不再记得它了，必须重新定义它。这违背了定义列表的全部目的。

如果有人能告诉我如何只定义一次列表并能够随意调用它多次，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:42:40.383

第一个问题的最佳答案是，如果您`local`在命令中输入长定义，那么（1）您不需要输入回车，您只需继续输入，Stata 将环绕和/或（2 ) 有更好的方法来处理`local`定义。我通常不会交互式地输入长的本地定义，因为这太乏味且容易出错。

引号对于像您这样的示例不是必需的，仅对于指示带有开始或结束空格的字符串是必需的。

你的第二个问题很神秘。Stata 不会忘记同一个程序中的局部宏定义（广义上），除非您明确地清除该宏，即将它重新定义为一个空字符串。此处程序（广义）表示`program`（狭义）、do-file、do-file 编辑器内容或主交互会话。你还没有解释为什么你认为会发生这种情况。我怀疑您正在做其他事情，例如在 do-file 编辑器中编写一些代码并结合通过命令窗口交互地编写命令来运行这些代码。这遇到了提到的困难：`local`宏是`local`定义它们的程序，因此（在同一示例中）在 do-file 编辑器中定义的宏对于该环境是本地的，但对主交互式会话不可见，反之亦然。

我建议您尝试提供一个 Stata 忘记我们可以自己测试的本地宏定义的示例，但我相信您将无法做到。

# tsql - TSQL，删除组中的负值

> ID：14507088
> 
> 赞同：-2
> 
> 时间：2013-01-24T17:22:14.200
> 
> 标签：tsql

我有一个包含以下数据的表：

```
Id  Name    Value
1   John    100
2   John    -500
3   John    500
4   Smith   10
5   Smith   20
6   Smith   -20
7   Stuart  -10
8   Wills   25 
```

我正在寻找可以删除 John -500 和 Smith -20 的有效 TSQL 查询（即，如果它们在同一组 [group by names] 中具有相似的正值，则记录具有负值）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:55:20.653

我认为这就是你所需要的。( [SQL 演示](http://sqlfiddle.com/#!3/46e60/1))

```
delete y
from mytable y join (
  select id,name, value
  from mytable x
  where value > 0) z on y.name = z.name and y.value = -1 * z.value 

select * from mytable
--SELECT RESULTS AFTER DELETING
ID  NAME    VALUE
1   John    100
3   John    500
4   Smith   10
5   Smith   20
7   Stuart  -10
8   Wills   25 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:57:55.567

```
delete a
from mytable a 
join mytable b
  on b.name = a.name
 and a.value < 0
 and b.value = -1 * z.value 
```

几乎和卡夫一样+1

# actionscript-3 - 如何获取作为函数输入的信息并将其保存在变量中？

> ID：14507090
> 
> 赞同：0
> 
> 时间：2013-01-24T17:22:21.610
> 
> 标签：actionscript-3, function, variables, input

我正在尝试为我的班级制作诸如集中注意力的游戏。我无法获取作为函数输入提供的信息并将它们保存到变量中。这是我正在尝试做的工作版本：[工作版本](http://vis.iu.edu/Class/res/swf/AFullDeckRevisited/AFullDeckRevisited.swf) 这是我的卡组件中的代码：

```
<fx:Script>
    <![CDATA[

        private var _frontFile:String;
        private var _backFile:String;

        public function makeCard(suit:String, value:String):void
        {
            _frontFile = "asset/Cards_deck_" + suit + "_" + value + ".jpg";
            _backFile = "asset/Cards_back_Jaguar.jpg";
            var _suit:String = suit;
            var _value:String = value;

        }

        public function turnUp():void
        {
            source = _frontFile;
        }

        public function turnDown():void
        {
            source = _backFile;
        }

        public function turnOver():void
        {
            if (source == _frontFile) {
                source = _backFile;
            }
            else if (source == _backFile) {
                source = _frontFile;
            }
        }

    ]]>
</fx:Script>

</s:Image> 
```

我的主要 MXML 文件：

```
<fx:Style>
    @namespace s "library://ns.adobe.com/flex/spark";
    @namespace mx "library://ns.adobe.com/flex/mx";
    s|Application {
        backgroundColor: #006600;
    }
    #titleLbl {
        color: white;
        fontSize: 60px;
        paddingTop: 15;
    }
    #infoLbl {
        color: yellow;
        fontSize: 24px;
    }
</fx:Style>

<fx:Script>
    <![CDATA[

        //Gabe Dougherty
        //n222
        //1-24-13

        import cardGames.*;

        private var deck:Deck = new Deck();

        private function init():void
        {
            // Let's exclude the face cards.
            deck.makeDeck(false);

            deck.shuffle();

            // Deal the cards.
            var cardCount:int = deck.numCards();
            for (var i:int = 0; i < cardCount; i++) {

                // Get a card and add it to 'playArea'.
                var c:Card = deck.dealCard();
                playArea.addElement(c);

                // Get the card ready for play.
                c.turnDown();
                c.addEventListener(MouseEvent.CLICK, chooseCard);
            }
        }

        private function chooseCard(e:MouseEvent):void
        {
            var card:Card = Card(e.currentTarget);
            card.turnUp();

            // Report on what type of card.
            infoLbl.text = "The card is the " + card.value + " of " + card.suit;
        }

    ]]>
</fx:Script>

<s:Label id="titleLbl" text="Concentration (sort of)"/>

<s:Label id="infoLbl" text="The card is ..."/>

<s:TileGroup id="playArea" requestedRowCount="4"/>

</s:Application> 
```

如果需要，然后是我的甲板组件：

```
<fx:Script>
    <![CDATA[

        //set the properties
        private var _suitNames:Array = ['clubs', 'diamond', 'heart', 'spade'];
        private var _valueNames:Array = ['2', '3', '4', '5', '6', '7', '8', '9', '10'];
        private var _faceNames:Array = ['jack', 'queen', 'king', 'ace'];
        private var _cards:Array = new Array;

        //set the methods
        public function dealCard():Card {
            return _cards.pop();
        }

        public function numCards():Number {
            return _cards.length;
        }

        public function shuffle():void {
            for (var i:int = 0; i < _cards.length; i++) {

                // Take the last card from the deck.
                var c:Card = _cards.pop();

                // Insert the card back towards the front of the deck, at a random location.
                var index:int = Math.random() * (i + 1);
                _cards.splice(index, 0, c);
            }
        }

        public function makeDeck(includeFaces:Boolean=true):void {                        
            for each (var suit:String in _suitNames) {

                for each (var value:String in _valueNames) {

                    var card:Card = new Card();
                    card.makeCard(suit, value);
                    _cards.push (card);
                }
            }

                if(includeFaces == true){
                    for each (var suit:String in _suitNames) {

                        for each (var value:String in _faceNames) {

                            var card:Card = new Card();
                            card.makeCard(suit, value);
                            _cards.push (card);
                    }

                }
            }
        }
    ]]>
</fx:Script>
</fx:Object> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:05:53.277

如果您在函数内声明一个变量，那么它的作用域是该函数的本地变量。你不能在函数之外使用它——它不存在。

因此，如果您希望类的其余部分可以访问这些声明`_suit`，则需要将这些声明移到函数`_value`之外：`makeCard`

```
private var _frontFile:String;
private var _backFile:String;
private var _suit:String;
private var _value:String

public function makeCard(suit:String, value:String):void {
    _frontFile = "asset/Cards_deck_" + suit + "_" + value + ".jpg";
    _backFile = "asset/Cards_back_Jaguar.jpg";
    _suit = suit;
    _value = value;

} 
```

但是...由于这些是私有变量，您将无法从 Card 类外部访问它们。您*可以*将它们设为公共变量，但更灵活的方法是将访问器方法添加到类中。这些是允许其他类访问值的公共函数：

```
public function get suit():String {
    return _suit;
}

public function get value():String {
    return _value;
} 
```

现在你的程序应该可以工作了。

如果您需要能够从 Card 类外部更改这些值，则需要编写公共“setter”方法来修改私有变量的值。

# android - Android：清除所有应用程序的缓存？

> ID：14507092
> 
> 赞同：24
> 
> 时间：2013-01-24T17:22:28.100
> 
> 标签：android, caching

在我正在制作的 Android 应用程序中，我希望能够以编程方式清除设备上所有应用程序的缓存。这已经被问过很多次了：以 [编程方式清除应用程序缓存？](https://stackoverflow.com/questions/4605571/clearing-app-cache-programmatically) [清除Android应用缓存的反射方法](https://stackoverflow.com/questions/10262998/reflecting-methods-to-clear-android-app-cache) [清除另一个应用程序缓存](https://stackoverflow.com/questions/14047895/clear-another-applications-cache) ，每个人都说没有root是不可能的。

然而，情况显然并非如此。如果您查看 Google Play 中的 App Cache Cleaner、History Eraser、1Tap Cleaner、Easy History Cleaner 和无数其他类似的应用程序（所有这些都不需要 root），您会发现它们都可以做到这一点。因此，这是可能的，但我找不到任何公开的例子来做到这一点。

有谁知道所有这些应用程序在做什么？

谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-24T19:25:51.300

这是一种不需要的方法`IPackageDataObserver.aidl`：

```
PackageManager  pm = getPackageManager();
// Get all methods on the PackageManager
Method[] methods = pm.getClass().getDeclaredMethods();
for (Method m : methods) {
    if (m.getName().equals("freeStorage")) {
        // Found the method I want to use
        try {
            long desiredFreeStorage = 8 * 1024 * 1024 * 1024; // Request for 8GB of free space
            m.invoke(pm, desiredFreeStorage , null);
        } catch (Exception e) {
            // Method invocation failed. Could be a permission problem
        }
        break;
    }
} 
```

您需要在清单中包含此内容：

```
<uses-permission android:name="android.permission.CLEAR_APP_CACHE"/> 
```

这要求 Android 清除足够多的缓存文件，以便有 8GB 可用空间。如果您将此数字设置得足够高，您应该可以达到您想要的效果（Android 将删除缓存中的所有文件）。

其工作方式是，Android 保留所有应用程序缓存目录中所有文件的 LRU（最近最少使用）列表。当您调用`freeStorage()`它时，检查是否有存储量（在本例中为 8GB）可用于缓存文件。如果没有，它首先删除**最旧**的文件，开始从应用程序的缓存目录中删除文件。它会继续删除文件，直到不再有任何文件要删除，或者它已释放您请求的存储量（在本例中为 8GB）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T18:13:14.543

您可以使用[此](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/content/pm/PackageManager.java#PackageManager.freeStorageAndNotify%28long,android.content.pm.IPackageDataObserver%29) （freeStorageAndNotify）方法清除所有应用程序的数据。您必须使用 java 反射访问此方法。您将需要 IPackageDataObserver.aidl。您还需要在清单文件中拥有删除缓存的权限

# python - Python - 使用许多参数调用 popen

> ID：14507094
> 
> 赞同：1
> 
> 时间：2013-01-24T17:22:29.427
> 
> 标签：python, exec, popen

我正在尝试使用参数列表调用 popen 。

```
 execString = "java -jar {} {} {} {} {} {}".format(os.path.join(config.java_root,
                                                                   config.java_jar),
                                               self.canvasSize,
                                               self.flightId,
                                               self.domain,
                                               self.defPath,
                                               self.harPath)
    execStringList = execString.split()
    print execStringList
    subprocess.Popen([execStringList]) 
```

execStringList 是：

```
['java', '-jar', '/Users/me/Projects/reporting-test/build/clickunit-0.1.jar', '300x1050', '123', 'dev.me.net', '/Users/me/Projects/reporting-test/src/definitions/300x1050.yml', '/Users/me/Projects/reporting-test/out/01/15112'] 
```

根据：[Python OSError: [Errno 2]](https://stackoverflow.com/questions/901982/python-oserror-errno-2)是正确的格式。但是，我收到以下错误：

```
 File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 672, in __init__
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 1202, in _execute_child
AttributeError: 'list' object has no attribute 'rfind' 
```

如果我将 execString 视为字符串，则会收到不同的错误：

```
 File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 672, in __init__
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 1202, in _execute_child
OSError: [Errno 2] No such file or directory 
```

即使我从终端运行此命令，它也可以工作。

```
$> java -jar /Users/me/Projects/reporting-test/build/clickunit-0.1.jar 300x1050 123 dev.me.net /Users/me/Projects/reporting-test/src/definitions/300x1050.yml /Users/me/Projects/reporting-test/out/01/3727 
```

TIA 的帮助！

**编辑**

编辑编辑

没关系，我看到了问题。[]...谢谢！呵呵

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T17:25:25.473

`execStringList`已经是一个列表，所以你可以直接将它传递给`subprocess.Popen`.

```
execString = "java -jar {} {} {} {} {} {}".format(os.path.join(config.java_root,
                                                               config.java_jar),
                                           self.canvasSize,
                                           self.flightId,
                                           self.domain,
                                           self.defPath,
                                           self.harPath)
execStringList = execString.split()
print execStringList
# Pass execStringList directly to Popen
subprocess.Popen(execStringList) 
```

# c# - 无法在 Visual Studio 2012 中打开 CLR 项目（在 Visual Studio 2008 中创建）

> ID：14507095
> 
> 赞同：2
> 
> 时间：2013-01-24T17:22:40.310
> 
> 标签：c#, visual-studio-2012, clr, project

我收到这条消息：

> C:\tfs\cloud\Acision\Acision.DatabaseClr.DocumentService\Acision.DatabaseClr.DocumentService\Acision.DatabaseClr.DocumentService.csproj：错误：无法转换类型为“Microsoft.VisualStudio.Data.Tools.Package.Project”的对象。 DatabaseFileNode”键入“Microsoft.VisualStudio.Data.Tools.Package.Project.Internal.FolderNode”。

在项目下的解决方案中它说：

> 该项目需要用户输入。重新加载项目以获取更多信息。

任何人都可以帮忙吗？

# scala - Specs2 - 如何为 Given/When/Then 步骤定义复杂对象

> ID：14507098
> 
> 赞同：0
> 
> 时间：2013-01-24T17:23:05.540
> 
> 标签：scala, bdd, agile, specs2

Specs2 的文档和示例显示了一些关于在验收测试中使用 Given/Then/When 样式的代码。

这里是其中之一：

```
"A given-when-then example for the addition"                   ^
    "Given the following number: ${1}"                         ^ number1 ^
    "And a second number: ${2}"                                ^ number2 ^
    "And a third number: ${3}"                                 ^ number3

  val number1: Given[Int]               = (_:String).toInt
  val number2: When[Int, (Int, Int)]    = (n1: Int) => (s: String) => (n1, s.toInt)
  val number3: When[Seq[Int], Seq[Int]] = (numbers: Seq[Int]) => (s: String) => numbers :+ s.toInt 
```

但是，它只处理`Int`这里的一些原始对象（正常，因为它是一个样本）。

但是如何处理复杂的对象呢？使用`Datatables`?

理想的做法是在一些“夹具”文件中定义定义复杂对象的数据表（或类似事物）。

*`User`定义“Mik”的外部数据表*

```
"name" |   "job"    | "e-mail"
"mik"  | "engineer" | "mik@mik.com" 
```

我想创建一个像这样的给定语句：

```
"Given the following user: ${Mik}"       ^ retrieve_user_from_database ^

val user: Given[User]               = .....Some ideal codes here to map Mik's values to User model. 
```

什么是好的做法以及 Specs2 目前提供了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:03:19.470

如果要从现有数据库中检索用户，可以执行以下操作：

```
"Given the following user: ${Mik}" ^ user ^

val user: Given[User] = (name: String) => database.getUserByName(name) 
```

现在您可能希望在执行此操作之前用用户填充您的数据库。一种可能性确实是使用数据表：

```
def populateDatabase = 
  "name" ||   "job"    | "e-mail"        |
  "mik"  !! "engineer" ! "mik@mik.com"   |
  "eric" !! "engineer" ! "eric@eric.com" | { (name, job, email) => 
    database.saveUser(User(name, job, email)) must not(throwAn[Exception])
  } 
```

并将其放在`Step`您的 G/W/T 组之前：

```
Step(populateDatabase) ^
"Given the following user: ${Mik}"  ^ user ^
"This user should be an ${engineer} ^ jobOk ^
                                      end

val user: Given[User] = (name: String) => database.getUserByName(name)
val jobOk: Then[User] = (user: User) => (job: String) => user.job must_== job 
```

# c# - MVC API 控制器的复杂对象未从 jquery ajax 调用中填充

> ID：14507101
> 
> 赞同：2
> 
> 时间：2013-01-24T17:23:19.383
> 
> 标签：c#, asp.net-mvc, jquery, asp.net-mvc-4

我正在尝试调用 POST API 控制器。控制器被调用，但复杂对象为空。我已经运行了 Fiddler，并且该对象甚至来自那里。我究竟做错了什么？

***我的 C# 对象***

```
public class RegisterUser
{
    public Guid PersonId { get; set; }
    public string Email { get; set; }
    public string Business { get; set; }
    public string EmployeeNumber { get; set; }
    public string UserName { get; set; }
} 
```

***API 后控制器***

```
public HttpResponseMessage Post(RegisterUser user)
{
   //This is where the problem is. Everything in user is null 
   //even though I can see it coming through on Fiddler.
} 
```

***Javascript代码***

```
function User(personId, userName, email, business, employeeNumber) {
   this.PersonId = personId;
   this.Email = email;
   this.Business = business;
   this.EmployeeNumber = employeeNumber;
   this.UserName = userName;
}

function RegisterUser(url) {
   var createdUser = new User("b3fd25ba-49e8-4247-9f23-a6bb90a62691", "username", "email", "business", "56465");
   $.ajax(url, {
       data: JSON.stringify({ user: createdUser }),
       type: "post",
       contentType: "application/json"
  });
} 
```

***Web API 路由配置***

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute(
            name: "RegisterApi",
            routeTemplate: "api/{controller}/{user}"
        );
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:12:11.877

`createdUser`已经以正确的格式包含 Web.Api 所需的数据，无需将其包装在`user`混淆模型绑定器的属性中。

只需编写`data: JSON.stringify(createdUser)`它应该可以正常工作：

```
function RegisterUser(url) {
   var createdUser = new User("b3fd25ba-49e8-4247-9f23-a6bb90a62691", "username", "email", "business", "56465");
   $.ajax(url, {
       data: JSON.stringify(createdUser),
       type: "post",
       contentType: "application/json"
  });
} 
```

模型绑定的原理很简单，除非您在 JS 和 C# 对象中具有匹配的属性名称和对象结构，并且它应该可以正常工作。

# python - itertools.izip() 用于未预定义的列表计数

> ID：14507102
> 
> 赞同：1
> 
> 时间：2013-01-24T17:23:21.127
> 
> 标签：python, itertools

我有以下数据结构：`{'one':['a','b','c'],'two':['q','w','e'],'three':['t','u','y'],...}`. 所以，字典有不同的键数。由 dict 的键选择的每个数组都具有相似的长度。如何将此结构转换为以下结构：`[{'one':'a','two':'q','three':'t'},{'one':'b','two':'w','three':'y'},...]`？

我想我应该使用 itertools.izip()，但是我如何在没有预定义的 args 计数的情况下应用它？也许是这样的：`itertools.izip([data[l] for l in data.keys()])`？

蒂亚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:28:47.963

不是非常优雅，但可以做到：

```
In [9]: [{k:v[i] for (k,v) in d.items()} for i in range(len(d.values()[0]))]
Out[9]: 
[{'one': 'a', 'three': 't', 'two': 'q'},
 {'one': 'b', 'three': 'u', 'two': 'w'},
 {'one': 'c', 'three': 'y', 'two': 'e'}] 
```

我不禁想到必须有更好的方法来表达`i`循环，但现在什么都没有想到。

或者：

```
In [50]: map(dict, zip(*[[(k, v) for v in l] for k, l in d.items()]))
Out[50]: 
[{'one': 'a', 'three': 't', 'two': 'q'},
 {'one': 'b', 'three': 'u', 'two': 'w'},
 {'one': 'c', 'three': 'y', 'two': 'e'}] 
```

不确定这是否在可读性方面有很大的改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:29:00.280

您对使用[izip](http://docs.python.org/2/library/itertools.html#itertools.izip)的评估是正确的，但使用它的方式不太正确

你首先需要

*   将项目作为元组列表（键，值）获取，（`iteritems()`如果使用 Py2.x 或使用 Py3.x，`items()`则使用方法）
*   创建键和值的标量积
*   展平列表（使用 itertools.chain）
*   压缩它（使用 itertools.izip）
*   然后为每个元素创建一个字典

这是示例代码

```
>>> from pprint import PrettyPrinter
>>> pp = PrettyPrinter(indent = 4)
>>> pp.pprint(map(dict, izip(*chain((product([k], v) for k, v in data.items())))))
[   {   'one': 'a', 'three': 't', 'two': 'q'},
    {   'one': 'b', 'three': 'u', 'two': 'w'},
    {   'one': 'c', 'three': 'y', 'two': 'e'}]
>>> 
```

# ajax - Cakephp 如何使用 jsHelper 发出 ajax 请求

> ID：14507107
> 
> 赞同：0
> 
> 时间：2013-01-24T17:23:44.057
> 
> 标签：ajax, cakephp, cakephp-2.1

我想使用 JsHelper 在我的 cakePHP 视图中使用代码块重写此 jQuery Ajax 请求，该请求不适用于 cakePHP。到目前为止，我已经设置了所有东西（在我的控制器中包含了帮助程序，在我的布局中写入了缓冲区，包含了我的库（jQuery）），但我不知道如何重写它：

```
 $.ajax
            ({
                url: 'clients/loadJsonMarkers',
                accepts: 'json',
                type: 'POST',
                data: postData,
                dataType: 'json',
                error: function(xhr,status,err){
                    alert("DEBUG: status"+status+" \nError:"+err);
                },  
                success: function(transport)
                {   

                    var markers = new Array();

                    for(var i in transport.clients)
                    {
                        var latlng = transport.clients[i].Client.geoloc.replace("(", "");
                        latlng = latlng.replace(")", "");
                        latlng = latlng.split(',');

                        //console.debug(latlng);
                        markers.push(new google.maps.LatLng(parseFloat(latlng[0]),parseFloat(latlng[1])));
                    }

                    loadMap(markers);

                }
            }); 
```

到目前为止，我所取得的成就是：

```
 $this->Js->get('document');
    $this->Js->event('load',
            $this->Js->request(
                array('action' => 'loadJsonMarkers'),
                array('assync'=>TRUE, 'type'=>'json', 'method'=>'POST', 'data'=>$_POST)
                ),
            array('success'=>$this->Html->scriptBlock("
                    function(transport)
                    {   
                        var markers = new Array();

                        for(var i in transport.clients)
                        {
                            var latlng = transport.clients[i].Client.geoloc.replace('(', '');
                            latlng = latlng.replace('(', '');
                            latlng = latlng.split(',');

                            //console.debug(latlng);
                            markers.push(new google.maps.LatLng(parseFloat(latlng[0]),parseFloat(latlng[1])));
                        }

                        loadMap(markers);

                    }"
            ))
    ); 
```

但我觉得缺少了一些东西，我不知道我是否应该使用这个选择器（文档）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T01:19:39.377

由于 Cake 会缓冲所有内容并将其放入一个`$(document).ready()`函数中，因此您需要做的就是将其添加到缓冲区中。

```
$request = $this->Js->request(
  array('action' => 'loadJsonMarkers'),
  array(
    'async' => true, 
    'type' => 'json', 
    'method' => 'POST', 
    'data' => $_POST,
    'wrapCallbacks' => false,
    'success' => "function(transport) {
      var markers = new Array();

      for(var i in transport.clients) {
        var latlng = transport.clients[i].Client.geoloc.replace('(', '');
        latlng = latlng.replace('(', '');
        latlng = latlng.split(',');

        markers.push(new google.maps.LatLng(parseFloat(latlng[0]),parseFloat(latlng[1])));
      }
      loadMap(markers);
    }"
  )  
);
$this->Js->buffer($request); 
```

确保在布局中写入缓冲区。

但是，由于您已经编写了纯 JS，您可能应该只是缓冲它，因为 JsHelper[可能会在 CakePHP 3.0 中被删除](https://groups.google.com/d/topic/cakephp-core/UaXqk_rTdxE/discussion)。

# javascript - 如何在 ASP.NET ViewState HiddenField 中设置 ASP.NET TextBox 值的值

> ID：14507110
> 
> 赞同：2
> 
> 时间：2013-01-24T17:23:47.690
> 
> 标签：javascript, jquery, asp.net

我有一个 ASP.NET 文本框，它的文本是用 JavaScript 设置的保存 ASP.NET 控件的状态

那么有没有一种由 ASP.NET 团队正式创建的方法来手动将 TextBox 的值设置为 HiddenField 或者有一个技巧另一方面我不需要编写任何服务器端代码来保存从客户端设置的该值的状态

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:13:35.357

所以你有一个 asp 文本框，而你后面的代码没有获得它的价值？

我想你快要回答你自己的问题了

如果该值是通过 javascript 设置的，那么它就像最终用户刚刚输入它一样 - 它在客户端上，您只需要将它获取到服务器

如果在文本框上启用了视图状态并执行了回发，那么它将被发送到服务器
......所以其中一件事情不会发生

即您需要在文本框上启用您的视图状态和/或启动回发

# java - main 中的方法不会调用对象实例的方法？

> ID：14507111
> 
> 赞同：0
> 
> 时间：2013-01-24T17:23:55.243
> 
> 标签：java, function, methods

这是一个包含 3 个类文件的 java 作业。问题是当我在 main 中调用“doOperations”方法时。if 语句正确读取文件，但对象方法不起作用（例如 tv.on、tv.volumeUp tv.setChannel(scan.nextInt() 等））。

谁能看到我哪里出错了？谢谢。

电视类文件。

```
import java.io.*;
import java.util.Scanner;

public class TV {
    boolean on;
    boolean subscribe;
    int currentchannel;
    int indexChan;
    int volume;
    File chanList;
    Scanner chanScan;
    TVChannel[] channels;
    final int MaxChannel = 100;

    public TV(){
        on = false;
        currentchannel = 1;
        volume = 1;
        channels = new TVChannel[MaxChannel];   //Create object of an array, default value = null.
        subscribe = false;

    }

    public void turnOn(){
        on = true;
    }
    public void turnOff(){
        on = false;
    }
    public void channelUp(){
        currentchannel++;
    }
    public void channelDown(){
        currentchannel--;
    }
    public void volumeUp(){
        volume++;
    }
    public void volumeDown(){
        volume--;
    }
    public TVChannel getChannel(){
        return channels[currentchannel];
    }
    public void setChannel(int c){
        if(channels[c]!= null)
        currentchannel = c;
    }
    public boolean subscribe(String provider) throws IOException{
        chanList = new File(provider);
        chanScan = new Scanner(chanList);

        if(chanList.exists()){
            while(chanScan.hasNext()){

                indexChan = chanScan.nextInt();
                channels[indexChan] = new TVChannel(indexChan, chanScan.nextLine());

            }
            chanScan.close();
            return true;
        }
        else return false;
    }

    public void printAll(){
        for(int i = 0; i < MaxChannel; i++){

            if(channels[i]!= null)
            System.out.println(channels[i].channelNumber+"\t"+channels[i].channelName);
        }
    }

    public void displayChannel(int c){
        if(channels[c]!= null)
        System.out.println(channels[c].getChannel()+"\t"+channels[c].getName());
    }
    public void displayCurrentChannel(){
        if(channels[currentchannel] != null)
        System.out.println(channels[currentchannel].getChannel() +" "+ channels[currentchannel].getName());
    }
} 
```

主功能

```
import java.io.File;
import java.io.IOException;
import java.util.Scanner;

public class TestTV {

    public static void main(String[] args) throws IOException{

        TV tv = new TV();
        tv.subscribe("chan.txt");

        if(tv.subscribe = true){
            tv.printAll();
            doOperations("operations.txt", tv);

        }

    }
    //Static means only one instance of object. 
    public static void doOperations(String opFileName, TV tv) throws IOException{
            File op = new File(opFileName);
            Scanner scan = new Scanner(op);
            String opa = scan.next();

            while(scan.hasNext()){
                System.out.println(scan.next());

                if(opa.equals("on")) tv.turnOn();
                else if(opa.equals("off")) tv.turnOff();
                else if(opa.equals("channelUp")) tv.channelUp();
                else if(opa.equals("channelDown")) tv.channelDown();
                else if(opa.equals("volumeUp")) tv.volumeUp();
                else if(opa.equals("volumeDown")) tv.volumeDown();
                else if(opa.equals("showChannel")) tv.displayCurrentChannel();
                else if(opa.equals("setChannel"))tv.setChannel(scan.nextInt()); //Error
            }
            scan.close();
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:30:09.450

你忘了把它 `String opa = scan.next();`放在 while 循环中。当然，您需要将结果存储在每个令牌上。

```
while(scan.hasNext()){
    opa = scan.next();
    System.out.println(opa); //don't just call scan.next() 
                             //and discard the result. Unless that's really what you want?
    .....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:18:19.290

你的代码没有错。确保您的 operation.txt 看起来像这样 showChannel setChannel 2

注意：因为你是 scan.next(); 在 while 循环之前并在循环中再次作为 System.out.println(scan.next()); 您将忽略 operation.txt 的第一行，您会看到它正确设置了频道。

建议：改成

```
 String opa= "";// = scan.next();
        while(scan.hasNext()){
            System.out.println(scan.next()); 
```

# python - 是否可以装饰其实例将被腌制的 Python 类？

> ID：14507112
> 
> 赞同：1
> 
> 时间：2013-01-24T17:23:55.540
> 
> 标签：python, decorator, pickle, python-decorators

以下代码正确运行：

```
import pickle

class MyClass():   
    def __init__(self, arg):
        self.arg = arg

a = MyClass('my arg')
with open('/home/mahikeulbody/mypickle', 'wb') as file:
    pickle.dump(a, file) 
```

但是添加一个装饰器来获得一个多吨类：

```
import pickle

def multiton(cls):
    instances = {}
    def getinstance(arg):
        if arg not in instances:
            instances[arg] = cls(arg)
        return instances[arg]
    return getinstance

@multiton
class MyClass():   
    def __init__(self, arg):
        self.arg = arg

a = MyClass('my arg')
with open('/home/michel/mypickle', 'wb') as file:
    pickle.dump(a, file) 
```

产生以下错误：

```
pickle.dump(a, file)
_pickle.PicklingError: Can't pickle <class '__main__.MyClass'>: it's not the same object as __main__.MyClass 
```

怎么了 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:26:52.893

Pickle 必须能够直接加载类。您的装饰器将类*替换*为工厂函数，从而使 pickle 无法导入该类本身。

使用单独的工厂函数，而不是装饰器，返回一个“私有”类（但仍可直接导入）：

```
class _MyClass():   
    def __init__(self, arg):
        self.arg = arg

def MyClass(arg, instances={}):
    if arg not in instances:
        instances[arg] = _MyClass(arg)
    return instances[arg] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T14:11:31.483

为此，我会使用[dill](http://pythonhosted.org/dill)，它可以在 python 中序列化几乎任何东西。

```
>>> def multiton(cls):
...     instances = {}
...     def getinstance(arg):
...         if arg not in instances:
...             instances[arg] = cls(arg)
...         return instances[arg]
...     return getinstance
... 
>>> @multiton
... class MyClass():   
...     def __init__(self, arg):
...         self.arg = arg
... 
>>> import dill
>>>                       
>>> a = MyClass('my arg')
>>> b = dill.loads(dill.dumps(a))
>>> a
<__main__.MyClass instance at 0x4d64558>
>>> b
<__main__.MyClass instance at 0x4d64800> 
```

Dill 还提供[了一些很好的工具](https://github.com/uqfoundation/dill/blob/master/dill/detect.py)，可以帮助您了解在代码失败时导致酸洗失败的原因。

# groovy - Groovy AST - 在编译时添加注释

> ID：14507114
> 
> 赞同：7
> 
> 时间：2013-01-24T17:24:01.530
> 
> 标签：groovy

我正在尝试动态创建一个注释，该注释将使用元编程和 AST 为类中的每个字段动态添加一个 @XmlElement 注释。我在创建注释并将它们正确应用到字段时遇到问题。

我的代码格式在这里： http: [//pastebin.com/60DTX5Ya](http://pastebin.com/60DTX5Ya)

```
import javax.xml.bind.annotation.XmlElement

@GroovyASTTransformation(phase = CompilePhase.CANONICALIZATION)
class WebserviceAnnotationModifier implements ASTTransformation {
@Override
void visit(ASTNode[] astNodes, SourceUnit sourceUnit) {

    if (!astNodes) return
    if (!astNodes[0] || !astNodes[1]) return
    if (!(astNodes[0] instanceof AnnotationNode)) return
    if (!(astNodes[1] instanceof ClassNode)) return
    ClassNode node = (ClassNode)astNodes[1]
    List fields = node.getFields()
    fields.each {FieldNode field ->
        field.addAnnotation(ClassHelper.make(new XmlElement.DEFAULT()));
    }
}
}

@Retention(RetentionPolicy.SOURCE)
@Target([ElementType.TYPE])
@GroovyASTTransformationClass(classes =[WebserviceAnnotationModifier])
public @interface WebresourceAnnotation{}

@WebresourceAnnotation
class TestPerson{
    String name;
    String lastName;
    int Age
} 
```

我接近这一切都错了吗？我这样做的原因是我有一个仍在制作中的域，我想进入并将注释应用于所有字段。找不到在编译期间添加的任何注释示例。这不可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T10:17:31.533

仅使用 Groovy AST Transformation 编写代码不适用于 Grails 重新加载机制。这是为 Grails 应用程序实现 AST 转换的正确方法。

1.  您的变压器类必须扩展[`AbstractGrailsArtefactTransformer`](http://grails.org/doc/latest/api/org/codehaus/groovy/grails/compiler/injection/AbstractGrailsArtefactTransformer.html)。
2.  您的变压器类必须由`@AstTransformer`.
3.  你的类必须放在`org.codehaus.groovy.grails.compiler`或其子包下。就我而言，我使用`org.codehaus.groovy.grails.compiler.zk`它并且工作正常。
4.  实施`shouldInject()`以仅匹配您想要的类，在本例中为域类。
5.  在那里覆盖`performInjection()`并编写您的代码。
6.  **将您的转换器和相关类**打包到一个****.jar**文件中，否则 Grails 编译器不会加载它。**

# linux - 如何在 Linux 中的 emacs 文件上运行 LateX？

> ID：14507117
> 
> 赞同：0
> 
> 时间：2013-01-24T17:24:06.863
> 
> 标签：linux, emacs, latex

我是一个绝对的初学者，我以前从未在 Linux 机器上工作过。我正在家里的虚拟机上处理 emacs 文件。现在我在学校的 Linux 机器上，如何在文件上运行 LateX 并查看 dvi？我能够打开 emacs 并加载文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T17:30:26.673

你可以使用`C-c C-c`, 绑定到函数`tex-compile`。

这是一个有用的提示：您可以使用`C-h m`来调出模式的文档。该文档通常包含与模式关联的键绑定列表。在这种情况下，“特殊命令：”标题下有一个列表，其中包括`C-c C-c` `tex-compile`将来可能有用的一些其他命令。

Emacs 最好的地方之一是它是自记录的，因此学习使用帮助系统（以 开头的键`C-h`）是非常宝贵的。

# css - 是否可以在 HTML5 输入 type="date" 元素上设置默认占位符文本的样式？在铬？

> ID：14507119
> 
> 赞同：13
> 
> 时间：2013-01-24T17:24:21.763
> 
> 标签：css, html, google-chrome, webkit

我有一个带有日期列表的表单，我使用 HTML 5`input type="date"`元素来表示它们。我想更改没有值的字段的颜色（即显示`dd/mm/yyyy`的字段），以便更容易将它们与包含实际日期的字段区分开来。

这可能吗？我认为这`-webkit-input-placeholder`可能已经完成了我想要的，但似乎没有。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-24T19:14:01.493

Chrome 中的日期输入中没有占位符。如果您在 devtools 的设置中选中“显示阴影 DOM”，您将能够检查它：

```
<input type="date">
  #document-fragment
    <div dir="ltr" pseudo="-webkit-date-and-time-container">
      <div pseudo="-webkit-datetime-edit">
      <span aria-help="Day" aria-valuemax="31" aria-valuemin="1" pseudo="-webkit-datetime-edit-day-field" role="spinbutton">dd</span>
      <div pseudo="-webkit-datetime-edit-text">/</div>
      <span aria-help="Month" aria-valuemax="12" aria-valuemin="1" pseudo="-webkit-datetime-edit-month-field" role="spinbutton">mm</span>
      <div pseudo="-webkit-datetime-edit-text">/</div>
      <span aria-help="Year" aria-valuemax="275760" aria-valuemin="1" pseudo="-webkit-datetime-edit-year-field" role="spinbutton">yyyy</span></div>
      <div></div>
      <div pseudo="-webkit-calendar-picker-indicator"></div>
    </div>
</input> 
```

您可以使用它们的伪元素设置单独的元素样式（在 Chrome Canary 中工作）：

```
::-webkit-datetime-edit-year-field {
  font-weight: bold;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-24T21:20:15.640

`aria-valuetext`感谢现有的答案，我设法解决了。只有当日期字段有值时，日月和年字段才会获得属性。这意味着当日期字段显示其默认值时，我可以设置这些值的样式，如下所示：

```
::-webkit-datetime-edit-day-field:not([aria-valuetext]),
::-webkit-datetime-edit-month-field:not([aria-valuetext]),
::-webkit-datetime-edit-year-field:not([aria-valuetext]) 
{
  color: #999;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-04T17:10:28.013

从 Chrome 31（可能更早）开始，aria-valuetext 是“空白”而不是 null。以下任一项工作

```
::-webkit-datetime-edit-year-field[aria-valuetext=blank]
::-webkit-datetime-edit-year-field:not([aria-valuenow]) 
```

而不是：

```
::-webkit-datetime-edit-year-field:not([aria-valuetext]) 
```

（我没有代表评论相关答案）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-10-23T00:34:16.477

编辑：这不再起作用

我希望“占位符”文本为灰色。根据@JackBradford 的回答，我正在使用：

```
::-webkit-datetime-edit-text, /* this makes the slashes in dd/mm/yyyy grey */
::-webkit-datetime-edit-day-field[aria-valuetext=blank],
::-webkit-datetime-edit-month-field[aria-valuetext=blank],
::-webkit-datetime-edit-year-field[aria-valuetext=blank] {
  color: lightgrey;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-24T17:45:23.637

-`placeholder`属性当前不受输入字段支持`type="date"`，因此无法设置样式。看看这个有效属性列表：

[w3.org：“输入类型=日期 - 日期输入控件”](http://www.w3.org/TR/html-markup/input.date.html)

因此，与根本不关心`date`-type 的 Safari 相比，Chrome 实际上做得很好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-20T15:59:59.537

正如一些评论中提到的，这些解决方案似乎都不适用于最新版本的 Chrome，我可以验证这仍然是 v94 的情况。正如 Eli 提到的，在尝试选择伪元素的属性时似乎存在问题。

如果您不介意使用一点 JavaScript 在`<input type="date" />`元素上设置属性，那么可以想出一个 hacky CSS 选择器作为解决方法。

例如，`data-hasvalue`一旦输入有值，我就使用 JavaScript 设置属性，然后使用以下 SCSS。

```
 &[type="date"]:not([data-hasvalue]):not(:invalid):not(:focus) {
    &::-webkit-datetime-edit-text,
    &::-webkit-datetime-edit-day-field,
    &::-webkit-datetime-edit-month-field,
    &::-webkit-datetime-edit-year-field {
      color: rgb(117, 117, 117); // Chrome's default color for input placeholder text
    }
  } 
```

确保`data-hasvalue`为所有日期输入设置了该属性，否则在设置值时您将获得占位符样式文本。或者，通过执行相反的操作并仅在**未**设置值时定位来选择行为。

# ruby - 如何从 rake 任务中找到另一个 rake 任务的文件系统位置？

> ID：14507126
> 
> 赞同：1
> 
> 时间：2013-01-24T17:24:35.763
> 
> 标签：ruby, rake, rake-task

我基本上是在尝试将这个问题的解决方案转换为 rake 任务：[如何找到 rake 任务的源文件？](https://stackoverflow.com/questions/830423/how-do-i-find-the-source-file-for-a-rake-task)

我想输入，例如：

```
rake meta:where[test] 
```

并获取定义测试任务的路径。这是我所拥有的，有一些不必要的东西，所以我可以发表一些相关的评论：

```
Rake::TaskManager.record_task_metadata=true

namespace :meta do
  desc "meta:where[taskname] - where is taskname defined?"
  task :where, [:taskname] do |t, args|
    tsk = Rake.application.tasks.each.find {|t| t.name == args.taskname}
    puts tsk
    tsk.locations.each {|x| puts x}
  end
end 
```

所以， puts tsk 实际上输出'test'，这意味着（我认为！）我在这里正确地定位了任务。使用相同的代码从 rails 控制台打印路径没有问题（如上述 SO 帖子中所示）。它说的是：

```
/Users/me/.rvm/gems/ruby-1.9.3-p362/gems/railties-3.2.11/lib/rails/test_unit/testing.rake:49:in `<top (required)>' 
```

知道如何获取要打印的位置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T15:03:08.293

如上所述，来自链接问题的代码有效，例如

```
namespace :meta do
  desc "meta:where[taskname] - where is taskname defined?"
  task :where, [:taskname] do |t, args|
    puts "looking for #{args.taskname}"
    tsk = Rake.application[args.taskname]
    # It is mysterious to me why this would need to be so complicated
    puts tsk.actions.map(&:source_location)
  end
end 
```

但是，如果有人能解释为什么上面问题中的代码不起作用，或者为什么`source_locations`访问必须如此复杂，我仍然很想知道！

# php - 具有双重提交的 Ajax 表单

> ID：14507133
> 
> 赞同：1
> 
> 时间：2013-01-24T17:24:51.963
> 
> 标签：php, jquery, ajax, ajaxform

所以我相信我们都在网上看到了很棒的 ajax 表单，它允许您填写表单然后点击提交，然后区域会发生变化。像这个：

[阿贾克斯表格](http://demo.tutorialzine.com/2009/09/fancy-contact-form/demo.php)

但我希望能得到一份双重提交表格。例如，有人填写了他们的电话号码，然后表格发生了变化，然后给了他们另一个必须输入确认码的框，因为第一次提交给他们的手机发送了一个确认码。因此，一旦他们第二次点击提交 - 它就会做出相应的响应。

有没有人见过这样的，或者有没有人做过或知道怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:26:42.630

让第一次点击的处理函数改变布局，将一个新函数绑定到它被点击的按钮，然后用 $.unbind 解除绑定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:40:37.680

您可以按以下步骤操作：

1.  首先输入电话号码并在 AJAX 的帮助下提交表单
2.  生成随机数并将其与电话号码或与该电话号码关联的用户 ID 和日期和时间一起保存在数据库中
3.  第一个表单将被隐藏，第二个表单将被显示
4.  在提交第二个表单时，只需对照保存的号码检查输入号码。

# eclipse - 是否有 Eclipse 的 NuGet 等价物

> ID：14507136
> 
> 赞同：14
> 
> 时间：2013-01-24T17:25:02.207
> 
> 标签：eclipse, nuget

在新工作中开始使用 Visual Studio。我被介绍到 NuGet 以在 VS 中安装包。Eclipse 有这样的应用程序吗？

我正在使用 Eclipse（不是专家）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T17:32:19.033

Java 项目的等价物是 Maven 或类似的（Ivy、Gradle 等）

Eclipse 有几个 Maven 插件，例如[m2eclipse](http://www.sonatype.org/m2eclipse/)。

一般来说，Java 依赖管理是通过这样的工具来处理的。一个原因是从构建方程式中删除 IDE，因为开发人员可能使用不同的 IDE，可能涉及 CI 服务器（即，根本没有 IDE），IDE 版本可能会破坏/更改构建过程等。

IMO 依赖 IDE 进行构建是一种环境气味。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-22T13:58:40.637

[jpm4j](https://www.jpm4j.org/)是 java 的包管理器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-28T17:27:58.987

Apache Ivy 相当于 NuGet。

# jquery - 在 IE 中使用 jquery 创建元素失败

> ID：14507137
> 
> 赞同：-1
> 
> 时间：2013-01-24T17:25:12.270
> 
> 标签：jquery, internet-explorer-8

我正在使用 JQuery 基于用户输入创建标签。以下是代码片段 -

```
 $('#inputID').after('<label id="newLabel">Created</label>'); 
```

这在 Chrome 和 Firefox 中运行良好，但在 IE 中中断。我尝试使用 insertAfter 和 append 但结果相同。我使用开发者工具和页面资源来查看标签是否已生成，但看不到。但是，它在页面上可见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:28:36.870

IE 8 与 Javascript 存在一些问题。但是尝试使用不同的 jQuery 版本，它可能会很有用......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:31:10.547

动态生成的元素在页面源中不可见，如果您点击`ctrl+u`查看页面源，则无法找到。

`Although that can be find with firebug or inspecting in chrome dev tools.`

在 Firefox 中，如果您使用的是 webdeveloper 扩展，它可以让您查看`view generated source`此扩展栏中的查看源选项卡中的内容。

# ruby - 如何使用用户输入进行数学运算？

> ID：14507143
> 
> 赞同：-1
> 
> 时间：2013-01-24T17:25:34.447
> 
> 标签：ruby

我有这个功能：

```
def func()
  puts "Give a value for x \n>"
  x = gets.chomp
  puts "Give a value for y \n>"
  y = gets.chomp

  z = x + y
  puts z
end 
```

如果用户输入`5`for`x`和`5`for `y`，我想`z`make`5 + 5`和 print `10`，但这会打印出来`55`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:27:22.290

您读取的值存储为字符串，并且使用字符串，`+`运算符执行连接。如果要执行整数运算，则需要将两个输入都转换为整数：

```
z = x.to_i + y.to_i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:46:20.283

到达那里的另一种方式：

```
x = '5'
y = '5'

[x, y].map(&:to_i).inject(:+)
=> 10 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T17:27:19.213

```
z = x.to_i + y.to_i 
```

只需将输入字符串转换为整数或浮点数 ( `to_f`)

# asp.net - 如何使登录名成为下拉列表框中的默认选项？

> ID：14507144
> 
> 赞同：0
> 
> 时间：2013-01-24T17:25:36.320
> 
> 标签：asp.net, vb.net

专家。

当用户登录我们的一个网络应用程序时，会出现一个下拉列表，其中包含我们所有员工的姓名。

员工可以登录系统将他或她的条目记录到数据库中。

该员工可以记录另一位员工的条目。

到目前为止，员工必须从下拉列表中选择他或她的姓名，我们不希望员工输入他们的姓名，只是为了保持一致性和保持数据完整性。

我们目前的问题是如何让员工的登录名成为下拉菜单中的默认选项。如果为其他员工进行条目，员工可以从列表中选择另一个姓名。

任何想法如何完成这项任务？

提前非常感谢。

```
Private Sub Page_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    If Not IsPostBack Then
        Dim s As String
        Dim reader As OleDbDataReader
        txtFullName.Text = Session.Item("assignedTo").ToString

      'Initialize Connection
        s = "Select login_id, UserName from tblusers ORDER BY UserName"
        Dim connStr As String = ConfigurationManager.ConnectionStrings("allstringconstrng").ConnectionString
        Dim conn As New OleDbConnection(connStr)
        Dim cmd As New OleDbCommand(s, conn)

        'Open the connection
        conn.Open()

        Try

            'Execute the Login command
            reader = cmd.ExecuteReader()
            'Populate the list of Users

            txtLoginName.DataSource = reader
            txtLoginName.DataValueField = "login_id"
            txtLoginName.DataTextField = "UserName" 
            txtLoginName.DataBind()
            'Close the reader
            reader.Close()

        Finally
            'Close Connection
            conn.Close()
        End Try
    End If

End Sub 
```

<--新代码-->试试

```
 'Execute the Login command
        reader = cmd.ExecuteReader()
        'Populate the list of Users
        Dim currentUserName As String = ""

        While reader.Read()
            If (reader("login_id").ToString().Equals(currentUserName)) Then
                currentUserName = reader("UserName").ToString()
            End If
        End While

        txtLoginName.SelectedValue = currentUserName

        'Close the reader
        reader.Close()

    Finally
        'Close Connection
        conn.Close()
    End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:47:57.547

如果您正在使用表单或 Windows 身份验证，您不会只使用：

```
txtLoginName.Text = User.Identity.Name 
```

我相信如果文本在列表中并且完全匹配，这将选择它。或者，只需使用 Sam 的方法。但它是您正在寻找的 User.Identity.Name 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:30:16.727

您可以使用 Page.User 属性来获取名称，然后将其分配给下拉菜单在 Page_Load 事件中选择的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T17:31:54.297

您可以在填充列表后简单地通过文本选择它吗？我假设您`login_id`一旦用户登录就会知道，因此您可以从查询结果中找到用户名，如下所示：

**未经测试：**

```
string currentUserName = "";
While reader.Read()
    If (reader("login_id").ToString().Equals(currentUserLogin)) Then
        currentUserName = reader("UserName").ToString()
    End If
End While 
```

然后，通过结果填充列表后，按用户名选择正确的用户。

```
txtLoginName.Items.FindByValue(UserName).Selected = true; 
```

* * *

**或者更好**的是，因为您应该已经知道`login_id`，您可以简单地从填充的下拉列表中按值选择，如下所示：

```
txtLoginName.SelectedValue = login_id 
```

值得注意的是，这是一个非常大的假设，即`login_id`将存在于列表中。在选择之前，您可能需要先执行适当的检查以查看是否`login_id`存在。

# android - 在 Android 设备设置视图中显示我的应用偏好？

> ID：14507148
> 
> 赞同：0
> 
> 时间：2013-01-24T17:25:55.690
> 
> 标签：android, sharedpreferences

我有 iOS 开发背景。在 iPhone 上，当用户安装应用程序时，他可以通过 iOS 的“设置”菜单访问应用程序的偏好设置。对于开发人员来说，在 iPhone 上做到这一点真的很容易。

是否可以轻松地在 Android 上做类似的事情？还是 Android 用户更容易通过应用程序本身访问偏好？我很确定这是正确的答案。但是因为我没有安卓背景，所以想确认一下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:48:23.447

您无法将应用偏好设置添加到 Android 偏好设置。通过应用程序访问首选项是修改应用程序特定设置的 Android 方式。

# c# - 正则表达式删除重复的 URL

> ID：14507155
> 
> 赞同：3
> 
> 时间：2013-01-24T17:26:20.870
> 
> 标签：c#, regex, filtering

我有一个列表，其中包含一组类似于

1.  somesite.com/index.php?id=12
2.  somesite.com/index.php?id=14
3.  somesite.com/index.php?id=156
4.  example.com/view.php?image=441
5.  somesite.com/page.php?id=1
6.  example.com/view.php?ivideo=4
7.  somesite.com/page.php?id=56
8.  example.com/view.php?image=1

这些被存储到一个列表中，然后在爬取过程后显示在列表视图上。我尝试了不同的正则表达式模式，但仍然无法归档我真正需要的内容，因为查询字符串成了问题。

这是我尝试过的一种模式。

```
(http://?)(w*)(\.*)(\w*)(\.)(\w*) 
```

让我写下我需要如何过滤上述 URL。

1.  somesite.com/index.php?id=12
2.  example.com/view.php?image=441
3.  somesite.com/page.php?id=1
4.  example.com/view.php?ivideo=4

如您所见，相同但具有不同查询字符串的页面已被删除。这就是我要归档的内容。请注意，上面的链接确实包含**http://**，但由于 SOF 将它们视为垃圾邮件，因此没有包含它们。任何人都可以帮助我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:30:26.530

您可以使用[**`Uri`**](http://msdn.microsoft.com/en-us/library/system.uri.aspx)该类并[**`HttpUtility.ParseQueryString`**](http://msdn.microsoft.com/en-us/library/ms150046.aspx)进行解析，而不是手动解析 Url。这是一个使用 LINQ[**`.GroupBy`**](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.groupby.aspx)方法将相似的 url 收集到组中的示例，然后从组中选择第一个 url。

```
var distinctUrls = urls.GroupBy (u =>
    {
        var uri = new Uri(u);
        var query = HttpUtility.ParseQueryString(uri.Query);
        var baseUri = uri.Scheme + "://" + uri.Host + uri.AbsolutePath;
        return new {
            Uri = baseUri,
            QueryStringKeys = string.Join("&", query.AllKeys.OrderBy (ak => ak))
        };
    })
    .Select (g => g.First())
    .ToList(); 
```

样本输出`distinctUrls`：

```
http://somesite.com/index.php?id=12
http://example.com/view.php?image=441
http://somesite.com/page.php?id=1
http://example.com/view.php?ivideo=4 
```

这也将正确处理两个 url 具有一组相同的查询字符串参数但顺序不同的情况，例如`example.com/view.php?image=441&order=asc`和`example.com/view.php?order=desc&image=441`- 将它们视为相似。

# android - 车祸最低门槛

> ID：14507156
> 
> 赞同：0
> 
> 时间：2013-01-24T17:26:21.647
> 
> 标签：android, physics

我正在使用加速度计来检测车祸。我遇到了检测车祸需要最小阈值的问题。检测车祸所需的最低阈值。

```
@Override
public void onSensorChanged(SensorEvent event) {
    float x = event.values[0];
    float y = event.values[1];
    float z = event.values[2];

    float gX = x / 9.8f;
    float gY = y / 9.8f;
    float gZ = z / 9.8f;

    float gForce = FloatMath.sqrt(gX * gX + gY * gY + gZ * gZ);
    if(gForce > //HERE IS NEED THRESHOLD VALUE)
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T17:30:39.830

根据谷歌搜索，我估计 > 40G 的峰值加速度幅度将表明发生车祸。有关车祸期间数据的基本研究，请参阅[本文。](http://www.nhtsa.gov/cars/problems/studies/record/chidester.htm)

或者，您可以自己撞毁几辆汽车并获取一些测试数据。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T17:32:50.037

**展开安全气囊所需的加速度**

大约 20 - 30 G。当然，这取决于您对“意外”的定义。

资源：

[http://answers.google.com/answers/threadview/id/523539.html](http://answers.google.com/answers/threadview/id/523539.html)

# node.js - 设置 lintnode

> ID：14507159
> 
> 赞同：1
> 
> 时间：2013-01-24T17:26:40.417
> 
> 标签：node.js, emacs, elisp, npm

因此，我正在尝试设置 lintnode 以与 emacs 一起使用，并且它似乎安装得很好。当我启动时，我没有在缓冲区或任何东西中收到错误。

但是，当我去写一些 JS 时，我没有得到任何功能。所以我检查 npm 以查看所有节点包是否都是最新的，它们不是，但即使在我执行“npm update”并获得 200 个响应之后，版本仍然没有变化。我正在运行 Xubuntu 以获得一些背景信息。

这是我的 emacs 初始化文件的副本，以检查您是否认为这可能是问题所在。

如果这太乱了，这是一个粘贴箱。[Emacs 初始化](http://pastebin.com/gMmSvNX8)

```
(add-to-list 'load-path "~/.emacs.d/auto-complete-1.3.1")
;Load the default configuration
(require 'auto-complete-config)
;Make sure we can find the dictionaries
(add-to-list 'ac-dictionary-directories "~/.emacs.d/auto-complete-1.3.1/dict")
;Use dictionaries by default
(setq-default ac-sources (add-to-list 'ac-sources 'ac-source-dictionary))
(global-auto-complete-mode t)
;Start auto completion after two characters of a word
(setq ac-auto-start 2)
; case sensitivity is important when finding matches
(setq ac-ignore-case nil)

(add-hook 'js-mode-hook'
  (lambda ()
    ;;Scan the file for nested code blocks
    (imenu-add-menubar-index)
    ;;Activate folding mode
    (hs-minor-mode t)
    )
)

;;Yasnipped: Auto-codesnippet manager
(add-to-list 'load-path "~/.emacs.d/plugins/yasnippet")
(require 'yasnippet)
(yas-global-mode 1)

;;Lintnode
(add-to-list 'load-path "~/.emacs.d/plugins/lintnode")
(require 'flymake-jslint)
(add-hook 'javascript-mode-hook
  (lambda () (flymake-mode t)))
(custom-set-variables
  ;; custom-set-variables was added by Custom.
  ;; If you edit it by hand, you could mess it up, so be careful.
  ;; Your init file should contain only one such instance.
  ;; If there is more than one, they won't work right.
 '(lintnode-autostart t))
(custom-set-faces
  ;; custom-set-faces was added by Custom.
  ;; If you edit it by hand, you could mess it up, so be careful.
  ;; Your init file should contain only one such instance.
  ;; If there is more than one, they won't work right.
 )

;;Flymake-the nice minibuffer cursor linked message
(add-to-list 'load-path "~/.emacs.d/plugins/flymake")
(require 'flymake-cursor) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:46:01.577

末尾有一个额外的报价`js-mode-hook`。问题的根源可能是您稍后使用`javascript-mode-hook`不存在的 AFAIK （`javascript-mode`是一个别名，`js-mode`因此调用了该钩子`js-mode-hook`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:34:48.747

这具有使用 lintnode 安装 JSLint 的正确说明。 [http://emacswiki.org/emacs/FlymakeJavaScript](http://emacswiki.org/emacs/FlymakeJavaScript)

# asp.net - 调试 ASP.net 报告服务网站内存泄漏？

> ID：14507168
> 
> 赞同：0
> 
> 时间：2013-01-24T17:27:17.263
> 
> 标签：asp.net, iis-7, reporting-services

我们有一个基于报告服务的 C#/VB 构建的 ASP.net 网站。其中一些是本地的（rdlc），一些位于报告服务器（rdl）上。

我们遇到的问题是，服务器大约每两周开始报告 OOM 错误，并且 IIS 工作进程正在耗尽内存。快速修复似乎是重新启动iis，但这需要手动交互并且通常由用户报告。

看起来像是某处的内存泄漏，但大多数报告都是非常简单的数据拉取和连接都关闭，此时我们真的不知道如何进一步调试它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-09-05T04:14:04.613

您可以运行 IIS 调试诊断工具来查看有问题的句柄是什么[http://support.microsoft.com/kb/919789](http://support.microsoft.com/kb/919789)

# c# - 复制 TabControl 选项卡

> ID：14507173
> 
> 赞同：7
> 
> 时间：2013-01-24T17:27:26.907
> 
> 标签：c#, winforms, tabs, tabcontrol

我在互联网上搜索了这个，但我找不到如何使用 C#

我想要做的是，当我点击我的`NewTab`按钮时，会出现一个新标签，其中包含与第一个标签上相同的控件。我看到了一些关于如何向`UserControl`表单添加 a 的信息，但 C# 没有类似的东西。

对于每个会说“发布你的代码”的人，我没有，所以不要费心这么说，我唯一的代码是程序的代码，这对任何人都没有帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T17:35:19.190

# 编辑

我已经重写了我的解决方案以使用反射。

```
using System.Reflection;

// your TabControl will be defined in your designer
TabControl tc;
// as will your original TabPage
TabPage tpOld = tc.SelectedTab;

TabPage tpNew = new TabPage();
foreach(Control c in tpOld.Controls)
{
    Control cNew = (Control) Activator.CreateInstance(c.GetType());

    PropertyDescriptorCollection pdc = TypeDescriptor.GetProperties(c);

    foreach (PropertyDescriptor entry in pdc)
    {
        object val = entry.GetValue(c);
        entry.SetValue(cNew, val);
    }

    // add control to new TabPage
    tpNew.Controls.Add(cNew);
}

tc.TabPages.Add(tpNew); 
```

一些信息可以在这里找到。 [http://www.codeproject.com/Articles/12976/How-to-Clone-Serialize-Copy-Paste-a-Windows-Forms](http://www.codeproject.com/Articles/12976/How-to-Clone-Serialize-Copy-Paste-a-Windows-Forms)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:53:48.043

你最好的选择是看这篇文章：

[代码项目](http://www.codeproject.com/Articles/12976/How-to-Clone-Serialize-Copy-Paste-a-Windows-Forms)

然后应用以下代码添加克隆的控件（这将在您的按钮单击处理程序代码中（基于文章）：

```
 private void button1_Click(object sender, EventArgs e)
    {
        // create new tab
        TabPage tp = new TabPage();

        // iterate through each control and clone it
        foreach (Control c in this.tabControl1.TabPages[0].Controls)
        {
            // clone control (this references the code project download ControlFactory.cs)
            Control ctrl = CtrlCloneTst.ControlFactory.CloneCtrl(c);
            // now add it to the new tab
            tp.Controls.Add(ctrl);
            // set bounds to size and position
            ctrl.SetBounds(c.Bounds.X, c.Bounds.Y, c.Bounds.Width, c.Bounds.Height);
        }

        // now add tab page
        this.tabControl1.TabPages.Add(tp);
    } 
```

然后你需要连接事件处理程序。将不得不考虑这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-20T10:14:19.867

我知道这是一个旧线程，但我只是为自己找到了一种方法，并认为我应该分享它。它非常简单，并且在 .Net 4.6 中进行了测试。

请注意，此解决方案实际上并没有创建新控件，只是将它们全部重新分配给新的 TabPage，因此每次更改选项卡时都必须使用 AddRange。新选项卡将显示完全相同的控件、内容和包含的值。

```
// Create an array and copy controls from first tab to it.
Array tabLayout = new Control [numberOfControls];
YourTabControl.TabPages[0].Controls.CopyTo(tabLayout, 0);

// AddRange each time you change a tab.
YourTabControl.TabPages[newTabIndex].Controls.AddRange((Control[])tabLayout); 
```

# ios - 在 UIScrollView 中更改 UIImageView 的框架、大小没有任何作用

> ID：14507174
> 
> 赞同：2
> 
> 时间：2013-01-24T17:27:27.757
> 
> 标签：ios, xamarin.ios

我正在尝试更改放置在 UIScrollView 内的 UIImageView 的位置。无论我设置什么，图像总是显示在 UIScrollView 的左上角。尝试将 X、Y 坐标更改为 200,200 之类的坐标仍会将图像置于 0,0。

单触代码：

```
 private void LoadPageContent(int page)
    {
        var panelScrollView = new UIScrollView();

        panelScrollView.MinimumZoomScale = 1.0f;
        panelScrollView.MaximumZoomScale = 3.0f;
        panelScrollView.MultipleTouchEnabled = true;

        panelScrollView.BackgroundColor=UIColor.Black;
        if (page == 1)
        {
            panelScrollView.BackgroundColor=UIColor.Red;
        }

        panelScrollView.ScrollEnabled = true;
        panelScrollView.UserInteractionEnabled=true;
        var ui = new UIImage (_assetImages[page], 1.0f, UIImageOrientation.Up);
        UIImageView imgView = new UIImageView(ui);

        //Position the panelScrollView in the right page on the main scrollview
        RectangleF frame = scrollView.Frame;
        PointF location = new PointF();
        location.X = frame.Width * (_numberOfPanels - 1);
        frame.Location = location;

        panelScrollView.Frame = frame;
        panelScrollView.BackgroundColor=UIColor.Green;

        imgView.Frame.X = 200; //<---- this does nothing
        imgView.Frame.Y = 200; //<---- this does nothing

    //Setting Bounds does nothing either

        imgView.ContentMode=UIViewContentMode.Center; //<--this does nothing

        panelScrollView.AddSubview(imgView);
        scrollView.AddSubview(panelScrollView);

    } 
```

有任何想法吗？？

# c# - 当驱动程序 EXE 文件不存在时，如何制作新的 InternetExplorerDriver？

> ID：14507178
> 
> 赞同：1
> 
> 时间：2013-01-24T17:27:35.900
> 
> 标签：c#, selenium

我有一个与 Firefox 一起运行的工作脚本，但我无法调用任何其他 Webdriver 浏览器：

```
using OpenQA.Selenium.IE;
using OpenQA.Selenium.Firefox;
using OpenQA.Selenium.Chrome;            

driver = new InternetExplorerDriver(); - an exception is thrown

            //start setup
            driver = new FirefoxDriver();
            baseURL = "http://www.google.com";
            verificationErrors = new StringBuilder();
            //end setup 
```

我收到此错误：

```
The IEDriverServer.exe file does not exist in the current directory or in a directory on the PATH environment variable. The driver can be downloaded at http://code.google.com/p/selenium/downloads/list. 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:52:25.910

如错误中所述，IEdriver 现在作为单独的 exe 单独发布。您需要下载驱动程序并将其添加到错误中再次提到的 PATH 环境变量中。[这里](http://jimevansmusic.blogspot.in/2012/11/are-you-kidding-me-ie-driver-another.html)对驱动程序的分离进行说明

更多信息@ [https://github.com/SeleniumHQ/selenium/wiki/InternetExplorerDriver](https://github.com/SeleniumHQ/selenium/wiki/InternetExplorerDriver)

chromedriver 也是如此。您需要单独下载它，而对于 Firefox，情况并非如此，因此这是唯一适合您的驱动程序。

# c# - 我可以在标头元素中未定义的 JavaScript 函数上使用 WebBrowser.Document.InvokeScript 吗？

> ID：14507181
> 
> 赞同：1
> 
> 时间：2013-01-24T17:27:49.877
> 
> 标签：c#, php, javascript, .net-4.0, webbrowser-control

对于我可能使用的任何用词不当，我立即道歉。

我有一系列由 PHP 生成的网页，我正在使用 WebBrowser 控件进行操作。这些页面定义了隐藏在正文中的 JavaScript 函数（这对我来说很愚蠢，我没有编写它们，我只需要使用它们）。

是否可以使用 Document.InvokeScript 方法访问这些函数，如果没有，我可以做些什么来访问它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:50:13.090

Windows 窗体的实现使用 IDispatch.GetIDsOfNames在[脚本引擎的](http://msdn.microsoft.com/en-us/library/aa752642%28v=VS.85%29.aspx)[顶级命名项](http://www.microsoft.com/msj/1099/Visualprog/visualprog1099.aspx)中查找函数名称的完全匹配。对于 MSHTML 的[活动脚本接口](http://msdn.microsoft.com/en-us/library/d1et7k7c%28v=vs.84%29.aspx)的 JScript 实现，顶级命名项是

*   [jscript 全局变量](http://msdn.microsoft.com/en-us/library/3hdzd3fy%28v=vs.80%29.aspx)的成员（注意这是假设您的代码是用 jscript 编写的，对于 vb 脚本代码可见的全局变量，请查看[VBScript Language Reference](http://msdn.microsoft.com/en-us/library/d1wf56tt%28v=vs.84%29.aspx)）
*   [window 对象的](http://msdn.microsoft.com/en-us/library/3hdzd3fy%28v=vs.80%29.aspx)成员（有没有想过为什么可以直接使用 document.write 或 XMLHttpRequest？）

您实际上并不需要将新的命名项添加到脚本引擎（如果您真的愿意，可以通过 IDispatchEx 进行），有很多方法可以使用现有的命名项执行代码，例如

*   来自 jscript 全局变量的[eval函数](http://msdn.microsoft.com/en-us/library/b51a45x6%28v=vs.80%29.aspx)
*   来自窗口对象的[execScript函数](http://msdn.microsoft.com/en-us/library/ms536420%28v=vs.85%29.aspx)
*   来自 window 对象的[setTimeout函数](http://msdn.microsoft.com/en-us/library/ms536753%28v=vs.85%29.aspx)

您可以使用上述之一作为在 HtmlDocument.InvokeScript 中调用的脚本方法的名称，并在附加参数中传递代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:34:05.693

是的 - JavaScript 中的所有函数都可以同样访问。

笔记

*   一些 JavaScript 文件可能不会很早就加载 - 您需要正确等待（文档准备好/完成，或来自页面/简单超时的自定义通知）直到加载所有脚本。
*   可以将 JavaScript 函数设为“私有”——不能通过`window.FuncitionName(...)`在 JavaScript 中使用来调用——你也无法通过 InvokeScript 调用此类函数。

这种“私人”功能的示例如下：

```
$(function(){  
   ....
   function MyHiddenFunction() {
     // you can't call be from outside!!!!
   }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:54:39.647

我找到了答案（发生了一些事情，我无法再访问我的帐户，所以如果有人也能回答我，那就太好了），但答案是：WebBrowser 使用 IE7，而 IE7 是一团糟。

IE9 执行脚本就好了。所以我不得不强制它使用IE9

这是通过使用此处给出的答案完成的：

[WebBrowser 控件和 JavaScript 错误](https://stackoverflow.com/questions/5529615/webbrowser-control-and-javascript-errors)

所以……万岁！

# tsql - cfstoredproc 和 cfquery 的不同结果

> ID：14507184
> 
> 赞同：1
> 
> 时间：2013-01-24T17:28:04.033
> 
> 标签：tsql, coldfusion, coldfusion-8, cfquery, cfstoredproc

当我通过执行存储`cfstoredproc`过程时，我得到的结果与通过调用存储过程不同`cfquery`。我将相同的确切参数值传递给每个调用。而且，当我在 SQL Studio 中运行存储过程时，我得到了正确的结果（与 cfquery 相同）。

这是`cfstoredproc`电话

```
<cfstoredproc datasource="#request.mainDSN#" debug="#request.debug#" procedure="rankingresults">
   <cfprocparam type="in" value="8652" CFSQLType="CF_SQL_INTEGER">
   <cfprocparam type="in" value="50" CFSQLType="CF_SQL_INTEGER">
   <cfprocparam type="in" value="53" CFSQLType="CF_SQL_INTEGER">
   <cfprocresult name="local.listing">
</cfstoredproc> 
```

这是`cfquery`电话

```
<cfquery datasource="#request.mainDSN#" name="rankings">
   EXEC rankingresults
    @CityZipId = 8652,
    @distance = 50,
    @sic = 53
</cfquery> 
```

结果完全不同。它甚至不接近。我已经为此困扰了几个小时，但我无法弄清楚为什么它正在做它正在做的事情。

**更新**

存储的过程很大（也是我继承的），所以我不打算在这里全部粘贴：http: [//pastebin.com/EtufPWXf](http://pastebin.com/EtufPWXf)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-24T18:44:09.387

（来自评论）

看起来它确实有可选参数。因此，您的`cfstoredproc`调用可能不会传递您认为的值。根据顺序，看起来它实际上是在传递值：`@CityZipID, @Sic, @lastRank`。正如 Dan 提到的（我也暗示过），cfstoredproc 对参数使用位置表示法（[不推荐使用 @dbVarName](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=Tags_p-q_14.html)）。您需要以*正确的顺序*提供所有参数值。

**更新：**

FWIW，如果您创建一个 shell 过程，您会看到 cfstoredproc 和 cfquery 实际上正在调用具有不同参数/值的过程。（见下文）。

如果您在没有@Dan 建议的命名参数的情况下调用该过程，您肯定会看到结果有所不同，即`exec rankingresults 8652, 50, 53`。（我知道您说“没有变化”，但您的测试中可能只是一个错误）。

**CFSTOREDPROC**

```
@ATTRCODES|@CITYZIPID|@DISTANCE|@HASURL |@ISFEATURED |@LASTRANK|@PHOTOCOUNT|@REVIEWCOUNT |@SIC|@SICBUDGETIDS 
(nothing)| 8652| (nothing)| (nothing)| (nothing)| 53| (nothing)| (nothing)| 50| (nothing) 
```

**CF查询**

```
@ATTRCODES|@CITYZIPID|@DISTANCE|@HASURL |@ISFEATURED |@LASTRANK|@PHOTOCOUNT|@REVIEWCOUNT |@SIC|@SICBUDGETIDS 
(nothing)| 8652| 50| (nothing)| (nothing)| 0| (nothing)| (nothing)| 53| (nothing) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:08:32.797

如果直接在 sql server 上运行，会返回多少个结果？您可能会返回多个可以解释行为差异的结果。

# machine-learning - 多层感知器的激活函数

> ID：14507194
> 
> 赞同：4
> 
> 时间：2013-01-24T17:28:34.297
> 
> 标签：machine-learning, neural-network, backpropagation, perceptron

我试图用这个`xor`函数训练简单的反向传播神经网络。当我使用`tanh(x)`导数作为激活函数时，`1-tanh(x)^2`大约 1000 次迭代后我得到了正确的结果。但是，当我使用`g(x) = 1/(1+e^(-x))`导数作为激活函数时`g(x)*(1-g(x))`，我需要大约 50000 次迭代才能获得正确的结果。可能是什么原因？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T03:23:57.050

是的，你观察到的是真的。在使用反向传播训练神经网络时，我也有类似的观察结果。对于`XOR`问题，我曾经建立一个`2x20x2`网络，逻辑函数需要 3000+ 集才能得到以下结果：

```
[0, 0] -> [0.049170633762142486]
[0, 1] -> [0.947292007836417]
[1, 0] -> [0.9451808598939389]
[1, 1] -> [0.060643862846171494] 
```

`tanh`用作激活函数时，这是 800 集后的结果。`tanh`收敛速度始终快于`logistic`。

```
[0, 0] -> [-0.0862215901296476]
[0, 1] -> [0.9777578145233919]
[1, 0] -> [0.9777632805205176]
[1, 1] -> [0.12637838259658932] 
```

这两个函数的形状如下所示（来源：[有效的反向传播](http://cseweb.ucsd.edu/classes/wi08/cse253/Handouts/lecun-98b.pdf)）：

![激活函数](../Images/78e5336aff10ce57ad9a392eac15eb1c.png)

*   左边是标准逻辑函数：`1/(1+e^(-x))`。
*   右边是`tanh`函数，也称为双曲正切。

很容易看出它`tanh`关于原点反对称。

根据 [有效的 Backprop](http://cseweb.ucsd.edu/classes/wi08/cse253/Handouts/lecun-98b.pdf)，

> **对称 sigmoid**等`tanh`通常比标准逻辑函数收敛得更快。

也来自维基[逻辑回归](http://en.wikipedia.org/wiki/Logistic_function)：

> 从业者警告说，当使用反向传播训练网络时，**关于原点反对称的**sigmoid 函数（例如**双曲正切**）会导致**更快的收敛。**

有关解释此处直觉的更多详细信息，请参阅[高效的反向传播。](http://cseweb.ucsd.edu/classes/wi08/cse253/Handouts/lecun-98b.pdf)

有关更简单计算的替代方法，请参见[elliott 。](http://www.heatonresearch.com/wiki/Elliott_Activation_Function)`tanh`它在下面显示为黑色曲线（蓝色曲线是原始曲线`tanh`）。

![在此处输入图像描述](../Images/c5f7b542655f198d44cdaa2793996f5e.png)

![在此处输入图像描述](../Images/d211602a5bc9b5d3601b766054ca9e94.png)

> 有两件事应该从上面的图表中脱颖而出。首先，与 Elliott 相比，TANH 通常需要更少的迭代来训练。因此，对于 Encoder，Elliott 的训练精度不如 Encoder 好。但是，请注意培训时间。Elliott 完成了它的整个任务，即使它必须做额外的迭代，用 TANH 的一半时间。这是一个巨大的改进，字面意思是在这种情况下，Elliott 会将您的训练时间缩短一半，并提供相同的最终训练错误。虽然确实需要更多的训练迭代才能到达那里，但每次迭代的速度要快得多，它仍然会导致训练时间减半。

# c# - Linkedin登录api windows phone 7和搜索人

> ID：14507196
> 
> 赞同：-3
> 
> 时间：2013-01-24T17:28:37.047
> 
> 标签：c#, api, windows-phone-7, linkedin

我正在尝试做一个在linkedin上搜索人员信息的应用程序，但我的登录步骤有问题，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:59:00.267

虽然你没有提到你做了什么，也没有分享你的代码，所以我可以为你提供一些很好的教程。

*   [来自 Windows 电话应用程序的链接](http://buildmobile.com/linkedin-from-a-windows-phone-app/)
*   [http://developer.linkedin.com/thread/1230](http://developer.linkedin.com/thread/1230)（下载**LinkedInAuth.rar.zip**）

也能看。。

*   [通过 windows phone 在 Linkedin 中分享消息](https://stackoverflow.com/questions/9128466/share-a-message-in-linkedin-via-windows-phone)

# postgresql - Postgres“反向计数（*）”（unnest？）

> ID：14507198
> 
> 赞同：2
> 
> 时间：2013-01-24T17:28:41.363
> 
> 标签：postgresql, count

我正在尝试在 PostgreSQL（8.4 +）中做我称之为“反向计数（*）”的事情。我希望我的输出具有与每个字母的总列中指定的行数完全相同的行数......

表格1：

```
letter | total
-------------
a | 3
b | 2
c | 4
d | 1 
```

预期的表格输出：

```
letter
-----
a
a
a
b
b
c
c
c
c
d 
```

我不确定是否以及如何在此处使用 unnest 函数....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:30:00.367

是的 - unnest 是你想要的（当然，一旦你有一个数组）

```
richardh=> SELECT array_fill(letter, ARRAY[total]) FROM expand;
 array_fill 
------------
 {a,a,a}
 {b,b}
 {c,c,c,c}
 {d}
(4 rows)    

richardh=> SELECT unnest(array_fill(letter, ARRAY[total])) FROM expand;
 unnest 
--------
 a
 a
 a
 b
 b
 c
 c
 c
 c
 d
(10 rows) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T02:21:49.280

这是使用计数或数字表而不是`UNNEST`. 这是一个相当跨平台的解决方案，因为每个数据库都有一个用于创建数字表的解决方案，尽管大多数不如 postgresql 好。

```
SELECT Letter 
FROM
  table1 
  INNER JOIN  generate_series(1,100) num
  ON table1.total >= num 
ORDER BY Letter 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!11/2e31f/9)

我将其硬编码`generate_series`为 100。但是正如[Clodoado](https://stackoverflow.com/users/131874/clodoaldo)演示的那样，您可以`MAX(Total)`在调用 Generate_series时使用

```
SELECT Letter 
FROM
   table1 
   INNER JOIN  
   generate_series(
      1,
      (select max(total) from table1) 
   ) num ON table1.total >= num 
ORDER BY Letter 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!11/2e31f/12)

# xcode - Xcode：仅使用 .xib 文件显示“实用程序”窗格

> ID：14507203
> 
> 赞同：1
> 
> 时间：2013-01-24T17:28:49.790
> 
> 标签：xcode, xcode4, xcode4.5

**可以做到吗？**绝对没有理由为什么`Utilities`窗格应该与常规（例如，`.h`和`.m`）源文件一起显示......因此必须始终在隐藏/显示之间循环`Utilities`（以便拥有尽可能多的可用屏幕）。

`Localization`和`Target membership`部分（针对特定文件）应该移到其他地方，修改 .xib 编辑的 UI，并`Utilities`删除窗格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T22:36:06.393

更简单的方法是创建选项卡（Command + T）。这样，您可以调整每个选项卡的窗格。（请看图片）![在此处输入图像描述](../Images/67f1f54b9cdd97e1baaaa428466e746b.png)

# php - 如何在 ASP.NET 中转换 PHP 数组？

> ID：14507205
> 
> 赞同：0
> 
> 时间：2013-01-24T17:28:54.887
> 
> 标签：php, asp.net

我在使用数组数组的 PHP 中有以下代码。如何使用 ASP.NET 提取电子邮件？不幸的是，我无法调试并查看调用者发送的内容。谢谢。

```
$data= $POST['data']
$email = $data['email'] 
```

基本上我需要从 POST 中提取电子邮件（这是 PHP 中的代码）。如何提取电子邮件？

这是 PHP 代码的完整参考 [http://apidocs.mailchimp.com/webhooks/downloads/webhooks.phps](http://apidocs.mailchimp.com/webhooks/downloads/webhooks.phps)

# extjs - Ext ComponentQuery 通配符

> ID：14507207
> 
> 赞同：4
> 
> 时间：2013-01-24T17:29:00.063
> 
> 标签：extjs, extjs4, extjs4.1, extjs4.2

我搜索了示例和文档，但找不到是否可以在 ComponentQuery 查询中使用通配符。我想做以下事情：

```
 Ext.ComponentQuery.query('button > menu > menuitem[text="Welcome*"]'); 
```

由于按钮文本将是当前用户名，例如“Welcome Shaun”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T18:31:51.837

尝试

Ext.ComponentQuery.query('menuitem{text.search(\'菜单项\')!=-1}');

根据文档，您可以使用自定义表达式。这适用于我在下面包含的代码：

```
var toolbar = Ext.widget('toolbar', {
        items   : [
            {
                xtype:'splitbutton',
                text: 'Menu Button',
                iconCls: 'add16',
                menu: [{text: 'Menu Item 1'},{text: 'Menu Item 2'}],
                reorderable: false
            },
            {
                xtype: 'button',
                text: 'Get matches',
                handler: function(){
                    var match = Ext.ComponentQuery.query('menuitem{text.search( \'Menu Item\' )!=-1}');
                    console.log( match )
                }
            }
        ]
    });

    Ext.widget('panel', {
        renderTo: Ext.getBody(),
        tbar    : toolbar,
        border  : true,
        width   : 600,
        height  : 400
    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-25T08:20:59.240

**只是为了完整起见**（并且因为*成员表达式*可能会使查询崩溃）

正如[@existdissolve](https://stackoverflow.com/users/1774881/existdissolve)所说，您可以使用类似于您的情况的***成员表达式***来归档通配符的类似（不一样！）

```
Ext.ComponentQuery.query('button > menu > menuitem{text.search("Welcome")!=-1}'); 
```

*这将尝试对找到的任何菜单项的 text 属性执行本机 JS 搜索操作。不管这个属性是否存在（或方法），这让我想到了成员表达式的主要问题*

**您需要了解的有关成员表达式的知识**

您可以在几乎每个选择器上使用*成员表达式，但它们***需要**存在于该选择器上，否则您最终会遇到异常中止查询（完全，就像异常一样）。

这是一个简单的例子。假设您想通过它的文本找到一个按钮。那应该没问题，所有按钮都需要文本，不是吗？这工作了很长一段时间，直到您的客户抱怨某些按钮不需要文本，一个简单的图像就足够了。您忘记了查询内容并添加了按钮，然后您的应用程序的某些部分突然停止工作，而您最终遇到了异常，例如

> *未捕获的类型错误：无法调用未定义的方法“搜索”*

您可以在这个**[JSFiddle](http://jsfiddle.net/sran/9kPsY/)**示例中自己尝试一下。尝试“找到我”，然后点击“添加图像按钮”，然后再试一次。

**为什么会这样？**该`Ext.ComponentQuery`测试既不存在属性也不存在表达式，这会很快导致查询完全失败。

是的，上面的示例很简单，您可能很快就能找到错误的来源，但也可能完全不同。

**现在怎么办？**我不想说你不应该使用*成员表达式*，但你真的需要关心你可能面临的副作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-10T19:11:20.307

从 ExtJS 5 开始，引入了功能，通过允许通过正则表达式进行匹配，使这项任务更加简洁。该[文档](http://docs.sencha.com/extjs/5.1.3/api/Ext.ComponentQuery.html#ext-componentquery_attribute-matching-operators)提供了更多详细信息，但解决已发布问题的解决方案如下所示：

```
Ext.ComponentQuery.query('button > menu > menuitem[text/="^Welcome"]'); 
```

# ruby-on-rails - ActionMailer rails，如何将不同的内容发送到 cc：@email？

> ID：14507210
> 
> 赞同：0
> 
> 时间：2013-01-24T17:29:22.380
> 
> 标签：ruby-on-rails, ruby

我在用户创建记录后发送电子邮件，我正在发送记录`to:`@email的一些数据，我需要发送到cc：`cc@email`所有记录信息。我怎样才能做到这一点？

```
 def appointment_confirmation(appointment)
    @appointment = appointment
    @greeting = "Hi"

    mail to: appointment.email, subject: "Appointment Confirmation", cc: "cc@email"
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:40:15.547

你不能。您需要使用单独的模板发送单独的电子邮件。

CC 表示“Carbon Copy”，只能是完全相同的电子邮件。

# javascript - 为 Ajax 请求在 HTML 中嵌入元素的数据库 ID

> ID：14507213
> 
> 赞同：1
> 
> 时间：2013-01-24T17:29:31.480
> 
> 标签：javascript, html, ajax

有给定的代码：

```
<div id="256">
   <p>SOMELEMENT</p>
   <button class="edit">EDIT</button>
   <button class="delete">DELETE</button>
</div>
<div id="257">
   <p>SOMELEMENT2</p>
   <button class="edit">EDIT</button>
   <button class="delete">DELETE</button>
</div>
<script>
   $(".edit").click(function() { var id = $(this).parent().attr("id"); /* do some Ajax here, edit element in database with given id*/});
   $(".delete").click(function() { var id = $(this).parent().attr("id"); /* do some Ajax here, delete element in database with given id*/});
</script> 
```

有一个包含一些元素的数据库，这些元素有 ID，我想通过 Ajax 对这些元素执行一些操作。我需要元素的数据库 ID，以便我可以对这个元素执行一些 Ajax 请求。上面的解决方案有效，但是有一些缺陷 - 它依赖于 HTML 结构（例如，当我用其他元素包装按钮时， parent() 将不起作用，因为 HTML 结构发生了变化）。

如何以更好的方式在 HTML 中存储元素的数据库 ID，以便 JavaScript 可以获取它，例如用于 Ajax 请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:38:45.127

为什么不使用以下方法做这样的事情[`data()`](http://api.jquery.com/data/)：

```
<div>
   <p>SOMELEMENT</p>
   <button class="edit" data-id="256">EDIT</button>
   <button class="delete" data-id="256">DELETE</button>
</div>
<div>
   <p>SOMELEMENT2</p>
   <button class="edit" data-id="257">EDIT</button>
   <button class="delete" data-id="257">DELETE</button>
</div> 
```

现在您已`data-id`与按钮关联，您可以执行以下操作：

```
$(".edit").click(function() { 
  var id = $(this).data("id"); 
  /* do some Ajax here, edit element in database with given id*/
}); 
```

**[例子](http://jsfiddle.net/prkcg/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-27T15:04:04.483

尽管您已经有一个（完全有效的）可接受的答案，但我想提供另一种解决您的问题的方法，它消除了必须将数据附加到每个按钮的负担，而不是依赖于一个可用于获取句柄的类数据附加到的实际项目/记录/条目，因为无论如何我的 HTML 倾向于有这样的类，我发现这非常方便（我将使用注释列表作为示例）：

```
<div class="comment" data-id="256">
    <p>SOMELEMENT</p>
    <button class="edit">EDIT</button>
    <button class="delete">DELETE</button>
</div>
<div class="comment" data-id="257">
    <p>SOMELEMENT2</p>
    <button class="edit">EDIT</button>
    <button class="delete">DELETE</button>
</div>

<script>
    $(".comment .edit"  ).click(function() { var id = $(this).closest('.comment').data('id'); });
    $(".comment .delete").click(function() { var id = $(this).closest('.comment').data('id'); });
</script> 
```

关键是 .closest() jQuery 函数，它沿着 DOM 树向上移动以找到代表评论条目的 '.comment' div。这意味着只要将 .edit 和 .delete 元素保留在 .comment DIV 中，就可以自由修改 HTML 结构，而不必担心 JavaScript，也不必在多个文件中添加 data-* 属性地方。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-24T17:43:11.580

您可以使用数据属性。而不是让数据实体的 id 由 html id 属性表示。这些是表单 data-* 的属性。您的代码可能如下所示：

```
<div data-elementid="256">
   <p>SOMELEMENT</p>
   <button class="edit">EDIT</button>
   <button class="delete">DELETE</button>
</div>
<div data-elementid="257">
   <p>SOMELEMENT2</p>
   <button class="edit">EDIT</button>
   <button class="delete">DELETE</button> 
```

```
 <script>
        $(".edit").click(function() { var id = $(this).parent().data('elementid'); });
        $(".delete").click(function() { var id = $(this).parent().data('elementid'); });
    </script> 
```

John Resig 在这里写到： http: [//ejohn.org/blog/html-5-data-attributes/](http://ejohn.org/blog/html-5-data-attributes/)

此外，您可以在按钮元素上设置 data 属性，然后您不必遍历 parent() 来获取 id。

如果您想更深入，请查看 Angular.js、Ember.js 或 Backbone.js 等 js 框架。这个想法是 DOM 不应该用于存储数据，只用于呈现它。然后可以使用 Javascript 模型来存储您的应用程序数据。

# android - 我想随时使用音量增大/减小硬件按钮启动我的活动，这可以使用服务吗？

> ID：14507216
> 
> 赞同：-1
> 
> 时间：2013-01-24T17:29:42.077
> 
> 标签：android, service, onkeydown, android-hardware

我想随时使用音量增大/减小硬件按钮启动我的活动。我尝试了一些链接，但没有用。我也想知道如何为此使用服务。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:38:59.503

这在 Android 上是不可能的。音量按钮不能被您的应用程序监控或访问，除非它是当前的前台应用程序（即您有一个可见的活动并在屏幕上使用）。

另一种方法是监听设备抖动并开始。

# tsql - SSRS Tablix 或 DB 视图中的条件组

> ID：14507219
> 
> 赞同：1
> 
> 时间：2013-01-24T17:29:50.680
> 
> 标签：tsql, ssrs-2008, ssrs-grouping

我创建了一个报告，它应该使用 tablix 对数据进行分组，如下所示：

```
Region  |  State  |  Customer  |  CustomerKey | Status
North   | NY      |  Bob       |  111         | VIP
        |         |  Mary      |  112         | VIP
        | MA      |  Bob       |  111         | Regular
        |         |  Tim       |  113         | Regular
East    | MD      |  Greg      |  114         | VIP
        | VA      |  Bob       |  111         | VIP
West    | CA      |  Greg      |  114         | Regular
        |         |  Mary      |  112         | VIP
        |         |  Sean      |  115         | Regular
        | WA      |  Sean      |  115         | VIP 
```

这相对容易，因为我使用具有所有适当字段和关系的视图来简化 tablix 中的分组。我只遇到了我的 VIP 客户的问题。在视图中，具有 VIP 身份的客户也具有与普通身份相同的重复记录。例如，数据存储如下：

```
Region  |  State  |  Customer  |  CustomerKey | Status
North   | NY      |  Bob       |  111         | VIP
North   | NY      |  Bob       |  111         | Regular
North   | NY      |  Mary      |  112         | VIP
North   | NY      |  Mary      |  112         | Regular
North   | MA      |  Bob       |  111         | Regular
North   | MA      |  Tim       |  113         | Regular
East    | MD      |  Greg      |  114         | VIP
East    | MD      |  Greg      |  114         | Regular
East    | VA      |  Bob       |  111         | VIP
East    | VA      |  Bob       |  111         | Regular
West    | CA      |  Greg      |  114         | Regular
West    | CA      |  Mary      |  112         | VIP
West    | CA      |  Mary      |  112         | Regular
West    | CA      |  Sean      |  115         | Regular
West    | WA      |  Sean      |  115         | VIP
West    | WA      |  Sean      |  115         | Regular 
```

因此，我的 SSRS 报告显示数据如下：

```
Region  |  State  |  Customer  |  CustomerKey | Status
North   | NY      |  Bob       |  111         | VIP
        |         |            |              | Regular
        |         |  Mary      |  112         | VIP
        |         |            |              | Regular
        | MA      |  Bob       |  111         | Regular
        |         |  Tim       |  113         | Regular
East    | MD      |  Greg      |  114         | VIP
        |         |            |              | Regular
        | VA      |  Bob       |  111         | VIP
        |         |            |              | Regular
West    | CA      |  Greg      |  114         | Regular
        |         |  Mary      |  112         | VIP
        |         |            |              | Regular
        |         |  Sean      |  115         | Regular
        | WA      |  Sean      |  115         | VIP
        |         |            |              | Regular 
```

如果用户具有 VIP 状态，我不关心他们的常规状态记录（针对该特定区域/州）。无论如何我可以有条件地隐藏这些吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:44:20.030

就个人而言，我首先会考虑在数据库查询级别解决这个问题。

也就是说，报告级别的一种方法是根据*Region*、*State*和*Customer*设置**Groups**，然后在*Status*列中，您可以使用如下表达式：

 ***```
=IIf(CountRows("CustomerGroup") = 2, "VIP", "Regular") 
```

这有点笨拙，但应该可以工作，因为似乎每个客户可以在*区域/州*级别拥有一或两行 - 如果有两行，它们必须是 VIP，并且由于您设置了一个组，因此您可以获得不同的*客户*值在每个*地区/州*组合内。***

# css - 使用 css 防止或禁用 div 中的自动图像调整大小（使用引导程序）

> ID：14507224
> 
> 赞同：13
> 
> 时间：2013-01-24T17:30:11.203
> 
> 标签：css, image, twitter-bootstrap

我正在尝试显示图像的原始大小。这通常大于包含它的 div 的宽度。

在现代浏览器中，它会自动调整大小以适应父 div。即使我使用`overflow: auto`图像仍然会调整大小。

那么，当外部 div 具有设定的宽度时，如何防止图像被调整大小？

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-24T18:25:22.570

Bootstrap 在图像上将最大宽度设置为 100%。更改：

```
img {
    max-width: none;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-14T16:01:17.703

我用过这个 `img {min-width:100%}`

# jquery - 使用“每个”解析嵌套的 JSON 对象

> ID：14507228
> 
> 赞同：0
> 
> 时间：2013-01-24T17:30:23.260
> 
> 标签：jquery, json, each, google-books

我正在使用 jQuery 模板插件来显示来自 Google Books API 的 JSON 信息，以在此处生成书单：http: [//jsfiddle.net/yuW6L](http://jsfiddle.net/yuW6L)

我可以使用模板标签从 JSON 中获取并显示基本信息，例如标题

```
{{each items}} 
```

和

```
${volumeInfo.title} 
```

但是 ISBN 嵌套在 JSON 的一部分中，如下所示：

```
...
"industryIdentifiers":[
                     {
                        "type":"ISBN_10",
                        "identifier":"1593374313"
                     },
                     {
                        "type":"ISBN_13",
                        "identifier":"9781593374310"
                     } 
```

我无法以这种方式显示 ISBN-10：

```
volumeInfo.industryIdentifiers.identifier[1] 
```

我不认为我可以这样做：

```
{{each items.volumeInfo.industryIdentifiers}}
...
${identifier} 
```

解析和显示 ISBN-10 的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:32:39.033

您的第一次尝试将索引放在错误的位置。`industryIdentifiers`是数组，所以把索引放在后面。

`volumeInfo.industryIdentifiers[0].identifier`

# asp.net-mvc-4 - 在 ASP.NET MVC 4 中路由 GET 和 POST 路由

> ID：14507232
> 
> 赞同：2
> 
> 时间：2013-01-24T17:30:33.167
> 
> 标签：asp.net-mvc-4

我正在尝试在 ASP.NET MVC 4 应用程序中设置登录表单。目前，我已经配置了我的视图，如下所示：

**路由配置.cs**

```
routes.MapRoute(
  "DesktopLogin",
  "{controller}/account/login",
  new { controller = "My", action = "Login" }
); 
```

**我的控制器.cs**

```
public ActionResult Login()
{
  return View("~/Views/Account/Login.cshtml");
}

[AllowAnonymous]
[ValidateAntiForgeryToken]
public ActionResult Login(LoginModel model)
{
  return View("~/Views/Account/Login.cshtml");
} 
```

当我尝试在浏览器中访问 /account/login 时，我收到一条错误消息：

```
The current request for action 'Login' on controller type 'MyController' is ambiguous between the following action methods:
System.Web.Mvc.ActionResult Login() on type MyApp.Web.Controllers.MyController
System.Web.Mvc.ActionResult Login(MyApp.Web.Models.LoginModel) on type MyApp.Web.Controllers.MyController 
```

如何在 ASP.NET MVC 4 中设置基本表单？我查看了 ASP.NET MVC 4 中的示例 Internet 应用程序模板。但是，我似乎无法弄清楚路由是如何连接的。非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T19:11:28.177

我还没有尝试过，但是您可以尝试使用适当的 Http 动词注释您的登录操作吗？我假设您正在使用 a`GET`来查看登录页面并使用 a`POST`来处理登录。

通过`[HttpGet]`为第一个动作和`[HttpPost]`第二个动作添加理论，ASP.Net 的路由将根据已使​​用的方法知道要调用哪个动作方法。您的代码应如下所示：

```
[HttpGet] // for viewing the login page
[ViewSettings(Minify = true)]
public ActionResult Login()
{
  return View("~/Views/Account/Login.cshtml");
}

[HttpPost] // For processing the login
[ViewSettings(Minify = true)]
[AllowAnonymous]
[ValidateAntiForgeryToken]
public ActionResult Login(LoginModel model)
{
  return View("~/Views/Account/Login.cshtml");
} 
```

如果这不起作用，请考虑使用两条路线和两个不同命名的操作，如下所示：

```
routes.MapRoute(
   "DesktopLogin",
   "{controller}/account/login",
   new { controller = "My", action = "Login" }
); 

routes.MapRoute(
   "DesktopLogin",
   "{controller}/account/login/do",
   new { controller = "My", action = "ProcessLogin" }
); 
```

StackOverflow 上已经有其他类似的问题和答案，请查看：[How to route GET and DELETE for the same url](https://stackoverflow.com/questions/2143884/how-to-route-get-and-delete-requests-for-the-same-url-to-different-controller-me)，还有[ASP.Net 文档](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api)也可能有所帮助。

# java - 在类中导入整个 JAR 库

> ID：14507233
> 
> 赞同：1
> 
> 时间：2013-01-24T17:30:35.417
> 
> 标签：java, eclipse, itext

请原谅我对 Java 导入的困惑——我来自 Python 背景。

我有一些使用 itext 库的代码：

```
public static void makeADoc (Person p, String outfile) throws DocumentException,FileNotFoundException{
        Document document = new Document;
        PdfWriter.getInstance(document, new FileOutputStream(outfile));
        document.open();
        document.add(new Paragraph("Hello " + p.getFirst() + ",\n" + "You've just won the lotto!"));
        document.close();
    } 
```

我已将适用的 itext-pdf jar 文件添加到项目的路径中。我在这个类的开头使用通配符导入语句导入了整个库：

```
import com.itextpdf.*; 
```

然而 Eclipse 仍然给我 Document 对象和 DocumentException 和 FileNotFound Exception 对象的红色下划线错误。我可以选择从 itextpdf 导入 Document 类，但我的通配符语句似乎应该涵盖了这一点。这是怎么回事？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T17:34:18.560

`FileNotFoundException`不是来自包，`itextpdf`而是来自包`java.io`。因此，您还应该添加此导入语句。另请记住，使用此类通配符 import 语句有时被认为是不好的做法，因为它可能会使您的命名空间混乱。

此外，使用通配符语句，您可以导入 package 中的所有类`com.itextpdf`。但是，该类`DocumentException`在包中`com.itextpdf.text`而不是在包中`com.itextpdf`，因此您还必须添加此导入语句。请注意，在 Java 中没有子包的概念，尽管人类有时会使用这个类比。`com.itextpdf.text`与`com.itextpdf`. _

# android - 如何在Android开发中将变量从一个类传递到另一个类

> ID：14507252
> 
> 赞同：1
> 
> 时间：2013-01-24T17:31:16.357
> 
> 标签：android, class, variables, methods, parameters

我是java新手，我需要一些帮助。我需要将 bmivalue 变量从 MainActivity 转移到目标类。我研究了其他关于如何做到这一点的帖子，但我不知道在这种情况下如何做到这一点。

```
package com.example.bmiworking;

import android.os.Bundle;
import android.app.Activity;
import android.content.DialogInterface;
import android.view.View.OnClickListener;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class goal extends Activity {
    Button btn;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.goal);
        btn = (Button) findViewById(R.id.bmiButton);
        btn.setText(bmiValue);
}
}

package com.example.bmiworking;

import android.app.Activity;
import android.content.DialogInterface;
import android.view.View.OnClickListener;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity implements OnClickListener {
/** Called when the activity is first created. */
Button btn;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    btn = (Button) findViewById(R.id.homeClickHandler);
    btn.setOnClickListener(this);
}

    @Override
public void onClick(View v) {
    if (v.getId() == R.id.homeClickHandler) {
        startActivity(new Intent(this, MainMenu.class));
    }
}

public void calculateClickHandler(View view) {
    // make sure we handle the click of the calculator button

    if (view.getId() == R.id.calculateButton) {

        // get the references to the widgets
        EditText weightText = (EditText) findViewById(R.id.weightText);
        EditText heightText = (EditText) findViewById(R.id.heightText);
        TextView resultText = (TextView) findViewById(R.id.resultLabel);

        // get the users values from the widget references

        float weight = Float.parseFloat(weightText.getText().toString());
        float height = Float.parseFloat(heightText.getText().toString());

        // calculate the bmi value

        float bmiValue = calculateBMI(weight, height);

        // interpret the meaning of the bmi value
        String bmiInterpretation = interpretBMI(bmiValue);

        // now set the value in the result text

        resultText.setText(bmiValue + "-" + bmiInterpretation);
    }
}

// the formula to calculate the BMI index

// check for http://en.wikipedia.org/wiki/Body_mass_index
private float calculateBMI(float weight, float height) {

    return (float) (weight * 4.88 / (height * height));
}

// interpret what BMI means
private String interpretBMI(float bmiValue) {

    if (bmiValue < 16) {
        return "Severely Underweight - See Weight Gain";
    } else if (bmiValue < 18.5) {

        return "Underweight - See Weight Gain";
    } else if (bmiValue < 25) {

        return "Normal - No Recomendations";
    } else if (bmiValue < 30) {

        return "Overweight - See Weight Loss";
    } else {
        return "Obese - See Weight Loss";
    }

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:42:11.520

我们可以通过使用将变量和值从一个类传递到另一个类`intent`。我在酒店项目中使用的示例代码如下。希望对你有帮助

```
Intent in = new Intent(getApplicationContext(), goal.class);
in.putExtra("h_id", h_id);
in.putExtra("lat1", lat1);
in.putExtra("lon1", lon1);
startActivity(in); 
```

在这里，您可以通过这种方式开始下一个类执行，并将值从当前类传递到`goal class`使用`in.putExtras("varible_name in new class, value ")`

并在新的班级目标中使用

```
Intent in = getIntent();
        h_id = in.getStringExtra("h_id");
        lat1 = in.getDoubleExtra("lat1", 0);
        lon1 = in.getDoubleExtra("lon1", 0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T17:54:10.433

您可以从一个意图开始您的目标活动，其中包含一个包含额外值的 Bundle 类型对象，如下所示：

```
Intent intent = new Intent(this, MainActivity.class);
Bundle extras = new Bundle();
extras.putInt("int-key", int_value);
extras.putString("string-key", string_value);
extras.putFloat("float-key", float_value);
intent.putExtras(extras);
startActivity(intent); 
```

然后在您的`goal`类中，您可以将此代码放入您的`onCreate()`方法中以检索值：

```
Intent receivedIntent = getIntent();
Bundle extras = intent.getExtras();
int int_value = extras.getInt("int-key", 0);
String string_value = extras.getString("string-key", "");
float float_value = extras.getFloat("float-key", 0.0); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-17T13:07:36.000

如果这仍然是开放的并且正在被查看，那么您真的应该为此使用共享首选项。 [http://developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)

比意图更简单、更高效，并且通过共享首选项，您可以将数据传递给片段和活动，反之亦然

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T17:55:55.537

有几种方法。

我认为使您的数据“全局”可用的一种有用方法是在 Application 的子类中创建数据结构。有一个 Application 对象在任何活动中始终可用。当您扩展 Application 类时，您必须在清单中注意这一点。

您可以检索您的应用程序对象，

```
 MyApplication myApp = (MyApplication) getApplication(); 
```

然后是你的数据结构，

```
 ArrayList<Thing> myThings = myApp.getMyData(); 
```

您可以在任何活动中检索和修改数据结构。我很想知道其他人是否这样做。

# upload - 将谷歌光纤，到达美国东北部，。仍然使用 DSL 和 FIOS 不可用。上传大量数据我该怎么办？

> ID：14507253
> 
> 赞同：-3
> 
> 时间：2013-01-24T17:31:24.447
> 
> 标签：upload, cloud, data-transfer

谷歌光纤，？希望它能到达美国东北部。我所在地区仍在使用 DSL 上网，而且我所在地区没有 FIOS，而且该镇没有未来安装的计划。

我正在尝试使用云服务器，目前使用 Verizon DSL，我的上传速度很糟糕。用处不大，需要一整天才能上传。而且我有多个存储驱动器要上传。我听说过谷歌光纤还没有听说过很多。这似乎很有希望，因为谷歌支持它，也许它会。想知道是否有人和任何有关这些领域的未发表新闻。只是上传需要太长时间才能使用我的服务器，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:16:10.653

在发布问题之前，请务必仔细阅读指南。

关于谷歌光纤的可用性；堪萨斯城和密苏里州堪萨斯城仅是目前仅可使用 Google 光纤的区域。他们很快计划扩展到更多领域。可以从位于此处的 Google Fiber 官方网站获取信息[Google Fiber](https://fiber.google.com/cities/#header=check)
[https://fiber.google.com/cities/#header=check](https://fiber.google.com/cities/#header=check)

关于上传大量数据的上传和传输速度。最终的解决方案是了解上传站。例如，一家名为 aframe.com的公司使用[Aframe 的上传合作伙伴](http://aframe.com/upload-partners)，因为它在其云基础架构中拥有上传合作伙伴。或者您可以将您的数据发送给他们。不确定您的云服务器，但如果他们有这些服务，那将是最好的情况。

有多个有用的上传管理器是独立的，也集成到 Windows 资源管理器中，这将帮助您防止上传内容丢失，并且与通过 Web 浏览器进行标准上传相比，您还可以应用这些额外的速度设置来实现显着的性能。

这里有一些可能对您有所帮助。其中大多数是同情 FTP。

强烈推荐[Zila 的文件。](http://filezilla-project.org/)强大的支持信息和集成。 [http://filezilla-project.org/](http://filezilla-project.org/)

[FTPGetter](http://www.ftpgetter.com/)允许您自动执行 ftp 和 sftp 上传[http://www.ftpgette.com/](http://www.ftpgetter.com/)

[WebCEO](http://www.websiteceo.com/ftp_upload_manager.htm) FTP 上传管理器 [http://www.websiteceo.com/ftp_upload_manager.htm](http://www.websiteceo.com/ftp_upload_manager.htm)

好吧，祝你好运，我希望 FIOS 很快就会来到你所在的地区。

# java - Java 在拖动时始终将 JLabel 保持在 JPanel 之上

> ID：14507255
> 
> 赞同：0
> 
> 时间：2013-01-24T17:31:28.540
> 
> 标签：java, swing, drag-and-drop, nested, jlabel

我有一个扩展 JPanel 的类 ExamplePanel，它由 2 个 JPanel-labelsPanel 和 subPanel 组成。Labelspanel 包含任意 JLabels，而 subPanel 包含 ExamplePanel 嵌套实例的不同实例。

我希望能够将 JLabels 拖到嵌套实例中，但是当我这样做时，它们最终会出现在 subPanel 后面。我相信答案在于 setComponentZOrder 方法，但我没有取得任何进展。它使 JLabel 被绘制在 labelsPanel 中的其他 JLabel 之上，但一旦 JLabel 超出该面板的范围，则没有效果。我尝试将 JLabel 和 JPanel 都带到 Z 顺序位置 0 和 1，并首先绘制 subPanel，但这些都没有达到预期的效果。简化代码如下。（我已经尽量删减了，如果还有一些异常的代码部分，请见谅）

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Rectangle;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import java.util.ArrayList;

import javax.swing.BorderFactory;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JPopupMenu;

public class ExamplePanel extends JPanel implements MouseListener,
    MouseMotionListener {

public JPanel labelsPanel;
public JPanel subPanel;

public ArrayList<JLabel> labels;
public ArrayList<ExamplePanel> panels;

private int xOffset = 0, yOffset = 0;
private Rectangle prevBounds = null;

private boolean isDragged;

public ExamplePanel(ArrayList<JLabel> labels, ArrayList<ExamplePanel> panels) {
    this.invalidate();

    this.labels = labels;
    this.panels = panels;
    addMouseListener(this);
    this.setBorder(BorderFactory.createCompoundBorder(
            BorderFactory.createLineBorder(Color.GRAY),
            BorderFactory.createEmptyBorder(10, 10, 10, 10)));
    this.setLayout(new BorderLayout());
    this.setAlignmentX(Component.LEFT_ALIGNMENT);
    addLabels();
    addPanels();
    this.validate();

}

public void addLabels() {
    if (labelsPanel != null) {
        this.remove(labelsPanel);
    }

    labelsPanel = new JPanel(new GridBagLayout());
    labelsPanel.setBorder(BorderFactory.createLineBorder(Color.GREEN));

    GridBagConstraints c = new GridBagConstraints();
    c.anchor = GridBagConstraints.CENTER;
    c.ipadx = 50;
    c.ipady = 30;
    c.gridx = 0;
    c.gridy = 0;

    System.out.println("labels size: " + labels.size());

    for (int i = 0; i < labels.size(); i++) {
        c.gridx = i;

        labels.get(i).addMouseListener(this);
        labels.get(i).addMouseMotionListener(this);

        labelsPanel.add(labels.get(i), c);
    }

    this.add(labelsPanel, BorderLayout.NORTH);
}

public void addPanels() {

    System.out.println("panels size: " + panels.size());
    if (subPanel != null) {
        this.remove(subPanel);
    }

    subPanel = new JPanel(new BorderLayout());
    subPanel.setBorder(BorderFactory.createLineBorder(Color.RED));
    subPanel.setAlignmentX(Component.LEFT_ALIGNMENT);

    subPanel.setOpaque(false);

    for (ExamplePanel panel : panels) {
        subPanel.add(panel);
        this.validate();
    }

    this.add(subPanel, BorderLayout.CENTER);
}

public void addLabel(JLabel label) {
    labels.add(label);
}

public void addPanel(ExamplePanel panel) {
    panels.add(panel);
}

@Override
public void mouseDragged(MouseEvent e) {
    isDragged = true;
    JLabel dragged = (JLabel) e.getSource();

    int newX = (e.getX() + dragged.getBounds().x - xOffset < 0) ? 0 : e
            .getX() + dragged.getBounds().x - xOffset;
    int newY = (e.getY() + dragged.getBounds().y - yOffset < 0) ? 0 : e
            .getY() + dragged.getBounds().y - yOffset;
    dragged.setLocation(newX, newY);

}

@Override
public void mouseMoved(MouseEvent e) {
    // TODO Auto-generated method stub

}

@Override
public void mouseClicked(MouseEvent arg0) {
    // TODO Auto-generated method stub

}

@Override
public void mouseEntered(MouseEvent arg0) {
    // TODO Auto-generated method stub

}

@Override
public void mouseExited(MouseEvent arg0) {
    // TODO Auto-generated method stub

}

@Override
public void mousePressed(MouseEvent arg0) {
    System.out.println("++++++ Start Of Pressed ++++++");

    System.out.println("Mouse Pressed At: " + arg0.getX() + " "
            + arg0.getY());

    // Collect the clicked source and return if it's
    // not a JLabel (might have to be modified if we
    // want to click on other things than JLabels.
    Object source = (Object) arg0.getSource();

    if (source instanceof JLabel) {
        JLabel jlb = (JLabel) arg0.getSource();
        prevBounds = jlb.getBounds();
        xOffset = arg0.getX();
        yOffset = arg0.getY();

        ((JLabel) arg0.getSource()).getParent().setComponentZOrder(
                ((JLabel) arg0.getSource()), 0);

    }
    JLabel clicked = null;
    if (source instanceof JLabel) {
        clicked = (JLabel) source;
    } else {
        System.out.println("++++++ End Of Pressed ++++++");
        return;
    }

    System.out.println("++++++ End Of Pressed ++++++");

}

@Override
public void mouseReleased(MouseEvent arg0) {
    System.out.println("++++++ Start Of Released ++++++");

    if (!isDragged) {
        System.out.println("++++++ End Of Released, not dragging ++++++");
        return;
    }

    isDragged = false;
    xOffset = yOffset = 0;

    // The object being dragged
    JLabel source = (JLabel) arg0.getSource();
    System.out.println("Source is: " + source.toString());

    source.setBounds(prevBounds);

    System.out.println("++++++ End Of Released ++++++");

}
} 
```

一个基本的主类如下；

```
import java.awt.Dimension;
import java.util.ArrayList;

import javax.swing.JFrame;
import javax.swing.JLabel;

public class Main extends JFrame {

public Main() {
    setSize(new Dimension(600, 600));

    ArrayList<JLabel> labels = new ArrayList<JLabel>();
    JLabel label1 = new JLabel("Example 1");
    JLabel label2 = new JLabel("Example 2");
    labels.add(label1);
    labels.add(label2);

    ArrayList<ExamplePanel> panels = new ArrayList<ExamplePanel>();
    ArrayList<ExamplePanel> panels2 = new ArrayList<ExamplePanel>();
    System.out.println("LAbels size = " + labels.size());
    ExamplePanel secondPanel = new ExamplePanel(labels, panels2);
    panels.add(secondPanel);

    ExamplePanel firstPanel = new ExamplePanel(labels, panels);

    this.add(firstPanel);
    this.setVisible(true);
}

public static void main (String [] args) {
    Main main = new Main();
}
} 
```

我省略了将 JLabel 实际添加到 subPanel 并刷新面板的代码，因为这个问题没有必要。

感谢您提前提供任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:51:51.527

最简单的选择是从当前容器中删除标签并将其移动到框架玻璃窗格中，允许标签在玻璃窗格中移动并将其添加回它被丢弃的容器。

查看[如何使用玻璃板](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html#glasspane)了解更多信息

# vim - Vim: ci( 像 ci"?

> ID：14507256
> 
> 赞同：9
> 
> 时间：2013-01-24T17:31:35.823
> 
> 标签：vim

在 vim 中，如何`c``i``(`更改当前行括号中的内容，例如`c``i``"`更改引号中的所有内容？

我试过了

```
:nnoremap ci( f(lct) 
```

但我的映射被忽略了。我不能像那样扩展内置命令吗？

还有什么方法可以结合动作吗？我可以做一些事情，比如`c``{``f``)``h``h``}`将所有内容更改为右括号之前的两个字符吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T19:37:06.053

`ci(`和的行为`ci"`是不同的，因为 vim 不认为引号（和单引号）必须成对出现，而`({[<`这样做。一开始这有点奇怪。

这个“问题”有许多“修复”。[这是第一个想到的。](https://gist.github.com/1171559)

# backbone.js - 如何从backbone.js 视图中引用模型？

> ID：14507263
> 
> 赞同：0
> 
> 时间：2013-01-24T17:31:49.683
> 
> 标签：backbone.js, backbone.js-collections

我是backbone.js 的新手，并尝试使用我在其他语言中使用过的模式。他们中的一些人工作，有些人已经相当平淡。我的问题是——我应该如何从视图中引用我的模型。例如，我有 5 个相同的视图，我从模型集合中传递了一个模型。当用户单击 5 个视图之一时，我需要它使用创建它的模型。现在，只要用户单击视图，我就会为 this.model 获取 null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:35:08.890

[您需要按照官方文档http://backbonejs.org/#View-constructor](http://backbonejs.org/#View-constructor "主干视图构造函数")中的说明在视图构造函数中传递模型， 然后您可以使用 this.model 从视图访问模型

如果你变得未定义并且你已经在视图的构造函数中传递了模型，可能是因为调用回调函数时的上下文，你检查过吗？

# eclipse - 创建新工作区时如何设置 Eclipse 的默认设置？

> ID：14507265
> 
> 赞同：3
> 
> 时间：2013-01-24T17:32:10.157
> 
> 标签：eclipse

我从事几个大型项目，并为我正在从事的不同项目提供不同的工作区，以帮助提高在 Eclipse 中的搜索速度。我还为这些工作空间的不同分支提供了其他工作空间。当我创建新工作区时，我注意到我必须更新行号显示、减小字体大小和更改换行长度等内容。

我希望有一种方法可以全局更改这些默认值，因此每个新工作区都会自动获得我的首选设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T13:48:50.213

[Workspacemechanic](http://code.google.com/a/eclipselabs.org/p/workspacemechanic/)可以记录您在 Eclipse 首选项中所做的任何更改，然后它可以将这些更改应用到不符合它们的其他工作空间中。

[http://code.google.com/a/eclipselabs.org/p/workspacemechanic/](http://code.google.com/a/eclipselabs.org/p/workspacemechanic/)

通过使用工作区机制，您可以有效地覆盖 Eclipse 的全局默认首选项。
我用它来保持不同工作区之间的字体/颜色设置一致。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T17:41:04.043

一些设置可以通过向导导出/导入。导出/导入 -> 常规 -> 首选项。

您的许多设置存储在：`../workspace/.metadata/.plugins/org.eclipse.core.runtime/.settings/*`

（即：`org.eclipse.ui.editors`包含行号的设置）

您可以复制和粘贴它们。

# android - ANDROID 从以前的活动中获取数据

> ID：14507267
> 
> 赞同：2
> 
> 时间：2013-01-24T17:32:22.230
> 
> 标签：android

**这是我的问题的继续：**

从我的应用程序的先前活动中获取某些内容时遇到问题。我的情况是，之前的活动，称为 ListOfMeals，它有一个列表视图（早餐、早餐等）。如果我点击早餐并添加餐点，我会点击面包、水果、蔬菜等食物的列表，等之后，它应该添加到我的数据库中。但到目前为止我所拥有的是这个，请参考以下内容：

```
case R.id.btFoodVegetableSave:
        String mealname = selected;

        String serving = calories.getText().toString();
        int i = Integer.parseInt(serving.replaceAll("[\\D]", ""));

        String servng = String.valueOf(i);

        SimpleDateFormat sdf = new SimpleDateFormat("MM-dd-yyyy");
        String strDate = sdf.format(new Date());

        if ( ( mealname.isEmpty() || servng.isEmpty() ) ){

            // call for custom toast
            viewErrorToast();
        }

        else {

        boolean didItWork = true;

        try{

            BreakFastLog entry = new BreakFastLog(Baguettes_Bagels.this);
            entry.open();   
            entry.createEntry(mealname, servng, strDate);
            entry.close();

            }
            catch(Exception e){
                didItWork = false;
                viewErrorToast();
            }finally{
                if (didItWork){
                    viewBMRSavedToast();
                }

            }
        } // end of if else statement
        break; 
```

**我的应用程序的结构是这样的：**

活动 A - 膳食列表（listview = 早餐、早间小吃等）
活动 B - 从活动 A 中选择（例如，早间小吃），其中有一个添加更多食物的按钮
活动 C - 膳食类别列表（再次查看列表：面包，意大利面等）
活动 D - 从活动 C 中选择（再次列表视图：假设用户选择了面包）
活动 E - 面包列表（它再次具有列表视图）
活动 F - 从活动 E 中选择 - （用户现在选择例如白面包）

活动 F 有一个保存按钮，现在用户基于我的示例，选择了早餐，活动 f 的数据应该保存到早餐表。我怎样才能做到这一点？

在我的例子中，它只节省了我的早餐。但是当我选择早餐而不是早餐时，问题就出现了。如何获取用户从之前的活动中选择的内容并将其保存到相应的餐点中？

我知道这与此有关：

```
BreakFastLog entry = new BreakFastLog(Baguettes_Bagels.this);
        entry.open();   
        entry.createEntry(mealname, servng, strDate);
        entry.close(); 
```

我必须加上 if else 语句，但我想不出一些聪明的方法来实现这一点。提前感谢您的帮助。

**笔记：**

我试过这样做：

```
 Bundle extras = getIntent().getExtras();

            String breakfast = this.getIntent().getStringExtra("key_breakfast");
            String ms = this.getIntent().getStringExtra("key_morningsnack");
            String lunch = this.getIntent().getStringExtra("key_lunch");
            String as = this.getIntent().getStringExtra("key_afternoonsnack");
            String dinner = this.getIntent().getStringExtra("key_dinner");
            String es = this.getIntent().getStringExtra("key_eveningsnack");

            if( extras.equals(breakfast)){
                BreakFastLog entry = new BreakFastLog(Baguettes_Bagels.this);
                entry.open();   
                entry.createEntry(mealname, servng, strDate);
                entry.close();
            }
            else if( extras.equals(ms) ){ 
                MorningSnackLog entry = new MorningSnackLog(Baguettes_Bagels.this);
                entry.open();   
                entry.createEntry(mealname, servng, strDate);
                entry.close();
            }
            else if( extras.equals(lunch) ){
                LunchLog entry = new LunchLog(Baguettes_Bagels.this);
                entry.open();   
                entry.createEntry(mealname, servng, strDate);
                entry.close();
            }
            else if( extras.equals(as) ){
                AfternoonSnackLog entry = new AfternoonSnackLog(Baguettes_Bagels.this);
                entry.open();   
                entry.createEntry(mealname, servng, strDate);
                entry.close();
            }
            else if( extras.equals(dinner) ){
                DinnerLog entry = new DinnerLog(Baguettes_Bagels.this);
                entry.open();   
                entry.createEntry(mealname, servng, strDate);
                entry.close();
            }
            else if( extras.equals(es) ){
                EveningSnackLog entry = new EveningSnackLog(Baguettes_Bagels.this);
                entry.open();   
                entry.createEntry(mealname, servng, strDate);
                entry.close();
            } 
```

无济于事。当我运行它并单击保存按钮时，它被我的异常处理程序捕获。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:47:44.023

```
if( extras.equals(breakfast)) 
```

永远不会返回真。在这种情况下，您将捆绑包与字符串进行比较。您设置捆绑包的方式也存在一些问题。您的捆绑包实际上只需要一个属性，即餐食类型（下面的 KEY_MEAL）。尝试这样的事情......

```
public static final String MEAL_BREAKFAST = "breakfast";
public static final String MEAL_MORNING_SNACK = "morning_snack";
public static final String MEAL_LUNCH = "lunch";
public static final String KEY_MEAL = "meal";

Bundle bundle1 = new Bundle();
bundle1.putString(KEY_MEAL, MEAL_MORNING_SNACK); //change "MEAL_MORNING_SNACK" to whatever meal type was clicked

Intent i = new Intent();
i.putExtras(bundle1);
startActivity(i); 
```

在下一个活动中......

```
Bundle bundle2 = getIntent().getExtras();
if(bundle2.getString(KEY_MEAL).equals(MEAL_BREAKFAST))
    // meal is breakfast
else if(bundle2.getString(KEY_MEAL).equals(MEAL_MORNING_SNACK))
    // meal is morning snack
else if(bundle2.getString(KEY_MEAL).equals(MEAL_LUNCH))
    // meal is lunch 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:54:05.953

我们可以通过使用将变量和值从一个类传递到另一个类`intent`。我在酒店项目中使用的示例代码如下。希望对你有帮助

```
Intent in = new Intent(getApplicationContext(), goal.class);
in.putExtra("h_id", h_id);
in.putExtra("lat1", lat1);
in.putExtra("lon1", lon1);
startActivity(in); 
```

在这里，您可以通过这种方式开始下一个类执行，并将值从当前类传递到`goal class`使用`in.putExtras("varible_name in new class, value ")`

并在新的班级目标中使用

```
Intent in = getIntent();
        h_id = in.getStringExtra("h_id");
        lat1 = in.getDoubleExtra("lat1", 0);
        lon1 = in.getDoubleExtra("lon1", 0); 
```

# asp.net-web-api - 在 Web API 数据协定中允许自定义 XML

> ID：14507272
> 
> 赞同：2
> 
> 时间：2013-01-24T17:32:46.233
> 
> 标签：asp.net-web-api, deserialization

我正在开发一个 ASP.NET Web API 服务，它允许用户发布元数据。

在用户发布的数据合同之一中，他们应该能够以 XML 格式发布自己的自定义元数据。这是一个例子：

> ```
> <Delivery>
>     <Type>Direct</Type>
>     <Time>12:00:01</Time>
>     <Format>Segmented</Format>
>     <CustomMetadata>
>         <ClientReference>R46375683</ClientReference>
>         <Contact>Me@There.com</Contact>
>     </CustomMetadata>
> </Delivery> 
> ```

但是，我无法创建成功正确反序列化的数据合约。对于 CustomMetadata 节点，我有：

```
[DataMember(EmitDefaultValue=false)]
public XmlNode CustomMetadata { get; set; } 
```

当它被反序列化时，我收到一个异常：

> “集合类型 'System.Xml.XmlNode' 无法反序列化，因为它没有有效的 Add 方法，参数类型为 'System.Object'。”

我不完全理解为什么它试图向 XmlNode 中“添加”任何东西，但无论出于何种原因，它都失败了。做这种事情是否有替代方法，例如反序列化为不同的类型？我尝试反序列化为字符串，但这也给出了异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:37:57.473

Data Contract 序列化只支持原语和一些特殊类型。您必须使用 XmlElement 而不是 XmlNode。

尝试：

```
[DataMemeber]
public XmlElement CustomMetadata { get; set; } 
```

请参阅[http://msdn.microsoft.com/en-us/library/ms733127.aspx](http://msdn.microsoft.com/en-us/library/ms733127.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:40:17.580

您可以尝试使用 XmlElement 代替 XmlNode 吗？我相信序列化程序只有反序列化的特殊情况元素。XElement 也应该可以工作。

# java - 无法将空日期值插入 mysql

> ID：14507278
> 
> 赞同：0
> 
> 时间：2013-01-24T17:33:00.513
> 
> 标签：java, mysql, sql

```
String datum = datumInvoer.getText();

    **String bdate = bdatumInvoer.getText();**

    String[] speler = spelers.getSelectedItem().toString().split(" ");

    String[] toernooi = toernooien.getSelectedItem().toString().split(" ");
    try {
        PreparedStatement query = con.prepareStatement("INSERT INTO `fullhouse`.`inschrijving_toernooi` ( `IT_datum`, `IT_betaaldatum`, `speler`, `toernooi`) VALUES (?, ?, ? ,?)");
        query.setString(1, datum);
        query.setString(2, bdatum);
        query.setString(3, speler[0]);
        query.setString(4, toernooi[0]);

        query.execute(); 
```

我已将默认值设置为 NULL，但它仍然不会插入它我即将将数据类型更改为 varchar。

错误：日期值不正确

分隔符 $$

```
CREATE TABLE `inschrijving_toernooi` (
  `IT_code` int(11) NOT NULL AUTO_INCREMENT,
 `IT_datum` date DEFAULT NULL,
  `IT_betaaldatum` date DEFAULT NULL,
 `speler` int(11) NOT NULL,
 `toernooi` int(11) NOT NULL,
PRIMARY KEY (`IT_code`),
UNIQUE KEY `aaa` (`speler`,`toernooi`),
 KEY `FS_code_idx` (`speler`),
KEY `FT_code_idx` (`toernooi`), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:56:12.790

首先将您的日期参数从字符串转换为日期。对于下面的代码。

```
String bdate = bdatumInvoer.getText();
// get the correct date Format
// follow the link to get correct date format
// throws ParseException 
Date date = new SimpleDateFormat("dd-MM-yyyy").parse(bdate); 
```

[类 SimpleDateFormat API](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

现在在准备好的语句中将它们设置为日期，如下所示。由于您的表格结构允许表格中的日期。

```
query.setDate(2, date); 
```

现在您仍然想为该列设置 null 然后您可以使用并告诉您的查询通过在准备好的语句中使用以下格式来设置 null。

```
query.setNull(2, java.sql.Types.DATE); 
```

**或者**

```
query.setDate(2, null); 
```

[设置空 API](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#setNull%28int,%20int%29)

[java.sql.Types 到 SQL 类型的映射](http://docs.oracle.com/javadb/10.3.3.0/ref/rrefjdbc20377.html)

我认为这将解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:52:21.020

您需要更改将参数传递给准备好的语句的方式

它应该如下所示。datum 和 bdatum 应该是 Date 类型。如果您不使用数据库中定义的类型，您可以将无效数据传递给您的 sql，这会导致异常。

```
query.setDate(1, datum);
query.setDate(2, bdatum);
query.setInt(3, speler[0]);
query.setInt(4, toernooi[0]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T17:53:56.820

我怀疑您的`bdatum`变量包含一个空字符串。如果要插入 SQL null，则需要传入`null`，而不是空字符串。（当我在我的机器上尝试使用类似的插入时，我在尝试插入空字符串时得到“不正确的日期值”，但没有使用`null`.）

```
if ("".equals(bdatum))
    bdatum = null;

ps.setString(2, bdatum); 
```

当您在 JDBC 中为日期值传入字符串时，MySQL 将尝试解析它，但空字符串 ( `""`) 不是有效值。这与您尝试使用日期文字进行插入时类似：

```
INSERT INTO `some_table` (`some_nullable_date_column`) VALUES ('2000-01-01') -- this works
INSERT INTO `some_table` (`some_nullable_date_column`) VALUES (NULL) -- this works
INSERT INTO `some_table` (`some_nullable_date_column`) VALUES ('') -- this fails 
```

顺便说一句，为日期值传递字符串在*语义上*是错误的，并且可能不如在将字符串`Date`传递给`PreparedStatement`.

# php - php / mysql访问被拒绝选择进入outfile

> ID：14507285
> 
> 赞同：0
> 
> 时间：2013-01-24T17:33:33.383
> 
> 标签：php, mysql

我有以下 php 代码：

```
<?php

$hostname="db.";
$database="db..";
$username="db...";
$password="pw...";
$mysql = mysql_connect($hostname, $username, $password);

if(!$mysql) 
 echo 'Not conneted to the database...' . mysql_error() ;
else
 echo 'Connected to the database...' ;

// select the appropriate database
$mysqldb = mysql_select_db( $database );
if(!$mysqldb) 
 die('Could not select the database...'  . mysql_error());
else
 echo '<br /><br />Connected to database...<br /><br />' ;

$chk_table_access = 'select * from table_name where 1';
$chk_access = mysql_query($chk_table_access);
echo $chk_table_access . '<br /><br />';
if (!$chk_access) 
 echo 'Could not access table: ' . mysql_error() ;
else
 echo 'Table was accessed..<br /><br />' ;

$backup = 'SELECT * INTO OUTFILE "result.csv" FIELDS TERMINATED BY "," OPTIONALLY     ENCLOSED BY ';
$backup = $backup . "'" . '"' . "'" ;
$backup = $backup . ' FROM cities WHERE 1';
echo $backup . '<br /><br />';
$bk_success = mysql_query($backup);
if (!$bk_success)
 echo 'The backup was not successful. Reason: '  . mysql_error();
?> 
```

该程序在本地主机上运行良好，但是当我从我的网站运行它时，出现以下错误：用户'dbo????????'@'%'（使用密码：YES）的访问被拒绝。网络帮助没有多大帮助。

我确实收到“表已访问..”消息，所以我可以正常访问表。我每天都会对目录进行frwite，没有错误。我明白为什么它在 phpMyAdmin 中不起作用。我有点难过。这也是我在这个论坛上提出的第一个问题，虽然我经常来这里寻求帮助。你们（包括女士）摇滚。在此先感谢，史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:48:30.573

您的 MySQL 用户显然缺乏[`FILE`特权](http://dev.mysql.com/doc/refman/5.1/en/privileges-provided.html#priv_file)。

MySQL 服务器是否与 Web 服务器在同一台机器上运行？如果两台服务器都运行在不同的机器上，你可以在这里停下来：即使有`FILE`特权，输出文件也会在数据库服务器上创建（并且可能无法从 Web 服务器访问）。

# php - 为什么这个 array_filter 方法不调用这个函数？

> ID：14507287
> 
> 赞同：4
> 
> 时间：2013-01-24T17:33:38.413
> 
> 标签：php, callback, array-filter

```
private static function returnSameElementIfNotEmpty($item) {
    if (empty($item)) {
        return false;
    }
    else{
        return true;
    }
}

public static function clean($array) {
    return array_filter($array, 'returnSameElementIfNotEmpty');
} 
```

当我尝试使用示例数组运行它时，我得到：

**警告：array_filter() 期望参数 2 是一个有效的回调，在第 27 行的 C:\Framework\ArrayMethods.php 中找不到函数“returnSameElementIfNotEmpty”或无效的函数名**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T17:34:53.290

试试这个：

```
return array_filter($array, array(__CLASS__, 'returnSameElementIfNotEmpty')); 
```

发生错误是因为您没有调用类方法。但只是一个具有该名称的函数。在上面的示例中，我使用**CLASS**作为类类型来访问静态函数`returnSameElementIfNotEmpty`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-12T15:22:28.837

太好了，在未提及的文档中。

array( **CLASS** , 'returnSameElementIfNotEmpty') 解决警告

更优雅：

```
$ArrModEmpty = array_filter($array, function($Arr){
                return (empty($Arr));
            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-19T06:24:35.003

以下是执行回调函数的三个示例。
如果您像我一样，其中之一对您来说将是最直观的。
仔细看看 $callable 在每个中的定义方式的差异。

```
<?php

namespace App\Calculator;

class SimpleAddition
{
    protected $operands = [];

    public function setOperands(array $operands)
    {
        $this->operands = $operands;
    }

    function  callThisOne($a, $b){
        return $a + $b;
    }

    function returnCallThisTwo(){
        $callThis = function ($a, $b){
            return $a + $b;
        };
        return $callThis;
    }    

    public function callbackMethodOne()
    {                
        $callable = array($this, 'callThisOne');
        return array_reduce($this->operands, $callable, null);
    }

    public function callbackMethodTwo()
    {        
        $callable = $this->returnCallThisTwo();
        return array_reduce($this->operands, $callable, null);
    }

    public function callbackMethodThree()
    {
        $callable = function ($a, $b){
            return $a + $b;
        };
        return array_reduce($this->operands, $callable, null);
    }

}
?> 
```

这是单元测试：

```
<?php

namespace Tests\Unit;

use PHPUnit\Framework\TestCase;
use App\Calculator\Exceptons\NoOperandsException;

class SimpleAdditionTest extends TestCase
{
    /**
     * This will test the SimpleAddition class
     *
     * @return void
     */
    public function test_addition_with_callback_method_one()
    {
        $mathObject = new \App\Calculator\SimpleAddition;
        $mathObject->setOperands([2,2]);
        $this->assertEquals(4, $mathObject->callbackMethodOne());
    }

    public function test_addition_with_callback_method_two()
    {
        $mathObject = new \App\Calculator\SimpleAddition;
        $mathObject->setOperands([2,2]);
        $this->assertEquals(4, $mathObject->callbackMethodTwo());
    }

    public function test_addition_with_callback_method_three()
    {
        $mathObject = new \App\Calculator\SimpleAddition;
        $mathObject->setOperands([2,2]);
        $this->assertEquals(4, $mathObject->callbackMethodThree());
    }

} 
```

# facebook - Grails spring-security-facebook 插件 - 自定义客户端身份验证

> ID：14507291
> 
> 赞同：0
> 
> 时间：2013-01-24T17:33:52.960
> 
> 标签：facebook, grails, spring-security, grails-plugin

我正在使用 spring-security-facebook:0.10.4 在我们的 Grails 应用程序中集成 SSO 的 Facebook 身份验证。我们的要求之一是允许用户打开或关闭 SSO（通过我们应用程序中的某些控件）。如果它打开了，那么我们想使用 spring-security-facebook 过滤器进行身份验证。如果在我们的应用程序上关闭了 SSO，我们希望使用默认的 spring 安全过滤器进行身份验证（无论是否存在 Facebook cookie/auth 令牌）。

我不确定如何配置 spring-security-facebook 插件以允许此用例。现在，我有基于透明 cookie 的授权 (FacebookAuthCookieTransparentFilter) 工作，而且效果很好。问题是它会尝试在每个页面上通过 Facebook 进行身份验证。我看不到可以控制它的方法，因此我可以检查用户是否在我们的应用程序中打开了 SSO，并且仅在打开 SSO 时才使用 Facebook auth 过滤器。

我想我必须改用基于 cookie 的手动授权（FacebookAuthCookieDirectFilter），但我不知道如何配置它。文档（位于此处... [http://splix.github.com/grails-spring-security-facebook/guide/3%20Usage.html#3.4%20Client%20Side%20Authorization](http://splix.github.com/grails-spring-security-facebook/guide/3%20Usage.html#3.4%20Client%20Side%20Authorization)）说...“与 FacebookAuthCookieTransparentFilter 相同，它解析 Facebook cookie，但仅用于指定的 url。就像来自 spring-security-core 或类似的用户名/密码过滤器。成功授权后，它可以将用户重定向到指定的 url。

手动基于 cookie 的授权是满足我要求的方式吗？如何将其配置为仅适用于已在我们的应用中启用 SSO 的用户？如何将其配置为“……将用户重定向到指定的 url。”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T05:33:38.550

FacebookAuthCookieDirectFilter 仅对指定的 URL 应用基于 cookie 的授权。此 URL 配置在`grails.plugins.springsecurity.facebook.filter.processUrl`，默认为`/j_spring_security_facebook_check`

首先，您应该配置要使用的插件`facebookAuthCookieDirectFilter`，方法是添加`Config.groovy`：

`grails.plugins.springsecurity.facebook.filter.type='cookieDirect'`

然后使用 Facebook Javascript SDK，在客户端登录用户。授权后将用户重定向到`/j_spring_security_facebook_check`，如：

```
<facebookAuth:init>
   FB.Event.subscribe('auth.login', function() {
      window.location.href = '/j_spring_security_facebook_check'
   });
</facebookAuth:init>

<g:javascript> 
   $('#fbloginbutton').click(function() {
       FB.login();
   });
</g:javascript> 
```

# c# - 代码签名 VS 驱动程序签名证书

> ID：14507292
> 
> 赞同：2
> 
> 时间：2013-01-24T17:33:59.470
> 
> 标签：c#, nsis, code-signing, code-signing-certificate, driver-signing

我编写了一个带有 Nullsoft 安装程序的 C# 程序，我希望对其进行签名，首先是因为它会被下载，其次是因为它包含要安装的驱动程序，否则它将无法在 64 位系统上运行。

现在我以前从未签署过我的代码，而且我发现了两个单独的对代码签名证书**和**驱动程序签名证书的引用。

这两个是分开的吗？或者我可以使用代码签名证书对我的程序**和**驱动程序进行签名吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:25:52.910

I am not sure if you can use the *same* Certificate for signing both of them. But here is a recommondation how to sign both for a one time fee:

Microsoft only allows some of the CAs the ability to create Certificates which are capable to sign drivers. You can find the List of CAs on [this MSDN Website](http://msdn.microsoft.com/en-us/windows/hardware/gg487315.aspx).

My personal recommondation is StartSSL, because it's very cheap and delivers the *same* quality VeriSign or thers would deliver. Signing drivers using StartSSL requires StartSSL Extended Validation. You can find more Information and pricing [here](http://www.startssl.com/?app=40).

(Hint: For that one time fee for validation, you can create ONE CodeSigning-Certificate and a lot of Wildcard SSl Certificates for free!)

# jquery - 如何在调用下一个函数之前等到 jQuery 动画完成？

> ID：14507293
> 
> 赞同：4
> 
> 时间：2013-01-24T17:34:01.373
> 
> 标签：jquery

在调用下一个函数之前，我无法完成我的 jquery 函数。

本质上，我试图让我的新闻文章淡出，并在通过 ajax 检索下一页文章之前完成所有淡出动画。

这是我所拥有的（抽样仅包括相关功能）。

控制每篇新闻文章淡出的功能...

```
function fadeArticlesOut() {
    var delay = 0;
    //set timeout for image to appear (set at 500ms)
    $('#news-articles article').each(function(index) {
        $(this).delay(delay).fadeTo(800, 0);
        delay += 400;       
    })
}; 
```

通过单击分页链接触发的功能。这会捕获要通过ajax 加载的url，但在此之前，这是我要运行淡出功能的地方，即fadeArticlesOut。我想要的是在运行 loadProducts 函数之前完成淡出动画。

```
function doPager() {
    $('.pagination-controls a').click(function(e) {
        e.preventDefault();

        fadeArticlesOut();          
        loadProducts($(this).attr('href'));
        history.pushState(null, null, $(this).attr('href'));
        historyedited = true;
    });
}

function loadProducts(url) {
    $('#news-articles').empty().addClass('loading').load(url + ' #news-articles-inner', function() {
        $('#news-articles').removeClass('loading');
        doPager();
        fadeArticlesIn();
    });
} 
```

完成后，加载产品功能将在新的新闻文章中消失。

到目前为止，我已经尝试了许多方法，包括使用自定义回调、延迟对象和设置超时。我遇到的问题是我可以让它运行淡出，然后不继续加载 ajax 内容，或者没有淡出，但获取 ajax 内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T17:39:10.850

`.promise()`您可以通过使用然后添加[`.done()`](http://api.jquery.com/deferred.done/)处理程序来获得承诺。

```
function fadeArticlesOut() {
    ...
    return $('#news-articles article').each(function(index) {
      ...
    }).promise();
}; 
```

```
function doPager() {
    $('.pagination-controls a').click(function(e) {
        var $self = $(this);
        ...
        fadeArticlesOut().done(function(){
            loadProducts($self.attr('href'));
        });          
        ...
    });
} 
```

处理程序将`.done()`在所有动画完成后被调用。

# selenium-ide - 将文本值与 excel 值进行比较

> ID：14507295
> 
> 赞同：0
> 
> 时间：2013-01-24T17:34:06.057
> 
> 标签：selenium-ide

我正在尝试使用 selenium (Java/JUnit4/Remote Control) 编写一个自动化脚本。这是场景。

我需要用 excel 表中的值验证文本框中的值。如果值匹配，则测试步骤应该通过，否则失败。

# delphi - “var”和“out”参数有什么区别？

> ID：14507310
> 
> 赞同：58
> 
> 时间：2013-01-24T17:34:59.150
> 
> 标签：delphi, parameters, pass-by-reference

`var`声明的参数和声明的参数有什么区别`out`？编译器如何区别对待它们（例如，通过生成不同的代码，或通过更改它发出的诊断）？或者不同的修饰符是否仅仅允许程序员记录参数的预期用途？参数的*类型*对此事有何影响？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-24T17:38:57.693

一个`var`参数将通过引用传递，就是这样。

参数也通过`out`引用传递，但假定输入值无关紧要。对于托管类型（字符串、接口等），编译器将通过在例程开始之前清除变量来强制执行此操作，相当于编写`param := nil`. 对于非托管类型，编译器的实现`out`方式与`var`.

请注意，托管参数的清除是在调用站点执行的，因此为函数生成的代码不会随参数`out`或`var`参数而变化。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-25T10:26:21.673

对于编译器来说，没有太大区别。请参阅[梅森的答案](https://stackoverflow.com/a/14507363/757830)。

从语义上讲，有很大的不同：

*   `var`告诉程序员例程**可以**使用它的当前值，
*   `out`告诉程序员例程**将忽略/丢弃**其当前值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-20T17:17:26.350

有点晚了，但只是为了记录，我遇到了一个案例，其中**var**或**out**有很大的不同。

我正在开发一个导出以下方法的 SOAP Web 服务：

```
function GetUser( out User :TUser ) :TResult; 
```

它被导入到 C# 中，相当于

```
function GetUser( out Result :TResult) :TUser; 
```

当我将**out**更改为**var**时，它正确导入。

我猜测 Delphi SOAP 调用程序将函数结果视为一个**out**参数，并且有两个**out**参数会混淆 Delphi SOAP 例程。我不确定是否有一种解决方法可以让您使用**out**参数。

# objective-c - 如何在 Mac 上检测外接显示器的连接和断开连接？

> ID：14507312
> 
> 赞同：4
> 
> 时间：2013-01-24T17:35:06.773
> 
> 标签：objective-c, cocoa

您知道如何检测 Cocoa 应用程序中插入/拔出的其他屏幕吗？

我想检测用户在他的 Mac 上插入或拔出另一个屏幕的时刻。我怎么能这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T17:57:36.260

你的答案在于石英。

```
#include <ApplicationServices/ApplicationServices.h>

CGError CGDisplayRegisterReconfigurationCallback (
    CGDisplayReconfigurationCallBack proc,
    void *userInfo
); 
```

然后你的过程看起来像：

```
 MyCGDisplayReconfigurationCallBack(
    CGDirectDisplayID display,
    CGDisplayChangeSummaryFlags flags,
    void *userInfo) {

    if (flags & kCGDisplayAddFlag || flags & kCGDisplayRemoveFlag) {
        DoStuff(display, flags, userInfo);
    }
} 
```

在 Swift5 中：

```
extension ScreenDetector {

    static let callback: CGDisplayReconfigurationCallBack = { (displayId, flags, userInfo) in
        guard let opaque = userInfo else {
            return
        }
        let mySelf = Unmanaged<ScreenDetector>.fromOpaque(opaque).takeUnretainedValue()

        if flags.contains(.addFlag) {
            //Add Display...
        }else if flags.contains(.removeFlag) {
            //Removed Display...
        }

    }

    func addObervers() {
        let userData = Unmanaged<ScreenDetector>.passUnretained(self).toOpaque()
        CGDisplayRegisterReconfigurationCallback(ScreenDetector.callback, userData)
    }

    func removeObservers() {
        let userData = Unmanaged<ScreenDetector>.passUnretained(self).toOpaque()
        CGDisplayRemoveReconfigurationCallback(ScreenDetector.callback, userData)
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-01T12:41:26.080

如果有人有兴趣在 Swift 2.3 中执行此操作，我挠了挠头来翻译 @iluvcapra 的代码：

```
let userData = UnsafeMutablePointer<ViewController>(Unmanaged.passUnretained(self).toOpaque()) //use the class name of your "self" for future reference inside the callback
CGDisplayRegisterReconfigurationCallback({ (display: UInt32, flags: CGDisplayChangeSummaryFlags, userInfo: UnsafeMutablePointer<Swift.Void>) in
    let mySelf = Unmanaged<ViewController>.fromOpaque(COpaquePointer(userInfo)).takeUnretainedValue() //change here to your class name
    if flags.rawValue & CGDisplayChangeSummaryFlags.AddFlag.rawValue > 0 {
        //do stuff on connect
        mySelf.someFunction()
    } else if flags.rawValue & CGDisplayChangeSummaryFlags.RemoveFlag.rawValue > 0 {
        //do stuff on disconnect
    }
}, userData) 
```

# c# - 用于许多 API 登录密钥查找的 LinqToSQL 或纯 SQL

> ID：14507317
> 
> 赞同：0
> 
> 时间：2013-01-24T17:35:27.937
> 
> 标签：c#, sql, linq-to-sql

我正在开发一个类似 REST 的 API，其中将进行初始登录调用，创建数据库行，并将“登录会话密钥”（GUID/唯一标识符）返回给客户端。然后，此密钥将用于对 API 的所有后续调用作为安全检查，直到注销。在每次 API 调用中，我计划要求数据库使用键查找行，如果行的时间戳尚未过期，则允许 API 提供所需的服务。

对于每个“登录会话”可能发生数百次的简单选择语句，在这种情况下，纯 SQL 会比 LinqToSQL 更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:39:15.937

纯 SQL 应该比 LinqToSQL 执行得更好（如果有的话，因为它不需要第一次构造和缓存查询），但是，这取决于用户数量、服务器能力以及这些“数百次”的速度有多快如果您应该担心它，就会发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:39:55.500

这是 2008 年的一篇长文章（5 部分），说明通过适当的调整，他能够让 Linq-to-sql 执行与直接 ADO.NET sql 调用一样或几乎一样好，而花费在构建查询上的时间更少. 希望能帮助到你！

[http://blogs.msdn.com/b/ricom/archive/2007/06/22/dlinq-linq-to-sql-performance-part-1.aspx](http://blogs.msdn.com/b/ricom/archive/2007/06/22/dlinq-linq-to-sql-performance-part-1.aspx)

这是另一批测试，它实际上说明 Linq 在插入场景中是赢家，并且在读取 XML 文件时略有优势。

[http://www.codeproject.com/Articles/26431/Performance-Comparisons-LINQ-to-SQL-ADO-C#_Toc193731671](http://www.codeproject.com/Articles/26431/Performance-Comparisons-LINQ-to-SQL-ADO-C#_Toc193731671)

# c# - DotNetZip 是否可以重新构建存档文件中的目录

> ID：14507320
> 
> 赞同：1
> 
> 时间：2013-01-24T17:35:30.273
> 
> 标签：c#, zip, dotnetzip

我的 zip 文件有两级目录结构。我使用 AddDirectoryByName 在根目录添加了一个新目录。是否可以将现有目录移动到新创建的目录中？我喜欢让 zip 文件包含 3 级目录结构而不提取 zip 文件。

当前档案：

```
RootFolder -
           + TopFolder -
                       + SecondFolder 
```

更新存档文件：

```
RootFolder -
           + NewFolder -
                       + TopFolder -
                                   + SecondFolder 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T16:35:45.917

我想到了。我只需要修改所有条目中的文件名。

```
using (ZipFile oZip = ZipFile.Read(sFileZip))
{
     for (int iIdx = 0; iIdx < oZip.Entries.Count; iIdx++)
     {
           string sTmpFileName = oZip[iIdx].FileName;
           oZip[iIdx].FileName = "NewFolder/" + sTmpFileName;
     }
     oZip.Save();
} 
```

# wix - wix卸载对话框属性未更新

> ID：14507322
> 
> 赞同：0
> 
> 时间：2013-01-24T17:35:41.907
> 
> 标签：wix, windows-installer, wix3.5

我在我的卸载序列中启动了一个自定义对话框，以最终从用户那里收集一些数据项，以运行自定义操作来撤消安装时自定义操作。不幸的是，UI 中的所有属性值都没有更新...？当我访问我的自定义操作代码时，它们都是空白的。

我已经阅读了网络上的大部分相关帖子，并且我知道没有多少人在执行卸载对话框，因为它不会显示在卸载程序的添加/删除版本中，并且有可能使用`ARPNOREMOVE`, 等来解决这个问题...

考虑到我确实想使用卸载对话框，为什么不更新属性？我将对话框添加到安装时间序列中，并且属性在自定义操作中，所以我不认为这是我的对话框或属性的配置问题。卸载中的 UI 属性有什么不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T07:07:00.920

可能会出现很多问题：

1.  这些属性不是公开的（应用程序大写名称）。只有公共属性被传递到安装的执行阶段。更多细节[在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367437%28v=vs.85%29.aspx)。

2.  您的自定义操作延迟运行，它无权访问安装上下文。有关如何从延迟的 ca 访问上下文数据的[更多](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370543%28v=vs.85%29.aspx)详细信息。

# android - 如何使用该列表视图在列表视图之外进行相对布局

> ID：14507325
> 
> 赞同：-1
> 
> 时间：2013-01-24T17:36:23.777
> 
> 标签：android, android-layout, android-listview

我有一个xml文件，其中包含一些UI元素和一个listview，在listview上方有relativelayout，我希望在滚动listview时，relativelayout随之滚动，如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T17:38:42.037

您可以使用[`ListView.addHeaderView(View view)`](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View%29).

请注意，在这种情况下，您应该`RelativeLayout`从 xml 中排除并在运行时创建它。也`addHeaderView` **必须**在之前调用`setAdapter`。

**更新**

只需提取`RelativeLayout`到一个单独的 xml 文件（例如`header.xml`）。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/orderMeal"
        android:layout_marginLeft="20dip"
        android:id="@+id/tv_restaurant_description_orderMeal"
        android:drawableTop="@drawable/order_meal" />
    <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/favorite"
        android:layout_alignParentRight="true"
        android:layout_marginRight="20dip"

        android:drawableTop="@drawable/favorite"/>
</RelativeLayout> 
```

然后在代码中膨胀它：

```
lv_restaurantInformation = (ListView) findViewById(R.id.lv_restaurant_description_information);
lv_restaurantInformation.addHeaderView(LayoutInflater.from(this).inflate(R.layout.header, null)); 
```

# c++ - 取消引用已初始化为 list.begin 的迭代器时收到段错误

> ID：14507327
> 
> 赞同：0
> 
> 时间：2013-01-24T17:36:32.307
> 
> 标签：c++, list, stl, iterator, segmentation-fault

取消引用已初始化为 list.begin() 的迭代器时出现段错误。

```
list<data>::iterator it;
for(int i=0; i< n; i++)    
{
    it = (list_empty[i]).begin();
    while(it != (list_empty[i]).end())
    {
        cout<<"PROBLEM HERE: size="<<it->process.size<<endl;
        //cout<<"log file i="<<i<<endl;
        log_file_start(current_time, it,"list of empty");
        it++;
    }
} 
```

这是来自 gdb 的错误：

```
Program received signal SIGSEGV, Segmentation fault.
[Switching to process 2888]
0x0804ecc0 in log_file_buddy (list_delay=..., list_vp=..., 
    list_empty=0x805a00c, method=..., current_time=0, n=10)
    at fuctions_of_mm.cpp:425 
425         cout<<"PROBLEM HERE: size="<<it->process.size << endl; 
```

bt full 的 gdb 输出显示迭代器为 NULL。

```
(gdb) bt full
#0  0x0804ecc0 in log_file_buddy (list_delay=..., list_vp=..., 
    list_empty=0x805a00c, method=..., current_time=0, n=10)
    at fuctions_of_mm.cpp:425
        i = 8
        it = {_M_node = 0x0}
        out = <incomplete type> 
```

尽管迭代器为 NULL，但仍会`it != (list_empty[i]).end()`计算 。怎么了？

**编辑：** 抱歉遗漏。就是这样：`list_empty = new list<data>[n];` N是给定的参数，表示：2^{N} = Size_of_Memory

**编辑#2：** 这是定义：

```
typedef struct data{
    int position;
    vp proccess;
    int delay;
    int current_life;
    int time_start;
    int time_stop;
    int part_of_memory; 
    bool operator ==(const data& st)
    {
      return proccess.pid == st.proccess.pid;
    }
}data; 
```

以及vp的定义：

```
 typedef struct {
    int size;
    int pid;//prosdiorisths diergasias
 }vp 
```

**以及 n: 的值`n = 10`。**

**list_empty 的声明是 list< data > *list_empty; .**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:57:34.770

这对我有用：

```
#include <list>
using std::list;

const int n = 10;

typedef struct {
    int size;
    int pid;//prosdiorisths diergasias
}vp;

typedef struct data{
    int position;
    vp process;
    int delay;
    int current_life;
    int time_start;
    int time_stop;
    int part_of_memory;
    bool operator ==(const data& st)
    {
    return process.pid == st.process.pid;
    }
}data;

int main()
{

    list<data>* list_empty = new list<data>[n];
    list<data>::iterator it;
    for(int i=0; i< n; i++)
    {
        it = (list_empty[i]).begin();
        while(it != (list_empty[i]).end())
        {
            cout<<"PROBLEM HERE: size="<<it->process.size<<endl;
            //cout<<"log file i="<<i<<endl;
            //log_file_start(current_time, it,"list of empty");
            it++;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:01:02.137

是什么`it`？

```
it_empty = new list<data>::iterator[n];
for(int i=0; i< n; i++)    
{
    auto it = (list_empty[i]).begin();
    while(it != (list_empty[i]).end())
    {
        cout<<"PROBLEM HERE: size="<<it->process.size<<endl;
        //cout<<"log file i="<<i<<endl;
        log_file_start(current_time, it,"list of empty");
        it++;
    }
} 
```

# jquery - .net mvc 更新的 jquery 现在出现严重错误

> ID：14507334
> 
> 赞同：6
> 
> 时间：2013-01-24T17:37:02.250
> 
> 标签：jquery, asp.net-mvc

我今天通过 NuGet 更新了 jquery，现在收到以下错误：

```
JavaScript critical error at line 1, column 11 http://localhost:53779/Scripts/jquery-1.9.0.min.map

SCRIPT1004: Expected ';' 
```

有没有其他人遇到过这个并可以提出解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T17:12:40.063

我今天偶然发现了这一点，并认为我应该对这个问题进行实际解决。

在我的 BundleConfig.cs 中，我有以下内容：

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
            "~/Scripts/jquery-1.*")); 
```

通配符被用于获取最新版本的 jQuery，但是，Bundle Builder 也在获取地图文件。

通过如下更新 BundleConfig.cs：

```
bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
            "~/Scripts/jquery-{version}.js")); 
```

这解决了问题。{version} 令牌是与文件进行最佳匹配的替换。因此，现在不是添加所有文件，而是在您请求捆绑和缩小的库上获得匹配。

此处找到此修复程序的来源[http://jameschambers.com/2013/01/jquery-script-map-causing-critical-error-in-jquery-1-9-0/](http://jameschambers.com/2013/01/jquery-script-map-causing-critical-error-in-jquery-1-9-0/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T16:23:05.960

.map 文件用于调试（例如，Chrome 中有一些新功能可以让您“映射”到源代码的非缩小版本）。

如果您正在使用捆绑/缩小，您可以链接到文件的完整版本，这样您就可以安全地删除（或移动）.map 文件并且代码将再次工作，您仍然可以通过 MVC 框架进行缩小.

作为说明，我假设您在这里没有做任何 jQuery 库工作，并且您当前不需要在浏览器中调试时访问非缩小版本。通常情况下，我是 jQuery 的“消费者”并且倾向于不查看黑匣子。

有关更多信息，Elijah 提供了一些关于源地图点以及如何使用它的重要信息。

[http://www.elijahmanor.com/2013/01/the-magic-of-jquery-source-map.html](http://www.elijahmanor.com/2013/01/the-magic-of-jquery-source-map.html)

同样，如果您想实施临时解决方法来解决地图缩小问题（可能相关），您可以查看这个 SO 问题：[jquery 1.9.0 and modernizr cannot be minified with the ASP.NET Web Optimization Framework](https://stackoverflow.com/questions/14402741/jquery-1-9-0-and-modernizr-cannot-be-minified-with-the-asp-net-web-optimization)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-04T17:54:16.920

此问题的另一个可能原因是如果您定义了两个具有相同名称的包（一个脚本，一种样式）：

```
 bundles.Add(new ScriptBundle("~/bundles/bootstrap")
            .Include("~/Scripts/bootstrap.js"));

    bundles.Add(new StyleBundle("~/bundles/bootstrap")                        
            .Include("~/Content/bootstrap.css")); 
```

然后，在页面中，执行以下操作：

```
 <%=Scripts.Render("~/bundles/bootstrap")%> 
```

它将尝试将 css 呈现为 javascript 并且会失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-15T14:37:24.073

我搞砸了，因为我剪切和粘贴了错误的东西。我有

```
@Scripts.Render("~/Content/DataTables/css") 
```

应该是

```
@Styles.Render("~/Content/DataTables/css") 
```

我应该注意到的另一个赠品。我收到了 javascript 错误，但该文件是一个 css 文件。嗬！

# c - 使用 C 时出现分段错误

> ID：14507335
> 
> 赞同：1
> 
> 时间：2013-01-24T17:37:03.950
> 
> 标签：c, segmentation-fault

> **可能重复：**
> [使用 scanf 的分段错误](https://stackoverflow.com/questions/13447891/segmentation-fault-using-scanf)

我正在尝试运行一个 C 程序，其中我接受用户的密码然后输出它。但是，当我运行该程序时，我收到一条名为“Segmentation Fault (core dumped)”的消息。我知道这个错误发生在数组似乎超过堆栈大小但我无法弄清楚我错在哪里的地方。任何帮助表示赞赏。代码如下：

```
int main(int argc, char *argv[])
{
    int i = 0;
    char *password, *key;

int keylength = 256;

    printf("\nPlease enter a password: ");
    scanf(" %[^\n]", &password);
    printf("Entered password is: %s", password);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T17:38:49.343

您没有为`password`. 它只是一个未初始化的指针。在 C 语言中，您*始终*需要确保您的指针在使用它们之前指向有效分配的内存缓冲区。使用未初始化的指针会导致未定义的行为，这通常会导致崩溃。

`password`通过 (1) 声明`password`为堆栈数组来分配内存：

```
char password[1024]; 
```

或 (2)，使用分配内存缓冲区`malloc`：

```
char *password = malloc(1024); 
```

如果您使用`malloc`，请记住，您分配的任何东西都`malloc`必须通过相应的调用来释放`free`。

此外，在您发布的代码中，当您将缓冲区传递给 时，当您说 时`scanf`，您正在获取指针本身的*地址*`&password`。您想要做的只是传递指针（这是一个引用您分配的缓冲区的内存地址），例如：

```
scanf(" %[^\n]", password); 
```

注意没有`&`before `password`。你不需要它，因为它`password`是一个指针。放置`&`before`password`意味着您将指针传递*给指针*，这不是您想要的。

最后，请注意，在使用 C 编程时，缓冲区溢出是一种*持续的危险*。 `scanf`不会做任何事情来阻止程序的用户输入超出缓冲区容量的数据。如果发生这种情况，则会发生缓冲区溢出，并且您的程序将表现出未定义的行为（并且可能会崩溃）。有一些更安全的方法可以从用户那里获取字符串输入，例如[**`fgets`**](http://linux.die.net/man/3/fgets).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T17:38:57.973

`password`是一个未初始化的指针。他不能握住任何绳子。尝试写入此变量会导致未定义的行为。这里有两个解决方案：

```
char password[SIZE];

/* or */

char *password = malloc(size); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T17:39:17.047

您已经创建了指针`password`，但您从未对其进行初始化。

这意味着指针包含一个随机值，在这种情况下，无论堆栈中发生了什么。当您取消引用指针时，您正在尝试访问该随机地址处的内存。这永远不会是你想要的，并且很可能会导致诸如分段错误之类的问题。

# django - 无法显示 Django 图像

> ID：14507336
> 
> 赞同：-1
> 
> 时间：2013-01-24T17:37:04.773
> 
> 标签：django, image

我无法从数据库信息中显示我的图像文件。如果我直接输入文件名，它可以正常工作，但代码显示损坏的图像。非图像变量工作正常，图像作为文件名的 CharField 存储在模型中（我现在意识到这可能不是最好的，但我认为改变可能为时已晚？）我做错了什么?

```
<div class="product_image" >
        {% load static %} <img src="{% static "images/{{p.image.url}}" %}" alt={{p.name}}/> 
```

（我也试过 {{p.image}} 没有运气。）

以下是相关设置——仍然对媒体与静态感到困惑。

```
MEDIA_ROOT = os.path.join(os.path.dirname(__file__), 'media')

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = '/media/'

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = os.path.join(os.path.dirname(__file__), 'staticcoll')

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    os.path.join(os.path.dirname(__file__), 'static'),
) 
```

这是产品型号（p）：

```
class Product(models.Model):
    name = models.CharField(max_length=255, unique=True)
    price = models.DecimalField(max_digits=9,decimal_places=2)
    old_price = models.DecimalField(max_digits=9,decimal_places=2,
                                    blank=True,default=0.00)
    image = models.CharField(max_length=50, default="imagenotfound.jpeg")
    is_active = models.BooleanField(default=True)
    description = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    categories = models.ManyToManyField(Category)
    store_name = models.ForeignKey(Store, blank = True, null = True)
    class Meta:
        db_table = 'products'
        ordering = ['-created_at']

    def __unicode__(self):
        return self.name 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:07:51.463

你不能像这样嵌套 Django 标签。

如果 p.image 是 CharField，请使用

```
<img src="{% static p.image %}" alt="{{p.name}}"/> 
```

您需要确保字段中存储了正确的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:11:27.490

由于它只是存储在 中的文件名`p.image.url`，这将起作用：

`<img src="{{ STATIC_URL }}images/{{p.image}}" alt={{p.name}}/>`

你必须有`context = RequestContext(request)`你的看法`{{ STATIC_URL }}`才能工作。

你可以在`RequestContext` [这里阅读。](https://docs.djangoproject.com/en/dev/ref/templates/api/#subclassing-context-requestcontext)

# c# - InvoiceDate < INvoiceDate.Addmonths(-)

> ID：14507338
> 
> 赞同：0
> 
> 时间：2013-01-24T17:37:12.890
> 
> 标签：c#, asp.net, datetime, if-statement

我有一个声明...

```
if (lastInvoice.Invoice_Date < DateTime.Now.AddMonths(-12)) 
```

这会检查发票上的日期，如果它是 2012 年 1 月之前的 12 个月前的任何内容，请继续使用代码。

所以不是 dateTime.Now.AddMonths(-12)) 我想说的是从发票日期算起的 6 个月

我试过了...

```
if (lastInvoice.Invoice_Date < lastInvoice.Invoice_Date.AddMonths(-0-worksite.Number_of_Months)) 
```

也尝试不使用 (-0) 并将其作为 (0) 但需要 - 用于表达式。无论如何，它并没有返回它应该是什么。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:44:05.123

```
if (lastInvoice.Invoice_Date < lastInvoice.Invoice_Date.AddMonths(-0-worksite.Number_of_Months)) 
```

你在`Invoice_Date`和自己比较。您可能想与之比较`DateTime.Now`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:44:28.397

确保`worksite.Number_of_Months`返回类型是整数，否则使用`-Convert.ToInt32(worksite.Number_of_Months)`并且您应该将其与`DateTime.Now()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T17:40:41.540

`lastInvoice.Invoice_Date`永远不会小于`lastInvoice.Invoice_Date.AddMonths(-anything)`。

这应该适合你：

```
if (lastInvoice.Invoice_Date < DateTime.Now.AddMonths(-worksite.Number_of_Months)) 
```

如果这没有给你正确的答案，我会使用调试器来确认 worksite.Number_of_Months 实际上是你所期望的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T17:46:15.590

根据我上面评论的答案，我认为你想要：

```
if (DateTime.Now > lastInvoice.Invoice_Date.AddMonths(6)) 
```

或者更准确地说：

```
if (DateTime.Now > lastInvoice.Invoice_Date.AddMonths(worksite.Number_of_Months)) 
```

# sql - 在 Unpivot ORACLE 之后重新排列列

> ID：14507340
> 
> 赞同：0
> 
> 时间：2013-01-24T17:37:22.710
> 
> 标签：sql, oracle, oracle11g, unpivot

如果我开始：

```
SELECT * FROM unpivot_test;

         ID CUSTOMER_ID PRODUCT_CODE_A PRODUCT_CODE_B PRODUCT_CODE_C PRODUCT_CODE_D
 ---------- ----------- -------------- -------------- -------------- --------------
     1         101             10             20             30
     2         102             40                            50
     3         103             60             70             80             90
     4         104            100 
```

当我 Unpivot 我得到值

```
SELECT *
FROM   unpivot_test
UNPIVOT (quantity FOR product_code IN (product_code_a AS 'A', product_code_b AS 'B', product_code_c AS 'C', product_code_d AS 'D'));

        ID CUSTOMER_ID  P   QUANTITY
---------- ----------- --- ----------
     1         101     A         10
     1         101     B         20
     1         101     C         30
     2         102     A         40
     2         102     C         50
     3         103     A         60
     3         103     B         70
     3         103     C         80
     3         103     D         90
     4         104     A        100 
```

如果我想让数量列显示在 P 列之前怎么办，我将如何去做，我基本上想要

```
 ID CUSTOMER_ID   QUANTITY    P
---------- ----------- -----------  ----------
     1         101     10           A
     1         101     20           B 
```

......

oracle版本是11g

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:40:15.767

```
SELECT ID, CUSTOMER_ID, QUANTITY, P FROM
(SELECT *
FROM   unpivot_test
UNPIVOT (quantity FOR product_code IN (product_code_a AS 'A', product_code_b AS 'B',  
product_code_c AS 'C', product_code_d AS 'D'))); 
```

# php - 阅读 PHP Session 时是否需要 `htmlspecialchars()`？

> ID：14507344
> 
> 赞同：0
> 
> 时间：2013-01-24T17:38:04.583
> 
> 标签：php, mysql, session

在将 PHP Session 发送到 MySQL 查询之前是否需要使用`htmlspecialchars()`？

一些邪恶的黑客可以在他的机器上创建带有危险 SQL 注入的会话吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T17:40:08.393

不。

`htmlspecialchars()`在将文本放入 HTML 之前使用。（受信任的 HTML 直接放入 HTML。不受信任的 HTML 通过白名单运行）。这是对 XSS 的防御。

在将数据放入 SQL 查询时，您必须担心 SQL 注入。由于会话数据首先只包含您放入其中的内容，因此如果您采取任何措施来防御 SQL 注入，那么它们将取决于您放入会话中的数据。

根据经验，任何放入查询的变量都应该[使用绑定变量而不是字符串连接插入](https://stackoverflow.com/a/60496/19068)。

# asp.net - GridView：RowCommand 上的 RegisterStartupScript

> ID：14507345
> 
> 赞同：1
> 
> 时间：2013-01-24T17:38:05.190
> 
> 标签：asp.net, gridview

我正在构建一个 GridView 派生控件，该控件具有编辑按钮，可以打开一个新的 url 进行编辑或为编辑 url 打开一个模式窗口（通过 jquery 对话框）。问题是打开模态窗口的javascript没有触发（可能是它触发了，但由于回发我看不到它，但是没有出现console.log，所以我认为没有触发）。

javascript代码是正确的，如果我将它粘贴到控制台中，它会达到预期的效果。

所以这是我在 Sub 中的代码：

```
Protected Shadows Sub RowCommand(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewCommandEventArgs) Handles MyBase.RowCommand

    If e.CommandName = "EditInForm" Then
        If Not FormularioModal Then
            HttpContext.Current.Response.Redirect(url_edicion, True)
        Else
            'Must open a modal windows, registers JS to open dialog
            Dim scriptModal As String = scriptAbreModal(url_edicion) 'This function creates correct javascript

            log.log(String.Format("Registering {0}", scriptModal))

            Dim page As Page = HttpContext.Current.Handler
            Dim nombreScript As String = "scrAbreModal" & Guid.NewGuid().ToString().GetHashCode().ToString("x")
            Dim cstype As System.Type = page.GetType
            Dim cs As ClientScriptManager = page.ClientScript

            If (Not cs.IsClientScriptBlockRegistered(cstype, nombreScript)) Then
                cs.RegisterStartupScript(page.GetType, nombreScript, scriptModal)
            End If
    End If
End If 
```

*（也尝试过`RegisterClientScriptBlock`代替`RegisterStartupScript`）*

只是为了记录，生成的javascript代码是：

```
<script type="text/javascript"> 
var miVentanaModal; 
miVentanaModal = $('<iframe id="iGridViewModalIFrame" src="q_pregunta_elementodoc.aspx?op=upd&id=28&pregunta=6&modal=true" />')
.dialog({ title: 'Title', 
            autoOpen: true, 
            width: 575, 
            height: 320, 
            modal: true, 
            resizable: true, 
            autoResize: true, 
            overlay: { opacity: 0.5, background: "black" } }).width(555).height(300);
</script> 
```

有任何想法吗？

谢谢

PS：此代码在纯代码类中，它在包含一些控件和实用程序的 dll 中

# reporting-services - 格式最后日期未采用特定格式

> ID：14507347
> 
> 赞同：0
> 
> 时间：2013-01-24T17:38:08.580
> 
> 标签：reporting-services, reportingservices-2005

`AuthAmounts`我正在尝试以某种格式从我的数据集中获取最新日期，`MM/dd/yyyy`但它拒绝剥离时间值。我已经尝试了我能想到的所有排列，包括以下内容：

```
=Format(Last(Fields!CustAuthorizationDate.Value,"MM/dd/yyyy"), "AuthAmounts")
=Last(Format(Fields!CustAuthorizationDate.Value,"MM/dd/yyyy"), "AuthAmounts")
=Format(Last(Fields!CustAuthorizationDate.Value,"AuthAmounts"), "MM/dd/yyyy")
=Last(Format(Fields!CustAuthorizationDate.Value,"AuthAmounts"), "MM/dd/yyyy") 
```

在每种情况下，我都会返回类似`10/26/2010 12:00:00 AM`. 我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:23:27.913

正如上面在 SSRS 2005 (BIDS) 中的讨论所指出的，用户有时必须保存、关闭和重新打开解决方案才能使代码更改真正起作用。尽管这很令人沮丧，但它远没有格式正确的表达式被系统反复拒绝并且不知道为什么会这样令人沮丧！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T23:31:59.103

如果您在报表生成器中对其进行格式化，您需要在表本身而不是查询或表达式中执行此操作。

请记住，SSRS 服务比其他任何人都更智能；）因此该服务具有日期和时间的默认日期格式。默认情况下我一直得到这个，你需要物理更改打印格式而不是表达式或数据集查询。

# c# - 从本地初始化 lambda 终止 Parallel.ForEach 循环的最佳方法是什么？

> ID：14507353
> 
> 赞同：0
> 
> 时间：2013-01-24T17:38:39.060
> 
> 标签：c#, parallel.foreach

在我的`Parallel.ForEach`循环中，我有一些需要在“本地初始化”lambda 中初始化的对象。如果这些对象之一无法初始化，我想终止整个并行循环。做这个的最好方式是什么？

```
Parallel.ForEach(collection,
   () => //local init
   {
      var localObjects= CreateObjects();
      foreach (var obj in localObjects)
         if (!obj.Initialize())
            // want to terminate the entire parallel loop here!!
      return localObjects;
   }
   (element, loopState, localObjects) => // loop body
   {
      // some code here
   },
   localObjects => // local finally
   {
      foreach (var obj in localObjects)
         obj.Terminate();
   }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:35:26.400

也许是这样的。

```
Parallel.ForEach(collection,
   () => //local init
   {
      var localObjects= CreateObjects();
      foreach (var obj in localObjects)
         if (!obj.Initialize())
            return null; // returning null as a "flag" for the loop
                         // body block to use
      return localObjects;
   },
   (element, loopState, localObjects) => // loop body
   {
      if (state.IsStopped || localObjects == null)
      {
         // will signal to stop at earliest convenience
         loopState.Stop();

         // will make sure nothing is done this iteration
         return null;
      }

      // some code here
   },
   localObjects => // local finally
   {
      foreach (var obj in localObjects)
         obj.Terminate();
   }); 
```

请注意，这意味着 finally 块中的 localObjects 也将为空，并且什么都不会是`Terminate()`d。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:54:04.753

最好的方法（没有看到任何代码）是检查您尝试初始化的对象是否是`null`，如果是，`break()`。

我希望这有帮助。

*编辑。根据一些评论，`stop()`在这种情况下可能是更好的选择。*

# c# - 项目值不会在设置了数据模板的绑定 wpf 列表框中更新

> ID：14507354
> 
> 赞同：0
> 
> 时间：2013-01-24T17:38:40.417
> 
> 标签：c#, wpf, binding, user-controls, listbox

似乎我对绑定做了一些扭曲，但经过大量尝试和研究后，我仍然没有找到原因（我发现的所有示例都与我的实现非常相似，以至于我看不出我做错了什么），你能帮我吗？

我有一个名为的类`GlobalConfig`，它实现`INotifyPropertyChanged`并有一个名为 Name 的属性。

```
public class GlobalConfig : XmlSoftLinkSerializer, INotifyPropertyChanged
{
    private string _name;
    public string Name 
    { 
        get { return _name; } 
        set 
        {
            if (_name != value && PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs("Name"));
            _name = value;
        } 
    } 
```

一个`ObservableCollection<GlobalConfig>`绑定到一个`ListBox`（通过设置`DataContext`列表框的属性），我有这个列表框的DataTemplate：

```
<DataTemplate>
     <TextBlock Text="{Binding Path=Name, UpdateSourceTrigger=PropertyChanged}" />
</DataTemplate> 
```

我还有一个名为的用户控件`GlobalConfigUI`，它绑定到`DataContext`列表框（使用 ElementName）。

这里一切正常，但是当我更改配置的名称时，列表框中没有任何变化...我检查并知道`PropertyChanged`名称设置器中的处理程序被调用，对象也`GlobalConfig`被更新，但列表框仍然显示旧的姓名...

这`GlobalConfigUI`是绑定到列表框的 DataContext 的方式：

```
<my:GlobalConfigUI x:Name="globalConfigUI1" DataContext="{Binding ElementName=settingsListBox, Path=SelectedValue, Mode=TwoWay}" /> 
```

下面是 GlobalConfigUI 控件中的 TextBox 绑定到 Name 属性的方式：

```
<TextBox Name="configNameTextBox" Text="{Binding Path=Name, Mode=TwoWay, BindsDirectlyToSource=True}" MinWidth="380" /> 
```

我对 WPF 并不完全陌生，但我只使用了 2 或 3 次，所以我认为这里一定有某种新手错误，有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:47:14.623

作为第一句话，`TextBox`通过添加来更改您的绑定`UpdateSourceTrigger=PropertyChanged`。还有关于`BindsDirectlyToSource`，我很少用。删除它并再次检查

此外，将您的实现更改为

```
private string _name;
public string Name 
{ 
    get { return _name; } 
    set 
    {
        _name = value;
        if (_name != value && PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs("Name"));

    } 
} 
```

# javascript - 我需要从 find() 中排除孩子

> ID：14507357
> 
> 赞同：2
> 
> 时间：2013-01-24T17:38:45.330
> 
> 标签：javascript, jquery, html, css

HTML：

```
<ul>
    <li class="listExpandTrigger"><h3>2010 - present</h3></li>
    <li class="listCollapseTrigger"><h3>2010 - present</h3></li>
    <li>
    <ul class="volumeList">
        <li class="listExpandTrigger"><h3>Volume 13</h3></li>
        <li class="listCollapseTrigger"><h3>Volume 13</h3></li>
        <li>
        <ul class="issueList">
            <li>1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
        </ul>
    </ul>
    </li>
</ul> 
```

CSS：

```
.listCollapseTrigger, .volumeList, .issueList{
    display: none;
} 
```

JS：

```
$( 'body' ).on( 'click', '.listExpandTrigger', function(){
    $( this ).parent().find( 'ul' ).css( 'display', 'block' );
    $( this ).parent().find('.listExpandTrigger').css('display', 'none');
    $( this ).parent().find('.listCollapseTrigger').css('display', 'block');
}); 
```

我意识到使用 Javascripts 需要完成更多步骤，但我一开始就遇到了问题。我需要排除子类和 ul 的，或者只影响它被告知 find() 的第一个实例。现在该函数会影响触发器父级内部的所有内容，这是有道理的。我只是不确定如何解决它。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T17:42:38.483

使用[`first`](http://api.jquery.com/first/)：

```
$( this ).parent().find( 'ul' ).first().css( 'display', 'block' ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T17:45:13.677

为什么不将 .next() 方法与 ul 选择器一起使用？

```
$(this).next("ul").css( 'display', 'block' ); 
```

# c# - 在 C# 中，当枚举容器被修改时，foreach 的行为如何

> ID：14507358
> 
> 赞同：3
> 
> 时间：2013-01-24T17:38:48.777
> 
> 标签：c#, .net-2.0

这似乎应该得到回答，但我发现的潜在骗子在问不同的事情......

我注意到这似乎工作正常（`sourceDirInclusion`很简单`Dictionary<X,Y>`）

```
 foreach (string dir in sourceDirInclusion.Keys)
    {
        if (sourceDirInclusion[dir] == null)
            sourceDirInclusion.Remove(dir);
    } 
```

这是否意味着从集合中删除项目`foreach`是安全的，或者我很幸运？

如果我向字典中添加更多元素而不是删除元素呢？

**我要解决的问题**是`sourceDirInclusion`最初已填充，但随后每个值都可以在第二遍中将新项目贡献给字典。例如，我想做的是：

```
foreach (string dir in sourceDirInclusion.Keys)
{
  X x = sourceDirInclusion[dir];
  sourceDirInclusion.Add(X.dir,X.val);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T17:40:58.687

简短的回答：这不安全。

长答案：来自[`IEnumerator<T>`文档](http://msdn.microsoft.com/en-us/library/78dfe2yb.aspx)：

> 只要集合保持不变，枚举数就保持有效。如果对集合进行了更改，例如添加、修改或删除元素，则枚举器将不可恢复地失效，并且其行为未定义。

请注意，文档说该行为未定义，这意味着它可能有效，也可能无效。永远不应该依赖未定义的行为。

在这种情况下，它取决于可枚举对象的行为，即`Keys`在您开始枚举时它是否创建键列表的副本。在这种特定情况下，我们从[文档](http://msdn.microsoft.com/en-us/library/yt2fy5zk.aspx)中知道返回值`Dictionary<,>.Keys`是一个引用字典的集合：

> 返回`Dictionary<TKey, TValue>.KeyCollection`的不是静态副本；相反， the`Dictionary<TKey, TValue>.KeyCollection`引用了原始`Dictionary<TKey, TValue>`. 因此，变化`Dictionary<TKey, TValue>`继续体现在`Dictionary<TKey, TValue>.KeyCollection`.

所以在枚举字典的键时修改字典应该被认为是不安全的。

您可以通过一次更改来纠正此问题。改变这一行：

```
foreach (string dir in sourceDirInclusion.Keys) 
```

对此：

```
foreach (string dir in sourceDirInclusion.Keys.ToList()) 
```

扩展方法将`ToList()`创建键列表的显式副本，从而可以安全地修改字典；“基础集合”将是副本而不是原件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T17:40:37.097

如果会抛出

> InvalidOperationException: Message="集合已修改；枚举操作可能无法执行

为了避免这种情况，将要删除的候选人添加到外部列表中。然后循环它并从目标容器（字典）中删除。

```
List<string> list = new List<string>(sourceDirInclusion.Keys.Count);
foreach (string dir in sourceDirInclusion.Keys)
{
    if (sourceDirInclusion[dir] == null)
        list.Add(dir);
}
foreach (string dir in list)
{
    sourceDirInclusion.Remove(dir);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T17:44:38.940

这是有效的，因为您正在遍历 sourceDirInclusion.Keys。

但是，为了确保 FrameWork 的未来版本，我建议您在 foreach 语句中使用 sourceDirInclusion.Keys.ToArray() ，这样您将创建循环遍历的键的副本。

然而，这将不起作用：

```
foreach(KeyValuePair<string, object> item in sourceDirInclusion)
{
    if (item.Value == null)
        sourceDirInclusion.Remove(item.Key);
} 
```

通常，您不能在遍历集合时对其进行修改，但通常您可以使用 .ToArray() 或 .ToList() 创建一个新集合，并在修改原始集合时对其进行遍历。

祝你的任务好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T17:40:44.577

检查一下：[在“foreach”循环中修改列表的最佳方法是什么？](https://stackoverflow.com/questions/759966/c-sharp-what-is-the-best-way-to-modify-a-list-in-a-foreach-loop)

简而言之：

```
The collection used in foreach is immutable. This is very much by design. 
```

正如 MSDN 上所说：

foreach 语句用于遍历集合以获取您想要的信息，但不能用于从源集合中添加或删除项目以避免不可预知的副作用。如果您需要从源集合中添加或删除项目，请使用 for 循环。

**更新：** 您可以改用 for 循环：

```
for (int index = 0; index < dictionary.Count; index++) {
  var item = dictionary.ElementAt(index);
  var itemKey = item.Key;
  var itemValue = item.Value;
} 
```

# javascript - 定位特定单元格的父行

> ID：14507360
> 
> 赞同：2
> 
> 时间：2013-01-24T17:38:50.880
> 
> 标签：javascript

我有一张包含记录列表的表格。每行都有“list_request”类，并有一个“record_approval”类的单元格：

```
<table>
<tr>
    <th>name</th><th>date</th><th>id</th><th>group</th><th>approval</th>
<tr class="list_request">
<td>Frank</td><td>2012-2-15</td><td>01</td><td>Account</td><td class="record_approval">Dave Ellis</td>
</tr>
<tr class="list_request">
<td>Ellen</td><td>2012-2-19</td><td>04</td><td>Admin</td><td class="record_approval">Susan Peters</td>
</tr>
<tr class="list_request">
<td>Michael</td><td>2012-2-26</td><td>06</td><td>Admin</td><td class="record_approval"></td>
</tr> 
```

我想构建一个javascript函数来检查“record_approval”是否有一个值（哪个值不重要），如果是，则更改该行的css颜色值。从本质上讲，已批准的记录应该与未批准的记录具有不同的颜色。就像是...

```
function check_approval(){
    var checkrow = document.querySelectorAll( "tr.request_list" )
    var checkcell =  document.querySelectorAll( "td.record_approval" )

    for (i=0;i<checkcell.length;i++){  
    if (!checkcell.value){
        this.parentNode.style.color = "ff9900";
    }  
    else{

    }
} 
```

这本质上是错误的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:51:04.303

我发现的错误：

*   未`for`闭环（缺少闭环`}`）
*   您正在寻找 class `request_list`，但在您的 html 上`list_request`
*   您应该 在循环中使用`checkcell[i]`而不是`checkcell`
*   您的颜色十六进制值应以`#`.
*   无需从事件侦听器获取所有行和单元格
*   目前尚不清楚您希望该功能何时运行。它应该响应事件吗？

另外，我会在行上设置一个新的 css 类，而不是直接设置颜色。

* * *

显然，你正在寻找这个：

```
var checkcell =  document.querySelectorAll( "td.record_approval" );
for (i=0;i<checkcell.length;i++){  
    if (checkcell[i].innerHTML){
        checkcell[i].parentNode.style.color = "#ff9900";
    }
} 
```

[http://jsbin.com/anadij/1/edit](http://jsbin.com/anadij/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:50:02.397

1.  checkcell 是一个元素数组。你会想要遍历它们，访问'checkcell [i]'而不是checkcell.value。
2.  您的十六进制颜色应在 ff9900 之前使用“#”定义
3.  你的 for 循环没有正确关闭

基本上更新它

```
if (!checkcell[i].value){
    checkcell[i].parentNode.style.color = "#ff9900";
} else{

} 
```

# c++ - openCV 2.3.1 findContours 函数的链接错误

> ID：14507362
> 
> 赞同：1
> 
> 时间：2013-01-24T17:38:55.010
> 
> 标签：c++, opencv

当我尝试使用 运行查找方块代码时`Visual Studio 2008`，会出现以下错误。

```
1>ANPR.obj : error LNK2001: unresolved external symbol "public: virtual class cv::GlBuffer __thiscall cv::_InputArray::getGlBuffer(void)const " (?getGlBuffer@_InputArray@cv@@UBE?AVGlBuffer@2@XZ)
1>ANPR.obj : error LNK2001: unresolved external symbol "public: virtual class cv::GlTexture __thiscall cv::_InputArray::getGlTexture(void)const " (?getGlTexture@_InputArray@cv@@UBE?AVGlTexture@2@XZ)
1>ANPR.obj : error LNK2001: unresolved external symbol "public: virtual class  cv::gpu::GpuMat __thiscall cv::_InputArray::getGpuMat(void)const " (?getGpuMat@_InputArray@cv@@UBE?AVGpuMat@gpu@2@XZ) 
```

代码 ：

```
#include <cv.h>
#include <highgui.h>

using namespace cv;

double angle( cv::Point pt1, cv::Point pt2, cv::Point pt0 ) 
{
    double dx1 = pt1.x - pt0.x;
    double dy1 = pt1.y - pt0.y;
    double dx2 = pt2.x - pt0.x;
    double dy2 = pt2.y - pt0.y;
    return (dx1*dx2 + dy1*dy2)/sqrt((dx1*dx1 + dy1*dy1)*(dx2*dx2 + dy2*dy2) + 1e-10);
}

void find_squares(Mat& image, vector<vector<Point> >& squares)
{
    // blur will enhance edge detection
    Mat blurred(image);
    medianBlur(image, blurred, 9);

    Mat gray0(blurred.size(), CV_8U), gray;
    vector<vector<Point> > contours;

    // find squares in every color plane of the image
    for (int c = 0; c < 3; c++)
    {
        int ch[] = {c, 0};
        mixChannels(&blurred, 1, &gray0, 1, ch, 1);

        // try several threshold levels
        const int threshold_level = 2;
        for (int l = 0; l < threshold_level; l++)
        {
            // Use Canny instead of zero threshold level!
            // Canny helps to catch squares with gradient shading
            if (l == 0)
            {
                Canny(gray0, gray, 10, 20, 3); // 

                // Dilate helps to remove potential holes between edge segments
                dilate(gray, gray, Mat(), Point(-1,-1));
            }
            else
            {
                    gray = gray0 >= (l+1) * 255 / threshold_level;
            }

            // Find contours and store them in a list
            findContours(gray, contours, CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE);

            // Test contours
            vector<Point> approx;
            for (size_t i = 0; i < contours.size(); i++)
            {
                // approximate contour with accuracy proportional
                // to the contour perimeter
                approxPolyDP(Mat(contours[i]), approx, arcLength(Mat(contours[i]), true)*0.02, true);

                // Note: absolute value of an area is used because
                // area may be positive or negative - in accordance with the
                // contour orientation
                if (approx.size() == 4 &&
                        fabs(contourArea(Mat(approx))) > 1000 &&
                        isContourConvex(Mat(approx)))
                {
                        double maxCosine = 0;

                        for (int j = 2; j < 5; j++)
                        {
                                double cosine = fabs(angle(approx[j%4], approx[j-2], approx[j-1]));
                                maxCosine = MAX(maxCosine, cosine);
                        }

                        if (maxCosine < 0.3)
                                squares.push_back(approx);
                }
           }
       }
     }
   }
int main()
{    
    Mat img = imread("peppers.jpg");
    cvtColor(img, img, CV_RGB2GRAY);
    vector<vector<Point> > squares;
    find_squares(img, squares);

    std::cout << "squares size: " << squares.size() << std::endl;
    getchar();

    return 0;
 } 
```

有人可以帮我解决这个问题吗？我尝试了 openCV 2.4.2。它给出了相同的链接错误。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:09:24.113

这些错误与链接过程有关，您提到的符号属于*opencv_core*库。

确保您已将此库添加为项目的依赖项。转到**配置属性**>**链接器**>**输入**并添加：`opencv_core242.lib`

有关如何配置 Visual Studio 和 OpenCV 的更多说明，[请查看此线程](https://stackoverflow.com/questions/7011238/opencv-2-3-c-visual-studio-2010/7014918#7014918)。

# regex - 正则表达式 Perl 中的多个前瞻

> ID：14507367
> 
> 赞同：0
> 
> 时间：2013-01-24T17:39:01.633
> 
> 标签：regex, perl

我必须在字符串中检查模式（模式 C）的正匹配和模式 A 和模式 B 的负匹配。如何在单个正则表达式中做到这一点？

如果存在模式 C，则字符串中不应存在模式 A 和模式 B。

请帮助我提供代码片段。以下代码不适用于 5.8.5 和 5.10.1

```
open(FH, "file");
while(<FH>){
    print if(/(?!PATTERN A)(?!PATTERN B)(?=PATTERN C)/);
}
close FH; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:54:43.150

这完全取决于您如何编写模式。

模式应始终以`.*?`or开头`.*`

所以，你可以写

```
(?!.*?PATTERN A)(?!.*?PATTERN B)(?=.*?PATTERN C) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:56:34.873

除非环境需要，否则不需要花哨的正则表达式。所有你需要的是

```
print if /PATTERN A/ and not (/PATTERN B/ or /PATTERN C/); 
```

# mysql - 在mysql中索引非常长的文件路径的最佳方法

> ID：14507369
> 
> 赞同：0
> 
> 时间：2013-01-24T17:39:06.687
> 
> 标签：mysql, linux, unix, database-design

给定以下文件路径，存储在 mysql 数据库中：

```
.//.git/refs/remotes/origin/HEAD
.//.git/refs/tags
.//__init__.py
.//__init__.pyc
.//forms.py
.//forms.pyc
.//models.py
.//models.pyc
.//settings.py
.//settings.pyc
.//static
.//static/css
.//static/css/all.css
.//static/images
.//static/images/bg.png
.//static/images/favicon.ico
.//static/images/pds-header-logo.png
.//static/images/pds-logo.png
.//static/images/revolver.png
.//static/js
.//static/js/all.js
.//templates
.//templates/base.html
.//templates/default.html
.//templates/overview.html
.//urls.py
.//urls.pyc
.//views.py
.//views.pyc
.//wsgi.py
.//wsgi.pyc 
```

需要有人能够搜索路径。例如，如果用户搜索“static”，它将返回路径中带有“static”的结果：

```
.//static
.//static/css
.//static/css/all.css
.//static/images
.//static/images/bg.png
.//static/images/favicon.ico
.//static/images/pds-header-logo.png
.//static/images/pds-logo.png
.//static/images/revolver.png
.//static/js
.//static/js/all.js 
```

我目前的搜索类似于：

```
`SELECT path FROM files WHERE path LIKE '%search%';` 
```

有没有办法索引这个列/改进这个搜索（删除 LIKE %%），因为我在这个系统上可能有 1M+ 文件路径。请注意，文件路径可能超过 200 个字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:10:12.637

你不能。通配符搜索不会使用索引。
如果您索引文件路径，则只能最好地支持查询，例如

```
/static/images/% 
```

鉴于您的情况，如果您想允许通配符搜索，
最好的办法是将目录分解为多个关键字：

```
static
images
revolver
.png 
```

然后将每个关键字存储到关键字表中，
并建立关系。

当您执行通配符搜索时，实际上是搜索关键字表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:10:45.757

我猜你实际上可以有一个“部分名称的索引”。像这样的东西：

```
id ! name    ! parent
---------------------
1  ! static  ! 0           // at root. 
2  ! css     ! 1           // Parent is "static"
3  ! all.css ! 2           // parent is css
4  ! images  ! 1           // parent is static
5  ! bg.png  ! 4           // images. 
```

读取原始文件名需要一些工作，除非您也存储它。

# android - 什么是默认布局背景

> ID：14507370
> 
> 赞同：80
> 
> 时间：2013-01-24T17:39:08.527
> 
> 标签：android, html, android-layout, background-color

我有一个加载带有文本的 HTML 文件的 WebView。问题是html内部和外部的颜色不一样。这是一个屏幕截图：

![带有 WebView 的 Activity](../Images/09392a98c795bf3a9eeec206df72249b.png)

HTML 文件是：

```
<html dir="rtl">
<head>
    <title>About</title>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type"/>

    <body bgcolor="#FFFFFF">
        <p>This is a Testpp</p>
        <p>See the problem.</p>
         <p>last test:</p>
    </body>
</html> 
```

（如果我删除：`bgcolor="#FFFFFF"`颜色保持不变）谢谢！

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2015-02-18T18:11:35.940

浅色主题的默认背景颜色为：#EEEEEE

几乎是白色的，但并不完全。

它对我有用，希望它对你有用。

更新：在新版本中，您可能正在寻找#FAFAFA

* * *

## 回答 #2

> 赞同：115
> 
> 时间：2017-02-08T14:39:35.083

您可以通过引用使用主题的默认背景颜色：

```
?android:colorBackground 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2013-01-24T18:31:49.160

**要更改您的背景（如果这实际上是您想要做的）：**

在样式.xml

```
<style name = "MyDefaultStyle" parent = "@android:style/Theme">
    <item name = "android:windowBackground">@drawable/default_drawable_bg</item>
</style> 
```

在你的清单中

```
<application
    android:name="MyApp"
    android:theme="@style/MyDefaultStyle" > 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-11-24T21:18:11.360

前往清单

```
<application
    android:allowBackup="true"
    android:icon="@mipmap/ic_launcher"
    android:label="@string/app_name"
    android:supportsRtl="true"
    android:theme="@style/MyMaterialTheme.NoActionBar"> 
```

你看到的主题是 MyMaterialTheme.NoActionBar

所以去 res -> values -> 样式 [![点击在编辑器中打开](../Images/c490b9eefb9c6763f51707fec9582a01.png)](https://i.stack.imgur.com/1PEQa.jpg)

[![单击调色板以获取背景颜色](../Images/bcd392ec95338d62276ff53dba557fb5.png)](https://i.stack.imgur.com/Ge8RD.jpg)

[![这是你的背景颜色](../Images/52e70dcb782b5371d23a0ede1254681b.png)](https://i.stack.imgur.com/GvnXZ.jpg)

所以对我来说默认是#FFFAFAFA

当我输入建议的颜色#EEEEEE 或#FAFAFA 时，它在某些手机上工作，而在其他手机上它关闭了，所以这就是我通过反复试验发现的

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-24T17:44:42.390

默认颜色为黑色。

如果您使用样式，请转到“values/styles.xml”，您的问题有解决方案。现在您可以检查背景颜色。关于主题和样式：http: [//developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

**编辑 ：**

布局背景颜色更改 -[设置 Android 布局元素的背景颜色](https://stackoverflow.com/questions/7378636/setting-background-colour-of-android-layout-element)

**编辑2：**

如果在styles.xml 中是@android:style/Theme.Light 你的背景颜色是白色的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-07T06:57:22.893

浅色主题的默认背景颜色为：#e6FFFFFF

# php - 将 javascript 函数与 php 变量进行比较

> ID：14507374
> 
> 赞同：-3
> 
> 时间：2013-01-24T17:39:15.687
> 
> 标签：php, javascript, compare

我找到了一个 javascript 函数，当它在地图上单击时获取一个国家/地区的名称，以及一个从文件中随机获取一个国家/地区名称的 php 片段。我想要做的是比较这两者之间的结果，以便我可以根据上面出现的问题来判断用户是否在地图上点击了正确的国家。我不知道该怎么做，因为它们不是完全简单的变量，我试图将 php 变量分配给一个没有运气的 javascript 变量。任何指导将不胜感激。

```
 ....  
        function getCountry(latLng) {
                geocoder.geocode( {'latLng': latLng},
                  function(results, status) {
                    if(status == google.maps.GeocoderStatus.OK) {
                      if(results[0]) {
                        for(var i = 0; i < results[0].address_components.length; i++) {
                          if(results[0].address_components[i].types[0] == "country") {
                            alert(results[0].address_components[i].long_name);
                          }
                        }
                      }
                      else {
                        alert("No results");
                      }
                    }
                    else {
                      alert("Status: " + status);
                    }
                  }
                );
              }

 ....

    Can you locate <?php
        $countries=file("countries.txt");
        $number_countries=count($countries);
        if($number_countries!==0){$number_countries.=-1;};
        $random=rand(0,$number_countries);
        $countryy=$countries[$random];
        echo "$countryy";
        ?>   on the map? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:50:55.117

这是一个不好的做法，你应该使用 ajax，但这就是你想要的。

```
Can you locate <?php
    $countries=file("countries.txt");
    $number_countries=count($countries);
    if($number_countries!==0){$number_countries.=-1;};
    $random=rand(0,$number_countries);
    $countryy=$countries[$random];
    echo "$countryy";
    ?>   on the map?
    <script type="text/javascript">
       var country = <?php echo json_encode($countryy); ?>

      function getCountry(latLng) {
              geocoder.geocode( {'latLng': latLng},
                function(results, status) {
                  if(status == google.maps.GeocoderStatus.OK) {
                    if(results[0]) {
                      for(var i = 0; i < results[0].address_components.length; i++) {
                        if(results[0].address_components[i].types[0] == "country") {
                           if(results[0].address_components[i].long_name == country) {
                              alert("right");
                           } else {
                              alert("wrong");
                           }
                        }
                      }
                    }
                    else {
                      alert("No results");
                    }
                  }
                  else {
                    alert("Status: " + status);
                  }
                }
              );
      }
  </script> 
```

# c# - 创建和签署自定义文件类型

> ID：14507377
> 
> 赞同：0
> 
> 时间：2013-01-24T17:39:19.470
> 
> 标签：c#, code-signing, file-type

我相信这将是一个大问题，但我在网上搜索了至少一个小时以寻找答案，我希望在这里我能得到答案。
所以问题是我想创建自己的文件扩展名，它本质上是一个二进制文件，我的程序显然会知道如何解释。
我知道如何创建一个二进制文件并从中读取，我知道我所需要的只是更改扩展名并在开始读取文件之前检查它。

问题是即使我创建自己的扩展并在开始阅读之前检查它，我也不知道该文件真的是由我的应用程序创建的，有人可能只是更改扩展名，而我的应用程序不会获得它需要的数据（当然，我会将所有内容都尝试并捕获，这样应用程序就不会崩溃）。

有没有办法在打开二进制文件之前对其进行签名，以便获取文件的人可以知道我的应用程序创建了该文件，而不是有人更改为看起来像我的文件类型的东西？

这更像是我的一个想法，所以我没有任何代码可以展示，也没有任何示例，除了这个场景。
我所需要的只是人们会知道来自我的东西，而不是每个其他人都可以自己生成的东西（不是在谈论程序员，我是在谈论普通人）。

如果您对此主题有所了解，请指导我找到答案，或者如果您知道将其发布在这里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:46:04.107

一种方法是加密文件的内容，然后让您的应用程序对其进行解密。

在您的应用程序中打开该文件的任何人都会立即知道该应用程序是否生成了该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:46:56.677

我会在文件的开头创建一个特殊的序列（文件头）

# ruby-on-rails - 处理时区

> ID：14507378
> 
> 赞同：0
> 
> 时间：2013-01-24T17:39:22.570
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

在 win-32 应用程序中，我们只是使用 PC 上的区域设置来向应用程序指示时区和语言。一般而言，这是如何在 Rails 或 Web 应用程序中完成的？因此，例如，如果医生在法国看到他的患者图表的时间，他应该在当地时间看到吗？正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:07:05.177

有很多方法，但这里有几个例子；

*   一位当地医生将他的日程安排在线，他不需要与系统中的其他任何人交互，他只想进入并查看自己的日程安排。
    在这种情况下，仅以本地时间存储时间很可能是最简单的，因为不需要转换。为什么不必要地使事情复杂化？

*   一个视频会议预订系统，可以预订跨越多个时区的会议。
    在这种情况下，以 UTC 格式存储时间并在 Web 应用程序中转换为 UTC（即输入时间时从本地时间到 UTC，在显示时间表时从 UTC 到本地时间）可能是要走的路。UTC 是唯一的（即时间只发生一次，因为没有 DST）并且很容易转换为本地时间。

如果您可以保持上述两个中的任何一个，存储 UTC 或本地时间，那么事情就相当简单了。从经验来看，如果你需要混合它们，事情会变得*非常*复杂。

# javascript - 访问由 CSS 类设置的 HTML 属性

> ID：14507384
> 
> 赞同：0
> 
> 时间：2013-01-24T17:39:39.103
> 
> 标签：javascript, html, css

> **可能重复：**
> [通过外部 CSS 文件应用时如何访问 javascript 中的 css 属性？](https://stackoverflow.com/questions/4057270/how-to-access-css-properties-in-javascript-when-applied-via-external-css-file)
> [我如何获得计算样式？](https://stackoverflow.com/questions/5910004/how-do-i-get-a-computed-style)

我正在尝试设置一些简单的东西来显示/隐藏`<div>`当点击其他东西时。我`display`在应用于动态的 CSS 类中设置属性`<div>`。`div.style.display`我第一次检查时发现该属性没有设置为初始类值。我猜事情工作正常，因为我没有专门将样式应用于 HTML 中的标签，所以在我的 JS 执行时没有设置它。在这种情况下，在标签上显式设置是否是常见的做法，`display`以便我有一个要查询的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:43:31.747

通常的做法是`display:none`在 CSS 文件中设置元素，这样在页面上加载 JavaScript 时看不到元素。但如果你愿意，你可以应用`style="display:none;"`内联。

# kineticjs - Kinetic JS - 如何销毁精灵

> ID：14507385
> 
> 赞同：1
> 
> 时间：2013-01-24T17:39:44.070
> 
> 标签：kineticjs

在 Kinetic JS 中，我想销毁一个精灵并将其从图层中删除

文档说 kinetic.node 有以下方法：

> destroy()
> 删除并销毁节点

该文档还说明了 kinetic.sprite：

> 从类 Kinetic.Node 中借用的方法：
> ...、destroy、...

我认为“借来的”意味着“继承自”，并认为我因此能够做到：

```
mysprite.destroy() 
```

但这给了我一条消息，告诉我 kinetic.sprite 没有这样的方法。

我担心可能是我的 kineticJS 版本过时了，因为我的版本很旧（v3.10.0），但是当我尝试使用最新版本的 kineticJS 时，它会导致我的应用程序的另一部分出错，当我尝试调用我的 kinetic.stage 对象的 onFrame() 方法时，告诉我 Kinetic.Stage 上不存在此方法。

如果有人知道为什么我不能在我的 kinetic.sprite 对象上调用 destroy ，或者为什么当我升级到 kineticJS 的最新版本时我在调用 kinetic.stage.onframe 时遇到错误，那么我将非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:58:49.943

试试这个 - 它可能适用于您的版本

```
 LayerName.remove(mysprite); 
```

# node.js - 在单页应用程序中授权客户端路由

> ID：14507399
> 
> 赞同：4
> 
> 时间：2013-01-24T17:40:51.903
> 
> 标签：node.js, authorization, single-page-application, sammy.js

我正在编写一个使用[SammyJS](http://sammyjs.org/%22SammyJS%22)进行客户端路由的 SPA。用户是否经过身份验证，我想过滤对他们可以访问的客户端路由的访问。

例如，假设我有两个客户端路由“#/public”和“#/private”。用户必须登录才能访问“#/private”。登录部分工作正常，用户输入用户名和密码，调用 RESTful API（位于 NodeJS 上）并返回一个身份验证令牌。然后将它们重定向到“#/private”。但明显的问题是任何人都可以调用“#/private”。

我正在考虑在“#/private”路由上调用 SammyJS before() 并检查用户是否经过身份验证。有没有其他人尝试过这种方法？

# c# - 将泛型对象转换为具有泛型类型接口的对象

> ID：14507405
> 
> 赞同：2
> 
> 时间：2013-01-24T17:41:08.410
> 
> 标签：c#, generics, interface, type-conversion, derived

我有以下代码：

```
public class EntityFilter<T>
{}

public interface IEntity
{}

public class TestEntity : IEntity
{}

class Program
{
    static void Main(string[] args)
    {   
        var ef = new EntityFilter<TestEntity>();

        DoSomething((EntityFilter<IEntity>)ef); // <- casting fails
    }

    public static void DoSomething(EntityFilter<IEntity> someEntityFilter)
    {
    }
} 
```

Visual Studio 说：

```
Cannot convert type 'ConsoleApplication1.EntityFilter<ConsoleApplication1.TestEntity>' to 'ConsoleApplication1.EntityFilter<ConsoleApplication1.IEntity>' 
```

我无法将 DoSomething 方法转换为通用方法并接受`EntityFilter<T>`，因为在我的应用程序中，在 DoSomething 调用时 T 的类型是未知的。稍后将在 DoSomething 内部使用反射确定类型。

**如何在不使 DoSomething 方法通用的情况下将 ef 变量传递给 DoSomething 方法？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:29:58.253

如果`EntityFilter<T>`可以从接口派生并且该接口具有协变泛型参数，则您可以在方法中没有泛型的情况下执行您所要求的操作。

注意定义中的“out”关键字`IEntityFilter<out T>`。

```
public class Program
{
    static void Main(string[] args)
    {
        var ef = new EntityFilter<TestEntity>();

        DoSomething(ef);
    }

    public static void DoSomething(IEntityFilter<IEntity> someEntityFilter)
    {
    }
}

public interface IEntityFilter<out T>
{ }

public class EntityFilter<T> : IEntityFilter<T>
{ }

public interface IEntity
{ }

public class TestEntity : IEntity
{ } 
```

# iphone - 如何从 plist 中获取乌尔都语单词？

> ID：14507408
> 
> 赞同：0
> 
> 时间：2013-01-24T17:41:19.603
> 
> 标签：iphone, ios, xcode, escaping, uisearchbardisplaycontrol

我有一个包含乌尔都语单词和英语单词的 plist。如下图所示

![在此处输入图像描述](../Images/1a374b86e0219dd4fc219686af824347.png)

现在我的代码是获取数据如下

```
- (void)viewWillAppear:(BOOL)animated {
[super viewWillAppear:animated];
[words removeAllObjects];
[means removeAllObjects];
NSString *path = [[NSBundle mainBundle] pathForResource:
                  @"urdutoeng" ofType:@"plist"];
NSMutableArray *array2 = [[NSMutableArray alloc] initWithContentsOfFile:path];
 for (int i=0; i<[array2 count]; i++) {
    NSDictionary* dict =  [array2 objectAtIndex:i];
        [words addObject:[dict valueForKey:@"Urdu"]];
    [means addObject:[dict valueForKey:@"English"]];
    [Types addObject:[dict valueForKey:@"Nature"]];
    }
  } 
```

这部分代码对我来说很好，就像我下面的屏幕截图一样![在此处输入图像描述](../Images/0c03b2f2e84a70029fe1cbbb63dfc567.png)![在此处输入图像描述](../Images/d0a05b603577266da5736bda9deef110.png)

现在的问题是，当我通过搜索栏搜索任何单词时，它返回空结果，因为我的搜索数组包含不同格式的单词，我的搜索数组代码是

```
listOfItems = [[NSMutableArray alloc] init];
NSDictionary *countriesToLiveInDict = [NSDictionary dictionaryWithObject:words forKey:@"Countries"];
[listOfItems addObject:countriesToLiveInDict];
copyListOfItems = [[NSMutableArray alloc] init]; 
```

我的搜索栏代码是

```
#pragma mark Content Filtering
- (void)filterContentForSearchText:(NSString*)searchText
 {
[copyListOfItems removeAllObjects];
 NSLog(@"listOfItemsdata :%@",listOfItems);
for (NSString *cellLabel in [[listOfItems objectAtIndex:0] objectForKey:@"Countries"])
{
    NSComparisonResult result = [cellLabel compare:searchText options: (NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch) range:NSMakeRange(0, [searchText length])];
    if (result == NSOrderedSame)
    {
        [copyListOfItems addObject:cellLabel];
    }
}
  }

#pragma mark UISearchDisplayController Delegate Methods
 - (BOOL)searchDisplayController:(UISearchDisplayController *)controller  shouldReloadTableForSearchString:(NSString *)searchString
{
NSLog(@"searchstring :%@",searchString);
[self filterContentForSearchText:searchString];
return YES;
} 
```

当我对 listOfItems 数组进行 Nslog 记录时，它会显示一些类似的文本

NSLog(@"listOfItemsdata :%@",listOfItems);

listOfItemsdata：（{国家=（“\U0627\U0628”，“\U0627\U0628\U0628\U06be\U06cc”，“\U0627\U0628\U062a\U0628”，“\U0627\U0628\U062a\U06a9”，“ \U0627\U0628 \U062c\U0628 \U06a9\U06c1", " \U0627\U0628 \U0633\U06d2"，它表明我的数据以其他格式出现，这就是为什么搜索栏无法搜索它。任何帮助或建议将是得到了。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:45:47.773

plist 中的所有乌尔都语条目都有一个空格作为第一个字符。这就是搜索总是产生一个空列表的原因。

作为一种解决方法，可以在比较之前从条目中删除前导空格和尾随空格：

```
for (NSString *cellLabel in [[listOfItems objectAtIndex:0] objectForKey:@"Countries"])
{
    NSString *trimmed = [cellLabel stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
    NSComparisonResult result = [trimmed compare:searchText options: (NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch) range:NSMakeRange(0, [searchText length])];
    if (result == NSOrderedSame)
    {
        [copyListOfItems addObject:cellLabel];
    }
} 
```

# php - 如何创建单击提交按钮后打开网页的在线表单

> ID：14507412
> 
> 赞同：0
> 
> 时间：2013-01-24T17:41:33.740
> 
> 标签：php, javascript, html, iframe, online-forms

我想制作一个表单，我可以在其中输入域名，然后单击提交按钮，并将域名合并到来自谷歌、必应、雅虎等地方的搜索结果 URL 的一部分中。单击提交按钮后，我会喜欢使用 iframe 在页面底部显示的结果。

**编辑：我希望使用 iframe 将结果显示在页面底部，而不是打开新选项卡。这可能吗？这是到目前为止的更新代码：**

```
<!DOCTYPE html>
<html>
<head>
<title>Domain Checker</title>
<meta name="description" content="Get useful information about a domain name." />
</head>
<body>

<h1>Domain Checker</h1>
<p>Use the domain checker to get useful information about a domain name. Type the domain name you want to check and hit enter.</p>

<script type='text/javascript'>
function openWindow(url)
{
  var domain2 = document.getElementById('domain2').value;
  window.open(url + domain2);
}
</script>

<form method='post'>
<label>Domain</label><input type='text' name='domain2' id='domain2'>
 <select name="select" onChange="openWindow(this.options[this.selectedIndex].value)">
  <option>Choose Below</option>
  <option value="http://www.dmoz.org/search?q=">DMOZ</option>
  <option value="https://flippa.com/valuation/">Flippa</option>
  <option value="http://web.archive.org/web/*/">WayBack</option>
  <option value="http://www.alexa.com/siteinfo/">Alexa</option>
  <option value="https://www.google.com/search?&q=site:">Google Index</option>
  <option value="https://www.google.com/search?&q=link:">Google Backlinks</option>
  <option value="http://search.yahoo.com/search?p=site:">Yahoo Index</option>
  <option value="http://search.yahoo.com/search?p=link:">Yahoo Backlinks</option>
  <option value="http://www.bing.com/search?q=site:">Bing Index</option>
  <option value="http://www.bing.com/search?q=site:">Bing Backlinks</option>
  <option value="http://whois.domaintools.com/">Whois Info</option>
 </select>
 </form>
<hr>
<p>Results show here in iframe.</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:07:39.640

```
<script type='text/javascript'>
function openWindows(domain)
{
    if (domain) {
        window.open('http://www.dmoz.org/search?q=' + domain);
        window.open('https://flippa.com/valuation/' + domain);
        window.open('http://web.archive.org/web/*/' + domain);
        window.open('http://www.alexa.com/search?q=' + domain);
        window.open('https://www.google.com/search?&q=site:' + domain);
    }
}
</script>
<form action='your_form_processor.html' method='post' onsubmit="openWindows(document.getElementById('domain').value)">
<label>Domain</label><input type='text' name='domain' id='domain'>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:32:16.440

对于评论中的另一个问题。

```
<script type='text/javascript'>
function openWindow(url)
{
  var domain = document.getElementById('domain').value;
  //window.open(url + domain);
  document.getElementById('frame').src=url+domain;
}
</script>

<form method='post'>
<label>Domain</label><input type='text' name='domain' id='domain'>
 <select name="select" onChange="openWindow(this.options[this.selectedIndex].value)">
  <option value="http://www.dmoz.org/search?q=">DMOZ</option>
  <option value="https://flippa.com/valuation/">Flippa</option>
  <option value="http://web.archive.org/web/*/">WayBack</option>
  <option value="http://www.alexa.com/search?q=">Alexa</option>
  <option value="https://www.google.com/search?&q=site:">Google</option>
 </select>
 </form>

 <iframe id="frame">Your browser does not support iframes.</iframe> 
```

# iphone - 调试 AFNetworking 内存使用峰值

> ID：14507415
> 
> 赞同：2
> 
> 时间：2013-01-24T17:41:36.000
> 
> 标签：iphone, ios, objective-c, ipad, afnetworking

我有一个 UICollectionViewCell，其中有一个 UIImageView abd 我正在使用 AFNetworking UIImageView 类别来帮助我加载图像。我已经分析了我的应用程序，似乎内存峰值超过了顶部，它只是在通过分配工具下的 Instruments 对其进行分析后不断增加。

![在此处输入图像描述](../Images/96f48368819b4f7713420a5b7cade27d.png)

我不确定这里发生了什么以及如何解决这个问题。单元格一直在重复使用，但只是这些图像可能没有从缓存中清除或其他什么。这是我如何使用它的一些代码，它非常简单：

```
 NSURLRequest *imageURLRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:imageURLString] cachePolicy:NSURLRequestReturnCacheDataElseLoad timeoutInterval:30];

  [self.imageView_ setImageWithURLRequest:imageURLRequest placeholderImage:nil success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
        weakSelf.imageView_.image = image;
        weakSelf.imageView_.alpha = 0.0;
        [UIView animateWithDuration:0.3 animations:^{
            weakSelf.imageView_.alpha = 1.0;
        }];

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {

    }]; 
```

如果我删除此代码来下载图像，那么内存占用会更小。关于可能导致这种情况的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:30:25.973

尝试将其包装在[autoreleasepool](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmAutoreleasePools.html)中并检查您的内存使用情况

```
@autoreleasepool {
    // Code that creates autoreleased objects.
} 
```

# php - 页面加载时 onbeforeunload

> ID：14507422
> 
> 赞同：0
> 
> 时间：2013-01-24T17:41:57.913
> 
> 标签：php, jquery, html, ajax, onbeforeunload

我只是好奇这样的事情是否可能>>在仍在加载网页的同时，当用户尝试导航到其他页面或关闭浏览器时，是否可以返回类似 onbeforeunload 的对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:57:54.653

好吧，我这样做是为了在有人退出我的网站之前显示一条要显示的消息，这使他们可以选择留下还是离开页面。

我使用了 jquery，所以你必须将 jquery 的链接添加到你的网站，你可以调用一个脚本标签，其中 src 指向下一个 url： [https ://ajax.googleapis.com/ajax/libs/jquery/1.8 .3/jquery.min.js](https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js)

然后在您的网页上添加下一个代码

```
$(document).ready(function() 
{  
   var flag  = true;  
   function Close()
   {  
      if(flag)
      {
         return "Are you sure you want to leave?";}
      }
   }  
   window.onbeforeunload = Close;  
}); 
```

这将在 onbeforeunload 事件中调用 Close 函数，并询问您是要离开还是留下

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T13:47:26.167

问题是我有一组导出 PDF 文件的代码，我在这个上使用了 TCPDF。

```
$('#export').click(function() {
        var conf = confirm("This will generate a PDF file of all the list of products. Continue ?");

        if (conf)
        {
            $('#ajaxloader').css('visibility', 'visible');
            var href = "http://"+url+"/export/items.php";
            window.open(href, '_self');
        }
    }); 
```

当我单击按钮时，它会下载包含产品列表的 pdf 文件，但我的问题是渲染大约需要 30 多秒，我已经设置了时间限制，所以我不会有问题，我想要什么做的是在渲染pdf文件时显示一个加载器，然后隐藏它。

# entity-framework - 基于EF5模型的WCF数据服务；如何添加自定义类型

> ID：14507427
> 
> 赞同：1
> 
> 时间：2013-01-24T17:42:16.233
> 
> 标签：entity-framework, wcf, service

我正在尝试使用返回自定义类型的 ServiceMethod 构建 WCF 数据服务。这种类型被用作一个容器来一次传输多个数据集合。我无法将此类型定义为实体或复杂类型。

```
public class BrfPackageDataContainer {
  public ICollection<BrfFlight> Flights {
    get;
    set;
  }

  public ICollection<BrfFlight_Info> Flight_Infos {
    get;
    set;
  }

  public ICollection<BrfInfo> Infos {
    get;
    set;
  }

  public BrfPackageDataContainer() {
    this.Flights = new List<BrfFlight>();
    this.Flight_Infos = new List<BrfFlight_Info>();
    this.Infos = new List<BrfInfo>();
  }
} 
```

这是我的 ServiceMethod 声明：

```
 [WebGet]
    [SingleResult]
    public FlightInfoEntities.BrfPackageDataContainer GetBrfPackage () {
        var brfPackageDataContainer = new FlightInfoEntities.BrfPackageDataContainer();
        brfPackageDataContainer.Demodata();
        return brfPackageDataContainer;
    } 
```

当使用空的虚拟 DataService 作为服务类定义的数据源时，我得到了这个运行。但是当我使用我的实体框架模型作为数据源时，由于缺少自定义类型的元数据，服务拒绝启动。我的问题是：如何使用 EF 模型作为数据源并且仍然使用我的自定义类型作为我的方法的返回值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:14:50.043

通过解决方法解决了问题：

我在模型中添加了 3 种复杂类型，与每个单独结果集的数据结构相匹配。此外，我在数据上下文之外添加了一个容器类，它使用复杂类型将数据保存在一个对象中。我使用自定义方法扩展了上下文类，以处理存储过程调用并将结果映射到适当的复杂类型。ObjectContext.Translate 有很大帮助... WCF 数据服务类使用虚拟 DataContext 实例化。这可以为我的自定义数据容器类创建元数据，现在可以将其用作自定义 WCF 数据服务方法的返回类型。调用方法时会实例化数据上下文。

数据容器类` public class BrfPackageDataContainer { public Guid TransactionId { get; 放; }

```
 public List<BrfFlight> Flights {
        get;
        set;
    }

    public List<BrfFlight_Info> Flight_Infos {
        get;
        set;
    }

    public List<BrfInfo> Infos {
        get;
        set;
    }

    public BrfPackageDataContainer () {
        this.Flights = new List<BrfFlight>();
        this.Flight_Infos = new List<BrfFlight_Info>();
        this.Infos = new List<BrfInfo>();
    }
}` 
```

上下文扩展：公共部分类 FlightInfoEntities { 公共虚拟 BrfPackageDataContainer GetBrfPackage（int？credId，字符串 operatorCode，字符串离开，int？flightId，DateTime？stdRangeStart，DateTime？stdRangeEnd，字符串 requestingApplication，字符串 requestingComputerName，字符串 requestingACReg，ref Guid transactionId，int？ specificInfoTypeId, byte?levelOfDetail, bool?skipLog) { using (DbCommand command = this.Database.Connection.CreateCommand()) { command.CommandType = CommandType.StoredProcedure; command.CommandText = "[dbo].[GetBrfPackage]";

```
 ...

            var dataContainer = new BrfPackageDataContainer();

            try {
                this.Database.Connection.Open();

                using (DbDataReader reader = command.ExecuteReader()) {
                    dataContainer.Flights = ((IObjectContextAdapter)this).ObjectContext.Translate<BrfFlight>(reader).ToList();
                    reader.NextResult();
                    dataContainer.Flight_Infos = ((IObjectContextAdapter)this).ObjectContext.Translate<BrfFlight_Info>(reader).ToList();
                    reader.NextResult();
                    dataContainer.Infos = ((IObjectContextAdapter)this).ObjectContext.Translate<BrfInfo>(reader).ToList();
                }
                return dataContainer;
            } catch (Exception ex) {
                throw ex;
            }
        } 
```

WCF 数据服务方法：

```
 [WebGet]
    [SingleResult]
    public BrfPackageDataContainer GetBrfPackage () {
        using (var brfCtx = new FlightInfoEntities()) {
            Guid transactionId = new Guid();
            var brfPackageDataContainer = brfCtx.GetBrfPackage(null,"4T",null,null,null,null,"test",Environment.MachineName,null,ref transactionId,null,3,false);
            return brfPackageDataContainer;
        }
    } 
```

# php - 在使用explode()、strpos()、substr()等函数之前是否应该对用户数据进行清理

> ID：14507428
> 
> 赞同：0
> 
> 时间：2013-01-24T17:42:16.827
> 
> 标签：php, security, sanitization, input-sanitization

不要成为一个偏执狂，我想知道是否直接将客户端输入与字符串操作函数（如**explode（）、strpos（）、substr（）……）**一起使用可能是一个安全问题。

两年前，我记得读到其中一些函数使用了一个对特定条目敏感的库，并且它可用于创建新文件等......

我找不到关于**[OWSAP中提到的任何内容](http://www.owasp.org/)**

如果是这样，哪个版本的 PHP 受此影响？

**编辑** 我还没有找到确切的答案，但是这个 stakeoveflow 问题与我的 [问题很接近](https://stackoverflow.com/questions/6470760/dangerous-php-functions)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:53:57.007

我做了几年 PHP 开发，并让关心安全的人审查了我的代码，我还没有听说过任何这样的需求。所以我怀疑在将原始用户输入传递给这些之前，您不需要做任何卫生处理。

当然，在构造任何需要进一步评估的东西（例如 SQL 或 HTML）之前，您当然需要始终清理用户控制的变量（并且为了良好的形式，所有其他变量也是如此）。

在获取值时检查有效性，在使用它们构建事物时在适用的情况下进行清理和转义。不要做中间的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T18:00:49.060

如果有问题的数据要插入到数据库中，那么是的，应该始终对其进行清理。

但是，要尝试解决您关于何时清理数据的问题，尤其是在数据爆炸、内爆等情况下处理数据方面的问题。

这完全取决于您处理的数据，并且在您的问题中没有一个很好的例子，这只是猜测......但是，我通常每次都会先进行消毒。基本上，如果您担心字符串操作函数中可能存在漏洞，请先清理字符串。

安全永远不能过度，或过度补偿。通过增加安全性（我的意思是很小）增加的少量负载，远远超过拥有一个您自己有信心的系统。

基本上是先安全，后顾之忧！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T17:59:27.740

> 两年前，我记得读到其中一些函数使用了一个对特定条目敏感的库，并且它可用于创建新文件等......

你记错了。PHP 的字符串处理函数，例如`substr()`和`explode()`，对格式错误的输入不敏感——它们总是对传入的字符串执行预期的操作。你继续对结果做什么是你自己的事，你可以仍然需要进一步转义/过滤/编码/修改字符串。但是字符串函数很好。

您可能正在考虑其他一些函数或库，但我无法想象它是什么。现在我只想说你没有什么可担心的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T17:49:44.387

如果将用户输入插入到 batabase，则必须对其进行清理。
更多信息：http: [//bobby-tables.com/](http://bobby-tables.com/)

如果用户输入没有被插入到数据库中，让用户写他们想要的任何东西，它不会对你的脚本造成任何伤害，而且我比较确定 mysql_real_escape_string() 只有在之前建立了与数据库的连接时才有效，否则它会抛出错误。如果我错了，请纠正我。

在这点上，我不妨涵盖所有内容。如果您要连接到数据库，请务必使用 PDO 连接或 mysqlite。至于进一步防止 SQL 注入，并且不推荐使用 MYSQL_* 函数。

# html - XML 内容管理

> ID：14507435
> 
> 赞同：0
> 
> 时间：2013-01-24T17:42:43.170
> 
> 标签：html, .net, xml, content-management-system

大家好，这是我第一次在这里发帖，我是在一家非常小的公司工作的学生，我负责开发公司的网站。由于我只在这里多呆了两个月，所以老板希望能够更改网站的某些内容，而无需编写任何代码。

他提到了拥有一个可以在线更新的 XML 文件的想法，这将更新网站的部分内容。他不想与第三方网站有任何关系。

所以我只是想知道这是否可能，我没有使用 XML 的经验，真的不知道从哪里开始。欢迎所有建议。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:26:57.773

我为我的网站做了类似的事情，但使用了数据库驱动的概念。我有一个安全区域，可以通过表单将数据输入到各种数据库表中，然后通过 PHP 在网站上自动更新信息。需要一段时间才能将其全部到位并正常工作，但值得付出努力。

现在我正在考虑它，您也可以使用 XML 来执行此操作。在开发数据库驱动的站点之前，我玩了一下它。如果您不熟悉 XML，那么在短时间内完成它可能会有些困难。您还需要了解 XSLT，这有时会让人感到困惑。需要连接到 XML 文件（数据源），然后解析数据并将信息转换成看起来不错的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:49:42.187

尝试使用类似于以下标记的[服务器端包含 (SSI) ：](http://en.wikipedia.org/wiki/Server_Side_Includes)

```
<!--#include virtual="sitecontents/content_name_1.txt" --> 
```

您可以更新单个文件（它们不一定必须包含 HTML 标记），而不是尝试处理 XML 文档。更少的开发时间，坦率地说，更容易维护。

# encryption - 解密需要 M 个密钥中的 N 个的加密方法

> ID：14507436
> 
> 赞同：3
> 
> 时间：2013-01-24T17:42:53.323
> 
> 标签：encryption, cryptography

哪种加密方法允许使用*M*个密钥中的*N*个解密数据？

 *示例：有 5 个人，每个人都有一个单独的密钥。他们应该能够解密加密数据，但至少需要其中 3 个（任意组合）才能解密。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T18:13:58.140

您想要的技术名称是阈值方案。有几个不同的品种；谷歌会将您指向他们。如果你有兴趣，我的[博客上](http://programmingpraxis.com/2011/06/17/adi-shamirs-threshold-scheme/)有一个 Adi Shamir 阈值系统的实现。*

# ruby-on-rails - Rails 元编程 10 x 0 Me

> ID：14507438
> 
> 赞同：3
> 
> 时间：2013-01-24T17:43:06.010
> 
> 标签：ruby-on-rails

我正在尝试动态验证对象。

在我的应用程序上，用户可以创建将成为表单一部分的问题，并且每个问题都可以进行验证。

所以，我发布了这个表单，并将参数传递给下面的类：

```
require 'ostruct'
class QuestionResponse < OpenStruct
  include ActiveModel::Validations
  include ActiveModel::Conversion
  extend  ActiveModel::Naming
  extend  ActiveModel::Callbacks

  def fields
    @table.keys
  end

  def add_validators
    stored_questions = AdmissionForm.find(self.form_id).questions.all
    questions = fields.select{|f| f.to_s[0]=="q"}
    questions.each do |question_param|
      question = stored_questions.select{|f| f["id"] == question_param.to_s.gsub("q_","").to_i}.first
      unless question.validations.empty?
        validations = "validates :#{question_param} , #{question.validations.join(",")}"
        self.class.instance_eval validations
      end
    end

  end

  def initialize(*args)
    super
    add_validators if self.fields.any?
  end
  def persisted? ; false ; end;
end 
```

它几乎可以工作。我的问题是后续表单帖子连接 ActiveModel::Errors

```
#<ActiveModel::Errors:0x00000004432520
 @base=#<QuestionResponse q_7="", q_6="", form_id="1">,
 @messages=
  {:q_7=>["cant be blank", "cant be blank"],
   :q_6=>["cant be blank", "cant be blank"]}> 
```

我究竟做错了什么？

谢谢！

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:11:00.137

`add_validators`在 的每个实例上被调用`QuestionResponse`，这将验证添加到`QuestionResponse`. 每个新实例都将它自己的验证添加到类中，但您仍然拥有其他（先前创建的）实例添加的验证。

# windows - Windows管理员和Windows系统用户有什么区别

> ID：14507439
> 
> 赞同：7
> 
> 时间：2013-01-24T17:43:10.303
> 
> 标签：windows, windows-7, admin, privileges, administration

Windows 管理员用户和系统用户之间是否有任何权限差异？

有时，我必须将 cmd 窗口提升为系统权限才能删除一些文件。这可能是由于文件被系统用户锁定，或者系统用户可能具有更高的访问权限，我希望找出是否存在权限差异。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-24T17:59:03.093

来自[微软知识库](http://support.microsoft.com/kb/q120929)：

> 系统帐户和管理员帐户（Administrators 组）具有相同的文件权限，但功能不同。系统帐户由操作系统和在 Windows 下运行的服务使用。Windows 中有许多服务和进程需要能够在内部登录（例如在 Windows 安装期间）。系统帐户就是为此目的而设计的；它是一个内部帐户，不显示在用户管理器中，不能添加到任何组，也不能为其分配用户权限。另一方面，系统帐户确实显示在“安全”菜单的“权限”部分的“文件管理器”中的 NTFS 卷上。默认情况下，系统帐户被授予对 NTFS 卷上所有文件的完全控制权。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-22T20:52:48.970

来自[本地帐户文档](https://docs.microsoft.com/en-US/windows/security/identity-protection/access-control/local-accounts#system)：

> SYSTEM 帐户由操作系统和在 Windows 下运行的服务使用。Windows 操作系统中有许多服务和进程需要能够在内部登录，例如在 Windows 安装期间。SYSTEM 帐户就是为此目的而设计的，Windows 管理着 SYSTEM 帐户的用户权限。它是一个内部帐户，不会显示在用户管理器中，也不能添加到任何组中。
> 
> 另一方面，SYSTEM 帐户确实出现在“安全”菜单的“权限”部分的“文件管理器”中的 NTFS 文件系统卷上。默认情况下，SYSTEM 帐户被授予对 NTFS 卷上所有文件的完全控制权限。这里 SYSTEM 帐户与 Administrator 帐户具有相同的功能权限和权限。
> 
> 注意授予帐户Administrators 组文件权限不会隐式授予SYSTEM 帐户权限。可以从文件中删除 SYSTEM 帐户的权限，但我们不建议将其删除。

# javascript - 使用分隔符将二维数组划分为多个数组

> ID：14507440
> 
> 赞同：1
> 
> 时间：2013-01-24T17:43:11.053
> 
> 标签：javascript, arrays, image-processing, sprite-sheet

我已将 JavaScript spritesheet 转换为 2D 整数数组，现在我正在尝试将 2D 整数数组拆分为多个 2D 数组，使用 1 作为“分隔符”数字。

![精灵表](../Images/ccb8dc0f747dc0c2ef5f77a61c2093f0.png) 有没有办法使用分隔符将如下所示的 2D JavaScript 数组分隔为多个数组，如下所示？

```
function separate2DArray(arrToSeparate, separator){
    //separate the 2D array into multiple 2D arrays, using a
    //specific number as the separator
}

//array to separate:
[
[5, 5, 5, 1, 5, 4, 5],
[5, 5, 4, 1, 4, 3, 4],
[1, 1, 1, 1, 1, 1, 1], //1 is the "separator number", which splits the array
[9, 2, 1, 4, 2, 4, 5],       //horizontally and vertically
]
//The array above would produce the following 2D arrays:

5 5 5
5 5 4

5 4 5
4 3 4

9 2

4 2 4 5 
```

我想到的这个算法的主要应用是 spritesheet 图像分离。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:51:58.450

鉴于分隔区域是矩形的，这将起作用：

```
function separate2DArray(array, sep){
    //separate the 2D array into multiple 2D arrays, using a
    //specific number as the separator
    var result = [],
        currentSubs = {}; // using x coordinate as key

    for (var y=0; y<array.length; y++) {
        var line = array[y],
            subBegin = 0;
        for (var x=0; x<=line.length; x++) {
            if (x == line.length || line[x] == sep) {
                if (subBegin < x) {
                    var sub = line.slice(subBegin, x);
                    if (subBegin in currentSubs)
                        currentSubs[subBegin].push(sub);
                    else
                        currentSubs[subBegin] = [sub];
                } else { // a line of separators, subBegin == x
                    if (subBegin in currentSubs) {
                        result.push(currentSubs[subBegin]);
                        delete currentSubs[subBegin];
                    }
                }
                subBegin = x+1;
            }
        }
    }
    for (var begin in currentSubs)
        result.push(currentSubs[begin]);
    return result;
} 
```

这里的结果只是一个非常简单的子区域数组，没有关于它们在原始区域中的位置的任何信息。改良版：

```
function separate2DArray(array, sep){
    var result = [],
        currentSubs = {};
    for (var y=0; y<array.length; y++) {
        var line = array[y],
            subBegin = 0;
        for (var x=0; x<=line.length; x++) {
            if (x == line.length || line[x] == sep) {
                if (subBegin < x) {
                    var subline = line.slice(subBegin, x);
                    if (! (subBegin in currentSubs)) {
                        var subarea = [];
                        result.push({x:x, y:y, area:subarea});
                        currentSubs[subBegin] = subarea;
                    }
                    currentSubs[subBegin].push(subline);
                } else {
                    if (subBegin in currentSubs)
                        delete currentSubs[subBegin];
                }
                subBegin = x+1;
            }
        }
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:55:08.880

您必须遍历数组，只要找到 1 就将预览条目捕获到子数组中

[http://jsfiddle.net/cWYpr/10/](http://jsfiddle.net/cWYpr/10/)

```
 var arr = [[5, 5, 5, 1, 5, 4, 5], [5, 5, 4, 1, 4, 3, 4], [1, 1, 1, 1, 1, 1, 1], [9, 2, 1, 4, 2, 4, 5]];
  var twoD = [];
  for (var x = 0; x < arr.length; x++) {
    var row = arr[x];
    var subArray = [], subArrays=[];
    for (var y = 0; y < row.length; y++) {
      if (row[y] == 1) {
        if (subArray.length) subArrays.push(subArray.slice(0));
        subArray = [];
      }
      else {
        subArray.push(row[y]);
      }
    }
    if (subArray.length) subArrays.push(subArray);
    if(subArrays.length) twoD.push(subArrays);
  }
  console.log(twoD);
  document.write(JSON.stringify(twoD)); 
```

# clojure - 用于重定向缺少的尾部斜杠 url 的环形解决方案

> ID：14507445
> 
> 赞同：1
> 
> 时间：2013-01-24T17:43:24.833
> 
> 标签：clojure, ring

我试图使用环路由实现的行为在[这个问题](https://stackoverflow.com/questions/12469914/how-to-do-http-302-redirects-with-noir-web-framework)中被大致描述。

基本上，我有一些以斜杠结尾的 URL，并且我正在尝试创建一个中间件，该中间件将从例如重定向`example.com/foo`到`example.com/foo/`当且仅当`/foo/`是有效的 URL 而`/foo`不是有效的 URL。

我目前正在使用这个中间件

```
(defn good-response? [resp]
  (and resp (not= (:status resp) 404)))

(defn wrap-slash [handler]
  (fn [{:keys [uri] :as req}]
    (let [resp (handler req)]
      (if (or (good-response? resp) (.endsWith "/" uri))
        resp
        (let [added-slash (str uri "/")]
          (if (good-response? (handler (assoc req :uri added-slash)))
            (redirect added-slash)
            resp)))))) 
```

几乎所有它应该做的事情：它从重定向`/foo`到`/foo/`iff`/foo/`存在并且`/foo`不存在。

我担心的是，这个解决方案`(handler req)`至少会调用两次——一次是在请求`/foo`时，一次是在客户端请求重定向的 URL 时。现在这不是问题，但我可以想象对于具有数百个数据库查询或类似事情的一些慢速页面的响应时间加倍是痛苦的。

有没有办法简单地检查给定 URL 的处理程序是否存在，而不调用该处理程序？我们可以通过说变得`(:body request)`懒惰来完全避免这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:58:09.193

环中没有通用的方法来检查“这是一个有效的 uri 吗？” 无需使用该 uri 调用整个堆栈处理程序，因为没有 uri 的中央列表，但即使如此，处理程序也可以出于任何原因拒绝处理请求，而不仅仅是基于其 uri。

我可能会反过来；对于实际需要此行为的所有处理程序，使它们也捕获“未斜线”版本，然后在需要/有用时重定向。

或者使用单独的处理程序/中间件，如果 url 应该始终以斜线结尾，则如果它不匹配，则让重定向失败。无论哪种方式，最终用户都会得到 404，那么谁在乎呢，真的吗？

但最具体的处理程序通常处于做出决定的最佳位置。

哦，您可能不只是将 POST 转发到其他 URI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-19T04:19:09.163

我修复了你的代码。

```
(defn good-response? [resp]
  (and resp (not= (:status resp) 404)))

(defn wrap-slash [handler]
  (fn [{:keys [uri] :as req}]
    (let [resp (handler req)]
      (if (or (good-response? resp) (.endsWith uri "/"))
        resp
        (let [added-slash (str uri "/")]          
          (if (good-response? (handler (-> req
                                           (assoc :uri added-slash)
                                           (assoc :path-info added-slash))))
            (redirect added-slash)
            resp)))))) 
```

您需要更改：路径信息。

# django - 服务器重启后如何通过 Django manage.py 启动 gunicorn

> ID：14507448
> 
> 赞同：2
> 
> 时间：2013-01-24T17:43:28.000
> 
> 标签：django, ubuntu, gunicorn

我通过调用`python manage.py run_gunicorn`（在 virtualenv 中）开始 gunicon。

我的 Ubuntu 12.04 服务器重启后如何实现重启 gunicorn？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:49:27.547

您可以使用 supervisor 在启动时启动您的应用程序并在崩溃时重新启动。

安装supervisor并创建一个配置文件 `/etc/supervisor/conf.d/your_app.conf`，内容如下：

```
[program:your_app]
directory=/path/to/app/working/dir
command=/path/to/virtualenv_dir/bin/python /path/to/manage_py/manage.py run_gunicorn
user=your_app_user
autostart=true
autorestart=true 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-26T14:19:29.447

由于我在 Ubuntu 上并且喜欢使用已包含在发行版中的工具，因此我使用**Upstart**在启动机器后启动 gunicorn。

我将以下代码放入`/etc/init/django_sf_flavour.conf`：

```
description "Run Custom Script"
start on runlevel [2345]
stop on runlevel [06]
respawn
respawn limit 10 5
exec /home/USER/bin/start_gunicorn.sh 
```

启动后执行此文件（`/home/USER/bin/start_gunicorn.sh`）：

```
#!/bin/bash
set -e
cd MY_PROJ_ROOT
source venv/bin/activate
test -d $LOGDIR || mkdir -p $LOGDIR
exec python MY_PROJ_PATH/manage.py run_gunicorn 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-13T19:35:00.907

这是基于@j7nn7k 的答案，但有一些变化

1 - 在 /etc/init 目录中创建一个 .conf 文件以与 upstart 一起运行

```
cd /etc/init
nano django_sf_flavour.conf 
```

2 - 在 django_sf_flavour 文件中放入以下行并保存。

```
description "Run Custom Script"
start on runlevel [2345]
stop on runlevel [06]
respawn
respawn limit 10 5
exec /home/start_gunicorn.sh 
```

3 - 使用以下行在主目录中创建 start_gunicorn.sh 文件

```
cd /home
nano start_gunicorn.sh 
```

4 - 将这些代码放入其中并保存。

```
#!/bin/bash
set -e
cd mysite
source myenv/bin/activate
test -d $LOGDIR || mkdir -p $LOGDIR
exec gunicorn —bind 0.0.0.0:80 mysite.wsgi:application 
```

5 - 为 start_gunicorn.sh 设置可运行权限

```
cd /home
chmod 775 start_gunicorn.sh 
```

** 额外的 **

使用此命令检查语法 django_sf_flavor.conf

```
init-checkconf /etc/init/django_sf_flavour.conf 
```

答案应该是这样的：

```
File /etc/init/django_sf_flavour.conf: syntax ok 
```

如果需要，您可以在 upstart 日志文件中看到问题：

```
cat /var/log/upstart/django_sf_flavour.log 
```

像这样测试您的 django_sf_flavour.conf 文件，无需重新启动

```
service django_sf_flavour start 
```

像这样测试你的 bash 文件“start_gunicorn.sh”

```
cd /home 
bash start_gunicorn.sh 
```

检查 django_sf_flavour 的状态

```
initctl list | grep django_sf_flavour 
```

# c++ - 使用 WinAPI 绘制图像：LoadBitmap 有效，但 LoadImage() 无效？

> ID：14507452
> 
> 赞同：2
> 
> 时间：2013-01-24T17:43:48.623
> 
> 标签：c++, winapi, visual-c++, bitmap, loadimage

我对 Windows 编程很陌生，并且一直在关注 Forger 的 Win32 API 编程教程。我一直在尝试在窗口内绘制图像。

看过类似的问题后，这段代码似乎对于加载位图是正确的：

```
HBITMAP testImage == NULL;
case WM_CREATE:
    testImage = (HBITMAP)LoadImage(NULL, L"C:\\ScreenSnip.bmp", IMAGE_BITMAP, 498, 304, LR_LOADFROMFILE);
    if(testImage == NULL) {
        MessageBox(NULL, L"NO IMAGE LOADED!", L"Error!",  MB_ICONEXCLAMATION | MB_OK);
    }
break; 
```

我在上面的位置有一个名为 ScreenSnip.bmp 的图像，它的尺寸是 498*304。但是，LoadImage 不起作用，并且 testImage 的值始终为 null。

我曾尝试使用 LoadBitmap() 将图像作为资源加载，并且有效，这就是为什么我没有包含其余代码的原因。似乎是上面的 LoadImage() 导致了问题，但我不知道为什么。

有人有想法么？我在 Windows 7 64 位上使用 VC++ 运行它。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-04T15:04:10.097

使用 `testImage = (HBITMAP)LoadImage(NULL, L"C:\\ScreenSnip.bmp", IMAGE_BITMAP, 498, 304, LR_LOADFROMFILE);` 你使用宽 L"C:.." 所以你必须使用 LoadImageW

# jquery - 自定义滚动条拇指大小的公式是什么

> ID：14507457
> 
> 赞同：2
> 
> 时间：2013-01-24T17:44:16.973
> 
> 标签：jquery, html, css, scroll, scrollbar

我正在尝试在 HTML 中编写自定义滚动条。
就像是

```
<div class="demo">
    <div class="content">
       My content comes here
    </div>
    <div class="scrollbar">
       <div class="thumb"></div>
    </div>
</div> 
```

我正在尝试使用 jquery 动态设置拇指的高度。

但是，无法弄清楚拇指大小的公式。
尝试了一些类似的东西

```
$.scrollViewHeight = $('.demo').height();
$.contentHeight = $('.content').height();
$.thumbHeight = ($.scrollViewHeight / $.contentHeight) * $.scrollViewHeight;

$('.thumb').height($.thumbHeight); 
```

但它不起作用。
**Q1。**得到拇指高度的公式是什么？

`50px`我也使用 css保持最小拇指大小。
**Q2。**那么，在这种情况下，我们如何计算拇指的速度，因为内容会更多。

.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:33:33.377

当然，编写自定义滚动条会涉及更多内容，但这可以帮助您入门：

```
var $container = $(".container"),
    $content = $(".content"),
    $scrollbar = $(".scrollbar"),
    $scrollbarHandle = $(".scrollbar-handle");

/* To update scrollbar handle height (only) */

var viewportRatio = $container.height() / $content.height();

if (viewportRatio < 1) {
    $scrollbar.show();

    $scrollbarHandle.height(
        Math.max(
            50,
            Math.floor($scrollbar.height() * viewportRatio)
        )
    );
} else {
    $scrollbar.hide();
} 
```

接下来的步骤是：

1.  内容和 scollbar 句柄滚动位置的双向同步：在内容扩展、缩小或以其他方式滚动时重新定位句柄。设置手柄拖动时内容的滚动位置。
2.  单击位于句柄之外的滚动条区域时的分页。

# c# - EF DatabaseIntializer 循环遍历具有重载的列表方法，

> ID：14507469
> 
> 赞同：0
> 
> 时间：2013-01-24T17:44:46.277
> 
> 标签：c#, asp.net, linq, entity-framework, ef-code-first

下面是我的`Intializer.cs`，我被告知为了保留我的 Guid，我必须使用 Navigation 属性，以便在我的数据库中拥有正确的关系（[在 EF Code First DatabaseIntializer 中重用 GUID](https://stackoverflow.com/questions/14492367/reusing-a-guid-in-ef-code-first-databaseintializer)）。这似乎解决了我之前遇到的问题，但现在我想获取我的信息并使用种子将其实际添加到数据库中，我不确定如何满足这个错误。我收到`addUsers(Applications apps)`“eflogin.Models.Applications 是一个像变量一样使用的‘类型’的错误”。我觉得我这样做是错误的。

```
public class DatabaseIntializer : DropCreateDatabaseIfModelChanges<DataContext>
        {
protected override void Seed(DataContext context)
                {
                    addApplications().ForEach(a => context.Applications.Add(a));
                    addUsers(Applications apps).ForEach(u => context.User.Add(u));
                      // if i take out Applications apps
                      // i get No overload for method"addUsers" takes 0 arguments 
                }

private static List<Applications> addApplications()
            {

                var apps = new List<Applications>
                {
                    new Applications
                    {
                      ApplicationId = Guid.NewGuid(),
                      ApplicationName = "Test Login"

                    }
                };

                return apps;
            }
private static List<Users> addUsers(Applications apps)
            {
                var use = new List<Users>
                {
                    new Users
                    {
                        UserId = Guid.NewGuid(),
                        UserApplication = apps,
                        UserName = "Ralph",
                        IsAnonymouse = false,
                        LastActivityDate = System.DateTime.Now

                    }
                };
                return use;

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:57:10.907

问题是您在调用 addUsers 方法时传入了类型和实例。

```
addUsers(Applications apps) 
```

如果您删除应用程序并留下这样的应用程序。

```
addUsers(apps) 
```

您将收到另一个错误，因为您正在传递对象集合并且该方法需要一个实例。

这是对您的 Seed 方法的建议编辑，它应该可以帮助您克服这两个错误。

```
var apps = addApplications();
apps.ForEach(a => context.Applications.Add(a));

foreach (var app in apps)
{
    var users = addUsers(app)
    users.ForEach(u => context.User.Add(u));
} 
```

注意：我认为保持实体名称的复数有助于造成一些混乱。

# c# - 如何从 ASP.NET 向 Linux 服务器传递命令/脚本

> ID：14507471
> 
> 赞同：0
> 
> 时间：2013-01-24T17:44:56.727
> 
> 标签：c#, asp.net

我们正在尝试将命令或 shell 脚本执行从 ASP.net 传递到 Linux 服务器。

例如，如果我们将命令`ls`从 ASP.NET 传递到 Linux 服务器，那么它必须提供存在于 ASP.NET 的相应路径中的文件列表作为输出。

任何人都可以分享我们如何实现这一目标的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:50:06.473

telnet 和其他远程 shell 协议就是为此而存在的。

注意：如果没有适当的安全考虑，这是非常危险的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:06:50.233

如果只需要访问文件系统，可以考虑使用`Samba`. 您可以将远程文件系统挂载到 Windows 机器上。

另一种可能性是通过`FTP`.

# jquery - Jquery UI - 显示值而不是标签的框

> ID：14507472
> 
> 赞同：0
> 
> 时间：2013-01-24T17:44:57.387
> 
> 标签：jquery, ajax, json, jquery-ui

当我选择下拉列表时，它不会显示标签，而是显示值。我怎样才能让它正常工作？这是我的代码：

```
 $("#mainIngredientAutoComplete").autocomplete({
                source: function (request, response) {
                    var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");
                    $.ajax({
                        url: "../api/IngredientChoices",
                        dataType: "json",
                        success: function (data) {
                            response($.map(data, function (v, i) {
                                var text = v.MainName;
                                if (text && (!request.term || matcher.test(text))) {
                                    return {
                                        label: v.MainName,
                                        value: v.MainItemID
                                    };
                                }
                            }));
                        }
                    });
                },
                minLength: 2,
                select: function (event, ui) {
                    $("#mainIngredientID").val(ui.item.value);
                    $("#mainIngredientAutoComplete").val(ui.item.label);
                }
            }); 
```

# android - 如何从视图中获取 EMS 价值

> ID：14507474
> 
> 赞同：1
> 
> 时间：2013-01-24T17:45:00.973
> 
> 标签：android

有没有办法以编程方式获取视图的 minEMS？

我将它设置在我的布局文件中，但我需要在代码中的某个位置从中获取这个值。我不知道如何

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:51:46.557

```
TextView v = (TextView) findViewById(R.id.yourviewid);
int maxEMS = v.getMaxEms();
int minEMS = v.getMinEms(); 
```

getMaxEms [()](http://developer.android.com/reference/android/widget/TextView.html#getMaxEms%28%29)和[getMinEms()](http://developer.android.com/reference/android/widget/TextView.html#getMinEms%28%29)方法在具有 EMS 属性的视图中可用，例如`TextView`.

# qt - Windows 7 上的 QT Phonon

> ID：14507476
> 
> 赞同：0
> 
> 时间：2013-01-24T17:45:04.390
> 
> 标签：qt, windows-7, phonon

我不得不说我是 QT 的新手。

我尝试使用代码示例开始工作 Phonom：

```
audioOutput = new Phonon::AudioOutput(Phonon::MusicCategory, this);
mediaObject = new Phonon::MediaObject(this);
metaInformationResolver = new Phonon::MediaObject(this);
Phonon::createPath(mediaObject, audioOutput);

mediaObject->setCurrentSource(Phonon::MediaSource(":/sound/beep.wav"));
mediaObject->play(); 
```

编译时出现的唯一警告是：“警告：Phonon::createPath: Cannot connect Phonon::MediaObject (no objectName) to Phonon::AudioOutput (no objectName)。” - 结果没有声音。

我试图手动设置设备输出但没有结果。同时检查了 qmediaplayer 示例 - 效果很好。有谁可以告诉我，我做错了什么？

QT += 声子也包括在内

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:05:33.467

首先我不知道你为什么在第 3 行和第 5 行用相同的参数调用 create path() 2 次然后我会在连接之前尝试设置 source 但我不认为这是真正的问题

对我来说这有效：

```
Phonon::AudioOutput *audioOutput = new Phonon::AudioOutput();
Phonon::MediaObject *mediaObject = new Phonon::MediaObject();
mediaObject->setCurrentSource(Phonon::MediaSource("PathToFile"));
Phonon::createPath(mediaObject, audioOutput);
Phonon::MediaObject *metaInformationResolver = new Phonon::MediaObject();
mediaObject->play(); 
```

# c# - 容器未在构造函数中设置属性

> ID：14507490
> 
> 赞同：1
> 
> 时间：2013-01-24T17:45:35.670
> 
> 标签：c#, dependency-injection, servicestack, funq

我有一个使用[ServiceStack](http://www.servicestack.net)创建的服务。我将 Funq 用于我的依赖注入，因为它默认附带 ServiceStack，但这可能是其他 DI 容器表现出的行为。

我在启动时注册我的类型：

```
this.AppContainer.RegisterAs<ConcreteDownloadServices, IDownloadServices>();` 
```

我在一个类中有这个构造函数：

```
private readonly IDownloadServices downloadServices;

public ExampleService(IDownloadServices downloadServices)
{
    this.downloadServices = downloadServices;
} 
```

我的具体实现的构造函数是：

```
public ConcreteDownloadServices()
{
    this.ArbitraryProperty = "ArbitraryString";
} 
```

一切都解决得很好，我可以进入代码并看到事情按预期工作。但是，`AbritraryProperty`没有正确设置。我可以逐步查看它设置为字符串值，但是一旦代码返回到调用代码（在本例中，它将是 的构造函数`ExampleService`）`ArbitraryProperty`现在为空。

1.  这种行为是设计使然吗？
2.  如果是设计使然，那么使用 DI 是否意味着我不应该在具体实现的构造函数中做任何事情？
3.  如果是设计使然，那么为自动属性设置默认值的正确方法是什么？
4.  如果不是设计使然，那又是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T18:21:36.117

**编辑：**

我已经决定这不是我们想要的行为，所以我刚刚[签入了一个提交](https://github.com/ServiceStack/ServiceStack/commit/2c69edca5321f19d36077966e30f5e89ed5104f1)，以强制 Funq 不会自动装配字符串（和 ValueType）属性。新行为将在下一个版本的 ServiceStack (v3.9.34) 中可用。

### 现有行为

RegisterAs 是一个 Autowired API，即：

```
Container.RegisterAs<ConcreteDownloadServices, IDownloadServices>(); 
```

这告诉 ServiceStack 的 IOC 使用 IOC 解决的依赖项填充每个公共属性。这因为它是一个`string`公共财产将尝试解决`string`从国际奥委会注册。用代码术语来说，这是在幕后发生的：

```
new ConcreteDownloadServices { 
    ArbitraryProperty = Container.TryResolve<string>()
}; 
```

因为您没有注册任何“字符串”，所以将使用`null`. 只有公共属性是自动连接的，因此您可以通过将其更改为受保护的私有或内部属性来避免这种行为。

否则，您可以通过注册自定义委托工厂来覆盖默认的 IOC 行为，这使您可以完全控制依赖项的构建，例如：

```
container.Register<IDownloadServices>(c => new ConcreteDownloadServices()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-24T14:47:12.377

我们开发团队的一些成员刚刚花了一些时间调试一个类似的问题。

在我们的一个单元测试中使用的 RegisterAs 类有一个公共成员：public List Mails { get; 放; }

当此类通过 Funq 解析时，该成员被设置为 null，即使它是在构造函数中设置的。

我们的团队成员一致认为，当该成员不是注册为 Container.RegisterAs<> 的类型时，Funq 将此成员设置为 null 是很奇怪的。

我们使用的是 ServiceStack 版本 4.0.33

# excel - 如何测量打开的 .xlsx 文件中文件的大小

> ID：14507492
> 
> 赞同：0
> 
> 时间：2013-01-24T17:45:46.410
> 
> 标签：excel, zip

任何人都可以提供以下帮助：

如何在`.xlsx`打开文件以在我的excel中写入时测量文件中不同文件的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:41:07.923

正如您已经用 [zip] 标签指出的那样，`.xlsx`它实际上是一个 zip 文件。因此，即使文件已打开，您仍然可以只读方式访问它并获取您想要的信息。

我通常使用出色的[Total Commander](http://www.ghisler.com/download.htm)（共享软件功能齐全）：导航到文件并按`Ctrl`- `Shift`-`ArrowUp`然后在对面的窗口中将打开一个新选项卡。在此选项卡中，您可以将`.xlsx`（或任何其他 MS Office ZIP）作为普通文件夹浏览，即查看它的内容/文件大小/等。

# c# - 动画结束 Monotouch 上的事件

> ID：14507495
> 
> 赞同：0
> 
> 时间：2013-01-24T17:45:57.780
> 
> 标签：c#, xcode, xamarin.ios, uiimageview, uiimage

我正在使用 Monotouch 和 XCODE。

我使用以下代码创建了一个动画并且它正在工作：

```
img.AnimatedImages = myImageArray;
img.AnimationDuration =3;
img.StartAnimating(); 
```

我想要实现的是在动画播放完毕后调用一个方法。我已经使用 System.Timer 创建了一个计时器，但问题是当我在用户单击时启用它时它不起作用。（如果您在构造函数中启用它，它会起作用）。显然，让计时器每隔几毫秒循环一次并检查 img.isAnimating 是否仍在进行中是没有意义的。

有谁知道如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:09:29.900

我通过设置以下代码解决了这个问题：

```
public NSTimer myTimer;

// in ViewWillAppear method

myTimer = NSTimer.CreateScheduledTimer(3, delegate {myMethod();});

//create method that can be called by the timer

private void myMethod()
{

  myTimer.Invalidate();
  myTimer.Dispose();
  myTimer = null;

  //stop animation
} 
```

# eclipse - 动态 Web 项目中的 Eclipse Juno 没有 JSP（但其他一切都很好）

> ID：14507498
> 
> 赞同：3
> 
> 时间：2013-01-24T17:46:09.423
> 
> 标签：eclipse, jsp

简短的问题是，在创建动态 Web 项目（1.6 jdk）时，我可以看到要创建的所有文件类型，但没有 jsp 选项。添加到当我检查文件关联时，没有可供选择的 JSP 编辑器。

稍长的版本是我只想编辑 JSP 文件，我安装了 Juno EE 版本，它说安装了 Web 工具平台，一切正常。

然而，虽然一切正常，但文件关联中没有 *.jsp，并且在添加它时，列表中没有 JSP 编辑器。这是开箱即用的 Juno EE。

所以我检查了已安装的插件，它告诉我网络工具已安装，有一个图标和大量插件。它们都列在插件/安装列表中的 Java EE 下。我什至尝试只安装“java web 开发工具”，它被列为“使用 jsp 的工具”，但是当我这样做时，我得到““Eclipse Java Web Developer Tools”将被忽略，因为它已经安装了。” 但是我无法卸载它，因为它是 Java EE eclipse 平台的一部分。我没有安装其他可能会破坏它的插件，但是它需要一些时间才能使所有设置都很好，所以我宁愿不再安装它。

所以我尝试手动安装完整的 WTP，它说有些东西已经安装，但它安装了其他东西。但是，仍然没有 JSP 编辑器。因此，为什么我尝试了一个动态 Web 项目来查看我是否可以创建 JSP，但它没有被列出。

因此，eclipse base install 绝对拥有一切（xml、html 编辑器、java 编辑器、所有工具），但没有 JSP。

我的 JDK 很好，因为除非您拥有有效的 1.6 或更高版本，否则不会创建动态 Web 项目。

有人帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T15:28:15.963

看来您缺少 Eclipse Web 开发人员工具和 Eclipse Java Web 开发人员工具。

Help>Install new software> [http://download.eclipse.org/releases/juno](http://download.eclipse.org/releases/juno)，在Web,XML,Java EE下选择合适的项目

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-06T20:30:52.450

尝试使用 Java EE 开发人员安装 Eclipse。它应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T18:13:29.353

在 Eclipse Juno 中，选择 File/New/Other，然后在向导字段中输入 jsp。选择 jsp 文件或 jsp 标签，然后就可以了。希望有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-20T03:20:37.647

您可以前往 Eclipse Market 地方并搜索“Java EE Developer tool”。单击它时，您应该能够查看是否选择了您的 Web 开发人员工具。请选择该选项，您的问题将得到解决。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-09T09:25:49.017

我也面临同样的问题；我浏览了 Kepler 下载下的“Web、XML、Java EE ...”可安装文件：![在此处输入图像描述](../Images/9255b403ab2a4b8e59bcffa651c6f1dc.png)

这给我带来了 New->'JSP File' 上下文菜单项。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T15:51:57.620

检查你的路径。确保它至少指向 1.6 版本的 Java。重新启动 Eclipse。那为我修好了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-18T07:53:07.383

如果您已经正确安装了所有东西，但在创建新的 .jsp 文件时仍然没有显示 JSP 选项，请单击 Eclipse 右上角的 Web 图标。如果它不起作用，那么您需要安装 eclipse 的更新版本。

# windows-phone-7 - Windows Phone 手势检测

> ID：14507500
> 
> 赞同：0
> 
> 时间：2013-01-24T17:46:16.453
> 
> 标签：windows-phone-7, xna, touch, gesture

我正在创建一个游戏，玩家将使用拖动手势来“削减”敌人，在屏幕上滑动手指以杀死他们。

我觉得这应该比现在更容易，但目前我必须检测到的代码是：

```
while (TouchPanel.IsGestureAvailable)
{
    GestureSample gs = TouchPanel.ReadGesture();
    if (gs.GestureType == GestureType.FreeDrag ||
        gs.GestureType == GestureType.HorizontalDrag ||
        gs.GestureType == GestureType.VerticalDrag)
    {
        Current_Start = gs.Position;
        Current_End = Current_Start + gs.Delta;
    }
    if (gs.GestureType == GestureType.DragComplete)
    {
        DragEnded = true;
    }
} 
```

不过，这不太奏效。我需要两个向量：

*   阻力开始的地方
*   拖动结束的地方

出了什么问题，我该如何让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T03:28:23.027

我会尝试使用 onmousedown 和 onmouseup 事件来获取起点和终点，然后从那里开始。

# export - 在没有整个 weka 库的情况下使用 weka 决策树分类器？

> ID：14507506
> 
> 赞同：0
> 
> 时间：2013-01-24T17:46:35.213
> 
> 标签：export, libraries, classification, weka, labeling

我已经为我的实例训练了一个分类器，现在想将它导出到一个 Android 应用程序，其中 Weka 库将不可用。

不适合简单地在 Android 应用程序中添加 Weka 库，因为它的大小（6.5 Mb）。

有没有其他方法可以使用我的分类器来评估和标记其他未标记的实例？是否有专门为此设计的较小的独立库？

当然，最终我可以编写自己的库来解释 Weka 的输出模型，但在我看来，这样的解决方案已经存在，这似乎是合乎逻辑的。（虽然它以某种方式逃脱了我）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:32:14.840

没有独立的库可以做你想做的事。您可以删除所有不需要的 Weka 部分并将其打包到库中。

在您的特定情况下，最简单的做法可能是采用 Weka 学习的决策树并将其直接放入一系列`if...else`语句中的代码中。您甚至可以编写一个脚本，获取决策树的（图形）输出并为您编写该代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T21:47:01.967

在关注了 weka 的输出模型之后，我注意到通过使用以 Java 类形式生成树的选项，我可以将它与 weka 库分开使用。

您可以删除生成的 WekaWrapper 并仅保留内部类，这是树的基本实现：

该类看起来像这样：

```
public class WekaWrapper
  extends Classifier {

  /**
   * Returns only the toString() method.
   *
   * @return a string describing the classifier
   */
  public String globalInfo() {
    return toString();
  }

  /**
   * Returns the capabilities of this classifier.
   *
   * @return the capabilities
   */
  public Capabilities getCapabilities() {
    weka.core.Capabilities result = new weka.core.Capabilities(this);

    result.enable(weka.core.Capabilities.Capability.NOMINAL_ATTRIBUTES);
    result.enable(weka.core.Capabilities.Capability.NOMINAL_CLASS);
    result.enable(weka.core.Capabilities.Capability.MISSING_CLASS_VALUES);

    result.setMinimumNumberInstances(0);

    return result;
  }

  /**
   * only checks the data against its capabilities.
   *
   * @param i the training data
   */
  public void buildClassifier(Instances i) throws Exception {
    // can classifier handle the data?
    getCapabilities().testWithFail(i);
  }

  /**
   * Classifies the given instance.
   *
   * @param i the instance to classify
   * @return the classification result
   */
  public double classifyInstance(Instance i) throws Exception {
    Object[] s = new Object[i.numAttributes()];

    for (int j = 0; j < s.length; j++) {
      if (!i.isMissing(j)) {
        if (i.attribute(j).isNominal())
          s[j] = new String(i.stringValue(j));
        else if (i.attribute(j).isNumeric())
          s[j] = new Double(i.value(j));
      }
    }

    // set class value to missing
    s[i.classIndex()] = null;

    return WekaClassifier.classify(s);
  }

  /**
   * Returns the revision string.
   * 
   * @return        the revision
   */
  public String getRevision() {
    return RevisionUtils.extract("1.0");
  }

  /**
   * Returns only the classnames and what classifier it is based on.
   *
   * @return a short description
   */
  public String toString() {
    return "Auto-generated classifier wrapper, based on weka.classifiers.trees.Id3 (generated with Weka 3.6.9).\n" + this.getClass().getName() + "/WekaClassifier";
  }

  /**
   * Runs the classfier from commandline.
   *
   * @param args the commandline arguments
   */
  public static void main(String args[]) {
    runClassifier(new WekaWrapper(), args);
  }
}

class WekaClassifier {
  private static void checkMissing(Object[] i, int index) {
    if (i[index] == null)
      throw new IllegalArgumentException("Null values are not allowed!");
  }

  public static double classify(Object[] i) {
    return node0(i);
  }

  protected static double node0(Object[] i) {
    return 0.0; // unacc
  }
} 
```

所以，是的，事实上你可以很容易地做到这一点。要记住的事情：

*   对实例进行分类，调用classify(Object[])方法；
*   返回值将是一个浮点值；
*   返回值在注释中解释，就在返回命令旁边；
*   参数没有验证，所以要小心输入它们的顺序（这部分是由 weka 依赖部分完成的）；
*   顺序是 arff 文件中定义的顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-01T11:47:10.200

如果您想运行 RandomForests，您可以使用我编写的一个小脚本，它将 WEKA 的 RandomForest 分类器的 -printTrees 选项的输出转换为 Java 源代码。

[http://pielot.org/2015/06/exporting-randomforest-models-to-java-source-code/](http://pielot.org/2015/06/exporting-randomforest-models-to-java-source-code/)

您需要包含到您的 Android 应用程序中的代码将仅包含三个类：具有生成模型的类 + 两个使分类工作的类。

# ios - 以编程方式创建的按钮不响应用户的点击

> ID：14507507
> 
> 赞同：2
> 
> 时间：2013-01-24T17:46:44.360
> 
> 标签：ios, objective-c, uibutton

我知道这种问题在这里讨论过几次，但是我已经搜索并尝试过，但没有成功。我正在尝试在常规菜单顶部创建一个简单的登录视图。此登录页面包含 2 个文本字段（用户名和密码）和 1 个按钮（登录）。我的问题是，当我单击登录按钮时，一切看起来都很完美，但没有响应。

**登录视图使用 moveTo 方法从起点到终点进行动画处理。评论那部分，但仍然没有回应。*

主程序

```
- (void)viewDidLoad
{

    prefs = [NSUserDefaults standardUserDefaults];

    if (![prefs objectForKey:@"userName"]) {
        LoginScreen *login = [[LoginScreen alloc] initWithFrame:CGRectMake(35, 400, 250, 350)];
        [self.view addSubview:login];
        [login moveTo:CGPointMake(35.0, 65.0) duration:0.6 option:UIViewAnimationOptionCurveEaseOut];  
    }        

    [super viewDidLoad];
} 
```

登录屏幕.m

```
@synthesize login;

    - (id)initWithFrame:(CGRect)frame
    {
         self = [super initWithFrame:frame];
         if (self) {

             self.layer.masksToBounds = YES;
             self.userInteractionEnabled = YES;

             [self addButton:login withTitle:@"Login" andSize:CGRectMake(85, 200, 90, 35)];
             [login addTarget:self action:@selector(attemptLogin)
                   forControlEvents:UIControlEventTouchUpInside];

         }

         return self;
    }

        - (void) addButton: (UIButton*) button withTitle: (NSString*) title andSize: (CGRect) size{

            button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
            button.frame = size;
            [button setTitle:title forState:UIControlStateNormal];
            button.userInteractionEnabled = YES;
            [self addSubview:button];
        }

        - (void)attemptLogin{

            NSString *user = usernameTxt.text;
            NSString *pass = passwordTxt.text;
            NSString *url = [[NSString alloc] initWithFormat:@"http://domain.com/login.php?username=%@&password=%@", user, pass];

            NSLog(@"%@", url);

        } 
```

屏幕上没有打印任何内容。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:49:07.953

这是因为您创建了一个按钮，但没有指定单击按钮时要调用的选择器。将此行添加到您的`addButton`方法将解决问题：

```
[button addTarget:self action:@selector(attemptLogin) forControlEvents:UIControlEventTouchUpInside]; 
```

当您尝试通过综合`login`属性执行相同操作时，代码不起作用，因为您从未设置`login`. 当您将它传递给`addButton`函数时，该值将被忽略（您立即重新分配它）。但是，赋值永远不会改变 的值`login`，因为 Objective C 是按值传递参数的。

修复代码的另一种方法是将指针传递给`login`，而不是`login`自身，如下所示：

```
- (void) addButton: (UIButton**) button withTitle: (NSString*) title andSize: (CGRect) size {
    *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    (*button).frame = size;
    [*button setTitle:title forState:UIControlStateNormal];
    (*button).userInteractionEnabled = YES;
    [self addSubview:*button];
} 
```

我建议不要使用这种修复代码的方式：`login`直接在内部使用`addButton`可能是更好的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T17:49:56.697

问题主要是您正在分配一个新按钮，因此无法使用您的登录按钮，我在您的代码上评论了分配，这应该可以工作：

//旧版代码已删除，请检查编辑

**编辑**

```
 - (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

        self.layer.masksToBounds = YES;
        self.userInteractionEnabled = YES;

        login = [self addButtonWithTitle:@"Login" andSize:CGRectMake(85, 200, 90, 35)];
        [login addTarget:self action:@selector(attemptLogin)
        forControlEvents:UIControlEventTouchUpInside];

    }

    return self;
}

- (UIButton) addButtonWithTitle: (NSString*) title andSize: (CGRect) size{

    button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    button.frame = size;
    [button setTitle:title forState:UIControlStateNormal];
    button.userInteractionEnabled = YES;
    [self addSubview:button];
    return button;
}

- (void)attemptLogin{

    NSString *user = usernameTxt.text;
    NSString *pass = passwordTxt.text;
    NSString *url = [[NSString alloc] initWithFormat:@"http://domain.com/login.php?username=%@&password=%@", user, pass];

    NSLog(@"%@", url);

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T17:50:00.790

我认为你的意思是：

```
- (void) addButton: (UIButton*) button withTitle: (NSString*) title andSize: (CGRect) size{

    button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    button.frame = size;
    [button setTitle:title forState:UIControlStateNormal];
    button.userInteractionEnabled = YES;
     [button addTarget:self action:@selector(attemptLogin)
           forControlEvents:UIControlEventTouchUpInside];
    [self addSubview:button];
} 
```

您还应该删除：

```
 [login addTarget:self action:@selector(attemptLogin)
           forControlEvents:UIControlEventTouchUpInside]; 
```

从初始化方法。

# git - Git：将提交“移到顶部”

> ID：14507510
> 
> 赞同：42
> 
> 时间：2013-01-24T17:47:03.630
> 
> 标签：git, branch, git-rebase

假设`master`我禁用了一项功能。我在 branch 上处理该功能`feature`，因此我在那里有一个特殊的提交`$`，它只启用了该功能。现在我想将我所做的更改合并`feature`到中`master`，但保留启用提交。所以就像

```
main:    A--B--X--Y
feature: A--B--$--C--D 
```

因此，假设我想通过将`$`提交移到功能之上来做到这一点：

```
new feature: A--B--C--D--$ 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-24T17:51:44.390

`git rebase -i B`，然后移至`$`编辑器中显示的列表末尾。它将作为打开文件的第一行开始。您也可以完全删除该行，这只会将该提交从您的分支历史记录中删除。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-24T17:53:00.437

如果您想让您的提交保持相同的顺序，`feature`您应该创建一个新分支并执行以下操作。否则就这样做`feature`

```
git rebase -i <sha for commit B> 
```

将提交 $ 移动到列表底部

```
git checkout master
git rebase feature <or the other branch name> 
```

我不清楚这个问题，但如果你根本不想要 $ ，而不是移动它之后删除它`git rebase -i`虽然你会想在一个新的分支上这样做，这样你就不会丢失它。因为你正在改变历史。

这也假设分支`feature`没有被推送到远程，因为重写历史是不好的。

# c# - 保存上传到 azurewebsite 的文件

> ID：14507514
> 
> 赞同：3
> 
> 时间：2013-01-24T17:47:14.777
> 
> 标签：c#, excel, file, azure, asp.net-mvc-4

在我的本地机器上一切正常，但是..

发布我的`MVC4`Web 项目后，上传的 Excel 文件出现问题。我加载一个`HttpPostedFileBase`并将路径发送到我的 BL。我将它加载到那里，`dataTable`然后在第二次调用时将其加载到`list`.

这是代码..

控制器：

```
 [HttpPost]
    public ActionResult UploadCards(HttpPostedFileBase file, string sheetName, int ProductID)
    {
        try
        {
            if (file == null || file.ContentLength == 0)
                throw new Exception("The user not selected a file..");

            var fileName = Path.GetFileName(file.FileName);
            var path = Server.MapPath("/bin");

            if (!Directory.Exists(path))
                Directory.CreateDirectory(path);

            path = Path.Combine(path, fileName);
            file.SaveAs(path);

            DataTable cardsDataTable = logic.LoadXLS(path, sheetName);
            cardsToUpdate = logic.getUpdateCards(cardsDataTable, ProductID);

            foreach (var item in cardsToUpdate)
            {
                if (db.Cards.ToList().Exists(x => x.SerialNumber == item.SerialNumber))
                    cardsToUpdate.Remove(item);
            }
            Session["InfoMsg"] = "click update to finish";
        }
        catch (Exception ex)
        {
            Session["ErrorMsg"] = ex.Message;
        }
        return View("viewUploadCards", cardsToUpdate);
    } 
```

提单：

```
 public DataTable LoadXLS(string strFile, String sheetName)
    {
        DataTable dtXLS = new DataTable(sheetName);

        try
        {
            string strConnectionString = "";

            if (strFile.Trim().EndsWith(".xlsx"))
                strConnectionString = string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties=\"Excel 12.0 Xml;HDR=YES;IMEX=1\";", strFile);
            else if (strFile.Trim().EndsWith(".xls"))
                strConnectionString = string.Format("Provider=Microsoft.Jet.OLEDB.4.0;Data Source={0};Extended Properties=\"Excel 8.0;HDR=Yes;IMEX=1\";", strFile);

            OleDbConnection SQLConn = new OleDbConnection(strConnectionString);

            SQLConn.Open();

            OleDbDataAdapter SQLAdapter = new OleDbDataAdapter();

            string sql = "SELECT * FROM [" + sheetName + "$]";

            OleDbCommand selectCMD = new OleDbCommand(sql, SQLConn);

            SQLAdapter.SelectCommand = selectCMD;

            SQLAdapter.Fill(dtXLS);

            SQLConn.Close();

        }

        catch (Exception ex)
        {
            string res = ex.Message;
            return null;
        }

        return dtXLS;
    } 
```

和：

```
 public List<Card> getUpdateCards(DataTable dt, int prodId)
    {
        List<Card> cards = new List<Card>();
        try
        {
            Product product = db.Products.Single(p => p.ProductID == prodId);
            foreach (DataRow row in dt.Rows)
            {
                cards.Add(new Card
                {
                    SerialNumber = row[0].ToString(),
                    UserName = row[1].ToString(),
                    Password = row[2].ToString(),

                    Activated = false,

                    Month = product.Months,
                    Bandwidth = product.Bandwidth,
                    ProductID = product.ProductID,
                    // Product = product
                });
            }
        }
        catch (Exception ex)
        {
            db.Log.Add(new Log { LogDate = DateTime.Now, LogMsg = "Error : " + ex.Message });

        }
        return cards;
    } 
```

现在我认为`Windows Azure`不允许我保存这个文件，因为在我应该看到数据的中间视图上 - 我没有看到它。

我想到了一些方法......一个 - 不保存文件，但我不知道如何完成`ConnectionString`......第二个也许有一种方法可以在那里保存文件。

我很想得到解决这个问题的建议......

10 倍，对不起我的英语不好 =)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T20:40:29.967

我很尴尬，但我在[这里](https://stackoverflow.com/questions/262341/get-data-from-an-uploaded-excel-file-without-saving-to-file-system)发现了一个类似的问题.. 不完全是，但它给了我一个很好的方向。

野兔最终结果：

```
[HttpPost]
    public ActionResult UploadCards(HttpPostedFileBase file, string sheetName, int ProductID)
    {
        IExcelDataReader excelReader = null;
        try
        {
            if (file == null || file.ContentLength == 0)
                throw new Exception("The user not selected a file..");

            if (file.FileName.Trim().EndsWith(".xlsx"))
                excelReader = ExcelReaderFactory.CreateOpenXmlReader(file.InputStream);
            else if (file.FileName.Trim().EndsWith(".xls"))
                excelReader = ExcelReaderFactory.CreateBinaryReader(file.InputStream);
            else
                throw new Exception("Not a excel file");

            cardsToUpdate = logic.getUpdateCards(excelReader.AsDataSet().Tables[sheetName], ProductID);

            foreach (var item in cardsToUpdate)
            {
                if (db.Cards.ToList().Exists(x => x.SerialNumber == item.SerialNumber))
                    cardsToUpdate.Remove(item);
            }
            Session["InfoMsg"] = "Click Update to finish";
        }
        catch (Exception ex)
        {
            Session["ErrorMsg"] = ex.Message;
        }
        finally
        {
            excelReader.Close();
        }
        return View("viewUploadCards", cardsToUpdate);
    } 
```

10q 全部。

编辑：下载、参考和使用

dll是avalibale [hare](http://exceldatareader.codeplex.com/) 我添加了对Excel.dll的引用并添加了使用Excel；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:34:16.243

@hoonzis 是对的，不允许将文件写入云中的磁盘（您不能事件获取或设置文件的路径）。您应该使用 blob 存储，它对文件的效率更高，并且比 sql 更便宜。我推荐使用表存储服务，它是 noSQL 但它比 azure sql 便宜。仅当您的解决方案必须使用 azure sql 时才使用它。

Blob 存储在此处查看更多详细信息：http: [//www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/](http://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/)

表存储： http: [//www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/](http://www.windowsazure.com/en-us/develop/net/how-to-guides/table-services/)

有关选择正确存储的更多信息，您可以在此处找到：http: [//www.windowsazure.com/en-us/develop/net/fundamentals/cloud-storage-scenarios/](http://www.windowsazure.com/en-us/develop/net/fundamentals/cloud-storage-scenarios/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T17:59:57.827

该问题可能是由将文件写入磁盘引起的。云提供商通常不允许应用程序写入磁盘。

在您的情况下，该文件似乎只是临时写入磁盘并直接加载到数据库中。您应该能够直接从上传的文件打开流并将其直接写入数据库 - 无需写入磁盘。

检查您在 Session 中库存的异常 - 您应该在那里找到更多信息。

# function - SML - 创建将键映射到值的字典

> ID：14507516
> 
> 赞同：3
> 
> 时间：2013-01-24T17:47:17.210
> 
> 标签：function, dictionary, key, sml

我需要在 sml 中创建一个字典，但我在使用插入函数时遇到了极大的困难。

```
 type dict = string -> int option 
```

例如，这里是空字典：

```
 val empty : dict = fn key => NONE 
```

这是我对插入函数的实现：

```
 fun insert (key,value) d = fn d => fn key => value 
```

但这是错误的类型，我需要的是插入：(string*int) -> dict -> dict。我搜索了从惰性函数到实现字典的所有内容。任何帮助或方向将不胜感激！

如果您仍然对我要实现的内容感到困惑，我起草了调用简单查找函数时应该得到的内容

```
 fun lookup k d = d k

    - val d = insert ("foo",2) (insert ("bar",3) empty);
    val d = fn : string -> int option
    - lookup2 "foo" d;
    val it = SOME 2 : int option
    - lookup2 "bar" d;
    val it = SOME 3 : int option
    - lookup2 "baz" d;
    val it = NONE : int option 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:08:16.990

您可以根据函数的签名进行推理：

```
val insert = fn: (string * int) -> dict -> dict 
```

当你提供`key`了`value`一本字典`d`时，你想取回一本新字典`d'`。因为`dict`is `string -> int option`, `d'`is 函数接受 a`string`并返回 a `int option`。

假设您`s`为该函数提供了一个字符串。有两种情况可能发生：when`s`与`key`您返回关联的值相同，否则您通过查找`d`key来返回一个值`s`。

这是一个字面翻译：

```
fun insert (key, value) d = fn s => if s = key then SOME value
                                    else d s 
```

# c# - C# MongoDB 驱动程序 copydb 管理员登录

> ID：14507517
> 
> 赞同：3
> 
> 时间：2013-01-24T17:47:21.420
> 
> 标签：c#, mongodb

我正在尝试`copydb`在 mongodb 中使用命令。

当我这样做时，我得到以下异常：

```
Command 'copydb' failed: access denied; use admin db (response: { "errmsg" : "access denied; use         
admin db", "ok" : 0.0 }) 
```

我尝试以管理员身份登录，但由于我没有使用用户名和密码而失败。

如何在没有用户名和密码的情况下以管理员身份登录？如果我已经有权限，为什么还需要以管理员身份登录`drop`？

提前致谢

```
m_mongoDatabase.RunCommand(new CommandDocument(new BsonElement("copydb", (BsonValue) 1),
    new BsonElement("fromdb", (BsonValue) from),
    new BsonElement("fromhost", (BsonValue) fromHost),
    new BsonElement("todb", (BsonValue) to))); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T09:06:22.027

我认为问题在于您没有首先连接到目标实例上的“admin”数据库。

我可以使用以下代码执行您需要的操作：

```
var client = new MongoClient(MongoUrl.Create("mongodb://localhost:27018"));
        var m_mongoDatabase = client.GetServer().GetDatabase("admin");
        var result = m_mongoDatabase.RunCommand(
            new CommandDocument(new BsonElement("copydb", 1),
                new BsonElement("fromhost", "localhost"),
                new BsonElement("fromdb", "sourcedb"),
                new BsonElement("todb", "targetdb"))); 
```

请注意，我首先获取了 admin 数据库的引用。当我没有这样做并使用另一个常规数据库时，我遇到了与您相同的错误。

回顾一下，使用管理数据库作为“m_mongoDatabase”的值

希望这可以帮助

编辑：这与使用 mongodb shell 时的行为相同，因此 csharpdriver 似乎没有问题

# android - android后退按钮功能

> ID：14507518
> 
> 赞同：-2
> 
> 时间：2013-01-24T17:47:22.600
> 
> 标签：android

我只需要知道这一点。由于在活动中调用完成（）会将您带到上一个活动，当您按下后退按钮时，它实际上**完成**了当前活动并带您到上一个活动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:52:12.427

当用户在当前活动上按下后退按钮时，它会从活动堆栈中弹出并销毁，并且前一个活动会以其重新存储的状态恢复。

阅读[Tasks 和 Backstack](http://developer.android.com/guide/components/tasks-and-back-stack.html)以获得更详细的信息。您必须彻底理解这个概念。

希望这可以帮助！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:56:09.987

如果您没有通过调用`finish()`您之前的活动来摆脱活动，这将是正确的。您还可以通过调用更改功能

```
@Override   
public void onBackPressed() {    
// do something on back.

return;
} 
```

# javascript - 从可变长度字符串中提取 lat、lng

> ID：14507522
> 
> 赞同：1
> 
> 时间：2013-01-24T17:47:42.013
> 
> 标签：javascript, jquery

我想提取纬度。和来自这样的字符串的经度值：

```
var data = "(-20.210696507479017, -70.14000177383423),(-20.21202551027535, -70.14246940612793),(-20.21385790460967, -70.14066696166992),(-20.21168319245841, -70.13901472091675)" 
```

如果这些点的数量可以改变，我如何提取这些对并将它们推入一个数组？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T17:53:58.053

拆分对，然后拆分每对并解析值。这会生成一个对象数组，其中的 a`lat`和`lng`属性是数字：

```
var coors = data.split('),(');
for (var i = 0; i < coors.length; i++) {
  var c = coors[i].replace('(', '').replace(')', '').split(',');
  coors[i] = { lat: parseFloat(c[0]), lng: parseFloat(c[1]) };
} 
```

演示：http: [//jsfiddle.net/Guffa/EV2h4/](http://jsfiddle.net/Guffa/EV2h4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:54:57.070

为什么不把它转换成一个json字符串数组，然后解析成一个对象。

```
var data = "(-20.210696507479017, -70.14000177383423),(-20.21202551027535, -70.14246940612793),(-20.21385790460967, -70.14066696166992),(-20.21168319245841, -70.13901472091675)";
var arr = JSON.parse("[" + data.replace(/[)(]/g, "") + "]");
for(var x=0; x<arr.length-1; x+=2)
    console.log("lat " + arr[x] + ", lon " + arr[x+1]); 
```

**编辑**x+=2，很好地抓住 Iftah

# linux - 在 Linux 中测试内存是否可访问

> ID：14507524
> 
> 赞同：1
> 
> 时间：2013-01-24T17:47:44.437
> 
> 标签：linux, memory

给定一个不受信任的内存地址，Linux 中有没有办法测试它是否指向有效的、可访问的内存？

例如，在 mach 中，您可以使用 vm_read_overwrite() 尝试从指定位置复制数据。如果地址无效或不可访问，它将返回错误代码而不是使进程崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:50:45.680

`write`从该内存中（`/dev/null`例如，进入 （编辑：`/dev/null`它可能无法按预期工作，请使用管道）），`EFAULT`如果地址不可访问，您将收到错误消息。

*如果它是*可写的，我不知道如何在不破坏其内容的情况下测试*可写*内存。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:00:43.483

[这是TOCTOU](http://en.wikipedia.org/wiki/Time_of_check_to_time_of_use)的典型案例- 您在某个时间点检查内存是否可写，然后稍后您尝试写入它，并且不知何故（例如，因为应用程序释放了它），内存不再可访问。

实际上只有一种有效的方法可以做到这一点，那就是，当你真正需要使用它时，捕获你写给它的错误。

当然，您可以使用技巧来尝试确定内存是否“可写”，但实际上无法确保它是可写的。

您可能想稍微解释一下您实际尝试做的事情，如果您更具体，也许我们可以有一些更好的想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-05T03:42:02.933

你可以试试 msync：

```
int page_size = getpagesize();                                                            
void *aligned = (void *)((uintptr_t)p & ~(page_size - 1));                           
if (msync(aligned, page_size, MS_ASYNC) == -1 && errno == ENOMEM) {
    // Non-accessibe
} 
```

但是这个功能可能会很慢，不应该在性能关键的情况下使用。*

# asp-classic - 在 VBScript 中检查 NULL 时出错

> ID：14507526
> 
> 赞同：30
> 
> 时间：2013-01-24T17:47:47.853
> 
> 标签：asp-classic, vbscript, null, nullreferenceexception, nothing

我在经典 ASP 页面中有以下 VBScript：

```
function getMagicLink(fromWhere, provider)
    dim url 
    url = "magic.asp?fromwhere=" & fromWhere
    If Not provider is Nothing Then ' Error occurs here
        url = url & "&provider=" & provider 
    End if
    getMagicLink = "<a target='_blank' href='" & url & "'>" & number & "</a>"
end function 
```

我不断收到一条“需要对象”错误消息，上面写着`If Not provider Is Nothing Then`.

该值要么是 NULL，要么不是 NULL，那么为什么会出现此错误？

**编辑：**当我调用对象时，我传入 NULL，或者传入一个字符串。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-24T17:54:13.137

从您的代码来看，它看起来像是`provider`一个变体或其他一些变量，而不是一个对象。

`Is Nothing`仅用于对象，但稍后您说它应该是 NULL 或 NOT NULL 的值，这将由`IsNull`.

尝试使用：

```
If Not IsNull(provider) Then 
    url = url & "&provider=" & provider 
End if 
```

或者，如果这不起作用，请尝试：

```
If provider <> "" Then 
    url = url & "&provider=" & provider 
End if 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-01-25T08:51:17.170

我在评论中看到很多混乱。`Null`,主要用于数据库处理，通常不用于 VBScript `IsNull()`。`vbNull`如果调用对象/数据的文档中没有明确说明，请不要使用它。

要测试变量是否未初始化，请使用`IsEmpty()`. 要测试变量是否未初始化或包含`""`，请测试`""`或`Empty`。要测试变量是否为对象，请使用`IsObject`and 查看此对象是否在 上没有引用测试`Is Nothing`。

在您的情况下，您首先要测试变量是否为对象，然后查看该变量是否为`Nothing`，因为如果它不是对象，则在测试时会收到“需要对象”错误`Nothing`。

在您的代码中混合和匹配的代码段：

```
If IsObject(provider) Then
    If Not provider Is Nothing Then
        ' Code to handle a NOT empty object / valid reference
    Else
        ' Code to handle an empty object / null reference
    End If
Else
    If IsEmpty(provider) Then
        ' Code to handle a not initialized variable or a variable explicitly set to empty
    ElseIf provider = "" Then
        ' Code to handle an empty variable (but initialized and set to "")
    Else
        ' Code to handle handle a filled variable
    End If
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-12T17:38:46.560

我将在变量末尾添加一个空白 ("") 并进行比较。即使该变量为空，像下面这样的东西也应该起作用。您还可以修剪变量以防出现空格。

```
If provider & "" <> "" Then 
    url = url & "&provider=" & provider 
End if 
```

# github - GitHub 账号重命名

> ID：14507533
> 
> 赞同：0
> 
> 时间：2013-01-24T17:48:32.440
> 
> 标签：github, rename, account

我是 GitHub 的新手，并且（错误地）在家里创建了一个帐户，在工作中创建了一个帐户，因为我认为在工作中使用我的个人帐户可能会出现问题、安全问题或其他问题。原来没有:)。

所以我想删除我的家庭帐户（完成）并使用我仅在工作中创建的帐户，使其成为我的“真实”帐户。

这意味着我想将我的工作帐户重命名为我以前的家庭帐户的名称（已删除）。

1.  我的工作帐户还没有自己的存储库。
2.  我的工作使我可以访问他们的项目，仅此而已。

因此，如果我重命名我的工作帐户：

1.  我是否必须对我的本地工作远程副本（由某个公司帐户拥有）做任何事情或
2.  我是否应该像什么事都没发生一样继续工作？

出于某种原因（可能很明显），在尝试更改帐户名称时，GitHub 警告中未提及此场景。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T19:04:31.163

您可以通过您的帐户设置更改您的用户名：[https ://github.com/settings/admin](https://github.com/settings/admin)

如果您分叉了您公司的代码并从您的分叉中克隆，您将需要更新您的遥控器。如果您直接从公司的存储库中克隆，则应该设置好，因为您没有任何自己的存储库。

如果您运行`git remote -v`，您应该会看到以下内容：

```
origin git@github.com:Account/repo.git 
```

如果 Account 是您的帐户，则需要在您更改用户名后对其进行更新。如果是您的公司帐户，则无需更改。

# c++ - 如何计算 2 个数字 L 和 R（均包括在内）之间的数字，以使所选数字的数字乘积为偶数？

> ID：14507537
> 
> 赞同：4
> 
> 时间：2013-01-24T17:48:51.883
> 
> 标签：c++, algorithm

如何找到 2 个数字 L 和 R（均包括在内）之间的数字计数，这些数字甚至具有数字的乘积？除了蛮力，我们还能怎么做呢？

```
dp[0][0]=4;
dp[0][1]=5;
for(int l=1;l<=9;l++)
{
    dp[l][0]=0;
    dp[l][1]=0;
    dp[l][0]+=(dp[l-1][0])*10;
    dp[l][0]+=dp[l-1][1]*5;
    dp[l][1]+=dp[l-1][1]*5;          
} 
```

这是我制作的蛮力检查器，我正在尝试开发更有效的解决方案

```
bool f(ll n)
{
  ll p=1;
  if(n==0)
  return true;
  while(n)
  {
     p*=n%10;
     n/=10;
     if(p%2==0) return true;
     p=1;
  }
  if(p%2) return false;
  else
  return true;
}
ll brute(ll l,ll r)
{
   if(l>r) swap(l,r);
    ll cnt=0;
   for(ll  i=l;i<=r;i++)
   {
      if(f(i))
      {
         cnt++;
      }
   }

return cnt; 
```

}

`dp[l-1][0]`存储长度为 l 的偶数产品编号这就是我的想法..？这能解决问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:52:39.597

蛮力是一种非常浪费的方法。我们可以做得更好。

（我为格式道歉；我希望内容仍然足够清晰。）

## 首先，让我们简化问题：

```
EvenProductNumbersBetween(RangeStart, RangeEnd) = NumbersBetween(RangeEnd - RangeStart) - AllOddDigitNumbersBetween(RangeStart, RangeEnd)

NumbersBetween(RangeStart, RangeEnd) = (RangeEnd - RangeStart) + 1

AllOddDigitNumbersBetween(RangeStart, RangeEnd) = AllOddDigitNumbersUpTo(RangeEnd) - AllOddDigitNumbersUpTo(RangeStart-1) 
```

## 现在我们开始了：计算 AllOddDigitNumbersUpTo(RangeEnd)

**首先，考虑简单的情况：**

（假设 RangeEnd 为正）

*如果 RangeEnd 是单个数字（即 < 10），则*

```
AllOddDigitNumbersUpTo(RangeEnd) = Floor((RangeEnd+1)/2)

E.g.:
AllOddDigitNumbersUpTo(0) = {} = 0
AllOddDigitNumbersUpTo(1) = {1} = 1
AllOddDigitNumbersUpTo(2) = {1} = 1
AllOddDigitNumbersUpTo(3) = {1,3} = 2
AllOddDigitNumbersUpTo(4) = {1,3} = 2
AllOddDigitNumbersUpTo(5) = {1,3,5} = 3
AllOddDigitNumbersUpTo(6) = {1,3,5} = 3
AllOddDigitNumbersUpTo(7) = {1,3,5,7} = 4
AllOddDigitNumbersUpTo(8) = {1,3,5,7} = 4
AllOddDigitNumbersUpTo(9) = {1,3,5,7,9} = 5 
```

*如果 RangeEnd 可以是具有特定位数的任何数字，则*

考虑到每个数字必须有五个奇数之一作为选择（前导零缩短长度，因此被排除在外），所以这很容易直接计算：

```
AllOddDigitNumbersOfLength(NumberLength) = 5^NumberLength

E.g.:
AllOddDigitNumbersOfLength(1) = {1, 3, 5, 7, 9} = 5
AllOddDigitNumbersOfLength(2) = {1, 3, 5, 7, 9} * {1, 3, 5, 7, 9} = 5*5 = 25
AllOddDigitNumbersOfLength(3) = 5*5*5 = 125
... 
```

**否则，将 RangeEnd 分开：**

```
RangeEnd = (FirstDigit * 10^PowerOfFirstDigit) + Remainder

AllOddDigitNumbersUpTo(RangeEnd) = AllOddDigitNumbersUpTo(FirstDigit) * AllOddDigitNumbersOfLength(PowerOfFirstDigit-1) + AllOddDigitNumbersUpTo(Remainder) 
```

不幸的是，前导零有一个复杂的情况。（感谢@AndyProwl 用我的答案的早期版本向我指出了这个问题！）如果余数以零开头，那么我们*不应该*在最后添加 AllOddDigitNumbersUpTo(Remainder) 项，因为受约束的前导零会使即使我们尝试制造的每一个较小的数字，该产品也是如此。

```
E.g.:

AllOddDigitNumbersUpTo(6300193) =
= AllOddDigitNumbersUpTo(6*(10^7) + 300193)
= AllOddDigitNumbersUpTo(6) * AllOddDigitNumbersOfLength(7-1) + AllOddDigitNumbersUpTo(300193)
= 3 * 5^6 + AllOddDigitNumbersUpTo(300193)
= Trivial * Trivial + LogarithmicallySmallerCase

AllOddDigitNumbersUpTo(300193) =
= AllOddDigitNumbersUpTo(3*(10^6) + 00193)
= AllOddDigitNumbersUpTo(3) * AllOddDigitNumbersOfLength(6-1)
= 2 * 5^5
= Trivial * Trivial 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:55:53.290

由于您可能必须检查每个数字，因此最短时间是线性 O(n)，所以我会使用蛮力，因为我认为没有算法可以解决。

# android - 如何解决 Android JAR libs 重复文件错误

> ID：14507539
> 
> 赞同：0
> 
> 时间：2013-01-24T17:48:57.497
> 
> 标签：android, eclipse, jar, eclipse-adt

我有两个打包为 JAR 文件的 Android lib 项目。当我将两个 JAR 放入项目的 libs 文件夹中时，Eclipse 控制台会向我抛出此错误：

```
Error generating final archive: Found duplicate file for APK: res/values/attrs.xml
Origin 1: /Users/javier/dev/myProject/libs/facebook-sdk.jar
Origin 2: /Users/javier/dev/myProject/libs/sliding-menu.jar 
```

有一种方法可以避免此错误，而无需在 Eclipse 中将项目设置为我的应用程序的库？我需要共享我的源代码，并且我希望该项目包含这些库而不共享 facebook sdk 项目或滑动菜单项目文件夹。

谢谢

# html - WebRTC 实时音频流/广播

> ID：14507542
> 
> 赞同：11
> 
> 时间：2013-01-24T17:49:09.950
> 
> 标签：html, html5-audio, webrtc

我正在尝试了解 WebRTC。我需要能够通过网络浏览器捕获和流式传输实时音频。

我只是很难找到我能理解或最新的代码示例。如果有人可以帮助我首先在同一个浏览器中使用 HTML5/WebRTC 捕获和播放音频，我认为这将帮助我开始并一路走好。

注意：我只关心让它在 Chrome 中工作（或 Chrome Canary ！）。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-25T01:00:59.110

WebRTC 上的[HTML5 Rocks 文章](http://www.html5rocks.com/en/tutorials/webrtc/basics/)可能是最好的介绍性文章，它以通俗易懂的方式解释了一切。

为了简单地捕获本地视频/音频，您需要关注 MediaStream API（即 getUserMedia）。一旦你开始工作，你就需要开始研究 RTCPeerConnection API。

RTCPeerConnection API 的客户端代码非常简单，但信令所需的服务器端代码（即建立对等连接）可能很棘手。

我最终用 PHP 编写了我自己的服务器端解决方案，但这样做花了我大约三周的时间来敲墙（即试图破译[WebSocket 规范](https://datatracker.ietf.org/doc/html/draft-ietf-hybi-thewebsocketprotocol-17)）以使其正常工作。如果您想查看实际代码，我可以发布一些我的工作代码。

如果您准备好迎接挑战，我建议您尝试自己编写服务器端脚本，否则，我会研究像 Socket.IO 这样的 WebSocket 库，它会为您完成所有棘手的服务器端工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-20T16:56:02.097

如果您谈论的是**WebRTC 实时音频流/广播**，而不仅仅是点对点呼叫，那么 WebRTC 不是为广播而设计的。在这里查看[WebRTC - 可扩展的直播流广播/多播](https://stackoverflow.com/questions/18318983/webrtc-scalable-broadcasting)

# zend-framework - Zend 框架：将 GET 参数传递给分页器

> ID：14507543
> 
> 赞同：0
> 
> 时间：2013-01-24T17:49:12.353
> 
> 标签：zend-framework, zend-paginator

我正在尝试完成搜索表单，其中一个部分是分页。下一个问题是：我不知道如何将 GET 参数传递给分页器链接（例如：/page/2?search=query）。我在应用程序/脚本目录中创建了“controls.phtml”，并在 Bootsrap 中添加了

```
Zend_View_Helper_PaginationControl::setDefaultViewPartial('controls.phtml'); 
```

并在视图中呈现分页器：

`echo $this->paginationControl($this->paginator, 'Elastic', 'controls.phtml');`

有人可以写出我需要做的分步操作来解决这个问题吗？（与采埃孚我只有第 2 天）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T09:42:27.240

好的，您不会将查询参数发送到分页器，而是将它们发送到[分页器适配器](http://framework.zend.com/manual/1.12/en/zend.paginator.usage.html)。然后选定的适配器将执行所需的任何操作...*数据库查询或解析数组。*.. 然后您将数据库适配器传递给分页器。

这是一个控制器操作，它可以构建分页器或基于 get 查询进行重定向：

```
public function displayAction()
    {
        //get all parameters from requested url
        $request = $this->getRequest()->getParams();
        //build switch based GET query
        switch ($request) {
            //if ?query=value
            case (isset($request['query'])):
                //model to use for database query
                $model = new Music_Model_Mapper_Track();
                //paginator adapter to use
                $adapter = $model->fetchPagedTracks(null, $request['query']);
                //intiate new paginator
                $paginator = new Zend_Paginator($adapter);
                //provide paginator page values
                $paginator->setItemCountPerPage(20)->setPageRange(5);
                //?page=1 is default
                $page = $this->getRequest()->getParam('page', 1);
                //current page number
                $paginator->setCurrentPageNumber($page);
                //pass paginator to view
                $this->view->paginator = $paginator;
                break;
            //if ?id=value
            case (isset($request['id'])):
                $this->_forward('artist', null, null, array('id' => $request['id']));
                break;
            //if neither query value present. Should never get here.
            default:
                $adapter = $model->fetchPagedTracks();
                //[...]
                break;
        }
    } 
```

我为分页器适配器使用了修改后的适配器。它是从 DbTableSelect 适配器扩展而来的，只是简单地将映射器替换为数据库表：

```
class Music_Model_Paginator_Track extends Zend_Paginator_Adapter_DbTableSelect
{
    /**
     * Override getItems() to use mapper model instead of database table
     */
    public function getItems($offset, $itemCountPerPage)
    {
        $rows = parent::getItems($offset, $itemCountPerPage);

        $albums = array();
        foreach ($rows as $row) {
            $album = new Music_Model_Mapper_Track();
            $albums[] = $album->createEntity($row);
        }
        return $albums;
    }
} 
```

在该映射器中，我使用分页器适配器的方式与使用默认适配器的方式完全相同：

```
/**
     * Creates Zend_Paginator_Adapter_DbTableSelect object,
     * based on artist_id or query string.
     *
     * @param string $id
     * @param string $query
     * @return Music_Model_Paginator_Track
     */
    public function fetchPagedTracks($id = null, $query = null)
    {
        //if $id is not null where=$id
        if (!is_null($id)) {
            $select = $this->getGateway()->select();
            $select->where('track.artist_id = ?', $id);
        }
        //if $query is not null join on the artist table and query track title and artist name for match.
        if (!is_null($query)) {
            $select = $this->getGateway()
                ->select(Zend_Db_Table::SELECT_WITH_FROM_PART);
            $select->setIntegrityCheck(false);
            $select->join('artist', 'artist.id = track.artist_id');
            $select->where("track.title LIKE '%$query%'");
            $select->orWhere("artist.name LIKE '%$query%'");
        }
        //default select query if $id and $query are null, appended to query otherwise.
        $select->order('track.artist_id ASC');
        $select->order('track.album_id ASC');
        $select->order('track.track_number ASC');
        //instantiate paginator adapter
        //$adapter = new Zend_Paginator_Adapter_DbTableSelect() would also work
        $adapter = new Music_Model_Paginator_Track($select);
        //return paginator adapter
        return $adapter;
    } 
```

最后的观点没有什么特别的：

```
<div><?php
echo $this->paginationControl(
        $this->paginator, 'Sliding', '_paginatorControl.phtml'
)
?></div>
//[..] 
```

对于某些适配器（在某些情况下），您可能已经使用[Zend_Registry](http://framework.zend.com/manual/1.12/en/zend.registry.using.html)或[Zend_Session](http://framework.zend.com/manual/1.12/en/zend.session.introduction.html)将查询值持久化以传递回 url。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:34:40.900

我会在控制器上做更多的事情，只是将`$paginator`自身传递给视图。在你的控制器中是这样的：

```
Zend_Paginator::setDefaultScrollingStyle("Elastic");
Zend_View_Helper_PaginationControl::setDefaultViewPartial("controls.phtml");

$paginator = Zend_Paginator::factory($result);
$paginator->setItemCountPerPage(5);
$paginator->setPageRange(5);
//this is where you collect the GET param and use as parameter.
$paginator->setCurrentPageNumber((int) $this->getRequest()->getParam("page", 1));

$this->view->paginator = $paginator; //pass it from Controller into View 
```

然后在查看代码中：

```
<?= $this->paginator; ?> 
```

# php - 使用 PDO 输出分组结果

> ID：14507546
> 
> 赞同：0
> 
> 时间：2013-01-24T17:49:22.273
> 
> 标签：php, mysql, loops, pdo

我目前很难找到一种方法来以我想要的方式显示 PDO 查询的结果。

我只是通过我自己设置的一个小任务来学习 PHP/PDO 和 MySQL。我的选择查询如下。

```
try{
$sth=$dbh->prepare("SELECT backup.bakLoc, client.cliName, project.prjName, assistant.astName, session.sessDate, session.stdID, backup.bakID, backup.bakName, backup.bakDate, backup.bakKeep, backup.recLoc, backup.bakDeleted
                    FROM session
                    INNER JOIN studio ON session.stdID=studio.stdID
                    INNER JOIN engineer ON session.engID=engineer.engID
                    INNER JOIN assistant ON session.astID=assistant.astID
                    INNER JOIN client ON session.cliID=client.cliID
                    INNER JOIN project ON session.prjID=project.prjID
                    INNER JOIN composer ON session.cmpID=composer.cmpID
                    INNER JOIN fixer ON session.fixID=fixer.fixID
                    LEFT JOIN backup ON session.bakID=backup.bakID
                    WHERE session.stdID = :stdID AND (ISNULL(backup.bakDeleted) OR backup.bakDeleted =0)
                    ORDER BY session.stdID,backup.bakLoc,sessDate; ");

 $sth->bindParam(':stdID', $_GET['studio'], PDO::PARAM_INT);

 $sth->execute();

}
catch(PDOException $e) {
   print $e->getMessage();
} 
```

我遇到的问题与您输出此查询结果的方式有关。

id 喜欢按 backup.bakLoc 列对输出进行分组。该列可以有四个结果之一，NULL、1,2 或 3。我想将其输出到 html，并为每组结果设置一个单独的标题，而不是设置 4 个带有不同子句的查询。为了在过去完成它，我只是将每列转储到自己的数组中，然后用几个 if 语句迭代输出以观察列值的变化，或者只是在每个标题下运行查询，其中 WHERE 子句发生变化。必须有更直接的方法来做到这一点。

所以在这样的页面上

```
<h1>Not Backed Up</h1>
    //all results of when $row['bakLoc'] is NULL or 0
<?=$row['bakName']; ?><br />

<h1>backup location 1</h1>
   //all results of when $row['bakLoc'] is 1
<?=$row['bakName']; ?><br /> 
```

等等等等

我一直在玩 PDO::FETCH_GROUP 但我无法让它像我想要的那样工作。我希望有人可以为我指出正确的方向，以便在不需要多个查询的情况下拆分这样的结果。（当然，除非多个查询是最好的方法。）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:01:56.947

如果您正在查找每次出现 backup.bakLoc 的计数，这将为您提供一条记录，其中包含 4 个 backLoc 值中的每一个的计数：

```
SELECT  SUM(CASE WHEN backup.bakLoc IS NULL THEN 1 ELSE 0 END) backLoc_null,
        SUM(CASE WHEN backup.bakLoc = 1 THEN 1 ELSE 0 END) backLoc_1,
        SUM(CASE WHEN backup.bakLoc = 2 THEN 1 ELSE 0 END) backLoc_2,
        SUM(CASE WHEN backup.bakLoc = 3 THEN 1 ELSE 0 END) backLoc_3

<the rest of your query> 
```

# android - 使用来自 android 应用程序的 spring-security-facebook grails 插件

> ID：14507547
> 
> 赞同：0
> 
> 时间：2013-01-24T17:49:23.710
> 
> 标签：android, facebook, grails, webview, spring-security

我一直在网站中使用 spring-security-facebook grails 插件，它就像一个魅力。

事实上，它运行得非常好，我不必深入研究它是如何工作的，这可能就是我现在陷入困境的原因。

我有一个公开 json REST API 的 webapp。可以使用用户/密码或使用 facebook 凭据来完成身份验证，为此我一直在使用这个插件。我只需要身份验证和用户的电子邮件。为此，我一直在使用重定向过滤器（FacebookAuthRedirectFilter）。它在这种情况下完美运行。

现在我正在尝试使用 phonegap 构建一个移动应用程序，所以我的移动应用程序纯粹是 html、js 和 css，并且希望使用 AJAX 请求与同一个 webapp 进行交互。

问题出现了，因为在移动应用程序上下文中，html 文件是本地的（并且它们需要这样），因为它们与应用程序捆绑在一起。

我的问题是在这种情况下如何验证用户身份？

如果我保持原样，在成功登录后，移动应用程序将被重定向到 webapp 的域，并且将停止获取本地 html 文件，这不是我想要的。

我想我需要某种客户端身份验证，然后向我的 webapp 发送一个 AJAX 请求，以某种方式添加 facebook cookie，因此对 webapp 的后续 AJAX 请求已经过身份验证。

但我可能完全错了，应该以不同的方式完成。

任何帮助都会非常感激。

（如果不清楚，我可以详细说明或添加任何说明，请问）。

***编辑***

经过 Igor 的建议后，我对插件进行了一些更改，以使用 FacebookAuthDirectFilter 来测试 signedRequest 方法，并且我还在我的 phonegap 应用程序中集成了 phonegap-facebook-plugin。

我可以在设备中成功登录 facebook，但无法在移动端检索已签名的请求。

由于该线程建议[JS SDK getLoginStatus 不返回 userID 或 signedRequest](https://stackoverflow.com/questions/10928009/js-sdk-getloginstatus-doesnt-return-userid-nor-signedrequest)，因此在这种情况下可能无法获取 signedRequest。

但是，我在移动端有 userId 和 access_token，这是我所需要的（我认为）来获取用户信息。我可以在 spring-security-facebook grails 插件中使用此信息对用户进行身份验证吗？（FacebookAuthRedirectFilter 使用我没有的“代码”）

这里还有另一个调整，因为如果用户通过公共网站连接，如果用户通过手机连接，access_token 是不同的。该插件存储一个，我不确定它可能有什么影响。

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T05:08:17.820

我认为你应该在你身边进行身份验证（我相信 Android 可以做到这一点）并向服务器提供身份验证令牌（AJAX 调用）。

但问题是插件目前并不真正支持它。插件`FacebookAuthDirectFilter`为此目的有过滤器（但它没有经过测试，也没有记录）。

此过滤器当前仅接受[签名请求](https://developers.facebook.com/docs/howtos/login/signed-request/)作为名为 的参数`signedRequest`。顺便说一句，下一个版本将支持访问令牌作为参数。

# c# - FileUpload 不上传文件

> ID：14507551
> 
> 赞同：1
> 
> 时间：2013-01-24T17:49:33.930
> 
> 标签：c#, asp.net, file-upload

我想将图像上传到文件，但有一个例外，因为***“SaveAs 方法配置为需要根路径，并且路径'../TempCharcoal/IMG_0153.JPG' 没有根。”***

这是我的简单代码：

```
if (fuImage.HasFile)
  {
     fuImage.SaveAs("../TempCharcoal/IMG_0153.JPG");
  } 
```

我想将它在 CharcoalForm.aspx 中上传到 TempCharcoal 文件夹。您可以看到它们在同一个根目录中，但我不知道出了什么问题。

![在此处输入图像描述](../Images/73ac8b8ad1cc9f5b85511a61d294ba91.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:00:20.137

改用这个：

```
if (fuImage.HasFile)
  {
     fuImage.SaveAs(Server.MapPath(@"~/TempCharcoal/IMG_0153.JPG"));
  } 
```

您拥有的文件路径是相对路径（相对于任何目录 .. 是）。[MapPath](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.mappath.aspx)方法将返回与该路径对应的物理文件路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:00:09.710

尝试使用：

```
string myPath = @"~\TempCharcoal\IMG_0153.jpg";
fuImage.SaveAs(Server.MapPath(myPath)); 
```

# jquery - JQuery 事件杀死 Rails 的链接

> ID：14507554
> 
> 赞同：0
> 
> 时间：2013-01-24T17:49:40.453
> 
> 标签：jquery, ruby-on-rails

我只是注意到我的链接在 jquery 事件发生后不起作用......我想做的是使 div 更大并交换内容。事件发生后，Rails link_to 和渲染“表单”停止工作......我该如何解决这个问题，如果你知道为什么会这样，你会解释为什么？

jQuery代码

```
jQuery(document).ready(function(){
jQuery(".readmore").on('click',function(event){
    event.preventDefault();
    var $id = $(this).attr("id");
    var $target_id = "#post-"+$id; 
    var $long = ".long-"+$id;
    var $short = ".short-"+$id;
    jQuery(".flex-cube").toggle(
        function () {
            jQuery($target_id).animate({marginRight: 0,width:"490px" }, 1000, "easeInOutQuad")
        },
        function () {                
            jQuery($target_id).animate({marginRight: 0,width:"490px" }, 1000, "easeInOutQuad")                   
        }  
    );    
    jQuery($target_id).addClass(".extended");
    jQuery($long).fadeIn(1000);
    jQuery($short).fadeOut(1000);
    return;
}); 
```

});

HTML & RoR 代码

```
<div class="flex-cube rounded-corner white-bk">
    <div id="form"><%= render 'form' %></div>
</div>
<% @microposts.each do |post|%>
    <div id="post-<%= post.id%>" class="flex-cube rounded-corner white-bk">
        <h5 class="black_bk white_font tenpx-padding"><%= post.username %></h5>
        <spam>
            <%= image_tag(post.image_url(:thumb)) if post.image?%>
            <% if post.posts.length > 250 %>
                <div class="short-<%=post.id%> active"><%= post.posts.slice(0..250)%>
                    <div id="<%= post.id%>" class="readmore button small post-<%= post.id%>">[-- Read More --]</div>
                </div>
                <div class="long-<%=post.id%> inactive">
                    <%= post.posts%>
                </div>

            <% else %>
                <div class="short-<%=post.id%> active"><%= post.posts%></div>
            <%end%>
        </spam> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T01:19:36.713

```
event.preventDefault(); 
```

该行防止发生默认操作。请参阅此问题以获得很好的解释：[event.preventDefault() 与 return false](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)。

# php - 判断 PHP 的 DateTime 是否为午夜

> ID：14507564
> 
> 赞同：5
> 
> 时间：2013-01-24T17:50:19.833
> 
> 标签：php, datetime

假设我有以下日期/日期时间。我怎样才能最好地分辨哪些是在午夜（即时间是 00:00:00）？第一个不应该是午夜，但接下来的三个应该是。谢谢

```
$d1=new DateTime('12/10/2012 05:33');
$d2=new DateTime('12/10/2012');
$d3=new DateTime('12/10/2012 00:00');
$d4=new DateTime('12/10/2012 00:00:00'); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-24T17:52:18.040

检查小时和分钟是否都为零：

```
if( $date->format( 'H') == 0 && $date->format( 'i') == 0) {
    echo "Midnight!";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-07T08:17:07.483

您必须指定时区并使用 DateTime

```
$test = new DateTime('NOW', new DateTimeZone('Asia/Kolkata'));
$h=$test->format('H');
$m=$test->format('i');
$s=$test->format('s');
if( $h == 0 && $m==0 && $s == 0) {
    echo "Midnight!";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-07T04:30:57.733

您可以使用正则表达式或类型转换检查相关部分是否仅包含 0：

```
 $string = $dateTime->format('Hisu');

    $isMidnight = preg_match('/^0+$/usD', $string);
    $isMidnight = !(int) $string; 
```

您可以使用格式设置粒度，所以

*   `Hisu`精确到微秒，
*   `His`精确到秒，
*   `Hi`精确到分钟，
*   `H`精确到小时。

# javascript - 使用 javascript 截屏

> ID：14507565
> 
> 赞同：1
> 
> 时间：2013-01-24T17:50:22.770
> 
> 标签：javascript, jquery, google-maps-api-3

> **可能重复：**
> [使用 javascript 截取网页的屏幕截图？](https://stackoverflow.com/questions/60455/take-a-screenshot-of-a-webpage-with-javascript)

将动态谷歌地图导出为 jpg 或 png 图像时，我遇到了一个真正的问题。

客户可以使用带有自定义标记和其他一些东西的谷歌地图 API v3 接口绘制自己的旅行。我想在 jpg 图像上导出他的旅行。

我已经尝试过静态地图和 html2canvas，但它不起作用。

我想重新使用生成图像，将其放入带有 fpdf 库的 pdf 生成中。

对不起，我的英语很差，我是法国人，莎士比亚的语言不太好。

如果你能帮助我，我已经感谢你了，因为这是一个非常大的项目，我已经迷失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:23:09.903

1 - Javascript 无法访问文件系统，因此您无法使用它保存文件。

2 - 不允许从谷歌地图保存图像。看这里：

[https://developers.google.com/maps/faq#tos_screenshots](https://developers.google.com/maps/faq#tos_screenshots)

> **在印刷材料和离线媒体**中使用 Google 地图图像须遵守发布于以下网址的许可指南：
> 
> [http://www.google.com/permissions/geoguidelines.html](http://www.google.com/permissions/geoguidelines.html)

您可以请求许可，但我认为获得许可并不容易，除非您是付费商业客户。

# visual-studio-2010 - Cmake和VS 2010已添加具有相同密钥的项目错误

> ID：14507567
> 
> 赞同：1
> 
> 时间：2013-01-24T17:50:34.353
> 
> 标签：visual-studio-2010, cmake

我一直在将 cmake 用于我们生成 VS 2009 项目的项目。现在我们正在移动到 2010，我注意到在 cmake 成功生成构建目录后，我用 VS 2010 打开 .sln，其中一个项目无法加载。输出显示：

错误：已添加具有相同键的项目。

该项目的 GUID 是“29AE0C04-FA88-4802-A8FC-79D38A5E870A”，我看到解决方案文件中没有其他具有该 GUID 的项目。

这发生在带有 cmake 2.8.8 或 2.8.10 的版本 10.0.40219.1 SP1Rel 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:41:36.343

我在使用 vs2010、Qt4 和 CMake 2.8.10 时遇到了同样的问题。就我而言，我有以下文件：MainWindow.h、.cpp、.ui 和 Main.cpp。生成项目后，在文件 .vcxproj 的末尾，您将看到以下文本：

```
<ItemGroup>
...
<None Include="MainWindow.ui" />
</ItemGroup> 
```

该行`<None ... />`导致问题。你应该删除它。因此，过滤器不会丢失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:36:02.123

我仍然不知道原因，但解决方法是删除项目文件夹中的 *.filters 文件。这解决了问题，但作为副作用源组丢失。

# c++ - 当不在包含路径中时，Eclipse CDT 会自动拉入 /usr/include/boost

> ID：14507577
> 
> 赞同：0
> 
> 时间：2013-01-24T17:51:04.790
> 
> 标签：c++, eclipse, boost, eclipse-cdt, point-cloud-library

我正在尝试用 PCL 构建一个项目。我正在使用 pcl、vtk-5.8 和 eigen3。我也在使用boost。

默认情况下，在 /usr/include 中存在 boost 1.46，我已经构建了自己的 boost 1.5.1 版本。将 boost 1.5.1 包含目录的路径添加到包含路径（在属性->构建->设置中）时，我在启动时遇到错误，因为我的应用程序是针对 /usr/include/boost 中的文件而不是 1.5 编译的.1 版本。所以当我不包括我的 boost 1.5.1 版本时，一切都运行良好。

我的问题是，eclipse 如何/为什么将 /usr/include 查找为包含路径（尚未明确添加），我该如何阻止它这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T18:08:53.420

查看 Properties->C/C++ General->Paths and Symbols，然后查看 Includes 选项卡。您可以设置包含目录，我相信您会在那里找到 /usr/include。您可能希望将其保留在其中（它甚至可能不会让您选择删除它）并在其上方添加您的 Boost 1.5.1 路径。确保在“语言”下选择了 C++。

# sql - 01/01/1901 00:00:00 的 sql 记号

> ID：14507585
> 
> 赞同：0
> 
> 时间：2013-01-24T17:51:33.760
> 
> 标签：sql

我尝试使用需要刻度日期的 redgate 产品，即 634925952000000000 = 01/01/2013 00:00:00

我可以在 sql 中找到一个转换器来计算 01/01/1901 00:00:00

没有这种情况发生“datediff 函数导致溢出。分隔两个日期/时间实例的 dateparts 数量太大。尝试使用 datediff 和不太精确的 datepart。”

```
 SELECT DATEDIFF(s, '19010101', GETDATE())*1000000 
```

回答不，任何人都可以帮忙。

只是 01/01/1901 00:00:00 的值真的作为应用程序使用它作为空日期。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T18:05:10.050

这 2 个日期之间返回的秒数对于 datediff 数据类型来说太多，无法支持 int。我见过其他人以分钟为单位使用差异，然后使用 BigInt 转换为秒。

尝试这样的事情：

```
SELECT DATEDIFF(mi,'19010101',getDate()) * CONVERT(BIGINT,60) 
```

这是[SQL Fiddle](http://sqlfiddle.com/#!3/d41d8/8008)。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:10:44.243

听起来你想要[datetimeconversion](http://www.sqlusa.com/bestpractices/datetimeconversion/)。

```
SELECT CONVERT(VARCHAR, datetick, 120) FROM supportContacts 
```

[**演示**](http://sqlfiddle.com/#!3/bf12a/21)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:00:35.770

尝试以下查询...可能对您有帮助...

```
DECLARE @date datetime
DECLARE @ticksperday bigint
set @date = getdate()
set @ticksPerDay = 864000000000
declare @date2 datetime2 = getdate()
declare @dateBinary binary(9) = cast(reverse(cast(@date2 as binary(9))) as binary(9))
declare @days bigint = cast(substring(@dateBinary, 1, 3) as bigint)
declare @time bigint = cast(substring(@dateBinary, 4, 5) as bigint)

select @date as [DateTime], @date2 as [DateTime2], @days * @ticksPerDay + @time as [Ticks] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T11:03:18.163

599581440000000000 是出于某种原因，上述解决方案都没有提出这个值。

# bash - 更多 Bash 问题 [如果语句总是评估为假。]

> ID：14507586
> 
> 赞同：2
> 
> 时间：2013-01-24T17:51:33.840
> 
> 标签：bash

警告：这可能是特定的机器问题或 GNU bash 的问题，版本 4.2.37(1)-release (x86_64-pc-linux-gnu) 将在我进一步检查时更新。

更新 1：适用于 GNU bash，版本 4.2.39。和 GNU bash，版本 4.2.24

我正在研究提出问题的 bash 脚本。我希望有一个通配符 if 语句，但检查用户是否输入 no 或只是 n 但由于某种原因它似乎不起作用。

```
echo 'Is this a Personal Project? [y/n]'
    read ORG_SWITCH
echo 'Do you want to Open Source this project? [y/n]'
    read PRIVATE 
```

这是 if 语句

```
if [[ $ORG_SWITCH == *"n"* ]] ; then
    if [[ $PRIVATE == *"n"* ]] ; then 
```

它输出的错误是 [[: not found [[: not found

我不知道为什么。我确实看到[了这一点](https://stackoverflow.com/questions/4277665/bash-how-do-i-compare-two-string-variables-in-an-if-statement)，但在那里尝试了一些解决方案，但也许我只是不明白发生了什么。

任何帮助将不胜感激，请随时谈论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:05:37.310

您可以使用`read -n1 -p "Is this a Personal Project? [y/n] " ORG_SWITCH`to 避免使用`echo`and 将用户输入限制为一个字符（`y`或`n`）。`[[ ]]`您也可以在没有配对的情况下测试您的状况：

```
read -n1 -p "Is this a Personal Project? [y/n] " ORG_SWITCH 
read -n1 -p "Do you want to Open Source this project? [y/n] " PRIVATE

if [ "$ORG_SWITCH" = "n" ]; then 
    if [ "$PRIVATE" = "n" ]; then 
        echo "double no"
    fi
fi 
```

在一个括号条件 ( `[ ]`) 中，始终将您的变量双引号，因此如果它们评估为空，您的代码将不会产生语法错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:17:22.190

此代码适用于`GNU bash, version 4.2.24`

```
#!/bin/bash
echo 'Is this a Personal Project? [y/n]'
read ORG_SWITCH

if [[ $ORG_SWITCH == *"n"* ]] ; then
    echo "True $ORG_SWITCH"
else
    echo "False $ORG_SWITCH"
fi

echo 'Do you want to Open Source this project? [y/n]'
read PRIVATE
if [[ $PRIVATE == *"n"* ]] ; then
    echo "True $PRIVATE"
else
    echo "False $PRIVATE"
fi 
```

这是输出

```
Is this a Personal Project? [y/n]
no
True no
Do you want to Open Source this project? [y/n]
no
True no 
```

我错过了什么吗？

# android - 如何使用 ActionBarSherlock 更改动作的触摸影响颜色？

> ID：14507587
> 
> 赞同：2
> 
> 时间：2013-01-24T17:51:35.687
> 
> 标签：android, android-actionbar, actionbarsherlock, android-theme

我有几个动作都正确显示。但是，当我单击操作时，颜色会显示为默认的蓝色，并且在我的应用程序中看起来很糟糕。如何更改动作的“选定”颜色？

这基本上是 的副本[`this question`](https://stackoverflow.com/questions/9019512/how-can-i-change-the-touch-effect-color-of-the-actionbar-in-android-3-0-and-high)，只是它不处理 ActionBarSherlock。

**编辑**

使用接受的答案，我在调整后收到此错误`style.xml`

错误是`error: Error retrieving parent for item: No resource found that matches given name 'Theme'.`

我完全按照下面给出的方式将它输入到我的`style.xml`文件中。在 Sherlock 库`/res/values/abs_themes.xml`文件中，样式名称与我的完全匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:57:09.607

好吧，ABS 使用（几乎）与默认 ActionBar 相同的 API，因此只需更改（重复）答案的主题，如下所示：

```
<style name="myStyle" parent="Theme.Sherlock">    
     <item name="android:selectableItemBackground">@android:drawable/item_background_holo_dark</item>
     <item name="selectableItemBackground">@android:drawable/item_background_holo_dark</item>
</style> 
```

和可绘制的：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android" android:exitFadeDuration="@android:integer/config_mediumAnimTime">

<item android:drawable="@drawable/list_selector_disabled_holo_dark" android:state_enabled="false" android:state_focused="true" android:state_pressed="true"/>
<item android:drawable="@drawable/list_selector_disabled_holo_dark" android:state_enabled="false" android:state_focused="true"/>
<item android:drawable="@drawable/list_selector_background_transition_holo_dark" android:state_focused="true" android:state_pressed="true"/>
<item android:drawable="@drawable/list_selector_background_transition_holo_dark" android:state_focused="false" android:state_pressed="true"/>
<item android:drawable="@drawable/list_focused_holo" android:state_focused="true"/>
<item android:drawable="@color/transparent"/>

</selector> 
```

您只需继承您的样式`Theme.Sherlock`并设置其他`selectableItemBackground`属性，但没有`android:`前面的。

# linux - parallel-ssh 使用的 hosts.txt 在哪里

> ID：14507588
> 
> 赞同：0
> 
> 时间：2013-01-24T17:51:36.267
> 
> 标签：linux, ssh

这可能听起来很傻，但我真的被困在这里......

我希望并行 ssh 在多个主机上执行操作，并且我知道我必须将它们的 IP 放在文件 hosts.txt 中，但是这个传说中的 hosts.txt 文件在哪里？或者如果我必须创建它，在哪里？因为我不断得到这个：

IOError：[Errno 2] 没有这样的文件或目录：'hosts.txt'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T17:55:42.963

你必须创造它。每行一个主机。

创建一个名为**hosts.txt**的文件，内容中有：

```
host1.mydomain.com  
host2.mydomain.com 
```

然后您将该文件作为选项传递`pssh -h hosts.txt ...`

该文件实际上可以具有任何名称，只要它是主机名列表即可。例如，您可以将其保存为**myhosts.txt**。

```
pssh -h myhosts.txt ... 
```

你可以在任何你喜欢的地方创建这个文件。如果您在 Windows 机器上，您可以在 c:\temp 或 /tmp/ 或任何地方的 *nix 框中创建它。

然后你可以去：

`pssh -h c:\temp\hosts.txt` 或者……
`pssh -h /tmp/hosts.txt` 或者……
`pssh -h c:\temp\myhosts.txt`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:55:29.587

您可以使用`-h`选项或`PSSH_HOSTS`环境变量指定它：

```
 pssh [OPTIONS] -h hosts.txt prog [arg0] ... 
```

# c# - 从亚马逊 SimpleDB 迁移到 SQL Server

> ID：14507589
> 
> 赞同：3
> 
> 时间：2013-01-24T17:51:42.457
> 
> 标签：c#, sql, azure, web, amazon-simpledb

我有一个有趣的问题。我最近开始在一家使用 Amazon SimpleDB 和 amazon S3 来完成所有存储的新公司工作。拥有大域名正在扼杀他们的表现。他们不想拆分域，而是希望使用 SQL 解决方案（Microsoft azure）。迁移到此的最简单方法是什么？

请记住，亚马逊 SimpleDB 的数据类型在程序内部使用，因此只需将每个域的数据作为字符串导出到 sql 表即可。

话虽如此，我将如何去做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:18:00.507

有一个名为[BackupSDB](http://backupsdb.com/)的基于 Web 的工具，它声称将 SimpleDB 域备份到 XML 文件，然后将它们存储在 S3 上。您应该能够下载 XML，然后使用您喜欢的 ETL 工具将其导入 SQL...

我从未亲自尝试过 BackupSDB，所以这纯粹是理论上的...... :-)

# python - Python字典理解

> ID：14507591
> 
> 赞同：463
> 
> 时间：2013-01-24T17:51:45.747
> 
> 标签：python, dictionary, list-comprehension

是否可以在 Python 中创建字典理解（用于键）？

如果没有列表推导，您可以使用如下内容：

```
l = []
for n in range(1, 11):
    l.append(n) 
```

我们可以将其缩短为列表推导：`l = [n for n in range(1, 11)]`.

但是，假设我想将字典的键设置为相同的值。我可以：

```
d = {}
for n in range(1, 11):
     d[n] = True # same value for each 
```

我试过这个：

```
d = {}
d[i for i in range(1, 11)] = True 
```

但是，我`SyntaxError`在`for`.

另外（我不需要这部分，只是想知道），您可以将字典的键设置为一堆不同的值，如下所示：

```
d = {}
for n in range(1, 11):
    d[n] = n 
```

这可以通过字典理解来实现吗？

```
d = {}
d[i for i in range(1, 11)] = [x for x in range(1, 11)] 
```

这也引发`SyntaxError`了`for`.

* * *

## 回答 #1

> 赞同：602
> 
> 时间：2013-01-24T17:54:24.697

[Python 2.7+ 中](https://www.python.org/dev/peps/pep-0274/)有字典理解，但它们的工作方式与您尝试的方式不同。就像列表理解一样，它们创建了一个*新*字典；您不能使用它们将键添加到现有字典中。此外，您必须指定键和值，当然如果您愿意，您可以指定一个虚拟值。

```
>>> d = {n: n**2 for n in range(5)}
>>> print d
{0: 0, 1: 1, 2: 4, 3: 9, 4: 16} 
```

如果要将它们全部设置为 True：

```
>>> d = {n: True for n in range(5)}
>>> print d
{0: True, 1: True, 2: True, 3: True, 4: True} 
```

您似乎要求的是一种在现有字典上一次设置多个键的方法。没有直接的捷径。您可以像已经展示的那样循环，也可以使用字典推导来创建一个带有新值的新字典，然后`oldDict.update(newDict)`将新值合并到旧字典中。

* * *

## 回答 #2

> 赞同：159
> 
> 时间：2013-01-24T17:53:50.830

您可以使用[`dict.fromkeys`](https://docs.python.org/3/library/stdtypes.html#dict.fromkeys)类方法...

```
>>> dict.fromkeys(range(5), True)
{0: True, 1: True, 2: True, 3: True, 4: True} 
```

这是创建所有键映射到相同值的字典的最快方法。

但[不要**将**它与可变对象一起使用](https://docs.python.org/3/faq/programming.html#why-are-default-values-shared-between-objects)：

```
d = dict.fromkeys(range(5), [])
# {0: [], 1: [], 2: [], 3: [], 4: []}
d[1].append(2)
# {0: [2], 1: [2], 2: [2], 3: [2], 4: [2]} !!! 
```

如果您实际上*不需要*初始化所有键， a`defaultdict`也可能很有用：

```
from collections import defaultdict
d = defaultdict(True) 
```

* * *

要回答第二部分，您需要的是 dict-comprehension：

```
{k: k for k in range(10)} 
```

你可能不应该这样做，但你也可以创建一个子类，如果你覆盖它，`dict`它的工作方式有点像 a ：`defaultdict``__missing__`

```
>>> class KeyDict(dict):
...    def __missing__(self, key):
...       #self[key] = key  # Maybe add this also?
...       return key
... 
>>> d = KeyDict()
>>> d[1]
1
>>> d[2]
2
>>> d[3]
3
>>> print(d)
{} 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2013-01-24T17:54:49.707

```
>>> {i:i for i in range(1, 11)}
{1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9, 10: 10} 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2014-08-16T18:03:34.563

我真的很喜欢@mgilson 评论，因为如果您有两个可迭代对象，一个对应于键，另一个对应于值，您还可以执行以下操作。

```
keys = ['a', 'b', 'c']
values = [1, 2, 3]
d = dict(zip(keys, values)) 
```

给予

> d = {'a'：1，'b'：2，'c'：3}

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2016-02-17T19:51:40.207

考虑这个使用字典理解计算列表中单词出现的例子

```
my_list = ['hello', 'hi', 'hello', 'today', 'morning', 'again', 'hello']
my_dict = {k:my_list.count(k) for k in my_list}
print(my_dict) 
```

结果是

```
{'again': 1, 'hi': 1, 'hello': 3, 'today': 1, 'morning': 1} 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2013-01-24T17:55:26.890

在元组列表上使用 dict() ，此解决方案将允许您在每个列表中具有任意值，只要它们的长度相同

```
i_s = range(1, 11)
x_s = range(1, 11)
# x_s = range(11, 1, -1) # Also works
d = dict([(i_s[index], x_s[index], ) for index in range(len(i_s))]) 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2013-01-24T18:53:48.960

列表推导的主要目的是在不更改或破坏原始列表的情况下基于另一个列表创建新列表。

而不是写

```
l = []
for n in range(1, 11):
    l.append(n) 
```

或者

```
l = [n for n in range(1, 11)] 
```

你应该只写

```
l = range(1, 11) 
```

在上面的两个代码块中，您正在创建一个新列表，遍历它并返回每个元素。这只是创建列表副本的一种昂贵方式。

要获取一个新字典，其中所有键都基于另一个字典设置为相同的值，请执行以下操作：

```
old_dict = {'a': 1, 'c': 3, 'b': 2}
new_dict = { key:'your value here' for key in old_dict.keys()} 
```

您收到 SyntaxError 是因为当您编写

```
d = {}
d[i for i in range(1, 11)] = True 
```

您基本上是在说：“将我的键 'i for i in range(1, 11)' 设置为 True”并且“i for i in range(1, 11)”不是有效键，它只是一个语法错误。如果 dicts 支持列表作为键，你会做类似的事情

```
d[[i for i in range(1, 11)]] = True 
```

并不是

```
d[i for i in range(1, 11)] = True 
```

但列表不可散列，因此您不能将它们用作 dict 键。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-03-14T20:21:58.180

[字典推导](https://www.python.org/dev/peps/pep-0274/)很像列表[推导](https://www.python.org/dev/peps/pep-0202/)，但我们在它的末尾得到一个字典，所以我们需要分配键值对而不是只分配值。

假设我们有一个用户列表，其中每个用户信息都存储在一个元组中。所以我们有一个包含四个用户元组的列表。在其中，他们有一个 ID、每个用户的唯一标识号、用户名和密码。

因此，我们要创建用户名到用户信息的映射。这是您经常会做的事情，尤其是当您在做诸如 Web 应用程序之类的事情时。

```
users = [
    (0, "Bob", "password"),
    (1, "code", "python"),
    (2, "Stack", "overflow"),
    (3, "username", "1234"),
]

username_mapping = {user[1]: user for user in users}
userid_mapping = {user[0]: user for user in users}

print(username_mapping)

"""
Why can this be helpful?

Well, imagine you know a user's username,and you want to get their information out.
You just access, let's say, "Bob," in your username_mapping, and you've got the information out.
"""
print(username_mapping["Bob"])  # (0, "Bob", "password")

# -- Can be useful to log in for example --

username_input = input("Enter your username: ")
password_input = input("Enter your password: ")

_, username, password = username_mapping[username_input]

if password_input == password:
    print("Your details are correct!")
else:
    print("Your details are incorrect.") 
```

所以这是一个使用这个结构执行某种登录的例子，这个字典理解。

这真的很有帮助，因为它使您不必在此处执行另一个 for 循环，以确保您使用正确的用户名进行输入。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-01-24T17:58:12.670

你不能像这样散列一个列表。试试这个，它使用元组

```
d[tuple([i for i in range(1,11)])] = True 
```

# excel - EXCEL：粘贴后将焦点设置在特定单元格上

> ID：14507592
> 
> 赞同：0
> 
> 时间：2013-01-24T17:51:45.743
> 
> 标签：excel, vba

应该是一个简单的问题：

我有以下粘贴数据的脚本：

```
Dim a As Range
Set a = Selection
Selection.Cut
Range("C1:I1").End(xlDown).Offset(1, 0).Select
ActiveSheet.Paste 
```

粘贴后，ActiveSheet 移动到其粘贴所在的单元格。如何重新关注从中剪切数据的单元格？

我想将重点放在当前保存在“A”变量中的范围上。

我试过这个：

```
a.Select 
```

和

```
a.Activate 
```

但是，它实际上并没有将 activeSheet 移动到正确的区域；它只是选择它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T18:18:29.493

您似乎想要的可以在一行中完成：

```
Sub OneLiner()
   Selection.Cut Range("C1:I1").End(xlDown).Offset(1, 0)
End Sub 
```

**cut**关键字后的单个空格表示目的地紧随其后。

无需 Dim 或 Set **a**，因为您甚至没有在代码中使用**a**作为变量。

这样做不使用剪贴板，不改变光标的位置或页面位置。

# matlab - Matlab - 如何修复：警告：显示复杂输入的实部？

> ID：14507598
> 
> 赞同：2
> 
> 时间：2013-01-24T17:51:53.047
> 
> 标签：matlab, fft, ifft

给定代码

```
function [nImg,mask] = myFunc(img,rl,rh)

    [n m] = size(img);
    mask = ones(n, m);

    % do some stuff
    %   more 
    %   and more 
    % 

    fourierImg = fft2(img); % take the fourier transform 2d for the given image
    fourierImg = fftshift(fourierImg); %  shift the fourier transform 
    output = mask.*fourierImg; % calc with the mask  % THAT LINE CAUSES 
    %  Warning: Displaying real part of complex input ? 
    ishifting = ifftshift(output); % grab the DC element 
    nImg = ifft2(ishifting); % inverse back to the image dimension

end 
```

我不断得到： `Warning: Displaying real part of complex input`当我执行该行时`output = mask.*fourierImg; % calc with the mask`。

我该如何解决？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:57:34.900

该警告意味着您正在尝试在实轴上绘制复数值。

我相信触发该警告的不是那一行，而是`plot`代码中其他地方的命令（或类似命令）。

FFT 变换的结果通常很复杂，因此如果要绘制这些值，请使用两张图：一张用于幅度，一张用于相位（或者一张用于实部，另一张用于虚部，但这还远远不够这样做不太常见）。要获得幅度，请使用`abs`命令。

按照您的评论，而不是`imshow(X)`尝试`imshow(abs(X))`或`imshow(real(X))`。

# blackberry-10 - 如何在 NavigationPane 下的页面上获取导航栏

> ID：14507600
> 
> 赞同：0
> 
> 时间：2013-01-24T17:52:07.700
> 
> 标签：blackberry-10, blackberry-cascades

我怎样才能在页面上的设置应用程序（附加屏幕截图）中获得导航栏之类的东西而不使其成为工作表？

![在此处输入图像描述](../Images/3f51dba3d0f276207dec9586a68df995.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:17:56.083

我在下面给出的链接上的黑莓论坛上得到了它的解决方案。

[http://supportforums.blackberry.com/t5/Cascades-Development/How-I-can-get-navigation-bar-on-Page-under-NavigationPane/mp/2117057#M12495](http://supportforums.blackberry.com/t5/Cascades-Development/How-I-can-get-navigation-bar-on-Page-under-NavigationPane/m-p/2117057#M12495)

# c# - RestRequest 类在哪里？

> ID：14507601
> 
> 赞同：18
> 
> 时间：2013-01-24T17:52:07.930
> 
> 标签：c#, .net, mailgun

[在maingun API 入门](http://documentation.mailgun.net/quickstart.html#sending-messages)的 C# 选项卡中，我找到以下代码。

```
public static RestResponse SendSimpleMessage() {
       RestClient client = new RestClient();
       client.BaseUrl = "https://api.mailgun.net/v2";
       client.Authenticator =
               new HttpBasicAuthenticator("api",
                                          "key-3ax6xnjp29jd6fds4gc373sgvjxteol0");
       RestRequest request = new RestRequest();
       request.AddParameter("domain",
                            "samples.mailgun.org", ParameterType.UrlSegment);
       request.Resource = "{domain}/messages";
       request.AddParameter("from", "Excited User <me@samples.mailgun.org>");
       request.AddParameter("to", "sergeyo@profista.com");
       request.AddParameter("to", "serobnic@mail.ru");
       request.AddParameter("subject", "Hello");
       request.AddParameter("text", "Testing some Mailgun awesomness!");
       request.Method = Method.POST;
       return client.Execute(request);
} 
```

当我用谷歌搜索类的名称时，我发现在不同的上下文中有几个对这个类的引用。但是，我似乎无法在 mailgun 网站、google 或 MSDN 上的任何地方找到 RestRequest 类的完全限定名称以找到它的文档。

**任何人都可以指出这个类在哪里定义？**

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-24T17:55:10.563

该代码看起来像是使用[RestSharp](http://restsharp.org/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-10T21:58:21.943

RestSharp 可从 NuGet 获得。从那里安装它。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-03-16T02:57:16.430

I run in the same issue. But I found out that if you are using JAVA 8 you don't needs any external librairy but just what java provide already here is my code example.

```
import javax.ws.rs.client.Client;
import javax.ws.rs.client.ClientBuilder;
import javax.ws.rs.client.Entity;
import javax.ws.rs.client.Invocation;
import javax.ws.rs.client.WebTarget;
import javax.ws.rs.core.MultivaluedHashMap;
import javax.ws.rs.core.MultivaluedMap;
import javax.ws.rs.core.Response;

public class EmailDAO {

public static Response sendNewPasswordMessage() {
Client client = ClientBuilder.newClient();
client.register(new BasicAuthenticator("api","yourkey"));

WebTarget target = client.target("https://api.mailgun.net/v2/your-domain/messages");

MultivaluedMap formData = new MultivaluedHashMap();
formData.add("from", "Test <postmaster@test.net>");
formData.add("to", "anyone@test.net");
formData.add("subject", "Hello world");
formData.add("html", "Hello world <br /> <br /> ");

Invocation invocation = target.request().buildPost(Entity.form(formData));
return invocation.invoke();
}

} 
```

Hopes it helps.

# java - 禁用主窗口但显示模块

> ID：14507602
> 
> 赞同：1
> 
> 时间：2013-01-24T17:52:10.833
> 
> 标签：java, netbeans, netbeans-platform, javahelp

我的目标是在不显示主窗口的情况下启动 NetBeans 平台应用程序。我知道这是可能的，并且按照本教程成功地做到了：http: [//java.dzone.com/news/how-create-a-consoleserver-app](http://java.dzone.com/news/how-create-a-consoleserver-app)

但是，我还想自动显示 HelpSet（来自模块）。当我按照上面的教程链接进行操作时，我得到了想要的结果 - 没有启动画面，没有主窗口，HelpSet 会自动打开。

但是，打开的帮助是空的！

我可以在控制台中看到一个警告：

`WARNING [org.netbeans.modules.javahelp]: Warning: the JavaHelp topic ID org.openide.util.HelpCtx.DEFAULT_HELP was not found.`

我很茫然。我唯一的代码是 Installer.java

```
public class Installer extends ModuleInstall {

    @Override
    public void restored() {
        Help h = Lookup.getDefault().lookup(Help.class);
        if (h != null) {
            h.showHelp(HelpCtx.DEFAULT_HELP);
        }
    }
} 
```

您可以在这里下载我的整个 NetBeans 项目：[http ://www.mediafire.com/?vkxqbrx9qy4ix1n](http://www.mediafire.com/?vkxqbrx9qy4ix1n)

当您运行它时，您会看到没有启动窗口或 ide 窗口，但是帮助弹出空的并在控制台中显示一条警告说它找不到帮助。

谢谢你

# jquery - 加载图像时激活功能

> ID：14507609
> 
> 赞同：1
> 
> 时间：2013-01-24T17:52:26.880
> 
> 标签：jquery, onload

这与我之前的 HTML 所在的问题有关：将[兄弟姐妹分组到 div](https://stackoverflow.com/questions/14488304/grouping-siblings-into-a-div)

我发现很难解释我想要完成的工作，所以我画了一个快速的线框表示：

![期望的结果线框](../Images/848f9a5f4a3ab23ce3441308c5a9c6f2.png)

我找到了一个与对内容进行分组并获得所需视觉效果的不同解决方案。该图像被保存在一个锚标记中，因此我使用 jQuery 找到页面上最高的 img 并将该高度应用于包含一个标记。因此，我没有将底部垂直对齐并将固定高度设置为内容，而是将内容垂直对齐到顶部，并将最大高度设置为锚标记并将该标记中的图像垂直对齐到底部。

![最大高度 TD](../Images/c7f7ea727b99e6192d7f5c0cd78a9a4a.png)

```
var maxHeight = 0;

$('.Product img').each(function() {
    maxHeight = Math.max(maxHeight, $(this).height()); })

$('.ProductThumbnail').css({"height":maxHeight}); 
```

该代码完美运行。但是，某些类别有多个页面，当您选择“下一页”链接时，电子商务解决方案使用 jQuery 动态加载页面并且代码中断。

所以，我的问题是“每当图像加载到页面上时，我怎样才能拥有上面列出的 onLoad 功能？”

[注 1：] 我已经尝试使用[desandro 加载的图像](https://github.com/desandro/imagesloaded)，但它没有像我希望的那样工作。

[注 2：] 我还希望 maxHeight 匹配每一行而不是整个页面，因为 TD 保存在 TR 中。

[注 3：] 我根本无法更改 html。我只被允许对头部、自定义页眉和自定义页脚进行补充。**内容不可编辑。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:03:59.420

您可以为每个重新计算该行的高度的委托`tr`（当孩子`img`触发事件时触发）附加一个委托：`ready`

```
$("table#tableId tr").on("ready", "img", function(){
       var maxHeight = 0;

       $(this).find('.Product img').each(function() {
           maxHeight = Math.max(maxHeight, $(this).height()); })

       $(this).find('.ProductThumbnail').css({"height":maxHeight});
    })
}); 
```

ETA：此代码使用`live()`方法来委托事件。使用此方法，您可以将事件绑定到尚不存在的元素。请注意，`live()`它已被弃用，`on()`应该使用，但要委托给`on()`您需要一个未被替换的父元素。

```
$("table#tableId img").live("ready",  function(){
       var maxHeight = 0;
       var $row = $(this).parents("tr");
       $row.find('img').each(function() {
           maxHeight = Math.max(maxHeight, $(this).height()); })

       $row.find('.ProductThumbnail').css({"height":maxHeight});
    })
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:57:31.403

在您的情况下，您应该或必须使用此功能

```
$('img').ready(function(){
    console.log('image is loaded');

}) 
```

它将查看元素是否已加载，然后执行功能...

这是一个例子

[杰菲德尔](http://jsfiddle.net/68dq6/)

# c# - FileSystemWatcher，为什么它不会捕获佳能 EOS 复制的创建事件

> ID：14507612
> 
> 赞同：1
> 
> 时间：2013-01-24T17:52:48.103
> 
> 标签：c#, events, filesystemwatcher

我正在使用 FileSystemWatcher 对象来捕捉文件夹中 *.jpg 的创建。到目前为止，它是一种魅力，我通过将 jpg's 拖入文件夹进行测试，但随后我开始在佳能 EOS 600D 上拍照。相机软件将图片从其闪存卡复制到目标文件夹，但没有触发任何事件。如果我将文件拖出然后拖入目标文件夹，则创建事件会很好地触发。

有谁知道程序是否可以以 SystemFileWatcher 没有注意到的方式存放文件？

根本没有反应，没有事件，没有异常，甚至没有错误事件的错误。

# visual-studio-2010 - CMake 和 Visual Studio 2010 source_group 不起作用

> ID：14507614
> 
> 赞同：1
> 
> 时间：2013-01-24T17:52:55.047
> 
> 标签：visual-studio-2010, cmake

我们一直在使用 Visual Studio 2009 plus cmake 和 source_group 函数对源文件进行分组。在我们迁移到 Visual Studio 2010 之后，我们注意到 source_group 不再工作了。

Microsoft Visual Studio 2010 版本 10.0.40219.1 SP1Rel 上的 cmake 2.8.6 或 2.8.10 会发生这种情况。

# javascript - 如何将 jquery 对话框居中显示在浏览器当前可视区域的中心？

> ID：14507629
> 
> 赞同：3
> 
> 时间：2013-01-24T17:54:00.930
> 
> 标签：javascript, jquery, jquery-ui-dialog

我可以使用默认位置（即页面的确切中心）使对话框居中。但是，当页面高度比浏览器窗口长时，当对话框首次打开时，它会将整个页面滚动回其中心。

我想将对话框预设为相对于屏幕而不是页面的中心。

我相信这是我用来初始化它的：

```
dialogDiv.dialog(
{
    title: "Edit Rating",
    width: 'auto',
    height: 'auto',
    modal: true,
    resizable: false
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:00:59.200

我认为这可能不需要太多努力。

```
$("#dialog").dialog(); 
```

根据本文，它默认为 center ：

[http://jqueryui.com/dialog/#default](http://jqueryui.com/dialog/#default)

我也试过这个并且工作了

这甚至更好：

```
$("#myDialog").position({
my: "center",
at: "center",
of: window
}); 
```

示例代码：http: [//jqueryui.com/demos/position/](http://jqueryui.com/demos/position/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:10:27.380

```
 $("#dialog").dialog("option", "position", "center") 
```

# drools - 更新功能如何在流口水中工作？

> ID：14507633
> 
> 赞同：4
> 
> 时间：2013-01-24T17:54:08.723
> 
> 标签：drools

更新功能如何在流口水中工作？它是否会导致相同的规则再次自动触发？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-25T16:11:44.610

我认为您需要阅读手册：[http ://docs.jboss.org/drools/release/5.4.0.Final/drools-expert-docs/html_single/](http://docs.jboss.org/drools/release/5.4.0.Final/drools-expert-docs/html_single/)

使用`update`使规则引擎知道事实已被修改。因此，必须重新评估依赖于该事实的规则。这确实具有规则可能会在无限循环中触发的效果。例如，给定以下 DRL，您将看到“无限循环”规则将持续激活：

```
declare AreWeThereYet
    answer : boolean
end

rule "Are we there yet?"
when
    not AreWeThereYet()
then
    insert(new AreWeThereYet());
end

rule "Infinite loop"
    no-loop
when
    $question: AreWeThereYet()
then
    $question.setAnswer(false);
    update($question);
end 
```

这是因为规则引擎已由 指示`update($question)`，`$question`已更改并且需要重新评估它。

但是有一些方法可以防止这种情况。只需`no-loop`在规则名称和规则之间加上一行，`when`以防止规则因自身后果而重新激活。另一个可以控制的规则属性是`lock-on-active`.

# python - BeautifulSoup 和正则表达式 - 从标签中提取文本

> ID：14507636
> 
> 赞同：0
> 
> 时间：2013-01-24T17:54:23.243
> 
> 标签：python, web-scraping, beautifulsoup, urllib2

我正在用 Python 编写一个小的文本抓取脚本。这是我的第一个更大的项目，所以我遇到了一些问题。我正在使用 urllib2 和 BeautifulSoup。我想从一个播放列表中抓取歌曲名称。我可以获得一首歌曲名称或所有歌曲名称+我不需要的其他字符串。我无法仅获得所有歌曲名称。我的代码获取所有歌曲名称+我不需要的其他字符串：

```
import urllib2
from bs4 import BeautifulSoup
import re

response = urllib2.urlopen('http://guardsmanbob.com/media/playlist.php?char=a').read()
soup = BeautifulSoup(response)

for tr in soup.findAll('tr')[0]:
    for td in soup.findAll('a'):
        print td.contents[0] 
```

和给我一首歌的代码：

```
print soup.findAll('tr')[1].findAll('a')[0].contents[0] 
```

它实际上不是一个循环，所以我只能得到一个，但如果我尝试让它循环，我会得到大约 10 个相同的歌曲名称。该代码：

```
for tr in soup.findAll('tr')[1]:
    for td in soup.findAll('td')[0]:
        print td.contents[0] 
```

我现在被困了一天，我无法让它工作。我不明白这些东西是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:28:58.800

```
for tr in soup.findAll('tr'):  # 1
    if not tr.find('td'): continue  # 2
    for td in tr.find('td').findAll('a'):  # 3
        print td.contents[0] 
```

1.  您想遍历所有 tr，因此`findAll('tr')`而不是`findAll('tr')` `[0]`.
2.  有些行不包含td，所以我们需要跳过它们以避免AttributeError（尝试删除此行）
3.  如在 1 中，您希望所有 a 都在第一个 td 中，但也需要 " `for td in tr.find`"，而不是 " `for td in soup.find`"，因为您要查看`tr`的不是整个文档 ( `soup`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:39:13.260

您应该在搜索中更具体一点，然后遍历表格行；通过 css 类获取特定表，使用切片遍历`tr`除第一个元素之外的元素，从第一个获取*所有*文本`td`：

```
table = soup.find('table', class_='data-table')
for row in table.find_all('tr')[1:]:
    print ''.join(row.find('td').stripped_strings) 
```

或者切掉第一行，你可以跳过`thead`测试：

```
for row in table.find_all('tr'):
    if row.parent.name == 'thead':
        continue
    print ''.join(row.find('td').stripped_strings) 
```

如果页面使用了适当的`<tbody>`标签，那就更好了。:-)

# ios - 无法从 iOS6 中的 ABAddressBook 获取 Facebook 个人资料

> ID：14507638
> 
> 赞同：3
> 
> 时间：2013-01-24T17:54:25.790
> 
> 标签：ios, objective-c, abaddressbook

我正在使用以下代码从 iOS 6 中的通讯录中检索社交资料：

```
// get the address book
ABAddressBookRef addressBook = ABAddressBookCreateWithOptions(options, error);

// get all people
CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(addressBook);

// get the number of people
CFIndex noOfPeople = ABAddressBookGetPersonCount(addressBook);

// for all people
for (CFIndex personIndex = 0; personIndex<noOfPeople; personIndex++)
{
    // get social profiles
    NSMutableArray *socialProfilesArray = [[NSMutableArray alloc] init];
    ABMultiValueRef socialProfiles = ABRecordCopyValue(person, kABPersonSocialProfileProperty);

    for(CFIndex j = 0; j < ABMultiValueGetCount(socialProfiles); j++)
    {
        NSDictionary* socialProfile = (NSDictionary*)ABMultiValueCopyValueAtIndex(socialProfiles, j);

        if ([socialProfile[@"service"] isEqualToString:(NSString*)kABPersonSocialProfileServiceFacebook])
        {
            NSString *strFacebook = (NSString*)socialProfile[@"username"];
        }
        else if ([socialProfile[@"service"] isEqualToString:( NSString*)kABPersonSocialProfileServiceTwitter])
        {
            NSString *twitterName = (NSString*)socialProfile[@"username"];
        }

        [socialProfilesArray addObject:socialProfile];
        [socialProfile release];
    }
    CFRelease(socialProfiles);
} 
```

看来，虽然我成功获得了 Twitter 个人资料，但没有返回 Facebook 个人资料。尽管如联系人应用程序中所示，显然有一个 Facebook 个人资料与我的一个联系人相关联。

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T02:59:39.217

嗨，我想我解决了这个问题，我自己回答了问题：

[ABMultiValueGetCount - kABPersonSocialProfileProperty 总是返回 0 吗？如何从通讯录中获取 Facebook 详细信息？](https://stackoverflow.com/questions/15870343/abmultivaluegetcount-kabpersonsocialprofileproperty-always-returns-0-how-can/15874825#15874825)

这可能是因为用户必须通过 iOS 上的按钮手动更新 facebook，或者记录不显示。我被困在眼前的事实，我可以在地址簿中看到 Facebook 联系人，但社交属性给了我 nada ！一旦我更新并扫描了链接的联系人，我就找到了我需要的一切。还包括我的代码：

```
/*  person is of type ABRecordRef loaded from an array thus:
    addressBookArray = (__bridge_transfer NSArray *)ABAddressBookCopyArrayOfAllPeople(addressBook);
    .....
    person = (__bridge ABRecordRef)[addressBookArray objectAtIndex:indexPath.section];
*/

ABAddressBookRef addressBook;
addressBook = ABAddressBookCreateWithOptions(NULL, NULL);

if (addressBook != Nil)
{
    int howManySocialApps;
    ABRecordRef who = ABAddressBookGetPersonWithRecordID (addressBook, ABRecordGetRecordID(person));

    NSArray *linkedPeople = (__bridge_transfer NSArray *)ABPersonCopyArrayOfAllLinkedPeople (who);

    for (int x = 0; x < [linkedPeople count]; x++)
    {
        ABMultiValueRef socialApps = ABRecordCopyValue((__bridge ABRecordRef)[linkedPeople objectAtIndex:x], kABPersonSocialProfileProperty);

        CFIndex thisSocialAppCount = ABMultiValueGetCount(socialApps);

        for (int i = 0; i < thisSocialAppCount; i++)
        {
            NSDictionary *socialItem = (__bridge_transfer NSDictionary*)ABMultiValueCopyValueAtIndex(socialApps, i);
            NSLog(@"Social Item of type %@", [socialItem objectForKey:(NSString *)kABPersonSocialProfileServiceKey]);
            /* put tests for facebook etc here */
        }

        if (socialApps != Nil)
            CFRelease(socialApps);

        howManySocialApps += thisSocialAppCount;
    }

    NSLog (@"Number of SocialApps Found is %i", howManySocialApps);

    CFRelease(addressBook);
} 
```

我发现有用的另一件事是确保我的数组被操纵没有很多重复的联系人，即 FB、Twitter 等的入口用户。Apple 有一些很好的代码来做到这一点：

```
 ABRecordRef source = ABAddressBookCopyDefaultSource(addressBook);
    addressBookArray = (__bridge_transfer NSArray *)ABAddressBookCopyArrayOfAllPeopleInSourceWithSortOrdering(addressBook, source, kABPersonSortByLastName); 
```

然后使用链接的联系人，我们可以找到任何东西。

干杯。

# php - 如何在 PHP 中进行超时？

> ID：14507644
> 
> 赞同：1
> 
> 时间：2013-01-24T17:54:55.860
> 
> 标签：php

> **可能重复：**
> [是否有类似于 PHP 的 setTimeout() (JavaScript) 的函数？](https://stackoverflow.com/questions/3435418/is-there-a-function-similar-to-settimeout-javascript-for-php)

有没有办法在 PHP 中做超时？类似于 Javascript 中的 setTimeout() 的东西。我想在 5 分钟后在数据库中插入数据。

编辑：还有。5分钟后它会做另一件事。将执行一个函数。然后，该方法不应该与数据库一起使用。挂起是不可取的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T17:58:56.523

如果数据库还没有`CURRENT_TIMESTAMP`字段，请添加一个。然后，立即插入该行，但将该`CURRENT_TIMESTAMP`字段设置为`DATE_ADD(NOW(),INTERVAL 5 MINUTE)`.

然后，在您从该表中获得的任何代码`SELECT`中，包括`WHERE ts <= NOW()`（您的字段`ts`名称在哪里）`CURRENT_TIMESTAMP`

我在我的一个 Cron 脚本中使用这种技术来模拟它不间断地运行，而实际上它每 15 分钟运行一次，使用 0 到 15 分钟之间的随机间隔，并且效果非常好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T17:56:46.587

您需要使用诸如 cron 作业或任务调度程序之类的东西，具体取决于您所在的位置。PHP 不是事件驱动的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T17:59:45.637

就像其他人说的那样，没有“干净”的方式。您最好使用托管环境提供的 cron 作业或类似调度程序的实用程序。**我强烈建议你不要使用`sleep()`**.

*另一种方法是完全改变你的方法*。为什么不立即将数据放入DB，而是在5分钟后赋予它不同的“含义”？
例如，您发布一个带有时间戳的新行。当您阅读时，您会过滤掉所有在 5 分钟前插入的行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T17:56:34.673

php`sleep()`函数是要走的路。[此线程](https://stackoverflow.com/questions/6486364/is-there-a-set-time-out-equivalent-in-php)中的更多详细信息。在您的情况下，代码可能是：

```
<?

sleep(300); // Or 'sleep(5*60);' to make it more readable.
echo 'Do something!';

?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T17:58:18.183

我不知道你为什么需要这个，但你可以使用

```
sleep(300); 
```

更多[http://php.net/manual/en/function.sleep.php](http://php.net/manual/en/function.sleep.php)

但我会使用更优雅的解决方案，这取决于你能做什么或不能做什么。

我会将数据存储在一个临时文件中。然后使用[cron](http://en.wikipedia.org/wiki/Cron)每五分钟运行一次脚本来检查天气或是否存在数据文件。如果是这样，请获取文件并插入数据库。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-01-24T17:57:32.797

您可以使用 AJAX 通过 javascript setTimeout 保存数据。

# apache - 网址重写和文件夹

> ID：14507647
> 
> 赞同：2
> 
> 时间：2013-01-24T17:55:09.780
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我的网站有一个子目录：

```
http://www.mysite.com/test/ 
```

在“测试”目录中，我有：

```
index.php
included-inside-index-file.php
another-included-inside-index-file.php
script.php 
```

现在，我怎样才能用 .htaccess 重写 url，使它像这样工作：

```
http://www.mysite.com/test --> access index.php
http://www.mysite.com/test/beautiful-url --> access script.php?parameter=beautiful-url
http://www.mysite.com/test/included-inside-index-file.php --> 404 error
http://www.mysite.com/test/another-included-inside-index-file.php --> 404 error 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:01:39.893

这很简单。您需要一个通用规则`beautiful-url`，但前面是抛出`[R=404,L]`要隐藏的脚本的规则。

```
RewriteEngine On

# First hide the includes
# These could be simplified if they follow a pattern.
# Here we'll list them individually though.
RewriteRule ^test/included-inside-index-file\.php - [R=404,L]
RewriteRule ^test/another-included-inside-index-file\.php - [R=404,L]

# Then rewrite to the beautiful URL if the file doesn't exist.
# The index.php will serve normally because it does exist
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^test/(.+)$ test/script.php?parameter=$1 [L] 
```

如果你想显式地阻止直接访问`script.php`，你可以在里面匹配它`THE_REQUEST`。将其放在阻止访问包含的规则之后。我*认为*这会奏效。如果您尝试不使用`RewriteCond`.

```
RewriteCond %{THE_REQUEST} script\.php
RewriteRule ^. - [R=404,L] 
```

# tsql - 将 unix 纪元时间戳转换为 TSQL 日期时间

> ID：14507649
> 
> 赞同：13
> 
> 时间：2013-01-24T17:55:15.470
> 
> 标签：tsql, unix-timestamp, epoch

除了 MySQL，我只发现了[一个类似的问题。](https://stackoverflow.com/questions/4794162/convert-unix-epoch-timestamp-to-mysql-timestamp-in-php)

我正在开发 Web 服务，并且必须查询数据库（MS SQL 服务器）。由于我无法得到正确的结果，我决定通过 SQL 客户端测试查询。Web 服务使用 Hibernate 访问数据库，所有时间值始终表示为长值（unix 纪元时间）。为了测试它，我需要将 unix 时间戳转换为 TSQL 时间戳。这就是我想出的：

```
select dateadd(ms,123,'1970-01-01 00:00:00.0'); 
```

输出：

```
1970-01-01 00:00:00.123 
```

但是，我的实际数据有点大

```
select dateadd(ms,1359016610667 ,'1970-01-01 00:00:00.0'); 
```

输出：

```
Error code 0, SQL state 22001: Data truncation
Error code 8115, SQL state 22003: Arithmetic overflow error converting expression to data type int. 
```

所以，我尝试了：

```
select dateadd(ms,CAST (1359016610667 AS BIGINT) ,'1970-01-01 00:00:00.0'); 
```

输出完全相同的错误。为了安全起见，我尝试了：

```
select CAST (1359016610667 AS BIGINT) 
```

输出：

```
1359016610667 
```

我确保[java long](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Long.html)等同于[TSQL bigint](http://msdn.microsoft.com/en-us/library/ms187745.aspx) - 它们都很`8 B`长。重读[dateadd() 文档](http://msdn.microsoft.com/en-us/library/ms186819.aspx)发现以下内容：

> DATEADD (datepart , number , date )
> ....
> number
> 是一个表达式，可以**解析**为添加到 date 的 datepart 的 int。用户定义的变量是有效的。

如果我理解正确，这意味着这种方法不能用于将 unix 时间戳转换为 TSQL 时间戳，这是，好吧，请原谅我的语言，但只是愚蠢的。

我的问题是：

*   我对这种情况的解释正确吗？
*   在 TSQL 中是否有任何其他**单线来进行这种转换？**

PS
修改日期参数 ( `'1970-01-01 00:00:00.0'`) 是不可接受的解决方案。我正在调试，我不想重新计算毫秒数:)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-24T20:41:02.467

很简单，首先添加整天，然后添加剩余的毫秒。一天有 86,400,000 毫秒。

```
declare @unixTS bigint
set @unixTS = 1359016610667

select dateadd(ms, @unixTS%(3600*24*1000), 
    dateadd(day, @unixTS/(3600*24*1000), '1970-01-01 00:00:00.0')
) 
```

结果是`2013-01-24 08:36:50.667`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-06-29T19:18:07.037

这对于那些漫长的时代应该是完美的。

```
SELECT DATEADD(SECOND, 1359016610667 / 1000, '19700101 00:00') 
```

# javascript - jQuery 对话框 - 修改按钮数组

> ID：14507650
> 
> 赞同：2
> 
> 时间：2013-01-24T17:55:19.493
> 
> 标签：javascript, jquery, jquery-ui, button, jquery-dialog

我有一个函数可以创建一个充满按钮的对话框，其名称来自一个按钮数组。[在这里](https://stackoverflow.com/questions/14389735/create-button-array-for-jquery-dialog)看到这篇文章。

我想做的是修改这个函数，以便我可以将样式应用于生成的按钮数组。像这样...

```
function setAutoDialog(){
    var testArray = ["T1", "T2"];

    var testFunction = function () {
        alert("worked");
    }

    var myButtons = {};

    for(var i = 0; i < testArray.length; i++){
        myButtons[testArray[i]] = testFunction;
    }
    for(var i = 0; i < testArray.length; i++){
        myButtons[i].css('background','black');
    }

    $('#autoDialog').dialog({
        autoOpen: false,
        width: 'auto',
        buttons : myButtons
    }); 
} 
```

正如你们中的一些人可能建议的那样，我只是不能将类应用于按钮，因为颜色将由用户设置，或者来自一组有序颜色以匹配所述按钮。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:31:20.967

你将不得不稍微捏造一下。

使用此标记：

```
<div id="autoDialog">howdy</div> 
```

您可以创建一组颜色和类名，然后应用它们：

我稍微更改了您的程序，并添加了一些警报，以便您看到已添加类：（这是针对类属性的警报测试的 jQuery 1.9 版本）-基本上我创建了一个动态样式元素并应用它。我在样式中添加了足以覆盖现有样式的内容 - 确保它是一个 hack 但应该可以工作。实践中的例子：http: [//jsfiddle.net/Q4qT3/1/](http://jsfiddle.net/Q4qT3/1/)

```
function setAutoDialog() {
    var testArray = ["T1", "T2"];
    var myClass = [{
        myclass: "primary",
        color: "#558899"
    }, {
        myclass: "secondary",
        color: "pink"
    }];
    var testFunction = function (e) {
        alert("worked2");
        alert($(e.target).prop("class"));
    };

    var myButtons = [];
    var i = 0;
    for (i = 0; i < testArray.length; i++) {
        myButtons[i] = {
            text: testArray[i],
            click: testFunction,
            myclass: myClass[i].myclass
        };
    }
    var myStyle = "<style type='text/css'> ";
    for (i = 0; i < testArray.length; i++) {
        myStyle += " .ui-dialog-buttonset ." ;
        myStyle += myClass[i].myclass;
        myStyle += " span.ui-button-text {background:";
        myStyle += myClass[i].color + ";}";
    }
    myStyle += "< /style > ";
    $(myStyle).appendTo("head");

    $('#autoDialog').dialog({
        autoOpen: false,
        width: 'auto',
        buttons: myButtons,
        create: function (event, ui) {
            //         Get the dialog
            var dialog = $(event.target).parents(".ui-dialog.ui-widget");
            var buttons = dialog.find(".ui-dialog-buttonpane").find("button");
            for (var i = 0; i < buttons.length; i++) {
                $(buttons[i]).addClass($(buttons[i]).attr("myclass"));
            }
        }
    });
    $('#autoDialog').dialog("open");
}
setAutoDialog(); 
```

# javascript - 使用 JavaScript 确定复选框 + 隐藏字段组合的值

> ID：14507652
> 
> 赞同：0
> 
> 时间：2013-01-24T17:55:22.070
> 
> 标签：javascript, jquery, checkbox

复选框的常见做法是将其与隐藏字段配对，这将确保即使未选中复选框，HTTP 帖子也始终包含一个值。

例如，如果我有一个术语复选框，我可能会这样实现它，同时使用复选框和隐藏元素：

```
<input type="checkbox" name="termsAgreement" value="true"> I accept the terms.
<input type="hidden" name="termsAgreement" value="false"> 
```

当它被回发时，HTTP 请求包含两个值（选中时）：

> termsAgreement=true&termsAgreement=false

或一个值（未选中时）：

> 条款协议=假

这很容易处理，因为您只需要`OR`两种方式的值，您就会得到正确的值。

但是，如果您想确定客户端的正确值，我能想到的唯一解决方案涉及一些非常讨厌的逻辑。

在这种情况下，是否有一种优雅的方法可以相当容易地确定使用 JavaScript 或 jQuery 的值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:12:33.493

我从来没有打扰过隐藏的领域。在 PHP 或 Java 中，我将只使用 isset（或等效）方法来查看值是否存在，并在它不存在时将其视为未选中。

在您的情况下，我会考虑为复选框本身提供一个 id 并使用 checked 属性来查看它是否被选中。

HTML：

```
<input id="termsAgreementCB" type="checkbox" name="termsAgreement" value="true"> 
```

Javascript：

```
var cbRef = getElementById('termsAgreementCB');
if(cbRef.checked) {
   /// The checkbox is checked. 
} 
```

jQuery <= 1.5

```
if($('#termsAgreementCB").attr('checked')) {
   /// The checkbox is checked.
} 
```

jQuery 1.6

```
if($('#termsAgreementCB").prop('checked')) {
   /// The checkbox is checked.
} 
```

**编辑** 根据您的评论，我会查看您的 MVC 文档，看看是否可以在输出的输入上放置 id。如果没有，您可以将它们包装在一个 div 中。

```
var $value = ''`enter code here`;
$('#myDiv input').each() {
   if($(this).attr('type') == 'checkbox' && $(this).attr('checked')) {
      $value = $(this).attr('value');
   } else if($(this).attr('type') == hidden && $value == '') {
      $value = $(this).attr('value);
   }
} 
```

如果您有多个复选框，只需将其抽象为一种方法。

# jquery - 在 jQuery 中获取祖父

> ID：14507656
> 
> 赞同：1
> 
> 时间：2013-01-24T17:55:29.877
> 
> 标签：jquery, selector

我有以下 HTML：

```
<div class="outter">
....
  <div class="container" rel="identification" >
    <h4> <a href="#" href="www.test.com"> </h4>
  </div>
....
</div> 
```

我有一些 jquery 代码，看起来像：

```
$('.outter').delegate('.container a','click', function()
{
  //If $(this) is the a element, how can I get the rel attribute of the granfather div?
} 
```

如果可以不使其依赖于 h4 父级，以防万一有一天 h3 发生变化，例如。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T17:57:24.497

```
$(this).closest('div.container').attr('rel'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:00:06.103

您可以使用将父母与选择器匹配的 parents() 方法

[http://api.jquery.com/parents/](http://api.jquery.com/parents/)

或者，如果您使用的是 1.4，则有一个新的 parentsUntil() 方法

[http://api.jquery.com/parentsUntil/](http://api.jquery.com/parentsUntil/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:04:52.433

如果只是这种情况：

```
<div class="container" rel="identification" >
   <h4> 
     <a href="#">click</a> 
   </h4>
</div> 
```

然后： `[http://jsfiddle.net/PUmWB/](http://jsfiddle.net/PUmWB/)`

```
$('a').click(function(){
   alert($('div.container').attr('rel'));
}); 
```

# php - 附加到字符串的更好方法

> ID：14507657
> 
> 赞同：-1
> 
> 时间：2013-01-24T17:55:36.930
> 
> 标签：php

当我使用 a`foreach`向字符串添加内容时，我总是使用`$x .= 'content'`但首先我声明了该变量`$x = ''`，这看起来像是不需要的额外代码行。有一个更好的方法吗？

这是一个很好的例子：

```
$options = array('Link 1', 'Link 2', 'Link 3')
$output = '';
foreach($options as $value) $output .= '<a href="#">' . $value . '</a>';
echo $output; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:06:06.880

您可以尝试使用三元运算符，如下所示，但同样，这是更多代码。除非我弄错了，否则没有“非”声明方式。

```
$options = array('Link 1', 'Link 2', 'Link 3');
foreach($options as $value) (isset($output) ? $output .= '<a href="#">' . $value . '</a>' : $output = '<a href="#">' . $value . '</a>');
echo $output; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:02:36.733

如果你想在一行中做这样的事情，你可以这样做：

```
foreach() {
    $output = isset($output) ? $output . $more : $more;
} 
```

但这是一样的，只是用三元运算符写的:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:00:18.000

不，不是干净的代码。理论上，您可以将“$output = ''”这一行去掉。结果是一样的。然而，这是非常糟糕的风格，更容易导致错误，并且由于这些原因会生成级别 NOTICE 的 PHP 警告（默认情况下不显示）。

# java - java中的数字格式使用Lakh格式而不是百万格式

> ID：14507658
> 
> 赞同：8
> 
> 时间：2013-01-24T17:55:38.313
> 
> 标签：java, formatting

我试过使用`NumberFormat`and `DecimalFormat`。即使我使用的是`en-In`语言环境，数字也被格式化为西方格式。是否有任何选项可以将数字格式化为 lakhs 格式？

前 - 我想`NumberFormatInstance.format(123456)`代替`1,23,456.00`（`123,456.00`例如，使用[此维基百科页面](https://en.wikipedia.org/wiki/Indian_numbering_system)上描述的系统）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-24T21:16:31.473

由于标准的 Java 格式化程序是不可能的，我可以提供一个自定义格式化程序

```
public static void main(String[] args) throws Exception {
    System.out.println(formatLakh(123456.00));
}

private static String formatLakh(double d) {
    String s = String.format(Locale.UK, "%1.2f", Math.abs(d));
    s = s.replaceAll("(.+)(...\\...)", "$1,$2");
    while (s.matches("\\d{3,},.+")) {
        s = s.replaceAll("(\\d+)(\\d{2},.+)", "$1,$2");
    }
    return d < 0 ? ("-" + s) : s;
} 
```

输出

```
1,23,456.00 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-24T22:17:53.647

虽然标准的 Java 数字格式化程序无法处理这种格式，但[ICU4J 中的 DecimalFormat 类](http://icu-project.org/apiref/icu4j/com/ibm/icu/text/DecimalFormat.html)可以。

```
import com.ibm.icu.text.DecimalFormat;

DecimalFormat f = new DecimalFormat("#,##,##0.00");
System.out.println(f.format(1234567));
// prints 12,34,567.00 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T18:01:40.653

这种格式无法与`DecimalFormat`. 它只允许分组分隔符之间的固定位数。

从[文档](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)中：

> 分组大小是分组字符之间的恒定位数，例如 3 表示 100,000,000 或 4 表示 1,0000,0000。如果您提供具有多个分组字符的模式，则最后一个和整数末尾之间的间隔就是所使用的间隔。所以 "#,##,###,####" == "######,####" == "##,####,####"。

如果要获得 Lakhs 格式，则必须编写一些自定义代码。

# php - 如何从 MySql 数据库中检索图像？

> ID：14507665
> 
> 赞同：1
> 
> 时间：2013-01-24T17:56:10.923
> 
> 标签：php, mysql, ios, image, blob

我目前通过在我的 php 文件中使用 JSON 从我的数据库中检索信息，我们称之为 getJson.php：

```
<?php
    include ("config.php");

    $query = "SELECT id,title,text,image,date FROM posts";
    $result = mysql_query($query) or die(mysql_error());

    $num = mysql_num_rows($result);

    $rows = array();
    while ($r = mysql_fetch_assoc($result)){
        $rows[] = $r;
    }

    echo json_encode($rows);

?> 
```

然后在我的应用程序中，我使用以下方法检索 JSON 表示：

```
NSURL *url = [NSURL URLWithString:kGETUrlPosts];
NSData *data = [NSData dataWithContentsOfURL:url];
NSError *error;
postsArray = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error]; 
```

我还将二进制图像数据存储为我想检索的 BLOB。但是我不能用 JSON 对这个二进制数据进行 JSON 编码，可以吗？

我的第二个选择是在图像字段中保留我的图像的 URL，然后调用

```
UIImage *img = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"www.myURL.com/MyPhotos/somephoto.png"]]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T15:23:00.197

我们的解决方案分**3**步。

**步骤1。创建一个接受 $_GET 参数 'imageId' 的专用 php 脚本**

```
<?php
//Lets call this script as 'getImage.php'.
//This script should be publicly accessible
//Example format: http://www.yourdomain.com/getImage.php?imageId=2

include ("config.php");
$query = "SELECT image FROM posts WHERE id=" . mysql_real_escape_string($_GET['imageId']);
$result = mysql_query($query) or die(mysql_error());
$r = mysql_fetch_assoc($result);

//display the image
$im = imagecreatefromstring($r['image']); 
if ($im !== false) {
    // I assume you use only jpg
    //You may have to modify this block if you use some othe image format
    //visit: http://php.net/manual/en/function.imagejpeg.php
    header('Content-Type: image/jpeg'); 
    imagejpeg($im);
    imagedestroy($im);
} else {
    echo 'error.';
} 

?> 
```

**第2步。修改你的 getJson.php**

```
<?php
    include ("config.php");

    //Notice the change in query.
    $query = "SELECT id,title,text,date FROM posts";
    $result = mysql_query($query) or die(mysql_error());

    $num = mysql_num_rows($result);

    $rows = array();
    while ($r = mysql_fetch_assoc($result)){
        //Please replace below url with your real server url.
        $r['image'] = 'http://www.yourdomain.com/getImage.php?imageId=' . $r['id'];
        $rows[] = $r;
    }

    echo json_encode($rows);    
?> 
```

**Step3 - IOS端 - 显示图像**

图片 url 存在于您的响应数组中（我认为是 postsArray）。您只需将每行中的图像 url 视为普通图像！

笔记：

*   [GD 库](http://php.net/manual/en/intro.image.php)应该在 php.ini 中启用。
*   我们可以做更多的优化。但这种方法会奏效。

# wpf - 如何在 WPF 中使用 DelegateCommand 继续路由

> ID：14507668
> 
> 赞同：1
> 
> 时间：2013-01-24T17:56:25.960
> 
> 标签：wpf, command, icommand

当我尝试使用文本框时，我的应用程序中的 KeyBindings 正在窃取按键消息。例如：

```
<ribbon:RibbonWindow.InputBindings>
    <KeyBinding Command="{Binding Review.ReviewReviewedCommand}" CommandParameter="Key" Key="Space" />
    <KeyBinding Command="{Binding Review.ReviewLabelPrivilegedCommand}" CommandParameter="Key" Key="P" />
    <KeyBinding Command="{Binding Review.ReviewLabelRelevantCommand}" CommandParameter="Key" Key="R" />
    <KeyBinding Command="{Binding Review.ReviewLabelIrrelevantCommand}" CommandParameter="Key" Key="I" />
    <KeyBinding Command="{Binding Review.ReviewUnassignDocTypeCommand}" CommandParameter="Key" Key="U" />
</ribbon:RibbonWindow.InputBindings> 
```

使用的命令是带有 ICommand 接口的 DelegateCommands。

问题是 Keys P,R,I,U 不能传播到任何文本框。

有没有办法继续路由？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-01-09T14:41:27.513

只要你使用`KeyBinding`它就不会没有重大黑客攻击。我为此实施的解决方案是：

1.  使用该`KeyDown`事件来捕获那些被按下的键（而不是`KeyBindings`）。这将在您的代码隐藏中，从那里您需要打开按下的键以调用所需的`DataContext's`命令（`ReviewReviewedCommand`、`ReviewLabelPrivilegedCommand`等）。
2.  现在你有一个不同的问题。正在获取输入，`TextBox`但您的键绑定命令也在触发。在后面的代码中，检查类型`keyEventArgs.InputSource`并忽略击键，如果它是`TextBox`.

它应该如下所示：

```
private void OnKeyDown(object sender, KeyEventArgs e)
{
    ICommand command = null;

    switch (e.Key)
    {
        case Key.Space:
            command = ((YourDataContextType)DataContext).ReviewReviewedCommand;
            break;
        case Key.P:
            command = ((YourDataContextType)DataContext).ReviewLabelPrivilegedCommand;
            break;
    }

    bool isSourceATextBox = e.InputSource.GetType() == typeof(TextBox);
    if (command != null && !isSourceATextBox)
    {
        command.Execute(parameter:null);
    }
} 
```

# android - 为什么android构建系统不包括库项目中的R.class，我该如何解决这个问题？

> ID：14507671
> 
> 赞同：4
> 
> 时间：2013-01-24T17:56:30.907
> 
> 标签：android, r.java-file

在 Eclipse 中，我将一个 Android 应用程序项目转换为一个库项目。该库被其他应用程序项目使用。

该`R.java`文件是在库中生成的，但是当我签入该`.jar`文件时，它不存在。

在库中，该`R`文件位于一个包中：`com.library.R.java`. 在我拥有的应用程序中`com.app.R.java`。该库需要`R`从库中使用，并导入`com.library.R`，但没有找到。该`com.app.R`文件包括库和应用程序中的所有定义。

为什么 Android 构建系统不包含`R.class`在库项目中，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-25T23:56:05.590

你需要使用`getResources().getIdentifier()`

IE`getResources().getIdentifier("home", "id", "android.support.v7.appcompat")`

[http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29](http://developer.android.com/reference/android/content/res/Resources.html#getIdentifier%28java.lang.String,%20java.lang.String,%20java.lang.String%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-25T23:14:15.650

我不知道为什么，但这是预期的行为，请检查

[http://tools.android.com/recent/dealingwithdependenciesinandroidprojects](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)

> 重要更改：我们更改了 Library Projects 生成和打包 R 类的方式：R 类不再打包在 Library Projects 的 jar 输出中。图书馆项目不会为他们所依赖的图书馆项目生成 R 类。只有主应用程序项目会生成库 R 类以及它们自己的类。

有谁知道为什么会发生这种变化？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:47:48.617

我不确定我到底是如何解决这个问题的，但我尝试了很多事情，包括完全重建等。最终解决它的方法是删除库 R.java 然后重建。不知何故，这触发了将 com.library.R.java 添加到 app 项目的 gen 文件夹中，这似乎是一开始就应该发生的事情。

# javascript - 如何设置显示在 url 中的默认路径

> ID：14507672
> 
> 赞同：0
> 
> 时间：2013-01-24T17:56:30.987
> 
> 标签：javascript, jquery, html

如何更改网站上的 url 路径。

例如，当您开发网页时，您的地址如下：

```
www.example.com/index.html
www.example.com/about_us.html
www.example.com/en/index.html 
```

如何使它成为唯一

```
www.example.com 
```

在您访问的每个页面上...但是当您转到下一个文件夹时，它只需要显示文件夹名称而不是页面名称，例如：

```
www.example.com/en/ 
```

是否已经为此编写了任何脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:05:59.050

这只有通过ajax调用才可行

例如，如果我要点击主页按钮，

```
$('.home').click(function(){
$.get('ajax/test.html', function(data) {
  $('.maincontainer').html(data); //populate the main container with the html of the other file

});
}) 
```

这将保留正在更改的 url 表单，缺点是

1-如果我想给一些正文链接到您的主页，那么我不能

2-谷歌将无法抓取您的网站

现在我当他点击更改语言 (en)

然后我将在根文件夹中创建一个目录，然后当他单击它时，用户将被重定向到与上述相同的文件夹..

或者为了避免代码双重阳离子，我会将其显示为获取请求，如果设置了获取变量，那么您可以将数据源切换到适当的文件

# javascript - 将数组转换为树

> ID：14507676
> 
> 赞同：6
> 
> 时间：2013-01-24T17:56:37.483
> 
> 标签：javascript, arrays, tree

有人可以解释这段代码吗？我不明白“for”结构中的内容。

```
 var tree = {}

function addToTree(tree, array) { 
   for (var i = 0, length = array.length; i < length; i++) {
       tree = tree[array[i]] = tree[array[i]] || {}
   }
}

addToTree(tree, ["a", "b", "c"])
addToTree(tree, ["a", "b", "d"])

/*{
    "a": {
        "b": {
            "c": {},
            "d": {}
        }
    }
}*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:10:36.037

我扩展了`for`循环体并添加了一些注释，试图使事情更明确。

```
for (var i = 0, length = array.length; i < length; i++) {
   // Assign the current item in the array to a variable
   var current = array[i];

   // If there is no property on the "tree" object corresponding to the value of 
   // "current", set this property to a new object
   if (!tree[current]) {
      tree[current] = {};
   }

   // Set the "tree" variable to the field in the "tree" object whose 
   // name corresponds to "current". On the next loop iteration, "tree" will
   // refer to this "child" object, resulting in a tree-like object being
   // created as we iterate.
   tree = tree[current];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:10:43.853

`tree`在对函数内部的引用掩盖了具有相同名称的外部变量之前，这令人困惑。但是由于引用在 JavaScript 中的工作方式，它最终还是会修改外部变量。

这是它的作用，一步一步，只考虑第一次调用：

1.  `tree`使用（即）的引用`{}`并`["a", "b", "c"]`作为参数调用函数
2.  循环数组。
    1.  检查树中是否已经存在属性“a”；如果没有，就用价值创造它`{}`
    2.  完整的树现在看起来像`{ a : {} }`
    3.  现在考虑我们正在处理的树是`tree.a`（它是空的）
    4.  检查当前树中是否已经存在属性“b”；如果没有，就用价值创造它`{}`
    5.  完整的树现在看起来像`{ a : { b: {} } }`
    6.  现在考虑我们正在处理的树是`tree.a.b`（它是空的）
    7.  检查当前树中是否已经存在属性“c”；如果没有，就用价值创造它`{}`
    8.  完整的树现在看起来像`{ a : { b: { c: {} } } }`
    9.  现在考虑我们正在处理的树是`tree.a.b.c`（它是空的）
3.  功能结束

# jquery - 如何使用 jQuery 加载本地文件？（带文件：//）

> ID：14507677
> 
> 赞同：8
> 
> 时间：2013-01-24T17:56:44.647
> 
> 标签：jquery

有没有办法使用 jQuery 从数据文件（例如 JSON .js 文件）加载数据？

例如：

```
$.get("file:///C:/objectData.js", function() { alert('Load was performed.'); }); 
```

目前，JQuery 似乎没有执行简单的 HTTP GET，而是尝试对其执行 OPTIONS 请求，但在 file:// URI 上失败。我只想加载数据，以便可以在离线环境中使用该站点（未安装 Web 服务器）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T18:03:15.020

GET 需要 HTTP 连接，因此如果没有本地 Web 服务器，它将无法工作。虽然您可以使用 HTML5[打开和读取文件](https://stackoverflow.com/questions/10132018/html5-and-javascript-opening-and-reading-a-local-file-with-file-api)，但不能以这种方式加载 JavaScript 资源。

如果页面在本地加载，您通常会使用脚本标签加载 JS。

```
<script type='text/javascript' src='/objectData.js'></script> 
```

解决这个问题的唯一方法可能是这个答案：[是否可以加载 JavaScript 文件的本地版本而不是服务器版本？](https://stackoverflow.com/questions/5516359/is-it-possible-to-load-in-a-local-version-of-a-javascript-file-instead-of-the-se)

或者[这个](https://stackoverflow.com/questions/10452381/load-local-css-and-javascript-files-when-developing-live-when-pushed-to-server)（两者都需要制作本地伪服务器）：

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T11:17:57.723

我希望这是可能的。我试过了。Html 代码和文本文件位于同一文件夹中。

这是 jQuery 部分。

```
$(document).ready(function()
{
    $("select").change(function()
    {

        file_name = $("select").val();
        $('#span_result').load(file_name);
    });
}); 
```

Html 代码是

```
<select class="sel"  name="files">
    <option  value="">Select a file</option>
    <option  value="file.txt">file.txt</option>
    <option  value="file2.txt">file2.txt</option>
    <option  value="jQuery_file.html">jQuery_file.html</option>
    </select><br>
    <p>Contents of the file will be displayed below</p>
    <div id="span_result"></div> 
```

它在 Firefox 中对我有用。对不起，如果它失败了。

# javascript - javascript 语法 - 使用 jinja2 和谷歌应用引擎

> ID：14507680
> 
> 赞同：1
> 
> 时间：2013-01-24T17:56:49.067
> 
> 标签：javascript, google-app-engine, jinja2

我在我的 {% endfor %} 行中不断收到 Uncaught SyntaxError: Unexpected token ILLEGAL - 我在 Google 应用引擎 python 服务器代码中使用 jinja2，错误出现在我的一个 html 模板中：我正在尝试创建一个菜单显示子类别的类别取决于选择的父类别 - 我希望它滑动切换以显示子类别。我是 JS/Jquery 的新手。关于我的语法有什么问题的任何想法？

```
function create_first() {

    var first_level = "<div id='colOne'>";

    {% for each in by_subject_level1 %}
        first_level+= "{{each.name1}}<br />";
    {% endfor %}; 

    $(#filtered_courses).append(first_level);   

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:04:28.797

让我们看看..解决您的直接问题：

*   `$(#filtered_courses).append(first_level);`->`$("#filtered_courses").append(first_level);`
*   您不需要在 之后的分号`{% endfor %}`，但我很确定这不会导致任何问题
*   不要忘记关闭 first_level 内容，在将其附加到您的过滤课程 div 之前添加“</div>”

一个建议：字符串连接——meh（取决于`by_subject_level1`列表的大小）。而不是 +=，创建一个数组 ([])，推送您的内容，然后使用

IE

```
first_level = [];
first_level.push("{{each.name1}}");
html = "<div class='colOne'>" + first_level.join("<br/>") + "</div>"; // if you need <br/> before the div, add it 
```

# c# - 无法保存自定义集合用户设置

> ID：14507681
> 
> 赞同：2
> 
> 时间：2013-01-24T17:56:49.770
> 
> 标签：c#, .net

我是 C# 和 .Net 的新手，来自 C++ 世界。我正在通过为自己创建一个小应用程序来学习 C# WPF。

目前我需要创建一个集合用户设置。因为在那之后我希望能够将此集合绑定到列表框，所以我决定使用 ObservableCollection。

到目前为止，经过相当长的搜索，这里是我所拥有的：

```
public class ProfileStorage : ApplicationSettingsBase
  {
    public ProfileStorage()
    {
      this.UserProfiles = new ObservableCollection<UserProfile>();
    }

    [UserScopedSetting()]
    [SettingsSerializeAs(System.Configuration.SettingsSerializeAs.Binary)]
    [DefaultSettingValue("")]
    public ObservableCollection<UserProfile> UserProfiles
    {
      get
      {
        return (ObservableCollection<UserProfile>)this["UserProfiles"];
      }
      set
      {
        this["UserProfiles"] = value;
      }
    }
  }

  [Serializable]
  public class UserProfile
  {
    public String Name { get; set; }
  } 
```

我什至可以在设置设计器中浏览它并创建一个名为“ProfileStorage”的设置。这是在 settings.designer.cs 中自动创建的代码：

```
 [global::System.Configuration.UserScopedSettingAttribute()]
        [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
        public global::tick_time.ProfileStorage ProfileStorage {
            get {
                return ((global::tick_time.ProfileStorage)(this["ProfileStorage"]));
            }
            set {
                this["ProfileStorage"] = value;
            }
        } 
```

问题是我无法保存此设置！我使用以下代码进行检查。

```
if (null == Properties.Settings.Default.ProfileStorage)
  {
    Properties.Settings.Default.ProfileStorage = new ProfileStorage()
      {
        UserProfiles = new ObservableCollection<UserProfile>
          {
            new UserProfile{Name = "1"},
            new UserProfile{Name = "2"}
          }
      };
    Properties.Settings.Default.Save();
  }
} 
```

ProfileStorage 始终为 Null。

所以这是我的问题。经过一番搜索，我发现 Stackowerflow 上的一篇文章中描述了以下 hack。我需要手动更改settings.Designer.cs：

```
 [global::System.Configuration.UserScopedSettingAttribute()]
    [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
    public ObservableCollection<UserProfile> Profiles
    {
      get
      {
        return ((ObservableCollection<UserProfile>)(this["Profiles"]));
      }
      set
      {
        this["Profiles"] = value;
      }
    } 
```

这样设置“配置文件”可以正确保存和恢复。

但我不喜欢这个解决方案原因：

1.  这是一个黑客
2.  每次添加/删除设置时，settings.designer.cs 都会更改
3.  好吧，再次，这是一个黑客！

所以我想问题出在序列化的某个地方。但是 ObservableCollection 可以完美地序列化，正如我们在示例中看到的那样。

PS我也尝试`System.Collections.ObjectModel.ObservableCollection<tick_time.UserProfile>`在设置设计器中浏览（tick_time 是我的项目名称空间的名称），但我没有任何运气。

所以，我将不胜感激任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:48:22.413

经过更多搜索后，我能够想出更少的黑客解决方案。我使用了来自[http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/6f0a2b13-88a9-4fd8-b0fe-874944321e4a/](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/6f0a2b13-88a9-4fd8-b0fe-874944321e4a/)的想法（见最后一条评论）。

这个想法不是修改settings.Designer.cs，而是专门创建的另一个文件。自动生成`Settings`是部分的，所以我们可以在其他文件中完成它的定义。所以我只是制作了专门的文件来包含手动添加的属性！

它确实奏效了。

所以现在我会把它当作一个答案。

# debugging - 每个项目的 SBT 调试端口

> ID：14507688
> 
> 赞同：4
> 
> 时间：2013-01-24T17:57:14.550
> 
> 标签：debugging, scala, sbt

如何根据每个项目更改 SBT 调试端口？

我可以将调试 JVM 选项添加到环境变量`SBT_OPTS`

```
-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5005 
```

但这将适用于所有 SBT 实例，如果我想同时为两个单独的项目在调试中运行 SBT，我会收到此错误，因为该端口已在使用中：

```
ERROR: transport error 202: bind failed: Address already in use 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T17:57:14.550

通过自制软件修改 sbt 附带的 sbt 脚本，我制作了这个脚本，让您可以启动 sbt 并指定调试端口，如下所示：

```
sbt-debug 5005 
```

[https://gist.github.com/4625742](https://gist.github.com/4625742)

```
#!/bin/sh
test -f ~/.sbtconfig && . ~/.sbtconfig

SBT_LAUNCH=/usr/local/Cellar/sbt/0.12.1/libexec/sbt-launch.jar
# Take leading integer as debug port and not sbt args
DEBUG_PORT=$1
SBT_ARGS=`echo "$@" | grep -oE "[^0-9].*"`

exec java -Xmx512M -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=${DEBUG_PORT} ${SBT_OPTS} -jar $SBT_LAUNCH $SBT_ARGS 
```

# c - c程序使用反向指针

> ID：14507696
> 
> 赞同：-3
> 
> 时间：2013-01-24T17:57:32.997
> 
> 标签：c

为什么它不起作用？编译器说它返回的本地地址。任何帮助如何使它正确。我看到了其他反向字符串程序，但我没有发现任何问题。

```
#include<stdio.h>
#include<string.h>

char *reverse(char *str);

void main()
{
    char str[]="jamesbond";
    int len=strlen(str);
    char *ptr;
    ptr=reverse(str);
    printf("the reversed string is :%s",ptr);
}

char *reverse(char *str)
{ 
    int i,j;
    int len=strlen(str);
    char qtr[len];

    for( i=len-1;i<=0;i--)
    { 
        for( j=0;j<len-1;j++)
            qtr[j]=*(str+i);
    }
    return qtr;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:59:26.370

从函数返回堆栈变量（或数组）（此处`qtr`）是未定义的行为。它将被覆盖。

解决方案是`malloc()`返回数组并将其返回，然后`free()`在您完成使用它时返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:59:38.040

`qtr`是一个本地数组，并且您正在返回一个指向它的指针。你不能那样做。您需要分配动态内存并返回：

```
char *qtr = malloc(len + 1); 
```

请注意，您有时会需要`free()`此内存。或者，只需在原地进行反转：

```
char *start = str;
char *end = str + strlen(str) - 1;
char tmp;

while (start < end)
{
   tmp = *start;
   *start++ = *end;
   *end-- = tmp;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T17:59:58.077

qtr 正在堆栈上分配。一旦你的函数返回，内存就会超出范围。您可以将 qtr 声明为 static 作为解决方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T18:04:52.510

第一个 for 循环的条件必须更改为

```
i >= 0

for( i=len-1;i>=0;i--)
  { for( j=0;j<len-1;j++)
    qtr[j]=*(str+i);

   } 
```

而且由于您没有将指针传递给结果数组。

qtr 最好 malloc

```
qtr = malloc(sizeof(strlen(str)); 
```

还

```
 int len=strlen(str); 
```

在您的 main() 中是不需要的计算。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T18:33:55.943

我在某处找到了这段代码。看起来合法。如果你不想破坏你输入的字符串，只需深度复制指针（memcpy（））并将其插入。

```
char* strrev( char* s)
  {
  char  c;
  char* s0 = s - 1;
  char* s1 = s;

  /* Find the end of the string */
  while (*s1) ++s1;

  /* Reverse it */
  while (s1-- > ++s0)
    {
    c   = *s0;
    *s0 = *s1;
    *s1 =  c;
    }

  return s;
  } 
```

# haskell - 使用管道的 WriterP 编写一个简单的累加器

> ID：14507700
> 
> 赞同：4
> 
> 时间：2013-01-24T17:57:36.367
> 
> 标签：haskell, haskell-pipes

使用管道库，我想编写一个程序来从某个源读取数据并将其累积（例如，使用`Sum`）。最简单的方法是，

```
 import Control.Proxy as 
 import Data.Monoid (Sum)

 main = do
     let source = enumFromToS (0::Int) 5
     a <- runWriterT $ runProxy $ source >-> foldD Sum
     print a 
```

当然，虽然这适用于小源，但由于`WriterT`累加器的惰性，大输入会导致可怕的堆栈溢出。

值得庆幸的是，它似乎`pipes`预料到了这一点，为`WriterP`代理提供了严格的累加器。不幸的是，围绕这个代理的文档非常稀少。经过一番摸索（并简化了问题，而是为每个下游元素累积一个 1），我来到了这个程序，

```
import Control.Proxy
import Control.Proxy.Trans.Writer
import Data.Monoid (Sum)

main = do
    let source = enumFromToS (0::Int) 5
    a <- runProxy $ runWriterK $ source >-> \x->tell (Sum 1::Sum Int)
    print a 
```

当然，这个程序甚至没有正确执行简化的任务，因为它累积到 1 而不是 6。如果我没记错的话，这种行为可以通过管道在终止之前只读取一个元素这一事实来解释。重复直到输入结束，我想出了以下内容，

```
import Control.Proxy
import Control.Proxy.Trans.Writer
import Data.Monoid (Sum)

main = do
    let source = enumFromToS (0::Int) 5
    a <- runProxy $ runWriterK $ source >-> fold Sum
    print a

fold :: (Monad m, Proxy p, Monoid w) => (a -> w) -> a' -> WriterP w p a' a a' a m r
fold f = go
  where go x = do a <- request x
                  tell $ f a
                  x' <- respond a
                  go x' 
```

但是，此代码返回的累加器为 0。这是为什么呢？有没有像我`fold`提供的功能`pipes`？

鉴于 for 的许多用例`pipes`是处理大型数据集的长时间运行的流程，`Control.Proxy.Prelude`围绕严格`WriterP`而不是`WriterT`. 目前感觉中的代理转换`pipes`器是二等公民，存在但缺少许多`WriterT`如此方便的组合器。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-06T07:07:43.953

我正在添加一个新答案，因为我已经在 中解决了这个问题`pipes-3.3`，我刚刚将它上传到 Hackage。管道背后的理论表明，您所期望的全局行为一直都是正确的行为，`WriterP`现在全局行为，因此您可以在管道内折叠。

我已经修改了您的示例，以显示您将使用以下方法实现它`pipes-3.3`：

```
import Control.Proxy
import Control.Proxy.Trans.Writer

main = do
    let source = enumFromToS (0::Int) 5
    a <- runProxy $ execWriterK $ source >-> sumD
    print a 
```

您现在还可以检索管道中折叠的结果。例如，这是完全有效的：

```
chunksOf :: (Monad m, Proxy p) => Int -> () -> Pipe p a [a] m r
chunksOf n () = runIdentityP $ forever $ do
    -- The unitU discards the values that 'toListD' reforwards
    as <- execWriterK (takeB_ n >-> toListD >-> unitU) ()
    respond as 
```

这是一个示例用法：

```
>>> runProxy $ getLineS >-> takeWhileD (/= "quit") >-> chunksOf 3 >-> printD
1<Enter>
2<Enter>
3<Enter>
["1","2","3"]
4<Enter>
5<Enter>
6<Enter>
["4","5","6"]
quit 
```

抱歉第一次回答错了！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T19:39:08.103

请记住，代理转换器在本地运行，而基本单子在全局运行。这意味着让`WriterP`每个代理维护自己的累加器，并且首先终止的代理确定返回哪个累加器。累加器返回的原因`0`是因为您的枚举管道首先返回并且它没有累积任何东西。

折叠是严格的`WriterP`，只是因为我可以控制该类型（而不是 in 中的那个`transformers`）。我从来没有打算让它成为代理前奏中懒惰折叠的严格替代品。正确的严格替代使用是`foldlD'`.

请注意，这`foldlD' mappend`基本上是一个严格的`Writer`折叠，特别是如果您使用作为初始状态运行基本`State`monad 。`mempty`

在您的情况下，您可以更轻松地使用：

```
main = do
    let source = enumFromToS (0::Int) 5
    a <- (`runStateT` 0) $ runProxy $ source >-> foldlD' (+)
    print a 
```

这将严格折叠输入。

# macos - 支持 github 风格降价的 OS X 上 github jekyll 的推荐设置

> ID：14507701
> 
> 赞同：2
> 
> 时间：2013-01-24T17:57:43.980
> 
> 标签：macos, github, jekyll, redcarpet

我已经安装了[Jekyll-Bootstrap](http://jekyllbootstrap.com/)、[redcarpet 插件](https://github.com/nono/Jekyll-plugins)，并且我尝试将我的 Ruby 更新到最新的[RVM stable](https://rvm.io/)。我正在运行 OS X Mountain Lion (10.8.2)。

使用此设置，如果我使用标准语法（缩进 4 个空格）或 github 语法突出显示（```）插入代码块注释，我最终会得到 Jekyll 没有错误和一个空的 html 文件（0 字节）。将其推送到 github 会产生非常有用的错误：

> 页面构建失败，出现以下错误：
> 
> 页面构建失败

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:11:42.187

我注意到您正在使用 Pygments 进行突出显示。虽然它是 GitHub 大力推动的，但我在[**Coderay**](http://svnpenn.github.com/2013/coderay)上的运气要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T05:52:54.397

octopress 中突出显示的代码很棒。我建议要么尝试 octopress，要么获取相关插件并将它们添加到您的 jekyll 站点。

*   [代码块](https://github.com/imathis/octopress/blob/master/plugins/code_block.rb)
*   [反引号代码块](https://github.com/imathis/octopress/blob/master/plugins/backtick_code_block.rb)
*   [pygments_code](https://github.com/imathis/octopress/blob/master/plugins/pygments_code.rb)
*   [生的](https://github.com/imathis/octopress/blob/master/plugins/raw.rb)

然后你需要一些[css](https://github.com/imathis/octopress/blob/master/.themes/classic/sass/partials/_syntax.scss)。

# ruby-on-rails - 如何编写删除重复项的迁移？

> ID：14507702
> 
> 赞同：1
> 
> 时间：2013-01-24T17:57:47.850
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, migration

我有以下输出：

```
> group.items
=> [<Item id: 1, user_id: 7, group_id: 1>,<Item id: 2, user_id: 7, group_id: 1>,
    <Item id: 1, user_id: 2, group_id: 1>,<Item id: 2, user_id: 2, group_id: 1>,<Item id: 3, user_id: 2, group_id: 1>,
    <Item id: 4, user_id: 5, group_id: 1>] 
```

如何删除所有重复项并仅保留一个 user2 项目。

**目标**

```
> group.items
=> [<Item id: 1, user_id: 7, group_id: 1>,
    <Item id: 1, user_id: 2, group_id: 1>,
    <Item id: 4, user_id: 5, group_id: 1>] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:47:49.930

编辑

我想，我首先误解了你的问题。您只需要每个用户一个项目 - 对吗？

我假设您在用户模型中定义了一个用户有很多项目，那么以下应该可以工作：

```
old_items = group.items
group.items.delete_all
old_items.users.each do |user|
  group << user.items.first
end
group.save 
```

否则，如果您只想要一个唯一列表，则以下内容就足够了：

```
group.items = group.items.uniq 
```

# sql-server - 什么 SQL Server 登录用于 SQL Server 身份验证？

> ID：14507704
> 
> 赞同：1
> 
> 时间：2013-01-24T17:57:49.830
> 
> 标签：sql-server, database, security

我试图通过指定`Integrated Security=No`然后指定用户和密码的连接字符串以代码形式确定在连接到 SQL Server 时使用了什么 SQL Server 登录。

请注意，我不是指我指定的用户（我当然知道），而是用户映射到的登录名。我刚刚在阅读有关 SQL Server 中的登录名与用户的信息，有一点很重要，那就是您总是，总是，总是需要登录才能连接，然后每个数据库都有一个用户需要登录才能访问。所以我在 SSMS 中查找映射到我总是在我关心的数据库上指定的用户的登录名，但我看不到这样的登录名。

仅供参考，我问的原因是我需要为此数据库许可一个新的旧应用程序，并且该应用程序被编码为使用 SQL Server 身份验证。我正在尝试确定是否只需要必要数据库上的用户，或者是否需要创建登录名。但现在我对一般问题本身感到好奇。

编辑 - syslogins 的快速查询仅显示 2 个登录。因此，我认为 SQLS 维护微不足道的“每个用户 1 个”登录但 SSMS 隐藏它们的理论似乎并非如此

编辑 - 查询 syslogins 或 sys.server_principals 似乎具有误导性。在我有 2 个不同的工作 SQLS（不是 Win）登录名的数据库上，我分别登录并从 sys.server_principals 中选择 *。两个不同的答案：每次我得到 sa 和我登录的登录名。我不会看到“其他”登录，尽管它显然在那里。我猜这可能与模式有关，我对此也知之甚少。无论如何，我猜测一般来说，所有用户实际上都存在登录名，尽管当我以任何一个登录名连接到 SSMS 时，我不会看到所有这些登录名。这听起来对吗？

**解决了（有点）** 在我有 sa 的数据库上玩耍，很明显，如果你是 sa，SSMS 只会向你显示所有登录信息，或者可能有特定的权限。否则，您的登录视图将受到限制。因此，关于为什么我没有看到预期的登录信息，这并不神秘。显然 SSMS 隐藏了它们。我说“有点”和“显然”是因为我从来没有遇到过任何记录这一点的东西。这只是一个观察。

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T18:07:01.943

除非您连接到包含的数据库，否则它是服务器级登录。如果您的意思是服务器级登录映射到的数据库用户，您可以使用：

```
SELECT u.name 
FROM sys.server_principals AS l
INNER JOIN sys.database_principals AS u
ON l.sid = u.sid
WHERE l.name = 'user id in your connection string'; 
```

如果您不使用包含的数据库，这就是您将如何配置您的用户：

```
USE master;
GO
CREATE LOGIN your_login_name 
  WITH PASSWORD = 'f00b@r!', CHECK_POLICY = OFF;
GO
USE your_database;
GO
CREATE USER your_login_name -- doesn't have to match, but should for sanity
  FROM LOGIN [your_login_name];
GO
-- then apply permissions of course. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:24:13.947

通常登录映射到数据库用户

因此，例如，如果在某些不幸的情况下，应用程序期望数据库所有者访问

您将在服务器上创建此登录名（如果尚未登录），然后将其映射到相关数据库中的 dbo 用户。

如果它不是内置用户，那么您将不得不查看这个遗留应用程序已经可以访问的数据库，找出它映射到的用户在您的新数据库上创建该用户，设置所需的权限角色等然后映射登录它。

sql server版本有一些细微差别，很难一步一步做

如果应用程序登录映射到的用户是自定义用户，那么您将不得不在新数据库中找出一个等价物。虽然不必具有相同的名称（除非应用程序正在使用该名称），它甚至可以拥有更多权限。

# extjs - Sencha Touch 2 模型转换函数在重新加载商店时未调用

> ID：14507706
> 
> 赞同：2
> 
> 时间：2013-01-24T17:57:56.913
> 
> 标签：extjs, sencha-touch, sencha-touch-2, sencha-touch-2.1

我有一个从商店读取的列表，该商店的模型在字段上具有转换功能。convert 函数返回一个值，我用它来控制列表中出现的内容。这在我第一次加载商店时工作正常。下次我通过在商店的代理上设置 extraParams 来加载商店时，它不会通过模型上的转换函数运行，因此我无法更新列表中的显示。

我可以做些什么来确保每次加载商店时都会调用模型的转换函数？

谢谢你的帮助

示例转换函数：

```
 {
          name: 'myDisplayField',
          type: 'string',
          convert: function (value, record) {
                if (value == null) {
                      var req = record.get('otherField');
                    if (req == "valueString") {
                        value = 1;
                    }
                    else {
                        value = 0;
                    }
                        }
                        return value;
                    }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:45:20.673

您可能可以`refresh`为您的商店使用事件侦听器，并在每次商店重新加载时调用您的函数。[http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Store-event-refresh](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Store-event-refresh)

# wcf - 如何为 Windows 8 商店应用程序部署 Intranet WCF 服务

> ID：14507707
> 
> 赞同：0
> 
> 时间：2013-01-24T17:58:00.330
> 
> 标签：wcf, deployment, windows-8, windows-store-apps

我们正在开发与 WCF 服务一起使用的桌面 Windows 8 应用程序。我们希望在本地网络中启用 Azure WCF 服务和 WCF 服务（可选择）。应用程序将在 Windows 应用商店中发布。在公司的本地服务器上部署 WCF 服务的最佳做法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T19:10:18.710

我明白你想要什么。让我们假设 Azure 部分不是一个选项。Windows 应用商店应用程序如何使用本地服务（WCF 与否）？这是根本问题。

这是答案：

1.  首先，Windows 应用商店应用程序无法访问 Intranet 服务，除非它在其清单中声明了专用网络访问权限。它看起来像这样：

![在此处输入图像描述](../Images/072f56f69af2dc8b11013c5d2987e297.png)

2.  其次，为了在清单中使用私有网络**并被**Windows 应用商店接受，您必须是公司发布者而不是个人。在这个 SO 问题中讨论了更多关于此的内容：[公司商店帐户允许哪些功能而不是个人？](https://stackoverflow.com/questions/13035869/which-features-are-allowed-for-company-store-accounts-and-not-individual)

3.  第三，不能将本地服务误认为是*localhost*。为此， Windows 应用商店应用程序无法使用*localhost*，除非它们是侧面加载的（这意味着它们是手动安装的，根本不通过 Windows 应用商店交付）。要访问*localhost*，您可以启用环回，但是，正如我所说，这会使您失去 Windows 应用商店的资格。这里还有更多内容：[Windows 8 Loop Back 如何工作？](https://stackoverflow.com/questions/13770863/how-does-windows-8-loop-back-work)

4.  第四，因为您正在谈论一项服务，您可能想要对用户进行身份验证。这是使用企业身份验证完成的（就像在数字 1 中一样）只有几个复选框高。它具有与专用网络相同的限制。

5.  第五，您不是在问这个问题，但要明确一点，本地访问并不意味着您可以与本地 SQL 服务器对话。这是因为 SQL 命名空间不是 WinRT 或 WinRT 的 .Net 的一部分。Windows 应用商店应用旨在成为基于服务的应用。

而且，就是这样。如果你遵循这一点，我认为你很好。

听起来您不是在谈论纯粹的企业游戏，但您可能会感兴趣阅读一些企业开发人员的策略：http: [//blog.jerrynixon.com/2012/08/windows- 8-apps-whats-enterprise-to-do.html](http://blog.jerrynixon.com/2012/08/windows-8-apps-whats-enterprise-to-do.html)

**至于部署 WCF，没有什么特别的，因为一个 Windows Store App 正在访问它。因此，对于部署，只需使用您已经在使用的普通技术。：） 就是这样。**

祝你好运！

# javascript - Javascript：只运行一次 setInterval

> ID：14507718
> 
> 赞同：14
> 
> 时间：2013-01-24T17:58:26.633
> 
> 标签：javascript, html, iframe, setinterval

> **可能重复：**
> [setInterval - 如何只触发一次？](https://stackoverflow.com/questions/9741837/setinterval-how-to-fire-only-once)

我只想运行以下代码一次，因此 2 秒后它会更改 iframe 的 src，但不会一次又一次地尝试这样做。

```
<script type="text/javascript">
    setInterval(function () {document.getElementById('iframe').src = "http://www.y.com";}, 2000);
    </script> 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-24T17:59:04.590

您正在寻找`setTimeout()`，它正是这样做的。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-24T18:09:27.487

是的...

```
window.setTimeout(function(){
        // code to run after 5 seconds...
}, 5000); 
```

或将您的方法带到外部环境

```
function myMethod(){
    // code to run after 5 seconds...
};

window.setTimeout(myMethod, 5000); 
```

如果您有一个不打算仅在超时后执行的方法，则后者很有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T18:00:45.767

使用[setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)，您可以在 Mozilla 站点中查看更多详细信息。

# css - 如何防止父 div 与其孩子一起成长？

> ID：14507724
> 
> 赞同：4
> 
> 时间：2013-01-24T17:59:22.483
> 
> 标签：css, position

我有一个 a 的`ul`内部`div`，并且希望包含在高度方面`div`不受孩子的影响。`ul`

jsfiddle：http: [//jsfiddle.net/9eCq6/3/](http://jsfiddle.net/9eCq6/3/)

参考 jsfiddle，我希望黄色`div`不比蓝色高`divs`，并且颜色下方的文本块`divs`不会被红色推下`ul`- 也就是说，我希望它与块重叠下面的文字。

我怀疑答案在于定位，并受到所应用的浮动的影响，但我还没有找到解决方案。我应该怎么做或阅读才能找到解决方案？

编辑：我不想给父母一个固定的高度，因为我不知道可能会添加什么内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T18:08:56.117

使用绝对定位脱离父级。您还需要`overflow: visible`一个clearfix：

```
.wrap {
    position: relative;
    overflow: visible;
}

.wrap::after {
    content: "";
    display: table;
    clear: both;
}

.right {
    position: absolute;
    top: 0;
    right: 0;
}

.right ul {
    position: absolute;
    top: 100%;
    left: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:28:52.737

[这篇旧的 BrainJar 文章](http://www.brainjar.com/css/positioning/)是一篇关于 CSS 定位的优秀、详尽的参考资料。它绝对过时了，但保存得非常好。如果您首先花时间深入了解您正在处理的底层系统，那么您遇到这类问题的频率就会*大大降低。*

也就是说，您的问题的（部分）解决方案很简单。把`div.under`里面的`div.wrap`, 添加`clear: left;`到 CSS`.under`选择器中。看到[这个小提琴](http://jsfiddle.net/yYYp6/)。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-24T18:08:43.603

给父级固定大小，并使用`overflow:hidden`.

# java - 如何确保字段在编译时实现接口

> ID：14507732
> 
> 赞同：2
> 
> 时间：2013-01-24T17:59:45.527
> 
> 标签：java, generics, reflection

[我正在根据Generic Comparator](http://www.myjeeva.com/2012/04/generic-comparator-in-java/)上显示的示例构建一个用作通用比较器的 java 类。我为比较器构建的构造函数如下：

```
public GenericComparator(java.lang.reflect.Field sortField, boolean ascending){
        ....   } 
```

虽然上面的构造函数允许我获取排序字段，但编译器无法知道该字段是否正在实现`Comparable`接口，并且调用构造函数的开发人员可能会传递一个未实现`Comparable`接口的字段。

我想知道是否有办法使它成为编译时错误，而不是在运行时使用 instanceof 检查来处理它，以确保该字段已实现接口。

`Collections.sort(...)`在Type 声明中找到了类似的实现。

```
public static <T extends Comparable<? super T>> void sort(List<T> list) {
    ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:02:55.457

```
Comparable.isAssignableFrom(field.getType()) 
```

在运行时执行此操作，但根本无法使其成为编译时错误。字段在编译时不（也不能，真的）携带它们的类型信息——它们是运行时对象，可以在运行时选择。例如，如果你有

```
random.nextBoolean() ? Foo.class.getField("bar") : Foo.class.getField("baz") 
```

那么没有编译器，无论多么聪明，都可以在编译时告诉结果字段将具有什么类型。

# xml - Magento 数据库 IP 被缓存

> ID：14507736
> 
> 赞同：5
> 
> 时间：2013-01-24T17:59:58.023
> 
> 标签：xml, magento, caching

我们的开发和生产环境有不同的数据库 IP 地址。我们的开发环境在我们的开发人员机器上本地运行，并指向我们本地网络上的单个开发数据库服务器。我们的生产环境使用托管在 RackSpace 上的数据库，并托管在他们的本地网络上。不知何故，我们的开发 IP 地址似乎已在生产环境中被缓存。这是我到目前为止所做的：

*   验证生产上app/etc/local.xml中的IP地址是否正确。
*   删除了 var/cache/* 和 var/full_page_cache/* 的内容
*   重新启动我们的 memcached 服务器以清除那里的任何奇怪缓存
*   grep了我们整个代码库的开发IP地址
*   转储 mysql 数据库并为开发 IP 转储（我们绝望了）
*   删除了 /tmp 的内容
*   禁用自定义模块

这已经工作了数周没有问题。当我禁用配置缓存时，问题就开始了。我知道你在想什么，它刚刚终于获得了自上次清除缓存以来某人所做的配置更改。这就说得通了。没有意义的是我已经清除了上面提到的每个缓存，[使用 MageTool 启用了配置缓存](https://github.com/alistairstead/MageTool)，一切都像一个魅力。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T17:59:58.023

事实证明，修复整个事情是一个两步过程。

因为我们的生产和开发环境需要不同的 IP ，所以`app/etc/local.xml`没有跟踪，而是我们跟踪`app/etc/local-example.xml`，以便我们所有的开发人员可以快速轻松地将其复制到`app/etc/local.xml`并启动和运行。这已成为一种公司标准，我们在所有其他项目中都使用它。幸运的是，我的一位同事发现[Magento 将所有 xml 文件加载到`app/etc/`.](https://stackoverflow.com/questions/11515237/magento-cache-not-get-clear#comment15235264_11516317)

所以，不，我们的开发 IP 并没有神奇地缓存在某个疯狂的模糊位置，我们只是无意中加载了它。将该文件重命名为它后，`app/etc/local.xml.example`它停止引用我们的开发 IP。耶！

现在，这与问题没有直接关系，但因为解决方案引入了一个新错误，我想提一下。一旦我们重命名了 xml 文件并清除了所有缓存，我们开始看到一个新错误。

`PHP Fatal error: Call to a member function setQueryHook() on a non-object in app/code/core/Mage/Core/Model/Resource/Setup.php on line 347`

在我们的示例文件中，我们在单个`<default_setup />`节点内定义了我们的数据库资源。对于我们的生产环境，我们实际上有[一个 Triple-m 设置](http://mysql-mmm.org/)，具有用于读取和写入查询的单独 IP，因此用于生产而不是我们拥有的单个`<default_setup />`节点`<default_read />`和`<default_write />`节点。我一直无法找到关于资源中允许和要求的确切内容的文档，但读/写拆分是根据[另一篇关于该主题的 StackOverflow 帖子中的说明](https://stackoverflow.com/a/8972193/488663)设置的，直到今天，效果都很好。

凭直觉，我将`<default_write />`节点重命名为`<default_setup />`，一切都神奇地重新开始工作。我还不确定读写是否正确拆分，但是一旦我确认一切正常，我会更新这个答案。

# jquery - 每 5 秒对事件做出一次反应

> ID：14507740
> 
> 赞同：4
> 
> 时间：2013-01-24T18:00:07.460
> 
> 标签：jquery

我正在尝试使用`setInterval()`并单击运行功能。当我单击时，我希望`somefunction()`每五秒钟只运行一次该功能。

这是我的代码：

```
function somefunction(){ // do something }

setInterval(function(){
  $('#division').one("click",function(){
    somefunction();
  });
}, 5000); 
```

这里的问题是，事件`setInterval()`正在排队并在 30 秒后说出函数`somefunction()`；最多运行 6 次（6 次点击）。

但我希望它只运行一次并等待接下来的 5 秒。

我试过了，`.stop()`虽然没有任何效果。`.dequeue()``.clearqueue()`

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T18:03:37.640

忽略不到 5 秒前的每一次点击怎么样？

```
function somefunction() { /* do something */ }

$('#division').on("click", function () {
  var lastClicked = $(this).data("lastClicked") || 0;

  if (new Date() - lastClicked >= 5000) {
    $(this).data("lastClicked", new Date());
    somefunction();
  }
}); 
```

或者，根据最后一次安排点击，只要安排了一个动作，就忽略所有点击：

```
function somefunction() { /* do something */ }

$('#division').on("click", function () {
  var $this = $(this),
      lastClicked = $this.data("lastClicked") || 0,
      isScheduled = $this.is(".scheduled");

  if (!isScheduled) {
    $this.addClass("scheduled");
    setTimeout(function () {
      somefunction()
      $this.removeClass("scheduled").data("lastClicked", new Date());
    }, Math.max(0, 5000 - (new Date() - lastClicked)));
  }
}); 
```

见：http: [//jsfiddle.net/Tomalak/ZXfMQ/1/](http://jsfiddle.net/Tomalak/ZXfMQ/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T18:59:56.820

如果您可以使用[underscore.js](http://underscorejs.org/)，那么我建议使用它的[`debounce`](http://underscorejs.org/#debounce)功能：

```
$('#division').on('click', _.debounce(someFunction, 5000, true)); 
```

另外，这里[有一篇关于去抖动如何工作的优秀文章](http://unscriptable.com/2009/03/20/debouncing-javascript-methods/)。

如果你*想*滚动你自己的去抖动，它就像这样简单：

```
$('#division').on('click', (function(func, wait, immediate) {
    var timeout,
        result;
    return function() {
        var self,
            args,
            callNow;
        function later () {
            timeout = null;
            if (!immediate) result = func.apply(self, args);
        }
        self = this;
        args = arguments;
        callNow = immediate && !timeout;
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
        if (callNow) {
            result = func.apply(self, args);
        }
        return result;
    };
}(someFunction, 5000, true)))); 
```

...开个玩笑，这只是 underscore 的 debounce 函数内联。

# java - 在 Mac 上安装 Jmagick-6.6.9 没有生成 .dylib

> ID：14507743
> 
> 赞同：1
> 
> 时间：2013-01-24T18:00:09.370
> 
> 标签：java, makefile, imagemagick, jmagick

我正在努力在依赖于 Jmagick（和 ImageMagick）的 OSX 10.8（Mountain Lion）上安装现有的 Java 应用程序。当我构建 Jmagick 6.6.9 时，它成功生成了 .so，但不生成 .dylib 文件。知道为什么会这样吗？这是 config 和 make install 的输出。

```
> ./configure --prefix=/Users/mr/m4/support/jmagick/darwin/current --with-magick-home=/usr/local/Cellar/imagemagick
checking build system type... i686-apple-darwin12.2.0
checking host system type... i686-apple-darwin12.2.0
checking target system type... i686-apple-darwin12.2.0
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking how to run the C preprocessor... gcc -E
checking for a BSD-compatible install... /usr/bin/install -c
checking for getconf... /usr/bin/getconf
checking whether large file support needs explicit enabling... no
checking for X... libraries /usr/X11/lib, headers /usr/X11/include
checking for grep that handles long lines and -e... /usr/bin/grep
checking for egrep... /usr/bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking jni.h usability... yes
checking jni.h presence... yes
checking for jni.h... yes
checking for java... /Users/mr/m4/support/java/darwin/current/bin/java
checking for javac... /Users/mr/m4/support/java/darwin/current/bin/javac
checking for javah... /Users/mr/m4/support/java/darwin/current/bin/javah
checking for jar... /Users/mr/m4/support/java/darwin/current/bin/jar
checking for javadoc... /Users/mr/m4/support/java/darwin/current/bin/javadoc
checking for MagickCore-config... /usr/local/bin/MagickCore-config
checking magick/api.h usability... yes
checking magick/api.h presence... yes
checking for magick/api.h... yes
checking for ConstituteImage in -lMagick... no
checking for a sed that does not truncate output... /usr/bin/sed
checking for ld used by gcc... /usr/llvm-gcc-4.2/libexec/gcc/i686-apple-darwin11/4.2.1/ld
checking if the linker (/usr/llvm-gcc-4.2/libexec/gcc/i686-apple-darwin11/4.2.1/ld) is GNU ld... no
checking for /usr/llvm-gcc-4.2/libexec/gcc/i686-apple-darwin11/4.2.1/ld option to reload object files... -r
checking for BSD-compatible nm... /usr/bin/nm
checking whether ln -s works... yes
checking how to recognise dependent libraries... pass_all
checking dlfcn.h usability... yes
checking dlfcn.h presence... yes
checking for dlfcn.h... yes
checking for g++... g++
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking how to run the C++ preprocessor... g++ -E
checking for g77... no
checking for xlf... no
checking for f77... no
checking for frt... no
checking for pgf77... no
checking for cf77... no
checking for fort77... no
checking for fl32... no
checking for af77... no
checking for xlf90... no
checking for f90... no
checking for pgf90... no
checking for pghpf... no
checking for epcf90... no
checking for gfortran... no
checking for g95... no
checking for xlf95... no
checking for f95... no
checking for fort... no
checking for ifort... no
checking for ifc... no
checking for efc... no
checking for pgfortran... no
checking for pgf95... no
checking for lf95... no
checking for ftn... no
checking for nagfor... no
checking whether we are using the GNU Fortran 77 compiler... no
checking whether  accepts -g... no
checking the maximum length of command line arguments... 196608
checking command to parse /usr/bin/nm output from gcc object... ok
checking for objdir... .libs
checking for ar... ar
checking for ranlib... ranlib
checking for strip... strip
checking if gcc static flag  works... yes
checking if gcc supports -fno-rtti -fno-exceptions... no
checking for gcc option to produce PIC... -fno-common
checking if gcc PIC flag -fno-common works... yes
checking if gcc supports -c -o file.o... yes
checking whether the gcc linker (/usr/llvm-gcc-4.2/libexec/gcc/i686-apple-darwin11/4.2.1/ld) supports shared libraries... yes
checking dynamic linker characteristics... darwin12.2.0 dyld
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... no
configure: creating libtool
appending configuration tag "CXX" to libtool
rm: conftest.dSYM: is a directory
checking for ld used by g++... /usr/llvm-gcc-4.2/libexec/gcc/i686-apple-darwin11/4.2.1/ld
checking if the linker (/usr/llvm-gcc-4.2/libexec/gcc/i686-apple-darwin11/4.2.1/ld) is GNU ld... no
checking whether the g++ linker (/usr/llvm-gcc-4.2/libexec/gcc/i686-apple-darwin11/4.2.1/ld) supports shared libraries... yes
checking for g++ option to produce PIC... -fno-common
checking if g++ PIC flag -fno-common works... rm: conftest.dSYM: is a directory
yes
checking if g++ supports -c -o file.o... rm: conftest.dSYM: is a directory
yes
checking whether the g++ linker (/usr/llvm-gcc-4.2/libexec/gcc/i686-apple-darwin11/4.2.1/ld) supports shared libraries... yes
checking dynamic linker characteristics... darwin12.2.0 dyld
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
appending configuration tag "F77" to libtool
configure: creating ./config.status
config.status: creating Make.def 
```

并进行安装

```
> make install
/usr/bin/install -c -d /Users/mr/m4/support/jmagick/darwin/current/lib
/usr/bin/install -c /Users/mr/m4/support/jmagick/trunk/lib/jmagick-6.6.9.jar /Users/mr/m4/support/jmagick/darwin/current/lib
Installing /Users/mr/m4/support/jmagick/trunk ...
make[1]: Entering directory `/Users/mr/m4/support/jmagick/trunk/src'
Installing /Users/mr/m4/support/jmagick/trunk/src ...
make[2]: Entering directory `/Users/mr/m4/support/jmagick/trunk/src/magick'
/usr/bin/install -c -d /Users/mr/m4/support/jmagick/darwin/current/lib
/bin/sh /Users/mr/m4/support/jmagick/trunk/libtool --mode=install /usr/bin/install -c /Users/mr/m4/support/jmagick/trunk/lib/libJMagick-6.6.9.so /Users/mr/m4/support/jmagick/darwin/current/lib
/usr/bin/install -c /Users/mr/m4/support/jmagick/trunk/lib/libJMagick-6.6.9.so /Users/mr/m4/support/jmagick/darwin/current/lib/libJMagick-6.6.9.so
Installing /Users/mr/m4/support/jmagick/trunk/src/magick ...
make[3]: Entering directory `/Users/mr/m4/support/jmagick/trunk/src/magick/util'
Installing /Users/mr/m4/support/jmagick/trunk/src/magick/util ...
make[3]: Leaving directory `/Users/mr/m4/support/jmagick/trunk/src/magick/util'
Using install_name_tool...
make[2]: Leaving directory `/Users/mr/m4/support/jmagick/trunk/src/magick'
make[1]: Leaving directory `/Users/mr/m4/support/jmagick/trunk/src' 
```

输出文件：

```
> pwd
/Users/mr/m4/support/jmagick/darwin/current
> ls -AR
lib

./lib:
jmagick-6.6.9.jar   libJMagick-6.6.9.so libJMagick.so 
```

Imagemagic6.6.9-10 是使用 Homebrew 安装的：

```
> brew info imagemagick
imagemagick: stable 6.6.9-10, HEAD
http://www.imagemagick.org
Depends on: jpeg, libtiff, little-cms, jasper
/usr/local/Cellar/imagemagick/6.6.9-10 (1394 files, 32M) *
https://github.com/mxcl/homebrew/commits/master/Library/Formula/imagemagick.rb 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-17T12:33:13.160

您还应该这样做： sudo ln -s /Path/to/libJMagick.so /Path/to/Java/Extensions/libJMagick.dylib 与 libJMagick-6.6.9.so 相同 将其添加到您的项目并尝试运行.

# python - 在 Python 中解析和重新排序单元格内容

> ID：14507749
> 
> 赞同：0
> 
> 时间：2013-01-24T18:00:20.003
> 
> 标签：python, parsing

新手问题总数：

我有一个 excel 文件，想从列中的单元格中获取单独的两个字母首字母缩写词。

看起来像

**Cake_Flavour**

FB&MS yt/id

纽约&cd

我想做的是能够将每个首字母缩略词的内容分成一个列表或python中的任何结构，或者只是在不同的列中替换它们

所以最后我会有

1 脸书

2 毫秒纽约

3 年光盘

4 身份证

我已阅读文档，但由于无法摆脱 & 和 / 或 eve 来拆分不同的首字母缩写词，因此我被 unicode 解析困住了。

任何提示？请？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:00:33.263

使用正则表达式拆分长度为 2 或以上的所有单词。然后过滤掉长于两个字母的那些。

```
>>> import re
>>> s = u'fb&ms yt/id a bc def ghij'
>>> t = re.findall(ur'[a-zA-Z]{2,}', s)
>>> t
[u'fb', u'ms', u'yt', u'id', u'bc', u'def', u'ghij']
>>> [x for x in t if len(x) == 2]
[u'fb', u'ms', u'yt', u'id', u'bc']
>>> 
```

如何转置片段：

```
>>> row1 = [u'fb', u'ms', u'yt', u'id']
>>> row2 = [u'ju', u'ny', u'id']
>>> zip(row1, row2)
[(u'fb', u'ju'), (u'ms', u'ny'), (u'yt', u'id')] # wrong, missing tail
>>> import itertools
>>> list(itertools.izip_longest(row1, row2))
[(u'fb', u'ju'), (u'ms', u'ny'), (u'yt', u'id'), (u'id', None)]
>>> 
```

假设行数可变：

```
>>> rows = [[u'fb', u'ms', u'yt', u'id'], [u'ju', u'ny', u'id']]
>>> list(itertools.izip_longest(*rows))
[(u'fb', u'ju'), (u'ms', u'ny'), (u'yt', u'id'), (u'id', None)]
>>> 
```

# asp.net-mvc - MVC 中页面之间的会话状态

> ID：14507750
> 
> 赞同：0
> 
> 时间：2013-01-24T18:00:21.830
> 
> 标签：asp.net-mvc, session-state

除了我认为现在不是最好使用的 TempData 之外，在如何将用户数据从一个页面保存到另一个页面方面有哪些最佳实践？

您是否通常每次都返回数据库... ajax 与否...您每次都发出请求还是将其存储在请求对象或其他进程对象实例中？

我只是在寻找广泛的想法，因为我在网上查找这些东西不知所措……那里有很多东西，而且我也更容易通过堆栈获得一些见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:10:40.733

有几种选择。如果我们谈论的是内部请求，那么当然 ViewBag 是最好的选择。Intrapage（跨请求）然后最好的选择可能是隐藏字段，除非它是敏感数据。

页面之间，则有多种选择。您当然可以将数据作为查询字符串参数传递。Session 也提供了一个方便的选择，只要数据量小，如果 session 丢失也没关系（即，您可以重新获取或重新生成它）。在某些其他情况下，您可以使用隐藏字段将数据发布到另一个页面，但这在很大程度上应该不鼓励，因为您应该更喜欢使用 PRG（发布/重定向/获取）模式。

其他一些选项是使用上下文缓存`HttpContext.Cache`（我觉得这是错误的命名，但是很好）或将其保存在数据库的临时表中。如果您决定迁移到网络场，任何“内存中”选项都会存在可伸缩性问题（会话可以由数据库支持，但会减慢速度）。

这还取决于您在谈论什么数据。如果它是用户数据，那么另一种选择是将其存储在 cookie 中，或者使用表单身份验证 cookie 的用户数据部分，并创建自定义 IIdentity 对象。

最后，只是根据每个请求从其源重建数据。

# ruby - 提取评论

> ID：14507752
> 
> 赞同：0
> 
> 时间：2013-01-24T18:00:26.470
> 
> 标签：ruby, parsing, metaprogramming

我在控制器中有这段代码：

```
# =begin action
# url: /albums
# method: GET
# autentication: true
# return: [json, xml]
# =end
def show
    ...
end 
```

是否有一些 gem 可以读取评论并以 json 格式返回信息，或者做类似的事情？我想让它使用这些信息来操作和生成文件。

```
{
    "url" => /albums
    "method" => GET
    "autentication" => true 
    "return" => [json, xml]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:10:16.163

我不认为有一个 gem 可以完全满足您的要求，但这项任务似乎很容易设计：首先，您需要解析文件并提取注释 - 使用简单的红宝石脚本。然后以如下格式获取信息：

```
url: /albums
method: GET
autentication: true
return: [json, xml] 
```

这看起来很像 YAML，你可以简单地做

```
YAML::load(string).to_json 
```

# javascript - 指示 Sencha SDK 工具捆绑 app.json 中指定的其他 js 文件

> ID：14507760
> 
> 赞同：9
> 
> 时间：2013-01-24T18:00:55.403
> 
> 标签：javascript, extjs, sencha-touch-2

我`app.json`的 Sencha touch 2 应用程序文件包含。

```
"js": [
    {
        "path": "sdk/sencha-touch.js"
    },
    {"path": "js/mootools-1.2.5-core.js"}, // I want these files to be bundled too
    {"path": "js/mootools-1.2.5.1-more.js"}, // <----------+
    {"path": "js/soundmanager2-nodebug-jsmin.js"}, // <----+
           ...                                     // <----+ and there are more.
           ...

    {
        "path": "app.js",
        "bundle": true,  /* Indicates that all class dependencies are concatenated into this file when build */
        "update": "delta"
    }, 
```

现在我看到当我调用`sencha app build production`它时，它将所有 sencha 类编译成一个巨大的`app.js`文件。但是我所有的其他类都只是压缩到构建目录。它们没有串联。我怎样才能将它们包括在内`app.js`？

### 常问问题

1.  您的 json 文件已正确编写，对吗？

    A. 是的，`app.json`没有任何语法错误。该项目在调用上成功构建`sencha app build production`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-28T20:03:57.830

在查看源代码并与**Cmd**背后的开发人员交谈后，目前看来这是不可能的。

但是，由于构建文件是用 JavaScript 编写的，理论上，修改它并将此功能添加到 Cmd 中并不需要太多。

您可以在以下位置找到 Sencha Touch 构建文件：

```
CMD-ROOT/plugins/touch/current/app-build.js 
```

`CMD-ROOT`命令的位置在哪里`sencha`- 您可以使用`which sencha`.

在我的系统（OSX）上，路径是：

```
/Users/Robert/bin/Sencha/Cmd/3.0.0.250/plugins/touch/current/app-build.js 
```

希望这对您有所帮助。

**更新**

看来，在与另一个 Cmd 开发人员交谈后，这实际上是可能的。您需要采取 2 个步骤来实现它：

1) 将`skipFrameworkFile`属性添加到要捆绑的每个 JS 资源中。这告诉编译器在构建应用程序时不要复制资源。

```
{
    "path": "resources/js/jquery.js",
    "skipFrameworkFile": true
},

    "path": "resources/js/jquery2.js",
    "skipFrameworkFile": true
} 
```

2)使用标签要求**app.js文件中的每个文件。**`@require`这告诉编译器将您的每个文件包含到您的 app.js 文件中。

```
//@require resources/js/jquery.js
//@require resources/js/jquery2.js 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-19T21:34:54.223

对于 SenchaCmd 3.2，rdougan 的解决方案对我不起作用。但是，而不是使用：

`'skipFrameworkFile: true`

我用了

`'x-bootstrap': true`

（通过查看 SenchaCmd 源代码）并且它有效！

其他步骤与 rdougan 相同

希望这可以帮助。干杯

# wpf - 在 wpf 中打印时内容不旋转

> ID：14507762
> 
> 赞同：1
> 
> 时间：2013-01-24T18:01:04.253
> 
> 标签：wpf, printing, landscape, xps

我正在使用 System.Windows.Controls.PrintDialog 打印 XPS 文档。当我在打印对话框中选择横向时，生成的页面旋转为横向，但实际内容保持纵向模式并被剪裁。

这就是我打印的方式。我还尝试使用 PrintDialog.PrintQueue 上的 AddJob 方法和 PrintQueue.CreateXpsDocumentWriter(...).Write(...) 上的重载方法，结果都相同或更差。我尝试将 DocumentPaginator.PageSize、printDialog.PrintTicket.PageMediaSize 以及第一个 FixedPage 的宽度和高度设置为正确的横向大小，但没有结果。PrintDialog.PrintTicket.PageOrientation 在横向上，而 PrintDialog.PrintableAreaWidth 和 PrintDialog.PrintableAreaHeight 在显示 PrintDialog 后选择横向时应如此。

```
var printDialog = new PrintDialog
        {
            MaxPage = (uint)pageCount,
            MinPage = 1,
            PageRange = new PageRange(1, pageCount),
            UserPageRangeEnabled = true
        };

if (printDialog.ShowDialog() != true) return;
using (var doc = new XpsDocument(filename, FileAccess.Read)) 
{
    var paginator = doc.GetFixedDocumentSequence().DocumentPaginator;
    printDialog.PrintDocument(fds.paginator , "myPrintJob");
} 
```

# objective-c - iPad 上的 UIActionSheet backGroundColor

> ID：14507766
> 
> 赞同：4
> 
> 时间：2013-01-24T18:01:13.660
> 
> 标签：objective-c, ipad, uiactionsheet, tintcolor

我在一个问题上苦苦挣扎了很长一段时间。由于我并没有真正找到解决方案，我希望这里有人能够帮助我。

我有一个 UIActionSheet，我希望它具有不同的背景颜色。和

`[[myAlert layer] setBackgroundColor:[UIColor redColor].CGColor];`

我可以更改警报的大部分颜色。这是它的样子：

![这是它的样子](../Images/375148327ebf699e0d5e72d84dafcb76.png)

这就是我初始化 UIActionSheet 的方式：

```
 UIActionSheet *styleAlert = [[UIActionSheet alloc] initWithTitle:AMLocalizedString(@"SELECT_PICTURE_TITLE", @"Überschrift des Actionsheets")
                                                            delegate:self
                                                   cancelButtonTitle:AMLocalizedString(@"CANCEL_BUTTON_TITLE", @"Abbrechen butten")
                                              destructiveButtonTitle:nil
                                                   otherButtonTitles:AMLocalizedString(@"TAKE_PICTURE_BUTTON_TITLE", @"Bild aufnehmen button"),
                                 AMLocalizedString(@"CAMERA_ROLL_BUTTON_TITLE", @"Aus Bibliothek auswählen"), nil];

    // use the same style as the nav bar
    [styleAlert showInView:self.parentViewController.tabBarController.view];
    //[styleAlert showInView:[self.navigationController view] ];
    [styleAlert release]; 
```

和

```
- (void)willPresentActionSheet:(UIActionSheet *)actionSheet {
    actionSheet.layer.backgroundColor = GLOBAL_TINT_COLOR.CGColor;
} 
```

我不知道如何用相同的颜色设置边框。有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T14:33:45.390

你不能用不同的颜色重新绘制边框，所以只需删除边框并添加你自己的：

```
- (void)didPresentActionSheet:(UIActionSheet *)actionSheet {
    UIView *contentView = actionSheet.superview;
    UIView *popoverView = contentView.superview;

    UIView *chromeView;
    for (UIView *v in [popoverView subviews]) {
        if (v.subviews.count == 3) {
            chromeView = v;
            break;
        }
    }

    for (UIView *backgroundComponentView in [chromeView subviews]) {
        backgroundComponentView.hidden = YES;

        CGRect componentFrame = backgroundComponentView.frame;  // add your view with this frame
    }
} 
```

请注意，这在 *will*PresentActionSheet 中不起作用，因为此时`actionSheet`没有`superview`集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T22:41:55.237

这适用于 iPhone 主题，它可能也适用于 iPad。

```
 - (void)willPresentActionSheet:(UIActionSheet *)actionSheet {

        UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed@""]];
        imageView.frame = CGRectMake(0, 0, actionSheet.frame.size.width, actionSheet.frame.size.height);
        [actionSheet insertSubview:imageView atIndex:0];
        NSArray *subviews = [actionSheet subviews];
        for (UIView *v in subviews) {
            if ([v isKindOfClass:[UIButton class]]) {
//Theme the buttons on the action sheet
                UIButton *b = (UIButton *)v;
            }
            else if ([v isKindOfClass:[UILabel class]]) {
                UILabel *l = (UILabel *)v;
//Theme the label at the top of the action sheet
            }
        }
    } 
```

# ios - 在 iOS 上嵌入 Mono

> ID：14507770
> 
> 赞同：16
> 
> 时间：2013-01-24T18:01:15.183
> 
> 标签：ios, xamarin.ios, mono, xamarin

我想将单声道嵌入到我的 iOS 应用程序中。我不想使用 MonoTouch。我想像这样手动嵌入单声道：

[http://www.mono-project.com/Embedding_Mono](http://www.mono-project.com/Embedding_Mono)

我已经在 Windows 上成功地做到了这一点，使用上面的指南和各种在线示例，这是一个很好的 Windows：

[https://github.com/inkdev/Embedded-Mono-Sample](https://github.com/inkdev/Embedded-Mono-Sample)

但是我在开始使用 iOS 时遇到了麻烦。我知道这是可以做到的，像 Unity3d 这样的公司用它来驱动他们的游戏引擎技术。我不知道如何为 iOS 编译和链接单声道，也找不到任何好的说明。我没有找到使用搜索引擎的任何帮助，它们似乎专门出现了有关 MonoTouch（Xamarin 自己的将单声道嵌入 iOS 的商业包装器）的文章。

这里还有一些值得注意的链接：

[http://www.mono-project.com/Mono:ARM](http://www.mono-project.com/Mono:ARM)

[http://web.archive.org/web/20090106023130/http://mono-project.com./Mono:Iphone](http://web.archive.org/web/20090106023130/http://mono-project.com./Mono:Iphone)

有没有什么地方可以为 iOS 的 Mono 获得预编译的库和头文件，所以在我的 C 代码中我可以简单地链接和包含？

有人可以提供如何为 iOS ARM CPU 编译单声道的示例吗？

MonoTouch 为所有 iOS 目标 C API 提供了一个很好的包装器，但是您不一定需要所有这些，因为我知道应该可以自己编译然后嵌入单声道，然后使用 pInvoke 调用您的少数本机函数将需要。

任何帮助将不胜感激，ty！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-23T03:45:49.807

虽然不完全符合您的要求，但 iOS 7 增加了对使用 JavaScript 编写脚本的支持。许多发现这篇文章的人可能希望使用这种新功能来实现您正在尝试的目标。[关联](http://blog.bignerdranch.com/3784-javascriptcore-and-ios-7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T07:03:22.800

正如 Rolf 所说，您需要先阅读[Mono Licensing 文档](http://www.mono-project.com/FAQ%3a_Licensing)。在 iOS 上嵌入单声道需要 Xamarin 的特殊许可。

您需要从 XCode 更改几个构建设置，这就是我所做的。

1.  打开（或创建）iOS 项目
2.  添加`libmonoboehm-2.0.a`到您的项目（您可以使用其他版本的 .a 文件）
    1.  它在`Library/Frameworks/Mono.framework/Versions/{version}/lib`文件夹中
3.  项目 -> 构建设置 -> 标题搜索
    1.  添加路径：`/Library/Frameworks/Mono.frameworks/Versions/{version}/include/mono-2.0`
4.  项目 -> 构建设置 -> 库搜索
    1.  添加路径：`/Library/Frameworks/Mono.frameworks/Versions/{version}/lib`

而且，在你的 iOS 应用程序中这样的代码

```
 #include <mono/jit/jit.h>
    #include <mono/metadata/mono-config.h>
    #include <mono/metadata/assembly.h>
    #include <mono/metadata/environment.h>

// ....

    const char* dllFile = "ABSOLUTE_PATH_TO_DLL_OR_EXE";
    domain = mono_jit_init(dllFile);
    mAssembly = mono_domain_assembly_open(domain, dllFile);
// ... Do whatever you want :) 
```

请记住。在 iOS 上嵌入单声道时，您需要从 Xamarin 获得许可证。

享受 ：）

# c# - 您可以在运行时更改 ConnectionString 配置值吗？或者……我什至需要吗？

> ID：14507773
> 
> 赞同：7
> 
> 时间：2013-01-24T18:01:26.977
> 
> 标签：c#, asp.net-4.0

第一篇文章，我是一个完整的 .Net/C# 新手！

我继承了一个 C# wed 应用程序，因为有人下班，而我是唯一一个有带宽的人！但不是 .Net、C# 知识！

该应用程序被世界各地不同网站的人们使用。他们使用公司登录详细信息登录，因此他们根据所在位置（欧洲、美国或印度）登录到不同的服务器。

编写应用程序的人不知道如何根据位置切换 web.config 中的 ConnectionString，因此为每个域复制了整个应用程序！唯一的变化是每个重复版本的应用程序的 web.config 中的单个 IP 地址！然后做了一个简单的网页首页，将用户带到“他们的”应用程序版本，具体取决于他们所说的他们在世界上的位置！

我要做的第一件事就是移动到单个版本来维护，所以我需要能够切换连接字符串或如何登录？

我花了几天时间试图弄清楚如何从我的 Login 类中获取 ConnectionString（在 web.config 中定义），却发现 web.config 中设置的值似乎是只读的，所以我无法更改它们.

所以我想第一个问题是，我是不是找错树了？我可以设置 AspNetActiveDirectoryMembershipProvider（见后面的代码）需要的所有信息并从我的登录类中调用它吗？还是 ConnectionString 路由是在 .Net/C# 中建立连接的 Ipso facto 方式？因此，我确实需要了解如何在运行时更改/指定/添加值。

我能想到的三种可能性：-（第一种是我已经陷入困境的可能性）

1.  从我的登录类更改我的 web.config 中 ADService 的 ConnectionString？

2.  更改 AspNetActiveDirectoryMembershipProvider 使用的内容，所以从我的 Login 类中神奇地让它使用 web.config 中定义的 EMEA_ADService 或 PACIFIC_ADService？

3.  是否可以从我的 Login 类中定义一个新的 connectionString 并调用 AspNetActiveDirectoryMembershipProvider ，而根本不使用 web.config 进行此连接？

这是我/他的 web.config 文件和我的登录类

**来自 Web.config 的剪辑**

```
<connectionStrings>
    <add name="ADService" connectionString="LDAP://12.345.67.8" />          *---- Original ConnectionString (IP address changed)----* 
    <add name="EMEA_ADService" connectionString="LDAP://12.345.67.8" />     *---- Added by me playing around unsuccessfully! ----* 
    <add name="PACIFIC_ADService" connectionString="LDAP://12.345.67.9" />  *---- Added by me playing around unsuccessfully! ----* 
    ~
  </connectionStrings>

<authentication mode="Forms">
      <forms loginUrl="~/Login.aspx" timeout="2880" />     *---- The background class for this popup (Login.aspx.cs) is where I'm currently trying to affect ConnectionString----* 
    </authentication>
                                                           *---- Pretty sure this is the bit that actually does the login verification----* 
    <membership defaultProvider="AspNetActiveDirectoryMembershipProvider">
      <providers>
        <clear />
        <add name="AspNetActiveDirectoryMembershipProvider" type="System.Web.Security.ActiveDirectoryMembershipProvider,            System.Web, Version=4.0.0.0, Culture=neutral,            PublicKeyToken=12345678" connectionStringName="ADService" applicationName="/." description="ADService" />
      </providers>
    </membership> 
```

在发现我似乎无法更改 ConnectionString 之前，这是我在课堂上所学的！

**来自 Login.aspx.cs 的剪辑**

```
public partial class Login : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
         ConnectionStringSettingsCollection connections = ConfigurationManager.ConnectionStrings; //this is now working :)
        string userDomain = Environment.UserDomainName;  //Probably don't need this, it seems to give the login domain on the machine. Don't know yet if that will be the users machine or the server the app runs on?
        if (connections.Count != 0)
        {
            foreach (ConnectionStringSettings connection in connections)
            {
                string testname = connections["ADService"].Name;
                string testConnectionString = connections["ADService"].ConnectionString;
                connections["ADService"].ConnectionString = "LDAP://12.345.67.9";
                testConnectionString = connections["ADService"].ConnectionString; 
```

任何提示都会非常受欢迎！

PS 我已经在工作中申请了 .Net/C# 课程！;)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T18:08:23.227

您不想更改现有的连接字符串。相反，您希望更改数据访问层用来调用不同服务堆栈的连接字符串。然后，您可以在运行时根据您想要使用的任何输入参数选择一个连接字符串。在您的情况下，这可能是一个 IP 范围。

[asp.net mvc 多个连接字符串](https://stackoverflow.com/questions/6491982/asp-net-mvc-multiple-connection-strings)

[在 ONE DataAccess Layer 中处理多个连接字符串](https://stackoverflow.com/questions/3394541/handling-multiple-connection-strings-in-one-dataaccess-layer)

[http://msdn.microsoft.com/en-us/library/aa479086.aspx](http://msdn.microsoft.com/en-us/library/aa479086.aspx)

微软的文章特别有趣，因为它实际上对解决像您这样的困境的正确模式进行了架构研究。我想你被棍子的短端卡住了！祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:09:31.157

Web.config 不能在运行时修改。我建议通过网站上的登录链接或组合框设置某种标志，供人们用来选择他们想要登录的位置。弄清楚用户想要做什么不是服务器的工作。

# ios - 故事板 UIButton 的等效代码

> ID：14507774
> 
> 赞同：2
> 
> 时间：2013-01-24T18:01:37.163
> 
> 标签：ios, objective-c, xml, uibutton, uistoryboard

我在故事板上设置了一些自定义按钮，我试图在代码中重新创建它们，但不知何故，尽管在我的 CGRectMake 函数中使用了相同的参数，但我并没有得到正确的位置。另一个问题是自动调整掩码在代码中不起作用，因为我突出显示了左侧、底部和右侧支柱，因此按钮在 3.5" 和 4" 屏幕尺寸中都保持位置，但是我通过代码创建的按钮没有做这个。我从我的故事板发布 XML，然后是我的代码以显示我的意思。在代码之前，我正在尝试做一些上下文。我在我的项目中通过情节提要设置了多个控制器/视图中的这些自定义按钮..我”

这是我的代码：

这是来自故事板的 XML：

```
<button opaque="NO" contentMode="scaleToFill" contentHorizontalAlignment="center" contentVerticalAlignment="center" lineBreakMode="middleTruncation" id="iz0-cT-TPO">
                            <rect key="frame" x="0.0" y="357" width="106" height="60"/>
                            <autoresizingMask key="autoresizingMask" flexibleMinY="YES"/>
                            <fontDescription key="fontDescription" type="boldSystem" pointSize="15"/>
                            <state key="normal" image="Anotpressed.png">
                                <color key="titleColor" red="0.19607843459999999" green="0.30980393290000002" blue="0.52156865600000002" alpha="1" colorSpace="calibratedRGB"/>
                                <color key="titleShadowColor" white="0.5" alpha="1" colorSpace="calibratedWhite"/>
                            </state>
                            <state key="highlighted" image="Apressed.png">
                                <color key="titleColor" white="1" alpha="1" colorSpace="calibratedWhite"/>
                            </state>

                        </button> 
```

我的视图控制器中的等效代码是：

```
(void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    UIButton *AButton=[UIButton buttonWithType:UIButtonTypeCustom];
    [AButton setFrame:CGRectMake(0, 357, 106, 60)];
    [AButton setAutoresizingMask:UIViewAutoresizingFlexibleTopMargin];
    [AButton setImage:[UIImage imageNamed:@"Anotpressed"] forState:UIControlStateNormal];
    [AButton setImage:[UIImage imageNamed:@"Apressed"] forState:UIControlStateHighlighted];
    [AButton setEnabled:YES];
    [self.view addSubview:AButton];
} 
```

目前我正在做的是将情节提要按钮留在原处，然后从带有编程按钮的视图控制器继承，以查看它们是否相同，我发现我的编程按钮甚至比情节提要按钮高得多尽管它们具有相同的坐标等。

对于这个问题的冗长，我深表歉意，但我想提供一个完整的图片来说明我正在努力实现的目标。首先，如何以编程方式重新创建相同的按钮，其次，这是（继承/子类化）在我的项目中重新创建这些按钮的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:19:01.527

`flexibleMinY`如果父视图调整大小，故事板中的视图可以重新定位的状态。可能发生的情况是视图以特定大小加载，但会调整大小以适应可用的屏幕空间。例如，如果情节提要专为 iPhone 4 屏幕尺寸设计，但显示在新的 iPhone 5 屏幕分辨率上。

因为您在 中添加了按钮`viewDidAppear`，所以调整大小已经发生了。按钮向下移动了一点，不再处于原始位置。

您可以尝试在 中添加按钮`viewDidLoad`，这可能在显示和调整原始视图大小之前被调用。还将相同的内容添加`autoresizingMask`到您的按钮中。

或者确保原始按钮的 y 位置是固定的而不是灵活的。

# javascript - Github 贡献图

> ID：14507778
> 
> 赞同：56
> 
> 时间：2013-01-24T18:01:51.620
> 
> 标签：javascript, ruby-on-rails, github, svg

github.com 附带了一个很棒的贡献图表。

![在此处输入图像描述](../Images/023a36b7d695033ee9ba01df89cc78a6.png)

有人知道他们是否使用某种图书馆或宝石吗？

如果它是开源的，我也想在我的项目中使用它。看起来不错！

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-24T21:47:56.177

样式不完全相同，但我认为是使用D3.js的[日历示例完成的。](http://mbostock.github.com/d3/talk/20111018/calendar.html)

如果您在 GitHub 的页面上执行“查看源代码”，您会看到他们正在使用 D3 来呈现他们的日历。

[js-chart-widgets](https://github.com/loule/js-chart-widgets/)实现了类似的外观。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T21:59:34.583

Github 贡献日历使用 D3。如果您检查您的网络流量，您将看到对 JS 的请求，您可以自己查看源代码。

编辑：我已经删除了源链接，因为 CDN 网址可能会随着时间而改变。如果您使用网络检查器查看，它应该仍然可以定位。

# math - 如何计算给定向量/浮点数数组的阈值

> ID：14507782
> 
> 赞同：1
> 
> 时间：2013-01-24T18:02:06.287
> 
> 标签：math, numbers, gaussian, threshold, standard-deviation

假设我在 C++ 中有以下数字的示例分布（向量）：

```
vector 1    vector 2   vector 3
11          4          65
128         6          66
12          4          64
13          4          62
12          5          65
14          5          63
16          7          190
60          3          210
120         4          220
126         5          242
77          6          231
14          4          210
12          7          222
13          6          260
11          8          300
14          6          233
99                     80
15                     66
13 
```

我需要为每个向量找到一个阈值。如果它们**高于**该向量的阈值，我将消除每个中较大的（“坏”）数字。我想在将来重新使用这种方法来找到其他类似向量的阈值。这些数字不一定是较小的“好”数字。

理想情况下，阈值只是比大多数较小的“好”数字大一点。例如，第一个投票者的理想阈值将在 17 或 18 左右，第二个将在 8 左右，第三个将在 68-70 左右。

我意识到这可能是简单的数学，但由于我一般数学很糟糕，我真的很感激一个关于如何找到这个神奇阈值的代码示例，特别是在 C++ 或 Objective-C 中，这就是我发布这个的原因在 SO 而不是在数学网站上。

**我尝试过的一些事情**

```
float threshold = mean_of_vector;
float threshold = mean_of_vector / 1.5f;
float threshold = ((max_of_vector - min_of_vector) / 2.0f) + mean_of_vector; 
```

这些似乎都有自己的问题，例如：有些包含太多的“好”平均数字（因此阈值太低），有些没有足够的好数字（阈值太高），或者没有足够的“坏” “数字。有时他们会使用特定的数字向量，例如，如果标准偏差很高，但在标准偏差较低的情况下则不然。

我认为该方法将涉及标准偏差和/或某种高斯分布，但我不知道如何将它们拼凑在一起以获得所需的结果。

编辑：我能够重新排序向量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:12:04.990

您可以消除 90% 或 95% 以上的值。从技术上讲，您计算数组分布的 p = 0.9（或 0.95）百分位数。

只需对数组升序排序：

```
int[] data;

Arrays.sort(data); // or use ArrayList<Integer> which has Collections.sort(dataArrayList), 
```

然后计算百分位数 p 的位置：

```
float p = data.length * p; // e.g p = 0.9 for 90% percentile.
// cut of fractional part.
int posInt = (int) p;

// this is the threshold value 
int threshold = data[posInt] 
```

现在通过保持所有值 < 或 <= 阈值来过滤数组。这会保留 90% 的最小值。

```
int i = 0;
while (i < data.length && data[i] <= threshold) {
  // output data[i];
} 
```

对于数学上“完美”的结果，您可以搜索“计算离散数组/值的百分位数）。我记得有两种有效的算法，描述是否必须向下舍入或向上舍入`posInt`。我上面的示例我只是截断了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:14:06.997

一个想法是计算平均值`mu`和标准偏差`sigma`（例如，使用“[准确计算运行方差](http://www.johndcook.com/standard_deviation.html)”中描述的算法）并将它们用于定义阈值。

如果您的数据被假定为高斯，您知道 97.5% 的数据应该低于`mu + 2*sigma`，因此这可能是一个很好的阈值。

备注：一旦拒绝了极值，您可能需要重新计算阈值，因为这些值会对均值和标准差产生重大影响。

编辑：

我刚刚使用我提出的方法计算了阈值，但您看起来并不满意：对于第一种情况，阈值约为 130（因此可能取 1.5 sigma 可能有助于消除最大的条目），对于第二种情况，阈值大约是 8，对于第三种情况，阈值大约是 262。

实际上，我对这些结果并不感到惊讶：对于您的最后一个示例，您想要删除一半以上的数据！假设数据是只有几个极值的高斯数据，这与您手头的数据相去甚远……

# mysql - mysql逻辑更新一些记录

> ID：14507786
> 
> 赞同：0
> 
> 时间：2013-01-24T18:02:20.290
> 
> 标签：mysql, sql-update

我有一个包含 48 条记录的特定记录集（1 天超过 1/2 小时时段）。

我想将前 24 条记录的值（按字段`l`顶部）减少一个预先知道的数量，我所拥有的只是日期和我想要减少的数量（一个名为 $int 的 php var）。`l``DESC`

目前，我正在减少所有 48 条记录：

```
UPDATE r SET l = l - $int WHERE thedate = '$kDate' 
```

（更新 48 条记录）

如何更新前 24 名？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:03:47.553

```
UPDATE r 
SET l = l - $int 
WHERE thedate = '$kDate'
order by l desc
limit 24 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:04:21.790

```
UPDATE r SET l = l - $int WHERE thedate = '$kDate'
ORDER BY l DESC
LIMIT 24 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:04:01.050

```
UPDATE r SET l = l - $int WHERE thedate = '$kDate' ORDER BY thedate DESC LIMIT 24 
```

# sql-server - order by DATEDIFF 给出转换失败错误

> ID：14507788
> 
> 赞同：0
> 
> 时间：2013-01-24T18:02:31.910
> 
> 标签：sql-server, date, select, sql-order-by, datediff

我正在编辑我在 ms sql 中构建的查询。我需要按日期订购商品，但这会出错。 `locations_aanvang`给出`2012-08-12`(yyyy-mm-dd)。所以我把它延长到`2012-08-12 00:00:00 +1:00`美国东部时间。因此，要订购我需要将其转换为 unix 时间戳（对吗？）。

查询是：

```
SELECT TOP 6 * FROM jd_lighthouses
WHERE locations_aanvang != ''
ORDER BY (SELECT DATEDIFF(s, '1970-01-01', locations_aanvang+' 00:00:00 +1:00')) DESC 
```

我得到的错误是： `[Microsoft][SQL Server Native Client 10.0][SQL Server]Conversion failed when converting date and/or time from character string.`

我究竟做错了什么？我可以更容易地做到这一点吗？

提前致谢！

亲切的问候，布拉姆·哈默

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:09:53.447

嗯。让我来一刀。

1.  我认为 MS SQL 警告不要按不直接返回 SQL 结果的列/计算进行排序。在 Oracle 中绝对是这样。
2.  我假设你可以为你的变量插入一个文字值并且它运行得很好？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:16:35.257

因为我们无法澄清问题，唯一的帮助是：如果`locations_aanvang`是字符类型，那么您可以避免错误更改代码，如下所示：

```
DATEDIFF(s, '1970-01-01', locations_aanvang + ' 00:00:00') 
```

因为你使用`SQL Server Native Client 10.0`我假设你有`SQL Server 2008`和`DATE`数据类型。要获取最新位置，请使用：

```
ORDER BY CAST(locations_aanvang as DATE) DESC 
```

# java - 从android中的特定网站抓取html

> ID：14507791
> 
> 赞同：0
> 
> 时间：2013-01-24T18:02:34.280
> 
> 标签：java, android, httpclient

我已经尝试获取此 webapge [http://www.mindef.gov.sg/content/imindef/press_room/official_releases/nr/2013/jan/22jan13_nr.html](http://www.mindef.gov.sg/content/imindef/press_room/official_releases/nr/2013/jan/22jan13_nr.html)的 html 源代码。但是，与我从浏览器中看到的内容相比，我遇到了错误，因为它以不同类型的 html 响应。似乎在网上和应用程序上做一个 httopost 会导致不同类型的响应

```
address="http://www.mindef.gov.sg/content/imindef/press_room/official_releases/nr/2013/jan/22jan13_nr.html";
        String result = "";
        HttpClient httpclient = new DefaultHttpClient();

    //  httpclient.getParams().setParameter("http.protocol.single-cookie-header", true);
        HttpProtocolParams.setUserAgent(httpclient.getParams(),  "Mozilla/5.0 (Linux; U; Android 2.2.1; en-ca; LG-P505R Build/FRG83) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1");           
InputStream is = null;
HttpGet httpGet = new HttpGet (address);

                HttpResponse response = httpclient.execute(httpGet);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();
            InputStream is = null; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:16:27.173

尝试这个：

```
StringBuilder builder = new StringBuilder();
String line = null;
HttpGet get = new HttpGet("http://www.url.com");
HttpClient client = new DefaultHttpClient();
HttpResponse response = client.execute(get);
InputStream is = response.getEntity().getContent();
BufferedReader reader = new BufferedReader(new InputStreamReader(is));
while ((line = reader.readLine()) != null) builder.append(line); 
```

然后，页面源应该在`builder`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:10:53.830

尝试 ：

```
 URLConnection  cn= new URL(url).openConnection();

    BufferedReader input = new BufferedReader( new InputStreamReader( cn.getInputStream() ) ); 
```

读取输入流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:11:29.180

听起来您正在获得该网站的移动版本。如果您扩展 URL 以包含`?siteversion=pc`您应该将页面提供给您计算机上的浏览器。

# python - Pandas - 如何展平列中的分层索引

> ID：14507794
> 
> 赞同：464
> 
> 时间：2013-01-24T18:03:11.447
> 
> 标签：python, pandas, dataframe

`groupby.agg`我有一个在轴 1（列）（来自操作）中具有分层索引的数据框：

```
 USAF   WBAN  year  month  day  s_PC  s_CL  s_CD  s_CNT  tempf       
                                     sum   sum   sum    sum   amax   amin
0  702730  26451  1993      1    1     1     0    12     13  30.92  24.98
1  702730  26451  1993      1    2     0     0    13     13  32.00  24.98
2  702730  26451  1993      1    3     1    10     2     13  23.00   6.98
3  702730  26451  1993      1    4     1     0    12     13  10.04   3.92
4  702730  26451  1993      1    5     3     0    10     13  19.94  10.94 
```

我想将其展平，使其看起来像这样（名称并不重要 - 我可以重命名）：

```
 USAF   WBAN  year  month  day  s_PC  s_CL  s_CD  s_CNT  tempf_amax  tmpf_amin   
0  702730  26451  1993      1    1     1     0    12     13  30.92          24.98
1  702730  26451  1993      1    2     0     0    13     13  32.00          24.98
2  702730  26451  1993      1    3     1    10     2     13  23.00          6.98
3  702730  26451  1993      1    4     1     0    12     13  10.04          3.92
4  702730  26451  1993      1    5     3     0    10     13  19.94          10.94 
```

我该怎么做呢？（我尝试了很多，但无济于事。）

根据建议，这里是 dict 形式的头部

```
{('USAF', ''): {0: '702730',
  1: '702730',
  2: '702730',
  3: '702730',
  4: '702730'},
 ('WBAN', ''): {0: '26451', 1: '26451', 2: '26451', 3: '26451', 4: '26451'},
 ('day', ''): {0: 1, 1: 2, 2: 3, 3: 4, 4: 5},
 ('month', ''): {0: 1, 1: 1, 2: 1, 3: 1, 4: 1},
 ('s_CD', 'sum'): {0: 12.0, 1: 13.0, 2: 2.0, 3: 12.0, 4: 10.0},
 ('s_CL', 'sum'): {0: 0.0, 1: 0.0, 2: 10.0, 3: 0.0, 4: 0.0},
 ('s_CNT', 'sum'): {0: 13.0, 1: 13.0, 2: 13.0, 3: 13.0, 4: 13.0},
 ('s_PC', 'sum'): {0: 1.0, 1: 0.0, 2: 1.0, 3: 1.0, 4: 3.0},
 ('tempf', 'amax'): {0: 30.920000000000002,
  1: 32.0,
  2: 23.0,
  3: 10.039999999999999,
  4: 19.939999999999998},
 ('tempf', 'amin'): {0: 24.98,
  1: 24.98,
  2: 6.9799999999999969,
  3: 3.9199999999999982,
  4: 10.940000000000001},
 ('year', ''): {0: 1993, 1: 1993, 2: 1993, 3: 1993, 4: 1993}} 
```

* * *

## 回答 #1

> 赞同：654
> 
> 时间：2013-01-24T18:37:10.217

我认为最简单的方法是将列设置为顶层：

```
df.columns = df.columns.get_level_values(0) 
```

*注意：如果 to 级别有名称，您也可以通过 this 访问它，而不是 0。*

.

如果您想将[`join`](http://docs.python.org/2/library/stdtypes.html#str.join)您的 MultiIndex 组合成一个索引*（假设您的列中只有字符串条目），*您可以：

```
df.columns = [' '.join(col).strip() for col in df.columns.values] 
```

*注意：[`strip`](http://docs.python.org/2/library/stdtypes.html#str.strip)当没有第二个索引时，我们必须使用空格。*

```
In [11]: [' '.join(col).strip() for col in df.columns.values]
Out[11]: 
['USAF',
 'WBAN',
 'day',
 'month',
 's_CD sum',
 's_CL sum',
 's_CNT sum',
 's_PC sum',
 'tempf amax',
 'tempf amin',
 'year'] 
```

* * *

## 回答 #2

> 赞同：152
> 
> 时间：2019-04-19T05:26:06.893

该线程上的所有当前答案一定有点过时了。从`pandas`0.24.0 版开始，可以满足`.to_flat_index()`您的需要。

来自熊猫[自己的文档](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.MultiIndex.to_flat_index.html)：

> **MultiIndex.to_flat_index()**
> 
> 将 MultiIndex 转换为包含级别值的元组索引。

其文档中的一个简单示例：

```
import pandas as pd
print(pd.__version__) # '0.23.4'
index = pd.MultiIndex.from_product(
        [['foo', 'bar'], ['baz', 'qux']],
        names=['a', 'b'])

print(index)
# MultiIndex(levels=[['bar', 'foo'], ['baz', 'qux']],
#           codes=[[1, 1, 0, 0], [0, 1, 0, 1]],
#           names=['a', 'b']) 
```

申请`to_flat_index()`：

```
index.to_flat_index()
# Index([('foo', 'baz'), ('foo', 'qux'), ('bar', 'baz'), ('bar', 'qux')], dtype='object') 
```

* * *

### 用它来替换现有的`pandas`列

一个如何在 上使用它的示例`dat`，它是一个带有`MultiIndex`列的 DataFrame：

```
dat = df.loc[:,['name','workshop_period','class_size']].groupby(['name','workshop_period']).describe()
print(dat.columns)
# MultiIndex(levels=[['class_size'], ['count', 'mean', 'std', 'min', '25%', '50%', '75%', 'max']],
#            codes=[[0, 0, 0, 0, 0, 0, 0, 0], [0, 1, 2, 3, 4, 5, 6, 7]])

dat.columns = dat.columns.to_flat_index()
print(dat.columns)
# Index([('class_size', 'count'),  ('class_size', 'mean'),
#     ('class_size', 'std'),   ('class_size', 'min'),
#     ('class_size', '25%'),   ('class_size', '50%'),
#     ('class_size', '75%'),   ('class_size', 'max')],
#  dtype='object') 
```

* * *

### 就地展平和重命名

可能值得注意的是，如何将其与简单的列表理解（感谢@Skippy 和@mmann1123）结合起来加入元素，以便生成的列名是简单的字符串，由下划线分隔：

```
dat.columns = ["_".join(a) for a in dat.columns.to_flat_index()] 
```

* * *

## 回答 #3

> 赞同：99
> 
> 时间：2015-12-14T08:00:21.093

```
pd.DataFrame(df.to_records()) # multiindex become columns and new index is integers only 
```

* * *

## 回答 #4

> 赞同：48
> 
> 时间：2013-01-24T18:54:14.357

安迪·海登的回答当然是最简单的方法——如果你想避免重复的列标签，你需要稍微调整一下

```
In [34]: df
Out[34]: 
     USAF   WBAN  day  month  s_CD  s_CL  s_CNT  s_PC  tempf         year
                               sum   sum    sum   sum   amax   amin      
0  702730  26451    1      1    12     0     13     1  30.92  24.98  1993
1  702730  26451    2      1    13     0     13     0  32.00  24.98  1993
2  702730  26451    3      1     2    10     13     1  23.00   6.98  1993
3  702730  26451    4      1    12     0     13     1  10.04   3.92  1993
4  702730  26451    5      1    10     0     13     3  19.94  10.94  1993

In [35]: mi = df.columns

In [36]: mi
Out[36]: 
MultiIndex
[(USAF, ), (WBAN, ), (day, ), (month, ), (s_CD, sum), (s_CL, sum), (s_CNT, sum), (s_PC, sum), (tempf, amax), (tempf, amin), (year, )]

In [37]: mi.tolist()
Out[37]: 
[('USAF', ''),
 ('WBAN', ''),
 ('day', ''),
 ('month', ''),
 ('s_CD', 'sum'),
 ('s_CL', 'sum'),
 ('s_CNT', 'sum'),
 ('s_PC', 'sum'),
 ('tempf', 'amax'),
 ('tempf', 'amin'),
 ('year', '')]

In [38]: ind = pd.Index([e[0] + e[1] for e in mi.tolist()])

In [39]: ind
Out[39]: Index([USAF, WBAN, day, month, s_CDsum, s_CLsum, s_CNTsum, s_PCsum, tempfamax, tempfamin, year], dtype=object)

In [40]: df.columns = ind

In [46]: df
Out[46]: 
     USAF   WBAN  day  month  s_CDsum  s_CLsum  s_CNTsum  s_PCsum  tempfamax  tempfamin  \
0  702730  26451    1      1       12        0        13        1      30.92      24.98   
1  702730  26451    2      1       13        0        13        0      32.00      24.98   
2  702730  26451    3      1        2       10        13        1      23.00       6.98   
3  702730  26451    4      1       12        0        13        1      10.04       3.92   
4  702730  26451    5      1       10        0        13        3      19.94      10.94   

   year  
0  1993  
1  1993  
2  1993  
3  1993  
4  1993 
```

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2017-05-31T00:25:38.383

```
df.columns = ['_'.join(tup).rstrip('_') for tup in df.columns.values] 
```

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2013-01-24T18:53:56.743

如果你想保留多索引第二级的任何聚合信息，你可以试试这个：

```
In [1]: new_cols = [''.join(t) for t in df.columns]
Out[1]:
['USAF',
 'WBAN',
 'day',
 'month',
 's_CDsum',
 's_CLsum',
 's_CNTsum',
 's_PCsum',
 'tempfamax',
 'tempfamin',
 'year']

In [2]: df.columns = new_cols 
```

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2019-08-23T16:40:29.713

对我来说最简单和最直观的解决方案是使用[get_level_values](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Index.get_level_values.html)组合列名。当您对同一列执行多个聚合时，这可以防止列名重复：

```
level_one = df.columns.get_level_values(0).astype(str)
level_two = df.columns.get_level_values(1).astype(str)
df.columns = level_one + level_two 
```

如果您想要列之间的分隔符，您可以这样做。这将返回与 Seiji Armstrong 对已接受答案的评论相同的内容，该答案仅包括具有两个索引级别值的列的下划线：

```
level_one = df.columns.get_level_values(0).astype(str)
level_two = df.columns.get_level_values(1).astype(str)
column_separator = ['_' if x != '' else '' for x in level_two]
df.columns = level_one + column_separator + level_two 
```

我知道这和上面 Andy Hayden 的好答案是一样的，但我认为这种方式更直观，更容易记住（所以我不必一直引用这个线程），尤其是对于新手 pandas 用户.

在您可能有 3 个列级别的情况下，此方法也更具可扩展性。

```
level_one = df.columns.get_level_values(0).astype(str)
level_two = df.columns.get_level_values(1).astype(str)
level_three = df.columns.get_level_values(2).astype(str)
df.columns = level_one + level_two + level_three 
```

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2018-08-07T21:23:13.633

`map`使用函数的最 Pythonic 方式。

```
df.columns = df.columns.map(' '.join).str.strip() 
```

输出`print(df.columns)`：

```
Index(['USAF', 'WBAN', 'day', 'month', 's_CD sum', 's_CL sum', 's_CNT sum',
       's_PC sum', 'tempf amax', 'tempf amin', 'year'],
      dtype='object') 
```

### 使用带有 f 字符串的 Python 3.6+ 进行更新：

```
df.columns = [f'{f} {s}' if s != '' else f'{f}' 
              for f, s in df.columns]

print(df.columns) 
```

输出：

```
Index(['USAF', 'WBAN', 'day', 'month', 's_CD sum', 's_CL sum', 's_CNT sum',
       's_PC sum', 'tempf amax', 'tempf amin', 'year'],
      dtype='object') 
```

* * *

## 回答 #9

> 赞同：11
> 
> 时间：2018-05-28T02:53:34.487

在阅读了所有答案后，我想出了这个：

```
def __my_flatten_cols(self, how="_".join, reset_index=True):
    how = (lambda iter: list(iter)[-1]) if how == "last" else how
    self.columns = [how(filter(None, map(str, levels))) for levels in self.columns.values] \
                    if isinstance(self.columns, pd.MultiIndex) else self.columns
    return self.reset_index() if reset_index else self
pd.DataFrame.my_flatten_cols = __my_flatten_cols 
```

## 用法：

给定一个数据框：

```
df = pd.DataFrame({"grouper": ["x","x","y","y"], "val1": [0,2,4,6], 2: [1,3,5,7]}, columns=["grouper", "val1", 2])

  grouper  val1  2
0       x     0  1
1       x     2  3
2       y     4  5
3       y     6  7 
```

*   **单一聚合方法**：结果变量命名**与源相同**：

    ```
    df.groupby(by="grouper").agg("min").my_flatten_cols() 
    ```

    *   与`df.groupby(by="grouper",` **as_index=False**`)`或`.agg(...)`**.reset_index()相同**
    *   ```
        ----- before -----
                   val1  2
          grouper         

        ------ after -----
          grouper  val1  2
        0       x     0  1
        1       y     4  5 
        ```

*   **单个源变量，多个聚合：****以统计数据命名**的结果变量：

    ```
    df.groupby(by="grouper").agg({"val1": [min,max]}).my_flatten_cols("last") 
    ```

    *   与 相同`a = df.groupby(..).agg(..); a.columns = a.columns.droplevel(0); a.reset_index()`。
    *   ```
        ----- before -----
                    val1    
                   min max
          grouper         

        ------ after -----
          grouper  min  max
        0       x    0    2
        1       y    4    6 
        ```

*   **多个变量，多个聚合**：结果变量名为**(varname)_(statname)**：

    ```
    df.groupby(by="grouper").agg({"val1": min, 2:[sum, "size"]}).my_flatten_cols()
    # you can combine the names in other ways too, e.g. use a different delimiter:
    #df.groupby(by="grouper").agg({"val1": min, 2:[sum, "size"]}).my_flatten_cols(" ".join) 
    ```

    *   `a.columns = ["_".join(filter(None, map(str, levels))) for levels in a.columns.values]`在引擎盖下运行（因为这种形式的`agg()`结果在`MultiIndex`列上）。
    *   如果您没有助手，输入[@Seigi](https://stackoverflow.com/questions/14507794/python-pandas-how-to-flatten-a-hierarchical-index-in-columns/50558529?noredirect=1#comment84549138_14508355) :`my_flatten_cols`建议的解决方案可能会更容易，在这种情况下它的工作方式类似（但如果您在列上有数字标签，则会失败）`a.columns = ["_".join(t).rstrip("_") for t in a.columns.values]`
    *   要处理列上的数字标签，您可以使用[@jxstanford 和@Nolan Conaway](https://stackoverflow.com/a/45214611/1026) ( `a.columns = ["_".join(tuple(map(str, t))).rstrip("_") for t in a.columns.values]`) 建议的解决方案，但我不明白为什么`tuple()`需要调用，我相信`rstrip()`只有在某些列具有像`("colname", "")`(如果您`reset_index()`在尝试修复之前可能会发生这种情况`.columns`）
    *   ```
        ----- before -----
                   val1           2     
                   min       sum    size
          grouper              

        ------ after -----
          grouper  val1_min  2_sum  2_size
        0       x         0      4       2
        1       y         4     12       2 
        ```

*   **您想手动命名结果变量：（**[自 pandas 0.20.0 起已弃用，自](http://pandas.pydata.org/pandas-docs/stable/whatsnew.html#deprecate-groupby-agg-with-a-dictionary-when-renaming)0.23起[没有足够的替代方案](https://stackoverflow.com/q/44635626/1026)）

    ```
    df.groupby(by="grouper").agg({"val1": {"sum_of_val1": "sum", "count_of_val1": "count"},
                                       2: {"sum_of_2":    "sum", "count_of_2":    "count"}}).my_flatten_cols("last") 
    ```

    *   [其他](https://stackoverflow.com/a/32801170/1026)建议[包括](https://stackoverflow.com/q/39295910/1026)：手动设置列：`res.columns = ['A_sum', 'B_sum', 'count']`或`.join()`ing 多个`groupby`语句。
    *   ```
        ----- before -----
                           val1                      2         
                  count_of_val1 sum_of_val1 count_of_2 sum_of_2
          grouper                                              

        ------ after -----
          grouper  count_of_val1  sum_of_val1  count_of_2  sum_of_2
        0       x              2            2           2         4
        1       y              2           10           2        12 
        ```

## 辅助函数处理的案例

*   级别名称可以是非字符串，例如[Index pandas DataFrame by column numbers，当列名是 integers](https://stackoverflow.com/q/27156278/1026)时，我们必须转换为`map(str, ..)`
*   它们也可以是空的，所以我们必须`filter(None, ..)`
*   对于单级列（即除 MultiIndex 之外`columns.values`的任何内容），返回名称（`str`，而不是元组）
*   根据您的使用方式`.agg()`，您可能需要为一列保留最底部的标签或连接多个标签
*   （因为我是 pandas 的新手？）我经常希望`reset_index()`能够以常规方式使用 group-by 列，所以默认情况下它会这样做

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2017-07-20T12:23:44.227

处理多个级别和混合类型的通用解决方案：

```
df.columns = ['_'.join(tuple(map(str, t))) for t in df.columns.values] 
```

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2021-03-04T12:33:04.480

还有一个简短的，仅使用 pandas 方法：

```
df.columns = df.columns.to_flat_index().str.join('_') 
```

输出为：

```
 USAF_  WBAN_  day_  month_  ...  s_PC_sum  tempf_amax  tempf_amin  year_
0  702730  26451     1       1  ...       1.0       30.92       24.98   1993
1  702730  26451     2       1  ...       0.0       32.00       24.98   1993
2  702730  26451     3       1  ...       1.0       23.00        6.98   1993
3  702730  26451     4       1  ...       1.0       10.04        3.92   1993
4  702730  26451     5       1  ...       3.0       19.94       10.94   1993 
```

您会注意到不属于 MultiIndex 的列的尾随下划线。你提到你不关心这个名字，所以这可能对你有用。在我自己的类似用例中，所有列都有两个级别，所以这个简单的命令创建了很好的名称。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2016-11-30T12:29:41.247

可能有点晚了，但是如果您不担心重复的列名：

```
df.columns = df.columns.tolist() 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2015-04-03T18:12:37.930

如果您想在级别之间的名称中使用分隔符，此功能效果很好。

```
def flattenHierarchicalCol(col,sep = '_'):
    if not type(col) is tuple:
        return col
    else:
        new_col = ''
        for leveli,level in enumerate(col):
            if not level == '':
                if not leveli == 0:
                    new_col += sep
                new_col += level
        return new_col

df.columns = df.columns.map(flattenHierarchicalCol) 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2017-08-10T20:35:18.507

在@jxstanford 和@tvt173 之后，我编写了一个快速函数，它应该可以解决问题，而不管字符串/int 列名如何：

```
def flatten_cols(df):
    df.columns = [
        '_'.join(tuple(map(str, t))).rstrip('_') 
        for t in df.columns.values
        ]
    return df 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2018-10-26T15:40:38.140

我将分享一种对我有用的直接方式。

```
[" ".join([str(elem) for elem in tup]) for tup in df.columns.tolist()]
#df = df.reset_index() if needed 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2019-03-26T04:56:47.973

要在其他 DataFrame 方法链中展平 MultiIndex，请定义如下函数：

```
def flatten_index(df):
  df_copy = df.copy()
  df_copy.columns = ['_'.join(col).rstrip('_') for col in df_copy.columns.values]
  return df_copy.reset_index() 
```

然后使用该[`pipe`方法](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.pipe.html)在 DataFrame 方法链中应用此函数，在链中的任何其他方法之后`groupby`和`agg`之前：

```
my_df \
  .groupby('group') \
  .agg({'value': ['count']}) \
  .pipe(flatten_index) \
  .sort_values('value_count') 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-10-27T23:20:07.007

您也可以按照以下方式进行。考虑`df`成为您的数据框并假设一个二级索引（如您的示例中的情况）

```
df.columns = [(df.columns[i][0])+'_'+(datadf_pos4.columns[i][1]) for i in range(len(df.columns))] 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-06-10T09:01:34.897

另一个简单的例程。

```
def flatten_columns(df, sep='.'):
    def _remove_empty(column_name):
        return tuple(element for element in column_name if element)
    def _join(column_name):
        return sep.join(column_name)

    new_columns = [_join(_remove_empty(column)) for column in df.columns.values]
    df.columns = new_columns 
```

# matlab - Matlab 散点图 - 设置一致的颜色渐变

> ID：14507795
> 
> 赞同：1
> 
> 时间：2013-01-24T18:03:13.547
> 
> 标签：matlab, plot, matlab-figure

我正在制作一大堆单独的散点图。每一个都代表一个时间步长，因此最好让绘图之间的颜色渐变保持一致。散点图的默认颜色渐变取决于图中的值范围。有没有办法让我定义范围的最大值和最小值（所以我的所有绘图中的最大值和最小值组合在一起），并将其用作每个绘图的梯度范围？

现在我只有：

```
h = scatter(ModelInfo.X(:,1),ModelInfo.X(:,2),50,ModelInfo.y,'filled') 
```

其中 ModelInfo.y 是分配给每个 (X1,X2) 对的“值”。我想创建一个从 ModelInfo.y=0 到 30 的渐变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T18:07:21.127

您想使用[CAXIS](http://www.mathworks.com/help/matlab/ref/caxis.html)命令设置颜色条上的限制。

在每一个新的情节之后，打电话

```
caxis([0 30]) 
```

这样，颜色图从 0 映射到 30。低于 0 的值分别映射到第一个颜色，大于 30 的值分别映射到颜色图的最后一个颜色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T18:07:10.377

目前不在 Matlab 附近，但您应该能够使用[caxis设置色标](http://www.mathworks.com/help/matlab/ref/caxis.html)

```
 caxis([minVal, maxVal]); 
```

其中 minVal maxVal 是对指定最小值和最大值的限制。小于 minVal 或大于 maxVal 的数据值分别映射到 minVal 和 maxVal 。minVal 和 maxVallinearly 之间的值映射到当前颜色图。

# ghostscript - 提取文本和 -dProvideUnicode 使用的 GhostScript 问题

> ID：14507801
> 
> 赞同：1
> 
> 时间：2013-01-24T18:03:26.590
> 
> 标签：ghostscript

我将 GS 与 DjVu 驱动程序一起使用，如下例所示：

`gs %gs_args% -dProvideUnicode -dExtractText -sDEVICE=djvusep -o out.sep in.ps`

并注意到问题，即某些文件的文本未正确提取（我在从生成的文件中复制文本时在剪贴板中得到问号）。

我认为这是编码的一些问题，并删除了`-dProvideUnicode`开关，但是根本没有提取文本，并且我认为`-dExtractText`仅针对此驱动程序的标志需要它才能正常运行。

尝试运行单页 PDF 文件（`in.ps`通过`ps2write`设备生成），`ps2ascii`也没有给出任何文本。但其他工具，如 pdfminer、xpdf，可以提取正确的文本。PDF 查看器（如使用`mupdf`或 Acrobat 的 SumatraPDF）也可以按预期提取文本。

有没有人可能对这些无证开关有所了解，这可能是什么问题？

**更新**：只有当我通过`ps2write`路线时才会发生这种情况。相反，如果我直接使用 PDF，则没有问题。

这是 PDF 文件中的编码信息：

```
c:\temp>pdf-parser -s encoding sample.pdf
obj 11 0
 Type: /Font
 Referencing: 12 0 R, 20 0 R

  <<
    /BaseFont /XQKNMY+TT14112O00
    /FontDescriptor 12 0 R
    /Type /Font
    /FirstChar 32
    /LastChar 144
    /Widths [
253 0 0 0 0 0 0 0 293 293 0 0 220 313 220 0
0 467 467 0 0 0 467 0 467 467 0 0 0 0 0 0
0 680 0 0 0 653 0 773 760 0 0 740 0 833 0 0
0 0 0 480 613 0 680 0 0 0 0 0 0 0 0 0
0 407 513 414 500 414 320 447 513 227 0 467 227 773 513 513
513 0 333 367 293 487 467 667 460 414 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
220]
    /Encoding 20 0 R
    /Subtype /Type1
  >>

obj 20 0
 Type: /Encoding
 Referencing:

  <<
    /Type /Encoding
    /BaseEncoding /WinAnsiEncoding
    /Differences [
144/quoteright]
  >> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:08:48.233

这不是一个真正的 Ghostscript 问题。djvu 设备在 Ghostscript 构建中绝对是非标准的。我无法告诉您有关开关的任何信息，因为它们是 DejaVu 设备特有的。

如果您只想从文件中提取文本，您可以使用 txtwrite 设备（使用最新版本的 Ghostscript）。

如果您使用 PDF 文件，则文件中可能存在 ToUnicode CMap，可用于获取有关文本的 Unicode 信息。PostScript 不包含 ToUnicode CMap，因此无法从 PostScript 文件中获得 Unicode*信息*。我想这就是为什么 ps2write 输出不能从设备中提取文本的原因。

# vb.net - 长时间运行的过程

> ID：14507803
> 
> 赞同：-1
> 
> 时间：2013-01-24T18:03:39.733
> 
> 标签：vb.net, timer, interrupt, long-running-processes

我很快写了这个小的 rinky-dink vb.net 控制台应用程序来向某人展示一些东西。当我看到它时，我认为一定有比使用循环消耗更好的方法

虽然是真的

...

结束时

但我不知道它是什么。有什么想法吗？

```
Module ControlExecutive
    Private WithEvents MyTimer As New Timers.Timer
    Sub Main()
        MyTimer.Interval = 10000
        Console.WriteLine("Start timer, interrupt every 10000 ms")
        MyTimer.Start()
        OuterLoop()
    End Sub

    Sub OuterLoop()
        While True
            'wait for timer interrupts
        End While
    End Sub

    Sub HandleTimerInterrupt(ByVal sender As Object, ByVal e As System.Timers.ElapsedEventArgs) Handles MyTimer.Elapsed
        Console.WriteLine(String.Format("Interrupt at {0}", DateTime.Now))
    End Sub
End Module 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:14:57.223

而不是（或内部）等待的循环，您应该使用`System.Threading.Thread.Sleep(milliseconds)`. 这将暂停线程而不会导致 CPU 峰值。

# ruby-on-rails - 如何在 Rails 3.2 中获取相对路径？

> ID：14507812
> 
> 赞同：0
> 
> 时间：2013-01-24T18:04:15.573
> 
> 标签：ruby-on-rails

我有一个文件列表，我尝试获取一个相对路径

```
file = "/Users/yves/github/local/workshop/public/uploads/craftwork/image/1/a1d0.jpg"
Rails.public_path => "/Users/yves/github/local/workshop/public" 
```

# 我正在尝试获取 => "uploads/craftwork/image/1/a1d0.jpg"

```
file.relative_path_from(Rails.public_path) # is wrong 
# raising :  undefined method `relative_path_from' for #<String  ( file is a String..)

# so I tried to use Pathname class
Pathname.new(file).relative_path_from(Rails.public_path)

# but the I get another error
# undefined method `cleanpath' for String 
```

在 Rails 3.2 中是否不推荐使用 relative_path_from ？如果是的话，现在有什么好的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-05T20:30:55.933

由于这些属性现在返回字符串，我们可以将它们转换回路径名：

```
public_path = Pathname.new( Rails.public_path )
file_path = Pathname.new( file ) 
```

然后使用相对路径函数，最后将其转换回字符串

```
relative_path = file_path.relative_path_from( public_path ).to_s 
```

一起变成

```
Pathname.new( file ).relative_path_from( Pathname.new( Rails.public_path ) ).to_s 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:10:00.000

您可以“作弊”并使用 sub 删除 public_path ...

```
$ cat foo.rb 
file = "/Users/yves/github/local/workshop/public/uploads/craftwork/image/1/a1d0.jpg"
public_path = "/Users/yves/github/local/workshop/public"
puts file.sub(/^#{public_path}\//, '')

$ ruby foo.rb 
uploads/craftwork/image/1/a1d0.jpg 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-16T12:32:08.137

这是我用过的：

```
"#{Rails.root}/public/spreadsheets/file_name.xlsx" 
```

# powershell - PowerShell Word 2007/2010/2013 向表格添加标题并将表格 3 选项卡向右移动

> ID：14507815
> 
> 赞同：3
> 
> 时间：2013-01-24T18:04:23.493
> 
> 标签：powershell, ms-word

PowerShell V2 Word 2007/2010/2013

我创建了一个测试脚本，它插入一个 Word 表格并毫无问题地填充它。

还有两件事我想做：

在表格上方添加标题为“表格 x Citrix 服务” 将表格向右移动三个制表位。

示例文档可在[https://dl.dropbox.com/u/43555945/StackOverflowSample.docx找到](https://dl.dropbox.com/u/43555945/StackOverflowSample.docx)

这是我的测试代码：

```
$wdSeekPrimaryFooter = 4
$wdAlignPageNumberRight = 2
$wdStory = 6
$wdMove = 0
$wdSeekMainDocument = 0
$wdColorGray15 = 14277081
$wdCaptionPositionAbove = 0

$Word = New-Object -comobject "Word.Application"
$Word.Visible = $True
$word.Templates.LoadBuildingBlocks()
$BuildingBlocks=$word.Templates | Where {$_.name -eq "Built-In Building Blocks.dotx"}
$part=$BuildingBlocks.BuildingBlockEntries.Item("Motion")

$Doc = $Word.Documents.Add()
$Selection = $Word.Selection

$part.Insert($selection.Range,$True) | out-null
$selection.InsertNewPage()

#table of contents
$toc=$BuildingBlocks.BuildingBlockEntries.Item("Automatic Table 2")
$toc.insert($selection.Range,$True) | out-null

#set the footer
[string]$footertext="Report created by Webster"

#get the footer
$doc.ActiveWindow.ActivePane.view.SeekView=$wdSeekPrimaryFooter
#get the footer and format font
$footers=$doc.Sections.Last.Footers
foreach ($footer in $footers) 
{
    if ($footer.exists) 
    {
        $footer.range.Font.name="Calibri"
        $footer.range.Font.size=8
        $footer.range.Font.Italic=$True
        $footer.range.Font.Bold=$True
    }
} #end Foreach

$selection.HeaderFooter.Range.Text=$footerText

#add page numbering
$selection.HeaderFooter.PageNumbers.Add($wdAlignPageNumberRight) | Out-Null

#return focus to main document
$doc.ActiveWindow.ActivePane.view.SeekView=$wdSeekMainDocument

#move to the end of the current document
$selection.EndKey($wdStory,$wdMove) | Out-Null

$services = get-service | where-object {$_.DisplayName -like "*Citrix*"} | sort-object DisplayName

$TableRange = $doc.application.selection.range
$Columns = 2
$Rows = $services.count + 1
$Table = $doc.Tables.Add($TableRange, $Rows, $Columns)
$table.AutoFitBehavior(1)
$table.Style = "Table Grid"
$table.Borders.InsideLineStyle = 1
$table.Borders.OutsideLineStyle = 1
$xRow = 1
$Table.Cell($xRow,1).Shading.BackgroundPatternColor = $wdColorGray15
$Table.Cell($xRow,1).Range.Font.Bold = $True
$Table.Cell($xRow,1).Range.Text = "Display Name"
$Table.Cell($xRow,2).Shading.BackgroundPatternColor = $wdColorGray15
$Table.Cell($xRow,2).Range.Font.Bold = $True
$Table.Cell($xRow,2).Range.Text = "Status"
ForEach($Service in $Services)
{
    $xRow++
    $Table.Cell($xRow,1).Range.Text = $Service.DisplayName
    $Table.Cell($xRow,2).Range.Text = $Service.Status
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:24:00.483

用于`$Selection.InsertCaption(-2, "Citrix Services")`通过将该代码放在构建行的 foreach 循环上方来创建表标题。
第一个参数是字幕类型；-2 是*表格*，其他内置标签可通过负整数访问，如图形和方程式。

使用 rows.setleftindent() 将表格缩进到您想要的位置。第一个参数是缩进距离，第二个参数定义标尺样式。在缩进之后移动您的 autofitbehavior 实例，以确保表格自动调整正确。

在构建表格行的 foreach 循环之后，将以下行添加到您的代码中。

```
$Table.Rows.SetLeftIndent(200,1)
$table.AutoFitBehavior(1) 
```

希望这可以帮助！

# c# - 在 IIS 7 上使用 WCF 托管 silverlight Prism 时的 ipaddress:port vs localhost:port

> ID：14507820
> 
> 赞同：0
> 
> 时间：2013-01-24T18:04:30.003
> 
> 标签：c#, wcf, silverlight, iis, prism

这可能很简单，但请耐心等待。

当我将**带有 WCF 的 Silverlight 5 应用程序**部署到 IIS 时，使用简单的复制和粘贴技术，我可以完美地浏览网站，但是当我尝试通过像 192.168.1.3:8099 这样的 ipaddress 访问它时，每个服务调用都会返回错误，例如作为这个：

```
An exception occurred during the operation, making the result invalid.  Check InnerException for exception details.
  at .....
  at <MyNamespace>.OnGetSomethingFromDataBaseCompleted(Object state) 
```

我可以成功地定位来自其他机器的 WCF 服务（192.168.1.3:8099/SomeService.svc）。我编写了测试控制台应用程序来调用（并关闭）该服务，它正确地从远程 DBServer 获取了一些数据。然而在浏览器中什么都没有。

当导航到 192.168.1.3:8099 时，A 应该从浏览器添加回 Fiddler 不会注册此调用，但它会从 localhost:8099 注册。

**你能帮我吗？**

我认为对于比我更有部署经验的人来说，这是一个简单的问题，但如果您认为应该这样做，请继续阅读。

* * *

所以你正在阅读=>（棱镜）。

我有一个 Silverlight 应用程序，它连接到调用 WCF 服务的数据库（添加为 Silverlight WCF 服务 - VSTemplate）。

在这个应用程序中，我像[Jeremy Likness](http://csharperimage.jeremylikness.com/)在他的[博客上建议的那样介绍 Prism](http://csharperimage.jeremylikness.com/2009/11/dynamic-module-loading-with-silverlight.html)

我还使用 Web 代理从 ViewModel 访问 WCF 服务。

我的项目结构：

*   网络项目
*   SilverlightAppWithShell
*   模块A
*   模块B
*   共同项目

部署目录结构：

## C:\inetpub\wwwroot\MyAppFolder（IIS 用户可以访问它）

*   .\bin\AllDlls
*   .\ClientBin\AllXapFiles（来自上述所有项目的 XAP 文件）
*   .\Services\All *.cs 定义服务操作合同的文件
*   .\Web.config
*   .\TestPage.html
*   .\TestPage.aspx
*   .\Silverlight.js
*   .\AllServices *.scv 文件

最后但并非最不重要

*   .\clientaccesspolicy.xml

里面有这段代码：

```
<?xml version="1.0" encoding="utf-8"?>
<access-policy>
  <cross-domain-access>
    <policy>
      <allow-from http-request-headers="*">
        <domain uri="*"/>"
      </allow-from>
      <grant-to>
        <resource path="/Services" include-subpaths="true"/><!--I tried with App_Code here when renaming Services dir to App_Code with the same wain result-->
      </grant-to>
    </policy>
  </cross-domain-access>
</access-policy> 
```

感谢您阅读

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T01:20:11.273

在 Carlos Figueira 的[这篇](http://blogs.msdn.com/b/carlosfigueira/archive/2010/08/09/using-relative-addresses-for-services-in-silverlight-applications.aspx)文章之后，这就是我最终要做的并解决了我的问题。我不确定 Silverlight 5 是否有更好的解决方案，但它对我有用。

```
public static void UpdateMyServiceAddress(WebServiceMyProxies.MyServiceClient client)
        {
            client.Endpoint.Address = UpdateServiceAddress(client.Endpoint.Address.Uri.ToString());
        }

private static System.ServiceModel.EndpointAddress UpdateServiceAddress(string originalAddress)
        {
            int svcIndex = originalAddress.IndexOf(".svc");
            int serviceNameIndex = originalAddress.LastIndexOf('/', svcIndex);
            string serviceName = originalAddress.Substring(serviceNameIndex + 1);

            string baseAddress = Application.Current.Host.Source.ToString();
            baseAddress = baseAddress.Substring(0, baseAddress.LastIndexOf('/')); // removing /App.xap
            baseAddress = baseAddress.Substring(0, baseAddress.LastIndexOf('/')); // removing /ClientBin

            return new System.ServiceModel.EndpointAddress(String.Format("{0}/{1}/{2}", baseAddress,"Services", serviceName));
        } 
```

# android - 是否可以在 Android Google maps api v2 中显示/隐藏标记？

> ID：14507821
> 
> 赞同：16
> 
> 时间：2013-01-24T18:04:47.723
> 
> 标签：android, google-maps-markers, google-maps-api-2

我想（在我的 Android 应用程序中使用 Google maps api v2）根据类别隐藏或显示我的 GoogleMap 对象上的标记，就像在 google maps web api 中一样，例如：

我有一个带有 50 个标记的 GoogleMap，其中 20 个代表餐馆，20 个代表公共汽车站，10 个是电影院。

例如，如果我们取消勾选复选框，是否可以在 Android google maps api v2 上通过隐藏所有餐厅标记来过滤这些标记？

我想做类似的事情，但在我的 Android 设备上使用谷歌地图 api v2：[http ://www.geocodezip.com/v3_MW_example_categories.html](http://www.geocodezip.com/v3_MW_example_categories.html)

很抱歉这个基本问题，但我是初学者。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-24T19:10:25.053

试试这个方法。

```
 Marker restuarantMarkers = gMap.addMarker(new MarkerOptions()
                .position(latlng)
                .title("MyPlace").icon(BitmapDescriptorFactory.fromResource(R.drawable.ic_pin)).draggable(true)); 
```

**点击事件**

```
 restuarantMarkers.setVisible(false); 
```

这种方式可以使用循环..

请让我知道这对你有没有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T11:22:08.430

如果要过滤位置，可以使用对话框。

```
final Dialog dialog = new Dialog(context);
        dialog.setContentView(R.layout.dialog);
        Button bt_ok = (Button) dialog.findViewById(R.id.button1);
        final CheckBox cb1 = (CheckBox) dialog.findViewById(R.id.checkBox1);
        final CheckBox cb2 = (CheckBox) dialog.findViewById(R.id.checkBox2);
        dialog.setTitle("Category");

        bt_ok.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                mMap.clear();
                if (cb1.isChecked()){
                    mMap.addMarker(new MarkerOptions().position(new LatLng(44.109798, 15.242270)).title("Pin").icon(BitmapDescriptorFactory.fromResource(R.drawable.museum)));
                }
                if (cb2.isChecked()){
                    mMap.addMarker(new MarkerOptions().position(new LatLng(44.209798, 15.392270)).title("Pin 2").icon(BitmapDescriptorFactory.fromResource(R.drawable.restaurants)));
                }
                dialog.dismiss();
            }

        });

        dialog.show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:28:45.113

是的你可以！这就是如何...

//mMap 是一个已经被初始化的 GoogleMap 实例

```
mMap.setOnCameraChangeListener(getCameraChangeListener());
getCameraChangeListener() 
public OnCameraChangeListener getCameraChangeListener()

{
return new OnCameraChangeListener()
{
    @Override
    public void onCameraChange(CameraPosition position)

    {
        addItemsToMap(this.items);
    }

};

} 
```

//你的“Item”类至少需要一个唯一的id、纬度和经度。

```
private void addItemsToMap(List<Item> items)
{
  if(this.mMap != null)

{

    LatLngBounds bounds = this.mMap.getProjection().getVisibleRegion().latLngBounds;

    for(Item item : items)
    {

        if(bounds.contains(new LatLng(item.getLatitude(), item.getLongitude()))

        {
            if(!courseMarkers.containsKey(item.getId()))

            {

                this.courseMarkers.put(item.getId(),     this.mMap.addMarker(getMarkerForItem(item)));

            }

        }
        else
        {

            if(courseMarkers.containsKey(item.getId()))

            {

             courseMarkers.get(item.getId()).remove();
             courseMarkers.remove(item.getId());

            }

        }

    }

    }

   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-16T09:18:01.073

这里，LocationArray 是位置的 ArrayList，绘制在地图上。我们想显示在地图上绘制的所有标记。

```
 private void FitAllMarkers() {

    LatLngBounds.Builder builder = new LatLngBounds.Builder();
    for (int i = 0; i < LocationArray.size(); i++) {
        builder.include(new LatLng(Double.parseDouble(LocationArray.get(i).getLat()), Double.parseDouble(LocationArray.get(i).getLng())));

    }

    LatLngBounds bounds = builder.build();
    mMap.animateCamera(CameraUpdateFactory.newLatLngBounds(bounds, 100));

} 
```

# java - 关闭 JPanel 的父元素

> ID：14507824
> 
> 赞同：2
> 
> 时间：2013-01-24T18:04:54.763
> 
> 标签：java, swing, jframe, jpanel, swingutilities

是否可以关闭组件的父元素 .. 可能是来自 JPanel的`JFrame`/ ？`JInternalFrame`如果是的话怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T18:06:55.423

这将帮助您：

```
SwingUtilities.windowForComponent(panel).dispose(); 
```

或者

```
SwingUtilities.windowForComponent(panel).setVisible(false); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T18:08:41.370

[此答案](https://stackoverflow.com/questions/1234912/how-to-programmatically-close-a-jframe)的修改版本

```
public class CustomPanel extends JPanel {

  private JFrame parent; //Need to pass this reference somehow, constructor or otherwise

  public void closeJFrame() {
    WindowEvent winEvent = new WindowEvent(parent, WindowEvent.WINDOW_CLOSING);
    Toolkit.getDefaultToolkit().getSystemEventQueue().postEvent(winEvent );
  }
} 
```

# jquery - 不能在剑道网格上仅设置 2 个过滤器选项

> ID：14507826
> 
> 赞同：0
> 
> 时间：2013-01-24T18:05:00.433
> 
> 标签：jquery, telerik, kendo-ui, kendo-grid

注意：我只使用 kendo 的 javascripts 小部件，没有 mvc 包装器。数据取自 html 表：

```
 $("#grid1").kendoGrid({ 
```

我只需要 2 个过滤器选项来执行行过滤：*以*和*包含*开头，但如果我删除所有其他选项并只保留这 2 个*开头的*选项不起作用。我发现它必须至少是在 js 代码中声明的 3 个过滤器。

```
 operators: {
            //filter menu for "string" type columns
            string: {
                //eq: "Equal:",
                startswith: "Starts with:",
                contains: "Contains:"
            } 
```

我想知道我的代码中是否存在错误或错误声明的内容。我没有设法只设置一个过滤器选项，不管它是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:27:03.753

经过更多的挖掘，这似乎是旧版本的剑道中的一个错误。

使用您提供的相同过滤设置：

```
 operators: {
            //filter menu for "string" type columns
            string: {
                //eq: "Equal:",
                startswith: "Starts with:",
                contains: "Contains:"
            } 
```

我已经整理了一个 JSFiddle，它清楚地展示了您遇到的问题，在这里：http: [//jsfiddle.net/derickbailey/dFZhL/](http://jsfiddle.net/derickbailey/dFZhL/) - 这个版本运行的是稍旧版本的 Kendo。

我已经使用最新的 Kendo 版本组合了另一个版本的小提琴，在这里：http: [//jsfiddle.net/derickbailey/amUme/](http://jsfiddle.net/derickbailey/amUme/) - 并且过滤按预期工作。

我在 Kendo 的发行说明中也看到了一些与过滤器相关的项目：[http ://www.kendoui.c​​om/web/whats-new/release-notes/q3-2012-sp1-version-2012-3- 1315.aspx](http://www.kendoui.com/web/whats-new/release-notes/q3-2012-sp1-version-2012-3-1315.aspx)

如果您使用的是旧版本的剑道，您能否升级到最新版本，看看是否能解决问题？

# ruby-on-rails - 嵌套形式的 Rails 复选框

> ID：14507836
> 
> 赞同：3
> 
> 时间：2013-01-24T18:05:40.783
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, rails-activerecord

我正在尝试以嵌套形式实现一个复选框。

我有 3 个模型：主题、课程和小组。A Subjects 有很多课，每课都有并且属于很多组。

换句话说：我将**Subjects**作为父类，将**Lessons**作为子类，将**Groups**作为“孙子”类。

在“主题”表单中，我允许以嵌套形式创建 3 个课程。我之前已经创建了组，现在，我想在每节课中为组创建 HABTM 复选框，但是我在尝试在 Rails 中发送参数时遇到了一些麻烦。

参数的主要区别是目前我正在发送

```
"lesson"=>{"group_ids"=>["105", "106", "107"]} 
```

在其自己的。但是，我想要的是为该主题的每个单独课程发送 group_ids，如下所示：

```
"lessons_attributes"=>{"0"=>{"lesson_type"=>"Lecture", 
                             "id"=>"348",
                             "group_ids"=>["37", "38", "39", "40", "41", "42", "131"]}. 
```

详细地说，这是我发送的完整当前参数：

```
Parameters: {"utf8"=>"✓", "authenticity_token"=>"7r9g2d4lmiSyNZ60i8uos9m1shxVwb0Ly23Tkrshv8w=", "subject"=>{"subject_code"=>"", "subject_name"=>"", 
                   "lessons_attributes"=>{"0"=>{"lesson_type"=>"Lecture", "id"=>"348"}, 
                                          "1"=>{"lesson_type"=>"Tutorial","id"=>"349"}, 
                                          "2"=>{"lesson_type"=>"Laboratory","id"=>"350"}}, 
                                          "remarks"=>""},
                                          "lesson"=>{"group_ids"=>["105", "106", "107"]}, "commit"=>"Update Subject", "id"=>"166"} 
```

然而，我想发送的参数是这样的：

```
Parameters: {"utf8"=>"✓", "authenticity_token"=>"7r9g2d4lmiSyNZ60i8uos9m1shxVwb0Ly23Tkrshv8w=", "subject"=>{"subject_code"=>"", "subject_name"=>"", 
                 "lessons_attributes"=>{"0"=>{"lesson_type"=>"Lecture", "id"=>"348","group_ids"=>["37", "38", "39", "40", "41", "42", "131"]}, 
                                        "1"=>{"lesson_type"=>"Tutorial","id"=>"349", 
                                              "group_ids"=>["37", "38", "39", "40", "41", "42", "131"], 
                                        "2"=>{"lesson_type"=>"Laboratory","id"=>"350",
                                              "group_ids"=>["37", "38", "39", "40", "41", "42", "131"]}}, "remarks"=>""}, "commit"=>"Update Subject", "id"=>"166"} 
```

我没有正确发送参数，问题在于：`

```
<%= check_box_tag "lesson[group_ids][]", group.id, f.object.groups.include?(group) , id: "lesson_group_ids_#{group.id}"%>` 
```

特别是对于我的复选框，我正在实施这个：**课程[group_ids][]**。

我也尝试过 course_attributes[group_ids][]。但同样，我无法保存 HABTM 关系。我不确定我能做些什么来让小组为每节课节省开支。任何帮助，将不胜感激。

这些是相关代码：

```
<%= form_for(@subject) do |f| %>

  <div class="field">
    <%= f.label :subject_name %><br />
    <%= f.text_field :subject_name %>
  </div>

  <div>
    <%= f.fields_for :lessons do |lesson| %>
     <%= render "lesson_fields", :f => lesson %>
    <% end %>
  </div>

  <div class="actions">
    <%= f.submit %>
  </div>

<% end %> 
```

在 _lesson_fields.html.erb 中，我有：

```
<div class="field">
    <%= f.label :lesson_type %><br />
    <%= f.text_field :lesson_type,:readonly => true %>
  </div>

  <div>
  <% Group.all.each do |group|%>
   <div>
      <%= check_box_tag "lesson[group_ids][]", group.id, f.object.groups.include?(group) , id: "lesson_group_ids_#{group.id}"%>       
     <%= group.group_index %>  
   </div>
  <%end%>
  </div> 
```

对于模型

相关型号：

```
class Subject < ActiveRecord::Base
  attr_accessible :lessons_attributes
  has_many :lessons
end

class Lesson < ActiveRecord::Base
  belongs_to :subject
  has_and_belongs_to_many :groups
end

class Group < ActiveRecord::Base
  has_and_belongs_to_many :lessons 
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:14:09.233

I beleive you're missing an index after 'lesson' on the name of the checkbox tag (as in 'lesson[0][group_ids][]'. You can either add that manually, or you may be able to do something with fields_for. I tend to do what you're doing - loop through all Groups and show them all, decide if they are checked with a boolean test.

# ruby-on-rails-3 - Sendgrid 连接被拒绝

> ID：14507837
> 
> 赞同：1
> 
> 时间：2013-01-24T18:05:41.603
> 
> 标签：ruby-on-rails-3, heroku, smtp, sendgrid

我正在 Heroku 上开发一个 Ruby on Rails 3.2 应用程序。我添加了 sendgrid 插件

```
heroku addons:add sendgrid:starter 
```

然后重新启动

```
heroku restart 
```

但是，如果我尝试在我的应用程序中发送密码电子邮件（我正在使用设计登录 gem），我会在日志中得到这个

```
2013-01-24T17:35:37+00:00 app[web.1]: Started POST "/users/password" for xxx.xxx.xxx.xx at 2013-01-24 17:35:37 +0000
2013-01-24T17:35:37+00:00 app[web.1]: Processing by Devise::PasswordsController#create as HTML
2013-01-24T17:35:37+00:00 app[web.1]:   Parameters: {"utf8"=>"✓", "authenticity_token"=>"XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX=", "user"=>{"email"=>"xxxxxxxx.xxxxxx@gmail.com"}, "commit"=>"Send me reset password instructions"}
2013-01-24T17:35:38+00:00 app[web.1]:   Rendered vendor/bundle/ruby/1.9.1/gems/devise-2.2.2/app/views/devise/mailer/reset_password_instructions.html.erb (1.0ms)
2013-01-24T17:35:41+00:00 app[web.1]: 
2013-01-24T17:35:41+00:00 app[web.1]: Sent mail to xxx.xxxxx@gmail.com (3080ms)
2013-01-24T17:35:41+00:00 app[web.1]: Completed 500 Internal Server Error in 3311ms
2013-01-24T17:35:41+00:00 app[web.1]: 
2013-01-24T17:35:41+00:00 app[web.1]: Errno::ECONNREFUSED (Connection refused - connect(2)):
2013-01-24T17:35:41+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/net/smtp.rb:546:in `initialize'
2013-01-24T17:35:41+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/net/smtp.rb:546:in `open'
2013-01-24T17:35:41+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/net/smtp.rb:546:in `tcp_socket'
2013-01-24T17:35:41+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/net/smtp.rb:555:in `block in do_start'
2013-01-24T17:35:41+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/timeout.rb:58:in `timeout'
2013-01-24T17:35:41+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/timeout.rb:89:in `timeout'
2013-01-24T17:35:41+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/net/smtp.rb:555:in `do_start'
2013-01-24T17:35:41+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/net/smtp.rb:525:in `start'
2013-01-24T17:35:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/mail-2.4.4/lib/mail/network/delivery_methods/smtp.rb:144:in `deliver!'
2013-01-24T17:35:41+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/mail-2.4.4/lib/mail/message.rb:2034:in `do_delivery' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:12:53.317

您需要配置`ActiveMailer`类似的东西

```
ActionMailer::Base.smtp_settings = {
  :address        => "smtp.sendgrid.net",
  :port           => "25",
  :authentication => :plain,
  :user_name      => ENV['SENDGRID_USERNAME'],
  :password       => ENV['SENDGRID_PASSWORD'],
  :domain         => ENV['SENDGRID_DOMAIN']
} 
```

并确保您的应用程序在环境中具有 SEGRID 配置变量 - 您可以使用`heroku config`.

# sql - 无限滚动Sql语句获取下一条记录

> ID：14507838
> 
> 赞同：4
> 
> 时间：2013-01-24T18:05:44.743
> 
> 标签：sql, sql-server-2008

我正在尝试使用 javascript 和以下 sql 语句（sql server 2008）在我的 .NET 网站中进行无限滚动。此 sql 获取前 10 行，但我的 javascript 导致每次用户滚动到页面底部时执行 sql，并且每次它都会拉取相同的（前 10 条）记录，但我希望它拉下 NEXT 10 条记录，每次用户滚动到底部。每次用户滚动到页面底部时，如何使用此 sql 和 row_number 来获取 NEXT 10 行？

```
SELECT * FROM 
  (SELECT ROW_NUMBER() OVER (ORDER BY DateTime) As RowNum, 
  * From Topic) As a 
WHERE RowNum 
BETWEEN 1 AND 10 
```

这是javascript：

```
<script type="text/javascript">
        $(document).ready(function () {

       function lastPostFunc() {
           $('#divPostsLoader').html('<img src="images/bigLoader.gif">');

           //send a query to server side to present new content
           $.ajax({
               type: "POST",
               url: "Default.aspx/Foo",
               data: "{}",
               contentType: "application/json; charset=utf-8",
               dataType: "json",
               success: function (data) {

                   if (data != "") {
                       $('.divLoadData:last').after(data.d);
                   }
                   $('#divPostsLoader').empty();
               }

           })
       };

       //When scroll down, the scroller is at the bottom with the function below and fire the lastPostFunc function
       $(window).scroll(function () {
           if ($(window).scrollTop() == $(document).height() - $(window).height()) {
               lastPostFunc();
           }
       });

    });
</script> 
```

我现在在存储过程中有上面的 sql：

```
<System.Web.Services.WebMethod()>
Public Shared Function Foo() As String
    Dim strConn As String = "Data Source="
    Dim conn As New SqlConnection(strConn)
    Dim Cmd As New SqlCommand("InfiniteScroll", conn)
    Cmd.CommandType = CommandType.StoredProcedure
    Dim DA As New SqlDataAdapter(Cmd)
    Dim DS As New DataSet()
    DA.Fill(DS, "RefologyForumTopic")
    Dim getPostsText As New StringBuilder()
    Dim dv As DataView = DS.Tables(0).DefaultView

    For Each myDataRow As DataRowView In dv
        getPostsText.AppendFormat("price: {0}</br>", myDataRow("Topic"))
        getPostsText.AppendFormat("description: {0}</br></p>", myDataRow("UserID"))
    Next

    getPostsText.AppendFormat("<div style='height:15px;'></div>")
    Return getPostsText.ToString()
End Function 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:12:30.003

通常，我们使用传递页面和/或结果计数器参数的存储过程来执行此操作。像这样的东西：

```
SELECT * 
FROM (
   SELECT ROW_NUMBER() OVER (ORDER BY DateTime) As RowNum, * 
   FROM Topic) As a 
WHERE RowNum BETWEEN 1+(@recsPerPage)*(@page-1) AND @recsPerPage*(@page) 
```

这是[SQL 小提琴](http://sqlfiddle.com/#!3/58920/27)。

- 编辑

这一切都未经测试，但应该让你朝着正确的方向前进：

首先，在页面中添加一个隐藏页面来存储你当前的页码：

```
<input type=hidden id=hidPage name=hidPage value="1"> 
```

其次，在 ajax 调用中更新数据参数：

```
data: { Page: $("#hidPage").value() }, 
```

第三，更新您的网络方法以接受参数：

```
Public Shared Function Foo(page as string (or int -- would need to test for sure)) As String 
```

然后更新您的 SQL 以传递参数。我不打算重写，但使用此链接寻求帮助：http: [//msdn.microsoft.com/en-us/library/bbw6zyha (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/bbw6zyha(v=vs.71).aspx)

最后，在 ajax 成功处理程序上重置 hidPage 变量。

```
var newPage = parseInt($("#hidPage").val());
$("#hidPage").val(newPage+1); 
```

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:14:15.757

您需要排除先前选择的行。为此，您需要创建一个历史表，您可以在其中插入先前选择的记录。

所以，如果`topic`表的某列有主键，我们就叫该列`topic_id`，而历史表是`hist_topic`用列上的主键调用的`topic_id`，你需要从表中查询出`topic`表中没有的前10条记录`hist_topic`。

读取数据后，只需`topic_id`在`hist_topic`. 这可以使用批量插入快速完成。

在第一次查询之前，您需要清空先前结果的表，这样您就不会得到误报。

为了处理多个用户，您需要使用附加字段`session`数字扩展历史表，该字段将包含为每个页面加载生成的唯一编号。当您使用 AJAX 时，您不必担心将这个唯一 id 从一个页面传递到另一个页面。可以通过在页面加载时调用附加脚本来生成唯一 ID。

如果您在查询时添加了新记录，这也会对您有所帮助。

步骤应该是这样的：页面加载-生成唯一ID查询

```
SELECT * FROM 
  (SELECT ROW_NUMBER() OVER (ORDER BY DateTime) As RowNum, 
  * From Topic) As a 
WHERE RowNum BETWEEN 1 AND 10
AND NOT EXISTS (SELECT 1 FROM HIST_TOPIC B WHERE A.TOPIC_ID = B.TOPIC_ID AND B.SESSION = @SESSION); 
```

插入历史记录 - 使用批量插入

清理插入的值可以`onunload`在`body`.

最重要的优点之一是使用这种方法不会丢失记录。让我们考虑将页面保留在客户端级别的方法。想象一下有以下记录：

```
id   |   some_number   |  some_text
------------------------------------
1    |   1             |    text1
2    |   4             |    text4
3    |   9             |    text9
4    |   10            |    text10
5    |   19            |    text19 
```

假设您要求前 5 条记录，并且您在 some_number 上有一个 order by 子句，升序。

`select * from topic where RowNum BETWEEN (@recsPerPage+1)*(@page-1) AND @recsPerPage*(@page) order by some_number`

`@recsPerPage = 5`

然后系统得到一条新记录

`6 11 text11`

在下一个查询中，因为新记录将是新的数字 5，所以查询将再次为您带来您在第一页中看到的记录：

`5 19 text19`

LE：我对 .NET Web 应用程序没有经验，因为我在 Java 中工作，因此我只能在我的世界里给你一个例子，也许你可以翻译一下。

**批量插入**

至于批量插入，我找到了[批量插入的链接](http://blogs.msdn.com/b/nikhilsi/archive/2008/06/11/bulk-insert-into-sql-from-c-app.aspx "从 c# 应用程序批量插入")

**在页面加载时生成唯一 ID**

我不知道如何在 .NET Web 应用程序中进行操作，但我会提示您如何使用 JSP 在 Java Web 应用程序中进行操作。在 JSP 中，首先执行 java 代码（放置在 servlet 中），然后生成 html。因此，如果我在开头添加一个 servlet，它将在页面加载时执行。

```
<% long uniqueId = UniqueIdGeneration.getUniqueId();%> 
```

每当我在 scriptlet 中时，`uniqueId`该变量将在整个页面中可用。`long`该`getUniqueId`方法将以毫秒为单位返回时间。您应该在返回结果之前让它休眠一毫秒，以确保只生成唯一的数字。

**卸载页面**

使用. `onunload`_`body`

```
<javascript>
function doUnload() {
  var session=<%=uniqueId%>;
  //use the new session variable to pass it to the server using AJAX. The server will respond by deleting the records corresponding to it.
}
</javascript> 
```

# wcf-data-services - DataSvcUtil.exe 并生成自定义命名空间

> ID：14507840
> 
> 赞同：1
> 
> 时间：2013-01-24T18:05:48.397
> 
> 标签：wcf-data-services

我正在使用 DataSvcUtil，我想为我生成的类生成一个自定义命名空间，但这似乎是不允许的。是否有一个原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T22:52:11.330

DataSvcUtil.exe 是 System.Data.Services.Design.EntityClassGenerator 类的一个相当薄的包装器，它支持使用自定义[命名空间前缀](http://msdn.microsoft.com/en-us/library/cc679652.aspx)，但不能任意自定义命名空间。我不知道没有提供这种支持的具体原因，当时可能没有足够令人信服的场景。

如果你需要更灵活的代码生成，我强烈建议你看看团队前段时间发布的[T4 模板。](http://blogs.msdn.com/b/astoriateam/archive/2012/07/02/trying-out-the-prerelease-odata-client-t4-template.aspx)WCF 数据服务的代码生成很可能更倾向于使用 T4 而不是 DataSvcUtil/EntityClassGenerator。

# nhibernate - 将属性拉到父对象级别

> ID：14507848
> 
> 赞同：1
> 
> 时间：2013-01-24T18:06:28.783
> 
> 标签：nhibernate, join, fluent-nhibernate, fluent-nhibernate-mapping

采用以下 NHibernate 场景：

我有两张桌子：

```
Header
  HeaderID    (int),
  ForeignKey1 (int),
  ForeignKey2 (int)

Child
  ForeignKey1 (int),
  ForeignKey2 (int)
  Description (varchar)
  ...
  Metric Shed Ton Of Other Columns That Im Not InterestedIn(various types) 
```

我正在使用 Fluent NHibernate - 我想将对象`Description`上的值投影`Child`到父级（这是正确的术语吗？！） - 但显然`Child`它的列中包含很多数据 - 我不想要所有这些额外的数据，只是描述......我如何让 NH 生成与以下查询等效的内容：

```
select 
    Header.*, Child.Description 
from 
    Header 
inner join 
    Child ON Header.ForeignKey1 = Child.ForeignKey1 AND Header.ForeignKey2 = Child.ForeignKey2 
```

到目前为止，我完成这项工作的唯一方法是使用`Reference`映射来引用`Header`实体中的子对象，然后创建一个`Header`指向 `Child.Description`. 显然这意味着 NH 在查询`Description`

（我认为复合键在这里不是问题，连接似乎工作正常 - 这只是如何获取数据而不获取所有不感兴趣的数据）

目前我的标题实体如下所示：

```
public virtual int HeaderID { get; set; }
public virtual int KeyColumn1 { get; set; }
public virtual int KeyColumn2 { get; set; }
public virtual Child Child { get; set; }
public virtual string Description { get { return Child.Description; } } 
```

它的映射：

```
 Id(x => x.HeaderID);
  Map(x => x.KeyColumn1);
  Map(x => x.KeyColumn2);
  References<Child>(x => x.Child).Fetch.Join().Columns("KeyColumn1", "KeyColumn2").ReadOnly(); 
```

基本上，我无法更改架构，我对`Child`表中的其余数据不感兴趣，也无法创建视图（无法更改架构）

如果可能的话，有人有什么想法吗？我将查询一大堆`Header`对象，我需要该字段，`Child`但我不希望查询永远占用！

这是我必须在查询级别而不是使用 hql 或 crit API 做的事情吗？

编辑：

尝试使用查询 API 使其正常工作

```
Header.Session.QueryOver<Header>(() => parent)
            .Where(h => h.HeaderID == 1)
            .Inner.JoinQueryOver(x => x.Child, () => child)
            .Select(x => x.HeaderID, x => x.ForeignKey1, x => x.ForeignKey2, x => child.Description); 
```

检查 SQL 显示查询正是我想要的 - 但我得到一个异常`System.Object[] is not of type Header and cannot be used in this generic collection`

我认为这是因为我得到的只是一个值数组`Select()`- 知道如何将其转换为`Header`对象吗？

编辑：我结束了

```
Header.Session.QueryOver<Header>(() => parent)
            .Where(h => h.HeaderID == 1)
            .Inner.JoinQueryOver(x => x.Child, () => child)
            .Select(x => x.HeaderID, x => x.ForeignKey1, x => x.ForeignKey2, x => child.Description)
            .TransformUsing(new GenericResultTransformer(typeof(Header), "HeaderID", "ForeignKey1", "ForeignKey2", "Description")); 
```

这正是我想要的方式 - 如果有人有更好的建议我愿意接受，但就像我说的那样，我根本无法触及架构

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:17:09.770

有惰性属性的概念，但这实际上是针对相反的情况，即您要排除少量属性。

如果这是用于演示场景，则可以使用 NHibernate 的任何查询方法，仅投影您喜欢的列 - 查询结果不必是完整的实体。例如，参见 HQL 和 LINQ 中的 select 子句，以及 Criteria/QueryOver 中的 SetProjection() 系列。

# android - 查找多个点之间的距离

> ID：14507852
> 
> 赞同：1
> 
> 时间：2013-01-24T18:06:46.613
> 
> 标签：android, sqlite

我想从数据库中获取那些距离给定点2公里以内的指定距离的点。为此，我在 sqllite 中使用以下查询，

```
 public Cursor GetLoc(int lat, int longi, int dist)
    {   
        Cursor c = db.rawQuery("SELECT *, ((Math.acos(Math.sin("+ lat +"* PI() / 180) * Math.sin("+ LATITUDE +"* PI() / 180) + Math.cos("+ lat +"* PI() / 180) * Math.cos("+LATITUDE+"* PI() / 180) * Math.cos(("+ longi +" - "+LONGITITUDE+") * PI() / 180)) * 180 / PI()) * 60 * 1.1515 * 1.609344) AS distance FROM " + LOCATION_TABLE +" WHERE distance = " + dist, null);
        return c;
    } 
```

在此查询中，LATITUDE 和 LONGITITUDE 是 LOCATION_TABLE 的列。

这个查询在 mysql 中给出了正确的结果，但在这里它给出了这个错误

```
 android.database.sqlite.SQLiteException: near "(" 
```

我没有得到查询中的问题所在。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:22:48.730

如果您使用的是 Android，我建议使用 Location 类的[distanceTo()](http://developer.android.com/reference/android/location/Location.html#distanceTo%28android.location.Location%29)方法。我不会要求数据库执行此操作

更多信息[在这里](https://stackoverflow.com/questions/8049612/calculating-distance-between-two-geographic-locations)。

# php - php登录系统记住我的风格

> ID：14507856
> 
> 赞同：-1
> 
> 时间：2013-01-24T18:06:59.650
> 
> 标签：php, remember-me, login-script

我写了这段代码以安全的方式开始会话

```
function sessionStart() {
    $session_name = 'sec_session_id'; // Set a custom session name
    $secure = false; // Set to true if using https.
    $httponly = true; // This stops javascript being able to access the session id. 

    ini_set('session.use_only_cookies', 1); // Forces sessions to only use cookies. 
    $cookieParams = session_get_cookie_params(); // Gets current cookies params.
    session_set_cookie_params($cookieParams["lifetime"], $cookieParams["path"], $cookieParams["domain"], $secure, $httponly); 
    session_name($session_name); // Sets the session name to the one set above.
    session_start(); // Start the php session
    session_regenerate_id(true); // regenerated the session, delete the old one. 
} 
```

现在我有一个问题，如果我们有这个 session_regenrate_id 那么我们的会话 ID 将在每个页面中执行时发生变化？如果我为会话重新生成 ID，我应该如何为想要登录 1 个月的用户使用 cookie？例如，将 $cookieParams["lifetime"] 增加到 1 个月是否安全？如果没有，我应该如何在 1 个月内实现这一目标？我使用 ssl，然后我认为我的 cookie 是安全的。

**更新**

我去的另一种方法是将会话存储在数据库中。

```
 <?php
    /**
     * PDO Session Handler
     * @author Daniel15 <dan.cx>
     *
     * This class is actually static, but since PHP doesn't support static classes, abstract is close
     * enough. You do not instantiate the class; you just call the static "init" method.
     */
    abstract class PDOSession
    {
            private static $db;
            private static $oldData;
            /**
             * Initialise the PDO session handler
             * @param PDO PDO instance to use for database
             */
            public static function init(PDO $db)
            {
                    self::$db = $db;
                    // Add the session handlers
                    session_set_save_handler('PDOSession::open', 'PDOSession::close', 
                                             'PDOSession::read', 'PDOSession::write', 
                                             'PDOSession::destroy', 'PDOSession::garbageCollect');
                    session_start();
            }

            /**
             * Session open handler
             * @param string Path to save session to
             * @param string Name of the session
             */
            public static function open($save_path, $session_name)
            {
                    // Nothing
                    return true;
            }

            /**
             * Session close handler
             */
            public static function close()
            {
                    // Nothing
                    return true;
            }

            /**
             * Session load handler. Load the session
             * @param string Session ID
             */
            public static function read($session_id)
            {
                    // Load the session data from the database
                    $query = self::$db->prepare('
                            SELECT data
                            FROM sessions
                            WHERE session_id = :session_id');
                    $query->execute(array(':session_id' => $session_id));

                    return $query->fetchColumn();
            }

            /**
             * Session save handler. Save the session
             * @param string Session ID
             * @param string Data to save to session
             */
            public static function write($session_id, $data)
            {
                    /* Try to update the existing session. If we can't find one, then create a new one. If you
                     * are using MySQL, this can be done in a single INSERT statment via INSERT ... ON 
                     * DUPLICATE KEY UPDATE. Remove the UPDATE and edit the INSERT to do it this way.
                     * See http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html
                     *
                     * This does two queries so you can use any DBMS.
                     */

                    $query = self::$db->prepare('
                            UPDATE sessions
                            SET data = :data, last_activity = :last_activity
                            WHERE session_id = :session_id');
                    $query->execute(array(
                            ':session_id' => $session_id,
                            ':data' => $data,
                            'last_activity' => time()));

                    // No session to update? Create a new one
                    if ($query->rowCount() == 0)
                    {
                            self::$db
                                    ->prepare('
                                            INSERT INTO sessions
                                                    (session_id, data, last_activity)
                                            VALUES
                                                    (:session_id, :data, :last_activity)')
                                    ->execute(array(
                                            ':session_id' => $session_id,
                                            ':data' => $data,
                                            'last_activity' => time())
                                    );
                    }
            }

            /**
             * Session delete handler. Delete the session from the database
             * @param string Session ID
             */
            public static function destroy($session_id)
            {
                    self::$db
                            ->prepare('
                                    DELETE FROM sessions
                                    WHERE session_id = :session_id')
                            ->execute(array(':session_id' => $session_id));
            }

            /**
             * Session garbage collector. Delete any old expired sessions
             * @param int How many seconds do sessions last for?
             */
            public static function garbageCollect($lifetime)
            {               
                    self::$db
                            ->prepare('
                                    DELETE FROM sessions
                                    WHERE last_activity < :min_time')
                            ->execute(array(':min_time' => time() - $lifetime));
            }
    }
?> 
```

现在为此我应该如何在这种情况下创建cookie？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:17:16.740

### 你需要使用cookies...

现在我们需要让这个复选框做一些事情。即，选中时，记住用户的用户名，并将其放在用户每次相应访问登录页面时的用户名字段中。为此，我决定使用 cookie。我无法使用我在上面设置的“ID_my_site”用户名 cookie，因为每次用户注销时它都会被杀死。解决方案是创建一个名为“remember”的附加 cookie，它也存储用户名，如下所示：

```
$year = time() + 31536000;
setcookie('remember_me', $_POST['username'], $year); 
```

上面我们添加了这个额外的cookie，持续一年，这样当用户登录时，它会创建一个额外的cookie来保存用户的用户名。但是，目前，它没有被使用。改变：

```
<input type="text" name="username" maxlength="40"> 
```

至：

```
<input type="text" name="username" maxlength="40" value="<?php
echo $_COOKIE['remember_me']; ?>"> 
```

在我们的登录表单中，现在将此用户名存储到文本字段中以供将来访问：

不过，我们还没有完成。目前，代码正在为每个用户存储这些信息。我们希望它只记住那些特别请求此功能的用户。为此，我们在创建附加 cookie 之前运行一个简单的检查。此检查查看是否已选中记住我复选框，如果已选中，则仅创建我们的新 cookie。像这样：

```
if($_POST['remember']) {
setcookie('remember_me', $_POST['username'], $year);
}
elseif(!$_POST['remember']) {
    if(isset($_COOKIE['remember_me'])) {
        $past = time() - 100;
        setcookie(remember_me, gone, $past);
    }
} 
```

上面的代码还处理了存在 cookie 的情况，但用户通过将任何现有的 cookie 设置为过去的时间来确定他们不再希望被记住，实际上是杀死它们。

[在这里](http://www.downwithdesign.com/web-development-tutorials/adding-remember-feature-php-login-script/)阅读更多...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T18:30:53.290

详细了解它的工作原理将花费比我全部写完更多的时间。但我应该能够为您提供有关其工作原理的高级摘要。

PHP 会话是有时间限制的。他们会在一段时间后被清理干净。您可以在 PHP 配置中延长该时间，但不足以有效。

所以需要做的是创建一个替代的登录路径。这必须谨慎实施，因为不小心会打开安全漏洞。

该概念可以概括为创建与用户相关联的一次性使用的唯一 cookie，并可用作用户名和密码的替代品。

此 cookie 应该是唯一的，由随机数据生成，并与用户关联存储。它应该是有时间限制的（如果在一两周内不使用它将过期）并在使用后重新生成。

更改电子邮件/密码等用户数据应需要用户密码。

站点应该使用 SSL 使 cookie 拦截更加困难。

# python - Python中用于程序范围设置的“真实”全局变量

> ID：14507858
> 
> 赞同：3
> 
> 时间：2013-01-24T18:07:04.477
> 
> 标签：python, global-variables

我的主执行文件中有这个：

```
databaseUrl = appPath + '/db/timey.db' 
```

它指向我的 SQLite DB。

我已经为访问我的模型（数据/数据库）做了一些封装。所以在 databaseURL 最终被使用之前，我需要从**main** -> view.py -> model.py -> db.py传递它。这将是愚蠢的，因为例如我的视图类不需要知道我的数据库或其路径。那么，什么是真正使这条路径“全局”可访问而不总是传递它的正确方法呢？

我试图让 databaseUrl 全球化，但我不喜欢这个想法，也没有真正让它像那样工作。

将信息存储在外部文件中将是一种矫枉过正，因为无论如何它是唯一（常量！）全局使用的变量。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T18:10:27.077

我认为将其存储在外部文件中一点也不为过。我认为有一个设置或配置文件很有帮助

```
# settings.py

import os
PROJECT_ROOT = os.path.abspath(os.path.dirname(__file__))
DATABASE_URL = ''
DATABASE_USER = ''
DATABSE_PASSWORD = '' 
```

等等

```
from myproject import settings 
settings.DATABASE_URL 
```

这是 django 和 scrapy 存储项目数据库配置设置和所有其他项目设置的方法

另外，如果您有一个数据库类，将这些设置存储在其中可能有意义吗？我不知道。

settings.py 文件可让您轻松设置开发/本地数据库 url。为此，您可以拥有一个`local_settings.py`永远不会受到版本控制或打包在项目中的文件

在您的 settings.py 文件中

```
try:
  from local_settings import *
except ImportError:
  pass 
```

然后在 local_settings.py 你可以覆盖 DATABASE_URL 作为你的开发数据库！这是一个 django 项目约定

# java - 使用 Applet 或 Java Web Start 将 Java 桌面应用程序转换为 Web

> ID：14507860
> 
> 赞同：1
> 
> 时间：2013-01-24T18:07:06.383
> 
> 标签：java, qt, applet, javafx, jnlp

我知道我可以将 Swing 应用程序转换为 Applet 或 Java Web Start 应用程序。是否可以对不是 Swing 的应用程序做同样的事情，比如使用 Java 的 Qt？

我真正在寻找的是一个使用 Java 的 UI 框架，它尽可能跨平台，并且还具有丰富的 UI 功能集。能够将应用程序作为桌面或 Web 应用程序运行会更可取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:04:45.717

> 我真正在寻找的是一个使用 Java 的 UI 框架，它尽可能跨平台，并且还具有丰富的 UI 功能集。

假设桌面部署，三个主要框架是[Swing](http://docs.oracle.com/javase/tutorial/uiswing/)、[SWT](http://www.eclipse.org/swt/)和[JavaFX](http://docs.oracle.com/javafx/)。

试试[JavaFX Ensemble 示例](http://www.oracle.com/technetwork/java/javafx/samples/index.html)，看看该技术是否适合您的需要。

> 我知道我可以将 Swing 应用程序转换为 Applet 或 Java Web Start 应用程序。是否可以对不是 Swing 的应用程序做同样的事情，比如使用 Java 的 Qt？

QT 是不在 JVM 上运行的本机代码 - 它不是 Java UI 框架。Applet 和 Web Start 程序需要一个 Java 类作为它们的入口点。在这种情况下，任何使用 QT 都需要 Java <=> QT 适配层，我不知道存在任何此类东西 - 您可能需要基于[JNI](http://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/jniTOC.html)等技术自己构建它。

> 能够将应用程序作为桌面或 Web 应用程序运行会更可取。

有关各种 JavaFX 部署选项的信息，请参阅[JavaFX 部署指南，有关各种 Swing 部署选项的信息，请参阅](http://docs.oracle.com/javafx/2/deployment/jfxpub-deployment.htm)[Swing 部署指南](http://docs.oracle.com/javase/tutorial/deployment/)。

Web 应用程序的定义非常模糊。以下是一些不同的场景：

*   您仅限于 html5 => 在服务器上生成 html 以分发给客户端。
*   您希望 html 启动 Java 应用程序 => 然后可以使用 [WebStart](http://docs.oracle.com/javase/tutorial/deployment/webstart/index.html)与 [Java 部署工具包](http://java.com/en/download/faq/deployment_toolkit.xml)相结合的东西。
*   您将在浏览器窗口中呈现 JavaFX 应用程序 => 然后使用[浏览器嵌入式应用程序](http://docs.oracle.com/javafx/2/deployment/deployment_toolkit.htm#BABJHEJA)。

嵌入java应用程序有很多陷阱是网页（只需使用google发现其中一些）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T20:50:25.420

如果您想使用 Qt，您首先必须为 Java 制作 Qt 绑定，因为它们当前无法使用。

如果您想使用 Java Applet 中的 Qt 绑定，您需要将您的绑定设置为可安装的扩展，除非您知道自己在做什么，否则这将是一个潜在的安全风险。您还必须让用户安装您的扩展程序。此外，Linux 附带的 FOSS 插件 IcedTea-web 也不会加载扩展。所以如果你想让你的扩展在 Linux 上工作，你将不得不 fork IcedTea-web 并制作你自己的插件。

所以简短的回答是：坚持使用 Swing。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T18:21:01.220

我在其中一个项目中所做的是将应用程序开发为 Web 应用程序，然后生成可安装的应用程序来分发我的应用程序。这有很大的好处：

1.  它可以安装在服务器中并公开可用。就像普通的 Web 应用程序一样。
2.  它也可以安装在桌面上。

我使用“ [Jetty](http://jetty.codehaus.org/jetty/) ”将 Web 服务器嵌入到我的应用程序中，并且能够在桌面环境中作为独立的应用程序运行该应用程序。Jetty 的口号是*“不要在 Jetty 中部署你的应用程序，在你的应用程序中部署 Jetty”。*

我还使用“ [IzPak](http://izpack.org) ”将我的应用程序打包到可执行 JAR 中以进行安装。如果您想让可能没有安装 Java 的人轻松安装该 JAR，您可以使用[launch4j](http://launch4j.sourceforge.net/)，这是一个将 JAR 包装到 EXE 中的工具。因此，它可以首先验证计算机是否已经安装了 Java，如果没有，则通知用户他需要安装 Java 才能继续。唯一的缺点是，如果您将应用程序包装在 EXE 中，则会限制对其他平台的可移植性，但这是您根据要求做出的决定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T23:25:00.463

Java Web Start 应用程序可以包含本机库，所以是的，您应该能够将使用 Qt 的应用程序（假设存在绑定）转换为 JWS 应用程序。

另一方面，Applet 很难与 AWT/Swing 以外的任何东西一起工作，因为您无法控制顶级窗口的创建。

# android - 如何通过 url (AsyncTask, android) 获取 xml？

> ID：14507866
> 
> 赞同：0
> 
> 时间：2013-01-24T18:07:22.070
> 
> 标签：android, android-asynctask

我有以下课程：

```
public class MainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        XmlManager xm = new XmlManager();
        Log.i("tag",documentToString(xm.getXmlFromUrl("http://domen.com/abc/timelist.xml")));
    }
    //................
}

public class XmlManager {
    public Document getXmlFromUrl(String url) {
        GetXmlTask txt = new GetXmlTask();
        txt.execute(url);
        Document doc = null;
        try {
            doc = txt.get(5, TimeUnit.SECONDS);
            Log.i("tag", "test");
        }
        catch (Exception e) {
            e.printStackTrace();
        }

        return doc;
    }
    //................
}

public class GetXmlTask extends AsyncTask<String, Void, org.w3c.dom.Document> {
    @Override
    protected Document doInBackground(String... arg0) {
          String url = "";
              if( arg0.length > 0 ){
                  url = arg0[0];                
              }

              Document doc = null;
          try {
            doc = stringToDom(convertStreamToString(new URL(url).openStream()));
          }
          catch (Exception e) {
            e.printStackTrace();
          }

          return doc;
    }
    //................
} 
```

不幸的是，我不明白错误存在于哪里。我在 LogCat 中看到（没有过滤器）：

> 01-24 17:47:44.194：W/Zygote(37)：预加载的可绘制资源因配置而异！！01-24 17:47:44.204: W/Zygote(37): 预加载的可绘制资源 #0x1080446 (res/drawable-mdpi/popup_inline_error_above_holo_light.9.png)，随配置而变化！！01-24 17:47:44.284: W/Zygote(37): 预加载的可绘制资源 #0x1080447 (res/drawable-mdpi/popup_inline_error_holo_dark.9.png)，随配置而异！！01-24 17:47:44.294: W/Zygote(37): 预加载的可绘制资源 #0x1080448 (res/drawable-mdpi/popup_inline_error_holo_light.9.png)，随配置而异！！01-24 17:47:46.315: W/Zygote(37): 预加载的可绘制资源 #0x10802ec (res/drawable-mdpi/ic_lockscreen_outerring.png) 随配置而变化！！01-24 17:47:48.644：A/BatteryStatsImpl(93)：原因：libcore.io.ErrnoException：打开失败：/mnt/sdcard/.android_secure/'，跳过：权限被拒绝。01-24 17:48:44.462: I/ActivityManager(93): 启动 proc com.svox.pico 广播 com.svox.pico/.VoiceDataInstallerReceiver: pid=541 uid=10024 gids={1015} 01-24 17: 48:51.142: W/NetworkManagementSocketTagger(93): setKernelCountSet(10041, 1) 失败，错误号 -2 01-24 17:48:55.792: W/NetworkManagementSocketTagger(93): setKernelCountSet(10005, 0) 失败，错误号 -2

按应用程序名称过滤：LogCat 中有 void。

按标签“标签”过滤：

> 01-24 17:48:03.064: W/NetworkManagementSocketTagger(93): setKernelCountSet(10005, 1) 失败，错误号 -2 01-24 17:48:51.142: W/NetworkManagementSocketTagger(93): setKernelCountSet(10041, 1) 失败使用 errno -2 01-24 17:48:55.792: W/NetworkManagementSocketTagger(93): setKernelCountSet(10005, 0) 失败，出现 errno -2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:10:05.917

似乎未正确解析 XML 文件以在您的应用程序中使用。解决此问题的一种可能解决方案是创建一个适当的 XML 解析器，然后使用它来遍历`AsyncTask`. 这是我创建的解析器的示例：

*   [XML解析器](https://gist.github.com/4626337)

接下来，您所要做的就是使用解析器获取 DOM 元素并将信息推送到您想要在`onPostExecute()`方法中显示的任何位置。这是一个示例，

```
........

private class LoadExampleTask extends
        AsyncTask<Void, Integer, ArrayList<HashMap<String, String>>> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        // code here
    }

    @Override
    protected ArrayList<HashMap<String, String>> doInBackground(
            Void... params) {

        XMLParser parser = new XMLParser(); // the parser create as seen in the Gist from GitHub
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_VENUE);

        // looping through all song nodes <venue>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(KEY_ID, parser.getValue(e, KEY_ID));
            map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
            map.put(KEY_DESCRIPTION, parser.getValue(e, KEY_DESCRIPTION));
            map.put(KEY_LOCATION, parser.getValue(e, KEY_LOCATION.toString()));
            map.put(KEY_TAGS, parser.getValue(e, KEY_TAGS.toString()));
            map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));
            map.put(KEY_THUMB_LARGE_URL, parser.getValue(e, KEY_THUMB_LARGE_URL));

            // adding HashList to ArrayList
            exampleList.add(map);
        }

        return exampleList;
    }

    @Override
    protected void onPostExecute(ArrayList<HashMap<String, String>> result) {
        super.onPostExecute(result);

        try {
            // Getting adapter by passing xml data ArrayList
            adapter = new YourExampleAdapter(getActivity(), exampleList);
            list.setAdapter(adapter);
            adapter.notifyDataSetChanged();

        } catch (NullPointerException e) {
            e.printStackTrace();
        }
    }
}

........ 
```

此外，这是用于此方法的 XML 文件结构的示例，但任何结构都应该没问题，只要您正确映射键：

```
<venues>
    <venue>
      <id></id>
      <title></title>
      <location></location>
      <tags></tags>
      <description></description>
      <thumb_url></thumb_url>
      <thumb_large_url></thumb_large_url>
    </venue>
</venues> 
```

希望这有助于解决您的错误。

# ruby-on-rails - Rails WEBrick 未将日志写入终端（标准输出）

> ID：14507868
> 
> 赞同：3
> 
> 时间：2013-01-24T18:07:25.993
> 
> 标签：ruby-on-rails, webrick

WEBrick 通常将其输出写入 development.log 和 stdout。但是它突然停止这样做并且它没有写入标准输出。我们得到的只是

```
Booting WEBrick
=> Rails 3.2.8 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server 
```

然后什么都没有。development.log 似乎已正确写入。

这是一个特定于项目的问题，因为它发生在我们团队的所有成员身上，在不同的计算机上。另一方面，如果我创建另一个 Rails 项目（并复制 Gemfile 和 Gemfile.lock 以确保我拥有相同的 gem），我会在终端上得到正常的输出。

这是一个大问题，因为它阻止我们使用 pry 或 ruby​​-debug，因为我无法访问断点上的进程。

我们正在使用 Ruby ruby​​-1.9.3-p194、Rails 3.2.8 和 WEBrick 1.3.1。万一这很重要，我们都在 Mac（Mountain Lion）上。

有什么想法可能导致这种情况以及如何解决它？我们需要标准输出！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:28:16.703

原来有人在config.ru中添加了这三行

```
log = File.new("console.log", "a+")
$stdout.reopen(log)
$stderr.reopen(log) 
```

弄清楚这一点非常痛苦，所以不用说，不要那样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T01:54:51.787

如果你使用[pry-remote](https://github.com/mon-ouie/pry-remote)你应该没问题。

# javascript - 支持非 Javascript 用户 - JQuery Slide

> ID：14507869
> 
> 赞同：1
> 
> 时间：2013-01-24T18:07:26.730
> 
> 标签：javascript, jquery, web

我目前`display:none`用来隐藏我网站上的所有 div。用户单击例如“信息”或“联系人”，相应的 div 将通过 JQuery 向下滑动。为了支持没有 Javascript 的用户，如果未启用 Javascript，链接将转到“info.php”和“contact.php”。

维护起来相当麻烦，因为当我进行任何更改时，我必须同时更新主页和非 JavaScript 版本（info.php、contact.php 等）。

对于没有 Javascript 的用户，对 JQuery 滑动 div 的合理备份是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:10:07.450

当我理解你的正确时，使用静态内容制作一个 php 文件。（所有站点上的内容）和包含来自另一个文件的每个包含的内容（信息/联系人），具体取决于“页面”之类的 GET 参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T18:22:47.047

使用 jQuery隐藏`<div>`s 以便没有 JavaScript 的用户仍然可以`<div>`在一长页中看到所有 s。另一方面，使用 JavaScript 的用户可以`<div>`像往常一样滑动 s。

> *   jQuery IS JavaScript - 不能作为备用计划。
> *   不能简单地互换使用 JavaScript 和 jQuery 这两个术语

jQuery 是一个 JavaScript 库。通过禁用 JavaScript，jQuery 脚本将无法隐藏`<div>`s. 关键是在 JavaScript 不可用时保持它的功能。只要您不对页面执行关键操作以使其在没有 JavaScript 的情况下无法使用，您就可以满足那些非 JavaScript 用户的需求。在这种情况下，将修改工作交给 jQuery（或 JavaScript）是一种保留功能的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T18:27:20.350

At first add a class `to_hide` to all divs which should be hidden when javascript is activated.

The simplest way is to hide the divs like this on page load:

```
$(document).ready(function() {
    $('.to_hide').hide();
}); 
```

Note that if you do this, the layout will blink when loaded (the full content will be shown at first and then the dynamic divs will be hidden).

To avoid blinking you can add css rule for `to_hide` class dynamically. Use the following function in the `<head>` to do that:

```
function dyn_css_rule(sSelector, sCssText) {
    try {
        var aSS = document.styleSheets;
        var i;
        for (i=aSS.length-1; i>=0; i--) {
            var oCss = document.styleSheets[i];
            var sMedia = (typeof(oCss.media) == "string")?
                oCss.media:
                oCss.media.mediaText;
            if (!sMedia
                || sMedia.indexOf("screen") != -1
                || sMedia.indexOf("all") != -1
            ) {
                break;
            }
        }
        if (oCss.insertRule) {
            oCss.insertRule(sSelector + " {" + sCssText + "}", oCss.cssRules.length);
        } else if (oCss.addRule) {
            oCss.addRule(sSelector, sCssText);
        }
    } catch(err) {
        var tag = document.createElement('style');
        tag.type = 'text/css'; 
        try {
            tag.innerHTML = sSelector + " {" + sCssText + "}";
        } catch(err) {
            tag.innerText = sSelector + " {" + sCssText + "}";
        }
        document.getElementsByTagName('head')[0].appendChild(tag);
    }
    return sSelector + "{" + sCssText + "}";
};

dyn_css_rule('.to_hide', 'display: none'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T21:11:49.603

我最终使用了一个结合了安东尼的答案和这个答案的解决方案：[https ://stackoverflow.com/a/8928909/1342461](https://stackoverflow.com/a/8928909/1342461)

```
<html class="no-js">
<body>
<div id="foo"></div>
</body>
</html>

#foo
{
    display: none;
}

html.no-js #foo
{
    display: block;
}

$(document).ready(
   function()
   {
     $('html').removeClass('no-js');
   }
); 
```

没有javascript的人将看到所有的div。然后，我可以设置我的导航链接`a href="#info"`，例如，让它向下滚动到非 JavaScript 用户的正确 div，同时为 JavaScript 用户执行“slide.down()”等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-24T18:31:23.860

**纯 CSS 解决方案**

这可能会或可能不会根据情况起作用，但您实际上可以使用 IE8 及更高版本中的 css 选择器来模仿下拉菜单的行为。[这是一个例子](http://jsbin.com/umotiz/1)。单击菜单，只要将鼠标悬停在内容周围，内容就会出现，无需 javascript。

**功能性**

默认情况下，所有内容都是隐藏的。但是，由于 :active 伪类，您可以更改单击父级时要显示的内容。不过这很不方便——用户必须按住鼠标才能看到任何东西。但是，我们可以稍微作弊——通过添加一个显示内容的 :hover 伪类，如果用户单击并悬停，内容将停留在原处。

到目前为止，我们有这个 css：

```
.container.content {
  display: none; 
}
.container:active .content {
  display: block;
}
.content:hover {
  display: block; 
} 
```

虽然这有点不稳定 - 您必须将鼠标向下移动到内容上才能使其持续存在，并且可能会造成混淆。我们可以通过使内容比看起来更大来作弊。一个简单的方法就是填充（这就是我在添加的示例中所做的），但这可能会导致一些奇怪的回流问题。我认为更好的方法是添加故意的间距 div，以增加内容的大小而不改变流程。

如果我们添加这个

```
<div style="position:absolute; top:-50px; height: 50px; width: 100%;"></div> 
```

在内容的开头，有一个不可见的 div 悬停在菜单上，这将扩展悬停工作的区域。类似的事情可以做到底部，给我们留下[一个具有更大悬停区域的解决方案，并且不会触发超出主要内容的回流。](http://jsbin.com/umotiz/3/edit)

**剩下的问题**

无论如何，这并不完美，因为它肯定不如 javascript 灵活。没有滑动，如果用户鼠标移出，您就无法可靠地显示内容。

正如其他人所建议的那样，您仍然可以在用户启用它之后使用 javascript 来改进它 - 这仍然可以作为 noscript 用户的一个不错的备份。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-24T18:22:44.327

将您的 info.php 正文放在包含文件中。让我们说 info.inc.php

当非 js 用户单击链接时，他们会转到包含文件的 info.php。

但是当一个 js 用户单击该链接时，您将 info.inc.php 加载到您的 div 上，然后仅使用 jquery 显示它。

说

```
$('a.info').click(function(e){
    e.preventDefault();
    $('#infoDiv').load('info.inc.php')
                .show();
    return false;
}); 
```

当您需要更新内容时，只需更新包含文件即可。

# android - android如何使relativelayout不可点击并且它的itme可点击

> ID：14507878
> 
> 赞同：0
> 
> 时间：2013-01-24T18:08:11.137
> 
> 标签：android, android-layout

我有一个带有 relativelayout 标题的列表视图，当我单击 relativelayout 中的任何空间时，它会变成白色，我不想要那个白色，如果用户单击该空间，则不会发生任何事情，但是如果他单击图像进入那个relativelayout 有我可以在 onclick 中处理它的操作。

这是相对布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/rl_simple_list_item_header"
    android:focusable="true"
    android:orientation="horizontal" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/orderMeal"
        android:layout_marginLeft="20dip"
        android:id="@+id/tv_restaurant_description_orderMeal"
        android:drawableTop="@drawable/order_meal" />
    <TextView 
        android:id="@+id/iv_simple_list_item_header_favorite"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/favorite"
        android:layout_alignParentRight="true"
        android:layout_marginRight="20dip"
        android:drawableTop="@drawable/favorite"/>
</RelativeLayout> 
```

# 编辑

```
01-25 21:00:42.718: E/AndroidRuntime(24121): FATAL EXCEPTION: main
01-25 21:00:42.718: E/AndroidRuntime(24121): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.Syriatel.EatTel/com.Syriatel.EatTel.Restaurant_Description}: java.lang.NullPointerException
01-25 21:00:42.718: E/AndroidRuntime(24121):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
01-25 21:00:42.718: E/AndroidRuntime(24121):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
01-25 21:00:42.718: E/AndroidRuntime(24121):    at android.app.ActivityThread.access$1500(ActivityThread.java:121)
01-25 21:00:42.718: E/AndroidRuntime(24121):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
01-25 21:00:42.718: E/AndroidRuntime(24121):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-25 21:00:42.718: E/AndroidRuntime(24121):    at android.os.Looper.loop(Looper.java:130)
01-25 21:00:42.718: E/AndroidRuntime(24121):    at android.app.ActivityThread.main(ActivityThread.java:3701)
01-25 21:00:42.718: E/AndroidRuntime(24121):    at java.lang.reflect.Method.invokeNative(Native Method)
01-25 21:00:42.718: E/AndroidRuntime(24121):    at java.lang.reflect.Method.invoke(Method.java:507)
01-25 21:00:42.718: E/AndroidRuntime(24121):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
01-25 21:00:42.718: E/AndroidRuntime(24121):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
01-25 21:00:42.718: E/AndroidRuntime(24121):    at dalvik.system.NativeStart.main(Native Method)
01-25 21:00:42.718: E/AndroidRuntime(24121): Caused by: java.lang.NullPointerException
01-25 21:00:42.718: E/AndroidRuntime(24121):    at com.Syriatel.EatTel.Restaurant_Description.initialize(Restaurant_Description.java:46)
01-25 21:00:42.718: E/AndroidRuntime(24121):    at com.Syriatel.EatTel.Restaurant_Description.onCreate(Restaurant_Description.java:35)
01-25 21:00:42.718: E/AndroidRuntime(24121):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-25 21:00:42.718: E/AndroidRuntime(24121):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
01-25 21:00:42.718: E/AndroidRuntime(24121):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-26T14:24:31.753

设置布局可点击，不带任何 onClickListener

```
<RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:id="@+id/info1"
            android:clickable="true"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:38:23.330

如果您将 onclicklistener 分配给实际项目，而不是在活动中实现它，这应该不是问题。

```
tv_favorite = (TextView) header.findViewById(R.id.iv_simple_list_item_header_favorite);
tv_favorite.setOnClickListener( new OnClickListener(){
    @Override
public void onClick(View v) {
        tv_favorite.setText("asdfasdfasdf");
}

}); 
```

如果您想要 ListView 中的单个项目（而不是标题），您应该使用为整个 ListView 设置的 OnItemClickListener。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T18:21:12.763

尝试让你的`RelativeLayout`焦点集中：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:id="@+id/rl_simple_list_item_header"
    android:orientation="horizontal"
    android:focusable="true"
    android:focusableInTouchMode="true" > 
```

**更新**

如果你想`TextView`在你的标题内点击，你可以这样做：

```
View header = LayoutInflater.from(this).inflate(R.layout.simple_list_item_header, null);
View favorite = header.findViewById(R.id.iv_simple_list_item_header_favorite);

lv_restaurantInformation = (ListView) findViewById(R.id.lv_restaurant_description_information);
lv_restaurantInformation.addHeaderView(header);

favorite.setOnClickListener(this); 
```

然后在`onClick`方法中处理它`Activity`：

```
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.iv_simple_list_item_header_favorite:
        Toast.makeText(this, "onClick", Toast.LENGTH_SHORT).show();
        break;

    default:
        break;
    }
} 
```

# php - 如何向 iPhone 上的用户显示特殊的页面覆盖？

> ID：14507881
> 
> 赞同：0
> 
> 时间：2013-01-24T18:08:32.827
> 
> 标签：php, javascript, iphone, html

如果您从计算机访问 webmd，您会看到一个页面，但如果您从 iPhone 访问 webmd，您*不仅*会获得他们的移动页面（这很容易完成），他们**还会**向您显示一个带有“点击关闭”的特殊叠加层按钮，邀请您下载他们的应用程序。

在任何地方都有这个组件吗？有没有人有任何关于最佳方式的入门、链接或提示？我想原则上它就像一个照片灯箱，但我正在寻找专门用于邀请下载该应用程序的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:11:11.997

它被称为[智能应用横幅](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html)

您基本上将一个特殊的元标记添加到您的 html

```
<meta name="apple-itunes-app" content="app-id=myAppStoreID, affiliate-data=myAffiliateData, app-argument=myURL"> 
```

包括您要链接到的应用的应用商店 ID。app-argument url 将被传递给适当的 AppDelegate 方法。

# delphi - 如何创建一个字符串类型？

> ID：14507885
> 
> 赞同：10
> 
> 时间：2013-01-24T18:08:52.403
> 
> 标签：delphi, types, delphi-5

Raymond Chen 今天的一篇[博客文章](http://blogs.msdn.com/b/oldnewthing/archive/2013/01/24/10387757.aspx)让我意识到我遇到的问题的优雅解决方案。

可以使各种**shell**函数，而不是全部采用`ITEM­ID­LIST`结构，只接受：

*   `ITEM­ID_CHILD`
*   `ID­LIST_RELATIVE`
*   `ID­LIST_ABSOLUTE`
*   `ITEM­ID_CHILD_ARRAY`

结构。这些结构都是**相同**的，但现在您可以在编译器级别强制执行*概念类型。*

## 回到德尔福

我有一组功能：

*   有些**只**走一条路：（例如`C:\Users\Ian\Desktop\AllisonAngel.jpg`）
*   有些**只**取文件名：（例如`AllisonAngel.jpg`）
*   有些**只拿**一个文件夹：（例如`C:\Users\Ian\Desktop`）

现在它们都被声明为`string`，例如：

```
 function GetFilenames(Folder: string; ...): ...
 function IsValidBatchFilename(Path: string): ...
 function GetReportType(Filename: string): ... 
```

我必须相信我传递的是正确的东西；而且我相信开发人员（例如*我*）知道以下之间的区别：

*   一条**路径**
*   文件**名**
*   和一个**文件夹**

我想更改函数以使用*“键入”*字符串：

```
 function GetFilenames(Folder: TFolderOnly; ...): ...
 function IsValidBatchFilename(Path: TFullPath): ...
 function GetReportType(Filename: TFilenameOnly): ... 
```

在哪里：

```
type
   TFullPath = type string;
   TFolderOnly = type string;
   TFilenameOnly = type string; 
```

除了没有实际的打字发生：

```
var
   dropFolder: string;
begin
   dropFolder := GetDropFolderPath(LCT);

   GetFilenames(dropFolder); <-- no compile error

end; 
```

我想要的是*“不同”*类型的字符串；也就是说`string`，它是以长度为前缀、引用计数、以空值结尾的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T18:24:23.117

您可以使用高级记录来完成此操作。例如，你可以做

```
type
  TFileName = record
    FFileName: string;
  public
    class function IsValidFileName(const S: string): boolean; static;
    class operator Implicit(const S: string): TFileName;
    class operator Implicit(const S: TFileName): string;
  end;

implementation

class function TFileName.IsValidFileName(const S: string): boolean;
begin
  result := true {TODO};
end;

class operator TFileName.Implicit(const S: string): TFileName;
begin
  if IsValidFileName(S) then
    result.FFileName := S
  else
    raise Exception.CreateFmt('Invalid file name: "%s"', [S]);
end;

class operator TFileName.Implicit(const S: TFileName): string;
begin
  result := S.FFileName;
end; 
```

同样对于`TPath`和`TFolder`。优点：

*   期望的函数`TPath`将不接受 a `TFileName`（或其他组合）。
*   您仍然可以分配`TPath`到/从常规字符串。如果从字符串转换为 a `TPath`，您将自动检查字符串以查看它是否包含有效路径。
*   或者，您可以通过编写更多类运算符来指定如何将 a`TPath`分配给 a `TFileName`（或其他组合） 。`Implicit`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-24T18:19:05.303

为每种字符串类型创建不同的记录类型。不同的记录类型不是赋值兼容的，即使字符串类型是兼容的。

```
type
  TFullPath = record value: string end;
  TFolderOnly = record value: string end; 
```

Chen 的文章将新的 shell 功能与创建不同句柄类型的经典 STRICT 宏进行了比较，我记得，声明不同的结构正是 STRICT 宏的工作方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T18:19:16.907

使用 Delphi 处理基本类型的方式，我很高兴这是“你无法从这里到达那里”的情况。

您的字符串类型声明都将满足 Delphi 的类型兼容性和赋值兼容性规则。`var`他们将限制的是带有参数的过程声明。如果您将函数声明更改为 var 参数而不是引用或值参数，您将在最后一个示例中收到编译错误。

说了这么多，反正都是没用的。您仍然无法确保输入只是一个文件名，即使是`TFilenameOnly`类型，并且无论如何都必须在您的过程中测试内容。

# ruby - rvm 使用不工作

> ID：14507887
> 
> 赞同：0
> 
> 时间：2013-01-24T18:08:54.230
> 
> 标签：ruby, rvm

刚刚安装了rvm。当我使用:`rvm use 1.9.3`时，我得到：

```
Gemset '' does not exist, 'rvm gemset create ' first, or append '--create'. 
```

当我这样做时：`rvm gemset create test`，我得到：

```
Can not create gemset before using a ruby.  Try 'rvm use <some ruby>'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:31:46.160

跑步：

```
rvm use 1.9.3 --install --create 
```

将解决问题，在安装过程中必须有一个错误，阻止创建默认/全局 gemsets，你注意到什么了吗？

# javascript - 将下拉框的内容存储到 var 中，然后使用 var 加载新的下拉框内容

> ID：14507892
> 
> 赞同：-1
> 
> 时间：2013-01-24T18:09:21.867
> 
> 标签：javascript

1.) 如何使用 javascript 保存 box1 的内容并将其存储到变量 (x) 中，用逗号分隔它们？由于我将在后台进行一些数据库工作，因此使用此方法存储值很重要。

下拉框中的内容示例：

```
[BOX1]
volvo
saab
mercedes
audi 
```

结果变量：

```
var x = volvo,saab,mercedes,audi 
```

2.) 使用变量 (x) 如何使用逗号分隔值重新填充下拉 [BOX2]。

```
[BOX2]
volvo
saab
mercedes
audi 
```

这是HTML：

```
<!DOCTYPE html>

<html>

<head>

</head>

<body>

<select id="box1" style="width: 100px;">
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option>
</select>
<br>
<input type="button" value="Save" name="Save">

<br><br>

<input type="button" value="Populate" name="Populate"><br>

<select id="box2" style="width: 100px;" name="D1"></select>

<br>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:27:25.793

您可以通过添加事件处理程序来检索选项并将它们简单地放入另一个选择框。

[工作示例](http://jsbin.com/osuber/4/edit)

```
//temp holds DOM elements
//temp2 holds only the values

var temp = [];
var temp2 = [];

function save() {
  var cH = document.getElementById('box1').children;
  for (var i in cH) {
    if(cH.hasOwnProperty(i) && cH[i].nodeName == 'OPTION') {
      temp.push(cH[i]);
      temp2.push(cH[i].value);
    }
  }
  alert(arr2csv());
}

function populate() {
  var popul = csv2arr();
  var box2 = document.getElementById('box2');
  /*
  for(var i=0;i<temp.length; i++) {
    box2.options.add(new Option(temp[i].text,temp[i].value));
  }
*/
  for(var i=0;i<popul.length; i++) {
    box2.options.add(new Option(popul[i],popul[i]));
  }
}

function arr2csv() {
  return temp2.join();
}

function csv2arr() {
    return arr2csv().split(',');
}

document.getElementById('testsave').addEventListener("click", save);
document.getElementById('testpopulate').addEventListener("click", populate); 
```

# algorithm - 优化算法：导出集合的最快方法

> ID：14507898
> 
> 赞同：0
> 
> 时间：2013-01-24T18:09:36.303
> 
> 标签：algorithm, optimization, set

我正在为比赛编写程序，我需要比所有其他竞争对手都快。为此，我需要一点算法帮助；理想情况下，我会使用最快的算法。

对于这个问题，我得到了两件事。第一个是元组列表，每个元组正好包含两个元素（字符串），每个元素代表一个项目。第二个是一个整数，表示总共有多少个唯一项。例如：

# 项目 = 3

[("ball","chair"),("ball","box"),("box","chair"),("chair","box")]

相同的元组可以重复/它们不一定是唯一的。）我的程序应该计算出当项目分为两组时可以“同意”的最大元组数。这意味着如果将所有项目分成两个理想组，即组 1 和组 2，那么第 1 组中的第一个项目和第 2 组中的第二个项目的最大元组数是多少。

例如，我之前的例子的答案是 2，第 1 组中有“ball”，第 2 组中有“chair”和“box”，满足前两个元组。我不一定需要知道哪些项目属于哪个组，我只需要知道满足的元组的最大数量是多少。

目前我正在尝试一种递归方法，但它在 (n^2) 上运行，在我看来效率太低了。有没有人有一种方法可以产生更快的算法？

谢谢！！！！！！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:35:56.233

加快您的任务的方法：

**1.使用整数**

将字符串转换为整数（将字符串存储在数组中并使用元组的位置。

String[] words = {"ball", "chair", "box"};

在 tupls 中，球现在有数字 0（数组中的位置 0），椅子 1，框 2。比较整数比字符串快。

**2.避免递归**

由于递归开销，递归很慢。
例如查看递归实现中的二进制搜索算法，然后查看 java 是如何实现`binSearch()`的（使用 while 循环和迭代）

如果问题非常复杂以至于非递归实现对人脑来说太复杂，那么递归会很有帮助。

迭代更快，但在您通过实现自己的堆栈来模仿递归调用的情况下则不然。

但是，您可以开始使用递归算法来实现，一旦它起作用并且它是合适的算法，然后尝试转换为非递归实现

**3\. 尽可能避开物体**

如果你想要最快，现在它变得丑陋！

tuppel 数组可以存储为 Point(x,y) 类的数组，也可以更快地存储为 int 数组：
示例：(1,2)、(2,3)、(3,4) 可以存储为array: (1,2,2,3,3,4) 这需要更少的内存，因为一个对象至少需要 12 个字节（在 java 中）。更少的内存变得更快，当数组真的很大时，你的结构将有望适合处理器缓存，而对象数组则不能。

**4\. 编程语言**

在 C 中它会比在 Java 中更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:47:38.463

最大切割是你的问题的一个特例，所以我怀疑你有一个二次算法。（最大切割是 NP 完全的，它对应于每个元组 (A,B) 也反向出现为 (B,A) 相同次数的情况。）

您在这里尝试的最佳策略是“分支和绑定”。它是您可能已经编写好的简单递归搜索的变体。您跟踪迄今为止找到的最佳解决方案的价值。在每个递归调用中，您检查是否有可能使用您迄今为止修复的选项击败最知名的解决方案。

可能有帮助（或可能有害）的一件事是“探查”：对于每个尚未修复的项目，看看是否将该项目放在两侧之一只会导致次优解决方案；如果是这样，您知道该项目需要在另一侧。

另一个有用的技巧是对经常作为元组的第一个元素和第二个元素出现的项目进行递归。

您应该特别注意“绑定”步骤——根据您已确定的选择，找到最佳解决方案的上限。

# java - In-app Billing V3 Service nullpointer Android

> ID：14507901
> 
> 赞同：5
> 
> 时间：2013-01-24T18:09:51.680
> 
> 标签：java, android, service, binding

目前我正在试验“应用内计费 V3”。根据谷歌的说法，我必须创建一个服务，所以我已经做到了，但我无法绑定。

这是我的代码：

主要活动：

```
Intent("com.android.vending.billing.InAppBillingService.BIND"),
                    mServiceConn, Context.BIND_AUTO_CREATE); 
```

我也有这个：

```
IInAppBillingService mService;

ServiceConnection mServiceConn = new ServiceConnection() {

     public void onServiceConnected(ComponentName name, 
              IBinder service) {

                System.out.println("Test!");
               mService = IInAppBillingService.Stub.asInterface(service);
     }

     public void onServiceDisconnected(ComponentName name) {
       mService = null;
     }

}; 
```

在我的清单文件中，我有这个：

`<service android:name="com.android.vending.billing.IInAppBillingService" />`

我使用[http://developer.android.com/google/play/billing/billing_integrate.html](http://developer.android.com/google/play/billing/billing_integrate.html)作为来源。

# wcf - WCF 服务因操作返回实体类而失败

> ID：14507902
> 
> 赞同：0
> 
> 时间：2013-01-24T18:09:53.130
> 
> 标签：wcf, entity-framework, entity-framework-5

我的数据库有下表

```
Country >> CountryId, Country 
```

以下是我的应用程序中的确切架构。

Geography_EF >> 实体框架项目（使用 EF 5） Geography_Model >> 从 EF 生成的模型（简称实体类）。这包含 Country 类。Geography_WCF >> 包含各种服务合同的 WCF 应用程序。

问题是，当我编写返回 Country 对象（或集合）的操作合同时，它给我一个错误消息“底层连接已关闭。“底层连接已关闭：连接已意外关闭。”在这里，我可以看到对该操作合约的调用完成，并立即发生此异常。

而如果我编写一个操作以仅返回特定字段（即 CountryId 或 Country 表），那么它可以正常工作。

我也在使用存储库模式和 Unity 容器。

你怎么看，我失踪了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T04:36:08.053

可能是对象的大小。检查配置中的 MaxReceivedMessageSize。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T13:22:55.610

当我遇到这个错误时，我将它从返回集合更改为返回列表，这样就解决了问题。希望能帮助到你。

# java - Java 到 PHP，PHP 到 MySQL 安全吗？

> ID：14507906
> 
> 赞同：1
> 
> 时间：2013-01-24T18:09:59.260
> 
> 标签：java, php, mysql, security, ssl

我需要从 java 桌面应用程序连接到 MySQL 数据库。我计划这样做的方式是使用 HTTP 在我的网站上打开一个 php 页面，该 PHP 脚本将处理所有 mysql 内容，因此客户端根本无法访问我的 MySQL 用户/密码。所以，我的问题是，是否需要 SSL？还有，我怎样才能防止人们将 URL 带到 PHP 脚本并使用他们的 Web 浏览器来搞砸数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:13:25.393

这可能应该在安全站点上，但无论如何。

如果您不希望发送到数据库的所有内容都对全世界可见，请使用 SSL。

如果您不希望世界上任何人进行更改，请强制客户端在对数据库进行任何更改之前对您的服务器端脚本进行身份验证。

确保防止 SQL 注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:42:44.800

> 所以，我的问题是，是否需要 SSL？

SSL 通过加密帮助提供一层安全保护，防止人们劫持连接和拦截您发送的内容（有关更多信息，请参阅：[Firesheep](http://en.wikipedia.org/wiki/Firesheep)）。因此，虽然不是*必需*的，但它本身是推荐的。如果您可以控制 Java 应用程序，并且根据您的目的（即内部应用程序），那么您可以使用自签名证书并将证书与应用程序打包以进行验证（请参阅：[this SO question](https://stackoverflow.com/questions/9353340/benefits-in-security-to-a-ca-signed-ssl-certificate) for有关自签名与 CA SSL 证书的更多信息）。

> 我怎样才能防止人们将 URL 带到 PHP 脚本并使用他们的 Web 浏览器来搞乱数据库？

与其他信息安全事务一样，没有什么是 100% 保证的，但最常见的方法是通过 API 密钥，特别是因为您所描述的是 API。

如果您正在寻找一种快速而简单的设置，那么您可以使用 HTTP 基本身份验证来发送一些凭据，并使用 SSL 来保护它。对于更强大的解决方案，您可能需要研究 HTTP Digest Authentication 和/或 OAuth。您使用什么也取决于您的具体需求。

然后，您可以将 API 密钥编码到 Java 应用程序中，或者创建一种生成和请求 API 密钥的方式（同样，取决于您的特定目的和需求），客户端将 API 密钥与请求一起发送。如果密钥与您“存档”的密钥不匹配，则您拒绝该请求。

*关于使用 API 与直接连接到 MySQL 的快速说明*

有几个人提出直接连接到 MySQL。我认为这是一个有效的选择，但很大程度上取决于您在做什么以及您要分发给谁（以及，就此而言，您是否要向其他客户开放该数据库）。

如果您计划让其他客户端（例如移动设备）连接到此数据库，或者您出于任何原因无法控制数据库（即 - 您的托管设置不允许您提供远程访问） ，那么从长远来看，构建 API 可能会很有用。

但是，如果您没有这样的计划，或者您确实拥有数据库的完全控制权，并且您控制了 Java 应用程序的源代码，那么直接连接到 MySQL 数据库是一个有效的选择。只要确保您遵循最少访问原则——Java 应用程序获得一个专用的 MySQL 用户，该用户只拥有绝对必要的权限——并且 Java 应用程序用户有一个强密码（因为在你之后没有人参与这个过程编码它，您可以使用密码生成器来创建长而复杂且完全随机的东西）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T18:12:55.330

为什么不直接使用带有 SSL 的 MySQL 用户身份验证？编写自己的网桥听起来只会导致问题并暴露出比其他方式更多的安全漏洞。

# python - 使用python从FTP下载特定文件

> ID：14507907
> 
> 赞同：0
> 
> 时间：2013-01-24T18:10:04.127
> 
> 标签：python

快速简单：

我有以下功能，如果我指定文件名，效果很好。

```
import os
import ftplib

def ftpcon(self, host, port, login, pwd, path):

    ftp = ftplib.FTP()
    ftp.connect(host, port, 20)
    try:

        ftp.login(login, pwd)
        ftp.cwd(path)

        for files in ftp.nlst():

            if files.endswith('.doc') or files.endswith('.DOC'):

                ftp.retrbinary('RETR ' + files, open(file, 'wb').write)
                print files 
```

但是当我使用带有 ftp.nlst() 的 for 循环来尝试匹配特定类型的文件时，我收到错误：

> 强制转换为 Unicode：需要字符串或缓冲区，找到类型

由于我不确定这是否是最好的方法，下载文件的“正确”方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:36:28.190

也许尝试：

```
from ftplib import FTP

server = FTP("ip/serveradress")
server.login("user", "password")

server.retrlines("LIST") # Will show a FTP content list.
server.cwd("Name_Of_Folder_in_FTP_to_browse_to") # browse to folder containing your file for DL 
```

然后：

```
server.sendcmd("TYPE i") # ready for file transfer
server.retrbinary("RETR %s"%("FILENAME+EXT to DL"), open("DESTINATIONPATH+EXT", "wb").write) # this will transfer the selected file...to selected path/file 
```

相信这和发球一样正确..

登录服务器时，您可以将 server.set_debuglevel(0) 设置为 (1) 或 (2) 以获得更详细的说明。

# c# - 使用字典键（作为字符串）在构造函数中设置变量

> ID：14507910
> 
> 赞同：2
> 
> 时间：2013-01-24T18:10:15.593
> 
> 标签：c#, reflection

我不想对类构造函数进行大量重载，而是想传入 a`Dictionary`来动态设置变量。

```
// Class definition
public class Project
{
    public DateTime LastModified;
    public string LoanName;
    public string LoanNumber;
    public int LoanProgram;
    public string ProjectAddress;
    ...

    // Project class constructor
    public Project(Dictionary<string, object> Dict)
    {
        foreach (KeyValuePair<string, object> entry in Dict)
        {
            // ie, when the Key is "LoanName", this.LoanName is set
            this.(entry.Key) = entry.Value;   // <-- Does not compile, obviously
        }
    }
}

// application code
...
Dictionary<string, object> dict = new Dictionary<string,object>();
dict.Add("LoanName", "New Loan Name");
dict.Add("LoanProgram", 1);
dict.Add("ProjectAddress", "123 Whatever Way");
Project p = new Project(dict);
... 
```

在构造函数中，有没有办法使用字典键（一个字符串）来确定要设置的类成员？这可以通过某种方式使用反射来完成吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T18:12:54.330

这些字段已经是公开的……为什么不直接使用对象初始化语法呢？

```
var p = new Project() {
    LoanName = "New Loan Name",
    LoanProgram = 1,
    ProjectAddress = "123 Whatever Way"
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T18:14:05.717

```
public class Project
{
    public DateTime LastModified;
    public string LoanName;
    public string LoanNumber;
    public int LoanProgram;
    public string ProjectAddress;
    ...

    // Project class constructor
    public Project(Dictionary<string, object> Dict)
    {
        foreach (KeyValuePair<string, object> entry in Dict)
        {
           this.GetType().GetProperty(entry.Key).SetValue(this, entr.Value, null);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T18:15:51.403

这似乎是一场维护噩梦，但您可以通过这种方式查找房产。

```
var prop = typeof(Project).GetProperty(entry.Key); 
```

然后你可以像这样设置值。

```
prop.SetValue(this, entry.Value); 
```

但是，您不会通过这种方式进行编译时类型检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T18:14:47.900

我建议查看默认参数。

例如

```
public Project(loanName = null, lastModified = null, loanNumber = null, loanProgram = 0, projectAddress = null)
{
    //Set them in here
} 
```

我还建议使用公共属性而不是公共字段。例如

```
public DateTime LastModified { get; private set; } //Makes it so only inside the class LastModified can be set 
```

# javascript - 如何在角度 ng-repeat 之后访问图像属性？

> ID：14507918
> 
> 赞同：5
> 
> 时间：2013-01-24T18:10:40.233
> 
> 标签：javascript, angularjs

我正在尝试获取从服务器中提取的图像的图像宽度和高度，以便为其应用适当的样式。所以我使用 ng-repeat 来填充模板：

```
<div ng-repeat="feed in feeds"> 
<div class="span2" >
    <img ng-src='{{feed.image_url}}'>
</div> ... 
```

我的问题是如何访问 img 对象以便更改父 div 类？或者也许 angular.js 做这样的事情的方式是什么？

编辑：更具体。我想访问 img 对象以获取其宽度和高度以计算其大小以将样式应用于父 div（当前使用类 span2）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-24T18:34:42.950

我不知道你想做什么，但这听起来像是一个指令的工作。

```
app.directive('styleParent', function(){ 
   return {
     restrict: 'A',
     link: function(scope, elem, attr) {
         elem.on('load', function() {
            var w = $(this).width(),
                h = $(this).height();

            var div = elem.parent();

            //check width and height and apply styling to parent here.
         });
     }
   };
}); 
```

你会像这样使用它：

```
<img ng-src="imageFile" style-parent/> 
```

编辑：如果您不使用 jquery，这会有所不同。

# ios - tableheaderview的滚动过程如何实现？

> ID：14507924
> 
> 赞同：0
> 
> 时间：2013-01-24T18:10:45.420
> 
> 标签：ios, ios6, uicollectionview

当我将一些隐藏的标题视图（如搜索栏）添加到表格视图时，当我将滚动的偏移量设置为搜索栏的中间时，它会自动滚动到内容的顶部或表格单元格的顶部。（我使用下面的代码）

```
// in viewDidLoad section
UISearchBar *searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)]
[self.tableView setTableHeaderView:searchBar]

// in viewWillAppear: section
[self.tableView setContentOffset:CGPointMake(0, 44)]; 
```

例如，如果我在隐藏搜索栏时向上滚动一点，它会自动滚动以显示整个搜索栏。如果我在显示搜索栏时向下滚动一点，它会自动滚动以隐藏搜索栏。

我使用下面的代码将这个功能实现到我的集合视图的标题中，但这与表格视图的功能并不完全相同。

```
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
    CGFloat offset = scrollView.contentOffset.y;
    if (offset > 22 && offset < 44) {
        [scrollView setContentOffset:CGPointMake(0, 44) animated:YES];
    } else if (offset > 44) {
        return;
    } else {
        [scrollView setContentOffset:CGPointMake(0, 0) animated:YES];
    }
} 
```

我认为很难完全模仿上述功能，因为显示整个搜索栏或隐藏搜索栏的判断非常微妙。

所以我的问题是，“iOS SDK 或 UICollectionViewController 中是否有任何预实现的方法？”。

我用谷歌搜索了好几个小时，但我找不到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:32:26.637

我找不到实现该功能的预实现方式，但下面的方式似乎使事情类似于表视图的方式。

首先，添加 CGFloat 类型 ivar `originScrollOffset`。

然后，我使用下面的代码来实现滚动视图委托。

```
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
    originScrollOffset = scrollView.contentOffset.y;
}

- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
    CGFloat endScrollOffset = scrollView.contentOffset.y;
    NSLog(@"%f %f", originScrollOffset, endScrollOffset);
    if (endScrollOffset <= 44 && endScrollOffset >= 0) {
        if (originScrollOffset >= 44) {
            if (originScrollOffset - endScrollOffset > 10) {
                originScrollOffset = 0;
                [self.collectionView setContentOffset:CGPointMake(0, 0) animated:YES];
            } else {
                originScrollOffset = 44;
                [self.collectionView setContentOffset:CGPointMake(0, 44) animated:YES];
            }
        } else {
            if (endScrollOffset - originScrollOffset > 10) {
                originScrollOffset = 44;
                [self.collectionView setContentOffset:CGPointMake(0, 44) animated:YES];
            } else {
                originScrollOffset = 0;
                [self.collectionView setContentOffset:CGPointMake(0, 0) animated:YES];
            }
        }
    }
} 
```

# intuit-partner-platform - Initializer.cs 中的 InitializeServiceContext 已开始在我的测试应用程序中抛出“未授权”

> ID：14507929
> 
> 赞同：2
> 
> 时间：2013-01-24T18:11:19.203
> 
> 标签：intuit-partner-platform, quickbooks-online

针对 qbo 使用 c# devkit。当我昨天离开时，一切正常，但是今天尝试在我的测试应用程序中初始化服务上下文时，我开始收到“Intuit.Ipp.E​​xception.InvalidTokenException：未授权”错误。

```
ServiceContext context = Initializer.InitializeServiceContext(oauthValidator, realmId, string.Empty, string.Empty, dataSourcetype); 
```

并且错误在 InitializeServiceContext 中： context = new ServiceContext(oauthValidator, realmId, intuitServiceType);

我昨天注册了我的测试公司（即我现在有一个付费的quickbooks在线账户）我不能继续使用真实账户进行测试吗？还是我在某个地方犯了更大的错误。

谢谢

编辑：

尝试在 Intuit Developer Playground 上登录我的测试应用程序时，出现以下错误：

```
Oops! An error has occurred.

Please close this window and try again.

Error Code: internal_error
Message: Error Authorizing Request Token: <redacted-token> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T19:02:51.130

您的 OAuth 令牌不再有效。为 QBO 初始化 ServiceContext 对象会检索领域的基本 URL，这需要授权并因此引发未经授权的错误。

# c# - 在本地化 C#.Net 桌面应用程序中找不到任何适合指定区域性的资源....

> ID：14507930
> 
> 赞同：0
> 
> 时间：2013-01-24T18:11:22.833
> 
> 标签：c#, visual-studio-2012

我知道关于 SO 有很多类似的问题，但我的问题并不完全相同，建议的解决方案对我不起作用。

因此，我创建了名为“MyApp 1.0”的 C#.NET 桌面应用程序，但后来将默认命名空间更改为`MyApp`. 现在，我希望我的应用程序以各种语言进行本地化，因此我添加了新的资源文件来保留每种语言的 UI 字符串，如`MyAppUIText.en.resx`，`MyAppUIText.gu.resx`等等。我还创建了一个类，该类具有`public static`从应用程序中的任何位置访问这些资源的字符串的方法，其代码如下。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Resources;

namespace MyApp
{
    namespace Utility
    {
        class UIText
        {
            private static ResourceManager rm = new ResourceManager("MyApp.MyAppUIText", typeof(FormMyAppMain).Assembly);

            public static string GetString(string key)
            {
                return rm.GetString(key, System.Globalization.CultureInfo.CurrentUICulture);
            }
        }
    }
} 
```

当我运行我的应用程序时，出现以下运行时错误

> 找不到适合指定区域性或中性区域性的任何资源。确保“MyApp.MyAppUIText.resources”在编译时被正确嵌入或链接到程序集“MyApp 1.0”中，或者所有所需的附属程序集都是可加载的并且完全签名。

但是，字符串已正确加载到 UI 中，但是，表单设计器显示与 title 相同的错误`To prevent possible data loss before loading the designer, the following errors must be resolved:`。

我在这里做错了什么？

**PS** 我是 C# 的新手，但我精通 Java，并且以前使用过它的`properties`文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:12:58.257

您已删除或重命名 MyApp.MyAppUIText.resx 文件。确保表单的语言设置为（默认），更改表单上的一些文本，更改表单的 Text 属性即可。VS 将创建一个新的 MyApp.MyAppUIText.resx 文件，构建您的解决方案并运行它。

# sql - 当其中一个表中可能不存在数据时，选择具有多个连接的查询

> ID：14507933
> 
> 赞同：1
> 
> 时间：2013-01-24T18:11:29.443
> 
> 标签：sql, sql-server-2008, join

在 SQL 查询方面需要一些帮助。

我有三个表 TestOptions、CreateScript 和 TestResults。

Testoptions 保存特定测试的所有数据。CreateScript 保存按顺序运行的测试集合，用索引表示。TestResults 保存结果。

我想显示特定仪器的测试列表。该列表将包含。TestType、TestName、测试范围和结果。某些测试可能尚未执行，因此测试结果表中将没有该测试的条目。如果尚未进行测试，则仍需要检索测试详细信息。该列表将按索引排序并按 TestType 分组。

到目前为止，我有：

```
SELECT TestType, TestName, LowerLimits, UpperLimits, ResultRecorded  
FROM CreateScriptTable 
INNER JOIN TestOptionsTable ON CreateScriptTable.TestName =T estOptionsTable.TestName 
LEFT JOIN TestResultsTable ON CreateScriptTable.TestName = TestResultsTable.TestName 
WHERE CreateScriptTable.InstrumentType= 'instType' 
AND jobNo ='000'
AND SerialNo ='000'
ORDER BY [Index] ASC, TestType 
```

SerialNo 和 JobNo 仅在 TestResults 表中。此查询仅提供已在测试结果表中输入的测试的详细信息。如果测试已完成，我想要所有测试详细信息和结果。

预期输出如下：

```
TestType    TestName    Lower       Upper       Result
type1       test1       12            20        12
type1       test2       96           108        105
type2       test2       98           108        
type3       test3       95           105 
```

实际输出更像

```
TestType    TestName    Lower       Upper       Result
type1       test1       12            20        12
type1       test2       96            108       105 
```

仅显示结果表中条目的测试。

可能我没有正确接近连接。我已经搞砸了内部，左，右和完全连接，但无济于事，现在很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:28:29.087

您可以将左连接表中列的条件从`WHERE`子句移动到`JOIN`子句，以防止它们实际上将左连接更改为内部连接，如下所示：

```
SELECT TestType, TestName, LowerLimits, UpperLimits, ResultRecorded  
FROM CreateScriptTable 
INNER JOIN TestOptionsTable ON CreateScriptTable.TestName =TestOptionsTable.TestName 
LEFT JOIN TestResultsTable ON CreateScriptTable.TestName = TestResultsTable.TestName AND jobNo ='000' AND SerialNo ='000'
WHERE CreateScriptTable.InstrumentType= 'instType' 
ORDER BY [Index] ASC, TestType 
```

# php - jQuery在链接点击时从url中添加和删除变量

> ID：14507934
> 
> 赞同：3
> 
> 时间：2013-01-24T18:11:31.497
> 
> 标签：php, javascript, jquery

我正在开发一个需要在 URL 中添加和删除变量的 Web 应用程序。我已经完成了单击向 URL 添加变量的操作，但它添加了重复变量。

```
href="http://localhost<?php echo $_SERVER['REQUEST_URI'];?>?budget=1-lakh-3-lakh" 
```

首先点击链接：

```
http://localhost/auto/search.php?budget=1-2L 
```

第二次点击相同的链接：

```
http://localhost/auto/search.php?budget=1-2L&budget=1-2L 
```

如果变量已经存在，我想从 URL 中删除变量，否则在链接单击时添加变量。我已经尝试了很多方法，但我没有得到结果。使用 jQuery 我试过了`replace(), indexOf()`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T11:12:25.490

这是从 URL 中删除特定参数的代码：

```
var url = location.href.replace(/&?budget=([^&]$|[^&]*)/i, ""); 
```

或功能：

```
function removeParameterFromUrl(url,parameterName)
{
    var reg = new RegExp('&?'+parameterName+'=([^&]$|[^&]*)','gi');     
    return url.replace(reg, ""); 
}

location.href = removeParameterFromUrl(location.href,'budget') 
```

# javascript - 委派方法时什么更有效？

> ID：14507938
> 
> 赞同：0
> 
> 时间：2013-01-24T18:11:44.390
> 
> 标签：javascript, ajax, performance, jquery

我有一个充满 AJAX 的网站，所以我需要将方法委托给文档点击，假设我也有 jQuery 库。
我只想知道这两个代码之间更有效的是什么：

```
$(document).on('click', '.delegate1', function(){
    doSomethingForDelegate1();
}).on('click', '.delegate2', function(){
    doSomethingForDelegate2();
}); 
```

或者：

```
$(document).on('click', function(event){
    var element = $(event.target);
    if(element.hasClass('delegate1')){
        doSomethingForDelegate1();
    } else if(element.hasClass('delegate2')){
        doSomethingForDelegate2();
    }
}) 
```

我想实现对客户端执行时间影响较小的代码，从而拥有一个更快的站点。我知道也许差异不会太大，但工作得更快总是更好；）

如果有比这两种方法更快的方法，也欢迎。谢谢。

如果差异不够明显，那么我想知道哪种算法更干净，为每个委托绑定一个事件或绑定一个事件并比较类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:16:35.170

当稍后有许多元素要添加到 DOM 时，第二种方法可能很有效。因此，将单个事件附加到文档并进行委派可以真正加快应用程序的速度。

但是，如果创建和需要附加的元素数量不是很大，那么两者应该以相同的速率执行。

我会采用第一种方法，因为它更清洁。

# mysql - CSV 导入后 MySQL WHERE 子句不起作用

> ID：14507939
> 
> 赞同：1
> 
> 时间：2013-01-24T18:11:51.420
> 
> 标签：mysql, database, csv

我对 MySQL`WHERE`子句有疑问。我想我知道问题是什么，只是不知道如何解决它。

我有一个包含学生时间表信息的数据库，我将其与包含学生信息的表进行匹配。学生信息已从 CSV (utf-8) 文件导入数据库，其他信息只是通过“正常”`INSERT`查询插入数据库。

该`WHERE`子句很简单，如下所示：

```
WHERE  gpu_timetable.cls_name = 
  (SELECT cls_name FROM gpu_students WHERE std_number = 123441 LIMIT 1) 
```

它将时间表中的 cls_name（班级名称）与学生表中的班级名称相匹配。就像我说的数据来自不同的来源，但看起来是一样的。例如，当我删除 SELECT 查询并使用此字符串 ('LV6A') 时，代码有效。

两个字段的排序规则都是 *utf8_general_ci*，我也尝试过`TRIM()`但没有成功，将运算符替换`=`为`LIKE`.

是我在导入学生信息时做错了什么，还是有其他类似的功能`TRIM()`可以解决这个奇怪的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-23T10:25:53.297

您的简化查询必须是：

```
SELECT * FROM gpu_timetable INNER JOIN gpu_students ON gpu_timetable.cls_name = gpu_students.cls_name WHERE gpu_students.std_number = 123441 
```

*`tablename.fieldname`在使用 JOIN 查询时，您应该始终拥有。*

# java - 在物理模拟中缩放尺寸

> ID：14507941
> 
> 赞同：0
> 
> 时间：2013-01-24T18:11:54.663
> 
> 标签：java, applet, scale, physics, game-physics

我需要一些关于我正在编写的 java 中的物理模拟的帮助。模拟是关于身体的自由落体。我正在使用 java，我不使用任何第三方库。

我有一个小程序（1400 像素宽，700 像素高）和一个精灵（椭圆形）掉下来。重力设置为 10 m/s²。我将第二个牛顿定律应用于我的椭圆形精灵，并使用 RK4 算法来计算我的精灵随时间的 x 和 y 坐标。

这一切都很好......除了我不知道如何缩放我在模拟中使用的尺寸。

例如，我希望 1px 代表 1cm（宽度和高度）。这样我的 1400px*700px 小程序尺寸将实际代表 14m*7m。我用了

> Graphics2D.scale()

方法，但它似乎不起作用。我也想过改变重力，但这似乎不适合我......

有人可以告诉我缩放尺寸的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:25:14.907

您有一个 1400 x 700 像素的小程序绘图区域。

你有一个 14 x 7 米的物理区域。

为了从米缩放到像素，您必须使用缩放因子。

```
1400 pixels / 14 meters = 100 pixels per meter.
700 pixels / 7 meters = 100 pixels per meter. 
```

到目前为止，一切都很好。如果你有两个不同的比例因子，你的绘图区域会被扭曲。

假设椭圆从 (0, 0) 开始。

所以我们计算椭圆的第一个位置。假设第一个计算的位置是

```
x = 2.45
y = 3.83 
```

因此，使用我们提出的比例因子：

```
pixel x = 2.45 meters x 100 pixels per meter = 245 pixels.
pixel y = 3.83 meters x 100 pixels per meter = 383 pixels. 
```

我们的物理区域向右增加 x 并向下增加 y。幸运的是，我们的绘图区域向右增加了 x 并向下增加了 y。

所以，我们不必担心标志的变化。

在 (245, 383) 处绘制椭圆。

计算下一个 x、y 位置并重复。

# java - 在android中序列化（将文档写入文本文件）的方法

> ID：14507942
> 
> 赞同：0
> 
> 时间：2013-01-24T18:11:55.320
> 
> 标签：java, android, xml

我在 JRE1.6 中有这段代码，我想在 android 中使用它，但我坚持下去。

```
 OutputFormat format = new OutputFormat(dom);
            format.setIndenting(true);
            XMLSerializer serializer = new XMLSerializer(toWrite, format);
            serializer.serialize(dom); 
```

*   toWrite 是一个**FileOutputStream**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:27:17.430

`ObjectInputStream` and `ObjectoutputStream` classes are there in android to serialize and deserialize your object. Just Google them. [here](http://developer.android.com/reference/java/io/ObjectOutputStream.html) is ObjectOutPutStream

# intuit-partner-platform - SalesTaxQuery QuickBooks 在线

> ID：14507945
> 
> 赞同：0
> 
> 时间：2013-01-24T18:12:06.487
> 
> 标签：intuit-partner-platform, quickbooks-online

我正在尝试将税类分配给销售收据。我无法提取销售税代码的 ID。这是我的代码：

`var slList = dataServices.FindAll<SalesTax>(new SalesTax(), 1, 100);`

SalesTaxQuery 仅存在于 Intuit.Ipp.Data.Qbd 命名空间中的 QuickBooks Desktop。什么是 QuickBooks Online？如何提取 IdType？

![销售税](../Images/20a1225b1259fd5fad59d0d86423d4fb.png)

我可以添加税线：

```
 qboSalesReceiptLine.Taxable = true;
                qboSalesReceiptLine.TaxableSpecified = true;

                //add a tax line
                TaxLine tl = new TaxLine();
                tl.Amount = _Item.PriceInclTax - _Item.PriceExclTax;
                tl.AmountSpecified = true;
                tlList.Add(tl);
            qboSalesReceipt.TaxLine = tlList.ToArray(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:41:29.063

不幸的是，Intuit 当前的 API 不支持您尝试执行的操作。

您可以为其他提出相同问题的人参考这些线程，以及 Intuit 官方回复，您可以查看此线程和此 SO 帖子：

*   [https://idnforums.intuit.com/messageview.aspx?catid=87&threadid=18930&enterthread=y](https://idnforums.intuit.com/messageview.aspx?catid=87&threadid=18930&enterthread=y)

*   [创建发票时是否可以选择税务机构？](https://stackoverflow.com/questions/14130566/is-it-possible-to-select-a-tax-agency-when-creating-an-invoice)

据推测，Intuit v3 数据服务将解决这个问题。不幸的是，Intuit 在 v3 实施方面落后了好几个月，只发布了一个充满错误和问题的初步 v3 规范，从未更新，随后从网站上撤下了他们的 v3 路线图，并拒绝回答有关状态或时间表的任何问题v3 的。太好了...我不会让您对任何很快可用的功能抱有希望。

关于这些坏消息我很遗憾。:-/ 欢迎与 QuickBooks 集成！

# api - 谷歌自定义搜索 API 卷曲问题

> ID：14507949
> 
> 赞同：6
> 
> 时间：2013-01-24T18:12:13.927
> 
> 标签：api, search

我是stackoverflow的新手所以请耐心等待我:)

我正在尝试使用 Google 自定义搜索 API 进行访问。但是我得到了我无法理解的回报。

我的查询是这样的：

```
https://www.googleapis.com/customsearch/v1?&key=********&q=red%2Bsox&cx=**********&start=0&num=10&cr=countryCA&lr=lang_fr&client=google-csbe&output=xml_no_dtd 
```

我得到的结果是这样的？

```
string '{"error": {"errors": [{"domain": "global","reason": "invalid","message": "Invalid Value"}],"code": 400,"message": "Invalid Value"}}' (length=172) 
```

我究竟做错了什么？我希望显示来自 Google 的结果。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T21:22:37.293

你没有cx。看看这个[答案](http://productforums.google.com/forum/#!topic/customsearch/vArksJWhJTM)发生了 什么是因为这个 api 主要用于为您的站点添加搜索选项，您必须指定您的自定义搜索引擎（例如，仅搜索您的站点）。当您希望它通过代码搜索网络时，您需要执行上述操作。添加一个虚假站点（您将在其中添加搜索文本框），对其进行配置（搜索网络、您的站点或其他任何内容），然后删除该虚假站点

**更新**

天哪，我刚看到。对不起。那么问题是你从 0 开始。有效的是 1。用 start=1 更改 start=0，我认为你会很好。看看这个开始参数[官方页面的有效值](https://developers.google.com/custom-search/)

# html - 图像居中，如何向下移动？

> ID：14507950
> 
> 赞同：3
> 
> 时间：2013-01-24T18:12:18.570
> 
> 标签：html, css

我正在制作一个单页网站。对于“较低”页面，我将图像作为标题。我可以使用使图像居中

```
img
{
display:block
margin-left:auto
margin-right:auto
width:400px
} 
```

但是，我要求它低一点。我尝试添加页边距顶部，但似乎为整个页面添加了页边距（页面变长了？）。但是，图像在我的页面上的位置并没有改变。知道有什么问题吗？

这是一些 HTML：

```
<body>
    <div id="nav">
         <ul>
             <li><a class="scroll" href="#about">ABOUT</a></li>
             <li><a class="scroll" href="#portfolio">WORK</a></li>
             <li><a class="scroll" href="#contact">CONTACT</a></li>
         </ul>
    </div>

    <!-- Landing Page-->
    <div id="landing">
        <img src="front.png" alt="Cover Page">
    </div>
    <!-- About -->
    <div id="page1">
      <a id="about"></a>
        <img src="Who.png" alt="About Me">
        <p>
            That sweet tailpipe of yours did have me charmed. It put a spell on me, but all the ass magic in Mexico can’t change Kenny Powers from his core beliefs. I’m not an ass man... I’m a tit man. I like big ass boobs — now, and forever... I’m not like a black guy, Vida...
        </p>
    </div>

    <!-- Work -->
    <div id="page2">
      <a id="portfolio"></a>
        <div id="container">
            <a class="fancybox" href="portfolio1.jpg" title="'Consumed' </br>Digital/Print Work"><img src="portfolio1s.png"/></a>
        </div>

    </div>

    <!-- Contact -->
    <div id="page3">
      <a id="contact"></a>
        <img src="Contact.png" alt="Contact Information">
        <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
        </p>
    </div>
</body> 
```

我正在谈论的标题是较低页面的标题，而不是第一个元素。所以我不确定为什么整个页面都向下移动。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T18:18:20.683

查看相对定位是否适合您：

```
position: relative;
top: 10px; 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2019-03-20T12:16:51.850

只需添加。 `<br> <br>` 打破线向下。

# javascript - 使用 Yahoo YUI 3 的 Google 地理编码 ajax 请求

> ID：14507951
> 
> 赞同：0
> 
> 时间：2013-01-24T18:12:21.070
> 
> 标签：javascript, ajax, io, yui, geocoding

我了解在 YUI 3 中进行 ajax 调用的方法是使用 IO 实用程序。我想从 Google 的地理编码 API 中获取某个位置的地址。

```
<script type="text/javascript"><!--
YUI().use('io-base', function(Y) {
    function complete(id, o) {
        var data = o.responseText; // Response data.
        alert(o.responseText);
    };

    Y.on('io:complete', complete, Y);
    var request = Y.io("http://maps.googleapis.com/maps/api/geocode/json?language=en&sensor=false&latlng=12,34);
});
//-->
</script> 
```

我收到了带有方法*OPTIONS*和状态代码*405 Method Not Allowed*的回复。我相信这是因为一些“预检”权限检查。我没有收到想要的回复。如果我将 url 复制并粘贴到浏览器中，我会看到 json 数据。

我可以将 ajax 请求发布到我自己域上的 php 脚本中，并使用 curl 获取 json 响应。但是，如果我可以在 javascript 中获取数据，为什么还要有这个额外的步骤呢？

那么我能做些什么来解决这个问题呢？IO 实用程序不是要使用的正确库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T18:30:33.780

您正在发出跨域 XHR 请求，并遇到“同源策略”，这是客户端 JavaScript 中的一般限制。例如，[为什么即使两个 URL 都来自 XXXX.com，我仍然会收到 405 错误？](https://stackoverflow.com/questions/11918091/why-do-i-still-receive-405-errors-even-though-both-urls-are-from-xxxx-com)

有多种方法可以解决此问题：

1）按照您的建议在 PHP 中发出服务器端请求 2）使用 YUI jsonp 模块 3）使用 YUI YQL 模块，它通过 Yahoo! 代理您的请求！服务器并为您处理 JSONP 内务管理

还有许多其他方法可以解决这个问题，但这三种方法应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:30:17.223

Y.io 支持跨域请求。请参阅[http://yuilibrary.com/yui/docs/io/#cross-domain-transactions](http://yuilibrary.com/yui/docs/io/#cross-domain-transactions)

您需要使用“xdr”属性正确配置它，并加载“io-xdr”模块等。本示例也使用它：http: [//yuilibrary.com/yui/docs/io/weather.html](http://yuilibrary.com/yui/docs/io/weather.html)

# java - jar 文件中只能访问一些方法

> ID：14507957
> 
> 赞同：1
> 
> 时间：2013-01-24T18:12:33.873
> 
> 标签：java, jar

我有一个 java 类，我从中创建了一个 jar 文件来访问另一个项目中的类。

这个类看起来像这样

```
public class RunMain {

    private ArgumentObject argObject = null;
    private String outputFile = null;
    private SimObject simObject = null;

    public RunMain() {
    }

    public RunMain(String file) {
        outputFile = file;
    }

    public static void main(String[] args) throws Exception {
        new RunMain().doMain(args);
    }

    public void testMethod(){

    }

    public void blaMethod(){

    }

    public SimObject getResults(){
        return simObject;
    }

    public void doMain(String[] args) throws Exception {

        // do some stuff

    }  

    // write term and doc vectors to bin files
    void writeVectorStore() throws Exception{

        // do some stuff
    } 
} 
```

我的问题是，当我现在想访问另一个项目中的方法时，我只能调用 main 方法或 doMain 方法。

```
RunMain run = new RunMain();
run.doMain(arguments); 
```

这很好用

```
SimObject simObject = run.getResults(); 
```

这用“RunMain 类型的方法 getResults() 未定义”标记为红色

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:28:05.853

我有两个想法：

1.  jar 文件包含已编译类的早期版本。
2.  您使用早期版本的 jar 文件。

但是不可能只有一个类的一些公共方法可以访问一个 jar 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:27:56.713

有几件事要检查...

1.  确保使用此 jar 文件的项目在类路径上没有自己的 RunMain 类版本。它将“覆盖” jar 文件中的 RunMain。如果有一个本地版本的类比没有方法 getResults()，那么你的编译器错误。
2.  如果您已经在 .jar 文件上工作了一段时间.. 最好重新构建它以确保其中的代码是最新版本。有可能您创建了 jar，然后添加了一个方法，但没有重新创建 jar 文件。然后确保您的项目正在引用新的 jar 文件。

# android - 如何从 Jenkins/Hudson 上传 APK 到 Play 商店？

> ID：14507958
> 
> 赞同：20
> 
> 时间：2013-01-24T18:12:38.750
> 
> 标签：android, jenkins, continuous-integration, google-play, continuous-deployment

我使用 Jenkins 实现了一个持续集成管道，但作为最后一步，我希望 Jenkins 将签名的 APK 文件部署/上传到 Google Play 商店和 AndroidPit。我寻找了 Jenkins/Hudson 插件，但只找到了两个：一个用于 Appaloosa，一个用于 Zubhium。

我在 Google Play 和 AndroidPit 上都有一个可用的开发者帐户，并且可以手动上传 Jenkins 生成的 APK。但我的问题是：**有人知道教 Jenkins 的方法**（例如通过 shell 脚本吗？）**将 APK 上传到上述应用商店？**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-07-29T18:28:55.820

有一个用于 Jenkins 的[Google Play Android Publisher 插件](https://wiki.jenkins-ci.org/display/JENKINS/Google+Play+Android+Publisher+Plugin)，它使用[Google Play Publishing API](https://developers.google.com/android-publisher/edits/)，在 Google I/O 2014 上宣布。

Google 还发布了[Java 和 Python 库](https://developers.google.com/android-publisher/libraries)来帮助使用 API。

有关 API 的更多信息，另请参阅：
[http ://android-developers.blogspot.com/2014/07/grow-with-google-play-scaled-publishing.html](http://android-developers.blogspot.com/2014/07/grow-with-google-play-scaled-publishing.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-23T16:33:57.700

我只能为 Google 的 Play 商店说话。有一种方法，但请注意，它并不漂亮，您必须编写解决方案。我现在正在写一篇学士论文来解决这个问题——“Android 应用程序的持续交付”。我的解决方案是我的，这意味着我不会声称拥有完美的解决方案，但我可以说它是非常有效的原型。

我发现了以下内容：

*   第一个解决方案是没有。谷歌提供了一个[Play Store API](https://developers.google.com/android-publisher/)，但它缺乏上传内容。似乎他们已经在考虑制作这样的 API，但它只提供应用内计费控制

*   第二种解决方案是使用 Apache HttpComponents 库，它可以让您为 Google Play 开发者控制台实现自己的客户端，但[HttpClient](http://hc.apache.org/httpcomponents-client-ga/)缺少 JavaScript 解释器......有几种方法可以实现或添加一个。但当然，这不是最简单的方法。

*   我正在研究的第三个解决方案是使用[Selenium](http://docs.seleniumhq.org/docs/) Web 浏览器自动化框架。所以基本上我从那些 Play 商店页面和对话中创建[PageObjects 。](https://code.google.com/p/selenium/wiki/PageObjects)之后，您可以创建一些工厂来维护控制这些 PageObjects 的“路径”。

使用它们，据我所知，您有两个选项，例如[WebDriver 对象](https://code.google.com/p/selenium/wiki/GettingStarted)，它使用像 FF 或 Chrome 这样的“不可见”浏览器进程，而我使用的另一个是[ChromeDriver](https://code.google.com/p/selenium/wiki/ChromeDriver)，它使用可见的浏览器进程来执行用户操作。并且不要忘记使用异常处理程序，它会在使用时扫描网页以查找出现的错误。

由于 Google 的设计可能发生变化，因此存在很多陷阱，这会让您的软件崩溃。但也有一些方法可以处理。=) 并创建一个包含有关应用程序的所有有价值信息的 XML，这在继续下一步时会派上用场。

您可以[创建一个 Maven 插件](http://maven.apache.org/guides/plugin/guide-java-plugin-development.html)。您可以将其加载到您的持续集成服务器中。我希望我能帮助你一点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-27T15:06:13.920

自从 Google Play 发布了上传 API 后，做了一个插件：

[https://wiki.jenkins-ci.org/pages/viewpage.action?pageId=73533143](https://wiki.jenkins-ci.org/pages/viewpage.action?pageId=73533143)

我还没有尝试过，但看起来这正是我们想要的。

还有其他插件声称做同样的事情（感谢@mdt）

*   ~~[https://github.com/DavidHamm/go](https://github.com/DavidHamm/google-play-publisher)~~ ​​ogle-play-publisher 404-此页面不存在
*   [https://github.com/orrc/google-play-android-publisher-plugin](https://github.com/orrc/google-play-android-publisher-plugin)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-01-15T11:09:16.160

我相信它目前不包含在 PlayStore API 中，以减轻系统压力并避免滥用。

我相信我们将来可能会在 gradle 插件和 IDE 中看到这一点。当我们等待谷歌决定开放 API 时，这里有一个解决方案，太简单了，我只好提出它：

如果您有 GUI，请在最后一步使用 GUI 自动化。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-07T05:51:25.040

适用于 Jenkins 的 Google Play Android Publisher 插件是一个不错的插件。但是，它不支持上传描述和屏幕截图（至少目前是这样）。

我找到了不错的 Gradle 插件，名为[Gradle Play Publisher](https://github.com/Triple-T/gradle-play-publisher)。支持上传apk、更新元数据、上传截图。它只需要几个步骤来设置。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-26T18:11:14.933

首先在浏览器中转到[Google Play 控制台](https://play.google.com/apps/publish)，打开您的应用页面，然后寻找允许新电子邮件地址上传 APK 的选项。如果它不存在，则可能意味着您不是该 Play 商店帐户的管理员，您需要让管理员为您添加它（基于每个应用程序）。要了解要添加的电子邮件地址，请访问[Google Developer Service Accounts](https://console.developers.google.com/iam-admin/serviceaccounts/project)并为您现有的任何 Google 开发人员服务帐户创建 JSON 密钥，或使用 JSON 密钥创建新服务帐户。请注意与您已为其创建（或将要创建）JSON 密钥的服务帐户关联的电子邮件地址。它很可能是 gserviceaccount.com 上的东西。此电子邮件地址必须由对您的 Play 帐户具有管理员访问权限的人授予上传 APK 的权限。

完成之后，通过下载[Madison Dickson 的 Marta Rodriguez 脚本的更新版本](https://gist.github.com/mix3d/665f4ab329b4482297a2f425ebba402c)并通过（或根据需要）`wget https://gist.githubusercontent.com/mix3d/665f4ab329b4482297a2f425ebba402c/raw/0949385dd6c80d0701170746b1bd5fd479303412/basic_upload_apks_service_account.py`安装依赖项。`pip install google-api-python-client``sudo pip install google-api-python-client`

然后在您可以使用的自动化脚本中（例如）`python basic_upload_apks_service_account.py -t beta -p org.example.MyApp -s JSON_file_I_made.json -a MyApp.apk`（假设您的 JSON 文件、您的 APK`basic_upload_apks_service_account.py`都在当前目录中并且`pip install`已经在该机器或容器上完成）。

我强烈建议上传到 beta（因此`-t beta`在上面）而不是直接上传到生产环境。以防万一出现问题并且它以某种方式到达 APK 上传。我认为“推出到生产”的*最后*压力应该总是由人来完成。但是，如果您真的也想自动执行此操作，则可以`-t production`改用。

# c# - 如何在 C# Web 浏览器控件中挂钩 javascript 函数？

> ID：14507959
> 
> 赞同：1
> 
> 时间：2013-01-24T18:12:48.387
> 
> 标签：c#, javascript, winforms, webbrowser-control

> **可能重复：**
> [从 WebBrowser 的文档中的 JavaScript 调用 C# 代码](https://stackoverflow.com/questions/3694028/invoke-c-sharp-code-from-javascript-in-a-document-in-a-webbrowser)

不确定 WinForms 浏览器控件是否可以实现这一点，但我想以某种方式设置一个挂钩或回调，我可以定义一个从 C# 到 javascript 的函数，当 javascript 调用该函数时，我希望它执行 C# 方法. 一个简单的例子是我正在编写一个 Web 应用程序并在 C# WinForms 本机客户端中运行它（所以它看起来是一个真正的 Windows 程序。）我需要向 Javascript 公开文件 i/o 和目录迭代方法，以便我的 Web 应用程序可以访问文件系统，而无需加载任何额外的 Java 小程序或闪存。

请注意，我不是要求公开此功能的第三方库，而是要求我提供资源或解释如何创建此功能以及我可能需要的任何其他功能。

# java - useDelimiter，读到第一个分隔符，然后换行

> ID：14507960
> 
> 赞同：2
> 
> 时间：2013-01-24T18:12:49.223
> 
> 标签：java, delimiter

我正在尝试使用分隔符来提取文档中的第一个数字，其中 31 行看起来像“105878-798##176000##JDOE”，并将其放入一个 int 数组中。我感兴趣的数字是“105878798”，数字的数量并不一致。

我写了这个，但是当我到达（行的）第一个分隔符时，我不知道如何更改行。

```
 import java.util.*;
   import java.io.*;

   public class Test {
   public static void main(String[] args) throws Exception {
            int n = 0;
            String rad;

            File fil = new File("accounts.txt");
                int[] accountNr = new int[31];
            Scanner sc = new Scanner(fil).useDelimiter("##");

                    while (sc.hasNextLine()) {
                    rad = sc.nextLine();
                    rad.replaceAll("-","");
                    accountNr[n] = Integer.parseInt(rad);
                    System.out.println(accountNr[n]);
                    n++;
                    System.out.println(rad);
                }
       }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:22:31.737

不要为此使用扫描仪，使用 StringTokenizer 并将分隔符设置为##，然后继续调用 .nextElement()，无论它有多长，你都会得到下一个数字。

```
StringTokenizer st2 = new StringTokenizer(str, "##");

while (st2.hasMoreElements()) {
    log.info(st2.nextElement());
    } 
```

（当然，你可以用不同的方式迭代..）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:24:03.630

我建议每条线路使用`line.split("[#][#]")[0]`（当然要处理你的例外情况）。

同样，`rad.replaceAll(...)`返回一个新的字符串，因为字符串是一个不可变的对象。您应该`parseInt`在返回的 String 而不是`rad`.

只需在代码中使用以下内容而不是等效的 2 行：

```
String newRad = rad.replaceAll("-","");
accountNr[n] = Integer.parseInt(newRad); 
```

# django - 在 Django-Admin 中按 row-id 对显示项目进行排序

> ID：14507967
> 
> 赞同：4
> 
> 时间：2013-01-24T18:13:12.693
> 
> 标签：django, django-admin

我有一个静态数据表，通过 initial_data.json 加载。管理界面显然显示了按 pk 降序排列的数据；即 pk 最大的记录在列表的顶部。我想扭转这一点，理想情况下使用 pk 值。由于它是静态数据，我可以为排序顺序添加另一列，但这实际上会复制 pk 值，或者我可以在生成我的夹具文件时使用“pk=len(data)-i”而不是“pk =i”，我目前正在使用。但实际上，我只想说这样的话：

```
class DataAdmin(admin.ModelAdmin):
    ordering = ('row_id',) 
```

我试过使用“row_id”、“id”和“pk”，但没有成功。在我进行源头潜水之前，有人有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-24T18:19:28.477

将[排序](https://docs.djangoproject.com/en/dev/ref/models/options/#ordering)放在其 Meta 类中的实际模型上

```
class YourModel(models.Model):
    class Meta:
        ordering = ['pk'] 
```

# html - 某些应用程序的 facebook iFrame 上不存在 FullScreen HTML5 API

> ID：14507969
> 
> 赞同：2
> 
> 时间：2013-01-24T18:13:14.833
> 
> 标签：html, fullscreen, facebook-iframe

我正在开发一个 facebook 游戏应用程序。我们对全屏失去了希望，但最近（比如三周前），这个错误报告[https://developers.facebook.com/bugs/436162913102704](https://developers.facebook.com/bugs/436162913102704)被更改为“已修复”。

对此非常满意，我们尝试了自己的应用程序，但全屏按钮不起作用。而且，通过检查 iframe，我们可以看到它没有任何“allowFullscreen”标签。尽管如此，首先发出错误信号的人表示修复确实有效。（我能够验证它）。然后我直接问他，他没有使用任何技巧来使它起作用。那么，大家有什么想法吗？

# javascript - 剔除视图模型以表示单个对象

> ID：14507974
> 
> 赞同：0
> 
> 时间：2013-01-24T18:13:40.343
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin

编辑：这里的答案[似乎](https://stackoverflow.com/questions/6735225/knockout-js-mapping-plugin-without-initial-data-empty-form)提供了解决方案；因为我是一个懒惰的草皮，并且试图避免在两个地方（一次在服务器上，一次在客户端）定义我的模型，我认为必须有一种方法。通过在链接解决方案中使用自定义绑定，我能够从各种表单元素数据绑定属性创建可观察对象，因此基本上它从表单构建模型。所以它有效地从表单中驱动模型定义。我还没有决定这是否是一个坏主意:)

我想知道我做错了什么（或者实际上，如果我*做错*了什么）。我需要创建一个表单来一次编辑一条记录，它只有一些简单的文本/数字属性：

```
{ItemCode:ABCD,LotNumber:1234,ID:4885,MeasuredValue1:90} 
```

我决定使用 ko 和映射插件来做到这一点。我对 ko 还很陌生。无论如何，我最终得到了这样的视图模型：

```
var LotModel = function() {
    var self = this;
    self.Update = function(itemcode,lotnumber) {
    var data = { ItemCode: itemcode, LotNumber: lotnumber }
//DoAjax is just a utility function and is working fine.
        DoAjax("POST", "LotHistory.aspx/GetLotHistory", data,
        function(msg) {
            ko.mapping.fromJS(msg.d, null, self);
            ko.applyBindings(self);
        },
        function(xhr, ajaxOptions, thrownError) {
            AjaxFailure(xhr, ajaxOptions, thrownError);
        }
        );
    }
} 
```

后来在我的代码上，

```
var lm = new LotModel(); 
```

最后在 $(document).ready

```
ko.applyBindings(lm); 
```

现在它可以工作了，除了如果您在视图模型中看到，每次我加载数据时，我都必须在 vm 的更新函数中重新调用**ko.applyBindings(self) 。**如果我注释掉该行，它不会绑定。我*认为*这是因为我只绑定了一个对象（即视图模型本身是 ko 映射插件完成其工作之后的对象），但是在我读到关于 ko 的所有地方，它似乎都在说“你只需要调用一次， 曾经。” 所以我不禁觉得我错过了一些非常明显的东西；在文档就绪函数中注释掉 ko.applyBindings(lm) 没有任何区别，因为我在 document.ready 中自动调用 lm.Update 但在视图模型中注释掉它会破坏它。

所以我的问题是——我做错了吗？一次类型绑定只处理一个对象是否过大？我的意思是它不会太困扰我，它可以按我的意愿工作，但它仍然在唠叨我......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:33:27.903

如果可以避免，最好不要多次重新应用绑定。问题是您的视图模型中没有任何可观察的属性。初始调用`ko.mapping.fromJS`可以解决此问题（或者您可以手动添加可观察对象），例如：

```
ko.mapping.fromJS({
    ItemCode: '', LotNumber: 0, ID: 0, MeasuredValue1: 0
  }, null, self); 
```

有关工作示例，请参见小提琴：http: [//jsfiddle.net/antishok/qpwqH/1/](http://jsfiddle.net/antishok/qpwqH/1/)

# jquery - 当前下拉菜单在打开后不会关闭

> ID：14507976
> 
> 赞同：2
> 
> 时间：2013-01-24T18:13:52.877
> 
> 标签：jquery, drop-down-menu

我有这个脚本可以在我的导航项下打开下拉菜单。

现在，当单击导航项时，下拉菜单将打开。当我再次单击同一项目时，它不会关闭。

只有当我单击另一个导航项以打开另一个下拉列表时，我才能关闭它。

如何在单击当前导航项时关闭它，同时在单击其他导航项时保持其关闭功能？

```
$("li.dropdown-control > a").click( function (event) {
    event.preventDefault()
        $('.dropped').removeClass('dropped');
        var nextSibling = $(this).next();
        nextSibling.toggleClass("dropped");  
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T18:17:56.963

查看您的代码：

```
 $('.dropped').removeClass('dropped');
    var nextSibling = $(this).next();
    nextSibling.toggleClass("dropped"); 
```

这将删除所有`dropped`类（包括您刚刚单击的类，如果它已经打开），然后将其添加回同一元素。这就是为什么它似乎永远不会关闭的原因——你实际上立即关闭并再次打开它。

试试这个：

```
 var nextSibling = $(this).next();
    nextSibling.toggleClass("dropped");  
    $('.dropped').not(nextSibling).removeClass('dropped'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:24:09.393

`$('.dropped').removeClass('dropped');`通过从代码中删除行来尝试此 操作。toggleClass 表示如果未添加则添加类，如果已添加则删除类。

现在，通过删除`$('.dropped').removeClass('dropped');` `toggleClass`将删除`.dropped`类

```
$("li.dropdown-control > a").click( function (event) {
    event.preventDefault()
        var nextSibling = $(this).next();
        nextSibling.toggleClass("dropped");  
}); 
```

# asp.net-mvc-3 - 部署的 ASP.NET MVC 3.0 仅适用于 runAllManagedModulesForAllRequests="true"

> ID：14507985
> 
> 赞同：2
> 
> 时间：2013-01-24T18:14:20.657
> 
> 标签：asp.net-mvc-3

今天我一直在与一个非常奇怪的问题作斗争。我每天都在开发一个 ASP.NET MVC3 Web 应用程序，它曾经是 ASP.NET 4。它现在不是一半 MVC3 和一半 ASP.NET 4 都在同一个应用程序下运行。这一切都很好。

今天我们设置了一个全新的暂存环境（Server 2008 R2），部署了代码并运行了应用程序。只有在尝试访问任何 MVC 页面时出现 HTTP 404 错误，所有 aspx 页面都可以正常工作。为了证明问题是环境问题，我们将相同的代码部署到开发盒上的新应用程序中，并且运行顺利。

在花了一整天时间确保两个环境完全相同（IIS 角色服务、Windows 更新、已安装的应用程序......一切）之后，我在 404 错误页面上注意到请求的处理程序是“StaticFile”。

经过一番谷歌搜索后，我发现了标题中的选项

```
<system.webServer><modules runAllManagedModulesForAllRequests="true"></modules></system.webServer> 
```

这现在有效，所以我假设没有它就不会调用用于非静态路由的模块（如果我很天真，请原谅我）。

问题是，在我们的开发环境中，web.config 没有这个属性。

那么为什么没有它在一台服务器上而不是在另一台服务器上工作。当然，为所有请求调用所有模块的效率较低。

如果有人对为什么会发生这种情况有任何想法，我将永远感激不尽，因为尽管我们的登台环境现在可以工作，但我讨厌不完全了解您。

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T19:15:08.833

我要检查的第一件事是确保将以下更新应用于您新的全新暂存环境，因为它可能已经应用于您现有的开发环境，并会解释为什么一个环境正在工作而一个环境不工作： [http：/ /support.microsoft.com/kb/980368](http://support.microsoft.com/kb/980368)

有关静态文件路由、上述修补程序和一般“无扩展路由如何工作”的更多信息，我建议阅读以下文章：http: [//blogs.msdn.com/b/tmarq/archive/2010/04/01/ asp-net-4-0-enables-routing-of-extensionless-urls-without-impacting-static-requests.aspx](http://blogs.msdn.com/b/tmarq/archive/2010/04/01/asp-net-4-0-enables-routing-of-extensionless-urls-without-impacting-static-requests.aspx)

# php - 为 PHP MYSQL 中的每个服务行保留一个计数器？

> ID：14507987
> 
> 赞同：0
> 
> 时间：2013-01-24T18:14:33.583
> 
> 标签：php, mysql

我有这个**file.php**文件正在执行

```
SELECT 'NAME' FROM users WHERE CONDITION 
```

我想跟踪为每个呼叫提供服务的行。
所以我想为每一行保留一个计数器。

**PHP**中为获取的每一行更新计数器的最有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T18:23:59.513

您需要为查看/获取计数添加额外的列

```
SELECT          
    ...., views+1 as view
FROM table_name
WHERE ....

UPDATE table_name
SET views = views + 1
WHERE ...; 
```

你可以把它放在一个`Transaction`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-24T18:20:13.567

您始终可以`fetched_at`向该表添加一列，然后在获取记录时更新该列：

```
UPDATE users SET fetched_at=UTC_TIMESTAMP() WHERE ...condition... 
```

然后像往常一样获取。您将对这两种情况应用相同的条件。请记住，如果您正在使用`JOIN`这可能会更难以实现。

如果您需要保留计数，请使用`INT`列：

```
UPDATE users SET fetched_count=fetched_count+1 WHERE ...condition... 
```

# filepicker.io - 使用 Filepicker.io，将文件上传到 S3 存储桶中的文件夹中

> ID：14507988
> 
> 赞同：3
> 
> 时间：2013-01-24T18:14:34.773
> 
> 标签：filepicker.io

我可以将文件上传到 S3 存储桶中的特定文件夹，而不仅仅是上传到存储桶的基本文件夹吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T01:39:27.997

是的，在 filepicker.store 调用中使用“路径”参数。

```
filepicker.store(fpfile, {location:'S3', path:'myfolder/file.png'},
    function(stored_fpfile){
  console.log(stored_fpfile);
}); 
```

[https://developers.filepicker.io/docs/web/#store](https://developers.filepicker.io/docs/web/#store)上的文档

# opengl - OpenGL中3D坐标系的透视问题

> ID：14507989
> 
> 赞同：2
> 
> 时间：2013-01-24T18:14:40.927
> 
> 标签：opengl, graphics, projection, perspective

我目前在尝试将坐标系的轴渲染到我的场景中时遇到了一些透视问题。对于这些轴，我绘制了三个穿过 3D 立方体中心的正交线。很难解释问题是什么，所以我想最能说明问题的方式是张贴一些图片。

1）全场景查看：[点击这里](http://www.pic-upload.de/view-17850760/1.png.html)

2) 坐标系原点的放大视图：[点击这里](http://www.pic-upload.de/view-17850782/2.png.html)

3）当我进一步放大一点点时，其中两个轴消失了，另一个似乎由于某种原因移位：[点击这里](http://www.pic-upload.de/view-17850799/3.png.html)

为什么会发生这种情况，我该如何预防？

我的模型视图和投影矩阵如下所示：

```
 // Set ProjectionMatrix
projectionMatrix = glm::perspective(90.0f, (GLfloat)width / (GLfloat) height, 0.0001f, 1000.f);
glBindBuffer(GL_UNIFORM_BUFFER, globalMatricesUBO);
glBufferSubData(GL_UNIFORM_BUFFER, 0, sizeof(glm::mat4), glm::value_ptr(projectionMatrix));
glBindBuffer(GL_UNIFORM_BUFFER, 0);

// Set ModelViewMatrix
glm::mat4 identity        = glm::mat4(1.0); // Start with the identity as the transformation matrix
glm::mat4 pointTranslateZ = glm::translate(identity, glm::vec3(0.0f, 0.0f, -translate_z)); // Zoom in or out by translating in z-direction based on user input 
glm::mat4 viewRotateX     = glm::rotate(pointTranslateZ, rotate_x, glm::vec3(1.0f, 0.0f, 0.0f)); // Rotate the whole szene in x-direction based on user input
glm::mat4 viewRotateY     = glm::rotate(viewRotateX,  rotate_y, glm::vec3(0.0f, 1.0f, 0.0f)); // Rotate the whole szene in y-direction based on user input
glm::mat4 pointRotateX    = glm::rotate(viewRotateY, -90.0f, glm::vec3(1.0f, 0.0f, 0.0f)); // Rotate the camera by 90 degrees in negative x-direction to get a frontal look on the szene
glm::mat4 viewTranslate   = glm::translate(pointRotateX, glm::vec3(-dimensionX/2.0f, -dimensionY/2.0f, -dimensionZ/2.0f)); // Translate the origin to be the center of the cube 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:12:49.503

这就是所谓的“剪辑”。轴撞击近剪裁平面，因此被剪裁。第三轴没有“位移”；它只是被部分剪裁。拍摄第二张图像并将其大部分覆盖，这样您只能看到对角轴的一部分；这就是你得到的。

有一些通用的解决方案。首先，你不能让用户放大那么远。或者，您可以在相机靠近目标对象时向内调整近剪裁平面。这也会导致远处物体的精度问题，因此您可能也需要向内调整远剪辑平面。

或者，您可以只打开深度钳制（假设您有 GL 3.x+，或访问[ARB_depth_clamp](http://www.opengl.org/registry/specs/ARB/depth_clamp.txt)或[NV_depth_clamp](http://www.opengl.org/registry/specs/NV/depth_clamp.txt)）。这不是一个完美的解决方案，因为当它们在相机后面时仍然会被剪辑。如果两个这样的对象重叠，则与近裁剪平面相交的事物将不再具有适当的深度缓冲。但一般来说已经足够好了。

# iphone - 3 个单独的文本对齐在一个 UILabel 上

> ID：14507990
> 
> 赞同：0
> 
> 时间：2013-01-24T18:14:40.717
> 
> 标签：iphone, ios, uilabel, core-text, nsattributedstring

我有 UILabel，我希望每个说分成 3 列。我正在寻找第一个范围（NSRangeMake（0,5）是kCTLeftAlignment，第二个范围有kCTCenterAlignment，第三个范围有kCTRightAlignment。

我还没有使用过CoreText，所以我只是试图将（当前为NSTextAlignmentLeft）文本对齐更改为kCTRightAlignment，但我遇到了崩溃。

到目前为止，这是我的代码。UILabel 显示正确，没有属性文本等工作。我只是在寻找一些 NSAttributedString 帮助。

```
- (void)setTitle:(NSString *)_title {
    titleLabel.text = _title;
    NSMutableAttributedString * attr = [[NSMutableAttributedString alloc] initWithString:_title];

    CTTextAlignment theAlignment = kCTRightTextAlignment;
    CFIndex theNumberOfSettings = 1;
    CTParagraphStyleSetting theSettings[1] = {{ kCTParagraphStyleSpecifierAlignment, sizeof(CTTextAlignment), &theAlignment }};
    CTParagraphStyleRef theParagraphRef = CTParagraphStyleCreate(theSettings, theNumberOfSettings);
    NSDictionary *attributes = [NSDictionary dictionaryWithObjectsAndKeys:(__bridge id)theParagraphRef, (id)kCTParagraphStyleAttributeName, nil]; 
    [attr addAttributes:attributes range:NSMakeRange(0, _title.length)];

    titleLabel.attributedText = attr;
} 
```

这是错误/崩溃

```
2013-01-24 13:05:59.928 Expandable[12376:c07] -[__NSCFType lineBreakMode]: unrecognized selector sent to instance 0x716f1b0
2013-01-24 13:05:59.929 Expandable[12376:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFType lineBreakMode]: unrecognized selector sent to instance 0x716f1b0'
*** First throw call stack:
(0x157c012 0x13a1e7e 0x16074bd 0x156bbbc 0x156b94e 0x33ebea1 0x33eba56 0x446c24 0x4452e9 0x4476a8 0x3394be 0x203a3f 0x20396b 0x115697 0x20383c 0x2039ba 0x2032b6 0x203994 0x1f80e2 0x1f815c 0x1760bc 0x177227 0x1778e2 0x1544afe 0x1544a3d 0x15227c2 0x1521f44 0x1521e1b 0x19f87e3 0x19f8668 0x2e965c 0x209d 0x1fc5 0x1)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

我已经做了一些搜索和研究以达到这一点，但我被困住了。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-12T08:56:43.730

在我的情况下，我使用的是 a`UILabel`但它在这条线上崩溃了 `CGSize expectedLabelSize = [headline sizeWithFont:headlineLabel.font constrainedToSize:maximumLabelSize lineBreakMode:headlineLabel.lineBreakMode];`，我的崩溃显示了 UITextView`[UITextView lineBreakMode]`所以我只是`UILabel`在分配值之前初始化了我，它对我有用。可能对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T14:52:46.427

首先，如果`CTParagraphStyleCreate`您使用 ARC 创建 CTParagraphStyle，则还必须释放该段落。所以之后`[attr addAttributes:attributes range:NSMakeRange(0, _title.length)];`你必须打电话`CFRelease(theParagraphRef);`。

要修复您的崩溃，您必须检查 NSMutableParagraphStyle 类（可从 iOS 6 获得）并使用它。

您的代码应如下所示：

```
- (void)setTitle:(NSString *)_title {
    titleLabel.text = _title;
    NSMutableAttributedString *attr = [[NSMutableAttributedString alloc] initWithString:_title];

    if ([NSMutableParagraphStyle class]) {
        NSMutableParagraphStyle *paragraphStyle = [NSMutableParagraphStyle new];
        paragraphStyle.alignment = NSTextAlignmentRight;

        [attr addAttribute:NSParagraphStyleAttributeName
                     value:paragraphStyle
                     range:NSMakeRange(0, _title.length)];
    }
    else {
        CTTextAlignment theAlignment = kCTRightTextAlignment;
        CFIndex theNumberOfSettings = 1;
        CTParagraphStyleSetting theSettings[1] = {{ kCTParagraphStyleSpecifierAlignment, sizeof(CTTextAlignment), &theAlignment }};
        CTParagraphStyleRef theParagraphRef = CTParagraphStyleCreate(theSettings, theNumberOfSettings);
        NSDictionary *attributes = [NSDictionary dictionaryWithObjectsAndKeys:(__bridge id)theParagraphRef, (id)kCTParagraphStyleAttributeName, nil];
        [attr addAttributes:attributes range:NSMakeRange(0, _title.length)];

        CFRelease(theParagraphRef);
    }
    titleLabel.attributedText = attr;
} 
```

# android - 获取在可过滤列表视图上选择的项目

> ID：14507991
> 
> 赞同：1
> 
> 时间：2013-01-24T18:14:46.317
> 
> 标签：android, listview, location

我遇到了一个不错的可过滤列表视图教程，我想知道如何确定选择了哪个列表视图项目并显示敬酒。这是代码：

```
package com.example.listview;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.view.ViewStub;
import android.widget.BaseAdapter;
import android.widget.EditText;
import android.widget.FrameLayout;
import android.widget.ListView;
import android.widget.TextView;

public class TestFilterListView extends Activity {
FrameLayout historyContainer;
ViewStub viewStub;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.history_container);
    historyContainer = (FrameLayout) findViewById(R.id.historyContainerLayout);
    EditText filterEditText = (EditText) findViewById(R.id.filter_text);
    filterEditText.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {

            historyContainer.removeAllViews();
            final List<String> tempHistoryList = new ArrayList<String>();
            tempHistoryList.addAll(historyList);
            for(String data : historyList) {
                if(data.indexOf((s.toString())) == -1) {
                    tempHistoryList.remove(data);
                }
            }
            viewStub = new ViewStub(TestFilterListView.this, R.layout.history_schedule);
            viewStub.setOnInflateListener(new ViewStub.OnInflateListener()
            {
                public void onInflate(ViewStub stub, View inflated)
                {

                    setUIElements(inflated, tempHistoryList);
                }
            });
            historyContainer.addView(viewStub);
            viewStub.inflate();

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub

        }
    });

    setViewStub();
}

/********************************************************************************************************/
private void setViewStub()
{
    historyList.add("first");
    historyList.add("second");
    historyList.add("third");
    historyList.add("fourth");
    historyList.add("fifth");
    historyList.add("sixth");
    historyList.add("seventh");

    viewStub = new ViewStub(TestFilterListView.this, R.layout.history_schedule);
    viewStub.setOnInflateListener(new ViewStub.OnInflateListener()
    {
        public void onInflate(ViewStub stub, View inflated)
        {

            setUIElements(inflated, historyList);

        }
    });
    historyContainer.addView(viewStub);
    viewStub.inflate();

}

/********************************************************************************************************/
final List<String> historyList = new ArrayList<String>();
String displayName = "";
ListView historyListView;
private void setUIElements(View v, List<String> historyLists)
{

    if (v != null)
    {
        historyScheduleData.clear();
        //historyList.clear();

        historyScheduleData.addAll(historyLists);
        historyListView = (ListView) findViewById(R.id.historylist);
        historyListView.setAdapter(new BeatListAdapter(this));

        registerForContextMenu(historyListView);

    }

}

private static class BeatListAdapter extends BaseAdapter {
    private LayoutInflater mInflater;

    public BeatListAdapter(Context context) {
        mInflater = LayoutInflater.from(context);

    }

    public int getCount() {
        return historyScheduleData.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.history_list_view, null);
            holder = new ViewHolder();
            holder.historyData = (TextView) convertView
                    .findViewById(R.id.historytext);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.historyData.setText(historyScheduleData.get(position));

        return convertView;
    }

    static class ViewHolder {

        TextView historyData;
    }
}

private static final List<String> historyScheduleData = new ArrayList<String>(); 
```

}

我想过使用

```
protected void onListItemClick(ListView l, View v, int position, long id) {

        if(position == 0) {
            Intent intent = new Intent(getApplicationContext(), GODoc1Activity.class);
            startActivity(intent); 
```

但是当我尝试实现它时，它不起作用。我在这里错过了什么吗？我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:29:57.207

你试过这个吗？：（在 onCreate 中）

```
historyListView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, final int position, long id) {
            //your code

            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:43:14.067

如果您尝试在 ListView 中查找所选项目：

```
listView.getAdapter().getItem(listView.getCheckedItemPosition()); 
```

查看此处的文档以获取更多信息[http://developer.android.com/reference/android/widget/AbsListView.html#getCheckedItemPosition%28%29](http://developer.android.com/reference/android/widget/AbsListView.html#getCheckedItemPosition%28%29)

# javascript - javascript - 用户代理上的正则表达式匹配设备

> ID：14507996
> 
> 赞同：0
> 
> 时间：2013-01-24T18:15:09.170
> 
> 标签：javascript, mobile

我正在使用 PHP 类“Mobile Detect”来检测用户设备类型（平板电脑/手机），但是我也想在 javascript 中检测某些设备。有人可以帮我将以下内容转换为 javascript 正则表达式（只需要一个真/假返回）吗？

```
var user_agent = navigator.userAgent;

var samsung = 'Galaxy.*Tab|SAMSUNG.*Tablet|Galaxy.*Tab|Android.*GT-';
// if statement checking samsung regex against user agent

var nexus = '^.*Android.*Nexus(((?:(?!Mobile))|(?:(\s(7).+))).)*$';
// if statement checking nexus7 regex against user agent 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:20:23.327

你在寻找这样的东西吗？

```
var user_agent = navigator.userAgent;

var samsung = /Galaxy.*Tab|SAMSUNG.*Tablet|Galaxy.*Tab|Android.*GT-/i;
// if statement checking samsung regex against user agent
if (samsung.test(user_agent)) {
   // This is a samsung mobile device
}

var nexus = /^.*Android.*Nexus(((?:(?!Mobile))|(?:(\s(7).+))).)*$/i;
// if statement checking nexus7 regex against user agent
if (nexus.test(user_agent)) {
   // This is a nexus mobile device
} 
```

或者您是否真的需要帮助修复故障/不完整的正则表达式？

如果你需要一个可靠的正则表达式，我建议你去[txt2re.com](http://txt2re.com)玩，这是我所知道的最好的正则表达式生成器。