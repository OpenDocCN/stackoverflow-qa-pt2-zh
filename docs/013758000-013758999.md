# StackOverflow 问答 13758000-13758999

# sql - 如何仅在 Postgres 中备份功能

> ID：13758003
> 
> 赞同：30
> 
> 时间：2012-12-07T06:22:20.763
> 
> 标签：sql, postgresql, postgresql-9.1

我想备份我的 postgres 数据库中的所有功能。如何仅在 Postgres 中备份功能？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-12-07T07:58:48.863

使用`pg_getfunctiondef`；见[系统信息功能](http://www.postgresql.org/docs/current/static/functions-info.html)。`pg_getfunctiondef`在 PostgreSQL 8.4 中添加。

```
SELECT pg_get_functiondef('proc_name'::regproc); 
```

要转储模式中的所有函数，您可以查询系统表`pg_catalog`；说如果你想要一切`public`：

```
SELECT pg_get_functiondef(f.oid)
FROM pg_catalog.pg_proc f
INNER JOIN pg_catalog.pg_namespace n ON (f.pronamespace = n.oid)
WHERE n.nspname = 'public'; 
```

如果您想要的话，将上面的内容更改为“除了以*”**开头的所有模式之外的所有模式都是微不足道的。`pg_`*

在`psql`您可以将其转储到文件中：

```
psql -At dbname > /path/to/output/file.sql <<"__END__"
... the above SQL ...
__END__ 
```

要在另一个数据库中运行输出，请使用以下内容：

```
psql -1 -v ON_ERROR_STOP -f /path/to/output/file.sql target_db_name 
```

但是，如果您要在这样的 DB 之间复制函数，请考虑将函数定义的授权副本作为 SQL 脚本存储在 svn 或 git 等修订控制系统中，最好打包为 PostgreSQL 扩展。请参阅[包装扩展](http://www.postgresql.org/docs/current/static/extend-extensions.html)。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-12-07T06:53:25.580

你不能告诉`pg_dump`只转储函数。但是，您可以在没有数据的情况下进行转储（`-s`或`--schema-only`）并在还原时对其进行过滤。注意`--format=c`（也`-Fc`）部分：这将生成一个适合`pg_restore`.

首先进行转储：

```
pg_dump -U username --format=c --schema-only -f dump_test your_database 
```

然后创建一个函数列表：

```
pg_restore --list dump_test | grep FUNCTION > function_list 
```

最后恢复它们（`-L`或`--use-list`指定上面创建的列表文件）：

```
pg_restore -U username -d your_other_database -L function_list dump_test 
```

# ios - 你如何将自定义 UINavigation Bar Image 居中

> ID：13758005
> 
> 赞同：1
> 
> 时间：2012-12-07T06:22:27.253
> 
> 标签：ios, uinavigationcontroller

所以我有一个导航栏，我想自定义和居中，无论我做什么，我都会像[这样](http://myusuf3.dropmark.com/78530/1294463)平铺图像。

`self.navigation.titleView`这是我用来设置的代码`UITableControllerView`

```
self.navigationItem.titleView = [self titleView]; // happens in viewDidLoad

- (UIView *)titleView{
UIImage *headerImage = [UIImage imageNamed:@"header@2x"];
UIImageView *containerView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, headerImage.size.width, headerImage.size.height)];

return containerView;

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:35:28.387

```
UIImageView *imgtitle = [[UIImageView alloc]    initWithFrame:CGRectMake(0, 0, 100, 25)];
    [imgtitle setContentMode:UIViewContentModeCenter];
    self.navigationItem.titleView = imgtitle;
    imgtitle.image = [UIImage imageNamed:@"logo.png"]; 
```

# xslt - 添加属性时从子节点XSLT获取第3级父节点

> ID：13758008
> 
> 赞同：0
> 
> 时间：2012-12-07T06:22:42.193
> 
> 标签：xslt

XML

```
 <root>
        <Algemeen>
             <foto>
                 <foe>
                     <fee>
                         <img src="www.blah.com/sample.jif"></img>
                     </fee>
                 </foe>
              </foto>
         </Algemeen>
    </root> 
```

XSLT

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
        <xsl:template match="/">
            <result>
        <xsl:apply-templates select="/root/Algemeen/foto/foe/fee/img"/>
            </result>
        </xsl:template>

    <!--specific template match for this img -->
        <xsl:template match="/root/Algemeen/foto/foe/fee/img">
          <xsl:copy>
                <xsl:attribute name="width">100</xsl:attribute>
                <xsl:apply-templates select="@*|node()" />
              </xsl:copy>
        </xsl:template>

    <!--Identity template copies content forward -->
        <xsl:template match="@*|node()">
            <xsl:copy>
                <xsl:apply-templates select="@*|node()"/>
            </xsl:copy>
        </xsl:template>

    </xsl:stylesheet> 
```

我正在通过模板向“img”标签添加一个属性，我怎样才能获得整个“foto”节点？这个“@*|node()”是指第二级父节点“敌人”吗？

查看的链接：

*   [xslt如何将属性添加到副本](https://stackoverflow.com/questions/615875/xslt-how-to-change-an-attribute-value-during-xslcopy)
*   [E4X可以根据任何级别的子属性获取父节点的属性吗？](https://stackoverflow.com/questions/1427810/can-e4x-get-attribute-of-a-parent-node-based-on-attribute-of-a-child-at-any-leve)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:57:36.880

> 这个“@*|node()”是指第二级父节点“敌人”吗？

没有！这是指子节点和属性..

> 如何复制`<img>`添加属性及其祖父母`<foto>`？

在您的代码中，您通过说匹配根节点`<xsl:template match="/">`并将其重命名为`<result>`. 在此之下，您是在说`<xsl:apply-templates select="/root/Algemeen/foto/foe/fee/img"/>`..所以这将跳过层次结构并按照`<xsl:template match="/root/Algemeen/foto/foe/fee/img">`所说的去做..

你的`<xsl:template match="/root/Algemeen/foto/foe/fee/img">`模板看起来很完美！！您需要的只是以下修正！

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="/">
    <result>
      <xsl:apply-templates select="/root/Algemeen/foto"/>
    </result>
  </xsl:template>

  <xsl:template match="foto">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <!--specific template match for this img -->
  <xsl:template match="/root/Algemeen/foto/foe/fee/img">
    <xsl:copy>
      <xsl:attribute name="width">100</xsl:attribute>
      <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
  </xsl:template>

  <!--Identity template copies content forward -->
  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

如果您想访问父级或祖先，请尝试以下操作：

```
<xsl:for-each select="ancestor::foto"> 
```

# mysql - 时间戳索引

> ID：13758010
> 
> 赞同：0
> 
> 时间：2012-12-07T06:22:55.547
> 
> 标签：mysql, indexing, innodb

如果我有一个包含列的表：`item_id, user_id, vote, date`我应该将索引放在哪些列上：

1.  我需要按日期获取时间范围的选票

2.  用户对每个项目的投票不能超过一票。

如果我想获取更新的日期，索引应该按 ASC 还是 DESC 排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T06:24:53.790

主要：item_id，user_id

索引：日期

将 DESC 排序为最新的优先

注意：我假设您将日期存储为 UNIX TIMESTAMP（来自您的问题标题 Timestamp Indexing）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:31:12.580

您可以尝试以下方法：

```
CREATE INDEX mytime_index ON myTable (user_id, date); 
```

您不能在索引级别设置`asc`和`desc`，因为它默认为 on `asc`。

看看这个------------- 引自[mysql website create indices](http://dev.mysql.com/doc/refman/5.5/en/create-index.html)

index_col_name 规范可以以 ASC 或 DESC 结尾。这些关键字被允许用于指定升序或降序索引值存储的未来扩展。目前，它们被解析但被忽略；索引值始终按升序存储

# php - php中的代码样式

> ID：13758014
> 
> 赞同：1
> 
> 时间：2012-12-07T06:23:36.343
> 
> 标签：php, html, mysql, css, styles

我无法对从数据库中提取的信息进行样式设置。如果有人可以提供帮助，我将不胜感激。我尝试在 while 循环中定义 $style，然后将其分配给 $questions，但网页上没有任何反应。我一般是编码新手，虽然我对 css 有一些了解，但我不知道你是如何在 php 脚本中使用它的。

**我试图把每个问题放在背景的风格***

```
#frm1
        {
            background: #D9D9D9;
            margin:auto;
            top:150px; left:200px; width:880px; height:60px;
            position:absolute;
            font-family: "Comic Sans MS", cursive, sans-serif;
            font-size: 9px;
            font-style: italic;
            line-height: 24px;
            font-weight: bold;
            text-decoration: none;
            -webkit-border-radius: 10px;
            -moz-border-radius: 10px;
            border-radius: 10px;
            padding:10px;
            border: 1px solid #999;
            border: inset 1px solid #333;
            -webkit-box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.5);
            -moz-box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.5);
            box-shadow: 0px 0px 40px rgba(0, 0, 0, 0.7);
         } 
```

**PHP 代码从数据库中检索信息***

```
if (mysql_num_rows($result) >= 0)
    {
        $toggle = false;
        while ($rows = mysql_fetch_array($result, MYSQL_ASSOC) and $i<10 ) 
             {
                        $i++;
                        $toggle = !$toggle;
                        if($toggle)
                        $style = "id:frm1;";
                        else
                        $style = "background: white;";

                        questions .= "<a style='$style'> </a>";
                        questions .= "Titlee: " ."<a href='show_question2.php?question_id=" . $rows["question_id"] . "'>". $rows['title'] . "</a> <br> ";
                        questions .= "Details: " . "<a href='show_question2.php?question_id=" . $rows["question_id"] . "'>". $rows['detail'] . "</a> <br>  ";
                        questions .= "Category: " . "<a href='show_question2.php?question_id=" . $rows["question_id"] . "'>". $rows['categories'] . "</a> <br> <br> <br> ";
                    }
                    echo  questions;
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:38:15.853

> 虽然我对 css 有一些了解，但我不知道您如何在 php 脚本中使用它。

好的。

您的 PHP 脚本是服务器上的 PHP 脚本，并为用户生成一个常规的 HTML 页面。[见答案底部，我会尽量给你一个快速的概述]

您可以像使用普通 HTML 页面一样使用 CSS，尽管受到 PHP 的支持，它也能正常工作。

这意味着**不要使用 style="$style"**。样式属性不好。

看起来你想有条件地构建你的 CSS，我的建议是：

*   使用 PHP 更改一个类，并拥有一个作用于该类的外部样式表
*   将您有条件地更改的样式放在`<style>`标题中的标签内，并使用 PHP 更改这些样式。

**此答案将使用第一个选项** （已编辑以考虑新信息）

在您的 PHP 代码中，在您的链接之前：

```
if($toggle) {
    $questions.='<div id="frm1">';
}
else {
    $questions.='<div id="frm2">';
} 
```

在您的 PHP 代码中，在您的链接之后：

```
 $questions .= "</div>"; 
```

最后，在您的外部样式表或您的头内`<style>`标签中：

```
#frm1 {
   ...
}
#frm2 {
   ...
} 
```

**服务器端语言的快速概览**

所以，网络编程。这通常通过两种方式完成。**客户端**（阅读：javascript）和**服务器端**（在您的情况下，阅读：php，但还有很多）。

使用像 javascript 这样的客户端语言，代码实际上被发送到 Web 浏览器。然后，Web 浏览器会根据脚本要求它执行的操作来修改页面的内容。这意味着您的用户可以看到代码，甚至可以在他们的 Web 浏览器中将其关闭或在其位置执行其他 javascript。

使用服务器端语言，有不同的工作流程。

1.  用户请求您的网页（由其 URL 标识）
2.  网络服务器（阅读：你的虚拟主机）接收到这个请求，并查找网页是什么
3.  发现网页是php页面，**服务器**执行php代码
4.  php 代码为服务器提供了一个 html 页面（如您所见，您已经构建了该页面，您的 php 脚本输出了 HTML）
5.  服务器将**生成的 html 代码**发送给用户

请注意，Web 浏览器是执行所有 HTML 和 CSS 处理的组件，它永远不会看到 php.ini 文件。当您的 php 脚本到达您的用户时，它只是一个 html 页面。

因为网络浏览器只看到一个 HTML 页面，所以在 php 脚本上使用 CSS 和在常规 HTML 页面上使用 CSS 之间没有功能上的区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:49:58.360

你可以在你的柜台上交替`$i`切换`$i % 2`两个 CSS 类。这将为您`0, 1, 0, 1, 0, 1, ...`依次选择第一个和第二个 CSS 类名称。

PHP：

```
$css_class = array('frm1', 'second');
while ($rows = mysql_fetch_array($result, MYSQL_ASSOC) and $i<10 )
{
    $i++;
    questions .= "<a class='$css_classes[$i % 2]'> </a>";
    questions .= "Titlee: " ."<a href='show_question2.php?question_id=" . $rows["question_id"] . "'>". $rows['title'] . "</a> <br> ";
    questions .= "Details: " . "<a href='show_question2.php?question_id=" . $rows["question_id"] . "'>". $rows['detail'] . "</a> <br>  ";
    questions .= "Category: " . "<a href='show_question2.php?question_id=" . $rows["question_id"] . "'>". $rows['categories'] . "</a> <br> <br> <br> ";
} 
```

并在您的 CSS 文件中定义两个类

```
.frm1 {
    background: #D9D9D9;
    margin:auto;
    top:150px; left:200px; width:880px; height:60px;
    position:absolute;
    ...
}

.second {
    background: white;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T06:29:32.953

这将起作用：

```
if (mysql_num_rows($result) >= 0) {
    $toggle = false;
    while ($rows = mysql_fetch_array($result, MYSQL_ASSOC) and $i<10 ) {
        $i++;
        $toggle = !$toggle;
        if($toggle)
        $style = "background: #D9D9D9;"; else
        $style = "background: green;";

        questions .= "<a href='#' style='display:block;$style'> </a>";
        questions .= "Titlee: " ."<a href='show_question2.php?question_id=" . $rows["question_id"] . "'>". $rows['title'] . "</a> <br> ";
        questions .= "Details: " . "<a href='show_question2.php?question_id=" . $rows["question_id"] . "'>". $rows['detail'] . "</a> <br>  ";
        questions .= "Category: " . "<a href='show_question2.php?question_id=" . $rows["question_id"] . "'>". $rows['categories'] . "</a> <br> <br> <br> ";
    }
    echo  questions;
} 
```

问题是您的 a-tag 没有 href 属性，并且由于它是内联显示的（默认行为），因此背景 CSS 属性将不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T06:55:51.527

正如本所说，使用类。

首先创建一个类

```
<style>
.gray{background: #D9D9D9;}
.green{background: green;}
</style> 
```

然后试试这个

```
if (mysql_num_rows($result) >= 0)
    {
        $toggle = false;
        while ($rows = mysql_fetch_array($result, MYSQL_ASSOC) and $i<10 ) 
             {
                        $i++;
                        $toggle = !$toggle;
                        $style = ($toggle)?"green":"gray";

                        $questions .= "<a class='".$style."'> Put some thing here </a>";
                        $questions .= "Titlee: " ."<a href='show_question2.php?question_id=" . $rows["question_id"] . "'>". $rows['title'] . "</a> <br> ";
                        $questions .= "Details: " . "<a href='show_question2.php?question_id=" . $rows["question_id"] . "'>". $rows['detail'] . "</a> <br>  ";
                        $questions .= "Category: " . "<a href='show_question2.php?question_id=" . $rows["question_id"] . "'>". $rows['categories'] . "</a> <br> <br> <br> ";
                    }
                    echo  $questions;
    } 
```

请尝试一下，我没有测试过，但它应该可以工作，根据您的需要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T06:39:01.377

代替样式，构建类并在 css 中定义它们。

```
if ($toggle)
     $questionClass="redBackground";
else
     $questionClass="greenBackground";
$questions.="<a class='$questionClass'>"; 
```

另外，一定要研究 mysqli 或 pdo。mysql_ 函数已被弃用，几乎没有那么酷！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-07T06:45:57.717

你可以做 -

```
if (mysql_num_rows($result) >= 0)
{
    $toggle = false;
    while ($rows = mysql_fetch_array($result, MYSQL_ASSOC) and $i<10 ) 
         {
                    $i++;
                    $toggle = !$toggle;
                    if($toggle)
                      $style = "bg";
                    else
                      $style = "bg_green";
                    echo("<a class='".$style."'> </a>");
                    echo("Titlee: " ."<a href='show_question2.php?question_id=" . $rows["question_id"] . "'>". $rows['title'] . "</a> <br> ");
                    echo("Details: " . "<a href='show_question2.php?question_id=" . $rows["question_id"] . "'>". $rows['detail'] . "</a> <br>  ");
                    echo("Category: " . "<a href='show_question2.php?question_id=" . $rows["question_id"] . "'>". $rows['categories'] . "</a> <br> <br> <br> ");

          } 
```

在这个文件中添加 -

```
<style type="text/css">
    .bg {
         background: #D9D9D9;
      }
      .bg_green {
         background: green;
      }
</style> 
```

# ruby - 使用 Nokogiri 编写单元测试 (RSpec)

> ID：13758015
> 
> 赞同：0
> 
> 时间：2012-12-07T06:23:47.550
> 
> 标签：ruby, rspec, ruby-on-rails-3.1, nokogiri, rspec2

在我当前的应用程序中，我有一个模块可以从外部网站读取（提取）HTML。例如说我正在提取以下 div

```
<div class='sample'>
  <p class="name">Jhon Smith</p>
  <div class="address">
    No30, 5th Street,
    Home Town 
  </div>
</div> 
```

而且我有阅读方法

*   1 - 名称
*   2 - 地址

前任 ：`def name(htmlDiv) -> return "Jhon Smith"`

```
def address(htmlDiv) -> return " No30, 5th Street,Home Town " 
```

我的问题是如何使用 rspec 对这些方法进行单元测试？我的想法是做如下

*   在 spec/factories 目录中有上述 html 的字符串
*   在 spec/lib/*_spec.rb 中有一个包含上述方法的规范文件
*   读取字符串并作为参数传递给 div

    1.  那么这种方法是否正确？
    2.  当涉及到 html 页面阅读时，还有其他简单/有条理的测试方法吗？

我上线了

*   Rails3
*   雷柏2.0
*   小切
*   休息客户端

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T10:26:49.613

在进行单元测试时，我会“存根”这个 HTML：

```
describe MyExtractor do
 let(:raw_html) { "<div>...</div>" }
 let(:name) { 'John' }
 let(:address) { 'Something' }

 subject { described_class.new(raw_html) }

 its(:name) { should eq name }
 its(:address) { should eq address }
end 
```

您可以从中提取特定`context`的 s（当 HTML 格式错误、何时为空白、没有地址时等）来测试边缘案例（稍后您可以为此提取共享示例）。

稍后您可以进行集成测试，当您将提供此 HTML 以从“真实”源（可能再次使用 webmock 或其他东西存根）进行解析时。

# javascript - Paper.js 在 chrome 中给出错误

> ID：13758017
> 
> 赞同：0
> 
> 时间：2012-12-07T06:23:54.207
> 
> 标签：javascript, google-chrome, paperjs

> **可能重复：**
> [XMLHttpRequest Origin null 不允许访问-控制-访问-允许文件：/// 到文件：///（无服务器）](https://stackoverflow.com/questions/4208530/xmlhttprequest-origin-null-is-not-allowed-access-control-access-allow-for-file)

当我使用 paper.js 时，我在 Google chrome 中收到此错误。即使我从我的 js 文件中删除了我的所有代码，它也会给出错误。刚开始用paperjs，所以没有得到什么是错的

未捕获的错误：NETWORK_ERR：XMLHttpRequest 异常 101

在 demo.js 文件中有一些小代码后，又出现了一个错误：XMLHttpRequest cannot load file:///E:/​​Shruti/Remote%20Triggering/demo/js/demo.js。仅 HTTP 支持跨源请求。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-18T17:46:30.490

`--allow-file-access-from-files`如果你想离线工作，你应该为 chrome 添加选项。

# python - 如何使用find在python中查找近似词

> ID：13758019
> 
> 赞同：0
> 
> 时间：2012-12-07T06:24:04.830
> 
> 标签：python

我需要在许多句子中找到一个单词的第一个字符。所有的句子都有某种形式的“猜想”一词，即猜想、猜想等。但是我不能像这样在“查找”中使用通配符

```
firstSpace = mySentence.find('conjecture'*,0) 
```

句子看起来像：

```
'There is considerable conjecture and debate as to how...'
'He conjectured that the interface was...' 
```

有什么想法我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T07:28:19.790

您可以先尝试删除特殊字符：

```
x = 'â€œ There is considerable conjecture and debate as to how...

newx = ''.join(e for e in x.lower() if e.isalnum())

print newx

>>> 'thereisconsiderableconjectureanddebateastohow' 
```

然后使用`find`来定位您的单词。

祝你好运！

编辑：

如果要查找指定单词之前的单词，可以拆分句子。这是一段可能有帮助的代码：

```
paragraph = 'The quick brown fox jumps over the lazy dog. I have two big dogs. Furry Dogs are the best. $%^Dogs love me.'
paragraph = ''.join(e for e in paragraph.lower() if e.isalnum() or e.isspace() or e=='.')
sentence_list = paragraph.split('.')
prev_word_list = []
for sentence in sentence_list:
    word_list = sentence.split()
    prev_word = ''
    for i,word in enumerate(word_list):
        if i == 0:
            pass
        else:
            if 'dog' in word.lower():
                prev_word = word_list[i-1]
                prev_word_list.append(prev_word) 
```

这给出了：

```
>>> print prev_word_list
>>> ['lazy', 'big', 'furry'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T10:32:31.163

> 所有句子都有某种形式的“猜想”一词，即猜想、猜想等。

`word in string`其他答案中显示的方法通常会失败，例如，他们不会`community`在包含其中的句子中找到单词`communities`。

在这种情况下，您可能需要一个词干算法，例如[`nltk.stem`package](http://nltk.googlecode.com/svn/trunk/doc/api/nltk.stem-module.html)提供的：

```
from nltk.stem.snowball import EnglishStemmer
from nltk import word_tokenize

stemmer = EnglishStemmer()
stem_word = stemmer.stem

stem = stem_word(u"conjecture")
sentence = u'He conjectured that the interface was...'
words = word_tokenize(sentence)
found_words = [(i, w) for i, w in enumerate(words) if stem_word(w) == stem]
# -> [(1, u'conjectured')] 
```

[nltk](http://nltk.org/api/nltk.tokenize.html)中还有其他 stem 和tokenize 方法，您可以根据您的确切需要使用它们。

> 但是有些词以讨厌的字符开头：“或类似..我怎样才能摆脱它们？

“讨厌的字符”是错误地将`utf-8`字节序列视为的结果`cp1252`：

```
>>> utf8bytes = u"microsoft smart quote (\u201c)".encode('utf-8')
>>> print utf8bytes.decode('cp1252')
microsoft smart quote (â€œ)
>>> print utf8bytes.decode('utf-8')
microsoft smart quote (“) 
```

您不应该盲目删除乱码文本，而是修复字符编码。

[为什么#AskObama 推文在屏幕上出现乱码：了解您的 UTF-8、Unicode、ASCII 和 ANSI 解码总统先生](http://www.hanselman.com/blog/WhyTheAskObamaTweetWasGarbledOnScreenKnowYourUTF8UnicodeASCIIAndANSIDecodingMrPresident.aspx)在电视上展示了一个关于此问题的公开示例。

要理解阅读[每个软件开发人员绝对、肯定必须了解 Unicode 和字符集的绝对最低要求（没有借口！）](http://www.joelonsoftware.com/articles/Unicode.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T06:47:36.110

忘记实际上在后台完成的隐式工作，这至少会实现您要求的任务（希望如此）。

```
unicodedata.normalize('NFKD', mySentence).encode('ascii', 'ignore').lower().find("conjecture") 
```

好吧，老实说，我希望正则表达式可以为您设置线性搜索，但是 unicode 值通常会分成两个“字符”。

相反，这是一个至少可以完成工作的 hack：

```
newSentence = ""
for i in range(0, len(mySentence)):
   if ord(mySentence[i]) > 128:
         newSentence += '_'
   else:
         newSentence += mySentence[i]

newSentence.encode("UTF-8").lower().find("conjecture") 
```

如果您想忘记那些讨厌的编码字符：

```
mySentence.decode("ascii", "ignore").encode("UTF-8").lower().find("conjecture")

Sample input: >>> newStr = "â€œ32f fWF  3(*&(%FJ   conJectuRe€@!O".decode("ascii", "ignore").encode("UTF-8").lower()
              >>> print newStr
              >>> print newStr.find("conjecture")

Output:       '32f fwf  3(*&(%fj   conjecture@!o'
              20 
```

# groovy - 詹金斯上的 Groovy 脚本错误

> ID：13758023
> 
> 赞同：0
> 
> 时间：2012-12-07T06:24:29.670
> 
> 标签：groovy, jenkins

嗨，我是 groovy 的新手。

我正在使用 jenkins 进行构建，现在我的要求是捕获构建结果，例如（Success/Unstable.Failure）并将其打印在构建电子邮件的主题行上。

我已经安装了 groovy postbuild 插件并尝试执行以下几行但没有成功：

导入 hudson.model.*

status = manager.build.result println ${status}

然后我会在我的 email-ext 插件的主题行中包含状态变量。

但我收到以下错误：

```
Groovy script failed:
groovy.lang.MissingMethodException: No signature of method: Script1.$() is applicable for argument types: (Script1$_run_closure1) values: [Script1$_run_closure1@2620749c]
Possible solutions: is(java.lang.Object), run(), run(), any(), use([Ljava.lang.Object;), any(groovy.lang.Closure)
at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.unwrap(ScriptBytecodeAdapter.java:55)
at org.codehaus.groovy.runtime.callsite.PogoMetaClassSite.callCurrent(PogoMetaClassSite.java:78)
at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCallCurrent(CallSiteArray.java:46)
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:133)
at org.codehaus.groovy.runtime.callsite.AbstractCallSite.callCurrent(AbstractCallSite.java:141)
at Script1.run(Script1.groovy:4)
at groovy.lang.GroovyShell.evaluate(GroovyShell.java:580)
at groovy.lang.GroovyShell.evaluate(GroovyShell.java:618)
at groovy.lang.GroovyShell.evaluate(GroovyShell.java:589)
at org.jvnet.hudson.plugins.groovypostbuild.GroovyPostbuildRecorder.perform(GroovyPostbuildRecorder.java:276)
at hudson.tasks.BuildStepMonitor$1.perform(BuildStepMonitor.java:19)
at hudson.model.AbstractBuild$AbstractRunner.perform(AbstractBuild.java:710)
at hudson.model.AbstractBuild$AbstractRunner.performAllBuildSteps(AbstractBuild.java:685)
at hudson.model.Build$RunnerImpl.post2(Build.java:162)
at hudson.model.AbstractBuild$AbstractRunner.post(AbstractBuild.java:632)
at hudson.model.Run.run(Run.java:1463)
at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
at hudson.model.ResourceController.execute(ResourceController.java:88)
at hudson.model.Executor.run(Executor.java:239) 
```

请问有人可以帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:22:29.693

`${BUILD_STATUS}`无需借助 groovy 就已经可用，并且可以在您的电子邮件模板中使用，只需使用`${BUILD_STATUS}`

# asp.net-mvc-4 - 在 MVC4 中使用捆绑时未加载 CSS 中的图像

> ID：13758024
> 
> 赞同：1
> 
> 时间：2012-12-07T06:24:41.873
> 
> 标签：asp.net-mvc-4, bundling-and-minification

我是 MVC4 和捆绑概念的新手。对我来说，CSS 文件正在正确加载，但其中指定的图像未加载，并且显示 404 异常。

我的 CSS 文件夹结构是：~\Content\css\CustomCss\green.css

CSS 文件夹结构的图像：Content\css\Customcss\Images\green.png

但是在检查 Firebug 的网络面板时，它将图像的路径显示为：/Content/css/CustomCSS/Content/css/Customcss/Images/Greenish.png

我不知道这个捆绑如何引用 CSS 中的图像。

BundleConfig.cs：

```
 bundles.Add(new StyleBundle("~/Content/css/CustomCss/css").Include("~/Content/css/CustomCss/Syncfusion-Grid-Greenish.css")); 
```

布局.cshtml：

```
 @Styles.Render(" ~/Content/css/CustomCSS/css") 
```

建议我任何想法。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:13:58.347

经过一番小小的挣扎终于得到了答案。

我只是将图像 url 替换为“images/Greenish_sprite.png”而不是“Content/css/Customcss/images/Greenish_sprite.png”。

现在运行良好:)

# php - 表单提交和重定向后如何在同一页面中获取表单发布数据？

> ID：13758026
> 
> 赞同：0
> 
> 时间：2012-12-07T06:24:47.257
> 
> 标签：php, codeigniter

大家好，我有一个页面，每个产品都有添加价格按钮。当客户访问他喜欢自己出价的页面时，他会点击添加价格按钮。将显示一个表格，他将输入一些价格，然后提交表格。当他提交表单时，他将重定向到产品页面。

现在我的问题是我想显示他在重定向到该页面后对该特定产品的报价。我怎样才能做到这一点。我正在寻找想法。

注意：我正在codeIgntier框架上开发这个应用程序............

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:34:54.840

使用 Codeigniter 很容易在控制器中你可以这样做

```
<?php
Class Test Extends CI_Controller
{

    function __construct(){
        parent::__construct();
    }

    function index()
    {
        $data   =   array();
        if($post_data = $this->input->post())
        {
            $data['status'] =   $post_data['status']
        }
        $this->load->view('my_view',$data);
    }

} 
```

在视图中

```
<html>
    <body>
    <?php
    if(isset($status)){
        echo $status;
    }
    ?>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-20T10:37:48.623

**控制器**端

```
 public function get_data()
{
    $data= $_POST;
    $this->load->view('your_view_page',$data);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T07:29:05.200

您可以根据不同的产品更改状态名称。您可以使用前缀或后缀作为状态名称，因此它可能与数组中的其他名称不同。

喜欢，

```
$data['status1'] =   $post_data['status1']
$data['status2'] =   $post_data['status2']
$data['status3'] =   $post_data['status3'] 
```

# c++ - 有没有办法概括仅因操作而异的功能？

> ID：13758027
> 
> 赞同：2
> 
> 时间：2012-12-07T06:24:52.723
> 
> 标签：c++

例如，假设我们有两个函数：

```
无效总和（int x，int y）
{
   返回 x+y；
}

空减（int x，int y）
{
   返回 xy；
}

```

有没有一种方法可以创建一个函数来执行求和或减（或各种其他事情），具体取决于您想要使用的（可能通过某种关键字）而无需显式编写单独的函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T06:34:47.417

有些人用问题下面的评论打败了我，但你走吧！

```
#include <functional>
#include <iostream>
#include <unordered_map>

std::unordered_map<std::string, std::function<int(int,int)>> operations =
{
  { "plus",   std::plus<int>()  },
  { "minus",  std::minus<int>() }
  // etc etc
};

int main(int argc, char** argv)
{
  std::cout << operations["plus"](1, 2) << std::endl;
  std::cout << operations["minus"](2, 1) << std::endl;

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T07:12:52.557

我认为该函数实际上比您发布的函数更强大（它不会编译从函数返回值返回`void`）。您可以使用函数对象来自定义行为，例如：

```
#include <functional>
#include <iostream>
using namespace std::placeholders;

template <typename Op>
int operation(int a0, int a1, Op op = Op())
{
    return op(a0, a1);
}

int my_f0(int a0, int a2)
{
    return 2 * a0 + 3 * a2;
}

int my_f2(int a0, int a2, int f0, int f1)
{
    return f0 * a0 + f1 * a2;
}

int main()
{
    std::cout << operation<std::plus<int> >(2, 3) << "\n";
    std::cout << operation<std::minus<int> >(2, 3) << "\n";
    std::cout << operation(2, 3, std::multiplies<int>()) << "\n";
    std::cout << operation(2, 3, my_f0) << "\n";
    std::cout << operation(2, 3, std::bind(&my_f2, _1, _2, 2, 3)) << "\n";
} 
```

自定义函数是`operation()`. 其他代码只是为了展示它是如何被定制的。标准库算法到处都使用这种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T06:52:24.693

是不想编写单独的函数，还是想从调用站点调用一件事？如果你不介意多写一点，你可以使用操作符对象：

```
class Add {
  public:
  int operator(int a, int b) {
    return a+b:
  }
};

class Mul {
  public:
  int operator(int a, int b) {
    return a*b:
  }
};

template <class Op>
int doMyStuff(Op op, int a, int b) {
  return op(a,b);
}

// and you can call it like this:
doMyStuff(Add(),2,4); 
```

当您实现某些不依赖于特定运算符而仅依赖于运算符的某些属性的转换时，此模式特别有用。例如，您可以实现一个数组求和器，它要么对数组的所有元素求和，要么计算数组中所有元素的乘积：循环保持不变，只是运算符发生了变化。

```
template <class Op>
int summator(Op op, int* arr, int size) {
  int v = arr[0];
  for (int i=1; i<size; ++i) {
    v = op(v,arr[i]);
  }
  return v;
}

...

summator(Add(),myarray,10); //sum all elements
summator(Mul(),myarray,10); //product of all elements 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T06:43:54.487

如果你不相信宏是从地狱来的邪恶，你可以这样做：

```
#define DEFINE_OPERATION(maName, maOp) \
  inline int maName (int a, int b) { return a maOp b; }

DEFINE_OPERATION(add, +)
DEFINE_OPERATION(sub, -)

#undef DEFINE_OPERATION 
```

甚至：

```
#include <boost/preprocessor.hpp>

#define OPERATIONS ((add, +))((sub, -))

#define DEFINE_OPERATION(maR, maData, maElem) \
  inline int BOOST_PP_TUPLE_ELEM(2, 0, maElem) (int a, int b) { return a BOOST_PP_TUPLE_ELEM(2, 1, maEleme) b; }

BOOST_PP_SEQ_FOR_EACH(OPERATIONS, unused_, DEFINE_OPERATION)

#undef DEFINE_OPERATION 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T07:01:37.350

```
#include <iostream>
#include <functional>
using namespace std;

template<template<class> class OP, class T> 
T do_op(T a, T b) {
    return  OP<T>()(a,b);
}

int main () {
    cout << do_op<plus>       (3,2) << endl;
    cout << do_op<minus>      (3,2) << endl;
    cout << do_op<multiplies> (3,2) << endl;
    cout << do_op<divides>    (3,2) << endl;
} 
```

# javascript - 生成较大数字概率较小的随机数

> ID：13758031
> 
> 赞同：4
> 
> 时间：2012-12-07T06:25:02.653
> 
> 标签：javascript, random

我想实现一个随机数生成器，它可以让我设置我想要的最大数字，但也可以让我调整概率以使其更难获得更大的数字。

使用它会为 100 范围内的任何值分配相同的概率。

```
Math.floor(Math.random()*100); 
```

当数字接近极限（100）时，如何使数字变得越来越难出现？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T06:28:18.143

平方结果`Math.random`：

```
var result = Math.random();
result = result * result;
result *= 100;
result = Math.floor(result); 
```

您可以通过调整指数来调整曲线。以下是一些不同指数的图表：

![较大的指数更陡峭。](../Images/46285a778c81e013d8a728f8a1fb2539.png)

如果要使用非整数指数，则需要使用[`Math.pow`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/pow).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T06:29:00.773

只需使用具有曲线的数学函数即可为您提供所需的概率加权。例如，您可以“平方”您的号码：

![在此处输入图像描述](../Images/6053413aa8746347593b38d17a9f9769.png)

```
var num = Math.pow(Math.floor(Math.random()*10), 2); 
```

上面生成一个 1-10 之间的随机数，然后将其平方以给出一个 1-100 之间的随机数，但偏向于较低的数字。

您可以通过使用更高的功率进一步增加权重。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T06:29:14.683

Math.pow(Math.floor(Math.random()*10), 2);

或类似的东西。

# java - Class.isInstance 和 Class.cast 的编译错误

> ID：13758032
> 
> 赞同：0
> 
> 时间：2012-12-07T06:25:02.720
> 
> 标签：java, class, compilation

我的代码如下，但我得到了编译错误

```
The method isInstance(MyClass) is undefined for the type Class<T>
The method cast(MyClass) is undefined for the type Class<T> 
```

代码：

```
 public <T extends MyClass> Collection<T> myMethodName(
      Class<T> theClass) {
    Set<T> result = Sets.newHashSet();

    for (MyClass myObject : myObjects) {
      if ( theClass.isInstance(myObject)) {
        result.add(theClass.cast(myObject));
      }
    }

    return result;
  } 
```

# sql - 如何将多个select语句连接在一起

> ID：13758033
> 
> 赞同：-1
> 
> 时间：2012-12-07T06:25:16.307
> 
> 标签：sql, sql-server

我有一个 mastertable id Accessories CarColor 变体值（1 863,862 6 2 5）等（所有 id 都在我的 mastertable 中）和 5 个其他表，如汽车颜色、变体等具有值

* * *

```
id   color
5    red
6    blue
3    green 
```

我需要每个 id = mastertable.id 的子表的值

```
SqlCommand sqlCommand = new SqlCommand(" select * from cartable where carcolor.id = mastertable.carcolor ") ; 
SqlCommand sqlCommand = new SqlCommand(" select * from varianttable where variant.id = mastertable.variant ")  ; 
SqlCommand sqlCommand = new SqlCommand ("select * from accessoriestable where accessories.id = mastertable.accessories ") ;// 
```

我的问题是如何将所有 5 个选择语句连接在一起或对此有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:37:12.163

我猜你需要这个？

```
select * from mastertable
left join carcolortable on mastertable.carcolor=carcolortable.id
left join varianttable on mastertable.variant=varianttable.id
left join accessoriestable on mastertable.accessories=accessoriestable.id 
```

如果正如您在评论`mastertable.carcolor`（和其他人）中所描述的那样，它包含一个逗号分隔的`Id`'s列表，`varchar`那么它应该是：

```
select * from mastertable
left join carcolortable on 
        ( ','+mastertable.carcolor+',' 
          LIKE 
          '%,'+CAST(carcolortable.id as varchar(100))+',%'
         )
left join varianttable on 
        ( ','+mastertable.variant+',' 
          LIKE 
          '%,'+CAST(varianttable.id as varchar(100))+',%'
         )

left join accessoriestable on 
        ( ','+mastertable.accessories+',' 
          LIKE 
          '%,'+CAST(accessoriestable.id as varchar(100))+',%'
         ) 
```

# php - 要求一次（）；无效参数错误

> ID：13758038
> 
> 赞同：-1
> 
> 时间：2012-12-07T06:25:57.770
> 
> 标签：php

> **可能重复：**
> [无法打开流：参数无效](https://stackoverflow.com/questions/2410354/failed-to-open-stream-invalid-argument)

```
// Define the core paths
// Define them as absolute paths to make sure that require_once works as expected

// DIRECTORY_SEPARATOR is a PHP pre-defined constant
// (\ for Windows, / for Unix)
defined('DS') ? null : define('DS', DIRECTORY_SEPARATOR);

defined('SITE_ROOT') ? null : 

define('SITE_ROOT', DS.'C:'.DS.'wamp'.DS.'www'.DS.'photo_gallery');

defined('LIB_PATH') ? null : define('LIB_PATH', SITE_ROOT.DS.'includes');

// load config file first
require_once(LIB_PATH.DS.'config.php');

// load basic functions next so that everything after can use them
require_once(LIB_PATH.DS.'functions.php');

// load core objects
require_once(LIB_PATH.DS.'session.php');
require_once(LIB_PATH.DS.'database.php');

// load database-related classes
require_once(LIB_PATH.DS.'user.php'); 
```

每当我尝试通过在地址栏 localhost/photo_gallery/public/admin/index.php 中输入来运行此代码。它将显示如下错误：

> 警告：require_once(\C:\wamp\www\photo_gallery\includes\config.php)：未能打开流：C:\wamp\www\photo_gallery\includes\initialize.php 中的参数无效，第 16 行。
> 
> 致命错误：require_once()：在 C:\wamp\www\photo_gallery 中打开所需的 '\C:\wamp\www\photo_gallery\includes\config.php'(include_path='.;C:\php\pear') 失败\includes\initialize.php 在第 16 行

请告诉我该怎么办？我是一个初学者启动网页设计师，我被这个致命错误卡住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:34:40.960

`DS`在以下行中是额外的：

定义（'SITE_ROOT'，DS.'C:'.DS.'wamp'.DS.'www'.DS.'photo_gallery'）；

请删除它，使其成为

```
define('SITE_ROOT', 'C:'.DS.'wamp'.DS.'www'.DS.'photo_gallery'); 
```

使用定义代替定义

# sql-server - 如何将 SQL Server 数据转储到 csv 中

> ID：13758039
> 
> 赞同：2
> 
> 时间：2012-12-07T06:26:01.457
> 
> 标签：sql-server, database, conventions

我正在将用 ASP 编写的 Web 应用程序转换为将使用 MySQL 的 PHP。我有一个带有两个文件（`.MDF`和`.LDF`）的 SQL Server 数据库，我想将其转换为 CSV 文件，但我无法找到合适的工具来完成这项工作。我发现有些人建议使用 SQL Server Express。我试过了，但不知道如何从文件中加载数据库并使用它。我也尝试使用 opendbcopy，但是在尝试打开文件时，它没有在文件窗格中显示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T06:49:15.717

如果安装 SQL Server Express，则可以使用 SQL Server Management Studio（管理 UI）中的附加数据库功能加载图像文件。

然后您可以直接从 Management Studio 中查看和使用数据库，您可以在其中通过右键单击数据库名称并选择任务-> 导出数据将文件导出为 CSV。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-26T18:42:26.397

有一个名为 RebaseData 的在线服务可以完成这项工作。您只需要上传您的`.MDF`文件，它就会被转换为`.ZIP`档案。`.ZIP`存档将包含多个文件`.CSV`，一个用于数据库的每个表。

[链接到转换器](https://www.rebasedata.com/convert-mdf-to-csv-online)

免责声明：我正在为该服务工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-23T08:11:02.500

将数据库连接到 Visual Studio 并编写查询以显示您想要的表中的所有数据，然后右键单击并选择全部，然后再次右键单击并保存。完成 ！

# c# - 将列表复制到另一个列表（新列表不应引用旧列表）

> ID：13758044
> 
> 赞同：1
> 
> 时间：2012-12-07T06:26:45.407
> 
> 标签：c#

> **可能重复：**
> [如何在 C# 中克隆通用列表？](https://stackoverflow.com/questions/222598/how-do-i-clone-a-generic-list-in-c)

我想在 C# 中将一个列表复制到另一个列表。问题是现有的方法，比如`copyto`从另一个列表创建一个新列表。但是，如果我对新列表进行一些更改，旧列表也会被更改。这是因为它们的引用类型行为。如果有任何方法（除了`foreach`循环）从另一个不会引用同一个对象的列表中创建一个新列表

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-07T06:36:01.510

所以你想要的是列表的深层副本——其中第二个列表包含第一个列表的元素的副本。在这种情况下，当任何列表的元素发生变化时，另一个列表保持不变。

如何做到这一点，取决于列表中的元素是引用类型还是值类型。值类型列表可以像这样轻松克隆：

```
List<int> deepCopy = new List<int>(originalList); 
```

对于引用类型列表，您可以使用序列化，如下所示：

```
public List<MyObject> DeepCopy()
{
    MemoryStream ms = new MemoryStream();
    BinaryFormatter bf = new BinaryFormatter();
    bf.Serialize(ms, this);

    ms.Position = 0;
    return (List<MyObject>) bf.Deserialize(ms);
} 
```

# c# - 如何检测点周围的区域

> ID：13758051
> 
> 赞同：0
> 
> 时间：2012-12-07T06:27:31.220
> 
> 标签：c#, winforms, drawing

在我的 Winforms 应用程序中，我正在绘制 2D 形状。

在我点击的地方，我想填充周围的形状（或形状相交的区域）。我怎样才能得到一个点周围的区域？

提前致谢。

# android - SQLlite 会在每次调用时重写我的数据吗？

> ID：13758056
> 
> 赞同：1
> 
> 时间：2012-12-07T06:28:04.783
> 
> 标签：android

我想在我的 android 应用程序 sql 数据库中添加。所以我的问题是，如果我每次都调用并创建我的数据库让我说我按下一个按钮，那么它是否必须从一开始就重新创建数据库以及表和列？或者它会检查数据库是否存在然后它只会用我的其余信息填充表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:38:45.913

数据库将只创建一次。

```
@Override
  public void onCreate(SQLiteDatabase database) {
    database.execSQL(DATABASE_CREATE);
  }

  @Override
  public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Log.w(MySQLiteHelper.class.getName(),
        "Upgrading database from version " + oldVersion + " to "
            + newVersion + ", which will destroy all old data");
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_COMMENTS);
    onCreate(db);
  } 
```

这里 SqliteOpenHelper 的 onCreate 只会被调用一次，除非我们更改数据库的版本。

按照本[教程](http://www.vogella.com/articles/AndroidSQLite/article.html)。

希望这就是你要找的

# python - 如何使用文本文件中的一行作为python中的函数输入？

> ID：13758057
> 
> 赞同：0
> 
> 时间：2012-12-07T06:28:06.467
> 
> 标签：python, file-io

我写了一个函数，它允许你通过 python shell 控制turtle模块，这里是它的一部分：

```
import turtle
turtle.showturtle()
def turtle_commands():
    instructions = input().split()
    i = instructions[0]
    if len(instructions) == 2:
        if i == 'forward' :
            n = int(instructions[1])
            turtle.forward(n) 
```

例如当你输入

```
forward 100 
```

乌龟向前移动 100 像素。我对大多数海龟命令都做了同样的事情——向后、向左、向右、向上、向下、颜色等等。

我的问题是，有没有办法从文本文件中加载这些命令？我在想类似的事情

```
instructions = input().split()
i = instructions[0]
if i == 'load' :
    n = str(instructions[1])
    l = open(n, 'r')
    while True:
        line = l.readline()
        turtle_commands(line) #i don't really know what i did here, but hopefully you get the point
        if not line:
            break 
```

程序必须接受来自文件和外壳的命令。谢谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T06:36:50.097

假设所有命令的格式为`<command> <pixels>`：

```
# Create a dictionary of possible commands, with the values being pointers
# to the actual function - so that we can call the commands like so:
# commands[command](argument)
commands = {
    'forward': turtle.forward,
    'backwards': turtle.backward,
    'left': turtle.left,
    'right': turtle.right
    # etc., etc.
}

# Use the `with` statement for some snazzy, automatic
# file setting-up and tearing-down
with open('instructions_file', 'r') as instructions:
    for instruction in instructions:  # for line in intructions_file
        # split the line into command, pixels
        instruction, pixels = instruction.split()

        # If the parsed instruction is in `commands`, then run it.
        if instruction in commands:
            commands[instruction](pixels)
        else:
        # If it's not, then raise an error.
            raise() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:37:35.883

应该很简单——只需更改您的`turtle_commands()`函数以从参数而不是函数获取其输入`input()`，如下所示：

```
def turtle_commands(command):
    instructions = command.split()
    i = instructions[0]
    if len(instructions) == 2:
        if i == 'forward' :
            n = int(instructions[1])
            turtle.forward(n) 
```

然后，使用您从文件中读取的输入命令调用您的函数，就像您在建议的代码中使用`turtle_commands(line)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T06:34:40.177

使用`map()`under`itertools`就足够了。`l.readlines()`将文件中的所有行作为列表返回，`map`内置函数将遍历列表中的所有元素并将它们作为参数提供给函数 turtle_commands

```
map(turtle_commands, [ int(_) for _ in l.readlines() ] ) 
```

`map()`将为函数提供参数列表。

```
map(function, params_list)

>>> map(lambda x: x + 1, [1, 2, 3, 4, 5, 6])
[2, 3, 4, 5, 6, 7] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T07:26:46.997

有一个非常简单的解决方案 - 使用*getattr*函数。如果您有一系列空格/行尾命令：

```
instructions = data.split()
commands = instructions[::2]
params   = instructions[1::2]
for command, param in zip(commands,params):
    try:
        getattr(turtle, command)(int(param))
    except AttributeError:
        print('Bad command name:{}'.format(command)) 
```

# iphone - Interface Builder 中 UIButton 的“播放声音”属性

> ID：13758059
> 
> 赞同：3
> 
> 时间：2012-12-07T06:28:36.290
> 
> 标签：iphone, objective-c, ios, interface-builder

在界面生成器中，可访问性下的 UIButton 属性显示“播放声音”。

任何人都可以解释这是什么。实际上，我正在制作一个应用程序，它会在每次单击按钮时播放声音，并且我可以从设置屏幕禁用声音。UIButton 的这个属性可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T06:51:50.310

您可以使用`[[UIDevice currentDevice] playInputClick];`播放键盘输入点击声音`UIDevice`。查看此[苹果文档以获取更多详细信息。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html#//apple_ref/occ/instm/UIDevice/playInputClick)

为此，您需要执行以下操作，

1.  `UIInputViewAudioFeedback`在您的输入视图类中采用协议。
2.  实现`enableInputClicksWhenVisible`委托方法以返回 YES。

在`UIView`课堂上这样做，

```
@interface MyView : UIView <UIInputViewAudioFeedback> 
```

然后实现`enableInputClicksWhenVisible`方法

```
- (BOOL)enableInputClicksWhenVisible
{
    return YES;
} 
```

如果您遇到此问题，可以[检查此。](https://stackoverflow.com/a/7456930/1730272)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-13T09:49:40.967

您是否可以使用 Plays Sound“属性”（它可能实际上不是属性）来使按钮播放声音的原始问题的答案是：不。Plays Sound 是描述对象的可访问性的“特征”（在这种情况下是一个按钮）用于使用 VoiceOver 的人（即最有可能是盲人）。[您可以在此处](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/iPhoneAccessibility/Making_Application_Accessible/Making_Application_Accessible.html)阅读文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T06:33:29.650

嘿，您想在按钮单击事件上播放声音，然后也使用下面的代码..

```
-(IBAction)playSound:(id)sender
{
    NSString *path = [[NSBundle mainBundle] pathForResource:@"adriantnt_release_click" ofType:@"mp3"]; /// set .mp3 name which you have in project
    AVAudioPlayer* theAudio=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
    theAudio.delegate=self;
    [theAudio play];
} 
```

并像下面这样使用..

```
-(IBAction)yourButton_Clicked:(id)sender
{
    [self performSelector:@selector(playSound:) withObject:sender]; 
    //your code  write here
} 
```

**注意：**添加`AudioToolbox.framework`框架并在文件中导入 并`#import<AVFoundation/AVAudioPlayer.h>`在文件中`.h`添加委托`AVAudioPlayerDelegate``.h`

我希望这可以帮助你...

# log4j - Log4J：堆栈跟踪打印期间的 AsyncAppender 和 NullPointerException

> ID：13758062
> 
> 赞同：1
> 
> 时间：2012-12-07T06:28:50.623
> 
> 标签：log4j, nullpointerexception, appender

更新：这不仅适用于 AsyncAppender。也发生在控制台一上。

我遇到了 AsyncAppender 的奇怪行为，这种行为很少发生但危害很大。

这是代码片段：

```
public void testNPE() {
    try {
        try {
            throw new NullPointerException();
        } catch (NullPointerException e) {
            throw new RuntimeException(e);
        }
    } catch (RuntimeException e) {
        logger.error("Catcha!" + e.getLocalizedMessage(), e);
    }
} 
```

可能的结果应该是：

```
07.12.12 10:21:34,904 ERROR [main] >> [com.ubs.eqdel.markitfeed.core.RetrieverTest:74]          Catcha! java.lang.NullPointerException
java.lang.RuntimeException: java.lang.NullPointerException
    at com.ubs.eqdel.markitfeed.core.RetrieverTest.testNPE(RetrieverTest.java:71)
...
Caused by: java.lang.NullPointerException
    at com.ubs.eqdel.markitfeed.core.RetrieverTest.testNPE(RetrieverTest.java:69)
    ... 25 more 
```

但是对于 20 次尝试中的 5 次，我看到：

```
Exception in thread "Dispatcher-Thread-0" java.lang.NullPointerException
    at java.io.Writer.write(Writer.java:140)
    at org.apache.log4j.helpers.CountingQuietWriter.write(CountingQuietWriter.java:45)
    at org.apache.log4j.WriterAppender.subAppend(WriterAppender.java:309)
    at org.apache.log4j.RollingFileAppender.subAppend(RollingFileAppender.java:263)
    at org.apache.log4j.WriterAppender.append(WriterAppender.java:160)
    at org.apache.log4j.AppenderSkeleton.doAppend(AppenderSkeleton.java:251)
    at org.apache.log4j.helpers.AppenderAttachableImpl.appendLoopOnAppenders(AppenderAttachableImpl.java:66)
    at org.apache.log4j.AsyncAppender$Dispatcher.run(AsyncAppender.java:583)
    at java.lang.T07.12.12 10:23:54,972 ERROR [main] >> [com.ubs.eqdel.markitfeed.core.RetrieverTest:74]  Catcha! java.lang.NullPointerException
java.lang.RuntimeException: java.lang.NullPointerException
at com.ubs.eqdel.markitfeed.core.RetrieverTest.testNPE(RetrieverTest.java:71)
...
Caused by: java.lang.NullPointerException
    at com.ubs.eqdel.markitfeed.core.RetrieverTest.testNPE(RetrieverTest.java:69)
    ... 25 more 
```

AsyncAppender 有什么问题？有没有人面临同样的情况？解决方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T15:32:57.730

看起来像[这个错误](https://issues.apache.org/bugzilla/show_bug.cgi?id=44032)。

编辑：根据[发行说明](http://logging.apache.org/log4j/1.2/changes-report.html#a1.2.16)，1.2.16（2010-04-06 发布）应该包含[对此的修复](http://svn.apache.org/viewvc?view=revision&revision=612863)。

# tridion - 新的 UI SiteEdit 实施

> ID：13758063
> 
> 赞同：0
> 
> 时间：2012-12-07T06:28:51.523
> 
> 标签：tridion, tridion-2011, experience-manager

我在 Tridion 2011 SP1 中实现了 New UI SiteEdit。当我创建了一个没有组件的页面时，我可以编辑该页面。如果我要插入组件，我将无法编辑页面。请帮忙解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:21:58.337

在新 UI（Experience Manager 或 XPM）中更改页面时，页面将被签出。您可能会看到其他用户的预期行为——其他用户不应该能够在 CME 或 XPM 中编辑页面。

此外，即使是具有*不同会话*的同一用户（例如从另一个浏览器查看页面），您也应该被限制编辑内容页面。

使用相同的用户和会话编辑页面时，您应该能够添加多个组件。该页面已签出。编辑页面上的内容应该是“编辑组件”，而不是页面本身。

如果您看到其他内容，请告诉我们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T04:57:32.873

这可能是由于您的内联编辑命令中存在语法错误（即 HTML 注释中的 JSON 语法）。通常，您将使用为您生成此语法的 OOTB 构建块，但是，在某些极端情况下，此语法是手动编写的。我怀疑你可能有后一种情况。验证您的组件和组件字段命令语法。

# android - SQLite 无法验证插入

> ID：13758067
> 
> 赞同：0
> 
> 时间：2012-12-07T06:29:10.880
> 
> 标签：android, sqlite

任何人都可以看到为什么这不起作用。我正在尝试向表中添加一个简单的行，然后确认它已正确添加。当我尝试查询表时，我的程序崩溃了。看了这么久，我的头很痛。

```
addNewGame(1);

Cursor cursor2 = db.query(myDBOpenHelper.GAMES_TABLE, new String [] {"MAX("+GAME_COLUMN+") AS GC"}, null, null, null, null, null);
System.err.println("made it this far");     
String temp = cursor2.getString(cursor.getColumnIndex("GC")); //crash!!!
System.err.println("didn't get here);

private static void addNewGame(int g) {
        ContentValues newValues = new ContentValues();
    SQLiteDatabase db = DBOpenHelper.getWritableDatabase(); 
    newValues.put(GAME_COLUMN, g);
    newValues.put(CIV_COLUMN, "");
    db.insert(myDBOpenHelper.GAMES_TABLE, null, newValues);
} 
```

> 线程以未捕获的异常退出

此外，这是创建表的代码：

```
private static final String GAMES_CREATE =  "create table " +
            GAMES_TABLE + " (" + KEY_ID +
            " integer primary key autoincrement, " +
            GAME_COLUMN + " text not null, " +
            CIV_COLUMN + " text);";
db.execSQL(GAMES_CREATE); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:34:16.297

Just Nothing 检查 this.that 光标是否为空？试试这个代码。

```
if(cursor2.getcount>0)
{
cursor2.moveTofirst();
String temp = cursor2.getString(cursor.getColumnIndex("GC"));
} 
```

试试这个它的工作。

# meteor - Meteor 的“Template.myTemplate.rendered”回调中的“this”是什么？

> ID：13758075
> 
> 赞同：0
> 
> 时间：2012-12-07T06:29:26.583
> 
> 标签：meteor

根据 docs.meteor，在“Template.myTemplate.rendered”回调的主体中，“this”是一个模板实例对象。

但是，当我在回调中插入“调试器”行并使用浏览器开发工具检查时，“this”的值是“window”。难道我做错了什么？

我正在使用排行榜示例 - 这是车把模板：

* * *

```
<template name="leaderboard">

    {{#each players}}
      {{> player}}
    {{/each}}

  {{#if selected_name}}
  <div class="details">
    <div class="name">{{selected_name}}</div>
    <input type="button" class="inc" value="Give 5 points" />
    <input type="button" class="fastclick inc" value="Give 5 points - fast" />
  </div>
  {{/if}}

  {{#unless selected_name}}
  <div class="none">Click a player to select</div>
  {{/unless}}
</template>

<template name="player">
  <div class="player {{selected}} fastclick">
    <span class="name">{{name}}</span>
    <span class="score">{{score}}</span>
  </div>
</template> 
```

以及“Template.leaderboard.rendered”回调：

* * *

```
 Template.leaderboard.rendered = function (){
    Meteor.defer(function() {
debugger;
      new FastClick(document.body);
      console.log("Template.leaderboard.rendered: " + JSON.stringify(this));
    });
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:37:04.203

我认为你的问题是`this`在`Meteor.defer`回调内部，这意味着上下文`this`已经改变。尝试缓存`this`在一个变量中，然后将该变量输出到`console.log()`. 例如：

```
Template.leaderboard.rendered = function (){
 var self = this; 
   Meteor.defer(function() {
    debugger;
    new FastClick(document.body);
    console.log("Template.leaderboard.rendered: " + self );
  });
 }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T20:39:26.943

> 在回调的主体中，这是一个模板实例对象，对于该模板的出现来说是唯一的，并且在重新渲染中保持不变。使用创建和销毁的回调对对象执行初始化或清理。

来源：[http ://docs.meteor.com/#template_rendered](http://docs.meteor.com/#template_rendered)

因此`this`引用您正在呈现的模板的特定实例。

# keyboard - 清除 Ada 中的键盘缓冲区

> ID：13758078
> 
> 赞同：1
> 
> 时间：2012-12-07T06:29:59.083
> 
> 标签：keyboard, buffer, ada

我写了一个函数来清除键盘缓冲区，因为我认为我在获取后有剩余的输入，但它只是永远接受输入。

这是 get(String(1..10)

```
--getString10--
procedure getString10(s : in out string10) is
   Last: Integer;
begin
   s := (others => ' ');
   Get_Line(S, Last);
end getString10; 
```

这是我所做的刷新，几乎是从关于清除键盘缓冲区的 wiki 复制的

```
--flush--
procedure flush is
   char : character;
   more : boolean;
begin
   loop
      get_immediate(char, more);
      exit when not more;
   end loop;
end flush; 
```

每当调用刷新时，我输入的任何内容都会在屏幕上输出，直到我退出程序。

此外，我的 getString10 函数并不总是等待用户输入。例如，如果我有

```
put("Enter a name: ");
getString10(name);
put("Enter a number: ");
getString10(number); 
```

输出将是

```
Enter a name: Enter a number: exampleinput 
```

我在 Gnat Programming Studio 上使用 Ada 2005。

更新了整个主要内容：

```
with Ada.Text_IO, Ada.Integer_Text_IO, BinarySearchTree;
use Ada.Text_IO, Ada.Integer_Text_IO;

procedure lab4 is

   subtype String10 is String(1..10);

   -- function "<"--
   function "<"(TheKey: in String10; ARecord: in String10) return Boolean is
   begin
      for i in integer range 1..10 loop
         if TheKey(i) <= ARecord(i) then
            return true;
         else
            return false;
         end if;
              end loop;

      return false;

   end "<";

   -- function ">"--
   function ">"(TheKey: in String10; ARecord: in String10) return Boolean is
   begin
      for i in integer range 1..10 loop
         if TheKey(i) >= ARecord(i) then
            return true;
         else
            return false;
         end if;
      end loop;

      return false;
   end ">";

   -- function "="--
   function "="(TheKey: in String10; ARecord: in String10) return Boolean is
   begin
      for i in integer range 1..10 loop
         if TheKey(i) /= ARecord(i) then
            return false;
             end if;
      end loop;

      return true;
   end "=";

   --getString10--
   procedure getString10(s : in out string10) is
      Last: Integer;
   begin
          s := (others => ' ');
      Get_Line(S, Last);
   end getString10;

   --flush--
   procedure flush is
      char : character;
      more : boolean;
   begin
      loop
         get_immediate(char, more);
         exit when not more;
      end loop;
   end flush;      

   package BST is new BinarySearchTree(String10, String10, "<", ">", "=");

   Root, found : BST.BinarySearchTreePoint;
   choice : integer;
   nameTemp, phoneTemp : String10;
begin
   BST.setRoot(Root);

   loop
      new_line;
      put_line("Options:");
      put_line("1 - Insert a record");
      put_line("2 - Find a person iteratively and print their phone number");
      put_line("3 - Find a person recursively and print their phone number");
      put_line("4 - Traverse the tree from a person to a person");
      put_line("0 - Quit program");
      put("Choose an option: ");
      get(choice); put(choice, 0); new_line;

      case choice is
         --case 1
         when 1 =>
            put("Enter the name: ");
            get(nameTemp); put(nameTemp); new_line;

            put("Enter the phone number : ");
            get(phoneTemp); put(phoneTemp); new_line;

            BST.InsertBinarySearchTree(root, nameTemp, phoneTemp);
         --case 2
         when 2 =>
            put("Enter the name of the person to find: ");
            get(nameTemp); put(nameTemp);
            BST.FindCustomerIterative(root, nameTemp, found);

            if BST.isNull(found) then
               new_line;
               put("Customer not found!");
            else
               new_line;
               put("The phone number is: ");
               put(BST.CustomerPhone(found));
            end if;
         --case 3
         when 3 =>
            put("Enter the name of the person to find: ");
            get(nameTemp); put(nameTemp);
            BST.FindCustomerRecursive(root, nameTemp, found);

            if BST.isNull(found) then
               new_line;
               put_line("Customer not found!");
            else
               new_line;
               put("The phone number is: ");
               put(BST.CustomerPhone(found));
            end if;
            new_line;

         --case 4
         when 4 =>
            put("Enter of the name of the person to start traversal at: ");
            get(nameTemp); put(nameTemp);
            BST.FindCustomerRecursive(root, nameTemp, found);

            put("Enter then name of the person to stop traversal at: ");
            get(phoneTemp); put(phoneTemp); --using phoneTemp for a name here

            BST.FindCustomerRecursive(Root, nameTemp, found);
            while BST.isNull(found) /= true loop
               put_line("Name = " & BST.CustomerName(found));
               BST.setNode(found, BST.InOrderSuccessor(found));
            end loop;

         --case 0
         when 0 =>
            exit;
         --others
         when others =>
            put_line("Invalid choice!"); new_line;
      end case;

   end loop;

end lab4; 
```

我用 get() 切换了所有的 getString10()，因为我正在尝试调试线程二叉搜索树。我正在使用一个输入文件，所以现在很好，我可以弄清楚为什么其他方法不起作用。nameTemp 和 phoneTemp 上的所有 get 调用都应该是 getString10() 调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:43:50.383

您可以使用 get_line() 函数，它会自动清除键盘缓冲区。

```
with ADA.TEXT_IO;                use ADA.TEXT_IO;
with ADA.TEXT_IO.UNBOUNDED_IO;   use ADA.TEXT_IO.UNBOUNDED_IO;
with ADA.STRINGS.UNBOUNDED;      use ADA.STRINGS.UNBOUNDED;

procedure MAIN is

   type STRING_10 is new STRING(1..10);

   procedure GET_STRING_10(S : in out STRING_10) is
      BUF   :  UNBOUNDED_STRING;
   begin
      BUF := GET_LINE;

      for I in STRING_10'range loop
         if I <= LENGTH(BUF) then
            S(I) := ELEMENT(BUF, I);
         else
            S(I) := ' ';
         end if;
      end loop;
   end GET_STRING_10;

   S : STRING_10;

begin

   GET_STRING_10(S);
   PUT_LINE(STRING(S));

end MAIN; 
```

阅读整个主要内容后进行编辑：您应该插入一个`SKIP_LINE;`after `GET(CHOICE);`。然后，您可以在不同的情况下将 every 替换`GET`为 a `GETSTRING10`。

通常，get 必须始终跟在 skip_line 之后。无需使用 get_line 执行此操作，因此您不必修改 getstring10 过程。

# backbone.js - Backbone.js 干搜索结果模型和集合

> ID：13758079
> 
> 赞同：0
> 
> 时间：2012-12-07T06:30:02.633
> 
> 标签：backbone.js, backbone.js-collections

我正在尝试为骨干创建一个干燥的搜索结果模型和集合，以便无论我在应用程序中搜索什么，我们都使用相同的模型/集合，并且偶尔可能会调用不同的视图。

我的模型和控制器非常简单

```
Myapp.Models.Search = Backbone.Model.extend();

Myapp.Collections.Search = Backbone.Collection.extend({
   模型：Myapp.Models.Search
});

```

然后我填充 url 值以在视图中获取正确的请求和参数

```
Myapp.Views.SearchResults = Backbone.View.extend({
 el: 'div#results',

 初始化：函数（）{
     Myapp.results = new Backbone.Collection.Search;
     Myapp.results.url = this.model.search_type+'/'+this.model.data; //这包含搜索查询
     Myapp.results.fetch({
               成功：函数（）{警报（'得到结果'）}，
               错误：function(){alert('这不好！');}
       });
   }

```

没有“fetch”，一切都很好，但是当我包含 fetch 时，会进行 fetch，返回结果，但我得到了错误

```
未捕获的类型错误：未定义不是主干.js 中的函数：23

```

我检查了响应，它是有效的 JSON。当我将 Myapp.results 输出到控制台时，我看到了集合，但它仍然是空的。错误和成功都不会被触发。

----------------update------------------------------------ 根据评论，我已经划分了上到第23行，发现这一行正在返回错误

```
a=new this.model(a,b),
```

如果我理解这条线的作用，这个问题可能是因为响应集合只返回了一个模型吗？我希望这不会导致问题，您应该能够拥有一个包含 1 个或更少模型的集合。

- - - - - - - 更新 - - - - - - - - - - - - -

所以我删除了对`model`集合中的引用，现在我没有得到错误。所以在某些方面，这已经解决了，但不应该这样。到目前为止我一直定义与集合关联的模型是否有原因？

# android - 添加从输入流中检索到的数据时遇到问题

> ID：13758080
> 
> 赞同：0
> 
> 时间：2012-12-07T06:30:15.213
> 
> 标签：android, android-listview

我面临一个代码问题，我必须从restservices检索数据并将其显示在listview中......

```
private class surveyCheck extends AsyncTask<String, Integer,List<SurveyMetaData>> {

protected List<SurveyMetaData> doInBackground(String... params)  {

        if (mdebug_flag) {
            Log.i(TAG_DEBUG, "SurveyCheck:doInBackground");
        }
        String url = params[0];
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpGet request = new HttpGet(url);

        try {

            request.setHeader("Accept", "application/json");
            request.setHeader("Content-type", "application/json");
            HttpResponse response = httpClient.execute(request);
            final int statusCode =    response.getStatusLine().getStatusCode();

            if (statusCode != HttpStatus.SC_OK) {
                Log.w(getClass().getSimpleName(), "Error " + statusCode
                        + " for URL " + url);
                return null;
            }
            HttpEntity responseEntity = response.getEntity();

            InputStream stream = responseEntity.getContent();
        InputStreamReader reader = new InputStreamReader(stream);

          Gson gson=new Gson();

          Type collectionType=new TypeToken<List<SurveyMetaData>>(){}.getType();
          List<SurveyMetaData> result =gson.fromJson(reader,collectionType);
          for( SurveyMetaData element : result)
          {
              Log.d("TAG","I 'm doing stuff with: " + element);

          }
          Survey_DB dataobj = new Survey_DB(getApplicationContext());       
            for (int i = 0; i <result.size() ; i++) {
                if (dataobj.AddSurvey(result.get(i)) != -1)
                    ToastUtils.displayToast(Available_Surveys.this,
                            "Survey Inserted successfully",
                            (ViewGroup) findViewById(R.id.llRoot));
            }

            Survey_Adapter adapter = new Survey_Adapter(
                    getApplicationContext(), R.layout.list_item_menu,
                    result);
            listView1 = (ListView) findViewById(R.id.listview_surveys);
            listView1.setAdapter(adapter);
            // Populate text field                       return result;

        } catch (IOException e) {
            request.abort();
            Log.w(getClass().getSimpleName(), "Error for URL " + url, e);
            return null;
        }

    } 
```

代码正在接收流，并且阅读器在将其添加到 AddSurvey(result.get(i)) 时能够读取相同的内容...它将空值传递给参数以进行插入..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:37:47.610

您正在`UI tasks`从背景线程执行。

喜欢

```
ToastUtils.displayToast(Available_Surveys.this,
                        "Survey Inserted successfully",
                        (ViewGroup) findViewById(R.id.llRoot)); 
```

和

```
Survey_Adapter adapter = new Survey_Adapter(
                getApplicationContext(), R.layout.list_item_menu,
                result);
        listView1 = (ListView) findViewById(R.id.listview_surveys);
        listView1.setAdapter(adapter); 
```

`onPostExecute`在您的中执行与 UI 相关的任务`AsyncTask`

# jquery - Jquery Boxy，一次显示一个对话框

> ID：13758082
> 
> 赞同：0
> 
> 时间：2012-12-07T06:30:46.933
> 
> 标签：jquery, boxy

我正在使用[Boxy](http://onehackoranother.com/projects/jquery/boxy/)。我正在寻找一次打开一个对话框的内置功能。当我单击按钮时，将出现 Boxy 对话框。当我再次单击该按钮时，又出现了一个相同的对话框。由于某些原因，我想保留 modal : false 。我不想从每个对话框的元素中解除点击事件的绑定。它很丑。

HTML

```
<a onClick='cube.edit()'>Edit</a> 
```

jQuery

```
cube :
{
   edit : function()
   {
          // Open Boxy Dialog 
          edit_box = new Boxy("something",{ title : 'edit', modal : false });

   }

} 
```

# gwt - 如何在 GWT 中覆盖 EntityLocator 的 isLive

> ID：13758086
> 
> 赞同：0
> 
> 时间：2012-12-07T06:31:14.947
> 
> 标签：gwt, requestfactory

我是 GWT 的新手，我在我们的项目中集成了 GWT 和 spring 框架。模块页面包括两个部分，LeftSide（树视图）和 RightPanel（网格视图）。我从数据库（部门，员工）构建树视图节点。Gridview 用于在从树视图中选择节点时显示结果。问题是当我打开 url( `http://127.0.0.1:8888/ams.html?gwt.codesvr=127.0.0.1:9997`) 时，有时树视图什么也不显示，并且控制台上打印了以下异常。但正确的gridview是可以的。如果我覆盖 EntityLocator 的 isLive（只返回 true）方法，那么它总是可以的

```
javax.persistence.PersistenceException: org.hibernate.exception.JDBCConnectionException: could not load an entity: [com.sparj.ams.server.domain.staff.Department#50001]
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1214)
    at org.hibernate.ejb.AbstractEntityManagerImpl.find(AbstractEntityManagerImpl.java:635)
    at org.hibernate.ejb.AbstractEntityManagerImpl.find(AbstractEntityManagerImpl.java:589)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:365)
    at $Proxy31.find(Unknown Source)
    at com.sparj.ams.server.locator.EntityLocator.find(EntityLocator.java:47)
    at com.sparj.ams.server.locator.EntityLocator.find(EntityLocator.java:1)
    at com.google.web.bindery.requestfactory.shared.Locator.isLive(Locator.java:96)
    at com.google.web.bindery.requestfactory.server.LocatorServiceLayer.doIsLive(LocatorServiceLayer.java:188)
    at com.google.web.bindery.requestfactory.server.LocatorServiceLayer.isLive(LocatorServiceLayer.java:85)
    at com.google.web.bindery.requestfactory.server.ServiceLayerDecorator.isLive(ServiceLayerDecorator.java:116)
    at com.google.web.bindery.requestfactory.server.ServiceLayerDecorator.isLive(ServiceLayerDecorator.java:116)
    at com.google.web.bindery.requestfactory.server.SimpleRequestProcessor.createReturnOperations(SimpleRequestProcessor.java:282)
    at com.google.web.bindery.requestfactory.server.SimpleRequestProcessor.process(SimpleRequestProcessor.java:240)
    at com.google.web.bindery.requestfactory.server.SimpleRequestProcessor.process(SimpleRequestProcessor.java:135)
    at com.google.web.bindery.requestfactory.server.RequestFactoryServlet.doPost(RequestFactoryServlet.java:133)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1097)
    at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:147)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1088)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:360)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler.java:49)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:324)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:843)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:647)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:205)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488)
Caused by: org.hibernate.exception.JDBCConnectionException: could not load an entity: [com.sparj.ams.server.domain.staff.Department#50001]
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:99)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.loader.Loader.loadEntity(Loader.java:2041)
    at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:86)
    at org.hibernate.loader.entity.AbstractEntityLoader.load(AbstractEntityLoader.java:76)
    at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:3268)
    at org.hibernate.event.def.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:496)
    at org.hibernate.event.def.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:477)
    at org.hibernate.event.def.DefaultLoadEventListener.load(DefaultLoadEventListener.java:227)
    at org.hibernate.event.def.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:285)
    at org.hibernate.event.def.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:152)
    at org.hibernate.impl.SessionImpl.fireLoad(SessionImpl.java:1090)
    at org.hibernate.impl.SessionImpl.get(SessionImpl.java:1005)
    at org.hibernate.impl.SessionImpl.get(SessionImpl.java:998)
    at org.hibernate.ejb.AbstractEntityManagerImpl.find(AbstractEntityManagerImpl.java:614)
    ... 41 more
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: No operations allowed after statement closed.
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1014)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:988)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:974)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:919)
    at com.mysql.jdbc.StatementImpl.checkClosed(StatementImpl.java:463)
    at com.mysql.jdbc.PreparedStatement.setInternal(PreparedStatement.java:3783)
    at com.mysql.jdbc.PreparedStatement.setInternal(PreparedStatement.java:3832)
    at com.mysql.jdbc.PreparedStatement.setLong(PreparedStatement.java:3849)
    at com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.setLong(NewProxyPreparedStatement.java:703)
    at org.hibernate.type.descriptor.sql.BigIntTypeDescriptor$1.doBind(BigIntTypeDescriptor.java:52)
    at org.hibernate.type.descriptor.sql.BasicBinder.bind(BasicBinder.java:89)
    at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:282)
    at org.hibernate.type.AbstractStandardBasicType.nullSafeSet(AbstractStandardBasicType.java:277)
    at org.hibernate.loader.Loader.bindPositionalParameters(Loader.java:1873)
    at org.hibernate.loader.Loader.bindParameterValues(Loader.java:1844)
    at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1716)
    at org.hibernate.loader.Loader.doQuery(Loader.java:801)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)
    at org.hibernate.loader.Loader.loadEntity(Loader.java:2037)
    ... 53 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T06:50:44.523

问题不是`isLive`，而是你如何管理 Hibernate 会话的生命周期：会话在`isLive`被调用之前以某种方式关闭。

使用 RequestFactory，您**必须**使用 session-per-http-request（又名 OpenSessionInView）模式。

# extjs - 刷新厨房水槽煎茶的左侧菜单

> ID：13758088
> 
> 赞同：0
> 
> 时间：2012-12-07T06:31:27.573
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我想刷新厨房水槽（http://pydictionary.appspot.com/）sencha 的左侧菜单，其数据源是 json。我已更改 .json 文件中的数据，但菜单未在菜单中加载新数据。数据来自 leftmenu.json

```
Ext.regModel('Demo', {
fields: [
    {name: 'text',        type: 'string'},
    {name: 'source',      type: 'string'},
    {name: 'leaf',      type: 'boolean'}
      ]});

sink.StructureStore = new Ext.data.TreeStore({
model: 'Demo',
autoLoad: true,
proxy: {
    type: 'ajax',
    url: 'leftmenu.json',
    reader: {
        type: 'tree',
        root: 'items'
    }
}}); 
```

我正在尝试通过以下方式重新加载它...但无法正常工作

```
 sink.StructureStore.setProxy(sink.StructureStore.getProxy()); 
            sink.StructureStore.getRootNode().removeAll(); 
            sink.StructureStore.load(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:18:08.933

如果您的代码正确，则在 load() 列表数据之后应该会自动更改。而且我们不需要每次都更改 url。只有负载才能工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:22:35.603

我只需要添加一条我错过的神奇线条

```
 Ext.getCmp("nestedList").onBackTap(); 
```

当用户单击一级菜单的“目录选项”时加载此菜单。现在它的工作

# android - 在phonegap中打开android键盘时隐藏的文本字段

> ID：13758089
> 
> 赞同：4
> 
> 时间：2012-12-07T06:31:29.227
> 
> 标签：android, cordova

我在 android phonegap 应用程序中面临一个大问题。我在一个页面中有 5 个或 6 个文本字段和 2 个下拉字段，如果我输入要输入的第一个文本字段正在向上滚动，而且我看不到我想在这个字段中输入，在我的 android 键盘中我点击下一个按钮和聚焦文本字段对我来说是不可见的，一些文本字段只可见。我正在使用科尔多瓦 1.8.0 和 jquery mobile1.1.1。在我的 android 清单文件中，我使用以下行，

android:windowSoftInputMode="stateHidden|adjustResize|adjustPan"

但它不能正常工作，

任何人都可以知道原因，任何人都面临这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T05:38:45.553

我也面临同样的问题。在 Android 清单文件中添加**android:windowSoftInputMode="adjustResize"** 只需删除 adjustpan 它将工作并在该页面中使用滚动然后点击相应的输入字段虚拟键盘弹出窗口并向上推动输入字段，您可以看到您要输入的内容您的输入字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T08:59:27.003

尝试将项目的 Android API 目标杠杆设置为 13 或更高，而不是从 Android Manifest 文件。

为了设置您的目标：右键单击项目 -> 属性 -> Android，然后选择“API 级别”13 或更高的 Android。

如果您计划在您的应用程序中使用推送通知，请确保选择“API 级别”13 或更高级别的“Google API”

# javascript - 在 HTML5 中，我在哪里可以找到由 getDirectory() 方法创建的硬盘驱动器上的目录？

> ID：13758090
> 
> 赞同：2
> 
> 时间：2012-12-07T06:31:32.000
> 
> 标签：javascript, html, fileapi

我正在创建、删除、读取目录，但我不知道在硬盘驱动器上的何处查看它们

```
fs.root.getDirectory('something', {create: true}, function(dirEntry) {
  alert('You have just created the ' + dirEntry.name + ' directory.');
}, errorHandler); 
```

有谁知道在哪里可以看到硬盘上的“东西”文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T06:34:06.867

你不能。JavaScript 文件系统 API 是沙盒的，原因很明显。您可以访问的只是一个隔离存储单元，您无法突破它。

# ruby-on-rails - Rails 无法访问 .js.erb 文件中的实例变量

> ID：13758093
> 
> 赞同：3
> 
> 时间：2012-12-07T06:31:50.387
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在发出 ajax 请求，完成后我正在尝试向页面添加 div。出于某种原因，我无法让实例变量在 .js.erb 文件中工作。

我有这个被调用的控制器方法

```
 # PUT /applications/1
  # PUT /applications/1.json
  def update
    @application = Application.find(params[:id])
    @current_app = params[:application]
    @curr_app_id = params[:id]
    @current_app.values.each do |key, val|
        key.values.each do |k,v|
            @curr_app_field_name = k[:field_name]
            @curr_app_field_value = k[:field_type]
        end
    end

    respond_to do |format|
      if @application.update_attributes(params[:application])
        format.html { redirect_to @application, notice: 'Application was successfully updated.' }
        format.json { head :no_content }
        format.js
      else
        format.html { render action: "edit" }
        format.json { render json: @application.errors, status: :unprocessable_entity }
        format.js
      end
    end
  end 
```

呈现这个 .js.erb 文件

```
console.log('name = '+<%= escape_javascript @curr_app_field_name %>); // line 1
console.log('test'); // line 2 
```

但是当我将实例变量留在那里时，我在萤火虫中没有得到任何输出。我可以在发布请求中看到使用正确的字段名称生成了 console.logs，但在 firebug 控制台中没有出现任何内容。

如果我完全删除第 1 行，它可以工作。

我怎样才能做到这一点，以便我可以访问 .js.erb 文件中的一些变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T06:38:05.163

您错误地混合了 Javascript 和 Ruby。

代替：

```
console.log('name = '+<%= escape_javascript @curr_app_field_name %>); 
```

你必须这样做：

```
console.log('name = <%= escape_javascript @curr_app_field_name %>'); 
```

**解释：**

假设`@curr_app_field_name == 'foo'`您当前的代码将评估为：

```
console.log('name = '+foo); 
```

但变量 foo 不存在，因此会引发错误。如果您像我建议的那样这样做，它将评估为：

```
console.log('name = foo'); 
```

一切都会按预期进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:41:47.757

我认为你必须添加这样的引号：

```
console.log('name = '+ "<%= escape_javascript @curr_app_field_name %>"); 
```

但如果只是你在firebug中可能有错误。

# javascript - 数组内对象的属性更改时如何将更改事件与视图绑定？

> ID：13758094
> 
> 赞同：2
> 
> 时间：2012-12-07T06:31:52.970
> 
> 标签：javascript, jquery, backbone.js

以下是我的一些咖啡脚本代码

```
class Floor extends Backbone.Model
    defaults:
        "array":[]

    initialize: ->
        a = []
        for i in [0..10] by 1
            tmp = {
                x: i*10,
                y: i*10
            }
            a.push(tmp)
        this.set('array', a)

class FloorView extends Backbone.View
    initialize: ->
        this.model.on('change:array', this.renderArray, this) 

    renderArray: ->
        console.log 'Do something'
        return this

floor1 = new Floor
floorView = new floorView({ model:floor1}) 
```

以下三行没有触发调用renderArray方法的change事件

```
array = floor1.get('array')
array[0].x = 1000;
floor1.set('array',array) 
```

但是下面的代码实际上调用了 renderArray 方法

```
floor1.set('array',{}); 
```

有什么方法可以检测数组中对象的属性更改吗？

或者我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:13:48.970

你可以这样想：“array”是一个指向数组的变量名。当你这样做时：

```
floor1.set('array', []); 
```

您将“数组”指向一个完全不同的数组。但是，当您这样做时：

```
array = floor1.get('array')
array[0].x = 1000;
floor1.set('array', array) 
```

您正在更新“数组”已经指向的数组。换句话说，您没有更改“array”指向的数组。相反，您正在修改现有数组中的值。

这个问答有更多的背景：[Backbone.js : change not fire on model.change()](https://stackoverflow.com/questions/9909799/backbone-js-change-not-firing-on-model-change)

并指出这项工作：

```
array = floor1.get('array')
array[0].x = 1000;
floor1.set('array', array)
floor1.trigger('change:array') 
```

# json - 使用请求模块时是否有结束事件？

> ID：13758096
> 
> 赞同：1
> 
> 时间：2012-12-07T06:32:27.117
> 
> 标签：json, node.js, request

我正在使用在 npm 上找到的请求模块，我想知道是否有可以绑定的结束事件。我问的原因是因为我正在请求 JSON，如果我在收到响应后尝试直接使用 JSON.parse，则会收到错误消息。代码看起来像这样。

```
var parseJSON = function(JSON, cb){

    var parsed = JSON.parse(JSON);
    cb(parsed);

};

request(url, function(error, response, body) {

    parseJSON(body, function(bodyObj){

        // do stuff with bodyObj...

    });
}); 
```

尝试这样做，会出现以下错误...

```
var parsed = JSON.parse(JSON);
                  ^
has no method 'parse'
    at parseJSON (/home/stephen/Desktop/redditjs/reddit.js:31:20)
    at Requester.collector [as _callback] (/home/stephen/Desktop/redditjs/reddit.js:43:5)
    at Request.init.self.callback (/home/stephen/node_modules/request/main.js:122:22)
    at Request.EventEmitter.emit (events.js:99:17)
    at Request.<anonymous> (/home/stephen/node_modules/request/main.js:661:16)
    at Request.EventEmitter.emit (events.js:126:20)
    at IncomingMessage.Request.start.self.req.self.httpModule.request.buffer (/home/stephen/node_modules/request/main.js:623:14)
    at IncomingMessage.EventEmitter.emit (events.js:126:20)
    at IncomingMessage._emitEnd (http.js:366:10)
    at HTTPParser.parserOnMessageComplete [as onMessageComplete] (http.js:149:23 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:36:15.340

问题是您正在覆盖全局 JSON 对象。

这将工作得很好：

```
var parseJSON = function(MyJSON, cb){

    var parsed = JSON.parse(MyJSON);
    cb(parsed);

}; 
```

# php - PHP mysqli_real_escape_string 问题

> ID：13758108
> 
> 赞同：0
> 
> 时间：2012-12-07T06:33:32.263
> 
> 标签：php, mysqli

我有几个帖子变量，我通过以下方式运行：

```
$input_name =  mysqli_real_escape_string($dbc, trim($_POST['input_name'])); 
```

我已经运行了几个测试，在插入查询执行之前我回显了 $input_name 和其他类似的变量。回声表明他们确实得到了应有的逃脱。

但是，当我登录 phpmyadmin 查看我在数据库中的条目时，我发现应该转义的字符不是。我这里有问题吗？我的变量声明和我不知道的查询之间是否发生了什么？

是否有可能影响这一点的 php 或服务器设置？

注意：我意识到 PDO 是要走的路，我只是在这个特定的时刻不在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:37:40.857

PHP 中的 *_real_escape_string 函数只是为了防止 SQL 注入，因此它只会将 " 更改为 \" 和 ' 更改为 \' 以便以下查询：

```
SELECT * FROM users WHERE pass = '' OR '1'='1 -- 
```

会变成：

```
SELECT * FROM users WHERE pass = '\' OR \'1\'=\'1 -- 
```

这样注入的值就不起作用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:40:36.697

*回声表明他们确实得到了应有的逃脱。*

这表明您的字符已转义。

*当我登录到 phpmyadmin 查看我在数据库中的条目时，我看到应该转义的字符不是*

现在，当您转义时，意味着您想要这些字符，而不是 PHP，或者您的数据库在内部将它们作为分隔符。

就像你想要`'`输入的内容一样，所以你正在逃避它。所以现在当数据库（mysql）看到它被转义时，它不会认为它`single quote`是用于 MySQL 中的字符串文字的。

如果您不对其进行转义，那么 MySQL 会将两者之间的所有部分`'`视为字符串文字。

所以一切都很好，不用担心。

# javascript - 检查页面中的任何 input 或 textarea 元素是否不为空

> ID：13758117
> 
> 赞同：0
> 
> 时间：2012-12-07T06:34:21.750
> 
> 标签：javascript, jquery

我在我的网站中添加了一个机制，该机制应该在用户即将关闭他们正在使用的页面时警告用户。我将一个函数绑定`dropDraftConfirmation`到[`window.onbeforeunload`](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)事件，如下所示：

```
window.onbeforeunload = dropDraftConfirmation;

function dropDraftConfirmation()
{
    if (<there is an input or textarea element not empty on the page>) {
        alert('Your changes will be lost. Are you sure you want to exit the page?');
    }
} 
```

但是每次我关闭页面时都会调用它。所以我的问题是，如何检测页面中是否有*非*空的 input 或 textarea 元素？顺便说一句，我正在使用[jQuery](http://jquery.com/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T06:40:04.417

我认为这应该可以解决问题。

```
window.onbeforeunload = dropDraftConfirmation;

function dropDraftConfirmation()
{
    if ($("input:empty,textarea:empty").length == 0) {
        alert('Your changes will be lost. Are you sure you want to exit the page?');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:38:49.693

像下面这样重写您的函数，以在卸载之前检查任何未保存的更改

```
window.onbeforeunload = checkUnSaved;

function checkUnSaved(){
     if($("#textarea").val() === ""){
         dropDraftConfirmation();
     }else
         return;
}

function dropDraftConfirmation()
{
    if (<there is an input or textarea element not empty on the page>) {
        alert('Your changes will be lost. Are you sure you want to exit the page?');
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T06:47:51.073

您还可以执行以下操作：

```
var errors = 0;

    $("input, textarea").map(function(){
        var val = $.trim( $(this).val() );
        if( val.length < 1 ) {
           errors++;  
        }
    });

    if( errors > 0 ) {
        alert('Your changes will be lost. Are you sure you want to exit the page?');
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T06:50:25.283

您的情况将如下所示：

```
if ($("input[value!='']").length > 0 || $('textarea:not(:empty)').length > 0 ){ 
```

# asp.net - 如何使用 ExpectedException 在 ASP.NET C# 中为 DatabaseConnection 错误创建测试用例？

> ID：13758123
> 
> 赞同：2
> 
> 时间：2012-12-07T06:34:43.347
> 
> 标签：asp.net, expected-exception

我想为数据库连接错误创建一个测试用例。

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:23:24.383

**在您的 web.config 中，添加一个名为 ErrorConnectionString 的新连接字符串。**

```
<connectionStrings>
 <add name="ErrorConnectionString" connectionString="server=192.168.1.1;user id=sa;password=WRONG_PASSWORD;database=MyDatabase"/>
</connectionStrings> 
```

**然后，要测试连接错误，可以使用以下代码（VB.NET）**

```
Dim connectionString = ConfigurationManager.ConnectionStrings("ErrorConnectionString").ConnectionString
Dim connection As New SqlConnection(connectionString)
Dim adapter As New SqlDataAdapter("select * from MyTable", connection)
adapter.Fill(ds)
connection.Close() 
```

假设您故意在连接字符串中使用不正确的登录凭据，您将抛出异常。

如果您无法修改 web.config，您可以简单地将无效的连接字符串硬编码到 connectionString 变量中。

# php - str替换和逻辑

> ID：13758126
> 
> 赞同：2
> 
> 时间：2012-12-07T06:34:56.907
> 
> 标签：php, str-replace

我想`{`用`{{}`和`}`替换`{}}`，因为，我需要用 来逃避那些`{`& 。如果我有输入，我希望我的脚本输出，看到了吗？但它不起作用看看我做了什么`}``{}``{blah}``{{}blah{}}`

```
$output = str_replace(array("}", "{"), array("{}}", "{{}"), '{blah}'); 
```

但作为输出我得到了这个：`{{}blah{{}}}`而不是`{{}blah{}}`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T06:41:45.240

PHP 为您放入 $search 参数中的每个数组项迭代整个字符串。

它实际上是用你的第一个数组 item替换`'{blah}'`into ，然后从那个 into因为在第一次替换之后还有另一个。`'{blah{}}'``'{'``'{{}blah{{}}}'``'{'`

您最好使用正则表达式执行此操作，使用单个 RegExp 模式它只会在您的输入字符串中运行一次。

```
$str = preg_replace('/(\{|\})/', '{\\1}', '{blah}'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T06:41:38.593

那是因为替换本身包含要搜索的字符串。我会改写它`preg_replace_callback`：

```
echo preg_replace_callback('/{|}/', function($match) {
    return $match[0] == '{' ? '{{}' : '{}}';
}, '{bla}');

// {{}bla{}} 
```

# iphone - indexPath.row 的数据类型

> ID：13758128
> 
> 赞同：0
> 
> 时间：2012-12-07T06:35:08.617
> 
> 标签：iphone, objective-c, uitableview, nsindexpath

这是我的代码

```
NSInteger selectedRow = selectedStationPath.row;
            UITableViewCell *cellz = [tabView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:selectedRow inSection:0]];
            UIColor *color = [[UIColor alloc] initWithRed:0.0 green:0.5 blue:1.0 alpha:0.2];
            cellz.contentView.backgroundColor=color;
            NSLog([NSString stringWithFormat:@"%i",selectedRow]); 
```

`selectedStationPath`是一个全球性的`NSIndexPath`......如果我输入一个数字而不是`selectedRow`它的`indexPathForRow`作品。NSLog 打印`selectedRow`正确，但是当我`selectedRow`输入时`indexPathForRow`，即使 NSLog 正在打印`selectedRow`...

# c# - 在foreach中使用switch语句？

> ID：13758141
> 
> 赞同：0
> 
> 时间：2012-12-07T06:36:18.803
> 
> 标签：c#, asp.net

在这种情况下，我正在处理两个网格视图（gvSnacks 和 gvSnackCart）。gvSnacks 包含一个带有模板按钮列的固定项目列表，用于将项目“添加”到 gvSnackCart。

foreach 发挥作用是因为我想确保该项目尚未放入购物车。如果用户两次选择一个项目，我想执行一个 sql 命令并使该项目的 gvSnackCart 数量增加 1（而不是生成新记录）。

如果记录不在 gvSnackCart 中，则 foreach 应该一直循环到其默认值并插入它。

这是要插入的sql命令

```
string sqlInsert = "INSERT INTO ShoppingCart…
    ([shopperID], [itemName], [itemType], [quantityOrdered], [unitPrice])…
    VALUES (@shopperID, @itemName, @itemType, @quantityOrdered, @unitPrice)";

myCommand.Parameters.Add("@shopperID", System.Data.SqlDbType.NVarChar).Value = txtCurrentUser.Text;
myCommand.Parameters.Add("@itemName", System.Data.SqlDbType.NVarChar).Value = snackDescription;
myCommand.Parameters.Add("@itemType", System.Data.SqlDbType.NVarChar).Value = "snack";
myCommand.Parameters.Add("@quantityOrdered", System.Data.SqlDbType.Int).Value = 1;
myCommand.Parameters.Add("@unitPrice", System.Data.SqlDbType.Money).Value = snackPrice;`

SqlCommand myCommand = new SqlCommand(sqlInsert, myConnection);` 
```

现在我从 gvSnacks 中获取所选项目的名称，并与 gvSnackCart 中存在的每个项目进行比较

```
// Retrieve item's name
int index = Convert.ToInt32(e.CommandArgument);

GridViewRow row = gvSnacks.Rows[index];

string snackDescription = row.Cells[2].Text.ToString();

// Checks for duplicate snack listing
int duplicate = 0;

foreach (GridViewRow gvRowSnack in gvSnackCart.Rows)
{
    if (gvRowSnack.Cells[1].Text.ToString() == snackDescription)
    {
        duplicate = 1;
    }

    switch (duplicate)
    {
        case 0:
            break;

        case 1:

           //This is the case where it's a duplicate
           //and will be a command to update the record                       
            break;

        default:
            try
            {
                myConnection.Open();
                myCommand.ExecuteNonQuery();
                myConnection.Close();
            }
            catch (Exception ex)
            {
                lblError.Visible = true;
                lblError.Text = "There was an error while adding the records" + "<br />" + ex.Message;
            }
            break;
    }
} 
```

gvSnackCart 是数据绑定的，应该更新一个新项目，除非它是重复的，它会进行更新。但是由于某种原因，它无法正常工作。我在运行时没有收到错误。我已经用标签测试了读/写，所以我知道我正在从 gvSnacks 检索项目名称。我也在检查数据库表，它没有显示任何正在添加的记录。似乎有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:00:39.110

使用 LINQ 可以省去很多麻烦：

```
foreach (var snacks in gvSnackCart.Rows.GroupBy(snack => snack.Cells[1].Text.ToString()))
{
    var p = myCommand.Parameters;
    // I'm largely guessing at these, but hopefully you get the idea.
    p.Add("@shopperID"      , SqlDbType.NVarChar).Value = txtCurrentUser.Text;
    p.Add("@itemName"       , SqlDbType.NVarChar).Value = snacks.Key;
    p.Add("@itemType"       , SqlDbType.NVarChar).Value = /* ??? */;
    p.Add("@quantityOrdered", SqlDbType.Int     ).Value = snacks.Count();
    p.Add("@unitPrice"      , SqlDbType.Money   ).Value = snacks.Sum(r => r.SnackPrice);
    …
} 
```

# android - 发生某些事件时将电话状态更改为响铃

> ID：13758143
> 
> 赞同：1
> 
> 时间：2012-12-07T06:36:30.693
> 
> 标签：android, broadcastreceiver, telephony

我正在开发一个应用程序，当某些事件发生时，我必须将我的电话状态更改为响铃，例如某个号码正在我的电话上呼叫。那可能吗？我对广播接收器有一些想法，它将事件广播到我的应用程序，然后我的应用程序将在我的手机上发出任何虚拟的假号码呼叫。请给我任何想法。可能吗？以及如何开始？

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:52:19.793

要更改为响铃，请使用 TelephonyManager、AudioManager 和 PhoneStateListener：

```
{
  // USE AudioManager  for Settingringing from vibration
         AudioManager am = (AudioManager)getSystemService(Context.AUDIO_SERVICE);   

         switch (am.getRingerMode()) {   
                 case AudioManager.RINGER_MODE_VIBRATE:   
                 Log.i("MyApp","NORMAL mode");
                 am.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
              break;   
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:48:55.707

尝试这样的事情

```
public class Telephone extends BroadcastReceiver {

    private Context mContext;
    private Intent mIntent;

    @Override
    public void onReceive(Context context, Intent intent) {
        mContext = context;
        mIntent = intent;
        TelephonyManager tm = (TelephonyManager)              
                 context.getSystemService(Context.TELEPHONY_SERVICE);
        int events = PhoneStateListener.LISTEN_CALL_STATE;
        tm.listen(phoneStateListener, events);
    }

    private final PhoneStateListener phoneStateListener = 
                                                new PhoneStateListener() {
        @Override
        public void onCallStateChanged(int state, String incomingNumber) {
            String callState = "UNKNOWN";
            switch (state) {
            case TelephonyManager.CALL_STATE_IDLE:

                break;
            case TelephonyManager.CALL_STATE_RINGING:
                                // DO YOUR WORK HERE

                break;
            case TelephonyManager.CALL_STATE_OFFHOOK:
                          if(incomingNumber.length() >0){

                                  // incoming call
                                 // DO YOUR WORK HERE when call is received
                                 // SEND SMS HERE
                            }
                           else{
                                      // outgoing call
                              }
                break;
            }

            super.onCallStateChanged(state, incomingNumber);
        }
    };

} 
```

您需要注册一个 PhoneStateListener.LISTEN_CALL_STATE 仅用于接收

BroadcastReceiver 内的来电。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T06:45:28.150

您可以添加此代码以在触发某些事件时进行调用。

```
 String Numb = "tel:" + "your number";
      Intent intent = new Intent(Intent.ACTION_CALL, Uri.parse(Numb));
      startActivity(intent); 
```

并为此向您的清单添加权限。

```
 <uses-permission android:name="android.permission.CALL_PHONE"></uses-permission> 
```

# wso2 - WSO2 身份服务器外部 JDBC 存储

> ID：13758146
> 
> 赞同：0
> 
> 时间：2012-12-07T06:36:46.780
> 
> 标签：wso2, identity, wso2is

我想使用外部 JDBC 存储作为默认存储而不是默认 LDAP 存储。遵循此链接中的文档。

[http://docs.wso2.org/wiki/display/IS400/Configuring+an+External+JDBC+User+Store](http://docs.wso2.org/wiki/display/IS400/Configuring+an+External+JDBC+User+Store)

获得以下异常感谢任何帮助。

启动 LDAP server.java.lang.NullPointerException 时发生未知异常：名称为空

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T14:04:18.350

您可以使用外部 JDBC 用户存储配置 WSO2 IS 4.0.0。问题是由于文档（1）中的说明存在问题，因为那里缺少一些配置步骤。我创建了 jira [[DOCUMENTATION-17]](https://wso2.org/jira/browse/DOCUMENTATION-17)跟踪这个文档问题。请按照以下步骤将 IS 4.0.0 与外部 jdbc 用户存储连接。

1) 将 UserStoreManager 类从 user-mgt.xml [IS_Home/repository/conf] 更改为 JDBCUserStoreManager 并将相关的数据库连接属性添加到其中，如 (1) 中所述

2) 在 JDBCUserStoreManager 中添加“passwordHashMethod”属性，并在 {IS_HOME}/repository/conf/user-mgt.xml 中将值设置为“SHA”或“PLAIN_TEXT”。例如：<Property name="passwordHashMethod">SHA</Property>

3) 在 {IS_HOME}/repository/conf/user-mgt.xml 中将“MultiTenantRealmConfigBuilder”属性的值设置为“org.wso2.carbon.user.core.config.multitenancy.SimpleRealmConfigBuilder”。

例如：<Property name="MultiTenantRealmConfigBuilder">org.wso2.carbon.user.core.config.multitenancy.SimpleRealmConfigBuilder</Property>

4) 在tenant-mgt.xml 中启用JDBCTenantManager 并注释掉CommonHybridLDAPTenantManager 的配置部分。

完成上述配置后，您就可以成功地将 WSO2 身份服务器配置为外部 jdbc 用户存储。

(1) [http://docs.wso2.org/wiki/display/IS400/Configuring+an+External+JDBC+User+Store](http://docs.wso2.org/wiki/display/IS400/Configuring+an+External+JDBC+User+Store)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T00:02:00.507

我能够解决这个问题。

如果可能，从全新安装 WSO2 IS 4.0.0 开始。

除了按照文档中给出的说明设置 JDBC 数据存储；您需要执行以下操作：

1.  启用`JDBCTenantManager`和`tenant-mgt.xml`注释掉`CommonHybridLDAPTenantManager2`
2.  将`enable`EmbeddedLDAP 的属性设置为 false`embedded-ldap.xml`

# javascript - 在 jQuery UI 模式对话框中显示 iframe 的加载动画

> ID：13758150
> 
> 赞同：5
> 
> 时间：2012-12-07T06:37:14.207
> 
> 标签：javascript, jquery, jquery-ui, iframe

UI 专家，我正在尝试在 jquery 模态对话框中的 iframe 中加载一个缓慢的网站，但我遇到了麻烦。这是我的用例：

1.  打开一个 jquery 对话框，带有一个“正在加载...” gif
2.  在后台加载不同的 URL
3.  加载后，将 gif 替换为 URL

我可以使用以下代码直接打开 URL：

```
 var popup = $('<div id="popup123" class="dialog"></div>').prependTo('body');
    popup.prepend('<iframe style="display:none" class="dialogIFrame"></iframe>');
    $('.dialogIFrame').attr("src", 'http://myslowsite');
    $('.dialogIFrame').show();
    popup.dialog({
        modal: true,
        title: 'Site',
        width: 1000,
        height: 500,
    }); 
```

所以我的问题是 - 我如何在混合中添加“加载...” gif？应该是可能的 - 但我似乎无法弄清楚！

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T07:00:28.253

这是创建 iframe、将其定向到站点并在完成加载时执行回调的示例：http: [//jsfiddle.net/74nhr/109/](http://jsfiddle.net/74nhr/109/)

```
$(document).ready(function() {
    var status = $('#status');
    var iframe = $('iframe');

    status.val('Loading...'); // show wait

    iframe.on('load', function() {
        status.val('Done!');  // remove wait, done!
    });

    setTimeout(function() {
        iframe.attr('src', 'http://www.archive.org');
    },
    1000);
});
​ 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T07:29:26.873

看到这个。希望它有帮助.. [http://jsfiddle.net/CEJhb/1/](http://jsfiddle.net/CEJhb/1/)

```
var popup = $('<div id="popup123" class="dialog"><img id="load" src="http://jsfiddle.net/img/logo.png" alt="loading..."/></div>').prependTo('body');

popup.prepend('<iframe style="display:none" class="dialogIFrame"></iframe>');
var $iFrame = $('iframe');

$iFrame.load(function() {
$('.dialogIFrame').show();
$('#load').hide();
});

$('.dialogIFrame').attr("src", 'http://www.google.com');

popup.dialog({
modal: true,
title: 'Site',
width: 1000,
height: 500
});​ 
```

# css - Rails] 使用 current_page 方法打开 CSS 类 Active

> ID：13758152
> 
> 赞同：1
> 
> 时间：2012-12-07T06:37:19.287
> 
> 标签：css, ruby-on-rails, current-page

在我看来，我有：

`<li class="<%= 'active' if current_page?(:controller => 'posts') %>"><a href="/posts">Posts</a></li>`

问题是，当我离开 /posts/ 路径时，课程再次关闭。例如，当我转到 /posts/1 时，链接类不再处于活动状态。我认为它仍然会处于活动状态，因为控制器保持不变。我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:51:06.613

你可以做

```
<%= 'active' if params[:controller] == 'posts' %> 
```

所以尝试调试什么是值

```
params[:controller] 
```

当您转到**/posts/1**以查看为什么“活动”类没有出现时。

可能是“活动”类存在，但没有显示 CSS 问题？*在/posts/1* *上检查浏览器上的源代码以查看代码是否正常工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:54:20.010

```
<li class="<%=params[:controller] == 'posts' ?  'active' : '') %>">
    <a href="/posts">Posts</a>
 </li> 
```

以上肯定会奏效。

# javascript - 排除 Express.js 路由中的单词列表

> ID：13758160
> 
> 赞同：1
> 
> 时间：2012-12-07T06:38:05.033
> 
> 标签：javascript, regex, node.js, express

我在 Express.js 框架中有类似的东西

app.post('/:username/:slug', user.fn);

现在我想提出一个正则表达式来检查 slug 是否等于某些单词（个人资料、专辑等），传递到下一条路线并且不捕获 slug 和用户名。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T06:44:28.720

您应该首先放置更具体的路线：

```
app.post('/:username/profile', middlware)
app.post('/:username/album', middleware)
app.post('/:username/:slug', middleware) 
```

但话又说回来，我不知道你想要完成什么

# java - HashMap 中的冲突解决

> ID：13758164
> 
> 赞同：5
> 
> 时间：2012-12-07T06:38:23.880
> 
> 标签：java, hashmap, hashcode

当我们将键值对放入 HashMap 时，可能会发生两个键的哈希码相同的情况，那么在这种情况下如何处理键值的存储和检索。

**更新**

到目前为止我的理解是，如果两个对象键具有相同的哈希码，那么两个键对象都将存储在同一个存储桶中，当我要说`get(key)`的时候，在两个具有匹配哈希码的对象中，要获取的元素由`object.equals()`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T06:41:21.530

当您想从 hashmap 中检索某个对象并且存在多个具有相同 hashcode 的对象时，java 将调用`equals()`以确定正确的对象。

这就是为什么在覆盖`equals()`时覆盖如此重要的原因`hashCode()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T09:11:33.537

每个桶由一个链表表示，因此除了堆空间之外，桶中的条目数没有限制。桶比可能的 hashCode 结果少，因此多个哈希码映射到同一个桶，而不仅仅是具有相同 hashCode 的键。

有`hashCode()`很多冲突的 HashMap 或者桶太少的 HashMap 会使一些链表变长。良好的性能取决于短链表，因为查找的最后阶段是对其中一个链表进行线性扫描。

我同意前面的答案，即匹配取决于`equals()`和`hashCode()`。

# image - 如何使用轮播的java脚本禁用箭头

> ID：13758165
> 
> 赞同：-1
> 
> 时间：2012-12-07T06:38:25.417
> 
> 标签：image, javascript

我想禁用这个 id 为 scroll_disable 的 img 标签，如何使用 java 脚本实现这一点。此图像是实时购物网站轮播的箭头键我想要做的是当没有此产品的图像时我想禁用此箭头。这样用户就无法进一步滚动。我只需要 java 脚本中的解决方案。我可以执行此 onclick() 函数吗？

```
<div id="btn-next" class="f-x3" style="position:relative; float:left;   width:30px;height:50px; padding-left:10px; padding-top:20px; overflow:visible">
<p class="f-lp"  ><a  href="#" class="carousel_carousel next" ><img src="/site/images /arrows1.jpeg" border="0" width="21" height="24" style="vertical-align:baseline" id="scroll_disable"  /></a></p>
</div> 
```

如何为此编写java脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:54:15.270

好的，首先，当你用一种不是你的第一语言写作时，标点符号变得格外重要。

如果您以后不必担心图像会出现在轮播中，请尝试以下操作：

```
document.getElementById('btn-next').removeEventListener('click'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T11:45:57.853

查看以下内容。

[http://jsfiddle.net/WRbxe](http://jsfiddle.net/WRbxe)

`<img>`不是表单元素，因此无法禁用。但是，如果您使用`<input type="image">`它可以使用禁用，

```
document.getElementById('scroll_disable').disabled=true; 
```

# php - 查询mysql复杂

> ID：13758167
> 
> 赞同：-3
> 
> 时间：2012-12-07T06:38:38.517
> 
> 标签：php, jquery, mysql

我想问一些关于查询的问题。我有一个 mysql 表，想生成一个有点复杂的表。

假设我有这 3 张桌子..

Ship_terms

```
id |  Name        | Keterangan
-------------------------
1  | Installation | Instalasi
2  | Delivery     | Pengiriman 
```

Shipp_list

```
id | tipeShipp | namaShipp | Keterangan
----------------------------------------
1  | 1         | KMA       | Bla Bla Bla
2  | 1         | MTECH     | Bla Bla Bla
3  | 2         | JNE       | Bli Bli BLi 
```

Shipp_price

```
id | idShipp | kota    | price
_______________________________
1  | 1       | Jakarta | 0
2  | 2       | Jakarta | 0
3  | 3       | Bandung | 10000
4  | 3       | Jakarta | 5000 
```

**注意：** ship_terms.id = shipp_list.tipeShipp，shipp_price.idShipp = shipp_list.id

而我真正想要的是..查询的结果（使用'kota = jakarta'）是这样的......

```
-----------------
INSTALLATION
-----------------
1\. KMA - 0
2\. MTECH - 0
-----------------
DELIVERY
-----------------
1\. JNE - 5000 
```

这里有人可以帮助我吗？？谢谢

***更新**

这是我的查询：

```
{
    /* Jika tersedia, lakukan pengambilan data */

    /* Hitung berat */
    $queryBerat = "SELECT SUM(berat)as berat FROM tmp_detail_jual WHERE username = '$_SESSION[uname]'";
    $run = $db->query($queryBerat);
    $data_berat = $run->fetch(PDO::FETCH_ASSOC);
    $berat = $data_berat[berat]*$data_berat[jumBarang];
    $beratTot = ceil($berat);
    /* ambil data shipping */
     while($data_table = $cek->fetch(PDO::FETCH_ASSOC)){
         $idShipp = $data_table[idShipp];
         $harga = $data_table[price];
         /* ambil nama kurir */
         $querynama = "SELECT * FROM shipp_list where id='$idShipp'";
         $getNama = $db->query($querynama);
         while($namaShipp = $getNama->fetch(PDO::FETCH_ASSOC)){
             $nama = $namaShipp[namaShipp];
             $keterangan = $namaShipp[keterangan];
             $tipeShipp = $namaShipp[tipeShipp];
             $idShippList = $namaShipp[id];
             /* Cek tipe kurir */
             $queryjenis = "SELECT * FROM ship_terms where id='$tipeShipp'";
             $getJenis = $db->query($queryjenis);
             while($namaTerms = $getJenis->fetch(PDO::FETCH_ASSOC)){
                 $namaTerm = $namaTerms[name];
                 $keterangan = $namaTerms[keterangan];

                 /* Echo datanya */
                  echo '<br>'.$namaTerm.'<br>';
                  echo $nama.' - '.$harga*$beratTot;

             }
         }
     }
} 
```

但我得到了这样的结果

```
-----------------
INSTALLATION
-----------------
KMA - 0
-----------------
INSTALLATION
-----------------
MTECH - 0
-----------------
DELIVERY
-----------------
JNE - 5000 
```

你能给我一个建议吗，所以我的查询结果会是这样的

```
-----------------
INSTALLATION
-----------------
1\. KMA - 0
2\. MTECH - 0
-----------------
DELIVERY
-----------------
1\. JNE - 5000 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:49:59.107

尝试安装，

```
SELECT namaShipp, price
FROM Shipp_list
INNER JOIN Shipp_price ON shipp_list.id = shipp_price.idShipp
WHERE kota = 'jakarta' AND tipeShipp = 1 
```

`AND`交货

```
SELECT namaShipp, price
FROM Shipp_list
INNER JOIN Shipp_price ON shipp_list.id = shipp_price.idShipp
WHERE kota = 'jakarta' AND tipeShipp = 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:56:48.407

尝试这个：

```
SELECT sl.id,  st.name, sl.namaShipp, sp.price 
FROM Shipp_list sl 
INNER JOIN Ship_terms st ON sl.tipeShipp = st.id 
LEFT JOIN Shipp_price sp ON sl.id = sp.idShipp 
```

# android - 在 API 级别 9 中拖放

> ID：13758172
> 
> 赞同：0
> 
> 时间：2012-12-07T06:39:08.397
> 
> 标签：android, drag-and-drop

我可以在 Android API 级别 9 中实现拖放吗？是否有任何 jar 文件以便我可以在 API 级别 9 及更高级别中使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T06:47:19.797

在链接中

[http://developer.android.com/guide/topics/ui/drag-drop.html](http://developer.android.com/guide/topics/ui/drag-drop.html)

在快速查看下据说拖放需要API 11

```
**Quickview**

    Allow users to move data within your Activity layout using graphical gestures.
    Supports operations besides data movement.
    Only works within a single application.
    Requires API 11. 
```

# sql-server - 在删除查询中对从 select 子句获得的值应用小于条件

> ID：13758174
> 
> 赞同：1
> 
> 时间：2012-12-07T06:39:31.750
> 
> 标签：sql-server

我想比较两个表 T1 和 T2 并从 T1 中删除其 form_no 小于 form_no 选择表 T2 的记录。我写了以下查询，但它不起作用。

```
DELETE FROM T1
WHERE --Some Condition--
AND
FORM_NO < (ISNULL((SELECT DISTINCT(FORM_NO) FROM T2 WHERE --Some Condition--), 0)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:45:02.300

试试这个……希望你能给我们提供完整的查询……

```
DELETE FROM T1
WHERE --Some Condition--
AND FORM_NO IN (SELECT DISTINCT(t.FORM_NO) FROM T1 AS t
        LEFT JOIN T2 AS s
        ON -- COMMON COLUMN
        WHERE t.FORM_NO < s.FORM_NO) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:12:43.857

如果您有一个公共字段并想删除此字段的加入：

```
delete from t11 
    from t1 t11
        join t2 on (t11.commonID=t2.commonID)
    where (t11.FORM_NO<t2.FORM_NO) 
```

如果您想要的正是您所要求的：

```
delete from t1 where FORM_NO<(select min(FORM_NO) from t2) 
```

# php - 根据另一个数组从一个数组中搜索一个值

> ID：13758175
> 
> 赞同：0
> 
> 时间：2012-12-07T06:39:42.730
> 
> 标签：php

我有两个数组 $schoolteachers 和 $schoolgroups ......

> $schoolgroups=Array ([0] = Array ([groupid] = 1 [groupname] =Red [members] = Array ([0] = Array ([id] = 13 [name] = Sooraj)
> 
> ```
>  [1] = Array
>                     (
>                         [id] = 12
>                         [name] = sanjay
>                     )
> 
>             )
> 
>     )
> 
> [1] =&gt; Array
>     (
>         [groupid] = 2
>         [groupname] = Blue
>         [members] = Array
>             (
>                 [0] = Array
>                     (
>                         [id] = 9
>                         [name] = Anith
>                     )
> 
>                 [1] = Array
>                     (
>                         [id] = 4
>                         [name] = John
>                     )
> 
>             ); 
> ```

$schoolteachers=数组（

> ```
> [0] =&gt; Array
>     (
>         [employee_id] = 7
>         [emp_name] = Anantha Raman
>     )
> 
> [1] =&gt; Array
>     (
>         [employee_id] =&gt; 9
>         [emp_name] = Anith
>     )
> 
> [2] = Array
>     (
>         [employee_id] = 11
>         [emp_name] = Aravind
>     ) }); 
> ```

我想检查 $schoolteachers 'empname',is in schoolgroup array($schoolgroup ['members'][''name]=Aravind) 并且只回显非成员我想显示基于名称的 $schoolteachers 数组，如果它不存在于$schoolgroups

我用的代码不好

```
foreach ($schoolteachers as $teachers) {
    $classin = false;
    foreach (new RecursiveIteratorIterator(new RecursiveArrayIterator($schoolgroups)) as $value) {
        if ($value == $teachers['emp_name']) {

            $classin = true;
            break;
        }
    }
    if (!$classin) {
        echo $teachers['emp_name'];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:44:37.513

你可以试试

```
$names = array_map(function($v){ return $v['emp_name']; }, $schoolteachers);
$members = array();
array_walk_recursive($schoolgroups, function($item,$key) use (&$members) {
    $key === "name" and $members[] = $item ;
});

echo "<pre>";
foreach($names as $name)
{
    if(!in_array($name, $members))
        echo $name,PHP_EOL;

} 
```

输出

```
Anantha Raman
Aravind 
```

[查看完整演示](http://eval.in/4346)

# android - 如何在android中获取特定listitem的保存项目？

> ID：13758176
> 
> 赞同：0
> 
> 时间：2012-12-07T06:39:46.197
> 
> 标签：android, listview, position, listitem

我正在开发一个应用程序，当用户单击列表视图的项目时，会出现一个新页面，并且在此页面中仅显示所选项目。我的意思是对于一个特定的列表项，只显示以前保存的项目。

在这个新页面中，我有 3 个复选框。因此，当用户单击特定列表项时，新页面会显示具有该特定项先前保存状态的复选框。

现在我不知道该怎么做。

提前谢谢！！

这是我的 onItemClick 列表：-

```
OnItemClickListener ocl= new OnItemClickListener() 
            {
                @Override
                public void onItemClick(AdapterView<?> arg0, View arg1,
                        int arg2, long arg3) 
                {
                    String name= list.get(arg2)[2];
                    Toast.makeText(Profile.this, "session of.." + name, Toast.LENGTH_LONG).show();
                    Settings.setName(name);
                    Intent intent= new Intent(Profile.this, ProfileConfig.class);
                    startActivity(intent);

                }
            };
            lvChildProfile.setOnItemClickListener(ocl); 
```

现在我希望在单击复选框的已保存实例时出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:12:12.967

您可以将状态保留在对象本身中。

```
Model implements Serializable {

    boolean isOptionOneChecked
    boolean isOptionTwoChecked
    boolean isOptionThreeChecked
    int id
    ...

    // Constructor
    // Getters & setters

} 
```

这意味着您`Adapater`将拥有来自模型类型的对象列表。你想如何在你的`ListView`, 中显示这些可以通过自定义来完成，`Adapter`但这不是真正的问题。

当您单击列表中的项目时，您可以检索对象（就像您已经做过的那样）

```
Model lModel = list.get(position); 
```

为了以不同的方式显示模型`Activity`，您可以将其与您的`Intent`原样一起发送：

```
Intent intent= new Intent(Profile.this, ProfileConfig.class);
intent.putExtra("MySelectedObject", lModel);
startActivity(intent); 
```

因为我们的类实现了`Serializable`接口，所以我们可以在 new 中检索对象，`Activity`如下所示：

```
getIntent().getSerializableExtra("MySelectedObject"); 
```

您将拥有有关此对象的所有信息，因此您可以相应地创建布局。

# android - 如何将SD卡中文件夹中的图像显示到网格视图中，例如图片库

> ID：13758179
> 
> 赞同：0
> 
> 时间：2012-12-07T06:40:01.863
> 
> 标签：android, image-gallery

我需要一个教程，在其中我可以从文件夹中获取图像以显示在网格视图中，然后单击网格中的图像我可以看到完整视图和滑动功能

请在此处提供任何教程或代码

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:25:07.593

我认为这并不难实现。找出你的 SD 卡文件夹路径，扫描并存储图片文件并在 SD 卡文件夹中获取图片路径，从存储的图片路径中获取位图并放入 gridview。设置 gridview 项目选择的侦听器以在单击项目时显示图像。

不会有一个示例代码包含您需要的所有功能。您可以将问题分解为小问题，然后尝试逐个解决。例如：首先从文件夹中解决扫描图像文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-07T08:10:33.923

1.  如果 gitHub 中给出的代码无法获取您的图像，请在此处粘贴用于获取图像的路径。

2.  要在网格视图中设置图像，您已经获得了代码。但是现在您要一张一张地滑动图像。然后我可以给你一个使用android画廊视图的提示。它提供了小图像的滑块。您需要更改图像的分辨率。您需要结合这两个视图。

# html-entities - 如何使用 php 将 html 特殊字符转换为它们的代码

> ID：13758181
> 
> 赞同：-1
> 
> 时间：2012-12-07T06:40:10.173
> 
> 标签：html-entities, htmlspecialchars

实际上，我想将所有特殊字符转换为它们的代码，如下所示：

```
!   &#33;    
"   &#34; 
#   &#35;    
$   &#36;    
%   &#37;    
&   &#38; 
'   &#39;    
(   &#40;    
)   &#41;    
*   &#42;    
+   &#43;    
,   &#44;    
-   &#45;    
.   &#46;    
/   &#47; 
```

有什么方法可以将它们转换为 php.ini 中受人尊敬的代码。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-12-31T13:08:57.887

```
 $str="&#33";
 echo html_entity_decode($str); //output ! 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-07T06:41:00.627

PHP中有调用函数`html_entity_decode`和`htmlentities`。

# php - PHP 日期和时间

> ID：13758189
> 
> 赞同：-1
> 
> 时间：2012-12-07T06:41:04.103
> 
> 标签：php, date

我有这条线：

```
 if (date(H) < 16) { } else { } 
```

我只是说，`if it is before 6PM, do something`

但是，它不起作用。但是如果我在其中添加一些数字，例如，

```
 if (date(H) < 1655) { 
```

一个虚假的小时，然后它就起作用了。这是我以前使用过的一个基本概念，我在这里错过了什么吗？

编辑：我在下午 6 点之后进行实时测试，但得到了下午 6 点之前的结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T06:46:08.347

更改`date(H)`为`date('H')`

和`6PM = 18hr`

# php - 如何使用谷歌地图为网络服务生成结果

> ID：13758193
> 
> 赞同：0
> 
> 时间：2012-12-07T06:41:09.973
> 
> 标签：php, javascript, html, web-services, google-maps-api-3

我想以一种非常规的方式使用谷歌地图。我想执行 javacript 但我不想渲染任何图像。相反，我想将一些数据发送到文件，使用 API 必须提供的一些计算功能，然后传回文本响应。我尝试使用以下代码进行此操作，但后来意识到这可能无法正常工作，因为 javascript 在浏览器中运行，而不是作为远程 Web 服务。话虽如此，远程服务器如何调用“Web 服务”，就像我下面的代码必须提供的那样，目的是获得简单的“是”或“否”响应。

```
<?php

  // Get vars
  $lat=$_GET["lat"];
  $lon=$_GET["lon"];

?>

<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=MYKEYNOTYOURS:)&sensor=true&libraries=geometry">
    </script>
    <script type="text/javascript">
// Poygon getBounds extension - google-maps-extensions
// http://code.google.com/p/google-maps-extensions/source/browse/google.maps.Polygon.getBounds.js
if (!google.maps.Polygon.prototype.getBounds) {
  google.maps.Polygon.prototype.getBounds = function(latLng) {
    var bounds = new google.maps.LatLngBounds();
    var paths = this.getPaths();
    var path;

    for (var p = 0; p < paths.getLength(); p++) {
      path = paths.getAt(p);
      for (var i = 0; i < path.getLength(); i++) {
        bounds.extend(path.getAt(i));
      }
    }

    return bounds;
  }
}

// Polygon containsLatLng - method to determine if a latLng is within a polygon
google.maps.Polygon.prototype.containsLatLng = function(latLng) {
  // Exclude points outside of bounds as there is no way they are in the poly
  var bounds = this.getBounds();

  if(bounds != null && !bounds.contains(latLng)) {
    return false;
  }

  // Raycast point in polygon method
  var inPoly = false;

  var numPaths = this.getPaths().getLength();
  for(var p = 0; p < numPaths; p++) {
    var path = this.getPaths().getAt(p);
    var numPoints = path.getLength();
    var j = numPoints-1;

    for(var i=0; i < numPoints; i++) { 
      var vertex1 = path.getAt(i);
      var vertex2 = path.getAt(j);

      if (vertex1.lng() < latLng.lng() && vertex2.lng() >= latLng.lng() || vertex2.lng() < latLng.lng() && vertex1.lng() >= latLng.lng())  {
        if (vertex1.lat() + (latLng.lng() - vertex1.lng()) / (vertex2.lng() - vertex1.lng()) * (vertex2.lat() - vertex1.lat()) < latLng.lat()) {
          inPoly = !inPoly;
        }
      }

      j = i;
    }
  }

  return inPoly;
}

      function initialize() {

        var mapOptions = {
          center: new google.maps.LatLng(38.990842,-76.93625),
          zoom: 17,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

      var box = [new google.maps.LatLng(38.9913160,-76.937079), 
      new google.maps.LatLng(38.991333,-76.936119),
      new google.maps.LatLng(38.990287, -76.936108),
      new google.maps.LatLng(38.990278,-76.937057),
      new google.maps.LatLng(38.990495,-76.937052), 
      new google.maps.LatLng(38.990499,-76.936424),
      new google.maps.LatLng(38.991091,-76.93643),
      new google.maps.LatLng(38.991104,-76.937079)
      ];

        var mPoint = [new google.maps.LatLng(38.991300,-76.936165)];

        var AVpoly = new google.maps.Polygon({path:box,
           strokeColor:"#0000FF",
           strokeOpacity:0.8,
           strokeWeight:2,
           fillColor:"#0000FF",
           fillOpacity:0.4});

        var lat = <?php echo $lat; ?>;
        var lon = <?php echo $lon; ?>;

if(AVpoly.containsLatLng(new google.maps.LatLng(lat,lon), box) == true) {
        document.write("Yes");
}
else
{
document.write("No");
}

      }

    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:13:40.017

这是不允许的！如果您展示的是可公开访问的地图，您只能使用 Google 地图数据。请参阅[**TOS 的第 9.1 节**](https://developers.google.com/maps/terms#section_9_1)和第**10.1.1 (g)节[“没有 Google 地图，不得使用内容。](https://developers.google.com/maps/terms#section_10_1)** ”：

# gwt - 使用 GWT 识别具有触摸/手势功能的设备

> ID：13758197
> 
> 赞同：0
> 
> 时间：2012-12-07T06:41:40.487
> 
> 标签：gwt, mobile, touch, device, jsni

我想知道是否可以在 GWT 中识别设备是否能够进行**触摸/手势事件**？

iPhone 等设备在很大程度上支持多点触控事件。同样，桌面中的 Google Chrome 也支持`TouchEvents`. 而目前，**Windows 8**已经设计了一个响应`TouchEvents`.

我正在开发一个应用程序，我想将某些功能限制为仅支持触摸/手势的设备！任何解决方案，请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:52:28.530

我认为除了 UA 嗅探之外别无他法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T10:12:43.543

GWT 当前不提供此类实用程序。

此外，在 gwt 为我们提供直接实用程序 api 之前，在现有的 javascript 技术上编写 jsni 是有意义的，例如这些[stackoverflow.com/questions/4817029/whats-the-best-way-to-detect-a-touch-screen-设备使用 javascript](https://stackoverflow.com/questions/4817029/whats-the-best-way-to-detect-a-touch-screen-device-using-javascript)。

对于 Windows 8，要参考的 msdn 文档是[http://blogs.msdn.com/b/ie/archive/2011/09/20/touch-input-for-ie10-and-metro-style-apps.aspx](http://blogs.msdn.com/b/ie/archive/2011/09/20/touch-input-for-ie10-and-metro-style-apps.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T12:14:39.440

我**在 Deferred Binding 中使用 User Agent Check**做到了这一点。我创建了一个**白名单**，以便以后可以添加更多设备。

**这是代码，**

```
<!-- Definitions for mobile -->
<define-property name="mobile.user.agent" values="android, ios, not_mobile" />
<property-provider name="mobile.user.agent"><![CDATA[
{
   var ua = window.navigator.userAgent.toLowerCase();
   if (ua.indexOf("android") != -1) { return "android"; }
   if (ua.indexOf("iphone") != -1) { return "ios"; }
   if (ua.indexOf("ipad") != -1) { return "ios"; }
     return 'not_mobile';
   }
]]></property-provider>

<!-- Constrain the value for non-webkit browsers -->
<set-property name="mobile.user.agent" value="not_mobile" >
  <none> <!-- Actually means NOR, in this case "not safari" -->
    <when-property-is name="user.agent" value="safari" />
  </none>
</set-property> 
```

然后我使用**`replace-with`**模块文件中的属性定义了我的类。例如，我已经用 iPad 等设备的 HTML5 视频替换了 Flash 播放器。

```
<replace-with class="com.example.HTML5Player">
        <when-type-is class="com.example.FlashPlayer" />
        <any>
           <when-property-is name="mobile.user.agent" value="android" />
           <when-property-is name="mobile.user.agent" value="ios" />
        </any>
</replace-with> 
```

# ruby-on-rails - RoR 3.2.9：使用 Carrierwave 更改图像大小的小问题，参数错误 #

> ID：13758203
> 
> 赞同：2
> 
> 时间：2012-12-07T06:41:58.833
> 
> 标签：ruby-on-rails, imagemagick, arguments, carrierwave, rmagick

我在这个问题上搜索了很多，但似乎无法让它工作（stackoverflow，Carrierwave Railscasts）。

首先，我上传图片的问题为零。那工作正常。现在图像很大，我想把它变小。目前我的 avatar_uploader.rb 文件是：

```
require 'carrierwave/orm/activerecord'
class AvatarUploader < CarrierWave::Uploader::Base
  include CarrierWave::RMagick

  storage :file

  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  version :thumb do
    process :resize_to_limit => [50,50]
  end

  def extension_white_list
    %w(jpg jpeg gif png)
  end

end 
```

在观看 railscasts 之后（即使它来自 2011 年），似乎您必须将 :thumb 传递给您的视图，例如：

```
<%= image_tag(user.avatar(:thumb).to_s) %> 
```

这在浏览器中给了我一个错误：

***参数数量错误（1 代表 0）***

我什至不确定是否有必要将 :thumb 传递到您的视图中。是吗？

我知道这是一个相当简单的修复，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:27:40.990

从那时起，语法似乎发生了变化。如有疑问，请查阅[官方文档](https://github.com/jnicklas/carrierwave)：

```
uploader.url # => '/url/to/my_file.png'               # size: 800x800
uploader.thumb.url # => '/url/to/thumb_my_file.png'   # size: 200x200 
```

或者，就您而言，可能是：

```
user.avatar.thumb.url 
```

# joomla - 停止在 Joomla 2.5 中加载自动脚本

> ID：13758204
> 
> 赞同：5
> 
> 时间：2012-12-07T06:42:03.497
> 
> 标签：joomla

在`Joomla 2.5`中，以下脚本会自动加载。

```
<script src="/media/system/js/mootools-core.js" type="text/javascript"></script>
<script src="/media/system/js/core.js" type="text/javascript"></script>
<script src="/media/system/js/caption.js" type="text/javascript"></script>
<script src="/media/system/js/mootools-more.js" type="text/javascript"></script>
<script src="/templates/pswedge/js/jquery.min.js" type="text/javascript" defer="defer"></script> 
```

我不想加载这些文件。如何删除这些链接？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T09:25:14.947

I would not recommend you to change the core files of Joomla.But if you really need to that then you can try this:

**Step to disable the preloaded script file in joomla template.**

Step one: Using your favorite file editor, open for edit:

> /libraries/joomla/document/html/renderer/head.php

Step one: Find this code at **line 151** and update it to include the code with this :

```
// Generate script file links
foreach ($document->_scripts as $strSrc => $strAttr)
{
    // Code to disable mootools for your site (still loads it for your admin)

    $ex_src = explode("/",$strSrc);
    $js_file_name = $ex_src[count($ex_src)-1];
    $js_to_ignore = array("mootools-core.js","mootools-more.js","core.js","caption.js");
    if( in_array($js_file_name,$js_to_ignore) AND substr_count($document->baseurl,"/administrator") < 1 AND $_GET['view'] != 'form')
        continue;

    $buffer .= $tab . '<script src="' . $strSrc . '"';
    if (!is_null($strAttr['mime']))
    {
        $buffer .= ' type="' . $strAttr['mime'] . '"';
    }
    if ($strAttr['defer'])
    {
        $buffer .= ' defer="defer"';
    }
    if ($strAttr['async'])
    {
        $buffer .= ' async="async"';
    }
    $buffer .= '</script>' . $lnEnd;
} 
```

After saving the changes above, clear the cache that you have set and test your Joomla website and your Joomla Admin Dashboard. If you view the source code,all the predefind files are not there.

**Or**

You can try like this to hide it from `index.php` in template. Just put this line before the `<jdoc:include type="head" />` and make necessary changes as needed to the scripts.

```
<?php 
    $search = array('mootools-more.js', 'caption.js');
    // remove the js files
    foreach($this->_scripts as $key => $script) {
        foreach($search as $findme) {
            if(stristr($key, $findme) !== false) {
                unset($this->_scripts[$key]);
            }
        }
    }
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T08:56:09.157

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-22T20:11:32.100

I used this code to remove jquery files from the head ( Joomla! 3.3.1 )

```
<?php

//Remove jquery
$search = array('jquery', 'jquery.min.js');
    // remove the js files
    foreach($this->_scripts as $key => $script) {
        foreach($search as $findme) {
            if(stristr($key, $findme) !== false) {
                unset($this->_scripts[$key]);
            }
        }
    }
?>

<jdoc:include type="head" /> 
```

# c# - 使用 Javascript ActiveX 对象触发 C# dll

> ID：13758205
> 
> 赞同：3
> 
> 时间：2012-12-07T06:42:15.077
> 
> 标签：c#, javascript, vb.net, activex

我有需要使用 Javascript 调用的 ac# 类库。下面是 C# 类的代码。

```
using System;
using System.Collections.Generic;
using System.Text;

using System.Runtime.InteropServices;
using System.Windows.Forms;               //required for message box. 

namespace csharp.activex.sample
{       
        [Guid("0D53A3E8-E51A-49C7-944E-E72A2064F938"),
        InterfaceType(ComInterfaceType.InterfaceIsDual),
        ComVisible(true)]
    public interface IHello
    {
        [DispId(1)]
        int ShowDialog();
    };
    [
        Guid("873355E1-2D0D-476f-9BEF-C7E645024C32"),
        ProgId("csharpAx.CHello"),
        ClassInterface(ClassInterfaceType.None),
        ComDefaultInterface(typeof(IHello)),
        ComVisible(true)
    ]
     public class CHello : IHello
    {
        #region [IHello implementation]
        public string Hello()
        { 
           return "Hello from CHello object";
        }
        public int ShowDialog()
        {
            System.Windows.Forms.MessageBox.Show("C# is awesome");
            return 0;
        }
        #endregion
    };

    public class Class1
    {
            public void showDialog() {
                MessageBox.Show("Visual c# is awesome!");
            }
    }
} 
```

我构建了这个类，我得到了一个复制到 c:\DLL 的 dll 文件。下面的代码用于注册 DLL

```
regasm C:\DLL\ActiveXClass.dll /codebase /tlb 
```

我成功注册了消息类型。

我使用以下 javascript 代码创建了一个 html 文件。

```
<!DOCTYPE HTML>
<html>
       <head>
              <meta http-equiv="X-UA-Compatible" content="IE=edge">
              <script type='text/javascript'>
              var myAx1;
              function startService(){
                  myAx1 = new ActiveXObject("csharpAx.CHello");
                  if(myAx1 != null)
                 {
                      myAx1.showDialog();  
                 }

                  else{
                      alert("failed");
                  }

                  return false;
              }
              </script>
       </head>
       <body class="sapUiBody" role="application">
              <div id="content"></div>
              <a href='#' onclick='return startService()'>StartService</a><br />
       </body>
</html> 
```

在如此获得的结果页面上，我单击启动服务。但我没有收到任何警报，例如“失败”或“Visual C# 很棒”。

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T08:37:59.207

我解决了。有一个针对 activex 的安全选项需要启用才能执行此操作。

有关更多详细信息，请查看此链接 [http://www.aras.com/Community/forums/p/2527/7698.aspx](http://www.aras.com/Community/forums/p/2527/7698.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-24T09:21:52.847

我认为最好的解决方案是实施 IObjectSafety，如果您信任您的 activex，您不需要让您的用户检查互联网选项。第 5 点的此链接解释了如何操作：[http ://www.olavaukan.com/2010/08/creating-an-activex-control-in-net-using-c/](http://www.olavaukan.com/2010/08/creating-an-activex-control-in-net-using-c/)

# javascript - 为什么 Node 中的 PassportJS 不会在注销时删除会话

> ID：13758207
> 
> 赞同：75
> 
> 时间：2012-12-07T06:42:20.817
> 
> 标签：javascript, node.js, express, logout, passport.js

我无法让我的系统使用 PassportJS 注销。似乎正在调用注销路由，但它没有删除会话。如果用户未登录特定路线，我希望它返回 401。我调用 authenticateUser 来检查用户是否已登录。

非常感谢！

```
/******* This in index.js *********/
// setup passport for username & passport authentication
adminToolsSetup.setup(passport);

// admin tool login/logout logic
app.post("/adminTool/login",
    passport.authenticate('local', {
        successRedirect: '/adminTool/index.html',
        failureRedirect: '/',
        failureFlash: false })
);
app.get('/adminTool/logout', adminToolsSetup.authenticateUser, function(req, res){
    console.log("logging out");
    console.log(res.user);
    req.logout();
    res.redirect('/');
});

// ******* This is in adminToolSetup ********
// Setting up user authentication to be using user name and passport as authentication method,
// this function will fetch the user information from the user name, and compare the password     for authentication
exports.setup = function(passport) {
    setupLocalStrategy(passport);
    setupSerialization(passport);
}

function setupLocalStrategy(passport) {
    passport.use(new LocalStrategy(
        function(username, password, done) {
            console.log('validating user login');
            dao.retrieveAdminbyName(username, function(err, user) {
                if (err) { return done(err); }
                if (!user) {
                    return done(null, false, { message: 'Incorrect username.' });
                }
                // has password then compare password
                var hashedPassword = crypto.createHash('md5').update(password).digest("hex");
                if (user.adminPassword != hashedPassword) {
                    console.log('incorrect password');
                    return done(null, false, { message: 'Incorrect password.' });
                }
                console.log('user validated');
                return done(null, user);
            });
        }
    ));
}

function setupSerialization(passport) {
    // serialization
    passport.serializeUser(function(user, done) {
        console.log("serialize user");
        done(null, user.adminId);
    });

    // de-serialization
    passport.deserializeUser(function(id, done) {
        dao.retrieveUserById(id, function(err, user) {
            console.log("de-serialize user");
            done(err, user);
        });
    });
}

// authenticating the user as needed
exports.authenticateUser = function(req, res, next) {
    console.log(req.user);
    if (!req.user) {
        return res.send("401 unauthorized", 401);
    }
    next();
} 
```

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-10-02T08:36:49.860

**布莱斯的回答很好**，但我仍然注意到一个重要的区别；Passport 指南建议使用`.logout()`（也别名为`.logOut()`），如下所示：

```
app.get('/logout', function(req, res){
  req.logout();
  res.redirect('/'); //Can fire before session is destroyed?
}); 
```

但如上所述，这是不可靠的。在执行 Brice 的建议时，我发现它的行为符合预期：

```
app.get('/logout', function (req, res){
  req.session.destroy(function (err) {
    res.redirect('/'); //Inside a callback… bulletproof!
  });
}); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-01-11T12:03:22.953

遇到同样的问题。使用`req.session.destroy();`代替`req.logout();`工作，但我不知道这是否是最佳做法。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-11-18T17:49:30.517

`session.destroy`可能不够，要确保用户完全注销，您还必须清除会话 cookie。

这里的问题是，如果您的应用程序还用作单页应用程序的 API（不推荐，但很常见），那么 express 可能会处理一些在注销前开始并在注销后结束的请求。如果是这种情况，那么这个运行时间较长的请求将在删除后恢复 redis 中的会话。并且因为浏览器仍然有相同的cookie，所以下次打开页面时，您将成功登录。

```
req.session.destroy(function() {
    res.clearCookie('connect.sid');
    res.redirect('/');
}); 
```

否则可能会发生这种情况：

1.  收到 Req 1（任何请求）
2.  Req 1 将会话从 redis 加载到内存
3.  收到注销请求
4.  注销请求加载会话
5.  注销请求会破坏会话
6.  注销请求将重定向发送到浏览器（cookie 未删除）
7.  Req 1 完成处理
8.  Req 1 将会话从内存保存到 redis
9.  用户在没有登录对话框的情况下打开页面，因为 cookie 和会话都已就位

理想情况下，您需要对 api 调用使用令牌身份验证，并且仅在仅加载页面的 web 应用程序中使用会话，但即使您的 web 应用程序仅用于获取 api 令牌，这种竞争条件仍然是可能的。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-09-02T18:39:23.267

我遇到了同样的问题，结果证明根本不是 Passport 功能的问题，而是我调用`/logout`路由的方式。我用 fetch 来调用路由：

**（坏的）**

```
fetch('/auth/logout')
  .then([other stuff]); 
```

原来这样做不会发送 cookie，因此会话不会继续，我猜这些`res.logout()`会应用于不同的会话？无论如何，执行以下操作可以解决问题：

**（好的）**

```
fetch('/auth/logout', { credentials: 'same-origin' })
  .then([other stuff]); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-11-26T15:07:59.057

I was having the same issues, capital O fixed it;

```
app.get('/logout', function (req, res){
  req.logOut()  // <-- not req.logout();
  res.redirect('/')
}); 
```

Edit: this is no longer an issue.

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2016-10-04T10:29:16.123

我同时使用了`req.logout()`and`req.session.destroy()`并且工作正常。

```
server.get('/logout', (req, res) => {
  req.logout();
  req.session.destroy(()=>{
    res.redirect('/');
  });
}); 
```

顺便提一下，我使用 Redis 作为会话存储。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-09-22T19:11:47.837

我最近遇到了同样的问题，没有一个答案为我解决了这个问题。可能是错误的，但它似乎与比赛条件有关。

将会话详细信息更改为以下选项似乎已经为我解决了这个问题。我现在已经测试了大约 10 次左右，一切似乎都正常工作。

```
app.use(session({
    secret: 'secret',
    saveUninitialized: false,
    resave: false
})); 
```

基本上我只是从更改`saveUninitialized`为。这似乎解决了这个问题。`resave``true``false`

仅供参考，我`req.logout();`在注销路径中使用标准方法。我没有像其他人提到的那样使用会话销毁。

```
app.get('/logout', function(req, res) {
    req.logout();
    res.redirect('/');
}); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-02-23T18:18:03.460

没有一个答案对我有用，所以我会分享我的

```
app.use(session({
    secret: 'some_secret',
    resave: false,
    saveUninitialized: false,
   cookie: {maxAge: 1000} // this is the key
})) 
```

和

```
router.get('/logout', (req, res, next) => {
    req.logOut()
    req.redirect('/')
}) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-04-05T07:38:31.083

自己破坏会话看起来很奇怪。我在进行下一个配置时遇到了这个问题：

```
"express": "^4.12.3",
"passport": "^0.2.1",
"passport-local": "^1.0.0", 
```

我应该说这种配置**效果很好**。我的问题的原因是我在`sessionStore`此处定义的自定义：

```
app.use(expressSession({
    ...
    store: dbSessionStore,
    ...
})); 
```

为了确保您在这里的问题也只是评论商店行并在没有会话持续存在的情况下运行。如果它可以工作，您应该深入了解您的自定义会话存储。在我的情况下`set`，方法定义错误。当您使用我之前认为的未调用的`req.logout()`会话存储方法时。`destroy()`而是`set`使用更新的会话调用方法。

祝你好运，希望这个答案对你有所帮助。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-06-11T12:25:47.187

显然，这个问题有多种可能的原因。在我的情况下，问题是错误的声明顺序，即注销端点是在护照初始化之前声明的。正确的顺序是：

```
app.use(passport.initialize());
app.use(passport.session());

app.get('/logout', function(req, res) {
  req.logout();
  res.redirect('/');
}); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-07-19T16:55:48.467

只需添加 req.logOut(); 解决了这个问题；“O”应大写

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-04-15T17:44:35.907

我有一个经验，有时它不起作用，因为你没有正确设置护照。例如，我这样做`vhost`了，但是在主应用程序上我设置了这样的护照，这是错误的。

**app.js**（为什么错了？请看下面的blockqoute）

```
require('./modules/middleware.bodyparser')(app);
require('./modules/middleware.passport')(app);
require('./modules/middleware.session')(app);
require('./modules/app.config.default.js')(app, express);

// default router across domain
app.use('/login', require('./controllers/loginController'));
app.get('/logout', function (req, res) {
    req.logout();
    res.redirect('/');
});

// vhost setup
app.use(vhost('sub1.somehost.dev', require('./app.host.sub1.js')));
app.use(vhost('somehost.dev', require('./app.host.main.js'))); 
```

实际上，它一定无法登录，但我设法做到了，因为我继续犯更多错误。通过在此处设置另一个护照设置，以便`app.js`可以使用会话表格`app.host.sub1.js`

**app.host.sub1.js**

```
// default app configuration
require('./modules/middleware.passport')(app);
require('./modules/app.config.default.js')(app, express); 
```

所以，当我想注销时......它不起作用，因为之前`app.js`开始初始化做错了，这是错误的！`passport.js``express-session.js`

但是，正如其他人提到的那样，此代码无论如何都可以解决问题。

**应用程序.js**

```
app.get('/logout', function (req, res) {
    req.logout();
    req.session.destroy(function (err) {
        if (err) {
            return next(err);
        }

        // destroy session data
        req.session = null;

        // redirect to homepage
        res.redirect('/');
    });
}); 
```

> **但在我的情况下，正确的方法是......在passport.js**之前交换**express-session.js**

 **[文件](http://passportjs.org/docs/configure)还提到

> 请注意，启用会话支持是完全可选的，但建议大多数应用程序使用它。如果启用，请务必在 passport.session() 之前使用 express.session() 以确保以正确的顺序恢复登录会话。

因此，通过..解决了我的情况下的注销问题。

**应用程序.js**

```
require('./modules/middleware.bodyparser')(app);
require('./modules/middleware.session')(app);
require('./modules/middleware.passport')(app);
require('./modules/app.config.default.js')(app, express);

// default router across domain
app.use('/login', require('./controllers/loginController'));
app.get('/logout', function (req, res) {
    req.logout();
    res.redirect('/');
}); 
```

**app.host.sub1.js**

```
// default app configuration
require('./modules/app.config.default.js')(app, express); 
```

现在`req.logout();`是工作。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-03-25T04:09:04.163

我遇到了同样的问题。原来我的护照版本与 Express 4.0 不兼容。只需要安装旧版本。

```
 npm install --save express@3.0.0 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-12-06T12:58:13.983

您可以尝试手动重新生成会话：

```
app.get('/logout', (req, res) => {
    req.logOut();
    req.session.regenerate(err => {
        err && console.log(err);
    });
    res.redirect('/');
}); 
```

这不会从会话中删除其他数据（如护照）。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-11-26T16:56:16.457

我正在与一名程序员合作，建议删除 req 的用户：

```
app.get('/logout', function (req, res){
  req.session.destroy(function (err) {
    req.user = null;
    res.redirect('/'); //Inside a callback… bulletproof!
  });
}); 
```

**原因：** 我们需要从 req 中删除（passportjs 也这样做但异步方式）因为注销后没有使用用户数据，即使这会节省内存，也可能是 passportjs 找到用户数据并可能创建新会话和重定向（但不是然而发生）顺便说一句，这是我们删除无关事物的责任。PassportJS 在登录后将数据分配给 req.user，如果我们使用 req.logout() 也会删除，但它可能无法正常工作，因为 NodeJS 本质上是异步的

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-05-01T10:34:27.897

我在 Passport 0.3.2 中遇到了类似的问题。

当我使用自定义回调进行护照登录和注册时，问题仍然存在。

通过升级到 Passport 0.4.0 并添加行解决了问题

```
app.get('/logout', function(req, res) {
    req.logOut();
    res.redirect('/');
}); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-10-11T21:37:14.287

这仍然是一个问题。

我所做的是`req.session.destroy(function (err) {});`在他们注销时在服务器端和客户端使用：

```
const logout = () => {
    const url = '/users/logout'
    fetch(url)
    setTimeout(function () {
      location.reload();    }, 500); 
```

这样，当刷新页面时，用户就没有会话。如果没有人通过身份验证，请确保您重定向到正确的页面。

也许不是最好的方法，但它确实有效。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-12-03T11:45:12.490

这里的所有示例都在 req.session.destroy 之后进行重定向。但要意识到 Express 会立即为您重定向到的页面创建一个新会话。结合 Postman，我发现在注销后立即执行 Passport-Login 会产生 Passport 成功但无法将用户 ID 存储到会话文件的效果的奇怪行为。原因是 Postman 需要更新该组的所有请求中的 cookie，这需要一段时间。销毁回调中的重定向也无济于事。

我通过不进行重定向而仅返回一条 json 消息来解决它。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-09-06T15:54:45.233

`withCredentials: true`我通过将我的`axios.post`请求设置为注销路由解决了这个问题。我猜没有发送识别会话所需的凭据，因此 req.logOut() 没有效果（我还注意到`req.user`在注销路由上未定义，这是一个很大的线索）

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-06-20T10:42:17.787

由于您使用的是通过 cookie 使用它自己的会话的护照身份验证，因此`connect.sid`处理注销的最简单方法是让护照处理会话。

```
app.get('/logout', function(req, res){
  if (req.isAuthenticated()) {
    req.logOut()
    return res.redirect('/') // Handle valid logout
  }

  return res.status(401) // Handle unauthenticated response
}) 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2015-11-17T22:10:28.230

这对我有用：

```
app.get('/user', restrictRoute, function (req, res) {
  res.header('Cache-Control', 'no-cache, private, no-store, must-revalidate,
              max-stale=0, post-check=0, pre-check=0');
}); 
```

它确保您的页面不会存储在缓存中

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-02-01T17:28:48.573

尝试这个

```
 app.get('/logout', (req, res) => {
    req.logout();
    req.session.destroy();
    res.redirect('/');
    } 
```

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2018-10-31T06:40:53.323

您应该使用 req.logout() 来销毁浏览器中的会话。

```
app.get('/logout', function(req, res) {
    req.logout();
    res.redirect('/'); // whatever the route to your default page is
}); 
```

* * *

## 回答 #24

> 赞同：-3
> 
> 时间：2014-06-24T04:10:47.483

在我的情况下，使用传递给的回调`req.session.destroy`仅在某些时候有帮助，我不得不求助于这个 hack：

```
req.session.destroy();
setTimeout(function() {
    res.redirect "/";
}, 2000); 
```

我不知道为什么这是我能够开始工作的唯一解决方案，但不幸的是@JulianLloyd 的回答并没有始终对我有用。

这可能与我的实时登录页面使用 SSL 的事实有关（我无法在暂存站点或本地主机上重现该问题）。我的应用程序中可能还会发生其他事情；我正在使用 derby-passport 模块，因为我的应用程序使用的是[Derby](http://derbyjs.com/)框架，因此很难隔离问题。

这显然是一个时间问题，因为我首先尝试了 100 毫秒的超时，但这还不够。

不幸的是，我还没有找到更好的解决方案。

* * *

## 回答 #25

> 赞同：-3
> 
> 时间：2015-11-26T07:02:28.073

我不知道如何`ng-href="/signout"`解决我的问题。以前我使用服务注销，但我直接使用它。**

# php - 我想通过插件在 WP 中的数据库中发布

> ID：13758212
> 
> 赞同：0
> 
> 时间：2012-12-07T06:42:42.463
> 
> 标签：php, wordpress

我正在使用表单在 wordpress 中使用插件在表中添加数据，但是当我输入提交按钮时，它什么也不显示，也没有数据添加到我做错的表中？请任何人帮助我。我的插入数据代码在这里...

```
 <form id="form1" name="form1" method="post" action="">
  Name
  <input type="text" name="name" /> </br>
  Website 
    <input type="text" name="website" /> </br>
    Description
    <input type="text" name="description" /> </br>
    <input type="submit" value="Submit Form" />
     </form>
    <?php
    global $wpdb;
    $wpdb->query($structure);
    $wpdb->query="insert into ".PRO_TABLE_PREFIX."tutorial ( name, website, description )
    values('{$_POST['name']}','{$_POST['website']}','{$_POST['description']}')";
    if (is_object($wpdb) && is_a($wpdb, 'wpdb')) {
    if (!$wpdb->insert('.PRO_TABLE_PREFIX.tutorial',
    array(
                            'name'=>$_POST[name]
                            ,'website'=>$_POST[website]
                            ,'description'=>$_POST[description]
                ))) exit; 
                } 
else {echo 'Form Submitted';}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:17:03.587

空白页通常意味着内部 50 倍错误，通常由 PHP 或您的网络托管软件（可能是 Apache）引起。

```
$wpdb->query="insert into ".PRO_TABLE_PREFIX."tutorial ( name, website, description )
    values('{$_POST['name']}','{$_POST['website']}','{$_POST['description']}')"; 
```

`$wpdb->query=`无效。代码应为：

```
 $wpdb->query("insert into ".PRO_TABLE_PREFIX."tutorial ( name, website, description )
values('{$_POST['name']}','{$_POST['website']}','{$_POST['description']}')"); 
```

因为 $wpdb->query 是一个函数，而不是一个变量。

**更新：（**更深入）

首先，让我从链接到[wpdb 文档](http://codex.wordpress.org/Class_Reference/wpdb)开始。为了您的目的，您需要这样做：

```
$table = $wpdb->prefix."my_table"; 
```

注意：输入表名时，不要包含“wp_”前缀。"wp_" 前缀可以通过多种方式更改，但它始终存储在 中`$wpdb->prefix`，因此请始终使用它而不是输入默认前缀。

```
global $wpdb;

$wpdb->insert($table,array(
    "name" => mysql_real_escape_string($_POST['name']),
    "website" => mysql_real_escape_string($_POST['website']),
    "description" => mysql_real_escape_string($_POST['description'])
)); 
```

这会将记录输入到您的数据库中。mysql_real_escape_string 对于保护自己免受[MYSQL 注入](http://en.wikipedia.org/wiki/SQL_injection)很重要。这就是它的全部内容。

**更新2：（**回复下一条评论）

然后您需要让 PHP 检查表单是否已提交。您可以简单地添加`if(isset($_POST)){}`，但我个人不喜欢这样做，因为如果另一个表单通过 post 提交到此页面，数据库仍会更新。

```
<?php if(!isset($_POST[PLUGIN_PREFIX.'submit'])){ 

    global $wpdb;
    $table = $wpdb->prefix.PLUGIN_PREFIX."my_table";

    // $wpdb->insert will return true or false based on if the query was successful.
    $success = $wpdb->insert($table,array(
        "name" => mysql_real_escape_string($_POST[PLUGIN_PREFIX.'name']),
        "website" => mysql_real_escape_string($_POST[PLUGIN_PREFIX.'website']),
        "description" => mysql_real_escape_string($_POST[PLUGIN_PREFIX.'description'])
    ));

    if($success){
        $display = '<div class="'.PLUGIN_PREFIX.'submit_success">
            Your data has been saved.
        </div>';
    }else{
        $display = '<div class="'.PLUGIN_PREFIX;.'submit_fail">
            Your data failed to save. Please try again.
        </div>';
    }
}

$display .= '<form id="form1" name="form1" method="post" action="">
    <label for="name">Name</label>
    <input id="name" type="text" name="'.PLUGIN_PREFIX.'name" /> </br>

    <label for="website">Website</label> 
    <input id="website" type="text" name="'.PLUGIN_PREFIX.'website" /> </br>

    <label for="description">Description</label>
    <input id="description" type="text" name="'.PLUGIN_PREFIX.'description" /> </br>

    <input type="hidden" name="'.PLUGIN_PREFIX.'submit" />
    <input type="submit" value="Submit Form" />
</form>';

return $display; 
```

我添加的一些东西似乎是好的插件开发的一部分：

*   插件中第一个文件的第一行之一应该有一个类似于`define('PLUGIN_PREFIX', 'plugin_name_');`. 在可能与其他插件冲突的任何内容之前使用前缀。
*   `<label>`标签非常重要。如果标签的“for”与输入的“id”匹配，则单击标签将选择该输入。
*   返回一个保存 HTML 的变量是显示插件的正确方法。如果您在插件上方的该页面上有其他内容并且您只是回显表单，则表单将出现在其他所有内容之上，无论短代码的位置如何。

# css - 在 Chrome 中缩放 css 时的工件

> ID：13758215
> 
> 赞同：3
> 
> 时间：2012-12-07T06:42:55.067
> 
> 标签：css, google-chrome, transform

检查这个jsFiddle：http: [//jsfiddle.net/XXrSD/1/](http://jsfiddle.net/XXrSD/1/)

代码也在下面产生：

HTML：

```
<div class="outer">
<div class="head">head</div>
<div>
    test
</div>
</div> 
```

CSS：

```
.outer {
    border: 10px solid brown;
    margin: 10px;
    transform: scale(0.6);
    -webkit-transform: scale(0.6);
    -webkit-transform: scale(0.6);
    -moz-transform: scale(0.6);
    -o-transform: scale(0.6);
    -ms-transform: scale(0.6);
}

.head {
    height: 25px;
    background-color: brown;
} 
```

当缩放到 0.6（和 0.3）时，您可以看到 Chrome 留下了伪影（外边框和 #head div 之间的间隙）。但它在 Firefox 中看起来不错。我猜是因为 Chrome 无法处理非整数像素。我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T10:36:12.790

这是因为在缩放时对对象边缘应用了抗锯齿。浏览器错误地计算了需要重绘的区域。留下的部分是未包含在要重绘区域中的对象部分的幻影。

在缩放/转换对象时添加`-webkit-backface-visibility: hidden;`将解决 Chrome 中这些看起来很奇怪的伪影。

更新示例：http: [//jsfiddle.net/robaldred/XXrSD/2/](http://jsfiddle.net/robaldred/XXrSD/2/)

# ios - 不兼容的指针类型将“UIImage *__strong”发送到“NSString 上传到保管箱”类型的参数

> ID：13758219
> 
> 赞同：0
> 
> 时间：2012-12-07T06:43:17.307
> 
> 标签：ios, objective-c

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)img editingInfo:(NSDictionary *)editInfo {
[self dismissViewControllerAnimated:YES completion:nil];
NSURL *kittenFileURL = [[NSBundle mainBundle] URLForResource:img withExtension:nil];
} 
```

这是我的代码。警告我得到它不兼容的指针类型将'UIImage *__strong'发送到'NSString *'类型的参数当我去收集要上传到保管箱的用户图像的url时，它会使应用程序崩溃。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:44:58.963

`URLForResource:`在传递图像时需要一个字符串。这就是错误。你需要在那里传递一个字符串。

```
[[NSBundle mainBundle] URLForResource:stringPath withExtension:nil]; 
```

不确定您打算如何处理，但`URLForResource:`param 需要一个路径或文件名，而不是`UIImage`. 有关更多详细信息[，请查看此处的苹果文档。](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSBundle_Class/Reference/Reference.html#//apple_ref/occ/instm/NSBundle/URLForResource:withExtension:)

只是猜测，您是否想获取该图像的媒体网址。在这种情况下，您需要这样做，

```
NSURL *kittenFileURL = [editInfo valueForKey:UIImagePickerControllerMediaURL]; 
```

[此处列出了可用](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImagePickerControllerDelegate_Protocol/UIImagePickerControllerDelegate/UIImagePickerControllerDelegate.html#//apple_ref/doc/constant_group/Editing_Information_Keys)的密钥。. 对于参考URL，您可以使用，`[editInfo valueForKey:UIImagePickerControllerReferenceURL]`

附带说明， `imagePickerController:didFinishPickingImage:editingInfo:`已弃用，您应该使用`imagePickerController:didFinishPickingMediaWithInfo:`.

# php - CakePHP facebook注销会话没有破坏

> ID：13758221
> 
> 赞同：3
> 
> 时间：2012-12-07T06:43:27.577
> 
> 标签：php, facebook, session, logout, cakephp-2.1

我正在使用 cakephp 2.1 并使用来自 [https://github.com/webtechnick/CakePHP-Facebook-Plugin的 facebook 插件](https://github.com/webtechnick/CakePHP-Facebook-Plugin)

我正在使用 facebook 登录助手，如下所示

```
$this->facebook->login(array('redirect' => 'facebook_login', 'label' => 'sign in via facebook', 'id' => 'fb-login')). 
```

和注销助手如下

```
$this->Facebook->logout(array('redirect' => array('controller' => 'users', 'action' => 'logout'), 'label' => 'Logout')). 
```

在注销操作中，我编写了此代码。

```
$this->Auth->logout();
$this->redirect(Controller::referer()); 
```

但问题是当新用户来登录时，它会显示旧的登录用户数据。所以请帮我弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T05:32:16.710

要删除 cookie，您需要设置完全相同的 cookie（域、路径、名称），但过期时间已过 - 当客户端读取时，这将导致 cookie 不会与下一个请求一起发送。

检查这个网址[https://github.com/facebook/facebook-php-sdk/blob/master/src/base_facebook.php#L132](https://github.com/facebook/facebook-php-sdk/blob/master/src/base_facebook.php#L132)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T05:35:37.150

## 在下面更改：

$this->Auth->注销(); $this->redirect(Controller::referer());

**到**

```
 $this->redirect($this->Auth->logout()): 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T21:22:46.470

我已经在我的应用程序中多次使用 webtechnick facebook 插件，但登录和注销从来没有按照我想要的方式工作。所以现在我正在开发自己的插件，它使用服务器端连接，可以被视为 CakePHP 中的 Auth 对象。

就像`$this->Auth->login()`和一样简单`$this->Auth->logout()`

你可以在这里查看：http: [//marianofino.github.com/Facebook-Plugin-for-CakePHP/](http://marianofino.github.com/Facebook-Plugin-for-CakePHP/)

# ajax - 如何通过全球用户添加的地点名称获取地理编码

> ID：13758222
> 
> 赞同：1
> 
> 时间：2012-12-07T06:43:39.617
> 
> 标签：ajax

当您使用 google map api 搜索位置时，它会根据给定的输入地址给出结果。此地址将仅是 google 地图位置，而不是用户通过在 google 地图中添加地点功能添加的详细信息，例如，如果位置名称是 xyz 并且是如果您在 abc 中搜索 xyz，则位于 abc 位置，那么它会给出确切的结果，但是如果我在 abc 位置的 xyz 处的 google map api 中添加位置详细信息，并将位置详细信息提供给“pppp”并在 abc 中通过 pppp 搜索放置它将不返回任何内容。我的问题是如何通过用户使用添加地名添加的详细信息获取地理编码。

# logging - 如何删除 Log4php 中的旧日志？

> ID：13758223
> 
> 赞同：1
> 
> 时间：2012-12-07T06:43:51.723
> 
> 标签：logging, delete-file, log4php

有什么方法可以删除 log4php 中的旧日志？或者日志在特定时间后被删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T22:05:09.640

如果您使用 plain `LoggerAppenderFile`，那么轮换日志文件由您决定，这可能是一件好事，因为它可以在不影响正在运行的 PHP 应用程序的情况下完成。

如果您希望 log4php 执行此操作，请使用`LoggerAppenderRollingFile`（在一定大小后创建一个新的日志文件，并删除最旧的旋转文件）或`LoggerAppenderDailyFile`（根据时间创建一个新文件）。

# c# - 使用用户输入填充对象数组。C＃

> ID：13758226
> 
> 赞同：1
> 
> 时间：2012-12-07T06:44:12.457
> 
> 标签：c#, arrays, object, user-input

我正在尝试使用 C# 完成这两个目标。我错过了解释如何用对象填充数组的课程，所以我真的没有起点如何做第二个目标。

"1\. 创建一个Student类，有两个字段StudentName(string)和StudentNumber(int)，适当的属性(即get和set)和构造函数(default和non-default)。学生名将默认为空字符串，而学号将默认为 -1。

1.  使用 Student 类解决以下问题。创建一个程序，允许用户将最多 24 名学生输入到一个数组中，确保学生号正好是 5 位数长。输入所有学生后，允许用户按姓名或编号顺序搜索学生。如果找到，则显示完整的学生姓名和编号，否则显示错误消息。允许用户继续搜索，直到他们决定退出。”

我开始工作的第一部分是我的学生班：

```
class Student
{
    // fields
    private string _studentName;
    private int _studentNumber;

    // properties
    public string studentName
    {
        get
        {
            return _studentName;
        }
        set
        {
            studentName = value;
        }
    }
    public int studentNumber
    {
        get
        {
            return _studentNumber;
        }
        set
        {
            studentNumber = value;
        }
    }
    // constructors
        // default - no parameters
    public Student()
    {
        _studentName = "";
        _studentNumber = -1;
    }
        // non default - takes perameters
    public Student(string studentName, int studentNumber)
    {
        _studentName = studentName;
        _studentNumber = studentNumber;
    }
} 
```

这是我的主要程序：

```
class Program
{
    static void Main(string[] args)
    {
        ////////////// Question 1 ////////////////

        // create new student
        Student defaultStudent = new Student();
        // display student
        InputOutput.DisplayStudentInformation(defaultStudent);
        // keep console open
        Console.ReadLine();
    }
} 
```

现在我遇到了目标第二部分的问题。我不知道如何使用 Object(student) 类来帮助我创建一个用户输入的数组，因为我错过了那个特定的讲座。

我不是要求某人为我完成整个作业，我只是不知道如何使用用户输入来填充一个 studentName 和 studentNumber 数组。

我束手无策，试图在这里找到一个起点。任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:56:35.857

使用 Console.ReadLine() 从控制台应用程序获取输入。请参阅：http: [//msdn.microsoft.com/en-us/library/system.console.readline.aspx](http://msdn.microsoft.com/en-us/library/system.console.readline.aspx)。

获得姓名和编号并执行验证后，创建学生对象并添加到数组

```
List<Student> students = new List<Student>();
            Console.WriteLine("Enter name:");
            string nameInput = Console.ReadLine();
            // alternative is to generate own student number
            Console.WriteLine("Enter number:");
            string numberInput = Console.ReadLine();
            // perform validations then create Student                        
            int number;
            // check result of TryParse
            int.TryParse(numberInput, out number);            
            students.Add(new Student { Number = number, Name = nameInput }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:02:50.220

在 main 方法中，您可以创建学生对象数组。

```
Student[] ourStudents = new Student[24];   // declared an array of stduent objects 
```

您可以使用`For`循环进行迭代，以使用另一个可能包含学生编号和姓名的数组来填充每个学生对象。否则，您可以将这些对象绑定到控制台输入/表单文本框:)

手动填充每个对象：

```
ourStduents[0].Number = 12345;
ourStudents[0].Name = "John Kent"; 
```

`Form`当您在控制台窗口中完成所有工作时，请忽略部分。

```
for (int i = 0; i<24; i++) //just user the static array length
{
      myStudents[i].Number = Console.ReadLine();
      myStudents[i].Name = Console.ReadLine();
} 
```

## 根据 OP 的评论添加更多代码以进一步解释

假设在您的学生课堂上一切正常，那么`main`课堂就开始了。

```
using System;
namespace array_sample
{
    class StudentData
    {
        static void Main(string[] args)
        {
            Regex num = new Regex(@"^\d{5}$");
            Student[] ourStudents = new Student[24];   
            // declared an array of stduent objects 

            for (int i = 0; i < 24; i++)
            {
                Console.WriteLine("Enter your Student Number :");
                Match n = num.Match(Console.ReadLine());
                if (n.Value != "")
                {
                  ourStudents[i].Number = Int32.Parse(Console.ReadLine()); 
                  // make sure to convert to integer

                  Console.WriteLine("Enter your Name :");
                  ourStudents[i].Name = Console.ReadLine(); 
                }
                Else
                {
                  Console.WriteLine("Number Can only be 5 digits");
                  if (i > 0)
                     {i = i - 1;}
                  else
                     {i = 0;}
                }

            } // end of input loop

            for(i=0; i<24; i++)
            {
                Console.WriteLine("Number : " + ourStudents[i].Number +'\t' + "Name :"
                                  + ourStudents[i].Name);
            }// end of output loop

            Console.ReadLine();
        }
    }// end of class
} // end of namespace 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-12T16:04:22.503

```
Import TerminalIO.*;
Import BreezySwing.*;

Insert Codes here 
Insert Hacks here
Insert JavaScript here
int CR;
CR=reader.readln("Import TerminalIO")
System.out.println(" +CR+ ") 
```

# algorithm - 动态规划与 Dijkstra 算法的区别

> ID：13758227
> 
> 赞同：0
> 
> 时间：2012-12-07T06:44:12.980
> 
> 标签：algorithm, dynamic-programming, graph-algorithm

任何人都可以澄清一下 Dijkstra 算法是否属于动态规划。为什么我们称 Floyd warshall 算法属于动态编程方法。我无法找出它们之间的区别。当我尝试这样做时，我实际上遇到了一个疑问，即动态编程到底意味着什么？而且 Dijkstra 的方法也被引用为贪婪方法，这是否意味着它并不总是正确的？此外，这两种算法的结果是否不同？谁能详细解释一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T06:57:29.910

动态编程是您归纳地使用子问题来解决问题的地方。

另一方面，贪心算法试图通过局部优化步骤来解决全局优化问题。有时这些局部步骤会带您达到全局最优（如 Dijkstra 算法的情况），有时可能不会（如在变更问题中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:53:12.833

动态规划（DP）和贪心方法是一种方法论——一个概念——就像递归一样；它们不是任何特定的算法。

Dijaktra 的算法 - 引用维基百科 -

> 是一种图搜索算法，用于解决具有非负边路径成本的图 > 的单源最短路径问题，生成最短路径树

Dijaktra 的算法可能使用 DP 技术来解决最短路径问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T07:19:18.913

动态编程是一种编程方法，通过它我们可以通过将复杂问题分解为更简单的子问题来解决复杂问题。通过将先前计算的子问题值存储在内存中而不是重新计算。这个例子可以理解..

```
 public static int fib(int n) {
 if (n < 2) {
 return n;
 }
 int[] f = new int[n];
 f[0] = 0;
 f[1] = 1;
 for (int i=2; i<n; i++) { // store the Fibonacci numbers
 f[i] = f[i-1] + f[i-2];
 }
  return f[n-1] + f[n-2];
} 
```

而 Dijkstra 是图搜索算法。

对于动态编程，贪婪方法之间的区别，您可以看到这篇文章

[分而治之，动态规划和贪心算法！](https://stackoverflow.com/questions/6162465/divide-and-conquer-dynamic-programming-and-) 贪心算法

# wmi - 文件路径中的 wmic 空间，导致 No Instance(s) Available

> ID：13758228
> 
> 赞同：1
> 
> 时间：2012-12-07T06:44:27.133
> 
> 标签：wmi, wmic

我正在使用 wmic 使用文件的完整路径获取有关服务的信息。

```
wmic service where PathName="C:\\Windows\\system32\\CxAudMsg64.exe" 
```

哪个工作正常。但是，当我使用带有空格的路径时，如下所示：

```
wmic service where PathName="C:\\Program Files (x86)\\Common Files\\Adobe\\ARM\\1.0\\armsvc.exe" 
```

它告诉我：“没有可用的实例。” 这是不正确的，因为路径正确并且服务存在。我需要逃离路径中的空间还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:07:42.423

我的错。

```
wmic service 
```

wmic 服务显示 PathName 值有时会与 qoutes 一起列出，有时则不会。你必须检查两者。

```
wmic service where PathName='"C:\\Program Files (x86)\\Common Files\\Adobe\\ARM\\1.0\\armsvc.exe"' 
```

和

```
wmic service where PathName='C:\\Program Files (x86)\\Common Files\\Adobe\\ARM\\1.0\\armsvc.exe' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-27T19:54:01.223

# TL;DR -

```
wmic service where "pathname='\"C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.1902.2-0\\NisSrv.exe\"' AND ServiceSpecificExitCode=0" get name

#OR....

wmic service where (pathname="\"C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.1902.2-0\\NisSrv.exe\"" AND ServiceSpecificExitCode=0) get name 
```

# Details -

While the other answer works for single-criterion questions, it'll error out for a compound query. I recommend using either the "Quote Before Equals" syntax or the "Paren Around Where" syntax. Here are some examples

### Single-Where + Quote After Equals

```
Invalid alias verb          == wmic service where pathname=""C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.1902.2-0\\NisSrv.exe"" get name
Invalid query               == wmic service where pathname="\"C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.1902.2-0\\NisSrv.exe\"" get name
Invalid alias verb          == wmic service where pathname="^"C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.1902.2-0\\NisSrv.exe^"" get name
Invalid alias verb          == wmic service where pathname=^""C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.1902.2-0\\NisSrv.exe^"" get name
Invalid query               == wmic service where pathname="\"C:\\ProgramData\\Microsoft\\Windows^ Defender\\platform\\4.18.1902.2-0\\NisSrv.exe\"" get name
Invalid query               == wmic service where pathname="\"C:\\ProgramData\\Microsoft\\Windows\ Defender\\platform\\4.18.1902.2-0\\NisSrv.exe\"" get name
Works Perfect               == wmic service where pathname='"C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.1902.2-0\\NisSrv.exe"' get name 
```

### Single-Where + Quote Before Equals

```
No Instance(s) Available    == wmic service where "pathname='C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.1902.2-0\\NisSrv.exe'" get name
No Instance(s) Available    == wmic service where "pathname='^""C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.1902.2-0\\NisSrv.exe""'" get name
No Instance(s) Available    == wmic service where "pathname='""C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.1902.2-0\\NisSrv.exe""'" get name
Invalid query               == wmic service where "pathname=""C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.1902.2-0\\NisSrv.exe""" get name
Invalid alias verb          == wmic service where "pathname='^"C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.1902.2-0\\NisSrv.exe^"'" get name
Invalid alias verb          == wmic service where "pathname='"C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.1902.2-0\\NisSrv.exe"'" get name
No Instance(s) Available    == wmic service where "pathname=\"C:\\ProgramData\\Microsoft\\Windows^ Defender\\platform\\4.18.1902.2-0\\NisSrv.exe\"" get name
No Instance(s) Available    == wmic service where "pathname=\"C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.1902.2-0\\NisSrv.exe\"" get name
Invalid alias verb          == wmic service where "pathname=^"C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.1902.2-0\\NisSrv.exe^"" get name
Invalid query               == wmic service where "pathname=\"C:\\ProgramData\\Microsoft\\Windows\ Defender\\platform\\4.18.1902.2-0\\NisSrv.exe\"" get name
Works Perfect               == wmic service where "pathname='\"C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.1902.2-0\\NisSrv.exe\"'" get name 
```

### Single-Where + Paren Around Where

```
Works Perfect               == wmic service where (pathname="\"C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.1902.2-0\\NisSrv.exe\"") get name 
```

### Compound-Where + Quote After Equals

```
Invalid alias verb          == wmic service where pathname='"C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.1902.2-0\\NisSrv.exe"' AND ServiceSpecificExitCode=0 get name
Invalid alias verb          == wmic service where pathname='"C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.1902.2-0\\NisSrv.exe"' AND ServiceSpecificExitCode='0' get name 
```

### Compound-Where + Quote Before Equals

```
Works Perfect               == wmic service where "pathname='\"C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.1902.2-0\\NisSrv.exe\"' AND ServiceSpecificExitCode=0" get name 
```

### Compound-Where + Paren Around Where

```
Works Perfect               == wmic service where (pathname="\"C:\\ProgramData\\Microsoft\\Windows Defender\\platform\\4.18.1902.2-0\\NisSrv.exe\"" AND ServiceSpecificExitCode=0) get name 
```

# android - 基于 HTML 浏览器的链接，用于调用 iPhone/iPad 或 Android 应用程序以自行启动

> ID：13758241
> 
> 赞同：0
> 
> 时间：2012-12-07T06:45:12.113
> 
> 标签：android, jquery, iphone, html, appmobi

是否有任何已知方法可以在静态 html 页面上提供链接，如果该应用程序存在，该链接又会在 iPhone/iPad 或 android 上打开应用程序？我知道你可以建立通话链接，我知道你可以通过 iTunes 让市场启动，但是对于这两种设备类型的链接是否有标准格式？

有点像`mailto:`，启动 IRC 之类的其他事情？在庄园里说话？如果存在，它是如何完成的？这是我可以在javascript中做的事情吗？jquery 或类似的库？其他？

我应该提到有问题的应用程序不是本机应用程序，它是通过 appmobi 创建的，不确定这是否会带来不同的世界。尽管它确实让我意识到它的网站有一种从浏览器启动应用程序的方法。只是不确定它是如何完成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:48:06.200

注意 - 我是 appMobi 的开发人员

appMobi 确实为每个构建的应用程序提供了一个协议处理程序。它是您的公司名称、句点，然后是您的应用名称。

因此，如果您的公司名称是“开发者”并且您的应用程序名称是“测试”

```
<a href='developer.test://'>Launch my app</a> 
```

# php - 没有 Eval 的 PHP 动态 Duck 类型

> ID：13758244
> 
> 赞同：4
> 
> 时间：2012-12-07T06:45:22.057
> 
> 标签：php, eval, duck-typing

例子：

```
<?php
class a{
    public function func(){
        return "a";
    }
}

class b{
    public function func(){
        return "b";
    }
}

$input = "a"; // Would come from user input

eval('$duck = new '.$input.'();');
$duck->func(); // Returns a in this case 
```

有什么方法可以在不使用的情况下做到这一点`eval()`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T06:47:13.967

当然你可以不用`eval()`. PHP 将使用包含类名的字符串或文字作为`new`运算符的参数。

```
$duck = new $input; // parentheses are optional
echo $duck->func(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:47:24.543

是的，您可以通过将类名存储到字符串中，例如：

```
$input = "a";
$duck = new $a();
if(is_callable($duck',"func")){
   $duck->func();
} 
```

会工作

# charts - Kendoui dataviz 在折线图上添加数据点

> ID：13758245
> 
> 赞同：3
> 
> 时间：2012-12-07T06:45:26.140
> 
> 标签：charts, kendo-ui, real-time, kendo-dataviz

是否可以在不刷新图表的情况下在 kendoUI 折线图上添加新数据点和删除数据点？数据将每 5 秒出现一次，图表上最多可包含 720 个数据点（图表将显示过去一小时的数据）。如果图表上有 720 个数据点可用，则应将下一个传入的数据附加到图表的末尾，同时删除图表上的第一个数据点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T11:42:52.873

我的建议是通过图表数据源[的 API来操作数据点。](http://docs.kendoui.com/api/framework/datasource#methods)

每 5 秒左右刷新一次应该不是问题，特别是如果您关闭[转换](http://docs.kendoui.com/api/dataviz/chart#refresh)：

```
$("#chart").kendoChart({
    transitions: false
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T06:11:11.790

从 KendoUI 代表那里获得了一个演示链接，该代表在图表上进行动态数据更新。我想这应该会有所帮助。

[http://demos.kendoui.c​​om/dataviz/api/benchmark.html](http://demos.kendoui.com/dataviz/api/benchmark.html)

# python - ord函数循环执行

> ID：13758250
> 
> 赞同：0
> 
> 时间：2012-12-07T06:45:43.057
> 
> 标签：python, zipper

我有两个文件夹，每个文件夹包含 196 个文件，它们都是 ( `'\xae\xae\xb4\x9e\x8f\x9f\xba\xc1\xd5\xbd\xcd\xa1\xb7\'`) 格式。我正在尝试读取这些数据并将其转换为人类可读的形式。我想合并 2 文件夹的两个文件的数据。

我使用`ord()`函数尝试了这个，但是在尝试检索具有预期输出的单个文件时，我得到了错误的值。我尝试提取读取的第一个元素，但我得到的输出是所有文件的最前值。这是我的代码：

```
for file_name, files in izip(list_of_files, list_of_filesO):
     fi = open(file_name,"r").read()
     fo = open(files,"r").read()
     f =  [open("/home/vidula/Desktop/project/ori_tri/input_%i.data" %i,'w')for i in range(len(list_of_files))]
     read = [ord(i) for i in fi]
     reado = [ord(i) for i in fo]
     zipped = zip (read,reado)
     print read[0] 
```

预期输出：

```
125,25
36,54
98,36
78,56 
```

谢谢你的期待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:27:18.117

```
[ord(i) for i in fi] 
```

遍历文件会遍历文件的行。听起来您想一次迭代一个角色。为此，您可以尝试将`read`每个文件显式地作为一个块，然后迭代生成的字符串。

如果您不希望整个文件内容在内存中，您可以尝试制作自定义迭代器，例如：

```
def each_char_of(a_file):
    while True:
        x = a_file.read(1)
        if not x: return
        yield x 
```

# iphone - 如何在 iphone sdk 中比较两个日期和时间

> ID：13758253
> 
> 赞同：2
> 
> 时间：2012-12-07T06:46:15.063
> 
> 标签：iphone, ios5

这是我正在尝试的

```
NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease];
NSDate *serDate;
NSDate *endDate;
[formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
serDate = [formatter dateFromString:@"2012-12-07 7:17:58"];
endDate = [formatter dateFromString:@"2012-12-07 08:43:30"];
int remainigSecond =[endDate timeIntervalSinceDate:serDate];
NSString * Hrs = @"1.30";// is Hrs
if (remainigSecond>3600*[Hrs intValue])
    return 1;
else
    return 0; 
```

它没有预期的响应......你能帮他看看这有什么问题吗

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T07:48:00.407

compare：函数可用于有效地比较两个日期。

```
NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease];
NSDate *serDate;
NSDate *endDate;
[formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
serDate = [formatter dateFromString:@"2012-12-07 7:17:58"];
endDate = [formatter dateFromString:@"2012-12-07 08:43:30"];

if([serDate compare:endDate])
    NSLog(@"Enddate bigger than serdate");
else
    NSLog(@"serdate bigger than enddate"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T06:49:36.087

```
 NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease];
    NSDate *serDate;

    NSDate *endDate;

    [formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];

    serDate = [formatter dateFromString:@"2012-12-07 7:17:58"];

    endDate = [formatter dateFromString:@"2012-12-07 08:43:30"];
    NSTimeInterval timeDifference = [endDate timeIntervalSinceDate:serDate];

    double minutes = timeDifference / 60;

    double hours = minutes / 60;

    double seconds = timeDifference;

    double days = minutes / 1440;
    NSLog(@" days = %.0f,hours = %.2f, minutes = %.0f,seconds = %.0f", days, hours, minutes, seconds); 
```

并像下面这样比较..

```
if (hours > 1.30)
    return 1;
else
    return 0; 
```

输出是 `days = 0, hours = 1.43, minutes = 86,seconds = 5132`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T06:49:10.740

您可以使用此方法在两个日期之间获取**YEAR**、**MONTH****和 DAY**等

```
 NSCalendar *sysCalendar = [NSCalendar currentCalendar];
    unsigned int unitFlags = NSHourCalendarUnit | NSMinuteCalendarUnit | NSDayCalendarUnit | NSMonthCalendarUnit;

    NSDateComponents *conversionInfo = [sysCalendar components:unitFlags fromDate:firstDate  toDate:secondDate  options:0];

    NSLog(@"Conversion: %dmin %dhours %ddays %dmoths %dYear",[conversionInfo minute], [conversionInfo hour], [conversionInfo day], [conversionInfo month]%12,[conversionInfo month]/12);
    NSString *result2 = [NSString stringWithFormat:@"%d year, %d month and %d day",[conversionInfo month]/12,[conversionInfo month]%12,[conversionInfo day]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T07:03:22.927

`timeIntervalSinceReferenceDate`函数在两个日期对象的日期比较中效果很好。

```
if(([endDate timeIntervalSinceReferenceDate] - [startDate timeIntervalSinceReferenceDate]) > 3600*[Hrs intValue]){

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-12T06:58:19.837

```
if(([endDate timeIntervalSinceReferenceDate] - [startDate timeIntervalSinceReferenceDate]) > 3600*[Hrs intValue])
{

} 
```

# c# - 为 Windows 8 编写游戏

> ID：13758264
> 
> 赞同：3
> 
> 时间：2012-12-07T06:47:29.557
> 
> 标签：c#, windows

我有一年的 XNA 使用经验和一些 C++ 的背景，我对制作适用于 Windows 8 的游戏非常感兴趣，我的目标是在 Windows 商店中销售它们。我已经做了很多谷歌搜索，但我不知道我应该从什么开始。我应该使用 MonoGame、带有 DirectX 的 C++ 还是 SharpDX？还是我错过了另一个大的？我只是对似乎有这么多选择以及我应该朝哪个方向前进感到不知所措。我想为我的技能水平做出最合乎逻辑的选择，这基本上意味着我想要有很多文档和示例的东西。谢谢！

# mysql - 将 Facebook Graph 数据保存在 MYSQL 数据库中以节省时间合法吗？

> ID：13758266
> 
> 赞同：4
> 
> 时间：2012-12-07T06:47:44.293
> 
> 标签：mysql, facebook-graph-api

我目前正在使用 Facebook 的图表来列出网站上的本地事件，但是每次页面加载 [~100 个事件] 时，从图表中访问我想要的所有数据都需要花费大量时间。使用 MYSQL 数据库存储所有事件及其详细信息（并每天更新几次数据）将页面加载时间减少到几乎为零。

我的问题是以这种方式使用数据库是否合法（版权法？？？），它是否遵守 Facebook 服务条款？

仅使用“公开”活动，包括描述、活动照片、参加人数等，以及参加人数的性别比例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T06:51:41.897

取自[Facebook API 的政策页面](http://developers.facebook.com/policy/)e：

> 您可以缓存通过使用 Facebook API 接收到的数据，以改善您的应用程序的用户体验，但您应该尽量使数据保持最新。此许可不授予您对此类数据的任何权利。

# ruby-on-rails - 更新rails中对象数组的值

> ID：13758271
> 
> 赞同：0
> 
> 时间：2012-12-07T06:48:32.843
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在从 ruby​​ on rails 中的数据库中检索数据。我必须在控制器中使用新的格式化日期更新检索到的日期。
像这样的东西：-

```
 @events = 'My Query.'
   @events.each do |eventdata|
      # Since the date is in utc i have to convert it in users time zone.
      eventdata.start_date = eventdata.start_date.strftime("%Y-%m-%d %H:%M:%S")
    end 
```

但它不起作用。在这方面需要一些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T06:57:50.470

您无法更改字段的格式，它是 DateTime，您必须为此使用一种方法

```
def formated_start_date
  start_date.strftime("%Y-%m-%d %H:%M:%S")
end 
```

但是，您可以更改所有数据库记录的日期时间格式，方法是创建文件 config/initializers/date_time_formats.rb 并添加一些内容，例如

```
Time::DATE_FORMATS[:default] = "%Y-%M-%d %H:%M:%S" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T07:44:58.343

这是一个猴子补丁，用于在转换为 json 时格式化所有 DateTimes 的日期：

```
class ActiveSupport::TimeWithZone
  def as_json(options = {})
      strftime('%Y-%m-%d %H:%M:%S')
  end
end 
```

穿上它

```
/config/initializers/json_date_path.rb 
```

就这样。

# c - linux内核取消链接文件的正确方法

> ID：13758275
> 
> 赞同：0
> 
> 时间：2012-12-07T06:49:03.713
> 
> 标签：c, linux, kernel

Linux 3.2.2 内核

我检查了 fs/namei.c 中的源代码，发现 do_unlinkat 执行整个操作但需要一个用户空间指针。我想知道除了内核空间之外是否有一个函数可以执行此操作（我确实有文件、inode 和dentry 的结构路径）我可以将函数中的代码复制到我自己的代码中。但我只是想知道它是如何工作的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T03:56:08.927

你完全了解这个[`fs/namei.c:do_unlinkat()`](http://git.kernel.org/?p=linux/kernel/git/bwh/linux-3.2.y.git;a=blob;f=fs/namei.c;hb=HEAD)功能吗？它完全符合您的要求，只是它使用

```
 error = user_path_parent(dfd, pathname, &nd, &name);
     if (error)
         return error; 
```

查找`struct nameidata`. 如果成功，内核端的副本`pathname`将被存储在`name`（必须使用释放`putname(name)`）。

但是，同一个文件也包含该`user_path_parent()`函数的实现。它非常简单，因此您应该毫不费力地理解它的作用。实际上，除了将用户空间复制`pathname`到内核端之外`name`，它实际上只是进行了一次`do_path_lookup()`调用，该调用仅在内核端结构上运行。

使用上述内容，您可以`do_unlinkat()`对实现自己的内核端`unlinkat()`功能进行少量修改。如果这是您希望有朝一日被上游接受的代码，您还应该重构这两个函数，以免重复代码。也许类似于

```
/*
 * Make sure that the actual truncation of the file will occur outside its
 * directory's i_mutex.  Truncate can take a long time if there is a lot of
 * writeout happening, and we don't want to prevent access to the directory
 * while waiting on the I/O.
 */
static long kern_unlinkat(int dfd, const char *name)
{
    long error;
    struct dentry *dentry;
    struct nameidata nd;
    struct inode *inode = NULL;

    error = do_path_lookup(dfd, name, LOOKUP_PARENT, &nd);
    if (error)
        return error;

    error = -EISDIR;
    if (nd.last_type != LAST_NORM)
        goto exit1;

    nd.flags &= ~LOOKUP_PARENT;
    error = mnt_want_write(nd.path.mnt);
    if (error)
        goto exit1;

    mutex_lock_nested(&nd.path.dentry->d_inode->i_mutex, I_MUTEX_PARENT);
    dentry = lookup_hash(&nd);
    error = PTR_ERR(dentry);
    if (!IS_ERR(dentry)) {
        /* Why not before? Because we want correct error value */
        if (nd.last.name[nd.last.len])
            goto slashes;
        inode = dentry->d_inode;
        if (!inode)
            goto slashes;
        ihold(inode);
        error = security_path_unlink(&nd.path, dentry);
        if (error)
            goto exit2;
        error = vfs_unlink(nd.path.dentry->d_inode, dentry);
exit2:
        dput(dentry);
    }
    mutex_unlock(&nd.path.dentry->d_inode->i_mutex);
    if (inode)
        iput(inode);    /* truncate the inode here */
    mnt_drop_write(nd.path.mnt);
exit1:
    path_put(&nd.path);
    return error;

slashes:
    error = !dentry->d_inode ? -ENOENT :
        S_ISDIR(dentry->d_inode->i_mode) ? -EISDIR : -ENOTDIR;
    goto exit2;
}

static long do_unlinkat(int dfd, const char __user *pathname)
{
    long error;
    char *name = getname(pathname);

    if (IS_ERR(name))
        return PTR_ERR(name);

    error = kern_unlinkat(dfd, name);

    putname(name);

    return error;
}

EXPORT_SYMBOL(kern_unlink); 
```

如果上述方法有效——我没有费心去测试它；一切由您决定——然后您可以使用`kern_unlinkat(directoryfd, pathname)`或`kern_unlinkat(AT_FDCWD, pathname)`在您自己的内核模块中通过在内核端字符串中指定文件的路径名来删除文件`pathname`。

如果您已经拥有nameidata，那么您显然可以更改上面的内容以匹配常见的代码和不常见的代码。但是，考虑到细节的复杂性（特别是dentry 锁定），如果我是你，我只会使用路径名。

快乐的黑客，祝你好运。

# less - 是否可以将现有的 CSS 提供给某个编辑器，它会生成 LESS 类型的动态 CSS，其中我们有变量表达式等

> ID：13758276
> 
> 赞同：0
> 
> 时间：2012-12-07T06:49:07.563
> 
> 标签：less

我发现 LESS 框架在以编程方式进行 CSS 方面向前迈出了非常好的一步。我想检查一些现有 css 的样式较少的动态 css。所以想检查我们是否有可能从现有的 CSS 生成动态 CSS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:52:49.507

我不知道有什么可以为你做的，而且我不确定它会有多大用处。但是，请注意，有效的 CSS 也是有效的 LESS 和有效的 SCSS（如果您想采用 Sass 方式），因此您可以从它开始并逐步添加一些动态。

有点像有效的 JavaScript 也是有效的 TypeScript。

# java - I want my dealer to be bit more 'intelligent' when choosing when to draw a card in BlackJack game

> ID：13758279
> 
> 赞同：0
> 
> 时间：2012-12-07T06:49:27.380
> 
> 标签：java, logic, artificial-intelligence, complexity-theory, blackjack

Think of BlackJack game... I created a method which does simple calculation whether computer should draw a card and just hard coded the rules. I would like to make this more 'intelligent' therefore making game a bit more unpredictable even for creator (me).

What could I add here? How to make my dealer draw without hard coding much of the rules?

```
// Compute if computer should draw a hand or not depending on hand value of player.
// Also, computer may take higher risk if player has reached BLACKJACK.
private static Deck dealerDraw(Deck deck, Hand player, Hand player2, Hand dealer)
{
    if(player.getHandTotal() <= BLACKJACK)
    {
        // Dealer takes a precaution and only draws 
        // if hand total is less than or equal to 15.
        while(dealer.getHandTotal() <= 15 && 
                (dealer.getHandTotal() <= player.getHandTotal() || 
                dealer.getHandTotal() <= player2.getHandTotal()))
            deck = drawFromDeck(deck, dealer);

        // Player has reached BLACKJACK!
        // There's no or little chance to win, 
        // dealer risks and draws even if total is high.
        if (player.getHandTotal() == BLACKJACK || 
                player2.getHandTotal() == BLACKJACK)
            while(dealer.getHandTotal() < BLACKJACK && 
                    dealer.getHandTotal() != BLACKJACK)
                deck = drawFromDeck(deck, dealer);
    } // end if()

    return deck;
} // dealerDraw() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T07:21:47.267

Before you spend a lot of time writing a Blackjack dealer AI, you might consider that generally [the dealer doesn't get to make any choices](http://en.wikipedia.org/wiki/Blackjack#Rules_of_play_at_casinos) because the statistically best play doesn't really depend all that much on what the player does.

You might pick a more interesting game to write a real AI for.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T07:01:45.787

To implement an AI, I think you should not try to modify your non-AI code into an AI implementation. Rather an AI based computer player mostly needs a completely different design, so I would redesign the whole 'player' code. I would for example go for [machine learning](http://en.wikipedia.org/wiki/Machine_learning). With machine learning, it can learn as it plays more and more and in some time (depending upon the algorithm and its implementation) it can surprise me. For example an AI can record all its moves/plays (in a database) and draw a conclusion deciding its move the next time similar situation arises, based on statistics of successful moves.

# pointers - 如何在 C 中声明一个本地方法，并将结构指针作为 java 中的返回类型？

> ID：13758281
> 
> 赞同：-2
> 
> 时间：2012-12-07T06:49:43.480
> 
> 标签：pointers, types, struct, java-native-interface, return

C中的代码：

```
typedef struct{

int a;

int b;

}NODE;

NODE *node;

NODE* add(int c){

node->a=node->a+10;

c=node->a+node->b;

node->a=c;

return node;

} 
```

java - 如何使用JNI在Java中声明我的本机函数“add”和结构指针作为返回类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T06:09:34.587

您的 Java 应用程序不可能有意义地处理结构、指针甚至指向从您的本机代码返回的结构的指针。因此，JNI 不允许这样做。

但是，如果您想将指向结构的指针视为一个不透明的句柄，它只是在 Java 中传递但只在本机代码中处理，那么您可以定义本机方法，如：

```
public native int add(); 
```

或者

```
public native long add(); 
```

您应该使用哪一个取决于您的本机代码是使用 32 位还是 64 位指针。然后，您的本机代码必须在返回之前正确地从您的指针转换为合适的 jint 或 jlong​​。

# jquery - $.get() - 通过回调将数据传递给外部函数？（请关闭）

> ID：13758282
> 
> 赞同：-1
> 
> 时间：2012-12-07T06:49:49.277
> 
> 标签：jquery, ajax

我有一个简单的问题：你能在 a 的回调中初始化一个函数`$.get()`吗？

例如，这不会提醒“get”：

```
function outside() {
    alert('get');
}
$.get('foo.txt', function(data) {
    outside();
}); 
```

[http://jsfiddle.net/d69vz/3/](http://jsfiddle.net/d69vz/3/)

但是，`$.ajax`按预期使用警报“ajax”：

```
function outside() {
    alert('ajax');
}
$.ajax({
    url: 'foo.txt',
    type: 'GET',
    success: function(data) {
        outside();
    }
}); 
```

[http://jsfiddle.net/v8zqZ/](http://jsfiddle.net/v8zqZ/)

我意识到这`$.get()`只是`$.ajax()`被剥夺了，但我怎么知道我是否可以在回调中使用外部函数？

**编辑：关闭这个，这是一个个人错误。**

我调用的文件有一个`header('Content-type: application/xml');`，所以 jQuery 设置的“智能”数据类型是“xml”，而它应该设置为“html”。当您使用时，我的代码适用`$.get()`：

```
function outside() {
    alert('get');
}
$.get('foo.txt', function(data) {
    outside();
},
"html"
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:56:05.310

是的你可以。您的 jsfiddle 失败，因为对 'foo.txt' 的请求返回错误。这是一个工作 jsfiddle 的示例：http: [//jsfiddle.net/pXSmj/](http://jsfiddle.net/pXSmj/)

```
var speak = function() { alert('hi'); }

$(document).ready(function() {
    $.get('../img/logo.png', function(data) {
        speak();
    });
});​ 
```

这是您的 jsfiddle 的更新，`outside`被称为 foo.txt 请求失败：http: [//jsfiddle.net/d69vz/1/](http://jsfiddle.net/d69vz/1/)

# asp.net - 如何对用户控件应用验证？

> ID：13758287
> 
> 赞同：0
> 
> 时间：2012-12-07T06:50:06.723
> 
> 标签：asp.net

我有一个 ascx 文件，其中放置了以下代码：

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="ajaxToolkit" %>
<asp:TextBox ID="textboxDate" runat="server" CssClass="FieldValue" MaxLength="10"
Columns="12" autocomplete="off" Style="padding-right: 18px; border: 1px solid #567890;" />
<ajaxToolkit:CalendarExtender ID="calendarExtenderDate" runat="server" TargetControlID="textboxDate"
PopupButtonID="textboxDate" />

<asp:RequiredFieldValidator runat="server" Enabled="false" ControlToValidate="textboxDate"
ID="valRequired" ErrorMessage="* This field is required" EnableClientScript="true"
Display="Dynamic" Text="*" />

<asp:CompareValidator runat="server" CssClass="error" ControlToValidate="textboxDate"
Operator="DataTypeCheck" Display="Dynamic" Type="Date" ID="valValidDate" ErrorMessage="* Date is in an incorrect format"
Text="*" EnableClientScript="true" />

<asp:CustomValidator CssClass="error" Text="*" runat="server" ID="rangeVal" Display="dynamic" OnServerValidate="rangeVal_Validate" /> 
```

我以我的一种形式调用此用户控件

```
 <uc:DateControl ID="dateControlStart" runat="server" RequiredErrorMessage="please enter date" /> 
```

所以，我想如果用户选择任何小于或等于当前日期的日期，应该会出现一个错误，说“不正确的错误”。我想在客户端的 aspx 页面中进行此验证，而不是在用户控制中。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:19:59.363

```
<asp:CustomValidator ID="uxDateFormatValidator" runat="server" ControlToValidate="dateControlStart$textboxDate"
Display="Static" ErrorMessage="Error" ClientValidationFunction="ValidateDateAgainstMinDate"
 />

 function ValidateDateAgainstMinDate(oSrc, args) {
var dateParts = args.Value.split('.');// which separator do you use?
if (dateParts.length >= 3) {
    var day = dateParts[2];
    var month = dateParts[1] - 1; //this one rocks
    var year = dateParts[0];
    var date = new Date(year, month, day);
    var minDate = new Date(1900, 0, 1); // use just new Date(); for today
    args.IsValid = date >= minDate
        && date.getDate() == day
        && date.getMonth() == month
        && date.getFullYear() == year;
}
else {
    args.IsValid = false;
} 
```

}

CustomValidator 必须与您的 uc:DateControl 一起插入您的页面

# r - 在R中获取x截取给定数据点

> ID：13758292
> 
> 赞同：1
> 
> 时间：2012-12-07T06:50:32.450
> 
> 标签：r, math, intercept

给出一些像这样绘制的数据点（如下），我将如何获取在特定 y 处相交的相交值。例如，如果我要绘制水平线 y=1000，它会与绘图上的哪些 x 值相交（作为数组）？

我的数据看起来像这样

```
x <- c(1, 2, 3, 4, ..., )
y <- c(1000, 1200, 900, 700, ..., ) 
```

![图1](../Images/2181d00a5b7522ff003f23a0ab23471a.png) 谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T07:04:10.120

要查看函数 y=f(x)（我假设它是连续的）与水平线 y=h 相交的位置，您可以查看 f(x)-h 中的符号变化。这个符号改变的位置是函数越界的位置。除非您了解有关函数的更多详细信息，以便可以在数据点之间进行插值，否则这可能是您所希望的最好结果。

要计算 R 中的符号变化，您可以使用如下代码：

```
h <- 1000
d <- y - h
signChanges <- (d[1:(length(d)-1)] * d[2:length(d)]) <= 0 
```

结果数组将比您的数组少一个元素，因为每个元素对应于两个相邻值`x`之间的间隔。`x`如果您的数据点*正好*在线，则该数组将包含两个后续`TRUE`值。如果这是一个问题，那么你可以插入

```
d <- ifelse(d == 0, 1, d) 
```

这会使数据点*稍微*偏离直线。

要获得对应`x`的值，可以使用每个区间的中心：

```
x2 <- (x[c(signChanges, FALSE)] + x[c(FALSE, signChanges)])/2 
```

或者您可以在两个相邻数据点之间执行线性插值：

```
left <- c(signChanges, FALSE)
right <- c(FALSE, signChanges)
t <- (h - y[left])/(y[right] - y[left])
x2 <- (1 - t)*x[left] + t*x[right] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T07:33:00.680

在没有平滑的情况下找到阈值交叉很少会给出明确定义的值。玩以下游戏：

```
data(sunspots)
sunspots = as.numeric(sunspots)
smoothover = 21 # Try smaller values here to see the failure
y = filter(sunspots,rep(1/smoothover,smoothover),circular=TRUE)
plot(y)
thresh =30
abline(h=thresh)
cross = which(diff(sign(y-thresh))!=0)-1
rug(cross) 
```

如果您想获得“精确”的阈值交叉（如果平滑如此重要，那么精确是什么？）您应该首先使用上述近似来获得交叉点周围的区域，然后进行二次或线性插值，例如使用 5 个点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T07:36:58.663

要获得实际的交点，您可以使用几个 R 的空间包：

```
library(sp)
library(rgeos)  ## for gIntersection()

## Wrap your line up as a SpatialLines object
x <- c(1, 2, 3, 4)
y <- c(1000, 1200, 900, 700)
SL1 <- SpatialLines(list(Lines(Line(cbind(x,y)), "A")))

## Create a horizontal SpatialLines object
SL2 <- SpatialLines(list(Lines(Line(cbind(range(x), 1010)), "B")))

## Find their point(s) of intersection
coordinates(gIntersection(SL1, SL2))
#          x    y
# 1 1.050000 1010
# 1 2.633333 1010 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T07:04:03.887

我会把你的数据放在一个单一的`data.frame`：

```
dat = data.frame(x, y) 
```

然后，您可以对数据集进行子集化以仅保留以下值`y == 1000`：

```
dat[dat$y == 1000,] 
```

请注意，这仅在`y`您使用的值实际上在数据集中时才有效。如果您 `y`在数据集中选择一个值（例如`y = 996.345`），您将不得不对时间序列进行一些插值，请参见例如[this SO post](https://stackoverflow.com/questions/4964255/interpolate-missing-values-in-a-time-series-with-a-seasonal-cycle)，或通过拟合一些样条函数（这可能在范围上效果最好`x = [150,900]`）。

# java - 如何使用 GradientPaint 每秒绘制 jpanel？

> ID：13758293
> 
> 赞同：-3
> 
> 时间：2012-12-07T06:50:37.490
> 
> 标签：java, swing, jpanel, paintcomponent

我有两个类.. 类面板扩展 JPanel，

和另一个控制该 jpanel 油漆每秒的类..（我使用 swing.Timer）

我下面的代码是失败的

继承人我到目前为止尝试..

类面板扩展 JPanel ：

```
@Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Control control = new Control(this,g);
        repaint();
    } 
```

类控制：

```
public class Control implements ActionListener{

    private int XX=0;
    private int YY=0;

    private Graphics2D g2;
    private JPanel panel;

    Timer tim = new Timer(1000, this);

    public Control(JPanel el,Graphics g) {

        this.g2=(Graphics2D)g.create();
        this.panel=el;
        tim.start();
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        XX++;
        YY++;

    /////////////////////
    //my priority 
        GradientPaint gp = new GradientPaint(XX, YY, Color.BLUE, panel.getWidth(), panel.getHeight(), Color.WHITE);
    //////////////////////

        g2.setPaint(gp);
        g2.fillRect(0, 0, panel.getWidth(), panel.getHeight());
        panel.repaint();
    }
} 
```

我需要每秒改变 GradientPaint 的起点

然后每秒在 jpanel 中绘制它

我该怎么办？

谢谢 ..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T07:10:34.563

1.  不要在/ ( )`Object`内部创建任何东西，在之前准备 this/these (s) （您可以将元素放入 Array 到内部并仅在内部循环），这个想法在运行时创建一堆 Object，直到 NPE 成为`paint``paintComponent``Control control = new Control(this,g);``Object``paintComponent`

2.  您的代码设计错误，必须阅读[Oracles 2D 图形教程](http://docs.oracle.com/javase/tutorial/2d/index.html)，[这里有大量示例](https://stackoverflow.com/questions/tagged/paintcomponent)

3.  必须`PreferredSize`覆盖`JPanel`

4.  你也可以创建[BufferedImage](https://stackoverflow.com/a/7944388/714968)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T07:25:03.030

mKorbel 所说的一切以及...

*   永远不要维护`Graphics`对绘制子系统传递给您的上下文的引用。它在油漆周期之间变化
*   永远不要从方法中调用`repaint`或任何可能导致重绘请求的`paintXxx`方法，这将导致重绘管理器在未来某个时间安排新的重绘并最终循环你的 CPU 100%
*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)
*   [Swing 中的自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [如何摆动计时器](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

```
public class TestPaintTimer {

    public static void main(String[] args) {
        new TestPaintTimer();
    }

    public TestPaintTimer() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new GradientPanel());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

    public class GradientPanel extends JPanel {

        private Color startColor = Color.RED;
        private Color endColor = Color.BLUE;
        private float progress = 0f;
        private float direction = 0.1f;

        public GradientPanel() {
            Timer timer = new Timer(125, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    progress += direction;
                    if (progress > 1f) {
                        direction *= -1;
                        progress = 1f;
                    } else if (progress < 0) {
                        direction *= -1;
                        progress = 0f;
                    }

                    startColor = calculateProgress(Color.RED, Color.BLUE, progress);
                    endColor = calculateProgress(Color.BLUE, Color.RED, progress);

                    repaint();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            LinearGradientPaint lgp = new LinearGradientPaint(
                            new Point(0, 0),
                            new Point(0, getHeight()),
                            new float[]{0f, 1f},
                            new Color[]{startColor, endColor});
            g2d.setPaint(lgp);
            g2d.fill(new Rectangle(getWidth(), getHeight()));
            g2d.dispose();
        }

        public Color calculateProgress(Color startValue, Color endValue, float fraction) {
            int sRed = startValue.getRed();
            int sGreen = startValue.getGreen();
            int sBlue = startValue.getBlue();
            int sAlpha = startValue.getAlpha();

            int tRed = endValue.getRed();
            int tGreen = endValue.getGreen();
            int tBlue = endValue.getBlue();
            int tAlpha = endValue.getAlpha();

            int red = calculateProgress(sRed, tRed, fraction);
            int green = calculateProgress(sGreen, tGreen, fraction);
            int blue = calculateProgress(sBlue, tBlue, fraction);
            int alpha = calculateProgress(sAlpha, tAlpha, fraction);

            return new Color(red, green, blue, alpha);
        }

        public int calculateProgress(int startValue, int endValue, float fraction) {
            int value = 0;
            int distance = endValue - startValue;
//        value = Math.round((float)distance * fraction);
            value = (int) ((float) distance * fraction);
            value += startValue;

            return value;
        }

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T12:27:06.590

多亏了 mKorbel 和 MadProgrammer，我终于可以解决它了。

这是我要找的代码..

回应 mKorbel & madProgrammer 的回答

```
 public class again extends JPanel{
    int xx=0;
    int xxMax;
    String go = "RIGHT";

    Timer t;
    ActionListener listener = new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {
            if(go.equals("RIGHT")){
                if(xx>=xxMax){go="LEFT";};
                xx += 10;

            }else if(go.equals("LEFT")){
                if(xx<=0){go="RIGHT";};
                xx -= 10;

            }
            repaint();
        }};

    public again() {
        t = new Timer(1, listener);
        t.start();
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2 = (Graphics2D)g.create();
        GradientPaint gp = new GradientPaint(0, 0, Color.black, xx, getHeight(), Color.WHITE);
        g2.setPaint(gp);
        g2.fillRect(0, 0, getWidth(), getHeight());
        g2.dispose();
        xxMax=getWidth();
    }
}

class Frame extends JFrame{

    public Frame(){
        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        add(new again());
        setVisible(true);
    }

    public static void main (String[]args){
        new Frame().setExtendedState(MAXIMIZED_BOTH);
    }
} 
```

# c# - Windows Mobile 设备是否可以检测到它何时停靠？

> ID：13758294
> 
> 赞同：0
> 
> 时间：2012-12-07T06:50:39.797
> 
> 标签：c#, windows-mobile, dock

我有一个应用程序，我需要知道它运行的 Windows 移动设备何时停靠，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T14:18:40.713

除了 Thorsten 的建议，您还可以查找`NOTIFICATION_EVENT_RS232_DETECTED`通知。当 USB 很少见时，事件名称是从后面遗留下来的，所以忽略它说 RS232 的事实，即使使用 USB，也会发生 RS232 事件。

您可以使用`CeRunAppAtEvent`挂钩通知。同样，忽略 API 的名称所暗示的内容 - 您也可以使用它来设置可以 WaitForSingleObject 的系统事件。

有关详细信息和实施，[请参阅此问题的答案。](https://stackoverflow.com/questions/6227805/win-ce-5-0-activesync-connect-disconnect)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T09:19:24.633

当您可以解析 PPP_PEER 机器名称时，Windows Mobile 设备即被对接，该名称可用于设备与其对接的主机之间的 TCP 通信。但是，仅当底座实际连接到 PC 时才适用。

```
public static bool ActiveSyncConnected
{
    get
    {
        try
        {
            IPHostEntry entry = Dns.GetHostEntry("PPP_PEER");
            return true;
        }
        catch
        {
            return false;
        }
    }
} 
```

另一种解决方案（至少对于工业设备而言）是检查 AC 线路状态，即它当前是否连接到电源适配器。无论设备是否连接到 PC，当设备处于支架状态时都是如此。

```
public bool CurrentlyConnectedToACLine
{
    get
    {
        SYSTEM_POWER_STATUS_EX status = new SYSTEM_POWER_STATUS_EX();
        if (GetSystemPowerStatusEx(status, true))
            return status.ACLineStatus != 0;
        else
            return false;
    }
}

[StructLayout(LayoutKind.Sequential)]
internal class SYSTEM_POWER_STATUS_EX
{
    public byte ACLineStatus = 0;
    public byte BatteryFlag = 0;
    public byte BatteryLifePercent = 0;
    public byte Reserved1 = 0;
    public uint BatteryLifeTime = 0;
    public uint BatteryFullLifeTime = 0;
    public byte Reserved2 = 0;
    public byte BackupBatteryFlag = 0;
    public byte BackupBatteryLifePercent = 0;
    public byte Reserved3 = 0;
    public uint BackupBatteryLifeTime = 0;
    public uint BackupBatteryFullLifeTime = 0;
}

[DllImport("coredll.dll")]
private static extern bool GetSystemPowerStatusEx(SYSTEM_POWER_STATUS_EX lpSystemPowerStatus, bool fUpdate); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-09T07:22:39.580

以上所有答案都是正确的，但使用不同的方法。问题是，为什么您的应用需要知道设备是否已对接。

如果要使用 PC ActiveSync Paasthru TCP/IP 连接，则最好使用 PPP_PEER 解决方案。

如果您只需要知道，如果设备是外部供电的，那么最好使用 PowerstatusEx 和 AC_LINE。这也可以通过电源通知队列使用，因此应用程序不需要轮询状态（另请参见 NOTIFICATION_EVENT_RS232_DETECTED 方法）。

如果您只需要知道设备已被固定，则最好使用 NOTIFICATION_EVENT_RS232_DETECTED 方法。例如，如果您有一个车载底座，并且想要开始与连接到底座的车载黑盒通信。

您会看到，尽管所有解决方案乍一看都或多或少相同，但它们的意图却不同。

# core-data - 如何在绘制图形时合并数据

> ID：13758296
> 
> 赞同：-3
> 
> 时间：2012-12-07T06:50:42.100
> 
> 标签：core-data, xcode4.5

谁能告诉我如何在 xcode 中合并两个文件，因为我已经为“线图”和“条形图”创建了两个数据，现在我需要在同一个图表上显示两个数据的视图？

***如何在 XCode 中合并条形图和折线图？没有核心情节？***

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:44:17.180

只需在图表上绘制您的两个“数据”。如果您的图表使用数组来保存其数据，请将第二组数据附加到第一组数据。

```
finalDataArray = [firstDataArray 
                      arrayByAddingObjectsFromArray:secondDataArray]; 
```

# php - 如何将多个变量从php传递到python脚本

> ID：13758299
> 
> 赞同：5
> 
> 时间：2012-12-07T06:50:52.140
> 
> 标签：php, python, command-line-interface

我需要关于这个 xx 的帮助

假设我的 php 有 3 个变量

```
<?php
$var1 = "1";
$var2 = "2";
$var3 = "3";
?> 
```

所以在“exec”部分我有点卡住和困惑，我如何将这 3 个变量传递到我的 python 脚本中，以及如何在我的 python 脚本中接收这 3 个变量？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T06:54:58.687

您只需将它们作为命令行参数传递：

```
exec ( "/path/to/python/script.py $var1 $var2 $var3" ); 
```

然后在您的 Python 脚本中，您可以像这样阅读它们：

```
import sys

print sys.argv[1] # first parameter
print sys.argv[2] # second parameter
print sys.argv[3] # third parameter 
```

顺便说一句：`sys.argv[0]`包含脚本的名称，这就是您以 index 开头的原因`1`。

[http://www.tutorialspoint.com/python/python_command_line_arguments.htm](http://www.tutorialspoint.com/python/python_command_line_arguments.htm)

# iphone - 如何在另一个表格对象中显示选定单元格的子单元格？

> ID：13758306
> 
> 赞同：0
> 
> 时间：2012-12-07T06:51:48.553
> 
> 标签：iphone, objective-c, ios, xcode, cocoa

我有一个分组表视图，每个组中有多个单元格。我想要的是，当用户选择任何特定单元格时；我想显示特定选定单元格的子元素。

例如：如果用户选择`"A"`然后我应该显示`"A1","A2","A3"... Or "B"`然后它应该显示`"B1","B2","B3"...**`在另一个视图控制器的表格对象中。**

对子值进行硬编码没有限制。我的**segue**从表视图连接到另一个视图控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:58:06.110

您需要使用折叠表的概念

在此处查看展开*`step by step explanation`*和折叠部分

[展开部分](http://www.cocoanetics.com/2011/03/expandingcollapsing-tableview-sections/)

你也可以*`sample code`*在这里查看。

[示例代码](http://developer.apple.com/library/ios/#samplecode/TableViewUpdates/Introduction/Intro.html)

享受编程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:06:02.247

它也称为嵌套表视图。参考这个[博客](http://dotnet.kapenilattex.com/?p=656) ，示例代码在[这里](https://github.com/LaTtEX/MyTreeViewPrototype)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T07:12:10.260

在您的第二个视图控制器中创建一个属性

```
@property (nonatomic) NSIndexPath *parentIndex; 
```

并将其合成到 .m 文件中

```
@synthesize parentIndex; 
```

在您的第一个 tableview 控制器中创建一个 ivar

```
NSIndexPath *passIndexPath; 
```

并在您的表委托中

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    passIndexPath = indexPath;
   [self performSegueWithIdentifier:@"push_SecondTableViewController" sender:self];
} 
```

现在实现以下功能，它会在您触发 segue 时正确运行

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

    if ([[segue identifier] isEqualToString:@"push_SecondTableViewController"])
    {
      Your_SecondViewController *viewController = [segue destinationViewController];

      viewController.parentIndex = passIndexPath; 
     //Here we are passing the indexpath of the selected cell so now you can set the 
     //data of the table in second view controller
    }
} 
```

现在在您的 SecondView 控制器中，借助您知道的 parentIndex，选择了哪个部分的哪一行，您可以相应地显示数据

同样的方式，您甚至可以为您的子单元格传递数据数组。

希望对你有帮助，

# android - 设置背景时出现 OutOfMemory 错误

> ID：13758309
> 
> 赞同：0
> 
> 时间：2012-12-07T06:52:01.800
> 
> 标签：android, android-layout, bitmap, out-of-memory, bitmapfactory

我正在尝试将图像设置为视图（PiePlot）的背景，但我遇到了`OutOfMemory`异常。

Bg图像大小为170kb。
我尝试了 5kb 的背景样本图像，它毫无例外地工作。

我试过以下：

```
@Override
protected void onDestroy() {
    super.onDestroy();

    unbindDrawables(mView);
    System.gc();
}

private void unbindDrawables(View view) {
    if (view.getBackground() != null) {
        view.getBackground().setCallback(null);
    }
    if (view instanceof ViewGroup) {
        for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
            unbindDrawables(((ViewGroup) view).getChildAt(i));
        }
        ((ViewGroup) view).removeAllViews();
    }
} 
```

但这在`onDestroy()`调用时很有用。但是在启动应用程序时，这将不起作用，因此应用程序崩溃。

我也试过这个：

```
BitmapDrawable bitmapDrawable = (BitmapDrawable) ctx.getResources().getDrawable(R.drawable.bg2);
BitmapFactory.Options bitopt = new BitmapFactory.Options();
bitopt.inSampleSize = 10;
plot.setBackgroundImage(bitmapDrawable); //plot is PiePlot object 
```

但同样的结果，即应用程序崩溃。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:54:09.277

试试把这个功能...

```
public static Bitmap decodeFile(File f,int WIDTH,int HIGHT){
     try {
         //Decode image size
         BitmapFactory.Options o = new BitmapFactory.Options();
         o.inJustDecodeBounds = true;
         BitmapFactory.decodeStream(new FileInputStream(f),null,o);

         //The new size we want to scale to
         final int REQUIRED_WIDTH=WIDTH;
         final int REQUIRED_HIGHT=HIGHT;
         //Find the correct scale value. It should be the power of 2.
         int scale=1;
         while(o.outWidth/scale/2>=REQUIRED_WIDTH && o.outHeight/scale/2>=REQUIRED_HIGHT)
             scale*=2;

         //Decode with inSampleSize
         BitmapFactory.Options o2 = new BitmapFactory.Options();
         o2.inSampleSize=scale;
         return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
     } catch (FileNotFoundException e) {}
     return null;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T06:59:44.927

只需在你的图像上实现这个......它会将你的图像缩小 4 倍

```
public static Bitmap getImage(byte[] image) {
        BitmapFactory.Options config = new BitmapFactory.Options();
        config.inPreferredConfig = Bitmap.Config.RGB_565;
        config.inSampleSize = 4;
        return BitmapFactory.decodeByteArray(image, 0, image.length,config);

    } 
```

# jquery - 从另一个 jquery 文件中调用 jquery 插件

> ID：13758311
> 
> 赞同：0
> 
> 时间：2012-12-07T06:52:15.313
> 
> 标签：jquery, resizable

我使用了一个插件来调整我的 html 表中的列的大小。我正在使用 http://quocity.com/colresizable/ 上提供 的[插件](http://quocity.com/colresizable/)

```
$(".resizable").colResizable(); 
```

它工作完美。我的桌子是动态的，需要不断刷新。问题是插件第一次运行得很好，但是在重新加载/刷新任何表时，调整大小不起作用。现在我正在寻找一个解决方案，以解决如何在每次刷新表时再次初始化插件，以便每次刷新表时再次使列可调整大小。如果有任何不明白的地方，请告诉我。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:24:36.133

`.colResizable()`添加新表后调用对我有用。

```
$(function() {

    $("#addtable").click(function() {
        if ($("#sample3").length > 0) {
           $("#sample3").colResizable({
               disable: true
           });
        }
        $("#newtable").html('<table id="sample3" width="100%" border="0" cellpadding="0" cellspacing="0"><tr><th>header</th><th>header</th><th>header</th></tr><tr><td class="left">cell</td><td>cell</td><td class="right">cell</td></tr><tr><td class="left">cell</td><td>cell</td><td class="right">cell</td></tr><tr><td class="left bottom">cell</td><td class="bottom">cell</td><td class="bottom right">cell</td></tr></table>');
        $("#sample3").colResizable({
            liveDrag: true,
            gripInnerHtml: "<div class='grip'></div>",
            draggingClass: "dragging"
        });
    });

});​ 
```

见[小提琴](http://jsfiddle.net/barmar/bmdjC/4/)

# java - 如何在 ubuntu 启动时启动 java (.jar) 应用程序

> ID：13758317
> 
> 赞同：-3
> 
> 时间：2012-12-07T06:52:41.707
> 
> 标签：java, linux, ubuntu, daemon

我制作了一个简单的java应用程序，它有一个提交按钮单击应用程序开始执行。我必须在Ubuntu系统上部署它。现在先生，根据我的需要，我必须在系统启动后自动开始执行而不点击任何提交按钮。

我将我的应用程序保存在 Ubuntu 桌面上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T06:56:06.923

检查此链接以查看如何在 Ubuntu 启动期间运行脚本 [如何在 Ubuntu 启动时运行脚本？](https://stackoverflow.com/questions/8339555/how-to-run-a-script-at-the-start-up-of-ubuntu)

该脚本可以是 java -jar jarname 调用。当然必须安装java。

# php - 单一数组的简单分页

> ID：13758319
> 
> 赞同：1
> 
> 时间：2012-12-07T06:52:49.013
> 
> 标签：php, arrays

我正在尝试从单个数组进行分页

```
$input = Array
        (
            [0] => 'A',
            [1] => 'B',
            [2] => 'C'
            ...

        ) 
```

例子`$show_per_page=2;`

在第 1 页

```
paging($input,$page, $show_per_page);

$output = Array(
                [0]=>'A',
                [1]=>'B'
        ); 
```

在第 2 页

```
$output = Array(                
                [2]=>'B'
        ); 
```

我知道`array_slice`但它不适合这种情况。有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T06:57:46.197

是的，`array_slice`正是你想要的。这是最有效的方法。这就是你需要的。

```
function get_page(array $input, $pageNum, $perPage) {
    $start = ($pageNum-1) * $perPage;
    $end = $start + $perPage;
    $count = count($input);

    // Conditionally return results
    if ($start < 0 || $count <= $start) {
        // Page is out of range
        return array(); 
    } else if ($count <= $end) {
        // Partially-filled page
        return array_slice($input, $start);
    } else {
        // Full page 
        return array_slice($input, $start, $end - $start);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-22T16:37:42.530

史蒂文的回答会起作用，但这`if/elseif/else`是不必要的（至少在 PHP 5.3 及更高版本中——也许在旧版本中需要它）：

```
/**
 * @param array $array Array to be paged
 * @param int $pageNumber One-based pageNumber to return
 * @param int $pageSize Desired page size
 * @return array
 */
public function getPage($array, $pageNumber, $pageSize)
{
    $start = --$pageNumber * $pageSize;
    return array_slice($array, $start, $pageSize);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-28T09:35:43.380

试试这个，，

```
function paging($data, $limit, $page){
        $jmlData = count($data);
        if(!empty($limit)){
            $totalHalaman = ceil($jmlData/$limit);  
        }else{
            $totalHalaman = 1;
        }

        if(!empty($page) && !empty($limit)){
            $start = ($page - 1) * $limit;
        }else{
            $start = 0;
        }

        $end = $start + $limit;

        if($start < 0 || $totalHalaman < $page){
            return array();
        } elseif($start == 0 && $limit == 0){
            return array_slice($data, $totalHalaman);
        }else{
            return array_slice($data, $start, $end - $start);
        }
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-12-11T23:01:08.220

如果您使用 PHP 5.x

```
$pages = array_chunk($goodfiles, 5); 
```

结果：

```
Array
(
[0] => Array
    (
        [0] => About_RFSB06WEB.flv
        [1] => Kids_Excited.flv
        [2] => Kids_Start_Run.flv
        [3] => Kids_start.jpg
        [4] => Kids_start_sm.jpg
    )

[1] => Array
    (
        [0] => image01.jpg
        [1] => image02.jpg
        [2] => image03.jpg
        [3] => image04.jpg
        [4] => image05.jpg        
    )

[2] => Array
    (
        [0] => image06.jpg
        [1] => image07.jpg
        [2] => image08.jpg
    )
) 
```

# logging - WSO2 ESB 中有哪些不同的日志文件？

> ID：13758323
> 
> 赞同：5
> 
> 时间：2012-12-07T06:53:21.677
> 
> 标签：logging, wso2, wso2esb

在 WSO2 ESB 中，我在存储库/日志目录中有几个日志文件。如果一切正常，我应该使用哪一个来进行日常控制？

这里是日志文件列表： ![在此处输入图像描述](../Images/b782fc9191bf43072fa51a6c51e88f0f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T10:19:06.693

好吧，我现在经历了以下几点：

*   **http_access_xxxx.log**：包含任何 HTTP 访问的日志（在我的例子中只有 carbon admin jsp）
*   **wso2carbon.log**：包含应用服务器的真实日志输出（最重要的一个）
*   **wso2carbon-trace-messages.log**：始终为空 - 不知道它的用途
*   **wso2-esb-error.log**：在这里再次列出来自 wso2carbon.log 的所有 WARNING 和 ERROR 消息 - 没有 INFO 或 DEBUG 消息
*   **wso2-esb-service.log**：包含在 Synapse 代理或序列中使用“日志”中介生成的所有日志
*   **wso2-esb-trace.log**：始终为空 - 不知道它的用途

好吧，只需在**wso2carbon.log**文件中添加您的监控，您就拥有了一切必要的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T08:05:10.690

WSO2carbon.log 包含服务器的大部分日志（服务日志、错误日志等）。您可以将其用作维护的主要日志。http_acces 日志包含关于 Apache 的访问日志。服务日志具有单独的 ESB 服务日志。

# .net - 如何创建需要哈希表的函数参数？

> ID：13758333
> 
> 赞同：0
> 
> 时间：2012-12-07T06:53:55.157
> 
> 标签：.net, powershell, hashtable

我想创建一个需要哈希表的函数。

我怎样才能做到这一点？

```
function ([string]foo, [#what to write here]myHAshTable) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:13:10.577

我认为您不需要指定类型（即 [hashtable] - 只要您在函数中正确引用哈希，您就可以传递变量。例如，传递哈希表参数 $hash：

```
 foreach ($key in $hash.Keys){
         Write-Host $hash[$key]
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T07:11:09.487

这？

```
function ([string]$foo, [hashtable]$myHAshTable) 
```

# asp.net-mvc - MVC 4 简单的成员资格。如何检查是否有人登录

> ID：13758337
> 
> 赞同：2
> 
> 时间：2012-12-07T06:54:11.443
> 
> 标签：asp.net-mvc, membership, logged

我是 mvc 4 的新手，不能完全理解简单的成员资格是如何工作的。完成所有配置后，我将此代码放入 AccountController 以查看它是如何工作的以及它是否正常工作

```
string UserName1 = WebSecurity.CurrentUserName;
bool LoginResult= WebSecurity.Login("admin", "111111");
string UserName2 = WebSecurity.CurrentUserName;
WebSecurity.Logout(); 
```

当我运行调试器时，我看到一切都完成了

```
UserName1 = "" 
LoginResult = true 
UserName2 = "" 
```

一切都很好，除了 UserName2。为什么它是空的？登录是 susss... 我在 WebSecurity 和 WebSecurity.IsAuthentificated 上看不到 UserID 为什么登录成功但 WebSecurity 根本不显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:51:36.660

登录不会像您认为的那样做。它不会立即设置当前用户，而是在用户的 Web 浏览器上设置一个 cookie，并且在下一页刷新时，asp.net 将识别该 cookie 并向他们提供经过身份验证的请求。

这并不特定于简单的成员资格，这就是所有身份验证在 asp.net 中的工作方式。一旦通过身份验证，必须刷新页面才能识别登录。

# chef-infra - 从工作站运行厨师客户端

> ID：13758341
> 
> 赞同：4
> 
> 时间：2012-12-07T06:54:44.267
> 
> 标签：chef-infra

我已经在我的一个 ubuntu 12.04 操作系统上设置了一个厨师服务器。第二台 ubuntu 机器运行着一个 Chef 客户端，我将其用作工作站来管理其他节点。

因此，让我们决定如下命名： Chef Server : S Workstation : W Chef Nodes N1, N2 ...

我已经使用厨师引导程序从工作站 W 引导厨师节点 N1，如下所示[http://wiki.opscode.com/display/chef/Client+Bootstrap+Fast+Start+Guide](http://wiki.opscode.com/display/chef/Client+Bootstrap+Fast+Start+Guide)

在此之后，我尝试从我的工作站 W 在 N1 上运行 chef-client 命令。我正在使用以下命令：

```
knife ssh name:chefNode -x ubuntu -P password "sudo chef-client" 
```

这会引发以下错误：错误：服务器返回错误[http://ec2-XX-XX-XX-XXX.compute-1.amazonaws.com:4000/search/node?=name:chefNode&sort=X_CHEF_id_CHEF_X%20asc&start= 0](http://ec2-XX-XX-XX-XXX.compute-1.amazonaws.com:4000/search/node?=name:chefNode&sort=X_CHEF_id_CHEF_X%20asc&start=0) &rows=1000，在 58 秒内重试 5/5 错误：内部服务器错误

任何帮助或线索表示赞赏。请回答

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:16:18.247

看看你的rabbitmq-server。看看它是否配置正确。

要配置运行这些

rabbitmqctl add_vhost /chef

rabbitmqctl add_user 厨师测试

rabbitmqctl set_permissions -p /chef chef ". *" ".* " ".*"'

查看

[http://wiki.opscode.com/display/chef/Chef+Indexer](http://wiki.opscode.com/display/chef/Chef+Indexer)

如果您不是 root 用户，请使用 sudo。

另外在您的 sever.rb 文件中添加这一行，该文件应该在您的 /etc/chef 文件夹中

amqp_pass “测试”

重启rabbitmq-server服务，一切正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T23:08:27.287

“knife ssh”命令使用 chef 的*搜索*功能。@Manak Wadhwa 建议的关于[Chef Indexer的链接说：](http://wiki.opscode.com/display/chef/Chef+Indexer)

> *Chef Indexer 由 RabbitMQ 消息队列、chef-expander（从队列中提取消息并对其进行格式化）和 chef-solr（围绕 Solr 的精简包装器）组成。*

因此，您还可以检查 chef-solr 和 chef-expander 是否都在工作和运行。验证所有配置文件是否具有每个组件的正确服务器 IP/端口：

- [Chef 服务器](http://wiki.opscode.com/display/chef/Chef+Server)
和
- [Chef 配置设置](http://wiki.opscode.com/display/chef/Chef+Configuration+Settings)（检查*solr.rb*和*server.rb*）

尝试从您的工作站进行简单搜索，例如： `knife search node "*:*"`甚至`knife status`（刀状态使用搜索）获取所有节点的列表。我更喜欢刀状态，因为它会返回所有节点的列表，而刀搜索会将所有节点作为对象返回，如果你有很多节点，它不会有太大帮助。无论如何，如果结果是您拥有的所有节点的列表，那么搜索就可以正常工作。如果是这种情况，那么接下来我会尝试使用以下方法重建索引：
`knife index rebuild -y`从工作站或更改 solrconfig.xml 中的 maxFieldLength，如下文 (2) 中更详细描述的那样。

用于检查搜索故障排除的另外两个链接是：

1\. [[chef] 节点未显示在“刀状态”](http://lists.opscode.com/sympa/arc/chef/2013-01/msg00415.html)中，操作码列表中的人员尝试使用`knife index rebuild -y`命令重建搜索索引并检查 chef-solr 相关目录权限。

2.[厨师-2346](http://tickets.opscode.com/browse/CHEF-2346)他们在 solr 中讨论了生成大量索引数据的系统的 maxFieldLength。正如您可能已经知道的那样，索引数据是从 ohai 和所有属性、节点、数据包等生成的数据。我遇到的情况是我的所有 Windows 系统，就像其他大多数人一样。（我还提供此链接的原因是因为我无法估计您的索引数据量。）例如 LDAP 可以产生大量数据。当然，如果您需要大量数据，您可以禁用一些不需要的 ohai 插件。[（检查禁用 Ohai 插件。）](https://wiki.opscode.com/display/chef/Disabling+Ohai+Plugins)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T11:22:31.557

我发现，在使用 Chef Server & Co 调试问题时，一个好的做法是查看服务器的日志。对于 Chef Server 11，您只需使用

```
$ sudo chef-server-ctl tail 
```

或者

```
$ sudo chef-server-ctl [<service name>] tail 
```

对于这个特定的问题，我会做

```
$ sudo chef-server-ctl erchef tail 
```

您可以在 msg=[...] 下查看对请求的响应和有关失败的简短消息

另外，对于跑刀时遇到的调试问题，我会设置

```
log_level                :debug 
```

在刀.rb。

# objective-c - 填充 iOS TableView-EXC BAD_ACCESS 代码 = 1 错误

> ID：13758348
> 
> 赞同：0
> 
> 时间：2012-12-07T06:55:26.907
> 
> 标签：objective-c, ios, tableview, exc-bad-access

出于某种原因，加载此视图时出现上述错误。在我之前的视图中填充 tableView 行的代码相同，所以我不知道这个代码可能出了什么问题——它是完全相同的代码。当我转换到这个视图时，应用程序崩溃了。它在正确崩溃之前设法对 self.tableRows 中的类别进行 NSLog 记录，因此 tableRows 中的存储似乎不是问题。它在计算行数的行上崩溃（返回 self.tableRows.count）。我觉得这个错误与无法访问 tableRows 有关，但我对 iOS 很陌生。谢谢你的帮助！这是我即将到期的大学课程的一个项目，因此非常感谢任何帮助。

```
#import "DivisionsViewController.h"
#import "TeamsViewController.h"

@implementation DivisionsViewController

@synthesize tableRows = _tableRows;
@synthesize currentKey = _currentKey;

NSMutableArray* temp;

#pragma mark - Table view data source

- (void)viewDidLoad
{
    [super viewDidLoad];

    _currentKey = @"default";

    //temporary- trying to populate TableView from JSON

    int i = -1;
    self.tableRows = [NSMutableArray array];
    temp = [[NSMutableArray alloc] init];
    for(NSDictionary *dict in self.divisions){
        NSString *category = [dict objectForKey:@"category"];
        if (self.currentKey != category){
            [self.tableRows addObject:category];
            [temp addObject:[[NSMutableArray alloc] init]];
            self.currentKey = category;
            NSLog(@"table value %@", [self.tableRows lastObject]);
            i++;
        }
        [[temp objectAtIndex:i] addObject:dict];
    }
    for (NSString* category in self.tableRows){
        NSLog(@"category: %@", category);
    }
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return self.tableRows.count;        

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"DivisionCell" forIndexPath:indexPath];
    cell.textLabel.text = [self.tableRows objectAtIndex:indexPath.row];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:04:57.510

您是否尝试过 NSLog 您的表格行数？尝试在它返回 numberOfRows 之前对其进行 NSlog。

```
self.tableRows.count 
```

您也可以尝试设置异常断点。在 xcode 中选择“断点导航器” - 它是选项卡中右侧的第二个选项卡。（这些选项卡是您可以在最左侧的选项卡中看到您的项目的地方）当您在该选项卡中时，您可以在左下角按下 + -> 添加异常断点。然后它在崩溃之前就中断了 - 可能很有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:20:58.433

1 - currentKey 是 NSString？为什么不使用 isEqualToString 方法？

```
self.currentKey != category 
```

2 - 我对具有“保留或强”属性的“tableRows”属性类型有疑问？

我希望你的问题解决了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T10:00:01.687

```
self.tableRows = [NSMutableArray array]; 
```

这是一个自动释放数组，现在使用它

```
self.tableRows = [[NSMutableArray array] retain]; 
```

或者

```
self.tableRows = [NSMutableArray new]; 
```

# php - MySQL - ORM Idiorm - 防止 SQL 注入

> ID：13758353
> 
> 赞同：0
> 
> 时间：2012-12-07T06:55:50.357
> 
> 标签：php, mysql, orm, sql-injection, idiorm

我使用 PHP 并使用名为[Idiorm](https://github.com/j4mie/idiorm)的 ORM 进行 SQL 调用。

请求可能如下所示：

```
$person = ORM::for_table('person')->create();
$person->name = $_POST['name'];
$person->age = $_POST['age'];
$person->save(); 
```

它工作得很好，但它可能对 SQL 注入不安全？解决此问题的正确/最佳方法是什么？例子？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T07:01:27.160

从他们的[自述文件中](https://github.com/j4mie/idiorm#readme)：

> 特征
> 
> *   建立在 PDO 之上。
> *   在整个过程中使用准备好的语句来防止 SQL 注入攻击。

但是，对于[它说的表名](https://github.com/j4mie/idiorm/blob/master/docs/querying.rst)

> 请注意，此方法 **不会*转义其查询参数，因此不应直接从用户输入传递表名。*

限制、排序和分组也是如此，因此对于那些您需要考虑替代方法的人（例如，仅让 ascii-7 字符通过）。如果你需要这样做，限制只是整数，所以你可以做[ctype_digit](http://php.net/ctype_digit)检查。对于排序和分组，您可以检查字母数字，假设您的列名中没有其他任何内容。这可以用[ctype_alnum](http://php.net/ctype_alnum)来完成。

但是你在那里的查询应该没问题，因为它没有那些。

当然，你不应该只是相信它——测试它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T07:00:51.747

[我在这里](https://github.com/j4mie/idiorm/blob/master/idiorm.php)查看了源代码

在[第 1284 行](https://github.com/j4mie/idiorm/blob/master/idiorm.php#L1284)（save() 方法的一部分），它似乎正在准备语句。

所以在我看来，假设它已经在处理 sql 注入看起来是安全的。

# javascript - 访问 SSL 连接上使用的证书

> ID：13758359
> 
> 赞同：0
> 
> 时间：2012-12-07T06:56:12.163
> 
> 标签：javascript, security, ssl

页面中运行的 Javascript 代码如何检查用于验证服务器的证书链？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:10:20.453

它不能。SSL 上下文信息不会暴露给 Javascript。

更何况，就算有，也是一文不值。如果有人篡改了连接，他们可以简单地将检查 SSL 上下文的 Javascript 代码替换为将其视为安全的替代代码。

# java - if 语句错误？

> ID：13758366
> 
> 赞同：1
> 
> 时间：2012-12-07T06:56:53.807
> 
> 标签：java, if-statement, arraylist

```
public void decompressTo(String fileName) throws IOException {

    for (int i = 0; i < fileArray.size(); i++) {
        if (fileArray.get(i) == new Character((char) 7)) {
            //do stuff
    }
    else {
        //do other stuff
    }
} 
```

问题是我的`if`语句永远不会被执行，相反，`for`循环总是跳转到`else`语句。

但是，`fileArray`我正在读取的 ArrayList**肯定**包含响铃字符（ASCII 字符 #7）。我声明`fileArray`如下：`ArrayList <Character> fileArray = new ArrayList <Character> ();`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T06:59:27.207

== 是java中的引用相等（检查两个引用是否引用同一个对象，而不是两个相等的对象）。改为使用`fileArray.get(i).equals(...)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T06:59:56.553

您的声明：

```
if (fileArray.get(i) == new Character((char) 7)) 
```

将始终检查相同的对象`false`。`==`

试试这个：

```
if (fileArray.get(i).equals( new Character((char) 7))) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-07T07:03:28.673

创建`new Character((char) 7))`似乎是不必要的对象创建。因此

试试这个。确保你`fileArray.get(i)`的不是空的。

```
if (fileArray.get(i).charValue() == '7') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-07T07:02:17.113

如果这是整个方法，那么您缺少一个大括号。还要确保在比较字符串时使用 equals，否则您将按位而不是按字符串内容检查它。

```
public void decompressTo(String fileName) throws IOException {

    for (int i = 0; i < fileArray.size(); i++) {
        if (fileArray.get(i).equals(new Character((char) 7))) {
            //do stuff
        } else {
            //do other stuff
        }
    }
} 
```

# c - 为什么 ATOI 在此代码中返回 0？

> ID：13758373
> 
> 赞同：1
> 
> 时间：2012-12-07T06:57:50.743
> 
> 标签：c, atoi

我刚刚开始使用 C，我正在尝试学习 ATOL 函数。有人能告诉我为什么它一直打印 0 吗？我知道这意味着无法执行转换，但我不确定为什么。

```
#include <stdio.h>
#include <stdlib.h>

int main (void)
{
    int i = atoi ("  bl149");
    printf("%d\n", i);  
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T09:10:10.467

atoi 基本上将具有数字的字符串转换为整数 1，并且它将转换的任何内容都将成为它的返回值。或者更准确地说，atoi 函数从字符串的开头开始检查。如果它有数字（仅从开头），那么它将以整数形式返回该值。下面的例子将清楚这个概念 例如

```
atoi("1234") 
--> it will convert string "1234" in to integer and return it 
         --> i.e. ouput is 1234
atoi("1234abcd") --> i.e. ouput is 1234
atoi("a1234abcd") --> i.e. ouput is 0 
```

在您的情况下，因为您的字符串从 b (" b1149") 开始，所以它将返回 0

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T07:00:25.070

你到底有什么不明白的？`" bl149"`不是数字的有效表示。因此，在输入错误的情况下，它会像往常一样`atoi`返回。`0`这里的所有都是它的。

有效的表示可以从一系列空白字符开始，但后面必须跟一个可选`+/-`的十进制数字序列。您的空格序列后跟`b`. `b`不是十进制数字。

你期望它如何工作？在这种情况下，您期望它`atoi`做什么？

# mysql - JOIN 许多表中的未知列

> ID：13758376
> 
> 赞同：0
> 
> 时间：2012-12-07T06:58:09.930
> 
> 标签：mysql, sql, join

你们能帮我解决这个问题吗？

错误说''on Clause'中的未知列'd.idspesialis''

```
SELECT a.*, b.*, c.*,  e.*,d.*, f.*,g.*
FROM ckehamilan a 
    INNER JOIN  pasien  b 
            ON a.noRM=b.noRM 
    INNER JOIN ( select idPegawai , NamaPegawai as NamaDokter from tpegawai )  d 
            ON a.idPegawai=d.idPegawai 
     LEFT JOIN spesialis e 
            ON e.idspesialis=d.idspesialis 
    INNER JOIN ( select idPegawai , NamaPegawai as NamaParamedis from  tpegawai )  f 
            ON a.idparamedis=f.idPegawai 
     LEFT JOIN imunisasi g 
            ON a.idimunisasi=g.idimunisasi
    INNER JOIN  ruang  c 
            ON a.idruang=c.idruang 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:01:35.453

您的子查询没有列`idspesialis`

尝试这个，

```
(
    SELECT idPegawai, NamaPegawai AS NamaDokter, idspesialis
    FROM tpegawai
) d 
```

您的完整查询应如下所示，

```
SELECT a.*
    , b.*
    , c.*
    , e.*
    , d.*
    , f.*
    , g.*
FROM ckehamilan a
    INNER JOIN pasien b
        ON a.noRM = b.noRM
    INNER JOIN 
        (
            SELECT idPegawai, NamaPegawai AS NamaDokter, idspesialis
            FROM tpegawai
        ) d
        ON a.idPegawai = d.idPegawai
    LEFT JOIN spesialis e
        ON e.idspesialis = d.idspesialis
    INNER JOIN 
        (
            SELECT idPegawai , NamaPegawai AS NamaParamedis
            FROM tpegawai
        ) f
        ON a.idparamedis = f.idPegawai
    LEFT JOIN imunisasi g
        ON a.idimunisasi = g.idimunisasi
    INNER JOIN ruang c
        ON a.idruang = c.idruang 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:02:15.793

在您的带有 alias 的表中`d`，您没有名为的列`d.idspesialis`，因此它会引发错误。

您的`d`表格如下 -

```
( select idPegawai , NamaPegawai as NamaDokter from tpegawai )  d 
```

并且您正在尝试添加加入`e`as

```
e.idspesialis=d.idspesialis 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T07:03:18.237

您必须在内部选择查询中添加该列才能在父查询中使用。检查以下查询：

```
INNER JOIN ( SELECT idPegawai , NamaPegawai AS NamaDokter, idspesialis  FROM tpegawai )  d ON a.idPegawai=d.idPegawai 
```

完整查询：

```
SELECT a.*, b.*, c.*,  e.*,d.*, f.*,g.* 
FROM ckehamilan a 
INNER JOIN  pasien  b ON a.noRM=b.noRM 
INNER JOIN ( SELECT idPegawai , NamaPegawai AS NamaDokter, idspesialis  FROM tpegawai )  d ON a.idPegawai=d.idPegawai 
LEFT JOIN spesialis e ON e.idspesialis=d.idspesialis 
INNER JOIN ( SELECT idPegawai , NamaPegawai AS NamaParamedis FROM  tpegawai )  f ON a.idparamedis=f.idPegawai 
LEFT JOIN imunisasi g ON a.idimunisasi=g.idimunisasi
INNER JOIN  ruang  c ON a.idruang=c.idruang 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T07:04:09.567

尝试这个 ：：

```
 select a.*, b.*, c.*,  e.*,d.idPegawai, d.NamaPegawai as NamaDokter, g.*, f.*
  from ckehamilan a 
   INNER JOIN  pasien  b ON a.noRM=b.noRM 
   INNER JOIN tpegawai  d ON a.idPegawai=d.idPegawai 
   LEFT JOIN spesialis e ON e.idspesialis=d.idspesialis 
   LEFT JOIN imunisasi g ON a.idimunisasi=g.idimunisasi
INNER JOIN tpegawai f ON a.idparamedis = f.idPegawai
    INNER JOIN  ruang  c ON a.idruang=c.idruang 
```

# logging - WSO2 ESB：还要备份几天的 wso2carbon.log 文件？

> ID：13758378
> 
> 赞同：1
> 
> 时间：2012-12-07T06:58:14.633
> 
> 标签：logging, wso2, wso2esb, wso2carbon

在 WSO2 ESB 4.5.1 中，repository/logs 文件夹中有[多个日志](https://stackoverflow.com/questions/13758323/what-are-the-different-log-files-in-wso2-esb)文件。但是一个重要的“wso2carbon.log”只包含一天的整个日志。然后在午夜它被冲洗。由于同一目录中的其他日志文件（wso2-esb-service.log 或 http_access.log）具有此功能，因此将保留几天。

我怎样才能将 wso2carbon.log 文件也保留几天？（WSO2 应该只是重命名它们，而不是删除它们）。

这是我在 conf 目录中的 log4j.properties：

```
log4j.rootLogger=ERROR, CARBON_CONSOLE, CARBON_LOGFILE, CARBON_MEMORY, CARBON_SYS_LOG, ERROR_LOGFILE

log4j.category.org.apache.synapse=INFO
log4j.category.org.apache.synapse.transport=INFO
log4j.category.org.apache.axis2=INFO
log4j.category.org.apache.axis2.transport=INFO
log4j.logger.com.atomikos=INFO,ATOMIKOS
log4j.logger.org.quartz=WARN
log4j.logger.org.wso2=INFO
log4j.logger.com.avintis=INFO
log4j.logger.org.wso2.carbon=INFO
#log4j.category.org.apache.synapse.transport.nhttp.util=DEBUG
#log4j.category.org.apache.http.impl.nio.reactor=DEBUG
#log4j.logger.org.wso2.carbon.utils.deployment.ComponentBuilder=DEBUG
#log4j.logger.org.wso2.carbon.utils.deployment.OSGiBundleDeployer=DEBUG
log4j.logger.org.apache.catalina=WARN
log4j.logger.org.apache.coyote=WARN
log4j.logger.org.apache.axis2.enterprise=FATAL
log4j.logger.de.hunsicker.jalopy.io=FATAL

# uncomment the following logs to see HTTP headers and messages
#log4j.logger.org.apache.synapse.transport.nhttp.headers=DEBUG
#log4j.logger.org.apache.synapse.transport.nhttp.wire=DEBUG

# qpid related logs for the message broker
log4j.logger.qpid=WARN
log4j.logger.org.apache.qpid=WARN
log4j.logger.org.apache.qpid.server.Main=INFO
log4j.logger.qpid.message=WARN
log4j.logger.qpid.message.broker.listening=INFO

# The console appender is used to display general information at console
log4j.appender.CARBON_CONSOLE=org.apache.log4j.ConsoleAppender
log4j.appender.CARBON_CONSOLE.layout=org.apache.log4j.PatternLayout
log4j.appender.CARBON_CONSOLE.layout.ConversionPattern=[%d{ISO8601}] %5p - %c{1} %m%n

# LOGEVENT is set to be a LogEventAppender using a PatternLayout to send logs to LOGEVENT 
log4j.appender.LOGEVENT=org.wso2.carbon.logging.appender.LogEventAppender
log4j.appender.LOGEVENT.url=tcp://localhost:7611
log4j.appender.LOGEVENT.layout=org.wso2.carbon.utils.logging.TenantAwarePatternLayout
log4j.appender.LOGEVENT.columnList=%T,%S,%A,%d,%c,%p,%m,%I,%Stacktrace
log4j.appender.LOGEVENT.userName=admin
log4j.appender.LOGEVENT.password=admin
log4j.appender.LOGEVENT.processingLimit=1000
log4j.appender.LOGEVENT.maxTolerableConsecutiveFailure=20

# Configure the service logger at INFO level. Writes only run-time/mediation-time audit messages
log4j.category.SERVICE_LOGGER=INFO, SERVICE_APPENDER
log4j.additivity.SERVICE_LOGGER=false
log4j.appender.SERVICE_APPENDER=org.apache.log4j.RollingFileAppender
log4j.appender.SERVICE_APPENDER.File=${carbon.home}/repository/logs/${instance.log}/wso2-esb-service${instance.log}.log
log4j.appender.SERVICE_APPENDER.MaxFileSize=1000KB
log4j.appender.SERVICE_APPENDER.MaxBackupIndex=10
log4j.appender.SERVICE_APPENDER.layout=org.apache.log4j.PatternLayout
log4j.appender.SERVICE_APPENDER.layout.ConversionPattern=%d{ISO8601} [%X{ip}-%X{host}] [%t] %5p %c{1} %m%n

# The trace logger dumps enough information @INFO level, but maybe pushed upto TRACE.
# Writes only run-time/mediation time tracing/debug messages for messages passing through trace
# enabled sequences, mediators and services. Enabling tracing on these has a performance impact
log4j.category.TRACE_LOGGER=INFO, TRACE_APPENDER, TRACE_MEMORYAPPENDER
log4j.additivity.TRACE_LOGGER=false
log4j.appender.TRACE_APPENDER=org.apache.log4j.DailyRollingFileAppender
log4j.appender.TRACE_APPENDER.File=${carbon.home}/repository/logs/${instance.log}/wso2-esb-trace${instance.log}.log
log4j.appender.TRACE_APPENDER.Append=true
log4j.appender.TRACE_APPENDER.layout=org.apache.log4j.PatternLayout
log4j.appender.TRACE_APPENDER.layout.ConversionPattern=%d{HH:mm:ss,SSS} [%X{ip}-%X{host}] [%t] %5p %c{1} %m%n

# The memory appender for trace logger
log4j.appender.TRACE_MEMORYAPPENDER=org.wso2.carbon.logging.appenders.MemoryAppender
log4j.appender.TRACE_MEMORYAPPENDER.bufferSize=2000
log4j.appender.TRACE_MEMORYAPPENDER.layout=org.apache.log4j.PatternLayout
log4j.appender.TRACE_MEMORYAPPENDER.layout.ConversionPattern=%d{HH:mm:ss,SSS} [%X{ip}-%X{host}] [%t] %5p %m%n

# CARBON_LOGFILE is set to be a DailyRollingFileAppender using a PatternLayout.
log4j.appender.CARBON_LOGFILE=org.apache.log4j.DailyRollingFileAppender
# Log file will be overridden by the configuration setting in the DB
# This path should be relative to WSO2 Carbon Home
log4j.appender.CARBON_LOGFILE.File=${carbon.home}/repository/logs/${instance.log}/wso2carbon${instance.log}.log
log4j.appender.CARBON_LOGFILE.Append=true
log4j.appender.CARBON_LOGFILE.layout=org.wso2.carbon.utils.logging.TenantAwarePatternLayout
# ConversionPattern will be overridden by the configuration setting in the DB
log4j.appender.CARBON_LOGFILE.layout.ConversionPattern=TID: [%T] [%S] [%d] %P%5p {%c} - %x %m {%c}%n
log4j.appender.CARBON_LOGFILE.layout.TenantPattern=%U%@%D [%T] [%S]
log4j.appender.CARBON_LOGFILE.threshold=DEBUG

# The standard error log where all the warnings, errors and fatal errors will be logged
log4j.appender.ERROR_LOGFILE=org.apache.log4j.FileAppender
log4j.appender.ERROR_LOGFILE.File=${carbon.home}/repository/logs/${instance.log}/wso2-esb-errors.log
log4j.appender.ERROR_LOGFILE.layout=org.apache.log4j.PatternLayout
log4j.appender.ERROR_LOGFILE.layout.ConversionPattern=%d{ISO8601} [%X{ip}-%X{host}] [%t] %5p %c{1} %m%n
log4j.appender.ERROR_LOGFILE.threshold=WARN

# The memory appender for logging
log4j.appender.CARBON_MEMORY=org.wso2.carbon.logging.appender.CarbonMemoryAppender
log4j.appender.CARBON_MEMORY.bufferSize=2000
log4j.appender.CARBON_MEMORY.layout=org.wso2.carbon.utils.logging.TenantAwarePatternLayout
# ConversionPattern will be overridden by the configuration setting in the DB
log4j.appender.CARBON_MEMORY.layout.ConversionPattern=TID: [%T] [%S] [%d] %P%5p {%c} - %x %m {%c}%n
log4j.appender.CARBON_MEMORY.layout.TenantPattern=%U%@%D [%T] [%S]
log4j.appender.CARBON_MEMORY.columnList=%T,%S,%A,%d,%c,%p,%m,%H,%I,%Stacktrace
log4j.appender.CARBON_MEMORY.threshold=DEBUG

log4j.appender.CARBON_SYS_LOG = org.apache.log4j.net.SyslogAppender
log4j.appender.CARBON_SYS_LOG.layout=org.apache.log4j.PatternLayout
log4j.appender.CARBON_SYS_LOG.layout.ConversionPattern=[%d] %5p - %x %m {%c}%n
log4j.appender.CARBON_SYS_LOG.SyslogHost=localhost
log4j.appender.CARBON_SYS_LOG.Facility=USER
log4j.appender.CARBON_SYS_LOG.threshold=DEBUG

log4j.logger.org.apache.directory.shared.ldap=WARN, CARBON_CONSOLE
log4j.logger.org.apache.directory.server.ldap.handlers=WARN, CARBON_CONSOLE
log4j.logger.org.apache.directory.shared.ldap.entry.DefaultServerAttribute=FATAL, CARBON_CONSOLE
log4j.logger.org.apache.directory.shared.ldap.ldif.LdifReader=ERROR, CARBON_CONSOLE
log4j.logger.org.apache.directory.server.ldap.LdapProtocolHandler=ERROR, CARBON_CONSOLE

## Trace Logger configuration which will append to a XMPP chatroom or JID ##
#log4j.appender.XMPP_APPENDER=org.wso2.carbon.utils.logging.IMAppender
#log4j.appender.XMPP_APPENDER.host=jabber.org
#log4j.appender.XMPP_APPENDER.username=wso2esb
#log4j.appender.XMPP_APPENDER.password=wso2esb
#log4j.appender.XMPP_APPENDER.recipient=ruwan@jabber.org
#log4j.appender.XMPP_APPENDER.layout=org.apache.log4j.PatternLayout
#log4j.appender.XMPP_APPENDER.layout.ConversionPattern=[%X{host}] [%t] %-5p [%d{HH:mm:ss,SSS}] %C{1} - %m%n

# Appender config to send Atomikos transaction logs to new log file tm.out.
log4j.appender.ATOMIKOS = org.apache.log4j.RollingFileAppender
log4j.appender.ATOMIKOS.File = repository/logs/tm.out
log4j.appender.ATOMIKOS.Append = true
log4j.appender.ATOMIKOS.layout = org.apache.log4j.PatternLayout
log4j.appender.ATOMIKOS.layout.ConversionPattern=%p %t %c - %m%n
log4j.additivity.com.atomikos=false 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-10T08:49:53.067

You configuration looks ok and it should rotate your log file end of each day. If you are a windows user there was a rotating issue reported[1]. This has been fixed in the latest carbon packs

[1]- [https://wso2.org/jira/browse/ESBJAVA-1614](https://wso2.org/jira/browse/ESBJAVA-1614)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T16:10:05.150

您应该能够使用每天滚动日志的“DailyRollingFileAppender”，并将其保存在同一个文件夹中，命名模式为“wso2carbon.yyy-mm-dd.log”。我相信这是默认情况下作为 wso2carbon.log 文件的附加程序附加在任何 Carbon 产品（包括 WSO2 ESB）的 log4j 配置中的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T07:46:16.660

我使用每天 23:59 运行的任务创建了自己的文件备份。好吧，我会丢失一分钟的日志，但这比丢失整个文件要好。

# php - PHP 持续检查数据库更改的最佳实践是什么？

> ID：13758379
> 
> 赞同：6
> 
> 时间：2012-12-07T06:58:16.303
> 
> 标签：php, cron

我正在构建一个后端模块（用 PHP 编写），它将用于**监视在 [Exactly] 300 seconds (5 minutes) 内没有活动的私人聊天室**。如果是，脚本将更新数据库（将最大用户设置为某个数字，以及其他内容）。我正在通过 now() 和发送的最后一条消息的时间差来监控空闲时间的跨度。

* * *

我所做的：设置一个 cron 作业，它将每分钟或 60 秒运行一次（通过 php-cli）我的监控脚本。监控脚本内部：

```
$expire_time = time() + 60;

//this loop will run for 60 seconds
while(time() < $expire_time)
{
  $idle_time = get_all_chatrooms_idle_time();
  foreach($idle_time as $s_time)
  {
    if($s_time >= 300)
    {
      update_changes();
    }
  }
  usleep(500000);
} 
```

* * *

在 300 秒空闲时间后立即设置最​​大用户数的条件无法讨价还价。所以我不能真正遵循这样的建议：“避免做任何事情，直到有事情真正要求它”，即使它很有意义。

原因？活跃和不活跃聊天室的数据需要是实时的，因为它也会显示在仪表板上。聊天室版主的报酬取决于此。

* * *

为什么不在每次仪表板负载时检查它们？我很抱歉，但仍然不可能。

检查需要在服务器端进行，仪表板使用 ajax 更新自身，每秒轮询一次。

当我将监控代码附加到我的 ajax 调用所请求的页面时，我认为它比我当前的实现更占用资源（如果我错了，请纠正我）

让我粗略估计一下用户数量，这样你就可以想象我们得到的负载/流量：

*   包括版主在内的聊天人数：~800
*   聊天室数量：~250
*   (x) 聊天室版主人数：~50
*   (x) 我的老板和他的员工：

(x) - 可以查看仪表板

* * *

有没有更好的办法？我做对了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:37:40.817

这个循环是一个矫枉过正。即使在中等服务器上，它也可能每分钟运行数千次，即使对于实时应用程序，它也会产生高 CPU 使用率。添加一个计数器，并查看迭代计数。我认为这会产生比处理每个 AJAX 请求更多的负载。

首先，确定您需要信息的粒度。假设您选择有 3 秒的粒度（例如每 3 秒扫描一次数据库）——这个数字可能对您来说太高了，但它说明您不会损失太多。随着 AJAX 每秒拉动，您*可能会*看到一些应该不断向上爬的计数器爬回一两次。（你是否真的会看到这样的事情取决于你的柜台的性质。）

如果您的计数器基于秒范围内的数据（例如显示经过的秒数总和，或基于 $/sec 的金额），那么第二次 AJAX 拉取将不会提供连续计数器。（它有时会错过一秒钟或两次更新到那一秒钟；出于网络原因）。

无论选择的粒度如何，您的最终统计信息都没有问题，因为它们是基于绝对时间戳的——无论它们被评估多晚。

如果使用第二次 AJAX 轮询来实现平滑计数器，那么您可以做得比这更好：计数应该在客户端运行（例如发送具有第二次增量的值：`revenue: <span data-inc="25">14432</span>`并使用 JS 进行计数）。唯一实现 AJAX 来监视停止/重置计数器的条件。然后您只需要确定通知可能延迟多长时间（例如 10 秒）然后计数器将过度滚动到最大值。10s 回落到预期值。在这种情况下，您不应该更频繁地运行 DB 清理（例如，间隔的一半）。例如，这允许在您的周期中进行 3 秒的睡眠，从而大大减少负载。

如果您可以轻松地选择将每个聊天室的过期时间戳添加到数据库（记录中的或固定的），并使用可以加快读取速度的索引（并另外允许每个房间的过期规则）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T07:46:27.340

```
#!/usr/bin/php
<?php

if( file_exists('/tmp/chatrooms_cron.lock') ) {
   die( 'There is already a script running.' );
}

file_put_contents( '/tmp/chatrooms_cron.lock', 1 ); // Storing pid would be better 

// Run loop forever
while( true )
{
  $idle_time = get_all_chatrooms_idle_time();

  foreach($idle_time as $s_time)
  {
    if($s_time >= 300)
    {
      update_changes();
    }
  }

  sleep( 60 );
} 
```

node.js 的提示（使用 socket.io）：

我在工作中一直在使用 node.js，非常棒！将是实时的，并且可以与低至 ie5/ie6 的浏览器一起使用。这可以在 node.js 内部完成。

```
setInterval( function() {
   // Fetch and update peers
}, 300000 ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T07:37:45.643

根据评论，我建议使用诸如[node.js](http://nodejs.org)之类的技术，它是一个偶数驱动的 I/O 异步平台来构建应用程序。如果聊天室是一个外部应用程序，您可以轻松地打开一个套接字并监听聊天室、记录它、检查用户的活动并监听特定事件。

# jms - 没有 activemq/jms 的 apache-camel 请求/回复

> ID：13758380
> 
> 赞同：1
> 
> 时间：2012-12-07T06:58:19.713
> 
> 标签：jms, cxf, activemq, apache-camel

我的要求是有一个 Web 服务，它将接收来自客户端的请求，然后通过骆驼路由，丰富它并将其转发到其他客户端位置的另一个 Web 服务，获得响应并将其发送回原始请求者。

```
from(webserviceURI)
  .inOut().to("jms:queue:INQueue?replyTo=OUTQueue?replyToType=Exclusive");

from(jms:queue:INQueue).to("http:X").to(jms:OUTQueue) 
```

我理解正确。如果我们这样做，我们是否需要设置回复标题。我想这解决了这个问题。克劳斯（骆驼神：P）的早期文章已经解释过没有必要设置相关ID，因为如果没有分配骆驼，它会自动设置。[参考这里](https://stackoverflow.com/questions/10253656/how-to-connect-an-apache-camel-synchronous-request-reply-endpoint-with-asynchron)

我的问题是我们正在寻找超轻量级的实现。我们可能不得不处理低至 300 MB 的内存。没有 activeMQ，没有 SMX。只需使用 karaf。如果我们需要使用较小的 jms，那么最好的 jms 提供程序是什么足迹.or 是activemq 好的。

我也想这样做

```
<from uri="cxf:bean:cxfProxyEndpoint?dataFormat=MESSAGE" />
<camel:convertBodyTo type="java.lang.String"></camel:convertBodyTo>
<!-- lot of pre processors  here-->
<to uri="http://X:8080/X">
<!-- lot of post processors--> 
```

cxf 代理 web 服务具有返回值的操作。所以我们接收请求，将其发送到预处理器，然后将远程 web 服务作为 http 端点调用，获取响应，后处理它，响应是路由结束时的消息（我是否正确）。我的问题是请求和响应是否匹配。我应该如何测试它。我们还将将请求从代理多播到各种 http 端点，并在将其发送给客户端请求者之前聚合回复。我真的应该继续这条路线还是这是一个糟糕的设计。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T07:06:57.367

是的，后一个例子会匹配。每个 Web 服务请求将单独路由，并且来自外部 http 服务器的响应将自动匹配。在您的用例中，您很可能不需要 JMS。

如果您有一个外部系统并且需要使用 JMS 消息与该系统集成，那么 JMS 就很有意义。否则，如果没有，我建议寻找没有它的解决方案。

# iphone - 如何将滑动手势连接到 Xcode 中的页面控件？

> ID：13758382
> 
> 赞同：3
> 
> 时间：2012-12-07T06:58:24.300
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

当您单击页面控件上的不同点时，我将页面控件设置为在同一视图中显示不同的图像。它可以工作，但你必须点击“......” 第一个点查看第一张图像，然后第二个查看第二张图像，第三个查看第三张。这对用户来说有点困难，因为点太小了。如何让它滑动而不是点击点？

# android - 通过这种方式，我正在存储我的应用程序任务，但显示最后一个任务？

> ID：13758383
> 
> 赞同：0
> 
> 时间：2012-12-07T06:58:26.850
> 
> 标签：android, for-loop, sharedpreferences

我必须使用共享首选项存储和显示一些任务。但我不能，所以分享一些帮助让这变得简单。

```
task_ok.setOnClickListener(new View.OnClickListener() 
        {

            @Override
            public void onClick(View v) 
            {

                for(int i=0;i<50;i++)
                {
                    String prefs_name = null;
                    SharedPreferences remain= getApplicationContext().getSharedPreferences(prefs_name,0);
                    SharedPreferences.Editor taskedit=remain.edit();
                    taskedit.putString("taskname",edit_task.getText().toString() );
                    taskedit.putString("taskdate", edit_date.getText().toString());
                    taskedit.putString("tasktime", edit_time.getText().toString());
                    taskedit.apply();
                }

                Toast.makeText(getApplicationContext(), "Task added", Toast.LENGTH_SHORT).show();
                Intent ret_view=new Intent(Add.this,View_listen.class);
                startActivity(ret_view);
            }
        }); 
```

我第一次看到三个任务，但之后它只显示最后添加的任务。

```
 TextView tv=(TextView)findViewById(R.id.textView2);
    String prefs_name = null;
    SharedPreferences remain= getApplicationContext().getSharedPreferences(prefs_name,0);
    String viewtask=remain.getString("taskname", "");
    String viewdate=remain.getString("taskdate", "");
    String viewtime=remain.getString("tasktime", "");   
   tv.setText(new StringBuilder().append(viewtask).append(" ").append(viewdate).append(" ").append(viewtime)); 
```

我只是感到困惑，我尝试过，但我无法检索任务..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:06:48.913

更改代码以将所有值作为键值对存储在 SharedPreferences 中：

```
for(int i=0;i<50;i++)
 {
       String prefs_name = null;
       SharedPreferences remain= 
                   getApplicationContext().getSharedPreferences(prefs_name,0);
       SharedPreferences.Editor taskedit=remain.edit();
       taskedit.putString("taskname"+i,edit_task.getText().toString() );
       taskedit.putString("taskdate"+i, edit_date.getText().toString());
       taskedit.putString("tasktime"+i, edit_time.getText().toString());
       taskedit.commit();
  } 
```

现在您可以使用 taskname0,taskdate0,tasktime0,.... 访问您的值

并检索为：

```
TextView tv=(TextView)findViewById(R.id.textView2);
String viewtask="",viewdate="",viewtime="";
for(int i=0;i<50;i++)
  {

     String prefs_name = null;
     SharedPreferences remain= 
            getApplicationContext().getSharedPreferences(prefs_name,0);
     if(i==0)
      viewtask+=remain.getString("taskname", "");
     else
      viewtask+=" "+remain.getString("taskname"+i, "");
      viewdate+=" "+remain.getString("taskdate"+i, "");
      viewtime+=" "+remain.getString("tasktime"+i, "");   
  }
 tv.setText(viewtask+" "+viewdate +" "+viewtime); 
```

**注意：**如果您有大量数据，则创建一个小型 SQLite 数据库来存储计划而不是 Sharedpreferences。您可以查看这些教程，了解我们如何在 Android 中创建 Sqlite 数据库：

[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

[http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

# uiwebview - 在 UIWebView 上添加子视图层

> ID：13758386
> 
> 赞同：0
> 
> 时间：2012-12-07T06:58:57.397
> 
> 标签：uiwebview, layer

我有一个全屏 UIWebView，我想在它上面添加一个半透明的子视图。当我这样做时，我无法单击 UIWebview 上的任何链接，这告诉我事件是由视图层次结构的最顶层捕获的，即半透明子视图。[myUIWebView becomeFirstResponder] 似乎没有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T22:56:13.623

A默认启用 如果子视图是例如 a你应该能够捕获输入，因为`UIView`它是关闭的。`allowUserInteraction``UIImageView``allowUserInteraction`

所以`allowUserInteraction`试一试。如果您想在两者上都输入，那么您需要在子视图中捕获它并将未使用的输入发送下来。

# html - 表中所有列的边框高度相等

> ID：13758390
> 
> 赞同：0
> 
> 时间：2012-12-07T06:59:36.693
> 
> 标签：html, css, html-table

我连续有 3 列![我的问题的屏幕截图](../Images/1386002992d7ddf489d8b6e5208fc870.png)

我需要在正确描述商品和每个包裹的净数量中间的这个边界延伸到平行列（标记和包裹数量）边界高度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:40:04.137

无需在代码中引入 Second Table

```
Check Fiddle 
```

[http://jsfiddle.net/6XsKj/7/](http://jsfiddle.net/6XsKj/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:05:50.333

**曾经** `table` `height:100%;`

```
table{
height:100%;
} 
```

***[演示](http://jsfiddle.net/6XsKj/2/)***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T07:09:47.153

你必须使用这样的结构：

```
<table>

    <tr>
        <td>Marks</td>
        <td>Description</td>
        <td>Quantity</td>
    </tr>

    <tr>
        <td>Lorem...</td>
        <td>Lorem...</td>
        <td>Sit...</td>
    </tr>

    <tr>
        <td>Name and Address</td>
        <td colspan='2'>Signature and date</td>
    </tr>

</table> 
```

查看第三行第二个单元格的属性**colspan**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T07:20:05.987

首先将 style`height:100%`放在`<td>`包含`<table>`as

```
 <td width="63%" rowspan="2" valign="top" 
style="border-right:1px solid black; border-top:1px solid black; border-bottom:1px solid black;font-size:18px;height:100%"> 
```

然后，把样式`height:inherit`放在`<table>`下面`<td>`

```
 <table width="100%" border="0" cellspacing="0" cellpadding="0" 
style="height:inherit"> 
```

# python - 创建彼此的类对象的 Python 类

> ID：13758391
> 
> 赞同：1
> 
> 时间：2012-12-07T06:59:37.820
> 
> 标签：python, python-3.x

> **可能重复：**
> [Python UnboundLocalError 的帮助：分配前引用的局部变量](https://stackoverflow.com/questions/1735263/help-with-python-unboundlocalerror-local-variable-referenced-before-assignment)

在 python3 中，我有两个类，一个用于 DNA，一个用于 RNA。我希望 DNA 类有一个方法，该方法采用 DNA 序列（DNA 的实例变量，self.sequence），将其更改为 RNA 序列（使用 for 循环轻松完成），然后使用新序列作为实例变量。

同时，我希望 RNA 类有一个相反的方法（即，它获取 RNA 序列，生成相应的 DNA 序列，然后创建一个使用该序列作为实例变量的 DNA 对象。 )

我从 DNA 中制造 RNA 的方法如下：

```
def transcribe(self):
    RNAseq=''
    for base in self.sequence:
        if base=='A' or base=='C' or base=='G':
            RNAseq=RNAseq+base
        if base=='T':
            RNAseq=RNAseq+'U'
    RNA=RNA(RNAseq,self.name+'RNA')
    return RNA 
```

这段代码给了我错误：UnboundLocalError: local variable 'RNA' referenced before assignment

我想做的事能做到吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T07:01:53.730

将您的变量称为除 之外的其他内容`RNA`，例如`rna`：

```
rna = RNA(RNAseq, self.name + 'RNA')
return rna 
```

否则，您会尝试对两个不同的事物（类和变量）使用相同的名称，而后者会影响前者。

# iphone - 方向在 ios6 中不起作用？

> ID：13758398
> 
> 赞同：0
> 
> 时间：2012-12-07T07:00:00.600
> 
> 标签：iphone, objective-c, ios, orientation

我在 ios6 的方向上遇到问题。相同的代码适用于 ios5 或 5.1。我`- (BOOL) shouldAutorotate and -(NSInteger)supportedInterfaceOrientations`按照 ios6 标准使用过。但是“ `willRotateToInterfaceOrientation`”和“ `didRotateToInterfaceOrientation`”仍然没有被调用。

**这是我的代码：--**

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{

    if (!UIInterfaceOrientationIsPortrait(lastOrientation) || !UIInterfaceOrientationIsPortrait(toInterfaceOrientation)) 
    if (!UIInterfaceOrientationIsLandscape(lastOrientation) || !UIInterfaceOrientationIsLandscape(toInterfaceOrientation)) 
    {

        CGRect frame;
        int viewAlpha;
        lastOrientation = toInterfaceOrientation;

        if (toInterfaceOrientation == UIInterfaceOrientationPortrait || toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown) 
        {

            [[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationNone];

            viewAlpha = 1;
            [MovieControlContainerLandscape setHidden:YES];

            if (isDauntless) {
                [self.navigationController setNavigationBarHidden:NO animated:YES];
            } else {
                [self.navigationController setNavigationBarHidden:NO];
            }

            frame = iPad ? CGRectMake(0, 88, 768, 432) : CGRectMake(0, 88, 320, 180);
            [movieContainer removeGestureRecognizer:toggleMediaControl];

        }
        else
        {
            [PromptToBuy dismissWithClickedButtonIndex:0 animated:YES];

            [[UIApplication sharedApplication] setStatusBarHidden:YES withAnimation:UIStatusBarAnimationNone];

            viewAlpha = 0;
            [MovieControlContainerLandscape.layer setCornerRadius:22];
            [MovieControlContainerLandscape.subviews.lastObject addSubview:[MediaControls use]];

            if (isDauntless) {
                [self.navigationController setNavigationBarHidden:YES animated:YES];
            } else {
                [self.navigationController setNavigationBarHidden:YES];
            }

            frame = iPad ? CGRectMake(0, 0, 1024, 768) : CGRectMake(0, 0, 480, 320);

            [movieContainer addGestureRecognizer:toggleMediaControl];

            if (isDauntless) {
                [UIView beginAnimations:nil context:nil];
                [UIView setAnimationDuration:0.6];
            }

            if(TSFullScreen)
            {
                [movieContainer setAlpha:1];
            }

            if (isDauntless) {
                [UIView commitAnimations];
            }

        }

        [viewContainer setAlpha:viewAlpha];

        // Size the overlay view for the current orientation.
        [movieContainer setFrame:frame];

    }

}

/* Sent to the view controller after the user interface rotates. */
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{

    if (!UIInterfaceOrientationIsPortrait(lastOrientation) || !UIInterfaceOrientationIsPortrait(fromInterfaceOrientation)) 
    if (!UIInterfaceOrientationIsLandscape(lastOrientation) || !UIInterfaceOrientationIsLandscape(fromInterfaceOrientation)) 
    {

        float duration = .5;

        if (fromInterfaceOrientation == UIInterfaceOrientationPortrait || fromInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown) 
        {

            if (isDauntless) {
                [UIView transitionWithView:movieContainer duration:duration options:UIViewAnimationOptionTransitionNone animations:^{

                    /* Move movie view to parent center. */
                    [self.moviePlayerController.view setCenter:movieContainer.center];

                } completion:^(BOOL finished) {

                    [UIView beginAnimations:nil context:NULL];
                    [UIView setAnimationDuration:duration];
                    CGRect frame = movieContainer.frame;
                    /* Size movie view to fit parent view. */
                    frame.origin.y = 0;
                    [self.moviePlayerController.view setFrame:frame];
                    [UIView commitAnimations];

                    CGPoint center = CGPointMake(movieContainer.center.x, -50);
                    [MovieControlContainerLandscape setTag:0];
                    [MovieControlContainerLandscape setHidden:NO];
                    [MovieControlContainerLandscape setCenter:center];

                    [self toggleMovieController];

                }];

            } else {

                CGRect frame = movieContainer.frame;
                /* Size movie view to fit parent view. */
                frame.origin.y = 0;
                [self.moviePlayerController.view setFrame:frame];

                CGPoint center = CGPointMake(movieContainer.center.x, -50);
                [MovieControlContainerLandscape setTag:0];
                [MovieControlContainerLandscape setHidden:NO];
                [MovieControlContainerLandscape setCenter:center];

                [self toggleMovieController];

            }

        }
        else
        {

            if (!isDauntless) {
                [MovieControlContainer setFrame:CGRectMake(0, 44, 768, 68)];
            }

            [MovieControlContainer addSubview:[MediaControls use]];

            //NSLog(@"MovieControlContainer is %@, MovieControlContainer subviews: %@",MovieControlContainer,[MovieControlContainer subviews]);

            if (isDauntless) {
                [UIView beginAnimations:nil context:NULL];
                [UIView setAnimationDuration:duration];
            }

            if(TSFullScreen){
                [movieContainer setAlpha:0];
            }

            CGRect frame = movieContainer.frame;
            /* Size movie view to fit parent view. */
            frame.origin.y = 0;
            [self.moviePlayerController.view setFrame:frame];

            if (isDauntless) {
                [UIView commitAnimations];
            }

        }

    }

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{

        return !mediaTypeIsAudio && isOrientationSupported;

}

//----supported method for ios6--------//

- (BOOL) shouldAutorotate
{
    return YES;
}

-(NSInteger)supportedInterfaceOrientations{

    NSInteger mask = 0;
    if ([self shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationLandscapeRight])
        mask |= UIInterfaceOrientationMaskLandscapeRight;
    if ([self shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationLandscapeLeft])
        mask |= UIInterfaceOrientationMaskLandscapeLeft;
    if ([self shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationPortrait])
        mask |= UIInterfaceOrientationMaskPortrait;
    if ([self shouldAutorotateToInterfaceOrientation: UIInterfaceOrientationPortraitUpsideDown])
        mask |= UIInterfaceOrientationMaskPortraitUpsideDown;
    return mask;

}

//i have set the rootviewcontroller in appdelegate file
 self.navigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];
    self.window.rootViewController = self.navigationController. 
```

请帮我解决这个问题。我无法找到解决方案。在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:06:03.950

在`ios6`你必须使用这种方法**`vieworientation`**

```
-(BOOL)shouldAutorotate
{
    return YES;
}
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationMaskAll;
} 
```

并检查我的答案[链接](https://stackoverflow.com/questions/13580386/iphone-landscape-issues/13586490#13586490)

# android - App导致android OS数据消耗急剧增加

> ID：13758399
> 
> 赞同：0
> 
> 时间：2012-12-07T07:00:11.897
> 
> 标签：android

我正在构建一个 android 应用程序，其中每 24 小时运行一次警报服务以下载一个文件（文件小于 1MB）。当我检查我的应用程序的数据使用情况时，我发现它合理且低，但是 android 操作系统很高（每天 15MB）。当我停止运行我的应用程序时，android 操作系统又回到了低位。任何想法这可能是由什么引起的以及我的应用程序如何影响 Android 操作系统的数据消耗？编辑：

```
Intent myIntent = new Intent(AlarmService.this, AlarmService.class);
pendingIntent = PendingIntent.getService(this, 0, myIntent, 0);
AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);
Calendar cal = Calendar.getInstance();
cal.set(Calendar.HOUR_OF_DAY, 12);
cal.set(Calendar.AM_PM, Calendar.AM);
cal.set(Calendar.MINUTE, 0);
cal.set(Calendar.SECOND, 0);
cal.set(Calendar.MILLISECOND, 0);
cal.add(Calendar.DAY_OF_MONTH, 1);
alarmManager.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), pendingIntent); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T12:00:34.890

操作系统中可能存在错误我注意到了同样的问题 1）当我使用 opera 浏览器时，android 数据使用量随着 opera 使用的数据的某种功能而上升。2）这似乎只发生在使用移动数据而不是wifi时我试图找出确切原因并最终解决这个问题（S3运行4.1.2）

# java - 将结果保存到文件 - JAVA

> ID：13758400
> 
> 赞同：0
> 
> 时间：2012-12-07T07:00:15.960
> 
> 标签：java, dijkstra, output

我有一个非常愚蠢的问题......我不知道如何将结果保存在第二个数组保存在下一行的输出文件中。

它是这样保存的：

距离 [0 10 13 10 6 18 ] 预测 [-15 2 5 1 4 ]

我希望它像这样保存：

```
dist[0 10 13 10 6 18 ]
pred[-15 2 5 1 4 ] 
```

代码：

```
try{
outputFile = new File("Out0304.txt");
out = new FileWriter(outputFile);
out.write("\n" + "dist[");
out.write("\n");

for (Top way : tops){
    out.write(way.shortest_path + " ");
}

out.write("]\n");
out.write("\n");
out.write("\n" + "pred[");

for (Top ww : tops){
    if (ww.previous != null) {
        out.write(ww.previous.number + " ");
    }
            else{
        out.write("-1");
    }
}
out.write("] \n ");
out.close();
} 

 catch (IOException e){
System.out.println("Blad: " + e.toString());
}
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:01:56.610

在 Windows 中，您需要`"\r\n"`换行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:12:16.727

您可以使用以下内容写入文件：

```
PrintWriter pw = new PrintWriter(new FileWriter("fileName"),true);
pw.println("[");
for(int i=0;i<pred.length;i++)
{
pw.println(pred[i]+" ");
}
pw.println("]");
pw.close(); 
```

# android - 如何在两个班级中使用 Obtion 菜单

> ID：13758405
> 
> 赞同：0
> 
> 时间：2012-12-07T07:00:36.013
> 
> 标签：android

嗨，我在 2 类中使用菜单这是我的菜单代码：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/setting"
        android:icon="@drawable/ic_seting"
        android:title="Setting">
    </item>
 </menu> 
```

在 A 类我用过这个

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater menuInflater = getMenuInflater();
        menuInflater.inflate(R.menu.options, menu);
        return true;
    }

public boolean onCreateOptionsMenu(MenuItem item) {
    // TODO Auto-generated method stub
    switch (item.getItemId()) {
    case R.id.SavedList:

        Intent intent = new Intent(

        A.this,

        SetPreference.class);

        startActivity(intent);

        return true;

}
return true;
} 
```

并且在课堂上使用

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater menuInflater = getMenuInflater();
        menuInflater.inflate(R.menu.options, menu);
        return true;
    }

public boolean onCreateOptionsMenu(MenuItem item) {
    // TODO Auto-generated method stub
    switch (item.getItemId()) {
    case R.id.SavedList:

        Intent intent = new Intent(

        b.this,

        SetPreference.class);

        startActivity(intent);

        return true;

}
return true;
} 
```

在一类 b 中它工作正常，但在课堂上它不工作请告诉我我哪里做错了请帮助我我是新的 n android

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:09:35.463

当您使用 Intent 时，为什么需要两个具有相同主体的不同类。我的建议是如果正文为 B 类菜单写一个 Intent .. 看看是否有效。浏览 Intent in Android 和 Also menu Android 文档的文档，您会发现更多信息。

# vb6 - VB6 RTF 到 Word 2010

> ID：13758411
> 
> 赞同：2
> 
> 时间：2012-12-07T07:01:03.617
> 
> 标签：vb6, ms-word, export, rtf

我有一个 VB6 应用程序，它具有最终被复制并粘贴到 Word 2010 文档的 RTF 字段。

文本和图片都可以很好地粘贴，除了粘贴图表元素时，默认情况下隐藏轴标签。所以我基本上必须单击单个图表和“显示”轴标签。

有没有办法让它默认可见？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T15:33:51.833

您可能需要稍微扩展您的问题以获得更具体的细节，但可以使用 OLE 自动化从 VB6 操作 Word 文档中的对象。这是一个比我记忆中更好的示例：http: [//support.microsoft.com/kb/237337](http://support.microsoft.com/kb/237337)

# javascript - 如何使用 javascript 获取 HTTP GET 请求值

> ID：13758417
> 
> 赞同：3
> 
> 时间：2012-12-07T07:01:41.863
> 
> 标签：javascript, get

> **可能重复：**
> [如何获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)

如何使用 javascript 获取 HTTP GET 请求？

例如，如果我有权访问`www.sample.com/div/a/dev.php?name=sample`

如何获取 GET 请求`name=sample`和值（如果`name`是）`sample`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T07:25:49.200

```
Here is a fast way to get an object similar to the PHP $_GET array:

function get_query(){
    var url = location.href;
    var qs = url.substring(url.indexOf('?') + 1).split('&');
    for(var i = 0, result = {}; i < qs.length; i++){
        qs[i] = qs[i].split('=');
        result[qs[i][0]] = qs[i][1];
    }
    return result;
}
Usage:

var $_GET = get_query();
For the query string x=5&y&z=hello&x=6 this returns the object:

{
  x: "6",
  y: undefined,
  z: "hello"
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T07:05:15.780

[window.location](https://developer.mozilla.org/en/DOM/window.location)对象可能在这里有用：

```
var parameter = window.location.search.replace( "?", "" ); // will return the GET parameter 

var values = parameter.split("=");

console.log(values); // will return and array as ["name", "sample"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T07:04:49.097

您可以使用`location.href`来获取完整的 URL，然后使用提取值`split`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T07:05:15.230

构建 URL 字符串并使用 jQuery [get](http://api.jquery.com/jQuery.get/)

# wix - 如何制作丰富的 GUI 设计 fow WiX(Windows Installer XML) 对话框？

> ID：13758419
> 
> 赞同：2
> 
> 时间：2012-12-07T07:01:51.047
> 
> 标签：wix, windows-installer

我正在使用 WiX 为任何产品制作安装程序。但我不想使用在 WiX 中使用的默认 UI 对话框。如何即兴安装安装程序的 UI？是否有任何工具可以为高度自定义的安装程序设计 UI？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T13:08:31.367

丰富的 GUI 在引导程序（又名链接器）中完成。Chainers 是用 Burn 工具制作的（B 代表 bootstrap）。我对它不是很熟悉，但它应该替换 Windows Installer 可用的所有 GUI，您可以在 .msi 文件中设置这些 GUI。此 GUI 具有限制性，仅适用于最简单的任务，因此我们的想法是将 .msi 构建为仅由 Windows Installer 使用以实际安装某些内容的数据库文件，并将所有 GUI 转移到引导程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T14:32:02.423

我遇到的唯一东西是[WixEdit](http://wixedit.sourceforge.net/)，虽然它看起来有问题并且可能已被放弃。尽管如此，它仍允许您对 WiX 对话框进行基本的 UI 设计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-04T08:45:17.860

我最近遇到了一个叫做[Wix#](https://www.codeproject.com/Articles/804584/Wixsharp-WixSharp-UI-Extensions)的东西。它允许您使用类似 Winforms 的设计器制作自定义对话框。

我知道这是**9 年**后的事了，但如果有帮助，那就太好了。

# opengl - GLSL 版本错误

> ID：13758422
> 
> 赞同：-1
> 
> 时间：2012-12-07T07:02:01.030
> 
> 标签：opengl, glsl, shader

作为我项目的一部分，我必须在 opengl 窗口中显示动画 3d 模型

我在[http://ogldev.atspace.co.uk/www/tutorial38/tutorial38.html上找到了一个示例代码](http://ogldev.atspace.co.uk/www/tutorial38/tutorial38.html)

我成功编译了代码，但是在运行时出现以下错误

```
 Status: VSmain shader compiled with errors
  Compilation details for VSmain shader:
  0:3(1): error: syntax error, unexpected VERSION

  Status: FSmain shader compiled with errors
  Compilation details for FSmain shader:
  0:3(1): error: syntax error, unexpected VERSION

  Status: Link failed
  Linkage details:
  linking with uncompiled shaderlinking with uncompiled shader
  Errors in shader compilation
  Error initializing the lighting technique 
```

也为

```
 printf("%s \n",glGetString(GL_SHADING_LANGUAGE_VERSION)); 
```

它返回空

我觉得错误在于 skinning.glsl 文件，如下所示

```
#version 120
#define VERTEX_IN attribute

const int MAX_POINT_LIGHTS = 2;
const int MAX_SPOT_LIGHTS = 2;
 struct VSInput 
 {
vec3  Position;                                             
vec2  TexCoord;                                             
vec3  Normal;    
ivec4 BoneIDs;
vec4  Weights;
};

interface VSOutput
{                                                                                    
vec2 TexCoord;                                                                 
vec3 Normal;                                                                   
vec3 WorldPos;                                                                 
};

struct VSOutput1
{                                                                                    
vec2 TexCoord;                                                                 
vec3 Normal;                                                                   
vec3 WorldPos;                                                                 
};

const int MAX_BONES = 100;

uniform mat4 gWVP;
uniform mat4 gWorld;
uniform mat4 gBones[MAX_BONES];

shader VSmain(in VSInput VSin:0, out VSOutput VSout)
{       
mat4 BoneTransform = gBones[VSin.BoneIDs[0]] * VSin.Weights[0];
BoneTransform     += gBones[VSin.BoneIDs[1]] * VSin.Weights[1];
BoneTransform     += gBones[VSin.BoneIDs[2]] * VSin.Weights[2];
BoneTransform     += gBones[VSin.BoneIDs[3]] * VSin.Weights[3];

vec4 PosL      = BoneTransform * vec4(VSin.Position, 1.0);
gl_Position    = gWVP * PosL;
VSout.TexCoord = VSin.TexCoord;
vec4 NormalL   = BoneTransform * vec4(VSin.Normal, 0.0);
VSout.Normal   = (gWorld * NormalL).xyz;
VSout.WorldPos = (gWorld * PosL).xyz;                                
}

const int MAX_POINT_LIGHTS = 2;
const int MAX_SPOT_LIGHTS = 2;

struct BaseLight
{
vec3 Color;
float AmbientIntensity;
float DiffuseIntensity;
};

struct DirectionalLight
{
struct BaseLight Base;
vec3 Direction;
};

struct Attenuation                                                                  
{                                                                                   
float Constant;                                                                 
float Linear;                                                                   
float Exp;                                                                      
};                                                                                  

struct PointLight                                                                           
{                                                                                           
struct BaseLight Base;                                                                  
vec3 Position;                                                                          
Attenuation Atten;                                                                      
};                                                                                          

struct SpotLight                                                                            
{                                                                                           
struct PointLight Base;                                                                 
vec3 Direction;                                                                         
float Cutoff;                                                                           
};                                                                                          

uniform int gNumPointLights;                                                                
uniform int gNumSpotLights;                                                                 
uniform DirectionalLight gDirectionalLight;                                                 
uniform PointLight gPointLights[MAX_POINT_LIGHTS];                                          
uniform SpotLight gSpotLights[MAX_SPOT_LIGHTS];                                             
uniform sampler2D gColorMap;                                                                
uniform vec3 gEyeWorldPos;                                                                  
uniform float gMatSpecularIntensity;                                                        
uniform float gSpecularPower; 

vec4 CalcLightInternal(struct BaseLight Light, vec3 LightDirection, VSOutput1 In)            
{                                                                                           
vec4 AmbientColor = vec4(Light.Color, 1.0f) * Light.AmbientIntensity;                   
float DiffuseFactor = dot(In.Normal, -LightDirection);                                     

vec4 DiffuseColor  = vec4(0, 0, 0, 0);                                                  
vec4 SpecularColor = vec4(0, 0, 0, 0);                                                  

if (DiffuseFactor > 0) {                                                                
    DiffuseColor = vec4(Light.Color, 1.0f) * Light.DiffuseIntensity * DiffuseFactor;    

    vec3 VertexToEye = normalize(gEyeWorldPos - In.WorldPos);                             
    vec3 LightReflect = normalize(reflect(LightDirection, In.Normal));                     
    float SpecularFactor = dot(VertexToEye, LightReflect);                              
    SpecularFactor = pow(SpecularFactor, gSpecularPower);                               
    if (SpecularFactor > 0) {                                                           
        SpecularColor = vec4(Light.Color, 1.0f) *                                       
                        gMatSpecularIntensity * SpecularFactor;                         
    }                                                                                   
}                                                                                       

return (AmbientColor + DiffuseColor + SpecularColor);                                   
}                                                                                           

vec4 CalcDirectionalLight(VSOutput1 In)                                                      
{                                                                                           
return CalcLightInternal(gDirectionalLight.Base, gDirectionalLight.Direction, In);  
}                                                                                           

vec4 CalcPointLight(struct PointLight l, VSOutput1 In)                                       
{                                                                                           
vec3 LightDirection = In.WorldPos - l.Position;                                           
float Distance = length(LightDirection);                                                
LightDirection = normalize(LightDirection);                                             

vec4 Color = CalcLightInternal(l.Base, LightDirection, In);                         
float Attenuation =  l.Atten.Constant +                                                 
                     l.Atten.Linear * Distance +                                        
                     l.Atten.Exp * Distance * Distance;                                 

return Color / Attenuation;                                                             
}                                                                                           

vec4 CalcSpotLight(struct SpotLight l, VSOutput1 In)                                         
{                                                                                           
vec3 LightToPixel = normalize(In.WorldPos - l.Base.Position);                             
float SpotFactor = dot(LightToPixel, l.Direction);                                      

if (SpotFactor > l.Cutoff) {                                                            
    vec4 Color = CalcPointLight(l.Base, In);                                        
    return Color * (1.0 - (1.0 - SpotFactor) * 1.0/(1.0 - l.Cutoff));                   
}                                                                                       
else {                                                                                  
    return vec4(0,0,0,0);                                                               
}                                                                                       
}                                                                                           

shader FSmain(in VSOutput FSin, out vec4 FragColor)
{                                    
VSOutput1 In;
In.TexCoord = FSin.TexCoord;
In.Normal = normalize(FSin.Normal);
In.WorldPos = FSin.WorldPos;                                                                 

vec4 TotalLight = CalcDirectionalLight(In);                                         

for (int i = 0 ; i < gNumPointLights ; i++) {                                           
    TotalLight += CalcPointLight(gPointLights[i], In);                              
}                                                                                       

for (int i = 0 ; i < gNumSpotLights ; i++) {                                            
    TotalLight += CalcSpotLight(gSpotLights[i], In);                                
}                                                                                       

FragColor = texture(gColorMap, In.TexCoord.xy) * TotalLight;     
}

program Lighting
{
vs(120)=VSmain();
fs(120)=FSmain();
}; 
```

您可以在上面给出的链接中获得完整的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T14:49:27.457

它适用于 Nvidia 显卡问题出在 OpenGL 和 glsl 的版本上。特别是此代码似乎仅支持版本 #330 或更高版本

在 Nvidia 支持下运行代码： optirun ./{executable}

# c - 在C中反转字符串中单词的顺序

> ID：13758423
> 
> 赞同：-1
> 
> 时间：2012-12-07T07:02:11.287
> 
> 标签：c

所以我正在尝试编写一个 C 程序，它将检查呈现给标准输入的数据并向后打印（到标准输出）每一行上的单词，每个单词都由一个空格分隔。我不想在一个单词中颠倒字母；我只想颠倒单词的顺序。我希望程序也能注意命令行参数，并让程序处理多个文件文件名。这是我想出的一些代码，想知道我是否走在正确的轨道上，如果不是什么可能会改变以到达我需要到达的地方：

```
#include<stdio.h>
#include<math.h>

void rev(char *l, char *r);

int main(int argc, char *argv[]) {
    char buf[] = "the world will go on forever";
    char *end, *x, *y;
    for(end=buf; *end; end++);
    rev(buf,end-1);
    x = buf-1;
    y = buf;
    while(x++ < end) {
        if(*x == '\0' || *x == ' ') {
           rev(y,x-1);
           y = x+1;
        }
    }
    printf("%s\n",buf);
    return(0);
}

void rev(char *l,char *r) {
    char t;
    while(l < r) {
        t = *l;
        *l++ = *r;
        *r-- = t;
    }
} 
```

**如何将我的代码编辑到可以从用户输入的字符串中获取字符串并反转该字符串并输出结果的位置？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:10:35.593

至少考虑到线的正常长度，如果我这样做，我*可能*会递归地这样做。在伪代码中，它会是这样的：

```
function reverse_words:
  read a word
  if end of line return
  call reverse_words
  print word that was read
  return
end function 
```

或者，读一整行，然后大致使用上面的过程来处理它。

稍微谨慎和明智地使用标准库，这仅比伪代码复杂一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:21:28.243

要读取用户的输入，请更改`char buf[] = "the world will go on forever";`为：

```
char buf[123];
printf("Please enter a bunch of words: ");
fgets(buf, sizeof buf, stdin); 
```

然后代码删除traling换行符，如果你只需要空格，fgets不会删除它：

```
int endInd = strlen(buf)-1;
if (buf[endInd] == '\n') buf[endInd] = 0;
/* else user typed longer line than sizeof buf, extra chars are left unread */ 
```

作为参考，首先谷歌点击“man fgets”： http: [//www.manpagez.com/man/3/fgets/](http://www.manpagez.com/man/3/fgets/)

请注意，因为它也是`gets`. *永远不要*使用`gets`，没有办法阻止用户给你缓冲区溢出。

替代答案：或者您的意思是，阅读命令行参数并以相反的顺序打印它们？尝试这个：

```
for (int ind = argc-1; ind >=1; --ind) {
    // use conditional operator to print space after all args except the one printed last
    printf("%s%s", argv[ind], (ind == 1 ? "" : " ") );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T07:26:25.140

所以，看起来你所拥有的确实会反转单词。有其他方法可以做到这一点，但这可能也同样有效。根据您的要求，我假设您最终想要反转名称在命令行中传入的文件中包含的单词。如果这是正确的，我会将您的主函数中的逻辑取出并将其放入一个名为 reversewords() 之类的单独函数中，然后将您的指针传递给它。然后，我将遍历您的参数并处理每个参数，并根据需要调用您的 reversewords 函数。我在您的问题中看到您还想反转用户可能键入的输入行。为此，我会在所有命令行解析完成后添加额外的代码。这将包含一个循环，该循环重复调用 gets() 并将结果指针传递给您的 reversewords 函数。

# c# - 使用 sqldatasource 的 Gridview

> ID：13758427
> 
> 赞同：0
> 
> 时间：2012-12-07T07:02:20.343
> 
> 标签：c#, asp.net, gridview, sqldatasource, updatecommand

我正在使用 Gridview 和 Sqldatasource，所以，当我尝试使用更新命令时，但是当我点击时，什么也没有发生，所以，如果我保存新记录并在点击更新命令按钮之后，那么，它运行良好。你知道发生了什么吗？接下来是我的代码被剪断

```
 <asp:GridView  ID="gvInfoCobradores" runat="server" CellPadding="4" 
             ForeColor="#333333" GridLines="None" AutoGenerateEditButton="True" 
             OnRowEditing="gvInfoAdmin_RowEditing" OnRowUpdating="gvInfoAdmin_RowUpdating" 
             DataSourceID="dsCobradorInfo" DataKeyNames="ID_Cobrador" Width="50%">
        <AlternatingRowStyle BackColor="White" />
             <Columns>
                 <asp:CommandField ShowDeleteButton="True" />
             </Columns>
        <EditRowStyle BackColor="#2461BF" />
        <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#EFF3FB" />
        <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />

    </asp:GridView>

        <asp:SqlDataSource ID="dsCobradorInfo" runat="server" ConnectionString="<%$ ConnectionStrings:SeminarioConnectionString %>" 
        SelectCommand="SELECT * FROM [UsuariosSistema].[Cobrador]" 
        OldValuesParameterFormatString="original_{0}" ConflictDetection="CompareAllValues" 
        DeleteCommand="DELETE FROM [UsuariosSistema].[Cobrador] WHERE [ID_Cobrador] = @original_ID_Cobrador AND [NombreUsuarioCobrador] = @original_NombreUsuarioCobrador AND [PasswordCobrador] = @original_PasswordCobrador AND [NombreCobrador] = @original_NombreCobrador AND [ApellidoPaternoCobrador] = @original_ApellidoPaternoCobrador AND [ApellidoMaternoCobrador] = @original_ApellidoMaternoCobrador AND (([TelCobrador] = @original_TelCobrador) OR ([TelCobrador] IS NULL AND @original_TelCobrador IS NULL)) AND (([CelCobrador] = @original_CelCobrador) OR ([CelCobrador] IS NULL AND @original_CelCobrador IS NULL)) AND (([CorreElectronicoCobrador] = @original_CorreElectronicoCobrador) OR ([CorreElectronicoCobrador] IS NULL AND @original_CorreElectronicoCobrador IS NULL))" 
        InsertCommand="INSERT INTO [UsuariosSistema].[Cobrador] ([NombreUsuarioCobrador], [PasswordCobrador], [NombreCobrador], [ApellidoPaternoCobrador], [ApellidoMaternoCobrador], [TelCobrador], [CelCobrador], [CorreElectronicoCobrador]) VALUES (@NombreUsuarioCobrador, @PasswordCobrador, @NombreCobrador, @ApellidoPaternoCobrador, @ApellidoMaternoCobrador, @TelCobrador, @CelCobrador, @CorreElectronicoCobrador)" 

             UpdateCommand="UPDATE [UsuariosSistema].[Cobrador] SET [NombreUsuarioCobrador] = @NombreUsuarioCobrador, [PasswordCobrador] = @PasswordCobrador, [NombreCobrador] = @NombreCobrador, [ApellidoPaternoCobrador] = @ApellidoPaternoCobrador, [ApellidoMaternoCobrador] = @ApellidoMaternoCobrador, [TelCobrador] = @TelCobrador, [CelCobrador] = @CelCobrador, [CorreElectronicoCobrador] = @CorreElectronicoCobrador WHERE [ID_Cobrador] = @original_ID_Cobrador AND [NombreUsuarioCobrador] = @original_NombreUsuarioCobrador AND [PasswordCobrador] = @original_PasswordCobrador AND [NombreCobrador] = @original_NombreCobrador AND [ApellidoPaternoCobrador] = @original_ApellidoPaternoCobrador AND [ApellidoMaternoCobrador] = @original_ApellidoMaternoCobrador AND (([TelCobrador] = @original_TelCobrador) OR ([TelCobrador] IS NULL AND @original_TelCobrador IS NULL)) AND (([CelCobrador] = @original_CelCobrador) OR ([CelCobrador] IS NULL AND @original_CelCobrador IS NULL)) AND (([CorreElectronicoCobrador] = @original_CorreElectronicoCobrador) OR ([CorreElectronicoCobrador] IS NULL AND @original_CorreElectronicoCobrador IS NULL))">
        <DeleteParameters>
            <asp:Parameter Name="original_ID_Cobrador" Type="Int32" />
            <asp:Parameter Name="original_NombreUsuarioCobrador" Type="String" />
            <asp:Parameter Name="original_PasswordCobrador" Type="String" />
            <asp:Parameter Name="original_NombreCobrador" Type="String" />
            <asp:Parameter Name="original_ApellidoPaternoCobrador" Type="String" />
            <asp:Parameter Name="original_ApellidoMaternoCobrador" Type="String" />
            <asp:Parameter Name="original_TelCobrador" Type="String" />
            <asp:Parameter Name="original_CelCobrador" Type="String" />
            <asp:Parameter Name="original_CorreElectronicoCobrador" Type="String" />
        </DeleteParameters>
        <InsertParameters>
            <asp:Parameter Name="NombreUsuarioCobrador" Type="String" />
            <asp:Parameter Name="PasswordCobrador" Type="String" />
            <asp:Parameter Name="NombreCobrador" Type="String" />
            <asp:Parameter Name="ApellidoPaternoCobrador" Type="String" />
            <asp:Parameter Name="ApellidoMaternoCobrador" Type="String" />
            <asp:Parameter Name="TelCobrador" Type="String" />
            <asp:Parameter Name="CelCobrador" Type="String" />
            <asp:Parameter Name="CorreElectronicoCobrador" Type="String" />
        </InsertParameters>
        <UpdateParameters>
            <asp:Parameter Name="NombreUsuarioCobrador" Type="String" />
            <asp:Parameter Name="PasswordCobrador" Type="String" />
            <asp:Parameter Name="NombreCobrador" Type="String" />
            <asp:Parameter Name="ApellidoPaternoCobrador" Type="String" />
            <asp:Parameter Name="ApellidoMaternoCobrador" Type="String" />
            <asp:Parameter Name="TelCobrador" Type="String" />
            <asp:Parameter Name="CelCobrador" Type="String" />
            <asp:Parameter Name="CorreElectronicoCobrador" Type="String" />
            <asp:Parameter Name="original_ID_Cobrador" Type="Int32" />
            <asp:Parameter Name="original_NombreUsuarioCobrador" Type="String" />
            <asp:Parameter Name="original_PasswordCobrador" Type="String" />
            <asp:Parameter Name="original_NombreCobrador" Type="String" />
            <asp:Parameter Name="original_ApellidoPaternoCobrador" Type="String" />
            <asp:Parameter Name="original_ApellidoMaternoCobrador" Type="String" />
            <asp:Parameter Name="original_TelCobrador" Type="String" />
            <asp:Parameter Name="original_CelCobrador" Type="String" />
            <asp:Parameter Name="original_CorreElectronicoCobrador" Type="String" />
        </UpdateParameters>
    </asp:SqlDataSource> 
```

提前致谢！！

# iphone - 控制器之间漂亮的缩放淡入淡出过渡，例如新的 Facebook、Gmail 应用程序

> ID：13758428
> 
> 赞同：5
> 
> 时间：2012-12-07T07:02:27.077
> 
> 标签：iphone, ios, user-interface, transitions

最近越来越多的应用程序正在使用新型视图之间的过渡。很难定义它，但过渡看起来像预览视图正在淡出，变低（向下平移）并缩小一点 - 所有这些都是同时发生的。它真的很微妙和优雅。

您可以在 Facebook 应用程序中以慢动作观察这种过渡 - 在墙上找到某人的照片，点击查看它，然后将全屏图像慢慢向下拖动，您会注意到墙壁从后面升起 - 褪色和缩放​​一点. 这就是过渡。过渡还涉及状态栏淡出。

![过渡状态](../Images/d0ac0bacf2f1543daa07b97a7363c9c9.png)

当您从左窗格打开设置时，此转换也出现在 Gmail 2.0 中。

我认为有一个特定的框架或准备好的方法，因为越来越多的应用程序实现了这个。但也许我也错了，因为我在过渡的轨迹中看到了一些应用程序的一些细微差别——例如。Gmail 使用了一点轮播效果，但 facebook 只是缩小到中间。

无论如何，这似乎是一种新趋势。

我正在寻找一些参考或框架或实现这种转换的诀窍。

感谢您提供任何有用的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T11:45:52.187

试试这个链接。我认为这正是你正在寻找的东西[https://github.com/kentnguyen/KNSemiModalViewController](https://github.com/kentnguyen/KNSemiModalViewController)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T07:19:26.747

我第一次看到它在国家地理应用程序中使用...尝试使用这两种方法，第一种“将其放回”，第二种“将其带回”。过去它对我来说效果很好，只需进行一些调整以满足您的需求。

```
- (void)dropItBack:(id)sender
{
    // Position
    CABasicAnimation *posAnimation = [CABasicAnimation animationWithKeyPath:@"position"];
    posAnimation.toValue = [NSValue valueWithCGPoint:CGPointMake(160, 284)];//center point

    // Opacity
    CABasicAnimation *opacityAnimation = [CABasicAnimation animationWithKeyPath:@"opacity"];
    opacityAnimation.toValue = [NSNumber numberWithFloat:0.5f];

    CABasicAnimation *scaleAnimation = [CABasicAnimation animationWithKeyPath:@"transform.scale"];
    scaleAnimation.toValue = [NSNumber numberWithDouble:0.8];

    // Dramaticism of the Z rotation
    // A lower number is more dramatic
    float distance = 1000;
    CATransform3D trans = CATransform3DIdentity;
    trans.m34 = 1.f / -distance;

    // Rotate Back
    CABasicAnimation *rockBack = [CABasicAnimation animationWithKeyPath:@"transform"];
    rockBack.toValue = [NSValue valueWithCATransform3D:CATransform3DRotate(trans, M_PI_4, 1.f, 0.f, 0.f)];
    rockBack.beginTime = 0.f;

    // Rotate forward
    trans.m34 = 0.f;
    CABasicAnimation *rockForward = [CABasicAnimation animationWithKeyPath:@"transform"];
    rockForward.toValue = [NSValue valueWithCATransform3D:CATransform3DRotate(trans, M_PI_4, -1.f, 0.f, 0.f)];
    rockForward.beginTime = 0.25f;

    CAAnimationGroup *animationGroup = [CAAnimationGroup animation];
    animationGroup.duration = 0.5f;
    animationGroup.repeatCount = 0.f;
    animationGroup.removedOnCompletion = NO;
    animationGroup.autoreverses = NO;
    animationGroup.fillMode = kCAFillModeForwards;
    animationGroup.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    [animationGroup setAnimations:[NSArray arrayWithObjects:rockBack, rockForward, scaleAnimation, posAnimation, opacityAnimation, nil]];

    [self.navigationController.view.layer addAnimation:animationGroup forKey:nil];

    popsheet = [UIButton buttonWithType:UIButtonTypeCustom];
    [popsheet setBackgroundColor:[UIColor blueColor]];
    [popsheet setFrame:CGRectMake(0, 580, 320, 400)];
    [popsheet addTarget:self action:@selector(bringItForward:) forControlEvents:UIControlEventTouchUpInside];
    [self.tabBarController.view addSubview:popsheet];

    [UIView animateWithDuration:0.3 animations:^{
        [popsheet setFrame: CGRectMake(0, 180, 320, 400)];
    }];
}

- (void)bringItForward:(id)sender
{
    // Position
    CABasicAnimation *posAnimation = [CABasicAnimation animationWithKeyPath:@"position"];
    posAnimation.toValue = [NSValue valueWithCGPoint:CGPointMake(160, 284)];

    // Opacity
    CABasicAnimation *opacityAnimation = [CABasicAnimation animationWithKeyPath:@"opacity"];
    opacityAnimation.toValue = [NSNumber numberWithFloat:1.f];

    // Scale
    CABasicAnimation *scaleAnimation = [CABasicAnimation animationWithKeyPath:@"transform.scale"];
    scaleAnimation.toValue = [NSNumber numberWithDouble:1.f];

    // Dramaticism of the Z rotation
    // A lower number is more dramatic
    float distance = 1000;
    CATransform3D trans = CATransform3DIdentity;
    trans.m34 = 1.f / distance;

    // Rotate back
    CABasicAnimation *rockBack = [CABasicAnimation animationWithKeyPath:@"transform"];
    rockBack.toValue = [NSValue valueWithCATransform3D:CATransform3DRotate(trans, M_PI_4, 1.f, 0.f, 0.f)];
    rockBack.beginTime = 0.f;

    // Rotate forward
    trans.m34 = 0.f;
    CABasicAnimation *rockForward = [CABasicAnimation animationWithKeyPath:@"transform"];
    rockForward.toValue = [NSValue valueWithCATransform3D:CATransform3DRotate(trans, M_PI_4, -1.f, 0.f, 0.f)];
    rockForward.beginTime = 0.25f;

    CAAnimationGroup *animationGroup = [CAAnimationGroup animation];
    animationGroup.duration = 0.5f;
    animationGroup.repeatCount = 0.f;
    animationGroup.removedOnCompletion = NO;
    animationGroup.autoreverses = NO;
    animationGroup.fillMode = kCAFillModeForwards;
    animationGroup.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    [animationGroup setAnimations:[NSArray arrayWithObjects:posAnimation, rockBack, rockForward, opacityAnimation, nil]];

    [self.navigationController.view.layer addAnimation:animationGroup forKey:nil];
    [UIView animateWithDuration:0.3 animations:^{
        [popsheet setFrame: CGRectMake(0, 580, 320, 400)];
    }];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-09T04:42:28.070

我认为你应该试试这个库：

[https://github.com/michaelhenry/MHFacebookImageViewer](https://github.com/michaelhenry/MHFacebookImageViewer)

# c# - 如何在表格中克隆包含文本框和动态下拉框的行

> ID：13758430
> 
> 赞同：1
> 
> 时间：2012-12-07T07:02:29.123
> 
> 标签：c#, jquery, asp.net-mvc-3

我有一个包含一行的表，其中存在一个文本框和一个动态下拉列表，我想克隆该行。为此，我正在执行以下操作：

# 下面的代码用于显示包含一行的表格，其中包含一个文本框和动态下拉框：

```
<table>
<tr>
    <td id="j" class="i">
        Skills
        <input data-bind="value:skl" name="skl" id="skl" style="width: 120px; height: auto"
            data-type="string" class="k-textbox" />
        <input id="styp" style="width: 120px; height: auto" /><span></span>
        <button class="add" value="add">
            Add</button>
    </td>
    <td>
    </td>
    <td>
        @* <span data-for="styp" class="k-invalid-msg"></span></td>*@
    </td>
</tr>
@*this code is to display the add rows and delete rows functionality*@
<tr id="fo" style="display: none">
    <td width="100%">
        <input type="text" class="k-textbox" id="a" width="100 px" height="20 px" />
        <select style="width: 90px; height: auto" id="options" data-bind="value:skill" data-text-field="skill"
            data-value-field="skillid" data-source="skilldatasource" data-role="dropdownlist">
        </select>
        <button type="button" id="b" class="delete" value="delete">
            Delete</button>
    </td>
    <td>
    </td>
    <td>
    </td>
</tr>
</table>

//Below code is for defining datasource to the dropdownlist

var skilldatasource = new kendo.data.DataSource({
transport: {
    read:
        {
            url: "/ProfileMgmtProfileSearch/Skills",
            type: "POST",
            dataType: "json"
        }
},
schema: {
    model: {
        id: "skillid",
        fields: {
            skillid: { type: "number" },
            skill: { type: "string" }
        }
    }
}
})

skilldatasource.read();

$(document).ready(function () {
//Add button click functionality to Add new row to the Skills row with same fields //and also append a delete button to it:
$('.add').click(function () {
    alert("cliked");
    id++;
    var prot = $("#fo").find("td").clone();
    // $("#options").clone();
    prot.attr("class", "")
    prot.attr("id", id);
    prot.addClass("new");
    $('<tr/>').append(prot).insertAfter($('#theTable tbody>tr:last'));
    var dropdownlist2 = prot.find("select#options");
    alert("hai....");
    alert(dropdownlist2);
    dropdownlist2.kendoDropDownList({});
});

// button click functionality to delete the specified row containing that delete button
$('#theTable').delegate('.delete', 'click', function () {
    $(this).closest("td").remove();
    var first = dropdownlist.dataSource.get(c--);
    dropdownlist.dataSource.remove(first);
})
}); 
```

==================================================== ============================

```
Here by executing the above code am able to clone the entire row but the dropdown box is not getting values in it i.e., datasource is not cloned, so plz help me out of these problem. 
```

# vba - 使用 VBA 在 Chrome 中开源代码

> ID：13758431
> 
> 赞同：1
> 
> 时间：2012-12-07T07:02:40.593
> 
> 标签：vba, google-chrome, excel

到目前为止我已经得到了这个。只有 Chrome 浏览器打开（它是空的）并且它不考虑 url。我应该对 Shell 脚本进行哪些更改？

```
Sub ViewSource()
  Dim chromePath As String
  chromePath = """C:\Program Files\Google\Chrome\Application\chrome.exe"""

  Shell (chromePath & "view-source:http://search.yahoo.com/search;_ylt=A0oGdXgbd8FQJXoAuj6l87UF?p=cars%20parts&fr=sfp&pqstr=car%20parts")
End Sub 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T07:23:45.647

我在 cmd 提示符下在 Chrome.exe 上尝试了许多不同的标志，但没有工作。

但是你可以通过这种方式获取源代码：

```
Sub t()
GetSource "http://search.yahoo.com/search;_ylt=A0oGdXgbd8FQJXoAuj6l87UF?p=cars%20parts&fr=sfp&pqstr=car%20parts"
End Sub

Function GetSource(url As String) As String

With CreateObject("MSXML2.XMLHTTP")
    .Open "GET", url
    .Send
    Do: DoEvents: Loop Until .Readystate = 4
    GetSource = .responsetext
    .abort
End With 
```

# android - 进度对话框未在异步任务中关闭

> ID：13758432
> 
> 赞同：1
> 
> 时间：2012-12-07T07:02:42.377
> 
> 标签：android

AsyncTask 中的进度对话框不会关闭，即使 progressDialog.dismiss 在 onPostExecute() 中运行。

我已经尝试对 SO 的相关问题实施许多答案，但到目前为止没有成功。

我确信我必须忽略一些非常基本的东西，但我被卡住了。

任何指向解释和代码片段的指针都会很棒，谢谢。

**主要的**

```
public class Main extends Activity {
    String result;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        asyncTask task = new asyncTask("Loading ...", this);
        try {
            result = task.execute("Question").get();
        }
        catch (Exception e) {
            Log.e("Error: ", e.toString());
        }
    }
} 
```

**异步任务**

```
public class asyncTask extends AsyncTask<String, Void, String> {

    private ProgressDialog progressDialog;
    private String message;
    private Context context;

    public asyncTask(String msg, Context ctx) {
        this.context = ctx;
        message = msg;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        progressDialog = new ProgressDialog(context);
        progressDialog.show(context, "", message, true, false);
    }

    @Override
    protected String doInBackground(String... params) {
        int count = 100000;
        for (int i = 0; i < count; i++) {
           // waste time
        }
        return "Answer";
    }

    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);
        progressDialog.dismiss();
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T07:51:08.193

实际上你正在做：

```
progressDialog.show(context, "", message, true, false); 
```

相反，它应该是：

```
progressDialog = ProgressDialog.show(context, "", message, true, false); 
```

您必须静态调用 show 方法并将其分配给您的`progressDialog`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T07:07:56.307

在您的`onPostExecute`

```
@Override
protected void onPostExecute(String result) {
    try{
           if(progrssDialog.isShowing()){
                    progressDialog.dismiss();
           }  
    }
  catch(Exception e){
      e.printStackTrace();
  }
  finally
  {
       progressDialog.dismiss();
  }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-16T12:31:21.053

我发现的一个常见问题是变量范围。大多数时候，ProgressDialog 将在 Method 内定义，而在该方法之外无法访问。

你需要像这样声明它，

```
Public Class MainActivity extends Activity {

ProgressDialog progressDialog;
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
}

private class asyncTask extends AsyncTask<String, Void, String> {

@Override
protected void onPostExecute(String result) {
    super.onPostExecute(result);
    progressDialog.dismiss();
}
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T07:08:08.367

代替

```
task.execute("Question").get(); 
```

和

```
task.execute("Question"); 
```

通过打电话给`.get()`你强迫`main thread`等待。它会/可以挂起你的用户界面。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-12-07T07:06:54.887

```
 progressDialog.dismiss(); 
```

把它放在返回语句之前的 doInBackground() 方法中。

# gmail - IMAP 数组值自发变化 - PHP

> ID：13758436
> 
> 赞同：0
> 
> 时间：2012-12-07T07:02:58.773
> 
> 标签：gmail, imap

我的公司使用脚本生成的电子邮件与客户通信。到目前为止，我们不得不手动整理这些电子邮件、查找客户信息、打印并归档。我正在编写一个自动执行此操作的脚本，直到 10 分钟前 Google 停止发送带有`imap_fetch_overview()`.

这是我的做法：

```
$msgov=imap_fetch_overview($inbox,$uid,FT_UID);
$msgsub= $msgov[0]->subject;
$msgfr= $msgov[0]->from;
$msgid= $msgov[0]->uid;
$message = imap_fetchbody($inbox,$uid,1,FT_UID);
//echo message info, then message
echo "..."; 
```

这一直很好，直到大约 10 分钟前我开始收到此错误：`Notice: Undefined property: stdClass::$subject in C:\wamp\www\gmil\index.php on line 113`

所以我继续`echo var_dump($msgov);`，突然它不再显示主题了..根据[手册](http://php.net/manual/en/function.imap-fetch-overview.php)它应该给我这个主题。我是做错了什么，还是我只是不幸在谷歌决定停止发送它的确切时间这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:47:33.620

我很笨。在一条消息不包含主题之后，它停止在所有后续循环中检查该值。我是这样解决的：

`if(isset($overview[0]->subject)){$sub=$overview[0]->subject;}else{$sub="No Subject";}`

然后调用`$sub`而不是`$overview[0]->subject`.

# c# - 属性为 List 的对象的分层数据模板

> ID：13758443
> 
> 赞同：0
> 
> 时间：2012-12-07T07:03:32.783
> 
> 标签：c#, wpf, hierarchicaldatatemplate

我有一个具有这种结构的对象

```
public class Parent
{
  public string Name {get; set;}
  public int ID {get; set;}
  public List<Child> Children{set; get;}
  public Address HomeAddress {get; set;}
} 
```

**我使用ObjectToObservableListConverter**为地址、父级、子级创建了一个分层模板

 **```
 public class ObjectToObservableListConverter : IValueConverter
    {

        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            if (value != null)
            {
                return new ObservableCollection<Graphic> { (value as Graphic) };
            }
            return null;
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            throw new NotImplementedException();
        }    

    } 
```

和**PropertyToListConverter**

```
public class PropertyToListConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            Type type = value.GetType();
            PropertyInfo[] propertyList = value.GetType().GetProperties();
            List<object> values =
                (from property in propertyList
                 //where property.GetCustomAttributes(typeof(NotForTreeViewAttribute), false).Count() == 0
                 select property.GetValue(value, BindingFlags.Default, null, null, CultureInfo.InvariantCulture)).ToList();
            return values;

        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    } 
```

我创建的**模板是：**

```
 <TreeView  ItemsSource="{Binding Path=Parent,
                                            Converter={StaticResource ResourceKey=objectToListConverter},
                                            UpdateSourceTrigger=PropertyChanged}">
            <TreeView.Resources>

    <HierarchicalDataTemplate DataType="{x:Type en:Parent}"
                                                  ItemsSource="{Binding Path=Children}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Margin="0,4,0,0"
                                           VerticalAlignment="Center"
                                           FontWeight="Bold"
                                           Text="Children" />
                        </StackPanel>
                    </HierarchicalDataTemplate>
                    <HierarchicalDataTemplate DataType="{x:Type en:Child}"
                                                  ItemsSource="{Binding Converter={StaticResource ResourceKey=propertyToListConvertor}}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Margin="0,4,0,0"
                                           VerticalAlignment="Center"
                                           FontWeight="Bold"
                                           Text="{Binding Path=ChildName}" />
                        </StackPanel>
                    </HierarchicalDataTemplate>
                    <HierarchicalDataTemplate DataType="{x:Type en:Address}"
                                                  ItemsSource="{Binding Converter={StaticResource ResourceKey=propertyToListConvertor}}">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Margin="0,4,0,0"
                                           VerticalAlignment="Center"
                                           FontWeight="Bold"
                                           Text="AddressType" />
                        </StackPanel>
                    </HierarchicalDataTemplate>

</TreeView.Resources>
</TreeView> 
```

如果我在 Parent 上创建模板并设置 Children 属性的 ItemsSource 路径，我不会获取 Parent 的剩余属性。或者，如果我将 ItemsSource 设置为 Parent 类型的属性和 user 属性以列出转换器，我不会得到子级的层次结构。

我错过了什么？

请帮忙。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:59:53.253

我找到了问题的解决方案。

我更改了转换器以将列表属性设置为另一个自定义类，该类仅包含一个列表类型的属性，并为此编写了一个分层数据模板。

**PropertyToList 转换器**

```
 public class PropertyToListConverter : IValueConverter
        {
            public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
            {
                Type type = value.GetType();
                PropertyInfo[] propertyList = value.GetType().GetProperties();
                List<object> values =
                    (from property in propertyList
                     select GetValueOrElementName(value, property)).ToList();
                return values;

            }

            private static object GetValueOrElementName(object value, PropertyInfo property)
            {
                var propVal = property.GetValue(value, BindingFlags.Default, null, null, CultureInfo.InvariantCulture);

                if (property.PropertyType.IsGenericType && propVal != null)
                {
                    Type type = property.PropertyType.GetGenericArguments().FirstOrDefault();
                    if (type == typeof(Child))
                        return new EnumerableClass() { Children = propVal as List<Child> };                   
                }

                if (propVal != null && !string.IsNullOrEmpty(propVal.ToString()))
                    return propVal;

                return "Property["+ property.Name+"]";

            }

            public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
            {
                throw new NotImplementedException();
            }
        } 
```

**自定义类**

```
 public class EnumerableClass
    {        
        public string Name { get; set; }
        public List<Child> Children
        {
            get;
            set;
        }        
    } 
```

**分层数据模板**

```
<HierarchicalDataTemplate DataType="{x:Type en:Parent}"
                                              ItemsSource="{Binding Converter={StaticResource ResourceKey=propertyToListConvertor}}">
                    <StackPanel Orientation="Horizontal">                        
                        <TextBlock Margin="0,4,0,0"
                                       VerticalAlignment="Center"
                                       FontWeight="Bold"
                                       Text="{Binding Path=ParentName}" />
                    </StackPanel>
                </HierarchicalDataTemplate>
                <HierarchicalDataTemplate DataType="{x:Type ap:EnumerableClass}"
                                              ItemsSource="{Binding Path=Children,UpdateSourceTrigger=PropertyChanged}">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Margin="0,4,0,0"
                                       VerticalAlignment="Center"
                                       FontWeight="Bold"
                                       Text="Children" />
                    </StackPanel>
                </HierarchicalDataTemplate> 
```**

# scala - Scala Slick 如何将 Scala 代码翻译成 JDBC？

> ID：13758445
> 
> 赞同：18
> 
> 时间：2012-12-07T07:03:50.660
> 
> 标签：scala, slick

[Slick](http://slick.typesafe.com/)如何翻译代码，例如：

```
val q2 = for {
  c <- Coffees if c.price < 9.0
  s <- Suppliers if s.id === c.supID
} yield (c.name, s.name)
for(t <- q2) println("  " + t._1 + " supplied by " + t._2) 
```

进入 JDBC？

它是否使用 Scala 虚拟化？它使用其他方法吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-12-07T07:27:16.563

Slick 的*稳定 API*通过它所谓的*提升嵌入*来实现这一点。您的示例显然使用了稳定的 API（正如您`===`用于相等而不是`==`）。

Slick（以及 Scala）的美妙之处在于 - 无需使用宏或 Scala-Virtualized 即可实现这一点。 *（旁注：Slick 的**实验性 API**确实使用宏 - 这将允许您使用`==`而不是`===`or `is`）*

使用以下方式实现向 SQL 的转换：

1.  Scala 的`for`理解语法，被翻译为方法调用。Slick 中定义的表是***Monads*** - 它们具有神奇`foreach`的 , `map`, `flatMap`和 `filter`方法，允许它们在`for`“循环”中表达，而 Scala 将它们转换为方法调用（如[@emil-ivanov 的另一个答案](https://stackoverflow.com/a/13758657/1305344)提供的代码中正确说明的那样）。

    与常规的 Scala 集合一样， is 用于对/和;`for`的嵌套方法调用的语法糖。*与*常规集合不同，Slick对象的版本和查询的返回*表示* ，与每个过滤条件 ( ) 或连接 (如)一起构建`flatMap``map``filter`*`Table``map``filter`*`if``s <- Suppliers if s.id is c.supID`**

     **因此，*类型*不是`q2`您通常的集合（因为 Scala 中的 for 理解通常用于返回），而是查询的表示。（就像[Scala Option Monad](http://www.scala-lang.org/api/current/scala/Option.html)也适用于`for`理解，尽管它不是一个“集合”（以那样的方式`List`）`Map`）

    您可以使用 来查看基础查询`q2.selectStatement`。** 
***   Scala 的隐式*提升*-`c.price`不是`Int`一个列值的表示，而是一个列值的表示 - 所以表达式`c.price < 9.0`变成`c.price.<(Const(9.0))` （an`Int`被提升到所需的类型），并且`<`只是表示`c.price`, a的类的一个方法`Column`。该`<`方法不做`<`通常做的事情（在普通`Int`s 的情况下） - 它只是返回 SQL AST 的表示形式，该表示形式对应于`price < 9`生成并发送到 JDBC 执行的 SQL 的一部分。** 

 **就细节而言，还有很多其他事情要做，但我认为查询单子和隐式提升是主要成分。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-07T07:21:49.357

在 Scala 中，`for`“循环”实际上并不是一种特殊的语言结构，而是语法糖。你的第一个例子

```
val q2 = for {
  c <- Coffees if c.price < 9.0
  s <- Suppliers if s.id === c.supID
} yield (c.name, s.name) 
```

翻译成以下内容：

```
val q2 = Coffees.withFilter(_.price < 9.0).flatMap(c =>
    Suppliers.withFilter(_.id === c.supID).map(s =>
        (c.name, s.name)
    )
) 
```

现在，`flatMap`, `map`, `withFilter`(and `foreach`) 实际上并不过滤集合，而是收集 AST（抽象语法树）中的内容，然后将其处理给 Slick 以转换为 SQL。

此外，`c.price`,`c.supID`实际上是 Slick `column`，其`<`, `>`, `===`（等等）方法不返回 bool，但也会收集比较，然后将其传递下来以转换为 SQL。

[这是创作者的一次演讲](http://skillsmatter.com/podcast/scala/slick-database-access-with-scala/ac-5896)，其中大部分内容都被描述（正确）。**

# winforms - 将 AOP 应用于 3 层 winforms 应用程序

> ID：13758450
> 
> 赞同：5
> 
> 时间：2012-12-07T07:04:10.883
> 
> 标签：winforms, aop, 3-tier

**背景**

我正在尝试使用 AOP 为新项目实现日志记录和异常处理。我希望通过 Windows 窗体应用程序的所有 3 层来应用它。我使用温莎城堡作为容器。

我已经通过 AOP 成功地将日志记录应用到了一个非常简单的示例中。但是将其扩展到 winforms 应用程序被证明是困难的。

**问题**

我设法在容器中注册了主表单并应用了日志记录方面。但是这方面正在受到所有事件 wrt winforms 的影响。（例如：get_ForeColor、get_BackColor、OnControlAdded、DefWndProc、DestroyHandle..等）

我实际需要记录的事件和方法没有显示在日志文件（方面）中。我在这里做错了什么。AOP 是否总是需要接口实现？

我还想知道 AOP 的框架（或架构）应该是什么样子。应该如何以及在何处注册 3 层的所有组件。它应该在应用程序启动时吗？任何示例的链接都将非常有帮助。

**PS：**这是我第一次尝试实现 AOP。要添加它，我必须在我不太熟悉的 vb.net 中编写代码。我也不能使用 Post Sharp（资金是个问题）。

# apache - 如何将子域的特定端口重定向到另一个 IP 地址

> ID：13758452
> 
> 赞同：1
> 
> 时间：2012-12-07T07:04:17.467
> 
> 标签：apache, http, dns, subdomain

好的，我注册了一个域，出于这些目的，我将其称为*mydomain.com*。我也有共享主机（仅供参考），所以我在做我计划的事情时可能会受到限制。

所以基本上我有一个子域*gserver.mydomain.com*，它指向主机服务器上的一个目录，基本上显示了这个子域的一个单独的网站，显示有关它的相应游戏服务器的信息。

因为它是关于游戏服务器的，所以我自然希望*gserver.mydomain.com*也将用户定向到游戏服务器的 IP，但我不能将它同时连接到区域记录中的 Web 服务器和游戏服务器，因为它们是单独的 IP。

如果游戏服务器侦听..假设端口 2400，那么是否可以让*gserver.mydomain.com* : **2400**指向另一个 IP（游戏服务器的 IP），同时仍保留端口 80 上的 Web 主机 IP。

我对如何去做有一个大致的了解，但是对于当前的托管计划，限制可能会阻止我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T03:48:17.407

谈到 DNS，不可能使用端口（tcp 或 udp）信息，因为它只处理名称/IP（基本上）。因此，gserver.mydomain.com 将始终解析为 DNS 数据库中的 IP，而不考虑 :port。实际上， :port 不是 DNS 名称的一部分。如果您的所有服务器都是 HTTP 服务器并且您可以访问 Apache Web 服务器，您可以使用类似 proxy_pass 的东西。你可以看看这个链接[http://httpd.apache.org/docs/2.4/mod/mod_proxy.html#proxypass](http://httpd.apache.org/docs/2.4/mod/mod_proxy.html#proxypass)

# sql-server - 自定义报告参数的位置

> ID：13758453
> 
> 赞同：1
> 
> 时间：2012-12-07T07:04:20.880
> 
> 标签：sql-server, reportbuilder3.0

我在 Report Builder 3.0 中创建了一个报告。

我在调整选择参数的布局时遇到问题 - 参见图片：

![报告参数](../Images/a2ea61f88ecf19a9c91e7419ceffb19f.png)

我希望参数在同一行，但我似乎无法弄清楚这是如何完成的。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T01:54:58.557

这是不可能的。该服务会自动将它们设置为两个，然后再设置。

[微软报告参数](http://technet.microsoft.com/en-us/library/dd220464.aspx "报告参数")

# ios - 开关盒上的 NSString

> ID：13758457
> 
> 赞同：0
> 
> 时间：2012-12-07T07:04:32.523
> 
> 标签：ios

如果像这样，而不是使用 else

```
 if([screen isEqualToString :@"A"]){

               }
             else if(screen isEqualToString:@"B"){

               } 
```

它会像这样工作吗

```
 switch ([string isEqualToString:screen]){
          case ISA:
          break;

          case ISB:
          break;

          default:
          break;
       } 
```

其中 ISA 和 ISB 定义为

```
 #define ISA [screen isEqualToString:A] and **will it be efficient** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:12:33.513

不，我绝对不这么认为。switch/case 都是关于数字 if/then/else 的情况。

但是，您可以执行以下操作：

编写一个函数并将可变数量的参数传递给它（因为 Objective-c 实现了 C 查找 va_args 的语法）。将原始字符串和要比较的字符串传递给它。

在该函数内部，使用“for”循环，它会逐一比较字符串，直到它到达末尾或根据您的条件找到匹配项。

一旦满足任何一个，返回索引。您可以在 switch case 中使用该索引。一个小例子：

```
switch([self compareStrings:@"FirstString" Options:"@FirstString", @"SecondString"]) {
    case 0: //FirstString
    break;

    case 1: //SecondString
    break;

    default: //Not found
    break;
} 
```

那应该行得通。关于您的功能：请务必合并 Optioncount，或使选项“nil”终止，否则该功能将不知道何时实际到达终点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T07:26:04.967

根据 ATaylor 和 ACB 的说法，字面上的答案是不。开关需要整数，充其量你最终会进行指针比较，这与`isEqualToString:`.

减少级联测试的句法分量和处理成本的选项`if`是基于字典的——原则上你可以用字符串键控的块填充字典，但是对于大多数实际目的，你需要经常创建字典，所以我倾向于填充选择器。例如

```
NSDictionary *stringsToSelectors =
    @{
          @"A" : [NSValue valueWithPointer:@selector(doTaskA)],
          @"B" : [NSValue valueWithPointer:@selector(doTaskA)],
    };

SEL selector = [[stringsToSelectors objectForKey:string] pointerValue];
[self performSelector:selector];

...

- (void)doTaskA
{
    // etc, etc
} 
```

如果你想变得更加自然动态，你甚至可以选择：

```
NSString *selectorName = [NSString stringWithFormat:@"doTask%@", string];
SEL selector = NSSelectorFromString(selectorName);
if([self respondsToSelector:selector]) [self performSelector:selector];

...

- (void)doTaskA /* etc, etc */ 
```

# c# - 将 UAC 屏蔽添加到按钮并保留其背景图像？

> ID：13758458
> 
> 赞同：9
> 
> 时间：2012-12-07T07:04:32.607
> 
> 标签：c#, winforms, uac, dllimport

在 winforms 应用程序中使用 C# 和 .Net 4.0：是否可以将 UAC 屏蔽添加到按钮并保留按钮背景图像？如何？

这是我目前正在使用的，但它会删除图像......

```
[DllImport("user32.dll")]
public static extern int SendMessage(IntPtr hWnd, uint Msg, int wParam, int lParam);

public static void UACToButton(Button button, bool add)
{
    const Int32 BCM_SETSHIELD = 0x160C;
    if (add)
        {
        // The button must have the flat style
        button.FlatStyle = FlatStyle.System;
        if (button.Text == "")
        // and it must have text to display the shield
            button.Text = " ";
            SendMessage(button.Handle, BCM_SETSHIELD, 0, 1);        
        }
        else
            SendMessage(button.Handle, BCM_SETSHIELD, 0, 0);    
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-02-09T18:47:43.640

正如 Elmue 所提到的，SystemIcons.Shield 是访问 UAC Shield 图标的最简单方法。这是我用来将其添加到其他图像之上的方法：

```
public static Image AddUACShieldToImage(Image image)
    {
        var shield = SystemIcons.Shield.ToBitmap();
        shield.MakeTransparent();

        var g = Graphics.FromImage(image);
        g.CompositingMode = CompositingMode.SourceOver;
        g.DrawImage(shield, new Rectangle(image.Width / 2, image.Height / 2, image.Width / 2, image.Height / 2));

        return image;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T13:24:40.900

也许这会有所帮助： http: [//blog.csharphelper.com/2011/03/03/add-uac-shields-to-buttons-menu-items-and-picture-boxes-in-c.aspx](http://blog.csharphelper.com/2011/03/03/add-uac-shields-to-buttons-menu-items-and-picture-boxes-in-c.aspx)

它采用 UAC 屏蔽并返回一个位图，该位图可以放置在任何支持位图的东西上。

编辑：这是一些可以工作的粗略示例代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Runtime.InteropServices;

namespace UAC_Test
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        [DllImport("user32.dll")]
        public static extern int SendMessage(IntPtr hWnd, uint Msg, int wParam, int lParam);

        // Make the button display the UAC shield.
        public static void AddShieldToButton(Button btn)
        {
            const Int32 BCM_SETSHIELD = 0x160C;

            // Give the button the flat style and make it display the UAC shield.
            btn.FlatStyle = System.Windows.Forms.FlatStyle.System;
            SendMessage(btn.Handle, BCM_SETSHIELD, 0, 1);
        }

        // Return a bitmap containing the UAC shield.
        private static Bitmap shield_bm = null;
        public static Bitmap GetUacShieldImage()
        {
            if (shield_bm != null) return shield_bm;

            const int WID = 50;
            const int HGT = 50;
            const int MARGIN = 4;

            // Make the button. For some reason, it must
            // have text or the UAC shield won't appear.
            Button btn = new Button();
            btn.Text = " ";
            btn.Size = new Size(WID, HGT);
            AddShieldToButton(btn);

            // Draw the button onto a bitmap.
            Bitmap bm = new Bitmap(WID, HGT);
            btn.Refresh();
            btn.DrawToBitmap(bm, new Rectangle(0, 0, WID, HGT));

            // Find the part containing the shield.
            int min_x = WID, max_x = 0, min_y = HGT, max_y = 0;

            // Fill on the left.
            for (int y = MARGIN; y < HGT - MARGIN; y++)
            {
                // Get the leftmost pixel's color.
                Color target_color = bm.GetPixel(MARGIN, y);

                // Fill in with this color as long as we see the target.
                for (int x = MARGIN; x < WID - MARGIN; x++)
                {
                    // See if this pixel is part of the shield.
                    if (bm.GetPixel(x, y).Equals(target_color))
                    {
                        // It's not part of the shield.
                        // Clear the pixel.
                        bm.SetPixel(x, y, Color.Transparent);
                    }
                    else
                    {
                        // It's part of the shield.
                        if (min_y > y) min_y = y;
                        if (min_x > x) min_x = x;
                        if (max_y < y) max_y = y;
                        if (max_x < x) max_x = x;
                    }
                }
            }

            // Clip out the shield part.
            int shield_wid = max_x - min_x + 1;
            int shield_hgt = max_y - min_y + 1;
            shield_bm = new Bitmap(shield_wid, shield_hgt);
            Graphics shield_gr = Graphics.FromImage(shield_bm);
            shield_gr.DrawImage(bm, 0, 0,
                new Rectangle(min_x, min_y, shield_wid, shield_hgt),
                GraphicsUnit.Pixel);

            // Return the shield.
            return shield_bm;
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            Graphics gfx = Graphics.FromImage(button1.BackgroundImage);
            Bitmap shield = GetUacShieldImage();
            gfx.DrawImage(shield, button1.Width / 2, button1.Height / 2);
        }
    }
} 
```

这是在背景图像上绘制 UAC 盾牌。您可以调整按钮顶部的图像位置。它看起来不像系统 UAC 盾牌那么漂亮，但它确实在背景图像的顶部显示了 UAC 盾牌图标。

# layout - symfony2.1 不能翻译

> ID：13758460
> 
> 赞同：0
> 
> 时间：2012-12-07T07:04:40.173
> 
> 标签：layout, configuration, routing, translation, symfony-2.1

翻译有问题是 Symfony2.1 我尝试了 symfony_book 中提供的几乎所有方法，但是只有从英语到法语的翻译有效，反向不起作用是我的 routing.yml

```
_acceuil:
pattern:  /{_locale}/acceuil/
defaults: { _controller: gestionConferenceApplicationBundle:acceuil:acceuil, _locale: en }
requirements:
  _locale: en|fr|de 
```

是我的布局页面，我有那些允许在语言之间切换的链接：

```
<a  style="padding-top: -10px;" href="{{ path('_acceuil', {'_locale': 'fr' }) }}" >FRANCAIS</a>
        <a  style="padding-top: -10px;" href="{{ path('_acceuil', {'_locale': 'en' }) }}" >ANGLAIS</a> 
```

这条线用于测试

```
{{ 'welcome in my site'|trans }} 
```

这是我的messages.fr.xlf

```
 <?xml version="1.0"?>
<xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2">
    <file source-language="en" datatype="plaintext" original="file.ext">
        <body>
            <trans-unit id="1">
                <source>welcome in my site</source>
                <target>bienvenue dans mon site</target>
            </trans-unit>
        </body>
    </file>
</xliff> 
```

这是我的messages.en.xlf

```
 <?xml version="1.0"?>
<xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2">
    <file source-language="fr" datatype="plaintext" original="file.ext">
        <body>
            <trans-unit id="1">
                <source>bienvenue dans mon site</source>
                <target>welcome in my site</target>
            </trans-unit>
        </body>
    </file>
</xliff> 
```

这是我们对我的 config.yml 感兴趣的部分：

```
framework:
#esi:             ~
translator:      { fallback: en }
secret:          "%secret%"
router:
    resource: "%kernel.root_dir%/config/routing.yml"
    strict_requirements: "%kernel.debug%"
form:            true
csrf_protection: true
validation:      { enable_annotations: true }
templating:      { engines: ['twig'] } #assets_version: SomeVersionScheme
default_locale:  en
trust_proxy_headers: false # Whether or not the Request object should trust proxy headers (X_FORWARDED_FOR/HTTP_CLIENT_IP)
session:         ~ 
```

当我跑步时，我总是：

```
bienvenue dans mon site 
```

我怎样才能做到这一点

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T11:22:41.747

我知道为什么你的翻译不起作用。

因为翻译`source`还是这个样子。它是您模板中的字符串。

所以例如：

```
{{'My Trans'|trans()}} 
```

消息目录应该如下所示：

```
'My Trans': 'My trans FR' 
```

和en trans：

```
'My Trans': 'My trans EN' 
```

我希望这个例子对你有所帮助。

# qtp - 同一应用程序在不同浏览器版本（IE7 和 IE9）上的对话框不同

> ID：13758463
> 
> 赞同：0
> 
> 时间：2012-12-07T07:04:52.290
> 
> 标签：qtp

对于同一应用程序，对话框在不同浏览器版本（IE7 和 IE9）上有所不同。请建议我如何处理这个问题。因为我需要在不同的浏览器版本中运行脚本。很难为不同的浏览器版本使用单独的脚本。

IE7浏览器-Browser("xxxxx").Dialog("Windows Internet Explorer").WinButton("OK").点击IE9浏览器-Browser("XXXXX").Dialog("来自网页的消息").WinButton("OK “）。点击

访问jaga@gmail.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T22:34:25.303

您可以使用描述性编程和正则表达式来完成此操作。

下面的示例假定动态对象标识属性是“文本”。如果这不是正确的标识属性，请替换此属性。请注意，您还必须对剩余的链接对象（对象层次结构中的较低层）使用描述性编程。

```
Browser("xxxxx").Dialog("text:=(Windows Internet Explorer|Message from webpage)").WinButton("text:=OK").Click 
```

您还可以采用修改测试对象标识属性的方法来利用另一个在两个浏览器之间是静态的属性。使用 QTP 对象 spy 比较两个浏览器之间的属性。

# python - 在 Mac 终端中为 PyQt4 指定安装依赖项的位置

> ID：13758464
> 
> 赞同：0
> 
> 时间：2012-12-07T07:04:54.483
> 
> 标签：python, macos, installation, cmake, pyqt4

我正在尝试在 Mac OS X Mountain Lion 10.8 上安装适用于 python 的 Eric4 IDE。我已经下载并安装了所有依赖项，但是在尝试使用终端中的命令安装 Eric4 时

```
python install.py 
```

我得到这个错误

```
Checking dependencies
Python Version: 2.7.3
Sorry, please install PyQt4.
Error: No module named PyQt4.QtCore 
```

我认为问题可能是当我在 PyQt4 上使用 make 命令时出现错误

```
make[1]: *** [libpythonplugin.dylib] Error 1
make: *** [install] Error 2 
```

我在网上看到了一些关于这个错误的修复，但它们似乎都不起作用。在运行 make 命令之前，我曾尝试“清理 make”，但仍然没有运气。如何正确安装 PyQt4 以便我可以安装和运行 Eric4 IDE？

# javascript - 如何按嵌套值对 JSON 对象进行排序？

> ID：13758467
> 
> 赞同：10
> 
> 时间：2012-12-07T07:05:06.150
> 
> 标签：javascript, jquery, sorting, object, multidimensional-array

我有一个 ajax 调用，它返回一个非常复杂的 JSON 对象，我很难对其进行排序。

我的电话：

```
$.post('/reports-ajax',arguments, function(data) {} 
```

响应：

```
{
"10001":{
    "unitname":"Fort Worth",
    "discounts":{"12-02-2012":"34.810000","12-03-2012":"20.810000","12-04-2012":"27.040000"},
    "gross":{"12-02-2012":"56.730000","12-03-2012":"19.350000","12-04-2012":"66.390000"},
    "net":{"12-02-2012":"61.920000","12-03-2012":"98.540000","12-04-2012":"39.350000"},
    "discounts_total":82.66,
    "gross_total":82.47,
    "net_total":99.81,
    "number":10001
    },
"10002":{
    "unitname":"Dallast",
    "discounts":{"12-02-2012":"12.600000","12-03-2012":"25.780000","12-04-2012":"47.780000","12-05-2012":"45.210000"},
    "gross":{"12-02-2012":"29.370000","12-03-2012":"91.110000","12-04-2012":"60.890000","12-05-2012":"51.870000"},
    "net":{"12-02-2012":"16.770000","12-03-2012":"65.330000","12-04-2012":"13.110000","12-05-2012":"06.660000"},
    "discounts_total":131.37,
    "gross_total":33.24,
    "net_total":101.87,
    "number":10002
    },
"32402":{
    "unitname":"Austin",
    "discounts":{"12-05-2012":"52.890000","12-02-2012":"22.430000","12-03-2012":"58.420000","12-04-2012":"53.130000"},
    "gross":{"12-05-2012":"25.020000","12-02-2012":"2836.010000","12-03-2012":"54.740000","12-04-2012":"45.330000"},
    "net":{"12-04-2012":"92.200000","12-05-2012":"72.130000","12-02-2012":"13.580000","12-03-2012":"96.320000"},
    "discounts_total":186.87,
    "gross_total":161.1,
    "net_total":174.23,
    "number":32402
    }
} 
```

我用一个标准的每次调用来检查这个函数，并用 highcharts 做一些很棒的事情，但现在我试图通过 net_total 调用对响应进行排序，但我无法弄清楚。

我试过`.sort()`了，它错误地认为它不是一个函数。我已经阅读了一段时间，但我想我没有找到正确的结果。这看起来很有希望：[对 JavaScript 对象数组进行排序，](https://stackoverflow.com/questions/979256/how-to-sort-an-array-of-javascript-objects)但由于`.sort`不是函数而失败。似乎大多数`.sort`都在 [] 数组上，而不是完整的对象..

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-07T07:25:15.557

对对象进行排序没有意义，因为对象键没有位置值。例如，这个：

```
{ a:1, b:2 } 
```

还有这个：

```
{ b:2, a:1 } 
```

是完全相同的对象。它们不仅相似，而且相同。

javascript 本身没有给对象键任何位置值。有些人可能错误地认为：

```
for (var key in obj) { 
```

以特定顺序遍历对象键。但这是错误的。您应该始终假设`for .. in`循环始终以随机顺序处理对象键。

显然，如果你要编写一个 Web 浏览器，你不会实现一个随机数生成器来解析一个`for .. in`循环。因此，大多数 Web 浏览器对循环处理对象键的方式具有**偶然**的稳定性。`for .. in`

通过玩浏览器来学习 javascript 的开发人员可能会发现他们的浏览器以字母顺序迭代对象，或者键被添加到对象的顺序。但这完全是偶然的，不能依赖。浏览器供应商将来可能会在不违反任何向后兼容性的情况下更改此行为（除了那些认为对象具有排序顺序的人编写的错误脚本）。更不用说不同的浏览器具有不同的 javascript 实现，因此不一定具有相同的对象内部键顺序。

以上都是题外话。“键排序顺序”在 javascript 中没有任何意义，观察到的任何行为都只是实现细节。简而言之，javascript对象没有键顺序，只是假设它是随机的。

* * *

**解决方案**

现在，你真正想做的**不是**对对象进行排序（你不能，这没有意义）。您真正想做的是按特定顺序处理对象属性。解决方案是简单地创建对象键的数组（具有排序顺序），然​​后使用该数组处理对象：

```
// First create the array of keys/net_total so that we can sort it:
var sort_array = [];
for (var key in Response) {
    sort_array.push({key:key,net_total:Response[key].net_total});
}

// Now sort it:
sort_array.sort(function(x,y){return x.net_total - y.net_total});

// Now process that object with it:
for (var i=0;i<sort_array.length;i++) {
    var item = Response[sort_array[i].key];

    // now do stuff with each item
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-07T07:07:18.023

你所拥有的不是一个数组，也没有顺序，所以你必须将它转换成一个数组，这样你才能给它排序。

依稀：

```
var array = [];
$.each(data, function(key, value) {
    array.push(value);
});
array.sort(function(a, b) {
    return a.net_total - b.net_total;
}); 
```

[实例](http://jsbin.com/abubeg/1)| [来源](http://jsbin.com/abubeg/1/edit)

正如 GolezTroi 在评论中指出的那样，通常上述内容会丢失每个条目存储在其中的密钥，`data`因此您可以将其添加回上面的第一个`$.each`循环中，但在这种情况下，条目上已经有密钥（如`number`)，所以没有必要。

或者您可以将第一个替换`$.each`为`$.map`：

```
var array = $.map(data, function(entry) {
    return entry;
});
// ...and then sort etc. 
```

……随你喜欢。

# windows - Windows phone 8 墓碑删除时快速恢复

> ID：13758469
> 
> 赞同：1
> 
> 时间：2012-12-07T07:05:14.997
> 
> 标签：windows, windows-phone-7, windows-phone-8

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj735579%28v=vs.105%29.aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj735579%28v=vs.105%29.aspx) 根据我在 windows phone 8 中使用快速恢复时的文档，我可以从主瓷砖。

但是当我的应用程序被墓碑化时，例如，mainPage 可以导航到->pageA 可以导航到-> PageB，我从 PageA 停用了该应用程序，然后该应用程序被墓碑化了，当我单击导航到 PageB 的 Tile 时，奇怪的是应用程序返回到 Page A 。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:35:22.257

It sounds like you are not saving the application state before it is tombstoned. There are 4 events that are fired for preserving application state:

These are related to completely closing and reopening the application (eg: Phone restart)

*   Application_Launching
*   Application_Closing

These are related to tombstoning (task switching)

*   Application_Activated
*   Application_Deactivated

It sounds like what you need is the second one relating to activating / deactivating. These methods are placed in the Applications *.cs file and allow you to preserve and reinstate the ViewModel when tombstoning.

This is an [example](http://www.scottlogic.co.uk/blog/colin/2011/05/a-simple-windows-phone-7-mvvm-tombstoning-example/):

```
private readonly string ModelKey = "Key";

private void Application_Deactivated(object sender, DeactivatedEventArgs e)
{
  PhoneApplicationService.Current.State[ModelKey] = ViewModel;
}

private void Application_Activated(object sender, ActivatedEventArgs e)
{
  if (PhoneApplicationService.Current.State.ContainsKey(ModelKey))
  {
    ViewModel = PhoneApplicationService.Current.State[ModelKey] as FeedViewModel;
    RootFrame.DataContext = ViewModel;
  }
} 
```

# jbpm - 使用服务任务设置电子邮件工作流的步骤 - JBPM5 中的电子邮件组件

> ID：13758471
> 
> 赞同：2
> 
> 时间：2012-12-07T07:05:17.040
> 
> 标签：jbpm, drools-guvnor

我正在使用 Drools guvnor 网页设计师。我想在我的过程中发送一封电子邮件。有一个服务任务节点，称为“电子邮件”，但我不确定如何配置才能使其工作。你能否给我一个例子或描述一个简单的方法来做到这一点？

我可以访问本地交换服务器。
请向我提供如何配置电子邮件属性（如 Assignments、DataInputSet 和 DataOutputset）的信息？如何配置或链接交换服务器到电子邮件服务任务节点？

# objective-c - 从字典成员获取 doubleValue 时是否必须使用此演员表？

> ID：13758472
> 
> 赞同：0
> 
> 时间：2012-12-07T07:05:24.547
> 
> 标签：objective-c

```
((NSString *)result[@"location"][@"lat"]).doubleValue 
```

还是有缩短的符号？

基本上我想将一些东西投射到 NSString 并获得一些属性。没有支架，它虽然不起作用。

我认为应该有一个更“优雅”的符号。如果是这样，它是什么，可以解释吗？优先级是什么等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:49:32.417

这样做会更短：

```
[result[@"location"][@"lat"] doubleValue] 
```

因为返回类型`result[@"location"][@"lat"]`是`id`，您可以向 an 发送任何消息而`id`无需编译器投诉。（当然，对象必须在运行时理解消息，否则你会得到一个致命的异常。）

# coldfusion - 支持Java代码的IDE辅助CFC？

> ID：13758473
> 
> 赞同：0
> 
> 时间：2012-12-07T07:05:41.130
> 
> 标签：coldfusion, coldfusion-9, coldfusion-8

我正在寻找一个 IDE，它可以在使用 CFC 中的 Java 对象时提供内容帮助，但找不到任何东西。有人知道 IDE 或者是否存在此功能？

谢谢！

# java - 用于在 Windows 上登记当前打开/执行的应用程序的 Java 程序

> ID：13758475
> 
> 赞同：1
> 
> 时间：2012-12-07T07:05:49.987
> 
> 标签：java, windows

我们如何制作一个 Java 程序来获取 Windows 机器上所有正在运行/打开的应用程序，我需要在应用程序之间动态切换。

是否有任何用于窗口线程的 java API ???

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:15:24.170

这可能会帮助你

```
public static void main(String[] asss){
        try{
        String line;
        Process p = Runtime.getRuntime().exec(
                System.getenv("windir") + "/system32/" + "tasklist.exe");

        BufferedReader input = new BufferedReader(new InputStreamReader(
                p.getInputStream()));
        while ((line = input.readLine()) != null) {         
                System.out.println(line);
        }
        input.close();
        }catch(Exception e){
            e.printStackTrace();
        }

    } 
```

# c# - 按钮单击事件未触发，但 modalpopupextender 正在工作

> ID：13758476
> 
> 赞同：6
> 
> 时间：2012-12-07T07:05:55.837
> 
> 标签：c#, asp.net, html, ajax

在我的项目中，我有

```
 <asp:AsyncPostBackTrigger ControlID="btnAdd" EventName="Click" /> 
```

`enter code here`
**管理员**- *如果需要

```
 <asp:ModalPopupExtender ID="ModalPopupExtender1" PopupControlID="Panel1" TargetControlID="btnAdd"
            BackgroundCssClass="modalBackground" runat="server">
        </asp:ModalPopupExtender>
        <asp:Panel ID="Panel1" align="center" CssClass="modalPopup" runat="server">
        <div class="body-reg-left">
        <div class="body-top-reg">
            <div class="he-reg">
                <b>Admin </b>- *If Neccesery</div>
        </div>
            <table>
                <tr>
                    <td>
                        <asp:Label ID="lblCategoryID" runat="server" Text="" CssClass="lbF"></asp:Label>
                    </td>
                    <td>
                     <asp:Label ID="lblstt" runat="server" Text=""></asp:Label>
                    </td>
                    <tr>
                      <td>
                        <asp:Label ID="Label1" runat="server" Text="Brand Name" CssClass="lbF"></asp:Label>
                    </td>
                    <td>
                        <asp:TextBox ID="txtbrdName" runat="server"></asp:TextBox>
                    </td>
                    </tr>

                </tr>
                <tr>
                    <td>
                        <asp:Button ID="BtnBrdName" runat="server" Text="Add" Width="70px" OnClick="Button1_Click" />
                        <asp:Button ID="btncancel" runat="server" Text="Cancel" OnClick="btncancel_Click" />
                    </td>
                </tr>
            </table>
            </div>
        </asp:Panel>
    </div>
</div>
</ContentTemplate>

</asp:UpdatePanel> 
```

**如果我单击 btnAdd 类别文本框中的值应该转到数据库并弹出窗口..但是在我的项目中，btnADD 按钮的单击事件没有触发并且 modalpopup 正在工作..请给我一个解决方案..**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T22:08:42.470

我遇到了同样的问题，由于某种原因，当您将按钮设置为模式弹出窗口的 TargetControlID 时，它会禁用 Click 事件。

我克服这个问题的方法是在页面上放置一个不可见/虚拟标签控件并将模式的 TargetControlID 属性设置为此标签。然后在您的 btnAdd Click 事件中从数据库中获取所有必要的值并简单地调用`ModalPopupExtender1.Show()`显示模态：

**ASPX：**

```
<form id="form1" runat="server">
<asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
</asp:ToolkitScriptManager>
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <asp:Button ID="btnAdd" runat="server" Text="Add" OnClick="AddClick" />
        <asp:Label ID="dummyLabel" runat="server" />
        <asp:ModalPopupExtender ID="ModalPopupExtender1" PopupControlID="Panel1" TargetControlID="dummyLabel"
            BackgroundCssClass="modalBackground" runat="server">
        </asp:ModalPopupExtender>
        <asp:Panel ID="Panel1" align="center" CssClass="modalPopup" runat="server">
            <div class="body-reg-left">
                <table>
                    <tr>
                        <td>
                            <asp:Label ID="Label1" runat="server" Text="Brand Name" CssClass="lbF"></asp:Label>
                        </td>
                        <td>
                            <asp:TextBox ID="txtbrdName" runat="server"></asp:TextBox>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <asp:Button ID="BtnBrdName" runat="server" Text="Add" Width="70px" OnClick="Add" />
                            <asp:Button ID="btncancel" runat="server" Text="Cancel" OnClick="Cancel" />
                        </td>
                    </tr>
                </table>
            </div>
        </asp:Panel>
        </div> </div>
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="btnAdd" EventName="Click" />
    </Triggers>
</asp:UpdatePanel>
</form> 
```

**后面的代码：**

```
protected void Add(object sender, EventArgs e)
{
    //Add logic
}

protected void Cancel(object sender, EventArgs e)
{
    //Cancel logic
}

protected void AddClick(object sender, EventArgs e)
{
    txtbrdName.Text = "Some category"; //Populate the value as required
    ModalPopupExtender1.Show();
} 
```

# security - 如何安全实施3d安全支付

> ID：13758482
> 
> 赞同：15
> 
> 时间：2012-12-07T07:06:22.573
> 
> 标签：security, credit-card, 3d-secure

[我想知道接受需要3-D 安全](http://en.wikipedia.org/wiki/3-D_Secure)验证的信用卡付款的最佳方式是什么。目前结账流程是这样的：

1.  客户提交付款
2.  支付网关返回一个错误，指出该卡需要 3-D 安全代码处理。在响应中返回 ACS URL
3.  我将用户重定向到发卡行的验证站点，并在验证完成后传递回调 URL 供 ACS 重定向
4.  客户输入验证码，ACS 将重定向到回调 URL，并带有指示验证成功的授权令牌
5.  要完成该过程，我必须将带有授权令牌的原始请求重新提交到支付网关

我的问题是在最后一步。由于我需要重新提交原始请求（其中包含客户的信用卡信息），因此我需要将其临时存储在某个地方，以便在调用回调 URL 时可以检索它。有没有替代方案？

我正在考虑尝试 iframe 解决方案：原始表单永远不会关闭，我在 iframe 中显示验证过程。当该过程完成时，即调用回调 url，我隐藏 iframe 并使用所需的值更新原始表单并重新提交。有没有人尝试过这种技术？

* * *

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-07T11:48:18.790

正如您在链接的文章中可能已经注意到的那样，在 iframe 中显示银行页面是首选选项。尽管如果您进一步阅读，它会提供其他安全功能，特别是在网络钓鱼防护方面。因为您的客户不知道他真正将密码发送给谁。

但是回到您的提议，如果您在 iframe 或弹出窗口中显示它，您将能够将原始表单存储在您的基本页面上，然后使用收到的身份验证令牌重新提交它。这是一个非常好的主意，因为您不需要执行任何 PCI 合规性工作。因此，不仅对您来说更容易，建议您使用它:)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-13T08:32:34.730

使用 Sage Pay（我会假设其他支付提供商），您无需在最后一步再次传递完整的订单信息，只需来自 3D 安全表单的响应代码和唯一的交易参考。因此不需要存储卡的详细信息。

对我来说，过程是：

1.  卡详细信息等以及提交给支付网关的唯一交易参考。
2.  支付网关以 3D 安全详细信息（ACSURL 和参考代码）进行响应。
3.  将用户重定向到他们输入详细信息的 3D 安全表单（传递参考代码和回调 URL）。
4.  验证码传回回调 URL。
5.  服务器必须将步骤 1 中的验证码和相同的交易参考发送到支付网关。
6.  支付网关以成功/失败信息进行响应。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-12-11T00:57:19.900

我最近用 3d 安全完成了一些工作。根据我的个人经验：

1.  我将带有转发 url 的信用卡信息传递给银行 3d 安全 url。
2.  用户被重定向到 3d 安全 URL 并提示输入他的密码。
3.  当他点击继续时，用户将被传递到带有授权令牌的转发 url——信用卡信息也被传递。

# sql - sql过滤多对多关系

> ID：13758483
> 
> 赞同：0
> 
> 时间：2012-12-07T07:06:27.973
> 
> 标签：sql, sql-server

我有以下表格

```
competitions
id prize
1 win a car
2 win an ipod

competition_type
competition_id Type_id
  1              1
  1              2
  2              1

Type
id   type
1    facebook
2    twitter 
```

我怎样才能选择所有是 facebook 但不是 twitter 的比赛。所以我应该得到 Win an ipod 作为最终结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:09:27.663

查询如何：

```
Select Prize from 
Competitions a inner join competition_type b on a.id=b.competition_id
    inner join Type c on b.Type_id=c.id
Where c.Type='facebook' and c.Type<>'twitter' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T07:11:43.880

```
SELECT
    ct.competition_id FROM
    competitions c
JOIN competition_type ct ON ct.competition_id = c.id AND ct.Type_id = 1 
WHERE
    NOT EXISTS(SELECT * FROM competitions c2 
                     JOIN competition_type ct2 
                     ON ct2.competition_id = c2.id AND ct2.Type_id = 2 
                     WHERE c2.id = c.id) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T07:11:52.670

尝试这个 -

```
select cmp.id, cmp.prize from 
competitions cmp inner join competition_type ct on cmp.id = ct.competition_id
inner join Type t on t.id = ct.type_id
where t.type = 'facebook' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T07:13:15.597

```
SELECT  a.*
FROM    competition a
WHERE   a.id NOT IN
(
    SELECT  b.competition_id
    FROM    competition_type b 
            INNER JOIN Type c
                ON b.type_ID = c.id
    WHERE   c.type = 'twitter'
) 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/99549/1)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-07T07:16:05.740

请看一下这个例子

```
select * from Competitions as c
left join competition_type as ct
on c.id = ct.competition_id
left join Type as t
on t.id = ct.Type_id
where t.Type <> 'Twitter'
; 
```

结果：

```
ID  PRIZE         COMPETITION_ID    TYPE_ID     TYPE
1   win a car     1                 1           facebook
2   win an ipod   2                 1           facebook 
```

** 更新为 <> `Twitter`

[SQLFIDDLE 参考](http://sqlfiddle.com/#!2/ded85/5)

# html - 有一个` ` 与漂浮的孩子保持高度

> ID：13758488
> 
> 赞同：2
> 
> 时间：2012-12-07T07:07:05.357
> 
> 标签：html, css, css-float

> **可能重复：**
> [如何适应 div 的高度以包裹其浮动的孩子](https://stackoverflow.com/questions/10969023/how-to-fit-a-divs-height-to-wrap-around-its-floated-children)

我想要一个`<ul>`里面`<div>`有一堆浮动的`<li>`。唯一的问题是包含`<div>`折叠为 0px 高。我如何使`<div>`保持它的高度好像它包含`<li>`？

HTML：

```
<div>
   <ul>
      <li>stuff</li>
      <li>morestuff</li>
   </ul>
</div> 
```

CSS：

```
div {
background: rgb(90, 90, 90);
}

ul {
color: red;
}

li {
float: left;
clear: none;
margin-right: 10px;
} 
```

如果使用花车是过时的并且您知道更好的风格，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:10:02.560

**选项 1（推荐）：**`overflow:hidden;`给出将校正其高度的 div 样式。

**选项 2：**或者在当前 div 的末尾添加一个更清晰的 div

```
<div>
   <ul>
      <li>stuff</li>
      <li>morestuff</li>
   </ul>
   <div style="clear:both;"> </div>
</div> 
```

**[jsFiddle 演示](http://jsfiddle.net/NZfea/)**

编辑：澄清一下，以上两者都具有完整的跨浏览器支持，并且不需要黑客或无效的 CSS。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T07:10:25.167

尝试`Display:inline-block;`

```
li {
display:inline-block;
    margin-right: 10px;
} 
```

***[演示](http://jsfiddle.net/6XsKj/4/)***

***[跨浏览器内联块](http://css-tricks.com/snippets/css/cross-browser-inline-block/)***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T07:14:36.800

要解决您的确切问题：

```
div {
    background: rgb(90, 90, 90);
    overflow: auto;
} 
```

也许是一种不那么“过时”的方法：

```
div {
    background: rgb(90, 90, 90);
}
ul {
    color: red;
}
li {
    display: inline-block;
    *vertical-align : auto;
    *display: inline; // targets IE7 and such, same effect
    margin-right: 10px;
} 
```

您需要调整 li 元素上的 margin-right 以匹配您的确切规格。使用浮点数仍然很酷，但是为什么要在显示时打扰：inline-block 将解决您想要的大部分内容？？？

PS：有时 IE hack 是可以的——我建议使用像 Sass 这样的预处理器和像 Compass 这样的库来帮助你管理它们。

关于这个问题的几篇文章：

*   [http://www.vanseodesign.com/css/inline-blocks/](http://www.vanseodesign.com/css/inline-blocks/)
*   [http://www.onderhond.com/blog/inline-block-vs-float](http://www.onderhond.com/blog/inline-block-vs-float)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T07:32:41.777

每当您使用`FLOAT`属性时，也不要忘记添加`clear`属性

你可以试试这个

```
<div>
   <ul>
      <li>stuff</li>
      <li>morestuff</li>
      <li style="clear:both;float:none"></li>    <!-- Added Clear, removed float -->       
   </ul>
</div>​​​​​​​​​​​​​​​​ 
```

# ios - 如何克服 Xcode 中管理器中的配置文件未找到错误有效签名身份？

> ID：13758490
> 
> 赞同：2
> 
> 时间：2012-12-07T07:07:22.017
> 
> 标签：ios, iphone, xcode

> **可能重复：**
> [iPhone 应用签名：在您的钥匙串中找不到与此配置文件匹配的有效签名身份](https://stackoverflow.com/questions/999313/iphone-app-signing-a-valid-signing-identity-matching-this-profile-could-not-be)

我已经在我的苹果 iOS 配置门户上为我的应用创建了应用 ID。

当我要为我的设备创建配置文件并将其拖动到`Xcode Organizer`显示错误“ `Valid Signing Identity not found`”时。如何克服这个错误？

我已经吊销了我的苹果证书。钥匙链访问显示我的苹果证书有效。

吊销我的证书后，我收到了来自苹果的电子邮件，上面写着

```
(Dear User,

You have revoked your APS Development Certificate and it is no longer valid. Please note that all Provisioning Profiles that included this certificate are now invalid and will require regeneration for future use.

Best regards,

Apple Developer Program Support) 
```

如果有任何已知的解决方案请回复我的设备配置文件有什么错误

钥匙链访问屏幕![在此处输入图像描述](../Images/24f7c6b38ae72089131c1361e41ac977.png)

XCODE 管理器屏幕![在此处输入图像描述](../Images/764bf5cda93aa0979691c191f09c5cb1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:42:27.400

我知道这有点令人困惑。您必须使用 Mac 上的 Keychain Access 应用程序来生成您上传到 iOS 配置门户的证书。（生成私钥 - 公钥）

对我来说，关于这个主题的最佳教程来自[ray wenderlich 网站](http://www.raywenderlich.com/8003/how-to-submit-your-app-to-apple-from-no-account-to-app-store-part-1)
。另外请查看本教程的第二部分。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:12:56.720

做以下笔记。

1.  清除或删除所有开发人员和分发证书以及配置文件。

2.  转到钥匙串请求新证书。

3.  转到开发者帐户撤销旧证书并添加新创建的证书。

4.  创建新的应用程序 ID 和配置文件。

5.  将此配置文件添加到 Xcode。

6.  然后构建并运行您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T07:16:09.917

使用新创建的证书创建配置文件。不要使用被吊销的证书。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T07:32:38.480

这是与 APPLE 证书相关的常见问题解答， [https://developer.apple.com/support/ios/program-renewals.html](https://developer.apple.com/support/ios/program-renewals.html)

这可能会对您有所帮助。

# vb.net - vb.NET Select distinct... 怎么用呢？

> ID：13758493
> 
> 赞同：2
> 
> 时间：2012-12-07T07:07:40.753
> 
> 标签：vb.net, linq

来自 C# 背景，我对无法让这个简单的 linq 查询正常工作感到有点恼火：

```
Dim data As List(Of Dictionary(Of String, Object))
Dim dbm As AccessDBManager = GlobalObjectManager.DBManagers("SecondaryAccessDBManager")

data = dbm.Select("*", "T町丁目位置_各務原")

Dim towns As IEnumerable(Of String()) 
        towns = data.Select(Function(d) New String() {d("町名_Trim").ToString(), d("ふりがな").ToString()})
        towns = towns.Where(Function(s) s(0).StartsWith(searchTerms) Or s(1).StartsWith(searchTerms)).Distinct()

Call UpdateTownsListView(towns.ToList()) 
```

我将相关位粘贴在一起，所以希望这里没有错误......

`data`从访问数据库加载，并且是一个列表，其中每一行的数据存储为字典。

在这种情况下，元素 from`data`有一个字段，其中包含日本城镇的名称及其读数以及其他一些内容，例如行 ID 等。

我有一个带有文本框的表单。当用户输入内容时，我想从`data`与搜索词对应的城镇名称中检索没有重复的内容。

现在结果包含大量重复>我怎样才能得到这个排序只得到不同的结果？

我从其他一些帖子中读到可能需要一个密钥，但是如何使用扩展方法声明它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:53:51.013

[`Distinct`](http://msdn.microsoft.com/en-us/library/bb348436.aspx)使用默认相等比较器来比较值。

您的集合包含字符串数组，因此`Distinct`不会按您预期的方式工作，因为两个不同的数组永远不会彼此相等（因为`ReferenceEquals`最终会使用）。

* * *

一种解决方案是使用[`Distinct`](http://msdn.microsoft.com/en-us/library/bb338049.aspx)需要[`IEqualityComparer`](http://msdn.microsoft.com/en-us/library/ms132151.aspx).

```
Class TwoStringArrayEqualityComparer 
    Implements IEqualityComparer(Of String())

    Public Function Equals(s1 As String(), s2 As String()) As Boolean Implements IEqualityComparer(Of String()).Equals
        ' Note that checking for Nothing is missing
        Return s1(0).Equals(s2(0)) AndAlso s1(1).Equals(s2(1))
    End Function

    Public Function GetHashCode(s As String()) As Integer Implements IEqualityComparer(Of String()).GetHashCode
        Return (s(0) + s(1)).GetHashCode() ' probably not perfect :-)
    End Function

End Class

...

towns = towns.Where(...).Distinct(new TwoStringArrayEqualityComparer()) 
```

# android - 将文件从 USB 传输到内部存储器？

> ID：13758499
> 
> 赞同：1
> 
> 时间：2012-12-07T07:08:02.500
> 
> 标签：android, fileinputstream, fileoutputstream, usb-drive

当我通过 OTG usb 将闪存驱动器插入我的平板电脑或手机时，我正在制作一个 android 应用程序，它会将文件从它传输到指定位置。现在，如果我指定一个文件名，它将传输，但我怎样才能让它传输所有文件而不必指定一个名称？我正在使用带有字节数组的文件输入/文件输出。

```
@SuppressLint("SdCardPath") 
```

公共类文件传输扩展 Activity {

```
Button btnsend;
String extstorage = Environment.getExternalStorageDirectory().toString();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activityfiletransfer);
    btnsend = (Button) findViewById(R.id.button1);

    final Runtime runtime = Runtime.getRuntime(); 
    try
    {
        runtime.exec("su -c");
    }
    catch(Exception e)
    {

    }

    btnsend.setOnClickListener(new View.OnClickListener()
    {
        Context context = getApplicationContext();
        CharSequence scs = "Folder Doesn't Exist, Creating now, Checking for Flash Drive....";
        CharSequence mvng = "Folder already exist, checking now for flash drive....";
        CharSequence chk1 = "Flash Drive detected, transferring files now.";
        CharSequence chk2 = "Flash Drive Is Not Detected";
        int duration = Toast.LENGTH_SHORT;
        Toast bldng = Toast.makeText(context, scs, duration);
        Toast mvfldr = Toast.makeText(context, mvng, duration);
        Toast chkffd = Toast.makeText(context, chk1, duration);
        Toast chkffd2 = Toast.makeText(context, chk2, duration);

        @Override
        public void onClick(View arg0)
        {
            File src = new File(extstorage + "/FILEBACKUP");
            File usbdrive = new File(extstorage + "/usbStorage/sda1");
            if(!src.exists())
            {
                src.mkdirs();
                bldng.show();
                if(!usbdrive.exists())
                {
                    chkffd2.show();
                }
                else
                {
                    chkffd.show();
                    copyfiles();
                }

            }

            else
            {

                mvfldr.show();
                if(!usbdrive.exists())
                {
                    chkffd2.show();
                }
                else
                {
                    chkffd.show();
                    copyfiles();
                }

            }
    }
        private void copyfiles()
        {
            String pathofd = "/sdcard/usbStorage/sda1";
            String internalpath = "/sdcard/FILEBACKUP";

            File dir = new File(pathofd);
            File[] files = dir.listFiles();
            for (File afile : files)
            {
                if(afile.isFile())
                {
                    copyFile(afile.getAbsolutePath(), internalpath, afile.getName());
                }
            }

            try
            {

            }

                /*OutputStream myoutput = new FileOutputStream("/sdcard/FILEBACKUP");
                InputStream myinput = new FileInputStream("/sdcard/usbStorage/");
                byte[] buffer = new byte[1024];
                int length;
                while((length=myinput.read(buffer))>0)
                {
                    myoutput.write(buffer);
                }
                myoutput.flush();

                myoutput.close();

                myinput.close();

            }*/
            catch(Exception e)
            {

            }
        }
        private void copyFile(String absolutePath, String internalpath,
                String name) {
            // TODO Auto-generated method stub

            try
            {
                OutputStream myoutput = new FileOutputStream(extstorage + "/FILEBACKUP/");
                InputStream myinput = new FileInputStream(extstorage + "/usbStorage/sda1");
                byte[] buffer = new byte[1024];
                int length;
                while((length=myinput.read(buffer))>0)
                {
                    myoutput.write(buffer, 0, length);
                }
                myoutput.flush();

                myoutput.close();

                myinput.close();

            }
            catch(Exception e)
            {

            }

        }

        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activityfiletransfer,
                menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:33:17.893

只需列出目录中的文件：

```
String pathOfFlashDrive = <path of flash drive goes here>;
String internalPath = <internal destination path goes here>;

File dir = new File( pathOfFlashDrive );
File[] files = dir.listFiles();
for( File aFile : files ) {
    if( aFile.isFile()  ) {
        copyFile( aFile.getAbsolutePath(), internalPath + aFile.getName() );
    }
} 
```

# python - 如何使用 Python 单元测试测试套件选择特定测试

> ID：13758500
> 
> 赞同：3
> 
> 时间：2012-12-07T07:08:06.760
> 
> 标签：python, unit-testing, test-suite

我将 Python 单元测试代码组织如下：

```
Maindir
   |
   |--Dir1
   |  |
   |  |-- test_A.py
   |  |-- test_B.py
   |  |-- test_C.py
   |
   |--Dir2
       | ... 
```

我假设你得到了图片。在每个`Dirx`目录中，我都有一个名为的文件，该文件`suite.py`将来自给定目录中测试的一组测试组合在一起（因此您可以选择特定测试，省略其他测试等）。这些文件如下所示（如果要选择所有测试，他们也可能只选择测试的子集）[还考虑测试 <-> 单元测试]：

```
import test_A
import test_B
import test_C

suite1 = test.TestSuite()
suite1.addTests(test.TestLoader().loadTestsFromTestCase(test_A.MyTest))
suite1.addTests(test.TestLoader().loadTestsFromTestCase(test_B.MyTest))
suite1.addTests(test.TestLoader().loadTestsFromTestCase(test_C.MyTest)) 
```

目录中的主要运行器 ，`execall.py`如下`Maindir`所示：

```
from Dir1.suite import suite1
from Dir2.suite import suite2

suite_all = test.TestSuite([
    suite1,
    suite2])

if __name__ == '__main__':
    test.main(defaultTest='suite_all') 
```

现在我可以执行以下操作：

*   运行所有测试：'execall.py'（如文档所述）
*   运行特定套件：（`execall.py suite1`如文档所述）

但是我怎样才能只运行一个特定的单一测试呢？以及如何运行特定文件的所有测试？我尝试了以下但没有成功，同样的错误：`'TestSuite' object has no attribute 'xxx'`

```
execall.py suite1.test_A
execall.py suite1.test_A.test1
execall.py test_A
execall.py test_A.test1 
```

`execall.py -h`给出了如何在测试用例中运行单个测试或测试的非常具体的*示例*，但在我的情况下这似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:08:21.053

一种方法是编写自己的测试加载器。我强烈建议采用[Flask 的 testsuite 模块](https://github.com/mitsuhiko/flask/blob/master/flask/testsuite/__init__.py)中的机制。

基本思想是：

1.  实现一个例程，该例程返回一个`unittest.TestSuite()`包含所需测试的所有 Python 模块的对象。这可以通过例如扫描目录中的`test_XXX.py`文件来完成（只需通过`startswith('test')`、regexp 等检查它们）。

2.  使用 Step1 中生成的测试套件的子类`unittest.TestLoader`和覆盖。`loadTestsFromName(self, name, module)`例如，在 Flask 中：

    ```
     for testcase, testname in find_all_tests(suite):
         if testname == name or \
             testname.endswith('.' + name) or \
             ('.' + name + '.') in testname or \
             testname.startswith(name + '.'):
             all_tests.append(testcase) 
    ```

    这允许通过 Python 模块名称、测试套件（测试类）名称或仅通过测试用例名称加载测试。

# android - Android，如何选择TimePicker的编辑器段？

> ID：13758503
> 
> 赞同：0
> 
> 时间：2012-12-07T07:08:26.480
> 
> 标签：android, timepicker

如您所知，时间选择器有三个部分，视图顶部和底部有两个按钮，中间有一个编辑器。

通过点击并按住编辑器，我们可以选择其内容。我遇到的问题是我想通过点击（而不是点击并按住）来选择编辑器的内容。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:17:42.900

在布局文件中尝试这样的事情

```
<TimePicker
        android:id="@+id/activity_main_timepicker"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="14dip"
        android:layout_marginRight="16dip"
        android:focusable="true"
        android:focusableInTouchMode="true" /> 
```

与大多数其他控件不同，EditText 在系统处于“触摸模式”时是可聚焦的。

第一个单击事件聚焦控件，而第二个单击事件实际触发

OnClickListener。如果您使用 android:focusableInTouchMode 视图禁用触摸模式焦点

属性， OnClickListener 应该按预期触发。

# c++ - 为什么 std::vector 比 std::deque 更受欢迎？

> ID：13758509
> 
> 赞同：51
> 
> 时间：2012-12-07T07:09:21.237
> 
> 标签：c++, vector, deque

> **可能重复：**
> [为什么我更喜欢使用向量到双端队列](https://stackoverflow.com/questions/5345152/why-would-i-prefer-using-vector-to-deque)

我很好奇为什么它[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)比[`std::deque`](http://en.cppreference.com/w/cpp/container/deque). 双端队列在查找方面几乎同样有效，在插入方面效率更高（没有 vector::reserve）并允许在前面插入/删除。

Herb Sutter 曾经建议，[如果你想使用向量，就更喜欢 deque](http://www.gotw.ca/gotw/054.htm)（我在解释）。然而，在最近一次关于[编写现代 C++](http://channel9.msdn.com/Events/Build/BUILD2011/TOOL-835T)的演讲中，他再次强烈建议将`std::vector`其视为默认容器。根据我之前链接的[GOTW](http://www.gotw.ca/gotw/054.htm)，即使是标准也有类似的措辞。

这种差异有原因吗？仅仅是这样`vector`更简单、更广为人知，还是有技术原因？或者这`vector`只是一个更酷的名字..？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-12-07T07:21:55.770

我不能为任何人说话，但我可以为自己说话。

当我第一次阅读有关`std::deque`时，我认为它很酷，有一段时间，我不仅将其视为默认容器，而且几乎将其视为我使用的*唯一*容器。

然后有人问为什么，我详细解释了它的优点，为什么它是几乎所有东西的最佳容器，以及它是如何比`std::vector`.

幸运的是，质疑我决定的人足够有说服力，我做了一些测试。测试表明，几乎在所有情况下，`std::deque`都比 - 通常慢`std::vector`一个重要因素（例如，大约 2）。事实上，在我使用 编写的代码中，除了少数情况外`std::deque`，仅用 替换`std::deque`就可以加快速度。`std::vector`

从那以后我`std::deque`在一些情况下使用过，但绝对不要再把它当作默认值了。一个简单的事实是，在通常的实现中，它明显比*大多数*目的慢`std::vector`。

 *但是，我应该补充一点，我有理由确定，通过正确的实现，它*几乎*可以等同`std::vector`于几乎所有情况。从渐近的角度来看，大多数人使用的表示无疑是很棒的，但在现实世界中（出于许多目的）并不能很好地发挥作用。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-07T07:14:50.310

`std::vector`很好理解，简单并且与 C 兼容（无论是在内存布局方面，还是在使用指针作为迭代器方面）。

对于某些操作，它也比`std::deque`. 通过索引访问元素就是一个例子。

对于给定的任务，使用能很好地完成工作的最简单的容器是有意义的。在许多情况下，最简单的容器是`std::vector`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-07T07:20:04.340

除了`std::vector`是最广为人知的容器类之外，它还比`std::deque`.

*   典型的`std::deque`需要额外的间接访问元素，不像`std::vector`.
*   情况下的迭代器`std::deque`必须是智能指针，而不是 . 情况下的指针`std::vector`。
*   an 的元素`std::vector`保证是连续的，因此它与将数组作为参数的 c 样式函数兼容。
*   `std::deque`不提供控制容量和重新分配时刻的支持。

特别是最后一点值得注意。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-07T07:21:16.657

人们出于简单的原因使用 std::vector 而不是 std::deque。它们与许多 C 库接口，并且它们具有带有参数的[函数](http://curl.haxx.se/libcurl/c/curl_easy_recv.html)，这些函数需要指向连续存储的指针，而 std::deque 不能（不能）保证。

另一个原因是当您根据 std::deque 构建代码并且您的需求发生变化以致必须支持连续访问时，您将需要进行一些重构。

我不得不提一下，有些[库](https://github.com/facebook/folly/blob/master/folly/docs/FBVector.md)的作者声称已经创建了更高效的向量实现，以便在[容量](http://stdcxx.apache.org/doc/stdlibref/vector.html#idx1328)增加时克服效率低下的问题。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-12-07T07:22:15.943

的结构`std::deque`有点复杂，这使得天真的迭代比`std::vector`. 插入`std::vector`及其重新分配往往不是大问题，尤其是在使用`reserve()`并仅附加到末尾时。此外，还有更容易理解的失效规则，`std::vector`尽管它实际上是`std::deque`对象在插入/删除时仅在任一端保持原位的优点（请注意，`std::deque`迭代器在每次插入时都会失效，与插入发生的位置无关）。另一个优点`std:vector`是保证这些值在内存中是连续的，从而减少了内存分配。

I guess, I would recommend use of `std::deque` algorithms were consistently optimized to use segmented sequences (I'm not aware that any standard C++ library does this optimization) and users were accessing sequences consistently using algorithms (as far as I can tell, only a tiny fraction of users considers the option to use algorithms). Otherwise I would suspect that `std::deque` is the better option with respect to performance only if you take advantage of its specific properties (e.g., that objects stay put and that you can insert/remove at the end). It is worth profiling the two alternatives, though.*

# magento - 在可配置的产品类型中显示层价格

> ID：13758511
> 
> 赞同：-3
> 
> 时间：2012-12-07T07:09:34.330
> 
> 标签：magento

如何在 magento 中显示可配置产品的等级价格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T13:15:22.840

你有没有尝试过任何东西？谷歌搜索“等级价格”返回给我的第一个结果是：http: [//www.magentocommerce.com/knowledge-base/entry/how-do-i-use-tier-pricing](http://www.magentocommerce.com/knowledge-base/entry/how-do-i-use-tier-pricing)

# android - 如何将新数据上传到android中的条形图？

> ID：13758515
> 
> 赞同：2
> 
> 时间：2012-12-07T07:09:46.430
> 
> 标签：android, sqlite

我创建了一个动态条形图。但是我无法刷新条形图，以便它从数据库中获取新值（如果有）并使用新值再次绘制条形图。我正在使用 sqlite 创建数据库。我已经**使用 achartengine 来创建条形图。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T09:30:34.200

我创建自定义图表栏。创建 dbHelper 以使用 SQLite DB。

```
import android.content.ContentValues;
    import android.content.Context;
    import android.database.Cursor;
    import android.database.sqlite.SQLiteDatabase;
    import android.database.sqlite.SQLiteOpenHelper;
    import android.provider.BaseColumns;
public class DBHelper extends SQLiteOpenHelper {
public static interface DESTINATION extends BaseColumns {
            String TABLE_NAME = "destination";
            String NAME = "name";
        }
private static final String CREATE_TABLE = "CREATE TABLE IF NOT EXISTS ";
private static final String CREATE_TABLE_DESTINATION = CREATE_TABLE + DESTINATION.TABLE_NAME + " (" 
                + DESTINATION._ID + " INTEGER PRIMARY KEY, " + DESTINATION.NAME + " TEXT );";
private static final String DATABASE_NAME = "TravelCompany";
        private static final int DATABASE_VERSION = 1;
public DBHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }
@Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL(CREATE_TABLE_DESTINATION);
        }
@Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS " + DESTINATION.TABLE_NAME);
            onCreate(db);
        }
public void insertDestination(String destinationName) {
            ContentValues values = new ContentValues();
            values.put(DESTINATION.NAME, destinationName);
            getWritableDatabase().insert(DESTINATION.TABLE_NAME, null, values);
        }
public Cursor getTop10Destinations() {
            return getReadableDatabase().query(true, DESTINATION.TABLE_NAME,
                    new String[] { DESTINATION.NAME, "COUNT(" + DESTINATION.NAME + ") AS counter" }, null, null,
                    DESTINATION.NAME, null, "counter DESC", "10");
        }
    } 
```

然后使用按钮创建第一个活动：

```
import android.app.Activity; <p>
import android.content.Intent; <p>
import android.os.Bundle; <p>
import android.view.View;
import android.view.View.OnClickListener;<p> 
import android.widget.Button;<p> 
import android.widget.LinearLayout;<p>

public class MainActivity extends Activity {
@Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            Button a = new Button(this);
            a.setText("!DRAW CHART!");
            this.addContentView(a, new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT,
                    LinearLayout.LayoutParams.FILL_PARENT));
            a.setOnClickListener(new OnClickListener() {
@Override
                public void onClick(View v) {
                    Intent b = new Intent(MainActivity.this, ChartActivity.class);
                    startActivity(b);
}
            });
}
} 
```

在按钮上单击通过类 BarChart 使用自定义 BarChart 绘图创建 ChartActivity：

```
package com.example.teaorcofee;
import java.util.Iterator;
    import java.util.LinkedHashMap;
    import java.util.Random;
import android.app.Activity;
    import android.content.Context;
    import android.database.Cursor;
    import android.graphics.Canvas;
    import android.graphics.Color;
    import android.graphics.Paint;
    import android.os.Bundle;
    import android.util.Log;
    import android.view.View;
    import android.view.ViewGroup.LayoutParams;
    public class ChartActivity extends Activity {
    private DBHelper dbHelper = new DBHelper(this);
            private String[] desinationList = new String[] { "Australia", "Germaty", "China", "Russia", "France",
                    "UK", "USA", "Ukraine", "Moldova", "Greece", "Poland", "Brazil" };
@Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_chart);
            for (int i = 0; i < 100; i++) {
                dbHelper.insertDestination(desinationList[(int) (Math.random() * desinationList.length)]);
            }
            BarChart barChart = new BarChart(this, dbHelper.getTop10Destinations());
            addContentView(barChart, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        }
private static class BarChart extends View {
            private static int THING_COUNT = 10;
            private LinkedHashMap&lt;String, Integer&gt; countArray = new LinkedHashMap&lt;String, Integer&gt;();
            private Integer maxAmout = 0;
            private static final int DISTANCE_BETWEEN_SIDE_AND_Y_AXIS = 30;
            private static int DISTANCE_BETWEEN_BOTTOM_AND_X_AXIS;
            private static final int CHART_BG_COLOR = Color.BLACK;
            private Random rnd = new Random();
public BarChart(Context context, Cursor destinationList) {
                super(context);
                for (int i = 0; i < THING_COUNT; i++) {
                    if (destinationList.moveToNext()) {
                        countArray.put(destinationList.getString(0), destinationList.getInt(1));
                        if (maxAmout < destinationList.getInt(1)) {
                            maxAmout = destinationList.getInt(1);
                        }
                    } else {
                        break;
                    }
                }
                // countArray = sortByComparator(countArray);
            }
@Override
            protected void onDraw(Canvas canvas) {
                DISTANCE_BETWEEN_BOTTOM_AND_X_AXIS = canvas.getHeight() -70;
//set chart BG color
                canvas.drawColor(CHART_BG_COLOR);
                Paint bgPaint = new Paint();
//draw white lines of X and Y axises of 2px width
                bgPaint.setColor(0xFFFFFFFF);
                bgPaint.setStrokeWidth(2);
                canvas.drawLine(DISTANCE_BETWEEN_SIDE_AND_Y_AXIS, 0, DISTANCE_BETWEEN_SIDE_AND_Y_AXIS, canvas.getHeight(), bgPaint);
                canvas.drawLine(0, DISTANCE_BETWEEN_BOTTOM_AND_X_AXIS, canvas.getWidth(), DISTANCE_BETWEEN_BOTTOM_AND_X_AXIS, bgPaint);
//calulate next to max value number round number
                //for example if max value is 683, than we will get 700
                maxAmout = (int) (((int) (maxAmout / Math.pow(10, maxAmout.toString().length() - 1) + 1)) * Math
                        .pow(10, maxAmout.toString().length() - 1));
//get iterator on set of keys 
                Iterator&lt;String&gt; iterator = countArray.keySet().iterator();
                for (double i = 0; i < THING_COUNT; i++) {
//set white color
                    bgPaint.setColor(0xFFFFFFFF);
//draw text on Y axis with numbers between 0 and rounded max value - maxAmount
                    canvas.drawText("" + (int) (maxAmout * i / THING_COUNT),
                            25 - ("" + (int) (maxAmout * i / THING_COUNT)).length() * 7,
                            (int) ((DISTANCE_BETWEEN_BOTTOM_AND_X_AXIS) * (1 - i / THING_COUNT)) + 15, bgPaint);
//get name of current item
                    String itemName = iterator.next();
//draw name of current item under its column
                    canvas.drawText(itemName.length()>3?itemName.substring(0, 3):itemName, (float) (30 + i * 28) + 5, DISTANCE_BETWEEN_BOTTOM_AND_X_AXIS+10,
                            bgPaint);
//get random color for current item column
                    bgPaint.setARGB(255, rnd.nextInt(256), rnd.nextInt(256), rnd.nextInt(256));
//draw column of current item
                    canvas.drawRect((float) (DISTANCE_BETWEEN_SIDE_AND_Y_AXIS + i * 28) + 5, DISTANCE_BETWEEN_BOTTOM_AND_X_AXIS,
                            (float) (DISTANCE_BETWEEN_SIDE_AND_Y_AXIS + (i + 1) * 28),
                            (int) ((DISTANCE_BETWEEN_BOTTOM_AND_X_AXIS) * (1 - (double) countArray.get(itemName) / maxAmout)),
                            bgPaint);
                }
//draw lines parallel to X axis
                for (double i = 0; i < 10; i++) {
                    bgPaint.setStrokeWidth(1);
                    bgPaint.setColor(0x44444444);
                    canvas.drawLine(0, (int) ((DISTANCE_BETWEEN_BOTTOM_AND_X_AXIS) * (1 - i / 10)), canvas.getWidth(),
                            (int) ((DISTANCE_BETWEEN_BOTTOM_AND_X_AXIS) * (1 - i / 10)), bgPaint);
                }
}
}
} 
```

# delphi - 如何使用 Delphi 6 修改 Indy 8 IdMessage.pas？

> ID：13758516
> 
> 赞同：4
> 
> 时间：2012-12-07T07:09:52.910
> 
> 标签：delphi, ide, indy, indy-8

我有一份 Delphi 6 和一个使用 Indy`TIdMessage`组件的简单电子邮件程序。我想删除第 464-465 行，`IdMessage.pas`然后重新编译应用程序。我很难找到清晰的文档，所以我尝试了以下步骤来修改组件：

*   `\delphi6\source\indy\indy.dpk`在IDE中打开
*   `IdMessage.pas`在“包”窗口中双击
*   编辑`IdMessage.pas`并保存文件
*   在“包”窗口中单击“编译”
*   单击“项目”菜单中的“构建 Indy”
*   在“包”窗口中单击“安装”

但后来我得到一个错误`\bpl\indy60.bpl can't be loaded because \bin\indy60.bpl is already loaded`。所以我在“组件”菜单中尝试了“安装包...”，但只在`\bpl\dclindy60.bpl`那里找到。所以我删除了那个包，并且：

*   `\delphi6\source\indy\dclindy.dpk`在IDE中打开
*   在“包”窗口中单击“编译”
*   单击项目菜单中的“构建 dclIndy”
*   在“包”窗口中单击“安装”

IDE 确认所有组件（包括`TIdMessage`）都已安装，但电子邮件程序仍在运行，就好像仍在使用未修改的原始组件一样。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T07:23:08.270

如果您使用的是运行时包，那么您需要确保您的程序找到了新的包文件 .bpl。

但是您可能没有使用运行时包。因此运行时程序使用位于 Delphi 安装文件夹中的 .dcu 文件静态链接 Indy 代码。具体在这种情况下`<ProgramFiles>\Borland\Delphi6\Lib\IdMessage.dcu`。您需要确保链接新代码。最简单的方法是将修改后的文件添加到您的项目中。这意味着修改后的版本会被编译并链接到您的程序中。

由于您的修改位于单元的实施部分，这就是您需要做的所有事情。如果修改是在接口部分，你会遇到“Unit X was compiled with a different version of Unit Y”错误。您可以通过将其余的 Indy 源代码添加到您的项目中来解决这个问题。

需要强调的一点是，永远不要修改 Delphi 安装文件夹下的文件。如果您想对这些组件进行修改，请复制文件并在这些副本中进行修改。

# facebook - FQL NoIndexFunctionException 604 page_fan

> ID：13758517
> 
> 赞同：1
> 
> 时间：2012-12-07T07:09:54.080
> 
> 标签：facebook, facebook-fql

我使用了 FQL 查询：

```
SELECT uid FROM page_fan WHERE page_id = <page_id> 
```

它返回给我这个错误：

```
{
"error": {
"message": "Your statement is not indexable. The WHERE clause must contain an             indexable column. Such columns are marked with * in the tables linked from  http://developers.facebook.com/docs/reference/fql ", 
"type": "NoIndexFunctionException", 
"code": 604
}
} 
```

在这个网站上：http: [//developers.facebook.com/docs/reference/fql/page_fan](http://developers.facebook.com/docs/reference/fql/page_fan) 我使用的所有列都被索引了。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-18T21:27:33.333

您无法再使用`FQL`. 这是设计使然。

如果您查看参考资料，[`fql/page_fan`](https://developers.facebook.com/docs/reference/fql/page_fan)您可以看到这`uid`是唯一完全索引的列，而其他索引列仅部分索引。这意味着您需要`uid`与其他部分索引列一起使用。

**这将起作用**

```
SELECT uid FROM page_fan WHERE uid = A AND page_id = B 
```

**而这不会**

```
SELECT uid FROM page_fan WHERE uid = A 
```

* * *

另请参阅“[查询'喜欢'我的 Facebook 页面的用户](https://stackoverflow.com/questions/5183251/querying-users-who-like-my-facebook-page)”，它涉及您正在尝试做的事情。

# matlab - 'cell' 类型的输入参数的未定义函数 'lt'

> ID：13758520
> 
> 赞同：1
> 
> 时间：2012-12-07T07:10:03.950
> 
> 标签：matlab

我将 30k 日期信息列表存储在大小/类型 <30000x1 cell> 的变量“enDate”中，每个单元格包含 11 个字符字符串，例如“01-Jan-2004”（例如）。

我想将真/假列表过滤到 trainInd 中，其中日期小于（之前）'2007-01-01'。我尝试这种方式，但 matlab 提示错误“未定义函数 'lt' 输入参数类型为 'cell'。” .

```
 trainInd = enDate < datenum('2007-01-01'); 
```

(a) 比较日期和 (b) 使用上述结构在 1 行代码中过滤数组偏移量的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:17:39.470

好吧。我试过这种方式，它有效

`trainInd = datenum(enDate) < datenum('2007-01-01');`

# c - 我的链接列表中的一个数组丢失了

> ID：13758521
> 
> 赞同：0
> 
> 时间：2012-12-07T07:10:10.460
> 
> 标签：c, arrays, memory-management, linked-list

这里是链表的节点：

```
struct Node {
char data;
struct Node *next;
int pindex; //this is the first index position in parent[] which is null, next element goes here
int cindex; //this one for child array
char parent[50];
char child[50];
}; 
```

这就是我创建每个节点的方式。

```
struct Node *createNode(struct Node *node, char nodeData) {
if(root == NULL) {
    int i=0;
    node= malloc(sizeof(struct Node));
    node->data = nodeData;
    while(i<50) {
        node->parent[i]= '\0';
        node->child[i]= '\0';
        i++;
    }
    node->pindex=0;
    node->cindex=0;
    node->next= malloc(sizeof(struct Node));
    root=node;
    return node;
}
else if (node->data == 0) {
    int j=0;
    node->data = nodeData;
    while (j<50) {
        node->parent[j]= '\0';
        node->child[j]= '\0';
        j++;
    }
    node->pindex=0;
    node->cindex=0;
    node->next= malloc(sizeof(struct Node));
    return node;
}
else
    return createNode(node->next, nodeData);
} 
```

这是我的代码，我在其中更新特定节点中父数组和子数组的值。

```
void insert(char a, char b) {
struct Node *pNode, *cNode;
    if (hasNode(root,a))  //check if Node with node->data ='a' exists else create it
        pNode= getNode(root,a);
    else {
        pNode= createNode(root,a);
        //addToFirst(one); No need as we already have list of all elements
    }
    if (hasNode(root, b))
        cNode= getNode(root,b);
    else
        cNode= createNode(root, b);
pNode->child[(pNode->cindex)] = b; //insert a char into child array of parent node 
pNode->cindex++;
cNode->parent[(cNode->pindex)]= a; // insert char into child array of parent node
cNode->pindex++;
} 
```

**问题出在以下部分**

```
pNode->child[(pNode->cindex)] = b; //insert a char into child array of parent node 
pNode->cindex++;
cNode->parent[(cNode->pindex)]= a; // insert char into child array of parent node
cNode->pindex++; 
```

当任何元素被插入到 cNode 的 parent[] 中时，它的 child[] 就会从内存中消失。如果我稍后将任何东西插入孩子，它的工作。

以下是我为此链接列表截取的屏幕截图，应该会有所帮助。数据根->下一个节点中缺少子数组

[【数据结构截图】](https://www.dropbox.com/s/eam6kt1rn48iw5e/Screenshot%20from%202012-12-07%2002:01:37.jpg)

# android - 使用我的 android facebook 应用程序的状态消息

> ID：13758523
> 
> 赞同：0
> 
> 时间：2012-12-07T07:10:19.707
> 
> 标签：android, facebook, facebook-android-sdk

实际上我在这方面还很新，所以这个问题对你们中的许多人来说可能有点愚蠢。无论如何，这里是：

我正在android上创建这个应用程序，它应该从edittext字段中获取输入并将其发布到facebook页面墙上。

现在我有这个代码，但它`hows mfacebook.**dialog**(this, "stream.publish", params, this);`
有一个错误说：
`The method dialog(Context, String, Bundle, Facebook.DialogListener) in the type Facebook is not applicable for the arguments (new View.OnClickListener(){}, String, Bundle, new View.OnClickListener(){})`。

有人可以告诉我有什么问题吗？

```
public class FetchData extends Activity {

private Facebook mfacebook;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_fetch_data);
    final Button widget45 = (Button)findViewById(R.id.widget45);
    final Button widget44 = (Button)findViewById(R.id.widget44);
    final Button imageButton2 = (Button)findViewById(R.id.imageButton2);
    final Button imageButton1 = (Button)findViewById(R.id.imageButton1);
    final ImageButton widget48 = (ImageButton)findViewById(R.id.widget48);
    final ImageButton widget49 = (ImageButton)findViewById(R.id.widget49);
    final ImageButton widget51 = (ImageButton)findViewById(R.id.widget51);
    final ImageButton widget56 = (ImageButton)findViewById(R.id.widget56);
    final EditText widget40 = (EditText)findViewById(R.id.widget40);
    .
    .
    .
    .
    .
    .
    .
    .
    imageButton1.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            //To change body of implemented methods use File | Settings | File Templates.

            mfacebook = new Facebook("558718227474980");
            Bundle params = new Bundle();
            params.putString("message", widget40.getText().toString());
            mfacebook.dialog(this, "stream.publish", params, this);
        }
    });
} 
```

}

# c++ - 用 C++ 表达通用的 monadic 接口（如 Monad 类）

> ID：13758524
> 
> 赞同：7
> 
> 时间：2012-12-07T07:10:21.797
> 
> 标签：c++, haskell, monads

是否有可能表达一种单子“C++？我开始写这样的东西，但卡住了：

```
#include <iostream>

template <typename  a, typename b> struct M;

template <typename a, typename b> struct M {
    virtual M<b>& operator>>( M<b>& (*fn)(M<a> &m, const a &x) ) = 0;
};

template <typename a, typename b> 
struct MSome : public M<a> {
    virtual M<b>& operator>>( M<a>& (*fn)(M<a> &m, const a &x) ) {
        return fn(*this, x);
    }

private:
    a x;
};

M<int, int>& wtf(M<int> &m, const int &v) {
    std::cout << v << std::endl;
    return m;
}

int main() {
//    MSome<int> v;
//    v >> wtf >> wtf;
    return 0;
} 
```

但面临缺乏多态性。实际上这可能是我不流行的 C++，因为我上次使用它是在 8 年前。可能有可能使用一些新的 C++ 特性来表达通用的单子接口，比如类型推断。这只是为了好玩，并向非haskellers和非数学家解释单子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T04:28:43.857

> C++ 的类型系统不足以抽象出更高种类的类型，但由于模板是鸭子类型的，您可以忽略这一点，只需分别实现各种 Monad，然后将 monadic 操作表示为 SFINAE 模板。丑陋，但它得到了最好的。

这个评论简直是赚到了钱。我一次又一次地看到人们试图使模板专业化“协变”和/或滥用继承。无论好坏，在我看来，面向概念的泛型编程更明智*。这是一个快速演示，它将使用 C++11 的特性来简洁明了，尽管应该可以在 C++03 中实现相同的功能：

（*：对于竞争意见，请参阅我的引文中的“丑陋，但最好的”！）

```
#include <utility>
#include <type_traits>

// SFINAE utility
template<typename...> struct void_ { using type = void; };
template<typename... T> using Void = typename void_<T...>::type;

/*
 * In an ideal world std::result_of would just work instead of all that.
 * Consider this as a write-once (until std::result_of is fixed), use-many
 * situation.
 */    
template<typename Sig, typename Sfinae = void> struct result_of {};
template<typename F, typename... Args>
struct result_of<
    F(Args...)
    , Void<decltype(std::declval<F>()(std::declval<Args>()...))>
> {
    using type = decltype(std::declval<F>()(std::declval<Args>()...));
};
template<typename Sig> using ResultOf = typename result_of<Sig>::type;

/*
 * Note how both template parameters have kind *, MonadicValue would be
 * m a, not m. We don't whether MonadicValue is a specialization of some M<T>
 * or not (or derived from a specialization of some M<T>). Note that it is
 * possible to retrieve the a in m a via typename MonadicValue::value_type
 * if MonadicValue is indeed a model of the proper concept.
 *
 * Defer actual implementation to the operator() of MonadicValue,
 * which will do the monad-specific operation
 */
template<
    typename MonadicValue
    , typename F
    /* It is possible to put a self-documenting assertion here
       that will *not* SFINAE out but truly result in a hard error
       unless some conditions are not satisfied -- I leave this out
       for brevity
    , Requires<
        MonadicValueConcept<MonadicValue>
        // The two following constraints ensure that
        // F has signature a -> m b
        , Callable<F, ValueType<MonadicValue>>
        , MonadicValueConcept<ResultOf<F(ValueType<MonadicValue>)>>
    >...
    */
>
ResultOf<MonadicValue(F)>
bind(MonadicValue&& value, F&& f)
{ return std::forward<MonadicValue>(value)(std::forward<F>(f)); }

// Picking Maybe as an example monad because it's easy
template<typename T>
struct just_type {
    using value_type = T;

    // Encapsulation omitted for brevity
    value_type value;

    template<typename F>
    // The use of ResultOf means that we have a soft contraint
    // here, but the commented Requires clause in bind happens
    // before we would end up here
    ResultOf<F(value_type)>
    operator()(F&& f)
    { return std::forward<F>(f)(value); }
};

template<typename T>
just_type<T> just(T&& t)
{ return { std::forward<T>(t) }; }

template<typename T>
just_type<typename std::decay<T>::type> make_just(T&& t)
{ return { std::forward<T>(t) }; }

struct nothing_type {
    // Note that because nothing_type and just_type<T>
    // are part of the same concept we *must* put in
    // a value_type member type -- whether you need
    // a value member or not however is a design
    // consideration with trade-offs
    struct universal { template<typename T> operator T(); };
    using value_type = universal;

    template<typename F>
    nothing_type operator()(F const&) const
    { return {}; }
};
constexpr nothing_type nothing; 
```

然后就可以写出类似`bind(bind(make_just(6), [](int i) { return i - 2; }), [](int i) { return just("Hello, World!"[i]); })`. 请注意，这篇文章中的代码是不完整的，因为包装的值没有正确转发，一旦涉及`const`-qualified 和 move-only 类型就会出现错误。[您可以在此处](http://stacked-crooked.com/view?id=71fb036a9a809e41345f8a5ba0be5696)查看正在运行的代码（使用 GCC 4.7），尽管这可能是用词不当，因为它所做的只是触发断言。（对于未来的读者[，ideone 上的代码相同。）](http://ideone.com/BbVnS1)

解决方案的核心是`just_type<T>`,`nothing_type`或`MonadicValue`(inside `bind`) 都不是 monad，而是总体 monad 的某些 monadic 值的类型——`just_type<int>`并且`nothing_type` *一起*是 monad现在，但请记住，可以在事后重新绑定模板特化，例如 for `std::allocator<T>`!)。因此，`bind`它必须对它接受的内容有所宽容，但请注意这并不意味着它必须接受一切。

当然，完全有可能拥有一个类模板`M`，它`M<T>`是一个模型，`MonadicValue`并且`bind(m, f)`只有在有 type 的`M<U>`地方`m`才有 type `M<T>`。从某种意义上说，这会`M`生成 monad（使用 kind `* -> *`），并且代码仍然可以工作。（说到`Maybe`，也许适应`boost::optional<T>`具有单子接口将是一个很好的练习。）

精明的读者会注意到我在`return`这里没有等价物，一切都是通过与`just`构造函数`make_just`对应的工厂来完成的`Just`。这是为了保持答案简短——一个可能的解决方案是编写一个`pure`完成 的工作`return`，并返回一个可以隐式转换为任何建模类型的值`MonadicValue`（例如通过推迟到 some `MonadicValue::pure`）。

尽管有一些设计考虑，因为 C++ 的有限类型推导意味着`bind(pure(4), [](int) { return pure(5); })`不能开箱即用。然而，这并不是一个无法克服的问题。（解决方案的一些大纲是重载`bind`，但是如果我们添加到我们`MonadicValue`概念的接口，这很不方便，因为任何新操作也必须能够显式地处理纯值；或者也使纯值成为模型`MonadicValue`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:18:00.577

我会这样做：

```
template<class T>
class IO {
public:
   virtual T get() const=0;
};

template<class T, class K>
class C : public IO<K> {
public:
   C(IO<T> &io1, IO<K> &io2) : io1(io1), io2(io2) { }
   K get() const { 
      io1.get();
      return io2.get();
   }
private:
  IO<T> &io1;
  IO<K> &io2;
};

int main() {
  IO<float> *io = new YYYY;
  IO<int> *io2 = new XXX;
  C<float,int> c(*io, *io2);
  return c.get();
} 
```

# android - 子 ImageView 可以超出其父 ViewGroup 范围吗？

> ID：13758525
> 
> 赞同：4
> 
> 时间：2012-12-07T07:10:22.737
> 
> 标签：android, android-custom-view

我正在尝试实现动画徽标，该徽标由RelativeLayout 内的两个ImageView 组成。一个是标志图标，另一个是它背后的“光芒”。“光线”可以比徽标大 3 倍。我希望能够为其复合视图设置尺寸（例如 200dp x 200dp），并让徽标拉伸该区域，并让光线超越它。是否可以？

先感谢您。

![在此处输入图像描述](../Images/dbc2ff70bb5cafec6c0d38408128fc91.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:17:00.773

简短回答：不。长回答：使用[FrameLayout](http://developer.android.com/reference/android/widget/FrameLayout.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-11T15:25:25.457

是的，它可以！使用**负值**`android:layout_marginLeft`、 或。_ `android:layout_marginRight`_ 虽然它有点像黑客。`android:layout_marginTop``android:layout_marginBottom`

# cron - 每天早上 6 点到晚上 11:30 运行 Cron 作业

> ID：13758529
> 
> 赞同：11
> 
> 时间：2012-12-07T07:10:27.240
> 
> 标签：cron, job-scheduling

你能帮我每天早上 6 点到晚上 11:30 以以下格式运行我的 cron 工作吗

*   *   *   *   *   命令路径

谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-07T07:13:07.187

cron 可以很容易地启动作业，但是如果您需要*从*早上 6 点到晚上 11.30 运行某些东西，则需要在早上 6 点发出启动命令，并在晚上 11.30 发出停止命令。

像这样的东西：

```
## start the job (6am)
  0  6 * * * /usr/bin/start-my-job

## stop the job (11.30pm)
 30 23 * * * /usr/bin/stop-my-job 
```

编辑：我想我明白你现在的要求了。试试这个：

```
## every three minutes between 6am and 11.30pm
    */3  6-22 * * * my-command
 0-30/3    23 * * * my-command 
```

编辑：好的，如果你想要下午 6 点到第二天中午，你需要：

```
## every three minutes between midnight and midday
  */3   0-11  * * * my-command
## every three minutes between 6pm and midnight
  */3  18-23  * * * my-command 
```

# iphone - 返回在 GCD 块中设置的值

> ID：13758532
> 
> 赞同：4
> 
> 时间：2012-12-07T07:10:37.683
> 
> 标签：iphone, ios, cocoa-touch, objective-c-blocks, grand-central-dispatch

我有一个从块中检索的值，我想在下面的方法中返回该值。由于该块似乎是异步的，我该如何实现呢？

```
-(UIImage*) imageAtIndex:(NSUInteger)index
{
    UIImage *image;
    [self.album enumerateAssetsAtIndexes:[NSIndexSet indexSetWithIndex:index] options:0 usingBlock: ^(ALAsset *result, NSUInteger index, BOOL *stop)
     {
            //set image in here
     }];

    return image;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:28:30.537

如果您的块是异步的，则您无法在 return is 之前设置返回值，因为程序可能在方法结束之前还没有完成异步任务。一些更好的解决方案是：

1.  如果您愿意，请找到一个可以完成相同工作的同步方法。
    现在这可能不是最佳选择，因为您的 UI 会在块运行时锁定。

2.  找到值时调用选择器，并使方法本身无效。

或许，尝试这样的事情：

```
-(void) findImageAtIndex:(NSUInteger)index target:(id)target foundSelector:(SEL)foundSEL
{
    __block UIImage *image;
    [self.album enumerateAssetsAtIndexes:[NSIndexSet indexSetWithIndex:index] options:0 usingBlock: ^(ALAsset *result, NSUInteger index, BOOL *stop)
    {
        //set image in here
        if ([target respondsToSelector:foundSEL]) { //If the object we were given can call the given selector, call it here
            [target performSelector:foundSEL withObject:image];
            return;
        }
    }];
    //Don't return a value
} 
```

然后你可以这样称呼它：

```
 ...
    //Move all your post-finding code to bar:
    [self findImageAtIndex:foo target:self foundSelector:@selector(bar:)];
}

- (void)bar:(UIImage *)foundImage {
     //Continue where you left off earlier
     ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T07:18:05.983

我以前也是这样干的，看看。

```
-(void) imageAtIndex:(NSUInteger)index //since block is async you may not be able to return the image from this method
{

    UIImage *image;
    [self.album enumerateAssetsAtIndexes:[NSIndexSet indexSetWithIndex:index] options:0 usingBlock: ^(ALAsset *result, NSUInteger index, BOOL *stop)
     {
         //set image in here
          dispatch_async(dispatch_get_main_queue(), ^{ //if UI operations are done using this image, it is better to be in the main queue, or else you may not need the main queue.
             [self passImage:image]; //do the rest of the things in `passImage:` method
          });
     }];
} 
```

# java - 随机出现 javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?

> ID：13758535
> 
> 赞同：3
> 
> 时间：2012-12-07T07:10:53.817
> 
> 标签：java, ssl, https

在执行我的 java 代码期间，我收到此错误消息

```
Exception in thread "main" AxisFault  faultCode:
{http://schemas.xmlsoap.org/soap/envelope/}Server.userException
faultSubcode:   faultString: javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?
faultActor:   faultNode:
faultDetail: 
{http://xml.apache.org/axis/}stackTrace: javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?    at
com.sun.net.ssl.internal.ssl.InputRecord.handleUnknownRecord(InputRecord.java:523) at
 com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:355) at
com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:830)   at
com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1170) at
com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1197)  at
com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1181)  at
org.apache.axis.components.net.JSSESocketFactory.create(JSSESocketFactory.java:186) at
org.apache.axis.transport.http.HTTPSender.getSocket(HTTPSender.java:191)    at
org.apache.axis.transport.http.HTTPSender.writeToSocket(HTTPSender.java:404)    at
org.apache.axis.transport.http.HTTPSender.invoke(HTTPSender.java:138) at
org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32) at
org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)    at
org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)     at
org.apache.axis.client.AxisClient.invoke(AxisClient.java:165)   at
org.apache.axis.client.Call.invokeEngine(Call.java:2765)    at
org.apache.axis.client.Call.invoke(Call.java:2748)  at
org.apache.axis.client.Call.invoke(Call.java:2424)  at
org.apache.axis.client.Call.invoke(Call.java:2347)  at
org.apache.axis.client.Call.invoke(Call.java:1804)  at
crmondemand.ws.ecbs.customobject5.CustomObject5_BindingStub.customObject5Update(CustomObject5_BindingStub.java:301) at
crm.sapGUID.urlupdate(sapGUID.java:170)     at
 crm.sapGUID.readExcelFile(sapGUID.java:102)    at
 crm.sapGUID.main(sapGUID.java:218) 
```

每次我重新运行我的程序时，此错误的发生都是随机的。有时在 10 分钟后，有时在 8 分钟后，1 分钟后的 sumtime 到 sumtime 甚至 15 分钟后。

我在代理后面，并且在我的 JAVA 中硬编码了与 Internet Explorer 中相同的代理设置

```
System.setProperty("https.proxyHost", "172.*.*.*");
System.setProperty("https.proxyPort", "8003");
System.setProperty("javax.net.ssl.trustStore", "/Oracle/Middleware/wlserver_10.3/server/lib/cacerts"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-26T13:08:31.270

我认为这是因为您正在使用`System.setProperty()`... 如果同一个 JVM 中的其他东西正在调用同一个 System.setProperty() ，它将覆盖您的设置。你最好的镜头是使用：

```
InetSocketAddress proxyInet = new InetSocketAddress("172...*",8003);
Proxy proxy = new Proxy(Proxy.Type.HTTP, proxyInet); 
```

`javax.net.ssl.trustStore`可能没问题，因为它是从命令行通过 -D 选项传入的，并且很少更改，所以我认为您不需要在代码中设置它。至少如果你需要它，将它设置在一个`static {}`块中，这样它只会加载一个，不需要重复设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-30T09:14:10.163

除非您始终使用相同的 URL 运行它，否则您正在按照异常中的说明进行操作：使用 SSL 连接到纯文本端口。偶尔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-24T09:35:54.277

设置环境变量

```
_JAVA_OPTIONS = -Djava.net.preferIPv4Stack=true 
```

这解决了我的问题。如果您在公司的专用网络上，请尝试一下。

# android - Android - 在初始布局后做出反应

> ID：13758536
> 
> 赞同：4
> 
> 时间：2012-12-07T07:10:54.167
> 
> 标签：android

这个问题已经以各种形式被问过好几次了，但我还没有找到明确的答案。

`Views`在容器（a `contentView`）的初始布局之后，我需要能够获得后代的尺寸和位置。在这种情况下所需的尺寸是不可预测的 View(Group) - 可能有多行文本、容纳装饰的最小高度等。我不想在每个布局通道 ( `onLayout`) 上都这样做。我需要的测量来自一个深度嵌套的孩子，所以覆盖中间每个容器的`onLayout`/`onMeasure`似乎是一个糟糕的选择。我不会做任何会导致循环的事情（触发事件期间事件）。

Romain Guy 曾暗示我们可以只在`.post`a`Runnable`的构造函数中使用 a `View`（AFAIK 将在 UI 线程中）。这似乎适用于大多数设备（在我个人拥有的 4 台设备中的 3 台设备上），但在 Nexus S 上失败。看起来 Nexus S 没有所有的尺寸，直到每个孩子完成一次，并且没有正确的尺寸当`post`ed`Runnable`的`run`方法被调用时。我尝试计算布局传递（in `onLayout`）并与 进行比较`getChildCount`，这同样适用于 4 个中的 3 个，但不同的 3 个（在 Droid Razr 上失败，它似乎只做一次传递 - 并获得所有测量值 - 无论孩子的数量如何）。我尝试了上述的各种排列（正常发布；发布到一个`Handler`；铸造`getContext()`到一个`Activity`并调用`runOnUiThread`...所有结果相同）。

我最终使用了一个可怕的可耻的无用黑客，通过检查目标群体的高度与其父母的高度 - 如果它不同，则意味着它已经被布置了。显然，这不是最好的方法——但似乎是唯一一种在各种设备和实现之间可靠工作的方法。我知道我们没有可以使用的内置事件或回调，但有更好的方法吗？

TYIA

**/EDIT**我猜对我来说，最重要的是 Nexus S 不会等到布局完成后`.posting()`a `Runnable`，就像我测试过的所有其他设备上的情况一样，正如 Romain Guy 和其他人所建议的那样。我还没有找到一个好的解决方法。有吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T01:26:46.497

我已经成功使用 OnGlobalLayoutListener。

它在我的 Nexus S 上运行良好

```
final LinearLayout marker = (LinearLayout) findViewById(R.id.distance_marker);
OnGlobalLayoutListener listener = new OnGlobalLayoutListener() {
    @Override
    public void onGlobalLayout() {
        //some code using marker.getHeight(), etc.
        markersContainer.getViewTreeObserver().removeGlobalOnLayoutListener(this);
    }
};
marker.getViewTreeObserver().addOnGlobalLayoutListener(listener); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-20T10:52:08.643

我自己对 OnGlobalLayoutListener 的经验是，它并不总是等到所有子视图都布置好后才触发。因此，如果您正在寻找特定子视图（或子视图的子视图等）的尺寸，那么如果您在 onGlobalLayout() 方法中测试它们，您可能会发现它们反映了布局的一些中间状态进程，而不是显示给用户的最终（静止）状态。

在对此进行测试时，我注意到通过延迟一秒执行 postDelayed() （显然是竞争条件，但这只是为了测试），我确实得到了正确的值（对于子视图的子视图），但是如果我没有延迟地做了一个简单的 post()，我得到了错误的值。

我的解决方案是避免使用 OnGlobalLayoutListener，而是在我的顶级视图（包含我需要测量其孩子的孩子）中直接覆盖 dispatchDraw()。默认的 dispatchDraw() 绘制当前视图的所有子视图，因此如果您在 dispatchDraw() 中调用 super.dispatchDraw(canvas) 后发布对执行测量的代码的调用，那么您可以确保所有子视图在进行测量之前将绘制视图。

看起来是这样的：

```
@Override
protected void dispatchDraw(Canvas canvas) {
  //Draw the child views
  super.dispatchDraw(canvas);

  //All child views should have been drawn now, so we should be able to take measurements
  // of the global layout here
  post(new Runnable() {
    @Override
    public void run() {
      testAndRespondToChildViewMeasurements();
    }
  });
} 
```

当然，在您进行这些测量之前会进行绘图，而阻止这种情况为时已晚。但如果这不是问题，那么这种方法似乎非常可靠地提供了后代视图的最终（静态）测量。

获得所需的测量值后，您将希望在 testAndRespondToChildViewMeasurements() 顶部设置一个标志，以便它无需进一步执行任何操作（或在 dispatchDraw() 覆盖本身内进行类似测试）即可返回，因为，与 OnGlobalLayoutListener 不同，无法删除此覆盖。

# c# - 如何使用包装类来解析ini文件中的值（windows phone 7）

> ID：13758538
> 
> 赞同：0
> 
> 时间：2012-12-07T07:11:00.570
> 
> 标签：c#, windows-phone-7

> **可能重复：**
> [在 C# 中读取/写入 INI 文件](https://stackoverflow.com/questions/217902/reading-writing-ini-file-in-c-sharp)

我的工作是解析 INI 文件的内容。为此，我想使用一个包装函数，其中输入应该是 INI 文件的部分和键，输出应该是相应的值。

例如，如果我将部分名称指定为“电池”，将键名称指定为“状态”，那么我应该将它们对应的值存储在 INI 文件中。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:15:24.090

看看[ini-parser 库](https://github.com/rickyah/ini-parser/)。

# c# - 如何构建表达式 > 从表达式 >

> ID：13758539
> 
> 赞同：6
> 
> 时间：2012-12-07T07:11:05.667
> 
> 标签：c#, .net, linq, linq-expressions

有没有办法从`Expression<Func<T,bool>>`构建`Expression<Func<T>>`？

例如对于类

```
public class MyClass
{
    public int Prop1{get;set;}
    public int Prop2{get;set;}
    public int Prop3{get;set;}
} 
```

如果`Expression<Func<T>>`是`() => new MyClass{Prop2 = 5}`那么结果应该是`x => x.Prop2 == 5`

如果`Expression<Func<T>>`是`() => new MyClass{Prop1 = 1, Prop3 = 3}`那么结果应该是`x => x.Prop1 == 1 && x.Prop3 == 3`

换句话说，是否可以在运行时创建具有任意数量条件的 func ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-07T07:59:54.650

像这样：

```
static Expression<Func<T,bool>> Munge<T>(Expression<Func<T>> selector)
{
    var memberInit = selector.Body as MemberInitExpression;
    if (memberInit == null)
        throw new InvalidOperationException("MemberInitExpression is expected");
    var p = Expression.Parameter(typeof(T), "x");

    Expression body = null;
    foreach (MemberAssignment binding in memberInit.Bindings)
    {
        var comparer = Expression.Equal(
            Expression.MakeMemberAccess(p, binding.Member),
            binding.Expression);
        body = body == null ? comparer : Expression.AndAlso(body, comparer);
    }
    if (body == null) body = Expression.Constant(true);

    return Expression.Lambda<Func<T, bool>>(body, p);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T08:08:03.877

让代码为自己说话：

```
class Program
{
    static Expression<Func<T, bool>> Transform<T>(Expression<Func<T>> expression)
    {
        var initExpression = expression.Body as MemberInitExpression;
        if (initExpression == null)
        {
            throw new ArgumentException();
        }

        Expression bodyExpression = Expression.Constant(true);
        IEnumerable<MemberBinding> bindings = initExpression.Bindings;
        ParameterExpression param = Expression.Parameter(typeof(T));

        foreach (var memberBinding in bindings)
        {
            var memberAssigment = memberBinding as MemberAssignment;
            if (memberAssigment == null)
            {
                throw new ArgumentException();
            }

            var member = memberAssigment.Member;
            var value = memberAssigment.Expression;

            bodyExpression = Expression.AndAlso(
                bodyExpression,
                Expression.Equal(
                    Expression.MakeMemberAccess(param, member),
                    value
                )
            );
        }

        return Expression.Lambda<Func<T, bool>>(bodyExpression, param);
    }

    static void Main(string[] args)
    {
        Expression<Func<MyClass>> exp = () => new MyClass { Prop1 = 1, Prop3 = 3 };

        var result = Transform(exp);
        var lambda = result.Compile();

        var array = new[]
        {
            new MyClass { Prop1 = 1, Prop3 = 3 },
            new MyClass { Prop1 = 1, Prop2 = 2, Prop3 = 3 },
            new MyClass { Prop1 = 1, Prop3 = 1 },
            new MyClass { Prop1 = 3, Prop3 = 3 },
            new MyClass { Prop1 = 3, Prop3 = 1 },
            new MyClass()
        };

        foreach (var o in array)
        {
            Console.WriteLine(lambda(o));
        }
    }
} 
```

# oracle-adf - 如何查看 ADF 移动应用程序的日志？

> ID：13758545
> 
> 赞同：0
> 
> 时间：2012-12-07T07:12:22.653
> 
> 标签：oracle-adf

我已经在 Android 模拟器中部署了一个示例应用程序。它正在执行，但是它给出了错误的输出。**怎么调试？？**如果在模拟器中打开页面时出现错误，**我可以在哪里看到整个日志？**

问候拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:33:42.040

Here you go, 'Testing and Debugging ADF Mobile Applications' : [http://docs.oracle.com/cd/E35521_01/doc.111230/e24475/debugging.htm](http://docs.oracle.com/cd/E35521_01/doc.111230/e24475/debugging.htm)

# symfony - 在 Xampp 上启用 eAccelerator 时出现 LogicException

> ID：13758554
> 
> 赞同：0
> 
> 时间：2012-12-07T07:13:19.753
> 
> 标签：symfony, php, eaccelerator

如果我尝试在 php.ini 中启用 eAccelerator 扩展，Symfony 2 中会显示以下错误。我使用 xampp 1.8.1。

![在此处输入图像描述](../Images/9186f132388fc969feff0820b573105d.png)

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-10T23:00:19.003

在 [eaccelerator] 部分的 php.ini 中

```
eaccelerator.optimizer = "0" 
```

# macros - 为什么 clojure 将命名空间限定符添加到反引号内的名称？

> ID：13758555
> 
> 赞同：9
> 
> 时间：2012-12-07T07:13:24.677
> 
> 标签：macros, clojure, datomic

我正在尝试以编程方式构建数据日志查询，但一直遇到我将通过示例函数说明的问题：

```
(defn test-expr [attribute]
  `[?entity ~attribute ?value]]) 
```

当我运行（test-expr 3）时，我希望输出：

```
 [?entity 3 ?value] 
```

但相反，我得到

```
[mynamespace/?entity 3 mynamespace/?value] 
```

这显然不是我想要的。有没有办法告诉clojure“请引用列表并扩展我告诉你的变量？”

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-07T07:43:11.653

就在这里。

```
(defn test-expr [attribute]
  `[~'?entity ~attribute ~'?value]) 
```

在这里，您首先取消引用语法引号，然后立即`~'`再次引用符号（构造）。结果是无命名空间的符号。

它等效于以下内容，解释了它的工作原理：

```
(defn test-expr [attribute]
  `[~(quote ?entity) ~attribute ~(quote ?value)]) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-07T15:35:02.943

您正在寻找的是 Brandon Bloom 的反引号库[https://github.com/brandonbloom/backtick](https://github.com/brandonbloom/backtick)

它是为您描述的确切问题而构建的。它提供了一个名为“模板”的命令，该命令的工作方式类似于反引号，但没有命名空间的内容。

在 Clojure 中，准引用和命名空间解析在一个特性中混合在一起。这对于用 Clojure 之类的语言编写宏有很大的好处，它是一种“Lisp-1”（与 Common Lisp 不同，它是一种“Lisp-2”，函数和变量具有单独的命名空间。）

我也同意不要将这些特性混为一谈可能会更好，但它会使在 Clojure 中编写宏变得不那么优雅，所以我可以理解它为什么会这样工作。

# php - 如何保护 Lithium php RESTful API？

> ID：13758558
> 
> 赞同：3
> 
> 时间：2012-12-07T07:13:42.373
> 
> 标签：php, rest, oauth, lithium, http-digest

我已经使用 Lithium php 框架创建了一个 RESTful 应用程序，现在我的问题是如何保护它？

是否有使用锂框架的 OAUTH 或 HTTP Digest Authentication 的现有代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T04:18:17.963

感谢您编辑您的问题以实际提出具体问题。请参阅以下内容：

*   [https://github.com/search?q=li3_oauth](https://github.com/search?q=li3_oauth)
*   [http://li3.me/docs/lithium/security/auth/adapter/Http](http://li3.me/docs/lithium/security/auth/adapter/Http)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-08T01:17:16.993

虽然我不确定您正在寻找什么样的安全性......

Lithium 内置了安全性，您可以在这里查看两个简短的教程：

*   [锂中的简单身份验证](http://li3.me/docs/manual/auth/simple-authentication.wiki)
*   [在 M、V、C 中创建用户](http://li3.me/docs/manual/auth/simple-auth-user.wiki)

“简单身份验证”教程中介绍了基础知识……您需要：

*   一个数据库来跟踪你的用户
*   引导`Auth`通过`config/bootstrap.php`
*   设置会话和身份验证适配器

然后，这取决于您是要通过表单还是其他方法进行身份验证。

教程将向您展示如何设置表单，但您也可以`config/routes.php`像这样“保护”通过文件请求的路由（url）......

```
<?php

use lithium\net\http\Router;
use lithium\core\Environment;

use lithium\security\Auth;

// check if the user is logged in
$user = Auth::check('default'); 

// these routes are not behind a login
Router::connect('/login', 'Sessions::add');
Router::connect('/logout', 'Sessions::delete');

if ($user && $user["user"] == "admin") {

    // these two routes will only work if a user is authenticated.
    Router::connect('/{:controller}/{:action}/{:args}.{:type}');
    Router::connect('/{:controller}/{:action}/{:args}');
}

// redirect the user to a login if no other routes match
Router::connect('/{:args}', array(), function($request) { header('Location: /login/url/'.str_replace('/','*',$request->url)); exit; });

?> 
```

# java - Android：位图到字节数组并返回：SkImageDecoder::Factory 返回 null

> ID：13758560
> 
> 赞同：15
> 
> 时间：2012-12-07T07:13:50.013
> 
> 标签：java, android, bitmap, bytearray, android-imageview

目标是将 a 转换`Bitmap`为 a `byte []`，在数据的 a 中的活动之间传递它`Bundle`，然后在稍后阶段将其重新转换回 a`Bitmap`以显示在 an 中`Imageview`。

问题是，每当我尝试这个时，我只会得到一个空位图和非描述性、无用的日志输出：

`12-07 17:01:33.282: D/skia(2971): --- SkImageDecoder::Factory returned null`

我查看了以下解决方案：

[解决方案将位图提供给使用的 byte[] 代码](https://stackoverflow.com/questions/10191871/converting-bitmap-to-bytearray-android)

[强调 copyPixelsToBuffer() 对 .compress 至关重要](https://stackoverflow.com/questions/10770263/decodebytearray-and-copypixelstobuffer-not-working-skimagedecoderfactory-retu)

（特别是在这种情况下没有必要）。

我已经运行了以下测试用例，它肯定将问题缩小到转换和恢复代码。根据我的调试，解码正确，字节数组大小正确且完整，位图配置被迫相同，`decodeByteArray`只是失败了：

```
package com.example.debug;

import java.nio.ByteBuffer;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.Bitmap.Config;
import android.graphics.BitmapFactory;
import android.util.Log;
import android.view.Menu;
import android.widget.ImageView;
import android.widget.RelativeLayout;

public class MainActivity extends Activity {
    RelativeLayout rl = null;
    RelativeLayout.LayoutParams rlp = null;

    ImageView ivBef = null;
    ImageView ivAft = null;

    Bitmap bmBef = null;
    Bitmap bmAft = null;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // TEST
        BitmapFactory.Options bmo = new BitmapFactory.Options();
        bmo.inPreferredConfig = Config.ARGB_8888;

        bmBef = BitmapFactory.decodeFile("/mnt/sdcard/Debug/001.png", bmo);
        byte[] b = bitmapToByteArray(bmBef);
        bmAft = BitmapFactory.decodeByteArray(b, 0, b.length, bmo);

        LinearLayout ll = new LinearLayout(this);

        ivBef = new ImageView(this);
        ivBef.setImageBitmap(bmBef);

        ivAft = new ImageView(this);
        ivAft.setImageBitmap(bmAft);

        ll.addView(ivBef);
        ll.addView(ivAft);

        setContentView(ll);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public static byte[] bitmapToByteArray(Bitmap bm) {
        // Create the buffer with the correct size
        int iBytes = bm.getWidth() * bm.getHeight() * 4;
        ByteBuffer buffer = ByteBuffer.allocate(iBytes);

        // Log.e("DBG", buffer.remaining()+""); -- Returns a correct number based on dimensions
        // Copy to buffer and then into byte array
        bm.copyPixelsToBuffer(buffer);
        // Log.e("DBG", buffer.remaining()+""); -- Returns 0
        return buffer.array();
    }

} 
```

之前`Imageview`正确显示图像，之后`ImageView`不显示任何内容（正如您对空位图所期望的那样

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-07T07:20:07.190

您正在将位图传递到 Intent 并从捆绑包中获取下一个活动中的位图，但问题是如果您的位图/图像大小当时很大，则图像未在下一个活动中加载。

使用以下 2 个解决方案来解决此问题。

1）首先将图像转换为字节数组，然后传递到意图，并在下一个活动中从捆绑中获取字节数组并转换为图像（位图）并设置为ImageView。

将位图转换为字节数组：-

```
Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] byteArray = stream.toByteArray(); 
```

将字节数组传递给意图：-

```
Intent intent = new Intent(this, NextActivity.class);
intent.putExtra("picture", byteArray);
startActivity(intent); 
```

从 Bundle 中获取字节数组并转换为位图图像：-

```
Bundle extras = getIntent().getExtras();
byte[] byteArray = extras.getByteArray("picture");

Bitmap bmp = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length);
ImageView image = (ImageView) findViewById(R.id.imageView1);

image.setImageBitmap(bmp); 
```

2）首先将图像保存到 SDCard 中，然后在下一个活动中将此图像设置为 ImageView。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T07:16:39.697

以下方法对我很有效，试一试..

```
public byte[] convertBitmapToByteArray(Context context, Bitmap bitmap) {
    ByteArrayOutputStream buffer = new ByteArrayOutputStream(bitmap.getWidth() * bitmap.getHeight());
    bitmap.compress(CompressFormat.PNG, 100, buffer);
    return buffer.toByteArray();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T07:22:39.683

试试这个：

```
 bmBef = BitmapFactory.decodeFile("/mnt/sdcard/Debug/001.png", bmo);
  ByteArrayOutputStream baos= new ByteArrayOutputStream();
  bmBef .compress(Bitmap.CompressFormat.PNG, 100, baos);
  byte[] byteArray = baos.toByteArray(); 
```

# asp.net-mvc - 淘汰赛和 MVC 集合绑定

> ID：13758561
> 
> 赞同：1
> 
> 时间：2012-12-07T07:13:56.320
> 
> 标签：asp.net-mvc, model-view-controller, knockout.js, knockout-mvc

我试图在 MVC 中开始使用 Knockout 并设法使正常的绑定/映射工作，但是在集合方面我被卡住了。到目前为止，我有以下代码：

```
public class TestViewModel
{
    public TestViewModel()
    {
        Persons = new List<Person>();
    }

    public List<Person> Persons { get; set; } 

}

public class Person
{
    public Person()
    {
    }

    public string Name { get; set; }
    public string Surname { get; set; }
    public List<string> Children { get; set; } 
} 
```

cshtml代码：

```
<h2>People</h2>
<div data-bind="template: { name: 'person-template', foreach: persons }"></div>

<script type="text/html" id="person-template">
    <ul>
        <li>
            <div><span data-bind="text: name"/>&nbsp;<span data-bind="text: surname"/> has <span data-bind='text: children().length'/></div>
            <ul data-bind="foreach: children">
                <li><span data-bind="text: $data"> </span></li>
            </ul>
        </li>
    </ul>
</script>

<script type="text/javascript">

var TestModel = function(model) {
    var self = this;
    self.persons = ko.observableArray(ko.utils.arrayMap(model.Persons, function(person) {
        var per = new Person(person);
        return per;
    }));
};

var Person = function(person) {
    var self = this;
    self.Name = ko.observable(person.Name);
    self.Surname = ko.observable(person.Surname);
    self.Children = ko.observableArray(person.Children);
};

$(function() {
        var data = @(Html.Raw(Json.Encode(Model)));
        ko.applyBindings(new TestModel(data));
    });

</script> 
```

我遇到的问题不确定映射是否完成或模板的输出是否存在问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:41:47.267

问题在于区分大小写。这是正确的模板

```
<script type="text/html" id="person-template">
    <ul>
        <li>
            <div><span data-bind="text: Name"/>&nbsp;<span data-bind="text: Surname"/> has <span data-bind='text: Children().length'/></div>
            <ul data-bind="foreach: Children">
                <li><span data-bind="text: $data"> </span></li>
            </ul>
        </li>
    </ul>
</script> 
```

# sql - 连接来自 Access 和 SQL 表的数据

> ID：13758562
> 
> 赞同：0
> 
> 时间：2012-12-07T07:13:55.783
> 
> 标签：sql, sql-server, ms-access, join

我有一个这样的访问表

```
id     FrstName     LastName     Status
=================================================
1      John          Smith          1
2      Mike          Black          0 
```

这是项目 1 中的表。我必须在有 SQL 表的项目 2 上工作。在这个项目中，我需要结合访问数据（项目 1）和 SQL 数据（项目 2）。

有没有一种方法可以将来自 SQL 的表与来自访问的表连接起来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:43:59.613

您可以通过选项**Linked Server 链接**SQL Server 中的访问数据库，然后您可以使用它进行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:47:38.777

你有两个选择：

1.  在数据库环境中创建一个链接服务器，然后创建一个 SP 来处理它。

2.  为它们获取两个DataSet，然后根据ID将两个数据表合并为一个。

希望它能给你一些想法。

# cocoa - cocoa：当我调用toggleFullScreen方法时，如何返回？

> ID：13758564
> 
> 赞同：0
> 
> 时间：2012-12-07T07:14:09.403
> 
> 标签：cocoa, fullscreen, exit

如何让窗口模式退出全屏模式？

我知道按“esc”退出，我想知道，按“esc”时调用了哪个方法？

有任何想法吗？

谢谢，蓝调

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:01:45.533

`toggleFullScreen:`将被调用。在苹果的意义上切换意味着它将根据当前状态切换或切换。因此，如果窗口处于全屏状态，调用`toggleFullScreen:`将使窗口退出全屏模式。引用[文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html)：

```
toggleFullScreen:
Taken the window into or out of fullscreen mode, 
```

# image - 估计两个图像之间的仿射变换

> ID：13758570
> 
> 赞同：4
> 
> 时间：2012-12-07T07:14:35.113
> 
> 标签：image, image-processing, opencv

我有一个示例图像：

![在此处输入图像描述](../Images/9e7d8685ac58f3ea87fe0fb0b5d16684.png)

我使用以下扭曲矩阵应用仿射变换：

```
[[ 1.25  0\.    -128  ]
 [ 0\.    2\.    -192  ]] 
```

并从结果中裁剪 128x128 部分以获得输出图像：

![在此处输入图像描述](../Images/043393f819c0f00a7991b0dd96b11263.png)

现在，我想通过比较样本和输出图像来估计扭曲矩阵和裁剪大小/位置。我使用 SURF 检测特征点，并通过蛮力匹配它们：

![在此处输入图像描述](../Images/75e8e47ae4658d74beb3f3efba7a058b.png)

有很多匹配，其中我保留了最好的三个（按距离），因为这是估计仿射变换所需的数字。然后我使用这 3 个关键点来估计使用 getAffineTransform 的仿射变换。但是，它返回的转换是完全错误的：

```
-0.00 1.87 -6959230028596648489132997794229911552.00 
0.00 -1.76 -0.00 
```

我究竟做错了什么？源代码如下。

执行仿射变换（Python）：

```
"""Apply an affine transform to an image."""
import cv
import sys
import numpy as np
if len(sys.argv) != 10:
    print "usage: %s in.png out.png x1 y1 width height sx sy flip" % __file__
    sys.exit(-1)
source = cv.LoadImage(sys.argv[1])
x1, y1, width, height, sx, sy, flip = map(float, sys.argv[3:])
X, Y = cv.GetSize(source)
Xn, Yn = int(sx*(X-1)), int(sy*(Y-1))
if flip:
    arr = np.array([[-sx, 0, sx*(X-1)-x1], [0, sy, -y1]])
else:
    arr = np.array([[sx, 0, -x1], [0, sy, -y1]])
print arr
warp = cv.fromarray(arr)
cv.ShowImage("source", source)
dest = cv.CreateImage((Xn, Yn), source.depth, source.nChannels)
cv.WarpAffine(source, dest, warp)
cv.SetImageROI(dest, (0, 0, int(width), int(height)))
cv.ShowImage("dest", dest)
cv.SaveImage(sys.argv[2], dest)
cv.WaitKey(0) 
```

从两个图像估计仿射变换（C++）：

```
#include <stdio.h>
#include <iostream>
#include <opencv2/core/core.hpp>
#include <opencv2/features2d/features2d.hpp>
#include <opencv2/calib3d/calib3d.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/nonfree/nonfree.hpp>
#include <opencv2/imgproc/imgproc.hpp>

#include <algorithm>

using namespace cv;

void readme();

bool cmpfun(DMatch a, DMatch b) { return a.distance < b.distance; }

/** @function main */
int main( int argc, char** argv )
{
    if( argc != 3 )
    {
        return -1;
    }

    Mat img_1 = imread( argv[1], CV_LOAD_IMAGE_GRAYSCALE );
    Mat img_2 = imread( argv[2], CV_LOAD_IMAGE_GRAYSCALE );

    if( !img_1.data || !img_2.data )
    {
        return -1;
    }

    //-- Step 1: Detect the keypoints using SURF Detector
    int minHessian = 400;

    SurfFeatureDetector detector( minHessian );

    std::vector<KeyPoint> keypoints_1, keypoints_2;

    detector.detect( img_1, keypoints_1 );
    detector.detect( img_2, keypoints_2 );

    //-- Step 2: Calculate descriptors (feature vectors)
    SurfDescriptorExtractor extractor;

    Mat descriptors_1, descriptors_2;

    extractor.compute( img_1, keypoints_1, descriptors_1 );
    extractor.compute( img_2, keypoints_2, descriptors_2 );

    //-- Step 3: Matching descriptor vectors with a brute force matcher
    BFMatcher matcher(NORM_L2, false);
    std::vector< DMatch > matches;
    matcher.match( descriptors_1, descriptors_2, matches );

    double max_dist = 0;
    double min_dist = 100;

    //-- Quick calculation of max and min distances between keypoints
    for( int i = 0; i < descriptors_1.rows; i++ )
    {   double dist = matches[i].distance;
        if( dist < min_dist ) min_dist = dist;
        if( dist > max_dist ) max_dist = dist;
    }
    printf("-- Max dist : %f \n", max_dist );
    printf("-- Min dist : %f \n", min_dist );

    //-- Draw only "good" matches (i.e. whose distance is less than 2*min_dist )
    //-- PS.- radiusMatch can also be used here.
    sort(matches.begin(), matches.end(), cmpfun);
    std::vector< DMatch > good_matches;
    vector<Point2f> match1, match2;
    for (int i = 0; i < 3; ++i)
    {
        good_matches.push_back( matches[i]);
        Point2f pt1 = keypoints_1[matches[i].queryIdx].pt;
        Point2f pt2 = keypoints_2[matches[i].trainIdx].pt;
        match1.push_back(pt1);
        match2.push_back(pt2);
        printf("%3d pt1: (%.2f, %.2f) pt2: (%.2f, %.2f)\n", i, pt1.x, pt1.y, pt2.x, pt2.y);
    }

    //-- Draw matches
    Mat img_matches;
    drawMatches( img_1, keypoints_1, img_2, keypoints_2, good_matches, img_matches,
                 Scalar::all(-1), Scalar::all(-1), vector<char>(), DrawMatchesFlags::NOT_DRAW_SINGLE_POINTS);

    //-- Show detected matches
    imshow("Matches", img_matches );
    imwrite("matches.png", img_matches);

    waitKey(0);

    Mat fun = getAffineTransform(match1, match2);
    for (int i = 0; i < fun.rows; ++i)
    {
        for (int j = 0; j < fun.cols; j++)
        {
            printf("%.2f ", fun.at<float>(i,j));
        }
        printf("\n");
    }

    return 0;
}

/** @function readme */
void readme()
{
    std::cout << " Usage: ./SURF_descriptor <img1> <img2>" << std::endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T08:42:36.113

`cv::Mat getAffineTransform`返回由双精度数组成，而不是浮点数。您得到的矩阵可能很好，您只需`printf`将循环中的命令更改为

```
printf("%.2f ", fun.at<double>(i,j)); 
```

甚至更简单：将此手动输出替换为

```
std::cout << fun << std::endl; 
```

它更短，您不必自己关心数据类型。

# sql - sql - 非规范化地址

> ID：13758574
> 
> 赞同：0
> 
> 时间：2012-12-07T07:15:03.840
> 
> 标签：sql, denormalization

```
Customer Table - CustomerId, Street, City, State, Zipcode

ZipCode Table - ZipCodeId, ZipCode, CityId, StateId 
```

但是，我对此感到困惑的是 - 我应该将 CityId、StateId 和 ZipCodeId 放在客户表中还是应该将 CityName、StateName 和 ZipCode 放在客户表中？并且应该将这些设置为引用城市、州和邮政编码表中的外键吗？我应该完全摆脱 City Table 并在 ZipCode 表和 Customer 表中重复城市名称吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:56:10.637

如果可能有多个城市具有相同的邮政编码，那么更好的解决方案是拥有一个 City 表，其中有*zipcode*列（只有 varchar 或 int 列，没有外键）。在**City表中，您保留****State**表中的外键。最后，您应该将*CityId*保留在**Customer**表中。

原因：City 和 State 表是小表，加入它们不会造成性能问题，只需在它们上创建索引，一切都会好起来的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:01:20.473

名义上，客户表应该只包含街道地址和邮政编码 ID（而不是城市或州）。请注意，这种标准化方案的数据输入不一定是直截了当的；人们会期望输入城市、州、邮政编码（或者可能只是邮政编码），并且应用程序有责任正确映射并在必要时消除歧义。

我也住在两个城市使用的邮政编码；他们甚至碰巧在不同的县，这导致我有时会问我住在哪个县。其中一个城市有多个其他邮政编码；另一个只有（部分）一个邮政编码。没有问题：对于同一个 ZipCode，您将有两个单独的 ZipCodeID 条目，每个城市一个。请注意，这意味着ZipCode 表中的 ZipCode 列上*不会有唯一索引。*

您会将 Zip+4 方案的 +4 存储在哪里？好问题！那属于街道地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T07:57:49.963

你的设计对我来说看起来不错 - 在客户表中保留完整地址。只需确保您允许在 ZipCode 表中输入具有相同邮政编码但不同城市的多个条目（即不要使 ZipCode.ZipCode 成为唯一键）。

[看这里：](http://www.city-data.com/forum/raleigh-durham-chapel-hill-cary/991779-same-zip-code-different-town-tax.html)

> 邮政编码仅与邮件系统有关，与政治界限完全无关。一些城市将覆盖多个邮政编码；一些邮政编码将覆盖不止一个城市。

当你打电话给保险公司并告诉他们邮政编码后，他们会给你非常糟糕的报价，这非常令人沮丧 - 仅仅是因为你似乎住在马路对面的不同城市，而那个城市的邮政编码完全相同，但犯罪情况很糟糕。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T19:24:57.623

您还可以将 USPS 地址更正合并到您的应用程序中，以标准化并保持此信息标准化。见：[https ://ribbs.usps.gov/index.cfm?page=aec](https://ribbs.usps.gov/index.cfm?page=aec)

# html - Pentaho reportviewer URL 未在 iframe 中加载

> ID：13758578
> 
> 赞同：2
> 
> 时间：2012-12-07T07:15:25.397
> 
> 标签：html, pentaho

我是pentaho的新手。

我尝试在 iframe 中使用 pentaho reportviewer 显示报告，我使用**.prpt**文件加载报告。

我在 iframe 中使用了以下网址

```
http://172.20.10.30:8080/pentaho/content/reporting/reportviewer/report.html?solution=steel-wheels&path=%2Freports&name=Inventory.prpt&userid=joe&password=password 
```

如果我在浏览器中调用上面的 URL，它会显示报告。我不知道上面代码中的问题。

听到是我的 iframe 代码

```
<html>
        <head>
            <title>Sensatron Issue Testing</title>
        </head>
        <body>
            <p><strong></strong><b> Sensatron Issue Testing.</b></p>
            <iframe width="1300px" height="750px" src="http://172.20.10.30:8080/pentaho/content/reporting/reportviewer/report.html?solution=steel-wheels&path=%2Freports&name=Inventory.prpt&userid=joe&password=password" name="Bharat" >
            </iframe><br>
        <br>
    </body>
</html> 
```

结果：iframe 为空

Pentaho 服务器及其版本。

我使用 pentaho BIserver4.5 使用 .prpt 文件生成报告

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-23T08:12:03.090

这个老问题还没有回答，我也试图找到一个解决方案。

解决方案之一是显示报告的 html 版本，如建议 [http://pentahoreportingandintegration.blogspot.com/2013/04/pentaho-report-integration-in-iframe.html中的建议显示报告的 html 版本](http://pentahoreportingandintegration.blogspot.com/2013/04/pentaho-report-integration-in-iframe.html)

但我相信更好的解决方案是我的。我在我的博客中解释过：http: [//fabiantowang.blogspot.com/2013/07/embed-pentaho-report-viewer-to-web.html](http://fabiantowang.blogspot.com/2013/07/embed-pentaho-report-viewer-to-web.html)

# python - 以功能方式转换元组列表

> ID：13758579
> 
> 赞同：1
> 
> 时间：2012-12-07T07:15:26.663
> 
> 标签：python, map, functional-programming

我在 Python 中有以下列表：

```
[('1','2','3'),('5','6','7')] 
```

我需要以`[(1,2,3),(5,6,7)]`函数的方式将列表中的元组转换为 integer()。

我可以使用这个简单的代码来做一个列表：`map(lambda x:int(x),['1','2','3'])`

但是我应该如何将相同的概念应用于元组列表？

（我知道这样做的必要方式。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T07:18:30.657

```
tl = [('1','2','3'),('5','6','7')]
[tuple(int(x) for x in t) for t in tl]
# [(1, 2, 3), (5, 6, 7)] 
```

如果你真的想要`map`语法，

```
map(lambda t:tuple(map(int, t)), tl)
# [(1, 2, 3), (5, 6, 7)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:42:49.893

这种混合有效：

```
>>> [tuple(map(int,t)) for t in [('1','2','3'),('5','6','7')]]
[(1, 2, 3), (5, 6, 7)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T07:21:58.547

以下情况如何：

```
[tuple([int(str_int) for str_int in tup]) for tup in list_of_string_tuples] 
```

# javascript - 在 IE8 中返回 NAN 的 Javascript 日期

> ID：13758581
> 
> 赞同：3
> 
> 时间：2012-12-07T07:15:31.530
> 
> 标签：javascript, date, nan

我正在尝试解析`2012-12-07T16:18:15+05:30`我从数据库中以字符串格式接收的日期。我正在使用的解析函数是：

```
var jstime = new Date("2012-12-07T16:18:15+05:30"); 
 var h = jstime.getHours();
var m = jstime.getMinutes();
var s = jstime.getSeconds();
var f = "am"
if(h >= 12)
{
    f = "pm";
    h = h - 12;
}
if(h == 0)
{
    h = 12;
}
var str;
str = jstime.toDateString();
str = str +"," + h.toString() + ":" + m.toString() + ":" + s.toString() + " " + f.toString(); 
```

但是，**IE8 浏览器**在第一行返回 NAN，即 jstime 在 IE8 中是 NAN，而在其他浏览器中工作正常。
那么，是否有任何替代方法来解析在所有浏览器中都能正常工作的日期？
我需要它接受上述格式的日期并以格式返回日期： `Fri Dec 07 2012,4:18:15 pm`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T07:22:28.313

如果您可以确定格式，则可以对其进行正则表达式：

```
var match = "2012-12-07T16:18:15+05:30".match(/(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d)([+-])(\d\d):(\d\d)/);
var jstime = new Date();
jstime.setUTCFullYear(parseInt(match[1],10));
jstime.setUTCMonth(parseInt(match[2],10)-1);
jstime.setUTCDate(parseInt(match[3],10));
jstime.setUTCHours(parseInt(match[4],10)-parseInt(match[7]+"1",10)*parseInt(match[8],10));
jstime.setUTCMinutes(parseInt(match[5],10)-parseInt(match[7]+"1",10)*parseInt(match[9],10));
jstime.setUTCSeconds(parseInt(match[6],10)); 
```

但如果它来自服务器端，您可以在那里更可靠地格式化它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-07T07:26:23.360

你可以这样做 -

```
date = Date.parse("2012-12-07T16:18:15+05:30");
var jstime = new Date(date); 
var h = jstime.getHours();
var m = jstime.getMinutes();
var s = jstime.getSeconds();
continue your code ..... 
```

我想这会对你有所帮助。

# r - 无法在 R 中使用 CairoPDF 编写中文文本

> ID：13758587
> 
> 赞同：0
> 
> 时间：2012-12-07T07:16:18.910
> 
> 标签：r, plot, multilingual

我正在使用上一个问题中建议的 cairo pdf

[如何在pdf上绘制汉字？](https://stackoverflow.com/questions/12948701/how-to-plot-chinese-characters-on-pdf)

用于在 R 上生成中文文本。

```
library(Cairo)
mydata = matrix( c( 2:6, c( 2,4,2,6,3 ) ), nrow= 2 )
mylabs = c( "木材", "表", "笔", "垃圾桶", "杯" )
CairoPDF("Report_chinese.pdf", family="GB1")
barplot( mydata, beside=T, horiz= "T", names.arg= mylabs, las= 1, col= c( "red", "blue" ) )
dev.off() 
```

但是条形图上没有中文文本。我该如何修复这个 pblm？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T17:11:20.127

`cairo_pdf()`为我工作：

```
mydata = matrix( c( 2:6, c( 2,4,2,6,3 ) ), nrow= 2 )
mylabs = c( "木材", "表", "笔", "垃圾桶", "杯" )
cairo_pdf("Report_chinese.pdf")
barplot( mydata, beside=T, horiz= "T", names.arg= mylabs, las= 1, col= c( "red", "blue" ) )
dev.off() 
```

如果要使用该`Cairo`库，则必须首先定义具有 CJK 字形的字体（**编辑：**根据评论中的请求，此示例对标签和标题使用不同的字体）：

```
library(Cairo)
CairoFonts(regular="AR PL UKai CN:Book", bold="Century Schoolbook L:Italic")
CairoPDF("Report_chinese.pdf")
barplot( mydata, beside=T, horiz= "T", names.arg= mylabs, las= 1, col= c( "red", "blue" ) )
mtext("This is the title", side=3, line=1, font=2)
dev.off() 
```

请注意，to 的参数`CairoFonts()`只是任意指针：我已经使用该`bold=`参数来指定斜体字体，并`font=2`在调用 to时使用它来访问它`mtext()`（请参阅 中的`font`参数`?par`）。请务必将“AR PL UKai CN:Book”和“Century Schoolbook L:Italic”替换为您系统上实际拥有的字体。

如果你不喜欢那个方法，你可以通过`CairoFonts()`多次调用得到相同的结果：

```
CairoFonts(regular="AR PL UKai CN:Book")
CairoPDF("Report_chinese.pdf")
barplot( mydata, beside=T, horiz= "T", names.arg= mylabs, las= 1, col= c( "red", "blue" ) )
CairoFonts(regular="Century Schoolbook L:Italic")
mtext("This is the title", side=3, line=1) #implicit argument: font=1
dev.off() 
```

![带有中文类别标签和整体标题不同字体的样本数据条形图](../Images/2277f20ea5bfd3c47c2b655601e14db4.png)

# java - Java正则表达式：没有哈希的href

> ID：13758592
> 
> 赞同：0
> 
> 时间：2012-12-07T07:17:06.800
> 
> 标签：java, html, regex, href

我正在尝试构建一个站点地图并解析`href`没有的 s的 html 正文`#`（因为带有哈希的那些只是某些内容页面 html 中的子章节链接）。

我现在的正则表达式：`<a\\s[^>]*href\\s*=\\s*\"([^\"]*)\"[^>]*>(.*?)</a>` 我想我应该使用`[^#]`或`!#`排除`#`from `href`s，但无法通过尝试和谷歌搜索来解决它。提前感谢您帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:26:11.330

完成了。`#`刚刚在`[^\"]`块中插入了。:D

```
<a\\s[^>]*href\\s*=\\s*\"([^\"#]*)\"[^>]*>(.*?)</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T07:26:14.123

您不应该使用正则表达式来解析 HTML。

最好使用 HTML 解析器，例如[http://jsoup.org](http://jsoup.org)，然后

```
Document doc = Jsoup.parse(input);
Elements links = doc.select("a[href]");

for (Element each: links) {
    if (each.attr("href").startsWith("#")) continue;
    ...
} 
```

比使用正则表达式要轻松得多，嗯！

# javascript - 从函数本身获取函数名

> ID：13758593
> 
> 赞同：1
> 
> 时间：2012-12-07T07:17:10.263
> 
> 标签：javascript

> **可能重复：**
> [我可以在 javascript 中获取当前正在运行的函数的名称吗？](https://stackoverflow.com/questions/1013239/can-i-get-the-name-of-the-currently-running-function-in-javascript)

我想从函数本身获取函数名。

Javascript：

```
Cube : {
    profile : {
        edit : function(){
            // Get function Path Cube.edit Here
            alert(arguments.callee.name); // Not Working
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T07:22:32.447

您的代码片段*中*的函数没有名称，它是匿名的。分配给它的属性`profile`有一个名称 ( `edit`)，但函数没有。不，没有办法从函数对象中获取`edit`或`profile.edit`获取。`Cube.profile.edit`

您可以为函数命名：

```
Cube : {

   profile: {
       edit : function edit(){

         alert(arguments.callee.name);

       }
   }
} 
```

...但这是使用*命名函数表达式*，它将在 IE8 和更早版本上创建[两个单独的函数对象。](http://blog.niftysnippets.org/2010/09/double-take.html)

你也可以这样做：

```
Cube : {

   profile: {
       edit : Cube_profile_edit
    }
}
// ...

function Cube_profile_edit(){

    alert(arguments.callee.name);
} 
```

但是，在所有上述情况中，存在两个问题：

1.  您正在使用它在许多浏览器上都非常慢，并且在[严格模式下](http://www.ecma-international.org/ecma-262/5.1/#sec-C)`arguments.callee`无效。

2.  函数对象的`name`属性是非标准的，这就是为什么[这个答案](https://stackoverflow.com/questions/1013239/can-i-get-the-name-of-the-currently-running-function-in-javascript)谈到可能必须解析`Function#toString`. 问题是，`Function#toString`它**也是**非标准的（但得到了相当广泛的支持，除了在移动浏览器上）。

您可以通过在对象图中搜索引用该函数的属性来避免第二个问题`Cube`，但这仍然需要使用`arguments.callee`（除非您给函数一个真实名称，然后在搜索时使用该真实名称来查找属性路径导致它）。

# android - onBackPress 在片段中调用什么

> ID：13758597
> 
> 赞同：1
> 
> 时间：2012-12-07T07:17:31.363
> 
> 标签：android, fragment, onresume, onpause

在一个片段中，我有这个：

```
onPause(){

super.onPause();
if(flag){
getActivity.finish();
}else{
}
}

onResume(){

flag = true;
super.onResume();
} 
```

并且有一个按钮，单击时我将此标志设置为false：

```
Button.onClick{
flag = false;
} 
```

这个想法是：

**单击按钮**时不要完成此活动。但是当按下设备**BackButton时完成（）。**

但是这个逻辑是行不通的。原因是，当我按下设备的**BackButton**时，没有调用**onPause 。**

这是活动中的第四个片段。所以当我按下 BackButton 时，我可以看到第三个片段。我不想。

**我在 API 10 设备上使用它，但我的应用程序使用支持库 v4。**

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T07:23:52.853

如果要关闭后按活动，则覆盖**活动**`onBackPressed`内部，如下所示：

 **```
public void onBackPressed() {
   Fragment fragment = getSupportFragmentManager().findFragmentByTag("yourfragment");
   if (fragment instanceOf YourFragmet) {
          finish();
          return;
   }
   super.onBackPressed();
} 
```

如果你想在按钮点击时关闭活动，那么你可以调用

```
Button.onClick{
  getActivity().onBackPressed();
} 
```

或者

```
Button.onClick{
  getActivity().finish();
} 
```

如果在 Fragment 之间转换时，调用 addToBackStack() 作为 FragmentTransaction 的一部分，则返回按钮会将您带到返回堆栈顶部的片段

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-03T01:10:10.747

为什么不能使用 Fragment 的 onDetach()？在按下 Back 键时，将在片段上调用 ​​onDetach() 以将其删除。

```
@Override
public void onDetach() {
   super.onDetach();
   if(flag){
     getActivity.finish();
   }else{
        }
} 
```**

# web-services - 在 wsdl2java 中获取 localhost:8080 而不是 my_ip_address:8080

> ID：13758598
> 
> 赞同：0
> 
> 时间：2012-12-07T07:17:35.817
> 
> 标签：web-services, maven-plugin, axis, wsdl2java

我正在使用**axistools-maven-plugin**

这是我的 xml 内容。

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>axistools-maven-plugin</artifactId>
    <version>1.4</version>
    <configuration>
    <urls>
       <url>http://localhost:8080/link/to/webservice?wsdl</url>
    </urls>
    <packageSpace>my.package</packageSpace>
    <serverSide>true</serverSide>
    <outputDirectory>src/main/java</outputDirectory>
    </configuration>
    <executions>
       <execution>
        <goals>
            <goal>wsdl2java</goal>
            </goals>
       </execution>
    </executions>
</plugin> 
```

我***得到***生成的输出为：

```
http://my_ip_address:8080/link/to/webservice 
```

我***希望***生成的输出为：

```
http://localhost:8080/link/to/webservice
     OR
http://127.0.0.1:8080/link/to/webservice 
```

因为**http://my_ip_address:8080/link/to/webservice**（我认为）将尝试从网络获取连接。我想在本地连接。

请帮忙..

**更新：**

它适用于 Windows XP，但不适用于 Linux (CentOS)。很抱歉没有提到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T10:05:22.670

好吧，既然我没有得到答案，我想我找到了自己的答案。

我不得不解决它。这是过程。

1.  我使用目标机器本身下载 wsdl 文件。

2.  更改端口地址。

    ```
    <service name="serviceName">
      <port name="servicePort" binding="tns:soapBinding">
        <soap:address location="http://localhost:8080/link/to/webservice"/>
      </port>
    </service> 
    ```

3.  在我的开发机器中使用该 wsdl 文件。

# c# - 使用 RenderControl 时来自 C# 的 Javascript 调用不起作用

> ID：13758605
> 
> 赞同：0
> 
> 时间：2012-12-07T07:17:57.537
> 
> 标签：c#, asp.net, asynchronous, user-controls, rendercontrol

我正在关注这篇文章。 [http://www.codeproject.com/Articles/23768/Load-and-Display-Page-Contents-Asynchronously-with](http://www.codeproject.com/Articles/23768/Load-and-Display-Page-Contents-Asynchronously-with)

我有一个带有一些 javascript 代码的用户控件。假设在 javascript 中有一个名为 alertMe(msg) 的方法。我从 c# 调用它。它不是在召唤。我正在使用 this.page.clientscript.registerscriptblock 函数。

甚至 javascript 也不会在页面中呈现。我确实通过在 chrome 浏览器中按 F12 来检查它，然后转到控制台并输入方法名称，它说未定义。

1.  当我们使用 renderControl 方法时，javascript 会不会在页面中呈现
2.  在异步加载用户控件时，从 c# 调用 javascript 方法的方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:33:30.190

您是否尝试过 ScriptManager 而不是 Page.ClientScript？我认为如果脚本未在 ScriptManager 中注册，则该脚本在部分回发期间不可用。

看起来像这样：

```
ScriptManager.RegisterStartupScript(Page, this.GetType(), "DatePickerScript" clientScript, true); 
```

# javascript - 在 ENTER Press 上的 Jquery 对话框上生成按钮单击事件？

> ID：13758607
> 
> 赞同：0
> 
> 时间：2012-12-07T07:18:00.613
> 
> 标签：javascript, html, jquery-ui, jquery-ui-dialog

我的 jsp 中有以下函数，它创建并打开对话框。此 dalog 中有文本框。我想要的是当我进入这个对话框时 CreateCustomer 按钮应该被舔

```
function createCustomerDialog(){
    $("#createCustomerDialog").dialog( {
        title :  ""Create Customer,
           buttons : {
          'CreateCustomer' : function() {

         },
          'Cancel': function() {
                $( this ).dialog( "close" );
            }
        }
      });
      $("#createCustomerDialog").dialog("open");

} 
```

我试过这个但没有工作

```
 $('.ui-dialog-buttonpane > button:last').focus(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:06:46.180

在对话框输入的 onKeyPress 事件中检查 keycode == 13（ENTER 键），当到达此代码时，只需单击您的按钮。

```
$("#yourInputId").keypress(function (e) {
    if (e.keyCode == 13)
        $("#yourButtonId").click();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:12:35.457

也许你应该在这段代码中使用 .click() 方法而不是 .focus() ：

```
 $('.ui-dialog-buttonpane > button:last').focus(); 
```

而且我认为您应该尝试 button:first 选择器，因为 CreateCustomer 按钮将首先出现。

```
$( "#dialog-confirm" ).dialog({
            resizable: false,
            height:140,
            modal: true,
            buttons: {
                "Delete all items": function() {
                    $( this ).dialog( "close" );
            alert('Delete all items clicked');
                },
                Cancel: function() {
                    $( this ).dialog( "close" );
            alert('Cancel clicked');
                }
            }
        }); 
```

在浏览器控制台中试试这个：

```
$('.ui-dialog-buttonpane button:first').click(); 
```

# php - 即使在重新加载时也保存 PHP 变量

> ID：13758610
> 
> 赞同：1
> 
> 时间：2012-12-07T07:18:05.407
> 
> 标签：php

即使重新加载页面，有人可以告诉如何获取 PHP 变量吗？我已经尝试过会话，但似乎刷新页面时该值发生了变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:29:19.633

```
<?php

session_start();

if( empty($_SESSION['test']) ) {
     $_SESSION['test'] = date( 'Y-m-d H:i:s' );
}

echo $_SESSION['test']; 
```

第一次执行此脚本时，当前日期时间将分配给测试键（并回显）。下次运行此脚本时，旧日期将被回显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:49:05.923

您可以尝试使用 ajax 进行会话。

1.  将其保存为会话变量，并在每次页面加载时通过 AJAX 检索它。
2.  将其保存为 cookie（如果您要对其进行 cookie 处理，也可以使用 javascript 方法。

任何 PHP 方法都会很笨拙，因为您必须首先通过 AJAX 将变量的值发送到 PHP 脚本，然后在重新加载后通过 AJAX 检索它。

或者您可以将其保存为页面本地存储的属性。将其保存为 cookie。并将变量附加到 URL 哈希，以便`location.hash`在浏览器重新加载后可以访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T07:27:41.003

会话是你想要的。看下面的代码：

```
<?php
// start session
session_start();

$var1 = "Hello World";
// save variable you want to have after the reload
$_SESSION["myvar"] = $var1;

// echo session value
echo $_SESSION["myvar"];
?> 
```

# ruby-on-rails - 我正在尝试建立关联的记录，但它不起作用

> ID：13758612
> 
> 赞同：0
> 
> 时间：2012-12-07T07:18:08.930
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个`Vendor`和`Product`模型。

`:vendor has_many :products`和`:product belongs_to :vendor`。外键`product`应在模型上。

我的`routes.rb`样子是这样的：

```
resources :products 
resources :vendors do
  resources :products
end 
```

我的链接标签`Vendor#Show`看起来像这样：

```
<%= link_to 'Add New Product', new_vendor_product_path(@vendor) %> 
```

我的`Product#Create`控制器如下所示：

```
 def create
    if params[:vendor_id]
        @vendor = Vendor.find(params[:vendor_id])
        @product = @vendor.products.build(params[:product])
        @vendor.save
    else
            @product = Product.new(params[:product])
    end
.
..
.
#everything else is normal from the scaffold 
```

这是我单击以下链接时日志的外观`new_vendor_product_path(@vendor)`：

```
Started GET "/vendors/4/products/new" for 127.0.0.1 at 2012-12-07 02:06:44 -0500
Processing by ProductsController#new as HTML
  Parameters: {"vendor_id"=>"4"}
  Vendor Load (0.2ms)  SELECT "vendors".* FROM "vendors" WHERE "vendors"."id" = ? LIMIT 1  [["id", "4"]]
  Rendered products/_form.html.erb (8.1ms)
  Rendered products/new.html.erb within layouts/application (8.8ms)
  Rendered layouts/_navigation.html.erb (0.5ms)
  User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
   (0.2ms)  SELECT COUNT(*) FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = 1 AND (((roles.name = 'admin') AND (roles.resource_type IS NULL) AND (roles.resource_id IS NULL)))
  Rendered layouts/_login_nav.html.erb (4.1ms)
  Rendered layouts/_header.html.erb (5.8ms)
  Rendered layouts/_messages.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 39ms (Views: 35.8ms | ActiveRecord: 0.6ms) 
```

这是`POST`我提交之后：

```
Started POST "/products" for 127.0.0.1 at 2012-12-07 02:07:09 -0500
Processing by ProductsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"hwssA+7v5O4TzqhSk=", "product"=>{"name"=>"Women's Dri-Fit", "description"=>"Dri Fit, Dri Fit what do you see.", "image"=>#<ActionDispatch::Http::Upla0 @original_filename="Nike-Dri-FIT-Tech-Womens-Running-Tights.jpg", @content_type="image/jpeg", @headers="Content-Disposition: form-data; name=\"product[image]\"; filename=\"Nike-Dri-FIT-Tech-Womens-Running-Tights.jpg\"\r\nContent-Type: image/jpeg\r\n", @tempfile=#<File:/var/fold-2056-janl07>>, "price"=>"24.99"}, "commit"=>"Create Product"}
   (0.1ms)  begin transaction
  SQL (0.7ms)  INSERT INTO "products" ("created_at", "description", "image", "name", "price", "updated_at", "vendor_id") VALUES (?, ?, ?, ?, ?, ?, ?)  [["created_at", Fri, 07 Dec 2012 07:07:10 UTC +00:00], ["description", "Dri Fit, Dri Fit what do you see."], ["image", "Nike-Dri-FIT-Tech-Womens-Running-Tights.jpg"], ["name", "Women's Dri-Fit"], ["price", 24.99], ["updated_at", Fri, 07 Dec 2012 07:07:10 UTC +00:00], ["vendor_id", nil]]
   (3.7ms)  commit transaction
Redirected to http://localhost:3000/products/14
Completed 302 Found in 9619ms (ActiveRecord: 4.4ms) 
```

注意`vendor_id => nil`.

**编辑1：**

```
<%= simple_form_for @product, :html => {:multipart => true} do |f| %>
    <%= f.error_notification %>

    <div class="form-inputs">
      <div class="span8">
          <%= f.input :name, :label => "Product Name", :wrapper_html => { :class => "span6" } %>
      </div>
      <div class="span8">
          <%= f.input :description, :as => :text, :wrapper_html => { :class => "span6" }, :input_html => { :rows => 5 } %>
      </div>
      <div class="span8">
          <%= f.input :image, :label => "Upload Image", :wrapper_html => { :class => "span6" } %>    
      </div>
      <div class="span8">
          <%= f.input :price, :wrapper_html => { :class => "span6" } %>
      </div>
      <div class="span8">
          <%= f.button :submit, :class => "btn", :wrapper_html => { :class => "span6" } %>
      </div>
    </div> <!-- /.form-inputs -->

    <!-- <div class="form-actions">

    </div> -->
  <% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:59:37.520

只需将其添加到您的表单中：

```
 <%= f.hidden_field :vendor_id %> 
```

它将使用供应商 ID 创建一个隐藏字段，因此当您提交表单时它不会为零。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T02:45:57.847

原来问题是我必须将我的`_form`部分修改为：

```
<%= simple_form_for [@vendor, @product], :html => {:multipart => true} do |f| %> 
```

而不仅仅是`@product`作为第一个参数。

完成后，我将控制器修改为：

```
if @vendor
    @product = @vendor.products.build(params[:product])
else
    @product = Product.new(params[:product])
end 
```

效果非常好！

# java - 使用 maven 的简单项目需要什么阶段？

> ID：13758613
> 
> 赞同：0
> 
> 时间：2012-12-07T07:18:27.017
> 
> 标签：java, maven

我对 maven 很陌生，我有一个依赖于其他 jar 等的 java 文件。对于那个特定的类，我有一组正在运行的测试用例。

我定义了`pom.xml`文件，一切似乎都运行良好。

但我对生命阶段的概念感到困惑。现在我只给予`compile`作为我的生命阶段。但这意味着它不会运行我的`test`案例？（请注意，我遵循 maven 的约定，就像我的文件夹结构一样）

`compile`我希望我能同时做这两个生命阶段`test`。

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:29:19.240

如果您指定这样的生命周期阶段

```
mvn test 
```

它将按顺序运行所有生命周期阶段，包括您指定的阶段。这也意味着

```
mvn compile test 
```

没有必要，因为

```
mvn test 
```

也会自动运行编译。对于所有生命周期阶段的完整有序列表，只需运行

```
mvn 
```

并查看帮助。仅供参考，默认生命周期的阶段是按顺序排列的：

验证、初始化、生成源、流程源、生成资源、流程资源、编译、流程类、生成测试源、流程测试源、生成测试资源、流程测试资源、测试编译、过程测试类、测试、准备包、包、集成前测试、集成测试、集成后测试、验证、安装、部署

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T07:28:56.190

您应该阅读以下文档：[Maven 生命周期](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)

无论如何，如果您阅读了该内容，您将了解到这`test`也将是`compile`您的项目。

# vbscript - Vbscript - 编辑 AD 用户时拒绝访问

> ID：13758618
> 
> 赞同：0
> 
> 时间：2012-12-07T07:18:45.550
> 
> 标签：vbscript, active-directory

我正在尝试编写一个使用管理员凭据连接到 Active Directory 的脚本。然后在整个域中搜索特定用户名，然后更新该用户的属性。我编写了一个我认为应该可以工作的脚本，但是我收到了“拒绝访问”错误，这很奇怪。

这是脚本，我已将其分成几个部分。因为它应该通过SuperOffice运行，它有自己独特的环境。

```
Dim strUser, rootDSE, adoConnection, ldapStr, adoRecord, objUser

updateUser()

Public Sub updateUser()
    ADUsername = "john.doe"

    createADConnection()

    If userExistsInAD(ADUsername) = False Then
        Exit Sub
    End if

    objUser.Put "description", "testing"
    objUser.SetInfo
End Sub

Public Sub createADConnection()
    Set rootDSE = GetObject("LDAP://RootDSE")
    Set adoConnection = CreateObject("ADODB.Connection")
    adoConnection.Provider = "ADSDSOObject"
    adoConnection.Properties("User ID") = "mydomain\administrator"
    adoConnection.Properties("Password") = "8g773ggj024g"
    adoConnection.Properties("Encrypt Password") = True
    adoConnection.Properties("ADSI Flag") = ADS_SERVER_BIND Or ADS_SECURE_AUTHENTICATION
    adoConnection.Open "Active Directory Provider"
End Sub

Public Function userExistsInAD(ByVal strUser)
    ldapStr = "<LDAP://" & rootDSE.Get("defaultNamingContext") & ">;(&(objectCategory=Person)(objectClass=User)(samAccountName=" & strUser & "));adspath;subtree"
    Set adoRecord = adoConnection.Execute(ldapStr)
        If Not adoRecord.EOF Then
        userExistsInAD = True
        Exit Function
    End if

    userExistsInAD = False
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:25:47.137

在我看来，您运行 SuperOffice 的帐户没有域管理员凭据。您是否尝试过直接使用您的帐户运行它？

# objective-c - 如何知道 NSTableView 是否在编辑中？

> ID：13758620
> 
> 赞同：0
> 
> 时间：2012-12-07T07:19:04.290
> 
> 标签：objective-c, macos, nstableview, editing

我想检查我的 NSTableView 是否正在编辑。

我尝试使用**tableView: shouldEditTableColumn: row:**和**tableView: setObjectValue: forTableColumn: row:**函数。例如：

```
- (BOOL)tableView:(NSTableView *)tableView shouldEditTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {
     isRenaming = YES;
     return YES;
}

- (void)tableView:(NSTableView *)tableView setObjectValue:(id)object forTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row {
     isRenaming = NO;

     ...

} 
```

但是，即使我没有尝试编辑 tableview，也会调用**tableView: shouldEditTableColumn: row:函数。**

因此，有时，isRenaming 保持为 YES。

如何知道 NSTableView 是否在编辑中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T14:12:33.560

将您的视图控制器设置为表格视图单元格中文本视图的委托。

然后可以设置“`isRenaming = YES`用户触发时[`[control: textShouldBeginEditing:]`协议方法](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSControlTextEditingDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSControlTextEditingDelegate/control%3atextShouldBeginEditing%3a)” 。您还可以`isRenaming = NO`在用户完成编辑时设置“”（或者当他们单击 UI 中的“完成”或“保存更改”按钮时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T04:22:28.427

最后，我找到了丢失的案例。

" **tableView: shouldEditTableColumn: row:** " 函数在 NSTableView 发生双击事件时被调用。

所以，

```
- (void)tableViewDoubleClicked:(id)sender {
       isRenamed = NO;
       ...
} 
```

它解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-22T02:12:37.483

为什么不只是检查`edited​Row`？

```
let isBeingEdited = yourTable.edited​Row != -1 
```

> 此属性不适用于基于视图的表视图。在基于视图的表格视图中，视图负责它们自己的编辑行为。对于其他表，该值反映正在编辑的行的索引，如果没有正在进行的编辑会话，则为 –1。

# jquery - jQuery 航点 - 我可以在同一页面上使用两次航点吗？（似乎其他航点集会触发其他航点）

> ID：13758621
> 
> 赞同：0
> 
> 时间：2012-12-07T07:19:13.673
> 
> 标签：jquery, html, jquery-waypoints

我不确定我是否做错了什么，但我有很多部分，其中一些带有子部分。

```
 <section id="section-one" class="section-top"></section>
  <section id="section-two" class="section-top"></section>
  <section id="section-three" class="section-top">
    <article id="sub-section-one" class="section-sub"></article>
    <article id="sub-section-two" class="section-sub"></article>
    <article id="sub-section-three" class="section-sub"></article>
    <article id="sub-section-four" class="section-sub"></article>
  </section> 
```

所以我设置了两个航点调用来执行不同的任务`section-top`。`section-sub`

```
$(document).ready(function(){
  $('.section-top').waypoint(function(e,d){
    // Do something
  });

  $('.section-sub').waypoint(function(e,d){
    // Do something else
  });
}); 
```

但是，当我滚动浏览`section-sub`航点时，它仍然会触发`section-top`，更糟糕的是，它似乎是`section-top`用自己的航点触发的，所以没有办法告诉它不要对`section-sub`触发器采取行动。

如果您查看[这个 jsbin](http://jsbin.com/ubeyih/2/)，您可以看到`trigger-count`在第一组航点中调用了 ，但是当滚动通过子组航点时它会不断上升。

这是它应该如何运作，我做错了什么吗？（我不应该注册两次航点吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:05:29.280

好的。在 jQuery waypoints 创建者的帮助下，Caleb 提到发生这种情况的原因是由于自定义事件的 jQuery 冒泡。

解决方案是进行`e.stopPropagation()`第二个航路点初始化。

[Github 问题 114](https://github.com/imakewebthings/jquery-waypoints/issues/114)

# c# - 避免使用数组c#的大小

> ID：13758625
> 
> 赞同：-2
> 
> 时间：2012-12-07T07:19:22.190
> 
> 标签：c#

我想将上面的数组转换为列表，以避免声明数组中元素的数量但无法实现它，因为很明显，如果我尝试在列表上做同样的事情，我会得到一个索引超出范围异常..整天都在努力。我在此处粘贴了我遇到问题的逻辑部分。对基类中的函数进行递归调用（这对于回答这个问题并不重要，只是说清楚）。请帮帮我。

```
 int[] arr = new int[100];        
    Dictionary<int, List<int>> dict = new Dictionary<int, List<int>>();        

    public override int function(int length, out List<int> cuts)
    {
        cuts = new List<int>();
        if (length < 0)
            return 0;

        if (arr[length] == 0 )
        {
            arr[length] = base.Function(length, out cuts);
            dict.Add(arr[length], cuts);                                
        }
        cuts = dict[arr[length]];
        return arr[length];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:24:02.607

***您无法创建没有大小的数组。你需要为此使用一个列表。***

如果您没有使用 Array 的特定原因，最好使用[List](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)：

```
List<int> arr = new List<int>(); 
```

最后，您还可以将其转换为 Array：

```
int[] s = arr.ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:38:27.580

`length`如果“动态增长”列表的（应该`index`）小于索引（在您的情况下为“长度”），只需扩展列表。

```
List<int> arr = new List<int>();        
Dictionary<int, List<int>> dict = new Dictionary<int, List<int>>();        

public override int function(int length, out List<int> cuts)
{
    cuts = new List<int>();
    if (length < 0)
        return 0;

    if (arr.Count <= length)
    {
        arr.AddRange(new int[(length + 1) - arr.Count])
    }

    if (arr[length] == 0 )
    {
        arr.Insert(length,base.Function(length, out cuts));
        dict.Add(arr[length], cuts);                                
    }
    cuts = dict[arr[length]];
    return arr[length];
} 
```

# iphone - 使用 NSDateFormatter 将字符串转换为 NSDate 以 1 年的差异返回

> ID：13758629
> 
> 赞同：1
> 
> 时间：2012-12-07T07:19:35.077
> 
> 标签：iphone, objective-c, ios, nsdate, nsdateformatter

我有一个UTC格式的字符串日期：

> “2012-11-20T05:23:02.34”

现在我想要 UTC NSDate 对象……我实现了这个功能。

```
+ (NSDate *)utcDateFromString:(NSString *)string withFormat:(NSString *)format {
    NSDateFormatter *inputFormatter = [[NSDateFormatter alloc] init];
    inputFormatter.timeZone =[NSTimeZone timeZoneWithAbbreviation:@"UTC"];
    [inputFormatter setDateFormat:format];
    NSDate *date = [inputFormatter dateFromString:string];
    [inputFormatter release];
    return date;
} 
```

并这样称呼它......

```
NSDate* submittedDate =[NSDate utcDateFromString:submittedDateString withFormat:@"YYYY-MM-dd'T'HH:mm:ss.SS"]; 
```

但这会返回 NSDate 描述为 this..

> 2011-11-20 05:23:02 +0000

现在，如果您注意到日期相差一年……谁能解释为什么会发生这种情况……？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T07:46:03.540

在 dateformmater 中，使用`yyyy`而不是`YYYY`

它应该是

```
NSDate* submittedDate =[NSDate utcDateFromString:submittedDateString withFormat:@"yyyy-MM-dd'T'HH:mm:ss.SS"]; 
```

这将解决问题。

在以下链接中，搜索 YYYY。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html)

> 它使用 yyyy 来指定年份组件。一个常见的错误是使用 YYYY。yyyy 指定日历年，而 YYYY 指定年份（“一年中的一周”），用于 ISO 年-周日历。在大多数情况下，yyyy 和 YYYY 产生相同的数字，但它们可能不同。通常，您应该使用日历年。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T07:28:26.963

试试下面这个方法。。

```
-(NSDate *)getUTCFormateDate:(NSString *)localDate withFormat:(NSString *)format 
{
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:format];
    NSTimeZone *timeZone = [NSTimeZone timeZoneWithName:@"UTC"];
    [dateFormatter setTimeZone:timeZone];
    NSDate *date = [dateFormatter dateFromString:localDate];
    return date;        
} 
```

并像下面这样使用..

```
 NSDate *dateHere = [[NSDate alloc]init];
    dateHere = [self getUTCFormateDate:@"2012-11-20T05:23:02.34" withFormat:@"yyyy-MM-dd'T'HH:mm:ss.SS"];
    NSLog(@"Date here %@",dateHere); 
```

我得到的输出是**这里的日期 2012-11-20 05:23:02 +0000**

请参阅我的另一个答案，它以 UTF 格式返回字符串日期。

[将 NSstring 日期转换为 UTC 日期](https://stackoverflow.com/questions/13583253/convert-nsstring-date-to-utc-date/13583368#13583368)[在此处输入链接描述](https://stackoverflow.com/questions/13583253/convert-nsstring-date-to-utc-date/13583368#13583368)

# automated-tests - 如何在testcomplete中同时访问两个相同的应用程序？

> ID：13758630
> 
> 赞同：0
> 
> 时间：2012-12-07T07:19:38.730
> 
> 标签：automated-tests, testcomplete

我需要同时访问两个 Visual Studio 2010 应用程序。例如，第一个 VS 操作是打开一个创建的项目并运行该项目。我为这个 VS 创建了命名映射路径并完成了这个动作。需要在第二个 VS 中执行相同的操作，但问题是，创建的 NM 路径是在第一个 Visual Studio 窗口中识别的。请找到此问题的附件图片。谁能帮忙，如何同时访问两个 VS 应用程序？

![第二个 VS 窗口映射名称的图像也显示为第一个 VS 映射名称](../Images/a313ed590adb97f8f89a13db6ff518a8.png)

![第一个 VS 窗口映射名称的图像](../Images/5b9715371863b6e3b90f238cd0761745.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T11:12:11.937

您可以通过两个属性映射**devenv进程：** **ProcessName**和**Index**。对于 Index 属性，使用项目变量作为值。在测试期间，将此项目变量的值设置为 1 或 2，具体取决于您要使用哪个 Visual Studio 实例，并为 VS 进程对象的映射名称调用 RefreshMappingInfo 方法（图像上的**VisualStudio**）。因此，使用这种方法，您可以将映射树应用到您现在想要工作的流程实例。

# sql - 在 sql 中使用 datepart() 得到一个两位数怎么办？

> ID：13758631
> 
> 赞同：8
> 
> 时间：2012-12-07T07:19:47.220
> 
> 标签：sql, sql-server

我正在尝试使用`DatePart`返回两位数小时。我想看看`01, 02, 03, ...10, 11, 12`几个小时。我怎样才能做到这一点？

如果我输入查询，

```
select DATEPART(hour,'1900-01-01 07:45:00.010') 
```

然后我得到答案`7`。我需要得到答案`07`。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-07T07:24:33.333

为 MySql 或[SQL Server 2012](https://msdn.microsoft.com/en-us/library/hh213505.aspx)试试这个-

```
select FORMAT(DATEPART(hour,'1900-01-01 07:45:00.010'),'00') 
```

对于 2012 年之前的 SQL Server -

```
select right('0' + DATEPART(hour,'1900-01-01 07:45:00.010'),2) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-07-09T23:16:55.243

我无法将上述* 解决方案用于 SQL Server 2008。

对我有用的是：

```
select right('0' + convert(varchar,DATEPART(hour,'1900-01-01 07:45:00.010')),2) 
```

返回

```
07 
```

*以上所有 SQL Server 解决方案都为我返回“7”，而不是“07”。相反，我使用了`convert(varchar...`将“0”+“07”作为字符串到字符串的连接，而不是字符串到数字的连接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-07T07:49:07.887

尝试[FORMAT](http://msdn.microsoft.com/en-us/library/hh213505.aspx)函数（在 Sql Server 2012 中支持） -

```
DECLARE @d DATETIME = '1900-01-01 07:45:00.010';
SELECT FORMAT(@d, 'hh' )
>07 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T07:25:26.340

在 MySQL 中，

```
SELECT LPAD(thing_to_pad, 2, '0') 
```

在 MS SQL 中（我认为 - 我不使用它）：

```
SELECT RIGHT('0' + thing_to_pad, 2) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-09T06:37:34.557

在 MS SQL 中

```
select right('0' + DATEPART(hour,'1900-01-01 07:45:00.010'),2) 
```

这是作品

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-23T08:53:38.607

你可以对 mssql 这样做；

```
 RIGHT('0' + RTRIM(DATEPART(dd, date)), 2) 
```

# wordpress - $_GET['m'] 在永久链接设置为 postname 的存档页面上没有结果

> ID：13758636
> 
> 赞同：0
> 
> 时间：2012-12-07T07:20:05.760
> 
> 标签：wordpress

我正在扩展存档功能以获取我的**自定义表格内容**。为此，我需要检索帖子的月份和年份。

使用默认的永久链接设置，我可以使用 $_GET['m'] 来获取它，但是当我将永久链接设置更改为 postname 时，它​​没有给出任何结果。

那么我现在怎样才能得到它呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:29:02.273

我不确定这是否是正确的方法，但我是这样工作的：

```
 $curr_query = substr($_SERVER['REQUEST_URI'], -8, 7);
    $curr_date = explode('/', $curr_query);
    $year = $curr_date[0];
    $month = $curr_date[1]; 
```

然后将月份和年份传递给我的函数并显示结果。

# java - 我应该如何正确地迭代优先级队列？

> ID：13758640
> 
> 赞同：9
> 
> 时间：2012-12-07T07:20:26.390
> 
> 标签：java, foreach, iterator, queue, priority-queue

我有一个涉及迭代优先级队列的 java 分配。队列由带有字符串和 int 的对象组成，我需要有一种方法来检查单独对象的字符串与队列中的所有对象。

最好的方法是迭代器对象吗？这似乎太乱了。我可以出队和入队，但这似乎效率低下。也许是一个 foreach 循环？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T07:29:32.303

是的，如果您需要检查集合中的每一个元素，一个`iterator`or`for each`可能是最好的。

```
Iterator<E> iter = myPriorityQueue.iterator();
while (iter.hasNext()) {
    current = iter.next();
    // do something with current
} 
```

或者

```
for (Element e : myQueue) {
        // do something with e
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-01T18:44:27.277

一个小细节：如果您的队列有可能在循环期间被修改，那么两者`iterator`都会`for each`导致`ConcurrentModificationException`; 如果在处理过程中队列有可能被修改，您可以使用`poll()`：

```
 Resource resource;
    while ((resource = resourceQueue.poll()) != null) {
        this.processIncludes(resourceQueue, resource);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T08:05:51.440

如果您不关心排序（在这种情况下 - 为什么要处理`PriorityQueue`？），请使用 Iterator。如果您想按优先级进行迭代，请参阅[Javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html)的建议：

> 如果您需要有序遍历，请考虑使用 Arrays.sort(pq.toArray())。

# iphone - 在 animationDidStop 中，动画的地址与我添加到图层的动画地址不同？

> ID：13758646
> 
> 赞同：0
> 
> 时间：2012-12-07T07:20:53.490
> 
> 标签：iphone, ios

像这样的代码：我在我的视图控制器中存储了 3 个动画，但是当 - (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag 被调用时，我发现动画的地址与它们中的任何一个都不相同，为什么？

```
- (void) redoAni
{
    circleHalfCaloryMask.alpha = 1;
    circleHalfTimeMask.alpha = 1;
    circleHalfStopWatchMask.alpha = 1;

    //[circleHalfCalory removeFromSuperview];
    //circleHalfCalory.alpha = 0;
    [circleHalfCaloryMask.layer addAnimation:rotate3 forKey:@"rotate3"];
    [circleHalfStopWatchMask.layer addAnimation:rotate2 forKey:@"rotate2"];
    [circleHalfTimeMask.layer addAnimation:rotate1 forKey:@"rotate1"];
}

    - (void)animationDidStop:(CAAnimation *)anim finished:(BOOL)flag
    {
        if (anim == rotate1)
        {
            circleHalfTimeMask.alpha = 0;
        }
        else if (anim == rotate2)
        {
            circleHalfStopWatchMask.alpha = 0;
        }
        else if (anim == rotate3)
        {
            circleHalfCaloryMask.alpha = 0;
        }
        else
        {
        }
    } 
```

在 gdb 中：

```
rotate1 CABasicAnimation *  0x07297280
rotate2 CABasicAnimation *  0x072899a0
rotate3 CABasicAnimation *  0x07297d40
anim    CABasicAnimation *  0x07285010 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:00:41.733

文档说：

> *   (void)addAnimation:(CAAnimation *)anim forKey:(NSString *)key
> 
> 动画
> 
> 要添加到渲染树的动画。请注意，对象是由渲染树复制的，而不是引用的。对对象的任何后续修改都不会传播到渲染树中。

# linux - 系统启动后应用程序在 Linux 中以随机间隔自动启动

> ID：13758649
> 
> 赞同：1
> 
> 时间：2012-12-07T07:21:05.463
> 
> 标签：linux, sleep, startup, autostart

阅读“睡眠”手册和谷歌搜索没有提供任何有用的信息。

我想在 Ubuntu 启动后运行 Pidgin，但过了一段时间。例如，登录通过，间隔 1 到 5 分钟后 Pidgin 启动。正如“睡眠”手册所说，有一种方法可以只指定小时数、分钟数和秒数。

有什么方法/其他 linux 命令可以解决我的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:38:52.603

看起来你可以使用 linux`at`命令。创建一个包含类似内容的 bash 脚本，替换`/path/to/pidgin`为您的实际路径（您可以运行`$ whereis pidgin`以找出位置）：

```
at now + 5 min <<_EOF_
DISPLAY=:0.0 /path/to/pidgin
_EOF_ 
```

查看[启动时执行的文件和脚本](https://stackoverflow.com/questions/3036/files-and-scripts-that-execute-on-boot)以查看可以放置该文件的位置。

`cron`将是另一种选择

# ldap - 嵌套组 LDAP 搜索过滤器

> ID：13758650
> 
> 赞同：2
> 
> 时间：2012-12-07T07:21:09.013
> 
> 标签：ldap, openldap, ldap-query, nested-groups

我需要有关 LDAP 搜索过滤器的信息来提取嵌套组成员身份。基本上，我的想法是，例如，一个用户属于 5 个组 [A、B、C、D、E] 我可以编写一个 LDAP 搜索查询来获取成员组到哪个组 [A、B、C、 D、E]可能是一部分？我可以递归地使用这个 logc 来检索所有组信息，直到 AD 的完整根目录？

而且我需要此解决方案用于通用 AD，因此我不能使用仅适用于 MS AD 的 LDAP_RULE_IN_CHAIN 过滤器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-22T16:15:14.463

组不是 LDAP 标准中定义的东西。就 LDAP 而言，组条目只是 LDAP 条目——仅此而已。组支持的实现，包括如何处理、查询、验证数据结构（如嵌套和动态组）等，完全取决于目录软件供应商。例如，IBM 的 Security Directory Server (SDS) 软件通过自己专有的对象类和属性支持嵌套和动态组，这些对象类和属性是软件专门识别的，并通过遍历（对于嵌套组）和扩展（对于动态组）来验证成员资格或为 LDAP 客户端自动获取组结构。例如，SDS 提供了操作属性，例如`ibm-allgroups`和`ibm-allmembers`帮助 LDAP 客户端在单个搜索中提取嵌套和动态组中的组和成员信息。其他目录供应商以不同的方式解决相同的问题。因此，您的解决方案将根据您使用的 LDAP 软件而有所不同。您可以设计您的应用程序以支持多个目录服务器软件，但这取决于您希望在应用程序中获得多复杂的组支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T10:45:26.850

用户所属的所有组，包括嵌套组

例如，要查找 "CN=John Smith,DC=MyDomain,DC=NET" 所属的所有组，请将 base 设置为组容器 DN；例如 (OU=groupsOU,DC=MyDomain,DC=NET) 和子树的范围，并使用以下过滤器。

(成员:1.2.840.113556.1.4.1941:=(CN=John Smith,DC=MyDomain,DC=NET))

其中 CN=John Smith,DC=MyDomain,DC=NET 是用户的 FDN 和可扩展匹配规则 1.2.840.113556.1.4.1941。

-吉姆

# android - 使用分层方法进行刮刮卡游戏

> ID：13758653
> 
> 赞同：3
> 
> 时间：2012-12-07T07:21:26.147
> 
> 标签：android, android-canvas, android-custom-view

我正在 Android 上做一个小型刮刮卡游戏。我在屏幕中央放置了一个 ImageView，并在其顶部放置了一个自定义视图。我用特定颜色填充自定义视图（比如绿色，因此不显示 ImageView），然后当用户在屏幕上移动手指时，我想从自定义视图中清除颜色，以便从下方显示 ImageView。我看到了这个帖子：[两层，但无法在 android 中显示底层](https://stackoverflow.com/questions/10974682/two-layers-but-cant-show-the-bottom-layer-in-android)，但坚持他如何创建可擦除位图，该位图的绘画和路径的绘画。这是我的 xml 布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:src="@drawable/img_background"
        android:contentDescription="@string/app_name"/>
    <com.example.scratchcard.TouchEventView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
    />
</RelativeLayout> 
```

这是我现在用于 TouchEventView 的代码：

```
public class TouchEventView extends View {
    private Paint paint = new Paint();
    private Path path = new Path();

    public TouchEventView(Context context, AttributeSet attrs) {
        super(context, attrs);

        paint.setColor(Color.TRANSPARENT);
        paint.setAntiAlias(true);
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeJoin(Paint.Join.ROUND);
        paint.setStrokeCap(Paint.Cap.ROUND);
        paint.setStrokeWidth(10f);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        canvas.drawColor(Color.GREEN);
        canvas.drawPath(path, paint);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float eventX = event.getX();
        float eventY = event.getY();

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            path.moveTo(eventX, eventY);
            return true;
        case MotionEvent.ACTION_MOVE:
            path.lineTo(eventX, eventY);
            break;
        case MotionEvent.ACTION_UP:
            // nothing to do 
                break;
        default:
            return false;
        }

        // Schedules a repaint.
        invalidate();
        return true;
    }
} 
```

我希望 TouchEventView 的像素在手指移动的地方变得透明，但这不会发生。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T19:40:26.973

我遇到了这个有 2 层的项目，当你刮擦顶层时，底层就会显露出来。创作者还提供免费许可证！

[https://github.com/winsontan520/Android-WScratchView](https://github.com/winsontan520/Android-WScratchView)

# android - 我怎样才能在android中获得我的视图的中心x，y？

> ID：13758654
> 
> 赞同：39
> 
> 时间：2012-12-07T07:21:36.143
> 
> 标签：android, android-imageview

我在我的框架布局上附加了一个图像视图。在这里，我想获取我的 imageview 中心坐标。我将使用相同的坐标在下一个布局中设置我的 imageview。请建议我如何获取图像视图的中心坐标。

提前致谢

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-12-07T07:42:37.940

imageView 的中心将是

```
 centreX=imageView.getX() + imageView.getWidth()  / 2;
 centreY=imageView.getY() + imageView.getHeight() / 2; 
```

但请确保在创建 imageView 后调用它

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-06-20T06:19:21.657

您可以使用`getPivotX()`and `getPivotY()`，它始终保持在视图中心，甚至旋转视图。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-07T07:56:30.093

尝试这个 ：

```
ImageView my_image = (ImageView) findViewById(R.id.my_imageView);  

Rect rectf = new Rect();
my_image.getLocalVisibleRect(rectf);

Log.d("WIDTH        :",String.valueOf(rectf.width()));
Log.d("HEIGHT       :",String.valueOf(rectf.height()));
Log.d("left         :",String.valueOf(rectf.left));
Log.d("right        :",String.valueOf(rectf.right));
Log.d("top          :",String.valueOf(rectf.top));
Log.d("bottom       :",String.valueOf(rectf.bottom)); 
```

希望这对您有所帮助。

谢谢。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-06-26T13:08:29.133

正如@aiueoH 提到的，您可以使用`getPivotX() and getPivotY()`.

尝试使用它来查找中心坐标：

```
int centreX = view.getPivotX()/2;
int centreY = view.getPivotY()/2; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-08T18:12:33.467

如果您希望在其他视图的中心对齐视图，那么您可以使用它 -

```
float center_x = parent_view.getX() + parent_view.getWidth()/2 - child_view.getWidth()/2; 
```

然后显然使用 -

```
child_view.setX(center_x); 
```

# html - Css 选择器：如何引用 div 中的属性

> ID：13758663
> 
> 赞同：-1
> 
> 时间：2012-12-07T07:22:24.710
> 
> 标签：html, css

```
<div id ="group">
    <img src= ' ' id = '1'>
    <img src= ' ' id = '2'>
    .......
</div> 
```

我想引用 div id 'group' 中的所有 img ，如何在 css 中标记它？另外，哪个更好？将所有分配给 img / 创建一个类，例如。#img.groupItem 并每次都引用它？谢谢

源代码：

```
<div id="book">
    <img alt="flip book" src="demo/medium/Web081112_P001_medium.jpg">
    <img alt="flip book" src="demo/medium/Web081112_P002_medium.jpg">
    <img alt="flip book" src="demo/medium/Web081112_P003_medium.jpg">
</div> 
```

运行javascript后：

```
<div id="page" style="display: block; width: 1180px; height: 767px; left: 50%; top: 50%; margin: -413.5px auto 0px -590px; cursor: default;">
    <div id="book" style="position: relative; width: 1180px; height: 767px; transform: translate3d(0px, 0px, 0px);">
        <div class="turn-page-wrapper" page="1" style="position: absolute; overflow: hidden; width: 590px; height: 767px; top: 0px; right: 0px; left: auto; bottom: auto; z-index: 0; display: none;">
            <div id="cover" class="turn-page p1" style="width: 590px; height: 767px;">
            </div>
        </div>
        <div class="turn-page-wrapper" page="2" style="position: absolute; overflow: hidden; width: 590px; height: 767px; top: 0px; left: 0px; right: auto; bottom: auto; z-index: 7;">
            <div style="position: absolute; top: 0px; left: 0px; overflow: hidden; z-index: auto; width: 968px; height: 968px;">
                <div class="turn-page p2" style="width: 590px; height: 767px; position: absolute; top: 0px; left: 0px; bottom: auto; right: auto;">
                    <img alt="flip book" src="demo/medium/Web081112_P001_medium.jpg">
                </div>
            </div>
        </div>
    </div>
</div> 
```

html 代码就像单个 img 一样，我使用了此处提供的答案，但仍然无法正常工作。我相信这是由生成html代码引起的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:24:00.317

CSS 旨在借助[选择器](http://www.w3schools.com/cssref/css_selectors.asp)应用全局样式。

后代选择器是您正在寻找的：

```
#group img {
    // code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T07:28:57.890

您可以创建一个选择器来引用这些，是的：

```
#group img { width: 32px; height: 32px } 
```

但是，如果可能的话，最好为您想要做的事情创建一个类：

```
.icon { width: 32px; height: 32px } 
```

基本上，您想确定这是否真的是您只想在该位置应用的东西。那个 HTML 结构会一直如此吗？换身份证怎么办？如果您使用带有背景图像而不是`img`标签的 div 怎么办？这些都是你想问自己的问题。

# android - android 3.1及以上版本启动完成后如何启动应用程序？

> ID：13758665
> 
> 赞同：3
> 
> 时间：2012-12-07T07:22:29.093
> 
> 标签：android, application-restart, bootcompleted

我[从这里](http://www.vogella.com/blog/2011/12/11/automatically-starting-services-in-android-after-booting/)知道 android 3.1 及更高版本不支持启动完整意图。但在我的应用程序中。我想在设备重新启动后在我的应用程序中自动启动服务。我不希望用户手动启动我的应用程序。我该怎么做 ？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:27:48.993

是什么让您认为不再发送 ACTION_BOOT_COMPLETED 广播？我经常使用它，其他人也是如此。只要确保您的清单中有 RECEIVE_BOOT_COMPLETED 权限即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:29:55.283

尝试以下步骤在启动后启动应用程序：

创建一个扩展广播接收器的类：

```
 public class AutostartService extends BroadcastReceiver {  

      @Override  
      public void onReceive(Context context, Intent intent) {
      System.out.println("in broad....");

       if ((intent.getAction() != null) && (intent.getAction().equals("android.intent.action.BOOT_COMPLETED")))
    {
        System.out.println("in broadcast receiver.....");
        Intent i = new Intent(context, Splash.class);  
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
        context.startActivity(i);  
         }
        }

     } 
```

并将其添加到android清单文件中：

`<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>`

```
 <receiver android:name=".AutostartService"   android:enabled="true" 
        android:exported="true">

    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>

        </receiver> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-15T19:01:30.330

好吧，这已经很老了，可能大多数人都学会了它，但仍然可能有用。

从 3.1+ 开始，为了接收`BOOT_COMPLETED`，您的应用程序必须由用户至少启动一次。

注意：此规则不适用于`/system`应用

# c - 在 C 命令行中传递多个参数

> ID：13758671
> 
> 赞同：0
> 
> 时间：2012-12-07T07:23:19.033
> 
> 标签：c, arguments, getopt

我如何能够在这样的 C 程序中使用不同的开关传递多个参数

```
program -d <argument1> -p <argument2> 
```

我`getopt`用来让我传递参数。

```
int main(int argc, char **argv)
{
         while(1) 
            {
            unsigned int c = getopt(argc, argv, "-dD:hHgGp:");
            if( c == -1 ) break;

            switch( c ) 
            {
                    case 'D':
                    case 'd':
                    printf("\nd=");
                    strcpy(D,optarg);
                    printf(D);
                    break;

                    case 'g':
                    case 'G':
                    printf("g");
                    break;

                    case 'p':
                    printf("\nPath=");
                    strcpy(pathFile,optarg);
                    printf(pathFile);
                    break;

                    case 'H':
                    case 'h':
                    usage(); //For help
                    return 0;

                    default:
                    return 0;
            }
    }

} 
```

编辑：这里的代码是我用于测试的虚拟代码。它返回作为字符串传递的参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T07:37:04.143

仅仅是因为您在参数中忘记了“d”之后的“:”`getopt`吗？

```
unsigned int c = getopt(argc, argv, "-d:D:hHgGp:"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T07:40:46.883

写这个似乎很奇怪：

```
while (1) 
{
    unsigned int c = getopt(argc, argv, "-dD:hHgGp:");
    if( c == -1 ) break; 
```

`getopt()`的返回值为`int`; 你为什么要把它保存在一个`unsigned int`？

```
int opt;

while ((opt = getopt(argc, argv, "-dD:hHgGp:")) != -1)
{
    switch (opt)
    {
    case ...
    }
} 
```

如果您要使选项不区分大小写（IMO 不是一个好主意），那么请保持一致并处理`P:`。此外，正如[kmkaplan](https://stackoverflow.com/users/50902/kmkaplan)的[回答](https://stackoverflow.com/a/13758853/15168)首先指出的那样，您拥有`D:`并被`d`同一个开关处理；为了理智起见，它们都应该跟一个冒号：`"-d:D:hHgGp:P:"`至少是自洽的。

此外，在大多数情况下，您不需要将参数字符串 ( `optarg`) 复制到任何地方；您只需将指向其当前值的指针保存在一个方便的变量中。如果您确实复制了参数字符串，则*必须*检查参数的长度以确保您没有溢出缓冲区。

选项字符串的第一个字符通常不是破折号；这不是标准行为。Mac OS X 文档`getopt()`确实指出它是一个 GNU 扩展，并建议不要使用破折号开始选项字符串（并且选项字符串应该只包含一个破折号以实现向后兼容性，而不是在新代码中 - 同样，在 Mac OS X 上或 BSD）。在 GNU 下`getopt()`，前导破折号表示非选项参数被报告为选项。只要您知道您正在使用 GNU`getopt()`扩展，这样做就没有坏处。

# java - Java多线程和迭代器，应该很简单，初学者

> ID：13758673
> 
> 赞同：1
> 
> 时间：2012-12-07T07:23:29.217
> 
> 标签：java, multithreading, iterator

首先，我想说的是，我正在从 python 升级到更复杂的代码。我现在正在使用 Java，而且我非常陌生。我知道 Java 非常擅长多线程，这很好，因为我正在使用它来处理 TB 级的数据。

数据输入只是输入到迭代器中，我有一个类，它封装了一个运行函数，该函数从迭代器中获取一行，进行一些分析，然后将分析写入文件。线程必须相互共享的唯一信息是它们正在写入的对象的名称。简单吧？我只希望每个线程同时执行 run 函数，这样我们就可以快速遍历输入数据。在python中这很简单。

```
from multiprocessing import Pool
f = open('someoutput.csv','w');
def run(x):
f.write(analyze(x))

p = Pool(8);
p.map(run,iterator_of_input_data); 
```

因此，在 Java 中，我有 10K 行分析代码，并且可以非常轻松地遍历我的输入，将它传递给我的 run 函数，该函数反过来调用我的所有分析代码，将其发送到输出对象。

```
public class cool {
    ...
    public static void run(Input input,output) {
        Analysis an = new Analysis(input,output);    
    }
    public static void main(String args[]) throws Exception {
        Iterator iterator = new Parser(File(input_file)).iterator();
        File output = File(output_object);
        while(iterator.hasNext(){
            cool.run(iterator.next(),output);
        }
    }
} 
```

我要做的就是让多个线程获取迭代器对象并执行 run 语句。一切都是独立的。我一直在研究 java 多线程的东西，但它用于通过网络交谈、共享数据等。这是否像我想的那样简单？如果有人能指出我正确的方向，我会很乐意做腿部工作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:07:28.957

ExecutorService (ThreadPoolExecutor) 将是 Java 等价物。

```
ExecutorService executorService =
    new ThreadPoolExecutor(
        maxThreads, // core thread pool size
        maxThreads, // maximum thread pool size
        1, // time to wait before resizing pool
        TimeUnit.MINUTES, 
        new ArrayBlockingQueue<Runnable>(maxThreads, true),
        new ThreadPoolExecutor.CallerRunsPolicy());

ConcurrentLinkedQueue<ResultObject> resultQueue;

while (iterator.hasNext()) {
    executorService.execute(new MyJob(iterator.next(), resultQueue))
} 
```

将您的工作实现为 Runnable。

```
class MyJob implements Runnable {
    /* collect useful parameters in the constructor */
    public MyJob(...) {
        /* omitted */
    }

    public void run() {
        /* job here, submit result to resultQueue */
    }
} 
```

resultQueue*用于*收集作业的结果。

有关详细信息，请参阅[java api 文档](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)。

# mysql - mysql的复杂选择查询将两列与where子句结合起来

> ID：13758675
> 
> 赞同：3
> 
> 时间：2012-12-07T07:23:42.823
> 
> 标签：mysql, select, join

我有两张桌子

**表 1：FACULTY_DETAILS**

**fac_det_id** (pk)........ **fname** ......**可用性**

.....1....................... xxx.................完整的时间

.....2........................时间

.....3....................... zzz........工作日

.....4........................ aaa........兼职

**表 2：教师**

**Faculty_id** (pk)........ **course_id** ........ **fac_det_id** (fk)

.....1................................1................ .........2

.....2................................2................ .........3

.....3................................3................ .........1

.....4................................4................ .........3

.....5................................3................ .........4

当我提供课程 ID 时，我需要 fname、table1 中的可用性和表 2 中的 Faculty_id

即如果我给 course_id=3 那么我需要喜欢

**Faculty_id** .... **fname** ....**资格**

.....2................................xxx................全职

.....5.............aaa......兼职

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:30:19.557

试试这个：

```
SELECT f.faculty_id, fd.fname, fd.availability  qualification 
FROM FACULTY f 
INNER JOIN FACULTY_DETAILS fd ON f.fac_det_id = fd.fac_det_id 
WHERE f.course_id = 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:31:08.947

你可以使用这个：

```
SELECT faculty_id, fname, availibility AS qualification
FROM faculty a, faculty_details b
WHERE a.fac_det_id = b.fac_det_id AND course_id = $your_course_id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T07:31:58.730

这应该工作

```
select f.faculty_id,fd.fname,fd.availability as qualification
from faculty f,faculty_details fd
inner join  faculty_details fd ON f.fac_det_id = fd.fac_det_id 
where course_id=3; 
```

# c++ - 正确使用和实现单例

> ID：13758677
> 
> 赞同：1
> 
> 时间：2012-12-07T07:23:47.740
> 
> 标签：c++, multithreading, singleton

我正在涉足编写多线程游戏结构。我下面是基本结构。EventManager、LogicManager 和 Renderer 都是线程。他们从一个通用的 Gamestate 类中读取/写入，该类将处理线程之间的所有共享资源。据我了解，Gamestate 在技术上应该是一个单例。那是对的吗？我还想知道如何将其实现为“早期初始化单例”，如下所述：[http](http://www.oodesign.com/singleton-pattern.html#early-singleton) ://www.oodesign.com/singleton-pattern.html#early-singleton，C++除外。恐怕我不太精通 C++ 静态，因此我不知道将“私有静态 Singleton 实例 = new Singleton();”放在哪里 C++ 中的行。我知道我可以通过解决方法获得相同的效果，

```
int main(){
    Gamestate gs;
    EventManager em(&gs);
    LogicManager lm(&gs);
    Renderer renderer(&gs);

    lm.start();
    renderer.start();
    em.eventLoop();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:42:47.257

如果你绝对需要一个全局的游戏状态对象，那就让它成为全局的。将其声明为全局（智能）指针，在开头手动初始化，最后手动`main`销毁。通过这样做你

1.  避免多线程问题
2.  完全控制你的单例初始化和销毁​​的顺序
3.  轻松注入模拟对象以进行单元测试

正如其他人指出的那样，单例被高估到成为反模式的地步。避免。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:21:31.847

正如@juanchopanza 和@Dietmar 评论的那样，游戏状态确实没有理由应该是单例。

*此外，我可以想到为什么它不*应该是一个的几个原因：

1.  单例使单元测试变得非常困难。模拟单例比模拟接口要困难得多。

2.  假设有一天你想扩展你的游戏？例如，如果有一天你想让游戏逻辑在服务器上运行并让你的玩家运行客户端（想想多人游戏）怎么办？在这种情况下，您可能希望在您的流程中拥有多个游戏状态，并且单例会不必要地限制您。

3.  如果你想对游戏状态做一些事情，比如序列化它以在机器之间发送，或者从文件中保存和加载它，让游戏状态成为单例会使它变得更加困难。使用标准的序列化框架变得很麻烦。

4.  很难将依赖项注入到单例中。如果你需要一些组件或数据来初始化你的游戏状态怎么办？在这种情况下，您将在一段时间内某个线程可能会访问游戏状态实例，即使它处于不一致状态。

我可能会想到更多的原因。无论如何，我的建议是为所有组件定义接口，并让每个组件接收它所依赖的组件作为接口作为构造函数参数。

这使得编写良好解耦的类、防止类膨胀以及进行良好的单元测试变得更加容易。

然后，您可以使用任何反转控制框架在游戏初始化代码中自动将所有组件绑定在一起。

# iphone - Xcode 不允许将文件复制到捆绑包

> ID：13758680
> 
> 赞同：1
> 
> 时间：2012-12-07T07:23:55.147
> 
> 标签：iphone, ios, xcode

我在将文件复制到 Xcode 包时遇到问题。我的包中有一些文件，我正在丢弃它们并从另一个项目复制新的同名文件。但经常 Xcode 给出错误为：**复制文件时发生多个错误。** 我做了很多RND但没有解决方案。谁能帮帮我。提前谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-07T07:43:01.297

因为您刚刚从项目中删除了文件，但每个文件的一个副本仍在项目所在的文件夹中。如果有红线，请先删除所有红线。请参阅以下步骤 -

1.  右键单击您的项目
2.  在取景器中显示
3.  找到您的文件并删除它们
4.  现在删除所有红线文件
5.  **Command+shift+k**清理你的项目。
6.  现在添加新文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-20T11:58:05.977

我意识到这是一个旧帖子，但我在这里添加以防其他人遇到同样的问题。我正在做一个项目，我使用 AFNetworking 并执行了以下步骤：

1.  我将文件拖放到我的项目中，并要求**xCode 5**制作相同的副本（而不是创建参考）。
2.  我需要删除我刚刚导入的文件夹/文件，然后在 xCode 的文件导航器中右键单击它们，然后点击删除 - 我确实以 laxonline 上面描述的方式删除了文件夹/文件。
3.  尝试将 AFNetworking 库代码重新添加回我的项目并收到以下消息。

![在此处输入图像描述](../Images/ef1ae13ca5f10a68a089763082f62193.png)

此处的解决方法是按照已接受答案中的步骤进行操作 - 即要在 xCode 中右键单击您的项目，选择在 Finder 中显示，然后删除有问题的文件/文件夹。

我赞成接受的答案，但也将其作为单独的答案发布，因此我可以强调即使您选择正确的删除选项也会发生上述情况。就我而言，我发现虽然 AFNetworking 文件不再在目录中，但仍然存在一个具有上述名称的空文件夹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T08:07:21.597

从 Xcode 中删除令人兴奋的文件时。Xcode4 询问您**“您要从磁盘中永久删除文件“fileName”，还是只删除对它的引用？”**

默认情况下，警报选择“仅删除参考”将其更改为删除。

![在此处输入图像描述](../Images/5b816f3bbdcc8f45f7a6899986b36753.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-09T09:35:40.083

删除文件时，您必须选择移至垃圾箱选项。如果您选择删除引用，那么只有指向这些文件的链接会被删除，您必须手动从它们的位置删除这些文件。

# c - libopus 创建编码器的错误参数

> ID：13758681
> 
> 赞同：1
> 
> 时间：2012-12-07T07:23:59.990
> 
> 标签：c, java-native-interface

目前我正在尝试为 libopus 构建 JNI 绑定。我目前的问题是我有一个像这样的 C 方法：

```
JNIEXPORT jobject JNICALL 
Java_de_akuz_android_libopus_OpusCodecFactory_encodercreate(JNIEnv * env, jint samplingRate, jint channels, jint application)
{
jclass resultClass = (*env)->FindClass(env,"de/akuz/android/libopus/OpusFactoryResult");
jobject result = (*env)->AllocObject(env,resultClass);

jfieldID pointerFieldID = (*env)->GetFieldID(env, resultClass,"pointer","J");
jfieldID errorFieldID = (*env)->GetFieldID(env, resultClass,"errorCode","I");

int error;
OpusEncoder* encoder = opus_encoder_create(samplingRate, channels, application, &error);

char buf[100];
sprintf(buf, "Pointer address: %p", encoder); // puts string into buffer
__android_log_print(ANDROID_LOG_INFO, "OpusNative", buf);

(*env)->SetLongField(env, result, pointerFieldID, encoder);
(*env)->SetIntField(env, result, errorFieldID, error);
return result;
} 
```

当我从 JNI 调用此方法时，采样率值为 48000，通道值为 2，应用程序 id 为 2049（取自 opus 定义），总是得到错误代码 -1 和空指针。我已经尝试将采样率转换为 opus_int32 但它没有改变任何东西。我也尝试直接传递定义的 OPUS_APPLICATION_AUDIO ，而不是它的整数值，但它也没有改变任何东西。不幸的是，我更像是一个 Java 人，所以我将不胜感激在我的 C 代码中遇到这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T21:35:38.880

我真的很抱歉，但显然我是盲人（或愚蠢）。我的方法声明全错了

```
Java_de_akuz_android_libopus_OpusCodecFactory_encodercreate(JNIEnv * env, jint samplingRate, jint channels, jint application) 
```

我有 JNI 环境的参数，但没有调用对象的参数。似乎 C 对 Java 代码中本机方法的参数数量或参数类型不感兴趣。由于在 JNIEnv 之后缺少作业对象，我的所有参数都被移动了一个，而 samplingRate 具有缺少作业对象的指针的值。正确的方法声明将是

```
Java_de_akuz_android_libopus_OpusCodecFactory_encodercreate(JNIEnv * env, jobject object, jint samplingRate, jint channels, jint application) 
```

我希望遇到同样问题的人会发现我的回答很有用。

# visual-studio-2010 - 应用程序在控制台中正常工作，但在窗口服务中终止

> ID：13758686
> 
> 赞同：0
> 
> 时间：2012-12-07T07:24:24.403
> 
> 标签：visual-studio-2010, visual-c++, windows-services, heap-corruption

我在 VS 2010 中用 Visual c++ 制作了一个控制台应用程序。我添加了控制台处理程序，这样当我按下`Ctrl`+时`C`，应用程序可能会成功终止，并且它对我来说没有错误。后来我把应用程序放到了一个窗口服务中，在下面的案例 `SERVICE_CONTROL_STOP`和`SERVICE_CONTROL_SHUTDOWN`. 当我停止服务时，我收到错误

> 检测到堆损坏：在 0x003C5420.CRT 的正常块（#119）之后检测到应用程序在堆缓冲区结束后写入内存。`

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:43:24.713

您需要分析此故障后创建的转储文件。

1.  所以第一步是[设置收集转储文件](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787181%28v=vs.85%29.aspx)。
2.  然后使用 pdb-files 在发布模式下构建您的程序并将其作为 Windows
    服务运行。
3.  最后，当您有此故障的转储文件时，您可以
    使用调试器来分析它们。我经常为此目的使用
    [WinDbg](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)。

# mysql - 棘手的 SQL 连接查询

> ID：13758690
> 
> 赞同：5
> 
> 时间：2012-12-07T07:24:38.273
> 
> 标签：mysql, sql, join

我有两张表，一张名为 StudentCerts，包含电子邮件（主键）和证书，另一张名为 CertReqs，包含证书和课程。表格的一部分可能如下所示：

```
 StudentCerts:                                 CertReqs:    
Email           Certificate             Certificate          Course
This@that.com      Programmer            Programmer           CS 101
This@that.com      English               Programmer           CS 202
A@B.com            Econ                  Programmer           CS 303
john@smith.com     Programmer            English              ENG 101
                                         English              ENG 102
                                         Econ                 ECON 102
                                         Econ                 ECON 304
                                         Art                  Art 101
                                         Art                  Art 102
                                         Journalism           J 101
                                         Journalism           J 202 
```

我想要做的是获得特定学生不属于的所有证书。例如，This@that.com 注册了程序员和英语证书，我想获得一条 SQL 语句，它将返回 CertReqs 中特定学生未注册的所有证书。所以对于这个例子它应该返回 Econ、Art 和 Journalism。我一直在努力得到这个，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:29:06.500

```
SELECT cr.Certificate FROM CertReqs cr
WHERE cr.Certificate NOT IN (
    SELECT sc.Certificate FROM StudentCerts sc
    WHERE sc.Email = 'This@that.com'
); 
```

该查询几乎读作要求：“我想要所有 CertReqs，学生不在其中”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T07:51:56.820

游戏有点晚了，但是一个简单的`LEFT JOIN`方法很好地解决了这个问题：

```
SELECT DISTINCT cr.Certificate 
FROM CertReqs cr
LEFT JOIN StudentCerts sc ON cr.Certificate = sc.Certificate AND sc.Email = 'This@that.com'
WHERE sc.Email IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T07:30:06.877

这将列出所有缺少某个证书的学生

```
SELECT  DISTINCT x.*
FROM
    (
        SELECT  a.Email, b.Certificate
        FROM    (SELECT DISTINCT Email FROM StudentCerts) a
                CROSS JOIN
                (SELECT DISTINCT Certificate FROM CertReqs) b
    ) x LEFT JOIN studentCerts y
        ON x.Email = y.Email AND
            x.Certificate = y.Certificate
WHERE  y.Email IS NULL
ORDER BY x.EMAIL 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/1f857/7)

如果您想要特定的电子邮件，那么您只需要添加额外的条件

```
SELECT  DISTINCT x.*
FROM
    (
        SELECT  a.Email, b.Certificate
        FROM    (SELECT DISTINCT Email FROM StudentCerts) a
                CROSS JOIN
                (SELECT DISTINCT Certificate FROM CertReqs) b
    ) x LEFT JOIN studentCerts y
        ON x.Email = y.Email AND
            x.Certificate = y.Certificate
WHERE  y.Email IS NULL AND
       x.Email = 'This@that.com'
ORDER BY x.EMAIL 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/1f857/8)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T07:44:57.053

```
SELECT Certificate FROM `CertReqs` 

WHERE Certificate NOT in(
    SELECT Certificate 
    FROM `StudentCerts` 
    WHERE Email  = 'This@that.com' 
) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-31T12:56:06.350

```
SELECT DISTINCT A.* fROM 
(
SELECT DISTINCT EMAIL, CERTIFICATE fROM #StudentCerts A
CROSS JOIN #CertReqs B)  A
LEFT JOIN #StudentCerts B ON A.EmaiL = B.EMAIL AND B.CERTIFICATES = A.Certificate
WHERE B.EMAIL IS NULL
ORDER BY A.EMAIL 
```

# android - 如何将 PendingIntent 用于两个不同的活动？

> ID：13758695
> 
> 赞同：0
> 
> 时间：2012-12-07T07:24:52.460
> 
> 标签：android, notifications, push-notification, android-notifications, android-pendingintent

我正在使用 PendingIntent 将用户从推送通知带到活动 B，即当用户单击通知时，它将转到屏幕 B。

我希望它仅在应用程序加载并运行时成为屏幕 B，否则它应该转到屏幕 A。我也实现了这一点。

现在，有一种情况，我收到了通知，因此意图设置为屏幕 B，但我没有点击它。如果我使用 DDMS 终止应用程序进程，或者如果 android**在我单击通知之前**终止应用程序，然后单击它，它会尝试加载活动 B，这在这种情况下不是我想要的。在这种情况下，我想加载活动 A，这是应用程序的第一个场景。

请，建议做什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:14:41.823

听起来您正在决定在发布通知时是否启动活动 A 或 B，正如您所发现的那样，这将不起作用：一旦您将通知提交给通知管理器，您就无法进行更改给它。

这样做的方法是始终启动相同的活动，但让该活动可能根据您想要的任何标准将用户重定向到不同的活动。例如，您可以启动活动 B，如果应用程序尚未在前台，则该活动会立即将用户反弹到 A。（您也可以使用第三个活动来执行此操作，该活动的工作只是将用户路由到周围，或者使用服务或广播。）

现在，关于将用户发送到哪里的决定是在用户点击通知时做出的，而不是在发布通知时做出的。

# database - 如何修复程序结束触发错误

> ID：13758698
> 
> 赞同：1
> 
> 时间：2012-12-07T07:24:59.710
> 
> 标签：database, postgresql, triggers, plpgsql

有没有办法解决这个错误，或者我的代码中缺少一些东西，我正在学习`postgresql`并且我一直在研究`table inheritance and triggers`我有两个表，`temporary_object table`并且`persons table`persons表继承了临时对象具有的所有属性，然后我有在persons表上创建了一个触发器函数，它检查记录与我尝试运行时出现的问题相同`id before updating`，我得到了这些`tables``insert query``errors`

```
ERROR: end of trigger procedure achieved without RETURN
CONTEXT: function PL / pgSQL muli_function ()

ERROR: end of trigger procedure achieved without RETURN
SQL-state: 2F005
Context: The PL / pgSQL muli_function () 
```

这是通过插入查询

```
INSERT INTO persons (id, time_create, time_dead, First_name, Last_name) values (1, '2011-10-07 15:25:00 EDT', '2011-10-07 3:25 PM EDT', 'sathiya', 'james'); 
```

这是我的触发功能并自行触发

```
CREATE FUNCTION muli_function() RETURNS trigger AS '
BEGIN
  IF tg_op = ''UPDATE'' THEN
     UPDATE persons
     SET time_dead = NEW.time_create
     Where
         id = NEW.id
         AND time_dead IS NULL
         ;
  RETURN new;
  END IF;
END
' LANGUAGE plpgsql;

CREATE TRIGGER sofgr BEFORE INSERT OR DELETE OR UPDATE
        ON persons FOR each ROW
        EXECUTE PROCEDURE muli_function(); 
```

这是我的两个表查询

```
CREATE TABLE temporary_object
(
  id integer NOT NULL,
  time_create timestamp without time zone NOT NULL,
  time_dead timestamp without time zone,
  PRIMARY KEY (id, time_create)
);

CREATE TABLE persons
(

  First_Name text,
  Last_Name text
)
INHERITS (temporary_object); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:20:22.880

试试这个：

```
CREATE FUNCTION muli_function() RETURNS trigger AS '
BEGIN
  IF tg_op = ''UPDATE'' THEN
     UPDATE persons
     SET time_dead = NEW.time_create
     Where
         id = NEW.id
         AND time_dead IS NULL
         ;

  END IF;
  RETURN new;
END
' LANGUAGE plpgsql; 
```

UPD 更好的是这样的：

```
CREATE FUNCTION muli_function() RETURNS trigger AS '
BEGIN
  IF tg_op = ''UPDATE'' THEN
    IF NEW.time_dead IS NULL THEN
     NEW.time_dead = NEW.time_create
    END IF;      
  END IF;
  RETURN new;
END
' LANGUAGE plpgsql; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T08:35:16.270

您为触发器定义了触发器过程`INSERT OR UPDATE`，但没有为 提供案例`INSERT`（就像注释 mu 太短一样），只有`UPDATE`. 所以触发器执行 a 的过程`INSERT`，然后它没有找到任何要执行的东西并没有 a 就退出`RETURN`，这显然是一个错误。

# list - Haskell - 是否有标准函数来提供列表中每个项目的计数？

> ID：13758704
> 
> 赞同：-1
> 
> 时间：2012-12-07T07:25:27.633
> 
> 标签：list, haskell, map, count

> **可能重复：**
> [计算列表中的唯一元素 计算列表](https://stackoverflow.com/questions/3710976/counting-unique-elements-in-a-list)
> [中每个元素的频率](https://stackoverflow.com/questions/13517114/count-frequency-of-each-element-in-a-list)

我试过谷歌、Hoogle 和这里​​，但没有看到任何明显的东西。

它应该采取`['a', 'b', 'e', 'c', 'e', 'a', 'e']`并返回`[('a', 2), ('b', 1), ('c', 1), ('e', 3)]`或类似的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T08:13:27.130

我会使用地图进行计数：

```
import qualified Data.Map as M

countElems :: (Ord a) => [a] -> M.Map a Int
countElems = M.fromListWith (+) . flip zip (repeat 1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T07:50:34.437

不，您可以使用例如

```
import Data.List
import Control.Arrow

map (head &&& length) $ group $ sort ['a', 'b', 'e', 'c', 'e', 'a', 'e'] 
```

或者考虑使用[MultiSet](http://hackage.haskell.org/packages/archive/multiset/0.2.1/doc/html/Data-MultiSet.html)。

# php - 访问属性“文档”的权限被拒绝

> ID：13758708
> 
> 赞同：4
> 
> 时间：2012-12-07T07:25:40.400
> 
> 标签：php, javascript, jquery, iframe

我在那里使用以下脚本，在我的页面上形成这个脚本添加 iframe，我想获取 iframe html。

```
<script src="http://ads.sonobi.com/ttj?id=881134" type="text/javascript"></script> 
```

问题在于 iframe 中有内部 iframe。

用于获取 ifrmae 内容的 Javascript 以下函数

```
document.getElementById('f1').contentWindow.document.body.innerHTML 
```

当我运行这将显示以下错误

```
Permission denied to access property 'document' 
```

如何解决权限被拒绝的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-21T02:13:35.697

**你不能。**

为什么？这是阻止跨站点脚本 (XSS) 攻击的安全功能。

例如，您有一个加载`www.facebook.com`. 如果未实施此安全功能，您可以轻松地从该站点获取数据。从 cookie 到页面上的内容。

这里有更多有用的信息：[http ://www.veracode.com/security/xss](http://www.veracode.com/security/xss)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T07:37:58.163

我没有看 JS，但是您无法使用 javascript 从远程页面获取 HTML。试试 PHP 的 cURL。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-07T07:35:48.653

Try

```
var frame = document.getElementById('f1');
var doc = frame.contentWindow || frame.contentDocument;
var html = doc.document.body.innerHTML 
```

Source: [Frame/IFrame contentDocument Property](http://www.w3schools.com/jsref/prop_frame_contentdocument.asp).

# iphone - 在 CCLayer 中添加 UISwitch 的问题

> ID：13758711
> 
> 赞同：1
> 
> 时间：2012-12-07T07:25:46.103
> 
> 标签：iphone, ios, cocoa-touch, cocos2d-iphone

再会，

我的问题是我有一个设置屏幕，它是一个 CCLayer，我想在其中显示一个 UISwitch。我在我的 settings.m 中使用了这个代码

```
 UISwitch * soundSwitch = [[UISwitch alloc] initWithFrame:CGRectMake(240,150,0,0)];
    [soundSwitch addTarget:self action:@selector(soundButtonPressed:) forControlEvents:UIControlEventValueChanged];
    [[[CCDirector sharedDirector] view] addSubview:soundSwitch]; 
```

但是现在这个开关是在游戏启动后立即显示的。我希望它仅在我的设置层初始化时出现。在这方面有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:20:55.003

尝试将开关添加为

```
UISwitch * soundSwitch = [[UISwitch alloc] initWithFrame:CGRectMake(240,150,0,0)];
    [soundSwitch addTarget:self action:@selector(soundButtonPressed:) forControlEvents:UIControlEventValueChanged];

[[[CCDirector sharedDirector]openGLView]addSubview:soundSwitch]; 
```

我，e 使用 [[[CCDirector sharedDirector]openGLView]addSubview:soundSwitch] 代替。

还有一件事你的 initWithFrame:CGRectMake(240,150,0,0) 没有意义，因为 0 长度和 0 宽度没有意义。尝试一些有效的坐标，如 (130,210,30,30)

# javascript - 一种立方体表面的星探路启发式算法

> ID：13758713
> 
> 赞同：6
> 
> 时间：2012-12-07T07:25:51.457
> 
> 标签：javascript, performance, coffeescript, path-finding, a-star

我正在构建一个在立方体表面上玩的[蛇游戏。](http://mhluska.com/demo/snake3d)目前它使用 Dijkstra 算法进行寻路。尽管对集合和优先级队列数据结构进行了优化，但它仍然有点太慢了。当蛇吃掉食物并开始寻找新食物时，您会注意到延迟。

我试图让它改用 A*，但我找不到一个好的启发式方法。在具有 4 个运动方向的平面网格上，我会使用曼哈顿距离。我尝试过使用 3D 曼哈顿距离`abs(dx) + abs(dy) + abs(dz)`，但没有充分的理由：对于蛇来说，游戏世界实际上是[6 个网格（对应于立方体的面）](http://www.bbc.co.uk/schools/ks3bitesize/maths/images/net_of_a_cube.gif)，具有不同寻常的环绕属性。

在代码中，每个正方形都存储在一个`grid[15][15]`二维数组中。有 6 个这样的数组来存储每个人脸。所以每个正方形都有一个`(arrayX, arrayY, d)`三元组来描述二维数组中的偏移量，并指定哪个数组。此外，每个正方形都有一个`(x, y, z)`描述空间位置的三元组。

这是寻路发生的游戏代码区域：

[https://github.com/mhluska/Snakeception/blob/master/src/js/game.coffee#L105](https://github.com/mhluska/Snakeception/blob/master/src/js/game.coffee#L105)

这是 A* 的库代码：

[https://github.com/mhluska/Stimpack/blob/master/src/js/graph.coffee#L60](https://github.com/mhluska/Stimpack/blob/master/src/js/graph.coffee#L60)

对于这个游戏世界，什么是合适的、简洁的启发式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T07:40:39.597

解决这个问题的一种方法是，不要在你抓住一个食物后立即进行所有寻路，而是让蛇向有下一个食物的一侧移动，然后，当它在该侧时，使用基本的获取食物的二维网格 A* 算法。换句话说：

每当蛇抓住食物或移动到立方体的新一侧时，请执行以下操作：

*   如果食物在当前立方体的一边，使用带有 2D 曼哈顿距离启发式的 A* 算法找到它的路径
*   如果食物在立方体的相邻边上，则使用相同的寻路算法找到一条到与当前边和目标边接壤的立方体边缘的路径。
*   如果食物在立方体的另一边，用相同的寻路算法找到一条离开当前边的路径。

这并不能保证最短的整体路径，但它通常应该接近最短路径，并且应该更快，因为它将寻路分成多个阶段并为每个阶段使用更有效的算法。

# php - 使用 Ajax/JQuery PHP 显示更新页面

> ID：13758714
> 
> 赞同：0
> 
> 时间：2012-12-07T07:26:02.257
> 
> 标签：php, jquery, ajax, curl

这将是一个常见问题，但我正在寻找的是：我的 PHP 脚本可以：

*   使用 cURL 读取远程页面

*   每 20 秒更新一次

*   我想每 20 秒自动更新一个 div（不是整个页面）（使用 cURL 填充）。

我已经阅读了许多解决方案，但没有在源代码中显示更新的数据（可抓取形式）。

请向我建议一个解决方案，如何使用 cURL 更新数据更新 div，并且应该填充/包含在我页面的源代码中。

让我知道是否有任何不清楚的地方。抱歉英语不好:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:39:14.477

我知道您需要它来评论系统，解决方法是`setInterval`这样使用：

```
<script type="text/javascript">
 setInterval(function(){
     $.ajax({
       url:'PUT YOUR URL',
       success:function(data){
          $('#comment').append($(data).fadeIn());
       }
     });
 }, 20000);
</script> 
```

还有什么...祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:57:38.970

将您的 cURL PHP 代码复制到一个名为“reloader.php”的新文件中，在您的主页中，还将读取数据（cURL 内容）的源代码放在一个 div“id = to_be_reloaded”中，在您的主页中添加这些：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/
libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
var auto_refresh = setInterval(
function ()
{
$('#to_be_reloaded').load('reloader.php').fadeIn("slow");
}, 20000); // refresh every 20000 milliseconds(20 seconds)
</script> 
```

# visual-c++ - c++名字排序程序

> ID：13758722
> 
> 赞同：1
> 
> 时间：2012-12-07T07:26:32.317
> 
> 标签：visual-c++

程序说明：从“names.txt”中以“First Last”格式读取姓名列表。根据姓氏然后名字的人名的典型字母顺序对名称进行排序。将排序列表写入名为“sortednames.txt”的文件，格式为“Last, First”。

这是我的代码：文件数据存储在全名数组中，但现在我被困在如何翻转数组中的名字和姓氏？

```
int main()
{
    const int MAXNAMES = 100;
    int value = 0;
    string fullname[MAXNAMES];

    ifstream inFile;
    inFile.open("names.txt"); //open the file to excess the rainfall data
    if (inFile.fail()) // testing the file
        {
            cout << "Error opening file. Please check that the file currently `enter code here`exist" << endl;
            exit(1);
        }   
    cout << "File successfully open" << endl;
    while(!inFile.eof())
    {
        while(value < 100)
        {
            getline(inFile,fullname[value]);
            value++;
        }
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:37:47.283

要翻转名称，您可以执行以下操作：

```
string myString;
int spacePosition;

value = 0;
while(value < 100) {
   myString = fullname[value];
   spacePosition = myString.find(" ");
   fullname[value] = myString.substr(spacePostion) + " " + myString.substr(0, spacePostion -1);
} 
```

# magento - 如何在magento中特定类别的产品列表下方添加一个块？

> ID：13758723
> 
> 赞同：0
> 
> 时间：2012-12-07T07:26:36.713
> 
> 标签：magento, magento-1.5, magento-1.7, php

我想在产品列表下方添加一个产品线块。当我选择特定产品时，我想在产品线块中添加产品名称及其价格。

此外，我将从产品列表中选择多个产品，并将行一一添加到块中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:46:47.033

1.  创建一个新的模板文件，您可以在其中加载产品并显示信息
2.  在列表下的catalog.xml（或local.xml）中添加模板文件。
3.  创建一个句柄来执行 ajax 请求（动态更新产品线块）
4.  创建控制器以保存产品线和返回块
5.  使用 ajax 句柄和控制器更新块内容

如果我没有遗漏任何东西，这大概就是我所需要的。作为magento的新手，我不建议这样做，首先学习基础知识，这并不容易;-)。

# jquery - 如何在输入字段（HTML）中存储字典？

> ID：13758726
> 
> 赞同：0
> 
> 时间：2012-12-07T07:26:49.023
> 
> 标签：jquery, html, input, dictionary

我有一本包含多个字段的大字典。

var deal = {'foo':'moo','foo1':'moo1','foo2':'moo2','foo3':'moo3','foo4':'moo4','foo5':'moo5 '}

我想将其存储为隐藏的输入字段。IE

```
`
<div class="deal">
<input type="hidden" value=deal />//unique for this div
</div>
<div class="deal">
<input type="hidden" value=deal />//unique for this div
</div>
<div class="deal">
<input type="hidden" value=deal />//unique for this div
</div> 
```

检索

```
 $(".deal").on('click',function(){
     var deal= $(this).find('input').val();

}); 
```

并使用 jQuery 检索它。在通过 jQuery 检索它时，我遇到了一些问题，即我认为整个数据都没有被存储。（一半的字典被截断。）我是否应该只查询我的数据库并得到这个？或者有没有办法将字典存储为输入字段值？如果问题不清楚，请发表评论。我会做必要的补充。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T07:48:25.757

也许您可以将您的数据存储在 Javascript 中，并将您的 HTML 元素引用到那些 JS 变量？喜欢：

```
var dict1 = {name:"val", name2:"val"};
<div class="deal" data-dict="dict1"></div> 
```

然后像这样绑定它：

```
$(".deal").on('click',function(){
    var dictName = $(this).data('dict'),
        deal = window[dictName];
}); 
```

# wpf - 如何知道 UIElement 是否具有固定宽度或应该在测量/排列中拉伸

> ID：13758730
> 
> 赞同：1
> 
> 时间：2012-12-07T07:27:20.960
> 
> 标签：wpf, xaml, uielement, measure

我制作了一个可以包含多个孩子（`UIElement`s）的控件（看起来像一个网格）。我用代码测量和安排整个布局。现在，其中一些元素在 xaml 中定义了宽度，而有些则没有。

如果元素具有固定宽度或应该使用整个可用宽度，我如何在 measureOverride/arrangeoverride 中知道？

示例 XAML：

```
<MyControl>
   <TextBox x:Name="TextA" Text="TextFixed" Width="10"/>
   <TextBox x:Name="TextB" Text="TextStretch"/>
</MyControl> 
```

在 uielement.Measure() 之后的 MeasureOverride 方法中，大小是该元素所需的最小大小。我不知道如何查看何时应该计算“TextB”的可用宽度......

**更新：**

在 MeasureOverride() 中，两个元素都有 Horizo​​ntalAlignment 'Stretch'，并且在 uiElement.Measure(availableSize) 之后都有 DesiredSize.Width。该宽度是它需要的最小宽度。有了这些信息，我无法知道这两个元素中的哪一个应该被拉伸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:39:11.767

查看控件`Horizontal`的`VerticalAlignment`属性。

如果不是`Stretch`控件，则应仅采用固定大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T13:14:45.477

我的问题的解决方案是在`ArrangeOverride()`元素应该拉伸宽度为 double.NaN 时检查宽度

# exception - 当 log4j 失败时如何得到通知？

> ID：13758735
> 
> 赞同：2
> 
> 时间：2012-12-07T07:27:49.027
> 
> 标签：exception, log4j

就像[http://www.experts123.com/q/is-log4j-a-reliable-logging-system.html](http://www.experts123.com/q/is-log4j-a-reliable-logging-system.html)所说：log4j 在运行时不会抛出任何意外异常。如果我想将应用程序信息记录到远程主机，当远程主机因网络中断而无法访问或更改其 IP 地址时，我想发送邮件通知网络管理员或切换到其他附加程序，如 DailyRollingFileAppender。

既然我无法捕捉到异常，那么当 log4j 失败时我应该怎么做才能让我得到通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:07:42.690

I have solved it. use DOMConfigurator to configure FallbackErrorHandler, a spare appender when log4j fails.

I first use PropertyConfigurer but it warns that FallBackErrorHandler is not a proper element, I don't know why, but it worked well when change to DOMConfigurator.

# apache-pig - Apache Pig：将属性列表合并到一个元组中

> ID：13758736
> 
> 赞同：3
> 
> 时间：2012-12-07T07:27:55.750
> 
> 标签：apache-pig

我收到表格中的数据

```
id1|attribute1a,attribute1b|attribute2a|attribute3a,attribute3b,attribute3c....
id2||attribute2b,attribute2c|.. 
```

我正在尝试将它全部合并到一个表单中，其中我只有一个 id 字段的元组包，后跟一个包含合并在一起的所有其他字段列表的元组。

(id1,(attribute1a,attribute1b,attribute2a,attribute3a,attribute3b,attribute3c...)) (id2,(attribute2b,attribute2c...))

目前我拿它喜欢

```
my_data = load '$input' USING PigStorage(|) as 
(id:chararray, attribute1:chararray, attribute2:chararray)... 
```

然后我尝试了 FLATTEN、TOKENIZE、GENERATE、TOTUPLE、BagConcat 等的所有组合，以将其按摩成我想要的形式，但我是猪新手，无法弄清楚。任何人都可以帮忙吗？任何开源 UDF 库都是公平的游戏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T16:24:31.897

将每一行作为一个完整的字符串加载，然后使用内置`STRPLIT`UDF 的特性来达到预期的结果。这依赖于您的属性列表中没有选项卡，并假设`|`在`,`分离不同属性时不会有任何不同的处理。此外，我稍微修改了您的输入以显示更多边缘情况。

`input.txt`：

```
id1|attribute1a,attribute1b|attribute2a|,|attribute3a,attribute3b,attribute3c
id2||attribute2b,attribute2c,|attribute4a|,attribute5a 
```

`test.pig`：

```
my_data = LOAD '$input' AS (str:chararray);
split1 = FOREACH my_data GENERATE FLATTEN(STRSPLIT(str, '\\|', 2)) AS (id:chararray, attr:chararray);
split2 = FOREACH split1 GENERATE id, STRSPLIT(attr, '[,|]') AS attributes;
DUMP split2; 
```

输出`pig -x local -p input=input.txt test.pig`：

```
(id1,(attribute1a,attribute1b,attribute2a,,,attribute3a,attribute3b,attribute3c))
(id2,(,attribute2b,attribute2c,,attribute4a,,attribute5a)) 
```

# php - 我无法在 root 权限下在 ubuntu 11.10 中运行 codeIginter

> ID：13758737
> 
> 赞同：0
> 
> 时间：2012-12-07T07:27:57.577
> 
> 标签：php, codeigniter

我想在 ubuntu 下运行 codeIginter php Freamework，我将 www-data 组添加到 root，phpMyAdmin 也不起作用，它说“在此服务器上找不到请求的 URL /phpMyAdmin。”，

*   我以 root 身份登录，因为将其他用户添加到 www-data 的所有帮助对我没有帮助。
*   我多次删除/安装 agian apache 但没有解决方案。
*   本地主机工作正常。

请帮助快速...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:03:55.213

phpmyadmin 不起作用的原因可能是：在 phpmyadmin 安装过程中，您必须选择服务器：**首先**您应该使用空格键选择 apache，**然后才**按回车键，但 99% 的人不这样做不要得到空格键的东西，因为它不直观。如果您也没有得到它，请打开您的 /etc/apache2/apache2.conf 并插入以下行：

```
INCLUDE /etc/phpmyadmin/apache.conf 
```

# iphone - 在 iPhone 上使用图像和相机时出现内存问题

> ID：13758738
> 
> 赞同：1
> 
> 时间：2012-12-07T07:27:58.370
> 
> 标签：iphone, ios, didreceivememorywarning, memory-warning

在我的应用程序中，用户最多可以添加 8 张由相机拍摄的图像，并将它们一张一张上传到服务器。我的问题是，即使在拍摄第一张照片时，我也会收到内存警告，这当然会强制应用程序释放任何不可见的视图。

处理图片的最佳实践方法是什么？我如何在不耗尽内存的情况下保留它们直到它们被上传？

我的目标是避免任何内存警告。

提前致谢。

/埃斯本

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T07:31:24.820

单击图像后，将图像存储到 Document 目录中。存放是最安全的选择

图像，然后使用它。查找一些教程，然后单击图像将图像发送到文档

目录，然后从目录中获取并使用它。希望它可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:06:55.703

继续执行以下步骤。

我遇到了这个问题，现在它对我有用，请使用以下步骤。

1.  选择图像并显示到 UIImageView。然后上传到服务器。

2.  释放 UIImageView。

3.  再次拍照并上传到服务器。

# java - Java Pattern 类没有公共构造函数，为什么？

> ID：13758740
> 
> 赞同：11
> 
> 时间：2012-12-07T07:28:05.200
> 
> 标签：java, design-patterns, constructor, static-methods, factory-pattern

我一直在审查 Java`Regex`库，惊讶于`Pattern`该类没有多年来我认为理所当然的公共构造函数。

我怀疑使用静态`compile`方法来支持构造函数的一个原因可能是构造函数总是会返回一个新对象，而静态方法可能会返回先前创建的（和缓存的）对象，前提是模式字符串是相同的。

但是，如下所示，情况并非如此。

```
public class PatternCompiler {
    public static void main(String[] args) {
        Pattern first = Pattern.compile(".");
        Pattern second = Pattern.compile(".");
        if (first == second) {
            System.out.println("The same object has been reused!");
        } else {
            System.out.println("Why not just use constructor?");
        }
    }
} 
```

在构造函数上使用静态方法背后还有其他强有力的理由吗？

**编辑**：我在这里找到了一个[相关的问题](https://stackoverflow.com/questions/855518/why-does-java-pattern-class-use-a-factory-method-rather-than-constructor)。那里的答案也没有让我信服。通读所有答案，我感觉静态方法在创建对象方面比公共构造函数有很多优势，但反之则不然。真的吗？如果是这样，我将为我的每个类创建这样的静态方法，并安全地假设它更具可读性和灵活性。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-07T07:50:29.270

通常，由于以下三个原因之一，类不会有公共构造函数：

*   该类是一个实用程序类，没有理由实例化它（例如，java.lang.Math）。
*   实例化可能会失败，并且构造函数不能返回`null`。
*   静态方法阐明了实例化过程中发生的事情背后的含义。

在类中`Pattern`，第三种情况是适用的——静态`compile`方法只是为了清楚起见。从解释的角度来看，通过构建模式`new Pattern(..)`没有意义，因为有一个复杂的过程会继续创建一个新的`Pattern`. 为了解释这个过程，静态方法被命名为`compile`，因为正则表达式本质上是为了创建模式而编译的。

简而言之，`Pattern`仅通过静态方法可构造并没有编程目的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-07T08:03:50.267

一个可能的原因是，通过这种方式，以后可以将缓存添加到方法中。

另一个可能的原因是可读性。考虑这个（经常被引用的）对象：

```
class Point2d{
  static Point2d fromCartesian(double x, double y);
  static Point2d fromPolar(double abs, double arg);
} 
```

`Point2d.fromCartesian(1, 2)`并且`Point2d.fromPolar(1, 2)`都是完全可读和明确的（嗯......除了参数顺序）。

现在，考虑`new Point2d(1, 2)`. 参数是笛卡尔坐标还是极坐标？`int, int`如果具有相似/兼容签名的构造函数具有完全不同的语义（例如，是笛卡尔，`double, double`是极性的），那就更糟了。

这个基本原理适用于任何可以以多种不同方式构造的对象，这些方式仅在参数类型上没有区别。虽然d`Pattern`目前只能`compile`来自正则表达式，但未来可能会出现不同的 Pattern 表示（不可否认，`compile`这是一个糟糕的方法名称）。

@Vulcan 提到的另一个可能的原因是构造函数不应该失败。

如果`Pattern.compile`遇到无效模式，它会抛出一个`PatternSyntaxException`. 有些人可能认为从构造函数中抛出异常是一种不好的做法。不可否认，[FileInputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileInputStream.html#FileInputStream%28java.io.File%29)正是这样做的。类似地，如果设计决定是`null`从`compile`方法中返回，那么使用构造函数是不可能的。

* * *

简而言之，在以下情况下，构造函数不是一个好的设计选择：

*   可能会发生缓存，或者
*   构造函数在语义上是模棱两可的，或者
*   创建可能会失败。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-07T07:46:53.807

这只是一个设计决定。在这种情况下，没有“真正的”优势。但是，这种设计允许在不更改 API 的情况下进行优化（例如缓存）。见[http://gbracha.blogspot.nl/2007/06/constructors-considered-harmful.html](http://gbracha.blogspot.nl/2007/06/constructors-considered-harmful.html)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-07T07:53:49.047

工厂方法有几个优点，其中一些已经在其他答案中指定。考虑工厂方法而不是构造函数的建议甚至是 Joshua Bloch 的伟大著作“Effective Java”的第一章（每个 Java 程序员都必须阅读）。

* * *

一个优点是您可以拥有多个具有相同参数签名但名称不同的工厂方法。这是构造函数无法实现的。

例如，一个人可能想`Pattern`从几种输入格式中创建一个，所有这些格式都只是`String`s：

```
class Pattern {
  compile(String regexp) { ... }
  compileFromJson(String json) { ... }
  compileFromXML(String xml) { ... }
} 
```

即使您在创建类时没有这样做，工厂方法也使您能够在以后添加此类方法而不会引起怪异。

例如，我已经看到了稍后需要新构造函数的类，并且必须将一个特殊的无意义的第二个参数添加到第二个构造函数以允许重载。显然，这是非常丑陋的：

```
class Ugly {
  Ugly(String str) { ... }

  /* This constructor interpretes str in some other way.
   * The second parameter is ignored completely. */
  Ugly(String str, boolean ignored) { ... }
} 
```

不幸的是，我不记得这样一个类的名称，但我认为它甚至在 Java API 中。

* * *

另一个之前没有提到的优点是工厂方法与包私有构造函数相结合，您可以禁止为其他人进行子类化，但您自己仍然使用子类。在 的情况下`Pattern`，您可能希望拥有私有子类`CompiledPattern`，如 、`LazilyCompiledPattern`和`InterpretedPattern`，但仍禁止子类化以确保不变性。

使用公共构造函数，您可以禁止每个人的子类化，或者根本不禁止。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-07T07:51:03.093

如果您真的想深入了解，请深入了解 JSR 51 的档案。

正则表达式已作为 JSR 51 的一部分引入，您仍然可以在其档案中找到设计决策，[http://jcp.org/en/jsr/detail ?id=51](http://jcp.org/en/jsr/detail?id=51)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-07T07:31:14.143

它有一个私有构造函数。

```
 /**
     * This private constructor is used to create all Patterns. The pattern
     * string and match flags are all that is needed to completely describe
     * a Pattern. An empty pattern string results in an object tree with
     * only a Start node and a LastNode node.
     */
    private Pattern(String p, int f) { 
```

和`compile`方法调用。

```
public static Pattern compile(String regex) {
        return new Pattern(regex, 0);
    } 
```

由于您使用的是 == 比较，它是用于参考的，所以它不起作用

`compile`我能想到这种行为的唯一原因是，在充当工厂方法的方法中，匹配标志将默认为零。

# java - 如何在 Java 准备语句中打印绑定变量。

> ID：13758746
> 
> 赞同：3
> 
> 时间：2012-12-07T07:28:31.380
> 
> 标签：java, database

假设我的查询是这样的，这里 conn 是连接对象：

```
String countrycode=91;//it is dynamic in my case
String query = "update tblemployeedata set countrycode='?';
PreparedStatement pstmtUpdate = conn.prepareStatement(query);
pstmtUpdate.setString(1,countrycode); 
```

现在设置上面的国家代码后，我想看到我的实际查询形成

```
update tblemployeedata set countrycode='91';

pstmtUpdate.executeUpdate(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:34:22.553

You can use `pstmtUpdate.toString()` method to see the actual query that is made after setting the parameters in the prepared statement.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-07T09:37:17.947

您可以通过以下方式获取查询的值。

```
Class stmt1 = pstmtUpdate.getClass();
java.lang.reflect.Field mem = stmt1.getField("sql");
String value= (String)mem.get(pstmt); 
```

希望对你有帮助

# windows-8 - Windows 8 JavaScript/HTML/CSS 应用程序开发 - 为游戏添加 .wav 音效

> ID：13758750
> 
> 赞同：0
> 
> 时间：2012-12-07T07:28:43.050
> 
> 标签：windows-8

我从 Windows 8 开发中心下载了 Windows 8 触控游戏示例。此示例有一个 .wav 文件，当球击中屏幕角落时播放该文件。我查看了代码，无法弄清楚它是如何工作的。

我正在寻找有关播放 .wav 文件的简单说明。我已将我的短 .wav 文件导入到我的 Visual Studio 项目中。

在 JavaScript 中我如何：

1）将文件导入（例如：myWavFile = "/sounds/myWavFile.wav"） 2）在我的代码中播放文件（例如：myWavFile.play();

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:21:08.383

将 .wav 文件放在您的项目中 - 在我的示例中，它位于我添加的目录中**。**然后做这样的事情......

```
var audio;

function playSound(wavfile) {
    audio.setAttribute('src', wavfile);
    audio.play();
}
window.onload = function () {
    document.getElementById('demoButton').onclick = function () { playSound('sounds/pow.wav');};

    audio = document.createElement('audio');
}; 
```

您还可以将**onload**函数移动到您的 WinJS**激活**事件中。

};

# php - 我可以在提交表单时将新的 HTML 元素（例如收音机、复选框、下拉菜单）添加到当前文件吗？

> ID：13758751
> 
> 赞同：-2
> 
> 时间：2012-12-07T07:28:42.783
> 
> 标签：php, html

我有一个包含两个文件的文件都有一个表单，在第二个表单上我有一个下拉菜单用于选择用户想要的内容（例如收音机、复选框、下拉菜单）和该选项的标签，所以我可以在这里添加新的 HTML元素（例如收音机、复选框、下拉菜单）在表单提交时当前文件???如果是 t

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:33:06.700

是的，你可以，通过使用 ajax。不是通过表格发布

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T11:02:16.120

使用jquery。将元素附加到同一页面是最好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T07:48:46.030

通过javascript做，不要使用表单提交，这需要时间。

第一种形式

```
<div id="first_form">
    <form id=="firstform">
         <input type="text" />
         <input type="text" />
    </form>
</div> 
```

将生成元素的第二种形式

```
 <form id="secondform">
     <select id="choice" onchange="createElement(this.value);">
         <option value="radio">Radio</option>
         <option value="checkbox">checkbox</option>
         <option value="dropdown">dropdown</option>
     </select> 
 </form> 
```

Javascript代码

```
 <script type="text/javascript">
     function createElement(element) {
       var html = '';
       if(element=='radio') {
          html = "<input type='radio' />";
       }
       else if(element=='checkbox') {
          html = "<input type='checkbox' />";
       }
       if(element=='dropdown') {
          html = "<select><option>abc</option></select>";
       }
      //use jquery
      $("#first_form").append(html);   
     }
 </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T07:38:09.577

不知道我说得对不对，你的文字很混乱。

**第 1 页**

```
<form action="page2.php" method="post">
    <input type="checkbox" name="addcheckbox" value="1"> Add a checkbox<br>
    <input type="checkbox" name="adddropdown" value="1"> Add a dropdown<br>
    <input type="submit">
</form> 
```

**第2页**

```
echo '<form [...]>';
if( $_POST['addcheckbox'] == 1) echo '<input type="checkbox" name="whatever" value="1"> checkbox';
if( $_POST['adddropdown'] == 1) echo '<select name="mydropdown">
<option value="Milk">Fresh Milk</option>
<option value="Cheese">Old Cheese</option>
<option value="Bread">Hot Bread</option>
</select>';
echo '</form>'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T07:38:37.173

不知道你在问什么。

你调用一个函数 onSubmit （[更多在这里](http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml)）。如果需要，您可以在该函数中通过 JavaScript 动态添加表单元素。

用于`createElement`创建元素并将`appendChild`其添加到您想要的位置。

更多信息[在这里](http://www.randomsnippets.com/2008/02/21/how-to-dynamically-add-form-elements-via-javascript/)

# java - Java JVM 是否保证在调用“notify”时会通知正确的“wait”？

> ID：13758752
> 
> 赞同：3
> 
> 时间：2012-12-07T07:28:53.160
> 
> 标签：java, multithreading

据一位同事介绍，JVM 不保证当对一个对象调用“notify”时，那个时候会通知正确的“wait”。他说，可能存在一种情况，即先前不再有效的通知在无效时间交付。

这是真的？如果是这样，这是如何/为什么会这样，如果你不能假设这样基本的东西会起作用，等待/通知机制有什么用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:40:01.043

对于 java.lang.Object.notify，Javadoc 说：

> 唤醒正在此对象的监视器上等待的单个线程。如果有任何线程正在等待该对象，则选择其中一个被唤醒。该选择是任意的，并由实施自行决定。线程通过调用其中一个等待方法在对象的监视器上等待。

这是等待特定条件的模式：

```
synchronized( lock ) {
   while( conditionEvaluation( data )) {
      lock.wait();
   }
} 
```

对方应使用`java.lang.Object.notifyAll()`以确保应用程序的活力。即使今天只有一个服务员，经过软件的多次演进，未来可能是几个服务员，所以`notifyAll()`比`notify()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T07:59:27.280

每个等待内在锁的对象都将进入锁的等待集。当您在锁对象上调用 notify 时，将选择其等待集中的线程之一来恢复工作。JVM 提供的唯一保证是等待的线程**最终将**通知。这种非确定性行为的主要原因之一是 JVM 选择挂起线程运行的方式，这是任意的。然而，此外，java 中的锁实现了允许线程插入的非公平锁定策略。这仅仅意味着允许新的锁请求跳到锁的等待集之前，如果锁在请求时可用。这背后的理由是，鉴于存在大量争用，在选择和恢复等待集中的挂起线程及其实际运行时间之前，可能会有一些（潜在的重大）延迟。因此，来自线程的任何传入锁请求都可以利用此时间延迟立即运行，希望在恢复的线程准备好运行时它已经释放了锁。

1.  先前已获取监视器 X 的线程 A 调用 notify()
2.  在监视器 X 上等待的线程 B 已选择（任意）挂起。
3.  线程 C 尝试获取监视器 X，发现它可用并获取它。
4.  线程 C 运行（尽管线程 B 目前正在恢复过程中）
5.  线程 C 完成执行并释放监视器 X，就在线程 B 实际运行之前。
6.  线程 B 已准备好运行，因此它获取锁并开始执行。

很明显，在第 2 步和第 6 步之间存在一些时间间隔，其中没有线程实际使用锁。线程 C 插入并利用时间间隔作为优化。这样做的缺点当然是在线程 B 准备运行时没有释放锁的风险，此时线程 B 会注意到锁不可用并再次进入等待集。然而，从统计上可以证明，非公平锁定在大多数情况下提供了更好的性能。

顺便说一句，您可以使用公平锁，等待线程按照它们获取锁的顺序恢复，但实际上这会提供更差的性能。在此处阅读有关此内容的更多信息：http: [//docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantLock.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantLock.html)

我希望这回答了你的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-07T08:11:26.770

不，这不是真的。当一个线程调用 notify 时，会唤醒一个等待线程（如果存在这样的线程，则通知丢失）。可能您的同事想到了“虚假通知”，它可以在实际上没有其他线程调用时唤醒一个线程`notify`或`notifyAll`. 为了过滤“虚假通知”，每次`notify`调用都应伴随受监视对象状态的一些变化，等待线程应检查该状态：

```
 synchronized void up() {
    counter++;
    notify();
 }
 synchronized void down() {
   while (counter==0) {
      wait();
   }
   counter--;
 } 
```

注意检查状态`down()`是在调用 wait() 之前完成的，因为它可以在调用之前更改并且通知丢失。换句话说，真正的信息与对象的状态一起传递，等待/通知仅有助于避免轮询。永远不要在不改变对象状态的情况下依赖通知。

# html - IE 正在添加不需要的随机标签

> ID：13758754
> 
> 赞同：0
> 
> 时间：2012-12-07T07:28:55.967
> 
> 标签：html, internet-explorer

我有两个文本字段。在一个我插入一个链接。我正在复制该链接并将其粘贴到第二个。现在，当我打开我粘贴的第二个文本字段的源时，它显示添加了一个额外的标签。此问题仅在 IE 中。我正在使用 IE9。

这是我插入链接的第一个文本字段的源代码::

```
<p> 
   <a id="hhh" href="http://blr-kprama-lt:8080/_$link-ref:'2975'_" >sffsf </a>
</p> 
```

这是我粘贴链接的第二个字段的源代码。

```
<p> 
      <a id="hhh" href="http://blr-kprama-lt:8080/_$link-ref:'2975'_" >
        <span style="color: #0066cc" >sffsf </span></a>
</p> 
```

给我一些想法或代码片段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:30:55.460

您的标签周围可能有一个`<span>`带有该属性的属性。由于 a内部无效，因此浏览器会为您纠正错误。`style``<p>``<p>``<span>`

# c# - 为什么发送到 WindowsFormsSynchronizationContext 时会动态调用 SendOrPostCallback 委托？

> ID：13758769
> 
> 赞同：1
> 
> 时间：2012-12-07T07:29:53.937
> 
> 标签：c#, .net, winforms, synchronization, synchronizationcontext

我正在编写一个允许我调用任意方法的包装器，`SynchronizationContext`例如，允许我将与网络相关的回调（例如`Socket.BeginReceive`）排队到某个任意调度程序/处理程序，例如 UI 线程，或者我自己的为串行执行而设计的实现. （以避免需要同步数据结构 - 锁等）。

基本上是这样的：

```
..
public void BeginInvoke(MethodCall methodCall)
{
    this.synchronizationContext.Post(this.SynchronizationContextCallback, methodCall);
}

private void SynchronizationContextCallback(Object methodCall)
{
    (methodCall as MethodCall).Invoke();
}
.. 
```

一切似乎都可以正常工作，`WindowsFormsSynchronizationContext`但是当抛出异常时（A `System.Reflection.TargetInvocationException`）我意识到`SendOrPostCallback`委托正在被动态调用（？！）这是`System.Windows.Forms.Control.ThreadMethodEntry`类中的相关代码（Microsoft Reference）：

```
private static void InvokeMarshaledCallbackDo(ThreadMethodEntry tme)
{
    // We short-circuit a couple of common cases for speed.
    //
    if (tme.method is EventHandler)
    {
        if (tme.args == null || tme.args.Length < 1)
        {
            ((EventHandler)tme.method)(tme.caller, EventArgs.Empty);
        }
        else if (tme.args.Length < 2)
        {
            ((EventHandler)tme.method)(tme.args[0], EventArgs.Empty);
        }
        else
        {
            ((EventHandler)tme.method)(tme.args[0], (EventArgs)tme.args[1]);
        }
    }
    else if (tme.method is MethodInvoker)
    {
        ((MethodInvoker)tme.method)();
    }
    else if (tme.method is WaitCallback)
    {
        Debug.Assert(tme.args.Length == 1,
                        "Arguments are wrong for WaitCallback");
        ((WaitCallback)tme.method)(tme.args[0]);
    }
    else
    {
        tme.retVal = tme.method.DynamicInvoke(tme.args);
    }
} 
```

似乎不支持`SendOrPostCallback`委托，但有趣的是它的签名与`WaitCallback`! 或更一般地，一个`Action<Object>`. 这让我产生疑问，我在这里做错了吗？还是这是设计使然？（我的意思是在语言和框架级别上......）。显然.. 动态调用所有已调度的方法调用会明显更慢且更难以调试？（到了我什至可能找不到可用的解决方案的地步？）。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:08:32.570

这是不可避免的，它可以编组*任何*委托类型。唯一的方法是使用 DynamicInvoke()。他们确实努力挑选了一些您将在 Winforms 编程中使用的常见委托类型，但这绝不可能是一个详尽的列表，而不会失去这样做的好处。不必担心成本，这总是涉及线程上下文切换和 Winforms 消息循环响应 PostMessage() 的延迟。与之相比，DynamicInvoke() 的成本是小菜一碟。

是的，你必须做一些事情来避免被最外面的异常打，TargetInvocationException 对任何人都没有用。Winforms Control.Invoke() 方法通过仅重新抛出最内部的 InnerException 来实现这一点。这也不理想，但比 TIE 更好。

# android - android webviewer 无法正确显示网站

> ID：13758773
> 
> 赞同：0
> 
> 时间：2012-12-07T07:30:10.013
> 
> 标签：android

我正在使用 webviewer 来显示我的网站。这些网站是波斯语的。问题是内容真的很乱，而且显示得很糟糕。

有没有办法解决这个问题？我尝试了太多网站，但没有一个显示得很好。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:33:13.053

```
 WebView wv = (WebView) findViewById(R.id.webview1);
        WebSettings webSettings = wv.getSettings();
        webSettings.setJavaScriptEnabled(true);
        webSettings.setBuiltInZoomControls(true);
        wv.loadUrl("http://www.google.com"); 
```

添加：

```
<uses-permission
        android:name="android.permission.INTERNET"></uses-permission> 
```

到您的 AndroidManifest.xml 如果您还没有这样做。还要检查您的模拟器上是否有互联网连接。尝试打开浏览器。如果您没有互联网连接，请尝试重新启动模拟器。

# python - Django URL conf conf 重定向到错误的视图

> ID：13758774
> 
> 赞同：1
> 
> 时间：2012-12-07T07:30:10.227
> 
> 标签：python, django, url

为大学生写一个应用程序——显示一个系列表，你点击一个，然后它会显示那个系的课程，点击一个，然后显示教授那个课程的教授。

URL conf 有问题——我的应用程序不断将我重定向到错误的视图。

所以我有3个模型

```
class Department(models.Model):
    subject         = models.CharField(max_length = 25)
    pub_date        = models.DateTimeField(auto_now_add = True)

    def __unicode__(self):
        return self.subject

class Course(models.Model):
    department      = models.ForeignKey(Department)
    course_number   = models.CharField(max_length = 50)
    course_name     = models.CharField(max_length = 100, blank = True, null = True)
    c_pub_date      = models.DateTimeField(auto_now_add = True)

    def __unicode__(self):
        return self.course_number

class Professor(models.Model):
    course          = models.ForeignKey(Course)
    prof_name       = models.CharField(max_length = 50)
    p_pub_date      = models.DateTimeField(auto_now_add = True)

    def __unicode__(self):
        return self.prof_name 
```

然后我的应用程序 URL conf 转到视图、课程和教授，具体取决于 URL

```
urlpatterns = patterns('qanda.views',
    url(r'^$', 'index'),
    url(r'(?P<department_id>\d+)/$', 'courses'),
    url(r'(?P<department_id>\d+)/(?P<course_id>\d+)/$', 'professors'),
) 
```

因此，当我访问 url mysite.com 时，它会列出数据库中的所有部门。然后单击一个部门（即数学），它会将我带到 mysite.com/1 上的课程视图，其中显示了该部门的所有课程。然后点击一门课程应该带我到教授视图 mysite.com/1/1，它显示了所有教授该课程的教授。

但是，当我进入课程视图并单击课程以进入教授视图时，即使 URL 显示 mysite.com/1/2，它实际上也会将我重定向回 mysite.com/2，并获取 course_id（在在这种情况下，2) 并将其误认为是部门 ID，并将我重定向到课程视图。

例如，Math 101 course_id = 1。Math 102 course_id = 2。对于 Math 101，有 2 位教授。教授 A 教授 ID = 1，教授 B 教授 ID = 2。

因此，当单击 Math 101 时，URL 将是 mysite.com/1。之后点击教授 B 时，URL 将是 mysite.com/1/2。但是，现在当点击教授 B 时，URl 显示 mysite.com/1/2，但会将我带到 mysite.com/2。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-07T07:38:51.237

你的问题是你的正则表达式太模糊了..你错过了`^`所以你的第一个 URL 在你的第二个有机会之前匹配。

`(\d+)/$`会匹配`/3/, foo/3/, foo/bar/baz/3`

它与尾部斜杠无关。这是一个标准的 django URL 模式。`/$`

```
url(r'^$', 'index'),
url(r'(?P<department_id>\d+)/$', 'courses'),
#   ^^^ needs ^
url(r'(?P<department_id>\d+)/(?P<course_id>\d+)/$', 'professors'), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T07:34:07.170

看起来你有两个问题 - 缺少插入符号和尾部斜杠。试试这个：

```
urlpatterns = patterns('qanda.views',
    url(r'^$', 'index'),
    url(r'^(?P<department_id>\d+)/?$', 'courses'),
    url(r'^(?P<department_id>\d+)/(?P<course_id>\d+)/?$', 'professors'),
) 
```

# asp.net - 如何解决“由于可用内存或磁盘空间不足，Microsoft Office Excel 无法打开或保存更多文档”？

> ID：13758777
> 
> 赞同：1
> 
> 时间：2012-12-07T07:30:23.783
> 
> 标签：asp.net, export-to-excel, excel-interop

我正在尝试将我网站中的数据集导出到 Excel。该代码在本地计算机上运行良好，但是当我部署相同的代码以取胜时。服务器即时收到以下错误：

![在此处输入图像描述](../Images/7093bf96aa86715d83c0ef3271be19ca.png)

我正在使用以下代码：

```
 DataSet ds = new DataSet("New_DataSet");
    DataTable dt = new DataTable("New_DataTable");

    string constr = ConfigurationSettings.AppSettings["ConnectionInfo"];
    SqlConnection con = new SqlConnection(constr);
    con.Open();

    string sql = "SELECT * FROM Table1";
    SqlCommand cmd = new SqlCommand(sql, con);
    SqlDataAdapter adptr = new SqlDataAdapter();

    adptr.SelectCommand = cmd;
    adptr.Fill(dt);
    con.Close();

    ds.Tables.Add(dt);
    MyExcel.Application oXL;
    MyExcel.Workbook oWB;
    MyExcel.Worksheet oSheet;
    MyExcel.Range oRange; 
```

// 工作表 sheet = excelApp.Worksheets; // <-- 重要部分 //Worksheet sheet = sheet.Open(...);

```
 oXL = new MyExcel.Application();

    oXL.Visible = true;
    oXL.DisplayAlerts = false;
    oWB = oXL.Workbooks.Add(System.Type.Missing);
    //oWB = oXL.Workbooks.Add(System.Type.Missing);

    oSheet = (MyExcel.Worksheet)oWB.ActiveSheet;
    oSheet.Name = "Customers";

    int rowCount = 1;
    foreach (DataRow dr in dt.Rows)
    {
        rowCount += 1;
        for (int i = 1; i < dt.Columns.Count + 1; i++)
        {
            // Add the header the first time through 
            if (rowCount == 2)
            {
                oSheet.Cells[1, i] = dt.Columns[i - 1].ColumnName;
            }
            oSheet.Cells[rowCount, i] = dr[i - 1].ToString();
        }
    }

    // Resize the columns 
    oRange = oSheet.get_Range(oSheet.Cells[1, 1],
                  oSheet.Cells[rowCount, dt.Columns.Count]);
    oRange.EntireColumn.AutoFit();

    // Save the sheet and close 

    oWB.SaveAs("test.xlsx", MyExcel.XlFileFormat.xlWorkbookNormal, System.Type.Missing, System.Type.Missing, System.Type.Missing, System.Type.Missing,
        MyExcel.XlSaveAsAccessMode.xlExclusive, System.Type.Missing, System.Type.Missing, System.Type.Missing, System.Type.Missing, System.Type.Missing);

    oSheet = null;
    oRange = null;
    oWB = null;
    oXL = null;

     oWB.Close(false, System.Type.Missing, System.Type.Missing);
    Marshal.FinalReleaseComObject(oWB);
    Marshal.FinalReleaseComObject(oXL);

    oXL.Quit();
    Marshal.ReleaseComObject(oSheet);
    Marshal.ReleaseComObject(oSheet);

    GC.WaitForPendingFinalizers();
    GC.Collect();
    GC.WaitForPendingFinalizers();
    GC.Collect(); 
```

我没有得到任何解决方案。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T09:34:06.027

如果您已检查是否有足够的可用空间，那么唯一可能的另一个问题是权限。

希望您发现此链接有用：

[http://www.codeproject.com/Questions/87128/Unable-to-write-data-runtime-in-Excel-app-using-c](http://www.codeproject.com/Questions/87128/Unable-to-write-data-runtime-in-Excel-app-using-c)

# iphone - 如何将核心数据添加到现有项目中？

> ID：13758782
> 
> 赞同：3
> 
> 时间：2012-12-07T07:30:56.177
> 
> 标签：iphone, objective-c, core-data

> **可能重复：**
> [将核心数据添加到现有 iPhone 项目](https://stackoverflow.com/questions/2032818/adding-core-data-to-existing-iphone-project)

最初我创建了没有选择 coreData 的项目。经过一些开发后，我想使用核心数据进行数据管理。它给出了一些例外，例如

```
context = [[NSManagedObjectContext alloc] init]; 
CDAlbum *albumInfo = [NSEntityDescription insertNewObjectForEntityForName:@"CDAlbum" inManagedObjectContext:context]; 
albumInfo.albumName = @"MyAlbum"; 
CDPage *pageInfo = [NSEntityDescription insertNewObjectForEntityForName:@"CDPage" inManagedObjectContext:context]; 
pageInfo.message = @"It's my message"; 
pageInfo.pageId = @"123456"; 
pageInfo.album = albumInfo;
albumInfo.page = pageInfo; 
```

`'NSInternalInconsistencyException', reason: '+entityForName: could not locate an NSManagedObjectModel for entity name 'CDAlbum'`

我认为这是因为链接。我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:38:17.010

1) 在您的项目中添加 CoreData 框架。2）`#import <CoreData/CoreData.h>`在您的`App_Prefix.pch`文件中。请参阅[此已接受的同一问题的答案](https://stackoverflow.com/a/2032912/869455)

# php - 将变量从 php 传递到 shell 脚本

> ID：13758783
> 
> 赞同：1
> 
> 时间：2012-12-07T07:31:05.990
> 
> 标签：php, expect, shell-exec

这是我的php代码：

```
<?php
$var1="hello.txt";
exec("expect /home/foo.sh $var1");
?> 
```

和我的shell脚本：

```
spawn su -s /bin/bash root -c "/usr/bin/gpg --output /home/$1.gpg --encrypt --recipient sampleonly@yahoo.com  /home/$1"
expect "Password:"
send "mypassword\r"
expect "*complete*" 
```

它没有得到我的变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:54:12.400

您必须将参数分配给如下变量：

外壳脚本：

```
set name [lrange $argv 0 0]
send -- "Hello $name" 
```

终端命令：

```
expect hello.sh Benjamin 
```

结果：

```
Hello Benjamin 
```

# c# - Youtube Oauth 2.0 asp.net 服务器端网络应用

> ID：13758786
> 
> 赞同：0
> 
> 时间：2012-12-07T07:31:10.680
> 
> 标签：c#, asp.net, oauth-2.0, youtube.net-api

是否有任何用于 Youtube Oauth 2.0 的服务器端 Web 应用程序的库？youtube 图书馆网页似乎不起作用？下方链接

[https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2#OAuth2_Client_Libraries](https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2#OAuth2_Client_Libraries)

# c# - 母版页事件上的事件未使用验证控件触发

> ID：13758790
> 
> 赞同：1
> 
> 时间：2012-12-07T07:31:26.053
> 
> 标签：c#, asp.net, master-pages, validation-controls

我**在内容页面中应用了一些文本框**。我已经对其应用了一些验证控件。

到目前为止我所做的是，

```
 <asp:TextBox ID="txtE1" runat="server" CssClass="input_type_text" Width="75px"  CausesValidation="false" ValidationGroup="te" >
<asp:RequiredFieldValidator ID="rqdE1" runat="server" ControlToValidate="txtE1"
                         ErrorMessage="*"></asp:RequiredFieldValidator> 
```

我在母版页上有一个退出链接。我无法生成该事件。我还缺少/需要其他任何东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:35:34.640

如果页面上有验证错误，javascript 验证会阻止页面回发。如果注销在文本框表单的范围内，那么这可能是您的问题。你能看看是否有验证错误吗？

# python - 使用 PayPal 和其他此类外部依赖服务系统地测试 django 应用程序

> ID：13758794
> 
> 赞同：0
> 
> 时间：2012-12-07T07:31:55.377
> 
> 标签：python, django, unit-testing, testing

我有一个 django 应用程序，它使用以下方式接受 PayPal 付款

我正在手动测试不同的场景 PayPal 的 Sandbox API。我想从两个角度使其更加系统化：

1) 在编写代码和测试时，我不想通过大量的点击来刺激 PayPal IPN。为特定场景快速生成 IPN 的最佳方法是什么。2) 在更一般的层面上，我如何对与 IMAP、PayPal IPN、Web 服务等外部服务接口的任何应用程序进行单元测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:37:52.290

1.  组织您的代码，以便您可以使用来自单元测试的所需参数调用调用 paypal ipn 本身的例程。

2.  学习单元测试：[https ://docs.djangoproject.com/en/1.4/topics/testing/](https://docs.djangoproject.com/en/1.4/topics/testing/)

# rhomobile - RhoMobile rake Windows Mobile 错误

> ID：13758796
> 
> 赞同：3
> 
> 时间：2012-12-07T07:32:05.587
> 
> 标签：rhomobile, rhodes

每当我尝试编译在 RhoStudio 中开发的测试 RhoMobile 应用程序时，我都会收到一条错误消息。测试应用程序是使用此处提供的说明开发的：

[http://docs.rhomobile.com/rhostudio.tutorial](http://docs.rhomobile.com/rhostudio.tutorial)

发出的编译命令是：rake run:wm 在编译序列结束时收到的错误消息是：

CMD: vcbuild /M4 rhodes.sln "Release|MC3000c50b (ARMV4I)" rake 中止

我在 Windows 7 64 位上运行应用程序，编译器根据以下规范配置：

[http://docs.rhomobile.com/rhodes/build#build-for-windows-mobile](http://docs.rhomobile.com/rhodes/build#build-for-windows-mobile)

有人可以告诉我为什么会出现此错误消息吗？谢谢你。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T13:00:08.193

首先要检查的是您的 rhobuild.yml 文件，看看 windows mobile 的具体配置是否正确。例如我的有这个：

> cabwiz: "C:/Program Files/Windows Mobile 6 SDK/Tools/CabWiz"
> vcbuild: "C:/Program Files/Microsoft Visual Studio 9.0/VC/vcpackages/vcbuild.exe"
> msbuild: "C:/Windows/Microsoft. NET/Framework/v4.0.30319/MSBuild.exe"

另外，是否有任何其他消息显示 vcBuild 错误？

我曾经遇到过这个错误，例如：

> vcbuild.exe : 错误 VCBLD0007: 找不到项目配置
> RELEASE|WINDOWS MOBILE 6.5.3 PROFESSIONAL DTK (ARMV4I) 来构建。

如果您还没有签入[Rhomobile Google 群组](https://groups.google.com/forum/?fromgroups=#!forum/rhomobile)。那里可能存在类似的问题，可以提供额外的见解。

# wpf - WPF窗口闪烁通知？

> ID：13758797
> 
> 赞同：2
> 
> 时间：2012-12-07T07:32:10.103
> 
> 标签：wpf, flash, window

我最近开始使用 XCEED MessageBox，它使用自定义镶边（<-我认为这是他们的名字）作为标题栏，似乎没有处理对话框窗口（或 Win32 术语中的模态对话框）的情况) 需要闪烁以响应用户尝试单击（禁用的）父窗口。

闪烁的边框动画有助于通知用户他必须在继续之前响应对话框，并提示用户是哪个对话框窗口。

当窗口需要在 WPF 中执行 flash 动画或为其设置 XAML 触发器时，是否有办法获得通知？

# android - 发布后在应用内使用 Google

> ID：13758798
> 
> 赞同：1
> 
> 时间：2012-12-07T07:32:16.000
> 
> 标签：android, in-app-purchase, in-app-billing

**我已经发布了我的应用程序以及 id..我已经从应用程序商店下载了应用程序**

1..带身份证的电话购买

2..另一个购买它的设备

3..另一个有测试账户的设备

**现在我无法购买它，它给了我以下错误**

1..有ID的电话购买-->此版本的应用程序未配置为通过google play计费

2..另一个购买 iD 的设备-->未找到 iTEM

3..另一个有测试账户的设备--->您要求的项目不可购买

任何人都可以帮助我..

谷歌是否必须升级其服务器以允许购买 inaap

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:20:37.013

向市场发布应用程序后。**上传**或**更新**大约需要**3-4 小时**甚至更多时间。

 ****当您在 Google 帐户的应用程序中添加项目时，请确保您已将**项目设为已发布。**

还有一点需要注意的是，如果您拥有用于购买的 gmail id 的**有效信用卡详细信息，则只能购买该商品。******

# android - 离线/在线发送图像到服务器

> ID：13758802
> 
> 赞同：1
> 
> 时间：2012-12-07T07:32:57.677
> 
> 标签：android, http, android-intent, ftp

我有一个根据客户端/最终用户希望（选择）从图库中将图像发送到服务器并上传的过程。但是任务是从应用程序发送图像文件，即使用户没有互联网连接，并且当他/她得到它时它应该发送一个文件（再次/返回互联网连接）。我要求你们提出一些想法，如果我得到代码/示例片段会很有帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:41:00.393

您可以尝试以下方法：

1.  制作一个 android 服务，当应用程序尝试发送文件但互联网不可用时启动该服务。

2.  Android 服务将等待互联网连接可用性。

3.  将在此期间发出的每个上传请求的 http url 和图像 uri 存储在 SharedPreference 中。

4.  当网络可用时，从共享首选项中获取上传请求并一一发出请求。

希望这可以帮助。

# erlang - 列表匹配（最后 N 个字符匹配）

> ID：13758803
> 
> 赞同：1
> 
> 时间：2012-12-07T07:32:57.403
> 
> 标签：erlang, match

我现在正在写 hg(mercurial) 的客户。对于标签命令，响应如下：

> <<"添加一个\na\n提交的变更集 0:44108598f0ec643e7d90e9f18a2b6740401a510a\ntip
> 1:ce4daf41b6ae\nmy tags
> 0:44108598f0ec\ntest tag 0:44108598f0ec local\n">>.

python的相关代码如下：

```
 t = []
    for line in out.splitlines():
        taglocal = line.endswith(' local')
        if taglocal:
            line = line[:-6]
        name, rev = line.rsplit(' ', 1)
        rev, node = rev.split(':')
        t.append((name.rstrip(), int(rev), node, taglocal))
    return t 
```

我必须检查每一行是否有“本地”后缀，但编译器会给出语法错误。如何正确和优雅地写作。错误信息：

```
src/emercurial_client.erl:763: illegal pattern 
```

代码

```
process_tags(List)->
    process_tags(List,[]).

process_tags([],Result)->
    lists:reverse(Result);

process_tags([Line|Rest],Result) ->
    B = binary_to_list(Line),
    A = process_tags_line(B),
    process_tags(Rest,[A|Result]).

process_tags_line(New_list ++"local")->   %%<-----error here
process_tags_line(New_list);

process_tags_line(New_list)->
    %% case List of
    %%     Data ++ " local" ->   %%<-----also match error
    %%         New_list = Data;
    %%     _ ->
    %%         New_list = List
    %% end,
    [Name,Part2] = string:tokens(Data," "),
    [Rev,Node] = string:tokens(Part2,":"),
    {trim(Name),love_misc:to_integer(Rev),
     node,New_list}. 
```

修改后如下：

```
process_tags(List)->
    List_b = binary:split(List,<<$\n>>,[global]),
    Result = process_tags(List_b,[]),
    %% error_logger:info_report([client_process_tags,Result]),
    Result.

process_tags([],Result)->
    lists:reverse(Result);

process_tags([<<>>],Result)->
    lists:reverse(Result);

process_tags([Line|Rest],Result) ->
    B = binary_to_list(Line),
    A = process_tags_line(B),
    process_tags(Rest,[A|Result]).

process_tags_line(List) -> 
    %% error_logger:info_report([client_tags_line_1,List]),
    case lists:suffix(" local",List) of
        true ->
            New_list = lists:sublist(List,1,length(List)-7);
        _ ->
            New_list = List
    end,
    {Name,Part2} = rsplit(New_list,$\s),
    {Rev,Node} = 
        rsplit(Part2,$:),
    Rev_a =  string:substr(Rev,1,length(Rev)-1),
    {love_misc:trim(Name),love_misc:to_integer(Rev_a),Node,New_list}.

rsplit(A,Char)->
    Index = string:rchr(A,Char),
    lists:split(Index,A). 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T10:35:35.143

正如文档中所指出的，您[只能以类似的方式匹配前缀](http://www.erlang.org/doc/reference_manual/expressions.html#id76253)（实际上只是一种语法糖）。

我建议你使用功能[`lists:suffix`](http://www.erlang.org/doc/man/lists.html#suffix-2)

因此，您可以通过以下方式重写代码：

```
New_list = 
    case lists:suffix(" local", List) of
        true ->
            Data;
        false ->
            List
    end 
```

请注意，`case`表达式**返回值**，因此您只能绑定变量`New_List`一次 - 使用表达式的**结果**，而不是在表达式`case`的每个分支中绑定`case`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T08:36:57.380

我认为由于列表的底层结构（[A|[B|[....|[]...]]），您不能使用这种模式匹配。

相反的工作，所以你可以做类似的事情

```
process_tags_line(List) ->
    process_tags_line_1(lists:reverse(List)).
process_tags_line1(" lacol"++L) -> process_tags_line1(L);
process_tags_line1(L) ->
    New_list = lists:reverse(L),
    [Name,Part2] = string:tokens(Data," "),
    [Rev,Node] = string:tokens(Part2,":"),
    {trim(Name),love_misc:to_integer(Rev),node,New_list}. 
```

但最简单的可能是使用列表：suffix(L1,L2)...

# prolog - Prolog 规则 - 错误？

> ID：13758809
> 
> 赞同：1
> 
> 时间：2012-12-07T07:33:15.193
> 
> 标签：prolog, prolog-toplevel

我有事实：

```
/**--(course,time,location)--*/

ctl('course1', 'time1','location1').
ctl('course2', 'time1','location2').
ctl('course3', 'time2','location3').

/**--Lecturer,course-*/

lc('lecturer1','course1').
lc('lecturer2','course2').
lc('lecturer1','course3'). 
```

我对讲师的规则`schedule(course,time,location)`是：

```
schedule(Lecturer,C,T,L) :-
   lc(Lecturer,C),ctl(C,T,L). 
```

如果我这样做： **？- schedule('lecturer1',C,T,L)。**检查讲师1的日程安排，它将输出2组答案，

但如果我这样做： **？- 时间表（讲师，C，'time1'，_）。**要检查谁安排在 time1 教什么，在输出 2 组答案后应该为“假”。

有没有人如何修复“假”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T10:20:19.890

无需修复任何东西；这`false`只是意味着 Prolog 找不到更多的解决方案。它是无害的。

# ruby - 如果值为 nil，如何默认为零

> ID：13758812
> 
> 赞同：3
> 
> 时间：2012-12-07T07:33:25.027
> 
> 标签：ruby

如果 some_float 为 nil，我希望结果为 0。我怎么做？

```
some_float = 9.238
or 
some_float = nil

some_float.round(2) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-07T07:34:30.713

只需调用`.to_f`前一轮

```
some_float.to_f.round(2) 
```

因为当你调用`to_f`nil 时，它会返回`0.0`

```
9.238.to_f.round(2) # => 9.24
nil.to_f.round(2) # => 0.0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-07T10:26:03.913

选项1：

```
x = some_float ? some_float.round(2) : 0.0 
```

选项 2（红宝石 >= 2.3.0）：

```
x = some_float&.round(2) || 0.0 
```

# c# - How to get outlook select name dialog box to focus when opened from wpf application and outlook is running

> ID：13758817
> 
> 赞同：2
> 
> 时间：2012-12-07T07:33:48.670
> 
> 标签：c#, wpf, outlook, vsto

I am creating a wpf application to send outlook appointment. In this application I am opening outlook select name dialog box to select recipients of the appointment. Following is my code:

```
Outlook.SelectNamesDialog selectNameDialog =
           outlookApp.Session.GetSelectNamesDialog();
        selectNameDialog.SetDefaultDisplayMode(
            Outlook.OlDefaultSelectNamesDisplayMode.olDefaultMeeting);

        foreach (var recipient in recipientsList)
        {
            if (string.IsNullOrEmpty(recipient))
                continue;
            Outlook.Recipient confRoom =
                selectNameDialog.Recipients.Add(recipient);
            // Explicitly specify Recipient.Type.
            confRoom.Type = (int)Outlook.OlMeetingRecipientType.olRequired;
        }

        selectNameDialog.Recipients.ResolveAll();

        selectNameDialog.Display(); 
```

My problem is that when I open select name dialog it works fine if outlook is not running. But if outlook is running and I open this dialog on click from my application, it opens in back of my application and on top of outlook window. I need to show it on top of my application even if outlook is running. Any help will be highly appreciated to bring this dialog in front of all. Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T13:05:30.633

您可以尝试获取前景进程并将他的窗口向前推进。没有 .NET 钩子可以这样做，您需要为此使用本机 Win32 DLL。

```
 [Flags()]
    private enum SetWindowPosFlags : uint
    {
        SynchronousWindowPosition = 0x4000,
        DeferErase = 0x2000,
        DrawFrame = 0x0020,
        FrameChanged = 0x0020,
        HideWindow = 0x0080,
        DoNotActivate = 0x0010,
        DoNotCopyBits = 0x0100,
        IgnoreMove = 0x0002,
        DoNotChangeOwnerZOrder = 0x0200,
        DoNotRedraw = 0x0008,
        DoNotReposition = 0x0200,
        DoNotSendChangingEvent = 0x0400,
        IgnoreResize = 0x0001,
        IgnoreZOrder = 0x0004,
        ShowWindow = 0x0040,
    }

    [DllImport("user32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool SetForegroundWindow(IntPtr hWnd);

    [DllImport("user32.dll", SetLastError = true)]
    static extern bool BringWindowToTop(IntPtr hWnd);

    static readonly IntPtr HWND_TOP = new IntPtr(0);
    static readonly IntPtr HWND_TOPMOST = new IntPtr(-1);

    [DllImport("user32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool SetWindowPos(IntPtr hWnd, IntPtr hWndInsertAfter, int X, int Y, int cx, int cy, SetWindowPosFlags uFlags);

    [DllImport("user32.dll")]
    static extern IntPtr SetFocus(IntPtr hWnd);

    int bring_window_to_front_mode = 1; // Various option here, try them out
    Boolean TopMost = false;

        System.Diagnostics.Process[] prcs = System.Diagnostics.Process.GetProcessesByName("XBMCLauncher");
        foreach (var proc in prcs)
        {
            Log.LogLine("Main Window Handle {0}", p.MainWindowHandle.ToInt32());
            switch (bring_window_to_front_mode)
            {
                case 1:
                    if (TopMost)
                    {
                        Log.LogLine("SetWindowPos TopMost {0}", p.MainWindowHandle.ToInt32());
                        SetWindowPos(p.MainWindowHandle, HWND_TOPMOST, 50, 50, 500, 500, SetWindowPosFlags.IgnoreMove | SetWindowPosFlags.IgnoreResize);
                    }
                    else
                    {
                        Log.LogLine("SetWindowPos {0}", p.MainWindowHandle.ToInt32());
                        SetWindowPos(p.MainWindowHandle, HWND_TOP, 50, 50, 500, 500, SetWindowPosFlags.IgnoreMove | SetWindowPosFlags.IgnoreResize);
                    }
                    break;
                case 2:
                    Log.LogLine("BringWindowToTop {0}", p.MainWindowHandle.ToInt32());
                    BringWindowToTop(p.MainWindowHandle);
                    break;
                case 3:
                    Log.LogLine("SetForegroundWindow {0}", p.MainWindowHandle.ToInt32());
                    SetForegroundWindow(p.MainWindowHandle);
                    break;
                case 4:
                    Log.LogLine("SetFocus {0}", p.MainWindowHandle.ToInt32());
                    SetFocus(p.MainWindowHandle);
                    break;
            }
        } 
```

当然尝试/抓住...

# graphics - Running VPython on older Refurbished computers

> ID：13758821
> 
> 赞同：1
> 
> 时间：2012-12-07T07:34:08.343
> 
> 标签：graphics

I am trying to run VPython on my new refurbished Lenovo Thinkpad. Every program I run seems to calculate and print just fine, but there are no graphics being displayed. The black-screen window that usually pops up when running a program is not being displayed although my computer appears to be running through calculations. I am pretty sure I installed VPython correctly, and I'm pretty sure this is not a programming error.

Does anyone know anything about an incompatibility of older computers and VPython that I can look into?

P.S I think you can tell I'm pretty new to programming, but any help will be appreciated!

# jquery - how to split no of fields in add/edit form into leftside and right jqgrid when number of fields are more

> ID：13758826
> 
> 赞同：1
> 
> 时间：2012-12-07T07:34:36.500
> 
> 标签：jquery, jqgrid

![enter image description here](../Images/0de12d4d736de74fb75ede6f0215b0b5.png)

Please check the table to understand requirement.Since number of fields are more i want to shift few fields in right side of add form.

```
 **label field.**
 <table>
      <tr><td>label</td><td>input field</td></tr>
     </table>

  What i am expecting is in format:

  **label field label2 field2**

     <table>
      <tr>
       <td>label</td><td>field</td>
       <td>lablel2</td><td>field2</td>
     </tr>
     </table> 
```

Could any one please assist me . Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:19:25.240

诀窍是[formoptions](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#formoptions)`rowpos`的用法和`colpos`属性。在[答案](https://stackoverflow.com/a/10852741/315935)中，您可以找到[演示](http://www.ok-soft-gmbh.com/jqGrid/MulticolumnEdit.htm)该技术的演示。

如果您有*很多列*，即使在使用多个列之后，屏幕上的位置也可能不够。`dataheight`在这种情况下，您可以通过使用选项来限制添加/编辑表单的高度。该方法的缺点是在编辑表单的数据部分设置了*显式*的CSS 样式值。`height`更好的方法是`max-height`根据屏幕分辨率设置可以计算的值。例如，您可以在[beforeShowForm](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing#events)回调中进行更改

```
beforeShowForm: function ($form) {
    $form.css({"max-height": 0.70*screen.height + "px"});
} 
```

[该演示](http://www.ok-soft-gmbh.com/jqGrid/MaxHeightOfEditingForm.htm)演示了该方法。同样的方法你也可以设置`max-width`。

![在此处输入图像描述](../Images/d4db88ec97ef03f340f5735e26f836de.png)

为了显示结果，我同时使用*了* `dataheight`和`beforeShowForm`。在最终解决方案中，您应该删除`dataheight`部分设置。

# android - Google Map Api V2 not showing Map on device

> ID：13758827
> 
> 赞同：4
> 
> 时间：2012-12-07T07:34:38.570
> 
> 标签：android, google-maps-api-2

I am running sample code that is provided on Google Map Documentation for Google Map Api v2.The Code run successfully but Map is not loaded on the Device. Only White Screen is Shown on the Device. I am using 2.3.6 version android device.

Please Help me to resolve the issue

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T10:30:26.920

检查您在创建映射键时是否具有您提供的包名称的映射键。我得到了白色的地图屏幕，但我插入了我正在测试的包的地图键。然后我创建了新项目，但使用了以前的地图键，因此得到了白屏。

永远记住你必须为你创建的每个包使用新的映射键。通常人们会忘记那件事..（至少我忘了为新包生成新密钥）。

希望这能解决你的问题。

一切顺利

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:19:51.893

您很可能正在使用**发布版**SHA1 指纹来生成 Google API 密钥。由于您使用 Eclipse 进行**调试**，因此您的应用程序使用调试密钥进行签名。因此，您应该改用调试密钥来生成 Google API 密钥。

一旦您的应用准备好发布 - 只需切换到发布密钥。

# plsql - PL/SQL 每周分组

> ID：13758828
> 
> 赞同：1
> 
> 时间：2012-12-07T07:34:50.863
> 
> 标签：plsql, group-by

在我使用的 MySQL 中

```
week(date,3) 
```

获得正确的周分组值。

如何将其转换为 PL/SQL？我尝试了以下方法，但是`3`mysql 中的这个 from week 函数呢？

```
TRUNC (created_dt, 'IW') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:07:02.907

Oracle 正在使用数据库的 NLS 设置来确定应如何计算周数，因此（根据 Oracle）不需要 MySQL 函数的“3”部分。我可以想象，拥有这个选项仍然应该有用，但这再次表明甲骨文并未完全了解在美国以外工作的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-08T14:57:12.830

根据您上面的 MYSQL 语句，它返回指定日期的星期，例如 2012-12-07, 3，因为第二个参数定义一周的第三天假定为星期一...

如果你看这篇文章，它说 MYSQL`WEEK()`函数有 8 种行为方式。因此，您必须通过在 PL/SQL 中查找 MYSQL Week 等效函数来告诉我们您要达到的结果。

在最直接的方式中，MYSQL`WEEK(date[mode])`返回给定日期的周数。

通过重新阅读您的问题，我抓住的唯一一件事是您想要在 PL/SQL 中实现第一个功能，因此您正在寻找一个等效的功能。

而使用甲骨文，它会变得有点拉面......

*   `W Week of month (1-5)``week 1 starts on the first day of the month and ends on the seventh.`一年的开始。例如，2012 年从星期日开始，***ORACLE 认为***........ 星期是`Sundays to Saturday`.
*   `iw`基于 ISO 标准的一年中的第几周（1-52、1-53）。因此，星期不一定从星期日开始。
*   `WW`一年中的一周 (1-53)，其中第 1 周从一年的第一天开始，一直持续到一年的第七天。

默认情况下，Oracle NLS 设置如下：

*   NLS_CALENDAR : 公历
*   NLS_DATE_LANGUAGE：美国
*   NLS_TERRITORY：美国

因此，您可以建议 Oracle 通过操纵您的查询级别来遵循日历......

你可以这样：

```
select trunc('2012-12-07','YY') AS week_number, 
       to_number(to_char(trunc('2012-12-07','YY')+rownum-1,'D')) AS dayNumber_in_week
        from dual connect by level <= 365
where  to_char('2012-12-07','IW') = 3
and    to_char('2012-12-07','DY') = 'MON'; 
```

# c# - Reading Values from Table

> ID：13758832
> 
> 赞同：0
> 
> 时间：2012-12-07T07:35:29.460
> 
> 标签：c#, asp.net, excel

I populate values from my gridview in my table using this Code:

```
Table table = new Table();

 // get gridlines from gridview
table.GridLines = GridView1.GridLines;

if (GridView1.HeaderRow != null)
{
    table.Rows.Add(GridView1.HeaderRow);
}

foreach (GridViewRow row in GridView1.Rows)
{
    table.Rows.Add(row);
}

if (GridView1.FooterRow != null)
{
    table.Rows.Add(GridView1.FooterRow);
} 
```

What I need is to read every data from the table which contains the values of the gridview into an Excel worksheet cell. How can I achieve this?

PS: This is my worksheet obj in code-behind in C#.

```
Excel.Workbook xlWorkBook;
     Excel.Worksheet xlWorkSheet; 
```

Or Is there any other way to add the data from GridView to something else than, using table, which can be easily read?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:47:15.550

```
 public void ExportToExcel()
    {
        var Excel = new Microsoft.Office.Interop.Excel.Application();
        XlReferenceStyle RefStyle = Excel.ReferenceStyle;
        Excel.Visible = true;
        Workbook wb = null;
        string path = "yourpath";
        try
        {
            wb = Excel.Workbooks.Add(path); 
        }
        catch (System.Exception ex) 
        { 
            throw new Exception(ex.Message); 
        }
        Worksheet ws = wb.Worksheets.get_Item(1) as Worksheet ;
        for (int j = 0; j < GridView1.Columns.Count; ++j)
        {
            (ws.Cells[1, j + 1] as Range).Value2 = GridView1.Columns[j].HeaderText;
            for (int i = 0; i < GridView1.Rows.Count; ++i) 
            {
                object Val = GridView1.Rows[i].Cells[j].Value;
                if (Val != null)
                    (ws.Cells[i + 2, j + 1] as Range).Value2 = Val.ToString();
            }
        }
        Excel.ReferenceStyle = RefStyle;
        Marshal.ReleaseComObject((object)Excel);         
        GC.GetTotalMemory(true); 
    } 
```

是的，有很多方法取决于你要做什么。在您的情况下，最简单的一个是 CSV 文件（可以很好地使用 Excel）。如果您有 DataSource，则无需对 DataGridView 做任何事情

# asp.net-mvc - 具有泛型类型的新 HTMLHelper

> ID：13758836
> 
> 赞同：0
> 
> 时间：2012-12-07T07:35:42.163
> 
> 标签：asp.net-mvc, vb.net, entity-framework, razor

所以我尝试搜索，但我不确定要搜索什么。我正在尝试制作一个采用 MyModel 类型的模型的 HtmlHelper 扩展。但是，视图采用模型类型 List(Of MyModel)。在我的扩展中，它最初是为了只使用 MyModel 而创建的，当 View Model 是 List(of MyModel) 并且我使用

```
For Each Item in Model
    Html.MyHelper(Item)
Next 
```

我得到一个异常'传递到字典中的模型项是类型`'System.Collections.Generic.List`1[MyModel]''，但是这个字典需要一个'MyModel'类型的模型项。

我原来的助手是

```
Public Function FormatTable(Of T As Class)(helper As HtmlHelper, model As T) as OutModel(Of T) 
```

我想要类似的东西

```
Public Function FormatTable(Of List(of T As Class))(helper As HtmlHelper, model As T, 
       tableType As RenderType, Optional columns As Integer = 2) As FormatTable(Of T) 
```

或者我应该在视图中创建一个新的助手以通过？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T17:10:00.480

虽然我不确定如何做`Function MyExtension(of List(Of T as Class))(model as T)`或者是否可能，但我确实解决了我的情况。我需要创建一个不同类类型的 HtmlHelper 并使用不同的模型，然后发现 MvcUtil 就是这样做的。

我遇到了这篇文章：[Stronglytyped html helper with different model for get and post](https://stackoverflow.com/questions/9354019/stronglytyped-html-helper-with-different-model-for-get-and-post)

在我看来，我创建了一个新模型类型的新 htmlhelper 来调用我的 htmlextension

```
For Each Item in Model
    @Html.HtmlHelperFor(Of MyType)().MyExtension(Item)
Next 
```

现在有一张支票

```
If(IsNothing(helper.ViewData.Model)) Then
    helper = helper.HtmlHelperFor(Of T)(model)
End If 
```

这解决了我在视图中循环列表时的问题。

# bash - Bash script runs faster from file than in command line

> ID：13758841
> 
> 赞同：1
> 
> 时间：2012-12-07T07:36:09.120
> 
> 标签：bash, command-line

If I put this bash script

```
for ((i=0; i < 111; i++)); do
    echo $i
done 
```

in a file and run it, it runs faster than if I typed it directly in the command line. Why is this? (I'm running Ubuntu.)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:50:12.803

我执行了这两个示例并使用`time`.

在文件中运行：

```
real    0m0.038s
user    0m0.000s
sys     0m0.004s 
```

从命令行运行：

```
real    0m0.002s
user    0m0.004s
sys     0m0.000s 
```

我能想到的唯一会导致这种差异的事情是，当您执行脚本/文件时，您还需要考虑磁盘访问以及您正在运行的任何文件系统。

# android - Android voice call recording issue.... not working fine with audiosource.voicecall

> ID：13758842
> 
> 赞同：2
> 
> 时间：2012-12-07T07:36:13.393
> 
> 标签：android, android-mediarecorder

i want to make call recorder in android. i have the following code in which when i use **MediaRecorder.AudioSource.VOICE_DOWNLINK | MediaRecorder.AudioSource.VOICE_UPLINK** is recording call but not understandable when played. if use the same code for **AudioSouce.MIC**
then recorded file is understandable. here is my code

```
package com.example.callrecoder;

import java.io.File;
import java.io.IOException;

import android.media.MediaRecorder;
import android.os.Bundle;
import android.os.Environment;
import android.app.Activity;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.view.Menu;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final Button record_call = (Button)this.findViewById(R.id.record);
        final Button stop_recorder = (Button)this.findViewById(R.id.stop);
        final MediaRecorder _recorder = new MediaRecorder();
        record_call.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                //MediaRecorder _recorder = new MediaRecorder();

                    try {
                        String state = android.os.Environment.getExternalStorageState();
                      /*  if (!state.equals(android.os.Environment.MEDIA_MOUNTED)) {
                            throw new IOException("SD Card is not mounted.  It is " + state
                                    + ".");
                        }

                        // make sure the directory we plan to store the recording in exists
                        File directory = new File(Environment.getExternalStorageDirectory().getAbsolutePath()
                                + "/sam.wav").getParentFile();
                        if (!directory.exists() && !directory.mkdirs()) {
                            throw new IOException("Path to file could not be created.");
                        }*/

                        //_recorder.setAudioSource(MediaRecorder.AudioSource.VOICE_CALL ); 
                        _recorder.setAudioSource(MediaRecorder.AudioSource.VOICE_DOWNLINK | MediaRecorder.AudioSource.VOICE_UPLINK );
                        _recorder.setOutputFormat(MediaRecorder.OutputFormat.DEFAULT);
                        _recorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
                        //_recorder.setOutputFile(Environment.getExternalStorageDirectory().getAbsolutePath()
                        //        + "/test.wav");
                        _recorder.setOutputFile("/sdcard/sample.3GPP");
                        _recorder.prepare();
                        _recorder.start();

                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }

        });
        stop_recorder.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                try
                {
                    _recorder.stop();
                    _recorder.reset();
                    _recorder.release();
                }
                catch (Exception e) {
                    // TODO: handle exception
                    e.printStackTrace();
                }

                //_recorder = null;

            }
        });
    }

    public void onClick(DialogInterface dialog, int which) {
        // TODO Auto-generated method stub

    }

} 
```

i want to record calls with AudioSource.downlink and uplink. plz help me to solve this problem. i m testing it on Samsang Galaxay Gio phone.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-02T06:42:00.097

Insted VOICE_CALL 使用 VOICE_RECOGNITION,,,

```
callRecorder = new MediaRecorder();                                         
callRecorder.reset();                                                       
callRecorder.setAudioSamplingRate(8000);                                    
callRecorder.setAudioEncodingBitRate(12200);                                
callRecorder.setAudioSource(MediaRecorder.AudioSource.VOICE_RECOGNITION);   
callRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);         
callRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB); 
```

# java - fusiontables NPE when executing ImportRows

> ID：13758843
> 
> 赞同：3
> 
> 时间：2012-12-07T07:36:17.107
> 
> 标签：java, google-fusion-tables

I´m trying to use Fusiontables.Table.ImportRows to import a csv-file into my fusion-table. But I´m getting a NullPointerException with no additional information when I´m running execute().

I`m using the FusionOAuth2-sample-code and implemented an additional method:

```
private static void importRows(final String tableId){
 try {

  final String text = "Text,Number,Location\n" +
   "company,13,my street 14";

  final ByteArrayContent byteArrayContent = ByteArrayContent.fromString("text/comma-separated-values", text);
  final Fusiontables.Table.ImportRows importRows = fusiontables.table().importRows(tableId, byteArrayContent);
  importRows.setEncoding("UTF-8");
  importRows.execute();
 } catch (IOException e) {
  e.printStackTrace();
 } catch (NullPointerException e) {
  e.printStackTrace();
 }
} 
```

This is the Exception:

```
java.lang.NullPointerException
at java.net.URI$Parser.parse(URI.java:3003)
at java.net.URI.<init>(URI.java:578)
at com.google.api.client.http.GenericUrl.<init>(GenericUrl.java:100)
at com.google.api.client.googleapis.media.MediaHttpUploader.upload(MediaHttpUploader.java:269)
at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:408)
at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:328)
at com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:449)
at com.google.api.services.samples.fusiontables.cmdline.FusionTablesSample.importRows(FusionTablesSample.java:185) 
```

What am I missing?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T20:24:50.130

您是否更改了初始化 fusiontables 对象的方式（com.google.api.services.fusiontables.Fusiontables 之一）？

# ruby - ruby on rails 中的 SQL Like 运算符

> ID：13758844
> 
> 赞同：10
> 
> 时间：2012-12-07T07:36:18.650
> 
> 标签：ruby, ruby-on-rails-3.2

我的任务是选择搜索那些名字以参数值和所选值中的城市开头的学生。如何在 ruby​​ on rails 中设置？我确实喜欢这个，但这不是工作控制器

```
 def list

    studentcount=Student.count()
    puts studentcount
    @studentname = Student.where("name name1 AND city = :cityId1",
    {:name1 => params[:name], :cityId1 => params[:cityId]})

    puts 'studentname'
    puts @studentname.inspect
    @students = Student.limit(params[:jtPageSize]).offset(params[:jtStartIndex]).order(params[:jtSorting])

    @jtable = {'Result' => 'OK','Records' => @students.map(&:attributes), :TotalRecordCount => studentcount}

    respond_to do |format|
      format.html # index.html.erb
      format.json { render :json => @jtable}
    end
  end 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-07T07:47:45.100

尝试：

```
@studentname = Student.where("name LIKE :name1 AND city = :cityId1",
  {:name1 => "#{params[:name]}%", :cityId1 => params[:cityId]}) 
```

这是一个相当肮脏的解决方案，但纯 ARel 无法按照您希望的方式处理这种情况。您可能想尝试[Sqeel](https://github.com/ernie/squeel) gem。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-07T07:43:16.793

尝试

```
@studentname = Student.where("name LIKE ? AND city = ?", "#{params[:name]}%", params[:cityId]) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-07T07:43:20.707

你的方法有错误，应该是这样的

```
 @studentname = Student.where("name = :name1 AND city = :cityId1",
     {:name1 => params[:name], :cityId1 => params[:cityId]}) 
```

# php - 如何将 php 和 node.js 放在一起

> ID：13758854
> 
> 赞同：0
> 
> 时间：2012-12-07T07:37:08.810
> 
> 标签：php, node.js, socket.io

我昨天用端口 8080 测试了 node.js + socket.io

我发现接收数据和发送请求的前端页面必须定义为 HTML

这意味着，我可以将 mvc php 与 node.js 和 socket.io 结合使用

有什么办法吗？

更多如果我将节点服务器定义为 localhost:8080 我不能通过其他地方调用 Web 服务器，例如 localhost

与自然 websocket 不同，我可以在任何地方使用套接字，我只需要将套接字地址定义为 localhost:8080

反正要解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:42:29.720

在端口 8080 上运行节点 在端口 8081 上运行 php。使用 php 运行您的前端 HTML 和 JavaScript，包括前端 socket.io 库并连接到 localhost:8080（节点服务器）

```
// client side code
var socket = io.connect('http://localhost:8080'); 
```

这是未经测试的，我不知道这是否是你想要的，或者它是否会起作用。

# c# - 我可以访问保存在同一网络上的其他计算机上的 sdf（SQL Server Compact 数据库文件）吗？

> ID：13758857
> 
> 赞同：6
> 
> 时间：2012-12-07T07:37:17.510
> 
> 标签：c#, database, sql-server-ce, connection-string

我已经为 SQL Server 这样做了，现在我正在尝试使用 SQL Server Compact。

我无法在提供 ip/server 的 SQL Server Compact 中创建连接字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T09:44:40.023

尝试将数据复制到远程服务器。 [http://msdn.microsoft.com/en-us/library/ms152568(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms152568(v=sql.105).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-15T04:53:28.963

SQL Server Compact 只是不适合在网络中使用。它被设计为仅本地缓存/数据库存储。这是其作者做出的设计决定......如果您需要适用于网络中的多个用户的东西 - 使用真正的 SQL Server（Express 或任何其他版本）（由[marc_s](https://stackoverflow.com/questions/13758857/can-i-access-sdf-sql-server-compact-database-file-kept-at-some-other-computer#comment18911104_13758857)

将 SQL 服务器公开到网络也被认为是一个坏主意 - 您可能希望重新设计您的应用程序以使服务向用户公开有限的功能并调用 DB（在这种情况下，您*可以*使用本地 SQL compact，但仍然考虑其他版本更多适用于一般数据存储）。

如果需要 SQL Compact - 将数据复制到本地文件 - [MSDN:Replicating Data to SQL Server Compact](https://msdn.microsoft.com/en-us/library/ms152568(v=sql.105).aspx)。

有关 Sql Compact 连接字符串的详细信息 -[将 C# 连接到 SQL Server Compact 数据库](https://stackoverflow.com/questions/15157368/connecting-c-sharp-to-sql-server-compact-database)

# ios - 切换分支导致 xcode 中的编译器错误和红色文件名

> ID：13758866
> 
> 赞同：0
> 
> 时间：2012-12-07T07:38:13.133
> 
> 标签：ios, xcode, git, version-control

在一个新分支中，我创建了一个新类并将文件提交到该分支。然后我切换回我的主分支，新的类文件名变成了红色。我还收到了编译器警告：

```
...clang failed with exit code 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:54:39.980

您是否将文件添加到您的主分支？鉴于所有症状，我敢打赌...

但有时新的更改会在分支更改中保留下来，因此项目文件仍然会引用它们。

# c# - 如何使用正则表达式验证器验证文本框？

> ID：13758870
> 
> 赞同：0
> 
> 时间：2012-12-07T07:38:20.293
> 
> 标签：c#, asp.net, .net, regex

我已经在“rubular”中测试了我的正则表达式，它通过了我所有需要的条件。但是当我将它用于 asp 文本框时，它没有通过。

我的代码如下所示

```
<asp:TextBox ID="MobileNumber" runat="server"></asp:TextBox>
    <asp:RegularExpressionValidator ID="MobileNumberValidater" runat="server" ControlToValidate="MobileNumber" ErrorMessage="Please enter valid Numbers"></asp:RegularExpressionValidator> 
```

我的正则表达式如下所示

^((0((?=\d* \d*#)[\d ]{,11})(#\d{,5})?)|(0(?:\d{,10})( #\d{,5})?)|(0((?=\d* \d*$)[\d ]{,11})))$

我正在尝试验证以下字符串：

1).012345 6789#123

2).025698 785#6548

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:59:54.763

[此处](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)的快速检查似乎表明您使用的正则表达式对于 .Net 客户端的格式不正确。我不熟悉 Rubular，但可能是它使用了不同的正则表达式引擎。

我玩过你的正则表达式，但这些电话号码看起来不像我见过的任何东西，所以如果你被卡住了，可能值得在[这里](http://blog.stevenlevithan.com/archives/validate-phone-number)看看。

# linux - 我如何知道哪些 inotify 手表已注册？

> ID：13758877
> 
> 赞同：67
> 
> 时间：2012-12-07T07:38:51.213
> 
> 标签：linux, inotify

我将我的 inotify 监视限制设置为 1024（我认为默认值为 128？）。尽管如此，yeoman、Guard 和 Dropbox 还是经常失败，并告诉我提高我的 inotify 限制。在这样做之前，我想知道是什么消耗了我所有的手表（我的 Dropbox 中的文件很少）。

是否有 /proc 或 /sys 的某些区域，或者我可以运行的某些工具，以找出当前注册的手表？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2014-07-28T11:31:17.830

inotify 文件系统选项

`sysctl fs.inotify`

打开的文件

`lsof | grep inotify | wc -l`

像这样增加值

*   `sysctl -n -w fs.inotify.max_user_watches=16384`
*   `sysctl -n -w fs.inotify.max_user_instances=512`

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2020-03-16T11:47:42.613

我[已经](https://unix.stackexchange.com/a/502812/18594)在@cincodenada 提到的 Unix Stackexchange 上的同一个线程中回答了这个问题，但我认为我可以在这里重新发布我现成的答案，因为没有人真正有有效的东西：

* * *

我有一个[预制脚本](https://github.com/fatso83/dotfiles/blob/master/utils/scripts/inotify-consumers), `inotify-consumers`，它为您列出了最严重的违规者（较新的版本还列出了拥有该进程的用户名，见下文）：

```
$ time inotify-consumers  

   INOTIFY
   WATCHER
    COUNT     PID     CMD
----------------------------------------
    6688    27262  /home/dvlpr/apps/WebStorm-2018.3.4/WebStorm-183.5429.34/bin/fsnotifier64
     411    27581  node /home/dvlpr/dev/kiwi-frontend/node_modules/.bin/webpack --config config/webpack.dev.js
      79     1541  /usr/lib/gnome-settings-daemon/gsd-xsettings
      30     1664  /usr/lib/gvfs/gvfsd-trash --spawner :1.22 /org/gtk/gvfs/exec_spaw/0
      14     1630  /usr/bin/gnome-software --gapplication-service
    ....

    7489  WATCHERS TOTAL COUNT

real    0m0.099s
user    0m0.042s
sys 0m0.062s 
```

`node_modules`在这里，您很快就会明白为什么 8K 观察者的默认限制在开发机器上太少了，因为当遇到包含数千个文件夹的文件夹时，WebStorm 实例会迅速将其最大化。添加一个webpack watcher来保证问题...

尽管在我最初制作它时它比其他替代方案快得多，但 Simon Matter 为重负载的 Big Iron Linux（数百个内核）添加了一些速度增强，极大地加快了它的速度，从十分钟（！）减少到 15秒在他的怪物装备上。

## 如何使用

`inotify-consumers --help` 要在您的计算机上获取它，只需复制脚本的内容并将其放在您的某个位置`$PATH`，例如`/usr/local/bin`. 或者，如果您信任网络上的这个陌生人，您可以避免复制它并通过 http 将其通过管道传输到 bash：

```
$ curl -s https://raw.githubusercontent.com/fatso83/dotfiles/master/utils/scripts/inotify-consumers | bash 

       INOTIFY
       WATCHER
        COUNT     PID USER     COMMAND
    --------------------------------------
        3044   3933 myuser node /usr/local/bin/tsserver
        2965   3941 myuser /usr/local/bin/node /home/myuser/.config/coc/extensions/node_modules/coc-tsserver/bin/tsserverForkStart /hom
         979   3954 myuser /usr/local/bin/node /home/myuser/.config/coc/extensions/node_modules/coc-tsserver/node_modules/typescript/li
           1   7473 myuser /usr/local/bin/node --no-warnings /home/myuser/dev/dotfiles/common-setup/vim/dotvim/plugged/coc.nvim/build/i
           1   3899 myuser /usr/local/bin/node --no-warnings /home/myuser/dev/dotfiles/common-setup/vim/dotvim/plugged/coc.nvim/build/i

        6990  WATCHERS TOTAL COUNT 
```

## 它是如何工作的？

作为参考，脚本的主要内容就是这个（灵感来自[这个答案](https://unix.stackexchange.com/a/501952/18594)）

```
find /proc/*/fd \
    -lname anon_inode:inotify \
    -printf '%hinfo/%f\n' 2>/dev/null \
    \
    | xargs grep -c '^inotify'  \
    | sort -n -t: -k2 -r 
```

## 更改限制

如果您想知道如何增加限制

```
$ inotify-consumers --limits 

Current limits
-------------
fs.inotify.max_user_instances = 128
fs.inotify.max_user_watches = 524288

Changing settings permanently
-----------------------------
echo fs.inotify.max_user_watches=524288 | sudo tee -a /etc/sysctl.conf
sudo sysctl -p # re-read config 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-12-03T15:34:02.523

1.  默认最大`inotify`观看次数为 8192；可以通过写入*/proc/sys/fs/inotify/max_user_watches*来增加它。
    您可以使用`sysctl fs.inotify.max_user_watches`来检查当前值。

2.  用于`tail -f`验证您的操作系统是否超出了`inotify`最大观看限制。
    命令的内部实现`tail -f`使用该`inotify`机制来监视文件更改。
    如果您的`inotify`手表用完了，您很可能会收到此错误：

    > tail：无法使用inotify，恢复轮询：打开的文件太多

3.  要了解哪些`inotify`手表已注册，您可以参考[this](https://unix.stackexchange.com/questions/15509/whos-consuming-my-inotify-resources)和[this](https://bbs.archlinux.org/viewtopic.php?pid=1340049)。我试过了，但没有得到理想的结果。:-(

参考：
[https ://askubuntu.com/questions/154255/how-can-i-tell-if-i-am-out-of-inotify-watches](https://askubuntu.com/questions/154255/how-can-i-tell-if-i-am-out-of-inotify-watches)
[https://unix.stackexchange.com/questions/15509/whos -消费-my-inotify-resources](https://unix.stackexchange.com/questions/15509/whos-consuming-my-inotify-resources)
[https://bbs.archlinux.org/viewtopic.php?pid=1340049](https://bbs.archlinux.org/viewtopic.php?pid=1340049)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-03T15:39:42.833

我认为

```
sudo ls -l /proc/*/fd/* | grep notify 
```

可能有用。您将获得已注册 inotify fd 的 pid 列表。

我不知道如何获得比这更多的信息！高温高压

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-09-07T21:28:42.247

以下终端命令在我的 Ubuntu 16.04 机器上非常适合我：

```
for foo in /proc/\*/fd/*; do readlink -f $foo; done | grep '^/proc/.*inotify' |cut -d/ -f3 |xargs -I '{}' -- ps --no-headers -o '%p %U %a' -p '{}' |uniq -c |sort -n 
```

我的问题是我的大部分 HDD 作为文件夹加载到**Sublime Text**中。在`/opt/sublime_text/plugin_host 8992`和之间`/opt/sublime_text/sublime_text`，Sublime 有 18 个 inotify 实例，而我的其余程序都在 1-3 之间。

由于我在进行 Ionic 移动应用程序开发，因此我通过将大型 Node.js 文件夹“node_modules”添加到 Sublime 设置的忽略列表中，将实例数量减少了 5 个。

```
"folder_exclude_patterns": [".svn", ".git", ".hg", "CVS", "node_modules"] 
```

来源：[https ://github.com/SublimeTextIssues/Core/issues/1195](https://github.com/SublimeTextIssues/Core/issues/1195)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-02-22T23:00:59.843

由于这在 Google 搜索结果中很高，因此我从 Unix/Linux StackExchange 上的一个类似问题中复制粘贴了部分[答案：](https://unix.stackexchange.com/a/426001/48037)

我遇到了这个问题，这些答案都没有给你“每个进程当前使用多少*手表？”的答案。*one-liners 都告诉你打开了多少个*实例*，这只是故事的一部分，trace 的东西只对看到打开的新手表有用。

这将为您提供一个文件，其中包含打开的`inotify`实例列表和它们拥有**的手表数量**，以及产生它们的 pid 和二进制文件，按手表数量按降序排序：

```
sudo lsof | awk '/anon_inode/ { gsub(/[urw]$/,"",$4); print "/proc/"$2"/fdinfo/"$4; }' | while read fdi; do count=$(sudo grep -c inotify $fdi); exe=$(sudo readlink $(dirname $(dirname $fdi))/exe); echo -e $count"\t"$fdi"\t"$exe; done | sort -nr > watches 
```

如果您对那个大杂烩的作用以及原因感兴趣，我在[原始答案](https://unix.stackexchange.com/a/426001/48037)中进行了深入解释。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-03-16T12:33:57.053

基于对[cincodenada](https://stackoverflow.com/a/48938640/4239139)的出色分析，我制作了自己的单线，这对我来说效果更好：

```
find /proc/*/fd/ -type l -lname "anon_inode:inotify" -printf "%hinfo/%f\n" | xargs grep -cE "^inotify" | column -t -s: 
```

它有助于找到所有 inotify 观察者及其观看人数。它不会将进程 ID 转换为进程名称或以任何方式对它们进行排序，但这对我来说不是重点。我只是想找出哪个进程消耗了大部分手表。然后我能够使用它的进程 ID 搜索该进程。

`column`如果您没有安装它，您可以省略最后一个命令。它只是为了使输出看起来更好。

好的，正如您所看到的，@oligofren 提供了一种类似且更少分叉的方法。最好使用他的简单脚本。这是很不错的。我还能够缩小我的单线，因为我不知道这里的`-lname`参数`find`非常方便。

# vb.net - 如何模拟一个类并测试它的功能

> ID：13758879
> 
> 赞同：0
> 
> 时间：2012-12-07T07:38:53.337
> 
> 标签：vb.net, testing, mocking

我有一个有两个函数的类，但我喜欢模拟一个函数并测试另一个函数的功能？

```
public class Alpha
   Function F1() As String
        SendMail()
        return "Sample"
     End function

       '''code to send mail 
        End sub
End class 
```

在这里我想测试 F1() 的功能并想模拟 SendMail()。可能吗？

现在我这样做：

```
 Dim objAlpha As New Mock<Alpha>
       objAlpha.Setup(Function(x) x.SendMail())
       Dim lstrReturnValue As String =objAlpha.Object.F1() 
```

这是正确的方法吗？但我面临问题。请提供一种为此场景编写模拟测试的方法。

# android - Android UI：设计警报对话框

> ID：13758880
> 
> 赞同：3
> 
> 时间：2012-12-07T07:39:02.917
> 
> 标签：android, android-alertdialog

嗨我正在尝试设计如下的警报对话框![在此处输入图像描述](../Images/35d4bc661be82727d03a8da37b2877a6.png)

我做了如下的基本设计：

```
 AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(context);
    alertDialogBuilder.setTitle(R.string.share);
    final EditText message = new EditText(context);
    message.setGravity(Gravity.TOP);
    message.setLines(10);
    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(
        (int) LayoutParams.MATCH_PARENT,
        (int) LayoutParams.MATCH_PARENT); 
```

请给我建议，我怎样才能通过警报对话框或其他方式实现这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T07:53:51.460

是的，您可以像上面一样创建自定义警报对话框。您必须使用***Dialog***类。

您可以像这样使用 Dialog 类

```
// custom dialog
        final Dialog dialog = new Dialog(context);
        dialog.setContentView(R.layout.custom);
        dialog.setTitle("Title...");

        // set the custom dialog components - text, image and button
        TextView text = (TextView) dialog.findViewById(R.id.text);
        text.setText("Android custom dialog example!");
        ImageView image = (ImageView) dialog.findViewById(R.id.image);
        image.setImageResource(R.drawable.ic_launcher);

        Button dialogButton = (Button) dialog.findViewById(R.id.dialogButtonOK);
        // if button is clicked, close the custom dialog
        dialogButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                dialog.dismiss();
            }
        });

        dialog.show(); 
```

有关更多详细信息，请参阅此链接[自定义对话框](http://www.mkyong.com/android/android-custom-dialog-example/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T22:52:53.913

看看我的教程。

[http://www.androidianlabs.com/custom-android-dialogs.html](http://www.androidianlabs.com/custom-android-dialogs.html)

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T07:48:42.707

您需要在 xml 文件中自定义布局，并且需要对其进行扩充。您可以使用类似下面的内容来扩充您的 xml 文件

```
AlertDialog.Builder builder;
AlertDialog alertDialog;
Context mContext;
mContext = YourClassName.this;
LayoutInflater inflater = (LayoutInflater)mContext.getSystemService(LAYOUT_INFLATER_SERVICE);
layout = inflater.inflate(R.layout.customised_dialog_layout,null);
builder = new AlertDialog.Builder(mContext);
builder.setView(layout);
alertDialog = builder.create(); 
alertDialog.show(); 
```

customised_dialog_layout 是所需弹出窗口的自定义布局

# java - Integer.parseInt() 抛出带有 UTF-8 文件的 NumberFormatException

> ID：13758882
> 
> 赞同：5
> 
> 时间：2012-12-07T07:39:09.333
> 
> 标签：java, integer, java.util.scanner

我需要从文件内容中解析整数。

为了测试我的算法，当我从声明的字符串中给出文件的内容时

```
String test = "15 kuruş"; 
```

Integer.parseInt 工作正常。但是当我从 UTF-8 文件中读取 Scanner 类时，它不起作用并给出异常

> java.lang.NumberFormatException：对于输入字符串：“15”

注意：我将字符串拆分为“15”和“kuruş”，因此 parseInt 方法仅将“15”作为参数。

示例代码：

```
 satir = satir.trim();//15 kuruş
    StringTokenizer tokenizer = new StringTokenizer(satir," ");
    System.out.println(tokenizer.countTokens());//2
    String s = tokenizer.nextToken();
    int deger = Integer.parseInt(s);//where the exception was throwed 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T08:13:48.543

您的 UTF-8 文件可能以[BOM](http://en.wikipedia.org/wiki/Byte_order_mark)开头，您必须使用正确的编码读取文件或手动删除它。

因此，当您的 15 不再以 BOM 开头时，`Integer.parseInt()`它将起作用。

# asp.net - 是否有必要处理 IntelliTrace 中显示的异常

> ID：13758884
> 
> 赞同：1
> 
> 时间：2012-12-07T07:39:12.153
> 
> 标签：asp.net, asp.net-mvc-3, visual-studio-2010, exception, intellitrace

今天在 Visual Studio 2010 中检查断点时，我看到在执行应用程序期间抛出了几个异常。

![在此处输入图像描述](../Images/9e6e772ee30ce7109a07711f82c3462f.png)

![在此处输入图像描述](../Images/c863e8abafaef4eaa364f042a49e5a49.png)

但它们都与我的代码无关，并且应用程序可以正常工作。有什么方法可以处理这些异常，是否有必要处理这些异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T07:51:26.777

你不需要太担心这些，因为你已经知道我不会直接影响你的程序。

这些警告/异常大多与运行时、默认目录结构等相关，而它们的定义方式我们无能为力。

假设对于异常，`Culture not supported`请参阅[this](https://stackoverflow.com/questions/868880/culture-name-is-not-supported)以解释为什么会发生

此外，如果您使用一些第三方插件`Resharper`等，您会收到很多代码错误和建议以及一些与程序集相关的问题，这可能会困扰您一段时间，因为您的代码有很多故障，但您又没有太多控制权在它们之上并让它们保持原样无论如何都不会影响主程序。

# iphone - 在iphone编程中第二次或第三次连接到服务器时重放攻击安全错误

> ID：13758888
> 
> 赞同：1
> 
> 时间：2012-12-07T07:39:45.340
> 
> 标签：iphone, ios, security, webserver, replay

在从摘要认证服务器获得响应时，我面临着一个奇怪的重放攻击问题。真正的问题是它适用于应用程序中的所有其他屏幕，但它不适用于仅一个视图控制器。

我对重放攻击的了解是，它发生在请求期间发送的时间戳或其他参数在两个连续请求中重复的情况下。但在我的情况下，我检查了在连续请求期间发送的参数，并且每次都会生成新参数。甚至每个请求的时间戳都在变化。

我有一个视图控制器列表，从中调用 Web 服务以显示要显示的数据。前几个请求没有发生错误，并且只有一个视图控制器发生错误。

错误日志如下所示：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
   <soap:Body>
      <soap:Fault>
         <faultcode xmlns:ns1="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">ns1:InvalidSecurity
         </faultcode>
         <faultstring>An error was discovered processing the &lt;wsse:Security> header (An error happened processing a Username Token "A replay attack has been detected")
         </faultstring>
      </soap:Fault>
   </soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:23:01.283

您可以访问 Web 服务还是只能访问客户端？如果这是一个 CXF Web 服务，它可以使用 nonce.caching 或 timestamp.caching 来检测重放攻击。

“ws-security.enable.timestamp.cache” “ws-security.timestamp.cache.instance”

您使用的是什么 Web 服务器客户端或服务器？

谢谢，约格什

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-01T17:34:40.940

我的问题已通过按照此处的建议创建新的 nonce 条目来解决

[在此处输入链接描述](http://www.cmdbuild.org/forum/forum-in-english/265356743)

# c# - AspxGridView 中的 AspxComboBox

> ID：13758889
> 
> 赞同：0
> 
> 时间：2012-12-07T07:39:48.003
> 
> 标签：c#, asp.net, devexpress, aspxgridview, aspxcombobox

我一直在努力寻找一个简单的例子或指导我的问题。基本上，我有一个数据集。这个表有三列，

*   文档名称（字符串）
*   文档所有者（字符串）
*   权限（整数）

我想将此 DataTable 绑定到 AspxGridView。但是，我希望最后一列绑定到 AspxComboBox 以便：

*   如果 Permission = 1 则将 ComboBox 与项目 A 绑定
*   如果 Permission = 2 则将 ComboBox 与项目 A 和 B 绑定
*   如果 Permission = 3 则将 ComboBox 与项目 A、B 和 C 绑定

我怎样才能做到这一点？我发现的很多示例都在谈论 AspxGridView 处于编辑模式。这里的重点是我实际上并没有编辑网格。我想做的就是对 ComboBox 更改进行回发以执行一些操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T10:02:59.470

只需通过下拉列表的**SelectedValue属性绑定即可。**检查以下示例

```
Aspx
<asp:GridView ID="gvTest" runat="server" AutoGenerateColumns="False" 
    onrowdatabound="gvTest_RowDataBound">
<Columns>
    <asp:TemplateField HeaderText="Serial No."><ItemTemplate><%# Container.DataItemIndex+1 %></ItemTemplate></asp:TemplateField>
    <asp:TemplateField HeaderText="Fruits" ><ItemTemplate><asp:DropDownList runat="server" ID="ddlFruits" SelectedValue='<%# Bind("FruitID") %>'   >
        <asp:ListItem Value="1">Apples</asp:ListItem>
        <asp:ListItem Value="2">Pineapples</asp:ListItem>
        <asp:ListItem Value="3">Banana</asp:ListItem>
        </asp:DropDownList></ItemTemplate> </asp:TemplateField>
</Columns>
</asp:GridView> 
```

C＃

```
protected void Page_Load(object sender, EventArgs e)
    {   
        gvTest.DataSource = GetData();
        gvTest.DataBind();
    }

    private DataTable GetData()
    {
        DataTable dt = new DataTable();
        dt.Columns.Add(new DataColumn("FruitID"));
        for (int i = 0; i < 3; i++)
        {
            DataRow dr=dt.NewRow();
            dr["FruitID"] = i + 1;
            dt.Rows.Add(dr);
        }
        return dt;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T09:51:18.873

网格显示（非编辑）模式下的可编辑组合框：

```
<dx:GridViewDataColumn>
    <DataItemTemplate>
        <dx:ASPxComboBox runat="server" AutoPostBack="True" ...></dx:ASPxComboBox>
    </DataItemTemplate>
</dx:GridViewDataColumn> 
```

[ASPxEdit.AutoPostBack](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxEditorsASPxEdit_AutoPostBacktopic)
[GridViewDataColumn.DataItemTemplate](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxGridViewGridViewDataColumn_DataItemTemplatetopic)

# android - 使用 Jenkins 签署 Android APK

> ID：13758891
> 
> 赞同：0
> 
> 时间：2012-12-07T07:39:51.293
> 
> 标签：android, maven, jenkins

我一直在四处寻找，但看不到如何让詹金斯在构建步骤后签署我的 apk。我正在使用集成到 Jenkins 中的 Appaloosa 来分发我的应用程序，但我需要先让它签名。我看到 Android 中没有后期构建标志 android 目标。我怎样才能做到这一点？

1.  将 jar 符号依赖项添加到我的 pom.xml
2.  在发货前使用 Jenkins 签署我的 apk。

有人可以帮我吗？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:42:32.670

如果您将构建脚本配置为签名（或只是为您的应用创建构建脚本），您只需使用 Jenkins 运行该脚本，它就会对其进行签名。这是最简单的方法。

这 2 个链接将帮助您为您的应用生成 build.xml 文件：[http](http://www.androidengineer.com/2010/06/using-ant-to-automate-building-android.html) ://www.androidengineer.com/2010/06/using-ant-to-automate-building-android.html和[http://developer.android .com/tools/projects/projects-cmdline.html](http://developer.android.com/tools/projects/projects-cmdline.html)。

# quickfix - 将自定义字段添加到 QuickFIX 数据字典

> ID：13758896
> 
> 赞同：0
> 
> 时间：2012-12-07T07:40:09.437
> 
> 标签：quickfix

我在 FIX44.xml 字典的“字段”部分定义了一个自定义字段。然后，我将该字段添加到 NewOrderSingle 消息中。当我启动我的应用程序时，我收到此错误： *配置失败：E:\fix\validation\FIX44.xml：配置失败：字段 1089 未在字段部分定义。*

我想念什么吗？

# android - SQlite Group by 子句

> ID：13758898
> 
> 赞同：1
> 
> 时间：2012-12-07T07:40:29.840
> 
> 标签：android, sqlite

我在 android 中使用 sqlite 在 group by 子句中遇到问题。它只显示最后一条记录

这是我的数据库功能：

```
public List<Expense> getAllExpenses() {
    List<Expense> ExpenseList = new ArrayList<Expense>();
    // Select All Query

    String selectQuery = "SELECT  * FROM   "+ ExpenseTable+" GROUP BY "+colCategoryId+""  ;

    SQLiteDatabase db = this.getReadableDatabase();
    Cursor cursor = db.rawQuery(selectQuery, null);

    // looping through all rows and adding to ist
    if (cursor.moveToFirst()) {
        do {
                Expense expense = new Expense();
                expense.setItem_Desrp(cursor.getString(1));
                expense.setPrice(Integer.parseInt((cursor.getString(2))));
                expense.setDate(cursor.getString(3));
                expense.setMode(cursor.getString(4));
                expense.setCate_Id(Integer.parseInt(cursor.getString(5)));
            // Adding expense to list
            ExpenseList.add(expense);
        } while (cursor.moveToNext());
    }
    return ExpenseList;
} 
```

# python-3.x - 蟒蛇研究

> ID：13758903
> 
> 赞同：0
> 
> 时间：2012-12-07T07:40:56.117
> 
> 标签：python-3.x, python-2.7

```
line=a name="12123" adfii 41:05:992 wp=wp2 这是速率​​：受控不是最大；time=300 系统循环： process=16.0 sharesize=6b2k 。

```

在等号之前和之后重新搜索行的最佳方法是什么。例如，我想留下 name=12123 time=300 process=16.0 sharesize=6b2k。然后放入字典

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T12:39:35.730

尝试以下操作：

```
#!python3

import re

line = 'line=a name="12123" adfii  41:05:992 wp=wp2 this is the rate: controlled not max; time=300 loops for the system: process=16.0 sharesize=6b2k'

pattern = r'(\w+)=(\w+|".+?")'

lst = re.findall(pattern, line)
print(lst)

d = dict(lst)
print(d)
print(d['process']) 
```

它在我的屏幕上打印以下内容：

```
c:\tmp\___python\njau_ndirangu\so13758903>py a.py
[('line', 'a'), ('name', '"12123"'), ('wp', 'wp2'), ('time', '300'), ('process', '16'), ('sharesize', '6b2k')]
{'line': 'a', 'sharesize': '6b2k', 'time': '300', 'name': '"12123"', 'process': '16', 'wp': 'wp2'}
16 
```

当然也可以直接写：

```
d = dict(re.findall(r'(\w+)=(\w+|".+?")', line)) 
```

返回匹配列表，`.findall`其中一个匹配表示为以子组为元素的元组（模式内括号中的内容）。

但要小心正则表达式。你很容易出错。

# windows-phone-7 - 如何让全景控件不显示模型类名

> ID：13758906
> 
> 赞同：0
> 
> 时间：2012-12-07T07:41:08.973
> 
> 标签：windows-phone-7, templates, model, header, panorama-control

我将全景控件绑定到我的视图模型（类型`ObservableCollection`）。

我用`ItemTemplate`. 我不能使用`HeaderTemplate`，因为它使过渡不是很顺畅（不知道为什么！！）这是我的 XAML

```
<controls:Panorama Name="panorama" >
                        <controls:Panorama.ItemTemplate>
                            <DataTemplate>
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="210"/>
                                        </Grid.RowDefinitions>
                                        <TextBlock Text="{Binding Name}"/>
                                    </Grid>
                            </DataTemplate>
                        </controls:Panorama.ItemTemplate>
</controls:Panorama> 
```

但是，在运行时，每个全景项目都会**显示模型类名称**。如果我使用`HeaderTemplate`，它不会显示。如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T09:09:55.863

如果它绑定在 ViewModel 的 ObservableCollection 属性上，则缺少某些东西。你的全景控件应该有一个`ItemsSource="{Binding MyObservableCollection}">`

如果您的 itemSource 在代码中设置，最快的方法是设置负边距以隐藏您的标题...

```
<controls:Panorama Margin="0,-20,0,0">
</controls:Panorama> 
```

或者，如果您想要一些更清洁的东西，您可以修改全景样式并抑制标题...这是[在 Windows phone 7 应用程序上创建 Pivot 页脚，](https://stackoverflow.com/questions/8061965/creating-pivot-footers-on-windows-phone-7-application/8062966#8062966)它与全景控制的工作方式相同

# umbraco - ucommerce umbraco 中的支付集成

> ID：13758907
> 
> 赞同：0
> 
> 时间：2012-12-07T07:41:10.373
> 
> 标签：umbraco, umbraco-ucommerce

你好，我已经从大道服装的包文件中创建了一个演示剃须刀商店，但是当我在这家商店中使用支付网关时，paypal 工作正常，但是当我创建 sage pay 和 authorize.net 并选择管道结帐时，订单没有完成，它显示加载 MacroEngine 脚本时出错（文件：uCommerce/Preview.cshtml），所以我只想问是否缺少某些东西，或者对于 authorize.net，我们有信用卡支付选项但没有显示在我们的商店中，并且在未完成订单的情况下抛出此错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:06:53.957

确保您拥有最新版本的 uCommerce 3 和 Razor Store。Razor 商店的更新于 2012 年 11 月 19 日发布，以解决与您描述的问题类似的问题。

[在https://bitbucket.org/uCommerce/ucommerce-razor-store/downloads](https://bitbucket.org/uCommerce/ucommerce-razor-store/downloads)从 Bitbucket 获取最新版本

# erlang - 在 Erlang 中具有预定义迭代次数的消息循环

> ID：13758909
> 
> 赞同：0
> 
> 时间：2012-12-07T07:41:23.700
> 
> 标签：erlang, distributed, distributed-computing

假设我有 3 个进程，每个进程都已注册，以便我可以轻松地发送和接收消息。

如何创建一个循环运行，例如，10 次迭代并在进程 1 和 3 之间向前和向后发送消息，通过进程 2？意思是，我希望进程 1 向进程 2 发送一条消息，它应该将它发送到进程 3，反之亦然。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-07T10:44:25.247

这是一个小模块来做你正在寻找的东西。但是当我看到您正在寻找很多答案时，我猜您是 erlang 的新手。所以我认为你应该看书或在线书籍来开始你的学习曲线。我的首选是： http: [//learnyousomeerlang.com/content](http://learnyousomeerlang.com/content) 作者在帮助初学者开始使用 Erlang 方面做得很好。当你对 erlang 越来越熟悉时，官方文档也很有趣（尽管它对开始没有帮助！）。

```
-module(ping3).
-compile(export_all).

% Launch 3 loops, init phase
start() ->
    P1 = spawn(?MODULE,loop,[]),
    P2 = spawn(?MODULE,loop,[]),
    P3 = spawn(?MODULE,loop,[]),
    {P1,P2,P3}.

% user interface
start_ring(P1,P2,P3,Loop) ->
    P1 ! {start,P2,P3,Loop}.

% kind of server, the messages content the informations about what to do, and all needed parameters
% it implements your protocol
loop() ->
    receive
        {start,By,To,Loop} ->
            Ref = make_ref(),
            io:format("start ring for ~p iterations of ~p~n",[Loop,Ref]),
            By ! {go_via,Ref,self(),By,To,Loop},
            loop();
        {go_via,Ref,From,By,To,Loop} ->
            To ! {go,Ref,From,By,To,Loop},
            loop();
        {go,Ref,From,By,To,Loop} ->
            By ! {back_via,Ref,From,By,To,Loop},
            loop();
        {back_via,Ref,From,By,To,Loop} ->
            To ! {back,Ref,From,By,To,Loop},
            loop();
        {back,Ref,_,_,_,0} ->
            io:format("end of ring of ~p~n",[Ref]),
            loop();
        {back,Ref,From,By,To,Loop} ->
            io:format("continue ring for ~p iterations of ~p~n",[NewLoop=Loop-1,Ref]),
            By ! {go_via,Ref,From,By,To,NewLoop},
            loop();
        stop -> bye
    end. 
```

在外壳中：

```
(exec@WXFRB1824L)48> {P1,P2,P3} = ping3:start().
{<0.93.0>,<0.94.0>,<0.95.0>}
(exec@WXFRB1824L)49> ping3:start_ring(P1,P2,P3,20),ping3:start_ring(P2,P1,P3,15).     
start ring for 20 iterations of #Ref<0.0.1.91077>
start ring for 15 iterations of #Ref<0.0.1.91080>
{start,<0.93.0>,<0.95.0>,15}
continue ring for 19 iterations of #Ref<0.0.1.91077>
continue ring for 14 iterations of #Ref<0.0.1.91080>
continue ring for 18 iterations of #Ref<0.0.1.91077>
continue ring for 13 iterations of #Ref<0.0.1.91080>
continue ring for 17 iterations of #Ref<0.0.1.91077>
continue ring for 12 iterations of #Ref<0.0.1.91080>
continue ring for 16 iterations of #Ref<0.0.1.91077>
continue ring for 11 iterations of #Ref<0.0.1.91080>
continue ring for 15 iterations of #Ref<0.0.1.91077>
continue ring for 10 iterations of #Ref<0.0.1.91080>
continue ring for 14 iterations of #Ref<0.0.1.91077>
continue ring for 9 iterations of #Ref<0.0.1.91080>
continue ring for 13 iterations of #Ref<0.0.1.91077>
continue ring for 8 iterations of #Ref<0.0.1.91080>
continue ring for 7 iterations of #Ref<0.0.1.91080>
continue ring for 6 iterations of #Ref<0.0.1.91080>
continue ring for 5 iterations of #Ref<0.0.1.91080>
continue ring for 4 iterations of #Ref<0.0.1.91080>
continue ring for 3 iterations of #Ref<0.0.1.91080>
continue ring for 2 iterations of #Ref<0.0.1.91080>
continue ring for 1 iterations of #Ref<0.0.1.91080>
continue ring for 0 iterations of #Ref<0.0.1.91080>
end of ring of #Ref<0.0.1.91080>
continue ring for 12 iterations of #Ref<0.0.1.91077>
continue ring for 11 iterations of #Ref<0.0.1.91077>
continue ring for 10 iterations of #Ref<0.0.1.91077>
continue ring for 9 iterations of #Ref<0.0.1.91077>
continue ring for 8 iterations of #Ref<0.0.1.91077>
continue ring for 7 iterations of #Ref<0.0.1.91077>
continue ring for 6 iterations of #Ref<0.0.1.91077>
continue ring for 5 iterations of #Ref<0.0.1.91077>
continue ring for 4 iterations of #Ref<0.0.1.91077>
continue ring for 3 iterations of #Ref<0.0.1.91077>
continue ring for 2 iterations of #Ref<0.0.1.91077>
continue ring for 1 iterations of #Ref<0.0.1.91077>
continue ring for 0 iterations of #Ref<0.0.1.91077>
end of ring of #Ref<0.0.1.91077>
(exec@WXFRB1824L)50> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T09:50:02.293

您可以编写一个函数来执行您告诉它的任何`N`时间：

```
times(0, Fun) -> ok;
times(N, Fun) -> Fun(), times(N - 1, Fun). 
```

然后在进程1的代码中调用它：

```
times(10, fun() -> process2 ! SomeMessage end) 
```

进程 2 的代码需要知道如何处理这个消息，例如向进程 3 发送一些东西。

# web - 苹果制造的网站制造商

> ID：13758912
> 
> 赞同：-1
> 
> 时间：2012-12-07T07:41:37.117
> 
> 标签：web, ide

是否有任何苹果制造的开发者工具或消费者软件可以从头到尾制作网站？如果是这样，你能给我一个下载链接和如何下载和安装的说明吗？我喜欢苹果的软件，但我对 Web 开发比移动应用程序开发更感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:33:37.110

Apple 有[iWeb](http://www.apple.com/support/iweb/)，您可以免费下载。

**但这**不是一个完整的网络开发者软件。它不允许您以适当的方式编码或优化网站。

您可以使用主题并大量使用图像，但我只会将它推荐给对 Web 开发一无所知或不想处理比它更复杂的事情的人。

# google-apps-script - 通过 Apps 脚本以纯文本格式格式化 Google 表格单元格

> ID：13758913
> 
> 赞同：29
> 
> 时间：2012-12-07T07:41:36.430
> 
> 标签：google-apps-script, google-sheets, format, plaintext

使用 Google Apps 脚本，我想将 Google 表格单元格的格式设置为纯文本。

我想这样做的原因是因为我想以美国日期格式 (MM/DD/YYYY) 显示日期。*[我们可以假设 OP 的 Google 帐户中的语言环境设置为使用 DD/MM/YYYY，这是一种更常见的日期格式。——编者。]*

我创建这样的字符串：

```
var thisDate = Utilities.formatDate (new Date (), SpreadsheetApp.getActiveSpreadsheet (). getSpreadsheetTimeZone (), "MM / d / yyyy"); 
```

...返回美国格式的日期*06/13/2012*，这就是我想要的。但是，当我将单元格的值设置为该字符串时：

```
sheet.getRange (1, n). setValue (thisDate); 
```

...日期根据我的语言环境*13/06/2012*格式化为单元格，而不是美国格式。

以下操作也失败了，因为日期以标准格式返回，而不是美国格式：

```
sheet.getRange (1, n). getValue () == "06/13/2012" 
```

当单元格被格式化为纯文本而不是日期时，一切正常。

所以，我的问题是，如何使用 JavaScript 格式化单元格。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-10-23T14:57:01.657

另一个答案，在javascript中将格式设置为“纯文本”，不起作用。但是，这样做：

```
sheet.getRange(1,n).setNumberFormat('@STRING@'); 
```

所以以编程方式格式化文本的神奇价值是'@STRING@'！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-06-23T23:34:54.067

Christian good answer的补充：我注意到，如果您的目标单元格已经（手动）设置为文本格式，则设置一个`range.setValue()` 可能不会被解释为文本（如日期或数字）的值将会改变自动数字格式。所以好的解决方案，如果你绝对想保持文本格式是

> range.setValue("01293849847").numberFormat("@");

并不是

> range.numberFormat("@").setValue("01293849847");

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-07-07T09:32:47.483

*另一种强制将值保存为纯文本的方法：*

前加引号：**`'`**. 这对显示的值没有影响，并且通过读回值，不包括引号。

```
let dateStr = '07-07-20017';
sheet.getRange(x, y).setValue("'" + dateStr);

let backStr = sheet.getRange(x, y).getValue();
assert(dateStr === backStr); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-06T07:46:08.293

不幸的是，计划的文本不合适。一旦单元格获得日期之类的内容，只需格式化单元格即可。找到了一种不创建日期的方法）

```
var thisDate1 = Utilities.formatDate (new Date (), SpreadsheetApp.getActiveSpreadsheet (). getSpreadsheetTimeZone (), "MM//d//yyyy"); 
```

抱歉这么晚才回复。所有的手都没有伸到。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-25T09:39:46.683

我像下面那样做了，它按我的预期工作。我的 B 列显示正确的零填充 3 位数字（例如，004），我的 C 列显示正确的零填充 10 位数字（例如，0060000001）作为文本。我将它转换为 Excel 的文件下载为带有填充零的文本。我认为它也可以将日期作为文本来解决问题。

winSS.getRange("US!B2:B").setNumberFormat("000").setNumberFormat("@"); winSS.getRange("US!C2:C").setNumberFormat("0000000000").setNumberFormat("@");

# git - 如何设置 magit 提交作者？

> ID：13758914
> 
> 赞同：4
> 
> 时间：2012-12-07T07:41:38.957
> 
> 标签：git

我正在使用 magit 进行 git push，它失败并显示以下错误消息：远程：错误：提交者电子邮件地址 XXXX 远程：错误：与您的用户帐户不匹配。

所以我必须通过 Git 提交，为什么 magit 不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T08:25:35.283

“添加一个 HOME 环境变量并指定与 .gitconfig 目录相同的目录”解决了这个问题。

这是因为 magit 在 HOME 目录中找不到 .gitconfig 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-24T11:08:31.613

请谨慎使用@Björn Lindqvist 的上述（或以下）答案。仅当您知道要做什么时才这样做，否则它可能会破坏您的环境变量。只是一个警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T11:28:34.260

添加`.emacs`它以使其工作：

```
(when (string-equal system-type "windows-nt")
  (setenv "HOME" (concat (getenv "HOMEDRIVE") (getenv "HOMEPATH")))) 
```

很久以后...**不要使用此代码！**它会混淆 Emacs 并使其无法找到正确的`~/.emacs`文件。唯一正确的方法是为`HOME`用户设置环境变量。

# android - MultiAutoTextView 的自定义适配器

> ID：13758919
> 
> 赞同：1
> 
> 时间：2012-12-07T07:42:02.913
> 
> 标签：android, filter, custom-adapter

我已经为我的 MultiAutoCompleteTextView 实现了一个自定义适配器。它只是按照我想要的方式进行过滤，但结果没有在我过滤时显示。我认为与 publishResult(..) 方法有关，但我无法弄清楚。

```
public class customConAdapter<String> extends ArrayAdapter implements Filterable {

private Filter filter;
List<String> sublist=new ArrayList<String>();
List<String> conlist = new ArrayList<String>();
public customConAdapter(Context context, 
        int textViewResourceId, List<String> conlist) {
    super(context,  textViewResourceId, conlist);
    this.conlist = conlist;
    this.sublist = conlist;
    // TODO Auto-generated constructor stub
}

public Filter getFilter() {
    if (filter == null){
      filter  = new myFilter();
    }
    return filter;
  }

private class myFilter extends Filter
{

    @Override
    protected FilterResults performFiltering(CharSequence constraint)
    {
        Log.i("in perfrom filtering",constraint.toString());
        FilterResults results = new FilterResults();
      /*  if ((constraint == null) || (constraint.length() == 0))
        {

                ArrayList<String> list = new ArrayList<String>();
                results.values = list;
                results.count = list.size();

        }
        else*/

           String constr =  (String) constraint.toString();
            final List<String> newItems = new ArrayList<String>();
            for (String temp : conlist)
            {
                if ( ((java.lang.String) temp).toLowerCase().contains(constraint))
                {   Log.i("the item of list that contains the constraint is"    ,(java.lang.String)temp);
                    newItems.add(temp);
                }
            }
            results.values = newItems;
            results.count = newItems.size();

            publishResults(constraint,results);

        return results;
    }

    @Override
    protected void publishResults(CharSequence constraint,
            FilterResults results)
    {
        if (results.count > 0)
        {
            sublist=(ArrayList<String>) results.values;
            notifyDataSetChanged();
        }
        else
        {
            notifyDataSetInvalidated();
        }
    }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:04:23.247

替换此行

```
 if ( ((java.lang.String) temp).toLowerCase().contains(constraint)) 
```

有了这个

```
 if (temp.toLowerCase().contains(constr)) 
```

# java - 如何避免 CHKJ3010W：欢迎文件不能以 / 开头或结尾

> ID：13758921
> 
> 赞同：2
> 
> 时间：2012-12-07T07:42:20.720
> 
> 标签：java, jsp, jakarta-ee, web-applications, servlets

我的欢迎文件列表如下所示：

```
<welcome-file-list>
    <welcome-file>/WEB-INF/jsp/index.jsp</welcome-file>
</welcome-file-list> 
```

这会在 Eclipse 中引发以下警告：

```
CHKJ3010W: Welcome Files cannot begin or end with a /.  in web.xml 
```

如果我们删除 WEB-INF 前面的 /，则该页面在 JBoss 中无法正确提供。如果我们添加 / 我们会收到上述警告。

如何避免这个警告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T11:30:02.517

您应该指定可公开访问的文件。看[http://wiki.metawerx.net/wiki/Web.xml.WelcomeFileList](http://wiki.metawerx.net/wiki/Web.xml.WelcomeFileList)

创建公共`index.jsp`，其中将包括您的数据`/WEB-INF/jsp/index.jsp`

# html - HTML CSS 文本不会居中

> ID：13758927
> 
> 赞同：3
> 
> 时间：2012-12-07T07:42:34.420
> 
> 标签：html, css

我正在尝试集中我的导航面板，但是并不高兴:-(

请看下面的代码：

**HTML：**

```
<nav id="topnav" class="clear2">  

<ul>
  <li <?php if ($a==1) {echo "class='active'";}?> ><a href="index.php">HOME</a></li> 
  <li class="separate">|</li> 
  <li <?php if ($a==2) {echo "class='active'";}?> ><a href="Services.php">SERVICES</a></li> 
  <li class="separate">|</li>  
  <li <?php if ($a==3) {echo "class='active'";}?> ><a href="AboutUs.php">ABOUT US</a></li>
  <li class="separate">|</li>  
  <li <?php if ($a==4) {echo "class='active'";}?> ><a href="Testimonials.php">TESTIMONIALS</a></li>
  <li class="separate">|</li>  
  <li <?php if ($a==5) {echo "class='active'";}?> ><a href="Press.php">PRESS</a></li>
  <li class="separate">|</li> 
  <!--<li><a href="#">DropDown</a>
    <ul>
      <li><a href="#">Link 1</a></li>
      <li><a href="#">Link 2</a></li>
      <li><a href="#">Link 3</a></li>
    </ul>
  </li>-->
  <li <?php if ($a==6) {echo "class='active'";}?> ><a href="Charity.php">CHARITY INVOLVMENT</a></li>
  <li class="separate">|</li>  
  <li <?php if ($a==7) {echo "class='active'";}?> ><a href="Books.php">BOOKS</a></li>
  <li class="separate">|</li>  
  <li <?php if ($a==8) {echo "class='active'";}?> ><a href="ContactUs.php">CONTACT</a></li>
</ul> 
```

**CSS：**

```
#topnav{ display:block; height:23px; padding-top:12px; 0; font-size:11px;  }
#topnav li{float:left; margin-right:15px; text-transform:uppercase;}
#topnav ul{display: inline-block; padding-left:50px; margin-left:auto; margin-right:auto;}
#topnav .separate {float:left; margin-right:15px; text-transform:uppercase; font-size:9.5px; padding-top:1px; }
#topnav li li{margin-left:0;}
#topnav li a:link, #topnav li a:visited, #topnav li a:hover{display:block; margin:0; padding:0; color:#FFFFFF;}
#topnav ul ul li a:link, #topnav ul ul li a:visited{border:none;}
#topnav li a:hover, #topnav li.active a{color:#93DBF3;}
#topnav li li a:link, #topnav li li a:visited{width:150px; float:none; margin:0; padding:0px 0px; color:#666666; background-color:#F9F9F9; border:none;}
#topnav li li a:hover{color:#FF9900; background-color:#F9F9F9;}
#topnav ul ul{z-index:9999; position:absolute; left:-999em; height:auto; width:170px; padding:0px 0 0 0; border-bottom:1px solid #666666; background-color:#b0e0e6;}
#topnav ul ul a{width:140px;}
#topnav li:hover ul{left:auto;}
#topnav li:hover{position:static;}
#topnav li.last{margin-right:0;} 
```

该网站可以在这里找到：http: [//helpyourselfassociates.com/NEW/index.php](http://helpyourselfassociates.com/NEW/index.php)

关于如何使文本居中的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:50:58.310

`#topnav` `<ul>`您是否要使（您正在使用）居中`margin: auto`？

如果`#topnav`' 的宽度大于 的宽度`<ul>`（否则您无法将其居中），则需要将宽度设置为`<ul>`（以使自动边距起作用）：

```
#topnav ul {
    display: inline-block;
    padding-left: 50px; 
    width: ;
    margin: 0 auto;
} 
```

或者：

```
#topnav {
    text-align: center;
} 
```

并修复`padding-top:12px; 0;`：

```
#topnav{ display:block; height:23px; padding-top:12px; 0; font-size:11px;  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:00:10.843

也可以工作（不知道宽度）

```
#topnav ul{text-align:center;background:none;}
 #topnav ul li{float:none;display:inline-block;}
 #topnav ul li.separate{float:none;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T08:19:11.100

问题是您浮动（`float: left`）列表元素，因此没有居中。另一方面，你有`display: inline-block`ul，这应该适用于`#topnav li`.

### 用这个替换你的CSS：

```
#topnav{ display:block; height:23px; padding-top:12px; 0; font-size:11px;  }
#topnav li{ display: inline-block; margin-right:15px; text-transform:uppercase;}
#topnav ul{display: inline-block; padding-left:50px; margin-left:auto; margin-right:auto;}
#topnav .separate {margin-right:15px; text-transform:uppercase; font-size:9.5px; padding-top:1px; }
#topnav li li{margin-left:0;}
#topnav li a:link, #topnav li a:visited, #topnav li a:hover{display:block; margin:0; padding:0; color:#FFFFFF;}
#topnav ul ul li a:link, #topnav ul ul li a:visited{border:none;}
#topnav li a:hover, #topnav li.active a{color:#93DBF3;}
#topnav li li a:link, #topnav li li a:visited{width:150px; float:none; margin:0; padding:0px 0px; color:#666666; background-color:#F9F9F9; border:none;}
#topnav li li a:hover{color:#FF9900; background-color:#F9F9F9;}
#topnav ul ul{z-index:9999; position:absolute; left:-999em; height:auto; width:170px; padding:0px 0 0 0; border-bottom:1px solid #666666;}
#topnav ul ul a{width:140px;}
#topnav li:hover ul{left:auto;}
#topnav li:hover{position:static;}
#topnav li.last{margin-right:0;} 
```

**旁白：**您可以改进您的 CSS 并稍微清理代码，也避免使用`<li class="separate">|</li>`、尝试类似`li:after{content: " | "; }`或使用背景图片

# javascript - jQuery 延迟和对话框

> ID：13758928
> 
> 赞同：13
> 
> 时间：2012-12-07T07:42:34.243
> 
> 标签：javascript, jquery, jquery-ui

```
function ValidateField(){
var bAllow= true;

    //some checking here

if (bAllow == true && apl.val().trim() == "")
{ 
    showDialog(); 
    showDialog().done(function() {
        return true; // wanna return true, but not success
    }).fail(function() {
        return false; //wanna return false, but not success
    });
    return false; //stop it to execute to next line
}
return bAllow; //success return }

function showDialog(){
var def = $.Deferred();
var modPop = '<div id="diaCom" title="Information?"><p>something something</p></div>';
$("#diaCom").remove();
$(modPop).appendTo('body');
$("#diaCom").dialog({
    resizable: false,
    draggable: false,
    height:150,
    width:300,
    modal: true,
    buttons: {
        "Ok": function() {  
            def.resolve();
            $(this).dialog("close");

        },
        "Cancel": function() {
            def.reject();
            $(this).dialog("close");

        }
    }
});

return def.promise();
}
//on click
if (validateField() == true){
        //do something
 }else{
        //do something
  } 
```

大家好，有机会返还价值吗？我希望通过 showDialog().done() 返回 true 和 false 并且 validatefield() 函数失败，但它不能按我想要的那样工作，我不能分配给 bAllow 因为我已经有一个 return false 持有执行下一行的对话框，有什么想法吗？或者这样做是正确的？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-08-27T19:36:29.343

嗯，这可以工作。

您的对话框功能... showDialog()

```
function confirmation(question) {
    var defer = $.Deferred();
    $('<div></div>')
        .html(question)
        .dialog({
            autoOpen: true,
            modal: true,
            title: 'Confirmation',
            buttons: {
                "Yes": function () {
                    defer.resolve(true); //answer
                    $(this).dialog("close");
                },
                "No": function () {
                    defer.resolve(false); //answer
                    $(this).dialog("close");
                }
            },
            close: function () {
                $(this).remove(); //removes this dialog div from DOM
            }
        });
    return defer.promise();
} 
```

然后是您使用该功能的代码...

```
function onclick(){
    var question = "Do you want to start a war?";
    confirmation(question).then(function (answer) {
        if (answer) {
            alert("this is obviously " + answer);//TRUE
        } else {
            alert("and then there is " + answer);//FALSE
        }
    });
} 
```

对于大多数人来说，这似乎是错误的。但是总有一些情况，你不能没有从 JQuery 对话框返回。

这将基本上模仿 confirm() 函数。但是有丑陋的代码和漂亮的确认框外观:)

我希望这可以帮助一些人。

* * *

**

# 编辑：引导 3 解决方案

**

* * *

我现在正在使用 [NakuPanda's][1] 引导库，效果非常好。基本上与 JQueryUI 相同，但在 Bootstrap UI 中。

```
function bsConfirm(question) {
    var defer = $.Deferred();
    BootstrapDialog.show({
        type: BootstrapDialog.TYPE_PRIMARY,
        title: 'Confirmation',
        message: question,
        closeByBackdrop: false,
        closeByKeyboard: false,
        draggable: true,
        buttons: [{
            label: 'Yes',
            action: function (dialog) {
                defer.resolve(true);
                dialog.close();
            }
        }, {
            label: 'No',
            action: function (dialog) {
                defer.resolve(false);
                dialog.close();
            }
        }],
        close: function (dialog) {
            dialog.remove();
        }
    });
    return defer.promise();
}
function bsAlert(error, message) {
    BootstrapDialog.show({
        type: error ? BootstrapDialog.TYPE_DANGER : BootstrapDialog.TYPE_SUCCESS,
        title: error ? "Error" : "Success",
        message: message,
        closeByBackdrop: false,
        closeByKeyboard: false,
        draggable: true,
        buttons: [{
            label: 'OK',
            action: function (d) {
                d.close();
            }
        }]
    });
} 
```

并使用它（几乎相同的方式）

```
bsConfirm("Are you sure Bootstrap is what you wanted?").then(function (answer) {
    if (answer) {
        bsAlert("Well done! You have made the right choice");
    } else {
        bsAlert("I don't like you!");
    }
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-15T21:29:30.760

我创建了[这个 JSFIDDLE](http://jsfiddle.net/yvm32bLm/1/)并更改了布尔解析，因为它正在爆炸。谢谢，皮埃尔！这为我节省了很多时间。

javascript:

```
function confirmation(question) {
var defer = $.Deferred();
$('<div></div>')
    .html(question)
    .dialog({
        autoOpen: true,
        modal: true,
        title: 'Confirmation',
        buttons: {
            "Yes": function () {
                defer.resolve("true");//this text 'true' can be anything. But for this usage, it should be true or false.
                $(this).dialog("close");
            },
            "No": function () {
                defer.resolve("false");//this text 'false' can be anything. But for this usage, it should be true or false.
                $(this).dialog("close");
            }
        },
        close: function () {
            //$(this).remove();
            $(this).dialog('destroy').remove()
        }
    });
return defer.promise();
};

function onclick(){
var question = "Do you want to start a war?";
confirmation(question).then(function (answer) {
    console.log(answer);
    var ansbool = (String(answer) == "true");
    if(ansbool){
        alert("this is obviously " + ansbool);//TRUE
    } else {
        alert("and then there is " + ansbool);//FALSE
    }
});
}

$("#item").on('click', onclick); 
```

HTML：

```
<button id="item">Hello, click me.</button> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-02T15:16:12.417

为什么不使用reject 方法代替resolve("false")。然后，您将能够将对象作为参数传递。假设您有多个输入字段集，每个字段集都有一个删除按钮：

```
 function confirmation(question,obj) {
    var defer = $.Deferred();
    $('<div></div>')
        .html(question)
        .dialog({
            autoOpen: true,
            modal: true,
            title: 'Confirmation',
            buttons: {
                "Oui": function () {
                    defer.resolve(obj);// pass the object to delete to the defer object
                    $(this).dialog("close");
                },
                "Non": function () {
                    defer.reject();//reject, no need to pass the object
                    $(this).dialog("close");
                }
            },
            close: function () {

                $(this).dialog('destroy').remove()
            }
        });
    return defer.promise();
}

$(document).on("click", ".btn-suppr",function (){// all delete buttons having a class btn-suppr

var question = "Are you sure to delete this fieldset ?";
confirmation(question,$(this)).then(function (obj) {

                                obj.parent('fieldset').remove(); // remove the parent fieldset of the delete button if confirmed

                            });
                        }); 
```

# java - Android：更改视图的 z 顺序

> ID：13758934
> 
> 赞同：5
> 
> 时间：2012-12-07T07:42:57.943
> 
> 标签：java, android

我的 xml 中有很多视图，现在我想在代码中***更改一个视图的 z 顺序***，以便将其带到其他视图的前面，而**不是所有**其他视图的前面。

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-07T08:04:41.700

唯一想到的是，`.bringToFront()`但在您的情况下，您必须为多个视图执行此操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-07T08:15:37.673

这可以帮助

```
layout.bringChildToFront(view); 
```

这里

```
layout = your_linear_layout AND 
view = the_view_you_wanna_bring_to_front 
```

希望它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T08:18:28.623

我认为，如果您将其从其父级中删除并重新添加，它将位于前面。该父母中的所有其他孩子。如果这符合您希望它在某些事物而不是其他事物前面的方式，那么这应该会有所帮助。

# c++ - 如何在文件末尾的特定地址写入

> ID：13758935
> 
> 赞同：0
> 
> 时间：2012-12-07T07:42:59.067
> 
> 标签：c++, visual-studio-2010, file-io, stl, fstream

我正在处理一个`fstream`对象，我想知道如何在文件末尾写一些东西，而不必手动用零填充 eof 和所需位置之间的空间？

例子 ：

```
fstream someFile;
someFile.open("foo.dat", ios :: out | ios :: trunc | ios :: binary); // file is created, and empty
someFile.seekp(100, ios :: beg); // expecting 100 zeroes to be written in file, but nothing happens
someFile.write("yodelay-hee-hoo", 15); // file is still empty, does not work 
```

我已经在这个问题上搜索了大约一个小时，但我找不到任何相关的东西。我遇到的唯一一件事是有人说使用`.seekp`with`ios :: end`应该用零填补空白，但我试过了，但它对我不起作用。

如果有帮助，我正在使用 VS2010，本机编译。如果您能提供小费，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T19:40:59.460

**简短：** `.seekp()`如果之前使用 到达文件结尾，则失败`.seekg()`，因此需要`.clear()`事先调用。

* * *

**长：**

我发现我的写操作失败了，因为我首先使用 寻找文件末尾之后的位置`.seekg()`，并验证该位置是否有数据，首先检查是否`.eof()`返回 false，然后使用 寻找非空字符`.peek()`。

问题是，即使`.seekg()`到达文件末尾，`.eof()`在尝试任何读取/窥视/获取操作之前似乎总是返回 false，并且`.peek()`对于超过末尾的任何位置返回一个非空值 (-1)文件。

因此，解决方案是在检查是否到达文件结尾**之前**检查非空字符**，**如果超过文件结尾，则调用`.clear()`before `.seekp()`，它解决了所有问题。

# javafx-2 - 在 javafx 中的 webview 中搜索并突出显示文本

> ID：13758947
> 
> 赞同：3
> 
> 时间：2012-12-07T07:44:01.627
> 
> 标签：javafx-2, javafx

我已经在网络引擎中加载了本地 html 文件。我需要在网页视图页面中搜索并突出显示给定的字符串。
有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-03-18T16:19:20.533

如果您不介意使用反射，可以在 Java 代码中本地完成。

WebEngine 有一个类型为[WebPage](http://grepcode.com/file/repo1.maven.org/maven2/net.java.openjfx.backport/openjfx-78-backport/1.8.0-ea-b96.1/com/sun/webkit/WebPage.java)的私有字段 page ，它又具有这种方法，它完全可以满足您的需求：

```
// Find in page
public boolean find(String stringToFind, boolean forward, boolean wrap, boolean matchCase) {
    // ...
} 
```

因此，要访问此 find() 方法，您必须执行以下操作：

```
WebView webView = new WebView();
WebEngine engine = webView.getEngine();

try {
    Field pageField = engine.getClass().getDeclaredField("page");
    pageField.setAccessible(true);

    WebPage page = (com.sun.webkit.WebPage) pageField.get(engine);
    page.find("query", true, true, false);
} catch(Exception e) { /* log error could not access page */ } 
```

# java - 无限递归，霍夫曼树中的 StackOverError

> ID：13758954
> 
> 赞同：6
> 
> 时间：2012-12-07T07:45:22.123
> 
> 标签：java, encoding, recursion, huffman-code

我正在研究一个霍夫曼编码程序，我几乎完成了，但我陷入了无限递归循环。有谁知道这是哪里出错了？

这是我得到的错误：

```
Exception in thread "main" java.lang.StackOverflowError
at sun.nio.cs.SingleByteEncoder.encodeLoop(SingleByteEncoder.java:130)
at java.nio.charset.CharsetEncoder.encode(CharsetEncoder.java:544)
at sun.nio.cs.StreamEncoder.implWrite(StreamEncoder.java:252)
at sun.nio.cs.StreamEncoder.write(StreamEncoder.java:106)
at java.io.OutputStreamWriter.write(OutputStreamWriter.java:190)
at java.io.BufferedWriter.flushBuffer(BufferedWriter.java:111)
at java.io.PrintStream.write(PrintStream.java:476)
at java.io.PrintStream.print(PrintStream.java:619)
at java.io.PrintStream.println(PrintStream.java:756)
at HuffmanNode.buildTree(hw4.java:63)
at HuffmanNode.buildTree(hw4.java:64)
at HuffmanNode.buildTree(hw4.java:64)
at HuffmanNode.buildTree(hw4.java:64)
at HuffmanNode.buildTree(hw4.java:64)
at HuffmanNode.buildTree(hw4.java:64)
at HuffmanNode.buildTree(hw4.java:64)
at HuffmanNode.buildTree(hw4.java:64) 
```

并且输出连续 5:1, 5:4, 5:2, 重复

我的数据文件如下所示：

```
a
a
a
a
d
d
d
d
d
d
d
d
k
k
k
k
k
k
f
f
f
f
f
f
h
h
h
h
h
h
b
b
b
b
b
b
b
b
n
n
n
n
n
n
n
e
e
e
e
e
i
i
i
i
i
i
i
i
l
k
j
a
n
s
g
l
k
j
a
s
v
o
i
j
a
s
d
l
k
g
k
n
m
a
s
d
k
l
o
v
h
a
s
d
g
z 
```

我的代码是

```
 import java.util.*;
import java.io.*;

class HuffmanNode implements Comparable<HuffmanNode>{
HuffmanNode right;
HuffmanNode left;
HuffmanNode parent;
int count;          
String letter;

public HuffmanNode(){}

public HuffmanNode (String letter, int count){
this.letter = letter;
this.count = count;
}
public HuffmanNode (String letter, int count, HuffmanNode parent, HuffmanNode left, HuffmanNode right){
    this.letter = letter;
    this.count = count;
    this.left = left;
    this.right = right;
    this.parent = parent;
}

public void setCount(int count){
this.count = count;
}

public int getCount(){
return count;
}

public void setRight(HuffmanNode right){
this.right = right;
}

public HuffmanNode getRight(HuffmanNode right){
return right;
}

public void setLeft(HuffmanNode left){
this.left = left;
}

public HuffmanNode getLeft(HuffmanNode left){
return left;
}       
public void setParent(HuffmanNode right){
this.left = left;
}   
public HuffmanNode getParent(HuffmanNode parent){
return parent;
}

public void buildTree(HuffmanNode node){
    if (node.compareTo(this) <= 0 && left != null){
    System.out.println(node.getCount() + ":" + this.count);
    left.buildTree(node);
    }
    else if (node.compareTo(this) <= 0 && left == null){
    this.left = node;
    node.parent = this;
    }
    else if (node.compareTo(this) > 0 && right != null){
    System.out.println(node.getCount() + ":" +this.count);
    right.buildTree(node);
    }
    else if (node.compareTo(this) > 0 && right == null){
    this.right = node;
    node.parent = this;
    }
}

public int compareTo(HuffmanNode x){
return this.count - x.count;
}
public void genCode(String s){
    if(left != null){
    left.genCode(s + "0");
    }
    if(right != null){
    right.genCode(s + "1"); 
    }
    if (left == null && right == null){
    System.out.println(s);
    }
}
}

public class hw4{
public static void main (String []args)throws IOException{

//ask user to enter file name
System.out.printf("Enter a file location and name to encode [press Enter]: ");
Scanner input = new Scanner(System.in);
String filename = input.next();

//Gets file name from Scanner and checks to see if valid
File file = new File(filename);
//if (!file.isFile()){
//System.out.printf("Enter a file location and name to encode [press Enter]: ");
//}
Scanner text = new Scanner(file);

String[] letters = {"a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"};
int[] freq = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};

String letter;
String tempStr;
int tempInt;

    while(text.hasNext()){
        letter = text.next();
        //System.out.printf("%s\n", letter);

                    char c = letter.charAt(0);
        int index = c - 97;
        freq[index]++;     
    }

    for(int i=0; i <25; i++){
    System.out.printf("%s:%d\n", letters[i], freq[i]);
    }
    System.out.printf("\n");

    for (int n=0; n <25; n++) {
        for (int i=0; i <25; i++) {
            if (freq[i] > freq[i+1]) {
                // exchange elements
                tempInt = freq[i];  
                tempStr = letters[i]; 
                freq[i] = freq[i+1];
                letters[i] = letters[i+1];  
                freq[i+1] = tempInt;
                letters[i+1] = tempStr;
            }
        }   
       } 

    PriorityQueue<HuffmanNode> huffmanList = new PriorityQueue<HuffmanNode>();

    for(int i=0; i <26; i++){
    System.out.printf("%s:%d\n", letters[i], freq[i]);
        if(freq[i] > 0){
        huffmanList.add(new HuffmanNode(letters[i],freq[i]));
        }
    }

    HuffmanNode root = new HuffmanNode();

    while(huffmanList.size() > 1){
    HuffmanNode x = huffmanList.poll();
    HuffmanNode y = huffmanList.poll();
    HuffmanNode result = new HuffmanNode("-", x.getCount() + y.getCount(), null, x, y);
        if(root == null){
        root = result;
        }
        else{
        root.buildTree(result); 
        }
    huffmanList.add(result);                    
    }
     root.genCode(" ");
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T20:14:19.733

你的造树有问题。

```
while(huffmanList.size() > 1){
    HuffmanNode x = huffmanList.poll();
    HuffmanNode y = huffmanList.poll(); 
```

你从队列中取出两棵最轻的树，

```
 HuffmanNode result = new HuffmanNode("-", x.getCount() + y.getCount(), null, x, y); 
```

并合并它们，形成一棵以权重总和为权重的树 - 到目前为止，非常好。

```
 if(root == null){     // never happens, but doesn't matter
        root = result;
    }
    else{
        root.buildTree(result); 
```

然后将新形成的树插入到`root`,

```
 }
    huffmanList.add(result);                    
} 
```

并将其添加回队列中。

现在，让我们考虑一个以

```
(a,1), (b,2), (c,3), (d,3), (e,3), ... 
```

`root = new HuffmanNode();`设置`root`为`(null, 0)`.

首先，`a`和`b`节点被合并，给出`<(a,1) | (-,3) | (b,2)>`. 插入`root`产品

```
 (null,0)
          /    \
        null  (-,3)
              /   \
            (a,1) (b,2) 
```

因为`3 > 0`. 队列是

```
<(a,1) | (-,3) | (b,2)>, (c,3), (d,3), (e,3) ... 
```

在插入合并树之后[合并树也可以在几个权重为 3 的节点之后插入，然后需要更长的时间]。

现在最轻的两棵树被弹出并合并，给出

```
<AB | (-,6) | (c,3)> 
```

（带缩写`AB = <(a,1) | (-,3) | (b,2)>`）。然后将该树插入到`root`树中。`6 > 0`, 所以它被插入到 , 的右孩子中`root`，`6 > 3`所以它被插入到 , 的右孩子中`(-,3)`，`6 > 2`所以它成为`(b,2)`节点的右孩子。但是，新合并树的左孩子和右孩子`root`指的是同一个对象，所以在插入之后，你有

```
 __________
                  |          |
                  v          |
    (null,0)   (-,6)         |
    /      \   /   \         |
  null     (-,3)   (c,3)     |
           /   \             |
       (a,1)   (b,2)         |
                   \_________| 
```

应该是一棵树的循环。接下来，两个节点`(d,3)`和`(e,3)`被弹出并合并，给出一棵权重为 6 的树，当该树插入`root`图中时，它将循环。

不同的插入行为和/或不同的字母权重会改变细节，但是只要最初有足够的节点，after`root.buildTree(result);`和`huffmanList.add(result);`queue 包含对顶部图形的引用这一事实会导致循环。`root`而且一旦你有足够的循环，`buildTree()`调用不会陷入无限循环的可能性很小。

你根本不应该打电话`root.buildTree(result)`。通过简单地合并队列中最轻的两个并重新插入结果来构造树，直到队列只包含一棵树。

```
while(huffmanList.size() > 1){
    HuffmanNode x = huffmanList.poll();
    HuffmanNode y = huffmanList.poll();
    HuffmanNode result = new HuffmanNode("-", x.getCount() + y.getCount(), null, x, y);
    huffmanList.add(result);                    
}
root = huffmanList.poll(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T07:51:54.620

尝试改变

```
if(root.equals("null")){ 
```

到

```
if(root == null){ 
```

还

尝试`if`像这样缩短您的大量代码

```
 char c = letter.charAt(0);
 int index = c - 97;
 freq[index]++; 
```

# c# - 在 Windows 窗体中启用或禁用选项卡

> ID：13758956
> 
> 赞同：0
> 
> 时间：2012-12-07T07:45:27.143
> 
> 标签：c#, winforms

我正在开发 Windows 窗体应用程序。我有两个标签。单击按钮时，它应该导航到其他按钮并禁用第一个按钮。我们应该只能查看选项卡名称。单击选项卡不应在禁用的选项卡上工作，也不应显示任何内容。我已经完成了添加和删除标签页选项，但它没有给出特定的解决方案。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:08:58.773

这对我有用：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        tabPage2.Enabled = false;
    }

    private void tabControl1_Selecting(object sender, TabControlCancelEventArgs e)
    {
        if (!e.TabPage.Enabled)
            e.Cancel = true;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:02:13.877

您可以使用选项卡控件的[SelectingEvent](http://msdn.microsoft.com/en-US/library/system.windows.forms.tabcontrol.selecting.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)。当用户单击另一个选项卡时会触发它，并且它是可取消的，因此您可以通过检查 TabPage 属性或事件参数的 TabPageIndex 并将 Cancel 属性设置为 true 来防止用户更改选项卡：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();

        tabControl1.Selecting += new tabControlCancelEventHandler(tabControl1_Selecting);
    }

    private void tabControl1_Selecting(object sender, TabControlCancelEventArgs e)
    {
        // This blocks the user from opening the second tab
        if (e.Action == TabControlAction.Selecting && e.TabPageIndex == 1)
            e.Cancel = true;
    }
} 
```

希望有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-17T04:21:00.567

实际上，在 .net Framework 4.5`tabPage2.Enabled = false;`中不起作用。可能一些控制过度充电可能会奏效。

# r - 使用分隔符写入 csv 文件

> ID：13758957
> 
> 赞同：14
> 
> 时间：2012-12-07T07:45:28.193
> 
> 标签：r

我想将结果矩阵写入 csv 文件。

我使用了代码

```
write.table(result, file ="F:\\filename.csv",row.names=FALSE,sep=",") 
```

但是我的结果已经有了一些“，”值，那么使用什么类型的分隔符来写入这些类型的数据。

我已经使用“制表符”作为分隔符，但当时它没有拆分为列，值被插入到单个列中。

我也试过

```
 write.csv(result, file ="F:\\filename.csv",row.names=FALSE) 
```

但是这次将单列内容拆分为多列。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-07T08:30:50.677

在`,`用作小数分隔符的国家/地区（例如法国和德国），“csv”文件实际上是用分号分隔的（如果您安装这些国家/地区特定的版本，它是所有电子表格程序的默认设置）。
所以`write.table(result, file ="F:\\filename.csv",row.names=FALSE,sep=";")`会很经典。
实际上如此经典以至于有一个包装器：

```
write.csv2(result, file ="F:\\filename.csv",row.names=FALSE) 
```

`write.csv2`使用`sep=";"`和`dec=","`作为默认值。

否则，对于制表符分隔的文件，参数是`sep="\t"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T10:06:59.053

我倾向于使用**`qmethod = "double"`**，因此分隔符不会干扰字段内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-21T13:18:41.897

您可以使用任何您想要的分隔符，还请注意，您可以使用字符串作为分隔符。所以一些非标准的例子可能是“||” 或“|/|”。如果其中一个字段已经包含一些其他类型的分隔符，例如“;”，这将特别有用。"、":" 或 "|"。

# c# - 进度条 UserControl 在另一个 UserControl 内部不会触发 Tick 事件

> ID：13758958
> 
> 赞同：0
> 
> 时间：2012-12-07T07:45:34.577
> 
> 标签：c#, winforms, events, timer, backgroundworker

我正在我的 Windows 应用程序中实现进度条控件。这是我的进度条代码的样子。

```
public partial class ProgressBar : UserControl
{
    public event Action OnCommand;

    private int _progressInitial = 0;

    private int _progressMaximum = 100;
    #region :: Member Methods ::
    //------------------------------------------------------------------------------
    public void Start()
    {
        _timer.Start();
        _progressBar.Value = 0;

        if (!_backWorker.IsBusy)
        {
            _lblProgressText.Text = string.Empty;
            _backWorker.RunWorkerAsync();
        }
    }
    //------------------------------------------------------------------------------
    public void End()
    {
        if (_backWorker.WorkerSupportsCancellation)
        {
            _timer.Stop();
            _backWorker.CancelAsync();
        }
    }
    //------------------------------------------------------------------------------
    #endregion

    public ProgressBar()
    {
        InitializeComponent();
        _progressBar.Maximum = _progressMaximum;
        _backWorker.WorkerSupportsCancellation = true;
        _backWorker.WorkerReportsProgress = true;
    }
    //------------------------------------------------------------------------------
    private void _backWorker_DoWork(object sender, DoWorkEventArgs e)
    {
        if (this.OnCommand != null)
            this.Invoke((Action)(() => OnCommand()));
        if (_backWorker.CancellationPending)
            e.Cancel = true;
    }
    //------------------------------------------------------------------------------
    private void _backWorker_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        _lblProgressText.Text = string.Format("{0}%", e.ProgressPercentage);
            _progressBar.Value = e.ProgressPercentage;
    }
    //------------------------------------------------------------------------------
    private void _backWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        _progressBar.Value = _progressMaximum;
        _lblProgressText.Text = string.Format("{0}%", _progressMaximum);
        _timer.Stop();
        _timer.Enabled = false;
    }
    //------------------------------------------------------------------------------
    private void _timer_Tick(object sender, EventArgs e)
    {
        if (_backWorker.IsBusy)
        {
            _progressInitial += 10;
            if (_progressInitial >= _progressMaximum)
                _progressInitial = 99;
            _backWorker.ReportProgress(_progressInitial);
        }
    }
    //------------------------------------------------------------------------------
} 
```

## 父用户控件

```
public partial class Sample : UserControl
{
    public Sample()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        progressBar1.Start();
    }

    private void button2_Click(object sender, EventArgs e)
    {
        progressBar1.End();
    }

    private void progressBar1_Command()
    {
        System.Threading.Thread.Sleep(5000);
    }
} 
```

* * *

这是一个`UserControl`并且在我的后台工作人员中，我对触发事件操作`DoWork`的父控件进行了长时间的数据库操作。`OnCommand`

这个`OnCommand`处理程序将包含长数据库操作，这就是为什么我使用计时器来更新进度条一段时间。

如果我直接在表单上使用控件，这很好用

但是如果我在另一个`UserControl`用户控件包含的地方使用这个控件

1.  开始和结束按钮
2.  实现了 OnCommand 事件的 ProgressBar 控件（DB 操作）

OnCommand 方法执行的那一刻，计时器停止计时。

关于它为什么在 Form 而不是在内部工作有什么关系`UserControl`吗？

提前致谢

问候，弗朗西斯 P。

# c# - WPF 应用程序未在 Windows Server 2003 上启动

> ID：13758964
> 
> 赞同：0
> 
> 时间：2012-12-07T07:45:55.653
> 
> 标签：c#, .net, wpf, windows-server-2003

我是 wpf 的新手。我想在 Windows Server 2003 上运行我的应用程序。但是当我单击 exe 时我的应用程序没有启动。

我收到这个长错误

```
Application: NetworkSolution.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.Windows.Markup.XamlParseException
Stack:
at System.Windows.Markup.XamlReader.RewrapException(System.Exception,   System.Xaml.IXamlLineInfo, System.Uri)
at System.Windows.Markup.WpfXamlLoader.Load(System.Xaml.XamlReader, System.Xaml.IXamlObjectWriterFactory, Boolean, System.Object, System.Xaml.XamlObjectWriterSettings, System.Uri)
at System.Windows.Markup.WpfXamlLoader.LoadBaml(System.Xaml.XamlReader, Boolean, System.Object, System.Xaml.Permissions.XamlAccessLevel, System.Uri)
at System.Windows.Markup.XamlReader.LoadBaml(System.IO.Stream, System.Windows.Markup.ParserContext, System.Object, Boolean)
at System.Windows.Application.LoadBamlStreamWithSyncInfo(System.IO.Stream, System.Windows.Markup.ParserContext)
at System.Windows.Application.LoadComponent(System.Uri, Boolean)
at System.Windows.Application.DoStartup()
at System.Windows.Application.<.ctor>b__1(System.Object)
at System.Windows.Threading.ExceptionWrapper.InternalRealCall(System.Delegate, System.Object, Int32)
at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(System.Object, System.Delegate, System.Object, Int32, System.Delegate)
at System.Windows.Threading.DispatcherOperation.InvokeImpl()
at System.Windows.Threading.DispatcherOperation.InvokeInSecurityContext(System.Object)
at System.Threading.ExecutionContext.runTryCode(System.Object)
at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode, CleanupCode, System.Object)
at System.Threading.ExecutionContext.RunInternal(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
at System.Windows.Threading.DispatcherOperation.Invoke()
at System.Windows.Threading.Dispatcher.ProcessQueue()
at System.Windows.Threading.Dispatcher.WndProcHook(IntPtr, Int32, IntPtr, IntPtr, Boolean ByRef)
at MS.Win32.HwndWrapper.WndProc(IntPtr, Int32, IntPtr, IntPtr, Boolean ByRef)
at MS.Win32.HwndSubclass.DispatcherCallbackOperation(System.Object)
at System.Windows.Threading.ExceptionWrapper.InternalRealCall(System.Delegate, System.Object, Int32)
at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(System.Object, System.Delegate, System.Object, Int32, System.Delegate)
at System.Windows.Threading.Dispatcher.InvokeImpl(System.Windows.Threading.DispatcherPriority, System.TimeSpan, System.Delegate, System.Object, Int32)
at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr, Int32, IntPtr, IntPtr)
at MS.Win32.UnsafeNativeMethods.DispatchMessage(System.Windows.Interop.MSG ByRef)
at System.Windows.Threading.Dispatcher.PushFrameImpl(System.Windows.Threading.DispatcherFrame)
at System.Windows.Threading.Dispatcher.PushFrame(System.Windows.Threading.DispatcherFrame)
at System.Windows.Threading.Dispatcher.Run()
at System.Windows.Application.RunDispatcher(System.Object)
at System.Windows.Application.RunInternal(System.Windows.Window)
at System.Windows.Application.Run(System.Windows.Window)
at System.Windows.Application.Run()
at NetworkSolution.App.Main()

For more information, see Help and Support Center at   http://go.microsoft.com/fwlink/events.asp. 
```

我已经在我的代码中捕获了所有异常。但仍然无法正常工作

它在 XP、Vista、Windows 7 和 Windows Server 2008 上完美运行

现在要做什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:59:45.857

.net framework 4.0 是否安装在此 Windows 2003 服务器上？

# c - 使用 calloc 的堆损坏

> ID：13758965
> 
> 赞同：1
> 
> 时间：2012-12-07T07:46:01.167
> 
> 标签：c

我在这里处理了一个不错的小问题，我的代码几乎可以工作。

现在这是我的问题。

我试图用这样的浮点数分配一个字段树：

```
float ** PermLaster;
float ** VarLaster; 
```

然后稍后我使用 calloc

```
PermLaster= (float **) calloc(AntPermLast, sizeof(float*));
VarLaster= (float **) calloc(AntVarLast, sizeof(float*)); 
```

然后在嵌套的 for 中再次调用 calloc：

```
for (StegLastAnt= 0; StegLastAnt <  sizeLastM;StegLastAnt++)
{
    AktLast = inLastP[StegLastAnt];
    if (StegLastAnt > 0)
        {
            OldAktLast=inLastP[StegLastAnt-1];
        }

    if (((int(inLastP[7*(sizeLastM-1)+StegLastAnt+7])== 0)||(int(inLastP[7*(sizeLastM-1)+StegLastAnt+6])== 0)) && (AktLast != OldAktLast))
        {
            PermLaster[NumPerm] = (float *) calloc(AntAktuell*6, sizeof(float));
            AntLastVekt[NumPerm]=AntAktuell;
            NumPerm++;
            AntAktuell=0;
        }

    if ((int(inLastP[7*(sizeLastM-1)+StegLastAnt+7])== 1) && (AktLast != OldAktLast) && (int(inLastP[7*(sizeLastM-1)+StegLastAnt+6]) != 0))
    {
            VarLaster[NumVar] = (float *) calloc(AntAktuell*6, sizeof(float));
            AntLastVekt[NumPerm+NumVar]=AntAktuell;
            NumVar++;
            AntAktuell=0;
    }
    AntAktuell++;
} 
```

到目前为止没有错误。

然后分配所有元素：

```
 for (StegLastAnt= 0; StegLastAnt < sizeLastM;StegLastAnt++)
        {
        AktLast = inLastP[StegLastAnt];
        if (StegLastAnt > 0)
            {
                OldAktLast=inLastP[StegLastAnt-1];
            }

        if (((int(inLastP[7*(sizeLastM-1)+StegLastAnt+7])== 0)||(int(inLastP[7*(sizeLastM-1)+StegLastAnt+6])== 0)) && (AktLast != OldAktLast))
            {
                PLastP = PermLaster[NumPerm];
                RadPos=StegLastAnt-AntAktuell;

                for (StegLastAnt2 = 0;StegLastAnt2<AntAktuell;StegLastAnt2++)
                {
                    PLastP[StegLastAnt2*6+0]=float(inLastP[1*(sizeLastM-1)+RadPos+1]);PLastP[StegLastAnt2*6+1]=float(inLastP[2*(sizeLastM-1)+RadPos+2]);PLastP[StegLastAnt2*6+2]=float(inLastP[3*(sizeLastM-1)+RadPos+3]);PLastP[StegLastAnt2*6+3]=float(inLastP[4*(sizeLastM-1)+RadPos+4]);PLastP[StegLastAnt2*6+4]=float(inLastP[5*(sizeLastM-1)+RadPos+5]);PLastP[StegLastAnt2*6+5]=float(inLastP[6*(sizeLastM-1)+RadPos+6]);
                    RadPos++;
                }
                NumPerm++;
                AntAktuell=0;
                PLastP=nullptr;
            }
        if ((int(inLastP[7*(sizeLastM-1)+StegLastAnt+7])== 1) && (AktLast != OldAktLast) && (int(inLastP[7*(sizeLastM-1)+StegLastAnt+6]) != 0))
        {
                VLastP = VarLaster[NumVar];
                RadPos=StegLastAnt-AntAktuell;
                for (StegLastAnt2 = 0;StegLastAnt2<AntAktuell;StegLastAnt2++)
                {
                    VLastP[StegLastAnt2*6+0]=float(inLastP[1*(sizeLastM-1)+RadPos+1]);VLastP[StegLastAnt2*6+1]=float(inLastP[2*(sizeLastM-1)+RadPos+2]);VLastP[StegLastAnt2*6+2]=float(inLastP[3*(sizeLastM-1)+RadPos+3]);VLastP[StegLastAnt2*6+3]=float(inLastP[4*(sizeLastM-1)+RadPos+4]);VLastP[StegLastAnt2*6+4]=float(inLastP[5*(sizeLastM-1)+RadPos+5]);VLastP[StegLastAnt2*6+5]=float(inLastP[6*(sizeLastM-1)+RadPos+6]);
                    RadPos++;
                }
                NumVar++;
                AntAktuell=0;
                VLastP=nullptr;
        }
    AntAktuell++;
} 
```

它从输入读取，我一直在调试它，它工作正常。我故意避免在其中使用额外的 for 循环，以确保发生了什么，并使其更易于调试（尽管它看起来不太好）。它工作正常，我一直在查看正在输入的值，它们是正确的。损坏的地址也没有问题。

然后在大量代码之后是时候释放它了。

```
for (StegLastAnt= 0; StegLastAnt < AntPermLast;StegLastAnt++)
{
    free(PermLaster[StegLastAnt]);
} 
```

在这里，它变得香蕉并抱怨堆损坏。

```
for (StegLastAnt= 0; StegLastAnt < AntVarLast-1;StegLastAnt++)
{
    free(VarLaster[StegLastAnt]);
}
free(PermLaster), free(VarLaster); 
```

字段通过的函数都具有“PermLaster”作为 const 指针 const 指向 const float 的指针。没有更改地址，内部字段中也没有值。记忆似乎很好，那为什么会这样呢？可能是我为我的子字段使用了不同的大小（我必须为我的应用程序，没有办法解决这个问题）？改用 realloc 会更好吗？使用 new 和 delete 切换到 c++？

还有一件事，指向 PermLaster 的指针通过它传递的函数被声明为限制。这可能有问题吗？

我相信你们中的一些人会说使用更多的结构或类，但我尽量不让问题变得更大。

我将非常感谢这里的一些好的建议。

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T11:31:26.253

你没有给我们所有的代码。我想`NumPerm`并且`NumVar`在循环之间被重置为 0 。

顺便说一句，这里还有一个问题：

```
 AntLastVekt[NumPerm]=AntAktuell; 
```

除非所有“Perms”都在所有“Vars”之前，否则这应该是 AntLastVekt[NumPerm+NumVar]。否则，如果您有一个序列 Perm/Var/Perm，第二个 Perm 将覆盖 AntLastVekt[1]。

但是，这不是问题的原因，因为 AntLastVekt 在第二个循环中未使用。

该错误位于第二个循环中，即使操作系统在您释放阵列之前没有检测到它。为了证明这一点，注释掉中间的所有代码。您可以使用`valgrind`它来调试它。

# php - 如何通过强制另存为选项来保存网页的内容/文本

> ID：13758968
> 
> 赞同：0
> 
> 时间：2012-12-07T07:46:07.073
> 
> 标签：php, javascript, html, save

我想知道从网页中保存内容的最佳方法是什么。我的意思是通过单击链接或按钮来强制另存为选项。我经常发现 javascript 不是一个选项，因为它只适用于 IE，所以我认为它会更容易，因为 javascript 是基于客户端的。

现在，我想也许有一种方法可以在创建表单时使用 php，该表单将通过服务器站点查询重定向它以返回并强制另存为选项。我的主要目标是让保存隐私条款成为可能。我想避免使用 fpdf。如果有人能告诉我如何解决这个问题，我将不胜感激。

更新：

可以解释一下我想要达到的目标：

假设您有一个简单的网页，其中包含一些隐私政策文本，没有其他内容。在页面顶部，您有两个选项。首先将是打印选项，例如：

```
<a href="javascript:print()">print</a> 
```

第二应该是这样的：

```
<a href="javascript:saveas()">save</a> 
```

这样当您按下链接时，会弹出另存为对话框，您可以下载内容甚至页面以获取您自己的隐私政策。

希望现在很清楚。对不起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:50:40.167

如果您想在没有 javascript 的情况下强制下载，只需通过添加未知目标在新选项卡中打开内容。

**示例代码**

```
<a href="whatever.com/download.zip" target="_new">click me</a> 
```

这仅在您调用的页面提供下载时才有效，否则将显示内容。在这种情况下，您需要一个简单的 php 文件，它从页面中获取内容并自定义标题。

```
<?php
$content = file_get_contents($_GET["downloadurl"]);
header("Content-Type: application/octet-stream"); 
echo $content;
?> 
```

* * *

**更新**

作为编辑信息的更详细示例，您可以这样做：

**PHP-文件**“reader.php”

```
<?php
$content = file_get_contents($_GET["downloadurl"]);
header("Content-Type: application/octet-stream"); 
echo $content;
?> 
```

**“test.html”页面上的**HTML****

 **```
<a href="reader.php?downloadurl=http://yourwebsite.com/test.html" target="_new">Save website</a> 
```**

# asp-classic - asp本地化文本

> ID：13758980
> 
> 赞同：0
> 
> 时间：2012-12-07T07:47:57.233
> 
> 标签：asp-classic, localization

我正在使用以下代码在asp网站上工作：

```
<div class="btn-continuer"><a href="<%=urlGoBack%>"><span><%=btn_continuer_achats%></span>   </a></div> 
```

我在理解 <%=variablename%> 格式时遇到问题。

这是什么意思？出现在变量中的文本如何以不同的语言正确显示。

我必须放另一个按钮，但是当我放入静态 HTML 时

，未执行本地化。

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T07:55:49.490

字符串

```
<%=variablename%> 
```

是同义词

```
<%
  Response.Write variablename
%> 
```

它只是输出变量名的内容，仅此而已。您必须确保自己将正确的字符串放入“variablename”。

经典 ASP 没有本地化字符串的内置方法。您可以使用 SetLocale 命令来本地化数字、日期值等（[参见此处](http://www.devguru.com/technologies/vbscript/13969.asp)），但这对按钮标题等字符串没有帮助。

编辑：这可能会帮助您找到使用 XML 资源文件进行字符串翻译的解决方案：http: [//networkprogramming.wordpress.com/2006/06/02/resource-files-for-classic-asp/](http://networkprogramming.wordpress.com/2006/06/02/resource-files-for-classic-asp/)

# python - 导入模块问题

> ID：13758983
> 
> 赞同：0
> 
> 时间：2012-12-07T07:48:32.257
> 
> 标签：python, heroku, import, flask

网站日志（来自 Heroku：

```
File "app.py", line 8, in <module>

ImportError: No module named flask.ext.login

from flask.ext.login import LoginManager

Traceback (most recent call last):

File "/app/.heroku/venv/lib/python2.7/site-packages/flask/exthook.py", line 86, in load_module 
```

我已经安装了 Flask-Login 并且可以在我的文件夹中看到它。为什么它不适用于 Heroku？

* * *

小更新：

```
from flask.ext.sqlalchemy import SQLAlchemy
from flask.ext.login import LoginManager 
```

^SQLAlchemy 导入语句在这里有效 - 但不能登录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T07:55:53.003

相对于执行导入的代码（除非您使用 PYTHONPATH 来定位模块），您需要一个名为 flask/ext 的文件夹目录，其中包含一个名为 login.py 的模块文件（即，您应该看到 flask/ext 的相对路径/login.py)，并且 login.py 模块必须包含符号 LoginManager。此外，您应该验证路径中的目录是否有`__init__.py`文件（[此问答](https://stackoverflow.com/questions/448271/what-is-init-py-for)解释了原因）。最后，确保您对目录（执行，用于目录遍历）和模块文件（读取）具有适当的访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T08:28:21.790

我发现了错误。

我忘记添加扩展名

> 要求.txt

# android - 在列表视图中平滑滚动

> ID：13758985
> 
> 赞同：0
> 
> 时间：2012-12-07T07:48:38.213
> 
> 标签：android, listview

在我的应用程序中，我有一个列表视图..每一行都包含一个图像和一个相对布局的文本视图..一切都完成了..但是列表视图的滚动不如原生“联系人列表”那么流畅。我认为问题出在 getview (),y 因为在这种方法中我有一个“HTTP”调用和位图图像加载..有没有办法做到这一点..请帮助我..提前谢谢..

我的 Getview 方法：

```
public View getView(int position, View convertView, ViewGroup parent) 
    {
        // TODO Auto-generated method stub      
         Bitmap bitmap = DownloadImage(
                 kickerimage[position] );        
//       View listView = convertView;
         ViewHolder holder;
         if (convertView   == null) 
            {
                //this should only ever run if you do not get a view back            
             LayoutInflater  inflater = (LayoutInflater) contxt
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
             convertView  = inflater.inflate(R.layout.homelistrow, null); 

             holder = new ViewHolder();

             holder.image = (ImageView) convertView
                        .findViewById(R.id.icon);
             holder.image.setImageBitmap(bitmap);

             holder.text = (TextView) convertView
                        .findViewById(R.id.name_label);
             holder.text.setText(itemsarray[position]);
            }
    return convertView ;        
    }   

private Bitmap DownloadImage(String URL)
    {        
//      System.out.println("image inside="+URL);
        Bitmap bitmap = null;
        InputStream in = null;        
        try {
            in = OpenHttpConnection(URL);
            bitmap = BitmapFactory.decodeStream(in);
            in.close();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
//        System.out.println("image last");
        return bitmap;                
    }
    private InputStream OpenHttpConnection(String urlString)
            throws IOException
            {
                InputStream in = null;
                int response = -1;

                URL url = new URL(urlString);
                URLConnection conn = url.openConnection();

                if (!(conn instanceof HttpURLConnection))                    
                    throw new IOException("Not an HTTP connection");

                try{
                    HttpURLConnection httpConn = (HttpURLConnection) conn;
                    httpConn.setAllowUserInteraction(false);
                    httpConn.setInstanceFollowRedirects(true);
                    httpConn.setRequestMethod("GET");
                    httpConn.connect();

                    response = httpConn.getResponseCode();                
                    if (response == HttpURLConnection.HTTP_OK) 
                    {
                        in = httpConn.getInputStream();                                
                    }                    
                }
                catch (Exception ex)
                {
                    throw new IOException("Error connecting");            
                }
                return in;    
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:52:48.877

从您的代码中，我看到您正在同一线程中的 getView() 函数中下载图像。用于`webImageView`执行此任务而不是 native `ImageView`。

这是示例

[android-remoteimageview](https://github.com/tom-dignan/android-remoteimageview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T09:57:25.827

您`ListView`滚动不顺畅的原因是您正在从主线程上的 InputStream 获取图像。这意味着，每当您要加载图像时，主线程都会被延迟，并且您的`ListView`.

解决方案是将图像加载到与主线程不同的线程上。这称为图像的延迟加载，通过启动一个新线程（主要使用 完成`AsyncTask`）来加载图像来完成。

以下是一些您可以访问的有趣链接作为示例：

[http://andytui.wordpress.com/2012/05/10/tutorial-lazy-loading-list-views-in-android-binding-44/](http://andytsui.wordpress.com/2012/05/10/tutorial-lazy-loading-list-views-in-android-binding-44/)

[http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/](http://codehenge.net/blog/2011/06/android-development-tutorial-asynchronous-lazy-loading-and-caching-of-listview-images/)

[http://thinkandroid.wordpress.com/2012/06/13/lazy-loading-images-from-urls-to-listviews/](http://thinkandroid.wordpress.com/2012/06/13/lazy-loading-images-from-urls-to-listviews/)

[https://github.com/commonsguy/cwac-endless](https://github.com/commonsguy/cwac-endless)

# javascript - 使用 jQuery 提交表单在弹出窗口中不起作用

> ID：13758988
> 
> 赞同：0
> 
> 时间：2012-12-07T07:48:50.350
> 
> 标签：javascript, jquery, html

这是我的[HTML](http://en.wikipedia.org/wiki/HTML)：

```
<!DOCTYPE html>
<html>
   <head>
   </head>
   <body onload="load()">
       <script src='http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js'></script>
       <script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min.js'></script>

       <div id="container">
           <form id="inputFrm" action="/hello" method="post">
               <input name="value" id="myValue" value=1000 size=8 />
               <input name="symbol" id="mySymbol" size=10 />
               <input type="submit">
               <input type="button" id="mySubmitBtn" value="MySubmit">
               </table>
           </form>
       </div>
       <script>
           $(document).ready(function() {
               $("#mySubmitBtn").click(function ()
               {
                   var value =document.forms["inputFrm"]["myValue"].value;
                   var symbol =document.forms["inputFrm"]["mySymbol"].value;

                   alert(value)
                   alert(symbol)

                   $("#inputFrm").submit();
               });
           });
       </script>
   </body>
</html> 
```

此 HTML 代码代表由另一个页面打开的单独窗口。例如，假设服务器返回此 HTML 作为对“新”请求的响应：

```
window.open('/new') 
```

在这个窗口中，表单不是由 jQuery 提交函数调用提交的。

我在这里做错了什么？

我查看了类似的帖子，但没有找到此特定代码的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T07:50:06.960

对于 id 选择器，您需要`#`作为 id 的前缀。*[您可以在Category: Selectors](http://api.jquery.com/category/selectors/)*中阅读有关选择器的更多信息。

### [现场演示](http://jsfiddle.net/rajaadil/VJL8d/)

改变

```
$("inputFrm").submit(); 
```

至

```
$("#inputFrm").submit(); 
```

您还需要设置**[表单](http://www.w3schools.com/tags/tag_form.asp)**[操作标签的URL](http://en.wikipedia.org/wiki/Uniform_Resource_Locator)，假设您要发布到：`hello.php`

```
<form id="inputFrm" action="hello.php" method="post"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T07:58:23.643

@Adil 的回答解决了您的表单提交问题，但您还有另一个问题。您将 Javascript 附加到按钮单击而不是表单的提交事件。问题是如果用户按下回车键提交表单，您的 Javascript 代码将不会执行。

相反，您应该绑定到表单的`.submit()`事件：

```
 $('#inputFrm').submit(function(){

            var value =document.forms["inputFrm"]["myValue"].value;      
            var symbol =document.forms["inputFrm"]["mySymbol"].value;              

            alert(value)
            alert(symbol)

            return false;           
        }); 
```

`return false`如果您想阻止表单提交，也不要忘记。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T08:06:35.523

当用户尝试提交表单时，提交事件被发送到元素。它只能附加到元素上。

HTML：

```
<form action="yourfile.html">
    <input type="text" value="Hello there" />
    <input type="submit" value="Go" />
</form> 
```

jQuery：

```
$('form').submit(function() {
    alert('Handler for .submit() called.');
    return false;
}); 
```

[http://api.jquery.com/submit/](http://api.jquery.com/submit/)

另一种方法是做Ajax：

### HTML

```
<form>
    <input type="text" value="" name="fname" />
    <input type="text" value="" name="lname" />
    <input type="submit" value="Go" />
</form> 
```

### jQuery：

```
$('form').submit(function() {
    $.ajax({
        url     : 'email.php',
        type    : 'POST',
        data    : $(this).serialize(),
        success : function (serverResponse) { /*success*/ },
        error   : function (jqXHR, textStatus, errorThrown) { /*handler errors*/ }
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T07:50:54.263

做就是了 -

```
$("form#inputFrm").submit(); 
```

# php - 在文本框值更改上使用 ajax 更改多个文本框值

> ID：13758990
> 
> 赞同：2
> 
> 时间：2012-12-07T07:48:58.283
> 
> 标签：php, ajax

我的 PHP 页面上有多个文本框。比如基本工资、交通、医疗津贴、基金，当我输入基本工资时，它应该通过从数据库中获取并使用 ajax 更改传输文本框值时使用 ajax 更改传输文本框的值然后另一个文本框基金值也应该使用相同的 ajax 函数进行更改。

我怎样才能做到这一点？

到目前为止，我可以使用 ajax 更改第二个文本框的值，但是当使用 ajax 填充第二个文本框时，第三个文本框的值不会更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:58:05.180

如果某些东西在您的代码的一部分中起作用而不在另一部分中起作用，您应该逐步调试您的代码

*   确保有一个 onchange 事件
*   检查发送到 AJAX 请求的参数（值）
*   转储返回的数据
*   假设您有一个 onsuccess 侦听器，检查它是否试图更改正确字段的值。使用 getElementById() 时可能是一个简单的错字问题
*   检查您的错误控制台

# jquery - jQuery在提取的表数据中添加行分隔符

> ID：13758996
> 
> 赞同：0
> 
> 时间：2012-12-07T07:49:27.153
> 
> 标签：jquery, html

我正在从 HTML 表中提取数据。我已将标题和 tr 数据分成 2 个数组，假设我有表：

```
<table cellpadding="0" cellspacing="0" border="0" class="display dTable messageinbox">
    <thead>
        <tr>
            <th>ID</th>
            <th align="left">Name</th>
            <th align="left">Message</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td align="center" style="vertical-align:middle">1</td>
            <td align="left" style="vertical-align:middle">Ashfaq </td>
            <td align="left" style="vertical-align:middle">hi </td>
        </tr>
        <tr>
            <td align="center" style="vertical-align:middle">2</td>
            <td align="left" style="vertical-align:middle">Adam </td>
            <td align="left" style="vertical-align:middle">test </td>
        </tr>
    </tbody>
</table> 
```

这是我的代码：

```
$("#ExportOption").click(function()
    {
        var $table = $("table:first"),
        $headerCells = $table.find("thead th"),
        $rows = $table.find("tbody tr");
        var headers = [],
            rows = [];

        $headerCells.each(function(k,v) 
        {
            headers[headers.length] = $(this).text().replace(',', '');
        });

        $rows.each(function(row,v) 
        {
            $(this).find("td").each(function(cell,v) 
            {
                if(typeof rows[cell] === 'undefined') rows[cell] = [];
                //alert($(this).parent().find("tr"));
                rows[row][cell] = $(this).text().replace(',', '');
            });
        });
        alert(headers);
        alert(rows);
    }); 
```

这给了我这样的输出

```
 Heading :
    ID    Name    Message

    Rows :
    1     Ashfaq  hi      2  Adam test 
```

我想要的输出是在每个`tr`数据之间添加一个行分隔符，例如

```
1  Ashfaq hi \Separator 2 Adam test 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T08:24:34.047

```
$rows.each(function(row, v) {
    $(this).find("td").each(function(cell, v) {
        if (typeof rows[cell] === 'undefined') rows[cell] = [];
        //alert($(this).parent().find("tr"));
        rows[row][cell] = $(this).text().replace(',', '');
    });
    rows[row] += "/";
}); 
```

[http://jsfiddle.net/BNN6Z/7/](http://jsfiddle.net/BNN6Z/7/)

# r - 读取 svmlight 格式的文本文件？

> ID：13758998
> 
> 赞同：0
> 
> 时间：2012-12-07T07:49:35.627
> 
> 标签：r, file, parsing

我有一些遵循 svmlight/liblinear/libsvm 格式的较大文本文件：

```
35 1:23 2:35 3:1.2 4:353.12
12 1:21 2:31 3:1.1 4:323.12
5 1:22 2:37 3:1.5 4:343.12 
```

实际数据文件中的一些行是：

```
2007  1:45.442001 2:-30.749760 3:31.785870 4:4.635690 5:-15.148940 6:0.233700 7:-11.979680 8:-9.597080 9:6.481110 10:-8.890730 11:4.024050 12:-2.288730 13:17.902040 14:1377.122192 15:1762.042603 16:947.344299 17:562.281372 18:524.268127 19:361.254089 20:514.535095 21:247.701263 22:399.788788 23:205.365204 24:211.868698 25:44.889709 26:-299.639221 27:-227.641693 28:7.342100 29:-85.800568 30:16.812111 31:-41.185810 32:-12.008580 33:-41.921169 34:-26.523121 35:-12.197650 36:89.611038 37:-266.078339 38:-230.312225 39:-168.296097 40:38.403709 41:31.840160 42:28.980709 43:-98.734467 44:26.465651 45:-30.232719 46:-1.346370 47:253.369446 48:61.734241 49:16.157650 50:185.248672 51:75.572441 52:55.173672 53:-41.088692 54:15.864380 55:16.036921 56:-142.579681 57:59.747959 58:-151.467606 59:-12.706120 60:-104.992416 61:23.105141 62:47.001789 63:-13.598940 64:-79.190453 65:-27.637449 66:38.946049 67:-55.405849 68:54.735271 69:15.105210 70:-3.795960 71:390.477203 72:17.640181 73:-68.648270 74:-62.436111 75:-31.960951 76:33.907799 77:-181.376083 78:139.840775 79:-129.488403 80:76.238258 81:-8.840460 82:-0.154390 83:137.442093 84:77.547394 85:-4.228750 86:-61.926571 87:-33.527222 88:-3.862530 89:36.424000 90:7.173090
2003  1:52.678139 2:-2.889140 3:43.952679 4:-1.392090 5:-14.933790 6:-15.868770 7:1.193790 8:0.314010 9:-4.442350 10:-5.789340 11:2.296380 12:3.228460 13:5.668400 14:702.253845 15:685.431763 16:390.788666 17:895.268372 18:324.306152 19:256.451416 20:208.506546 21:190.251114 22:152.547104 23:119.232758 24:120.306580 25:7.739700 26:-8.927490 27:41.785198 28:-77.864777 29:-3.884480 30:6.110340 31:-27.502100 32:-0.865540 33:-8.058480 34:-20.055000 35:-2.468020 36:-10.228670 37:-94.059570 38:-76.709084 39:-62.492088 40:-165.220093 41:31.989639 42:11.304370 43:-29.555790 44:15.538950 45:-13.984620 46:-3.623290 47:398.099701 48:135.859528 49:-44.194340 50:72.132782 51:42.844990 52:28.899509 53:14.900610 54:11.398700 55:1.567970 56:-35.880360 57:57.098370 58:-53.742119 59:-79.554382 60:1.636050 61:-3.932900 62:-3.789370 63:-13.990090 64:-29.146971 65:-2.626020 66:55.268539 67:-7.301310 68:54.086380 69:-3.893580 70:0.908760 71:45.458092 72:36.820759 73:-44.692669 74:-20.529881 75:-6.139750 76:2.592730 77:-136.928253 78:22.407591 79:-36.550179 80:-35.025360 81:-5.743560 82:-42.579102 83:-2.911030 84:48.728050 85:-3.081830 86:-9.388880 87:-7.271790 88:-4.009660 89:-68.962112 90:-5.215250
2005  1:45.742352 2:12.022910 3:11.030090 4:-11.607630 5:11.800540 6:-11.123890 7:-5.390580 8:-1.119810 9:-7.740860 10:-3.334210 11:-3.226590 12:1.592990 13:40.885361 14:1972.836426 15:1145.013672 16:1099.560791 17:756.863953 18:590.113098 19:643.208435 20:404.141327 21:297.472534 22:223.873596 23:201.423416 24:226.905090 25:-1.111890 26:415.191345 27:71.191254 28:-55.937180 29:-31.572590 30:-14.187500 31:51.356079 32:15.550360 33:2.802390 34:-32.016411 35:22.382231 36:22.671370 37:49.065201 38:200.912338 39:-311.135925 40:-41.306648 41:-28.763250 42:89.578720 43:-44.595200 44:36.640621 45:-31.243629 46:-13.913190 47:103.467232 48:-20.585791 49:-18.699551 50:88.995888 51:-27.768690 52:54.397881 53:45.422440 54:33.072189 55:10.182240 56:-35.116600 57:249.768066 58:-76.346748 59:41.672920 60:-38.447338 61:-25.854719 62:-22.664749 63:-13.078690 64:18.624029 65:74.230911 66:35.444550 67:12.329590 68:22.056810 69:44.172779 70:46.889111 71:106.983597 72:74.135773 73:22.619181 74:-6.700720 75:-24.821899 76:35.950630 77:14.704640 78:139.090805 79:-80.349121 80:-6.568260 81:-4.706060 82:-24.225990 83:-35.226860 84:27.777290 85:15.389340 86:58.200359 87:-61.126980 88:-10.925220 89:26.753481 90:-5.787430
2003  1:52.558830 2:2.872220 3:27.388479 4:-5.762350 5:-15.357660 6:-15.015920 7:-5.868930 8:-0.314470 9:-5.069220 10:-4.627340 11:1.094960 12:0.146510 13:4.728110 14:525.899292 15:426.023407 16:462.865997 17:545.496765 18:320.350647 19:207.019897 20:241.681976 21:215.257568 22:121.743217 23:113.572952 24:151.218094 25:11.411310 26:-8.163200 27:-21.420420 28:-34.561981 29:9.114970 30:13.452100 31:-6.900850 32:-7.353940 33:-5.067550 34:-5.165550 35:0.510740 36:7.155810 37:-159.725861 38:-25.356190 39:-102.939949 40:36.878929 41:3.154020 42:18.147430 43:-28.873240 44:21.521170 45:1.494080 46:0.855090 47:112.993828 48:69.087212 49:-56.420319 50:116.512131 51:13.048910 52:22.800711 53:9.616600 54:16.319309 55:17.906010 56:0.850250 57:54.610882 58:-23.400669 59:-66.643929 60:-12.870030 61:-6.847970 62:-2.526670 63:-7.898560 64:-6.603840 65:-3.535520 66:90.427971 67:9.425460 68:36.567829 69:25.027519 70:-1.734350 71:37.976860 72:12.334080 73:-4.718090 74:-14.820230 75:-27.884081 76:9.275720 77:-134.637466 78:32.129719 79:-36.809818 80:27.452789 81:-8.352150 82:-16.867910 83:-10.582770 84:40.101730 85:-0.540050 86:-11.547460 87:-45.358601 88:-4.556940 89:-43.173679 90:-3.337250
2005  1:51.348091 2:9.027020 3:25.337570 4:-6.625370 5:0.033670 6:-12.695650 7:-3.134000 8:2.986490 9:-6.717500 10:-1.858040 11:-1.114940 12:-0.607370 13:9.876010 14:1146.054565 15:864.638367 16:989.264832 17:552.562683 18:547.281555 19:348.295197 20:328.138306 21:270.355560 22:192.469040 23:192.741516 24:149.908417 25:-28.374889 26:-12.990660 27:-227.448273 28:-30.600500 29:64.353157 30:70.337830 31:-42.221901 32:11.576720 33:0.563700 34:-2.935510 35:-0.233660 36:30.354120 37:19.311819 38:41.338871 39:-309.293457 40:58.497639 41:17.552410 42:37.494869 43:-58.175140 44:28.816250 45:-0.601190 46:-17.050550 47:144.773346 48:110.054649 49:-196.500870 50:72.839363 51:-65.838982 52:57.181580 53:54.270790 54:16.510670 55:5.466400 56:52.857239 57:40.528839 58:97.970413 59:28.994801 60:71.283318 61:-33.390919 62:10.739650 63:-7.166210 64:-8.740700 65:-92.274887 66:78.802193 67:60.469372 68:39.829880 69:37.804260 70:-1.799860 71:114.848869 72:-51.463718 73:-125.398689 74:19.257271 75:-26.166790 76:-5.827070 77:-121.600388 78:69.711678 79:24.589479 80:80.465950 81:-6.873660 82:-20.033710 83:-66.389397 84:50.565689 85:0.277470 86:67.056572 87:-55.588459 88:-7.508590 89:28.235109 90:-0.720450
2007  1:45.846401 2:2.833760 3:-6.005060 4:-15.161500 5:-10.723850 6:-15.152330 7:5.007240 8:1.690390 9:-0.955270 10:-0.648950 11:-5.076770 12:-2.181690 13:32.260960 14:1255.578735 15:1491.808838 16:929.633484 17:884.464905 18:513.442078 19:533.146179 20:315.062347 21:355.699799 22:187.780396 23:273.448730 24:239.651230 25:42.578140 26:139.817398 27:77.404160 28:-125.109329 29:3.481800 30:8.431550 31:25.527790 32:-11.566490 33:31.547911 34:-33.194939 35:35.622768 36:98.843971 37:-74.664299 38:-55.493752 39:-142.034805 40:136.285583 41:57.116482 42:96.431488 43:-6.046260 44:17.230221 45:-9.377930 46:26.988079 47:-61.483089 48:149.761673 49:-41.559071 50:122.963379 51:-61.148178 52:63.133350 53:-4.466220 54:39.530510 55:-30.881510 56:73.216476 57:64.885696 58:-52.324692 59:157.851456 60:-9.440020 61:-59.519360 62:13.423860 63:18.665951 64:-208.924088 65:96.040138 66:-75.221062 67:112.305283 68:-17.383190 69:32.235378 70:3.296620 71:50.905499 72:-128.179276 73:-15.145500 74:-113.525757 75:-46.479698 76:18.937969 77:-139.734528 78:16.025990 79:-85.868294 80:39.124649 81:-27.972549 82:-76.794800 83:55.541039 84:88.864410 85:-8.432410 86:62.005070 87:123.561462 88:7.871000 89:-38.616798 90:26.411659
2003  1:48.135792 2:1.086430 3:9.589960 4:-12.595940 5:-0.094050 6:-12.147480 7:-13.709280 8:-3.098700 9:-1.393680 10:-4.756290 11:-1.302600 12:1.310910 13:26.323999 14:1461.063721 15:1170.573975 16:1014.678223 17:757.746460 18:515.308411 19:315.104584 20:321.322754 21:334.500549 22:224.677887 23:213.518784 24:215.590195 25:-36.780762 26:230.421402 27:31.557949 28:-134.648193 29:48.904621 30:34.625450 31:4.527690 32:12.819410 33:0.127740 34:-7.029300 35:16.655870 36:-19.999611 37:-152.366150 38:-105.105309 39:-174.247406 40:60.828758 41:49.691872 42:18.926250 43:-57.088161 44:69.231201 45:0.094510 46:24.512751 47:389.871002 48:22.275311 49:-43.229050 50:113.951782 51:-25.452620 52:38.201389 53:43.678810 54:67.439743 55:-59.954189 56:49.155460 57:60.899910 58:-95.543419 59:-44.525139 60:-77.580452 61:-15.260040 62:24.210541 63:-9.920600 64:-128.993469 65:4.179530 66:95.650917 67:-40.966881 68:7.517620 69:26.851370 70:6.279250 71:100.435966 72:74.072609 73:3.479960 74:-40.648312 75:-44.314892 76:10.898230 77:-57.362991 78:99.334396 79:-54.742260 80:104.983833 81:-2.894430 82:-54.763592 83:40.297291 84:31.450239 85:1.103620 86:28.259859 87:23.311010 88:5.403460 89:68.146980 90:-15.644380
2003  1:50.774220 2:10.306970 3:38.833832 4:2.135230 5:-12.295030 6:-16.126940 7:3.010910 8:4.843600 9:-2.116620 10:-1.904550 11:2.062730 12:3.397320 13:14.777590 14:1049.617676 15:1336.198486 16:681.697937 17:879.616577 18:462.965881 19:290.403687 20:282.654999 21:315.051910 22:192.788345 23:177.245438 24:216.466476 25:-20.513330 26:-87.685112 27:-19.301571 28:-46.450470 29:-58.279259 30:13.538130 31:5.162740 32:-0.460890 33:39.515469 34:7.114010 35:15.739370 36:22.136230 37:-81.368942 38:-147.379425 39:-98.616241 40:-29.209419 41:34.321522 42:2.060160 43:-30.081430 44:36.432110 45:-13.177250 46:2.261150 47:340.016541 48:10.768990 49:-57.379421 50:110.271263 51:-19.973940 52:3.625370 53:-10.102060 54:-1.543880 55:-7.883780 56:-3.416110 57:66.224503 58:-8.526570 59:-83.281860 60:-9.265550 61:17.536169 62:14.193860 63:-10.285960 64:-60.309750 65:-131.561417 66:85.569321 67:28.591600 68:37.395119 69:42.838001 70:6.753630 71:31.879320 72:-35.305740 73:-49.290539 74:-56.658569 75:-29.851339 76:5.755470 77:-127.410233 78:6.754480 79:-18.591490 80:48.416950 81:-5.079660 82:-44.774738 83:44.031250 84:10.971820 85:-4.908250 86:-23.094490 87:-21.832060 88:-0.139780 89:-39.147041 90:0.954250
2003  1:49.158970 2:-2.382560 3:51.106758 4:2.096510 5:-19.883600 6:-10.847170 7:1.936660 8:-0.585220 9:-9.527060 10:-5.628470 11:1.117850 12:8.080500 13:52.736198 14:1610.526367 15:1048.697876 16:699.699097 17:1093.320190 18:442.795197 19:413.717560 20:282.639801 21:327.524323 22:212.697281 23:143.314911 24:283.513153 25:-104.071472 26:84.974327 27:49.865181 28:-4.966470 29:-2.476170 30:-9.160600 31:-31.066231 32:-33.176239 33:-3.536770 34:-26.308910 35:27.660151 36:-25.920719 37:-46.777882 38:6.794870 39:-153.272095 40:-215.387848 41:20.085751 42:28.508430 43:-48.295429 44:20.006901 45:-5.075860 46:-22.038639 47:689.643738 48:51.127209 49:-57.364071 50:36.180710 51:-11.456780 52:-11.060990 53:1.324540 54:31.615129 55:-122.590012 56:-27.722010 57:164.565201 58:-8.001100 59:-46.325619 60:7.174110 61:39.002029 62:2.867760 63:-14.931470 64:-222.400345 65:-29.179220 66:91.891869 67:54.306229 68:1.223730 69:83.647133 70:37.999901 71:25.496920 72:48.499828 73:-78.835808 74:-125.095070 75:-30.123671 76:3.157580 77:-166.867477 78:54.335869 79:-52.169189 80:-156.988968 81:0.460720 82:33.267231 83:14.544800 84:26.725420 85:-10.330890 86:-56.613251 87:24.820271 88:18.069550 89:-148.310776 90:13.764190
2005  1:50.630531 2:-10.591620 3:33.569851 4:-3.657070 5:-17.252439 6:-15.497890 7:-1.123680 8:-1.232340 9:-0.589600 10:-5.671160 11:1.830230 12:3.629500 13:8.015560 14:998.391907 15:664.230408 16:489.109589 17:682.265198 18:359.168152 19:233.805527 20:221.424911 21:187.124252 22:135.840759 23:131.866730 24:134.819794 25:-22.119030 26:-4.471730 27:-25.231850 28:-47.849972 29:-27.661140 30:8.277170 31:3.009250 32:-5.689490 33:-11.178010 34:-20.120310 35:13.760620 36:-6.357670 37:-105.914413 38:-176.465897 39:-80.240990 40:-28.631901 41:28.530621 42:11.108940 43:-31.423651 44:36.545422 45:1.247940 46:-4.130270 47:214.719543 48:90.757584 49:-37.422741 50:95.684219 51:42.480240 52:9.748400 53:9.479200 54:39.394749 55:2.614500 56:-11.076560 57:56.877048 58:-77.622551 59:-96.041847 60:-36.586418 61:-12.461760 62:-11.692830 63:-11.398230 64:34.850460 65:-25.190050 66:70.402802 67:-11.947600 68:43.388599 69:19.466080 70:-0.415960 71:70.317902 72:34.508572 73:-12.467560 74:6.159420 75:-20.868429 76:8.175780 77:-126.849983 78:40.370041 79:-3.643520 80:-64.381844 81:-3.317920 82:19.025909 83:-16.542931 84:43.292210 85:-1.584870 86:-21.691681 87:15.877830 88:-3.735770 89:-70.888710 90:-1.293630 
```

我想将文件读入data.frame。

我尝试了以下方法，但速度非常慢。我想知道是否有某种方法可以加快速度？

```
read.svmlight <- function( filename, K ) {
   f <- file( filename, "r")
   lines <- readLines( f )
   close(f)
   print("read lines, parsing...")

   N <- length(lines)
   results <- as.data.frame(matrix(nrow=N,ncol=K))
   for( n in 1:N ) {
      if( n %% 10 == 0 ) {
          cat("n",n,"\n")
      }
      thisline <- lines[n]
      tokens <- strsplit(thisline," ")[[1]]
      thisy <- as.numeric(tokens[1])
      results[n,1] <- thisy
      numtokens <- length(tokens)
      for( j in 2:numtokens ) {
         thistoken <- tokens[j]
         if( thistoken != '' ) {
             splittoken <- strsplit(thistoken,':')[[1]]
             id <- as.integer( splittoken[1])
             value <- as.numeric(splittoken[2])
             results[n,id+1] <- value
         }
      }
   }
   return(results)
} 
```

此代码段每秒执行大约 1 行。该文件长约 25,000 行。

编辑：解析 10 行的时间似乎随着总行数增加，所以我猜在上面的脚本中插入时发生了一些重新分配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T10:03:08.113

哦，好吧，似乎已经有一个包提供了这个。但是，我的解决方案可能仍会为 OP 提供一些内部信息：

```
read.svmlight2 <- function( filename ) {
  f <- file( filename, "r")
  lines <- readLines( f )
  close(f)

  temp <- strsplit(lines,'[: ]')
  temp <- do.call('rbind',temp)
  temp2 <- temp[,(1:(ncol(temp)/2))*2]
  temp2[,1] <- temp[,1]
  temp2 <- apply(temp2,2,FUN=as.numeric)
  res <- as.data.frame(temp2)

  res
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T09:44:25.610

您可能可以尝试以下方法：

```
read.table(text=gsub(" [0-9]+:", " ", readLines("test.txt"))) 
```

其中“test.txt”是您的数据文件......至少适用于您的示例数据，但我还没有检查它的效率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-02T19:39:43.520

更好的解决方案是使用 SparseMatrix 提供的可爱的构造函数。

```
require(Matrix)

read.svmlight2 <- function( filename ) {
    f <- file( filename, "r")
    lines = readLines( f )
    close(f)
    temp = strsplit(lines,'[: ]')
    target = sapply(temp, function(row){as.numeric(row[1])})
    raw = lapply(temp, function(row){
        n = length(row);
        matrix(as.numeric(row[2:n]), ncol=2, byrow=T)
    })
    data = do.call('rbind', mapply(cbind, x=1:n, y=raw))
    list(target=target, data=sparseMatrix(x=data[,3], i=data[,1], j=data[,2]))
} 
```

读取一个包含 14,000 行的测试文件大约需要一秒钟。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T07:57:26.723

好的，第一个改进似乎是插入矩阵而不是 data.frame：

```
results <- matrix(nrow=N,ncol=K)

...

return(as.data.frame(results)) 
```

这明显更快，大约每秒 100 行。不过，总共有 25,000 行！