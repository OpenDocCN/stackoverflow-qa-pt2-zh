# StackOverflow 问答 15742000-15742999

# android - Android Phonegap 插件不适用于所有版本的 android 设备

> ID：15742002
> 
> 赞同：1
> 
> 时间：2013-04-01T10:47:41.920
> 
> 标签：android, cordova, plugins, callback

我开发了一个 Android PhoneGap 插件，用于获取公共专辑列表并将其上传到 picasa。该插件成功地与模拟器和设备一起使用。成功回调不是针对所有 android 设备调用的。在模拟器上测试它适用于所有版本，在 2.3.6 版本的设备上它工作正常。在 android vesion 2.2 和 4.0 上测试时，成功回调和失败回调不是调用，而是在 picasa 上上传产品。

有没有人知道回调没有被调用时可能出现什么问题？我的 Android 应用最小 sdk 版本为 8。

提前致谢

# unity3d - Unity Shader：使用顶点着色器变形 3D 模型，然后使用表面着色器应用镜面反射

> ID：15742003
> 
> 赞同：0
> 
> 时间：2013-04-01T10:47:43.547
> 
> 标签：unity3d, shader, vertex-shader

在 CG 顶点着色器中变形后，我需要帮助在 3D 模型中应用镜面反射阴影。我不知道如何在 Unity 着色器中做到这一点。我已经在谷歌搜索过，没有找到我要找的东西。

以下是我目前的解决方案。3D 对象被渲染两次。

```
 Shader "myShader/DeformSpecular" {
    Properties {
            _Color ("Main Color", Color) = (1,1,1,0.5)
            _Shininess ("Shininess", Range (0.01, 1)) = 0.7
            _MainTex ("Base (RGB)", 2D) = "white" { }
            _BumpMap ("Normalmap", 2D) = "bump" {}
            _cubeSize("Cube Size", Range (1, 10)) = 1

        }

        SubShader { 
            Tags { "RenderType"="Opaque" }
            LOD 250

            Pass{
                CGPROGRAM
                #pragma vertex vert
                #pragma fragment frag

                #include "UnityCG.cginc"
                #include "myShaderFuncs.cginc"

                sampler2D _MainTex;
                sampler2D _BumpMap;
                half _Shininess;

                float4 _Color;
                float4x4 _localOrient;  //local orientation 
                float4x4 _parentWOrient;  //world orientation of parent node
                float _deformParam;

                struct v2f {
                    float4  pos : SV_POSITION;
                    float2  uv : TEXCOORD0;
                };

                float4 _MainTex_ST;

                v2f vert (appdata_base v)
                {  
                    v2f o; 

                    o.pos = mul(_localOrient, v.vertex); //apply local transformation

                    o.pos = deformShape(_deformParam);   //apply deform

                    o.pos = mul(_parentWOrient, o.pos);  //apply parents world orientation
                    o.pos = mul (UNITY_MATRIX_VP, o.pos);
                    o.uv = TRANSFORM_TEX (v.texcoord, _MainTex);
                    return o;
                }

                half4 frag (v2f i) : COLOR
                {
                    half4 texcol = tex2D (_MainTex, i.uv);
                    return texcol * _Color;
                }

                ENDCG

            }//Pass

            CGPROGRAM
            #pragma surface surf MobileBlinnPhong exclude_path:prepass nolightmap noforwardadd halfasview

            inline fixed4 LightingMobileBlinnPhong (SurfaceOutput s, fixed3 lightDir, fixed3 halfDir, fixed atten)
            {
                fixed diff = max (0, dot (s.Normal, lightDir));
                fixed nh = max (0, dot (s.Normal, halfDir));
                fixed spec = pow (nh, s.Specular*128) * s.Gloss;

                fixed4 c;
                c.rgb = (s.Albedo * _LightColor0.rgb * diff + _LightColor0.rgb * spec) * (atten*2);
                c.a = 0.0;
                return c;
            }

            sampler2D _MainTex;
            sampler2D _BumpMap;
            half _Shininess;

            struct Input {
                float2 uv_MainTex;
            };

            void surf (Input IN, inout SurfaceOutput o) {
                fixed4 tex = tex2D(_MainTex, IN.uv_MainTex);
                o.Albedo = tex.rgb;
                o.Gloss = tex.a;
                o.Alpha = tex.a;
                o.Specular = _Shininess;
                o.Normal = UnpackNormal (tex2D(_BumpMap, IN.uv_MainTex));
            }
            ENDCG

        }//SubShader

        FallBack "Mobile/VertexLit"
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:31:44.493

如果我理解正确，您想在 CG 着色器中进行镜面光照计算吗？

Unity 为您提供照明信息，如果您愿意，您可以访问这些信息以进行自己的计算：

[http://docs.unity3d.com/Documentation/Components/SL-BuiltinValues.html](http://docs.unity3d.com/Documentation/Components/SL-BuiltinValues.html)

但是，该文档似乎已过时，并且此处指出的某些变量是错误的：

[http://answers.unity3d.com/questions/411114/shaderlab-builtin-lighting-properties-are-not-corr.html](http://answers.unity3d.com/questions/411114/shaderlab-builtin-lighting-properties-are-not-corr.html)

使用这些变量后，您可以根据需要计算照明

# algorithm - bash power set 函数背后的逻辑

> ID：15742005
> 
> 赞同：4
> 
> 时间：2013-04-01T10:48:18.637
> 
> 标签：algorithm, bash, recursion

函数（输出给定输入的幂集）

```
p() { [ $# -eq 0 ] && echo || (shift; p "$@") |
        while read r ; do echo -e "$1 $r\n$r"; done } 
```

测试输入

```
p $(echo -e "1 2 3") 
```

测试输出

```
1 2 3
2 3
1 3
3
1 2
2
1 
```

我很难掌握以下代码中的递归。我试图通过在代码中放置一些变量来表示递归级别和执行顺序来理解它，但我仍然感到困惑。

到目前为止，我可以说以下几点：

1.  子shell的输出不会显示在最终输出中，因为它通过管道重定向到读取命令
2.  该`echo`命令为其所有输出附加新行

我看到的执行顺序是：

1.  p (1 2 3) -> 1 后跟下面的所有输出组合\n 下面的所有输出组合
2.  p (2 3) -> 2 3\n3\n
3.  **p (3) -> 3**
4.  p () ->

所以我认为我应该在执行#3 时使用 p(2) 而不是 p(3)，但这是怎么发生的呢？因为`shift`只有一个方向。

如果我使用“p(1 2 3 4)”作为输入，那么输出中显示“1 2 3”的部分会让我感到困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T20:13:39.417

`-e`在命令中的使用`echo`对我来说似乎是纯粹的混淆，因为它可以写成：

```
p() { [ $# -eq 0 ] && echo || (shift; p "$@") |
      while read r ; do
        echo $1 $r
        echo $r
      done
    } 
```

换句话说，“对于除第一个参数之外的所有幂集中的每个集合`(shift; p "$@")`，输出带有和不带有第一个参数的集合。”

bash 函数通过设置一个子shell 链来工作，每个子shell 从下一个读取，类似这样，其中每个框都是一个子shell，在它下面，我在读取每一行输入时显示了它的输出：（我用于`""`使“无”可见。`=>`意思是“呼叫”；`<-`意思是“阅读”。）

```
+---------+     +-------+     +-------+     +-------+
| p 1 2 3 | ==> | p 2 3 | ==> |  p 3  | ==> |   p   |
+---------+     +-------+     +-------+     +-------+
  1 2 3 "" <--+-- 2 3 "" <---+-- 3 "" <-----+-- ""
  2 3 ""   <-/              /              /
  1 3 ""   <--+-- 3 ""   <-/              /
  3 ""     <-/                           /
  1 2 ""   <--+-- 2 ""   <---+-- ""   <-/
  2 ""     <-/              /
  1 ""     <--+-- ""     <-/
  ""       <-/ 
```

# box2d - box2d - 距离关节 - 最小距离

> ID：15742009
> 
> 赞同：0
> 
> 时间：2013-04-01T10:48:41.443
> 
> 标签：box2d

有谁知道如何禁用距离加入box2d的最小距离？

我将它用于我的起重机，作为我可以在运行时改变长度的绳索/线，但有时它的行为真的很奇怪，因为锚点之间的距离很小。

# c# - 在单个 ActionResult 中返回三个 IQueryable 列表以显示在视图中

> ID：15742017
> 
> 赞同：0
> 
> 时间：2013-04-01T10:49:08.270
> 
> 标签：c#, asp.net-mvc-4

我是 ASP.NET、MVC、C# 和一般编程的新手，所以我一直在做一些个人项目和各种教程来学习。

我遇到了一个问题，我不确定该采用哪种方式寻求解决方案，或者我是否确实走上了正确的道路。下面的代码最好地解释了我想要做什么。我知道 ViewModel 不对，但我认为它显示了我正在尝试做的事情。（为简洁起见，所有交易和不同日子的变量都被剪掉了）。

```
var yesterdaystransactions = allTransactions.Where(t => t.WhenItHappensId == yesterday);
var todaystransactions = allTransactions.Where(t => t.WhenItHappensId == today);
var tomorrowstransactions = allTransactions.Where(t => t.WhenItHappensId == tomorrow);
var ViewModel = yesterdaystransactions.ToList() + todaystransactions.ToList() + tomorrowstransactions.ToList(); 
```

其目的是显示一个概览屏幕，其中包含昨天的交易列表在顶部，今天在中间，明天在底部。

起初我尝试了@Html.Partial，但当然这只是向我展示了三遍相同的列表。我还在视图中尝试了一些 if 语句，但是当我重复自己时，这样做感觉有些不对劲。

谁能提供一些关于我应该阅读哪些领域以及我应该如何解决这个问题的建议？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:58:00.390

你走在正确的轨道上——你需要一个视图模型。这是一个仅用于包含渲染视图所需的所有数据的类。

在这种情况下，这样的事情会做：

```
public class MyActionViewModel
{
  public IEnumerable<Transaction> YesterdaysTransactions { get; set; }
  public IEnumerable<Transaction> TodaysTransactions { get; set; }
  public IEnumerable<Transaction> TomorrowsTransactions { get; set; }
} 
```

然后在你的控制器中，你填充这个类的一个实例：

```
var vm = new MyActionViewModel
  {
    YesterdaysTransactions = allTransactions.Where(t => t.WhenItHappensId == yesterday),
    TodaysTransactions = allTransactions.Where(t => t.WhenItHappensId == today),
    TomorrowsTransactions = allTransactions.Where(t => t.WhenItHappensId == tomorrow),
  }
;

return View( vm ); 
```

你要做的最后一件事是告诉你的视图你要给它的视图模型：

```
@model MyActionViewModel 
```

然后你可以像这样访问数据

```
@Model.TodaysTransactions 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:59:09.893

我假设您使用的是 AJAX，那么您应该使用 JsonResult

```
return Json(new {
  yesterdaystransactions = allTransactions.Where(t => t.WhenItHappensId == yesterday).ToList(),
  todaystransactions = allTransactions.Where(t => t.WhenItHappensId == today).ToList(),
  tomorrowstransactions = allTransactions.Where(t => t.WhenItHappensId == tomorrow).ToList()
}); 
```

如果您尝试渲染视图，则创建 ViewModel

```
var model = new MyViewModel {
  Yesterdaystransactions = allTransactions.Where(t => t.WhenItHappensId == yesterday).ToList(),
  Todaystransactions = allTransactions.Where(t => t.WhenItHappensId == today).ToList(),
  Tomorrowstransactions = allTransactions.Where(t => t.WhenItHappensId == tomorrow).ToList()
};
return View("_SomePartialView", model); 
```

# .net - 使用打包的 .NET 2.0 SP2 框架部署应用程序

> ID：15742021
> 
> 赞同：0
> 
> 时间：2013-04-01T10:49:18.693
> 
> 标签：.net, frameworks, installation

我想将 .NET 2.0 安装程序与我的 .NET 应用程序打包在一起，那么我应该为最新的 .NET 2.0 SP 2 使用哪个安装程序？假设目标机器是 XP/Vista/7，并假设它没有安装 .NET 框架。

1.  [Netfx 2](http://www.microsoft.com/en-in/download/details.aspx?id=22808)（2006 年，大小 23 MB）
2.  [Netfx 2 SP 1](http://www.microsoft.com/en-in/download/details.aspx?id=16614)（2007，大小 24 MB）
3.  [Netfx 2 SP 2](http://www.microsoft.com/en-in/download/details.aspx?id=1639)（2009 年，大小 25 MB）

我只需要最新的 SP 2 安装程序吗？还是我需要按顺序安装所有 3 个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:02:10.693

> 还是我需要按顺序安装所有 3 个？

不，Service Pack 版本是完整的安装程序，不需要存在先前版本的 .NET 2。你可以从文件大小看出。

# .net - 全局正则表达式匹配超时适用于控制台应用程序，但不适用于 ASP.NET MVC 应用程序

> ID：15742025
> 
> 赞同：11
> 
> 时间：2013-04-01T10:49:24.790
> 
> 标签：.net, regex, asp.net-mvc, appdomain

我正在尝试使用 .NET 4.5 的新[正则表达式匹配超时](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.matchtimeout.aspx)`AppDomain.CurrentDomain.SetData`，特别是通过属性的全局变体`"REGEX_DEFAULT_MATCH_TIMEOUT"`（将 a 传递`TimeSpan`给正则表达式构造函数的变体工作正常）。

当我使用这个 main 方法创建一个新的控制台应用程序时：

```
static void Main(string[] args)
{
    AppDomain.CurrentDomain.SetData("REGEX_DEFAULT_MATCH_TIMEOUT",
        TimeSpan.FromSeconds(3));

    var m = System.Text.RegularExpressions.Regex.Match(
        "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", "^(x+x+)+y$");
} 
```

它按预期工作：三秒钟后，它抛出一个`RegexMatchTimeoutException`.

但是，如果我创建一个空的 MVC 4 应用程序，请添加一个`HomeController`和此操作方法：

```
public ActionResult Index()
{
    AppDomain.CurrentDomain.SetData("REGEX_DEFAULT_MATCH_TIMEOUT",
        TimeSpan.FromSeconds(3));

    var m = System.Text.RegularExpressions.Regex.Match(
        "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", "^(x+x+)+y$");

    return View();
} 
```

并且访问`http://localhost:XXXXX/`没有抛出异常并且匹配尝试继续。（如果您等待的时间足够长，它最终会完成，然后抱怨缺少视图。不过，这需要*很*长时间。）

调用's而不是在控制器操作`SetData`中调用也不会使超时发生。`Global.asax``Application_Start()`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T16:17:46.547

我猜这两个示例之间的区别在于，在您的控制台应用程序中，第二行是对 RegEx 对象的第一次访问，这是您初始化此类型的地方。在 MVC 中 - 我猜想 RegEx 类是在您的 Index 操作之前使用的。

我尝试使用简单的控制台应用程序验证此行为，并得到与 MVC 中相同的结果：

```
var m = System.Text.RegularExpressions.Regex.Match(
    "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", "x");

AppDomain.CurrentDomain.SetData("REGEX_DEFAULT_MATCH_TIMEOUT", 
    TimeSpan.FromSeconds(3));

var m2 = System.Text.RegularExpressions.Regex.Match(
    "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", "^(x+x+)+y$"); 
```

因此，您只需要确保在其他人使用它之前初始化此属性。您可以使用 web.config 指定此配置：http: [//msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.defaultregexmatchtimeout.aspx](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.defaultregexmatchtimeout.aspx)在 httpRuntime 部分。

# javascript - 如何通过 omouseover 事件和 innerHTML 属性在 div 中获取 H1 文本

> ID：15742027
> 
> 赞同：0
> 
> 时间：2013-04-01T10:49:31.700
> 
> 标签：javascript, dom, innerhtml, onmouseover

当我将鼠标放在 H1 上时，我试图将 H1 的内容写入 div，但只得到 [Object HTMLHeadingElement]，而不是文本本身。我是一个初学者，我正在尝试使用 innerHTML 属性。谢谢你们！

```
HTML code:

<h1 id="phrase" onmouseover="writeInDiv2()">Hi all</h1>

JavaScript code:

var text = document.getElementById("phrase");

function writeInDiv2(){
    if(div2.style.display != "none"){
        div2.innerHTML = text;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T10:51:53.163

您有三个选项来获取文本内容：

```
// Webkit, Mozilla, Opera (and other standards-compliant) browsers
var text = document.getElementById("phrase").textContent;

// Microsoft Internet Explorer (though this might have changed in IE 10)
var text = document.getElementById("phrase").innerText;

// Possibly works, though assumes the h1 contains only a text-node
var text = document.getElementById("phrase").firstChild.nodeValue; 
```

为了提高效率，使用以下 HTML：

```
<h1 onmouseover="writeInDiv2(this, 'div2')">Hi all</h1>
<h1 onmouseover="writeInDiv2(this, 'div2')">Another message</h1>
<div id="div2"></div> 
```

我建议：

```
function writeInDiv2(el, textInto){
    var div2 = textInto.nodeType === 1 ? textInto : document.getElementById(textInto),
        text = el.textContent ? el.textContent : el.innerText;
    while (div2.firstChild){
        div2.removeChild(div2.firstChild);
    }
    div2.appendChild(document.createTextNode(text));
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/PDmwn/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T10:51:04.597

尝试`div2.innerHTML = text.innerHTML;`

# django - 为什么模板继承失败？

> ID：15742028
> 
> 赞同：0
> 
> 时间：2013-04-01T10:49:54.193
> 
> 标签：django, django-templates

**编辑**：请不要被这个问题误导，我的改变没有奏效是我的错。我碰巧必须对名称相同的项目（`not a smart idea`）这混淆了一切，我正在与我正在工作的不同项目中进行更改。对不起，我误导了好的stackoverflow人员。

我有一个基本模板`public_base.html`

```
<!doctype html>
<!-- [if IE ]> <html class="no-js"> <![endif] -->
<head>

  <!-- favicon for web browser and smartphones -->
  <link rel="icon" href="{{ STATIC_URL }}images/img.png" type="image/x-png">
  <link rel="apple-touch-icon" href="{{ STATIC_URL }}img/apple-touch-icon.png">

  <!-- Google Fonts -->
  <link href='http://fonts.googleapis.com/css?family=Homenaje|Molengo' rel='stylesheet' type='text/css'>

  <!-- CSS Section -->
  <link type="text/css" rel="stylesheet" href="{{ STATIC_URL }}maincss/bootstrap.min.css">

  <link type="text/css" rel="stylesheet" href="{{ STATIC_URL }}maincss/impress.css">  
  <link type="text/css" rel="stylesheet" href="{{ STATIC_URL }}maincss/style.css">
  <link type="text/css" rel="stylesheet" href="{{ STATIC_URL }}maincss/impression.css">

  <title>{% block title %}F4L | Have it easy{% endblock %}</title>
</head>

<body lang="en">

  <div id="container">
    {% load smartmin %}
    <div id="header">                                                                     <!-- Header -->
      <div id="logo">
        <a href="{% url homepage %}">
          <img src="{{ STATIC_URL }}img/logo.jpg" class="" alt="" />
        </a>
      </div>
      <div id="menu">
        <ul>

      {% if perms.restaurant_detail.restaurant_detail.create %}
          <li><a href="#">Join F4L</a></li>
      {% endif %}
      <li><a href="#">FAQ</a></li>
      <li><a href="#">contact</a></li>
          <li><a href="#">about us</a></li>

      {% if request.user.is_authenticated %}
      <li><a href="{% url users.user_logout %}">logout</a></li>

          {% else %}
          <li><a href="{% url users.user_login %}">login</a></li>
          {% endif %}
        </ul>
      </div>
    </div>                                                                                <!-- End Header -->
    <div style="clear: both;"></div>

    <div id="main">                                                                       <!-- Main -->
      {% block main-contents %}
       <p>jrneflkwnel</p>
      {% endblock %}
    </div>  

  </div> 
```

我在这里继承，`home.html`

```
{% extends "public_base.html" %}

{% block main-contents %}

 <p>This is not Working.</p>

{% endblock main-contents %} 
```

但这根本不起作用，基本上`home.html`没有加载内容。是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:53:57.093

你需要继承你的块`home.html`：

```
{% extends "public_base.html" %}
{% block main-contents %} 
      <p>This is not Working.</p>   
{% endblock %} 
```

阅读[有关模板继承的文档](https://docs.djangoproject.com/en/dev/topics/templates/#id1)，特别是：

> [当您从父模板继承时] 模板引擎会注意到 base.html 中的三个块标记，并将这些块替换为子模板的内容。

因此，当您从父模板继承时，您需要在子模板中包含一个块，该块覆盖父模板中的块，在本例中为`main-contents`块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:54:12.260

您必须`block content`在`public_base.html`. 在你的`public_base.html`.

```
{% block content %}
{% endblock %} 
```

否则你必须继承`{% block main-contents %}`自`public_base.html`.

# c# - C#在反序列化之前检查XML文件是否没有损坏

> ID：15742033
> 
> 赞同：0
> 
> 时间：2013-04-01T10:50:12.350
> 
> 标签：c#, visual-studio-2010, serialization, xml-serialization, filestream

我在互联网上没有找到任何我的问题。我反序列化播放列表的数据。

他是我的代码：

```
using (var fs = new FileStream("playlist.xml", FileMode.OpenOrCreate))
{
 XmlSerializer xml = new XmlSerializer(typeof(ObservableCollection<Playlist>));
 if (fs.Length > 0)
  pl = (ObservableCollection<Playlist>)xml.Deserialize(fs);
 else
  pl = new ObservableCollection<Playlist>();
} 
```

这是结果 XML：

```
 <?xml version="1.0"?>
    <ArrayOfPlaylist xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"    xmlns:xsd="http://www.w3.org/2001/XMLSchema">
       <Playlist>
        <Name>Playlist1</Name>
          <List>
             <Media>
                <path>C:\Users\Tchiko\Videos\Suit Tie (Official Lyric Video).mp4</path>
                <name>Suit Tie (Official Lyric Video).mp4</name>
                <type>Video</type>
             </Media>
         </List>
     </Playlist>
     <Playlist>
        <Name>Hip hop</Name>
          <List>
            <Media>
              <path>C:\Users\Tchiko\Videos\Suit Tie (Official Lyric Video).mp4</path>
              <name>Suit Tie (Official Lyric Video).mp4</name>
              <type>Video</type>
            </Media>
         </List>
      </Playlist>
</ArrayOfPlaylist> 
```

在加载我的播放列表之前，我想检查用户是否手动损坏了文件。我需要检查XML格式是否正确，以避免反序列化后发生冲突。

**编辑：** 避免错误格式错误的版本：

```
 using (var fs = new FileStream("playlist.xml", FileMode.OpenOrCreate))
        {
            try
            {
                XmlSerializer xml = new XmlSerializer(typeof(ObservableCollection<Playlist>));
                if (fs.Length > 0)
                    pl = (ObservableCollection<Playlist>)xml.Deserialize(fs);
                else
                    pl = new ObservableCollection<Playlist>();
            }
            catch (Exception ex)
            {  
                pl = new ObservableCollection<Playlist>();
            }
        } 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:05:16.827

为了确保 XML 的有效性，您需要定义一个 XML Schema。XML Schema 声明了在您的 XML 中允许使用哪些标记、以什么顺序以及使用什么类型的值。

[这](http://www.codeproject.com/Articles/8781/C-XML-Schema-Validator)是一篇关于如何根据 Schema 验证 XML 的文章。

如果您的 XML 格式不正确（例如，用户没有关闭标签或类似的东西），反序列化将失败，您将`InvalidOperationException`在`InnerException`. 请参阅MSDN 上的[XmlSerializer.Deserialize()](http://msdn.microsoft.com/en-us/library/xc221bxx.aspx)。

# gwt - GWT 模块设计

> ID：15742035
> 
> 赞同：0
> 
> 时间：2013-04-01T10:50:20.483
> 
> 标签：gwt

我有一个包含两个组件的应用程序。一位客户面临提交餐厅订单的问题。一个供应商面对一个查看餐厅订单的供应商。

我应该有两个具有不同入口点的模块，因为组件之间没有共享代码（域模型对象除外）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:29:11.720

我可以想到您为什么要这样做的一个原因 - 这是为了减少下载大小，因为客户可能不使用某些屏幕/逻辑（并且您希望客户页面尽可能快地加载） . 但是，您也可以通过代码拆分来实现此目的： [https ://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting)

我认为有两个模块也很好。没什么大不了的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:41:03.507

如果您不打算将它们部署在两个单独的节点上，我会选择一个模块。因为您只需要维护一个 I18n 文件，较少的静态文件 (html)，因此将只有一个模块描述符（无重复）。

如果您决定只使用一个模块，那么考虑代码拆分是一件好事，可以减少 JS 用户必须下载的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T21:03:45.597

不可能有 100% 的正确答案，这真的取决于你的项目。

分离成两个已编译的模块可能是个好主意，以防与客户/供应商特定逻辑相比，必须在两个模块之间共享的公共逻辑的大小非常小，并且大多数时候您只为客户编写代码/小贩。在这种情况下，您将在开发模式下获得更快的刷新时间，并且在将所有内容合并在一起的情况下更快地编译单个模块。但是有一个问题，在某个时间点，可能需要创建合并的客户/供应商模式，因为有些用户同时是客户和供应商。

我个人更喜欢这样的方法，当应用程序的不同逻辑部分拥有自己的 gwt 模块，然后有一个根模块将它们链接在一起，再加上你有几个 DevOnly 模块，它允许你只启动应用程序的某些特定部分. 示例模块结构：

*   *客户*模块 - 不单独编译，依赖于通用模块
*   *Vendor*模块 - 不单独编译，依赖于 Common 模块
*   *公共*模块 - 不单独编译
*   **应用程序**模块 - 单独编译，取决于客户和供应商模块
*   **VendorStandalone**模块 - 单独编译，依赖于 Vendor 模块，仅用于开发
*   **CustomerStandalone**模块 - 单独编译，依赖于 Customer 模块，仅用于开发

这样的结构允许您拥有快速开发模式（如果可能的话），同时您为必须同时提供供应商和客户功能的情况做好准备。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-01T11:17:24.410

我选择的设计（**使用[MVP](https://developers.google.com/web-toolkit/articles/mvp-architecture)**）：

1)单模块

2）相同的登录页面（用户 pojo 必须具有类型 ie`vendor`或`customer`）。

3）在`OnmoduleLoad`基于类型我会打开相应`vendor or customer presenter`

为什么？？

1）代码可重用性。

2）减少2个模块的维护。

*好吧，我也在等着看更多的设计选择。*

[请参考](http://www.summa-tech.com/blog/2011/02/22/structuring-gwt-modules-for-large-applications/)

# python - 如何在 Python 和 Lxml 中以字典形式保存 XML 的命名空间

> ID：15742039
> 
> 赞同：0
> 
> 时间：2013-04-01T10:50:33.533
> 
> 标签：python, lxml

我有一个包含许多命名空间的 XML 文件：

> ```
> <root xmlns:ser="https://some_address" xmlns:mirror="https://some_mirror_address">
>    <ser:use server="some_server_address"/>
>    <mirror:use default="some_mirror_address"/>
> </root> 
> ```

我正在使用 lxml 和 python 来解析这种类型的文件。现在，我的要求是，当我解析这个 XML 文件时，我需要将所有命名空间存储在一个字典中，例如：

```
nsd = {'ser' : 'https://some_address', 'mirror' : 'https://some_mirror_address'} 
```

这样做的意图是，命名空间不是预先确定的。因此，当我解析 XML 时，我需要将所有命名空间存储在字典中，然后继续进行进一步的活动。

这可以在lxml中实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T22:38:43.000

假设您使用的是 etree api，对于给定的元素，您可以访问该`nsmap`属性。这包含一本您正在寻找的字典。

# python - 在文本编辑器和 Python 中处理乌尔都语双向文本

> ID：15742040
> 
> 赞同：0
> 
> 时间：2013-04-01T10:50:35.283
> 
> 标签：python, ms-word, text-editor, text-processing, bidi

我想使用 Python 脚本在 MS Word 文档中处理一些双向文本（乌尔都语和英语），该脚本将文本转换为表格标记。我无法直接访问 Word 文档中的双向文本，因为它是二进制格式，即使我将 Word 文档中的文本复制粘贴到文本编辑器，所有双向文本都会错误地呈现方向性。

**例子：**

以下文本从我复制它的原始 MSWord 文本（涉及乌尔都语文本）以相反的方向呈现：

> 图片 پر ہے۔

那么如何处理这样的双向文本，以便在像notepad++这样的文本编辑器中正确呈现，从而可以用Python脚本忠实地处理呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T20:26:08.840

首先，不要依赖在 Word 文件中正确显示的双向文本。它不能保证在其他环境中相同的文本会正确显示。Microsoft Word 在当前和旧版本中有自己的处理双向文本的方式，这不一定是符合 Unicode 的文本编辑器（如[gedit](http://projects.gnome.org/gedit/)）处理该文本的方式。这最终可能会或可能不会得到解决，因为 Microsoft 将在产品中实施[更新版本](http://www.unicode.org/reports/tr9/proposed.html)的[Unicode 双向算法](http://unicode.org/reports/tr9/)。

其次，您看不到复制文本的原因是您的文本环境（包括此处）不正确支持双向文本，甚至无法显示从右到左的文本。我在符合 Unicode 的文本编辑器中复制了您的示例字符串，并将方向更改为右，这是正确的结果。

![Unicode 兼容编辑器中从右到左的文本示例](https://i.stack.imgur.com/7UwC8.png)

现在，为了能够使用 Python 处理该 Word 文件中的文本，您需要进行一些即兴创作。您可以将文本内容导出为 Unicode 文本，然后使用 Python 进行处理。或者，如果您想就地（在 Word 中）处理文本内容，您可能能够从 Python 的 OLE 组件脚本中获得一些令人满意的结果。[请参阅此处](https://stackoverflow.com/questions/279094/how-do-i-script-an-ole-component-using-python)的相关问题。

# html - 为什么有些图片在 IE8 中不显示？

> ID：15742044
> 
> 赞同：0
> 
> 时间：2013-04-01T10:51:14.747
> 
> 标签：html, internet-explorer-8

在我的网站横幅中，图像未显示在 IE8 中，红色十字出现在图像的位置，但它在 mozilla 和 chrome 中正常工作。我用谷歌搜索，我也尝试了这些建议，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:00:33.797

IE8 不会显示 CMYK 的 jpeg。确保使用图像编辑器将它们更改为 RGB。

如果您安装了 ImageMagick（如果没有，请获取它！），您可以使用：

```
identify -verbose yourImage.jpg 
```

找出有关该文件的所有信息。

同样，使用 ImageMagick 你可以运行：

```
convert cmyk_image.jpg -colorspace rgb rgb_image.jpg 
```

转换成 rgb – 请注意，有时颜色可能看起来不同，所以不要假设不检查就可以。

如果您希望文件覆盖原始使用：

```
mogrify -colorspace rgb cmyk_image.jpg 
```

# python - 从经纬度坐标获取时区？

> ID：15742045
> 
> 赞同：26
> 
> 时间：2013-04-01T10:51:15.657
> 
> 标签：python, timezone, latitude-longitude, geonames

我正在尝试获取纬度和经度坐标的时区，但遇到了一些问题错误可能是非常基本的

我在数据库中有一个大约 600 行的表。每行包含世界某处的经纬度坐标，我想将这些坐标输入到函数中，然后检索时区。目的是将在这 600 个地点中的每一个内具有本地时间戳的事件转换为 UTC 时间

我发现了[一篇博客文章](http://blog.pamelafox.org/2012/04/converting-addresses-to-timezones-in.html)，它使用[一段代码](https://gist.github.com/pamelafox/2288222)从地理坐标派生时区。

当我尝试运行代码时，出现错误`geonames is not defined`。我已经申请了一个带有地名的帐户。

我想我刚刚将函数文件保存在错误的目录或简单的东西中。谁能帮忙

```
#-------------------------------------------------------------------------------
# Converts latitude longitude into a time zone
# REF: https://gist.github.com/pamelafox/2288222
# REF: http://blog.pamelafox.org/2012/04/converting-addresses-to-timezones-in.html
#-------------------------------------------------------------------------------

geonames_client = geonames.GeonamesClient('Username_alpha')
geonames_result = geonames_client.find_timezone({'lat': 48.871236, 'lng': 2.77928})
user.timezone = geonames_result['timezoneId'] 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2016-09-12T19:57:08.163

使用 tzwhere 和 pytz：

```
import datetime
import pytz
from tzwhere import tzwhere

tzwhere = tzwhere.tzwhere()
timezone_str = tzwhere.tzNameAt(37.3880961, -5.9823299) # Seville coordinates
timezone_str
#> Europe/Madrid

timezone = pytz.timezone(timezone_str)
dt = datetime.datetime.now()
timezone.utcoffset(dt)
#> datetime.timedelta(0, 7200) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2018-01-13T23:49:15.853

[我能够使用timezonefinder](https://pypi.python.org/pypi/timezonefinder)进行适合我的目的的查找：

```
import datetime
import timezonefinder, pytz

tf = timezonefinder.TimezoneFinder()

# From the lat/long, get the tz-database-style time zone name (e.g. 'America/Vancouver') or None
timezone_str = tf.certain_timezone_at(lat=49.2827, lng=-123.1207)

if timezone_str is None:
    print "Could not determine the time zone"
else:
    # Display the current time in that time zone
    timezone = pytz.timezone(timezone_str)
    dt = datetime.datetime.utcnow()
    print "The time in %s is %s" % (timezone_str, dt + timezone.utcoffset(dt)) 
```

[在从其 pypi 页面](https://pypi.python.org/pypi/timezonefinder)链接的文档中讨论了 timezonefinder 的方法及其限制。

`timezonefinder`并且`pytz`可以在`pip`同名的包中找到。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-10-26T11:19:03.490

这按预期工作：

```
import geonames
geonames_client = geonames.GeonamesClient('demo')
geonames_result = geonames_client.find_timezone({'lat': 48.871236, 'lng': 2.77928})
print geonames_result['timezoneId'] 
```

输出：

```
'Europe/Paris' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-29T11:01:16.553

```
import requests
lat = 48.871236 ## your latitude
lon = 2.77928 ## your longitude

url = "http://api.geonames.org/timezoneJSON?formatted=true&lat={}&lng={}&username=demo".format(lat,lon)

r = requests.get(url) ## Make a request
return r.json()['timezoneId'] ## return the timezone 
```

# visual-studio - 如何在 Visual Studio 中编译 Autodock Vina？

> ID：15742047
> 
> 赞同：0
> 
> 时间：2013-04-01T10:51:20.367
> 
> 标签：visual-studio, boost, bioinformatics

我正在尝试在 Visual Studio 上编译 Autodock Vina，但无法弄清楚如何做到这一点。如果有人可以指导我完成整个过程，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-16T20:45:39.713

请按照以下说明进行操作：

1- 从以下链接下载 Boos 1.41.0：http: [//sourceforge.net/projects/boost/files/boost/1.41.0/boost_1_41_0.zip/download](http://sourceforge.net/projects/boost/files/boost/1.41.0/boost_1_41_0.zip/download)

AutoDock Vina 与 Boost 1.41.0 兼容

2- 在您的计算机中提取 Zip 文件：

*   转到 Boost Directory 并打开 cmd 并运行以下命令：bootstrap.bat

*   完成上一步后，根据您的操作系统运行以下命令：

*   32 位：bjam --toolset=msvc-10.0 --build-type=完成阶段
*   64位：bjam --toolset=msvc-10.0 --build-type=complete architecture=x86 address-model=64 stage 这一步需要时间！（对我来说大约 45 分钟）。

3- 从以下链接下载 AutoDock Vina：http: [//vina.scripps.edu/download/autodock_vina_1_1_2.tgz](http://vina.scripps.edu/download/autodock_vina_1_1_2.tgz)

4- 提取您机器上的文件夹。

5- 到目前为止，Boost 已安装在您的机器上，并且您拥有 Vina 代码。您应该配置 VS 2010 来使用它。

您可以在下面的我的 Google 站点中找到 VS 配置：

[https://sites.google.com/site/mkoohim/stories/how-can-compile-autodock-vina-in-visual-studio](https://sites.google.com/site/mkoohim/stories/how-can-compile-autodock-vina-in-visual-studio)

希望这对你有帮助！

# opengl - PlayN 中未找到 OpenGL 上下文错误

> ID：15742051
> 
> 赞同：0
> 
> 时间：2013-04-01T10:51:38.590
> 
> 标签：opengl, playn

使用 PlayN，我正在尝试更改方形图层上的图像。我正在尝试创建翻转效果来更改图像。我这样做是通过将图层的原点设置为图像的中心，然后减小宽度并在宽度几乎为零时更改图像（图像不可见），然后将宽度增加回原始大小。

我正在使用自定义 Timer 任务来播放此转换。

现在我有一个问题和一个问题。

问题是有没有更好的方法来实现我想要做的事情

问题是图像完美翻转但是当我再次单击图像将其翻转回来时，出现以下错误

> ```
> [java] Exception in thread "Timer-1" java.lang.RuntimeException: No OpenGL context found in the current thread.
>  [java]   at org.lwjgl.opengl.GLContext.getCapabilities(GLContext.java:124)
>  [java]   at org.lwjgl.opengl.GL11.glDeleteTextures(GL11.java:721)
>  [java]   at playn.java.JavaGL20.glDeleteTextures(JavaGL20.java:1050)
>  [java]   at playn.core.gl.GL20Context.destroyTexture(GL20Context.java:164)
>  [java]   at playn.core.gl.ImageGL.clearTexture(ImageGL.java:60)
>  [java]   at playn.core.gl.ImageGL.release(ImageGL.java:87)
>  [java]   at playn.core.gl.ImageLayerGL.setImage(ImageLayerGL.java:74)
>  [java]   at playn_poc.core.util.RotationTimerTask.run(RotationTimerTask.java:51)
>  [java]   at java.util.TimerThread.mainLoop(Timer.java:512)
>  [java]   at java.util.TimerThread.run(Timer.java:462) 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T10:36:46.407

您只能在主线程（调用 update()/paint() 方法的线程）中调用绘图方法 - 如果您创建了一个计时器任务，我假设它在不同的线程上运行，那么它将没有 gl语境。不要使用定时器任务，也不要使用定时器任务，而是抛出事件，并在主 update()/paint() 方法中监听事件以执行您的操作。

# php - php的cURL问题

> ID：15742056
> 
> 赞同：1
> 
> 时间：2013-04-01T10:51:52.983
> 
> 标签：php, facebook, curl

当我尝试通过传递 URL 手动获取 php 页面时，出现一个异常，上面写着

javax.servlet.ServletException：java.lang.RuntimeException：PHP 致命错误：未捕获异常“异常”，消息“Facebook 需要 CURL PHP 扩展。

但是当我在我的安装目录中搜索 php curl 时，我在那里找到了它。

```
[ashish@hpproliant ~]$ which php
/usr/local/bin/php
[ashish@hpproliant ~]$ which curl
/usr/local/bin/curl 
```

我修改了 php.ini 文件，其中注释了与 curl 相关的一行。我现在需要做什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:20:56.887

也许

```
sudo apt-get install php5-curl 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:56:59.097

**只需按照以下步骤操作，并检查您是否完成了与以下完全相同的操作：-**

```
sudo apt-get install php5-curl 
```

确保在 php.ini 文件中启用 curl（对我来说它在 /etc/php5/apache2/php.ini 中），如果你找不到这一行，它可能在 /etc/php5/conf.d/卷曲.ini。确保行：

```
extension=curl.so 
```

没有被注释掉然后重启apache，所以在putty中输入：

```
sudo /etc/init.d/apache2 restart 
```

**调试：- 检查是否在 PHP 中启用 curl：-**

方法一：

```
function curlEnabled() {
    if (ini_get('safe_mode') == 1)
        return 0;

    return in_array('curl', get_loaded_extensions());
} 
```

方法二：

```
function_exists('curl_init'); 
```

请打印 php_info(); 您的服务器并将其张贴在这里。

请也参考以下链接：- [检测 cURL 是否有效？](https://stackoverflow.com/questions/5866348/detect-if-curl-works) [PHP CURL 启用 Linux](https://stackoverflow.com/questions/8014482/php-curl-enable-linux)

# git - 如何使用新内容更新我的功能/发布/修补程序/支持分支？

> ID：15742060
> 
> 赞同：1
> 
> 时间：2013-04-01T10:52:01.297
> 
> 标签：git

例如，我正在处理功能分支，另一位开发人员刚刚推动起源/开发他的最新修复，我必须在我的功能分支中使用（添加）他的修复。

我应该怎么做？

```
git checkout -b my-feature-branch
... dealing with my issue ...
... alarm! another developer just released his fix, I need it here in my feature branch ...
git stash
git checkout develop
git pull origin develop
git rebase my-feature-branch develop
git checkout my-feature-branch
git merge develop
git stash apply
... dealing with my issue ...
git commit
git checkout develop
git merge my-feature-develop
git push origin develop 
```

这是正确的行为吗？

在那种情况下，很难弄清楚我的分支从哪里开始以及在哪里完成。第二点我正在`rebase`为公共分支（开发）做，这不好，对吧？

用新信息更新（刷新）工作分支的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:53:44.070

找到修补程序的提交，然后找到[`cherry-pick`](https://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)它/它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:32:07.973

这似乎是错误的：`git rebase my-feature-branch develop`

它应该是：

```
git rebase develop my-feature-branch` 
```

您需要做的是在现在更新的分支`my-feature-branch`之上重新调整您已经完成的工作。 无需在.`develop`
`merge``my-feature-branch`

完整的序列看起来像

```
git checkout -b my-feature-branch
... dealing with my issue ...
... alarm! another developer just released his fix, I need it here in my feature branch ...
git stash
git checkout develop
git pull origin develop

# remember that such a rebase will starts with a
# git checkout my-feature-branch
git rebase develop my-feature-branch
git stash apply
... dealing with my issue ...
git commit
git checkout develop
git merge my-feature-develop
git push origin develop 
```

# php - 将 javascript 变量设置为 PHP 数组的特定索引

> ID：15742065
> 
> 赞同：0
> 
> 时间：2013-04-01T10:52:22.593
> 
> 标签：php, javascript, ajax, arrays, json

我有一个（非常）大的 PHP 数组（有 649 个索引）。我想将一个 javascript 变量设置为它的特定索引，并且该索引将取决于另一个变量。有什么办法吗？我知道我可以使用 将整个 PHP 数组复制到 JavaScript 数组中`json_encode($phpArray)`，但我不希望在客户端加载整个数组（为了速度和某种安全性）。

```
 $phpArray[0] = "i am first element";
 $phpArray[1] = "i am second element";
 /* ......... */
 $phpArray[100] = "i am 100th element"; 
```

现在，让我们说，我想获得第二个元素`$phpArray`？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:59:30.753

下面是一个使用 jQuery`$.post`方法的例子：

```
$(document).ready(function(){
  var my_var;
  $.post("my-php-page.php",
         {my_index: 1},
         function(data) {
           my_var = data.my_value;
         },
         "json");
}); 
```

**我的-php-page.php**

```
<?php
 $phpArray[0] = "i am first element";
 $phpArray[1] = "i am second element";
 /* ......... */
 $phpArray[100] = "i am 100th element";
 echo json_encode(array("my_value" => $phpArray[$_POST['my_index']]));
?> 
```

这是你想要的吗？

# android - 如何在 Android 中检测无效的模式锁定条目

> ID：15742067
> 
> 赞同：0
> 
> 时间：2013-04-01T10:52:26.890
> 
> 标签：android

我想开发一个 Android 应用程序，当用户在解锁手机时输入无效的模式锁或密码时，它将执行一些操作。我对此了解不多。任何机构可以指导我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:27:24.160

创建一个`DeviceAdminReceiver`集合来处理`ACTION_PASSWORD_FAILED`事件，您的接收者将在`onPasswordFailed()`. 您可以在以下位置阅读有关设备管理 API 的更多信息：http: [//developer.android.com/guide/topics/admin/device-admin.html](http://developer.android.com/guide/topics/admin/device-admin.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T11:01:15.827

编辑：我认为这是可能的，但屏幕锁定在它自己的沙盒环境中运行。这些链接可能会对您有所帮助。

[错误锁定模式的 Android 侦听器](https://stackoverflow.com/questions/10274021/android-listener-for-wrong-lock-pattern)

[应用程序中的 Android 模式输入](https://stackoverflow.com/questions/13743068/android-pattern-input-in-application)

看看这个。

# c++ - 从多图（C++）中完全删除元素

> ID：15742075
> 
> 赞同：1
> 
> 时间：2013-04-01T10:52:52.470
> 
> 标签：c++, stl, containers, multimap, erase

所以我有一个多重映射，其中键是一个结构，值是另一个结构。

```
multimap<struct, struct> multimap1; 
```

`multimap1`包含（格式为`key`：）`value`

```
1: Random Value 1
2: Random Value 2
3: Random Value 3
4: Random Value 4 
```

我正在尝试从多图中删除一个值和一个*键*。假设我想删除多图的第二个条目。结果应该是这样的：

```
1: Random Value 1
3: Random Value 3
4: Random Value 4 
```

我有一个指向第二个*值*的迭代器，所以当我用 擦除它时`multimap1.erase(it)`，它应该删除第二个条目（至少我认为应该）。我一直在阅读有关删除条目和从多重映射中的内容，似乎只从多重映射中删除了值，而不是键。因此，如果使用指向第二个*值*的迭代器擦除第二个条目，它将执行此操作（如果我错了，请纠正我）：

```
1: Random Value 1
2: 
3: Random Value 3
4: Random Value 4 
```

有没有办法获得中间值结果？

编辑：所以我显然错了。如果你确实擦除，你会得到中间结果。我试图弄清楚为什么我没有正确擦除，因为当我调用擦除时我的代码段错误。如果我调用`it->first`，它会返回我想要删除的元素的键。如果我调用`it->second`，它将返回该键的值。所以如果我打电话`multimap.erase(it)`，它应该删除整个事情，对吗？

编辑 2：在我的代码中，我打印出来`it->first`并`it->second`确保指针指向正确的元素，并且确实如此。当我调用 时`multimap.erase(it)`，我停止了循环并打印出多图中的剩余元素。它正确打印了第一个元素，但随后打印了第二个元素，如下所示（编译器的输出）：

```
GEWolfC?`6??2?x3??2??2?x 1@4?????BUYA????BadWolfCorp1????AMstyKrq?4?X3??(4??3?    
X3PlanetExpress1GEqp7?L???5?d?5?x5??5?d2q7?7?X3??(4??3?X3?? 
```

很明显，它没有正确删除。我在 Linux 上运行 g++ 4.7。

编辑 3：很抱歉进行了这么多编辑，我想保留原始问题，以便人们将来参考。只是为了进行实验，我打电话给`multimap.erase(it->first)`它并且工作正常。有人可以向我解释为什么这有效以及这里发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:55:58.680

`erase`根据需要删除整个条目（“键值”对）。

有时，在谈论映射类型时会出现混淆，因为库规范定义`value_type`为“键值”对，而不仅仅是“值”（定义为`mapped_type`）；所以“价值”这个词可以互换使用来表示一个或另一个。

# c# - IPagedList 本地化

> ID：15742076
> 
> 赞同：2
> 
> 时间：2013-04-01T10:52:53.477
> 
> 标签：c#, asp.net-mvc

我正在使用第三方组件 ( `IPagedList`) 来实现分页。一切正常，例如我只需要本地化消息

```
Showing items 11 through 11 of 11. 
```

此消息文本是使用生成的`PagedListRenderOptions.MinimalWithItemCountText`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:11:44.783

使用以下代码设置自定义本地化格式：

```
var options = new PagedListRenderOptions();
options.PageCountAndCurrentLocationFormat = "Page {0} of {1}."; //your custom string goes gere
options.ItemSliceAndTotalFormat = "Showing items {0} through {1} of {2}."; 
```

# ruby-on-rails - 如何在没有 pgbackups 插件的情况下在 heroku 上进行数据库备份？

> ID：15742079
> 
> 赞同：2
> 
> 时间：2013-04-01T10:53:11.947
> 
> 标签：ruby-on-rails, heroku

我正在寻找一种在不使用 pgbackups 插件的情况下在 heroku 上进行数据库备份的方法。在这种情况下是否有任何宝石可以提供帮助？gem 也不应该使用命令行命令`pg_dump`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:25:10.390

您可以使用以下命令将副本保存到您的开发环境：

```
heroku db:pull 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T17:05:04.270

我将我的环境设置为 ( `PGHOST`, `PGPORT`, `PGDATABSE`, `PGUSER`, `PGPASSWORD`) 到 Heroku 实例，然后运行：

`pg_dump --clean --blobs | sed 's/db_user_on_heroku/db_user_on_local/g' > /tmp/db.pg`

然后我将环境设置为指向我的本地数据库，然后运行：

`psql < /tmp/db.pg`

# html - 页脚未正确放置（未占用全宽）

> ID：15742081
> 
> 赞同：0
> 
> 时间：2013-04-01T10:53:25.683
> 
> 标签：html, css, footer

我希望页脚占据页面的整个宽度，但由于某种原因，当我在 safari 中预览时它不起作用（在 Dreamweaver 中看起来不错）。怎么了？我希望它被放置在页面的底部并占据整个宽度。

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
  <title>
    Liveweave
  </title>

  <!-- Place cursor after this and select a
JavaScript library from the menu above -->

  <!-- Supports context-sensitive CSS3 auto-completion -->
  <!-- Style starts here. Try adding new CSS tags. -->
  <style type="text/css">    
    @charset"UTF-8";
      /* CSS Document */

      Html, body {
        padding: 0;
        margin: 0;
        height: 100%;
        font-family: Tahoma, Geneva, sans-serif;
        background: rgb(255,255,255);
        /* Old browsers */
        /* IE9 SVG, needs conditional override of 'filter' to 'none' */

        background: url(data:image/svg+xml;
        base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPHJhZGlhbEdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY3g9IjUwJSIgY3k9IjUwJSIgcj0iNzUlIj4KICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZmZmZmYiIHN0b3Atb3BhY2l0eT0iMSIvPgogICAgPHN0b3Agb2Zmc2V0PSI1MyUiIHN0b3AtY29sb3I9IiNmNmY2ZjYiIHN0b3Atb3BhY2l0eT0iMSIvPgogICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjZjdmN2Y3IiBzdG9wLW9wYWNpdHk9IjEiLz4KICA8L3JhZGlhbEdyYWRpZW50PgogIDxyZWN0IHg9Ii01MCIgeT0iLTUwIiB3aWR0aD0iMTAxIiBoZWlnaHQ9IjEwMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
        background: -moz-radial-gradient(center, ellipse cover, rgba(255,255,255,1) 0%, rgba(246,246,246,1) 53%, rgba(247,247,247,1) 100%);
        /* FF3.6+ */
        background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%, rgba(255,255,255,1)), color-stop(53%, rgba(246,246,246,1)), color-stop(100%, rgba(247,247,247,1)));
        /* Chrome,Safari4+ */
        background: -webkit-radial-gradient(center, ellipse cover, rgba(255,255,255,1) 0%, rgba(246,246,246,1) 53%, rgba(247,247,247,1) 100%);
        /* Chrome10+,Safari5.1+ */
        background: -o-radial-gradient(center, ellipse cover, rgba(255,255,255,1) 0%, rgba(246,246,246,1) 53%, rgba(247,247,247,1) 100%);
        /* Opera 12+ */
        background: -ms-radial-gradient(center, ellipse cover, rgba(255,255,255,1) 0%, rgba(246,246,246,1) 53%, rgba(247,247,247,1) 100%);
        /* IE10+ */
        background: radial-gradient(ellipse at center, rgba(255,255,255,1) 0%, rgba(246,246,246,1) 53%, rgba(247,247,247,1) 100%);
        /* W3C */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#f7f7f7', GradientType=1 );
        /* IE6-8 fallback on horizontal gradient */
      }
      #header {
        width: 100%;
        height: 60px;
        border-top: solid 4px #00539E;
      }
      #logo {
        position: absolute;
        left: 20px;
        top: 35px;
        color: #000;
        font-size: 20px;
      }
      #header-text {
        width: 400px;
        position: absolute;
        top: 70px;
        left: 20px;
        font-size: 12px;
        font-weight: 300;
        color: #333;
      }
      /* mainmenu */

      #mainmenu {
        width: 100%;
        margin-right: 20px;
        /* min-height: 180px;
        */
        padding-bottom: 20px;
        margin-top: -52px;
        /* padding-top: -42px;
        */
        overflow: hidden;
      }
      #mainmenu ul {
        list-style: none;
        margin: 0;
        float: right;
        color: #FFF;
      }
      #mainmenu ul li {
        display: inline-block;
        float: left;
        width: 140px;
        line-height: 18px;
      }
      #mainmenu>ul>li {
        margin-left: 20px;
      }
      #mainmenu ul li a {
        font-size: 12px;
        display: block;
        text-decoration: none;
      }
      #mainmenu ul li a, #mainmenu ul ul:hover li a {
        color: #333;
        padding-left: 4px;
        letter-spacing: 1px;
        -moz-transition-property: all, -moz-transform;
        -moz-transition-duration: .4s, .4s, .4s, .4s;
        -moz-transition-timing-function: ease-out, ease-in, linear, ease-in-out;
        -ms-transition-property: all, -ms-transform;
        -ms-transition-duration: .4s, .4s, .4s, .4s;
        -ms-transition-timing-function: ease-out, ease-in, linear, ease-in-out;
        -o-transition-property: all, -o-transform;
        -o-transition-duration: .4s, .4s, .4s, .4s;
        -o-transition-timing-function: ease-out, ease-in, linear, ease-in-out;
        -webkit-transition-property: all, -webkit-transform;
        -webkit-transition-duration: .4s, .4s, .4s, .4s;
        -webkit-transition-timing-function: ease-out, ease-in, linear, ease-in-out;
        transition-property: all, transform;
        transition-duration: .4s, .4s, .4s, .4s;
        transition-timing-function: ease-out, ease-in, linear, ease-in-out;
      }
      #mainmenu ul ul li a:hover, #mainmenu ul ul li.current-menu-item a {
        color: #005EBC;
        -moz-transition-property: all, -moz-transform;
        -moz-transition-duration: .4s, .4s, .4s, .4s;
        -moz-transition-timing-function: ease-out, ease-in, linear, ease-in-out;
        -ms-transition-property: all, -ms-transform;
        -ms-transition-duration: .4s, .4s, .4s, .4s;
        -ms-transition-timing-function: ease-out, ease-in, linear, ease-in-out;
        -o-transition-property: all, -o-transform;
        -o-transition-duration: .4s, .4s, .4s, .4s;
        -o-transition-timing-function: ease-out, ease-in, linear, ease-in-out;
        -webkit-transition-property: all, -webkit-transform;
        -webkit-transition-duration: .4s, .4s, .4s, .4s;
        -webkit-transition-timing-function: ease-out, ease-in, linear, ease-in-out;
        transition-property: all, transform;
        transition-duration: .4s, .4s, .4s, .4s;
        transition-timing-function: ease-out, ease-in, linear, ease-in-out;
      }
      p {
        font-size: 13px;
        color: #333;
        font-weight: 300;
      }
      h1 {
        font-size: 30px;
        letter-spacing: 1px;
        color: #0064C5;
        /* display: inline-block;
        */
        margin-bottom: 0;
      }
      h2 {
        font-size: 22px;
        letter-spacing: 1px;
        color: #BBB;
        /* display: inline-block;
        */
        margin-bottom: 0;
      }
      H5 {
        text-transform: uppercase;
        letter-spacing: 1px;
        margin-bottom: 5px;
        padding-left: 4px;
        font-size: 11px;
        border-bottom: 1px dotted #666;
        background: rgb(29,115,196);
        /* Old browsers */
        /* IE9 SVG, needs conditional override of 'filter' to 'none' */

        background: url(data:image/svg+xml;
        base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzFkNzNjNCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMwMDY0YzUiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
        background: -moz-linear-gradient(top, rgba(29,115,196,1) 0%, rgba(0,100,197,1) 100%);
        /* FF3.6+ */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(29,115,196,1)), color-stop(100%, rgba(0,100,197,1)));
        /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(top, rgba(29,115,196,1) 0%, rgba(0,100,197,1) 100%);
        /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(top, rgba(29,115,196,1) 0%, rgba(0,100,197,1) 100%);
        /* Opera 11.10+ */
        background: -ms-linear-gradient(top, rgba(29,115,196,1) 0%, rgba(0,100,197,1) 100%);
        /* IE10+ */
        background: linear-gradient(to bottom, rgba(29,115,196,1) 0%, rgba(0,100,197,1) 100%);
        /* W3C */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1d73c4', endColorstr='#0064c5', GradientType=0 );
        /* IE6-8 */
      }
      div#content-left {
        float: left;
        width: 40%;
      }
      div#content-headline {
        float: right;
        width: 55%;
        padding-right: 50px;
        overflow: auto;
      }
      div#content-right {
        float: right;
        width: 55%;
        max-height: 60%;
        padding-right: 50px;
      }
      div#content-center {
        overflow: hidden;
      }
      /* footer */
      #main_footer {
        clear:both;
        position: fixed;
        background: #cfc8c0;
        height: 46px;
        overflow: hidden;
        display: block;
        bottom:0;
      }
      #main_footer #lien_hot_news {
        background: #e14242 url(pics/hot_news.gif) 50% 0 no-repeat;
        color: #fff;
        font: italic normal 24px Georgia, serif;
        height: 38px;
        width: 145px;
        padding-top: 8px;
        display: block;
        text-align: center;
        float: left;
      }
      #main_footer #lien_hot_news:hover {
        background-color: #e92c26;
      }
      #main_footer #dernier_tweet {
        float: left;
        margin-left: 11px;
        margin-top: 11px;
        background: #fff url(ics/dernier_tweet_gauche.gif) 0 0 no-repeat;
        position: relative;
      }
      #main_footer #dernier_tweet .lien_twitter {
        position: absolute;
        top: 0;
        left: 0;
        width: 30px;
        height: 24px;
        display: block;
      }
      #main_footer #dernier_tweet .inner {
        max-width: 550px;
        background: url(../images/picto/dernier_tweet_droite.gif) right 0 no-repeat;
        padding: 4px 15px 5px 53px;
        height: 15px;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }
      #main_footer #dernier_tweet a {
        color: #75716c;
      }
      #main_footer #dernier_tweet a:hover {
        color: #444;
      }
      #main_footer #dernier_tweet .last_tweet {
        overflow: hidden;
      }
      #main_footer .autres_liens {
        position: absolute;
        right: 12px;
        top: 9px;
        font: italic normal 15px Georgia, serif;
        color: #95897c;
      }
      #main_footer .autres_liens .label {
        float: left;
        padding-right: 3px;
        padding-top: 5px;
      }
      #main_footer .autres_liens a {
        float: left;
        display: block;
        margin-left: 5px;
      }
      #main_footer .autres_liens a img {
        width: 28px;
        height: 28px;
        display: block;
      }

    }
  </style>
  <!-- Style ends here -->

  </head>

  <body>
    <script type="text/javascript">
      $(document).ready(function () {
        $("#MetTileFive").MetTileFive({
          timeInterval: 6000
        }
                                     );
    }
                     );
  </script>
  <div id="header">
  </div>
  <div id="logo">
    My Name
  </div>
  <div id="mainmenu">
    <ul>
      <li>
        <h5>
          Menu I
        </h5>
        <ul>
          <li>
            <a title="" href="">
              Biography
            </a>

          </li>
          <li>
            <a title="" href="">
              Publications
            </a>

          </li>
        </ul>
        <li>
          <h5>
            Menu 2
          </h5>
          <ul>
            <li>
              <a title="" href="">
                Demo
              </a>

            </li>
            <li>
              <a title="" href="">
                Features
              </a>

            </li>
            <li>
              <a title="" href="">
                Comparison
              </a>

            </li>
          </ul>
        </li>
        <li>
          <h5>
            Menu 3
          </h5>
          <ul>
            <li>
              <a title="" href="">
                Item 1
              </a>

            </li>
            <li>
              <a title="" href="">
                Item 2
              </a>

            </li>
            <li>
              <a title="" href="">
                Item 3
              </a>

            </li>
          </ul>
        </li>
        <li>
          <h5>
            Menu 4
          </h5>
          <ul>
            <li>
              <a title="" href="">
                ddfd
              </a>

            </li>
            <li>
              <a title="" href="">
                dsfd
              </a>

            </li>
          </ul>
        </li>
      </ul>
    </div>
    <!-- END DIV Main Menu -->

    <div id="header-text">
      Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
      tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
      quis nostrud exercitation ullamco laboris nisi ut.
    </div>

    <div id="content-left">
      <a id="MetTileFive" class="tile-five" href="http://www.facebook.com/jEffectBox" target="_blank">
        <div>
          <label>
            Lorem Ipsum
          </label>
          <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing elit... nisi ut aliquip ex ea commodo consequat.
          </p>
        </div>
        <div>
          <label>
            Ipsum
          </label>
          <p>
            Lorem ipsum dolor sit amet, consectetur adipisicing elit... laboris nisi ut aliquip ex ea commodo consequat.
          </p>
        </div>
        <div>
          <label>
            Lorem
          </label>
          <p>
            Lorem ipsum dolor sit amet, consectetur a... laboris nisi ut aliquip ex ea commodo consequat.
          </p>
        </div>
      </a>
    </div>
    <div id="content-headline">
      <h1>
        Novitates autem si spem
      </h1>
    </div>
    <div id="content-right">
      <p>
        Novitates autem si spem adferunt, ut tamquam in herbis non fallacibus
        fructus appareat, non sunt illae quidem repudiandae, vetustas tamen suo
        loco conservanda; maxima est enim vis vetustatis et consuetudinis. Quin
        in ipso equo, cuius modo feci mentionem, si nulla res impediat, nemo est,
        quin eo, quo consuevit, libentius utatur quam intractato et novo. Nec vero
        in hoc quod est animal, sed in iis etiam quae sunt inanima, consuetudo
        valet, cum locis ipsis delectemur, montuosis etiam et silvestribus, in
        quibus diutius commorati sumus.
      </p>
      <h2>
        This is a sub-title
      </h2>
      <p>
        Ultima Syriarum est Palaestina per intervalla magna protenta, cultis abundans
        terris et nitidis et civitates habens quasdam egregias, nullam nulli cedentem
                sed sibi vicissim velut ad perpendiculum aemulas: Caesaream, quam ad honorem
                Octaviani principis exaedificavit Herodes, et Eleutheropolim et Neapolim
                itidemque Ascalonem Gazam aevo superiore exstructas.
      </p>
      <p>
        Itaque verae amicitiae difficillime reperiuntur in iis qui in honoribus
        reque publica versantur; ubi enim istum invenias qui honorem amici anteponat
        suo? Quid? Haec ut omittam, quam graves, quam difficiles plerisque videntur
        calamitatum societates! Ad quas non est facile inventu qui descendant.
        Quamquam Ennius recte. END END END
      </p>
    </div>
    <footer id="main_footer">

      <a href="#_" id="lien_hot_news">
        Hot News
      </a>
      <div id="dernier_tweet">
        <a href="https://twitter.com/" class="lien_twitter" target="_blank">
        </a>
        <div class="inner">
          <!-- Ajax load to prevent cache behavior -->
        </div>
      </div>
      <div class="autres_liens">

        <div class="label">
          Check us also on :
        </div>
        <a href="http://" target="_blank">
          <img src="pics/footer_facebook_2.png" alt="facebook" />
        </a>
        <a href="http:/" target="_blank">
          <img src="pics/footer_youtube_2.png" alt="twitter" />
        </a>
        <a href="http://" target="_blank">
          <img src="pics/footer_slideshare_2.png" alt="slideshare" />
        </a>
      </div>
    </footer>

  </body>
  </html>

</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T10:57:08.560

您需要将宽度指定为 100%

```
 #main_footer {
        clear:both;
        position: fixed;
        background: #cfc8c0;
        height: 46px;
        overflow: hidden;
        display: block;
        bottom:0; width:100%
      } 
```

**[演示](http://liveweave.com/XTePr7)**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T10:57:38.450

请按以下方式添加css

```
#main_footer{
    width:100%;
} 
```

[http://liveweave.com/xlhGg9](http://liveweave.com/xlhGg9)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T10:56:21.963

您的页脚没有定义任何宽度。

给你的页脚宽度 100% 即`#main_footer`用下面的更新 css

```
#main_footer {
   clear: both;
   position: fixed;
   background: #cfc8c0;
   height: 46px;
   overflow: hidden;
   display: block;
   bottom: 0;
   width: 100%; /* add this rule */
} 
```

查看您的[工作示例](http://liveweave.com/E5DR4l)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T10:56:25.113

你给了它一个固定的位置，没有提供一个宽度。`position: fixed;`除非您另有说明，否则它仅与它包含的内容一样大。

添加`width: 100%;`到页脚的 CSS。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-13T14:24:49.793

`width: 100%;`或者`width: 100vw;`会做。你没有定义宽度。

# java - DeflatorInputStream 和 DeflatorOutputStream 不重构原始数据

> ID：15742087
> 
> 赞同：11
> 
> 时间：2013-04-01T10:53:55.820
> 
> 标签：java, compression, deflate

我想压缩一些数据，所以我遇到了 DeflatorInputStream 和 DeflatorOutputStream 类。但是，以下示例表明，在使用这些类时，我似乎无法重建原始数据。

当我切换到 ZipInputStream 和 ZipOutputStream 时，它确实可以工作，但由于我本身不需要 zip 文件，我认为通用压缩会更好。主要是我有兴趣了解为什么这个例子不起作用。

```
//Create some "random" data
int bytesLength = 1024;
byte[] bytes = new byte[bytesLength];
for(int i = 0; i < bytesLength; i++) {
     bytes[i] = (byte) (i % 10);
}

//Compress the data, and write it to somewhere (a byte array for this example)
ByteArrayOutputStream arrayOutputStream = new ByteArrayOutputStream();
DeflaterOutputStream outputStream = new DeflaterOutputStream(arrayOutputStream);
outputStream.write(bytes);

//Read and decompress the data
byte[] readBuffer = new byte[5000];
ByteArrayInputStream arrayInputStream = new ByteArrayInputStream(arrayOutputStream.toByteArray());
DeflaterInputStream inputStream = new DeflaterInputStream(arrayInputStream);
int read = inputStream.read(readBuffer);

//Should hold the original (reconstructed) data
byte[] actuallyRead = Arrays.copyOf(readBuffer, read);

//Results differ - will print false
System.out.println(Arrays.equals(bytes, actuallyRead)); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-01T11:37:30.377

责备历史先例。在 Unix 上，用于反转 a 的函数`deflate`称为`inflate`. 因此，与许多其他 Java IO 类不同，输入和输出流对没有（显然）匹配的名称。

DeflaterOutputStream 实际上不允许您反转通货紧缩，而是在字节从接收器传递到源时对其进行压缩。DeflaterInputStream*也会*放气，但它会在数据从源流向接收器时执行其操作。

为了以未压缩（膨胀）格式读取数据，您需要使用`InflaterInputStream`：

```
InflaterInputStream inputStream = new InflaterInputStream(arrayInputStream); 
```

此外，由于一次调用可能无法从流中获取所有压缩数据`read`，因此您需要使用循环。像这样的东西：

```
int read;
byte[] finalBuf = new byte[0], swapBuf;
byte[] readBuffer = new byte[5012];

ByteArrayInputStream arrayInputStream = new ByteArrayInputStream(
        compressed);
InflaterInputStream inputStream = new InflaterInputStream(
        arrayInputStream);
while ((read = inputStream.read(readBuffer)) != -1) {
    System.out.println("Intermediate read: " + read);
    swapBuf = finalBuf;
    finalBuf = new byte[swapBuf.length + read];
    System.arraycopy(swapBuf, 0, finalBuf, 0, swapBuf.length);
    System.arraycopy(readBuffer, 0, finalBuf, swapBuf.length, read);
} 
```

最后，确保在检索压缩字节之前刷新你的 deflater 输出流（或者关闭流）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T11:38:56.620

只有 2 个小改动可以使您的代码正常工作。

```
//Compress the data, and write it to somewhere (a byte array for this example)
ByteArrayOutputStream arrayOutputStream = new ByteArrayOutputStream();
DeflaterOutputStream outputStream = new DeflaterOutputStream(arrayOutputStream);
outputStream.write(bytes);
outputStream.close(); 
```

首先，您必须**close()**输出流。通货紧缩器必须完成一些最后的步骤才能完成他的工作。

```
InflaterInputStream inputStream = new InflaterInputStream(arrayInputStream); 
```

如果您使用**Deflator** InputStream，您将再次压缩压缩数据。用**Inflator** InputStream 替换它，您的代码就可以正常工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-11T06:14:42.690

好的，我正在添加此响应，因为我有一个非常痛苦的实现，即使用 Java 和 SpringBoot (RestTemplate) 使用 IBM DataStage v11.7 中的一个 API。我不确定其他人是否会在使用此类产品或任何其他产品时遇到类似问题……但是这些天我遇到了 PKIX 问题、API 暴露于自签名证书以及最后一个 deflate 标头的问题。很抱歉用这三个回复写了一篇大文章，但您将能够找到前两个问题（PKIX 或具有自签名证书和 RestTemplate 对象的端点）的类似回复。我在这里添加这个是因为 Inflater 还没有很多方法。

其他一些答案说，使用带有 resttemplate 的自定义 httpclient 可能会有所帮助，或者可能已经包含自动“解压缩”，但不知何故，这种情况并不相同。

解压缩或膨胀响应有点棘手，最后添加一个额外的字节是神秘的“蛋糕上的樱桃”。经过一番挣扎后，我设法得到了响应，但它正在打印奇怪/特殊的字符。我认为这是一些编码问题，但实际上是 Inflater 的一些问题。我必须调试以确定响应大小（长度）实际上与我在 Postman 中收到的相同。所以我说，好吧，长度是相似的，所以可能会发生什么。因此，感谢为我们的解决方案做出贡献的所有其他开发人员。

```
import java.security.KeyManagementException;
import java.security.KeyStoreException;
import java.security.NoSuchAlgorithmException;
import java.security.cert.X509Certificate;
import java.util.HashMap;
import java.util.Map;
import java.util.Map.Entry;

import javax.net.ssl.SSLContext;

import org.apache.http.client.HttpClient;
import org.apache.http.conn.ssl.SSLConnectionSocketFactory;
import org.apache.http.impl.client.HttpClients;
import org.apache.http.ssl.TrustStrategy;
import org.springframework.http.HttpEntity;
import org.springframework.http.HttpHeaders;
import org.springframework.http.HttpMethod;
import org.springframework.http.ResponseEntity;
import org.springframework.http.client.HttpComponentsClientHttpRequestFactory;
import org.springframework.web.client.RestTemplate;

import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.util.zip.DataFormatException;
import java.util.zip.Inflater;
import java.util.zip.InflaterInputStream;

    private static Map<String, String> headersMap = new HashMap<String, String>() {
        {
            put("Authorization", "Basic XYZ");
            put("Accept", "*/*");
            put("Accept-Encoding", "deflate");
            put("Connection", "keep-alive");
        }
    };

    private static final String baseUrlDesigner = "https://{HOST}/ibm/iis/api/dscdesignerapi";

    private static final String designerGetAllJobs = "?api=getJobList&hostName={HOST}&projectName={PROJECT}&compress=nowrap9";

    public static RestTemplate getRestTemplateNoSSLValidation( ) {
        TrustStrategy acceptingTrustStrategy = (X509Certificate[] chain, String authType) -> true;
        SSLContext sslContext = null;
        try {
            sslContext = org.apache.http.ssl.SSLContexts.custom()
                    .loadTrustMaterial(null, acceptingTrustStrategy)
                    .build();
        } catch (KeyManagementException e2) {
            e2.printStackTrace();
        } catch (NoSuchAlgorithmException e2) {
            e2.printStackTrace();
        } catch (KeyStoreException e2) {
            e2.printStackTrace();
        }

        SSLConnectionSocketFactory csf = new SSLConnectionSocketFactory(sslContext);

        HttpClient httpClient = HttpClients.custom()
                .setSSLSocketFactory(csf)               
                .disableContentCompression()
                .build();

        HttpComponentsClientHttpRequestFactory requestFactory =
                new HttpComponentsClientHttpRequestFactory();

        requestFactory.setHttpClient(httpClient);

        RestTemplate restTemplate = new RestTemplate(requestFactory);
        return restTemplate;
    }

    public static <T> ResponseEntity<T> sendRequest(String url, HttpMethod method, Map<String,String> headerList, Class<T> responseType) {    
        RestTemplate restTemplate = getRestTemplateNoSSLValidation(); 
        HttpHeaders headers = new HttpHeaders();        
        for (Entry<String,String> e:headerList.entrySet())          
            headers.add(e.getKey(),e.getValue());

        HttpEntity<String> request = new HttpEntity<String>(null, headers);     

        ResponseEntity<T> result = (ResponseEntity<T>) restTemplate.exchange(url, method, request, responseType);       

        return result;      
    }       

    public static String decompress(byte[] bytes) {
        Inflater inf = new Inflater(true);
        InputStream in = new InflaterInputStream(new ByteArrayInputStream(bytes), inf);
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        try {
            byte[] buffer = new byte[8192];
            int len;
            while ((len = in.read(buffer)) > 0)
                baos.write(buffer, 0, len);
            baos.write(new byte[1], 0, 1); // FIX. Had to force one extra byte, otherwise the body string was not read properly :shrug:
            return new String(baos.toByteArray(), "UTF-8");
        } catch (IOException e) {
            throw new AssertionError(e);
        }
    }

    public static void main(String[] args) throws IOException {
        ResponseEntity<byte[]> responseBytes =
          sendRequest(baseUrlDesigner + designerGetAllJobs,
                HttpMethod.GET, headersMap, byte[].class);
        String respString = decompress(responseBytes.getBody());
        System.out.println("Response lenght: " + respString.length());
        System.out.println("Response body: " + respString);
    } 
```

# android - android中文件的密码保护

> ID：15742091
> 
> 赞同：0
> 
> 时间：2013-04-01T10:54:11.870
> 
> 标签：android, encryption, password-protection

我想为存储在 SDCard 或应用程序沙箱中的文件提供某种保护。目前我正在使用 Cipher 加密或解密任何文件。使用 Cipher 的问题是时间。如果文件很大，则需要很多时间。就像目前我正在加密一个需要超过 4 分钟才能解密的视频文件。我想知道我们可以在不加密的情况下对文件应用某种密码保护吗？如果有人知道我们该怎么做，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:00:08.787

简短的回答是否定的。这是不可能的。文件在 SD 卡上存储为“1 和 0 的数组”，因此每个程序都可以访问 SD 卡并读取您的数据。加密是保护数据机密的最佳方式。

# c# - c#中event关键字的使用

> ID：15742098
> 
> 赞同：3
> 
> 时间：2013-04-01T10:54:41.103
> 
> 标签：c#, events, delegates

我想知道在 c# 中事件的确切用途是什么。我仍在学习 c#，所以我可能遗漏了一些东西，但是否可以只使用委托。
在这个例子中，我编写了一个类，其方法从 0 到 2^64 计数，每次达到一千的倍数时都会引发一个事件。这是代码：

```
namespace EventDelegate
{
class Program
{
    static void Main(string[] args)
    {
        EventRaiserClass _eventraiser = new EventRaiserClass();
        _eventraiser.handler = SomeEventHandler;
        _eventraiser.handler += AnotherEventHandler;
        _eventraiser.Loop();
        Console.Read();
    }

    static void SomeEventHandler(object sender, EventArgs args)
    {
        Console.WriteLine("Event raised");
    }

    static void AnotherEventHandler(object sendr, EventArgs args)
    {
        Console.WriteLine("Event raised (Another handler)");
    }
}

public delegate void Handler(object sender, EventArgs args);

class EventRaiserClass
{
    public Handler handler;
    public void Loop()
    {
        for (long i = 0; i < Int64.MaxValue; i++)
        {
            if ((i % 1000) == 0)
            {
                EventArgs args = new EventArgs();
                RaiseEvent(args);
                System.Threading.Thread.Sleep(1000);
            }
        }
    }

    private void RaiseEvent(EventArgs args)
    {
        if (handler != null)
            handler(this, args);
    }
} 
```

}

如果我将`handler`委托变量声明为这样的事件，会有什么不同`public event Handler handler`。
对不起，如果我有点含糊或遗漏了一些明显的东西，但我只是想知道在使用而不是仅仅使用委托时是否在幕后发生了其他事情，`event`或者它是否只是为了便于阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:22:09.547

事件和委托是相似的，但事件受到更多限制，这是有充分理由的。

`_eventraiser.handler`在您的代码中，您可以从外部执行各种操作。但是，您不应该做大部分这些事情。

考虑这一行：

```
_eventraiser.handler = SomeEventHandler; 
```

如果您使用委托，则每次尝试附加事件处理程序时都必须检查委托是否为*，*`null`然后使用 初始化它`=`，如果它不为空，则只需使用. 如果你忘记初始化，你会得到一个空引用异常，如果你输入太多，你会覆盖之前的所有东西。*`+=`*

 *如果在此示例中使用事件而不是委托，则不必执行任何操作，事实上，您甚至无法执行此操作。使用委托，您甚至可以接受它，然后将其传递给其他一些类，这可能非常危险。

以及您可以对委托做的所有其他事情也是如此`Invoke`：它们不是为事件而存在的。您可以对来自外部课程的事件做的唯一事情是`+=`and `-=`，仅此而已。您可以将它们视为具有复杂 getter 和 setter 的特殊公共接口的委托。

（事件也有一个特殊的`add`和`remove`语法，但这是一个相当不常用的功能）*

# perl - 如何验证页面是否成功加载

> ID：15742102
> 
> 赞同：1
> 
> 时间：2013-04-01T10:54:48.933
> 
> 标签：perl, selenium-rc

嗨，我有一个 url 可以打开 XML 格式的页面。现在页面没有任何样式信息，所以当我尝试使用时

```
assertTextPresent(); 
```

用于验证页面上显示错误的文本

```
 Couldn't access document.body.  Is this HTML page fully loaded? 
```

有没有其他方法可以验证页面是否已完全加载。

我正在使用 Perl 语言和 Selenium RC。我正在使用打开功能来启动页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:59:12.323

这基本上不是 Perl 问题。检查页面是否完全加载是客户端的问题，您可以使用 Javascript 来解决这个问题。使用 AJAX，在 XMLHTTPRequest 对象上，检查状态码 4 和响应码 200，就大功告成了。

# python - ubuntu - bz2 不可用（/usr/bin/python 旧版本，所以我将 /home/name/somedir 用于 python

> ID：15742108
> 
> 赞同：0
> 
> 时间：2013-04-01T10:55:28.113
> 
> 标签：python, ubuntu

我的服务器有 python 旧版本（2.6~），所以我创建了一个单独的目录来安装最新的 python。我已经从二进制安装。

现在，在安装 django-celery 时出现“bz2 模块不可用”的错误。

它实际上是从系统级 python 工作的，如下所示：

/usr/bin/python:
python shell 打开……
然后，import bz2；工作！

python（意思是，本地安装的python，在源/venv/bin/activate之后）
在python shell中，import bz2；说它不可用。你能不能让它适用于我的本地版本（不是全球版本）。

我找到并尝试过的资源：

[ImportError: Python 2.7.2 没有名为 bz2 的模块](https://stackoverflow.com/questions/8115280/importerror-no-module-named-bz2-for-python-2-7-2)

[Python 的 bz2 模块默认不编译](https://stackoverflow.com/questions/812781/pythons-bz2-module-not-compiled-by-default)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:00:54.090

一个[非常相似的问题](https://stackoverflow.com/questions/12344970/building-python-from-source-with-zlib-support)描述了相同的问题，但针对的是 zlib。简而言之，您需要`libbz2.so`在 Python 可以找到它们的某个位置及其标题。您可能需要下载[bzip2](http://www.bzip.org)源代码并在您的 homedir 中编译/安装它。

# bash - awk：将结果发送到使用 bash 变量命名的文件

> ID：15742109
> 
> 赞同：0
> 
> 时间：2013-04-01T10:55:34.813
> 
> 标签：bash, file, variables, awk, send

我有一个`LOG_FILENAME`存储日志文件名称的 bash 变量。我想要做的是启动`iostat -xnmp`并获取存储在 bash 变量中的每个迭代匹配模式的每个记录的字段 9、10 和 11 `DEVICE`。迭代次数存储在`time`bash var 中。我想做的是：

```
iostat -xnmp 5 $time | awk -v log=$LOG_FILENAME "/$DEVICE/" '{print $9" "$10" "$11}' input >> $log 
```

和其他人的很多变化`ENVIRON`......但仍然无法弄清楚我错在哪里。大多数时候我都会遇到语法错误。目前还没有特别的要求，所以任何解决方案都是合适的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:41:09.980

如果 DEVICE 格式正确（例如，不包含 a `/`），则其中任何一个都应该起作用：

```
... | awk  "/$DEVICE/"'{print $9, $10, $11}' OFS=' ' >> $LOG_FILENAME 
```

`'`（注意：和之间不能有任何空格`"`）或

```
... | awk 'match($0, device) {print $9, $10, $11 >> log}' OFS=' ' \
            device="$DEVICE" log=$LOG_FILENAME 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:48:12.660

我对此的看法（一个衬里还可以，但人类更容易将其作为单独的行来阅读）：

```
iostat -xnmp  $time | 
awk -v dev=$DEVICE  'index($0,dev)>0 {print $9,$10,$11}' >> $log 
```

您从标准输入读取。 `index($0,dev)>0`被使用是因为我认为你有一个磁盘设备。 `index($0,dev)>0`对于学习 awk 的人来说，可以缩短到`index($0,dev)` 不太清楚。

# c# - C#中的Char指针等价物

> ID：15742117
> 
> 赞同：0
> 
> 时间：2013-04-01T10:56:14.253
> 
> 标签：c#, c++, .net

我正在将 c++ 代码转换为 c#，而 c++ 中的 char 需要 8 位，而 c# 需要 16 位。我不知道 char*，所以

`char *`in的等价物是什么`C#`，我是否使用`byte[]`or`[MarshalAs(UnmanagedType.LPStr)] StringBuilder` 并告诉我`char`from `C++`to的等价物是否`C#`是`byte`or `string`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:36:59.590

对于输入参数，它可以是 a`string`或 a `byte[]`，具体取决于参数的含义。如果它表示一个字符序列，则使用`string`. 如果参数是一些任意数据的缓冲区，那么它很可能是一个`byte[]`.

但是在 C/C++ 中，a`char *`也可以是输出参数，例如在`sprintf`函数中。在这种情况下， a`StringBuilder`或 a`byte[]`将是等效的类型，这再次取决于参数的含义。

关于 C# 中的`char`数据类型，请记住`char`C# 中的 a 表示字符，而 C/C++ 的含义更接近`byte`C# 中的 a。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:08:57.980

无法正确理解问题，但 C# 也有 Char 类型[http://www.dotnetperls.com/char](http://www.dotnetperls.com/char)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T11:31:32.280

这取决于：

1.  `char *ptr``string`如果它充当字符串容器（如 c 中常用的），则应替换为。
2.  如果重要的是其中的价值并在`[-127,128]`使用之间限制其范围，`char[]`或者`byte[]` 例如`char[] array1 = { 'b', 'c', 'a' };`

# android - 在 ListActivity 中加载 BIG SQLiteDatabase

> ID：15742118
> 
> 赞同：1
> 
> 时间：2013-04-01T10:56:19.987
> 
> 标签：android, sqlite, android-sqlite

我正在开发一个需要快速完成的 Android 项目。

该应用程序的功能之一是加载 SQLite 数据库内容并将其列在 ListActivity 内的 ListView 中。

数据库包含几个表，其中 2 个非常大。

数据库中的每个项目都有很多列，其中我需要显示至少 2 个（名称，价格），尽管最好是 3 个。

这似乎是一项非常容易的任务，因为在应用程序的这一部分中我需要做的就是读取数据库并列出它。我没有任何问题地做到了这一点，测试了应用程序与一个小型示例数据库。

在我的第一个版本中，我使用 Cursor 来获取查询，然后使用 ArrayAdapter 作为列表的适配器，在查询之后，我只需从头到尾循环游标，并为每个位置添加游标的内容到适配器。

onItemClickListener 与其他参数（基本上我打开类别）再次查询数据库，因此它清除适配器，然后循环游标并将其内容重新添加到适配器。

该应用程序运行起来就像一个魅力，但是当我使用现实生活中的大型数据库（> 300MB）时，我的应用程序突然需要很长时间才能显示内容，有时甚至会阻塞。

所以我做了一些研究并开始使用 SimpleCursorAdapter，它使用常用参数（String[] from、int[] to 等自动将 Cursor 的内容链接到 ListView，我使用了 android.R.layout.simple_list_item_2 和 android .R.id.text1 和 text2)。

问题是，加载时间并没有太大变化。

我在不同的网站和教程上遇到了一些建议的解决方案，其中大多数都以一种或另一种方式使用 AsyncTask 类。我尝试自己手动实现，但很难跟踪多个线程，我失败了。

教程一直在告诉如何使用内容提供程序执行此操作，但我发现我的具体情况并不清楚：非常大的 SQLite 数据库 -> 读取到 ListView。

现在我的脑海中充满了诸如 LoaderManager、LoaderAdapter 等概念，所有这些都在我的脑海中混杂在一起。

任何人都可以为我提供一个完整、漂亮、干净的解决方案来完成这个“简单”的任务吗？

再次：我想读取一个 BIG SQLiteDatabase 并将其显示在 ListView 中。我希望应用程序不要阻止。

我需要一个具有成员函数的类，该函数将查询和 ListActivity 的上下文作为参数，并负责在视图中显示查询结果。

请不要给我抽象的答案。我的时间不多了，我现在很困惑，我需要一个干净完整的解决方案。

你是我唯一的希望。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T12:18:58.253

如果你查询这么大的数据库需要tym，你需要找到一个聪明的方法，

就像限制您的数据库查询以获取前 10 或 30 个项目然后维护，一旦达到最后一个项目，查询其余 30 个项目并绑定它们

参考本教程，它将教你如何在列表视图中动态添加数据

[http://p-xr.com/android-tutorial-dynamicaly-load-more-items-to-the-listview-never-ending-list/](http://p-xr.com/android-tutorial-dynamicaly-load-more-items-to-the-listview-never-ending-list/)

以上列表已过期 chk this

[http://mobile.dzone.com/news/android-tutorial-dynamicaly](http://mobile.dzone.com/news/android-tutorial-dynamicaly)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:36:48.843

如果您查询大型数据库，则需要时间来获取数据并将其显示在列表视图中。所以最好在运行时填充数据。您可以使用 Lazy Adapter 概念来加载数据。此链接[1](http://www.coderzheaven.com/2012/09/23/simplest-lazy-loading-listview-android-data-populated-mysql-database-php/) 可能对您有用。

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T13:07:09.293

你也可以使用：

```
public class TodosOverviewActivity extends ListActivity implements
    LoaderManager.LoaderCallbacks<Cursor> 
```

检查此[链接](http://www.vogella.com/articles/AndroidSQLite/article.html#todo)以获取更多详细信息。

# ios - ios 本地化 MPMoviePlayerController 完成按钮

> ID：15742119
> 
> 赞同：0
> 
> 时间：2013-04-01T10:56:21.103
> 
> 标签：ios, localization, mpmovieplayercontroller

我正在为意大利编写一个 ios 应用程序。

当我启动`MPMoviePlayerController`时，顶部有一个“完成”按钮。我想将完成按钮文本更改为意大利语。

我更改`CFBundleDevelopmentRegion`为**`it`**并将模拟器的语言更改为意大利语，但“完成”按钮的文本仍然没有更改。

我应该怎么做才能本地化这个完成按钮。

提前致谢

# sql-server - 如何安全地将密码存储在数据库中？

> ID：15742123
> 
> 赞同：4
> 
> 时间：2013-04-01T10:56:29.260
> 
> 标签：sql-server, passwords

我已经读过将密码存储在数据库中的一种方法是通过以下方式。拥有一个包含用户名、哈希和盐列的数据库表。盐永远不会显示出来。

我用密码+盐生成哈希。密码由用户发送，不存储在数据库中。如果生成的哈希值与数据库中存储的哈希值相同，则密码正确。

但我有我的怀疑。如果我发送密码，它可能会在有线传输时被嗅探，所以我认为加密通信也是必要的。那么使用哈希和盐只是为了保护数据免受管理员的侵害？我的意思是，如果我将密码存储在数据库中，管理员可以轻松访问所有信息。如果我存储哈希，管理员无法访问用户的信息，因为管理员没有一半的信息，只有盐，没有密码。但是，当用户需要发送密码时，这可能会被某人嗅探，因此密码会暴露出来。

保护用户信息的最佳方式是什么？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T11:06:25.630

散列密码还可以保护您的数据免受外人侵害。想象一下，如果有人使用 SQL 注入访问您的数据，他只会得到一个哈希值而不是通行证。您可以使用 HTTPS 在您的网络上进行安全通信，并使用您现有的哈希密码表来获得良好的安全模型。[安全加盐密码散列](http://crackstation.net/hashing-security.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T11:48:36.783

如果您必须清楚地传输密码，那么您必须在传输过程中保护它。从浏览器到 http 服务器，您需要[SSL/TLS](http://en.wikipedia.org/wiki/Transport_Layer_Security)。从应用服务器到数据库，您需要[加密连接](http://msdn.microsoft.com/en-us/library/ms189067%28v=sql.105%29.aspx)。

有些方案不需要传输密码，最好知道的是[HTTP Digest](http://en.wikipedia.org/wiki/Digest_access_authentication)。您可以将 Digest 的`HA1`部分存储在数据库中。HA1 摘要中包含的领域秘密和用户名包含作为对[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)的有效保护，但摘要仍然基于 MD5 的事实使得该方案相对弱于装备齐全的蛮力。然而，这样的蛮力只会揭示特定于给定用户名和领域的冲突，因此几乎没有用处。

# c++ - 构造函数初始化后

> ID：15742124
> 
> 赞同：0
> 
> 时间：2013-04-01T10:56:37.180
> 
> 标签：c++

我有一组从公共基础派生的对象，`ApiObject`. 我需要能够在一个单独的数据结构中注册所有 ApiObjects，但我需要有一个正在创建的对象的实际地址，而不是基类（我正在使用多重继承）。

我不能把注册对象的代码放到`ApiObject`构造函数中，因为它不知道派生对象的地址；我也不能把它放在派生类的构造函数中，因为我们无法知道我们是否真的在构造另一个派生类（例如，如果类`B`继承自`A`，并且两者都可以构造）。

所以我看到的唯一选择是每次创建对象时显式调用注册函数，如

```
B* b = new B(...);
RegisterObject(b); 
```

但是，这似乎不是一个很好的解决方案，因为我必须记住每次都调用这个函数。

我想我应该提供更多背景信息来解释我为什么要这样做。对象是通过重载的 new 运算符创建的，它需要对象知道它创建的上下文（Lua 状态）。例如

```
Foo* object = new(L) Foo(...);
// Foo is derived from ApiObject, and we want ApiObject to have a reference to L 
```

目前它以一种不太优雅的方式完成 - new 运算符在对象之前分配额外的字节并将 L 指针存储在那里，以及一些额外的数据来描述对象类型。然后，基类通过 init 函数接收指向此“元数据”的指针。
否则，首先想到的是虚函数，但它们不能从构造函数中调用，所以我必须注册基`ApiObject`指针，但只能在以后调用虚函数，而我不是确定这比我当前的实现更漂亮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:10:49.653

需要的类型是`RegisterObject`什么？如果它需要 a `Base*`，那么您可以从 的构造函数中调用它`Base`，而不管最终层次结构如何。如果它采用其他类型，那么您想从该类型的构造函数中调用它；您*不想*从派生自 的所有类中调用它`Base`，而只想从派生自它所采用的任何类型的类中调用它。

如果`RegisterObject`需要 a `Base*`，并且您从派生类中的函数调用它，首先会发生的是您传递给它的指针将转换为 a `Base*`。 `RegisterObject`从不接收指向派生对象的指针，只接收派生对象中的指针`Base`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:01:57.747

您还可以从执行注册的 CRTP 类中派生要注册的每个对象，例如

```
template<class T>
struct registarar_t<T>
{
  registarar_t()
  {
     register(derived());
  }

  T* derieved()
  {
    return static_cast<T*>(this);
  }
}

struct IWantToRegister : registrar_t<IWantToRegister>, ApiObject
{
} 
```

另外，**请注意**，`derived()`指针是正确的，但对象尚未初始化（在父构造函数中访问它）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T11:10:14.677

也许kassak的解决方案更优雅，我不是那么先进，但我推荐这样的东西（寄存器应该在构造函数中调用，所以你不必每次都写：

```
#include <iostream>
struct ApiObject;
void registerObj(ApiObject *foo);

struct ApiObject{
    public:
        ApiObject(std::string n){
            name = n;
            registerObj(this);
        }

        std::string name;
};

void registerObj(ApiObject *foo){
    std::cout<<"register called on "<<foo->name<<"\n";
}

struct A : public ApiObject{
    public:
        A(std::string n) : ApiObject(n) {
            std::cout<<"init A\n";
        }
};

struct B : public ApiObject{
    public:
    B(std::string n) : ApiObject(n) {
        std::cout<<"init B\n";
    }
};

int main(){
    B *b = new B("b obj");
    A *a = new A("a obj");

    delete b;
    delete a;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T11:21:12.520

您可以从基本构造函数调用注册函数。只需将基本析构函数设为虚拟即可。基类和派生类的地址相同。只是在创建整个对象之前不要使用指针地址。

一旦完全创建了所有对象，就可以通过虚函数安全地使用指针地址或将指针地址动态转换为派生类。

# android - 从drawable获取图像并使用iText添加到PDF

> ID：15742125
> 
> 赞同：13
> 
> 时间：2013-04-01T10:56:38.150
> 
> 标签：android, pdf, itext, drawable

我想使用 iText 将图像添加到 android PDF。我想在不先将图像保存到 SDCard 的情况下实现这一点。我将图像放入 res/drawable 文件夹，但证明图像路径不起作用并且抛出 FileNotFound 异常。我的路径是这样的：

```
String path = “res/drawable/myImage.png”
Image image = Image.getInstance(path);
document.add(image); 
```

现在请建议我一个解决方案，我将如何将正确的文件路径添加到 getInstance(...) 方法。谢谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-01T11:04:29.060

当然，它不会那样工作。

将您的图像移动到资产文件夹以使用 getassets() 方法访问它

```
// load image
    try {
            // get input stream
           InputStream ims = getAssets().open("myImage.png");
           Bitmap bmp = BitmapFactory.decodeStream(ims);
           ByteArrayOutputStream stream = new ByteArrayOutputStream();
           bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
           Image image = Image.getInstance(stream.toByteArray());
           document.add(image);
        }
   catch(IOException ex)
        {
            return;
        } 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-12-03T16:14:09.470

我为您的问题找到了解决方案。如果您想从可绘制文件夹中获取图像并使用 iText 将其放入 PDF 文件中，请使用以下代码：

```
try {
    document.open();
    Drawable d = getResources().getDrawable(R.drawable.myImage);
    BitmapDrawable bitDw = ((BitmapDrawable) d);
    Bitmap bmp = bitDw.getBitmap();  
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
    Image image = Image.getInstance(stream.toByteArray());
    document.add(image);    
    document.close();
} catch (Exception e) {
      e.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-26T03:54:53.683

这是使用iText将图像添加到PDF的代码，如果图像是动态的（即），如果图像在编译时无法添加到资产文件夹，

```
public void addImage(Document document,ImageView ivPhoto) throws DocumentException {
try {
     BitmapDrawable drawable = (BitmapDrawable) ivPhoto.getDrawable();       
     Bitmap bitmap = drawable.getBitmap();

     ByteArrayOutputStream stream = new ByteArrayOutputStream();    
     bitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);                             
     byte[] imageInByte = stream.toByteArray();
     Image image = Image.getInstance(imageInByte);
     document.add(image);
    }
    catch(IOException ex)
    {
        return;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-17T05:47:27.753

这是我的代码，要将图像设置在特定位置，请将图像移动到资产文件夹以通过 getassets() 方法获取图像。希望对你有帮助！

```
 try {

        InputStream ims = getAssets().open("header1.png");
        Bitmap bmp = BitmapFactory.decodeStream(ims);
        ByteArrayOutputStream stream = new ByteArrayOutputStream();
        bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
        Image image = Image.getInstance(stream.toByteArray());
        image.setAbsolutePosition(10f,750f);
        image.scaleToFit(850,78);
        document.add(image);
    }
    catch(IOException ex)
    {
        ex.printStackTrace();
        return;
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-06-13T12:40:10.463

```
try {
    FileInputStream in = new FileInputStream("input file uri");
    PdfReader pdfReader = new PdfReader(in);
    PdfStamper pdfStamper = new PdfStamper(pdfReader, new FileOutputStream("output file uri"));
    PdfContentByte content = pdfStamper.getOverContent(1);
   Image deliverImg = Image.getInstance("image URI");
   deliverImg.setAbsolutePosition(420f, 100f);
   content.addImage(deliverImg);
   pdfStamper.close();
} catch (DocumentException de) {
   Log.e("PDFCreator", "DocumentException:" + de);
} catch (IOException e) {
   Log.e("PDFCreator", "ioException:" + e);
} 
```

# java - 接口方法可以重载吗？

> ID：15742136
> 
> 赞同：2
> 
> 时间：2013-04-01T10:57:15.560
> 
> 标签：java, oop

我正在尝试实现一个重载的接口方法。我知道这在 Java 中不起作用，但是我如何重写以下内容以在我的`action()`方法中包含实现类型，而不是`Base`类型？

```
class Base;
class Foo extends Base;
class Bar extends Base;

interface IService {
   void action(Base base);
}

class FooService implements IService {
   void action(Foo foo) {
     //executes specific foo action
   }
}

class BarService implements IService {
   void action(Bar bar) {
     //executes specific Bar action
   }
} 
```

用法：

```
Base base; //may be foo or bar
anyService.action(bar); 
```

你明白了。我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:08:01.457

这在 Java 中不受支持，并且您违反了 OOP 规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T11:13:39.300

根据您的预期用途，有多种尝试。

如果您对 IService 的调用知道它们可以采用哪种对象，您可以尝试泛型。

```
interface IService<T extends Base> {
   void action(T foo)
} 
```

和用法：

```
IService<Foo> fooService = ...
fooService.action(fooObject); 
```

如果不是这种情况，您可以在您的“Base”类中进行一些检查，以便区分您的 IService 接口。

```
class Base {
   boolean acceptsFoo();
   boolean acceptsBar();
} 
```

你可以像这样使用它：

```
class AnyService implements IService {
   void action(Base base) {
     if (base.acceptsFoo()) {
        ((FooService) base).foo();
     }
} 
```

**然而**，这似乎是一个奇怪的设计。接口旨在提供统一访问，如果您需要区分参数，这几乎总是表明接口可以分成几个部分......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T11:14:10.210

定义一个两者都应该实现的接口`Foo`，`Bar`所以你可以这样做：

```
interface Actionable{
    public void action;
}

class Base;
class Foo extends Base implements Actionable;
class Bar extends Base implements Actionable;

interface IService {
   void action(Actionable a);
}

class FooService implements IService {
   void action(Actionable a) {
    ...
   }
}

class BarService implements IService {
   void action(Actionable a) {
    ...
   }
} 
```

无论如何，接口应该使您的代码更加健壮和可重用 - 如果您正在研究如何让它们工作，请考虑更好地设计您的应用程序。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-01T11:06:14.240

您始终可以将类型转换为特定类型以执行该操作。

```
void action(Base base) 
{
    if(base instanceof Foo)
    {
         Foo foo = (Foo) base;
         //executes specific foo action
    }
    else
    {
        // handle the edge case where the wrong type was sent to you
    } 
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-04-01T11:15:22.560

如果您要传递子类的对象，无论如何

然后将调用对象（子类）的行为（实例方法）传递（多态性）

即重载方法

# java - 在 GAE 应用程序中启用 HA/High Replication 选项

> ID：15742137
> 
> 赞同：2
> 
> 时间：2013-04-01T10:57:20.187
> 
> 标签：java, google-app-engine, maven

尝试`Transaction`在我的应用程序中执行此操作时出现此错误：

```
transactions on multiple entity groups only allowed in High Replication applications 
```

使用适用于 Eclipse 的 Google 插件，可以轻松启用 HA 选项；但是，当使用 GAE maven 原型运行时：`mvn gae:run`

不确定如何使用 Maven 启用 HA。我该如何启用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:49:52.517

您需要将您的应用程序迁移到 HR。

1.  打开管理控制台，选择要复制的应用程序，然后转到应用程序设置。
2.  在 New Application Identifier 文本框中，请注意当前应用程序的应用程序 ID 以 -hrd 后缀显示。如果您愿意，可以使用它或提供全新的应用程序 ID。
3.  单击检查可用性以验证您选择的应用程序 ID 是否可用。必要时更改 ID。
4.  单击复制应用程序。

然后您需要使用新的应用程序标识符。您无法在不更改应用程序 ID 的情况下从 Master/Slave 迁移到 HR。

[https://developers.google.com/appengine/docs/adminconsole/migration](https://developers.google.com/appengine/docs/adminconsole/migration)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T18:21:18.880

这里有一个文档。 [https://developers.google.com/appengine/docs/java/tools/devserver#Simulating_the_High_Replication_ConsistencyModel](https://developers.google.com/appengine/docs/java/tools/devserver#Simulating_the_High_Replication_ConsistencyModel)

也就是说，我不熟悉 kindleit gae 插件的配置。要在官方插件中启用此功能，您可以将其添加到您的 pom 中：

```
 <plugin>
    <groupId>com.google.appengine</groupId>
    <artifactId>appengine-maven-plugin</artifactId>
    <version>1.7.6</version>
    <configuration>
      <jvmFlags>
        <jvmFlag>-Ddatastore.default_high_rep_job_policy_unapplied_job_pct=20</jvmFlag>
      </jvmFlags>
    </configuration>
  </plugin> 
```

# ruby-on-rails - Solr with Rails - rake sunspot:reindex 不起作用

> ID：15742142
> 
> 赞同：11
> 
> 时间：2013-04-01T10:57:40.613
> 
> 标签：ruby-on-rails, solr, sunspot-solr, engineyard

我陷入了一个奇怪的问题，我正在寻找您的意见。

我的问题是：

在使用 Capistrano 在生产上部署我的应用程序后，当我进行 solr 重新索引时，它给了我以下错误：

```
$ bundle exec rake sunspot:reindex --trace
** Invoke sunspot:reindex (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute sunspot:reindex
Skipping progress bar: for progress reporting, add gem 'progress_bar' to your Gemfile
rake aborted!
RSolr::Error::Http - 404 Not Found
Error:     Not Found

Request Data: "<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete>query>type:OccupationData</query></delete>"
Backtrace: /data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rsolr-1.0.9/lib/rsolr/client.rb:268:in `adapt_response'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rsolr-1.0.9/lib/rsolr/client.rb:175:in `execute'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rsolr-1.0.9/lib/rsolr/client.rb:161:in `send_and_receive'
(eval):2:in `post'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rsolr-1.0.9/lib/rsolr/client.rb:67:in `update'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rsolr-1.0.9/lib/rsolr/client.rb:131:in `delete_by_query'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/indexer.rb:55:in `remove_all'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/session.rb:181:in `block in remove_all'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/session.rb:181:in `each'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/session.rb:181:in `remove_all'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rsolr-1.0.9/lib/rsolr/client.rb:268:in `adapt_response'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rsolr-1.0.9/lib/rsolr/client.rb:175:in `execute'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rsolr-1.0.9/lib/rsolr/client.rb:161:in `send_and_receive'
(eval):2:in `post'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rsolr-1.0.9/lib/rsolr/client.rb:67:in `update'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rsolr-1.0.9/lib/rsolr/client.rb:131:in `delete_by_query'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/indexer.rb:55:in `remove_all'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/session.rb:181:in `block in remove_all'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/session.rb:181:in `each'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/session.rb:181:in `remove_all'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot.rb:464:in `remove_all'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot_rails-1.3.3/lib/sunspot/rails/searchable.rb:178:in `solr_remove_all_from_index'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot_rails-1.3.3/lib/sunspot/rails/searchable.rb:197:in `solr_reindex'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot_rails-1.3.3/lib/sunspot/rails/tasks.rb:58:in `block (3 levels) in <top (required)>'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/class_set.rb:16:in `each'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/class_set.rb:16:in `each'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot_rails-1.3.3/lib/sunspot/rails/tasks.rb:57:in `block (2 levels) in <top (required)>'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/task.rb:246:in `call'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/task.rb:246:in `block in execute'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/task.rb:241:in `each'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/task.rb:241:in `execute'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/task.rb:184:in `block in invoke_with_call_chain'
/usr/lib64/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/task.rb:177:in `invoke_with_call_chain'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/task.rb:170:in `invoke'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:143:in `invoke_task'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:101:in `block (2 levels) in top_level'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:101:in `each'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:101:in `block in top_level'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:110:in `run_with_threads'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:95:in `top_level'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:73:in `block in run'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:160:in `standard_exception_handling'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:70:in `run'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/bin/rake:33:in `<top (required)>'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/bin/rake:19:in `load'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/bin/rake:19:in `<main>'
Tasks: TOP => sunspot:reindex 
```

为了进一步调查，当我查看黑子生产日志时，我看到：

```
INFO: Creating SolrCore 'collection1' using instanceDir: /data/APP_NAME/releases/20130325112326/solr/collection1
Apr 1, 2013 2:38:16 AM org.apache.solr.core.SolrResourceLoader <init>
INFO: new SolrResourceLoader for directory: '/data/APP_NAME/releases/20130325112326/solr/collection1/'
Apr 1, 2013 2:38:16 AM org.apache.solr.core.CoreContainer recordAndThrow
SEVERE: Unable to create core: collection1
org.apache.solr.common.SolrException: Could not load config for solrconfig.xml
    at org.apache.solr.core.CoreContainer.createFromLocal(CoreContainer.java:991)
    at org.apache.solr.core.CoreContainer.create(CoreContainer.java:1051)
    at org.apache.solr.core.CoreContainer$3.call(CoreContainer.java:634)
    at org.apache.solr.core.CoreContainer$3.call(CoreContainer.java:629)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.io.IOException: Can't find resource 'solrconfig.xml' in classpath or '/data/APP_NAME/releases/20130325112326/solr/collection1/conf/', cwd=/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/bundler/gems/sunspot-87e29212527f/sunspot_solr/solr
    at org.apache.solr.core.SolrResourceLoader.openResource(SolrResourceLoader.java:318)
    at org.apache.solr.core.SolrResourceLoader.openConfig(SolrResourceLoader.java:283)
    at org.apache.solr.core.Config.<init>(Config.java:103)
    at org.apache.solr.core.Config.<init>(Config.java:73)
    at org.apache.solr.core.SolrConfig.<init>(SolrConfig.java:117)
    at org.apache.solr.core.CoreContainer.createFromLocal(CoreContainer.java:989)
    ... 11 more
Apr 1, 2013 2:38:16 AM org.apache.solr.common.SolrException log
SEVERE: null:org.apache.solr.common.SolrException: Unable to create core: collection1
    at org.apache.solr.core.CoreContainer.recordAndThrow(CoreContainer.java:1672)
    at org.apache.solr.core.CoreContainer.create(CoreContainer.java:1057)
    at org.apache.solr.core.CoreContainer$3.call(CoreContainer.java:634)
    at org.apache.solr.core.CoreContainer$3.call(CoreContainer.java:629)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.solr.common.SolrException: Could not load config for solrconfig.xml
    at org.apache.solr.core.CoreContainer.createFromLocal(CoreContainer.java:991)
    at org.apache.solr.core.CoreContainer.create(CoreContainer.java:1051)
    ... 10 more
Caused by: java.io.IOException: Can't find resource 'solrconfig.xml' in classpath or '/data/APP_NAME/releases/20130325112326/solr/collection1/conf/', cwd=/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/bundler/gems/sunspot-87e29212527f/sunspot_solr/solr
    at org.apache.solr.core.SolrResourceLoader.openResource(SolrResourceLoader.java:318)
    at org.apache.solr.core.SolrResourceLoader.openConfig(SolrResourceLoader.java:283)
    at org.apache.solr.core.Config.<init>(Config.java:103)
    at org.apache.solr.core.Config.<init>(Config.java:73)
    at org.apache.solr.core.SolrConfig.<init>(SolrConfig.java:117)
    at org.apache.solr.core.CoreContainer.createFromLocal(CoreContainer.java:989)
    ... 11 more
Apr 1, 2013 2:38:16 AM org.apache.solr.servlet.SolrDispatchFilter init
INFO: user.dir=/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/bundler/gems/sunspot-87e29212527f/sunspot_solr/solr
Apr 1, 2013 2:38:16 AM org.apache.solr.servlet.SolrDispatchFilter init
INFO: SolrDispatchFilter.init() done 
```

从日志中可以清楚地看出，重新索引失败的原因有两个：

A. 无法创建核心：collection1
B. 在类路径中找不到资源“solrconfig.xml”

基于上述错误，以下是我尝试的技巧：

A. 检查 solr 的文件夹权限
B. 在 solr 中手动创建 collection1 并将 solrconfig.xml 复制到 /solr/collection1/conf 中。
C. 从 /data/APP_NAME/shared/bundled_gems/ruby/1.9.1/bundler/gems/sunspot-87e29212527f/sunspot_solr/solr 复制 lib 和 conf 文件夹并将其粘贴到 APP_NAME/solr/sunspot_rails 文件夹中。

但没有一个解决方案奏效。:-(

请建议。

[更新]：我的 Gemfile 看起来像这样：

```
gem "sunspot", "~> 1.3.3"
gem 'sunspot_rails', '~> 1.3.0'
gem 'sunspot_cell', :git => 'git://github.com/zheileman/sunspot_cell.git'
gem 'sunspot_cell_jars', :git => 'https://github.com/mrcsparker/sunspot_cell_jars.git'
gem 'sunspot_solr', :git => "git://github.com/sunspot/sunspot.git" 
```

[更新]：截至 2013 年 4 月 4 日：我尝试了以下步骤，但仍然没有运气：请检查详细信息，也许这将帮助您了解我是否朝着正确的方向前进。

```
1\. Stopped solr <br />
${PATH_TO_APP}: bundle exec rake sunspot:solr:stop

2\. remove solr folder
${PATH_TO_APP}: rm -rf solr

3\. Start solr
${PATH_TO_APP}: bundle exec rake sunspot:solr:start
--backtrace
java version "1.6.0_30"
Java(TM) SE Runtime Environment (build 1.6.0_30-b12)
Java HotSpot(TM) 64-Bit Server VM (build 20.5-b03, mixed mode)
Copying /data/APP_NAME/shared/bundled_gems/ruby/1.9.1/bundler/gems/sunspot-87e29212527f/sunspot_solr/solr/solr/conf/solrconfig.xml => /data/APP_NAME/releases/20130402102051/solr/conf/solrconfig.xml
Copying /data/APP_NAME/shared/bundled_gems/ruby/1.9.1/bundler/gems/sunspot-87e29212527f/sunspot_solr/solr/solr/conf/spellings.txt => /data/APP_NAME/releases/20130402102051/solr/conf/spellings.txt
Copying /data/APP_NAME/shared/bundled_gems/ruby/1.9.1/bundler/gems/sunspot-87e29212527f/sunspot_solr/solr/solr/conf/synonyms.txt => /data/APP_NAME/releases/20130402102051/solr/conf/synonyms.txt
Copying /data/APP_NAME/shared/bundled_gems/ruby/1.9.1/bundler/gems/sunspot-87e29212527f/sunspot_solr/solr/solr/conf/elevate.xml => /data/APP_NAME/releases/20130402102051/solr/conf/elevate.xml
Copying /data/APP_NAME/shared/bundled_gems/ruby/1.9.1/bundler/gems/sunspot-87e29212527f/sunspot_solr/solr/solr/conf/admin-extra.html => /data/APP_NAME/releases/20130402102051/solr/conf/admin-extra.html
Copying /data/APP_NAME/shared/bundled_gems/ruby/1.9.1/bundler/gems/sunspot-87e29212527f/sunspot_solr/solr/solr/conf/schema.xml => /data/APP_NAME/releases/20130402102051/solr/conf/schema.xml
Copying /data/APP_NAME/shared/bundled_gems/ruby/1.9.1/bundler/gems/sunspot-87e29212527f/sunspot_solr/solr/solr/conf/protwords.txt => /data/APP_NAME/releases/20130402102051/solr/conf/protwords.txt
Copying /data/APP_NAME/shared/bundled_gems/ruby/1.9.1/bundler/gems/sunspot-87e29212527f/sunspot_solr/solr/solr/conf/scripts.conf => /data/APP_NAME/releases/20130402102051/solr/conf/scripts.conf
Copying /data/APP_NAME/shared/bundled_gems/ruby/1.9.1/bundler/gems/sunspot-87e29212527f/sunspot_solr/solr/solr/conf/stopwords.txt => /data/APP_NAME/releases/20130402102051/solr/conf/stopwords.txt
Copying /data/APP_NAME/shared/bundled_gems/ruby/1.9.1/bundler/gems/sunspot-87e29212527f/sunspot_solr/solr/solr/conf/mapping-ISOLatin1Accent.txt => /data/APP_NAME/releases/20130402102051/solr/conf/mapping-ISOLatin1Accent.txt
Copying /data/APP_NAME/shared/bundled_gems/ruby/1.9.1/bundler/gems/sunspot-87e29212527f/sunspot_solr/solr/solr/solr.xml => /data/APP_NAME/releases/20130402102051/solr
Successfully started Solr ...

4\. Ensure config file is correct (solr/conf/schema.xml)
I used this link for schema.xml: http://stackoverflow.com/a/14700918/649868 and overwrite schema.xml file under {PATH_TO_APP}/solr/conf

5\. Run Sunspot re-index
${PATH_TO_APP}: bundle exec rake sunspot:reindex

--backtrace
rake aborted!
RSolr::Error::Http - 404 Not Found
Error:     Not Found

Request Data: "<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete><query>type:JobSeeker</query></delete>" 
```

我注意到的一件事是，当我执行 bundle exec rake sunspot:solr:start 命令并检查日志文件时，我发现了这一点：

```
SEVERE: null:org.apache.solr.common.SolrException: Unable to create core: development
Caused by: org.apache.solr.common.SolrException: Cannot create directory: /data/APP_NAME/current/solr/data/index 
```

但是当我访问这个目录时，索引文件夹就在那里。

有趣的是，solr 在生产模式下创建了 solr.xml 文件，而在我的暂存环境中却没有。请参阅 solr.xml（更改后）：

```
<?xml version="1.0" encoding="UTF-8" ?>
<solr persistent="true">
<cores adminPath="/admin/cores" host="${host:}" hostPort="${jetty.port:}">
    <core name="default"     instanceDir="/data/APP_NAME/current/solr" dataDir="/data/APP_NAME/current/solr/data"/>
    <core name="development" instanceDir="/data/APP_NAME/current/solr" dataDir="/data/APP_NAME/current/solr/data"/>
    <core name="test"        instanceDir="/data/APP_NAME/current/solr" dataDir="/data/APP_NAME/current/solr/data"/>
</cores>
</solr> 
```

对此有任何想法吗？

[更新]：截至 2013 年 4 月 5 日，我在生产实例上部署了一个新版本，之后，当我这样做时：

```
$ RAILS_ENV=production bundle exec rake sunspot:reindex --trace 
```

我懂了：

```
** Invoke sunspot:reindex (first_time)
** Invoke environment (first_time)
** Execute environment
** Execute sunspot:reindex
Skipping progress bar: for progress reporting, add gem 'progress_bar' to your Gemfile

rake aborted!
RSolr::Error::Http - 404 Not Found
Error:     Not Found

Request Data: "<?xml version=\"1.0\" encoding=\"UTF-8\"?><delete>query>type:OccupationData</query></delete>"
Backtrace: /data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rsolr-1.0.8/lib/rsolr/client.rb:230:in `adapt_response'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rsolr-1.0.8/lib/rsolr/client.rb:167:in `execute'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rsolr-1.0.8/lib/rsolr/client.rb:161:in `send_and_receive'
(eval):2:in `post'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rsolr-1.0.8/lib/rsolr/client.rb:67:in `update'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rsolr-1.0.8/lib/rsolr/client.rb:131:in `delete_by_query'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/indexer.rb:55:in `remove_all'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/session.rb:181:in `block in remove_all'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/session.rb:181:in `each'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/session.rb:181:in `remove_all'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rsolr-1.0.8/lib/rsolr/client.rb:230:in `adapt_response'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rsolr-1.0.8/lib/rsolr/client.rb:167:in `execute'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rsolr-1.0.8/lib/rsolr/client.rb:161:in `send_and_receive'
(eval):2:in `post'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rsolr-1.0.8/lib/rsolr/client.rb:67:in `update'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rsolr-1.0.8/lib/rsolr/client.rb:131:in `delete_by_query'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/indexer.rb:55:in `remove_all'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/session.rb:181:in `block in remove_all'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/session.rb:181:in `each'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/session.rb:181:in `remove_all'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/session_proxy/retry_5xx_session_proxy.rb:17:in `method_missing'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/session_proxy/abstract_session_proxy.rb:11:in `remove_all'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot.rb:464:in `remove_all'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot_rails-1.3.3/lib/sunspot/rails/searchable.rb:178:in `solr_remove_all_from_index'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot_rails-1.3.3/lib/sunspot/rails/searchable.rb:197:in `solr_reindex'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot_rails-1.3.3/lib/sunspot/rails/tasks.rb:58:in `block (3levels) in <top (required)>'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/class_set.rb:16:in `each'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot-1.3.3/lib/sunspot/class_set.rb:16:in `each'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/sunspot_rails-1.3.3/lib/sunspot/rails/tasks.rb:57:in `block (2levels) in <top (required)>'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/task.rb:246:in `call'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/task.rb:246:in `block in execute'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/task.rb:241:in `each'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/task.rb:241:in `execute'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/task.rb:184:in `block in invoke_with_call_chain'
/usr/lib64/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/task.rb:177:in `invoke_with_call_chain'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/task.rb:170:in `invoke'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:143:in `invoke_task'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:101:in `block (2 levels) in top_level'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:101:in `each'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:101:in `block in top_level'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:110:in `run_with_threads'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:95:in `top_level'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:73:in `block in run'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:160:in `standard_exception_handling'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/lib/rake/application.rb:70:in `run'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/gems/rake-10.0.4/bin/rake:33:in `<top (required)>'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/bin/rake:19:in `load'
/data/APP_NAME/shared/bundled_gems/ruby/1.9.1/bin/rake:19:in `<main>'
Tasks: TOP => sunspot:reindex 
```

下面是我的模型：

```
class OccupationData < ActiveRecord::Base
    attr_accessible :onetsoc_code, :title, :description

    searchable :auto_index => false do
        text :title
        text :description
    end
end 
```

尝试通过指定 RAILS_ENV=production 来运行所有 sunspot rake 任务，并交叉检查 SOLR 是否以 ROOT 或 deploy 运行，并得到以下信息：

```
/data/APP_NAME/current $ ps -ef | grep solr
deploy    2342     1  0 Apr04 ?        00:00:30 /usr/lib/jvm/sun-jdk-1.6/bin/java -Djetty.port=8983 -Dsolr.data.dir=/data/APP_NAME/releases/20130404095808/solr/data/production -Dsolr.solr.home=/data/APP_NAME/releases/20130404095808/solr -Djava.util.logging.config.file=/tmp/logging.properties20130404-2342-17k2tsp -jar start.jar
deploy    9770  9461  0 06:42 pts/0    00:00:00 grep --colour=auto solr 
```

它告诉我 SOLR 正在部署中运行。我什至无法提供 SOLR 日志，因为失败的 sunspot:reindex 也不会生成任何日志级别信息。:-(

**2013 年 4 月 9 日 - [更新] [解决方案]**

在重新建立索引后，我终于找到了解决方案。该错误是由于 Gemfile 中提到的错误 gem 而发生的。

这是我的 Gemfile 的旧副本：

```
gem "sunspot", "~> 1.3.3"
gem 'sunspot_rails', '~> 1.3.0'
gem 'sunspot_cell', :git => 'git://github.com/zheileman/sunspot_cell.git'
gem 'sunspot_cell_jars', :git => 'https://github.com/mrcsparker/sunspot_cell_jars.git'
gem 'sunspot_solr', :git => "git://github.com/sunspot/sunspot.git" 
```

当我浏览此链接：[https](https://github.com/mrcsparker/sunspot_cell_jars) ://github.com/mrcsparker/sunspot_cell_jars时，我知道我必须使用更新的 sunspot_solr gem 才能使其正常工作。

所以我正在使用：

```
gem 'sunspot_solr', :git => "https://github.com/mrcsparker/sunspot.git" 
```

然后我再次使用“rails g 命令”创建了 JAR 文件，当运行 sunspot:reindex 时一切正常。希望这会对某人有所帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-19T07:30:19.403

在错误日志记录中遇到相同的问题略有不同。就我而言，它就像：

```
2013-07-18 10:26:47.750:INFO:oejw.StandardDescriptorProcessor:NO JSP Support for /solr, did not find org.apache.jasper.servlet.JspServlet
Null identity service, trying login service: null
Finding identity service: null 
```

我使用的是**Solr 4**，它具有更好的管理界面，因此进入 Gemfile：

```
gem 'sunspot_solr', github: 'sunspot/sunspot', branch: 'master'
gem 'sunspot_rails', github: 'sunspot/sunspot', branch: 'master' 
```

就是这样，不再。请注意 github: 部分。我做了类似于你所做的事情：删除了 solr 目录，然后，

```
bundle install 
```

然后，

```
rails generate sunspot_rails:install 
```

进而，

```
bundle exec rake sunspot:solr:start 
```

最终它开始起作用了。

接下来，运行

```
bundle exec rake sunspot:reindex 
```

我必须承认的一件事是，在上述过程之前，因为我有 Solr 4，所以我用这些[from here](https://github.com/sunspot/sunspot/wiki/Working-with-Solr-4)替换了我的 xml 文件。不确定这是否至关重要。

希望这可以帮助某人。

# android - 如何从phonegap调用c++代码

> ID：15742143
> 
> 赞同：2
> 
> 时间：2013-04-01T10:57:46.730
> 
> 标签：android, ios, cordova, phonegap-plugins

我所了解的是通过 phonegap 插件，您可以调用本机 API。

[http://docs.phonegap.com/en/2.1.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android](http://docs.phonegap.com/en/2.1.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android)

**问题：**

是否可以直接从 phonegap 调用 C++ 函数，因为我的中间杠杆层将是 C++，并且适用于 iOS/Android。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T15:26:18.597

不，不是直接的。您必须编写一个调用您的 C++ 代码的插件。在 Android 上，您将使用 Java 编写插件并使用 JNI 调用您的 C++ 库。在 iOS 上，您在 Obj-C 中创建了插件并调用您的 C++ 代码。这是一个很好的答案[https://stackoverflow.com/a/4456290/41679](https://stackoverflow.com/a/4456290/41679)

# php - 当我在php中知道这个值时如何获取数组的键

> ID：15742144
> 
> 赞同：0
> 
> 时间：2013-04-01T10:57:47.607
> 
> 标签：php

我有一个这样的数组：

```
$array = array('name'=>'Van Pham','age'=>'23','sex'=>'male'); 
```

如何获得值为“ **23 ”的密钥“****年龄**”？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:59:04.850

您正在寻找`array_keys` [http://www.php.net/manual/en/function.array-keys.php](http://www.php.net/manual/en/function.array-keys.php)

```
print_r(array_keys($array, "23")); // age 
```

或由**HamZa DzCyber​​DeV**

```
echo array_keys($array, "23")[0]; 
```

[http://codepad.viper-7.com/bZErGT](http://codepad.viper-7.com/bZErGT)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T10:58:51.303

使用[array_search()](http://php.net/manual/en/function.array-search.php)

```
$key= array_search($value, $array); 
```

例子：

```
$array = array('name'=>'Van Pham','age'=>'23','sex'=>'male');
echo array_search("23", $array); //age 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T11:03:02.903

试试这个

```
$my_arr = array('name'=>'Van Pham','age'=>'23','sex'=>'male');

echo get_array_by_value($my_arr, '23');

function get_array_by_value($my_arr = '', $arr_value = '') {
  $new_arr = array_flip($my_arr);
  if (isset($new_arr[$arr_value])) {
    return $new_arr[$arr_value];
  }
} 
```

输出

```
age 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T10:59:30.700

```
<?php 
    $array = array('name'=>'Van Pham','age'=>'23','sex'=>'male');
    echo array_keys($array, "23") .":". $array['age'];
?> 
```

**输出**

```
age : 23 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T11:02:10.160

试试这个

```
<?php
    $arr = array('name'=>'Van Pham','age'=>'23','sex'=>'male');

foreach ($arr as $key => $value) {
    echo "Key: $key; Value: $value<br />\n";
}
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-01T11:05:46.503

我想你想找到键值 23，这样做：

```
$array = array('name'=>'Van Pham','age'=>'23','sex'=>'male');

while ($value = current($array)) {
    if ($value == '23') {
        echo key($array)."\n";
    }
    next($array);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-01T11:06:19.023

`array_search`使用函数可以轻松完成。此函数**在数组中搜索给定值**，如果成功则返回相应的**键。**

```
<?php
$array = array('name'=>'Van Pham','age'=>'23','sex'=>'male');
$key1 = array_search('23', $array); 
echo '<p>Key 1='.$key1.'</p>';
$key2 = array_search('Van Pham', $array);
echo '<p>Key 2='.$key2.'</p>';
$key3 = array_search('male', $array);
echo '<p>Key 3='.$key3.'</p>';
$key4 = array_search('female', $array);
echo '<p>Key 4='.$key4.'</p>';
?> 
```

**输出：**

```
Key 1=age

Key 2=name

Key 3=sex

Key 4= 
```

**[演示](http://codepad.viper-7.com/pzbPqL)**

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-01T11:06:47.803

尝试

```
foreach($array as $key => $value)
{
   if($key == 'age' && $value == '23')
       echo $key.'-'.$value;
} 
```**

# java - 使用子报表时报表有两页

> ID：15742148
> 
> 赞同：2
> 
> 时间：2013-04-01T10:58:16.303
> 
> 标签：java, jasper-reports, inputstream, ireport, subreport

在我的报告中使用子报告时出现问题。我有一个查询，它只产生了一条记录。我已经安排了一条记录显示一页。

当有子报表时，它打印 2 页，其中第二页空白。我看到以下异常：

```
Apr 01, 2013 5:45:25 PM net.sf.jasperreports.view.JRViewer paintPage
SEVERE: Page paint error.
net.sf.jasperreports.engine.JRRuntimeException: net.sf.jasperreports.engine.JRException: Image read failed.
    at net.sf.jasperreports.engine.export.draw.PrintDrawVisitor.visit(PrintDrawVisitor.java:143)
    at net.sf.jasperreports.engine.export.draw.PrintDrawVisitor.visit(PrintDrawVisitor.java:57)
    at net.sf.jasperreports.engine.fill.JRTemplatePrintImage.accept(JRTemplatePrintImage.java:442)
    at net.sf.jasperreports.engine.export.draw.FrameDrawer.draw(FrameDrawer.java:251)
    at net.sf.jasperreports.engine.export.draw.FrameDrawer.draw(FrameDrawer.java:199)
    at net.sf.jasperreports.engine.export.JRGraphics2DExporter.exportPage(JRGraphics2DExporter.java:273)
    at net.sf.jasperreports.engine.export.JRGraphics2DExporter.exportReportToGraphics2D(JRGraphics2DExporter.java:246)
    at net.sf.jasperreports.engine.export.JRGraphics2DExporter.exportReport(JRGraphics2DExporter.java:184)
    at net.sf.jasperreports.view.JRViewer.paintPage(JRViewer.java:2104)
    at net.sf.jasperreports.view.JRViewer$PageRenderer.paintComponent(JRViewer.java:2254)
    at javax.swing.JComponent.paint(JComponent.java:1054)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JViewport.paint(JViewport.java:731)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JComponent.paintChildren(JComponent.java:887)
    at javax.swing.JComponent.paint(JComponent.java:1063)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
    at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1512)
    at javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1443)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1236)
    at javax.swing.JComponent._paintImmediately(JComponent.java:5169)
    at javax.swing.JComponent.paintImmediately(JComponent.java:4980)
    at javax.swing.RepaintManager$3.run(RepaintManager.java:796)
    at javax.swing.RepaintManager$3.run(RepaintManager.java:784)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:784)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:757)
    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:706)
    at javax.swing.RepaintManager.access$1000(RepaintManager.java:62)
    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1651)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:727)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:688)
    at java.awt.EventQueue$3.run(EventQueue.java:686)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:697)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:91) 
```

我一直在寻找上述问题，如 InputStream 或没有图像。而上述异常是因为出现的第二页。没想到第二页在哪里。

在子报表中，我制作了 2 列来显示图像，并将其放在 pageHeader 和 columnHeader 带上。所以有4张图片，pageHeader中有2张，columnHeader中有2张。

有什么建议么？请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T13:37:22.897

检查图像上的缓存属性。`isUsingCache="true"`为我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:08:14.573

检查图像的大小，并检查 pageHeader 和 columnHeader 带的高度。

# php - 将jqplot导出为pdf，使用动态生成的png图像

> ID：15742151
> 
> 赞同：2
> 
> 时间：2013-04-01T10:58:21.070
> 
> 标签：php, pdf, jqplot

我正在使用 jqplot 在我的应用程序中显示图表。我想以 PDF 格式导出此图表。为此，我计划生成图表的运行时图像。jqplot 中有一个按钮，它显示了使用 javascript 从 jqplot 生成的图像。它使用以下代码。

```
 btn.bind('click', {chart: $(this)}, function(evt) {
                    var imgelem = evt.data.chart.jqplotToImageElem();
                    var div = $(this).nextAll('div.jqplot-image-container').first();
                    div.children('div.jqplot-image-container-content').empty();
                    div.children('div.jqplot-image-container-content').append(imgelem);
                    div.show(500);
                    div = null;
                }); 
```

我想在运行时使用 PHP 做到这一点，但我不知道如何实现这一点。帮我解决这个问题。谢谢

# autohotkey - 为 Autohotkey 编写脚本以调用“Shift+F5”击键

> ID：15742163
> 
> 赞同：0
> 
> 时间：2013-04-01T10:59:09.453
> 
> 标签：autohotkey

我必须运行一些应用程序，例如浏览器和票务工具。但是，我需要连续按 shift+F5 键来重新加载我的浏览器和票务工具的页面。

我可以通过 autohotkey 使用任何脚本每隔 20 秒定期重复调用“Shift+F5”键吗？

任何人都可以帮我编写用于调用“Shift+F5”击键的自动热键脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:21:08.440

我假设您希望能够打开/关闭此功能

```
#SingleInstance Force
#installKeybdHook
#Persistent

#F5:: ; [Win]+[F5] to start timer
SetTimer, RefreshPage, 20000
TrayTip, Refresh, Started, 1
ToolTip, Refresh Active
Return

+#F5:: ; [Shift]+[Win]+[F5] to stop timer
SetTimer, RefreshPage, Off
TrayTip, Refresh, Stopped, 1
ToolTip
Return

RefreshPage:
    Send, +{F5}
Return 
```

# android - 显示图像时出现问题

> ID：15742170
> 
> 赞同：0
> 
> 时间：2013-04-01T10:59:45.647
> 
> 标签：android

我正在做一个程序，我们正在使用相机拍照并将其存储在私人文件夹中。从中获取图像并将其显示在网格视图中。单击网格视图将显示全屏图像。我面临的问题是当相机处于纵向模式时，图像质量是完美的。但是如果相机处于横向模式，它会显示拉伸图像我该如何克服这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:47:33.270

嗨，看看下面的代码。在保存捕获的图像之前，请执行以下过程。它将以纵向模式保存图像。希望这会帮助你。

```
 int rotation = -1;
 rotation = ((WindowManager)getSystemService(Context.WINDOW_SERVICE))
                .getDefaultDisplay().getOrientation();

    Matrix rotator = new Matrix();
    switch (rotation) {
    case (Surface.ROTATION_0):
        break;
    case (Surface.ROTATION_90):
        rotator.postRotate(270);
        break;
    case (Surface.ROTATION_180):
        rotator.postRotate(180);
        break;
    case (Surface.ROTATION_270):
        rotator.postRotate(90);
        break;

    // screen_{width,height} are applied before the rotate, so we don't
    // need to change them based on rotation.
    bmp_ss = Bitmap.createBitmap(bmp_ss, 0, 0, screen_width, screen_height, rotator, false); 
```

# linux - 是否可以在 node.js 中读出物理键盘击键？

> ID：15742172
> 
> 赞同：4
> 
> 时间：2013-04-01T10:59:50.600
> 
> 标签：linux, node.js, usb, hid

我有一个在树莓派上运行的节点应用程序，它跟踪一堆 UPnP 播放器（Sonos），我希望能够通过物理遥控器进行控制。我有几个空中鼠标，它们有小键盘以及我想使用的音量按钮。

我试图掌握如何在 linux 机器上读取物理按键，并得出结论，我需要从输入设备读取事件，在我的情况下是：

```
/dev/input/by-id/usb-Dell_Dell_QuietKey_Keyboard-event-kbd 
```

如何找到设备和类似的东西不是问题，真正的问题是如何解释您从中读取的数据。

我知道你会收到一个 C 结构，如下所示：

```
struct input_event {
    struct timeval time;
    unsigned short type;
    unsigned short code;
    unsigned int value;
}; 
```

但我不确定如何从 node.js 读取这个。如果我可以运行一个由预定义的击键触发的外部应用程序，然后对我的节点调用一个 HTTP 请求，那将是我的第二个选择，一个 python 脚本或一些本机守护程序。但是，我查看了一些热键守护程序，但没有一个起作用。

如果我能以某种方式将它包含在节点中，那当然会很好。

编辑：所以我做了一些测试，并做了一个简单的片段：

```
var fs = require('fs');

var buffer = new Buffer(16);

fs.open('/dev/input/by-id/usb-HJT_Air_Mouse-event-kbd', 'r', function (err, fd) {
    while (true) {
        fs.readSync(fd, buffer, 0, 16, null);
        console.log(buffer)
    }
}); 
```

这会输出类似这样的内容（用于空间）：

```
<Buffer a4 3e 5b 51 ab cf 03 00 04 00 04 00 2c 00 07 00>
<Buffer a4 3e 5b 51 c3 cf 03 00 01 00 39 00 01 00 00 00>
<Buffer a4 3e 5b 51 cb cf 03 00 00 00 00 00 00 00 00 00>
<Buffer a4 3e 5b 51 ba 40 06 00 04 00 04 00 2c 00 07 00>
<Buffer a4 3e 5b 51 cd 40 06 00 01 00 39 00 00 00 00 00>
<Buffer a4 3e 5b 51 d2 40 06 00 00 00 00 00 00 00 00 00> 
```

我意识到前四个字节是某种时间戳，接下来的 3 个字节可能是微/毫秒的东西。

另一个奇怪的事情是，并非所有的按键都会产生输出，但是随后的按键可能会发送两倍的数据，并且大多数情况下它会开始输出数据，这些数据会在随后的按键后（或大约 20 秒左右）停止。我不确定如何解释。我已尝试阅读此守护程序的源代码[https://github.com/baskerville/shkd/blob/master](https://github.com/baskerville/shkd/blob/master)但 C 不是我最强的语言，我无法确定他如何处理它（或者是否应该处理它）。而且那个守护进程甚至对我不起作用（在树莓派上编译）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:57:18.453

好吧，让我们看看那个结构。

```
struct input_event {
    struct timeval time;
    unsigned short type;
    unsigned short code;
    unsigned int value;
}; 
```

A`struct timeval`有这样的结构：

```
struct timeval
  {
    __time_t tv_sec;            /* Seconds.  */
    __suseconds_t tv_usec;      /* Microseconds.  */
  }; 
```

这些时间类型的定义是

```
typedef signed long time_t;
typedef signed long suseconds_t; 
```

A`signed long`是 4 个字节（好吧，如果你只是遵循规范，但实际上是这样），所以前 8 个字节是一个类型戳。接下来，您有一个类型和一个代码。两者都是`short`，所以在实践中，它们每个都是 2 个字节。现在只剩下值了，这又是一个 int 值，它将是四个字节。此外，编译器理论上可以在此处的字段之间添加填充，但我很确定他不会。

因此，首先将您读取的字节切成字节块`4+4+2+2+4=16`。这些块中的每一个都是一个事件。这适合您的样本数据。接下来，从缓冲区中提取值（作为小端值，因为您在 ARM 系统上 - 在普通 PC 上，您需要大端）并解释这些值。有关如何执行此操作的说明，请阅读[http://www.mjmwired.net/kernel/Documentation/input/event-codes.txt](http://www.mjmwired.net/kernel/Documentation/input/event-codes.txt)。常量的值没有写在那里，但您通常可以使用`grep -R NAME_OF_CONSTANT /usr/include`.

让我们切碎

```
<Buffer a4 3e 5b 51 ab cf 03 00 04 00 04 00 2c 00 07 00> 
```

举个例子。

```
<Buffer a4 3e 5b 51 ab cf 03 00 04 00 04 00 2c 00 07 00>
       |   tv_sec  |  tv_usec  |type |code |   value   | 
```

`tv_sec`十六进制是`0x515b3ea4`（颠倒顺序，因为它是小端序），它是`1364934308`十进制的。一个简单的 unix 时间转换器报告这意味着`02.04.2013 - 22:25:08`. 看起来挺好的！

`tv_usec`是`0x0003cfab=249771`，所以实际上，事件发生`249771`在那之后的微秒。

类型是`0x0004=4`。`/usr/include/linux/input.h`告诉我们这是一个`EV_MSC`.

给定类型，我们还可以看到代码`0x0004=4`, 表示`MSC_SCAN`。

值为`0x0007002c`。中无处出现`input.h`。唔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-13T20:07:33.840

我认为您正在寻找的是 fs.createReadStream，因此您可以安装一些事件处理程序。

您可以使用 Buffer.readX 例程将输入事件解析为结构：

```
 var i = 0;
  while((buf.length-i) >= 16) {
     var event = {
        tssec:   buf.readUInt32LE(i+0),
        tsusec:  buf.readUInt32LE(i+4),
        type:    buf.readUInt16LE(i+8),
        code:    buf.readUInt16LE(i+10),
        value:   buf.readUInt32LE(i+12)
     };
     i += 16;
  } 
```

# vbscript - 将 vbs 文件嵌入到图像中

> ID：15742173
> 
> 赞同：-1
> 
> 时间：2013-04-01T10:59:51.783
> 
> 标签：vbscript, imagemagick

当用户单击或打开图像时，如何将 vbs 文件嵌入图像并运行 vbs 文件？请给我一个好的解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:11:50.723

当用户打开图像文件时在后台运行任意代码将是一个严重的漏洞。所以不，没有常规的方法可以实现您想要的。

# r - 从 lapply 返回匿名函数 - 出了什么问题？

> ID：15742177
> 
> 赞同：14
> 
> 时间：2013-04-01T11:00:07.023
> 
> 标签：r, closures, anonymous-function, lapply

当尝试使用创建类似函数的列表时`lapply`，我发现列表中的所有函数都是相同的并且等于最终元素应该是什么。

考虑以下：

```
pow <- function(x,y) x^y
pl <- lapply(1:3,function(y) function(x) pow(x,y))
pl
[[1]]
function (x) 
pow(x, y)
<environment: 0x09ccd5f8>

[[2]]
function (x) 
pow(x, y)
<environment: 0x09ccd6bc>

[[3]]
function (x) 
pow(x, y)
<environment: 0x09ccd780> 
```

当您尝试评估这些函数时，您会得到相同的结果：

```
pl[[1]](2)
[1] 8
pl[[2]](2)
[1] 8
pl[[3]](2)
[1] 8 
```

这里发生了什么，我怎样才能得到我想要的结果（列表中的正确函数）？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-01T11:26:32.960

R 通过[promises](http://cran.r-project.org/doc/manuals/r-release/R-lang.html#Promise-objects)，而不是值本身。承诺在第一次评估时被强制执行，而不是在通过时，如果使用问题中的代码，到那时索引已经改变。代码可以写成如下，在调用外部匿名函数时[强制](http://stat.ethz.ch/R-manual/R-patched/library/base/html/force.html)执行承诺，并让读者清楚：

```
pl <- lapply(1:3, function(y) { force(y); function(x) pow(x,y) } ) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-22T02:45:14.343

从 R 3.2.0 开始，这不再适用！

[更改日志](http://cran.r-project.org/src/base/NEWS)中的相应行显示：

> 高阶函数（例如 apply 函数和 Reduce()）现在强制将参数传递给它们应用的函数，以消除惰性求值和闭包中变量捕获之间的不良交互。

事实上：

```
pow <- function(x,y) x^y
pl <- lapply(1:3,function(y) function(x) pow(x,y))
pl[[1]](2)
# [1] 2
pl[[2]](2)
# [1] 4
pl[[3]](2)
# [1] 8 
```

# c# - 不允许 WCF ServiceRoute POST 405 方法

> ID：15742184
> 
> 赞同：1
> 
> 时间：2013-04-01T11:00:35.023
> 
> 标签：c#, wcf

我收到任何错误：`OperationContract`工作正常。我已经使用网络服务器在本地和远程服务器上尝试过，例如`POST``405 method not allowed`
`GET``localhost/myPostMethod/myParam`

我主持这样的服务：

```
 RouteTable.Routes.Add(
        new ServiceRoute(@"Default",
            new CustomWebServiceHostFactory(),
            typeof(DefaultService))); 
```

（我在 CustomWebServiceHostFactory 中使用 webHttpBinding）
无法更改远程服务器上 IIS 中的任何设置。我认为没有必要以太。似乎问题出在我的代码中。

尝试了很多想法，我现在有点绝望。对任何建议都会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:38:33.770

添加标题...已解决。

```
 <system.webServer>
    <httpProtocol>
      <customHeaders>
        <add name="Access-Control-Allow-Methods" value="GET, POST" />
      </customHeaders>
    </httpProtocol>
  </system.webServer> 
```

# min - PowerPivot DAX - 每组动态排名（每组最小值）

> ID：15742186
> 
> 赞同：6
> 
> 时间：2013-04-01T11:00:48.563
> 
> 标签：min, powerpivot, dax, rank

我正在寻找一种在**Microsoft PowerPivot 2010**中使用的方法，该方法允许我执行动态排名，该排名将根据应用的过滤器和切片器值自动更新关联的排名值。

到目前为止，我看到的所有示例都使用了 Calculate() DAX 函数，该函数通过 All() 函数覆盖 PowerPivot 表中的现有过滤器，这会导致用户可能应用的预定义过滤器被忽略。

为了说明我的要求，请参考以下示例：

（PowerPivot 窗口中的源数据：）

```
-------------------------------------------------------------------------------------
Claim Number | Claimant Number | Transaction Date |            Dollar Amount
------------------------------------------------------------------------------------
ABCD123456            4                1/1/2012                   $145.23
ABCD123456            4                8/1/2012                   $205.12
ABCD123456            4                9/1/2012                   $390.74
VDSF123455            2                3/5/2012                   $10.12
VDSF123455            2                9/5/2012                   $50.12           
VDSF123455            2                12/9/2012                  $210.45
------------------------------------------------------------------------------------------ 
```

现在，我希望能够根据第一个交易日期仅显示每个索赔编号和索赔人编号的美元金额。我基本上希望只显示与每个索赔# 和索赔人编号组相关的第一笔交易相关的美元。

我的思考过程是为每个 [索赔编号 + 索赔人编号] 组创建一个动态排名，类似于“partition by - Row_Number()”函数。这样，每个包含排名值为 1 的 [索赔编号 + 索赔人编号] 组将代表与该值相关的第一个交易。

但是，如果用户对生成的数据透视表中的数据应用过滤器，我将需要更改此排名值。

这可以根据上面定义的示例数据在下面进行说明：

```
----------------------------------------------------------------------------------------------
Claim Number | Claimant Number | Transaction Date |  Dollar Amount |  Rank |
---------------------------------------------------------------------------------------------
 ABCD123456             4                1/1/2012         $145.23        1
 ABCD123456             4                8/1/2012         $205.12        2
 ABCD123456             4                9/1/2012         $390.74        3
 VDSF123455             2                3/5/2012         $10.12         1
 VDSF123455             2                9/5/2012         $50.12         2  
 VDSF123455             2               12/9/2012         $210.45        3
 ------------------------------------------------------------------------------------------------ 
```

现在，如果用户通过切片器或通过数据透视表或 PowerPivot 表本身中的过滤器下拉列表应用过滤器，不包括 < 2012 年 2 月 1 日的评估日期，排名值应自动更新并反映如下：

（已应用过滤器）

```
=============================================================================
Claim Number | Claimant Number | Transaction Date |  Dollar Amount |  Rank |
============================================================================
ABCD123456           4                 8/1/2012           $205.12       1
ABCD123456           4                 9/1/2012           $390.74       2
VDSF123455           2                 3/5/2012           $10.12        1
VDSF123455           2                 9/5/2012           $50.12        2  
VDSF123455           2                12/9/2012          $210.45        3
=========================================================================== 
```

如您所见，根据用户应用的过滤器，基于与索赔编号 ABCD123456 相关联的行之一被隐藏，第一个索赔组的排名值自动更新。

然后，我想在 PowerPivot 表中创建一个额外的度量，它只显示与包含 1 等级值的交易相关的美元金额，如下所示：

（应用了过滤器，添加了新措施）

```
===============================================================================================
Claim Number | Claimant Number | Transaction Date |  Dollar Amount |  Rank | Opening Dollar Amt|
================================================================================================
ABCD123456          4                 8/1/2012          $205.12         1         $205.12
ABCD123456          4                 9/1/2012          $390.74         2        
VDSF123455          2                 3/5/2012          $10.12          1         $50.12
VDSF123455          2                 9/5/2012          $50.12          2 
VDSF123455          2                 12/9/2012         $210.45         3 
```

==================================================== ==============================================

然后可以参考该数据创建相应的数据透视表，以便“Opening Dollar Amt”度量仅代表与上述每组第一个交易相关的美元。

如果有人能概述如何实现这一点，我将不胜感激。

我认为动态排名方法可能是一个好主意，但如果有人有更好的想法来实现我的最终结果/目标，即简单地获得与第一笔交易“可见”相关的美元金额（基于任何应用的用户过滤器）每组我会对你可能有的任何方法持开放态度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T23:10:27.283

尽管这是一个写得很好的问题，您显然已经花时间来制定，但您应该[阅读有关在 forums 中交叉发布](http://www.excelguru.ca/content.php?184)的内容。这与您同时在 MSDN 上发布的内容明显重复。我已经回答了两个都认为这是一个体面的问题。

首先，我创建了一个基本度量 [Amount] 来汇总美元金额列。然后我在 RANKX() 中使用它来创建以下内容：

```
[Rank] = RANKX(
         FILTER(
         ALLSELECTED(Table1),Table1[Claimant Number]=max(Table1[Claimant Number])
                   ),
         [Amount],
            ,1) 
```

关键是 [Amount] 度量被迭代的表 - ALLSELECTED() 只是将当前过滤器上下文中的内容发挥作用，并且 FILTER() 中的表达式将表限制为当前声明编号。

之后，根据 [Rank] 是否为 1 返回 [Amount] 是一项简单的任务：

```
[Opening Balance] = if([Rank]=1,[Amount],BLANK()) 
```

希望这是有道理的，如果他们有帮助，我会将我的工作发布在[SkyDrive上。](http://sdrv.ms/16sm098)

雅各布

# asp.net-mvc - asp.net MVC3 单元测试 - 角色提供者

> ID：15742187
> 
> 赞同：0
> 
> 时间：2013-04-01T11:00:56.327
> 
> 标签：asp.net-mvc, asp.net-mvc-3

角色提供者的单元测试失败。

```
[TestMethod]
    public void FindUsersInRole()
    {
        Mock<IUsersInRoleRepository> userInRoleMock = new Mock<IUsersInRoleRepository>();
        userInRoleMock.Setup(m => m.UsersInRoles).Returns(new UsersInRole[] {
            new UsersInRole { UserId = Guid.Parse("aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa"), RoleId = Guid.Parse("aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa") },
            new UsersInRole { UserId = Guid.Parse("bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb"), RoleId = Guid.Parse("aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa") },
            new UsersInRole { UserId = Guid.Parse("cccccccc-cccc-cccc-cccc-cccccccccccc"), RoleId = Guid.Parse("aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa") },
            new UsersInRole { UserId = Guid.Parse("dddddddd-dddd-dddd-dddd-dddddddddddd"), RoleId = Guid.Parse("aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa") },
            new UsersInRole { UserId = Guid.Parse("eeeeeeee-eeee-eeee-eeee-eeeeeeeeeeee"), RoleId = Guid.Parse("bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb") }
        }.AsQueryable());

        Mock<IRoleRepository> roleMock = new Mock<IRoleRepository>();
        roleMock.Setup(m => m.Roles).Returns(new Role[] {
            new Role { RoleId = Guid.Parse("aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa"), RoleName = "test" },
            new Role { RoleId = Guid.Parse("bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb"), RoleName = "admin" }
        }.AsQueryable());

        Mock<IUserRepository> userMock = new Mock<IUserRepository>();
        userMock.Setup(m => m.Users).Returns(new User[] {
            new User { UserId = Guid.Parse("aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa"), UserAccount = "abcdef" },
            new User { UserId = Guid.Parse("bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb"), UserAccount = "bcdef" },
            new User { UserId = Guid.Parse("cccccccc-cccc-cccc-cccc-cccccccccccc"), UserAccount = "cdef" },
            new User { UserId = Guid.Parse("dddddddd-dddd-dddd-dddd-dddddddddddd"), UserAccount = "bcdf" },
            new User { UserId = Guid.Parse("eeeeeeee-eeee-eeee-eeee-eeeeeeeeeeee"), UserAccount = "abcde" }
        }.AsQueryable());

        RoleProvider target = new RoleProvider(userMock.Object, roleMock.Object, userInRoleMock.Object);

        string[] result = target.FindUsersInRole("test", "cde");

        Assert.AreEqual(result[0], "abcdef");
        Assert.AreEqual(result[1], "bcdef");
        Assert.AreEqual(result[2], "cdef");
    } 
```

单元测试代码

**string[] 结果 = target.FindUsersInRole("test", "cde"); <-- 错误**

FindUsersInRole - 获取角色中的用户名数组，其中用户名包含要匹配的指定用户名。

引发 System.NullReferenceException 并尝试调试。

为什么是 NullReferenceException？

PS - FindUsersInRole (RoleProvider)

```
public override string[] FindUsersInRole(string roleName, string userAccountToMatch)
    {   
        Guid roleId = roleRepository.GetRole(roleName).RoleId; // RoleId Retrun.. NullReferenceException

        var roleInUsers = (from ru in usersInRoleRepository.UsersInRoles
                          where ru.RoleId == roleId
                          select ru.UserId).ToArray();

        var findUserResult = (from u in userRepository.Users
                              where roleInUsers.Contains(u.UserId) && u.UserAccount.Contains(userAccountToMatch)
                              select u.UserAccount).ToArray();

        return findUserResult;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:05:36.010

您的**cde**不是**mackUserAccount 中的假用户**。所以它返回null。

试试下面的代码 string[] result = target.FindUsersInRole("test", " **abcdef** "); 代替

```
string[] result = target.FindUsersInRole("test", "cde"); 
```

# jquery - 仅当用户单击标题时才在手风琴类下显示小部件？

> ID：15742188
> 
> 赞同：0
> 
> 时间：2013-04-01T11:00:59.737
> 
> 标签：jquery, css, twitter-bootstrap

我有一个`accordion`这样的工作正常。默认情况下会显示手风琴的内容，当用户单击标题时，它会消失。我想要做的是，在页面加载时首先不显示内容，并且仅在用户单击标题时才显示和隐藏。我怎样才能做到这一点？

```
 <div class="accordion" id="accordion2">
  <div class="accordion-group">
    <div class="accordion-heading">
      <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
        Video tags
      </a>
    </div>
    <div id="collapseOne" class="accordion-body collapse in">
      <div class="accordion-inner">
       <table class="table table-bordered">  
        <thead>  
          <tr>  
            <th>Time Code</th>
            <th>Tag Name</th>  
          </tr>  
        </thead>  
        <tbody>  
        {% for i in "xxxxxxxxxx" %}

          <tr>  
            <td><input type="text" class="span2" name="time_code{{ forloop.counter }}" /></td>
            <td><input type="text" class="span2" name="tag_name{{ forloop.counter }}" /></td>  
           </tr>
        {% endfor %}
        </tbody>  
      </table>  
      </div>
    </div>
  </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:09:57.343

从以下代码：

```
 <div id="collapseOne" class="accordion-body collapse in"> 
```

删除. **_** 这将默认隐藏您的内容

# java - IntelliJ IDEA + Play!-plugin：不要打开 UI Designer for Java 源代码

> ID：15742191
> 
> 赞同：0
> 
> 时间：2013-04-01T11:01:03.893
> 
> 标签：java, intellij-idea, playframework-2.0, gui-designer

在 Arch Linux（12.0.4 Build 123.169）上运行 IntelliJ IDEA 社区版，我安装了[Play!-2.0 插件](http://plugins.jetbrains.com/plugin?pluginId=7080)。一旦我设法让它运行起来，我就开始碰壁：每当我从 project-explorer 打开 *.java-source-file 时，它​​会将我切换到 UI Designer-view，我无法访问我的源代码不再 - 它只是一直告诉我“表单文件无效：不是 IntelliJ IDEA GUI Designer 表单文件”。

我要处理的文件是纯 Java 代码，所以我不需要 UI 设计器，也不涉及 SWING。

是否有设置**不**为任何文件调用此视图？

*注意：奇怪的是，如果我禁用 Play-plugin - 它可能在 plugins.xml 中起作用？*

# knockout.js - 在可观察到的淘汰赛中使用数组

> ID：15742193
> 
> 赞同：1
> 
> 时间：2013-04-01T11:01:14.737
> 
> 标签：knockout.js, observable, ko.observablearray

我有绑定到 UI 上的 html 字段的可观察数组。

但是，UI 上这些字段的更改不会反映在视图模型中，因为根据 Knockout 文档，可观察数组跟踪数组中的对象，而不是这些对象的状态。

代码如下所示：

```
var RewardMissionModel = function () {
    var self = this;
    self.achievementID = ko.observable();
    self.rewardAsset = ko.observable();
    self.rewards = ko.observableArray([new Reward("Points", "Qty", "", "Item", "")]);

    self.isDirty = false;

    //Add reward
    self.addReward = function () {
        //var self = this;
        var tempRewardType = "Points";
        self.rewards.push(new Reward(tempRewardType, "Qty", "", "Item", "", 0));
    };

    //Remove reward
    self.removeReward = function (reward) {
        if (self.rewards().length > 1)
            self.rewards.remove(reward);
    };
    //------------------------------------------------------------------------------
};

function Reward(rewardType, quantityLabel, rewardQuantity, itemLabel, item, itemID) {
    var self = this;
    //self.viewModel = viewModel;
    self.rewardTypes = ["Points", "Coins", "Items"];    
    self.rewardType = ko.observable(rewardType);
    self.itemLabel = ko.observable(itemLabel);
    self.itemText = ko.observable(item);
    self.quantityLabel = ko.observable(quantityLabel);
    self.rewardQuantity = ko.observable(rewardQuantity);
    this.selectedRewardType = ko.observable(rewardType);
    self.isItemType = function (selectedRewardType) {
        return selectedRewardType === this.selectedRewardType();
    }

    self.itemID = ko.observable(itemID);

} 
```

HTML 代码：

```
<div data-bind="template: { name: 'rewards-template', foreach: rewards }"></div>
                <script type="text/html" id="rewards-template">
                    <span style="margin-left:30px">Reward Type</span>
                    <select class="dropdown" data-bind="options: rewardTypes, value: selectedRewardType"></select>
                    <span data-bind="text: itemLabel, visible: isItemType('Items')"></span> 
```

当我将对象添加或删除到可观察数组中时，会设置 viewmodel 脏标志，但是当我在 UI 上进行修改时，它不会被考虑。

其中一种方法是将普通数组放入可观察对象中。

是否有任何代码示例来说明这一点或任何更好的方法？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:01:45.370

我认为使您的可观察数组对象的属性充当可观察的最佳方法是使它们也可观察，以便您创建包含也可观察的可观察数组。例如：：

```
 var viewModel = {
    accounts: ko.observableArray([]),
    init: function () {
        this.accounts.push({
            Property1: ko.observable("some value"),
            Property2: ko.observable("some value"),
            Property3: ko.observable("some value")
            });
        }
    }; 
```

请检查这个问题，我认为这就是你要找的

[可观察数组内的对象更新已完成，但浏览器未发生更改](https://stackoverflow.com/questions/10813416/updation-of-object-inside-observable-array-is-done-but-changes-are-not-coming-on)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:06:54.267

```
function MyObject(val1, val2)
{
   this.firstProperty = ko.observable(val1);  
   this.secondProperty = ko.observable(val1);
}  

var myViewModel = new function()  
{  
   var self = this;
   self.values = ko.observableArray([]);  
   self.values.push(new MyObject("value11", "value12"));  
   self.values.push(new MyObject("value21", "value22"));
} 
```

# ios - 如何删除动态创建的 UIView 和 UILabel 文本？

> ID：15742203
> 
> 赞同：0
> 
> 时间：2013-04-01T11:02:00.803
> 
> 标签：ios, uiview

我正在添加一些名为 *cellSeparator 和其他 UILabels 的动态 UIView ...现在发生的情况是，当我再次调用此代码然后它重写标签文本并覆盖以前创建的标签文本时...我不太清楚这一点ios development.so 谁能告诉我如何在再次创建之前动态删除这个 UIView？因为 UIView 是动态创建的，我不知道如何删除那个 UIView

```
 UILabel *indexLabel = [[UILabel alloc] initWithFrame:CGRectMake(20, self.view.frame.size.height-150, self.view.frame.size.width/2,30)];
            [indexLabel setBackgroundColor:[UIColor clearColor]];
            indexLabel.textColor = [UIColor whiteColor];
            indexLabel.text = @"Details:-";
            indexLabel.font = [UIFont systemFontOfSize:20.00];
            UILabel *tagLabel = [[UILabel alloc] initWithFrame:CGRectMake(20, self.view.frame.size.height-120, self.view.frame.size.width/2, 30)];
            tagLabel.backgroundColor = [UIColor clearColor];

            NSLog(@"LOg %@",imageId);
            NSLog(@"LOg %@",imageStyle);
            NSLog(@"LOg %@",imageType);
            NSLog(@"LOg %@",imageWeight);
            tagLabel.text = [NSString stringWithFormat:@"The Id of Jewl Is:  %@",imageId];

            imageTypelabel= [[UILabel alloc] initWithFrame:CGRectMake(20, self.view.frame.size.height-90, self.view.frame.size.width/2, 30)];
            imageTypelabel.backgroundColor = [UIColor clearColor];
            imageTypelabel.text = [NSString stringWithFormat:@"The Type of Jewl Is:  %@",imageType];
            imageStylelabel = [[UILabel alloc] initWithFrame:CGRectMake(20, self.view.frame.size.height-60, self.view.frame.size.width/2, 30)];
            imageTypelabel.backgroundColor = [UIColor clearColor];
            imageStylelabel.text = [NSString stringWithFormat:@"The style of Jewl Is:  %@",imageStyle];
            imageWeightlabel = [[UILabel alloc] initWithFrame:CGRectMake(20, self.view.frame.size.height-30, self.view.frame.size.width/2, 30)];
            imageStylelabel.backgroundColor = [UIColor clearColor];
            imageWeightlabel.text = [NSString stringWithFormat:@"The weight of Jewl Is:  %@",imageWeight];
            imageWeightlabel.backgroundColor = [UIColor clearColor];
            imageWeightlabel.textColor = [UIColor whiteColor];
            imageTypelabel.textColor = [UIColor whiteColor];
            imageWeightlabel.textColor = [UIColor whiteColor];
            tagLabel.textColor = [UIColor whiteColor];
            UIImage *imageBegin = [UIImage imageNamed:imageName];
            UIImageView *imageView = [[UIImageView alloc] initWithImage:imageBegin];

            UIView *cellSeparator = [[UIView alloc] initWithFrame:CGRectMake(0,545, self.view.frame.size.width ,3)];
            cellSeparator.tag=1;
            [cellSeparator setAutoresizingMask:UIViewAutoresizingFlexibleLeftMargin |
             UIViewAutoresizingFlexibleRightMargin | 
             UIViewAutoresizingFlexibleWidth];       
            [cellSeparator setContentMode:UIViewContentModeTopLeft];    
            [cellSeparator setBackgroundColor:[UIColor whiteColor]];
            [self.view addSubview:cellSeparator]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T11:09:52.273

您可以编写一个方法来删除视图的所有子视图并根据需要修改此代码。

```
- (void)removeSubviewsOfView
{
    NSArray *subViews = [self.view subviews];
    for(UIView *view in subViews)
    {
        [view removeFromSuperview];
    }
} 
```

# c++ - 如何动态链接 sapi.dll 并使其工作？

> ID：15742210
> 
> 赞同：1
> 
> 时间：2013-04-01T11:02:14.763
> 
> 标签：c++, winapi, dll, com, speech-synthesis

我想动态绑定到windows sapi.dll，然后调用一些代码需要在windows上“说出”一些文本-下面的一些代码（这个片段是从desmond lang的gamedev.net文章中复制的）我没有经验使用 dll 的特别是 com。有人能告诉我这段代码应该如何为我工作吗？很多tnx

```
 // The voice interface pointer 
   IspVoice* Voice = NULL; 

   // Initialize COM 
   CoInitialize ( NULL ); 

   // Create the voice instance 
   CoCreateInstance ( CLSID_SpVoice, NULL, CLSCTX_ALL, IID_ISpVoice, (void**)&Voice ); 

   // Our text to be spoken 
   WCHAR* TextBuffer = "Hello World"; 

   // Use our voice interface to speak the contents of the buffer 
   Voice -> Speak ( TextBuffer, SPF_DEFAULT, NULL ); 
```

# objective-c - 使用圆形径向线。减法和加法

> ID：15742215
> 
> 赞同：0
> 
> 时间：2013-04-01T11:02:32.890
> 
> 标签：objective-c, addition, subtraction

我正在使用磁航向，并且在数学方面有点挣扎。假设我的航向为 270 度，顺时针旋转 110 度。我想要新的航向，020 度，作为输出，而不是 380 度。是做这样的事情的最好方法：

> 如果 (x > 360) { x = x - 360; }

或者我可以使用 M_PI 的计算来使其更正确吗？

感谢您的回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:05:50.127

这可能是最好的方法..

```
x = x % 360; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:59:31.500

`x`度数等于任何`X`满足`X = x [360]`模算术音符的角度，该角度`x`可以小于 -360 或大于 720，因此在这种情况下，加或减 360 不会给您预期的结果。如果你想要一个纯粹的加减计算方法，你可以使用这段代码：

```
if (x >= 360){
   while( x >= 360)
     x -= 360;
   }
}else if (x < 0){
   while( x < 0)
     x += 360;
   }
} 
```

或者，更容易的是，在 Objective-C 中，给出`X`满足以下等式并在 , 区间内的`[0;360[`值的算子是`%`算子。你可以这样使用它：

```
X = x % 360 
```

虽然，您的角度可能不是`int`类型。比那个运算符不起作用，因为它需要`int`作为参数。在这种情况下，您可以使用`fmod`or`fmodf`函数。您将使用的语法将是：

```
X = fmodf(x,360) 
```

# onclick - 重绘后 achartengine onclick seriesselection 得到错误的值

> ID：15742216
> 
> 赞同：0
> 
> 时间：2013-04-01T11:02:39.783
> 
> 标签：onclick, achartengine, repaint

我是 achartenging 的新手，我正在使用 achartengine 绘制饼图。

有一个 onclick 监听器监听图表视图上的点击，它在第一次初始化时获取正确的系列索引和值。

但是，在**数据更新和图表视图重绘**后，它返回错误的索引和值。而且好像有些东西被缓存了，因为我发现它在重新绘制之前返回了索引和值。

我试过 `mChartView.setDrawingCacheEnabled(false);`了，但它不会工作。有谁知道为什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:58:29.620

我试图重新创建图表视图而不是调用重绘，并且它有效。

但是，我认为这不是解决问题的最佳方法，也许这是 achartengine v1.1.0 中的一个错误

# android - Android - 布局不统一

> ID：15742221
> 
> 赞同：1
> 
> 时间：2013-04-01T11:03:00.480
> 
> 标签：android, android-layout, android-imageview

我的 android 应用程序中有一个水平图像列表。但问题是某些图像似乎不遵循我在 xml 中定义的布局。像这样：

![假设它应该是均匀的距离](https://i.stack.imgur.com/cQI0z.png)

我的布局如下所示： **mainlayout.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/back_shop_list"
    android:orientation="horizontal">

  <com.devsmart.android.ui.HorizontalListView
      android:id="@+id/shop_hlist_view" 
      android:layout_width="match_parent" 
      android:layout_height="match_parent"
      android:paddingLeft="5dp"
      android:paddingRight="5dp"
      android:scrollX="1dp"
      android:scrollY="1dp"
      android:overScrollMode="always" >  
  </com.devsmart.android.ui.HorizontalListView>

</LinearLayout> 
```

然后我的**listlayout.xml**

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:translationY="200dp" >  

    <FrameLayout 
        android:id="@+id/framelayout" 
        android:layout_height="wrap_content" 
        android:layout_width="wrap_content" 
        android:layout_gravity="center"
        android:orientation="vertical"
        android:paddingLeft="8dp"
        android:paddingRight="8dp" >

        <ImageView
            android:id="@+id/img"    
            android:clickable="true"
            android:adjustViewBounds="true"
            android:layout_width="360dp"
            android:layout_height="360dp" />  

        <ProgressBar
            android:id="@+id/img_progress"
            style="?android:attr/progressBarStyleLarge"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:indeterminate="true"
            android:translationY="150dp"
            android:translationX="140dp" /> 

    </FrameLayout>

    <TextView
        android:id="@+id/labelText"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:translationX="10dp"
        android:textColor="#dc6800"
        android:textSize="16sp"
        android:textStyle="bold" />
    <!-- Description label -->
    <TextView
        android:id="@+id/desc"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:translationX="10dp"
        android:textColor="#acacac"
        android:paddingBottom="2dip">
    </TextView>

</LinearLayout> 
```

我的猜测是我的图像大小小于我的 ImageView 布局宽度和高度。或者我真的不知道是什么导致了这个问题。但请提供任何帮助。谢谢。

编辑：我真正想要的是，如果图像像图像 4 和图像 5，它不应该有这些空格。我尝试从 ImageLoader 获取图像的大小，然后在加载图像时在其中设置布局参数高度和宽度。但它看起来更糟。如果图像像图像 4 和 5，还有其他方法可以动态调整我的 ImageView 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:05:51.100

## 如果实际上您想让图像占据所需的空间

尝试将此图像视图属性添加到您的 ImageView

您可以尝试其他我通常使用`fitXY`的预定义列表，您将在 XML 布局中获得该列表

```
android:scaleType="fitXY" 
```

为了使这个属性工作，我们还需要

```
android:adjustViewBounds="true" 
```

您已经在您的案例中添加的

## 如果实际上您想避免出现空白并让图像占据尽可能多的空间

在我的布局中，我使用两个图像视图来显示演示

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ll_numbers"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_alignLeft="@+id/tv_numbers"
    android:layout_below="@+id/tv_numbers"
    android:layout_marginTop="5dip"
    android:layout_marginRight="10dip"
    android:orientation="vertical">

    <ImageView
        android:id="@+id/textView1"
        android:layout_width="200dip"
        android:layout_height="200dip"
        android:src="@drawable/desert"/>

    <ImageView
        android:id="@+id/textView2"
        android:layout_width="200dip"
        android:layout_height="200dip"
        android:background="@drawable/desert"/>

</LinearLayout> 
```

ImageView 1 将图像分配为*Source*使用`android:src="@drawable/desert"`

下面是结果，您可以注意到它周围显示了**WhiteSpace**。

![在此处输入图像描述](https://i.stack.imgur.com/wI9s5.png)

ImageView2 将图像分配为*背景*使用`android:background="@drawable/desert"` ，下面是结果，您可以注意到它周围没有显示任何**WhiteSpace**。

![在此处输入图像描述](https://i.stack.imgur.com/1Vk8C.png)

或者尝试使用这些属性使其成为可能

```
android:maxHeight=""
        android:maxWidth=""
        android:minHeight=""
        android:minWidth="" 
```

# user-interface - 从 Linux 机器远程执行 .bat 文件

> ID：15742224
> 
> 赞同：0
> 
> 时间：2013-04-01T11:03:16.020
> 
> 标签：user-interface, batch-file

我正在尝试通过 ssh 连接、获取 windows 命令提示符然后执行批处理文件，从 Linux 机器远程执行 windows 机器上的 .bat 文件。

当我连接到 windows 机器时，我可以看到进程正在运行，但没有调用图形界面。

问候拉胡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:45:26.093

可能，您需要在 Windows 上安装 x 服务器？考虑将 xming 作为一种选择。我假设你已经在 windows 系统上安装了 ssh-server。

注意：您需要登录 windows 框（一次，在 windows 登录后），在 windows 上启动 x 服务器，然后您应该能够 ssh 到系统并启动 GUI 应用程序。

另一个可能的问题：

ssh-server 二进制文件应由用户在 Windows 系统启动后登录一次后执行。然后 ssh 到那个 windows 框，导出 DISPLAY=:0 并运行 GUI 应用程序。

**注意：**我没有测试上述 2 个解决方案中的任何一个，但这些是我认为可能的解决方案。

另一种解决方案：创建一个专用的基于 TCP 的服务器（在 Windows 上）客户端（在 linux 上）模型并通过该通道发送命令。一种肮脏的方式可以提供有限的功能，但经过测试可以正常工作。

# r - R中的Read.table错误

> ID：15742227
> 
> 赞同：0
> 
> 时间：2013-04-01T11:03:44.693
> 
> 标签：r, function

我正在使用 R 读取文本文件，然后对其进行操作。输入文件有 22 列。这是第一列的样子：

```
NAME    LENGTH  A   C   D   E   F   G   H   I   K   L   M   N   P   Q   R   S   T   V   W   Y 
```

我目前正在使用：

```
read.table("filename", stringsAsFactors=FALSE) 
```

输入文件。当我运行相同时，我收到此警告：

```
Error in scan(file, what, nmax, sep, dec, quote, skip, nlines, na.strings,  : 
  line 2 did not have 23 elements 
```

不知道我哪里出错了。我是 R 新手，非常感谢您的帮助。我试图确保这不是转发，但如果是，请务必将我链接到原版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T13:03:00.547

假设文本文件如下所示：

```
NAME LENGTH A C D E F G H I K L M N P Q R S T V W Y 
ape:APE_0001 242 15 0 1 12 10 18 2 27 9 43 7 2 8 3 5 25 15 24 3 12 
ape:APE_0002 113 7 1 6 6 1 12 3 4 10 16 4 2 4 0 10 3 5 9 4 5 
ape:APE_0004 305 24 2 5 8 9 25 4 36 12 43 8 11 14 2 12 20 21 27 9 12 
```

并被称为“dat.txt”并存储在您的工作目录中，这应该可以工作：

```
dat <- read.table("dat.txt", stringsAsFactors=FALSE, header=TRUE)
# to give:
dat
          NAME LENGTH  A C D  E  F  G H  I  K  L M  N  P Q  R  S  T  V W  Y
1 ape:APE_0001    242 15 0 1 12 10 18 2 27  9 43 7  2  8 3  5 25 15 24 3 12
2 ape:APE_0002    113  7 1 6  6  1 12 3  4 10 16 4  2  4 0 10  3  5  9 4  5
3 ape:APE_0004    305 24 2 5  8  9 25 4 36 12 43 8 11 14 2 12 20 21 27 9 12 
```

由于这似乎对您不起作用，因此您的文本文件、隐藏字符等中可能会发生一些奇怪且不可见的事情。

假设您的文本文件不是很大，一种解决方法是在 RStudio 中打开一个新的 R 脚本，然后输入

```
dat <- read.table(stringsAsFactors=FALSE, header=TRUE, text = "") 
```

然后将文本文件中的所有文本复制并粘贴到`""`上面的行之间，不更改换行符或格式，然后全选并将其发送到控制台。

对于您评论中的示例，如下所示：

```
dat <- read.table(header=TRUE, stringsAsFactors=FALSE, text = "NAME LENGTH A C D E F G H I K L M N P Q R S T V W Y 
ape:APE_0001 242 15 0 1 12 10 18 2 27 9 43 7 2 8 3 5 25 15 24 3 12 
ape:APE_0002 113 7 1 6 6 1 12 3 4 10 16 4 2 4 0 10 3 5 9 4 5 
ape:APE_0004 305 24 2 5 8 9 25 4 36 12 43 8 11 14 2 12 20 21 27 9 12") 
```

如果这不切实际或不可能，请在您的问题中发布指向您的文本文件的链接（例如：[http](http://temp-share.com/show/dPf3a6oHW) ://temp-share.com/show/dPf3a6oHW 45 天后自动删除），以便其他人可以查看。

# android - 在使用 Vuforia SDK for Android 时，在运行 VideoPlayback 时出现错误

> ID：15742228
> 
> 赞同：1
> 
> 时间：2013-04-01T11:03:45.130
> 
> 标签：android

在运行 VideoPlayback 时，我收到错误为 java.lang.UnsatisfiedLinkError: setActivityPortraitMode，任何人都可以帮助解决这个错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T09:13:24.520

首先执行 ndk-build 然后导入您的应用程序并运行

# ios - 如何在原生 IOS 日历中添加事件

> ID：15742231
> 
> 赞同：10
> 
> 时间：2013-04-01T11:04:14.043
> 
> 标签：ios, icalendar, uidocumentinteraction

我想从我的应用程序中打开本机 IOS 日历（ical）并添加事件。有什么办法可以打开特定事件的日历吗？

我也以[编程方式关注 Open iphone calendar app](https://stackoverflow.com/questions/6647725/open-iphone-calendar-app-programmatically)，但尚未成功。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-01T12:11:40.807

请参阅[日历和提醒编程指南](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/EventKitProgGuide/Introduction/Introduction.html)。但基本流程是：

1.  `EventKit.Framework`将and添加`EventKitUI.Framework`到您的项目中。（请参阅[链接到库或框架](http://developer.apple.com/library/mac/#recipes/xcode_help-project_editor/Articles/AddingaLibrarytoaTarget.html)。）

2.  导入标头：

    ```
    #import <EventKitUI/EventKitUI.h> 
    ```

3.  如果创建事件，请使用：

    ```
    - (IBAction)didPressCreateEventButton:(id)sender
    {
        EKEventStore *store = [[EKEventStore alloc] init];

        if([store respondsToSelector:@selector(requestAccessToEntityType:completion:)])
        {
            // iOS 6
            [store requestAccessToEntityType:EKEntityTypeEvent
                                  completion:^(BOOL granted, NSError *error) {
                                      if (granted)
                                      {
                                          dispatch_async(dispatch_get_main_queue(), ^{
                                              [self createEventAndPresentViewController:store];
                                          });
                                      }
                                  }];
        } else
        {
            // iOS 5
            [self createEventAndPresentViewController:store];
        }
    }

    - (void)createEventAndPresentViewController:(EKEventStore *)store
    {
        EKEvent *event = [self findOrCreateEvent:store];

        EKEventEditViewController *controller = [[EKEventEditViewController alloc] init];
        controller.event = event;
        controller.eventStore = store;
        controller.editViewDelegate = self;

        [self presentViewController:controller animated:YES completion:nil];
    } 
    ```

4.  您的视图控制器应符合`EKEventEditViewDelegate`协议：

    ```
    @interface ViewController () <EKEventEditViewDelegate> 
    ```

    并实现`didCompleteWithAction`方法：

    ```
    - (void)eventEditViewController:(EKEventEditViewController *)controller didCompleteWithAction:(EKEventEditViewAction)action
    {
        [self dismissViewControllerAnimated:YES completion:nil];
    } 
    ```

5.  您显然可以以任何您想要的方式创建您的活动。例如，这是在下周查找具有适当标题的事件，如果没有找到，则创建一个新事件（一小时长的事件，在四小时后开始）：

    ```
    - (EKEvent *)findOrCreateEvent:(EKEventStore *)store
    {
        NSString *title = @"My event title";

        // try to find an event

        EKEvent *event = [self findEventWithTitle:title inEventStore:store];

        // if found, use it

        if (event)
            return event;

        // if not, let's create new event

        event = [EKEvent eventWithEventStore:store];

        event.title = title;
        event.notes = @"My event notes";
        event.location = @"My event location";
        event.calendar = [store defaultCalendarForNewEvents];

        NSCalendar *calendar = [NSCalendar currentCalendar];
        NSDateComponents *components = [[NSDateComponents alloc] init];
        components.hour = 4;
        event.startDate = [calendar dateByAddingComponents:components
                                                    toDate:[NSDate date]
                                                   options:0];
        components.hour = 1;
        event.endDate = [calendar dateByAddingComponents:components
                                                  toDate:event.startDate
                                                 options:0];

        return event;
    }

    - (EKEvent *)findEventWithTitle:(NSString *)title inEventStore:(EKEventStore *)store
    {
        // Get the appropriate calendar
        NSCalendar *calendar = [NSCalendar currentCalendar];

        // Create the start range date components
        NSDateComponents *oneDayAgoComponents = [[NSDateComponents alloc] init];
        oneDayAgoComponents.day = -1;
        NSDate *oneDayAgo = [calendar dateByAddingComponents:oneDayAgoComponents
                                                      toDate:[NSDate date]
                                                     options:0];

        // Create the end range date components
        NSDateComponents *oneWeekFromNowComponents = [[NSDateComponents alloc] init];
        oneWeekFromNowComponents.day = 7;
        NSDate *oneWeekFromNow = [calendar dateByAddingComponents:oneWeekFromNowComponents
                                                           toDate:[NSDate date]
                                                          options:0];

        // Create the predicate from the event store's instance method
        NSPredicate *predicate = [store predicateForEventsWithStartDate:oneDayAgo
                                                                endDate:oneWeekFromNow
                                                              calendars:nil];

        // Fetch all events that match the predicate
        NSArray *events = [store eventsMatchingPredicate:predicate];

        for (EKEvent *event in events)
        {
            if ([title isEqualToString:event.title])
            {
                return event;
            }
        }

        return nil;
    } 
    ```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-09-04T12:01:04.040

使用 url 方案打开本机日历应用程序。

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"calshow://"]]; 
```

[http://devsupport.layar.com/entries/23687993-How-to-use-Custom-URI-Scheme-Button-in-the-Creator-](http://devsupport.layar.com/entries/23687993-How-to-use-Custom-URI-Scheme-Button-in-the-Creator-)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-15T07:33:30.257

下面的代码有助于将事件添加到本机日历。

```
- (NSString*)addEventToCalendarWithTitle:(NSString *)eventTitlestr Description:(NSString *)eventDescriptionstr startDate:(NSString *)startDatestr startTime:(NSString *)startTimestr {
        NSString *returneventidentifier=nil;
        if (__IPHONE_4_0 <= __IPHONE_OS_VERSION_MAX_ALLOWED) {
                NSDateFormatter *formatter_=[[NSDateFormatter alloc]init];
                NSTimeZone *gmtZone = [NSTimeZone systemTimeZone];
                NSDate *startedDate=nil;
                NSDate *endedDate=nil;
                [formatter_ setTimeZone:gmtZone];
                NSLocale *enLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en-US"];
                formatter_.locale = enLocale;
                [enLocale release];
                if (startDatestr!=nil&&startTimestr!=nil) {
                        startDatestr = [startDatestr stringByAppendingString:startTimestr];
                    }
                [formatter_ setDateFormat:[DATE_FORMAT_FROM_RESPONSE stringByAppendingString:TIME_FORMAT_FROM_RESPONSE]]; // here date and time formats are appended as datestring and time string are appended
                if(startDatestr!=nil){

                        startedDate = [formatter_ dateFromString:startDatestr];
                        EKEventStore *eventStore = [[EKEventStore alloc] init];
                        //            __block BOOL accessGranted = NO;
                        //            if([eventStore respondsToSelector:@selector(requestAccessToEntityType:completion:)]) {
                        //                dispatch_semaphore_t sema = dispatch_semaphore_create(0);
                        //                [eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {
                        //                    accessGranted = granted;
                        //                    dispatch_semaphore_signal(sema);
                        //                }];
                        //                dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
                        //            } else { // we're on iOS 5 or older
                        //                accessGranted = YES;
                        //            }
                        //            
                        //            if (accessGranted) {
                        //            }
                        EKEvent *event  = [EKEvent eventWithEventStore:eventStore];
                        event.title     = eventTitlestr;
            event.notes = eventDescriptionstr;
                        event.startDate = startedDate;
                        endedDate = [[NSDate alloc] initWithTimeInterval:600 sinceDate:event.startDate];
                        event.endDate   =endedDate ;
                        event.alarms=[NSArray arrayWithObject:[EKAlarm alarmWithRelativeOffset:DEFAULTALERTTIME]];
                        [event setCalendar:[eventStore defaultCalendarForNewEvents]];
                        NSError *err;
                        [eventStore saveEvent:event span:EKSpanThisEvent error:&err];  
                        [eventStore release];
                        eventStore=nil;
                        [endedDate release];
                        endedDate=nil;
                        returneventidentifier=event.eventIdentifier;
                    }
                [formatter_ release];
                formatter_=nil;

            }
        else {
                UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Alert !" message:@"Lower IOS versions event adding functionality is not possible." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
        [alert show];
        [alert release];
            }
        return returneventidentifier;
} 
```

# iphone - GWT 与 iPhone UIWebView 共享入口点

> ID：15742232
> 
> 赞同：0
> 
> 时间：2013-04-01T11:04:19.523
> 
> 标签：iphone, gwt, geolocation

我有一个应用程序目前运行良好并使用地理定位。我有一个调用 com.google.gwt.geolocation.client.Geolocation 的方法。

我扩展了现有的入口点并覆盖了此方法以使用本机 Geolocation 库，因此我没有任何权限弹出窗口。

如何避免两个模块的编译时间是原来的两倍？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:19:47.847

在 GWT 中，通常每个应用程序或 perl 页面都有一个入口点`.html`，但您可以有其他场景：您可以有一个具有多个入口点的模块文件 (.gwt.xml)，或者一个加载多个模块的页面 (.cache .js），甚至您可以在不同的页面中加载相同的模块（.cache.js）。

因此，在您的情况下，您可以维护一个入口点和一个模块文件，并在两个页面中包含相同的编译模块。在这种情况下，您必须在入口点中编写一些代码才能知道在每个页面中要做什么：

```
public void onModuleLoad() {
  if (Window.Location.getPath().matches(".*page_1.html.*")) {
     // do something
  } else {
     // do another thing
  }
} 
```

认为在这种情况下，您将在两个页面中都有所有已编译的内容，但是您可以利用 gwt[代码拆分](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting)并使每个页面仅加载所需的内容：

```
public void onModuleLoad() {
    if (Window.Location.getPath().matches(".*page_1.html.*")) {
      GWT.runAsync(new RunAsyncCallback() {
        public void onSuccess() {
          // do something
        }
        public void onFailure(Throwable reason) {
        }
      });
    } else {
      GWT.runAsync(new RunAsyncCallback() {
        public void onSuccess() {
          // do another thing
        }
        public void onFailure(Throwable reason) {
        }
      });          
    }
 } 
```

这种方法的优点是您只需为所有站点编译一次，并且您可以在所有页面中共享相同的代码，从而利用缓存。也有缺点，比如你的最终代码更高，开发模式可能更慢，等等。

# paypal-sandbox - Paypal 重定向：使用沙盒帐户进行测试要求重定向后登录

> ID：15742237
> 
> 赞同：0
> 
> 时间：2013-04-01T11:04:28.583
> 
> 标签：paypal-sandbox

我在 developer.sandbox.com 中创建了一个沙盒帐户，并有一个与之关联的买家帐户和卖家帐户。

我使用我的沙盒帐户登录，当我的应用程序（捐赠表格）被重定向到贝宝沙盒 url 时，它要求我使用沙盒帐户登录。

一周前同样有效，但在贝宝开发人员网站升级到 BETA 版本后，它导致了这个问题。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:07:30.873

这已经在这里得到了回答（[Paypal Sandbox Testing - Change of URL Endpoint?](https://stackoverflow.com/questions/15745626/paypal-sandbox-testing-change-of-url-endpoint)）

基本上，您需要清除缓存和 cookie，并确保您使用的测试商家帐户已导入新的 BETA 版本。然后生成一个新的令牌，它应该可以工作（对我有用）

# python - OpenERP - 模块导入错误

> ID：15742241
> 
> 赞同：2
> 
> 时间：2013-04-01T11:04:40.413
> 
> 标签：python, openerp, add-on, python-import

我在没有安装的情况下使用 openerp - 只是从源代码运行它：

1.  从启动板获取 openobject-server、openobject-addons 和 openerp-web
2.  放置到 /opt/openerp/
3.  添加到配置文件的路径 addons_path = /opt/openerp/openobject-addons/,/opt/openerp/openerp-web/addons/
4.  使用我的配置启动 openerp 服务器

所有作品

但现在我想安装新插件（aeroo 报告）：

1.  获取航空资源
2.  放置到 /opt/openerp/
3.  更改配置 addons_path = /opt/openerp/openobject-addons/,/opt/openerp/openerp-web/addons/,/opt/openerp/aeroo/

它不起作用

```
File "/opt/openerp/aeroo/report_aeroo/check_deps.py", line 33, in <module>
    from osv import osv
ImportError: No module named osv 
```

当我尝试从 Windows 下的源代码运行它时（使用 eclipse+pydev）

如何在不更改代码的情况下让它看到模块？

```
from osv -> from openerp.osv
from tools -> from openerp.tools 
```

我不是第一次看到没有带“openerp”的导入模块。

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:42:35.403

使用此命令进入 7.0 openerp 文件夹

```
find . -type f -print0 | xargs -0 sed -i 's/from osv/from openerp.osv/g' 
```

# java - 检查枚举值索引

> ID：15742251
> 
> 赞同：1
> 
> 时间：2013-04-01T11:05:18.980
> 
> 标签：java, enums

我在检查枚举值的索引时遇到问题，我有一个带有可变参数整数的枚举，如果该整数大于 1 并且是可替换项，那么当我获得下一个索引时，我将其加一。但是，当增量之后没有另一个整数时，游戏崩溃了，我在过去半小时左右一直在尝试解决这个问题，我似乎无法检查它是否是其中的最后一个索引枚举。我知道这是一个非常本地化的问题，但我需要一些帮助。

编码：

```
private int getNextId(Food food, int id) {
    if (food.getType().equals(REPLACE)) {
        for (int i = 0; i < food.getIds().length; i++) {
            if (food.getIds()[i] == id) {
                return food.getIds()[i + 1];
            }
        }
    }
    return -1;
} 
```

枚举：

```
private enum Food {
    SHRIMP(REMOVE, 3, 315),
    LOBSTER(REMOVE, 12, 379),
    MANTA_RAY(REMOVE, 22, 391),
    MONKFISH(REMOVE, 16, 7946),
    MACKREL(REMOVE, 6, 355),
    SALMON(REMOVE, 9, 329),
    SEA_TURTLE(REMOVE, 22, 397),
    SHARK(REMOVE, 20, 385),
    SWORDFISH(REMOVE, 14, 373),
    TROUT(REMOVE, 7, 333), 
    TUNA(REMOVE, 10, 361),
    TUNA_POTATO(REMOVE, 22, 7060),

    CAKE(REPLACE, 4, 1891, 1893, 1895),
    CHOCOLATE_CAKE(REPLACE, 5, 1897, 1899, 1901),
    PLAIN_PIZZA(REPLACE, 7, 2289, 2291),
    MEAT_PIZZA(REPLACE, 8, 2293, 2295),
    ANCHOVY_PIZZA(REPLACE, 9, 2297, 2299),
    PINEAPPLE_PIZZA(REPLACE, 11, 2301, 2303),
    APPLE_PIE(REPLACE, 7, 2323, 2335),
    REDBERRY_PIE(REPLACE, 5, 2325, 2333),
    MEAT_PIE(REPLACE, 6, 2327, 2331);

    private final ConsumableType type;

    private final int healAmount;

    private final int[] ids;

    private Food(ConsumableType type, int healAmount, int... ids) {
        this.type = type;
        this.ids = ids;
        this.healAmount = healAmount;
    }

    public ConsumableType getType() {
        return type;
    }

    public int getHealAmount() {
        return healAmount;
    }

    public int[] getIds() {
        return ids;
    }

    public String getName() {
        return name().toLowerCase().replaceAll("_", " ");
    }

} 
```

哦，另一个注意事项，我尝试检查它是*-1*还是*0*，但就像我说的那样，我似乎无法弄清楚。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:29:40.570

你想做这样的事情吗？

```
private int getNextId(Food food, int id) {
    if (food.getType().equals(REPLACE)) {
        int n = food.getIds().length;
        for (int i = 0; i < n; i++) {
            if (food.getIds()[i] == id && (i+1) < n) {
                return food.getIds()[i + 1];
            }
        }
    }
    return -1;
} 
```

上述方法中，只有存在时才会返回下一个Id，否则返回-1。

# java - Android 数据库未插入数据

> ID：15742252
> 
> 赞同：-1
> 
> 时间：2013-04-01T11:05:19.503
> 
> 标签：java, android, database, sqlite

所以我有以下代码，该代码尝试将数据添加到数据库，如果不能关闭应用程序。无论我做什么应用程序都会关闭，任何建议

```
package net.connormccarthy.walkingdeadcharacterprofiles;

import java.util.ArrayList;

import android.app.Activity;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.graphics.Color;
import android.graphics.Typeface;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;

public class rickAddNotes extends Activity
{

SQLiteDatabase db;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        // this try catch block returns better error reporting to the log
            // Android specific calls
            super.onCreate(savedInstanceState);
            setContentView(R.layout.ricknotes);
            Button  btnLeft=(Button)findViewById(R.id.BtnRickSave);

            // create the database manager object
            //db = new MainActivity();

            final Button button = (Button) findViewById(R.id.BtnRickSave);
            button.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    data();
                }
            });      

    }

    public long data()
    {
        long d=0;
      //EditText edittext1=(EditText )findViewById(R.id.editText1);
      //String notes = edittext1.toString();

try {

        final String Insert_Data="INSERT INTO Characters VALUES(2,'WOOP','5')";
        db.execSQL(Insert_Data);
    } catch (Exception e) {

        System.exit(0);

    }
    return d;

    }

    public void showdata(View view)
    {
        Cursor c=db.rawQuery("SELECT * from Character WHERE character = rick", null);
         int count= c.getCount();
        c.moveToFirst();
        TableLayout tableLayout = new TableLayout(getApplicationContext());
        tableLayout.setVerticalScrollBarEnabled(true);
       TableRow tableRow;
       TextView textView,textView1,textView2,textView3,textView4,textView5;
       tableRow = new TableRow(getApplicationContext());
       textView=new TextView(getApplicationContext());
       textView.setText("Firstname");
       textView.setTextColor(Color.RED);
        textView.setTypeface(null, Typeface.BOLD);
         textView.setPadding(20, 20, 20, 20);
        tableRow.addView(textView);
        textView4=new TextView(getApplicationContext());
        textView4.setText("LastName");
        textView4.setTextColor(Color.RED);
        textView4.setTypeface(null, Typeface.BOLD);
         textView4.setPadding(20, 20, 20, 20);
        tableRow.addView(textView4);
        textView5=new TextView(getApplicationContext());
        textView5.setText("Email");
        textView5.setTextColor(Color.RED);
        textView5.setTypeface(null, Typeface.BOLD);
        textView5.setPadding(20, 20, 20, 20);
        tableRow.addView(textView5);
       tableLayout.addView(tableRow);
         for (Integer j = 0; j < count; j++)
         {
             tableRow = new TableRow(getApplicationContext());
             textView1 = new TextView(getApplicationContext());
             textView1.setText(c.getString(c.getColumnIndex("character")));
             textView2 = new TextView(getApplicationContext());
             textView2.setText(c.getString(c.getColumnIndex("notes")));
             textView1.setPadding(20, 20, 20, 20);
             textView2.setPadding(20, 20, 20, 20);
             tableRow.addView(textView1);
             tableRow.addView(textView2);
             tableLayout.addView(tableRow);
             c.moveToNext() ;
         }
         setContentView(tableLayout);
    db.close();
    }

} 
```

如果我不添加异常，应用程序就会崩溃。我希望最终让它与我传递给它的变量（editText1）一起工作，但即使我对数据进行硬编码，应用程序也会崩溃或关闭，这取决于天气与否我添加了异常。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:13:35.180

在您的 sql 语句中，我们正在查看 2 种可能的错误 -

1>

```
final String Insert_Data="INSERT INTO Characters VALUES(2,'WOOP','5')"; 
```

这里你的表名是`Characters`

在哪里

```
Cursor c=db.rawQuery("SELECT * from Character WHERE character = rick", null); 
```

你的表名是`Character`

请检查这个。

2>您的选择查询应该是 -

```
Cursor c=db.rawQuery("SELECT * from Character WHERE character = rick", null); 
```

应该 -

```
Cursor c=db.rawQuery("SELECT * from Character WHERE character = 'rick'", null); 
```

请看这2个指针。我们将帮助您提出任何进一步的意见。

谢谢

# php - 如何从 transactionId 中获取 payKey？

> ID：15742254
> 
> 赞同：9
> 
> 时间：2013-04-01T11:05:29.120
> 
> 标签：php, paypal, paypal-ipn, paypal-adaptive-payments

我一直在使用 PayPals IPN 来接收和处理付款，并将 transactionId 存储为参考。

是时候通过我正在开发的系统退还付款了，这就是斗争。

`GetPaymentDetails.php`在更新的 PHP SDK 中使用将 transactionId 输入示例的 payKey 字段时，使用正确的身份验证详细信息和应用程序 ID，我得到：

```
Error ID: 580022
Domain: PLATFORM
Severity: Error
Category: Application
Message: Invalid request parameter: payKey with value [REMOVED (transactionId)]
Parameter: Array 
```

这是可以理解的，因为它需要一个 payKey。现在，我可以根据规范将其更改为`$pdRequest->payKey = $payKey;`。`$pdRequest->transactionId = $payKey;`这现在应该将 transactionId 作为 transactionId 发送并工作，但我得到了这个回应：

```
Error ID: 520002
Domain: PLATFORM
Severity: Error
Category: Application
Message: Internal Error 
```

好的，所以有些东西坏了。我怀疑他们现在不允许将 transactionId 用作参考，并且没有更新他们的文档（典型）。我怀疑这是因为我使用的原始 SDK 包含一个 transactionId 字段，以及 trackingId 和另一个标识符。但是现在更新的 SDK 只要求 payKey。

现在我被困住了。我收集了数千个实时 transactionId。你知道我如何为每笔交易获得一个 payKey，或者解决原来的问题吗？

谢谢

# 更多信息：

以下是发送的 HTTP 标头：

```
X-PAYPAL-SECURITY-SIGNATURE: [removed]
X-PAYPAL-SECURITY-USERID: [removed]
X-PAYPAL-SECURITY-PASSWORD: [removed]
X-PAYPAL-APPLICATION-ID: [removed]
X-PAYPAL-REQUEST-SOURCE: PHP_SOAP_SDK_V1.4
X-PAYPAL-DEVICE-IPADDRESS: 127.0.0.1
X-PAYPAL-MESSAGE-PROTOCOL: SOAP11
X-PAYPAL-REQUEST-SOURCE: PHP_SOAP_SDK_V1.4 
```

这是内容

```
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"     xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
 <soap:Body><PaymentDetailsRequest>
    <requestEnvelope>
        <errorLanguage>en_US</errorLanguage>
    </requestEnvelope>
    <transactionId>[removed]</transactionId>
</PaymentDetailsRequest></soap:Body>
</soap:Envelope> 
```

至

```
https://svcs.paypal.com/AdaptivePayments/PaymentDetails 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T12:23:33.643

我有一个建议：

我想您已将所有事务 ID 保存在数据库中，

循环所有记录，获取交易ID，通过交易ID获取paykey并更新相关订单，

那么您可以将交易和支付密钥值放在一条记录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:10:25.870

在使用[PaymentDetails API Operation](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APPaymentDetails)时使用现有的跟踪 ID 。payKey 和其他有关付款的信息作为响应返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T11:54:40.073

paypal官方网站上已经有资源了。这是文档的链接 [https://cms.paypal.com/mx/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APPaymentDetails](https://cms.paypal.com/mx/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_APPaymentDetails)

它声明您可以传递 payKey 或 transactionID。两者都作为响应返回，因此您可以获得 payKey 和 transactionID。

如果您在使用 api 时遇到任何问题，可以在此处找到 paypal API 入门教程[http://coding.smashingmagazine.com/2011/09/05/getting-started-with-the-paypal-api/](http://coding.smashingmagazine.com/2011/09/05/getting-started-with-the-paypal-api/)

# scala - scala中带有参数和方法的枚举

> ID：15742261
> 
> 赞同：2
> 
> 时间：2013-04-01T11:06:02.293
> 
> 标签：scala, enums

在使用 java 多年后，我试图进入 scala。可以说我有一个像这样的简单枚举

```
public enum Foo{
  Example("test", false),
  Another("other", true);

  private String s;
  private boolean b;

  private Foo(String s, boolean b){
    this.s = s;
    this.b = b;
  }

  public String getSomething(){
    return this.s;
  }

  public boolean isSomething(){
    return this.b;
  }
} 
```

借助文档和有关stackoverflow的一些帮助，我得到了：

```
object Foo extends Enumeration
{
  type Foo = Value
  val Example, Another = Value

  def isSomething( f : Foo) : Boolean = f match {
    case Example => false
    case Another => true
  }

    def getSomething( f : Foo) : String = f match {
    case Example => "test"
    case Another => "other"
  }
} 
```

但我不喜欢这个有几个原因。首先，这些值分散在方法中，每次添加新条目时都需要更改它们。其次，如果我想调用一个函数，它将采用 Foo.getSomething(Another) 或类似的形式，我觉得这很奇怪，我宁愿喜欢 Another.getSomething。我将不胜感激有关将其更改为更优雅的一些提示。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T11:25:32.253

有必要使用`Enumeration`吗？

你可以使用`sealed abstract class`and `case object`：

```
sealed abstract class Foo(val something: String, val isSomething: Boolean)

case object Example extends Foo ("test", false)
case object Another extends Foo ("other", true) 
```

如果您忘记了一些`Foo`实例，您会收到警告：

```
scala> def test1(f: Foo) = f match {
     |   case Example => f.isSomething
     | }
<console>:1: warning: match may not be exhaustive.
It would fail on the following input: Another
       def test1(f: Foo) = f match { 
```

您还可以向枚举实例添加方法：

```
implicit class FooHelper(f: Foo.Value) {
  def isSomething(): Boolean = Foo.isSomething(f)
}

scala> Foo.Example.isSomething
res0: Boolean = false 
```

# spring - modelMap.put() v/s modelMap.addAttribute()

> ID：15742262
> 
> 赞同：5
> 
> 时间：2013-04-01T11:06:11.513
> 
> 标签：spring, spring-mvc, jakarta-ee

春天有什么区别

```
modelMap.put("key",value); 
```

和

```
modelMap.addAttribute("Key",value); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T11:15:00.580

addAttributes 意味着检查属性名称中的非 null -> 查看来源

```
 /**
     * Add the supplied attribute under the supplied name.
     * @param attributeName the name of the model attribute (never <code>null</code>)
     * @param attributeValue the model attribute value (can be <code>null</code>)
     */
    public ModelMap addAttribute(String attributeName, Object attributeValue) {
        Assert.notNull(attributeName, "Model attribute name must not be null");
        put(attributeName, attributeValue);
        return this;
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-18T12:01:11.350

```
addAttribute(String attributeName, Object attributeValue) 
```

> 在提供的名称下添加提供的属性。

```
put(String attributeName, Object attributeValue) 
```

> 将指定值与此映射中的指定属性名称相关联。如果映射先前包含属性名称的映射，则替换旧值。
> 
> addAttribute 用于添加值，put 用于添加或替换
> 
> 如果我们考虑 Java Spring API
> 
> java.lang.Object java.util.AbstractMap java.util.HashMap java.util.LinkedHashMap org.springframework.ui.ModelMap
> 
> Spring Framework 继承自 HashMap，put 是继承自 HashMap 的方法。

[https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/ui/ModelMap.html](https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/ui/ModelMap.html)

# c# - 搜索服务器 XML 响应格式

> ID：15742272
> 
> 赞同：1
> 
> 时间：2013-04-01T11:06:55.713
> 
> 标签：c#, xml, microsoft-search-server

我编写了一个小程序 - 它向 Microsoft Search Server (_vti_bin/search.asmx) Web 服务发出请求，接收答案并显示它们。请求的格式是 STRING。

查询包在这里：

```
@"<QueryPacket xmlns='urn:Microsoft.Search.Query'>
      <Query>
          <SupportedFormats>
             <Format revision='1'> urn:Microsoft.Search.Response.Document:Document</Format>
          </SupportedFormats>
          <Context>
              <QueryText language='en' type='STRING'>{0}
              </QueryText>
              </Context>
              <ResultProvider>Default</ResultProvider>
              <Range>
                 <Count>10</Count>
              </Range>
           </Query>
    </QueryPacket>" 
```

并提出请求代码：

```
var queryService = new QueryWebServiceProxy.QueryService();
queryService.Credentials = System.Net.CredentialCache.DefaultCredentials;
MessageBox.Show(queryService.Query(GetXmlString()));

private string GetXmlString()
{
     return String.Format(QUERY_XML, queryTextBox.Text);
} 
```

有两种类型的响应：DataSet 和 XML。我更喜欢使用 XML，但 DataSet 答案比 XML 包含更多信息。

**DataSet：** WorkId、Rank、Title、Size、Path、Description、Write、SiteName、CollapsingStatus、HitHighlightedSummary、HitHighlightedProperty、ContentClass、IsDocument... **XML**：title、action、urlLink、Description、Date

我可以接收更多 XML 格式的信息吗？也许标签“SupportedFormats”可以帮助我？

# ruby - 使用 Watir-webdriver- 逐一选择选项

> ID：15742278
> 
> 赞同：2
> 
> 时间：2013-04-01T11:07:20.737
> 
> 标签：ruby, watir

```
b.select_list(:id, "MainContent_drpVehicleType").when_present.options.each do |option|
    option.select

    b.select_list(:id, "MainContent_drpMake").when_present.options.each do |option|
        option.select

        b.select_list(:id, "MainContent_drpModel").when_present.options.each do |option|
            option.select

            b.button(:id,"MainContent_imgbtnsearch").click
        end
    end
end 
```

我有三个下拉菜单，每个下拉菜单取决于以前的值我必须一个一个地选择每个选项，然后单击 Button 。******虽然这样做得到以下错误**** 元素不再附加到 DOM (Selenium::WebDriver::Error::StaleElementReferenceError)**

**也试过：**

```
 b.driver.manage.timeouts.implicit_wait = 3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:17:05.820

试试下面的，

```
b.select_list(:id, "MainContent_drpVehicleType").when_present.options.each do |type_option|
  type_option.select
  sleep 5
  b.select_list(:id, "MainContent_drpMake").when_present.options.each do |make_option|
    make_option.select
    sleep 5
    b.select_list(:id, "MainContent_drpModel").when_present.options.each do |model_option|
      model_option.select
      sleep 5
      b.button(:id,"MainContent_imgbtnsearch").click
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:12:56.830

假设每个选项都是唯一的，您可以尝试：

1.  获取依赖列表中的最后一个选项
2.  在当前列表中进行选择
3.  等待步骤 1 中的选项不再出现

以下实现了这个想法（虽然它没有经过测试，因为我没有类似的页面来测试）：

```
b.select_list(:id, "MainContent_drpVehicleType").when_present.options.each do |option|

    #Select a vehicle type and wait for the last make option to no longer appear
    last_make_option = b.select_list(:id, "MainContent_drpMake").when_present.options.last
    option.select
    last_make_option.wait_while_present

    b.select_list(:id, "MainContent_drpMake").when_present.options.each do |option|

        #Select a make and wait for the last model option to no longer appear
        last_model_option = b.select_list(:id, "MainContent_drpModel").when_present.options.last
        option.select
        last_model_option.wait_while_present

        b.select_list(:id, "MainContent_drpModel").when_present.options.each do |option|
            option.select

            b.button(:id,"MainContent_imgbtnsearch").click
        end
    end
end 
```

注意：

*   该代码假定依赖列表的最后一个选项将始终更改。如果不是这样，您可能需要检查依赖列表的所有选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T18:22:48.330

我担心的一个问题是点击后会发生什么？如果页面刷新或执行某些操作，那么您很可能会使用上面的嵌套方法敬酒，因为在第一次单击之后，无法更改您在第三个列表中的选择并再次单击..

如果上述方法都不起作用，那么当您在列表中做出选择时，您可能需要进行一些窥探以查看正在发生的 HTML 请求（可能是对 REST API）的类型。您也许可以使用它来构建您自己的多维数组来映射选择。或者您可以使用类似于上面的循环结构获得各种选择列表内容，然后循环并进行点击

获得地图后，使用类似于上面的嵌套循环逐维迭代它，但在最里面的循环中执行所有操作，这相当于这个伪代码

```
gather the types and store
for each stored-type do
  pick the type 
  gather makes available for that type and store
  for each make of that type do
    pick the type, then make
    gather models available for that type
    for each model of that make do
      goto starting point
      select type
      select make
      select model
      click
      validate what should happen
    end
   end
 end 
```

# arrays - 从数组中获取指定的行数

> ID：15742282
> 
> 赞同：1
> 
> 时间：2013-04-01T11:07:39.013
> 
> 标签：arrays, range, rows

我有一个这样的 1000 行数组，我想转换成一个字符串，但只有 50 行。

```
 $thearray = Array
        (
          [0] => row1
          [1] => row2
          [2] => row3
          [3] => row4
          [4] => row5
          [5] => row6
          ...
          [999] => row1000
        ) 
```

输出应该就像我会使用的那样：

```
$string1 = implode(',', $thearray); 
```

但如前所述，我只需`$string1`要从数组中获取 50 行，如果可能的话，让它们随机化。我需要一些建议。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-29T05:45:02.080

你可以试试这个，查看代码中的注释以获得解释， http: [//3v4l.org/hjuv6](http://3v4l.org/hjuv6)进行演示

```
// Lets create a dummy array
$array = array();

for($i = 0; $i < 1000; $i++) {
  $array[] = $i;
}

// Lets make a randomized temporary array
$backUpArray = $array;
$tempArray = array();

for($i = 0; $i < 50; $i++) {

  // Select random Index
  $randomIndex = rand(0 , count($backUpArray));
  // Copy it to the temp array
  $tempArray[] = $backUpArray[$randomIndex];
  // Delete the row from our backup
  unset($backUpArray[$randomIndex]);
  // Reorganize the key indexes
  $backUpArray = array_values($backUpArray);
}

$string1 = implode(",", $tempArray);

var_dump($string1); 
```

# xsd - 以下是xsd错误

> ID：15742283
> 
> 赞同：0
> 
> 时间：2013-04-01T11:07:43.807
> 
> 标签：xsd

这是xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <Modules xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="XSDQu3.xsd">
        <Module code="CSE1246">
            <Name shortName="ADSA">Applied Data Structures and Algorithms</Name>
            <Level>1</Level>
            <ResourcePerson>
                <Name>Anwar</Name>
                <Surname>Chutoo</Surname>
            </ResourcePerson>
        </Module>
    <Module code="CSE2041">
    <Name shortName="Web 2">Web Technologies II</Name>
        <Level>2</Level>
        <ResourcePerson>
            <FullName>Shehzad Jaunbuccus</FullName>
        </ResourcePerson>
    </Module>

</Modules> 
```

我的名字有错误。资源人员可以包含全名或姓名和姓氏。请帮忙。我是否正确地做这部分

这是xsd

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">

    <xs:complexType name="NameNSurnameType">
        <xs:sequence>
          <xs:element name="Name" type="xs:string"/>
          <xs:element name="Surname" type="xs:string"/>
        </xs:sequence>
    </xs:complexType>

    <xs:complexType name="ResourcePersonType">
        <xs:sequence>
            <xs:choice>
                <xs:element name="NameNSurnameType" type="NameNSurnameType"/>
                <xs:element name="FullName" type="xs:string"/>
            </xs:choice>
        </xs:sequence>
    </xs:complexType>

    <xs:attribute name="code">
        <xs:simpleType>
            <xs:restriction base="xs:ID">
                <xs:pattern value="CSE(\d{4})"/>
            </xs:restriction>
        </xs:simpleType>
    </xs:attribute>

    <xs:complexType name="nameType">
        <xs:simpleContent>
            <xs:extension base="xs:string">
                <xs:attribute name="shortName" type="xs:string"/>
            </xs:extension>
        </xs:simpleContent>
    </xs:complexType>

    <xs:element name="Modules">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="Module" minOccurs="1" maxOccurs="unbounded">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="Name" type="nameType"/>
                        <xs:element name="Level" type="xs:positiveInteger"/>
                        <xs:element name="ResourcePerson" type="ResourcePersonType"/>

                    </xs:sequence>
                    <xs:attribute ref="code" use="required"/>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
    </xs:complexType>
    </xs:element>
  </xs:schema> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:59:13.047

我能看出你的困惑；选择“选项”几乎可以是任何粒子；一个合成器（例如`xs:sequence`or another `xs:choice`）将匹配描述。您需要做的最低限度是更改以下定义。

```
<xs:complexType name="ResourcePersonType">
    <xs:sequence>
        <xs:choice>
            <xs:sequence>
                <xs:element name="Name" type="xs:string"/>
                <xs:element name="Surname" type="xs:string"/>
            </xs:sequence>
            <xs:element name="FullName" type="xs:string"/>
        </xs:choice>
    </xs:sequence>
</xs:complexType> 
```

如果您想像使用全局复杂类型那样引用名称，那么可以创建一个组并引用它。下面是与上述场景一致的修改后的 XSD：

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com) -->
<xs:schema elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">

    <xs:group name="NameNSurnameType">
        <xs:sequence>
            <xs:element name="Name" type="xs:string"/>
            <xs:element name="Surname" type="xs:string"/>
        </xs:sequence>
    </xs:group>

    <xs:complexType name="ResourcePersonType">
        <xs:sequence>
            <xs:choice>
                <xs:group ref="NameNSurnameType"/>
                <xs:element name="FullName" type="xs:string"/>
            </xs:choice>
        </xs:sequence>
    </xs:complexType>

    <xs:attribute name="code">
        <xs:simpleType>
            <xs:restriction base="xs:ID">
                <xs:pattern value="CSE(\d{4})"/>
            </xs:restriction>
        </xs:simpleType>
    </xs:attribute>

    <xs:complexType name="nameType">
        <xs:simpleContent>
            <xs:extension base="xs:string">
                <xs:attribute name="shortName" type="xs:string"/>
            </xs:extension>
        </xs:simpleContent>
    </xs:complexType>

    <xs:element name="Modules">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="Module" minOccurs="1" maxOccurs="unbounded">
                    <xs:complexType>
                        <xs:sequence>
                            <xs:element name="Name" type="nameType"/>
                            <xs:element name="Level" type="xs:positiveInteger"/>
                            <xs:element name="ResourcePerson" type="ResourcePersonType"/>

                        </xs:sequence>
                        <xs:attribute ref="code" use="required"/>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

# java - 从 jList 的数据库中删除记录的问题

> ID：15742286
> 
> 赞同：-1
> 
> 时间：2013-04-01T11:08:02.777
> 
> 标签：java, mysql, swing, jlist, defaultlistmodel

你好我有问题..谁能给我片段？我有显示 JList 项目的 MySql 表，所以我可以轻松添加项目但不能从数据库中删除它？同时按下删除项目？

我搜索了很多没有人需要做的事情..我想知道它怎么可能？

```
private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {                                             
     try {
         Class.forName("com.mysql.jdbc.Driver");  
         Connection con= (Connection) DriverManager.getConnection("jdbc:mysql://localhost:3306/test","root","ubuntu123");   

         PreparedStatement stmt = null;
         ResultSet rs =  null;

         String [] data;
         data = new String[100];
         int i=0;

         DefaultListModel listmodel = (DefaultListModel) jList2.getModel();
         int selectedIndex = jList2.getSelectedIndex();
         if (selectedIndex != -1) {
             listmodel.remove(selectedIndex);

             String query = "delete from supplierinfo where companyname = ?";
             stmt = (PreparedStatement) con.prepareStatement(query);
             stmt.setInt(1, i);
             stmt.execute();

             con.close();

             // i= i+1;
         }
    } catch(Exception e) {
        System.out.println("3rd catch " +e);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:15:31.627

当您将元素从`ListModel`.

之后，您可以获得有关此项目的所有重要信息并在查询中使用它。

使用这样的东西：

`YourObjectType obj = (YourObjectType) listmodel.remove(selectedIndex);`

```
String query = "delete from supplierinfo where companyname = ?";
                    stmt = (PreparedStatement) con.prepareStatement(query);
                    stmt.setInt(1, obj.getCompanyName());
                    stmt.execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:12:12.590

`ListModel#getElementAt(int)`对当前选定的索引使用该方法。

如果您确定您的模型仅包含 String 实例，您可以直接将其转换为 String，然后`i`在`stmt.setInt(1, i);`

# c# - EF - 将 Dataaccess.Employees 类型转换为 ViewModels.Employee 时出错

> ID：15742287
> 
> 赞同：1
> 
> 时间：2013-04-01T11:08:12.560
> 
> 标签：c#, .net, asp.net-mvc, linq, entity-framework

我有一个名为Employee 的视图模型类和一个名为Employees 的EF 实体。如果我编写以下查询，我会收到一条错误消息，指出“无法转换类型，已存在显式转换）我知道如何使用 select new ViewModel.Employee 子句来解决这个问题，但想知道是否有任何简洁的方法来解决这个问题？任何帮助将不胜感激-谢谢

```
var selectedEmployee = (from q in emsCtx.Employees
                                                where q.Id == employee.Id
                                                select q).ToList().FirstOrDefault();
                       employeeData.Employees = selectedEmployee; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:15:07.063

如果你有两种不同的类型，即使它们具有相同的属性，你也需要在它们之间做映射。您可以通过多种不同方式执行此操作，但是[AutoMapper](http://automapper.codeplex.com/)之类的工具可以提供帮助。如果您的类型在公共属性上基本（或完全）相似，AutoMapper 非常好。

AutoMapper 将允许您在两种类型之间进行映射配置，然后将它们映射。

例如，像这样：

```
Mapper.CreateMap<DataAccess.Employee, ViewModels.Employee>();

var dataEmployee = // data access

var viewModelEmployee = Mapper.Map(dataEmployee); 
```

# php - ZF2 - 子查询

> ID：15742290
> 
> 赞同：2
> 
> 时间：2013-04-01T11:08:33.847
> 
> 标签：php, zend-framework2

Zend Framework 2 中的子查询

我需要的查询：

```
SELECT `comment`.`id` AS `commentId`, `comment`.`comment` AS `comment`, 
        (SELECT COUNT(`comment_vote`.`id`) AS `negativeVote` 
        FROM `comment_vote` 
        WHERE vote = -1 
        AND `comment_vote`.`commentId` = `comment`.`id`) AS `nagetiveVoteCount` 
FROM `comment` 
```

请帮忙。

谢谢，安吉斯

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-01T12:12:14.497

我需要的查询：

```
SELECT `comment`.`id` AS `commentId`, `comment`.`comment` AS `comment`, 
            (SELECT COUNT(comment_vote.id) AS `negativeVote` 
            FROM `comment_vote` 
            WHERE vote = -1 
            AND comment_vote.commentId = comment.id) AS `nagetiveVoteCount` 
            FROM `comment` 
```

我如何使用 Zend Framework 2 创建：

```
$sql = new Sql($this->_adapter);
$mainSelect = $sql->select()->from('comment');
$selectPost = $sql->select()
        ->from('comment_vote')
        ->columns(array('negativeVote' => new \Zend\Db\Sql\Expression('COUNT(comment_vote.id)')))
        ->where('vote = -1')
        ->where('comment_vote.commentId = comment.id');
$mainSelect->columns(
        array(
            'commentId' => 'id', 'comment',
            'nagetiveVoteCount' => new \Zend\Db\Sql\Expression('?', array($selectPost)),
        )
);

$statement = $sql->prepareStatementForSqlObject($mainSelect);
$comments = $statement->execute();
$resultSet = new ResultSet();
$resultSet->initialize($comments);

return $resultSet->toArray(); 
```

参考：http : [//eltonminetto.net/blog/2013/03/21/subqueries-no-zend-framework-2/](http://eltonminetto.net/blog/2013/03/21/subqueries-no-zend-framework-2/)

感谢所有的回复。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-09T10:28:01.380

```
Solution for the above query in ZF2:

$sub = new Select('comment_vote');
$sub->columns(array('negativeVote' => new \Zend\Db\Sql\Expression('COUNT(comment_vote.id)')), FALSE)->where(array('vote' => -1 , 'comment_vote.commentId' => 'comment.id'));
$subquery = new \Zend\Db\Sql\Expression("({$sub->getSqlString()})");
$predicate = new \Zend\Db\Sql\Predicate\Expression("({$sub->getSqlString()})");

$sql = new Sql($this->adapter);
$select = $sql->select()->from('comment');
$select->columns(array('commentId','comment', 'nagetiveVoteCount' => $subquery));
echo $select->getSqlString(); 
```

它将返回输出：

```
SELECT "comment"."commentId" AS "commentId", 
       "comment"."comment" AS "comment", 
       (SELECT COUNT(comment_vote.id) AS "negativeVote" 
          FROM "comment_vote" 
           WHERE "vote" = '-1' 
           AND "comment_vote"."commentId" = 'comment.id') AS "nagetiveVoteCount" 
 FROM "comment" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T11:17:06.080

```
$db->select()
->from ('table1', array('t1_label'))
->joinInner(
      array('T2' => new Zend_Db_Expr (
         '('.
         $db->select()
         ->from('table2', array('t2_label'))
         ->where('condition')
         .')'
      )),
      'table1.t2_id = T2.t2_id',
      array('t2_label')
) 
```

# mysql - JPA一对多删除并将外键设置为null

> ID：15742291
> 
> 赞同：12
> 
> 时间：2013-04-01T11:08:33.877
> 
> 标签：mysql, hibernate, jpa, one-to-many

我使用 Spring Data、JPA、Hibernate 和 MySQL。我在事件和类别之间有一对多的关系。显然，一个事件只能有一个类别，而一个类别可以分配多个事件。当我尝试删除类别时出现问题，如果任何事件持有该类别的外键，那么我会收到错误消息。我想在删除类别时将事件表中的外键设置为空。目前，我通过在代码中显式设置外键来更新所有事件，方法是在删除类别之前将其更新为 null。有没有办法在使用注释时做到这一点？

**这是我的分类：**

```
 @Entity
    @Table(name = "category")
    public class Category implements Serializable{
    @OneToMany(mappedBy="category", targetEntity=Event.class, fetch=FetchType.LAZY, cascade=
{CascadeType.DETACH,  CascadeType.MERGE,  CascadeType.PERSIST, CascadeType.REFRESH})

    public Set<Event> getEvents_category() {
    return events_category;
    }
    } 
```

**和事件类：**

```
@Entity
   @Table(name = "event")
   public class Event implements Serializable{

    @ManyToOne(cascade={CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST,
CascadeType.REFRESH})
    @JoinColumn(name="events_dancestyle")
    public DanceStyle getDanceStyle() {
    return danceStyle;
    }
    } 
```

我已经看到这个话题被讨论了很多次，但我还没有看到任何解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T14:55:46.030

不幸的是，目前无法使用 JPA/Hibernate 注释来做到这一点。请参阅以下相关问题：

[让 JPA/Hibernate 复制“ON DELETE SET NULL”功能](https://stackoverflow.com/questions/9944137/have-jpa-hibernate-to-replicate-the-on-delete-set-null-functionality)

[在 @OneToMany 的休眠中删除设置 null](https://stackoverflow.com/questions/8243400/on-delete-set-null-in-hibernate-in-onetomany)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-24T17:56:20.180

1-最好的方法是编写 cascade = CascadeType.DETACH

2-但你应该写在 Class Event 上面

```
@SQLDelete(sql = "UPDATE event SET deleted=true WHERE id=?") 
```

3-在事件类内部

```
@Column(columnDefinition = "boolean default false")
    private boolean deleted; 
```

4-然后当您删除类别时，如果 CascadeType.ALl 事件实体的“已删除”属性将受到 1 (true) 的影响。如果 CascadeType.DETACH 事件实体的“已删除”属性不受影响，仍为 0（假）。

# c++ - C/C++ 应用程序项目 (NetBeans) 中的多个源文件

> ID：15742292
> 
> 赞同：3
> 
> 时间：2013-04-01T11:08:51.903
> 
> 标签：c++, c, user-interface, netbeans-7

我通过`File > New Project > C/C++ > C/C++ Application`.

但是，在该`Source Files`文件夹下，只允许使用 1 个源文件`main`。

有没有办法在文件夹中包含超过 1 个`main`源文件`Source Files`？

还是我必须为每个源文件创建一个新项目？

相反，对于每个 Java 项目，其中可以有很多`.java`文件。我正在尝试为 C/C++ 应用程序找到相同的功能。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T11:11:05.133

对于同一个项目，您可能有许多源文件`*.c`和`*.h`其他文件

但是对于同一个项目，您可能`main()`在所有源文件中只有一个功能

**例子：**

代码架构：

```
.
└── source_folder
    ├── file1.c
    ├── file2.c
    └── main.c 
```

**文件1.c**

```
#include <stdio.h>

void printfile1()
{
    printf("this is the file1.c\n");
} 
```

**文件2.c**

```
#include <stdio.h>

void printfile2()
{
    printf("this is the file2.c\n");
} 
```

**主程序**

```
#include <stdio.h>

void printfile1(); //prototype definition
void printfile2(); //prototype definition

int main()
{
    printfile1();
    printfile2();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T11:15:43.407

您当然可以拥有许多源文件（.c 或 .cpp .cu 或其他扩展名/只需添加新的源文件），但只有一个 main() 函数，因为这是您程序的入口点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-26T00:30:10.280

我有同样的困惑并使用这种方法解决了它：

1.  创建包含不同代码的函数*（原型和函数体）的源文件*

2.  在 main() 文件中包含这些函数*（原型和函数调用段）*

3.  运行应用程序。

- - 效果很好 - -

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-04-02T06:34:28.487

对于同一个项目，你可以有一个没有。源文件，但只有其中一个源文件可以具有 main() 函数。

同一个项目： - 源文件：* 第一个源文件（没有 main()）* 第二个源文件（没有 main()）* 第三个源文件（没有 main()）* 第 n 个源文件（没有 main()）* 并且只有一个带有 main() 的源文件。

# sql-server - 如何根据给定的详细信息创建引用键

> ID：15742298
> 
> 赞同：0
> 
> 时间：2013-04-01T11:09:28.220
> 
> 标签：sql-server

```
Create table test1
(
    id bigint Not Null,
    name varchar(10) Not Null
    constraint pk_test primary key(id,name)
)
Create table test2
(
    Mid bigint Not Null references test1(id) ,
    MSalary varchar(10) Not Null
) 
```

在 test2 中，我无法创建对 test1 id 的引用请帮助我.. 提前致谢！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:35:21.983

您需要一个外键才能引用一个表。尝试这个：

```
CREATE TABLE test1
(
    id bigint NOT NULL PRIMARY KEY,
    name varchat(10) NOT NULL
)

CREATE TABLE test2
(
    Mid bigint NOT NULL,
    MSalary varchar(10) NOT NULL,
    FOREIGN KEY (Mid) REFERENCES test1(id)
) 
```

# iphone - NSDateformatter 夏令时后的时间不正确

> ID：15742300
> 
> 赞同：0
> 
> 时间：2013-04-01T11:09:31.490
> 
> 标签：iphone, objective-c, date, nsdate, nsdateformatter

我有一个根据用户位置生成当前日期的函数。即使在英国的夏令时更改之后，这也能提供正确的日期和时间。

但是，当我尝试创建一个带有日期的字符串时，它似乎为我增加了一个额外的小时......

例如，存储在 Coredata 中的日期是 2013 年 1 月 3 日 12:00，但是当转换为字符串时，它显示为 2013 年 1 月 3 日 13:00。我对语言环境和时区所做的更改似乎并没有什么不同。

有什么想法可以解决这个问题吗？可能值得注意的是，我从未使用正确的时区创建日期时间的“本地日期”功能。

代码：

```
+(NSDate*)localDate{

NSDate* date = [NSDate date];

NSTimeZone* sourceTimeZone = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
NSTimeZone* destinationTimeZone = [NSTimeZone localTimeZone];

NSInteger sourceGMTOffset = [sourceTimeZone secondsFromGMTForDate:date];
NSInteger destinationGMTOffset = [destinationTimeZone secondsFromGMTForDate:date];
NSTimeInterval interval = destinationGMTOffset - sourceGMTOffset;
return [NSDate dateWithTimeInterval:interval sinceDate:date]; 
```

}

格式化代码：

```
-(NSString*)dateWithTime{
NSDateFormatter*formatter = [[NSDateFormatter alloc]init];

[formatter setDateFormat:@"dd"];
NSInteger day = [[formatter stringFromDate:self]integerValue];
NSInteger fullday = day;
NSString* strDay = @"";
if(day>29){
    day = day - 30;
}
else if(day>19){
    day = day - 20;
}

else if(day>9){
    day = day - 10;
}

if(fullday ==11){
    strDay = @"th";
}
else if(fullday ==12){
    strDay = @"th";
}
else if(fullday ==13){
    strDay = @"th";
}
else if(day == 1){
    strDay = @"st";
}
else if(day ==2){
    strDay = @"nd";
}
else if(day ==3){
    strDay = @"rd";
}
else{
    strDay = @"th";
}

[formatter setDateFormat:@"MMMM"];
NSString* month = [formatter stringFromDate:self];

[formatter setDateFormat:@"HH:mm"];
NSString* time = [formatter stringFromDate:self];

return [NSString stringWithFormat:@"%u%@ %@ %@ - %@",fullday,strDay,month,[self yearString],time];

} 
```

编辑：即使 NSDateComponants 返回不正确的时间..

```
 NSCalendar *gregorian = [NSCalendar currentCalendar];
NSDateComponents *dateComponents = [gregorian components:(NSHourCalendarUnit  |  NSMinuteCalendarUnit | NSSecondCalendarUnit) fromDate:self]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T16:36:44.027

请注意，在控制台中打印 NSDate 将始终以 UTC 格式打印日期。

只需将其存储`[NSDate date]`在您的数据库中。当用户从未更改其时区时，从数据库中读取日期并对其进行格式化将返回正确的结果。

Core Data 中的 NSDate 对象存储为带有 UTC 时区的 UNIX 时间戳。读取和格式化日期对象时，应用用户的当前时区。

当使用 Core Data 存储日期并且依赖于不同的时区时，正确格式化日期的唯一方法是存储适当的时区（时区名称为字符串）。读取和格式化日期对象时，您必须将存储的时区应用于`dateFormatter`. 然后你会得到正确的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T11:29:01.307

NSDate 不知道时区，只有在转换时区才算数，因此您的 localDate 方法可能会以您不希望的方式捏造事情。您可能需要做的是将格式化程序或日历的时区设置为本地区域，因此：

```
[formatter setTimeZone:localTimeZone]; 
```

或者

```
[gregorian setTimeZone:localTimeZone]; 
```

并将返回的值`[NSDate date]`单独保留。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:49:53.407

设置 dateformatter 的语言环境；

```
NSLocale *enUSPOSIXLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
[dateFormatter setLocale:enUSPOSIXLocale]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T12:51:00.157

根据您在设置初始日期/时间后的需要，您可能希望在时区（包括 DST）已更改时收到通知。如果是这样，[applicationSignificantTimeChange:](http://developer.apple.com/library/ios/documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/applicationSignificantTimeChange%3a)将是您的朋友。

# latitude-longitude - 移动 Collada 文件 Lat Long

> ID：15742301
> 
> 赞同：0
> 
> 时间：2013-04-01T11:09:37.817
> 
> 标签：latitude-longitude, google-earth, google-earth-plugin, collada

我将一个 collada 文件附加到插件中，然后根据非常小的纬度和经度增量移动它（append.Child，然后是 remove.Child，然后是 append.Child，等等）。但是，当纬度增量 = 经度增量时，文件以矩形方式移动，而不是方形方式。我究竟做错了什么？collada文件传播的“路径”不应该是“方形”吗？

两个方向（纬度或经度）的增量是相同的增量（0.00001499817）。在试图弄清楚这一点时，我还注意到“圆形”多边形代码也显示为椭圆形，除非您将它沿赤道放置。

我应该假设纬度增量等于地球的经度增量吗？

有人知道可能会发生什么吗？谢谢。保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:01:09.823

> 我应该假设纬度增量等于地球的经度增量吗？

你认为地球是一个完美的球体吗？

你认为纬度和经度线是均匀分布的吗？

从快速谷歌搜索中引用其他人

> 经度是地图上的东西（右/左）测量值。它从西经 180 度到 0（通过英国伦敦格林威治），然后到东经 180 度。西或东 180 度实际上是同一条线 - 它位于太平洋中部。
> 
> 因此有 360 行整数经度。
> 
> 纬度从赤道 - 0 度，北到北极以北 90 度。或以南到南极以南 90 度。
> 
> 因此有 180 行整数纬度。
> 
> 从技术上讲，您不得不说可能的行数实际上是无限的。因为在你选择的任何两条线之间，无论它们有多靠近，你总是可以在它们之间放更多的线。

# java - 使用 Apache PDFBox 解析 PDF 文件

> ID：15742303
> 
> 赞同：1
> 
> 时间：2013-04-01T11:09:54.667
> 
> 标签：java, pdfbox

我正在尝试使用[PDFBox](http://pdfbox.apache.org/)修改 PDF 文档的内容。我按原样使用[了这个示例，但观察到我的 PDF 文件中的文本在字符级别（或更糟）被拆分。](http://svn.apache.org/repos/asf/pdfbox/trunk/examples/src/main/java/org/apache/pdfbox/examples/pdmodel/ReplaceString.java)例如，一个字符串，`EM? what it is:`被拆分为：

```
COSString{E}
COSString{M?}
COSString{ }
COSString{w}
COSString{hat }
COSString{it }
COSString{is}
COSString{:} 
```

`cosString`（通过在上述代码中打印检查时）。据我所知，文件中只有拉丁字符，编码也是ISO-8859-1。有任何想法吗？

问候，

萨利尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:31:14.420

这很可能是 PDF 格式问题。这就是您的特定 PDF 如何存储文本以获得正确的字母间距或[字距调整](http://en.wikipedia.org/wiki/Kerning)。这从 PDF 到 PDF 差异很大，具体取决于它们的创建方式。

通常，我会建议简单地将所有不同的标记合并到一个大的内容字符串中。

# graph - 有人可以为我澄清这个图表演示吗？

> ID：15742305
> 
> 赞同：0
> 
> 时间：2013-04-01T11:09:57.987
> 
> 标签：graph

我有一个坚实的、无循环的图表，其形式如下：

*   逐一移除度数为1（只有一条边）的顶点
*   如果有多个意见，将删除具有最低值的顶点
*   当顶点被移除时，它旁边的顶点会被我标记
*   这将一直持续到图形只剩下一个顶点

这是一个例子：

```

    2 3 3
     \ / /
  5 1 => 5 1 => 5 1 => 5 => 5
   \ / \ / \ / \
    4 4 4 4

```

演示文稿是：

```
1 1 4 5 
```

如何将此演示文稿转换为以下矩阵：

```
 1  2  3  4  5 
-----------------
1  0  1  1  1  0
-----------------
2  1  0  0  0  0
-----------------
3  1  0  0  0  0
-----------------
4  1  0  0  0  1
-----------------
5  0  0  0  1  0
----------------- 
```

我已经为此苦苦挣扎了一段时间，所以如果有人可以提供帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T23:37:37.977

似乎矩阵：

```
 1  2  3  4  5 
-----------------
1  0  1  1  1  0
-----------------
2  1  0  0  0  0
-----------------
3  1  0  0  0  0
-----------------
4  1  0  0  0  1
-----------------
5  0  0  0  1  0
----------------- 
```

只是原始图的邻接矩阵。

# android - 用于测试的最佳 Android 手机

> ID：15742309
> 
> 赞同：-2
> 
> 时间：2013-04-01T11:10:11.620
> 
> 标签：android

任何人都可以建议性能良好的 3 部 android 手机 btw 15k-20k，用于测试目的....我需要测试一些与 wifi 相关的应用程序和一些基本的东西..谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:14:24.803

我可以推荐三星galaxy 2 Sony Xperia Tipo Sony Xperia s Samsung Galaxy ace Lg one 你可以试试阿尔卡特手机 所有手机的价格也很合理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:15:08.637

你是什​​么意思`15k-20k,`？以美元、印度卢比或卢比计价？？？

出于测试目的，您最好购买[Nexus 系列](http://en.wikipedia.org/wiki/Google_Nexus)的 Nexus 设备。他们运行谷歌发布的操作系统。

*   连结小号
*   连结一号
*   银河连结
*   连结 4
*   Nexus 7（平板电脑）
*   Nexus 10（平板电脑）

另一方面，您可以考虑从三星购买 SII、SIII，因为 Android 市场中有很大一部分正在使用这些手机。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-01T11:16:37.500

我用于测试的 3 个 android 设备是

三星 Galaxy Note GT N-7000 高性能 LG Nexus4 2012 年最畅销的手机应该有这个 - 三星 Galaxy s3

# android - 在android中恢复通话记录

> ID：15742315
> 
> 赞同：2
> 
> 时间：2013-04-01T11:10:44.583
> 
> 标签：android

我正在 android 中创建一个应用程序，用于使用 csv 文件备份和恢复通话记录。备份已成功创建，但在恢复所有通话记录时并未从 csv 恢复。这是我为备份编写的代码

```
 while((row = csvReader.readNext()) != null)
                     {
                    RestoreCallLogs(row[0],row[1],row[2],row[3],row[4]);

                    }

public  void RestoreCallLogs(String Name,String number,String Date,String Type,String Duration){
        ContentValues values = new ContentValues();
        values.put(CallLog.Calls.NUMBER, number);
        values.put(CallLog.Calls.DATE, Date);
        values.put(CallLog.Calls.DURATION,Duration);
        values.put(CallLog.Calls.TYPE, Type);

        if(Name!="Unknown")
         values.put(CallLog.Calls.CACHED_NAME, Name);
        getContentResolver().insert(CallLog.Calls.CONTENT_URI, values);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:16:06.280

您有一个 try-catch 块，它隐藏了此处生成的异常：

```
RestoreCallLogs(row[0],row[1],row[2],row[3],row[4]); 
```

你不应该在不了解它的作用的情况下使用 try-catch。

修理：

```
String[] row;
while((line = csvReader.readNext()) != null){
    row = line.split(",");
    RestoreCallLogs(row[0],row[1],row[2],row[3],row[4]);
} 
```

请阅读`.split()`. 您需要做额外的工作来处理联系人记录字符串中的逗号和其他非字母数字字符。您还假设 csv 仅包含 5 列。你能保证吗？

最后，请使用公认的 Java 标识符命名约定。使用大写字母开始变量名会使您的代码难以阅读。

[编辑]

我不知道你的代码是如何编译的。请显示 和 的`row`声明`csvReader`。

# .htaccess - 将 www.domain.com 重定向到 sub.domain.com

> ID：15742319
> 
> 赞同：0
> 
> 时间：2013-04-01T11:10:54.850
> 
> 标签：.htaccess

我正在尝试将 www.domain.com 重定向到 sub.domain.com ，除非 url 是 www.domain.com/something 并且在这种情况下保持这种方式。我在谷歌上找不到任何解决方案，每当我尝试自己实现它时，我都会得到 www.www.domain.com。提前致谢！

```
Options +SymLinksIfOwnerMatch
Options -Indexes 
RewriteEngine on
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:22:43.867

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^(www\.)?domain\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/something/?$
RewriteRule ^ http://sub.domain.com%{REQUEST_URI} [R=301,L] 
```

# vb6 - 如何处理在vb6中进入选项卡？

> ID：15742324
> 
> 赞同：2
> 
> 时间：2013-04-01T11:11:17.227
> 
> 标签：vb6

```
Public Function EnterToTab(KeyAscii As Integer)
    If KeyAscii = vbKeyReturn Then
        SendKeys "{tab}"
        KeyAscii = 0
    End If
End Function

Private Sub txtUserCode_KeyPress(KeyAscii As Integer)
    Call EnterToTab(KeyAscii)
End Sub 
```

*   此代码属于登录形式。
*   `txtUserCode`包含存储在数据库中的特定用户的代码。
*   运行此表单时，当我输入任何数字`txtUserCode`并按`enter`它时不会转到下一个文本框，它的 keyascii 变为 49 不等于 13。
*   按下 也会发生同样的事情`tab`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:19:27.697

`setFocus`使用该方法而不是模拟 a切换到下一个文本字段`TAB`怎么样？

```
Private Sub txtUserCode_KeyPress(KeyAscii As Integer)
    If (KeyAscii = vbKeyReturn) Then
        txtNextTextField.setFocus
    End If
End Sub 
```

您还可以使用控件数组（表单中包含的所有文本字段的数组）并增加索引。因此，您可以将此代码用于表单的所有文本字段，而无需编写冗余代码。

`return`因此，如果用户在文本字段索引 0 中按下，则将焦点设置为 index+1 (=1)。要创建控件数组，请复制您的第一个文本字段并将其粘贴到表单中。VB6 会询问您是否要创建控件数组。如果您单击“是”，它将自动执行。然后您可以使用以下代码：

```
Private Sub txtField_KeyPress(Index As Integer, KeyAscii As Integer)
    If (KeyAscii = vbKeyReturn) Then
        If ((Index + 1) < txtField.Count) Then
            txtField(Index+1).setFocus
        Else
            MsgBox "Reached end of form!"
        End If
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T19:32:15.507

有一个 KB142816[如何使 ENTER 键像 VB 控件的 TAB 键一样移动焦点](http://support.microsoft.com/kb/142816)，其参考实现与您的类似。但。IMO 最重要的部分是免责声明：

> 您可以使 ENTER 键将焦点移动到具有下一个较高 TabIndex 属性值的控件，就像 TAB 键一样。
> 
> 但是，**使用 ENTER 键移动焦点不遵循推荐的基于 Microsoft Windows 的应用程序设计指南**。ENTER 键应该用于处理默认命令或处理输入的信息，而不是移动焦点。

无论如何，您的代码不起作用的原因是一个谜。由于既不`Tab`也不`Enter`将焦点从`txtUserCode`字段移开，我唯一的猜测是这`txtUserCode`是唯一一个`TabStop`属性设置为`True`. 即根本没有其他控件可以将焦点移至。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-22T12:08:52.120

MrSnurb 给出的例子是一个好的开始，但它有很多问题，例如，一个控件可能被禁用或不可见（setfocus 会崩溃），你的 controlarray 中的下一个控件并不意味着它也是下一个控件使用选项卡时会获得焦点（您可以根据需要设置选项卡索引）。我已经变出 2 个“简单”例程（和一个额外的功能），您可以使用它们转到表单上的下一个或上一个控件（实际上没有检查它是否与容器上的控件（框架或其他东西）一起使用） ，所以它可能需要额外的检查..

```
'##############################################################################
'##
'##     Function fnControlCanHaveFocus
'##
'##############################################################################
'A separate routine, because On Error goto doesn't work with this type of
'error in the IDE within a For Each loop, 
'even if you have set 'Only break on unhandled' errors
Private Function fnControlCanHaveFocus(ByRef ctrl As Control) As Boolean
On Error GoTo ErrorHandling
  '--------------------------------------------------------------
  'Check for properties which lets a control get a focus
  'For now also Check TabStop even though the control CAN have focus if this is off
  fnControlCanHaveFocus = (ctrl.TabStop And _
                           ctrl.Enabled And _
                           ctrl.Visible)
  Exit Function
ErrorHandling:
  fnControlCanHaveFocus = False
End Function

'##############################################################################
'##
'##     Sub pSetFocusToNextControl
'##
'##############################################################################
Private Sub pSetFocusToNextControl(ByRef frm As Form)
  Dim ctrl      As Control
  Dim ctrlFirst As Control
  Dim ctrlNext  As Control
  '--------------------------------------------------------------
  'Is there even an active control?
  If Not frm.ActiveControl Is Nothing Then
    '--------------------------------------------------------------
    'Try and find the First and next control which can receive focus
    Set ctrlFirst = Nothing
    Set ctrlNext = Nothing
    For Each ctrl In frm.Controls
      '--------------------------------------------------------------
      'Can this control have focus?
      If fnControlCanHaveFocus(ctrl) And _
         Not ctrl Is frm.ActiveControl Then
        '--------------------------------------------------------------
        'Check for Next control
        If ctrl.TabIndex > frm.ActiveControl.TabIndex Then
          If ctrlNext Is Nothing Then
            Set ctrlNext = ctrl
          ElseIf ctrlNext.TabIndex > ctrl.TabIndex Then
            Set ctrlNext = ctrl
          End If 'ElseIf ctrlNext.TabIndex>ctrl.TabIndex
        End If 'If ctrl.TabIndex>frm.ActiveControl.TabIndex
        '--------------------------------------------------------------
        'Check for first control
        If ctrlFirst Is Nothing Then
          Set ctrlFirst = ctrl
        ElseIf ctrlFirst.TabIndex < ctrl.TabIndex Then
          Set ctrlFirst = ctrl
        End If 'ElseIf ctrlFirst.TabIndex<ctrl.TabIndex
      End If 'If fnControlCanHaveFocus(ctrl) And...
    Next ctrl
    '--------------------------------------------------------------
    'Is there a next control to set focus to?
    If Not ctrlNext Is Nothing Then
      Call ctrlNext.SetFocus
    '--------------------------------------------------------------
    'No next control, but a first control to jump to?
    ElseIf Not ctrlFirst Is Nothing Then
      Call ctrlFirst.SetFocus
    End If 'ElseIf Not ctrlFirst Is Nothing
  End If 'If Not frm.ActiveControl Is Nothing
End Sub

'##############################################################################
'##
'##     Sub pSetFocusToPreviousControl
'##
'##############################################################################
Private Sub pSetFocusToPreviousControl(ByRef frm As Form)
  Dim ctrl          As Control
  Dim ctrlLast      As Control
  Dim ctrlPrevious  As Control
  '--------------------------------------------------------------
  'Is there even an active control?
  If Not frm.ActiveControl Is Nothing Then
    '--------------------------------------------------------------
    'Try and find the Last and previous control which can receive focus
    Set ctrlLast = Nothing
    Set ctrlPrevious = Nothing
    For Each ctrl In frm.Controls
      '--------------------------------------------------------------
      'Can this control have focus?
      If fnControlCanHaveFocus(ctrl) And _
         Not ctrl Is frm.ActiveControl Then
        '--------------------------------------------------------------
        'Check for Previous control
        If ctrl.TabIndex < frm.ActiveControl.TabIndex Then
          If ctrlPrevious Is Nothing Then
            Set ctrlPrevious = ctrl
          ElseIf ctrlPrevious.TabIndex < ctrl.TabIndex Then
            Set ctrlPrevious = ctrl
          End If 'ElseIf ctrlPrevious.TabIndex<ctrl.TabIndex
        End If 'If ctrl.TabIndex<frm.ActiveControl.TabIndex
        '--------------------------------------------------------------
        'Check for Last control
        If ctrlLast Is Nothing Then
          Set ctrlLast = ctrl
        ElseIf ctrlLast.TabIndex > ctrl.TabIndex Then
          Set ctrlLast = ctrl
        End If 'ElseIf ctrlLast.TabIndex>ctrl.TabIndex
      End If 'If fnControlCanHaveFocus(ctrl) And...
    Next ctrl
    '--------------------------------------------------------------
    'Is there a previous control to set focus to?
    If Not ctrlPrevious Is Nothing Then
      Call ctrlPrevious.SetFocus
    '--------------------------------------------------------------
    'No previous control but a Last control to jump to?
    ElseIf Not ctrlLast Is Nothing Then
      Call ctrlLast.SetFocus
    End If 'ElseIf Not ctrlLast Is Nothing
  End If 'If Not frm.ActiveControl Is Nothing
End Sub 
```

例如，您可以像这样使用它：

```
Private Sub txt_KeyDown(Index As Integer, KeyCode As Integer, Shift As Integer)

  Select Case KeyCode 
    Case vbKeyDown, _
         vbKeyReturn
      Call pSetFocusToNextControl(Me)
      KeyCode = 0
    Case vbKeyUp
      Call pSetFocusToPreviousControl(Me)
      KeyCode = 0
  End Select
End Sub 
```

# azure - 异步、Azure 和程序流

> ID：15742327
> 
> 赞同：0
> 
> 时间：2013-04-01T11:11:19.417
> 
> 标签：azure, asynchronous, task, azure-mobile-services

我已经在这个论坛上搜索了我的问题，但没有找到任何适合的东西，我的程序流程有问题。

我在 Azure 上有一个 MobileService，它有一个问题表，我的应用程序有一个主菜单和一个将用户带到测验页面的测验按钮，在测验页面上我有一个开始测验按钮，它显示列表中的第一个问题。

这是我用来从数据库中获取问题的代码，我把它放在页面构造函数中，现在当用户按下测验按钮时，页面打开有一个延迟，这还不错，因为它的等待时间不长，只有几秒钟，有没有更好的方法来做到这一点？

```
Task<IMobileServiceTable<Question>> getDataFromDatabase = new Task<IMobileServiceTable<Question>>(getQuestions);
getDataFromDatabase.Start();
QuestionList = await getDataFromDatabase; 
```

在同一个函数中，我有这段代码修改了开始测验按钮的 isEnabled 属性。除非数据来自服务器，否则这会停止测验继续进行，但它不会一直工作，有时启动按钮已启用设置为 true，即使任务已完成，我也会从我的 MobileServiceCollectionView QuestionList 获得空引用。

```
Task<bool> assignData = new Task<bool>(assignTabletoitems);
assignData.Start();
startbutton.IsEnabled = await assignData; 
```

对此的任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:46:17.850

You shouldn't have to create a new instance of `Task<T>` to query the database (you haven't provided the definition of `getQuestions` which is used in your first code snippet, so I can't tell whether that code is doing what it's supposed to). What you'd typically do is to get a table for the appropriate type from the `MobileServiceClient` object, and then query on it:

```
var client = new MobileServiceClient(appUrl, appKey);
var table = client.GetTable<Question>();
var questionList = await table.ToListAsync(); 
```

Regarding your second code snippet, without the definition of `assignTabletoitems` it's really hard to know what you're intending that code to do.

# java - 在 Java EE 中跟踪用户活动

> ID：15742330
> 
> 赞同：0
> 
> 时间：2013-04-01T11:11:28.480
> 
> 标签：java, session, jakarta-ee

我想跟踪用户的会话。我对获取用户登录名、他访问的上下文以及他访问某个上下文的时间感兴趣。

我正在考虑使用一个实现 HttpSessionListener 的类（覆盖 sessionCreated(final HttpSessionEvent se) 和 sessionDestroyed(final HttpSessionEvent se)）但是在这些方法上我无法访问请求（我可以从中提取用户的日志名和上下文他访问）。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:36:42.077

我认为 servlet [Filter](http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html)更适合您想要的。我建议围绕您要跟踪的所有 url 编写一个自定义过滤器。

在该`doFilter()`方法中，您可以`HttpServletRequest`根据需要访问。从请求对象中你也可以得到`HttpSession`。

这是一个例子：

```
@WebFilter("/*")
public class TrackingFilter implements Filter {

    private FilterConfig filterConfig;

    @Override
    public void init(FilterConfig config) throws ServletException {
        this.filterConfig = config;
    }

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, 
              FilterChain chain) throws IOException, ServletException {
        HttpServletRequest request = (HttpServletRequest) req;
        HttpSession session = request.getSession(false);

        String loggedInUser = "Unregistered user";

        //assuming you have a session attribute named user with the username
        if(session != null && session.getAttribute("user") != null) {
            loggedInUser = (String) session.getAttribute("user");
        }

        Date accessedDate = new Date();
        filterConfig.getServletContext().log(
                String.format("%s accessed context %s on %tF %tT",
                        loggedInUser, request.getRequestURI() , 
                              accessedDate, accessedDate)
        );

        chain.doFilter(req, res);
    }

    @Override
    public void destroy() {
    }
} 
```

另请参阅：[关于过滤器的 JavaEE6 教程部分](http://docs.oracle.com/javaee/6/tutorial/doc/bnagb.html)。

# h2 - 连接数据库时无响应

> ID：15742331
> 
> 赞同：0
> 
> 时间：2013-04-01T11:11:28.840
> 
> 标签：h2

我将 H2 用于 Java Swing 桌面应用程序。

我无法连接到数据库，只能在服务器模式下。

网址为：jdbc:h2:tcp://115.241.34.158:9092/Lion/Companies/1(2012-2013)/1(2012-2013);DB_CLOSE_ON_EXIT=FALSE;DB_CLOSE_DELAY=5;IFEXISTS=TRUE

系统，只是挂起，同时给出 java.sql.DriverManager.getConnection(url, userName, password);

不抛出任何异常（或）任何消息。

它工作正常，在单用户模式下。（无服务器）

可能的解决方案是什么？请指教。

谢谢并恭祝安康，

穆鲁格桑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:03:32.483

如果您在没有基本目录的情况下启动 TCP 服务器，那么您应该使用不同的数据库 URL。以下数据库 URL

```
jdbc:h2:tcp://115.241.34.158:9092/~/Lion/Companies 
```

表示数据库文件`Companies.h2.db`存储在`Lion` *当前用户主目录内的目录中*。但是如果你使用

```
jdbc:h2:tcp://115.241.34.158:9092/Lion/Companies/1(2012-2013)/1(2012-2013) 
```

然后数据库文件`1(2012-2013).h2.db`存储在`Lion/Companies/1(2012-2013)`相对于*当前工作目录*的目录中。工作目录取决于您启动 TCP 服务器的位置。

# sublimetext2 - SublimeLinter 失败，“未定义”不是函数，emitter.on(name, listener);

> ID：15742332
> 
> 赞同：2
> 
> 时间：2013-04-01T11:11:36.217
> 
> 标签：sublimetext2, sublimelinter

我已经让 SublimeLinter 在我的 MacBook 10.6 上使用 javascript 文件正常工作了一段时间，但现在我在保存 js 文件时只看到一个错误。例如对于在第一行有注释的文件：

```
'undefined' is not a function (evaluating 'function (name) {     emitter.on(name, listener);     }.bind(this)')
1:// 
```

无论我在 js 文件中有什么或文件在哪个项目中，我都会看到相同的错误。

我试过删除并重新安装 SublimeLinter，但我仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-11T18:13:28.450

请参阅此处以获取可能的修复[https://github.com/SublimeLinter/SublimeLinter/pull/507#issuecomment-21831056](https://github.com/SublimeLinter/SublimeLinter/pull/507#issuecomment-21831056)

对我来说，这很有效：

> 添加 global.window = {}; 在顶部 linter.js

linter.js 位于`.../Sublime Text 2/Packages/SublimeLinter/sublimelinter/modules/libs/jshint/linter.js`

# jquery - Chrome 中的 jQuery Easing 具有闪烁效果

> ID：15742335
> 
> 赞同：0
> 
> 时间：2013-04-01T11:11:52.000
> 
> 标签：jquery

我正在使用以下脚本来获得平滑的缓动效果，以在同一页面内导航顶部/底部。我在各种浏览器中成功实现了这一点，但是当动画在 Chrome 中启动时，页面会闪烁。页面在 Flash 中单击时会转到顶部，然后允许页面执行动画。

有没有可能摆脱 Chrome 中的闪烁效果？

```
<script type="text/javascript" src="js/jquery.easing.1.3.js"></script>
        <script type="text/javascript">
            $(function() {
                $('a').bind('click',function(event){
                    var $anchor = $(this);

                    $('html, body').stop().animate({
                        scrollTop: $($anchor.attr('href')).offset().top
                    }, 1500,'easeInOutQuad');
                    /*
                    if you don't want to use the easing effects:
                    $('html, body').stop().animate({
                        scrollTop: $($anchor.attr('href')).offset().top
                    }, 1000);
                    */
                    event.preventDefault();
                });
            }); 
```

# c++ - C++ 多态内存开销

> ID：15742337
> 
> 赞同：5
> 
> 时间：2013-04-01T11:12:01.213
> 
> 标签：c++, polymorphism, virtual-functions

我有这段代码：

```
 #include <stdio.h>

    class CoolClass {
    public:
      virtual void set(int x){x_ = x;};
      virtual int get(){return x_;};
    private:
      int x_;
    };

    class PlainOldClass {
    public:
      void set(int x) {x_ = x;};
      int get(){return x_;}
    private:
      int x_;
    };
    int main(void) {
      printf("CoolClass size: %ld\n", sizeof(CoolClass));
      printf("PlainOldClass size: %ld\n", sizeof(PlainOldClass));
      return 0;
    } 
```

我有点困惑，因为它说 CoolClass 的大小是 16？如何？为什么？即使有指向 vtable 的指针，大小不应该是 8 吗？正如预期的那样，oldclass 的大小为 4。

编辑：我正在使用 g++ 4.6.3 运行 Linux Mint 64 位。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T11:14:38.023

你不能假设任何东西的大小除了`char`or `unsigned char`。如果您在 64 位平台上构建，`int`可能仍然是 4 个字节，但虚拟表指针的大小可能是`8`，并且额外的 4 个字节用于填充（以便指针与 8 个字节对齐）。

### 64 位

```
+----+----+----+----+
| vp | vp | x_ | p  |
+----+----+----+----+

vp - virtual table pointer
x_ - member
p  - padding byte 
```

### 32 位

```
+----+----+
| vp | x_ |
+----+----+

vp - virtual table pointer
x_ - member
p  - padding byte

Padding not required because the pointer is already aligned 
```

作为测试，你可以试试

```
class PlainOldClass {
private:
  int* x_;
}; 
```

它的大小是8。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T11:16:18.563

我最好的猜测是您正在为具有 64 位指针的平台进行编译。然后虚拟指针需要 8 个字节，可能需要 4 个字节`int`（一些 64 位平台也会提供 8 个字节 - 但你说`sizeof (PlainOldClass)`是 4，所以这里不适用），另外 4 个为类提供指针所需的 64 位对齐 - 总共 16 个字节。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T11:18:36.763

我认为成本是：

> *   具有 64 位指针的平台，因此虚拟指针为 8 个字节
> *   int 4 个字节（但在某些平台上也可能是 8 个字节）
> *   4 为类提供指针所需的 64 位对齐

总和 = 16 个字节。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T11:29:59.393

这是因为你的系统可能是 64 位系统，因此它变成了，

*   vptr 为 8 个字节。
*   4 个字节用于 int
*   和额外的 4 字节填充以使指针保持 64 位对齐。

因此总和变为 16。

# javascript - 如何将参数传递给PhoneGap数据库事务executeSql函数

> ID：15742340
> 
> 赞同：0
> 
> 时间：2013-04-01T11:12:08.543
> 
> 标签：javascript, ios, cordova, jquery-mobile

我是 PhoneGap 的新手，我正在使用数据库，并且可以使用以下代码正常工作

```
db = window.openDatabase("Sample", "1.0", "PhoneGap Demo", 200000);
    db.transaction(getDetails, transaction_error);

function transaction_error(tx, error) {
    $('#busy').hide();
    alert("Database Error: " + error);
}

function getUserDetails(tx) {
var sql = "select id, Name,  DisplayName from details where Name=Name";
    try {
        tx.executeSql(sql, [],getList_success);
    }
    catch(err)
    {
        alert(err);
    }
}

function getList_success(tx, results)
{
    var len = results.rows.length;
    for(var i=0; i <len; i++)
    {
        //Some code goes here
        }
    db = null;
} 
```

现在我想使用这些函数`getUserDetails`并`getList_success`通过传递参数，我尝试了下面的代码，它给出了错误

```
db = window.openDatabase("Sample", "1.0", "PhoneGap Demo", 200000);
    getUserDetails(db);

function getUserDetails(tx) {
var sql = "select id, Name,  DisplayName from details where Name=Name";
    try {
        tx.executeSql(sql, [],getList_success);
    }
    catch(err)
    {
        alert(err);
    }
} 
```

错误`TypeError:'undefined' is not a function`在 catch 块中，任何人都可以帮助我解决这个问题吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T06:32:56.683

executeSql 函数需要 4 个参数，试试这个：

```
function errorCallback(err){
//show error
}
...
tx.executeSql(sql, [],getList_success,errorCallback); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-17T07:14:19.287

问题是您将回调函数移交给 db.transaction。如果你想向被调用者提供一些数据，你必须在调用者的上下文中使用闭包来提供这些数据。

```
var db = window.openDatabase("Sample", "1.0", "PhoneGap Demo", 200000);
var context = {val1: 'x', val2: 'y'};
db.transaction(function(tx){
        myfunction(tx,context);
    },
    tx_error,
    tx_success);

function myfunction(ty,context){
    tx.executeSql(query,[context.val1,context.val2],myf_success,myf_error);
} 
```

请记住，这发生在一个新线程中！因此，如果您调用 db.transaction 请注意这同时发生在调用者身上。例如，如果您从 jQuery.ajax() 调用的成功回调内部调用 db.transaction()，则 ajax 线程将继续运行，并且可能在事务仍在进行时执行完整的回调。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-10T22:44:04.430

看看你的代码：

db.transaction(getDetails, transaction_error);

获取详细信息！

查看您声明的函数：

函数 getUserDetails(tx) {...}

函数 getList_success(tx, results) {....}

getDetails 不是 getUserDetails....

这就是您收到错误的原因。

# python - 避免在文本文件中对 python 中的搜索程序进行十六进制编码

> ID：15742342
> 
> 赞同：0
> 
> 时间：2013-04-01T11:12:12.937
> 
> 标签：python, python-2.7

我编写了一个 python 程序来分析服务器日志（文本文件）并找到与用户输入不匹配的字符串。无论如何，程序不考虑十六进制编码的字符串。例如：在以下情况下，程序说没有与用户输入不匹配的值，尽管“www.peoplesmonton.com”可用。请帮我避免这种情况？

```
for line in lines:
    match = re.search('\\b' + userinput + '\\b',line) 
```

示例文本文件：

```
https://www.mysite.com/myworks/accaply/inquiry.asp 
http://www.peoplesmonton.com/amb/cgi-bin/bank/bank/ambt%20Bank%20Of%20Frnak%20PLC_asp.htm 
http://www.peoplesmonton.com/comblk/cgi-bin/bank/bank/ambt%20Bank%20Of%20ambt%20PLC_asp.htm 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:13:45.457

该信息是*URL 编码*的，因此用于`urllib2.unquote`解码。

```
>>> input = '''\
... https://www.mysite.com/myworks/accaply/inquiry.asp 
... http://www.peoplesmonton.com/amb/cgi-bin/bank/bank/ambt%20Bank%20Of%20Frnak%20PLC_asp.htm 
... http://www.peoplesmonton.com/comblk/cgi-bin/bank/bank/ambt%20Bank%20Of%20ambt%20PLC_asp.htm 
... '''
>>> import urllib2
>>> print urllib2.unquote(input)
https://www.mysite.com/myworks/accaply/inquiry.asp 
http://www.peoplesmonton.com/amb/cgi-bin/bank/bank/ambt Bank Of Frnak PLC_asp.htm 
http://www.peoplesmonton.com/comblk/cgi-bin/bank/bank/ambt Bank Of ambt PLC_asp.htm 
```

# mysql - SQL中的除法运算

> ID：15742348
> 
> 赞同：-1
> 
> 时间：2013-04-01T11:12:40.690
> 
> 标签：mysql, sql

我有一个数据库，其中存在一个表员工，如下所示

```
+-----------+--------------+-------------+
| LastName  | DepartmentID | projectname |
+-----------+--------------+-------------+
| Rafferty  |           31 |  ims        |
| Jones     |           33 |  ibm server |
| Steinberg |           33 |  null       |
| Robinson  |           34 |  ims        |
| Smith     |           34 |  ibmserver  |
| John      |         NULL |  ims        |
+-----------+--------------+-------------+ 
```

我想检索那些从事琼斯工作的项目的姓氏

```
Select * from employee ??? 
```

请有任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:19:18.160

以下应该是您的查询 -

```
Select * from employee where projectname = (select projectname from employee where LastName = 'Jones'); 
```

`in`由于琼斯在一个项目中工作，我们没有使用条款。

如果他在多个项目中工作

那么查询可以是 -

```
Select * from employee where projectname in (select projectname from employee where LastName = 'Jones'); 
```

谢谢

# cordova - Phonegap+jQuery Mobile，控制器整体卡顿

> ID：15742349
> 
> 赞同：0
> 
> 时间：2013-04-01T11:12:42.517
> 
> 标签：cordova, jquery-mobile

我正在使用 phonegap 和 jquerymobile 开发一个 Android 应用程序，我在按钮和选择菜单之类的东西上整体反应迟缓。

有时它们工作得很好，但大多数时候需要几次点击才能工作，很多按钮“卡”在悬停状态/按下状态，选择菜单非常慢，我的点击注册的选项与我的不同轻拍。

需要注意的一件事是，`data-role="content"`从我的页面中删除似乎有性能提升（wtf 的大案例），我也尝试过`$.mobile.buttonMarkup.hoverDelay = 0;`，这似乎没有任何效果。

到目前为止，我的页面非常轻巧（尚未呈现任何内容服务器端/所有脚本都在本地引用/只有 4 页纯 html），我只使用幻灯片效果（顺便说一句，效果很好，该部门没有呆滞） ，是控制器杀死了我

我正在一个 4.0 设备上测试它，不确定我是否遗漏了什么，但如果它在项目中这么快就这么笨重，我不想考虑当我们真正开始时它会是什么样子......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:21:51.187

中端和入门级手机上的 jQuery Mobile 一直很糟糕。标记我的话。如果您在 SIII 或 SIV 甚至 iPhone 系列等高端设备上运行您的应用程序，那么您会发现 UI 看起来很酷且不那么呆滞。

问题仅仅是因为缺乏处理能力。当您发布产品时，您必须通知您的客户，在入门级手机上，它看起来会很丑，最终会占用所有内存，WebView 或浏览器会崩溃。

# tcp - C# 检测 TCP 客户端断开连接

> ID：15742350
> 
> 赞同：2
> 
> 时间：2013-04-01T11:12:45.247
> 
> 标签：tcp

我正在使用 C# 窗口应用程序表单处理 TCP 多线程服务器，我正在尝试检测客户端机器是否已关闭并与服务器断开连接。我已经阅读了一些帖子并有一些想法：

[如何判断tcp是否连接？](https://stackoverflow.com/questions/6993295/how-to-determine-if-the-tcp-is-connected-or-not)

[立即检测客户端与服务器套接字的断开连接](https://stackoverflow.com/questions/722240/instantly-detect-client-disconnection-from-server-socket)

但我不确定在哪里调用该函数`IsConnected`

我的代码如下：

```
public BindingList<Tablet> tabletList = new BindingList<Tablet>();
private Socket socket_Server = null;
    private Thread myThread = null;
    private Socket socket_Connect = null;
    private Dictionary<string, Socket> dic = new Dictionary<string, Socket> { };
    private string RemoteEndPoint;

socket_Server = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        IPAddress ServerIP = IPAddress.Parse("192.168.2.146");
        IPEndPoint point = new IPEndPoint(ServerIP, portNum);
        socket_Server.Bind(point);
        socket_Server.Listen(50);
        myThread = new Thread(Listen_Disp);
        myThread.IsBackground = true;
        myThread.Start();
        Console.WriteLine("Server start");

private void Listen_Disp()
    {
        try
        {
            while (true)
            {

                //This is not working
                for (int i = 0; i < tabletList.Count; i++)
                {
                    if (!SocketConnected(dic[tabletList[i].ip]))
                    {
                        Console.WriteLine(RemoteEndPoint + "disconnected");
                    }
                }

                try
                {
                    socket_Connect = socket_Server.Accept();
                    RemoteEndPoint = socket_Connect.RemoteEndPoint.ToString();
                    Console.WriteLine(RemoteEndPoint + " is connected");
                    dic.Add(RemoteEndPoint, socket_Connect);

                    Tablet newTablet = new Tablet();
                    newTablet.ip = RemoteEndPoint;
                    newTablet.status = "Online";
                    tabletList.Add(newTablet);
                }
                catch (Exception ex)
                {
                    Console.WriteLine(ex.ToString());
                }
            }

            Console.WriteLine("end of while");
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());
        }
    }

static class SocketExtensions
{
    public static bool IsConnected(this Socket socket)
    {
        try
        {
            return !(socket.Poll(1, SelectMode.SelectRead) && socket.Available == 0);
        }
        catch (SocketException) { return false; }
    }
} 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T11:53:41.130

关于该主题有很多错误信息，其中一些存在于您链接的问题中。检测 TCP 断开连接的唯一可靠方法是尝试写入连接。读取超时也可能表示连接断开，但也可能意味着很多其他事情，例如服务器卡住。读取时的 EOS 条件表示正常断开连接。IsConnected() 方法和朋友只给你一个你对这个套接字做了什么的历史：他们不给你连接的当前状态。他们不能，因为没有挂起的写请求，就没有状态要知道。TCP 不维护任何类似于拨号音的东西。

# php - 谷歌 API 登录

> ID：15742352
> 
> 赞同：7
> 
> 时间：2013-04-01T11:12:48.920
> 
> 标签：php, google-analytics

我尝试使用php 中的[google api 类从 google 分析中获取数据。](http://code.google.com/p/gapi-google-analytics-php-interface/)我检查了 serval google groups，发现大多数时候当 Curl 关闭并且 SSL 也关闭时，错误就会出现，但我检查了 phpinfo() 并且展位正在运行。有人知道它可能是什么吗？在我的本地服务器上它正在运行，但在网络服务器上它没有运行。

```
<br />
<b>Fatal error</b>:  Uncaught exception 'Exception' with message 'GAPI: Failed to authenticate user. Error: &quot;Error=BadAuthentication
Url=https://www.google.com/accounts/ServiceLogin?service=analytics#Email=mail
Info=WebLoginRequired
&quot;' in /home/express/public_html/loggedIn/gapi.class.php:418
Stack trace:
#0 /home/express/public_html/loggedIn/gapi.class.php(62): gapi-&gt;authenticateUser('mail', 'pw')
#1 /home/express/public_html/loggedIn/request.php(10): gapi-&gt;__construct('mail', 'pw')
#2 {main}
  thrown in <b
>/home/express/public_html/loggedIn/gapi.class.php</b> on line <b>418</b><br /> 
```

![在此处输入图像描述](https://i.stack.imgur.com/MI4mT.jpg)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-01T12:14:12.030

[所以在浏览了更多群之后，有朋友发现在这个url](https://accounts.google.com/DisplayUnlockCaptcha)第一次开始取数据之前需要先批准你的账号

# wordpress - IE Internet Explorer 和 android 上的 text-align 对齐错误

> ID：15742355
> 
> 赞同：2
> 
> 时间：2013-04-01T11:12:52.720
> 
> 标签：wordpress, internet-explorer, text-align, justify

对于我的 wordpress 内容，我对 Internet Explorer 和 android 产生了非常糟糕的合理化效果：对于某些行，我的单词之间有很大的空格，而最后两个单词之间的空格突然很小

它适用于其他浏览器，即 chrome/firefox/safari。

平台：Wordpress 3.5 + Visual Composer 插件

有人有想法吗？

这是内容： [http ://www.arkama.fr/offres/sap/assistance-technique/](http://www.arkama.fr/offres/sap/assistance-technique/)

它在线上可见 •La recherche et l'identification de

```
<ul style="text-align: justify;">
<li style="text-align: justify;">La bonne <strong>qualification</strong> du besoin client ;</li>
</ul>
<ul style="text-align: justify;">
<li style="text-align: justify;">La <strong>recherche</strong> et <strong>l’identification</strong> de ressources disponibles et adaptées ;</li>
</ul>
<ul style="text-align: justify;">
<li style="text-align: justify;">La <strong>validation du profil</strong> et des compétences de ce dernier <strong>par des entretiens techniques, de personnalité</strong> et <strong>d’anglais</strong> ;        
</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-22T14:09:51.453

源代码中的一些隐藏的十六进制字符会导致此问题。在 IE 中，非中断空格字符不会在两端对齐的文本中拉伸。

Chrome 中的开发者工具显示了这些字符生成的 HTML 代码：

![Chrome 开发工具的元素检查](https://i.stack.imgur.com/2M8kA.gif)

十六进制编辑器（在我的情况下为 HxD）揭开了源代码中一些隐藏字符的盖子（`00`并且`20`可以，但是 a`A0`呈现 a `&nbsp;`，这会导致您的情况出现问题）：

![HxD 中的源代码视图](https://i.stack.imgur.com/hdue0.gif)

您可以尝试使用记事本++ 之类的文本编辑器复制/粘贴您的代码，以消除这些字符。使用具有显示隐藏字符的内置功能的 Dreamweaver（视图 > 代码视图选项 > 隐藏字符），删除这些字符后，在 IE 中一切正常。

![Dreamwaever 中的源代码](https://i.stack.imgur.com/KvRY0.gif)

# mysql - 如何将重复行更改为mysql数据库中的唯一值

> ID：15742356
> 
> 赞同：0
> 
> 时间：2013-04-01T11:13:05.143
> 
> 标签：mysql, doc

我有一个包含大约 1M 条记录的数据库表。我需要在此表中找到所有重复的名称并使它们唯一。

## 标识名称

1 A 2 A 3 B 4 C 5 C 应该改为...

## 标识名称

1 A 2 A-1 3 B 4 C 5 C-1 是否有使用 mysql 查询或过程执行此操作的有效方法？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T15:40:40.047

我需要做一些类似于我正在处理的桌子的事情。我需要一个唯一的 URL 字段，但以前的数据保存者没有保留这些约束。关键是创建一个临时表。

我在这里使用此响应来提供帮助：[MySQL 错误 1093 - 无法在 FROM 子句中指定要更新的目标表](https://stackoverflow.com/questions/45494/mysql-error-1093-cant-specify-target-table-for-update-in-from-clause#answer-45498)

请注意，它的性能并不好，但是如果您只需要在数据库上运行一次来​​清理表，那么它应该不会那么糟糕。

```
UPDATE `new_article` `upd`
SET `upd`.`url` = CONCAT(`upd`.`url`, '-', `upd`.`id`)
WHERE `upd`.`url` IN(
    SELECT `url` FROM (
        SELECT `sel`.`url` FROM `new_article` `sel`
        GROUP BY `sel`.`url` HAVING count(`sel`.`id`) > 1
    ) as `temp_table`
); 
```

# php - WHERE NOT 在 Wordpress 中查询

> ID：15742357
> 
> 赞同：1
> 
> 时间：2013-04-01T11:13:07.517
> 
> 标签：php, wordpress

我正在使用以下代码查询数据库，它工作正常

```
<?php query_posts( 

'post_type=gallery&posts_per_page='.$gnum.'&paged='.$paged.'&orderby=title&order=ASC'

 ); ?> 
```

您能否告诉我如何在上述查询中添加 WHERE NOT。

( `WHERE ID != '400' AND ID!='401'`)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T11:17:29.317

在 wordpress 查询后添加参数`post__not_in`。

```
'post__not_in' => array(400, 401)

$args = array(
     'post_type' => 'gallery',
     'posts_per_page' => $gnum,
     'post__not_in' => array(400, 401),
     'paged' => $paged,
     'orderby' => 'title',
     'order' => 'ASC'
); 
```

所以你的查询帖子会像，

```
query_posts($args); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T11:15:42.437

试试这个...

```
$args = array(
           'post_type' => 'gallery',
           'posts_per_page' => $gnum,
           'paged' => $paged,
           'orderby' => 'title',
           'order' => 'ASC',
           'post__not_in' => array(6,2,8) 
        );
query_posts( $args ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T11:15:14.237

```
<?php query_posts( 

'post_type=gallery&posts_per_page='.$gnum.'&paged='.$paged.'&orderby=title&ID='-400,-401'&order=ASC'

 ); ?> 
```

# asp.net - 如何避免我的网页在 ASP.NET 中的响应超时？

> ID：15742358
> 
> 赞同：1
> 
> 时间：2013-04-01T11:13:19.480
> 
> 标签：asp.net, timeout, response, execution-time

我正在从 Excel 中导入大量数据（100.000 行等），并从 excel 中获取必要的值（大约需要 1 分钟）

然后我在这些记录中循环并执行一些数据库插入/更新语句。但大约在 90 秒后，响应停止。我的页面停止但在后台数据库继续并执行插入/更新作业。

但是我不能给用户一个反馈（你的过程已经完成等等），因为响应已经结束（超时）。

我尝试增加 web.config 中的超时时间：

```
<httpRuntime maxRequestLength="10240" executionTimeout="36000"/> 
```

我还尝试为该特定页面增加 executionTimeout，如下所示：

```
<location path="HomePage.aspx"> <!--Excel import takes too long-->
  <system.web>
    <httpRuntime executionTimeout="360000" maxUrlLength="10000" maxQueryStringLength="80000" maxRequestLength="10240" />
  </system.web>  
</location> 
```

他们没有工作！有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:53:48.630

protected void Page_Load(object sender, EventArgs e) { **ScriptManager.GetCurrent(this.Page).AsyncPostBackTimeout = 6000;**

我将 AsyncPostBackTimeout 增加到 6000，这对我有用。我的链接按钮（漫长的过程）在更新面板中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T11:19:40.967

试试这个方法

```
<configuration>
  <system.web>
  ...
   <sessionState timeout="90" />
  ...
 </system.web>
</configuration> 
```

看到这个

[http://asp-net.vexedlogic.com/2012/05/23/aspasp-net-session-timeout-how-do-i-change-it/](http://asp-net.vexedlogic.com/2012/05/23/aspasp-net-session-timeout-how-do-i-change-it/)

[http://forums.asp.net/t/1040377.aspx/1](http://forums.asp.net/t/1040377.aspx/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-28T05:03:20.410

下面的代码似乎只与 webconfig 更改结合使用。

```
protected void Page_Load(object sender, EventArgs e) { ScriptManager.GetCurrent(this.Page).AsyncPostBackTimeout = 6000;
} 
```

没有这个，它对我不起作用。

```
<httpRuntime maxRequestLength="102400" executionTimeout="36000" /> 
```

# c++ - GetExtendedUdpTable 和 netstat 结果的区别

> ID：15742363
> 
> 赞同：1
> 
> 时间：2013-04-01T11:13:53.180
> 
> 标签：c++, windows, api, port, netstat

我使用此代码获取打开的 UDP 端口和使用每个端口的应用程序。

```
DWORD (WINAPI *pGetExtendedUdpTable)(
  PVOID pUdpTable,
  PDWORD pdwSize,
  BOOL bOrder,
  ULONG ulAf,
  UDP_TABLE_CLASS TableClass,
  ULONG Reserved
);
    MIB_UDPTABLE_OWNER_PID *pUDPInfo;
    MIB_UDPROW_OWNER_PID *owner;
    DWORD size;
    DWORD dwResult;

    HMODULE hLib = LoadLibrary((LPCWSTR)"iphlpapi.dll");

    pGetExtendedUdpTable = (DWORD (WINAPI *)(PVOID,PDWORD,BOOL,ULONG,UDP_TABLE_CLASS,ULONG))
        GetProcAddress(hLib, "GetExtendedTcpTable");

    if ( !pGetExtendedUdpTable )
    {
        //printf("Could not load iphlpapi.dll. This application is for Windows XP SP2 and up.\n");

        return "Could not load iphlpapi.dll. This application is for Windows XP SP2 and up.\n";
    }

    dwResult = pGetExtendedUdpTable(NULL,       &size, false, AF_INET, (UDP_TABLE_CLASS)5, 0);
    pUDPInfo = (MIB_UDPTABLE_OWNER_PID*)malloc(size);
    dwResult = pGetExtendedUdpTable(pUDPInfo,   &size, false, AF_INET, (UDP_TABLE_CLASS)5, 0);
//
   if (dwResult != NO_ERROR)
    {
        printf("Couldn't get our IP table");

        return "Couldn't get our IP table";
    }
   for (DWORD dwLoop = 0; dwLoop < pUDPInfo->dwNumEntries; dwLoop++)
    {
        owner = &pUDPInfo->table[dwLoop];      
        ApplicationName = GetNameByPID(owner->dwOwningPid);
        OpenedPort = convertInt(ntohs(owner->dwLocalPort));
        LocalAdress = convertInt(ntohs(owner->dwLocalAddr));
   } 
```

但是，我没有与 netstat -ano 相同的结果。在我的代码中，我有超过 10 次端口 0，但在 netstat 命令中，端口 0 不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:06:41.667

您到处都有 UDP，但您要查询的功能是 TCP 之一（`GetExtendedTcpTable`）。

# eclipse - 在 Eclipse 中自定义失败

> ID：15742375
> 
> 赞同：0
> 
> 时间：2013-04-01T11:14:34.273
> 
> 标签：eclipse, ibm-mobilefirst

我正在尝试在 Eclipse 中构建和部署 Android 环境 Worklight 项目。但是在 Deploy 它在控制台中给了我这些错误：

> E: ====== Worklight Project Final-project-customization 未能启动：用户缺少权限或找不到对象：CLUSTER_SYNC {SELECT t0.HOSTVMID, t0.ID, t0.UPDATETIMESTAMP, t0.VERSION FROM CLUSTER_SYNC t0 WHERE t0 .ID = ?} [代码=-5501，状态=42501]
> 
> 激活失败。Bundle 没有启动：C:\Users\workspace\Final\bin\Final-customization.jar

我在网上找到了很多，但解决方案不起作用。任何帮助，将不胜感激。

**完整信息：**

> 激活 Worklight 项目：最终...

[2013-04-01 16:09:27] Worklight Server 在 localhost:8080 上成功停止

[2013-04-01 16:09:29] Worklight Server 在 localhost:8080 上成功启动

[2013-04-01 16:09:34] FWLST0011E: ====== Worklight Project Final-project-customization 未能启动：用户缺少权限或找不到对象：CLUSTER_SYNC {SELECT t0.HOSTVMID, t0.ID, t0.UPDATETIMESTAMP，t0.VERSION 来自 CLUSTER_SYNC t0 WHERE t0.ID = ?} [code=-5501, state=42501] [2013-04-01 16:09:34]

```
 Activation failed. Bundle didn't start:C:\Users\workspace\Final\bin\Final-customization.jar 
```

[2013-04-01 16:09:34] FWLST0012I: ====== 为项目最终项目定制停止服务器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T06:06:39.627

从 Eclipse 工作区中删除 WorklightServerHome 文件夹（当 Eclipse 关闭时）。

# doctrine-orm - zf2 acl 学说 2

> ID：15742379
> 
> 赞同：0
> 
> 时间：2013-04-01T11:14:40.057
> 
> 标签：doctrine-orm, zend-framework2, acl

实际上使用 Zend Framework 2，我正在寻找一种方法来实现基于数据库的高性能 ACL 策略。

整个想法是根据当前登录的用户及其权限直接过滤 DQL 查询。

我在 Symfony 2 [http://symfony.com/doc/current/cookbook/security/acl_advanced.html](http://symfony.com/doc/current/cookbook/security/acl_advanced.html)中找到了这种机制的实现，在这种情况下，如果每个用户可以访问单行，则似乎为每个用户存储一个表，所以我们可以很容易地通过加入这个表来动态加载只允许的行。

为了综合，我正在寻找一种方法来根据条件定义对实体的访问规则，但希望能够在单个查询中获得结果，以便能够进行一些排序和分页。

是否有任何 ZF2 模块可以解决这种情况？

似乎无法将 SF2 安全组件集成为独立的：[Symfony 2.0 的安全组件作为独立的](https://stackoverflow.com/questions/10103912/security-component-from-symfony-2-0-as-standalone/11319039#11319039)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:53:18.390

您必须使用学说过滤器为当前成员加载内容

我的代码示例为成员查询添加过滤器：

```
$em = $sm->get('doctrine.entitymanager.orm_default');

$ormconfig = $sm->get('doctrine.configuration.orm_default');

$ormconfig->addFilter("member", "\PatrickCore\Script\ORM\Functional\MemberAccessFilter");

//

$currentUser = $membersService->getCurrentUser();

$uid = $currentUser->getId();
$filter = $em->getFilters()->enable("member");
$filter->setParameter('member', $uid); 
```

这个文件**\PatrickCore\Script\ORM\Functional\MemberAccessFilter**：

```
<?php
namespace PatrickCore\Script\ORM\Functional;
use Doctrine\ORM\Mapping\ClassMetaData,
    Doctrine\ORM\Query\Filter\SQLFilter;

class MemberAccessFilter extends SQLFilter
{
    public function addFilterConstraint(ClassMetadata $targetEntity, $targetTableAlias)
    {
        // Check if the entity implements the LocalAware interface

        if (!$targetEntity->reflClass->implementsInterface('\PatrickCore\Entity\MemberAccessAware')) {
            return "";
        }

        return $targetTableAlias.'.member_id = ' . $this->getParameter('member'); // getParameter applies quoting automatically
    }
} 
```

# xml - 如何从文件中读取多个 xml 元素？

> ID：15742382
> 
> 赞同：0
> 
> 时间：2013-04-01T11:14:47.157
> 
> 标签：xml, vb.net, xmldocument

大家好，我有这个 xml 文档，我想提取第一个或第二个应用程序文件路径和文件名等。我试过了

```
DocumentElement.SelectSingleNode("/InstallerList/Installer/File_Path").InnerText 
```

但我只得到第一个应用程序信息，从来没有第二个，我试过玩

```
DocumentElement.SelectNodes("//Installer") 
```

并在它的末尾添加一个整数，这样我就可以循环浏览，但它似乎不喜欢那样。有什么想法吗？

```
<?xml version="1.0" encoding="utf-8"?>
<InstallerList>
 <Installer Name="First Application">
   <FilePath>C:\</FilePath>
   <Third_Parameter>etc</Third_Parameter>
   <Forth_Parameter>etc</Forth_Parameter>
 </Installer>
 <Installer Name="Second Application">
   <FilePath>etc</FilePath>
   <Third_Parameter>etc</Third_Parameter>
   <Forth_Parameter>etc</Forth_Parameter>
 </Installer>
</InstallerList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:25:03.153

如果您只想选择一个`FilePath`元素，给定一些已知的键值，例如安装程序的`Name`属性，您可以在 XPath 中添加一个条件来缩小结果范围，如下所示：

```
DocumentElement.SelectSingleNode("/InstallerList/Installer[@Name='First Application']/FilePath").InnerText 
```

或者，您可以简单地选择所有`FilePath`元素，然后遍历它们，如下所示：

```
For Each node As XmlNode In DocumentElement.SelectNodes("/InstallerList/Installer/FilePath")
    Dim path As String = node.InnerText
    ' ...
Next 
```

# django - django 与 gunicron 和 nginx

> ID：15742383
> 
> 赞同：0
> 
> 时间：2013-04-01T11:14:47.303
> 
> 标签：django, deployment, nginx, gunicorn, supervisord

我已经开发了 django 应用程序，现在使用 gunicron 和 nginx 在 freebsd 服务器上部署它。我在 installedapps 下的项目设置文件中添加了 guncorn。并将 gunicorn.conf.py 放在根目录中：

```
import os

def numCPUs():
    if not hasattr(os, "sysconf"):
        raise RuntimeError("No sysconf detected.")
    return os.sysconf("SC_NPROCESSORS_ONLN")

user = root
workers = numCPUs() * 2 + 1
bind = "127.0.0.1:8000"
pidfile = "/tmp/gunicorn-srv.pid"
backlog = 2048
logfile = "/data/logs/gunicorn_srv.log"
loglevel = "info" 
```

然后在 nginx.conf 更新服务器标签：

```
 listen       80;
    server_name localhost;

    access_log   /var/log/nginx/nginx-access.log;
    #charset koi8-r;

    #access_log  logs/host.access.log  main;

    location / {
        proxy_pass   http://127.0.0.1:8000;
        #root   /usr/local/www/nginx;
        #index  index.html index.htm;
    }

    location  /media/ {
        root /data/webs/uni_rate;
    }
    location  /static/ {
        root /data/webs/uni_rate;
    } 
```

现在我已经启动了 nginx 和 guncorn。如果我浏览我的公共 ip 页面，但不提供静态文件。如果我直接打

```
http://myip/static/folder/file.css 
```

然后返回 403 错误。任何想法可能是什么原因或应该提供什么其他信息来诊断它。

我的媒体和静态目录分别是：

```
/data/webs/uni_rate/media
/data/webs/uni_rate/static 
```

这是 nginx-access.log 的输出

```
182.178.6.248 - - [01/Apr/2013:11:14:54 -0500] "GET /static/bootstrap_toolkit_extras/css/bootstrap.css HTTP/1.1" 403 168 "-" "Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv
:16.0) Gecko/20100101 Firefox/16.0"
182.178.6.248 - - [01/Apr/2013:11:15:00 -0500] "-" 400 0 "-" "-" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:55:27.167

您是否检查了 /data/webs/uni_rate/ 的所有父文件夹的读取权限？Nginx 用户必须对所有这些都具有读取权限。例如，/data、/data/webs、/data/webs/uni_rate。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T17:56:26.363

尝试用以下内容替换静态*和*媒体*的**位置*：

 **```
location /static {
    alias /var/www/domain1/media/;
    autoindex on;
    access_log off;
} 
```

诀窍在于“别名”而不是“根”。**

# php - 评分和点赞系统管理

> ID：15742384
> 
> 赞同：0
> 
> 时间：2013-04-01T11:14:47.670
> 
> 标签：php, database, optimization, database-design

我正在尝试将评级和类似系统作为软件包的一部分发送给最终用户（具有未知的编程技能）。
我的问题是如何管理已经完成操作的用户（注册或未注册）。
目前我正在使用 PHP 会话将信息存储一周，但这不是一个好的解决方案。
创建 2 个表（一个用于评分，一个用于喜欢）来存储信息是一个好的解决方案吗？如果我使用此解决方案，如果用户未注册，那么检索最有用和“正确”的信息是什么？它对用户友好吗？
我想存储：用户名和ip

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:27:00.993

我将使用至少两个新列（喜欢和评级）扩展成员表，或者创建一个新表（如您所说），包括带有引用（和索引）的 memberID 来存储和选择数据。我相信这是最好的方法。不幸的是，在这种情况下，非会员不能按赞或评分，但这是一个注册的好理由。——</p>

# jquery - jQuery 是用于 Web 表单还是 HTML 表单？

> ID：15742387
> 
> 赞同：2
> 
> 时间：2013-04-01T11:15:05.667
> 
> 标签：jquery, html, asp.net-mvc, webforms

我正在研究 asp.net 和 jQuery，我发现有几种方法可以在 html 中创建表单。

作为一名windows开发人员，我发现最常用的方法如下：

1.  HTML 表单
2.  ASP.NET Web 窗体
3.  ASP.NET MVC
4.  jQuery
5.  AJAX

现在，我想更多地了解这些差异。我看到Html Forms是最基础的，可以用jQUERY集成，也可以用jQUERY集成ASP.NET Webforms。

a) 如果我使用 jQuery，我可以认为 AJAX 对简单的 web 表单（json 的后获取）没用吗？

b) 对于一个简单的网络表单，我可以考虑太多 MVC 吗？

c) 你会选择哪一个，为什么？

感谢您的帮助，我已经阅读了很多网站，以至于我感到非常困惑！

编辑 -

更多细节：我有一个通过 REST 调用提供 jsons 的后端，我需要制作一些页面（前端）来显示这些调用的结果（例如：在日历中选择一个日期，告诉我是否有约会）。服务器逻辑已经存在，我正在尝试使用最佳方法来保持它的锐利、凉爽和干净（如果可能的话，还要好看！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:58:31.553

> 至于 WebFroms：
> 
> *ASP.NET Web 窗体允许您使用熟悉的拖放、事件驱动模型构建动态网站。设计界面和数百个控件和组件使您可以快速构建具有数据访问权限的复杂、强大的 UI 驱动站点。*

[http://www.asp.net/web-forms](http://www.asp.net/web-forms)

> 至于 MVC（微软）：
> 
> ASP.NET MVC 为您提供了一种强大的、基于模式的方法来构建动态网站，该方法可以清晰地分离关注点，并让您可以完全控制标记以实现愉快、敏捷的开发。ASP.NET MVC 包含许多特性，这些特性支持快速、友好的 TDD 开发，以创建使用最新 Web 标准的复杂应用程序。

[http://www.asp.net/mvc](http://www.asp.net/mvc)

至于你的问题：

a）您的问题有点含糊，我认为您所说的 AJAX 是指微软的[AJAX 控制工具包](http://www.asp.net/ajaxlibrary/act.ashx)？这是一堆控件，使您能够（在后台）从服务器异步检索数据，而不会干扰现有页面的显示和行为。jQuery 是 JavaScript 库，它有更多的功能。这不仅仅是为了对您的数据进行 ajax 处理。您可以在 AJAX 控件中使用 jQuery。

b) 是的。`MVC`基本上是一种基于模式的方式来创建您的 Web 应用程序**（模型-视图-控制器）**，但我认为您指的是 Microsoft MVC。这取自[Microsoft MVC](http://www.asp.net/mvc/tutorials/older-versions/overview/asp-net-mvc-overview)站点：

> 决定何时创建 MVC 应用程序
> 
> 您必须仔细考虑是否使用 ASP.NET MVC 框架或 ASP.NET Web 窗体模型来实现 Web 应用程序。MVC 框架不会取代 Web 窗体模型；您可以将任一框架用于 Web 应用程序。（如果您有现有的基于 Web 窗体的应用程序，这些应用程序将继续像往常一样工作。）
> 
> 在您决定为特定网站使用 MVC 框架或 Web 窗体模型之前，请权衡每种方法的优点。
> 
> 基于 MVC 的 Web 应用程序的优点
> 
> ASP.NET MVC 框架具有以下优点：
> 
> 通过将应用程序划分为模型、视图和控制器，可以更轻松地管理复杂性。它不使用视图状态或基于服务器的表单。这使得 MVC 框架非常适合希望完全控制应用程序行为的开发人员。它使用前端控制器模式，通过单个控制器处理 Web 应用程序请求。这使您能够设计一个支持丰富路由基础设施的应用程序。有关详细信息，请参阅 MSDN 网站上的前端控制器。它为测试驱动开发（TDD）提供了更好的支持。它适用于需要对应用程序行为进行高度控制的大型开发人员和 Web 设计人员团队支持的 Web 应用程序。
> 
> 基于 Web 表单的 Web 应用程序的优点
> 
> 基于 Web 表单的框架具有以下优点：
> 
> 它支持通过 HTTP 保存状态的事件模型，这有利于业务线 Web 应用程序开发。基于 Web 窗体的应用程序提供了数百个服务器控件支持的数十个事件。它使用页面控制器模式，将功能添加到各个页面。有关详细信息，请参阅 MSDN 网站上的页面控制器。它使用视图状态或基于服务器的表单，可以更轻松地管理状态信息。它适用于希望利用大量可用组件进行快速应用程序开发的小型 Web 开发人员和设计人员团队。一般来说，应用程序开发不太复杂，因为组件（页面类、控件等）是紧密集成的，并且通常比 MVC 模型需要更少的代码。

你在这里有关于网络表单的很好的讨论：

[https://stackoverflow.com/questions/46031/why-does-the-asp-net-web-forms-model-suck](https://stackoverflow.com/questions/46031/why-does-the-asp-net-web-forms-model-suck)

**编辑***

* * *

*MVC 编程模型具有以下优点：*

*   视图使开发人员能够精确控制呈现的 HTML。
*   您可以使用路由引擎来精确控制 URL。
*   业务逻辑、输入逻辑和用户界面逻辑分为模型、控制器和视图。
*   单元测试技术和测试驱动开发（TDD）是可能的。

*MVC的缺点：*

*   MVC 可能比网页或 Web 表单更难理解。
*   MVC 强制您分离关注点（模型、视图和控制器）。一些程序员可能会觉得这很有挑战性。
*   您无法通过将控件拖到页面上来直观地创建用户界面。
*   您必须对 HTML、CSS 和 JavaScript 有充分的了解才能开发视图。

* * *

*Web 窗体编程模型具有以下优点：*

*   使用服务器控件和设计视图，您可以直观地设计页面。
*   您可以使用范围广泛的功能强大的控件来封装大量功能。
*   您无需编写多行服务器端代码即可显示数据。
*   .aspx 文件中的用户界面与代码隐藏文件中的输入和业务逻辑分开。

*使用 Web 表单站点有一些缺点：*

*   ASP.NET Web 窗体页面生命周期是 HTTP 上的一个抽象层，可以以意想不到的方式运行。您必须完全了解此生命周期才能在正确的事件处理程序中编写代码。
*   您无法精确控制服务器端控件生成的标记。
*   控件可以向呈现的 HTML 页面添加大量标记和状态信息。这会增加加载页面所需的时间。

* * *

c) 视情况而定！你想让我做什么？*见(b)*

对于简单的站点/应用程序，我将使用`HTML5/CSS3/JavaScript`(ClientSide) 和`PHP/MySql`(ServerSide/Database)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:41:53.587

当您深入了解它时，有两种方法可以创建表单并且都使用客户端代码。

1.  HTML
2.  JavaScript

在几乎所有情况下，使用直接 HTML 是更好的选择。（请参阅 [渐进式增强](http://en.wikipedia.org/wiki/Progressive_enhancement)和[不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)）。

然而，如果没有表单处理程序，表单将毫无用处，这需要一些服务器端代码。您还可以使用服务器端代码生成创建表单本身的客户端代码。

ASP.NET 是一组服务器端技术，其中一些对处理表单很有用。有很多 ASP.NET 的替代品，我使用了很多替代品，而不是 ASP.NET，因此请谨慎使用以下内容，因为我可能对细节有些误解。

WebForms 是原始的 ASP.NET 做事方式。他们寻求尽可能多地从开发人员那里抽象出客户端代码，这样他们就可以在不了解 Web 标准的情况下创建网站。只要您不偏离界限，这就会使事情变得快速且类似于 Windows，此时它就变成了紧身衣。

ASP.NET MVC 是一种新的（现在不是那么新）和闪亮的方法，它遵循 Ruby on Rails 在开源世界中流行的设计模式（所述模式在 Catalyst、Django、Cake、Play 和 Mojito 中也可用（为五种不同的语言命名一个 MVC 框架））。

> 如果我使用 jQuery，我可以认为 AJAX 对简单的 web 表单（json 的后获取）没用吗？

Ajax 是指*发送 HTTP 请求并处理响应，使用 JavaScript 并且不离开页面*的术语。如果您想从客户端来回传递 JSON，那么您几乎必须使用 Ajax（任何其他方法都会引发“为什么是 JSON？”的问题）。

> 对于一个简单的网络表单，我可以考虑太多 MVC 吗？

什么是*简单*的网络表单？

对于 WWW 上的任何形式，您都需要某种形式的服务器端技术。（JavaScript 应用程序是另一回事）。

> 你会选择哪一个，为什么？

很难说，因为“网络表单”是解决方案的一部分，而不是问题，而且您还没有说您要解决什么问题。不过总的来说*，*我会在服务器上使用 Perl（因为它受到 CPAN 的良好支持），或者使用完全手工制作的 JavaScript、一个或两个微型库，或者 YUI（取决于问题的复杂程度和级别需要浏览器支持）。不过那里有*很多*个人喜好。根据您可用的技能选择技术通常是更好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T11:30:53.717

我假设您只是想创建一个表单来将信息发布到电子邮件脚本或数据库。

我认为设置 Web 表单最简单的方法是使用 HTML、JQuery 和 PHP。您只需创建一个 HTML 表单，使用 JQuery 获取数据并将此信息发送到 PHP 脚本。

像这样的东西：

HTML：

```
<input id="name" placeholder="Name">
<input id="email" placeholder="E-mail">
<a href="#" id="send">Send</a> 
```

查询：

```
$("#send").click(function(e){
   e.preventDefault();
   $.post("send.php", { 
       name: $("#name").val(), 
       email: $("#email").val() 
   });
}); 
```

PHP：

```
$name = $_POST['name'];
$email = $_POST['email'];
//do something with $name and $email 
```

这是一个非常简单的例子，当然你应该改进它。

编辑：使用 JQuery 发布或检索数据基本上是 AJAX。

# php - 如何将一个很长的字符串从一个页面传递到另一个页面？

> ID：15742389
> 
> 赞同：0
> 
> 时间：2013-04-01T11:15:08.403
> 
> 标签：php, javascript, jquery, svg, d3.js

我正在制作一个使用 SVG、d3.js 和 JQuery 的数据可视化工具。我目前正在制作将导出（和下载）为 SVG 文件的功能：

```
// Code on main page
var svg = $("#svg-wrap").html();
var win = window.open("export.php?svg=" + svg, '_blank'); // _blank means export.php opens in a new tab
win.focus;

// Code in export.php
<?php
ob_start();
header("Content-Type: application/octet-stream");
header("Content-disposition: attachment; filename=data.svg");
$svg = $_GET["svg"];
echo stripslashes($svg);
?> 
```

但这不起作用，因为尽管传递了一些 SVG，但完整的代码对于查询字符串来说太长了（或者看起来如此）。

有什么办法可以解决这个问题吗？我可以使用压缩，但这只会将其缩小到一个极限，而且我认为它可能仍然太长 - SVG 代码可能有数百行 :( 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:17:48.980

大多数 UA 对 GET 请求设置了限制。请改用 POST。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:18:23.823

您可以将其存储在会话变量中并在其他页面上访问它......但不是最佳实践......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T11:20:37.057

界限很难说，

浏览器可以有限制，对于 post vs get

代理可以有限制，对于 post vs get

Web 服务器可以有一个限制，对于 post vs get

应用程序本身可以设置限制...

ETC

正如建议的那样，您可以编写一个 svg 文件并发送 url。

svg 文件有多大？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T13:31:22.947

您可能希望使用[window.postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)来处理您的主应用程序窗口和弹出窗口之间的通信，这样您就可以只停留在客户端。

# html - Twitter Bootstrap：无法使导航栏居中

> ID：15742392
> 
> 赞同：-1
> 
> 时间：2013-04-01T11:15:13.623
> 
> 标签：html, css, twitter-bootstrap

我四处搜索并使用了所有对其他人有用的解决方案——但不幸的是，不适合我。

```
<div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
           <div class="container">
                 <ul class="nav">
                      <li class="active"><a href="#">Menu</a></li>
                 </ul>
           </div><!-- container -->
      </div><!-- navbar-inner -->
 </div><!--  navbar navbar-fixed-top --> 
```

我添加的 CSS 东西

```
.navbar .nav,
.navbar .nav > li {
  float:none;
  display:inline-block;
  *display:inline; /* ie7 fix */
  *zoom:1; /* hasLayout ie7 trigger */
  vertical-align: top;
}

.navbar-inner {
  text-align:center;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:18:33.787

你试过这个 -

```
.navbar {
    margin: 0 auto;
    width: 200px;
} 
```

# c# - 将文本文件读入二维数组时，输入字符串的格式不正确

> ID：15742396
> 
> 赞同：0
> 
> 时间：2013-04-01T11:15:25.297
> 
> 标签：c#, input, multidimensional-array

我正在尝试将文本文件读入二维数组。但是我得到一个错误

> *输入字符串的格式不正确。*

我检查了文本文件，一切正常，但我不明白为什么会发生这个错误？

```
 int[,] numberMatrix = new int[10, 10];
        string[] split = null;

        for (int rowCount = 1; rowCount < 11; rowCount++)
        {
            int[] temp1DArray = new int[10];
            string fileLocation = "C:\\Week10\\one.txt";
            string textFile = File.ReadAllText(fileLocation);

            for (int columnCount = 1; columnCount < 11; columnCount++)
            {
                string delimStr = " ";
                char[] delimiter = delimStr.ToCharArray();
                //string fileLocation = "C:\\Week10\\1-100.txt";
                //string textFile = File.ReadAllLines(fileLocation);
                for (int x = 0; x <= 10; x++)
                {
                    split = textFile.Split(delimiter, x);
                }
            }

            for (int rowCount1 = 1; rowCount1 < 11; rowCount1++)
            {
                for (int columnCount = 1; columnCount < 11; columnCount++)
                {
                    numberMatrix[rowCount1 - 1, columnCount - 1]   =Convert.ToInt32(split.ElementAt(columnCount - 1));
                }
            }
        }

        for (int rowCount = 10; rowCount > 0; rowCount--)
        {
            for (int columnCount = 10; columnCount > 0; columnCount--)
            {
                Console.WriteLine(numberMatrix[rowCount - 1, columnCount - 1]);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:32:37.113

好吧，您还没有提供任何文件内容和确切的异常描述（它可以以任何可能的原因触发）。我可以为文件解析提供更简单的实现。我想不出答案，它会神奇地找到为什么文件中的一个数字无法解析为的原因`int`

```
string[] lines = File.ReadAllLines(@"C:\temp\1.txt");
var options = StringSplitOptions.RemoveEmptyEntries;

int[][] numbers = lines.Select(line => line.Split(new[]{' '}, options)
                                           .Select(int.Parse)
                                           .ToArray())
                       .ToArray();

Console.WriteLine(string.Join(Environment.NewLine, 
                              numbers.Select(n => string.Join(" ", n)))); 
```

对于文件：

> ```
> 1 10 20 30 
> 4234 35 123 543
> 42 54 345 645 
> ```

印刷：

```
1 10 20 30
4234 35 123 543
42 54 345 645 
```

如果您需要矩形数组，请`int[,]`使用下一个代码将其解析为。

```
int [,] numbersRect = new int[numbers.Length, numbers[0].Length];

for (int i = 0; i < numbersRect.GetLength(0); i++)
{
    for (int j = 0; j < numbersRect.GetLength(1); j++)
    {
        numbersRect[i,j] = numbers[i][j];
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T11:43:12.153

从我站立的地方 split 返回一个数组。numberMatrix[rowCount1 - 1, columnCount - 1] 是数组元素 - 不是数组本身。所以 numberMatrix[rowCount1 - 1, columnCount - 1] =Convert.ToInt32(split.ElementAt(columnCount - 1)); 将触发异常。Convert.ToInt32 也采用单个值而不是数组。

# javascript - HTML div 值未显示

> ID：15742397
> 
> 赞同：0
> 
> 时间：2013-04-01T11:15:30.293
> 
> 标签：javascript, html, variables

我有变量，当我在警报中显示时它显示值 1 但是当我将该值分配给 div 时，它不会在页面上显示值。

```
<html>
    <head>
        <script src="jquery-1.6.2.min.js"></script>
        <script >

        var ad = ['a', 'b', 'c', 'a', 'd', 'e', 'a'];
        var con=document.getElementById('data');
        var inds = $.map(ad, function(v, i) {
            //$("data").html(v);
            return v == 'b' ? i : null;
        });
        //con.innerHTML=inds;

        alert(inds); // 0,3,6

        var avr1=inds;
        con.innerHTML=avr1;
        </script>

    </head>
    <body>
        <div id="data"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:20:43.833

```
$(document).ready(function(){
    var ad = ['a', 'b', 'c', 'a', 'd', 'e', 'a'];
    var inds = $.map(ad, function(v, i) {
        return v == 'b' ? i : null;
    });

    $('#data').html(inds.join(','));
}); 
```

我刚刚更新了我的答案。查看[jsfiddle 演示](http://jsfiddle.net/eJbaT/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:21:18.680

当您使用 jQuery 时，将其包装在 中`$(document).ready(function() ..`，例如：

```
$(document).ready(function() {
   var ad = ['a', 'b', 'c', 'a', 'd', 'e', 'a'];
   var inds = $.map(ad, function(v, i) {
      return v == 'b' ? i : null;
  });
  $("#data").html(inds);
}); 
```

`body`或在标签末尾添加该脚本请参阅：[演示](http://jsfiddle.net/eJbaT/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T11:25:50.580

以下代码工作正常。我检查了它。

```
 <script src="jquery-1.6.2.min.js"></script>
        <script >

        var ad = ['a', 'b', 'c', 'a', 'd', 'e', 'a'];
        var con=document.getElementById('data');
        var inds = $.map(ad, function(v, i) {
            return v == 'b' ? i : null;
        });
        document.getElementById('data').innerHTML=inds;
 </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T20:20:49.670

```
<html>
    <head>
        <script src="jquery-1.6.2.min.js"></script>
    </head>
    <body>
        <div id="data"></div>
        <script>

            var ad = ['a', 'b', 'c', 'a', 'd', 'e', 'a'];
            var con=document.getElementById('data');
            var inds = $.map(ad, function(v, i) {
                return v == 'b' ? i : null;
            });

            alert(inds); // 0,3,6

            var avr1=inds;
            con.innerHTML=avr1;
        </script>
    </body>
</html> 
```

# windows-phone-7 - 将日期时间数据绑定到窗口电话 7 中的列表框

> ID：15742404
> 
> 赞同：0
> 
> 时间：2013-04-01T11:15:47.700
> 
> 标签：windows-phone-7

我有列表框，我想将数据绑定到它。我有一个日期时间字段。我已将我的数据保存在日期时间字段中，例如。2013 年 1 月 1 日 12.00.00。现在，当我将数据绑定到列表框时，它会显示为我保存的内容，但我只想显示为 01/01/2013。

XAML 代码：

```
 <Grid x:Name="ContentPanel" >
                <ListBox x:Name="listExpense" SelectionChanged="listExpense_SelectionChanged">
                    <ListBox.ItemTemplate>
                        <DataTemplate >
                            <!--<Button x:Name="btndetails" Width="460" Height="65"  BorderThickness="1" Margin="0,-20,0,0" Click="btndetails_click">
                        <Button.Content>-->
                            <StackPanel  Orientation="Vertical">
                                <StackPanel.Background>
                                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                        <GradientStop Color="White" Offset="0"/>
                                    </LinearGradientBrush>
                                </StackPanel.Background>
                                <Border  BorderBrush="#120221" Background="Transparent" BorderThickness="6" >
                                    <StackPanel Orientation="Horizontal">

                                        <TextBlock Width="200" Foreground="Black" FontSize="22" Margin="10,0,0,0" Text="{Binding CategoryName}" Height="30"></TextBlock>
                                        <TextBlock Width="70" Foreground="Black" FontSize="22"  Margin="0,0,0,0" Text="{Binding Price}" Height="30"></TextBlock>
                                        <TextBlock Width="130" Foreground="Black" FontSize="22"  Margin="25,0,50,0"  Text="{Binding Date}" Height="30"></TextBlock>

                                    </StackPanel>
                                </Border>
                            </StackPanel>
                            <!--</Button.Content>
                    </Button>-->
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </Grid 
```

XAMl.cs

```
 var varExp = from Exp in Empdb.Expense
                             join cat in Empdb.Category
                             on Exp.CategoryId equals cat.CategoryID
                             select new { Exp.ExpenseID, Exp.Date, Exp.Price, Exp.Description, cat.Name };
                foreach (var item in varExp)
                {
                    string[] formats = { "dd/MM/yyyy" };
                    ExpenseVO objExpense = new ExpenseVO();                      

                    string strDate = item.Date.ToString("dd/MM/yyyy");                        
                    objExpense.Date = DateTime.ParseExact(strDate, formats, new CultureInfo("en-US"), DateTimeStyles.None); 
                    objExpense.Price = item.Price;
                    objExpense.CategoryName = item.Name;
                    ExpenseList.Add(objExpense);
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:24:29.490

您可以格式化您的 Text 属性：

```
Text="{Binding Date, StringFormat='dd/MM/yyyy'}" 
```

# cocos2d-iphone - cocos2d 中的单个按钮

> ID：15742407
> 
> 赞同：0
> 
> 时间：2013-04-01T11:16:06.640
> 
> 标签：cocos2d-iphone, imagebutton

大多数关于 cocos2d 按钮的讨论似乎都指向 CCMenu，其中 CCMenu AFAIK 意味着在屏幕中心有一行或一列。我需要在屏幕上随机放置按钮，但还没有找到一个简单的开箱即用解决方案。我确实尝试了 CCControlButton 但没有让它工作（CCScale9Sprite spriteWithSpriteFrameName 从 sprite atlas 加载不正确）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:29:45.737

现在我尝试使用它。它在每个 CCMenu 中只使用一个按钮。所以我的屏幕会有很多 CCMenu 实例，每个按钮一个。

```
+(CCMenu*)button:(NSString*)spriteframename at:(const CGPoint)POINT block:(void(^)(id sender))block {
    CCSprite* sprite1 = [CCSprite spriteWithSpriteFrameName:spriteframename];
    CCSprite* sprite2 = [CCSprite spriteWithSpriteFrameName:spriteframename];
    CCMenuItem* menuitem = [CCMenuItemImage itemWithNormalSprite:sprite1 selectedSprite:sprite2 block:block];
    CCMenu* menu = [CCMenu menuWithItems:menuitem, nil];
    menu.contentSize = sprite1.contentSize;
    menu.position = POINT;
    return menu;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:20:00.573

这是我改用的更好方法。

把它放在像init中：

```
 CCMenuItem* menuitemRetry = [[self class] buttonWithSpriteframenameOff:@"retry_off.png" on:@"retry_on.png" at:ccp(198, 184) block:^(id sender) {
            // Do something
        }];
        CCMenuItem* menuitemMenu = [[self class] buttonWithSpriteframenameOff:@"menu_off.png" on:@"menu_on.png" at:ccp(362, 184) block:^(id sender) {
            // Do something else
        }];
        CCMenu* menuLow = [CCMenu menuWithItems:menuitemMenu, menuitemRetry, nil];
        menuLow.position = CGPointZero;
        [self addChild:menuLow]; 
```

这也需要

```
+(CCMenuItem*)buttonWithSpriteframenameOff:(NSString*)spriteframenameOff on:(NSString*)spriteframeOn at:(const CGPoint)POINT block:(void(^)(id sender))block {
    CCMenuItem* menuitem = [CCMenuItemImage itemWithNormalSprite:[CCSprite spriteWithSpriteFrameName:spriteframenameOff] selectedSprite:[CCSprite spriteWithSpriteFrameName:spriteframeOn] block:block];
    menuitem.position = POINT;
    return menuitem;
} 
```

# jquery - Jquery：从其他页面导航时，将页面添加到文档功能会表现得很奇怪

> ID：15742411
> 
> 赞同：0
> 
> 时间：2013-04-01T11:16:20.857
> 
> 标签：jquery, jquery-mobile, navigation

我有一个使用 Jquery 移动框架编写的简单网页集合。页面列表如下：

主要.html。此页面包含指向另一个名为 dummy.html 的页面的链接。

dummy.html 如下：

```
<div data-role="page" data-theme="b">
  <div data-role="header">
      <h1>HOD</h1>
   </div>

           <ul data-role="listview">
             <li><a href="#glug">Welcome to GLUG MEET</a></li>
             <li><a href="#">New trends in CS</a></li>
             <li><a href="#">About Me</a></li>
            </ul> 

 </div>

<div id="glug" data-role="page" data-theme="b">
    <div data-role="header">
        <h1>GLUG</h1>
     </div>
      <div>
        <div class="lcontainer">
            <img src="glug.png">
              <div>
               <a href="#" data-rel="back" data-role="button"
                data-inline=true data-direction="reverse">Back</a>
              </div>
            </div>             
            <div class="productData">
                All of you DO attend glug meet today
                <div><b>At 04:00 PM</b></div>                
            </div>
        </div>
    </div> 
```

假设如果我打开 dummy.html 并单击打开`Welcome to GLUG MEET`的页面而`id glug`没有任何大惊小怪。但是，如果我从 main.html 导航到 dummy.html，然后单击拒绝打开`Welcome to GLUG MEET`的页面。`id glug`我必须刷新 dummy.html 才能打开带有`id glug`.

为什么会这样。我尝试从 Apache Web 服务器和 Aptana Studio 运行它。通过按 ctrl + f11 但没有任何效果。

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:26:24.380

它工作得很好。你有实现任何 JavaScript 函数吗？

我在我的机器上试过它工作正常，没有任何绒毛。

这是一个例子`**[Live fiddle](http://jsfiddle.net/mayooresan/uEkC9/)**`

如果您有任何 JS 函数，请确保将它们包装在里面

```
$(document).on('pagecreate', '#yourPageID', function(){
 // your code goes here
}); 
```

# coffeescript - 是否可以将 .coffee 脚本文件加载到浏览器并执行？

> ID：15742415
> 
> 赞同：0
> 
> 时间：2013-04-01T11:17:03.727
> 
> 标签：coffeescript

我正在尝试在 sample.coffee 文件中加载咖啡脚本以及 coffee-script.js 文件，并对 HTML 执行一些简单的操作。但我无法加载 sample.coffee 文件。

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title></title>
    <script src="sample.coffee" type="text/coffeescript"></script>      
    <script src="coffee-script.js" type="text/javascript"></script>
  </head>
  <body>
  </body>
</html> 
```

这是 sample.coffee 中的咖啡脚本代码

```
message = "Welcome to Coffeescript"
alert message 
```

我提到了博客[http://forgivingworm.wordpress.com/2010/09/27/running-coffeescript-in-browser/](http://forgivingworm.wordpress.com/2010/09/27/running-coffeescript-in-browser/)

我试图在 .cshtml 上的 MVC4 项目中运行它。所以我在 MS 世界下运行。

我不确定这是否可能？对此的任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T10:02:10.670

我可以通过使用 CoffeeSharp [http://tomlokhorst.github.com/CoffeeSharp/](http://tomlokhorst.github.com/CoffeeSharp/)来解决这个问题，它为 .coffee 文件提供了处理程序，还将咖啡脚本转换为浏览器上的 javascript。

此外，我还可以在构建事件本身期间将咖啡脚本编译为 javascript，从而解决部署和性能相关问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:48:50.460

我认为这不会像您尝试过的那样起作用。您将需要[https://github.com/jrburke/require-cs](https://github.com/jrburke/require-cs)上的 requirejs 和 coffeescript 加载器之类的东西。

但是，我强烈反对这样做，而是在加载到浏览器之前对其进行编译（尽管鼓励使用 require.js）。您可能会发现 grunt.js 有助于在部署之前“构建”您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T02:39:56.403

该html对我来说很好。我在`coffee-script.js`这里找到了：[https](https://cdn.rawgit.com/jashkenas/coffeescript/1.11.1/extras/coffee-script.js) ://cdn.rawgit.com/jashkenas/coffeescript/1.11.1/extras/coffee-script.js我`sample.coffee`的是：

```
x = ->
  alert("hi")

x() 
```

如果您打开 Javascript 控制台，您会看到任何错误吗？

# game-engine - playN的替代品

> ID：15742416
> 
> 赞同：1
> 
> 时间：2013-04-01T11:17:04.443
> 
> 标签：game-engine, playn

我想为多个平台创建游戏。我想针对一个通用的 API/框架编写我的游戏，并且该框架可以为多个平台编译游戏。我希望该游戏在所有浏览器中都可以作为 HTML 游戏运行，也可以编译为适用于 android、iOS 的本机应用程序。

基于这些要求，我登陆了 playN，目前正在探索它的功能，但由于文档和教程不佳而真正陷入困境。尽管实施的样本确实有帮助。

是否有任何其他此类框架可能比具有上述功能的 playN 更成熟。

谢谢，非常感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T20:25:18.887

[libGDX](http://code.google.com/p/libgdx "库GDX")是一个 Java 解决方案，尽管[PlayN 有哪些替代方案？](https://stackoverflow.com/questions/8862013/what-are-some-alternatives-to-playn)页面也显示了其他选择。这篇文章比较了 PlayN 和 libGDX：[libgdx 还是 playn？](https://stackoverflow.com/questions/11962138/libgdx-or-playn)

# c# - 根据自定义条件防止单个会话到期？

> ID：15742420
> 
> 赞同：10
> 
> 时间：2013-04-01T11:17:17.247
> 
> 标签：c#, asp.net, session-variables, session-state, global-asax

我正在开发的网站非常以数据为中心。有些报告需要一个多小时才能完成。每当用户提交报告请求时，都会创建一个新线程来生成报告。然后用户被重定向到一个页面，该页面显示报告正在进行中，并请刷新以下载报告。如果用户再次刷新页面并且报告仍在进行中，则会显示相同的消息；否则提供下载链接。

所有报告/用户关系都保存在应用程序变量中。这很好用，除非用户处于非活动状态超过 20 分钟（正在处理报告时），然后用户被注销；如果用户再次登录，仍然可以下载报告。

**我不想增加会话过期时间，但如果用户在后台有事情发生，我需要停止过期，比如正在处理的报告。**

在 Session_End 我可以检索`userid`并匹配它`Application["work"]`以查看用户是否有待处理的工作。

但是，我不知道如何在上述情况下推迟会话结束？

* * *

**编辑：**每个人都建议作为从“维护联系人”到“使用查询字符串”的解决方法。“保持联系”对我来说看起来最有希望，但在以下情况下它会失败：当浏览器关闭/计算在午餐等期间进入待机模式。 b．当用户转到另一个非 asp.net 部分（它是一个旧站点）时。

**难道不能取消`Session_End`活动本身吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T15:47:28.980

# **简短的回答**

目前（**据**我所知）**没有简单的方法**可以延长*单个*ASP.NET 会话的寿命。有一种可能的解决方案：使用自定义的 Session-State Store Provider！

* * *

# **长答案**

**首先要做的事情：**从已经构建的东西开始！使用Microsoft 提供的示例[Session-State Store Provider](http://msdn.microsoft.com/en-us/library/ms178589.aspx)（[及其教程）。](http://msdn.microsoft.com/en-us/library/ms178588.aspx)此示例 Session-State Store Provider**使用 Microsoft Access 作为其后端**；不过，由于它使用 ODBC 连接，因此您几乎可以通过已安装的 ODBC 驱动程序支持*任何*数据库后端。

此示例会话状态存储提供程序只是 ASP.NET 内部使用的自定义版本（ASP.NET 在内存中运行的例外）。

* * *

**其次：**让我们准备 Access 数据库的要求和配置。

按照教程和文件注释中的说明创建表：

```
CREATE TABLE Sessions
(
    SessionId       Text(80)  NOT NULL,
    ApplicationName Text(255) NOT NULL,
    Created         DateTime  NOT NULL,
    Expires         DateTime  NOT NULL,
    LockDate        DateTime  NOT NULL,
    LockId          Integer   NOT NULL,
    Timeout         Integer   NOT NULL,
    Locked          YesNo     NOT NULL,
    SessionItems    Memo,
    Flags           Integer   NOT NULL,

    CONSTRAINT PKSessions PRIMARY KEY (SessionId, ApplicationName)
) 
```

注意：*如果要使用 SQL Server，只需将**Text(...)**替换为**varchar(...)**，**将 YesNo 替换**为**bit**，将**Memo**替换为**varchar(MAX)**。*

使用以下内容添加/更新您`web.config`的（*您可以使用[connectionstrings.com](http://www.connectionstrings.com/)帮助您生成连接字符串*）：

```
<configuration>
    <connectionStrings>
        <add name="OdbcSessionServices" connectionString="DSN=SessionState;" />
    </connectionStrings>

    <system.web>
        <sessionState 
                cookieless="true"
                regenerateExpiredSessionId="true"
                mode="Custom"
                customProvider="OdbcSessionProvider">
            <providers>
                <add name="OdbcSessionProvider"
                        type="Samples.AspNet.Session.OdbcSessionStateStore"
                        connectionStringName="OdbcSessionServices"
                        writeExceptionsToEventLog="false" />
            </providers>
        </sessionState>
    </system.web>
</configuration> 
```

* * *

**第三：**添加一个将扩展*超过*指定的函数`Timeout`。

制作函数的副本`ResetItemTimeout`，并将其命名为`ResetItemTimeout2`：

```
var ExtendedTotalMinutes = 2 * 60; // hours * minutes

public override void ResetItemTimeout2(HttpContext context, string id)
{
    OdbcConnection conn = new OdbcConnection(connectionString);
    OdbcCommand cmd = 
        new OdbcCommand("UPDATE Sessions SET Expires = ? " +
            "WHERE SessionId = ? AND ApplicationName = ?", conn);
    cmd.Parameters.Add("@Expires", OdbcType.DateTime).Value 
        = DateTime.Now.AddMinutes(ExtendedTotalMinutes); // IMPORTANT!! Set your total expiration time.
    cmd.Parameters.Add("@SessionId", OdbcType.VarChar, 80).Value = id;
    cmd.Parameters.Add("@ApplicationName", OdbcType.VarChar, 255).Value = ApplicationName;

    try
    {
        conn.Open();

        cmd.ExecuteNonQuery();
    }
    catch (OdbcException e)
    {
        if (WriteExceptionsToEventLog)
        {
            WriteToEventLog(e, "ResetItemTimeout");
            throw new ProviderException(exceptionMessage);
        }
        else
            throw e;
    }
    finally
    {
        conn.Close();
    }
} 
```

* * *

**第四：**支持单个ASP.NET Session的扩展！

每当您*需要*扩展会话时，请`ResetItemTimeout`按如下方式调用该函数：

```
using Samples.AspNet.Session;

// from inside a User Control or Page
OdbcSessionStateStore.ResetItemTimeout2(this.Context, this.Session.SessionID);

// --or--

// from anywhere else
OdbcSessionStateStore.ResetItemTimeout2(System.Web.HttpContext.Current, System.Web.HttpContext.Current.Session.SessionID); 
```

* * *

**脚注**

1.  使用示例 Session-State Store Provider阅读页面上的[评论；](http://msdn.microsoft.com/en-us/library/ms178589.aspx#CommunityContentHeader)

    *   使用 GetItem 时，有一个关于***GetSessionStoreItem 错误的***潜在好条目。

    *   另一个好处是***Timestamps 应该是 UTC***。

2.  可以进行明显的性能/可维护性改进（尤其是在 和 中有重复代码的情况下`ResetItemTimeout`）`ResetItemTimeout2`。

3.  我**没有**测试过这段代码！

* * *

**编辑**

*   我意识到我错过了您想要扩展的部分*-*答案`Timeout`已完全更新。
*   添加脚注部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T11:40:43.697

```
Maintain a contact with the server will avoid Session Timeout. 
```

创建一个`empty Web service`然后按几秒钟的间隔`run that in your server`就`call the web service by your site by JQuery`足以使会话保持活动状态

可能这个解决方案会帮助你..

尝试此链接以获取完整详细信息：[防止 ASP.NET 中的会话超时](http://www.how-to-asp.net/prevent-session-timeout-aspnet/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-03T11:36:45.733

当您检测到已请求需要很长时间的报告时，您可以将会话超时设置为更高的值。这当然假设您可以计算报告是否需要很长时间才能运行。如果是这样，您可以在启动线程之前执行此操作：

```
Session.Timeout = 120 // set timeout to two hours for this session only 
```

除了通过 Ajax ping 页面或服务之外，确实没有其他方法。（除非完全不依赖会话是一种选择）。

这是因为会话的维护方式：当请求包含 cookie 时，ASP.NET 运行时检测到会话。此 cookie 在每个请求/响应中设置，并将包含到期日期。

如果在您的初始请求中设置了 20 分钟的到期时间并且用户关闭浏览器或处于非活动状态超过 20 分钟，则服务器端无法检测到请求属于哪个会话。因此，要回答您是否可以取消 session_end 的问题，不，您不能这样做，因为该代码运行服务器端并且它无法访问客户端 cookie。这是一个简单的事件，在您最后一次设置 cookie 后 20 分钟触发。这与客户端完全异步。

我提出的解决方案是一种解决方法，如果您知道如何计算持续时间（至少近似地），它可能会起作用。

另一种更复杂的解决方案是保存报告并为用户创建一个单独的部分，用户可以在其中查看所有报告。这样，即使会话超时，他也可以重新登录并转到他的历史记录并检索报告。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-04T07:18:51.063

在拼命寻找推迟 session_end 事件的同时，我认为这似乎是不可能的？

我能想到的最简单的解决方法是“使用 Cookie”并修改我的身份验证逻辑。

我实现了一种方法，用于在用户请求 9 小时到期的报告时将 guid 密钥写入名为 admin 的 cookie（Max time office 将开放工作）。我将此带有用户 ID 的 guid 保存在单独的表中。

在我检查会话用户 ID 的母版页中，我实现了另一种方法来检查任何名为 admin 的 cookie。如果找到它，我将会话设置为保存在表中的用户 ID，否则我将它们重定向到登录页面，就像它发生之前一样。

它似乎像魔术一样工作。但我需要知道这是对的吗？

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-10T08:13:07.273

最好不要依赖 Session_end 因为它并不总是触发，例如当工作进程回收或发生未捕获的异常时，即它基本上被杀死/反弹。

如果您想恢复会话，那么最好的方法似乎是以某种方式存储用户数据并自己完全管理缓存。

从您对之前帖子的回复看来，使用 sql 状态管理时额外的网络活动和后续页面时间负载增加是不可接受的，使用 sql server 状态提供程序与使用[Microsoft AppFabric](http://msdn.microsoft.com/en-us/library/hh351389.aspx)等会话服务器之间的差异可以忽略不计，但是如果您使用 AppFabric 的会话服务器以及它的缓存，这似乎是一种明显的可能性，事情可能会加快很多。

PS 一般来说，取消会话似乎是最有效的解决方案，请参阅 John Han 在这篇文章中的回答，总结[会话是不好的 mmkay](https://stackoverflow.com/questions/3902506/asp-net-session-use-or-not-use-and-best-practices-for-an-e-commerce-app)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-09T15:45:01.360

为了使会话保持活动状态，某些东西（不一定是用户的浏览器）必须每隔一段时间使用该用户的 ASP.NET_SessionId cookie 向您的应用程序发出请求。

如果您有一些代码可以保存您感兴趣的用户的 ASP.NET_SessionIds，然后有一个 Windows 服务会每隔 20 分钟左右在您的应用程序上请求一个具有所需 ASP.NET_SessionId(s) 的页面。

有关此 cookie 的一些信息，请参阅[http://erlend.oftedal.no/blog/?blogid=41](http://erlend.oftedal.no/blog/?blogid=41)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-09T15:58:42.517

你在使用 FormsAuthentication 吗？如果是这样，您可以增加身份验证票证的超时时间，这将阻止登录屏幕，即使在会话过期后也是如此。

在请求开始时，您可以通过票证检查用户在获​​取用户后，如果会话为空，则表示该用户已离线一段时间，您可以检查该用户正在进行的工作。

如果用户有正在进行的工作，请加载您可能需要的会话值并将它们重定向到正在进行的工作或报告以供下载。

如果用户一无所有，请将票证过期并将其重定向到登录页面，或者只是让他们保持登录状态并重新加载会话值。

身份验证票的超时非常大 [http://msdn.microsoft.com/en-us/library/system.web.configuration.formsauthenticationconfiguration.timeout.aspx](http://msdn.microsoft.com/en-us/library/system.web.configuration.formsauthenticationconfiguration.timeout.aspx)

干杯

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-01T11:22:13.007

我建议增加会话超时而不是试图找到解决方法。[这里](https://stackoverflow.com/questions/648992/session-timeout-in-asp-net)有一个关于会话和表单超时的有趣线程

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-01T11:48:26.730

我建议您根本不依赖会话 .. 您可以通过添加一个新的 GUID 变量来依赖查询字符串，并将该变量值与应用程序对象一起使用，以将用户请求的文件与 GUID 值映射。 . 这样 .. 用户将始终能够下载文件，因为他拥有映射到应用程序对象的文件的链接，并且无需处理任何会话超时。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-04-01T13:31:19.947

您为什么不尝试显示加载文件进度条，在其中您可以使用检查目前已下载文件状态的逻辑。它将有两个优点，当您访问您的网站时，会话不会在您将有用信息返回给最终用户的同时过期。

# c# - 如何在 MVC4.5 Web API 处理程序 SendAsync() 方法中从 base.SendAsync() 模拟（rhino.mocks）响应对象

> ID：15742421
> 
> 赞同：0
> 
> 时间：2013-04-01T11:17:24.380
> 
> 标签：c#, unit-testing, asp.net-web-api, rhino-mocks

我必须使用 Rhino.Mock 在 ASP.NET MVC Web API 控制器上编写单元测试我有一个名为 AHandler.cs 的处理程序，其中包含 System.Net.Http.HttpClientHandler 类的继承。AHandler.cs的singnature SendAsync方法如下：

```
protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
{
.....
 var response = base.SendAsync(request, cancellationToken).Result; 
 if (response.IsSuccessStatusCode)
 {
   .....
 }
} 
```

上面的 base 关键字表示 HttpClientHandler 并且它的 SendAsync() 方法是“受保护的”！！！现在我尝试模拟对象“base.SendAsync(request,cancellationToken).Result”并得到我想要的手工响应结果。但是当我编写以下代码时，Rhino 模拟似乎看不到“base”关键字：

```
var mockbase = MockRepository.GenerateMock<AHandler>;
mockbase.Stub(x => x.base <=== can't see base keyword
                 ^^^^^ 
```

所以我换了另一种方式，尝试模拟 HttpClientHandler 类

```
var mockbase = MockRepository.GenerateMockHttpClientHandler>;
mockbase.Stub(x => x.  <== I can't see SendAsync() method, becase it is protected !! 
```

现在我真的很痛苦！谁能给我一些建议，告诉我如何在 MVC 处理程序中做出自定义响应？！很感谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:48:23.577

为什么要首先模拟处理程序？您可以为您的测试注入一个特定的虚拟实现。该处理程序将返回您的测试所期望的新 HttpResponse 消息。

```
public class MyDummyHttpHandler : DelegatingHandler
{
  HttpResponseMessage response;

  public MyDummyHttpHandler(HttpResponseMessage response)
  {
    this.response = response;
  }

  protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request,    CancellationToken cancellationToken)
  {
    .....
    TaskCompletionSource<HttpResponseMessage> tsc = new TaskCompletionSource<HttpResponseMessage>();
    tsc.SetResult(this.response);

    return tsc.Task;
  }
} 
```

# javascript - 声明对象数组

> ID：15742442
> 
> 赞同：93
> 
> 时间：2013-04-01T11:19:03.573
> 
> 标签：javascript, arrays, object, declare

我有一个变量，它是一个数组，我希望数组的每个元素默认都充当一个对象。为了实现这一点，我可以在我的代码中做这样的事情。

```
var sample = new Array();
sample[0] = new Object();
sample[1] = new Object(); 
```

这很好用，但我不想提及任何索引号。我希望我的数组的所有元素都是一个对象。如何声明或初始化它？

```
var sample = new Array();
sample[] = new Object(); 
```

我尝试了上面的代码，但它不起作用。如何在不使用索引号的情况下初始化对象数组？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2013-04-01T11:21:25.007

用于`array.push()`将项目添加到数组的末尾。

```
var sample = new Array();
sample.push(new Object()); 
```

为此，请`n`使用`for`循环。

```
var n = 100;
var sample = new Array();
for (var i = 0; i < n; i++)
    sample.push(new Object()); 
```

* * *

请注意，您也可以`new Array()`用`[]`和`new Object()`替换，`{}`因此它变为：

```
var n = 100;
var sample = [];
for (var i = 0; i < n; i++)
    sample.push({}); 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-04-01T11:21:17.210

根据*声明*的含义，您可以尝试在[数组文字中使用](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Guide/Values,_Variables,_and_Literals#Array_literals)[对象文字](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Values,_variables,_and_literals?redirectlocale=en-US&redirectslug=Core_JavaScript_1.5_Guide/Values,_Variables,_and_Literals#Object_literals)：

```
var sample = [{}, {}, {} /*, ... */]; 
```

**编辑：**如果您的目标是一个数组，其`undefined`项目默认为空对象文字，您可以编写一个小实用函数：

```
function getDefaultObjectAt(array, index)
{
    return array[index] = array[index] || {};
} 
```

然后像这样使用它：

```
var sample = [];
var obj = getDefaultObjectAt(sample, 0);     // {} returned and stored at index 0. 
```

甚至：

```
getDefaultObjectAt(sample, 1).prop = "val";  // { prop: "val" } stored at index 1. 
```

当然，直接赋值给 的返回值是`getDefaultObjectAt()`行不通的，所以不能这样写：

```
getDefaultObjectAt(sample, 2) = { prop: "val" }; 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2016-12-29T20:55:22.383

您可以使用[fill()](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/fill)。

```
let arr = new Array(5).fill('lol');

let arr2 = new Array(5).fill({ test: 'a' });
// or if you want different objects
let arr3 = new Array(5).fill().map((_, i) => ({ id: i })); 
```

将创建一个包含 5 个项目的数组。然后你可以使用 forEach 例如。

```
arr.forEach(str => console.log(str)); 
```

请注意，这样做时`new Array(5)`它只是一个长度为 5 的对象，并且数组为空。当你使用时，你可以用`fill()`你想要的任何东西填充每个单独的位置。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-04-01T11:50:23.273

在看到你在评论中的反应之后。似乎最好`push`按照其他人的建议使用。这样你就不需要知道索引，但你仍然可以添加到数组中。

```
var arr = [];
function funcInJsFile() {
    // Do Stuff
    var obj = {x: 54, y: 10};
    arr.push(obj);
} 
```

在这种情况下，每次使用该函数时，它都会将一个新对象推送到数组中。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-04-01T11:31:34.147

你真的不需要创建空白`Object`s 。你不能对他们做任何事。只需根据需要将您的工作对象添加到示例中。`push`按照 Daniel Imms 的建议使用，并按照 Frédéric Hamidi 的建议使用文字。您似乎想像 C 一样编写 Javascript。

```
var samples = []; /* If you have no data to put in yet. */
/* Later, probably in a callback method with computed data */
/* replacing the constants. */
samples.push(new Sample(1, 2, 3)); /* Assuming Sample is an object. */
/* or */
samples.push({id: 23, chemical: "NO2", ppm: 1.4}); /* Object literal. */ 
```

我相信使用会创建一个包含 10 个元素`new Array(10)`的数组。`undefined`

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2015-05-30T10:55:37.443

您可以像这样在一行中实例化一个“对象类型”数组（只需将**new Object()**替换为您的对象）：

```
var elements = 1000;
var MyArray = Array.apply(null, Array(elements)).map(function () { return new Object(); }); 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-03-18T14:36:08.407

那么`array.length`应该做这个把戏吗？像，我的意思是，如果您只是阅读它，则不需要知道索引范围..

```
var arrayContainingObjects = [];
for (var i = 0; i < arrayContainingYourItems.length; i++){
    arrayContainingObjects.push {(property: arrayContainingYourItems[i])};
} 
```

也许我没有正确理解您的问题，但是您应该能够以这种方式获取数组的长度并将它们转换为对象。老实说，丹尼尔给出了同样的答案。你可以把你的数组长度保存到他的变量中，就可以了。

如果我认为这不应该发生，您无法获得数组长度。正如您所说，没有获取索引号，您可以这样做：

```
var arrayContainingObjects = [];
for (;;){
    try{
        arrayContainingObjects.push {(property: arrayContainingYourItems[i])};
    }
}
catch(err){
    break;
} 
```

它是上述版本的不太好的版本，但循环将执行，直到您“运行”出索引范围。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-06-06T14:30:18.720

```
//making array of book object
var books = [];
    var new_book = {id: "book1", name: "twilight", category: "Movies", price: 10};
    books.push(new_book);
    new_book = {id: "book2", name: "The_call", category: "Movies", price: 17};
    books.push(new_book);
    console.log(books[0].id);
    console.log(books[0].name);
    console.log(books[0].category);
    console.log(books[0].price);

// also we have array of albums
var albums = []    
    var new_album = {id: "album1", name: "Ahla w Ahla", category: "Music", price: 15};
    albums.push(new_album);
    new_album = {id: "album2", name: "El-leila", category: "Music", price: 29};
    albums.push(new_album);
//Now, content [0] contains all books & content[1] contains all albums
var content = [];
content.push(books);
content.push(albums);
var my_books = content[0];
var my_albums = content[1];
console.log(my_books[0].name);
console.log(my_books[1].name); 

console.log(my_albums[0].name);
console.log(my_albums[1].name); 
```

这个例子适用于我。 [浏览器控制台上的输出快照](https://i.stack.imgur.com/9B6C2.png)

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-04-01T11:23:18.363

尝试这个-

```
var arr = [];
arr.push({}); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-09-30T11:16:25.607

```
const sample = [];
    list.forEach(element => {
      const item = {} as { name: string, description: string };
      item.name= element.name;
      item.description= element.description;
      sample.push(item);
    });
    return sample; 
```

任何人都可以尝试这个..并提出一些建议。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-02-11T13:57:03.267

如果您希望数组中的所有元素都是对象，您可以使用 JavaScript 代理在将对象插入数组之前对其应用验证。这很简单，

```
const arr = new Proxy(new Array(), {
  set(target, key, value) {
    if ((value !== null && typeof value === 'object') || key === 'length') {
      return Reflect.set(...arguments);
    } else {
      throw new Error('Only objects are allowed');
    }
  }
}); 
```

现在，如果您尝试执行以下操作：

```
arr[0] = 'Hello World'; // Error 
```

它会抛出一个错误。但是，如果您插入一个对象，它将被允许：

```
arr[0] = {}; // Allowed 
```

有关代理的更多详细信息，请参阅此链接： [https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy)

如果您正在寻找一个 polyfill 实现，您可以查看此链接： [https ://github.com/GoogleChrome/proxy-polyfill](https://github.com/GoogleChrome/proxy-polyfill)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-01-23T05:33:32.477

使用 forEach 我们可以存储数据，以防我们已经有了想要对数据进行业务登录的数据。

```
var sample = new Array();
var x = 10;
var sample = [1,2,3,4,5,6,7,8,9];
var data = [];

sample.forEach(function(item){
    data.push(item);
})

document.write(data); 
```

使用简单 for 循环的示例

```
var data = [];
for(var i = 0 ; i < 10 ; i++){
   data.push(i);
}
document.write(data); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-12-21T04:59:58.417

使用 array.push() 将一个项目添加到数组的末尾。

```
var sample = new Array();
sample.push(new Object()); 
```

你可以使用它

```
var x = 100;
var sample = [];
for(let i=0; i<x ;i++){
  sample.push({}) 
  OR
  sample.push(new Object())
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-08-08T09:16:02.710

我项目中的以下代码可能对您有好处

```
 reCalculateDetailSummary(updateMode: boolean) {

    var summaryList: any = [];
    var list: any;
    if (updateMode) { list = this.state.pageParams.data.chargeDefinitionList }
    else {
        list = this.state.chargeDefinitionList;
    }

    list.forEach((item: any) => {
        if (summaryList == null || summaryList.length == 0) {
            var obj = {
                chargeClassification: item.classfication,
                totalChargeAmount: item.chargeAmount
            };
            summaryList.push(obj);

        } else {
            if (summaryList.find((x: any) => x.chargeClassification == item.classfication)) {
                summaryList.find((x: any) => x.chargeClassification == item.classfication)
                    .totalChargeAmount += item.chargeAmount;
            }
        }
    });

    if (summaryList != null && summaryList.length != 0) {
        summaryList.push({
            chargeClassification: 'Total',
            totalChargeAmount: summaryList.reduce((a: any, b: any) => a + b).totalChargeAmount
        })
    }

    this.setState({ detailSummaryList: summaryList });
} 
```

* * *

## 回答 #15

> 赞同：-7
> 
> 时间：2016-12-08T07:20:05.507

```
var ArrayofObjects = [{}]; //An empty array of objects. 
```

# openvpn - OpenVPN为服务器设置别名

> ID：15742447
> 
> 赞同：-1
> 
> 时间：2013-04-01T11:19:37.143
> 
> 标签：openvpn

我在本地（家庭）网络中创建了 VPN 服务器，它确实以桥接模式运行。

现在，我想将我的笔记本配置为能够连接到我的 VPN，但我希望它在家里使用我的笔记本时使用服务器的本地局域网 IP，而在学校使用我的笔记本时使用服务器的公共 IP/...

**如何在客户端配置中为服务器地址添加别名？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:20:27.600

```
<connection>
  remote 11.22.33.44 1194 udp
</connection>
<connection>
  remote 10.0.0.1 1194 udp
</connection> 
```

[根据文档：](https://community.openvpn.net/openvpn/wiki/Openvpn23ManPage)

> OpenVPN 客户端将依次尝试每个连接配置文件，直到成功连接。
> --remote-random 可用于最初“打乱”连接列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-18T01:52:33.233

把它放在你的 .bashrc 或 zshrc 中。 `alias vpn="sudo sh -c 'nohup openvpn /etc/openvpn/client.ovpn 2>&1 > /dev/null &'"`

笔记。如果您使用用户/密码进行身份验证，则需要将其放入 /etc/openvpn/authfile， `➜ ~ cat /etc/openvpn/authfile xuxiaoping xuxiaoping@123` ```

然后，将 /etc/openvpn/client.ovpn 更改为 `auth-user-pass /etc/openvpn/authfile`

# android - 专注于EditText时如何阻止键盘

> ID：15742449
> 
> 赞同：1
> 
> 时间：2013-04-01T11:19:40.187
> 
> 标签：android, keyboard, focus, android-edittext, hide

在我的 Android 应用程序中，我必须使用放置在 EditTexts 旁边的自定义数字键盘来输入数字，所以我需要：

1.  当用户点击它们时，EditText 应该有焦点，这样当用户点击一个键时我将有光标位置来插入数字。
2.  编辑文本焦点时不应出现软键盘（但不能通过设置 android:windowSoftInputMode="stateHidden" 完全隐藏键盘，因为屏幕中有一些搜索框仍需要使用软键盘）

我已经搜索并发现了许多关于在显示键盘时以编程方式隐藏键盘的文章，或者将输入类型/可聚焦....设置为不显示键盘....但它们不符合我的需要。

任何人都有这种情况的解决方案，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:48:51.790

这个我从 CsipSimple 项目中获得灵感并实现了我自己的

这是相同的代码 Create a Custom NumberPad here is mine 拨号盘的布局只是从 1 到 9 的按钮和 * 和 #

```
package com.xyz.custom;

import java.util.HashMap;
import java.util.Map;

import com.xyz.payphone.R;

import android.annotation.SuppressLint;
import android.content.Context;
import android.media.ToneGenerator;
import android.util.AttributeSet;
import android.util.SparseArray;
import android.widget.ImageButton;
import android.widget.TableLayout;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;

public class DialpadNovanet extends TableLayout implements OnClickListener {

    private OnDialKeyListener onDialKeyListener;
    @SuppressLint("UseSparseArrays")
    private static final Map<Integer, int[]> DIGITS_BTNS = new HashMap<Integer, int[]>();
    private static final String tag = "Dialpad";

    static {
        DIGITS_BTNS.put(R.id.button0, new int[] { ToneGenerator.TONE_DTMF_0,
                KeyEvent.KEYCODE_0 });
        DIGITS_BTNS.put(R.id.button1, new int[] { ToneGenerator.TONE_DTMF_1,
                KeyEvent.KEYCODE_1 });
        DIGITS_BTNS.put(R.id.button2, new int[] { ToneGenerator.TONE_DTMF_2,
                KeyEvent.KEYCODE_2 });
        DIGITS_BTNS.put(R.id.button3, new int[] { ToneGenerator.TONE_DTMF_3,
                KeyEvent.KEYCODE_3 });
        DIGITS_BTNS.put(R.id.button4, new int[] { ToneGenerator.TONE_DTMF_4,
                KeyEvent.KEYCODE_4 });
        DIGITS_BTNS.put(R.id.button5, new int[] { ToneGenerator.TONE_DTMF_5,
                KeyEvent.KEYCODE_5 });
        DIGITS_BTNS.put(R.id.button6, new int[] { ToneGenerator.TONE_DTMF_6,
                KeyEvent.KEYCODE_6 });
        DIGITS_BTNS.put(R.id.button7, new int[] { ToneGenerator.TONE_DTMF_7,
                KeyEvent.KEYCODE_7 });
        DIGITS_BTNS.put(R.id.button8, new int[] { ToneGenerator.TONE_DTMF_8,
                KeyEvent.KEYCODE_8 });
        DIGITS_BTNS.put(R.id.button9, new int[] { ToneGenerator.TONE_DTMF_9,
                KeyEvent.KEYCODE_9 });
        DIGITS_BTNS.put(R.id.buttonpound, new int[] {
                ToneGenerator.TONE_DTMF_P, KeyEvent.KEYCODE_POUND });
        DIGITS_BTNS.put(R.id.buttonstar, new int[] { ToneGenerator.TONE_DTMF_S,
                KeyEvent.KEYCODE_STAR });
    };

    private static final SparseArray<String> DIGITS_NAMES = new SparseArray<String>();

    static {
        DIGITS_NAMES.put(R.id.button0, "0");
        DIGITS_NAMES.put(R.id.button1, "1");
        DIGITS_NAMES.put(R.id.button2, "2");
        DIGITS_NAMES.put(R.id.button3, "3");
        DIGITS_NAMES.put(R.id.button4, "4");
        DIGITS_NAMES.put(R.id.button5, "5");
        DIGITS_NAMES.put(R.id.button6, "6");
        DIGITS_NAMES.put(R.id.button7, "7");
        DIGITS_NAMES.put(R.id.button8, "8");
        DIGITS_NAMES.put(R.id.button9, "9");
        DIGITS_NAMES.put(R.id.buttonpound, "pound");
        DIGITS_NAMES.put(R.id.buttonstar, "star");
    };

    public DialpadNovanet(Context context) {
        super(context);
        LayoutInflater inflater = LayoutInflater.from(context);
        inflater.inflate(R.layout.dialpad_novanet, this, true);

    }

    public DialpadNovanet(Context context, AttributeSet attrs) {
        super(context, attrs);
        LayoutInflater inflater = LayoutInflater.from(context);
        inflater.inflate(R.layout.dialpad_novanet, this, true);
    }

    private void dispatchDialKeyEvent(int buttonId) {
        if (onDialKeyListener != null && DIGITS_BTNS.containsKey(buttonId)) {
            int[] datas = DIGITS_BTNS.get(buttonId);
            onDialKeyListener.onTrigger(datas[1], datas[0]);
        }
    }

    @Override
    public void onClick(View v) {
        dispatchDialKeyEvent(v.getId());

    }

    public void setOnDialKeyListener(OnDialKeyListener listener) {
        onDialKeyListener = listener;
    }

    @Override
    protected void onFinishInflate() {
        super.onFinishInflate();

        for (int buttonId : DIGITS_BTNS.keySet()) {
            ImageButton button = (ImageButton) findViewById(buttonId);
            if (button != null) {
                button.setOnClickListener(this);
            }
        }

    }

    public interface OnDialKeyListener {

        /**
         * Called when the user make an action
         * 
         * @param keyCode
         *            keyCode pressed
         * @param dialTone
         *            corresponding dialtone
         */
        void onTrigger(int keyCode, int dialTone);
    }

    boolean mForceWidth = false;

    public void setForceWidth(boolean forceWidth) {
        mForceWidth = forceWidth;
    }

    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
        if (mForceWidth) {
            setMeasuredDimension(MeasureSpec.getSize(widthMeasureSpec),
                    getMeasuredHeight());
        }
    };
    /*
     * public void applyTheme(Theme t) {
     * 
     * Log.d(tag, "Theming in progress"); for(int buttonId :
     * DIGITS_BTNS.keySet()) {
     * 
     * ImageButton b = (ImageButton) findViewById(buttonId); // We need to use
     * state list as reused t.applyBackgroundStateListDrawable(b, "btn_dial");
     * 
     * // Src of button Drawable src =
     * t.getDrawableResource("dial_num_"+DIGITS_NAMES.get(buttonId)); if(src !=
     * null) { b.setImageDrawable(src); }
     * 
     * // Padding of button t.applyLayoutMargin(b, "dialpad_btn_margin"); }
     * 
     * }
     */

} 
```

现在创建自定义 EditText

```
public class DialerEditText extends EditText {

    private static final String tag="DialerEditText";
    private Boolean isDigit=null;
    private Method showSoftInputOnFocus=null;

    public DialerEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
         setIsDigit(true, false);
    }

    public synchronized void setIsDigit(boolean isDigit, boolean autofocus) {
        if(this.isDigit == null || this.isDigit != isDigit) {
            this.isDigit = isDigit;
            reflexSetShowSoftInputOnFocus(!isDigit);
            if (isDigit) {
                setRawInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS);
                setTextSize(TypedValue.COMPLEX_UNIT_PX, getContext().getResources().getDimension(R.dimen.dialpad_digits_text_size));
            } else {
                setInputType(InputType.TYPE_CLASS_TEXT | InputType.TYPE_TEXT_VARIATION_EMAIL_ADDRESS
                        | InputType.TYPE_TEXT_FLAG_NO_SUGGESTIONS);
                setTextSize(TypedValue.COMPLEX_UNIT_SP, 14);
            }
        }
        applyKeyboardShowHide(autofocus);
    }

    @Override
    protected void onFocusChanged(boolean focused, int direction, Rect previouslyFocusedRect) {
        super.onFocusChanged(focused, direction, previouslyFocusedRect);
        if(focused) {
            applyKeyboardShowHide(false);
        }else {
            final InputMethodManager imm = ((InputMethodManager) getContext()
                    .getSystemService(Context.INPUT_METHOD_SERVICE));
            if(imm != null && imm.isActive(this)) {
                imm.hideSoftInputFromWindow(getApplicationWindowToken(), 0);
            }
        }
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        final boolean ret = super.onTouchEvent(event);
        // Must be done after super.onTouchEvent()
        applyKeyboardShowHide(false);
        return ret;
    }

/*
    @Override
    public boolean requestFocus(int direction, Rect previouslyFocusedRect) {
        boolean ret = false;
        if(!isDigit) {
            ret = super.requestFocus(direction, previouslyFocusedRect);
        }
        applyKeyboardShowHide(false);
        return ret;
    }
*/

    private void applyKeyboardShowHide(boolean autofocus) {
        final InputMethodManager imm = ((InputMethodManager) getContext()
                .getSystemService(Context.INPUT_METHOD_SERVICE));
        if (imm != null) {
            if(isDigit) {
                if(imm.isActive(this)) {
                    imm.hideSoftInputFromWindow(getApplicationWindowToken(), 0);
                }
            }else if(autofocus) {
                imm.showSoftInput(this, 0);
            }
        }
    }

    @Override
    public void sendAccessibilityEventUnchecked(AccessibilityEvent event) {
        if (event.getEventType() == AccessibilityEvent.TYPE_VIEW_TEXT_CHANGED) {
            // Since we're replacing the text every time we add or remove a
            // character, only read the difference. (issue 5337550)
            final int added = event.getAddedCount();
            final int removed = event.getRemovedCount();
            final int length = event.getBeforeText().length();
            if (added > removed) {
                event.setRemovedCount(0);
                event.setAddedCount(1);
                event.setFromIndex(length);
            } else if (removed > added) {
                event.setRemovedCount(1);
                event.setAddedCount(0);
                event.setFromIndex(length - 1);
            } else {
                return;
            }
        } else if (event.getEventType() == AccessibilityEvent.TYPE_VIEW_FOCUSED) {
            // The parent EditText class lets tts read "edit box" when this View
            // has a focus, which
            // confuses users on app launch (issue 5275935).
            return;
        }
        super.sendAccessibilityEventUnchecked(event);
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
        super.onLayout(changed, left, top, right, bottom);
        // Here we ensure that we hide the keyboard
        // Since this will be fired when virtual keyboard this will probably
        // blink but for now no better way were found to hide keyboard for sure
        applyKeyboardShowHide(false);
    }

    private void reflexSetShowSoftInputOnFocus(boolean show) {
        if(showSoftInputOnFocus != null) {
            UtilityWrapper.safelyInvokeMethod(showSoftInputOnFocus, this, show);
        }
    }

} 
```

现在您可以将其用作 xml 避免填充和内容，因为那是我的应用程序特定的

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

        <com.novanet.custom.DialerEditText
            android:id="@+id/edtDialer"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="70" />

    <com.novanet.custom.DialpadNovanet
        android:id="@+id/dial_pad"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_gravity="center_vertical"
        android:layout_weight="65"
        android:paddingBottom="10dip"
        android:paddingLeft="5dip"
        android:paddingRight="5dip" />

</LinearLayout> 
```

现在在你的活动中你可以做到这一点

```
edtText=(DialerEditText)findViewById(R.id.edtDialer);
        dialPad=(DialpadNovanet)findViewById(R.id.dial_pad);
        dialPad.setOnDialKeyListener(new OnDialKeyListener() {

            @Override
            public void onTrigger(int keyCode, int dialTone) {
                Log.v(tag,"Key "+keyCode);
                KeyEvent event=new KeyEvent(KeyEvent.ACTION_DOWN, keyCode);
         edtText.onKeyDown(keyCode, event);

            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:29:09.337

在清单文件中，在您的活动标签中必须写一个属性，如

```
android:windowSoftInputMode="stateHidden" 
```

然后它隐藏键盘，直到按下edittext ...

在我的情况下，我在活动标签中使用这样的方式来隐藏软键盘，直到按下编辑文本......

```
<activity
            android:name="EnglishRadioActivity"
            android:configChanges="orientation"
            android:windowSoftInputMode="stateHidden" >
        </activity> 
```

希望这将解决您的问题快乐编码...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T11:37:25.913

```
android:windowSoftInputMode="stateHidden|adjustPan" 
```

将此添加到清单文件中相应的活动名称之后。这将限制默认软键盘出现在您的屏幕上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T12:13:01.290

采用`android:windowSoftInputMode="stateHidden"`

或者 `android:windowSoftInputMode="adjustPan"`

# message - AS3 TextInput 到 TextField

> ID：15742452
> 
> 赞同：0
> 
> 时间：2013-04-01T11:19:53.757
> 
> 标签：message, textfield, textinput

我正在创建一个小型聊天应用程序。我想在 TextInput 字段中编辑一条消息，当用户在键盘上按 Enter 时，消息将从 TextInput 传输到 TextArea。我该怎么做呢？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:32:09.457

您需要向键盘事件添加事件侦听器，请参见此处

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/KeyboardEvent.html#keyCode](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/KeyboardEvent.html#keyCode)

Enter 将在您可以正确逻辑的事件上具有特定的键盘代码，例如；

```
addEventListener(KeyboardEvent.KEY_DOWN, handleKeyboard);

function handleKeyboard(e:KeyboardEvent):void
{
// eg if (e.keycode == //the code for enter )
{
//your chat send message logic
}

//of course find the different keycodes easily by trace(e.keycode)
} 
```

# javascript - nicescroll 在页面滚动完成后激活滚动

> ID：15742455
> 
> 赞同：0
> 
> 时间：2013-04-01T11:20:02.327
> 
> 标签：javascript, jquery, css, scrollbar

我有一个 aspx 页面。在该页面中，我为 div 应用了 nicescroll 以垂直滚动。但是 nicescroll 只有在索尼爱立信移动 android 版本 4.2 中页面的本机滚动完成后才会滚动 div。我希望 div 先滚动，然后再滚动页面。

这是我在 aspx 页面中的 div 标签。

```
 <div id="divexample">                                                    
          <div class="row-fluid white-bg">
               <div class="row-fluid"><b>
                    <asp:Label ID="lblcode" runat="server" Text="Using this card?" CssClass="modalLabel"></asp:Label></b>
               </div>
               <div class="row-fluid">
                    <asp:Label ID="lblcode2" runat="server" Text="Here are the instructions" CssClass="modalText modalLabeltext"></asp:Label>
                </div>
               <div class="row-fluid center">
                    <asp:Image ID="Image5" runat="server" ImageUrl="card.gif" />
               </div> 
          </div>                                                 
      </div> 
```

head 标签内的调用部分是

```
 <script type="text/javascript">
            $(document).ready(
               function () {
                  $("#divexample").niceScroll({ nativeparentscrolling: "false", touchbehavior: "true" });
               }
            );
    </script> 
```

我的CSS是

```
 <style type="text/css">
         #divexample
        {
            overflow:auto;
            height: 300px;
        }
 </style> 
```

请帮我解决这个问题。我在这个问题上苦苦挣扎了两个星期。我找到了几种替代方法来解决这个问题，但我没有解决这个问题。如果有人修好了，那就太好了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T09:42:03.683

试试这个代码：

```
$("#divexample").bind("mousedown,touchstart",function (e) {
    e.stopPropagation(); 
}); 
```

# php - 从面包屑中删除“主页”链接

> ID：15742456
> 
> 赞同：7
> 
> 时间：2013-04-01T11:20:04.220
> 
> 标签：php, yii, breadcrumbs

`Home > Instance > Action`我的所有视图页面中都有面包屑。如何从所有面包屑中删除“主页”链接？

```
$this->breadcrumbs=array(
'Keypairs'=>array('admin'),
'Manage',
); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-01T12:24:44.393

这可以通过在您的 CBreadcrumbs 小部件初始化中将[`homeLink`属性](http://www.yiiframework.com/doc/api/1.1/CBreadcrumbs#homeLink-detail)设置为, 来完成。`false`这通常在布局文件中完成。

在默认的 Yii 应用中，在*protected/views/layouts/main.php*中：

```
<?php if(isset($this->breadcrumbs)):?>
    <?php $this->widget('zii.widgets.CBreadcrumbs', array(
        'links'=>$this->breadcrumbs,
        'homeLink'=>false // add this line
    )); ?><!-- breadcrumbs -->
<?php endif?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-02-27T16:33:16.923

在 layouts/main.php 添加 'homeLink' => false

```
<?= Breadcrumbs::widget([
     'links' => isset($this->params['breadcrumbs'])? $this->params['breadcrumbs'] : [],
     'homeLink' => false
]) ?> 
```

# php - Simplexml按属性获取节点

> ID：15742457
> 
> 赞同：1
> 
> 时间：2013-04-01T11:20:12.593
> 
> 标签：php, simplexml

我有xml文件：

```
<?xml version="1.0" ?>
<xml>
<opis lang="en">My text</opis>
<opis lang="cz">My text2</opis>
</xml> 
```

我想得到“我的 text2” - 所以属性 lang 是“cz”的节点：

```
$xml = simplexml_load_file($fileName);
$result = $xml->xpath('//xml/opis[@lang="cz"]') 
```

但我得到的不是价值：

```
array(1) (
  [0] => SimpleXMLElement object {
    @attributes => array(1) (
      [lang] => (string) cz
    )
  }
)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:34:32.893

你可以得到这样的值：

```
$xml = simplexml_load_file($fileName);
$result = $xml->xpath('//xml/opis[@lang="cz"]');
foreach($result as $res) {
   echo $res;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:26:17.093

尝试使用 DomDocument：

```
$xml = new DomDocument;
$xml->load('yourFile');
$xpath = new DomXpath($xml);

foreach ($xpath->query('//xml/opis[@lang="cz"]') as $rowNode) {
  echo $rowNode->nodeValue; // will be 'this item'
} 
```

# sql-server - 在 MySQL 服务器 2008 R2 服务器中转换为 America/New_York

> ID：15742465
> 
> 赞同：0
> 
> 时间：2013-04-01T11:20:52.860
> 
> 标签：sql-server, database, select

2013 年 4 月 19 日星期五 13:30:00 在美国/New_York 转换为 2013 年 4 月 19 日星期五在美国/安克雷奇 09:30:00

在 SQL Server 2008 R2 中像这样转换。

使用选择查询。

请帮助我。

谢谢，

我们将在 java wright 中从“America/New_York”转换为 America/Anchorage，就像我需要一个选择查询来将 EST 时间转换为其他时区一样。请不要像 MET、GMT 和所有时区一样给出时区...

请注意：- 所有时区只会像纯文本美国/安克雷奇

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:25:50.957

您正在寻找此功能：

CONVERT_TZ(dt,from_tz,to_tz)

CONVERT_TZ() 将日期时间值 dt 从 from_tz 给定的时区转换为 to_tz 给定的时区，并返回结果值。时区的指定如第 10.6 节，“MySQL 服务器时区支持”中所述。如果参数无效，此函数返回 NULL。

[https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_convert-tz](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_convert-tz)

# jquery - 无法使用 angularjs + spring MVC 3.0 将请求从控制器呈现到另一个 html

> ID：15742467
> 
> 赞同：1
> 
> 时间：2013-04-01T11:20:59.463
> 
> 标签：jquery, spring-mvc, controller, angularjs, modelandview

登录.jsp

```
 <!DOCTYPE html>
    <html ng-app="angularspring">
    <head>

    </head>

    <body ng-controller="LogonController">

    <form>
            <div>
                TextBox : <input type="text"  ng-model="person.userName" />
            </div>
            <div>
                Password : <input type="password" ng-model="person.passWord" />
            </div>
            <div ng-view></div>
            <button type="submit" ng-click="login(person)"> Submit 

            </button>
    </form>

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="js/jquery.i18n.properties-min-1.0.9.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/angularjs/1.0.2/angular.js"></script>
    <script type="text/javascript" src="js/init.js"></script>
    <script type="text/javascript" src="js/controller.js"></script>
    <script type="text/javascript" src="js/i18n.js"></script>
    <script type="text/javascript" src="js/base64.js"></script>
    <script type="text/javascript" src="bootstrap/js/bootstrap.min.js"></script>

    </body>

    </html> 
```

控制器.js

```
 var as = angular.module('angularspring',[]);

        as.controller('LogonController', function ($scope, $http) {
            var actionUrl = 'action/checkUserNameAndPassword/';

             $scope.login = function (person) {

                 $http.post(actionUrl,$scope.person);
             };

        }); 
```

web.xml

```
 <context-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>
                /WEB-INF/action-servlet.xml
            </param-value>
        </context-param>

        <listener>
            <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
        </listener>

        <!-- Spring MVC -->
        <servlet>
            <servlet-name>action</servlet-name>
            <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
            <load-on-startup>1</load-on-startup>
        </servlet>
        <servlet-mapping>
            <servlet-name>action</servlet-name>
            <url-pattern>/action/*</url-pattern>
        </servlet-mapping>

        <welcome-file-list>
        <welcome-file>logon.html</welcome-file>
      </welcome-file-list> 
```

在 action-servlet.xml 文件中包含以下标签和类

动作-servlet.xml

```
 <mvc:annotation-driven/>    

    <context:annotation-config />

    <context:component-scan base-package="com.pack" />

    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"></bean>

    <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" >
      <property name="prefix" value="" />
      <property name="suffix" value=".html" />

    </bean> 
```

登录控制器.java

在 LogonController 中，我能够获取绑定到 person 对象的请求值，但我无法将请求呈现给 logonSuccess.html

```
 @RequestMapping(value = "/checkUserNameAndPassword", method = RequestMethod.POST)
    @ResponseBody 
    public ModelAndView logon(@RequestBody Person person) {

            return new ModelAndView("WEB-INF/views/logonSuccess");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:05:01.600

根据我的理解，您可以绑定模型属性但无法调度到所需的视图。

这是我观察到的

您的方法上有`@ResponseBody`注释，`logon`但它返回一个`ModelandView`对象。

如果要返回到 html 视图，请删除`@ResponseBody`注释。

[您可以在此处](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-ann-responsebody)阅读有关此内容的更多信息

同样在`action-servlet.xml`指定的`prefix`属性`viewResolver`与你的html文件的位置，我认为是`WEB-INF/views`

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix">
        <value>/WEB-INF/views/</value>
    </property>
    <property name="suffix">
        <value>.html</value>
    </property>
</bean> 
```

现在你可以返回`ModelandView`like

```
 return new ModelAndView("logonSuccess"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-26T19:16:04.350

我遇到了同样的问题。从登录页面，我试图在成功登录时重定向到主页。我正在使用 angular js 和 spring mvc 休息控制器。我正在从 angularjs 执行 http.post，而我的其余控制器正在执行身份验证并返回模型和视图对象。但后来 angularjs 并没有将我重定向到主页。

然后我改变了我的 angularjs 实现并且它起作用了。尝试从 angularjs 向控制器提交表单，而不是 http.post 或 http.get。现在页面被重定向到主页或错误页面，无论在 REST 控制器的 ModelAndView 对象中设置什么视图。

# android - android无法导入google play服务

> ID：15742469
> 
> 赞同：12
> 
> 时间：2013-04-01T11:21:07.767
> 
> 标签：android, google-maps

从`SDK Manager`我下载了谷歌播放服务，但是当我尝试将此库添加到我的项目中`right click`时`import`，`existing android code into workshop`当我从中选择谷歌播放服务库时`C:\Program Files (x86)\Android\android-sdk\extras\google\google_play_services\libproject\google-play-services_lib`出现此错误（请参见下图）。

### 笔记

我有android支持v4（也许这会产生问题？我只是告诉你，因为我不知道这是否会出错）。 ![在此处输入图像描述](https://i.stack.imgur.com/9du68.jpg)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-01T12:33:05.280

似乎您已经导入了 google-play-services_lib 项目并刚刚从 eclipse ide 中删除，但没有在您的硬盘工作区文件夹中。尝试从您的工作区文件夹中删除 google-play-services_lib 项目，然后再次尝试导入该项目。

并确保在 google-play-services_lib 项目的 properties->Android 中选中“Is Library”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T04:46:53.117

适用于 Android 的 Maps API 已在最新版本的 Google Play 服务库中进行了更新，并已通过 Play 商店推广到 Android 设备。

请检查此[链接](https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)。

如果您在下面有任何查询评论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T05:24:32.483

似乎该库已经安装，请检查我的分步教程，看看您是否错过了在模拟器（android 4.2.2）上使用 google map android v2 的某些步骤，看看我的博客：[http ://umut.tekguc.info /en/content/google-android-map-v2-step-step](http://umut.tekguc.info/en/content/google-android-map-v2-step-step)

# ruby-on-rails - 使 ENV 变量在开发中可访问

> ID：15742474
> 
> 赞同：1
> 
> 时间：2013-04-01T11:21:18.510
> 
> 标签：ruby-on-rails, ruby-on-rails-3, environment-variables

存储敏感凭据时，我通常会创建一个 yml 文件并像这样在我的 development.rb 中加载它

```
APP_CONFIG = YAML.load_file("#{Rails.root}/config/config.yml")[Rails.env] 
```

然后我可以像这样访问

```
APP_CONFIG["google_secret"] 
```

问题是 Heroku 不喜欢这样，所以我需要在本地设置 ENV 变量以使集成更容易。所以我像这样创建了一个 env.rb 文件

```
ENV['google_key'] = 'xxx'
ENV['google_secret'] = 'xxx'
ENV['application_key'] = 'xxx' 
```

并访问它我认为我可以使用

```
x = ENV['application_key'] 
```

但它没有找到变量，我如何在开发环境中加载它们？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:34:53.510

您应该将`env.rb`文件放在`initializers`文件夹中。如果您不想将文件推送到heroku，可以将`env.rb`文件添加到文件中。`.gitignore`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T12:09:31.987

您是否考虑过使用[Figaro](https://github.com/laserlemon/figaro)来执行此操作？Figaro 的[灵感来自 Heroku 的密钥应用程序配置](https://github.com/laserlemon/figaro#how-does-it-work-with-heroku)，因此`ENV`在 Heroku 生产环境中可以轻松访问开发中的秘密变量。

[我在这个 StackOverflow 线程](https://stackoverflow.com/q/14785257/567863)上写了一个关于在 Rails 中隐藏秘密信息（使用 Figaro）的答案，希望也可以为您提供一些参考。

# javascript - 在下拉菜单中显示所选值

> ID：15742477
> 
> 赞同：2
> 
> 时间：2013-04-01T11:21:32.233
> 
> 标签：javascript, jquery, drop-down-menu

我有一个这样的下拉列表：

```
<select id="ddlLanguage" name="culture">
    <option value="null" >Language:</option>
    <option value="ar-jo">Arabic</option>
    <option value="en-us">English</option>
    <option value="fr-FR">French</option>
    <option value="es-cl">Spanish</option>
</select> 
```

如果我选择“阿拉伯语”，下拉列表应显示“阿拉伯语”。但我总是得到“语言”。

**编辑**

我通过使用 Viewbag 得到了答案

脚本：-

```
<script type="text/javascript">
        $(function () {
            $('#ddlLanguage').val("@ViewBag.Msg");
            $('#ddlLanguage').change(function () {
                $('#currentCulture').val($(this).val());
                $(this).parents("form").submit();
            });
        });
    </script> 
```

在控制器中，我设置了 ViewBag.Msg 的值。

```
ViewBag.Msg = ddlLanguage 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:27:03.623

使用下面给出的代码更新您的下拉列表：

```
<select id="ddlLanguage" name="culture">
    <option value="null" >Language:</option>
    <option value="Arabic">Arabic</option>
    <option value="English">English</option>
    <option value="French">French</option>
    <option value="Spanish">Spanish</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:27:47.270

在给定选项上将 selected 属性设置为 selected 。$("你的选择").attr("selected", "selected");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T11:38:51.440

尝试使用此代码

```
$('#ddlLanguage').change(function(){    
   alert( $(this).find('option:selected').text());
}); 
```

# android - pdf 套件，例如适用于 android 的 fastpdfkit

> ID：15742481
> 
> 赞同：0
> 
> 时间：2013-04-01T11:21:59.173
> 
> 标签：android, ios, pdf, pdf-viewer

我创建了 iPhone 应用程序，在其中显示 PDF 并使用 fastpdfkit 播放音频和视频文件。

现在我也想为 Android 制作相同的应用程序。是否有任何适用于 android 的套件，我可以拥有相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:48:22.190

[`iText`](http://itextpdf.com/)是一个专门用于创建和操作 PDF 文档的 java 库。它有一个名为[`iTextG`](http://developers.itextpdf.com/itextg-android). `iText` [教程](http://developers.itextpdf.com/examples)比`iTextG`. 所以我建议你使用`iText`教程。

`iTextG`仅用于 pdf 操作。您可以依靠 Android 多媒体 API 来支持音频和视频。

# php - 如何用户使用他们的 facebook 用户名和密码登录我的网站。？

> ID：15742483
> 
> 赞同：0
> 
> 时间：2013-04-01T11:22:02.410
> 
> 标签：php, facebook, login

我的网站有登录设施。登录一次必须在我的网站上注册。如果用户不想在我的网站上注册。然后用户可以使用他们的 Facebook 用户名和密码登录。访问我的网站.. 这怎么可能..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:44:48.303

你可以用**Facebook SDK**来做到这一点[它是一个代码，你可以从互联网上得到这个]。

1.  首先在 developer.facebook.com 上创建 facebook 应用程序
2.  在 facebook SDK 文件中使用其凭据。

# java - 如何读取名片图像并存储联系人信息？

> ID：15742484
> 
> 赞同：0
> 
> 时间：2013-04-01T11:22:04.113
> 
> 标签：java, android, android-image

我已经在 Android 中启动了**扫描卡**应用程序。它执行以下任务... **1) 拍照 2) 扫描照片**

此应用程序将扫描图像中的所有信息，如*联系人姓名、电话号码、地址、电子邮件地址（如果可用）等信息*

[Play Store 上的扫描卡应用程序](https://play.google.com/store/apps/details?id=com.intsig.BCRLite&feature=related_apps)

任何机构都可以解决这个问题吗？

我想开发这个应用程序。如果有任何**API 或帮助**可用，请回复我。

# node.js - 返回值未定义（应该是字符串）

> ID：15742488
> 
> 赞同：2
> 
> 时间：2013-04-01T11:22:12.047
> 
> 标签：node.js

我刚开始用 NodeJS 开发一些东西，遇到了一个非常令人沮丧的错误。

我有一个将 .jade 编译为 .html 的功能

```
function compileJadeFile(jadeFile){
    var pathToFile = "./index.jade";

    fs.exists(pathToFile, function(exists){
        if(exists){
            fs.readFile(pathToFile, function(err, data){
                                    var html = jade.compile(data)();
                                    return html;
            });
        }
    });
} 
```

一切正常，但现在我想提供已编译的 html。所以我做了这样的事情：

```
res.write(compileJadeFile("index.jade")); 
```

（不用担心 的未使用参数`compileJadeFile`，它在原始中使用。我只是为这个例子缩短了它）

现在，如果我将结果记录`compileJadeFile("index.jade")`到控制台，它会说`"undefined"`:(

我在谷歌上搜索了这个，但我没有找到任何解决问题的方法。你们中的任何人都可以帮助我吗？我习惯用 C# 或 C++ 编写代码，所以也许我遗漏了一些对 Javascript 来说特别的东西或东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T11:25:22.907

您的代码是同步的，但您使用的代码是异步的。问题是当你调用你的`compileJadeFile`函数时它实际上并没有返回任何东西，因此它的返回值是按定义的`undefined`。

您还需要使函数本身异步，并引入回调并将您的方法更改为：

```
function compileJadeFile(jadeFile, callback) {
  var pathToFile = "./index.jade";

  fs.exists(pathToFile, function(exists) {
    if(exists){
      fs.readFile(pathToFile, function(err, data) {
        var html = jade.compile(data)();
        callback(html);
      });
    }
  });
} 
```

然后你可以像这样使用它：

```
compileJadeFile("index.jade", function (html) {
  res.write(html);
  res.end();
}); 
```

请注意，对于完全符合 Node.js 的回调，回调始终应`err`作为其第一个参数来传输错误。因此，理想情况下，您的代码应该是：

```
compileJadeFile("index.jade", function (err, html) {
  if (err) { throw err; }
  res.write(html);
  res.end();
}); 
```

然后，当然你需要将回调的调用更改为：

```
callback(null, html); 
```

希望这可以帮助 ：-）。

# java - 显示周的getformat

> ID：15742490
> 
> 赞同：1
> 
> 时间：2013-04-01T11:22:14.227
> 
> 标签：java, gwt, gxt

如何设置 DateTimeFormat 以显示如下内容：“wed.-sun.” “星期一-太阳。” “星期一-太阳。” “星期一-太阳。” “周一至周二”

```
DateTimeFormat dtfDate = DateTimeFormat.getFormat("dd.MM");

if (rt.detalization.equals("date")) {
    dtfDate = DateTimeFormat.getFormat("dd.MM");
}
if (rt.detalization.equals("week")) {                
    dtfDate = DateTimeFormat.getFormat("EEE.dd-EEE.dd");
    //how can show week from choisen day to sunday like I wrote before
}
if (rt.detalization.equals("month")) {
    dtfDate = DateTimeFormat.getFormat("MMM");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:04:03.290

下面的代码打印

```
 DateTimeFormat format2 = DateTimeFormat.getFormat("E");
     String format = format2.format(new Date());
     System.out.println(format); //prints "Mon" 
```

所以

```
if (rt.detalization.equals("week")) {  
       DateTimeFormat format2 = DateTimeFormat.getFormat("E");
    String day= format2.format(dtfDate);              
         System.out.println(day+"-Sun");

} 
```

# php - 在 jquery colorbox 中显示 php 的输出...出现未定义的索引错误

> ID：15742494
> 
> 赞同：-1
> 
> 时间：2013-04-01T11:22:43.187
> 
> 标签：php, jquery, mysql, colorbox

我希望有人可以帮助我，我创建了一个带有下拉菜单的简单 html 表单，下拉菜单是从 mysql 数据库中填充的，用户必须从两个下拉菜单中进行选择，然后这将显示数据（两个选择都使sql 查询）这一切都在 HTML 中正常工作，但是我试图让它变得更加活跃，并在 jquery 颜色框（弹出窗口）中显示输出。

我不确定如何格式化 jquery 函数的语法.. 这是我到目前为止所拥有的

```
<script>
        $(document).ready(function(){

        $(".inline").colorbox({inline:true, width:"50%"});
        $("input#formsubmit").colorbox({href: function(){
    var url = $(this).parents('form').attr('action');
    return url;
}, innerWidth:920, innerHeight:"86%", iframe:true});                
            });
    </script> 
```

这会正确启动颜色框弹出窗口并从我的表单中触发 php“操作”，但不会发送 $_POST 属性，我只是从 mysql 收到一个未识别的索引错误。

有人可以帮帮我吗 ？

我确定它很简单，但我无法弄清楚。

非常感谢

添加 PHP ...

```
<?php
mysql_connect("localhost", "root", "root") or die(mysql_error());
mysql_select_db("verify") or die(mysql_error());

$result = mysql_query("SELECT Entitlement FROM products WHERE ProductName = '$_POST[product]' AND CustomerType = '$_POST[customer]'")
or die(mysql_error());

while($row = mysql_fetch_array($result))
{
echo $row['Entitlement'] ;
echo "<br />";
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:33:05.087

尝试这个

```
 <?php

  // Checking for valid post data
  if (isset($_POST['product']) && isset($_POST['customer']) && !empty($_POST['product']) && !empty($_POST['customer'])) {

    // Cleaning post data
    $proudct = mysql_escape_string($_POST['product']);
    $customer = mysql_escape_string($_POST['customer']);

    // db connnection
    mysql_connect("localhost", "root", "root") or die(mysql_error());
    mysql_select_db("verify") or die(mysql_error());

    // Quering
    $result = mysql_query("SELECT Entitlement FROM products WHERE ProductName = '$proudct' AND CustomerType = '$customer'") or die(mysql_error());

    // Printing result
    while ($row = mysql_fetch_array($result)) {
      echo $row['Entitlement'];
      echo "<br />";
    }
  }
  ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:49:28.543

你能告诉我这段代码如何与你一起工作吗:)

```
<?php $result = mysql_query("SELECT Entitlement FROM products WHERE ProductName = '$_POST[product]' AND CustomerType = '$_POST[customer]'");?> 
```

您有 2 个错误，第一个错误是 post 变量中索引旁边的单引号，必须是这样`$_POST['product']`，`$_POST['customer']`然后第二个错误是您必须将变量封装在字符串中，如下所示`{$_POST['product']}`，`{$_POST['customer']}`

尝试这些解决方法然后告诉我结果:)

# javascript - 页面加载后删除 div 时 jQuery 冲突

> ID：15742495
> 
> 赞同：5
> 
> 时间：2013-04-01T11:22:43.263
> 
> 标签：javascript, jquery

我正在尝试从页面中删除一个 div（最好完全阻止它加载），但现在我决定在页面加载后将其删除。

[当我在 jsFiddle 中](http://jsfiddle.net/fariskassim/FRYsJ/2/)尝试以下代码行时，`#content`div 被删除，正如预期的那样。

```
<script type='text/javascript'>//<![CDATA[ 
  $(window).load(function(){
      $('#content').remove();
  });//]]>  
</script> 
```

但是，我也尝试在[实际网站](http://stage.bravo-company.info/luchatest/)上实现它，但在这种情况下，`#content`不会删除 div。

关于可能出现什么问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T03:54:58.433

如果您与另一个使用美元进行操作的库共享 jQuery，您需要像这样使用匿名包装器来防范它：

```
(function($) {
    $(window).on('load', function(){
        $('#content').remove();
    });
}(jQuery)); 
```

*请注意，我使用的是 .on('load', fn) 而不是 .load()。*

除了页面加载，您还可以将代码绑定到准备好的 DOM 上；jQuery 将自己作为第一个参数传递给内部函数：

```
jQuery(function($) {
    $('#content').remove();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:04:20.653

您的 $ 变量由于某种原因没有指向 jQuery。

```
<script type='text/javascript'>
    window.$ = jQuery;
    $(window).load(function()
    {

        $('#content').remove();
     });
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T11:26:18.730

用这个：

```
<script type="text/javascript">
var node = document.getElementById('content'); 
if(node.parentNode)
{ 
node.parentNode.removeChild(node);
}
</script> 
```

希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T11:27:29.877

试试这个

```
<script type='text/javascript'> 
    $(document).ready(function(){
         $('#content').remove();
    });
</script> 
```

或者

```
$(function()
{
        $('#content').remove();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T11:36:35.537

您正在使用带有 onload 的 jQuery 测试，

所以你必须在 jquery 中添加 onload 语法，在你的网站上，该语句没有被称为 onload，这就是为什么它不起作用

我已经更新了小提琴

```
http://jsfiddle.net/MarmeeK/FRYsJ/3/ 
```

标签下的JS代码`<script>`，页面中没有添加onload，

```
<script type="text/javascript">
    $(document).ready(function(){$('#content').remove();});
</script> 
```

这应该工作:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-01T11:34:02.767

TypeError: $(...).load 不是函数

由于在新版本的 Jquery 中不推荐使用负载，因此它给出了高于而不是低于 1 的错误

```
$(window).load(function(){
}); 
```

使用此代码

```
$(function(){
 // your code here
}) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-01T14:17:23.080

jquery 冲突的情况。页面上也有 mootools 框架。

我也做了一个页面的“查看源代码”，我发现了这一行

```
$j = jQuery.noConflict();  //line 132 
```

所以试试这个

```
$j('#content').remove();
Or
jQuery('#content').remove(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-01T11:28:02.200

这是因为您在调用`$(window).load()`.

```
Uncaught TypeError: Object [object global] has no method 'load' 
```

此外，您最好使用[document.ready](http://api.jquery.com/ready/)代替，因为内容将被更快地删除（不需要等待所有图像加载）。

```
//shorthand for $(document).ready()
$(function(){
    $('#content').remove();
}); 
```

# c# - 各种类型的比较

> ID：15742497
> 
> 赞同：0
> 
> 时间：2013-04-01T11:22:44.460
> 
> 标签：c#, types, type-conversion

我正在尝试编写代码来比较存储为`System.Object`.

我试过这段代码：

```
object a = GetValue(..);
object b = GetValue(..);
Type t = FindCommonType(a, b);
return a < b; 
```

结果`GetValue`是以下类型之一的实例：long、double、string、bool 和**我自己的类**

方法`FindCommonType`返回一个实例`System.Type`，它的作用是：

1.  如果传递的参数的**实际类型**`typeof(a)`相同，则它返回也与`typeof(b)`.

2.  如果类型不同，则**转换** `b`为`typeof(a)`并返回`typeof(a)`。

3.  的返回实例`System.Type`可以是以下之一：`typeof(long)`、`typeof(int)`和。`typeof(double)``typeof(float)`

例如，如果`a = (long)123`and `b = "123"`，则它转换`b`为`long`并返回`typeof(long)`，然后代码将它们进行比较。

但`a < b`目前比较不成功。

`Type t`我如何比较与持有相关的各种类型的两个对象？

# c - 存储的错误值和其他

> ID：15742498
> 
> 赞同：-3
> 
> 时间：2013-04-01T11:22:49.393
> 
> 标签：c, linux, linked-list, segmentation-fault, stack

我做了这个程序：

**清单：**

```
typedef struct linked_list
    {
        int val;
        int n;
        struct linked_list *next;
    }llist; 
```

**附加功能：**

```
void addelem(llist *list,int val)
{
    llist *tmp=(llist *)malloc(sizeof(llist)); //create new element
    tmp->val=val; //assign value to tmp
    tmp->next=NULL; //set next to NULL
  //  printf("addelem entered\n");
    if(list->next!=NULL) //if this is not the last element
    {
        addelem(list->next,val); //recursion
    }
    else
    {
    tmp->n=list->n + 1;
    list->next=(llist *)malloc(sizeof(llist)); //allocate memory
    list->next=tmp; //add to list
    }
 //   printf("addelem exited\n");
    free(tmp);
} 
```

**记忆功能：**

```
void remelem(llist *list)
{
    int f=0;
    if(list->n==0 && list->next==NULL)
        goto dontremove;
    if(1)
    {
    if(list->next!=NULL)
    {
        if(list->next->next==NULL)
        {
            f=1;
        }
        remelem(list->next);
    }
    else
    {
        free(list);
    }
    if(f==1)
    {
        list->next=NULL;
    }
    }
    else
    {
dontremove:
    printf("cant be removed even if the next message is 'Element removed.'\n");
    }
    //end
} 
```

**显示功能：**

```
void show(llist *list)
{
    printf("Element number: %d\nElement Value: %d\n",list->n,list->val);
    if(list->next!=NULL)
    {
        show(list->next);
    }
    else
    {
        printf("\nTotal number of elems: %d\n",list->n);;
    }
} 
```

**主功能：**

```
int main()
{
    int i,n,ch;
    llist *list=(llist *)malloc(sizeof(llist));
    list->next=NULL;
    list->n=0;
    list->val=0;
menu: //menu label
    printf("1.Add element.\n");
    printf("2.Remove element.\n3.Show elements\n0.Exit.\n");
    scanf("%d",&ch);
    switch(ch)
    {
        case 1:
            printf("\nEnter value.\n");
            scanf("%d",&n);
            addelem(list,n);
            printf("Element added\n");
            break;
        case 2:
            remelem(list);
            printf("\nElement removed.\n");
            break;
        case 3:
            show(list);
            break;
        case 0:
            goto end; //end
            break;
    }
    goto menu; //show menu again
end: //end label
    return 0;
} 
```

输出：

```
1.Add element.
2.Remove element.
3.Show elements
0.Exit.
1

Enter value.
22
Element added
1.Add element.
2.Remove element.
3.Show elements
0.Exit.
1

Enter value.
4
Element added
1.Add element.
2.Remove element.
3.Show elements
0.Exit.
2

Element removed.
1.Add element.
2.Remove element.
3.Show elements
0.Exit.
3
Element number: 0
Element Value: 0
Element number: 1
Element Value: 161701936

Total number of elems: 1 
```

这些值与我输入的值不同。我的第一个问题是为什么会发生这种情况？（可能是一个愚蠢的错误）以及如何修复它以打印正确的值。

这是另一个输出：

```
1.Add element.
2.Remove element.
3.Show elements
0.Exit.
1

Enter value.
22
Element added
1.Add element.
2.Remove element.
3.Show elements
0.Exit.
1

Enter value.
23
Element added
1.Add element.
2.Remove element.
3.Show elements
0.Exit.
2

Element removed.
1.Add element.
2.Remove element.
3.Show elements
0.Exit.
1

Enter value.
22
Segmentation fault (core dumped) 
```

在此，首先我添加一个元素，然后删除它，但是如果我再次添加元素，我会遇到分段错误，谁能解释为什么会发生这种情况以及如何修复它？

如果一开始我添加一个元素并删除它，那么这就是我得到的：

```
*** glibc detected *** ./llist: double free or corruption (fasttop): 0x0855b018 ***

======= Backtrace: =========
certain memory addresses
======= Memory map: ========
08048000-08049000 r-xp 00000000 08:01 1969473    /path/to/this/prog
08049000-0804a000 r--p 00000000 08:01 1969473    /path/to/this/prog
0804a000-0804b000 rw-p 00001000 08:01 1969473    /path/to/this/prog
0855b000-0857c000 rw-p 00000000 00:00 0          [heap]
b758e000-b75aa000 r-xp 00000000 08:01 3802036    /lib/i386-linux-gnu/libgcc_s.so.1
b75aa000-b75ab000 r--p 0001b000 08:01 3802036    /lib/i386-linux-gnu/libgcc_s.so.1
b75ab000-b75ac000 rw-p 0001c000 08:01 3802036    /lib/i386-linux-gnu/libgcc_s.so.1
b75c3000-b75c4000 rw-p 00000000 00:00 0 
b75c4000-b7767000 r-xp 00000000 08:01 3805265    /lib/i386-linux-gnu/libc-2.15.so
b7767000-b7768000 ---p 001a3000 08:01 3805265    /lib/i386-linux-gnu/libc-2.15.so
b7768000-b776a000 r--p 001a3000 08:01 3805265    /lib/i386-linux-gnu/libc-2.15.so
b776a000-b776b000 rw-p 001a5000 08:01 3805265    /lib/i386-linux-gnu/libc-2.15.so
b776b000-b776e000 rw-p 00000000 00:00 0 
b7782000-b7787000 rw-p 00000000 00:00 0 
b7787000-b7788000 r-xp 00000000 00:00 0          [vdso]
b7788000-b77a8000 r-xp 00000000 08:01 3805277    /lib/i386-linux-gnu/ld-2.15.so
b77a8000-b77a9000 r--p 0001f000 08:01 3805277    /lib/i386-linux-gnu/ld-2.15.so
b77a9000-b77aa000 rw-p 00020000 08:01 3805277    /lib/i386-linux-gnu/ld-2.15.so
bf969000-bf98a000 rw-p 00000000 00:00 0          [stack]
Aborted (core dumped) 
```

谁能告诉为什么会发生这些错误？

我使用 Ubuntu 12.04

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:38:23.213

您的函数`addelem`包含很多错误。检查我的代码

```
void addelem(llist *list,int val)
{
    llist *tmp=malloc(sizeof(llist)); //create new element
    tmp->val=val; //assign value to tmp
    tmp->next=NULL; //set next to NULL
  //  printf("addelem entered\n");
    if(list->next!=NULL) //if this is not the last element
    {
        addelem(list->next,val); //recursion
        free(tmp); //not using tmp in this function
    }
    else
    {
        tmp->n = list->n + 1;
        list->next=tmp;
    }
} 
```

在下面的 ypir 代码中，语句包含很多错误

```
else
{
tmp->n=list->n + 1;
list->next=malloc(sizeof(llist)); //allocate memory
list->next=tmp; //add to list
}
//   printf("addelem exited\n");
free(tmp); 
```

`next`您正在为of分配新对象`list`。然后覆盖它会`tmp`反对。然后删除`tmp`对象。所以`list->next`将是悬空指针

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:39:26.353

这：

```
void addelem(llist *list,int val)
{

  ...

    list->next=tmp; //add to list
  }
  // printf("addelem exited\n");
  free(tmp);
} 
```

看起来非常危险。

首先你分配`tmp`给列表的`next`成员，然后你释放它指向的东西。

下一次`next`被访问的程序最有可能死掉。

# android - 在 Pendulum 中旋转布局而不是其内容

> ID：15742500
> 
> 赞同：2
> 
> 时间：2013-04-01T11:22:52.757
> 
> 标签：android, android-layout, animation

在此代码中，我的相对布局内容 Btn2、Btn3、Btn4、Btn5 像钟摆一样旋转，但我只想旋转相对布局而不是其内容。

我的钟摆 xml 是..

```
 <?xml version="1.0" encoding="utf-8"?>
  <rotate xmlns:android="http://schemas.android.com/apk/res/android"
  android:fromDegrees="15"
  android:toDegrees="-15"
  android:pivotX="50%"
  android:pivotY="0%"
  android:duration="2000"
  android:repeatMode="reverse"
  android:repeatCount="-1"
  /> 
```

我的java代码在这里

```
 setContentView(R.layout.activity_main);
    Button Btn1=(Button) findViewById(R.id.pendulum);
    Button Btn2=(Button) findViewById(R.id.pendulum1);
    Button Btn3=(Button) findViewById(R.id.pendulum2);
    Button Btn4=(Button) findViewById(R.id.pendulum3);
    Button Btn5=(Button) findViewById(R.id.pendulum4);

    FrameLayout ln=(FrameLayout) findViewById(R.id.ln);
    RelativeLayout rl=(RelativeLayout) findViewById(R.id.rel);

    Animation rotateAnim = AnimationUtils.loadAnimation(this, R.anim.pendulum);

    LayoutAnimationController animController = new LayoutAnimationController(rotateAnim, 0);

    rl.setLayoutAnimation(animController);

} 
```

# java - 重载程序时出错

> ID：15742508
> 
> 赞同：-3
> 
> 时间：2013-04-01T11:23:43.997
> 
> 标签：java

帮我解决这个重载程序

```
public class Overloading
{
void add()
{
    System.out.println("Default");
}
void add(int a)
{
    System.out.println("One Int Parameter is passed"+a);
}
void add(int a,int b)
{
    System.out.println("Two Int Parameter is passed"+a+" "+b);
}
    void add(int a,int b,int c)
{
    System.out.println("Three Int Parameter is passed"+a+" "+b+" "+c);
}
void add(char x)
{
    System.out.println("One Char Parameter is passed"+x);
}
void add(char x,char y)
{
    System.out.println("Two Char Parameter is passed"+x+" "+y);
}
    void add(char x,char y,char z)
{
    System.out.println("Three Int Parameter is passed"+x+" "+y+" "+z);
}
public static void main(String []args)
{
    Overloading d=new Overloading();
    d.add(z);
}
} 
```

当我使用 d.add(1) 或其他东西时，它可以工作，但使用 d.add("p") 它不起作用帮助我，伙计们....并提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:30:20.477

如果你这样称呼它，它会起作用：

```
d.add('p'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:26:12.580

`"1"`是字符串，`'1'`是字符。您需要这里的字符而不是字符串。

也一样

```
d.add('p'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T11:26:24.323

试试这个：

```
d.add('p'); 
```

您的`void add(char x)`方法采用参数字符而不是字符串。`'p'`是字符，`"p"`而是字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T11:26:24.647

也许是因为 "p" 是 a `string`，而您只有接受 a 的方法`char`。你需要另一个重载：

```
void add(string s) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T11:27:14.303

请更改 `d.add("p");` 为

```
 d.add('p'); 
```

因为 char 是 'p' 而不是 "p" （它是字符串类型，它需要`add(string s){}`函数 - 你错过了）你还可以添加：

```
void add(string s)
{
    System.out.println("One string Parameter is passed"+s);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-01T11:27:15.493

你应该使用，

```
d.add('p'); 
```

因为您的重载是针对字符而不是针对字符串的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-01T11:27:22.457

通过使用此调用：

```
d.add("p");// you are calling a add() with parameter of type string 
```

没有这么多的方法，所以导致错误。为了使它工作枯萎使用：

```
d.add('p');// considered as char parameter 
```

或添加字符串参数方法为：

```
void add(String x)
{ 
   System.out.println("One String Parameter is passed"+x);
} 
```

希望它会有所帮助！

# android - 为多页使用一个实例 webview

> ID：15742509
> 
> 赞同：0
> 
> 时间：2013-04-01T11:23:58.707
> 
> 标签：android

我想在 android 应用程序中分页 web 的内容。例如，我使用 Flipview 来显示网页内容的每一页，但我不知道如何使用我创建的同一个 webview、加载的 url 来显示在每个 Flipview 页面上。

任何人都建议我！

感谢所有建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:27:41.600

使用 webview.cangoback() 属性。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // Check if the key event was the Back button and if there's history
    if ((keyCode == KeyEvent.KEYCODE_BACK) && myWebView.canGoBack()) {
        myWebView.goBack();
        return true;
    }
    // If it wasn't the Back key or there's no web page history, bubble up to the default
    // system behavior (probably exit the activity)
    return super.onKeyDown(keyCode, event);
} 
```

更多详情请访问。[http://developer.android.com/guide/webapps/webview.html](http://developer.android.com/guide/webapps/webview.html)

希望对你有帮助

# java - 重新读取配置而不重新启动

> ID：15742512
> 
> 赞同：3
> 
> 时间：2013-04-01T11:24:07.370
> 
> 标签：java, architecture, properties, configuration

假设我有一个 Java 应用程序，它使用属性文件作为其配置。现在我想让应用程序*重新读取*配置而不重新启动。我将这种配置称为“可刷新”。

最简单的方法是什么？

假设我正在从头开始开发一个应用程序。我应该如何设计它以使其配置“可刷新”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T11:30:19.043

使用[commons-configuration](http://commons.apache.org/proper/commons-configuration/)可能是最简单的方法。这是一个使用[示例](http://commons.apache.org/proper/commons-configuration/userguide/howto_events.html)。还包括许多其他功能，例如分层配置（默认情况下覆盖）、JDBC 源等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T11:27:41.177

必须有一些类说 ConfigurationReader 它具有读取配置并将它们存储在某个集合中的内存中的方法。确保所有其他类都使用此内存映射的配置信息。

现在您可以进行函数调用以重新读取所有参数并更新内存映射，以便应用程序的其余部分将使用映射中的更新值。这样，您需要更改整个应用程序中的代码。

# connect - 如何在 Live Connect 中使用“限制 Windows 8 应用程序的 JWT 发布选项”？

> ID：15742514
> 
> 赞同：2
> 
> 时间：2013-04-01T11:24:11.290
> 
> 标签：connect, live, jwt

根据 [http://msdn.microsoft.com/en-us/library/live/hh826544.aspx#restrict_jwt](http://msdn.microsoft.com/en-us/library/live/hh826544.aspx#restrict_jwt)上的描述，我仍然不知道如何使用此功能。我的理解是：

1.  我需要创建两个 win8 应用程序。例如，AppA 和 AppB

2.  在配置您的应用程序中使用 Live 服务配置它们。

3.  仅使用重定向 Uri 指定一个应用程序。例如，将“url://appA”指定为 AppA 的重定向 Uri。

4.  确保两个 win8 应用的“Restrict JWT Issuing”选项都设置为“No”

5.  对于 AppB，使用来自 AppA 的重定向 Uri 来初始化 LiveAuthClient 对象： var authClient = new LiveAuthClient("url://appA"); 之后，从 Live connect 到 AppB 的身份验证令牌应该能够被 AppA 的客户端密码解析。但事实证明，认证失败，没有返回认证令牌。

有人可以帮助指出我的理解是否正确。提前致谢。

# android - Android - 从 odata 服务查询所有客户订单

> ID：15742515
> 
> 赞同：0
> 
> 时间：2013-04-01T11:24:26.473
> 
> 标签：android, odata

我有 WCF 数据服务（来自示例 MS Northwidth 数据库），我的 Android 应用程序使用代码从该服务请求数据：

```
NorthdataService service = new NorthdataService();
Query<Customers> query = service.createCustomersQuery("/Customers");
for (Customers cust : query){
        Log.d(log_tag, "Customer Name - " + cust.getCustomerId());
    } 
```

我尝试查询客户订单：

```
Log.d(log_tag, "Orders - " + cust.getOrders()); 
```

并查看订单 - null

我也知道订单上的数据我可以得到一个请求：

```
http://Server:82/northdata.svc/Customers('ALFKI')/Orders 
```

我尝试查询：

```
for (Customers cust : query){
        Log.d(log_tag, "Customer Name - " + cust.getCustomerId());
        String custName = "/Customers" + "('" + cust.getCustomerId() + "')" + "/Orders";
        try{
        Query<Customers> cquery1 = service.createCustomersQuery(custName);
        for (Customers orders : cquery1){
            Log.d(log_tag, "Orders2 - " + orders.toString());
        }
        }
        catch(Exception e){}
    } 
```

我看到结果：

```
Orders2 - northwindmodel.Customers@40b49f68  
Orders2 - northwindmodel.Customers@40c1de10  
Orders2 - northwindmodel.Customers@40bdaea8  
Orders2 - northwindmodel.Customers@40a6d238 
```

如何从一个客户那里获取所有 OrderID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T04:28:53.590

哦是的！我解决了我的“问题”......解决方案非常简单，需要在 FOR 构建订单查询中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:28:21.187

URI ~/Customers('ALFKI')/$links/Products 标识与 Id='ALFKI' 的客户相关的产品集。

# haskell - haskell 代码如何通过重命名删除我的照片？

> ID：15742519
> 
> 赞同：1
> 
> 时间：2013-04-01T11:24:29.793
> 
> 标签：haskell

你好这是我的第一个haskell代码

```
import Data.List
import Data.Function

import System.IO
import System.Directory
import System.FilePath.Windows

import Control.Monad
import Text.Printf

main = do

    all <- getDirectoryContents "."
    cd  <- takeBaseName `fmap` getCurrentDirectory
    let sorted    = zip[1..] . sort . filter ((isPrefixOf `on` reverse) ".jpg") $ all

    forM_ sorted $ \(i,x) -> do

        let z = if odd i then 1 else 2
        let q = ceiling (fromIntegral i / 2.0 )

        printf "  %s --> %s.%d.%d.jpg\n" x cd (q::Int) (z::Int)
        renameFile x (printf "%s.%d.%d.jpg" cd (q::Int) (z::Int)) 
```

但它的效果真的很糟糕

```
D:\Contrib\rnm\bin>rnm.exe
  bin.1.1 - копия (10).jpg --> bin.1.1.jpg
  bin.1.1 - копия (11).jpg --> bin.1.2.jpg
  bin.1.1 - копия (12).jpg --> bin.2.1.jpg
  bin.1.1 - копия (13).jpg --> bin.2.2.jpg
  bin.1.1 - копия (14).jpg --> bin.3.1.jpg
  bin.1.1 - копия (15).jpg --> bin.3.2.jpg
  bin.1.1 - копия (16).jpg --> bin.4.1.jpg
  bin.1.1 - копия (17).jpg --> bin.4.2.jpg
  bin.1.1 - копия (18).jpg --> bin.5.1.jpg
  bin.1.1 - копия (19).jpg --> bin.5.2.jpg
  bin.1.1 - копия (2).jpg --> bin.6.1.jpg
  bin.1.1 - копия (3).jpg --> bin.6.2.jpg
  bin.1.1 - копия (4).jpg --> bin.7.1.jpg
  bin.1.1 - копия (5).jpg --> bin.7.2.jpg
  bin.1.1 - копия (6).jpg --> bin.8.1.jpg
  bin.1.1 - копия (7).jpg --> bin.8.2.jpg
  bin.1.1 - копия (8).jpg --> bin.9.1.jpg
  bin.1.1 - копия (9).jpg --> bin.9.2.jpg
  bin.1.1 - копия.jpg --> bin.10.1.jpg
  bin.1.1.jpg --> bin.10.2.jpg

D:\Contrib\rnm\bin>rnm.exe
  bin.1.2.jpg --> bin.1.1.jpg
  bin.10.1.jpg --> bin.1.2.jpg
  bin.10.2.jpg --> bin.2.1.jpg
  bin.2.1.jpg --> bin.2.2.jpg
  bin.2.2.jpg --> bin.3.1.jpg
  bin.3.1.jpg --> bin.3.2.jpg
  bin.3.2.jpg --> bin.4.1.jpg
  bin.4.1.jpg --> bin.4.2.jpg
  bin.4.2.jpg --> bin.5.1.jpg
  bin.5.1.jpg --> bin.5.2.jpg
  bin.5.2.jpg --> bin.6.1.jpg
  bin.6.1.jpg --> bin.6.2.jpg
  bin.6.2.jpg --> bin.7.1.jpg
  bin.7.1.jpg --> bin.7.2.jpg
  bin.7.2.jpg --> bin.8.1.jpg
  bin.8.1.jpg --> bin.8.2.jpg
  bin.8.2.jpg --> bin.9.1.jpg
  bin.9.1.jpg --> bin.9.2.jpg
  bin.9.2.jpg --> bin.10.1.jpg

D:\Contrib\rnm\bin>rnm.exe
  bin.1.1.jpg --> bin.1.1.jpg
  bin.1.2.jpg --> bin.1.2.jpg
  bin.10.1.jpg --> bin.2.1.jpg 
```

此代码如何删除我的照片？我该如何修复它？谢谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T11:54:10.753

> 此代码如何删除我的照片？

文档`renameFile`说：

> `renameFile old new`将现有文件系统对象的名称从`old`更改为`new`。如果`new`对象已经存在，它会被`old`对象原子地替换。

所以在第二步，当你重命名时`bin.10.2.jpg --> bin.2.1.jpg`，旧`bin.2.1.jpg`文件会丢失。当你以后有的时候`bin.2.1.jpg --> bin.2.2.jpg`，你正在重命名以前的文件`bin.10.2.jpg`并丢失旧的文件`bin.2.2.jpg`。等等。

> 我该如何修复它？

使用不能与现有文件或临时文件夹冲突的临时名称。

# c# - Gridview中的多列排序？

> ID：15742521
> 
> 赞同：2
> 
> 时间：2013-04-01T11:24:44.403
> 
> 标签：c#, asp.net, gridview, datagrid, grid

嗨，我想在 gridview 中对多列进行排序，如此处所示 [.net GridView 的分层（多列）排序？](https://stackoverflow.com/questions/1429261/hierarchical-multi-column-sorting-for-the-net-gridview)

我做了我的家庭作业我的 aspx 看起来像

```
<%@ Page Language="C#" AutoEventWireup="True" CodeBehind="Default.aspx.cs" Inherits="_Default" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" >
<head id="Head1" runat="server">
    <title>Multiple sorting with Gridview</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="True" 
            AllowSorting="true" onsorting="GridView1_Sorting" style="margin-right: 541px" 
            Width="873px">
        </asp:GridView>
        <p><asp:Label runat="server" ID="lblSortExpression" /></p>
    </div>
    </form>

</body>
</html> 
```

在我的 Aspx.cs 页面中

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Data;
using System.Diagnostics;
using System.Collections.Specialized;
using System.Text;
using System.Web.UI.WebControls;
using System.Data.SqlClient;

partial class _Default : System.Web.UI.Page
{

    private ListDictionary m_ldSortExpression;
    private ListDictionary SortExpressions
    {
        get
        {
            m_ldSortExpression = (ListDictionary)ViewState["SortExpressions"];
            if (m_ldSortExpression == null)
            {
                m_ldSortExpression = new ListDictionary();
            }
            return m_ldSortExpression;
        }
        set { ViewState["SortExpressions"] = value; }
    }

    protected void Page_Load(object sender, System.EventArgs e)
    {
        if (!IsPostBack)
        {
            BindData();
        }
    }

    public void BindData()
    {
        // Usually you would get the data from the database.
        // To simplify the code, I will just fill a datatable with some standard data.
        DataTable dt = new DataTable();
        dt.Columns.Add("FirstName");
        dt.Columns.Add("LastName");
        dt.Columns.Add("Age");
        dt.Columns.Add("Position");

        dt.Rows.Add(new object[] {
            "1",
            "2",
            28,
            "5"
        });
        dt.Rows.Add(new object[] {
            "2",
            "8",
            31,
            "2"
        });
        dt.Rows.Add(new object[] {
            "2",
            "4",
            31,
            "4"
        });
        dt.Rows.Add(new object[] {
            "3",
            "7",
            37,
            "3"
        });
        dt.Rows.Add(new object[] {
            "4",
            "4",
            40,
            "1"
        });

        DataView dv = dt.DefaultView;
        // use a stringbuilder to hold the sortexpression for the dataview
        StringBuilder sbSortExpression = new StringBuilder();
        if (SortExpressions.Count > 0)
        {
            string[] myKeys = new string[SortExpressions.Count + 1];
            SortExpressions.Keys.CopyTo(myKeys, 0);
            for (int i = 0; i <= SortExpressions.Count - 1; i++)
            {
                sbSortExpression.Append(myKeys[i]);
                sbSortExpression.Append(" ");
                sbSortExpression.Append(SortExpressions[myKeys[i]]);
                if (i != SortExpressions.Count - 1)
                {
                    sbSortExpression.Append(", ");
                }

            }
            lblSortExpression.Text = sbSortExpression.ToString();

            // usually we would send that sort-expression now to SQL via some stored-procedure
            dv.Sort = sbSortExpression.ToString();
        }
        else
        {
            lblSortExpression.Text = string.Empty;
        }

        GridView1.DataSource = dv;
        GridView1.DataBind();
        PositionGlyph(GridView1, dv.Sort.ToString(), dt);

    }

    private void PositionGlyph(GridView GridView1, string p,DataTable dt)
    {
        if ((GridView1.Rows.Count == 0) || (string.IsNullOrEmpty(p)))
            return;

        Image glyph = new Image();
        glyph.EnableTheming = false;

        string[] words = p.Split(',');

        foreach (string word in words)
        {
            string[] SortType = word.Split(' ');
            if (SortType[SortType.Length - 1] == SortOrder.Ascending.ToString().Substring(0, 3).ToUpper())
                glyph.ImageUrl = "~/Images/down_arrow.png";

            else
                glyph.ImageUrl = "~/Images/up_arrow.png";

            int columnindex = dt.Columns[SortType[SortType.Length - 2].ToString()].Ordinal;
            GridView1.HeaderRow.Cells[columnindex].Controls.Add(glyph);
            //for (int x = 0; x < dt.Columns.Count; x++)
            //{
            //    if (SortType[SortType.Length - 2].ToString()== dt.Columns[x].ColumnName)
            //    {
            //        GridView1.HeaderRow.Cells[x].Controls.Add(glyph);
            //        break;
            //    }
            //}

        }

    }

    protected void GridView1_Sorting(object sender, System.Web.UI.WebControls.GridViewSortEventArgs e)
    {
        m_ldSortExpression = SortExpressions;

        if (!m_ldSortExpression.Contains(e.SortExpression))
        {
            m_ldSortExpression.Add(e.SortExpression, e.SortDirection.ToString().Replace("Ascending", "ASC").Replace("Descending", "DESC"));
        }
        else
        {
            // Get sort direction
            string strSortDirection = m_ldSortExpression[e.SortExpression].ToString();
            // Was it ascending?
            if (strSortDirection == "ASC")
            {
                // Yes, so sort in desc
                m_ldSortExpression[e.SortExpression] = "DESC";
            }
            else if (strSortDirection == "DESC")
            {
                // it is descending
                // remove the sort order
                m_ldSortExpression.Remove(e.SortExpression);
            }
        }

        SortExpressions = m_ldSortExpression;
        BindData();
    }
    public _Default()
    {
        Load += Page_Load;
    }

} 
```

一切正常，即使多次排序，但列标题中的排序箭头未正确显示。我认为问题出在 PositionGlyph Method.Asc 或 Desc 箭头仅显示最后单击的标题。我想显示所有列的排序方向。请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:22:12.483

Use This:

```
DataView m_DataView = new DataView(dt);
m_DataView.Sort =ColumnName1 + " ASC, " + ColumnName2 + " ASC, " + ColumnName3 + " ASC"; 
```

Hope this help.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:16:13.427

您可以在 RowCreated 事件中显示用于对 gridview 列进行排序行为的箭头，就像这样我通常这样做

```
protected void GridView1_RowCreated(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.Header)
    {
        foreach (TableCell tc in e.Row.Cells)
        {
            if (tc.HasControls())
            {
                // search for the header link
                LinkButton lnk = (LinkButton)tc.Controls[0];
                if (lnk != null && GridView1.SortExpression == lnk.CommandArgument)
                {
                    // inizialize a new image
                    System.Web.UI.WebControls.Image img = new System.Web.UI.WebControls.Image();
                    // setting the dynamically URL of the image
                    img.ImageUrl = "~/img/ico_" + (GridView1.SortDirection == SortDirection.Ascending ? "asc" : "desc") + ".gif";
                    // adding a space and the image to the header link
                    tc.Controls.Add(new LiteralControl(" "));
                    tc.Controls.Add(img);

                }
            }
        }
    }
} 
```

它还可以在列的升序和降序排序上切换图像

代码实际上做的是循环遍历 GridView Header 以搜索 LinkBut​​ton（仅当设置了 SortExpression 属性时，框架才会创建它）。然后，如果找到的 LinkBut​​ton 是排序字段，那么它将图像显示到输出，仅此而已

请看这个[样本](http://www.aspdotnet-suresh.com/2011/02/how-to-show-up-and-down-arrows-during.html)

# html - 填充权不起作用

> ID：15742524
> 
> 赞同：2
> 
> 时间：2013-04-01T11:25:01.467
> 
> 标签：html

我有这样的代码

```
 <div style="background-color: greenyellow; color: black">
        <span style="padding-left:20%">T1</span>
        <span style="padding-right:10%">2</span>
    </div> 
```

目前它是这样显示的。![现在的情况](https://i.stack.imgur.com/4ley7.png) 这里填充权不起作用。应该是 2 应该从这个 div 的右侧填充 10%。是否有任何其他样式标签可以从右侧提供此类填充。![所需输出](https://i.stack.imgur.com/AmdDR.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T11:31:37.320

默认情况下，内联元素呈现为从左到右对齐，除非您`float`为它们指定属性。

这意味着，在给定的水平线上，首先`span T1`将呈现邻近父级的左边框，然后`span 2`将呈现邻近于`span T1`.

所以，你的 padding-right 永远不会被使用，因为最后一个跨度已经远离右边界，除非你让它向右移动`float:right`或给它一个`margin`

试试这个：

```
 <div style="background-color: greenyellow; color: black">
        <span style="padding-left:20%">T1</span>
        <span style=" float:right; padding-right:10%;">2</span>
    </div> 
```

看到这个[小提琴](http://jsfiddle.net/px5Xn/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T11:31:43.573

这将产生预期的效果

```
<span style="float:right; margin-right:10%">2</span> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T11:35:34.427

用这个：-

```
<span style="float:right; padding-right:10%">2</span> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T13:21:50.150

上述贡献者的解释很好，但你也可以试试这个：

```
<div style="background-color: greenyellow; color: black">
    <span style="padding-left:20%">T1</span>
    <span style="padding-right:10%;padding-left:60%">2</span>
</div> 
```

事实上，这是关于如何采用 CSS 的结构，如果我们考虑 Manish 提到的从左到右的优先级，我们还可以通过插入 60% 的左填充来调整我们的要求。

所以，这个问题可以通过两种方式解决，如果你想在“T1”和“2”之间调整一些东西，你应该使用我的一个，否则两者都可以。

希望你明白了。

# c# - 在 if 语句中使用方法调用程序

> ID：15742525
> 
> 赞同：1
> 
> 时间：2013-04-01T11:25:02.243
> 
> 标签：c#, multithreading, listbox, method-invocation

我要做的是检查是否选择了列表框中的项目。

该方法正在一个单独的线程上运行，所以我需要使用我相信的方法调用程序。

```
string list = "";
lbxList.Invoke(new MethodInvoker(delegate { list = lbxList.SelectedItem.ToString(); }));

if (list != null)
{
 //do something
} 
```

如果所选项目为空，则此代码将爆炸，因为字符串列表不会保存它，因此我需要一种方法将前 2 行组合成一个 if 语句来检查是否为空。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T11:28:12.160

这应该这样做：

```
string list = "";
lbxList.Invoke(new MethodInvoker(delegate
{
    if (lbxList.SelectedItem != null)
        list = lbxList.SelectedItem.ToString();
}));

//do something 
```

只需将 if 语句放在匿名方法中即可。

请注意，`.ToString`极*不可能*返回`null`任何东西，覆盖类型应实现该方法以返回*有意义*值[的状态的文档。`object.ToString`](http://msdn.microsoft.com/en-us/library/system.object.tostring.aspx)由于我们已经知道它不是 null，因此检查 null 并不是真正必要的。如果你真的想要，你可以留下它，但如果你害怕它应该返回 null，我会改为将代码更改为：*`.SelectedItem``.ToString`*

 *```
string list = "";
lbxList.Invoke(new MethodInvoker(delegate
{
    if (lbxList.SelectedItem != null)
        list = lbxList.SelectedItem.ToString() ?? string.Empty;
}));

//do something 
```*

# maven-plugin - maven-jarsigner-plugin 输入密钥库的密码

> ID：15742533
> 
> 赞同：0
> 
> 时间：2013-04-01T11:25:23.087
> 
> 标签：maven-plugin

我正在使用 maven-jarsigner-plugin 来签署我的 applet jar。当我运行“maven clean install”时，我的构建失败并出现以下错误。

```
                [调试] 'cmd.exe /X /C ""C:\Program Files\Java\jdk1.6.0_33\jre\..\bin\jarsigner.exe" -keystore mykeystore -keypass '*****' C :\myproject\target\myapplet-1.0.0.jar 小程序"'
                [INFO] jarsigner：您必须输入密钥密码
                [警告] 输入密钥库的密码：

```

以下是我的 Maven 配置。

```
 <plugin>
            <artifactId>maven-jarsigner-plugin</artifactId>
            <version>1.2</version>
            <executions>
                <execution>
                    <id>sign</id>
                    <phase>install</phase>
                    <goals>
                        <goal>sign</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>         
                <keystore>mykeystore</keystore>
                <alias>myapplet</alias>
                <keypass>mykeypass</keypass>                    
            </configuration>
            </plugin> 
```

我可以看到它提示输入密码。

请让我知道我在此配置中遗漏了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-03T20:11:04.500

你失踪了吗

```
<storepass>mystorepass</storepass> 
```

在

```
<configuration>         
     <keystore>mykeystore</keystore>
     <alias>myapplet</alias>
     <keypass>mykeypass</keypass>
     <storepass>mystorepass</storepass>                     
</configuration> 
```

?

# php - 获取在特定日期有多少用户推荐了其他用户

> ID：15742534
> 
> 赞同：0
> 
> 时间：2013-04-01T11:25:26.250
> 
> 标签：php, sql, refer

我已经有这个问题很长一段时间了！我在数据库中有“Ref”，显示哪些用户被推荐，“varvade_antal”显示我招募了多少。我想找出所有在给定日期招募超过 0 的用户，只要我的代码是这样的：

```
<?php

    $sql = "SELECT * FROM users WHERE date >= '2013-03-01' AND date < '2013-04-29' + INTERVAL 1 DAY";
    $result = mysql_query($sql) or die(mysql_error());

    while($row = mysql_fetch_array($result)){

    if($row['ref'] == '0') {

    } else {

    $sd = "SELECT * FROM users WHERE id = '{$row['ref']}'";
    $df = mysql_query($sd) or die(mysql_error());

    while($dfs = mysql_fetch_array($df)){

        echo "{$dfs['firstname']}: {$dfs['varvade_antal']} st<br>"; 

   }}}
?> 
```

现在它会显示我招募了多少个实例，但它显示了它的副本，如下所示：

约翰招聘6人 约翰招聘6人 约翰招聘6人 约翰招聘6人 约翰招聘6人 约翰招聘6人

所以，当你招募了 6 个人时，它也会打印 6 次！但事实并非如此。帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:28:43.127

将此查询与`DISTINCT`

```
$sql = "SELECT DISTINCT * FROM users WHERE date >= '2013-03-01' AND date < '2013-04-29' + INTERVAL 1 DAY"; 
```

# sql - SQL删除编号最小的重复行

> ID：15742536
> 
> 赞同：5
> 
> 时间：2013-04-01T11:25:39.980
> 
> 标签：sql, sql-server, duplicate-removal

我找不到合适的方法来删除 sql 表中编号最小的重复键。如果有相同编号的重复行，我需要删除其中一个。

例如

```
Key     Number  Description

11111   5   Desc1
11111   4   Desc2
22222   2   Desc1
22222   2   Desc2
33333   3   Desc1
33333   5   Desc2 
```

在这里，我需要删除编号为 4 的第二行，它小于编号 5，第三行或第四行之一，第五行的编号 3 小于最后一行 5。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T11:32:10.597

查询以删除 SQL-Server 中的重复项：

```
;with c as
(
    select *, row_number() over(partition by [Key] order by Number desc) as n
    from YouTable
)
delete from c
where n > 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T12:16:04.520

```
DELETE FROM ztable dd
WHERE EXISTS (
  SELECT * FROM ztable ex
  WHERE ex.zkey = dd.zkey
  AND (ex.znumber > dd.znumber
       OR (ex.znumber = dd.znumber AND ex.description > dd.description)
       )
  ); 
```

注意：我将 key 和 number 重命名为 zkey 和 znumber 以避免与保留字/关键字混淆。ztable 类似。

# perl - 忽略不存在网页的 GET 错误

> ID：15742544
> 
> 赞同：1
> 
> 时间：2013-04-01T11:26:02.087
> 
> 标签：perl, get, www-mechanize

我`WWW::Mechanize`用来获取和处理网页。我有一段代码，它循环浏览网页列表。它看起来大约是这样的：

```
while (<$readFileHandle>) {
    $mech->get("$url");
} 
```

现在，当列表中的某个网页由于某种原因不存在时（没关系），就会出现问题。问题是在这种情况下 - 程序返回错误并退出。错误如下所示：

```
Error GETing <url> Not Found at <PATH/file.pl> line ... 
```

我怎样才能忽略这种类型的错误？我希望程序继续运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T12:35:29.237

您需要为此使用`eval {};`：

```
while ( my $url = readline($readFileHandle) ) {
    chomp $url;
    eval {
        $mech->get($url);
    };
    if ($@) {
      #error processing code
    }
} 
```

# java - 用于 Java 的 OpenGL 数学 (GLM) 端口

> ID：15742545
> 
> 赞同：6
> 
> 时间：2013-04-01T11:26:02.177
> 
> 标签：java, opengl, lwjgl, glm-math

[GLM 库](http://glm.g-truc.net/)是否有任何 Java 端口？我正在使用 LWJGL，但我缺少 GLM 的一些不错的功能。

我在[这个](https://stackoverflow.com/a/14875512/663068)答案中看到了关于端口的提及，但我不知道如何联系写答案的人（stackoverflow 上没有消息，不可能对已关闭的问题添加评论）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:54:16.070

将 GLM 移植到 Java 并没有什么意义——它在很大程度上是一个“C++”库。

[这个 Github repo](https://github.com/jroyalty/jglm/)（通过谷歌搜索“glm java port opengl matrix”找到）声称是一个“概念”端口。你的旅费可能会改变。

# c# - 如何按日期对列表框项目进行分组

> ID：15742547
> 
> 赞同：0
> 
> 时间：2013-04-01T11:26:09.473
> 
> 标签：c#, silverlight, windows-phone-7, xaml

我正在尝试做简单的任务应用程序。我有截止日期的任务，我想这样显示：

![这就是我要的](https://i.stack.imgur.com/VsKg8.png)

我知道如何在列表框中显示数据，但我不知道如何按 DueDate 对它们进行分组并显示 DueDates 之类的标题（如下图所示）。

这是我的带有任务的 XML 文件 (tasks.xml)：

```
<?xml version="1.0" encoding="utf-8"?>
<Tasks>
  <Task>
    <Name>first task</Name>
    <DueDate>05/03/2013 00:00:00</DueDate>
    <Created>03/27/2013 01:24:08</Created>
  </Task>
  <Task>
    <Name>second task</Name>
    <DueDate>05/17/2013 00:00:00</DueDate>
    <Created>03/27/2013 01:24:19</Created>
  </Task>
  <Task>
    <Name>third task</Name>
    <DueDate>05/17/2013 00:00:00</DueDate>
    <Created>03/27/2013 01:24:38</Created>
  </Task>
</Tasks> 
```

这是我的数据模型（MainViewModel.cs）：

```
public class MainViewModel : INotifyPropertyChanged
{
    public ObservableCollection<Task> Tasks { get; private set; }

    public MainViewModel()
    {
        this.Tasks = new ObservableCollection<Task>();
    }

    public bool IsDataLoaded
    {
        get;
        private set;
    }

    public void LoadData()
    {
        try
        {
            Tasks.Clear();

            var file = IsolatedStorageFile.GetUserStoreForApplication();
            XElement xElem;

            using (IsolatedStorageFileStream read = file.OpenFile("tasks.xml", FileMode.Open))
            {
                xElem = XElement.Load(read);
            }

            var tasks = from task in xElem.Elements("Task")
                        select task;

            foreach (XElement xElemItem in tasks)
            {
                string dueDate = "";
                DateTime convertedDate;

                if (DateTime.TryParse(xElemItem.Element("DueDate").Value.ToString(), out convertedDate))
                {
                    dueDate = convertedDate.ToShortDateString();
                }

                Tasks.Add(new Task
                {
                    Name = xElemItem.Element("Name").Value.ToString(),
                    DueDate = dueDate,
                    Created = xElemItem.Element("Created").Value.ToString()
                });
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }

        this.IsDataLoaded = true;
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(String propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (null != handler)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:35:49.847

我个人会使用[Silverlight Toolkit for Windows Phone](http://phone.codeplex.com/)中的 LongListSelector 控件。

这是一个很好的[介绍](http://www.geekchamp.com/articles/wp7-longlistselector-in-depth--part1-visual-structure-and-api)，也是您正在寻找的[数据绑定和分组指南。](http://www.geekchamp.com/articles/wp7-longlistselector-in-depth--part2-data-binding-scenarios)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:39:11.720

而不是一个`ListBox`使用两个 - 第二个应该在`ItemTemplate`第一个中使用。

使用这种方法，您的外部`ListBox`模板应该包含标题（组日期）和内部`ListBox`。里面的应该有项目。

使用这种方法，您必须重新设计后面的代码以包含分组数据。

我建议`GroupOfTasks`上课：

```
public class GroupOfTasks : INotifyPropertyChanged
{
    public string Date { get; set; }
    public string ObservableCollection<Task> { get; set; }

    // you have to implement INotifyPropertyChanged by yourself.
} 
```

并`LoadData`重新设计：

```
public ObservableCollection<GroupOfTasks> Groups { get; private set; }

public void LoadData()
{
    try
    {
        Groups.Clear();

        (...)

        Groups = (from t in tasks
                  group t by t.DueDate into g
                  select new GroupOfTasks { Date = g.Key, Items = g.ToList() }).ToList();
    }
} 
```

使用`Groups`属性将您的第一个绑定`ListBox`到该属性，将内部绑定到`Items`当前外部的属性`ListBox` `Item`。

这一切都只是一个提示，以显示可能的方法。

# mongodb - 在不重启 mongod 的情况下设置 replSet

> ID：15742550
> 
> 赞同：0
> 
> 时间：2013-04-01T11:26:15.817
> 
> 标签：mongodb, replication, mongohq

有什么方法可以在`replSet`不重新启动的情况下分配`mongod`？[MongoDB Doc](http://docs.mongodb.org/manual/tutorial/deploy-replica-set/)说我们应该重新启动 mongo 并分配一些参数，但是我正在使用 MongoHQ 的服务（通过 Heroku），我找不到设置`replSet`. 我该怎么做？

# javascript - 如何让 prettyprint 处理动态生成的 dom 元素

> ID：15742551
> 
> 赞同：7
> 
> 时间：2013-04-01T11:26:16.210
> 
> 标签：javascript, pretty-print

我使用[prettyprint](http://google-code-prettify.googlecode.com/svn/trunk/README.html)插件作为语法荧光笔，它在页面加载时工作正常，但是当我动态添加新元素时它不起作用！我尝试`prettyPrint()`在加载新内容后使用它来调用它，但它不起作用！我还按照插件网站上的说明包装`prettyPrint()`了一个函数，但它也不起作用！任何帮助将非常感激。我这样安装插件：

```
<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script> 
```

我的代码是：

```
function showCode(e){
    (e.preventDefault) ? e.preventDefault() : e.returnValue = false;
    var parent = document.createElement('div'),
        pre = document.createElement('pre'),
        code = document.createElement('code'),
        elm = (e.currentTarget) ? e.currentTarget : e.srcElement,
        src = elm.getAttribute('href'),
        id = elm.getElementsByTagName('img')[0].getAttribute('src').replace(/images\/(.+?)\.png/g, "$1");
    parent.id = "codeZoom";
    pre.className = "prettyprint linenums lang-" + id;

    var xhr = (window.XMLHttpRequest) ? new window.XMLHttpRequest() : new activeXObject("Microsoft.XMLHTTP");
    xhr.open('get', src, true);
    xhr.send();
    xhr.onreadystatechange = function()
    {
        if(xhr.readyState == 4 && xhr.status == 200)
        {
            var text = document.createTextNode(xhr.responseText);
            code.appendChild(text);
            pre.appendChild(code);
            parent.appendChild(pre);
            document.getElementsByTagName('body')[0].appendChild(parent);
            center(parent);
            prettyPrint();
        }
    }
} 
```

目前我收到错误消息 prettyPrint 未定义。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T12:26:53.393

据我所知，您的代码似乎是正确的。

1）包括漂亮**的打印（不是run_xxx）版本**

2) 每当你的 Dom 更新时调用 prettyPrint()

但是，您包含 prettyPrint 的脚本缺少一个结束符“，所以也许这只是您的问题的一个错字:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-06T13:34:36.530

当 prettyprint() 执行时，它会将“prettyprinted”类添加到容器元素中。我想它不会很好地打印两次，可能会破坏一些东西。

您只需要在再次运行 prettyprint() 之前删除该类。

```
$('#my_element').removeClass('prettyprinted');
prettyPrint(); 
```

# asp.net - 数据表只加载mysqlDataReader的最后一条记录

> ID：15742557
> 
> 赞同：0
> 
> 时间：2013-04-01T11:26:28.590
> 
> 标签：asp.net

在我的页面中，mysqlDataReader 返回 4 条记录。每当我将此 mysqlDataReader 加载到 DataTable 时，使用

```
DataTable dt = new DataTable();
dt.Clear();
dt.Load(dr); 
```

DataTable 仅显示最后一条记录。

我的代码是：

```
DataTable dt = new DataTable();
for (int i = 0; i < gvDemoBatches.Rows.Count; i++)
{
     CheckBox cb = (CheckBox)gvDemoBatches.Rows[i].FindControl("checkSelect");
     if (cb.Checked == true)
     {
         Panel2.Visible = true;
         objBEBatch.BatchID = Convert.ToInt32(((Label)gvDemoBatches.Rows[i].Cells[0].FindControl("lblBatchId")).Text);
          MySqlDataReader dr = objBLAddNewDemo.GetParticularDemoData(objBEBatch);
         dt.Clear();
         dt.Load(dr);
      }
 } 
```

“GetParticularDemoData”存储过程返回 7 行。但数据表仅显示最后一条记录。

在此先感谢，拉特南。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:33:32.723

首先请编写正确/完整的代码，以便人们理解！根据您的代码， dr 是一个数据行，并且 dr 一次将包含一行，看来您可能已经将 dr 循环了，所以最后它只包含最后一条记录。

所以你的数据表显示最后一条记录。！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:32:29.817

看起来您正在通过在每次迭代中清除表格来迭代您的阅读。尝试改用 DataAdapter

```
 var adapter = new SqlDataAdapter(query);
 adapter.Fill(dt); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:18:28.327

您正在循环内向数据表添加行。所以最后一个循环记录将保存在数据表中

```
for (int i = 0; i < gvDemoBatches.Rows.Count; i++)
{ 
```

将执行多次，在这里面你有

```
 MySqlDataReader dr = objBLAddNewDemo.GetParticularDemoData(objBEBatch);
 dt.Clear();
 dt.Load(dr); 
```

因此数据表将仅包含`gridview`where的最后一行的数据`cb.Checked == true)`

# java - 将 Object 的实例转换为原始类型或 Object 类型

> ID：15742560
> 
> 赞同：6
> 
> 时间：2013-04-01T11:26:43.843
> 
> 标签：java, casting, primitive-types, object-type

当我需要将类型的实例`Object`转换为 double 时，以下哪个更好，为什么？

`Double d = (Double) object;`

或者

`double d = (double) object;`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-01T11:29:03.323

不同之处在于，如果为 null，则第一种形式将成功`object`-第二种将抛出`NullPointerException`. 因此，如果它为`object`null 有效，请使用第一个 - 如果这表示错误条件，请使用第二个。

这：

```
double d = (double) object; 
```

相当于：

```
Double tmp = (Double) object;
double t = tmp.doubleValue(); 
```

（或者只是`((Double)object).doubleValue()`为了清楚起见，我喜欢将这两个操作分开。）

请注意，转换为仅在 Java 7 下有效——尽管从[Java 7 语言增强页面](http://docs.oracle.com/javase/7/docs/technotes/guides/language/enhancements.html)`double`中不清楚为什么这是真的。

# java - log4j INFO 级别不记录信息

> ID：15742561
> 
> 赞同：1
> 
> 时间：2013-04-01T11:26:50.553
> 
> 标签：java, logging, log4j

我正在为我的项目使用 log4j ogging。不幸的是，我无法在我手动记录的应用程序中记录信息级别..尽管它完美地记录了数据库日志！

这是我的属性文件：

```
log4j.rootLogger=OFF

log4j.appender.serviceLog=org.apache.log4j.RollingFileAppender
log4j.appender.serviceLog.File=C:/Users/prateekg/Desktop/log4j/log

log4j.appender.dbLog=org.apache.log4j.RollingFileAppender
log4j.appender.dbLog.File=C:/Users/prateekg/Desktop/log4j/dbLog

log4j.appender.serviceLog.MaxFileSize=1MB
log4j.appender.serviceLog.MaxBackupIndex=1

log4j.appender.serviceLog.layout=org.apache.log4j.PatternLayout
log4j.appender.serviceLog.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n

log4j.appender.dbLog.layout=org.apache.log4j.PatternLayout
log4j.appender.dbLog.layout.ConversionPattern=%d{yyyy-MM-dd HH:mm:ss} %-5p %c{1}:%L - %m%n

log4j.category.serviceLog=INFO,serviceLog
log4j.category.org.springframework.jdbc=DEBUG, dbLog 
```

编辑：

这是我的日志代码：

```
public static Logger logger = Logger.getLogger(Controller.class);
Boolean commit=false;
public Controller(DashBoardDAO dao,MessageProcessor mp, HandlerFactory hf, ToXML xml)
{
    this.dao=dao;
    this.mp=mp;
    this.hf=hf;
    this.xml=xml;
    PropertyConfigurator.configure("log4j.properties");
}

public Boolean controlFlow(Message message)
{
    Handler handler=null;
    String data[]=null;
    Boolean flag=false;

    int count=0;

    handler=initializeHandlerFactory(message);
    data=getMessage(handler,message);
    flag=validate(data);
    count=getEventCount(data);
    //commit=mp.flag1;
    //System.out.println("The flag is "+flag);

    if(flag)
    {
        System.out.println("inside flag");
        String elementNames[]=dao.getElementNames(Integer.parseInt(data[0]));
        System.out.println("No of tags "+elementNames.length);
        logger.info("No of tags in the generated XML is "+elementNames.length);
        File xmlFile=xml.convertToXML(elementNames, data);
        logger.info("Temporary XML File created");
        logger.info("Data sent for insertion");
        dao.insert(count, data,xmlFile);
        Boolean f=xmlFile.delete();
        System.out.println("Temp XML file Deleted: "+f);
        if(f)
        {
        logger.info("Temporary XML File deleted");
        commit=mp.flag1;
        }
        else
            logger.info("Error in deleting temporary XML File");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:58:18.153

您需要将记录器定义为`Logger.getLogger("serviceLog")`或定义与您的类匹配的自定义附加程序

```
log4j.category.my.package.Controller=INFO,serviceLog 
```

或您的包裹

```
log4j.category.my.package=INFO,serviceLog 
```

`PropertyConfigurator.configure("log4j.properties");`此外，不需要调用，因为这是 log4j 在启动时查找的默认配置文件名。

# java - 图形的仿射变换，而不是文本和标签

> ID：15742563
> 
> 赞同：4
> 
> 时间：2013-04-01T11:26:53.293
> 
> 标签：java, javafx-2, transform, java-canvas

这篇文章是我对一个问题的回答的一个套件：[Transforming a shape](https://stackoverflow.com/questions/15734388/transforming-a-shape)

这是我想要的图像：

![文字是水平的](https://i.stack.imgur.com/TwyQi.png)

这是一个简单程序生成的图像，您可以看到文本已旋转。我想要水平文本：

![文字旋转](https://i.stack.imgur.com/Wguuq.png)

画布被缩放、平移、旋转以进行绘图，因此文本不会水平显示并且字体大小需要大大减小（1.4）。该程序是用 Java（awt 和 JavaFX）编写的，但问题与语言或技术无关，因此欢迎提出任何建议。

这是一个简单的程序：

```
import javafx.application.Application;
import javafx.geometry.VPos;
import javafx.scene.Scene;
import javafx.scene.canvas.Canvas;
import javafx.scene.canvas.GraphicsContext;
import javafx.scene.layout.BorderPane;
import javafx.scene.paint.Color;
import javafx.scene.text.Font;
import javafx.scene.text.TextAlignment;
import javafx.stage.Stage;

public class TransRotScale extends Application {

   private static void drawGraph( GraphicsContext g ) {
      //---
      g.scale( 10.0, 10.0 );
      g.rotate( Math.toDegrees( Math.atan2( -15.0, 40.0 )));
      g.translate( -8, -10 );
      //---
      g.setStroke( Color.DARKRED );
      g.setLineWidth( LINE_WIDTH );
      g.strokeLine( 10, 20, 10, 30 );
      g.strokeLine( 10, 30, 50, 30 );
      g.strokeLine( 50, 30, 50, 35 );
      //---
      g.setFill( Color.BLACK );
      g.fillOval( 50-ENDPOINT_RADIUS, 35-ENDPOINT_RADIUS,
         ENDPOINT_DIAMETER, ENDPOINT_DIAMETER );
      g.fillOval( 10-ENDPOINT_RADIUS, 20-ENDPOINT_RADIUS,
         ENDPOINT_DIAMETER, ENDPOINT_DIAMETER );
      //---
      g.setFill( Color.LIGHTSALMON );
      g.fillOval( 10-ENDPOINT_RADIUS, 30-ENDPOINT_RADIUS,
         ENDPOINT_DIAMETER, ENDPOINT_DIAMETER );
      g.fillOval( 50-ENDPOINT_RADIUS, 30-ENDPOINT_RADIUS,
         ENDPOINT_DIAMETER, ENDPOINT_DIAMETER );
      //---
      g.setStroke( Color.DARKGRAY );
      g.setFont( Font.font( Font.getDefault().getFamily(), 1.4 ));
      g.setLineWidth( 0.1 );
      g.setTextAlign( TextAlignment.CENTER );
      g.setTextBaseline( VPos.BOTTOM );
      g.strokeText( "[10, 20]", 10, 20-ENDPOINT_RADIUS );
      g.setTextBaseline( VPos.TOP );
      g.strokeText( "[10, 30]", 10, 30+ENDPOINT_RADIUS );
      g.setTextBaseline( VPos.BOTTOM );
      g.strokeText( "[50, 30]", 50, 30-ENDPOINT_RADIUS );
      g.setTextBaseline( VPos.TOP );
      g.strokeText( "[50, 35]", 50, 35+ENDPOINT_RADIUS );
   }

   @Override
   public void start( Stage primaryStage ) throws Exception {
      BorderPane bp = new BorderPane();
      Canvas canvas = new Canvas( 540, 240 );
      bp.setCenter( canvas );
      drawGraph( canvas.getGraphicsContext2D());
      primaryStage.setScene( new Scene( bp ));
      primaryStage.centerOnScreen();
      primaryStage.show();
   }

   public static final double ENDPOINT_RADIUS   = 2.0;
   public static final double ENDPOINT_DIAMETER = 2.0*ENDPOINT_RADIUS;
   public static final double LINE_WIDTH        = 1.0;

   public static void main( String[] args ) {
      launch();
   }
} 
```

在用于显示第一个图像（目标）的程序中，我使用了两个画布，第一个画布被缩放、平移、旋转以在没有任何文本的情况下进行绘图，第二个画布仅用于水平绘制标签，`java.awt.geom.AffineTransform`用于计算坐标以匹配第一个画布中显示的项目。两个画布叠加显示，它们是透明的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:34:42.420

如果我理解得很好，这就是[Alexander Kirov的建议：](https://stackoverflow.com/users/1951882/alexander-kirov)

```
import javafx.application.Application;
import javafx.geometry.VPos;
import javafx.scene.Scene;
import javafx.scene.layout.Pane;
import javafx.scene.paint.Color;
import javafx.scene.shape.Circle;
import javafx.scene.shape.Polyline;
import javafx.scene.text.Font;
import javafx.scene.text.Text;
import javafx.scene.text.TextAlignment;
import javafx.stage.Stage;

public class TransRotScal extends Application {

   @Override
   public void start( Stage primaryStage ) throws Exception {
      Pane pane = new Pane();
      pane.setScaleX( 10.0 );
      pane.setScaleY( 10.0 );
      pane.setRotate( theta );
      pane.setTranslateX( 468.0 );
      pane.setTranslateY( 152.0 );
      Polyline line = new Polyline( 10,20, 10,30, 50,30, 50,35 );
      line.setStroke( Color.DARKRED );
      Circle   c0   = new Circle( 10, 20, 2, Color.BLACK );
      Circle   c1   = new Circle( 10, 30, 2, Color.LIGHTSALMON );
      Circle   c2   = new Circle( 50, 30, 2, Color.LIGHTSALMON );
      Circle   c3   = new Circle( 50, 35, 2, Color.BLACK );
      Text     t0   = createText( 10, 20, "[10,20]", VPos.BOTTOM );
      Text     t1   = createText( 10, 30, "[10,30]", VPos.TOP );
      Text     t2   = createText( 50, 30, "[50,30]", VPos.BOTTOM );
      Text     t3   = createText( 50, 35, "[50,35]", VPos.TOP );
      pane.getChildren().addAll( line, c0, c1, c2, c3, t0, t1, t2, t3 );
      primaryStage.setScene( new Scene( pane ));
      primaryStage.centerOnScreen();
      primaryStage.setWidth ( 580 );
      primaryStage.setHeight( 280 );
      primaryStage.show();
   }

   private Text createText( int x, int y, String label, VPos vPos ) {
      Text text = new Text( x, y, label );
      text.setFill( Color.DARKGRAY );
      text.setFont( Font.font( Font.getDefault().getFamily(), 1.4 ));
      text.rotateProperty().set( -theta );
      text.textAlignmentProperty().setValue( TextAlignment.CENTER );
      text.setX( text.getX() - text.getBoundsInLocal().getWidth()/2.0);
      text.textOriginProperty().set( vPos );
      if( vPos == VPos.BOTTOM ) {
         text.setY( text.getY() - 2 );
      }
      else {
         text.setY( text.getY() + 2 );
      }
      return text;
   }

   private final double theta = Math.toDegrees( Math.atan2( -15.0, 40.0 ));

   public static void main( String[] args ) {
      launch();
   }
} 
```

它可以工作，但它使用 Node 代替画布，并且调整文本的值是通过迭代尝试获得的（很多！）；**我不知道如何计算它们**。

Alexander，您可以编辑此帖子或发布您自己的帖子来完成它，在以后的情况下我会删除它。

这是结果，请注意光盘周围文本的近似位置：

![亚历山大·基洛夫回答](https://i.stack.imgur.com/jXbHW.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:53:29.163

您可以从字符串创建 GlyphVector 并将其绘制到 Graphics 对象，而不是直接将字符串绘制到 Graphics 对象上吗？这种方法的优点是 GlyphVector 可以有自己的变换，您可以使用它来有效地取消画布的旋转。我不记得创建字形的确切细节，但您需要一个 Font 和一个 FontRenderContext ......这两者都已可用于 Graphics 上下文。

# sql - 在日期 x 执行一次 sql 语句

> ID：15742569
> 
> 赞同：1
> 
> 时间：2013-04-01T11:27:08.960
> 
> 标签：sql, oracle

我想在日期 x 执行一次 sql 更新语句。如何在 Oracle 10g 数据库上实现这一点？

**编辑：**
我的目标是每天发布更新声明。为什么？我的应用程序中有一个小错误，可以用这个语句“临时修复”（因为我只有 db-access 直到真正的修复发生）。

强尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:10:00.280

考虑 DBMS_SCHEDULER。它用于定期运行作业，但您可以设置 pl/sql 作业脚本以在一次性运行作业成功结束后暂停或取消作业条目。

[http://docs.oracle.com/cd/B28359_01/server.111/b28310/scheduse.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28310/scheduse.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T11:30:42.577

您可以使用 Crontab 安排要在给定日期/时间执行的任务。

见：[http ://en.wikipedia.org/wiki/Crontab](http://en.wikipedia.org/wiki/Crontab)

# gcc - gcc源码中的函数

> ID：15742570
> 
> 赞同：0
> 
> 时间：2013-04-01T11:27:13.487
> 
> 标签：gcc

谁能告诉我 gcc 源代码中的哪个函数负责在 C 文件中查找宏并将其替换为实际值？

我想知道该功能，因为我必须通过对其进行更改来获取日志，以便最后我的日志文件将包含所有宏的使用位置及其行号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:30:19.530

它由预处理器在生成输出文件之前完成。如果你想看看它在做什么，试试 gcc -E

来自 man gcc：

```
-E  Stop after the preprocessing stage; do not run the compiler proper.
    The output is in the form of preprocessed source code, which is sent to
    the standard output. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:58:26.070

我建议使用`clang`这种类型的任务。它有很好的文档记录，您无需更改其源代码，因为它可以通过插件系统进行扩展。

在您的情况下，您基于`PPCallbacks`该类创建一个插件并覆盖其`MacroExpanded`方法以及您认为有用的任何其他方法。[这](https://github.com/chisophugis/clang_plugin_example/blob/master/FindDependencies.cpp)是一个简单的起点。

# asp.net-mvc - 如何在 MVC 网站中使用属性路由翻译查询参数？

> ID：15742574
> 
> 赞同：0
> 
> 时间：2013-04-01T11:27:28.323
> 
> 标签：asp.net-mvc, attributerouting

我有一个带有 Index 方法的 HorseController，例如：

```
 [GET("Index", TranslationKey = "HorseIndex")]
    [AllowAnonymous]
    public ActionResult Index(int? page, HorseTypes? type, HorseGenders? gender, HorseBreeds? breed, HorseJumps? jump,
        HorseDressages? dressage, String maxAge, String priceFrom, String priceTo, Country? country, bool? hasPicture, bool? hasVideo)
        {
...
} 
```

我把这条路线翻译成：

```
 provider.AddTranslations()
       .ForKey("HorseIndex", new Dictionary<string, string>
            {
                { "da", "heste-til-salg" },
                { "en", "horses-for-sale" }
            }) 
```

问题是现在，丹麦用户的网址是：

```
http://localhost:12623/heste-til-salg?page=1&hasPicture=False&hasVideo=False 
```

我的问题是如何翻译查询参数呢？

我无法在[文档](http://attributerouting.net/)中找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:43:12.813

我不认为你可以。MVC 路由中的查询字符串被视为传递的任何不适合 URL 的数据的通用转储场。如果它不是您在设计时不知道的通用数据，那么它应该只是您的 URL 的一部分。如果它是通用数据，那么显然无法为可能出现在查询字符串中的任何和所有无关数据提供翻译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T11:30:06.367

您可以接受已翻译的参数，并在控制器方法中使用 StringsLocalized 进行翻译。

# java - 如何以编程方式登录 j_security_check

> ID：15742580
> 
> 赞同：4
> 
> 时间：2013-04-01T11:27:48.953
> 
> 标签：java, jsp, single-sign-on, j-security-check

我有一个使用`j_security_check`. `j_security_check`如果我知道用户名和密码，是否可以通过 JSP 页面以编程方式登录特定用户？我试图以这种方式将变量作为 URL 参数传递......

```
response.sendRedirect(www.mydomain.com/j_security_check?j_username=someUserName&j_password=somePassword ) 
```

...但它不起作用。有什么办法吗？

编辑：这是我的登录页面，现在可以正常工作。出于安全原因，我修剪了一些代码。

```
 <form name="signon" method="post" action="/j_security_check">
      <table width="100%" cellpadding="4" cellspacing="0">

        <tr>
          <td valign="top" colspan="4">
            <h2><%= UI.tr(null, "login_details") %>
            </h2>
          </td>
        </tr>

        <tr>
          <td valign="top" width="150px">
            <%= UI.tr(null, "login_id") %>
          </td>
          <td valign="top" width="150px">
            <%= UI.tr(null, "login_pass") %>
          </td>
          <td valign="top" width="150px">
            <%= UI.tr(null, "login_token_or_captcha") %>
          </td>
          <td width="100%">&nbsp;</td>
        </tr>

        <tr>

          <%
            if (logins == null) {
          %>
          <td>
            <input type="hidden" name="j_uri" value="/index.jsp">
            <input type="text" id="username" name="j_username" size="16" style="width: 150px;" autocomplete="off" <%= username == null ? "" : "disabled value='" + username + "'" %> onblur="return checkCaptcha();">
          </td>
          <%
          } else {
          %>
          <td>
            <select name="j_username" style="width: 150px;">
              <%
                for (Login login : logins) {
              %>
              <option><%= login.getUsername() %>
              </option>
              <%
                }
              %>
            </select>
          </td>
          <%
            }
          %>
          <td><input type="password" name="j_password" size="16" style="width: 150px;">                </td>
          <td><input type="text" id="mypw" name="mypw" size="16" autocomplete="off" style="width: 150px;"></td>
          <td><input class="submit" type="submit" name="submit" value="<%= UI.tr(null, "login_submit") %>"></td>
        </tr>

<tr>
  <td valign="top" colspan="4">
    <%-- <%
    if("registry.nic.hn".equals(request.getServerName())) {
    %>
    <!-- GARTH - put whatever you want here for .HN -->
    &nbsp;
    <% } else { %> --%>
        <h2><%= UI.tr(null, "login_news") %>
        </h2>
        <div><%= HTMLFormat.addBreaks(SiteConf.getSiteConf().getNews()) %>
        </div>
    <%-- <% } %>     --%>
  </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:18:02.790

以下代码在 JSP 文件中适用于我：

```
String url = "j_security_check?j_username=" + username + "&j_password=" + password;
String redirectUrl = response.encodeRedirectURL(url);
response.sendRedirect(redirectUrl); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-18T07:24:10.923

在我看来，`j_security_check`通过附加使用 url登录似乎是一个很大的安全性。`username``password`

相反，您可以执行以下步骤：

*   创建一个具有表单的单独 JSP
*   此表单`j_security_check`使用用户名和密码在 url 上发布
*   你可以动态地包含这个 JSP
*   此 JSP 可以具有可以 POST 此表单的 onload (JS) 功能。

这样，它将是安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-13T06:48:48.957

你说你想以编程方式登录。如果这是您的目标，我会避免使用 j_security_check。j_security_check 与基于表单的身份验证一起使用（查看有关保护 Web 应用程序的 Oracle 资源 - 表单身份验证已涵盖大约一半：[http://docs.oracle.com/cd/E24329_01/web.1211/e24485/thin_client。 .htm](http://docs.oracle.com/cd/E24329_01/web.1211/e24485/thin_client.htm)）。

我建议您查看该资源并深入研究一些替代方案，但另一种方法是使用 Java 身份验证和授权服务 (JAAS) API（这是一个教程链接：[http://docs.oracle。 com/javase/6/docs/technotes/guides/security/jaas/tutorials/GeneralAcnOnly.html](http://docs.oracle.com/javase/6/docs/technotes/guides/security/jaas/tutorials/GeneralAcnOnly.html) ) JAAS 和回调处理程序是以编程方式解决身份验证（和授权）的非抽象方式。许多强大的框架都基于此 JAVA API，因此如果您仍在为这个问题苦苦挣扎，可能值得一看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T12:07:44.637

[您可以让用户在 jsp 页面和 servlet 上输入用户名和密码，或者使用此处](http://docs.oracle.com/javaee/6/tutorial/doc/glxce.html)描述的 facelets 页面和 bean来登录用户。

# jquery - 使用 jquery 同步发送图像请求

> ID：15742582
> 
> 赞同：0
> 
> 时间：2013-04-01T11:27:59.023
> 
> 标签：jquery, synchronous, deferred, image-load

我有一个页面，可以从 youtube 获取提要，然后将其显示在此页面上。有 3 行，每行 4 张图片，每张对应 youtube 视频。我从 youtube 提要本身获得这些图片链接。

我想要实现的是在渲染这些图像时，我想一次从 youtube 获取图像一行。如果图像加载未完成，我想等到下一行图像被获取。

有人可以指导我如何做到这一点吗？我阅读了有关 jquery 延迟对象和回调的内容，但由于 jquery/js 不强，无法真正破解这一点。js 异步执行，因此所有图像请求一个接一个地进行，并且无法让 js 等到每行的图像完全呈现后再发送下一行。

我目前有一个 for 循环和 diaply 图像，如下所示：

```
$j("#thumbnail_image_"+i).css({'background-image':'url('+cdnPath+')'});
myImage[i].src = cdnPath; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:46:42.163

基本上，如果您使用适当的 IMG 元素来存储图像，您可以订阅它的 onload 和 onerror 事件。然后你可以计算已经加载了多少张图片

```
var loaded = 0;
for (var i = 0; i < imgtags.length; i++) {
   imgtags[i].src = "/path/to/img";

   function handle() {
       loaded++;
       if (loaded == imgtags.length) {
           loaded = 0;
           // call next row or finish
       };
   };
   img.onload = handle;
   img.onerror = function () { 
       handle(); 
       // possible error handling here
   };
}; 
```

其中 imgtags 是当前行中包含 IMG 元素的数组。不要忘记将每行的计数设置为 0。因此，您不需要 JQuery。

如果你不使用 IMG 元素并为 div 设置背景，我认为这是不可能实现的。

[演示](http://jsfiddle.net/jt4QB/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T09:04:58.393

如果您想使用 Deferreds/Promises 执行此操作，则可以执行以下操作：

```
$(function() {
    function loadRow($imgs, timeout) {
        var dfrd = $.Deferred(),
            n = 0;
        $imgs.each(function() {
            this.onload = function() {
                if(++n == $imgs.length) { dfrd.resolve(); }
            }
            this.src = "/path/to/img";
        });
        setTimeout(dfrd.resolve, timeout);//in case of slow network or img.onload failure
        return dfrd.promise();
    }

    var $images = $(img.whatever),//adjust as required
        rowlength = 5,//adjust as required
        rowFilter = function(i) {
            return function(index) {
                return (index > i * rowlength) && (index < (i+1) * rowlength);
            }
        },
        nRows = Math.ceil($images.length / rowlength);
        timeout = 10000,//(ms) adjust as required
        d = $.Deferred().resolve();
    for(var i=0; i<nRows; i++) {
        var $imgs = $images.filter(rowFilter(i));
        d = d.then(loadRow($imgs, timeout));
    }
}); 
```

*未经测试*

`loadRow()`加载一行，并返回一个在该行加载或超时时解决的 Promise。

其余代码：

*   设置按行索引选择图像的方法。
*   建立一个种子延迟，立即解决以允许加载过程开始。
*   建立了几个其他的变量。
*   循环通过构建一个`.then()`链的行，该链在它进行时调用`loadRow()`。

`.then()`链是控制行加载顺序的机制。

该代码比其他答案中的代码更庞大，但它也为您做的更多，因为它包含一个超时机制。如果您有更简洁的方法来选择每行中的图像，它将简化。

# ios - CLLocationManager 没有调用它的委托方法

> ID：15742584
> 
> 赞同：0
> 
> 时间：2013-04-01T11:28:07.340
> 
> 标签：ios, core-location

我正在开发一个应用程序，该应用程序涉及在 X 分钟内跟踪新位置和服务器更新。当时间差异等于或大于 X 分钟时，我将停止位置更新，然后发送到服务器，然后在小于 X 分钟时开始更新位置。但是当它小于 X 分钟时，不会调用 didUpdateToLocation 委托方法。

我在这里发布我的代码：

```
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
    fromLocation:(CLLocation *)oldLocation
{
   if (theDiff > 10.0f || myDate == nil) 
        {
            [self stopUpdating];
         }
        else
        {
            [self.mLocationManager startUpdatingLocation];
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:36:44.023

试试这个。，

```
//in your .h

CLLocationManager *locationManager;

@property (nonatomic,retain) CLLocationManager *locationManager;

// Then synthesize it in your .m

@synthesize locationManager;

//in your viewDidLoad

locationManager = [[CLLocationManager alloc] init];
locationManager.delegate = self;
locationManager.distanceFilter = kCLDistanceFilterNone; // whenever we move
locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m
[locationManager startUpdatingLocation]; 
```

无论您使用手机移动时，这都会调用该方法。您也可以通过更改模拟器位置来检查这一点。

希望这会有所帮助。谢谢，快乐的编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:47:08.593

在 .m 中尝试这个添加这个方法，或者如果你有任何其他自定义代码发布它

```
-(void)LocationWithTime
{
    [CLController sharedInstance].locationManager.desiredAccuracy = 100.0;
    [CLController sharedInstance].delegate = self;
    BOOL locationAccessAllowed = NO ;

    if( [CLLocationManager respondsToSelector:@selector(locationServicesEnabled)] )
    {
        locationAccessAllowed = [CLLocationManager locationServicesEnabled] ;
    }
    if(locationAccessAllowed == YES)
    {

        [[CLController sharedInstance].locationManager startUpdatingLocation];
    }

} 
```

这是我使用的委托方法 -

```
-(void)newLocationUpdate:(NSString *)latvalue longValue:(NSString*)longvalue Error:(int) errCode
{

    DebugLog(@"LatLong values %@ %@", [UserContext sharedInstance].strLat, [UserContext sharedInstance].strLong);

    self.strLALat = latvalue;
    self.strLALong = longvalue;

    [[CLController sharedInstance].locationManager stopUpdatingLocation];
    [CLController sharedInstance].delegate=nil ;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T11:57:45.773

摘自 Apple API 文档，

/* * locationManager:didUpdateToLocation:fromLocation: *
* 此方法已弃用。如果 locationManager:didUpdateLocations: 已实现，则不会调用此方法。*/

```
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation __OSX_AVAILABLE_BUT_DEPRECATED(__MAC_10_6, __MAC_NA, __IPHONE_2_0, __IPHONE_6_0); 
```

改用下面的委托方法，

/* * locationManager:didUpdateLocations: * locations 是按时间顺序排列的 CLLocation 对象数组。*/

```
- (void)locationManager:(CLLocationManager *)manager
     didUpdateLocations:(NSArray *)locations __OSX_AVAILABLE_STARTING(__MAC_NA,__IPHONE_6_0); 
```

一旦您设置了委托，这将起作用。

希望这可以帮助。

# php - Mysql变量无法通过php mysql查询工作

> ID：15742586
> 
> 赞同：5
> 
> 时间：2013-04-01T11:28:10.400
> 
> 标签：php, mysql

我有这个查询：

```
$query = " 

 SET @points := -1;
 SET @num := 0;

 SELECT `id`,`rank`,
 @num := if(@points = `rank`, @num, @num + 1) as `point_rank`
 FROM `said`
 ORDER BY `rank` *1 desc, `id` asc"; 
```

我正在使用来自 php 的这个查询；给我这个错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获得在 'SET @num := 0; 附近使用的正确语法

如果我将该代码复制并粘贴到 phpmyadmin Sql 查询面板中，它可以完美运行，但从 php 代码行来看它不起作用，似乎在设置 Vars 时出现问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T11:38:43.487

而不是在单独的变量中设置变量`SET`，您是否尝试过使用`CROSS JOIN`：

```
$query = " 

SELECT `id`,
  `rank`,
  @num := if(@points = `rank`, @num, @num + 1) as `point_rank`
FROM `said`
CROSS JOIN (SELECT @points:=-1, @num:=0) c
ORDER BY `rank` *1 desc, `id` asc"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T11:36:59.053

当我们查看您的代码时，您正在尝试使用 PHP 中与 MySql 存储过程相关的语法。只有 ANSI Sql 特定的查询将通过 PHP 接口执行。

否则，您必须编写 MySql 存储过程并通过 PHP 数据对象（PDO）访问该过程。

您可以使用以下链接帮助 -

1>[存储过程、MySQL 和 PHP](https://stackoverflow.com/questions/118506/stored-procedures-mysql-and-php)

2> [http://www.joeyrivera.com/2009/using-mysql-stored-procedures-with-php-mysqlmysqlipdo/](http://www.joeyrivera.com/2009/using-mysql-stored-procedures-with-php-mysqlmysqlipdo/)

3> [http://php.net/manual/en/pdo.prepared-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-01T11:34:26.950

试试这个

```
$result1 = mysql_query("SET @points := -1 ;");
$result2 = mysql_query("SET @num := 0;");
$result3 = mysql_query($this->query); // <-- without the SET ... query 
```

从手册：

> mysql_query() 发送唯一查询（不支持多个查询）

编辑：

您应该使用 PDO 或 mysqli，因为 mysql 很快就会被弃用。

# php - 服务器上的临时存储

> ID：15742588
> 
> 赞同：1
> 
> 时间：2013-04-01T11:28:14.310
> 
> 标签：php, http, database-design, stored-procedures, xmlhttprequest

我正在寻找一种**有效且安全的方法**来无限期地存储少量用户数据（例如一行文本）。场景：一个客户端“A”通过服务器“S”异步向另一个客户端“B”发送一些数据。为简单起见，将数据视为单行文本。**现在，只有当 B 要求时**，此数据才会由服务器“S”传递给客户端“B” 。所以直到那个时候服务器'S'必须存储这些数据。

对于一个简单的演示，我非常粗略地实现如下：
客户端'A'使用XMLHttpRequest进行POST请求，将文本发送到'S'如下

```
 xhr.open("POST",url+"?sentText=text"); //url points to a php file on S
    xhr.send(); 
```

然后 PHP 代码将接收到的文本保存到文件中，如下所示：

```
 <?php
    $selected = $_GET["sentText"];
    $writefile = "text.txt";
    $fh = fopen($writefile,'w');
    fwrite($fh,$selected);
    fclose($fh);
    ?> 
```

稍后，经过一段时间后，B 使用 BufferedInputStream 请求此文件中的文本，如下所示：

```
 URL fileurl = new URL("url/text.txt");
    BufferedReader in = new BufferedReader(new InputStreamReader(fileurl.openStream()));
    while((tmpReceived = in.readLine())!=null){
       received = tmpReceived;
    } 
```

这个演示工作正常，但这只是一个演示。但是，如果这是一个拥有数百万用户的全面现实世界应用程序，我将如何实现以下内容：

服务器 S 存储文本的部分。显然，我不能将文本作为纯文本保存在文件中，因为它会侵犯我用户的隐私。当有数百万用户时，它也将是低效的。像 Dropbox 这样的商业服务是如何做到这一点的？

为了简单起见，我只需要知道如何对文本执行此操作，然后我就可以推断出其他类型。

非常感谢！

# jquery - drupal 7模块中的jquery代码

> ID：15742590
> 
> 赞同：1
> 
> 时间：2013-04-01T11:28:32.967
> 
> 标签：jquery, drupal-7

如何在 drupal 7 模块中显示以下代码

```
 <script type="text/javascript" src="http://dubturbo1.counselstime.com/jwplayer/jwplayer.js"></script>
    <script>jwplayer.key="76oyax0SAVqgDM580AJ3+K23kIuN8HFkgahYRQ=="</script>
    <div id="my-video"></div>
    <script type="text/javascript">
        jwplayer('my-video').setup({
            file: 'http://192.168.1.150/sathya/video_test_512kb.mp4',
            width: '500',
            height: '300',
    controls: 'false',
    autostart: 'true',
    });
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:38:41.240

您需要将其添加到 JS 文件中，或者在您的模块中（如果需要），或者如果您不需要模块来执行您正在做的事情，则只需将其放在您的主题 JS 文件中。

将其包装在 Drupal 行为包装器中：

```
(function($) {

    Drupal.behaviors.setupVideo = {
        attach: function (context) {

          wplayer('my-video').setup({
            file: 'http://192.168.1.150/sathya/video_test_512kb.mp4',
            width: '500',
            height: '300',
            controls: 'false',
            autostart: 'true'
          });

        }
    };

})(jQuery); 
```

您还需要在其中添加第一个 JS 文件（jwplayer 的东西）。将其添加为主题中的一行或将其添加到模块中：

```
drupal_add_js(drupal_get_path('module', 'MY_MODULE') . '/js/jwplayer.js', 'file'); 
```

# .net - .NET Tracing 中的“switch”和“filter”有什么区别？

> ID：15742595
> 
> 赞同：5
> 
> 时间：2013-04-01T11:28:58.187
> 
> 标签：.net, filter, switch-statement, trace, system.diagnostics

Tracing in .NET 中的“switch”和“filter”有什么区别？它们似乎以类似的方式工作。

```
<system.diagnostics>
    <trace autoflush="true" indentsize="5">
      <listeners>
        <add name="DemoListener" type="System.Diagnostics.TextWriterTraceListener" initializeData="D:\output1.txt">
        </add>
        <remove name="Default" />
      </listeners>
    </trace>    
    <sources>
      <source name="DemoApp" switchName="DemoApp">
        <listeners>
          <add name="DemoListener" type="System.Diagnostics.TextWriterTraceListener" initializeData="D:\output2.txt">
            <filter type="System.Diagnostics.EventTypeFilter" initializeData="Error"/>
          </add>
          <remove name="Default" />
        </listeners>
      </source>
    </sources>
    <switches>
      <add name="DemoApp" value="Error"/>
    </switches>
  </system.diagnostics> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T11:47:58.113

有一点重叠。A`<filter>`命名您编写的从 TraceFilter 派生的特定类。您可以使用它来抑制跟踪输出，一切皆有可能。它始终适用于特定的 TraceListener。

该`<switches>`元素对于配置跟踪和设置 TraceSwitch 对象的值很有用。然后您在代码中对其进行测试以选择性地绕过跟踪输出。请注意`<switches>`“全局”如何，它不适用于特定的侦听器。因此，在 TraceSource 中测试交换机的逻辑位置。开关的一个很好的用途是配置跟踪详细程度。就像您的“错误”值表明只跟踪错误一样。

# mysql - 在没有root的情况下更改时区mysql

> ID：15742596
> 
> 赞同：1
> 
> 时间：2013-04-01T11:28:58.840
> 
> 标签：mysql, sql, timezone, hosting

我在免费托管网站中有 mySQL 数据库（因为我无法设置时区）。当我制作“now()”句子时，它会显示 GMT+8 的小时数，而我需要 GMT+1 的时间。

有没有办法在没有root访问权限的情况下更改它或修改结果？

提前谢谢你，对不起我的英语；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:46:11.290

mysql中有一个设置时区的命令`set time_zone = '+05:30';`

# iphone - 有没有办法定义一些类可以访问而不是其他类可以访问的变量？

> ID：15742602
> 
> 赞同：0
> 
> 时间：2013-04-01T11:29:04.127
> 
> 标签：iphone, ios, objective-c, ipad, variables

在objective-c中，对变量的访问被限制为三种类型，即，，`@public`（默认）和..这些访问修饰符允许我们通过4种情况依次访问变量：`@private``@protected``@package`

1-从任何地方访问变量。

2-仅在类内访问变量。

3- 从类及其子类中的任何位置访问变量。

4-从框架中的任何地方访问变量。

我的问题是：有没有办法定义一些类可以访问而不是其他类可以访问的变量？（即变量的自定义范围）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:36:24.473

您要的是 C++ 的`friend`关键字。[Objective-C 中的朋友类](https://stackoverflow.com/questions/2241488/friend-classes-in-objective-c)讨论了这个话题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:50:21.520

您可以使用类扩展来创建更灵活的访问控制：

```
// MyClass.h
@interface MyClass : SomeSuperclass {
    int ivar;
}
@end

// MyClass-Custom.h
#include "MyClass.h"
@interface MyClass () {
    int anotherIvar;
}
@end 
```

现在 anotherIvar 将只能被#includes MyClass-Custom.h 的代码访问。您可以在同一个类上创建更多类扩展以获得额外的访问组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T11:56:19.750

您必须编写自己的 setter 和 getter 方法。

```
- (id) get_abc_value:(id)from {
if ([from isKindOfClass:[SomeRespectedClass class]]) {
return abc;
} 
return nil;
} 
```

# sql - 查询每月的第一天和最后一天

> ID：15742605
> 
> 赞同：2
> 
> 时间：2013-04-01T11:29:10.310
> 
> 标签：sql, sql-server

如果我有月份的名称，我如何在 SQL 中获得该月的第一天和最后一天？

我有这个查询来返回月份名称：

```
DECLARE @StartDate  DATETIME,
        @EndDate    DATETIME;

SELECT   @StartDate = '20110501'        
        ,@EndDate   = '20110801';

SELECT  DATENAME(MONTH, DATEADD(MONTH, x.number, @StartDate)) AS MonthName
FROM    master.dbo.spt_values x
WHERE   x.type = 'P'        
AND     x.number <= DATEDIFF(MONTH, @StartDate, @EndDate) 
```

结果：

![结果](https://i.stack.imgur.com/pye1k.png)

现在，我怎样才能得到那个月的第一天和最后一天？更改查询。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-17T14:44:06.810

如果您想要一个更通用和简单的解决方案：

```
DECLARE @startdate AS DATETIME = GETDATE()
SELECT      
DATEADD(MONTH, DATEDIFF(MONTH, 0, @startdate) , 0)   as startMonth,
DATEADD(SECOND, -1, DATEADD(MONTH, 1,  DATEADD(MONTH, DATEDIFF(MONTH, 0, @startdate) , 0) ) ) as endMonth 
```

给出结果：

```
startMonth              endMonth
----------------------- -----------------------
2013-06-01 00:00:00.000 2013-06-30 23:59:59.000 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T11:42:51.387

试试这个 ：-

```
DECLARE @StartDate  DATETIME,
        @EndDate    DATETIME;

SELECT   @StartDate = '20110501'        
        ,@EndDate   = '20110801';

SELECT  DATENAME(MONTH, DATEADD(MONTH, x.number, @StartDate)) AS MonthName,
CONVERT(VARCHAR(25),
DATEADD(dd,-(DAY(DATEADD(MONTH, x.number, @StartDate))-1),DATEADD(MONTH, x.number, @StartDate)),101) as FirstDay,
CONVERT(VARCHAR(25),DATEADD(dd,-(DAY(DATEADD(mm,1,DATEADD(MONTH, x.number, @StartDate)))),DATEADD(mm,1,DATEADD(MONTH, x.number, @StartDate))),101) as LastDay
FROM    master..spt_values x
WHERE   x.type = 'P'        
AND     x.number <= DATEDIFF(MONTH, @StartDate, @EndDate) 
```

结果 ：-

```
 MonthName       FirstDay         LastDay   
  May           05/01/2011        05/31/2011    
 June           06/01/2011        06/30/2011    
 July           07/01/2011        07/31/2011    
 August         08/01/2011        08/31/2011 
```

[借助此](http://blog.sqlauthority.com/2007/05/13/sql-server-query-to-find-first-and-last-day-of-current-month/)查询获得的结果

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T11:43:24.277

此代码为您**提供当前月份的第一个日期：**

```
DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0) 
```

如果您知道**月份的数字**，那么：

```
SELECT      DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) + @MonthNumber, 0) 
```

**月的结束日期也是**如此：

```
SELECT   DATEADD(MILLISECOND, -1,
         DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()) - @@MonthNumber+ 1, 0)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-15T20:18:23.463

根据您使用的 SQL Server 版本，您可能还可以使用 EOMONTH()... 我在这里编写了一个指南，分解了各种 SQL 风格的选项：[如何在 SQL 中查找本月的最后一天、MySQL、PostgreSQL 和 Teradata](http://www.sqltactics.com/how-to-find-the-last-day-of-the-month-in-sql-mysql-postgresql-and-teradata/ "如何在 SQL、MySQL、PostgreSQL 和 Teradata 中查找一个月的最后一天")

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-21T18:06:40.500

这是一篇关于在 SQLServer 中使用 EOMonth 函数的非常好的文章，其中有很多很好的示例，并且以易于阅读的格式进行了布局。

[https://www.tutorialsrack.com/articles/60/how-to-get-first-and-last-day-of-a-month-in-sql-server-using-eomonth-function](https://www.tutorialsrack.com/articles/60/how-to-get-first-and-last-day-of-a-month-in-sql-server-using-eomonth-function)

# c# - 如果开关盒内的条件

> ID：15742610
> 
> 赞同：9
> 
> 时间：2013-04-01T11:29:33.013
> 
> 标签：c#, if-statement, switch-statement

我正在尝试将 if 语句转换为 switch 案例（为了便于阅读）

1）我读过 switch 语句一般都很棒 - 这是真的吗？ [https://stackoverflow.com/questions/6097513/switch-statement-inside-a-switch-statement-c](https://stackoverflow.com/questions/6097513/switch-statement-inside-a-switch-statement-c "强烈建议尽可能避免使用 switch 语句")

2）声明如下：

```
switch (Show)
                {
                    case Display.Expense:
                        if (expected.EXPENSE != true)
                            break;
                    case Display.NonExpense:
                        if (expected.EXPENSE == true)
                            break;
                    case Display.All:
                        //Code
                        break;
                } 
```

错误是：

> *控制不能从一个案例标签（“案例 1：”）转移到另一个案例标签*

这是原始的 if 语句：

```
if ((Show == Display.All) || (expected.EXPENSE == true && Show == Display.Expense) || (expected.EXPENSE == false && Show == Display.NonExpense))
{
    //Code
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-01T15:19:40.570

首先，我注意到您在第二点中忘了问一个问题。所以我要问你一些问题来解决你的第二点：

> “不能通过”错误是什么意思？

与 C 和 C++ 不同，C# 不允许从一个开关部分意外跌落到另一个开关部分。每个开关段都必须有一个“无法到达的端点”；它应该以 break、goto、return、throw 或（很少）无限循环结束。

这可以防止忘记休息和意外“跌倒”的常见错误。

您已经编写了代码，就好像失败是合法的一样；我的猜测是你是一个 C 程序员。

> 如何在 C# 中强制失败？

像这样：

```
switch (Show)
{
case Display.Expense:
    if (expected.EXPENSE != true)
        break;
    else
        goto case Display.All;
case Display.NonExpense:
    if (expected.EXPENSE == true)
        break;
    else  
        goto case Display.All;
case Display.All:
    //Code
    break;
} 
```

现在可达性分析器可以确定无论采用“if”的哪个分支，切换段端点都是不可达的。

> 这是好风格吗？

不，您的原始代码更具可读性。

> 我读过 switch 语句一般都很棒 - 这是真的吗？

意见不一。当有少量非常“清晰”的替代方案的行为不以复杂的方式交互时，切换语句非常有用。有些人会告诉你，切换逻辑应该由虚拟方法或访问者模式来处理，但这也可能被滥用。

> 在这种特殊情况下我应该使用开关吗？

我不会。

> 您将如何改进我的代码？

```
if ((Show == Display.All) || 
    (expected.EXPENSE == true && Show == Display.Expense) || 
    (expected.EXPENSE == false && Show == Display.NonExpense))
{
    //Code
} 
```

首先，不要在 C# 中全部大写。

其次，不要将布尔值与真假进行比较。他们已经是布尔值了！如果你想知道陈述 X 的真实性，你不会用英语说“X 是真的吗？” 你会说“X 是真的吗？”

我可能会写：

```
if (Show == Display.All || 
    Show == Display.Expense && expected.Expense || 
    Show == Display.NonExpense && !expected.Expense)
{
    //Code
} 
```

或者，更好的是，我会将测试抽象为一个自己的方法：

```
if (canDisplayExpenses())
{ 
    //Code
} 
```

或者把整个事情抽象出来：

```
DisplayExpenses(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-01T11:40:51.240

编译器不会理解你在这里的意思。

```
switch (Show)
{
    case Display.Expense:
        if (expected.EXPENSE != true)
            break;
        // missing break here
    case Display.NonExpense: 
```

编译器不会连接点并理解您的`break;`语句`if`中的语句与语句相关联`switch`。相反，它会尝试将其链接到一个循环，因为`break;`它们自己的语句只能与循环一起使用，以摆脱它。

这意味着您的`case`块缺少`break`完成它的语句，因此编译器会抱怨。

我不会尝试从`switch`语句中提取必要的代码，而是分解您的原始`if`语句。

这是你的：

```
if ((Show == Display.All) || (expected.EXPENSE == true && Show == Display.Expense) || (expected.EXPENSE == false && Show == Display.NonExpense))
{
    //Code
} 
```

我会这样写：

```
bool doDisplayExpected =
       (Show == Display.All)
    || (Show == Display.Expense    && expected.EXPENSE)
    || (Show == Display.NonExpense && !expected.EXPENSE);
if (doDisplayExpected)
{
    // code
} 
```

您不必将所有东西*都*打包在一条线上。

另外，我会尝试命名属性，以便它们更易于阅读，我会将`EXPENSE`属性重命名为，`IsExpense`以便上面的代码如下所示：

```
bool doDisplayExpected =
       (Show == Display.All)
    || (Show == Display.Expense    && expected.IsExpense)
    || (Show == Display.NonExpense && !expected.IsExpense);
if (doDisplayExpected)
{
    // code
} 
```

然后，理想情况下，我会将子表达式重构为方法：

```
bool doDisplayExpected =
       ShowAll()
    || ShowExpense(expected)
    || ShowNonExpense(expected);
if (doDisplayExpected)
{
    // code
}

public bool ShowAll()
{
    return Show == Display.All;
}

public bool ShowExpense(Expected expected)
{
    return Show == Display.Expense && expected.EXPENSE;
}

public bool ShowNonExpense(Expected expected)
{
    return Show == Display.NonExpense && !expected.EXPENSE;
} 
```

然后您可以将表达式放回 if 语句中：

```
if (ShowAll() || ShowExpense(expected) || ShowNonExpense(expected))
{
    // code
} 
```

这应该更容易阅读，并在以后更改。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-01T11:37:19.463

使用 if 语句并将复杂条件提取到方法中，例如

```
if (ShowAll() || ShowExpense())
{
} 
```

每次编写此类“开关”时请记住 OOP 和多态性，向该代码添加另一个案例将是一场**噩梦**

请参阅有关转换开关的[此](https://stackoverflow.com/questions/9484849/replace-conditional-with-polymorphism-how-to-handle-when-your-type-changes)说明和[类似 (C++)说明](http://www.drdobbs.com/cpp/message-handling-without-dependencies/184429055)

**PS**，如果您有兴趣使您的代码**干净易读**，请考虑阅读[Kent Beck 的 Smalltalk Best Practice Patterns](https://rads.stackoverflow.com/amzn/click/com/013476904X)和/或[Uncle Bob 的 Clean Code](https://rads.stackoverflow.com/amzn/click/com/0132350882) 我真的很喜欢这两本书，强烈推荐。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-01T11:34:05.423

如果你想要*可读性*，只需扔掉你的语法垃圾：

```
if (Show == Display.All || expected.EXPENSE && Show == Display.Expense || !expected.EXPENSE && Show == Display.NonExpense)
{
    //Code
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-01T11:33:04.273

为他们每个人提供零件，这样它就不会抛出错误，但是正如其他人所说，在这种情况下`else`你实际上不需要。`switch`

```
switch (Show)
{
    case Display.Expense:
         if (expected.EXPENSE != true)
             // do what you want
             break;
         else 
             // do what you want
             break;
    case Display.NonExpense:
         if (expected.EXPENSE == true)
             // do what you want
             break;
         else 
             // do what you want
             break;
    case Display.All:
        //Code
        break;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-01T11:43:46.037

您收到此错误的原因是您没有定义`break`语句。

您`break`有条件地定义了。

```
 switch (Show)
            {
                case Display.Expense:
                    if (expected.EXPENSE != true)
                        break;

                // Note that the break above is in scope of you if statement, and will
                // result in a compiler error
                case Display.NonExpense:
                    ...
            } 
```

要么确保每个 case 语句都有自己`break`的 case 语句，要么按如下方式对 case 语句进行分组。

```
 switch (Show)
            {
                case Display.Expense:
                case Display.All:
                    // do stuff
                    // Expense and All have the same behavior
            } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-01T11:39:32.273

重构`if`语句，以便您可以像这样表达它：

```
if (isDisplayAll() || isExpense(expected) || isNonExpense(expected))
{
    // Code
} 
```

提取的逻辑：

```
private bool isDisplayAll()
{
    return (Show == Display.All);
}

private bool IsExpense(Expected expected)
{
    return expected.EXPENSE && (Show == Display.Expense);
}

private bool IsNonExpense(Expected expected)
{
    return !expected.EXPENSE && (Show == Display.NonExpense);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-01T11:47:44.853

同意丹尼斯的观点，你不想要一个开关盒来解决这个问题。

虽然可能不太可读，但您也可以使用更短的：

```
if (Show == Display.All || (expected.EXPENSE == (Show == Display.Expense)))
{
    //Code
} 
```

# vim - 如何通过 vundle 管理语言语法/缩进配置？

> ID：15742612
> 
> 赞同：2
> 
> 时间：2013-04-01T11:29:43.583
> 
> 标签：vim

我刚开始使用 vundle，我很好奇我应该在哪里放置我的语言（可能是 python、ruby、php）语法/缩进配置文件。

当我把这些配置文件放在正常的地方`.vim/syntax`时 `.vim/indent`，它们可以工作，但是当我把它们放在`.vim/bundle`.

`.vim/bundle`我想知道如果我想让 vundle 帮助我管理这些配置脚本，它是否应该在某个地方？

谢谢。

研究生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:37:18.687

放置自定义脚本的最佳位置是`.vim/after`.

原因是您可能总是希望您的自定义脚本发挥最后的作用。比如vim对python文件有默认动作，那么安装的插件会添加更多。您可能对所有这些都不满意，因此您推出了自己的，这将是最后一个调用加载。

您可以对`/after`文件夹或整个`./vim`文件夹进行版本控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:20:43.683

只有将 Vundle 放入 (Git(Hub)) 存储库并在 Vundle 中引用它，Vundle 才能帮助您管理自己的配置，就像其他存储库一样。您仍然需要坚持正常的`'runtimepath'`层次结构；即对于 Python 文件类型插件，您可以将它们放入`ftplugin/python.vim`您的存储库中，然后由 Vundle 安装到`~/.vim/bundle/my-python-filetype/ftplugin/python.vim`.

另一方面，如果您只是在系统上维护自己的自定义（没有存储库），Vundle 对您没有多大帮助，您可以将它们保留在正常位置。

# jquery - ASP.NET MVC - JSON 响应向我发送一个文件而不是更新 jqueryUI

> ID：15742617
> 
> 赞同：0
> 
> 时间：2013-04-01T11:30:01.190
> 
> 标签：jquery, ajax, asp.net-mvc, json, asp.net-mvc-4

我正在返回一个 json 数据，我可以确认它正在将数据带回客户端。但不是更新我的 jqueryaccordion，而是要求我保存或打开文件。下面是我的脚本和控制器。我已经使用 jquery 模态对话框通过部分视图编辑员工详细信息，单击更新按钮应该更新手风琴列表中的相应员工。任何帮助将不胜感激 - 谢谢

**更新**

通过 IE 工具调试时，我注意到单击“更新”按钮时，“请求”选项卡中的“启动器”显示“单击”。我猜这应该是 'XMLHttpRequest' 而不是。希望这些信息有所帮助。谢谢

**主视图**

```
@Html.ActionLink("Edit Employee", "EditEmployees", "Home",
                        new { id = item.Id }
                        , new { @class = "editLink" }) 
```

**带有编辑员工表单的部分视图 - EditEmployee.cshtml**

```
@using (Ajax.BeginForm("EditEmployees", "Home", new AjaxOptions
        {
            InsertionMode = InsertionMode.Replace, 
            HttpMethod = "POST",
            OnSuccess = "updateSuccess"
        }, new { @id = "updateEmployeeForm" }))
    {
        <div class="editor-label">
            @Html.LabelFor(model => model.Name)
        </div>
        <div class="editor-field">
            @Html.TextAreaFor(model => model.Name)
            @Html.ValidationMessageFor(model => model.Name)
        </div>
    </fieldset>
} 
```

**返回包含 editemployee 表单的部分视图的操作结果**

```
Public ActionResult EditEmployee(int id)
{
//DataAccess part
return PartialView("EditEmployee",employeedata);
} 
```

**更新员工详细信息后返回 Json Result 的控制器**

```
[HttpPost]
Public JsonResult EditEmployee(Models.Employee employee)  
{  
       //Data access part

     JsonResult result = new JsonResult();
                            result.Data = employeeData;
                            return result;
} 
```

**主视图上的脚本**

```
 <script type="text/javascript">
            var linkObj;
            $(function () {
                $(".editLink").button();

            $('#updateDialog').dialog({
                autoOpen: false,
                width: 400,
                resizable: false,
                modal: true,
                buttons: {
                    "Update": function () {
                        $("#update-message").html(''); 
                        $("#updateEmployeeForm").submit();
                    },
                    "Cancel": function () {
                        $(this).dialog("close");
                    }
                }
            });

            $(".editLink").click(function () {
                //change the title of the dialog
                linkObj = $(this);
                var dialogDiv = $('#updateDialog');
                var viewUrl = linkObj.attr('href');
                $.get(viewUrl, function (data) {
                    dialogDiv.html(data);

                    var $form = $("#updateEmployeeForm");
                    // Unbind existing validation
                    $form.unbind();     
                               dialogDiv.dialog('open');
                });
                return false;
            });

        });

 function updateSuccess(data) {
 // I want to make sure that this function gets executed on Success instead of a file being sent back to me from the server
  $('#updateDialog').dialog('close');
  $('#commonMessage').html("Update Complete");
  $('#commonMessage').delay(400).slideDown(400).delay(3000).slideUp(400);
  alert("hello");

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:21:30.737

```
$.get(viewUrl, function (data) { 
```

如果这是您获取`ajax`数据的方式，我可以说，此服务器代码返回错误：

```
JsonResult result = new JsonResult();
    result.Data = employeeData;
    return result; 
```

因为默认情况下`JsonResult`只允许`POST`请求

作为解决方案，您可以使用`JsonRequestBehavior.AllowGet`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-17T02:05:34.073

Might be a bit late but ... adding the jquery unobtrusive reference to my view fixed the issue.

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")"></script> 
```

# ios - 如何在 UIImageView 上触发 touchesBegan 和 touchesMoved 事件

> ID：15742624
> 
> 赞同：-3
> 
> 时间：2013-04-01T11:30:31.327
> 
> 标签：ios, objective-c, ipad

当用户在 UIImageView 上移动他的图形时，我想更改图像但是 touchesBegan 和 touchesMoved 事件不会被触发。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:46:40.917

在所有超级视图上也将 userInteractionEnabled 设置为 YES。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:43:28.867

将 UITapGestureRecognizer 添加到 UIImageView

# java - PDFBOX：java.lang.NumberFormatException：

> ID：15742625
> 
> 赞同：0
> 
> 时间：2013-04-01T11:30:37.793
> 
> 标签：java, pdf, pdfbox, numberformatexception

当我尝试执行以下代码时，它会将我抛出错误

```
java.lang.NumberFormatException: For input string: "8#40"
at java.lang.NumberFormatException.forInputString(Unknown Source) 
```

代码 ：

```
import org.apache.pdfbox.pdmodel.PDDocument;
import org.apache.pdfbox.pdmodel.interactive.form.PDAcroForm;
import org.apache.pdfbox.pdmodel.interactive.form.PDField;

public class PDFPerform
{
    public static void main(String[] args)
    {
        try{
            String sourcePath = "C:\\Users\\347702\\Desktop\\fw4.pdf";
            String destinationPath = "D:\\PDF_FORMS\\filled_fw4.pdf";

            PDDocument document;
            document = PDDocument.load(sourcePath);
            PDAcroForm form = document.getDocumentCatalog().getAcroForm();

            PDField Field_1= form.getField("f1_09(0)");
            Field_1.getValue();
            System.out.println(Field_1.getValue());
            Field_1.setValue("asdsd");
            System.out.println(Field_1.getFieldType());
        }
        catch(Exception e)
        {
             e.printStackTrace();
        }
    }
} 
```

任何人都可以帮助我解决上述问题的根本原因.. 提到的字段`f1_09(0)`是文本类型，但是当我为其设置一个值时，我会遇到上述错误

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T10:29:11.367

一旦我将我的`pdfbox.1.7.1`版本更新为`pdfbox1.8.1.jar`

# php - 我如何限制用户访问我的网站而不是拥有许多分支机构的办公室

> ID：15742628
> 
> 赞同：1
> 
> 时间：2013-04-01T11:30:47.400
> 
> 标签：php, javascript, jquery, networking

我有一个网站，我需要限制用户在从办公室外访问时下载数据。办公室可能是一个或多个。我已经在我的脑海里设置了 cookie。但我不确定它是否更安全。无法使用静态 IP 识别计算机。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:37:31.997

您可以使用 .htaccess 规则并添加您的办公室多个 IP

例如。

```
 RewriteCond %{REMOTE_HOST} !^127\.100\.110\.175
 RewriteCond %{REMOTE_HOST} !^127\.106\.2\.36
 RewriteRule $ http://www.redirectdomain.net [R=301,L] 
```

# php - 将秒转换为日期

> ID：15742629
> 
> 赞同：1
> 
> 时间：2013-04-01T11:30:53.183
> 
> 标签：php

根据[这个计算器](http://www.ruddwire.com/handy-code/date-to-millisecond-calculators/)，这个日期应该是 Mon Apr 01 2013 13:11:57 GMT+0200。但相反，它是服务器时间：2013-04-01 07:11:57。我知道这是一个时区问题（服务器在-4），但是有没有办法让这个时区独立，或者我必须从数据库中查询用户的时区？

```
$date = 1364814717;
$date = date('Y-m-d H:i:s', $date); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:36:27.427

您可以像这样更改默认时区：

```
date_default_timezone_set('UTC'); 
```

如果您需要为每个用户设置不同的数字，您始终可以发送未转换的数字并使用 javascript（请参阅 getTimezoneOffset），但让用户选择可能会更好（他们的计算机可能不知道它到底在哪里！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:47:44.800

我希望这就是你要找的。

```
 var myDate = new Date();
   document.write(myDate.getTimezoneOffset()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T11:53:43.507

您将需要询问用户在哪里并将其存储在数据库中的配置文件中。你实际上不能依赖任何东西。因为用户可以在代理后面，看起来就像在上海，但实际上在墨尔本。

例如，用户说它在`GMT +1`. 您将选项列表放在用户的配置文件中，当用户保存它时，它将被写入名为 (for example) 的数据库行`timezone`。

尝试使用较新的`DateTime`样式（来自 ID 7 的用户的示例）；

**PHP**

```
$mysqli = new mysqli("localhost", "my_user", "my_password", "database_name");

if ($result = $mysqli->query("SELECT timezone FROM users where user_id = 7")) {
    $prefix = '';

    if ($result[0]->timezone >= 0) {
        $prefix = '+';
    }

    $date = new DateTime('NOW GMT'.$prefix.$result[0]->timezone);

    echo '<pre>';
    print_r($date);
    echo '</pre>';
}
else {
    echo 'Query failed';
} 
```

这里发生的是您只保存 GMT 偏移量（或使用您想要的任何时间设置）并根据用户的偏好返回当前时间。

**输出**

```
DateTime Object (
    [date] => 2013-04-01 13:50:08
    [timezone_type] => 1
    [timezone] => +01:00
) 
```

别忘了看看夏天；）

祝你好运！

# java - Eclipse 控制台中的 Windows-1250

> ID：15742631
> 
> 赞同：1
> 
> 时间：2013-04-01T11:30:55.363
> 
> 标签：java, encoding, bufferedreader

我有一个文件在`Windows-1250`.

我想逐行打印此文件，但在 Eclipse 控制台中我看不到变音符号。

我试图在 Common 选项卡中进行更改，`run configuration`但它没有给出任何结果。

我用

```
BufferedReader reader = new BufferedReader(new FileReader(fileName)); 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:45:15.683

使用`InputStreamReader`或允许指定字符集的任何内容：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(
        new FileInputStream(fileName), "Windows-1250")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:41:12.617

可以尝试像这样设置编码：

```
PrintStream out = new PrintStream(System.out, true, "Windows-1250");
out.println(message); 
```

可能这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T11:45:13.873

我有一段时间没有用java编程了，但也许[这个类](http://docs.oracle.com/javase/6/docs/api/java/io/InputStreamReader.html)能满足你的需要？它允许设置字符集

您使用的课​​程的[文档](http://docs.oracle.com/javase/6/docs/api/java/io/FileReader.html)告诉您如何使用它。

# php - 清理除数字、正斜杠和 $? 之外的所有内容

> ID：15742637
> 
> 赞同：1
> 
> 时间：2013-04-01T11:31:28.633
> 
> 标签：php

我有一个“价格”的输入表，并且想要类似的东西：

> 250 美元全价/230 美元提前预订

要在数据库中进行清理以：

```
250/230 
```

或者

```
$250/$230 
```

是否有可能在 PHP 中做到这一点？

我试过了：

```
$formdata = ( isset( $_POST['price-entry'] ) ? sanitize_html_class( $_POST['price-entry'] ) : '' ); 
```

但这会剥离除字母和数字之外的所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:38:36.097

试试这个

```
 $price = '$250 full price /$230 early booking';
  echo get_clean_price($price);

  function get_clean_price($price) {
    return preg_replace("/[^\d\/]+/", "", $price);
  } 
```

# java - 通过读取excel表生成文件

> ID：15742643
> 
> 赞同：0
> 
> 时间：2013-04-01T11:31:44.523
> 
> 标签：java, excel, file

有一个 excel 文件，其中一个列中有很多文件名。我需要编写一个 java 代码来读取这些文件名并在目的地生成相同的文件名。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:49:43.747

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Iterator;

import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.ss.usermodel.Sheet;
import org.apache.poi.ss.usermodel.Workbook;
import org.apache.poi.xssf.usermodel.XSSFSheet;
import org.apache.poi.xssf.usermodel.XSSFWorkbook;

public class Test {

    public static void main(String[] args) throws IOException {

        try {

            FileInputStream file = new FileInputStream(new File("C:\\test.xls"));

            HSSFWorkbook workbook = new HSSFWorkbook(file);
            HSSFSheet sheet = workbook.getSheetAt(0);
          //Iterate through each rows from first sheet
            Iterator<Row> rowIterator = sheet.iterator();
            while(rowIterator.hasNext()) {
                Row row = rowIterator.next();

                //For each row, iterate through each columns
                Iterator<Cell> cellIterator = row.cellIterator();
                while(cellIterator.hasNext()) {

                    Cell cell = cellIterator.next();
                    System.out.print(cell.getStringCellValue() + "\t\t");
                    FileOutputStream outFile =new FileOutputStream(new File("C:\\"+cell.getStringCellValue()));
                    workbook.write(outFile);
                }
                System.out.println("");
            }
            file.close();

          /*  FileOutputStream outFile =new FileOutputStream(new File("C:\\update.xls"));
            workbook.write(outFile);*/
            //outFile.close();

        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T06:57:40.107

公共类测试{

```
public static void main(String[] args) throws IOException {

    try {

        FileInputStream file = new FileInputStream(new File("D:\\sampleFileNames.xls"));

        HSSFWorkbook workbook = new HSSFWorkbook(file);
        FileOutputStream outFile= null;
        HSSFSheet sheet = workbook.getSheetAt(0);
      //Iterate through each rows from first sheet
        Iterator<Row> rowIterator = sheet.iterator();
        while(rowIterator.hasNext()) {
            Row row = rowIterator.next();
            //For each row, iterate through each columns
            Iterator<Cell> cellIterator = row.cellIterator();
                    Cell cell = cellIterator.next();
                    File file1 = new File("D:\\Ganesh\\"+cell.getStringCellValue().toString());
                    if(!file1.createNewFile()) {
                        System.out.println("File already exists");

              /*  Cell cell = cellIterator.next();
                System.out.print(cell.getStringCellValue() + "\t\t");
                outFile =new FileOutputStream(new File("D:\\Ganesh\\"+cell.getStringCellValue().toString()));
                //workbook.write(outFile);
            System.out.println("");
        }
        file.close();
        outFile.close();
      /*  FileOutputStream outFile =new FileOutputStream(new File("C:\\update.xls"));
        workbook.write(outFile);*/
        //outFile.close();

}
        }
        }catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } 
```

} }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T11:55:19.820

您可以使用一些库来读取 excel 文件。就我而言，我选择了[Apache POI](http://poi.apache.org/)，您可以免费下载它然后添加到您的项目中。添加后，创建您的文档：

```
HSSFWorkbook workbook = new HSSFWorkbook( new FileInputStream("filename.xls") ); 
```

或者，如果它是 2007 年或之后的 excel 文档：

```
XSSFWorkbook workbook = new XSSFWorkbook( new FileInputStream("filename.xlsx") ); 
```

现在您可以遍历每一行并读出第一列：

```
for( Row row : workbook.getSheetAt(0) ) // Go through each row in sheet 0
    System.out.println( row.getCell(0).getStringCellValue() ); 
```

# drupal - drupal 站点的 directadmin 上的 Dns 记录

> ID：15742645
> 
> 赞同：0
> 
> 时间：2013-04-01T11:31:51.303
> 
> 标签：drupal, dns, drupal-6

我有一个 drupal6 站点，我使用 directadmin 面板。我的问题是人们可以通过以下方式进入我的网站；

```
www.mydomain.com
pop.mydomain.com
smtp.mydomain.com
mail.mydomain.com 
```

为什么会发生？我知道我可以重定向所有但我想解决这个问题。请帮我..

![在此处输入图像描述](https://i.stack.imgur.com/isXIv.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:18:46.750

当您将多个带有`A`（或`CNAME`）记录的子域添加到主域时，就会发生这种情况。

删除它们将删除那些不需要的子域。还要查找通配符指针，例如`*.domain.com`.

![在此处输入图像描述](https://i.stack.imgur.com/FeNUs.png)

# c# - 加入字典 并列出 错误（无法从用法中推断出方法的类型参数）

> ID：15742647
> 
> 赞同：1
> 
> 时间：2013-04-01T11:32:08.520
> 
> 标签：c#, list, join, dictionary, inferred-type

我正在尝试加入 a`Dictionary<int, string>`但`List<MyClass>`它会引发错误

> *“无法从用法中推断出方法的类型参数”。*

但在我看来，所有的论点都被完美地定义了......

```
class Row
{
        public string name { get; set; }
        public string[] data { get; set; }
}

Dictionary<int, string> devices = new Dictionary<int,string>();
List<Row> rows = new List<Row>();

rows = rows.Join(devices, row => row.data[0], device => device.Key, (row, device) => { row.data[1] = device.Value; return row; }).ToList(); 
```

`row`是 a `Row`，`device`是 a `pair<int,string>`，`device.Key`是a `int`，并且`device.Value`是 k。问题是什么？我知道这一定是一件愚蠢的事情，但我被这个错误困住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:39:18.440

`row.data[0]`是一个字符串，但是`device.Key`是一个整数，所以键类型不匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:39:46.460

您收到此错误是因为`device => device.Key`is an `int`where as `row.data[0]`is a `string`. 它们都是泛型类型`TKey`，需要保持一致。可以通过调用来`ToString()`修复`device.Key`。

```
rows = rows.Join(devices, row => row.data[0], device => device.Key.ToString(), (row, device) => { row.data[1] = device.Value; return row; }).ToList(); 
```

# java - 存储给定数据的数据结构，搜索和删除操作应该是高效的

> ID：15742650
> 
> 赞同：-1
> 
> 时间：2013-04-01T11:32:11.950
> 
> 标签：java, algorithm, data-structures

我正在用**Java**开发一个项目。

**在那个项目中，我首先使用jsoup**从 Web 获取 URL 。

现在出于性能原因，我必须存储

```
[ tag name, tag Id, tag Class name ] 
```

在容器中，并且已知标签 id 为 NULL 或唯一。

例子，

```
["a", "fullSiteLink", ""]
["div", "", "mob-footer"]
["div", "", "clear"]
["br", "", ""]
["ul", "", "mob-footer-links"] 
```

所以请告诉我为每个标签存储这些信息的任何数据结构，我们可以有效地搜索、删除任何标签。

帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:08:00.890

> 所以请告诉我为每个标签存储这些信息的任何数据结构，我们可以有效地搜索、删除任何标签。

我会使用[HashMap](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)。它是用于快速插入、查找和删除的最有效的数据结构之一。

如果这不适合您想要的搜索风格，[二叉树](http://users.cis.fiu.edu/~weiss/dsj3/code/BinaryTree.java)是用于 O(log n) 搜索、插入和删除的灵活数据结构。

# java - 了解 Web 应用程序中的 Spring Bean 作用域

> ID：15742658
> 
> 赞同：3
> 
> 时间：2013-04-01T11:32:44.460
> 
> 标签：java, spring, web, scope, javabeans

根据`springsource`文档，每个 容器`singleton`仅实例化一次作用域 bean 。
例如，我有一个单例范围的`UserDetails`bean，其中包含
有关用户的信息。
在我的 main() 方法中：

```
ApplicationContext context = new ClassPathXmlApplicationContext(new String[] {"Spring-Customer.xml"});  
UserDetails ud1 = (UserDetails)context.getBean("userDetails");  
custA.setAddress("Address set by ud1");  
System.out.println("Address : " + ud1.getAddress());  

UserDetails ud2 = (UserDetails)context.getBean("userDetails");  
System.out.println("Address : " + ud2.getAddress()); 
```

输出将是

```
Address set by ud1  
Address set by ud1 
```

因为 userDetails 是一个单例 bean，所以第二次检索 by`ud2`将给出与 ud1 相同的结果。

**现在**这是我的问题：
对于我的 Web 应用程序`UserDetails`，我的`dispatcher-servlet.xml.`

```
<bean id="userDetails" class="com.mukund.DTO.UserDetails" /> 
```

**第一个问题：**单例范围也是 Web 应用程序的默认值吗？
如果是：
这个 bean 被自动装配到`AccountService`和`CustomerService`类中。
如果客户说在 CustomerService 类中将用户的**名字**`clientA`设置为**“UserA”**，并在一段时间后从 AccountService 类中检索名字，

 ******第二个问题：**它是否获得与“UserA”作为名字的**相同的 UserDetails 实例？**
**第三个问题：**与此同时，如果另一个客户说`clientB`试图在 AccountService 类中获取名字，它会得到“UserA”吗？
**第四个问题：** clientA、clientB 和其他人会共享同一个 UserDetails 实例吗？如果是：选择原型、请求或会话的范围。

*我希望你明白我的意思。请向我解释有关 Web 应用程序的 spring bean 范围。*

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:57:43.137

是的，单例是 Web 应用程序的默认范围。因此，您在所有服务（以及所有用户）中都获得了相同的 UserDetails 实例。

什么范围适合您取决于您​​到底想要什么。您真的想将数据传输对象注入服务吗？对象应该存在多长时间？

*   原型范围：每个服务都有自己的 UserDetails 对象
*   请求范围：您在请求时获得相同的实例
*   会话范围：只要您在同一个会话中，您就会获得相同的实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T14:30:53.993

默认情况下，spring bean 的范围是单例的，这意味着每个容器一个实例。但这并不意味着所有请求都使用同一个实例。

它是这样工作的。

客户端 A 请求 bean A，容器将查找该 bean A 的实例，如果该实例不可用，它将创建一个实例，然后将其提供给客户端 A。

但是如果 bean A 正在被另一个客户端 B 使用，那么客户端 A 必须等到客户端 B 释放 bean A。****

# ember.js - Ember.js：具有明确目标的操作失败

> ID：15742662
> 
> 赞同：0
> 
> 时间：2013-04-01T11:33:19.680
> 
> 标签：ember.js, action, target, mixins

我想我错过了一些非常基本的东西，但是以下失败了`The action 'login' did not exist on App.AppController`.

模板：

```
<h2>Click the button and watch the console</h2>
<button type="button" {{action login target="App.AppController"}}>Log in</button> 
```

控制器：

```
App.AppController = Ember.Controller.extend({
  login: function() {
    // never gets here
    debugger;
  },
  send: function() {
    // or even here
    debugger;
  }
}); 
```

JSBin： http: [//jsbin.com/okuqiv/5/edit](http://jsbin.com/okuqiv/5/edit)（这是指向 Ember 最新的，但它与 1.0-rc2 的行为相同，我已经使用了几天的版本；我没有在以前的版本上试过）。

在调试时，似乎控制器 mixin 并没有公开它应该公开的所有功能—— login() 是我添加的一个函数，但 send() 是一个 Ember 函数。它还缺少其他函数，如 get()。

我看到在我的应用程序中，login() 函数存在于对象 App.AppController.prototype 上，而在 JSBin 中，它存在于 mixin 链中的一个对象上。

在这一点上，我什至很乐意处理视图或路由器中的登录操作（因为它似乎是过去的默认设置），但这些似乎都不起作用。

从文档中，动作处理程序应该存在的当前默认位置无论如何都是控制器，然后是路由，但是如果我删除目标并将 login() 添加到路由，我会收到另一个错误：（`Nothing handled the event 'login'`我正在使用首先是目标，因为在我的应用程序中 /login 是一个单独的路由并且具有不同的控制器）。

解决方案和解决方法将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:12:13.253

您的目标是 App.AppController 类，而不是该类的实际实例。如果您正在使用路由器并且在应用程序视图中，则默认情况下操作将针对 appController。

由于您的示例位于索引路由中，因此我已更新 JSbin 以在 IndexController 上调用登录：

[http://jsbin.com/okuqiv/10/](http://jsbin.com/okuqiv/10/)

您还过度使用了阻止调用登录的发送方法。

# sql - 选择行两次，修改一列

> ID：15742663
> 
> 赞同：1
> 
> 时间：2013-04-01T11:33:20.370
> 
> 标签：sql, oracle, plsql, union

我有表和 sql（在 Oracle 上运行）：

T（这只是一个例子，桌子很大）

```
a  b  c
-------
1  4  7
2  5  5
3  6  8 
```

sql：

```
SELECT a, b, c
FROM t

union all

SELECT 'R',b,c
FROM t
WHERE b = c AND (condition to another tables, etc) 
```

它返回：

```
1  4  7
2  5  5
3  6  8
R  5  5 
```

是否可以在这里避免 UNION（并且不添加 JOIN）？换句话说 - 是否可以优化查询以避免 Oracle 两次查看表 T？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:45:02.350

这将读取您的表格一次。连接是使用仅包含两个值的辅助表完成的（当然这是在内存中 - 没有 I/O）

```
with t as(
  select '1' a,  '4' b,  '7' c from dual union all
  select '2',  '5',  '5' from dual union all
  select '3',  '6',  '8' from dual
)
select decode(aux.col,1,t.a,'R'), t.b, t.c 
from t
join (select '1' col from dual union all select '2' from dual) aux
on (aux.col='1' or t.b=t.c); 
```

查询不依赖于“1”和“2”。有可能：

```
select decode(aux.col, 'bla', t.a,'R'), t.b, t.c 
from t
join (select 'bla' col from dual union all select 'otherbla' from dual) aux
on (aux.col='bla' or t.b=t.c); 
```

**更新**：此外，如果 b=c 记录的数量很少，您可以加快创建索引的实际查询：

```
 create index fbi on t (b-c); 
```

然后在您的查询中替换`WHERE b = c` 为`WHERE b - c = 0`

**UPDATE2**只是为了了解如何执行这些查询：

```
create table t(a varchar2(10), b varchar2(10), c varchar2(10));

insert into t 
select mod(dbms_random.random(),1000),
  mod(dbms_random.random(),1000),
  mod(dbms_random.random(),1000)
from dual
connect by level < 1000000;

exec DBMS_STATS.GATHER_TABLE_STATS('DEV','T');

--1
SELECT a, b, c
FROM t;
---------------------------------------------------------------
| Id  | Operation         | Name | Rows  | Bytes | Cost (%CPU)|
---------------------------------------------------------------
|   0 | SELECT STATEMENT  |      |   999K|    11M|   700   (3)|
|   1 |  TABLE ACCESS FULL| T    |   999K|    11M|   700   (3)|
---------------------------------------------------------------

--2
SELECT a, b, c
FROM t
union all
SELECT 'R',b,c
FROM t
WHERE b = c;
----------------------------------------------------------------
| Id  | Operation          | Name | Rows  | Bytes | Cost (%CPU)|
----------------------------------------------------------------
|   0 | SELECT STATEMENT   |      |  1009K|    11M|  1426  (53)|
|   1 |  UNION-ALL         |      |       |       |            |
|   2 |   TABLE ACCESS FULL| T    |   999K|    11M|   700   (3)|
|   3 |   TABLE ACCESS FULL| T    | 10000 |    97K|   726   (7)|
---------------------------------------------------------------- 

--3
select decode(aux.col, 'bla', t.a,'R'), t.b, t.c 
from t
join (select 'bla' col from dual union all select 'otherbla' from dual) aux
on (aux.col='bla' or t.b=t.c);

----------------------------------------------------------------
| Id  | Operation          | Name | Rows  | Bytes | Cost (%CPU)|
----------------------------------------------------------------
|   0 | SELECT STATEMENT   |      | 20990 |   368K|  1402   (3)|
|   1 |  NESTED LOOPS      |      | 20990 |   368K|  1402   (3)|
|   2 |   VIEW             |      |     2 |    12 |     4   (0)|
|   3 |    UNION-ALL       |      |       |       |            |
|   4 |     FAST DUAL      |      |     1 |       |     2   (0)|
|   5 |     FAST DUAL      |      |     1 |       |     2   (0)|
|   6 |   TABLE ACCESS FULL| T    | 10495 |   122K|   699   (3)|
----------------------------------------------------------------
--if the leading table is dual, can be used an /*+ordered*/ hint 
--after select clause

--4
create index fbi on t (b-c);
SELECT a, b, c
FROM t
union all
SELECT 'R',b,c
FROM t
WHERE b - c = 0;
--------------------------------------------------------------------------
| Id  | Operation                    | Name | Rows  | Bytes | Cost (%CPU)|
--------------------------------------------------------------------------
|   0 | SELECT STATEMENT             |      |  1009K|    11M|  1384  (51)|
|   1 |  UNION-ALL                   |      |       |       |            |
|   2 |   TABLE ACCESS FULL          | T    |   999K|    11M|   700   (3)|
|   3 |   TABLE ACCESS BY INDEX ROWID| T    | 10000 |   117K|   683   (1)|
|   4 |    INDEX RANGE SCAN          | FBI  |  4000 |       |     3   (0)|
-------------------------------------------------------------------------- 
```

请记住，Oracle 不知道如何很好地预测或加入 3 中的子句，因此最好强制执行所需的执行路径。您应该测试在 2 和 3 和 4 之间进行选择（后面有索引的成本）。

# android - 我的应用程序不保存图像

> ID：15742674
> 
> 赞同：0
> 
> 时间：2013-04-01T11:34:22.877
> 
> 标签：android

当我按下保存按钮时，我的应用程序崩溃了。我一直在关注[本教程](http://www.verious.com/tutorial/how-to-store-an-image-from-android-to-a-sqlite-and-retrieve-it/)。LogCat 显示错误“无法打开数据库文件

这是我的代码：

```
import android.provider.MediaStore; 
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;  

public class MainActivity extends Activity implements OnClickListener {   

    protected static TextView textView;  
    protected static ImageView image1, image2; 
    protected Button get_image, save_image, read_image; 
    private String selectedImagePath;  
    private static final int SELECT_PICTURE = 1;  
    String DB_NAME = Environment.getExternalStorageDirectory() + "/test.db";     String  
    TABLE_NAME = "mytable";  

    @Override    
    public void onCreate(Bundle savedInstanceState) {   
        super.onCreate(savedInstanceState);      
        setContentView(R.layout.activity_main);   
        image1 = (ImageView) findViewById(R.id.imageView1);   
        image2 = (ImageView) findViewById(R.id.imageView2);
        textView = (TextView) findViewById(R.id.textView1);   
        get_image = (Button) findViewById(R.id.get_image);             
        get_image.setOnClickListener(this); 
        save_image = (Button) findViewById(R.id.save_image);  
        save_image.setOnClickListener(this);   
        read_image = (Button) findViewById(R.id.read_image);  
        read_image.setOnClickListener(this);  
    }       
    public void onClick(View v) {
        int id = v.getId();  

        switch (id) {      

        case     R.id.get_image: 
            Intent intent = new Intent();  
            intent.setType("image/*");  
            intent.setAction(Intent.ACTION_GET_CONTENT); 
            startActivityForResult(Intent.createChooser( 
                    intent,"Select Picture"),SELECT_PICTURE);             
            break;            

        case      R.id.save_image:  
            createTable(); 
            saveInDB();  
            break;      

        case     R.id.read_image:
            readFromDB();  
            break;     

        default:     
            break;   
        }   
    }     
    public void onActivityResult(int requestCode, int resultCode, Intent data) { 
        if (resultCode == RESULT_OK) {    
            if (requestCode == SELECT_PICTURE) {  
                Uri selectedImageUri = data.getData();  
                selectedImagePath = getPath(selectedImageUri); 
                System.out.println("Image Path : " + selectedImagePath); 
                image1.setVisibility(View.VISIBLE); 

                image1.setImageURI(selectedImageUri);  
            }    
        }     
    }     
    @SuppressWarnings("deprecation")   
    public String getPath(Uri uri) { 
        String[] projection = { MediaStore.Images.Media.DATA }; 
        Cursor cursor = managedQuery(uri, projection, null, null, null);  

        int column_index = cursor    
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);  
        cursor.moveToFirst();  
        return cursor.getString(column_index); 
    }       void createTable() {   
        SQLiteDatabase myDb = openOrCreateDatabase(DB_NAME, Context.MODE_PRIVATE, null);   
        String MySQL = "create table if not exists " + TABLE_NAME        
                + " (_id INTEGER primary key autoincrement,
                name TEXT not null, image BLOB);"; 
                myDb.execSQL(MySQL);     
                myDb.close();      
    }        

    void saveInDB() {          
        SQLiteDatabase myDb = openOrCreateDatabase(DB_NAME,Context.MODE_PRIVATE, null);   
        byte[] byteImage1 = null;    
        String s = myDb.getPath();   
        myDb.execSQL("delete from " + TABLE_NAME);   
        // clearing the table     
        ContentValues newValues = new ContentValues();  
        String name = "CoderzHeaven";    
        newValues.put("name", name);      
        try {             
            FileInputStream instream = new FileInputStream(selectedImagePath);                              
            BufferedInputStream bif = new  BufferedInputStream(instream);             
            byteImage1 = new byte[bif.available()];   
            bif.read(byteImage1);   
            newValues.put("image", byteImage1); 
            long ret = myDb.insert(TABLE_NAME, null, newValues); 
            if (ret < 0)     
                textView.append("Error");   
        } catch (IOException e) {         
            textView.append("Error Exception : " + e.getMessage());         }  
        myDb.close();         
        textView.append("\n Saving Details \n Name : " + name);       
        textView.append("\n Image Size : " + byteImage1.length + " KB"); 

        textView.append("\n Saved in DB : " + s + "\n");   
        Toast.makeText(this.getBaseContext(),    
                "Image Saved in DB successfully.", Toast.LENGTH_SHORT).show(); 
    }      

    void readFromDB() {     
        byte[] byteImage2 = null;    
        SQLiteDatabase myDb;       
        myDb = openOrCreateDatabase(DB_NAME, Context.MODE_PRIVATE, null); 
        Cursor cur = myDb.query(TABLE_NAME, null, null, null, null, null, null);  
        cur.moveToFirst();    
        while (cur.isAfterLast() == false) { 
            textView.append("\n Reading Details \n Name : " + cur.getString(1));   
            cur.moveToNext();   
        }           // /////Read data from blob field////////////////////     
        cur.moveToFirst();  

        byteImage2 = cur.getBlob(cur.getColumnIndex("image"));  
        setImage(byteImage2);  
        cur.close(); 
        myDb.close();   
        Toast.makeText(this.getBaseContext(),"Image read from DB successfully.",
                Toast.LENGTH_SHORT).show();   
        Toast.makeText(this.getBaseContext(),      
                "If your image is big, please scrolldown to see the result.",   

                Toast.LENGTH_SHORT).show();  

    }       

    void setImage(byte[] byteImage2) {  
        image2.setImageBitmap(BitmapFactory.decodeByteArray(byteImage2, 0,  
                byteImage2.length));         
        textView.append("\n Image Size : " +   
                byteImage2.length + " KB");     
    }   
} 
```

# javascript - nodeJs上的assertEqual错误

> ID：15742680
> 
> 赞同：0
> 
> 时间：2013-04-01T11:34:43.063
> 
> 标签：javascript, jquery, node.js, mongodb

我刚开始nodejs开发。我正在测试 mongodb 驱动程序，但反复获取 assertEquals 没有方法。

来自[sourceRepo的代码](https://github.com/christkv/node-mongodb-native)

```
var client = new Db('test', new Server("127.0.0.1", 27017, {})),
    test = function (err, collection) {
      collection.insert({a:2}, function(err, docs) {

        collection.count(function(err, count) {
          test.assertEquals(1, count);
        });

        // Locate all the entries using find
        collection.find().toArray(function(err, results) {
          test.assertEquals(1, results.length);
          test.assertTrue(results[0].a === 2);

          // Let's close the db
          client.close();
        });
      });
    };

client.open(function(err, p_client) {
  client.collection('test_insert', test);
}); 
```

错误

没有方法“assertEquals”

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:45:57.870

您可以为此使用[Node 的 Assert](http://nodejs.org/api/assert.html)（称为 equal 而不是 equal*s*）：

```
var assert = require('assert');

// ...
assert.equal(count, 1);
// ... 
```

但是，对于单元测试或类似的东西，您应该考虑使用一些测试框架。例如。[Jasmine for Node](https://github.com/mhevery/jasmine-node)，非常流行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-20T15:15:22.140

`assert.equal`已**弃用**：`assert.strictEqual()`改用。

* * *

```
assert.equal(1, '1');
// OK, 1 == '1'

assert.strictEqual(1, '1');
// FAIL, 1 === '1' 
```

文档：[https ://nodejs.org/api/assert.html#assert_assert_equal_actual_expected_message](https://nodejs.org/api/assert.html#assert_assert_equal_actual_expected_message)

# java - 如何使用存储在单独文件中的变量中的数据？

> ID：15742682
> 
> 赞同：-1
> 
> 时间：2013-04-01T11:34:53.630
> 
> 标签：java, class, object, methods, call

我有两个文件。一个文件计算我在文本文件中列出的事件数，并将事件数存储到变量“count”中。然后我想使用这个变量中的值在第二个文件中进行计算。我该怎么做呢？我是否必须在我的第一个文件中创建该类的对象然后引用它？我需要一个例子，我似乎无法让它工作。这是我尝试过的。

我的第一个文件：

```
import java.util.*;
import java.io.*;
    public class EventCounter {
        public static void main (String [] args) throws IOException{

            Scanner file = new Scanner(new File("event.txt"));
            int count = 0;
            while (file.hasNextLine()) {
                count++;
                file.nextLine();
            }

            System.out.println(count); //test
        }
    } 
```

我的第二个文件：

```
import java.io.IOException;
import java.io.FileReader;
import java.io.BufferedReader;

public class ReadEventFile {

    private String path;
    public ReadEventFile(String file) {
        path = file;
    }

    public String[] OpenFile() throws IOException {
        FileReader fr = new FileReader(path);
        BufferedReader textReader = new BufferedReader(fr); 

        EventCounter method = new EventCounter(); //make object?
        String[] dataTable = new String[count];

        int i;
        for (i=0; i<count; i++) { //Why count does not exist?
        } 
```

我的第二个文件不知道 count 是我第一个文件中的一个变量:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:52:41.957

你似乎有你的流程倒流。带有该`main`方法的类将由 JVM 创建和运行 - 因此它是您的入口点。

因此，您的`ReadEventFile`班级需要被告知`count`它的创建时间。只需将其添加到构造函数中：

```
public static class ReadEventFile {

    private final File eventFile;
    private final int count;

    public ReadEventFile(final int count, final File eventFile) {
        this.eventFile = eventFile;
        this.count = count;
    }

    public String[] openFile() throws IOException {
        String[] dataTable = new String[count];
        int i;
        for (i = 0; i < count; i++) {
        }
        return dataTable;
    }
} 
```

现在你`EventCounter`需要创建一个`ReadEventFile`实例，一旦它知道`count`并调用`openFile`它的方法：

```
public static void main(String[] args) throws IOException {

    final File eventFile = new File("event.txt");
    int count = 0;
    try (Scanner file = new Scanner(eventFile)) {
        while (file.hasNextLine()) {
            count++;
            file.nextLine();
        }
    }
    final ReadEventFile readEventFile = new ReadEventFile(count, eventFile);
    final String[] dataTable = readEventFile.openFile();
} 
```

它`ReadEventFile`是否有效，然后返回`String[]`到您的`EventCounter`.

完成后，您不会关闭任何资源。这是自找麻烦。我在您`Scanner`的`EventCounter`.

这个程序的设计确实有点奇怪。没有逻辑上的理由`EventCounter`应该是应用程序的入口点。我建议您创建一个`BootStrap`包含该`main`方法的类，并且是调用该方法的入口点`EventCounter`和`ReadEventFile`.

此外，该类`openFile`上的方法`ReadEventFile`没有很好地命名——它的作用不止于此。也许`processEventFile`或类似的东西会更合适。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:45:01.960

你的第一个程序

```
package farzi;

import java.util.*;
import java.io.*;
    public class EventCounter {
        public static void main (String [] args) throws IOException
        {
            EventCounter object = new EventCounter();
            System.out.println(object.returnCount());
        }

        public int returnCount() throws FileNotFoundException
        {
            Scanner file = new Scanner(new File("event.txt"));
            int count = 0;
            while (file.hasNextLine()) {
                count++;
                file.nextLine();
            }
            System.out.println(count); //test
            return count;
        }
    } 
```

你的第二个程序

```
package farzi;
import java.io.File;
import java.io.IOException;
import java.io.FileReader;
import java.io.BufferedReader;

public class ReadEventFile 
{

    private String path;
    public ReadEventFile(String file) 
    {
        String path = file;
    }

    public String[] OpenFile() throws IOException {

        EventCounter eventCounterObject = new EventCounter();
        int countLocal = eventCounterObject.returnCount();

        FileReader fr = new FileReader(path);
        BufferedReader textReader = new BufferedReader(fr); 

        EventCounter method = new EventCounter(); //make object?
        String[] dataTable = new String[countLocal];

        int i;
        String[] textData = null;
        for (i=0; i<countLocal; i++) { //Why count does not exist?

            textData[i] = textReader.readLine();
        }
        return textData;

    }

} 
```

# c - C - 返回值到 main

> ID：15742685
> 
> 赞同：2
> 
> 时间：2013-04-01T11:35:14.657
> 
> 标签：c, function, return-value

没有找到任何回答我的问题的东西，所以这里是：

我想将一个整数从一个函数返回到我的 main 以供进一步使用，特别是它是一个`add()`从文本文件中的条目创建列表的函数。我要返回的整数称为错误，在函数开头声明为*0 ，并在满足条件时更改为**1*（在我的情况下，如果找到除 az、AZ、- 和 ' ' 以外的任何字符） . 如果满足此条件，我想将错误（作为*1*）返回给主函数，否则我将其返回为*0*。然后，在我的 main 中，我有一个 if 语句来检查错误是否为*1*然后打印一条错误消息并返回 1。这可能吗？我已经尝试了一些东西，但它不起作用，如果我在我的 main 中将错误变量初始化为 0，那么 add 函数不应该在我的错误情况下将其更改为 1 吗？我不想使用全局变量，只想将 add 函数实现到 main 作为最后的手段。

抱歉，如果这完全是胡说八道，我非常初学者。

```
int add(char line[])
{
    struct node *newnode = (struct node *) malloc(sizeof(struct node));
    struct node *walker = newnode;

    strcpy(newnode->name, line);                

    int check = 0;
    int error = 0;

    while(line[check] != '\n')
    {
        if(line[check] == '!')
        {
            error = 1;
            return error;       
        }
        check++;
    }
    .    //Here is just the creation of the list elements
    .    //If the functions reaches end, it returns error with 0 as value
    .
    } 
```

主要的：

```
int main()
{
    FILE *fp;
    char line[33];
    int error = 0;

    fp = fopen("test.txt", "r");

    if(!fp)
    {
        printf("Error.");
        return 0;
    }

    while(fgets(line, 33, fp) != NULL)
    {
        add(line);
    }
    fclose(fp);

    if(error == 1)
    {
        printf("error");
        return 1;
    }

    // ...
} 
```

编辑：好的，我已经成功了，因为有几个人基本上对我有正确的解决方案，我想在这里说声谢谢！不知道我是否可以选择多个答案作为正确答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:43:56.960

您似乎有两个变量`error`，一个 in`add()`和另一个 in `main()`，它们是不同的变量！你至少需要改变

```
add(line); 
```

到

```
error = add(line);
if (error != 0)
    break; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T11:43:50.910

在函数 add() 中，更改行

```
if(line[check] == '!') 
```

到

```
if(!ok(line[check])) 
```

并编写函数 ok 以便它检查提供的参数是否不是英文字母或空格。现在您只需检查您的行是否包含！。也许这是一个错误。

你可以这样写：

```
int ok(char ch){
    return (ch>='A' && ch<='Z') || (ch>='a' && ch<='z') || ch==' ';
} 
```

总的来说，你应该有这样的东西：

```
while(fgets(line, 33, fp) != NULL)
{
    error=add(line);
    if(error==1)  ... handle error ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T11:52:42.670

您拥有的变量`add()`是`main()`局部变量。这意味着它们包含的值不能在各自的函数之外使用。所以当`add()`返回一个值时，你需要有一个变量`main()`来收集它。所以，

```
while(fgets(line, 33, fp) != NULL)
{
      /* Here when the add returns 1 or 0, the value is collected 
       * by the "error" variable of main function */
      error = add(line);
      if( error == 1 ) break ; /* Its Simple :-) */
      /* Once add() returns, you will break from the while loop
         will continue with the main() instructions ahead */
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T13:16:17.080

对评论的侧面回答。新评论变得有点长。

*（这是关于`while(line[check]) != '\n') {`）*

`fgets`没关系。但是`fgets`一旦到达换行符**或**读取了 32 个字节，就退出读取。

它不会**在**数据末尾附加换行符。

仅当它`\n`位于文件中当前位置的范围内时，最后才会出现。它每次做的是附加一个空值，`0x00`如最后一个字节 - 在读取数据的长度内。又名 C 字符串终止。

那是：

```
 buf[4];
 line 'a\n'    => buf = {'a', '\n', 0x00}
 line 'ab\n'   => buf = {'a', 'b' , '\n', 0x00}
 line 'abc\n'  => buf = {'a', 'b' , 'c' , 0x00} 
```

* * *

换一种方式。buf 中的换行符不是`fgets`附加内容，而是读取数据的一部分，它也会触发读取停止。因此你有：

fgets 停止阅读，如果：

```
 IF lenght - 1 bytes read
  OR IF read \n
  OR IF end of file 
```

* * *

还; 如果一行超过 32 个字节，则下一次读取将继续从中断处继续，而不是在下一行。

这给出了：

数据：

```
abc
defghijklmno
pq
rstuv 
```

示例代码：

```
#include <stdio.h>

int main(int argc, char *argv[])
{

    FILE *fp;
    char *fn = "sample.txt";
    char buf[4];
    int i = 0;

    if (argc > 1)
        fn = argv[1];

    if ((fp = fopen(fn, "r")) == NULL) {
        fprintf(stderr, "Unable to open '%s` for reading.\n", fn);
        return 1;
    }

    while(fgets(buf, 4, fp) != NULL) {
        fprintf(stdout, "%2d: @%s@\n", i++, buf);
    }

    fclose(fp);

    return 0;
} 
```

结果：

```
 0: @abc@
 1: @
@
 2: @def@
 3: @ghi@
 4: @jkl@
 5: @mno@
 6: @
@
 7: @pq
@
 8: @rst@
 9: @uv
@ 
```

* * *

在您的代码中，while 循环中发生的情况是，如果没有`\n`或`!`在其中，`line` 它会不断超出`line`驻留的内存区域。它要么导致段错误，要么找到两者之一并中止 - 如果说：

```
 char line[4]; read 'abcd'

  MEMORY ADDRESS   REF        VALUE
  0xf00            line[0]    a
  0xf01            line[1]    b
  0xf02            line[2]    c
  0xf03            line[3]    0x00
  0xf04            <unknown>  z
  0xf05            <unknown>  x
  0xf06            <unknown>  0x08
  0xf07            <unknown>  A
  0xf08            <unknown>  f
  0xf09            <unknown>  0xfd
  0xf0a            <unknown>  !
  0xf0b            <unknown>  g 
```

这样，您的函数将返回错误，因为它一直读取直到`0xf0a` 找到的地址`!`- 但这不是`line`.

* * *

通过这也重命名`line`为`buf`或类似的，因为它在代码中令人困惑（也许）。

并且，仅作为建议，考虑返回`0`成功和`!= 0`错误，因为这是许多相同格式的函数的惯例。

一个名为 的函数`is_ok(var)`返回 1 表示真，返回 0 表示假是合乎逻辑的，但一个函数在错误`add(var)`时返回更合乎逻辑`!= 0`——就像在错误代码中一样。

* * *

编辑评论：

是的。一种正常的方式可能是这样的：

```
int i = 0;

while (buf[i] && buf[i] != '\n') {
    if (!isalpha(buf[i++]))
        return 1;
} 
```

*或者更清楚，但恕我直言，好像一个被标准化*为 C一样不需要它，它可以直观地读成这样：

```
while (buf[i] != 0x00 && buf[i] != '\n') {
    ... 
```

[isalpha()](http://www.cplusplus.com/reference/cctype/)是 的一部分`ctype.h`，但如果你知道它总是 ASCII，那么你自己写就很容易了。也许也读[这个。](http://en.wikipedia.org/wiki/C_character_classification)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T11:41:03.057

我认为您在不使用 add() 函数返回的值的情况下处于正确的方向。

您必须将该函数分配给错误`error = add(line);` ，然后您可以检查是否是`1`这样您返回。
希望这当然会有所帮助，因为每次值更改时都必须在其中进行检查，因此您可能会丢失值`1`。在`error = add(line);`while 内部，变量 error 在每个循环中都取新值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-01T11:46:42.637

```
int main()
{
FILE *fp;
char line[33];
int error = 0; 
```

main 中的这个错误变量与在 main 中定义的不同`add`

```
int check = 0;
int error = 0; 
```

当您在 main 中调用 error 时，将调用 main 的本地变量，该变量仍然保持不变。`error`对in的更改`add`是该函数的局部变量。该变量的变化不会反映在`error`main.js 中。

`int error = add(line);` `if(error)`你必须在主要的东西

# perl - 我想使用 perl 按特定条件合并多个 csv 文件

> ID：15742687
> 
> 赞同：0
> 
> 时间：2013-04-01T11:35:15.233
> 
> 标签：perl, csv

我有多个 csv 文件，我想合并所有这些文件......我在下面展示了一些我的示例 csv 文件......

M1DL1_Interpro_sum.csv

```
IPR017690,Outer membrane, omp85 target,821
IPR014729,Rossmann,327
IPR013785,Aldolase,304
IPR015421,Pyridoxal,224
IPR003594,ATPase,179
IPR000531,TonB receptor,150
IPR018248,EF-hand,10 
```

M1DL2_Interpro_sum.csv

```
IPR017690,Outer membrane, omp85 target,728
IPR013785,Aldolase,300
IPR014729,Rossmann,261
IPR015421,Pyridoxal,189
IPR011991,Winged,113
IPR000873,AMP-dependent synthetase/ligase,111 
```

M1DL3_Interpro_sum.csv

```
IPR017690,Outer membrane,905
IPR013785,Aldolase,367
IPR014729,Rossmann,338
IPR015421,Pyridoxal,271
IPR003594,ATPase,158
IPR018248,EF-hand,3 
```

现在要合并这些文件，我尝试了以下代码

```
@ARGV = <merge_csvfiles/*.csv>;
print @ARGV[0],"\n";
open(PAGE,">outfile.csv") || die"Can't open outfile.csv\n";
while($i<scalar(@ARGV))
{
open(FILE,@ARGV[$i]) || die"Can't open ...@ARGV[$i]...\n";
$data.=join("",<FILE>);

close FILE;
print"file completed...",$i+1,"\n";
$i++;
}

@data=split("\n",$data);
@data2=@data;

print scalar(@data);

for($i=0;$i<scalar(@data);$i++) 
{
@id1=split(",",@data[$i]);
$id_1=@id1[0];
@data[$j]=~s/\n//;
if(@data[$i] ne "")
{
    print PAGE "\n@data[$i],";
    for($j=$i+1;$j<scalar(@data2);$j++)
    {
        @id2=split(",",@data2[$j]);
        $id_2=@id2[0];
        if($id_1 eq $id_2)
        {

            @data[$j]=~s/\n//;
            print PAGE "@data2[$j],";
            @data2[$j]="";
            @data[$j]="";
            print "match found at ",$i+1," and ",$j+1,"\n";
        }
    }
}

print $i+1,"\n";
} 
```

merge_csvfiles 是一个包含所有文件的文件夹

上面代码的输出是

```
IPR017690,Outer membrane,821,IPR017690,Outer membrane  ,728,IPR017690,Outer membrane,905
IPR014729,Rossmann,327,IPR014729,Rossmann,261,IPR014729,Rossmann,338
IPR013785,Aldolase,304,IPR013785,Aldolase,300,IPR013785,Aldolase,367
IPR015421,Pyridoxal,224,IPR015421,Pyridoxal,189,IPR015421,Pyridoxal,271
IPR003594,ATPase,179,IPR003594,ATPase,158
IPR000531,TonB receptor,150
IPR018248,EF-hand,10,IPR018248,EF-hand,3
IPR011991,Winged,113
IPR000873,AMP-dependent synthetase/ligase 
```

但我想要以下格式的输出....

```
IPR017690,Outer membrane,821,IPR017690,Outer membrane  ,728,IPR017690,Outer membrane,905
IPR014729,Rossmann,327,IPR014729,Rossmann,261,IPR014729,Rossmann,338
IPR013785,Aldolase,304,IPR013785,Aldolase,300,IPR013785,Aldolase,367
IPR015421,Pyridoxal,224,IPR015421,Pyridoxal,189,IPR015421,Pyridoxal,271
IPR003594,ATPase,179,0,0,0,IPR003594,ATPase,158
IPR000531,TonB receptor,150,0,0,0,0,0,0
IPR018248,EF-hand,10,0,0,0,IPR018248,EF-hand,3
0,0,0,IPR011991,Winged,113,0,0,0
0,0,0,IPR000873,AMP-dependent synthetase/ligase,111,0,0,0 
```

有人知道我该怎么做吗？感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:22:23.797

As mentioned in Miguel Prz's comment, you haven't explained how you want the merge to be performed, but, judging by the "desired output" sample, it appears that what you want is to concatenate lines with matching IDs from all three input files into a single line in the output file, with "0,0,0" taking the place of any lines which don't appear in a given file.

So, then:

```
#!/usr/bin/env perl    

use strict;
use warnings;

my @input_files = glob 'merge_csvfiles/*.csv';
my %data;
for my $i (0 .. $#input_files) {
  open my $infh, '<', $input_files[$i]
    or die "Failed to open $input_files[$i]: $!";
  while (<$infh>) {
    chomp;
    my $id = (split ',', $_, 2)[0];
    $data{$id}[$i] = $_;
  }
  print "Input file read: $input_files[$i]\n";
}

open my $outfh, '>', 'outfile.csv' or die "Failed to open outfile.csv: $!";
for my $id (sort keys %data) {
  my @merge_data;
  for my $i (0 .. $#input_files) {
    push @merge_data, $data{$id}[$i] || '0,0,0';
  }
  print $outfh join(',', @merge_data) . "\n";
} 
```

The first loop collects all the lines from each file into a hash of arrays. The hash keys are the IDs, so the lines for that ID from all files are kept together, and the value for each key is (a reference to) an array of the line associated with that ID in each file; using an array for this allows us to keep track of values which are missing as well as those which are present.

The second loop then takes the keys of that hash (in alphabetical order) and, for each one, creates a temporary array of the values associated with that ID, substituting "0,0,0" for missing values, joins them into a single string, and prints that to the output file.

The results, in `outfile.csv`, are:

```
IPR000531,TonB receptor,150,0,0,0,0,0,0
0,0,0,IPR000873,AMP-dependent synthetase/ligase,111,0,0,0
IPR003594,ATPase,179,0,0,0,IPR003594,ATPase,158
0,0,0,IPR011991,Winged,113,0,0,0
IPR013785,Aldolase,304,IPR013785,Aldolase,300,IPR013785,Aldolase,367
IPR014729,Rossmann,327,IPR014729,Rossmann,261,IPR014729,Rossmann,338
IPR015421,Pyridoxal,224,IPR015421,Pyridoxal,189,IPR015421,Pyridoxal,271
IPR017690,Outer membrane, omp85 target,821,IPR017690,Outer membrane, omp85 target,728,IPR017690,Outer membrane,905
IPR018248,EF-hand,10,0,0,0,IPR018248,EF-hand,3 
```

**Edit: Added explanations requested by OP in comments**

> can u expalain me the working of my $id = (split ',', $_, 2)[0]; and $# in this program

`my $id = (split ',', $_, 2)[0];` gets the text prior to the first comma in the last line of text that was read:

*   Because I didn't specify what variable to put the data in, `while (<$infh>)` reads it into the default variable `$_`.
*   `split ',', $_, 2` splits up the value of `$_` into a list of comma-separated fields. The `2` at the end tells it to only produce at most 2 fields; the code will work fine without the `2`, but, since I only need the first field, splitting into more parts isn't necessary.
*   Putting `(...)[0]` around the `split` command turns the returned list of fields into an (anonymous) array and returns the first element of that array. It's the same as if I'd written `my @fields = split ',', $_, 2; my $id = $fields[0];`, but shorter and without the extra variable.

`$#array` returns the highest-numbered index in the array `@array`, so `for my $i (0 .. $#array)` just means "loop over the indexes for all elements in `@array`". (Note that, if I hadn't needed the value of the index counter, I would have instead looped over the array's data directly, by using `for my $filename (@input_files)`, but it would have been less convenient to keep track of the missing values if I'd done it that way.)

# javascript - JSP JSTL 我在 JSP 中有以下代码 <a href="<c:url value="mycontroller"> <c:param name="prod" value="${product.produ 问问题 问问题 2013-04-01T11:35:58.737 7613 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我在 JSP 中有以下代码 <a href="<c:url value="mycontroller"> <c:param name="prod" value="${product.productNo}"/> </c:url>">Edit</a> 如何调用 Javascript onClick 函数来打开弹出窗口并传递参数？ <script type="text/javascript"> function openPopUp() { window.open('mycontroller','width=650, height=450'); } </script> 试试这个 <a href="javaScript:{openPopUp(\'parameter1\',\'parameter2\')}"></a> javascriptjspjstl 4 1 回答 1 This answer is useful 1 尝试这个 <a href="javaScript:{openPopUp(\'parameter1\',\'parameter2\')}"></a> 于 2013-04-01T11:37:59.647 回答 Related 2 c# - 如何完全清除/设置 WinRT 的 RichEditBox 的文本？ 2 html - 重新启动整个 SVG animateTransform 序列？ 0 ios - 在 IOS 上使用 FBEvents activateApp 并且 phonegap 不会发布到 Facebook Insights 1 ios - Obj-C：dispatch_async 在没有 NSLog 的情况下崩溃 1 sql - Hana 时间戳查询 - Tracefile 的年龄 0 wpf - 框架导航服务未在 GoBack 上使用当前文化 1 window - 我想停止计算机中的程序 1 java - Jackson 中的自定义命名策略和@JsonProperty 2 database - 将 Matlab 浮点数组插入 postgresql 浮点 [] 列 1 mongodb - Mongodb EC2 EBS 备份 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15742694
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript, jsp, jstl

我在 JSP 中有以下代码

```
 <a href="<c:url value="mycontroller">                            
       <c:param name="prod" value="${product.productNo}"/>                            
       </c:url>">Edit</a> 
```

如何调用 Javascript onClick 函数来打开弹出窗口并传递参数？

```
<script type="text/javascript">
    function openPopUp() {
        window.open('mycontroller','width=650, height=450');
    }
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:37:59.647

尝试这个

```
<a href="javaScript:{openPopUp(\'parameter1\',\'parameter2\')}"></a> 
```

# java - 如何在android中激活警报？

> ID：15742699
> 
> 赞同：0
> 
> 时间：2013-04-01T11:36:26.513
> 
> 标签：java, android, alarmmanager

我是安卓新手。我正在制作一个将在其上运行的应用程序**`AlarmManager`**我搜索了许多博客。我得到了激活**`Alarm`**几秒钟的教程，但就我而言，我想`Alarm`在一天中的特定时间激活一个。你能帮我做这件事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:08:30.200

获取当前时间与一天中特定时间之间的差异（以毫秒为单位），将其添加到`System.currentTimeMillis()`. 将此值放入`alarmManager.set(type, miliseconds, pendingIntent)`

# ruby-on-rails-3 - 如何在 RubyMine 中只为一个规范文件运行一个测试

> ID：15742704
> 
> 赞同：3
> 
> 时间：2013-04-01T11:36:36.943
> 
> 标签：ruby-on-rails-3, rspec, capybara, rubymine

我只想为 RubyMine 的请求文件夹中的一个规范文件运行一项测试。但我只能使用 spec:request 任务测试所有文件。谁能帮我只运行特定的测试？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T11:47:37.110

如果我正确理解您的问题，您可以右键单击测试或规范名称，然后单击`Run {test_name}`。

或者，您应该能够将鼠标光标放在测试名称的文本中，然后按`CTRL`+ `Shift`+ `F10`。

# macos - mouseDown 和 mouseUp 时重绘 NSButton

> ID：15742705
> 
> 赞同：1
> 
> 时间：2013-04-01T11:36:39.387
> 
> 标签：macos, cocoa, subclass, nsbutton

我继承`NSButton`并执行自定义绘图。我实现了方法`-mouseDown`和 `-mouseUp`. 当我执行短（快速）单击时，我的代码工作完美，但如果我按住鼠标左键一段时间然后释放它，方法`-mouseUp`不起作用。也许我不明白按钮是如何工作的......所以我希望按钮在鼠标按下时改变外观，并在鼠标上升时返回上一个。我做错了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-01T14:38:27.733

The reason you are getting this behavior is that there are two different ways to handle mouse dragging in Cocoa. Both are discussed here:

[http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/HandlingMouseEvents/HandlingMouseEvents.html%23//apple_ref/doc/uid/10000060i-CH6-SW18](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/HandlingMouseEvents/HandlingMouseEvents.html%23//apple_ref/doc/uid/10000060i-CH6-SW18)

NSButton is most likely using "The Mouse-Tracking Loop Approach", where everything (including the mouse-up event) is done within the `mouseDown:` method. So in the case you are wondering about, this is how things could look like in your `NSButton` subclass:

```
- (void)mouseDown:(NSEvent *)event
{
  someIvar = NO;

  [super mouseDown:event];

  //sometimes, when you are here, you have already had the "mouse up"
  //because super's mouseDown did everything.

  //to find out if this is the case, one solution would be to put
  //an instance variable into your subclass (someIvar)

  if (someIvar == YES)
  {
    //you have a "mouse up"
  }
  else
  {
    //you don't have a "mouse up"
  }
}

- (void)mouseDragged:(NSEvent *)event
{
  someIvar = YES;
} 
```

# c++ - 通过引用传递指针是正确的方法吗？

> ID：15742709
> 
> 赞同：0
> 
> 时间：2013-04-01T11:36:54.007
> 
> 标签：c++, oop, function, pointers, reference

这是我的功能：

```
void CreateRenderTarget(HWND, ID2D1HwndRenderTarget*); 
```

它是如何工作的：

```
void D2DRes::CreateRenderTarget(HWND hwnd, ID2D1HwndRenderTarget* pRT)
{
    RECT rc;
    GetClientRect(hwnd,&rc);

    pFactory->CreateHwndRenderTarget(
            D2D1::RenderTargetProperties(),
            D2D1::HwndRenderTargetProperties(
                hwnd,
                D2D1::SizeU(
                    rc.right - rc.left,
                    rc.bottom - rc.top)),
                &pRT);
} 
```

它是这样调用的：

```
pD2DRes->CreateRenderTarget(map.GetHWnd(),map.GetpRT()); 
```

从 CreateRenderTarget() 返回后，map.pRT 为 NULL。怎么会？

**编辑**：有我的 GetpRT() 函数：

```
ID2D1HwndRenderTarget* MapEditor::GetpRT()
{
    return pRT;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:41:17.643

**第一个问题：**

> 一从归来`CreateRenderTarget()`，`map.pRT`就是`NULL`。怎么会？

因为您没有通过*引用*传递指针。为了通过引用传递它，签名`CreateRenderTarget()`应该是：

```
void CreateRenderTarget(HWND, ID2D1HwndRenderTarget*&);
//                                                  ^ 
```

除非您这样做，否则您`CreateRenderTarget()`将处理作为参数传递的指针的*副本*，并且对其值的更改不会影响原始指针。

**第二个问题：**

你写：

> [...]有我的`GetpRT()`功能：
> 
> ```
> ID2D1HwndRenderTarget* MapEditor::GetpRT()
> {
>     return pRT;
> } 
> ```

请注意，这`GetpRT`也应该返回对内部指针的*引用*`pRT`，否则上述更改将不起作用（您将通过引用*传递*原始`pRT`.

因此，您应该相应地修改其签名：

```
ID2D1HwndRenderTarget*& MapEditor::GetpRT()
//                    ^
{
    return pRT;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:47:15.273

这是一个非常奇怪的代码。您正在按值传递所有内容，并希望修改函数中的值。

如果您打算修改传递给函数的指针，原型应如下所示：

无效 CreateRenderTarget(HWND, ID2D1HwndRenderTarget*& pRT);

# solr - Solr 拼写检查过滤器查询

> ID：15742710
> 
> 赞同：0
> 
> 时间：2013-04-01T11:36:58.327
> 
> 标签：solr, spell-checking, solr4, solr-schema

我试图在 solr 上构建拼写检查器。基本信息看起来足够好[http://wiki.apache.org/solr/SpellCheckComponent#Introduction](http://wiki.apache.org/solr/SpellCheckComponent#Introduction)

我可以以某种方式将拼写检查器的范围限制为特定查询吗？例如，我希望拼写检查器只纠正流派=国际的拼写。（流派是我的 schema.xml 中定义的文本字段）

**编辑**

为了使问题更准确：如何过滤拼写检查器组件的查询。fq=流派：音乐&查询=jacksn

然后拼写校正器应该只查看具有流派的文档：音乐

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-01T12:16:22.100

您想将字典构建限制为单个字段吗？如果是这样，您可以修改 solrconfig.xml 并将字典源设置为“流派”字段：

```
<searchComponent name="spellcheck" class="solr.SpellCheckComponent">

  <lst name="spellchecker">
    <str name="name">default</str>
    <str name="classname">solr.IndexBasedSpellChecker</str>
    <str name="field">genre</str> 
```

编辑：所以你有多个国家，每个国家都有不同的产品。使用称为分片的技术将每个国家/地区拆分为自己的核心可能更实用，这样您就可以在每个核心中配置模块。

阅读：[http ://wiki.apache.org/solr/CoreAdmin](http://wiki.apache.org/solr/CoreAdmin)

# c# - 如何按 .NET 2.0 中的特定属性对列表进行排序？

> ID：15742714
> 
> 赞同：0
> 
> 时间：2013-04-01T11:37:06.620
> 
> 标签：c#, .net, linq, sorting, syntax

在 .NET 4.0 中，您可以简单地使用 LINQ 按特定属性快速排序列表：

```
 List<Point> list = ...;    
  sorted = list.OrderBy(p => p.X).ToList(); // sort list of points by X 
```

当你不能使用 .NET 4.0 LINQ 语法时，你能做类似的事情吗？

是否有单行排序语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T11:38:20.173

检查[Sort](http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx)方法，它需要`Comparison<T>`. 可从`.NET 2.0`

```
var list = new List<Point>{ /* populate list */ };

list.Sort(Comparison);

public int Comparison (Point a, Point b)
{
    //do logic comparison with a and b
    return -1;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T11:44:14.037

你需要使用一个委托，几乎是一个单行:)

```
list.Sort(delegate(Point p1, Point p2){
        return p1.X.CompareTo(p2.X);
}); 
```

# sql-server - 如何在一个逗号分隔值中获取列值

> ID：15742716
> 
> 赞同：21
> 
> 时间：2013-04-01T11:37:12.950
> 
> 标签：sql-server

我有一个包含如下行的表

```
ID  User      Department
1   User1     Admin
2   User1     Accounts
3   User2     Finance
4   User3     Sales
5   User3     Finance 
```

我需要一个选择查询，其结果如下格式

```
ID  User      Department
1   User1     Admin,Accounts
2   User2     Finance
3   User3     Sales, Finance 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-01T11:47:35.943

你用 sql-server 和 plsql 标记了这个问题，所以我将为 SQL Server 和 Oracle 提供答案。

在 SQL Server 中，您可以使用`FOR XML PATH`将多行连接在一起：

```
select distinct t.[user],
  STUFF((SELECT distinct ', ' + t1.department
         from yourtable t1
         where t.[user] = t1.[user]
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,2,'') department
from yourtable t; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!18/f3a79/1/0)。

在 Oracle 11g+ 中，您可以使用`LISTAGG`：

```
select "User",
  listagg(department, ',') within group (order by "User") as departments
from yourtable
group by "User" 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/7119a/1)

在 Oracle 11g 之前，您可以使用以下`wm_concat`功能：

```
select "User",
  wm_concat(department) departments
from yourtable
group by "User" 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-11-21T09:17:58.637

在 Sql Server 中你可以使用它。

```
DECLARE @UserMaster TABLE( 

    UserID INT NOT NULL, 

    UserName varchar(30) NOT NULL 

); 

INSERT INTO @UserMaster VALUES (1,'Rakesh')

INSERT INTO @UserMaster VALUES (2,'Ashish')

INSERT INTO @UserMaster VALUES (3,'Sagar')

SELECT * FROM @UserMaster

DECLARE @CSV VARCHAR(MAX) 

SELECT @CSV = COALESCE(@CSV + ', ', '') + UserName from @UserMaster 

SELECT @CSV AS Result 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-12-16T08:39:59.863

您可以使用以下 SQL 执行此操作：

```
SELECT STUFF
(
    (
        SELECT ',' + s.FirstName 
        FROM Employee s
        ORDER BY s.FirstName FOR XML PATH('')
    ),
     1, 1, ''
) AS Employees 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-09-27T07:01:19.277

MYSQL：要将列值作为一个逗号分隔值使用 `GROUP_CONCAT( )`函数作为

```
GROUP_CONCAT(  `column_name` ) 
```

例如

```
SELECT GROUP_CONCAT(  `column_name` ) 
FROM  `table_name` 
WHERE 1 
LIMIT 0 , 30 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-08-29T09:57:12.487

尝试以下查询：

```
select distinct Users,
 STUFF(
        (
        select ', ' + d.Department FROM @temp d
        where t.Users=d.Users
group by d.Department for xml path('')
        ), 1, 2, '') as Departments
 from @temp t 
```

## 执行：

```
Declare @temp Table(
ID int,
Users varchar(50),
Department varchar(50)
)
insert into @temp
(ID,Users,Department)
values
(1,'User1','Admin')
insert into @temp
(ID,Users,Department)
values
(2,'User1','Accounts')
insert into @temp
(ID,Users,Department)
values
(3,'User2','Finance')
insert into @temp
(ID,Users,Department)
values
(4,'User3','Sales')
insert into @temp
(ID,Users,Department)
values
(5,'User3','Finance')

 select distinct Users,
 STUFF(
        (
        select ', ' + d.Department FROM @temp d
        where t.Users=d.Users
group by d.Department for xml path('')
        ), 1, 2, '') as Departments

 from @temp t 
```

## 结果将是：

[![在此处输入图像描述](https://i.stack.imgur.com/nNFML.png)](https://i.stack.imgur.com/nNFML.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-07-10T11:50:19.457

**对于 Mysql：**

```
SELECT t.user, 

(SELECT GROUP_CONCAT( t1.department ) FROM table_name t1 WHERE t1.user = t.user)department

FROM table_name t
GROUP BY t.user
LIMIT 0 , 30 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-02-04T06:30:25.773

```
SELECT name, GROUP_CONCAT( section ) 
FROM  `tmp` 
GROUP BY name 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-08-13T13:49:05.123

我想这对你来说很容易。我正在使用 group_concat 将不同的值与我们定义的分隔符连接起来

```
select ID,User, GROUP_CONCAT(Distinct Department order  by Department asc 

separator ', ') as Department from Table_Name   group by ID 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-03-25T07:10:44.870

对于不支持 WM_CONCAT 的 Oracle 版本，可以使用以下

```
 select "User", RTRIM(
     XMLAGG (XMLELEMENT(e, department||',') ORDER BY department).EXTRACT('//text()') , ','
     ) AS departments 
  from yourtable 
  group by "User" 
```

这个功能更加强大和灵活——您可以像在**listagg**中一样在每个组中指定分隔符和排序顺序。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-28T08:54:34.997

```
DECLARE @UserMaster TABLE(
    UserID INT NOT NULL,    
    UserName varchar(30) NOT NULL,
    Department varchar(30) NOT NULL
);

INSERT INTO @UserMaster VALUES (1,'User1', 'Admin')
INSERT INTO @UserMaster VALUES (2,'User1', 'Accounts')
INSERT INTO @UserMaster VALUES (3,'User2', 'Finance')
INSERT INTO @UserMaster VALUES (1,'User3', 'Sales')
INSERT INTO @UserMaster VALUES (2,'User3', 'Finance')

SELECT UserName, String_Agg(Department, ',') as Department 
FROM @UserMaster
group by UserName 
```

# java - Hazelcast：分布式执行和本地成员信息

> ID：15742718
> 
> 赞同：1
> 
> 时间：2013-04-01T11:37:13.420
> 
> 标签：java, hazelcast

我正在寻找在任务执行中查找本地 hazelcast 成员的方法。我正在使用的版本是 2.5-SNAPSHOT。教程中的片段似乎不起作用：

```
public class Echo implements Callable<String>, Serializable {
    public String call() {
        return Hazelcast.getCluster().getLocalMember().toString() + ":" + input;
    }
} 
```

现在调用已弃用的 getCluster() 会触发创建和连接**新成员。**

目前，我设法通过 HazelcastInstance.getCluster().getLocalMember() 获得它，但我不想通过这种注入使我的可调用对象复杂化。

您能否建议查找本地成员的正确方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T12:47:28.260

可调用对象应实现 HazelcastInstanceAware。

这里的例子：

```
public class EchoExample {

    public static void main(String[] args) throws ExecutionException, InterruptedException {
        Config config = new Config();
        HazelcastInstance instance1 = Hazelcast.newHazelcastInstance(config);
        HazelcastInstance instance2 = Hazelcast.newHazelcastInstance(config);
        ExecutorService executorService = instance1.getExecutorService("exec1");
        Future<String> future = executorService.submit(new Echo());
        System.out.println(future.get());

    }

    static class Echo implements HazelcastInstanceAware, Serializable, Callable<String> {
        transient HazelcastInstance localInstance;

        public String call() throws Exception {
            return localInstance.toString();
        }

        @Override
        public void setHazelcastInstance(HazelcastInstance hazelcastInstance) {
            this.localInstance = hazelcastInstance;
        }
    }

} 
```

# php - 取消设置局部变量

> ID：15742721
> 
> 赞同：4
> 
> 时间：2013-04-01T11:37:17.463
> 
> 标签：php, codeigniter

在 Code Igniter 框架中有几个这种行为的例子——在方法的开头创建一个变量，使用它，在方法结束之前，取消设置这个变量。

他们为什么要取消它们？重点是什么？据我所知，局部变量无论如何都会在方法结束时消失。

来自会话类的代码点火器（见最后几行）：

```
function sess_read()
{
    // Fetch the cookie
    $session = $this->CI->input->cookie($this->sess_cookie_name);

    // No cookie?  Goodbye cruel world!...
    if ($session === FALSE)
    {
        log_message('debug', 'A session cookie was not found.');
        return FALSE;
    }

    // Decrypt the cookie data
    if ($this->sess_encrypt_cookie == TRUE)
    {
        $session = $this->CI->encrypt->decode($session);
    }
    else
    {
        // encryption was not used, so we need to check the md5 hash
        $hash    = substr($session, strlen($session)-32); // get last 32 chars
        $session = substr($session, 0, strlen($session)-32);

        // Does the md5 hash match?  This is to prevent manipulation of session data in userspace
        if ($hash !==  md5($session.$this->encryption_key))
        {
            log_message('error', 'The session cookie data did not match what was expected. This could be a possible hacking attempt.');
            $this->sess_destroy();
            return FALSE;
        }
    }

    // Unserialize the session array
    $session = $this->_unserialize($session);

    // Is the session data we unserialized an array with the correct format?
    if ( ! is_array($session) OR ! isset($session['session_id']) OR ! isset($session['ip_address']) OR ! isset($session['user_agent']) OR ! isset($session['last_activity']))
    {
        $this->sess_destroy();
        return FALSE;
    }

    // Is the session current?
    if (($session['last_activity'] + $this->sess_expiration) < $this->now)
    {
        $this->sess_destroy();
        return FALSE;
    }

    // Does the IP Match?
    if ($this->sess_match_ip == TRUE AND $session['ip_address'] != $this->CI->input->ip_address())
    {
        $this->sess_destroy();
        return FALSE;
    }

    // Does the User Agent Match?
    if ($this->sess_match_useragent == TRUE AND trim($session['user_agent']) != trim(substr($this->CI->input->user_agent(), 0, 120)))
    {
        $this->sess_destroy();
        return FALSE;
    }

    // Is there a corresponding session in the DB?
    if ($this->sess_use_database === TRUE)
    {
        $this->CI->db->where('session_id', $session['session_id']);

        if ($this->sess_match_ip == TRUE)
        {
            $this->CI->db->where('ip_address', $session['ip_address']);
        }

        if ($this->sess_match_useragent == TRUE)
        {
            $this->CI->db->where('user_agent', $session['user_agent']);
        }

        $query = $this->CI->db->get($this->sess_table_name);

        // No result?  Kill it!
        if ($query->num_rows() == 0)
        {
            $this->sess_destroy();
            return FALSE;
        }

        // Is there custom data?  If so, add it to the main session array
        $row = $query->row();
        if (isset($row->user_data) AND $row->user_data != '')
        {
            $custom_data = $this->_unserialize($row->user_data);

            if (is_array($custom_data))
            {
                foreach ($custom_data as $key => $val)
                {
                    $session[$key] = $val;
                }
            }
        }
    }

    // Session is valid!
    $this->userdata = $session;
    unset($session);

    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T11:40:36.053

[unset()](http://php.net/manual/en/function.unset.php)销毁指定的变量。但`unset()`不会释放 PHP 脚本消耗的内存，它会释放它以供 PHP 脚本本身使用。它不会强制立即释放内存。PHP 的垃圾收集器会在它认为合适的时候执行它 - 有意尽快，因为无论如何都不需要这些 CPU 周期，或者直到脚本耗尽内存之前，无论首先发生什么。

因此，如果您在循环中创建 10 次大小为 10M 的变量并在循环结束时取消设置（或重写）它，那么到循环结束时内存消耗应该低至 10M + 所有其他变量.

阅读更多

[用 PHP 释放内存有什么好处：unset() 或 $var = null](https://stackoverflow.com/questions/584960/whats-better-at-freeing-memory-with-php-unset-or-var-null)

[为什么 UNSET 和 NULL 以不同的方式工作](https://stackoverflow.com/questions/10647795/why-unset-and-null-are-working-in-different-ways)

# java - java拖放 - 列表不带参数

> ID：15742727
> 
> 赞同：0
> 
> 时间：2013-04-01T11:37:37.027
> 
> 标签：java, swing, list, drag-and-drop

我正在尝试制作一个简单的应用程序，它使用 DnD 来获取文件路径。我在[这里](https://stackoverflow.com/questions/811248/how-can-i-use-drag-and-drop-in-swing-to-get-file-path)找到了几乎相同的东西，我想使用它。但我得到一个错误 - 类型列表不带参数。当我尝试 DnD 是否有效时，我得到了肯定的答案，但我不知道任何其他可能性，如何获取文件路径。这是我使用的代码：

```
jTextField8.setDropTarget(new DropTarget() {
        public synchronized void drop(DropTargetDropEvent evt) {
            try {
                evt.acceptDrop(DnDConstants.ACTION_COPY);
                List<File> droppedFiles = (List<File>) evt.getTransferable().getTransferData(DataFlavor.javaFileListFlavor);
                for (File file : droppeFiles) {
                    jTextArea1.append("Drag & Drop OK");
                }
            } catch (UnsupportedFlavorException ex) {
                Logger.getLogger(MainForm.class.getName()).log(Level.SEVERE, null, ex);
            } catch (IOException ex) {
                Logger.getLogger(MainForm.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:38:40.437

检查你的进口。

您可能正在使用`java.awt.List`而不是`java.util.List<E>`. `java.awt.List`是一个非通用的 GUI 组件（即，它不接受类型参数），而`java.awt.List<E>`是一个通用的数据结构。

如果您*有意*使用`java.awt.List`GUI，请记住它已被弃用（或至少被放弃）作为原始 AWT 的一部分；考虑切换到`javax.swing.JList`.

如果您*绝对必须*在同一个文件中使用`java.awt.List`和：`java.util.List<E>`

```
java.awt.List myGuiList = new java.awt.List();
java.util.List<File> myFileList = new ArrayList<File>(); 
```

# javascript - 在 Durandal 模板项目中使用 TimePicker 或 Datepicker

> ID：15742728
> 
> 赞同：1
> 
> 时间：2013-04-01T11:37:40.437
> 
> 标签：javascript, durandal

我对杜兰达尔很陌生。我尝试将时间选择器添加到项目中，如下所示。schedule.js 代码：

```
define([], function (require) {
var script = require('jquery.ptTimeSelect');
var app = require('durandal/app');

var vm = {
    viewAttached: viewAttached,
};
return vm;

function viewAttached(view) {
    $(view).find('#sample1').ptTimeSelect();
    //$('#sample1').ptTimeSelect();

    console.log("activated schedule module");
    return true;
}
}); 
```

这里 jquery.ptTimeSelect 是时间选择器 js 文件。我真的需要在这里或其他地方添加 jquery.ptTimeSelect.js。

schedule.html ：

```
 <section>
    <p>
        <label>Start</label><br />
        <input id="sample1" class="ui-widget-content" name="s1Time2" value="" />
    </p>

</section> 
```

我面临的问题我在页面底部获得了基本的时间选择器。我没有找到将 js 和 css 文件添加到项目的位置。请帮助我对此很陌生。

我正在使用来自以下链接的时间选择器[http://pttimeselect.sourceforge.net/example/index.html](http://pttimeselect.sourceforge.net/example/index.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:32:58.250

要使用可靠的时间选择器控件和 durandal 快速启动和运行，您可以按照以下步骤操作。

按照与以下顺序相同的顺序将这些脚本添加到您的页面。在加载 require/durandal 之前将它们添加为标准标签。

1.  jQuery [http://jquery.com/](http://jquery.com/)
2.  jQueryUI [http://jqueryui.com/](http://jqueryui.com/)
3.  这个 timepicker 控件（基于 jquery ui）[http://fgelinas.com/code/timepicker/](http://fgelinas.com/code/timepicker/)
4.  heiserman 提到的 Steve Saunderson 的 jQueryUI Knockout 绑定。[https://github.com/SteveSanderson/knockout/wiki/Bindings---jqueryui-widgets](https://github.com/SteveSanderson/knockout/wiki/Bindings---jqueryui-widgets)

以下是您可能引用上述脚本的方式，这些脚本标签应该进入您的主布局页面、index.html 或托管您的 durandal 应用程序的任何页面：

```
<head>
   <script src="/Scripts/jquery-1.9.1.js"></script>
   <script src="/Scripts/jquery-ui-1.10.0.js"></script>
   <script src="/Scripts/jquery.ui.timepicker.js"></script>
   <script src="/Scripts/knockout-jquery-ui-widget.js"></script>
   <script type="text/javascript" src="/App/durandal/amd/require.js" data-main="/App/main"></script>
</head> 
```

然后你可以像这样在你的 durandal 视图中简单地创建一个时间选择器：

```
<input type="text" placeholder="Choose Time" data-bind="jqueryui: { widget: 'timepicker', options: { showPeriod: true }}"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:12:32.710

我不确切知道您的脚本是什么样的，但我不确定它是否能够以您加载它的方式正确执行（作为 AMD 模块）。如果您想以这种方式继续，我将使用 ptTimeSelect.js 脚本并使用其他 jQuery 脚本全局加载它。

**但是**，在 Durandal 应用程序中，通常最好避免直接从视图模型中操作 DOM。最好的方法是创建一个自定义的 ko 绑定处理程序并在绑定中执行您的 DOM 操作。这样您就不必担心时间问题，并且您的视图模型与直接的 UI 操作保持隔离。

值得庆幸的是，这并不像听起来那么难。史蒂夫·桑德森（Steve Sanderson）整理了一个简单的 ko 绑定，您可以开箱即用。看看这个要点：[https ://github.com/SteveSanderson/knockout/wiki/Bindings---jqueryui-widgets](https://github.com/SteveSanderson/knockout/wiki/Bindings---jqueryui-widgets)

上面的链接引用了一个现场 jsfiddle 演示。这个演示没有使用Durandal，但是相关的淘汰赛概念是一样的。

这里有一些关于自定义绑定的很好的一般信息：http: [//knockoutjs.com/documentation/custom-bindings.html](http://knockoutjs.com/documentation/custom-bindings.html)

# javascript - 改变相同的像素颜色值

> ID：15742732
> 
> 赞同：0
> 
> 时间：2013-04-01T11:37:53.570
> 
> 标签：javascript, canvas, three.js, webgl

我正在尝试在 webgl 中创建交互式地图。地图图像中的每个国家都充满了独特的颜色。当用户单击图像时，我使用 readPixels() 读取单击点的像素数据，并根据像素的颜色来突出显示该地区。但是每次单击同一个国家/地区都会返回稍微不同的颜色，从而导致有关单击的国家/地区的信息不正确。

如何消除在用户单击的图像上查找点的确切颜色时出现的错误？阴影效果或照明位置是否会导致此问题？或者是否有不同的方法来识别用户点击图片的位置以及它对应的国家/地区？

```
 var texture = THREE.ImageUtils.loadTexture('map_indexed.png');
var material = new THREE.MeshLambertMaterial({map: texture});

var sphere = new THREE.Mesh(new THREE.SphereGeometry(globeRadius, globeRadius, globeRadius),material);
sphere.overdraw = true;
scene.add(sphere); 
```

读取像素数据

```
 var x = e.pageX ;
            var y = e.pageY ;
            var canvas = document.getElementById('canvas');

            var gl = renderer.getContext();

            //read the pixel under the mouse from the texture

            var pixelBuffer = new Uint8Array( 4 );

            var xp=gl.readPixels( x, y, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, pixelBuffer ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:32:50.947

实际上，阴影/照明效果可能会改变颜色。尝试使用 MeshBasicMaterial 材质而不是 MeshLambertMaterial 并查看是否有帮助（MeshBasicMaterial 在您的场景中不需要灯光）。

# javascript - 如何使用javascript扩展文本字段以删除滚动

> ID：15742740
> 
> 赞同：1
> 
> 时间：2013-04-01T11:38:34.983
> 
> 标签：javascript, dynamics-crm-2011, crm, dynamics-crm-online

我在网上处理动态 CRM 2011，在那里打印文档时遇到了一些麻烦。

如果滚动到表单中，那么在打印窗口中它也会滚动，我无法对它做任何事情，因为那里有任何编辑功能。

我有兴趣可以调整/扩展文本字段的大小以使用户无需滚动即可看到文本吗？

JavaScript中是否有任何方法可以通过调整字段大小来消除滚动？

在动态 CRM 中，我可以在 onload 事件上使用此类功能。

提前致谢

试过了

```
 function textAreaAdjust(o) {
o.style.height = "1px";
o.style.height = (25+o.scrollHeight)+"px";
} 
```

出现错误：

```
'style' -  is null or it's not an object 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T10:11:49.960

不支持的方式。

[Microsoft Dynamics CRM 支持的扩展](http://msdn.microsoft.com/en-us/library/gg328350.aspx)

> 表单脚本
> 
> 支持通过自定义工具关联到表单中可用事件的 Microsoft JScript 函数。使用 Xrm.Page.data 对象中可用的文档化对象和方法执行时，支持与表单中的数据交互。使用 Xrm.Page.ui 对象中可用的文档化对象和方法执行时，支持与表单外观和行为的交互。但是，与 HTML 文档对象模型 (DOM) 的任何直接交互都可能无法升级。表单的结构和表单中使用的 HTML 元素可能会在未来的版本中发生变化。有关详细信息，请参阅为 Microsoft Dynamics CRM 表单编写代码。

据我所知`Xrm.Page.ui`，不支持这种功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T11:50:29.400

```
You should use below jquery plugin to auto expand textarea. 
```

[http://bgrins.github.com/ExpandingTextareas/](http://bgrins.github.com/ExpandingTextareas/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-03T16:09:50.130

如果您希望将 Web 资源嵌入到您的 CRM 2011/2013/2015 表单中，您可以以受支持的方式执行此操作。您将不得不查看 CRM SDK，了解如何在 JavaScript 中从表单中检索字段的值，然后使用它来使用 Rajnikant 提到的 jQuery 创建一个文本框。当您在 Web 资源中执行此操作时，您不受限于使用 Xrm.Page 模型，您可以使用普通的 JavaScript。

如需帮助制作查询以将您的字段数据导入 Web 资源，请使用此工具来简化操作：[https ://crmrestbuilder.codeplex.com/](https://crmrestbuilder.codeplex.com/)

# ios - iOS 重构/设计：一个视图控制器来管理不同的模型/流？

> ID：15742742
> 
> 赞同：0
> 
> 时间：2013-04-01T11:38:38.313
> 
> 标签：ios, objective-c, cocoa-touch, refactoring

我正在开发一个应用程序，其中有不同类型的“流”（想想 Twitter）。在其中，我有一个非常大的视图控制器来管理其中的大部分内容。该流由不同格式的两个主要实体 - 用户和帖子组成。在视图控制器中，我有一个`NSSTring`属性来确定它是哪种流。这导致了很多：

```
if ([self.postType isEqualToString:@"stream"]) {

    // Do stuff

} else if [self.postType  ...
[...]
[...] 
```

我不知道这是否是最好的解决方案设计，它会导致很多耦合。好处是我避免了很多重复。但是有没有更好/更好的方法来做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:55:42.263

如果你真的想避免继承，你可以为每个流使用不同的方案。为每个流类型映射您的选择器（例如，为每个方案 [C-style array] 定义一个选择器索引枚举和一个选择器数组，[请参见此处](https://stackoverflow.com/questions/2226520/how-to-create-an-array-of-selectors-in-objective-c)）。每个方案只会访问不同的选择器数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T11:52:22.340

```
typedef enum{
    stream,
    --,
    --
}postType; 
```

像这样使用更好..

```
 switch (_postType) 
    {
        case stream:
            //do what you want
            break;
        case --:
            break;
         case --:
            break;
    } 
```

# rest - 一个支持 HATEOAS 的 EmberJS 数据存储适配器

> ID：15742754
> 
> 赞同：5
> 
> 时间：2013-04-01T11:39:09.970
> 
> 标签：rest, ember.js, ember-data, hateoas, json-api

我正在创建一个应用程序，我真的希望它遵循[HATEOAS](http://en.wikipedia.org/wiki/HATEOAS) REST 要求，非常 RESTful。在前端，我正在考虑使用 Ember，因为它似乎与我喜欢构建前端应用程序的方式非常一致。不幸的是，内置的 REST 数据源适配器似乎不理解如何导航遵循 HATEOAS 的 API - 我必须根据 ID 指定数据，而不是通过 URL。

Google 没有帮助我 -**有人知道支持 HATEOAS的数据适配器吗*？***如果没有，我会尝试建造一个，但我不想浪费时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T18:41:35.357

Ember Data strives to follow the [JSON API](http://jsonapi.org/) spec, which came out of the formats that the REST adapter follows.

There are [two formats](http://jsonapi.org/format/), and while the ID-based format requires the client to have the URLs hard-coded for the resources, the URL-based format works with URL templates to include the links in the representations directly.

# android - 如何将垂直项目添加到gridview

> ID：15742756
> 
> 赞同：1
> 
> 时间：2013-04-01T11:39:14.417
> 
> 标签：android

如果我们将项目`gridView`添加为自动添加为水平，如何`gridView`在Android中从上到下按列垂直添加项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:53:54.843

GridView，在大多数情况下使用 ListAdapter。您不会将项目添加到 GridView，而是将它们添加到适配器。

ListAdapters 并非旨在为您提供基于网格的布局。所以，这是不可能的。我不认为 GridView 支持在随机索引处添加项目。至少，文档没有提到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T13:42:53.573

**这是网格视图适配器的 getView 方法**

```
 @Override
    public View getView(final int i, View view, ViewGroup viewGroup) {
        ListView listView;
        if (view == null) {
            listView = (ListView) LayoutInflater.from(mContext).inflate(R.layout.product_list_row, null);
            listView.setLayoutParams(new GridView.LayoutParams(COLUMN_WIDTH, COLUMN_WIDTH * max_size));
            listView.setDividerHeight(0);
            listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
                @Override
                public void onItemClick(AdapterView<?> adapterView, View view, int index, long l) {
                    if (getItem(i).size() > index) {
                        Product product = getItem(i).get(index);
                        if (product != null && !product.getStartPrice().equalsIgnoreCase("")) {
                            ItemDetailDialog dialog = new ItemDetailDialog(mContext, getItem(i), index);
                            dialog.show();
                        }
                    }
                }
            });

            listView.setOnTouchListener(new View.OnTouchListener() {
                @Override
                public boolean onTouch(View view, MotionEvent motionEvent) {
                    return false;
                }
            });
        } else {
            listView = (ListView) view;
        }

        ListViewAdapter adapter = new ListViewAdapter(getItem(i));
        listView.setAdapter(adapter);

        listView.setCacheColorHint(0);

        listView.setId(i);

        listView.setOnTouchListener(new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                // Disallow the touch request for parent scroll on touch of child view
//                v.getParent().requestDisallowInterceptTouchEvent(true);
                return false;
            }
        });

        return listView;
    } 
```

**这是列表视图适配器**

```
/**
 * list view adapter
 */
private class ListViewAdapter extends BaseAdapter {

    // list products
    private List<Product> products;

    //
    ProductRowView productRowView;

    //
    Product product;

    // constructor
    private ListViewAdapter(List<Product> products){
        this.products = products;
    }

    @Override
    public int getCount() {
        return products.size();
    }

    @Override
    public Product getItem(int i) {
        if (products.size() <= i )
            return null;
        return products.get(i);
    }

    @Override
    public long getItemId(int i) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int index, View convertView, ViewGroup parent) {

        // any code
        return convertView;
    } 
```

# jquery - 如何在jquery中打破链接选择器

> ID：15742760
> 
> 赞同：1
> 
> 时间：2013-04-01T11:39:30.117
> 
> 标签：jquery

我对打破`jquery chaining selectors`.

例如，考虑这是我的示例代码，

```
<script>
      $("#button1, #button2, #button3, #button4, #button5, #button6 ").show();
</script> 
```

我想改变这种格式，

```
<script>
      $("#button1, #button2, 
         #button3, #button4, 
         #button5, #button6 ").show();
</script> 
```

请帮忙。提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:41:04.927

`string`我们向 jQuery 选择器函数传递一个。上面两个的区别在于第一个字符串格式正确，第二个字符串你必须连接它否则你会得到`error`. 你可以像这样连接它，

```
$("#button1, #button2, \
     #button3, #button4, \
     #button5, #button6 ").show(); 
```

或者

```
 $("#button1, #button2,"+ 
         "#button3, #button4, "+
         "#button5, #button6 ").show(); 
```

您可以为所有按钮分配一个公共`class`按钮并使用[**类选择器**](http://api.jquery.com/class-selector/)来显示隐藏它们。

```
$('.button-class').show(); 
```

如果您有问题中给出的 id 模式，则可以[**使用通配符开头的属性选择器。**](http://api.jquery.com/attribute-starts-with-selector/)

```
$('[id^=button]).show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T11:41:26.210

您可以使用连接`+`

```
$("#button1, #button2,"+ 
         "#button3, #button4, "+
         "#button5, #button6 ").show(); 
```

或使用`\`

```
$("#button1, #button2, \
   #button3, #button4, \
   #button5, #button6 ").show(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T11:42:44.000

您可以连接使用`\`字符的字符串以将字符串换行到下一行。

```
$("#button1, #button2," +
  "#button3, #button4," +
  "#button5, #button6 ").show(); 
```

或者

```
$("#button1, #button2, \
   #button3, #button4, \
   #button5, #button6 ").show(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T11:46:06.027

尝试这样的事情

```
$("#button1, " + 
    "#button2, " +
    "#button3").click(function(){
    alert("asdas");
}); 
```

# javascript - 将变量附加到 XMLHttpRequest 的最佳实践？

> ID：15742762
> 
> 赞同：0
> 
> 时间：2013-04-01T11:39:41.440
> 
> 标签：javascript, ajax

```
var xhr=new XMLHttpRequest();
xhr.open('GET','example.php');
xhr.myVar=0;
xhr.onreadystatechange=function(){
  this.myVar=this.responseText.length;
  var s=this.readyState+":"+this.myVar+":"+this.responseText;
  document.getElementById('x').innerHTML=s;
  }; 
```

我在网页上有这个脚本（和一个`<p id="x"></p>`）。我想附加一个变量以在`onreadystatechange`函数中使用（显然，在实际代码中，我用它做的事情比我在这里做的更有趣）。

这在我尝试过的浏览器中运行良好，但这让我感到紧张。我应该遵循一个约定吗？例如，带有下划线的自定义变量前缀，或类似的东西？

顺便说一句，附加一个成员变量感觉完全正确：主要的替代方法是使用一个全局变量，我一点也不喜欢（我可能在页面上有两个 XMLHttpRequest 对象）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:49:13.580

您可以使用[闭包](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Closures)。

假设这个 ajax 请求在函数体内部，那么您可以声明`myVar`using`var`关键字并在`onreadystatechange`函数内部使用它，就好像它是一个局部变量一样。

```
function x() {

    ....
    ....

    var xhr = new XMLHttpRequest();
    xhr.open('GET', 'example.php');
    var myVar = 0;
    xhr.onreadystatechange = function() {
        this.myVar = this.responseText.length;
        var s = this.readyState + ":" + myVar + ":" + this.responseText;
        document.getElementById('x').innerHTML = s;
    };

    ....
    ....

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:06:31.823

你正在做的已经很好了。你没有污染全局范围，附加到你知道你已经在函数中拥有的东西（因为函数 onreadystatechange 被调用并`this`设置为 XHR 对象）。但是，您可能需要改进以下几点：

*   你的变量名和现在一样好。如果您想要/需要调用您的变量之一`responseText`怎么办？
*   范围界定可能会派上用场。
*   你可能真的想阅读 XHR 以及如何去做。现在，您的代码无法在 IE7/8 上运行。

因为 XHR 只回调一次，所以很多问题并不适用于此，但想象一下这种情况：你有一个神秘的类`C`，它有一个名为 的回调`feedback`，它接受闭包。此回调触发四次，您需要将*相同的*变量传递给四个回调，而回调不可能更改此变量。您的代码对此进行了分解。微不足道，我知道，但值得在第一枪就做到最好。您也正在遵循 DRY 方法。

我将如何做到这一点：

```
function callCObject(_c_init_vars, callback) {
  var tempObject = new C(); // Instantiating my "C" object, whatever it may be
  var tCallback = function() {
     callback.apply(this,_c_init_vars);
  }
  tempObject.callback = tCallback;
  tempObject.run();
} 
```

而不是手动实例化C，我会这样做：

```
var myCallback = function(a,b,c) { console.log(a); console.log(b); };
callCObject([1,6], myCallback); 
```

只是为了证明实现：http: [//jsfiddle.net/d3yAg/](http://jsfiddle.net/d3yAg/)

# vim - Vim 直观地选择一个 Bash 变量

> ID：15742763
> 
> 赞同：2
> 
> 时间：2013-04-01T11:39:46.103
> 
> 标签：vim

在这段代码中：

```
printf "%-${field_length}s : %b%s${my_text_style_plain}\n" \
... 
```

我的光标`p`在`my_text_style_plain`.

我想直观地选择这个：

```
${my_text_style_plain} 
```

序列`v``a``}`并`v``a``{`选择这个：

```
{my_text_style_plain} 
```

如果无法方便地准确选择我想要的内容，我可能会很高兴快速移动到`$`or `{`。

我知道我可以`F``{`但实际上我需要经常“向后查找”封闭括号，当我处于多行函数的中间并且我想重命名它时，例如，这可能也很有用。

`F``{`在这种情况下是有限的，因为它只能`{`在同一行上找到 if。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T11:54:11.987

正如您所说，`v``a``}`选择`{my_text_style_plain}`（甚至跨多行）。

要快速选择前导`$`，您可以`o`跳到视觉选择的开头，然后`h`将其向左扩展一个字符。

当然，如果这是您需要做的很多事情，您可以将其映射到其他键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T14:07:46.360

您可以执行此操作或将其添加到您的 vimrc：（围绕变量）

```
onoremap av :<c-u>normal! F$vf}<cr> 
```

这样你就可以做到：（和之间`$`的光标`}`）

```
cav   - remove the ${foo} and switch to insert mode
dav   - delete the ${foo}
yav   - yank the ${foo} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T12:31:00.137

您可以创建一个简单的映射：

```
nnoremap <F6> F$vf} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-08T09:33:55.047

你也可以`iskeyword+=$`用来让 Vim 将美元符号识别为关键字。不过，这只对 有帮助，对`$VAR`没有帮助`${VAR}`。

```
autocmd FileType sh setlocal iskeyword+=$ 
```

然后按下`viw`也会选择`$`。这与[vim-surround](https://github.com/tpope/vim-surround)结合使用特别有用。

# perl - Perl 中的赋值运算符 (=) 如何在内部工作？

> ID：15742765
> 
> 赞同：2
> 
> 时间：2013-04-01T11:39:46.833
> 
> 标签：perl, assignment-operator

假设 num 是一个数组，

```
@num = (1 .. 10); 
```

要找到它的长度，我们使用以下表达式，

```
$num = @num; 
```

然后我`$num`在下面的作业中使用了相同的方法。

```
@slicenum = $num[1 .. 6]; 
```

我知道对于切片数组，我们使用`@num`而不是`$num`. 它运行良好，没有抛出任何错误。但是当我打印 的值时`@slicenum`，它给了我 2 作为结果。

```
@slicenum = $num[1 .. 6, 10 .. 20]; 
```

对于上述作业，结果我得到了 1。

虽然值`$num`仍然是 10，但请解释一下上述两个赋值中发生了什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-01T11:57:20.073

您已经发现了一些 Perl 魔法在起作用。这个标量上下文中的[范围运算符](http://perldoc.perl.org/perlop.html#Range-Operators)（也就是amon[指出](https://stackoverflow.com/users/1521179/amon)的*触发器运算符*）似乎想要将范围与 进行比较，它在与整数一起使用时会这样做：`..``$.`

```
$ perl -lwe '@a = 1..10; @foo = $a[1..6]; print @foo' 
Use of uninitialized value $. in range (or flip) at -e line 1.
Argument "" isn't numeric in array element at -e line 1.
1

$ perl -lwe '$x=<>; @a = 1..10; @foo = $a[1..6]; print @foo' somefile.txt
Name "main::x" used only once: possible typo at -e line 1.
2 
```

正如[darch 所](https://stackoverflow.com/users/9719/darch)提到的，`$a[1 .. 6]`将标量上下文强加给下标内的表达式：`[ EXPR ]`。与使用时相反`@a[1 .. 6]`，其中强加了*列表上下文。*

所以，这部分：

```
1 .. 6 
```

在标量上下文中意味着`if ($. >= 1 and $. <= 6)`

当`$.`未初始化时，它返回`undef`（`0`在数字上下文中计算为）并发出未初始化的警告。当`$.`不是未初始化时（即当一个文件已经打开并在程序中的某个地方读取时）它返回真或假，或者在这种情况下`1`或空字符串。在您的情况下，它似乎返回`1`，然后导致

```
$num[1 .. 6] 
```

..评估为

```
$num[1] 
```

作为回报，它返回元素编号 1，即`2`.

因此，简而言之：该语句`1 .. 6`具有不同的含义，具体取决于上下文。在列表上下文中，它返回`1,2,3,4,5,6`，即一个整数范围。在标量上下文中，`1`如果`$.`（行数）变量在 1 或 6 之间，则返回 true ()，否则返回 false（空字符串）。

以下是文档中对这种现象的提及：

> 在列表上下文中，它返回从左值到右值计数（递增）的值列表。
> 
> [ ... ]
> 
> 在标量上下文中，“..”返回一个布尔值。该运算符是双稳态的，就像一个触发器，并模拟 sed、awk 和各种编辑器的行范围（逗号）运算符。

# googletest - 模拟gtest编译错误

> ID：15742766
> 
> 赞同：1
> 
> 时间：2013-04-01T11:39:47.757
> 
> 标签：googletest

我已经创建了一个类说“GTEST_static_class.h”并为它创建了一个模拟 MockGTEST_static_class.h，之后我创建了 GTest_static_example.cpp，它调用了模拟类 MockGTEST_static_class。

问题是我收到编译错误..

## 编译错误

```
/x/opt/pp/include/gmock/gmock-spec-builders.h: In copy constructor âtesting::internal::FunctionMocker<void ()()>::FunctionMocker(const testing::internal::FunctionMocker<void ()()>&)â:
/x/opt/pp/include/gmock/gmock-spec-builders.h:1656: error: âtesting::internal::FunctionMockerBase<F>::FunctionMockerBase(const testing::internal::FunctionMockerBase<F>&) [with F = void ()()]â is private
/x/opt/pp/include/gmock/gmock-spec-builders.h:89: error: within this context
package/web/webscr/MockGTEST_static_class.h: In copy constructor âMockGTEST_static_class::MockGTEST_static_class(const MockGTEST_static_class&)â:
package/web/webscr/MockGTEST_static_class.h:7: note: synthesized method âtesting::internal::FunctionMocker<void ()()>::FunctionMocker(const testing::internal::FunctionMocker<void ()()>&)â first required here
package/web/webscr/GTest_static_example.cpp: In member function âvirtual void GTest_static_example_case1_Test::TestBody()â:
package/web/webscr/GTest_static_example.cpp:42: note: synthesized method âMockGTEST_static_class::MockGTEST_static_class(const MockGTEST_static_class&)â first required here
distcc[751] ERROR: compile package/web/webscr/GTest_static_example.cpp on localhost failed
runtask: /x/opt/pp/bin/distcc /usr/bin/g++ -D __LINUX__ -D _GNU_SOURCE -D XERCES_VERSION_AT_LEAST_27 -D WITH_OPENSSL -O2 -m32 -Wall -Wcast-qual -Werror -pipe -fno-strict-aliasing -D GTEST_DONT_DEFINE_ASSERT_EQ -D GTEST_DONT_DEFINE_ASSERT_NE -D GTEST_DONT_DEFINE_ASSERT_LE -D GTEST_DONT_DEFINE_ASSERT_LT -D GTEST_DONT_DEFINE_ASSERT_GE -D GTEST_DONT_DEFINE_ASSERT_GT -Wno-non-virtual-dtor -ftemplate-depth-48 -D GSOAP_PPSB -fpermissive -fno-enforce-eh-specs -Wno-deprecated -feliminate-unused-debug-types -I/x/local/gopc/gimp/code -I/x/local/gopc/scratch/prebuilts/ffxclient-devel-101.0-5531003.i686.rpm-install/include -I/x/paypal/build_uncert/RHEL5.4/infra/101.0.5447330/ifeature/include -I/x/paypal/build_uncert/RHEL5.4/infra/101.0.5447330/infra/include -I/x/local/gopc/scratch/prebuilts/ivr-biz-devel-1.0-4657646.i686.rpm-install/include -I/x/local/gopc/scratch/prebuilts/ivrserv-devel-1.0-4725318.i686.rpm-install/include -I/x/local/gopc/scratch/prebuilts/riskaimcommon-101.0.SNAPSHOT.rpm-install/include -I/x/local/gopc/scratch/prebuilts/sec-engg-devel-legacyBF_int-5077867.i686.rpm-install/include -I/x/local/gopc/scratch/prebuilts/user-devel-101.0-5530926.i686.rpm-install/include -isystem /x/opt/pp -isystem /usr/include/libxml2 -isystem /usr/include/xercesc -isystem /x/home/oracle/product/11.2.0.2/include -isystem /x/opt/ppdb4-4.5.20/include -isystem /x/opt/pp/include -isystem /x/opt/pp/include/mimepp -isystem /x/opt/pp/include/python2.6 -c package/web/webscr/GTest_static_example.cpp -o package/web/webscr/GTest_static_example.o exited with status 1
make: *** [package/web/webscr/GTest_static_example.o] Error 1
mm: WARNING: make exited with status 2
# Make finished with status 2 in 0.10 minutes (0.10 total) 
```

## GTEST_static_class.h

```
#include<iostream>

using namespace std;
class GTEST_static_class
{

public:
                 void display()
                {
                        cout<< "inside the GTEST_static_class:: display " <<endl;
                }

}; 
```

## MockGTEST_static_class.h

```
#include <gmock/gmock.h>
#include <gtest/gtest.h>

#include "GTEST_static_class.h"

class MockGTEST_static_class : public GTEST_static_class
{
        public:
                        static GTEST_static_class m_GTEST_static_class;

                        static void set_instance( GTEST_static_class _class)
                        {
                                m_GTEST_static_class = _class;
                        }

                        /*
                        static iGTEST_static_class GTEST_class;
                        static void set_instance( GTEST_static_class _class)
                        {
                                GTEST_class = _class;
                        }
                        */
                        MOCK_METHOD0(display,void(void));

}; 
```

## GTest_static_example.cpp

```
#include <gtest/gtest.h>
#include <iostream>
#include "MockGTEST_static_class.h"

using namespace std;

class GTest_static_example : public::testing::Test
{
public:
                virtual void SetUp();
                virtual void TearDown();
                void call_display()
                {
                        GTEST_static_class _class = GTEST_static_class();
                        _class.display();
                        cout<<"display called from GTest_static_example"<<endl;
                }

};

int main(int argc, char * argv[])
{
        ::testing::InitGoogleTest(&argc,argv);
        return RUN_ALL_TESTS();
        //return 1;
}

void GTest_static_example::SetUp()
{

}

void GTest_static_example::TearDown()
{

}

TEST_F(GTest_static_example,case1)
{
                MockGTEST_static_class mock = MockGTEST_static_class();
                MockGTEST_static_class::set_instance(mock);
                //set_instance(mock);
                EXPECT_CALL(mock,display()).Times(1);
                //EXPECT_CALL(GTEST_static_class,display()).Times(1);
                call_display();
} 
```

# ios - iPad 未检测到抖动事件

> ID：15742769
> 
> 赞同：1
> 
> 时间：2013-04-01T11:40:01.497
> 
> 标签：ios, ipad, ios-simulator, motion, shake

模拟器可以毫无问题地检测到抖动事件。当我在物理设备（iPad 2）上运行该应用程序时 - 什么也没有发生。我开始怀疑自己是否知道如何摇晃它...

我想我已经做了所有必要的事情：

```
-(BOOL)canBecomeFirstResponder{
    return YES;
} 
```

调用`becomeFirstResponder`视图；

我已经实现了：

```
- (void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event;
- (void)motionBegan:(UIEventSubtype)motion withEvent:(UIEvent *)event; 
```

你有什么建议吗？为什么它在模拟器上工作而设备上什么也没有发生？

这个问题非常类似于我的情况：[Shake Motion 事件不起作用，](https://stackoverflow.com/questions/12315100/shake-motion-events-not-working)但对我没有多大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:04:50.200

我发现并“解决”了我的问题。

设备应设置为 iPad 或 Universal，以便 iPad 检测到摇晃动作。这可能很明显（但显然我错过了）......我只想制作一个示例应用程序，但我忘记将默认设置从“iPhone”更改为“iPad”。

![在此处输入图像描述](https://i.stack.imgur.com/pPpPM.png)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2018-07-14T23:41:12.390

如果您不想一直摇晃设备来测试您的应用，这里有一种在您的物理 iOS 设备上启用一键摇晃手势的简单方法：[https ://www.youtube.com/watch?v= WbUjMlxkfQ8](https://www.youtube.com/watch?v=WbUjMlxkfQ8)

# poco-libraries - 用 MinGW 编译 Poco-1.5.1

> ID：15742777
> 
> 赞同：1
> 
> 时间：2013-04-01T11:40:47.180
> 
> 标签：poco-libraries

我正在尝试在 Windows 7 下使用 MinGW (gcc 4.7.0) 编译 Poco-1.5.1。

它在 Foundation\include\Poco\FPEnvironment_DUMMY.h 中存在 std::copysign 问题，但在 copySignImpl 方法中注释“std::”很容易解决。

我的下一个问题是文件“Foundation\src\EventLogChannel.cpp”，它试图包含“pocomsg.h”，但它不存在。

我读过 pocomsg.h 是从 pocomsg.mc 脚本生成的。MC 是来自 Microsoft 的消息编译器，它不存在于我的 MinGW 系统中。那么我应该像这篇文章所说的那样手动包含 pocomsg.h 吗？

[poco Lib dosnt 在 vs express 9 中编译](https://stackoverflow.com/questions/2407478/poco-lib-dosnt-compile-in-vs-express-9)

有没有更好的方法来解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T15:39:22.833

pocomsg.h 应该在 ../Foundation/src/ 中找到

[根据这篇文章](https://stackoverflow.com/questions/2407478/poco-lib-dosnt-compile-in-vs-express-9)，它不包含太多重要的东西，有几个定义：

```
#define POCO_CTG_FATAL                   0x00000001L
#define POCO_CTG_CRITICAL                0x00000002L
#define POCO_CTG_ERROR                   0x00000003L
#define POCO_CTG_WARNING                 0x00000004L
#define POCO_CTG_NOTICE                  0x00000005L
#define POCO_CTG_INFORMATION             0x00000006L
#define POCO_CTG_DEBUG                   0x00000007L
#define POCO_CTG_TRACE                   0x00000008L
#define POCO_MSG_LOG                     0x00001000L 
```

是文件的胆量。尝试在 Poco.h 中自己定义它们，可能。

# python - 如何在 Mac 上编辑 PYTHONPATH？

> ID：15742779
> 
> 赞同：13
> 
> 时间：2013-04-01T11:40:51.667
> 
> 标签：python, macos, terminal, settings, command-line-interface

如何在 Mac 上永久更改 PYTHONPATH？我尝试过编辑 .bash_profile，但是当我`print sys.path`在文件中使用时，它会提供与 .bash_profile 不同的 URL 列表。在终端中，当我键入时`echo $PYTHONPATH`它显示一个空行。我不想使用 sys.path.append('...') 因为我必须把它放在每个文件中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T11:43:34.430

1.  您可以将路径附加到`$PATH`而不是附加到[`$PYTHONPATH`](http://docs.python.org/2/using/cmdline.html#envvar-PYTHONPATH).

2.  如果您坚持更改`PYTHONPATH`, 在某些情况下是可取的：

    这样[做](http://www.stereoplex.com/blog/understanding-imports-and-pythonpath)：

    ```
    export PYTHONPATH=$PYTHONPATH:/Users/username/pymodules 
    ```

3.  为了确保您遵循附加内容的约定，以 `PYTHONPATH`查看 [在 PYTHONPATH 中究竟应该设置什么？](https://stackoverflow.com/questions/7850908/what-exactly-should-be-set-in-pythonpath).

# asp.net-mvc - 什么时候需要同时保护 /Edit 的 GET 和 POST 版本？

> ID：15742780
> 
> 赞同：0
> 
> 时间：2013-04-01T11:40:51.447
> 
> 标签：asp.net-mvc, security

我所有的控制器都有一对动作`/Edit`，一个用于 GET 请求，一个用于 POST 请求。我已经在 GET 调用中添加了权限检查（授权），以确保任何不应该访问对象的人都不会进入那里。

我是否需要在方法的 POST 版本上添加相同的检查？它是多余的，还是我应该合理地期望有人欺骗 HTTP POST 请求，即使他们无权访问 GET 版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:49:33.720

向 URL 发送 POST 请求非常[容易。](http://curl.haxx.se/docs/httpscripting.html)如果您的站点处理敏感/秘密数据，您应该期望人们尝试各种方式来获取它，并且您应该确保所有访问点（包括 POST 请求）检查用户是否有权访问该请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:33:05.483

您可能没有意识到您偶然发现了过去许多网站的主要漏洞。通常，开发人员通过 GET 请求保护对页面的访问，但未能保护 POST，因为他们不希望使用它。然而，许多 Web 框架都有默认设置来处理相同的 GET 和 POST，通过使用 GET 查询字符串或 POST 参数。如果 yoru 框架这样做并且您保留默认设置，那么您很容易受到攻击。

您可能还想知道，大多数 Web 应用程序渗透测试人员从映射应用程序开始，然后对 GET 资源发出 POST 请求，反之亦然。知道有多少黑客是以这种方式完成的，您会感到震惊。尝试向 Google 发出 POST 请求，并注意他们的服务是如何让你感到有点抓狂的。

简而言之，将相同的安全代码应用于 GET 和 POST 请求！如果 POST 永远不会发生，则完全禁用它，以便您的服务器返回错误。

# django - 我无法使用反向和 HttpResponseRedirect 将数据从视图发布到另一个视图？

> ID：15742782
> 
> 赞同：0
> 
> 时间：2013-04-01T11:40:56.113
> 
> 标签：django, cleaned-data

我正在尝试将数据从提交的表单发送到我的应用程序中的另一个视图，但是

# 表格.py

```
class FilterForm(forms.Form):
    currency = forms.ChoiceField(choices=Currency_choices)
    continent = forms.ChoiceField(choices=Select_continent())   
    country = forms.ChoiceField(choices=Select_country()) 
```

# 视图.py

查看#1

```
def filtrer(request):
    if request.method == 'POST':
        form = FilterForm(request.POST)
        if form.is_valid():
            currency = form.cleaned_data['currency']
            continent = form.cleaned_data['continent']
            country = form.cleaned_data['country']
            url = reverse('affiche_filter', args=(), kwargs={'continent':continent,'country':country,'currency':currency})
            return HttpResponseRedirect(url)
    else:
        form =FilterForm()
    return render_to_response('filter.html', {'form': form }, RequestContext(request)) 
```

视图#2

```
def affiche_filter(request,continent, country,currency):

    data = Select_WHERE(continent, country, currency)
    symbol = ConvertSymbol(currency)   
    return render_to_response('affiche_continent.html', {'data': data,'symbol':symbol }, RequestContext(request)) 
```

网址.py

```
urlpatterns = patterns('myform.views',                 
                       url(r'^filtrer$', 'filtrer'),
                       url(r'^affiche_filter/(?P<continent>[-\w]+)/(?P<country>[-\w]+)/(?P<currency>[-\w]+)/$', 'affiche_filter', name='affiche_filter'), 
```

似乎我的选择字段中所选值的方法“form.cleaned_data”返回键不是值本身，这是我提交表单后得到的

![显示此错误是因为计算汇率的第三个参数（这里是'0'）应该是美元或欧元而不是'0'](https://i.stack.imgur.com/5LpcN.jpg)

# mysql - 需要 MySQL 查询从 table2 更新/添加记录到 table1

> ID：15742789
> 
> 赞同：1
> 
> 时间：2013-04-01T11:41:16.990
> 
> 标签：mysql, sql, sql-update

如果表 2 中存在数据，我希望 MySQL 查询更新/添加表 1

如果 table1 中不存在记录，则添加记录（来自 table2），否则更新它。

提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:47:35.577

```
IF (EXISTS (SELECT * FROM table1 WHERE <condition>)) 
begin 
UPDATE table1
SET <specify new value>
end
else 
begin 
INSERT INTO table1
SELECT <column list> from table2 where <condition>
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:55:35.523

您可以使用以下语法将所有条目从 table2 复制到 table1，假设 ID 是表的主键：

```
INSERT INTO table1 SELECT * FROM table2 WHERE ID NOT IN (SELECT ID FROM table1); 
```

更新查询不是那么通用：

```
UPDATE table1 SET <COL>=(SELECT <COL> FROM table2 WHERE table1.ID=table2.ID); 
```

您必须对表中的每个列执行上述更新查询。

# build - CMake将非编译文件导入构建目录

> ID：15742793
> 
> 赞同：17
> 
> 时间：2013-04-01T11:41:42.447
> 
> 标签：build, copy, cmake

我像这样使用CMake：

```
$ mkdir build && cd build
$ cmake .. && make && atf-run | atf-report 
```

但是要运行 atf，我需要一些文件（例如 /Atffile 和 test/Atffile），所以我正在寻找一种在我的构建目录中导入所有此类文件的方法。

我试过这个：

```
file(COPY ${PROJECT_SOURCE_DIR}/.. DESTINATION ${PROJECT_SOURCE_DIR}/..) 
```

但它不起作用。他们是一种简单/更清洁的方法吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-01T20:50:13.347

假设“/Atffile”和“/test/Atffile”是文件而不是文件夹，您可以使用[`configure_file`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aconfigure_file)

```
configure_file(Atffile Atffile COPYONLY)
configure_file(test/Atffile test/Atffile COPYONLY) 
```

由于这里的命令始终使用相对路径，因此输入 arg 相对于当前源目录，输出 arg 相对于当前二进制（即构建）目录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-25T13:38:53.590

我使用以下内容将完整的目录复制到构建目录中

```
file(COPY "datasets" DESTINATION "${CMAKE_BINARY_DIR}") 
```

# codeigniter - Twitter 引导日期时间选择器不与 MySQL 合作

> ID：15742795
> 
> 赞同：0
> 
> 时间：2013-04-01T11:41:45.070
> 
> 标签：codeigniter, twitter-bootstrap, datetimepicker

我有一个观点，像这样：

```
<div class="input-append date the_date">
    <input data-format="yyyy-MM-dd HH:mm:ss" type="text" readonly>
</div> 
```

和js，像这样：

```
var the_date = $('.the_date > input').val();
// [DATA FOR SERVER]:
var data={ the_date : the_date } 
```

当我提交日期表单时，数据数组被发送到控制器，该控制器通过模型函数插入日期。

但是，选定的日期不会插入到数据库中。

我可以提醒（the_date）；从 js，我可以回显 $the_date; 从控制器，我什至可以回显 $the_date; 来自模型，但是 $the_date 不会进入数据库。

我在 MySQL 中有一个名为 the_date 的标准日期时间字段，它的标准 MySQL 日期时间格式为“yyyy-MM-dd hh:mm:ss”，我无法弄清楚为什么 the_date 没有进入数据库。

我正在使用 CodeIgniter 的 Active Record 进行插入，并且所有其他插入都可以正常工作。我可以插入日期：

```
'the_date' => date("Y-m-d H:i:s") 
```

例如，我也可以说：

```
'the_date' => '2002-11-11 12:12:12') 
```

但是每次我使用 Bootstrap 中的 datetimepicker 时都会插入“0000-00-00 00:00:00”的默认日期时间......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T08:35:24.040

正如@Cryode 所说，您必须提供比这更多的代码..

我假设 the_date 是格式为“2002-11-11 12:12:12”的字符串。您是否尝试过类似的方法：

```
date('Y-m-d H:i:s',strtotime(the_date)) 
```

# android - 如何从图库中选择图片？

> ID：15742796
> 
> 赞同：4
> 
> 时间：2013-04-01T11:42:04.313
> 
> 标签：android

我正在尝试从模拟器中的图库中选择图片。当我单击`W/IInputConnectionWrapper: showStatusIcon on inactive InputConnection`logcat 中的浏览 eclipse 显示但模拟器将我带到画廊时。当我选择一张图片时，它没有被选中。我使用以下代码：

```
package com.textapi;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class SendMMSActivity extends Activity {
    private static final int SELECT_PICTURE = 1;
    private String selectedPath, extension = "";
    Uri selectedVideoUri;
    Button btnBrowse;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.send_mms);
        btnBrowse=(Button)findViewById(R.id.bnBrowse);
        btnBrowse.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Intent intent = new Intent();
                intent.setType("image/*");
                intent.setAction(Intent.ACTION_GET_CONTENT);
                startActivityForResult(
                        Intent.createChooser(intent,"Select Picture"),
                        SELECT_PICTURE);
            }
        });
    }

    public void onActivityResult(int requestCode, int resultCode,
            final Intent data) {
        if (resultCode == RESULT_OK) {
            if (requestCode == SELECT_PICTURE) {
                selectedVideoUri = data.getData();
                selectedPath = getPath(selectedVideoUri);
                System.out.println("Path--->>"+selectedPath);
                int pos = selectedPath.lastIndexOf(".");
                if (pos > 0) {
                    extension = selectedPath.substring(pos + 1);
                }
            }
        }
    }

    // We can get the path of the video using this method.
    public String getPath(Uri uri) {
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(uri, projection, null, null, null);
        int column_index = cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        return cursor.getString(column_index);
    }

} 
```

请帮我选择图片。而且我还需要使用`MVAAYOO`api将图片从画廊发送到手机号码。如果有人知道，请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T12:09:36.013

```
public class MainActivity extends Activity {
    private static int RESULT_LOAD_IMAGE = 1;
    Uri myPicture = null;
    Button buttonLoadImage;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //getting View 
         buttonLoadImage = (Button) findViewById(R.id.button2);

        buttonLoadImage.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Intent i = new Intent(
                        Intent.ACTION_PICK,
                        android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

                startActivityForResult(i, RESULT_LOAD_IMAGE);
            }
        });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {
            Uri selectedImage = data.getData();
            String[] filePathColumn = { MediaStore.Images.Media.DATA };

            Cursor cursor = getContentResolver().query(selectedImage,
                    filePathColumn, null, null, null);
            cursor.moveToFirst();

            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            String picturePath = cursor.getString(columnIndex);
            cursor.close();

            ImageView imageView = (ImageView) findViewById(R.id.imageView1);
            imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));    
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:50:07.257

```
btnBrowse.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            getfrmGallery()
        }
    });

File fp;
Drawable d;   

public void  getfrmGallery()
{
// To open up a gallery browser
Intent intent = new Intent();
intent.setType("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(Intent.createChooser(intent, "Select Picture"),1);
// To handle when an image is selected from the browser, add the following to your Activity 
}
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
if (resultCode == RESULT_OK) {// if image selected
if (requestCode == 1) {
// currImageURI is the global variable I�m using to hold the content:// URI of the image
Uri currImageURI = data.getData(); 
System.out.println("Hello======="+getRealPathFromURI(currImageURI));
String s= getRealPathFromURI(currImageURI);//get the image path
File file = new File(s); 

if (file.exists()) { // if the file exists in the path
 fp=file.getAbsolutePath(); //get the absolute path of the image
 d = Drawable.createFromPath(file.getAbsolutePath());//create a drawable form the path
 imageView.setBackgroundDrawable(d);//set imageview with the selected image
 }
else
{
System.out.println("File Not Found"); // image not found
}
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T11:47:44.900

```
 @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
          Intent i = new Intent(
                Intent.ACTION_PICK,
                android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
        startActivityForResult(i, RESULT_LOAD_IMAGE);
        }
    });
}
   // For Image Loading
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK
            && null != data) {
        Uri selectedImage = data.getData();
        String[] filePathColumn = { MediaStore.Images.Media.DATA };

        Cursor cursor = getContentResolver().query(selectedImage,
                filePathColumn, null, null, null);
        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        picturePath = cursor.getString(columnIndex);
        cursor.close();

        ImageView imageView = (ImageView) findViewById(R.id.imageView1);
        imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));

    }

} 
```

# python - 在 python 上导入 pyglet

> ID：15742797
> 
> 赞同：0
> 
> 时间：2013-04-01T11:42:05.557
> 
> 标签：python, import, module, pydev, pyglet

我已经从[pyglet 网站](http://www.pyglet.org/)下载了 pyglet.dmg 文件并简单地安装了它。

保存它的文件夹是：`/Developer/pyglet`

在 pydev 编辑器上，我只需说明我想使用的位置：

```
import sys
sys.path.append('Developer/pyglet')
import pyglet

music = pyglet.resource.media('music.mp3')
music.play()

pyglet.app.run() 
```

但由于某种原因，我无法得到这个导入：

```
python sound.py 
Traceback (most recent call last):
File "sound.py", line 3, in <module>
import pyglet
ImportError: No module named pyglet 
```

关于如何使它工作的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:02:02.240

好的，我知道了。

我刚刚下载了[源文件](http://www.pyglet.org/download.html)并通过调用自己编译它：

```
sudo python setup.py install 
```

然后简单地使用问题中描述的 sys 导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:55:30.940

请添加路径斜杠。

```
sys.path.append('/Developer/pyglet')
                 ^ 
```

# node.js - 如何在 ubuntu 中使用 npm 安装永远监控模块

> ID：15742798
> 
> 赞同：0
> 
> 时间：2013-04-01T11:42:06.307
> 
> 标签：node.js, monitor, forever

在我的应用程序中，我想以编程方式重新启动我的节点 js 服务器。为此，我需要在使用 npm 安装该模块时安装永远监视器，我得到错误为“找不到兼容版本：永远监视器”。我的节点版本是 v 0.6。 17.谁能帮忙解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:07:29.347

您可以升级到至少节点 0.8 吗？Node.js 现在是 0.10.2，所以 0.6 已经很老了，许多模块不再支持 0.6。

Forever 和 forever-monitor 在 0.8 中都能很好地工作。nodejitsu 团队正在努力使其与 0.10 永远兼容，以便尽快实现。

你也看过[https://github.com/substack/fleet](https://github.com/substack/fleet)吗？Fleet 是管理部署和运行流程的绝佳方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:57:57.140

您至少需要升级到 0.8。永远监控需要节点 0.8.x。见[这里](https://github.com/nodejitsu/forever-monitor/issues/1)。

`engine`您可以通过查找字段来检查特定包所需的节点版本

```
npm view forever-monitor

{ name: 'forever-monitor',
  description: 'Core forever process monitor',
  'dist-tags': { latest: '1.1.0' },
...
engines: { node: '0.8.x' }, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T09:22:14.220

要重新启动您的服务器，您不需要永远。只需创建、关闭并创建服务器。一个小例子：

```
var http = require('http');

var server = startServer();
// ...
server = restartServer(server);
// ...
server = restartServer(server);

function startServer() {
  return http.createServer(server).listen(server.get('port'), function(){
    console.log("Server listening on port " + server.get('port'));
  });
}

function restartServer(server) {
  server.close();
  return startServer();
} 
```

# php - PHP排序问题

> ID：15742802
> 
> 赞同：2
> 
> 时间：2013-04-01T11:42:23.733
> 
> 标签：php, sorting, csv

我想请你帮忙。我有一个 CSV 文件，其中存储了 4 个不同类别的值。( ABCD ) 我按日期顺序显示这些值，但是，我希望我的页面按它们的类别显示它们，然后按它们的日期对它们进行排序。

$_news_date 是存储日期的位置，$news_category 是存储类别的位置。

> 例如：我希望类别 A 是第一个，B 是第二个，C 是第三个，等等。比，如果我有 2 个项目作为 A，我希望这些项目按日期排序，所以最近的将在列表的顶部。这意味着 A 类项目将高于 B 类项目，即使它更旧。

```
 if (!count($news_headlines)>0){
            echo 'Nothing to display for the moment. ';
        }else{
            foreach ($news_headlines as $key => $item){
                list($news_id,$news_date,$news_title,$news_body,$news_category) = $item;
                $formatted_date = date('d.m.y',$news_date);

                if($news_category == 'A') {
                    $color = '#FF0000';
                    $weight = 'bold';
                }

                else if($news_category == 'B') {
                    $color = '#FF9900';
                    $weight = 'normal';
                }

                else if($news_category == 'C') {
                    $color = '#000000';
                    $weight = 'normal';
                }

                else {
                    $color = '#33CC33';
                    $weight = 'normal';
                }

                echo '<h2><p style="color: '.$color.'; font-weight: '.$weight.';">'.$formatted_date.' - '.$news_category.' - '.$news_title.'</p></h2>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:44:50.533

非常简单的示例，假设已经从 CSV 文件中读取了这样的数组结构：

```
$array = array(
    array('category' => 'A', 'date' => 1364823620, ...),
    array('category' => 'B', 'date' => 1364823610, ...),
    ...
); 
```

为简单起见，时间戳是 UNIX 时间戳。

```
usort($array, function (array $a, array $b) {
    static $categoryOrder = array('B', 'A', 'C'); // arbitrary preferred order

    $order = array_search($a['category'], $categoryOrder) - array_search($b['category'], $categoryOrder);
    if ($order !== 0) {
        // different categories, order by category
        return $order;
    }

    // same category, order by timestamp within category
    return $a['date'] - $b['date'];
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T11:59:59.870

首先你需要创建一个数组然后排序..试试这样的

```
 if (!count($news_headlines)>0)
      {
        echo 'Nothing to display for the moment. ';
      }
      else{
            $req_array = array();
            foreach ($news_headlines as $key => $item)
            {
              list($news_id,$news_date,$news_title,$news_body,$news_category) = $item;
              $formatted_date                                = date('d.m.y',$news_date);
              $req_array[]['id']                       = $news_id;
              $req_array[sizeOf($req_array)-1]['date'] = formatted_date;  
              $req_array[sizeOf($req_array)-1]['title'] = $news_tile;
              // similarly add othe values to this array
            }

            foreach($req_array as $key=>$value)
            {
                $category[] = $value['category'];
                $date[]     = $value['date'];   
            }
            $req_array = array_multisort($category,SORT_ASC,$date,SORT_DESC,$req_array);
           ----
          // rest code 
```

现在 `$req_array`应该包含所需的数组..

# php - 从灯箱链接到不同尺寸的灯箱

> ID：15742803
> 
> 赞同：2
> 
> 时间：2013-04-01T11:42:25.213
> 
> 标签：php, javascript, navigation, lightbox

我有登录和注册表格。两者都在 Lightbox 中打开。登录有注册链接，反之亦然。链接工作正常，但问题是注册框的高度为 600 像素，而登录框的高度为 250 像素。因此，当从登录导航到注册时，会出现 250 高度和滚动条的开口，看起来很丑。

我希望注册应该以 600 像素的高度打开，即使我从高度为 250 像素的登录中单击它也是如此。

我正在使用`thickbox.js`灯箱

我尝试的是：

```
function signup() { 
    window.location="sign_up.php?TB_iframe=true&height=600&width=330";   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:34:57.287

如果您的表单来自同一个域，那么您可以在将 iframe 导航到另一个链接之前尝试此代码：

```
window.parent.$('#TB_window').animate({
    height: 600
}); 
```

因此，如果您使用`signup`功能更改 iframe 位置，那么您应该修改它

```
function signup() { 
    window.parent.$('#TB_window').animate({
        width: 330
        height: 600
    });
    window.location="sign_up.php?TB_iframe=true&height=600&width=330";   
} 
```

# android - android gdx 声音性能问题

> ID：15742812
> 
> 赞同：1
> 
> 时间：2013-04-01T11:42:54.360
> 
> 标签：android, performance, audio, libgdx

我正在用 libgdx 构建一个滚动射击游戏。在 Windows 中，一切运行良好，但在 android 上我得到明显的抖动，帧率从 61 fps avg 没有声音下降到 48-56 fps avg 有声音。它同时播放许多小音效，因为有很多子弹要发射，敌人要同时击中。我的声音例程：

```
import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.audio.Sound;

public class SoundFX {

    static final int BGDIE = 1, BGHIT = 2, BGLASER = 3, BGSPAWN = 4, PDIE = 5, PHIT = 6, PLASER = 7, PSPAWN = 8, PAUSE = 9;
    Sound S_BGDIE, S_BGHIT, S_BGLASER, S_BGSPAWN, S_PDIE, S_PHIT, S_PLASER, S_PSPAWN, S_PAUSE;

    public void load()
    {
        S_BGDIE = Gdx.audio.newSound(Gdx.files.internal("data/sfx/badguydie.mp3"));
        S_BGHIT = Gdx.audio.newSound(Gdx.files.internal("data/sfx/badguygothit.mp3"));
        S_BGLASER = Gdx.audio.newSound(Gdx.files.internal("data/sfx/badguylaser.mp3"));
        S_BGSPAWN = Gdx.audio.newSound(Gdx.files.internal("data/sfx/badguyspawn.mp3"));
        S_PDIE = Gdx.audio.newSound(Gdx.files.internal("data/sfx/playerdie.mp3"));
        S_PHIT = Gdx.audio.newSound(Gdx.files.internal("data/sfx/playergothit.mp3"));
        S_PLASER = Gdx.audio.newSound(Gdx.files.internal("data/sfx/playerlaser.mp3"));
        S_PSPAWN = Gdx.audio.newSound(Gdx.files.internal("data/sfx/playerspawn.mp3"));
        S_PAUSE = Gdx.audio.newSound(Gdx.files.internal("data/sfx/pause.mp3"));
    }

    public void unload()
    {
        S_BGDIE.dispose();
        S_BGHIT.dispose();
        S_BGLASER.dispose();
        S_BGSPAWN.dispose();
        S_PDIE.dispose();
        S_PHIT.dispose();
        S_PLASER.dispose();
        S_PSPAWN.dispose();
        S_PAUSE.dispose();
    }

    public void play(int id)
    {
        switch(id)
        {
        case BGDIE:
            S_BGDIE.play();
            break;
        case BGHIT:
            S_BGHIT.play();
            break;
        case BGLASER:
            S_BGLASER.play();
            break;
        case BGSPAWN:
            S_BGSPAWN.play();
            break;
        case PDIE:
            S_PDIE.play();
            break;
        case PHIT:
            S_PHIT.play();
            break;
        case PLASER:
            S_PLASER.play();
            break;
        case PSPAWN:
            S_PSPAWN.play();
            break;
        case PAUSE:
            S_PAUSE.play();
            break;
        default:
            System.out.println("invalid sfx call");
            break;
        }
    }
} 
```

根据游戏中发生的情况，play 大约每秒调用 4-10 次，声音效果的持续时间不到一秒，平均每个 8kb。

这是怎么回事，我该如何解决这个问题？它使游戏看起来非常不专业，并且在困难的水平上几乎无法玩。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T17:21:20.340

关于为什么在播放多个声音时会注意到性能大幅下降的问题的一些背景知识。这是因为在幕后 libgdx 需要在将声音播放回用户之前将它们混合在一起。当您同时运行一定数量的声音时，对系统进行混音的要求会变得非常高。由于您可能会在渲染线程上尝试播放声音，因此需求的增加会导致帧率下降。

根据我对游戏中任何类型音效的经验，当您遇到同时播放大量小声音的情况时，几乎没有解决方案。我将把这些写成比 libGDX 的细节更通用的解决方案：

1）**在一个线程上播放所有声音**

这就是您当前正在做的事情，虽然它在播放大量声音时效果不佳，但它很容易实现并且在大多数情况下都有效。然而，一旦你得到足够多的声音一起播放，你会注意到延迟和质量差。

2)**在与渲染线程不同的线程上播放声音**

这是一种可能的方法（取决于框架是否允许），它不是很好，因为它不能很好地扩展。但是，如果您只是遭受轻微的性能损失并且不希望同时播放大量（~20+）声音，这是一个相对较小的更改，通常可以解决问题。

3)**播放声音达到上限**

此解决方案需要更多工作，如果您有必须播放的声音，则可能无法接受。您只需跟踪播放的声音数量并允许播放其他声音，直到您达到某个点。任何超过上限的内容都不会播放。这使您可以保证一定的性能水平。这种方法的最大缺点是，如果你在角色受重伤并且没有播放时播放声音，那么这可能会让用户感到不安，因为他们可能正在听声音以知道他们是否会很快死去，反而发现自己死了。

4）**有选择地播放重要的声音**

这有点难以实现，但它的效果非常好，因为您实际上是在设置性能上限。您要做的是确定播放声音的优先级。它离你很近吗？声音大吗？那很重要么？然后，您只播放重要到足以播放到某个上限（可能是 4、6、8 等）的声音。您还需要跟踪当前播放的声音数量，以确定在给定点可以播放多少新声音。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-17T12:40:43.843

一种解决方法：播放对玩家来说不太重要的声音，只有在当前 FPS 高于某个值时才能播放它们。例如：

```
if (Gdx.graphics.getFramesPerSecond() > 56) playSound(); 
```

无论 FPS 值如何，都应始终播放重要的声音。

# javascript - grails中的错误管理

> ID：15742813
> 
> 赞同：1
> 
> 时间：2013-04-01T11:42:54.677
> 
> 标签：javascript, grails, error-handling

我对 Grails 很陌生，在应用程序中我需要检查日期。在以前的 Java 程序中，我使用了两个具有不同细节粒度的 javascript 函数。两者都接受从 1970-01-01 到 2099-12-31 的日期。需要一个正确的日期和（可选的）时间，然后告诉用户他/她输入了错误：

```
function okdate1(dtstr) {
  var ok = true;
  // First trim off leading and trailing white space
  var trimPattern = /(?:\b(.*)\b)/;
  dtstr = (dtstr.match(trimPattern))[1];
  // Verify that input is within range and correct
  var pat = /^((?:19[7-9][0-9])|(?:20[0-9][0-9]))-((?:(?:0)?[1-9])|(?:1[0-2]))-((?:(?:0)?[1-9])|(?:[1-2][0-9])|(?:3[01]))(?: ((?:(?:0|1)[0-9])|(?:2[0-3])):([0-5][0-9]))?$/;
  var dtm = dtstr.match(pat);
  if (!dtm) {
    ok = false;
  } else { // Verify that day in in range for the given month
    var days = Array(31,28,31,30,31,30,31,31,30,31,30,31);
    // Compensate for leap year
    if ((((dtm[1] % 4) === 0) && !((dtm[1] % 100) === 0)) || ((dtm[1] % 400) === 0)) {
        days[1] = 29;
    }
    if (dtm[3] > days[dtm[2] - 1]) ok = false;
  }
  if (!ok) alert("Enter date and (optionally) time on the form 'yyyy-MM-dd HH:mm'");
  return ok;
} 
```

另一个通过接受输入字符串的数字部分的更大范围来准确检查出了什么问题：

```
function okdate2(dtstr) {
  // First trim off leading and trailing white space
  var trimPattern = /(?:\b(.*)\b)/;
  dtstr = (dtstr.match(trimPattern))[1];
  // If nothing then skip the rest
  if (!dtstr) return datetimealert(0);
  // Pattern to recognize any 'dddd-dd-dd[ dd:dd]' pattern
  var pat = /^(?:(\d{4})-(\d{1,2})-(\d{1,2}))(?: (\d{1,2}):(\d{2}))?$/;
  var dtm = dtstr.match(pat);
  // If this is does not follow the pattern: get out
  if (!dtm) return datetimealert(0);
  // convert each group to a number
  // if no time notation the corresponding groups become NaN
  for (var i = 1; i < dtm.length; i++) {
    dtm[i] = Number(dtm[i]);
  }
  // Check for correct year interval
  if (dtm[1] < 1970 || dtm[1] > 2099) return datetimealert(1);

  // Check for correct month notation
  if (dtm[2] < 1 || dtm[2] > 12) return datetimealert(2);

  // Array with correct numer of days for each month
  var mdays = Array(31,28,31,30,31,30,31,31,30,31,30,31);
  // Compensate for leap year
  if ((((dtm[1] % 4) === 0) && !((dtm[1] % 100) === 0)) || ((dtm[1] % 400) === 0)) {
    mdays[1] = 29;
  }
  // Check the day for the given month
  if (dtm[3] < 1 || mdays[dtm[2] - 1] < dtm[3]) return datetimealert(3);

  // If only date was given and no time, we are OK
  if (isNaN(dtm[4]) && isNaN(dtm[5])) return true;

  // This can not happen according to pattern, but ...
  if (isNaN(dtm[4]) || isNaN(dtm[5])) return datetimealert(4);

  // check given hour
  if (dtm[4] > 23) return datetimealert(5);

  // Check given minutes
  if (dtm[5] > 59) return datetimealert(6);

  // If no error
  return true;
} 
```

其中函数 datetimealert 发出带有（希望）好的错误消息的警报并返回 false。函数带前导和尾随空格中的“trimpattern”。

我在表单中使用了它们，在“onsubmit”函数中调用它们。我在这里的目的不是讨论这两个函数，但当然欢迎对它们发表评论。

在我的 Grails 应用程序中，我使用带有 Trent Richardsons jQuery timepicker 插件扩展的 jQuery datepicker，因此我得到了一个文本字符串。我以一种形式调用 datetimepicker：

```
 <form ...
      <dl ...
        <dt>Start date <span class="required-indicator">*</span></dt>
        <dd>
          <div class="fieldcontain ${hasErrors(bean: todoInstance, field: 'startdate', 'error')} required">
            <g:textField name="startdate" id="datepicker" class="datepicker"
                 value="${formatDate(format:'yyyy-MM-dd HH:mm',date:todoInstance?.startad)}" required="" />
          </div>
        </dd>
        ... 
```

对于所有其他“必填”字段，我会收到一条类似于“工具提示”的消息，告诉我在该字段中输入一个值。

现在，我想在我的 grails 应用程序中使用我的两个日期时间 javascript，但我不想弹出警报框，我想在域类的静态约束部分中使用它们，并以与其他领域。如何将它们集成到 i grails 的错误管理系统中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:01:00.903

此错误消息由[验证 API](http://grails.org/doc/latest/guide/validation.html)提供。要实现您自己的自定义验证，您可以使用约束[验证器](http://grails.org/doc/latest/ref/Constraints/validator.html)。

~~但是我假设您已经`java.util.Date`在域类中声明了您的字段，因此您需要在验证器中使用 Date 对象。默认情况下，Grails 使用 处理日期`g:datePicker`，这会将日期拆分为日、月和年字段。~~

~~要将具有某种格式的单个字符串绑定到日期对象，您可以注册一个自定义日期属性编辑器，例如[这个示例](http://ishanf.tumblr.com/post/434379583/custom-property-editor-for-grails)。~~

Grails 验证 API 用于服务器端验证。在您的情况下，一种选择是[JQuery Validation UI Plugin](http://limcheekin.github.com/jquery-validation-ui/docs/guide/index.html)，它通过 JQuery 提供客户端验证。该插件支持所有标准约束，您可以创建自己的验证（如日期验证），查看[可扩展性文档会话](http://limcheekin.github.com/jquery-validation-ui/docs/guide/usage.html)。

# python - 均值的 Numpy 语法

> ID：15742815
> 
> 赞同：2
> 
> 时间：2013-04-01T11:42:56.080
> 
> 标签：python, numpy

在使用 python / numpy 时，我遇到了以下语法：

```
np.mean(predicted == docs_test.target) 
```

参数的类型`numpy.ndarray`

这里的意义是`==`什么？

谢谢，贾迪普

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T11:46:38.693

假设`predicted`和`docs_test.target`是两个大小相同的数组，这将计算两个数组完全一致的元素的分数。

例如，

```
In [1]: import numpy as np

In [2]: a = np.array([1, 2, 3, 4, 5, 6, 7])

In [3]: b = np.array([1, 3, 7, 4, 5, 0, -10])

In [4]: np.mean(a == b)
Out[4]: 0.42857142857142855 
```

这告诉我们，在约 43% 的案例中（7 个中有 3 个），`a`并且`b`是一致的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T11:46:43.873

如果两者`predicted`和`docs_test.target`都是numpy数组，`==`则将返回一个新数组，`1`以代替匹配元素并且`0`元素不同。`mean`基本上，该数组将为您提供相似度的度量`numberofmatchingelements / lengthofpredictedarray`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T11:53:30.053

从[文档](http://docs.scipy.org/doc/numpy/reference/arrays.ndarray.html#arithmetic-and-comparison-operations)：

> 每个 ... 比较 ( `==`, `<`, `>`, `<=`, `>=`, `!=`) 等价于对应的通用函数

在这种情况下，相应的通用函数是[`numpy.equal`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.equal.html#numpy-equal)：

> `numpy.equal(x1, x2[, out])`
> 
> 返回 ( `x1 == x2`) 元素。

# android - android 4.0 和 3 .2 的 Webview 问题

> ID：15742819
> 
> 赞同：0
> 
> 时间：2013-04-01T11:43:13.270
> 
> 标签：android, android-layout

我在 3.2 中创建了一个 android 应用程序。在该应用程序中，我正在使用 Web 视图显示 HTML 内容/网站（任何网站），并且它在我的三星平板电脑（V 3.2）中工作正常 将我的平板电脑从 3.2 升级到 4.0 后，它仅在第一次在网络中显示内容查看，一旦我退出应用程序并再次尝试第二次 web-view 无法正常工作，它会重复显示白屏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T14:01:42.337

也许是活动生命周期的麻烦。

您是否尝试从 onCreate 方法加载网页？如果是这样，请尝试将其放入 onStart 方法中。

# android - Android Multipart 图像上传到 Azure

> ID：15742821
> 
> 赞同：0
> 
> 时间：2013-04-01T11:43:15.247
> 
> 标签：android, azure

有没有办法将图像从 Android 设备上传到 Azure 存储桶？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:52:23.580

试试这个让我知道它是否适合你

```
 public HttpResponse request(String filePath, String url) {

      HttpClient httpclient = new DefaultHttpClient();
      httpclient.getParams()
            .setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);

      HttpPost httppost = new HttpPost(url);
      MultipartEntity mpEntity = new MultipartEntity();

         File file = new File(filePath);
         ContentBody cbFile = new FileBody(file, "image/png");
         mpEntity.addPart(PARAMETER_SIGNATURE, cbFile);

      try {

         httppost.setEntity(mpEntity);
         System.out.println("executing request " + httppost.getRequestLine());
         HttpResponse response;
         response = httpclient.execute(httppost);
         httpclient.getConnectionManager().shutdown();
         return response;
      } catch (Exception e) {
         e.printStackTrace();
      }
      return null;
   } 
```

异步任务类

```
public class Task extends AsyncTask<String, Void, HttpResponse> {

      private Exception exception;

      protected void onPostExecute(HttpResponse response) {
         Log.i("Loader ", response.getStatusLine().toString());
         // if (resEntity != null) {
         // System.out.println(EntityUtils.toString(resEntity));
         // }

         int status = response.getStatusLine().getStatusCode();
         if (status == 200) {
          Log.i("Loader ", "upload ok");
         } else {
          Log.i("Loader ", "upload failed");
         }

      }

      @Override
      protected HttpResponse doInBackground(String... params) {
         try {

            return request(params[0], params[1]);
         } catch (Exception e) {
            this.exception = e;
            return null;
         }
      }

      public Exception getException() {
         return exception;
      }
   } 
```

# php - 如何向另一台计算机发送和接收 xml

> ID：15742824
> 
> 赞同：2
> 
> 时间：2013-04-01T11:43:24.600
> 
> 标签：php, xml, database, xmlhttprequest

我有两台计算机，comp 1 作为分支 1，comp 2 作为主分支。在 comp 1 中，我使用 php 生成了我的数据库查询的 xml。

```
`<?php
header ("Content-Type:text/xml");
//database configuration
$config['mysql_host'] = "localhost";
$config['mysql_user'] = "root";
$config['mysql_pass'] = "donnaluz";
$config['db_name']    = "global89_branch1";
$config['table_name'] = "branchsales";

//connect to host
mysql_connect($config['mysql_host'],$config['mysql_user'],$config['mysql_pass']);
//select database
@mysql_select_db($config['db_name']) or die( "Unable to select database");
$xml          = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>";
$root_element = $config['table_name'];
$xml         = "<$root_element>";
/*$title = $doc->createElement("branchsales");
$title = $root->appendChild($title);
$text = $doc->createTextNode("sales");
$text = $title->appendChild($text);
*/
//select all items in table
$sql = "SELECT        branch.branchname,branchadmin.username,branchcomp.*,branchsales.*,days.day
            FROM branchsales,branch,branchadmin,branchcomp,days
                WHERE
                    branchsales.comp_id = branchcomp.comp_id
                    AND branchsales.admin_id = branchadmin.admin_id
                    AND branchsales.branch_id = branch.branch_id
                    AND branchsales.day_id = days.day_id";

$result = mysql_query($sql);
if (!$result) {
die('Invalid query: ' . mysql_error());
}

if(mysql_num_rows($result)>0)
{
while($result_array = mysql_fetch_assoc($result))
{
     $xml .= "<".$config['table_name'].">";

  //loop through each key,value pair in row
  foreach($result_array as $key => $value)
  {
     //$key holds the table column name
     $xml .= "<$key>";

     //embed the SQL data in a CDATA element to avoid XML entity issues
     $xml .= "<![CDATA[$value]]>"; 

     //and close the element
     $xml .= "</$key>";
  }

  $xml.="</".$config['table_name'].">";
  }
 //close the root element
$xml .= "</$root_element>";

//send the xml header to the browser
header ("Content-Type:text/xml"); 
echo $xml;

?> 
```

` 看起来像这样

```
<branchsales>
<branchname>Branch1</branchname>
<username>garfield</username>
<comp_id>1</comp_id>
<admin_id>1</admin_id>
<pcnum>1</pcnum>
<starttime>09:00:00</starttime>
<endtime>10:00:00</endtime>
<totaltime>1:00:00</totaltime>
<compcharge>10.00</compcharge>
<id>1</id>
<branch_id>1</branch_id>
<day_id>5</day_id>
<timeopened>8:00:00</timeopened>
<timeclosed>23:00:00<timeclosed> 
```

呜呜呜……等等……

问题是，我希望将生成的 xml 发送到 comp 2，在表格中看起来像这样

* * *

## |ID|日|观察者|分支| 当前日期 | 营业时间 | 关闭时间 | 电脑编号 | 很快...

1周五加菲猫分店1 29-03-13 8:00:00 23:00:00 1

这是我的发送代码，但它不起作用

```
<?
php
$file = 'http://localhost/thesis/xmldailyrep.php';
$xml_builder = 'simplexml_load_file($file)';

$ch = curl_init("http://172.16.0.55/dailyrep1.php");
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type:text/xml'));
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $xml_builder);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 0);
curl_setopt($ch, CURLOPT_REFERER, "http://localhost/thesis/xmldailyrep.php");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$ch_result = curl_exec($ch);
curl_close($ch);
echo $ch_result;

?> 
```

我在 COMP 2 中的接收代码是这个

```
<?php
/*
* XML Server.
*/
// We use php://input to get the raw $_POST results.
$xml_post = file_get_contents('xmldailyrep.php');
// If we receive data, save it.
if ($xml_post) {
$xml_file = 'received_xml_' . date('Y_m_d-H-i-s') . '.xml';
$fh       = fopen($xml_file, 'w') or die();
fwrite($fh, $xml_post);
fclose($fh);
// Return, as we don't want to cause a loop by processing the code below.
return;
}

?> 
```

请帮忙

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-01T11:49:02.313

据我所知，从标题。我将使用框架来完成这项工作。像 Apache Camel、Mule ESB。如果它要大规模实施。

如果你能告诉我们整个故事，它会更容易帮助你。

-大师@gnanagurus

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T12:04:08.507

```
$file = 'http://localhost/thesis/xmldailyrep.php';
$xml_builder = file_get_contents($file); 
```

# php - php mod_rewrite 永久链接

> ID：15742825
> 
> 赞同：0
> 
> 时间：2013-04-01T11:43:29.397
> 
> 标签：php, mod-rewrite, permalinks

我正在寻找一种访问方式：

```
 http://myurl.com/?file=random_token 
```

和

```
 http://myurl.com/random_token/ 
```

我已经在 . **htaccess**但我不知道如何设置模式。

我试过这个：

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule /(.*)/$ /index.php?file=$1 
```

如果你能帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:45:18.077

```
 RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^([^/]*)/$ /?file=$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:47:00.303

试试这个

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCOnd %{REQUEST_FILENAME} !-d
RewriteRule /?([a-z-]+) index.php?file=$1 [L,QSA] 
```

# tcl - 如何在 tcl 提示符中抑制 proc 的返回值

> ID：15742838
> 
> 赞同：3
> 
> 时间：2013-04-01T11:44:36.660
> 
> 标签：tcl, return-value

我在 TCL 中相对较新，在 TCL 提示符下，当我们调用具有某些返回值的 proc 时，proc 的返回值由 tcl 回显。有没有办法阻止它（不影响puts或类似功能）作为例子

```
bash$ tclsh
% proc a {} { puts  "hello"; return 34; }
% a
hello
34
% 
```

现在我如何抑制 34 出现在屏幕上？任何帮助表示赞赏。

更新：实际上 proc 是另一个工具的一部分，之前它没有任何返回值，但现在它可以有条件地返回一个值。它可以从脚本中调用，不会有任何问题（正如 Bryan 指出的那样）。并且可以从交互式提示中调用它，然后在所有必要的输出之后，不必要地打印返回值。所以 1) 我没有更改用户的 tclshrc 2) 现有脚本应该继续工作的设施。每次调用 proc 时，在所有必要的输出之后，都会打印一个数字，这似乎很奇怪。对于用户来说，这是一个不必要的信息，除非他已经抓住了价值并想做某事。所以我希望将价值传递给用户，但没有打印到提示/用户界面（希望我很清楚）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:43:31.650

`tclsh`中的交互式 shell 代码`wish`将打印任何非空结果。为了不打印任何内容，您必须让“行”上的最后一个命令产生一个空结果。但是使用哪个命令？

许多命令会产生空结果：

```
if 1 {}
subst ""
format "" 
```

但是，最短的可能是：

```
list 
```

因此，您可以编写如下代码：

```
a;list 
```

当然，只有当您的命令*实际上*产生了您不想看到的大结果时，这才真正变得有用。在这些情况下，我经常发现使用测量结果大小的东西最有用，例如：

```
set tmp [something_which_produces a_gigantic result]; string length $tmp 
```

我找到的最有用的命令是`string length`,`llength`和`dict size`.

* * *

如果您绝对*不能*打印命令的结果，则必须编写自己的交互式循环。有两种方法可以做到这一点，具体取决于您是否在事件循环中运行：

## 没有事件循环

这个简单的版本只是检查命令名称是否在用户键入的内容中。否则随意丢弃结果可能不是一个好主意！

```
set accum ""
while {[gets stdin line] >= 0} {
    append accum $line "\n"
    if {[info complete $accum]} {
        if {[catch $accum msg]} {
            puts stderr $msg
        } elseif {$msg ne "" && ![string match *TheSpecialCommand* $accum]} {
            puts $msg
        }
        set accum ""
    }
} 
```

## 使用事件循环

这只是处理阻塞 IO 的情况；当输入来自熟终端（即默认）时，这是正确的

```
fileevent stdin readable handleInput
set accum ""
proc handleInput {} {
    global accum
    if {[gets stdin line] < 0} {
        exit; # Or whatever
    }
    append accum $line "\n"
    if {[info complete $accum]} {
        if {[catch {uplevel "#0" $accum} msg]} {
            puts stderr $msg
        } elseif {$msg ne "" && ![string match *TheSpecialCommand* $accum]} {
            puts $msg
        }
        set accum ""
    }
}
vwait forever; # Assuming you're not in wish or have some other event loop... 
```

## 如何检测正在执行的命令

上面的代码`![string match *TheSpecialCommand* $accum]`用来决定是否丢弃命令结果，但这很丑陋。利用 Tcl 自己的内置钩子的更优雅的方法是使用[执行跟踪](http://www.tcl.tk/man/tcl8.6/TclCmd/trace.htm#M9)来检测命令是否已被调用（为简洁起见，我将在此处仅显示非事件循环版本）。这样做的另一个优点是它很容易扩展到抑制多个命令的输出：只需将跟踪添加到每个命令。

```
trace add execution TheSpecialCommand enter SuppressOutput
proc SuppressOutput args {
    # Important; do not suppress when it is called inside another command
    if {[info level] == 1} {
        set ::SuppressTheOutput 1
    }
}

# Mostly very similar from here on
set accum ""
while {[gets stdin line] >= 0} {
    append accum $line "\n"
    if {[info complete $accum]} {
        set SuppressTheOutput 0;                       # <<<<<< Note this!
        if {[catch $accum msg]} {
            puts stderr $msg
        } elseif {$msg ne "" && !$SuppressTheOutput} { # <<<<<< Note this!
            puts $msg
        }
        set accum ""
    }
} 
```

需要明确的是，我*永远*不会在自己的代码中这样做！如果重要的话，我会手动抑制输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:59:32.387

您可以在 .tclshrc 中创建一个空程序...

```
proc void {} {} 
```

...当您不需要返回值时，以 . 结束该行`;void`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-02T13:44:20.943

使用**tcl_interactive**变量来启用值的返回，虽然我不确定这在哪里有用......

```
proc a {} {
    puts "hello"
    if { [info exist tcl_interactive] } {
        return {};
    } else {
        return 34;
    }
} 
```

# asp.net-mvc-4 - AuthorizeRoles=admin 为 false 时如何重定向到索引。

> ID：15742845
> 
> 赞同：1
> 
> 时间：2013-04-01T11:45:07.820
> 
> 标签：asp.net-mvc-4, simplemembership

在我的**MVC 4**应用程序中，带有`SimpleMembershipProvider`. 我正在用属性装饰我的控制器`[Authorize(Roles = "Admin")]`。

当角色为假时，我将用户重定向到**登录**页面。如何将其更改为重定向到**索引**页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:01:41.360

您可以通过覆盖来使用自定义授权`AuthorizeAttribute`属性

```
 [CustomAuthAttribute(Roles = "Admin")] 
```

代码：

```
using System;
using System.Web.Http;
using System.Net.Http;

public class CustomAuthAttribute : AuthorizeAttribute
{
    public override void OnAuthorization(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
           /* if authorization condition fails */
           if(!condition)
           {
              HandleUnauthorizedRequest(actionContext);
           }
        }

    protected override void HandleUnauthorizedRequest(System.Web.Http.Controllers.HttpActionContext actionContext)
    {

        filterContext.Result = new RedirectToRouteResult(
                        new RouteValueDictionary 
                        {
                            { "action", "/*ActionName*/" },
                            { "controller", "/*ControllerName*/" }
                        });
   }
} 
```

# layout - 二进制键盘布局

> ID：15742850
> 
> 赞同：1
> 
> 时间：2013-04-01T11:45:37.970
> 
> 标签：layout, keyboard, binary

我最近了解了一些关于键盘布局的知识，并尝试了 Dvorak 或 Neo 之类的东西，但今天我问自己是否存在某种“二进制”键盘布局的问题。

它应该使用 8 个键来键入一个字符（一个字节）的二进制表示。

例子：

```
 ASDF and JKL; are used for input. 
```

如果想写一个`'A'`（65 十进制，10000001 二进制）你必须按`A`and ;

或者你想写一个`'f'`（146 十进制，10010010 二进制）你必须按`A`,`F`和`L`。

我想知道是否已经有这样的东西，或者有人可以向我展示一个 `C/C++`能够改变 keaboard 布局并支持这样的组合的库。

# android - 如何将文件写入 USB 存储器？（根）

> ID：15742854
> 
> 赞同：0
> 
> 时间：2013-04-01T11:46:04.667
> 
> 标签：android

平板电脑 USB 插入记忆棒，它想访问

```
try {
    Runtime.getRuntime().exec("su");
} catch (IOException e) {
    e.printStackTrace();
}

File testFile = new File("mnt/usbhost0");
boolean b1 = testFile.canRead();   //b1 = true
boolean b2 = testFile.canWrite();  //b2 = false 
```

为什么 b2 是假的？

我的设备已植根

附言。对不起我的英语不好..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T15:39:55.887

您需要在清单中设置应用程序的权限以写入存储

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# jquery - 如何根据其他两列值计算jqgrid中的第三行值

> ID：15742859
> 
> 赞同：0
> 
> 时间：2013-04-01T11:46:34.293
> 
> 标签：jquery, jqgrid

我的 jqgrid 中有两个列，我从第三列的 json 获得我必须计算其他两个的值并显示我该怎么做

```
 jQuery("#vehicleResultGrid").jqGrid({

        data : jsonText,
        datatype : 'local',
        rowNum : 20000,
        width : '100%',
        height : 'auto',
        colNames : [ 'FIN', 'VIN','balnce' ],
        colModel : [{
            name : 'value1',
            sortable:false,
            width : 190,
            classes: "col1"
        },{
            name : 'value2',
            sortable:false,
            width : 190
        },{

            name : 'blance',
            formatter: CalculatedFormatFunction

        }]

    });

     function CalculatedFormatFunction(cellval, opts, rowObject, action) {

           return rowObject[0]*rowObject[1];
    } 
```

我试过这段代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:52:50.023

*如果您需要在客户端*实现第三`blance`列的填充，您有两种主要的实现方式：

 *1.  自定义格式化程序的使用
2.  `beforeProcessing`回调的使用。

第二种方法更好，因为您可以为计算列使用一些预定义的格式化程序。例如，您仍然可以`formatter: "interger"`用于列`blance`

在使用的情况下`datatype: 'local'`，填充第三列的问题`blance`真的很简单。您已经输入数据（`jsonText`原始代码中的变量）作为项目数组。例如，您的输入数据为

```
var myOrgData = [
        {value1: 2, value2: 3},
        {value1: 5, value2: 7}
    ]; 
```

因此，您可以将`blance`属性添加到输入数组中的所有项目：

```
var l = myOrgData.length, i, item;
for (i = 0; i < l; i++) {
    item = myOrgData[i];
    item.blance = item.value1 * item.value2;
    // or if the values could be strings then
    // item.blance = parseInt(item.value1, 10) * parseInt(item.value2, 10);
} 
```

您解决问题的方式非常容易，并且可以为`blance`列使用任何格式化程序。例如，您可以定义`blance`列

```
{name: "blance", formatter: "integer", sorttype: "integer"} 
```

如果您改用自定义格式化程序

```
{name: "blance", sorttype: "integer",
    formatter: function (cellValue, option, rowObject) {
        return parseInt(rowObject.value1, 10) * parseInt(rowObject.value2, 10);
    }} 
```

您可以使用未更改的输入数据，但是您不能使用预定义格式化程序的优点，或者您必须手动调用原始格式化程序，这会使代码更复杂且可读性更低。

如果你有`datatype: "json"`或`datatype: "xml"`比使用`beforeProcessing`回调非常接近于上面描述的输入数据的简单修改。回调`beforeProcessing`接收从服务器返回的数据作为对象，回调可以修改它。可以以相同的方式添加其他属性。*

# asp.net-mvc - 在视图中生成列表并将其传递给控制器

> ID：15742868
> 
> 赞同：2
> 
> 时间：2013-04-01T11:47:01.500
> 
> 标签：asp.net-mvc, model-view-controller, asp.net-mvc-4

我正在用 Asp.net 和 MVC 4 编写一个酒店预订网站。它有一个名为 reservation 的类，其中包含一个联系人列表。在创建视图中，我想动态创建联系人。（联系人数 = 成人 + 孩子，这将在创建预订视图中确定）我如何将联系信息发布到控制器？

```
public partial class Reservation
{
    public int Id { get; set; }
    public int RoomType_Id { get; set; }
    public System.DateTime FromDate { get; set; }
    public System.DateTime ToDate { get; set; }
    public byte Adults { get; set; }
    public byte Kids { get; set; }
    public decimal Price { get; set; }
    public int User_Id { get; set; }
    public int State_Id { get; set; }
    public virtual ReservationState ReservationState { get; set; }
    public virtual RoomType RoomType { get; set; }
    public virtual User User { get; set; }
    public virtual ICollection<Transaction> Transactions { get; set; }
    public virtual ICollection<Contact> Contacts { get; set; }
} 
```

我应该设置联系人的最大数量（例如 5，然后写这样的东西吗？

```
 [HttpPost]
    public ActionResult Create(Reservation reservation,Contact Adult1,Contact Adult2, Contact Adult3, Contact Adult4, Contact Adult5, Contact Kid1,Contact Kid2, Contact Kid3)
    {
        if(reservation.Adults>0)
            reservation.Contacts.Add(Adult1);
        if(reservation.Adults>1)
            reservation.Contacts.Add(Adult2);
        ...
        if (ModelState.IsValid)
        {
            _db.Reservations.Add(reservation);
            _db.SaveChanges();
            return RedirectToAction("Index");
        }
    } 
```

它很脏有没有更好的方法？我可以通过联系人列表吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T15:13:38.060

```
@for (var i = 0; i < Model.Contacts.Count(); i++)
{
    @Html.EditorFor(m => m.Contacts[i])
} 
```

您唯一需要做的就是实例化一个新联系人列表。这就是为什么视图模型更可取的原因，因为您可以根据视图模型上的某些值在构造函数中简单地执行此操作：

```
public class ReservationViewModel
{
    public ReservationViewModel()
    {
        Contacts = new List<Contact>();
        for (var i = 0; i < Adults + Kids; i++)
        {
            Contacts.Add(new Contact());
        }
    }

    ...
} 
```

或者，在您看到生成的代码之后，您将了解模型绑定器希望如何接收回数据。您的输入将如下所示：

```
<input id="Contacts_0__Name" name="Contacts[0].Name" /> 
```

`0`联系人的迭代计数在哪里。如果您手动模拟此结构，modelbinder 也将获取数据。

# php - 使用 preg_match_all 匹配模式并排除子字符串

> ID：15742875
> 
> 赞同：4
> 
> 时间：2013-04-01T11:47:24.913
> 
> 标签：php, regex, preg-match-all, regex-lookarounds

我需要找到放置在 START 和 END 之间的所有字符串，从匹配的字符串中排除 PADDING 子字符串。我发现的最好方法是

```
$r="stuffSTARTthisPADDINGisENDstuffstuffSTARTwhatPADDINGIwantPADDINGtoPADDINGfindENDstuff" ;
preg_match_all('/START(.*?)END/',str_replace('PADDING','',$r),$m);
print(join($m[1]));
> thisiswhatIwanttofind 
```

我想用尽可能小的代码大小来做到这一点：只有 preg_match_all 而没有 str_replace 的更短，最终直接返回没有连接数组的字符串？我尝试了一些环视表达式，但找不到合适的表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T06:57:46.710

```
$r="stuffSTARTthisPADDINGisENDstuffstuffSTARTwhatPADDINGIwantPADDINGtoPADDINGfindENDstuff";
echo preg_replace('/(END.*?START|PADDING|^[^S]*START|END.*$)/', '', $r); 
```

这应该`thisiswhatIwanttofind`使用单个正则表达式模式返回您

解释：-

```
END.*?START  # Replace occurrences of END to START
PADDING      # Replace PADDING
^[^S]*START  # Replace any character until the first START (inclusive)
END.*$       # Replace the last END and until end of the string 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T21:04:46.207

```
$r="stuffSTARTthisPADDINGisENDstuffstuffSTARTwhatPADDINGIwantPADDINGtoPADDINGfindENDstuff" ;
preg_match_all('/(?:START)(.*?)(?:END)/',str_replace('PADDING','',$r),$m);
var_dump(implode(' ',$m[1])); 
```

会工作，但我想你想要更快的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T21:47:29.573

您还可以像这样使用 preg_replace_callback ：

```
$str = preg_replace_callback('#.*?START(.*?)END((?!.*?START.*?END).*$)?#', 
           function ($m) {
               print_r($m);
               return str_replace('PADDING', '', $m[1]);
           }, $r);

echo $str . "\n"; // prints thisiswhatIwanttofind 
```

# wix - WiX Burn 3.7 MsiNTSuitePersonal 显示 Windows 7 Home Basic 的错误值

> ID：15742877
> 
> 赞同：2
> 
> 时间：2013-04-01T11:47:30.217
> 
> 标签：wix, windows-installer, installation, burn

我正在使用 Burn 来安装我的先决条件。其中一个先决条件要求我检查当前操作系统是否是 Windows 7 的[家庭基本](https://en.wikipedia.org/wiki/Windows_7_editions#Main_editions)版。我尝试使用 MsiNTSuitePersonal 进行检查，如下所示。

```
<ExePackage Id="someId"
            Cache="no"
            Compressed="no"
            PerMachine="yes"
            Permanent="yes"
            Vital="yes"
            InstallCommand="/q"
            SourceFile="Redist\some.exe"
            DisplayName="Display something"
            InstallCondition="(MsiNTSuitePersonal = 1)"/> 
```

以下是来自 WiX Burn Setup 的日志。

> [093C:02E0][2013-04-01T17:14:21]i052：条件“（MsiNTSuitePersonal = 1）”评估为假。

以上条件适用于 Wix 3.7 Burn。它在 Windows 7 Home Basic 上总是给我错误的结果，而在 MSI 中使用相同的东西它可以完美地工作。请参阅以下日志。

> 属性（S）：MsiSystemRebootPending = 1 属性（S）：VersionMsi = 5.00 属性（S）：VersionNT = 601 属性（S）：WindowsBuild = 7600 属性（S）：ServicePackLevel = 0 属性（S）：ServicePackLevelMinor = 0 属性（ S）：MsiNTProductType = 1 属性（S）：MsiNTSuitePersonal = 1

另外，我尝试使用注册表检查相同的条件，但是如何比较 InstallCondition 中的字符串？

我想做如下的事情。

```
<ExePackage Id="UWSOptionfor7Home"
            Cache="no"
            Compressed="no"
            PerMachine="yes"
            Permanent="yes"
            Vital="yes"
            InstallCommand="/q"
            SourceFile="Redist\UltiDev\UltiDev Web Server Setup.exe"
            DisplayName="UltiDev Web Server"
            InstallCondition="(IsWin7PersonalEdition = 'Terminal Server Personal')"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T13:30:07.027

我相信问题在于您指的`MsiNTSuitePersonal`是*Windows Installer*内置属性。您正在寻找的 Burn 中的变量是`NTSuitePersonal`（注意：它没有前缀`Msi`，因为它不是由 Windows Installer 提供的）。

有关完整列表，请参阅*[刻录内置变量](http://wixtoolset.org/documentation/manual/v3/bundle/bundle_built_in_variables.html)*。

# javascript - 如何使用javascript从服务器读取csv文件

> ID：15742887
> 
> 赞同：0
> 
> 时间：2013-04-01T11:47:46.097
> 
> 标签：javascript, database, csv

我正在尝试从CoExSearch 下的这个在线数据库[http://coxpresdb.hgc.jp/top_search.shtml#CoExSearch读取数据。](http://coxpresdb.hgc.jp/top_search.shtml#CoExSearch)当我输入 1717 的 id 时，它会给出一个 .csv 文件。如何使用 javascript 直接读取该 csv 文件（只是为了初始化一个数组）。

谢谢。

# java - 用于识别词性的文本处理

> ID：15742892
> 
> 赞同：0
> 
> 时间：2013-04-01T11:48:07.560
> 
> 标签：java, text, full-text-search, nlp

我必须编写一个程序（用Java）来识别名词，形容词，动词等的几个词性。该程序还应该识别数字（数字，例如10）和用普通英语写的数字（十，百等）和多得多。我不确定前进的方向是什么。有没有可以提供帮助的图书馆？这只能用正则表达式来完成吗？还是我需要学习 NLP？

请提出前进的道路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:03:48.327

(1) OpenNLP

(2) 灵管

(3) 斯坦福自然语言处理

以上所有 3 项（基于 Java）将帮助您，开箱即用地识别 POS。

对于数字，请使用正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T19:54:27.197

词性 (POS) 标记是一项非常标准的 NLP 任务。理论上，您可以编写正则表达式来对非常简单的句子进行 POS 标记，但您不太可能使用正则表达式模型实现合理的覆盖率或准确性。你可以很好地训练一个相当简单的 HMM 模型或一个手工标记的训练集上的判别标记器。

但是要标记一个特定的语料库，您不一定需要学习 POS 标记的所有细节并自己动手——学习使用现有的库可能就足够了（例如 NLTK 或斯坦福 NLP 库）。

将文本数字表示转换为其阿拉伯形式（反之亦然）属于“文本规范化”的标签。正则表达式（或其他有限状态转换）在那里可能更有用，但同样，您可能希望在从头开始之前寻找满足您需求的现有解决方案。

# xamarin.ios - 在montouch中为uitextfield类型转换？

> ID：15742900
> 
> 赞同：1
> 
> 时间：2013-04-01T11:48:30.190
> 
> 标签：xamarin.ios, uitextfield

我需要将 UITextField 创建为我从服务中获取的字符串的名称。我尝试了以下方式

```
string name = "Sample";
UITextField name = new UITextField(); 
```

但我得到了已经定义的数据类型错误。

请给我解决方案。

先感谢您，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:59:33.430

您不能将两个变量命名相同。这是一个通用的 C# 语法问题。

如果你这样做，它是否有效：

```
string name = "Sample";
UITextField nameField = new UITextField(); 
```

# java - Hibernate 中的 NativeSQLQueryPlan？

> ID：15742906
> 
> 赞同：1
> 
> 时间：2013-04-01T11:48:38.780
> 
> 标签：java, hibernate, out-of-memory

我想知道为什么hibernate会生成`NativeSQLQueryPlan`（本机查询的查询计划）。另外，如何跳过本机查询的查询缓存计划？

我正在做一些批量数据操作，并且我正在触发本机查询，但我得到了`OutOfMemoryException`因为休眠正在缓存`ResultSet`和查询计划。我的逻辑中只有本机查询（没有命名查询）。

# android - Phonegap - jquery Mobile：按钮点击事件无法在android中捕获

> ID：15742908
> 
> 赞同：0
> 
> 时间：2013-04-01T11:48:45.317
> 
> 标签：android, jquery, jquery-mobile, cordova

我正在使用带有 jQ​​uery 移动插件的 phonegap 开发一个示例应用程序。我创建了一个页面 main.html。从 main.html，我能够捕捉到事件。在主页中按下按钮后，我将 using( `$.mobile.changePage("path")`) 函数的内容更改为 signup.html。我在 signup.html 中有按钮，但是当我单击该按钮时，单击事件不会被触发。我也已经在 signup.html 中加载了所有的 js 文件。做错了什么？请指导我。

**澄清：我应该只保留一个 html (main.html) 并且通过它我必须进行页面导航。？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T13:01:26.723

# 如果您的第二页 javascript 放置在 HEAD 内容中

如果我理解正确，您是在使用 ajax 将此页面加载到**DOM**中吗？如果这是真的，那么我理解你的问题。你看，当 ajax 用于页面加载时，只有**BODY**内容被加载到**DOM**中。

**如果您在第一个 HTML 文件中初始化您的第二个 html 页面 javascript 或在第二个HTML****正文**内容中移动您的**SCRIPT**块，您可以解决您的问题。

 ****此外，我已经在我的其他**[文章](http://www.gajotres.net/how-jquery-mobile-page-handling-affects-javascript-executions/)**中描述了这个问题，其中包含更多细节和一些示例，或者可以在**[此处](https://stackoverflow.com/a/15806954/1848600)**找到。

# 如果您有多个具有相同 id 的按钮

这也可能是一个有点不同的问题。你看，如果你有 2 个具有相同 id 的按钮，它们都在一个**DOM**结构中。如果您尝试在第二页按钮上绑定单击事件，则该相同事件将绑定到第一页上的按钮。因为它们具有相同的 id ，所以**jQuery**会将事件绑定到 DOM 中找到的第一个按钮（具有该 id）。

要解决此问题，您需要使用名为活动页面的**jQM构造函数。**还有一个警告，下一个代码示例仅适用于在**pageinit**事件之后初始化的页面事件，例如**pagebeforeshow**或**pageshow**事件：

```
$(document).on('pagebeforeshow', '#yourPageID', function(){     
    // Registering button click  
    $(document).on('click', $.mobile.activePage.find('#myButtonID'), function(){
        // Do something
    });
}); 
```

这行代码：

```
$.mobile.activePage.find('#myButtonID') 
```

只会在当前活动页面中找到按钮“#myButtonID”，无论 DOM 中存在多少具有相同 id 的其他按钮。

# 回答最后一个问题

关于你最后的问题。您使用哪种模板结构（1 个多页的 HTML 或多个 HTML）并不重要，您只需要担心我之前提到的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T11:53:09.560

您是否将代码包装在以下代码段中？

```
$(document).on('pagebeforeshow', '#yourPageID', function(){     
    // Registering button click  
    $('#myButtonID').bind('click',function(){
       $.mobile.changePage('yourfile.html');
    });
}); 
```

如果您只是将其包装在您的`<script></script>`标签中，则该事件将不会触发。

您在控制台中收到任何错误吗？检查`DDMS`它。****

# php - 获取 youtube 下载链接 url_encoded_fmt_stream_map

> ID：15742916
> 
> 赞同：1
> 
> 时间：2013-04-01T11:49:09.953
> 
> 标签：php, youtube

我正在使用 preg_match_all 从 Youtube 视频页面获取 Youtube 视频链接，并将它们放入数组中，但我没有得到任何结果。

```
preg_match_all('/url_encoded_fmt_stream_map\=(.*)/', $html, $matches); 
```

第一个参数的语法有问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T21:30:53.287

不要使用' **=** '，你需要使用' **:** '来代替（如果你查看源代码，你会看到：**“url_encoded_fmt_stream_map”**：）

所以你可以使用这个：

```
preg_match('/url_encoded_fmt_stream_map(.*?);/', $html, $matches);   
$matches= substr($matches[0], 30, -1); 
```

这里我们删除最后一个 ' **;** ' 和第一个 ' **"url_encoded_fmt_stream_map":** '。

# iphone - 识别iphone的版本

> ID：15742917
> 
> 赞同：-1
> 
> 时间：2013-04-01T11:49:12.993
> 
> 标签：iphone, ios, objective-c, ipad, ios5

我正在开发一个只能安装在 iPhone 4 和更高版本中的应用程序。我还通过**UIRequiredDeviceCapabilities 和设备兼容性矩阵**。我需要更多解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:05:12.730

好吧，首先您可以使用`UIDevice`该类将模型作为字符串接收：

```
[[UIDevice currentDevice] model] 
```

这将返回类似“iPod touch”或“iPhone”的内容。

您可以使用以下代码获得确切的模型平台：（
您必须`#include <sys/types.h>`和`<sys/sysctl.h>`）

```
size_t size;
sysctlbyname("hw.machine", NULL, &size, NULL, 0);
char *machine = malloc(size);
sysctlbyname("hw.machine", machine, &size, NULL, 0);
NSString *platform = @(machine); // Old syntax: [NSString stringWithCString:machine encoding:NSUTF8StringEncoding]
free(machine); 
```

现在`platform`是一个包含设备生成的字符串，例如：

*   `iPhone1,1`适用于**iPhone 2G**（第一款 iPhone）
*   `iPhone1,2`适用于**iPhone 3G**
*   `iPhone2,1`适用于**iPhone 3GS**
*   `iPhone3,1`或`iPhone3,2`iPhone **4**
*   `iPhone4,1`适用于**iPhone 4S**
*   `iPhone5,1`或`iPhone5,2`iPhone **5**

注意，iPhone 4 平台的逗号前面的数字实际上是**3**，而不是 4。使用这个字符串可以隔离这个数字，并检查它是否大于等于 3：

```
if ([[[UIDevice currentDevice] model] isEqualToString:@"iPhone"]) {
    if ([[[platform componentsSeparatedByString:@","][0] substringFromIndex:6] intValue] >= 3) {
        // Device is iPhone 4 or newer
    } else {
        // Device is older than iPhone 4
    }
} 
```

**但是：**您实际上可以检查屏幕的比例，因为 iPhone 4 是第一款配备 Retina 显示屏的 iPhone：

```
[[UIScreen mainScreen] scale]  // Returns 2.0f on the iPhone 4 and newer and 1.0f on older devices 
```

# android - 处理逻辑对象的首选方法

> ID：15742921
> 
> 赞同：0
> 
> 时间：2013-04-01T11:49:19.270
> 
> 标签：android, json, performance, object, storage

我有一个表示为 JSON 字符串的对象数组，这些对象将来自 API 服务器。假设我们有一些电影类别和属于每个类别的实际电影：

```
[
{
    "id": "1",
    "name": "Action",
    "movies": [
        {
            "id": "1",
            "name": "Movie 1",
            "description": "Movie 1 Description",
            "other": "Other..."
        },
        {
            "id": "2",
            "name": "Movie 2",
            "description": "Movie 2 Description",
            "other": "Other..."
        }
    ]
},
{
    "id": "2",
    "name": "Drama",
    "movies": [
        {
            "id": "3",
            "name": "Movie 3",
            "description": "Movie 3 Description",
            "other": "Other..."
        },
        {
            "id": "4",
            "name": "Movie 4",
            "description": "Movie 4 Description",
            "other": "Other..."
        }
    ]
}
] 
```

我的 android 应用程序的用户需要能够浏览类别/电影。关于代码性能和最佳内存使用情况，以下哪种情况更好？
假设会有很多渠道和类别。
1\. 解析 JSON 字符串一次，为每个类别创建 CategoryLists 和 Movie 对象，稍后我将使用它们来填充列表。
2\. 使用 get_total_channels、get_channel、get_category 等少数方法创建一个解析器，该解析器将始终解析 JSON 字符串的内容，以返回适当的数据以填充列表。
3\. 还有什么建议吗？

# javascript - TCPDF 在新选项卡/窗口中打开链接

> ID：15742922
> 
> 赞同：6
> 
> 时间：2013-04-01T11:49:20.683
> 
> 标签：javascript, php, html, tcpdf

如何在 pdf 文档中的新选项卡/窗口中打开链接。我试过`target="_blank"`了，但没有用。我`javascript`在互联网上找到了解决方案。但是我如何`javascript`在 tcpdf 中使用。

我尝试了以下方法：

```
$text = 'bla bla bla bla bla bla bla bla<br>';
$url = "http://google.com";
$links = ' <a href="javascript:open_win('.$url.');">Click me</a> 
           <a href="'.$url.'" target="_blank">Click me</a> ';

$output = $text.$links; $pdf->writeHTML($output); 
```

但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:18:10.763

使用下面的方法

```
<a href="javascript: w=window.open('yoursite.com/LinkToThePDF.pdf'); w.print(); w.close(); ">​​​​​​​​​​​​​​​​​print pdf</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-05T21:17:27.820

您可以通过在表单方法中添加*target="_blank"*来打开 pdf

```
<form method="post" target="_blank">
...
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-03T11:38:14.010

简而言之，这是不可能的，所以答案可以澄清。

[https://stackoverflow.com/a/39763562/1695062](https://stackoverflow.com/a/39763562/1695062)

# jquery - 输入键上的jquery验证不起作用

> ID：15742925
> 
> 赞同：1
> 
> 时间：2013-04-01T11:49:34.370
> 
> 标签：jquery, jquery-validate

当我在通过验证表单验证的表单上使用提交按钮时，一切都按预期运行。
但是当我使用 Enter 键而不是提交按钮时，验证无法正常工作。
表单在没有检查验证的情况下被提交。

我怎么解决这个问题 ？

```
$(function () {
    /* Varable Declarataion..... */
    var $pin = $("#pinCode").attr("name");
    var $params = {debug:false, rules:{}, messages:{}};
    $params['invalidHandler'] = function(form, validator) {
        jQuery(document).scrollLeft(300) ;
        jQuery(document).scrollTop(100);
        var posX = jQuery(document).clientWidth/2;
        var posY = jQuery(document).scrollTop()+(jQuery(document).clientHeight/2);
        $("#dialog-confirm").dialog({
            resizable: false,
            height:180,
            modal: true,
            position:[posX,posY],
            buttons: {
               "Ok": function() {
                        $( this ).dialog( "close" );
                }
            }
        });
    };
    $params['rules'][$pin] = {required:true, digits :true, maxlength:9, min:1}; 
    $params['messages'][$pin] = {
        required:"Please enter pin code",
        digits :"Please enter a valid pin",
        maxlength:"pin code must be less than 10 digit",
        min: "zero can not be a pin code"
    };
    $("#form1").validate($params);
}); 
```

# linq - 如何使用c#查找记录在数组中的位置或不存在

> ID：15742926
> 
> 赞同：0
> 
> 时间：2013-04-01T11:49:37.717
> 
> 标签：linq, lambda

我有一组元素和记录。我想显示仅包含数组中记录的所有记录。

例如：

数组包含：`[1,2,3]` 记录包含：`[1,2,3,4,5,6,7,8,9,10]`

我只想显示`1,2,3`记录。如何在 C# 中进行比较

对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:55:13.903

假设您使用 linq 进行查询：

```
int[] array = new[] { 1,2,3 };
var record1 = new[] { 1,2,3,4,5,6,7,8,9,10 };
var record2 = new[] { 4,5,6,7,8,9,10 };
var records = new[] { record1, record2 };

// this will return record if at least one record in array is matched
var result1 = from r in records where array.Any(a => r.Contains(a)) select r;

// this will return record only if all items in array are matched
var result2 = from r in records where array.All(a => r.Contains(a)) select r; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T14:04:43.693

```
 string[] a={"1","2","3"};
    string[] b={"1","2","3","4","1","5","6","7","8","9","10"};
    List<string> x=new List<string>();
    foreach (string s in a)
    {
        if (b.Contains(s))
        {
            //if you only wants to display
            Console.WriteLine(s);
            // if you want it to store , add it to a list
            if(!x.Contains(s))
            x.Add(s);
        }
    } 
```

# java - 从我的 jar 中复制文件非常简单

> ID：15742934
> 
> 赞同：0
> 
> 时间：2013-04-01T11:50:01.470
> 
> 标签：java, file, jar, path

好的，所以我想打开一个放在 jar 中的 pdf 文件，所以我需要将文件从 jar 复制到我的磁盘，我通过以下代码完成了此操作：

```
InputStream is = Jar.class.getResourceAsStream("images/lol.pdf");
OutputStream os = new FileOutputStream("753951741.pdf");
byte[] buffer = new byte[4096];
int length;
while ((length = is.read(buffer)) > 0)
    os.write(buffer, 0, length);
os.close();
is.close(); 
```

我的问题是：如何控制文件的创建位置？当我执行程序时，它是在 C:/Users/Buba 下创建的，在此先感谢 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:55:30.303

你可以这样做：

```
File file = new File("c:/753951741.pdf");
OutputStream os = new FileOutputStream(file); 
```

在这种情况下，文件将在 C:/

有关 Java 中的文件的更多信息： [http://docs.oracle.com/javase/6/docs/api/java/io/File.html#File(java.lang.String)](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#File(java.lang.String))

# jquery - 如何隔离网站小工具中的 CSS？

> ID：15742936
> 
> 赞同：1
> 
> 时间：2013-04-01T11:50:05.087
> 
> 标签：jquery, css

我有一个 livecore 网站，我正在尝试制作该网站的小工具以在其他网站上显示它的一部分，我面临的问题是如何将我的代码（JavaScript 和 CSS）与我的主机站点的代码隔离开来小工具。我使用这样的“匿名函数”：

```
(function() {

// Localize jQuery variable
var jQuery;

/******** Load jQuery if not present *********/
if (window.jQuery === undefined || window.jQuery.fn.jquery !== '1.8.3') {
    var script_tag = document.createElement('script');
    script_tag.setAttribute("type","text/javascript");
    script_tag.setAttribute("src",
        "http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js");
    if (script_tag.readyState) {
      script_tag.onreadystatechange = function () { // For old versions of IE
          if (this.readyState == 'complete' || this.readyState == 'loaded') {
              scriptLoadHandler();
          }
      };
    } else { // Other browsers
      script_tag.onload = scriptLoadHandler;
    }
    // Try to find the head, otherwise default to the documentElement
    (document.getElementsByTagName("head")[0] || document.documentElement).appendChild(script_tag);
} else {
    // The jQuery version on the window is the one we want to use
    jQuery = window.jQuery;
    main();
}

/******** Called once jQuery has loaded ******/
function scriptLoadHandler() {
    // Restore $ and window.jQuery to their previous values and store the
    // new jQuery in our local jQuery variable
    jQuery = window.jQuery.noConflict(true);
    // Call our main function
    main(); 
}

/******** Our main function ********/
function main() { 
    jQuery(document).ready(function($) {
    /******* Load CSS *******/
    var css_link = $("<link>", { 
            rel: "stylesheet", 
            type: "text/css", 
            href: "http://localhost/aaa/widget/widget.css" 
        });
        css_link.appendTo('head');          
        var txt;
        txt='<div id="wrapper">';
        txt=txt+'<ul class="tabs">';
        txt=txt+'<li id="fixtures_tab"><a href="#fixtures">All</a></li>';
        txt=txt+'<li id="live_tab"><a href="#live">Live</a></li>';
        txt=txt+'<li id="finished_tab"><a href="#finished">finished</a></li>';
        txt=txt+'<li id="program_tab"><a href="#program">Program</a></li>';
        txt=txt+'<li id="postpond_tab"><a href="#postpond">Postpond</a></li>';
        txt=txt+'<li id="selected_tab"><a id="f" href="#fav">Selected (0)</a></li>';
        txt=txt+'</ul>';
        txt=txt+'<div class="tab-container">';
        txt=txt+'<div id="fixtures" class="tab-content"><script type="text/javascript">get_All_Today_Matches();</script></div>';
        txt=txt+'<div id="live" class="tab-content"><script type="text/javascript"></script></div>';
        txt=txt+'<div id="finished" class="tab-content"><script type="text/javascript"></script></div>';
        txt=txt+'<div id="program" class="tab-content"><script type="text/javascript"></script></div>';
        txt=txt+'<div id="postpond" class="tab-content"><script type="text/javascript"></script></div>';
        txt=txt+'<div id="fav" class="tab-content"><script type="text/javascript"></script></div>';
        txt=txt+'</div>';
        txt=txt+'</div>';
        $('#widget-container').html(txt);
    });
}

})(); // We call our anonymous function immediately 
```

JQuery 一切正常，但 CSS 不正常（CSS 文件已加载并且工作正常，但一些托管站点 CSS 影响了我的 CSS）我无法控制托管站点 CSS，我认为我已经隔离了我的代码使用匿名函数很好，但为什么我的 CSS 会受到网站原始 CSS 的影响？请帮帮我，我已经有一段时间了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:54:48.823

我知道两种可能的解决方案。

一种是通过[`iframe`](https://developer.mozilla.org/en-US/docs/HTML/Element/iframe). 你的 CSS 不会发生冲突，除非其他网站[专门写了一些东西](https://stackoverflow.com/questions/14619364/apply-css-to-iframe-content)来修改你的 iframe 内的 CSS。但默认情况下，这不会是一个问题。

否则，您必须在`MyWidget_`所有类/ID 名称的开头添加，以防止与其他站点发生冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:01:02.867

我的解决方案是向`my-widget-wrapper`顶部元素添加一个类，在这种情况下，我认为它是带有 id 的元素`wrapper`。

然后将我的样式文件中的所有 css 规则指定为 class 的子项`my-widget-wrapper`。

例如：将`a`元素的颜色更改为绿色，而不是 css 规则

```
a {
    color: green;
} 
```

我会用

```
.my-widget-wrapper a {
    color: green
} 
```

*旁注*：当您开发小部件时，切勿在小部件元素中使用固定 ID，因为它会限制您在页面中只有一个小部件实例。不使用`id`属性来识别元素，而是使用自定义`class`属性

# solr - 使用 nutch 中的特殊字符启用抓取 url

> ID：15742939
> 
> 赞同：0
> 
> 时间：2013-04-01T11:50:12.860
> 
> 标签：solr, nutch

我正在使用 apache nutch-1.5.1 版本和与 hadoop 1.0.3 集成的 solr 3.6.2。我想抓取域例如“www.my-website.com”有不同的页面，如 1\. www.my-website.com/page.1 2\. www.my-website.com/page.2.. www .my-website.com/page.1 有很多信息，例如（www.my-website.com/page.1/search?page=2&tab=relevance&q=222）我无法抓取此类链接（其中包含特殊字符(?,=)).. 我在 regex.urlfilter.txt 中评论

> # 跳过包含某些字符的 URL 作为可能的查询等。
> 
> # -[?*!@=]..

. 但输出仍然没有区别....请分享您的想法提前谢谢Jaipal R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:02:52.300

看看 crawl-urlfilter.txt。*有一个类似的条目，如果您真的*想抓取这些网址，也应该对其进行评论。

```
# skip URLs containing certain characters as probable queries, etc.
-[?*!@=] 
```

请小心，否则您可能会陷入无限循环的情况，例如永远不会结束的分页。

您应该添加例外而不是更改规则。

```
 +www.my-website.com/page.*
   # skip URLs containing certain characters as probable queries, etc. 
   -[?*!@=] 
```

# php - 使用zend框架生成PHP Excel

> ID：15742940
> 
> 赞同：1
> 
> 时间：2013-04-01T11:50:15.633
> 
> 标签：php, zend-framework, frameworks

当我要在 zend 框架中使用 PHPExcel 类生成 EXCEL 文件时，当数据超过 20 天时会出现错误 ERROR IS

> 文件未找到
> 
> [Firefox 在http://eyeq.local/eyeq/reports/reading-speed-analysis-report/op/export/organization_id/1/department_id//from_date/03-12-2013/to_date/04](http://eyeq.local/eyeq/reports/reading-speed-analysis-report/op/export/organization_id/1/department_id//from_date/03-12-2013/to_date/04-01-2013/userType/1/user_id//reportSize/full)找不到文件[-01-2013/userType/1/user_id//reportSize/full](http://eyeq.local/eyeq/reports/reading-speed-analysis-report/op/export/organization_id/1/department_id//from_date/03-12-2013/to_date/04-01-2013/userType/1/user_id//reportSize/full)。
> 
> 检查文件名的大小写或其他输入错误。检查文件是否被移动、重命名或删除。

我已经将执行时间增加到 18000，内存限制增加到 256m

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:21:54.440

url 中的**department_id**为空

即 URL*...../department_id/ **[这应该是一个整数]** /from_date......*

# android - 在android中使用json获取数据时如何删除特殊字符？

> ID：15742941
> 
> 赞同：0
> 
> 时间：2013-04-01T11:50:15.867
> 
> 标签：android, json

我正在开发安卓应用程序。我需要从 PHP Web 服务获取数据。我从 PHP 服务器得到的响应如下所示：

```
String response = [{id:100,category:local,count1:58,count2:86},
    {id:101,category:server/local,count1:18,count2:27},
    {id:102,category:server & local,count1:19,count2:28}]; 
```

但是当我尝试使用 JSON 分离数据时，我收到以下消息。

```
org.json.JSONException: Unterminated object at character 
```

如何删除特殊字符并使用 JSON 数组获取数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:57:41.143

字符串应该在双引号下。您的 json 不是有效响应。所以改变你的回应

```
{id:100,category:local,count1:58,count2:86} 
```

至

```
{
 "id":100,
 "category":"local",
 "count1":58,
 "count2":86
} 
```

参考[这里](http://jsonformatter.curiousconcept.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:11:19.093

有效的 JSON 格式

```
{
   "Status":"OK",
   "Error":{
      "Code":0,
      "Description":""
   },
   "Data":[]
} 
```

# sql - 将外键列从非空更新为空

> ID：15742942
> 
> 赞同：0
> 
> 时间：2013-04-01T11:50:17.123
> 
> 标签：sql

如何在不重新创建表的情况下将表中的外键列从非空更新为空？

我试着用这个：

```
update tblProduct 
set ConsumerID not null 
```

请指教，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:53:40.803

你尝试过这样的事情吗？

```
ALTER TABLE [Table] ALTER COLUMN [Column] INTEGER NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:53:43.240

```
ALTER TABLE tblProduct MODIFY ConsumerID BIGINT NOT NULL; 
```

有关更改 MySQL 表的更多详细信息，请访问[ALTER TABLE SYNTAX](http://dev.mysql.com/doc/refman/5.5/en/alter-table.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T11:56:02.127

这是更改有关表的数据而不是表中的数据，因此您需要更改数据模式。所以看看 create 和 alter table 语句

例如对于 Sybase（和 MS Sql 服务器）

```
alter table tblProduct modify ConsumerID integer NULL 
```

# php - 登录抛出 curl 和浏览器

> ID：15742945
> 
> 赞同：1
> 
> 时间：2013-04-01T11:50:36.203
> 
> 标签：php, cookies, curl, drupal-7

我正在使用 drupal 7 和 REST api。我想用 curl 登录 drupal，然后当我用浏览器访问该网站时，我想登录。

我正在使用 gthis 代码：

```
<?php

$user_data = array(
  'username' => 'usertest',
  'password' => 'pass',
);
$ch = curl_init();
$tmpfname = dirname(__FILE__).'/'.$_COOKIE['PHPSESSID'].'.txt';
curl_setopt($ch, CURLOPT_URL, "http://example.com/networklogin/user/login");
curl_setopt($ch, CURLOPT_POST, TRUE);
curl_setopt($ch, CURLOPT_POSTFIELDS, $user_data);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt( $ch, CURLOPT_COOKIESESSION, true );
curl_setopt( $ch, CURLOPT_COOKIEJAR, $tmpfname );
curl_setopt( $ch, CURLOPT_COOKIEFILE, $tmpfname );
$response = curl_exec($ch);
$http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
curl_close($ch);

?> 
```

它工作得很好，它让用户登录，但是当我访问“example.com”时，我没有以“usertest”的身份登录。有什么方法可以让我登录 Drupal 并允许我使用浏览器访问？

目标是当我登录到一个网站时使用相同的用户登录到许多网站，就像我在这里写的那样（[相同的网络服务器，相同的drupal，相同的数据库，单点登录？](https://stackoverflow.com/questions/15569542/same-webserver-same-drupal-same-db-single-sign-on)）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:56:19.850

好的，我在这里找到了解决方案： [通过 CURL 和客户端浏览器登录网站](https://stackoverflow.com/questions/9354418/login-to-website-through-curl-and-client-browser)

为用户浏览器使用 curl cookie 几乎是不可能的。

# database - 关于数据库中密码安全性的疑问

> ID：15742946
> 
> 赞同：0
> 
> 时间：2013-04-01T11:50:51.317
> 
> 标签：database, security, passwords

我读过这篇文章：[http ://crackstation.net/hashing-security.htm](http://crackstation.net/hashing-security.htm)

在对密码进行哈希处理的部分中，它说最好在服务器中对密码进行哈希处理，因为如果有人窃取了哈希数据库，则无需密码即可访问用户帐户。

但是如果有人可以窃取哈希数据库，他可以访问整个数据库，对吗？如果这是正确的，他可以访问所有数据，而不仅仅是用户信息。那么他为什么只想要部分信息呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T12:46:01.590

攻击者通常会尝试窃取数据库以访问应用程序。当然，如果数据库包含敏感信息（如信用卡号），如果他窃取了数据库，他就不需要访问应用程序。（PCI DSS 标准解释了如何存储信用卡信息）

如果他找到纯文本密码，他将能够毫无问题地访问应用程序。但如果数据库包含散列值，攻击者需要找到与散列值对应的纯文本值。如果您使用 MD5 或 SHA1 等弱哈希算法，攻击者可以更轻松地对纯文本值进行精细处理。

为了获得更好的保护，建议使用强哈希算法，如 SHA128 或 SHA 256。此外，强烈建议为每个用户使用不同的盐值。（提示：将值存储在不称为 salt 的列中，例如 userhint）

一般评论：在安全方面，您应该尽可能地保护。您保护您的应用程序免受 SQL 注入，以防止数据库被盗[https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet) 您散列/加密敏感，以防您的数据库被盗：数据[https://www.owasp.org /index.php/Top_10_2013-A6-Sensitive_Data_Exposure](https://www.owasp.org/index.php/Top_10_2013-A6-Sensitive_Data_Exposure)

# android - 如何在android中使用流媒体设置播放歌曲的倒数计时器

> ID：15742947
> 
> 赞同：-1
> 
> 时间：2013-04-01T11:51:08.167
> 
> 标签：android, countdowntimer

我正在尝试为来自 url 的流式歌曲设置倒数计时器。倒数计时器正在工作，但是当由于互联网速度慢而没有缓冲数据时，倒数计时器不会停止。如果有人对此有任何想法，请帮助我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:56:42.003

您可以像这样获得媒体播放器的总持续时间和当前持续时间

```
long totalDuration = mediaPlayer.getDuration()/1000; // converted to seconds

long currentDuration = mediaPlayer.getCurrentPosition()/1000; 
```

并获得倒数计时器，您可以使用它

```
long  counDown = currentDuration  - totalDuration ; 
```

希望这对您有所帮助。

# c# - 我可以使用 RouteLink 根据单击的链接更改路由的参数吗，MVC3

> ID：15742948
> 
> 赞同：0
> 
> 时间：2013-04-01T11:51:16.023
> 
> 标签：c#, asp.net-mvc-3, view, asp.net-mvc-routing, global-asax

在 Global.asax.cs

```
routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Menu", PageName="Index" } // Parameter defaults
        );

routes.MapRoute(
            "NewRoute", // Route name
            "{controller}/{action}/{PageName}", // URL with parameters
            new { controller = "Home", action = "Menu", PageName = UrlParameter.Optional } // Parameter defaults
        ); 
```

我希望此参数仅在第一个主页加载`PageName`时为“ ”。`Index`在菜单链接单击之后，我需要传输与`PageName`链接对应的参数值，而不是值“索引”。因此我写了一个新的 MapRoute，其中 PageName 是可选的，而不是“索引”。

所以在我的`_Layout.cshtml`

```
foreach(...)
{
     @Html.ActionLink(item.Title, "Menu", "Home", new { PageName = item.PageName, role = "Admin" }, null)

} 
```

目前对于所有链接单击，仅采用参数值“索引”，这是无意的。我希望这个'索引'是'home'或'aboutUS'或''......取决于用户点击的链接。

经过一番搜索，我发现 RouteLink 可以更改默认路由...

```
 @Html.RouteLink(item.Title, "NewRoute", new { PageName = item.PageName }) 
```

实际上，我需要为 PageName 指定一个默认值，并且它应该在链接点击时更改。

请告诉我 routelink 是否是此问题的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T06:50:13.547

在 Global.asax.cs 中，将 {ID} 更改为 {PageName}

```
routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{pagename}", // URL with parameters
        new { controller = "Home", action = "Menu", PageName="Index" } // Parameter defaults
    ); 
```

无需添加新路线，也不需要 RouteLink。ActionLink 本身有效。

# javascript - 使用自定义验证器防止未来日期和今天日期

> ID：15742951
> 
> 赞同：1
> 
> 时间：2013-04-01T11:51:40.787
> 
> 标签：javascript, asp.net, client-side-validation, custom-validators

我正在使用**Entity 框架**`.NET 4`开发一个项目。有一个注册页面，其中包含出生日期。我想验证它，以便出生日期不能是将来或今天。此外，如果与今天相比，它可以追溯到 5 年前。

这是我的代码。

```
Date of Birth:
<asp:RequiredFieldValidator ID="rfv_txtbx_DOB" runat="server" ControlToValidate="txtbx_DOB" CssClass="validator" Display="Dynamic" ErrorMessage="Date of Birth Required" SetFocusOnError="True" Text="*" ValidationGroup="vg" />
<asp:CustomValidator ID="cv_txtbx_DOB" runat="server"  ControlToValidate="txtbx_DOB" CssClass="validator" Display="Dynamic" 
    ErrorMessage="Date of Birth cannot be today or in future" SetFocusOnError="True" Text="*" ValidationGroup="vg" ClientValidationFunction="validateDate"/>
<asp:TextBox ID="txtbx_DOB" runat="server" CssClass="txtbx" Width="200px" />
<ajaxToolkit:CalendarExtender ID="txtbx_DOB_CalendarExtender" runat="server" Enabled="True" Format="dd-MM-yyyy" TargetControlID="txtbx_DOB" />
<script language="javascript" type="text/javascript">
    function Validate(sender, args) {
        var currentDate = new Date().getDate();

            if (args.Value < currentDate)
                args.IsValid = true;
            else
                args.IsValid = false;
        }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-03T16:35:24.143

```
function check_date()
{
var chkdate = document.getElementById("ID OF YOUR TEXT FIELD HERE").value;

var edate = chkdate.split("/");
var spdate = new Date();
var sdd = spdate.getDate();
var smm = spdate.getMonth();
var syyyy = spdate.getFullYear();
var today = new Date(syyyy,smm,sdd).getTime();
var e_date = new Date(edate[2],edate[1]-1,edate[0]).getTime();
if(e_date > today)
 {
    alert("Date is not valid");
    return false;
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T11:57:01.580

页面加载时

```
protected void Page_Load(object sender, EventArgs e)
{
     Calendar1.EndDate = DateTime.Now;   //to dissable future  Date
} 
```

这是日历扩展器中所有限制的链接

[http://www.karpach.com/ajaxtoolkit-calendar-extender-tweaks.htm](http://www.karpach.com/ajaxtoolkit-calendar-extender-tweaks.htm)

或者使用下面的 java-script 函数

```
function checkDate(sender, args) {
     if (sender._selectedDate > new Date()) {
          alert("You can select a day earlier than today!");
            sender._selectedDate = new Date();
            // set the date back to the current date
            sender._textbox.set_Value(sender._selectedDate.format(sender._format))
  } 
```

# c - epoll 和发送延迟

> ID：15742954
> 
> 赞同：2
> 
> 时间：2013-04-01T11:51:52.827
> 
> 标签：c, linux, sockets, epoll

我使用的是 64 位 Linux `Linux scv 3.2.0-39-generic #62-Ubuntu SMP Thu Feb 28 00:28:53 UTC 2013 x86_64 x86_64 x86_64 GNU/Linux`，并且有两个进程使用在同一物理主机上运行的套接字。

一个进程 ( *A* ) 在 TCP/IP 套接字上发送以下数据：

1.  276 字节
2.  16 字节

*这是在进程A*的 0.000023 秒内完成的。数据正在发送调用 2 次`send`套接字 API。

另一个进程 ( *B* ) 通过*epoll*接收数据，使用`epoll_wait(efd, events, 10, 5)`. 数据接收如下（时间与`clock_gettime(CLOCK_REALTIME, &cur_ts);`，重要的是相对差异）：

1.  从 8051.177743 (276) 的套接字缓冲区读取数据
2.  再次拨打 epoll 8051.177763
3.  从套接字缓冲区读取数据 8051.216250 (16)

使接收过程*滞后*0.038507 秒。基本上，如果发送过程*A*花费的时间少于*ms*，则在接收端*epoll*接收数据会增加大约 0.038 s 的额外延迟。

这是预期的吗？我究竟做错了什么？
或者我该如何改善这种情况？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-01T14:36:37.710

> Is this expected? ...

Yes. I would expect that. Here's why:

> What am I doing wrong? ...

epoll was designed to be used in situations where large numbers of file descriptors need to be watched. That's what it's suitable for, and it seems to me that the situation you're using it for *isn't* that situation.

> ... how can I improve the situation?

If you want to improve the performance, *use the right tool for the job*. Don't use epoll for a single socket. Just use plain-old vanilla recv. If you're handling two or three sockets, consider using poll or select. If you're venturing into hundreds, then you might want to consider using epoll or kqueue.

# java - 对于 TextView 类型，方法 getBytes() 未定义

> ID：15742956
> 
> 赞同：1
> 
> 时间：2013-04-01T11:52:01.777
> 
> 标签：java, android, eclipse, nfc

我正在尝试使用以下示例将多条记录添加到一条记录中，`NDefMessage`但是当我尝试这样做时 - 我收到一条错误消息，指出“该`getBytes()`类型的方法未定义`TextView`”

示例： [示例](https://stackoverflow.com/questions/11427997/android-app-to-add-mutiple-record-in-nfc-tag?rq=1)

资源：

```
public class ViewCountry extends Activity implements CreateNdefMessageCallback,
            OnNdefPushCompleteCallback {
    NfcAdapter mNfcAdapter;
   // TextView timeTv;
       private static final int MESSAGE_SENT = 1;
       private long rowID;
       private TextView nameTv;
       private TextView capTv;
       private TextView codeTv; 
       private TextView timeTv; 

       @Override
       public void onCreate(Bundle savedInstanceState) 
       {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.view_country);

          setUpViews();
          Bundle extras = getIntent().getExtras();
          rowID = extras.getLong(CountryList.ROW_ID); 
       }

       private void setUpViews() {
           nameTv = (TextView) findViewById(R.id.nameText);
           capTv = (TextView) findViewById(R.id.capText);
           timeTv = (TextView) findViewById(R.id.timeEdit);
           codeTv = (TextView) findViewById(R.id.codeText);

          nameTv = (TextView) findViewById(R.id.nameText);
            // Check for available NFC Adapter
            mNfcAdapter = NfcAdapter.getDefaultAdapter(this);
            if (mNfcAdapter == null) {
                nameTv = (TextView) findViewById(R.id.nameText);
                nameTv.setText("NFC is not available on this device.");
                timeTv = (TextView) findViewById(R.id.timeEdit);
                timeTv.setText("NFC is not available on this device.");
            } else {
                // Register callback to set NDEF message
                mNfcAdapter.setNdefPushMessageCallback(this, this);
                // Register callback to listen for message-sent success
                mNfcAdapter.setOnNdefPushCompleteCallback(this, this);
            }
        }

       @Override
        public NdefMessage createNdefMessage(NfcEvent event) {
           String message1 = nameTv.getText().toString();
            String message2 = timeTv.getText().toString();
            byte[] textBytes1 = nameTv.getBytes();
            byte[] textBytes2 = timeTv.getBytes();
            NdefRecord textRecord1 = new NdefRecord(NdefRecord.TNF_WELL_KNOWN, 
                    message1.getBytes(), new byte[]{}, textBytes1);
            NdefRecord textRecord2 = new NdefRecord(NdefRecord.TNF_WELL_KNOWN, 
                    message2.getBytes(), new byte[]{}, textBytes2);

           //   String text = ("SSID");

            NdefMessage msg = new NdefMessage(
                    new NdefRecord[]{
                            textRecord1,
                            textRecord2,                
                            NdefRecord.createApplicationRecord("com.nfc.linked")

                    }
                     */
                     //,NdefRecord.createApplicationRecord("com.nfc.linked")
                   );
                   return msg;
               }

        /**
         * Implementation for the OnNdefPushCompleteCallback interface
         */
        @Override
        public void onNdefPushComplete(NfcEvent arg0) {
            // A handler is needed to send messages to the activity when this
            // callback occurs, because it happens from a binder thread
            mHandler.obtainMessage(MESSAGE_SENT).sendToTarget();
        }

        /** This handler receives a message from onNdefPushComplete */
        private final Handler mHandler = new Handler() {
            @Override
            public void handleMessage(Message msg) {
                switch (msg.what) {
                case MESSAGE_SENT:
                    Toast.makeText(getApplicationContext(), "Core Device Rules Sent!", Toast.LENGTH_LONG).show();
                    break;
                }
            }
        };

        @Override
        public void onNewIntent(Intent intent) {
            // onResume gets called after this to handle the intent
            setIntent(intent);
        }

        /**
         * Parses the NDEF Message from the intent and prints to the TextView
         */
        void processIntent(Intent intent) {
            Parcelable[] rawMsgs = intent.getParcelableArrayExtra(
                    NfcAdapter.EXTRA_NDEF_MESSAGES);
            // only one message sent during the beam
            NdefMessage msg = (NdefMessage) rawMsgs[0];
            // record 0 contains the MIME type, record 1 is the AAR, if present
            nameTv.setText(new String(msg.getRecords()[0].getPayload()));
        }

        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            // If NFC is not available, we won't be needing this menu
            if (mNfcAdapter == null) {
                return super.onCreateOptionsMenu(menu);
            }
            MenuInflater inflater = getMenuInflater();
            inflater.inflate(R.menu.options, menu);
            return true;
        }

        @Override
        public boolean onOptionsItemSelected(MenuItem item) {
            switch (item.getItemId()) {
                case R.id.menu_settings:
                    Intent intent = new Intent(Settings.ACTION_NFCSHARING_SETTINGS);
                    startActivity(intent);
                    return true;
                default:
                    return super.onOptionsItemSelected(item);
            }

        }

       @Override
       protected void onResume()
       {
          super.onResume();
          new LoadContacts().execute(rowID);
       } 

       private class LoadContacts extends AsyncTask<Long, Object, Cursor> 
       {
          DatabaseConnector dbConnector = new DatabaseConnector(ViewCountry.this);

          @Override
          protected Cursor doInBackground(Long... params)
          {
             dbConnector.open();
             return dbConnector.getOneContact(params[0]);
          } 

          @Override
          protected void onPostExecute(Cursor result)
          {
             super.onPostExecute(result);

             result.moveToFirst();
             // get the column index for each data item
             int nameIndex = result.getColumnIndex("name");
             int capIndex = result.getColumnIndex("cap");
             int codeIndex = result.getColumnIndex("code");
             int timeIndex = result.getColumnIndex("time");

             nameTv.setText(result.getString(nameIndex));
             capTv.setText(result.getString(capIndex));
             timeTv.setText(result.getString(timeIndex)); 
             codeTv.setText(result.getString(codeIndex));

             result.close();
             dbConnector.close();
          }
       } 

       private void deleteContact()
       {

          AlertDialog.Builder alert = new AlertDialog.Builder(ViewCountry.this);

          alert.setTitle(R.string.confirmTitle); 
          alert.setMessage(R.string.confirmMessage); 

          alert.setPositiveButton(R.string.delete_btn,
             new DialogInterface.OnClickListener()
             {
                public void onClick(DialogInterface dialog, int button)
                {
                   final DatabaseConnector dbConnector = 
                      new DatabaseConnector(ViewCountry.this);

                   AsyncTask<Long, Object, Object> deleteTask =
                      new AsyncTask<Long, Object, Object>()
                      {
                         @Override
                         protected Object doInBackground(Long... params)
                         {
                            dbConnector.deleteContact(params[0]); 
                            return null;
                         } 

                         @Override
                         protected void onPostExecute(Object result)
                         {
                            finish(); 
                         }
                      };

                   deleteTask.execute(new Long[] { rowID });               
                }
             }
          );

          alert.setNegativeButton(R.string.cancel_btn, null).show();
       }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:58:00.087

> 对于 TextView 类型，方法 getBytes() 未定义

只是 TextView(as object) 不提供`getBytes()`方法。但是，如果要将 TextView 的内容转换为字节数组，则需要先获取 TextView 的内容，然后可以使用 getBytes()

```
byte[] arr = nameTv.getText().toString().getBytes(); 
```

**注意：**如果要将整个对象转换为字节数组，可以使用

*   [`ByteArrayOutputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html)
*   [`ObjectOutputStream`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/ObjectOutputStream.html)

**例子：**

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
ObjectOutputStream writter = new ObjectOutputStream(baos);
writter.writeObject(<yourObject>);
byte[] arr = baos.toByteArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:00:40.350

那是因为 的对象`TextView`没有`getBytes()`方法。

在您拥有的代码中`nameTv.getBytes()`，尝试将其替换为`message1.getBytes()`. 看起来这就是您可能想要的。

# iphone - 如何在 iOS (iPhone) 中使用 opencv 比较图像

> ID：15742958
> 
> 赞同：3
> 
> 时间：2013-04-01T11:52:04.183
> 
> 标签：iphone, ios, opencv, comparison

我想在我的项目中比较 iPhone 相机拍摄的 2 张图像。我正在使用 OpenCV 来做到这一点。还有其他更好的方法吗？如果我得到 % 相似度，那就太好了。

我正在使用 OpenCV 以下代码进行图像比较：

```
-(void)opencvImageCompare{ 
 NSMutableArray *valuesArray=[[NSMutableArray alloc]init];
 IplImage *img = [self CreateIplImageFromUIImage:imageView.image];
// always check camera image
 if(img == 0) {
   printf("Cannot load camera img");

}

IplImage  *res; 
CvPoint   minloc, maxloc;
double    minval, maxval;
double values;

UIImage *imageTocompare = [UIImage imageNamed:@"MyImageName"];
IplImage *imageTocompareIpl = [self CreateIplImageFromUIImage:imageTocompare];
// always check server image 
if(imageTocompareIpl == 0) {
    printf("Cannot load serverIplImageArray image");
}
if(img->width-imageTocompareIpl->width<=0 && img->height-imageTocompareIpl->height<=0){
    int balWidth=imageTocompareIpl->width-img->width;
    int balHeight=imageTocompareIpl->height-img->height;
    img->width=img->width+balWidth+100;
    img->height=img->height+balHeight+100;
}

CvSize size = cvSize(
                     img->width  - imageTocompareIpl->width  + 1,
                     img->height - imageTocompareIpl->height + 1
                     );

res = cvCreateImage(size, IPL_DEPTH_32F, 1);

// CV_TM_SQDIFF CV_TM_SQDIFF_NORMED
// CV_TM_CCORR  CV_TM_CCORR_NORMED
// CV_TM_CCOEFF CV_TM_CCOEFF_NORMED

cvMatchTemplate(img, imageTocompareIpl, res,CV_TM_CCOEFF);
cvMinMaxLoc(res, &minval, &maxval, &minloc, &maxloc, 0);
printf("\n value %f", maxval-minval);
values=maxval-minval;
NSString *valString=[NSString stringWithFormat:@"%f",values];
[valuesArray addObject:valString];
weedObject.values=[valString doubleValue];
printf("\n------------------------------");

cvReleaseImage(&imageTocompareIpl);

cvReleaseImage(&res);
}
cvReleaseImage(&img);

} 
```

对于相同的图像，我得到非零结果（14956 ...），如果我传递不同的图像，它会崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:57:12.860

试试这个代码，它会逐位比较图像，即 100%

```
UIImage *img1 = // Some photo;
UIImage *img2 = // Some photo;

NSData *imgdata1 = UIImagePNGRepresentation(img1);

NSData *imgdata2 = UIImagePNGRepresentation(img2);

if ([imgdata1 isEqualToData:imgdata2]) 
{
NSLog(@"Same Image");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-31T06:25:33.403

试试这个代码 - 它逐像素比较图像

```
-(void)removeindicator :(UIImage *)image
{
    for (int i =0; i < [imageArray count]; i++)
    {
        CGFloat width =100.0f;
        CGFloat height=100.0f;

        CGSize newSize1 = CGSizeMake(width, height); //whaterver size
        UIGraphicsBeginImageContext(newSize1);
        [[UIImage imageNamed:[imageArray objectAtIndex:i]] drawInRect:CGRectMake(0, 0, newSize1.width, newSize1.height)];
         UIImage *newImage1 = UIGraphicsGetImageFromCurrentImageContext();
         UIGraphicsEndImageContext();

        UIImageView *imageview_camera=(UIImageView *)[self.view viewWithTag:-3];

        CGSize newSize2 = CGSizeMake(width, height); //whaterver size
        UIGraphicsBeginImageContext(newSize2);
        [[imageview_camera image] drawInRect:CGRectMake(0, 0, newSize2.width, newSize2.height)];
         UIImage *newImage2 = UIGraphicsGetImageFromCurrentImageContext();
         UIGraphicsEndImageContext();

       float numDifferences = 0.0f;
       float totalCompares = width * height;

       NSArray *img1RGB=[[NSArray alloc]init];
       NSArray *img2RGB=[[NSArray alloc]init];

      for (int yCoord = 0; yCoord < height; yCoord += 1)
      {
          for (int xCoord = 0; xCoord < width; xCoord += 1)
          {
              img1RGB = [self getRGBAsFromImage:newImage1 atX:xCoord andY:yCoord];
              img2RGB = [self getRGBAsFromImage:newImage2 atX:xCoord andY:yCoord];

              if (([[img1RGB objectAtIndex:0]floatValue] - [[img2RGB objectAtIndex:0]floatValue]) == 0 || ([[img1RGB objectAtIndex:1]floatValue] - [[img2RGB objectAtIndex:1]floatValue]) == 0 || ([[img1RGB objectAtIndex:2]floatValue] - [[img2RGB objectAtIndex:2]floatValue]) == 0)
              {
                 //one or more pixel components differs by 10% or more
                 numDifferences++;
              }
           }
       }

    // It will show result in percentage at last
      CGFloat percentage_similar=((numDifferences*100)/totalCompares);
      NSString *str=NULL;

      if (percentage_similar>=10.0f)
      {
          str=[[NSString alloc]initWithString:[NSString stringWithFormat:@"%i%@ Identical", (int)((numDifferences*100)/totalCompares),@"%"]];

              UIAlertView *alertview=[[UIAlertView alloc]initWithTitle:@"i-App" message:[NSString stringWithFormat:@"%@ Images are same",str] delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
              [alertview show];

            break;
       }
      else
      {
          str=[[NSString alloc]initWithString:[NSString stringWithFormat:@"Result: %i%@ Identical",(int)((numDifferences*100)/totalCompares),@"%"]];

          UIAlertView *alertview=[[UIAlertView alloc]initWithTitle:@"i-App" message:[NSString stringWithFormat:@"%@ Images are not same",str] delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
          [alertview show];
      }
  } 
```

}

```
-(NSArray*)getRGBAsFromImage:(UIImage*)image atX:(int)xx andY:(int)yy
{
    //NSArray *result = [[NSArray alloc]init];
    // First get the image into your data buffer
    CGImageRef imageRef = [image CGImage];
    NSUInteger width = CGImageGetWidth(imageRef);
    NSUInteger height = CGImageGetHeight(imageRef);
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    unsigned char *rawData = (unsigned char*) calloc(height * width * 4, sizeof(unsigned char));
    NSUInteger bytesPerPixel = 4;
    NSUInteger bytesPerRow = bytesPerPixel * width;
    NSUInteger bitsPerComponent = 8;
    CGContextRef context = CGBitmapContextCreate(rawData, width, height,
                                              bitsPerComponent, bytesPerRow, colorSpace,
                                             kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big);
   CGColorSpaceRelease(colorSpace);

   CGContextDrawImage(context, CGRectMake(0, 0, width, height), imageRef);
   CGContextRelease(context);

   // Now your rawData contains the image data in the RGBA8888 pixel format.
   int byteIndex = (bytesPerRow * yy) + xx * bytesPerPixel;
   //    for (int ii = 0 ; ii < count ; ++ii)
  //    {
   CGFloat red   = (rawData[byteIndex]     * 1.0) / 255.0;
   CGFloat green = (rawData[byteIndex + 1] * 1.0) / 255.0;
   CGFloat blue  = (rawData[byteIndex + 2] * 1.0) / 255.0;
   //CGFloat alpha = (rawData[byteIndex + 3] * 1.0) / 255.0;
   byteIndex += 4;

   // UIColor *acolor = [UIColor colorWithRed:red green:green blue:blue alpha:alpha];

   //}
   free(rawData);

   NSArray *result = [NSArray arrayWithObjects:
                   [NSNumber numberWithFloat:red],
                   [NSNumber numberWithFloat:green],
                   [NSNumber numberWithFloat:blue],nil];

   return result;
} 
```

# java - 哈希图中的子字符串

> ID：15742960
> 
> 赞同：1
> 
> 时间：2013-04-01T11:52:10.860
> 
> 标签：java, hashmap, substring

我正在尝试创建一个地图并稍后使用该地图。我正在创建这样的地图。

```
String line = "0010020 027071040YN Address Line 1";
Map.put(line.substring(0,8).toString(), line.substring(8).toString()); 
```

所以我的地图看起来像`"0010020=027071040YN Address Line 1"`。

它工作正常。但是当我试图从地图中检索此条目时，我无法做到。我正在尝试这样检索：-

```
String temp= Map.get("0010020").toString(); 
```

如果我在将数据放入 Map 时不使用子字符串，同样的事情也可以正常工作。但我需要使用子字符串。请让我知道如何进行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T11:53:58.757

问题是后面的`0010020`空间

```
0010020 027071040YN...
       ^ THIS 
```

您将空格包含在`substring(0,8)`但不包含在查找中。

换句话说，地图中的关键是`"0010020 "`while you're looking for `"0010020"`。

# iphone - Xib的连接问题和创建的网点

> ID：15742964
> 
> 赞同：1
> 
> 时间：2013-04-01T11:52:28.180
> 
> 标签：iphone, connection, xib

我有两个单独的项目，并且都有同名的 viewController 类。我用 Xib 将一个项目文件导入另一个项目文件，我用它的 xib 名称更改了第二个类，并且运行良好。但是当我在 xib 中查看 xib 中的对象时，没有显示我在 .h 类中创建的引用插座。请在这种情况下帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:04:18.437

单击要在其中引用 xib 的文件所有者，然后选择或编写适当类的类名

*   选择文件的所有者
*   单击身份检查员（检查员视图上的第三个选项卡）
*   在自定义类下选择或编写适当的类名。

在此之后，您在 .h 文件中添加的引用将显示在其上。

# java - 如何从文件列表中获取最后修改的文件

> ID：15742965
> 
> 赞同：1
> 
> 时间：2013-04-01T11:52:28.847
> 
> 标签：java

我在带有用户名和电话号码的目录中有文本文件列表。每次用户更改电话号码时，它都会保存在同一目录中的新文件中。现在我正在搜索其条目存在于多个文件中的用户。我该怎么做找到最后修改文件的名称..？下面是我目前想出的代码片段。

```
public static String queryFile() throws IOException{

    File directory = new File("E:\\idm\\users\\output");
    Boolean isUserPresent = false;
    String queryUser = "Mar25-user6";
    ArrayList arr = new ArrayList();

    if(directory.isDirectory())
    {
        File[] fileNames = directory.listFiles();
        for(int i=0;i<fileNames.length;i++)
        {
          BufferedReader reader = new BufferedReader(new InputStreamReader(new FileInputStream(fileNames[i])));
          while((line = reader.readLine()) != null)
          {
            if(line.contains(queryUser))
            {
                arr.add(fileNames[i]);

            }
          }

        }

        /*
         how to check the last modified file from among files present in Arraylist arr.
         */

         if (arr.isEmpty)
         {
         isUserPresent = false;
         return "";
         }
         else
         {
         isUserPresent = true;
        // return name of file if user present
         }   
    }
} 
```

通过 javadoc 我发现 File.lastModified() 函数。比较这个函数返回的值是唯一的选择吗..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:16:32.880

您可以在您的`else`块中使用此代码来返回包含用户名的最新文件（arr 是列表具有包含用户名的所有文件的名称）：

```
Collections.sort(arr, new Comparator<File>() {
    @Override
    public int compare(String file1, String file2) {
      return Long.valueOf(new File(file2).lastModified()).compareTo(
                    new File(file1).lastModified());

    }

});

arr.get(0); // 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:15:24.760

用于 `file.lastModified()`获取每个文件的最后修改日期，然后相互比较

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T12:15:48.597

Java 没有用于这项工作的现成 API，但可以通过使用该`.lastModified()`方法在日期周围放置一些逻辑来轻松实现它，或者您也可以使用[`Apache FileUtils`](http://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/FileUtils.html). 我会推荐使用 Apache Utils。

我会这样做：

1.  为包含与您的查询匹配的数据的文件声明一个列表
2.  遍历Directory并将文件匹配放在上面的List中
3.  最后，遍历第一个 List 并检查最大修改日期

这只是一个想法，您也可以通过遍历目录列表来实现相同的目的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T12:18:39.203

要获取`File`对象的最后修改时间戳，您确实会调用该`lastModified()`方法。您已经有一个文件的 ArrayList，因此遍历它以查找最后修改的字段应该是微不足道的。您还已经在循环文件列表，因此不需要再次循环并找到最后修改的文件。我还建议对您的代码进行一些其他优化：

```
List<File> fileNames = new ArrayList<File>(); // I would rather call this variable "files" though
long latestModified = -1;    
File lastModifiedFile = null;

// ...

for(File file : directory.listFiles()) {
    // Do your magic
    if(line.contains(queryUser)) {
        filesNames.add(file);
        if(file.lastModified() > latestModified) {
            lastModifiedFile = file;
            latestModified = file.lastModified();
        }
    }
}

// After the loop, the latest modified file will be held i the variable `lastModifiedFile` 
```

我不确定它的目的是什么`ArrayList`，但也许你可以一起摆脱它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T12:18:46.030

我会这样做

```
 File lastModified = null;
    for (File file : directory.listFiles()) {
        if (file.isFile()) {
            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(new FileInputStream(file)));
            try {
                for (String line; (line = reader.readLine()) != null;) {
                    if (line.contains(queryUser)) {
                        arr.add(file);
                        if (lastModified == null
                                || file.lastModified() > lastModified
                                        .lastModified()) {
                            lastModified = file;
                        }
                    }
                }
            } finally {
                reader.close();
            }
        }
    } 
```

# java - java...基于集合

> ID：15742970
> 
> 赞同：-2
> 
> 时间：2013-04-01T11:52:42.033
> 
> 标签：java

```
import java.util.ArrayList;
import java.util.*;

class Employee1 implements Comparable<Employee1> {
    int empno;

    String name;
    Employee1(int i,String j) {
        empno=i;
        name=j;
    }

    public int compareTo(Employee1 e1) {
        Employee1 e2=this;
        Integer i1=e1.empno;
        Integer i2=e2.empno;
        return i1.compareTo(i2);
    }
}

public class Employee {
    public static void display(ArrayList<Employee1> i) {
        for(Employee1 o:i){
            System.out.println(o.empno);
        }
    }

    public static void main(String[] args) {
        ArrayList<Employee1> ob=new ArrayList<Employee1>();
        Employee1 e1=new Employee1(1001,"A");
        Employee1 e2=new Employee1(1002,"B");
        ob.add(e2);
        ob.add(e1);
        Collections.sort(ob);
        display(ob);
    }
} 
```

输出应该是`1001 1002`，而不是输出是`1002 1001`。

首先我将`e2`对象传递`empno`给列表，然后 传递`e1`给`empno`1001

由于-中的`compareTo`方法应该与所以为什么它们以错误的顺序显示？`Employee1``e1.compareTo(e2);``1001.compareTo(1002);`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:00:16.767

改变

```
 return i1.compareTo(i2); 
```

到

```
 return -i1.compareTo(i2); 
```

或者

```
 return i2.compareTo(i1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:59:19.787

我认为您的代码写得不好。

以下是该方法的编码方式：

```
public int compareTo(Employee1 other) {
    return this.empno.compareTo(other.empno);
} 
```

# android - 如何从 loadUrl() 读取响应？

> ID：15742974
> 
> 赞同：0
> 
> 时间：2013-04-01T11:52:52.797
> 
> 标签：android, android-webview

我正在尝试使用 WebView 获取和显示网页，加载网页时可能会出现页面重定向，那么是否有任何选项可以读取 URL 作为第一个请求的响应？我必须根据响应 URL 执行某些条件检查。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:56:27.513

看一下 shouldOverrideUrlLoading()：

```
WebViewClient wvc = new WebViewClient() {
            @Override
            public boolean shouldOverrideUrlLoading(WebView view,String url) {
                if (!url.startsWith("http://m.youtube.com/")) {
                    // do something
                    return true;
                } else if (url.startsWith("http://m.youtube.com/watch?")) {
                    // do something different
                    return true;
                }
                return false;
            }
        }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:24:33.513

以下步骤对我有用：

```
webview.setWebViewClient(new WebViewClient(){
       @Override  
         public void onPageFinished(WebView view, String url) {

           if(url.equals(" abc.com")){

              //do some thing
           }
           else
               //do some other thing

             super.onPageFinished(view, url);

         } 
   }); 
```

# java - JFrame不绘图

> ID：15742975
> 
> 赞同：1
> 
> 时间：2013-04-01T11:52:53.893
> 
> 标签：java, swing, jframe, java-2d, paintcomponent

我正在用 JFrame 制作乒乓球游戏，但它没有绘图。

```
package src;

import java.awt.Color;
import java.awt.Graphics;

import javax.swing.*;

public class Pong_Game extends JFrame{
public void Init()
{
    setTitle("Pong");
    setSize(500, 500);
    setResizable(false);
    setVisible(true);
}

public void paintComponent(Graphics g)
{
     g.setColor(Color.BLACK);
     g.fillRect(0, 0, 500, 500);
}
} 
```

我的窗口只是空白，为什么？可能值得注意的一件事是，paintComponent 方法似乎很多人拼写不同或使用不同，所以我认为我做错了。

# java - 防止后台进程显示在 Dock 上

> ID：15742976
> 
> 赞同：8
> 
> 时间：2013-04-01T11:53:00.207
> 
> 标签：java, macos

我有一个 Java 应用程序。对于某些任务，我使用`ProcessBuilder`. 即，我的主应用程序使用 I/O 启动另一个 JVM 实例`Process`，然后两者都使用 I/O 进行通信。

但在`Dock`Mac 上，它显示了两个过程： ![在此处输入图像描述](https://i.stack.imgur.com/LFvvB.png)

我不希望这样，因为另一个进程只做后端工作，不需要预先显示。这也是一种风险，因为他可以轻松地手动强制退出另一个进程。

应该做些什么来确保它在后台运行并且不会在码头上显示自己

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-01T12:04:54.893

如果您的后端处理器确实不需要任何屏幕资源，那么最简单的做法就是以*无头*模式启动新的 JVM：

```
java -Djava.awt.headless=true com.bl.ProcessMain 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-31T14:56:13.180

要全局启用它而不是向每个进程添加选项，请在 .bashrc/.zshrc 启动脚本中像这样设置 JAVA_TOOL_OPTIONS 变量。

导出 JAVA_TOOL_OPTIONS='-Djava.awt.headless=true'

参考这里：

[http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-VM/html/envvars.html](http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-VM/html/envvars.html)

# php - Php 和 MySql - 将数据从一个表复制到另一个表

> ID：15742977
> 
> 赞同：2
> 
> 时间：2013-04-01T11:53:00.190
> 
> 标签：php, mysql

我只是想知道是否可以将数据从一个表列复制到同一数据库中的另一列？下面的代码不适用于我的 MySQL 版本，但它应该可以工作。

```
UPDATE `table1` SET `table1.column1` = 
(SELECT `table2.column2` FROM table2 WHERE `table1.city` = 'table2.city') 
WHERE `listing` ='5' 
```

你有什么想法吗？谢谢 ！

伙计们，我认为使用 php 脚本可以解决这个问题，而这个问题的解决方案是制作一个简短的脚本，它可以用 while 循环完成所有这些:)

感谢大家加入这个讨论！

* * *

**解决方案是在``它们之间的标记应该是列名，这很好用，享受！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:55:04.100

是的，您可以使用[INSERT ... SELECT 语法](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)，例如：

```
INSERT INTO database2.table1 (field1,field3,field9)
SELECT table2.field3,table2.field1,table2.field4
FROM table2; 
```

检查[Mysql](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:01:37.073

看起来您正在尝试执行更新，而不是插入。

```
UPDATE table1 AS t1 INNER JOIN table2 AS t2 ON t1.city=t2.city 
SET t1.column1 = t2.column2
WHERE t1.listing ='5' 
```

如果您确实需要将数据从一个表复制到另一个表，则需要遵循以下语法：

```
INSERT INTO tablename (field1,field2,field3) (SELECT field1,field2,field3 FROM another_table); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T11:56:19.903

尝试

```
INSERT INTO table2
   AS (SELECT *
FROM table1
WHERE table1.city = table2.city AND 
listing = 5); 
```

按列尝试

```
INSERT INTO table2 (columnname1) values (SELECT columnname1 FROM table1 
WHERE table1.city = table2.city AND 
listing = 5); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T12:04:11.520

尝试这个。

```
UPDATE table1, (
    SELECT table2.city, table2.column2 
    FROM table2  ) table2
SET table1.column1 = table2.column2
WHERE table1.city = table2.city
AND listing ='5' 
```

# analytics - Kontagent API - 每个会话统计信息

> ID：15742979
> 
> 赞同：2
> 
> 时间：2013-04-01T11:53:01.737
> 
> 标签：analytics, web-analytics-tools, kontagent

我们的任务是将我们的项目与 Kontagent 集成。我们的要求包括跟踪用户会话的长度。对于用户活动，Kontagent 支持特定的请求类型 - 页面请求（又名 pgr，根据他们的[文档](http://docs.kontagent.com/docs/technical-leads/api-sdk-spec/social/pgr/)）。需要这种类型的请求来识别用户访问并通过适当的用户 ID 累积它们，也可以通过从 IP 地址获取地理位置信息来使用。但是，没有类似的方法可以通过会话 ID 跟踪会话。

那么，我需要知道 Kontagent 如何计算会话长度？它是根据用户活动频率自动完成的，还是我应该发送一些请求来识别会话？我可以想到 2 个选项，但我不喜欢这两个选项：

*   **`Page Request`与会话 ID 一起使用附加。**除了确认用户活动的标准请求外，我可能还会发送额外的请求，这次传递的是会话 ID。如果 Kontagent 正在使用一些算法来根据用户活动频率（`Page Request`我们已经发送的带有用户 ID 的 s 知道）计算会话长度，这将是不必要的，并且在统计方面毫无意义，所以这个问题得到了回答。

*   **使用默认的 data 参数`Page Request`**。Kontagent 支持`data`大多数请求的参数。它是 base64 编码的 JSON 映射对象，应该包含键值对，我可以将会话 ID 放在那里。问题是，`data`参数中的信息不参与/影响 Kontagent 计算的统计数据 - 例如按会话 ID 分组和提取每个会话聚合。

我很乐意了解有关此事的任何线索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T21:51:56.873

这个问题的答案在一定程度上取决于您希望会话长度信息的粒度有多大。因此，我强烈建议您向支持部门发送电子邮件，以获得有关您的特定用例的更多说明。

列出该警告后，Kontagent 会计算大多数客户的平均会话长度，因此您无需传入或计算您身边的“会话”信息。此平均会话长度是通过检查应用程序的给定用户的消息流，然后寻找大于某个阈值的消息间隙来计算的（对于社交应用程序，阈值是 30 分钟；对于移动应用程序，阈值是 2分钟），指示一个会话的终止，并可能开始下一个会话。

如果您需要比检查平均会话长度更精细（例如，如果您想查看特定用户的会话长度），那么可以在我们的 DataMine 产品中运行此查询，它允许您查询原始消息您传递给 Kontagent 的数据。

# jsf - 听众 当用户点击一个选项时

> ID：15742980
> 
> 赞同：1
> 
> 时间：2013-04-01T11:53:07.733
> 
> 标签：jsf, jsf-2, primefaces

当用户从 的下拉菜单中单击一个选项时，我想导航到另一个页面`<p:autocomplete>`，尝试使用 的`onclick`侦听器，`<p:autocomplete>`但每当我单击`<p:autocomplete>`文本框时它都会触发。有没有办法通过使用 javascript 或使用支持 bean 来实现这一点，我应该使用什么侦听器来获得所需的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:56:32.520

您可以使用 ajax itemSelect 事件

```
 <p:autoComplete ...>  
     <p:ajax event="itemSelect" listener="#{bean.handleSelect}" />  
 </p:autoComplete> 
```

This will call the handleSelect method in your bean whenever an item is selected

您还可以查看[primefaces 展示](http://www.primefaces.org/showcase/ui/autoCompleteSelect.jsf)

# python - rpy2 和 R 调试

> ID：15742983
> 
> 赞同：4
> 
> 时间：2013-04-01T11:53:15.000
> 
> 标签：python, r, pandas, rpy2

经过一番麻烦，我成功安装了rpy2。

我的目标是构建模型（gam；Simon Wood 的库 mgcv）并通过将 pandas 数据帧从 python 通过 rpy2 传递到 gam 模型并检索预测来使用预测函数。

R 脚本通过加载 txt 文件进行测试，并通过与 python/rpy2 脚本调用的相同 R 函数对其进行处理，并且工作正常。在 python 脚本中，我从文本文件的腌制版本开始（就像我在我的最终代码中一样，从 pandas 数据帧开始）。

我还能够在 R 脚本中触发其他有意义的错误（传递一个空的数据帧，或者一个缺少列的数据帧以成功执行预测都触发了一个错误，就像它在 R 中一样。）我确实进入了输入数据完整的 gam 函数。

我接近完成，但我不断收到此错误：

ExtractData(object, data, NULL) 中的错误：'names' 属性 [1] 必须与向量 [0] 的长度相同

我不知道有什么方法可以在我的 python 脚本中从 R 获得更多反馈。我该如何调试？或者任何人都可以指出R中的问题可能是什么？或者这是我没有完全掌握的“.convert_to_r_dataframe()”函数的一部分？？？

R代码：

```
f_clean_data <- function(df) {
        t = df
        ... some preprocessing
        t

        }

tc <- f_clean_data(t) 

f_py_gam_predict <- function(gam, df) {
                dfc = f_clean_data(df)
                result <- predict(gam, dfc)
                result
                }

bc_gam = gam(BC ~   
                +s()
                .... some gam model

        , data=tc, method="REML"
        )
summary(bc_gam)

testfile = 'a_test_file.txt'

ttest <- read.table(file=testfile ,sep='\t',header=TRUE);

result = f_py_gam_predict(bc_gam, ttest) 
```

f_py_gam_predict 在 python 脚本中可用。

谢谢， 卢克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T12:19:27.750

检查您输入的数据类型`s()`。`Error in ExtractData(object, data, NULL) : 'names' attribute [1] must be the same length as the vector [0]`当我使用日期时间解释变量时，我也得到了。我通过转换为自开始以来的天数来解决此问题。

```
> library(lubridate)
> library(mgcv)
> df <- data.frame(x=today() + 1:20, y=1:20)
> gam(y~s(x), data=df)
Error in ExtractData(object, data, knots) : 
  'names' attribute [1] must be the same length as the vector [0]
> df$xnum <- (df$x - df$x[1])/ddays(1)
> str(df)
'data.frame':   20 obs. of  3 variables:
 $ x   : Date, format: "2013-04-09" "2013-04-10" "2013-04-11" "2013-04-12" ...
 $ y   : int  1 2 3 4 5 6 7 8 9 10 ...
 $ xnum: num  0 1 2 3 4 5 6 7 8 9 ...
> gam(y~s(xnum), data=df) 
```

最后一个电话工作正常。

至于调试，我经常`save.image()`从 rpy2 调用，然后将 .RData 文件加载到纯 R 会话中以进行进一步审查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-17T09:06:29.557

通常的 R 调试工具可以在 RPy 中使用，例如

```
ro.r("debug(glm)") 
```

或者`ro.r("options(error=recovery)")`

# windows - 在 MS Window 中执行 .java

> ID：15742992
> 
> 赞同：1
> 
> 时间：2013-04-01T11:53:40.550
> 
> 标签：windows, eclipse, macos, java

我是Java的初学者。最近我在 Mac 中使用 Eclipse 构建了一个项目，该项目在工作区的 bin 文件夹中的 .class 下输出：

*   主类
*   面窗类
*   PaintPanel.class ...

当我双击 Mac PC 的 bin 中的 Main.Class 文件时，我可以执行 JFrame appl'n。

但是，当我将 bin 文件夹中的所有内容复制到 Window PC 并尝试运行以下命令时，它只是无法执行它：

使用的命令提示符：

```
C:\Program Files\Java\jre6\bin>java c:\temp\bin\Main.class 
```

错误信息：

```
Exeception in thread "main" java.land.NoClassDefFindError: c:\temp\bin\Main/class ...     

Could not find the main class...Program will exit. 
```

执行程序时我错过了哪些步骤？

关于Java Applet的另一个问题...如果我要允许新客户的PC运行Java Applet，那么每次有新客户端时，我都必须在客户端PC上编译Java项目才能运行Applet？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T11:58:17.520

您不需要指定 Java 应用程序的扩展名，即 remove `.class`。

尝试这个：`java c:\temp\bin\Main`

此外，如果您已经打包了您的 java 文件，那么它必须首先在包中然后运行。例如，如果您已将您的班级声明为

```
package com.my.app;

public class Main{
} 
```

那么你将不得不将类文件移动到`com/my/app`文件夹，然后运行为

```
java c:\temp\bin\com.my.app.Main 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:19:26.267

`Java`默认情况下，命令不包括当前目录`classpath`。请按照以下步骤操作

1.  打开命令提示符
2.  转到编译所有类的目录
3.  像这样执行java命令`java -cp . Main`

    我可以看到目录中有三个类（`Main.class` `MianWindow.class` `PaintPanel.class`），您必须将该目录设置为`classpath`

# internet-explorer - 本网站无权使用 Geolocation API

> ID：15742997
> 
> 赞同：2
> 
> 时间：2013-04-01T11:53:48.680
> 
> 标签：internet-explorer, geolocation

我在尝试使用地理定位 api 时遇到此错误：

```
This website does not have permission to use the Geolocation API 
```

奇怪的是，同一个网站在某些系统（安装了**IE.9 和 I.E10 ）上运行良好，并且在安装了****IE 9**的系统上抛出错误。

我们在不同的系统上对其进行了测试，但它仅在安装了**I.E9**的特定系统上引发错误。

*   我们是否需要一些浏览器设置才能使用此 API？
*   我们的网站需要什么权限才能使用地理定位 API？

**代码**：

```
function geolocateUser()
{
    // If the browser supports the Geolocation API
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(geolocationSuccess, geolocationError);
    }
    else {
        alert("Your browser doesn't support the Geolocation API");
    }

} 
```

如果成功：

```
function geolocationSuccess(position) {

    var userCurrentLatLong = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);

} 
```

如果出现错误：

```
function geolocationError(positionError) {

    alert(positionError.message + "\n" + "you will be redirected to default location.");

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-10-17T10:16:23.287

这可能是 Windows 设置，至少在我的情况下是这样。尝试转到设置（从 Windows 的开始菜单中搜索）> 隐私 > 位置，然后打开位置 = 打开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T12:36:31.897

请按照以下 IE 说明进行操作：

*   打开工具>> Internet选项>>见下图

![在此处输入图像描述](https://i.stack.imgur.com/vbOXW.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-17T19:33:11.417

对于 Windows 10，您可能需要先在“设置”>“隐私”>“位置”中打开“位置服务”，然后再在 Internet Explorer 中打开它。

请参阅：[Windows 10 定位服务和隐私](https://privacy.microsoft.com/en-US/windows-10-location-and-privacy)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-12-29T13:52:56.383

请注意，如果您在开发移动应用程序时在 windows phone 中遇到此问题，则该网站应类似于：“ `http://www.geo.com/geo`”。如果域是某个ip地址，说：“ `192.168.1.2`”，即“ `http://192.168.1.2/geo`”，你永远打不通！