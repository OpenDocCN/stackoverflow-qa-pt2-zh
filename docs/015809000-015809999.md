# StackOverflow 问答 15809000-15809999

# jquery - jQuery if 语句和 .remove() 中的小问题

> ID：15809001
> 
> 赞同：0
> 
> 时间：2013-04-04T10:46:22.510
> 
> 标签：jquery, html

下面是我正在处理的一个项目的 jQuery，我还包含了一个 jsFiddle 链接。

基本上，在我的 if 语句之前，一切都很顺利。到目前为止，我已经设置，如果有人选择星期五或星期六日期，它会从选择框中删除某些时间，这很好。但是，如果有人决定从星期五或星期六更改日期，则不会重新添加已删除的选项，我知道为什么，但是将它们重新添加的最佳方法是什么？我可以做一个 else 声明，但我认为它只会复制已删除的选项

代码：

```
$(document).ready(function () {
    var selectedDay = "#selected_day";
    $(function () {
        $("#datepicker").datepicker({
            dateFormat: "DD, d M yy",
            altField: selectedDay,
            altFormat: "DD",
            onSelect:function(){
                $(selectedDay).change()
            }
        });
        $(selectedDay).change(function () {
            if($(selectedDay).val() == 'Friday' || $(selectedDay).val() == 'Saturday'){
                $('#times').find('option[value="6pm"], option[value="8pm"], option[value="10pm"], option[value="11pm"]').remove();
            }
        });
    });
}); 
```

jsfiddle - [http://jsfiddle.net/andyjh07/c3u5B/](http://jsfiddle.net/andyjh07/c3u5B/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:49:58.980

而不是删除，你可以`hide()`，比如：

```
$(selectedDay).change(function () {
   var day = $(this).val();
   if($(selectedDay).val() == 'Friday' || $(selectedDay).val() == 'Saturday'){
        $('#times').find('option[value="6pm"], option[value="8pm"], option[value="10pm"], option[value="11pm"]').hide();
   }
   else {
        $('#times').find('option[value="6pm"], option[value="8pm"], option[value="10pm"], option[value="11pm"]').show();
   }
}); 
```

更新[了演示小提琴](http://jsfiddle.net/c3u5B/19/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:57:25.750

您也可以使用禁用它们`.prop()`。这可能比用户看到的隐藏它们更友好一些，一些值被禁用并且没有丢失：

```
var value = false;
if ($(selectedDay).val() == 'Friday' || $(selectedDay).val() == 'Saturday') {
    value = true;
}

$('#times')
    .find('option[value="6pm"], option[value="8pm"], option[value="10pm"], option[value="11pm"]')
    .prop('disabled', value); 
```

**演示**

[先试后买](http://jsfiddle.net/R4K9Y/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:51:48.977

而不是从 DOM 中删除它们，只需使用`hide()`and `show()`：

```
$(document).ready(function () {
    var selectedDay = "#selected_day";
    $(function () {
        $("#datepicker").datepicker({
            dateFormat: "DD, d M yy",
            altField: selectedDay,
            altFormat: "DD",
            onSelect:function(){
                $(selectedDay).change()
            }
        });
        $(selectedDay).change(function () {
            var day = $(this).val();
            if($(selectedDay).val() == 'Friday' || $(selectedDay).val() == 'Saturday') {
                $('#times').find('option[value="6pm"], option[value="8pm"], option[value="10pm"], option[value="11pm"]').hide();
            }
            else
            {
                $('#times option:not(:visible)').show();
            }
        });
    });
}); 
```

这是一个[更新的 jsFiddle](http://jsfiddle.net/c3u5B/21/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T10:59:12.790

这很好用...... [http://jsfiddle.net/andyjh07/c3u5B/](http://jsfiddle.net/andyjh07/c3u5B/)

```
$(document).ready(function () {
     var times = $('#times').clone();
      alert(times.html());
    var selectedDay = "#selected_day";
    $(function () {
        $("#datepicker").datepicker({
            dateFormat: "DD, d M yy",
            altField: selectedDay,
            altFormat: "DD",
            onSelect:function(){
                $(selectedDay).change()
            }
        });
        $(selectedDay).change(function () {
            var day = $(this).val();

            if($(selectedDay).val() == 'Friday' || $(selectedDay).val() == 'Saturday'){
                $('#times').find('option[value="6pm"], option[value="8pm"], option[value="10pm"], option[value="11pm"]').remove();
            }
            else{
            $("#times").html(times.html());
            }
        });
    });
}); 
```

# java - 无法在 Glassfish 上部署 JAX-WS Web 服务

> ID：15809003
> 
> 赞同：2
> 
> 时间：2013-04-04T10:46:29.237
> 
> 标签：java, web-services, jax-ws, glassfish-3, myeclipse

我在使用 Glassfish 应用程序服务器运行 JAX_WS Webservices 时遇到问题。以前，我曾经使用 Apache tomcat，它可以很好地工作。但是现在，有了 Glassfish，这个问题正在阻止应用程序的部署......请在下面检查：

```
2013-04-04T13:09:23.028+0300 com.sun.xml.ws.wspolicy.com.sun.xml.ws.api.policy.ModelTranslator
SEVERE: [failed to localize] WSP_0071_ERROR_MULTIPLE_ASSERTION_CREATORS_FOR_NAMESPACE(http://schemas.xmlsoap.org/ws/2004/08/addressing, com.sun.xml.ws.security.addressing.impl.policy.AddressingPolicyAssertionCreator, com.sun.xml.ws.addressing.impl.policy.AddressingPolicyAssertionCreator)
2013-04-04T13:09:23.028+0300 com.sun.xml.ws.wspolicy.jaxws.PolicyWSDLParserExtension
SEVERE: [failed to localize] WSP_0071_ERROR_MULTIPLE_ASSERTION_CREATORS_FOR_NAMESPACE(http://schemas.xmlsoap.org/ws/2004/08/addressing, com.sun.xml.ws.security.addressing.impl.policy.AddressingPolicyAssertionCreator, com.sun.xml.ws.addressing.impl.policy.AddressingPolicyAssertionCreator)
2013-04-04T13:09:23.028+0300 com.sun.xml.ws.wspolicy.jaxws.PolicyWSDLParserExtension
SEVERE: WSP1007: Policy exception occurred when finishing WSDL parsing.
com.sun.xml.ws.policy.PolicyException: [failed to localize] WSP_0071_ERROR_MULTIPLE_ASSERTION_CREATORS_FOR_NAMESPACE(http://schemas.xmlsoap.org/ws/2004/08/addressing, com.sun.xml.ws.security.addressing.impl.policy.AddressingPolicyAssertionCreator, com.sun.xml.ws.addressing.impl.policy.AddressingPolicyAssertionCreator)
    at com.sun.xml.ws.policy.sourcemodel.PolicyModelTranslator.<init>(PolicyModelTranslator.java:188)
    at com.sun.xml.ws.api.policy.ModelTranslator.<init>(ModelTranslator.java:85)
    at com.sun.xml.ws.api.policy.ModelTranslator.<clinit>(ModelTranslator.java:74)
    at com.sun.xml.ws.policy.jaxws.BuilderHandler.getPolicies(BuilderHandler.java:102)
    at com.sun.xml.ws.policy.jaxws.BuilderHandler.getPolicySubjects(BuilderHandler.java:110)
    at com.sun.xml.ws.policy.jaxws.BuilderHandlerEndpointScope.doPopulate(BuilderHandlerEndpointScope.java:72)
    at com.sun.xml.ws.policy.jaxws.BuilderHandler.populate(BuilderHandler.java:82)
    at com.sun.xml.ws.policy.jaxws.PolicyMapBuilder.getNewPolicyMap(PolicyMapBuilder.java:109)
    at com.sun.xml.ws.policy.jaxws.PolicyMapBuilder.getPolicyMap(PolicyMapBuilder.java:91)
    at com.sun.xml.ws.policy.jaxws.PolicyWSDLParserExtension.postFinished(PolicyWSDLParserExtension.java:960)
    at com.sun.xml.ws.wsdl.parser.DelegatingParserExtension.postFinished(DelegatingParserExtension.java:191)
    at com.sun.xml.ws.wsdl.parser.WSDLParserExtensionFacade.postFinished(WSDLParserExtensionFacade.java:338)
    at com.sun.xml.ws.wsdl.parser.RuntimeWSDLParser.parse(RuntimeWSDLParser.java:234)
    at com.sun.xml.ws.wsdl.parser.RuntimeWSDLParser.parse(RuntimeWSDLParser.java:191)
    at com.sun.xml.ws.wsdl.parser.RuntimeWSDLParser.parse(RuntimeWSDLParser.java:160)
    at com.sun.xml.ws.client.WSServiceDelegate.parseWSDL(WSServiceDelegate.java:307)
    at com.sun.xml.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java:269)
    at com.sun.xml.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java:205)
    at com.sun.xml.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java:195)
    at com.sun.xml.ws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:112)
    at javax.xml.ws.Service.<init>(Service.java:92)
    at com.sun.xml.ws.tx.webservice.member.at.WSATCoordinator.<init>(WSATCoordinator.java:73)
    at com.sun.xml.ws.tx.at.ATCoordinator.<clinit>(ATCoordinator.java:1063)
    at sun.misc.Unsafe.ensureClassInitialized(Native Method)
    at sun.reflect.UnsafeFieldAccessorFactory.newFieldAccessor(UnsafeFieldAccessorFactory.java:25)
    at sun.reflect.ReflectionFactory.newFieldAccessor(ReflectionFactory.java:122)
    at java.lang.reflect.Field.acquireFieldAccessor(Field.java:918)
    at java.lang.reflect.Field.getFieldAccessor(Field.java:899)
    at java.lang.reflect.Field.get(Field.java:358)
    at org.glassfish.web.loader.WebappClassLoader.clearReferences(WebappClassLoader.java:1798)
    at org.glassfish.web.loader.WebappClassLoader.stop(WebappClassLoader.java:1662)
    at org.glassfish.web.loader.WebappClassLoader.preDestroy(WebappClassLoader.java:1631)
    at org.glassfish.deployment.common.DeploymentContextImpl.getClassLoader(DeploymentContextImpl.java:236)
    at org.glassfish.deployment.common.DeploymentContextImpl.getClassLoader(DeploymentContextImpl.java:186)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:450)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:353)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at org.glassfish.deployment.autodeploy.AutoOperation.run(AutoOperation.java:145)
    at org.glassfish.deployment.autodeploy.AutoDeployer.deploy(AutoDeployer.java:575)
    at org.glassfish.deployment.autodeploy.AutoDeployer.deployAll(AutoDeployer.java:461)
    at org.glassfish.deployment.autodeploy.AutoDeployer.run(AutoDeployer.java:389)
    at org.glassfish.deployment.autodeploy.AutoDeployer.run(AutoDeployer.java:380)
    at org.glassfish.deployment.autodeploy.AutoDeployService$1.run(AutoDeployService.java:220)
    at java.util.TimerThread.mainLoop(Timer.java:512)
    at java.util.TimerThread.run(Timer.java:462) 
```

有人知道如何解决这个错误吗？请注意，我使用 MyEclipse 作为 Glassfish 版本 3.1.2 的 IDE

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T06:58:36.167

我已经看到对类似问题的引用，其中安装 Glassfish Web 配置文件而不是完整安装解决了该问题。如果您需要完整安装，这显然无济于事。

尝试导出一个 war 文件并手动部署它，以防 MyEclipse 部署应用程序的方式出现问题。

一些服务器将包含一些常见的 jar 文件，而另一些则不包含。因此，您可以尝试通过 MyEclipse->Web 下项目属性中的 Deployment 标记调整哪些引用的 jar 被部署。

我还看到了通过删除对 webservice-rt 的依赖来部分解决的问题的参考。我不知道这是否适用于您的项目，但是，如果是这样，您可以查看是否可以删除该依赖项。

# azure-devops - 从 Team Explorer Everywhere CLC 连接到 visualstudio.com

> ID：15809007
> 
> 赞同：6
> 
> 时间：2013-04-04T10:46:36.090
> 
> 标签：azure-devops, team-explorer-everywhere

我正在尝试从 Windows 上的 Team Explorer Everywhere 命令行客户端连接到位于 visualstudio.com 的 Team Foundation Service 项目，但我收到“拒绝访问”消息。

我传递的用户名和密码绝对正确，并且是我用于创建帐户的 microsoft live ID 中的电子邮件和密码。我通过网站或通过另一台机器上的 Visual Studio 2012 访问服务没有问题。

```
tf workspace /new /server:https://<something>.visualstudio.com/defaultcollection
Username: example@microsoft.com
Password: ******** 
```

有任何想法吗？我的一个想法是，电子邮件中的“@”字符可能导致用户名被解释为 Windows 域，或者可能没有正确使用 SSL？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T12:30:49.350

您无法使用 Team Explorer Everywhere 命令行客户端使用 Live ID 进行身份验证。我们无法从客户端启动 Web 浏览器并跨平台以安全的方式捕获 Live ID 身份验证令牌。

[相反，您需要按照https://tfs.visualstudio.com/en-us/home/news/2012/aug-27/](https://tfs.visualstudio.com/en-us/home/news/2012/aug-27/)中的说明设置备用凭据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-24T17:11:19.117

如果有人在 2014 年 3 月 18 日之后收到此错误，这是因为 visualstudio.com 的密码要求已收紧。

如果您突然收到此消息“无法擦除凭据：未找到致命元素：'https://*.visualstudio.com/defaultcollection/_git/*/'的身份验证失败”

我能够通过删除我的备用凭据并重新创建它们来解决它（此时我还发现我的旧密码不再可用）。

# asp.net - 如何使用删除按钮获取所选行索引和所选行的单元格值

> ID：15809017
> 
> 赞同：1
> 
> 时间：2013-04-04T10:47:04.293
> 
> 标签：asp.net, linq

我在gridview中使用了模板字段删除按钮，因此当我单击gridview中的任何删除按钮以删除一行时，它将为删除行索引提供所选行的`cells[0]`值。我怎么能做任何人有一个想法......？

```
protected void GridView3_RowCommand(object sender, GridViewCommandEventArgs e)
{
        int index = Convert.ToInt32(e.CommandArgument);
        int grdid = Int32.Parse(GridView3.Rows[index].Cells[0].Text);

        IndiesProductDataContext ip = new IndiesProductDataContext();
        ip.iLinks.DeleteAllOnSubmit(ip.iLinks.Where(c => c.ProductID == grdid));
        ip.SubmitChanges();
} 
```

我在gridview中使用行命令删除行获取索引，但它不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T11:14:05.423

您可以设置按钮的 CommandArgument 属性

在 Aspx 中：

```
<asp:Button ID="btnDeleteContact" CommandName="DeleteContact" 
CommandArgument="<%# Eval("ContactID") %>" runat="server" >Delete</asp:Button> 
```

在 GridView 的 _RowCommand 事件中：

```
If e.CommandName = "DeleteContact" Then
    Dim  objContacts As New CContacts

    objContacts.ContactID = e.CommandArgument
    objContacts.DomainID = Session("DomainID")
    Dim strError As String = objContacts.DelContact()

End If 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T04:33:47.160

我找到了这个问题的完美解决方案......

```
 protected void GridView3_RowCommand(object sender, GridViewCommandEventArgs e)
    {

        GridViewRow gvr = (GridViewRow)(((Button)e.CommandSource).NamingContainer);
        int RowIndex = gvr.RowIndex;
        int ci = Int32.Parse(GridView3.Rows[RowIndex].Cells[1].Text);

        ProductDataContext ip = new ProductDataContext();
        ip.iLinks.DeleteAllOnSubmit(ip.iLinks.Where(c => c.PID == ci));
        ip.SubmitChanges();

    } 
```

此代码在我的模块中正常工作...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T11:03:25.607

您不能这样做，但您必须使用按钮单击事件来选择 ID，然后使用该 ID 作为第二个不同的删除查询的参数。

# java - UDP 数组列表 Check IfClientExists I've made a simple UDP chat server and client Client sends a packet containing a string, server receives it. Upon receipt, the server should be able to tell if the IP AND Port number 问问题 问问题 2013-04-04T10:47:16.380 226 次 This question shows research effort; it is useful and clear 3 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I've made a simple UDP chat server and client Client sends a packet containing a string, server receives it. Upon receipt, the server should be able to tell if the IP AND Port number are in a list of Clients. I made an object class called ClientDetails, class ClientDetails { int port; String name; InetAddress address; ClientDetails(InetAddress address, int port, String name) { this.address = address; this.port = port; this.name = name; } and in the Server I create an ArrayList of that object to hold the details of active clients. I have constructed some If statements and corresponding methods to perform most of the operations, but the crux is finding out whether the user is in the list or not on every packet received. I want to use something like if (!IsCurrentlyAUser){ then addNewUserToList(); else checkUserNameValid//ensures the String sent is not one of the keywords(who, whoami, etc) addNewUser();} The idea is that IsCurrentlyAUser checks a method CheckClientExists, private boolean checkClientExists(InetAddress ip, int port, String name){ if (!clientList.contains(ip) && !clientList.contains(port)){ return false; } return true; } Clearly this won't work, but I don't know how to make it or come up with something more viable. EDIT: To clarify the problem and possibly complicate things: The check is based on a clients IP AND Port. In that instance, only the ip and port are checked among the records. If they exist, the client continues, if they don't, they get added, wherein the name entered will be checked. EDIT: Updated ClientDetails with the following @Override public int hashCode() { final int prime = 31; int result = 1; result = prime * result + ((address == null) ? 0 : address.hashCode()); result = prime * result + ((name == null) ? 0 : name.hashCode()); result = prime * result + port; return result; } @Override public boolean equals(Object obj) { if (this == obj) return true; if (obj == null) return false; if (getClass() != obj.getClass()) return false; ClientDetails other = (ClientDetails) obj; if (address == null) { if (other.address != null) return false; } else if (!address.equals(other.address)) return false; if (name == null) { if (other.name != null) return false; } else if (!name.equals(other.name)) return false; if (port != other.port) return false; return true; } Running the following in the Main Server if(request.equals("who") ||request.equals("whoami")|| request.equals("all")||request.equals("bye")){ //do something System.out.println("User Entered Invalid Name "); }else{ System.out.println("User Entered a Valid Name "); clientName =request; clients.add(new ClientDetails(clientIP,clientPort,clientName)); } System.out.println("set contains " +clients.toString()); seems to not prevent duplicates, which suggests that the hash/equals is wrong. This was generated by eclipse, which is the best I could do. You could improve your class ClientDetails, by implementing method hashCode and equals. Then you will be able to store those data in single Set. class Clients { private final Set<ClientDetails> clients = new HashSet<>(); public boolean checkClientExists(InetAddress ip, int port, String name){ return clients.contains(new ClientDetails(ip,port,name)); } //More code for client management. } As your class is simple structure holder you can create a object of it only to check that such element was already created. But note you should try to wrap all those (ip,port,name) in a structure as soon as possible, and use them in your application. java 4 1 回答 1 This answer is useful 0 ClientDetails您可以通过实现方法hashCode 和 equals来改进您的课程。 然后，您将能够将这些数据存储在单个Set中。 class Clients { private final Set<ClientDetails> clients = new HashSet<>(); public boolean checkClientExists(InetAddress ip, int port, String name){ return clients.contains(new ClientDetails(ip,port,name)); } //More code for client management. } 由于您的类是简单的结构持有者，您可以创建它的一个对象，只是为了检查是否已经创建了这样的元素。但请注意，您应该尽快尝试将所有这些（ip、端口、名称）包装在一个结构中，并在您的应用程序中使用它们。 于 2013-04-04T10:58:42.790 回答 Related 3 jquery - $each only for specific array in json 2 c# - 使 JsonConvert.DeserializeObject 全局（静态） 1 asp.net - PL/SQL：有条件的 Where 1 c++ - 使用 Qt 库的简单游戏图形 2 inheritance - Symfony2 原则声明实体以保持与单独的数据库表的继承 1 angularjs - 简单数据绑定不插入值 3 entity-framework - 错误实体框架数据库已更改 1 version-control - 我在错误的仓库中工作。它们几乎是相同但不相关的数据。我如何区分/合并？ 1 ruby-on-rails - 如何在 Sinatra 和 Datamapper 中按浏览器呈现视图计数？ 4 wcf - 标记为不可导出的证书 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15809024
> 
> 赞同：3
> 
> 时间：
> 
> 标签：java

I've made a simple UDP chat server and client

Client sends a packet containing a string, server receives it.

Upon receipt, the server should be able to tell if the IP AND Port number are in a list of Clients.

I made an object class called ClientDetails,

```
class ClientDetails {
   int port; 
   String name;
   InetAddress address;

    ClientDetails(InetAddress address, int port, String name) {
        this.address = address;
        this.port = port;
        this.name = name;
    } 
```

and in the Server I create an ArrayList of that object to hold the details of active clients.

I have constructed some If statements and corresponding methods to perform most of the operations, but the crux is finding out whether the user is in the list or not on every packet received.

I want to use something like

```
if (!IsCurrentlyAUser){
then addNewUserToList();
else checkUserNameValid//ensures the String sent is not one of the keywords(who, whoami, etc)
 addNewUser();} 
```

The idea is that IsCurrentlyAUser checks a method CheckClientExists,

```
private boolean checkClientExists(InetAddress ip, int port, String name){

    if (!clientList.contains(ip) && !clientList.contains(port)){
    return false;
}
     return true;

    } 
```

Clearly this won't work, but I don't know how to make it or come up with something more viable.

EDIT: To clarify the problem and possibly complicate things:

The check is based on a clients IP AND Port. In that instance, only the ip and port are checked among the records. If they exist, the client continues, if they don't, they get added, wherein the name entered will be checked.

EDIT:

Updated ClientDetails with the following

```
@Override
public int hashCode() {
final int prime = 31;
int result = 1;
result = prime * result + ((address == null) ? 0 : address.hashCode());
result = prime * result + ((name == null) ? 0 : name.hashCode());
result = prime * result + port;
return result;
}

@Override
public boolean equals(Object obj) {
if (this == obj)
    return true;
if (obj == null)
    return false;
if (getClass() != obj.getClass())
    return false;
ClientDetails other = (ClientDetails) obj;
if (address == null) {
    if (other.address != null)
        return false;
} else if (!address.equals(other.address))
    return false;
if (name == null) {
    if (other.name != null)
        return false;
} else if (!name.equals(other.name))
    return false;
if (port != other.port)
    return false;
return true;

} 
```

Running the following in the Main Server

```
 if(request.equals("who") ||request.equals("whoami")||
        request.equals("all")||request.equals("bye")){
         //do something 
          System.out.println("User Entered Invalid Name ");
         }else{
              System.out.println("User Entered a Valid Name ");
               clientName =request;
              clients.add(new ClientDetails(clientIP,clientPort,clientName));
                    }
             System.out.println("set contains " +clients.toString()); 
```

seems to not prevent duplicates, which suggests that the hash/equals is wrong. This was generated by eclipse, which is the best I could do.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:58:42.790

`ClientDetails`您可以通过实现方法[hashCode 和 equals](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)来改进您的课程。

然后，您将能够将这些数据存储在单个[Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)中。

```
class Clients {

 private final Set<ClientDetails> clients = new HashSet<>();

 public boolean checkClientExists(InetAddress ip, int port, String name){

   return  clients.contains(new ClientDetails(ip,port,name));   

 }

//More code for client management.
} 
```

由于您的类是简单的结构持有者，您可以创建它的一个对象，只是为了检查是否已经创建了这样的元素。但请注意，您应该尽快尝试将所有这些（ip、端口、名称）包装在一个结构中，并在您的应用程序中使用它们。

# ios - Restkit 请求动态映射

> ID：15809032
> 
> 赞同：0
> 
> 时间：2013-04-04T10:47:40.547
> 
> 标签：ios, xcode, http, post, restkit

我正在使用 RestKit 将对象发布到服务器。在我的对象中，我有两个属性：`name`和`socialId`.

我只想将具有数据的属性发送到服务器。

如果`name != nil`发送：

```
{
   "name" : "name",
} 
```

如果`socialId != 0`发送：

```
{
   "socialId" : socialId,
} 
```

但是 RestKit 发送所有数据。例如：

```
{
   "name" : "",
   "socialId" : 0,
} 
```

我怎样才能改变这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T07:52:41.737

答案是使用 [RKDynamicMapping setObjectMappingForRepresentationBlock:]

您应该检查块中的表示属性并添加所需属性的属性映射。

# android - way to know if the user has chosen the intent action from chooser or not

> ID：15809036
> 
> 赞同：1
> 
> 时间：2013-04-04T10:47:49.197
> 
> 标签：android, android-intent, android-activity

Is there a way to know if the user has chosen the intent action from the chooser or not.

I want to do this - If its chosen by user then finish the current activity else remain in the current activity.

I have this code:

```
startActivity(Intent.createChooser(email, "Choose an Email client :"));
finish(); 
```

But this always finishes the current activity irrespective of user chose the email client or not.

Any ideas?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:57:10.687

你可以通过展示你自己的自定义选择器来做到这一点

首先获取所有可以处理您的意图的包

```
private List<String> getInstalledComponentList(Intent emailIntent)
            throws NameNotFoundException {

        List<ResolveInfo> ril = getPackageManager().queryIntentActivities(emailIntent, 0);
        List<String> componentList = new ArrayList<String>();
        String name = null;

        for (ResolveInfo ri : ril) {
            if (ri.activityInfo != null) {
                Resources res = getPackageManager().getResourcesForApplication(ri.activityInfo.applicationInfo);
                if (ri.activityInfo.labelRes != 0) {
                    name = res.getString(ri.activityInfo.labelRes);
                } else {
                    name = ri.activityInfo.applicationInfo.loadLabel(
                            getPackageManager()).toString();
                }
                componentList.add(name);
            }
        }
        return componentList;
    } 
```

然后显示一个包含所有这些包列表的对话框，[如下所示](http://developer.android.com/guide/topics/ui/dialogs.html#AddingAList)

然后处理点击事件并启动选中的包

# java - Migrate java web application to AWS - log4j logging implications

> ID：15809038
> 
> 赞同：1
> 
> 时间：2013-04-04T10:47:56.923
> 
> 标签：java, logging, amazon-web-services, log4j

I have an existing web application which uses log4j for logging purposes and it will create a log file in my local system. Now, I have to migrate that web application to AWS platform. In order to move it to AWS, what changes need to done in terms of logging? How should be the log4j.properties file? Is there any need to change the application code?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:08:38.017

您的申请无需更改；log4j 仍然可以工作。

您不想用日志填满文件系统，但也希望保留适当数量的日志记录，以防遇到需要调试的问题。Log4j 将处理它自己的**[日志轮换](http://chrisjordan.ca/post/15052399233/rotating-log-files-in-log4j)**。您需要确保您的`log4j.properties`文件设置为将日志保留一定时间长度。

确保您的日志目录存在于新服务器上和/或使用正确的权限创建它。或更改`log4j.properties`文件。

```
log4j.appender.R.File=/some/dir/logs/your_app.log 
```

# java - 流式传输视频并在其上绘制多边形 Java

> ID：15809042
> 
> 赞同：1
> 
> 时间：2013-04-04T10:48:05.353
> 
> 标签：java, video, graphics, streaming, drawing

我需要最好通过 java applet 形式从 IP cam 流式传输视频，然后在其上绘制一个矩形并获取四个坐标。我可以通过小程序流式传输视频，也可以单独绘制多边形。我想要做的是我需要在视频流式传输时绘制多边形并且多边形应该是半透明的。

这是我用来绘制多边形的代码。

封装 IntelligentCameraApp；

```
import java.awt.*;
import java.awt.event.*;
import java.applet.*;

public class SimplePolygons extends Applet implements MouseListener {

   /* Variables for implementing polygon input. */

   private int[] xCoord, yCoord;  // Arrays containing the points of 
                                  //   the polygon.  Up to 500 points 
                                  //   are allowed.

   private int pointCt;  // The number of points that have been input.

   private final static int polygonColor = Color.TRANSLUCENT;  
                        // Color that is used to draw the polygons.  

   public void init() {
         // Initialize the applet.  The applet listens for mouse events.
         // Arrays are created to hold the points.
      setBackground(Color.white);
      addMouseListener(this);
      xCoord = new int[500];
      yCoord = new int[500];
      pointCt = 0;
   }

   public void paint(Graphics g) {

         // The paint() routine does nothing but draw a 1-pixel black 
         // border around the applet.  Polygons drawn on the applet
         // are not permanent.

      g.setColor(Color.black);
      g.drawRect(0, 0, getSize().width - 1, getSize().height - 1);

   }  // end paint()

   private void putLine(int x1, int y1, int x2, int y2) {
          // Draw a line from (x1,y1) to (x2,y2) directly onto the
          // applet, without going through the paint() method.
       Graphics g = getGraphics();
       g.drawLine(x1,y1,x2,y2);
       g.dispose();
   }

   private void putPolygon() {
          // Draw the polygon described by the arrays xCoord and yCoord
          // and the integer pointCt.  A filled polygon with a black 
          // outline is drawn.  If pointCt is 0 or 1, nothing is drawn.
          // If pointCt is 2, only a black line is drawn.
       if (pointCt < 2)
          return;
       Graphics g = getGraphics();
       if (pointCt == 2) {
          g.drawLine(xCoord[0], yCoord[0], xCoord[1], yCoord[1]);
       }
       else {
          //g.setColor(Color.red);
          g.fillPolygon(xCoord, yCoord, pointCt);

          g.drawPolygon(xCoord, yCoord, pointCt);
       }
       g.dispose();
   }

   public void mousePressed(MouseEvent evt) { 
         // Process a user mouse-click.

      if (evt.isShiftDown()) {
             // Clear the applet. (This only requires a repaint.)
             // Also, set pointCt to zero to start a new polygon.
          pointCt = 0;
          repaint();
      }
      else if ( pointCt > 0 && (Math.abs(xCoord[0] - evt.getX()) <= 2)
                          && (Math.abs(yCoord[0] - evt.getY()) <= 2) ) {
             // User has clicked near the starting point.
             // Draw the polygon and reset pointCt so that the 
             // user can start a new polygon.
         putPolygon();
         pointCt = 0;
      }
      else if (evt.isMetaDown() || pointCt == 500) {
             // Draw the polygon and reset pointCt so that the 
             // user can start a new polygon.
         putPolygon();
         pointCt = 0;
      }
      else {
             // Add the point where the user clicked to the list of
             // points in the polygon, and draw a line between the
             // previous point and the current point.
         xCoord[pointCt] = evt.getX();
         yCoord[pointCt] = evt.getY();
         pointCt++;
         if (pointCt >= 2) {
            putLine(xCoord[pointCt-2], yCoord[pointCt-2], 
                         xCoord[pointCt-1], yCoord[pointCt-1]); 
         }
      }

   } // end mousePressed()

   public void mouseReleased(MouseEvent evt) { }
   public void mouseClicked(MouseEvent evt) { }
   public void mouseEntered(MouseEvent evt) { }
   public void mouseExited(MouseEvent evt) { }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:52:20.170

哦，男孩......当我将油漆与逻辑混合时，我遇到了很多问题......我的老板/客户必须明确要求在油漆方法中做逻辑。

我想建议至少一个[LayeredPanel](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html)。并在第 1 层使用 IP 摄像头做一些事情，并在第 2 层做任何你想要的矩形。

# ruby-on-rails-3 - Rails/Active Admin/Formtastic - Dropdown cleared on fail validation?

> ID：15809045
> 
> 赞同：1
> 
> 时间：2013-04-04T10:48:12.337
> 
> 标签：ruby-on-rails-3, activeadmin, formtastic

When I select a option from a dropdown on the new/edit view and submit the form to the create/update action, if another field within the same form fails the validation process when the view is returned the option selected from the dropdown has been emptied, this isn't a big problem in the new view but definitely in the edit view.

This is the code for the dropdown to be populated using formtastic collection method:

```
f.input :ethnic_category, :label => "Ethnic Origin", :collection => Hash[EthnicCat.all.map{|b| [b.ethnic_cat_name, b.id]}] 
```

Any help would be greatly appreciated, Thanks....

# c# - wpf datagrid Ienumerable返回null

> ID：15809046
> 
> 赞同：1
> 
> 时间：2013-04-04T10:48:15.940
> 
> 标签：c#, wpf, datagrid, ienumerable

使用 C#.NET4.5、MS Visual Studio 2012、WPF。

大家好，这里有一些代码给我null。此代码是我尝试过的先前解决方案。我没有收到任何错误，但自从今天我发现我调试那里的行为空以来从未对其进行过测试。

继承人的代码：

第一次我把我从 SQL 收集的数据扔到一个数据表中，然后把它扔到我的数据网格中......

```
 private void LoadPareto(string pg)
 {
     DataTable tbl = new DataTable();
     tbl = mysqlq.SQL_GetPareto(pg);
     paretogrid.ItemsSource = tbl.AsDataView();
     // InsertColumns();
     ShowArrows();
 } 
```

第二次在 XAML 中设置绑定...

```
<DataGrid Name ="paretogrid" ItemsSource="{Binding}" 
```

第三，我创建了一个 Ienumerable ......

```
public IEnumerable<System.Windows.Controls.DataGridRow> GetDataGridRow(System.Windows.Controls.DataGrid grid)
{
    var itemsource = grid.ItemsSource as System.Collections.IEnumerable;
    if (null == itemsource) yield return null;
    foreach (var item in itemsource)
    {
        var row = grid.ItemContainerGenerator.ContainerFromItem(item) as DataGridRow; // null?
        if (null != row) yield return row;
    }
} 
```

然后我用这个方法调用它......

```
private void ShowArrows()
{
    var rows = GetDataGridRow(paretogrid); // fetching null?

    foreach (DataGridRow r in rows)
    {
        DataRowView rv = (DataRowView)r.Item;
        foreach (DataGridColumn column in paretogrid.Columns)
        {
            if (column.GetCellContent(r) is TextBlock)
            {
                TextBlock cellcontent = column.GetCellContent(r) as TextBlock;
                MessageBox.Show(cellcontent.Text);
            }
        }
    }
} 
```

现在我遇到的问题是在 Ienumerbale 中，我看到我的项目源包含 12007 条记录，这是完美的。然而，当我走过时，我发现...

```
var row = grid.ItemContainerGenerator.ContainerFromItem(item) as DataGridRow; 
```

返回 null ，我的“if”语句发现它为假，因此跳过了产量。所以当然，当我在“showarrows”方法中逐步执行foreach循环时，它不会打扰，因为有空值。

那么我哪里错了？我错过了什么吗？

在此先感谢伙计们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:41:37.303

`DataGrid`获取行时，您尚未更新。解决方案是`paretogrid.UpdateLayout()`在您设置`ItemsSource`.

请注意，混合数据和 UI 代码并不是很好。您尝试做的事情可能已经在 XAML 中完成，并且您不会遇到这个问题。

# sql - TSQL根据数据类型更新每个列名的stmt

> ID：15809050
> 
> 赞同：2
> 
> 时间：2013-04-04T10:48:26.723
> 
> 标签：sql, sql-server, tsql, ssis

对于 SSIS，我需要创建一个 TSQL 更新工作流来覆盖当前表记录，以防出现导入错误。

我已经为整个 SSIS 进程设置了一个，但我缺少 SQL 更新语句。

因此，如果在导入过程中出现问题，表中的当前记录（所有行）应该用一条短消息更新 - 例如“错误数据库导入”。

因为我有多个表要处理，所以我也会得到**不同的列名和数据类型**。
我会使用这个 stmt 来获取列名

```
SELECT COLUMN_NAME , * 
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME = 'myTable' 
```

但是如何为字符类型设置字符串消息，为数字和日期类型设置 NULL。使用 CASE stmt？

在伪代码中，它可能只是通过列的循环：如果 column_name 是 data_type "char" 那么......

我还需要**忽略每个表的前 4 列，**以免覆盖 ID、日期等。

如果您可以帮助我设置静态测试更新 stmt，我相信我可以将其转移到我的 SSIS 项目中。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:52:52.240

听起来你正在寻找这样的东西：

```
SELECT
  CASE DATA_TYPE
    WHEN 'int' THEN NULL
    WHEN 'varchar' THEN 'STRING MSG GOES HERE'
  END,
COLUMN_NAME , * 
FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME = 'myTable'
  AND ORDINAL_POSITION > 4 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/5a44d/4)

您可以根据需要`WHEN`向语句中添加任意数量的子句`CASE`。此外，您想使用该`ORDINAL_POSITION`列来排除前 4 列。

如果您需要使用此信息来创建`UPDATE`语句，那么您需要使用动态 SQL 来执行此操作。

*编辑——动态 SQL：*

```
create procedure updateMyTable
as 
begin
  declare @sql varchar(max)

  SELECT @sql = 'UPDATE myTable SET ' + 
  STUFF(
    (SELECT ', ' + COLUMN_NAME + ' = ' +
    CASE DATA_TYPE
      WHEN 'int' THEN 'NULL'
      WHEN 'varchar' THEN '''STRING MSG GOES HERE'''
    END 

   FROM INFORMATION_SCHEMA.COLUMNS
  WHERE TABLE_NAME = 'myTable'
   for xml path(''))
   ,1,1,'')

  exec(@sql)
end 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!3/568b5/1)

# c# - Delete link button work after page refresh in gridview

> ID：15809051
> 
> 赞同：0
> 
> 时间：2013-04-04T10:48:27.333
> 
> 标签：c#, asp.net, updatepanel

Here is my code for grid row delete using link button but after click its deleted data after page refresh I want delete data on the page without refresh the page i also put update panel in my grid here is my code

```
protected void gvContent_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if(e.CommandName=="modify")
    {
        GridViewRow row = 
            (GridViewRow)(((LinkButton)e.CommandSource).NamingContainer);

        // this find the index of row:
        int RowIndex = row.RowIndex; 

        //this store the  value in varName1:
        int id = Convert.ToInt32(
                   ((Label)row.FindControl("lblContentId")).Text.ToString()); 

        Response.Redirect("ContentManage.aspx?ContentId=" +Convert.ToInt32(id));
    }
    if (e.CommandName == "delete")
    {
        GridViewRow row = (GridViewRow)
                           (((LinkButton)e.CommandSource).NamingContainer);

        // this finds the index of row:
        int RowIndex = row.RowIndex; 

        //this stores the  value in varName1:
        int id = Convert.ToInt32(
                   ((Label)row.FindControl("lblContentId")).Text.ToString()); 

        Content_Data.DeleteContentDetails(id);
        BindGrid();
        UpdatePanel1.Update();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:06:03.673

您需要使用以下方法将 gvContent 注册为异步回发控件

```
 void Page_Load()
    {
        if (!IsPostBack)
        {
            ScriptManager1.RegisterAsyncPostBackControl(gvContent);
        }

    } 
```

这将导致您的 Grid 执行异步回发。

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T08:02:53.027

尝试添加一个空的 RowDeleting 事件

```
 protected void gvContent_RowDeleting(object sender, GridViewDeleteEventArgs e)
 {

 } 
```

# c# - 上传时如何处理“System.OutOfMemoryException”？

> ID：15809059
> 
> 赞同：1
> 
> 时间：2013-04-04T10:48:46.373
> 
> 标签：c#, asp.net

我在加密后将文档上传到本地驱动器中，并且我在 web.config 中有最大上传限制为

```
 <httpRuntime maxRequestLength="2147483647" executionTimeout="1000"/> 
```

当文档大小大于 20mb 时显示以下异常

```
 Source Error: 
 An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception 

 Stack Trace: 
 [OutOfMemoryException: Exception of type 'System.OutOfMemoryException' was thrown.]
 System.IO.MemoryStream.set_Capacity(Int32 value) +93
 System.IO.MemoryStream.EnsureCapacity(Int32 value) +50
 System.IO.MemoryStream.WriteByte(Byte value) +130
 System.IO.BinaryWriter.Write(Byte value) +20
 System.Web.UI.SerializerBinaryWriter.WriteEncoded(Int32 value) +62
 System.Web.UI.ObjectStateFormatter.SerializeValue(SerializerBinaryWriter writer, Object value) +2081

 [ArgumentException: Error serializing value '644314' of type 'System.Int32.']
 System.Web.UI.ObjectStateFormatter.SerializeValue(SerializerBinaryWriter writer, Object value) +3371
 System.Web.UI.ObjectStateFormatter.Serialize(Stream outputStream, Object stateGraph) +141
 System.Web.UI.ObjectStateFormatter.Serialize(Object stateGraph) +57
 System.Web.UI.ObjectStateFormatter.System.Web.UI.IStateFormatter.Serialize(Object state) +4
 System.Web.UI.Util.SerializeWithAssert(IStateFormatter formatter, Object stateGraph) +37
 System.Web.UI.HiddenFieldPageStatePersister.Save() +79
 System.Web.UI.Page.SavePageStateToPersistenceMedium(Object state) +108
 System.Web.UI.Page.SaveAllState() +315
 System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2839 
```

这个异常的原因是什么以及如何解决这个..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:04:24.570

您不应将文件存储在 ViewState 中。它会对性能产生非常糟糕的影响（因为它会为每个后续请求传输两次。

您需要将文件存储在临时文件夹中，然后将文件路径存储在 ViewState 中。请记住，您需要某种清理例程来删除（例如）一天前的文件。

# python - sh：语法错误：错误的 fd 编号

> ID：15809060
> 
> 赞同：10
> 
> 时间：2013-04-04T10:48:47.977
> 
> 标签：python

我需要一些帮助来运行此代码。我从（[http://easybioinfo.free.fr/?q=content/amber-trajectory-gromacs-xtc-conversion](http://easybioinfo.free.fr/?q=content/amber-trajectory-gromacs-xtc-conversion)）获取了这段代码。我正在尝试将琥珀轨迹转换为 gromacs 轨迹。

当我执行这段代码时，我得到了一些错误。我将错误粘贴到此代码下方：

```
 #!/usr/bin/python

#Workflow based on Trajectory Converter - v1.5 by: Justin Lemkul 
#completely reimplemented and improved by Peter Schmidtke & Jesus Seco

import sys,os,re,fnmatch

if len(sys.argv)>4 :
    f=sys.argv[1]
    if not os.path.exists(f):
        sys.exit(" ERROR : Something you provided does not exist. Breaking up.\n\nUSAGE : python trajconv_peter.py  amberCrd amberTop trajDir trajPattern outPutPrefix\n\n \
Example : python amber2xtc.py mdcrd.crd mdcrd.top md *.x.gz md_gromacs\n")
else :
    sys.exit(" \n  USAGE : python amber2xtc.py AMBERCRD AMBERTOP TRAJDIR TRAJPATTERN OUTPUTPREFIX\n\
    Example : python amber2xtc.py mdcrd.crd mdcrd.top md *.x.gz md_gromacs\n\
    Note that the AmberCrd can also be a PDB file.\n")

crd=sys.argv[1]
top=sys.argv[2]
trajdir=sys.argv[3]
pattern=sys.argv[4]
outputPref=sys.argv[5]

traj_files=fnmatch.filter(os.listdir(trajdir),pattern) #get the fpocket output folders

RE_DIGIT = re.compile(r'(\d+)')     #set a pattern to find digits
ALPHANUM_KEY = lambda s: [int(g) if g.isdigit() else g for g in RE_DIGIT.split(s)]      #create on the fly function (lambda)    to return numbers in filename strings
traj_files.sort(key=ALPHANUM_KEY)      #sort by these numbers in filenames

print "Will convert the following files : "
print traj_files

csn=1
for file in traj_files :
    ptrajtmp=open("ptraj_tmp.ptr","w")
    print "currently converting "+file
    ptrajtmp.write("trajin "+trajdir+os.sep+file+"\n")
    ptrajtmp.write("reference "+crd+"\n")
    ptrajtmp.write("center ~:WAT,CIO mass origin\n")
    ptrajtmp.write("image origin center :* byres familiar\n")

    ptrajtmp.write("trajout pdb_tmp/mdcrd.pdb pdb")
    ptrajtmp.close()
    if not os.path.exists("pdb_tmp"):
        os.mkdir("pdb_tmp")

    os.system("ptraj "+top +" ptraj_tmp.ptr >/dev/null 2>&1")
    if not os.path.exists("xtc_tmp"):
        os.mkdir("xtc_tmp")
    #move to *.pdb
    os.system("cd pdb_tmp; ls *.pdb.* | cut -f3 -d\".\" | awk '{print \"mv mdcrd.pdb.\"$0\" mdcrd_\"$0\".pdb\" }' | sh ; cd ../")   
    pdb_files=fnmatch.filter(os.listdir("pdb_tmp"),"*.pdb")
    pdb_files.sort(key=ALPHANUM_KEY)      #sort by these numbers in filenames   
    if csn==1:
        os.system("editconf -f pdb_tmp/mdcrd_1.pdb -o "+outputPref+"_t1_top.gro >/dev/null 2>&1")

    for pdb in pdb_files:
        os.system("echo \"0\" | trjconv -s pdb_tmp/"+pdb+" -f pdb_tmp/"+pdb+" -o xtc_tmp/traj_"+str(csn)+".pdb.xtc -t0 "+str(csn)+" >/dev/null 2>&1")
        csn+=1
    if os.path.exists(outputPref+"_traj.xtc"):
        os.system("trjcat -f "+outputPref+"_traj.xtc xtc_tmp/*.pdb.xtc -o "+outputPref+"_traj.xtc >& trajcat.log")
    else :
        os.system("trjcat -f xtc_tmp/*.pdb.xtc -o "+outputPref+"_traj.xtc >& trajcat.log")
    os.system("rm -rf pdb_tmp/*.pdb")

    os.system("rm -rf xtc_tmp/*.xtc")

os.remove("ptraj_tmp.ptr")
os.system("rmdir pdb_tmp")
os.system("rmdir xtc_tmp") 
```

错误如下：

```
 vijay@glycosim:~/Simulation-Folder-Feb2013/chapter5-thermo-paper2-Vj/analysis-malto-/28-difusion-coeff-malto-thermo/convert-gromacs-format$ python2.7 amber2xtc.py malto-THERMO.crd malto-THERMO.top TRAJDIR malto*.traj md_gromacss
 Will convert the following files : 
 ['malto-thermo.set11.traj', 'malto-thermo.set12.traj', 'malto-thermo.set13.traj', 'malto-thermo.set14.traj', 'malto-thermo.set15.traj']
 currently converting malto-thermo.set11.traj
 ls: cannot access *.pdb.*: No such file or directory
 sh: Syntax error: Bad fd number
 currently converting malto-thermo.set12.traj
 ls: cannot access *.pdb.*: No such file or directory
 sh: Syntax error: Bad fd number
 currently converting malto-thermo.set13.traj
 ls: cannot access *.pdb.*: No such file or directory
 sh: Syntax error: Bad fd number
 currently converting malto-thermo.set14.traj
 ls: cannot access *.pdb.*: No such file or directory
 sh: Syntax error: Bad fd number
 currently converting malto-thermo.set15.traj
 ls: cannot access *.pdb.*: No such file or directory
 sh: Syntax error: Bad fd number
 vijay@glycosim:~/Simulation-Folder-Feb2013/chapter5-thermo-paper2-Vj/analysis-malto-/28-difusion-coeff-malto-thermo/convert-gromacs-format$ 
```

有关信息，我使用的是 Ubuntu 11.10（64 位）。

如何纠正这个错误？感谢任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-04T12:20:09.510

问题可能是，在 Ubuntu 11.x 中 /bin/sh 链接到 /bin/dash 而不是 bin bash。

检查链接：

```
ls -l /bin/sh 
```

如果 /bin/sh 是指向 /bin/dash 的链接，请将其更改为 /bin/bash。

```
sudo mv /bin/sh /bin/sh.orig
sudo ln -s /bin/bash /bin/sh 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T11:04:12.390

似乎系统命令“ptraj”无法生成“.pdb”文件/文件。

我建议更改以下行，以免抑制可能的错误：

```
os.system("ptraj "+top +" ptraj_tmp.ptr >/dev/null 2>&1") 
```

替换为：

```
os.system("ptraj "+top +" ptraj_tmp.ptr") 
```

# asp.net - How to Advance filter for category and author in Smartsearch in kentico

> ID：15809061
> 
> 赞同：3
> 
> 时间：2013-04-04T10:48:53.647
> 
> 标签：asp.net, content-management-system, kentico

I have created basic search and uses the SearchHelper to get smart search results based on the search paramaters.

Now creating the Advance search based on Category , Author etc but did not find the way to filter the result based on these condition.

I am looking for a way to display the results using the dataset that

```
 // Prepare parameters
            SearchParameters parameters = new SearchParameters()
            {
                SearchFor = searchText,
                SearchSort = SearchHelper.GetSort(srt),
                Path = path,
                ClassNames = DocumentTypes,
                CurrentCulture = culture,
                DefaultCulture = defaultCulture,
                CombineWithDefaultCulture = CombineWithDefaultCulture,
                CheckPermissions = CheckPermissions,
                SearchInAttachments = SearchInAttachments,
                User = (UserInfo)CMSContext.CurrentUser,
                SearchIndexes = Indexes,
                StartingPosition = startPosition,
                DisplayResults = displayResults,
                NumberOfProcessedResults = numberOfProceeded,
                NumberOfResults = 0,
                AttachmentWhere = AttachmentsWhere,
                AttachmentOrderBy = AttachmentsOrderBy,
                BlockFieldOnlySearch = BlockFieldOnlySearch,
            };

            // Search
            DataSet results = SearchHelper.Search(parameters); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-27T05:48:58.250

The easiest way is to use the method:

```
SearchHelper.CombineSearchCondition() 
```

The first parameter is the searchText, with the search terms you probably already have.

The second parameter is searchConditions, which can be formatted as per [https://docs.kentico.com/k10/configuring-kentico/setting-up-search-on-your-website/smart-search-syntax](https://docs.kentico.com/k10/configuring-kentico/setting-up-search-on-your-website/smart-search-syntax)

Alternatively you could just append your search conditions to your search text manually, separating each term with a space.

Remember that to filter based on any field they need to be selected as searchable in the SiteManager->Development->DocumentTypes->DocumentType->Search Tab.

# jquery - 在 $.ajax() 中，为什么请求方法选项命名为 'type'？

> ID：15809064
> 
> 赞同：0
> 
> 时间：2013-04-04T10:49:12.213
> 
> 标签：jquery

在 jQuery 的[**$.ajax()**](http://api.jquery.com/jQuery.ajax/)方法中，为什么指定 HTTP-request 方法的选项命名为`type`而不是`method`？这是有原因的吗，我的意思是选项名称是否`type`意味着更多？

注意：我知道选项的名称并不重要。但我仍然想知道，因为我相信 jQuery 通常非常适合已建立的约定和词汇表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:51:29.930

因为它指定了请求的**类型**`$.ajax`。也许它是为了区分，`method`因为它支持`PUT`and在and`DELETE`之上。`GET``POST`

来自[`$.ajax`多科](http://api.jquery.com/jQuery.ajax/)：

> 类型（默认值：'GET'）
> 
> 类型：字符串
> 
> 要发出的请求类型（“POST”或“GET”），默认为“GET”。注意：这里也可以使用其他 HTTP 请求方法，例如 PUT 和 DELETE，但并非所有浏览器都支持。

# currency - How can I calculate then display different currencies on a web page?

> ID：15809065
> 
> 赞同：0
> 
> 时间：2013-04-04T10:49:16.983
> 
> 标签：currency, shopify, currency-exchange-rates

I'm working on a Shopify site and would like product prices to be viewed in different currencies alongside each other e.g.

£123 | $456 | €789

I've read a few methods on Shopify e.g. ['How to Show Multiple Currencies'](http://wiki.shopify.com/How_to_Show_Multiple_Currencies) but you have to select which currency you want and the all the prices change accordingly. However, **I need all currencies to be in view together** - GBP, USD, EUR.

Is there a way I can set it up so that when I enter the base price in GBP, the USD and EUR prices will be automatically calculated and displayed on the web page? Ideally, the client would like to update the currency exchange rates in the back-end.

Please help if you can.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:09:07.647

如果您研究 Shopify 提供货币显示的方式，您会发现它只不过是一点 Javascript，连接到货币兑换机制。

做你想做的事，只需稍微修改一下 Javascript。做到这一点并不难。整个模式已经用一种货币为您布置好了，因此添加其他货币很容易。

# php - â€™ is being displayed instead of -

> ID：15809067
> 
> 赞同：6
> 
> 时间：2013-04-04T10:49:21.907
> 
> 标签：php, character-encoding, non-ascii-characters

`â€™` is being displayed instead of `-` in php page

I tried using different encoding types like:

```
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/> 
```

and

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/> 
```

but result is the same. What could be the problem?

**Input**

> `<strong style="color:#A8A8A8;">1</strong>` – Lorem Ipsum.

**Result**

> **1** â€“ Lorem Ipsum.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:55:58.613

确保您的 html 标头指定 utf8

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

这通常对我有用（显然，如果内容是 utf8）。

如果设置内容类型，则无需转换为 html 实体。

* * *

检查[http://php.net/manual/en/function.mb-convert-encoding.php](http://php.net/manual/en/function.mb-convert-encoding.php)

```
<?php
     header('Content-Type: text/html; charset=utf-8');
     mb_internal_encoding('utf-8');
?> 
```

可能这会对你有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T11:06:48.820

元标记不改变输出的事实是一个强有力的指标，表明有一些东西覆盖它；可能是 HTTP 标头中指定的字符集（优先于元标记），您确定没有在此处设置吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T10:56:25.683

看起来您的源数据在此过程中从一种编码转换为另一种编码。尝试确保所有步骤都具有相同的编码。

1.  您的（MySQL？）数据是否存储为 UTF8？
2.  您的 .php 文件是否保存为 UTF8？

在将 UTF8 数据作为 ISO-8859-1 数据处理时，通常会弹出这样的转换错误。（多字节与单字节？不确定）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T11:13:27.620

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-09T19:40:04.630

从 javacode 创建文件并将编码设置为 UTF-16 时遇到了同样的问题。

# java - 如何从父类中获取执行的 Java 子类名称？

> ID：15809070
> 
> 赞同：1
> 
> 时间：2013-04-04T10:49:38.847
> 
> 标签：java, junit

我正在执行 Java JUnit 测试。`Child`测试类扩展`Parent`了测试类，孩子自然地重用了`Parent`类`setUp()`和`tearDown()`方法。在`Parent` `tearDown()`方法中，我有一个方法可以截取浏览器窗口的屏幕截图。

我想通过执行类名来命名图像。但是，我有一个问题，因为我需要`Parent` `tearDown()`了解正在执行的`Child`测试类名称。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T10:55:00.177

```
@After
public void tearDown() {
  String name = getClass().getName();
  // use name as filename
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-12T08:05:04.510

使用`@ClassRule`

创建一个新类如下

```
import org.junit.rules.TestWatcher;
import org.junit.runner.Description;

public class TestClassName extends TestWatcher{

private String name = null;

protected void starting(Description d){
    name = d.getClassName();
}

public String getName(){
    return name;
}

} 
```

并在您的父测试用例中添加以下行

```
@ClassRule
public static TestClassName testClassName = new TestClassName(); 
```

`testClassName.getName()`在 tearDown 方法中使用

# c# - 根据 editorfor 值更新 displayfor

> ID：15809072
> 
> 赞同：0
> 
> 时间：2013-04-04T10:49:43.297
> 
> 标签：c#, asp.net-mvc, viewmodel

有没有办法根据我在编辑器模板中输入的值来更新 displayfor 值？我创建了一个自定义编辑器和 displayfor 模板：

```
@model Models.AddressViewModel

<div class="address">
<div class="row">
    <div class="label">@Html.DisplayFor(model => model.Street)</div>
    <div class="label">@Html.DisplayFor(model => model.HouseNumber)</div>
</div>
<div class="row">
    <div class="label">@Html.DisplayFor(model => model.City)</div>
    <div class="label">@Html.DisplayFor(model => model.ZipCode)</div>
</div> 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:33:03.473

我在这里猜测您的目的，但我假设它们同时在同一页面上？如果是这样，您可以简单地使用 jQuery 即时更新值。

```
@model Models.AddressViewModel

<div class="address">
<div class="row">
    <div class="label label-street">@Html.DisplayFor(model => model.Street)</div>
    <div class="label label-housenumber">@Html.DisplayFor(model => model.HouseNumber)</div>
</div>
<div class="row">
    <div class="label label-city">@Html.DisplayFor(model => model.City)</div>
    <div class="label label-zipcode">@Html.DisplayFor(model => model.ZipCode)</div>
</div> 
```

然后在 jQuery 中类似于：

```
$("input#zipCode").blur(function(){
    $("div.label-zipcode").text($(this).val());
}); 
```

或者，如果您的表单都是 Ajax，您可以将您的编辑器值发布到控制器，然后作为回复返回显示视图。

我能用你提供的信息做最好的事情。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:23:21.990

你给我的解决方案几乎是正确的。$("div.label-zipcode").val($(this).val());，必须是 $("div.label-zipcode").html($(this).val());

# python - Python syslog 记录器不能写入超过 2048 个字符

> ID：15809076
> 
> 赞同：4
> 
> 时间：2013-04-04T10:49:50.170
> 
> 标签：python, logging, limit, syslog

我正在尝试使用 Python 的 syslog 记录器将一些消息打印到 syslog。简单记录器，如“[如何在 python 中配置日志记录到 syslog？](https://stackoverflow.com/questions/3968669/how-to-configure-logging-to-syslog-in-python) ”中所述：

```
import logging
import logging.handlers

my_logger = logging.getLogger('MyLogger')
my_logger.setLevel(logging.DEBUG)

handler = logging.handlers.SysLogHandler()

my_logger.addHandler(handler)

my_logger.debug('this is debug') 
```

但是当我试图打印一条很长的消息`my_logger.debug('<<4000 chars>>')`时，它只打印前 2046 个字符。Python中有任何已知的限制吗？

据我所知，Python 支持非常大的字符串输入，并且所有参数都作为引用传递，因此处理如此大的输入应该没有任何问题。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-25T19:09:54.877

默认情况下，rsyslogd 限制为每条消息 2048 个字节，但您可以使用以下`$MaxMessageSize`参数设置它`/etc/rsyslog.conf`：

> $MaxMessageSize ，默认 2k - 允许指定最大支持的消息大小（用于发送和接收）。

参考：[http ://www.rsyslog.com/doc/v8-stable/configuration/global/index.html](http://www.rsyslog.com/doc/v8-stable/configuration/global/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:17:42.327

你应该使用 GELF [http://www.graylog2.org/about/gelf](http://www.graylog2.org/about/gelf)

> Graylog 扩展日志格式 (GELF) 避免了经典普通 syslog 的缺点：
> 
> ```
> Limited to length of 1024 byte - Not much space for payloads like backtraces
> Unstructured. You can only build a long message string and define priority, severity etc. 
> ```

您可以从中阅读更多内容[Syslog 真的有 1KB 的消息限制吗？](https://stackoverflow.com/questions/2011986/does-syslog-really-have-a-1kb-message-limit)

# eclipse - Eclipse Juno CDT 'symbole could not resolved' strange behavior

> ID：15809077
> 
> 赞同：1
> 
> 时间：2013-04-04T10:49:54.403
> 
> 标签：eclipse, symbols, eclipse-cdt

I have just installed eclipse juno cdt on Fedora 16\. I have g++ installed.

When I first created a hello world C++ project, I have problem of iostream could not be resolved. I corrected it by modifying the include path and it worked.

Then, I have a problem of cout and endl could not be resolved. I restarted eclipse with -clean option. It worked. But I have a problem left, g++ could not be found in the PATH.

I modified the path to point to /usr/bin/g++, restarted the eclipse (always with -clean option). This time, everything seems to be ok. I compiled and ran the code, it worked. Helloworld is displayed on screen.

But when I delete the line #include and rewrite this line, click save. Eclipse showed error: cout and endl could not be resolved.

I really don't understand what is happening to Eclipse. Does anyone have the same problem as mine and how to resolve it in a stable manner?

Thanks in advance!

# azure - Azure表存储分区设计

> ID：15809078
> 
> 赞同：7
> 
> 时间：2013-04-04T10:49:54.737
> 
> 标签：azure, azure-storage, azure-table-storage

我有一些软件可以在很长一段时间内收集数据，大约每秒 200 个读数。它为此使用 SQL 数据库。我希望使用 Azure 将大量旧的“存档”数据移动到其中。

该软件使用多租户类型的体系结构，因此我计划为每个租户使用一个 Azure 表。每个租户可能正在监视 10-20 个不同的指标，因此我计划使用 Metric ID (int) 作为分区键。

由于每个指标每分钟只有一个读数（最大值），因此我计划使用 DateTime.Ticks.ToString("d19") 作为我的 RowKey。

但是，我对这将如何扩展缺乏一点了解；所以希望有人能够解决这个问题：

为了性能，Azure 将/可能按分区键拆分我的表，以使事情保持良好和快速。在这种情况下，这将导致每个指标有一个分区。

但是，我的 rowkey 可能代表大约 5 年的数据，所以我估计大约有 250 万行。

Azure 是否足够聪明，可以根据行键进行拆分，还是我在设计未来的瓶颈？我通常知道不要过早地优化，但是像 Azure 这样的东西看起来不像平常那​​么明智！

寻找 Azure 专家，让我知道我是否在正确的路线上，或者我是否也应该将我的数据分区到更多表中。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-04T11:04:25.757

几点评论：

除了存储数据之外，您可能还想研究如何检索数据，因为这可能会大大改变您的设计。您可能想问自己的一些问题：

*   当我检索数据时，我是否总是检索特定指标和日期/时间范围的数据？
*   或者我需要检索特定日期/时间范围内所有指标的数据？如果是这种情况，那么您正在查看全表扫描。显然，您可以通过执行多个查询（一个查询/PartitionKey）来避免这种情况
*   我是否需要先查看最新结果，或者我真的不在乎。如果是前者，那么您的 RowKey 策略应该类似于`(DateTime.MaxValue.Ticks - DateTime.UtcNow.Ticks).ToString("d19")`.

此外，由于 PartitionKey 是一个字符串值，您可能希望将`int`值转换为`string`带有一些“0”预填充的值，以便您的所有 id 按顺序显示，否则您将获得 1、10、11、..、19、2、.. ..ETC。

据我所知，Windows Azure`PartitionKey`仅基于而不是基于`RowKey`. 在分区内，`RowKey`用作唯一键。Windows Azure 将尝试`PartitionKey`在同一个节点中保持相同的数据，但由于每个节点都是一个物理设备（因此具有大小限制），因此数据也可能会流向另一个节点。

您可能想阅读 Windows Azure 存储团队的这篇博文：http: [//blogs.msdn.com/b/windowsazurestorage/archive/2010/11/06/how-to-get-most-out-of-windows-天蓝色表.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/11/06/how-to-get-most-out-of-windows-azure-tables.aspx)。

**更新** 根据您在下面的评论和上面的一些信息，让我们尝试做一些数学运算。这是基于此处发布的最新可扩展性目标：http: [//blogs.msdn.com/b/windowsazurestorage/archive/2012/11/04/windows-azure-s-flat-network-storage-and-2012-scalability -targets.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/11/04/windows-azure-s-flat-network-storage-and-2012-scalability-targets.aspx)。该文件指出：

> 单表分区——表分区是表中具有相同分区键值的所有实体，通常表有很多分区。单个表分区的吞吐量目标是：
> 
> *   每秒最多 2,000 个实体
> *   请注意，这是针对单个分区，而不是单个表。因此，具有良好分区的表最多可以处理 20,000 个实体/秒，这就是上面描述的整体帐户目标。

现在您提到您有 10 到 20 个不同的指标点，对于每个指标点，您每分钟最多可以编写 1 条记录，这意味着您最多可以编写 20 个实体/分钟/表，这远远低于2000 个实体/秒的可扩展性目标。

现在的问题仍然是阅读。假设用户将读取每个分区最多 24 小时的数据（即 24 * 60 = 1440 点）。现在假设用户在 1 天内获取所有 20 个指标的数据，那么每个用户（因此每个表）将获取最多 28,800 个数据点。我想留给您的问题是您每秒可以获得多少这样的请求才能达到该阈值。如果你能以某种方式推断这些信息，我认为你可以就你的架构的可扩展性得出一些结论。

我还建议您观看此视频：[http](http://channel9.msdn.com/Events/Build/2012/4-004) ://channel9.msdn.com/Events/Build/2012/4-004 。

希望这可以帮助。

# encoding - VB 6.0 中文本文件的编码

> ID：15809081
> 
> 赞同：4
> 
> 时间：2013-04-04T10:50:01.333
> 
> 标签：encoding, vb6, filestream

我有“ANSI”和“UCS-2 Little Endian”编码格式的巨大外部文件。

现在我想使用 Visual Basic 6.0 将文件编码格式更改为 UTF-8。我不想修改原始文件；我只想单独更改编码格式。

我在网上搜索过；但看不懂VB代码，也不知道怎么做。

我还希望能够从 UTF-8 编码文件中一次读取一行。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T13:23:37.947

笔记。该答案已被广泛扩展以适应已编辑的问题，而这又是由于[Visual Basic 6 和 UTF-8](https://stackoverflow.com/questions/23473252/visual-basic-6-and-utf-8)

以下代码总结了在 VB6 中将文件中的 ANSI、UTF-16 和 UTF-32 编码字符串转换为 UTF-8 字符串。您必须加载整个文件并输出它。请注意，如果它是真正通用的，LineInputUTF8() 方法将是 LineInput()，并且需要代码页。

```
Option Explicit

Private Declare Function MultiByteToWideChar Lib "Kernel32.dll" ( _
    ByVal CodePage As Long, _
    ByVal dwFlags As Long, _
    ByVal lpMultiByteStr As Long, _
    ByVal cbMultiByte As Long, _
    ByVal lpWideCharStr As Long, _
    ByVal cchWideChar As Long _
) As Long

Private Declare Function WideCharToMultiByte Lib "Kernel32.dll" ( _
    ByVal CodePage As Long, _
    ByVal dwFlags As Long, _
    ByVal lpWideCharStr As Long, _
    ByVal cchWideChar As Long, _
    ByVal lpMultiByteStr As Long, _
    ByVal cbMultiByte As Long, _
    ByVal lpDefaultChar As Long, _
    ByVal lpUsedDefaultChar As Long _
) As Long

Public Const CP_ACP        As Long = 0          ' Default ANSI code page.
Public Const CP_UTF8       As Long = 65001      ' UTF8.
Public Const CP_UTF16_LE   As Long = 1200       ' UTF16 - little endian.
Public Const CP_UTF16_BE   As Long = 1201       ' UTF16 - big endian.
Public Const CP_UTF32_LE   As Long = 12000      ' UTF32 - little endian.
Public Const CP_UTF32_BE   As Long = 12001      ' UTF32 - big endian.

' Purpose:  Heuristic to determine whether bytes in a file are UTF-8.
Private Function FileBytesAreUTF8(ByVal the_iFileNo As Integer) As Boolean

    Const knSampleByteSize          As Long = 2048
    Dim nLof                        As Long
    Dim nByteCount                  As Long
    Dim nByteIndex                  As Long
    Dim nCharExtraByteCount         As Long
    Dim bytValue                    As Byte

    ' We look at the first <knSampleByteSize> bytes of the file. However, if the file is smaller, we will have to
    ' use the smaller size.
    nLof = LOF(the_iFileNo)
    If nLof < knSampleByteSize Then
        nByteCount = nLof
    Else
        nByteCount = knSampleByteSize
    End If

    ' Go to the start of the file.
    Seek #the_iFileNo, 1

    For nByteIndex = 1 To nByteCount

        Get #the_iFileNo, , bytValue

        ' If the character we are processing has bytes beyond 1, then we are onto the next character.
        If nCharExtraByteCount = 0 Then
            '
            ' The UTF-8 specification says that the first byte of a character has masking bits which indicate how many bytes follow.
            '
            ' See: http://en.wikipedia.org/wiki/UTF-8#Description
            '
            ' Bytes in
            ' sequence   Byte 1   Byte 2   Byte 3   Byte 4
            ' 1          0xxxxxxx
            ' 2          110xxxxx 10xxxxxx
            ' 3          1110xxxx 10xxxxxx 10xxxxxx
            ' 4          11110xxx 10xxxxxx 10xxxxxx 10xxxxxx
            '
            If (bytValue And &H80) = &H0 Then
                nCharExtraByteCount = 0
            ElseIf (bytValue And &HE0) = &HC0 Then
                nCharExtraByteCount = 1
            ElseIf (bytValue And &HF0) = &HE0 Then
                nCharExtraByteCount = 2
            ElseIf (bytValue And &HF8) = &HF0 Then
                nCharExtraByteCount = 3
            Else
                ' If none of these masks were matched, then this can't be a UTF-8 character.
                FileBytesAreUTF8 = False
                Exit Function
            End If
        Else
            ' All following bytes must be masked as in the table above.
            If (bytValue And &HC0) = &H80 Then
                nCharExtraByteCount = nCharExtraByteCount - 1
                If nCharExtraByteCount = 0 Then
                    FileBytesAreUTF8 = True
                End If
            Else
                ' Not a UTF8 character.
                FileBytesAreUTF8 = False
                Exit Function
            End If
        End If

    Next nByteIndex

End Function

' Purpose:  Take a string whose bytes are in the byte array <the_abytCPString>, with code page <the_nCodePage>, convert to a VB string.
Private Function FromCPString(ByRef the_abytCPString() As Byte, ByVal the_nCodePage As Long) As String

    Dim sOutput                     As String
    Dim nValueLen                   As Long
    Dim nOutputCharLen              As Long

    ' If the code page says this is already compatible with the VB string, then just copy it into the string. No messing.
    If the_nCodePage = CP_UTF16_LE Then
        FromCPString = the_abytCPString()
    Else

        ' Cache the input length.
        nValueLen = UBound(the_abytCPString) - LBound(the_abytCPString) + 1

        ' See how big the output buffer will be.
        nOutputCharLen = MultiByteToWideChar(the_nCodePage, 0&, VarPtr(the_abytCPString(LBound(the_abytCPString))), nValueLen, 0&, 0&)

        ' Resize output byte array to the size of the UTF-8 string.
        sOutput = Space$(nOutputCharLen)

        ' Make this API call again, this time giving a pointer to the output byte array.
        MultiByteToWideChar the_nCodePage, 0&, VarPtr(the_abytCPString(LBound(the_abytCPString))), nValueLen, StrPtr(sOutput), nOutputCharLen

        ' Return the array.
        FromCPString = sOutput

    End If

End Function

Public Function GetContents(ByVal the_sTextFile As String, ByRef out_nCodePage As Long, Optional ByVal the_nDesiredCodePage As Long = -1, Optional ByRef out_bContainedBOM As Boolean) As String

    Dim iFileNo                     As Integer
    Dim abytFileContents()          As Byte
    Dim nDataSize                   As Long

    iFileNo = FreeFile

    OpenForInput the_sTextFile, iFileNo, out_nCodePage, the_nDesiredCodePage, out_bContainedBOM

    ' We want to read the entire contents of the file (not including any BOM value).
    ' After calling OpenForInput(), the file pointer should be positioned after any BOM.
    ' So size file contents buffer to <file size> - <current position> + 1.
    nDataSize = LOF(iFileNo) - Seek(iFileNo) + 1
    ReDim abytFileContents(1 To nDataSize)
    Get #iFileNo, , abytFileContents()

    Close iFileNo

    ' Now we must convert this to UTF-8\. But we have to first convert to the Windows NT standard UTF-16 LE.
    GetContents = FromCPString(abytFileContents(), out_nCodePage)

End Function

' Purpose:  Reads up to the end of the current line of the file, repositions to the beginning of the next line, if any, and
'           outputs all characters found.
' Inputs:   the_nFileNo     The number of the file.
' Outputs:  out_sLine       The line from the current position in the file.
' Return:   True if there is more data.
Public Function LineInputUTF8(ByVal the_nFileNo As Integer, ByRef out_sLine As String) As Boolean

    Dim bytValue            As Byte
    Dim abytLine()          As Byte
    Dim nStartOfLinePos     As Long
    Dim nEndOfLinePos       As Long
    Dim nStartOfNextLine    As Long
    Dim nLineLen            As Long

    ' Save the current file position as the beginning of the line, and cache this value.
    nStartOfLinePos = Seek(the_nFileNo)

    ' Retrieves the first byte from the current position.
    Get #the_nFileNo, , bytValue

    ' Loop until the end of file is encountered.
    Do Until EOF(the_nFileNo)

        ' Check whether this byte represents a carriage return or line feed character (indicating new line).
        If bytValue = 13 Or bytValue = 10 Then
            ' By this point, the current position is *after* the CR or LF character, so to get the position of the
            ' last byte in the line, we must go back two bytes.
            nEndOfLinePos = Seek(the_nFileNo) - 2

            ' If this is a carriage return, then we must check the next character.
            If bytValue = 13 Then
                Get #the_nFileNo, , bytValue
                ' Is this a line feed?
                If bytValue = 10 Then
                ' Yes. Assume that CR-LF counts as a single NewLine. So the start of the next line should skip over the line feed.
                    nStartOfNextLine = nEndOfLinePos + 3
                Else
                ' No. The start of the next line is the current position.
                    nStartOfNextLine = nEndOfLinePos + 2
                End If
            ElseIf bytValue = 10 Then
            ' If this is a line feed, then the start of the next line is the current position.
                nStartOfNextLine = nEndOfLinePos + 2
            End If

            ' Since we have processed all the bytes in the line, exit the loop.
            Exit Do
        End If

        ' Get the next byte.
        Get #the_nFileNo, , bytValue
    Loop

    ' Check to see if there was an end of line.
    If nEndOfLinePos = 0 Then
    ' No, this is the end of the file - so use all the remaining characters.
        nLineLen = Seek(the_nFileNo) - nStartOfLinePos - 1
    Else
    ' Yes - so use all the characters up to the end of line position.
        nLineLen = nEndOfLinePos - nStartOfLinePos + 1
    End If

    ' Is this line empty?
    If nLineLen = 0 Then
    ' Yes - just return an empty string.
        out_sLine = vbNullString
    Else
    ' No - pull all the bytes from the beginning to the end of the line into a byte array, and then convert that from UTF-8 to a VB string.
        ReDim abytLine(1 To nLineLen)
        Get #the_nFileNo, nStartOfLinePos, abytLine()
        out_sLine = FromCPString(abytLine(), CP_UTF8)
    End If

    ' If there is a line afterwards, then move to the beginning of the line, and return True.
    If nStartOfNextLine > 0 Then
        Seek #the_nFileNo, nStartOfNextLine
        LineInputUTF8 = True
    End If

End Function

' Purpose:  Analogue of 'Open "fileName" For Input As #fileNo' - but also return what type of text this is via a Code Page value.
' Inputs:   the_sFileName
'           the_iFileNo
'           (the_nDesiredCodePage)  The code page that you want to use with this file.
'                                   If this value is set to the default, -1, this indicates that the code page will be ascertained from the file.
' Outputs:  out_nCodePage           There are only six valid values that are returned if <the_nDesiredCodePage> was set to -1.
'               CP_ACP        ANSI code page
'               CP_UTF8       UTF-8
'               CP_UTF16LE    UTF-16 Little Endian (VB and NT default string encoding)
'               CP_UTF16BE    UTF-16 Big Endian
'               CP_UTF32LE    UTF-32 Little Endian
'               CP_UTF32BE    UTF-32 Big Endian
'           (out_bContainedBOM)     If this was set to True, then the file started with a BOM (Byte Order Marker).
Public Sub OpenForInput(ByRef the_sFilename As String, ByVal the_iFileNo As Integer, ByRef out_nCodePage As Long, Optional ByVal the_nDesiredCodePage As Long = -1, Optional ByRef out_bContainedBOM As Boolean)

    ' Note if we want to take account of every case, we should read in the first four bytes, and check for UTF-32 low and high endian BOMs, check
    ' the first three bytes for the UTF-8 BOM, and finally check the first two bytes for UTF-16 low and hight endian BOMs.
    Dim abytBOM(1 To 4)             As Byte
    Dim nCodePage                   As Long

    ' By default, there is no BOM.
    out_bContainedBOM = False

    Open the_sFilename For Binary Access Read As #the_iFileNo

    ' We are interested in -1 (ascertain code page), and then various UTF encodings.
    Select Case the_nDesiredCodePage
    Case -1, CP_UTF8, CP_UTF16_BE, CP_UTF16_LE, CP_UTF32_BE, CP_UTF32_LE

        ' Default code page.
        nCodePage = CP_ACP

        ' Pull in the first four bytes to determine the BOM (byte order marker).
        Get #the_iFileNo, , abytBOM()

        ' The following are the BOMs for text files:
        '
        ' FF FE         UTF-16, little endian
        ' FE FF         UTF-16, big endian
        ' EF BB BF      UTF-8
        ' FF FE 00 00   UTF-32, little endian
        ' 00 00 FE FF   UTF-32, big-endian
        '
        ' Work out the code page from this information.

        Select Case abytBOM(1)
        Case &HFF
            If abytBOM(2) = &HFE Then
                If abytBOM(3) = 0 And abytBOM(4) = 0 Then
                    nCodePage = CP_UTF32_LE
                Else
                    nCodePage = CP_UTF16_LE
                End If
            End If
        Case &HFE
            If abytBOM(2) = &HFF Then
                nCodePage = CP_UTF16_BE
            End If
        Case &HEF
            If abytBOM(2) = &HBB And abytBOM(3) = &HBF Then
                nCodePage = CP_UTF8
            End If
        Case &H0
            If abytBOM(2) = &H0 And abytBOM(3) = &HFE And abytBOM(4) = &HFF Then
                nCodePage = CP_UTF32_BE
            End If
        End Select

        ' Did we match any BOMs?
        If nCodePage = CP_ACP Then
        ' No - we are still defaulting to the ANSI code page.
            ' Special check for UTF-8\. The BOM is not specified in the standard for UTF-8, but according to Wikipedia (which is always right :-) ),
            ' only Microsoft includes this marker at the beginning of files.
            If FileBytesAreUTF8(the_iFileNo) Then
                out_nCodePage = CP_UTF8
            Else
                out_nCodePage = CP_ACP
            End If
        Else
        ' Yes - we have worked out the code page from the BOM.
            ' If no code page was suggested, we now return the code page we found.
            If the_nDesiredCodePage = -1 Then
                out_nCodePage = nCodePage
            End If

            ' Inform the caller that a BOM was found.
            out_bContainedBOM = True
        End If

        ' Reset the file pointer to the beginning of the file data.
        If out_bContainedBOM Then
            ' Note that if the code page found was one of the two UTF-32 values, then we are already in the correct position.
            ' Otherwise, we have to move to just after the end of the BOM.
            Select Case nCodePage
            Case CP_UTF16_BE, CP_UTF16_LE
                Seek #the_iFileNo, 3
            Case CP_UTF8
                Seek #the_iFileNo, 4
            End Select
        Else
            ' There is no BOM, so simply go the beginning of the file.
            Seek #the_iFileNo, 1
        End If

    Case Else
        out_nCodePage = the_nDesiredCodePage
    End Select

End Sub

' Purpose:  Analogue of 'Open "fileName" For Append As #fileNo'
Public Sub OpenForAppend(ByRef the_sFilename As String, ByVal the_iFileNo As Integer, Optional ByVal the_nCodePage As Long = CP_ACP, Optional ByVal the_bPrefixWithBOM As Boolean = True)

    ' Open the file and move to the end of the file.
    Open the_sFilename For Binary Access Write As #the_iFileNo
    Seek the_iFileNo, LOF(the_iFileNo) + 1

    If the_bPrefixWithBOM Then
        WriteBOM the_iFileNo, the_nCodePage
    End If

End Sub

' Purpose:  Analogue of 'Open "fileName" For Output As #fileNo'
Public Sub OpenForOutput(ByRef the_sFilename As String, ByVal the_iFileNo As Integer, Optional ByVal the_nCodePage As Long = CP_ACP, Optional ByVal the_bPrefixWithBOM As Boolean = True)

    ' Ensure we overwrite the file by deleting it ...
    On Error Resume Next
    Kill the_sFilename
    On Error GoTo 0

    ' ... before creating it.
    Open the_sFilename For Binary Access Write As #the_iFileNo

    If the_bPrefixWithBOM Then
        WriteBOM the_iFileNo, the_nCodePage
    End If

End Sub

' Purpose:  Analogue of the 'Print #fileNo, value' statement. But only one value allowed.
'           Setting <the_bAppendNewLine> = False is analagous to 'Print #fileNo, value;'.
Public Sub Print_(ByVal the_iFileNo As Integer, ByRef the_sValue As String, Optional ByVal the_nCodePage As Long = CP_ACP, Optional ByVal the_bAppendNewLine As Boolean = True)

    Const kbytNull                  As Byte = 0
    Const kbytCarriageReturn        As Byte = 13
    Const kbytNewLine               As Byte = 10

    Put #the_iFileNo, , ToCPString(the_sValue, the_nCodePage)

    If the_bAppendNewLine Then
        Select Case the_nCodePage
        Case CP_UTF16_BE
            Put #the_iFileNo, , kbytNull
            Put #the_iFileNo, , kbytCarriageReturn
            Put #the_iFileNo, , kbytNull
            Put #the_iFileNo, , kbytNewLine
        Case CP_UTF16_LE
            Put #the_iFileNo, , kbytCarriageReturn
            Put #the_iFileNo, , kbytNull
            Put #the_iFileNo, , kbytNewLine
            Put #the_iFileNo, , kbytNull
        Case CP_UTF32_BE
            Put #the_iFileNo, , kbytNull
            Put #the_iFileNo, , kbytNull
            Put #the_iFileNo, , kbytNull
            Put #the_iFileNo, , kbytCarriageReturn
            Put #the_iFileNo, , kbytNull
            Put #the_iFileNo, , kbytNull
            Put #the_iFileNo, , kbytNull
            Put #the_iFileNo, , kbytNewLine
        Case CP_UTF32_LE
            Put #the_iFileNo, , kbytCarriageReturn
            Put #the_iFileNo, , kbytNull
            Put #the_iFileNo, , kbytNull
            Put #the_iFileNo, , kbytNull
            Put #the_iFileNo, , kbytNewLine
            Put #the_iFileNo, , kbytNull
            Put #the_iFileNo, , kbytNull
            Put #the_iFileNo, , kbytNull
        Case Else
            Put #the_iFileNo, , kbytCarriageReturn
            Put #the_iFileNo, , kbytNewLine
        End Select
    End If

End Sub

Public Sub PutContents(ByRef the_sFilename As String, ByRef the_sFileContents As String, Optional ByVal the_nCodePage As Long = CP_ACP, Optional the_bPrefixWithBOM As Boolean)

    Dim iFileNo                     As Integer

    iFileNo = FreeFile
    OpenForOutput the_sFilename, iFileNo, the_nCodePage, the_bPrefixWithBOM
    Print_ iFileNo, the_sFileContents, the_nCodePage, False
    Close iFileNo

End Sub

' Purpose:  Converts a VB string (UTF-16) to UTF8 - as a binary array.
Private Function ToCPString(ByRef the_sValue As String, ByVal the_nCodePage As Long) As Byte()

    Dim abytOutput()                As Byte
    Dim nValueLen                   As Long
    Dim nOutputByteLen              As Long

    If the_nCodePage = CP_UTF16_LE Then
        ToCPString = the_sValue
    Else

        ' Cache the input length.
        nValueLen = Len(the_sValue)

        ' See how big the output buffer will be.
        nOutputByteLen = WideCharToMultiByte(the_nCodePage, 0&, StrPtr(the_sValue), nValueLen, 0&, 0&, 0&, 0&)

        If nOutputByteLen > 0 Then
            ' Resize output byte array to the size of the UTF-8 string.
            ReDim abytOutput(1 To nOutputByteLen)

            ' Make this API call again, this time giving a pointer to the output byte array.
            WideCharToMultiByte the_nCodePage, 0&, StrPtr(the_sValue), nValueLen, VarPtr(abytOutput(1)), nOutputByteLen, 0&, 0&
        End If

        ' Return the array.
        ToCPString = abytOutput()

    End If

End Function

Private Sub WriteBOM(ByVal the_iFileNo As Integer, ByVal the_nCodePage As Long)

    ' FF FE         UTF-16, little endian
    ' FE FF         UTF-16, big endian
    ' EF BB BF      UTF-8
    ' FF FE 00 00   UTF-32, little endian
    ' 00 00 FE FF   UTF-32, big-endian

    Select Case the_nCodePage
    Case CP_UTF8
        Put #the_iFileNo, , CByte(&HEF)
        Put #the_iFileNo, , CByte(&HBB)
        Put #the_iFileNo, , CByte(&HBF)
    Case CP_UTF16_LE
        Put #the_iFileNo, , CByte(&HFF)
        Put #the_iFileNo, , CByte(&HFE)
    Case CP_UTF16_BE
        Put #the_iFileNo, , CByte(&HFE)
        Put #the_iFileNo, , CByte(&HFF)
    Case CP_UTF32_LE
        Put #the_iFileNo, , CByte(&HFF)
        Put #the_iFileNo, , CByte(&HFE)
        Put #the_iFileNo, , CByte(&H0)
        Put #the_iFileNo, , CByte(&H0)
    Case CP_UTF32_BE
        Put #the_iFileNo, , CByte(&H0)
        Put #the_iFileNo, , CByte(&H0)
        Put #the_iFileNo, , CByte(&HFE)
        Put #the_iFileNo, , CByte(&HFF)
    End Select

End Sub 
```

以下代码被添加到具有 VSFlexGrid 控件和 Lucida 控制台字体的表单中 - 纯粹是为了提供一种显示尽可能多的字符的方法：

```
Option Explicit

Private Sub Command_Click()
    Example_ConvertFileToUTF8
End Sub

Private Sub Command2_Click()
    Example_IterateUTF8Lines
End Sub

Private Sub Command3_Click()
    Example_ReadWriteUTF8Lines
End Sub

Private Sub Form_Load()
    VSFlexGrid.ColWidth(0) = 7000!
End Sub

' Purpose:  Converts *any* pure text file (UTF16, ASCII, ANSI) to UTF8.
Private Sub Example_ConvertFileToUTF8()

    Dim nCodePage                   As Long
    Dim bContainedBOM               As Boolean
    Dim sFileContents               As String

    ' Read in contents.
    sFileContents = TextFile.GetContents("C:\MysteryEncoding.txt", nCodePage, , bContainedBOM)

    ' And then convert to UTF8.
    TextFile.PutContents "C:\output.txt", sFileContents, CP_UTF8, bContainedBOM

End Sub

' Purpose:  Iterates through each line of a UTF-8 text file, and adds it to a control which can display VB strings containing non-ANSI characters.
'           In this case, I am adding items to a FlexGrid with Font = "Lucida Console".
Private Sub Example_IterateUTF8Lines()

    Dim iFileNo             As Integer
    Dim lCodePage           As Long
    Dim sLine               As String

    iFileNo = FreeFile

    TextFile.OpenForInput "C:\UTF8.txt", iFileNo, lCodePage

    If lCodePage = CP_UTF8 Then
        Do While TextFile.LineInputUTF8(iFileNo, sLine)
            VSFlexGrid.AddItem sLine
        Loop
        VSFlexGrid.AddItem sLine
    Else
        MsgBox "This is not a UTF8 file."
    End If

    Close #iFileNo

End Sub

Private Sub Example_ReadWriteUTF8Lines()

    Dim iFileNoInput        As Integer
    Dim iFileNoOutput       As Integer
    Dim lCodePage           As Long
    Dim bBOM                As Boolean
    Dim sLine               As String

    iFileNoInput = FreeFile
    TextFile.OpenForInput "C:\UTF8.txt", iFileNoInput, lCodePage, , bBOM

    If lCodePage = CP_UTF8 Then

        iFileNoOutput = FreeFile
        TextFile.OpenForOutput "C:\output.txt", iFileNoOutput, lCodePage, bBOM

        Do While TextFile.LineInputUTF8(iFileNoInput, sLine)
            TextFile.Print_ iFileNoOutput, sLine, lCodePage
        Loop
        TextFile.Print_ iFileNoOutput, sLine, lCodePage, False

        Close #iFileNoOutput

    Else
        MsgBox "This is not a UTF8 file."
    End If

    Close #iFileNoInput

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T12:11:19.867

我必须使用一些 vb6 代码将文件编码 ANSI 更改为编码 UTF-8。

```
'--- start function for convert to UTF-8

Private Function OpenAppendUTF8(ByVal FileName As String) As Integer
    OpenAppendUTF8 = FreeFile(0)
    Open FileName For Binary Access Write As #OpenAppendUTF8
    Seek #OpenAppendUTF8, LOF(OpenAppendUTF8) + 1
End Function

Sub DeleteFile(ByVal FileToDelete As String)
   If Dir$(FileToDelete) = "" Then  'See above
   Else
      SetAttr FileToDelete, vbNormal
      Kill FileToDelete
   End If
End Sub
'-

Private Sub WriteUTF8( _
    ByVal FNum As Integer, _
    ByVal Text As String, _
    Optional ByVal NL As Boolean)

    Dim lngResult As Long
    Dim UTF8() As Byte

    If NL Then Text = Text & vbNewLine
    lngResult = WideCharToMultiByte(CP_UTF8, 0, StrPtr(Text), Len(Text), _
                                    0, 0, 0, 0)
    If lngResult > 0 Then
        ReDim UTF8(lngResult - 1)
        WideCharToMultiByte CP_UTF8, 0, StrPtr(Text), Len(Text), _
                            VarPtr(UTF8(0)), lngResult, 0, 0
        Put #FNum, , UTF8
    End If
End Sub
'------- end function for convert to UTF-8
'>>> coding 
             Dim ReadString As String
             Dim writeString As String
             Dim txtNotepad As String
             Dim FileNumber As Integer
             Dim UTF8 As String
             Dim strsql  As String
             Dim iloop As Integer
             FileNumber = FreeFile(1)                
                '--- if you need to delete file first.
                DeleteFile App.Path & "\PRB\fieldRules.txt"
                '---
                FileNumber = OpenAppendUTF8(App.Path & "\PRB\fieldRules.txt")
                iloop = 1
                Do While iloop > 0
                     iloop = InStr(1, txtNotepad, "\n")
                     '  "\n" for end of line 

                     If iloop <= 5 Then
                        iloop = 0
                     Else
                        'writeString = Mid(txtNotepad, 1, iloop - 1)
                        'Print #FileNumber, writeString
                        WriteUTF8 FileNumber, Mid(txtNotepad, 1, iloop - 1), True
                        txtNotepad = Mid(txtNotepad, iloop + 3, 9999)
                     End If
                Loop
                Close #FileNumber
<<<< end code 
```

# hibernate - Hibernate 是否进行空检查初始化惰性实体？

> ID：15809082
> 
> 赞同：2
> 
> 时间：2013-04-04T10:50:03.373
> 
> 标签：hibernate, jpa

假设我有一个实体 Parent 与一个相关实体 Child（可为空）与一个`@OneToMany(fetch = FetchType.LAZY)`关系

在我的操作 bean 中，以下代码会初始化子实体吗？

布尔 hasChild = false;

```
if(parent.getChild()!=null){
    hasChild = true;
} 
```

我在文档中看到它说`Lazy collection fetching: a collection is fetched when the application invokes an operation upon that collection. This is the default for collections.`但不确定是否将空检查归类为操作

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:55:19.650

不，`null`检查不足以可靠地触发延迟加载。您需要执行需要存在实际数据的操作，例如调用子对象`size()`的一个`Collection`​​或任何 getter。

请注意，您需要在事务中访问延迟加载的属性。

即使您什么都不做，也不能保证不会加载延迟加载的属性。`FetchType.LAZY`只是对持久性提供者的提示，因此延迟加载测试可能会导致测试脆弱。

# java - Making Bluetooth discoverable without user consent

> ID：15809084
> 
> 赞同：1
> 
> 时间：2013-04-04T10:50:06.683
> 
> 标签：java, android

I want to make bluetooth discoverable without user consent (The application is intended to wakeup at specific intervals be discoverable do some stuff and sleep again). I searched and found following solutions [http://snipplr.com/view/49526/get-ibluetooth-instance/](http://snipplr.com/view/49526/get-ibluetooth-instance/)

but I am getting value of b in IBluetooth method as null and also the return value is null.

References [How to programmatically set Discoverable time without user confirmation?](https://stackoverflow.com/questions/8742760/how-to-programmatically-set-discoverable-time-without-user-confirmation) [http://snipplr.com/view/49526/get-ibluetooth-instance/](http://snipplr.com/view/49526/get-ibluetooth-instance/)

I am using "android.permission.WRITE_SETTINGS" but I cant use android.permission.WRITE_SECURE_SETTINGS" as it is reserved for system apps only.

# c++ - unordered_map 构造函数错误（equal_to 模板函数）

> ID：15809087
> 
> 赞同：5
> 
> 时间：2013-04-04T10:50:11.987
> 
> 标签：c++, c++11

我以为我可以有一个指向完全专业化的模板函数的指针，但是下面的代码没有编译（MSVC2012）

```
#include <iostream>
#include <string>
#include <unordered_map>
#include <algorithm>

using namespace std;

unsigned long hashing_func(string key)
{
    unsigned long hash = 0;
    for(int i=0; i<key.size(); i++)
    {
        hash += (71*hash + key[i]) % 5;
    }
    return hash;
}

bool key_equal_fn2(string t1, string t2)
{
    return t1 == t2;
}

template<class T> bool key_equal_fn(T t1, T t2)
{
    return t1 == t2;
}

template <> bool key_equal_fn<string>(string t1, string t2)
{
    return !(t1.compare(t2));
}

int main ()
{
    unordered_map<string, string>::size_type n = 5;
    unordered_map<string, string> mymap(n, (const std::hash<string> &)hashing_func, (const std::equal_to<string> &)(key_equal_fn<string>)) ;

    mymap["paul"] = "jenna";
    mymap["frank"] = "ashley";

    return 0;
} 
```

构造函数行返回以下错误：

> 错误 C2440: 'type cast' : 无法从 'bool (__cdecl *)(T,T)' 转换为 'const std::equal_to<_Ty> &'

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T11:14:29.043

`hashing_func`和都`key_equal_fn`应该是函子对象（而不是函数）。另外，它们的类型必须提供给`unordered_map`模板，即地图应该有这个类型：

```
unordered_map<string, string, hashing_func, key_equal_fn> 
```

where`hashing_func`和`key_equal_fn`是函子类：

```
struct hashing_func {
    unsigned long operator()(const string& key) const {
        unsigned long hash = 0;
        for(size_t i=0; i<key.size(); i++)
            hash += (71*hash + key[i]) % 5;
        return hash;
    }
};

struct key_equal_fn {
    bool operator()(const string& t1, const string& t2) const {
        return !(t1.compare(t2));
    }
}; 
```

那么，`mymap`是这样定义的：

```
typedef unordered_map<string, string, hashing_func, key_equal_fn> MapType;
MapType::size_type n = 5;
MapType mymap(n, hashing_func(), key_equal_fn()); 
```

或者，`hashing_func`和/或`key_equal_fn`可以是函数，但您必须将它们包装到`std::function`对象中。那是，

```
unsigned long hashing_func(const string& key) {
    unsigned long hash = 0;
    for(size_t i=0; i<key.size(); i++)
      hash += (71*hash + key[i]) % 5;
    return hash;
}

bool key_equal_fn(const string& t1, const string& t2){
  return !(t1.compare(t2));
} 
```

并`mymap`以这种方式定义

```
typedef unordered_map<string, string,
    std::function<unsigned long(const string&)>,
    std::function<bool(const string&, const string&)>> MapType;

MapType::size_type n = 5;
MapType mymap(n, hashing_func, key_equal_fn); 
```

如果您愿意，可以使用 lambdas 并避免编写两个函数或仿函数类：

```
typedef unordered_map<string, string,
    std::function<unsigned long(const string&)>,
    std::function<bool(const string&, const string&)>> MapType;

MapType mymap(n,
  [](const string& key) -> unsigned long {
      unsigned long hash = 0;
      for(size_t i=0; i<key.size(); i++)
        hash += (71*hash + key[i]) % 5;
      return hash;
  },
  [](const string& t1, const string& t2) {
       return !(t1.compare(t2));
  }); 
```

最后，我最喜欢的是*全 lambdas*解决方案

```
auto hashing_func = [](const string& key) -> unsigned long {
    unsigned long hash = 0;
    for(size_t i=0; i<key.size(); i++)
        hash += (71*hash + key[i]) % 5;
    return hash;
};

auto key_equal_fn = [](const string& t1, const string& t2) {
    return !(t1.compare(t2));
};

typedef unordered_map<string, string,
    decltype(hashing_func), decltype(key_equal_fn)> MapType;

MapType::size_type n = 5;
MapType mymap(n, hashing_func, key_equal_fn); 
```

# java - if 语句逻辑

> ID：15809088
> 
> 赞同：1
> 
> 时间：2013-04-04T10:50:17.327
> 
> 标签：java, if-statement, logic

我的任务是为我正在做的一门课程创建一个小型 Java 程序，我遇到了以下代码块的一些问题：

```
 System.out.println("Please enter your first name:");
    userName = sc.nextLine();
    System.out.println("What year were you born in?");
    birthYear = sc.nextInt();
    System.out.println("In the 'dd.mm' format, what are the day and month of your birth?");
    dayMonth = sc.nextDouble();
    //Cast the user input of type double to an int for the day of Birth
    dayOfBirth = dayMonth.intValue();

    //Cast the double value for month and cast it to an int
    dayMonth = dayMonth - dayOfBirth;
    dayMonth = dayMonth * 100;
    dayMonth = Math.rint(dayMonth);
    monthOfBirth = dayMonth.intValue();
if(birthYear == 2013 || birthYear == 2001 || birthYear == 1989 || birthYear == 1977 || birthYear == 1965 || birthYear == 1953 || birthYear == 1941)
{
    if(monthOfBirth == 9 || monthOfBirth == 10 || monthOfBirth == 11)
    {
        System.out.println(userName + " was born during Spring on " + monthOfBirthName + " " + dayOfBirth + " in Snake year " + birthYear);
    }
        else if(monthOfBirth != 9 || monthOfBirth != 10 || monthOfBirth != 11)
        {
            System.out.println(userName + " was born on " + monthOfBirthName + " " + dayOfBirth + " in Snake year " + birthYear);
        }
}
if(birthYear != 2013 || birthYear != 2001 || birthYear != 1989 || birthYear != 1977 || birthYear != 1965 || birthYear != 1953 || birthYear != 1941)
{
     if(monthOfBirth == 9 || monthOfBirth == 10 || monthOfBirth == 11)
    {
        System.out.println(userName + " was born during Spring on " + monthOfBirthName + " " + dayOfBirth + " " + birthYear);
    }   
        else if(monthOfBirth != 9 || monthOfBirth != 10 || monthOfBirth != 11)
        {
            System.out.println(userName + " was born on " + monthOfBirthName + " " + dayOfBirth + " " + birthYear);
        }
} 
```

但是我的输出如下：

```
Please enter your first name:

Samuel

What year were you born in?

1977

In the 'dd.mm' format, what are the day and month of your birth?

09.09

Samuel was born during Spring on September 9 in Snake year 1977

Samuel was born during Spring on September 9 
```

我显然不希望重复输出，但是我无法看到 if 语句中的逻辑导致它重复的位置。

任何帮助将不胜感激。

谢谢大家，

～山姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:52:04.647

不要单独使用 2 `if`，而是将它们设为`if-else`或`if-else if`。

```
if(birthYear == 2013 || birthYear == 2001 || birthYear == 1989 || birthYear == 1977 || birthYear == 1965 || birthYear == 1953 || birthYear == 1941){
    ....
}
else if(birthYear != 2013 || birthYear != 2001 ||...){
....
} 
```

因为，如果您给出 a `if-if`，则两条`if`语句都将被执行，而如果您给出 a `if-else if`，则只有在第一个语句失败`else if`时才会执行第二个语句。`if`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:00:56.567

您可以选择以下解决方案之一：

1) 使用 && 运算符而不是 || 在第二个 if 语句中

或者

2) if(){}else{} // 卡马尔的解决方案

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T11:05:20.860

最好使用集合而不是多个 if( ... == ..|| ... == .. ||...)

像这样：

```
List<String> wrongYears = Arrays.asList("2013", "2001", "1989", "1977", ...); 
```

并检查：

```
if(wrongYears.contains(birthYear)
{
 ...
} 
```

并且几个月的数字相同

你的逻辑错误很明显

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T10:56:33.843

尽可能使用 else 语句，因此如果您测试 2013、2001 ... 之后，请使用 else 语句

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T10:57:18.863

您应该将第二个 if where everything is != 替换为简单的“else”，因为您已经检查了任何陈述是否为真。因此，简单地写 else 将在逻辑上相等并且更具可读性。

```
if(birthYear == 2013 || birthYear == 2001 || birthYear == 1989 || birthYear == 1977 || birthYear == 1965 || birthYear == 1953 || birthYear == 1941){
    ....
}
else { //not snake year
    ....
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T10:58:05.393

问题在于

```
if(birthYear != 2013 || birthYear != 2001 || birthYear != 1989 || birthYear != 1977 || birthYear != 1965 || birthYear != 1953 || birthYear != 1941 
```

如果你仔细看，我们会确保表达式总是导致 try。一次最多只能有一个为假，所有其他都为真，因此最终它总是为真（困惑？）。假设出生年份是 2013 年，这使得第一个条件 (birthyear!=2013) 为假，但所有其他条件都为真。举任何其他例子，你就会明白我想说什么。

实际上，一个小的修改将为您修复代码。您已经检查过`if (birthyear is in given years)`，没有任何条件的简单 else 将为您工作。

```
if(birthYear == 2013 || birthYear == 2001 || birthYear == 1989 || birthYear == 1977 || birthYear == 1965 || birthYear == 1953 || birthYear == 1941)
{
    if(monthOfBirth == 9 || monthOfBirth == 10 || monthOfBirth == 11)
    {
        System.out.println(userName + " was born during Spring on " + monthOfBirthName + " " + dayOfBirth + " in Snake year " + birthYear);
    }
        else// NO CHECK REQUIRED NOW
        {
            System.out.println(userName + " was born on " + monthOfBirthName + " " + dayOfBirth + " in Snake year " + birthYear);
        }
}
//SEE THIS
else{
     if(monthOfBirth == 9 || monthOfBirth == 10 || monthOfBirth == 11)
    {
        System.out.println(userName + " was born during Spring on " + monthOfBirthName + " " + dayOfBirth + " " + birthYear);
    }   
//AND
        else 
        {
            System.out.println(userName + " was born on " + monthOfBirthName + " " + dayOfBirth + " " + birthYear);
        }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-04T11:00:05.720

第二个 if 部分是错误的：

```
if(birthYear != 2013 || birthYear != 2001 || ....) 
```

因为它总是正确的。只需查看视图示例：如果您有 2012，则不是 2013，因此您的表达式为真。如果您取 2013，则第一部分变为假，但当您评估 2013 != 2001 时，它再次变为真。

你可能想要的是

```
if(birthYear == 2013 || birthYear == 2001 || birthYear == 1989 || birthYear == 1977 || birthYear == 1965 || birthYear == 1953 || birthYear == 1941)
{
.....
}
else {
.....
} 
```

顺便说一句：如果你想否定表达式 (x == A || x == B || x == C) 那么逻辑否定是 (x!=A && x!=B && x!=C) .

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-04T11:00:57.243

答案在你的条件下。

认为`dob = 1`

```
if(dob == 1 || dob == 2 || dob == 3 ...) 
```

将评估为真，因为 dob == 1

```
if (dob != 1 || dob != 2 || dob != 3 ...) 
```

也将评估为真，因为 dob != 2

您要使用的是`AND`/`&&`而不是`OR`/`||`

# php - 每月创建表

> ID：15809091
> 
> 赞同：2
> 
> 时间：2013-04-04T10:50:33.693
> 
> 标签：php, mysql

假设我有以下 MySQL 表；

```
id      | title   | date
--------+---------+----------
0       | john doe| 2013-02-01
2       | tarzan  | 2013-04-01
9       | toy-box | 2013-04-02
11      | jane    | 2013-01-01 
```

我想获取所有这些结果，并且每年我想创建一个 HTML 表：

```
January, 2013
[*] Jane

February, 2013
[*] John doe

April, 2013
[*] Tarzan
[*] toy-box 
```

如您所见，三月不存在。我怎样才能用 PHP 产生这样的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:57:32.297

只需使用 SQL 按月（可能还有标题）排序。然后做这样的事情：

```
$lastMonthId = null;

foreach ($records as $record) {
    $date = strtotime($record['date']);

    $monthId = date('Ym', $date);
    if ($monthId !== $lastMonthId) {
        if ($lastMonthId !== null) echo '</table>';
        echo '<h1>', date('Y-m', $date), '</h1>';
        echo '<table>';

        $lastMonthId = $monthId;
    }

    // Output <tr> for this record.
}

echo '</table>'; 
```

每当月份从一条记录更改为下一条记录时，这都会启动一个新表。

当然，这不会显示空月份，因为它们不存在于数据集中。

此外，看起来您实际上想要一个列表。如果是这种情况，只需将`<table>`,`</table>`和`<tr>`在该片段中分别替换为`<ul>`,`</ul>`和`<li>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T10:55:00.303

创建一个以月份为键的数组，如果您发现该月份的任何记录添加到数组中。最后，您将拥有以月份为键的数组以及另一个数组中的所有名称

```
 $myData = array()
         while(Looping through DB record)
        {
             extract Month part and check array_key_exists($myData , monthPart)
            if yes then $myData[$key]['Name'] = UserName
        } 
```

# c# - 在 GridView 中更新标签？

> ID：15809093
> 
> 赞同：0
> 
> 时间：2013-04-04T10:50:35.610
> 
> 标签：c#, javascript, asp.net, sql, ajax

我开发了一堵墙（嵌套评论），人们可以在其中评论剪贴簿留言（帖子）。它包括一个竖起大拇指的功能，问题是当我点击竖起大拇指时，整个页面会重新加载。我只想更新显示投票数（喜欢）的标签，而不是别的。我怎样才能做到这一点？这是我的尝试，但不起作用.. ASPX：

```
<asp:ImageButton ID="lnklike" runat="server" ImageUrl="~/Images/thumbsup.png" height="20px" Width="20px" CommandName="like" CommandArgument='<%# Eval("ScrapId")%>'/> &nbsp;
<asp:UpdatePanel ID="UpdatePanel1" runat="Server">
    <Triggers>
        <asp:AsyncPostBackTrigger controlid="lnklike" eventname="click"  />
    </Triggers>
    <ContentTemplate>  <asp:Label ID="Label1" runat="server" Text='<%# Controls_GetUserScraps.abc((int)Eval("ScrapId")) %>' />

protected void GridViewRowCommand(Object sender, GridViewCommandEventArgs e)
{

    var scrapId = Int32.Parse(e.CommandArgument.ToString());

    switch (e.CommandName)
    {
        case "like":

            string chklike = "select likestatus from tbl_like where fromid='" + Session["UserId"] + "' and scrapid='" + scrapId + "'";
            int a = dbo.GetLikesMethod(chklike);
            string chkthumbsdown = "select thumbsdownstatus from tbl_like where fromid='" + Session["UserId"] + "' and scrapid='" + scrapId + "'";
            int b = dbo.GetLikesMethod(chkthumbsdown);

            if (a == 0 && b == 0)
            {
                string sendlike = "insert into tbl_like (ScrapId,FromId,LikeStatus) values('" + scrapId + "','" + Session["UserId"] + "',1)";
                dbo.insert(sendlike);
                //abc(scrapId);
                GetUserScraps(int.Parse(Request.QueryString["Id"].ToString()));
            }
            else if (a != 0)
            {

                Response.Write("already liked");
            }
            else if (b != 0)
            {
                Response.Write("you can not like something you already downvoted!");
            }

            break;
    }
} 
```

获得点赞数/点赞数的方法：

```
public static int abc(int scrpid)
{    
     string getlikes = "select COUNT(*) from tbl_like inner join Scrap on tbl_like.scrapid=Scrap.Id where tbl_like.likestatus=1 and tbl_like.scrapid='" + scrpid + "'";

     dboperation dbo = new dboperation();
     int a = dbo.GetLikesMethod(getlikes);

     return a;
}

public void GetUserScraps(int Id)
{
    string getUserScraps = "SELECT u.Id as UserId,u.firstname,u.ImageName,s.FromId,s.ToId,s.Message,s.SendDate,s.ID as ScrapId FROM [tbl_user] as u, Scrap as s WHERE u.Id=s.FromId AND s.ToId='" + Request.QueryString["Id"].ToString() + "'";
    //string getlikes = "select COUNT(*) from tbl_like inner join Scrap on tbl_like.scrapid=Scrap.Id where tbl_like.likestatus=1 and tbl_like.scrapid='"+<%#DataBinder.Eval(Container.DataItem,"ScrapId")%>+"'";
    //  <%#DataBinder.Eval(Container.DataItem,"ScrapId")%>

    dt = dbClass.ConnectDataBaseReturnDT(getUserScraps);
    if (dt.Rows.Count > 0)
    {
        GridViewUserScraps.DataSource = dt;
        GridViewUserScraps.DataBind();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T21:21:28.413

在网格中，我会添加这样的链接：

```
<asp:TemplateField ItemStyle-Wrap="false" ItemStyle-Width="35px">
    <ItemTemplate>
       <a href="javascript:void(0);" onclick="Link to your javascript method/ajax method">
                                         </a>
    </ItemTemplate>
    <ItemStyle Wrap="False"></ItemStyle>
</asp:TemplateField> 
```

[然后像这样](http://www.unseenrevolution.com/jquery-ajax-post/)使用jquery ajax调用

以 JSON 格式返回新计数并更新标签

阿贾克斯调用

```
function UpdateLikeStatus(imageID, labelid)
{
      $.ajax({
                type: 'POST',
                contentType: "application/json; charset=utf-8",
                url: 'Services/MiscService.asmx/UpdateLikeStatus',
                data: "{'imageid':'" + imageID + "'}",
                dataType: "json",
                success: function (data) {
                    //This is the label you want to update with the new count.

                    $('#labelid').html(data.d);

                }
            });
} 
```

这将是您的 Web 服务调用，也可以在 WCF 服务中使用。要了解如何实现 AJAX 网络服务，请查看[这里](http://www.webreference.com/programming/asp/Ajax_WebService/index.html)

```
[WebMethod(EnableSession = true)]
[ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)]
public string UpdateLikeStatus(string imageid)
{
   string returnedData = "";         
   //Make call to stored procedure that does the update
   returnedData = Storedprocedurecall.UpdateLikeStatus(imageid); //Updates the status and returns a count 
     //Now return the new count.
   return returnedData;  

} 
```

在图像的单击事件或您用来更新类似状态的任何内容上。

```
<img src="" id="genericimage" border="0" onclick="UpdateLikeStatus('<%#Eval("imageid") %>', this);" /> 
```

imageid = 您要更新类似状态的图像的 id

如果你还是不明白，请告诉我。

# linux - 如何延迟管道 netcat 在第一个输入时连接

> ID：15809098
> 
> 赞同：1
> 
> 时间：2013-04-04T10:50:55.083
> 
> 标签：linux, pipe, netcat

在 Ubuntu 下在 bash 中运行：

我有一个可以为我生成一些输出的源，但不是马上。让我们假设它是第一个在套接字上侦听的 netcat: `netcat -l 12345`。

我想将它通过管道传输到传出的 netcat（通过 TCP 连接），例如`netcat -l 12345 | netcat localhost 54321`. 但棘手的一点是，当我运行命令时，我知道在 localhost 54321 上没有监听该传入连接，但我知道当第一个实际字符通过管道到达时会有一个。

所以我的问题是：有没有办法：

*   延迟传出 netcat 的执行，直到第一个字符到达管道，或者
*   延迟传出的 netcat 尝试建立 TCP 连接，直到它收到标准输入上的第一个字符？（在 man 中没有直接的选择，切换到 UDP 是不可接受的）

提前致谢！

编辑：实际上，源比 netcat 更复杂，即它是一个通过各种流修改管道传输的监听 netcat。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T17:15:15.523

使用您已经做过的研究以及我评论过的研究（不知道这是对您自己问题的回答），以下是完整的`delayed_netcat.sh`：

```
#!/bin/bash
read line
netcat "${@}" < <(echo $line ; cat) 
```

这首先等待一行输入，然后使用简单`echo`的“新生成”输入将该行添加到实际的`netcat`. stdin 的其余部分只是使用`cat`which 将其从 slurps重定向`stdin`并将其添加到`netcat`. 它还支持将命令行选项和参数传递给 "real" `netcat`。

用法如下：

```
netcat -l 12345 | cmd1 | cmd2 | ... | ./delayed_netcat.sh localhost 54321 
```

`netcat`延迟到第一行被读取。如果您真的想在第一个字符被读取后启动它`read`并且`echo`需要一些重写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:16:15.173

使用 netcat 进行[端口转发或端口映射：](http://en.wikipedia.org/wiki/Netcat#Port_Forwarding_or_Port_Mapping)

```
ncat -l -p 12345 -c 'ncat localhost 54321' 
```

使用[`socat`](http://linux.die.net/man/1/socat)：

```
socat TCP4-LISTEN:12345 TCP4:localhost:54321 
```

此命令在第一次连接完成后退出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:34:45.337

我找到了我的问题的答案，但它很糟糕......所以仍在寻找更好的东西。

`netcat -l 12345 | gawk '(NR==1){print""}{print;fflush()}' | ./delayed_netcat.sh`

其中`./delayed_netcat.sh`：

```
#!/bin/sh
read line
netcat localhost 12345 
```

因此，通过等待和消耗第一条输入行来`read line`延迟，我曾经在第一条记录之前插入一个空行……我相信这方面还有很大的改进空间！`netcat localhost 12345``gawk '(NR==1){print""}{print;fflush()}'`

# c# - 没有 DateTime?.ToString(string) 重载？

> ID：15809099
> 
> 赞同：7
> 
> 时间：2013-04-04T10:50:55.440
> 
> 标签：c#, datetime

我知道`DateTime`以自定义格式显示 a 的标准过程，如下所示：

`MessageBox.Show(dateSent.ToString("dd/MM/yyyy hh:mm:ss"));`

但是，当我将变量从 a 更改`DateTime`为 a`DateTime?`以接受空值时，我会丢失`ToString(string)`重载的定义。当我从可能具有空值的数据库中读取数据时，我需要使用`DateTime?`它 - 如果数据库中的字段具有空值，那么我也需要为变量分配一个空值。

所以我有两个问题：

1）出于好奇，有谁知道是否有理由`DateTime?`不包含重载 for `ToString(string)`？

2）任何人都可以为我想要实现的目标提出一种替代方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T10:52:11.770

`DateTime?`是语法糖[`Nullable<DateTime>`](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)，这就是为什么它没有`ToString(format)`过载。

但是，您可以使用属性访问底层`DateTime`结构。`Value`但在此之前用于`HasValue`检查该值是否存在。

```
MessageBox.Show(dateSent.HasValue ? dateSent.Value.ToString("dd/MM/yyyy hh:mm:ss") : string.Empty) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-04T11:00:29.083

您可以编写一个扩展方法，而不必每次都手动执行空检查。

```
 public static string ToStringFormat(this DateTime? dt, string format)
 {
      if(dt.HasValue) 
         return dt.Value.ToString(format);
      else
         return "";
 } 
```

并像这样使用它（使用您想要的任何字符串格式）

```
 Console.WriteLine(myNullableDateTime.ToStringFormat("dd/MM/yyyy hh:mm:ss")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T10:52:50.330

你仍然可以使用

```
variableName.Value.ToString(customFormat); 
```

# jsp - BootStrap/JQuery 在页面加载或渲染时调用方法

> ID：15809101
> 
> 赞同：0
> 
> 时间：2013-04-04T10:51:03.583
> 
> 标签：jsp, sorting, backbone.js, twitter-bootstrap

我正在尝试对程序列表进行排序，首先列出“已检查”或包含的程序。但是，我很难使用引导程序并在页面加载时获取要调用的方法。这是一个 .jsp 文件并利用主干和引导程序。

这是我现有的功能，它可以正常工作，但前提是单击排序按钮。

> onSortCheckedClick : function(e) { e.preventDefault(); var 锚点 = $(e.currentTarget);

```
 var li = anchor.parent("li.sortChecked");
            if (li.hasClass("active")) {
                return;
            }

            var sortDirectionOrder = anchor.attr("data-direction");
            var sortDirectionColumn = anchor.attr("data-sortByCheck");
            var attributesNames = sortDirectionColumn.split('.');

            var sortedPrograms = this.programs.sortBy(function(program) {
                var answers = program.toJSON();

                var unChecked = new Array();

                var selectAnswers, unselectAnswers;
                if(answers.selected === true){
                    selectAnswers = answers;
                }else if(answers.selected === false){
                    unselectAnswers = answers;
                }

                return unselectAnswers;
            });

            if (sortDirectionOrder === 'asc') {
                sortedPrograms.reverse();
            }

            this.$("thead li.sortChecked").removeClass("active");
            li.addClass("active");
            this.programs.reset(sortedPrograms);
        }, 
```

这里是注册的事件监听器。呈现程序列表时调用上述方法的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:35:59.373

呈现页面后，您可以调用该函数。

```
$(document).ready(function(){
//Call your function here
//It is assumed your the list of programs are rendered on page load
//-- Otherwise --
// Call renderProgram() and then call or add event listeners to onSortCheckedClick()
}); 
```

在 renderProgram() 完成后，您可以使用 jQuery 延迟对象来处理 onSortCheckedClick 的调用。

在主 html 文件上调用 ready 函数（或将其包含在主 html 文件中）。

# animation - 动画cclayer渐变颜色

> ID：15809112
> 
> 赞同：1
> 
> 时间：2013-04-04T10:51:46.300
> 
> 标签：animation, cocos2d-iphone

有没有办法随着时间的推移为 CCLayerGradient 的颜色设置动画？我正在考虑一些像 CCBezierTo 这样的 CC*** 函数...有什么东西可以为对象的任意值设置动画吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:33:13.253

为此使用[CCActionTween](http://www.learn-cocos2d.com/api-ref/KoboldTouch/latest/cocos2d-iphone/html/interface_c_c_action_tween.html)。它允许您通过提供属性的名称随时间更改属性的值。

仅适用于整数数据类型，如 int、float，但不适用于 CGPoint、CGRect 等结构。但是使用（例如） positionX 和 positionY 属性创建一个类别很容易，它们更新 CGPoint 属性的相应 x/y 值。

# asp.net-mvc - 将 SimpleMembership 与多个应用程序和 OAuthWebSecurity 一起使用

> ID：15809115
> 
> 赞同：1
> 
> 时间：2013-04-04T10:51:54.183
> 
> 标签：asp.net-mvc, simplemembership

我们希望将我们的应用程序转移到使用 ASP.NET MVC 4 中包含的新 SimpleMembership，但我们目前有多个应用程序使用旧成员资格提供程序的 AspNet_Applications 表。

我们希望移动的原因很明显，SimpleMembership 小得多，我们可以直接映射到我们的用户表，而且我们想开始使用 OAuthWebSecurity。

无论如何通过扩展 SimpleMembershipProvider 甚至 ExtendedMembershipProvider 来引入这种支持以允许同一数据库中的多个应用程序。

或者，我们是否应该只编写自己的成员资格，然后我们可以使用 OAuthWebSecurity 而不使用 pages_ 表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T00:13:11.510

用应用程序名称作为用户名前缀会起作用吗？

而不是`user@example.com`您将拥有`5|user@example.com`或您选择的任何格式。只要您每次读取或写入 SimpleMembership 表时都这样做，就可以了。

创建你自己的小抽象包装器，我认为你应该很高兴。如果您发现任何问题都会有兴趣听到它们，因为我也在考虑自己这样做。

# import - 在 Mathematica 中访问多页 TIFF 中的单个图像

> ID：15809120
> 
> 赞同：1
> 
> 时间：2013-04-04T10:52:08.077
> 
> 标签：import, wolfram-mathematica, tiff, multipage

我有 12 个大型（每个 1gb）多页 TIFF 文件，其中包含 1500 个图像，这些图像代表 3D 数据的时间序列。
为了控制内存消耗，我只想从多页 TIFF 文件中读取单个图像，而不是读取所有内容然后只选择所需的文件。
是否有我缺少的导入选项或有其他方法？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:21:35.373

尝试例如：

```
pageNbr = 3;
Import["C:\\test1.tif", {"ImageList", pageNbr}] 
```

# visual-studio-2012 - 使用 Visual Studio 2012 和 TFS 2012 在持续部署中自动更新数据库

> ID：15809122
> 
> 赞同：5
> 
> 时间：2013-04-04T10:52:15.137
> 
> 标签：visual-studio-2012, msbuild

几周前，我使用以下步骤将开发人员的应用程序发布到我们的测试网站。

1.  在解决方案资源管理器中获取最新版本（递归）。
2.  在包管理器控制台中运行更新数据库。
3.  解决方案资源管理器中的“发布...”。

这很有效，但我们决定在构建定义中使用 Continuos 集成来自动化它。我将以下 MSBuild 参数放入构建定义中

```
/p:DeployOnBuild=True
/p:DeployTarget=MsDeployPublish
/p:MSDeployPublishMethod=WMSvc
/p:CreatePackageOnPublish=True
/p:DeployIisAppPath="MyProject-testing"
/p:MsDeployServiceUrl=tfs.mydomain
/p:username=Administrator
/p:password=MYPassw!
/p:AllowUntrustedCertificate=True
/p:SkipExtraFilesOnServer=True 
```

在服务器 tfs.mydomain 上执行一些操作后，应用程序的可执行文件和许多其他文件开始通过构建定义自动出现在服务器上。除了数据库之外的所有内容都开始通过构建定义在服务器上自动刷新。如果不需要更新数据库，该应用程序就可以工作。但有时需要更新。

如何修改上述构建定义以使数据库自动更新，就像我在包管理器控制台中手动使用 Update-Database 所做的那样？

如果你回答，谢谢。

# asp.net-mvc - Web Api 调用在服务器上返回 404

> ID：15809128
> 
> 赞同：4
> 
> 时间：2013-04-04T10:52:24.590
> 
> 标签：asp.net-mvc, asp.net-mvc-4, iis-7, asp.net-web-api

我知道这个网站和其他网站上已经被问过很多次了，但到目前为止我看到的解决方案都没有，所以我来了。

我在 mvc 4 项目中设置了一些 web api 路由。这是一个示例：

```
routes.MapHttpRoute(name: null, routeTemplate: "Client/Accounts/Save", defaults: new { controller = "AccountsApi", action = "SaveAccount" }); 
```

对应如下控制器和动作：

```
public class AccountsApiController : ApiController
{
    [HttpPost]
    public object SaveAccount([FromBody] Account input)
    {
      ..... 
```

这在内置 VS Web 服务器中运行时有效，并且在 IIS7.5 的本地（Windows 7）安装上运行，没有做任何花哨的事情，但在 Server 2008 R2 上的 IIS7 中运行时会给出 404。

信息：

*   MVC4 安装在服务器上
*   该应用程序位于具有集成模式和框架 v4 的应用程序池中

我试过的：

*   玩了足够多的路由，知道这不是路由问题
*   已`<modules runAllManagedModulesForAllRequests="true" />`设置（无论如何都是默认设置）
*   看了[这个](http://geekswithblogs.net/michelotti/archive/2011/05/28/resolve-404-in-iis-express-for-put-and-delete-verbs.aspx)
*   完成 aspnet_regiis -ir 舞蹈
*   自定义错误关闭，编译 debug=false - 如果这些有任何区别。
*   只有自定义 api 路由，没有包罗万象。
*   正如您所料，IIS 日志只显示 404；系统事件日志中没有任何内容

api 仅使用`GET`和`POST`请求，它们都不起作用。可能还值得一提的是，这些调用都是通过 ajax 进行的。

`system.web`, `system.webServer`,`runtime`配置中的部分：

```
<system.web>
    <compilation debug="false" targetFramework="4.0" />
    <customErrors mode="Off" />
    <authentication mode="Forms">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
    <pages>
      <namespaces>
        <add namespace="System.Web.Helpers" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization" />
        <add namespace="System.Web.Routing" />
        <add namespace="System.Web.WebPages" />
      </namespaces>
    </pages>
  </system.web>

<system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <modules runAllManagedModulesForAllRequests="true" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="GET,HEAD,POST,DEBUG,PUT,DELETE,PATCH,OPTIONS" type="System.Web.Handlers.TransferRequestHandler" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="WebGrease" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-1.3.0.0" newVersion="1.3.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime> 
```

任何建议都非常感谢。谢谢。

**更新**

我重新实现了我的一个控制器以仅使用`HttpResponseMessage`和`HttpRequestMessage`

```
[HttpGet]
public HttpResponseMessage GetAccount(HttpRequestMessage message)
{
    message.CreateResponse(.... 
```

在本地运行（在 Win7 上安装 cassini 和完整的 IIS 本地安装）时，这再次按预期工作，但在推送到服务器时失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:50:19.517

更新：我刚刚注意到你说 GET 方法也不起作用，在这种情况下，这个建议可能对你没有用。

尝试将方法的签名更改为

```
[HttpPost]
public HttpResponseMessage SaveAccount(HttpRequestMessage request)
{

} 
```

这将允许您排除操作选择/模型绑定的问题。如果仍然不匹配，那么我建议您打开跟踪编写器并找出它无法找到控制器的原因。[http://nuget.org/packages/Microsoft.AspNet.WebApi.Tracing/](http://nuget.org/packages/Microsoft.AspNet.WebApi.Tracing/)

如果它与上述签名匹配，请查看此博客文章[http://www.bizcoder.com/?p=259](http://www.bizcoder.com/?p=259)，以获取有关如何调试序列化问题的进一步建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T20:35:55.057

无法解决此问题。几乎可以肯定是服务器上没有安装或打开一些不起眼的东西。非常令人沮丧，因为其他 Web API 已经在同一个盒子上工作了。

不能再花时间在上面了，所以只需要使用[Service Stack](https://github.com/ServiceStack/ServiceStack)重新实现，它就可以了。

# python - 通过 python 脚本获取特定系统的详细信息时出错

> ID：15809129
> 
> 赞同：1
> 
> 时间：2013-04-04T10:52:28.630
> 
> 标签：python, win32com

我正在使用[脚本](http://pastebin.com/RXH4b11v)来获取系统详细信息。它在近 1000 个系统中一切正常，但在一个系统中出现以下错误。

```
File "SystemDetails.py", line 36, in __init__
  File "<COMObject WbemScripting.SWbemLocator>", line 5, in ConnectServer
  File "\\sfs\show_time\Showtime_Package\showtime\Modules\x32\win32com\client\dynamic.py", line 272, in _ApplyTypes_
    result = self._oleobj_.InvokeTypes(*(dispid, LCID, wFlags, retType, argTypes) + args)
com_error: (-2147352567, 'Exception occurred.', (0, u'SWbemLocator', u'Not found ', None, 0, -2147217406), None) 
```

当我检查该系统的系统属性时，我发现只有 ram 正在显示。在其余系统中，内存和处理器信息都会显示。供您参考，我附上了我的系统和问题系统的系统详细信息。

![在此处输入图像描述](https://i.stack.imgur.com/Ygoge.jpg) ![在此处输入图像描述](https://i.stack.imgur.com/ewrWL.jpg)

谁能帮我找出问题和解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T06:04:39.480

这可能是因为 WMI 服务损坏。

尝试安装 Microsoft WMI 工具并在注册表中注册 WMI 条目。

这将解决你的问题。

# vb6 - VB6：每个 WebBrowser 控件的不同代理？

> ID：15809132
> 
> 赞同：0
> 
> 时间：2013-04-04T10:52:34.340
> 
> 标签：vb6, webbrowser-control, http-proxy

到目前为止，我从未找到任何文档来为每个`webbowser`控件使用不同的代理。是否有任何可能的破解/调整来使用不同的代理进行不同的`webbrowser`控制？

例如。

```
webbroswer1 proxy = xx.xx.xx.xx:xxx1 
webbroswer2 proxy = xx.YY.xx.xx:xxx2 
webbroswer3 proxy = xx.ZZ.xx.xx:xxx3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:50:09.637

您对 Web 浏览器控件没有太多控制权。您可以在发出请求时为 WinInet 会话设置代理，但这不会通过 Web 浏览器控件公开。

# ember.js - 从 Ember 中的观察者调用控制器内部的函数

> ID：15809134
> 
> 赞同：0
> 
> 时间：2013-04-04T10:52:39.853
> 
> 标签：ember.js

我有一个这样的控制器

```
App.TestController = Ember.ArrayController.extend({
    navigation:[],
    somefunc:function(){
      //do something
    }
}); 
```

并有一个观察者

```
globalvars = Ember.Object.create({
    page : 1,
});

globalvars.addObserver('page', function() {
    this.get('controller.controllers.Test').somefunc();
}); 
```

问题是我无法调用控制器内部的函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:41:35.780

正如我在评论中已经提到的，这里有一个免责声明：

> 您应该更详细地解释您要完成的工作。您正试图以一种奇怪的方式访问控制器。

但是，如果您绝对必须这样做，这里有一种方法：

```
var App = Ember.Application.create({});
// put the global vars into the App object instead of polluting the global namespace
App.globalvars = Ember.Object.create({
    page : 1,
}); 
```

我不会将观察者放在 globalVars 对象中，而是在控制器中声明观察者：

```
App.TestController = Ember.ArrayController.extend({
    navigation:[],
    somefunc:function(){
      //do something
    },
    globalVarsPageObserver : function(){
        this.somefunc();
    }.observes("App.globalvars.page")
}); 
```

# c++ - 使用带有 decltype 和可变参数模板的尾随返回类型的 VS2012 错误

> ID：15809135
> 
> 赞同：1
> 
> 时间：2013-04-04T10:52:42.227
> 
> 标签：c++, visual-c++, c++11

使用 Visual Studio (Nov '12 CTP) 编译一些代码时出现此错误：

```
1>c:\users\*\documents\visual studio 2012\projects\consoleapplication2\consoleapplication2\main.cpp(19): error C2893: Failed to specialize function template 'unknown-type locked_call(Lockable &,Callable,Args &&...)'
1>          With the following template arguments:
1>          'std::mutex'
1>          'main::<lambda_d4c412a6f5bd8d382f54c74dc3b1ff5d>'
1>          '' 
```

这是我的功能的一个简短示例：

```
#include <mutex>
#include <utility>

template <class Lockable, class Callable, typename... Args>
auto locked_call(Lockable &mtx, Callable fn, Args &&... args)
    -> decltype(fn(std::forward<Args>(args)...))
{
    std::lock_guard<Lockable> hold(mtx);
    return fn(std::forward<Args>(args)...);
}

int main()
{
    std::mutex mtx;

    locked_call(mtx, [&] {
    });
} 
```

所以我的问题是：为什么这不能编译？VS11 支持尾随返回类型、可变参数模板和 decltype，但编译器似乎无法获取函数调用的结果类型。

# simulink - 生成代码 Simulink/Stateflow

> ID：15809137
> 
> 赞同：0
> 
> 时间：2013-04-04T10:52:48.167
> 
> 标签：simulink, stateflow

我使用 Simulink 生成 C++ 代码；Simulink 构建`file.exe`但它不运行。问题是：

> 程序无法启动，因为您的计算机缺少 libmx.dill。尝试重新安装程序以解决此问题。

顺便说一句，该文件`libmx.dll`已经存在于 Matlab 路径中。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T23:52:05.993

如果您尝试在 MATLAB 中使用

```
>> system('my.exe'); 
```

它有效吗？

如果是，那么最可能的原因是包含 libmx.dll 的目录不在您的*系统*路径上。

# mongodb - 如何使用 MongoEngine ReferenceField 为 2 个集合使用相同的 ObjectId？

> ID：15809141
> 
> 赞同：0
> 
> 时间：2013-04-04T10:53:00.763
> 
> 标签：mongodb, one-to-one, mongoengine

我有一个相当重的`User`文档类，我想将它分成两部分：文档中的用户个人资料（姓名和头像）和`UserProfile`文档中的其余部分`User`，如下所示（使用 MongoEngine）：

```
from mongoengine import *

class User(Document):
    login = StringField()
    password = StringField()
    posts = ListField(ReferenceField("Post", dbref = False))
    #... a bunch of other fields

class UserProfile(Document):
    name = StringField()
    avatar = URLField() 
```

我希望 UserProfile 和 User 具有相同的 ObjectId，这样我只需要一个 ObjectId 来引用 User 和 UserProfile。毕竟，这实际上是一对一的关系，而且由于用户可以撰写许多帖子，我不想将她的个人资料嵌入帖子本身。创建用户文档时，我会立即创建相应的配置文件，如下所示：

```
john = User.objects.create(login = "john", password = "super!password")
john_profile = UserProfile.objects.create(id = john.id, name = "John Smith",
                avatar = "http://www.example.com/img/photo.jpg") 
```

到目前为止，一切都很好。现在我有一个`Post`文档，其中包含一个`author`引用该`User`文档的字段：

```
class Post(Document):
    author = ReferenceField("User", dbref = False)
    text = StringField() 
```

我想添加一个`author_profile`引用，基于相同的 ObjectId。我试过这个：

```
class Post(Document):
    author = ReferenceField("User", dbref = False)
    author_profile = ReferenceField("User", db_field = "author", dbref = False)
    text = StringField() 
```

但我得到以下异常：

```
mongoengine.base.InvalidDocumentError: Multiple db_fields defined for: author 
```

所以看来我必须“手动”这样做。可能是这样的：

```
class Post(Document):
    author = ReferenceField("User", dbref = False)
    text = StringField()
    @property
    def author_profile(self):
        if hasattr(self, "_author_profile"):
            return self._author_profile
        self._author_profile = UserProfile.objects.get(id = self._data["author"].id)
        return self._author_profile 
```

我想这还不错，但是没有更好的解决方案吗？

谢谢。

注意：我阅读了关于一对一关系的[mongodb 文档，以及](http://docs.mongodb.org/manual/tutorial/model-embedded-one-to-one-relationships-between-documents/)[mongoengine ReferenceField 文档](http://mongoengine-odm.readthedocs.org/en/latest/apireference.html#mongoengine.ReferenceField)，但它对这个特定问题没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:14:28.423

您必须存储相同的 id 两次才能执行此操作：

```
class Post(Document):
    author = ReferenceField("User", dbref = False)
    author_profile = ReferenceField("UserProfile", dbref = False)
    text = StringField() 
```

我不确定这是否会给您的解决方案带来任何好处 - 取消引用的查询数量可能有所改善，但我必须对此进行测试！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:44:15.697

我最终写了这个：

```
def user_profile(reference_name):
    attrib_name = "_" + reference_name + "_profile"
    def user_profile_getter(self):
        if not hasattr(self, attrib_name):
            reference = self._data.get(reference_name, None)
            if not reference:
                return None
            setattr(self, attrib_name, UserProfile.objects.get(reference.id))
        return getattr(self, attrib_name)
    return property(user_profile_getter) 
```

我的`Post`班级现在看起来像这样：

```
class Post(Document):
    author = ReferenceField("User", dbref = False)
    author_profile = user_profile("author")
    text = StringField() 
```

每当我添加`ReferenceField`指向`User`类的 a 时，我也会添加这样的`user_profile`（只读）引用。请注意，如果您只访问`author_profile`，它不会加载`author`，反之亦然。

# php - 排序后mysql中的下一条和上一条记录

> ID：15809142
> 
> 赞同：3
> 
> 时间：2013-04-04T10:53:04.233
> 
> 标签：php, mysql, sql, database, sorting

我有一个名为 users 的简单表，其中包含以下数据：

```
id | hops
 1 | 3
 2 | 1
 3 | 5
 4 | 2
 5 | 6
 6 | 5 
```

我想根据降序排序的跳数进行上一个/下一个导航。我使用以下查询进行降序排序：

```
SELECT * FROM users ORDER BY hops DESC, id DESC 
```

这是结果：

```
id | hops
 5 | 6
 6 | 5
 3 | 5
 1 | 3
 4 | 2
 2 | 1 
```

现在我想要的是，当我在 mysql 查询中输入任何 id 时，我会根据上面的排序获得上一个和下一个 id。例如：

对于 id 5（在这种情况下 id=5 具有最高的跃点，因此之前没有以前的记录）：

```
id (current) | hops (current) | id (prev) | hops (prev) | id (next) | hops (next)
   5         |    6           |  NULL     | NULL        |  6        |  5 
```

对于 id 6：

```
id (current) | hops (current) | id (prev) | hops (prev) | id (next) | hops (next)
   6         |    5           |  5        |     6       |  3        |  5 
```

对于 ID 3：

```
id (current) | hops (current) | id (prev) | hops (prev) | id (next) | hops (next)
   3         |    5           |  6        |    5        |  1        |  3 
```

对于 ID 1：

```
id (current) | hops (current) | id (prev) | hops (prev) | id (next) | hops (next)
   1         |    3           |  3        |    5        |  4        |  2 
```

对于 id 4：

```
id (current) | hops (current) | id (prev) | hops (prev) | id (next) | hops (next)
   4         |    2           |  1        | 3           |  2        |  1 
```

对于 id 2 （在这种情况下 id=2 具有最低的跃点，因此在它之后没有下一条记录）

```
id (current) | hops (current) | id (prev) | hops (prev) | id (next) | hops (next)
   2         |    1           |  4        | 2           |  NULL     |  NULL 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:11:23.207

尝试：

```
select cp.*, n.id id_next, n.hops hops_next
from
(select c.id id_current, c.hops hops_current, p.id id_previous, p.hops hops_previous
 from
 (select * from users where id = ?) c
 left join users p on c.hops < p.hops or (c.id < p.id and c.hops = p.hops)
 order by p.hops, p.id limit 1) cp 
left join users n 
       on cp.hops_current > n.hops or (cp.id_current > n.id and cp.hops_current = n.hops)
order by n.hops desc, n.id desc limit 1 
```

[（这里](http://sqlfiddle.com/#!2/91e19/13)的 SQLFiddle ）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T11:19:06.080

这是迄今为止我见过的最奇怪的用户表。无论如何，这是一种方法（尽管我不得不承认它有点复杂）......

```
DROP TABLE IF EXISTS test;

CREATE TABLE test(id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,hops INT NOT NULL);

INSERT INTO test VALUES
(1 ,3),(2 ,1),(3,5),(4 ,2),(5 ,6),(6 ,5);

SELECT c.id id_curr
     , c.hops hops_curr
     , p.id id_prev
     , p.hops hops_prev
     , n.id id_next
     , n.hops hops_next
  FROM
     (
       SELECT a.*
            , COUNT(*) new_rank
         FROM 
            ( SELECT x.*
                   , COUNT(*) rank 
                FROM test x 
                JOIN test y 
                  ON y.hops >= x.hops 
               GROUP 
                  BY x.id
            ) a
         JOIN 
            ( SELECT x.*
                   , COUNT(*) rank 
                FROM test x 
                JOIN test y 
                  ON y.hops >= x.hops 
               GROUP 
                  BY x.id
            ) b
           ON b.rank < a.rank
           OR (b.rank = a.rank AND b.id >= a.id)
        GROUP 
           BY a.id
     )c
  LEFT
  JOIN
     (
       SELECT a.*
            , COUNT(*) new_rank
         FROM 
            ( SELECT x.*
                   , COUNT(*) rank 
                FROM test x 
                JOIN test y 
                  ON y.hops >= x.hops 
               GROUP 
                  BY x.id
            ) a
         JOIN 
            ( SELECT x.*
                   , COUNT(*) rank 
                FROM test x 
                JOIN test y 
                  ON y.hops >= x.hops 
               GROUP 
                  BY x.id
            ) b
           ON b.rank < a.rank
           OR (b.rank = a.rank AND b.id >= a.id)
        GROUP 
           BY a.id
     ) p
    ON p.new_rank = c.new_rank-1
  LEFT
  JOIN
     (
       SELECT a.*
            , COUNT(*) new_rank
         FROM 
            ( SELECT x.*
                   , COUNT(*) rank 
                FROM test x 
                JOIN test y 
                  ON y.hops >= x.hops 
               GROUP 
                  BY x.id
            ) a
         JOIN 
            ( SELECT x.*
                   , COUNT(*) rank 
                FROM test x 
                JOIN test y 
                  ON y.hops >= x.hops 
               GROUP 
                  BY x.id
            ) b
           ON b.rank < a.rank
           OR (b.rank = a.rank AND b.id >= a.id)
        GROUP 
           BY a.id
     ) n
    ON n.new_rank = c.new_rank+1
 ORDER 
    BY c.hops DESC
     , c.id DESC; 
```

# android - 无法使用phonegap 2.4在android上播放录音

> ID：15809143
> 
> 赞同：0
> 
> 时间：2013-04-04T10:53:05.133
> 
> 标签：android, cordova, audio-recording

我正在尝试使用 phonegap 中的 Media 对象录制音频文件，然后播放它。我录制没有问题，但是当我尝试播放它时，我的应用程序在我的模拟器和设备上都关闭了。在 logcat 上它说：“org.apache.cordova.readyPlayer (AudioPlayer.java) 处的空指针异常”。非常感谢任何愿意帮助我的人，我花了一段时间才意识到我在这里完全迷失了。这是我从[http://docs.phonegap.com/en/2.4.0/cordova_media_media.md.html#media.stopRecord](http://docs.phonegap.com/en/2.4.0/cordova_media_media.md.html#media.stopRecord)复制并在 .stopRecord() 之后添加的代码。如果需要，我可以添加清单和活动，我怀疑问题是否存在，但我可能是错的。 **索引.html：**

```
<script type="text/javascript" charset="utf-8" src="cordova-2.4.0.js"></script>
<script type="text/javascript" charset="utf-8">

// Wait for Cordova to load
//
document.addEventListener("deviceready", onDeviceReady, false);

// Record audio
// 
function recordAudio() {
    var src = "myrecording.amr";
    var mediaRec = new Media(src, onSuccess, onError);

    // Record audio
    mediaRec.startRecord();

    // Stop recording after 10 sec
    var recTime = 0;
    var recInterval = setInterval(function() {
        recTime = recTime + 1;
        setAudioPosition(recTime + " sec");
        if (recTime >= 10) {
            clearInterval(recInterval);
            mediaRec.stopRecord();
            document.getElementById('audio_position').innerHTML = "finished";
            **mediaRec.play();**
        }
    }, 1000);
}

// Cordova is ready
//
function onDeviceReady() {
    recordAudio();
}

// onSuccess Callback
//
function onSuccess() {
    console.log("recordAudio():Audio Success");
}

// onError Callback 
//
function onError(error) {
    alert('code: '    + error.code    + '\n' + 
          'message: ' + error.message + '\n');
}

// Set audio position
// 
function setAudioPosition(position) {
    document.getElementById('audio_position').innerHTML = position;
}

</script> 
```

```
<p id="media">Recording audio...</p>
<p id="audio_position"></p> 
```

尤瓦尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-17T18:35:55.203

我在 Cordova 3.5（使用媒体插件 0.2.11）和 Android 4.4 中发现了同样的问题。解决方法如上所述。基本上这样的事情应该可以解决问题：

```
mediaRec.stopRecord();
src = mediaRec.src;  // if you don't have src defined anymore
mediaRec.release();

mediaPlay = new Media(src, onSuccess, onError);
mediaPlay.play(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-19T17:37:30.050

无需创建其他媒体对象来播放之前录制的文件。只需执行以下操作 - 您必须在录制停止后释放媒体对象：

```
// variable in global scope
var mediaRec = 0;

// function to record an audio
function recordAudio() {
  // create media object for your recording
  mediaRec = new Media("phonegap_rec.amr", onMediaRecordSuccess, onMediaRecordError);
  // start recording
  mediaRec.startRecord();
  // recording for 5 seconds
  var recTime = 0;
    var recInterval = setInterval(function() {
        recTime = recTime + 1;
        if (recTime >= 5) {
            clearInterval(recInterval);
            // stop recording after 5 seconds
            mediaRec.stopRecord();
            // release the media object (THIS IS THE KEY SOLUTION HERE)
            mediaRec.release();
        }
    }, 1000);
}

// function to playback recorded audio
function playRecord() {
  // check if the object exists
  if (mediaRec) {
    // now you can playback the recording
    mediaRec.play();
  }
}
```

# c# - 用 c# 重建 wmi 类

> ID：15809144
> 
> 赞同：1
> 
> 时间：2013-04-04T10:53:08.227
> 
> 标签：c#, .net, wmi, wmi-query, wmi-service

我正在编写 c# 代码来重建 wmi 类。我发现可以借助[此处](http://social.technet.microsoft.com/Forums/en-US/winservergen/thread/96ef98d1-0de1-4fa9-b322-bf150c82cd46/)讨论的这些命令来完成：

```
Regsvr32 %SystemRoot%\System32\wbem\wmidcprv.dll
cd /d %windir%\system32\wbem
for %i in (*.dll) do RegSvr32 -s %i
for %i in (*.exe) do %i /RegServer 
```

我尝试在 cmd 中传递这些命令并将输出读取为：

```
Process objProcess = new Process();
objProcess.StartInfo.UseShellExecute = false;
objProcess.StartInfo.RedirectStandardOutput = true;
//objProcess.StartInfo.CreateNoWindow = true;
//objProcess.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;
string cmd1=@"Regsvr32 %SystemRoot%\System32\wbem\wmidcprv.dll";
string cmd2=@"cd /d %windir%\system32\wbem";
string cmd3=@"for %i in (*.dll) do RegSvr32 -s %i";
string cmd4 = @"for %i in (*.exe) do %i /RegServer";
string strFinal = cmd1 + "\n" + cmd2 + "\n" + cmd3 + "\n" + cmd4;
//string cmd1=@"Regsvr32 %SystemRoot%\System32\wbem\wmidcprv.dll cd /d %windir%\system32\wbem for %i in (*.dll) do RegSvr32 -s %i for %i in (*.exe) do %i /RegServer";
objProcess.StartInfo.FileName = string.Format("cmd.exe");
objProcess.StartInfo.Arguments = string.Format(strFinal);
try
{
objProcess.Start();
}
catch
{
throw new Exception("Error");
}
StreamReader strmReader = objProcess.StandardOutput;
string strTempRow = string.Empty;
while ((strTempRow = strmReader.ReadLine()) != null)
{
    Console.WriteLine(strTempRow);
}
if (!objProcess.HasExited)
{
objProcess.Kill();
} 
```

可以分享一下如何通过代码而不是手动来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:16:38.730

我假设您在执行 ms-dos 命令时遇到问题，而不是读取输出。

您是否尝试过使用这些命令创建批处理文件并使用系统进程类执行它？

首先，使用这些命令创建批处理文件并手动执行它。如果它工作正常，那么只需像以前一样执行它。

System.Diagnostics.Process.Start("wmiBuilder.bat");

# php - 三角形中第三个点的坐标

> ID：15809147
> 
> 赞同：0
> 
> 时间：2013-04-04T10:53:18.950
> 
> 标签：php, geometry, cartesian-coordinates

给定：

```
Point A (a1,b1)
Point B (a2,b2)
Distance between A and B
Distance between A and C
Angle between AB and AC = 90deg 
```

必须找到： `C(a3,b3)`

我有 2 个点 A(x,y) 和 B(p,q) 的坐标，但想找到第三个点 C(m,n) 的坐标。
我知道 A 和 B、A 和 C 之间的距离，以及 A 和 C 之间的角度是 90 度。
我知道这是简单的毕达哥拉斯定理。但是我如何在 php 中实现它，公式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:07:37.230

设为 A`$x,$y`和`$p,$q`B 的给定坐标，进一步调用`$d`A 和 C 之间`$d0`的已知距离以及 A 和 B 之间的已知距离。通过做一些数学运算，您可以得到以下公式（这里我直接在 PHP 中实现） ：

```
$m = $x + ($q - $y) * $d / $d0;
$n = $y - ($p - $x) * $d / $d0; 
```

还有第二种解决方案：

```
$m = $x - ($q - $y) * $d / $d0;
$n = $y + ($p - $x) * $d / $d0; 
```

**编辑：**这是我得到方程的方法：我将具有坐标 的向量 AB 旋转`($p - $x, $q - $y)`90 度以获得`($q - $y, -($p - $x))`和`(-($q - $y), $p - $x)`（取决于顺时针还是逆时针），然后通过缩放向量 AC `$d / $d0`（比例为它们的长度）。现在我只是将向量转换`($x, $y)`为 get `($m, $n)`。

也许这可以通过在 PHP 甚至整个库中使用矢量类来更优雅地实现，但我认为对于这个简单的计算，“手动”实现它要容易得多。

# css - 变换和滑动动画在 Chrome 中不起作用

> ID：15809149
> 
> 赞同：1
> 
> 时间：2013-04-04T10:53:26.393
> 
> 标签：css

我正在尝试创建一个动画，其中第三个菜单项的文本在悬停时从左侧滑入。动画似乎可以正常工作，因为我可以看到颜色的变化，但幻灯片效果不起作用。

我现在只在 chrome 中测试网站。

```
<article class="home">

<nav class="topmenu">
    <ul>
        <li><a href="#"><span class="icon">1.</span><span class="menuname">MenuItem1</span></a></li>
        <li><a href="#"><span class="icon">2.</span><span class="menuname">MenuItem2</span></a></li>
        <li><a href="#"><span class="icon">3.</span><span class="menuname">MenuItem3</span></a></li>
        <li><a href="#"><span class="icon">4.</span><span class="menuname">MenuItem4</span></a></li>
    </ul>
</nav>

</article> 
```

这是我正在使用的 CSS。

```
* {
    margin:0;
    padding:0;
}

html{
    height:100%;
    width:100%;
}

body{
    margin:0 auto;
    font-family: Tahoma, Geneva, sans-serif;
    height:100%;
    width:100%;
    overflow:hidden;
    background:#006;
    color: white;
}

.main{
    height:100%;
    width:100%;
    position:relative;
    border: thin solid #FFF;
}

.home .topmenu ul li{
    list-style-type: none;
    float:left;
    margin-right:3px;
    background:#450000;
}

.home .topmenu ul li a{
    position:relative;
    padding:10px 10px 10px 10px;
    display: inline-block;
    text-decoration:none;
    color:#f8d575;
}

.home .topmenu ul li .icon{
    position: relative;
    color:#FFF;
}

.home .topmenu ul li:nth-of-type(3):hover a .menuname{
    -webkit-animation: menuname3 2s linear 0s 1 forwards;
    -moz-animation: menuname3 2s linear 0s 1 forwards;
    -o-animation: menuname3 2s linear 0s 1 forwards;
    animation: menuname3 2s linear 0s 1 forwards;
}

@-webkit-keyframes menuname3{
    from{
        left:-1000px;
    }

    to{
        left:auto;
        color:#dfdeae;
        -webkit-transform: scale(5);
    }
} 
```

有人可以告诉我为什么即使颜色变化有效，幻灯片和变换也不起作用。 [http://jsfiddle.net/fHWDK/](http://jsfiddle.net/fHWDK/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T10:59:31.510

这是因为对元素`left`不做任何事情。`position:static`动画都在这里工作，我敢肯定这不是你想要的样子:)

[jsFiddle](http://jsfiddle.net/Tyriar/6SXVd/)

```
#topmenu ul li:nth-of-type(3) {
    position:relative;
}
li:nth-of-type(3) .menuname {
    position:absolute;
    left:-1000px;
} 
```

# ruby-on-rails - RoR 中的 ActiveRecord 和映射

> ID：15809150
> 
> 赞同：0
> 
> 时间：2013-04-04T10:53:27.543
> 
> 标签：ruby-on-rails, arrays, activerecord, map

我选择

```
m_repeats = Event.where(:repeat => 'monthly').where("schedule < ?", date.end_of_month) 
```

然后我需要更改每个元素中的时间段（它是日期字段）。

我尝试这样做：

```
m_repeats.map{ |elem| elem.schedule.year = date.today.year, elem.schedule.month = date.today.month } 
```

但我得到错误：

```
Mysql2::Error: Unknown column 'schedule' in 'where clause': SELECT `events`.* FROM `events`  WHERE `events`.`repeat` = 'monthly' AND (schedule < '2013-04-30') 
```

或未定义的方法 `schedule' 用于#

什么是正确的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:05:21.353

尝试只使用一个 where 语句，例如

```
m_repeats = Event.where('events.repeat = ? AND events.schedule < ?', 'monthly', date.end_of_month) 
```

或在计划列上明确命名您的查询表，例如

```
m_repeats = Event.where(:repeat => 'monthly').where("events.schedule < ?", date.end_of_month) 
```

我不认为您的 map 方法导致了问题，因为事件的选择发生在 map 方法的调用中，并且您在选择查询中遇到了明显的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:47:12.593

这真的是语法错误:) 'schedule' 而不是 'shedule'

# prolog - SWI Prolog 上的 Trivia Champions 逻辑谜题

> ID：15809155
> 
> 赞同：0
> 
> 时间：2013-04-04T10:53:39.127
> 
> 标签：prolog

我是使用 swi Prolog 的新手，现在我正在尝试使用 Prolog [http://www.allstarpuzzles.com/logic/00335.html解决这个逻辑难题](http://www.allstarpuzzles.com/logic/00335.html)

但是当我尝试运行该程序时，该程序似乎停止响应并且 Prolog 冻结。看来我在确定每支球队的得分时遇到了问题。这是我的 Prolog 代码：

```
team(dirtydozen).
team(plough).
team(barflyers).
team(threestooges).
team(friends).

pub(maid).
pub(old).
pub(clown).
pub(king).
pub(queen).

score(75).
score(74).
score(73).
score(72).
score(71).
score(70).
score(69).
score(68).
score(67).
score(66).
score(65).
score(64).
score(63).
score(62).
score(61).
score(60).

solve :-
  score(Score1),score(Score2),score(Score3),score(Score4),score(Score5),
  pub(Pub1),pub(Pub2),pub(Pub3),pub(Pub4),pub(Pub5),

  Hasil = [[dirtydozen,Pub1,Score1],
       [plough,Pub2,Score2],
       [barflyers,Pub3,Score3],
       [threestooges,Pub4,Score4],
       [friends,Pub5,Score5]],
 Score1 is Score2 + 6,
 Score1 is Score3 + 9,
 \+ member([threestooges,maid,_],Hasil),

 member([friends,_,A],Hasil),
 member([_,old,B],Hasil),
 member([_,clown,C],Hasil),
 member([_,king,D],Hasil),
 (A-B) is 2*(C-D),
 member([_,queen,E],Hasil),
 member([threestooges,_,F],Hasil),
 F >= E+3. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:00:01.170

几乎是对的。只有四个问题。;-) 首先，这是一个几乎可以工作的版本：

```
team(dirtydozen).
team(plough).
team(barflyers).
team(threestooges).
team(friends).

pub(maid).
pub(old).
pub(clown).
pub(king).
pub(queen).

score(75).
score(74).
score(73).
score(72).
score(71).
score(70).
score(69).
score(68).
score(67).
score(66).
score(65).
score(64).
score(63).
score(62).
score(61).
score(60).

solve(Hasil) :-
    Hasil = [[dirtydozen,Pub1,Score1],
         [plough,Pub2,Score2],
         [barflyers,Pub3,Score3],
         [threestooges,Pub4,Score4],
         [friends,Pub5,Score5]],
    member([friends,_,A],Hasil),
    member([_,old,B],Hasil),
    member([_,clown,C],Hasil),
    member([_,king,D],Hasil),
    member([_,queen,E],Hasil),
    member([threestooges,_,F],Hasil),
    \+ member([threestooges,maid,_],Hasil),
    score(Score2),
    Score1 is Score2 + 6,
    score(Score3),
    Score1 is Score3 + 9,
    score(Score1),
    score(Score4),
    score(Score5),
    AB is A-B,
    AB is 2*(C-D),
    F >= E+3,
    pub(Pub1),
    pub(Pub2),
    pub(Pub3),
    pub(Pub4),
    pub(Pub5). 
```

几乎，因为它提供了解决方案，而且速度很快，并且根据您的规范它们是正确的。但是，有很多，那是因为您没有指定所有酒吧/团队/分数必须彼此不同，例如

```
[[dirtydozen,old,75],[plough,clown,69],[barflyers,queen,66],
 [threestooges,king,75], [friends,old,63]] 
```

是一个解决方案，即使“旧”和“75”在其中两次。如果您使用的是 SWI，`all_different`则从 clp_fd 包中添加调用或手动执行：

```
A \= B, A \= C, ... B \= C etc. 
```

现在，关于冻结：这只是因为您的子句排序不理想。先看看`score`s 和`pub`s。在`solve`谓词的前两行中，这两者的所有可能排列都分配给`Score[N]`and`Pub[N]`变量。尝试计算有多少可能的分配！只有这样，您的程序才会继续检查相关分配是否符合规则。

通过重新排序您的条件，我从一开始就排除了大量的作业。以这些行为例：

```
score(Score1), score(Score2), Score1 is Score2 + 2,... 
```

这可以像这样评估：

```
Score1 = 75, Score2 = 75, 75 is 75+2? 
Score1 = 74, Score2 = 75, 74 is 75+2? 
Score1 = 73, Score2 = 75, 73 is 75+2? 
Score1 = 72, Score2 = 75, 72 is 75+2? 
... 
```

总而言之，必须检查 Score1 和 Score2 的多达 225 个组合，以查看它们是否是正确的分配。

现在让我们考虑重新排序的版本：

```
score(Score2), Score1 is Score2 + 2, score(Score1),... 
```

评估现在沿着这些路线进行：

```
Score2 = 75, Score1 = 77, score(77)?
Score2 = 74, Score1 = 76, score(76)?
Score2 = 73, Score1 = 75, score(75)? 
```

我们只剩下 15 个有效的作业。所以规则是：尝试将这些变量相互固定，以免树过度展开。修复移动目标！

仅有的两个其他小问题：1)`(A-B) is 2*(C-D)`不起作用，因为它指出，评估的结果`2*(C-D)`必须不是整数，而是形式的术语`(A-B)`。引入一个中间变量来解析。2）你没有让`solve`return 任何有用的东西，所以它只说`true`. 不知道这是不是你想要的。;-)

# c++ - 为什么“std::vector”的大小是 “ 16 字节？

> ID：15809157
> 
> 赞同：13
> 
> 时间：2013-04-04T10:53:41.040
> 
> 标签：c++, vector, boolean

我正在使用 memcpy 将 std:vectors<> 的内容复制到原始数组。对于 int、float、double 等数据类型，它运行良好。当我开始复制一个布尔向量时，我遇到了一个问题，即我得到了奇怪的值。

首先，我开始为浮点向量制作测试输出：

```
std::vector<float> test1 (3,0);

cout << "Sizeof test1[0] : " << sizeof(test1[0]) << endl
     << "Memoryaddress 0: " << &test1[0] << endl
     << "Memoryaddress 1: " << &test1[1] << endl
     << "Memoryaddress 2: " << &test1[2] << endl; 
```

输出是：

```
Sizeof test1[0]: 4
Memoryaddress 0: 02793820
Memoryaddress 1: 02793824
Memoryaddress 2: 02793828 
```

这就是我所期望的。浮点大小为 4 字节，到下一个浮点值的距离为 4 字节。当我为 bool 执行此操作时，输出如下所示：

```
std::vector<bool> test (3,0);

cout << "Sizeof test[0]: " << sizeof(test[0]) << endl
     << "Memoryaddress 0: " << &test[0] << endl
     << "Memoryaddress 1: " << &test[1] << endl
     << "Memoryaddress 2: " << &test[2] << endl; 
```

输出是：

```
Sizeof test[0]: 16
Memoryaddress 0: 011EF94C
Memoryaddress 1: 011EF93C
Memoryaddress 2: 011EF92C 
```

为什么 bool 的大小是 16 Byte？对我来说，这似乎完全是矫枉过正。对此有解释吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-04T11:01:19.397

与 的其他特化不同`vector`，`vector<bool>`它不管理`bool`对象的动态数组。相反，它应该将布尔值打包成一个位。

由于单个位不可寻址，`test[0]`因此不能简单地引用`bool`. 相反，它是一个类类型`vector<bool>::reference`，可以转换为`bool`（以获取值），并从中分配`bool`（以修改向量元素）。

这意味着它`vector<bool>`不完全满足标准容器的要求，并且如果您需要对其元素的引用或指针，则不能使用它。如果您确实需要一个带有可寻址元素的“真实”容器，请考虑`vector<char>`或`deque<bool>`改为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T10:58:11.963

`std::vector<bool>`是向量的特殊版本，针对空间进行了优化。

*   存储不一定是 bool 值的数组，但库实现可以优化存储，以便每个值都存储在单个位中。
*   元素不是使用分配器对象构造的，但它们的值直接设置在内部存储的适当位上。

更多信息：[http ://www.cplusplus.com/reference/vector/vector-bool/](http://www.cplusplus.com/reference/vector/vector-bool/)

# internet-explorer - 在新的 IE 窗口中打开 JWebBrowser 中的链接？

> ID：15809162
> 
> 赞同：1
> 
> 时间：2013-04-04T10:53:52.090
> 
> 标签：internet-explorer, window, jwebbrowser

我在 Swing 应用程序中使用 JWebBrowser 作为组件。当我单击 JWebBrowser 中的链接时，它会打开一个新窗口（window.open() javascript），但由 Swing 组件包装。我希望它在 IE 浏览器中打开！JWebBrowser 是否有任何属性允许这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-20T07:03:05.940

我有类似的问题，大部分代码取自原始示例： [http ://djproject.cvs.sourceforge.net/viewvc/djproject/DJNativeSwing-SWTDemo/src/chrriis/dj/nativeswing/swtimpl/demo/examples/ webbrowser/NavigationControl.java?pathrev=R-1_0_1](http://djproject.cvs.sourceforge.net/viewvc/djproject/DJNativeSwing-SWTDemo/src/chrriis/dj/nativeswing/swtimpl/demo/examples/webbrowser/NavigationControl.java?pathrev=R-1_0_1)

```
browser.addWebBrowserListener(new WebBrowserAdapter() {

    public void windowWillOpen(WebBrowserWindowWillOpenEvent e) {
        // get the new swing window
        final JWebBrowser newBrowser = e.getNewWebBrowser();
        newBrowser.addWebBrowserListener(new WebBrowserAdapter() {

            @Override
            public void locationChanging(WebBrowserNavigationEvent newEvent) {
                // launch default OS browser
                if (Desktop.isDesktopSupported()) {
                    Desktop desktop = Desktop.getDesktop();

                    if (desktop.isSupported(Desktop.Action.BROWSE)) {
                        try {
                            desktop.browse(new URI(newEvent.getNewResourceLocation()));
                        } catch (Exception ex) {}
                    }
                }
                newEvent.consume();

                // immediately close the new swing window
                SwingUtilities.invokeLater(new Runnable() {

                    public void run() {
                        newBrowser.getWebBrowserWindow().dispose();
                    }
                });
            }
        });
    }
}); 
```

# php - 使用 jQuery 上传文件

> ID：15809170
> 
> 赞同：0
> 
> 时间：2013-04-04T10:54:12.973
> 
> 标签：php, jquery, html, ajax, upload

我有一个关于使用 Ajax 上传文件的问题。如何在`$.ajax()` 没有特殊 js-plugin 的情况下提交文件？：

```
<form action="javascript:return false;">
    <input type="text" id="name" />
    <input type="file" id="myfile" />
    <input type="button" id="submitbutton" value="submit" />
</form> 
```

这是一个jQuery小代码：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#submitbutton').click(function() {
            $.ajax({
                type: 'POST',
                dataType: 'json',
                enctype: 'multipart/form-data',
                url: 'upload.php',
                async: false,
                data: {
                    'name': $('#name').val(),
                    'myfile': $('#myfile').val()
                },
                success: function(data) {
                    alert(data.msg);
                }
            });
        });
    });
</script> 
```

并上传.php 文件：

```
<?php
$name = isset($_POST['name']) ? $_POST['name'] : '';
if (isset($_FILES) && isset($_FILES["file"])) {
    $files = $_FILES['file'];
    $error = isset($files["error"]) ? $files["error"] : '';
    $fname = isset($files["name"]) ? $files["name"] : '';
    $type = isset($files["type"]) ? $files["type"] : '';
    $size = isset($files["size"]) ? $files["size"] : '';
    $tmp_name = isset($files["tmp_name"]) ? $files["tmp_name"] : '';
    return array('msg' => "Hello, $name! \nYour file data:\nErr: $error, Name: $fname, Type: $type, Size: $size, Tmp: $tmp_name");
}
echo json_encode(array('msg' => 'create image'));
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:05:44.930

无法通过 ajax 上传文件。您可能需要查看支持文件上传的表单插件：http: [//jquery.malsup.com/form/](http://jquery.malsup.com/form/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:04:09.373

其他选项是使用`iframe,` [这是一个这样做的教程](http://www.alfajango.com/blog/ajax-file-uploads-with-the-iframe-method/)；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T11:06:02.620

如果您希望获得这个工作的跨浏览器，那么您不能仅使用 AJAX 来做到这一点。（但您可以，这不适用于所有浏览器，您可以在[这里](https://stackoverflow.com/a/9622978/1558311)查看如何使用 XMLHttpRequest 和 jquery 上传文件）

至于我，最好的办法是使用[jQuery Forms](http://www.malsup.com/jquery/form/)插件。

另一种选择是执行插件手动执行的相同操作。

它将如下所示：

```
var ifrm = $("<iframe>", {id:"tmp_upload_frame"}).onload(function() {
  // do something when response is returned
}).hide();
$("body").append(ifrm);
$("form").prop("target", "tmp_upload_frame")
         .prop("enctype","multipart/form-data")
         .submit(); 
```

但对我来说，Forms 插件要好得多，因为它的接口与 ajax 接口非常相似，并且为你做了很多脏活（比如从 iframe 检索响应）。

# sql-server - 关于使用 SQL Server Reporting MS SQL Server 2008 开发报表

> ID：15809171
> 
> 赞同：0
> 
> 时间：2013-04-04T10:54:16.847
> 
> 标签：sql-server, reporting-services

我正在尝试设计一个报告，其中报告将包含以下数据字段。关系是每个 test_id 有 n 个文档，所以我尝试在每个 test_id 下拉。

当我单击加号 (+) 时，它会打开下拉菜单并列出 test_id 的所有单独条目。

我知道我们需要按列进行分组，我已经在 Test_id 列上进行了分组，报告预览显示数据但不正确。因此请求所有我想知道的如何使下拉菜单从基本开始就正常工作。

```
#Test_id#         #Document_id#       #DocumentName#
   1                10                ScannedDoc
                    11                Handwritten

   2                100                Imagefile
                    111                WordDoc 
```

# jquery - 来自外部列表的全日历滚动

> ID：15809173
> 
> 赞同：1
> 
> 时间：2013-04-04T10:54:21.933
> 
> 标签：jquery, fullcalendar, jquery-draggable

从外部列表拖动事件到它时，我试图让 Fullcalendar 视图滚动。

首先日历根本没有滚动，但我通过设置`appendTo`比`body`.

```
appendTo: ".fc-agenda-slots tbody" 
```

它现在可以正常工作，因为视图正在正确滚动，但是事件将“登陆”的日历中的目标区域不会跟随鼠标/事件。如果我向下滚动 1 页并删除事件，则该事件将被删除 ~1 页，位于当前不可见的区域。如果我向上滚动，我可以再次找到目标区域，但我可以直观地确认它与我正在拖动的事件不同步。

有没有人遇到过类似的问题或对全日历有所了解？

# matlab - 在 matlab 中使用 parfor 生成格状 Boltzmann 代码

> ID：15809175
> 
> 赞同：2
> 
> 时间：2013-04-04T10:54:28.300
> 
> 标签：matlab, parallel-processing, parfor

我正在研究 lattice boltzmann 方法，并且我已经编写了一个 matlab 代码。我想并行化代码的某些部分，但我是新手，所以我很感激你的帮助。我想知道这部分是否可以使用 parfor （碰撞运算符）：

```
for i=1:lx
    for j=1:ly
        fork=1:9
           f(k,i,j)=f(k,i,j) .* (1 - omega) + omega .* feq(k,i,j);

         end
    end
end 
```

我试图用 parfor 替换最外层的 for 循环，但代码似乎更慢。

有什么建议么？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T16:46:01.670

您应该能够使用一行代码完成整个操作，而无需循环：

```
f = f.*(1 - omega) + omega .* feq; 
```

在我有 2 个内核的计算机上，从以下内容开始：

```
f = rand(9,400,400);
feq = rand(9,400,400);

[lx,ly,lz] = size(f);

omega = rand(1); 
```

您的循环需要 0.087933 秒，parfor 循环需要 1.166662 秒，而此方法需要 0.009388 秒。如果可以，请始终矢量化您的代码。

# visual-studio - 火鸟没有数据

> ID：15809176
> 
> 赞同：1
> 
> 时间：2013-04-04T10:54:29.633
> 
> 标签：visual-studio, entity-framework-5, firebird

我在 Visual Studio 2012 项目中使用旧版 Firebird 数据库。我安装了 NETProvider 和 DDEXProvider。我想使用实体框架，但我看不到表名等。我尝试连接到本地数据库（database.fdb），当我测试连接时它成功。但是，我得到了所有类别（表、视图、过程、系统表等），但是当我尝试打开一个项目时，项目不显示。我已经安装了 Flamerobin，并且数据库按预期打开。如图所示，我使用标准登录 SYSDBA - masterkey。

希望你能解决这个问题。

提前谢谢了。

# android - 将 BROWSABLE 意图类别应用于广播接收器

> ID：15809180
> 
> 赞同：3
> 
> 时间：2013-04-04T10:54:43.760
> 
> 标签：android

[我在commonsware 样本](https://github.com/commonsguy/cw-advandroid/blob/master/Introspection/URLHandler/AndroidManifest.xml)中查找了以下意图过滤器的活动

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />

    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />

    <data
        android:host="www.this-so-does-not-exist.com"
        android:path="/something"
        android:scheme="http" />
</intent-filter> 
```

但是，相同的意图过滤器在应用于广播接收器时不起作用。

您能否指出是否可以将其应用于广播接收器，如果可以，在哪里寻找修复？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T16:48:49.900

正如官方文档所说：

> ... Intent 广播机制 .. 与用于使用 Context.startActivity() 启动活动的 Intent 完全分开。BroadcastReceiver 无法查看或捕获与 startActivity() 一起使用的 Intent；同样，当你广播一个 Intent 时，你永远不会找到或启动一个 Activity。这两个操作在语义上是非常不同的：使用 Intent 启动一个 Activity 是一个前台操作，它会修改用户当前正在与之交互的内容；广播 Intent 是用户通常不知道的后台操作。

来源：[Android 开发者文档，BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

希望这说明清楚。

# qooxdoo - qooxdoo : 菜单条的布局

> ID：15809190
> 
> 赞同：0
> 
> 时间：2013-04-04T10:55:12.297
> 
> 标签：qooxdoo

在 qooxdoo using 中`qx.Desktop`，我制作了一个菜单条，如下所示： ![qooxdoo 中的菜单条](https://i.stack.imgur.com/4MWPR.jpg)

如何修改这样的`qx.ui.window.Window`布局？（我用 CSS 解决）

![JavaScript 中的菜单条](https://i.stack.imgur.com/Ybzk4.jpg)

当前qooxdoo来源：

```
qx.Class.define("my_project.gameui.MainGameMenu",
{
  extend : qx.ui.window.Window,

    construct : function()
    {
      this.base(arguments, "MainGameMenu");
      // hide the window buttons
      this.setShowClose(false);
      this.setShowMaximize(false);
      this.setShowMinimize(false);
      // adjust size
      this.setWidth(400);
      this.setHeight(80);

      this.getChildControl("captionbar").setVisibility("excluded");

      var layout = new qx.ui.layout.Grid(0,0);
      this.setLayout(layout);
      var toolbar = new qx.ui.toolbar.ToolBar();
      this.add(toolbar, {row: 0, column: 0});

      var btn_status    = new qx.ui.toolbar.Button("STATUS");
      var btn_backpack  = new qx.ui.toolbar.Button("BACKPACK");
      var btn_crew      = new qx.ui.toolbar.Button("CREW");
      var btn_social    = new qx.ui.toolbar.Button("SOCIAL");
      var btn_mission   = new qx.ui.toolbar.Button("MISSION");
      var btn_system    = new qx.ui.toolbar.Button("SYSTEM");
      btn_status.setWidth(80);
      btn_status.setHeight(80);
      toolbar.add(btn_status);
      toolbar.add(btn_backpack);
      toolbar.add(btn_crew);
      toolbar.add(btn_social);
      toolbar.add(btn_mission);
      toolbar.add(btn_system);
    }
}); 
```

看来我还远未完成。我需要删除此菜单条的默认布局并添加我自己的样式。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T17:49:49.943

这应该类似于您的屏幕截图，并为您提供进一步调整的良好起点：

像这样编辑你的`Appearance.js`：

```
qx.Theme.define("my_project.theme.Appearance",
{
  extend : qx.theme.modern.Appearance,

  appearances :
  {
    "mywindow":
    {
      style : function(states)
      {
        return {
          paddingRight: 15,
          paddingLeft: 15,
          decorator: "horizontalrule"
        };
      }
    },

    "mybutton":
    {
      style : function(states)
      {
        return {
          padding: 10,
          marginBottom: 1,
          textColor: "blue",
          decorator: "redbox"
        };
      }
    }
  }
}); 
```

然后像这样编辑你`Decoration.js`：

```
qx.Theme.define("my_project.theme.Decoration",
{
  extend : qx.theme.modern.Decoration,

  decorations :
  {
    "horizontalrule":
    {
        decorator : [
          qx.ui.decoration.MSingleBorder
        ],

        style:
        {
          widthBottom: 1,
          colorBottom: "black"
        }
    },

    "redbox":
    {
        decorator : [
          qx.ui.decoration.MSingleBorder
        ],

        style:
        {
          width: 1,
          color: "red"
        }
    }
  }
}); 
```

最后，您必须在小部件上设置外观：

```
qx.Class.define("my_project.gameui.MainGameMenu",
{
  extend : qx.ui.window.Window,

    construct : function()
    {
      this.base(arguments, "MainGameMenu");

      ...
      // reset appearance
      // (could also be done by defining an additional appearance like before)
      toolbar.setAppearance("");
      ...
      btn_status.setAppearance("mybutton");
      btn_backpack.setAppearance("mybutton");
      btn_crew.setAppearance("mybutton");
      btn_social.setAppearance("mybutton");
      btn_mission.setAppearance("mybutton");
      btn_system.setAppearance("mybutton");
      ...
      this.setAppearance("mywindow");
      ... 
```

一些注意事项：

*   `mywindow`, `mybutton`, `horizontalrule`,`redbox`当然是任意字符串
*   而不是`"black"`你也可以从当前使用的主题 [1] 中编写`"#000"`甚至是字符串`Color.js`
*   这只是一个起点，因为我们现在已经覆盖了工具栏按钮的所有状态（悬停、按下、禁用...）。将`style`函数的原始框架代码从 [2] 复制到您的 中`Appearance.js`，将其与您自己的 return 语句合并并根据您的需要进行调整。

深入了解代码/手册：

*   [1] [https://github.com/qooxdoo/qooxdoo/blob/master/framework/source/class/qx/theme/modern/Color.js](https://github.com/qooxdoo/qooxdoo/blob/master/framework/source/class/qx/theme/modern/Color.js)
*   [2] [https://github.com/qooxdoo/qooxdoo/blob/master/framework/source/class/qx/theme/modern/Appearance.js#L1441](https://github.com/qooxdoo/qooxdoo/blob/master/framework/source/class/qx/theme/modern/Appearance.js#L1441)

一般主题：

*   [http://manual.qooxdoo.org/current/pages/desktop/ui_theming.html](http://manual.qooxdoo.org/current/pages/desktop/ui_theming.html)
*   [http://manual.qooxdoo.org/current/pages/desktop/ui_custom_themes.html](http://manual.qooxdoo.org/current/pages/desktop/ui_custom_themes.html)

更详细：

*   [http://manual.qooxdoo.org/current/pages/desktop/ui_decorators.html](http://manual.qooxdoo.org/current/pages/desktop/ui_decorators.html)
*   [http://manual.qooxdoo.org/current/pages/desktop/ui_appearance.html](http://manual.qooxdoo.org/current/pages/desktop/ui_appearance.html)

# python - 从文件中读取多维字符串数组

> ID：15809195
> 
> 赞同：0
> 
> 时间：2013-04-04T10:55:29.770
> 
> 标签：python, arrays, file

我想从文件（.txt 或 .out）中读取包含特殊字符的字符串值的多维列表。然后我必须读取第一行的第一个值并与同一行的第二个值进行比较。

像：

```
[
        ["this","why this7656^"]
        ["@this","whAy @this code"],
        ["is ", "this@@#@# code is complex"],
        ["@#@#", "Test@#@#his Test"]
    ] 
```

我的问题是如何提取这些价值。值必须以这种格式读取 - <"this">

我尝试拆分/加入，但无法获得确切的一个字符串（要么给出整行，要么逐个字符拆分）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:02:51.727

这是不好的做法 - 使用 'eval' - 但它是解决问题的最简单方法。您只需保证您将评估的语句是安全且正确的 Python 代码**。**试试这个：

```
with open('Path/to/file', 'r') as content_file:
    content = content_file.read()
    data = eval(content)
    print ['<%s>' % x[0] for x in l] 
```

检索到 Python 集合后，我希望为您提取所需的数据项不会有问题。

**UPD：**另一种方式 - 使用 '["(.*?)"' 之类的正则表达式 - 它会匹配任何以 "[" 开头的字符串，后跟不带分隔符的双引号字符。之后，我用另一个双引号符号指定了非贪婪模式和封闭表达式。不确定这会是更可取的方法，但它确实发生了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:49:13.763

您的示例字符串看起来像[JSON](http://json.org/)。

使用 Python [JSON 模块](http://docs.python.org/2/library/json.html)对其进行解码：

```
with open('Path/to/file', 'r') as content_file:
    content = content_file.read()
    data = json.loads(content) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:05:41.627

```
>>> import ast
>>> text = '''[
        ["this", "why this7656^"],
        ["@this", "whAy @this code"],
        ["is ", "this@@#@# code is complex"],
        ["@#@#", "Test@#@#his Test"]
    ]'''
>>> ast.literal_eval(text)
[['this', 'why this7656^'], ['@this', 'whAy @this code'], ['is ', 'this@@#@# code is complex'], ['@#@#', 'Test@#@#his Test']] 
```

# php - 更新sql表时递归发送电子邮件

> ID：15809198
> 
> 赞同：0
> 
> 时间：2013-04-04T10:55:39.153
> 
> 标签：php, mysql, email, send

我有以下查询：

```
UPDATE
    users AS t
    LEFT JOIN (
        SELECT
          user
        FROM
               facebook, users
        WHERE
            facebook.user = users.id
        GROUP BY
           users.id
    ) AS m ON
        m.user = t.id
SET
   t.coins =t.coins+200
WHERE
  m.user = t.id 
```

我需要帮助来创建一个 php 脚本，该脚本必须实际向我更新硬币数量的用户发送电子邮件。电子邮件字段在用户表中。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:23:53.293

选择您需要的所有行：

```
SELECT
t.id, t.email
FROM
    users AS t
    LEFT JOIN (
        SELECT
          user
        FROM
               facebook, users
        WHERE
            facebook.user = users.id
        GROUP BY
           users.id
    ) AS m ON
        m.user = t.id
WHERE
  m.user = t.id 
```

然后更新 PHP 循环中的每一行，您也可以在其中发送邮件。

**更新**

所以让我们想象一下`$result`var 和结果数组。

```
foreach($result as $res){
    $sql = 'UPDATE users SET coins = coins+200 WHERE id = '.$res['id'];
    mail(/*WITH YOUR PARAMS*/); //email in $res['email'];
} 
```

# c# - 在 Windows 服务中打开一个 swf 文件（C#）

> ID：15809199
> 
> 赞同：0
> 
> 时间：2013-04-04T10:55:41.573
> 
> 标签：c#, visual-studio-2010, service, flash

我正在尝试从 Windows 服务打开一个 .swf 文件。我已经在 VS 10(C#) 中开发了该服务。这可能吗？如果是，如何？我不想将 swf 文件转换为 exe，因为它可能会引发安全问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:02:47.227

点击链接>>

[http://social.msdn.microsoft.com/Forums/en-US/winformsdesigner/thread/5815e676-50b0-47f4-964a-c1bcebfdb9a4/](http://social.msdn.microsoft.com/Forums/en-US/winformsdesigner/thread/5815e676-50b0-47f4-964a-c1bcebfdb9a4/)

有名为的 COM 包装器`axshockwaveflash`

还请遵循：

[http://www.programmingforums.org/post164816.html](http://www.programmingforums.org/post164816.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T11:26:24.113

尤里卡！！！ [http://www.codeproject.com/Articles/110568/Alternative-way-for-Window-services-to-interact-wi](http://www.codeproject.com/Articles/110568/Alternative-way-for-Window-services-to-interact-wi) 这篇文章提供了从 Windows 服务打开 swf 或任何 .exe 文件的完美代码。

# c++ - 通过 C++ 接口访问 PostgreSQL（链接器错误）

> ID：15809204
> 
> 赞同：1
> 
> 时间：2013-04-04T10:55:52.403
> 
> 标签：c++, postgresql, linker

我正在使用 Visual Studio 2012 Ultimate 和 PostgreSQL 9.2 64 位。我使用以下设置设置了一个全新的项目：

附加包含文件夹：**“C:\Program Files\PostgreSQL\9.2\include\”**

附加库文件夹：**“C:\Program Files\PostgreSQL\9.2\lib\”**

我链接到“ **libpq.lib** ”。

我的问题是这样的：

```
#include <iostream>
using namespace std;

#include <libpq-fe.h>

int main() {

    PGconn *psql = PQconnectdb("hostaddr = '127.0.0.1' port = '' dbname = 'fwaggle' user = 'fwaggle' password = 'password' connect_timeout = '10'");
    /* init connection */
    if (!psql) {

    }

    std::cin.get();
    return 0;
} 
```

结果：“错误 LNK2019: Verweis auf nicht aufgelöstes externes Symbol "_PQconnectdb" in Funktion "_main"。我无法摆脱这个链接器错误，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:16:38.183

看看这个链接：[http ://www.askyb.com/cpp/c-postgresql-example/](http://www.askyb.com/cpp/c-postgresql-example/)

它建议您必须设置 Additional Dependencies 以及 Additional Includes 和 Lib 文件夹。

如果做不到这一点，请仔细检查您尝试调用的方法的名称，并仔细检查 Additional Includes 和 Lib 设置中的路径；从资源管理器中复制并粘贴它们以确保确定。

您可能还想使用depends.exe 来检查DLL 是否实际导出了您所追求的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T11:42:13.417

好的，我知道发生了什么：

正如所写的那样，我安装了 64 位 PostgreSQL，但我尝试编译和链接一个 32 位项目与来自 PostgreSQL 的 64 位 libpg。从 WIN32 更改为 x64 链接成功后。

# c# - 时间：2019-04-10 标签：c#mashal const std::list from c++ dll I have to use a c++ DLL in c# and I have to import in my c# program this function defined in the c++ DLL: void rtdGetSkillsetListResult(bool success, const st 问问题 问问题 2013-04-04T10:55:56.200 284 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have to use a c++ DLL in c# and I have to import in my c# program this function defined in the c++ DLL: void rtdGetSkillsetListResult(bool success, const std::list <skillset_info> skillsetList) How can I "translate" in c# const std::list <skillset_info> where skillset_info has defined in c++ dll with the following structure: struct skillset_info { std::string code; bool standby; }; Thanks a lot! Managed C# code cannot consume unmanaged C++ objects like std::list. So you cannot use the unmanaged DLL directly from C#. The simplest solution will be to make a C++/CLI layer that adapts from unmamaged to managed. Another option would be to adapt the unmamaged code so that it was callable with p/invoke but I think that would involve more effort than C++/CLI. c#c++marshallingdllimport 4 1 回答 1 This answer is useful 3 托管 C# 代码不能使用非托管 C++ 对象，例如std::list. 因此，您不能直接从 C# 使用非托管 DLL。 最简单的解决方案是制作一个从未损坏到托管的 C++/CLI 层。 另一种选择是调整未损坏的代码，以便可以使用 p/invoke 调用它，但我认为这比 C++/CLI 需要更多的努力。 于 2013-04-04T11:01:48.033 回答 Related 4 java - 简单订票java 3 css - 我将如何设计这个 rails return 内联语句？ 10 ruby - 从数组中获取 N 个元素，如果数组小于 N，则将剩余元素填充某个值 2 sql - System.NullReferenceException'发生在 WindowsApplication1.exe 附加信息：对象引用未设置为对象的实例 1 google-chrome - 如何调试我的 Chrome Sender 应用程序的连接/消息流？ 1 ms-access - 从路径中包含 ] 的另一个数据库表中选择 2 ruby-on-rails - 将 application.js 重命名为 application.js.coffee？ 1 jenkins - Jenkins的外部工具目录变量 2 php - 使用引导网格系统在 Wordpress 中将帖子内容分为 2 列 1 java - 如何在java中超时连接到服务器 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15809205
> 
> 赞同：1
> 
> 时间：
> 
> 标签：c#, c++, marshalling, dllimport

I have to use a c++ DLL in c# and I have to import in my c# program this function defined in the c++ DLL:

```
void rtdGetSkillsetListResult(bool success, const std::list <skillset_info> skillsetList) 
```

How can I "translate" in c#

```
const std::list <skillset_info> 
```

where skillset_info has defined in c++ dll with the following structure:

```
struct skillset_info
{
   std::string code;
   bool standby; 
}; 
```

Thanks a lot!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:01:48.033

托管 C# 代码不能使用非托管 C++ 对象，例如`std::list`. 因此，您不能直接从 C# 使用非托管 DLL。

最简单的解决方案是制作一个从未损坏到托管的 C++/CLI 层。

另一种选择是调整未损坏的代码，以便可以使用 p/invoke 调用它，但我认为这比 C++/CLI 需要更多的努力。

# jquery - 带有html元素数组的jquery ajax

> ID：15809207
> 
> 赞同：0
> 
> 时间：2013-04-04T10:55:58.213
> 
> 标签：jquery, ajax

我有搜索 jquery 文档和 SO，但我找不到我所追求的。

我在 php 中创建了跨度，因此它们遵循以下模式：

```
<span class="om" id="o_1"></span>
<span class="om" id="o_3"></span>
... 
```

我想收集 id 属性中的所有数字，并通过 ajax 将它们作为数据数组（如果需要，json）发送到服务器，并将结果返回给函数：

```
$.get("/pages/gOboxMeters", function($("span.om") <-- extract id's here ) {alert(data);} ) 
```

我现在只是在`alert`学习它。

什么是正确的代码？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:58:15.503

您可以使用[地图](http://api.jquery.com/jQuery.map/)，

**[现场演示](http://jsfiddle.net/m2TFv/)**

```
numbers = $('.om').map(function(){
  return this.id.replace('o_', '');
}).get().join(',');

jQuery.get( "/pages/gOboxMeters", "yourVariable: " + numbers,
     function(){alert(""sent);
}); 
```

*您可以在连接中使用其他分隔符*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:03:56.907

您还可以使用函数在该数组中的值中创建一个`array`and`push``each``jQuery`

[**看演示**](http://jsfiddle.net/YXB5h/)

```
var num = new Array;

$(".om").each(function(){
       num.push($(this).attr("id").replace("o_",""));
       $("#result").append($(this).attr("id").replace("o_","")+"<br>"); // just to show result visually
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T11:08:48.640

您可以像这样收集和发送值

```
$(document).ready(function(){
var value = []

$('span.om').each(function(){    
 value.push($(this).attr('id'))});
alert(value);
   $.get("/pages/gOboxMeters",{value : value }, function(){});

}); 
```

示例：http: [//jsfiddle.net/X5r8r/1120/](http://jsfiddle.net/X5r8r/1120/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T11:13:48.590

您可以使用`.each()`jQuery 函数：

```
 var arr = [];
  $('span.om').each(function(index, item){arr.push($(item).attr('id').substring(2));}) 
```

在同一个页面的控制台中，我尝试了以下操作，它工作正常：

```
var arr = []
$('.mainnavs a').each(function(index, item){arr.push($(item).attr('id').substring(4));}) 
```

在此之后，使用 arr 变量进行进一步处理。

# http - http重定向和seo

> ID：15809209
> 
> 赞同：0
> 
> 时间：2013-04-04T10:56:01.373
> 
> 标签：http, redirect, iis-7.5

我被要求将对 sitename.com 的所有请求重定向到 www.sitename.com 以防止重复内容，并使所有 https 页面再次具有指向 http 页面的规范链接以防止重复内容。

这真的有必要吗？

如果是这样，我怎样才能在 IIS7.5 中轻松设置重定向。我试过了，但该网站因旧的太多重定向错误而关闭。

我现在很困惑，我现在确定如果每个站点都必须这样做，asp.net 会将其内置到框架中，以将规范链接添加到安全服务的任何页面。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:59:28.670

这不是必需的，但在两个*不同*的URL 之间拆分您的 Googlejuice 肯定更好。

IIS7 几乎为您内置了这个：

*   打开 IIS
*   选择网站
*   选择“网址重写”
*   点击“添加规则”
*   选择“规范域名”
*   点击“确定”
*   输入主域名
*   点击“确定”

# ruby-on-rails - Ruby on Rails：如何使用 Rspec 或 cucumber 验证数据

> ID：15809210
> 
> 赞同：0
> 
> 时间：2013-04-04T10:56:01.453
> 
> 标签：ruby-on-rails, ruby, rspec, cucumber, rspec-rails

我正在从`HotDeal`Homepage01 中的模型中查询数据，该模型存在于`ProductDetailController`这样的

```
def Homepage01
    @hotdetail=HotDeal.where("department_id=?",1).limit(15).offset(0)
end 
```

我需要使用 Rspec 测试或验证数据。如何验证 RSpec 或黄瓜框架中的数据或任何 mysql 错误。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:10:38.210

Create a hotdeal factory using [factory girl](https://github.com/thoughtbot/factory_girl) with `department_id 1`.

Inside your `product_detail_controller_spec.rb` (which should rather be plural btw, i.e. product_details for your controller and your spec) write:

```
require 'spec_helper'

describe ClientsController do
  describe "GET Homepage01" do
    it "assigns the right records" do
      FactoryGirl.create(:hot_deal)
      hotdetail = HotDeal.where("department_id=?",1).limit(15).offset(0)
      get "Homepage01"
      assigns(:hotdetail).should eq(hotdetail)
    end
  end
end 
```

This will make sure that your query works 1) technically and 2) as expected.

# rating - 结构化数据工具未显示评级

> ID：15809211
> 
> 赞同：0
> 
> 时间：2013-04-04T10:56:13.320
> 
> 标签：rating, schema.org, rich-snippets

目前正在创建丰富的摘要工具，但 Google 结构化数据工具不会在示例中显示星号。如果您看下面，我应该已经使用 schema.org 正确实施了评级系统。

任何人都可以给我这个问题的正确方向吗？

[谷歌结构化数据测试工具结果](http://www.google.com/webmasters/tools/richsnippets?url=http://www.stickerontwerpen.nl/macbook-stickers/1811-angry-birds-macbook-sticker.html&html=)

# java - 通过多对一或一对一关系查找引用给定类的所有类

> ID：15809212
> 
> 赞同：4
> 
> 时间：2013-04-04T10:56:15.097
> 
> 标签：java, hibernate, annotations

我可以通过外键引用在给定表引用的数据库中找到表。具体在**mysql**中，它是通过以下方式完成的：

```
SELECT * FROM REFERENTIAL_CONSTRAINTS WHERE REFERENCED_TABLE_NAME = 'table_name'; 
```

我想通过**java**代码来实现这个功能。

也就是说，我想***通过多对一或一对一的关系找到引用给定类的所有类***。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:28:19.850

这可以在 NHibernate（不是 Hibernate）中完成，如下所示。

```
IList<string> classList = new List<string();
ICollection<PersistentClass> persistentClasses = Configuration.ClassMappings;
foreach (var persistentClass in persistentClasses)
{
    foreach (var property in persistentClass.PropertyIterator)
    {
         if(property.Type.IsAssociationType == true && property.Type.ReturnedClass.Name == "GivenClassName")
         {
             classList.Add(persistentClass.EntityName);
         }
    }
}
return classList; 
```

所有类映射都在一个集合中检索，并被迭代以找到它们的属性和给定类之间的关联。我认为 Hibernate 也有类似的 API，所以这也可以在 Hibernate 中完成。另请注意，这段代码是用 C# 编写的，但我想也许看看它你也可以用 Java 编写类似的代码。

请参阅[此答案](https://stackoverflow.com/questions/2007073/getting-all-mapped-entities-from-enititymanager#answer-2007362)，该答案在 Hibernate 中演示了类似的 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:06:20.623

如果您使用的是 Eclipse 或 netbeans 之类的 IDE，这可以帮助您通过搜索与“table_name”对应的类的类型的 setter 或 getter 的调用层次结构

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-24T14:42:06.480

我自己偶然发现了这个问题；所以这是一个很晚的答案，一个可能的解决方案的休眠版本：

```
import org.hibernate.metadata.ClassMetadata;
import org.hibernate.type.EntityType;
import org.hibernate.type.Type;

[...]

Set<Class<?>> referencingClasses = new HashSet<Class<?>>();
for (Entry<String, ClassMetadata> entry:sessionFactory.getAllClassMetadata().entrySet())
{
    Class<?> clazz=entry.getValue().getMappedClass();
    for (String propertyName: entry.getValue().getPropertyNames())
    {
        Type t=entry.getValue().getPropertyType(propertyName);
        if (t instanceof EntityType)
        {
            EntityType entityType=(EntityType)t;
            if (entityType.getAssociatedEntityName().equals(YourClass.class.getName())) referencingClasses.add(clazz);
        }
    }
} 
```

# c - C使用union将十进制数转换为二进制

> ID：15809217
> 
> 赞同：0
> 
> 时间：2013-04-04T10:56:36.043
> 
> 标签：c, binary, unions

我有这个代码：

```
#include <stdio.h>
#include <string.h>
int main(void)
{
    long long int n,b,t,j;
    while(scanf("%llu",&n) && n)
    {
        char a[2000]={0},c[2000]={0};
        b=0;
        int k=0;

        while(n>0)
        {
            a[b++]=(n%2)+48;
            if(n%2==1)
            k++;
            n=n/2;
        }
            a[b]='\0';
            j=strlen(a)-1;

        for(b=j,t=0;b>=0;b--)

            c[t++]=a[b];
            c[t]='\0';

        printf("The parity of %s is %d (mod 2).\n",c,k);
    }

return 0;
} 
```

这段代码工作完美。

现在我想在 C 中使用 union 将十进制数转换为二进制数

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T10:58:38.300

你不能，这没有任何意义。十进制和二进制是数字的*表示*。十进制的十辆车与二进制的十辆车的数量相同。这是完全相同的数字。没有办法使用联合将一种整数表示更改为另一种。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:03:06.810

由于该数字在内存中没有以十进制表示，因此您已经完成了这项任务，甚至没有使用联合。如果要获得二进制**文本**表示：

```
unsigned n = 12345;

for (int i = sizeof(n) * CHAR_BIT - 1; i >= 0; i--) {
    putc('0' + ((n >> i) & 1), stdout);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T10:59:33.467

为什么？

联合只是一个结构，其中所有成员在内存中具有相同的位置（它们重叠）。

我不熟悉在创建二进制字符串时使用联合的任何典型方法，我认为这（很容易）根本不可能。

也许您在浮点数和整数之间转换时混淆了联合的使用（丑陋但有时用于获取浮点数的位）？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-15T23:30:59.017

```
#include <stdio.h>
#include <conio.h>
union calc
{
    struct {
        unsigned char bit0  : 1;
        unsigned char bit1  : 1;
        unsigned char bit2  : 1;
        unsigned char bit3  : 1;
        unsigned char bit4  : 1;
        unsigned char bit5  : 1;
        unsigned char bit6  : 1;
        unsigned char bit7  : 1;
    } bits;
   unsigned char numero;
};  
int main(int argc, char *argv[]) {
    union calc  c;
    scanf("%u",&c.numero);
    printf("%d%d%d%d%d%d%d%d",c.bits.bit7,c.bits.bit6,c.bits.bit5,c.bits.bit4,c.bits.bit3,c.bits.bit2,c.bits.bit1,c.bits.bit0);
    getch();
    return 0;
} 
```

# ruby-on-rails-3 - 服务资产开发非常缓慢

> ID：15809218
> 
> 赞同：4
> 
> 时间：2013-04-04T10:56:38.670
> 
> 标签：ruby-on-rails-3, google-chrome, asset-pipeline, assets, sprockets

我有一个带有默认资产管道的标准 rails 3 webapp。突然之间，加载这些资产需要很长时间（我的页面加载时间约为 1-2 秒到 1 分钟）。服务器响应时间（/home）是正常的，但一些 .css 和 .js 文件等待很长时间（最长 45 秒）。唯一需要这么长时间的资产是 gems 提供的资产（例如`modernizr-rails/vendor/assets/javascripts/modernizr.js`：）

例如，对于`modernizr.js?body=1`：

标题：

```
Request URL:http://dev.sharewizz.com:3000/assets/modernizr.js?body=1
Request Method:GET
Status Code:304 Not Modified 
```

统计：

```
DNS Lookup  5.00 s
Connecting  20.07 s
Sending     0
Waiting     10 ms
Receiving   3 ms 
```

是链轮的问题吗？我怎么知道出了什么问题？

注意：~~所有其他浏览器的行为都相同。~~ **编辑：实际上问题只出在 chrome**上，甚至不是 safari。我尝试在端口 3000 和端口 80 上使用 rails 启动我的服务器（没有更改）

如果我访问`http://localhost:3000/assets/modernizr.js?body=1`，大多数时候它是即时的，有时它会等待很长时间。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-12T11:13:11.860

另一种选择 - 硬盘驱动器对于日志来说不够快，只是在我的开发电脑上（突然）碰到这个。尝试将其设置为**config/development.rb**：

```
# Expands the lines which load the assets
config.assets.debug = false #true 
```

如果你有很多资产，每一个都花时间写入开发日志，加起来总共需要几分钟。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-04T10:10:52.467

chrome 中存在一个问题，浏览器尝试 dns 请求并等待超时（如果您将鼠标悬停在彩色时间线上，您可以在开发人员工具/网络选项卡中看到，它显示等待（30000 毫秒或更高），接收（4 毫秒） .

如果您正在执行以下操作：`127.0.0.1 localhost.mysite.com`在主机文件中，并`http://localhost.mysite.com`在浏览器中访问），您可能会尝试使用端口 80 上的 localhost 访问它：

*   启动导轨`rvmsudo rails server -p 80`
*   访问`http://localhost`铬

那可能会解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:36:17.833

预编译您的资产并为开发环境启用资产流水线。但是，如果不重新启动服务器，这可能不会加载您在源代码中所做的更改。

# ember.js - 建模嵌套的 json 结构

> ID：15809219
> 
> 赞同：2
> 
> 时间：2013-04-04T10:56:51.997
> 
> 标签：ember.js, ember-data

我有以下`json`数据：

```
{
    "type": "type1",
    "name": "Name1",
    "properties": {
        "age": 23,
        "address": "Sample"
    }
} 
```

我用 建模`Ember Data`，如下：

```
App.Node = DS.Model.extend({
    type: DS.attr('string'),
    name: DS.attr('string'),
    properties: DS.belongsTo('App.NodeProperties')
});

App.NodeProperties = DS.Model.extend({
    age: DS.attr('number'),
    address: DS.attr('string')
}); 
```

`properties`有没有比使用 a更好的方法来模拟嵌套`DS.belongsTo`？我将如何访问我的模板中的年龄。我目前正在做

```
{{node.properties.age}} 
```

但我不确定这是否有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T12:23:02.167

> 有没有比使用 DS.belongsTo 更好的方法来建模嵌套属性？

考虑到您的用例，DS.belongsTo 是一个不错的选择。

> 如何访问模板中的年龄？

`{{node.properties.age}}`是正确的，假设这`{{node}}`是一个有效的参考

> 但我不确定这是否有效。

您还需要采取更多步骤才能使其正常工作。首先，将 App.Node 的映射添加到 rest 适配器，指定将嵌入属性：

```
DS.RESTAdapter.map('App.Node', {
  properties: { embedded: 'always' }
}; 
```

然后更新 NodeProperties 以包含关系：

```
App.NodeProperties = DS.Model.extend({
  age: DS.attr('number'),
  address: DS.attr('string'),
  node: DS.belongsTo('App.Node')
}); 
```

有关更多信息，请查看以下答案：

*   [Ember 数据嵌入式加载集成测试](https://github.com/emberjs/data/blob/master/packages/ember-data/tests/integration/embedded/embedded_loading_test.js)
*   [如何使用 Ember 数据访问 json 中的嵌套对象](https://stackoverflow.com/questions/14591892/how-to-access-nested-object-in-json-with-ember-data)
*   [如何使嵌入的 hasMany 关系与 ember 数据一起使用](https://stackoverflow.com/questions/14320925/how-to-make-embedded-hasmany-relationships-work-with-ember-data/14324532#14324532)

# java - Java NumberFormat 忽略美国语言环境中的逗号？

> ID：15809225
> 
> 赞同：5
> 
> 时间：2013-04-04T10:57:23.097
> 
> 标签：java, localization, locale, number-formatting

我不明白 NumberFormat 中的某些内容，在美国语言环境中，假设将逗号（“，”）视为组分隔符 - 用于数千。

为什么它会忽略此语言环境不正确位置的逗号？

```
NumberFormat format = DecimalFormat.getInstance(Locale.US); 
System.out.println(format.parse("5,500").longValue()); //5500
System.out.println(format.parse("550,0").longValue()); //5500
System.out.println(format.parse("5500,").longValue()); //5500 
```

任何其他想法如何根据语言环境将 String 解析为 Long （假设在语言环境的不正确位置输入“，”应该失败）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:59:44.373

逗号是分组分隔符的占位符，句点是小数分隔符的占位符。

```
NumberFormat format = DecimalFormat.getInstance(Locale.US); 
System.out.println(format.parse("5.500").longValue()); //5
System.out.println(format.parse("55.00").longValue()); //55
System.out.println(format.parse("550.0").longValue()); //550 
```

逗号被忽略，就像从演示文稿中一样。用于数千的合约很常见，但在解析过程中没有任何表示。这就是为什么它被称为*分组分隔符*而不是*千位分隔符*。你可以有类似的东西`5,5.0,0,`，它仍然有效。

数字的分组方式可能会有所不同，有时是 3 位，有时是 2 位或组合。

从逻辑上讲，如果它只是用于简化人类阅读的分隔符。他的位置不会改变所呈现数字的值，因此可以省略。

* * *

Oracle 实现的类分析`java.text.DecimalFormat`表明分组字符被忽略。

```
1526  // Ignore grouping characters, if we are using them, but
1527  // require that they be followed by a digit.  Otherwise
1528  // we backup and reprocess them. 
```

有关更多信息，请访问[格式化数字打印输出](http://docs.oracle.com/javase/tutorial/java/data/numberformat.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:21:08.683

正如 javadev 提到的， parse 方法似乎忽略了千位分隔符。如果您想要严格解析，我想您必须自己实现一个解析方法（使用 NumberFormat/DecimalFormat 的信息）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-04T11:04:03.927

由于逗号是美国语言环境中千位的分隔符，因此在放置错误时会被忽略。所有这些输出都将打印 5500。

# erlang - 使用 binary_to_existing_atom(Binary, Encoding)

> ID：15809229
> 
> 赞同：3
> 
> 时间：2013-04-04T10:57:28.717
> 
> 标签：erlang

我想将一些来自套接字的二进制文件转换为稍后将在 gen_server 调用中使用的原子。因为我不想用新的（可能是无效的原子）淹没虚拟机，所以我使用：

> binary_to_existing_atom（二进制，编码）

现在，我应该如何（或更好地）在系统启动时声明有效原子，以便转换有效？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T11:34:53.357

在任何加载的模块中使用原子就足够了，例如在`case`表达式或其他比较中匹配。

如果比较发生在与您调用不同的模块中`binary_to_existing_atom`，那么您需要确保在进行转换时加载该模块。如果您构建一个版本并以“嵌入式”模式运行它，那么所有模块都将在启动时加载。否则，模块将在它们被调用时被加载，所以如果有问题的模块是例如由应用程序的监督树启动的 gen_server，那么你就可以了。

# xml - XSLT 转换以替换 web.config 上的元素

> ID：15809232
> 
> 赞同：0
> 
> 时间：2013-04-04T10:57:50.517
> 
> 标签：xml, xslt, xml-parsing

有人可以帮我理解下面的 XSLT

```
<xsl:stylesheet version="1.0" >
  <xsl:output method="xml" indent="yes" />
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()" />
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

基本上我想应用 XSLt 转换从 web.config 中删除以下元素：

```
<system.net>
      <defaultProxy>
         <proxy
            usesystemdefault = "false"
            proxyaddress="http://proxyserver"
            bypassonlocal="true"
         />
      </defaultProxy>
   </system.net> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:00:15.957

这是“身份”模板的标准形式，它将其输入复制到输出不变 - 它通过匹配任何节点（`@*`匹配属性，`node()`匹配其他所有内容），制作该节点的浅表副本，然后递归地将模板应用于属性和它刚刚浅拷贝的节点的子节点。您可以通过添加其他模板来覆盖特定节点的此行为，这将优先于身份模板。例如，要删除`system.net`您可以添加的所有元素

```
<xsl:template match="system.net" /> 
```

（即“当你看到一个`system.net`元素时，什么都不做”）。`system.net`删除所有元素的完整转换将是

```
<xsl:stylesheet version="1.0" >
  <xsl:output method="xml" indent="yes" />
  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="system.net" />
</xsl:stylesheet> 
```

# haskell - 类型类和 GADT

> ID：15809235
> 
> 赞同：6
> 
> 时间：2013-04-04T10:58:05.080
> 
> 标签：haskell

我在 haskell 中建立了一个几何库。我不打算发布它，它只是我用来提高我的语言知识的一个项目。

我有一个`Local`数据类型，具有以下定义

```
data Local a where
    MkLocal :: (Vectorise a) => ReferenceFrame -> a -> Local a 
```

参考框架是指向框架原点的向量和表示框架旋转的角度，两者都定义为“绝对”参考框架（嘿，这不是现实世界！）。`Vectorise`几何是一种具有可逆变换为 的列表的几何`Vector`。

我突然想到 Local 可能是以下实例`Functor`：

```
instance Functor Local where
     fmap f geom = localise (frame geom) (f $ local geom) 
```

但是编译器抱怨没有 Vectorisable 的实例用于定义中的 localize 。有没有办法使用无数 GHC 扩展之一来解决这个限制？

编辑：根据评论中的要求，这里是一些使用的类型

```
local :: Local a -> a
frame :: Local a -> ReferenceFrame
localise :: (Vectorise a) => ReferenceFrame -> a -> Local a 
```

错误是

```
No instance for (Vectorise b)
  arising from a use of `localise'
In the expression:
  localise (frame geom) (f $ local geom)
In an equation for `fmap':
    fmap f lgeom = localise (frame geom) (f $ local geom))
In the instance declaration for `Functor Local' 
```

这是有道理的，因为 for 的类型`fmap`是`(a -> b) -> f a -> f b`. 它可以推断出它`a`必须是 的一个实例`Vectorise`，但我想知道它如何推断出它`b`，除非我可以指定（以某种方式）我可以告诉编译器`f`必须具有受限的返回类型，而无需定义另一个类型类，而已经有一个*几乎*已经符合要求（或者，如果有人可以帮助解释为什么以这种方式限制类会以某种方式破坏类型推断）。

附言。我还修正了我在定义中颠倒`local`和颠倒的错字`frame``fmap`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T12:53:32.060

问题是它`localise`要求它的第二个参数具有 type `Vectorise a => a`，但是当您将`f`（具有 type `a -> b`）应用到`local`（ of type `Vectorise a => a`）的结果时，不能保证结果值的 type 是`Vectorise`. 您真正想要的是`Functor`仅适用于具有`Vectorise`约束的类型的类似物。

直到最近，还不能定义这样的类型类。这是一个众所周知的问题和原因`Data.Set`没有`Functor`或没有`Monad`实例。然而，随着最近的`ConstraintKinds`GHC 扩展，这种“受限函子”终于成为可能：

```
{-# LANGUAGE GADTs, ConstraintKinds, TypeFamilies #-}
module Test
       where

import GHC.Exts (Constraint)

data ReferenceFrame = ReferenceFrame

class Vectorise a where
  ignored :: a

data Local a where
    MkLocal :: ReferenceFrame -> a -> Local a

local :: Vectorise a => Local a -> a
local = undefined

frame :: Local a -> ReferenceFrame
frame = undefined

localise :: (Vectorise a) => ReferenceFrame -> a -> Local a
localise = undefined

class RFunctor f where
  type SubCats f a :: Constraint
  type SubCats f a = ()
  rfmap ::  (SubCats f a, SubCats f b) => (a -> b) -> f a -> f b

instance RFunctor Local where
  type SubCats Local a = Vectorise a
  rfmap f geom = localise (frame geom) (f $ local geom) 
```

`ConstraintKinds` [您可以在此处](http://www.haskell.org/ghc/docs/latest/html/users_guide/constraint-kind.html)和[此处](http://blog.omega-prime.co.uk/?p=127)阅读更多信息。

# html - Chrome（webkit）中浮动元素中的用户文本选择选择更多文本

> ID：15809239
> 
> 赞同：6
> 
> 时间：2013-04-04T10:58:14.313
> 
> 标签：html, css, css-float, textselection

当双击灰色标签中的文本（有浮动：右）时，chrome（webkit）也会选择行首的文本（有浮动：左）。有没有办法在不添加额外标记或更改标签源顺序的情况下解决这个问题？

[http://codepen.io/lezz/pen/xBAzr](http://codepen.io/lezz/pen/xBAzr)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-08-17T12:31:26.173

首先只是为了演示问题：

我们有两个相邻的`div`元素——每个元素都有内容，并且在标记中它们之间没有空格。

通过双击选择其中之一的内容时 - 仅选择单击的 div 的内容。

但是，当`div`s 使用 CSS 浮动并且如上选择其中一个 div 时 - Chrome 会选择 BOTH `div`s 的内容

```
.rfloat {
  float: right;
}

.lfloat {
  float: left;
}
```

```
<h2>Non-floated elements: Double click selects each div separately</h2>

<div>Abc</div><div>def</div>

<hr>
<h2>(On Chrome:) Floated elements: Double click selects BOTH divs</h2>
<div class="rfloat">Abc</div><div class="lfloat">def</div>
```

我不知道为什么 Chrome 会以这种方式处理浮动元素 - 这可能是一个错误，但就您的问题而言：

> 有没有办法在不添加额外标记或更改标签源顺序的情况下解决这个问题？

作为一种解决方法，您可以`display:flex`在浮动的容器元素上进行设置——这会使弹性项目上的浮动声明变得多余，因为浮动不适用于弹性项目——请参阅[规范](https://www.w3.org/TR/css-flexbox-1/#flex-containers)

> float 和 clear 不会创建 flex 项目的浮动或清除，并且不要使其脱离流动。

此外，我们可以使用一些 flexbox 属性来设置 div 的样式，使其看起来与浮动时相同：

```
.container {
  display: flex;
  flex-direction: row-reverse;
  justify-content: space-between;
} 
```

```
.container {
  display: flex;
  flex-direction: row-reverse;
  justify-content: space-between;
}
.rfloat {
  float: right;
}

.lfloat {
  float: left;
}
```

```
<h2>Workaround: Set container with display:flex</h2>
<div class="container">
  <div class="rfloat">Abc</div>
  <div class="lfloat">def</div>
</div>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T11:12:23.127

这是因为您没有空格（或其他单词结尾字符）分隔这两个`spans`. 如果您的段落包含没有空格或其他相关词尾符号的段落，则您希望选择包含它们。在文本级别，您的内容都是一个单词（“123456789Some”）。举个例子：

```
<span>Abc</span><span>def</span> 
```

变成： Abcdef

即使您将第一个跨度设置为与第二个跨度相距数万亿像素，这两个元素仍将被归类为一个单词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-23T10:43:42.400

问题是因为容器中的间距。单词之间应该有一个空格（在容器内部或外部）。因此，在尝试了不同的可能选项后，我发现了以下内容（如果我错了，请纠正我）

1.  如果它是`Block`元素容器，它将被放置在浏览器中的两行中，不需要任何间距。
2.  如果是，`inline`则`inline-block`内容将放在浏览器中的单行中，因此我们必须明确给出两个容器内或容器之间的间距。

```
.rfloat {
  float: right;
}

.lfloat {
  float: left;
}
.block{
  display: inline-block;
}
```

```
<h2>floated elements with space: Double click selects each div separately</h2>
<div class="rfloat"> Abc</div><div class="lfloat"> def</div>
<br>
<hr>

<h2>floated elements without space: Double click BOTH divs</h2>
<div class="rfloat">Abc</div><div class="lfloat">def</div>
<br>
<hr>

<h2>Non-Floated elements with space: Double click selects each div separately</h2>
<div class="block"> Abc</div><div class="block"> def</div>
<br>
<hr>

<h2>Non-Floated elements without space: Double click selects BOTH divs</h2>
<div class="block">Abc</div><div class="block">def</div>
<br>
<hr>

<h2>Non-Floated elements without space(divs separated with line break in HTML): Double click selects div separately</h2>
<div class="block">Abc</div>
<div class="block">def</div>
```

# javascript - 简单的复选框 javascript 不起作用

> ID：15809241
> 
> 赞同：0
> 
> 时间：2013-04-04T10:58:19.913
> 
> 标签：javascript

该复选框应该被选中，但它不起作用。我很困惑。

```
<script type="text/javascript">

function check() {
document.getElementById("1").checked = true;
}
</script>

<form>
<input id="1" type="checkbox" name="please check" value="1">please check<br>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:02:02.807

我已经在 Window Onload 上调用它 在哪里调用只是传递函数名称

```
<script type="text/javascript">
    window.onload=check;

    function check() {
    document.getElementById("1").checked = true;
    }
    </script>

    <form>
    <input id="1" type="checkbox" name="please check" value="1">please check<br>
    </form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:02:01.377

以另一种方式订购它并摆脱该功能，这将确保该复选框在脚本运行时存在。

[jsFiddle](http://jsfiddle.net/Tyriar/T4kYv/)

```
<form>
    <input id="1" type="checkbox" name="please check" value="1">please check<br>
</form>
<script type="text/javascript">
    document.getElementById("1").checked = true;
</script> 
```

或者将其放在文档就绪 (jQuery) 或窗口加载上。

[jsFiddle](http://jsfiddle.net/Tyriar/qQeMZ/)

```
window.addEventListener('load', check);
function check() {
    document.getElementById("1").checked = true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T11:04:11.320

试试这个：

```
<script type="text/javascript">

function check() {
document.getElementById("check1").checked = true;
}

window.onload = check;
</script>

<form>
<input id="check1" type="checkbox" name="please check" value="1">please check<br>
</form> 
```

[也参考这个链接](http://www.w3schools.com/jsref/prop_checkbox_checked.asp)。

# sql-server - SQL Server 存储过程未能正确设置上下文信息

> ID：15809242
> 
> 赞同：3
> 
> 时间：2013-04-04T10:58:23.403
> 
> 标签：sql-server, vb.net-2010

这真让我抓狂。我的 .NET 应用程序调用存储过程以从数据库中检索存储的散列密码：

```
ALTER PROCEDURE [dbo].[sGetHashedPW] 
    -- Add the parameters for the stored procedure here
    @UserName varchar(32) = N''
AS
DECLARE @ContextInfo varbinary(128)
BEGIN
    SET NOCOUNT ON;

    --Set Context Info for this session to Username requested
    SELECT @ContextInfo = CAST(@Username AS varbinary(128));
    SET CONTEXT_INFO @ContextInfo;

    --Return Hashed User Password to Application
    SELECT TOP 1 [Password] as PWHash FROM [dbo].[vSecurity] WHERE [UserName] = @UserName;
END 
```

应用程序验证密码并运行第二个存储过程，该过程在表中创建一行，`session`向应用程序返回一个字符串 (GUID)，并设置`CONTEXT_INFO`为该字符串的值。

现在，只要应用程序打开一个连接，它就会调用`sSessionStart`并传递它在登录期间收到的字符串。如果连接在新会话中打开，则 proc 应该设置`CONTEXT_INFO`为它传递的经过验证的字符串值：

```
ALTER PROCEDURE [dbo].[sStartSession] 
    @token varchar(128)=NULL
AS
DECLARE @GUID uniqueidentifier
BEGIN
    SET NOCOUNT ON;
    IF @token IS NULL --Token not passed from the application
        BEGIN
        BEGIN TRANSACTION;
        BEGIN TRY
            SELECT @GUID = personnel_token 
                FROM t300_Personnel INNER JOIN vSecurity ON t300_Personnel.personnel_user_name = vSecurity.UserName 
                WHERE personnel_user_name = CAST(CONTEXT_INFO() as varchar(128));
            SET @GUID = ISNULL(@GUID,NewID());
            INSERT INTO dbo.t900_UserSession
            (session_token,session_dbuser,session_id)
            OUTPUT CAST(@GUID as varchar(128))
            SELECT @GUID, [DB_User], @@SPID
                FROM t300_Personnel INNER JOIN
                     vSecurity ON t300_Personnel.personnel_user_name = vSecurity.UserName
                WHERE [UserName] = CAST(CONTEXT_INFO() as varchar(128));

            UPDATE dbo.t300_Personnel SET [personnel_token]= @GUID 
                WHERE [personnel_user_name] = CAST(CONTEXT_INFO() as varchar(128));

            --Change Context Info to the GUID
            SET CONTEXT_INFO @GUID;
        END TRY

        BEGIN CATCH
            IF @@TRANCOUNT > 0
                ROLLBACK TRANSACTION;
            THROW 51000, N'Session could not be opened',1;
        END CATCH

        IF @@TRANCOUNT > 0
            COMMIT TRANSACTION;
        END

    ELSE --Token was passed from the application
        BEGIN
        BEGIN TRY
            SELECT @GUID = CAST(@token as uniqueidentifier);
            INSERT INTO dbo.t900_UserSession
            (session_token,session_dbuser,session_id)
            SELECT @GUID, DB_User, @@SPID
                FROM t300_Personnel INNER JOIN
                     vSecurity ON t300_Personnel.personnel_user_name = vSecurity.UserName
                WHERE personnel_token = @GUID;

            IF (@@ROWCOUNT = 0) --Insert failed due to invalid token
                SELECT CAST('INVALID TOKEN' as varchar(128));
            ELSE --New session was created
                BEGIN
                    SET CONTEXT_INFO @GUID;
                    SELECT CAST(@GUID as varchar(128));
                END
        END TRY
        BEGIN CATCH
            IF (ERROR_NUMBER() = 2627) --Token is valid but session already exists
                SELECT CAST(@GUID as varchar(128));
            ELSE
                THROW;
        END CATCH
        END
END 
```

当我在 SSMS 查询会话中模拟它时，一切正常。该应用程序遇到了问题。

第一部分工作正常：

```
Public Sub Authenticate(username As String, password As String, connString As String)
    Using oConn As New SqlConnection(connString)
        'Check that connection exists and is open
        oConn.Open()
        If oConn.State = ConnectionState.Open Then
            Dim sqlCmd As New SqlCommand("EXEC dbo.sGetHashedPW N'" & username & "'", oConn)
            _pwhash = sqlCmd.ExecuteScalar
            _authenticated = EncryptHash.VerifyHash(password, "SHA512", _pwhash)
            If _authenticated Then
                _username = username
                _connString = oConn.ConnectionString
                sqlCmd.CommandText = "EXEC dbo.sStartSession"
                _hashToken = sqlCmd.ExecuteScalar
            Else
                clearVariables()
            End If
        End If

    End Using
End Sub 
```

此时一切`CONTEXT_INFO`正常，在两个程序中都设置正确。连接现在已关闭，但应用程序具有从该`sStartSession`过程返回的验证字符串。

`SqlConnection`打开表单时，会创建并打开一个表单。表单运行`sStartSession`，传递字符串参数：

```
Private Sub frmPersonnel_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    Me.MdiParent = frmMain

    'Open the form's connection and ensure the database session is logged
    oCN = New SqlConnection(currentUser.ConnectionString)
    oCN.Open()
    Dim sqlCmd As New SqlCommand("EXEC dbo.sStartSession '" & currentUser.Token & "'", oCN)
    Dim sResult = sqlCmd.ExecuteScalar 
```

这是有趣的事情......`sResult`按预期返回字符串，但立即`CONTEXT_INFO`设置为0x00000：

```
SELECT 
   [session_id], [context_info], 
   CAST([context_info] as uniqueidentifier) as Context,
   CAST([context_info] as varchar(128)) as Context2,
   [program_name] 
FROM 
   sys.dm_exec_sessions 
WHERE 
   [program_name] = 'this application' 
```

啊啊啊！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T10:01:51.357

简短的回答是所有权链接。测试存储过程，我以 SA 身份登录到 SSMS。我在 SSMS 会话下模拟了登录，一切正常。使用具有非常有限的安全配置文件的应用程序登录是问题发生的地方。最终该应用程序在一个功能上缺少 EXECUTE 特权:(

# python - Python：检查提供的三个边时出错是否可以形成三角形

> ID：15809249
> 
> 赞同：0
> 
> 时间：2013-04-04T10:58:41.383
> 
> 标签：python, if-statement

我想找出给定的三个边是否可以形成一个三角形，检查的条件是提供的较大值（三个）是否小于或等于其他两个剩余值的总和，它可以形成一个三角形。

所以我写了一个条件，比如如果三个值中的较大者大于其他两个剩余的较小值，那么它不会形成三角形，否则它会形成三角形并且我在下面编写的代码会引发错误......

```
Def triangle_check(l1,l2,l3):
    if (l1>l2+l3) or (l2>L1+l3) or (l3>l1+l2):
        print 'No, the lengths wont form a triangle'
    elif (l1==l2+l3) or (l2==L1+l3) or (l3==l1+l2):
        print 'yes, it can form a degenerated triangle'
    else:
        print 'Yes, a triangle can be formed out of it'

length1 = raw_input('enter side 1\n')
int(length1)
length2 = raw_input('enter side 2\n')
int(length2)
length3 = raw_input('enter side 3\n')
int(length3)

triangle_check(length1,length2,length3) 
```

但最糟糕的是，当我给出不同的值作为输入时，得到的答案不正确**强文本**我什至通过删除 elif 条件检查了代码，即使那样我也没有得到正确的答案，逻辑上该方法是正确的当然可以，但是在编码时犯了一些错误……你能帮我吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:01:19.507

您正在将输入就地转换为 int，然后将其丢弃。您应该将这些行更改为：

```
length1 = int(raw_input('enter side 1\n'))
length2 = int(raw_input('enter side 2\n'))
length3 = int(raw_input('enter side 3\n')) 
```

* * *

您的代码中还有其他一些语法错误。更正如下：

```
def triangle_check(l1,l2,l3):
    if (l1>l2+l3) or (l2>l1+l3) or (l3>l1+l2):
        print 'No, the lengths wont form a triangle'
    elif (l1==l2+l3) or (l2==l1+l3) or (l3==l1+l2):
        print 'yes, it can form a degenerated triangle'
    else:
        print 'Yes, a triangle can be formed out of it'

length1 = int(raw_input('enter side 1\n'))
length2 = int(raw_input('enter side 2\n'))
length3 = int(raw_input('enter side 3\n'))

triangle_check(length1,length2,length3) 
```

* * *

不过这种编程方式比较混乱，我给大家写了一个更简单的算法：

```
def check_valid_triangle(sides):
    for side in sides:
        other_sides = (sum(sides)-side)
        if side > other_sides:
            return 'No'
        elif side == other_sides:
            return 'Degenerated'
    else:
        return 'Yes'

sides = []
for i in range(3):
    sides.append(int(raw_input('Enter a side:\n')))

print check_valid_triangle(sides) 
```

# scala - 如何将 for-loop Seq 输出重写为 Stream 输出？

> ID：15809253
> 
> 赞同：8
> 
> 时间：2013-04-04T10:59:06.063
> 
> 标签：scala, stream

我试图将这个 Scala 函数转换为返回一个惰性流，而不是急切地检索所有结果，并在所有结果都存在时将它们从 Seq 转换为 Stream。我觉得问题在于**(for (i <- 1 to 9; z <- solve(xs.updated(pos, i), pos)) yield z) toStream**。

任何建议表示赞赏。我正在寻找的另一个解决方案是在找到结果时返回结果。使用此解决方案，我可能只返回 1 个结果。谢谢

`isConflictAt(xs.updated(pos, 0), pos, xs(pos)`是一个约束检查函数。

```
 def solve(xs : List[Int], pos: Int): Stream[List[Int]] = {
    if (!isConflictAt(xs.updated(pos, 0), pos, xs(pos))) {
      val pos = xs.indexOf(0)
      if (pos < 0) {println(xs); Stream(xs) } else (for (i <- 1 to 9; z <- solve(xs.updated(pos, i), pos)) yield z) toStream
    } else Stream.empty
  } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T11:21:24.477

`for (i <- 1 to 9; z <- solve(???)) yield z`意味着`(1 to 9).flatMap{i => solve(???)}`。看到[这个答案](https://stackoverflow.com/a/1059501/406435)。

`1 to 9`要生成惰性结果，您应该使用`(1 to 9).view`or使源 ( ) 变得惰性`(1 to 9).toStream`。

试试这个：

```
scala> def solve(pos: Int): Stream[List[Int]] = {
     |   println(pos)
     |   Stream.fill(3)((1 to pos).map{ _ => util.Random.nextInt}.toList)
     | }
solve: (pos: Int)Stream[List[Int]]

scala> for{
     |   i <- (1 to 9).toStream
     |   z <- solve(i)
     | } yield z
1
res1: scala.collection.immutable.Stream[List[Int]] = Stream(List(-1400889479), ?)

scala> res1.force
2
3
4
5
6
7
8
9 
```

# r - 如何在内部函数中重用参数？

> ID：15809254
> 
> 赞同：5
> 
> 时间：2013-04-04T10:59:06.967
> 
> 标签：r

我有一个`do_something`接收四个参数并调用内部函数的函数`get_options`：

```
do_something <- function(name, amount, manufacturer="abc", width=4){ 
    opts <- get_options(amount, manufacturer = manufacturer, width = width)
}

get_options <- function(amount, manufacturer="abc", width = 4) { 
    opts <- validate_options(manufacturer, width)
} 
```

有时我会这样做`get_options(400)`，有时我想覆盖参数`get_options(400, manufacturer = "def")`，有时我会调用`do_something("A", 400)`或`do_something("A", 400, width=10)`.

通过在两个函数中为我的参数指定相同的默认值，我似乎是多余的。有没有更好的方法让他们共享这些默认值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T11:08:22.707

您可以使用省略号 ( `...`) 并且只为最低级别的函数提供默认值：

```
do_something <- function(name, amount, ...){ 
    opts <- get_options(amount, ...)
}

get_options <- function(amount, manufacturer="abc", width = 4) { 
    opts <- validate_options(manufacturer, width)
} 
```

您仍然应该能够运行以下所有内容：

```
get_options(400)
get_options(400, manufacturer = "def")
do_something("A", 400)
do_something("A", 400, width=10) 
```

并具有相同的结果。

# android - 解析 json 时，JSONException: Value ï»¿

> ID：15809255
> 
> 赞同：2
> 
> 时间：2013-04-04T10:59:07.780
> 
> 标签：android, json

我正在解析 json，但出了点问题。我在 LogCat 中收到此错误：

```
04-04 12:51:24.283: E/JSON Parser(9077): Error parsing data org.json.JSONException: Value ï»¿ of type java.lang.String cannot be converted to JSONObject 
```

这是我正在解析 json 的函数：

```
JSONParser jParser = new JSONParser();
                JSONObject json = jParser.getJSONFromUrl(url);
                JSONObject theJSON;
                try {

                    // Getting Array of albums
                    theJSON = json.getJSONObject("json");
                    albums = theJSON.getJSONArray(TAG_ALBUMS);
                    // looping through All albums
                    for (int i = 0; i < albums.length(); i++) {
                        JSONObject c = albums.getJSONObject(i);
                        String album_id = c.getString(TAG_ID);
                        String album_name = c.getString(TAG_NAME);
                        String album_singer = c.getString(TAG_SINGER);
                        String album_mix = c.getString(TAG_MIX);
                        String album_genre = c.getString(TAG_GENRE);
                        String album_thumb = "http://nelu.burduja.com/musica/cover_image/"
                                + c.getString(TAG_THUMB);
                        albumsArray.add(new Albums(album_id, album_name,
                                album_singer, album_genre, album_mix,
                                album_thumb, songsArray));
                        sngs = c.getJSONArray(TAG_SONGS);
                        // getting songs for the album
                        songsArray=new ArrayList<Songs>();
                        for (int j = 0; j < sngs.length(); j++) {
                            JSONObject songs = sngs.getJSONObject(j);
                            String song_artist = songs.getString(TAG_SONG_ARTIST);
                            String song_mp3 = songs.getString(TAG_SONG_MP3);
                            String song_mp4 = songs.getString(TAG_SONG_MP4);
                            String song_thumb = songs.getString(TAG_SONG_THUMB);
                            String song_title = songs.getString(TAG_SONG_TITLE);
                            songsArray.add(new Songs(song_title, song_artist,
                                    song_mp3, song_mp4, song_thumb));

                        }
                        albumsArray.get(i).setSongs(songsArray);
                    }

                } catch (JSONException e) {
                    e.printStackTrace();
                } 
```

这是我的 json 输出：

```
 {
   "json":{
      "albums":[
         {
            "id":"1",
            "name":"Summer hits",
            "singer":"",
            "genre":"Trance",
            "mix":"yes",
            "thumb":"cov_515aa81ff03a3.jpeg",
            "songs":[
               {
                  "song":"Song 1",
                  "artist":"Singer 1",
                  "mp3":"",
                  "mp4":"http://youtu.be/Jdra3HU6w0I",
                  "thumb":"snwith_515bf52a1d8e2.jpeg"
               },
               {
                  "song":"Song 3 ",
                  "artist":"Singer 3",
                  "mp3":"",
                  "mp4":"",
                  "thumb":"snwith_515bf55476e2c.jpeg"
               },
               {
                  "song":"Song 4",
                  "artist":"Singer 4",
                  "mp3":"",
                  "mp4":"",
                  "thumb":"snwith_515c14974562f.jpeg"
               },
               {
                  "song":"Super hit",
                  "artist":"Gherghe Topa",
                  "mp3":"with_515c34d1bbde7.mp3",
                  "mp4":"",
                  "thumb":"snwith_515c34d1aeee1.jpeg"
               }
            ]
         },
         {
            "id":"2",
            "name":"Rock In",
            "singer":"Limp Bizkit",
            "genre":"Pop",
            "mix":"no",
            "thumb":"cov_515ab5aff24fe.jpeg",
            "songs":[
               {
                  "song":"In the end",
                  "artist":"Linkin park",
                  "mp3":"",
                  "mp4":"",
                  "thumb":""
               },
               {
                  "song":"December",
                  "artist":"Linkin park",
                  "mp3":"",
                  "mp4":"",
                  "thumb":""
               },
               {
                  "song":"Rock in baby",
                  "artist":"Linkin park",
                  "mp3":"",
                  "mp4":"",
                  "thumb":""
               },
               {
                  "song":"Bang head",
                  "artist":"Linkin park",
                  "mp3":"",
                  "mp4":"",
                  "thumb":""
               }
            ]
         },
         {
            "id":"3",
            "name":"Hybrid Theory",
            "singer":"Linkin park",
            "genre":"Pop",
            "mix":"no",
            "thumb":"cov_515ab6010a98a.jpeg",
            "songs":[

            ]
         }
      ]
   }
} 
```

这是我完整的 logCat 错误日志：

```
04-04 12:51:24.283: E/JSON Parser(9077): Error parsing data org.json.JSONException: Value ï»¿ of type java.lang.String cannot be converted to JSONObject
04-04 12:51:24.283: W/dalvikvm(9077): threadid=11: thread exiting with uncaught exception (group=0x40a7e1f8)
04-04 12:51:24.293: E/AndroidRuntime(9077): FATAL EXCEPTION: AsyncTask #1
04-04 12:51:24.293: E/AndroidRuntime(9077): java.lang.RuntimeException: An error occured while executing doInBackground()
04-04 12:51:24.293: E/AndroidRuntime(9077):     at android.os.AsyncTask$3.done(AsyncTask.java:278)
04-04 12:51:24.293: E/AndroidRuntime(9077):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
04-04 12:51:24.293: E/AndroidRuntime(9077):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
04-04 12:51:24.293: E/AndroidRuntime(9077):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
04-04 12:51:24.293: E/AndroidRuntime(9077):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
04-04 12:51:24.293: E/AndroidRuntime(9077):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
04-04 12:51:24.293: E/AndroidRuntime(9077):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
04-04 12:51:24.293: E/AndroidRuntime(9077):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
04-04 12:51:24.293: E/AndroidRuntime(9077):     at java.lang.Thread.run(Thread.java:856)
04-04 12:51:24.293: E/AndroidRuntime(9077): Caused by: java.lang.NullPointerException
04-04 12:51:24.293: E/AndroidRuntime(9077):     at com.myapp.activities.LatestAlbums$5.doInBackground(LatestAlbums.java:196)
04-04 12:51:24.293: E/AndroidRuntime(9077):     at com.myapp.activities.LatestAlbums$5.doInBackground(LatestAlbums.java:1)
04-04 12:51:24.293: E/AndroidRuntime(9077):     at android.os.AsyncTask$2.call(AsyncTask.java:264)
04-04 12:51:24.293: E/AndroidRuntime(9077):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
04-04 12:51:24.293: E/AndroidRuntime(9077):     ... 5 more 
```

我注意到如果我手动清除新行（'\n）中的 json 输出以及对象和数组之间的空格，它可以正常工作。有人知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:21:34.620

您看到的字符“ï»¿”是[字节顺序标记](http://en.wikipedia.org/wiki/Byte_order_mark)，因此您应该检查您的编码（带或不带 BOM 的 utf8）。

# javascript - 如何在保存在 Mongoose 之前检查数据库中是否存在嵌入式文档

> ID：15809262
> 
> 赞同：0
> 
> 时间：2013-04-04T10:59:24.290
> 
> 标签：javascript, node.js, express, mongoose, passport.js

我正在使用 Express、Mongoose 和 PassportJS 制作一个基本的身份验证系统。我要做的是检查数据库中输入的用户名和密码是否已经存在于数据库中。下面是我的示例代码：

```
//Post: /signup
app.post('/signup', function (req, res) {
  var username = req.body.person.user.username;
  var password = req.body.person.user.password;

  Person.user.find({'username': username}, function (err, user) {
    if (err) {
      console.log(err.name);
    } else {
      console.log('User Found');
    }
  });
}); 
```

问题是它返回这种错误：

```
TypeError: Cannot call method 'find' of undefined 
```

有人可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:31:54.113

正如 robertklep 指出的那样，您没有正确检查用户的存在。此外，由于用户名很可能是唯一的，因此您可以只使用 findOne（findOne() 返回单个对象，而 find() 也可能返回单个对象但会将其包装在数组中）。

```
Person.findOne({'username': username}, function (err, user) {
  if (err) {
     console.log(err.name);
     return;
  }
  if (!user)
    console.log('User not Found');
    return;
  }
  console.log('User found');

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:10:32.240

我想你正在寻找这个：

```
Person.find({ 'user.username' : username }, ...) 
```

FWIW，如果没有错误调用回调，这并不意味着找到了用户，它只是意味着执行查询时没有错误。但是`user`仍然可以为空，这意味着查询没有任何匹配的结果。

# android - 在 Android 中滑动页面

> ID：15809265
> 
> 赞同：0
> 
> 时间：2013-04-04T10:59:29.297
> 
> 标签：android, android-activity, swipe

我是本节的新手。我搜索了，我得到的是`view pager`滑动页面。

谁能告诉我如何进行完美的滑动以及我应该使用哪种技术。

这是我得到的[链接](http://viewpagerindicator.com/)

```
<com.viewpagerindicator.TitlePageIndicator
    android:id="@+id/titles"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent" /> 
```

我有以下疑问：

使用`Viewpager`我可以滑动页面吗？

这是我想要做的图像：

![在此处输入图像描述](https://i.stack.imgur.com/sgtTC.png)

如果可以的话，我可以这样做吗`every direction`

@谢谢 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T15:53:15.090

我认为[jFeinstein 的 SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)正是您所需要的。我已经使用过很多次了，与我尝试过的其他产品相比，它是我的最佳选择。

虽然您可以尝试[6wunderkinder 团队的滑动层](https://github.com/6wunderkinder/android-sliding-layer-lib)，但尚未对其进行测试，但在视觉上看起来确实不错；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:11:14.077

滑动 ViewPager 你可以看到它：

[浏览页面](http://blog.peterkuterna.net/2011/09/viewpager-meets-swipey-tabs.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T18:43:44.277

好像你需要 Fly 菜单.. 有很多可用的开源库.. 你看看[这个](https://github.com/Espiandev/FlyInMenu)..

# javascript - 在运行时用 DIV 包装表

> ID：15809278
> 
> 赞同：1
> 
> 时间：2013-04-04T11:00:10.313
> 
> 标签：javascript, css, html, scrollbar

我在这里的第一个问题。

给定一张桌子：

```
<table id="mytable">
 <tr><td>row1 col1</td><td>row1 col2</td></tr>
 <tr><td>row2 col1</td><td>row2 col2</td></tr>
</table> 
```

我知道如果我用 包裹上面的`<div style="overflow-x:scroll;">`内容，我将在表格下方有一个水平滚动条。不幸的是，我无法更改 table/html 的编写方式。我只能通过 javascript 操作内容。

我试过：

```
document.getElementByID("mytable").style.overflowX = scroll; 
```

但它没有用。

知道是否可以做到吗？如何？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T11:03:49.437

您可以使用

```
$("#yorutable").wrap($("<div />").css("overflow-x":"scroll")); 
```

用 div 运行时间扭曲你的桌子。

如果你不能添加 jquery，你可以做类似的事情

```
var tbl = document.getElementById('yourtable'); 
var parent = tbl.parentNode;
var wrapper = document.createElement('div');
wrapper.style.overflowX="scroll"; 
wrapper.appendChild(tbl);
parent.appendChild(wrapper); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-23T02:39:29.533

Pratik 的解决方案具有教育意义，但并非 100% 正确。如果表是其父项中的最后一项，它将起作用；否则它会将表格重新排序为最后一个。[这个问题](https://stackoverflow.com/questions/6173941/how-to-write-an-element-just-after-another-with-javascript)讲述了故事的其余部分。

把整个故事放在一起：

```
var tbl = document.getElementById('yourtable'); 
var parent = tbl.parentNode;
var wrapper = document.createElement('div');
wrapper.style.overflowX="scroll"; 
parent.insertBefore( wrapper, tbl );
wrapper.appendChild(tbl); 
```

# c++ - 是否可以在一行中创建一个 std::list 并指定其值（c++）？

> ID：15809281
> 
> 赞同：2
> 
> 时间：2013-04-04T11:00:26.097
> 
> 标签：c++, list, stdlist

我想`std::list`通过指定它的值来创建一个，我想在一行中完成它，例如：

```
std::list<std::string> myList("Cat", "Dog", "Pig"); // doesn't compile 
```

我找不到简单的方法来做到这一点（我对[c++ 参考的示例](http://www.cplusplus.com/reference/list/list/list/)`std::list`不满意），我错过了什么吗？如果标准列表不可能，有什么原因吗？那么实现它的最简单方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T11:02:07.847

在 C++11 中，您可以使用初始化程序：

```
std::list<std::string> t { "cat", "dog" }; 
```

在 C++03[`boost::assign::list_of`](http://www.boost.org/doc/libs/1_53_0/libs/assign/doc/index.html#list_of)中可用：

```
#include <boost/assign/list_of.hpp>

std::list<std::string> t = boost::assign::list_of("cat")("dog"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-04T11:04:24.757

使用[Boost.Assign](http://www.boost.org/doc/libs/1_53_0/libs/assign/doc/index.html)。

```
#include <boost/assign/list_of.hpp>     
std::list<std::string> test = boost::assign::list_of("abc")("def"); 
```

在[c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")中使用初始化器

```
std::list<std::string> test { "abc", "def" }; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T11:02:05.250

在 c++11 中你可以写

```
std::list<std::string> foo = { "bar", "meh", "bah" }; 
```

你需要一个最新的编译器。（即 gcc 4.8）

否则在 c++ 中是不可能的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T11:02:21.857

```
std::list<std::string> myList { "Cat", "Dog", "Pig"}; 
```

仅限 C++11。对于较旧的 C++，请参阅[Boost.Assign](http://www.boost.org/doc/libs/1_53_0/libs/assign/doc/index.html)。

```
using boost::asign::list_of;

std::list<std::string> myList = list_of("Cat")("Dog")("Pig"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T11:02:29.160

在 C++11 中，您可以使用[统一初始化](http://en.wikipedia.org/wiki/C%2B%2B11#Uniform_initialization)来执行此操作：

```
std::list<std::string> myList{"Cat", "Dog", "Pig"}; 
```

# jquery - 如何设计页面右侧的文本框mvc razor

> ID：15809284
> 
> 赞同：1
> 
> 时间：2013-04-04T11:00:30.347
> 
> 标签：jquery, css, asp.net-mvc-3, razor

我想将我的登录名（用户名、密码）放在页面的右侧。我是剃须刀的新手。我需要帮助。我不知道 jquery 是否有用。任何人都给我一些想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:04:45.010

对于剃刀实现，您不需要做任何具体的事情。您可以将 CSS 应用于您的输入并将它们放置在您需要的任何位置：

例如：

```
<div>
    <input type="text" class="user"/>
    <input type="text"  class="password"/>
    <input type="button" value="I'm on the left" />
</div> 
```

使用以下 CSS：

```
input.user, input.password
{
    float:right;
    clear:right;
} 
```

这是一个演示它的小提琴：http: [//jsfiddle.net/5tMM7/](http://jsfiddle.net/5tMM7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:13:50.620

从 CSS 中移除

```
clear:right 
```

[参考](http://jsfiddle.net/5tMM7/1/)

# mysql - MySql Dump 输出条件注释？执行转储查询以恢复数据库

> ID：15809285
> 
> 赞同：3
> 
> 时间：2013-04-04T11:00:37.627
> 
> 标签：mysql, comments, restore, dump

注意：实际上是两个问题...

当我使用二进制文件转储 mysql 数据库时，`mysqldump`我得到一个包含（除其他行外）以下内容的文件： `CREATE DATABASE /*!32312 IF NOT EXISTS*/`MyDatabase`/*!40100 DEFAULT CHARACTER SET utf8 */;`

我在 Google 和 MySql 参考资料上进行了搜索，但找不到 /*!32312 的含义以及它们的工作原理。我只能猜测它们是有条件的评论。比如如果构建> 32312，执行“如果不存在”？

任何人都可以对此有所了解吗？

我想知道这一点的原因是因为我无法在 C# 客户端中使用转储的内容作为 1 查询执行还原。使用此代码：

```
 MySqlConnection msc = default(MySqlConnection);
            MySqlCommand cmd = default(MySqlCommand);
            MySqlTransaction mst = default(MySqlTransaction);
            try
            {
                //Create a connection to the database
                msc = new MySqlConnection(ConnectionString);
                msc.Open();

                //Creata a MySql Transaction
                mst = msc.BeginTransaction();

                cmd = msc.CreateCommand();
                cmd.Transaction = mst;
                cmd.CommandText = ContentsOfMySqlDumpSql;

                cmd.ExecuteNonQuery();

                mst.Commit();
            } 
```

我真的必须将mysql作为带有命令行参数的进程来恢复转储吗？因为我真的想在 C# 客户端中使用它作为 SQL 查询来完成转储的恢复，因为它比控制 mysql 二进制文件输出和退出代码等更方便......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T11:09:07.667

它们确实是特定于版本的注释，如[注释语法](http://dev.mysql.com/doc/refman/5.5/en/comments.html)中所述。

这些注释仅在服务器支持时才允许执行语句的可选部分。

```
/*!40100 DEFAULT CHARACTER SET utf8 */; 
```

表示只有在 MySQL 服务器版本为 4.01.00 或更高版本时才会执行此部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T21:10:40.310

*正如问题的原始海报所述：*

* * *

使用`Query = Regex.Replace(QueryOrFilePath, @"(?:\/\*!\d+\s)|(?:\*\/)", @"", RegexOptions.Multiline);`将删除所有注释和版本-a-like 符号，仅将查询保留在特定于版本的注释内。

如果您确定在版本兼容的数据库上执行查询，这很有用。

# asp.net - asp.net cookie 不存储值

> ID：15809294
> 
> 赞同：1
> 
> 时间：2013-04-04T11:01:00.770
> 
> 标签：asp.net, .net

我正在使用下面的代码段在 asp 中设置一个 cookie。当我在萤火虫中查看我的 cookie 时，我看到了 cookie，但是值本身是空白的。
我知道该`respondArray[1]`变量是一个字符串，但它只是没有保存到 cookie 中。

```
 System.Web.HttpCookie cookie = new System.Web.HttpCookie("secretKey", respondArray[1]);
 Response.Cookies.Add(cookie); 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:12:07.803

试试这个可能对你有帮助

```
 HttpCookie userCookie = new HttpCookie("UserInfo");  
        userCookie["Country"] = "Italy";  
        userCookie["City"] = "Rome";  
        userCookie["Name"] = "Jones";  

if (cookie != null)   
        {  
            string country = cookie["Country"];  
            string city = cookie["City"];  
            string name = cookie["Name"];  
            Label2.Text = "Cookie Found and read<br/>";  
            Label2.Text += "Name: " + name;  
            Label2.Text += "<br />Country: " + country;  
            Label2.Text += "<br />City: " + city;  
        } 
```

# python - Python SyntaxError: ("'return' with argument inside generator",)

> ID：15809296
> 
> 赞同：30
> 
> 时间：2013-04-04T11:01:02.757
> 
> 标签：python, return, generator, tornado

我的 Python 程序中有这个函数：

```
@tornado.gen.engine
def check_status_changes(netid, sensid):        
    como_url = "".join(['http://131.114.52:44444/ztc?netid=', str(netid), '&sensid=', str(sensid), '&start=-5s&end=-1s'])

    http_client = AsyncHTTPClient()
    response = yield tornado.gen.Task(http_client.fetch, como_url)

    if response.error:
            self.error("Error while retrieving the status")
            self.finish()
            return error

    for line in response.body.split("\n"):
                if line != "": 
                    #net = int(line.split(" ")[1])
                    #sens = int(line.split(" ")[2])
                    #stype = int(line.split(" ")[3])
                    value = int(line.split(" ")[4])
                    print value
                    return value 
```

我知道

```
for line in response.body.split 
```

是一个发电机。但我会将 value 变量返回给调用该函数的处理程序。这可能吗？我能怎么做？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-04-04T11:05:26.647

在 Python 2 或 Python 3.0 - 3.2 中，您不能使用`return`with 值退出生成器。您需要使用`yield`plus a`return` *而不*使用表达式：

```
if response.error:
    self.error("Error while retrieving the status")
    self.finish()
    yield error
    return 
```

在循环本身中，`yield`再次使用：

```
for line in response.body.split("\n"):
    if line != "": 
        #net = int(line.split(" ")[1])
        #sens = int(line.split(" ")[2])
        #stype = int(line.split(" ")[3])
        value = int(line.split(" ")[4])
        print value
        yield value
        return 
```

替代方法是引发异常或使用龙卷风回调。

在 Python 3.3 和更新版本中，`return`生成器函数中的值会导致该值附加到`StopIterator`异常。对于`async def`异步生成器（Python 3.6 及更高版本），`return`仍然必须是无价值的。

# php - 使用外部数据库类创建新类

> ID：15809300
> 
> 赞同：0
> 
> 时间：2013-04-04T11:01:16.487
> 
> 标签：php, mysql, oop

我只是在创建一个简单的独立股票更新程序并将我的手转向 OOP 而不仅仅是基于函数的。我创建了一个简单的类，它需要我的数据库连接，但想知道包含和使用数据库连接的最佳实践。第一个应用是将使用数据库的类。第二个是“dbconnector.php”的内容。

```
class stockUpdater {

    var $data = '';

    function __construct() {
        include('dbconnector.php');
        print_r($mysqli);

        //check and get file
        $fp = fopen('stockfiles/stockfile.csv', 'r');
        if($fp){
            while(! feof($fp)) {
                $prods[] = fgetcsv($fp);
            }
        }

        if(empty($prods)){
            $this->logError(time(),'No data found in file');
        }
    }

    //error logging function
    private function logError($time, $message){

    }
}

$updateStock = new stockUpdater(); 
```

我知道我在这里所做的工作，但不知道是否有比在每个类中包含数据库连接脚本更好的方法，因为这可以在只需要 1 个时创建多个数据库连接。

```
$mysqli = new mysqli(DB_HOSTNAME, DB_USERNAME, DB_PASSWORD, DB_DATABASE);

/*
 * This is the "official" OO way to do it,
 * BUT $connect_error was broken until PHP 5.2.9 and 5.3.0.
 */
if ($mysqli->connect_error) {
    die('Connect Error (' . $mysqli->connect_errno . ') '
            . $mysqli->connect_error);
}

/*
 * Use this instead of $connect_error if you need to ensure
 * compatibility with PHP versions prior to 5.2.9 and 5.3.0.
 */
if (mysqli_connect_error()) {
    die('Connect Error (' . mysqli_connect_errno() . ') '
            . mysqli_connect_error());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:39:30.663

解决此问题的最简单方法是环绕`$mysqli`实例。

定义`StockUpdater`类（建议类名首字母大写）

```
class StockUpdater {
    private $mysqli;

    public function __construct($mysqli) {
        $this->mysqli = $mysqli;
    }

    public function doStuff() {
        // do stuff with $this->mysqli
    }
} 
```

并像使用它一样

```
require_once('dbconnector.php');

$su = new StockUpdater($mysqli);
$su->doStuff(); 
```

# php - fullcalendar 没有从 mysql php 读取 json 事件

> ID：15809304
> 
> 赞同：0
> 
> 时间：2013-04-04T11:01:22.767
> 
> 标签：php, mysql, fullcalendar, json

我正在尝试根据通过 php 从 mysql 中提取的数据预先填充 fullcalendar。但是，该事件并未在完整日历中填充。我的代码是：

```
 function invokeNewCal(elem)
 {
    var date = new Date();
        var d = date.getDate();
        var m = date.getMonth();
        var y = date.getFullYear();

        var calendar = $(elem).fullCalendar({
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month,agendaWeek,agendaDay'
            },
            selectable: true,
            selectHelper: true
            editable: true,
            events: {
        url: 'index.php?methodname=getevents'
        }
        });

 } 
```

方法是：

```
function getevents($m,$n)
{
    echo json_encode(array('title'=>'Hello','start'=>'Wed, 10 Apr 2013 13:00:00 IST','end'=>'Wed, 10 Apr 2013 17:00:00 IST'));
} 
```

这个 JSON 响应是：

```
{"title":"Hello","start":"Wed, 10 Apr 2013 13:00:00 IST","end":"Wed, 10 Apr 2013 17:00:00 IST"} 
```

但是，该事件未在 fullCalendar 上显示。知道我错过了什么吗？

谢谢

完整请求/响应：

```
 Request URL:
    http://localhost/linkd/index.php?methodname=getevents&start=1364668200&end=1368297000&_=1365120846819

    Request Method:
    GET

    Status Code:
    HTTP/1.1 200 OK

    Request Headers
    05:44:26.000

  X-Requested-With:XMLHttpRequestUser-Agent:Mozilla/5.0 (Windows NT 6.1; rv:19.0) Gecko/20100101 Firefox/19.0Referer:http://localhost/linkd/schooladmin.phpHost:localhostConnection:keep-aliveAccept-Language:en-US,en;q=0.5Accept-Encoding:gzip, deflateAccept:application/json, text/javascript, */*; q=0.01

    Sent Cookie
    PHPSESSID:cs7ai8vreh43q9otaff91kpe67

    Response Headers
    Δ23ms

  X-Powered-By:PHP/5.3.21Server:Apache/2.2.21 (Win32) PHP/5.3.21Keep-Alive:timeout=5, max=99Date:Fri, 05 Apr 2013 00:14:26 GMTContent-Type:text/htmlContent-Length:95Connection:Keep-Alive

      Response Body
      Δ0ms

    {"title":"Hello","start":"Wed, 10 Apr 2013 13:00:00 EST","end":"Wed, 10 Apr 2013 17:00:00 EST"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:43:13.240

请将时区从 IST 更改为 EST。

```
{
      "title":"Hello",
      "start":"Wed, 10 Apr 2013 13:00:00 EST",
      "end":"Wed, 10 Apr 2013 17:00:00 EST"
} 
```

以下是我们有两个事件的演示，一个在 IST 中，另一个在 EST 中，但仅显示 EST。

**[演示](http://jsfiddle.net/maheshsapkal/nzFPh/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T13:52:26.133

我建议使用[文档](http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)中指定的 ISO8601 标准。
如果您转到 Mahesh Sapkal 创建的 DEMO 并将那里的日期更改为标准，两者都会出现。
标准格式很简单：**YYYY-MM-DDTHH:mm:ss**其中**T**是时间和日期之间的分隔符。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:36:38.357

**您好**，
我遇到了同样的问题，解决方法是您需要使用 它，`events: JSON.parse(yourListOfEvents)`否则它将无法正常工作。

希望它会有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T05:15:03.197

检查[文档](http://arshaw.com/fullcalendar/docs/event_data/events_json_feed/)，您有额外的大括号`events:{url:xxx}`；而且在您的 json_response 中，您只编码一个事件：您需要它们的数组。

# php - php获取数组索引

> ID：15809310
> 
> 赞同：-1
> 
> 时间：2013-04-04T11:01:45.603
> 
> 标签：php, arrays, for-loop

嗨，我有一个数组，输出如下：

```
Array
(
    [0] => Array
        (
            [cat1_id] => 1
            [sub_cat1_id] => 1065
            [b_subcat_name] => Asian
        )

    [1] => Array
        (
            [cat3_id] => 1
            [sub_cat3_id] => 1011
            [b_subcat_name] => Barbeque
        )

) 
```

我正在使用 for 循环来输出这些数据，但是我怎样才能获取`sub_cat1_id`并`sub_cat2_id`命名以在 html 上输出？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:03:43.587

您必须在循环内循环并获取 keyName

```
 foreach($UpperLoop as $l1)
              foreach($l1 as $l2)
                 { here you will get the key Name } 
```

# css - 在标签中拉伸的背景图像

> ID：15809312
> 
> 赞同：2
> 
> 时间：2013-04-04T11:01:52.150
> 
> 标签：css

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:06:44.973

使用该`background-size`属性定义背景的大小：

```
background-size: 87px 76px; 
```

**来源**

[MDN - CSS 背景](https://developer.mozilla.org/en-US/docs/CSS/background)
[MDN - CSS 背景大小](https://developer.mozilla.org/en-US/docs/CSS/background-size)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:04:53.433

简单的，

创建相同大小的图像。`height:76px; width:87px;`

那么它就不会伸展。

# matlab - MATLAB：将元胞数组的元素与另一个矩阵相乘以创建一个由乘积组成的新元胞数组

> ID：15809313
> 
> 赞同：1
> 
> 时间：2013-04-04T11:01:54.510
> 
> 标签：matlab, vectorization, matrix-multiplication, cells

我有一个由许多 (2x1) 矩阵组成的单元格数组 A。我有另一个矩阵 B (2x2)，我打算将它与单元格 A 的每个元素相乘。换句话说，数组 A 中的每个矩阵都必须与 B 相乘以生成另一个单元格数组 C（与 A 大小相同），包括2x1 矩阵。

视觉上，

```
B*|A{1,1} A{1,2} ... A{1,n}| = |C{1,1} C{1,2} ... C{1,n}|
  |::::::::::::::::::::::::|   |::::::::::::::::::::::::|
  |A{m,1} A{m,2} ... A{m,n}|   |C{m,1} C{m,2} ... C{m,n}| 
```

这里，C{i,j}=B*A{i,j}

使用*cellfun*执行此操作非常缓慢。 **有没有一种方法可以在不使用显式循环的情况下对其进行矢量化并加速操作而不管 A 和 B 的大小（只要它们是可乘的）？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:04:46.483

我能想到几个方法。首先，我通过生成一些虚假数据

```
A = cellfun(@(~)rand(2,1), cell(1000), 'uni', false);
B = rand(2); 
```

## 细胞乐趣

正如您所说，这是您要避免的。在任何情况下，我都会将其包含在此处进行比较：

```
C = cellfun(@(x)B*x, A, 'UniformOutput',false); 
```

由于涉及匿名函数，它很慢。带有内置字符串函数（请参阅 参考资料`help cellfun`）的 Cellfun 正在迅速发展，但是，匿名函数会在每次迭代时强制执行由 Matlab 解释器通过。尽管 JIT 可以在一定程度上提高效率，但远非最佳。

## 单元格扩展，num2cell，重塑

想法：将单元格扩展为 2x1000 矩阵，执行乘法，然后将结果转换回正确大小的单元格数组。虽然原则上很优雅，但在实践中它变得有点混乱：

```
C = reshape( num2cell(B*[A{:}],1), size(A) ); 
```

请注意，从内存占用的角度来看，中间的 2x1000 临时文件有点浪费……而且，通过`num2cell`（非内置）和“无用”`reshape`会大大减慢执行速度。

## 循环

循环最容易阅读，最容易实现。内存占用小，有利于 JIT 加速等。

```
C = cell(size(A));
for ii = 1:numel(A)        
   C{ii} = B*A{ii};        
end 
```

唯一的缺点是它*的坏名声*:)

## 比较

现在是踢球者：哪一个是最快的？

```
tic
C = cellfun(@(x)B*x, A, 'uni',false);
toc

tic 
C = reshape( num2cell(B*[A{:}],1), size(A) );
toc

tic
C = cell(size(A));
for ii = 1:numel(A)    
    C{ii} = B*A{ii};    
end
toc 
```

结果：

```
Elapsed time is 4.738791 seconds.  % cellfun
Elapsed time is 4.161515 seconds.  % cell expansion, num2cell, reshape
Elapsed time is 3.808822 seconds.  % loop 
```

结论：自 R2008 引入 JIT 编译以来，循环*不再是邪恶的；*默认情况下不要试图避免它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T11:08:11.573

您可以使用`mat2cell`/`cell2mat`

```
A = rand(2, 10);
B = rand(2, 2);
Ac = mat2cell(A, 2, repmat(1, size(A, 2), 1)); % Convert to cell to generate your initial data

Amat = cell2mat(Ac); % Now it's a matrix
Cmat = B * Amat;
C = mat2cell(Cmat, 2, repmat(1, size(A, 2), 1)); % Now it's a cell array again 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T11:15:27.113

我刚试过这个，我希望它是你要找的：

```
clc,clear all,close all
clc,clear all,close all
A = cell(10,2);
for jj = 1:numel(A)
 A{jj} = rand(2,1);
end

B = rand(2,2);
C = cat(3,A{:});
D = cell(size(A));

for ii = 1:size(C,3)
 D{ii} = B*C(:,:,ii);
end 
```

它包含一个显式`for`循环（我知道），但在最新的 MATLAB 版本中，性能不应该受到调用`for`循环的严重影响。

或者您可以使用此答案作为提示。我希望这有帮助。

# php - Laravel Eloquent 多对多如何

> ID：15809319
> 
> 赞同：4
> 
> 时间：2013-04-04T11:02:08.363
> 
> 标签：php, relationship, laravel, laravel-4, eloquent

我正在尝试学习 Laravel，现在我正在尝试 Eloquent。我有以下情况，我现在无法解决：

假设我正在创建一个网上商店，所以我有产品（产品 1、产品 2 等）：

```
+-------------+------------------+------+-----+---------------------+----------------+
| Field       | Type             | Null | Key | Default             | Extra          |
+-------------+------------------+------+-----+---------------------+----------------+
| id          | int(10) unsigned | NO   | PRI | NULL                | auto_increment |
| name        | varchar(255)     | NO   |     | NULL                |                |
| slug        | varchar(255)     | NO   |     | NULL                |                |
| description | text             | NO   |     | NULL                |                |
| price       | decimal(5,2)     | NO   |     | NULL                |                |
| active      | tinyint(4)       | NO   |     | 1                   |                |
| created_at  | timestamp        | NO   |     | 0000-00-00 00:00:00 |                |
| updated_at  | timestamp        | NO   |     | 0000-00-00 00:00:00 |                |
+-------------+------------------+------+-----+---------------------+----------------+ 
```

这些产品按分类法分类（品牌、颜色、部门）：

```
+-------------+------------------+------+-----+---------------------+----------------+
| Field       | Type             | Null | Key | Default             | Extra          |
+-------------+------------------+------+-----+---------------------+----------------+
| id          | int(10) unsigned | NO   | PRI | NULL                | auto_increment |
| name        | varchar(255)     | NO   |     | NULL                |                |
| slug        | varchar(255)     | NO   |     | NULL                |                |
| description | text             | NO   |     | NULL                |                |
| created_at  | timestamp        | NO   |     | 0000-00-00 00:00:00 |                |
| updated_at  | timestamp        | NO   |     | 0000-00-00 00:00:00 |                |
+-------------+------------------+------+-----+---------------------+----------------+ 
```

这些分类有术语（Nike、Adidas、Red、Green、Boys、Girls）：

```
+-------------+------------------+------+-----+---------------------+----------------+
| Field       | Type             | Null | Key | Default             | Extra          |
+-------------+------------------+------+-----+---------------------+----------------+
| id          | int(10) unsigned | NO   | PRI | NULL                | auto_increment |
| taxonomy_id | int(11)          | NO   |     | NULL                |                |
| name        | varchar(255)     | NO   |     | NULL                |                |
| slug        | varchar(255)     | NO   |     | NULL                |                |
| description | text             | NO   |     | NULL                |                |
| created_at  | timestamp        | NO   |     | 0000-00-00 00:00:00 |                |
| updated_at  | timestamp        | NO   |     | 0000-00-00 00:00:00 |                |
+-------------+------------------+------+-----+---------------------+----------------+ 
```

最后，我有一个数据透视表来将术语与产品联系起来：

```
+------------+------------------+------+-----+---------------------+----------------+
| Field      | Type             | Null | Key | Default             | Extra          |
+------------+------------------+------+-----+---------------------+----------------+
| id         | int(10) unsigned | NO   | PRI | NULL                | auto_increment |
| product_id | int(11)          | NO   |     | NULL                |                |
| term_id    | int(11)          | NO   |     | NULL                |                |
| created_at | timestamp        | NO   |     | 0000-00-00 00:00:00 |                |
| updated_at | timestamp        | NO   |     | 0000-00-00 00:00:00 |                |
+------------+------------------+------+-----+---------------------+----------------+ 
```

我已经为 Product、Taxonomy 和 Term 创建了模型，如下所示：

```
<?php

class Product extends Eloquent {

    public function terms()
    {
        return $this->belongsToMany('Term', 'product_terms', 'product_id', 'term_id');
    }

}

<?php

class Taxonomy extends Eloquent {

    public function terms()
    {
        return $this->hasMany('Term');
    }

}

<?php

class Term extends Eloquent {

    public function taxonomy()
    {
        return $this->belongsTo('Taxonomy');
    }

} 
```

现在我想做以下事情，我想获取所有产品，遍历它们并显示名称、描述和价格之类的东西。好吧，`$products = Product::all();`我只需要一个简单的。然后，当我遍历产品时，我知道我可以做一些事情，比如`$product->terms`获取所有条款。但是应该如何获得给定分类法的术语。所以例如这样的事情：

```
<?php
echo $product->term('brand'); // Where 'brand' is the taxonomy name of the term I want to get
echo $product->term('color'); // Where 'color' is the taxonomy name of the term I want to get 
```

希望可以有人帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:20:19.090

好吧，我*想*我明白你的设置了。鉴于您所说的关系，我认为您将模型定义如下：

```
<?php

class Product extends Eloquent {

    public function terms()
    {
        return $this->belongsToMany('Term')->withTimestamps();
    }

}

<?php

class Taxonomy extends Eloquent {

    public function terms()
    {
        return $this->hasMany('Term');
    }

}

<?php

class Term extends Eloquent {

    public function taxonomy()
    {
        return $this->belongsTo('Taxonomy');
    }

    public function products()
    {
        return $this->belongsToMany('Product')->withTimestamps();
    }

} 
```

由于您的枢轴已正确命名和标识，因此您不必在 belongsToMany 关系中指定该信息，但如果您希望时间戳工作，您需要 withTimestamps。

**编辑：**

如果您可以通过 id 而不是 slug 查看分类法，这将起作用：

```
$products = Product::all();
foreach($products as $product)
{
    $term = $product->terms()->with('taxonomy')->where('taxonomy_id', '=', 2)->first();
    echo $term->name;
} 
```

在上面的场景中，您可以只将分类 slug 存储在术语表中，因为它应该是唯一的键。否则，您可以查看术语并查找具有所需分类的术语：

```
$products = Product::all();
foreach($products as $product)
{
    $terms = $product->terms()->with('taxonomy')->get();
    foreach($terms as $term)
    {
        if($term->taxonomy->slug == 'brand')
        {
            echo $term->name."<br />";
        }
    }
} 
```

**结束编辑**

我不得不承认我有点迷茫，因为你的最后两张表看起来完全一样，我想知道你为什么将术语与产品联系起来，而不是将分类法与产品联系起来。我怀疑我的解决方案不适用于您关联事物的方式，但如果您将分类法与产品关联起来，它会很好地工作。

```
<?php
$product->taxonomy()->where('slug', '=', 'brand')->term; 
```

# c++ - 试图解决我的双端队列类和树类之间的循环引用错误

> ID：15809320
> 
> 赞同：0
> 
> 时间：2013-04-04T11:02:08.807
> 
> 标签：c++, forward-declaration, cyclic-reference

谁能帮我解决我在这里遇到的循环引用错误。

我创建了自己的类，`deque`该类由`breadthFirst`.`FibTree`

以下是单独的 Header 和 CPP 文件中的亮点。文件中存在*无效使用不完整类型*和*前向声明错误*的问题`FibTree`。我在下面的代码行中标记了这些错误。

**双端队列**

```
#ifndef DEQUE_H
#define DEQUE_H

#include "fibtree.h"

class dequeNode {
public:
    FibTree::Node* data;
};

class dequeList {
public:
    dequeNode* firstNode;
    dequeNode* lastNode;

    dequeList( void );

    void enque( FibTree::Node* );
    FibTree::Node* deque( void );
};

#endif 
```

**纤维树**

```
#ifndef FIBTREE_H
#define FIBTREE_H

#include <iostream>

class dequeList; // ERROR: Forward declaration of 'struct dequeList' (2 ERRORS)

class FibTree {
public:
    class Node {
        ...
    };

    Node const* root; // 'root' pointer to constant Node

    FibTree (int);

    void breadthFirst(Node const* root);

};
#endif 
```

**纤维树.cpp**

```
#include "fibtree.h"

void FibTree::breadthFirst(Node const* root) { // Breadth-first traversal
    dequeList* list = new dequeList(); //*** ERROR: Invalid use of incomplete type 'struct dequeList'
    list->enque(root);  //*** ERROR: Invalid use of incomplete type 'struct dequeList'
} 
```

**主文件**

```
#include <iostream>

#include "deque.h"
#include "fibtree.h"

int main (int argc, const char* argv[]) {
    ... 
```

我在[这里](https://stackoverflow.com/questions/5543331/invalid-use-of-incomplete-type-struct-even-with-forward-declaration)读过类似的帖子，在我的情况下，应该包含完整的声明`dequeList`，所以我`#include "deque.h"`在前向声明的上方添加`class deque.h"`了**fibtree.h**；但这向`deque.h`类抛出了 16 个编译错误，例如这三个错误：*'FibTree' has not been declared* against `FibTree::Node* data; in`class dequeNode {...`

任何人都可以在这里强调我可能会出错的地方吗？

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:08:08.510

您必须包含`deque.h`在所有使用它的源文件中。否则你没有完整的类定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:08:34.750

类的定义`FibTree`不依赖于`dequeList`类。无需转发声明`dequeList`in `fibtree.h`。

只有 的定义`FibTree::breadthFirst`取决于`dequeList`。当你实现这个方法时，这个`FibTree`类是已知的，你只需要`#include deque.h`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T11:12:11.527

在`fitree.cpp`你使用你的双端队列时不包括它的声明。您应该`#include "deque.h"`在此文件中添加；

还有，`fibtree.h`应该有一个`#endif`到底。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T11:13:36.053

文件 fibtree.h 似乎在末尾缺少 #endif ，并在 fibtree.cpp 的开头添加 #include "deque.h" 并在 deque.h 中更改 void enque(FibTree::Node* ); 无效 enque( const FibTree::Node* )

# linux - Linux - 从当前目录中的文件名创建子目录

> ID：15809321
> 
> 赞同：1
> 
> 时间：2013-04-04T11:02:09.753
> 
> 标签：linux, bash, shell, scripting

我在如下目录中有一个文件列表。

```
/file1 - filename1.txt
/file2 - filename2a.txt
/file2 - filename2b.txt
/file3 - filename3.txt
/file4 - filename4.txt
/file5 - filename5.txt 
```

我正在尝试创建一个脚本，该脚本将解析指定目录或工作目录中的文件，从破折号之前的文件名创建文件夹，如果它们不存在，则忽略该文件。然后脚本将在新创建的子目录中移动该文件名。

例如，列表最终将如下所示。

```
/file1/file1 - filename1.txt
/file2/file2 - filename2a.txt
/file2/file2 - filename2b.txt
/file3/file3 - filename3.txt
/file4/file4 - filename4.txt
/file5/file5 - filename5.txt 
```

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:15:03.017

```
#!/bin/bash
for f in filename*
do
   d=$( echo $f | sed 's/filename\([0-9]*\).*/file\1/')
   [ -d $d ] || mkdir $d
   mv $f $d
   echo "$f moved to $d"
done 
```

# vb.net - vb.net 随机数学

> ID：15809323
> 
> 赞同：0
> 
> 时间：2013-04-04T11:02:16.840
> 
> 标签：vb.net, math, equation

有谁知道我将如何随机生成一个基本的数学问题，其中答案总是 1、2、3 或 4。因此，例如使用两个随机数 8 和 4，我可能会显示问题：

8 / 4 所以在这种情况下答案是 2。其他示例：2*2、8/8、4+0 等，但答案始终在 1 到 4 的范围内。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:40:31.387

我在下面发布一个*想法*。

如果您只想使用正整数（在此示例中`counterPartNumerator`可能不是），则需要进行一些调整。

玩得开心！

```
Private _possibleNumerators() As Integer = {2, 4, 8, 12, 15, 20, 25, 32, 40} ' Random numbers I arbitrarily chose
Private _possibleResults() As Integer = {1, 2, 4, 8}
Friend Enum Operation As Integer
    Add = 0
    Subtract = 1
    Multiply = 2
    Divide = 3
End Enum

Private _randomGen As New Random

Public Sub ShowArithmeticExpression()
    Dim randomNumerator As Integer = GetRandom(_possibleNumerators)
    Dim counterPartNumerator As Decimal
    Dim randomDesiredResult As Integer = GetRandom(_possibleResults)
    Dim randomOperation As Operation = GetRandom([Enum].GetValues(GetType(Operation)))
    Dim operationSymbol As String

    ' Find counterPartNumerator
    Select Case randomOperation
        Case Operation.Add
            counterPartNumerator = randomDesiredResult - randomNumerator
            operationSymbol = "+"
        Case Operation.Subtract
            counterPartNumerator = randomNumerator - randomDesiredResult
            operationSymbol = "-"
        Case Operation.Multiply
            counterPartNumerator = randomDesiredResult / randomNumerator
            operationSymbol = "*"
        Case Operation.Divide
            counterPartNumerator = randomNumerator * randomDesiredResult
            operationSymbol = "/"
    End Select

    Console.WriteLine(String.Format("{0} {1} {2} = ?", randomNumerator, operationSymbol, counterPartNumerator))
    Console.WriteLine(String.Format("Result = {0}", randomDesiredResult))
End Sub

Private Function GetRandom(numberSet As Integer()) As Integer
    Dim minValue, maxValue As Integer

    ' Could simplify this using Linq. Eg: minValue = numberSet.Min() : maxValue = numberSet.Max()
    For Each number In numberSet
        If number < minValue Then minValue = number
        If number > maxValue Then maxValue = number
    Next

    While True
        Dim valueReturn As Integer = _randomGen.Next(minValue, maxValue)
        If numberSet.Contains(valueReturn) Then
            Return valueReturn
        End If
    End While

    Return -1
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:27:17.530

尝试以下代码

```
Dim xGenerator As System.Random = New System.Random()
        Dim xTemp As Integer = 0
        Dim c As Integer = 0
        Dim xRndNo As New List(Of Integer)

        While Not xRndNo.Count = 2

            xTemp = xGenerator.Next(0, 9)
            If c = 0 Then
                xRndNo.Add(xTemp)
            Else
                If (xRndNo.Item(0) + xTemp) Or (xRndNo.Item(0) - xTemp) Or (xRndNo.Item(0) * xTemp) Or (xRndNo.Item(0) / xTemp) <= 4 And ((xRndNo.Item(0) + xTemp) Or (xRndNo.Item(0) - xTemp) Or (xRndNo.Item(0) * xTemp) Or (xRndNo.Item(0) / xTemp)) > 0 Then
                    xRndNo.Add(xTemp)
                End If
            End If
            c = +1
        End While 
```

# c# - 带有许多用户控件的Repeater Itemdatabound太慢

> ID：15809326
> 
> 赞同：1
> 
> 时间：2013-04-04T11:02:27.600
> 
> 标签：c#, asp.net, repeater, itemdatabound

嗨，我创建了一个 Web 应用程序，在该应用程序中我遇到了性能问题，因为我在 itemdatabound 上的转发器内绑定了 15 个用户控件，并且我正在使用用户控件的 prerender 事件来绑定数据，您能否建议我对此的任何替代方案

```
if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
{
    DataRowView row = e.Item.DataItem as DataRowView;
    HomePhought uxHomePhought = (HomePhought)e.Item.FindControl("uxHomePhought");
    HomeConnection uxHomeConnection = (HomeConnection)e.Item.FindControl("uxHomeConnection");
    HomeTestimonialPublished uxHomeTestimonial = (HomeTestimonialPublished)e.Item.FindControl("uxHomeTestimonial");
    HomeProfileEdit uxHomeProfileEdit = (HomeProfileEdit)e.Item.FindControl("uxHomeProfileEdit");
    HomeMemex uxHomeMemex = (HomeMemex)e.Item.FindControl("uxHomeMemex");
    HomeInterestMemex uxHomeInterestMemex = (HomeInterestMemex)e.Item.FindControl("uxHomeInterestMemex");
    HomeMemexPhought uxHomeMemexPhought = (HomeMemexPhought)e.Item.FindControl("uxHomeMemexPhought");
    //HomeBFFTips uxHomeBFFTip = (HomeBFFTips)e.Item.FindControl("uxHomeBFFTip");
    HomePageCreate uxHomePageCreate = (HomePageCreate)e.Item.FindControl("uxHomePageCreate");
    HomePageHiveFive uxHomePageHiveFive = (HomePageHiveFive)e.Item.FindControl("uxHomePageHiveFive");
    HomePageNewsAdd uxHomeBusinessNewsAdd = (HomePageNewsAdd)e.Item.FindControl("uxHomeBusinessNewsAdd");
    HomePageNewsComment uxHomePageNewsComment = (HomePageNewsComment)e.Item.FindControl("uxHomePageNewsComment");
    HomePageNewsHighFive uxHomePageNewsHighFive = (HomePageNewsHighFive)e.Item.FindControl("uxHomePageNewsHighFive");
    HomeMedalAchieved HomeMedalAchieved1 = (HomeMedalAchieved)e.Item.FindControl("HomeMedalAchieved1");

    ...................
    ...................
    //  Binding user controls
    ...................
    ...................

} 
```

# sql - 超级简单的查询需要 39 秒执行

> ID：15809328
> 
> 赞同：2
> 
> 时间：2013-04-04T11:02:31.760
> 
> 标签：sql, sql-server, tsql, sql-server-2012

我的数据库有大约 15 万`DocumentNames`条记录，我所做的只是简单地加入`NameTypes`. NameTypeID 是 DocumentNames 中的外键。

这是我的查询：

```
With cte as 
(
    Select ROW_NUMBER() OVER 
    (Order By nm.Name asc ) 
    peta_rn,    
    dn.DocumentNameID,
    dn.DocumentID  
    From DocumentNames dn

    Left Join NameTypes nm On dn.NameTypeID = nm.NameTypeID
) 
Select * from cte Where peta_rn >= 10000 And peta_rn <= 10050 
```

这是屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/2jm74.jpg)

排序需要 90% 的成本。我完全困惑在这一点上我应该做什么。我想敲我的头，但我不能，因为周围有其他人。请建议我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T14:07:32.053

如果出于某种任意原因（例如工作面试），您需要优化这样的查询，请尝试使用`UNION`.

[**更正**识别别名列]

```
With cte as 
(
  Select ROW_NUMBER() OVER 
  (Order By nm.Name asc ) AS
  peta_rn,    
  dn.DocumentNameID,
  dn.DocumentID  
  From DocumentNames dn

  INNER Join NameTypes nm On dn.NameTypeID = nm.NameTypeID /* note change */
),  
cte2 as 
(
  Select ROW_NUMBER() OVER 
  () AS /* yes, this is random */
  peta_rn,    
  dn.DocumentNameID,
  dn.DocumentID  
  From DocumentNames dn

  WHERE dn.NameTypeID  NOT IN SELECT (nm.NameTypeID FROM NameTypes nm)
) 

Select * from cte Where peta_rn >= 10000 And peta_rn <= 10050

UNION

Select * from cte2 Where peta_rn >= 10000 And peta_rn <= 10050 
```

我从来没有`UNION`用 CTE 做过 a，所以你可能需要一些额外的括号来使它合法。也`ORDER BY`适用于整个结果。我会把它留作练习。

关键是`INNER JOIN`将能够使用索引 on `nm.Name`，而第二个子句将能够进行索引反半连接。两个索引查询应该比一个未索引查询快得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T12:36:26.483

对于它的价值，这里有[一些 SQLFiddle](http://sqlfiddle.com/#!6/42fee/11)来测试任何语法。

到目前为止，最简单的方法是确保`NameTypes`按顺序插入s `Name`，因此`NameTypeID`按字母顺序分配 s。

在这种情况下，无需加入`NameTypes`表。你可以这样做，

```
WITH [CTE] AS
(
SELECT
            ROW_NUMBER() OVER (ORDER BY [NameTypeID] ASC) [PetaRN],    
            [DocumentNameID],
            [DocumentID]
    FROM
            [DocumentNames]
) 
SELECT
            [PetaRN],
            [DocumentNameID],
            [DocumentID]
    FROM
            [CTE]
    WHERE
            [PetaRN] BETWEEN 10000 AND 10050
    ORDER BY
            [PetaRN] ASC; 
```

* * *

怎么样

```
WITH [CTE] AS
(
SELECT
            ROW_NUMBER() OVER (ORDER BY [NameTypeID] ASC) [PetaRN],    
            [DocumentNameID],
            [DocumentID]
    FROM
            [DocumentNames]
) 
SELECT TOP 50
            [PetaRN],
            [DocumentNameID],
            [DocumentID]
    FROM
            [CTE]
    WHERE
            [PetaRN] >= 10000
    ORDER BY
            [PetaRN] ASC; 
```

* * *

在 SQL 2005 上测试大型数据集时，我注意到 CTE 对于大型结果集表现不佳，这可能与服务器上的资源可用性有关。临时表的反直觉使用可能会更快。这也允许您索引行号以允许快速页面选择，但是，这必须抵消插入成本。试试看。

```
CREATE TABLE #Peta
(
    [PetaRN] BigInt NOT NULL CONSTRAINT [PK_Peta] PRIMARY KEY CLUSTERED,
    [DocumentNameID] Int NOT NULL,
    [DocumentID] Int NOT NULL
);

INSERT #Peta
SELECT
            ROW_NUMBER() OVER (ORDER BY [NameTypeID] ASC) [PetaRN],    
            [DocumentNameID],
            [DocumentID]
    FROM
            [DocumentNames];

SELECT TOP 50
            [PetaRN],
            [DocumentNameID],
            [DocumentID]
    FROM
            #Peta
    WHERE
            [PetaRN] >= 10000
    ORDER BY
            [PetaRN] ASC;

DROP TABLE #Peta; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T11:39:10.403

您可以尝试几件事：

1.  使聚集索引以名称开头......拥有一个广泛的聚集索引不是很有效，但试一试，看看它是否会停止排序发生

2.  永久创建一个包含订单号的列。这取决于您的表格的更新频率。

请发布您的表和索引定义。

# c# - 在 C# 中将字符串输入更改为 int

> ID：15809329
> 
> 赞同：2
> 
> 时间：2013-04-04T11:02:37.970
> 
> 标签：c#

如何在 C# 代码中转换使用 Console.ReadLine() 函数获取的字符串输入？？？假设我创建了 2 个整数变量 a 和 b。现在我想从用户那里获取 a 和 b 的值。如何在 C# 中执行此操作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T11:04:38.857

我通常使用的另一个选项是[int.TryParse](http://msdn.microsoft.com/it-it/library/system.int32.tryparse.aspx)

```
int retunedInt;
bool conversionSucceed = int.TryParse("your string", out retunedInt); 
```

所以它非常适合容错模式，例如：

```
if(!int.TryParse("your string", out retunedInt)) 
  throw new FormatException("Not well formatted string"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T11:03:11.430

试试这个（确保他们输入有效的字符串）：

```
int a = int.Parse(Console.ReadLine()); 
```

还有这个：

```
int a;
string input;
do
{
    input = Console.ReadLine();

} while (!int.TryParse(input, out a)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T11:06:10.873

您可以将其与[`Int32.TryParse()`](http://msdn.microsoft.com/en-us/library/f02979c7.aspx);

> 将数字的字符串表示形式转换为其等效的 32 位有符号整数。返回值指示转换是否成功。

```
int i;
bool b = Int32.TryParse(yourstring, out i); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T11:05:08.750

您可以使用[int.TryParse](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)

```
int number;
bool result = Int32.TryParse(value, out number); 
```

> TryParse 方法与 Parse 方法类似，只是 TryParse 方法在转换失败时不会抛出异常。它消除了在 s 无效且无法成功解析的情况下使用异常处理来测试 FormatException 的需要。[参考](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-04T11:05:13.357

您可以使用[Convert.ToInt32()](http://msdn.microsoft.com/en-us/library/sf1aw27b.aspx)：

```
Convert.ToInt32(input); 
```

或[TryParse()](http://msdn.microsoft.com/en-us/library/zf50za27.aspx)

```
bool success = Int32.TryParse(value, out number); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-04T11:05:23.267

使用 Int32.TryParse 避免出现异常，以防您的用户未键入整数

```
string userInput = Console.ReadLine();
int a;
if (Int32.TryParse(userInput, out a))
    Console.WriteLine("You have typed an integer number");
else
    Console.WriteLine("Your text is not an integer number"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-04T11:11:22.027

像这样使用`int.TryParse`：

```
int a;
Console.WriteLine("Enter number: ");
while (!int.TryParse(Console.ReadLine(), out a))
{
    Console.Write("\nEnter valid number (integer): ");
}

Console.WriteLine("The number entered: {0}", a); 
```

# c - Linux中另一个进程的重复文件描述符（没有sendmsg）

> ID：15809333
> 
> 赞同：4
> 
> 时间：2013-04-04T11:02:50.953
> 
> 标签：c, linux, ipc

我所拥有的是来自该进程的进程 ID 和文件描述符。除了 sendmsg 之外，还有什么方法可以复制（或重新打开）该进程的文件描述符以供 Linux 中的另一个进程使用？

Windows 有 DuplicateHandle 用于此目的，我想知道 Linux 上是否有类似的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T18:03:54.233

正如 +vonbrand 指出的那样，您可以只使用`/proc/<pid>/fd/<fd>`. 但你不能只是“写在那里”，它不会给任何烟花。

它是一个特殊的符号链接，指向在进程中以 pid`<pid>`作为文件描述符打开的文件`<fd>`。

只需使用它在您的进程中打开完全相同的文件。

您不必担心原始文件会被删除或替换，因为使用此链接将始终为您提供进程打开的原始文件。只需尝试以下一小段 bash 代码：

```
#!/bin/bash
echo "test" >/tmp/file
ls -li /tmp/file
exec 3<> /tmp/file
rm /tmp/file
ls -lLi /proc/$$/fd/3
cat /proc/$$/fd/3 
```

这将创建一个`/tmp/file`包含字符串*test*的文件。以文件描述符*3*打开文件，将其删除，删除后仍可`cat`使用`/proc/self/fd/3`. 在 linux 中，只要任何进程仍在使用文件，它就不会最终被删除。

因此，无需获取和使用进程的文件描述符，只需打开文件描述符“指向”的文件即可。

当然，您需要权限/权限/特权才能这样做。如果您拥有这两个进程或者您是 root 用户，那么您将拥有它。

编辑：如果不在 bash 中，您也可以使用`/proc/self/...`而不是`/proc/$$/...`获取有关当前进程的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:40:05.873

如果您具有适当的权限，PID 43512 的进程的文件描述符 5 位于`/proc/43512/fd/5`. 我从来没有把这些东西弄乱过（除了偷看），所以在那里写可能会很好，或者会放出壮观的烟花。

# twitter-bootstrap - 推特引导背景图像问题

> ID：15809335
> 
> 赞同：1
> 
> 时间：2013-04-04T11:03:00.297
> 
> 标签：twitter-bootstrap, scroll, background-image, whitespace

我正在使用 Twitter Bootstrap 创建一个网站，页面底部有一个空白区域，即如果底部没有空白区域，我无法让背景图像覆盖整个页面。

```
 div.background {
        background: url(http://i1068.photobucket.com/albums/u441/mr_ed_williams/leo1_zpsfbc5d2a3.jpg) no-repeat center top;
        background-attachment: fixed;
        -webkit-background-size: cover;
        -moz-background-size: cover;
        -o-background-size: cover;
        background-size: cover;
        height: 874px;
    } 
```

如果你在这个 JS Fiddle( [http://jsfiddle.net/Ff4Nr/1/](http://jsfiddle.net/Ff4Nr/1/) ) 中放大运行窗口并滚动窗口，你就会明白我的意思。

欢迎所有建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-04T10:58:12.347

```
body{
    margin:0px !important;
    padding:0px !impoortant;
} 
```

要么将这行代码添加到你的 CSS 中，要么找到原始引导 CSS 的主体。我认为这可能会解决您苦苦挣扎的问题。

# scala - 创建自定义 Play2 操作以从标头中检索 IP 地址

> ID：15809338
> 
> 赞同：1
> 
> 时间：2013-04-04T11:03:11.113
> 
> 标签：scala, playframework, playframework-2.1

我正在尝试找出一种很好的方法来检索存储在我的应用程序控制器中键**X-FORWARDED-FOR的标头中的 ipadress。**我最初的想法是使用[Actions](http://www.playframework.com/documentation/2.1.1/ScalaActions)和[ActionComposition](http://www.playframework.com/documentation/2.1.1/ScalaActionsComposition) 但我不知道该怎么做。我想我应该在我的 CustomAction 循环中通过标头，用一个以 ipadress 作为参数的案例类包装请求，将 ip 添加到该案例类，然后在控制器中通过 request.ipadress 访问 ipadress。

这是一个好方法和/或你将如何在scala中实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T20:11:44.463

Play 可以在没有技巧的情况下管理这种行为。

只需添加`trustxforwarded=true`到您的 application.conf，并使用[`request. remoteAddress`](https://github.com/playframework/Play20/blob/9e967d77bd381217ceb85d5fc01a0dbc2ad444d1/framework/src/play/src/main/scala/play/api/mvc/Http.scala#L58).

所有细节都在这里解释：[http ://www.playframework.com/documentation/2.1.1/HTTPServer](http://www.playframework.com/documentation/2.1.1/HTTPServer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:36:10.400

我不会说这是一个坏方法。它实际上看起来不错。

但是您是否注意到`remoteAddress()`请求标头上有一个方法？如果是的话，很抱歉提到它。如果没有，它可能会帮助你。

# java - Webview 中的 JSP/servlet 处理

> ID：15809343
> 
> 赞同：1
> 
> 时间：2013-04-04T11:03:32.417
> 
> 标签：java, android, servlets, android-webview, webviewclient

我正在尝试使用 webview 将完整的网站转换为 android 应用程序，但我被困在需要服务器处理的地方。

我单击`html`它转到的页面上的链接`servlet`（我已经创建了一个`WAR`并将其部署在 Apache Tomcat 服务器上”），结果被重定向到一个`JSP`页面。

在完整的网站上一切正常，但在 android 中`webview`，当我点击“链接”时，会出现一条错误消息：

> 检测到循环：禁止您的请求，因为它会导致循环

我假设`webview`不支持服务器端处理。
我怎样才能使这件事起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:33:37.377

把你的问题弄清楚：你想在你的 android 设备上本地放置一个 web 应用程序沙箱 - 在你的 android 上拥有一个本地 HTTP 服务器并使用 WebView 作为指向本地运行服务器的“客户端”视图吗？

你在哪个tomcat上部署你的war文件？这个tomcat是否在您的网络中运行，我的意思是在另一台物理机器上？

WebView 充当嵌入式浏览器实例。因此，您可以尝试在您的 android 设备上打开默认浏览器并导航到您的 tomcat 服务器并检查您的网站是否在那里运行良好。也许您忘记在 webView 中启用 java-script 执行

如果你在模拟器中运行你的 android 并在同一台机器上运行一个 tomcat-server，你必须通过它访问它

```
http://10.0.2.2:8080/... 
```

而不是

```
http://localhost:8080/... 
```

端口号可能不同。

# php - 计算两个日期之间的差异php

> ID：15809344
> 
> 赞同：-4
> 
> 时间：2013-04-04T11:03:34.433
> 
> 标签：php, date

我想计算两个 php 日期之间的差异。但我收到以下错误：

> 注意：未定义变量：第 68 行 C:\wamp\www\HR 版本 1.3\Applicant_Workdetails.php 中的差异

我还想知道以这种方式计算差异的最佳实践。

```
if (isset($_GET['success']) && empty($_GET['sucess'])) {
    echo 'Submitted Successfully' . ' ';
    printf("%d years, %d months, %d days\n", $difference->y, $difference->m, $difference->d);  //This is line 68
} else {
    if (empty($_POST) === false && empty($errors) === true) {

        $startdate = $_POST['StartDate'];
        $enddate = $_POST['EndDate'];
        $datetime1 = new DateTime($startdate);
        $datetime2 = new DateTime($enddate);
        $difference = $datetime1->diff($datetime2);

        //Submit Workdetails to the database
        $personal_workdetails = array(
            'IndustryName' => $_POST['IndustryName'],
            'Occupation' => $_POST['Occupation'],
            'Position' => $_POST['Position'],
            'Job_description' => $_POST['Job_description'],
            'StartDate' => $startdate,
            'EndDate' => $enddate,
            'Personid' => $Personid,
            'Jobid' => $jobid);
        personal_workdetails($personal_workdetails);
        //redirect
        header('Location: Applicant_workdetails.php?success');
        exit();
    } else if (empty($errors) === false) {
        //output errors if the errors array is not empty
        echo output($errors);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:08:57.820

我没有看到 $difference 是在哪里创建的，能否请您发布整个文件以便我查看问题所在？

您执行 $difference 的 printf()，但该变量仅在几行之后才声明（据我所知）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:10:18.723

在 "C:\wamp\www\HR version 1.3\Applicant_Workdetails.php" 中的第 68 行，您使用的是未定义的变量。可能是加减什么的。我们很难找到，因为我们不知道您发布的代码部分。

但只需按照说明进行即可。PHP 已经明确了错误在哪里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T11:11:08.307

您可以使用[DateTime::diff](http://www.php.net/manual/en/datetime.diff.php)

```
 $datetime1 = new DateTime("$start_date");
  $datetime2 = new DateTime("$end_date");
    $interval = $datetime1->diff($datetime2);
    echo "Result " . $interval->y . " years, " . $interval->m." months, ".$interval->d." days "; 
```

# android - WakeLock 未锁定 GCM_LIB

> ID：15809345
> 
> 赞同：10
> 
> 时间：2013-04-04T11:03:35.237
> 
> 标签：android, wakelock

我的 android 应用程序得到了如下所示的崩溃报告。（非常罕见）

```
java.lang.RuntimeException: WakeLock under-locked GCM_LIB
    at android.os.PowerManager$WakeLock.release(PowerManager.java:325)
    at android.os.PowerManager$WakeLock.release(PowerManager.java:300)
    at com.google.android.gcm.GCMBaseIntentService.onHandleIntent(GCMBaseIntentService.java:252) 
```

像[java.lang.RuntimeException: WakeLock under-locked C2DM_LIB 一样](https://stackoverflow.com/questions/12140844/java-lang-runtimeexception-wakelock-under-locked-c2dm-lib)，我可以尝试~catch 或使用 isHeld()

但我不确定这是最好的解决方案，我想知道为什么会这样。

一些猜测是 BroadcastReceiver 和 Service 在不同的进程中，比如[http://groups.google.com/group/cw-android/browse_thread/thread/9716bc101ce72fb4](http://groups.google.com/group/cw-android/browse_thread/thread/9716bc101ce72fb4)。

但这甚至可能吗？我从来没有在清单中使用过 android:process，所以 BroadcastReceiver 和 Service 应该在同一个（主）进程中，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-28T09:17:58.093

+NoraBora 这是您包含在项目中的 GCM 库中的错误。这个错误在 r3 版本的 gcm.jar 中仍然存在

您可以在此问题线程中找到更多信息：[https ://code.google.com/p/android/issues/detail?id=36364#makechanges](https://code.google.com/p/android/issues/detail?id=36364#makechanges)

正如马克所说：

> 是的，遇到了那些使用 WakefulIntentService 的人。如果您愿意创建自己的 GCMBaseIntentService 分支，请将 WakeLock release() 调用包装在对 isHeld() 的检查中以避免这种崩溃。

# gstreamer - Stagefright vs Gstreamer

> ID：15809365
> 
> 赞同：5
> 
> 时间：2013-04-04T11:04:25.890
> 
> 标签：gstreamer, stagefright

与 stagefright 相比，使用 gstreamer 有哪些优势？谁能指出其中的区别。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-04T14:58:51.103

一开始，一个非常笼统的评论。`GStreamer`是否有优势是非常值得商榷的`Stagefright`。但是，回答您的问题的一些要点如下。

`Stagefright`所有编解码器仅依赖`OMX`/`OpenMax`接口，而`GStreamer`编解码器插件可以通过`non-OMX`接口编写。例如，即使是*软件编解码器*也被封装到`SoftOMXComponent`框架中，而无需接口`Stagefright`也可以很容易地转换为a 。`GstElement``OMX`

其中`Stagefright`，两个组件之间的通信接口非常通用，通常是`MediaBuffer`. 这不是`hard`绑定，而是通过**胶水层**更方便，即实现`OMXCodec`or`MediaExtractor`或`AwesomePlayer`。

其中`GStreamer`，典型的通信接口是通过`Pads`特定的`GstCaps`。两个元件的焊盘通过`gst_pad_link`.

`GStreamer`提供标准模板，`bins`例如`CameraBin`or`PlayerBin`而在`Stagefright`您有`cameraHal`. `camera`对于玩家，有 2 个潜在的玩家引擎实现，例如`StagefrightPlayer`或`NuPlayer`。

在中，数据**处理**`Stagefright`由`sink`来自. 在中，数据处理可能会通过创建缓冲区并将其**推**送到下游来触发（参考：[here](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/manual/html/chapter-data.html#section-buffers)）。**`source``GStreamer``source`**

 ****最后一点，与当前特定于 android`Gstreamer`的相比，已被广泛部署。`Stagefright`

虽然列表可以继续，但这两个框架之间有很多**相似之处。**例如，

1.  这两个框架都创建了类似`parsers`或`codecs`通过`Factory Methods`即它们使用`Factory`模式的组件。

2.  两个框架都使用一个`plugin`接口来集成较新的组件，例如`parsers`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-07T23:33:24.923

我对 StageFright 不熟悉，但我要指出 GStreamer 提供了一些非常成熟的调试功能，包括转储 GraphViz（“点”）数据，这些数据可用于构建图形播放图的文字、可视化图表，包括在构建期间，即使在某些类型的部分失败之后。多个调试级别可用，以及某些类型的过滤。

我绝对会推荐任何人在这两个库之间进行选择以用于开发目的比较它们的调试和故障排除能力，特别是在排除管道饥饿和同步方面。

（哦，顺便说一句——将这些点转储转换为 SVG 的最佳格式。我通常在 Firefox 中打开它们。）****

# javascript - 使用顺序 for 循环遍历关联数组

> ID：15809366
> 
> 赞同：4
> 
> 时间：2013-04-04T11:04:30.817
> 
> 标签：javascript, arrays, for-loop

我有很多数据存储在关联数组中。

```
array = {'key':'value'}; 
```

如何使用普通的 for 循环而不是像这里的循环来循环这样的数组：http: [//jsfiddle.net/HzLhe/](http://jsfiddle.net/HzLhe/)

由于这个问题，我不想使用 for-in： [Mootools when using For(...in Array) 问题](https://stackoverflow.com/questions/7034837/mootools-when-using-for-in-array-problem)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T11:12:29.623

正如其他人指出的那样，这不是一个数组。这是一个 JavaScript 对象。要对其进行迭代，您将不得不使用 for...in 循环。但要过滤掉其他属性，您将不得不使用`hasOwnProperty`.

例子：

```
var obj={'key1': 'value1','key2':'value2'};

for (var index in obj) {
    if (!obj.hasOwnProperty(index)) {
        continue;
    }
    console.log(index);
    console.log(obj[index]);
} 
```

[http://jsfiddle.net/jeffshaver/HzLhe/3/](http://jsfiddle.net/jeffshaver/HzLhe/3/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T11:12:19.463

JavaScript 没有关联数组的概念。相反，您只需拥有一个具有可枚举属性的对象，因此请使用 for..in 循环遍历它们。如上所述，您可能还需要执行检查`hasOwnProperty`以确保您没有对继承的属性执行操作。

```
for (var prop in obj){
    if (obj.hasOwnProperty(prop)){
        console.log(obj[prop]);
    }
} 
```

# cakephp - 如何在cakephp的Shell文件中调用控制器

> ID：15809368
> 
> 赞同：1
> 
> 时间：2013-04-04T11:04:31.873
> 
> 标签：cakephp

我正在使用 PHP Mailer，我在 app Controller 中有邮件功能，我想在 shell 文件中访问它以进行 cron 作业。

任何人都可以指导我如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-02-13T21:03:48.333

抱歉，这太晚了，但如果它在此之前就在这里，它会对我有所帮助，所以对于未来的观众：

借用[CakePHP 的一个稍微不同的情况：以数组作为参数调用另一个控制器的动作的最佳方法？](https://stackoverflow.com/questions/1507552/cakephp-best-way-to-call-an-action-of-another-controller-with-array-as-paramete)：

到目前为止，这对我有用（还没有在控制器中尝试过更复杂的事情）：在 .../app/Console/Command/BillsShell.php 中：

```
App::import('Controller', 'Billing');

class BillsShell extends AppShell {
    public function main() {
        $billing = new BillingController();
        $billing->constructClasses(); //I needed this in here for more complicated requiring component loads etc in the Controller
        $billing->test();
    }
} 
```

在 BillingController.php 中：

```
class BillingController extends AppController {
    function test() {
        echo "****Big test!!!*****\n\n"; 
    }
} 
```

对于蛋糕 2.1.3：

```
$> .../app/Console/php cake.php bills

Welcome to CakePHP v2.1.3 Console
---------------------------------------------------------------
App : app
Path: .../app/
---------------------------------------------------------------
****Big test!!!***** 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T11:58:58.023

您应该使用 Cakephp Shell 在 cron 中执行某些操作。[如何在 cake php 中设置 cronjobs](https://stackoverflow.com/q/13949539/1695418)？.

**编辑**：如果您需要在控制器和外壳中使用某些东西，我建议将其移至组件。在你的外壳中，你可以做

```
App::import('Component', 'Meteor');
$this->Meteor = new MeteorComponent();
$this->Meteor->flash('New York'); 
```

在控制器中

```
$components = array('Meteor');

public function your_action() {
  // code
  $this->Meteor->flash('Paris');
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-01T09:26:41.763

这是：

```
App::uses('CakeRequest', 'Network');
    App::uses('CakeResponse', 'Network');
    App::uses('Controller', 'Controller');
    App::uses('AppController', 'Controller');
    $controller = new AppController(new CakeRequest(), new CakeResponse()); 
```

=> $controller 是你的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-19T05:26:38.723

[Shell官方文档](https://book.cakephp.org/2.0/en/console-and-shells.html)中似乎没有直接调用Controller的方法，我们可以在这里做一个工作，我们可以从Shell调用Model，在Model中我们可以调用Controller。

贝壳：

```
public function main() {
   App::import('Model', 'UserModel');
   $this->UserModel = ClassRegistry::init('UserModel');
   $this->UserModel->callModel();
} 
```

模型：

```
function callModel($created) {
        App::import('Controller', 'Pages');
        $something = new PagesController;
        $something->callMe();          
} 
```

控制器：

```
public function callMe(){
    echo "Finally, Controller method is called\n";
} 
```

仅供参考：这只是一种解决方法。

# python - 如何获取所有腌制数据

> ID：15809369
> 
> 赞同：3
> 
> 时间：2013-04-04T11:04:36.770
> 
> 标签：python, pickle

我有一个带有一些数据结构的腌制文件。我不知道元素的确切数量和类型。如何将所有对象放入字典或列表中？
问题是如何在不知道条目数的情况下遍历文件？
所有对象都存储为字符串吗？
编辑：我正在使用这样的代码将数据保存在文件中：

```
import pickle

def _save(_file, *_obj):
    with open(_file, 'w') as f:
        for obj in _obj:
            pickle.dump(obj, f) 
```

我现在看到的唯一解决方案是将对象的数量存储为第一个条目。阅读它，然后阅读其他所有内容。

我可以通过这种方式轻松解开数据：

```
list_data = [1, 2, 3, 4]
dict_data = {1:'a', 2:'b'}
tuple_data = (1, 2, 3)

_save('my_pickle.pckl', list_data, dict_data, tuple_data)
with open('my_pickle.pckl', 'r') as f:
    item1 = pickle.load(f)
    print item1
    item2 = pickle.load(f)
    print item2
    item3 = pickle.load(f)
    print item3 
```

这给了我我想要的……但我需要循环执行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T11:30:13.387

您可以将所有对象添加到列表中，然后对它们执行您喜欢的任何操作。

```
with open(pickle_file) as f:
    unpickled = []
    while True:
        try:
            unpickled.append(pickle.load(f))
        except EOFError:
            break 
```

# jquery - JQuery 仅在包含关键字时才返回 DIV 及其内容

> ID：15809376
> 
> 赞同：0
> 
> 时间：2013-04-04T11:04:52.640
> 
> 标签：jquery, arrays, filtering

我有我无法控制的服务器端输出，只有前端 HTML 模板 - 我使用 JQuery 来操纵结果以进行布局。

我试图实现的概念是分离菜单项，以便某些项目可以出现在主导航的页面顶部或页面底部，因为它们在视觉上不太重要。

为了识别顶部菜单的项目，我使用了一个令牌（现在让我们说这是常量值： TOP ），我希望有一些 jquery 扫描每个节点并根据这个令牌隔离每个项目。因此，每个 TOP xxx 元素将收集以形成顶部菜单，而其他任何元素将收集以形成底部菜单。

这是我必须在下面处理的输出示例，我的目标是让菜单项 1 和 3 成为一个 html 结构，我可以将其传递到 id=TOPMENU 的 div 中，将 #2 放入 div id=BOTTOMMENU 中。

请注意：我希望保留 H3 和外部 menuElement div 结构。

感谢您的帮助和建议。

希望你能帮忙。

```
<div id="menusHolder">
  <div class="menuElement">
     <h3>TOP Menu Title 1</h3>
     <ul>
         <li>Item 1</li>
         <li>Item 2</li>
         <li>Item 3</li>
     </ul>
  </div>
  <div class="menuElement">
     <h3>Menu Title 2</h3>
     <ul>
         <li>Item 1</li>
         <li>Item 2</li>
         <li>Item 3</li>
     </ul>
  </div>
  <div class="menuElement">
     <h3>TOP Menu Title 3</h3>
     <ul>
         <li>Item 1</li>
         <li>Item 2</li>
         <li>Item 3</li>
     </ul>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:10:12.223

您可以使用[:contains() 选择器](http://api.jquery.com/contains-selector/)：

```
var topElements = $("#menusHolder .menuElement h3:contains('TOP')").parent();
var bottomElements = $("#menusHolder .menuElement").not(topElements); 
```

小提琴：http: [//jsfiddle.net/HRs8N/](http://jsfiddle.net/HRs8N/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:10:48.520

解决这个问题的更好方法是使用一个类，因为这正是它们的用途，对事物进行分类。如果您可以灵活地将标记添加到 HTML，那么您也应该可以灵活地添加类。

在 HTML 元素中乱用文本往往会很混乱，例如，如果任何菜单项包含文本“TOP”，它可能会中断，而且获取这些元素也比简单地获取特定类的所有元素需要更多的工作。

[jsFiddle](http://jsfiddle.net/Tyriar/MRppH/)

**HTML**

```
<div id="menusHolder">
  <div class="menuElement top">
     <h3>Menu Title 1</h3>
     <ul>
         <li>Item 1</li>
         <li>Item 2</li>
         <li>Item 3</li>
     </ul>
  </div>
  <div class="menuElement">
     <h3>Menu Title 2</h3>
     <ul>
         <li>Item 1</li>
         <li>Item 2</li>
         <li>Item 3</li>
     </ul>
  </div>
  <div class="menuElement top">
     <h3>Menu Title 3</h3>
     <ul>
         <li>Item 1</li>
         <li>Item 2</li>
         <li>Item 3</li>
     </ul>
  </div>
</div> 
```

**JS**

```
$(document).ready(function () {
    $('.top').each(function () {
        // Do something with $(this)
    });
}); 
```

# cassandra - 在 cassandra 中创建自定义分区器以将记录索引到特定节点

> ID：15809377
> 
> 赞同：2
> 
> 时间：2013-04-04T11:04:52.517
> 
> 标签：cassandra

目前我正在使用具有多个节点的 Cassandra 集群，

**场景：**在插入记录时，我需要确保将特定行插入到指定节点。我可以通过创建自定义分区来处理这个问题吗？或者是否有任何分区器可用于处理此类事情？

这是因为在向我的集群添加新节点时，如果出现溢出或数据过多，所有即将到来的插入都应该在新节点中完成。所以我需要上述场景才能正常工作。卡桑德拉有可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-11T19:00:16.833

是的，您可以通过在字段中提供`org.apache.cassandra.dht.IPartitioner`类名的实现和引用来实现。`conf/cassandra.yaml``partitioner:`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T15:45:18.257

你不想这样做。这是一个非常糟糕的主意。

效果将是您的新节点将被完全敲打，而您的所有旧节点什么都不做。您的性能将受到新节点的限制。其次，除非您的复制因子为 1，否则您的新行将被写入多个节点 - 这就是您想要的。

我建议多阅读 datastax.com 上的 Cassandra 文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-07T12:38:43.917

很抱歉告诉你这个，但在我看来，你的解决方案是你可以对 cassandra 做的最糟糕的事情。

不过庆幸的是，Cassandra 1.2 已经引入了 VNodes [http://www.datastax.com/dev/blog/virtual-nodes-in-cassandra-1-2](http://www.datastax.com/dev/blog/virtual-nodes-in-cassandra-1-2)

这应该可以在集群中插入一个新节点以更快地减轻全局负载，而不会影响新节点（请记住，新节点除了在启动时进行写入和读取之外还有很多工作要做）。您只需要对令牌环（使用 Vnodes）的初始设置保持聪明，以更快地插入新闻节点。

您的方法与使用手动分片 MySQL 服务器的公司所做的非常相似。手动分片是您尝试使用 Cassandra 等系统解决的主要问题。

我见过两种情况下 cassandra 无法应对负载：

1.  您的整个集群过载，在这种情况下引入新节点是唯一的出路。在这种情况下，VNode 是您的朋友。这主要是因为您低估了应用程序的负载。使集群更大或使实例更大，这是您的选择。

2.  您在集群中有一个节点正在被特别敲击：这表明您的应用程序正在做一些非常错误的事情，即写入一个（或很少）硬编码的密钥。这将使所有读取和写入（针对该密钥）落在一个节点上并使其过载，直到崩溃，集群的其余部分将尝试为它承担负载（最坏的情况是一切都崩溃了，最好的情况是你会看到一个大的性能下降）。
    解决方案是将您的硬编码密钥存储到许多子密钥中（足以确保它们会落在整个集群中，我建议生成它们的哈希并使用 nodetools 检查它们会落在哪里）。
    最后一种情况无法通过 sysops 解决方案解决，必须通过返回应用程序的代码来修复，该应用程序正在敲击该密钥并修复它。

顺便说一句，最后一种情况正是您将实施的解决方案会发生的情况。单个 cassandra 实例与它的大小（内存大小）一样好，它们并非无敌。事实上，cassandra 集群在没有单点故障（如果使用正确的话）方面是如此惊人，这就是为什么 cassandra 可以用于处理大量工作负载的原因。不要自己插入那个单点故障。

# perforce - 如何在 P4V 中使用日期过滤器

> ID：15809380
> 
> 赞同：1
> 
> 时间：2013-04-04T11:05:02.410
> 
> 标签：perforce, p4v

我想使用日期过滤提交的更改列表
有什么方法可以实现吗？

它可以在命令行中使用`p4 changes @2011/04/01,@now`，但我希望在 P4V 中使用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:45:28.193

更高版本的 P4V 具有良好的过滤支持。您可以打开 Submitted changelist 视图，单击顶部的过滤器部分，然后调整以适应口味。

# ruby-on-rails - f.select 在选项中生成额外的字段

> ID：15809384
> 
> 赞同：0
> 
> 时间：2013-04-04T11:05:16.930
> 
> 标签：ruby-on-rails

我正在使用选择标签来创建选项框

为了创建一个选项框，我编写了以下代码

```
= f.select :user_id_eq,
  [raw("<option value=''>All Open Projects</option><option value='#{current_user.id}' selected='selected'>My Open Projects</option><optgroup label='Open Projects by Creator'>")] + current_user.company.projects.includes(:user).find(:all, :select => "DISTINCT user_id").collect {|p| [ p.user.name, p.user_id ] },
  {}, :'data-remote' => true, class: 'searchSelect' 
```

但这会在 html 内容中创建一个额外的空白字段

```
<option value=''>All Open Projects</option><option value='7' selected='selected'>My Open Projects</option><optgroup label='Open Projects by Creator'>"
<option value="">All Open Projects</option>
<option value="7" selected="selected">My Open Projects</option>
<optgroup label="Open Projects by Creator">
    <option value="2">Cas Elliott</option>
    <option value="6">Rakl</option>
    <option value="5">Jas</option></optgroup> 
```

第一行是正在创建的额外行。为什么这条线是创建任何想法？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:44:59.643

尝试改用`options_for_select`助手。您可以在[options_for_select 文档中找到该文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_for_select "options_for_select 文档")

# android - Soap 抛出 java.io.IOException：HTTP 请求失败，HTTP 状态：500

> ID：15809391
> 
> 赞同：3
> 
> 时间：2013-04-04T11:05:30.100
> 
> 标签：android, soap, ioexception, ksoap2

实际上，我使用此代码访问此 Web 服务[FahrenheitToCelsius](http://www.w3schools.com/webservices/tempconvert.asmx) 方法，得到了正确的响应，但是当我尝试访问我的 Web 服务时得到

> java.io.IOException：HTTP 请求失败，HTTP 状态：500

错误，它指向`transport.call(SOAP_ACTION, envelope);`

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);                     
//Use this to add parameters                              
request.addProperty("username",usr);
request.addProperty("password",pass);
request.addProperty("backOfficePartnerId",id);

//Declare the version of the SOAP request
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER10);

envelope.setOutputSoapObject(request);

envelope.dotNet = true;

try {
    HttpTransportSE transport = new HttpTransportSE(URL);

    Log.i("bodyout", "" + envelope.bodyOut.toString());

    transport.call(SOAP_ACTION, envelope);      

    // Get the SoapResult from the envelope body.
    SoapObject result = (SoapObject)envelope.bodyIn;
    System.out.println("result IN F TO C::"+result);
}catch(Exception e){
    e.printStackTrace();
} 
```

直到这里得到正确的回应。我调试并检查了正在发送正确的正文的值，作为对我的响应，bodyin 为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-28T14:35:41.697

HTTP Status: 500 是一个内部服务器错误，它可能与您的 .NET 服务器端编码有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T16:58:55.900

将 VER10 更改为 VER11。SoapSerializationEnvelope 信封 = new SoapSerializationEnvelope(SoapEnvelope. **VER11** ) 为我工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-20T12:52:48.240

我搜索了很多，但找不到任何具体的解决方案。我通过下载新的服务器包（相同版本）解决了我的问题，并用新的服务器包替换了以前的服务器包。（关于 Apache tomcat 7）

# expect - 期望：“force_conservative”、“set send_slow”和“--”是什么意思？

> ID：15809392
> 
> 赞同：1
> 
> 时间：2013-04-04T11:05:32.440
> 
> 标签：expect

```
set force_conservative 1  ;# set to 1 to force conservative mode even if
              ;# script wasn't run conservatively originally
if {$force_conservative} {
    set send_slow {1 .1}
    proc send {ignore arg} {
        sleep .1
        exp_send -s -- $arg
    }
} 
```

我不明白是什么`force_conservative`，而且像 `set send_slow {1 .1}`内部 proc 发送的陈述对我来说也不清楚。

还有为什么`--`需要发送命令

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T11:18:27.050

我真的不明白你想用这个脚本完成什么，但这里是答案。

`force_conservative`参数使期望脚本在发送每个字符之前暂停十分之一秒。这样做是为了让您的 shell 不会忽略快速出现的字符。

`set send_slow {1 .1}`会做同样的事情。它将每 1 个符号（第一个参数）暂停 100 毫秒（第二个参数）。

```
proc send {ignore arg} {
        sleep .1
        exp_send -s -- $arg
} 
```

此代码片段与前两个代码片段基本相同。`--`用于告诉您的脚本您将不再添加选项的参数，它是选项分隔符。

# android - 安卓通知声音

> ID：15809399
> 
> 赞同：164
> 
> 时间：2013-04-04T11:06:01.407
> 
> 标签：android, android-notifications

我使用了较新的 NotificationCompat 构建器，但无法让通知发出声音。它会振动并闪烁灯光。android文档说要设置我已经完成的样式：

```
builder.setStyle(new NotificationCompat.InboxStyle()); 
```

但是没有声音？

完整代码：

```
NotificationCompat.Builder builder =  
        new NotificationCompat.Builder(this)  
        .setSmallIcon(R.drawable.ic_launcher)  
        .setContentTitle("Notifications Example")  
        .setContentText("This is a test notification");  

Intent notificationIntent = new Intent(this, MenuScreen.class);  

PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent,   
        PendingIntent.FLAG_UPDATE_CURRENT);  

builder.setContentIntent(contentIntent);  
builder.setAutoCancel(true);
builder.setLights(Color.BLUE, 500, 500);
long[] pattern = {500,500,500,500,500,500,500,500,500};
builder.setVibrate(pattern);
builder.setStyle(new NotificationCompat.InboxStyle());
// Add as notification  
NotificationManager manager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);  
manager.notify(1, builder.build()); 
```

* * *

## 回答 #1

> 赞同：267
> 
> 时间：2013-04-06T20:06:23.103

我之前的代码中缺少什么：

```
Uri alarmSound = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
builder.setSound(alarmSound); 
```

* * *

## 回答 #2

> 赞同：164
> 
> 时间：2013-08-01T12:11:34.470

只需将您的声音文件放在`Res\raw\siren.mp3`文件夹中，然后使用以下代码：

对于自定义声音：

```
Notification notification = builder.build();
notification.sound = Uri.parse("android.resource://"
            + context.getPackageName() + "/" + R.raw.siren); 
```

对于默认声音：

```
notification.defaults |= Notification.DEFAULT_SOUND; 
```

对于自定义振动：

```
long[] vibrate = { 0, 100, 200, 300 };
notification.vibrate = vibrate; 
```

对于默认振动：

```
notification.defaults |= Notification.DEFAULT_VIBRATE; 
```

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2014-12-05T05:41:46.153

默认声音的另一种方式

```
builder.setDefaults(Notification.DEFAULT_SOUND); 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-09-23T07:57:17.100

使用罐头编码

```
 String en_alert, th_alert, en_title, th_title, id;
 int noti_all, noti_1, noti_2, noti_3, noti_4 = 0, Langage;

 class method
 Intent intent = new Intent(context, ReserveStatusActivity.class);
 PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0);

 NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);

 intent = new Intent(String.valueOf(PushActivity.class));
 intent.putExtra("message", MESSAGE);
 TaskStackBuilder stackBuilder = TaskStackBuilder.create(context);
 stackBuilder.addParentStack(PushActivity.class);
 stackBuilder.addNextIntent(intent);
 // PendingIntent pendingIntent =
 stackBuilder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT);

 //      android.support.v4.app.NotificationCompat.BigTextStyle bigStyle = new NotificationCompat.BigTextStyle();
 //        bigStyle.bigText((CharSequence) context);

 notification = new NotificationCompat.Builder(context)
    .setSmallIcon(R.mipmap.ic_launcher)
    .setContentTitle(th_title)
    .setContentText(th_alert)
    .setAutoCancel(true)

 // .setStyle(new Notification.BigTextStyle().bigText(th_alert)  ตัวเก่า
 //

 .setStyle(new NotificationCompat.BigTextStyle().bigText(th_title))

    .setStyle(new NotificationCompat.BigTextStyle().bigText(th_alert))

    .setContentIntent(pendingIntent)
    .setNumber(++numMessages)

    .build();

 notification.sound = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);

 notificationManager.notify(1000, notification); 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2018-09-18T20:35:37.393

在 Oreo（Android 8）及更高版本上，应该以这种方式（通知通道）为自定义声音完成：

```
Uri soundUri = Uri.parse(
                         "android.resource://" + 
                         getApplicationContext().getPackageName() +
                         "/" + 
                         R.raw.push_sound_file);

AudioAttributes audioAttributes = new AudioAttributes.Builder()
            .setContentType(AudioAttributes.CONTENT_TYPE_SONIFICATION)
            .setUsage(AudioAttributes.USAGE_ALARM)
            .build();

// Creating Channel
NotificationChannel channel = new NotificationChannel("YOUR_CHANNEL_ID",
                                                      "YOUR_CHANNEL_NAME",
                                                      NotificationManager.IMPORTANCE_HIGH);
channel.setSound(soundUri, audioAttributes);

((NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE))
                                           .createNotificationChannel(notificationChannel); 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2013-09-07T04:59:15.230

只需输入以下简单代码：

```
notification.sound = Uri.parse("android.resource://"
        + context.getPackageName() + "/" + R.raw.sound_file); 
```

对于默认声音：

```
notification.defaults |= Notification.DEFAULT_SOUND; 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2013-04-04T11:39:40.323

你必须使用[RingtoneManager](http://developer.android.com/reference/android/media/RingtoneManager.html)

```
private static final int MY_NOTIFICATION_ID = 1;
    private NotificationManager notificationManager;
    private Notification myNotification;

    private final String myBlog = "http://niravranpara.blogspot.com/"; 
```

**带有闹钟铃声的 noficationmanager 代码，**您还可以设置铃声 RingtoneManager.TYPE_RINGTONE

```
notificationManager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
                Intent myIntent = new Intent(Intent.ACTION_VIEW, Uri
                        .parse(myBlog));
                  PendingIntent pi = PendingIntent.getActivity(MainActivity.this, 0, myIntent, PendingIntent.FLAG_UPDATE_CURRENT);
                    Notification note = new Notification(R.drawable.ic_launcher, "Alarm", System.currentTimeMillis());
                    note.setLatestEventInfo(getApplicationContext(), "Alarm", "sound" + " (alarm)", pi);
                    Uri alarmSound = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM);
                    if(alarmSound == null){
                        alarmSound = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);
                        if(alarmSound == null){
                            alarmSound = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
                        }
                    }
                    note.sound = alarmSound;
                    note.defaults |= Notification.DEFAULT_VIBRATE;
                    note.flags |= Notification.FLAG_AUTO_CANCEL;
                    notificationManager.notify(MY_NOTIFICATION_ID, note); 
```

* * *

## 回答 #8

> 赞同：8
> 
> 时间：2017-05-08T08:03:11.247

你可以做一个功能：

```
public void playNotificationSound() 
{
    try
    {

        Uri alarmSound = `Uri.parse(ContentResolver.SCHEME_ANDROID_RESOURCE + "://" + MyApplication.getInstance().getApplicationContext().getPackageName() + "/raw/notification");`
        Ringtone r = RingtoneManager.getRingtone(MyApplication.getInstance().getApplicationContext(), alarmSound);
        r.play();
    }
    catch (Exception e) 
    {
        e.printStackTrace();
    }
} 
```

收到通知时调用此函数。

这里 raw 是 res 中的文件夹，而 notification 是 raw 文件夹中的声音文件。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2019-04-10T08:00:20.153

在 Android **OREO 或更高版本** **系统中注册频道后；****在此之后，您无法更改同一频道的重要性** 或 **其他通知行为** （卸载应用程序之前）[![在此处输入图像描述](https://i.stack.imgur.com/u8fz3.png)](https://i.stack.imgur.com/u8fz3.png) 

 ******```
private void createNotificationChannel() {
    // Create the NotificationChannel, but only on API 26+ because
    // the NotificationChannel class is new and not in the support library
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
        CharSequence name = getString(R.string.channel_name);
        String description = getString(R.string.channel_description);
        int importance = NotificationManager.IMPORTANCE_HIGH;
        NotificationChannel channel = new NotificationChannel(CHANNEL_ID, name, importance);
        channel.setDescription(description);
        // Register the channel with the system; you can't change the importance
        // or other notification behaviors after this
        NotificationManager notificationManager = getSystemService(NotificationManager.class);
        notificationManager.createNotificationChannel(channel);
    }
}

channel.setSound(Settings.System.DEFAULT_NOTIFICATION_URI,audioAttributes); 
```

**优先级也很重要 Most Here**通过使用 将通知**优先级设置为高**

**用户可见的重要性级别重要性（Android 8.0 及更高版本）**

**1)Urgent** 发出声音并显示为提醒通知--> **IMPORTANCE_HIGH**
**2)High** 发出声音-> **IMPORTANCE_DEFAULT**
**3)Medium** 无声音-> **IMPORTANCE_LOW**
**4)Low**无声音且不出现在状态栏中-> **IMPORTANCE_MIN**

相同的工作顺序 **优先级（Android 7.1 及更低版本）**

**1)PRIORITY_HIGH 或 PRIORITY_MAX**

**2)PRIORITY_DEFAULT**

**3)PRIORITY_LOW**

**4)PRIORITY_MIN**

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2013-04-08T06:24:03.630

你必须使用生成器。[设置声音](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html)

```
Intent notificationIntent = new Intent(MainActivity.this, MainActivity.class);  

                PendingIntent contentIntent = PendingIntent.getActivity(MainActivity.this, 0, notificationIntent,   
                        PendingIntent.FLAG_UPDATE_CURRENT);  

                builder.setContentIntent(contentIntent);  
                builder.setAutoCancel(true);
                builder.setLights(Color.BLUE, 500, 500);
                long[] pattern = {500,500,500,500,500,500,500,500,500};
                builder.setVibrate(pattern);
                builder.setStyle(new NotificationCompat.InboxStyle());
                 Uri alarmSound = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);
                    if(alarmSound == null){
                        alarmSound = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE);
                        if(alarmSound == null){
                            alarmSound = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
                        }
                    }

                // Add as notification  
                NotificationManager manager = (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);  
             builder.setSound(alarmSound);
                manager.notify(1, builder.build()); 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2015-12-01T14:42:50.257

首先将“yourmp3file”.mp3 文件放入原始文件夹（即在 Res 文件夹中）

第二在你的代码放..

```
Notification noti = new Notification.Builder(this)
.setSound(Uri.parse("android.resource://" + v.getContext().getPackageName() + "/" + R.raw.yourmp3file))//*see note 
```

这就是我放在 onClick(View v) 中的内容，因为只有“context().getPackageName()”不会从那里工作，因为它不会获得任何上下文

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2018-12-26T10:04:43.487

```
private void showNotification() {

    // intent triggered, you can add other intent for other actions
    Intent i = new Intent(this, MainActivity.class);
    PendingIntent pIntent = PendingIntent.getActivity(this, 0, i, 0);

    //Notification sound
    try {
        Uri notification = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
        Ringtone r = RingtoneManager.getRingtone(getApplicationContext(), notification);
        r.play();
    } catch (Exception e) {
        e.printStackTrace();
    }

    // this is it, we'll build the notification!
    // in the addAction method, if you don't want any icon, just set the first param to 0
    Notification mNotification = null;
    if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.JELLY_BEAN) {

        mNotification = new Notification.Builder(this)

           .setContentTitle("Wings-Traccar!")
           .setContentText("You are punched-in for more than 10hrs!")
           .setSmallIcon(R.drawable.wingslogo)
           .setContentIntent(pIntent)
           .setVibrate(new long[] { 1000, 1000, 1000, 1000, 1000 })
           .addAction(R.drawable.favicon, "Goto App", pIntent)
           .build();

    }

    NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

    // If you want to hide the notification after it was selected, do the code below
    // myNotification.flags |= Notification.FLAG_AUTO_CANCEL;

    notificationManager.notify(0, mNotification);
} 
```

在任何你想要的地方调用这个函数。这对我有用

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-08-14T02:55:52.720

```
notification.sound = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_RINGTONE); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-07-09T13:52:19.087

通过下面给出的 Notification.builder 类实例（builder），您可以在通知上播放默认声音：

```
builder.setDefaults(Notification.DEFAULT_SOUND); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-10-30T18:16:52.683

// 设置通知音频（测试到 android 10）

```
builder.setDefaults(Notification.DEFAULT_VIBRATE);
//OR 
builder.setDefaults(Notification.DEFAULT_SOUND); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-12-17T05:58:03.287

```
Button btn;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_user);

    btn= findViewById(R.id.btn); 

   btn.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            notification();
        }
    });
  }   

private void notification() {
    NotificationCompat.Builder builder= new 
    NotificationCompat.Builder(this);
    builder.setAutoCancel(true);
    builder.setContentTitle("Work Progress");
    builder.setContentText("Submit your today's work progress");
    builder.setSmallIcon(R.drawable.ic_email_black_24dp);
    Intent intent=new Intent(this, WorkStatus.class);
    PendingIntent pendingIntent= PendingIntent.getActivity(this, 1, intent, 
    PendingIntent.FLAG_UPDATE_CURRENT);
    builder.setContentIntent(pendingIntent);
    builder.setDefaults(Notification.DEFAULT_VIBRATE);
    builder.setDefaults(Notification.DEFAULT_SOUND);

    NotificationManager notificationManager= (NotificationManager) 
    getSystemService(NOTIFICATION_SERVICE);
    notificationManager.notify(1, builder.build());
} 
```

它是带有声音和振动的完整通知

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-05-19T23:38:36.623

不要依赖于构建器或通知。使用自定义代码进行振动。

```
public static void vibrate(Context context, int millis){
    try {
        Vibrator v = (Vibrator) context.getSystemService(Context.VIBRATOR_SERVICE);
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.O) {
            v.vibrate(VibrationEffect.createOneShot(millis, VibrationEffect.DEFAULT_AMPLITUDE));
        } else {
            v.vibrate(millis);
        }
    }catch(Exception ex){
    }
} 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2018-04-12T21:56:24.957

您可以执行以下操作：

```
MediaPlayer mp;
mp =MediaPlayer.create(Activity_Order_Visor_Atender.this, R.raw.ok);         
mp.start(); 
```

你在你的资源之间创建了一个名为 raw 的包，并在那里保留你的声音，然后你就调用它。******

# mysql - MySQL COUNT where 和 COUNT all

> ID：15809403
> 
> 赞同：0
> 
> 时间：2013-04-04T11:06:07.693
> 
> 标签：mysql

我有一个有四列的表（销售）；

```
id, user_id, product_id, and date_added. 
```

我需要统计某个用户已售出的具有特定 id 的产品的数量，并获取该用户在当月售出的产品的总数。

我无法计算总产品。我有;

```
SELECT user_id, product_id, count(user_id) 
FROM sales 
WHERE MONTH(date_added) = MONTH(CURRENT_DATE) 
GROUP BY user_id, product_id; 
```

如何对用户的总销售额求和，以便获得特定 product_id 占总销售额的百分比？

我希望我的输出看起来像这样；

```
|----------|----------|----------|----------|
|user_id   |product_id|sales     |total     |
|----------|----------|----------|----------|
|1         |4         |6         |82        |
|2         |4         |3         |121       |
|3         |4         |8         |93        |      
|----------|----------|----------|----------| 
```

其中 total 是用户进行的销售总数。

（应该提到我不需要mysql来计算百分比——只是为了得到所有产品销售额的总和）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:31:05.560

您必须使用子查询，因为您依赖聚合函数来进行计数

```
SELECT user_id, @pid:= product_id as product_id, count(user_id),
         (SELECT count(*)
          FROM sales
          WHERE MONTH(date_added) = MONTH( now() )
               AND product_id = @pid
          group by user_id
         ) as total_product_sales
FROM sales 
WHERE MONTH(date_added) = MONTH( now() ) 
GROUP BY user_id, product_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:23:38.217

其实我不太明白你想要什么...

此查询将为您提供给定用户的“小计”

```
 SELECT product_id, count(user_id) 
 FROM sales 
 WHERE MONTH(date_added) = MONTH(CURRENT_DATE) 
   AND user_id='YOUR_USER_ID'
 GROUP BY product_id with rollup; 
```

*或者*，如果您想要给定产品 id 和当月用户 id 的总体百分比：

```
 SELECT 
        PARTIAL_SALES/TOTAL_SALES*100 
 FROM
      (SELECT USER_ID,
              count(user_id) AS PARTIAL_SALES
         FROM sales 
              WHERE MONTH(date_added) = MONTH(CURRENT_DATE) 
              AND user_id='YOUR_USER_ID'
              AND PRODUCT_ID='YOUR_PRODUCT_ID'
          GROUP BY USER_ID) AS PARTIAL,
      (SELECT USER_ID, 
              count(user_id) as TOTAL_SALES
         FROM sales 
              WHERE MONTH(date_added) = MONTH(CURRENT_DATE) 
          GROUP BY USER_id) AS TOTAL1
 WHERE PARTIAL.USER_ID=TOTAL.USER_ID; 
```

# java-web-start - Jardiff 可以支持 Pack200 (.pack.gz) 吗？

> ID：15809410
> 
> 赞同：2
> 
> 时间：2013-04-04T11:06:28.370
> 
> 标签：java-web-start

我想在我们现有的 JWS 应用程序中实现 Pack200。但最近在我当地的 POC 中，我无法使用 Pack200 文件模拟 Jardiff。

例如，我有 2 个版本的 jar 说

```
1.test__V1.jar 
2.test__V2.jar (additional one jar in lib folder) 
```

我能够获取具有以下 URL 的两个 jar 之间的差异的 jar 文件（lib 文件夹中的另外一个 jar）

```
http://localhost/app/test.jar?version-id=2&current-version-id=1 
```

使用 Pack200，我根据上述 jar 文件准备了 2 个 gz 文件，如下所示

```
1.test.jar.pack__V1.pack.gz
2.test.jar.pack__V2.pack.gz 
```

我必须始终使用以下请求 URL 下载完整文件

```
http://localhost/app/test.jar.pack.gz?version-id=2&current-version-id=1 
```

因此，我怀疑 Jardiff 是否能够支持 Pack200(.pack.gz) 版本的文件。希望大家可以在这里给我一些指导。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-14T21:35:20.763

目前我正在查看这个，因为我想在[我的 gradle plugin](http://github.com/tschulte/gradle-jnlp-plugin)中实现 jardiff 支持。您很可能正在使用 Sun 的 JnlpDownloadServlet。我看了一下它的[源代码](https://svn.codehaus.org/mojo/trunk/mojo/webstart/webstart-jnlp-servlet/src/main/java/jnlp/sample/servlet/JnlpDownloadServlet.java)。至少上述 url 的版本不支持 jardiff 文件的 pack200。

servlet 对 jar 文件的每个请求执行以下操作：

```
def (file, mime-type) = find requested file {
    if version-id and current-version-id given and jardiff is smaller than file__V${version-id}.jar.pack.gz
        -> (jardiff.jar, application/x-java-archive-diff)
    else if version-id given
        -> (file__V${version-id}.jar, application/java-archive)
    else 
        -> (file.jar, application/java-archive)
}
if file found {
    if ${file}.pack.gz exists
        return ${file}.pack.gz with $mime-type and content-encoding header pack200-gzip
    else if ${file}.gz exists
        return ${file}.gz with $mime-type content-encoding header gzip
    else 
        return ${file} without $mime-type content-encoding header
} 
```

如果返回的文件是 jardiff 或者 jar 在 mime-type 标头中编码。

如果使用 pack200，则在 content-encoding 标头中进行编码。[JNLP 规范](http://download.oracle.com/otn-pub/jcp/jnlp-1.5-mr-spec-oth-JSpec/jnlp-1_5-mr-spec.pdf)确实解释了细节。

webstart 客户端确实为 jardiff 文件实现了 pack200，我使用 Java 8u31 和一些概念验证 servlet 对此进行了测试。

我将在 servlet 和 gradle 插件中实现该功能。请参阅我的插件的相应[github issue](https://github.com/tschulte/gradle-jnlp-plugin/issues/19)以获取状态更新。

# css - 根据分辨率重新排列引导标记

> ID：15809411
> 
> 赞同：1
> 
> 时间：2013-04-04T11:06:29.400
> 
> 标签：css, twitter-bootstrap, responsive-design

目前我有一些类似的引导标记：

```
<div class="row clerfix">
   <div class="span4>Search</div>
   <div class="span4>Logo</div>
   <div class="span4>Navigation</div>
</div> 
```

除了移动设备之外的所有分辨率都很好，因为我需要这样的移动布局（更改顺序）：

```
<div class="row clerfix">
   <div class="span4>Logo</div>
   <div class="span4>Navigation</div>
   <div class="span4>Search</div>
</div> 
```

因为 span4 div 按顺序出现在彼此下方，所以我需要以某种方式更改移动设计的顺序，这可以实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:11:34.463

将两者都包含在您的 html 中。

```
<div class="row clerfix hidden-phone">
    <div class="span4>Search</div>
    <div class="span4>Logo</div>
    <div class="span4>Navigation</div>
</div>

<div class="row clerfix visible-phone">
   <div class="span4>Logo</div>
   <div class="span4>Navigation</div>
   <div class="span4>Search</div>
</div> 
```

~~然后使用[css 媒体查询](http://css-tricks.com/css-media-queries/)或 javascript 显示和隐藏。~~

感谢@Johan 的编辑，`visible-phone`并且`hidden-phone`这些类已经[在 bootstrap 中可用](http://twitter.github.com/bootstrap/scaffolding.html)。

# r - 找不到函数“.getNamespace”

> ID：15809414
> 
> 赞同：2
> 
> 时间：2013-04-04T11:06:37.277
> 
> 标签：r

我的`R`会话：

```
R version 2.15.1 (2012-06-22)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United States.1252 
[2] LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices datasets  utils     methods   base     

other attached packages:
[1] rcom_2.2-5     rscproxy_2.0-5

loaded via a namespace (and not attached):
[1] tools_2.15.1 
```

这是问题：

```
> require(KFAS)
Loading required package: KFAS
Error in eval(expr, envir, enclos) : 
  could not find function ".getNamespace"
In addition: Warning message:
package ‘KFAS’ was built under R version 3.0.0 
Error : unable to load R code in package ‘KFAS’ 
```

这是我第一次在加载包时遇到这样的错误。`KFAS`手册说我只需要`R >= 2.15.0`.

那有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T11:18:19.160

该`.getNamespace`函数是 R 3.0.0 的一部分。警告消息指出您安装的软件包是为 R 3.0 而不是 2.15 构建的。该包正在尝试使用该`.getNamespace`功能，但没有找到它，因为它不是 R 2.15 的一部分。您可以升级到 R 3.0（现在似乎有点实验性）或安装包的 R 2.xx 版本。

只需使用以下命令安装软件包：

```
install.packages("KFAS")
library(KFAS) 
```

对我来说很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-16T06:08:05.483

我在安装东西时遇到了这个问题`pqR`（它是从 构建的`R 2.15`）。初步看来，复制 from 的定义是`.getNamespace`可以的`R 3.0`：

```
.getNamespace <- function(name) .Internal(getRegisteredNamespace(as.name(name))) 
```

（...我只是在开始会话后`base-r`通过输入复制了定义...）`.getNamespace``R 3.0`

并将其输入到有问题的`R 2.15`实例中。

# html - 单击链接时保存 jsp-session-attribute

> ID：15809417
> 
> 赞同：0
> 
> 时间：2013-04-04T11:06:44.783
> 
> 标签：html, jsp, session-variables

我正在尝试为我们设计的应用程序创建一个网站，并且我正在努力寻找一种方法来保存会话属性。我有以下代码：

```
<%
    for (int i=0;i< (Integer) session.getAttribute("aantalLijsten");i++){
        %>
        <a href="wishList.jsp"><%= session.getAttribute("wishList"+i) %></a>
        <%
    } 
%> 
```

其中属性已在 servlet 中设置。我想制作一个链接列表，但它们都必须转到同一页面。在该页面上，我将根据属性 wishList 生成正确的内容，该属性是用户单击的名称。我可以以某种方式保存该属性吗？类似于“点击操作：setAttribute("currentList", getAttribute("wishList"+i))”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:05:12.647

如果我正确理解了您的问题，请尝试以下操作：

```
<%
    for (int i=0;i< (Integer) session.getAttribute("aantalLijsten");i++){
%>
    <a href="wishList.jsp?param1="session.getAttribute("wishList"+i)><%= session.getAttribute("wishList"+i) %></a>
<%
    } 
%> 
```

在*servlet*中你可以访问它

```
String param1 = request.getParameter("param1"); 
```

但我强烈建议您不要在 JSP 中使用 scriplets，看看[如何避免 JSP 文件中的 Java 代码？](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files/3180202#3180202)

# c# - 将文本框值写入 xml 文件

> ID：15809422
> 
> 赞同：0
> 
> 时间：2013-04-04T11:06:50.433
> 
> 标签：c#, winforms, xmlwriter

我一直在尝试将文本框值写入 xml 文件，但无法以我希望的正确格式获取它

我正在使用以下代码

```
XDocument Xdoc = new XDocument(new XElement("Users"));
if (System.IO.File.Exists("D:\\Users.xml"))
    Xdoc = XDocument.Load("D:\\Users.xml");
else
    Xdoc = new XDocument();

XElement xml = /*new XElement("Users",*/
new XElement("User",
             new XAttribute("UserId", txtUserId.Text),
             new XAttribute("Password", txtPwd.Text));

if (Xdoc.Descendants().Count() > 0)
    Xdoc.Descendants().First().Add(xml);
else
    Xdoc.Add(xml);

Xdoc.Save("D:\\Users.xml"); 
```

我在这里以这种格式获取 xml

```
<User UserId="Sunny" Password="Sunny">
<User UserId="Sunny" Password="Sunny" />
<User UserId="Sunny" Password="Sunny" />
</User> 
```

但我想拥有这样的

```
<Users>
  <User>
    <UserId>Sunny</UserId>
    <Password>pwd</Password>
  </User>
  <User>
    <UserId>Sunny</UserId>
    <Password>pwd</Password>
  </User>
</Users> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:10:05.073

然后使用 XElement 而不是 XAttribute。

```
 new XElement("User",
              new XElement("UserId", txtUserId.Text),
              new XElement("Password", txtPwd.Text)); 
```

并添加多个用户，假设您有 userList：

```
 new XElement("Users",
        userList.Select(u=>
             new XElement("User",      
                 new XElement("UserId", u.UserId),
                 new XElement("Password", u.Password))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:33:14.340

我自己的答案

```
XDocument Xdoc = new XDocument(new XElement("Users"));
        if (System.IO.File.Exists("D:\\Users.xml"))
            Xdoc = XDocument.Load("D:\\Users.xml");
        else
        {
            Xdoc = new XDocument();
            XElement xmlstart = new XElement("Users");
            Xdoc.Add(xmlstart);
        }
        XElement xml = /*new XElement("Users",*/
                       new XElement("User",
          new XElement("UserId", txtUserId.Text),
          new XElement("Password", txtPwd.Text));

        if (Xdoc.Descendants().Count() > 0)
            Xdoc.Descendants().First().Add(xml);
        else
        {
            Xdoc.Add(xml);
        }

        Xdoc.Element("Users").Save("D:\\Users.xml"); 
```

这给了我 xml 之类的

```
<?xml version="1.0" encoding="utf-8"?>
<Users>
  <User>
  <UserId>Sunny</UserId>
  <Password>Sunny</Password>
 </User>
 <User>
   <UserId>Sunny</UserId>
   <Password>Sunny</Password>
 </User>
 <User>
   <UserId>Sunny</UserId>
   <Password>Sunny</Password>
 </User>
</Users> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T11:11:48.507

它只是从 XAttribute 更改为 XElement。因为属性会像 . 元素扮演不同的角色，形成树状 XML 结构。

根元素现在根据您的要求成为用户。

```
XElement xml = new XElement("Users",   
                       new XElement("User",
                       new XElement("UserId", "sunny"),
                       new XElement("Password", "pwd")
                       )); 
```

如果要重复添加子元素，请单独或循环使用以下代码块。

xml.Add(
new XElement("User", new XElement("UserId", "sunny"), new XElement("Password", "pwd") ) );

参考您的完整样本

```
XDocument Xdoc = new XDocument(new XElement("Users"));
        if (System.IO.File.Exists("D:\\Users.xml"))
            Xdoc = XDocument.Load("D:\\Users.xml");
        else
            Xdoc = new XDocument();

       XElement xml = /*new XElement("Users",*/
                       new XElement("User",
                       new XElement("UserId", "sunny"),
                       new XElement("Password", "pwd")
                       );

        if (Xdoc.Descendants().Count() > 0)
            Xdoc.Descendants().First().Add(xml);
        else
        {
            Xdoc.Add(xml);
        }

        Xdoc.Save("D:\\Users.xml"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T11:16:44.583

如果您希望这些值显示为元素，那么您应该使用`XElement`而不是`XAttribute`...

例如

```
XElement xml = /*new XElement("Users",*/
                   new XElement("User",
                   new XElement("UserId", "sunny"),
                   new XElement("Password", "pwd")
                   ); 
```

要在根目录下添加这些元素，请使用：

```
Xdoc.Element("Users").Add(xml); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T11:32:54.390

试试这个，

```
 var users= new XElement("Users");

    var userXml= new XElement("User",
                   new XElement("UserId", txtUserId.Text),
                   new XElement("Password", txtPwd.Text)
                   );

    users.Add(userXml); 
```

# c# - 在 Windows 8 (RT) 上请求的 json 参数

> ID：15809424
> 
> 赞同：0
> 
> 时间：2013-04-04T11:06:54.553
> 
> 标签：c#, json, windows-runtime

## 我正在寻找将带有`JSON`类似参数的请求发送到服务器的解决方案。

我用这个代码，

```
var httpClient = new HttpClient();
var tempByteArray = Encoding.UTF8.GetBytes("my valid json");
var stream = new MemoryStream(tempByteArray);
var streamContent = new StreamContent(stream);
var request = new HttpRequestMessage(HttpMethod.Post, Constants.LocalServer);
request.Content = streamContent;
request.Headers.TransferEncodingChunked = true;
HttpResponseMessage response = await httpClient.SendAsync(request); 
```

但作为回应，我得到：

```
{
    StatusCode: 501,
    ReasonPhrase: 'NotImplemented',
    Version: 1.0,
    Content: System.Net.Http.StreamContent,
    Headers: {
        X-Squid-Error: ERR_UNSUP_REQ0X-Cache: MISSfromproxy3.itos.orgX-Cache-Lookup: NONEfromproxy3.companyname.org: portProxy-Connection: closeDate: Thu,
        18Apr201309: 17: 53GMTServer: squid/2.6.STABLE21Via: 1.0proxy3.companyname.org: port(squid/2.6.STABLE21)Content-Length: 1099Content-Type: text/htmlExpires: Thu,
        18Apr201309: 17: 53GMT
    }
} 
```

可能有另一种方式在 Win8 上使用 json 参数发送请求？

## 更新我找到了解决方案：

```
public static async Task<string> LoadData(string json, string serverUrl)  
{
    var request = (HttpWebRequest)WebRequest.Create(new Uri(Constants.LocalServer));
    request.ContentType = "application/json";
    request.Method = "POST";

    using (var requestStream = await request.GetRequestStreamAsync())
    {
        var writer = new StreamWriter(requestStream);
        writer.Write(json);
        writer.Flush();
    }

    using (var resp = await request.GetResponseAsync())
    {
        using (var responseStream = resp.GetResponseStream())
        {
            var reader = new StreamReader(responseStream);
            return  = reader.ReadToEnd();
        }
    }
} 
```

它工作得很好，但必须存在更简单的方式（我希望）。我会**试着**找到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T18:13:04.077

当我使用您的两个代码片段发布数据时，我发现请求中存在一些差异。

这是第一个代码示例的原始帖子（您说它不起作用）：

```
POST http://testing.foo.com/api/Values HTTP/1.1
Host: testing.foo.com
Expect: 100-continue
Connection: Keep-Alive
Content-Length: 75

{
id:"1",
title:"title text",
post:"post text",
isDeleted:"False"
} 
```

这是您更新中代码的原始帖子（您说有效的代码）：

```
POST http://testing.foo.com/api/Values HTTP/1.1
Content-Type: application/json
Host: testing.foo.com
Content-Length: 75
Expect: 100-continue

{
id:"2",
title:"title text",
post:"post text",
isDeleted:"False"
} 
```

两种请求的区别如下：

1.  在第一个请求中，从不设置内容类型。
2.  在第一个请求中，内容是 UTF8 编码的。

要修复您的非工作代码，我建议您尝试以下一项或两项：

1.  将内容类型设置为 application/json
2.  不是 UTF8 编码请求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T08:28:30.360

在那个时候，这个解决方案是最有用的。

```
public static async Task<string> LoadData(string json, string serverUrl)  
{
    var request = (HttpWebRequest)WebRequest.Create(new Uri(Constants.LocalServer));
    request.ContentType = "application/json";
    request.Method = "POST";

    using (var requestStream = await request.GetRequestStreamAsync())
    {
        var writer = new StreamWriter(requestStream);
        writer.Write(json);
        writer.Flush();
    }

    using (var resp = await request.GetResponseAsync())
    {
        using (var responseStream = resp.GetResponseStream())
        {
            var reader = new StreamReader(responseStream);
            return  = reader.ReadToEnd();
        }
    }
} 
```

# algorithm - 用于 2d 到 3d 旋转和平移的 Kabsch 算法

> ID：15809427
> 
> 赞同：0
> 
> 时间：2013-04-04T11:07:07.000
> 
> 标签：algorithm, math, matrix, matching, point

我的问题涉及将一组 2d 点与一组 3d 点匹配，并且两者之间具有已知的对应关系。基本上我在图像上有点，我需要最佳的平移和旋转以使这些点适合已知的 3d 点云。Kabsch 算法最初是为了找到 3d 点与另一个点云的最佳拟合，并且有 2d 到 2d 的实现，但不是我可以使用的。我知道这是可能的，但只是不知道如何去做。我在那里搜索代码，结果是空的。我目前正在使用 matlab 编程，但任何语言都可以。

谢谢你。

编辑：目标是获得 3d 点云的旋转和平移，以便在将 2d 点投影到图像平面时最好地匹配它。

我还应该提到，3d 到 2d 的投影是使用弱透视完成的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:12:59.040

所以基本上，你有一个“平面”或“线”点，就像第三维是 0。你可以像这样威胁他们，并使用平方距离最小化的典型 kabsh 算法，不是吗？

编辑：也许这是胡说八道，但是将 3d 身体投影到 2d 坐标并进行 2d 比较呢？计算成本很高，因此它包括探索 3d 对象 + 投影的所有角度，但通过应用投影更容易丢失一维，即向 2d 点添加新维度。

# ios - 目标 C 中综合属性的差异

> ID：15809431
> 
> 赞同：0
> 
> 时间：2013-04-04T11:07:13.617
> 
> 标签：ios, objective-c

.h 文件中的代码

```
@property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext; 
```

.m 文件中的代码

```
@synthesize managedObjectContext = __managedObjectContext; 
```

我是 Objective c 的初学者，我想知道有什么区别 `@synthesize managedObjectContext; and @synthesize managedObjectContext = __managedObjectContext;`可以解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:11:11.423

`@synthesize propertyName`创建一个变量来支持与属性同名的属性，同时为`@synthesize propertyName = variableName`变量提供一个替代名称（可能是属性名称以下划线为前缀）。

请注意，在最新版本的 Xcode 附带的编译器中，`@synthesize`不再需要 using：编译器会找出需要合成的属性，并隐式插入

```
@synthesize propertyName = _propertyName; 
```

对于需要合成的每个属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:18:11.013

如果你使用

```
@synthesize managedObjectContext = __managedObjectContext; 
```

你可以这样写：

```
__managedObjectContext = someContext; 
```

并且它将通过直接访问它来更改存储在此属性中的值，而无需 setManagedObjectContext: 方法。

但是，此行将是不正确的（除非您在它之前声明了其他一些 managedObjectContext）：

```
managedObjectContext = someContext; //wrong
self.managedObjectContext = someContext; //good 
```

PS 顺便说一句，[@synthesize 到底是做什么的？](https://stackoverflow.com/questions/3266467/what-exactly-does-synthesize-do)

# iphone - 我可以使用 Bonjour 连接两台 iOS 设备，一台使用 3G 网络，一台使用 WiFi

> ID：15809432
> 
> 赞同：3
> 
> 时间：2013-04-04T11:07:15.677
> 
> 标签：iphone, ios, networking, bonjour

我正在开发一个 iPhone 应用程序，我需要在其中使用 3G 和 WiFi 网络将我的 iPhone 与它周围的任何可用 iPhone 连接起来。其中一部 iPhone 应该在 3G 网络中，而另一部应该只有 WiFi 连接。我**不能使用蓝牙**，因为连接范围应该 > 10 m。

我想知道是否可以使用**Bonjour**协议来实现两部 iPhone 之间的连接，其中一个是 3G 连接，另一个是 WiFi，并且周围没有其他网络。

如果不是，我如何在不使用蓝牙的情况下连接两台 ios 设备，一台在 3G 上，一台在 WiFi 上。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:37:37.990

这是 Apple 的示例，如何通过使用 Bonjour 协议的 Wi-Fi 在两台设备之间传输数据：[WiTap](http://developer.apple.com/library/ios/#samplecode/WiTap/Introduction/Intro.html)。

希望这可以帮助......

# javascript - 合并时停止div移出网格

> ID：15809433
> 
> 赞同：4
> 
> 时间：2013-04-04T11:07:16.283
> 
> 标签：javascript, jquery, html, css, jquery-ui

我已经实现了具有选择功能的 jquery 拖放功能，并创建了一个网格式界面。我现在为 div 添加了一个合并功能，但问题是当我在当前代码中合并 B & F

**[JSFIDDLE](http://jsfiddle.net/fAu6p/1/)**

最后一个 div “跳出”我的网格，我留下了一个空白。

这就是我根据网格上的索引位置合并 div 的方式

```
cells[0].append(cells[1].html());
        cells[1].remove(); 
```

有人可以帮我解决这个问题，因为它让我发疯:(我非常接近完成这个但是没有正常工作的合并我不知所措

提前致谢！

![在此处输入图像描述](https://i.stack.imgur.com/jlxza.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:27:29.600

不幸的是，这就是浮动的工作方式。由于`B+F`占用的高度超过一行，它会将所有后续元素向右移动以保持顺序。除了使用另一种具有绝对定位或固定可放置对象的网格之外，没有任何 woraround。

# asp.net-mvc-4 - Jqgrid过滤不适用于完整的单词和数据

> ID：15809438
> 
> 赞同：0
> 
> 时间：2013-04-04T11:07:43.040
> 
> 标签：asp.net-mvc-4, jqgrid

jqgrid客户端的过滤。我面临的问题是：

1.  过滤仅在两列（以下代码中的项目引用和项目名称）和单词的一部分或部分起作用。

2.  过滤不适用于来自另一个表的数据。我正在使用两个数据表来检索数据。仅适用于直接表不适用于引用的表数据。

3.  我可以在没有Loadonce的情况下进行搜索吗？因为它不允许重新加载

我尝试使用以下代码让我知道我做错了什么

鉴于：

```
 $(document).ready(function () {
    $("a.button").button();
    var url = '@Url.Action("ListAllProjects")' + '?s_partId=' + '@ViewBag.PartId';
    var colNames = ['<input type="checkbox" onclick="CheckAll(this.checked,\'chkOF_\',event);" name="checkall">',
        'Status',
        'Project Ref',
        'Project Name',
        'Customer',
        'CreatedBy',
        'Creation Date',
        'Last Modified',
        'LastModifiedDate',
        'Edit'];
    var colModel = [
        { name: 'ProjectId', index: 'ProjectId', align: 'left', formatter: checkFormatter, width: 20, search: true },
        { name: 'ProjectStatusId', index: 'ProjectStatusId', edittype: 'image', align: 'left', width: 70, formatter: imageFormatter, search: true },
        { name: 'ProjectReference', index: 'ProjectReference', align: 'left', width: 100, formatter: 'showlink', formatoptions: { "baseLinkUrl": "/Ordernew/Home" }, search: true },
        { name: 'ProjectName', index: 'ProjectName', align: 'left', width: 150, formatter: 'showlink', formatoptions: { "baseLinkUrl": "/Ordernew/Home" }, search: true },
        { name: 'CustomerName', index: 'CustomerName', align: 'left', width: 150, search: true },
        { name: 'CreatedBy', index: 'CreatedBy', align: 'left', width: 150, search: true },
        { name: 'CreationDate', index: 'CreationDate', align: 'left', width: 100, formatter: 'date', formatoptions: { srcformat: 'ISO8601Long', newformat: 'd-M-y h:m A' }, search: true },
        { name: 'LastModifiedBy', index: 'LastModifiedBy', align: 'left', width: 100, search: true },
        { name: 'LastModifiedDate', index: 'LastModifiedDate', align: 'left', width: 100, formatter: 'date', formatoptions: { srcformat: 'ISO8601Long', newformat: 'd-M-y h:m A' }, search: true },
        { name: 'StatusId', index: 'ProjectStatusId', formatter: myCustomFormatter, align: 'left', width: 70, search: true },
    ];
    var sortname = 'ProjectStatusId';
    var sortorder = 'desc';     
    SetGrid('#jqgprojectnew', '', url, colNames, colModel, sortname, sortorder, -1,'#count',true);

    $("#jqgprojectnew").jqGrid('filterToolbar',
            {
                stringResult: true,
                searchOnEnter: false,
                defaultSearch: "cn"
            });

}); 
```

并像这样设置网格，这对于所有网格都是通用的。但我只需要搜索上述网格：

```
function SetGrid(v_gridCtrl,v_pagingCtrl, v_url, v_colNames, v_colModel, v_sortname, v_sortorder, v_Pagesize,Count,Loadonce) {

if (v_Pagesize == undefined)
    v_Pagesize = 100;

$(v_gridCtrl).jqGrid({
    //url from wich data should be requested
    autowidth: true,
    url: v_url,
    //type of data
    datatype: 'json',
    //url access method type
    mtype: 'POST',
    //columns names
    colNames: v_colNames,
    //columns model
    colModel: v_colModel,
    //pager for grid
    pager: $(v_pagingCtrl),
    //enable dynamic scrolling
    //scroll: true,
    //enable npage request parameter
    prmNames: { npage: 'npage' },
    //number of rows per page
    rowNum: v_Pagesize,
    rowList: [10, 30, 60, 90, 100, 150, -1],
    loadComplete: function () {
        $("option[value=-1]").text('All');
        $(Count).html($(v_gridCtrl).getGridParam("reccount"));
    },
    loadonce:Loadonce,
    //initial sorting column
    sortname: v_sortname,
    //initial sorting direction
    sortorder: v_sortorder,
    //we want to display total records count
    viewrecords: true,
    //grid height
    height: 400,//'100%',
    //width: '100%',
    scrollOffset: 0,
    shrinkToFit: true,

}); 
```

}

添加记录的代码：

```
 public bool AddUpdateOrderField(ProjectViewModelNew obj)
    {

                var rec = new Project
                              {
                                  ProjectID = Guid.NewGuid(),
                                  ProjectDetail = obj.ProjectDetail,
                                  CustomerId =obj.Id,
                                  ProjectName = obj.ProjectName,
                                  CreatedBy = new UserManager().Userid(),
                                  CreationDate = DateTime.Now,
                                  LastModifiedBy = new UserManager().Userid(),
                                  ProjectRef = obj.ProjectRef,

                                  ProjectStatusId = obj.ProjectStatusId,
                                  LastModifiedDate = DateTime.Now,
                                  OwnerID = new Guid("BEBB9E61-1F06-4762-80D8-5E4D554EAEB5")

                              };
                _context.Projects.AddObject(rec);
                _context.SaveChanges();

                return true;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T09:00:07.403

如果您使用本地搜索，您应该设置`loadonce =true`并且没关系，从您的数据提取到 jqgrid 的多少表。如果你想做，`loadonce=false,`那么你应该将搜索条件发布到服务器并执行数据库搜索。

并尝试删除`stringResult: true,`以解决您的第一个问题

要使搜索不区分大小写，请将其添加到 jqgrid 属性中：

IE ;

```
 $(v_gridCtrl).jqGrid({
    //url from wich data should be requested
    autowidth: true,
.....
 ignoreCase:true,
...} 
```

要重新加载网格，请尝试以下代码：

$( v_gridCtrl ).trigger( 'reloadGrid', [{ page: 1}] );

# javascript - Javascript中画布游戏的边界

> ID：15809439
> 
> 赞同：2
> 
> 时间：2013-04-04T11:07:45.203
> 
> 标签：javascript, html, canvas, boundary

我必须使用 html5 canvas Javascript 为学校制作游戏。我是 javascript 新手，仍在学习，但我真的需要一些帮助来解决这个问题，如果有人能帮助我，我将不胜感激。我尝试了几件事，但似乎没有任何效果，我不知所措。

所以这是播放器对象的代码。它可以从左向右移动。现在的问题是它离开了画布。我希望它留在 x 轴上的画布中。

```
// Things to do when keys are down
function onKeyDown(event) {

    // prevent arrow keys from scrolling the page
    if (event.keyCode >= 37 && event.keyCode <= 39) event.preventDefault();

    switch (event.keyCode) {
        case 37:
            player.vx = -1;
            player.image = player.imgLeft;
            break; // left key
     // case 38: player.vy = -1; break; // up key
        case 39:
            player.vx = 1;
            player.image = player.imgRight;
            break; // right key
    }
}

// Things to do when keys are up
function onKeyUp(event) {
    switch (event.keyCode) {
        case 37:
        case 39:
            player.vx = 0;
            player.image = player.original;
            break; // left or right key released
     // case 38: player.vy = 0; break; // up or down key released
    }
} 
```

这是我到目前为止得到的......

```
if ((player.x >= 800) && (player.x  <= 0)) {

} else {

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:46:43.547

您可以考虑添加两个函数来检查您是否在界限内。（基本上与您的代码相同，尽管在您的 else 语句中返回了我的真实条件。）

```
// returns true if param is in range [0..799]
function isInXrange(intPos)
{
  if ((intPos>=0) && (intPos<800))
    return true;
  else
    return false;
}
// returns true if param is in range [0..599]
function isInYrange(intPos)
{
  if ((intPos>=0) && (intPos<600))
    return true;
  else
    return false;
} 
```

然后，您可以添加一个函数来移动玩家和另一个函数来处理与墙壁碰撞/游荡出界

```
function movePlayer()
{
    if (isInXRange(player.x))
        player.x += player.vx;
    if (isInXRange(player.y))
        player.y += player.vy;
}

function handleOutOfBounds()
{
    if (isInXRange(player.x) == false)
    {
        // do something;
    }

    if (isInYRange(player.y) == false)
    {
        // do something else
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-06T23:24:50.253

基本上只是测试看看`x + width (optional: + velocity) > canvas.width`高度是否相同。

# c++ - 如何在不同的线程中随机播种

> ID：15809442
> 
> 赞同：2
> 
> 时间：2013-04-04T11:07:55.870
> 
> 标签：c++, multithreading, c++11, random, random-seed

我有一个多线程 C++ 应用程序，每个线程中需要许多随机数。

在 C++11 之前，我使用了一个“随机化器”，它使用函数在主线程中生成一些随机`rand()`数，并将不同的随机数传递给每个子线程。然后，所有子线程加入主线程，再次使用随机化器并调用新的子线程，依此类推`N`。

现在，我想`rand()`用 C++11 替换，以避免随机化器并在每个线程中生成随机数。

我想播种随机数生成器，这样：*种子序列从运行到运行*每个线程中的随机数序列因线程而异（如果线程在不同的循环中调用）

我想像这样播种：

```
mt19937 rng;
rng.seed(this_thread::get_id().hash()); 
```

这对我有好处，因为`this_thread::get_id().hash()`它是一个“随机”数字，但有时，在不同的循环中，我可以获得相同的 id。

如何随机播种随机数生成器以避免在某些线程中获得相同的随机数序列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:43:12.087

由于线程 ID 不同，也许只是使用时钟来改变值：

```
#include <chrono>
...

typedef std::m19937::result_type seed_type;

typename std::chrono::system_clock seed_clock;
auto init_seed = static_cast<seed_type>
    (seed_clock.now().time_since_epoch().count());

init_seed += static_cast<seed_type>(this_thread::get_id());

rng.seed(init_seed); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-29T21:26:56.680

播种的适当默认值是：

```
std::random_device r;
std::seed_seq seed{r(), r(), r(), r(), r(), r(), r(), r()};
std::mt19937 eng(seed); 
```

您可以简单地在每个线程上执行此操作，它应该可以工作：

```
#include <algorithm>
#include <functional>
#include <iostream>
#include <iterator>
#include <mutex>
#include <random>
#include <thread>

int main() {
    std::mutex iomutex;

    std::vector<std::thread> threads;

    for (int i = 0 ; i < 10; ++i) {
        threads.emplace_back([&iomutex](int tid) {
            std::random_device r;
            std::seed_seq seed{r(), r(), r(), r(), r(), r(), r(), r()};

            std::mt19937 eng(seed);
            std::uniform_int_distribution<> dist(1, 100);

            std::lock_guard<std::mutex> ioguard(iomutex);
            std::cout << "Thread " << tid << ": ";
            std::generate_n(std::ostream_iterator<int>(std::cout, " "), 10, std::bind(dist, eng));
            std::cout << '\n';
        }, i);

    }
    for (auto &&t : threads) {
        t.join();
    }
} 
```

或者，您可以在主线程上计算种子并将数据传递给每个工作人员以初始化其引擎。不幸的是，您不能传递 a `seed_seq`，因此在下面的示例中，我只是传递了一个初始化的引擎。

```
int main() {
    std::mutex iomutex;
    std::vector<std::thread> threads;
    std::random_device r;

    for (int i = 0 ; i < 10; ++i) {
        std::seed_seq seed{r(), r(), r(), r(), r(), r(), r(), r()};
        std::mt19937 thread_eng(seed);

        threads.emplace_back([&iomutex](int tid, std::mt19937 init_eng) {
            std::mt19937 eng(std::move(init_eng));
            std::uniform_int_distribution<> dist(1, 100);

            std::lock_guard<std::mutex> ioguard(iomutex);
            std::cout << "Thread " << tid << ": ";
            std::generate_n(std::ostream_iterator<int>(std::cout, " "), 10, std::bind(dist, eng));
            std::cout << '\n';
        }, i, thread_eng);

    }
    for (auto &&t : threads) {
        t.join();
    }
} 
```

# if-statement - 批处理文件：if %variable%（命令）

> ID：15809443
> 
> 赞同：0
> 
> 时间：2013-04-04T11:07:55.857
> 
> 标签：if-statement, batch-file, environment-variables, conditional-statements

我想使用我的 %variable% 来管理批处理文件中的 IF.. THEN.. ELSE 中的条件子句。类似于以下内容：

```
set variable=%%homedrive%% EQU C:
if %variable% (
   echo test ok
   ) else (
   echo test fail
   ) 
```

如果我在 cmd 控制台上写：

```
set test=1 equ 1
if %test% echo OK 
```

有用！

我将在 for /f cicle 中使用它：这是我的伪代码这是我要纠正的伪代码

```
(
 rem echo "%systemdrive%;;"
 echo "%%COMPUTERNAME%% EQU [x];[some parameters1]"
 echo "%%USERNAME%% NEQ [y];[some parameters2]"
 echo "%%LOGONSERVER%% EQU [z];[some parameters3]"
 [..]
) > "%temp%\CSG_fs.tmp"
[..]
for /f "usebackq tokens=1-2* delims=;" %%a in ("%temp%\CSG_fs.tmp") do (
    set cond=%%a& set cond=!cond:~1!
    set parm=%%b& set parm=!parm:~0,-1!
    echo   -   cicle: "!cond!" --^> "!parm!" 
    call if !cond! call:CSG_sub_fs !parm!
    echo    -  done
    )
goto:eof
:CSG_sub_fs
[..]
goto:eof 
```

- 编辑 -

我怎样才能使用变量！cond！决定是否执行对 CSG_sub_fs 的调用？

```
call if !cond! call:CSG_sub_fs !parm! 
```

不起作用，因为它返回：“找不到指定的批次标签 - IF”

如果我使用

```
if !cond! call:CSG_sub_fs !parm! 
```

它会说：“call:CSG_sub_fs not expected”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:09:39.003

嗯 - 似乎没有问题，所以回答起来并不容易。

你有问题

```
echo "^%COMPUTERNAME^% EQU [x];[some parameters1]" 
```

因为`^`不逃`%`-`%`逃`%`- 使用`%%COMPUTERNAME%%...`

（您应该能够通过`TYPE`ing "%temp%\CSG_fs.tmp"来检查这一点

下一个问题是

```
for /f "tokens=1-2* delims=; usebackq" %%a in (%temp%\CSG_fs.tmp) do ( 
```

可以处理`%temp%\CSG_fs.tmp`提供的文件`%temp%\CSG_fs.tmp`不包含空格、分号或逗号。如果它包含任何这些默认分隔符或某些其他具有特殊含义的字符，则必须将文件名括在双引号中`"%temp%\CSG_fs.tmp"`并使用该`usebackq`选项。

您已尝试使用`usebackq`，但如果使用它，则`DELIMS`必须是选项。`LAST`您的代码会将“ `;`”、“ `”、“ `u`”、“ `s`” `e`、“ `b`”、“ `a`”、“ `c`”、“ `k`”和“ `q`”设置为分隔符。`

 `除此之外，也许如果您解释您打算实现的目标，我们将能够设计出适当的代码。

* * *

试试这个：

```
@ECHO OFF
SETLOCAL ENABLEDELAYEDEXPANSION
CLS

REM I'm setting these variables for testing.
REM That isn't ususally a good idea but the SETLOCAL
REM will ensure they are restored on exit

SET computername=[x]
SET logonserver=[z]

(
 rem echo "%systemdrive%;;"
 echo "%%COMPUTERNAME%% EQU [x];[some parameters1]"
 echo "%%USERNAME%% NEQ [y];[some parameters2]"
 echo "%%LOGONSERVER%% EQU [z];[some parameters3]"
) > "%temp%\CSG_fs.tmp"
for /f "usebackqtokens=1-2* delims=;" %%a in ("%temp%\CSG_fs.tmp") do (
    set cond=%%a& set "cond=IF !cond:~1! CALL :csg_sub_fs "
    set parm=%%b& set parm=!parm:~0,-1!
    CALL :varcmd "!cond!" "!parm!"
    )
GOTO :eof

:varcmd
%~1 %~2
GOTO :eof

:csg_sub_fs
ECHO parameters supplied to csg_sub_fs were: %*
GOTO :eof 
```

我已强制变量名与您使用的条件相匹配，以触发子例程调用。根据需要进行更改以证明您的概念。

不要担心不完美的英语。我敢肯定我不会用你的语言做得那么好！`

# ubuntu - strace 挂起系统调用读取

> ID：15809444
> 
> 赞同：6
> 
> 时间：2013-04-04T11:07:55.877
> 
> 标签：ubuntu, strace

我执行了命令： strace -ttt /bin/cat 在 Ubuntu 11.04 上获取系统调用。然而 strace 挂在命令“read”上，无法完成。
我必须按 ctrl+c 才能停止它。
输出类似于：

```
...
1365073129.724883 close(3)              = 0
1365073129.724928 fstat64(1, {st_mode=S_IFCHR|0620, st_rdev=makedev(136, 2), ...}) = 0
1365073129.724963 fstat64(0, {st_mode=S_IFCHR|0620, st_rdev=makedev(136, 2), ...}) = 0
1365073129.725003 read(0, 
```

因为我需要对大量的可执行文件做同样的事情，所以我无法承受这样的频繁挂起。有没有办法解决这个问题，例如，如果超时，让 strace 停止，或者让 strace 退出跳过挂起的系统调用。

# c++ - 如何创建特定的 std::vector 迭代器？

> ID：15809447
> 
> 赞同：0
> 
> 时间：2013-04-04T11:08:04.780
> 
> 标签：c++, templates, vector, iterator

我正在做一个设计很糟糕的项目，我偶然发现了这个数据结构：

```
class OldBagOfData 
{
public:
    std::vector< BaseClass* > baseDatas;
    std::vector< Derived1* > derived1Datas;
    std::vector< Derived2* > derived2Datas;
    std::vector< Derived3* > derived3Datas;
    std::vector< Derived4* > derived4Datas;

} 
```

更新类的方法是使用大量的 if/else 条件（几十个）并且成员是可修改的（最重要的是它使用指针而不是实例），即使我们只读取数据。

我已经使用通用函数和模板简化了代码：

```
class CurrentBagOfData 
{
private:
    std::vector< BaseClass* > genericContainer;

    Template< typename DataType>
    std::vector< DataType* > getData( datatype IDtype);

public:
    std::vector< BaseClass* > getbaseDatas(); /* = getData<Base>("base") */
    std::vector< Derived1* > getDerived1Datas(); /* = getData<Derived1>("derived1") */
    std::vector< Derived2* > getDerived2Datas(); /* = getData<Derived2>("derived2") */
    std::vector< Derived3* > getDerived3Datas(); /* = getData<Derived3>("derived3") */
    std::vector< Derived4* > getDerived4Datas(); /* = getData<Derived4>("derived4") */

} 
```

但是，由于我只读取数据和排队新输入，我想使用迭代器：

```
// This loop is forbidden because obod.getDerived1Datas() is a temporary object
for( std::vector<Derived1*>::iterator it = obod.getDerived1Datas().begin();
                                         it != obod.getDerived1Datas().end(); i++)
{
  /* processing *it */
}

//What I want to do :
for( std::vector<Derived1*>::iteratorDerived1 it = obod.begin(); it != obod.end(); i++)
{
  // it iterate over every Derived1 datas in the generic container
  /* processing *it */
} 
```

**如何创建 std::vector::iteratorDerivedX ？**欢迎对我的设计提出任何其他建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:17:35.970

您可以在 for 循环之前保留函数调用的返回；

此外，您每次迭代都调用 end() 方法，这可能很昂贵。

对于迭代器，pos 增量比 pre 增量更昂贵。

```
std::vector<Derived1*> tmp = obod.getDerived1Datas();
for( std::vector<Derived1*>::iterator it = tmp.begin(), ed = tmp.end(); it != ed; ++i)
{
  /* processing *it */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:26:29.873

您不能（据我所知）向`std::vector`班级添加新成员。但是，您可以对其进行子类化，因此您可以定义自己的迭代器。

另一方面，您可以向您的`CustomBagOfData`类添加一些新方法，例如：

```
public:
    std::vector<Derived1*>::iterator getDerived1Begin() { 
        return getDerived1Datas().begin()
    }
    // And the same for getDerived1End 
```

然而，尽管不知道`DefinedN`类是如何实现的，我还是建议摆脱那些神奇的数字（Derived1、Derived2、...）并使用参数做一些更优雅的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T14:50:24.530

我找到了一种使用模板化迭代器的方法。不幸的是，它增加了很多开销，所以我不确定我是否会使用它：

```
#include <iostream>
#include <vector>

typedef std::string datatype ;

class BaseClass{
public:
    BaseClass():type("base"){}
    datatype type;

};

class Derived1 : public BaseClass{
public:
    Derived1(){ type= "derived1"; }
};
class Derived2 : public BaseClass{
public:
    Derived2(){ type ="derived2"; }
};
class Derived3 : public BaseClass{
public:
    Derived3(){ type ="derived3"; }
};
class Derived4 : public BaseClass{
public:
    Derived4(){ type ="derived4"; }
};

class CurrentBagOfData 
{
private:

    template< typename DataType>
    std::vector< DataType* > getData( datatype IDtype)
    {
        std::vector< DataType* > output;
        for(int i=0; i< genericContainer.size(); i++)
        {
            if(genericContainer[i]->type == IDtype)
            {
                output.push_back( (DataType*) genericContainer[i]);
            }

        }
        return output;
    }

public:

    // Begin of the specialized container
    template< class DataType>
    std::vector< BaseClass* >::iterator begin()
    {
        std::vector< BaseClass* >::iterator it = genericContainer.begin();

        datatype type = DataType().type;
        while( it != genericContainer.end() && (*it)->type != type   )
        {
            it++;
        }

        return it;

    }

    // End of the specialized container
    template< class DataType>
    std::vector< BaseClass* >::iterator end()
    {
        std::vector< BaseClass* >::iterator it = genericContainer.begin();
        std::vector< BaseClass* >::iterator output = it;

        datatype type = DataType().type;
        while( it!= genericContainer.end() )
        {
            it++;

            if( it!= genericContainer.end() && (*it)->type == type )
            {

                output = it;
            }

        }

        return output;

    }

    // Iterate over a certain type of elements in the container
    template< class DataType>
    void gen( std::vector<BaseClass*>::iterator &it)
    {
        const std::vector< BaseClass* >::iterator e =  this->genericContainer.end();

        // Mandatory increment
        if(it!= e )
            it++;

        // Loop until next DataType elem
        datatype type = DataType().type;
        while( it!= e && (*it)->type != type   )
        {
            it++;
        }

    }

    std::vector< BaseClass* > getbaseDatas(){ return getData<BaseClass>("base"); }
    std::vector< Derived1* > getDerived1Datas(){ return getData<Derived1>("derived1"); }
    std::vector< Derived2* > getDerived2Datas(){ return getData<Derived2>("derived2"); }
    std::vector< Derived3* > getDerived3Datas(){ return getData<Derived3>("derived3"); }
    std::vector< Derived4* > getDerived4Datas(){ return getData<Derived4>("derived4"); }

    std::vector< BaseClass* > genericContainer;

};

int main()
{
    // Object
    CurrentBagOfData cbod;

    cbod.genericContainer.push_back(new(BaseClass));
    cbod.genericContainer.push_back(new(Derived1));
    cbod.genericContainer.push_back(new(Derived3));
    cbod.genericContainer.push_back(new(Derived2));
    cbod.genericContainer.push_back(new(Derived1));
    cbod.genericContainer.push_back(new(Derived4));
    cbod.genericContainer.push_back(new(Derived3));
    cbod.genericContainer.push_back(new(Derived3));

    // Loop on Derived4 object, using the original method
    std::vector< Derived4* > o = cbod.getDerived4Datas();
    for (int i=0; i < o.size(); i++ )
    {
        std::cout << o[i]->type << std::endl;
    }
    std::cout << std::endl;

    // Loop on Derived3 objects, with custom iterators.
    std::vector< BaseClass* >::iterator it;
    for( it = cbod.begin< Derived3 >(); it <= cbod.end< Derived3 >(); cbod.gen< Derived3 >(it) )
    {
        std::cout << (*it)->type << std::endl;
    }

} 
```

# c# - 用空元素初始化多维列表的好方法？

> ID：15809450
> 
> 赞同：2
> 
> 时间：2013-04-04T11:08:10.237
> 
> 标签：c#, list, multidimensional-array, initialization, nested-lists

对于我正在制作的瓷砖游戏，我选择使用 4D 嵌套列表系统。

*   第一维 - 层（背景和前景，但可能还有其他）
*   第二和第三维 - 2D 网格，基于瓷砖的经典游戏
*   第四维度 - 网格中的图块包含的对象（例如，多个项目可以在 rougelike 中的同一块地砖上掉落

我有确切的层数以及地图的高度和宽度。用这些数字初始化前三个维度然后用空对象列表填充每个“图块”（即第四维）的好方法是什么？

这里有一些代码可以更好地说明它：

```
List<List<List<List<GameObject>>>> Grid;
public readonly int Layers, Height, Width; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T23:07:27.960

您可以使用 linq 执行此操作：

```
List<List<List<List<GameObject>>>> Grid;
Grid = Enumerable.Range(0, Layers).Select(l =>
       Enumerable.Range(0, Height).Select(h =>
       Enumerable.Range(0, Width).Select(w => 
           new List<GameObject>()).ToList()).ToList()).ToList(); 
```

相同的代码可用于生成数组数组（或任何更灵活的组合以满足您的需求），即：

```
List<GameObject>[][][] Grid;
Grid = Enumerable.Range(0, Layers).Select(l =>
       Enumerable.Range(0, Height).Select(h =>
       Enumerable.Range(0, Width).Select(w => 
           new List<GameObject>()).ToArray()).ToArray()).ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T11:14:19.260

如果其中三个维度具有固定长度，则可以改用数组：

```
List<GameObject>[,,] Grid = new List<GameObject>[Layers, Width, Height];
for(var l = 0; l < Layers; l++)
    for(var x = 0; x < Width; x++)
        for(var y = 0; y < Height; y++)
{
    Grid[l, x, y] = new List<GameObject>();
} 
```

如果您真的需要列表（IMO 看起来更糟）：

```
List<List<List<List<GameObject>>>> Grid = new List<List<List<List<GameObject>>>>();
for(var l = 0; l < Layers; l++)
{
    Grid.Add(new List<List<List<GameObject>>>());
    for(var x = 0; x < Width; x++)
    {
        Grid[l].Add(new List<List<GameObject>>());
        for(var y = 0; y < Height; y++)
        {
            Grid[l][x].Add(new List<GameObject>());
        }
    }
} 
```

# java - 将 Spring 服务与旧的 jsp Web 应用程序集成

> ID：15809452
> 
> 赞同：1
> 
> 时间：2013-04-04T11:08:15.817
> 
> 标签：java, spring, jsp, spring-mvc, web.xml

我是 Spring 框架的新手，非常感谢您对我遇到的问题的指导。我正在开发基于 Spring 框架的 Web 服务，我已经在我的本地 wrkspace 上单独开发了它，现在我正在尝试将它与我现有的 Web 应用程序集成，该应用程序基本上使用旧的 jsps，没有特定的框架。我的应用程序托管在 tomcat 上，其原始 web.xml 为：

```
<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.2//EN" "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">

<web-app>
<display-name>BOBCAT</display-name>
<description>
BOBCAT
</description>

<servlet>
    <servlet-name>DFPServlet</servlet-name>
    <servlet-class>uk.co.blackwell.dfp.DFPServlet</servlet-class>
    <init-param>
     <param-name>properties</param-name>
    <param-value>/opt/bobcat/dev2/apprunner/webapps/bobcat/WEB-INF/classes/uk/co/blackwell/dfp/dfpprops.xml</param-value>
    </init-param>
</servlet>

<servlet-mapping>
    <servlet-name>DFPServlet</servlet-name>
    <url-pattern>*.dfp</url-pattern>
</servlet-mapping>

<!-- Cannot redirect to static apache-served pages -->
<!-- File not found (404),  unauthorized/forbidden (403, 401) -->
<error-page>
    <error-code>401</error-code>
    <location>/not_found.jsp</location>
</error-page>   
<error-page>
    <error-code>403</error-code>
    <location>/not_found.jsp</location>
</error-page>   
<error-page>
    <error-code>404</error-code>
    <location>/not_found.jsp</location>
</error-page>   
</web-app> 
```

我想在这个旧版本中集成的新 web.xml 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/dispatcher-servlet.xml</param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>2</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>
<session-config>
    <session-timeout>
        30
    </session-timeout>
</session-config>
<welcome-file-list>
    <welcome-file>/</welcome-file>
</welcome-file-list>

    <servlet>
    <servlet-name>restful</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/restful-context.xml</param-value>            
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>restful</servlet-name>
    <url-pattern>/restful/*</url-pattern>
</servlet-mapping>    
</web-app> 
```

我想我在定义新的 web.xml 本身时可能做错了什么，因为当我将块从 spring 版本放到旧版本时，它给了我所有请求的 404 not found 错误。我已经尝试咨询了很多在线资源，但其中大多数要么从头开始支持新的 Spring 应用程序，要么在某些意义上是不完整的。任何帮助或努力将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:36:27.443

尝试了几种组合，发现实际上比想象的要容易。我在这里没有使用任何侦听器，因为当我尝试使用侦听器时，它会为所有请求提供 404 not found 警告。我现在可以摆脱它，因为我只需要使用 Spring 将 Restful Web 服务与我的旧 Web 应用程序集成。它现在工作得很好，无论是在我的本地工作区（Win 7）还是 linux 开发盒上。

最终的web.xml如下：

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

<display-name>BOBCAT</display-name>
<description>
BOBCAT
</description>

<!-- Added on 20/03/2013 by Anshul for Spring -->
<servlet>
    <servlet-name>restful</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/restful-context.xml</param-value>            
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>restful</servlet-name>
    <url-pattern>/restful/*</url-pattern>
</servlet-mapping>
<!-- End of addition by Anshul -->

<servlet>
    <servlet-name>DFPServlet</servlet-name>
    <servlet-class>uk.co.blackwell.dfp.DFPServlet</servlet-class>
    <init-param>
     <param-name>properties</param-name>
    <param-value>/opt/bobcat/dev2/apprunner/webapps/bobcat/WEB-INF/classes/uk/co/blackwell/dfp/dfpprops.xml</param-value>
    </init-param>
</servlet>

<servlet-mapping>
    <servlet-name>DFPServlet</servlet-name>
    <url-pattern>*.dfp</url-pattern>
</servlet-mapping>

<!-- Cannot redirect to static apache-served pages -->
<!-- File not found (404),  unauthorized/forbidden (403, 401) -->
<error-page>
    <error-code>401</error-code>
    <location>/not_found.jsp</location>
</error-page>   
<error-page>
    <error-code>403</error-code>
    <location>/not_found.jsp</location>
</error-page>   
<error-page>
    <error-code>404</error-code>
    <location>/not_found.jsp</location>
</error-page>   

</web-app> 
```

# ios - 添加到 UIScrollView 的按钮/标签仅出现在第一页

> ID：15809457
> 
> 赞同：0
> 
> 时间：2013-04-04T11:08:26.020
> 
> 标签：ios, objective-c, uiscrollview

我使用下面的代码启用了 UIScrollView 分页选项：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    for (int i = 0; i < 6; i++) {
        CGRect frame;
        frame.origin.x = self.scrollView.frame.size.width * i;
        frame.origin.y = 0;
        frame.size = self.scrollView.frame.size;
        [scrollView scrollRectToVisible:frame animated:YES];

        UIView *subview = [[UIView alloc] initWithFrame:frame];
        itemName.text = @"Samara";
        [self.scrollView addSubview:subview];
        [subview release];
    }

    self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * 6, 1.0);
} 
```

我有许多元素（按钮、标签），在情节提要中添加到此 ScrollView 元素中，但在 UI 中它们仅出现在第一页上 - 下一页是空白的。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:41:37.753

只需阅读您的代码示例 - 这是如何制作您的滚动视图页面，您在这些滚动视图中添加的内容取决于您：

```
//Set your scrollView frame
[self.scrollView setFrame:CGRectMake(0,0,320,460];

//Will use this value to set the content width after the loop
CGFloat scrollWidth = 0;
CGFloat pageWidth = self.scrollView.frame.size.width;
CGFloat pageHeight = self.scrollView.frame.size.height;
for (int i = 0; i < 6; ++i)
{
    //Create the page and make the origin.x i * pageWidth
    UIView *page = [[UIView alloc] initWithFrame:CGRectMake((i * pageWidth),0,pageWidth,pageHeight)];
    scrollWidth += page.width;
    //Add the page
    [self.scrollView addSubview:page];
}
//set the content size to the right edge of the last page (scrollWidth)
[self.scrollView setContentSize:CGSizeMake(scrollWidth,pageHeight)];
//Scroll to the last page - assuming you wanted this by looking at the code in your loop
[self.scrollView scrollRectToVisible:CGRectMake((scrollWidth - pageWidth),0,pageWidth,pageHeight)];
//Enable paging and scrolling (scrollEnabled should be YES by default)
self.scrollView.pagingEnabled = YES;
self.scrollView.scrollEnabled = YES; 
```

根据您的代码，我能做到的最好 - 希望它有所帮助

# sql - ASP VB Change cell colour of column in GridView based on value in another column

> ID：15809460
> 
> 赞同：0
> 
> 时间：2013-04-04T11:08:35.220
> 
> 标签：sql, visual-studio-2010, gridview, backcolor

I have created a gridview with multiple columns in it. I would like to change the background column of the Teacher Assessment column based on the value in the difference column. Based on my current code below the change of colour is working, but it colours the whole row, I only want to apply it to the Teacher Assessment column.

I would screenshot, but I don't have the rep yet, so I'll try and show it with text:

```
Target    Teacher Assessment    Difference    (TA column colour)
C+        B-                    1             Green
C+        C-                    -2            Red
C+        C+                    0             Yellow 
```

Here is the code I'm currently using to trigger the change in background colour modified from some code found on the web in an answer to a similar issue:

```
Protected Sub gdViewAllopen_RowDataBound(ByVal sender As Object, ByVal e As GridViewRowEventArgs)
    If e.Row.RowType = DataControlRowType.DataRow Then
        Dim number = DirectCast(e.Row.DataItem, DataRowView)("Difference").ToString()
        Select Case number
            Case 0
                e.Row.BackColor = System.Drawing.Color.Yellow
            Case Is > 0
                e.Row.BackColor = System.Drawing.Color.Green
            Case Is < 0
                e.Row.BackColor = System.Drawing.Color.Red
        End Select
    End If
End Sub 
```

* * *

Sussed it out! So easy as well!! Ah well, here it is for the benefit of others. Just add `Cells(n)` after `Row`:

`e.Row.Cells(2).BackColor = System.Drawing.Color.Yellow`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:34:42.927

Sussed it out! So easy as well!! Ah well, here it is for the benefit of others. Just add `Cells(n)` after `Row`:

`e.Row.Cells(2).BackColor = System.Drawing.Color.Yellow`

# asp.net-mvc - 有条件地添加类

> ID：15809461
> 
> 赞同：0
> 
> 时间：2013-04-04T11:08:36.157
> 
> 标签：asp.net-mvc, asp.net-mvc-3

```
<span class=@Model.TotalSent<0?"small":"big">show me only if @Model.TotalSent >0 </span> 
```

上面的代码行是我期望 class="big" 如果 @Model.TotalSent>0 否则 class="small" 将被渲染的代码。

但是没有发生什么是真正的语法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:14:11.487

试试这个：

```
<span class='@(Model.TotalSent < 0 ? "small" : "big")'>show me only if @Model.TotalSent >0 </span> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T11:14:12.003

尝试用括号括住你的表达式，并确保你在你的`class`.

```
<span class='@( Model.TotalSent < 0 ? "small" : "big" )'>... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T11:15:30.560

```
class="@(Model.TotalSent < 0 ? "small":"big")" 
```

# sql - 如果没有任何其他子项引用，则删除父项

> ID：15809463
> 
> 赞同：10
> 
> 时间：2013-04-04T11:08:45.547
> 
> 标签：sql, postgresql, foreign-keys, common-table-expression, referential-integrity

我有一个示例情况：`parent`表有一个名为 的列`id`，在`child`表中作为外键引用。

删除子行时，如果没有任何其他子行引用，如何删除父行？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-04T11:44:06.103

在 PostgreSQL **9.1 或更高版本中，您可以通过使用**[**数据修改 CTE**](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)的单个语句来执行此操作。这通常不太容易出错。它**最小化**了两个 DELETE 之间的时间范围，其中**竞争条件**可能导致并发操作的惊人结果：

```
WITH del_child AS (
    DELETE FROM child
    WHERE  child_id = 1
    RETURNING parent_id, child_id
    )
DELETE FROM parent p
USING  del_child x
WHERE  p.parent_id = x.parent_id
AND    NOT EXISTS (
   SELECT 1
   FROM   child c
   WHERE  c.parent_id = x.parent_id
   AND    c.child_id <> x.child_id   -- !
   ); 
```

[**SQL小提琴。**](http://www.sqlfiddle.com/#!12/b95f2/3)

无论如何，孩子都会被删除。我引用[手册](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)：

> 中的数据修改语句`WITH`只执行一次，并且 **总是完成**，与主查询是否读取所有（或实际上任何）输出无关。`SELECT`请注意，这与in的规则不同`WITH`：如上一节所述，`SELECT`仅在主查询需要其输出时才执行 a。

*只有在没有其他*子项时才会删除父项。
注意最后一个条件。与人们的预期相反，这是必要的，因为：

> 中的子语句彼此**同时**`WITH`执行并与主查询同时执行。因此，当在 中使用数据修改语句时，指定更新实际发生的顺序是不可预测的。所有语句都使用同一个快照执行（参见第 13 章），因此它们无法“看到”彼此对目标表的影响。**`WITH`**

 **大胆强调我的。
我用列名`parent_id`代替了非描述性的`id`.

### 消除竞争条件

*为了完全*消除我上面提到的可能的竞争条件，*首先*锁定父行。当然，*所有*类似的操作都必须遵循相同的程序才能使其工作。

```
WITH lock_parent AS (
   SELECT p.parent_id, c.child_id
   FROM   child  c
   JOIN   parent p ON p.parent_id = c.parent_id
   WHERE  c.child_id = 12              -- provide child_id here once
   FOR    NO KEY UPDATE                -- locks parent row.
   )
 , del_child AS (
   DELETE FROM child c
   USING  lock_parent l
   WHERE  c.child_id = l.child_id
   )
DELETE FROM parent p
USING  lock_parent l
WHERE  p.parent_id = l.parent_id
AND    NOT EXISTS (
   SELECT 1
   FROM   child c
   WHERE  c.parent_id = l.parent_id
   AND    c.child_id <> l.child_id   -- !
   ); 
```

这样，一次只有*一个*事务可以锁定同一个父事务。所以不可能发生多个事务删除同一个父级的子级，仍然看到其他子级并保留父级，而所有子级都消失了。（仍然允许使用 . 更新非键列`FOR NO KEY UPDATE`。）

如果这种情况永远不会发生，或者您可以忍受它（几乎永远不会）发生 - 第一个查询更便宜。否则，这是安全路径。

`FOR NO KEY UPDATE`是在 Postgres 9.4 中引入的。[手册中的详细信息。](https://www.postgresql.org/docs/current/static/explicit-locking.html#LOCKING-ROWS)在旧版本中，请改用更强的锁`FOR UPDATE`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T11:17:54.623

```
delete from child
where parent_id = 1 
```

在子项中删除后，在父项中执行：

```
delete from parent
where
    id = 1
    and not exists (
        select 1 from child where parent_id = 1
    ) 
```

该`not exists`条件将确保仅当子项中不存在它时才将其删除。您可以将两个删除命令包装在事务中：

```
begin;
first_delete;
second_delete;
commit; 
```**

# wcf - 当usesynchronizationcontext=false 时wcf 使用什么线程池

> ID：15809470
> 
> 赞同：1
> 
> 时间：2013-04-04T11:08:55.020
> 
> 标签：wcf, asynchronous

我有一个使用带有 /async 标志的 SVCUTIL 生成的 wcf 客户端。

服务器是同步的，但我只在客户端中使用 Begin/End 方法。

另外，我在 CallbackBehavior 中添加了属性 UseSynchronizationContext=false。

我的问题是：WCF 如何在这种模式下处理线程？或者更好的措辞 - 当我调用同时函数时，WCF 是否使用 ThreadPool 类来获取回调的新线程？还是有一些自定义实现？

我在谷歌上搜索了几个小时，没有找到任何答案。

编辑：我看到我在这里有点不清楚 - 我不是在询问服务器应用程序，我是在询问客户端应用程序 - 当我设置 usesynchrationcontext 标志时，它如何管理返回回调的线程假的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:53:01.063

您的服务的线程不受客户端如何调用它的影响。当您使用代理 Begin/End 方法时，代理使用不同的客户端线程来进行服务调用，这样您的应用程序代码就不会阻塞。

现在首选基于 .NET 4.5 任务的异步调用。

有关不同模式的概述，请参阅[同步和异步操作。](http://msdn.microsoft.com/en-us/library/ms734701.aspx)

# java - SessionFactory 注入不起作用

> ID：15809476
> 
> 赞同：1
> 
> 时间：2013-04-04T11:09:08.400
> 
> 标签：java, hibernate, session, spring-mvc, sessionfactory

我的 SessionFactory 没有被注入到 SessionFactory 变量中。我的配置如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:context="http://www.springframework.org/schema/context"
        xmlns:mvc="http://www.springframework.org/schema/mvc"
        xmlns:tx="http://www.springframework.org/schema/tx"
        xsi:schemaLocation="
        http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.2.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx-3.2.xsd">

    <mvc:annotation-driven/>

    <tx:annotation-driven/>

    <context:annotation-config/>

    <!-- Scans the package for contents -->
    <context:component-scan base-package="com.csu.library.mvc"/>

    <!-- Maps static resources like images, css, javascript files -->
    <mvc:resources location="/resources/" mapping="/resources/**"/>

    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name = "viewClass" value = "org.springframework.web.servlet.view.JstlView"/>
        <property name = "prefix" value = "/WEB-INF/jsps/"/>
        <property name = "suffix" value = ".jsp"/>
    </bean>

    <bean id="dataSource" destroy-method="close" class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
        <property name="url" value="jdbc:mysql://localhost:3306/csu_library"/>
        <property name="username" value="csulibrary"/>
        <property name="password" value="csulibrary"/>

        <!-- Pool Properties -->
        <property name="initialSize" value="5" />
        <property name="maxIdle" value="5" />
        <property name="maxActive" value="10" />
    </bean>

    <bean id = "hibernateProperties" class = "java.util.Properties">
        <constructor-arg index="0">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
                <prop key="hibernate.cglib.use_reflection_optimizer">true</prop>
                <prop key="hibernate.cache.provider_class">org.hibernate.cache.HashtableCacheProvider</prop>
            </props>
        </constructor-arg>
    </bean>

    <bean id = "sessionFactory" class = "org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="packagesToScan" value = "com.csu.library.mvc"/>
        <property name="dataSource" ref = "dataSource"/>        
        <property name="hibernateProperties" ref = "hibernateProperties"/>

    </bean>

    <bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name = "sessionFactory" ref = "sessionFactory"/>
    </bean>
</beans> 
```

**HibernateUtil.class**

```
package com.csu.library.mvc.hibernate;

import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.context.annotation.Bean;
import org.springframework.orm.hibernate4.HibernateExceptionTranslator;
import org.springframework.orm.hibernate4.HibernateTransactionManager;
import org.springframework.transaction.annotation.EnableTransactionManagement;

@org.springframework.context.annotation.Configuration
@EnableTransactionManagement
public class HibernateUtil {

    @Autowired
    @Qualifier("sessionFactory")
    private SessionFactory sessionFactory;

    public SessionFactory getSessionFactory() {
        return sessionFactory;
    }

    @Bean
    public HibernateTransactionManager transactionManager() {
        return new HibernateTransactionManager(getSessionFactory());
    }

    @Bean
    public HibernateExceptionTranslator exceptionTranslator() {
        return new HibernateExceptionTranslator();
    }
} 
```

调用 getSessionFactory() 方法时，程序会抛出**NullPointerException 。**显然， sessionFactory 没有被注入。程序启动良好。可能是什么问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:50:19.477

像下面这样注入，它会正常工作

```
@Autowired
@Qualifier("sessionFactory")
private SessionFactory sessionFactory;

public Session getSession() {
    return sessionFactory.getCurrentSession();
} 
```

希望能帮到你：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:18:49.663

在某些 Spring 版本中，不扫描子文件夹。要么将你的类移到包 com.csu.library.mvc 中，要么在扫描的包中添加包 com.csu.library.mvc.hibernate 并试一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:00:07.523

您将要使用`org.springframework.beans.factory.annotation.Autowired`注释而不是`javax.inject.Inject`.

```
@Autowired
private SessionFactory sessionFactory; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-22T23:00:31.943

请注意，仅在定义它的同一应用程序上下文中查找 bean 上的注释。这意味着，如果您为 DispatcherServlet 放入 WebApplicationContext，它只会检查 ***控制器***中的 @Autowired bean ，而不是您的服务。

# regex - Shell 脚本 - 列出文件、读取文件并将数据写入新文件

> ID：15809477
> 
> 赞同：4
> 
> 时间：2013-04-04T11:09:11.183
> 
> 标签：regex, parsing, shell, sed, read-write

我对 shell 脚本有一个特殊的问题。
简单的脚本编写对我来说没问题，但我对此很陌生，想让我成为一个简单的数据库文件。

所以，我想做的是：

```
- Search for filetypes (i.e. .nfo) <-- should be no problem :)
- read inside of each found file and use some strings inside
- these string of each file should be written in a new file. Each found file informations 
```

应该是新文件中的一行

我希望我能很好地解释我的“项目”。

我现在的问题是，要了解如何告诉脚本它必须搜索文件，然后使用每个文件读取它并使用其中的一些信息将其写入新文件。

我会解释得更好一点。
我正在搜索文件，这让我回来了：

> 文件 1.nfo文件
> 2.nfo 文件
> 3.nfo

好的，现在在每个文件中，我需要两行之间的信息。即
**file1.nfo：**

```
<user>test1</user> 
```

**文件2.nfo：**

```
<user>test2</user> 
```

所以在新文件中现在应该有：

```
file1.nfo:user1
file2.nfo:user2 
```

好的，所以：

```
find -name *.nfo  > /test/database.txt 
```

正在打印文件列表。和

```
sed -n '/<user*/,/<\/user>/p' file1.nfo 
```

给我完整的文件，而不仅仅是和之间的`<user>`信息`</user>`

我试着一步一步往前走，我读了很多书，但似乎很难。

我做错了什么，列出所有文件并将文件和两个字符串之间的内容写入文件的最佳方法应该是什么？

**编辑-新：**

好的，这是有关更多信息的更新。我现在学到了很多东西，并在网上搜索了我的问题。我可以找到很多信息，但我不知道如何将它们放在一起以便我可以使用它。

现在使用 awk 是我得到文件名和字符串。

现在这里是完整的信息（我想我可以在一些帮助下自己继续，但我不能:()

这是一个示例：/test/file1.nfo

```
<string1>STRING 1</string1>
<string2>STRING 2</string2>
<string3>STRING 3</string3>
<string4>STRING 4</string4>
<personal informations>
<hobby>Baseball</hobby>
<hobby>Baskeball</hobby>
</personal informations> 
```

这里是 /test/file2.nof 的一个例子

```
<string1>STRING 1</string1>
<string2>STRING 2</string2>
<string3>STRING 3</string3>
<string4>STRING 4</string4>
<personal informations>
<hobby>Soccer</hobby>
<hobby>Traveling</hobby>
</personal informations> 
```

我要创建的文件必须看起来像这样。

```
STRING 1:::/test/file1.nfo:::Date of file:::STRING 4:::STRING 3:::Baseball, Basketball:::STRING 2
STRING 1:::/test/file2.nfo:::Date of file:::STRING 4:::STRING 3:::Baseball, Basketball:::STRING 2 
```

“文件日期”应该是文件的创建日期。这样我就可以看到文件的年龄。

所以，这就是我所需要的，而且似乎并不容易。

非常感谢。

**更新错误 -printf**

```
find: unrecognized: -printf

Usage: find [PATH]... [OPTIONS] [ACTIONS]

Search for files and perform actions on them.
First failed action stops processing of current file.
Defaults: PATH is current directory, action is '-print'

    -follow         Follow symlinks
    -xdev           Don't descend directories on other filesystems
    -maxdepth N     Descend at most N levels. -maxdepth 0 applies
                    actions to command line arguments only
    -mindepth N     Don't act on first N levels
    -depth          Act on directory *after* traversing it

Actions:
    ( ACTIONS )     Group actions for -o / -a
    ! ACT           Invert ACT's success/failure
    ACT1 [-a] ACT2  If ACT1 fails, stop, else do ACT2
    ACT1 -o ACT2    If ACT1 succeeds, stop, else do ACT2
                    Note: -a has higher priority than -o
    -name PATTERN   Match file name (w/o directory name) to PATTERN
    -iname PATTERN  Case insensitive -name
    -path PATTERN   Match path to PATTERN
    -ipath PATTERN  Case insensitive -path
    -regex PATTERN  Match path to regex PATTERN
    -type X         File type is X (one of: f,d,l,b,c,...)
    -perm MASK      At least one mask bit (+MASK), all bits (-MASK),
                    or exactly MASK bits are set in file's mode
    -mtime DAYS     mtime is greater than (+N), less than (-N),
                    or exactly N days in the past
    -mmin MINS      mtime is greater than (+N), less than (-N),
                    or exactly N minutes in the past
    -newer FILE     mtime is more recent than FILE's
    -inum N         File has inode number N
    -user NAME/ID   File is owned by given user
    -group NAME/ID  File is owned by given group
    -size N[bck]    File size is N (c:bytes,k:kbytes,b:512 bytes(def.))
                    +/-N: file size is bigger/smaller than N
    -links N        Number of links is greater than (+N), less than (-N),
                    or exactly N
    -prune          If current file is directory, don't descend into it
If none of the following actions is specified, -print is assumed
    -print          Print file name
    -print0         Print file name, NUL terminated
    -exec CMD ARG ; Run CMD with all instances of {} replaced by
                    file name. Fails if CMD exits with nonzero
    -delete         Delete current file/directory. Turns on -depth option 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:57:54.250

sed的`pat1,pat2`符号是基于行的。可以这样想，`pat1`为其命令设置一个启用标志并`pat2`禁用该标志。如果两者`pat1`和`pat2`都在同一行，则将设置标志，因此在您的情况下打印所有内容，包括该`<user>`行。有关更多信息，请参阅[grymoire 的 sed howto](http://www.grymoire.com/Unix/Sed.html)。

在这种情况下，sed 的替代方法是使用支持环视断言的 grep，例如 GNU grep：

```
find . -type f -name '*.nfo' | xargs grep -oP '(?<=<user>).*(?=</user>)' 
```

如果 grep 不支持`-P`，您可以使用 grep 和 sed 的组合：

```
find . -type f -name '*.nfo' | xargs grep -o '<user>.*</user>' | sed 's:</\?user>::g' 
```

输出：

```
./file1.nfo:test1
./file2.nfo:test2 
```

请注意，您应该意识到[将文件传递给`xargs`](http://mywiki.wooledge.org/BashFAQ/020)并可能使用它所涉及的问题`-exec ...`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T12:13:42.410

碰巧[grep](http://linux.die.net/man/1/grep)以您需要的格式输出，对于单行来说就足够了。

默认情况下 a`grep '' *.nfo`将输出如下内容：

```
file1.nfo:random data  
file1.nfo:<user>test1</user>  
file1.nfo:some more random data  
file2.nfo:not needed  
file2.nfo:<user>test2</user>  
file2.nfo:etc etc 
```

通过添加`-P`选项 (Perl RegEx)，您可以将输出限制为仅匹配：

```
grep -P "<user>\w+<\/user>" *.nfo 
```

输出：

```
file1.nfo:<user>test1</user>  
file2.nfo:<user>test2</user> 
```

现在`-o`选项（仅显示匹配的内容）节省了时间，但我们需要更高级的 RegEx，因为不需要标签：

```
grep -oP "(?<=<user>)\w+(?=<\/user>)" *.nfo > /test/database.txt 
```

输出`cat /test/database.txt`：

```
file1.nfo:test1 
file2.nfo:test2 
```

在这里解释正则表达式：[http ://regex101.com/r/oU2wQ1](http://regex101.com/r/oU2wQ1)

你的整个脚本就变成了一个命令。

**更新：**

如果您没有`--perl-regexp`选项，请尝试：

```
grep -oE "<user>\w+<\/user>" *.nfo|sed 's#</?user>##g' > /test/database.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T21:24:09.533

所有你需要的是：

```
find -name '*.nfo' | xargs awk -F'[><]' '{print FILENAME,$3}' 
```

如果您的文件中包含的不仅仅是您在示例输入中显示的内容，那么这可能就是您所需要的：

```
... awk -F'[><]' '/<user>/{print FILENAME,$3}' file 
```

试试这个（未经测试）：

```
> outfile
find -name '*.nfo' -printf "%p %Tc\n" |
while IFS= read -r fname tstamp
do
      awk -v tstamp="$tstamp" -F'[><]' -v OFS=":::" '
          { a[$2] = a[$2] sep[$2] $3; sep[$2] = ", " }
          END {
              print a["string1"], FILENAME, tstamp, a["string4"], a["string3"], a["hobby"], a["string2"]
          }
      ' "$fname" >> outfile
done 
```

仅当您的文件名不包含空格时，上述内容才有效。如果可以，我们需要调整循环。

如果您的 find 不支持 -printf （建议 - 认真考虑获得现代“find”！）：

```
> outfile
find -name '*.nfo' -print |
while IFS= read -r fname
do
      tstamp=$(stat -c"%x" "$fname")
      awk -v tstamp="$tstamp" -F'[><]' -v OFS=":::" '
          { a[$2] = a[$2] sep[$2] $3; sep[$2] = ", " }
          END {
              print a["string1"], FILENAME, tstamp, a["string4"], a["string3"], a["hobby"], a["string2"]
          }
      ' "$fname" >> outfile
done 
```

如果你没有“stat”，那么谷歌寻找替代方法来从文件中获取时间戳或考虑解析输出`ls -l`- 它是不可靠的，但如果它就是你所拥有的......

# android - Android 图像从 url 到图像视图

> ID：15809485
> 
> 赞同：0
> 
> 时间：2013-04-04T11:09:45.380
> 
> 标签：android, android-sdcard, imageurl, memorycache

我正在按照本教程从图像 url 获取图像。

[http://www.androidhive.info/2012/07/android-loading-image-from-url-http/](http://www.androidhive.info/2012/07/android-loading-image-from-url-http/)

我认为他正在使用以下代码在外部存储中创建一些“ **Tempimages ”文件夹**

```
 //Find the dir to save cached images
        if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
            cacheDir=new File(android.os.Environment.getExternalStorageDirectory(),"TempImages");
        else
            cacheDir=context.getCacheDir();
        if(!cacheDir.exists())
            cacheDir.mkdirs(); 
```

我的问题是，如果设备没有 sd 卡，这个代码可以工作吗？

我在没有 sd 卡大小的模拟器中尝试过它工作正常。谁能告诉我这段代码可以在没有 SDCard 的真实设备上运行。

如果错误地理解了代码，也请纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:14:27.933

**如果设备没有 SD 卡，此代码可以使用吗？**

**是的**

`context.getCachedir()`返回 /data/data/your.application.package/cache。即，内部存储中的缓存目录。

所以它在设备上也能正常工作

# objective-c - UIViewController 子类的 title 属性无法通过 iVar 访问

> ID：15809487
> 
> 赞同：0
> 
> 时间：2013-04-04T11:09:48.280
> 
> 标签：objective-c, cocoa-touch, uiviewcontroller, kvc

在 UIViewSubClass 的初始化程序中，我使用 iVar 设置标题属性（避免初始化程序中推荐的设置器）：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        _title = @"Pen";
    }
    return self;
} 
```

当我输入它时没有显示错误，但是当我编译或分析时，我得到一个链接器错误：

```
Undefined symbols for architecture i386:
  "_OBJC_IVAR_$_UIViewController._title", referenced from:
      -[PenViewController initWithNibName:bundle:] in PenViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这是怎么回事？标题不符合 KVC 吗？

# editor - 是否可以在 Qt Creator 中重新分配 Alt-H 键盘快捷键？

> ID：15809489
> 
> 赞同：1
> 
> 时间：2013-04-04T11:09:54.123
> 
> 标签：editor, keyboard-shortcuts, qt-creator

是否可以重新分配`ALT`- `H`Qt Creator 中的键盘快捷键？怎么可能做到？

注意：默认调用帮助菜单项

# iphone - 保持身体背景图像固定在 iPhone 上

> ID：15809492
> 
> 赞同：0
> 
> 时间：2013-04-04T11:10:08.987
> 
> 标签：iphone, css, scroll, background-image, fixed

几天来，我一直在尝试让我的 JQM iPhone 应用程序上的背景图像保持固定并让内容在其上方滚动。

研究了许多给出的答案后，我得到了以下代码：

```
body {
 background-image:url(images/background.jpg);
 background-attachment:fixed;
} 
```

在我的桌面上预览 Safari 中的应用程序时，使用它可以达到预期的效果，但是当我在我的 iPhone（4s - 6.1.3）上查看应用程序时，背景会随着内容滚动。

我尝试了许多不同的方法来实现我的要求，但到目前为止我还没有成功。由于大多数应用程序都使用这种方法，我确信这是我所缺少的非常简单的东西。

任何建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:26:42.077

尝试使用下面的一个 body { background-image:url(images/background.jpg); 背景附件：固定；背景大小：100%；}

# hierarchy - 如何在 MS Project Server PWA 中创建项目层次结构？

> ID：15809493
> 
> 赞同：0
> 
> 时间：2013-04-04T11:10:09.777
> 
> 标签：hierarchy, ms-project-server-2010

我需要在 MS-PWA 中创建项目层次结构以及项目访问权限。

我们的想法是有一个“公司项目”，在它下面是我们的研发、财务、营销项目。

*   课程外的限制应适用于每个项目（一些将有权访问根项目 - 而其他人只能访问他们的特定项目（销售人员、营销部门等）

是否可以在 MS-Project Server 2010 PWA 中创建这样的层次结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:18:23.877

对您的问题的回答是：不，您不能使用 PWA 将项目插入另一个项目，您不能使用 PWA 定义跨项目链接。这只能使用 Project Pro 来完成。

顺便说一句，我们也从相同的想法开始：拥有一个主项目并在子项目级别上管理安全性。这个想法失败了，因为打开master花了太长时间——Project Pro打开所有子项目和master一起更新进度；另一个问题是子项目的高度集成——太多的跨项目链接。

您可能想要创建这种结构的原因之一是使用来自部门子项目的数据来查看整个公司的进展。这是另一个问题 - 只有 Project Pro 可以更新主节点的状态。

我建议在 PWA 中创建一个视图，以便查看以某种方式组合在一起的所有项目——这将更容易和更快。

# mysql - 删除父级时，Mysql'Cascade On Delete'未在外键行上删除

> ID：15809495
> 
> 赞同：1
> 
> 时间：2013-04-04T11:10:16.517
> 
> 标签：mysql, database-design, foreign-keys, primary-key, cascading-deletes

在数据库中，我有一个用户名表和一个权限表。我还有一个中间表，可以将用户分配到一个或多个司法管辖区。

```
employee table

userID (primary Key)
firstName
lastName
records:

+--------+-----------+----------+
| userID | firstName | lastName |
+--------+-----------+----------+
|      6 | John      | Doe      |
|     11 | lisa      | lopez    | 
+--------+-----------+----------+
jurisdictions table

jurId (Primary Key)
region
records:

+-------+--------------+
| jurID | jurisdiction |
+-------+--------------+
|     1 | California   |
|     2 | Texas        |
|     3 | Washington   |
|     4 | South Dakota |
|     5 | Alaska       |
|     6 | Ohio         |
+-------+--------------+
user_jurisdiction

userID (Foriegn Key pointing to employees userID)
jurID (Foriegn Key pointing to jurisdictions jurID)
records:

    +--------+-------+
    | userID | jurID |
    +--------+-------+
    |      6 |     2 |
    |      6 |     3 |
    |     11 |     2 |
    +--------+-------+ 
```

我想让它在哪里如果我删除父表行，具有相应外键的中间表将被自动删除。我制作了中间表：

```
CREATE TABLE user_jurisdiction(userID int NOT NULL, jurID int NOT NULL, FOREIGN KEY(userID) REFERENCES employee(userID) ON DELETE CASCADE, FOREIGN KEY (jurID) REFERENCES jurisdictions(jurID) ON DELETE CASCADE); 
```

但是当我从父表中删除某些东西时......就像表 jurisidictions.jurisdiction 中的州名行...... userID 和 jurID 行不会自动从中间表 user_jurisdiction 中删除。据我所见，我在每个外键上都正确设置了 DELETE ON CASCADE。为什么删除父表行后，中间表中对应的外键行没有被删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:24:04.293

最可能的原因是您使用的是 MyISAM 引擎而不是 INNODB 引擎。MyISAM 引擎解析外键约束，但不强制执行它们。

```
CREATE TABLE user_jurisdiction(
  userID int NOT NULL, 
  jurID int NOT NULL, 
  FOREIGN KEY(userID) 
    REFERENCES employee(userID) ON DELETE CASCADE, 
  FOREIGN KEY (jurID) 
    REFERENCES jurisdictions(jurID) ON DELETE CASCADE
) ENGINE=INNODB; 
```

INNODB 是 MySQL 5.5 开始的默认存储引擎。在此之前，MyISAM 是默认设置。

养成发布 SQL DDL 而不是（或连同）表描述的习惯。DDL 比描述准确得多。

# python - 如何在 __init__ 中定义与不同类属性相关的类似类函数

> ID：15809497
> 
> 赞同：0
> 
> 时间：2013-04-04T11:10:25.537
> 
> 标签：python, class

我有这样的课：

```
class MyClass(object):

    def f_1(self,x):
        return foo(x, self.property_1)

    def f_2(self,x):
        return foo(x, self.property_2) 
```

这个想法是多个函数`f_n`具有共同的结构，但依赖于`property_n`类的不同属性。

我寻找一种更紧凑的方式来`f_n`定义`__init__`? 我想到了类似的东西

```
class MyClass(object):

    def __init__(self):
        self.f_1 = self.construct_function(self.property_1)
        self.f_2 = self.construct_function(self.property_2)

    def construct_function(self, property):
        # ??? 
```

这就是我的想法，但我不知道如何定义它`construct_function`。'property' 是逐值类型是很重要的。

**编辑：**

我简化了[Martijn](https://stackoverflow.com/a/15809599/1954677)对此解决方案的非常好的回答，效果很好：

```
def construct_function(property_name):
    def f_n(self, x):
        return foo(x, getattr(self, property_name))

    return f_n

class MyClass2(object):

    f_1 = construct_function('property_1')
    f_2 = construct_function('property_2') 
```

只是想在这里提一下，因为不允许多行注释...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:14:52.027

如果要为*每个类*生成这些方法，请使用类装饰器：

```
def property_functions(**properties):
    def construct_method(prop):
        def f_n(self):
            return foo(getattr(self, prop))
        return f_n

    def class_decorator(cls):
        for name, prop in properties.iteritems():
            setattr(cls, name, construct_method(prop))

        return cls

    return class_decorator 
```

然后像这样使用它：

```
@property_functions(f_1='property_1', f_2='property_2')
class MyClass(object):
    property_1 = 'foo'
    property_2 = 'bar' 
```

示范：

```
>>> def foo(value): print value
... 
>>> @property_functions(f_1='property_1', f_2='property_2')
... class MyClass(object):
...     property_1 = 'foo'
...     property_2 = 'bar'
... 
>>> mc = MyClass()
>>> mc.f_1()
foo
>>> mc.f_2()
bar 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:19:34.033

您可以查看**getattr** 或**getattribute**。它们允许您动态创建和引用属性。例如

它的工作原理是这样的：

```
class foo:
    def __init__(self):
        self.a = "a"
    def __getattr__(self, attribute):
        return "You asked for %s, but I'm giving you default" % attribute

>>> bar = foo()
>>> bar.a
'a'
>>> bar.b
"You asked for b, but I'm giving you default"
>>> getattr(bar, "a")
'a'
>>> getattr(bar, "b")
"You asked for b, but I'm giving you default" 
```

# ios - 我应该将什么从 iOS 项目转移到新计算机？

> ID：15809502
> 
> 赞同：0
> 
> 时间：2013-04-04T11:10:54.553
> 
> 标签：ios, file-transfer

我一直在我的 MacBook Air 上开发一个 iOS 应用程序，现在我必须切换到另一个应用程序。我的问题是 - 我应该转移什么？我将传输所有项目文件（.m、.h），但有什么重要的事情我会忘记吗？像上传到应用商店的密钥还是其他？

我不想转让、出售旧 Mac，然后发现我忘记了一些重要的事情，我将不得不重新创建整个项目。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:13:18.777

从 XCode 管理器中，您需要导出您的开发人员资料，然后将其导入新 Mac 上的 XCode。看看[这里](https://apple.stackexchange.com/questions/57059/how-do-i-transfer-my-ios-developer-profile-to-another-computer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:25:27.873

除了您的开发人员配置文件和分发配置文件（如果您已经制作了一个）之外，您的项目没有涉及任何特殊密钥。如果您已经从开发人员站点将它们下载到您的新机器上，那么只需将项目文件从您系统中存储它的任何位置复制到新机器上。启动您的 xcode，您应该一切顺利。检查 xcode 中的管理器以确保您的配置文件已更新到新机器。只是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T11:42:28.240

对于您的项目：

*   复制整个项目文件夹。

对于您的配置文件和证书：

*   如果您有权访问获得配置文件和证书的 Apple 开发人员帐户，则无需从旧 Mac 导出它们，只需从 iOS 配置门户下载它们（在[https 中登录到您的开发人员帐户： //developer.apple.com/](https://developer.apple.com/)）然后将它们安装在您的新 Mac 中。否则，导出您现有的配置文件。检查[这个](https://developer.apple.com/library/ios/documentation/Xcode/Conceptual/ios_development_workflow/10-Configuring_Development_and_Distribution_Assets/identities_and_devices.html#//apple_ref/doc/uid/TP40007959-CH4-SW5)，它可能会有所帮助。

如果您要出售旧 Mac：

*   在将密钥、证书、配置和保存的用户名和密码交给所有者之前，您可能需要删除它们。您可以通过 Applications > Utilities > Keychain Access 访问它们。在左侧面板中，浏览项目并查看可以删除的内容。如果您愿意，您可以选择导出项目。

# c# - 使用 Entity Framework 的 Struct 的解决方法，代码优先方法

> ID：15809509
> 
> 赞同：7
> 
> 时间：2013-04-04T11:11:18.227
> 
> 标签：c#, .net, database, entity-framework, ef-code-first

我目前正在使用 EF 和代码优先方法从现有系统构建数据库。

最好对“核心”类进行最小的更改。因此，我想为 Structs 和 EF 找到解决方法。

是否可以以任何方式将 Struct 包装到类中，以便 EF 可以使用此 Struct 中的数据？由于 EF 能够为我的“核心”类创建自己的代理，我不应该也可以这样做吗？

我对 .Net、C# 和 EF 的了解相当有限，因为我今年因为学士作业而开始学习这门语言。

任何帮助将不胜感激。

编辑：添加了示例代码。

Core 有许多使用 TaxMode 结构的类，并将数据存储在这个结构中。

```
public class AcmeClass
{    
TaxMode Taxmode { get; set; }
} 
```

结构如下：

```
public struct TaxMode
{
public string Name { get; set; }
public bool isTrue { get; set; }
} 
```

任何将 的属性添加`TaxMode`到这些类中的尝试都只会导致不可为空的错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T11:14:42.723

不支持结构。

你必须使用它来`class`代替它。

*更新*

看看这个[Ladislav Mrnka 的答案](https://stackoverflow.com/a/4678158/502950)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-16T12:24:40.400

您是否考虑过如下的序列化？

```
[NotMapped]
public TaxMode? TaxMode { get; set; }
public string TaxModeJSON
{
    get
    {
        return TaxMode == null
                   ? null
                   : JsonConvert.SerializeObject(TaxMode);
    }
    set
    {
        if (string.IsNullOrWhiteSpace(value))
            TaxMode = null;
        else
            TaxMode = JsonConvert.DeserializeObject<TaxMode>(value);
    }
} 
```

该解决方案会将您的结构保存为 JSON，并使用序列化将数据存储到数据库或从数据库检索数据。

# jquery - JQuery .load() 每次点击后加载更多页面

> ID：15809514
> 
> 赞同：0
> 
> 时间：2013-04-04T11:11:28.243
> 
> 标签：jquery, html, ajax

由于 JQuery 是生活中所有事情的解决方案，因此我`.load()`在单击某个类的链接后使用它来加载具有该功能的页面，请参见下面的代码：
`$('.pageloader').click(function(){ $('.content').load("pages/" + this.name); });`

但是，这会在每次点击后加载两倍的页面数量（第一次 1，之后 2，4、8、16 等）。

我试过关闭所有其他代码，但它没有改变任何东西。使用 console.log 我注意到它只执行`.click()`一次该功能，并且它`.load()`被执行了多次。

有谁知道这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:14:22.430

您可能绑定了几次点击事件......

在之前添加`.click`：

```
$('.pageloader').unbind('click').off('click');
$('.pageloader').click(function(){ $('.content').empty().load("pages/" + this.name); }); 
```

[编辑]

问题出在加载的页面中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:14:57.573

试试这个：

```
$('.pageloader').click(function () {
    // Cache this here
    var $this = $(this);

    // Removes all child nodes (including text nodes) from content class
    $('.content').empty().load("pages/" + $this.attr('name'));
}); 
```

# php - 如何将登录 md5 更改为 pwdcompare

> ID：15809517
> 
> 赞同：0
> 
> 时间：2013-04-04T11:11:35.643
> 
> 标签：php, sql-server-2008

我刚刚切换到 mssql 2008 并且已经使用 pwdcompare 更改了旧的 md5 密码行编码 我的问题是如何更改它并登录到 db ？

```
$check['account']['ID'] == $data['accountName'] and 
$check['account']['Password'] == md5($data['password'])) 
```

我的数据库是这样的。

```
[ID] [varchar](50) NOT NULL,
[Password] [varbinary](50) NOT NULL, 
```

# yii - yii - urlManager：如何将路由重定向到模式

> ID：15809518
> 
> 赞同：0
> 
> 时间：2013-04-04T11:11:37.083
> 
> 标签：yii

我有 urlManager 规则：

```
...
'/<slug:(nasha-glavnaya-zagolovok)>' => 'page/page/show',
'/pages/<slug>' => 'page/page/show',
... 
```

一切都好。当我输入地址时

```
/nasha-glavnaya-zagolovok 
```

它打开了我需要的页面但是如果我尝试打开页面

```
/pages/nasha-glavnaya-zagolovok 
```

它还打开了我需要的页面

但是页面的内容是一样的。

如果 urlManager mathced 中的任何规则，我如何将（使用 301 标头）从**路由**重定向到**模式？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:04:42.547

我不能给你完整的答案，但你可以努力让它像这样工作......

您可以使用将请求发送到操作的规则，该操作只是使用 CController::redirect() 重定向

替换这个

```
'/<slug:(nasha-glavnaya-zagolovok)>' => 'page/page/show',
'/pages/<slug>' => 'page/page/show', 
```

有了这个

```
'/<slug:(nasha-glavnaya-zagolovok)>' => 'page/page/show',
'/pages/<slug>' => 'site/redirect', 
```

并在“站点/重定向”操作中将用户重定向到 /$slug

更新：您可以通过编写扩展 CBaseUrlRule 的新 url 规则来使其工作，如果这是您想要做的唯一重定向，不确定您是否愿意花时间这样做

# iphone - 如何使用 FMDB 从表中删除所有数据

> ID：15809520
> 
> 赞同：1
> 
> 时间：2013-04-04T11:11:43.420
> 
> 标签：iphone, ios, fmdb

我想从我的数据库中的表中删除所有数据。我正在使用 FMDB。我已经使用了此代码，但它不会从我的表中删除数据。

```
-(BOOL) deleteAll
{

    FMDatabase *db = [FMDatabase databaseWithPath:[Utility getDatabasePath]];
    [db open];

    BOOL success =  [db executeUpdate:@"TRUNCATE TABLE customers"];

    [db close];

    return success;
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T11:13:45.960

尝试使用此代码。

```
BOOL success =  [db executeUpdate:@"DELETE FROM customers"]; 
```

只要我知道 Sqlite 不支持`TRUNCATE`查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-20T09:19:14.277

尽管`DELETE`命令会起作用，但它很慢，因为它会选择每一行然后继续删除它。

如果您要删除整个表，最好使用`DROP`该表而不是重新创建它：

```
BOOL result =  [db executeUpdate:@"DROP TABLE IF EXISTS `customers`;"];
BOOL resultTwo = [db executeUpdate:@"CREATE TABLE IF NOT EXISTS customers(name text primary key, age int)"]; //or course fields in your table will be different 
```

斯威夫特（为了完整起见）：

```
let dropTable = "DROP TABLE customers"
let result = contactDB.executeUpdate(dropTable, withArgumentsInArray: nil)
if !result {
     print("Error: \(contactDB.lastErrorMessage())")
} 
let createTable = "CREATE TABLE IF NOT EXISTS customers(name text primary key, age int)"
if !contactDB.executeStatements(createTable) {
     print("Error: \(contactDB.lastErrorMessage())")
} 
```

参考：[截断 SQLite](http://www.tutorialspoint.com/sqlite/sqlite_truncate_table.htm)

# firefox - Firefox 20.0 的 Selenium IDE datadrivenv0.2 问题

> ID：15809525
> 
> 赞同：0
> 
> 时间：2013-04-04T11:11:57.200
> 
> 标签：firefox, selenium, firefox-addon, selenium-ide

我刚刚将我的 Firefox 更新到 v 20.0。每当我在 Firefox 中打开 Selenium IDE 时，它都会显示一个弹出错误。

`Failed to load user-extensions.js file=[PATH to file ...]datadriven_v0.2/datadriven.js lineNumber=37 error=ReferenceError:XML is not defined`.

文件中报告的行是这样的：

```
XML.serialize = function(node) {
    if (typeof XMLSerializer != "undefined")
        return (new XMLSerializer()).serializeToString(node) ;
    else if (node.xml) return node.xml;
    else throw "XML.serialize is not supported or can't serialize " + node;
} 
```

如果 XML 是 Selenium IDE 或 firefox 的一部分，我不知道任何特定于 selenium IDE 的事情。但是，似乎 Firefox 的最新更新有事要做。

如果有人帮助我解决此问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T10:12:00.660

您可以通过在调用 datadriven.js 之前声明 XML-Object 来解决此问题。

```
var XML = {};
XML.serialize = function(node) {
    if (typeof XMLSerializer != "undefined")
        return (new XMLSerializer()).serializeToString(node) ;
    else if (node.xml) return node.xml;
    else throw "XML.serialize is not supported or can't serialize " + node;
} 
```

我不知道这是否有任何副作用，但对我来说它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T18:45:35.010

斯文的想法非常适合我。我添加了命令

var XML = {};

到我的 user-extensions.js 文件的开头，关闭 FF 和 Selenium，然后重新启动它们。从那时起，他们一直在完美地工作。我到 FF v21.0 没有问题。

谢谢斯文！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-30T14:23:51.623

我正在为使用 sel-blocks 的任何人发布此信息；上述解决方案似乎不起作用，因为 sel-blocks 是附加组件而不是用户扩展。但是，仍然有解决方案。我添加了上面建议的行：

var XML = {};

改为：

xmlextras.js

该文件位于（硒扩展文件夹）/chrome/content/selenium-core/scripts

如果您不确定如何访问您的 selenium 扩展文件夹，大致如下：

C:\Users（你的用户名）\AppData\Roaming\Mozilla\Firefox\Profiles（你的 Firefox 配置文件）\extensions{a6fd85ed-e919-4a43-a5af-8da18bda539f}

如果我没有使用正确的格式来发布答案或任何内容，我深表歉意，但我只是想确保任何搜索我正在寻找的答案的人都能找到一些东西。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-04T13:19:42.133

通过查看 Selenium 网站，最新版本的 SIDE 仅支持 Firefox 版本 17。

[https://code.google.com/p/selenium/wiki/SeIDEReleaseNotes](https://code.google.com/p/selenium/wiki/SeIDEReleaseNotes)

# android - Android 不解析 JSON 输出

> ID：15809532
> 
> 赞同：0
> 
> 时间：2013-04-04T11:12:08.443
> 
> 标签：android, json

```
 {
   "German":[
      "Hello",
      "guten Morgen",
      "gute Nacht"
   ],
   "English":[
      "Hello",
      "good morning",
      "good Night"
   ],
   "French":[
      "bonjour",
      "bonne nuit",
      "bonjour"
   ]
} 
```

在 Android 中，我必须解析上面的输出。我做不到。谁能告诉我，它是错误的json输出还是正确的？

[http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:21:51.573

这是一个有效的 json。所以你没有做对什么。从整个字符串中创建一个 JSONObject，然后您可以使用 getJSONArray("German") 获取数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:03:03.810

您的 URL 有问题 - saqib_abbasi.0fees.net/Response.php

**从您的主机名中删除下划线后尝试。**

请参阅以下链接

[https://stackoverflow.com/a/11206362/1329126](https://stackoverflow.com/a/11206362/1329126)

[http://en.wikipedia.org/wiki/Hostname#Restrictions_on_valid_host_names](http://en.wikipedia.org/wiki/Hostname#Restrictions_on_valid_host_names)

# c#-3.0 - 检索具有 CLSID 的组件的 COM 类工厂时出错{}

> ID：15809533
> 
> 赞同：0
> 
> 时间：2013-04-04T11:12:11.303
> 
> 标签：c#-3.0, quickbooks

当我想通过 c# 在快速手册中添加新客户时，我收到此错误： ***检索具有 CLSID {178AACCA-9DCE-42A0-A193-CF4985B930E5} 的组件的 COM 类工厂失败，原因是以下错误：80040154。***

这是我发现错误的代码..请写下有效答案...谢谢..

```
 try
        {

            //Create the session Manager object
            sessionManager = new QBSessionManager();

            //Create the message set request object to hold our request  
            IMsgSetRequest requestMsgSet = sessionManager.CreateMsgSetRequest("US", 8, 0);
            requestMsgSet.Attributes.OnError = ENRqOnError.roeContinue;

            //Connect to QuickBooks and begin a session
            sessionManager.OpenConnection("App1", "QuickBooks");
            connectionOpen = true;
            sessionManager.BeginSession(@"C:\Users\Public\Documents\Intuit\QuickBooks\Company Files\PSNew.QBW", ENOpenMode.omDontCare);
            sessionBegun = true;

            ICustomerAdd customerAddRq = requestMsgSet.AppendCustomerAddRq();
            customerAddRq.Name.SetValue(CP.CustomerName);
            customerAddRq.LastName.SetValue(CP.CustomerLastName);
            customerAddRq.Email.SetValue(CP.CustomerEmail);

            //Send the request and get the response from QuickBooks
            IMsgSetResponse responseMsgSet = sessionManager.DoRequests(requestMsgSet);
            IResponse response = responseMsgSet.ResponseList.GetAt(0);
            ICustomerRet customerRet = (ICustomerRet)response.Detail;

            CP.GetCustomerId = customerRet.ListID.GetValue();
            CP.GetCustomerName = customerRet.Name.GetValue();
            CP.GetCustomerEmail = customerRet.Email.GetValue();
            //CP.customerAddRq1 = customerAddRq.Name.GetValue();
        }

        catch (Exception)
        {
            throw;
        }
        finally
        {
            //End the session and close the connection to QuickBooks
            if (sessionBegun)
            {
                sessionManager.EndSession();
            }

            if (connectionOpen)
            {
                sessionManager.CloseConnection();

            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T13:56:12.320

确保您的应用程序是使用针对目标平台设置为 x86 的项目构建配置编译的。这是网络上最常见的解决方案，因为 Intuit 集成 dll 是 32 位的。然而，在我遇到这个问题时，我决定将 QuickBooks SDK 安装到客户端机器上，这就是我成功解决它的时候。

# jquery - Jquery offset() 在 WebKit 浏览器中不起作用

> ID：15809536
> 
> 赞同：0
> 
> 时间：2013-04-04T11:12:19.200
> 
> 标签：jquery, webkit, offset

我的 HTML 文档中有两个不同的 div 容器，一个包含 jquery-ui draggables 和另一个 droppables。我现在希望能够将可拖动对象拖到可放置对象上，并使用 jquery .offset() 将其直接放置在其上方。此外，如果没有击中 droppable，则可拖动的快照会恢复到其原始位置。

这在 IE 和 Firefox 中运行良好，但是当缩放级别不是 100% 时，WebKit 浏览器（Chrome、Safari）似乎存在问题。对于缩放级别 110%，使用 .offset() 的定位似乎偏离了大约 10%，误差随着缩放级别的增加而增加。

这是我的问题的Java脚本代码。Draggable 和 droppable 只是普通的 div 元素。

```
<!DOCTYPE html>
<html>
<head>
<title>Jquery offset example - WebKit browser</title>
<meta charset="utf-8">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>

<script type="text/javascript">

$(document).ready(function (){
  var droppable = $("#droppable");
  var draggable = $("#draggable");

  draggable.data("offset", draggable.offset());
  var hit = false;

  draggable.draggable({
    drag: function(){
        hit = false;
    },

      stop: function(){
          if(!hit) {
              $(this).offset($(this).data("offset"));
          }
      }        
  });

  droppable.droppable({
     drop: function(e, ui){
         ui.draggable.offset($(this).offset());
         hit = true;
     } 
  });
});
</script>
</head>

<body>

  <div id="text" style="margin-bottom:20px">
    <div id="droppable"style="width:30px; height:20px; border-style:solid; border-width:1px; background-color:#FFFFFF"></div>
  </div>

  <div id="draggables">
    <div id="draggable" style="width:30px; height:20px; position:relaive; border-style: solid; border-width: 1px; background-color:#FFFFFF">gap</div>
  </div>

</body> 
```

我正在使用 jquery 版本 1.9.1 和 jquery-ui 版本 1.10.2 以及 Google Chrome 版本 25.0.1364.172。

有没有人有解决这个问题的方法？

# c - strftime 本周的第一天

> ID：15809548
> 
> 赞同：1
> 
> 时间：2013-04-04T11:12:45.857
> 
> 标签：c, sqlite, date, datetime, strftime

```
strftime('%s', 'now', 'start of month') AND strftime('%s', 'now', 'start of month', '+1 month', '-1 day') 
```

这给了我当前月的第一天和最后一天之间的范围。如何获得本周的范围？

这

```
 strftime('%s', 'now', 'weekday 0') 
```

Give 似乎给出了本周（星期日）的最后一天，但我找不到如何获得本周的第一天。

PS：我在 WHERE 子句中使用 strftime 访问 Sqlite 中的数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:57:42.787

试试这个：

```
strftime('%s', 'now', 'weekday 0', '-1 week', '+1 day')

strftime('%s', 'now', 'weekday 0', '-1 day') 
```

`weekday`修饰符将日期向前推进到工作日编号为 N 的下一个日期。星期日为 0，...

# android - 如何在 Android 应用程序中使用 Garmin 地图？

> ID：15809550
> 
> 赞同：3
> 
> 时间：2013-04-04T11:12:50.773
> 
> 标签：android, maps, garmin

这是我第一次在这里问，请原谅我的英语不好

现在，我正在为 Android 开发一个 GPS 应用程序，并使用我从 OSM 数据构建的 Garmin 地图。

我的问题是我不知道是否有一些库可以重新绘制 Garmin 地图或可以帮助我的东西

非常感谢

# android - NDK：在尝试构建另一个 .so 时使用用户创建的 .so

> ID：15809553
> 
> 赞同：1
> 
> 时间：2013-04-04T11:13:14.420
> 
> 标签：android, c, android-ndk, shared-libraries

我正在尝试将使用 NDK 生成的一些 .so 链接到一个新的 .so 我正在尝试创建，因为旧的 .so 包含我想在新的 .so 中使用的函数的定义。

我试过这个 Android.mk ：

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE    := prog_test
LOCAL_SRC_FILES := main.c 
LOCAL_MODULE_TAGS := optional
LOCAL_SHARED_LIBRARIES += mylib
include $(BUILD_SHARED_LIBRARY)
$(call import-module,<tag>) # with and without 
```

我也尝试过在stackoverflow [NDK中找到的这种方法-如何在另一个项目中使用生成的.so库，](https://stackoverflow.com/questions/5669220/ndk-how-to-use-a-generated-so-library-in-another-project/5735507#5735507)但仍然没有成功： **prebuilt/linux-x86/toolchain/arm-linux-androideabi-4.4.x /bin/../lib/gcc/arm-linux-androideabi/4.4.3/../../../../arm-linux-androideabi/bin/ld：错误：找不到-lmylib.so**

我非常感谢解决此问题的任何帮助。BR

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T16:02:51.867

你必须使用 include $(PREBUILD_SHARED_LIBRARY) 而不是 include $(BUILD_SHARED_LIBRARY)

# iphone - 如何在 Xcode 中以编程方式修改 csv 文件？

> ID：15809555
> 
> 赞同：0
> 
> 时间：2013-04-04T11:13:19.933
> 
> 标签：iphone, xcode

我想在 xcode 中修改（添加新行）现有的 csv 文件。我以编程方式创建了一个 csv 文件，但是当我尝试修改它时，它会删除所有 previos 数据。

我正在打开一个现有的 csv 文件并想要添加下一行。

NSString *docFile = [DOCS_FOLDER stringByAppendingPathComponent:@"Questions_Logs.csv"]; NSFileManager* 文件管理器 = [NSFileManager defaultManager];

//---获取文件的内容，如果内容 avalbl 比追加新数据并保存它--

```
if ([filemanager fileExistsAtPath:docFile]) 
```

{

```
 NSArray *arrCSV = [NSArray arrayWithObjects:strName,strAge,strDesig, nil];
 [[arrCSV componentsJoinedByString:@","] writeToFile:docFile atomically:YES encoding:NSUTF8StringEncoding error:NULL]; 
```

}

```
else 
```

{ NSArray *arrCSV = [NSArray arrayWithObjects:@"Name",@"Age",@"Designation", nil]; [[arrCSV componentsJoinedByString:@","] writeToFile:docFile atomically:YES encoding:NSUTF8StringEncoding error:NULL]; }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:25:53.797

阅读文档：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#jumpTo_134](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#jumpTo_134)

“此方法会覆盖路径中的任何现有文件。”

请参阅[OSX 中的 writeToFile，附加到文件？](https://stackoverflow.com/questions/4626697/writetofile-in-osx-appending-to-the-file)为解决方案。

# asp.net - iis7 Access is denied on asp.net application

> ID：15809563
> 
> 赞同：0
> 
> 时间：2013-04-04T11:13:35.860
> 
> 标签：asp.net, iis-7

I publish my asp.net web site and deploy it to iis-7 locally on my windows 7 system. After deployment when I write the address `localhost/applicationfoldername` in browser it gives me this error message:

> System.UnauthorizedAccessException: Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED)) .

what can I do to solve this problem?

# jsf - 刷新页面时再次调用 ajax=false 按钮 中的操作

> ID：15809565
> 
> 赞同：1
> 
> 时间：2013-04-04T11:13:40.473
> 
> 标签：jsf

这是我的代码片段，格式如下：

```
<p:commandButton styleClass="btn" action="#{testController.create}" value="create" ajax="false" /> 
```

一切正常，但我的问题是当我刷新页面（按 f5）时，它再次调用 create 方法，有什么方法可以在刷新页面时不调用 create 方法？我需要我的按钮有 ajax="false"

# java - 无法读取 cookie javascript

> ID：15809566
> 
> 赞同：0
> 
> 时间：2013-04-04T11:13:43.750
> 
> 标签：java, javascript, cookies, response

我正在使用java代码设置cookie服务器端

```
response.addCookie("test1","test1"); 
```

我发现这段代码可以使用 javascript 检索 cookie

```
(function(){
    var cookies;

    function readCookie(name,c,C,i){
        if(cookies){ alert("all cookies"+cookies); return cookies[name]; }

        c = document.cookie.split('; ');
        cookies = {};

        for(i=c.length-1; i>=0; i--){
           C = c[i].split('=');
           cookies[C[0]] = C[1];
        }
        alert("required cookie"+cookies[name]);
        return cookies[name];
    }

    window.readCookie = readCookie; // or expose it however you want
})(); 
```

我将此函数称为

```
alert(readCookie('test1')); 
```

但每次我收到未定义的警报时。我检查了 chrome 的 cookie 文件，我的 cookie 设置为

```
localhosttest1test1/service/login 
```

有人可以解释为什么我会收到此错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:23:46.040

该代码似乎有效（我在 Firefox、Chrome 和 MSIE 中对其进行了测试，方法是使用 JavaScript 创建一些 cookie，例如，`document.cookie = "test1=bla"`它显示“必需的 cookiebla”）。也许您从服务器设置的 cookie 标记为`HttpOnly`，因此 JavaScript 无法访问它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-09T21:02:42.643

当我提交指向不同路径的链接时，我遇到了类似的问题。即，我单击链接的页面是`/pathOne/somePlace`，但链接去了`/pathTwo/someOtherPlace`。写入的 cookie 仅在`/pathTwo/*`. 为了纠正这一点，我做了：

```
Cookie testCookie = new Cookie("test1","test1");
testCookie.setPath (request.getContextPath ());
response.addCookie (testCookie); 
```

希望有帮助。

# javascript - 触发客户端控件呈现后触发的 JavaScript 事件

> ID：15809571
> 
> 赞同：0
> 
> 时间：2013-04-04T11:13:52.190
> 
> 标签：javascript, jquery, kendo-ui, kendo-grid

再会，

我有一个网页，用户在下拉列表中进行选择。

一旦选择了下拉列表中的项目，就会出现一个 Kendo 网格并显示通过返回 JSON 的 API 调用检索到的记录列表。

我已经编写了对网格显示时生成的 html 表进行某些修改的代码，但此时此代码是由按钮触发的。这不是我想要的行为。

我需要在网格渲染后以某种方式触发一个事件，以便代码自动执行而不是由按钮触发。

是否有可能通过 JQuery 我可以在网格控件完成渲染后以某种方式将事件绑定到触发？

PS文档中现有的剑道网格事件都不能满足我的需要，甚至数据源“requestEnd”也不能，因为在那一刻，网格的HTML还没有在页面中生成。如果存在像“postRender”或类似的事件，那将是理想的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:21:00.987

检测“渲染”很困难。Firefox 有一个`MozAfterPaint`事件，但它不是标准的，我不知道您将如何确保它仅针对您的特定事件触发。

或者，您可以尝试查看 DOM Mutation 事件，但它们也没有得到很好的支持，并且在 DOM 更改和在浏览器 UI 中更新网格之间仍然可能存在延迟。

您最好的选择是修改网格 HTML 以输出一些触发预定义回调的 JS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:26:46.073

当您的 javascript 在 HTML 内容呈现之前运行时，请尝试使用`setTimeout(function () {}, 0)`“暂停”JavaScript 执行以让呈现线程赶上。所以你的电话看起来像这样：

```
$("#grid").kendoGrid({
    dataBound: function(e) {
        setTimeout(function () {
            console.log("dataBound");
        }, 0);
    }
}); 
```

阅读更多：[为什么 setTimeout(fn, 0) 有时有用？](https://stackoverflow.com/questions/779379/why-is-settimeoutfn-0-sometimes-useful)

# jquery - jQuery 选择包含小数的值失败

> ID：15809576
> 
> 赞同：0
> 
> 时间：2013-04-04T11:13:56.143
> 
> 标签：jquery

使用以下代码：

```
var value = 2.5;    
$el.find('[value=' + value + ']'); 
```

我收到此错误：

```
Error: Syntax error, unrecognized expression: [value=2.5] 
```

我能做些什么来解决这个问题吗？肯定是因为`.`在里面`value`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:15:21.977

如果它包含句点，您需要在值周围加上引号`'.'`，这样它就会像`[value="2.5"]`.

[jsFiddle](http://jsfiddle.net/Tyriar/t2MBs/)

```
var value = 2.5;    
$el.find('[value="' + value + '"]'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:15:38.940

你以前试过这个吗？

```
$el.find('[value="' + value + '"]'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T11:15:44.417

如果将值括在引号中，则不会发生这种情况：

```
$el.find("[value='" + value + "']") 
```

我个人觉得用单引号引用一个字符串并在其中使用双引号是很奇怪的；我认为主要是因为对可读性甚至维护的影响，另一个是只有少数语言可以让你在没有明确转义的情况下“摆脱”这个问题。我认为这种方式是一个好习惯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T11:15:52.277

您需要将您的价值放在引号中。这将起作用：

```
var value = 2.5;    
$el.find('[value="' + value + '"]'); 
```

# c# - 数据视图行过滤器

> ID：15809578
> 
> 赞同：-1
> 
> 时间：2013-04-04T11:13:57.257
> 
> 标签：c#, asp.net, vb.net, gridview, dataview

我有一个文本框和一个按钮。我正在尝试做的是使用已搜索的数据过滤网格视图。我正在搜索的两个字段是 customerID 和 CustomerName。

我的代码：

```
Dim GetAllCusts As New BusinessLayer.Customer
Dim dt As DataTable = GetAllCusts.GetCustomers 
Dim dv As New DataView(dt)

dv.RowFilter = String.Format("CustomerID='{0}' Or CustomerName='{0}'", SearchTextbox.Text) 

gridview1.DataSource = dv
gridview1.DataBind() 
```

搜索客户 ID 时，一切正常。搜索客户名称时，我得到“无法对 System.Int32 和 System.String 执行 '=' 操作。”。

我试图 CONVERT(CustomerName, System.String) 但这并没有解决，但是我认为这让我远离了最初的问题，因为我开始猜测。

我想要一个文本框来搜索客户 ID 和客户姓名。RowFilter 有什么问题，如何解决？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T11:19:23.210

你有一个概念问题。或者你搜索一个数字或者你搜索一个字符串。
我认为您应该以这种方式更改代码

```
Dim custID as Integer
if Int32.TryParse(SearchTextbox.Text, custID) Then
   ' CustomerID is a numeric field - no need to use single quotes'
   dv.RowFilter = String.Format("CustomerID={0}", custID) 
else
   ' CustomerName is a string. Use single quotes and double the '
   ' possible single quotes inside the search box'
   dv.RowFilter = String.Format("CustomerName='{0}'", SearchTextbox.Text.Replace("'", "''") 
End If
gridview1.DataSource = dv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:21:37.390

我猜 CutomerId 是一个整数字段，当您尝试搜索作为字符串字段的名称时，您正在尝试搜索具有字符串值的整数字段。

# java - FTP 连接超时 421：解析器错误

> ID：15809593
> 
> 赞同：3
> 
> 时间：2013-04-04T11:14:31.853
> 
> 标签：java, ftp, ftp-client, filezilla, ftp-server

该问题已被编辑。我正在尝试列出 FTP 目录中的所有文件 - 尽管代码在正常的 Netbeans 项目中运行时运行良好，但在 Maven 项目中使用相同的代码时，它会导致**连接超时 421**。我怎样才能摆脱这个？

代码：

```
FTPClient ftpClient = new FTPClient();
ftpClient.connect(host, 21);
ftpClient.login(user, pass);
ftpClient.enterLocalPassiveMode();
ftpClient.setFileType(FTP.BINARY_FILE_TYPE);
FTPClientConfig conf = new FTPClientConfig(FTPClientConfig.SYST_UNIX);
ftpClient.configure(conf);
inputStream = FTPUtil.downloadSingleFile(ftpClient, filePath);
ftpClient.list();                         // It works
ftpClient.listNames("/");                 // It works
ftpClient.changeWorkingDirectory("/");    // It works
FTPFile[] files = ftpClient.listFiles("/");// It hangs and stops 421 connection timed out 
```

*FileZilla 日志*是：-

```
 (000370)04-04-2013 16:04:32 - (not logged in) (127.0.0.1)> Connected, sending welcome message...
    (000370)04-04-2013 16:04:32 - (not logged in) (127.0.0.1)> 220 ftp connection started...
    (000370)04-04-2013 16:04:32 - (not logged in) (127.0.0.1)> USER raja
    (000370)04-04-2013 16:04:32 - (not logged in) (127.0.0.1)> 331 Password required for raja
    (000370)04-04-2013 16:04:32 - (not logged in) (127.0.0.1)> PASS ****
    (000370)04-04-2013 16:04:32 - raja (127.0.0.1)> 230 Logged on
    (000370)04-04-2013 16:04:32 - raja (127.0.0.1)> TYPE I
    (000370)04-04-2013 16:04:32 - raja (127.0.0.1)> 200 Type set to I
    (000370)04-04-2013 16:04:32 - raja (127.0.0.1)> PASV
    (000370)04-04-2013 16:04:32 - raja (127.0.0.1)> 227 Entering Passive Mode (127,0,0,1,237,187)
    (000370)04-04-2013 16:04:32 - raja (127.0.0.1)> SYST
    (000370)04-04-2013 16:04:32 - raja (127.0.0.1)> 215 UNIX emulated by FileZilla
    (000366)04-04-2013 16:04:33 - raja (127.0.0.1)> 421 Connection timed out. 
```

客户端例外是：- ![在此处输入图像描述](https://i.stack.imgur.com/LTzZc.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T14:57:45.590

当 FTP 服务器针对**SYST**命令返回**null**时，apache-commons 1.4.1 在处理解​​析异常时存在严重问题。我尝试使用 3.2 版，问题得到解决。

# jquery - jquery select2插件如何只获得结果'myString%'

> ID：15809594
> 
> 赞同：3
> 
> 时间：2013-04-04T11:14:36.297
> 
> 标签：jquery, jquery-select2

我正在使用 jquery-select2 插件，但我想知道如何才能仅获得以键入的关键字开头的结果（例如'myString%'）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T12:06:02.057

该[文档](http://ivaynberg.github.com/select2/#matcher)实际上为此提供了一个示例：

```
$("select").select2({
    matcher: function(term, text) {
        return text.toUpperCase().indexOf(term.toUpperCase())==0;
    }
}); 
```

上面的匹配器不区分大小写，对于区分大小写的删除两个`.toUpperCase()`调用。

# c - 如何测量 Linux 和 Windows 中函数的“用户”执行时间

> ID：15809598
> 
> 赞同：1
> 
> 时间：2013-04-04T11:14:50.060
> 
> 标签：c, profiling

如果我有一个函数*foo*我想分析它的“用户”时间（删除内核或其他进程时间），我如何在代码（C/C++）中测量它？

我知道以下功能：

**视窗**

1.  查询性能计数器
2.  获取处理时间

**Linux**

1.  获取时间
2.  次
3.  钟

还有更多的方法吗？每个都提供了不同的时间“视图”，并没有真正提供准确的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:08:36.470

Linux 上的最佳方法如下：（从 Linux 内核**perf_event_open**手册页中提取和修改）

代码：

```
#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>
#include <string.h>
#include <sys/ioctl.h>
#include <linux/perf_event.h>
#include <asm/unistd.h>

long
perf_event_open(struct perf_event_attr *hw_event, pid_t pid,
            int cpu, int group_fd, unsigned long flags)
{
    int ret;

    ret = syscall(__NR_perf_event_open, hw_event, pid, cpu,
               group_fd, flags);
    return ret;
}

int
main(int argc, char **argv)
{
    struct perf_event_attr pe;
    long long count;
    int fd;

    memset(&pe, 0, sizeof(struct perf_event_attr));
    pe.type = PERF_TYPE_HARDWARE;
    pe.size = sizeof(struct perf_event_attr);
    pe.config = PERF_COUNT_HW_INSTRUCTIONS;
    pe.disabled = 1;
    pe.exclude_kernel = 1;
    pe.exclude_hv = 1;

    fd = perf_event_open(&pe, 0, -1, -1, 0);
    if (fd == -1) {
       fprintf(stderr, "Error opening leader %llx\n", pe.config);
       exit(EXIT_FAILURE);
    }

    ioctl(fd, PERF_EVENT_IOC_RESET, 0);
    ioctl(fd, PERF_EVENT_IOC_ENABLE, 0);

    printf("Measuring instruction count for this printf\n");

    ioctl(fd, PERF_EVENT_IOC_DISABLE, 0);
    read(fd, &count, sizeof(long long));

    printf("Used %lld instructions\n", count);

    close(fd);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:27:28.247

在类 Unix 系统`getrusage`上是您正在寻找的。特别是`RUSAGE_SELF`选项。用户时间将在 中的`ru_utime`字段中`struct rusage`。`ru_stime`计算系统时间。

# c - 连接 MinGW 和 MSVC 之间的困境（未定义的参考）。MinGW 失败 MSVC 工作

> ID：15809604
> 
> 赞同：2
> 
> 时间：2013-04-04T11:15:16.353
> 
> 标签：c, visual-c++, dll, interop, mingw

我正在尝试移植最初使用 MSVC 完成的旧 C .dll 库，该库使用 BEA Tuxedo 库来使用 MinGW。

我遇到了 MSVC 编译并链接一个文件但 MinGW 失败的情况。实际问题是在链接阶段。出现“未定义的引用”错误。

这是创建 dll 的最小示例：(tpsetunsol_test.c)

```
#include <atmi.h>

void __stdcall msghandler(char *pszMessage, long lMessageLen, long lFlags)
{

}   

int Inittpsetunsol()
{           
    int ret = 0;

    tpsetunsol(msghandler);

    return ret;                     
} 
```

这编译没有错误：

```
gcc -Wall -fexceptions -g -O2 -DWIN32 -DNDEBUG -D_WINDOWS -ID:/dev/tuxedo/include   -o   tpsetunsol_test.o -c tpsetunsol_test.c 
```

错误来了：

```
dllwrap --export-all-symbols -LD:/dev/tuxedo/lib -k --output-lib test.lib --output-def test.def --enable-stdcall-fixup --add-stdcall-alias -o IAWS.dll tpsetunsol_test.o -lkernel32 -luser32 -lgdi32 -lwinspool -lcomdlg32 -ladvapi32 -lshell32 -lwtuxws32

C:\MinGW\bin\dllwrap.exe: no export definition file provided.
Creating one, but that may not be what you want
tpsetunsol_test.o: In function `Inittpsetunsol':
d:\dev\tpsetunsol_test.c:13: undefined reference to `tpsetunsol'
collect2.exe: error: ld returned 1 exit status
C:\MinGW\bin\dllwrap.exe: C:\MinGW\bin\gcc exited with status 1 
```

atmi.h 中的函数声明：

```
extern void (_TMDLLENTRY * _TMDLLENTRY tpsetunsol _((void (_TMDLLENTRY *)(char _TM_FAR *, long, long)))) _((char _TM_FAR *, long, long));

#define _TMDLLENTRY __stdcall
#define _TM_FAR 
```

版本：

```
$ gcc -v
Using built-in specs.
COLLECT_GCC=C:\MinGW\bin\gcc.exe
COLLECT_LTO_WRAPPER=c:/mingw/bin/../libexec/gcc/mingw32/4.7.2/lto-wrapper.exe
Target: mingw32
Configured with: ../gcc-4.7.2/configure --enable-    languages=c,c++,ada,fortran,objc,obj-c++ --disable-sjlj-exceptions --with-dwarf2 --enable-shared --enable-libgomp --disable-win32-registry --enable-libstdcxx-debug --disable-build-poststage1-with-cxx --enable-version-specific-runtime-libs     --build=ming
w32 --prefix=/mingw
Thread model: win32
gcc version 4.7.2 (GCC) 
```

编辑：我发现在 MSVC 和 GCC 创建的目标文件上使用 nm 符号 tpsetunsol 是不同的

查看 _tpsetunsol 符号，很明显 MSVC 和 GCC 产生不同的符号。

GCC 产生：`U _tpsetunsol`和 MSVC：`U _tpsetunsol@4`

编辑：使用 Haroogan 的建议构建后的 nm 输出：

```
$ dllwrap --export-all-symbols -LD:/dev/tuxedo.64/lib --output-lib test.lib --output-def test.def -o IAWS.dll tpsetunsol_test.o -lwtuxws32_new
C:\MinGW\bin\dllwrap.exe: no export definition file provided.
Creating one, but that may not be what you want
tpsetunsol_test.o: In function `Inittpsetunsol':
d:\dev\IA/tpsetunsol_test.c:13: undefined reference to `tpsetunsol'
collect2.exe: error: ld returned 1 exit status
C:\MinGW\bin\dllwrap.exe: C:\MinGW\bin\gcc exited with status 1

$ nm tpsetunsol_test.o
00000000 b .bss
00000000 d .data
00000000 N .debug_abbrev
00000000 N .debug_aranges
00000000 N .debug_info
00000000 N .debug_line
00000000 N .debug_loc
00000000 r .eh_frame
00000000 t .text
00000004 T _Inittpsetunsol
00000000 T _msghandler@12
         U _tpsetunsol

$ nm ../tuxedo.64/lib/libwtuxws32.a  | grep -i tpsetuns
00000000 I __imp__tpsetunsol@4
00000000 T _tpsetunsol@4 
```

gcc 预处理器 (-E) 的输出（仅声明了 tpsetunsol 行）

```
extern void (__attribute__((__stdcall__)) * __attribute__((__stdcall__)) tpsetunsol (void (__attribute__((__stdcall__)) *)(char *, long, long))) (char *, long, long); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T12:36:04.820

正如您已经发现的那样 -不同编译器的**[名称修饰](http://en.wikipedia.org/wiki/Name_mangling)**可能不同。要解决您的问题，请按照以下说明操作：

1.  下载并安装（可以从源代码构建）`gendef`实用程序：

    *   如果您有常用的**[MinGW](http://www.mingw.org/)**（针对 32 位），请**[在此处](http://sourceforge.net/projects/mingw/files/MinGW/Extension/gendef/gendef-1.0.1346/)**获取；
    *   如果您有**[MinGW-w64](http://mingw-w64.sourceforge.net/)**（针对 64 位），请**[在此处](http://sourceforge.net/apps/trac/mingw-w64/wiki/gendef)**获取。
2.  运行`gendef wtuxws32.dll`（将生成`wtuxws32.def`）；

3.  运行`dlltool -D wtuxws32.dll -d wtuxws32.def -l libwtuxws32.a`（将生成`libwtuxws32.a`）；

4.  放到; `libwtuxws32.a`_`D:/dev/tuxedo/lib`

5.  现在链接它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T07:13:29.833

`tpsetunsol()`将标头中的声明更改为`atmi.h`：

```
extern void (_TMDLLENTRY * _TMDLLENTRY tpsetunsol _((void (_TMDLLENTRY *)(char _TM_FAR *, long, long)))) _((char _TM_FAR *, long, long)); 
```

到：

```
extern  void (_TMDLLENTRY * (_TMDLLENTRY tpsetunsol) _((void (_TMDLLENTRY *)(char _TM_FAR *, long, long)))) _((char _TM_FAR *, long, long));
//                          ^                      ^ 
```

因此该函数将被正确地声明为`stdcall`库中的函数（如库`@4`中名称的后缀所示）。

# c++ - 函数不接受 1 个参数错误

> ID：15809610
> 
> 赞同：0
> 
> 时间：2013-04-04T11:15:27.087
> 
> 标签：c++, vector, arguments, enumerate

我已经尝试了很多次来修复这个错误，但我不知道该怎么做。对于 addBooks 和 displayBooks 函数，我收到“函数不接受 1 个参数”错误，尽管向量应该只是一个参数。

```
struct bookStruct
{
    char title[40];
    char author[40];
    int pages;
    int year;
};

enum menu { display=1, add, end} ;

void displayOptions();
void displayBooks();
void addBooks();

int main(){

    vector<bookStruct> book(1);
    string option = "display";

    displayOptions();
    cin >> option;

    //std::strcpy(book[0].title, "a");
    //std::strcpy(book[0].author, "a");
    //book[0].pages = 0;
    //book[0].year = 0;

    while (option != "end"){
        addBooks(book);
        displayBooks(book);
    }

    return 0;
}

void displayOptions(){

    cout << "1\. Display list of books" << endl;
    cout << "2\. Add books" << endl;
    cout << "3\. Exit" << endl;

}

void displayBooks(vector<bookStruct> book){
    for (int n = 0; n<book.size(); n++){
        cout << book[n].title << " ; " <<  book[n].author << " ; " 
            << book[n].pages << " ; " << book[n].year <<endl;

    }

    cout << endl;
}

void addBooks(vector<bookStruct> book){
    int n = book.size()+1;
    book.resize(book.size()+1);
    cout << "Enter the book title: " << endl;
    cin >> book[n].title;
    cout << "Enter the author name: " << endl;
    cin >> book[n].author;
    cout << "Enter the number of pages: " << endl;
    cin >> book[n].pages;
    cout << "Enter the publication year: " << endl;
    cin >> book[n].year;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:17:46.607

两者都`addBooks`没有`displayBooks`参数：

```
void displayBooks();
void addBooks(); 
```

但是你用参数调用它们：

```
addBooks(book);
displayBooks(book); 
```

编译器用自己的话告诉你这一点。

看起来你需要

```
void displayBooks(vector<bookStruct> book);
void addBooks(vector<bookStruct> book); 
```

尽管您更有可能不需要将向量复制到函数中：

```
void displayBooks(const vector<bookStruct>& book);
void addBooks(const vector<bookStruct>& book); 
```

**请注意**，您*在* `main()`. 该函数只考虑它*之前*`main()`的声明。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:16:52.283

```
void displayBooks();
void addBooks(); 
```

不带参数，但是你传递`book`给它们，编译找不到这两个函数。因此，错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T11:17:07.473

```
void displayBooks(); 
```

应该

```
void displayBooks(vector<bookStruct> book); 
```

但作为一种更好的方法，您可以使用：

```
void displayBooks(const vector<bookStruct> &book); 
```

因此，在传递到方法 DisplayBooks 时不会复制书籍矢量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T11:17:59.847

您的函数声明为

```
void addBooks(); 
```

但你打电话给它

```
addBooks(book); 
```

编译器显然认为声明中没有参数很奇怪，然后尝试使用参数调用它。

我很难确切地建议您应该做什么，因为从您发布的代码中不清楚“正确”的事情是什么。*

# node.js - 运行节点应用程序时bcrypt无效的elf标头

> ID：15809611
> 
> 赞同：103
> 
> 时间：2013-04-04T11:15:27.993
> 
> 标签：node.js, elf, bcrypt

我正在为学校开发一个 nodejs 项目。我无法使用 npm 安装 bcrypt，所以我安装了 bcrypt-nodejs，并且该项目昨天运行良好。但是今天，当我做一个“节点应用程序”时，我遇到了这个错误：

```
/.../node_modules/bcrypt/node_modules/bindings/bindings.js:79
        throw e
              ^
Error: /.../node_modules/bcrypt/build/Release/bcrypt_lib.node: invalid ELF header
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:364:17)
    at require (module.js:380:17)
    at bindings (/.../node_modules/bcrypt/node_modules/bindings/bindings.js:74:15)
    at Object.<anonymous> (/.../node_modules/bcrypt/bcrypt.js:1:97)
    at Module._compile (module.js:456:26)
    at Object.Module._extensions..js (module.js:474:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:364:17)
    at require (module.js:380:17) 
```

我的 package.json 文件如下所示：

```
{
  "name": "Supinfarm",
  "version": "0.0.0",
  "env": {
              "PYTHON": "/usr/bin/python2.6"
        },
  "dependencies": {
    "express": "3.1.0",
    "connect-flash": "*",
    "jade": "*",
    "stylus": "*",
    "passport": "*",
    "passport-local": "*",
    "mongoose": "*",
    "bcrypt": "*"
  }
} 
```

我在 Linux ubuntu 10.04 LTS 我试图在谷歌上找到一个没有成功的解决方案......有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：181
> 
> 时间：2013-12-15T01:30:22.623

我发现**在 OSX 上编译的 bcrypt 在 Linux 上不太适用**。换句话说，如果您签入在本地 OSX 工作站上编译的 bcrypt，并尝试在您的 linux 服务器上运行节点应用程序，您将看到上述错误。

解决方案：`npm install bcrypt`在 Linux 上，签入，解决。

处理这个问题的最好方法可能是在 .gitignore... 中排除你的 node_modules 并远程安装 npm。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2019-10-25T15:42:22.930

如果您像我一样在 docker 容器中运行，您所需要的只是一个 .dockerignore，其中指定了“node_modules”。

一些库需要在主机上编译，因此您的模块可能是陈旧的。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2020-02-12T17:33:36.687

我的问题是我的 docker-compose.yml 文件，我的 .dockerignore 中已经有 node_modules 但我还需要将 node_modules 目录添加为卷：

```
volumes:
  - ./:/usr/src/app
  - /usr/src/app/node_modules 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2020-06-18T07:31:02.370

有一种简单的方法可以让我解决这个问题：

**1.卸载bcrypt**

```
npm uninstall bcrypt 
```

**2.- 再次安装 bcrypt**

```
 npm i bcrypt 
```

出现错误是因为当你安装 bcypt 时，npm 会为你的机器和操作系统安装推荐的版本，但是当你在另一台机器上时，这不起作用。

--------**更新**----------------------------------------

在我看来，另一个解决方案是授予 bcrypt 安装 root 权限，这是因为 bcryp 使用它自己的用户但它没有权限，所以：

**1.您必须授予项目文件夹的root权限。走出你的项目文件夹，然后**

```
sudo su 
```

***然后输入你的root密码获取root用户权限***

**2\. 授予您项目文件夹的权限**

```
chmod -R 777 <project_folder> 
```

**3\. 转到您的项目文件夹并安装 bcrypt**

```
cd <project_folder> 
```

**和**

```
npm i bcrypt --unsafe-perm=true --allow-root --save 
```

准备好了，如果一切正常，您的 bcrypt 模块将顺利安装。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-10-17T12:13:36.440

我也面临与 bcrypt v.1.0.3 相同的问题。刚刚更新到最新版本（3.0.1），现在工作正常

跑

```
npm install bcrypt@latest --save 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-09-03T04:21:24.370

在我的情况下，我**在 windows 中使用 nodejs**，当我使用 docker (with linux) 时出现该错误，添加带有**node_modules**文件夹的 .dockerignore 文件，这样我可以正常工作，windows 中的 nodejs 包**在 linux 中加载不同**，所以最好在 linux 中从头开始安装它们。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-07-01T04:46:11.440

我遇到了同样的问题。我使用 windows 在 AWS Lambda 中通过代码部署。我得到了同样的错误。我使用'bcryptjs' npm 库修复了它。

`npm install bcryptjs`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-02-06T12:28:42.533

如果您在 Docker 中，我通过登录到运行我的服务并运行的机器来解决问题，`npm uninstall bcrypt`然后`npm install bcrypt`

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-06-18T04:05:22.717

首先确保您没有上传节点模块并且在您的 linux 机器上运行 npm install，因为 bcrypt 安装可能会因您使用的平台而异。您可以在下面查看其他平台的其他安装说明。
[https://github.com/kelektiv/node.bcrypt.js/wiki/Installation-Instructions](https://github.com/kelektiv/node.bcrypt.js/wiki/Installation-Instructions)

如果您还有其他问题，则可能与 node-pre-gyp 有关。bcrypt 的依赖项。

对于 AWS Elastic Beanstalk 部署到运行 Node 8.x 的 Elastic Beanstalk 时，node-gyp 没有足够的权限写入 tmp 目录。bcrypt 不会安装，应用程序部署将失败。

一种解决方法是将 .npmrc 文件添加到项目的根目录，这将强制 node-gyp 以根用户身份运行并允许安装完成。.npmrc 的文件内容：

```
# Force npm to run node-gyp also as root, preventing permission denied errors in AWS with npm@5 or @6
unsafe-perm=true 
```

另一种选择（也许更正确的方法）是使用代码制作 .ebextensions 文件：

```
.ebextensions:00_change_npm_permissions.config:
  "/opt/elasticbeanstalk/hooks/appdeploy/post/00_set_tmp_permissions.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/usr/bin/env bash
      chown -R nodejs:nodejs /tmp/.npm 
```

这将使您有足够的权限来运行 node-gyp

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-12-17T02:20:23.080

对于那些将应用程序部署到 AWS 弹性 beantalk 并在服务器上安装 bcrypt 的人，请在部署后挂钩中包含`.ebextensions/01_build.config`：

```
files:
  "/opt/elasticbeanstalk/hooks/appdeploy/post/99_build_app.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/usr/bin/env bash
      cd /var/app/current/
      rm -rf node_modules/bcrypt
      sudo /opt/elasticbeanstalk/node-install/node-v10.13.0-linux-x64/bin/npm install bcrypt@latest 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-07-13T22:05:26.457

我知道这可能有点麻烦，但它是一个解决方案。当我需要实现 Bcrypt 时，我所做的是启动了一个 Cloud 9 实例。对于那些不知道的人，Cloud9 是一个在 EC2 实例上运行的基本 AWS IDE。从 Cloud9，您可以将代码作为 lambda 函数上传到 ide。所以我在 Cloud9 上写了这个函数，当我上传它时，代码就可以工作了。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-06-19T21:34:29.210

将包更改为：

```
npm install bcryptjs 
```

```
var bcrypt = require('bcryptjs'); 
```

功能是一样的。

在此处获取更多信息[https://github.com/dcodeIO/bcrypt.js](https://github.com/dcodeIO/bcrypt.js)

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2021-07-08T17:49:41.077

我通常使用 macOS 和 Docker，添加一些包我首先进入 Docker 服务器`docker exec -it nameServer /bin/bash`然后添加包`npm install bcrypt`。所以我保证一切都会在生产服务器上运行

# c - ADC dsPIC33 问题

> ID：15809613
> 
> 赞同：0
> 
> 时间：2013-04-04T11:15:35.687
> 
> 标签：c, pic, mplab, adc

我正在努力让 ADC 与我的设备一起工作。我正在使用 dsPIC33FJ128GP802 并尝试通过手动采样和转换来缓慢启动。

我的代码发布在下面，我已经为 ADC 设置了每个寄存器，然后尝试仅采样一次以从我连接的传感器获取电压。我应该看到的值大约是 0.7V，但我得到的是 -17408（10111100 00000000）区域。这可以上升到 -2000 左右，但该值首先不应为负。

```
#include <p33Fxxxx.h>

_FOSCSEL(FNOSC_FRCPLL) // select internal 7.37MHz osc with PPL
_FOSC(OSCIOFNC_OFF & POSCMD_XT) // no clock output, external OSC disabled
_FWDT(FWDTEN_OFF) // disable the watchdog timer
_FPOR(FPWRT_PWR1) // Turn off the power-up timers.

int ADCValue;

void DELAY(unsigned ms) {
    unsigned j;
    unsigned i;
    for (j = 0; j < ms; j++) {
        for (i = 0; i < 0x1F40; i++);
    }
 }

 int main(void) {

    // set up clock to 80MHz
    PLLFBD = 41; // sets M = 41+2 = 43
    CLKDIVbits.PLLPRE = 0; // sets N1 = 2
    CLKDIVbits.PLLPOST = 0; // sets N2 = 2
    while (!OSCCONbits.LOCK); // wait for PLL ready

    AD1CON1 = 0; // set everything to zero to start with.
    AD1CON1bits.ADON = 0; // turn ADC off.
    AD1CON1bits.ADSIDL = 0; // continue module operation in idle mode.
    AD1CON1bits.ADDMABM = 1; // DMA buffers are written in the order of conversion.
    AD1CON1bits.AD12B = 0; // set to 10bit mode.
    AD1CON1bits.FORM = 3; // set data output to signed fractional.
    AD1CON1bits.SSRC = 0; // manual conversion. clearing sample bit manually.
    AD1CON1bits.SIMSAM = 1; // collect samples from channels 0, 1, 2, 3 simultaneously.
    AD1CON1bits.ASAM = 0; // manual sample. samples when SAMP bit is set.
    AD1CON1bits.SAMP = 0; // sample enable bit.
    AD1CON1bits.DONE = 0; // ADC conversion status bit.

    AD1CON2 = 0; // set everything to zero to start with.
    AD1CON2bits.VCFG = 0; // converter voltage ref. set to AVdd and AVss.
    AD1CON2bits.CSCNA = 0; // input scan select bit. set to do not scan.
    AD1CON2bits.CHPS = 0; // channel select bits. set to just channel 0;
    AD1CON2bits.BUFS = 0; // buffer fill status (invalid as BUFM is 0);
    AD1CON2bits.SMPI = 0; // ADC interrupt is generated after every sample/conversion.
    AD1CON2bits.BUFM = 0; // buffer fill mode. set to always start filling from start address.
    AD1CON2bits.ALTS = 0; // Alternate input sample mode. set to always uses channel input from sample A.

    AD1CON3 = 0; // set everything to zero to start with.
    AD1CON3bits.ADRC = 0; // ADC conversion clock derived from system clock.
    AD1CON3bits.SAMC = 0; // auto sample time bits, TAD, set to 0.
    AD1CON3bits.ADCS = 0; // ADC conversion clock set to 0\. 1 * TCY = TAD.

    AD1CON4 = 0; // set everything to zero to start with.
    AD1CON4bits.DMABL = 0; // allocates 1 word of buffer to each analogue input.

    AD1CHS123 = 0; // everything set to zero as not using channels 1, 2, or 3.

    AD1CHS0 = 0; // set everything to zero to start with.
    AD1CHS0bits.CH0NB = 0; // channel 0 negative input, set by CH0NA. sample B.
    AD1CHS0bits.CH0SB = 0; // channel 0 positive input, set by CH0SA. sample B.
    AD1CHS0bits.CH0NA = 0; // channel 0 negative input, for sample A. set to VREFL.
    AD1CHS0bits.CH0SA = 0; // channel 0 positive input is AN0.

    AD1CSSL = 0; // input scan register set to zero as not using it.

    AD1PCFGL = 0; // port configuration, set to analogue mode, ADC samples voltage.

    AD1CON1bits.ADON = 1; // turn on ADC

    AD1CON1bits.SAMP = 1; // Start sampling
    DELAY(1); // Wait for sampling time (1ms)
    AD1CON1bits.SAMP = 0; // Start the conversion
    while (!AD1CON1bits.DONE); // Wait for the conversion to complete
    ADCValue = ADC1BUF0; // Read the conversion result

    while (1);

} 
```

我使用 PIC 使用的相同轨道为传感器供电，并且我将传感器的输出连接到 AN0（引脚 2），正如我在代码中设置的那样。PIC 由标准 Vss 和 Vdd（引脚 8 和 13）、模拟电源引脚 AVdd 和 AVss（引脚 28 和 27）以及 Vcap 和 Vss（引脚 20 和 19）之间的 33uF 电容器供电。我还需要在硬件方面做些什么吗？我对 AD1CHS0bits.CH0NA 寄存器有点困惑，因为我不知道是否必须将地连接到 VREFL 或在这种情况下该怎么做。

任何关于我应该做些什么来纠正这个问题的帮助将不胜感激！此外，任何有关如何在正确接收到值后转换值的帮助都将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-25T21:17:09.970

如果值不应该是负数，那么你不应该使用这个设置：

```
AD1CON1bits.FORM = 3; // set data output to signed fractional. 
```

如果我希望您的价值是（使用 Python 评估）：

```
int((2**10) *      # 10-bit operation
    (0.7/3.3)      # 0.7 volts on a 3.3 volt system
    - (2**9)       # Center at VDD / 2 because of signed operation
    ) << 6         # Fractional output left-shifted the 10-bit up by 6 to fill 16-bits
= -18816 
```

这听起来与您的代码输出的内容有关。

而是使用：

```
AD1CON1bits.FORM = 0; // set data output to integer. 
```

使用此设置以及 10 位模式，我希望您的值是

```
int((2**10) *      # 10-bit operation
    (0.7/3.3))     # 0.7 volts on a 3.3 volt system
= 217 
```

# ios - UITableView - 移动单元格 - 如何在不长按的情况下进入拖动模式？

> ID：15809622
> 
> 赞同：2
> 
> 时间：2013-04-04T11:15:58.777
> 
> 标签：ios, uitableview, uigesturerecognizer, long-press

我正在使用标准 UITableView 编辑模式通过拖放移动单元格。就像一个魅力，完美地集成到我的核心数据模型和一切。

**但是，在可用性方面，我不喜欢用户必须长按编辑附件 (|||)。我想将 UILongPressGestureRecognizer 的最短持续时间更改为 0.1f 之类的东西。**

麻烦：我似乎无法访问正确的手势识别器。UITableViewCell 的gestureRecognizers-array 是空的，UITableView 的gestureRecognizers 数组只包含私有识别器：

UIScrollViewDelayedTouchesBeganGestureRecognizer UIScrollViewPanGestureRecognizer UISwipeGestureRecognizer UIGobblerGestureRecognizer

我查看了几个 github 项目： [https://github.com/bvogelzang/BVReorderTableView](https://github.com/bvogelzang/BVReorderTableView) [https://github.com/FlorianMielke/FMMoveTableView](https://github.com/FlorianMielke/FMMoveTableView) [https://github.com/mystcolor/JTGestureBasedTableViewDemo](https://github.com/mystcolor/JTGestureBasedTableViewDemo) [https://github.com/shusta /重新排序表视图控制器](https://github.com/shusta/ReorderingTableViewController)

他们都专注于重新设计 UITableView，因此您不必访问内置的编辑模式 - 而是可以在任何地方长按任何 UITableViewCell 而无需进入编辑模式。

因为**我只是想更改内置编辑模式的 minimumPressDuration**（并且实际上可以将拖动手势的“访问点”限制到附件视图），所以我不愿意使用这些可能容易出错和麻烦的自定义实现。

期待您的帮助！谢谢！！

干杯，克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-03T00:30:50.960

您可能想要访问`UITableViewReorderControl`，如本文中所讨论的[，](http://b2cloud.com.au/tutorial/reordering-a-uitableviewcell-from-any-touch-point/)然后查找任何附加的手势识别器。如果你发现任何东西，你应该能够改变`minimumPressDuration`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-15T04:06:51.910

## 斯威夫特 5

您可以将其更改`minimumPressDuration`为0。这样您就可以进入拖放模式而无需长按。

```
let gesture = UILongPressGestureRecognizer(target: self, action: #selector(handleLongPress))
gesture.minimumPressDuration = 0 
```

# java - c:when not null/empty 检查

> ID：15809624
> 
> 赞同：3
> 
> 时间：2013-04-04T11:16:02.783
> 
> 标签：java, jsp, struts, jstl

我有一个格式变量 ftDtClo 以如下形式定义，

```
public String getFtDtClo () {
  String dateStr = "";
    if(this.getCse().getDtClo()!=null) {
        dStr = DtUtil.formatDate(this.getCse().getgetDtClo(), DtUtil.FORMAT_MM_DD_YYYY_KK_MM_SS);
    }
   return dateStr;            
} 
```

在 JSP 中，代码看起来像，

```
<c:choose>
        <c:when test="${not empty cseList.ftDtClo}">
        <c:out value="${cseList.ftDtClo}"/>
        </c:when>
        </c:choose> 
```

但我得到以下异常，

```
wrapped exception:
javax.servlet.jsp.JspException: javax.servlet.jsp.JspException: An error occurred while evaluating custom action attribute "test" with value "${not empty cseList.ftDtClo}": An error occurred while getting property "ftDtClo" from an instance of class abc.cseDetailLists (java.lang.NullPointerException)
    at org.apache.taglibs.standard.tag.common.core.ImportSupport.acquireString(ImportSupport.java:306)
    at org.apache.taglibs.standard.tag.common.core.ImportSupport.doEndTag(ImportSupport.java:161) 
```

我假设不为空将负责空检查。我错过了什么吗？任何 i/p 都受到高度赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T11:21:09.847

```
 <c:choose>
      <c:if test=${cseList != null}>  
        <c:when test="${not empty cseList.ftDtClo}">
        <c:out value="${cseList.ftDtClo}"/>
        </c:when>
       </c:if>
    </c:choose> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T23:28:49.080

尝试改变这一点：

```
 public String getFtDtClo () {
        String dateStr = "";
        if(this.getCse()!=null && this.getCse().getDtClo()!=null) {
          dStr = DtUtil.formatDate(this.getCse().getDtClo(), DtUtil.FORMAT_MM_DD_YYYY_KK_MM_SS);
        }
      return dateStr;            
   } 
```

如果它不起作用，请检查您的功能`DtUtil.formatDate`。

# html - 垂直滚动，使用 WinJS 的 ListView

> ID：15809627
> 
> 赞同：0
> 
> 时间：2013-04-04T11:16:14.980
> 
> 标签：html, css, windows-8, winjs

如何使用 WinJS 在 Windows8 应用程序中使用 HTML/JS 使 ListView 垂直滚动？

我使用 XAML/C# 开发了一个 Windows 8 应用程序，在应用程序中我使用 ListView 来获取具有垂直滚动行为的列表。

我现在正在尝试使用 HTML/JS 创建相同的应用程序，但无法使用垂直滚动的 ListView 创建列表。它会自动将 ListItems 放在水平线上并水平滚动。

我认为 GridView 可用于水平滚动的“列表”，而 ListView 可用于垂直滚动。

我还尝试使用以下方法将 ListView 包装在一个在溢出时垂直滚动的 div 中：

```
<div style="overflow-y:scroll;">
    // ListView
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:33:59.597

在 XAML 中，您使用不同的控件 - GridView 用于按列填充的水平项目列表并在垂直空间用完时换行，而 ListView 用于按列填充但不换行的垂直项目列表。

在 HTML 中，您对这两种情况都使用 ListView。要在相同的两种行为之间切换，您需要设置 ListView 的`layout`属性。将其设置`new WinJS.UI.GridLayout()`为等效于 XAML GridView 和`new WinJS.UI.ListLayout()`等效于 XAML ListView。

您可以在 JavaScript 中使用类似...

```
 if (Windows.UI.ViewManagement.ApplicationView.value == Windows.UI.ViewManagement.ApplicationViewState.snapped) {
        demosListView.layout = new WinJS.UI.ListLayout();
    }
    else {
        demosListView.layout = new WinJS.UI.GridLayout();
    } 
```

或者，您可以使用 ListView 控件 div 的 data-win-options 属性在 HTML 中以声明方式进行设置。希望有帮助。

# java - JSONArray 中的 NullPointerException

> ID：15809629
> 
> 赞同：-1
> 
> 时间：2013-04-04T11:16:30.847
> 
> 标签：java, json

我正在阅读 JSON ReST API。和 JSON 看起来不同第一个看起来像这样：

```
processJSON({
  "TripList":{
  "noNamespaceSchemaLocation":"http://api.vasttrafik.se/v1/hafasRestTrip.xsd",
  "servertime":"10:39",
  "serverdate":"2013-04-04",
  "Trip":[{
    "Leg":[{
      "name":"Buss 761",
      "type":"BUS",
      "id":"9015014576100035",
      "direction":"Heden via Linnéplatsen",
      "fgColor":"#00A5DC",
      "bgColor":"#ffffff",
      "stroke":"Solid",
      "Origin":{
        "name":"Hökegårdsgatan, Mölndal",
        "type":"ST",
        "id":"9022014012273002",
        "routeIdx":"30",
        "time":"10:42",
        "date":"2013-04-04",
        "track":"B ",
        "$":"\n"
        } 
```

第二个是这样的：

```
processJSON({
"TripList":{
  "noNamespaceSchemaLocation":"http://api.vasttrafik.se/v1/hafasRestTrip.xsd",
  "servertime":"10:46",
  "serverdate":"2013-04-04",
  "Trip":[{
    "Leg":{
      "name":"Spårvagn 8",
      "type":"TRAM",
      "id":"9015014500800075",
      "direction":"Angered",
      "fgColor":"#872387",
      "bgColor":"#ffffff",
      "stroke":"Solid",
      "accessibility":"wheelChair",
      "Origin":{
        "name":"Korsvägen, Göteborg",
        "type":"ST",
        "id":"9022014003980005",
        "routeIdx":"12",
        "time":"10:50",
        "date":"2013-04-04",
        "track":"E ",
        "rtTime":"10:51",
        "rtDate":"2013-04-04",
        "$":"\n"
        } 
```

现在我想做的是如果 JSON“腿”是一个数组，我会循环到数组中并获取数据。但是如果“腿”是一个对象，那么循环就没有用了，我可以挖掘并获取数据。这个对我有用

但是第一个不起作用并给出了空指针期望。

### 我的代码是：

```
public class ParseTimeTable {

String temp = "";

public void parseJsonData() throws ParseException, IOException {

    JSONParser parser = new JSONParser();
    Object obj = parser.parse(Planner.getPlanner().getJsonDataForTrip(
            Planner.getPlanner().getStartLocationID(),
            Planner.getPlanner().getDestinationID()));
    JSONObject topObject = (JSONObject) obj;
    JSONObject tripList = (JSONObject) topObject.get("TripList");
    JSONArray array = (JSONArray) tripList.get("Trip");
    Iterator<JSONObject> iterator = array.iterator();

    while (iterator.hasNext()) {

        JSONObject jsonObj = iterator.next();

        if (jsonObj.get("Leg") instanceof JSONArray)

        {

            JSONArray array2 = (JSONArray) tripList.get("Leg");
            Iterator<JSONObject> iterator2 = array2.iterator();
            while (iterator2.hasNext()) {

                String line = (String) jsonObj.get("name");
                String direction = (String) jsonObj.get("direction");
                JSONObject origin = (JSONObject) jsonObj.get("Origin");
                String name = (String) origin.get("name");
                String time = (String) origin.get("time");
                String track = (String) origin.get("track");

                JSONObject destination = (JSONObject) jsonObj.get("Destination");
                String dname = (String) destination.get("name");
                String dtime = (String) destination.get("time");
                String dtrack = (String) destination.get("track");

                temp = line + " " + "Mot : " + direction + " " + "Från : "
                        + name + " " + "Avgång : " + time + " "
                        + "Track : " + track + "- " + "Destination : "
                        + dname + " " + "Ankomst : " + dtime + " "
                        + "Track : " + dtrack;

                TripService.getTrip().setList(temp);

            }

        }

        else {

            jsonObj = (JSONObject) jsonObj.get("Leg");
            String line = (String) jsonObj.get("name");
            String direction = (String) jsonObj.get("direction");
            JSONObject origin = (JSONObject) jsonObj.get("Origin");
            String name = (String) origin.get("name");
            String time = (String) origin.get("time");
            String track = (String) origin.get("track");

            JSONObject destination = (JSONObject)                           jsonObj.get("Destination");
            String dname = (String) destination.get("name");
            String dtime = (String) destination.get("time");
            String dtrack = (String) destination.get("track");

            temp = line + " " + "Mot : " + direction + " " + "Från : "
                    + name + " " + "Avgång : " + time + " " + "Track : "
                    + track + "- " + "Destination : " + dname + " "
                    + "Ankomst : " + dtime + " " + "Track : " + dtrack;

            TripService.getTrip().setList(temp);

        }

    }

} 
```

}

因此，我的 else 语句中的所有内容都按应有的方式工作，但在我的 if 语句中，我得到了一个空指针，因为 array2 是空的。所以给我空指针的是我的第二个数组： JSONArray array2 = (JSONArray) tripList.get("腿”）;

### 为什么会这样？

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at se.lowdin.trafficPlanner.ParseTimeTable.parseJsonData(ParseTimeTable.java:35)
    at se.lowdin.trafficPlanner.MainWindow$UpdateAction.actionPerformed(MainWindow.java:294)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.AWTEventMulticaster.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:20:17.320

在您的“if”语句中，您正在检查*jsonObj* .get() 的类型，但您正在将*tripList* .get() 的值分配给您的数组。

我想你的意思是：

```
JSONArray array2 = (JSONArray) jsonObj.get("Leg"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:31:01.140

`TripList`不包含`Leg`.

在这一行：

```
JSONArray array2 = (JSONArray) tripList.get("Leg"); 
```

您尝试从没有的“TripList”中获取“Leg **”**。

尝试使用：

```
JSONArray array2 = (JSONArray) jsonObj.get("Leg"); 
```

# plsql - 如何通过 ref_cursor 中的表传递附加值

> ID：15809636
> 
> 赞同：0
> 
> 时间：2013-04-04T11:16:48.383
> 
> 标签：plsql

我想输出一个不在我的表中的附加变量，有人可以解释如何做到这一点，或者为什么不可能？

IE -

```
 OPEN V_CURSOR FOR SELECT ee.EmployeeID, v_overtime_worked FROM  EMPLOYEE_RECORDS ee; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:57:31.173

所以基本上你想在那个游标中存储表中的数据，以及另一个与表无关的变量 v_overtime_worked？

你收到什么错误？

我肯定知道这是有效的......所以基本上你可以在光标中放置另一个变量：

```
declare
c_Curs SYS_REFCURSOR;
v_overtime_worked VARCHAR2(120) := '1000';
v_book_title VARCHAR2(255) := '';
v_xxx         VARCHAR2(120);

BEGIN

 OPEN c_Curs FOR SELECT book_title, v_overtime_worked FROM  books;

 LOOP

 FETCH c_Curs INTO v_book_title, v_xxx;
 EXIT WHEN c_Curs%NOTFOUND OR c_Curs IS NULL;

    DBMS_OUTPUT.PUT_LINE(v_book_title || v_xxx);

 end loop;
 close c_Curs;

END; 
```

至于你的Java问题，恐怕我不知道答案..我需要做研究:)

也许你需要这样的东西：

```
@Override
                public void execute(Connection con) throws SQLException {
                    CallableStatement call = con.prepareCall(ProcedureCalls.GET_ALL_BOOKS);
                    call.registerOutParameter(1, OracleTypes.CURSOR);
                    call.execute(); 
                    ResultSet rs = (ResultSet) call.getObject(1);
                    if(rs!=null){
                        while (rs.next ()) {
                            Book b = new Book();                                    
                            b.setBookId(rs.getLong("book_id"));
                            b.setBookTitle(rs.getString("title"));
                            b.setBookYear(rs.getInt("book_year"));
                            b.setBookAuthor(rs.getString("author"));
                            book_list.add(b);
                        }
                        if(rs!=null) rs.close();
                        if(call!= null) call.close();
                    }
                } 
```

# vba - 访问没有表单实例的 VBA 用户表单控件

> ID：15809640
> 
> 赞同：3
> 
> 时间：2013-04-04T11:16:55.087
> 
> 标签：vba, excel, userform

我有一个朋友在 Excel 中使用 VBA 项目。这个项目有很多表单，在使用电子表格时会弹出并执行各种功能。其中一些具有复杂的`Form_Initialize`方法，这些方法依赖于已经存在的其他事物（当项目按预期使用时，这不是问题）。

我们正在尝试打印出应用程序中每个表单上每个控件的名称。我们的问题是该`VBA.UserForms`集合只包含已经实例化的表单，并且我们无法实例化所有表单而不`Form_Initialize`执行它们的方法。

例如：

```
For Each f In VBA.UserForms
    Debug.Print f.Name
    Debug.Print "----------------------"

    For Each c In f.Controls
        Debug.Print c.Name
    Next c
Next f 
```

如果没有使用/加载任何表单，则不执行任何操作。这段代码：

```
For Each c in frmConfig.Controls
    Debug.Print c.Name
Next c 
```

首先执行`frmConfig.Form_Initialize()`，然后循环通过表单上的控件打印它们的名称。这会崩溃，因为在此表单可用之前需要发生的事情尚未发生。

是否可以在不实例化表单的情况下获取表单上的控件名称（避免执行`frmConfig.Form_Initialize()`）？

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:39:40.580

这是你正在尝试的吗？

```
Option Explicit

Sub FindObjects()
    Dim vbc As VBIDE.VBComponent
    Dim frm As Object
    Dim Ctrl As MSForms.Control

    For Each vbc In ThisWorkbook.VBProject.VBComponents
        If vbc.Type = vbext_ct_MSForm Then
            With VBA.UserForms
                On Error Resume Next
                Set frm = .Add(vbc.Name)
                Debug.Print "Found userform :" & vbc.Name
                If Err.Number = 0 Then
                    For Each Ctrl In frm.Controls
                        Debug.Print "Controls in Userform " & vbc.Name & _
                        " - " & Ctrl.Name
                    Next Ctrl
                End If
                On Error Go To 0
            End With
        End If
    Next vbc
End Sub 
```

**小鬼**：

1.  为应用程序可扩展性设置对 Microsoft Visual Basic 的引用
2.  在 Excel 选项中，设置“信任对 VBA 项目对象模型的访问”

**截屏**

![在此处输入图像描述](https://i.stack.imgur.com/iwyx4.png)

**跟进**

由于这是一次性的事情，请执行此操作

1.  打开 VBA 项目
2.  按`CTRL`+`F`
3.  按照下面的屏幕截图所示进行操作，然后运行代码。
4.  一旦你得到你需要的东西，关闭文件而不保存

![在此处输入图像描述](https://i.stack.imgur.com/H0yjW.png)

# mysql - SQL代码根据不同表中不同字段的值更改一个表上的字段值

> ID：15809642
> 
> 赞同：3
> 
> 时间：2013-04-04T11:16:57.660
> 
> 标签：mysql, sql

我是 SQL 的完全新手，所以请温柔...

我有一个产品数据库。我想使用 SQL 将一批产品移动到不同的类别，基于产品标题中是否存在特定单词，并且仅当产品数量为零时。

该数据库包括 2 个相关表：

*   第一个表`products`有这两个相关的列：`products_quantity`和`master_categories_id`

*   第二个表是`products_description`，它有相关的列`products_name`（标题）

因此，例如，具有以下标题的产品（存储在列中`products name`）：

```
Archimede Seguso Murano Incalmo Millefiori Glass Bowl 
```

我希望 SQL 代码找到该产品（任何其他包含`Archimede`标题中的单词的产品），检查库存数量是否为，如果是，将这些产品`0`的列值更改`master_categories_id`为。`277`

到目前为止我想出的代码是：

```
UPDATE products
SET master_categories_id = '277'
WHERE products_quantity = '0' and products_name = 'Archimede'; 
```

但是，这不起作用，因为该列`products_name`不在`products`表中。我花了很多时间寻找正确的方法，但没有运气，我将永远感激任何帮助！

我的网站是使用 zencart 构建的，上面的 SQL 是使用 Zen Carts Admin“SQL Query Executor”运行的，但如果有帮助，我也可以使用 phpMyAdmin 运行 SQL。我正在使用 MySQL 版本 5。

抱歉，如果我遗漏了您需要知道的任何明显内容，例如我说我是一个完全的新手，但我会尽力提供您需要的任何其他信息。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:21:01.797

假设您在两个表中都有一个产品 id 列可用于 JOIN，您将需要 JOIN 表来执行以下操作`UPDATE`：

```
UPDATE products p
INNER JOIN products_description pd
  on p.product_id = pd.product_id
SET p.master_categories_id = '277'
WHERE p.products_quantity = '0' 
  and pd.products_name = 'Archimede'; 
```

如果要更新任何包含 的行`Archimede`，则必须`LIKE`在 SQL 中使用运算符：

```
UPDATE products p
INNER JOIN products_description pd
  on p.product_id = pd.product_id
SET p.master_categories_id = '277'
WHERE p.products_quantity = '0' 
  and pd.products_name LIKE '%Archimede%'; 
```

`LIKE`操作员将找到包含`Archimede`在标题中的任何行。

# php - 托管公司禁用服务器上的会话是否正常？

> ID：15809643
> 
> 赞同：0
> 
> 时间：2013-04-04T11:17:03.390
> 
> 标签：php, session, hosting

我刚刚转移到共享主机上的 linux 服务器，看看它是否比 godaddy 上的 windows 服务器更垃圾（我已经愚蠢到提前 12 个月付钱给他们，所以我现在被那些白痴困住了）。我现在根本无法使用任何类型的会话。

他们回复我说由我来解决问题以使其正常工作......是的，这是正确的......让会议正常工作！对不起，如果我看起来有点生气，但我很生气。

有人可以告诉我如何以某种方式让会话在 Apache 服务器上工作吗？我以前从来没有设置过这个，因为它从来都不是问题。只要我这样做：

```
 <?php session_start() ?> 
```

...它只是提出了大约 8 行错误说：

```
Warning: session_start() [function.session-start]: open(/var/chroot/home/content/30/10247530/tmp/sess_sgruthqkbhfms6ekcle2l0n6i5, O_RDWR) failed: No such file or directory (2) in /home/content/30/10247530/html/sessionthing.php on line 2

Warning: session_start() [function.session-start]: Cannot send session cookie - headers already sent by (output started at /home/content/30/10247530/html/sessionthing.php:2) in /home/content/30/10247530/html/sessionthing.php on line 2

Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent (output started at /home/content/30/10247530/html/sessionthing.php:2) in /home/content/30/10247530/html/sessionthing.php on line 2

Warning: Unknown: open(/var/chroot/home/content/30/10247530/tmp/sess_sgruthqkbhfms6ekcle2l0n6i5, O_RDWR) failed: No such file or directory (2) in Unknown on line 0

Warning: Unknown: Failed to write session data (files). Please verify that the current setting of session.save_path is correct () in Unknown on line 0 
```

我尝试创建一个 php.ini 文件，但仍然无法使其正常工作。我已经使用 phpinfo() 检查了设置，但我真的不知道从这里去哪里。

编辑：现在页面侧面出现了一些指向类似问题的东西。由于某种原因，我在搜索时没有想出那些。其中一个甚至已关闭：[https ://stackoverflow.com/questions/11374110/session-start-errors-on-godaddy-server?rq=1](https://stackoverflow.com/questions/11374110/session-start-errors-on-godaddy-server?rq=1)

那个人说他们已经和 Godaddy 解决了，所以我想我必须回去告诉他们解决问题。并不是我不想学习如何配置服务器……只是会话应该正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:21:47.173

PHP 试图将会话保存在 中`/var/chroot/home/content/30/10247530/tmp/`，但它无法打开该目录（因为它不存在或因为它没有写入权限）。调查 PHP 对这条路径的访问，我相信你会让你的会话正常工作 - 也许你在将代码迁移到新服务器时忽略了一个配置变量？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:37:51.470

确保没有其他`<?php session_start() ?>`声明，并尝试设置自己的会话临时路径，

```
<?php
  if (!is_dir(session_save_path())) {
      session_save_path ('your/custom/existing/directory');
   }
 session_start();
 ?> 
```

# java - Smack 用户验证和 stringprep 的 Nodeprep 配置文件

> ID：15809646
> 
> 赞同：1
> 
> 时间：2013-04-04T11:17:12.437
> 
> 标签：java, xmpp, smack

我正在使用 Smack 库，据我所知，没有用于验证用户 jid 的功能，该功能用于创建新连接。（如果我错了请纠正我）

所以我决定写一个新的，为此我开始研究[RFC-6122](https://www.rfc-editor.org/rfc/rfc6122#page-4)，它包含带有验证规则的 ABNF 块。

不幸的是，我不太了解非常 Unicode 特定的东西和 BNF 相关的东西，所以我不明白如何根据这个 BNF 块制作正确的正则表达式。特别是我对 ABNF 块中提到的“stringprep 的 Nodeprep 配置文件”之类的东西感到困惑。

您能否澄清一下或给我一些建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:56:21.133

It's defined in RFC 6122, [Appendix A](https://www.rfc-editor.org/rfc/rfc6122#appendix-A), but that's unlikely to help you without also reading [RFC 3454](https://www.rfc-editor.org/rfc/rfc3454), and a bunch of other source material. It's quite an undertaking to implement, so I strongly suggest you use an existing Stringprep library, such as [libidn](http://www.gnu.org/software/libidn/javadoc/).

# java - Jsp中的Json Object get或getString Giving编译错误

> ID：15809647
> 
> 赞同：0
> 
> 时间：2013-04-04T11:17:14.437
> 
> 标签：java, json, jsp, exception

所以，在我折腾了 3 个小时后终于寻求帮助

```
<%@ page import="net.sf.json.*" %>

..
.
.

<%
     while (rs.next()) {
     %>
      <%
    json = (JSONObject) JSONSerializer.toJSON(rs.getString(3));
    System.out.println(json.toString());

    System.out.println(json.getString('site_caption'));//Compiler failed
    System.out.println(json.get('site_caption'));//Compier failed

    }
    %> 
```

上面的代码在控制台打印

```
{ "font_color" : "#0079cd",
  "site_background" : { "color" : "",
      "image" : "",
      "selected" : "image"
    },
  "site_caption" : "<p>Site Caption</p>\r\n",
  "site_description" : "<p>Site Description</p>\r\n",
  "site_logo" : { "image" : "1361858536dyn007or53.gif",
      "selected" : "image",
      "text" : ""
    }
} 
```

但是当我尝试打印时

```
 System.out.println(json.getString('site_caption'));//Compiler failed
    System.out.println(json.get('site_caption'));//Compier failed 
```

甚至没有给出正确的错误信息

我被同样的错误信息骚扰

```
Compile failed; see the compiler error output for details.
    at org.apache.tools.ant.taskdefs.Javac.compile(Javac.java:933)
    at org.apache.tools.ant.taskdefs.Javac.execute(Javac.java:757)
    at org.apache.jasper.compiler.Compiler.generateClass(Compiler.java:382)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:472) 
```

请把我拉出来。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:24:31.800

你的键应该用双引号转义`"`，而不是单引号`'`。例如：

```
System.out.println(json.getString("site_caption")); 
```

# java - 更新客户端捆绑包时未更新捆绑包中的 UnsatisfiedLinkError

> ID：15809649
> 
> 赞同：1
> 
> 时间：2013-04-04T11:17:31.080
> 
> 标签：java, osgi

我有一个`com.elsten.bliss.platform`使用另一个包（“”）的包（“ `net.contentobjects.jnotify`”）。`net.contentobjects.jnotify`加载本地库以完成其工作，这些库由片段贡献。本机代码加载到捆绑包内的类内的静态类初始化程序中`net.contentobjects.jnotify`：

```
static
{
    System.loadLibrary("jnotify");
    int res = nativeInit();
    if (res != 0)
    {
        throw new RuntimeException("Error initializing fshook_inotify library. linux error code #" + res  + ", man errno for more info");
    }
    init();
} 
```

我可以启动和停止`com.elsten.bliss.platform`，它似乎工作正常。更新的时候问题来了`com.elsten.bliss.platform`。当我更新时，我得到：

```
2013-04-04 11:58:20,356 [ERROR]  Couldn't initialise JNotify: java.lang.UnsatisfiedLinkError: Native Library /home/gravelld/eclipse-workspaces/bliss/net.contentobjects.jnotify.linux.amd64/lib/libjnotify.so already loaded in another classloader (JnotifyFileSystemObserver.java:53, thread platformExecutor)
java.lang.UnsatisfiedLinkError: Native Library /home/gravelld/eclipse-workspaces/bliss/net.contentobjects.jnotify.linux.amd64/lib/libjnotify.so already loaded in another classloader
    at java.lang.ClassLoader.loadLibrary0(ClassLoader.java:1715)
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1675)
    at java.lang.Runtime.loadLibrary0(Runtime.java:840)
    at java.lang.System.loadLibrary(System.java:1047)
    at net.contentobjects.jnotify.linux.JNotify_linux.<clinit>(JNotify_linux.java:48)
    at net.contentobjects.jnotify.linux.JNotifyAdapterLinux.<init>(JNotifyAdapterLinux.java:76)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
    at java.lang.Class.newInstance0(Class.java:374)
    at java.lang.Class.newInstance(Class.java:327)
    at net.contentobjects.jnotify.JNotify.<clinit>(JNotify.java:75)
    at com.elsten.bliss.platform.storage.file.JnotifyFileSystemObserver.startWatching(JnotifyFileSystemObserver.java:43)
    at com.elsten.bliss.platform.storage.file.NotifyFilesAtStartFileSystemObserver.start(NotifyFilesAtStartFileSystemObserver.java:117)
    at com.elsten.bliss.platform2.PlumbedStorageSubsystem.start(PlumbedStorageSubsystem.java:69)
    at com.elsten.bliss.client.impl.ConfigurationClientImpl$3.doRun(ConfigurationClientImpl.java:337)
    at com.elsten.util.CatchThrowableRunnable.run(CatchThrowableRunnable.java:23)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1146)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:679) 
```

好的，所以我知道你只能让一个类加载器加载任何一个本机库。但是在这种情况下，为什么会有不止一个类加载器呢？没有更新，所以我认为现有的`net.contentobjects.jnotify`类应该继续使用并被使用`JnotifyFileSystemObserver.startWatching`- 看起来这个方法正在重新加载类。

我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:26:22.877

有趣的是，如果调用两次该代码不应引发异常；`java.lang.Runtime#loadLibrary()`声明的 javadoc

> 如果使用相同的库名称多次调用此方法，则忽略第二次和后续调用。

所以，可能还有更多。您是否尝试在 MANIFEST.MF 的 Bundle-SymbolicName 条目中设置单例属性？

# nested - Meteor 中嵌套车把块的奇怪结果

> ID：15809650
> 
> 赞同：0
> 
> 时间：2013-04-04T11:17:31.000
> 
> 标签：nested, meteor, handlebars.js

我正在尝试在 html 选择中设置默认值，但没有成功。我正在做这样的初始填充：

```
<template name="demo">
    <select>
        {{#each foo}}
            <option>{{this}}</option>
        {{/each}}
    </select>
</template> 
```

我在模型中设置了可能的选项，如下所示：

```
Template.demo.foo = ["aaa","bbb","ccc"]; 
```

到目前为止，一切都按预期工作。

现在我正在尝试显示集合集合的行，用默认记录的 foo 值（aaa 或 bbb 或 ccc）填充选择。我的理解是您必须在标签中添加“选定”。所以我用多个嵌套块做这样的事情：

```
<template name="demo">
    {{#each collecs}}
        {{_id}}
        <select>
            {{#each foos}}
                <option{{#if isSelected this ../this}}selected{{/if}}>{{this}}</option>
            {{/each}}
        </select>
    {{/each}}
</template> 
```

在模型前面：

```
Template.demo.foos = ["aaa","bbb","ccc"];

    Template.demo.collecs = function(){
      return Collec.find({});
      };

    Template.demo.isSelected = function(fooToCheck, record){
      var rid= record._id; 
      var currentRecord = Collec.findOne({_id:rid});
      return (fooToCheck==currentRecord.foo);
  }; 
```

问题是它不起作用。下拉列表保持为空，生成的 html 代码显示如下：

```
"              >aaa             " 
```

我已经检查了 js 部分，一切似乎都正常工作，正确/错误已充分返回。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:12:36.830

Handlebars 条件不适合内联。事实上，我不确定它们是否可以在任何地方内联工作。发生的事情是 Handlebars 模板引擎不理解您的 html，因此它跳过了它，这就是您看到“>aaa”的原因。

以下代码有效。我冒昧地简化了您的 isSelected 函数。

**模板：**

```
<template name="demo">
    {{#each collecs}}
        {{_id}}
        <select>
            {{#each foos}}
                {{#if isSelected this ../foo}}
                  <option selected>{{this}}</option>
                {{else}}
                  <option>{{this}}</option>
                {{/if}}
            {{/each}}
        </select>
    {{/each}}
</template> 
```

**JavaScript：**

```
 Template.demo.foos = ["aaa","bbb","ccc"];

  Template.demo.collecs = function(){
    return Collec.find({});
  };

  Template.demo.isSelected = function(fooToCheck, recordFoo){
    return (fooToCheck === recordFoo);
  }; 
```

# utf-8 - 检测经典 ASP 中的查询字符串编码

> ID：15809651
> 
> 赞同：1
> 
> 时间：2013-04-04T11:17:35.543
> 
> 标签：utf-8, asp-classic, character-encoding, query-string

我有一个编码问题，我不确定如何处理。我们提供了一个链接（电子邮件和其他方式），其中包含非 ascii 字符（特别是`æ,ø,å`以及更多）。问题在于，根据用户在哪个浏览器中打开所述链接，我们收到的查询字符串的编码方式不同。

在大多数浏览器中，它被编码为 UTF8，如下所示：
`%C3%A5`=`å`

但是，在 Internet Explorer 中，它的编码类似于 ISO-8859-1，如下所示：
`%E5`= `å`（或者它只是在`å`没有查询字符串编码的情况下发送）。

问题是，如果我在 chrome 中读取查询字符串，我会得到`Ã¥`，而不是`å`在 IE 中得到`å`，所以我需要某种方法来确保服务器掌握编码或客户端始终以特定编码发送，如前所述，问题是我无法控制链接的使用位置。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T21:54:26.943

尝试将其嵌入到您的 asp 的顶部。

```
Response.ContentType = "text/html"
Response.AddHeader "Content-Type", "text/html;charset=UTF-8"
Response.CodePage = 65001
Response.CharSet = "UTF-8" 
```

这*应该*强制所有浏览器使用 utf-8

# c# - 并行Excel

> ID：15809655
> 
> 赞同：0
> 
> 时间：2013-04-04T11:17:43.683
> 
> 标签：c#, excel, parallel-processing, parallel-extensions

我有一个程序可以在 excel 中插入数据并创建图表。所有的“数字运算”都在程序中完成（使用 linq），所以 excel 仅用于创建图形。最终的 excel 有大约 300 个工作表（50 个数据表和 250 个图表）。这是性能问题。虽然 linq 和 regex 的操作非常快，但 excel 生成所有图形需要 4 分钟以上。我考虑了并行扩展并将图表拆分为 5 个 excel 文件。

我的问题是我是否正在浪费时间。我的意思是：4 分钟内绘制 250 张图相当于每张图 1 秒。excel 是否应该比这更快地并行生成图表？我还注意到 excel（与大多数程序一样）在文件较大时运行速度较慢。如果你有一个 10MB 的 excel 并插入一个图表需要 1 秒，如果你有一个 10KB 的 excel 它现在插入（可能只是我的印象......）。

如果答案是我应该使用并行扩展，我应该使用相同的 excel 应用程序和不同的 excel 文件还是更好地为每个文件使用不同的 excel 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:32:08.160

尝试使用 Excel 执行此操作会导致很多痛苦。为您的图表使用众多出色的 .net 图表库之一。

如果出于其他原因您必须使用 Excel，那么您将需要单独的工作簿。一次只能有一个线程可以对工作簿进行操作。我相信多个线程可以在多个工作簿上并行运行，虽然我自己从未做过，但我看不出它为什么不工作的原因。

您现有的代码很可能会显着加速。您是否在向 Excel 添加数据时禁用屏幕更新？是否禁用自动重新计算？您是将数据逐个单元格地推送到 Excel 中，还是一次性将整个范围推送到 Excel 中？一个细胞一个细胞地慢得要命。您希望最大限度地减少对 Excel 的调用次数，因为调用进程外 COM 服务器的 IPC 成本非常高。

# javascript - 无法匹配 JavaScript 中的字母数字

> ID：15809656
> 
> 赞同：1
> 
> 时间：2013-04-04T11:17:43.500
> 
> 标签：javascript, regex, coffeescript

我想匹配一个包含 5 到 15 个字母数字字符的单词，我还可能包含 _ 和 - 字符。我正在使用 JQuery 来获取输入的值，我正在使用 CoffeeScript 进行编程：

```
username = $('#register input[name="user"]').val()
if ( ! username.match('/^([\w_\-]{5,15})$/'))
    alert(username) 
```

用JS编译的是这样的：

```
username = $('#register input[name="user"]').val();
if (!username.match('/^([\w_\-]{5,15})$/')) {
     return alert(username);
} 
```

我收到带有“dsdsfsdsf”之类的字符串的警报，它应该返回 true，实际上每个字符串在尝试匹配时都返回 false。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:18:50.710

改变

```
if ( ! username.match('/^([\w_\-]{5,15})$/')) 
```

到

```
if ( ! username.match(/^([\w_\-]{5,15})$/)) 
```

正则表达式文字不得在引号之间。

由于您只想简单地测试字符串，因此最好使用更快的[测试](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test)，并且不需要捕获组：

```
if (!/^[\w_\-]{5,15}$/.test(username)) 
```

# powershell - Powershell 尝试 Catch

> ID：15809661
> 
> 赞同：3
> 
> 时间：2013-04-04T11:17:54.260
> 
> 标签：powershell

我在下面有一个简单的 powershell 脚本，它基本上用很少的参数执行 abc.exe（控制台应用程序）。

```
& abc.exe ar1 ar2 
```

abc.exe 文件是 .net，因此它有自己的异常处理程序。

每当 abc.exe 抛出异常时，我希望 Powershellscript 捕获并记录/回显。

有人可以帮助我如何实现上述目标。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T11:22:19.370

不。

abc.exe 中的异常将冒泡到 main 方法，不再是。但是您可以通过查看**$LASTEXITCODE**来检查 abc.exe 的 ERRORLEVEL 。（检查[这个](http://social.technet.microsoft.com/Forums/en-US/ITCG/thread/05e37b8d-761b-4fd7-881e-977f114ad8d7/)）

你应该做什么：

*   您的 abc.exe 与任何 exe 一样，如果一切正常，则应返回错误级别 0，如果出现错误，则应返回其他数字
*   Abc.exe main 方法可能会在出现问题时写入错误消息。这样，当您从 PowerShell 脚本调用它时，您将在控制台中看到错误消息，稍后您的脚本将检查错误级别。

此外，您还可以在 abc.exe 中为错误级别使用不同的退出代码，以向 PowerShell 脚本提供一些信息。例如，这些是[7zip 错误级别](http://sevenzip.sourceforge.jp/chm/cmdline/exit_codes.htm)。

*   0 --> 没有错误
*   1 --> 警告
*   2 --> 致命错误
*   7 --> 命令行错误
*   8 --> 没有足够的内存用于操作
*   255 --> 用户停止进程

# c++ - 什么是更好的Matrix4x4类设计c++新手

> ID：15809664
> 
> 赞同：3
> 
> 时间：2013-04-04T11:18:08.743
> 
> 标签：c++, class, graphics, matrix

用什么来存储矩阵值会更好？

```
float m1,m2,m3 ... ,m16 
```

或者

```
float[4][4]. 
```

我首先尝试了 float[16]，但是当我调试和测试 VS 时不会显示数组内部的内容 :( 可以实现 cout 并尝试从控制台测试应用程序中读取答案。

然后我尝试在测试和调试下使用浮点 m1、m2、m3 等，这些值可以在 VS 中读取，因此看起来更容易使用。

我的问题是因为我对 C++ 相当陌生，什么是更好的设计？

我发现`float m1,m2 ... ,m16`调试时更容易使用。

如果有人可以从经验中说或者有基准数据，我的直觉说它不应该真的很重要，因为矩阵数据应该在内存中布局相同，对吗？

编辑：更多信息它是一个列主矩阵。据我所知，视图转换管道只需要一个 4x4 矩阵。所以没什么大不了的，所以我有一些恒定的值。

忙着写一个简单的软件渲染器，以此来学习更多的 c++ 并获得更多的经验并学习/提高我的线性代数技能。可能只会使用每个片段着色和一些简单的照明模型，到目前为止，我已经看到 4x4 矩阵是我渲染所需的最大矩阵。

Edit2：找出为什么我无法读取数组数据它是我使用的浮点指针，调试菜单只显示指针值我确实发现了一种在手表中查看数组值的方法，你必须在哪里做指针，n 其中 n = 你想看到的元素。

每个回答谢谢的人我现在将使用 Vector4 m[4] 答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:24:40.020

您应该考虑一个`Vector4`with `float [4]`members 和一个`Matrix4`with `Vector4 [4]`members。使用`operator []`，您有两个有用的类，并保持访问元素的能力：`[i][j]`- 在大多数情况下，如果您不使用`virtual`方法，元素数据将是连续的。

您还可以通过这种方式从向量 (SIMD) 指令中受益，例如，在`Vector4`

```
union alignas(16) { __m128 _v; float _s[4]; }; // members

inline float & operator [] (int i) { return _s[i]; }
inline const float & operator [] (int i) const { return _s[i]; } 
```

并且在`Matrix4`

```
Vector4 _m[4]; // members

inline Vector4 & operator [] (int i) { return _m[i]; }
inline const Vector4 & operator [] (int i) const { return _m[i]; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:35:41.633

在`float m1, m2 .. m16;`使用循环遍历事物时，处理起来变得非常尴尬。使用某种数组要容易得多。而且，最有可能的是，当您像“手工编码”一样使用循环时，编译器至少会生成高效代码，除非您实际编写内联汇编程序或使用 SSE 内在函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T11:24:43.057

只要代码不进化，16 浮点数的解决方案就可以了（维护起来很麻烦，而且不是真的可读）

float[4][4] 是一种更好的设计（就大小参数化而言），但您必须了解指针的概念。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T11:40:50.300

我会使用一个包含 16 个浮点数的数组，`float m[16];`唯一的原因是使用 Matrix4fv 后缀函数很容易将它传递给像 openGL 这样的库。

类似的 2D 数组也`float m[4][4];` *应该*在内存中进行相同的配置`float m[16]`（请参阅[我可以将 2D 数组视为连续的 1D 数组吗？](https://stackoverflow.com/questions/7269099/may-i-treat-a-2d-array-as-a-contiguous-1d-array)）并且使用它会更方便`[row][col]`（或者`[col][row]`我不确定哪个是正确的openGL) 索引（比较`m[1][1]`vs `m[5]`）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-04T11:28:49.853

对矩阵元素使用单独的变量可能会被证明是有问题的。在处理像 100x100 这样的大矩阵时，您打算做什么？

当然你需要使用一些类似数组的结构，我强烈建议你至少使用数组

# dynamics-crm-2011 - 错误：用户没有足够的权限来分配

> ID：15809671
> 
> 赞同：0
> 
> 时间：2013-04-04T11:18:38.147
> 
> 标签：dynamics-crm-2011, dynamics-crm, dynamics-crm-online

我有三个自定义实体；`Project`，`ProjectStageExternal`并且`ProjectStageInternal`，我添加了一个工作流，它将在管理员创建记录时创建`ProjectStageInternal`和记录。`ProjectStageExternal``Project`

现在我有一个名为`customer`. 拥有此卷的用户只阅读`Project`和`ProjectStageExternal`记录。

![在此处输入图像描述](https://i.stack.imgur.com/rRpaT.jpg)

问题是当所有权更改为具有 `customer`安全性的用户时，工作流程无法正常工作。它显示以下错误：`The selected user does not have sufficient privileges to be assigned records of this type.`

我在这里想念什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T23:02:58.427

该安全角色对这些实体基本上没有权限，因此用户将无法对它们执行任何操作。

如果您希望某人能够分配（或代表他们分配工作流），您需要授予分配权限并且可能也写。

如果您不想授予他们这些权限，请将工作流的范围更改为组织并将其分配给管理员用户。这意味着工作流将以管理员权限和安全角色运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-17T15:35:12.940

只有向要分配记录的用户/团队提供读取权限才能正常工作！

# php - 带有空参数的 sprintf 检测

> ID：15809672
> 
> 赞同：1
> 
> 时间：2013-04-04T11:18:38.943
> 
> 标签：php, variables, conditional-statements, printf

我正在尝试为带有搜索结果的 HTML 页面准备元素。用户可以提供各种标准来搜索表单，例如城市、地区、类型。用户可以提供每个标准或不提供任何标准。我想根据所选标准生成标题。

我的代码：

```
$criteria = array('city' => $_POST['city'], $region = $_POST['region'], type => $_POST['type']);
$titleBase = 'You are looking for %s, %s, %s - mySite.com';
$title = sprintf($titleBase, $criteria['city'], $criteria['region'], $criteria['type']);
parse($title, '<title>'); 
```

效果： *您正在寻找城市、地区、类型 - mySite.com*

很好，但是如果用户不提供“区域”和“类型”怎么办？我会： *您正在寻找 ,, 类型 - mySite.com。*

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T11:22:03.503

有很多可能的方法，从非常有针对性的修复开始，然后进行概括。

最简单的应该是这样的：

```
$lookingFor = implode(', ', array_filter($criteria));
$title = 'You are looking for '.$lookingFor.' - mySite.com'; 
```

# vb.net - 如何将长行包装到标签控件中？

> ID：15809676
> 
> 赞同：5
> 
> 时间：2013-04-04T11:18:56.243
> 
> 标签：vb.net, label

我在标签中有 50-60 个单词的内容，它超出了我放置它的 groupbox，所以我需要将它包装起来，以便它可以容纳在 groupbox 中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T11:23:39.457

只需将`AutoSize`标签的属性设置为`False`，然后重新定位，然后将标签设置为您需要的大小

# actionscript-3 - 我们可以通过 Flex SDK 4.5.1 使用 Flash Player 11 的功能吗？

> ID：15809677
> 
> 赞同：1
> 
> 时间：2013-04-04T11:18:57.897
> 
> 标签：actionscript-3, apache-flex, flex4.5, flash, flash-player-11

如您所知， *BitmapData*在 Flash Player 10 中对图像大小和分辨率有一些限制（最大分辨率为 8192），对于 Flash Player 11 及更高版本，Adobe 修复了此限制，并且取决于操作系统，我们可以在 BitmapData 中拥有所有类型的超大分辨率。但我的问题是现在我使用的是 Flex SDK 4.5.1，它的基础 Flash Player 是 10.2.159.1。

那么是否有可能将 Flash Player 11 的这一优势与我当前的 Flex SDK 一起使用，并实现基于 Flash 版本的限制，例如*Capabilities.version*或不？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:41:14.577

是的。你必须 ：

*   将`-swf-version=XX`参数添加到编译器设置
*   将`-target-player=11.X`参数添加到编译器设置
*   可选地，获取相应的`playerglobal.swc`并复制您的 FlexSDK，替换原始 SWC 文件（如果您需要访问新的 API）

这是一个关于如何做到这一点的[综合教程](http://jacksondunstan.com/articles/1968)，也是一个[非常有用的图表](https://stackoverflow.com/questions/9537076/chart-of-swf-versions-to-flash-versions)，可以帮助您了解使用哪个 SWF 版本。

> 那么是否有可能将 Flash Player 11 的这一优势与我当前的 Flex SDK 一起使用，并实现基于 Flash 版本的限制，例如 Capabilities.version 或不？

一般来说，我不认为针对较早版本并在运行时检查实际版本的方法会起作用，因为播放器，即使它是 11.0 版本，如果这是您的 SWF 编译的版本，它将尝试像 10.2 一样运行. 有关更多详细信息，请参阅本[演示文稿的开头。](http://tv.adobe.com/watch/max-2008-develop/flash-player-internals-by-jim-corbett-and-lee-thomason/)使用 SWFObject 为您的应用程序设置最低播放器版本。

但是，由于您需要支持更大的图像，这对程序员来说是透明的，我不确定它实际上是否对旧的 SWF 禁用。那应该被测试。

# linux - Linux 网络内核

> ID：15809678
> 
> 赞同：0
> 
> 时间：2013-04-04T11:19:04.473
> 
> 标签：linux, networking, linux-kernel

我正在阅读 Linux 中的内核网络。我发现这篇[http://www.ibm.com/developerworks/linux/library/l-linux-networking-stack/](http://www.ibm.com/developerworks/linux/library/l-linux-networking-stack/)文章很有帮助。阅读本文后，我怀疑如果我在 Linux 平台上创建任何软件.. 比方说，一些聊天程序.. 我是否必须利用所有可用的 API（sk_buff 和所有）来连接到另一个网络? 请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:27:07.533

sk_buff 是一个内核结构，它是内核 TCP/IP 堆栈的一部分。您不需要直接触摸它，实际上会发现这样做很困难。

相反，您需要学习用于网络通信的用户空间 API。要快速学习 Unix 上的网络通信基础知识，很难击败[Beej's Guide](http://beej.us/guide/bgnet/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T11:28:41.413

如果您想创建一个聊天软件，我建议您查看 BSD Sockets 或任何适用于 Linux 的 TCP/IP 网络指南。您无需了解内核中发生的事情即可对聊天软件进行编程。

如果您想创建一个新的设备驱动程序但您似乎高于协议级别，则 sk_buff 是相关的。

如果您想创建聊天，您将创建一个服务器套接字（侦听器）和客户端，它们连接到您的服务器正在侦听的地址并通过 TCP/IP 交换信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T16:15:37.753

sk_buff 是套接字缓冲区的内核数据结构。您不必为您的聊天服务器触摸它。如果您参加过操作系统课程，您一定注意到有一个进程结构（Linux 中的 struct proc），但这是否意味着您必须在编写程序时使用它？不，sk_buff 是类似的情况，Linux 内核使用它来缓冲某些数据。你不必担心它。

对于您的聊天服务器，请查看 Beej 的指南，如果我没记错的话，它有一个聊天服务器的实现，它是我所知道的在 Linux 上开始网络编程的最佳指南，并且充满了幽默感。要更深入地了解网络编程，请参阅 Richard Stevens Unix Network Programming, Volume 1 和 Volume 2。它被认为是网络编程的圣经。

# ios - UITextField 没有收到触摸事件

> ID：15809682
> 
> 赞同：0
> 
> 时间：2013-04-04T11:19:18.853
> 
> 标签：ios, ipad, uitextfield

我在复杂的视图层次结构中有一个 UITextField。文本字段位于带有标签和文本字段的 UIView 中，例如 labelfield。

我可以在那里输入文字。

右上角有信息按钮。当点击 Info 时，会加载一个模态视图控制器。从模态视图控制器返回时，UITextField 变得无响应。我不能在那里输入任何东西。labelfiedl 被绘制并显示在屏幕上。

有趣的是，如果我按下 ok 按钮，就会显示警报，然后文本字段就会变为活动状态。此外，在视图顶部，有一些启用用户交互的文本，如果我点击并尝试选择文本，然后文本字段变为活动状态。似乎我必须在超级视图上进行一些其他活动/触摸，然后文本字段变为活动状态。

为什么不在第一种情况下接收任何触摸事件？我尝试在 viewDidApper 方法中使用 textField.enabled、becomingFirstResponder、setNeedsDisplay，但没有任何效果。

![在此处输入图像描述](https://i.stack.imgur.com/LnyHa.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:03:11.077

尝试以下...

*   确保添加文本字段的超级视图作为子视图足够大以包含文本字段（即确保文本字段的任何部分都没有超出超级视图。检查所有视图）。

*   `bringSubViewToFront:`确保 textfield.use方法上方没有视图。

*   尝试在延迟后启用使用交互

希望以上任何修复都可以解决您的问题

# ios - iOS Newstand 应用程序问题托管

> ID：15809683
> 
> 赞同：0
> 
> 时间：2013-04-04T11:19:21.093
> 
> 标签：ios, in-app-purchase, hosting, newsstand-kit

我正在开发一个报亭应用程序，我正在寻找有关问题托管的一些说明。对于这个项目，杂志问题将存储为 JSON 文件、图像和视频的存档。这种内容是否可以存储在 Apple 服务器上，还是我必须将其托管在自己的服务器上并为此实施适当的后端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-11T08:09:55.090

Apple**不**托管您的内容，您必须在自己的服务器上托管内容并实施适当的后端。

*   获取可用问题列表及其信息（名称、简短描述、内容下载链接等）
*   根据您的设计显示它们。
*   当用户使用 Newsstand 工具包框架点击下载时，下载每个问题的相应资源。
*   建议将所有资源归档到一个 zip 文件中并下载该文件。稍后您可以解压缩并访问内容。OfCourse 如果问题是付费问题，请验证订阅状态，然后下载。

希望这会有所帮助。

# linux - 如何找到与设备文件关联的设备驱动程序？

> ID：15809685
> 
> 赞同：1
> 
> 时间：2013-04-04T11:19:25.540
> 
> 标签：linux, filesystems, linux-device-driver

```
ls -l /dev 
```

命令列出设备文件以及相关信息，如主设备号、次设备号。

```
cat proc/devices 
```

命令帮助我找到与主要号码关联的设备名称。

所以对于一个节点，我找到了主设备号，设备名称。

我了解了如何通过在 /sys/class => 下填充类信息来**自动创建**设备文件。通过安装设备驱动程序模块，我可以找到创建的设备文件。

我无法从设备文件追溯到相应的模块。

本质上，如何通过这些信息找到与设备文件相关的设备驱动程序/模块？

# spring-mvc - SpringMVC 在没有控制器的情况下提供视图

> ID：15809691
> 
> 赞同：0
> 
> 时间：2013-04-04T11:19:44.157
> 
> 标签：spring-mvc, view, tiles

我在 WEB-INF/templates 文件夹中有一个 jspx 文件（例如 test.jspx），我想通过 javascript 访问它。

我没有返回该视图的控制器，在我的应用程序中我使用的是 TilesViewResolver。

在 test.jspx 我想使用 spring taglib 来访问消息包。

我如何配置 spring 来服务 test.jspx ？

我在用着：

```
<mvc:view-controller path="/templates/test.html" view-name="test" />
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix">
            <value>/WEB-INF/views/templates/</value>
        </property>
        <property name="suffix">
            <value>.jspx</value>
        </property>
        <property name="order" value="1" />
    </bean> 
```

它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:01:35.950

我不知道是否可以不使用任何控制器，但是您可以使用 Spring MVC 已经提供的控制器：[`ParameterizableViewController`](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/web/portlet/mvc/ParameterizableViewController.html)。只需提供您的 jsp 名称作为 viewName 属性。

# iphone - Xcode 调试器在调试区域显示无法解释的信息

> ID：15809693
> 
> 赞同：1
> 
> 时间：2013-04-04T11:19:49.120
> 
> 标签：iphone, xcode, debugging

尝试在 Xcode 中调试我的 iPhone 应用程序时，我在调试区域遇到了我不理解的信息。

这是我正在调试的代码。暂停程序执行和截取屏幕截图的断点是“<<-- BREAKPOINT HERE”的位置：

```
- (IBAction)goBack:(id)sender {
    CBDetailBackSegue *backSegue = [[CBDetailBackSegue alloc] init];
    NSInteger *posInArray = self.navigationController.viewControllers.count - 2;
    backSegue.destinationViewController = [self.navigationController.viewControllers objectAtIndex:posInArray];
    backSegue.navigationController = self.navigationController;
    //backSegue.sourceViewController = self;
    [self.navigationController popViewControllerAnimated:NO];  // <<-- BREAKPOINT HERE
    //[backSegue perform];
} 
```

我想检查`backSegue`类型为 的变量的内容`CBDetailBackSegue*`。从代码中可以看出，我希望实例具有属性`sourceViewController`、`destinationViewController`和`navigationController`。但是当在调试区域查看实例的内容时（见[截图](https://i.stack.imgur.com/MMQTC.png)），它似乎是 UIViewController 的一个子类型，并且似乎具有我的 UIViewController 子类之一的属性。

调试区域是否显示错误信息或这里发生了什么？

[放大截图](https://i.stack.imgur.com/MMQTC.png) ![截屏](https://i.stack.imgur.com/MMQTC.png)

# php - 将数组分成更小的数组

> ID：15809697
> 
> 赞同：1
> 
> 时间：2013-04-04T11:19:53.153
> 
> 标签：php, arrays, multidimensional-array

我有`$array1`200 个整数值中的第一个，`$array1`整数值是随机值，第二个数组如下所示

```
$array2= array('30','40,'70','30','30'); 
```

这两个数组都是动态生成的。

我想根据值将我`$array1`的数组分成更小的数组`$array2`，因为前 30 个整数`$array1`将组成单独的数组，后面的 40 个整数`$array1`将组成第二个新数组，依此类推。从上面的示例中将有 5 个新数组。

谁能帮帮我吗。

我在下面尝试过它可以根据分配的值进行划分。但这没有用

```
$arrays = array_chunk($array1, 30); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:24:10.310

您应该遍历块大小的数组并每次切断输入数组的适当部分：

```
$input = range(0, 199);
$chunks = array(30, 40, 70, 30, 30);
$output = array();
$processed = 0;

while($chunks) {
    $processed += $size = array_shift($chunks);
    $output[] = array_slice($input, $processed, $size);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:23:00.147

你为什么不试试这个

```
 $startingPoint = 0;
       foreach($array2 as $val)

       {
       for($i = $startingPoint ; $i < $startingPoint + $val ; $i++)
        { $array1[$i]  }
        $startingPoint += $val
       } 
```

# tcl - 将 Tcl 库与 C 代码一起使用会出错

> ID：15809700
> 
> 赞同：0
> 
> 时间：2013-04-04T11:19:58.400
> 
> 标签：tcl, dev-c++

1.  软件：ActiveState ActiveTcl 8.5.13.296436/Win7/DEV C++ 5.4.1。
2.  ActiveTcl 安装在 D:/TCL/。
3.  错误信息：

    ```
    E:\src\c\tcl\main.oIn function `Tcl_AppInit':
    8E:\src\c\tcl\main.cundefined reference to `_imp__Tcl_Init'
    E:\src\c\tcl\main.oIn function `main':
    14E:\src\c\tcl\main.cundefined reference to `_imp__Tcl_Main'
    E:\src\c\tcl\collect2.exe[Error] ld returned 1 exit status
    26E:\src\c\tcl\Makefile.winrecipe for target 'tcl_test.exe' failed 
    ```

4.  c源代码：

    ```
    #include <stdio.h>
    #include <stdlib.h>
    #include <tcl.h>
    #include <tk.h>

    int Tcl_AppInit(Tcl_Interp *interp)
    {
        return (Tcl_Init(interp) == (TCL_ERROR))?TCL_ERROR:TCL_OK;
    }

    int main(int argc, char** argv)
    {
        printf("--- Tcl Third-Party Shell Start ---\n");
        Tcl_Main(argc, argv, Tcl_AppInit);
        printf("--- Tcl Third-Party Shell End ---\n");

        return 0;
    } 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:56:12.960

在玩了一会儿之后，我可以在 Visual Studio 中重现并解决这个问题。

您只需添加`D:\Tcl\lib\tcl86.lib`到“链接器/输入”下的“附加依赖项”。

这为我解决了这个问题。

### 编辑

你可以传递`Tcl_Init`给`Tcl_Main`（如果你不需要做任何特定的初始化）或者只返回这样的结果`Tcl_Init`：

```
int Tcl_AppInit(Tcl_Interp *interp)
{
    return Tcl_Init(interp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:27:09.360

为了访问这些功能（特别是`Tcl_Main`），您*必须*将您的代码与 Tcl DLL（我认为它将`tcl85.dll`在您的安装中）链接起来；它不是通过 Tcl 的存根链接机制导出的符号。我不确切地知道您是如何在 Windows 上执行此操作的（也不确切知道它将位于何处），但指示您的构建环境使用 DLL 应该不会太困难。

FWIW，`Tcl_Init`总是返回`TCL_OK`(ie, 0) 或`TCL_ERROR`(ie, 1)。如果您不打算在基本初始化后安装自己的命令和功能，则可以直接从 AppInit 函数返回值。

# castle-windsor - 使用 Castle Windsor 拦截具体实现（而不是服务）

> ID：15809701
> 
> 赞同：2
> 
> 时间：2013-04-04T11:20:02.260
> 
> 标签：castle-windsor, interceptor

我在 Castle Windsor 中尝试拦截，并注意到拦截器似乎是作为我的服务接口的装饰器创建的。

换句话说，如果我有一个接口“ISomethingDoer”和一个具体的“ConcreteSomethingDoer”，代理会实现 ISomethingDoer，但不会从 ConcreteSomethingDoer 继承。

这很好，毫无疑问是设计使然，但我想知道我是否可以拦截公共接口不知道的具体类中的受保护虚拟方法。我这样做是为了添加日志记录支持，但我可能想记录一个类的一些特定内部细节。

在我有点缺乏想象力的测试用例中，我有这个：

```
public interface ISomethingDoer
{
    void DoSomething(int Count);
}

[Loggable]
public class ConcreteSomethingDoer : ISomethingDoer
{
    public void DoSomething(int Count)
    {
        for (var A = 0; A < Count; A++)
        {
            DoThisThing(A);
        }
    }

    [Loggable]
    protected virtual void DoThisThing(int A)
    {
        ("Doing a thing with " + A.ToString()).Dump();
    }
} 
```

所以我想做的是记录对“DoThisThing”的调用，即使它不是接口的一部分。

我已经设法让它在 Autofac 中工作。（我在这里创建了一个 Linqpad 脚本：http://share.linqpad.net/frn5a2.linq [）](http://share.linqpad.net/frn5a2.linq)但我在温莎城堡苦苦挣扎（见[http://share.linqpad.net/wn7877.linq](http://share.linqpad.net/wn7877.linq)）

在这两种情况下，我的拦截器都是相同的，如下所示：

```
public class Logger : IInterceptor
{
    public void Intercept(IInvocation Invocation)
    {
        String.Format("Calling method {0} on type {1} with parameters {2}",
            Invocation.Method.Name,
            Invocation.InvocationTarget.GetType().Name,
            String.Join(", ", Invocation.Arguments.Select(a => (a ?? "*null*").ToString()).ToArray())).Dump();
            Invocation.Proceed();
        "Done".Dump();
    }
} 
```

我真正想做的是说“任何具有 [Loggable] 属性的类，都应该使用日志拦截器”。在 Autofac 示例中，我专门在注册中附加了一个记录器，而对于 Castle，我使用的是 IModelInterceptorsSelector，如下所示：

```
public class LoggerInterceptorSelector : IModelInterceptorsSelector
{
    public bool HasInterceptors(ComponentModel Model)
    {
        return Model.Implementation.IsDefined(typeof(LoggableAttribute), true);
    }

    public InterceptorReference[] SelectInterceptors(ComponentModel Model, InterceptorReference[] Interceptors)
    {   
        return new[]
        {       
            InterceptorReference.ForType<Logger>()
        };
    }
} 
```

最后，执行这一切的代码是：

```
 var Container = new WindsorContainer();

    Container.Register(
        Component.For<Logger>().LifeStyle.Transient
    );

    Container.Kernel.ProxyFactory.AddInterceptorSelector(new LoggerInterceptorSelector());

    Container.Register(
        Component.For<ISomethingDoer>()
        .ImplementedBy<ConcreteSomethingDoer>()
        .LifeStyle.Transient
    );

    var Doer = Container.Resolve<ISomethingDoer>();
    Doer.DoSomething(5); 
```

运行时，我希望每次调用该方法时都会看到“使用参数 x 调用方法 DoThisThing”。相反，我只记录了对 DoSomething 的调用。

我可以看到温莎城堡为什么要这样做，但我想知道是否有办法调整行为？

（作为旁注，我不想使用 Windsor 自己的拦截器属性，因为我不想将依赖项引入到我的组合根之外的 Castle。）

我已经尝试专门解决 ConcreteSomethingDoer 并且这有效，但如果我正在解决 ISomethingDoer 则不行。

为这篇长文道歉，也很抱歉，因为我对温莎城堡很陌生！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:34:39.467

我可以像这样注册：

```
Container.Register(
    Component.For<ISomethingDoer, ConcreteSomethingDoer>()
    .ImplementedBy<ConcreteSomethingDoer>()
    .LifeStyle.Transient
); 
```

这应该通过从 ConcreteSomethingDoer 派生来创建一个类代理。但是，这不适用于动态拦截器。但是，您可能可以通过创建一个在需要时注册拦截器的设施来解决这个问题。

# django - Django logout_then_login 无法重定向到正确的登录页面

> ID：15809702
> 
> 赞同：1
> 
> 时间：2013-04-04T11:20:08.687
> 
> 标签：django, django-authentication

在一个Django项目中，我的主页视图如下：

```
@login_required
def home(request):
    return render(request, 'home.html') 
```

因此，当有人尝试访问主页时，如果没有人登录，他们会自动进入登录表单。这是直接来自 Django 文档的表单：

```
{% extends "base.html" %}

{% block content %}

{% if form.errors %}
<p>Your username and password didn't match. Please try again.</p>
{% endif %}

<form method="post" action="{% url django.contrib.auth.views.login %}">
{% csrf_token %}
<table>
<tr>
    <td>{{ form.username.label_tag }}</td>
    <td>{{ form.username }}</td>
</tr>
<tr>
    <td>{{ form.password.label_tag }}</td>
    <td>{{ form.password }}</td>
</tr>
</table>

<input type="submit" value="login" />
<input type="hidden" name="next" value="{{ next }}" />
</form>

{% endblock %} 
```

一旦有人登录表单，他们就会被带到如下所示的主页：

```
{% extends "base.html" %}

{% block content %}

<form method="post" action="{% url django.contrib.auth.views.logout_then_login %}">
{% csrf_token %}
<input type="submit" value="logout" />
</form>

<h1>Home Page</h1>

{% endblock %} 
```

如您所见，我尝试创建一个注销按钮，该按钮将用户带回登录页面。但是，我注意到当第一次到达登录页面时，URL 以 结尾`?next=/`，而一旦我“注销”，我被带到的“登录”页面缺少一个 URL `?next=/`。当我尝试使用该页面登录时，我被发送到`/accounts/profile/`不存在的 URL（而不是正确的主页 URL）。我猜我在 中做错了什么`urls.py`，但我不确定是什么：

```
(r'^accounts/login/$', 'django.contrib.auth.views.login'),
(r'^accounts/logout/$', 'django.contrib.auth.views.logout_then_login'), 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:26:56.073

你应该告诉 Django 在它没有收到`next`参数时它应该将访问者重定向到哪里。这是通过`LOGIN_REDIRECT_URL`设置完成的，如[Django 文档](https://docs.djangoproject.com/en/dev/ref/settings/#login-redirect-url)中所述。

# android - Android列表 - 列表标题中的编辑文本

> ID：15809703
> 
> 赞同：2
> 
> 时间：2013-04-04T11:20:10.643
> 
> 标签：android, focus, xamarin.android, android-edittext, listactivity

我在 Monodroid 中有一个列表，其中有一个带有 EditText 的标题。问题是 EditText 没有正确获得焦点。下面是它的工作原理：

1.  如果您触摸 EditText，键盘会正确出现，但如果您按任意键，则不会发生任何事情。
2.  使用返回按钮隐藏键盘
3.  如果您再次触摸 EditText，它会正常工作

我尝试调试它，第一次`FocusChange`事件触发两次，第一次是`HasFocus = true`，第二次是`HasFocus = false`.

任何建议我做错了什么？

**更新**

这是解决我的问题的方法：

我在 XML 中将其设置为我的 ListView：

```
android:descendantFocusability="afterDescendants" 
```

并在代码中对我的 ListView：

```
ListView.ItemsCanFocus = true; 
```

这是我的EditText：

```
android:focusableInTouchMode="true"
android:focusable="true" 
```

瞧，它就像一个魅力。谢谢布拉德利！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:48:17.000

我建议将 EditText 放在布局 xml 中的 ListView 上方，而不是将其添加到标题中。

我以前遇到过这种情况，并且永远无法从单一解决方案中获得 100% 的可靠性。如果强力方法是唯一的解决方案，请尝试 ListView 对象上以下属性的不同组合：DescendantFocusability、ItemsCanFocus、Focusable。

# msbuild - 无法为指定的 URI 添加部分，因为它已经在包中

> ID：15809704
> 
> 赞同：12
> 
> 时间：2013-04-04T11:20:12.730
> 
> 标签：msbuild, teamcity, nuget, nuget-package, octopus-deploy

我在 teamcity 中使用 NUGET Pack 来构建一个包。但它正在创建以下错误。我正在使用 nuget teamcity 版本 2.2.1。

```
Step 2/2: Build Package (NuGet Pack) (14s)

[12:10:40][Step 2/2] Cleaning Z:\hgbuilds\IT\Build\packages

[12:10:40][Step 2/2] pack: Create NuGet package from UI\UI.Tour\UI.Tour.Web\UI.Tour.Web.csproj (14s)

[12:10:40][pack] NuGet command: C:\BuildAgent\tools\NuGet.CommandLine.2.2.1.nupkg\tools\NuGet.exe pack Z:\hgbuilds\IT\UI\UI.Tour\UI.Tour.Web\Calrom.UI.InclusiveTour.Web.csproj -OutputDirectory Z:\hgbuilds\IT\Build\packages -BasePath Z:\hgbuilds\IT -Verbose -Version 1.0.0.7 -Symbols -Properties Configuration=Deploy-Test

[12:10:40][pack] Starting: C:\BuildAgent\temp\agentTmp\custom_script2086270793558421822.cmd

[12:10:40][pack] in directory: Z:\hgbuilds\IT

[12:10:45][pack] WARNING: Option 'Verbose' has been deprecated. Use 'Verbosity' instead.

[12:10:45][pack] Attempting to build package from 'UI.Tour.Web.csproj'.

[12:10:45][pack] Packing files from 'Z:\hgbuilds\IT\UI\UI.Tour\UI.Tour.Web\bin'.

[12:10:46][pack] WARNING: Description was not specified. Using 'Description'.

[12:10:48][pack] content

[12:10:54][pack] Cannot add part for the specified URI because it is already in the package.

[12:10:54][pack] Process exited with code 1

[12:10:54][Step 2/2] Step Build Package (NuGet Pack) failed 
```

请指导我在这里缺少的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-06-04T06:18:00.507

我有同样的错误，但 csproj 文件中没有问题。我正在使用打字稿并且不小心签入了 .js 文件。所以在运行时正在生成另一个 js 文件，因此每个 js 文件中添加了两个。

我通过查看团队城市构建日志并查找重复项找到了它。因为他们是“不复制”，所以简单的 msbuild 没有问题，但是当我们刚刚切换到使用 Octopack 时，在解决方案时无法添加多个.....

**您可以找到罪魁祸首（打字稿或其他）**，因为它将在“尝试创建行”之后首先出现（可能有很多，但一次找到它们可能比手动操作更容易） ![在此处输入图像描述](https://i.stack.imgur.com/OBHJp.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-09T14:23:04.457

编辑项目文件并确保您没有重复的参考包含或重复的内容包含。我的问题是我有...

```
 <Reference Include="SCS.PickList, Version=1.7.0.0, Culture=neutral, processorArchitecture=MSIL">
  <SpecificVersion>False</SpecificVersion>
  <HintPath>Bin\SCS.PickList.dll</HintPath>
</Reference> 
```

和

```
<Content Include="Bin\SCS.PickList.dll" /> 
```

一旦我删除了内容，它就起作用了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-26T01:26:20.263

一个可能的问题是 Octopack 实际上是区分大小写的。在我的情况下，VS Project 引用了名称为小写字母的文件， [例如](http://i.stack.imgur.com/mRvnw.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-05T07:26:28.010

在我的 .nuspec 文件中，我的行相当于：

```
<file src="Source\MyCompany.ProjectA\**\*.cs" target="src" />
<file src="Source\MyCompany.ProjectB\**\*.cs" target="src" /> 
```

由于**AssemblyInfo.cs**文件在两个项目中，我得到了错误。

（这是为了启用 NuGet 符号包的创建。）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-31T22:25:10.130

对我来说，这是因为我的文件没有扩展名。

```
<file src=".\LICENSE" target="" />
<file src=".\NOTICE" target="" /> 
```

我的解决方案是在文件末尾添加一个通配符：

```
<file src=".\LICENSE*" target="" />
<file src=".\NOTICE*" target="" /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T12:53:12.303

在您的 nuspec 文件中是否指定了文件节点？

```
<files>
    <file src="the_dll_for_your_csproj"/>
</files> 
```

如果是这样，您是否可能已包含（显式或通过通配符）您尝试构建的 csproj 的 dll？

# python - 文件中的模式匹配

> ID：15809708
> 
> 赞同：1
> 
> 时间：2013-04-04T11:20:23.067
> 
> 标签：python, full-text-search

我正在尝试在文件中查找多个匹配项。我使用以下代码：

```
f = open('/home/evi.nastou/Documenten/filename')
text = f.read()
#print text
urls = re.findall(r"_8o _8r lfloat\" href=\"(.+?)\" onclick=", text)
for url in urls:
    print url.replace('\\','') 
```

但它不返回任何结果。

另一方面，当我在变量中传递整个文本时，它确实找到了模式。有人可以帮帮我吗？

ps 文件中的部分文本：

> for (;;);{"__ar":1,"payload":null,"domops":[["replace","#detailedsearch_more_pager",f‌​alse,{"__html":"\u003Cdiv>\u003Cdiv 类=\"mbm detailedsearch_result\">\u003Cdiv class=\"clearfix\">\u003Ca class=\"_8o _8r lfloat\" href=\"http://www.facebook.com/name\" onclick=\" if (event.button == 0) { search_logged_ajax({"ab":"T_TA_RANKING_1","cururl&‌​quot;:"http:\/\/www.facebook.com\\

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:38:06.193

问题似乎是你的正则表达式。

使用这个：

```
r'href\s*=\s*(.+)\s+onclick\s*=' 
```

代码：

```
import re
text = open('test.txt').read() # contains your string

urls = re.findall(r'href\s*=\s*(.+?)\s+onclick\s*=', text)
for url in urls:
    print url.replace('\\','') 
```

输出：

```
"http://www.facebook.com/name" 
```

我的正则表达式的解释：

```
href    # match href
\s*     # match 0 or more spaces
=       # match =
\s*     # match 0 or more spaces
(.+?)   # match any character (non - greedy)
\s+     # match 1 or more spaces
onclick # match onclick
\s*     # match 0 or more spaces
=       # match = 
```

# php - mysql_fetch_assoc()：提供的参数不是有效的 MySQL

> ID：15809709
> 
> 赞同：0
> 
> 时间：2013-04-04T11:20:34.947
> 
> 标签：php, android, mysql

我创建了一个 android 应用程序，通过在 php 中使用这个函数，我
在数据库 mysql 中创建了一个新用户。

```
function signUp($sName, $sMobile, $sAddress, $sEmail, $sPwd)
    {
    $sql = "insert into customers (name,mobile,address,email,pwd) values ('$sName','$sMobile','$sAddress','$sEmail','$sPwd')";
    $run = $this->query($sql);
    if ($this->result <= 0) {
        return false;
    } else {
        return $this->json('DATA');
    }
} 
```

使用以下函数，我在数据库中查询并以 json 格式返回响应

```
function query($sql){
$query = mysql_query($sql) or die(mysql_error());
while ($row = mysql_fetch_assoc($query)){
$this->result[] = $row;
}
return $this;
} 
```

但是我得到的响应有一个错误我尝试使用 surpessing the warnings

```
@mysql_fetch_assoc($query) 
```

它在浏览器中给出了正确的响应，但 android 得到 null 作为响应

错误：

> 警告：mysql_fetch_assoc()：提供的参数不是有效的 MySQL 结果资源
> 
> 警告：无法修改标头信息 - 标头已由（输出开始于

需要帮助 PHP 新手。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:23:53.793

**插入查询不返回结果集**

只有**SELECT**查询返回结果集

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:24:25.167

好吧，问题是您的查询是 INSERT 查询，并且根据 PHP 手册，在成功查询中它返回 true，而不是 mysql 对象。所以函数“mysql_fetch_assoc($query)”不能运行，因为它请求mysql对象作为参数不仅是TRUE。
另外，我建议开始使用 MySQLi 或 PDO 扩展，而不是 mysql_* 函数。

> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE。
> 
> 对于其他类型的 SQL 语句，INSERT、UPDATE、DELETE、DROP 等，mysql_query() 在成功时返回 TRUE，在错误时返回 FALSE。
> 
> 返回的结果资源应该传递给 mysql_fetch_array() 和其他处理结果表的函数，以访问返回的数据。
> 
> 使用 mysql_num_rows() 找出 SELECT 语句返回了多少行，或使用 mysql_affected_rows() 找出有多少行受到 DELETE、INSERT、REPLACE 或 UPDATE 语句的影响。
> 
> 如果用户无权访问查询引用的表，mysql_query() 也会失败并返回 FALSE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T11:45:21.540

你不能得到结果

```
插入查询
```

但您可以通过以下方式获取当前插入用户的 ID

```
mysql_insert_id()
```

然后您可以针对该 ID 使用“选择查询”。

# java - Log4J - 测试日志级别有用吗？

> ID：15809710
> 
> 赞同：2
> 
> 时间：2013-04-04T11:20:36.117
> 
> 标签：java, log4j

我正在进行代码审查，我希望您能想到一小段代码：

```
if(logger.isDebugEnabled())
{
    logger.debug("debug log");
} 
```

进行测试有真正的理由/好处`if(logger.isDebugEnabled())`吗？

为什么不直接写`logger.debug("debug log");`而不测试？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T11:24:22.647

它对您提供的示例没有用。但如果您在日志行中包含其他数据，它会很有用，例如：

```
logger.debug("Info: " + someObject.getSomeInformation()); 
```

请注意，该方法`getSomeInformation`将在调用`someObject`之前`logger.debug`调用，无论级别是否为调试。此外，还将执行字符串连接。为了避免方法调用和字符串连接的成本，您可以`if`在您的问题中将其放在一个like 中。

# javascript - JavaScript 语法疯狂 - 任何人都知道为什么会发生这种情况

> ID：15809711
> 
> 赞同：3
> 
> 时间：2013-04-04T11:20:44.120
> 
> 标签：javascript, syntax

我有点迷失为什么下面的代码会按照它的方式做。

对于以下表达式，我希望结果为 1，因为在文字的右侧我们实际上有一个 obj。

表达：

```
> { a : 1 }.a 
```

结果铬：

```
Syntax error: Unexpect token . 
```

结果 NodeJS

```
1 
```

（另一个问题：为什么nodejs和chrome在这个（以及以下）上有所不同）

虽然表达式本身存在语法错误，但将其分配给变量仍然有效。

```
> var x = { a : 1 }.a; x; 
```

结果：

```
1 
```

现在在表达式周围使用 eval 在 Chrome 和 NodeJS 中确实有效

```
> eval({ a : 1 }.a) 
```

结果 Chrome 和 Node

```
1 
```

现在使用 eval 和基于字符串的表达式，*这两个*平台都不起作用

> eval("{ a : 1 }.a")

结果铬：

```
SyntaxError: Unexpected token > 
```

结果NodeJS：

```
... //REPL waits more code 
```

最后括号解决了这一切，但为什么？

```
> eval("({ a : 1 }.a)") 
```

结果：

```
Works everywhere 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T11:27:58.647

`eval`接受一个字符串，因此调用`eval({ a : 1 }.a)`与`eval("1")`.

在语句上下文中，`{}`分隔块，而不是对象文字。您可以使用`()`作为分组运算符进入表达式上下文。

所以：

```
{ a : 1 }.a 
```

实际上是块、标签、数字文字和点访问：

```
{
   a:  1
}

.a 
```

Node REPL 一开始实际上是在表达式上下文中运行的，但这很不寻常。他们像运行您的代码一样`eval("(" + replInput + ")")`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:31:39.740

Try`({ a : 1 }).a` 这也适用于任何地方，因为圆括号中的代码首先执行，然后`.a`提取该对象。

```
`{ a:  1 }` 
```

只是一个块，不会返回任何内容供`.`操作员处理，但将其包含在`()`其中会返回一个`.a`已提取的对象

# wpf - 在 MVVM 中异步添加选项卡

> ID：15809712
> 
> 赞同：2
> 
> 时间：2013-04-04T11:20:45.150
> 
> 标签：wpf, mvvm, cinch

我正在使用 Sasha Barber 的 Cinch Framework for MVVM 在 WPF 中开发一个应用程序。此应用程序显示两个选项卡。MainWindowViewModel 启动了一个后台工作程序，用于侦听传入的套接字连接。如果客户端通过套接字连接连接到应用程序，则应用程序应该显示另一个选项卡。我将一切设置得很好，但是当我尝试将新的 Workspace 添加到 Views 集合中时，我收到一个错误，指出这只能在调度程序线程中完成，但 MainWindowViewModel 中没有调度程序。所以这是我的问题：如何将此工作区添加到视图集合中？

问候并感谢克努特曼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:43:00.680

您可以将具有以下实现的属性添加到 VM 基类。

```
public class ViewModelBase : ....
{
    protected Dispatcher Dispatcher
    {
        get { return Application.Current.Dispatcher; }
    }
} 
```

现在您的 VM 中有一个调度程序。欲了解更多信息，请查看[此处](http://msdn.microsoft.com/en-us/library/system.windows.application.aspx)。或者您只需`Application.Current.Dispatcher`在需要的地方使用。

# powershell - 如何将带有空格的参数作为数组传递给Powershell中的RoboCopy？

> ID：15809719
> 
> 赞同：6
> 
> 时间：2013-04-04T11:21:05.273
> 
> 标签：powershell, robocopy

我正在编写一个脚本，该脚本需要根据用户输入动态传递 RoboCopy 开关，因此使用`array`似乎是最好的选择。但是，在使用我指定`/XF`具有空格和值的参数时，我看到了以下问题。

**这按预期工作：**

```
RoboCopy C:\Dir1 C:\Dir2 /NP /NFL /NS /NDL /NJH /NJS /XF *.config 
```

**这按预期工作：**

```
$Switches = @("/NP", "/NFL", "/NS", "/NDL", "/NJH", "/NJS", "/E")

RoboCopy C:\Dir1 C:\Dir2 $Switches 
```

**这抛出`ERROR : Invalid Parameter #10 : "/XF *.config"`：**

```
$Switches = @("/NP", "/NFL", "/NS", "/NDL", "/NJH", "/NJS", "/E", "/XF *.config")

RoboCopy C:\Dir1 C:\Dir2 $Switches 
```

我尝试了一些方法，例如使用带`/XF`参数的引号，但没有成功。任何提示/帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T11:31:42.300

你能试试这个吗，我无法测试，但让我知道..：

```
$Switches = @("/NP", "/NFL", "/NS", "/NDL", "/NJH", "/NJS", "/E", "/XF", "*.config") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-13T09:57:10.493

我的变体（更多 XD/XF 参数）：

```
$RobocopyParams = @("/NP", "/NFL", "/NS", "/NDL", "/NJH", "/NJS", "/E")
$XD = @("Cookies", "His6", "SendTo", "Temp", "Temporary Internet Files", "Windows")
$XF = @("*.pif", "$UserName.INI", "$UserName.OPS", "$UserName.INI.*")
robocopy.exe @params /XD @XD /XF @XF 
```

# django - 从管理站点创建另一个对象时，如何动态创建身份验证组？

> ID：15809726
> 
> 赞同：3
> 
> 时间：2013-04-04T11:21:16.440
> 
> 标签：django, object-model

*   我有一个创建某种对象的模型（比如说课程）。
*   我从管理前端添加新对象

当我创建一个对象时，我想自动创建一个具有特定名称的Auth Group（不重要，但组的名称必须与创建的对象字段相同）。

是否可以？我已经阅读了一些有关管理员操作的内容，但没有发现任何明确的内容。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T12:20:08.137

您可以通过执行以下操作轻松创建组：

```
from django.contrib.auth.models import Group

newgroup = Group.objects.create(name=course.name) 
```

[您可以像这样](https://docs.djangoproject.com/en/dev/ref/models/instances/#creating-objects)将此代码放入您的模型中（或者创建一个[自定义模型管理器](https://docs.djangoproject.com/en/dev/topics/db/managers/)）：

```
from django.contrib.auth.models import User, Group

class Course(models.Model):
    name = models.CharField(max_length=100)

    @classmethod
    def create(course, name):
        newcourse = course(title=name)

        # create the group for the course
        newgroup = Group.objects.create(name=newcourse.name)

        return newcourse 
```

然后，您可以创建您的课程：

```
course = Course.create(name="Django: The Web framework for perfectionists with deadlines") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T07:48:54.487

丹尼尔这似乎是一个很好的近似值。我已经管理了一个解决方案，并在 admin.py 中覆盖了模型 CourseAdmin 的方法 save_model。非常感谢，您的实现看起来更干净！

这是我所做的：

----- 管理员.py -----

```
from django.contrib.auth.models import Group

class CourseAdmin(admin.ModelAdmin):
    def save_model(self, request, obj, form, change):
        g = Group(name=obj.code)
        g.save()
        obj.save() # Without this line the object is not saved into the Course model!

admin.site.register(CourseAdmin) 
```

# cocoa-touch - 具有自定义“从中心缩放”的 ModalTransitionStyle 的 PresentViewController

> ID：15809727
> 
> 赞同：2
> 
> 时间：2013-04-04T11:21:18.880
> 
> 标签：cocoa-touch, uiviewcontroller, uiviewanimation, uiviewanimationtransition

我正在尝试实现呈现过渡样式的自定义视图。这是我的代码：

```
[myViewController setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
[self presentViewController:myViewController animated:YES completion:^(void){}]; 
```

我想在呈现视图时实现“从中心缩放”效果。我用 JQuery UI 做了一个想要的效果演示：http: [//jsfiddle.net/c7ztP/](http://jsfiddle.net/c7ztP/)

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-09T05:59:14.300

我会做的是以下

从启动视图控制器我会这样做

```
// OriginalViewController.h
newViewcontroller.view.transform = CGAffineTransformScale(CGAffineTransformIdentity, 0.0f, 0.0f);
[self presentViewController:newViewController animated:NO completion:nil]; 
```

在接收视图控制器上，我会这样做

```
-(void)viewDidLoad {
   [UIView animateWithDuration:0.3f animations:^{
    self.view.transform = CGAffineTransformScale(CGAffineTransformIdentity, 1.0f, 1,0f);
   }];
} 
```

为此，您需要`QuartzCore.framework`. 另外为了让它更甜，我会在完整的 alpha 动画中添加零 alpha，因为它看起来更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T11:38:28.940

您应该使用此动画效果编写自己的控制器。
看看这个控件：[KGModal](http://www.cocoacontrols.com/controls/kgmodal)和[UAModalPanel](http://www.cocoacontrols.com/controls/uamodalpanel)。
检查他们的源代码以获取动画示例。重写此代码以支持全屏视图并不难。

# c# - 使用 newtownsoft.json 解析 monotouch youtube json

> ID：15809728
> 
> 赞同：0
> 
> 时间：2013-04-04T11:21:24.227
> 
> 标签：c#, xamarin.ios, youtube-api, monodevelop

我一直在尝试使用 MonoDevelop/MonoTouch 中的 Newtownsoft.JSON 引用解析 youtube 请求，它运行请求但发回一个空列表。关于如何解析这个以及处理我认为导致主要问题的嵌套标签的任何建议？

嵌套标签的基本结构：

```
"id": "",
"uploaded": "",
"updated": "",
"uploader": "",
"category": "",
"title": "",
"description": "",
"thumbnail": {
    "sqDefault": "",
    "hqDefault": ""
} 
```

公共静态无效GetVideos（）{尝试{

```
 lock (locker)
            {
                VideoDataCallStarted(null, EventArgs.Empty);

                string result = GetData(APIConstants.apiGetYoutube);

                if (result != "")
                {
                    var j = JsonConvert.DeserializeObject<DataStores.VideosCollection>(result);

                    VideoDataCallComplete(j, EventArgs.Empty);
                }
                else
                {
                    Console.WriteLine("APIInterface.GetVideos() Returned Null Results");
                    VideoDataCallComplete(null, EventArgs.Empty);
                }
            }

        } catch (Exception ex) {
            Console.WriteLine ("Exception in APIInterface.GetVideos() : " + ex.Message);
            VideoDataCallComplete(null, EventArgs.Empty);
        }
    } 
```

# wpf - WPF 工具包属性框不显示可为空的枚举

> ID：15809730
> 
> 赞同：3
> 
> 时间：2013-04-04T11:21:28.040
> 
> 标签：wpf, enums, nullable, wpftoolkit

我目前正在使用扩展的 WPF 工具包，并且我正在使用 Propertybox。此框显示绑定元素的所有属性。虽然这很好用，但有一个问题。我正在使用 Nullable... 所以它不能正确显示这个枚举（它只是给出一个文本框）。如果我将枚举更改为普通枚举（不可为空），那么它会在组合框中正确显示项目。

为了解决这个问题，我尝试了文档中描述的 IItemsSource 接口，但这也不允许我添加“null”值。

我知道我可以通过在我的枚举列表中添加一个假的“null”值来解决这个问题，但我想避免这种情况。这里有谁知道我怎样才能正确地使我的可空显示？

亲切的问候汤姆

控制文档： [https ://wpftoolkit.codeplex.com/wikipage?title=PropertyGrid](https://wpftoolkit.codeplex.com/wikipage?title=PropertyGrid)

* * *

更新解决方案：我通过使用不同的控件“解决”了它。[http://www.codeproject.com/Articles/87715/Native-WPF-4-PropertyGrid](http://www.codeproject.com/Articles/87715/Native-WPF-4-PropertyGrid)。该网格开箱即用地支持它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:29:26.690

解决方案：我通过使用不同的控件“解决”了它。[https://github.com/xceedsoftware/wpftoolkit](https://github.com/xceedsoftware/wpftoolkit)。此网格支持开箱即用的 Nullable，并且具有一些您想要显示的属性的过滤功能，这些功能未包含在 WPF 工具包的社区版中。

2020 年更新：添加了指向当前网页的链接。

# ruby - 从记事本++运行IRB

> ID：15809741
> 
> 赞同：1
> 
> 时间：2013-04-04T11:22:09.890
> 
> 标签：ruby, notepad++, irb

从stackoverflow帖子之一[`RubyPrompt`](https://stackoverflow.com/questions/1760115/ruby-prompt-when-stdin-isnt-a-terminal-for-notepad-explicitely)：

我已经看到我们也可以`IRB`从 Notepad++ 运行。我正在谈论的上述帖子的最后一个答案。

任何人都可以帮助我了解`IRB`从 Notepad++ 运行的配置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:57:10.153

转到`run`菜单并选择`Run...`

选择标记为的按钮`...`并找到位于 的`irb.bat`文件`path_to_ruby/bin/irb.bat`。选择`open`，它将在文本字段中显示 irb 的路径。

在文本字段中的 irb 路径之后，输入`-r "$(FULL_CURRENT_PATH)"`. 最终文本字段应类似于：

```
C:\Ruby200\bin\irb.bat -r "$(FULL_CURRENT_PATH)" 
```

选择`Save...`，您可以为此运行设置快捷方式。我`F6`个人选择的。

现在，编写您的 Ruby 文件并点击`F6`或设置为快捷方式的任何内容。然后，IRb 将在您当前的 Ruby 文件加载到环境中时启动。

[Tutorials Point](http://www.tutorialspoint.com/ruby/interactive_ruby.htm)和[Ruby Central](http://www.rubycentral.org/pickaxe/irb.html)提供了一些附加参数列表，您可以将这些参数传递给 IRb，这些参数也可以在上述示例中使用。

**编辑：**

如果您对在 Notepad++ 中运行 IRb 控制台更感兴趣，您应该查看[NppExec](http://sourceforge.net/projects/npp-plugins/files/NppExec/)插件。[在Raza Sayed 的博客](http://razasayed.wordpress.com/2009/02/22/launch-your-program-from-within-notepad/)上有一篇很好的博客文章，介绍了如何让它为 Python 工作。只需将 Python 换成 IRb。

可以在[他们的 wiki上找到一个不错的其他 Notepad++ 插件列表](http://sourceforge.net/apps/mediawiki/notepad-plus/index.php?title=Plugin_Central)

# python - Django 错误：ValueError

> ID：15809745
> 
> 赞同：1
> 
> 时间：2013-04-04T11:22:36.203
> 
> 标签：python, django, django-models, django-forms, django-views

我有两个模型，我正在做一个自定义表单，这样我就可以查看表单并将其从我的 html 保存到数据库中。但是当我尝试保存时，我得到了这个错误。

追溯

```
Environment:

Request Method: POST
Request URL: http://127.0.0.1:8008/

Django Version: 1.4
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'SecondBlog.blog',
 'django.contrib.admin',
 'django.contrib.admindocs')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "c:\Python27\lib\site-packages\django\core\handlers\base.py" in get_response
  111\.                         response = callback(request, *callback_args,     **callback_kwargs)
File "f:\apt3\SecondBlog\SecondBlog\blog\views.py" in home
  10\.         if form.is_valid():
File "c:\Python27\lib\site-packages\django\forms\forms.py" in is_valid
  124\.         return self.is_bound and not bool(self.errors)
File "c:\Python27\lib\site-packages\django\forms\forms.py" in _get_errors
  115\.             self.full_clean()
File "c:\Python27\lib\site-packages\django\forms\forms.py" in full_clean
  272\.         self._post_clean()
File "c:\Python27\lib\site-packages\django\forms\models.py" in _post_clean
  309\.         self.instance = construct_instance(self, self.instance, opts.fields,     opts.exclude)
File "c:\Python27\lib\site-packages\django\forms\models.py" in construct_instance
  51\.             f.save_form_data(instance, cleaned_data[f.name])
File "c:\Python27\lib\site-packages\django\db\models\fields\__init__.py" in save_form_data
  454\.         setattr(instance, self.name, data)
File "c:\Python27\lib\site-packages\django\db\models\fields\related.py" in __set__
  366\.                                  self.field.name,     self.field.rel.to._meta.object_name))

Exception Type: ValueError at /
Exception Value: Cannot assign "u'Sasa'": "Book.author" must be a "Author" instance. 
```

模型.py

```
class Author(models.Model):
    name  = models.CharField(max_length = 30)

    class Book(models.Model):
    author  = models.ForeignKey(Author)
    title   = models.CharField(max_length = 100)

    def __unicode__(self):
        return '%s' % (self.title) 
```

表格.py

```
class CustomForm(ModelForm):
    author = forms.CharField()
    def save(self, commit=True):
        author = Author.objects.get_or_create(name=self.cleaned_data['author'])

        instance = super(CustomForm, self).save(commit=commit)
        instance.author = author
        if commit:
            instance.save()
        return instance

    class Meta:
        model = Book
        fields = ('author','title',) 
```

视图.py

```
def home(request):
    if request.method == 'POST':
        form = CustomForm(request.POST)
        if form.is_valid():

            print "all validated"
            form.save()
            return HttpResponseRedirect('index.html')
        else:
            print "failed"
    else:
        form = CustomForm()

    variables = RequestContext(request, {'form' : form})
    return render_to_response('index.html', variables) 
```

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:52:49.147

问题不在于保存，而在于验证您的表单。基本上，您为 Book 创建模型表单的自定义版本，其中包含两个字段`author`和`title`. 默认情况下，该`author`字段将显示为作者类型的参考浏览小部件。

但是，您所做的`author = forms.CharField()`是告诉表单显示一个简单的文本输入字段而不是作者参考选择器。当它试图验证这一点时..它不能。

您需要做的是`author`在验证之前处理值，您可以在`clean()`函数中执行此操作，您可以将其添加到您的`CustomForm`

```
def clean(self):
    self.cleaned_data['author'] = Author.objects.get_or_create(name=self.cleaned_data['author'])
    return self.cleaned_data 
```

一个非常相似的问题是[如何更改方法 is_valid() 中的表单字段](https://stackoverflow.com/questions/8627165/how-to-change-form-field-in-method-is-valid)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T11:32:03.057

我尝试了您的代码并进行了一些测试，无论我做什么，我总是会遇到该错误。因为在作者创建之前，书先执行，导致实例错误。

我修改了你的代码。我删除了您的保存方法并将其更改为现在有效的清洁方法。

```
class CustomForm(forms.ModelForm):
    author = forms.CharField()

    def clean(self):
        cleaned_data = super(CustomForm, self).clean()
        author = cleaned_data.get("author")

        if not author:
            raise forms.ValidationError("Please enter an author")

        data = Author.objects.create(name=author)

        cleaned_data['author'] = data

        return cleaned_data

    class Meta:
        model = Book
        fields = ('author','title',) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T13:00:38.580

问题是它甚至没有访问设置作者实例的代码，因为超类的保存方法使用文本字段将其设置在那里，这是错误发生的地方。

您可以尝试使用在调用 super 之前`pop`删除该`author`值`cleaned_data`，或者用 Author 实例替换该值。

**例如编辑**

```
def save(self, commit=True):
    author = Author.objects.get_or_create(name=self.cleaned_data.pop('author'))

    instance = super(CustomForm, self).save(commit=commit) 
```

# android - 如何将带有通知的数据传递给主活动

> ID：15809747
> 
> 赞同：0
> 
> 时间：2013-04-04T11:22:51.980
> 
> 标签：android, cordova, android-notifications

我正在为我的 android 应用程序使用 phonegap 2.5.0。在此我有意启用通知。有一些额外数据的意图。通知代码如下，

```
Notification notification = new Notification(icon, contentTitle, when);
// Vibrate if vibrate is enabled
    notification.defaults |= Notification.DEFAULT_VIBRATE;

    notification.flags |= Notification.FLAG_AUTO_CANCEL;
    Intent notificationIntent = new Intent(this, MainActivity.class);
    notificationIntent.putExtra("notificationType", "updateAvailable");
    notificationIntent.putExtra("updateUrl", updateUrl);
    notificationIntent.putExtra("updateVersion", updateVersion);
    notificationIntent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_CLEAR_TOP);
int requestID = (int) System.currentTimeMillis();
    PendingIntent contentIntent = PendingIntent.getActivity(this, requestID, notificationIntent, 0);
    //PendingIntent contentIntent = PendingIntent.getActivity(this, requestID, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT);
    notification.setLatestEventInfo(this, contentTitle, contentText, contentIntent);

    NotificationManager nm = (NotificationManager)this.getSystemService(Context.NOTIFICATION_SERVICE);
    nm.notify(1, notification); 
```

上面生成的通知调用了 android 应用的 mainactivity。MainActivity 脚本如下，

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.init();

    Intent intent = getIntent();
    Bundle extras = intent.getExtras();
    String notificationType = intent.getStringExtra("notificationType");

    if(extras != null)
    {
        if(extras.getString("notificationType").equals("updateAvailable"))
        {
            String updateUrl = extras.getString("updateUrl");
            String updateVersion = extras.getString("updateVersion");
            super.loadUrl("file:///android_asset/www/update.html?updateVersion="+updateVersion+"&updateUrl="+updateUrl);
        }else
            startMyApp();
    }else
    {
        startMyApp();
    }           
} 
```

startMyApp 函数具有启动应用程序的代码（仅在使用应用程序图标直接打开应用程序时调用）。

但是代码不起作用。应用程序不工作（即单击应用程序图标时未打开应用程序） 不幸停止显示应用程序错误并且应用程序已关闭。如果正在从 oncreate 函数中删除接收内容的意图，并且只有从 onCreate 应用程序调用的 startMyApp() 函数成功启动。

帮助我通过通知将数据传递给 MainActivity。startMyApp() 的代码如下

```
public void startMyApp()
{
    super.loadUrl("file:///android_asset/www/dashboard.html");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:34:17.173

```
super.loadUrl("file:///android_asset/www/update.html?updateVersion="+updateVersion+"&updateUrl="+updateUrl); 
```

这不起作用，因为它将搜索名为 update.html?updateVersion=xxx&updateUrl=xxx 而不是 update.html 的文件。

# mysql - MySql获取余额查询

> ID：15809749
> 
> 赞同：0
> 
> 时间：2013-04-04T11:22:59.820
> 
> 标签：mysql, sql, stored-procedures

我有以下表格，我正在努力获得正确的查询：

活动表：

```
ID   USER_ID    CARD_ID    CLOCK
1      123        04675545   4/3/2013 1:07:06 PM
2      123        04675545   4/3/2013 2:08:06 PM
3      124        04675550   4/3/2013 2:07:06 PM
4      124        04675550   4/3/2013 4:07:06 PM 
```

** 价格表：

```
ID    FROMTIME    TOTIME       PRICEPERHOUR
1     08:00:00    19:59:59     50.00
2     20:00:00    07:59:59     75.00 
```

我正在尝试创建一个程序，该程序将根据每小时的收费金额和每天的总活动告诉我每个用户每天花费了多少。一旦我有了正确的查询，我就会将它插入到事务表中。

关于什么是最佳实践的任何想法？非常感谢任何可以提供帮助的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:55:10.470

试试这个查询

如果要创建存储过程，可以从给定的查询中创建...

## 已编辑

```
select a.user_id, date(a.clock),  ABS(TIME_TO_SEC(TIMEDIFF(a.clock, b.clock))/3600)*c.PRICEPERHOUR as total from 
(Select if((@rn:=@rn+1)%2=0,@rn,@rn-1) As rId, act.* from act
join
(select @rn:=-1)a
order by user_Id, clock) a 
inner join 
(Select if((@rn1:=@rn1+1)%2=0,@rn1,@rn1-1) As rId, act.* from act
join
(select @rn1:=-1)b
order by user_Id, clock) b
ON a.rid=b.rid AND a.id <> b.id 
inner join 
price c
on 
TIME_TO_SEC(a.clock) between TIME_TO_SEC(c.FROMTIME) 
AND 
TIME_TO_SEC(c.TOTIME)
group by a.user_id, date(a.clock) 
```

**结果**：

```
| USER_ID |                DATE(A.CLOCK) |   TOTAL |
----------------------------------------------------
|     123 | April, 03 2013 00:00:00+0000 | 50.8333 |
|     124 | April, 03 2013 00:00:00+0000 |     100 | 
```

## **[SQL 小提琴](http://sqlfiddle.com/#!2/422d9/28/0)**

# android - 在Android应用程序中购买，并使用沙盒帐户进行测试

> ID：15809751
> 
> 赞同：3
> 
> 时间：2013-04-04T11:23:02.123
> 
> 标签：android, in-app-purchase

我想在我的 android 应用程序中实现应用程序购买。谁能帮我举个最好的例子，我如何使用沙盒帐户进行测试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-16T13:32:46.923

截至今天（或昨天），Google 已允许对应用内购买进行“沙盒”测试。请 [在此处](https://developer.android.com/google/play/billing/billing_testing.html?rd=1#test-purchases)和 [此处查看信息](https://developer.android.com/google/play/billing/billing_testing.html?rd=1#billing-testing-test)

![谷歌公告网](https://i.stack.imgur.com/8Wr5i.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:26:41.457

您可以使用测试购买包来测试谷歌提供的应用程序。使用此产品 id 测试“com.test.purchased”它会将您重定向到测试 inapp 产品 id 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T11:29:41.333

> 你可以阅读这个

[http://developer.android.com/google/play/billing/billing_overview.html](http://developer.android.com/google/play/billing/billing_overview.html)

> 要测试您的应用程序，您必须在 google play 上发布此应用程序，Android 应用程序内购买没有沙箱

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-03T14:48:59.190

[https://developer.android.com/google/play/billing/billing_testing#prepare](https://developer.android.com/google/play/billing/billing_testing#prepare)

您可以查看此链接以进行测试购买

有三个预留的产品 ID 用于测试静态 Google Play 结算响应：

**android.test.purchased** 当您使用此产品 ID 发出 Google Play 结算请求时，Google Play 会做出响应，就像您成功购买了商品一样。响应包含一个 JSON 字符串，其中包含虚假购买信息（例如，虚假订单 ID）。

# build - 在设备列表的 clBuildProgram 失败后使用 clGetProgramInfo

> ID：15809754
> 
> 赞同：0
> 
> 时间：2013-04-04T11:23:09.877
> 
> 标签：build, opencl

我用来`clBuildProgram`为设备列表构建一个程序，其中包含 10 个失败的设备。我检查了失败是由于仅一个设备的编译问题而发生的。我仍然想用它`clGetProgramInfo`来提取编译正常的设备的信息。我能做到吗？（同时仍然`clBuildProgram`为整个设备列表执行）谢谢

# sql-server-2008 - 将不同的 varchar 日期转换为日期

> ID：15809755
> 
> 赞同：1
> 
> 时间：2013-04-04T11:23:16.463
> 
> 标签：sql-server-2008

我在将 varchar 类型转换为日期类型时遇到了一些麻烦。
在 SQL-server 2008 中，我有一个 VARCHAR 类型的不同日期类型的表。
例如：

```
DDMMYYYY (05032013)<br/>
MMDDYYYY (03052013)<br/>
YYYYMMDD (20130305)<br/>
... 
```

我必须使用 SQL 查询将这些不同的字符串类型转换为“日期”类型。有什么建议我该怎么做？
这些是我的记录：

```
TYPE    ||    FORMAT  
____________________
DDMMYYYY||05032013  
MMDDYYYY||03052013  
YYYYMMDD||20130305 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:41:14.703

如果您可以识别日期格式的每一行，则可以将它们转换为日期类型。否则我认为这不会是完全正确的。例如，您不能为以下记录实现逻辑 - (03052013) 可以是 2013-05-03 或 2013-03-05。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:37:32.783

试试这个

`SELECT case when type='DDMMYYYY' then convert(date,STUFF(STUFF('05032013',3,0,'-'),6,0,'-'),105) when type='MMDDYYYY' then cast(substring('03052013',5,4)+'-'+substring('03052013',0,3)+'-'+substring('03052013',3,2) as date) when type='YYYYMMDD' then cast(STUFF(STUFF('20130305',5,0,'-'),8,0,'-') as date) end`

# c# - 使用 RAISERROR 返回超过 50000 的异常号

> ID：15809756
> 
> 赞同：0
> 
> 时间：2013-04-04T11:23:17.933
> 
> 标签：c#, sql, sql-server, exception-handling

我从 SQL Server 2012 中的存储过程返回异常，如下所示：

```
DECLARE @errnum nchar(5), @errmsg nvarchar(2048);
SELECT
@errnum = 51000,--RIGHT('00000' + ERROR_NUMBER(), 5),
@errmsg = @errnum + ' ' + ERROR_MESSAGE();
RAISERROR (@errmsg, 16, 1); 
```

SqlException 在 C# 代码中返回，编号为 50000，其中 is 执行进一步操作。由于某些业务逻辑原因，我需要返回的数字超过 50000。例如，我们使用 THROW 关键字来实现。

```
THROW 51000,'error',1 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:30:28.247

您应该为此错误号使用 sp_addmessage 创建用户定义的错误消息，然后使用消息 ID 调用 RAISERROR：

```
RAISERROR (51000, 16, 1) 
```

# javascript - 使鼠标事件的对象“透明”？

> ID：15809757
> 
> 赞同：7
> 
> 时间：2013-04-04T11:23:19.840
> 
> 标签：javascript, html5-canvas, dom-events, kineticjs

我正在使用 HTML5 Canvas 和 KineticJS 开发一个项目。一个半透明的覆盖（KineticJS 组或层）被放置在整个场景中。问题是：绑定到此覆盖下的 KineticJS 对象的鼠标事件未得到处理。

如何使这个覆盖（或任何其他对象）对鼠标事件“透明”？

注意：问题只是关于画布，没有其他 HTML 元素干扰它。（为了弄清楚下面的问题。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T11:26:26.793

假设您的意思是 HTML 元素放置在您的画布上，请尝试查看指针事件：[MDN上的指针事件](https://developer.mozilla.org/en/docs/CSS/pointer-events)

例如

```
#foo {
    pointer-events:none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T15:00:18.633

是的，您可以单击顶部节点到底部节点，类似于 pointer-events:none

你只是告诉你的顶级对象不要听事件......像这样：

```
myTopObject.setListening(false); 
```

现在所有鼠标事件都会冒泡到底部对象。

有关代码和小提琴，请参见此 SO 答案：[Kineticjs 中的指针事件](https://stackoverflow.com/questions/15707529/pointer-events-in-kineticjs/15715145#15715145)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T18:59:49.933

在图层级别设置不透明度也会将不透明度设置为对象级别。

```
layer.setOpacity(0.1); 
```

“未处理绑定到此覆盖下的 KineticJS 对象的鼠标事件。”

嗯，虽然您的叠加层（层）的不透明度为 0，但绑定到对象的鼠标事件已被处理。这似乎工作正常，我不知道您在做什么。

“我怎样才能使这个覆盖（或任何其他对象）对鼠标事件“透明”？对我来说，mouseover/mouseout 在图层级别上都可以正常工作以使其半透明。

```
 layer.on('mouseover', function() {
     this.setOpacity(0.5);
     this.draw();
  });

  layer.on('mouseout', function() {
     this.setOpacity(1);
     this.draw();
  }); 
```

你失踪了`layer.draw()`吗？

# c# - RichTextBox 每行不同的背景颜色

> ID：15809758
> 
> 赞同：0
> 
> 时间：2013-04-04T11:23:20.713
> 
> 标签：c#, .net, textbox, richtextbox

我正在使用 C#.Net 开发一个 Windows 窗体应用程序。在我的部分代码中，我定义了一个记录系统事件的函数。这是这个函数的主体：

```
richTextBoxLog.Text += "-";
richTextBoxLog.Text += some logs and strings ...;
richTextBoxLog.Text += "." + new string(' ', 1000) + Environment.NewLine;
richTextBoxLog.Select(richTextBoxLog.GetFirstCharIndexFromLine(logCounter), richTextBoxLog.Lines[logCounter].Length);       
richTextBoxLog.SelectionBackColor = (logCounter % 2 == 0) ? Color.LightBlue: Color.LightGray;
logCounter++;
richTextBoxLog.ScrollToCaret(); 
```

的初始值`logCounter`为零（第一个事件的行指的是`logCounter=0`）。对于奇数行，背景颜色应该是`Color.LightGray`，对于偶数行，它应该是`Color.LightBlue`。但是，正如您在下面看到的那样，它不会正确更改背面颜色。

![第一个事件（均匀颜色）](https://i.stack.imgur.com/rWXac.jpg) ![第二个事件（奇怪的颜色）](https://i.stack.imgur.com/TuBoH.jpg) ![第三个事件（均匀颜色）](https://i.stack.imgur.com/Qv9w2.jpg) ![第四次活动​​（奇怪的颜色）](https://i.stack.imgur.com/EzBKw.jpg) ![第五事件（均匀颜色）](https://i.stack.imgur.com/ONRug.jpg)

每次调用此函数（以添加新文本行）时，`richTextBoxLog.Select`都会根据新行的开始和结束索引更新区域。但是，当向文本框中添加偶数行时，所有先前行的背景颜色都会变为蓝色（偶数颜色）。

我提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:27:32.663

文档[http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.selectionbackcolor.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.selectionbackcolor.aspx)状态：

> 从该位置输入的字符具有指定的 SelectionBackColor。

这似乎可能会导致您的问题。虽然我仍然看不到它如何影响以前添加的文本。

无论如何，您可以通过在添加文本时重新绘制所有线条颜色来解决它：

```
richTextBoxLog.Text += "-";
richTextBoxLog.Text += some logs and strings ...;
richTextBoxLog.Text += "." + new string(' ', 1000) + Environment.NewLine;
var lineCount = 0;
foreach (var line in richTextBoxLog.Lines) {
  richTextBoxLog.Select(richTextBoxLog.GetFirstCharIndexFromLine(lineCount), line.Length);
  richTextBoxLog.SelectionBackColor = (lineCount % 2 == 0) ? Color.LightBlue : Color.LightGray;
  lineCount++;
}
richTextBoxLog.ScrollToCaret(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-10T09:10:18.833

它应该是有帮助的：

```
 public  void AppendText(string text, Color color,Color backColor)
    {
        richTextBox1.SelectionStart = richTextBox1.TextLength;
        richTextBox1.SelectionLength = 0;
        richTextBox1.SelectionColor = color;
        richTextBox1.AppendText(text);
        richTextBox1.SelectionColor = richTextBox1.ForeColor;
        richTextBox1.SelectionBackColor = backColor;
        richTextBox1.ScrollToCaret();
    } 
```

# redirect - 显示成功消息，然后在超时后使用 PageFlow 重定向到另一个页面

> ID：15809772
> 
> 赞同：9
> 
> 时间：2013-04-04T11:23:55.390
> 
> 标签：redirect, jsf-2, primefaces, timeout, seam

如何显示成功消息，然后在超时 5 秒后将用户重定向到另一个页面？

成功登录后，我需要将其用于登录页面。我尝试了以下操作，我可以看到登录失败的警告消息，但看不到登录成功的成功消息。它立即显示目标页面。

```
public String check(){
      if (username.equals("test") && password.equals("test")) {
          FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,"Sample info message", "PrimeFaces rocks!")); 
            return "Success";
        }else{
          FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_WARN,"Sample warn message", "Watch out for PrimeFaces!"));  
            return "Failure";
        }
    } 
```

我正在使用 Seam 的 PageFlow 进行导航。

我有一个

```
<p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" /> 
```

在登录页面上。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-04T12:32:59.030

它是 Flash 的实用程序之一。代替

```
FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,"Sample info message", "PrimeFaces rocks!"));: 
```

只需使用此代码

```
FacesContext facesContext = FacesContext.getCurrentInstance();
Flash flash = facesContext.getExternalContext().getFlash();
flash.setKeepMessages(true);
flash.setRedirect(true);
facesContext.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,"Sample info message", "PrimeFaces rocks!")); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-04T11:57:41.043

首先，使用您发布的代码，您在重定向之前不会看到 FacesMessage，您会在重定向之后看到它。而且，为了实现这一点，您需要添加一个过滤器，因为重定向时消息会丢失。这是您需要的过滤器的代码（不要忘记在 web.xml 中声明它）：

```
public class MultiPageMessagesSupport implements PhaseListener {

private static final long serialVersionUID = 1250469273857785274L;
private static final String sessionToken = "MULTI_PAGE_MESSAGES_SUPPORT";

@Override
public PhaseId getPhaseId() {
    return PhaseId.ANY_PHASE;
}

/*
 * Check to see if we are "naturally" in the RENDER_RESPONSE phase. If we
 * have arrived here and the response is already complete, then the page is
 * not going to show up: don't display messages yet.
 */
@Override
public void beforePhase(final PhaseEvent event) {
    FacesContext facesContext = event.getFacesContext();
    int msg = this.saveMessages(facesContext);

    if (PhaseId.RENDER_RESPONSE.equals(event.getPhaseId())) {
        if (!facesContext.getResponseComplete()) {
            this.restoreMessages(facesContext);
        }
    }
}

/*
 * Save messages into the session after every phase.
 */
@Override
public void afterPhase(final PhaseEvent event) {
    if (event.getPhaseId() == PhaseId.APPLY_REQUEST_VALUES ||
            event.getPhaseId() == PhaseId.PROCESS_VALIDATIONS ||
            event.getPhaseId() == PhaseId.INVOKE_APPLICATION) {
        FacesContext facesContext = event.getFacesContext();
        int msg = this.saveMessages(facesContext);
    }
}

@SuppressWarnings("unchecked")
private int saveMessages(final FacesContext facesContext) {
    List<FacesMessage> messages = new ArrayList<FacesMessage>();
    for (Iterator<FacesMessage> iter = facesContext.getMessages(null); iter.hasNext();) {
        messages.add(iter.next());
        iter.remove();
    }

    if (messages.isEmpty()) {
        return 0;
    }

    Map<String, Object> sessionMap = facesContext.getExternalContext().getSessionMap();
    List<FacesMessage> existingMessages = (List<FacesMessage>) sessionMap.get(sessionToken);
    if (existingMessages != null) {
        existingMessages.addAll(messages);
    } else {
        sessionMap.put(sessionToken, messages);
    }
    return messages.size();
}

@SuppressWarnings("unchecked")
private int restoreMessages(final FacesContext facesContext) {
    Map<String, Object> sessionMap = facesContext.getExternalContext().getSessionMap();
    List<FacesMessage> messages = (List<FacesMessage>) sessionMap.remove(sessionToken);

    if (messages == null) {
        return 0;
    }

    int restoredCount = messages.size();
    for (Object element : messages) {
        facesContext.addMessage(null, (FacesMessage) element);
    }
    return restoredCount;
}
} 
```

如果这对您不起作用，并且您需要在之前显示消息，那么您必须执行以下操作：使方法返回 void，通过 ajax 调用它，并在添加成功消息后调用一些 javascript 方法这将等待几秒钟，然后进行重定向（可能通过以编程方式单击重定向到下一页的隐藏按钮）。我认为这不值得麻烦，您只会延迟登录过程。无论如何，用户都会知道登录成功，因为他将被重定向到主页（或您发送给他的任何页面）

**编辑：** 当方法完成时，消息会显示在页面中，因此在托管 bean 方法中等待将不起作用。添加 FacesMessage 后，使用

```
RequestContext.getCurrentInstance().execute("waitAndRedirect()"); 
```

在您的 xhtml 中，您需要有一个类似于此的 javascript 函数：

```
function waitAndRedirect() {
    setTimeout(function() {
        hiddenButtonId.click();
    }, 2000);
} 
```

其中 hiddenButtonId 是 ap:button 的 ID，它重定向到主页并被隐藏 (display:none)

但同样，这是一种讨厌的方法，在我看来没有必要这样做，你只会延迟登录过程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-12T20:02:35.247

您不能在 web.xml 中声明 MultiPageMes​​sagesSupport，您必须在 faces-config.xml 中声明 MultiPageMes​​sagesSupport。例如：

```
enter code here

<lifecycle>
    <phase-listener>your.package.MultiPageMessagesSupport</phase-listener>
</lifecycle> 
```

# android - 应用程序在没有互联网的情况下崩溃

> ID：15809778
> 
> 赞同：1
> 
> 时间：2013-04-04T11:24:18.063
> 
> 标签：android, android-internet

在这里，基本上我所做的就是检查连接是否可用。如果连接不可用，我将重定向到另一个活动。就是这样。但它一直在崩溃。

```
Intent i;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
     i = new Intent(Jsouptesting3Activity.this, NoInternet.class);
    Jsouptesting3Activity ob1=new Jsouptesting3Activity();
    ob1.isDataConnectionAvailable(this);
    try {
        doc = Jsoup.connect("http://www.way2franchise.com/").get();

        //System.out.println(doc);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        System.out.println("cant connect");
        e.printStackTrace();

public  void isDataConnectionAvailable(Context context){
    ConnectivityManager connectivityManager = (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo info = connectivityManager.getActiveNetworkInfo();
    if(info == null)
    {
        System.out.println("No net bob");
         i = new Intent(Jsouptesting3Activity.this, NoInternet.class);
        startActivity(i);

    }
    System.out.println("YES net bob"); 
```

当程序执行时，我正在调用 `isDataConnectionAvailable()`并且我没有可用的连接。因此根据逻辑它必须被重定向并且应该打开 NoInternet 活动。
我错过了什么严重的事情吗？
请帮忙。

logcat 堆栈

```
Thread [<1> main] (Suspended (exception RuntimeException))  
ActivityThread.performLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 1659    
ActivityThread.handleLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 1675 
ActivityThread.access$1500(ActivityThread, ActivityThread$ActivityClientRecord, Intent) line: 121   
ActivityThread$H.handleMessage(Message) line: 943   
ActivityThread$H(Handler).dispatchMessage(Message) line: 99 
Looper.loop() line: 130 
ActivityThread.main(String[]) line: 3701    
Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
Method.invoke(Object, Object...) line: 507  
ZygoteInit$MethodAndArgsCaller.run() line: 866  
ZygoteInit.main(String[]) line: 624 
NativeStart.main(String[]) line: not available [native method] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:46:03.617

**检查 isDataConnectionAvailable() 作为构造 if (isDataConnectionAvailable())**

```
 Jsouptesting3Activity ob1=new Jsouptesting3Activity();
   if( ob1.isDataConnectionAvailable(this))
{
    try {
        doc = Jsoup.connect("http://www.way2franchise.com/").get();

        //System.out.println(doc);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        System.out.println("JSON Error");
        e.printStackTrace();
}
else
{
    System.out.println("cant connect");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:32:14.303

您应该检查 isDataConnectionAvailable() 作为构造`if (isDataConnectionAvailable())`

我认为最好的方法是不检查连接，而是检查`doc`，如果它等于 null，然后打开另一个活动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T11:33:15.447

您必须从`if`条件中调用该方法，以便它不会执行

```
if(ob1.isDataConnectionAvailable(this))
{
    try {
        doc = Jsoup.connect("http://www.way2franchise.com/").get();

        //System.out.println(doc);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        System.out.println("cant connect");
        e.printStackTrace();
} 
```

并从中返回值`isDataConnectionAvailable(this)`。

# javascript - 使用 jquery 或 ajax 更新表后更新输入表单

> ID：15809780
> 
> 赞同：0
> 
> 时间：2013-04-04T11:24:21.943
> 
> 标签：javascript, jquery, ajax

我有这张我用 jquery 和 ajax 构建的表（观看一些教程，所以我不是高级程序员）。好吧，我要做的是在表中插入一些值，我需要在输入表单中获取这些值的所有总和。

我可以这样做，但我需要的是在不刷新页面的情况下获得总和，所以每当我在 Value 列中输入：200 时，总和应该变为：

```
Sum + 200 
```

请我需要一些帮助来做什么，我已经搜索了datagrid，但我真的不知道我该怎么做。谢谢

输入的php代码：

```
<table class="vlera">

<tr id="<?php echo $id; ?>" class="edit_tr">

<td class="edit_td">
<span id="first_<?php echo $id; ?>" class="text"><?php echo $kodi; ?></span>
<input type="text" value="<?php echo $kodi; ?>" class="editbox" id="first_input_<?php echo $id; ?>" /&gt;
</td>

<td class="edit_td">
<span id="last1_<?php echo $id; ?>" class="text"><?php echo $pershkrimi_pjeses; ?></span>
<input type="text" value="<?php echo $pershkrimi_pjeses; ?>" class="editbox" id="last_input1_<?php echo $id; ?>"/>
</td>
<td class="edit_td">
<span id="last_<?php echo $id; ?>" class="text"><?php echo $vlera; ?></span>
<input type="text" value="<?php echo $vlera; ?>" class="editbox" id="last_input_<?php echo $id; ?>"/>
</td>
<td class="edit_td">
<span id="last2_<?php echo $id; ?>" class="text"><?php echo $kosto; ?></span>
<input type="text" value="<?php echo $kosto; ?>" class="editbox" id="last_input2_<?php echo $id; ?>"/>
</td>

</tr>
<?php
}
?>
</table>

<?php
$sql_shuma="SELECT SUM(vlera) AS shuma FROM servis_pjeset_perdorura WHERE random=$random";
$resultshuma = odbc_exec($connection, $sql_shuma) or die(odbc_error());
while( $rowshuma = odbc_fetch_array($resultshuma ) ) {
           $total1 = $rowshuma['shuma'];
}
?>
<label for='shuma'>Shuma:</label>
<input id="shuma" name="shuma" type="text" value=" <?php echo $total1;?>"  size="20" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:39:56.500

您发布的代码并没有真正显示完整格式（输入的样子）......但是如果您执行以下操作：

```
$(".values").keyup(function() {
    var sum = 0;
    $(".values").each(function(){
        sum += Number($(this).val());
    });
    $("#shuma").val(sum)
}); 
```

并且您想要用于总和的每个文本输入都有一类“值”，它应该可以工作。 [http://jsfiddle.net/NNbtk/](http://jsfiddle.net/NNbtk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:44:27.517

试试这个代码......这个代码在输入值时获取文本框的值并将其添加到总和中。

```
$(document).ready(function(){
   $('#shuma').keyup(function(){
   var val=$('#shuma').val();
   sum=sum+val;
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T11:54:56.173

只需将此代码放在另一个 php 文件中...比如 abc.php

```
<?php
$sql_shuma="SELECT SUM(vlera) AS shuma FROM servis_pjeset_perdorura WHERE random=$random";
$resultshuma = odbc_exec($connection, $sql_shuma) or die(odbc_error());

while( $rowshuma = odbc_fetch_array($resultshuma ) ) {
           $total1 = $rowshuma['shuma'];
}
echo $total1;
?> 
```

然后从主页上对按钮执行以下调用让我们说 button1

```
$(document).ready({
     setInterval(function(){            
        $.ajax({
            url: 'abc.php',
            type: "POST",
            success: function(contents){
               $('#shuma').val(contents);
            }

        });
     }, 1000);

}); 
```

现在解释一下：
在文档准备好的主页面上，将调用javascript的setInterval方法，它有2个参数，代码和延迟时间，单位是毫秒。此代码将在每 1 秒后调用 abc.php 并检查数据库中的新值并将其返回并将其放入字段中。

希望这就是你要找的。

# java - 如何格式化从服务器收到的消息？

> ID：15809783
> 
> 赞同：-2
> 
> 时间：2013-04-04T11:24:24.047
> 
> 标签：java, android

我有一个非常简单的客户端服务器应用程序工作。在我向服务器发送消息时，它会发回一些信息，我想做的是让 android（客户端）格式化它收到的消息，就像将消息的一部分放在 textview/editText 中一样另一半在另一个不同的地方。有没有办法做到这一点？

任何帮助都非常感谢，并提前感谢。

所以我将从android发送50126057行，服务器将发送回“prd|50126057|12bars|5|199|1|[)”它作为字符串发送。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:30:19.437

是的！例如，您可以使用表达式（使用正则表达式）或使用 substsr() 拆分字符串。

```
String response = "Hello, World";
String[] words = response.split(" ");
TextView tv1 = (TextView) findViewById(R.id....);
TextView tv2 = (TextView) findViewById(R.id....);
tv1.setText(words[0]);
tv2.setText(words[1]); 
```

# java - 启动 Eclipse RCP 应用程序时不显示小部件

> ID：15809786
> 
> 赞同：0
> 
> 时间：2013-04-04T11:24:29.240
> 
> 标签：java, eclipse, eclipse-plugin, swt, eclipse-rcp

我正在开发一个基于 eclipase 的插件，我在其中创建了一个应用程序（使用 SWT）。有两个类，即；`RunAction.java`它由`run()`、`dispose()`和`init()`方法组成，并且`Sample.java`由带有标签小部件的示例应用程序组成。现在，当我通过将应用程序作为 Eclipse 应用程序运行来测试应用程序时，只会显示没有标签小部件的外壳。**问题是什么？**我正在分享代码。

> 运行动作.java

```
public class RunWizardAction extends Action implements IWorkbenchWindowActionDelegate {
    /** Called when the action is created. */ 
    Sample samp=new Sample();
    Shell shell = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getShell();

    public void init(IWorkbenchWindow window) {

    }

    /** Called when the action is discarded. */ 
    public void dispose() {
    }

    /** Called when the action is executed. */ 
    public void run(IAction action) {

        //InvokatronWizard wizard= new InvokatronWizard();
        new Thread(new Runnable(){
        @Override
        public void run() {

            samp.sampleApp(shell);

                    }
        }).start();
        }
} 
```

* * *

> Sample.java（示例函数）

```
public void sampleApp(Shell shell) {
              Display display = new Display();
        Shell shell = new Shell(display);
        shell.setText("Hello");
        JLabel lab=new JLabel("Hello World");
        Label username_checkout=new Label(shell, SWT.BOLD);
        username_checkout.setText("User Name");
        Button button=new Button(shell,SWT.PUSH);
        button.setText("push");
        shell.open();
        shell.setSize(270,270);
        while (!shell1.isDisposed()) {
          if (!display.readAndDispatch()) {
            display.sleep();
          }
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:17:20.073

你`Shell`没有布局。这段代码对我有用：

```
public static void main(String[] args)
{
    Display display = new Display();
    Shell shell = new Shell(display);

    /* SET LAYOUT */
    shell.setLayout(new FillLayout());
    shell.setText("Hello");
    JLabel lab = new JLabel("Hello World");
    Label username_checkout = new Label(shell, SWT.BOLD);
    username_checkout.setText("User Name");
    Button button = new Button(shell, SWT.PUSH);
    button.setText("push");
    shell.open();
    shell.pack();
    shell.setSize(270, 270);
    while (!shell.isDisposed())
    {
        if (!display.readAndDispatch())
        {
            display.sleep();
        }
    }

} 
```

* * *

`Shell`此外，您的代码中的 s太多：

```
public void sampleApp(Shell shell) {
    Display display = new Display();
    Shell shell = new Shell(display); 
```

所以，现在你有两个`Shell`s 被调用`shell`（顺便说一句不会编译）......

```
while (!shell1.isDisposed()) 
```

还有第三个。那是怎么回事？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T12:23:11.357

如果您像 Baz 的回答一样在 Eclipse 之外运行，那么您的示例应用程序会很好。

由于您在 Eclipse 中运行，因此您已经拥有了一个 Display 和一个 Shell。使用它们。

```
public void sampleApp(Shell shell) { 
    shell.setLayout(new FillLayout());
    shell.setText("Hello");
    JLabel lab=new JLabel("Hello World");
    Label username_checkout=new Label(shell, SWT.BOLD);
    username_checkout.setText("User Name");
    Button button=new Button(shell,SWT.PUSH);
    button.setText("push");
    shell.setSize(270,270);
    shell.open();
} 
```

# django - celery - 需要优先运行的任务

> ID：15809811
> 
> 赞同：27
> 
> 时间：2013-04-04T11:26:10.060
> 
> 标签：django, queue, celery

在我的网站中，用户可以随时更新他们的个人资料（手动），或者每天自动更新一次。

这个任务现在与 celery 一起分发。

但我有一个“问题”：

每天，在自动更新中，一项作业将所有用户（+-6k 用户）放入队列：

```
from celery import group
from tasks import *
import datetime
from lastActivityDate.models import UserActivity

today   = datetime.datetime.today()
one_day = datetime.timedelta(days=5)
today -= one_day

print datetime.datetime.today()

user_list = UserActivity.objects.filter(last_activity_date__gte=today)
g = group(update_user_profile.s(i.user.auth.username) for i in user_list)

print datetime.datetime.today()
print g(user_list.count()).get() 
```

如果有人尝试手动更新，他们将进入队列并永远执行。

有没有办法将此手动任务设置为以优先方式运行？或者为每个单独的队列制作一个专用的：手动和自动？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-05T06:16:07.673

Celery 不支持任务优先级。(v3.0)

[http://docs.celeryproject.org/en/master/faq.html#does-celery-support-task-priorities](http://docs.celeryproject.org/en/master/faq.html#does-celery-support-task-priorities)

您可以通过路由任务来解决此问题。

[http://docs.celeryproject.org/en/latest/userguide/routing.html](http://docs.celeryproject.org/en/latest/userguide/routing.html)

准备 default 和 priority_high 队列。

```
from kombu import Queue
CELERY_DEFAULT_QUEUE = 'default'
CELERY_QUEUES = (
    Queue('default'),
    Queue('priority_high'),
) 
```

运行两个守护进程。

```
user@x:/$ celery worker -Q priority_high
user@y:/$ celery worker -Q default,priority_high 
```

和路线任务。

```
your_task.apply_async(args=['...'], queue='priority_high') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2021-08-12T08:08:25.913

如果您使用**RabbitMQ**传输，请按以下方式配置队列： *settings.py*

```
from kombu import Queue
...
CELERY_TASK_QUEUES = (
    Queue('default', routing_key='task_default.#', max_priority=10), 
    ...) 
```

然后运行你的任务：

```
my_low_prio_task.apply_async(args=(...), priority=1)
my_high_prio_task.apply_async(args=(...), priority=10) 
```

目前此代码适用于kombu==4.6.11，celery==4.4.6。

# excel - 一次复制多张纸（保留相关公式）

> ID：15809816
> 
> 赞同：1
> 
> 时间：2013-04-04T11:26:31.463
> 
> 标签：excel, copy-paste, vba

我一直在努力寻找一种使用 VBA 一次复制多张工作表的方法。问题是我需要他们保持彼此的相对引用。例如：

```
I have 3 sheets:
1\. Print                      (formulas point to TV - Input)
2\. Print - Input
3\. Print - plan               (formulas point to TV - Input)

I need to copy them so that all formulas point to their new respective sheets.

1\. Print (2)                  (formulas point to Print - Input (2))
2\. Print - Input (2)
3\. Print - plan (2)           (formulas point to Print - Input (2)) 
```

这很容易通过 Ctrl 手动完成。+ 将工作表拖到新位置。但是我如何在 VBA 中做到这一点？

**编辑：** 名称“打印”设置为运行时。所以它也可以是电视或广播。它是从字符串中传递过来的。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:39:31.320

尝试这样的事情：

```
Sheets(Array("Print", "Print - input", "Print - plan")).Copy After:=Sheets(Sheets.Count) 
```

**已编辑 -**带有索引参考

```
Sheets(Array(1, 2, 3)).Copy After:=Sheets(Sheets.Count) 
```

使用变量引用：

```
Dim sht1 as String, sht2 as String, sht3 As String
sht1 = "Print"
sht2 = "Print - input"
sht3 = "Print - plan"
Sheets(Array(sht1, sht2, sht3)).Copy After:=Sheets(Sheets.Count) 
```

使用动态数组（这里是 3 个静态元素，但也可以是任何动态数组）：

```
Dim arrSHT as Variant
arrSHT = array("Print", "Print - input", "Print - Plan")
Sheets(arrSHT).Copy After:=Sheets(Sheets.Count) 
```

# javascript - FullCalendar + FancyBox2：传递和设置输入值

> ID：15809817
> 
> 赞同：1
> 
> 时间：2013-04-04T11:26:35.763
> 
> 标签：javascript, jquery, fullcalendar, fancybox-2, cakephp-2.3

我需要一些帮助。我正在尝试建立 FullCalendar 和 FancyBox2 组合。当用户点击一天时，我有这样的功能：

```
dayClick: function(date, allDay, jsEvent, view) {
                var url = '/reservations/add';
                var data = url;
                var dayClickDate = $.fullCalendar.formatDate(date, 'dd/MM/yyyy');

                $.fancybox({
                    'hideOnContentClick': false, //option for v1.3.4 (outdated)
                    'type': 'iframe',
                    'href': data,
                    'width': 500,
                    'height': 100,
                    'transitionIn': 'none', //option for v1.3.4 (outdated)
                    'transitionOut': 'none', //option for v1.3.4 (outdated)

                    afterLoad: function() {
                        $("#resStartDate").val(dayClickDate);
                    },
                    afterClose: function() {
                        $('#calendar').fullCalendar('refetchEvents');
                    }
                });
            }, 
```

FancyBox 在 iframe 中打开一个页面，用户可以在其中进行新的预订。它应该将单击日期的日期设置为输入值。上面的代码不起作用。

有人知道我怎么能让这个工作吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:33:31.197

我想这取决于选择器的位置`#resStartDate`和`#calendar`位置：在*父*页面中还是在打开的页面中`iframe`？

如果它们在打开的页面内（我假设它们是），那么你应该`iframe`在传递任何值之前先在里面找到它们，所以试试

```
afterLoad: function() {
   $('.fancybox-iframe').contents().find("#resStartDate").val(dayClickDate);
},
afterClose: function() {
   $('.fancybox-iframe').contents().find('#calendar').fullCalendar('refetchEvents');
} 
```

**注意**：使用 iframe？始终考虑[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)

# r - 估算观察结果以使横截面成为 R 中的时间序列

> ID：15809824
> 
> 赞同：0
> 
> 时间：2013-04-04T11:27:06.433
> 
> 标签：r, time-series, missing-data

我希望为员工获取一个包含横截面工资数据的数据集，并创建一个大的不间断时间序列，并在此过程中估算值。假设我有：

```
name <- c("carl","carl","bob","rick","rick","rick","rick")
sex <- c(rep("M",7))
salary <- c(18000, 14000, 34000, 11000, 23000, 23000, 25000)
date <- as.Date(c("2007-04-30","2007-07-30","2009-12-09","2006-01-01",
                 "2008-01-01","2009-12-09", "2010-01-01"))

salaries <- data.frame(name,sex,salary,date)
salaries
  name sex salary       date
  carl   M  18000 2007-04-30
  carl   M  14000 2007-07-30
   bob   M  34000 2009-12-09
  rick   M  11000 2006-01-01
  rick   M  23000 2008-01-01
  rick   M  23000 2009-12-09
  rick   M  25000 2010-01-01 
```

正如我们所看到的，可怜的卡尔在 7 月份减薪 4k。在此之前，他的收入为 18k。在他被削减之前的3个月都是这种情况，但我的数据并没有反映这一点。我想制作一张漂亮的图片来展示这种趋势，但首先我需要将数据更改为如下所示（其中 * 表示估算值）：

```
head(salaries)
  name sex salary       date change
  carl   M  18000 2007-04-30    0
  carl   M  18000 2007-05-30*   0 
  carl   M  18000 2007-06-30*   0 
  carl   M  14000 2007-07-30    1
   bob   M  34000 2009-12-09    0 
  rick   M  11000 2006-01-01    0
  rick   M  11000 2006-02-01*   0
  ...   .. ....... ...... ....
  rick   M  11000 2007-12-01*   0
  rick   M  23000 2008-01-01    1
  rick   M  23000 2008-02-01*   1
  ....   ...... ...... ........
  rick   M  23000 2009-12-09    1     
  rick   M  25000 2010-01-01    2 
```

所以我想估算中间值，并在发生变化时进行标记。像鲍勃这样从未有过薪水变动的人，只会停留在 0 上。但是，经历过多次薪水变动的 rick 每次都会被标记，因此我们知道变动发生的时间和数字。我只对将月份作为分析单位感兴趣，但知道如何每天进行估算也会很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:14:31.283

如果您有一个时间序列，您可以使用`na.locf`最后一个可用值替换缺失值，或者`approx`如果您只想在值之间进行插值。要创建这些单独的时间序列，您可以使用 和 在“高”（标准化）格式和“宽”格式之间转换`dcast`数据`melt`。要计算更改次数，您可以使用`ddply`和`cumsum`。

```
library(reshape2)
library(plyr)
library(zoo)

# Convert to wide format
d <- dcast( salaries, date ~ name, value.var = "salary" )

# Add all the dates you want
dates <- seq.Date( from = min(d$date), max(d$date), by="month" )
d <- merge( d, data.frame(date=dates), all=TRUE )

# Fill in the missing values
# If you want the last non-missing value:
#d <- as.data.frame(lapply(d, na.locf, na.rm=FALSE))
# If you only want to interpolate between values:
d <- as.data.frame(lapply(d, 
  function(x) approx( seq_along(x), x, seq_along(x), method="constant" )$y
))

# Convert back to the tall format
d <- melt(d, id.vars="date", value.name="salary", variable.name="name", na.rm=TRUE)

# Add the number of changes
d <- ddply(
  d, "name", transform, 
  change = cumsum(c(0, diff(salary) != 0))
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:20:31.177

详细说明@Vincent 的建议：

```
 name <- c("carl","carl","bob","rick","rick","rick","rick")
        sex <- c(rep("M",7))
        salary <- c(18000, 14000, 34000, 11000, 23000, 23000, 25000)
        office <- c('melbourne','sydney','adelaide','perth','perth','melbourne','melbourne')
        date <- as.Date(c("2007-04-30","2007-07-30","2009-12-09","2006-01-01",
                          "2008-01-01","2009-12-09", "2010-01-01"))

        salaries <- data.frame(name,sex,salary,date, office)
        salaries

        library(reshape2)
        library(plyr)
        library(zoo) 
```

**使用 approx 处理数字向量**

```
 # Convert to wide format
        d <- dcast( salaries, date ~ name, value.var = "salary" )

        # Add all the dates you want
        dates <- seq.Date( from = min(d$date), max(d$date), by="month" )
        d <- merge( d, data.frame(date=dates), all=TRUE )

        # Fill in the missing values
        # If you want the last non-missing value:
        #d <- as.data.frame(lapply(d, na.locf, na.rm=FALSE, fromLast = T))
        #If you only want to interpolate between values:
        d <- as.data.frame(lapply(d, 
                                  function(x) approx( seq_along(x), x, seq_along(x), method="constant" )$y
        ))

        # Convert back to the tall format
        d <- melt(d, id.vars="date", value.name="salary", variable.name="name", na.rm=TRUE)

        # Add the number of changes
        d <- ddply(
          d, "name", transform, 
          change = cumsum(c(0, diff(salary) != 0))
        ) 
```

**使用 na.locf 转换字符向量**

```
 # Convert to wide format
        a <- dcast( salaries, date ~ name, value.var = "office" )

        # Add all the dates you want
        dates <- seq.Date( from = min(a$date), max(a$date), by="month" )
        a <- merge( a, data.frame(date=dates), all=TRUE )

        # Fill in the missing values using na.locf
        a <- as.data.frame(lapply(a, na.locf, na.rm=FALSE, fromLast = T))

        # Convert back to the tall format
        a <- melt(a, id.vars="date", value.name="office", variable.name="name", na.rm=TRUE) 
```

**合并结果**

```
 d$date <- as.Date(d$date)
        out = merge(a,d, by = c('name','date')) 
```

# css - 隐藏默认css按钮

> ID：15809826
> 
> 赞同：0
> 
> 时间：2013-04-04T11:27:13.317
> 
> 标签：css, html, button

我在用：

```
<div class="upload-area"> 
   <input type="file" name="attachemnt" class="buttonclass" /> 
</div> 
```

我正在尝试隐藏默认的 css 按钮，并制作一个不错的按钮，但我不知道如何。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:50:48.047

没有标准的方法。你只能用黑客来做。这个方法对你有好处

```
.fileInput {
    cursor: pointer;
    height: 25px;
    overflow: hidden;
    position: relative;
    width: 100px;
}

.fileInput em {
    background: linear-gradient(to bottom, #D65A75 0%, #CD4874 100%) repeat scroll 0 0 transparent;
    color: #FFFFFF;
    cursor: pointer;
    display: inline-block;
    font-family: 'Arial';
    font-size: 15px;
    font-style: normal;
    margin-top: 5px;
    padding: 4px 7px;
    text-decoration: none;
    text-shadow: 1px 1px 0 #B8283D;
}

.fileInput input {
    bottom: 0;
    cursor: pointer;
    left: 0;
    opacity: 0;
    position: absolute;
    right: 0;
    top: 0;
} 
```

HTML 标记：

```
<span class="fileInput">
    <input id="file" type="file" name="file">
    <em>Browse computer</em>
</span> 
```

[在http://jsfiddle.net/GHbNa/](http://jsfiddle.net/GHbNa/)工作演示

# android - Android drawables 文件夹中的图像存储在哪里？

> ID：15809827
> 
> 赞同：1
> 
> 时间：2013-04-04T11:27:13.560
> 
> 标签：android, image, android-drawable, hdpi, mdpi

我正在开发应该支持 2.1 到最新 Android OS (4.2) 版本的 Android 应用程序。目前我的图片库模块中显示的图片很少。我需要在所有支持从 2.1 到 4.2（最新）的操作系统的设备（智能手机和平板电脑）上支持我的应用程序。

每张图片的大小大致为 368X387，每张 50 KB，PNG 类型

我的工作区 res 包含以下可绘制文件夹：

```
drawable-hdpi
drawable-ldpi
drawable-mdpi
drawable-xdpi 
```

*我有些困惑*

1.  **我应该将图像存储在哪个文件夹中，这有什么关系？**

2.  **我是否需要为不同类型的设备提供不同分辨率的图像？**

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T11:29:30.203

您只能将图像存储在 1 个文件夹中，例如，您的设备是 mdpi .. 它在他身上会很好看，但是如果您在 ldpi 上运行您的应用程序，android 会自动缩放您的图像，并且看起来很难看（低质量） . 所以，是的，您需要针对不同类型的设备使用不同分辨率的图像。所以 mdpi 分辨率图像转到 drawable-mdpi 所以 hdpi 分辨率图像转到 drawable-hdpi 等。

这是我在互联网上找到的一些关于屏幕尺寸的列表，也许你会发现它有帮助：

```
Low density Small screens QVGA 240x320 (120dpi):

layout-small-ldpi (240x320)  
layout-small-land-ldpi (320x240)

Low density Normal screens WVGA400 240x400 (x432) (120dpi):

layout-ldpi  (240 x 400 )
layout-land-ldpi  (400 x 240 )

Medium density Normal screens HVGA 320x480 (160dpi):

layout-mdpi (320 x 480 )
layout-land-mdpi (480 x 320 )

Medium density Large screens HVGA 320x480 (160dpi):

layout-large-mdpi (320 x 480 )
layout-large-land-mdpi (480 x 320)

Galaxy Tab ( 240 dpi ):

layout-large  (600 x 1024) 
layout-large-land  (1024 x 600)

High density Normal screens WVGA800 480x800 (x854) (240 dpi):

layout-hdpi (480 x 800)
layout-land-hdpi (800 x 480)

Xoom (medium density large but 1280x800 res) (160 dpi):

layout-xlarge (800 x 1280)
layout-xlarge-land (1280 x 800) 
```

此外，最好阅读有关支持不同类型屏幕的官方文档站点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T11:45:07.110

资源文件夹中有四个文件夹 1-drawable-hdpi 2-drawable-ldpi 3-drawable-mdpi 4-drawable-xdpi

要声明您希望用于不同屏幕的不同布局和位图，您必须将这些替代资源放在单独的目录/文件夹中。这意味着如果您为 xhdpi 设备生成 200x200 的图像，您应该为 hdpi 生成 150x150、mdpi 为 100x100 和 ldpi 设备为 75x75 的相同资源。

然后，将文件放在适当的可绘制资源目录中：根据您的需要

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T11:53:18.920

如果您想为所有类型的屏幕使用相同的图像，那么您可以创建一个名为“drawable”的其他文件夹并将所有图像放在该文件夹中。它将作为默认可绘制对象工作。

但是，如果您想提高所有分辨率的图像质量。那么您需要所有 4 种类型的图像，然后将它们放在具有相同图像名称的各自文件夹中。您还可以为每个分辨率制作不同的 XML。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T11:32:56.650

看到这个 [http://developer.android.com/training/multiscreen/screendensities.html](http://developer.android.com/training/multiscreen/screendensities.html)

您可以将特定图像放在所有文件夹中。

```
drawable-hdpi
             ---->img.png
drawable-ldpi
             ---->img.png
drawable-mdpi

             ---->img.png
drawable-xdpi

          ---->img.png 
```

这完全取决于您的操作系统。它会根据设备分辨率默认采用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-23T07:06:38.297

在 android 中，我们的“Res”文件夹只不过是资源文件夹。在这个 res 文件夹中，我们还有其他子文件夹，但为了存储图像，我们有四种类型的文件夹名称被称为：drawable-hdpi 用于高密度屏幕，其分辨率为 480* 800
drawable-ldpi 适用于低密度屏幕，其分辨率为 240*320
drawable-mdpi 适用于中密度屏幕，其分辨率为 320*480
drawable-xdpi 适用于超密度屏幕，其分辨率为 640*960

如果您想为多个屏幕匹配图像，我的建议是使用

九个补丁图像而不是 .png 和 .bmp 用于创建九个补丁图像 [http://developer.android.com/tools/help/draw9patch.html](http://developer.android.com/tools/help/draw9patch.html)

# javascript - 使用类似于 Gmail 的 [x] 按钮将 HTML 表单中输入的电子邮件联系人管理为可移动块？

> ID：15809830
> 
> 赞同：0
> 
> 时间：2013-04-04T11:27:18.283
> 
> 标签：javascript, jquery, jquery-plugins, user-interface, forms

是否有解决方案将 HTML 表单中输入的电子邮件联系人管理为带有 [x] 按钮的可移动块，类似于 Gmail？

而不是使用逗号分隔的电子邮件进行通用文本输入，我希望有更高级的字段，带有自动完成功能（这里不是问题）和自动替换输入的电子邮件，其中每封电子邮件都变成一个带有快速删除 [x] 按钮的块。

当然，手动编写解决方案并不是很复杂，但我确信这个问题之前已经解决了。

我正在寻找的快速示例：http: [//jsfiddle.net/JNVgq/4/](http://jsfiddle.net/JNVgq/4/)

```
<div class="wrap">
    <input class="shadow" value="test@email.com, other@email.com" />
    <div class="email"> test@email.com <a href="#">&times;</a> </div>
    <div class="email"> other@email.com <a href="#">&times;</a> </div>
    <input class="current" value="second@e" />
</div> 
```

发现自己无法在没有准确明确的关键字的情况下用谷歌搜索这些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:45:20.660

我们开始吧：[选择的 jQuery 插件](http://harvesthq.github.com/chosen/)

您可以修改代码以使用文本框而不是列表框来完成您要查找的内容。请参阅`multiple select`示例。

编辑： [Tag-it](http://aehlke.github.com/tag-it/)提到[anpsmn](https://stackoverflow.com/users/473016/anpsmn)看起来正是您正在寻找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-07T00:39:56.650

我用于此的另一个选项（包括来自静态列表或服务器端端点的自动完成部分）是[jquery-tokeninput](http://loopj.com/jquery-tokeninput/)

# css - 无法从带有图标的 UL 列表中删除项目符号

> ID：15809832
> 
> 赞同：0
> 
> 时间：2013-04-04T11:27:22.427
> 
> 标签：css, list, icons, html-lists

我在这里有一个图标列表：

[http://punky-monkey.co.uk/chalet6/our-chalet/](http://punky-monkey.co.uk/chalet6/our-chalet/)

```
<ul class="keyfeatures">
    <li id="sleeps14">Sleeps 14</li>
    <li id="hottub">Outdoor Hot Tub</li>
    <li id="fire">Log Fire</li>
    <li id="terrace">South Facing Terrace</li>
    <li id="outdoorterrace">Outdoor Terrace</li>
    <li id="coffee">Bean to Cup Coffee Machine</li>
    <li id="wine">Honesty Bar</li>
    <li id="tv">Freeview TV</li>
    <li id="games">Games Console</li>
    <li id="ipod">iPod Dock</li>
    <li id="wifi">Free Wi-Fi</li>
</ul> 
```

CSS

```
.keyfeatures li {list-style-type:none; vertical-align:top; margin-left:30px; list-style:none;}

ul #sleeps14 { list-style-image: url('http://punky-monkey.co.uk/chalet6/wp-content/uploads/2013/04/bed.png'); }
ul #hottub { list-style-image: url('http://punky-monkey.co.uk/chalet6/wp-content/uploads/2013/04/hottub.png'); }
ul #fire { list-style-image: url('http://punky-monkey.co.uk/chalet6/wp-content/uploads/2013/04/fire.png'); }
ul #terrace { list-style-image: url('http://punky-monkey.co.uk/chalet6/wp-content/uploads/2013/04/sun.png'); }
ul #outdoorterrace { list-style-image: url('http://punky-monkey.co.uk/chalet6/wp-content/uploads/2013/04/lounger.png'); }
ul #coffee { list-style-image: url('http://punky-monkey.co.uk/chalet6/wp-content/uploads/2013/04/beans.png'); }
ul #wine { list-style-image: url('http://punky-monkey.co.uk/chalet6/wp-content/uploads/2013/04/wine.png'); }
ul #tv { list-style-image: url('http://punky-monkey.co.uk/chalet6/wp-content/uploads/2013/04/tv.png'); }
ul #games { list-style-image: url('http://punky-monkey.co.uk/chalet6/wp-content/uploads/2013/04/games.png'); }
ul #ipod { list-style-image: url('http://punky-monkey.co.uk/chalet6/wp-content/uploads/2013/04/ipod.png'); }
ul #wifi { list-style-image: url('http://punky-monkey.co.uk/chalet6/wp-content/uploads/2013/04/wifiicon2020.png'); } 
```

我想从列表中删除项目符号并且只有图标，我尝试将 list-style-type:none 几乎无处不在 - 有些东西正在覆盖它。

任何人都可以帮忙吗？谢谢，沃伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:32:10.277

删除 CSS 内联`ul li:after`声明。这些正在影响styles.css 中的样式。

```
ul li:after {
    border-left: 3px solid #FE6500 !important;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:36:18.667

它被以下 CSS 覆盖

```
ul li:after
{
    border-left: solid 3px #fe6500 !important;      
} 
```

如果您需要该功能，请使其仅适用于特定列表。

# facebook - FB.login() 后出现错误“传递 access_token 时使用 SSL (https)”

> ID：15809835
> 
> 赞同：1
> 
> 时间：2013-04-04T11:27:26.530
> 
> 标签：facebook, ssl, facebook-javascript-sdk, facebook-login

FB.login() 有一个奇怪的 Javascript 问题。实际上，我想使用 FB.login() 方法来检查用户是否授予了一些扩展权限，或者更好的是，获取一个 FB 对话框，如果他没有，则提示用户授予权限。

我使用的 JS 代码：

```
FB.login(function(response) {
    if (response.authResponse) {
        console.log(authResponse);
    }
}, {scope: 'publish_actions'}); 
```

执行此操作时，Facebook 会显示一个叠加层，上面写着“传递 access_token 时使用 SSL (https)”。

[这是一个屏幕截图](http://seck.sc-dev2.de/fb-ssl-error.png)。

我用谷歌搜索了这条消息，但没有得到一个结果（[认真](https://www.google.de/search?q=%22Use%20SSL%20%28https%29%20when%20passing%20an%20access_token%22)的）。

这似乎只出现在具有“新”登录对话框的用户身上（首先要求用户访问公共个人资料和朋友列表，然后在一个可以跳过的新对话框中，它要求扩展权限）。对于仍然拥有旧登录对话框的用户，它应该可以正常工作。

该应用程序是沙盒的，我正在浏览没有 SSL 的 FB。我无法切换到 SSL，因为我正在开发的服务器不支持它。我无法改变这一点，它也不会真正解决这个问题。并且：我从来没有因为非 SSL 应用托管而遇到麻烦。这是我第一次遇到 FB 以这种方式抱怨缺少 SSL。

我还确保 FB 的 all.js 是从 https:// url 获取的，不幸的是它没有改变任何东西。

想法，有人吗？由于 0 谷歌结果，恐怕这不是一个真正的已知问题，或者它太愚蠢了，没有人不得不写它......：D

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:43:28.087

有一个错误报告，它被分配了高优先级（在写这个答案的那一刻）：看看这里：

[https://developers.facebook.com/bugs/416916061737216?browse=search_515d67216f3885909623600](https://developers.facebook.com/bugs/416916061737216?browse=search_515d67216f3885909623600)

# string - 从字符串中获取数字 - php

> ID：15809840
> 
> 赞同：0
> 
> 时间：2013-04-04T11:28:05.470
> 
> 标签：string, variables, get

我有这个字符串：

> 子类别 19，类别 1

我想从中获得这些价值：

> 19
> 
> 1

在两个单独的变量中。

我尝试了很多方法，在互联网上，但我不能用其中任何一个来做。

任何想法 ？

谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:35:33.553

Considering the format to be:

> subcategory[X],category[Y]

the you use `explode` in order to split the string in two by the `,`. Then you'll have two strings in the format `subcategory[X]` and `category[Y]` which can be simplified by removing `subcategory` and `category` which will return the two numeric values in the string. At this point you just need of the `(int)` cast.

Here's an example:

```
$string; // the string
$ar = explode(',', $string);
$x = (int) str_ireplace('subcategory', '', $ar[0]);
$y = (int) str_ireplace('category', '', $ar[1]); 
```

Notice that this is optimized (and don't use REGEX) but will work only with the fixed format provided above. Therefore `category12,subcategory4`, `subcategory24` or `subcategory97category90` will trigger errors.

# c - 如何获取结构中的元素总数

> ID：15809843
> 
> 赞同：1
> 
> 时间：2013-04-04T11:28:13.837
> 
> 标签：c, struct

这是我的代码..

```
#include <stdio.h>

struct new {
    unsigned short b0 = 0;
    unsigned short b1 = 0;
    unsigned short b2 = 0;
    unsigned short b3 = 0;
    unsigned short b4 = 0;
    unsigned short b5 = 0;
    unsigned short b6 = 0;
    unsigned short b7 = 0;
};

int main()
{
    printf("Bit Field Example\n");
    struct new b; //Seems wrong to me
    int result = sizeof(b)/sizeof(*b); //Seems wrong to me
    printf("Size: %d\n", result);
    return 0;
} 
```

我正在使用 linux 机器来编译上述代码。我知道下面的行是错误的..

```
int result = sizeof(b)/sizeof(*b); 
```

但我不确定其他任何技术。首先，是否可以计算结构中元素的总数。？请给我一些关于如何做的想法。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T11:29:23.553

不便携，一般，或安全，不。

由于编译器可能会出于对齐和其他原因添加填充，这会使大小增加，因此不可能依赖正确的值。

如果元素的数量很重要，最好使用数组。

顺便说一句，这段代码：

```
int result = sizeof(b)/sizeof(*b); 
```

是错误的，不会编译；`b`不是指针，因此`*b`不是合法表达式。你的意思是：

```
const int result = sizeof b / sizeof b.b0; 
```

另外，作为旁注，避免在 C 代码中使用 C++ 关键字，这可能会有些混乱。

**更新**我不明白您对“位域”的引用。它们看起来像这样，并且只能出现在结构中：

```
struct strawberry {
  unsigned short fields : 10;
  unsigned short forever : 6;
}; 
```

同样，无法计算它们，因为它们甚至没有字节大小。但另一方面，您编写的定义包括每个字段的位宽，所以您应该知道有多少，对吧？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T11:32:40.823

使用`sizeof(x) / sizeof(*x)`用于*数组*而不是结构。由于结构不是可变大小的，所有字段在编译时都是固定的，实际上不需要计算元素的数量。

如果你想知道一个结构中有多少个字段，你必须自己数一数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-18T03:05:17.377

由于 C 是静态类型的，因此无法在运行时执行此操作。因此，唯一的方法是使用宏。然后宏可以在编译时生成这个数字。[我已经在另一篇文章](https://stackoverflow.com/a/38427990/2089675)中展示了如何做到这一点。

基本思想是使用[**X_MACRO**](https://en.wikipedia.org/wiki/X_Macro)，它允许您定义可以对结构成员执行某些操作的特殊 X 函数

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-12-05T06:35:31.213

如果要计算结构中元素的数量是：

```
struct tag=&p; 
```

如果增加 p++ 并且每次增加计数并打印计数：

```
p++;

if(i=o;i<arr[i];i++)

count++;
printf("%d",count); 
```

我认为这是正确的。

# c# - 在 C# 中创建 Form2 并对其进行编辑

> ID：15809846
> 
> 赞同：2
> 
> 时间：2013-04-04T11:28:18.443
> 
> 标签：c#, winforms, visual-studio-2010, visual-studio, solution-explorer

所以我对 C# 非常非常陌生，对编程也比较陌生。我决定通过为我的侄女编写一个程序来学习，但是我在尝试了解如何使用 VS 2010 中的可视化设计器来管理我的“Form2”时遇到了一些问题。

到目前为止我的代码在调试中运行没有问题，并且表单启动正常，但我在解决方案资源管理器中找不到它。我敢肯定，这有一个非常简单的解决方案，我觉得问它很愚蠢，但我在谷歌上找不到它，或者我只是不知道如何表达这个问题。

```
namespace WindowsFormsApplication2
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void azbuka_Click(object sender, EventArgs e)
        {
            Form2 azbukatest = new Form2();
            azbukatest.ShowDialog();
        }
    }

    public partial class Form2 : Form
    {
        public Form2()
        {

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:33:39.977

看起来您在与第一个相同的类中定义了第二个表单，而不是制作另一个完整的表单。`Add`如果您想要完整的设计器，请使用项目中的按钮创建一个新表单：

![在此处输入图像描述](https://i.stack.imgur.com/6Iy0j.png)

这样，Visual Studio 将处理所有额外的细节，让您可以利用设计师和许多其他特权。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:32:59.937

按照这个演练。下次搜索然后发布问题。这是基本的东西，您可以轻松找到教程/演练。

[http://msdn.microsoft.com/en-us/library/vstudio/dd492132.aspx](http://msdn.microsoft.com/en-us/library/vstudio/dd492132.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T11:33:09.110

C# winforms 有两个组件，一个 Designer 和 Code Behind。

你在这里写的只是后面的代码，它包含逻辑、事件等。

视觉形式是设计者，它拥有按钮和文本框等 UI 元素。

尝试在项目中使用 Visual Studio 菜单（添加-> 新建 -> 表单）添加表单，它将添加相关文件。

此外，如果您创建一个新类，它不会自动作为新文件出现在解决方案资源管理器中，请尝试查看“类视图”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T11:34:17.377

如果您想要生成一个可以在解决方案资源管理器中访问的表单，您应该右键单击项目名称，然后单击**添加-> 新项目**，然后从那里选择 Windows 表单。

这将创建一个您可以在 IDE 中编辑的表单。记得删除

```
public partial class Form2 : Form
{
    public Form2()
    {

    }
} 
```

如果您希望将其称为**Form2 ，则在执行此操作之前（因为通过****Add Item**创建表单将为您创建此代码

# python - __getattr__ 在 python 的一个模块中

> ID：15809849
> 
> 赞同：0
> 
> 时间：2013-04-04T11:28:20.340
> 
> 标签：python, iteration, getattr

我正在使用 python。我想知道同一个模块中是否存在任何方法。我想`getattr()`这样做，但我做不到。这是示例代码，说明了我真正想要做什么。

```
#python module is my_module.py
def my_func():
    # I want to check the existence of exists_method
    if getattr(my_module, exists_method):
       print "yes method "
       return
    print "No method"
def exists_method():
    pass 
```

我的主要任务是动态调用定义的方法。如果未定义，只需跳过该方法的操作并继续。我有一个数据字典，根据键我定义了一些必要的方法来操作相应的值。例如数据是 `{"name":"my_name","address":"my_address","...":"..."}`. 现在我定义了一个方法`name()`，我想动态地知道它是否真的存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:31:38.700

您需要以字符串形式查找*名称*；我会用`hasattr()`这里来测试这个名字：

```
if hasattr(my_module, 'exists_method'):
    print 'Method found!" 
```

如果`my_module.exists_method`存在，则此方法有效，但如果您在*内部* `my_module`运行此代码，则无效。

如果`exists_method`包含在*当前*模块中，则需要使用`globals()`它来测试它：

```
if 'exists_method' in globals():
    print 'Method found!' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:37:47.817

您可以使用[dir](http://docs.python.org/3/library/functions.html#dir)，

```
>>> import time
>>> if '__name__' in dir(time):
...     print 'Method found'
... 
Method found 
```

# android - 可怕的 ImageView 位图质量？

> ID：15809859
> 
> 赞同：7
> 
> 时间：2013-04-04T11:28:45.183
> 
> 标签：android, android-imageview

我有一个带有`ImageView`背景部分的启动画面。无论我是否允许缩放我的位图（我这样做），图像质量都很糟糕。我认为它会降低颜色深度。我已经环顾四周了，一个建议是将我的图像放入`raw`而不是，`drawable`但这也无济于事。这是一个屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/fU4JA.png)

这里到底发生了什么，我该如何解决？

编辑：我没有以编程方式应用此位图，因此没有相关的 Java 代码。这是此活动的 XML 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/RelativeLayoutSplash"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:drawingCacheQuality="high"
    android:orientation="vertical"
    android:padding="@dimen/splash_padding"
    android:scrollbarAlwaysDrawVerticalTrack="true"
    tools:context=".SplashActivity" >

    <ImageView
        android:id="@+id/ImageViewBg"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:contentDescription="@string/logo_description"
        android:scaleType="centerCrop"
        android:src="@drawable/splash_bg_register" />

    <ImageView
        android:id="@+id/ImageViewLogo"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:contentDescription="@string/logo_description"
        android:maxHeight="@dimen/logo_maxheight"
        android:maxWidth="@dimen/logo_maxwidth"
        android:layout_centerVertical="true"
        android:src="@drawable/logo" />

    <TextView
        android:id="@+id/TextViewCopyright"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text="@string/copyright"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="@color/white_50"
        android:textSize="@dimen/copyright_size" />

</RelativeLayout> 
```

编辑：我按照建议进行了尝试`getWindow().setFormat(PixelFormat.RGBA_8888);`，这产生了明显的差异，但条带仍然存在。[这](http://goo.gl/oSHrp)是我用作背景的图像。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T05:52:54.237

条带主要发生在图像的纵横比受到干扰时。

您可以尝试以下任何一种方法：

1.  制作你的形象`.9.png`。在这种情况下，它会自动修复任何拉伸并处理条带。

2.  对您的图像应用表面抖动，这可能会防止任何不寻常的条带。

    ```
    <bitmap
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:src="@drawable/b1"
        android:tileMode="repeat"
        android:dither="true" /> 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T11:49:18.377

您的图像尺寸是多少？什么是设备？我怀疑图像大小与显示器的大小不匹配，并且它位于错误的资源可绘制文件夹中。图像看起来很缩放。这些文章应该可以帮助您选择不同屏幕的图像分辨率和资源文件夹。

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

[http://developer.android.com/training/multiscreen/index.html](http://developer.android.com/training/multiscreen/index.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T11:54:25.097

您必须设置窗口颜色格式。在你的活动中放这样的东西：

```
getWindow().setFormat(PixelFormat.RGBA_8888); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T08:59:09.977

我猜图像的大小小于显示图像的区域。因此，可能是图像放大并降低了质量。

```
What you can try is:

1\. Either put the image of similar dimension 
2\. use 9 patch image ( good idea ) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T10:59:12.903

您需要将图像调整为不同的大小，并将它们放入各自的可绘制文件夹中`res/`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T14:32:54.673

尝试抗锯齿，这可能会解决您的问题。

使用以下 xml 创建一个可绘制的位图。

```
<bitmap
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/background"
    android:antialias="true"
    android:dither="true"  /> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-12T13:17:01.497

> 您正在做的是在 xml 中设置图像，这更多地取决于该图像分辨率支持的内容。

每个支持的多个设备的密度都有多个文件夹，将您的图像放在某个合适的 dpi 文件夹中。

请参阅此链接[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

查看相同的应用程序图标如何在不同文件夹中表现不同

不支持不同密度的示例应用程序，如低、中和高密度屏幕上所示

![不支持不同密度的示例应用程序，如低、中和高密度屏幕上所示。](https://i.stack.imgur.com/cA9TZ.png)

![在此处输入图像描述](https://i.stack.imgur.com/KYgaU.png)

对不同密度有良好支持的示例应用程序（它与密度无关），如低、中和高密度屏幕上所示。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-01-08T00:58:49.187

只需通过使图像成为背景图像来调整它。这是一个示例代码

```
 <ImageView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/your_image"
    /> 
```

# c# - 查找相关的 MVC 模板

> ID：15809862
> 
> 赞同：0
> 
> 时间：2013-04-04T11:28:52.627
> 
> 标签：c#, .net, templates, asp.net-mvc-2

我的主视图调用模板视图如下：

```
 <%: Html.EditorFor(model => model.AuthorizedCreditCard)%> 
```

我的模板如下：

![在此处输入图像描述](https://i.stack.imgur.com/rZkAa.png)

以上两个模板都使用相同的模型（即`model.AuthorizedCreditCard`）。

所以我的问题是当我打电话时如何找到正在运行的模板`EditorFor`。

我想要一个**技术解释**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:24:37.727

默认情况下，`EditorFor`助手使用名称与正在编辑的类型名称匹配的模板。所以，如果你`AuthorizedCreditCard`是一个名为 的实例`AuthorizedCreditCard`，那么它应该使用`AuthorizedCreditCard.ascx`. 如果您想使用其他内容，可以将所需模板的名称作为字符串传递，因此：

```
<%: Html.EditorFor(model => model.AuthorizedCreditCard, "AuthorizedCreditCardEditer")%> 
```

# c# - 实体框架使用 Sub Select 而不是 INNER JOIN

> ID：15809863
> 
> 赞同：3
> 
> 时间：2013-04-04T11:28:53.240
> 
> 标签：c#, .net, sql, entity-framework, entity-framework-4

我有以下课程，例如

```
public class Team
{
    [Key]
    public virtual Int32 TeamId { get; set; }
    [Required]
    public virtual String Name { get; set; }
    public virtual String Description { get; set; }
    public virtual ICollection<TeamFeed> TeamFeeds { get; set; }
}

public class TeamFeed
{       
    public Int32 TeamFeedId { get; set; }
    [Required]
    public Int32 TeamId { get; set; }
    public virtual bool IsEnabled { get; set; }
    public virtual Team Team { get; set; }
} 
```

我有`LazyLoadingEnabled = false`和`ProxyCreationEnabled = false`

当我做

```
var team = db.Teams.Where(x => x.TeamId == 1).Include(x=>x.TeamFeeds); 
```

EF 生成的 SQL 如下所示：

```
SELECT 
[Project1].[TeamId] AS [TeamId], 
[Project1].[Name] AS [Name], 
[Project1].[Description] AS [Description], 
[Project1].[C1] AS [C1], 
[Project1].[TeamFeedId] AS [TeamFeedId], 
[Project1].[TeamId1] AS [TeamId1], 
[Project1].[IsEnabled] AS [IsEnabled], 
FROM ( SELECT 
    [Extent1].[TeamId] AS [TeamId], 
    [Extent1].[Name] AS [Name], 
    [Extent1].[Description] AS [Description],  
    [Extent2].[TeamFeedId] AS [TeamFeedId], 
    [Extent2].[TeamId] AS [TeamId1], 
    [Extent2].[IsEnabled] AS [IsEnabled],  
    CASE WHEN ([Extent2].[TeamFeedId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1]
    FROM  [dbo].[Teams] AS [Extent1]
    LEFT OUTER JOIN [dbo].[TeamFeeds] AS [Extent2] ON [Extent1].[TeamId] = [Extent2].[TeamId]
    WHERE 1 = [Extent1].[TeamId]
)  AS [Project1]
ORDER BY [Project1].[TeamId] ASC, [Project1].[C1] ASC 
```

我不明白为什么它没有使用我会使用的 SQL 并创建了一个冗长的 SQL 语句。

```
SELECT 
* --use all just for clarity in the example
FROM TEAMS T

INNER JOIN TEAMFEEDS TF
ON T.TEAMID = TF.TEAMID

ORDER BY 
T.TEAMID 
```

我是 EF 的新手，所以我可能不理解某些东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:40:48.907

首先，当 Team with没有提要时，您的查询使用`INNER JOIN`不会返回任何内容。必须在这里使用，这就是 EF 在ineer 中所做的：`TeamID = 1``LEFT JOIN``SELECT`

```
SELECT 
    *
    FROM  [dbo].[Teams] AS [Extent1]
    LEFT OUTER JOIN [dbo].[TeamFeeds] AS [Extent2] ON [Extent1].[TeamId] = [Extent2].[TeamId]
    WHERE 1 = [Extent1].[TeamId] 
```

遵循*可怕*的路线只是让 EF 知道，如果指定了左侧站点-如果团队没有提要并且至少找到一个提要，`JOIN`它将返回。`0``1`

```
CASE WHEN ([Extent2].[TeamFeedId] IS NULL) THEN CAST(NULL AS int) ELSE 1 END AS [C1] 
```

而外部`SELECT`语句只是将数据库列名称映射到 EF 模型属性名称并执行`ORDER BY`。

希望这足以解释为什么 EF 生成*了如此冗长的 SQL 语句*。或者更确切地说，为什么这句话看起来很吓人，但实际上并不比你的简单`SELECT * FROM Teams JOIN Feeds`。

# asp.net - 调试 IIS 中托管的 asp.net WCF 服务

> ID：15809865
> 
> 赞同：6
> 
> 时间：2013-04-04T11:29:15.367
> 
> 标签：asp.net, wcf, iis, iis-7

我使用以下模板创建了 WCF 服务：

[http://visualstudiogallery.msdn.microsoft.com/fbc7e5c1-a0d2-41bd-9d7b-e54c845394cd](http://visualstudiogallery.msdn.microsoft.com/fbc7e5c1-a0d2-41bd-9d7b-e54c845394cd)

该服务有一个这样的方法：

```
[ServiceContract]
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]    
    public class RecordingCompleted
    {

        [WebInvoke(UriTemplate = "", Method = "POST")]
        public string ProcessCall(string JsonData)
        {

        }

    } 
```

我在 IIS 上托管了这个服务，方法的 url 是：

http://[本地] 主机/通知/RecordingCompleted/

当我在地址栏中输入此地址时，我得到：

```
Method not allowed. Please see the service help page for constructing valid requests to the service. 
```

我正在尝试使用以下代码使用此 Web 服务：

string serviceBaseUrl = "http://[本地] 主机/Notifications/RecordingCompleted/";

```
 string resourceUrl = "";
        string method = "POST";
        //string jsonText = "}";
        UseHttpWebApproach(serviceBaseUrl, resourceUrl, method, jsonText); 
```

方法是：

```
 private string UseHttpWebApproach(string serviceUrl, string resourceUrl, string method, string requestBody)
        {
            string responseMessage = null;
            var request = WebRequest.Create(string.Concat(serviceUrl, resourceUrl)) as HttpWebRequest;
            if (request != null)
            {
                request.ContentType = "application/json";
                request.Method = method;                 
            }

            //var objContent = HttpContentExtensions.CreateDataContract(requestBody);
            if (method == "POST" && requestBody != null)
            {
                byte[] requestBodyBytes = ToByteArrayUsingJsonContractSer(requestBody);
                request.ContentLength = requestBodyBytes.Length;
                using (Stream postStream = request.GetRequestStream())
                    postStream.Write(requestBodyBytes, 0, requestBodyBytes.Length);

            }

            if (request != null)
            {
                var response = request.GetResponse() as HttpWebResponse;
                if (response.StatusCode == HttpStatusCode.OK)
                {
                    Stream responseStream = response.GetResponseStream();
                    if (responseStream != null)
                    {
                        var reader = new StreamReader(responseStream);

                        responseMessage = reader.ReadToEnd();
                    }
                }
                else
                {
                    responseMessage = response.StatusDescription;
                }
            }
            return responseMessage;
        }

 private static byte[] ToByteArrayUsingJsonContractSer(string requestBody)
    {
        byte[] bytes = null;
        var serializer1 = new DataContractJsonSerializer(typeof(string));
        var ms1 = new MemoryStream();
        serializer1.WriteObject(ms1, requestBody);
        ms1.Position = 0;
        var reader = new StreamReader(ms1);
        bytes = ms1.ToArray();
        return bytes;
    } 
```

我正在尝试调试服务方法，但我不知道该怎么做。请告诉我为什么在地址栏中键入 http://[local] host/Notifications/RecordingCompleted/ 时出现错误。以及如何调试托管在本地主机上的服务？

问候， 阿西夫·哈米德

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-04T14:14:47.503

在调试之前，您必须将 dll 和 pdb 部署到 IIS 目录。接下来，在您的VS中单击调试->附加到进程。“确保检查所有用户的显示进程”和“在所有会话中显示进程”您现在应该在可用进程列表中看到W3WP进程。选择 W3WP 并单击附加。![VS附上截图](https://i.stack.imgur.com/1snq2.png)

您现在应该能够调试 WCF 服务。更多调试技巧请参考以下博客

[http://dhawalk.blogspot.com/2007/07/debugging-tips-in-c.html](http://dhawalk.blogspot.com/2007/07/debugging-tips-in-c.html) [http://anilsharmadhanbad.blogspot.com/2009/07/debugging-wcf-service-hosted-in-local.html](http://anilsharmadhanbad.blogspot.com/2009/07/debugging-wcf-service-hosted-in-local.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T14:33:56.943

尝试浏览到 WCF 的 URL 时出现“方法不允许”错误可能有多种原因：

1) ASP.NET 版本没有正确配置 IIS （重新运行 aspnet_regiis.exe 应用程序以获得适当版本的 .NET）

2) .svc 文件未映射为使用 aspnet_isapi.dll（再次，重新运行 aspnet_regiis.exe）

3) IIS 是在 WCF 框架*之后*安装的：对于这个，你需要运行这个应用程序，其中 'xx' 是当然的版本："%WINDIR%\Microsoft.Net\Framework\xx\Windows Communication Foundation\ ServiceModelReg.exe" -r

查看[这篇文章](http://msdn.microsoft.com/en-us/library/ms752252.aspx)，进一步了解 IIS/ASP.NET 配置问题...

但是，我发现“方法不允许”的*通常原因是由于我在 web.config 中犯的一个错误：绑定信息中的拼写错误这样简单的事情都会导致它。*查看您的 web.config 并确保 URL 是正确的。

如果您已经用尽了所有这些途径，但仍然遇到“不允许的方法”，请尝试使用[服务跟踪查看器工具](http://msdn.microsoft.com/en-us/library/ms732023.aspx)，它可以提供有关问题所在的更多信息。

# xml - 如何将 xsi schemalocation 添加到根 c# object XmlSerializer

> ID：15809868
> 
> 赞同：17
> 
> 时间：2013-04-04T11:29:29.087
> 
> 标签：xml, xml-serialization, xsd, xml-namespaces

我正在使用 XmlSerializer 创建一个表示 XML 文件的对象，现在我想向我的 xml 文件的根元素添加一个模式位置。我可以添加如下命名空间

```
 XmlSerializer serializer = new XmlSerializer(typeof(MyClass));
        System.IO.FileStream fs = new FileStream(@"C:\test.xml", FileMode.Create);
        TextWriter writer = new StreamWriter(fs, new UTF8Encoding());

        XmlSerializerNamespaces ns = new XmlSerializerNamespaces();
        ns.Add("xy","http://www.w3.org/2005/08/addressing");
        ns.Add("xlink","http://www.w3.org/1999/xlink");
        serializer.Serialize(writer, myObject, ns); 
```

但是如何`xsi:schemalocation`在我的 c# 代码中向我的根元素添加一个属性。命名空间添加了一个简单的`ns.Add()`. 我想避免弄乱 xsd.exe 生成的 c# 类。还是我必须手动编辑生成的 c# 类并向我的 xml 的根元素添加一些属性？

**编辑：**我已经看到我需要手动编辑我的 c# 的示例，但必须有一种方法可以在代码中完成它！如果我们能够将命名空间添加到我们的根元素，为什么不能添加模式位置？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-09-11T17:04:22.340

XSD.exe 生成分部类，因此您可以添加自己的单独分部类来将 xsi:schemaLocation 等内容保存为字段或属性。

因此，添加到@Petru Gardea 的示例 elementB 类中，您只需在项目中创建另一个文件并添加此部分类：

```
public partial class elementB 
{
    [XmlAttributeAttribute("schemaLocation", Namespace="http://www.w3.org/2001/XMLSchema-instance")]
    public string xsiSchemaLocation = "http://www.acme.com/xml/OrderXML-1-0.xsd";
} 
```

我在执行此操作时遇到了一个问题，默认情况下 xsd.exe 不会向生成的文件添加命名空间。当您创建自己的这个部分类时，它很可能位于命名空间中。由于 < *default namespace* > 和明确定义的命名空间不匹配，因此 partial 不起作用。因此，您需要使用 xsd.exe 上的命名空间选项来实际将生成的类放入您的命名空间。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-11T23:04:14.153

让我们假设以下 XSD：

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com) -->
<xsd:schema targetNamespace="http://tempuri.org/XMLSchema.xsd" xmlns="http://tempuri.org/XMLSchema.xsd" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="elementB">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="FirstName" type="xsd:string"/>
                <xsd:element name="LastName" type="xsd:string"/>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>  
</xsd:schema> 
```

至少有两种方法可以做到这一点。第一个依赖于继承以及如何使用序列化器注释。

xsd.exe 生成这个：

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.18034
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System.Xml.Serialization;

// 
// This source code was auto-generated by xsd, Version=4.0.30319.1.
// 

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true, Namespace="http://tempuri.org/XMLSchema.xsd")]
[System.Xml.Serialization.XmlRootAttribute(Namespace="http://tempuri.org/XMLSchema.xsd", IsNullable=false)]
public partial class elementB {

    private string firstNameField;

    private string lastNameField;

    /// <remarks/>
    public string FirstName {
        get {
            return this.firstNameField;
        }
        set {
            this.firstNameField = value;
        }
    }

    /// <remarks/>
    public string LastName {
        get {
            return this.lastNameField;
        }
        set {
            this.lastNameField = value;
        }
    }
} 
```

要“注入”`xsi:schemaLocation`添加一个新类`elementA : elementB`，注意：

*   System.Xml.Serialization.XmlRootAttribute 设置
*   `schemaLocation`属性设置。

测试程序：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml.Serialization;
using System.IO;
using System.Xml;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            elementB b = new elementB();
            b.FirstName = "P";
            b.LastName = "G";

            XmlSerializer ser = new XmlSerializer(typeof(elementB));
            StringBuilder sb = new StringBuilder();
            using (XmlWriter writer = XmlWriter.Create(sb, new XmlWriterSettings() { Indent = true })) 
            {
                ser.Serialize(writer, b);
            }
            Console.WriteLine(sb.ToString());

            elementA a = new elementA();
            a.FirstName = "P";
            a.LastName = "G";
            a.schemaLocation = "http://tempuri.org/XMLSchema.xsd me";
            ser = new XmlSerializer(typeof(elementA));
            sb = new StringBuilder();
            using (XmlWriter writer = XmlWriter.Create(sb, new XmlWriterSettings() { Indent = true }))
            {
                ser.Serialize(writer, a);
            }
            Console.WriteLine(sb.ToString());
        }
    }
}

[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true, Namespace = "http://tempuri.org/XMLSchema.xsd")]
[System.Xml.Serialization.XmlRootAttribute(Namespace = "http://tempuri.org/XMLSchema.xsd", ElementName = "elementB", IsNullable = false)]
public partial class elementA : elementB
{

    private string torefField;

    /// <remarks/>
    [System.Xml.Serialization.XmlAttributeAttribute(Form = System.Xml.Schema.XmlSchemaForm.Qualified, Namespace = "http://www.w3.org/2001/XMLSchema-instance")]
    public string schemaLocation
    {
        get
        {
            return this.torefField;
        }
        set
        {
            this.torefField = value;
        }
    }
} 
```

生成预期结果：

```
<?xml version="1.0" encoding="utf-16"?>
<elementB xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://tempuri.org/XMLSchema.xsd">
  <FirstName>P</FirstName>
  <LastName>G</LastName>
</elementB>
<?xml version="1.0" encoding="utf-16"?>
<elementB xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xsi:schemaLocation="http://tempuri.org/XMLSchema.xsd me" xmlns="http://tempuri.org/XMLSchema.xsd">
  <FirstName>Petru</FirstName>
  <LastName>Gardea</LastName>
</elementB> 
```

第二种方式依赖于自定义编写器，它将在任何你想要的地方注入你想要的东西（假设有适当的逻辑）。

您实现了一个自定义 XmlWriter：

```
class MyXmlWriter : XmlWriter
{
    XmlWriter _writer;
    bool _docElement = true;

    public string SchemaLocation { get; set; }
    public string NoNamespaceSchemaLocation { get; set; }

    public MyXmlWriter(XmlWriter writer)
    {
        _writer = writer;
    }

    (other methods omitted)

    public override void WriteStartElement(string prefix, string localName, string ns)
    {
        _writer.WriteStartElement(prefix, localName, ns);
        if (_docElement)
        {
            if (!string.IsNullOrEmpty(SchemaLocation))
            {
                _writer.WriteAttributeString("xsi", "schemaLocation", "http://www.w3.org/2001/XMLSchema-instance", SchemaLocation);
            }
            if (!string.IsNullOrEmpty(NoNamespaceSchemaLocation))
            {
                _writer.WriteAttributeString("xsi", "noNamesapceSchemaLocation", "http://www.w3.org/2001/XMLSchema-instance", NoNamespaceSchemaLocation);
            }
            _docElement = false;
        }
    }

    (other methods omitted)

} 
```

修改后的测试程序：

```
static void Main(string[] args)
{
    elementB b = new elementB();
    b.FirstName = "P";
    b.LastName = "G";

    XmlSerializer ser = new XmlSerializer(typeof(elementB));
    StringBuilder sb = new StringBuilder();
    using (XmlWriter writer = XmlWriter.Create(sb, new XmlWriterSettings() { Indent = true })) 
    {
        ser.Serialize(writer, b);
    }
    Console.WriteLine(sb.ToString());

    sb = new StringBuilder();

    using (XmlWriter writer = XmlWriter.Create(sb, new XmlWriterSettings() { Indent = true }))
    {
        MyXmlWriter newWriter = new MyXmlWriter(writer) { SchemaLocation = "http://tempuri.org/XMLSchema.xsd me" };
        ser.Serialize(newWriter, b);
    }
    Console.WriteLine(sb.ToString());
} 
```

结果是一样的...

```
<?xml version="1.0" encoding="utf-16"?>
<elementB xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://tempuri.org/XMLSchema.xsd">
  <FirstName>P</FirstName>
  <LastName>G</LastName>
</elementB>
<?xml version="1.0" encoding="utf-16"?>
<elementB xsi:schemaLocation="http://tempuri.org/XMLSchema.xsd me" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://tempuri.org/XMLSchema.xsd">
  <FirstName>P</FirstName>
  <LastName>G</LastName>
</elementB> 
```

# iphone - 如何使视图像皱纸一样具有动画效果

> ID：15809871
> 
> 赞同：0
> 
> 时间：2013-04-04T11:29:41.437
> 
> 标签：iphone, ios, objective-c, animation

单击按钮时，我想在视图上像皱纸一样给出动画并放在视图的右下角，请给我任何解决方案来完成此任务，您也可以查看此链接以获得皱纸效果。

[http://vimeo.com/2243632](http://vimeo.com/2243632)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:18:54.237

在 Xcode 中没有解决它的标准方法。

采取完整的解决方案：[https ://github.com/melfar/crumpledpaper](https://github.com/melfar/crumpledpaper)

# javascript - 向管理输入和文本区域添加字符数

> ID：15809872
> 
> 赞同：2
> 
> 时间：2013-04-04T11:29:42.970
> 
> 标签：javascript, magento, prototypejs

我想在我的 Magento 商店管理员的产品详细信息页面中的每个输入和文本区域中添加一个字符数。

我习惯了 jQuery，但如果可能的话，我宁愿为此使用默认的 Prototype 库。我在某处找到了这段代码，它专门针对简短的描述和描述字段，使用它们的 ID 来定位它们：

```
Event.observe(window, 'load', function() {

Element.insert( $('short_description').up().next().down('span'), { 
    'after': "<div id='short_description_counter'>Char count: <span id='short_description_counter_num'>"+$('short_description').getValue().length+"</span></div>"
});
Element.insert( $('description').up().next().down('span'), { 
    'after': "<div id='description_counter'>Char count: <span id='description_counter_num'>"+$('description').getValue().length+"</span></div>"
});

Event.observe('short_description', 'keyup', function(event) {   $("short_description_counter_num").update(this.getValue().length);  });
Event.observe('description', 'keyup', function(event) { $("description_counter_num").update(this.getValue().length);    });
}); 
```

有原型经验的人可以告诉我如何编辑它，以便它在每个输入和文本区域上运行，而不是指定 ID？我假设有一些 each(function) 可以使用。

更新：这是在 textarea 上工作的当前代码，由它的 ID 指定 - [http://jsbin.com/isisur/2/edit](http://jsbin.com/isisur/2/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:53:36.537

我的原型生锈了，但我*认为*这会起作用：

```
Event.observe(window, 'load', function() {
    $$('input[type="text"], textarea').each( function(i) {
        var my_id = $(i).readAttribute('id');
        $(i).insert({ 
            'after': "<div id='"+my_id+"_counter'>Char count: <span id='"+my_id+"_counter_num'>"+$(i).getValue().length+"</span></div>"
        });
        $(i).observe('keyup', function(e) {
            $(my_id+"_counter_num").update($(this).getValue().length);
        });
    });
}); 
```

[JSFiddle](http://jsfiddle.net/gDvsG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-12T10:39:31.940

一个更灵活的代码，适用于每个带有类`validate-length`和的字段`maximum-length-XXX`：

```
document.observe('dom:loaded', function() {
    Element.addMethods({
        prepare_for_countdown: function(element) {
            var elm = $(element);
            if(!elm.retrieve('counter')) {
                var counter = new Element('span');
                elm.next('.note').insert(counter);
                elm.store('counter', counter);
                var maxLen = elm.className.match(/maximum-length-(\d+)/)[1];
                elm.store('maxLen', maxLen);
            }
            return elm;
        },
        countdown: function(element) {
            var elm = $(element);
            var curLen = elm.getValue().length;
            var maxLen = elm.retrieve('maxLen');
            var count  = maxLen - curLen;
            var counter = elm.retrieve('counter');
            if (curLen >= maxLen) {
                counter.update(' (' + count + ')').setStyle({'color': 'red'});
            } else {
                counter.update(' (+' + count + ')').setStyle({'color': 'green'});
            }
            return elm;
        }
    });

    $$('.validate-length').invoke('prepare_for_countdown').invoke('countdown');

    document.on('keyup', '.validate-length', function(evt, elm) {
        elm.countdown();
    });
}); 
```

来自：[Prototype.js 1.7 未捕获的异常：语法错误，无法识别的表达式：[object HTMLInputElement]](https://stackoverflow.com/questions/44431611/prototype-js-1-7-uncaught-exception-syntax-error-unrecognized-expression-obj/44436408#44436408)

# tortoisehg - TortoiseHg - 如何从 api 刷新文件列表？

> ID：15809873
> 
> 赞同：0
> 
> 时间：2013-04-04T11:29:47.557
> 
> 标签：tortoisehg, mercurial-api

我在仓库中有一些具有特定二进制格式的文件。我想看看它的内容。对于这样的二进制文件，我放入了 repo 特定的 txt 文件，其中包含 md5 和二进制文件中的好内容。

为了尽量减少手动操作，我在 python 中编写了 precommit 钩子，它可以查看二进制文件的变化并检查 txt 格式的文件是否与新的二进制文件匹配。

如果匹配失败，hook 会自动刷新 txt-content 并且不允许提交。

在这里我需要手动按下 F5 来刷新更改列表，因为 TortoiseHG 不包含在已修改的提交文件中，但不存在于列表中......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:52:34.083

没有任何其他决定，我模拟按 ctypes.windll.user32.SendInput 按下 F5 :)

# codeigniter - ion_auth ：当用户注册时触发发送电子邮件

> ID：15809879
> 
> 赞同：0
> 
> 时间：2013-04-04T11:29:56.900
> 
> 标签：codeigniter, codeigniter-2, ion-auth

当新用户在我的网站上注册时发送某些电子邮件。我该怎么做呢 。我将在哪里附上我的代码。什么类和什么功能..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:04:23.033

查看您的 ion_auth 配置文件；有一个设置：

```
$config['email_activation']     = FALSE; 
```

设置为true，然后查看您的视图找到activate.tpl.php 以根据需要进行自定义

# android - 使用上下文为 Android 中的广播接收器注册和注销接收器

> ID：15809880
> 
> 赞同：0
> 
> 时间：2013-04-04T11:29:57.210
> 
> 标签：android, broadcastreceiver, nested-class

我有一个不扩展 Activity 或 Service 的嵌套类，但是这个内部类有一个用于接收广播意图的广播接收器。

因为这个类里面没有任何 onCreate 或 onDestroy 回调方法。有人告诉我，我可以以某种方式使用从 Activity 类传递给这个内部类的上下文，并使用该上下文来注册接收器。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:39:18.677

您可以像这样引用外部类实例：`Context context = OuterClassNameActivity.this`。

# java - java.lang.NoClassDefFoundError:javax/xml/bind/JAXBContext

> ID：15809882
> 
> 赞同：7
> 
> 时间：2013-04-04T11:29:59.580
> 
> 标签：java

我在我的 Web 项目中使用 JDK 1.5 并使用 maven 进行编译。

我正面临着这个：

```
WebServiceException ("javax.xml.ws.WebServiceException: Provider com.sun.xml.ws.spi.ProviderImpl not found") 
```

在我的项目中。为了解决这个问题，我使用了两种方法：

*   首先，我在我的类路径中添加了 jaxws-rt-2.1.4。（也在 POM.xml 中创建了条目）
*   二、在jre/lib文件夹中添加jar

但在此之后我面临这个：

```
java.lang.NoClassDefFoundError:javax/xml/bind/JAXBContext 
```

有没有人有任何可以帮助我的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:52:06.683

添加对[jaxb-impl](http://search.maven.org/#artifactdetails%7Ccom.sun.xml.bind%7Cjaxb-impl%7C2.2.6%7Cjar)的依赖就足够了，因为它传递地依赖于 jaxb-api，它是包含它所抱怨的类的 JAR。在 Java 6 中，`javax.xml.bind`默认情况下它是 JRE 的一部分，因此它可以开箱即用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:51:37.860

将此依赖项添加到 pom

```
 <dependency>
        <groupId>javax.xml</groupId>
        <artifactId>jaxb-impl</artifactId>
        <version>2.1</version>
    </dependency> 
```

# iphone - 这些控件中的哪一个：我应该选择 UITableViewController 还是 UIViewController？

> ID：15809885
> 
> 赞同：0
> 
> 时间：2013-04-04T11:30:10.737
> 
> 标签：iphone, uiviewcontroller, xcode4, uitableview

我正在尝试实现以下目标（颜色只是为了清楚地定义这些部分） ![在此处输入图像描述](https://i.stack.imgur.com/6XJb3.jpg)

您能否建议我应该使用两个控制器（UITableViewController 或 UIViewController）中的哪一个，以及每个“颜色”应该是一个部分还是一个单元格/行

谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:34:18.673

如果您有更多通用行，则 UITableViewController 将是合适的。您应该做的只是向 UIViewController 添加一些子视图。

# opengl - OpenGL 4.1 GL_ARB_separate_program_objects 的用处

> ID：15809888
> 
> 赞同：4
> 
> 时间：2013-04-04T11:30:21.377
> 
> 标签：opengl

我一直在阅读[这篇](http://www.g-truc.net/post-0320.html)OpenGL4.1 新功能评论。我并不真正理解 GL_ARB_separate_program_objects 用法背后的想法，至少基于帖子作者的说法：

> 它允许独立使用着色器阶段而无需更改其他着色器阶段。我认为它有两个主要原因：Direct3D、Cg 甚至旧的 OpenGL ARB 程序都可以做到，但更重要的是，它带来了一些软件设计灵活性，允许以较低粒度查看图形管道。例如，我最大的敌人 VAO 是一个容器对象，它链接缓冲区数据、顶点布局数据和 GLSL 程序输入数据。如果没有专门的软件设计，这意味着当我更改对象的材质（新的片段着色器）时，我需要不同的 VAO……幸运的是，可以保持相同的 VAO，并且只通过定义如何更改程序的约定来更改程序。在 C++ 程序和 GLSL 程序之间进行通信。即使仍然存在一些缺点，它也能很好地工作。

现在，这一行：

***例如，我最大的敌人 VAO，是一个容器对象，它链接缓冲区数据、顶点布局数据和 GLSL 程序输入数据。没有专门的软件设计，这意味着当我更改对象的材质时（新的片段着色器） , 我需要不同的 VAO...***

让我想知道。在我的 OpenGL 程序中，我使用 VAO 对象，我可以在不同的着色器程序之间切换，而无需对 VAO 本身进行任何更改。那么，我误解了整个想法吗？也许他的意思是我们可以在不重新链接的情况下为同一个程序切换着色器？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T12:06:24.683

我将这个答案分成多个部分。

## ARB_separate_shader_objects 的目的是什么

此功能的目的是能够轻松地在顶点/片段/几何/镶嵌着色器之间进行混合和匹配。

目前，您必须将所有着色器阶段链接到一个整体程序中。所以我可以使用相同的顶点着色器代码和两个不同的片段着色器。但这会导致两个不同的*程序*。

每个程序都有自己的一套制服和其他状态。这意味着如果我想更改顶点着色器中的一些统一数据，我必须在两个程序中都进行更改。我必须`glGetUniformLocation`在每个上使用（因为它们可能有不同的位置）。然后我必须单独设置每个值。

这是一个很大的痛苦，而且是非常不必要的。使用单独的着色器，您不必这样做。您有一个仅包含顶点着色器的程序，以及两个包含两个片段着色器的程序。更改顶点着色器制服不需要两次`glGetUniformLocation`调用。事实上，缓存数据更容易，因为只有一个顶点着色器。

此外，它还处理着色器组合的组合爆炸。

假设您有一个执行简单刚性转换的顶点着色器：它需要一个模型到相机矩阵和一个相机到剪辑矩阵。也可能是法线矩阵。你有一个片段着色器，它将从一些纹理中采样，基于法线进行一些光照计算，并返回一个颜色。

现在假设您添加了另一个片段着色器，它采用额外的光照和材质参数。它没有来自顶点着色器的任何新输入（没有新的纹理坐标或任何东西），只有新的制服。也许它用于投影照明，顶点着色器不参与其中。任何。

现在假设我们添加了一个执行顶点加权蒙皮的新顶点着色器。它提供与旧的顶点着色器相同的输出，但它有一堆用于蒙皮的制服和输入权重。

这给了我们 2 个顶点着色器和 2 个片段着色器。一共4个程序组合。

当我们添加 2 个以上兼容的片段着色器时会发生什么？我们得到 8 种组合。如果我们有 3 个顶点着色器和 10 个片段着色器，我们总共有*30*个程序组合。

使用单独的着色器，3 个顶点着色器和 10 个片段着色器需要 30 个程序管道对象，但只有*13 个*程序对象。这比非独立案例少 50% 以上的程序对象。

## 为什么引用的文字是错误的

> 现在，这条线 [...] 让我想知道。

它应该让你想知道；它在几个方面是错误的。例如：

> VAO 是一个容器对象，它链接缓冲区数据、顶点布局数据和 GLSL 程序输入数据。

不，不是的。它将提供顶点数据的缓冲区对象与该数据的顶点格式联系起来。它指定了哪些顶点属性索引。但这与“GLSL 程序输入数据”的耦合程度如何*完全*取决于您。

> 如果没有专门的软件设计，这意味着当我改变一个对象的材质（一个新的片段着色器）时，我需要不同的 VAO...

除非这条线将“专门的软件设计”等同于“合理的编程实践”，否则这纯粹是胡说八道。

这就是我的意思。当他们设置顶点数据时，您会在网上看到这样的示例代码：

```
glBindBuffer(GL_ARRAY_BUFFER, buffer_object);
glEnableVertexAttribArray(glGetAttribLocation(prog, "position"));
glVertexAttribPointer(glGetAttribLocation(prog, "position"), ...); 
```

对此有一个技术术语：*糟糕的代码。*这样做的唯一原因是如果 指定的着色器`prog`不在您的直接控制之下。如果是这样的话......你怎么知道它`prog`有一个名为“位置”的属性*？*

着色器的合理编程实践是使用约定。这就是您知道`prog`有一个名为“位置”的属性的方式。但是如果你知道每个程序都会有一个名为“位置”的属性，为什么不更进一步呢？当需要链接程序时，请执行以下操作：

```
GLuint prog = glCreateProgram();
glAttachShader(prog, ...); //Repeat as needed.
glBindAttribLocation(prog, 0, "position"); 
```

毕竟，你知道这个程序必须有一个名为“位置”的属性；您将假设稍后获得它的位置。所以去掉中间人，*告诉 OpenGL*使用什么位置。

这样，您不必使用`glGetAttribLocation`; 当您的意思是“位置”时，只需使用 0。

即使`prog`没有名为“位置”的属性，这仍然会成功链接。如果您绑定不存在的属性位置，OpenGL 不介意。因此，您可以对您创建的每个程序应用一系列`glBindAttribLocation`调用，而不会出现问题。实际上，您可以对属性名称有*多种*约定，只要您坚持一组或另一组，就可以了。

更好的是，将其粘贴在着色器中，并且根本不用理会`glBindAttribLocation`解决方案：

```
#version 330
layout(location = 0) in vec4 position; 
```

简而言之：始终为您的属性位置使用约定。如果您`glGetAttribLocation`在程序中看到，请考虑代码异味。这样，您可以将任何 VAO 用于任何程序，因为 VAO 只是违反约定编写​​的。

我不明白约定如何等同于“专用软件设计”，但是，嘿，我也没有写那行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T11:34:19.173

> 我可以在不同的着色器程序之间切换

是的，但是您必须完全替换整个程序。单独的着色器对象允许您仅替换一个阶段（例如，仅顶点着色器）。

例如，如果您有 N 个顶点着色器和 M 个顶点着色器，则使用常规链接您将拥有 N * M 个程序对象（以涵盖所有可能的组合）。使用单独的着色器对象，它们彼此分离，因此您只需要保留 N + M 个着色器对象。这是在复杂场景中的显着改进。

# android - 每次编辑 XML 文件时都必须在 Eclipse 中清理整个 Android 项目

> ID：15809891
> 
> 赞同：5
> 
> 时间：2013-04-04T11:30:32.660
> 
> 标签：android, xml

我有一个烦人的问题。我在我的 Android 项目中使用了 Fragment，这给我带来了无尽的痛苦，因为我每次编辑我的主 xml 文件时都必须清理项目。这是它的外观：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <fragment xmlns:map="http://schemas.android.com/apk/res-auto"
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true"
        class="com.google.android.gms.maps.MapFragment"
        map:uiRotateGestures="false"
        map:uiScrollGestures="false"
        map:uiZoomControls="false"
        map:uiZoomGestures="false" 
        map:cameraZoom="18"
        />
    <ScrollView 
        android:id="@+id/scroller"
        android:layout_width="250dp"
        android:layout_height="100dp"
        android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true"
        android:background="@android:color/white">
    <TextView
        android:id="@+id/debug_text"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:textSize="10sp"

       />
    </ScrollView>
</RelativeLayout> 
```

如果我编辑这个文件的一个字符，所有以“map”开头的行都会用红色突出显示，片段开始标记也会突出显示。我得到的错误是：

```
Unexpected namespace prefix "xmlns" found for tag fragment 
```

对于以“map”开头的行，错误是：

```
Unexpected namespace prefix "map" found for tag fragment 
```

如果我清理项目，问题就会消失，我可以很好地构建和运行项目，但是因为我现在正在编辑它很多，这非常非常烦人。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T11:33:57.437

在 Eclipse 中，您可以转到项目 -> 自动构建，这应该包括一个干净的过程。您还可以使用 adb 构建一个 ANT 脚本并使用 build.xml 文件设置一个干净的目标作为构建的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:00:59.557

如果您自动设置构建，那么在大型项目大小的情况下，eclipse 会变慢。它每隔几秒钟就会定期清理并构建您的整个项目。建议在大型项目案例中手动清理工作区。

# iphone - Mapkit 绘制路线问题

> ID：15809898
> 
> 赞同：1
> 
> 时间：2013-04-04T11:31:06.177
> 
> 标签：iphone, ios, objective-c, mkmapview, mapkit

我正在开发一个应用程序，我需要在其中使用 lat/long 在两点之间绘制一条路线。

我已经使用谷歌 API 来获取折线并在解码后绘制它。

问题：

1.  路线不在路中间（附图_1）

2.  放大/缩小路线未完全绘制（附图片_2）

![在此处输入图像描述](https://i.stack.imgur.com/6MyB3.png)

![在此处输入图像描述](https://i.stack.imgur.com/3PEen.png)

![在此处输入图像描述](https://i.stack.imgur.com/EQvdE.png)

下面是代码：

```
 if(!routeView)
        routeView = [[UIImageView alloc] initWithFrame:CGRectMake(0, self.mapView.frame.origin.y, mapView.frame.size.width, self.mapView.frame.size.height)];
    routeView.userInteractionEnabled = NO;
    [mapView addSubview:routeView];

    [self.lat1 resignFirstResponder];
    [self.long1 resignFirstResponder];
    [self.lat2 resignFirstResponder];
    [self.long2 resignFirstResponder];

    NSString* saddr = [NSString stringWithFormat:@"%@,%@",self.lat1.text,self.long1.text];

    NSString* daddr = [NSString stringWithFormat:@"%@,%@",self.lat2.text,self.long2.text];

    NSString* apiUrlStr = [NSString stringWithFormat:@"http://maps.apple.com/maps/api/directions/json?origin=%@&destination=%@&sensor=false", saddr, daddr];

    NSURL* apiUrl = [NSURL URLWithString:apiUrlStr];

    NSError *error;
    NSString *apiResponse = [NSString stringWithContentsOfURL:apiUrl encoding:NSUTF8StringEncoding error:&error];

    NSData *responseData = [apiResponse dataUsingEncoding:NSUTF8StringEncoding];

    NSError* error1;
    NSDictionary* json = [NSJSONSerialization JSONObjectWithData:responseData
                                                         options:NSJSONReadingMutableLeaves
                                                           error:&error1];
    NSLog(@"Error: %@\n%@",[error1 localizedDescription],[error1 localizedFailureReason]);

   if([[json objectForKey:@"status"] isEqualToString:@"OK"])
    {
        NSArray *routes1 = [json objectForKey:@"routes"];
        NSDictionary *route = [routes1 lastObject];

        if (route)
        {
            NSString *overviewPolyline = [[route objectForKey: @"overview_polyline"] objectForKey:@"points"];

            routes = [self decodePolyLine:overviewPolyline];

            //NSLog(@"%@",[routes objectAtIndex:0]);

            [self updateRouteView];
            [self centerMap];
        }
    }

-(void) updateRouteView
{
 CGContextRef context =     CGBitmapContextCreate(nil,
                                                 routeView.frame.size.width,
                                              routeView.frame.size.height,
                                              8,
                                              4 * routeView.frame.size.width,
                                              CGColorSpaceCreateDeviceRGB(),
                                              kCGImageAlphaPremultipliedLast);

CGContextSetStrokeColorWithColor(context, [UIColor redColor].CGColor);
CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1.0);
CGContextSetLineWidth(context, 3.0);

for(int i = 0; i < routes.count; i++) {
    CLLocation* location = [routes objectAtIndex:i];
    CGPoint point = [mapView convertCoordinate:location.coordinate toPointToView:routeView];

    if(i == 0) {
        CGContextMoveToPoint(context, point.x, routeView.frame.size.height - point.y);
    } else {
        CGContextAddLineToPoint(context, point.x, routeView.frame.size.height - point.y);
    }
}

CGContextStrokePath(context);

CGImageRef image = CGBitmapContextCreateImage(context);
UIImage* img = [UIImage imageWithCGImage:image];

routeView.image = img;
CGContextRelease(context);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T23:23:39.770

您的路线未对齐的一个可能原因是您的路线来自 Google（[http://maps.apple.com/maps](http://maps.apple.com/maps)重定向到[http://maps.google.com/maps](http://maps.google.com/maps)）并且您在 Apple 的地图上绘制它. 他们的数据略有不同。

我无法解决部分绘制的路线，但我建议您添加 MKPolyline 而不是静态图像叠加。他们发明了那个画线工具是有充分理由的。

# php - 使用正则表达式在数据库中搜索电话号码

> ID：15809902
> 
> 赞同：0
> 
> 时间：2013-04-04T11:31:26.847
> 
> 标签：php, sql

我需要在数据库中搜索电话号码。
但是，我不知道电话号码是如何存储在数据库中的，这可以采用不同的方式，例如：

```
 0123456789 
  012 3456789 
  012 34 56 78 9 
  012-3456789 
```

我必须寻找的字符串总是格式化为

```
 0123456789 
```

我的查询现在看起来像：

```
SELECT * FROM account WHERE phonenumber = '0123456789' 
```

但这当然只有在电话号码的格式类似于搜索字符串时才有效。
如何使用其他功能的正则表达式来搜索各种格式化的电话号码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:38:10.627

虽然可以在 MySql 中执行 REGEXP，但我认为它不是一个非常可靠的解决方案，并且表达式将难以调整。

```
SELECT * FROM account WHERE phonenumber REGEXP '^([0-9]{1}( |-|)){9}[0-9]{1}$' 
```

一个测试表达式的好工具是这个站点：[http ://www.spaweditor.com/scripts/regex/index.php](http://www.spaweditor.com/scripts/regex/index.php)

诀窍是在您输入数据库之前规范化您的数据，这意味着去除所有非数字字符的电话号码。

您还需要修复表中已有的数字。

最好的方法是将数据归一化存储，即：Country + area + number 分别存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:38:40.880

使用 Mysql 正则表达式。这是您如何实现这一目标的基本示例。适用于您示例中的每种数字格式。考虑更好的正则表达式更精确。

```
SELECT * FROM account WHERE phonenumber REGEXP '012( |-|)34( |)56( |)78( |)9'; 
```

# wpf - 单元测试继承的 WPF 用户控件

> ID：15809903
> 
> 赞同：1
> 
> 时间：2013-04-04T11:31:27.623
> 
> 标签：wpf, unit-testing

我有继承`ScrollViewer`，叫吧`MyScrollViewer`。在的构造函数中`MyScrollViewer`，我订阅`ScrollViewer.GotFocus += OnGotFocus`并做了一些处理。

在我的单元测试中，我创建了一个新的`MyScrollViewer`. 如何手动引发 GotFocus 事件？

抱歉缺少代码，我不确定我是否可以在线粘贴此代码。

谢谢！肯

# javascript - 包含附加点的 dijit contentpane 内容

> ID：15809904
> 
> 赞同：0
> 
> 时间：2013-04-04T11:31:31.097
> 
> 标签：javascript, html, dojo, contentpane

像这样的东西：

```
var cp = new ContentPane({
                    title: self.friends_data.data[index].name,
                    closable: true,
                    onClose:function(){
                        conf = confirm("Do you really want to Close this?");
                        if (conf){
                            self.friends_tabs[index] = null;
                            return true;
                        }
                        return false;
                    },
                    content: newTabTemplate
                }); 
```

哪里`newTabTemplate`是：

```
<div>
            <span data-dojo-type="dijit.layout.AccordionContainer" style="min-width: 1em; min-height: 1em; width: 100%; height: 100%;">
              <div data-dojo-type="dijit.layout.ContentPane" title="Write testimonial for friend" doLayout="false">
                <div data-dojo-type="dijit.Editor" data-dojo-attach-point="editor" data-dojo-props="onChange:function(){console.log('editor1 onChange handler: ' + arguments[0])}, extraPlugins:['foreColor','hiliteColor','fontName', 'fontSize', 'formatBlock', 'createLink', 'unlink', 'insertImage', {name: 'fullscreen', zIndex: 900}]" height=90% style=""></div>
                <!--
                dojo.connect(dijit.registry.byNode(editor1.toolbar.containerNode.children[editor1.toolbar.containerNode.children.length-1]), "onChange", function(x){alert('hello')});
              -->
              </div>
              <div data-dojo-type="dijit.layout.ContentPane" title="Read their testimonial for you" doLayout="false">
              </div>
            </span>
</div> 
```

现在，我想`cp.editor`工作，因为`editor`在 cp 的模板中命名了一个附加点。但它说`undefined`。有什么办法吗？

实例化正确发生，即视觉输出正确，只有附加点不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:02:20.140

将widgets-in-template 功能添加到`cp`混合中，因为我相信`ContentPane`默认情况下没有此功能。

[https://dojotoolkit.org/reference-guide/1.8/dijit/_WidgetsInTemplateMixin.html](https://dojotoolkit.org/reference-guide/1.8/dijit/_WidgetsInTemplateMixin.html)

# php - 关于 simpleXML_load_file

> ID：15809913
> 
> 赞同：0
> 
> 时间：2013-04-04T11:31:55.633
> 
> 标签：php, simplexml

我是新的 php 开发人员，我有一个问题要问你。

我尝试这样做：

```
$bookXML = simpleXML_load_file("<book_reference>
                                    <number>19761</number>
                               </book_reference>",'SimpleXMLElement', LIBXML_NOCDATA );
 if($bookXML==FALSE)
       echo  '<br> false'; 
```

并采取失败！

你能帮助我吗？

我使用 php 5.4.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:39:45.873

您应该使用`simplexml_load_string`，因为您正在尝试使用字符串而不是文件来生成简单的 xml 元素对象

[simplexml_load_string](http://php.net/manual/en/function.simplexml-load-string.php) — 将 XML 字符串解释为对象

# css - 如何在主 div 隐藏时使用另一个 CSS 样式

> ID：15809914
> 
> 赞同：1
> 
> 时间：2013-04-04T11:31:56.000
> 
> 标签：css

我无法为 div 赋予特定的样式。让我解释一下：我使用 2 个 div 用于 webapp，第一个是像 IOS 一样的弹出通知，另一个只是加入页面的图像，其中很少有产品更新（所以每个 -当我更新产品时，它会在图像角落附近显示一个弹出通知）。

我遇到的问题是我不得不使用`padding-top: -28px`将弹出 div`#popupContact`和图像 div`.imatges3`与其他图像对齐。当您单击弹出 div（或在图像中）时，它会消失，并且图像 div 会向上移动一点，确实停留在同一位置（因为 div 消失并继续应用 padding-top）。

有什么方法可以为 div 赋予不同的 CSS 值，具体取决于它是否隐藏了另一个 div？（根据主 div 是否消失，给出另一个值）

谢谢。

**例子：**

```
<div class="imatges3" id="pop"><div id="popupContact"><span class="boton">3</span></div>        
    <a href="actualizacion.html">  
       <img src="actprod.png" alt="Product Updates" border="0">
    </a>    
</div> 
```

**和CSS**

```
.imatges3 {
    float: left;
    width: 100px;
    margin-left: 4px;
    margin-right: 2px;
    margin-top: -28px;
}

#popupContact{
   display:none;
   height:20px;
   width:20px;
   z-index:200;
   font-size:13px;
   font-family: Arial, Helvetica, sans-serif;
   font-size: 8px;
   color: #ffffff;
   padding: 0px 0px;

   position: relative;
   top:30px;
   left:75px;   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:07:20.030

让我们尝试为两个 div 使用以下 css

```
position:absolute; 
```

# regex - Perl 正则表达式，其中模式是从 linux 命令输出的

> ID：15809915
> 
> 赞同：2
> 
> 时间：2013-04-04T11:31:56.720
> 
> 标签：regex, perl

我有一个`statistics -o -u i1,1,1`返回的 linux 命令

```
max count[0]:=31
max count:=31 
```

我想在我的 perl 脚本中取出数字 31。我可以从命令行使用 awk piped to head

`statistics -o -u i1,1,1 | awk -F':=' '{print $2}' | head -n1`

或类似地使用 grep

```
statistics -o -u i1,1,1 | grep -Po '(?<=max count:=)\d+' 
```

或 sed...

我怎样才能在 perl 脚本中做类似的事情？

* * *

编辑本质上，我想用纯 perl 解决方案替换 perl 代码中的反引号系统调用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T11:45:21.223

您可以模拟 awk：

```
perl -F":=" -lane 'print $F[1]' 
```

或者您可以模拟 grep：

```
perl -nle 'print /(?<=max count:=)(\d+)/' 
```

它们的工作方式不同，因为第一个将为包含`:=`后跟某些内容的任何行提供输出。

该`-n`开关允许读取标准输入或文件，`-l`处理换行符并`-F`为 autosplit 设置分隔符`-a`。

**更新：**

根据您的评论，您似乎想要用纯 perl 代码替换系统调用：

```
my $variable = `statistics -o -u i1,1,1 | grep -Po '(?<=max count:=)\d+'`; 
```

该`statistics`命令对我来说是未知的，所以我不知道替换它的纯 perl 方法，尽管 cpan 上可能存在某些东西。不过，您可以通过在 perl 中处理输出来节省一个进程。像这样的东西应该工作：

```
my @lines = grep /max count:=/, qx(statistics -o -u i1,1,1);
my ($num) = $lines[0] =~ /max count:=(\d+)/; 
```

运算符的`qx()`工作方式与反引号完全相同，我只是将其用作个人喜好。

# sql - SQL Server 2008 - 仅更新表中特定数量的行

> ID：15809921
> 
> 赞同：2
> 
> 时间：2013-04-04T11:32:11.710
> 
> 标签：sql, sql-server, select, count

我有一个名为 mytable 的表，其中包含许多列。
我想要做的是更新该表中的一列，其中 2 个列匹配但仅适用于与条件匹配的前 400 条记录。

例子：

列

```
Name     Ref   ID    Text 
```

当 ref = 555 和 id = 7 时，我想用“匹配”一词更新名为 Text 的列。
我知道将有大约 800 条符合条件的记录，但我只想更新前 400条。
有人可以帮忙吗？

问候，威尔。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T11:36:06.617

一种简单的方法是[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)在 a中使用[`CTE`](http://msdn.microsoft.com/en-us/library/ms175972.aspx)，例如：

```
WITH CTE AS
(
   SELECT rn = ROW_NUMBER() OVER (ORDER BY ref, id),
          ref, id, text
   FROM   MyTable
   WHERE  ref = 555 AND  id = 7
)
UPDATE CTE SET text = 'Matched' 
WHERE RN <= 400 
```

[**演示**](http://www.sqlfiddle.com/#!3/d8868/1/0)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T11:35:55.180

您可以使用 a CTE 选择`TOP 400`具有 a`ref=555`和 an的行`id=7`：

```
;with cte as
(
  select top 400 ref, id, text
  from yourtable
  where ref = 555
    and id = 7
  order by ref, id
)
update cte
set text = 'Matched'; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/fa83cb/2)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T11:46:50.767

您可以加入要自行更新的表：

```
UPDATE MyTable
        SET Text = 'Matched'
    FROM MyTable
    INNER JOIN (
        SELECT TOP 400 ID FROM MyTable WHERE ref = 555 AND ID = 7 ORDER BY ID
    ) AS InnerMyTable ON MyTable.ID = InnerMyTable.ID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T11:40:18.887

如果您需要在第二行插入更改更新关键字来插入，我已经给出了更新触发器

```
CREATE TRIGGER T
AFTER UPDATE ON MYTABLE
FOR EACH ROW BEGIN
WHERE (SELEC COUNT(*) FROM MYTABLE WHERE ref = 555 and id = 7) <= 400
BEGIN
UPDATE MYTABLE
SET TEXT = 'MATCHED'
WHERE REF = NEW.REF AND ID = NEW.ID;
END; 
```

# django - django 或 yii 用于使用 db 和自定义表单和报告构建生产 Web 应用程序

> ID：15809923
> 
> 赞同：11
> 
> 时间：2013-04-04T11:32:17.960
> 
> 标签：django, yii

我试图在 django 和 yii 之间进行选择，以获得具有数据库（最好是 mysql）后端的可扩展、可维护的企业级 web 应用程序。该应用程序主要专注于数据输入，但具有自定义工作流程（超出您的基本自动生成的 crud 表单）和自定义报告。我有CS背景，熟悉MVC，有c++、C#编程背景。8 年前使用 php、mysql、perl/cgi 构建了一个类似的应用程序，记住它很痛苦（从头开始做所有事情，学习曲线陡峭）。需要再次学习 python 或 php 语法，但我很快就学会了语言。在线阅读有关 django vs yii 的大量信息。由于需要开源，无法走 .net mvc 路线。涉足 RoR ，喜欢这种语言，但我对现在发生的魔法不太满意，尤其是对于生产级应用程序。或许在将来。

**决定因素是：**
1）更容易的学习曲线
2）更适合我需要的特定任务的框架 - 繁重的数据库操作，自定义 UI 流（没有太多 gfx 密集型，只是常规表单元素，但我需要通过多个表操作数据joins 等）
3）db 连接没有令人讨厌的惊喜（阅读但不完全理解 django orm 和 mysql 的所有陷阱）。
4）我不为基本的东西与框架/语言抗争的东西
5）可扩展和快速的运行时间（我知道很多取决于一位架构师如何解决方案）

请指教。向熟悉在这两个框架中工作过的人寻求帮助。多谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-22T17:33:58.977

我知道这是旧的，但我觉得我可以添加到这个，使用了这两个框架。

Yii 是一个可靠、快速的框架。由于某些事情（例如跨站点请求伪造保护）未默认启用或强制执行，它不如 Django 开箱即用安全。对我来说，最大的优势是内置代码生成器，因为一旦你弄清楚并开始使用它，它基本上会在几分钟内生成一个功能齐全的 CRUD 应用程序。

Django 是我选择的框架，因为 Python 是 Django 的最大优势。不是在使用 PHP，我实际上真的很喜欢这种语言，但是 Python 的干净的面向对象性（那个词？）、类继承等确实在 Django 之类的框架中大放异彩。Django 中没有内置代码生成器，这是开发人员深思熟虑的选择。这既是优势，也是劣势。如果你真的想学习这个框架，Yii 的代码生成器可能会成为一个拐杖，但是使用 Django，一旦你了解了它是如何工作的，你就可以进入并改变任何东西，因为你自己构建了它，它迫使你很好地学习框架。使用 Yii，当您拥有生成的代码并且必须进行自定义时，您可能会很快开始与框架抗争。

Django 的 ORM 非常灵活，我自己也是一个 SQL 专家，我想我在我的应用程序中只使用过一次原始 SQL。Yii 非常好，但我在这方面也支持 Django，而且 Django 的文档非常好。

根据我的经验，Yii 的安装比 Django 稍微容易一些。Django 需要更多的工作才能启动和运行。Django 的[教程](https://docs.djangoproject.com/en/1.5/intro/tutorial01/)比 Yii 强得多，至少在我开始的时候是这样。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-04T18:13:22.570

我的建议是 Django。Django 中的表单是类，在过去 16 年中我工作过的所有框架中，从经典的 ASP 到 .NET、Rails 和 Java，我都会将 Django 的表单方式与它们中的任何一个进行对比。

South 让模式和数据迁移变得异常简单。

我建议在 MySQL 上使用 Postgres，特别是如果您要使用 Django ORM，因为它对 Postgres 进行了更精细的调整。如果你不需要 Django 管理员并且你必须使用 MySQL，你可以看看 SQLAlchemy 和 Alembic。

Django 的学习曲线非常平坦。它非常容易学习，并且有很好的文档记录。

我的 0.02 美元。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-11T04:19:00.233

易烊千玺很棒。我可以学会它并在几个小时内开始。我很难设置 Django，因为配置和 URL 映射需要让任何东西正常工作。毫无疑问，一旦你学会了 Django，它就很棒，但根据我的经验，Yii 更容易学习。

我真的希望有人将 Yii 移植到 python。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-04T17:46:37.310

以下是两个框架的一些比较...

[http://blog.leehsueh.com/2010/03/django-vs-yii/](http://blog.leehsueh.com/2010/03/django-vs-yii/)

[http://vschart.com/compare/yii/vs/django-framework](http://vschart.com/compare/yii/vs/django-framework)

# android - 创建使用“guardianproject/openssl-android”库（.so）的 Android 应用程序

> ID：15809927
> 
> 赞同：0
> 
> 时间：2013-04-04T11:32:27.307
> 
> 标签：android, openssl

我已经从这个（[https://github.com/guardianproject/openssl-android](https://github.com/guardianproject/openssl-android)）项目中构建了`libcrypto.so`and 。然后我创建了一个新的 android 项目并将新的库添加到 jni/ 文件夹中。`libssl.so`

我需要将哪些额外的头文件添加到项目中才能使用 openSSL 功能？如果我`include/openssl/`从 Guardianproject 中添加文件夹（由头文件组成）它不会编译，那么 Guardianproject 中是否有一些配置文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:23:51.447

[openssl-android](https://github.com/guardianproject/openssl-android)仅提供原生 openssl 库**libcrypto.so**和**libssl.so**，它不提供任何 Java 实现。如果你想在本机代码中使用这个 openssl，你可以将文件夹**relative/path/to/include/openssl/**添加到`LOCAL_C_INCLUDES`你的**Android.mk**中。您可能希望将**openssl-android** 作为 git 子模块添加到您的项目中。

# c++ - libc++ std::search_n 中的这种崩溃是一个错误吗？

> ID：15809929
> 
> 赞同：10
> 
> 时间：2013-04-04T11:32:35.350
> 
> 标签：c++, c++11, stl, libc++

我已经尽可能缩小了范围，这似乎是一个错误......

```
#include <algorithm>
#include <vector>

int main(int argc, char *argv[])
{
  // Crashes
  std::vector<uint8_t> bs{1, 0, 0};
  std::search_n(bs.begin(), bs.end(), 3, 1);

  // Does not crash
  std::vector<uint8_t> bs{1, 0};
  std::search_n(bs.begin(), bs.end(), 2, 1);

  return 0;
} 
```

我明白了

```
Segmentation fault: 11 
```

我希望我没有错误地使用 std::search_n :)

目前，使用 LLDB 似乎不可能逐步完成 STL 实现。

版本信息：

```
$clang --version
Apple LLVM version 4.2 (clang-425.0.24) (based on LLVM 3.2svn)
Target: x86_64-apple-darwin12.3.0
Thread model: posix 
```

证据 ;）

```
13:06:47 ~/bug$ cat bug.cc
#include <algorithm>
#include <vector>

int main(int argc, char *argv[])
{
  std::vector<uint8_t> bs{1, 0, 0};
  std::search_n(bs.begin(), bs.end(), 3, 1);

  // std::vector<uint8_t> bs{1, 0};
  // std::search_n(bs.begin(), bs.end(), 2, 1);

  return 0;
}
13:06:52 ~/bug$ clang++ -std=c++11 -stdlib=libc++ bug.cc -o bug
13:07:36 ~/bug$ ./bug
Segmentation fault: 11
13:07:42 ~/bug$ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T12:54:38.743

这似乎是 search_n 中的一个错误，它对我来说也崩溃了（Xcode 4.6.1）。我认为在 __search_n 测试

```
if (__first == __s)  // return __last if no element matches __value_ 
```

需要是

```
if (__first >= __s)  // return __last if no element matches __value_ 
```

发生的情况是算法开始匹配，然后不匹配并重新开始；这个新的起点超出了 __s，这是模式长度的逻辑上最后一个可能的起点。旧的测试只测试平等，而不是“超越”。修复后它不再对我崩溃了。

# php - AJAX 和非 AJAX 的 PHP 输出

> ID：15809930
> 
> 赞同：1
> 
> 时间：2013-04-04T11:32:38.630
> 
> 标签：php, ajax

你能给我一些关于使用 AJAX 的建议吗？我有返回错误和结果的问题。用户可以关闭 JavaScript，我需要同时使用这两种方法（AJAX 和简单的 POST）。所以，我所有的 PHP 代码看起来像：

```
try {
    $category = new ZvsCategory();
} catch (Exception $e) {
    $error = $e->getMessage();
    if ($this->ajax) {
        exit($error);
    }
    return $error;
}
if ($this->ajax) {
    exit(true);
}
return true; 
```

在这种情况下是否有任何最佳实践？我会很高兴任何链接或建议，谢谢

# c# - SpeechSynthesizer.SpeakAsync 方法不立即说话

> ID：15809931
> 
> 赞同：3
> 
> 时间：2013-04-04T11:32:38.770
> 
> 标签：c#, .net, text-to-speech

我正在尝试使用 SpeakAsync() 方法说出一些文本。但是，在我调用 Speak() 之前它不会开始说话。我不想调用 Speak()。如果我从此代码中删除 Speak() 方法，则根本不会调用任何内容：

```
 using (SpeechSynthesizer synth = new SpeechSynthesizer())
        {

            synth.SelectVoice("ScanSoft Emily_Dri20_22kHz");

            synth.Rate = 10;
            synth.Volume = 100;

            synth.SpeakAsync("oh, i'm a lumberjack and i'm okay!  I sleep all night and I work all day!");
            synth.SpeakAsync("If he was dying he wouldn't bother writing ah!  He'd just say it!");
            synth.Speak("i don't want to go on the cart.");
            synth.SpeakAsync("We don't have a lord.  We're an anarcho-syndicalist commune.");
            synth.SpeakAsync("If you do not show us the grail, we shall take your castle by force!");
            synth.Speak("what do you mean, an african swallow or a european swallow?"); 
```

更新：

似乎其他人也遇到了这个问题，但尚未找到解决方案：

[其他人有这个问题](http://microsoft.public.windows.developer.winfx.general.narkive.com/q2pzb89K/speechsynthesizer-speakasync-stopped-working)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T11:41:12.380

这是因为`Speak`是一个让程序保持运行的阻塞调用。由于您将其作为控制台应用程序运行`Console.ReadKey();`，因此请在代码末尾添加以确保应用程序在用户按下某个键之前一直运行。

否则，主线程将退出，因为会`SpeakAsync`立即返回，因此您的程序会飞过所有这些行，然后退出，这就是您听不到任何声音的原因。

根据评论更新 -

该`using`块`SpeechSynthesizer`几乎立即处理，这就是为什么什么都听不到的原因。您可以将其放置`Console.ReadKey();`在块的右大括号之前，也可以`using`移除`using`块并稍后手动处理它。

# iphone - 使用 NSCopy 复制包含指针的自定义对象？

> ID：15809936
> 
> 赞同：2
> 
> 时间：2013-04-04T11:32:58.513
> 
> 标签：iphone, ios, objective-c, pointers, nscopying

我正在学习如何使用 NSCopy。我想复制我正在使用的自定义对象，它是 UIScrollView 中的 ImageView。

我正在尝试按如下方式实现 NSCopying 协议：

```
-(id)copyWithZone:(NSZone *)zone
{
    ImageView *another = [[ImageView allocWithZone:zone]init];

    another.imageView = self.imageView;
    another.imageToShow = self.imageToShow;
    another.currentOrientation = self.currentOrientation;
    another.portraitEnlarge = self.portraitEnlarge;
    another.landscapeEnlarge = self.landscapeEnlarge;
    another.originalFrame = self.originalFrame;
    another.isZoomed = self.isZoomed;
    another.shouldEnlarge = self.shouldEnlarge;
    another.shouldReduce = self.shouldReduce;
    another.frame = self.frame;
    //another.delegate = another;
    another.isZoomed = NO;

    [another addSubview:another.imageView];

    return another;
} 
```

然后将对象复制到另一个类中：

```
ImageView * onePre = [pictureArray objectAtIndex:0];
ImageView * one = [onePre copy]; 
```

副本是制作的，但是我有一个奇怪的问题。复制对象的 ImageView (a UIImageView) 和 ImageToShow (a UIImage) 属性似乎与原始对象相同。这种在复制代码中是有意义的，因为我重新指向了一个指针，而不是制作新版本的 ImageView 和 ImageToShow。

我的问题是如何制作包含指向其他对象的指针的对象的副本？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T12:39:07.030

`UIView`不符合`NSCopying`，但符合`NSCoding`：

```
another.imageView = [NSKeyedUnarchiver unarchiveObjectWithData:
                      [NSKeyedArchiver archivedDataWithRootObject:self.imageView]]; 
```

这将序列化然后反序列化对象，这是在 ObjC 中执行深度复制的标准方式。

* * *

编辑：请参阅[https://stackoverflow.com/a/13664732/97337](https://stackoverflow.com/a/13664732/97337)`-clone` ，了解使用此方法的常见类别方法的示例。

# iphone - 动画imageview第一次需要时间

> ID：15809943
> 
> 赞同：0
> 
> 时间：2013-04-04T11:33:22.547
> 
> 标签：iphone, ios, objective-c, xcode

我正在为 ImageViews 设置动画，然后用户点击一个按钮。我有 40 多张图片。我使用的代码是

```
arr3 =  [[NSArray alloc]initWithObjects:[UIImage imageNamed:@"Aperture_00000.png"],
[UIImage imageNamed:@"Aperture_00001.png"],
[UIImage imageNamed:@"Aperture_00002.png"],
...
[UIImage imageNamed:@"Aperture_00023.png"], nil];

imgv.animationImages = arr3;
imgv.animationDuration=2.0f;
imgv.animationRepeatCount =1; 
```

启动动画的方法是：

```
-(void)animate {
    [imgv startAnimating];
} 
```

但是当用户第一次按下按钮时，需要花费很多时间。这可能是什么解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:39:31.107

原因如下代码：

```
arr3 =  [[NSArray alloc]initWithObjects:[UIImage imageNamed:@"Aperture_00000"],[UIImage imageNamed:@"Aperture_00001"],[UIImage imageNamed:@"1.png",@"2.png",@"3png",@"4.png",@"5.png",@"6.png",@"7.png",@"8.png",@"9.png",@"10.png",@"11.png",@"12.png",@"13.png",@"14.png",@"15.png",]; 
```

您可以做的是将此数组加载到其他地方。

注意：这是一种非常消耗内存的加载图像的方式。在您访问该课程 2-3 次后，您的应用程序肯定会崩溃。取而代之的是使用一些替代方法。我可以建议的最简单的选择是在 UIImageView 上加载图像并定期更改图像。它会给你动画效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:45:46.177

我建议您宁愿以编程方式进行，您应该从图像创建动画 gif 图像。这是在线工具，您可以设置速度和其他参数 [http://picasion.com/](http://picasion.com/)

并使用 [https://github.com/arturogutierrez/Animated-GIF-iPhone](https://github.com/arturogutierrez/Animated-GIF-iPhone) UIImageView 类别显示该 gif 图像，在这种情况下您可以节省 CPU 时间。

当你想播放动画时取消隐藏 imageView 并在你想停止时隐藏。

我建议至少尝试一下。

# vb.net - 我希望在表单 1 的组合框中选择一个值，自动填充到表单 3 的文本框/标签中

> ID：15809948
> 
> 赞同：1
> 
> 时间：2013-04-04T11:33:28.670
> 
> 标签：vb.net, forms, user-interface, combobox, textbox

我目前有 3 个表格，表格 1 选择 4 条数据，表格 2 最多选择 10 个。

我想要它，所以当您转到表单 3 时，表单 2 上的所有选定字段都显示在第 3 个表单上......作为不可编辑的文本字段（我猜是标签）

我会附上一些图表以使这个 5000x 更容易解释，但我还不能。

我只需要知道如何让代码获取输入到组合框和文本框的值并将它们输出到表单 3 中。

编辑; 我没有合适的代码，因为我一直在尝试不同的技术，但一无所获

```
 Me.ComboBox1.DropDownStyle = System.Windows.Forms.ComboBoxStyle.DropDownList
    Me.ComboBox1.FormattingEnabled = True
    Me.ComboBox1.Items.AddRange(New Object() {"ClaimCode", "PostCode", "AlgPremium", "Etc", "Etc", "Etc"})
    Me.ComboBox1.Location = New System.Drawing.Point(27, 33)
    Me.ComboBox1.Name = "ComboBox1"
    Me.ComboBox1.Size = New System.Drawing.Size(225, 21)
    Me.ComboBox1.TabIndex = 2
    '
    'ComboBox2
    '
    Me.ComboBox2.DropDownStyle = System.Windows.Forms.ComboBoxStyle.DropDownList
    Me.ComboBox2.FormattingEnabled = True
    Me.ComboBox2.Items.AddRange(New Object() {"Single", "Multi"})
    Me.ComboBox2.Location = New System.Drawing.Point(275, 33)
    Me.ComboBox2.Name = "ComboBox2"
    Me.ComboBox2.Size = New System.Drawing.Size(147, 21)
    Me.ComboBox2.TabIndex = 3
    '
    'Values
    '
    Me.Values.Location = New System.Drawing.Point(450, 34)
    Me.Values.Name = "Values"
    Me.Values.Size = New System.Drawing.Size(297, 20)
    Me.Values.TabIndex = 4 
```

我想要上述值（从from 2）选择时，将其取出并放入form3 ...上的以下字段中

```
 'TextBox1
    '
    Me.TextBox1.Location = New System.Drawing.Point(11, 13)
    Me.TextBox1.Name = "TextBox1"
    Me.TextBox1.Size = New System.Drawing.Size(259, 20)
    Me.TextBox1.TabIndex = 0
    '
    'TextBox2
    '
    Me.TextBox2.Location = New System.Drawing.Point(9, 13)
    Me.TextBox2.Name = "TextBox2"
    Me.TextBox2.Size = New System.Drawing.Size(85, 20)
    Me.TextBox2.TabIndex = 1 
```

什么都没有命名，因为我只需要了解如何做到这一点，除了传递到表单之外，还有更多的数据要做，但现在。这将使我对我的工作有基本的了解。

对于完整的描述，我将有各种 XML 模板，当您在 FORM1 上选择 4 个值时，将在后台选择一个特定的模板。然后在 FORM2 中，您将选择要在此模板上修改的值，这些值将在 XML 上进行修改，并将 XML 发布到测试工具中，其中将针对它运行各种过滤器/规则（流口水），然后在 form3 上列出您在 form2 上更改的所有字段、您在 FORM2 上输入的值以及在测试工具中的变形/过滤器后它们如何返回，并且生成的 XML 将被保存并通过 FORM3 链接到。

我是在这个阶段拥有该程序的 Lonnngggg 方式，但我只是想了解如何使用 GUI 以及如何将数据从一种形式传递到另一种形式。或将其导出到 XML 文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T12:50:48.380

您可以通过在显示之前设置公共属性将数据传递给表单，如下所示：

```
Public Class Form1
    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        Dim f As New FormVb2()
        f.TextBox1Value = TextBox1.Text
        f.ShowDialog()
    End Sub
End Class 
```

然后您可以在表单加载时使用公共属性中的值，如下所示：

```
Public Class Form2
    Public Property TextBox1Value As String

    Private Sub Form2_Load(sender As Object, e As EventArgs) Handles Me.Load
        TextBox1.Text = TextBox1Value
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T12:36:19.750

试试这个代码

val 是全局变量

```
Dim Val as string=string.empty

Private Sub ComboBox1_SelectedValueChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles ComboBox1.SelectedValueChanged
        val = ComboBox1.SelectedItem
    End Sub

  Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        Dim xfrm As New Form3
        xfrm.TextBox1.Text = val 
        xfrm.ShowDialog()
    End Sub 
```

# javascript - Javascript：具有特定 CSS 类的数字的序号后缀

> ID：15809950
> 
> 赞同：11
> 
> 时间：2013-04-04T11:33:33.677
> 
> 标签：javascript, jquery, ordinals

我正在尝试在带有序号后缀的特定表中显示数字。该表始终显示来自 XML 文件的三个数字。数字显示排名，例如它们可能是第 6、第 120、第 131。输出是一个如下所示的表：

```
<table>
    <tr>
        <td class='ordinal'>6</td>
        <td class='ordinal'>120</td>
        <td class='ordinal'>131</td>
    </tr>
</table> 
```

理想情况下，我想使用 javascript，我在 stackoverflow 上找到了一些非常好的解决方案，例如[这个](https://stackoverflow.com/questions/13627308/add-st-nd-rd-and-th-suffix-to-a-number). 但是，我正在努力将该函数应用于表中的所有数字，而不是单独输入每个数字。我尝试使用 CSS 类，以便我的函数如下所示：

```
<script type="text/javascript">
$(function(){
    $(".ordinal").each(function(){
        var j = i % 10;
        if (j == 1 && i != 11) {
            return i + "st";
        }
        if (j == 2 && i != 12) {
            return i + "nd";
        }
        if (j == 3 && i != 13) {
            return i + "rd";
        }
        return i + "th";
        });
})
</script> 
```

但它不起作用，可能是因为我在某处搞砸了代码。也许这里有人可以帮助我并告诉我哪里出错了？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T12:04:01.833

我自己的建议是：

```
$(".ordinal").text(function (i, t) {
    i++;
    var str = i.toString().slice(-1),
        ord = '';
    switch (str) {
        case '1':
            ord = 'st';
            break;
        case '2':
            ord = 'nd';
            break;
        case '3':
            ord = 'rd';
            break;
        case '4':
        case '5':
        case '6':
        case '7':
        case '8':
        case '9':
        case '0':
            ord = 'th';
            break;
    }
    return i + ord;
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/BMTxa/2/)。

这有效地采用递增的数字（`i++`，以便从`1`not开始`0`），将其转换为字符串，然后查看该字符串的最后一个数字。这*应该*适用于任何数字，因为序数纯粹基于最后一个数字。

您还可以扩展`Number`原型以实现此功能：

```
Number.prototype.ordinate = function(){
    var num = this + 1,
        last = num.toString().slice(-1),
        ord = '';
    switch (last) {
        case '1':
            ord = 'st';
            break;
        case '2':
            ord = 'nd';
            break;
        case '3':
            ord = 'rd';
            break;
        case '4':
        case '5':
        case '6':
        case '7':
        case '8':
        case '9':
        case '0':
            ord = 'th';
            break;
    }
    return num.toString() + ord;
};

$(".ordinal").text(function (i, t) {
    return i.ordinate();
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/BMTxa/3/)。

编辑以提供一个轻微的选择：

```
Number.prototype.ordinate = function(){
    var num = this,
        last = num.toString().slice(-1),
        ord = '';
    switch (last) {
        case '1':
            ord = 'st';
            break;
        case '2':
            ord = 'nd';
            break;
        case '3':
            ord = 'rd';
            break;
        default:
            ord = 'th';
            break;
    }
    return num.toString() + ord;
};

$(".ordinal").text(function (i,t) {
    return t.replace(/(\d+)/g, function(a){
        return parseInt(a, 10).ordinate();
    });
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/BMTxa/7/)。

这实质上是对每个元素进行迭代`.ordinal`，用添加了序号后缀的（相同）数字替换存在的数字。

* * *

**编辑**以解决该问题，在下面的评论中提出，that`11`和`12`正在接收,和（分别）`13`的序数后缀。现在已将其更正为在所有情况下：`st``nd``rd``th`

```
Number.prototype.ordinate = function(){
    var num = this,
        numStr = num.toString(),
        last = numStr.slice(-1),
        len = numStr.length,
        ord = '';
    switch (last) {
        case '1':
            ord = numStr.slice(-2) === '11' ? 'th' : 'st';
            break;
        case '2':
            ord = numStr.slice(-2) === '12' ? 'th' : 'nd';
            break;
        case '3':
            ord = numStr.slice(-2) === '13' ? 'th' : 'rd';
            break;
        default:
            ord = 'th';
            break;
    }
    return num.toString() + ord;
}; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/BMTxa/11/)。

参考：

*   [`slice()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/slice).
*   [`switch()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch).
*   [`text()`](http://api.jquery.com/text/).
*   [`toString()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/toString).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T12:11:26.573

```
function nth(n){
    if(isNaN(n) || n%1) return n;   
    var s= n%100;
    if(s>3 && s<21) return n+'th';
    switch(s%10){
        case 1: return n+'st';
        case 2: return n+'nd';
        case 3: return n+'rd';
        default: return n+'th';
    }
} 
```

你可以照顾他们自己行中的青少年，其他整数遵循最后一位数字规则。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-14T00:18:24.847

我创建了两种方法，一种使用 Prototype，另一种作为插件：

```
Number.prototype.between = function(n,m){ return this > n && this < m }
Number.prototype.ORDINATE_INDEX = ["th","st","nd","rd"];
Number.prototype.toOrdinate = function(){
    var
        nthMod = (this % 10),
        index =  nthMod > 3 || this.between(10,20) ? 0 : nthMod
    ;

    return this + this.ORDINATE_INDEX[index];
};

$(".ordinal").text(function (index, element) {
    return parseInt(element).toOrdinate();
}); 
```

这是一个 Jquery 插件：

```
(function($){
    var numberTool = new (function(){
        var private = {};

        private.ORDINATE_INDEX = ["th","st","nd","rd"];

        private.parseOrdinary = function(number)
        {
            var
                nthMod = (number % 10),
                index =  nthMod > 3 || private.between(number, 10,20) ? 0 : nthMod
            ;

            return number + private.ORDINATE_INDEX[index];
        }

        private.between = function(number, n,m){
            return number > n && number < m
        }

        this.isNumeric = function(number)
        {
            return !isNaN(parseFloat(number)) && isFinite(number);
        }

        this.toOrdinary = function(number)
        {
            return this.isNumeric(number) ? private.parseOrdinary(number) : number;
        }
    });

    $.fn.toOrdinary = function(){
        return this.each(function(){
            $element = $(this);
            $element.text(numberTool.toOrdinary($element.text()));
        }); 
    };
})(jQuery);

$(".ordinal").toOrdinary();
$(".ordinal").toOrdinary();
$(".ordinal").toOrdinary(); 
```

**在 JSFIDDLE 上测试：**

原型版本示例：http: [//jsfiddle.net/f8vQr/6/](http://jsfiddle.net/f8vQr/6/)

JQuery 版本示例：http: [//jsfiddle.net/wCdKX/27/](http://jsfiddle.net/wCdKX/27/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T11:37:24.233

它不起作用，因为您将字符串返回到`$.each`，而不是实际使用它们。用法取决于您的 HTML，但这里是一个将`.ordinal`文本设置为值的示例。

您还缺少`i`事件处理程序上的参数，您可以递增`i`以从开始`1st`而不是`0th`.

[jsFiddle](http://jsfiddle.net/Tyriar/BMTxa/1/)

```
$(".ordinal").each(function (i) {
    i++;
    var j = i % 10,
        str;
    if (j == 1 && i != 11) {
        str = i + "st";
    } else if (j == 2 && i != 12) {
        str = i + "nd";
    } else if (j == 3 && i != 13) {
        str = i + "rd";
    } else {
        str = i + "th";
    }
    $(this).text(str);
}); 
```

如果您的元素中已经有数字，那么最好不要依赖索引而是检查数字，然后将字符串附加到末尾。

[jsFiddle](http://jsfiddle.net/Tyriar/gWnUJ/1/)

```
$(document).ready(function () {
    $(".ordinal").each(function (i) {
        var j = parseInt($('ordinal').text(), 10) % 10,
            str;
        if (j == 1 && i != 11) {
            str = "st";
        } else if (j == 2 && i != 12) {
            str = "nd";
        } else if (j == 3 && i != 13) {
            str = "rd";
        } else {
            str = "th";
        }
        var elem = $(this)
        elem.text(elem.text() + str);
    });
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-01T10:23:14.820

一行中的序数后缀

```
var integerWithSuffix=originalInteger+(['st','nd','rd'][( originalInteger +'').match(/1?\d\b/)-1]||'th'); 
```

原始数字和一个字符串的连接，该字符串表示从一个数组派生的序数，该数组由对该数字的正则表达式搜索的结果索引

[http://jsfiddle.net/thisishardcoded/DbSMB/](http://jsfiddle.net/thisishardcoded/DbSMB/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-30T05:11:34.117

根据大卫托马斯的回答，我会做这样的事情：

```
Number.prototype.ordinate = function(){
    var num = this,
        ones = num % 10, //gets the last digit
        tens = num % 100, //gets the last two digits
        ord = ["st","nd","rd"][ tens > 10 && tens < 20 ? null : ones-1 ] || 'th';
    return num.toString() + ord;
}; 
```

它完成同样的事情。如果一个数字的最后 2 位数字在 11-19 范围内或最后一位数字在 4-0 之间，则默认为“th”，否则它将从基于数组的数组中提取“st”、“nd”或“rd”在那个地方。

我非常喜欢创建原型函数的想法，但我肯定会将索引的增量留在原型函数之外，以使其更加通用：

```
$(".ordinal").text(function (i, t) {
    return (++i).ordinate();
}); 
```

[JS 小提琴演示](http://jsfiddle.net/csharp72/wswBu/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-27T00:08:48.917

`function ordsfx(a){return["th","st","nd","rd"][(a=~~(a<0?-a:a)%100)>10&&a<14||(a%=10)>3?0:a]}`

[请参阅https://gist.github.com/furf/986113#file-annotated-js](https://gist.github.com/furf/986113#file-annotated-js)上的注释版本

短小精悍且高效，就像实用函数应该具备的那样。适用于任何有符号/无符号整数/浮点数。（即使我无法想象需要对浮点数进行排序）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-10T21:52:04.797

这是我使用的，它适用于任何年、月、日（闰年），包括：

```
// panelyear, panelmonth and panelday are passed as parameters

var PY01 = parseInt(panelyear); var PM01 = (parseInt(panelmonth) - 1); PD01 = parseInt(panelday);

var now = new Date(PY01, PM01, PD01);
var start = new Date(PY01, 0, 0);
var diff = (now - start) + ((start.getTimezoneOffset() - now.getTimezoneOffset()) * 60 * 1000);
var oneDay = 1000 * 60 * 60 * 24;
var day = Math.floor(diff / oneDay);

function getNumberWithOrdinal(n) { var s = ["th","st","nd","rd"], v = n % 100; return n + (s[(v - 20) % 10] || s[v] || s[0]); } 
```

与

```
<script> document.write(getNumberWithOrdinal(day)); </script> 
```

# javascript - 基于值的 HTML5 localStorage 重定向

> ID：15809955
> 
> 赞同：0
> 
> 时间：2013-04-04T11:33:45.100
> 
> 标签：javascript, html, local-storage

我正在尝试根据 HTML5 localStorage 中保存的值将用户重定向到另一个页面。

```
var user=localStorage.getItem('uname');
if(user==""||user==null)
{
    window.location='secure.html';
} 
```

即使`localStorage`本应被清除，这也会重定向。

有什么方法可以检查`localStorage`. 我使用了显示“null”的警报，但重定向仍然发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:37:07.577

当`localStorage`被清除时，`localStorage.getItem('uname')`将是`null`。如果您不想在清除后重定向，请删除此重定向条件。如果您只想在空字符串时重定向，请执行以下操作：

if (localStorage.getItem('uname') === "") { window.location='secure.html'; }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:39:35.560

尝试检查对象的长度是否为0

```
var user=localStorage.getItem('uname');
if(user.length == 0)
{
   window.location='secure.html';
} 
```

但是，如果您要在“uname”不为空的情况下重定向用户：

```
var user=localStorage.getItem('uname');
if(user.length != 0)
{
   window.location='secure.html';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T12:05:09.830

之间似乎有混淆`user==""||user==null`

```
var user=localStorage.getItem('uname');
if(user==null)
{
    window.location='secure.html';
} 
```

到目前为止似乎工作

# ruby-on-rails-3.2 - rails i18n 协会

> ID：15809956
> 
> 赞同：1
> 
> 时间：2013-04-04T11:33:49.797
> 
> 标签：ruby-on-rails-3.2, associations, rails-i18n

遇到关联时，我有一个关于 i18n in rails 的问题

```
class User
  belongs_to :billing_address, :class_name => "Address'
  belongs_to :delivery_address, :class_name => "Address'
end

en:
  activerecord:
    attributes:
      user:
        billing_address_id: "billing address"
        delivery_address_id: "delivery address" 
```

上面的代码有效，但我想知道是否有另一种方法可以通过不在`_id`yml 中使用后缀来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:16:56.810

你正朝着正确的方向前进。这会好一点：

```
en:
  activerecord:
    models:
      address: 'Address'
      user: 'User'
    attributes:
      address:
        city: 'City'
        zip_code: 'ZIP code'
      user:
        address_id: 'Address ID' 
```

看看[http://xyzpub.com/en/ruby-on-rails/3.2/i18n_mehrspra​​chige_rails_applikation.html](http://xyzpub.com/en/ruby-on-rails/3.2/i18n_mehrsprachige_rails_applikation.html)

# javascript - 如何使用http正文中的参数制作ajax GET

> ID：15809958
> 
> 赞同：3
> 
> 时间：2013-04-04T11:33:54.167
> 
> 标签：javascript, jquery

```
$.get ("/asd", {
    asd: "foo"
}, function (res){
    alert ("ok");
}); 
```

这将发送查询字符串中的参数：

```
/asd?asd=foo 
```

但我只需要使用 http 正文发送 json 对象：

```
{ "asd": "foo" } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:45:08.247

如果你想发送一个 JSON 对象，那么你真的应该使用 POST。但是，如果你绝对需要使用 GET，你可以这样做：

```
$.get ("/asd", { json: JSON.stringify({asd: "foo"}) }, function (res){
    alert ("ok");
}); 
```

这会将 JSON 对象转换为字符串并将其传递给`json`GET 参数（请注意，`JSON.stringify`不适用于旧浏览器）。

# javascript - 浏览器 localStorage 和 sameOrigin 策略

> ID：15809959
> 
> 赞同：0
> 
> 时间：2013-04-04T11:33:54.477
> 
> 标签：javascript, local-storage

我发现自己一遍又一遍地问这个问题而没有找到正确的答案，所以我决定把它写在这里让你分享你的知识。

我喜欢在*新*浏览器中使用 localStorage API 来存储与我的网站行为相关的少量信息。

我知道 localStorage 是同源策略的规则，即您只能访问您的域的 localStorage 存储桶（包括主机名、端口和协议）。我的问题是协议...

就我而言，我们的电子商务网站有 http 区域（目录导航）和 https 区域（结帐流程）。所以我遇到了这个问题，我无法在结帐过程中读取目录导航区域中设置的任何信息。

我认为这可能是一种常见的模式，我不明白为什么我不允许这样做。

也许你知道为什么会这样，如果有任何方法可以破解这个或其他替代方法（**不**包括 cookie）。

谢谢！

# php - 没有引号的爆炸字符串

> ID：15809962
> 
> 赞同：1
> 
> 时间：2013-04-04T11:34:01.860
> 
> 标签：php

我有字符串，就像`abc xyz "a x" test "test1 test2"`我想用空格分割字符串一样，但引号内的单词应该保持原样。我可以使用explode 拆分字符串，但explode 不能按照我的要求在这里工作。

爆炸/拆分输出后应该像

```
[0] => abc
[1] => xyz
[2] => "a x"
[3] => test
[4] => "test1 test2" 
```

我认为 preg_split 对我有用，但不知道正确的正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:41:20.097

这样做：

```
$str = 'this is a string  "that has quoted text" inside.';

// #1 version
$arOne = preg_split('#\s*("[^"]*")\s*|\s+#', $str, -1 , PREG_SPLIT_DELIM_CAPTURE | PREG_SPLIT_NO_EMPTY);

// #2 version
$arTwo = preg_split('#\s*((?<!\\\\)"[^"]*")\s*|\s+#', $str, -1 , PREG_SPLIT_DELIM_CAPTURE | PREG_SPLIT_NO_EMPTY); 
```

**输出**：

```
array(6) {
  [0]=>
  string(4) "this"
  [1]=>
  string(2) "is"
  [2]=>
  string(1) "a"
  [3]=>
  string(6) "string"
  [4]=>
  string(22) ""that has quoted text""
  [5]=>
  string(7) "inside."
} 
```

取自这里：[发布](https://stackoverflow.com/a/5475680/996809)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:58:17.917

另一个好的和简单的答案是

```
$str = abc xyz "a x" test "test1 test2"
str_getcsv($str,' ','"'); 
```

将返回一个数组以获取有关[str_getcsv](http://php.net/manual/en/function.str-getcsv.php)的更多详细信息 ，该数组将返回按空格分隔且不带“

以上的输出

```
[0] => abc
[1] => xyz
[2] => a x
[3] => test
[4] => test1 test2 
```

# perl - 使用 Image Magick 转换的文件作为使用 PDF 创建的 PDF :: API2 的背景

> ID：15809965
> 
> 赞同：1
> 
> 时间：2013-04-04T11:34:15.497
> 
> 标签：perl, pdf, background, imagemagick, converter

我使用 image magick 和 perl 将 pdf 转换为图像。使用此功能：

 `````
sub PDFtoIMAGE
  {
         foreach my $a (keys %dir) #just using I/O::dir to get full list of files
         {
          my $file = $a;
          printf "$file\n";

             if($file=~/\.pdf/ || $file=~/\.PDF/)
               {
                 my $Img = Image::Magick->new;
                 $Img->Set(density => '300');            
                 print "reading: $file\n";
                 $Img->read("$path$file");
                 my ($width, $height, $size, $format)=$Img->Ping("$path$file");
                 print "$width, $height, $size, $format\n";
                 $Img->Extent(width=>$width,height=>$height);
                 $file=~s/\.pdf/\.jpg/;
                 $file=~s/\.PDF/\.jpg/;
                 print "creating: $file\n";
                 $Img->Write("png24:$path$file");
                 print "created: $file\n";
               }
         }
   } 
````  `然后我尝试使用我得到的结果文件作为我尝试使用 PDF::API2 创建的 pdf 的背景图像，但是当我运行我的 PDF::API2 脚本来创建我的 PDF 时，我收到此错误：“无法调用方法 val 上未定义的值 /../Image.pm 第 66 行"。这个错误是指我使用图像魔法创建的文件！

出于某种原因，我在转换 pdf 时创建的一些图像可以正常工作，而有些则不能。我已经在这个问题上花了很多时间......有人可以帮助我吗？``

# hibernate - HIbernate StaleObject 异常在一个线程上连续出现

> ID：15809978
> 
> 赞同：0
> 
> 时间：2013-04-04T11:34:29.417
> 
> 标签：hibernate, hibernateexception

在我们的一个生产环境中，我们在线程首次出现后不断地在线程上获得 hibernatestaleobject 异常。这一直持续到我们重新启动服务器。

环境：oracle 10g，WAS 6.1，Hibernate 2.1

堆栈跟踪如下。

我们无法在任何其他环境中模拟这一点。

```
net.sf.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect) for com.cmp1.project1.hibernate.gen.Prjexe instance with identifier: 37120123
at net.sf.hibernate.persister.AbstractEntityPersister.check(AbstractEntityPersister.java:506)
at net.sf.hibernate.persister.EntityPersister.update(EntityPersister.java:687)
at net.sf.hibernate.persister.EntityPersister.update(EntityPersister.java:642)
at net.sf.hibernate.impl.ScheduledUpdate.execute(ScheduledUpdate.java:52)
at net.sf.hibernate.impl.SessionImpl.executeAll(SessionImpl.java:2418)
at net.sf.hibernate.impl.SessionImpl.execute(SessionImpl.java:2372)
at net.sf.hibernate.impl.SessionImpl.flush(SessionImpl.java:2240)
at com.cmp1.project1.hibernate.client.HibernateClient.update(HibernateClient.java:214)
at com.cmp1.project1.hibernate.client.HibernateClient.update(HibernateClient.java:165)
at com.cmp1.project1.util.project1Utils.persist(project1Utils.java:3018)
at com.cmp1.project1.util.project1Utils.update(project1Utils.java:1166)
at com.cmp1.project1.service.allocation.AllocationImpl.insert(AllocationImpl.java:917)
at com.cmp1.project1.service.allocation.AllocationImpl.create(AllocationImpl.java:239)
at com.cmp1.project1.ejb.allocation.AllocationBean.create(AllocationBean.java:91)
at com.cmp1.project1.ejb.allocation.EJSLocalStatelessAllocation_9d8d9db9.create(EJSLocalStatelessAllocation_9d8d9db9.java:55)
at com.cmp1.project1.ejb.allocation.AllocationClient.create(AllocationClient.java:116)
at com.cmp1.project1.service.processor.ProcessorImpl.processAllocationInstruction(ProcessorImpl.java:2917)
at com.cmp1.project1.service.processor.ProcessorImpl.processFIXMessage(ProcessorImpl.java:568)
at com.cmp1.project1.service.processor.ProcessorImpl.processSingleMessage(ProcessorImpl.java:459)
at com.cmp1.project1.service.processor.ProcessorImpl.processStagedMessage(ProcessorImpl.java:368)
at com.cmp1.project1.service.processor.ProcessorImpl.processMessage(ProcessorImpl.java:259)
at com.cmp1.project1.ejb.processor.ProcessorBean.processMessage(ProcessorBean.java:85)
at com.cmp1.project1.ejb.processor.EJSLocalStatelessProcessor_ac8a6492.processMessage(EJSLocalStatelessProcessor_ac8a6492.java:23)
at com.cmp1.project1.ejb.processor.ProcessorClient.processMessage(ProcessorClient.java:117)
at com.cmp1.project1.service.inbound.AsynchInboundHandlerImpl.process(AsynchInboundHandlerImpl.java:56)
at com.cmp1.project1.ejb.serviceactivator.ServiceActivatorBean.onMessage(ServiceActivatorBean.java:77)
at com.ibm.ejs.jms.listener.MDBWrapper$PriviledgedOnMessage.run(MDBWrapper.java:302)
at com.ibm.ws.security.util.AccessController.doPrivileged(AccessController.java:63)
at com.ibm.ejs.jms.listener.MDBWrapper.callOnMessage(MDBWrapper.java:271)
at com.ibm.ejs.jms.listener.MDBWrapper.onMessage(MDBWrapper.java:240)
at com.ibm.mq.jms.MQSession.run(MQSession.java:1695)
at com.ibm.ejs.jms.JMSSessionHandle.run(JMSSessionHandle.java:1040)
at com.ibm.ejs.jms.listener.ServerSession.connectionConsumerOnMessage(ServerSession.java:1030)
at com.ibm.ejs.jms.listener.ServerSession.onMessage(ServerSession.java:710)
at com.ibm.ejs.jms.listener.ServerSession.dispatch(ServerSession.java:677)
at sun.reflect.GeneratedMethodAccessor83.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:592)
at com.ibm.ejs.jms.listener.ServerSessionDispatcher.dispatch(ServerSessionDispatcher.java:44)
at com.ibm.ejs.container.MDBWrapper.onMessage(MDBWrapper.java:96)
at com.ibm.ejs.container.MDBWrapper.onMessage(MDBWrapper.java:132)
at com.ibm.ejs.jms.listener.ServerSession.run(ServerSession.java:535)
at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1497) 
```

代码片段：

```
 if(persistObj == null)
        return;

    Session session = sess; 
    try {
        if(session == null)
            session = HibernateUtil.getSession();

        if(LOG.isDebugEnabled() && 
           !(persistObj instanceof NonLoggable))
            log("update", persistObj);

        session.update(persistObj);

        if(flush)
            session.flush();

    } catch(StaleObjectStateException ex) {
        throw new HibernateStaleObjectException(ex);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:37:59.477

更新后是否重新获取`persistObj`？（您的代码没有显示）

如果没有，那是因为您更新了`persistObj`. 更新完成后，您`persistObj`的类实例中有一个“旧”版本。如果要`persistObj`再次更新，则需要再次获取“当前”版本`persistObj`。

# python - 在python中解码文本

> ID：15809980
> 
> 赞同：0
> 
> 时间：2013-04-04T11:34:33.097
> 
> 标签：python

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T11:05:12.200

当您看到`\xhh`时，这是一个字符转义序列。在这种情况下，它向您显示字符的十六进制值（请参阅：[词法分析：字符串文字](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)）。

有时看到的原因`\xhh`，使用时看到的实际字符与 Python[和](https://stackoverflow.com/questions/1436703/difference-between-str-and-repr-in-python)[Python](https://stackoverflow.com/questions/1436703/difference-between-str-and-repr-in-python)`print`之间的[区别`__str__``__repr__`](https://stackoverflow.com/questions/1436703/difference-between-str-and-repr-in-python)有关。

# windows-store-apps - 如何修改使用 Windows Azure 移动服务构建的示例 Windows 应用商店应用程序

> ID：15809982
> 
> 赞同：2
> 
> 时间：2013-04-04T11:34:34.960
> 
> 标签：windows-store-apps, azure-mobile-services

我已经使用 Windows Azure 移动服务创建了一个 Windows 应用商店应用程序，正如 Scott Gu 在第 9 频道视频中所解释的那样 - [http://channel9.msdn.com/Series/Windows-Azure-Mobile-Services/Introduction-to-Windows-Azure -移动服务](http://channel9.msdn.com/Series/Windows-Azure-Mobile-Services/Introduction-to-Windows-Azure-Mobile-Services)

如视频和快速入门教程中所述，我创建了一个“ToDoItem”表，并且能够按预期运行该应用程序。我想知道，是否有任何方法可以修改“TodoItem”表结构并向其中添加更多列，并增强 Windows Store App 以映射这些列。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T18:40:45.890

如果要向创建的表添加更多列，只需向类添加新属性并在服务中插入新项目 - 默认情况下，Azure 移动服务中的表具有动态架构功能，在如果请求与其他成员一起到达，他们将添加新列。

这[在 MSDN 中的 Get Started With Data 教程中](http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-data-dotnet/)显示（请参阅“将新表添加到移动服务”部分，请注意第 5 步）。

# functional-programming - 如何使用 Map / 在 OCaml 中定义一个实际上是 Map 的类型？

> ID：15809984
> 
> 赞同：3
> 
> 时间：2013-04-04T11:34:40.737
> 
> 标签：functional-programming, ocaml

我打算`Map`在 Ocaml 中练习使用。

我发现 of 的用法与,等`Map`有很大不同。`List``Array`

我知道这是`functor`我还没有学过的应用。但没关系。

* * *

这是我的`IntMap`

`module IntMap = Map.Make(struct type t = int let compare = compare end)`

所以，现在我可以使用`IntMap`to `add`by`IntMap.add x y map`等，对吧？

* * *

我有几个问题：

1.  如何控制中的`value`类型`map`？
2.  如果我想要 my 的别名类型，我`IntMap`应该怎么做？我可以做`type 'a my_type = 'a list`，但要怎么做`map`呢？
3.  我发现这`IntMap`很像`List`，而且他们俩实际上都是`modules`。但是`List`有一个类型的`list`，那`map`呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T11:59:52.267

问：

> 如何控制地图中值的类型？

你不需要（不需要），`'a IntMap.t`是一个包含 type 值的参数化类型`'a`。因此，单个模块`IntMap`可用于从整数到整数、从整数到布尔值、整数到函数的映射……（当然，单个映射值只能包含单一类型的绑定）。此外，没有理由尝试限制 的类型`IntMap.empty`，就像没有理由强制`[]`成为 以外的任何类型一样`'a list`。

问：

> 如果我想要我的 IntMap 的别名类型，我应该怎么做？我可以输入 'a my_type = ' 一个列表，但是对于 map 怎么办？

这边走：

```
type 'a imap = 'a IntMap.t 
```

问：

> 我发现 IntMap 就像 List 一样，它们实际上都是模块。但是List有一个list类型，那map呢？

这是`Intmap.t`.

# asp.net - GridView 的 BootStrap CSS

> ID：15809988
> 
> 赞同：1
> 
> 时间：2013-04-04T11:34:51.080
> 
> 标签：asp.net, gridview, twitter-bootstrap

我正在尝试将 Bootstrap css 应用于我的网格视图。

```
<asp:GridView ID="gvSI" runat="server" CellPadding="6"  
     CssClass= "table table-striped table-bordered table-condensed" /> 
```

结果是非常基本的表格结构。谁能告诉我是否还有其他可用于专业网格的样式，例如备用颜色、标题、行荧光笔..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-01T21:16:50.497

我也在尝试使用 Bootstrap 设置我的 GridView 样式。如果您想使用 Bootstrap 预定义 CSS 样式，您可以选择：http: [//twitter.github.io/bootstrap/base-css.html#tables](http://twitter.github.io/bootstrap/base-css.html#tables)。您可以通过应用可选行类（成功、错误、警告、信息）为所选行添加颜色。如果您仍想根据需要更改表格样式，则必须使用 ID 并为此 ID 创建特定的 css 类。

asp.net Gridview 有一个标题问题，但在上一篇文章中已解决，这里：[https](https://stackoverflow.com/a/12362569) ://stackoverflow.com/a/12362569 ，它适用于我。不过，我仍在寻找将 Bootstrap 样式应用于 GridView 分页的解决方案。

# django - django 模型对象的总和以及相关模型的模型字段作为列表

> ID：15809993
> 
> 赞同：0
> 
> 时间：2013-04-04T11:35:01.783
> 
> 标签：django, django-models, django-views

我需要的是查询，它将返回按数字排序的文章列表，该列表计算为文章对象的 foos.all + bar.peace 之和。以下是模型的外观：

```
class Article(models.Model):
    name = models.CharField(max_length=150)
    date = models.DateTimeField()
    ...

class Foo(models.Model):
    article = models.ForeignKey(Article, related_name='foos')
    user = models.ForeignKey(User, related_name='userfoos')
    ...

class Bar(models.Model):
    article = models.OneToOneField(Article)
    peaces = models.IntegerField(default=0)
    ... 
```

所以让我们说这`X`是文章对象：

```
foo_num = Foo.objects.filter(article=X).count()
bar_num = Bar.objects.get(article=X)
bar_num = bar_num.peaces
Y = bar_num + foo_num 
```

所以我需要一份按以下顺序排列的文章列表`Y`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:45:15.440

我会定义自己的排序方法：

```
def article_sort(article_object):
     return len(article_object.foos.all()) + article_object.bar.peaces

def view():
    articles = sorted(Article.objects.all(), key=article_sort) 
```

更多信息[在这里](http://docs.python.org/2/library/functions.html#sorted)

# javascript - excel target charts to ppt specific placeholders

> ID：15809995
> 
> 赞同：1
> 
> 时间：2013-04-04T11:35:27.630
> 
> 标签：javascript, excel, vba, powerpoint

I need to copy some charts from excel to a ppt presentation. The presentation stays the same with some placeholders to to receive the charts that get updated every now and then. I need to be able to decide what charts goes to what placeholder because I want to be able to change the excel file or the ppt without constraints. Therefore I want to use a .json file with an external dictionary which tells me which chart from which sheet goes to which slide in which placeholder. It looks like this

```
{'chart1':{'xl_sheet_name':'Summary numbers',
       'xl_chart_name':'Chart 9',
       'ppt_tgt_slide':10,
       'ppt_tgt_placeholder':2},
 'chart2':{'xl_sheet_name':'Summary numbers',
       'xl_chart_name':'Chart 10',
       'ppt_tgt_slide':10,
       'ppt_tgt_placeholder':3},
 'chart3':{'xl_sheet_name':'Summary numbers',
       'xl_chart_name':'Chart 11',
       'ppt_tgt_slide':10,
       'ppt_tgt_placeholder':4}} 
```

Then the code goes

```
Sub charts_2_ppt()
Dim strText As String
Dim lib As New JSONLib
Dim PPApp As PowerPoint.Application
Dim PPPres As PowerPoint.Presentation
Dim PPSlide As PowerPoint.Slide

'Reference existing instance of PowerPoint
Set PPApp = GetObject(, "Powerpoint.Application")
'Reference active presentation
Set PPPres = PPApp.ActivePresentation
PPApp.ActiveWindow.ViewType = ppViewSlide

strText = GetFileContent(ThisWorkbook.Path & "\parameters.json")

Set charts_dict = lib.parse(CStr(strText))

'routine
For Each v In charts_dict
    Worksheets(charts_dict(v)("xl_sheet_name")).ChartObjects(charts_dict(v)("xl_chart_name")).Copy 'ChartArea.Copy
    With PPPres
        .Slides(charts_dict(v)("ppt_tgt_slide")).Select 'otherwise it's messed up.
        .Slides(charts_dict(v)("ppt_tgt_slide")) _
            .Shapes.Placeholders(charts_dict(v)("ppt_tgt_placeholder")).Select 'msoCTrue
        .Windows(1).View.PasteSpecial '(ppPasteMetafilePicture)
    End With

    'Sheets(charts_dict(v)("xl_sheet_name")) _
        .ChartObjects(charts_dict(v)("xl_chart_name")).Chart.HasTitle = True

Next

Set charts_dict = Nothing
Set lib = Nothing
End Sub

Function GetFileContent(Name As String) As String
Dim intUnit As Integer

On Error GoTo ErrGetFileContent
intUnit = FreeFile
Open Name For Input As intUnit
GetFileContent = Input(LOF(intUnit), intUnit)
ErrGetFileContent:
Close intUnit
Exit Function
End Function 
```

probably adapted from john peltier's site and some other stuff I found online. The sense of the dictionary is that in a slide I have 4 placeholders, the first is the title, than there are three charts to paste. I made a loop because the charts are going to be many, to different slides. I took it out of VBA because it looks nicer and to be able tochange it quickly.

My problem is that when I run the code, the third placeholder is not apparently selected and the chart is pasted in the middle of the slide, instead of into the place where it belongs.

Can you please help me make it work and/or suggest other suitable ways?

Thanks a lot,

Filippo

ps The class I used for parsing javascript, I originally found it online, but the link now is down. Anyway I changed something so here it is: [my java parser](https://drive.google.com/folderview?id=0B-Us5ROfm2rQMGdQUzc3enVRV0E&usp=sharing).

# c# - c# - 基于选项使用模板创建动态代码

> ID：15809996
> 
> 赞同：1
> 
> 时间：2013-04-04T11:35:30.130
> 
> 标签：c#, templates, dynamic, options

我有一个与基于模板的 c# 动态代码生成 (html) 相关的问题。用户设置所有选项（例如是否应显示，模板中的图像是否应在特定日期之前更改，...）并提供代码生成所需的内容（文本、图像）。WIFI热点站点需要生成的代码。

该**模板**由 html、css 和 javascript 组成，它们在运行时由用户定义的设置进行扩展和修改。我还考虑在模板中提供“元设置”来定义，是否可以禁用某些选项。

**我的主要问题：**

如何定义模板以轻松*动态扩展模板代码？*例如，如果在运行时启用了用户选项，我需要在顶部添加 javascript 代码，在另一个（特定）位置下方添加 HTML 代码。另一个例子是当另一个选项被禁用时隐藏内容（定义的）......

我不确定处理该要求的最佳做法是什么。也许带有属性的 HTML 元素`id`可以帮助消除一些问题。但是对于 JavaScript，我不确定。也许模板需要是在运行时创建最终 HTML 的 XML？任何的想法？

有人知道如何处理吗？你懂我的意思吗？

提前感谢您的帮助，多米尼克

**更新信息：**

该项目是用纯 C# 编写的 - 没有任何 ASP.NET。这是一个使用 html 文件和生成 html 文件（作为输出）的桌面项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:50:21.423

[我想您可以在这个问题](https://stackoverflow.com/questions/483091/render-a-view-as-a-string)的帮助下使用 ASP.NET MVC Razor 视图引擎将 html 呈现到文件中。使用 Razor，您将获得对动态视图（也称为模板）更改、丰富的模板语法等的支持。创建网站时您可以做的一切。只需将 html 呈现到文件而不是响应正文。

# css - CSS 边框图像 - 关键

> ID：15809999
> 
> 赞同：2
> 
> 时间：2013-04-04T11:35:34.263
> 
> 标签：css

我用 CSS 做到了这一点： ![在此处输入图像描述](https://i.stack.imgur.com/zZsxc.jpg)

但我希望我的客户更改图像框架。在我的图像中，当前帧只是一种颜色（#000）。但框架可以是装饰性的。所以客户应该使用装饰图像进行框架。我看过[W3Schools 的border-image 属性课](http://www.w3schools.com/cssref/css3_pr_border-image.asp)。

语法是：

```
border-image: source slice width outset repeat; 
```

但是使用像下面这样的图像我无法做到这一点。

![在此处输入图像描述](https://i.stack.imgur.com/BqC5N.png)

*   我不明白：边框图像的尺寸（宽度-高度）的语法如何动态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:48:31.873

border-image 属性是 CSS3 中引入的属性之一，目的是使图像能够在 CSS 边框上使用。

CSS 边框图像属性是一种简写属性，用于在一个位置设置多个“边框图像”相关属性。换句话说，border-image 属性是一种将图像添加到边框的有效方法。

```
div{-webkit-border-image: url(/properties/border-image-1.png) 30 30 round;-moz-border-image: url(/properties/border-image-1.png) 30 30 round;-ms-border-image: url(/properties/border-image-1.png) 30 30 round;-o-border-image: url(/properties/border-image-1.png) 30 30 round;border-image: url(/properties/border-image-1.png) 30 30 round;} 
```

此链接可能对您有所帮助。

[http://css-tricks.com/understanding-border-image/](http://css-tricks.com/understanding-border-image/)

祝你好运:);

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T11:50:05.353

我找到了一个边框图像生成器，它显示了 x 和 y 值在您移动条形时如何变化。这是链接：

[http://border-image.com/](http://border-image.com/)

希望这可以帮助...