# StackOverflow 问答 13532000-13532999

# c++ - 带有 Detours 3.0 Express 的简单数据包记录器

> ID：13532007
> 
> 赞同：2
> 
> 时间：2012-11-23T15:32:49.823
> 
> 标签：c++, detours

我的系统：Microsoft Windows XP Professional 32 位

IDE/编译器：Microsoft Visual C++ 2010 Express Edition

图书馆：Detours 3.0 Express

目标：编写简单的数据包记录器。

我的代码：

**mydll.cpp**

```
#include <cstdio>
#include <windows.h>
#include <detours.h>

#pragma comment(lib,"detours.lib")
#pragma comment(lib,"ws2_32.lib")

int (WINAPI *pSend)(SOCKET s, const char* buf, int len, int flags) = send;
int WINAPI MySend(SOCKET s, const char* buf, int len, int flags);
int (WINAPI *pRecv)(SOCKET s, char* buf, int len, int flags) = recv;
int WINAPI MyRecv(SOCKET s, char* buf, int len, int flags);

FILE* pSendLogFile;
FILE* pRecvLogFile;

int WINAPI MySend(SOCKET s, const char* buf, int len, int flags)
{
    fopen_s(&pSendLogFile, "C:\\SendLog.txt", "a+");
    fprintf(pSendLogFile, "%s\n", buf);
    fclose(pSendLogFile);
    return pSend(s, buf, len, flags);
}

int WINAPI MyRecv(SOCKET s, char* buf, int len, int flags)
{
    fopen_s(&pRecvLogFile, "C:\\RecvLog.txt", "a+");
    fprintf(pRecvLogFile, "%s\n", buf);
    fclose(pRecvLogFile);
    return pRecv(s, buf, len, flags);
}

BOOL WINAPI DllMain(HINSTANCE hinst, DWORD dwReason, LPVOID reserved)
{
    if (DetourIsHelperProcess()) {
        return TRUE;
    }

    if (dwReason == DLL_PROCESS_ATTACH) {
        DetourRestoreAfterWith();

        DetourTransactionBegin();
        DetourUpdateThread(GetCurrentThread());
        DetourAttach(&(PVOID&)pRecv, MyRecv);
        DetourTransactionCommit();

        DetourTransactionBegin();
        DetourUpdateThread(GetCurrentThread());
        DetourAttach(&(PVOID&)pSend, MySend);
        DetourTransactionCommit();

    }
    else if (dwReason == DLL_PROCESS_DETACH) {
        DetourTransactionBegin();
        DetourUpdateThread(GetCurrentThread());
        DetourDetach(&(PVOID&)pRecv, MyRecv);
        DetourTransactionCommit();

        DetourTransactionBegin();
        DetourUpdateThread(GetCurrentThread());
        DetourDetach(&(PVOID&)pSend, MySend);
        DetourTransactionCommit();

    }
    return TRUE;
} 
```

**注射器.cpp**

```
#include <windows.h>
#include <detours.h>

#pragma comment(lib,"detours.lib")

int main(int argc, char *argv[])
{
    STARTUPINFO si;
    PROCESS_INFORMATION pi;

    ZeroMemory(&si, sizeof(si));
    ZeroMemory(&pi, sizeof(pi));
    si.cb = sizeof(si);
    si.dwFlags = STARTF_USESHOWWINDOW;
    si.wShowWindow = SW_SHOW;

    if(!DetourCreateProcessWithDllEx("C:\\Program Files\\Internet Explorer\\iexplore.exe", 
                                        NULL, NULL, NULL, TRUE, 
                                        CREATE_DEFAULT_ERROR_MODE | CREATE_SUSPENDED,
                                        NULL, NULL, &si, &pi, 
                                        "C:\\Documents and Settings\\Dawid\\Pulpit\\detours_test\\Detours_test\\Release\\Detours_test.dll", NULL))
        MessageBox(0, "failed", 0, 0);
    else
        MessageBox(0, "success", 0, 0);

    ResumeThread(pi.hThread);

    WaitForSingleObject(pi.hProcess, INFINITE);

    CloseHandle(&si);
    CloseHandle(&pi);

    return EXIT_SUCCESS;
} 
```

**错误信息：**

> (iexplore.exe) 应用程序

**问题：** 我的代码有什么问题？为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T12:06:52.503

**解决了**

我删除了功能：

```
DetourRestoreAfterWith(); 
```

从 DLL 并添加到 DLL 函数：

```
extern "C" __declspec(dllexport) void dummy(void){
    return;
} 
```

**现在，它起作用了！**

**mydll.cpp**

```
#include <cstdio>
#include <windows.h>
#include <detours.h>

#pragma comment(lib,"detours.lib")
#pragma comment(lib,"ws2_32.lib")

int (WINAPI *pSend)(SOCKET s, const char* buf, int len, int flags) = send;
int WINAPI MySend(SOCKET s, const char* buf, int len, int flags);
int (WINAPI *pRecv)(SOCKET s, char* buf, int len, int flags) = recv;
int WINAPI MyRecv(SOCKET s, char* buf, int len, int flags);

FILE* pSendLogFile;
FILE* pRecvLogFile;

int WINAPI MySend(SOCKET s, const char* buf, int len, int flags)
{
    fopen_s(&pSendLogFile, "C:\\SendLog.txt", "a+");
    fprintf(pSendLogFile, "%s\n", buf);
    fclose(pSendLogFile);
    return pSend(s, buf, len, flags);
}

int WINAPI MyRecv(SOCKET s, char* buf, int len, int flags)
{
    fopen_s(&pRecvLogFile, "C:\\RecvLog.txt", "a+");
    fprintf(pRecvLogFile, "%s\n", buf);
    fclose(pRecvLogFile);
    return pRecv(s, buf, len, flags);
}

extern "C" __declspec(dllexport) void dummy(void){
    return;
}

BOOL WINAPI DllMain(HINSTANCE hinst, DWORD dwReason, LPVOID reserved)
{
    if (DetourIsHelperProcess()) {
        return TRUE;
    }

    if (dwReason == DLL_PROCESS_ATTACH) {
        //DetourRestoreAfterWith();

        DetourTransactionBegin();
        DetourUpdateThread(GetCurrentThread());
        DetourAttach(&(PVOID&)pSend, MySend);
        DetourTransactionCommit();

        DetourTransactionBegin();
        DetourUpdateThread(GetCurrentThread());
        DetourAttach(&(PVOID&)pRecv, MyRecv);
        DetourTransactionCommit();
    }
    else if (dwReason == DLL_PROCESS_DETACH) {
        DetourTransactionBegin();
        DetourUpdateThread(GetCurrentThread());
        DetourDetach(&(PVOID&)pSend, MySend);
        DetourTransactionCommit();

        DetourTransactionBegin();
        DetourUpdateThread(GetCurrentThread());
        DetourDetach(&(PVOID&)pRecv, MyRecv);
        DetourTransactionCommit();
    }
    return TRUE;
} 
```

**注射器.cpp**

```
#include <windows.h>
#include <detours.h>

#pragma comment(lib,"detours.lib")

int main(int argc, char *argv[])
{
    STARTUPINFO si;
    PROCESS_INFORMATION pi;

    ZeroMemory(&si, sizeof(si));
    ZeroMemory(&pi, sizeof(pi));
    si.cb = sizeof(si);
    si.dwFlags = STARTF_USESHOWWINDOW;
    si.wShowWindow = SW_SHOW;

    if(!DetourCreateProcessWithDllEx("C:\\client.exe", 
                                        NULL, NULL, NULL, TRUE, 
                                        CREATE_DEFAULT_ERROR_MODE | CREATE_SUSPENDED,
                                        NULL, NULL, &si, &pi, 
                                        "C:\\Documents and Settings\\Dawid\\Pulpit\\detours_test\\Detours_test\\Release\\Detours_test.dll", NULL))
        MessageBox(0, "failed", 0, 0);
    else
        MessageBox(0, "success", 0, 0);

    ResumeThread(pi.hThread);

    WaitForSingleObject(pi.hProcess, INFINITE);

    CloseHandle(&si);
    CloseHandle(&pi);

    return EXIT_SUCCESS;
} 
```

# c# - 如何在 VS 2012 中打开 VS 11 解决方案和 csprojects？

> ID：13532008
> 
> 赞同：0
> 
> 时间：2012-11-23T15:32:53.760
> 
> 标签：c#, visual-studio-2012

我正在尝试从 VS2012 中的“CLR via C#，第 3 版，J. Richter”一书中打开[示例代码。](http://www.wintellect.com/downloads/CLR_via_C_,_3rd_Edition_Code_by_Jeffrey_Richter_%28January_20,_2010%29.zip)当我打开主 .sln 文件或 .csproj 文件时，我只是得到空白窗口。显然这些样本是在 VS 11.00 中制作的。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:51:50.700

一般来说，在 VS 2012 中打开 VS 2010 项目应该是没有问题的。但是，VS 2012 似乎解决方案文件名中的# 有问题。将“CLR via C#.sln”重命名为“CLR via C.sln”，打开没有问题。

# jquery - JQGrid 显示列但没有行数据

> ID：13532011
> 
> 赞同：0
> 
> 时间：2012-11-23T15:33:11.920
> 
> 标签：jquery, jqgrid

有人可以帮我吗？我正在尝试使用 JQGrid 使用 json 动态呈现列和数据。这些列似乎正在出现，但没有行数据。

以下是我从服务返回的 JSON：

```
{
    "total": 1,
    "page": 1,
    "records": 1,
    "rows": [
        {
            "id": 29291,
            "cell": [
                "Jim",
                "1",
                "2"
            ]
        }
    ],
    "columns": [
        "Name",
        "30/10/2012",
        "23/10/2012"
    ],
    "columnmodel": [
        {
            "name": "Name",
            "index": "Name",
            "align": "left",
            "width": 25
        },
        {
            "name": "30/10/2012",
            "index": "30/10/2012",
            "align": "left",
            "width": 25
        },
        {
            "name": "23/10/2012",
            "index": "23/10/2012",
            "align": "left",
            "width": 25
        }
    ]
} 
```

我使用的javascript是：

```
$.ajax({
    type: "GET",
    url: "ListData?ID=1",
    datatype: "json",
    success: function(result){
        $("#customgrid").jqGrid({
                datatype: "json",
                colNames: result.columns,
                colModel: result.columnmodel,
                data: result.rows,
                width: 800,
                pager: "#customgridpager",
                viewrecords: true,
                sortable: true,
                gridview: true,
        });
    },
}); 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:31:44.770

您只需对代码进行一些小的更改。您需要首先更改调用中的输入错误`$.ajax`：更改`datatype`为`dataType`. 然后你需要改变`datatype: "json"`to`datatype: "jsonstring"`和`data: result.rows`to `datastr: result`。我建议您的完整代码如下：

```
$.ajax({
    type: "GET",
    url: "NiallGray.json",
    dataType: "json",
    success: function (result) {
        $("#customgrid").jqGrid({
            datatype: "jsonstring",
            colNames: result.columns,
            colModel: result.columnmodel,
            datastr: result,
            width: 800,
            pager: "#customgridpager",
            viewrecords: true,
            sortable: true,
            gridview: true,
            rowNum: 10000,
            height: "auto"
        });
    }
}); 
```

演示的修改版本在[这里](http://ok-soft-gmbh.com/jqGrid/NiallGray.htm)：

![在此处输入图像描述](../Images/985d1ec7502e7897bc733167d7ffd122.png)

# java - 在Phonegap 2.2.0 Android中，启动声音在结束前停止播放

> ID：13532016
> 
> 赞同：1
> 
> 时间：2012-11-23T15:33:31.083
> 
> 标签：java, android, cordova, media-player, android-mediaplayer

在我的Phonegap 2.2.0 Android应用程序中，我想在启动时播放声音，同时显示启动画面，将webview隐藏在后台，其余的魔法发生在哪里 - 但需要时间来准备自己......所以我像使用我的 onCretae

```
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    super.setIntegerProperty("splashscreen", R.drawable.splash);
    super.loadUrl("file:///android_asset/www/index.html", 4000);

    // play startup sound
    Context appContext = getApplicationContext();
    MediaPlayer mp = MediaPlayer.create(appContext, R.raw.startup);

    mp.start();
} 
```

效果很好 - 但并不完美：有些东西（可能是 webview 本身？）正在停止播放我的启动声音。它在播放到最后之前停止。我读到了关于覆盖媒体播放器实例的 onComplete-method 的内容，因为在释放自身时[Android MediaPlayer 类中存在 300mx 间隙问题，](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/Ciiu1C-_EmE)但这并没有解决，而且似乎不是真的（我在音频文件的末尾添加了 1s 静音- 没有不同）。那么我怎样才能让我的启动声音充分发挥呢？谢谢！

# html - 微数据 - 如何标记放置在子项目内的项目属性（因此超出其范围）

> ID：13532019
> 
> 赞同：4
> 
> 时间：2012-11-23T15:33:32.397
> 
> 标签：html, semantic-web, semantic-markup, microdata, schema.org

有没有办法标记放置在子项目内的项目属性（因此超出了它的范围）？

我正在使用微数据和 schema.org 来标记一些网页。我有这样的代码：

```
<body itemscope itemtype="http://schema.org/WebPage">

    <header itemscope itemtype="http://schema.org/WPHeader">

        <a href="index.html">
            <img id="logo" src="xxx" alt="xxx" itemprop="primaryImageOfPage">
        </a>

    </header>

    <!--the rest of the page-->
</body> 
```

我在 WPHeader 项中有徽标，我希望它成为 WebPage 项的 primaryImageOfPage。我知道我可以使用 Itemref 来包含超出项目范围的属性，但是像这样您不会将此属性超出子项目的范围。如果两个项目可以具有相同的属性，例如名称或描述，这确实是一个问题。

这只是解释我遇到的问题的一个例子。到我使用 itemref 解决它的那一刻......但必须有更好的方法来做到这一点。

我知道没有必要标记所有内容，我只想知道哪种方法是避免出现此问题的最佳方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T09:59:17.070

微数据是 RDFa 盗版，被限制为与语义片段的搜索横切关注点相关。因此，它假设 CURIE 的高级作用域能力是可以丢弃的。对于高质量的特定领域内容页面表现出的完整性，**RDFa 以及相应地涵盖特定领域方面的词汇是目前的最终方式**。虽然搜索提供商主导了 HTML5 规范以使微数据成为标准的一部分，但随着 Web 不断增长的语义化，两者之间的差异最终只是“名称中有什么？”的问题。

# php - 使用 exec() 从 php 文件运行 php 文件失败

> ID：13532022
> 
> 赞同：0
> 
> 时间：2012-11-23T15:33:35.277
> 
> 标签：php, exec

我打算让一个 PHP 文件运行另一个 PHP 文件。第二个文件的运行时间相当长。这就是为什么我不简单地使用 include 或 require。相反，我使用以下操作。

```
exec('php5 /full/path/to/the/other/file.php > /dev/null 2> /dev/null < /dev/null &'); 
```

但是不是运行预期的文件，而是该文件再次调用自己，然后再次调用自己，依此类推，直到我`exec()`从文件中删除命令。

如果我获取命令的内容`exec()`并在命令行上运行它，它会按预期工作。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:40:09.533

尝试放置 php5 可执行文件的完整路径（whereis php5）。exec() 不会在与 shell 相同的环境中运行，因此 PATH 环境变量中可能没有 php5 的路径。

# php - 将 HTML 文本转换为 Leet (1337) 使用 XPath 说话

> ID：13532025
> 
> 赞同：6
> 
> 时间：2012-11-23T15:33:45.137
> 
> 标签：php, html, xpath, domdocument

我想将网页转换为 leet (1337) 与 XPath 和 PHP 对话。

它可以只用 PHP 完成，但 HTML 节点也被替换为 leet speak。

示例（$html 是网页）：

```
$find = array("a","b","c","d","e","f","g","h","i","j"."k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z");
$repl = array("4","b","c","d","3","f","g","h","1","j","k","1","m","n","0","p","9","r","5","7","u","v","w","x","y","2");
$html = str_replace($find, $repl, $html); 
```

这也替换了 HTML 节点。

这可以通过 XPath 选择器*text()*使用 XPath 和 PHP 来完成吗？示例（$html 是网页）：

```
$dom = new DOMDocument();
$dom->loadHTML($html);

$xpath = new DOMXPath($dom);
$xpath->query('//text()');
\\HERE THE REPLACING IN XPATH 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:04:18.980

试试这个：

```
$dom = new DOMDocument;
$dom->loadHTML( $html );
$xpath = new DOMXPath( $dom );
$nodes = $xpath->query( '//text()' );
foreach( $nodes as $node )
{
    $node->nodeValue = str_replace( $find, $repl, $node->nodeValue );
}
echo $dom->saveHTML(); 
```

请注意，这可能是满足您需求的更有用的 xpath 查询：

```
$nodes = $xpath->query( '//head/title/text() | //body//text()' ); 
```

...因为这只会替换文本中的文本`<head><title>`或文本是`<body>`. 可能不想替换可能的样式，Javascript 和你有什么。;-)

* * *

附带说明：我已经使用您的查找和替换字符数组对此进行了测试，但是它们发生了一些可疑的事情，我无法弄清楚。替换字符似乎并不总是与找到的字符对齐。我不知道为什么会这样。

我重新创建了数组，这些对我有用：

```
$find = array('a','b','c','d','e','f','g','h','i','j'.'k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z');
$repl = array('4','b','c','d','3','f','g','h','1','j'.'k','1','m','n','0','p','9','r','5','7','u','v','w','x','y','2'); 
```

我只是不明白为什么*你的*阵列*不*适合我。:-/ 也许是编码问题？如果有人想插话并冒险猜测，请做。

编辑：正如 rxdazn 所注意到的，`"j"."k"`是第一个数组中的问题，正如您从我重新创建的数组中看到的那样，我完全忽略了它（我将 $find 复制到 $repl，替换了引号，并填充了 leet 字符）。

# scala - (/home/user/.sbt) 已被弃用。请使用标准位置：/home/user/project?

> ID：13532027
> 
> 赞同：10
> 
> 时间：2012-11-23T15:33:56.147
> 
> 标签：scala, sbt

当我开始`sbt console`我得到这个：

> alex@alex-K43U:~$ sbt console [警告] 替代项目目录 .sbt (/home/alex/.sbt) 自 sbt 0.12.0 以来已被弃用。[警告]
> 请使用标准位置：/home/alex/project [info] 从 /home/alex/.sbt 加载项目定义 [info] 将当前项目设置为 default-22b2b7（在构建文件中：/home/alex/）

我刚开始使用 scala 和 sbt，所以我不太确定警告的含义。这意味着我必须将所有内容移动`/home/alex/.sbt`到`/home/alex/project`？

（我也有这个文件夹：`/home/alex/sbt`它有一个`bin`文件夹和一个`jansi-license.txt`文件。我想这就是我安装 sbt 的方式）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T21:53:40.913

您可以从除您家之外的任何专用文件夹运行 sbt 以消除此警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-06T21:15:31.723

出现此警告是因为您从包含该`.sbt`文件夹的目录运行 sbt，在您的情况下是`/home/alex/.sbt`

在里面创建一个文件夹（命名`project`或其他）`/home/alex/`并从那里运行 sbt 。不要移动`.sbt`新文件夹中的数据，因为警告会再次出现。

# android - Android 将 DateTime 从 AM/PM 转换为 24 小时

> ID：13532028
> 
> 赞同：1
> 
> 时间：2012-11-23T15:33:57.553
> 
> 标签：android, datetime

在对 SO 进行研究之后，我发现了这段代码，但它对我不起作用。给出一个错误，我不知道为什么。我已经尝试更改格式，但没有。

```
String date = "11/28/2012 10:05:00 AM";
SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy hh:mm:ss a");
Date testDate = null;

try {
    testDate = sdf.parse(date);
} catch(Exception ex) {
    ex.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T00:07:47.650

你可以这样写，它会工作：

```
{ 
    testDate = sdf.parse(date.toString());
} 
```

# c# - C# 从表单中获取信息（就像我制作的表单中的 MessageBox 按钮一样）

> ID：13532030
> 
> 赞同：0
> 
> 时间：2012-11-23T15:34:11.717
> 
> 标签：c#, button, textbox, label, subform

最近我一直在开发绘画软件，
我需要从包含 3 个控件的子表单中获取信息：

*   TextBox1 - 一个文本框
*   OkButton - 一个按钮
*   CancelButton - 一个按钮

主窗体包含 2 个控件：

*   Label1 - 标签
*   ChangeLabel1TextButton - 一个按钮

当我按下主表单上的“ChangeLabel1TextButton”按钮时，需要显示该子表单，
而不是当您按下子表单上的“OkButton”时，
主表单需要将“Label1”文本设置为文本子窗体上的“TextBox1”文本框。

表格图片：

**- 表格**

![表格](../Images/e704a92fe4d4b86d2a58f77a0e6148ca.png)

**-表格应该做什么**

![表格应该做什么](../Images/a85cca2f798920c8791ca940f1421f23.png)

希望你能帮助我！
不管怎么说，还是要谢谢你 ： ）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T15:45:31.637

为了让你开始，

1.  在您的子表单中，创建一个返回文本框文本的公共属性（我们称之为 InputText）。
2.  在您的主窗体中，打开子窗体 (.ShowDialog())
3.  子表单关闭后（按下 OK 时关闭），使用新属性 (InputText) 获取文本并设置为您的 label.Text。
4.  完毕！

# vb.net - 如何将按钮添加到 ListBox？

> ID：13532042
> 
> 赞同：-1
> 
> 时间：2012-11-23T15:35:10.360
> 
> 标签：vb.net, winforms, button, listbox

在我的项目中，我添加了一个从数据库中检索其项目的 ListBox。我想要做的是在 ListBox 上每个项目的右侧添加一个按钮，按下该按钮时，会从数据库中删除该项目并刷新 ListBox。

现在，让按钮做到这一点很容易（很可能是`Click()`按钮上的一个事件），但我的问题是我找不到将按钮实际添加到 ListBox 的方法。

有谁知道如何做到这一点？

顺便说一句，这是在一个 VB 桌面应用程序项目中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:45:33.997

msdn上有一篇关于将控件放入DataGridViews的文章。看看这个，看看它是否能让你更接近你想要的。

[http://msdn.microsoft.com/en-us/library/7tas5c80.aspx](http://msdn.microsoft.com/en-us/library/7tas5c80.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:54:59.623

DataGridView 将是一个更简单的解决方案，它已经包含您需要的所有功能。只需添加一个文本列和一个按钮列，然后您就可以订阅 Cell ContentClick 事件例如：

```
Private Sub DataGridView1_CellContentClick(ByVal sender As System.Object, ByVal e As System.Windows.Forms.DataGridViewCellEventArgs) Handles DataGridView1.CellContentClick
    'your database code here
    DataGridView1.Rows.RemoveAt(e.RowIndex)
End Sub 
```

# css - 没有 JS 的语法高亮插件，纯 CSS

> ID：13532045
> 
> 赞同：2
> 
> 时间：2012-11-23T15:35:25.433
> 
> 标签：css, syntax-highlighting, facebox

我想通过 Facebox 插件在 ajax 加载页面上显示一些源代码。

但是如果我尝试添加脚本标签

```
<script src="src/prettify.js"></script> 
```

Facebox 删除加载页面中的所有脚本标签。

所以我需要纯基于 CSS 的语法高亮解决方案或解决通过 facebox 删除脚本标签的问题。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-10T22:37:17.077

浏览器不执行通过 AJAX 引入的脚本标签：[内联 jQuery 脚本在 AJAX 调用中不起作用](https://stackoverflow.com/questions/2162496/inline-jquery-script-not-working-within-ajax-call)

唯一的 CSS 解决方案是将您的代码手动包装在跨度中并在 CSS 中设置所有颜色，这绝对不是理想的。

这里最好的解决方案是在`<script src="src/prettify.js"></script>`主页上包含执行 Facebox ajax 调用，并确保在 AJAXed 内容被拉入后触发美化，如下所示：

```
$(document).bind('beforeReveal.facebox', function() {
    prettyPrint();
}); 
```

# regex - Powershell 替换不匹配的条目

> ID：13532046
> 
> 赞同：0
> 
> 时间：2012-11-23T15:35:25.467
> 
> 标签：regex, powershell

我有一个 powershell 脚本，我正在处理它来编辑一些文本文件。到目前为止，我已经设法使用选择字符串提取了我想要编辑的所有行，然后在早期帖子的一些帮助下，我设法删除了每行上我不需要的所有信息。我接下来要做的是遍历每一行并删除任何与特定字符串不匹配的条目。例如，文本文件可能包含以下条目：

```
"1.1.1.1" "2.2.2.2." "3.3.3.3" "4.4.4.4" "1.2.3.4"
"1.2.3.4" "1.1.1.1" "2.2.2.2" "3.3.3.3" "4.4.4.4" 
```

我想去掉任何不是“1.1.1.1”或“2.2.2.2”或“3.3.3.3”或“4.4.4.4”的东西

*   所有条目都在双引号内
*   需要删除的条目可能位于该行的任何位置。
*   每行需要删除的条目不同
*   需要保留的条目是固定的

**本质上，我想要做的是删除与 6 个可能的固定值中的 1 个不匹配的任何内容，并使所有其他值不受影响。**

到目前为止，我已经尝试使用带有 -replace 选项的 get-content、各种形式的选择字符串、正则表达式等，但到目前为止还没有运气。这有点超出我的 Powershell 知识

编辑：

**我认为我最初尝试的方法不是正确的方法，也许我没有正确地表达这个问题。我现在有一个 csv 文件中的所有条目，其输出类似于以下内容：**

```
1  : Dhcp
2  : Server
3  : 192.168.0.1
4  : Scope
5  : 192.168.0.10
6  : set
7  : optionvalue
8  : 6
9  : IPADDRESS
10 : 192.168.0.11    
11 : 192.168.0.12
12 : 192.168.0.13
13 : 192.168.0.14
14 : 192.168.0.15
15 : 192.168.0.16 
16 : 192.168.0.17
17 : 
18 : 
19 : 
20 : 
```

**我想做的是浏览 csv 文件，检查每个条目的第 10-16 列的值，并删除任何与预定义列表不匹配的条目。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T05:57:36.250

只需从所有匹配行创建一个新数组，然后将文件内容设置为该新数组。

`-notmatch`如果您想创建一个包含不匹配的所有内容的数组，您可以将其更改为。

```
$pattern = "1\.1\.1\.1|2\.2\.2\.2|3\.3\.3\.3|4\.4\.4\.4"
$file_path = "C:\text.csv"
$text_file = get-content $file_path
foreach ($line in $text_file) {
    if ($line -match $pattern) {
        $line += @($new_lines)
    }
$new_lines | set-content $file_path
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:38:47.563

您可以将每个字符串与可接受值的数组进行比较，并相应地执行任何操作。

$array = "1.1.1.1","2.2.2.2","3.3.3.3"

if ($array -notcontains $data ) { $data -replace ".","" }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T16:54:35.010

这个？

```
$a -replace  '\s*"1.1.1.1"\s*|\s*"2.2.2.2"\s*|\s*"3.3.3.3"\s*|\s*"4.4.4.4"\s*' 
```

# haskell - 关于上下文中的值（在 Monad 中应用）

> ID：13532048
> 
> 赞同：2
> 
> 时间：2012-11-23T15:35:31.970
> 
> 标签：haskell

我有一个关于上下文价值的小问题。

*   Take `Just 'a'`，所以`Maybe`在这种情况下类型上下文中的值是`'a'`

*   Take `[3]`，所以`[a]`在这种情况下类型上下文中的值是`3`

*   如果你`[3]`像这样应用 monad: `[3] >>= \x -> [x+3]`，这意味着你`x`用 value 赋值`3`。没关系。

但是现在， take `[3,2]`，那么 type 上下文中的值是什么`[a]`？很奇怪，如果你像这样申请 monad：

```
[3,4] >>= \x -> x+3 
```

它得到了正确的答案`[6,7]`，但实际上我们不明白在这种情况下*x是什么。*您可以回答，啊*x*是 3，然后是 4，*x*向函数提供 2 次并按原样连接`Monad`：`concat (map f xs)`像这样：

```
[3,4] >>= concat (map f x) 
```

所以在这种情况下，`[3,4]`将分配给*x*。这意味着错误，因为`[3,4]`不是一个值。`Monad`是错的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T17:19:23.390

我认为您的问题过于关注价值观。monad 是一个类型构造函数，因此不关心有多少和什么样的值，而*只*关心上下文。

A`Maybe a`可以是`a`，也可以什么都不是。很简单，你正确地观察到了这一点。

An`Either String a`要么是 some `a`，要么是 a 形式的一些信息`String`（例如，为什么计算`a`失败）。

最后，`[a]`是未知数量的`a`s（或根本没有），这可能是由模棱两可的计算产生的，或者是一个给出多个结果的结果（如二次方程）。

* * *

现在，对于 的解释`(>>=)`，了解 monad 的基本属性（范畴论者如何定义）是有帮助的

```
join :: m (m a) -> m a. 
```

加上`fmap`，`(>>=)`可以写成`join`。

以下是什么`join`意思：*一个上下文，再次放在相同的上下文中，仍然具有相同的结果行为*（对于这个 monad）。

这一点很明显`Maybe (Maybe a)`： 某些东西本质上可以是`Just (Just x)`, or `Nothing`, or `Just Nothing`, 提供与 . 相同的信息`Nothing`。因此，`Maybe (Maybe a)`您可以不使用 ，`Maybe a`而不会丢失任何信息。就是这样`join`做的：它转换为“更容易”的上下文。

`[[a]]`不知何故更困难，但并不多。从多个/不明确的结果中，您基本上有多个/不明确的结果。一个很好的例子是四次多项式的根，它是通过求解一个二次方程找到的。你首先得到两个解，从每个解中你可以找到另外两个，得到四个根。

但关键是，无论您谈论的是模棱两可的模棱两可的结果，还是只是一个模棱两可的结果。您可以始终使用上下文“模糊”，并使用`join`.

这就是`(>>=)`列表的作用：它将模棱两可的函数应用于模棱两可的值：

```
squareRoots :: Complex -> [Complex] 

fourthRoots num = squareRoots num >>= squareRoots 
```

可以改写为

```
fourthRoots num = join $ squareRoots `fmap` (squareRoots num)
-- [1,-1,i,-i]    <-  [[1,-1],[i,-i]]  <-       [1,-1] <- 1 
```

因为您所要做的就是为每个可能的值找到所有可能的结果。

这就是为什么`join`是`concat`列表，事实上

```
m >>= f == join (fmap f) m 
```

必须在任何单子中成立。

可以给出类似的解释`IO`。具有副作用的计算，也可能具有副作用 ( `IO (IO a)`)，本质上*只是具有副作用的东西*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T16:17:29.937

你必须相当广泛地理解“上下文”这个词。

解释值列表的一种常见方式是它表示一个不确定的值，因此 [3,4] 表示一个值是 3 还是 4，但我们不知道是哪个（也许我们只知道它是 x^ 的解） 2 - 7x + 12 = 0)。

如果我们然后将 f 应用于它，我们知道它是 6 或 7，但我们仍然不知道哪个。

您更习惯的不确定值的另一个示例是 3。它可能意味着 3::Int 或 3::Integer，有时甚至是 3.0::Double。感觉更容易，因为只有一个符号代表不确定的值，而在列表中，所有可能性都列出了（！）。

如果你写

```
asum = do
   x <- [10,20]
   y <- [1,2]
   return (x+y) 
```

您将获得一个包含四个可能答案的列表： [11,12,21,22]
这是您可以添加 x 和 y 的每种可能方式的一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T16:57:50.130

不是上下文中的值，而是类型。

`Just 'a' :: Maybe Char`---`Char`在`Maybe`上下文中。

`[3, 2] :: [Int]`---`Int`在`[]`上下文中。

中是否有一个、没有或多个`a`是`m a`无关紧要的。

**编辑：**考虑`(>>=) :: Monad m => m a -> (a -> m b) -> m b`.

你举个例子`Just 3 >>= (\x->Just(4+x))`。但考虑`Nothing >>= (\x->Just(4+x))`。在上下文中没有任何价值。但是类型在上下文中都是一样的。

`x`认为必须是单个值是没有意义的。`x`有一个类型。如果我们正在处理`Identity`monad，那么`x`将是一个值，是的。如果我们在`Maybe`monad 中，`x`它可能是一个单一的值，或者它可能根本就不是一个值。如果我们在列表 monad 中，`x`可能是单个值，或者根本不是值，或者是各种不同的值……但它不是所有这些不同值的列表。

你的另一个例子--- `[2, 3] >>= (\x -> x + 3)`---`[2, 3]`没有传递给函数*。*`[2, 3] + 3`会有类型错误。`2`传递给函数。也是如此`3`。该函数被调用两次，为这两个输入提供结果，然后由`>>=`操作员组合结果。`[2, 3]`没有传递给函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T22:45:31.807

“上下文”是我最喜欢的思考 monad 的方式之一。但是你有一个小小的误解。

> 取 Just 'a'，因此在这种情况下 Maybe 类型的上下文中的值是 'a'

不完全的。您一直在说`the value in context`，但上下文“内部”并不总是有一个值，或者如果有，那么它不一定是唯一的值。这一切都取决于我们正在谈论的背景*。*

`Maybe`上下文是“可空性”或潜在缺席的上下文。那里可能有东西，或者可能有`Nothing`。的“内部”没有价值`Nothing`。所以可能的上下文可能在内部有一个值，也可能没有。如果我给你一个`Maybe Foo`，那么你不能假设有一个`Foo`。*相反*，您必须假设它是`Foo` *实际可能存在的上下文的内部`Nothing`*。你可能会说某类型的东西`Maybe Foo`是*可空`Foo`*的。

> 取 [3]，因此在这种情况下，类型 [a] 的上下文中的值为 3

再说一次，不太对。一个列表代表一个*不确定*的上下文。我们不太确定*“*价值”应该是什么，或者根本没有。如果是单例列表，例如`[3]`，那么是的，只有一个。但是考虑列表的一种方法`[3,4]`是将其视为*一些*不可观察的值，我们不太确定它是什么，但我们确定它`3`或它是`4`。您可能会说某种类型的东西`[Foo]`是*不确定`Foo`*的。

* * *

> `[3,4] >>= \x -> x+3`

这是一个类型错误；不太清楚你的意思。

> 所以在这种情况下，`[3,4]`将分配给 x。这意味着错误，因为`[3,4]`不是一个值。单子错了。

你在这里完全失去了我。每个实例`Monad`都有自己的实现`>>=`，定义了它所代表的上下文。对于列表，定义是

```
(xs >>= f) = (concat (map f xs)) 
```

您可能想了解与 的概念相关的`Functor`和操作，并可能有助于消除一些困惑。`Applicative``Monad`

# c++ - wxWidget 构建问题

> ID：13532052
> 
> 赞同：2
> 
> 时间：2012-11-23T15:35:44.263
> 
> 标签：c++, wxwidgets, zlib

我一直在尝试安装和使用 wxWidgets v(2.8)。我经常遇到同样的问题。在构建 wxWidgets 库时。我收到此错误：

错误 C1083: 无法打开包含文件: 'zlib.h': 没有这样的文件或目录 d:\wxwidgets-2.8.12\src\png\png.h 346

当我从exe安装它时，我无法弄清楚为什么。我正在按照这里的说明进行操作：[http ://wiki.wxwidgets.org/Microsoft_Visual_C%2B%2B_Guide](http://wiki.wxwidgets.org/Microsoft_Visual_C%2B%2B_Guide)

我还收到了一个链接器错误，我认为这并不重要。

任何帮助都会很棒。我已经尝试从 exe 安装它，并且也只使用了 zip 文件夹，但仍然遇到相同的问题。我怀疑这可能与环境变量有关，但找不到明确的答案是否需要它们以及它们也应该设置什么。

编辑这里也有类似的东西：

错误 C1083：无法打开包含文件：'expat_config.h'：没有这样的文件或目录 D:\wxWidgets-2.8.12\src\expat\lib\xmlparse.c 30 欢呼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:11:48.237

在 png.h 的第 346 行，我们有

```
/* include the compression library's header */
#include "zlib.h" 
```

所以你需要告诉编译器在 wxWidgets-2.18.12\src\zlib 中查找头文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T19:50:55.040

通过另一个安装，我设法解决了这个问题。

# .net - 如何在不从 c# 和自动化中保存的情况下设置 word 文档的文件名

> ID：13532057
> 
> 赞同：5
> 
> 时间：2012-11-23T15:36:10.177
> 
> 标签：.net, ms-word, office-interop, mailmerge

我通过自动化创建 word 文档，并使用来自 c# (.net4) 的 office Interop 进行邮件合并。合并效果很好，用户可以根据需要接收创建的文档。到目前为止一切都很好。客户端现在请求，如果他尝试保存生成的文件（通过保存文件对话框），文档的文件名已经预填充。

我已经尝试了一些显而易见的事情，例如设置 Document-instance 的 Name 属性和其他属性，我也搜索了一个解决方案，但到目前为止，我无法设置 word 文件的文件名（不保存它）。

有人知道如何实现这一目标吗？我觉得如果它可以工作，客户会很高兴，我也已经花了很多时间在这上面（我不得不承认自动化这个词我没有太多经验）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T16:12:25.577

如果您设置文档的 Title 属性，当您选择 Save As 时，这就是将使用的文档名称。您还可以设置默认保存位置。在 VBA 中

```
Set doc = ActiveDocument

sTitle = doc.BuiltInDocumentProperties("Title").Value
doc.BuiltInDocumentProperties("Title").Value = "A different title" 
```

但是，这仅适用于第二次（及以后）保存尝试。第一次尝试将始终使用模板中的标题（如果有）或文档第一行中的内容（如果没有）。请参阅此答案的结尾以获得更好的解决方案。

~~但是请注意，您必须在“另存为”之前对文档进行一些更改才能使新标题生效。~~

```
Sub SetSummaryInfo()
Dim dp As Object
Dim sTitle As String
    If Documents.Count > 0 Then
       Set dp = Dialogs(wdDialogFileSummaryInfo)
       ' Retrieve value of "Title" into a variable.
       sTitle = dp.Title
       ' Set "Title" to a new value.
       dp.Title = "My Title"
       ' Set the value without showing the dialog.
       dp.Execute
       ' Save the changes
       'ActiveDocument.Save
    End If
End Sub 
```

**正如 C# 中的 HCL 所说，您可以使用以下代码设置默认文件名（仅用于对话框）：**

```
dynamic dialog = wordApp.Dialogs[WdWordDialog.wdDialogFileSummaryInfo]; 
dialog.Title = "MyTitle"; 
dialog.Execute(); 
```

这将打开标准的“另存为”对话框，设置默认文件名（不是您对“标题”属性的期望，但这就是它的作用），然后打开对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:57:30.687

文档
[http://msdn.microsoft.com/en-us/library/microsoft.office.tools.word.document.saveas%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.tools.word.document.saveas%28v=vs.80%29.aspx)
似乎说您可以**指定**文件名或 am我错过了什么？

# javascript - 谷歌图表删除带有多个复选框的列

> ID：13532059
> 
> 赞同：1
> 
> 时间：2012-11-23T15:36:29.240
> 
> 标签：javascript, jquery, checkbox, google-visualization

*语言：jQuery、javascript*

**下面的代码：运行良好。**

```
(...)
var check_box_values = $('#myForm [type="checkbox"]:not(:checked)').map(function () 
{
    return this.value;
}).get(); 
```

**下面的代码：运行良好。**

```
function f(check_box_values)
{
    (...)
    var obj = jQuery.parseJSON(jsonData);
    var data = google.visualization.arrayToDataTable(obj); 
```

**下面的代码： for 循环运行良好，但 if 语句从不开始**

```
for (var i = 1; i < data.getNumberOfColumns()-1; i++)
{
    if ($.inArray(i, check_box_values) > -1) 
    { 
        data.removeColumn(i);
    }
} 
```

**Html 代码：运行良好。**

我究竟做错了什么？注意：check_box_values 数组已填充。

**编辑：（例如）**
`getNumberOfColumns: 6`

```
check_box_values array: [1,3,5] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-07T18:25:30.247

我在您的代码中看到了一个问题。调用 data.removeColumn 后，列索引将被重置，getNumberOfColumns() 的结果将与您的预期不同。换句话说，此函数并非设计为在循环内调用。

这是一个例子。假设您有五列，columIndex 的范围为 0-4。您想删除第 3 (columnIndex: 2) 和第 5 (columnIndex: 4) 列。一旦你的代码第一次执行，即removeColumn(2)，列索引将被移动，getNumberOfColumns()将变为4。如果你调用removeColumn(4)，它会导致运行时错误，因为索引没有指向任何列。您应该改为调用 removeColumn(3)。

# css - 如何从左到右放置 DIV？

> ID：13532060
> 
> 赞同：1
> 
> 时间：2012-11-23T15:36:41.793
> 
> 标签：css, html, menu

是否可以设置 DIV 样式，使其如下所示：

![在此处输入图像描述](../Images/58eaa8e3f21aea0c2e1dad4ad2a153c6.png)

用简单的代码

```
<div class='menubar'><div class='menu'>item1<br/>item2</div>...</div> 
```

这是菜单。我只想调整所选 DIV 的大小。

特征应如下：

**1）** DIV从左到右放置，不指定绝对位置。

**2)** DIV 比容器 DIV 高，但不要拉伸它

**更新**

请用 DIV 或 SPAN 解释，我没有用 LEFT 和它们一起使用。我需要学习，而不是准备好解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:41:30.477

这是非常基本的东西。

1) 不要使用 div，使用列表 2) 浮动子元素

```
<ul class='menubar'>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
</ul> 
```

和相应的CSS：

```
ul.menubar{
   /*some fancy css*/
   height:<x>px; /* is needed since it would collapse otherwise*/
}
ul.menubar > li{
   float:left;
   /* more fancy css */
} 
```

给你一个**[花哨的演示](http://jsfiddle.net/W2W45/1/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:40:53.880

为您的 div 设置宽度，然后使用`float:left;`? 这不会拉伸容器

您还可以使用`display:inline-block;`（在 div 上）并设置`text-align:center;`为容器。但它会拉伸容器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T15:49:00.980

这将取决于您希望它适用于哪种浏览器。对于 ie8 及以下，我建议不要使用此代码。如果您更喜欢全浏览器版本，但最好忽略 5.5、6、7 和 8，请收件箱给我。

首先对于菜单，我发现使用无序列表方法比选择 div 及其 ID 和类更容易。这是一个小例子。

HTML 列表

```
<ul id="menu">
    <li>
        <a href="#">list1</a>
    </li>
    <li>
       <a href="#">List2</a>
       <ul>
           <li>
               <a href="#">Option2</a>
           </li>
       </ul>
</ul> 
```

菜单的 CSS：

```
body, html {
    padding:0px;
    margin:0px;
    width:100%;
}
body{
    background:#FCFCFC;
}
#menu{
    background:#333333;
    list-style-type:none;
    padding:0px;
    margin:0px;
}
#menu > li {
    padding:0px;
    margin:0px;
    display:inline-block;
}
#menu > li > a {
    color:#FFFFFF;
    text-decoration:none;
    font-size:20px;
    font-weight:bold;
}
#menu > li > ul {
    display:hidden;
    position:absolute;
}
#menu > li:hover > ul{
    display:block;
} 
```

无论如何，这就是基础。一旦你准备好了，你就可以开始了！

# matlab - 简单方程的迭代 k

> ID：13532061
> 
> 赞同：0
> 
> 时间：2012-11-23T15:36:45.553
> 
> 标签：matlab

如何为这个问题matlab的m文件创建正确的函数？

一种方式运行。

我必须始终在 1、2、3、4、5、6 处更改 k ......

如何在一次调试中运行它？

w=8；常量（编辑这个值应该被删除）

.

k=1,2,3,4,5,6,7..等；我必须将其更改为 1、2、3、4、5、6、7 ......

.

x=2；持续的

a=0.2 ; 持续的

w=(0:0.3:3)

.

S=[1-exp(-a.*x.*k.*w)];

.

图(2)

情节（w，S，'-+'）；

xlabel('w');

ylabel('S');

推迟

（应该坚持）编辑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:15:34.093

这是我假设是您的问题的答案，但仍然不清楚：

```
for k=1:N %where N is the highest number you want k to be

x = 2;
a = 0.2;
w = 0:0.3:3;

S = 1 - exp(-a * x * k * w);

figure(2)
plot(w,S,'-+');
xlabel('w');
ylabel('S');
hold off

end 
```

显然，您将根据需要更改保持/绘图参数，具体取决于您希望图形执行的操作 - 保持保持不变并继续在同一图形上绘制以显示各种`k`s 的 S 或为每个 k 绘制一个新图形。

编辑：关于您更新的目标，使用[diff](http://www.mathworks.com/help/matlab/ref/diff.html)函数在 say 中生成 S3-S2、S2-S1 等组件`Sdiff`，然后创建一个新的移位向量`SdiffPrime`，在一侧填充一个值，然后执行`Sdiff./SdiffPrime`. 这将提供您想要的所有差异比率。然后相应地绘制它

# php - mysql连接速度慢

> ID：13532062
> 
> 赞同：0
> 
> 时间：2012-11-23T15:36:45.507
> 
> 标签：php, mysql, sql, mysqli, database-connection

我正在使用 XAMMP 在我的笔记本电脑（Windows）上处理 mysql 和 php。

一切都很好，但是因为我需要与 mysql 通信，所以我需要在第一次创建页面时连接到 db：

```
$mysqliu = new mysqli($db_host, $db_user, $db_pass, $db_name); 
```

加载大约需要 1.2 秒，但我的整个页面创建时间约为 1.23，这意味着我的 PHP 页面只需 0.03 秒即可加载，并且仅用于连接需要大量时间？

我怎样才能降低这个速度？

在真实服务器中是否相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:40:32.567

我不使用 mysqli，但在这种情况下我会采用的标准方法是尝试持久连接。快速查看 PHP 文档表明 mysqli 支持它们。你不需要改变你的使用，你只需要指出你的连接应该是持久的，然后像往常一样工作。下面的链接描述了用法：

[http://php.net/manual/en/mysqli.persistconns.php](http://php.net/manual/en/mysqli.persistconns.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:41:55.173

这可能是由于两个不同的问题。一是您的防火墙的安全级别可能太高并试图检测您的连接。另一件事可能是硬盘速度慢，碎片太多​​。

# php - 如何通过结束会话从站点注销

> ID：13532063
> 
> 赞同：0
> 
> 时间：2012-11-23T15:36:46.243
> 
> 标签：php, mysql, sql, session

我在退出网站时遇到问题。但是，到目前为止，当我创建 logout.php 并包含 session_destroy(); 时，我已经登录了。它似乎不起作用。

这是我的每一页的代码。

索引.php：

```
<?php include ("login.php"); ?> 
```

登录.php

```
 <?php
session_start();
$_SESSION['loggedin']['user']=$_POST['user'];
if(isset($_SESSION['loggedin'])){
    echo '<h2>Logged in</h2><p style="font-size:14px;">Welcome '.$_SESSION["user"].' you have sucessfully logged in.</p>';
}
else {
     echo '
       <h2>Login</h2>
       <form action="auth.php" method="POST">
       <div class="smallform">
                <p><span>Username:</span><br>
                <input type="text" name="user"></p>
                <p><span>Password:</span><br>
                <input type="password" name="pass"></p>
                <p style="padding-top: 15px"><input type="submit" value="Submit"></p>
        </div>
        </form>';
}
?> 
```

认证.php：

```
 <?php
session_start();
$con = mysqli_connect("HOST", "USER", "PASS", "DBNAME");
$user = $_POST["user"];
$pass = $_POST["pass"];
$sql = "SELECT UserID FROM Customer 
        WHERE UserID = \"$user\"
        AND Password = md5(\"$pass\")";

$res = mysqli_query($con, $sql);
?>
<!DOCTYPE>
<html>

<head>
<title>VeloCity</title>
<link href="_stylesheet.css" rel="stylesheet" type="text/css" />
<?php echo '<meta http-equiv="refresh" content="1;URL=index.php" />'; ?>
</head>

<body>
<div align="center">
<?php 
if(mysqli_num_rows($res)==1){
    $_SESSION["user"] = $user;
    $_SESSION["loggedin"] = True;
    echo "You have sucessfully logged in";
}
else{
    echo "You have entered an incorrect password. Please try again";
}
?>
</div>
</body>
</html> 
```

注销.php

```
<?php
session_start();
session_destroy();
?> 
```

在 login.php 中添加的另一件事我有一个 if 语句，即：

```
if(isset($_SESSION['loggedin'])){
    echo '<h2>Logged in</h2><p style="font-size:14px;">Welcome '.$_SESSION["user"].' you have successfully logged in.</p>';
} 
```

问题是您可以看到它应该显示欢迎“用户名”，最初它会显示，但现在它不会显示欢迎您已成功登录。

我要提前感谢大家的帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:41:30.170

### 几点注意事项：

1.  您的输入未经过消毒。
2.  尽量不要使用`mysql_*`已弃用的函数。使用`PDO`或`mysqli_*`代替。

### 在以下代码中使用此代码`logout.php`：

```
<?php
    session_start();
    // Because you are checking if(isset($_SESSION['loggedin'])), use the below:
    unset($_SESSION['loggedin']);
    $_SESSION = array();
    session_destroy();
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:41:39.103

问题是，在您定义的登录页面上`$_SESSION['loggedin']`：

```
$_SESSION['loggedin']['user']=$_POST['user']; 
```

删除它，否则，您的：

```
if(isset($_SESSION['loggedin'])) 
```

`true`即使用户未登录，也将始终评估并显示欢迎消息。

# iphone - RestKit - 将嵌套的 json 映射到模型类

> ID：13532066
> 
> 赞同：0
> 
> 时间：2012-11-23T15:36:49.157
> 
> 标签：iphone, objective-c, restkit, geojson

我有想要映射到模型类的 json

```
{
 "type": "FeatureCollection",
 "features": [
 {
   "geometry": {
     "coordinates": [100.0, 0.0, 129, 1356044399]
   },
   "properties": {
    "name": "My first name",
    "description": "Popular place"
   }
 },
 {
   "geometry": {
     "coordinates": [100.0, 1.0, 127, 1356045399]
   },
   "properties": {
    "name": "My second TIP",
    "description": "Even more popular place"
   }
 }
 ]
} 
```

我想把它放到一个像这样的模型类中：

```
@property longitude (taken from coordinates index 0)
@property latitude (taken from coordinates index 1)
@property name
@property description 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T10:25:57.853

好吧，我想出的解决方案如下：

两种型号：

```
@interface WTFeaturesModel
@property (nonatomic, strong) NSString *type;
@property (nonatomic, strong) NSArray *features;

@interface WTFeatureModel
@property (nonatomic, strong) NSDictionary *properties;
@property (nonatomic, strong) NSDictionary *geometry; 
```

模型映射：

```
[featureMapping addAttributeMappingsFromArray:@[@"properties", @"geometry"]];

[featuresMapping addAttributeMappingsFromArray:@[ @"type"]];
[featuresMapping addPropertyMapping:[RKRelationshipMapping relationshipMappingFromKeyPath:@"features" toKeyPath:@"features" withMapping:featureMapping]]; 
```

在我创建了这些模型之后，我必须将数据映射到具有正确属性的另一个模型。无论如何，这使得映射工作......

# ios - iOS - 移动图像时旋转图像

> ID：13532067
> 
> 赞同：2
> 
> 时间：2012-11-23T15:36:56.310
> 
> 标签：ios, image, animation, rotation

出于几个原因，我使用 an`NSTimer`来移动动画。我还必须在它移动时旋转它。是否可以？一些示例代码？谢谢`UIImageView``UIView`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:46:52.807

对视图应用变换

```
- (void)viewDidAppear:(BOOL)animated {
    self.imageView.contentMode = UIViewContentModeScaleAspectFit; //if not set in xib it must be set here
    [NSTimer scheduledTimerWithTimeInterval:0.5 target:self selector:@selector(move:) userInfo:nil repeats:YES];
}

- (void)move:(id)timer {
    CGRect f = self.imageView.frame;
    static CGFloat angle = 1;

    f.origin.x += 5;
    f.origin.y += 10;
    self.imageView.frame = f;

    self.imageView.transform = CGAffineTransformMakeRotation(angle); //!!!
    angle += 10;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T14:59:02.893

我找到了解决方案。当我移动我的`UIImageView`我改变它的框架改变它的`y`价值。因此，当对象的框架发生变化时，不可能变换对象。所以，为了移动我，`UIImageView`我现在改变了它的`center`属性，转换就像一个魅力！

# c# - 将代码重构为泛型方法

> ID：13532068
> 
> 赞同：4
> 
> 时间：2012-11-23T15:37:17.590
> 
> 标签：c#, entity-framework

我的 EntityFramework 支持的存储库中有一个重复出现的代码块，我想以某种方式对其进行泛化并作为方法调用，因此重用代码而不是重复它。

当前代码块如下所示：

```
 // Archive deleted MyItems sections
        _t.MyItems.Where(x => x.ValidTo == null && !team.MyItems.Contains(x)).ToList().ForEach(x => x.ValidTo = DateTime.Now);

        // Add or update MyItems sections
        foreach (var MyItemsSection in team.MyItems)
        {
            if (MyItemsSection.Id == default(int))
            {
                MyItemsSection.ValidFrom = DateTime.Now;
                _t.MyItems.Add(MyItemsSection);
            }
            else
            {
                var _MyItemsSection = _t.MyItems.FirstOrDefault(x => x.Id == MyItemsSection.Id);
                context.Entry(_MyItemsSection).CurrentValues.SetValues(MyItemsSection);
            }
        } 
```

`_t`是 EntityFramework 连接对象图，而`team`是已断开连接并可能在外部更新的相同类型的对象图。这里的目标是同步两个对象图，以便保持更改。

我需要传入 _t.MyItems 和 team.MyItems，其中 MyItems 将被泛化，因此相同的方法适用于 MyOtherItems 和 MySocks、MyUnderPants 等。

这是可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:59:15.077

您有两个选择：要么将对象限制为包含要在泛型方法中访问的属性和方法的已知基本类型，要么使用谓词进行选择。

约束：

```
// base type
interface IFoo {
  int ID { get; set; }
}

  // generic method
  public List<T> Update<T>(List<T> graph1, List<T> graph2) where T : IFoo {
    var update = graph1.Intersect(graph2, (g1, g2) => { g1.ID == g2.ID }).ToList();
    return update;
  } 
```

谓词：

```
public void Update<T, U>(T _t, T team, Func<T, IList<U>> selector) 
{
    var _tItems = selector(_t);
    var teamItems = selector(team);

    // Archive deleted MyItems sections
    _tItems.Where(x => x.ValidTo == null && !teamItems.Contains(x)).ToList().ForEach(x => x.ValidTo = DateTime.Now);

    // Add or update MyItems sections
    foreach (var MyItemsSection in teamItems)
    {
        if (MyItemsSection.Id == default(int))
        {
            MyItemsSection.ValidFrom = DateTime.Now;
            _tItems.Add(MyItemsSection);
        }
        else
        {
            var _MyItemsSection = _tItems.FirstOrDefault(x => x.Id == MyItemsSection.Id);
            context.Entry(_MyItemsSection).CurrentValues.SetValues(MyItemsSection);
        }
    }
}

    //Usage:
    Update(_t, team, (t => t.MyItems)); 
```

但是话又说回来，是什么阻止您编写将列表作为参数的方法？

如在`public void Update<T>(IList<T> _tItems, IList<T> teamItems)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T13:54:22.923

在回答我自己的问题时，这是答案 - 我缺少的是您可以要求传入类型作为实现特定接口，并且仍然可以作为所需类型使用它。

所以，这就是我想出的：

```
public void UpdateEntities<TEntity>(ICollection<TEntity> pocoCollection, ICollection<TEntity> dbCollection)
        where TEntity : class, IEntity
    {
        // Archive deleted entities
        dbCollection.Where(x => x.ValidTo == null && !pocoCollection.Contains(x)).ToList().ForEach(x => x.ValidTo = DateTime.Now);

        // Add or update entities
        foreach (var entity in pocoCollection)
        {
            if (entity.Id == default(int))
            {
                entity.ValidFrom = DateTime.Now;
                dbCollection.Add(entity);
            }
            else
            {
                var _entity = dbCollection.FirstOrDefault(x => x.Id == entity.Id);
                context.Entry(_entity).CurrentValues.SetValues(entity);
            }
        }
    } 
```

我正在寻找的部分是`where TEntity : class, IEntity`

在这个解决方案中，我必须确保我的实体实现了接口 IEntity，它就是：

```
public interface IEntity
{
    int Id { get; set;}
    DateTime ValidFrom { get; set; }
    DateTime? ValidTo { get; set; }
} 
```

这允许编译器停止抱怨这些属性的使用，而我仍然可以使用实际类型，因此 Entity Framework 也很满意，并且对正在发生的事情不那么困惑。

希望这对其他人有帮助。

# iphone - 根视图控制器 - 重定向到特定视图引发异常

> ID：13532071
> 
> 赞同：0
> 
> 时间：2012-11-23T15:37:30.180
> 
> 标签：iphone, objective-c, xcode, cocoa-touch

我的应用程序的更新需要一个设置，用户可以在其中选择要加载的视图。因此，由于我使用的是故事板，因此我设法创建了一个视图控制器，该控制器通过故事板连接到另一个充当“根视图控制器”的视图

然后我将以下代码添加到该视图中，我在这里使用示例字符串来测试代码是否有效。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *test = @"one";

    id rootController;
    if (test == @"one") {
        rootController = [self.storyboard instantiateViewControllerWithIdentifier:@"one"];

    } else if (test == @"two") {
        rootController = [self.storyboard instantiateViewControllerWithIdentifier:@"two"];

    }
    else if (test == @"three") {
        rootController = [self.storyboard instantiateViewControllerWithIdentifier:@"three"];

    }

    else {
        rootController = [self.storyboard instantiateViewControllerWithIdentifier:@"none"];

    }
    self.view = [NSArray arrayWithObjects:rootController, nil];
} 
```

但是每当应用程序启动时，就会抛出以下异常：

```
2012-11-23 16:30:40.482 MyApp[1587:c07] -[__NSArrayI _setViewDelegate:]: unrecognized selector sent to instance 0x716cf30
2012-11-23 16:30:40.501 MyApp[1587:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayI _setViewDelegate:]: unrecognized selector sent to instance 0x716cf30'
*** First throw call stack:
(0x1c8e012 0x10cbe7e 0x1d194bd 0x1c7dbbc 0x1c7d94e 0xf85ac 0xf4a90 0x2dee 0xf4817 0xf4882 0xf4b2a 0x10bef5 0x10bfdb 0x10c286 0x10c381 0x10ceab 0x10cfc9 0x10d055 0x2123ab 0x6392d 0x10df6b0 0x228afc0 0x227f33c 0x228aeaf 0x1028cd 0x4b1a6 0x49cbf 0x49bd9 0x48e34 0x48c6e 0x49a29 0x4c922 0xf6fec 0x43bc4 0x43dbf 0x43f55 0x4cf67 0x10fcc 0x11fab 0x23315 0x2424b 0x15cf8 0x1be9df9 0x1be9ad0 0x1c03bf5 0x1c03962 0x1c34bb6 0x1c33f44 0x1c33e1b 0x117da 0x1365c 0x21dd 0x2105)
libc++abi.dylib: terminate called throwing an exception 
```

为什么代码不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:47:47.890

如果你使用 Storyboards，你也应该使用 Segues，它与 iOS5 的 Storyboards 是同时引入的。

在您的 MainStoryboard.storyboard 中，您将显示根 ViewController 和另外三个 ViewController。选择您的根 ViewController，ctrl + 左键单击并拖动到另一个 ViewController 上并释放。你会看到一个黑色的小对话框出现，上面写着 Manual Segue（发音为 seg-way），选择 Modal。

您现在将看到一条连接这两个 ViewController 的线。单击右侧工具栏（检查器）中的行并选择属性检查器选项卡按钮。给 segue 标识符“One”。

现在在 Root View 控制器中，在 ViewDidLoad 方法中添加以下方法：

```
 if ([test isEqualToString:@"one"]) {
        [self performSegueWithIdentifier:@"one" sender:nil];
    } 
```

# sqlalchemy - SQLAlchemy：如何对自己进行多对多表（声明方式）

> ID：13532075
> 
> 赞同：1
> 
> 时间：2012-11-23T15:37:45.507
> 
> 标签：sqlalchemy

我正在尝试定义用户的多对多关系。我跟着文档，我得到的最好的是：

```
import sqlalchemy as sa
from sqlalchemy import orm
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()

class Friends(Base):
    __tablename__ = 'friends'
    user1_id = sa.Column(sa.ForeignKey('users.id'), primary_key=True)
    user2_id = sa.Column(sa.ForeignKey('users.id'), primary_key=True)

class User(Base):
    __tablename__ = 'users'
    id = sa.Column(sa.Integer, primary_key=True)
    name = sa.Column(sa.String(50))
    # many to many
    friends = orm.relationship('User', secondary=Friends, backref=Friends)

u = User(name='someuser') 
```

但这会给我

> **“AttributeError: 'Friends' 对象没有属性 'foreign_keys”**

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T13:27:18.250

这是您的错误：您将 backref 设置为 Friends 类。使用字符串。

# apache - Apache 站点重定向配置

> ID：13532083
> 
> 赞同：0
> 
> 时间：2012-11-23T15:38:06.560
> 
> 标签：apache, mod-rewrite, redirect, url-rewriting, virtualhost

这是我的情况：

*   客户为其网站购买了域名 www.site.com！
*   我在 /var/www/hosts/www.site.com.war 文件夹中配置了一个新站点。
*   客户要求我配置 Apache 服务器（实时服务器）以执行以下操作：
    *   如果请求“live.site.com” URL 以及密码保护，则允许访问创建的站点。这是标准的“上线前”程序，它要求受邀客户配置他们的主机文件（“Live_server_IP”和“live.site.com”）。
    *   如果请求“www.site.com” URL，则重定向到其他域页面“www.othersite.com/page.jsp”。

这是我的配置：

```
<VirtualHost *:80>
    ServerName www.site.com
    DocumentRoot /var/www/hosts/www.site.com.war/

    ExpiresActive On
    ExpiresByType image/gif A2592000
    ExpiresByType image/jpeg A2592000
    ExpiresByType image/png A2592000

    JkMount /*.jsp xyz
    JkMount /*.xml xyz

    #RewriteEngine on
    #RewriteCond %{HTTP_HOST} www.site.com

    #RewriteRule ^(.*)$www.site.com(.*)& http://www.othersite.com/page.jsp [R=301]

    # Remove this password protection after go-live
    <Directory /var/www/hosts/www.site.com.war/ >
          AuthType Basic
          AuthName "By Invitation Only"
          AuthUserFile /etc/httpd/conf/site.htpasswd

          require valid-user
    </Directory>
</VirtualHost>

# For internal company use
<VirtualHost *:80>
    ServerName live.site.com

    ProxyPass / http://www.site.com/
    ProxyPassReverse / http://www.site.com/
</VirtualHost> 
```

此配置仅为 URL 请求“www.site.com”和“live.site.com”提供对新站点的密码保护访问，这不是我需要做的。

我还尝试使用不同的 RewriteRule-s：“www.site.com”、“. *”、“^/(.* )&”、使用 L 标志等；省略 RewriteCond 等。

我想知道，是否可以按照我的客户要求配置 Apache 服务器？如果是，我在 Apache 配置中做错了什么？

谢谢你。

# android - 以编程方式设置 GridLayout 子级的 rowSpan 或 colSpan？

> ID：13532084
> 
> 赞同：33
> 
> 时间：2012-11-23T15:38:06.357
> 
> 标签：android, html, grid-layout, html-table, columnspan

我有一个`GridLayout`5 列和 3 行。现在我可以插入任意子视图，这很棒。更好的是，我可以分配`columnSpan=2`给某个项目以将其跨越到 2 列（与 rowSpan 相同）。

现在的问题是，我无法以编程方式（即在运行时）分配 rowSpan 或 columnSpan。一些搜索建议是这样的：

```
layoutParams.columnSpec = GridLayout.spec(0, columnSpan); 
```

但我不太明白规范的参数是什么意思（开始和大小）。在这一点上，文档也很差。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-05T19:27:05.580

```
 GridLayout gridLayout = (GridLayout)findViewById(R.id.tableGrid);

    gridLayout.removeAllViews();

    int total = 12;
    int column = 5;
    int row = total / column;
    gridLayout.setColumnCount(column);
    gridLayout.setRowCount(row + 1);
    for(int i =0, c = 0, r = 0; i < total; i++, c++)
    {
        if(c == column)
        {
            c = 0;
            r++;
        }
        ImageView oImageView = new ImageView(this);
        oImageView.setImageResource(R.drawable.ic_launcher);
        GridLayout.LayoutParams param =new GridLayout.LayoutParams();
        param.height = LayoutParams.WRAP_CONTENT;
        param.width = LayoutParams.WRAP_CONTENT;
        param.rightMargin = 5;
        param.topMargin = 5;
        param.setGravity(Gravity.CENTER);
        param.columnSpec = GridLayout.spec(c);
        param.rowSpec = GridLayout.spec(r);
        oImageView.setLayoutParams (param);
        gridLayout.addView(oImageView);
    } 
```

![看看这张图片 - 您可以根据需要更改行数和列数](../Images/9e317610d68701a3facbb8abb8b7bf11.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-15T14:24:07.420

这个怎么样？

```
GridLayout.LayoutParams layoutParams = new GridLayout.LayoutParams();
layoutParams.rowSpec = GridLayout.spec(GridLayout.UNDEFINED, item.getRowSpan());
layoutParams.columnSpec = GridLayout.spec(GridLayout.UNDEFINED, item.getColumnSpan()); 
```

根据文档，如果在将子视图插入 GridLayout 之后更改列或行跨度，您还应该在 GridLayout 上调用 setLayoutParams。如果您在设置跨度时添加它们，则不需要这个

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-05-09T10:55:37.340

您可以像这样修改 GridLayout layout_rowSpan 属性：

```
// View allocated in first row and first column
View child = findViewById(R.id.row0column0);

GridLayout.LayoutParams params =
   new GridLayout.LayoutParams(child.getLayoutParams());

params.rowSpec = GridLayout.spec(0, 2);    // First cell in first row use rowSpan 2.
params.columnSpec = GridLayout.spec(0, 2); // First cell in first column use columnSpan 2.
child.setLayoutParams(params); 
```

我同意文档在这方面需要一些改进。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-08-12T00:16:25.663

我正在以编程方式更改大约 2 个单元格的列跨度，并**在**此代码膨胀之后：

```
GridLayout.LayoutParams itemLP = (GridLayout.LayoutParams)gridItemV.getLayoutParams();
itemLP.columnSpec = GridLayout.spec(0, 2);
gridItemV.setLayoutParams(itemLP); 
```

重要的是`setLayoutParams`改变后打电话`columnSpec` 我希望它对你也有帮助

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-11-23T23:40:59.123

好的，我花了几个小时弄清楚这里发生了什么。好吧，我没有找到在运行时设置 columnSpan 或 rowSpan 的任何工作方式。

但我找到了一个可行的解决方案（至少对我来说）：

### Java 代码

```
private LinearLayout addNewSpannedView(Integer resourceId, ViewGroup rootElement) {
    return (LinearLayout) ((ViewGroup) getLayoutInflater().inflate(resourceId, rootElement, true)).getChildAt(rootElement.getChildCount() - 1);
}
// set columnSpan depending on some logic (gridLayout is the layout to add the view's to -> in my case these are LinearLayouts)
shape = addNewSpannedView(columnSpan == 1 ? R.layout.grid_ll_col_span_1 : R.layout.grid_ll_col_span_2, gridLayout); 
```

### grid_ll_col_span_2.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="@dimen/shapeWidth"
    android:layout_height="wrap_content"
    android:layout_columnSpan="2"/> 
```

提示：在inflate() 将视图添加到根元素（即父元素）**之前**，设置宽度和高度属性非常重要。

我希望，有人可以使用这个;-)

# regex - 从perl中的一行匹配一个句子

> ID：13532085
> 
> 赞同：1
> 
> 时间：2012-11-23T15:38:06.520
> 
> 标签：regex, perl

我有以下问题。你如何匹配一个用逗号（，）包围的句子，但句子的大小和单词数量可能会有所不同。例如：

嗨，你好吗，再见

谢谢，我很好，再见

所以我想匹配“你好吗”和“我很好”我试过类似的东西

```
 $_ =~ /,([\w\s\w\s\w,])/; 
```

但这似乎非常错误，并且“可能”匹配由空格分隔的 3 个单词。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T15:42:35.080

不是很简单`/,(.+?),/`吗？或者`/,([\w\s]+?),/`，如果您想确保只有单词和空格？

```
my $str = "Hi,How are you,bye";

$str =~ /,([\w\s]+?),/;
print "$1\n";

$str = "Thanks, I am very good,bye";

$str =~ /,([\w\s]+?),/;
print "$1\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T15:47:13.457

这是一个例子：

```
if ($sentence =~ /,(.+?),/g) {
    print $1;
} 
```

这将匹配句子并将结果放入`$1`. 如果你有多个句子：

```
while (<>) {
    while (/,(.+?),/g) {
        print $1;
    }
} 
```

这是一个示例，输入来自标准输入并仅获取逗号之间的值。

`(.+?)`将匹配长度大于 0 且不是逗号的所有内容。因为`()`它将被保存到`$1`.

# hibernate - hibernate envers 可以返回特定类型的所有实体的最新版本吗？

> ID：13532087
> 
> 赞同：1
> 
> 时间：2012-11-23T15:38:30.617
> 
> 标签：hibernate, hibernate-envers

我在尝试让 Envers 执行我需要的查询时遇到了很大的问题。如果有人可以让我知道这是否可以从 Envers 内部实现，或者我是否需要直接执行 SQL，那将是一个巨大的帮助！

这是问题所在。我有一个虚构的“项目”实体——任何实体类都可以——已经过审计。我正在尝试通过 AuditReader 查询获取每个项目实体的最新版本。

当我这样做时（代码的其他部分无关紧要）：

```
AggregatedAuditExpression maxExpression = AuditEntity.revisionNumber().maximize();
maxExpression.add(AuditEntity.id().eq("12345"));
query.add(maxExpression); 
```

并打开 SQL 输出，我看到正在生成这个查询：

```
Hibernate: select project_a0_.id as id6_0_, project_a0_.REV as REV6_0_, auditrevis1_.id as id0_1_,
project_a0_.REVTYPE as REVTYPE6_0_, project_a0_.description as descript4_6_0_, 
auditrevis1_.timestamp     as timestamp0_1_, auditrevis1_.username as username0_1_ 
from MYSCHEMA.project_AUD project_a0_ cross join MYSCHEMA.REVINFO auditrevis1_ 
where project_a0_.REV=

(select max(project_a2_.REV) from MYSCHEMA.project_AUD project_a2_ 
               where project_a2_.id=?) 

and project_a0_.REV=auditrevis1_.id order by project_a0_.REV asc 
```

注意“选择最大值”部分。这几乎正​​是我所需要的。只是 where 子句是错误的，我需要它说： where project_a2_.id=project_a0_.id

我手动编辑它，运行它，它工作得很好。现在它看起来像 IdMapper 类中的“addIdsEqualToQuery”方法让我做我想做的事。因此，如果我将 AuditEntity.id().eq("12345") 更改为：

```
maxExpression.add(new IdentifierIdsEqAuditExpression()); 
```

其中 IdentifierIdsEqAuditExpression 等于：

```
 class IdentifierIdsEqAuditExpression implements AuditCriterion {    
        @Override
        public void addToQuery(AuditConfiguration auditCfg, String entityName, QueryBuilder qb, Parameters parameters) {
            auditCfg.getEntCfg().get(entityName).getIdMapper()
                    .addIdsEqualToQuery(parameters, null, auditCfg.getAuditEntCfg().getOriginalIdPropName());
        }    
    } 
```

它应该很接近 - 它是。我得到：

无效路径：'originalId.id' [select e__, r from com.mycompany.Project_AUD e_ *, com.mycompany.audit.AuditRevisionEntity r where id = originalId.id and e* _.originalId.REV.id = (select max(_e0 .originalId.REV.id) 来自 com.mycompany.Project_AUD *e0 其中 id = originalId.id) 和 e* _.originalId.REV.id = r.id order by e__.originalId.REV.id asc]

The problem is I can't get it to generate what I need and even if the prefix was changed from "originalId" to the correct one, why does envers start putting that all over the place, rather than in the single location?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T20:34:56.943

I'm afraid this is not currently possible with Envers. You would need to add something like parentIdEqual() to maxExpression, but there's no combinator like that.

Please open a feature request: [https://hibernate.onjira.com/secure/Dashboard.jspa](https://hibernate.onjira.com/secure/Dashboard.jspa)

As for the originalId, Envers entities have a composite id of the revision number and the original id (which is kept in the originalId sub-property).

# c++ - CUDA 结果使用非常大的数组返回垃圾，但不报告错误

> ID：13532089
> 
> 赞同：5
> 
> 时间：2012-11-23T15:38:45.240
> 
> 标签：c++, c, cuda, nvidia

我正在创建一个测试程序，它将创建一个设备和一个大小为*n*的主机数组，然后启动一个内核，该内核创建*n 个*线程，将常量值 0.95f 分配给设备数组中的每个位置。完成后，将设备数组复制到主机数组，并对所有条目进行总计，并显示最终总计。

下面的程序似乎可以很好地处理大约 6000 万浮点数的数组，并很快返回正确的结果，但是在达到 7000 万时，程序似乎会挂起一段时间，并最终返回总数的 NAN 结果。在运行 6000 万次后检查主机阵列显示它正确填充了 0.95f，但在运行 7000 万次后检查它显示它填充了 NAN。据我所知，没有一个 CUDA 调用返回错误。

我使用的是 2GB GT640m（Compute 3.0），最大块大小为 1024，最大网格尺寸为 2147483647。

我确信有更好的方法来实现类似的目标，我想听听建议。但我也想了解这里出了什么问题，以便从中吸取教训。

```
#include "cuda_runtime.h"
#include "device_launch_parameters.h"

#include <stdio.h>
#include <fstream>

void cudaErrorHandler(cudaError_t status)
{
    // Cuda call returned an error, just print error for now
    if(status != cudaSuccess)
    {
        printf("Error");
    }
}

__global__ void addKernel(float* _Results, int _TotalCombinations)
{
    // Get thread Id
    unsigned int Id = (blockDim.x * blockDim.y * blockIdx.x) + (blockDim.x * threadIdx.y) + threadIdx.x;

    //If the Id is within simulation range, log it
    if(Id < _TotalCombinations)
    {
        _Results[Id] = 0.95f;
    }
}

#define BLOCK_DIM_X 32
#define BLOCK_DIM_Y 32
#define BLOCK_SIZE BLOCK_DIM_X * BLOCK_DIM_Y // Statc block size of 32*32 (1024)
#define CUDA_CALL(x) cudaErrorHandler(x)

int main()
{
    // The number of simulations to run
    unsigned int totalCombinations = 45000000;

    int gridsize = 1;

    // Work out how many blocks of size 1024 are required to perform all of totalCombinations
    for(unsigned int totalsize = gridsize * BLOCK_SIZE; totalsize < totalCombinations; 
        gridsize++, totalsize = gridsize * BLOCK_SIZE)
        ;

    // Allocate host memory
    float* host_results = new float[totalCombinations];
    memset(host_results, 0, sizeof(float) * totalCombinations);
    float *dev_results = 0;

    cudaSetDevice(0);

    // Allocate device memory
    CUDA_CALL(cudaMalloc((void**)&dev_results, totalCombinations * sizeof(float)));

    dim3 grid, block;

    block = dim3(BLOCK_DIM_X, BLOCK_DIM_Y);

    grid = dim3(gridsize);

    // Launch kernel
    addKernel<<<gridsize, block>>>(dev_results, totalCombinations);

    // Wait for synchronize
    CUDA_CALL(cudaDeviceSynchronize());

    // Copy device data back to host
    CUDA_CALL(cudaMemcpy(host_results, dev_results, totalCombinations * sizeof(float), cudaMemcpyDeviceToHost));

    double total = 0.0;

    // Total the results in the host array
    for(unsigned int i = 0; i < totalCombinations; i++)
        total+=host_results[i];

    // Print results to screen
    printf("Total %f\n", total);

    delete[] host_results;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T16:36:55.887

正如您所发现的，您的错误处理方法不起作用。下面我粘贴了一个带有我经常使用的错误检查方法的代码版本。事情在您的故障点不起作用的原因是您的网格大小（您正在启动一维网格）超过了 X 维度中的最大网格大小（默认为 65535，即计算能力高达 2.x）。如果您想利用更大的 gridsize 维度（2^31 -1 是计算能力 3.0 的限制），您需要使用`-arch=sm_30`switch 进行编译。

此处仅供参考，是您的代码版本，其中显示了我经常使用的错误检查方法。

```
#include <stdio.h>
#include <fstream>

#define cudaCheckErrors(msg) \
    do { \
        cudaError_t __err = cudaGetLastError(); \
        if (__err != cudaSuccess) { \
            fprintf(stderr, "Fatal error: %s (%s at %s:%d)\n", \
                msg, cudaGetErrorString(__err), \
                __FILE__, __LINE__); \
            fprintf(stderr, "*** FAILED - ABORTING\n"); \
            exit(1); \
        } \
    } while (0)

__global__ void addKernel(float* _Results, int _TotalCombinations)
{
    // Get thread Id
    unsigned int Id = (blockDim.x * blockDim.y * blockIdx.x) + (blockDim.x * threadIdx.y) + threadIdx.x;

    //If the Id is within simulation range, log it
    if(Id < _TotalCombinations)
    {
        _Results[Id] = 0.95f;
    }
}

#define BLOCK_DIM_X 32
#define BLOCK_DIM_Y 32
#define BLOCK_SIZE BLOCK_DIM_X * BLOCK_DIM_Y // Statc block size of 32*32 (1024)

int main()
{
    // The number of simulations to run
    unsigned int totalCombinations = 65000000;

    int gridsize = 1;

    // Work out how many blocks of size 1024 are required to perform all of totalCombinations
    for(unsigned int totalsize = gridsize * BLOCK_SIZE; totalsize < totalCombinations;
        gridsize++, totalsize = gridsize * BLOCK_SIZE)
        ;
    printf("gridsize = %d, blocksize = %d\n", gridsize, BLOCK_SIZE);
    // Allocate host memory
    float* host_results = new float[totalCombinations];
    memset(host_results, 0, sizeof(float) * totalCombinations);
    float *dev_results = 0;

    cudaSetDevice(0);

    // Allocate device memory
    cudaMalloc((void**)&dev_results, totalCombinations * sizeof(float));
    cudaCheckErrors("cudaMalloc fail");

    dim3 grid, block;

    block = dim3(BLOCK_DIM_X, BLOCK_DIM_Y);

    grid = dim3(gridsize);

    // Launch kernel
    addKernel<<<gridsize, block>>>(dev_results, totalCombinations);
    cudaCheckErrors("kernel fail");
    // Wait for synchronize
    cudaDeviceSynchronize();
    cudaCheckErrors("sync fail");

    // Copy device data back to host
    cudaMemcpy(host_results, dev_results, totalCombinations * sizeof(float), cudaMemcpyDeviceToHost);
    cudaCheckErrors("cudaMemcpy 2 fail");

    double total = 0.0;

    // Total the results in the host array
    for(unsigned int i = 0; i < totalCombinations; i++)
        total+=host_results[i];

    // Print results to screen
    printf("Total %f\n", total);

    delete[] host_results;

    return 0;
} 
```

# ruby - 使用哪个框架来创建移动应用程序？

> ID：13532092
> 
> 赞同：0
> 
> 时间：2012-11-23T15:38:59.527
> 
> 标签：ruby, cordova, mobile, rhodes

我想开发一个移动应用程序（不希望是基于浏览器的应用程序），但也想拥有一个具有相同信息、相同数据库、图像等的网站......我想创建一个应用程序，并且网络和移动使用该应用程序来获取/发布数据。

我找到了几个建议：

1）电话间隙；

2）红宝石（罗兹前锋）；

3）Zend IDE 10（Zend 云+Phonegap）。

这些解决方案中哪一个最适合我？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:44:42.787

这取决于您正在制作的应用程序类型。如果它需要与操作系统进行认真的集成，Phonegap 不应该是您的首选。我已经看到很多尝试让Phonegap 与复杂的应用程序一起工作，但是与Native OS'es 没有可比性。

话虽这么说，我认为你混淆了几件事。

您需要的是某种 api，移动应用程序和网站都将连接到该 api。让我们称之为后端。现在最常见的方法是使用 REST。其余的，使用 PHP，有很多选择。但我认为 Zend Framework 2 和 Slims 是该领域真正可靠的竞争者。至于 Ruby，我不能说，还没有使用 Ruby 制作任何 API

# gwt - CSS：z-index 在 Google Chrome 中的 SPAN 上不起作用

> ID：13532105
> 
> 赞同：6
> 
> 时间：2012-11-23T15:39:52.160
> 
> 标签：gwt, dom, css, styles

这是 GWT 应用程序的 DOM 的一部分。`<span>`代表一个箭头，下面的那个`<div>`代表一个正方形。代码重复，所以这是正确的： **ARROW1 SQUARE1 ARROW2 SQUARE2**

`Square1`具有缩放样式，因此它实际上大于`Square2`，并且应该与 Arrow2 重叠。这就是问题所在：`Square1`应该显示 OVER `Arrow2`（这就是它`z-index:1`和`Arrow2`' 的原因`z-index:0`）。但是，反过来：**Arrow2 显示在 Square1 上方**。

这发生在 Google Chrome 中，但在 IE9 中运行良好。有任何想法吗？谢谢！

```
<div style="width:489PX;margin-left:auto;margin-right:auto;">
  <div style="cursor:pointer;">
    <div id="p379ehovd03-1" style="z-index=1;">
      /***** ARROW 1 BELOW *****/
      <span id="p21023d9223" style="z-index=1;"></span> 
      /***** SQUARE 1 BELOW *****/
      <div id="qu39rtgh93he-1" style="width:126PX;height:100PX;z-index=1;-moz-transform: scale(1.1, 1.1);-webkit-transform: scale(1.1, 1.1);-o-transform: scale(1.1, 1.1);-ms-transform: scale(1.1, 1.1);transform: scale(1.1, 1.1); -moz-transform-origin: center center;-webkit-transform-origin: center center;-o-transform-origin: center center;-ms-transform-origin: center center;transform-origin: center center;z-index: 1">
        <p>adsfadsfasdfa</p>
      </div>
    </div>
  </div>
  <div style="cursor:pointer;z-index:0;">
    <div id="p379ehovd03-2" style="z-index:0;">
      /***** ARROW 2 BELOW *****/
      <span id="p2782bhsd29" style="display:block;z-index:0;"></span>
      /***** SQUARE 2 BELOW *****/
      <div id="qu39rtgh93he-2" style="width:126PX;height:100PX;"> 
        <p>adsfadsf</p>
      </div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T16:05:08.873

它可以在Square1 的 DIV 上添加**position: absolute 。**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-28T19:14:04.263

无论是绝对位置还是相对位置，添加位置都将起作用

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T15:42:47.600

将此添加到 span 元素：

```
display:block; 
```

# c# - 可选参数始终填充

> ID：13532107
> 
> 赞同：6
> 
> 时间：2012-11-23T15:39:54.943
> 
> 标签：c#, asp.net-mvc

我在控制器中有一个方法：

```
public ActionResult SendNotification(Guid? id=null, SendNotification notification =null) 
```

它回应`/Apps/SendNotification/{guid}?{SendNotification properties}`

SendNotification 是一个具有多个字符串属性的模型。

我的问题是 SendNotification 永远不会为空。无论我如何调用该操作，.NET 似乎总是实例化一个 SendNotification 对象（所有字段都为空）。

我什至用`System.Web.Http.FromUri`and进行了测试`System.Web.Http.FromBody`，它仍然可以这样做。

有任何想法吗？

注意：这不是 WebApi。这是常规的 MVC。

我的项目只有默认路由：

```
routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:27:56.093

那是模型绑定在欺骗你。

由于它没有找到任何要绑定到模型的参数，因此所有属性都为空，但模型仍默认实例化。

不要检查模型是否为空，而是检查您的主要属性之一（例如 ID）是否为空。

# node.js - 在 Jade 中显示带有 \n 的字符串

> ID：13532108
> 
> 赞同：2
> 
> 时间：2012-11-23T15:39:55.720
> 
> 标签：node.js, pug

我需要显示一个包含`\n`using Jade 的字符串，并且我想将这些字符转换为`<br>`. 我试图通过两种方式做到这一点：

```
- var s = 'text\nand\ntext';
p= string
p= string.replace(/\n/g, '<br />') 
```

但是在第一种情况下，我看不到空格，并且在第二段中，HTML 被转义了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T18:12:19.543

使用`!=`而不是`=`

```
p!= string.replace(/\n/g, '<br />') 
```

有关更多信息，请参阅[文档](https://github.com/visionmedia/jade#code)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:25:17.260

我解决了它喜欢这个：

```
- var text = '<script></script>\nhi';
p!= text.replace(/</g, "&lt;").replace(/>/g, '&gt;').replace(/\n/g, '<br />') 
```

它不会转义 html 特殊字符，但因为我正在使用`<meta charset="utf-8">`它应该不是问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T19:16:32.547

这是我的解决方案：

```
 p
      striped = body.replace(/\r/g, '')
      paragraph = body.split(/\n{2,}/g)
      if paragraph.length
        each para in paragraph
          | <p>
          line = para.split(/\n/g)
          first = line.shift()
          | #{first}
          each li in line
            | <br />
            | #{li}
          | </p> 
```

我扔掉`\r`'s 并拆分 2 个或更多`\n`'s。如果这导致一个非空数组，我循环该数组并添加一个开始`<p>`标签。任何单行`\n`都被分割并用`<br>`标签循环，然后以标签结束`</p>`。起泡，冲洗，重复。奖励：字符串被正确转义。

玉真棒！（就像正则表达式一样）

# c# - 如何为静态事件实现 WeakEventManager

> ID：13532115
> 
> 赞同：1
> 
> 时间：2012-11-23T15:40:22.427
> 
> 标签：c#, events, static, weak-references

我正在尝试通过创建自己的 WeakEventManager来实现[msdn之后的 WeakEventManager。](http://msdn.microsoft.com/en-us/library/aa970850.aspx)

我的问题是现在我有一个`StaticPublisher`发布静态事件的静态类`OnSomeStaticEvent`。

我想从另一个班级订阅这个活动。这是我现在拥有的代码（简化）：

```
public static class StaticPublisher
{         
//definition of static event
    public static event EventHandler<CancelEventArgs> OnSomeStaticEvent;
    public static void OnSomeStaticEventHandler(CancelEventArgs e)
    {
        EventHandler<CancelEventArgs> handlerCopy = OnVisualDisplayBeforeRemoved;
        if (handlerCopy != null)
            handlerCopy(null, e);
    }
} 
```

我的 WeakEventManager 看起来像这样（再次遵循 msdn）：

```
class OnSomeStaticEventWeakEventManager : WeakEventManager
{
    private OnSomeStaticEventWeakEventManager ()
    {

    }

    /// <summary>
    /// Add a handler for the given source's event.
    /// </summary>
    public static void AddHandler(StaticPublisher, EventHandler<CancelEventArgs> handler)
    {
        if (source== null)
            throw new ArgumentNullException("source");
        if (handler == null)
            throw new ArgumentNullException("handler");

        CurrentManager.ProtectedAddListener(source, handler);
    }
// more code follows down. but is all relative to this part 
```

我的问题是我无法向此事件添加任何侦听器，因为我不允许`StaticPublisher`作为论点屈服。这里有什么解决方法吗？我真的可以在这里使用一些帮助......

# .htaccess - .htaccess 显示 404 页面重写？

> ID：13532119
> 
> 赞同：0
> 
> 时间：2012-11-23T15:40:37.500
> 
> 标签：.htaccess, redirect, http-status-code-404

我有一个 .htaccess 文件，它基本上“删除”了网络浏览器中的文件扩展名（从 example.php 到 example）。这是代码：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ $1.php [L,QSA] 
```

基本上，如果找不到文件 (about)，它会添加 .php 扩展名 (about.php)。我想（如果仍然找不到该文件）将用户重定向到 404.php。因此，如果用户加载/page1，而page1.php 不存在，它会重定向到404 页面。我将此代码添加到.htaccess：

```
ErrorDocument 404 /404.php 
```

就其本身而言，此代码将重定向到 404 页面。但是当我拥有整个代码时......

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ $1.php [L,QSA]

ErrorDocument 404 /CWTC/404.php 
```

...它只是显示“500 内部服务器错误”。

有谁知道我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T18:00:35.883

这解决了我的问题：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$ $1.php [L,QSA]

ErrorDocument 404 /404.php 
```

谢谢！

# javascript - 在类中使用 window.addEventListener 时更改的上下文

> ID：13532125
> 
> 赞同：3
> 
> 时间：2012-11-23T15:40:57.047
> 
> 标签：javascript

我目前正在为我正在开发的游戏编写一个类，该类根据页面 URL 中的哈希更改控制应用程序路由。

我的问题是，在将主路由功能附加到 hashchange 事件后，“this”的上下文变为“window”。

这是到目前为止的代码：

```
Game.Router = function() {

return {

    init: function() {

        window.addEventListener('hashchange', this.route, false);

    },

    route: function(e) {

        e.preventDefault();
        var routingLocation = e.newURL.substr(e.newURL.indexOf('#!/') + 3, e.newURL.length);

        switch(routingLocation) {
            case "new":
                this.toggleView('Game');
                break;
            case "instructions":
                this.toggleView('Instructions');
                break;
            case "scores":
                this.toggleView('Scores');
                break;
            case "about":
                this.toggleView('About');
                break;
        }

    },

    toggleView: function(viewID) {

        var els = document.querySelectorAll('section');
        for(var i=0, l=els.length; i<l; i++) {
            if(els[i].id == viewID) {
                els[i].className = 'currentGameSection';
            } else {
                els[i].className = '';
            }
        }

    }

}

}(); 
```

当我尝试在路由函数的 switch 语句中调用 this.toggleView 时，结果发现“this”已从 Game.Router 更改为 window。可以通过将 this.toggleView 替换为 Game.Router.toggleView 来解决问题，但这并不理想。

有人可以帮我理解为什么添加事件侦听器后“this”上下文会发生变化吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T15:48:04.367

由于您使用的是`addEventListener`，只需向对象添加一个`handleEvent`方法，并传递对象而不是处理程序。

```
Game.Router = function() {

    return {
          // vv--- add this
        handleEvent: function(e) {
            if (e.type === "hashchange")
                return this.route();
        },

        init: function() {
                             // pass the object---vv
            window.addEventListener('hashchange', this, false);
        },

        route: function(e) {
            // your route code
        },

        toggleView: function(viewID) {
            // your toggleView code
        }
    }
}(); 
```

这样做的目的是使对象实现*EventListener*接口。因此对象本身成为一个有效的事件处理程序，并且可以被传递给`addEventListener`而不是函数。

因此，当任何偶数发生时，该`handleEvent`方法将被调用。您可以测试`.type`以查看它是哪个事件。

in的`this`值`handleEvent`将是对象，它使您可以直接访问其方法。

* * *

如果您使用构造函数，此技术也很有用，因为您可以`handleEvent`使用其他方法创建原型，并且所有继承该原型的对象都将实现*EventListener*接口。

* * *

*如果*您要使用闭包，我会将封闭变量放在`Game.Router`函数中，以便任何和所有方法都可以利用它。

```
Game.Router = function() {
    var self = this;
    return self = {
        init: function() { // using 'self' in case 'init' becomes detached
            window.addEventListener('hashchange', self.route, false);
        },

        route: function(e) {
            // use 'self' to refer to the object
        },

        toggleView: function(viewID) {
            // use 'self' to refer to the object
        }
    }
}(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T15:49:27.987

我希望[我提供的链接](https://stackoverflow.com/questions/1085674/where-is-my-this-using-objects-method-as-a-callback-function?rq=1)可以清楚地说明您的问题的原因。

为了不给出通常的闭包解决方案，这里有一个更简单的（不兼容 IE8-）：

```
 window.addEventListener('hashchange', this.route.bind(this), false); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T15:43:23.583

您需要使用闭包：

```
route: (function(context){
    return function(e){

        //your original function, but with all
        //references to this changed to
        //context

    }
})(this), 
```

# eclipse - 解决类路径时出现ant4eclipse异常

> ID：13532133
> 
> 赞同：2
> 
> 时间：2012-11-23T15:41:48.067
> 
> 标签：eclipse, jenkins, ant4eclipse

我正在尝试使用 Ant 在命令行中构建一个 Eclipse Java 项目。然后我将在 Jenkins 中使用它。我一直在使用带有相关文档和示例的 ant4eclipse，但无法克服以下错误。stackoverflow 中最接近的是[ant4eclipse 类路径问题](https://stackoverflow.com/q/6841771/897206)，但我无法弄清楚如何使其适应我的情况。有任何想法吗？

```
BUILD FAILED
/home/phil/git/backend-testing/backend-tests/build.xml:31: 

The following error occurred while executing this line:
   /home/phil/git/backend-testing/backend-tests/a4e-jdt-macros.xml:77:
    org.ant4eclipse.lib.core.exception.Ant4EclipseException: 

Exception whilst resolving the classpath entry '[EclipseClasspathEntry: path:
    org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVM
    ype/JavaSE-1.7 entryKind: 0 outputLocation: null exported: false]' of project 
   'com.paralant.paravise.model': 'A precondition has been violated: The parameter 
   'javaProfile' is not supposed to be null.' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T08:44:23.410

ant4eclipse 不包括 JDK 1.7 的必要配置文件。以下是我解决问题的方法： 在 Eclipse 的 /plugins 目录中的 org.eclipse.osgi_*.jar 中，可以找到新的 JavaSE-1.7.profile 和更新的 profile.list。将它们复制到 /profiles 下的 ant4eclipse jar 文件中，一切都应该没问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-22T21:59:28.267

出于某种原因，Ant4Eclipse.org 团队很久没有更新他们的分发二进制文件（自 2010 年以来！）。这很奇怪，因为它正在积极开发中。

您可以在这里获得最新的成功构建：http: ~~//hudson.nilshartmann.net/job/ant4eclipse/lastSuccessfulBuild/~~ [https://github.com/ant4eclipse/ant4eclipse/releases](https://github.com/ant4eclipse/ant4eclipse/releases)

类路径解析在最新版本中是固定的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-05T15:26:11.303

GitHub上有一个全新的版本A4E_2018-01-03：

[https://github.com/ant4eclipse/ant4eclipse/releases](https://github.com/ant4eclipse/ant4eclipse/releases)

用于`<installedJREs>`定义您的运行时环境。但是现在还有一个对我有用的默认设置。

# linux - 如何在 BASH (Linux) 中将文件删除到垃圾箱

> ID：13532136
> 
> 赞同：2
> 
> 时间：2012-11-23T15:42:25.493
> 
> 标签：linux, bash

我到处寻找答案，但我找不到。

是否可以将文件移动/删除到 linux 上的垃圾文件夹。但也有垃圾信息文件。

例如，我可以将文件移动到垃圾文件夹中，但我没有垃圾信息文件。

tldr; 如何在 BASH 中删除要回收的文件

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T15:52:36.397

在 Ubuntu 中，垃圾文件保存在`~/.local/share/Trash/files`

您可以使用一个[垃圾命令行界面](https://github.com/andreafrancia/trash-cli)。要安装：

```
sudo apt-get install trash-cli 
```

然后，要丢弃一些东西：

```
trash-put myfile.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:56:58.460

简单的...

```
mv filename /home/username/.local/Trash/files 
```

# c++ - 跟踪进程和所有分叉进程的系统调用

> ID：13532137
> 
> 赞同：9
> 
> 时间：2012-11-23T15:42:28.330
> 
> 标签：c++, c, linux, fork, ptrace

我`ptrace`用来跟踪进程的系统调用。分叉进程后，我使用`PTRACE_TRACEME`开始跟踪进程。代码如下所示：

```
while (true) {
    int status;
    int gotPid;
    gotPid = waitpid(pid, &status, 0);

    if (WIFEXITED(status) || WIFSIGNALED(status)) {
        break;
    }

    if (WIFSTOPPED(status)) {
        handleTrace();
    }
} 
```

然后是`handleTrace`函数，看起来像这样。

```
long syscall;
syscall = ptrace(PTRACE_PEEKUSER,
     pid, 8 * ORIG_RAX, NULL);

// do something with the syscall

// continue program
ptrace(PTRACE_SYSCALL, pid, NULL, NULL); 
```

这一切都很好，但是如果程序分叉（或创建一个新线程），我还想跟踪跟踪的进程创建的子进程（以及该进程创建的线程）。我知道它可以使用`PTRACE_O_TRACEFORK`,`PTRACE_O_TRACEVFORK`和来完成`PTRACE_O_TRACECLONE`，但是从`man`文档中很难弄清楚它是如何完成的。我需要一些例子。

**编辑：**

我在这里发现了一个类似的问题：[How to ptrace a multi-threaded application？](https://stackoverflow.com/questions/5477976/how-to-ptrace-a-multi-threaded-application)我用下面的代码试了一下。此代码跟踪启动进程的系统调用，它也应该跟踪分叉进程。它`fork()`在父进程中的 a 之后运行（子进程调用 a`PTRACE_TRACEME`和 an `exec()`）。

**编辑2：**

我对代码进行了更多修改，并取得了更多进展。

```
long orig_eax;
int status;
int numPrograms = 1;

while(1) {
    int pid;
    CHECK_ERROR_VALUE(pid = waitpid(-1, &status, __WALL));
    std::cout << pid << ": Got event." << std::endl;
    if(WIFEXITED(status) || WIFSIGNALED(status)) {
        std::cout << pid << ": Program exited." << std::endl;
        if (--numPrograms == 0) {
            break;
        }
        continue;
    }

    if (status >> 16 == PTRACE_EVENT_FORK || status >> 16 == PTRACE_EVENT_VFORK ||
            status >> 16 == PTRACE_EVENT_CLONE) {
        int newpid;
        CHECK_ERROR_VALUE(ptrace(PTRACE_GETEVENTMSG, child, NULL, (long) &newpid));
        std::cout << pid << ": Attached to offspring " << newpid << std::endl;
        boost::this_thread::sleep(boost::posix_time::millisec(100));
        CHECK_ERROR_VALUE(ptrace(PTRACE_SETOPTIONS,
                newpid, NULL, PTRACE_O_TRACEFORK | PTRACE_O_TRACEVFORK | PTRACE_O_TRACECLONE));
        CHECK_ERROR_VALUE(ptrace(PTRACE_SYSCALL, newpid, NULL, NULL));
        ++numPrograms;
    } else {
        CHECK_ERROR_VALUE(ptrace(PTRACE_SETOPTIONS,
                pid, NULL, PTRACE_O_TRACEFORK  | PTRACE_O_TRACEVFORK | PTRACE_O_TRACECLONE));
        CHECK_ERROR_VALUE(orig_eax = ptrace(PTRACE_PEEKUSER,
                pid, 8 * ORIG_RAX, NULL));
        std::cout << pid << ": Syscall called: " <<
                SyscallMap::instance().get().right.at(orig_eax) <<
                std::endl;
        CHECK_ERROR_VALUE(ptrace(PTRACE_SYSCALL,
                pid, NULL, NULL));
    }

} 
```

`CHECK_ERROR_VALUE`只是一个检查结果代码并抛出异常的宏，其中的描述`errno`。

显然，当我收到 fork/clone 事件时，新进程还不存在，如果我尝试对其进行 ptrace，则会收到“进程不存在”错误消息。如果我在尝试 ptrace 新进程之前进入睡眠状态，我不会收到错误消息。现在当程序到达fork/clone点时，它开始跟踪新进程，但它永远不会到达`clone()`父进程中系统调用的返回点，这意味着子进程成功完成，但父进程挂起它的分叉点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:20:19.467

Strace 执行此操作，其 README-linux-ptrace 文件包含有关该主题的一些信息：

[https://github.com/strace/strace/blob/master/README-linux-ptrace](https://github.com/strace/strace/blob/master/README-linux-ptrace)

它似乎确实在抱怨这个平台中的内核错误，所以 YMMV。

该代码解释了如何获取孩子的 pid。但是，由于在它调用的二进制文件上设置了 setuid 或 setgid 位，孩子可能会获得另一个用户 ID。所以答案是您在子 PID 上调用 ptrace 并查看您是否可以访问。

这是相关部分：

> `PTRACE_EVENT`跟踪器观察到停止，因为 waitpid 返回 `WIFSTOPPED(status) == true`, `WSTOPSIG(status) == SIGTRAP`。附加位设置在状态字的高字节中：值`((status >> 8) & 0xffff)` 将是`(SIGTRAP | PTRACE_EVENT_foo << 8)`。存在以下事件：
> 
> *   `PTRACE_EVENT_VFORK`- 在从 vfork/clone+CLONE_VFORK 返回之前停止。在此之后继续跟踪时，它将等待子进程退出/执行，然后再继续执行（IOW：vfork 上的通常行为）。
> *   `PTRACE_EVENT_FORK`- 在从 fork/clone+SIGCHLD 返回之前停止
> *   `PTRACE_EVENT_CLONE`- 在从克隆返回之前停止
> *   `PTRACE_EVENT_VFORK_DONE`- 在从 vfork/clone+CLONE_VFORK 返回之前停止，但在 vfork 子进程通过退出或执行解除阻塞之后。
> 
> 对于上述所有四个停止：停止发生在父线程中，而不是在新创建的线程中。`PTRACE_GETEVENTMSG`可用于检索新线程的 tid。

# android - 看不到我的列表项

> ID：13532139
> 
> 赞同：0
> 
> 时间：2012-11-23T15:42:34.993
> 
> 标签：android, listview, actionbarsherlock

我在视图上得到一个空列表，没有任何错误，但在我的数组不为空时只得到 list empry。

我的xml是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLa"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <ListView android:layout_width="fill_parent"   
      android:layout_height="fill_parent"   
      android:id="@+id/mainListView"/>  

    <ImageView
        android:id="@+id/iconremove"
        android:layout_width="50dip"
        android:layout_height="50dip"
        android:scaleType="centerCrop"
         android:src="@drawable/removeicon"
         android:visibility="gone"
          />

    <TextView
        android:id="@+id/textView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="left|center_vertical"
        android:layout_marginLeft="10dip"
        android:layout_weight="1"
        android:textSize="20dip" />

</LinearLayout> 
```

我的适配器

```
public class ListRssAdpter extends ArrayAdapter {
    private Context mContext;
    private int id;
    private List<String> items;
    public ListRssAdpter(Context context, int textViewResourceId, List<String> list) {
        super(context, textViewResourceId, list);
        mContext = context;
        id = textViewResourceId;
        items = list;
    }

    @Override
    public View getView(int position, View v, ViewGroup parent) {
        View mView = v;
        if (mView == null) {
            LayoutInflater vi = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            mView = vi.inflate(id, null);
        }
        TextView tx = (TextView) mView.findViewById(R.id.textView);
        //if this view is on main screen
        if (tx == null) {
            tx = ((TextView) mView);
        }
        tx.setText(items.get(position));
        return mView;

    }
} 
```

和主要代码：

```
 ListView    lv = (ListView) findViewById(R.id.mainListView ); 

        lv.setTextFilterEnabled(true);

        DBAdapter dbAdpter=new DBAdapter(this);
        ListRssLinkAndTitle=(ArrayList)dbAdpter.getWantedItemsList(this,"link","RssTitle","Rtl");//get wanted items from db 
        ArrayList<String> listKeys=new ArrayList<String>();
        for (int j=0;j<ListRssLinkAndTitle.size();j++)
            listKeys.add(ListRssLinkAndTitle.get(j).title);
        ListRssAdpter   listAdapter = new ListRssAdpter(this, R.layout.titlesrss, listKeys);

        if (ListRssLinkAndTitle.isEmpty())
            Toast.makeText(this.getApplicationContext(),  getResources().getString(R.string.emtyRssList),0).show();
        lv.setAdapter(listAdapter); 
```

帮助的坦克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T17:17:34.030

我看到了一些潜在的问题：

1.  您的 LinearLayout 具有水平方向，并且 ListView 与屏幕一样宽。所以你永远不会看到 ImageView 或 TextView。最简单的解决方案是将 LinearLayout 的方向设置为垂直：

    ```
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/linearLa"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" > 
    ```

    但是您还设置了 ListView 的参数来填充屏幕，所以您仍然不会看到任何其他内容......同样简单的解决方案是将较小的项目放在 ListView 上方。

2.  这个逻辑应该有效：

    ```
    TextView tx = (TextView) mView.findViewById(R.id.textView);
    //if this view is on main screen
    if (tx == null) {
        tx = ((TextView) mView);
    } 
    ```

    但是，如果您正在制作自定义适配器，您应该已经知道您的布局是什么，并且不需要 if 子句，因为`tx`should never be `null`。

3.  您已将吐司设置为显示 0 秒...尝试使用标准化时间范围：

    ```
    Toast.makeText(this, getString(R.string.emtyRssList), Toast.LENGTH_SHORT).show(); 
    ```

* * *

**添加**

> 是的，布局是 R.layout.titlesrss

如果上面的 XML 是您的行布局，那么您正在主 ListView 的每一行内创建一个 ListView ...您的行布局应该是这样的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLa"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/iconremove"
        android:layout_width="50dip"
        android:layout_height="50dip"
        android:scaleType="centerCrop"
         android:src="@drawable/removeicon"
         android:visibility="gone"
          />

    <TextView
        android:id="@+id/textView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="left|center_vertical"
        android:layout_marginLeft="10dip"
        android:layout_weight="1"
        android:textSize="20dip" />

</LinearLayout> 
```

# xampp - Windows 8 中安装错误 Xampp 1.8.1

> ID：13532141
> 
> 赞同：0
> 
> 时间：2012-11-23T15:42:35.663
> 
> 标签：xampp

您好我正在尝试在 Windows 8 中安装 XAMPP 1.8.1。但似乎我无法让 MySql 工作！然而，绿色刻度是可见的，但“模块”不是绿色的。请帮忙。下面列出的信息很少，我认为这些信息可以帮助您向我推荐解决方案。谢谢你。

MySql错误日志显示如下；

```
121123  9:07:38 [Note] Plugin 'FEDERATED' is disabled.
121123  9:07:38 InnoDB: The InnoDB memory heap is disabled
121123  9:07:38 InnoDB: Mutexes and rw_locks use Windows interlocked functions
121123  9:07:38 InnoDB: Compressed tables use zlib 1.2.3
121123  9:07:38 InnoDB: Initializing buffer pool, size = 16.0M
121123  9:07:38 InnoDB: Completed initialization of buffer pool
121123  9:07:38 InnoDB: highest supported file format is Barracuda.
121123  9:07:38  InnoDB: Waiting for the background threads to start
121123  9:07:39 InnoDB: 1.1.8 started; log sequence number 1595675
121123  9:07:39 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306
121123  9:07:39 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
121123  9:07:39 [Note] Server socket created on IP: '0.0.0.0'.
121123  9:07:39 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
121123  9:08:06 [Note] Plugin 'FEDERATED' is disabled.
121123  9:08:06 InnoDB: The InnoDB memory heap is disabled
121123  9:08:06 InnoDB: Mutexes and rw_locks use Windows interlocked functions
121123  9:08:06 InnoDB: Compressed tables use zlib 1.2.3
121123  9:08:06 InnoDB: Initializing buffer pool, size = 16.0M
121123  9:08:06 InnoDB: Completed initialization of buffer pool
121123  9:08:06 InnoDB: highest supported file format is Barracuda.
121123  9:08:07  InnoDB: Waiting for the background threads to start
121123  9:08:08 InnoDB: 1.1.8 started; log sequence number 1595675
121123  9:08:08 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306
121123  9:08:08 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
121123  9:08:08 [Note] Server socket created on IP: '0.0.0.0'.
121123  9:08:08 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
121123  9:10:31 [Note] Plugin 'FEDERATED' is disabled.
121123  9:10:34 InnoDB: The InnoDB memory heap is disabled
121123  9:10:34 InnoDB: Mutexes and rw_locks use Windows interlocked functions
121123  9:10:34 InnoDB: Compressed tables use zlib 1.2.3
121123  9:10:34 InnoDB: Initializing buffer pool, size = 16.0M
121123  9:10:35 InnoDB: Completed initialization of buffer pool
121123  9:10:38 InnoDB: highest supported file format is Barracuda.
121123  9:10:41  InnoDB: Waiting for the background threads to start
121123  9:10:42 InnoDB: 1.1.8 started; log sequence number 1595675
121123  9:10:42 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306
121123  9:10:42 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
121123  9:10:42 [Note] Server socket created on IP: '0.0.0.0'.
121123  9:10:42 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
121123  7:41:42 [Note] Plugin 'FEDERATED' is disabled.
121123  7:41:42 InnoDB: The InnoDB memory heap is disabled
121123  7:41:42 InnoDB: Mutexes and rw_locks use Windows interlocked functions
121123  7:41:42 InnoDB: Compressed tables use zlib 1.2.3
121123  7:41:42 InnoDB: Initializing buffer pool, size = 16.0M
121123  7:41:42 InnoDB: Completed initialization of buffer pool
121123  7:41:42 InnoDB: highest supported file format is Barracuda.
121123  7:41:42  InnoDB: Waiting for the background threads to start
121123  7:41:43 InnoDB: 1.1.8 started; log sequence number 1595675
121123  7:41:43 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306
121123  7:41:43 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
121123  7:41:43 [Note] Server socket created on IP: '0.0.0.0'.
121123  7:41:43 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
121123  7:46:12 [Note] Plugin 'FEDERATED' is disabled.
121123  7:46:12 InnoDB: The InnoDB memory heap is disabled
121123  7:46:12 InnoDB: Mutexes and rw_locks use Windows interlocked functions
121123  7:46:12 InnoDB: Compressed tables use zlib 1.2.3
121123  7:46:12 InnoDB: Initializing buffer pool, size = 16.0M
121123  7:46:12 InnoDB: Completed initialization of buffer pool
121123  7:46:12 InnoDB: highest supported file format is Barracuda.
121123  7:46:12  InnoDB: Waiting for the background threads to start
121123  7:46:13 InnoDB: 1.1.8 started; log sequence number 1595675
121123  7:46:13 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306
121123  7:46:13 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
121123  7:46:13 [Note] Server socket created on IP: '0.0.0.0'.
121123  7:46:13 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
121123  7:47:40 [Note] Plugin 'FEDERATED' is disabled.
121123  7:47:40 InnoDB: The InnoDB memory heap is disabled
121123  7:47:40 InnoDB: Mutexes and rw_locks use Windows interlocked functions
121123  7:47:40 InnoDB: Compressed tables use zlib 1.2.3
121123  7:47:40 InnoDB: Initializing buffer pool, size = 16.0M
121123  7:47:40 InnoDB: Completed initialization of buffer pool
121123  7:47:40 InnoDB: highest supported file format is Barracuda.
121123  7:47:41  InnoDB: Waiting for the background threads to start
121123  7:47:42 InnoDB: 1.1.8 started; log sequence number 1595675
121123  7:47:42 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306
121123  7:47:42 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
121123  7:47:42 [Note] Server socket created on IP: '0.0.0.0'.
121123  7:47:42 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
121123  8:53:58 [Note] Plugin 'FEDERATED' is disabled.
121123  8:53:58 InnoDB: The InnoDB memory heap is disabled
121123  8:53:58 InnoDB: Mutexes and rw_locks use Windows interlocked functions
121123  8:53:58 InnoDB: Compressed tables use zlib 1.2.3
121123  8:53:58 InnoDB: Initializing buffer pool, size = 16.0M
121123  8:53:58 InnoDB: Completed initialization of buffer pool
121123  8:53:58 InnoDB: highest supported file format is Barracuda.
121123  8:53:59  InnoDB: Waiting for the background threads to start
121123  8:54:00 InnoDB: 1.1.8 started; log sequence number 1595675
121123  8:54:00 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306
121123  8:54:00 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
121123  8:54:00 [Note] Server socket created on IP: '0.0.0.0'.
121123  8:54:00 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
121123  8:55:36 [Note] Plugin 'FEDERATED' is disabled.
121123  8:55:36 InnoDB: The InnoDB memory heap is disabled
121123  8:55:36 InnoDB: Mutexes and rw_locks use Windows interlocked functions
121123  8:55:36 InnoDB: Compressed tables use zlib 1.2.3
121123  8:55:36 InnoDB: Initializing buffer pool, size = 16.0M
121123  8:55:36 InnoDB: Completed initialization of buffer pool
121123  8:55:36 InnoDB: highest supported file format is Barracuda.
121123  8:55:36  InnoDB: Waiting for the background threads to start
121123  8:55:37 InnoDB: 1.1.8 started; log sequence number 1595675
121123  8:55:37 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306
121123  8:55:37 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
121123  8:55:37 [Note] Server socket created on IP: '0.0.0.0'.
121123  8:55:37 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
121123  8:55:48 [Note] Plugin 'FEDERATED' is disabled.
121123  8:55:48 InnoDB: The InnoDB memory heap is disabled
121123  8:55:48 InnoDB: Mutexes and rw_locks use Windows interlocked functions
121123  8:55:48 InnoDB: Compressed tables use zlib 1.2.3
121123  8:55:48 InnoDB: Initializing buffer pool, size = 16.0M
121123  8:55:48 InnoDB: Completed initialization of buffer pool
121123  8:55:48 InnoDB: highest supported file format is Barracuda.
121123  8:55:48  InnoDB: Waiting for the background threads to start
121123  8:55:49 InnoDB: 1.1.8 started; log sequence number 1595675
121123  8:55:49 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306
121123  8:55:49 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
121123  8:55:49 [Note] Server socket created on IP: '0.0.0.0'.
121123  8:55:49 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
121123  8:55:55 [Note] Plugin 'FEDERATED' is disabled.
121123  8:55:55 InnoDB: The InnoDB memory heap is disabled
121123  8:55:55 InnoDB: Mutexes and rw_locks use Windows interlocked functions
121123  8:55:55 InnoDB: Compressed tables use zlib 1.2.3
121123  8:55:55 InnoDB: Initializing buffer pool, size = 16.0M
121123  8:55:55 InnoDB: Completed initialization of buffer pool
121123  8:55:55 InnoDB: highest supported file format is Barracuda.
121123  8:55:55  InnoDB: Waiting for the background threads to start
121123  8:55:56 InnoDB: 1.1.8 started; log sequence number 1595675
121123  8:55:56 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306
121123  8:55:56 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
121123  8:55:56 [Note] Server socket created on IP: '0.0.0.0'.
121123  8:55:56 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
121123  8:56:45 [Note] Plugin 'FEDERATED' is disabled.
121123  8:56:45 InnoDB: The InnoDB memory heap is disabled
121123  8:56:45 InnoDB: Mutexes and rw_locks use Windows interlocked functions
121123  8:56:45 InnoDB: Compressed tables use zlib 1.2.3
121123  8:56:45 InnoDB: Initializing buffer pool, size = 16.0M
121123  8:56:45 InnoDB: Completed initialization of buffer pool
121123  8:56:45 InnoDB: highest supported file format is Barracuda.
121123  8:56:46  InnoDB: Waiting for the background threads to start
121123  8:56:47 InnoDB: 1.1.8 started; log sequence number 1595675
121123  8:56:47 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3306
121123  8:56:47 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
121123  8:56:47 [Note] Server socket created on IP: '0.0.0.0'.
121123  8:56:47 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
121123  8:58:05 [Note] Plugin 'FEDERATED' is disabled.
121123  8:58:05 InnoDB: The InnoDB memory heap is disabled
121123  8:58:05 InnoDB: Mutexes and rw_locks use Windows interlocked functions
121123  8:58:05 InnoDB: Compressed tables use zlib 1.2.3
121123  8:58:05 InnoDB: Initializing buffer pool, size = 16.0M
121123  8:58:05 InnoDB: Completed initialization of buffer pool
121123  8:58:05 InnoDB: highest supported file format is Barracuda.
121123  8:58:05  InnoDB: Waiting for the background threads to start
121123  8:58:06 InnoDB: 1.1.8 started; log sequence number 1595675
121123  8:58:06 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3307
121123  8:58:06 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
121123  8:58:06 [Note] Server socket created on IP: '0.0.0.0'.
121123  8:58:06 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
121123  8:58:13 [Note] Plugin 'FEDERATED' is disabled.
121123  8:58:13 InnoDB: The InnoDB memory heap is disabled
121123  8:58:13 InnoDB: Mutexes and rw_locks use Windows interlocked functions
121123  8:58:13 InnoDB: Compressed tables use zlib 1.2.3
121123  8:58:13 InnoDB: Initializing buffer pool, size = 16.0M
121123  8:58:13 InnoDB: Completed initialization of buffer pool
121123  8:58:13 InnoDB: highest supported file format is Barracuda.
121123  8:58:13  InnoDB: Waiting for the background threads to start
121123  8:58:14 InnoDB: 1.1.8 started; log sequence number 1595675
121123  8:58:14 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3307
121123  8:58:14 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
121123  8:58:14 [Note] Server socket created on IP: '0.0.0.0'.
121123  8:58:14 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
121123  8:58:29 [Note] Plugin 'FEDERATED' is disabled.
121123  8:58:29 InnoDB: The InnoDB memory heap is disabled
121123  8:58:29 InnoDB: Mutexes and rw_locks use Windows interlocked functions
121123  8:58:29 InnoDB: Compressed tables use zlib 1.2.3
121123  8:58:29 InnoDB: Initializing buffer pool, size = 16.0M
121123  8:58:29 InnoDB: Completed initialization of buffer pool
121123  8:58:29 InnoDB: highest supported file format is Barracuda.
121123  8:58:29  InnoDB: Waiting for the background threads to start
121123  8:58:30 InnoDB: 1.1.8 started; log sequence number 1595675
121123  8:58:30 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3307
121123  8:58:30 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
121123  8:58:30 [Note] Server socket created on IP: '0.0.0.0'.
121123  8:58:30 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
121123  8:58:44 [Note] Plugin 'FEDERATED' is disabled.
121123  8:58:44 InnoDB: The InnoDB memory heap is disabled
121123  8:58:44 InnoDB: Mutexes and rw_locks use Windows interlocked functions
121123  8:58:44 InnoDB: Compressed tables use zlib 1.2.3
121123  8:58:44 InnoDB: Initializing buffer pool, size = 16.0M
121123  8:58:44 InnoDB: Completed initialization of buffer pool
121123  8:58:44 InnoDB: highest supported file format is Barracuda.
121123  8:58:44  InnoDB: Waiting for the background threads to start
121123  8:58:45 InnoDB: 1.1.8 started; log sequence number 1595675
121123  8:58:45 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3307
121123  8:58:45 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
121123  8:58:45 [Note] Server socket created on IP: '0.0.0.0'.
121123  8:58:45 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2)
121123  8:59:12 [Note] Plugin 'FEDERATED' is disabled.
121123  8:59:12 InnoDB: The InnoDB memory heap is disabled
121123  8:59:12 InnoDB: Mutexes and rw_locks use Windows interlocked functions
121123  8:59:12 InnoDB: Compressed tables use zlib 1.2.3
121123  8:59:12 InnoDB: Initializing buffer pool, size = 16.0M
121123  8:59:12 InnoDB: Completed initialization of buffer pool
121123  8:59:12 InnoDB: highest supported file format is Barracuda.
121123  8:59:12  InnoDB: Waiting for the background threads to start
121123  8:59:13 InnoDB: 1.1.8 started; log sequence number 1595675
121123  8:59:13 [Note] Server hostname (bind-address): '0.0.0.0'; port: 3307
121123  8:59:13 [Note]   - '0.0.0.0' resolves to '0.0.0.0';
121123  8:59:13 [Note] Server socket created on IP: '0.0.0.0'.
121123  8:59:13 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: 'host' (errno: 2) 
```

在 Xampp 控制面板中，我看到以下内容；

```
08:58:40  [main]    Initializing Control Panel
08:58:40  [main]    Windows Version:   64-bit
08:58:40  [main]    XAMPP Version: 1.8.1
08:58:40  [main]    Control Panel Version: 3.1.0 3.1.0 [ Compiled: September 20th 2012 ]
08:58:40  [main]    Running with Administrator rights - good!
08:58:40  [main]    XAMPP Installation Directory: "d:\xampp\"
08:58:40  [main]    Checking for prerequisites
08:58:40  [main]    All prerequisites found
08:58:40  [main]    Initializing Modules
08:58:40  [Apache]  XAMPP Apache Service is already running on port 80
08:58:40  [Apache]  XAMPP Apache Service is already running on port 443
08:58:40  [filezilla]   XAMPP FileZilla FTP Server Service is already running on port 21
08:58:40  [filezilla]   XAMPP FileZilla FTP Server Service is already running on port 14147
08:58:40  [main]    Starting Check-Timer
08:58:40  [main]    Control Panel Ready
08:58:44  [mysql]   Attempting to start MySQL service...
08:59:12  [mysql]   Attempting to start MySQL service... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:57:15.357

Under *C:\xampp\mysql\data\mysql* directory you should see a *host.MYD* file and it should have a zero size.

If this file is missing then you may create one..

If this doesn't work then you may download and install xampp afresh..Use [this link](http://www.apachefriends.org/download.php?xampp-win32-1.8.1-VC9.zip) for downloading..

# ios - 从 AppDelegate.m 加载视图（与默认值不同）

> ID：13532142
> 
> 赞同：1
> 
> 时间：2012-11-23T15:42:43.807
> 
> 标签：ios, xcode, uiview

我有一个与用户“Flocked”类似的问题（请参阅此处的问题：[Load an other View from applicationDidFinishLaunching in the AppDelegate](https://stackoverflow.com/questions/1997271/load-an-other-view-from-applicationdidfinishlaunching-in-the-appdelegate)），但是在阅读了他的帖子后我没有设法解决，也许我的情况与他的不同。

我有`didFinishLaunchingWithOptions`一个例程来检查应用程序是否是第一次运行（也来自另一个用户）：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    if (![[NSUserDefaults standardUserDefaults] boolForKey:@"everLaunched"]) {
        [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"everLaunched"];
        [[NSUserDefaults standardUserDefaults] setBool:YES forKey:@"firstLaunch"];
    }
    else{
        [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"firstLaunch"];
    }
    if ([[NSUserDefaults standardUserDefaults] boolForKey:@"firstLaunch"]) {

        NSLog(@"First run");
    }

    [[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(reachabilityChanged:) name: kReachabilityChangedNotification object: nil];
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

如果 firstLaunch 发生，我无法加载另一个视图`InfoView`（用于设置的视图）。我试过了：

```
InfoView *infoView = [[InfoView alloc]init];
[self presentViewController:infoView animated:YES completion:nil]; 
```

里面`if ([[NSUserDefaults standardUserDefaults] boolForKey:@"firstLaunch"])`

但没有运气。有什么想法或帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:00:10.507

试试这个：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSUserDefaults* defaults = [NSUserDefaults standardUserDefaults];

    [[NSNotificationCenter defaultCenter] addObserver: self selector: @selector(reachabilityChanged:) name: kReachabilityChangedNotification object: nil];
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    if (![defaults boolForKey:@"everLaunched"]) {
        NSLog(@"First run");
        [defaults setBool:YES forKey:@"everLaunched"];
        InfoView *infoView = [[InfoView alloc]init];
        [self.viewController presentViewController:infoView animated:YES completion:nil];    
    }

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:56:43.207

您正在尝试调用`[self presentViewController:infoView animated:YES completion:nil];`，`self`这是一流的，`UIResponder`因为您在您的`AppDelegate`. 您应该在 UIViewController 上调用它，在您的情况下可能是*viewController*。

编辑：这是要调用的行，**调用** `[self.window makeKeyAndVisible];` `otherwise self.window.rootViewController`后将为零。

```
[self.window.rootViewController presentViewController:infoView animated:YES completion:nil]; 
```

# ios - 为剪辑 UIImage 的 UIBezierPath 设置动画

> ID：13532146
> 
> 赞同：7
> 
> 时间：2012-11-23T15:43:10.453
> 
> 标签：ios, uiimage, core-animation, clipping, uibezierpath

我有一个看起来像甜甜圈的图像，并且想要对其进行动画处理，使其看起来像甜甜圈圈没有完成（笔划没有关闭）。很难描述，但想象一个速度计达到 100 并且您驾驶 50。我在 UIGraphicsBeginImageContextWithOptions 中的路径和 [path addClip] 的帮助下完成了遮罩，我还渲染了 UIImage。

我现在的问题是我可以或如何为路径设置动画。我尝试使用 CABasicAnimation 和 2 条路径（startAngle 和 endAngle 相同的第一条路径，第二条路径是 endAngle 是所需的角度），其中“路径”作为 keyPath，但这不起作用。

任何帮助;)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:32:06.003

`UIBezierPath`我使用动画`CABasicAnimation`...

```
UIBezierPath *bezierPath = [self bezierPath];

CAShapeLayer *bezierLayer = [[CAShapeLayer alloc] init];

bezierLayer.path = bezierPath.CGPath;
bezierLayer.strokeColor = [UIColor redColor].CGColor;
bezierLayer.fillColor = [UIColor clearColor].CGColor;
bezierLayer.lineWidth = 5.0;
bezierLayer.strokeStart = 0.0;
bezierLayer.strokeEnd = 1.0;
[self.view.layer addSublayer:bezierLayer];

if (animate)
{
    CABasicAnimation *animateStrokeEnd = [CABasicAnimation animationWithKeyPath:@"strokeEnd"];
    animateStrokeEnd.duration = 1.0;
    animateStrokeEnd.fromValue = @0.0f;
    animateStrokeEnd.toValue = @1.0f;
    [bezierLayer addAnimation:animateStrokeEnd forKey:@"strokeEndAnimation"];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T18:13:24.153

我建议设置一个 CAShapeLayer，让形状层呈现你的甜甜圈形状。您应该能够将您的甜甜圈形状渲染为带有粗线的圆弧的 CGPath。

CAShapeLayer 具有 strokeStart 和 strokeEnd 属性。两者的范围都在 0.0 到 1.0 之间。默认情况下，strokeStart 为 0.0（从头开始），strokeEnd 为 1.0（绘制整个路径）。这些属性是动画的。

如果您将 strokeEnd 从 .75 更改为 1.0，那么您的路径将从仅绘制 3/4 开始，并以动画方式绘制路径的最后 1/4。

我在 gitHub 上有一个项目，该项目说明使用形状图层作为图像上的蒙版以创建“时钟擦除”过渡。为此，我将圆弧上的线宽设置得如此之大，以至于形状完全填满了框架矩形，而不是绘制一个甜甜圈形状。在你的情况下，你会减少线条的粗细，这样它就会画出你的甜甜圈。

[Github 上的核心动画演示](https://github.com/DuncanMC/iOS-CAAnimation-group-demo)

单击应用程序中的“蒙版动画”按钮以查看正在工作的形状图层动画。

# java - 是否必须在 Gson 处理的类上保留默认构造函数？

> ID：13532148
> 
> 赞同：1
> 
> 时间：2012-11-23T15:43:16.180
> 
> 标签：java, json, gson

如果我创建一个自定义构造函数，我需要创建一个不带参数的 Gson 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:28:23.200

事实上，如果你有这样的要求，你可以试试[Genson](http://code.google.com/p/genson/)库。它可以使用带参数的构造函数反序列化对象。要求是参数的名称必须与 json 中的名称匹配。这是一个例子：

```
 public static class MyClass {
    public final String someString;
    public MyClass(String someString) {
        this.someString = someString;
    }
 }

 String json = "{\"someString\": \"foo bar\"}";
 // enable this feature
 Genson genson = new Genson.Builder().setWithDebugInfoPropertyNameResolver().create();
 MyClass mc = genson.deserialize(json, MyClass.class); 
```

**编辑**：在这种情况下，我认为 Genson 比 Gson 有几个优势。

*   编写自定义反序列化器会很乏味，您需要为每个不提供无参数构造函数的类编写另一个反序列化器。我觉得太过分了...

*   编写 InstanceCreator 更容易，但我认为这不是正确的方法。实际上，您仍然需要为每个类编写一个 InstanceCreator，最大的缺点是您没有反序列化的值。因此，除了将 null 和常量作为参数传递之外，您无能为力...

我认为处理带参数的构造函数是 Gensons 的优势之一。它不需要任何额外的代码，它有效地将 json 流中的值作为参数传递，如果你想使用另一个属性名称，你可以用 @JsonProperty("newName") 注释参数。其他属性将使用设置器和字段设置（其中 Gson 仅使用字段）。如果需要，您甚至可以提供静态工厂方法而不是 ctrs。例如 ：

```
public class MyClass {
   private String myString;

   @JsonCreator public static MyClass create(String myString) {
     return new MyClass(myString);
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T15:48:58.690

**选项 1：**是的，除非您创建自己的`JsonDeserializer`and `JsonSerializer`，在这种情况下，您的序列化程序可以使用您想要的任何构造函数。

具体来说，如果您的类中有其他要求，例如它们是不可变的，或者如果您想保证初始化后的最小状态，我建议您做一些额外的工作。

PS：实际上，我想`JsonDeserializer`就足够了。洞察任何人？

**选项 2：（**参见 Eugen 的回答）考虑改用[Genson](http://code.google.com/p/genson/)

**选项 3：（**请参阅 Robertiano 的回答）保留默认的反序列化器并改为实现[InstanceCreator](https://sites.google.com/site/gson/gson-user-guide#TOC-Writing-an-Instance-Creator)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T16:05:26.580

如果您想保存 GSON 反序列化器并且您想要的只是创建没有空构造函数的对象实例，那么`InstanceCreator`这是最好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-03T13:42:09.990

是的，但是没有参数的构造函数可以是私有的。因此，您可以拥有一个带有 args 的公共构造函数（不可变类）和一个**没有参数的****私有**构造函数，仅用于反序列化目的。

 **这不是一个非常优雅的解决方案，但至少您不需要编写额外的组件。**

# jquery - jQuery URL 验证需要包含linkedin.com

> ID：13532149
> 
> 赞同：4
> 
> 时间：2012-11-23T15:43:15.947
> 
> 标签：jquery, url, jquery-validate, linkedin

我对我的表单使用 jquery 验证，但我不习惯使用 jQuery。

这就是我现在得到的，它检查一个有效的 URL，我想要的是它检查 URL 是否包含linkedin.com（我希望用户在那里输入linkedin url。

```
if(!(/^(https?|ftp):\/\//i.test(val))) {

    val = 'http://'+val;

    $(elem).val(val); 
}
return /^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&amp;'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(val); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T15:48:55.677

[小提琴演示](http://jsfiddle.net/3PuaQ/)

```
val = 'http://linkedin.com/';

if( /(ftp|http|https):\/\/?(?:www\.)?linkedin.com(\w+:{0,1}\w*@)?(\S+)(:([0-9])+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(val) ) {

   alert( 'valid Linkedin URL' );

}else{

   alert( 'not valid Linkedin URL' );

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T15:46:29.733

您可以直接使用检查变量`indexOf`，例如：

```
var contains = (val.indexOf('http://www.linkedin.com') > -1); //true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T15:47:20.710

假设您的输入存储在`val`

```
if( (condtion1 == true) && (val.indexOf(".linkedin.com") > -1))
{

} 
```

# php - 这段代码有什么问题？返回最后一项的重复结果

> ID：13532157
> 
> 赞同：0
> 
> 时间：2012-11-23T15:43:27.523
> 
> 标签：php, drupal, drupal-6

使用下面的代码，最后一项 ($term->name) 返回最后一项的重复条目。

输出：

示例：计算机、时尚、出版、医学、医学

示例：IT、音乐、技术、技术

帮助！

```
<?php $vocabularies = taxonomy_get_vocabularies();
    foreach($vocabularies as $vocabulary) {
       if ($vocabularies) {
          $terms = taxonomy_node_get_terms_by_vocabulary($node, $vocabulary->vid);
             if ($terms) {
       $i = 1;
       $len = count($terms);
                foreach ($terms as $term) {                     
             if ($i == 1) {
                   print '<span class="separator">' . t($term->name) . '</span>' . ' , '; }
                 else {
                    print '<span class="separator">' . t($term->name) . '</span>' . ' , '; }
             if ($i == $len) {
                   print '<span class="separator">' . t($term->name) . '</span>'; }
        $i++;
                }
              }
       }
    } ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T15:45:50.750

```
if ($i == 1) {
    // the first element
} else {
    // other elements, including the last one
}

if ($i == $len) {
    // the last element again
} 
```

您可能希望将其更改为：

```
if ($i == 1) {
    // the first element
} else if ($i < $len) {
    // other elements, excluding the last one
}

if ($i == $len) {
    // the last element
} 
```

或者，如果第一个元素没有特殊意义：

```
if ($i < $len) {
    // all elements excluding the last one
} else {
    // the last element
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:46:05.967

您需要使用`else-if`最后一个条件。现在，您实际上是在使用 2 个 if 检查每个元素：

```
If i is one, do this, else that.
AND
If i is the last one, also do this 
```

# sql - 在子查询中插入具有多个值的表

> ID：13532162
> 
> 赞同：4
> 
> 时间：2012-11-23T15:44:06.610
> 
> 标签：sql, insert

```
INSERT INTO Reference_TB] ([RequestID] ,[WaveID]) 
VALUES (2222,(select tWaveID from @Table2)) 
```

我正在使用上面的查询插入到表中。我知道`@Table2`有多个`tWaveID`，这就是它显示错误的原因：

> *子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。*

如何解决这个问题并为所有条目插入`twaveID`重复？`RequestID``2222`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T15:47:07.497

使用[`INSERT ... SELECT`](http://dev.mysql.com/doc/refman/5.0/en/insert-select.html)语句而不是子查询：

```
INSERT INTO Reference_TB] ([RequestID] ,[WaveID]) 
(select 2222, tWaveID from @Table2) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T15:46:49.570

不确定确切的语法，因为您没有指定系统。

使用插入选择将插入所有值

```
INSERT INTO Reference_TB] ([RequestID] ,[WaveID])
select 2222,tWaveID from @Table2 
```

# python - 使用 urllib3/requests 时出现这个奇怪的“无效语法”错误

> ID：13532163
> 
> 赞同：1
> 
> 时间：2012-11-23T15:44:09.863
> 
> 标签：python, installation, python-requests, urllib3

遵循其他人的建议：[给定大量 url，有什么方法可以检查哪些是活动的/非活动的？](https://stackoverflow.com/questions/13424753/given-a-big-list-of-urls-what-is-a-way-to-check-which-are-active-inactive)

尝试使用 urllib3 安装请求时出现错误。

尝试安装请求。

```
C:\Users\yao\Desktop\My Downloads\requests-develop\requests-develop>setup.py install
Traceback (most recent call last):
  File "C:\Users\yao\Desktop\My Downloads\requests-develop\requests-develop\setup.py", line 6, in <module>
    import requests
  File "C:\Users\yao\Desktop\My Downloads\requests-develop\requests-develop\requests\__init__.py", line 52, in <module>
    from . import utils
  File "C:\Users\yao\Desktop\My Downloads\requests-develop\requests-develop\requests\utils.py", line 22, in <module>
    from .compat import parse_http_list as _parse_list_header
  File "C:\Users\yao\Desktop\My Downloads\requests-develop\requests-develop\requests\compat.py", line 95, in <module>
    from .packages import chardet
  File "C:\Users\yao\Desktop\My Downloads\requests-develop\requests-develop\requests\packages\__init__.py", line 3, in <module>
    from . import urllib3
  File "C:\Users\yao\Desktop\My Downloads\requests-develop\requests-develop\requests\packages\urllib3\__init__.py", line 16, in <module>
    from .connectionpool import (
  File "C:\Users\yao\Desktop\My Downloads\requests-develop\requests-develop\requests\packages\urllib3\connectionpool.py", line 434
    except Empty as e:
                  ^
SyntaxError: invalid syntax 
```

尝试使用 urllib3。

```
C:\Users\yao\Desktop\ad stuff\find urls>reqs.py
Traceback (most recent call last):
  File "C:\Users\yao\Desktop\ad stuff\find urls\reqs.py", line 1, in <module>
    import re, csv, urllib3
  File "build\bdist.win32\egg\urllib3\__init__.py", line 16, in <module>
  File "C:\Python25\lib\site-packages\urllib3-dev-py2.5.egg\urllib3\connectionpool.py", line 435
    except Empty as e:
                  ^
SyntaxError: invalid syntax 
```

最近刚安装了setuptools、pip、requests、urllib3。以该顺序。我有没有搞砸什么？顺便说一句，使用 python 2.5。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:47:32.263

`urllib3`需要 Python 2.6 或更高版本。从[他们的自述文件中](https://github.com/shazow/urllib3#readme)：

> *   在 Python 2.6+ 和 Python 3.2+ 上测试

[他们在 2012 年 1 月发布的 1.2 版中](https://github.com/shazow/urllib3/blob/master/CHANGES.rst#12-2012-01-29)放弃了对 Python 2.5的支持：

> 放弃了 Python 2.5 支持（在 2.6.7、2.7.2 上测试）

Python 2.6 添加了一种用于处理异常的新语法，您可以[在 Python 2.6 中的新增](http://docs.python.org/2/whatsnew/2.6.html)功能中阅读：

> 捕获异常的替代语法：`except TypeError as exc`.

`urllib3`现在使用此语法，但您尝试在不支持它的 Python 2.5 上运行它。

# wcf - WCF 与 Android (TCPBinding) 和 ServiceStack

> ID：13532166
> 
> 赞同：3
> 
> 时间：2012-11-23T15:44:29.693
> 
> 标签：wcf, xamarin.android, servicestack

我正在研究访问 Android 应用程序远程数据的不同选项（在未来的 WindowsEmbedded 和可能带有 monotouch 的 iOS 中），所以我进行了一些测试，我试图了解什么是可能的，什么是不可能的。

我已经有一个使用原始套接字的客户端（WindowsCE）/服务器（win32）解决方案。我将用 .NET 重写服务器，并且为了通信我想尝试 WCF。我编写了一个简单的 WCF .NET 服务器应用程序，并使用 Android 的 basicHTTPBinding 连接到它，它可以工作。但是出于性能原因，我想使用 TCPBinding，并且我被 svcutil 等卡住了，我不明白我是无法做到还是不可能。android 的 mono 是否完全、部分地完全支持 WCF？

如果答案是否定的，并且我不能将二进制 TCP 绑定与 WCF 一起使用，那么迁移到 ServiceStack 有什么好处（尚未测试，但似乎被认为比 WCF 更好）。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T18:25:18.393

我个人不会尝试在嵌入式设备上使用 WCF，尤其是在 Mono 上，它仅部分支持 WCF 堆栈。此外，WCF tcp 绑定中使用的默认二进制序列化程序实际上既[慢又需要比大多数序列化程序更大的有效负载](http://marcgravell.blogspot.com/2009/09/protobuf-net-vs-netdatacontractserializ.html)：

### 原始缓冲区

*   大小（字节）：133,010
*   序列化（毫秒）：10,769
*   反序列化（毫秒）：23,511

### NetDataContractSerializer（WCF 二进制）

*   大小（字节）：992,203
*   序列化（毫秒）：29,343
*   反序列化（毫秒）：91,453

目前，为了在 ServiceStack 中获得最佳性能，您可以通过 NuGet 插件启用 .NET 最快的二进制格式，请参阅：

*   [原始缓冲区](https://github.com/ServiceStack/ServiceStack/wiki/Protobuf-format)
*   [消息包](https://github.com/ServiceStack/ServiceStack/wiki/MessagePack-Format)

使用 ServiceStack 的好处是，所有[类型化的 C# 客户端](https://github.com/ServiceStack/ServiceStack/wiki/Clients-overview)共享相同的接口，您可以使用灵活且调试器友好的格式（如 JSON）轻松开发（[这也很快](http://www.servicestack.net/benchmarks/#burningmonk-benchmarks)），然后当您完成开发时，轻松切换到一个上面的二进制格式以获得最佳性能。

## 为 ServiceStack 计划的未来 TCP 端点支持

因为[ServiceStack 的架构](https://github.com/ServiceStack/ServiceStack/wiki/Architecture-overview)可以轻松支持多个端点，所以我们还计划在合并[异步分支](https://github.com/ServiceStack/ServiceStack/commits/async)后启用快速 TCP 端点。它将像我们的其他 ServiceClient 一样透明地工作，因此可以通过使用另一个 ServiceClient 轻松切换。

# java - java里面的scrapy？

> ID：13532170
> 
> 赞同：0
> 
> 时间：2012-11-23T15:44:56.897
> 
> 标签：java, python, scrapy

是否可以在 Java 项目中使用 Scrapy？

以 Jython 为例，或者可能是“间接”解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:47:05.150

应该是，但是您是否考虑过使用类似[jsoup](http://jsoup.org/)的东西？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T13:07:21.480

我怀疑你可以在 jython 下运行 twisted，而 scrapy 是基于 twisted 的。不确定你想做什么，但我建议运行 scrapyd 并使用 web 服务接口与 java 进行通信。你能告诉我们更多关于你想要达到的目标吗？

# jsf - 如果在全页刷新 (FPR) 后未呈现文件，我如何有条件地在 h:head 中呈现 .js 文件？

> ID：13532172
> 
> 赞同：3
> 
> 时间：2012-11-23T15:45:28.370
> 
> 标签：jsf, jsf-2, primefaces, tomcat7, atmosphere

PrimeFaces 有条件地在 h:head 中呈现以下内容：

```
<script type="text/javascript" src="/webapp/javax.faces.resource/push/push.js.jsf?ln=primefaces"><!--//--></script> 
```

当 PrimeFaces p:socket 组件被添加到 JSF/xhtml 页面时。我的一些页面刷新，导致这个 push.js 文件“不”在 h:head 中呈现。

当 push.js 文件“未”呈现时，我想有条件地呈现 push.js 文件以尝试修复/解决我在 PrimeFaces Push 中遇到的问题。

更多详情请点击下方PrimeFaces论坛主题网址：

[未捕获的类型错误：未定义不是函数](http://forum.primefaces.org/viewtopic.php?f=10&t=26469)

我在问这个问题，因为我已经根据 bean 属性值有条件地渲染 h:head，如下所示：

```
<h:head rendered="#{!pageNavigationController.gmaps and !pageNavigationController.gmapsAutoComplete}">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="refresh" content="#{session.maxInactiveInterval};url=pf_viewExpired.jsf" />
    <title><h:outputText escape="false" value="MCMS"/></title>
    <h:outputStylesheet name="css/mcms.css"/>
    <h:outputScript name="js/mcms.js"/>
    <h:outputScript name="js/addUsingTemplate.js"
                    rendered="#{pageNavigationController.isPageSelected('/orders/pf_AddUsingTemplate.xhtml')}"/>
</h:head> 
```

也许我对 h:head 的使用使容器 TomEE 1.5 SNAPSHOT 难以为 .js 文件提供服务，因为页面上多个 h:head 的条件渲染，或者这实际上可能是 PrimeFaces Push (Atmosphere) 问题这最终需要解决，但我确信有一种方法可以通过 h:outputScript 渲染 .js 文件，如果该文件尚未在 h:head 中呈现的话。

Web 应用程序使用以下内容：

PrimeFaces 3.5 快照、TomEE 1.5 快照（Tomcat 7.0.32）、JUEL 2.2.5、OmniFaces 1.3 快照

请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T17:16:43.310

这似乎更像是一个 PrimeFaces 问题。为了强制加载`push.js`同一视图上的每个请求，您可以显式添加

```
<h:outputScript library="primefaces" name="push/push.js" target="head" /> 
```

without conditional rendering. If everything went well, i.e. it behaves well as per JSF2 resource handling mechanism, then it should not be included twice at all in cases where it worked properly.

# ios - 保存日期戳 iOS

> ID：13532175
> 
> 赞同：0
> 
> 时间：2012-11-23T15:45:34.947
> 
> 标签：ios, xcode

因此，我在 xcode 中编写与不同服务器上的数据库同步的程序，但要更新的信息取决于上次同步的日期。保存“dateLastSynced”时间戳的最佳方法是什么，以便当我打开程序时它可以自动同步日期戳之后发生的更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:12:43.673

清楚`[NSDate date]`地为您获取格式的当前日期`NSDate`，但如果您将其记录在 SQLite 数据库中，您还可以使用适当的[SQLite 日期和时间函数](http://www.sqlite.org/lang_datefunc.html)，例如`SELECT datetime();`.

但是，如果您使用此时间戳作为您在远程 Web 服务请求中使用的参数（即服务器将检查它自己的内部时钟和时间戳记录的时间戳），我建议您不要使用您的本地时钟。`dateLastSynced`从您从该服务器收到的时间戳确定，根本不使用您的本地时钟。实际上，您让 Web 服务器的时间戳机制管理该过程。因此，您将从远程服务器获取适当的时间戳字段并将其存储在数据库的`dateLastSynced`时间戳中。关键是，您不希望时钟的轻微错误调整（或更糟糕的是，马虎的时区管理）对您的同步逻辑产生不利影响。

就个人而言，当我协调远程数据库和本地数据库之间的同步时，我通常在本地数据库中有一个单行表用于配置信息，并且我将这个基于服务器的时间戳存储在那里。您当然可以使用[`NSUserDefaults`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html#//apple_ref/occ/cl/NSUserDefaults)（请参阅[Preferences and Settings Programming Guide](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/UserDefaults/AccessingPreferenceValues/AccessingPreferenceValues.html#//apple_ref/doc/uid/10000059i-CH3-SW1)）或 plist 或其他任何东西，但我个人将此同步时间戳视为本地数据库状态的属性，因此我觉得将其保留在那里更舒服。如果您将其保留在其他地方，请考虑其他可能更新您的数据库的过程（例如，当用户使用新的/修改的数据结构将其应用程序更新到 2.0 版时，您的迁移计划是什么）。

所以，无论如何，我个人会将数据库同步信息保存在数据库本身中，即使拥有那一行配置表感觉很傻。（顺便说一句，我也倾向于在我的配置表中包含应用程序/数据库版本号等字段。）

# python - 使用 pymssql 访问小数

> ID：13532177
> 
> 赞同：0
> 
> 时间：2012-11-23T15:45:37.680
> 
> 标签：python, sqlalchemy, pymssql

我正在使用 python、sqlalchemy 和 pymssql 连接到专有的 MSSQL 数据库。数据库无法编辑，我只需要从中读取数据。现在，当我的程序第一次在数据库上运行查询时，它会吐出这条消息。

```
path/to/sqlalchemy/dialects/mssql/pymssql.py:50: SAWarning: Dialect mssql+pymssql does *not* support Decimal objects natively, and SQLAlchemy must convert from floating point - rounding errors and other issues may occur. Please consider storing Decimal numbers as strings or integers on this platform for lossless storage.
  return sqltypes.Numeric.result_processor(self, dialect, type_) 
```

我知道这是 sqlalchemy 对我说话，这意味着当我从 Decimal 类型的字段中读取数据时，它将被转换为 Float 并在此过程中四舍五入。

所以我有两个关于这个的问题......

首先，在 Linux 机器上，有没有办法从 MSSQL 数据库中获取十进制数据而不会出现这个问题？

其次，为什么程序打印此消息而不是崩溃或引发异常？如果我能应付这个小错误，那么我该如何阻止不断向我吐出消息呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T23:26:45.793

是的。使用 pyodbc (free/OSS) 或 mxodbc (commercial, 在 0.8 中使用 mxodbc 仅与最新的 mxodbc) 方言，它们已被测试为以全精度交付 DECIMAL 对象。pymssql 目前是一个未知数，因为这个 DBAPI 经历了许多重写/所有权更改，并且它的状态有点悬而未决。

另外，警告是因为您*可以*取回十进制对象，它们只会受到通常的浮点怪异的影响（例如 3.456 以 3.4559999999999 类型的东西返回）。因此，最好允许读取带有警告的值，而不是阻止其他部分工作的功能。

# .net - Datagridview 的行自动调整大小

> ID：13532179
> 
> 赞同：9
> 
> 时间：2012-11-23T15:45:50.440
> 
> 标签：.net, datagridview, rows, autoresize

我正在尝试自动调整一行的高度，我发现它非常具有挑战性。

我已经设置了这个属性：

```
DataGridView.AutoSizeRowsMode = DataGridViewAutoSizeRowsMode.AllCells. 
```

我也使用这种其他方法做到了：

```
DataGridView.AutoResizeRows(DataGridViewAutoSizeRowsMode.AllCellsExceptHeaders) 
```

也可以逐行使用：

```
DataGridView.AutoResizeRow(i, DataGridViewAutoSizeRowMode.AllCells) 
```

甚至将行的高度硬编码为一个很大的值，它也不起作用！！所有行都以其默认高度显示。

这些都不起作用。我的选择已经不多了。

datagridview 中的大多数行不需要调整大小。但其中之一充满了这样的值：

“a”+“\n”+b+“\n”+“c”+“\n”+“d”+“\n”+“e”

我的意思是，短值但在不同的行。我必须以不同的方式显示它们，不能将它们全部显示在一起。但是 datagridview 只显示第一个，而所有其他的都被隐藏了，因为该行不会自动调整大小。

关于任何其他方式的任何想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T16:19:33.607

您需要在数据更改*后调用 resize 方法。*来自 MSDN 文章[`DataGridView.AutoResizeRows()`](http://msdn.microsoft.com/en-us/library/ms158609.aspx)：

> 每次方法调用仅调整一次行高；如果以后行的内容发生变化，行将不会自动调整。

这意味着您需要在第一次和任何后续加载网格之后调用该方法。如果您在父窗体的控制器中调用此代码，则数据绑定尚未发生，因此数据不存在。

对于使用`DataBindingComplete`事件的第一次加载：

```
dataGridView1.DataBindingComplete += new
    DataGridViewBindingCompleteEventHandler(dataGridView1_DataBindingComplete);

void dataGridView1_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
{
    dataGridView1.AutoResizeRows(DataGridViewAutoSizeRowsMode.AllCells);
} 
```

对于以后对单元格的更新，您需要自己找到最佳位置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T18:41:22.590

我找到了解决这个问题的方法。而不是使用网格或行的自动调整大小属性，我应该使用 wrapmode 来应用于所有网格的单元格。

[DataGridView.DefaultCellStyle.WrapMode = DataGridViewTriState.True](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcellstyle.wrapmode.aspx)

这适用于所有单元格并且有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-22T13:56:45.000

你正在尝试的不会工作。您需要将 AutoSizeMode 设置为“无”，然后更改列的宽度。如果您手动设置列，效果会更好，因为我假设您已经知道您拥有哪些列。

# python - Django站点中的ImportError，mod_wsgi处于守护程序模式

> ID：13532182
> 
> 赞同：2
> 
> 时间：2012-11-23T15:45:55.537
> 
> 标签：python, django, apache, mod-wsgi

我正在尝试运行两个配置在同一 wsgi 上的应用程序`VirtualHost`。其中一个应用程序是[此处](http://code.google.com/p/modwsgi/wiki/QuickConfigurationGuide#WSGI_Application_Script_File)`myapp`指定的标准 hello-world 代码。它加载得很好。另一个应用程序是一个 Django 站点。它失败了。`uiapp``ImportError`

[我在wsgi 文档](http://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGIDaemonProcess)中读到 的值`python-path`附加到`sys.path`，所以这就是我在我`WSGIDaemonProcess`的 for中指定的`uiapp`。

我不知道问题出在 Python 代码还是 Apache 配置上。

这是我的虚拟主机配置：

```
 [ . . . ]

    # processGroups
    WSGIProcessGroup uiapp
    WSGIProcessGroup myapp

    # configurations for django sites
    WSGIScriptAlias /uiapp "/some/path/ui_dir/site_prod/wsgi.py"
    WSGIScriptAlias /myapp "/some/other/path/myapp.wsgi"

    # daemons
    WSGIDaemonProcess uiapp processes=2 threads=25 display-name=site_prod_wsgi python-path=/some/path/ui_dir
    WSGIDaemonProcess myapp processes=2 threads=25 display-name=helloworld_wsgi

    # doc root for /uiapp
    <Directory "/some/path/ui_dir/site_prod">
        Order allow,deny
        Allow from all
    </Directory>

    # doc root for /myapp
    <Directory "/some/other/path">
        Order allow,deny
        Allow from all
    </Directory>

    [ . . . ] 
```

我试图将 for 更改为`python-path`，但即使这样也失败并出现相同的错误。`uiapp``/some/path/ui_dir/site_prod`

错误日志是：

```
 mod_wsgi (pid=32652): Exception occurred processing WSGI script '/some/path/ui_dir/site_prod/wsgi.py'.
 Traceback (most recent call last):
   File "/home/usr/local/lib/python2.7/site-packages/django/core/handlers/wsgi.py", line 219, in __call__
     self.load_middleware()
   File "/home/usr/local/lib/python2.7/site-packages/django/core/handlers/base.py", line 39, in load_middleware
     for middleware_path in settings.MIDDLEWARE_CLASSES:
   File "/home/usr/local/lib/python2.7/site-packages/django/utils/functional.py", line 184, in inner
     self._setup()
   File "/home/usr/local/lib/python2.7/site-packages/django/conf/__init__.py", line 42, in _setup
     self._wrapped = Settings(settings_module)
   File "/home/usr/local/lib/python2.7/site-packages/django/conf/__init__.py", line 95, in __init__
     raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))
 ImportError: Could not import settings 'site_prod.settings' (Is it on sys.path?): No module named site_prod.settings 
```

这是来源`/some/path/ui_dir/site_prod/wsgi.py`

```
import os

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "site_prod.settings")

from django.core.wsgi import get_wsgi_application
application = get_wsgi_application()

# Apply WSGI middleware here.
# from helloworld.wsgi import HelloWorldApplication
# application = HelloWorldApplication(application) 
```

请帮我弄清楚我做错了什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T21:23:35.497

你不能像这样连续有两个 WSGIProcessGroup 指令。只有最后一个会被使用。因此，您实际上是将两个应用程序发送到同一个守护进程组而不是不同的。完成此操作并将它们置于同一进程中后，您将遇到 setdefault() 问题，如下所述：

*   [http://blog.dscpl.com.au/2012/10/requests-running-in-wrong-django.html](http://blog.dscpl.com.au/2012/10/requests-running-in-wrong-django.html)

将 WSGIProcessGroup 指令移动到与相应 WSGI 脚本文件位置相关的 Directory 块内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:10:25.867

如果您查看 django docs 版本 1.3 而不是 1.4 的先前版本，[如何将 Django 与 Apache 和 mod_wsgi 一起使用](https://docs.djangoproject.com/en/1.3//howto/deployment/modwsgi/)部分可以帮助解决您的问题。我在配置虚拟主机时遇到了同样的问题。因此，不要`python-path=/some/path/ui_dir`在您的虚拟主机配置中指定。您可以将以`/some/path/ui_dir/site_prod/wsgi.py`下行添加到该文件中。将这些行放在文件顶部的行之前，在导入和运行 django 的内容之前。

**代码**

```
import sys
path = '/some/path/ui_dir'
if path not in sys.path:
    sys.path.append(path) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T17:52:25.500

...并确保您已在 wsgi.py 中设置 DJANGO_SETTINGS_MODULE

```
os.environ['DJANGO_SETTINGS_MODULE'] = 'settings.could.be.somewhere.else' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T18:35:31.917

试试这个：

虚拟主机：

```
<Virtualhost project.dev>
    DocumentRoot "/full/path/to/project/root/"

    WSGIScriptAlias / /full/path/to/wsgi/file/wsgi.py
</Virtualhost> 
```

wsgi.py：

```
sys.path = ['path/to/project/root'] + sys.path 
```

# twitter - 如何调用 Twitter 的 Update_With_Media 并将嵌入的图像链接到外部站点？

> ID：13532186
> 
> 赞同：1
> 
> 时间：2012-11-23T15:46:05.837
> 
> 标签：twitter, instagram

当有人从 Instagram 分享照片时，显示的推文包含想象的内嵌预览，但推文中包含的链接指向 Instagram 网站。

根据我对 Twitter 开发者 API 的阅读，我认为他们能够以某种方式修改生成的媒体实体的扩展 URL 和显示 URL，使其链接指向 Instagram 位置。

但是，我不知道如何将其指定为 update_with_media 调用的一部分，如何使用 Twitter api 让嵌入的图像链接指向外部站点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:54:50.963

找到了答案！

Instagram 使用的功能称为[Twitter Cards](https://dev.twitter.com/docs/cards)。Twitter Cards 使您能够向您的网站添加额外的元数据，只要在推文中共享指向该页面的链接，Twitter 就会获取这些元数据。

因此，例如，要将照片附加到包含 URL 的推文，其中包含您要附加​​的照片（即[http://www.bahndr.com/Draft/Caption/1255741393/60269593](http://www.bahndr.com/Draft/Caption/1255741393/60269593)），您需要将以下标签添加到链接的 url 页面：

```
<meta property="twitter:card" content="photo"/>
<meta property="twitter:url" content="http://www.bahndr.com/Draft/Caption/1255741393/60269593"/>
<meta property="twitter:title" content="#Windows"/>
<meta property="twitter:description" content="I guess I won't be checking in today!"/>
<meta property="twitter:image" content="http://www.bahndr.com/service/rest/Objects/203216285-imageurl.jpg"/>
<meta property="twitter:site" content="@bahndr"/> 
```

您需要获得 Twitter 的批准才能在您的网站上显示卡片。

瞧，罗伯特是你母亲的兄弟，你的推文附有一张照片，就像 Instagram 过去那样。

# html - 在css中自定义标签下划线

> ID：13532188
> 
> 赞同：1
> 
> 时间：2012-11-23T15:46:20.043
> 
> 标签：html, css

我有一个 div 里面有一个标题，我想给标题加下划线，这样下划线覆盖了 div 的大约 80%，两边缩进 10%。另外，我希望下划线是标题下方的一些像素。我正在尝试这个

* * *

*在html部分*

```
<div id="divname">
     <h2>HEADER</h2>
</div> 
```

* * *

* * *

*在 CSS 部分*

```
#divname h2 {
text-align: center;
font-family:arial,sans-serif;
text-decoration:underline;
} 
```

* * *

但这里标题直接下划线，没有高度间隙，并且下划线的宽度与标题数据相同。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T15:51:05.550

为 h2 元素设置边框，并将其宽度设置为 80%；`margin:auto;`用于居中

```
#divname h2{
    width:80%;
    margin:auto;
    display:block;
    border-bottom:1px solid gray;
} 
```

这是一个jsfiddle：http: [//jsfiddle.net/bxKZ3/](http://jsfiddle.net/bxKZ3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:52:51.930

我不知道您是否可以使用 CSS 对下划线进行样式化，但还有另一种方法：

看看这个[jSFiddle](http://jsfiddle.net/zanjr/)

**HTML**

```
<div id="divname">
    <h2>HEADER</h2>
    <div class="underline"></div>
</div>​ 
```

**CSS**

```
#divname h2 {
    text-align: center;
    font-family:arial,sans-serif;
    text-decoration:underline;
}
.underline{
    height:1px;
    background:#000;
    margin:0px 10px;
} 
```

显然，这`background:#000;`会改变下划线的颜色。更改`margin:0px 10px;`将决定下划线两侧有多少空间（我相信这是您的要求之一）。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T16:15:53.367

如果您使用 before/after 伪元素，则无需额外标记即可执行此操作：

[http://jsfiddle.net/bxKZ3/1/](http://jsfiddle.net/bxKZ3/1/)

```
h2{
    text-align: center;
    background:#eee; 
}
h2:after{
    border-bottom:1px solid gray;
    display: block;
    margin: 1em 10% 0 10%;
    content: " ";
}

<h2>bonjour</h2> 
```

# c++ - 共享内存的强大 CRITCAL_SECTION？

> ID：13532189
> 
> 赞同：7
> 
> 时间：2012-11-23T15:46:20.843
> 
> 标签：c++, visual-c++, mutex, shared-memory, critical-section

我们有一些在 Windows 上跨进程共享的数据结构。（通过所有这些进程加载的 DLL 中的共享数据段。）

我们需要同步一些访问，并且我们测量到使用 Win32 Mutex 对性能的影响太大了。

`CRITICAL_SECTION` [由于它的某些高级功能，无法](http://blogs.msdn.com/b/larryosterman/archive/2005/08/24/455741.aspx)将其放入共享内存中。

`Interlocked*`这让我们需要一个直接基于 Win32 上的函数族的简单锁定/互斥解决方案。

在推出自己的产品之前，我想看看是否有强大的实现可以处理轻量级、快速和在多个进程的共享内存中工作的要求，但这似乎对我来说有点难以用谷歌搜索。（而且，无论如何，CodeProject 很受欢迎，通常很难判断它是玩具代码还是“健壮”。）

所以我需要的可能被称为*用户模式递归互斥锁，当放在 Windows 上的共享内存中时，它适用于多个进程*（请注意，只有锁定部分需要保存，我可以忍受限制/附加要求初始化）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:50:04.173

共享内存是当前的热门话题，

试试 boost::InterProcess - 它提供了可以使用的机制并利用了 x-platform 的通用代码。

[http://www.boost.org/doc/libs/1_52_0/doc/html/interprocess/sharedmemorybetweenprocesses.html](http://www.boost.org/doc/libs/1_52_0/doc/html/interprocess/sharedmemorybetweenprocesses.html)

另一个原因是该库提供了同步机制和其他 IPC 机制，这些机制在未来可能会有用。

[http://www.boost.org/doc/libs/1_52_0/doc/html/interprocess/synchronization_mechanisms.html](http://www.boost.org/doc/libs/1_52_0/doc/html/interprocess/synchronization_mechanisms.html)

作为参考，该事物也将 Atomic OPs 用于互斥锁：

[http://www.boost.org/doc/libs/1_52_0/boost/interprocess/sync/spin/mutex.hpp](http://www.boost.org/doc/libs/1_52_0/boost/interprocess/sync/spin/mutex.hpp)

```
inline void spin_mutex::lock(void)
{
   do{
      boost::uint32_t prev_s = ipcdetail::atomic_cas32(const_cast<boost::uint32_t*>(&m_s), 1, 0);

      if (m_s == 1 && prev_s == 0){
            break;
      }
      // relinquish current timeslice
      ipcdetail::thread_yield();
   }while (true);
} 
```

**同样从“下面的聊天”中查看这篇文章的最佳答案： [Boost's scoped mutex and WinAPi's critical section之间有区别吗？](https://stackoverflow.com/questions/877577/is-there-a-difference-between-boosts-scoped-mutex-and-winapis-critical-section)**

# android-layout - Android XML：TextView 的简单底部边框

> ID：13532193
> 
> 赞同：0
> 
> 时间：2012-11-23T15:46:31.577
> 
> 标签：android-layout

我已经多次扫描互联网只是为了找到导致设置复杂的帖子。

解决此问题的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T03:18:32.767

简单易行。

创建一个九个补丁drawable。幸运的是，我为你准备了一些东西：

![底部边框作为 Android 布局的九个补丁](../Images/dc546f8f3cf600cfa05c4c0e05b31f9d.png)

保存该图像。如果您不了解该图像应用了哪些概念（我的意思是，侧面那些小黑条背后的原因），您应该了解[九个补丁可绘制对象。](http://wiresareobsolete.com/wordpress/2010/06/9-patches/)

将此图像另存为以`.9.png`. 请注意 point-9-point-png 扩展名。假设您将其另存为`grey_border_inset_bottom.9.png`. 然后，转到您的`TextView`并设置：

```
android:background="@drawable/grey_border_inset_bottom" 
```

完毕。底部边框。

# c# - 如何检索设备独有的值？

> ID：13532199
> 
> 赞同：0
> 
> 时间：2012-11-23T15:46:49.297
> 
> 标签：c#, windows-8, windows-store-apps

> **可能重复：**
> [获取唯一的机器 ID](https://stackoverflow.com/questions/2004666/get-unique-machine-id)

我想检索设备（平板电脑、笔记本电脑或台式电脑）独有的值。有人知道如何获得这样的价值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:49:54.663

您最好的选择可能是检索 MAC 地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:32:16.400

最接近的是[ASHWID](http://msdn.microsoft.com/en-us/library/windows/apps/jj553431.aspx)。但是，该值可能因硬件配置而异，因此您可能必须解析 ASHWID 以获得各种容差级别。例如，如果设备添加了新驱动器，是否是同一设备？可能是的，但是 ASHWID 的一个组成部分会改变。

# development-environment - 安装 ORYX Editor developmentEnvironment 的问题

> ID：13532208
> 
> 赞同：1
> 
> 时间：2012-11-23T15:47:25.070
> 
> 标签：development-environment

我正在进行一个研究项目以开发 oryx 开发环境的一些扩展，但是，我无法在我的机器（Windows）上运行 oryx，我已按照此 wiki [http://code.google.com/中的安装指南进行操作p/oryx-editor/wiki/SetupDevelopmentEnvironment](http://code.google.com/p/oryx-editor/wiki/SetupDevelopmentEnvironment)。但是似乎缺少一些东西，当我尝试从 tomcat 访问 oryx 时，它说源不可用，我已经更新了 build.xml 和 build。具有所需信息的属性，但没有运气。我有一个担心，我不确定是否是哪个python问题的原因，无论我安装它并重新安装它多少次，它都不会出现在PostgreSQL安装向导的语言中。

感谢有人可以帮助我。

谢谢瓦达

# iphone - 写入 CSV 文件时处理回车的问题

> ID：13532212
> 
> 赞同：0
> 
> 时间：2012-11-23T15:47:40.087
> 
> 标签：iphone, objective-c, ios

我需要将数组中的 NSStrings 保存到我的文档目录中的 .csv 文件中，这不是问题，但我不知道如何处理回车。我指定我想每 8 次应用回车细胞，这会正确发生。但是，在编写实际的 CSV 文件时，回车后会添加一个多余的逗号！这是有罪的行：

```
NSString *ArrayConvertedIntoStringFINAL = [FinalStringsArrayWithCarriageReturns componentsJoinedByString:@","]; 
```

如何告诉编译器在回车后不要使用逗号？

这是完整的代码。多谢你们！

```
//Add a Carriage Return symbol every N objects (every FREQUENCY)
int FREQUENCY = 8;

//Define String WithCarriageReturns
NSMutableArray *FinalStringsArrayWithCarriageReturns = [[NSMutableArray alloc] initWithCapacity:0];

for (int i = 1; i <= [FinalStringsArray count]; i++)
{
    NSString *readValue = [FinalStringsArray objectAtIndex:i-1];
    //Add objects to the final string
    [FinalStringsArrayWithCarriageReturns addObject:readValue];

    if ( (i % FREQUENCY) == 0) //Number is multiple of N
    {
        //Every multiple of N add the Carriage Return symbol
        [FinalStringsArrayWithCarriageReturns addObject:CarriageReturn];
    }
}
NSLog(@"+2+Broken down array strings: %@",FinalStringsArrayWithCarriageReturns);

//PROBLEM! A comma is added after the Carriage Return

//Convert Array into String
NSString *ArrayConvertedIntoStringFINAL = [FinalStringsArrayWithCarriageReturns componentsJoinedByString:@","]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:53:08.537

您发布的方法会导致每个字符串有 2 个额外的副本。这是很多浪费的内存。这是一种更简单的方法，只需要一个额外的副本，不需要额外的数组：

```
int FREQUENCY = 8;

NSMutableString *csv = [NSMutableString string];

NSUInteger count = FinalStringsArray.count;
for (int i = 1; i <= count; i++) {
    NSString *readValue = FinalStringsArray[i - 1];

    // TODO - deal with possibility of 'readValue' containing a comma or carriage return
    [csv appendString:readValue];

    if ((i % FREQUENCY) == 0) { //Number is multiple of N
        [csv appendString:CarriageReturn];
    } else {
        [csv appendString:@","];
    }
} 
```

根据您需要写入的数据量，直接写入文件而不是可变字符串会更好。这将导致没有额外的数据副本，并且比首先写入可变字符串更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:01:47.620

你可以使用 `[NSString *ArrayConvertedIntoStringFINAL = [[FinalStringsArrayWithCarriageReturns componentsJoinedByString:@","] stringByReplacingOccurrencesOfString:CarriageReturn+@"," withString:CarriageReturn`];

但这将是一个*非常*肮脏的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T16:09:23.397

我不会使用自动包含“，”。

像这样的东西会起作用：

```
if (i % FREQUENCY > 0) {
  //add cell + comma to string end
} else {
  //add cell + carriage return \r\n
} 
```

变通方法丑陋：如果您需要使用当前命令/程序结构（将在每个字段之后放置一个逗号，包括最后一个），只需进行最少的修改，解决方法是保存一个中间 CSV，重新打开它并删除每个最后一个字符（在每一行的回车 \r\n 之前），然后将其保存到最终的 CSV。丑陋！！！

# android - 在没有权限的情况下通过 Android 中的蓝牙发送数据

> ID：13532213
> 
> 赞同：-3
> 
> 时间：2012-11-23T15:47:40.013
> 
> 标签：android, bluetooth

我想在没有权限的情况下通过蓝牙发送一个小于 1 KB 的字符串。有没有办法在Android中这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T18:01:36.757

要使用蓝牙发送一些数据，请使用 BluetoothSocket/BluetoothServerSocket，这些需要“android.permission.BLUETOOTH”。

我不知道解决这个问题的方法，正如 commonsware 所说，这是一件好事。用蓝牙做几乎任何事情都需要这个权限，有些操作需要蓝牙管理员权限。

# jquery - Internet Explorer 使用 jQuery 验证插件在页面加载时显示电子邮件错误标签

> ID：13532214
> 
> 赞同：0
> 
> 时间：2012-11-23T15:47:42.083
> 
> 标签：jquery, internet-explorer, jquery-validate, email-validation

我在使用 jQuery Validation 插件和 Internet Explorer 时遇到问题。基本上，在页面加载时会显示“请输入有效的电子邮件地址”错误消息，尽管所有验证都正常工作，但在用户输入任何数据之前出现是相当难看的。

如果我删除电子邮件类并只填写必填字段没有问题，但我希望它验证电子邮件地址。

我在 IE7/8/9 中遇到了这个问题

这是我的代码：

```
//Form Validation
    $(document).ready(function(){
        $("#rsvpForm").validate({
           rules: {
             // simple rule, converted to {required:true}
             attendance: "required",
             firstname_main: "required",
             lastname_main: "required",

             // compound rule
             email: {
               required: true,
               email: true
             },
             total_guests: {
              required: "#attendance:checked"
            },
             firstname_partner: {
              required: function(element) {
                return $("input:radio[name='total_guests']:checked").val() == '2' || $("input:radio[name='total_guests']:checked").val() == '3' || $("input:radio[name='total_guests']:checked").val() == '4'
              }
            },

             lastname_partner: {
              required: function(element) {
                return $("input:radio[name='total_guests']:checked").val() == '2' || $("input:radio[name='total_guests']:checked").val() == '3' || $("input:radio[name='total_guests']:checked").val() == '4'
              }
            },
             firstname_child1: {
              required: function(element) {
                return $("input:radio[name='total_guests']:checked").val() == '3' || $("input:radio[name='total_guests']:checked").val() == '4'
              }
            },
             lastname_child1: {
              required: function(element) {
                return $("input:radio[name='total_guests']:checked").val() == '3' || $("input:radio[name='total_guests']:checked").val() == '4'
              }
            },
             firstname_child2: {
              required: function(element) {
                return $("input:radio[name='total_guests']:checked").val() == '4'
              }
            },
             lastname_child2: {
              required: function(element) {
                return $("input:radio[name='total_guests']:checked").val() == '4'
              }
            },
           }
        });

        jQuery.extend(jQuery.validator.messages, {
            required: 'Required',
        });
      });
// Submit Handler
$(document).ready(function() { 
        $('#rsvpForm').ajaxForm({ 
            target:     '#content', 
            url:        'components/process-form-data.php' 

        }); 
    }); 
```

这些是我的标题链接：

```
 <script src="http://code.jquery.com/jquery-1.8.3.min.js" type="text/javascript"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/jquery.validate.min.js"></script>
<script src="http://malsup.github.com/jquery.form.js"></script> 
<script type="text/javascript" src="../javascript.js"></script> 
```

表单 HTML：

```
<form method="post" action="components/process-form-data.php" id="rsvpForm">
            <fieldset>
                <label for="attendance">Will you be attending the wedding? <em>*</em></label>
                <div class="radioBtns">
                <input class="signUp" type="radio" value="Yes" name="attendance" id="attendance" />
                <label class="signUp">Yes</label>

                <input class="signUp" type="radio" value="No" name="attendance" />
                <label class="signUp">No</label>
                </div>
            </fieldset>
            <h2>Main Guest</h2>
            <fieldset>
                <label for="firstname_main" class="standard">First name<em>*</em> :</label>

                <input type="text" name="firstname_main" id="firstname_main" placeholder="First name" />             
            </fieldset>             
            <fieldset>
                <label for="lastname_main" class="standard">Last name<em>*</em> :</label>
                <input type="text" name="lastname_main" id="lastname_main" placeholder="Last name" />
            </fieldset>
            <fieldset>
                <label for="email" class="standard">Email<em>*</em> :</label>
                <input type="text" name="email" id="email" placeholder="Email" />
            </fieldset>
            <div id="guests">   
            <fieldset class="wideField">
                <label for="total_guests">Will you be bringing a partner and/or young children? <em>*</em></label>
                <div class="radioBtns">
                <input class="signUp" type="radio" value="1" name="total_guests" id="total_guests" />
                <label class="signUp">No</label>
                <input class="signUp" type="radio" value="2" name="total_guests" />
                <label class="signUp">Just Partner</label>
                <input class="signUp" type="radio" value="3" name="total_guests" />
                <label class="signUp">Partner + 1 young child</label>
                <input class="signUp" type="radio" value="4" name="total_guests" />
                <label class="signUp">Partner + 2 young children</label>
                </div>
            </fieldset>
            </div>
            <div id="partnerDetails" style="display:none;">
            <h2>Partner Details</h2>
            <fieldset>
                <label for="firstname_partner" class="standard">First name<em>*</em> :</label>

                <input type="text" name="firstname_partner" id="firstname_partner" placeholder="First name" />             
            </fieldset>             
            <fieldset>
                <label for="lastname_partner" class="standard">Last name<em>*</em> :</label>
                <input type="text" name="lastname_partner" id="lastname_partner" placeholder="Last name" />
            </fieldset>
            </div>
            <div id="childDetails" style="display:none;">
            <h2>Child Details</h2>
            <fieldset>
                <label for="firstname_child1" class="standard">First name<em>*</em> :</label>

                <input type="text" name="firstname_child1" id="firstname_child1" placeholder="First name" />             
            </fieldset>             
            <fieldset>
                <label for="lastname_child1" class="standard">Last name<em>*</em> :</label>
                <input type="text" name="lastname_child1" id="lastname_child1" placeholder="Last name" />
            </fieldset>
            </div>
            <div id="secondChildDetails" style="display:none;">
            <fieldset>
                <label for="firstname_child2" class="standard">First name<em>*</em> :</label>

                <input type="text" name="firstname_child2" id="firstname_child2" placeholder="First name" />             
            </fieldset>             
            <fieldset>
                <label for="lastname_child2" class="standard">Last name<em>*</em> :</label>
                <input type="text" name="lastname_child2" id="lastname_child2" placeholder="Last name" />
            </fieldset>
            </div>
            <div id="diet">
            <fieldset class="wideField">
                <label for="dietaryRequirements">Do any of your guests have special dietary requirements :</label>
                <textarea cols="55" rows="8" name="dietaryRequirements" id="dietaryRequirements"></textarea>
            </fieldset>
            </div>
            <input id="submit_btn" input="" type="submit" value="Submit RSVP" class="btn" />            
        </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T09:04:50.350

我刚刚在 IE8 中尝试了您的表单，没有问题。如果您在 IE7/9 的初始页面加载中看到电子邮件字段错误消息，请尝试使用以前版本的插件： [http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min。 js](http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T11:48:42.457

感谢您的回复，但这似乎没有帮助，但我认为我已经隔离了问题。

我的页面中还有一些代码用于填充 IE 中的占位符文本。当我使用“电子邮件”作为占位符文本时，验证正在触发。

```
<script type="text/javascript">
        /* <![CDATA[ */
        $(function() {
            var input = document.createElement("input");
            if(('placeholder' in input)==false) { 
                $('[placeholder]').focus(function() {
                    var i = $(this);
                    if(i.val() == i.attr('placeholder')) {
                        i.val('').removeClass('placeholder');
                        if(i.hasClass('password')) {
                            i.removeClass('password');
                            this.type='password';
                        }           
                    }
                }).blur(function() {
                    var i = $(this);    
                    if(i.val() == '' || i.val() == i.attr('placeholder')) {
                        if(this.type=='password') {
                            i.addClass('password');
                            this.type='text';
                        }
                        i.addClass('placeholder').val(i.attr('placeholder'));
                    }
                }).blur().parents('form').submit(function() {
                    $(this).find('[placeholder]').each(function() {
                        var i = $(this);
                        if(i.val() == i.attr('placeholder'))
                            i.val('');
                    })
                });
            }
        });
        /* ]]> */
</script> 
```

关于如何解决这个问题的任何建议？

# php - PHP，如何一次定义多个属性？

> ID：13532224
> 
> 赞同：-1
> 
> 时间：2012-11-23T15:48:05.350
> 
> 标签：php, oop

我正在寻找创建一个类来从雅虎数据源中提取信息。雅虎很好地提供了以下数据图：

[http://code.google.com/p/yahoo-finance-managed/wiki/enumQuoteProperty](http://code.google.com/p/yahoo-finance-managed/wiki/enumQuoteProperty)

我想创建一个允许我引用属性名称并显示代码的类。实现此目的的适当方法是什么？

我正在考虑在我的数据模型类中创建一个公共函数并在其中创建一个关联数组。这是最佳实践吗？我想我正在寻找相当于 C++ 结构的 PHP。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:52:30.373

最接近结构的东西是 php 对象。

[http://www.php.net/manual/en/language.types.object.php](http://www.php.net/manual/en/language.types.object.php)

使用对象只需创建一些成员变量。

如果您不想要大量成员变量，只需创建一个成员变量（数组）并使用魔术方法 __get($k) 和 __set($k, $v)。

```
class foo {
    protected $vars = array();

    public function __get($k) {
        if (isset($this->vars[$k]))
            return $this->vars[$k];
    }

    public function __set($k, $v) {
        return $this->vars[$k] = $v;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:04:49.337

在我看来，无论数量多少，类常量仍然是更好的方法。

```
class MyClass {
    const AfterHoursChangeRealtime = 'c8';
    const AnnualizedGain = 'g3';
    //[...]
} 
```

但是，如果您想避免声明大量常量或简单地使用更好的访问方式，则可以将静态 var 与数组一起使用。

作为静态它是一个类变量，并且将消耗更少的内存并具有更快的访问速度，因为它不会在每个对象上复制它的值。

```
class MyClass {
    static $enum = array(
        'AfterHoursChangeRealtime' => 'c8',
        'AnnualizedGain' => 'g3'
    );
    //[...]
} 
```

# wpf - 如果用户具有非写权限，如何写文件

> ID：13532227
> 
> 赞同：4
> 
> 时间：2012-11-23T15:48:21.980
> 
> 标签：wpf, file, c#-4.0, permissions

嗨，我有一个创建/写入日志文件的应用程序（稍后它将写入一个错误日志），但目前我坚持权限问题，因为如果用户无权在我的应用程序所在的文件夹中创建文件它抛出一个异常

现在我的问题是如何获得独立（来自用户）为这个应用程序创建和编写权限

我读[了这个](https://stackoverflow.com/questions/7006523/programmatically-adding-write-permissions-to-files-in-wpf)，但它没有帮助，因为客户将无法授予该权限（他们没有被授权），但我的应用程序需要该权限

您的帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T08:50:58.400

将程序二进制文件与其数据分开是一个常见的概念（我什至会说，这是一种最佳实践）。

例如，所有 Windows 应用程序都位于 下`Program files`，但将其数据写入用户的`%APPDATA%`个人数据或`%ProgramData%`共享数据下。您**应该**遵循本指南，除非您的程序有非常具体的要求。

根据数据的种类，特别是希望用户快速找到数据时，还可以在用户的​​文件夹下创建一个子文件夹。

使用 C#，您将能够使用[Environment.GetFolderPath Method轻松找到这个](http://msdn.microsoft.com/library/dd783871.aspx)*特殊文件夹*。例如：

```
public string GetDataFolder()
{
    var appDataPath = Environment.GetFolderPath(
        Environment.SpecialFolder.ApplicationData, // Search under %APPDATA%
        Environment.SpecialFolderOption.Create // Create the folder if it does not exists
    );
    var dataFolder = Path.Combine(
        appDataPath,
        "MyApplication"
    );
    return dataFolder;
} 
```

如果您查看[Environment.SpecialFolderOption Enumeration](http://msdn.microsoft.com/library/system.environment.specialfolderoption.aspx)，您会发现大部分常见的地方都很容易找到。

正如您所说，数据将由所有用户共享，您应该专门针对`%ProgramData%`，使用以下命令找到`Environment.SpecialFolder.CommonApplicationData`：

> 用作所有用户使用的特定于应用程序的数据的公共存储库的目录。

最终，此文件夹将被解析为 (使用默认设置) `C:\Programdata\MyApplication`。

# java - 如何将子列表中的值设置为父列表

> ID：13532230
> 
> 赞同：2
> 
> 时间：2012-11-23T15:48:36.597
> 
> 标签：java

Java中的继承。是否可以这样做：

```
List<ParentEntity> loc = Locations, 
```

`Locations`在哪里`List<ChildEntity>`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T15:49:52.833

**不，你不能那样**做。泛型中不允许多态。

但是你可以这样做： -

```
List<? extends ParentEntity> loc = new ArrayList<ChildEntity>(); 
```

哦，是的，您将无法在该分配之后将任何新项目添加到您的列表中，除了`null`. 这是你必须忍受的限制。

因此，您可以先创建您的`ArrayList<ChildEntity>`，填充它，然后将其分配给`the LHS`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T15:53:09.130

正如@Rohit Jain 所说，他的回答是有限的。

你可以有这样的解决方法：

```
List<ParentEntity> loc = new ArrayList<ParentEntity>()
loc.addAll(locations); 
```

这一次，限制是您丢失了 List 实现的初始类型。而且，更重要的是，对 loc 的任何修改都不会在位置上看到。

# c - Makefile 问题 - 阅读器中的致命错误

> ID：13532234
> 
> 赞同：2
> 
> 时间：2012-11-23T15:48:53.783
> 
> 标签：c, gcc, assembly, makefile, sparc

我为学校项目创建的 makefile 存在一些问题。我正在编译和汇编一个 C 文件和一个 SPARC 汇编文件（分别）并链接它们。我在 Unix 环境中工作。这是生成文件：

```
proj09.exe: proj09.driver.o proj09.support.o
<tab>gcc -Wall proj09.driver.o proj09.support.o -o proj09.exe

proj09.driver.o: proj09.driver.c /user/cse320/Projects/project09.support.h
<tab>gcc -Wall -c proj09.driver.c /user/cse320/Projects/project09.support.h

proj09.support.o: proj09.support.s
<tab>gcc -Wall proj09.support.s 
```

但是，当我尝试做到这一点时，我收到了一个阅读器错误，特别是：

“阅读器中的致命错误：proj09.makefile，第 2 行：看到意外的行尾”

现在我知道这通常意味着某些东西的格式不正确，但我不知道在这种情况下它可能是什么。此外，我不是 100% 确定这是生成文件的正确代码（特别是我的 support.s 文件的组装，以及两个文件的链接）。如果这是一个重复的问题，我深表歉意，我事先浏览了档案，找不到任何有用的东西。任何帮助将不胜感激！

编辑：我不明白为什么这会有所作为，但我使用 gedit 实际编写代码，然后将文件传输到 SSH 进行链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:00:11.660

正如 Joachim 告诉你的那样，这些行应该按制表符缩进，而不是空格，所以第二行应该如下所示：

```
[TAB]gcc -Wall proj09.driver.o proj09.support.o -o proj09.exe[NEWLINE] 
```

其中 [TAB] 表示 TAB 字符。

命令后也不应该有任何空格。这就是我放置 [NEWLINE] 字符的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:03:05.143

除了空格和制表符之外，这不会生成目标文件，甚至不应该编译（除非它有`main()`）：

```
gcc -Wall proj09.support.s 
```

你也应该`-c`在这里使用：

```
gcc -Wall -c proj09.support.s 
```

注意：如果您在 Unix/Linux 上工作，请丢失`.exe`

# sql-server-2008 - 在 SQL Server 中比较 iif() 中的日期

> ID：13532239
> 
> 赞同：1
> 
> 时间：2012-11-23T15:49:04.617
> 
> 标签：sql-server-2008

我正在尝试在 SQL Server 中使用以下查询

```
SELECT [AL].[Subscriptions].Id,
       [AL].[Subscriptions].name,
       [AL].[Subscriptions].description,
       [AL].[Subscriptions].price,
       [AL].[Subscriptions].iconFileName,
       IIf(a.expiryDate > Now(), 'TRUE', 'FALSE') AS isSubsByUser
FROM   [AL].[Subscriptions]
       LEFT JOIN (SELECT *
                  FROM   [AL].[UserSubscriptions]
                  WHERE  userId = 13259) AS a
         ON Subscriptions.Id = a.itemid; 
```

但总是得到错误

> *函数参数列表中的错误：“>”无法识别。无法解析查询文本。*

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T18:44:30.873

就像马丁史密斯说的，你需要使用案例陈述。此外，您似乎只在派生表中使用了几个字段，因此我建议不要使用 *. 我在下面举了一个例子。

```
 SELECT [AL].[Subscriptions].Id,
        [AL].[Subscriptions].name,
        [AL].[Subscriptions].description,
        [AL].[Subscriptions].price,
        [AL].[Subscriptions].iconFileName,
        case when a.expiryDate > GetDate() then 'TRUE' else 'FALSE' end AS isSubsByUser
   FROM   [AL].[Subscriptions]
   LEFT JOIN (SELECT expiryDate, itemid 
              FROM   [AL].[UserSubscriptions]
              WHERE  userId = 13259) AS a
     ON Subscriptions.Id = a.itemid; 
```

# ajax - 仅在以下情况下加载 Google 地图被点击

> ID：13532240
> 
> 赞同：3
> 
> 时间：2012-11-23T15:49:05.223
> 
> 标签：ajax, google-maps-api-3

单击页脚中的链接时，我想加载谷歌地图。但是，我只想在单击此链接时加载它，我不希望它缓慢加载主要内容的时间，以防用户不希望看到地图。关于如何仅在单击链接时加载谷歌地图的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:46:25.167

You can inject `<script>` to the `document` to load Google Maps when `<a>` is clicked. Add a parameter `callback` to the URL and Google Maps will will call the Javascript function after loading :

```
<script src='https://maps.googleapis.com/maps/api/js?sensor=false&callback=initialize'>
</script> 
```

# javascript - 使用 jquery 鼠标无法在正文中移动时出错？

> ID：13532241
> 
> 赞同：0
> 
> 时间：2012-11-23T15:49:06.577
> 
> 标签：javascript, jquery

我在[这里尝试这个演示](http://jsfiddle.net/Fxk52/2/)

在 HTML 中：

```
...
    <body>
       <div id="button-wrapper" style="position: absolute; opacity: 1; width: 27px; height: 20px;">
          <input type="submit" value="submit">
       </div>
    </body> 
... 
```

在 jQuery 中：

```
$(document).ready(function(){
   $("#button-wrapper").parent().mousemove(function(e) {
       jQuery("#button-wrapper").css({
           top : e.pageY - 10,
           left : e.pageX + 30
       });
   });
}); 
```

当我在 body 上移动鼠标时发生错误。提交按钮无法在鼠标移动事件上运行。我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T15:51:37.797

试试这个：

```
$(function(){
    $(document).on('mousemove',function(e) {
        $("#button-wrapper").css({
            top : e.pageY - 10,
            left : e.pageX + 30
        });
    });
}); 
```

你应该首先使用 all`$(document)`因为你正在尝试选择`parent()`你的 div ，`body`它本身很容易`the document`。然后`on()`用于实时 DOM 解释。

然后把它翻译`jQuery("#button-wrapper")`成`$("#button-wrapper")`只是因为如果你使用一个，就不要使用另一个。

也将`$(document).ready(function(){});`部分翻译成`$(function(){});`.

# jquery - ie6-8中的jQuery动画问题

> ID：13532243
> 
> 赞同：0
> 
> 时间：2012-11-23T15:49:22.527
> 
> 标签：jquery, internet-explorer, animation, jquery-animate, margin

我有以下[jsfildde](http://jsfiddle.net/cLy8s/4/)。

我得到了以下问题：

1.  ie6 & ie7：动画由于某种原因正在弹跳，并且 上部元素之间存在**UNEEDED/UNWANTED**边距。`#awards`（比较其他浏览器之间的差异，例如：chrome）。

2.  ie8：marginTop 动画不起作用，我测试了一段时间，发现是背景变化导致了问题（查看 jsfiddle 中的注释，在 JavaScript 区域）。

我会感谢你的帮助。
谢谢。

**编辑：** 我在[其他网站](http://www.inventpartners.com/ie8_margin_top_bug)上发现了与我类似的问题，这将有助于更好地解释我的问题。- 没有任何解决方案有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:11:08.927

根据我找到的另一个网站，我认为边距崩溃了，为了解决 ie8 中的问题，改用了填充。

为了解决 ie6-7 中的问题，我使用了 micro-clearfix：

```
.clear:before, .clear:after{content:"";display:table;}
.clear:after{clear:both;}
.clear{zoom:1;} 
```

并正确放置。

# php - CakePHP 2.2 MSSQL / PDO 替代品？

> ID：13532244
> 
> 赞同：2
> 
> 时间：2012-11-23T15:49:24.117
> 
> 标签：php, cakephp, pdo

我们有一个 CakePHP 1.3 应用程序，我们正在升级到 2.2.3。我们的应用程序的要求之一是能够查询到单独应用程序的 MSSQL 数据库以进行一些身份验证并提取用户数据。

在浪费了两天的时间研究和骚扰我们的虚拟主机以安装 PHP / PDO / MSSQL 库（我们已经有用于 MySQL、sqlite 和 sqlite 2 的 PDO）之后，它看起来非常严峻。

**TL;DR：我们需要找到一种在 Linux 下进行 PDO MSSQL 查询的方法。**

*开始咆哮：*

让我发疯的事情是：**CakePHP 开发人员破坏了 MSSQL 兼容性，以便使用 PDO 制作他们所有的 DB 包装器**。如果您在 Linux 服务器上有一个 1.3 的应用程序，该应用程序正在愉快地连接到 MSSQL 数据库并想要将其升级到 2.2，那么您将无法再连接到该数据库，因为显然使用 PDO 比确保您不使用 PDO 更重要破坏用户的现有功能。

**CakePHP 2.x 文档不会警告用户这个陷阱，他们只是说你需要 PDO。**

应该注意 PDO/MSSQL 不能在 Linux 下工作，或者**应该有替代 CakePHP 提供的 Sqlserver.php 数据源，这样升级他们的应用程序的人就有机会在 2.2x 下让他们的应用程序再次运行**

我现在真的很生气，因为我浪费了一周的时间将东西从 1.3 移植到 2.2，现在看起来我要么必须手动编写查询并忽略 CakePHP 的出色数据库抽象，要么我需要转换我所有的工作回到 1.3 并放弃最新版本 CakePHP 中的所有新改进。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T15:53:15.110

诀窍是：

```
sudo apt-get install php5-sybase 
```

由于某种原因，扩展名不被称为 mssql

sybase 对我来说很好用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T03:25:22.840

您需要做的是安装 Microsoft 的 ODBC 驱动程序并设置 odbc 连接字符串。这个过程可能有点棘手，但它确实有效，并且驱动程序很稳定。

然后您可以使用 $dbh = new PDO("odbc:CONNECTIONNAME", $user, $password); 通过 PDO 连接。

排序后，我认为您仍然可以使用 MSSQL 数据源，但需要修改连接字符串。

# iphone - 在 Safari 上读取 3gp 文件

> ID：13532247
> 
> 赞同：1
> 
> 时间：2012-11-23T15:49:34.073
> 
> 标签：iphone, safari, 3gp

首先，对不起，如果我的英语不是很好，我会尽力而为:)

如标题所述，我想在 iPhone 上的 Safari 中阅读 3gp 文件。

首先，我的机器上有一个文件，还有一个带有链接的小测试页，该链接指向该文件。当我点击链接时，它可以工作，Safari 允许阅读视频。

我真正想做的是从邮件文件的一部分动态构建文件。当我使用这种方法时，Safari 不想读取文件。我有一个黑屏，箭头读数被禁止。

我认为响应标头可能会有所不同，但我不知道是什么导致了这种行为。

不同的标题是：

`无/缓存控制：私人

没有/内容处置：附件；文件名="IMG_1925.3gp"

什么都没有/内容传输编码：二进制

内容类型：文本/纯文本/内容类型：应用程序/八位字节流

ETag：W/“91103-1353574396000”/没有

最后修改时间：周四，2012 年 11 月 22 日 08:53:16 GMT / 没有任何内容 / 过期时间：周四，1970 年 1 月 1 日 00:00:00 GMT 没有 / Pragma:No-cache`

您是否会在 Safari 上引发这种行为？如果您认为这不是标题问题，那会是什么？

非常感谢您的回答，佩林

编辑：另一个问题：当我尝试在文本文件中使用我的小链接访问文件时，它可以在 iPhone 上运行，但在 android 上不可用....我该怎么做才能让某些东西在 iPhone 和 Android 上运行? 请帮忙！！

# asp.net - IIS 7，三个绑定，我如何为它们做三个缓存？

> ID：13532249
> 
> 赞同：2
> 
> 时间：2012-11-23T15:49:36.927
> 
> 标签：asp.net, asp.net-mvc, iis, iis-7

关于IIS7设置的问题。我如何为每个绑定做一个缓存？例如，我有一个站点和该站点的三个绑定。我需要为三个绑定中的每一个创建三个不同的缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:47:47.920

用作`Request.Host`缓存键的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T20:00:05.013

如果您手动读取和写入缓存，则 usr 的答案是正确的。但是，您对使用 OutputCacheAttribute 的缓存键的直接控制较少。

请注意，`OutputCacheAttribute`在其实现中仍然依赖于缓存键。在 ASP.NET 中，缓存的每个项目都分配有一个键，通过该键进行查找。

当您调用具有 的 Controller Action 时，会`OutputCacheAttribute`根据**您的请求生成缓存键**；例如，如果您有一些`VaryByParam`指定，则每个用户的缓存键可能不同。然后，您的 Action 返回的响应将存储在该键下的缓存中。

当下一个请求进来时，缓存键被生成，我们检查缓存以查看该键下是否已经缓存了一些东西。如果是这样，我们就返回它；否则，我们继续操作。

**通过在缓存键中包含主机名，我们可以为每个绑定设置不同的缓存。**如果您使用的是 OutputCacheAttribute，则可以覆盖它以允许按主机更改缓存：

```
public override string GetVaryByCustomString(HttpContext context, string customVary)
{
    if(customVary == "Host")
    {
        return context.Request.Url.Host;
    }
    // other behaviors here if necessary
    return "";
} 
```

这将允许动态修改缓存键以包含访问站点的主机名。这意味着如果您有三个不同的绑定，您将拥有三个不同的缓存键（假设没有其他可变参数）。

以下是修改控制器操作的方法：

```
[MyOutputCache(VaryByParam = "None", VaryByCustom = "Host", Duration = 7200)]
public ActionResult Index()
{
    // ...
    return View();
} 
```

请注意**包含`VaryByCustom = "Host"`，然后您的重写 OutputCacheAttribute 的`GetVaryByCustomString()`方法可以看到它，因此包含在使用的缓存键**中。

# javascript - 在 JavaScript 中处理前导零的主键？

> ID：13532250
> 
> 赞同：0
> 
> 时间：2012-11-23T15:49:37.037
> 
> 标签：javascript, primary-key, javascript-objects

我正在构建一个基于表的数据可视化，其主键最多包含 4 个整数。例子：

```
5
015
1234 
```

在整个应用程序中，我需要为这些实体使用密钥约定，并且我正在考虑我的选择。我担心的是，如果开发人员没有对 Type 给予足够的关注，那么前导零/es 将被删除，并且在执行查找等时会出现错误：

```
regions["15"];

regions : {
  "015" : {name: "ABC", ...}
} 
```

你觉得我应该怎么处理？
如何在不设置障碍的同时防止错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T15:56:04.317

你有两个问题：第一，由于十进制转换导致前导零丢失，第二，前导零向javascript表明你正在处理一个不小心转换的八进制数（例如`parseInt`没有基数）。

避免任何问题的最简单方法实际上是在您的键上提供另一个前缀字符，下划线、字母或任何其他字符。在您的 API 中，您可以删除您选择的这些，同时需要高级访问器的前缀字符。

通过要求开发人员输入前缀字符，您可以确保您始终获得一个字符串，并且他们将他们的 4 字符数字字符串构建为字符串。

另一种选择是在您的访问功能中专门键入检查，但如果您通过`[]`此方法提供本机密钥访问，则不是一种选择（直到未来的 javascript 版本提供`Object.observe`支持）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:58:34.590

这是一个艰难的决定，这两个方向都有利弊。

如果将数据存储为`object`，则前导零没有问题代码问题。

另一方面，如果您尝试访问数据作为`array`然后前导零将被剥离。不注意的编码人员很容易犯错误并以错误的方式访问数据。不幸的是，错误可能在任何一个方向上发生。这两种选择都不是灵丹妙药。

上次我遇到这种情况时，我决定在所有键前面加上一个常量字符，以提醒其他编码人员这些是`string`键，而不是`numeric`键，如下所示：

```
regions : {
  "R015" : {name: "ABC", ...}
} 
```

您甚至可以设置一个模块并定义自己的 getter 和 setter 以根据需要添加/删除常量。

# javascript - 是否有将文本区域内容复制到剪贴板的（跨浏览器）解决方案

> ID：13532255
> 
> 赞同：0
> 
> 时间：2012-11-23T15:50:04.727
> 
> 标签：javascript

我想要一个使用 Javascript 将 TEXTAREA 的内容复制到剪贴板的“复制”按钮，但我设法找到的唯一解决方案是使用 Flash 的解决方案，我不想这样做（[jQuery 剪贴板](http://archive.plugins.jquery.com/project/clipboard)）。

用户将从我网站的 textarea 中复制一些代码到 HTML 编辑器（通过剪贴板），因此我也不能使用任何优雅的隐藏 DIV，因为编辑器无法访问它们。

有谁知道这是否可能？

[编辑：我看过[这个解决方案](https://stackoverflow.com/users/1401975/hamza-dzcyberdev)，它使用了我不想要的 Flash]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:01:56.733

为什么您提到的解决方案（以及其他几个）使用 Flash？
因为出于安全原因，某些浏览器（例如 Firefox）会限制对剪贴板的访问。
将东西放在剪贴板上应该是相对安全的，但能够读取剪贴板可能是危险的（例如，如果您复制了信用卡号码......）。

Firefox 有一个特定的 API 来启用此类操作，但它需要用户操作 (IIRC)，这使得它不太实用。

Flash 没有这个安全问题，所以很多网站都使用这个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:02:42.923

出于安全原因，无法直接访问用户的剪贴板。Flash 解决方案是一种解决方法。

[在这里](https://stackoverflow.com/a/6055620/1211782)可以看到另一种可能性。它基本上提示用户手动复制文本。

# php - PHP中的浏览器缓存控制系统

> ID：13532260
> 
> 赞同：0
> 
> 时间：2012-11-23T15:50:18.783
> 
> 标签：php, http-headers, browser-cache, http-status-code-304

我正在尝试构建一个用 PHP 编写的浏览器缓存控制系统。

更深入地讲，我想使用 Php 为每个浏览器请求提供服务，以生成正确的 HTTP 响应标头并在正确的时间生成***HTTP 200***或未***修改的 HTTP 304***。

最大的问题是：我如何委托 PHP 来检查资源是 HTTP 200 还是 HTTP 304？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:02:54.063

下面是一些用于管理使用 PHP 提供的页面的浏览器缓存的示例代码。您需要确定一个时间戳，该时间戳`$myContentTimestamp`指示您页面上内容的最后修改时间。

```
// put this line above session_start() to disable PHP's default behaviour of disabling caching if you're using sessions
session_cache_limiter('');

$myContentTimestamp = 123456789; // here, get the last modified time of the content on this page, ex. a DB record or file modification timestamp

// browser will send $_SERVER['HTTP_IF_MODIFIED_SINCE'] if it has a cache of your page
if (isset($_SERVER['HTTP_IF_MODIFIED_SINCE']) && strtotime($_SERVER['HTTP_IF_MODIFIED_SINCE']) >= $myContentTimestamp) {
    // browser's cache is the latest version, so tell the browser there is no newer content and exit
    header('HTTP/1.1 304 Not Modified');
    header('Last-Modified: ' . date("D M j G:i:s T Y", $myContentTimestamp));
    die;
} else {
    // tell the browser the last change date of this page's content
    header('Last-Modified: ' . date("D M j G:i:s T Y", $myContentTimestamp));
    // tell the browser it has to ask if there are any changes whenever it shows this page
    header("Cache-Control: must-revalidate");

    // now show your page
    echo "hello world! This page was last modified on " . date('r', $myContentTimestamp);
} 
```

# vb.net - 测量下载速度

> ID：13532267
> 
> 赞同：0
> 
> 时间：2012-11-23T15:51:25.423
> 
> 标签：vb.net, visual-studio-2010

我正在使用以下内容下载文件：

```
Dim client As WebClient = New WebClient()
client.DownloadFileAsync(New Uri("http://cachefly.cachefly.net/100mb.test"), "C:\Users\Dir\100mb.test") 
```

该文件下载并保存到 中`C://Users/Dir/100mb.test`，但在下载时我想在标签中显示下载速度。我怎样才能做到这一点？我已经阅读了许多教程，但其中大多数都不起作用或已过时。我是vb.net的新手，所以我不能自己写东西，你能给我任何解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:54:31.963

我可以建议一些不同的东西吗？

```
Imports System.Net

Public Class Form1

Private tmp = IO.Path.Combine(My.Computer.FileSystem.SpecialDirectories.Temp, "snafu.fubar")
Private Downloading As Boolean = False

Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click

    If Downloading Then Exit Sub
    Downloading = True

    Dim wc As New WebClient
    AddHandler wc.DownloadProgressChanged, AddressOf wc_ProgressChanged
    AddHandler wc.DownloadFileCompleted, AddressOf wc_DownloadDone

    wc.DownloadFileAsync(New Uri("http://cachefly.cachefly.net/100mb.test"), tmp, Stopwatch.StartNew)

End Sub

Private Sub wc_DownloadDone(sender As Object, e As System.ComponentModel.AsyncCompletedEventArgs)
    Downloading = False
End Sub

Private Sub wc_ProgressChanged(sender As Object, e As DownloadProgressChangedEventArgs)
    Me.Label1.Text = (e.BytesReceived / (DirectCast(e.UserState, Stopwatch).ElapsedMilliseconds / 1000.0#)).ToString("#")
End Sub

End Class 
```

因为通过接收到的最后一个字节块来确定速度是没有意义的，而是您测量字节总数并除以总时间。将秒表实例传递给事件处理程序的优点是它不会“破坏”您的类代码 - 它仅在需要的地方可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:59:06.557

定义全局变量：

```
Dim lastUpdate As DateTime
Dim lastBytes As Long = 0 
```

您需要为进度分配一个事件：

```
Dim client As WebClient = New WebClient()
client.DownloadFileAsync(New Uri("http://cachefly.cachefly.net/100mb.test"), "C:\Users\Dir\100mb.test")
client.DownloadProgressChanged += Function(sender, e) progressChanged(e.BytesReceived) 
```

事件：

```
Private Sub progressChanged(bytes As Long)
    If lastBytes = 0 Then
        lastUpdate = DateTime.Now
        lastBytes = bytes
        Return
    End If

    Dim now = DateTime.Now
    Dim timeSpan = now - lastUpdate
    If Not timeSpan.Seconds = 0
         Dim bytesChange = bytes - lastBytes
         Dim bytesPerSecond = bytesChange / timeSpan.Seconds

         lastBytes = bytes
         lastUpdate = now
    End If
End Sub 
```

你有每秒字节数的计算。

```
label.Text = bytesPerSecond.ToString() + "B/s"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T16:00:35.263

这将同时给你百分比。您可能可以使用 DateTime 从给定开始时间的百分比计算。现在下载的速度：

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Try

    Dim client As WebClient = New WebClient()
    AddHandler client.DownloadProgressChanged, AddressOf ProgChanged
    client.DownloadFileAsync(New Uri("http://cachefly.cachefly.net/100mb.test"), "C:\Users\Dir\100mb.test")

Catch ex As Exception
    MessageBox.Show(ex.Message)
End Try
End Sub

Private Sub ProgChanged(ByVal sender As Object, ByVal e As DownloadProgressChangedEventArgs)
        Dim progressPercentage As Integer = e.ProgressPercentage
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-11T11:02:30.210

试试这个：

*仅在通过后台工作程序下载时尝试此操作*

```
Private Sub worker_DoWork(Byval sender As Object, Byval e As DoWorkEventArgs)

Dim req As WebRequest = WebRequest.Create(downloadUrl) 'Make a request for the url of the file to be downloaded
Dim resp As WebResponse = req.GetResponse 'Ask for the response
Dim fs As New FileStream(path to download to, FileMode.CreateNew) 'Create a new FileStream that writes to the desired download path

Dim buffer(8192) As Byte 'Make a buffer
Dim downloadedsize As Long = 0
Dim downloadedTime As Long = 0

Dim dlSpeed As Long = 0
Dim currentSize As Long = 0 'Size that has been downloaded
Dim totalSize As Long = req.ContentLength 'Total size of the file that has to be downloaded

  Do While currentSize < totalSize
   Dim read As Integer = resp.GetResponseStream.Read(buffer, 0, 8192) 'Read the buffer from the response the WebRequest gave you

   fs.Write(buffer, 0, read) 'Write to filestream that you declared at the beginning of the DoWork sub

   currentSize += read

   downloadedSize += read
   downloadedTime += 1 'Add 1 millisecond for every cycle the While field makes

   If downloadedTime = 1000 Then 'Then, if downloadedTime reaches 1000 then it will call this part
      dlSpeed = (downloadedSize / TimeSpan.FromMilliseconds(downloadedTime).TotalSeconds) 'Calculate the download speed by dividing the downloadedSize by the total formatted seconds of the downloadedTime

      downloadedTime = 0 'Reset downloadedTime and downloadedSize
      downloadedSize = 0
   End If
  End While

fs.Close() 'Close the FileStream first, or the FileStream will crash.
resp.Close() 'Close the response

End Sub 
```

很抱歉没有使用正确的格式，但这本身就是一个解决方案。

# caching - Nginx 文件编码缓存

> ID：13532279
> 
> 赞同：1
> 
> 时间：2012-11-23T15:52:24.150
> 
> 标签：caching, encoding, nginx

看来我的 Nginx 配置在缓存 Javascript 文件方面存在一些问题。如果我将其编辑为 JS 文件，它会由 Nginx 提供为[http://pastebin.com/raw.php?i=C3XY9T8d](http://pastebin.com/raw.php?i=C3XY9T8d)，显然文件编码存在问题。如果我重新启动服务器或等待一段时间（不确定多长时间，肯定超过 10 分钟），文件将在没有“�”字符的情况下正确提供。

是否可以选择更改此设置，以使文件不会以某种方式被缓存并以不稳定的编码显示？

我已经尝试过`open_file_cache off;`，这解决了我以前遇到的一些问题，但在这里没有帮助。我也一时兴起尝试过`chunked_transfer_encoding off;`，但这似乎无关紧要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:20:08.537

这是在 VM 中运行的问题。显然“sendfile 与虚拟机不兼容”。添加`sendfile off`到配置中已经解决了这个问题。

# php - PHP Xpath 与希伯来语

> ID：13532283
> 
> 赞同：0
> 
> 时间：2012-11-23T15:52:34.003
> 
> 标签：php, xpath, hebrew

我在某些希伯来语内容上运行 XPath 时遇到问题。我的代码：

```
$strGames = "<?xml version=\"1.0\" encoding=\"ISO-8859-1\"?><Array1 xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns=\"http://tempuri.org/\"><Live><Name>שלום</Name><ID>11113</ID></Live></Array1>";
$Games = new SimpleXMLElement($strGames);
$live = $Games->xpath("/*[local-name()='Array1']/*[local-name()='Live' and contains(.,'שלום') and namespace-uri()='http://tempuri.org/']"); 
```

'$live' 变量在执行后包含一个空数组。

如果我使用“contains(.,'11113')”执行 - 我得到了结果 - 所以问题肯定出在希伯来语部分。

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:01:43.207

尝试将您的编码更改`$strGames`为 UTF-8。

```
$strGames = "<?xml version=\"1.0\" encoding=\"utf-8\"?><Array1 xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns=\"http://tempuri.org/\"><Live><Name>שלום</Name><ID>11113</ID></Live></Array1>"; 
```

还要确保您的编辑器设置为以 UTF-8 格式读取/写入文档。

希望这可以帮助。

# android - 手动删除照片文件后删除图库中的照片缩略图

> ID：13532285
> 
> 赞同：3
> 
> 时间：2012-11-23T15:52:39.373
> 
> 标签：android, image, gallery, photo, delete-file

```
case R.id.menu_delete:
    File photoToDelete = new File(photoPath, photoList[gPosition]);
    photoToDelete.delete();
    checkPhotoFolder();
    galleryAdapter.notifyDataSetChanged();
    Log.d("position", "" + gPosition);
    return true; 
```

我正在使用上面的代码手动删除照片文件。但在系统图库中，照片仍然显示空白缩略图。问题是如何删除照片文件以及画廊中的缩略图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:00:11.910

尝试调用 MediaScanner 来刷新图库

```
// Tell the media scanner about the new file so that it is
// immediately available to the user.
MediaScannerConnection.scanFile(this,
        new String[] { file.toString() }, null,
        new MediaScannerConnection.OnScanCompletedListener() {
    public void onScanCompleted(String path, Uri uri) {
        Log.i("ExternalStorage", "Scanned " + path + ":");
        Log.i("ExternalStorage", "-> uri=" + uri);
    }
}); 
```

来自[Google 示例的代码](http://developer.android.com/reference/android/os/Environment.html#getExternalStoragePublicDirectory%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-24T16:48:20.690

尝试这个。

```
getContentResolver().delete(Uri.fromFile(photoToDelete), null, null); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-23T15:59:00.537

您必须更新存储照片的数据结构（例如列表或数组）。我想是的`photoList`。所以你应该这样做（假设`photoList`是一个数组）：

```
photoList = photoList.asList().remove(gPosition).toArray(); 
```

# c++ - VS 告诉我 ctype.h 中存在构建错误

> ID：13532289
> 
> 赞同：1
> 
> 时间：2012-11-23T15:52:51.527
> 
> 标签：c++, visual-studio-2010, opengl

我去编译我的程序的最新版本，令我恐惧的是 VS 给了我以下构建错误消息。当我单击错误消息让它带我到问题时，它带我到 ctype.h 头文件？

```
1>c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\ctype.h(22): error C2143: syntax error : missing ';' before 'string'
1>c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\ctype.h(22): error C2059: syntax error : 'string'
1>c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\ctype.h(22): error C2143: syntax error : missing ';' before '{'
1>c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include\ctype.h(22): error C2447: '{' : missing function header (old-style formal list?) 
```

现在我知道我还没有玩过 ctype.h。

自上次构建以来，我编辑的唯一文件甚至还没有进入主代码的入口点。

我将它们包括在下面。

BowlingPin.cpp

```
#include <vector>
#include "BowlingPin.h"
#include "Entity.h"
#include <iostream>
#include <GL/glut.h>
#include "NormalCalculator.h"

vector<GLfloat> pinVerts;
vector<GLfloat> pinNorms;
vector<GLubyte> pinInd;
//declare a normal calculator
NormalCalculator normCalc;

BowlingPin::BowlingPin(NormalCalculator::GLpoint pos, NormalCalculator::GLpoint vel) : Entity(pos, vel)
{
    height = 40;
    width = 10;

    //create a normal calculator for use in a bit
    normCalc = NormalCalculator();

    createBoundingArray();//create the bounding array
    createPinVectors();//create the vertices of the object

} 

void BowlingPin::createBoundingArray()
{
    topSphere.centerPos.y = height - (width/2);
    topSphere.centerPos.x = position.x;//give the hitsphere the passed positions x and z values
    topSphere.centerPos.z = position.z;
    topSphere.radius = width/2;

    baseSphere.centerPos.y = width/2;
    baseSphere.centerPos.x = position.x;
    baseSphere.centerPos.z = position.z;
    baseSphere.radius = width/2;

    boundingArray.push_back(topSphere); //push them into the bounding array
    boundingArray.push_back(baseSphere);
}

int BowlingPin::whatIsBeingTouched(hitSphere otherSphere)
{
    if(boundingSphereIsTouching(topSphere, otherSphere))
    {
        return 0;
    }
    else if(boundingSphereIsTouching(baseSphere, otherSphere))
    {
        return 1;
    }
    else 
    {
        cout<<"/nERROR: The Bounding Sphere is touching absolutely nothing."<<endl;
        return 9999; //throw in a bit of psychotic behaviour in there in case i don't notice
    }
}

/////WHERE YOU LEFT OFF: you have created functions for detecting what part of the pin was hit.
//////Next is probably creating a function for detecting what 
/////direction/velocity the pin was hit from and determining which direction it should fly off in.
/////Then comes the bitch. Learn how to matrix rotate and have control enough to keep the hit spheres
/////in place on the pins in order to maintain programatic control.
/////Add states e.g. Static, Falling, Fallen for pins, so that we can calculate what to do.

void BowlingPin::createPinVectors()
{
    GLfloat tempVerts[51] = 
    {
        //Bottom
        position.x, position.y, position.z-(width/3),//close
        position.x-(width/3), position.y, position.z,//left
        position.x, position.y, position.z+(width/3),//far
        position.x+(width/3), position.y, position.z,//right
        //2nd floor
        position.x, position.y+(height/4), position.z-(width/2),//close
        position.x-(width/2), position.y+(height/4), position.z,//left
        position.x, position.y+(height/4), position.z+(width/2),//far
        position.x+(width/2), position.y+(height/4), position.z,//right
        //3rd floor
        position.x, position.y+(height/2), position.z-(width/3),//close
        position.x-(width/3), position.y+(height/2), position.z,//left
        position.x, position.y+(height/2), position.z+(width/3),//far
        position.x+(width/3), position.y+(height/2), position.z,//right
        //4th floor
        position.x, position.y+(height/2)+(height/4), position.z-(width/4),//close
        position.x-(width/4), position.y+(height/2)+(height/4), position.z,//left
        position.x, position.y+(height/2)+(height/4), position.z+(width/4),//far
        position.x+(width/4), position.y+(height/2)+(height/4), position.z,//right
        //apex
        position.x, position.y+height, position.z//middle

    };

    //copy these into the vertices vector

    for(int i = 0; i<51; i++)
    {
        pinInd.push_back(tempVerts[i]);
        printf("/nAdded %f to the pin's vertex array", tempVerts[i]);
    }

    ///get us some indices

    GLubyte tempIndices[90] = 
    {
        0,1,2,//Base
        0,2,3,
        0,5,4,//bottom face 1
        1,5,4,
        1,6,5,//bottom face 2
        1,2,6,
        3,7,6,//bottom face 3
        2,3,6,
        0,4,3,//bopttom face 4
        4,7,3,
        ///////next level
        4,5,8,//l2 1
        5,9,8,
        5,10,9,//l2 2
        5,6,10,
        6,11,10,//l2 3
        6,7,11,
        4,8,11,//l2 4
        4,11,7,
        ///////lvl 3
        8,13,12,//l3 1
        8,9,13,
        9,14,13,//l3 2
        9,12,13,
        10,15,14,//l3 3
        10,11,15,
        11,12,15,//l3 4
        11,8,12,
        /////////crown
        12,13,16,
        13,14,16,
        14,15,16,
        15,12,16

    };

    //load these into the pinInds array

    for(int i = 0; i<90; i++)
    {
        pinInd.push_back(tempIndices[i]);
        printf("\nAdded %i to the pins Index array",tempIndices[i]);
    }

} 
```

还有这个类的头文件

BowlingPin.h

```
#pragma once

#include "Entity.h"
#include "NormalCalculator.h"

class BowlingPin: public Entity
{

public: 
    BowlingPin(NormalCalculator::GLpoint pos, NormalCalculator::GLpoint vel);
    hitSphere topSphere; //the top hitSphere
    hitSphere baseSphere; //the bottom hitSphere
    int whatIsBeingTouched(hitSphere otherSphere); //when a collision is detected use this method to decide which of this pins spheres was hit. 0 = the top sphere and 1 = the bottom.
    NormalCalculator::GLpoint getNewVelocityFromImpactWith(NormalCalculator::GLpoint otherEntVel);

private:
    void createBoundingArray();//both creates (gives value to) the hitSpheres and adds them to the bounding array
    void rotatePin(GLfloat degrees); 
    int height;
    int width;

private:
    void createPinVectors();

} 
```

有其他人知道这是什么类型的错误以及为什么会发生吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T15:55:07.230

您在 BowlingPin 课程的末尾缺少一个分号 :-)

当编译器展开`#include`BowlingPin.h 的时候，它之后编译的下一段代码会触发 'expected semicolon' 错误；在这种情况下，它恰好出现在 ctype.h 中（必须通过`iostream`-- 注意 Entity.h 不会触发错误，即使它包含在 iostream 之前，因为 Entity.h 已经包含在 BowlingPin.h 中，并且它只编译一次，因为`pragma once`）。

# visual-c++ - 如何从应用程序执行设置以更新它？

> ID：13532291
> 
> 赞同：0
> 
> 时间：2012-11-23T15:52:51.197
> 
> 标签：visual-c++, background-process, batch-processing

我目前正在编写一个应用程序，如果该应用程序存在更新，则必须在网站上进行搜索。如果是这种情况，应用程序会下载一个安装文件（使用 inosetup 创建）然后执行它。

我的应用程序是用 C++ 编写的。而且我不是来做这个过程的。我正在尝试使用 system() 调用设置。如果命令是 system("mysetup") 我无法获得我想要的，因为安装程序无法替换 exe（当前正在运行）。所以，我尝试使用 system("cmd /C mysetup"), system("cmd/C start /min mysetup"), system ("cmd /C start /min /separate mysetup") 没有成功。在这些情况下，停止应用程序的事实也会停止设置。所以我认为设置被认为是一个子进程。

我在一些帖子中看到可能可以使用 execcl()。但是这个函数在 unistd.h 中。这个库有点特定于我的需求（我需要能够在虚拟化窗口上运行）。

那么你有办法做我想做的事吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:16:12.853

好的，我的一位同事给了我解决方案。当我们使用 QT 时，QProcess::startDetached 正是我想要的。

# cocos2d-iphone - box2d 实体会向上而不是向下

> ID：13532299
> 
> 赞同：0
> 
> 时间：2012-11-23T15:53:25.263
> 
> 标签：cocos2d-iphone, box2d-iphone

我正在使用 cocos2d v1.0.1 和相应的 Box2d 版本。在模拟器中一切正常。它只是一个在触摸位置创建的身体，它会落到地上。但我在设备 iphone4 上运行它，并且对象向上浮动。

为什么会发生这种情况？

重力设置为 -0.3f。我在场景中有另一个动态物体，它应该出现在地面的底部。它只是漂浮起来的触摸物体。睡眠是真的。

我只是将 sleep 设置为 false，现在流动站也浮起来了。但它不应该浮起来。这是我的世界创建方法：

```
- (void)setupWorld {
    b2Vec2 gravity = b2Vec2(0.0f, -0.3f);
    bool doSleep = false;
    world = new b2World(gravity, doSleep);
} 
```

这是我从init创建的身体：

```
Box2DSprite *roverSprite = [Box2DSprite spriteWithSpriteFrameName:@"rover.png"];
        [self createBoxAtLocation:ccp(100,15) withSize:CGSizeMake(50, 50) forSprite:roverSprite isBox:TRUE];
        [sceneSpriteBatchNode addChild:roverSprite]; 
```

这是 createBox 方法：

```
- (void)createBoxAtLocation:(CGPoint)location withSize:(CGSize)size forSprite:(Box2DSprite *)sprite isBox:(BOOL)isBox{
    b2BodyDef bodyDef;
    bodyDef.type = b2_dynamicBody;
    bodyDef.position = b2Vec2(location.x/PTM_RATIO, location.y/PTM_RATIO);
    b2Body *body = world->CreateBody(&bodyDef);
    //
    body->SetUserData(sprite);
    sprite.body = body;

    b2FixtureDef fixtureDef;

    //
    if (isBox) {
        b2PolygonShape shape;
        shape.SetAsBox(sprite.contentSize.width/3/PTM_RATIO,
                       sprite.contentSize.height/3/PTM_RATIO);
        fixtureDef.shape = &shape;
    } else {
        b2CircleShape shape;
        shape.m_radius = sprite.contentSize.width/2/PTM_RATIO;
        fixtureDef.shape = &shape;
    }

    fixtureDef.density = 1.0;
    fixtureDef.friction = 1.0;
    fixtureDef.restitution = 0.5;
    body->CreateFixture(&fixtureDef);
} 
```

同样的方法也用于从这些行创建的触摸创建对象：

```
-(BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event {
    CGPoint touchLocation = [touch locationInView:[touch view]];
    touchLocation = [[CCDirector sharedDirector] convertToGL:touchLocation];
    touchLocation = [self convertToNodeSpace:touchLocation];
    //b2Vec2 locationWorld = b2Vec2(touchLocation.x/PTM_RATIO, touchLocation.y/PTM_RATIO);

    Box2DSprite *sprite = [Box2DSprite spriteWithSpriteFrameName:@"koko1.png"];
    [self createBoxAtLocation:touchLocation withSize:CGSizeMake(50, 50) forSprite:sprite isBox:TRUE];
    [sceneSpriteBatchNode addChild:sprite];
    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T12:13:02.367

你是纵向模式还是横向模式？如果在横向中，也许您将设备向左旋转而不是向右旋转。设备方向可以交换您身上加速度计的 y 值。不确定这是否与您的问题有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T15:15:28.590

原来我将目标设置旋转到右而不是左。

# spring - 如何在上下文卸载时关闭连接池？

> ID：13532302
> 
> 赞同：8
> 
> 时间：2012-11-23T15:53:40.340
> 
> 标签：spring, hibernate, tomcat, c3p0

在开发了几个使用 spring、hibernate 和 c3p0 作为 connectionpool 的 webapps 之后，我想调查一个我每次都注意到的问题：Connectionpool 保持连接，直到你关闭 tomcat（或你的应用程序服务器）。

今天我用这四个依赖项创建了最基本的项目：

```
org.springframework:spring-web
org.springframework:spring-orm
org.hibernate:hibernate-core
c3p0:c3p0 
```

（加上特定的 JDBC 驱动程序）。

我的 web.xml 只创建一个设置应用程序上下文的 ContextLoaderListener。

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/applicationContext.xml
    </param-value>
</context-param>

<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener> 
```

应用程序上下文由两个 bean 组成 - 数据源和会话工厂：

```
<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
</bean>

<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
    <property name="driverClass">
        <value>org.postgresql.Driver</value>
    </property>
    <property name="jdbcUrl">
        <value>jdbc:postgresql://localhost/mydb</value>
    </property>
    <property name="user">
        <value>usr</value>
    </property>
    <property name="password">
        <value>pwd</value>
    </property>
</bean> 
```

当我启动 web 应用程序并查看 jconsole 的 MBean 或检查我的 DBMS 是否打开连接时，我注意到 c3p0 建立的三个初始连接。

问题：当我告诉tomcat停止webapp时，它们仍然存在！

我创建了另一个 ServletContextListener，它只实现了 contextDestroyed 方法，并以编程方式关闭了 sessionFactory（并且还注销了也不会自动完成的 JDBC 驱动程序）。代码是：

```
@Override
public void contextDestroyed(ServletContextEvent sce) {

    ...
    sessionFactory().close();

    // deregister sql driver(s)
    Enumeration<Driver> drivers = DriverManager.getDrivers();
    while (drivers.hasMoreElements()) {
        Driver driver = drivers.nextElement();
        try {
            DriverManager.deregisterDriver(driver);
            log.info("deregistering jdbc driver: " + driver);
        } catch (SQLException e) {
            log.error("error deregistering jdbc driver: " + driver, e);
        }
    }
} 
```

但真的是这样吗？没有我不知道的内置机制吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-23T15:58:35.647

您是否尝试过指定销毁方法？

```
<bean class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close"> 
```

# c++ - 如何优化 boost::mpl::vector 代码？

> ID：13532308
> 
> 赞同：0
> 
> 时间：2012-11-23T15:53:49.777
> 
> 标签：c++, boost, vector, boost-mpl

添加我玩 boost::mpl::* 的那一刻，并尝试扩展物理单元示例。目前我有以下代码：

由 mpl::vector 表示的简单物理基本维度：

```
template < int Mass, int Length, int Time, int Temperature, int Angle, int Current >
    struct base_dimension
    {
        typedef typename mpl::vector_c< int, Mass, Length, Time, Temperature, Angle, Current >::type type;
    }; 
```

一个标量向量：

```
typedef base_dimension< 0, 0, 0, 0, 0, 0 >::type base_dimensionless_helper; 
```

存储 base_dimension 类型的简单类型：

```
template< class base_dimension >
    struct Dimension
    {
        typedef Dimension< base_dimension > type;
        typedef base_dimension              base_dim_type;
    }; 
```

一个标量维度：

```
typedef Dimension< base_dimensionless_helper > base_dimensionless; 
```

一些简单的帮手：

```
template < class D1, int fac >
    struct mul_base_dim_fac_typeof
    {
        typedef typename base_dimension< fac, fac, fac, fac, fac, fac >::type fac_vec;
        typedef typename Detail::multiply_typeof_helper< typename D1, fac_vec >::type type;
    };

template < class Dim1, class Dim2 >
    struct add_dim_typeof_helper
    {
        typedef typename add_base_dim_typeof_helper< typename Dim1::base_dim_type, typename Dim2::base_dim_type >::type dim;

        typedef Dimension< dim > type;
    }; 
```

最后是派生维度。使用的公式是：(D0 * E0) + (D1 * E1) +...+ (D5 * E5) ... ::type

```
template < class D0 = base_dimensionless, int E0 = 0,
       class D1 = base_dimensionless, int E1 = 0,
       class D2 = base_dimensionless, int E2 = 0,
       class D3 = base_dimensionless, int E3 = 0,
       class D4 = base_dimensionless, int E4 = 0,
       class D5 = base_dimensionless, int E5 = 0 >
struct derived_dimension
{
    typedef Dimension< typename mul_base_dim_fac_typeof< typename D0::base_dim_type, E0 >::type > d0_type;
    typedef Dimension< typename mul_base_dim_fac_typeof< typename D1::base_dim_type, E1 >::type > d1_type;
    typedef Dimension< typename mul_base_dim_fac_typeof< typename D2::base_dim_type, E2 >::type > d2_type;
    typedef Dimension< typename mul_base_dim_fac_typeof< typename D3::base_dim_type, E3 >::type > d3_type;
    typedef Dimension< typename mul_base_dim_fac_typeof< typename D4::base_dim_type, E4 >::type > d4_type;
    typedef Dimension< typename mul_base_dim_fac_typeof< typename D5::base_dim_type, E5 >::type > d5_type;

    typedef typename Detail::add_dim_typeof_helper< d0_type, d1_type >::type d0_d1_type;
    typedef typename Detail::add_dim_typeof_helper< d0_d1_type, d2_type >::type d0_d1_d2_type;
    typedef typename Detail::add_dim_typeof_helper< d0_d1_d2_type, d3_type >::type d0_d1_d2_d3_type;
    typedef typename Detail::add_dim_typeof_helper< d0_d1_d2_d3_type, d4_type >::type d0_d1_d2_d3_d4_type;
    typedef typename Detail::add_dim_typeof_helper< d0_d1_d2_d3_d4_type, d5_type >::type type;
}; 
```

好的，这确实按预期工作。但是我想美化派生维度的计算，因为所有这些中间类型定义都很丑陋。我的第一个想法是将输入向量推入一个向量（-> 一个向量向量），然后在一个不错的 for_each 循环中将它们相乘，但直到现在都没有成功。所以我的问题是：

任何提示如何美化计算？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:58:11.070

您可以从定义一个辅助函数开始，以阐明乘法：

```
template < typename D, int E >
struct multiply
{
    typedef Dimension< typename 
        mul_base_dim_fac_typeof< typename 
            D::base_dim_type, 
            E
        >::type
    > type;
}; 
```

您还可以使用诸如[`transform`](http://www.boost.org/doc/libs/release/libs/mpl/doc/refmanual/transform.html)and之类的算法[`fold`](http://www.boost.org/doc/libs/release/libs/mpl/doc/refmanual/fold.html)（好吧，您宁愿需要`reduce`，但 MPL 中没有提供）：

```
template < class D0 = base_dimensionless, int E0 = 0,
           class D1 = base_dimensionless, int E1 = 0,
           class D2 = base_dimensionless, int E2 = 0,
           class D3 = base_dimensionless, int E3 = 0,
           class D4 = base_dimensionless, int E4 = 0,
           class D5 = base_dimensionless, int E5 = 0 >
struct derived_dimension
{
    typedef mpl::vector<
        mpl::pair< D0, E0 >, mpl::pair< D1, E1 >,
        mpl::pair< D2, E2 >, mpl::pair< D3, E3 >,
        mpl::pair< D4, E4 >, mpl::pair< D5, E5 >
    > pairs;

    typedef typename
        mpl::transform< 
            pairs, 
            multiply< mpl::first< mpl::_1 >, mpl::second< mpl::_1 >;
        >::type products;

    typedef typename
        mpl::fold<
            products,
            base_dimensionless,
            add_dim_typeof_helper< mpl::_, mpl::_ >
        >::type type;
}; 
```

免责声明：我根本没有测试过这段代码，它的目的只是让你了解 MPL 可以做什么。

或者，您可以使用预处理器生成连续的 typedef，可能在[Boost.Preprocessor](http://www.boost.org/libs/preprocessor/)的帮助下。

# c# - 带三角函数的调车场算法

> ID：13532309
> 
> 赞同：2
> 
> 时间：2012-11-23T15:53:57.390
> 
> 标签：c#, parsing, mathematical-expressions, shunting-yard

我正在用 C# 实现调车场算法。尽管它可以很好地解析带有符号（+、* - / 和 ^）的数学表达式。但由于某种原因，它不适用于正弦余弦函数。例如，如果我尝试计算 sin(45) 我得到 0.707106 。但是当我尝试解析表达式时

* * *

```
 sin(25)+cos(15+sin(25))+3  it gives me 0.43756   (Correct answer is: 2.19106879911) 
```

* * *

```
 sin(45)+cos(45) it gives me 0.715779      (Correct answer is: 1.414) 
```

[我已按照Wikipedia](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)上的这篇文章中提到的所有步骤进行操作。我已经尝试了几天，但我无法让它完美地工作。这是主要的解析功能

```
 private void parse()
{
    //scan the input string
    for (int j = 0; j < input.Length; j++)
    {

        if (Char.IsDigit(input[j])) //if its a number
        {
            string number = extractNumber(input, j);  //extracts multiple digit number
            j = currentposition; //increment the counter according to length of the digit
            postfix += number + " ";
            Console.WriteLine(postfix);
        }
            //if its a function character
        else if(Char.IsLetter(input[j]) )
        {
            //its a letter
            string function = getFunction(j); //get the function name
            operators.Push( function );
            j = currentposition;

        }
        else if(input[j] == ',') //if its a comma
        {
            while(operators.Peek() != "(")
            {
                postfix += input[j] + " ";

            }

        }
        else if (IsAnOperator(input[j])) // if we have got an operator
        {
           if (operators.Count != 0 && IsHigherPrecedence(operators.Peek().ToCharArray()[0], input[j]))
            {
                while ( ( operators.Count != 0 && IsHigherPrecedence(operators.Peek().ToCharArray()[0], input[j]) )  )
                { 
                    postfix += operators.Pop() + " "; 

                }
            }

              operators.Push(Char.ToString(input[j]));
        }
        else if (input[j] == '(')
            operators.Push(Char.ToString(input[j]));
        else if (input[j] == ')')
        {
            while (operators.Count != 0 && operators.Peek() != "(")
                postfix += operators.Pop() + " ";
            operators.Pop();
        }

    } // end for loop

        while(operators.Count > 0 )
            postfix +=operators.Pop() + " ";

     //Conversion Logic  (postfix to final answer )

        postfixtokens.AddRange( postfix.Split(' ') ) ;

    for (int j = 0; j < postfixtokens.Count-1; j++)
    {

        if (IsAnOperator(postfixtokens[j][0]) && basket.Count > 1)
        {

            Double second = Double.Parse( basket.Pop() );

            Double first = Double.Parse(basket.Pop() );
            char op = postfixtokens[j][0];
            Double result = ApplyOperation(op,second, first);
         //   Console.WriteLine("{0} {1} {2} = {3}", first, op, second, result);
            basket.Push( result.ToString());
        }
        else if (IsAnOperator(postfixtokens[j][0]) && basket.Count == 1)
        {

            Double second = Double.Parse(basket.Pop());
            Double first = 0.0;
            char op = postfixtokens[j][0];

            Double result = ApplyOperation(op, second, first);

         //   Console.WriteLine("{0} {1} {2} = {3}", first, op, second, result);
            basket.Push(result.ToString() );
        }
        else if (Char.IsDigit(postfixtokens[j][0]))
        {
            basket.Push( postfixtokens[j] );
        }
        else if( isAFunction(postfixtokens[j]) )
        {
            //if its a single argument function
            if (AllowedFunctions[postfixtokens[j]] == 1)
            {
                //single arg logic
                if (postfixtokens[j] == "sin")
                {
                    Double result =  Math.Sin( Double.Parse(basket.Pop() )*Math.PI/180.0 );
                    //result = Math.PI / 180;
                    basket.Push(result.ToString());
                }
                else if (postfixtokens[j] == "cos")
                {
                       Double result =  Math.Cos( Double.Parse(basket.Pop() )*Math.PI/180.0 );
                    //result = Math.PI / 180;
                    basket.Push(result.ToString());
                }

            }

        }
    }
} 
```

此外，这是程序的输出：

```
 Input: 3+4*2/(1-5)^5^10
   PostFix: 3 4 2 * 1 5 - 5 10 ^ ^ / +
   Answer: 3

   Input: 2+4
   PostFix: 2 4 +
   Answer: 6

   Input Expression: -5-4
   Input: -5-4
   PostFix: 5 - 4 -
   Answer: -9

   Input: -4+3
   PostFix: 4 - 3 +
   Answer: -1

   Input Expression: 4^(4^4)
   Input: 4^(4^4)
   PostFix: 4 4 4 ^ ^
   Answer: 1.34078079299426E+154

   Input: sin45
   PostFix: 45 sin
   Answer: 0.707106781186547  (correct) 
```

//错误的

```
 Input: sin(25)+cos(15+sin(25))+3
   PostFix: 25 15 25 sin + 3 + cos + sin
   Answer: 0.437567038002202

   Input: sin(45)+cos(45)
   PostFix: 45 45 cos + sin
   Answer: 0.71577935734684 
```

新案例：

```
 Input: sin45+cos45
    PostFix: 45 45 cos + sin
    Answer: 0.71577935734684

    Input: 2+sin30
    PostFix: 2 30 sin +
    Answer:2.5

    Input: sin30+2
    PostFix: 30 2 + sin
    Answer: 0.529919264233205 
```

就是这样。任何人都可以指出我做错了什么。

编辑：

这是 IsHigherPrecedance 函数和优先级枚举：

```
 public enum Precedance { Plus =1,Minus=1,Multiply=2,Divide=2,Exponent=3,Unary = 4,Parenthesis=5 };
   private bool IsHigherPrecedence(char a, char b)
   {
    Precedance f = getPrecedance(a);
    Precedance s = getPrecedance(b);

    if (f >= s)
        return false;
    else
        return true;
   }
  public Precedance getPrecedance(char a)
{

    if (a == '+')
        return Precedance.Plus;
    else if (a == '-')
        return Precedance.Minus;
    else if (a == '*')
        return Precedance.Multiply;
    else if (a == '/')
        return Precedance.Divide;
    else if (a == '^')
        return Precedance.Exponent;
    else if (Char.IsLetter(a))
        return Precedance.Unary;
    else if (a == '(' || a == ')')
        return Precedance.Parenthesis;
    else
        return Precedance.Plus;
} 
```

既然这些三角函数是单参数函数，它们是否会用其他逻辑进行解析，或者这个分流场算法也适用于这些函数？

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T02:07:09.403

这里有很多问题，但主要问题是您将函数视为运算符，尽管它们不是（本质上是您将堆栈称为“运算符”，就好像这是唯一可以在上面的东西， 不对）。特别是，这个分支：

```
else if (IsAnOperator(input[j])) // if we have got an operator
{
    if (operators.Count != 0 && IsHigherPrecedence(operators.Peek().ToCharArray()[0], input[j]))
    {
        while ( ( operators.Count != 0 && IsHigherPrecedence(operators.Peek().ToCharArray()[0], input[j]) )  )
        { 
            postfix += operators.Pop() + " "; 
        }
    }
    operators.Push(Char.ToString(input[j]));
} 
```

需要检查“操作员”堆栈上的内容是否实际上是操作员：

```
else if (IsAnOperator(input[j])) // if we have got an operator
{
    while (operators.Count != 0 
        && IsAnOperator(operators.Peek().ToCharArray()[0])
        && IsHigherPrecedence(operators.Peek().ToCharArray()[0], input[j]))
    {
       postfix += operators.Pop() + " "; 
    }
    operators.Push(Char.ToString(input[j]));
} 
```

* * *

其他问题包括处理逗号的分支：

```
else if (input[j] == ',') //if its a comma
{
    while (operators.Peek() != "(")
    {
        // this isnt right, but its not the problem
        postfix += input[j] + " ";
        // should be this:
        postfix += operators.Pop() + " ";
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T01:01:55.987

如果你使用这个库：[https](https://github.com/leblancmeneses/NPEG) ://github.com/leblancmeneses/NPEG 你可以使用这个语法来解析你的表达式。

```
Digit: (?<Digit>[0-9]+('.'[0-9]+)?);
(?<Trig>): 'sin(' Expr ')' / 'cos(' Expr ')';
Value:  Digit / Trig / '(' Expr ')';
(?<Product>): Value ((?<Symbol>'*' / '/') Value)*;
(?<Sum>): Product ((?<Symbol>'+' / '-') Product)*;
(?<Expr>): Sum ; 
```

在这里测试一下： [http ://www.robusthaven.com/blog/parsing-expression-grammar/npeg-language-workbench](http://www.robusthaven.com/blog/parsing-expression-grammar/npeg-language-workbench)

`cos(25)+cos(15+sin(25.333))+3`

`((((12/3)+5-2*(81/9))+1))`

核桃：

安装包 NPEG

查看布尔代数的 AST 示例评估。

# centos - CentoOS/Yum 使用 yum 更新后是否会重新启动服务？

> ID：13532312
> 
> 赞同：6
> 
> 时间：2012-11-23T15:54:10.903
> 
> 标签：centos, yum

很简单的问题。当我在 CentOS 机器上运行 yum update 时，如果 mysqld、httpd、... 等已更新，我是否需要手动重新启动它们，或者它们是否会自动重新启动？

有谁知道在哪里可以找到支持这一点的来源？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:58:02.707

这取决于每个包的 .spec 文件的 %post 脚本中的内容。

一般来说，我记得他们并不总是这样做。

httpd 至少可以；请参阅[http://pkgs.fedoraproject.org/cgit/httpd.git/tree/httpd.spec?id=ea6aac8abd84867119fd84a057daceb75e160bc1](http://pkgs.fedoraproject.org/cgit/httpd.git/tree/httpd.spec?id=ea6aac8abd84867119fd84a057daceb75e160bc1)并查看 %posttrans 脚本。

看起来这是在 Fedora 10 中添加的：[http ://pkgs.fedoraproject.org/cgit/httpd.git/tree/httpd.spec?h=f10](http://pkgs.fedoraproject.org/cgit/httpd.git/tree/httpd.spec?h=f10)

因为这个错误：[https ://bugzilla.redhat.com/show_bug.cgi?id=491567](https://bugzilla.redhat.com/show_bug.cgi?id=491567)

# php - PHP在不使用'&'的情况下在foreach中添加键（参考）

> ID：13532313
> 
> 赞同：-3
> 
> 时间：2012-11-23T15:54:12.913
> 
> 标签：php, foreach

假设我正在循环一个这样的数组：

```
foreach($cursor as $obj) { ... } 
```

里面的值如下：

```
$obj['name'] => "foo"
$obj['surname'] => "test" 
```

有没有办法直接从foreach中添加另一个键和值，而不使用'&'？像这样的东西：

```
foreach($cursor as $obj) { $obj['age'] = 24; } 
```

但不使用这个：

```
foreach($cursor as &$obj) { $obj['age'] = 24; } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T15:55:17.007

```
foreach($cursor as $k => $obj) { 
    $cursor[$k]['age'] = 24; //or whatever else you want to change it to
} 
```

# android - 使用广播接收器和服务。/ 安卓

> ID：13532316
> 
> 赞同：0
> 
> 时间：2012-11-23T15:54:34.923
> 
> 标签：android, service, broadcastreceiver

经过无数小时的网络搜索，我在这里写信，没有任何收获。

我正在尝试创建一个启动服务的应用程序，该服务将有一个广播接收器，它应该检测何时收到电话，而不是该接收器使用呼叫号码调用服务内部的方法。

有谁可以帮我离开这里吗？我应该寻找什么？简而言之，我应该如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:00:05.857

看看这个[问题。](https://stackoverflow.com/questions/2463175/how-to-have-android-service-communicate-with-activity#answer-4739898) 听起来对您来说，您可能只是使用服务的单例实例，或者可能是广播接收器。绝对远离AIDL。

# c# - 从 Twitter 获取公共数据时出错

> ID：13532317
> 
> 赞同：-2
> 
> 时间：2012-11-23T15:54:41.340
> 
> 标签：c#, twitter, tweetsharp

```
String status;
            IEnumerable<TwitterStatus> twitterStatus = twitterService.ListTweetsOnPublicTimeline();
            foreach(String status in twitterStatus)
            {
                Console.WriteLine(twitterStatus);
            } 
```

为什么它给出了 foreach 循环中不能转换字符串类型的错误？这是我的全部代码

```
namespace TweetingTest
{
    class Program
    {
        static void Main(string[] args)
        {

            TwitterClientInfo twitterClientInfo = new TwitterClientInfo();
            twitterClientInfo.ConsumerKey = ConsumerKey; //Read ConsumerKey out of the app.config
            twitterClientInfo.ConsumerSecret = ConsumerSecret; //Read the ConsumerSecret out the app.config

            TwitterService twitterService = new TwitterService(twitterClientInfo);

            if (string.IsNullOrEmpty(AccessToken) || string.IsNullOrEmpty(AccessTokenSecret))
            {
                //Now we need the Token and TokenSecret

                //Firstly we need the RequestToken and the AuthorisationUrl
                OAuthRequestToken requestToken = twitterService.GetRequestToken();
                string authUrl = twitterService.GetAuthorizationUri(requestToken).ToString();

                //authUrl is just a URL we can open IE and paste it in if we want
                Console.WriteLine("Please Allow This App to send Tweets on your behalf");
                //Process.Start(authUrl); //Launches a browser that'll go to the AuthUrl.

                //Allow the App
                Console.WriteLine("Enter the PIN from the Browser:");
                string pin = Console.ReadLine();

                OAuthAccessToken accessToken = twitterService.GetAccessToken(requestToken, pin);

                string token = accessToken.Token; //Attach the Debugger and put a break point here
                string tokenSecret = accessToken.TokenSecret; //And another Breakpoint here

                Console.WriteLine("Write Down The AccessToken: " + token);
                Console.WriteLine("Write Down the AccessTokenSecret: " + tokenSecret);
            }

            twitterService.AuthenticateWith(AccessToken, AccessTokenSecret);

            //Console.WriteLine("Enter a Tweet");
            //string tweetMessage;
            //string data;
            //string ListTweetsOnPublicTimeline;
            //string TwitterUserStreamStatus = ListTweetsOnPublicTimeline();
            //TwitterStatus=ListTweetsOnPublicTimeline();
            //tweetMessage = Console.ReadLine();
            //ListTweetsOnPublicTimeline = Console.ReadLine();
            //TwitterStatus twitterStatus = twitterService.SendTweet(tweetMessage);
            //TwitterStatus twitterStatus = twitterService.ListTweetsOnPublicTimeline();
            //String status;
            IEnumerable<TwitterStatus> tweets = twitterService.ListTweetsOnPublicTimeline();
           foreach(var tweet in tweets)
            {
               Console.WriteLine(tweet);
                //Console.WriteLine("{0} says '{1}'", tweet.User.ScreenName, tweet.Text);
            }
            //twitterStatus=Console.ReadLine();
        } 
```

这是我正在处理的整个代码，并且在 foreach 循环中只遇到一个错误，这是我缺乏 C# 知识

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T17:59:18.410

您正在迭代的对象是“TwitterStatus”类型，而不是字符串......所以当您尝试将 TwitterStatus 对象自动转换为字符串时，您会感到困惑。

你的问题很模糊，所以我假设你的 TitterStatus 对象有一个“文本”属性来回答这个问题。

```
foreach(TwitterStatus status in twitterStatus)
{
   Console.WriteLine(status.Text);
} 
```

> （只需将“.Text”替换为拥有状态文本的 TwitterStatus 的任何属性）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T18:01:03.600

你会需要这样的东西..

```
 using TweetSharp;

    TwitterService service = new TwitterService();
    IEnumerable<TwitterStatus> tweets = service.ListTweetsOnPublicTimeline();
    foreach (var tweet in tweets)
    {
        Console.WriteLine("{0} says '{1}'", tweet.User.ScreenName, tweet.Text);
    } 
```

也试试这个代码，看看它为什么失败..尝试调试 response.StatusCode

```
using TweetSharp;

TwitterService service = new TwitterService();
IAsyncResult result = service.ListTweetsOnPublicTimeline(
    (tweets, response) =>
        {
            if(response.StatusCode == HttpStatusCode.OK)
            {
                foreach (var tweet in tweets)
                {
                    Console.WriteLine("{0} said '{1}'", tweet.User.ScreenName, tweet.Text);
                }
            }
        }); 
```

更多信息：[https ://github.com/danielcrenna/tweetsharp](https://github.com/danielcrenna/tweetsharp)

# google-app-engine - 带有祖先查询的 Google App Engine 数据存储区/NoSQL 示例

> ID：13532319
> 
> 赞同：1
> 
> 时间：2012-11-23T15:54:45.110
> 
> 标签：google-app-engine, python-2.7, nosql, google-cloud-datastore

我非常习惯 SQL，而不是 App Engine Datastore 的 NoSQL 范式，所以我不得不编写一段示例代码来了解如何正确执行祖先查询。以为我会在这里与您分享；也许这对某人来说很有趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T15:54:45.110

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import webapp2
from google.appengine.ext.webapp.util import run_wsgi_app
import logging
from google.appengine.ext import db

# MODELS
class Child_model(db.Model):
    name = db.StringProperty()

class Parent_model(db.Model):
    name = db.StringProperty()

class Root_model(db.Model):
    pass

# MAIN
class MainHandler(webapp2.RequestHandler):
    def get(self, url):
        if not Root_model.get_by_key_name("root"):
            # Populate db on first run
            self.populate()

        logging.info("-- Get all enteties recursivly --")
        root        = Root_model.get_by_key_name("root")
        logging.info(" - %s", root)

        parents     = Parent_model.all().ancestor(root)

        # Recursivly
        for p in parents:
            logging.info(" -- %s" % p.name)
            children = list(Child_model.all().ancestor(p))
            [logging.info(" --- %s" % c.name) for c in children]

        # Shortcut
        #children   = Child_model.all().ancestor(root)

        logging.info("-- Get all children for a parent --")
        [logging.info(" -- %s" % c.name) for c in self.get_all_children_for_a_parent() ]    

        logging.info("-- Get some children for a parent --")
        [logging.info(" -- %s" % c.name) for c in self.get_all_children_for_a_parent() if c.name == "Child num 0 with parent Parent num 0" or c.name == "Doesn't exist" ]

        logging.info("-- Get parent for child --")
        child = Child_model.all()[0]
        logging.info("Child: %s" % child.name)
        logging.info("Parent: %s" % child.parent().name)

    def get_all_children_for_a_parent(self):
        parent = Parent_model.all()[0]
        logging.info(" - %s" % parent.name)
        return Child_model().all().ancestor(parent)

    def populate(self):
        root = Root_model(key_name="root")
        root.put()

        parents = []
        for i in range(3):
            parents.append( Parent_model(parent=root, name="Parent num %d" % i) )
        db.put(parents)

        import random
        children = []
        for p in parents:
            for i in range(random.randint(0,10)):
                children.append( Child_model(parent=p, name="Child num %d with parent %s" % (i, p.name)) )
        db.put(children)

app = webapp2.WSGIApplication([('/(.*)', MainHandler)],
                                debug=True)
def main():
    run_wsgi_app(app)

if __name__ == '__main__':
    main() 
```

# c# - 在视觉工作室项目中搜索脏话

> ID：13532322
> 
> 赞同：-5
> 
> 时间：2012-11-23T15:54:57.200
> 
> 标签：c#, visual-studio-2010

我还在努力不给自己写脏话的阶段，所以在项目完成时，我会搜索主要的“滥用”词。

微软开发人员是脏话还是巧合？

（* = 删除的字母）

```
D:\Projects......resx(3996):        8g7fqR/cfvvt386D/zGF1TYJfIB5weKlYcESxrKwcKlUcU*tpdF5VrGvpYZHiS1VfD12tuzm9Zs3SyVn

D:\Projects\.....resx(3706):        L6QEuEi5sMzyh24/noC5wqUC*NTXlQPWqr62XJCX8nrbw8D3TWUEJYkisCnDNDu0KYPqAL/UEIC/yZqA

 D:\Projects\....resx(7349):        aKtRVgW2niEevp/n4XhGaMqS941TpuzAEbXSbIVlIgJ8mPZDf3Cp2qvY9WrTpd8vPAtOF*cK34BGgRYg

D:\Projects\....resx(1963):        GYDa2oFR45PBMFZ9tcDfU*KmjQLw0eMn7PX4mny9seuYwA3QDeQyi96k5ltz625fhxcDXFGb6O2tyijO

D:\Projects\....resx(2247):        8kotbWCBQzzDPVRz9b1691MLa4uWM8oB5NXcMbFWc*CkpL48XtyQo1JL0vJgrjupuYPRT9/vDvvcOBPE 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T15:59:03.327

答案是以下之一：

*   是的
*   不

我们会给他们怀疑的好处，并说很可能不，这些只是随机的。

# jquery - 使用下拉和输入自动化 jQuery 计算器

> ID：13532324
> 
> 赞同：0
> 
> 时间：2012-11-23T15:55:00.010
> 
> 标签：jquery, input, calculator, dropdownbox

我将汇总来自不同类型表单元素的值。下拉并输入。该过程进展顺利，但我被困在我更改选项后总不会自动更新。

**这是我的代码：**

```
<form>
        <label>cost: <input type="text" name="cost_1" size="5" class="summable"/></label>
        <label>qty: <input type="text" name="cost_1_qty" size="2"/></label><br/>

        <label>cost: <input type="text" name="cost_2" size="5" class="summable"/></label>
        <label>qty:     <select name="cost_2_qty">
    <option value="0">0</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
    <option value="5">5</option>
    </select></label><br/>

        <label>cost: <input type="text" name="cost_3" size="5" class="summable"/></label>
        <label>qty: <input type="text" name="cost_3_qty" size="2"/></label><br/>

        <strong id="summation"></strong><br/>
    </form>
    <script type="text/javascript">

        function doTotal() {
            var total = 0.0;

            $(".summable").each(function (idx, element) {
                $this = $(this);

                var cost = parseFloat($this.val());
                var qty_selector = '[name=' + $this.attr('name') + '_qty' + ']'; // eg: [name=cost_3_qty]
                var qty = parseFloat($(qty_selector).val());
                if (cost && qty)
                    total += cost * qty ;
            });

            $("#summation").html(total.toFixed(2));
        }

        $(document).ready(function() {
            $("input[type=text]").blur(function (e) {
                doTotal();
            })
        });         
    </script> 
```

现场版：http: [//jsfiddle.net/hWcMv/](http://jsfiddle.net/hWcMv/)

我需要在选择选项后立即计算总值。请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T15:59:36.793

```
 $(document).ready(function() {
        $('[name*="cost"]').change(function () {
            doTotal();
        })
    });​ 
```

[http://jsfiddle.net/hWcMv/2/](http://jsfiddle.net/hWcMv/2/)

# sql - 合并 2 个 SQL 语句

> ID：13532328
> 
> 赞同：1
> 
> 时间：2012-11-23T15:55:18.190
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我需要组合以下 2 个 SELECT 语句，以便第二个语句的结果作为第一个选择的每一行中的一列出现。

```
SELECT MEM.Id,
   EN.artistName,
   EN.dateAdded,
   EN.voteStatus,
   ES.enterNextRound,
   ES.notified,
   ES.voted,
   GR.genre,
   ES.entrantId AS bandID
FROM recMembers AS MEM
LEFT JOIN recEntrantStatus AS ES
   ON MEM.Id = ES.judgeId
LEFT JOIN recEntrants AS EN
   ON ES.entrantId = EN.Id
LEFT JOIN recGenre AS GR
   ON EN.genreId = GR.Id
WHERE MEM.Id = @memberId
   AND ES.roundId = 2

SELECT COUNT(enterNextRound) 
FROM recEntrantStatus
WHERE enterNextRound = 1
  AND roundId = 2
  AND entrantId = ES.entrantId 
```

其中“ES.entrantId”取自第一次选择中访问的当前行。

任何指针将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T15:57:02.037

将其包装在子查询中并使用`CROSS JOIN`

```
SELECT MEM.Id,
        EN.artistName,
        EN.dateAdded,
        EN.voteStatus,
        ES.enterNextRound,
        ES.notified,
        ES.voted,
        GR.genre,
        ES.entrantId AS bandID,
        s.totalCount
FROM recMembers AS MEM
        LEFT JOIN recEntrantStatus AS ES
                ON MEM.Id = ES.judgeId
        LEFT JOIN recEntrants AS EN
                ON ES.entrantId = EN.Id
        LEFT JOIN recGenre AS GR
                ON EN.genreId = GR.Id
        CROSS JOIN (
                SELECT COUNT(enterNextRound) totalCount
                FROM recEntrantStatus
                WHERE enterNextRound = 1
                        AND roundId = 2
                        AND entrantId = @memberId
                ) s
WHERE MEM.Id = @memberId
        AND ES.roundId = 2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T15:58:21.340

您可以使用[`OUTER APPLY`](http://technet.microsoft.com/en-us/library/ms175156%28v=sql.105%29.aspx)：

```
SELECT MEM.Id, 
  EN.artistName, 
  EN.dateAdded, 
  EN.voteStatus, 
  ES.enterNextRound,
  ES.notified, 
  ES.voted, 
  GR.genre, 
  ES.entrantId AS bandID, 
  src.CountEnterNextRound
FROM recMembers AS MEM
LEFT JOIN recEntrantStatus AS ES
  ON MEM.Id = ES.judgeId
LEFT JOIN recEntrants AS EN
  ON ES.entrantId = EN.Id
LEFT JOIN recGenre AS GR
  ON EN.genreId = GR.Id
OUTER APPLY
(
  SELECT COUNT(enterNextRound) CountEnterNextRound
  FROM recEntrantStatus
  WHERE enterNextRound = 1
    AND roundId = 2
    AND entrantId = @memberId
) src
WHERE MEM.Id = @memberId
  AND ES.roundId = 2 
```

根据您的编辑，您是否尝试过：

```
SELECT MEM.Id,
   EN.artistName,
   EN.dateAdded,
   EN.voteStatus,
   ES.enterNextRound,
   ES.notified,
   ES.voted,
   GR.genre,
   ES.entrantId AS bandID,
   (SELECT COUNT(enterNextRound) 
    FROM recEntrantStatus
    WHERE enterNextRound = 1
      AND roundId = 2
      AND entrantId = ES.entrantId) CountEnterNextRound
FROM recMembers AS MEM
LEFT JOIN recEntrantStatus AS ES
   ON MEM.Id = ES.judgeId
LEFT JOIN recEntrants AS EN
   ON ES.entrantId = EN.Id
LEFT JOIN recGenre AS GR
   ON EN.genreId = GR.Id
WHERE MEM.Id = @memberId
   AND ES.roundId = 2 
```

甚至：

```
SELECT MEM.Id,
   EN.artistName,
   EN.dateAdded,
   EN.voteStatus,
   ES.enterNextRound,
   ES.notified,
   ES.voted,
   GR.genre,
   ES.entrantId AS bandID,
   src.CountEnterNextRound
FROM recMembers AS MEM
LEFT JOIN recEntrantStatus AS ES
   ON MEM.Id = ES.judgeId
LEFT JOIN recEntrants AS EN
   ON ES.entrantId = EN.Id
LEFT JOIN recGenre AS GR
   ON EN.genreId = GR.Id
LEFT JOIN
(
  SELECT COUNT(enterNextRound) CountEnterNextRound, entrantId
  FROM recEntrantStatus
  WHERE enterNextRound = 1
      AND roundId = 2
  GROUP BY entrantId
) src
  ON ES.entrantId = src.entrantId
WHERE MEM.Id = @memberId
   AND ES.roundId = 2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T15:57:18.653

怎么样

```
SELECT * 
FROM
(
    SELECT MEM.Id, EN.artistName, EN.dateAdded, EN.voteStatus, ES.enterNextRound,
    ES.notified, ES.voted, GR.genre, ES.entrantId AS bandID
    FROM recMembers AS MEM
    LEFT JOIN recEntrantStatus AS ES
    ON MEM.Id = ES.judgeId
    LEFT JOIN recEntrants AS EN
    ON ES.entrantId = EN.Id
    LEFT JOIN recGenre AS GR
    ON EN.genreId = GR.Id
    WHERE MEM.Id = @memberId
    AND ES.roundId = 2
) x
,
(
    SELECT COUNT(enterNextRound) as Total
    FROM recEntrantStatus
    WHERE enterNextRound = 1
    AND roundId = 2
    AND entrantId = @memberId
) y 
```

当您从没有连接的 2 个表中执行操作时，您会得到一个笛卡尔积，例如交叉连接。所以它应该是相同的执行时间。

这是写它的隐式方式。

# html - 无法在清单更新时获取 iOS webapp 文件。401未经授权

> ID：13532329
> 
> 赞同：6
> 
> 时间：2012-11-23T15:55:18.713
> 
> 标签：html, caching, web-applications, basic-authentication, cache-manifest

我有一个 HTML5 webapp，它在通过 IIS 提供服务时运行良好，无需身份验证。

是使用 cache.manifest 文件。

无论是在 safari 中运行时，还是作为“添加到主屏幕”全屏应用程序时，一旦我更新服务器上的清单文件，应用程序就会更新。

当我打开除了 cache.manifest 之外的所有文件的身份验证时，我只会在 safari 浏览器中运行它时看到更新。

如果我将它添加到主屏幕，我无法让应用程序更新缓存。

如果我对服务器上的流量进行wireshark，我可以看到清单文件被毫无问题地获取，但清单文件中的所有文件都会遇到401 Unautorized错误。

知道如何解决这个问题吗？在 safari 浏览器中运行它正在工作..

**非常**感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T00:49:17.090

Safari 更了解 HTTP 基本身份验证，但 web.app（主屏幕 Web 应用程序处理程序，基本上是一个 UIWebView 包装器）没有那么全功能并且似乎不支持基本身份验证。

看来您可能需要使用服务器端解决方案来解决此问题，将身份验证密钥附加到文件名（例如 application.css? *longhexkey*）以绕过基本身份验证，或者使用更传统的登录表单（可能需要对您的应用进行重大更改）

Sencha 论坛上的相同问题：[未回答：在 iOS 设备上离线使用后强制重新认证？](http://www.sencha.com/forum/showthread.php?237607-Forcing-re-authentication-after-offline-usage-on-iOS-devices)

# jquery - jQuery“view.js”在使用 jQuery 加载函数加载的页面中不起作用

> ID：13532330
> 
> 赞同：0
> 
> 时间：2012-11-23T15:55:18.420
> 
> 标签：jquery, photo, viewer

这是我的代码：

```
var t_slide = $("#6_toggle");
t_slide.load("6_toggle/1.html"); 
```

这是1.html

```
<script type="text/javascript" src=" URL PATH .. js/view.min.js"></script> 

<a class="view" ... </a>    
<a class="view" ... </a> 
```

当我直接打开 1.html 时它运行良好，但当我使用 load 函数将它加载到我的 div 时它不会

有人有线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:56:36.013

这仅仅是因为脚本 url 不再有效，因为`1.html`它不在同一个目录中。脚本相对于执行它的页面加载。

在您的路径之前添加`../`或使其成为绝对路径`/`（如果您希望您的页面在这两种情况下都可以使用）。

# .net - 在 .NET 中打开帮助文件 (chm)

> ID：13532341
> 
> 赞同：0
> 
> 时间：2012-11-23T15:56:33.000
> 
> 标签：.net, vb.net, visual-studio, chm

我正在尝试使用 VB.NET 打开帮助文件

```
Help.ShowHelp(helpForm, sFile, HelpNavigator.TableOfContents, "Indice degli argomenti per la stampa") 
```

或者

```
Help.ShowHelp(helpForm, sFile, HelpNavigator.TableOfContents, 150) 
```

但不起作用。

如何打开此内容

![在此处输入图像描述](../Images/a994c755a1b555713bc62bbff54b964d.png)

使用`Help.ShowHelp`方法？

谢谢，路易吉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T17:01:19.317

Help.ShowHelp() 的 MSDN 库文章中明确提到了这一点：

> 您可以使用*param*参数进一步优化 Topic、TopicId、KeywordIndex 或 AssociateIndex 命令。如果命令参数中指定的值为 TableOfContents、Index 或 Find，**则该值应为空字符串**。如果命令参数引用 Topic、TopicId、KeywordIndex 或 AssociateIndex，则该值应该是包含主题名称的字符串，或者要显示的主题的关键字或数字标识符。

所以使用 Topic 或 TopicId 而不是 TableOfContents。

该 api 在其他方面不够复杂，无法让您安排帮助查看器窗口，如果那是您真正想要的。这取决于用户。

# javascript - jQuery：将文件类型类添加到任何文件类型的链接

> ID：13532344
> 
> 赞同：8
> 
> 时间：2012-11-23T15:56:41.887
> 
> 标签：javascript, jquery, regex

```
$("a[href $='.pdf']" ).addClass("linkIconPDF");
$("a[href *='.pdf#']").addClass("linkIconPDF");
$("a[href *='.pdf;']").addClass("linkIconPDF");
$("a[href *='.pdf?']").addClass("linkIconPDF");

$("a[href $='.txt']" ).addClass("linkIconTXT");
$("a[href *='.txt#']").addClass("linkIconTXT");
$("a[href *='.txt;']").addClass("linkIconTXT");
$("a[href *='.txt?']").addClass("linkIconTXT"); 
```

到目前为止一切顺利，但如何简化它以匹配任何文件类型？

是否可以进行一些正则表达式分组以匹配所有可能的文件类型？

```
$("a[href $='.([a-zA-Z0-9]{2,4})']" ).addClass("linkIcon$1"); 
```

测试脚本：http: [//jsfiddle.net/k2jqn/](http://jsfiddle.net/k2jqn/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T16:00:25.107

```
$("a").each(function(){
    var match = this.href.match(/\.([a-zA-Z0-9]{2,4})([#;?]|$)/);
    if(match){
        $(this).addClass("linkIcon" + match[1]);
    }
}); 
```

演示：http: [//jsfiddle.net/k2jqn/4/](http://jsfiddle.net/k2jqn/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:00:41.007

### 您可以简单地使用通配符选择器：

```
$("a[href*='.pdf']" ).addClass("linkIconPDF");
$("a[href*='.txt']" ).addClass("linkIconTXT"); 
```

它以通配符方式选择链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T16:01:52.113

为什么不试试这个

```
$("a[href $='.$']" ).addClass("linkIconANYFILE"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T16:03:41.980

带有每个函数的数组会比使用正则表达式选择器更好吗？

```
var fileTypes = new Array("a[href $='.pdf']","a[href *='.pdf#']");
fileTypes.each(function(index,val){
    $(val).addClass('LinkIconPDF');
}); 
```

# python - 正确锁定方法调用

> ID：13532349
> 
> 赞同：2
> 
> 时间：2012-11-23T15:57:06.117
> 
> 标签：python, concurrency, thread-safety

我正在与测量设备交谈。我基本上发送命令并接收答案。但我提供了一种`ask`发送命令并读回答案的方法。如果我锁定这个方法，我会因为调用的方法`read`和`write`锁定而陷入死锁。如果我不锁定另一个线程可能会在我阅读之前窃取答案或写入。你将如何实现这一点？

```
import threading

class Device(object):
    lock = threading.Lock()
    def ask(self, value):
        # can't use lock here would block
        self.write(value) # another thread could start reading the answer
        return self.read()

    def read(self):
        with self.lock:
            # read values from device

    def write(self, value):
        with self.lock:
            # send command to device 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:02:57.590

用于[`threading.RLock()`](http://docs.python.org/2/library/threading.html#rlock-objects)避免单个线程内的争用：

> 可重入锁是一种同步原语，可以由同一线程多次获取。在内部，除了原始锁使用的锁定/解锁状态外，它还使用“拥有线程”和“递归级别”的概念。在锁定状态下，某个线程拥有锁；在解锁状态下，没有线程拥有它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:30:10.730

您可以使用 threading.RLock() 对象来做可重入锁。但是这样重写代码更好，它不需要RLock。例如，您可以以类似的方式从 write()、read() 和 rewrite ask() 中删除锁

> ```
>  with self.lock:
>         self.write(value)
>         r = self.read()
>     return r 
> ```

旧版本的 python 中的 RLock() 工作速度较慢，因为它的实现更复杂。

另请注意，在您编写的代码中，您会为所有实例获得一个锁。在某些情况下它是合适的（例如，如果您只有一个设备和许多实例），但通常不是。如果您想为不同的实例使用不同的锁，请将其初始化放在 __init__() 方法中。

# sqlite - 我正在尝试在 Python 3 上的 SQLite3 中使用 UPDATE 函数，尽管我不断收到错误

> ID：13532350
> 
> 赞同：0
> 
> 时间：2012-11-23T15:57:09.653
> 
> 标签：sqlite, python-3.x

我不确定为什么这不起作用。当我尝试运行循环的任何部分时，我得到 sqlite3.OperationalError: near "WHERE": 语法错误。

```
 con = sqlite3.connect('DatabaseName.sql')
    cur = con.cursor()

    if changes == "1":
        Fname = input("Enter new first name: ")
        Lname = input("Enter the last name of the person whom first name you wish to change: ")
        cur.execute("""UPDATE Contacts SET Fname WHERE Lname""")
        con.commit()
    elif changes == "2":
        Lname = input("Enter new last name: ")
        Fname = input("Enter the first name of the person whom last name you wish to change: ")
        cur.execute("UPDATE Contacts SET Lname WHERE Fname")
        con.commit()
    elif changes == "3":
        Phone = input("Enter new telephone number(no dashes or spaces): ")
        Fname = input("Enter the first name of the person whom telephone number you wish to change: ")
        Lname = input("Enter the last name of the person whom telephone number you wish to change: ")
        Phone = int(Phone)
        cur.execute("""UPDATE Contacts SET Phone WHERE Fname AND Lname""")
        con.commit() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:30:21.450

Python 和 SQL 是两种完全独立的语言；您不能直接从另一个访问变量。

要将 Python 变量的*值*传递到 SQL 命令中，请使用参数，如下所示：

```
cur.execute("UPDATE Contacts SET FirstName = ? WHERE LastName = ?", (Fname, Lname)) 
```

（这里，`FirstName`和`LastName`是表中的列名，可能与 Python 变量名相同，也可能不同。）

# java - 在 Spring MVC 中获取 HTTP 请求参数

> ID：13532357
> 
> 赞同：0
> 
> 时间：2012-11-23T15:57:59.470
> 
> 标签：java, spring, spring-mvc, parameters, http-request

我在 Spring MVC 中获取 HTTP 请求的参数时遇到问题。

在我看来，我有以下链接：

```
<li>
  <a id="byParameter2" class="textLink" 
   href="<c:url value="/mapping/parameter?myparam=blabla" />">(PERSONALE) By path, method, and presence of parameter with value="blabla"</a>
</li> 
```

这是我的控制器类代码：

```
package org.springframework.samples.mvc.mapping;

import javax.servlet.http.HttpServletRequest;

import org.springframework.http.MediaType;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller

public class MappingController {

/* Gestisce HTTP Request di tipo GET che contengono un parametro di nome "foo" verso il percorso "/mapping/parameter"
 * Restituisce una stringa nel campo body della HTTP Response
 */
@RequestMapping(value="/mapping/parameter", method=RequestMethod.GET, params="foo")
public @ResponseBody String byParameter() {
    return "Mapped by path + method + presence of query parameter!";
}

/* (PERSONALE) Gestisce richieste HTTP di tipo GET verso il path "/mapping/parameter" solo se NON contengono un parametro di input di nome "myparam"
 * e ne estrae il valore */
@RequestMapping(value="/mapping/parameter", method=RequestMethod.GET, params="myparam")
public @ResponseBody String byParameter(@RequestParam("myparam") String myparam) {
    return "Mapped by path + method + presence of query parameter! (MappingController). Parameter value = " + myparam;
    }

/* Gestisce HTTP Request di tipo GET che NON contengono un parametro di nome "foo" verso il percorso "/mapping/parameter"
 * Restituisce una stringa nel campo body della HTTP Response 
*/
@RequestMapping(value="/mapping/parameter", method=RequestMethod.GET, params="!foo")
public @ResponseBody String byParameterNegation() {
    return "Mapped by path + method + not presence of query parameter!";
}

} 
```

问题是，当我运行我的应用程序时，如果我单击生成针对`"/mapping/parameter?myparam=blabla"`此请求的 HTTP 请求的链接，我的方法不会处理我的`public @ResponseBody String byParameter(@RequestParam("myparam") String myparam)`方法，并且我在浏览器中有以下错误消息：

```
**HTTP Status 500 - Request processing failed; nested exception is java.lang.IllegalStateException: Ambiguous handler methods mapped for HTTP path 'http://localhost:8080/spring-mvc-showcase/mapping/parameter': {public java.lang.String org.springframework.samples.mvc.mapping.MappingController.byParameter2(java.lang.String), public java.lang.String org.springframework.samples.mvc.mapping.MappingController.byParameterNegation()}**

And the following error in the stack trace:

**SEVERE: Servlet.service() for servlet [appServlet] in context with path [/spring-mvc-showcase] threw exception [Request processing failed; nested exception is java.lang.IllegalStateException: Ambiguous handler methods mapped for HTTP path 'http://localhost:8080/spring-mvc-showcase/mapping/parameter': {public java.lang.String org.springframework.samples.mvc.mapping.MappingController.byParameter2(java.lang.String), public java.lang.String org.springframework.samples.mvc.mapping.MappingController.byParameterNegation()}] with root cause
java.lang.IllegalStateException: Ambiguous handler methods mapped for HTTP path 'http://localhost:8080/spring-mvc-showcase/mapping/parameter': {public java.lang.String org.springframework.samples.mvc.mapping.MappingController.byParameter2(java.lang.String), public java.lang.String org.springframework.samples.mvc.mapping.MappingController.byParameterNegation()}
    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.lookupHandlerMethod(AbstractHandlerMethodMapping.java:262)
    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.getHandlerInternal(AbstractHandlerMethodMapping.java:212)
    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.getHandlerInternal(AbstractHandlerMethodMapping.java:55)
    at org.springframework.web.servlet.handler.AbstractHandlerMapping.getHandler(AbstractHandlerMapping.java:297)
    at org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:1091)
    at org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:1076)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:896)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:856)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:917)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:813)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:798)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)** 
```

为什么？问题出在哪里？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:02:24.143

尝试

`@RequestMapping(value="/mapping/parameter", method=RequestMethod.GET, params="myparam,!foo")`给你第二种方法。

和

`@RequestMapping(value="/mapping/parameter", method=RequestMethod.GET, params="!myparam,!foo")`对于第三种方法

# mysql - 用“like”语句编写查询

> ID：13532358
> 
> 赞同：0
> 
> 时间：2012-11-23T15:58:01.247
> 
> 标签：mysql, sql-like

我想编写一个查询来选择标题以字母开头的项目，例如：

```
select * from items where title like "A%"; 
```

但是一些项目名称以“A 或 'A 开头，我想知道是否有可能，所以我的查询包含所有这些形式的标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:00:21.657

```
select * from items where title like 'A%' or title like '\'A%'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:00:57.403

或者，如果有很多 OR 的可能性，您可以使用正则表达式。

# grails - 服务中的 grailsApplication null

> ID：13532360
> 
> 赞同：6
> 
> 时间：2012-11-23T15:58:06.993
> 
> 标签：grails

我的 Grails 应用程序中有一个服务。但是，我需要在我的应用程序中访问配置以进行某些配置。但是当我试图`def grailsApplication`在我的服务中使用它时它仍然为空。

我的服务在“服务”下。

```
class RelationService {

    def grailsApplication

    private String XML_DATE_FORMAT = "yyyy-MM-dd"
    private String token = 'hej123'
    private String tokenName
    String WebserviceHost = 'xxx'

    def getRequest(end_url) {

        // Set token and tokenName and call communicationsUtil
        setToken();
        ComObject cu = new ComObject(tokenName)

        // Set string and get the xml data
        String url_string = "http://" + WebserviceHost + end_url
        URL url = new URL(url_string)

        def xml = cu.performGet(url, token)

        return xml
    }

    private def setToken() {
        tokenName = grailsApplication.config.authentication.header.name.toString()
        try {
            token = RequestUtil.getCookie(grailsApplication.config.authentication.cookie.token).toString()
        }
        catch (NoClassDefFoundError e) {
            println "Could not set token, runs on default instead.. " + e.getMessage()
        }
        if(grailsApplication.config.webservice_host[GrailsUtil.environment].toString() != '[:]')
            WebserviceHost = grailsApplication.config.webservice_host[GrailsUtil.environment].toString()

    }

} 
```

我已经查看了将[grails 应用程序配置注入服务](https://stackoverflow.com/questions/4973919/inject-grails-application-configuration-into-service)，但它没有给我答案，因为一切似乎都是正确的。

但是我这样称呼我的服务：`def xml = new RelationService().getRequest(url)`

**编辑：**

忘记输入我的错误，即：`Cannot get property 'config' on null object`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:24:02.100

您的服务是正确的，但您调用它的方式不是：

```
def xml = new RelationService().getRequest(url) 
```

因为您正在“手动”实例化一个新对象，所以实际上绕过了 Spring 进行的注入，因此“grailsApplication”对象为空。

您需要做的是使用 Spring 注入您的服务，如下所示：

```
class MyController{

    def relationService 

    def home(){
       def xml = relationService.getRequest(...)
    }

} 
```

# android - 如何在线性布局中添加空白区域？

> ID：13532361
> 
> 赞同：0
> 
> 时间：2012-11-23T15:58:09.410
> 
> 标签：android, android-layout

我想在我的线性布局中的行的右侧添加一个图像按钮。我尝试使用左侧填充，但填充区域可见灰色阴影。如何使用线性布局但没有阴影来实现这一点。有人知道如何实现这一目标吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:02:53.863

`android:gravity="right"`到您的 XML 代码中应该可以解决问题。本质上，这将迫使视图转向视图的右侧。

# javascript - 如何在jQuery中解析日期字符串并检查它是否在过去

> ID：13532366
> 
> 赞同：2
> 
> 时间：2012-11-23T15:58:29.490
> 
> 标签：javascript, jquery, date

我需要检查日期是否过去。这就是我到目前为止所拥有的。[JSfiddle 在这里](http://jsfiddle.net/bts9b/)。

```
var date = "09/12/2013";
var d = new Date();
var month = d.getMonth() + 1;
var day = d.getDate();
var todaysDate = +(('' + day).length < 2 ? '0' : '') + day + '/' + (('' + month).length < 2 ? '0' : '') + month + '/' + d.getFullYear();

if (date < todaysDate) {
    alert("in the past");
} else {
    alert("in the future");
} 
```

目前它说日期是过去，应该在未来。我知道我需要将字符串解析为日期，但不确定如何。

帮助？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T16:02:54.780

使用该输入格式，您不能使用字符串比较，因为最不重要的值在左侧。**注意**：我假设那个日期是 2013 年 12 月 9 日。如果你在 2013 年 9 月 12 日做美国的事情，你必须将索引调整到`parts`下面。

您*可以*反转字段：

```
var date = "09/12/2013";
var parts = date.split('/');
date = parts[2] + "/" + parts[1] + "/" + parts[0]; 
```

...然后进行字符串比较（确保以相同的顺序构造“今天”的字符串 - 年/月/日）。

如果你打算这样做，你可以继续完成工作

```
var date = "09/12/2013";
var parts = date.split('/');
var date = new Date(parseInt(parts[2], 10),     // year
                    parseInt(parts[1], 10) - 1, // month, starts with 0
                    parseInt(parts[0], 10));    // day
if (date < new Date()) {
    // It's in the past, including one millisecond ago
} 
```

...但是当然，如​​果您不希望表达式在一毫​​秒前为真，那么您的字符串方法就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:03:24.377

```
var date = new Date("09/12/2013");
var d = new Date();
console.log(date>d); // true
var date = new Date("09/12/2011");
console.log(date>d); // false 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-23T16:03:57.420

JavaScript 的本机日期比较器仅适用于日期对象，而您正在比较字符串。您应该解析`date`成一个`Date`对象，然后将其与`d`.

```
//define parse(string) --> Date
if(parse(date) < new Date()) {
  alert('past');
} else {
  alert('future');
} 
```

# database - 恢复超过 20gb 的 postgres sql 文件

> ID：13532369
> 
> 赞同：3
> 
> 时间：2012-11-23T15:58:44.460
> 
> 标签：database, postgresql

我们有一个 sql 32gb 格式的数据库备份（包含超过 50mb 的各种二进制文件），但是当我们导入数据时，实际上只有 8gb 放在工作台上。

我们已经完成了从将 Postgres 8.3 版本更改为 Postgres 9.1 的所有工作，即便如此，并非所有内容都被导入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T18:05:32.943

对于 Postgres 来说这可能是正常的。

当您将二进制数据导出到 sql 文件时，它必须被编码为`base64`并正确转义。这种编码和转义可以将输出文件的大小增加 2-6 倍（根据我的经验）。+ sql 转储格式增加了`INSERT`/`COPY`命令的开销。

尝试以二进制格式转储基数，以查看二进制转储的大小。

# outlook - ical 文件在 Outlook 中针对同一事件多次保存并显示为冲突

> ID：13532371
> 
> 赞同：2
> 
> 时间：2012-11-23T15:58:51.220
> 
> 标签：outlook, icalendar

当我尝试多次打开 ics 文件并在 Mac 机器中多次保存时，它将仅保存为一个实例，但在 windows Outlook 中，如果我多次打开并保存多次，它将保存为多个实例

这是我的 ics 文件

```
BEGIN:VCALENDAR
VERSION:2.0
METHOD:PUBLISH
BEGIN:VEVENT
DTSTART:20121205T160000Z
DTEND:20121205T164500Z
UID:1ED83D316-B120-441D-8D15-3A8B37275060
SUMMARY: Test Ics  for Multiple Instances 
DESCRIPTION: Lorem ipsum dolor sit amet, palpat venas tanquam vero quo.\n Interrogo nata dum animae tertio eam sed eu fides piissimi sibi ambulare est cum autem Apolloni sed. Etiam audiens.
LOCATION:My Own Location, Place
SEQUENCE:0
BEGIN:VALARM
ACTION:DISPLAY
DESCRIPTION:REMINDER
TRIGGER;RELATED=START:-PT00H15M00S
END:VALARM
END:VEVENT
END:VCALENDAR 
```

你可以看到输出：http: [//i.stack.imgur.com/HqyG0.png](http://i.stack.imgur.com/HqyG0.png)

我该如何解决这个问题。

# vba - 我想强制 Word 2007 将来自任何其他来源的文本粘贴为保持格式的红色文本

> ID：13532373
> 
> 赞同：1
> 
> 时间：2012-11-23T15:59:00.160
> 
> 标签：vba, ms-word

我正在使用 Word 2007。我必须使用来自各种来源的文本创建一个复杂的文档。我想要做的是强制所有粘贴到文档中的文本为红色但保留所有其他格式属性的 crate 模板。然后我将能够快速识别任何没有应用我的样式的粘贴文本。是否可以使用 VBA 来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T19:09:12.033

您需要在文档中捕获所有可能的粘贴操作，并将粘贴的单元格文本设为红色。由于有几种可能的方法可以在 Excel 中执行复制/粘贴，因此这不是一项简单的任务。这是一个很好的讨论，可以帮助您入门：

[捕捉粘贴操作](http://www.jkp-ads.com/articles/catchpaste.asp)

# git - Go 的 git 库

> ID：13532389
> 
> 赞同：27
> 
> 时间：2012-11-23T16:00:04.167
> 
> 标签：git, go

作为一个宠物项目，我想开发一个使用 git 作为存储后端的笔记应用程序。（我怀疑这还不存在，鉴于此人的博客文章：http: [//jarofgreen.co.uk/2012/08/how-about-a-mobile-note-app-backed-by-git/](http://jarofgreen.co.uk/2012/08/how-about-a-mobile-note-app-backed-by-git/)）

现在，我想借此机会玩一下围棋。但是，我似乎找不到任何适用于 Go 的 git 库（甚至是最小的方法）。真的有吗？

显然我对 Go 的了解是不存在的，所以为 libgit 编写绑定似乎不是一个有趣的开始方式......（我可能会求助于 ruby​​，我也不知道）

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-07-02T15:21:34.000

我想说[git2go](https://github.com/libgit2/git2go)是在 Go 中使用的 git 绑定库。它会定期更新并由运行 libgit2 的人员维护。

如果你正在寻找一个纯粹用 Go 编写的 git 实现，那么[go-git](https://github.com/go-git/go-git)是最成熟和最活跃的选择。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-23T16:15:16.513

您可以使用Go 标准库中的[os/exec](http://golang.org/pkg/os/exec/)`git`包来执行命令。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-01-21T04:20:44.663

几年前，我和我的团队在 Go 中编写了一个纯 git 实现，它避免了任何 c/c++ 依赖并使其更加灵活和易于扩展。

[https://github.com/go-git/go-git](https://github.com/go-git/go-git)

> go-git 旨在达到 libgit2 或 jgit 的完整性，现在涵盖了大部分管道读取操作和一些主要的写入操作，但缺少合并等主要瓷器操作。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-11-23T16:38:20.603

Victor 提出的确实是其开发人员所设想的“脚本”Git 的“官方”方式。Git 的命令专门为此目的分为两大类：“管道”命令是低级的，主要用于其他程序；“瓷器”命令旨在与用户交互，并调用管道命令来完成他们的工作。查看`/usr/lib/git-core`目录内部（可能在您的系统上有所不同）以了解 Git 有多少管道命令。

另一方面，Go 支持通过其[`cgo`](http://golang.org/cmd/cgo/)工具与共享库链接。因此，您可以尝试[`libgit2`](http://libgit2.github.com/)使用它进行包装。AFAIK，`libgit2`还没有完全与 Git 本身相提并论，但它能够读/写 Git 存储库、进行分支等——据说它足以完成你的任务。

好的，在我写完所有内容之后，我向下滚动了`libgit2`网站上的“Bindings”条目，发现[`go-git`](https://github.com/str1ngs/go-git)......

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-23T16:42:13.747

在[GoDoc 上搜索“git”](http://godoc.org/?q=git)会出现一些项目。有一个 libgit2 包装器，底部是[Go 中未完成的 Git 实现](https://github.com/edsrzf/go-git)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-02-11T02:59:42.733

golang [-gitoperations](https://github.com/amzn/golang-gitoperations)模块为命令行工具提供了一个基于 os/exec 的接口。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-19T16:05:20.740

> 使用 git 作为存储后端

那么 Go 库[**`fluxcd/go-git-providers`**](https://github.com/fluxcd/go-git-providers)就可以派上用场了。

> `go-git-providers`是一个通用的 Go 客户端，用于与 Git 提供者的 API（例如 GitHub、GitLab、Bitbucket）进行交互。

例子：

```
package github_test

import (
    "context"
    "fmt"

    "github.com/fluxcd/go-git-providers/github"
    "github.com/fluxcd/go-git-providers/gitprovider"
    gogithub "github.com/google/go-github/v32/github"
)

func ExampleOrgRepositoriesClient_Get() {
    // Create a new client
    ctx := context.Background()
    c, err := github.NewClient()
    checkErr(err)

    // Parse the URL into an OrgRepositoryRef
    ref, err := gitprovider.ParseOrgRepositoryURL("https://github.com/fluxcd/flux")
    checkErr(err)

    // Get public information about the flux repository.
    repo, err := c.OrgRepositories().Get(ctx, *ref)
    checkErr(err)

    // Use .Get() to aquire a high-level gitprovider.OrganizationInfo struct
    repoInfo := repo.Get()
    // Cast the internal object to a *gogithub.Repository to access custom data
    internalRepo := repo.APIObject().(*gogithub.Repository)

    fmt.Printf("Description: %s. Homepage: %s", *repoInfo.Description, internalRepo.GetHomepage())
    // Output: Description: The GitOps Kubernetes operator. Homepage: https://docs.fluxcd.io
} 
```

# c - 如何在 fork() 中获取 execvp 错误？

> ID：13532391
> 
> 赞同：1
> 
> 时间：2012-11-23T16:00:06.490
> 
> 标签：c, fork, execvp

我有以下代码。

我的问题在代码中

```
 int main() {

            ....

         if ((uproc.pid = fork()) == -1) {
            return -1;
        }

        if (uproc.pid == 0) {
            /* child */

            const char *argv[3];
            int i = 0;
            argv[i++] = "/bin/sh";
            argv[i++] =  "/my/script.sh";
            argv[i++] = NULL;

            execvp(argv[0], (char **) argv);
            exit(ESRCH);

        } else if (uproc.pid < 0)
            return -1;

        /* parent */
        int status;
        while (wait(&status) != uproc.pid) {
            DD(DEBUG,"waiting for child to exit");
        }

           // If /my/script.sh exit accidentally in some place with error. 
           // can I catch this error right here?
          ......
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T16:07:21.393

子进程的退出状态由`wait`函数在`status`变量中提供。

您可以使用`WEXITSTATUS`宏获得退出状态，但前提是程序正常退出（即`exit`从其`main`函数调用或返回）：

```
if (WIFEXITED(status))
    printf("Child exit status: %d\n", WEXITSTATUS(status));
else
    printf("Child exited abnormally\n"); 
```

阅读[手册页以`wait`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/wait.html)获取更多信息。

# .net - 每 72 个字符后换行

> ID：13532393
> 
> 赞同：1
> 
> 时间：2012-11-23T16:00:10.897
> 
> 标签：.net

有一些长的 base64 字符串，必须每 72 个字节用换行符格式化并转换为字节数组。

有：

```
Convert.ToBase64String(Convert.FromBase64String("..."), Base64FormattingOptions.InsertLineBreaks) 
```

但它每 76 个字节插入新行。以及如何将其转换回保留新行的字节数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:07:32.970

在循环中设置字符串`StringBuilder`并使用方法`Insert()`

```
var sb = new StringBuilder("the string");
for (int i = 72; i < sb.Length; i+=74)//72 + "\r\n"
{
    sb.Insert(i, "\r\n");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-27T01:06:04.140

如果其他人想在 VB 中执行此操作...我将 @burning_LEGION 的拆分循环转换为 VB.NET，如下所示：

```
For i = 72 To sb.Length Step 74
    sb.Insert(i, vbCrLf)
Next 
```

这有一个问题：当 for 循环开始时，“end”语句 ( `sb.Length`) 只被评估一次。例如，如果字符串长度为 656 个字符，VB 只会将其拆分为 8 行，即使在添加 CRLF 之后，它应该是 9 行。这使得最后一行比其他行更长。对于一个非常大的物体，这可能非常重要。

显然，该`Do While`语句的行为符合预期，随着字符串变长，在每次迭代中重新计算“while”条件：

```
i = 72
Do While i < sb.Length
    sb.Insert(i, vbCrLf)
    i += 74
Loop 
```

# javascript - 如何在 View (ASP.NET MVC3) 中管理单个事件中的所有元素

> ID：13532399
> 
> 赞同：0
> 
> 时间：2012-11-23T16:00:23.220
> 
> 标签：javascript, jquery, jquery-selectors, delegates

我需要我的 asp.net mvc3 应用程序中的点击跟踪模块。问题是如何在 View (Razor) ASP.NET MVC3 中的单个事件中管理所有元素（文本框、按钮、超链接标记、段落标记、div 标记...）。我可以将委托事件方法（）与 jquery 一起使用来管理所有事件吗？？？

下面是我的“查看页面”Html 代码：

```
<p>Click this paragraph1.</p>
<p>Click this paragraph2.</p>
<p>Click this paragraph3.</p>
<p>Click this paragraph4.</p>
<div style="background-color:yellow">
heyyy
<button>Click me!</button>
<input type="text">
<a href="http://stackoverflow.com/users/1841626/user1841626">user1841626</a>
</div> 
```

那是我的 jquery 脚本：

```
<script src="jquery.js"></script>
<script>
$(document).ready(function(){
  $("div").delegate("button","click",function(){
    alert("The button was clicked.");
  })
 $("p").on("click",function(){
  alert("The paragraph was clicked.");
 })
 $("input ").on("click",function(){
  alert("The textBox was clicked.");
 })
 $("a ").on("click",function(){
  alert("The user1841626 was clicked.");
 })
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:27:41.040

如果我理解正确你想要

```
$(document).ready(function(){
    $('div').on('click','button, p, input, a',function(e){
        var tag = this.tagName.toLowerCase(),
            message = '';
        switch(tag){
            case 'a': 
                message = 'user1841626';
                break;
            case 'button': 
                message = 'button';
                break;
            case 'p': 
                message = 'paragraph';
                break;
            case 'input': 
                message = 'textBox';
                break;
        }
        alert('The ' + message + ' was clicked.');
    })
}); 
```

# android - XmlPullParser:PI不能以xml开头，只能在Android 2.3.3以下

> ID：13532401
> 
> 赞同：6
> 
> 时间：2012-11-23T16:00:29.297
> 
> 标签：android, xml-parsing, xmlpullparser

我在 Android 3.0+ 上没有错误，但只有在 Android 2.2、2.3.3 上，当我尝试通过 解析一个小的 XML 文件时`XmlPullParser`，应用程序因错误而中断：

```
org.xmlpull.v1.XmlPullParserException: PI must not start with xml 
(position:unknown @1:5 in java.io.InputStreamReader@40568770) 
```

**错误中提到的 PI 是什么？？？**

我发现这可能会导致 XML 文件 ( `<?xml version="1.0" encoding="utf-8"?>`) 的第一行，但我没有找到在较低的 Android 版本上发生这种情况的原因。

如果这是错误的原因（XML 文件的第一行），我该如何解决？

**我应该：**
a) 要求 Web 服务器的管理员更改 XML？如果是，他应该在 XML 中更改什么？
b) 子字符串`InputStream`使用`BufferedReader`？

不知何故，我认为第二种方法会在弱安卓手机上**造成额外的延迟。**

**编辑**

我从调试器中提取 XML 内容，看到第一个 like 以 结尾`\r\n`，然后下一个字符开始。这对你有什么影响吗？

这就是 XML 文件的样子。这是一个很小的应用程序崩溃的视觉原因。

```
<?xml version="1.0" encoding="utf-8"?>
<song>
  <artist>Pink Floyd</artist>
  <title>Shine On You Crazy Diamond</title>
  <picture>http://www.xxyz.com/images/image.jpg</picture>
  <time>Fri, 23 Nov 2012 11:22:31 GMT</time>
</song> 
```

这就是从这个 XML 中获取的 InputStream 的样子（仅起始字符）。

![](../Images/a1b6562fb9f9b4ad66ed7c6a1cd99dc2.png)

请指教！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-26T16:30:45.613

我在应用程序上使用的数据文件遇到了同样的问题。在 android 2.3.* 上有这个异常，问题是 UTF-8 BOM，所以我在 Windows 上找到的更简单的解决方案是使用 Notepad++ 工具，它可以让你将文件编码转换为 UTF-8 而没有 BOM 和而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-03T09:37:15.357

在检查了 xml 解析器源之后，似乎问题是由于响应开头的字节顺序标记而发生的，在我的例子中是 '77u/'（在 base64 中）。如果您不将流转换为 String 而是直接对其进行解析，则解析器会正确地将其丢弃。

例如，而不是

```
String xml = new String(xmlData, "UTF-8");
KXmlParser parser = new KXmlParser();
parser.setInput(new StringReader(xml)); 
```

利用

```
KXmlParser parser = new KXmlParser();
parser.setInput(new ByteArrayInputStream(xmlData), null); 
```

作为替代方案，您也可以子字符串直到第一个 '<'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-16T06:48:02.680

遇到了同样的问题。

对我来说，我`'\n'`用空间替换了所有`' '`内容，然后它就起作用了。

**PS：**

@Ahmad 说，之前的空行也可能导致此问题，最好检查 xml 字符串的第一个字符 '<'。

# wpf - 在 wpf 3D 中创建可点击的点状结构

> ID：13532408
> 
> 赞同：3
> 
> 时间：2012-11-23T16:00:45.757
> 
> 标签：wpf, vb.net, 3d

我有一个 point3D 坐标，我想在视口中显示它。有谁知道如何建模一个以 point3D 为中心点、半径为 2px 的小球？

简而言之：我如何在 wpf 中创建一个可点击的 3D 点（因此请不要引用 helixtoolkit）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:17:49.453

我已经想通了。制作了一个继承自modelvisual3D的类，并使用helixtoolkit的meshbuilder创建了一个具有一定直径的球体。然后将此网格添加到我的类的内容元素（继承 modelvisual3D）。

对于可点击的部分，我在我的视口上使用了 hittest。我本来想使用**modeluielement3D**但你不能继承它。有人对这部分有任何想法吗？

@Moderators：主题可以关闭

# ios6 - iOS 6 分段控制自定义色调颜色

> ID：13532409
> 
> 赞同：2
> 
> 时间：2012-11-23T16:00:46.920
> 
> 标签：ios6, uisegmentedcontrol, tintcolor

下面是我在我的应用程序中使用的代码，用于具有开/关颜色的自定义分段控件。然而，在 iOS 6 中，当视图首次加载时，它是默认颜色。一旦您选择了其中一个部分，就会出现正确的自定义颜色。我需要做什么才能在视图加载时显示它并确保它与不在 iOS 6 上的设备兼容。

```
#define kTagFirst 111
#define kTagSecond 112
#define kTagThird 113

- (IBAction)segmentedControlChanged:(id)sender
{
  UIColor *darkBG = [UIColor colorWithRed:149.0/255.0 green:133.0/255.0 blue:115.0/255.0 alpha:1.0];
  UIColor *lightBG = [UIColor colorWithRed:234.0/255.0 green:232.0/255.0 blue:217.0/255.0 alpha:1.0];
  UIColor *darkText = [UIColor colorWithRed:85.0/255.0 green:72.0/255.0 blue:60.0/255.0 alpha:1.0];
  UIColor *lightText = [UIColor whiteColor];

  [segmentedControl setTintColor:darkBG forTag:kTagFirst];
  [segmentedControl setTintColor:darkBG forTag:kTagSecond];
  [segmentedControl setTintColor:darkBG forTag:kTagThird];
//  [segmentedControl setTextColor:lightText forTag:kTagFirst];
//  [segmentedControl setTextColor:lightText forTag:kTagSecond];
//  [segmentedControl setTextColor:lightText forTag:kTagThird];

  switch (segmentedControl.selectedSegmentIndex)
  {
    case 0:
      mapView.hidden = YES;
      infoView.hidden = YES;
      [segmentedControl setTintColor:darkBG forTag:kTagFirst];
      [segmentedControl setTintColor:lightBG forTag:kTagSecond];
      [segmentedControl setTintColor:lightBG forTag:kTagThird];
      [segmentedControl setTextColor:lightText forTag:kTagFirst];
      [segmentedControl setTextColor:darkText forTag:kTagSecond];
      [segmentedControl setTextColor:darkText forTag:kTagThird];
      //[segmentedControl setShadowColor:lightBG forTag:kTagFirst];
      [segmentedControl setShadowColor:lightBG forTag:kTagSecond];
      [segmentedControl setShadowColor:lightBG forTag:kTagThird];
      break;
    case 1:
      mapView.hidden = NO;
      infoView.hidden = YES;
      [segmentedControl setTintColor:lightBG forTag:kTagFirst];
      [segmentedControl setTintColor:darkBG forTag:kTagSecond];
      [segmentedControl setTintColor:lightBG forTag:kTagThird];
      [segmentedControl setTextColor:darkText forTag:kTagFirst];
      [segmentedControl setTextColor:lightText forTag:kTagSecond];
      [segmentedControl setTextColor:darkText forTag:kTagThird];
      [segmentedControl setShadowColor:lightBG forTag:kTagFirst];
      //[segmentedControl setShadowColor:lightBG forTag:kTagSecond];
      [segmentedControl setShadowColor:lightBG forTag:kTagThird];
      break;
    case 2:
      mapView.hidden = YES;
      infoView.hidden = NO;
      [segmentedControl setTintColor:lightBG forTag:kTagFirst];
      [segmentedControl setTintColor:lightBG forTag:kTagSecond];
      [segmentedControl setTintColor:darkBG forTag:kTagThird];
      [segmentedControl setTextColor:darkText forTag:kTagFirst];
      [segmentedControl setTextColor:darkText forTag:kTagSecond];
      [segmentedControl setTextColor:lightText forTag:kTagThird];
      [segmentedControl setShadowColor:lightBG forTag:kTagFirst];
      [segmentedControl setShadowColor:lightBG forTag:kTagSecond];
      //[segmentedControl setShadowColor:lightBG forTag:kTagThird];
      break;
  }
}

- (void)viewDidLoad

{
  [segmentedControl setTag:kTagFirst forSegmentAtIndex:2];
  [segmentedControl setTag:kTagSecond forSegmentAtIndex:1];
  [segmentedControl setTag:kTagThird forSegmentAtIndex:0];
  [self segmentedControlChanged:nil];

  mapView.hidden = YES;
  infoView.hidden = YES;
  segmentedControl.selectedSegmentIndex = 0; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:29:21.963

您需要将一些逻辑移动到视图中加载方法，该方法在加载时为您的分段栏设置默认色调颜色。现在，您在 IBAction 中拥有所有这些逻辑 - 在第一次选择它之前可能不会被调用。

希望有帮助

# c# - 在 C# 中使用过滤器表达式

> ID：13532412
> 
> 赞同：1
> 
> 时间：2012-11-23T16:00:58.983
> 
> 标签：c#, filtering

从下面的代码中，我想过滤并希望只获取`MasterproductID = 1`它及其下的子代。通过过滤`MasterproductID = 2`和`MasterproductID = 3`. 我可以知道该怎么做吗？谢谢你的帮助。

```
class TreeNode
{
    public int MasterProductId;
    public int? ParentId;
}

protected void Page_Load(object sender, EventArgs e)
{
    var list = new List<TreeNode>{

        new TreeNode{ MasterProductId = 1 },
        new TreeNode{ MasterProductId = 4, ParentId = 1 },
        new TreeNode{ MasterProductId = 7, ParentId= 4 },
        new TreeNode{ MasterProductId = 5, ParentId = 1 },
        new TreeNode{ MasterProductId = 6, ParentId = 1 },

        new TreeNode{ MasterProductId = 2 },
        new TreeNode{ MasterProductId = 7, ParentId = 2 },
        new TreeNode{ MasterProductId = 8, ParentId= 7 },

        new TreeNode{ MasterProductId = 3 },

    };

    foreach (var item in Level(list, null, 0))
    {
        if (item.Value == 0)
        {
            Response.Write(String.Format("<b>MasterProductId={0}, Level={1}", item.Key, item.Value) + "</b><br />");
        }
        else
        {
            Response.Write(String.Format("MasterProductId={0}, Level={1}", item.Key, item.Value) + "<br />");
        }
    }
}

private static IEnumerable<KeyValuePair<int, int>> Level(List<TreeNode> list, int? parentId, int lvl)
{
    return list
        .Where(x => x.ParentId == parentId)
        .SelectMany(x =>
            new[] { new KeyValuePair<int, int>(x.MasterProductId, lvl) }.Concat(Level(list, x.MasterProductId, lvl + 1))
        );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T17:10:14.467

该`Level`方法已经几乎完全符合您的要求。如果`foreach`被修改为指定`ParentId`1：

```
foreach (var item in Level(list, 1, 0)) 
```

然后它将为节点 4、7、8、5 和 6 生成输出。也就是说，它返回一个节点的*后代*。

如果还想包含指定的父节点，只需要将其连接到结果列表中。例如：

```
private static IEnumerable<KeyValuePair<int, int>> LevelIncl(
                 List<TreeNode> list, int parentId)
{
    return new[] {new KeyValuePair<int, int>(parentId, 0)}
              .Concat(Level(list, parentId, 1));
} 
```

接着：

```
foreach (var item in LevelIncl(list, 1)) 
```

这将为节点 1、4、7、8、5 和 6 产生输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:47:17.727

是否有某种原因（从您的示例代码或解释中不明显）您不能简单地使用它？

```
.Where(x => x.MasterProductId == 1 || (x.ParentId.HasValue && x.ParentId.Value == 1)) 
```

* * *

如果按照建议，您正在寻找递归祖先关系，而不仅仅是父关系，那么对您的数据结构进行一些更新将非常有助于实现目标。

```
class TreeNode
{
    public int MasterProductId;
    public int? ParentId;

    private TreeNode parent; 
        // How this gets set requires other data structures, and some knowledge of
        // how you are loading the data--but this should give you the outline of an idea

    public bool HasAncestor(int referenceId, int ancestor) {

        if (!parentId.HasValue) 
        { 
            return false 
        };

        if (parentId.Value == ancestor) 
        {
            return true;
        }

        return parent.HasAncestor(ancestor);                
    }
} 
```

然后，您将能够：

```
 .Where(x => x.MasterProductId == 1 || x.HasAncestor(1)) 
```

实现父级的最佳方式`attribute`取决于`TreeNode`其余的实现细节——我会将其封装在一个容器类中，该类具有`Map<int, TreeNode>`跟踪所有已知节点的 。该映射将用于构造 a`TreeNode`以设置父引用。

# jquery - 是否可以使用 css 转换函数更改元素的高度？

> ID：13532415
> 
> 赞同：0
> 
> 时间：2012-11-23T16:01:35.137
> 
> 标签：jquery, iphone, css, cordova, gpu

我正在通过 PhoneGap 编写应用程序，并且正在使用 css 和 jquery。我知道我可以`scale`使用一个元素，但它似乎对其可见高度没有影响。它只是缩小，但仍然保持空间。我需要某种 GPU 加速高度操作。GPU加速显示/隐藏也可以。

谢谢。

编辑：我的结构是

幻灯片容器 --- 幻灯片 ------ 幻灯片

slides-container 必须`width: 320px; overflow: hidden;`为幻灯片创建一个窗口才能滑动。当我删除溢出时：隐藏；它工作正常，但后来我失去了滑动效果。

实际上发生的事情是，每当我移动到更高高度的幻灯片时，都会出现白色闪光。我在移动后设置了幻灯片高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:11:33.757

我不熟悉Phonegap，但如果你可以使用jQuery，你可以在元素上创建一个jQuery 动画函数。

```
$('#element').click(function(){
    $(this).animate({height : '200px'},100);
}); 
```

animate 函数的工作原理如下。({CSS 操作},duration,callback 函数); 持续时间以毫秒为单位，不需要回调函数。

一些 CSS 方法，例如 margin-left 和 background-color 是不同的。边距的写法如下：marginLeft、marginRight、marginTop。背景颜色和任何其他带有 python 的颜色都需要作为字符串输入。“背景图片”。

希望这很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:51:11.950

得到了答案。只是还没有正确实施。

我想我以前见过一些人谈论它，但它基本上是关于改变容器中幻灯片的高度不够大。改变容器的高度可以解决这个问题。我不能 100% 确定我应该将容器的高度更改为哪个值。反正我的问题。不过，如果我发现一些通用的东西，我会告诉你的。

现在我会说确保容器可以将其元素放入其中。

此外; -webkit-backface-visibility：隐藏；这个-webkit-transform-style：preserve-3d；也有帮助。

# grails - Grails 单元测试：通过 grailsApplication 访问定义的 bean

> ID：13532417
> 
> 赞同：2
> 
> 时间：2012-11-23T16:01:43.410
> 
> 标签：grails, grails-2.0

我有一些（非 Grails 工件）类通过传递*grailsApplication*对象来访问服务层 bean。但是，我在对以这种方式实现的类进行单元测试时遇到了麻烦。为什么 bean 没有在主上下文中注册？

```
@TestMixin(GrailsUnitTestMixin)
class ExampleTests {
  void setUp() {}

  void tearDown() {}

  void testSomething() {
    defineBeans {
      myService(MyService)
    }

    assert grailsApplication.mainContext.getBean("myService") != null
  }
} 
```

上面的代码失败了：

**org.springframework.beans.factory.NoSuchBeanDefinitionException：没有定义名为“myService”的bean**

我想要做的是通过 grailsApplication 从普通的旧 Java 类访问服务。这有效，但不适用于单元测试环境。我应该采取不同的做法吗？

```
class POJO {
  MyService myService;

  public POJO(GrailsApplication grailsApplication) {
    myService = (MyService) grailsApplication.getMainContext().getBean("myService");
  }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T17:23:23.850

答案是在`GrailsUnitTestMixin`包含你的 bean 的 applicationContext 中设置`parentContext`为`grailsApplication`

```
beans.registerBeans(applicationContext)

static void initGrailsApplication() {
...
//the setApplicationContext in DefaultGrailsApplication set's the parentContext
grailsApplication.applicationContext = applicationContext
} 
```

所以你可以得到你的豆子：

```
defineBeans {
  myService(MyService)
}

assert applicationContext.getBean("myService")
assert grailsApplication.parentContext.getBean("myService") 
```

**编辑**

今天我遇到了同样的问题，我的解决方案是：

```
@Before
void setup() {
  Holders.grailsApplication.mainContext.registerMockBean("myService", new MyService())
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-04-26T13:28:23.333

在我的情况下（grails 2.4.4），接受的解决方案不起作用，但为我指明了正确的方向，这条线改为工作，因为我的单元测试中 mainContext 中的 bean 工厂是[OptimizedAutowireCapableBeanFactory](http://grails.github.io/grails-doc/2.4.4/api/org/codehaus/groovy/grails/commons/spring/OptimizedAutowireCapableBeanFactory.html)

```
Holders.grailsApplication.mainContext.beanFactory.registerSingleton('myBean', new MyBeanClass()) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-25T14:35:45.507

我在同样的问题上花了一些时间，在我的情况下运行 grails 2.2.4 并具有（在 src/groovy 中）：

```
import grails.util.Holders
class SomeClass {
  transient myService = Holders.grailsApplication.mainContext.getBean 'myService'
  .....
} 
```

这与问题作者有点不同，但至少它对来自搜索引擎结果的人有用

尽管如此，接受的答案对我不起作用，所以我想出了一些不同的方法来模拟和注册 SomeClass 中使用的服务。

```
import grails.util.Holders
.. other imports
@TestMixin(GrailsUnitTestMixin)
class SomeClassTests {
    @Before
    void setUp() {
        Holders.grailsApplication = grailsApplication
        defineBeans {
            myService(MyServiceMock)
        }
    }
    ....
}

class MyServiceMock extends MyService {
  // overriden methods here
} 
```

# fancybox - 前景中的 flv 视频覆盖 IE 中的 fancybox 窗口

> ID：13532419
> 
> 赞同：0
> 
> 时间：2012-11-23T16:01:49.027
> 
> 标签：fancybox, flv

我的 flv 视频保留在前景中，隐藏了花式框窗口的一部分；这个应该在上面。它只出现在 IE 中，并且在 firefox 和 chrome 中正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T19:39:24.317

设置`wmode="opaque"`为您的背景视频。还要检查你是否设置了正确的`DOCTYPE`，这样 IE 就不会在怪癖模式下运行。

# windows - $$PWD 不再在 Qt Creator 2.6 中工作

> ID：13532425
> 
> 赞同：2
> 
> 时间：2012-11-23T16:02:02.003
> 
> 标签：windows, qt, qt-creator, qmake

我有一个项目（[https://github.com/waddlesplash/qtfastjson](https://github.com/waddlesplash/qtfastjson)`$$PWD` ），它有一个使用 qmake变量的 .pri 文件。这在所有经过测试的 qmake 版本中都可以正常工作，但在 Qt Creator 2.6 中，文件不会显示在项目树中（但可以正确编译）。

这是PRI：

```
QT += core
INCLUDEPATH += $$PWD

HEADERS += $$PWD/QtFastJson.h \
    $$PWD/QtFastJsonObject.h

SOURCES += $$PWD/QtFastJson.cpp \
    $$PWD/QtFastJsonObject.cpp 
```

它包含在 .pro:`include(../src/QtFastJson.pri)`中。

如果`$$PWD`变量被删除并替换为相对路径，文件将显示在树中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T23:08:30.347

它似乎在 Qt Creator 2.6 中对我有用。尝试在附加到 HEADERS 变量之前立即放置日志：

```
message($$PWD) 
```

然后检查该路径是否真的包含您要添加的文件。您也可以尝试使用 _PRO_FILE_PWD_ 变量。

# objective-c - 使视图成为导航控制器中的主要视图？

> ID：13532426
> 
> 赞同：0
> 
> 时间：2012-11-23T16:02:09.387
> 
> 标签：objective-c, ios, uinavigationcontroller

我正在使用一个标签栏，每个标签都有一个导航控制器，而这又具有一堆视图。每个视图都有自己的视图控制器，但现在这并不重要。

让我们有一个带有导航控制器 1 的选项卡 1，其中包含视图 A、B、C。但是，应用程序的性质决定了视图 B 是主要视图。

所以我想要的是默认情况下（在第一次或重新启动应用程序之后），当我点击选项卡 1 时，我会看到 B 视图以及 A 视图的后退按钮。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:21:53.903

您可以为您的标签栏控制器设置一个委托，并实现`tabBarController:didSelectViewController:`检测何时有人点击标签。如果你检测到 A 即将被选中，而你希望 B 被显示，你可以告诉 A 的控制器使用它的导航控制器来推动 B 的控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:48:51.630

您可以使用`setViewControllers:animated:`UINavigationController。根据您的确切需求，您可以在您的应用程序委托`applicationWillEnterForeground:`或`applicationDidBecomeActive:`方法中进行设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T16:28:01.587

尝试初始化视图 B（没有动画）并将其推送到视图 A 的 viewDidLoad 中的导航堆栈。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T17:02:32.037

我记得有一个 Apple 示例应用程序可以做到这一点。一般的想法是保存最后一个可见的视图控制器（或者只是硬编码你想要的那个），然后使用类似这样的东西将它推送到可见状态：

`[myNavigationController pushViewController:viewControllerToBeVisible animate:NO];`

您想要显示应用程序`tabBarController:didSelectViewController:`，并根据选择的 viewController 处理不同的情况。

# asp.net-mvc - ASP.net Web API 现在是 ASP.net MVC 4 的一部分吗？

> ID：13532427
> 
> 赞同：3
> 
> 时间：2012-11-23T16:02:12.537
> 
> 标签：asp.net-mvc, asp.net-web-api

我有点困惑。我正在学习 ASP.net MVC，目前是版本 3。当我得知 WebAPI 是 Microsoft 的最新 Web 技术并问自己是否应该继续使用 MVC 时，我已经很恼火了。

根据我今天的研究，我了解到 WebAPI 适用于需要基于纯 Http 的 API 的解决方案，这些 API 将数据提供给浏览器以外的其他应用程序。而且它没有 HTML 渲染引擎。因此，对于必须呈现大量 HTML 页面的解决方案，MVC 很好。

我还阅读了与 MVC 并行进行的 Web API 开发并代表它自己。

今天没有，当我第一次启动 Visual Studio 时，我读到 MVC4 的新特性之一是 WebAPI：

[http://www.asp.net/mvc/mvc4](http://www.asp.net/mvc/mvc4)

Web API 现在是 MVC 不可分割的一部分吗？MVC 控制器可以在同一个应用程序中直接与 Web API 控制器混合使用吗？在一篇博文中，我读到如果你在一个项目中使用 WebAPI 和 MVC，你最终会得到重复的代码。现在还是这样吗？

最佳托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-10T16:10:10.113

答案是肯定的！WebAPI 具有 MVC 设计模式中的“模型”和“控制器”。但是“视图”在哪里？

如果您创建一个新的 WebAPI 项目，Visual Studio 将创建一个默认的 HomeController，它是 ASP.NET MVC 标准控制器，它还将添加一个带有 Index.cshtml 视图的 Index 操作。它以这种方式工作，因此您将能够托管您的 WebAPI 服务以测试它们。在 WCF 中，Visual Studio 为此目的推出了 WCF 测试客户端。

如果没有视图，则如果不将它们托管在 IIS 上，就无法测试我们的服务。

WebAPI 还使用相同的路由引擎和更多服务器端功能，如 ASP.NET MVC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T18:26:00.287

Web API 与 MVC 4 捆绑在一起。它可以单独使用，也可以与 MVC 结合使用。集成周围有一些粗糙的边缘，但没有什么非常痛苦的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-26T14:56:28.223

ASP.NET MVC

```
public class TweetsController : Controller {
  // GET: /Tweets/
  [HttpGet]
  public ActionResult Index() {
    return Json(Twitter.GetTweets(), JsonRequestBehavior.AllowGet);
  }
} 
```

ASP.NET Web API

```
public class TweetsController : ApiController {
  // GET: /Api/Tweets/
  public List<Tweet> Get() {
    return Twitter.GetTweets();
  }
} 
```

代码来自这个[链接](http://encosia.com/asp-net-web-api-vs-asp-net-mvc-apis/)。

两种技术有很多相似之处，例如服务 HTTP 请求。最重要的区别在于：

*   MVC 创建 HTML 视图，
*   WebAPI 具有内置的序列化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-25T21:36:31.007

ASP.NET Web API 与 ASP.NET MVC 无关。该团队已将 ASP.NET Web API 与 ASP.NET MVC 4 放在同一个 MSI 安装程序中，恕我直言，这是一个错误。这是所有混乱开始的地方，但团队知道这种混乱 AFAIK。

ASP.NET Web API 独立存在，它甚至没有任何*直接*依赖于`System.Web`. 看看这个帖子：

[ASP.NET Web API 不位于 ASP.NET MVC 之上！事实上，它并不位于任何东西之上](http://www.tugberkugurlu.com/archive/newsflash-asp-net-web-api-does-not-sit-on-top-of-asp-net-mvc-in-fact-it-does-not-sit-on-top-of-anything)

# persistence - 单表继承插入顺序

> ID：13532430
> 
> 赞同：2
> 
> 时间：2012-11-23T16:02:37.607
> 
> 标签：persistence, openjpa

我使用时有以下情况`OpenJPA`：

这 3 个实体：`SelectQueryElement`, `SingleSelectQueryElement`,`CompositeQueryElement`实现了思想`SINGLE_TABLE`继承。

我也有`ColumnClass`拥有顶级`CompositeQueryElement`. 这些类中的每一个都有`EAGER`加载和`PERSIST`/`MERGE`级联类型。

![类图](../Images/ddb1165c5a304aba5132aecfd6c719f2.png)

现在，如果我想模仿这样的结构：

```
ColumnClass
|   CompositeSelectQueryElement // top-level query element
|   |   SingleSelectQueryElement 
|   |   CompositeSelectQueryElement 
|   |   |   SingleSelectQueryElement 
|   |   SingleSelectQueryElement
|   |   CompositeSelectQueryElement
|   |   |   SingleSelectQueryElement 
```

...我尝试合并`ColumnClass`对象，我希望插入顺序是“预购”。但我得到的甚至没有接近那个。

**我期望以下插入顺序：**

```
 ColumnClass
1   |   CompositeSelectQueryElement // TOP-LEVEL
2   |   |   SingleSelectQueryElement
3   |   |   CompositeSelectQueryElement
4   |   |   |   SingleSelectQueryElement
5   |   |   SingleSelectQueryElement
6   |   |   CompositeSelectQueryElement
7   |   |   |   SingleSelectQueryElement 
```

或者至少：

```
 ColumnClass
1   |   CompositeSelectQueryElement // TOP-LEVEL
2   |   |   SingleSelectQueryElement
3   |   |   CompositeSelectQueryElement
6   |   |   |   SingleSelectQueryElement
4   |   |   SingleSelectQueryElement
5   |   |   CompositeSelectQueryElement
7   |   |   |   SingleSelectQueryElement 
```

**但**我得到的是这样的：（注意先到所有`Composite`s，然后再到所有`Single`s）

```
 ColumnClass
1   |   CompositeSelectQueryElement // TOP-LEVEL
4   |   |   SingleSelectQueryElement
2   |   |   CompositeSelectQueryElement
5   |   |   |   SingleSelectQueryElement
6   |   |   SingleSelectQueryElement
3   |   |   CompositeSelectQueryElement
7   |   |   |   SingleSelectQueryElement 
```

s 的顺序`Single`也不一致。有时它不是这样的，而是随机的。

**问题：**有没有办法解决这个排序问题并“建议”`OpenJPA`我想要实现的目标。

我使用 OpenJPA v2.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T00:51:35.617

[OpenJPA 邮件列表中的](http://openjpa.208410.n2.nabble.com/)[这条](http://openjpa.208410.n2.nabble.com/Inconsistent-execution-order-of-INSERT-statements-using-cascading-persist-td678745.html)消息似乎表明您的解决方案是包含`<property name="openjpa.jdbc.UpdateManager" value="operation-order">`在您的配置中。希望有帮助。

# mysql-error-1045 - 错误码注册页面

> ID：13532431
> 
> 赞同：0
> 
> 时间：2012-11-23T16:02:40.613
> 
> 标签：mysql-error-1045

此代码用于注册页面看起来很棒，但是在您键入以下代码后我再次收到一条错误消息（以下是错误消息）。

我不明白错误是什么以及它应该是正确的代码吗？

Codice mysql per fare dei test (aggiungiamo un utente) INSERT INTO `users`( `id`, `username`, `password`, `online`, `email`, `active`, `rtime`) VALUES (1, 'testing', 'testing', 0, 'fake@noemail.co.uk', 0, 0);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:49:58.470

代码看起来不错。尝试检查您的 root 用户是否拥有主机的所有权限和密码正确。据我所知，您正在使用 root 用户运行。

转到配置文件并检查用户。如果您使用的是 phpmyadmin，那么您可以在“权限”选项卡中检查您的用户有权访问

# fortran - 在 Fortran 函数声明的第二行找到星 * 符号

> ID：13532440
> 
> 赞同：2
> 
> 时间：2012-11-23T16:02:58.197
> 
> 标签：fortran

在检查一些遗留的 Fortran 代码时，我发现了一个子例程声明，如下所示：

```
 SUBROUTINE CLIP2G (fcut,TIME,NUMS,NUMG,CLIPG,CLIPGL,CLIPGR,
     * MODE,PHZ) 
```

`*`在这种情况下意味着什么？星号是否`*`意味着子程序声明跨越两行而不是一行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T16:16:21.670

这是行继续标记。它标志着这条线是上一条的延续。它可以是任何 Fortran 可识别的字符，但必须放在第 6 列中。关于固定和自由 Fotran 格式的续行的更全面讨论在[这里](http://fortranwiki.org/fortran/show/Continuation+lines)。

# http - HTTP 错误 500.19 - IIS 7.5 错误 0x8007000d

> ID：13532447
> 
> 赞同：59
> 
> 时间：2012-11-23T16:03:40.060
> 
> 标签：http, iis-7.5

在将网站转移到新的 IIS 7.5 时，我遇到以下错误：

我不确定是编程错误还是服务器错误

> 概括
> 
> **HTTP 错误 500.19 - 内部服务器错误**
> 无法访问请求的页面，因为该页面的相关配置数据无效。
> 
> **详细错误信息**
> 模块 IIS Web Core
> Notification Unknown
> Handler Not yet determined
> Error Code 0x8007000d
> Config Error
> Config File \?\E:\kunden\homepages\0\d442477881\www\web.config
> 请求的URL [http://mcstech.co.uk ：80/](http://mcstech.co.uk:80/)
> 物理路径
> 登录方法尚未确定
> 登录用户尚未确定
> 失败请求跟踪日志目录faultRequestLogPath
> 配置源
> -1：
> 0：

这是我的 webconfig 文件的内容

```
<?xml version="1.0"?>
<configuration>
    <configSections>
        <sectionGroup name="system.web">
            <section name="urlrewrites" type="ThunderMain.URLRewriter.Rewriter, ThunderMain.URLRewriter, Version=1.0.783.30976, Culture=neutral, PublicKeyToken=7a95f6f4820c8dc3"/>
        </sectionGroup>
        <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
            <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
                <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
                    <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere"/>
                    <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                    <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                    <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
                    </sectionGroup>
                    </sectionGroup>
                    </sectionGroup></configSections>
    <connectionStrings>
        <add name="constr" connectionString="Data Source=98.130.0.20;Initial Catalog=C283122_mcs;Persist Security Info=True;User ID=C283122_mcsweb;Password=Mcsweb100t"/>
    </connectionStrings>
    <appSettings>
        <!--<add key="RTE.AjaxUploader.UploadSpeedKB" value="500"/>-->
        <!--<add key="RTE.ImageEditor.TempFolder" value="~/rtetemp"/>-->
        <add key="RichTextEditorTempPath  " value="~/rtetemp"/>
    </appSettings>
    <system.webServer>
        <staticcontent>
            <clientcache cachecontrolmaxage="150.00:00:00" cachecontrolmode="UseMaxAge">
            </clientcache></staticcontent>
        <modules>
            <remove name="ScriptModule"/><add name="UploadModule" type="RTE.UploadModule,RichTextEditor"/>
            <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/></modules>
        <validation validateIntegratedModeConfiguration="false"/>
            <handlers>
            <remove name="WebServiceHandlerFactory-Integrated"/>
            <remove name="ScriptHandlerFactory"/>
            <remove name="ScriptHandlerFactoryAppServices"/>
            <remove name="ScriptResource"/>
            <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add name="ScriptResource" verb="GET,HEAD" path="ScriptResource.axd" preCondition="integratedMode" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            </handlers>
            </system.webServer>

    <system.web>
        <sessionState cookieless="UseCookies" cookieName="Dont_delete_cookie" mode="InProc"/>
        <!--<httpRuntime requestValidationMode="2.0"/>-->
        <machineKey validationKey="ACCC9E972F97EC8FDEE6852A04F17354F47E574D8769E0DE65291BBC22898370CE31FE4117CD1715F0CD8A932A7C71D3A4971B8BD534557881756E573DA6AF18" decryptionKey="0253BD20700FC9BC9DABDAA663581BF14B455000C74CDA08D558E30839C95312" validation="SHA1" decryption="AES"/>
        <!--  <sessionState mode="InProc" timeout="30" />-->
        <!-- <customErrors mode="Off"/>-->
        <customErrors mode="RemoteOnly" defaultRedirect="http://mcstech.co.uk/"/>

        <pages validateRequest="false">
            <controls>
                <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
                <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/></controls></pages>

        <!--<httpModules>
      <add name="UploadModule" type="RTE.UploadModule,RichTextEditor"/>
    </httpModules>-->

        <urlrewrites>
            <rule>
                <url>/web-design-clients</url>
                <rewrite>web-design-clients.aspx</rewrite></rule>
            <rule>
                <url>/case-study/(.*)</url>
                <rewrite>/case-study.aspx?id=$1</rewrite>
            </rule>
            <rule><url>/case-studies</url>
                <rewrite>case-studies.aspx</rewrite></rule>
            <rule>
                <url>/internet-website-promotion-marketing</url>
                <rewrite>internet-website-promotion-marketing.aspx</rewrite></rule>
            <rule>
                <url>/flash-website-design</url>
                <rewrite>flash-website-design.aspx</rewrite></rule>
            <rule>
                <url>/ecommerce-site-design-development</url>
                <rewrite>ecommerce-site-design-development.aspx</rewrite>
            </rule>
            <rule>
                <url>/custom-website-design</url>
                <rewrite>custom-website-design.aspx</rewrite></rule>
            <rule>
                <url>/website-design-process-steps</url>
                <rewrite>website-design-process-steps.aspx</rewrite>
            </rule>
            <rule>
                <url>/sem-ppc-packages</url>
                <rewrite>sem-ppc-packages.aspx</rewrite>
            </rule>
            <rule>
                <url>/home</url>
                <rewrite>Default.aspx</rewrite>
            </rule>
            <rule>
                <url>/mcs-technologies</url>
                <rewrite>company.aspx</rewrite>
            </rule>
            <rule>
                <url>/web-solutions</url>
                <rewrite>solutions.aspx</rewrite>
            </rule>
            <rule>
                <url>/our-solutions/web-and-mobile-presence</url>
                <rewrite>/web-and-mobile-presence.aspx</rewrite></rule>
            <rule>
                <url>/our-solutions/online-branding</url>
                <rewrite>/online-branding.aspx</rewrite>
            </rule>
            <rule>
                <url>/our-solutions/business-software-solutions</url>
                <rewrite>/business-software-solutions.aspx</rewrite>
            </rule>
            <rule>
                <url>/our-solutions/online-sales-marketing</url>
                <rewrite>/online-sales-marketing.aspx</rewrite>
            </rule>
            <rule>
                <url>/our-solutions/mobile-applications</url>
                <rewrite>/mobile-applications.aspx</rewrite>
            </rule>
            <rule>
                <url>/web-design-services/web-design-development</url>
                <rewrite>/web-design-development.aspx</rewrite>
            </rule>
            <rule>
                <url>/web-design-services/web-hosting</url>
                <rewrite>/web-hosting.aspx</rewrite>
            </rule>
            <rule>
                <url>/web-design-services/mobile-app-development</url>
                <rewrite>/mobile-app-development.aspx</rewrite>
            </rule>
            <rule>
                <url>/web-design-services/web-marketing</url>
                <rewrite>/web-marketing.aspx</rewrite>
            </rule>
            <rule>
                <url>/web-design-services/seo</url>
                <rewrite>/seo.aspx</rewrite>
            </rule>
            <rule>
                <url>/portfolio</url>
                <rewrite>portfolio.aspx</rewrite>
            </rule>
            <rule>
                <url>/contact-mcs</url>
                <rewrite>contact_us.aspx</rewrite>
            </rule>
            <rule>
                <url>/website-packages</url>
                <rewrite>website-packages.aspx</rewrite>
            </rule>
            <rule>
                <url>/terms-conditions</url>
                <rewrite>terms-conditions.aspx</rewrite>
            </rule>
            <rule>
                <url>/sitemap</url>
                <rewrite>sitemap.aspx</rewrite>
            </rule>
            <rule>
                <url>/privacy-policy</url>
                <rewrite>privacy-policy.aspx</rewrite>
            </rule>
            <rule>
                <url>/our-methodology/web-design-development</url>
                <rewrite>/m-web-design-development.aspx</rewrite>
            </rule>
            <rule>
                <url>/our-methodology/web-marketing</url>
                <rewrite>/m-web-marketing.aspx</rewrite>
            </rule>
            <rule>
                <url>/our-methodology/mobile-applications</url>
                <rewrite>/m-mobile-applications.aspx</rewrite>
            </rule>
            <rule>
                <url>/our-expertise</url>
                <rewrite>our-expertise.aspx</rewrite>
            </rule>
            <rule>
                <url>/careers</url>
                <rewrite>careers.aspx</rewrite>
            </rule>
            <rule>
                <url>/request-for-proposal</url>
                <rewrite>request-for-proposal.aspx</rewrite>
            </rule>
            <rule>
                <url>/testimonials</url>
                <rewrite>Testimonials.aspx</rewrite>
            </rule>
            <rule>
                <url>/web-design-company</url>
                <rewrite>web-design-company.aspx</rewrite>
            </rule>
            <rule>
                <url>/contact-us-confirmation</url>
                <rewrite>contact-us-confirmation.aspx</rewrite>
            </rule>
            <rule>
                <url>/request-proposal-confirmation</url>
                <rewrite>request-proposal-confirmation.aspx</rewrite>
            </rule>
            <rule>
                <url>/Captcha</url>
                <rewrite>Captcha.aspx</rewrite>
            </rule>
        </urlrewrites>
        <compilation debug="true">

            <assemblies>
                <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
                <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
                <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
                <add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
                <add assembly="System.Net, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/></assemblies></compilation>
        <httpHandlers>
            <remove verb="*" path="*.asmx"/>
            <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add verb="GET,HEAD" path="ScriptResource.axd" validate="false" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/></httpHandlers>
        <httpModules>
            <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/></httpModules></system.web>
    <system.codedom>
        <compilers>
            <compiler language="c#;cs;csharp" extension=".cs" type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" warningLevel="4">
                <providerOption name="CompilerVersion" value="v3.5"/>
                <providerOption name="WarnAsError" value="false"/></compiler>
            <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" type="Microsoft.VisualBasic.VBCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" warningLevel="4">
                <providerOption name="CompilerVersion" value="v3.5"/>
                <providerOption name="OptionInfer" value="true"/>
                <providerOption name="WarnAsError" value="false"/></compiler></compilers></system.codedom>
    <runtime>
        <assemblyBinding appliesTo="v2.0.50727" xmlns="urn:schemas-microsoft-com:asm.v1">
            <dependentAssembly>
                <assemblyIdentity name="System.Web.Extensions" publicKeyToken="31bf3856ad364e35"/>
                <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/></dependentAssembly>
            <dependentAssembly>
                <assemblyIdentity name="System.Web.Extensions.Design" publicKeyToken="31bf3856ad364e35"/>
                <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/></dependentAssembly></assemblyBinding></runtime></configuration> 
```

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-01-10T08:29:48.343

看来您正在使用 url 重写功能。请确保您已在服务器中安装了重写软件，否则您可能会收到此错误。

要检查是否安装了 URL 重写，您可以到“IIS 主页”查看组件列表中是否有 URL 重写组件。

如果你没有找到，那么你可以使用下面的链接安装它： [http ://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)

您还可以使用*Microsoft Web Platform Installer*并安装产品**URL Rewrite**。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-06-01T14:24:21.087

尝试使用 Web Platform Installer 安装 URL Rewrite。这解决了我的问题。

[![在此处输入图像描述](../Images/4d446459feb03b742187a273a056970d.png)](https://i.stack.imgur.com/amvB7.png)

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2018-09-30T17:24:24.457

您可能忘记安装适用于 Windows 的 Hosting Bundle。

从 Microsoft 网站下载 ASP.NET Core/.NET Core: Hosting Bundle。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-20T12:13:56.383

HTTP 错误 500.19 - IIS 7.5 错误 0x8007000d 说明您的 web.config 中的元素无效。这就是 IIS 无法读取此文件以启动您的站点的原因。您可以通过注释一些块并查找错误类型来找到问题元素。此错误 (500.19) 的原因可能不同。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-15T13:36:41.577

从 web.config 文件中删除了 directorybrowse 行并为我工作。

```
<system.webServer>
    <defaultDocument>
        <files>
            <clear />
            <add value="Default.asp" />
            <add value="Default.htm" />
        </files>
    </defaultDocument>
  <!--<directorybrowse enabled="false"></directorybrowse>-->
</system.webServer> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-05-20T20:42:43.900

尝试托管**.net core 3.1**应用程序时，在**IIS 10** （在 Windows 10 上）出现此错误。

 **在**web.config**中通常会出现 aspNetCore 处理程序，它需要**AspNetCoreModuleV2**模块。如果您的 web.config 中有此内容，请确认已安装此模块。

要验证它，打开 IIS，选择您的站点，在 IIS 部分找到模块图标，打开它，搜索 AspNetCoreModuleV2。

要安装它：从[ASP.NET Core Runtime 3.1.15](https://dotnet.microsoft.com/download/dotnet/3.1)下载适用于 Windows 的 Hosting Bundle

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-05T18:15:26.743

对于 DotNet Core，我可以通过运行 dotnet 命令来解决我的问题，如 web.config 文件中所示：

```
<aspNetCore processPath="dotnet" arguments=".\<YourApp>.dll" stdoutLogEnabled="false" stdoutLogFile=".\logs\stdout" hostingModel="inprocess" /> 
```

从命令提示符：

```
dotnet .\<YourApp>.dll  ... 
```

就我而言，当我直接运行 dotnet 命令时，dotnet 会在命令提示符下显示导致我的特定问题的错误。看到错误使调试变得微不足道。直接从解决方案运行时，该错误被隐藏。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-20T14:44:36.550

如果您已经从下面的链接安装了网络托管包

[https://dotnet.microsoft.com/en-us/download/dotnet/thank-you/runtime-aspnetcore-6.0.1-windows-hosting-bundle-installer](https://dotnet.microsoft.com/en-us/download/dotnet/thank-you/runtime-aspnetcore-6.0.1-windows-hosting-bundle-installer)

尝试修复

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-05T21:29:43.020

我从这个[答案](https://stackoverflow.com/a/39622034/769465)中应用了答案，它有所帮助。

（从此链接安装重写 url：[x64 安装程序](https://download.microsoft.com/download/1/2/8/128E2E22-C1B9-44A4-BE2A-5859ED1D4592/rewrite_amd64_en-US.msi)）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-03-04T19:49:13.630

***对我来说，刚刚修复了 Asp.Net Hosting Bundle*** 如果尚未安装，请从此处安装最新版本 - [https://dotnet.microsoft.com/en-us/download/dotnet/thank-you/runtime-aspnetcore-6.0.2-windows -hosting-bundle-installer](https://dotnet.microsoft.com/en-us/download/dotnet/thank-you/runtime-aspnetcore-6.0.2-windows-hosting-bundle-installer)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-18T15:29:35.010

就我而言，我没有安装**.Net Hosting Bundle** for Windows。安装它解决了我的问题。

*   只需前往[.Net下载官方网页](https://dotnet.microsoft.com/download/dotnet)
*   选择您的 .Net 版本。
*   搜索**Windows |** 在运行应用程序下**托管捆绑包****- 运行时**具有适用于您的 .Net 版本的最新版本。
*   安装 Hosting Bundle，现在您发布的 ASP .Net 网站将在 IIS 上运行。**

# delphi - 如何激活案例语句的代码完成？

> ID：13532449
> 
> 赞同：6
> 
> 时间：2012-11-23T16:03:47.917
> 
> 标签：delphi, delphi-xe2, code-completion

在最近的 Delphi 版本中，可以使用代码完成来一次对 case 语句中的所有情况进行编码，例如枚举类型。

但无论我尝试什么，我都无法让它发挥作用。我应该开始输入什么，然后使用什么热键？也许我错过了工具/选项设置，尽管我不怀疑，因为它是手动操作。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-23T16:23:44.853

使用 Tab 退出 case 变量字段，如果您的变量是枚举类型，IDE 将自动完成 case 选项。

![键入 case 语句](../Images/35c5eefb6efa97cf400d0384bcda7a87.png)

1.  在代码编辑器的适当位置键入`case` `space`
2.  IDE 添加*案例模板*并显示一个蓝色矩形*字段*，您可以在其中键入案例语句的变量名称
3.  写下该变量的名称并
4.  使用键退出*字段*`Tab`
5.  IDE 将所有枚举值添加到*案例模板*。

![在此处输入图像描述](../Images/3d351853e9896a738a197c0b7eb9c43d.png)

# linux - 对 Linux 中的 Websphere coredump 文件感到困惑

> ID：13532451
> 
> 赞同：0
> 
> 时间：2012-11-23T16:03:56.080
> 
> 标签：linux, websphere, websphere-7, websphere-6.1

有时我可以看到在我的 Linux 系统中生成的 Websphere 进程的核心转储文件。我认为它是完整的核心文件。但是，当我检查时`ulimit -a`，它将`core file size 0`作为其中之一返回。
据我了解，这`core file size 0`意味着在该环境中不会生成核心转储文件。但如果是这样，为什么那个 Websphere Application Server 进程会在那个时候发生呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:51:18.563

默认情况下，IBM Java 将在某些情况下创建系统转储，如 IBM Java 6 信息中心的[系统转储默认值](http://publib.boulder.ibm.com/infocenter/javasdk/v6r0/topic/com.ibm.java.doc.diagnostics.60/diag/tools/coredump_defaults.html)文章中所述。您可以使用以下命令查看这些情况：

```
/path/to/WebSphere/ApplicationServer/java/bin/java -Xdump:what 
```

系统转储有助于 IBM 服务确定您的 JVM 出了什么问题，因此根据具体情况，您可能需要打开 PMR。

如果您真的想禁用这些转储，请添加`-Xdump:system:none`到服务器的“通用 JVM 参数”，如WebSphere Application Server InfoCenter的[配置 JVM文章中所述。](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.nd.multiplatform.doc/info/ae/ae/trun_jvm.html)

# visual-studio-2010 - 在启用 ICU 的情况下从源构建 System.Data.SQLite

> ID：13532457
> 
> 赞同：1
> 
> 时间：2012-11-23T16:04:14.393
> 
> 标签：visual-studio-2010, sqlite, icu

我正在尝试从启用 ICU Tokenizer 的源代码构建 System.data.sqlite（从现在开始在 SDS 上）。我正在使用 Visual Studio -2010 并且无法添加预编译的 ICU 文件以便 SDS 可以编译。

我已添加`#define SQLITE_ENABLE_ICU 1`到 sqlite3.c，但这给了我一个错误，其中 SDS 尝试包含几个 ICU 头文件（utypes、uregex、ustring 和 ucol）。

我在哪里可以包含包含所有这些文件的文件夹，以便解决这个问题？在我的生活中，我使用 VS 的时间从未超过几个小时，而且我找不到一个可以为我指明正确方向的线程。

我已经在项目属性下尝试过 c/c++，我在链接器下尝试过，但没有任何效果。

所有建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T12:27:22.613

您必须添加 ICU 的*包含*目录。如果您已将 ICU 包解压缩到`C:\somewhere`，那么要添加的目录将是`C:\somewhere\icu\include`.

您还需要添加`C:\somewhere\icu\lib`到库路径。

# ruby - if & else 的 state_machine

> ID：13532460
> 
> 赞同：0
> 
> 时间：2012-11-23T16:04:32.127
> 
> 标签：ruby, state-machine

我有以下状态`:A`，，，`:B`。`:C`

```
require 'state_machine'

class Example
  property :value, String
  def test_condition
    value == "hmm"
  end
  state_machine :state, :initial => :A do
    event :my_event do
      transition [:A, :B] => :C, :if => :test_condition
      transition :A => :B, :unless => :test_condition
    end
  end
  def my_event
    #Some Logic
  end
end 
```

当`:test_condition`为真时，状态从`:A`to`:C`但当它为假时，两个状态都从`:A`to `:B`，问题是当我的状态被触发时`:B`，`:my_event`在这种情况下，状态不会变为`:C`并停留在`:B`。我错过了什么吗？

我使用 ruby​​mine 调试了我的代码，发现当状态为 at`:B`并触发事件时，断点不会在`:test_condition`方法处停止；它根本不会被调用。

文档一次只讨论`if`or`else`一次，没有提到与`if State_1 else State_2`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T18:03:26.640

为什么你定义 my_event？我认为您应该为此使用 :do，我还将 datamapper 属性替换为普通的 attr_accessor。

这是工作的代码：

```
require 'state_machine'

class Example
  attr_accessor :value

  def test_condition
    value == "hmm"
  end
  state_machine :state, :initial => :A do
    event :my_event do
      transition [:A, :B] => :C, :if => :test_condition
      transition :A => :B, :unless => :test_condition
    end
  end
end

ex = Example.new()
puts ex.state

ex.my_event
puts ex.state

ex.value ='hmm'

ex.my_event
puts ex.state 
```

输出：

```
A
B
C 
```

# asp.net-mvc - 这是连接几个表/模型然后对结果进行分组的清晰有效的 LINQ 吗？

> ID：13532462
> 
> 赞同：2
> 
> 时间：2012-11-23T16:04:36.317
> 
> 标签：asp.net-mvc, entity-framework-4.1

是否有另一种方法可以对多个连接模型的结果进行分组？将每个模型选择为匿名类型然后分组有效，但我不知道这是正确的做法。

所有条件都在`IQueryables`我在此查询之外设置的三个中：`attrDatas, dataIds, and filterIds`.

```
var query = (
    from a in attrDatas
    join d in dataIds
        on a.Id equals d.Id
    join f in filterIds
        on new { a.Id, a.AltId } equals new { f.Id, f.AltId }
    select new
    {
        ad = a,
        di = d,
        //fi = f,
    }
    into grouped
    group grouped by grouped.ad.AltId into g
    select new VwModel
    {
        AltId = g.Key,
        MaxReturn = g.Max(z => z.ad.Return),
        PriceUsd = g.Max(z => z.ad.Price),
        ApproxVal = g.Sum(z => (z.ad.Price*z.ad.Shares)),
        HoldDate = g.Max(z => z.di.HoldDate),
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T23:37:53.273

我没有看到任何其他方式。底层`group by`等效于[`GroupBy()`](http://msdn.microsoft.com/en-us/library/bb154757.aspx)扩展方法。在每个重载中，第一个输入参数是一个`IQueryable<TSource>`，它是*唯一携带数据的参数*。（其他参数是`Expression`确定分组和输出的 s）。因此，此输入列表应包含您希望在分组后在结果集中显示的所有内容。

因此，您必须构建一个匿名类型（顺便说一句，≠泛型）。`group a by a.AltId`例如，使用推动`d`和`f`超出范围。

# java - 接受键盘输入并对其进行检查

> ID：13532468
> 
> 赞同：1
> 
> 时间：2012-11-23T16:04:48.883
> 
> 标签：java, java.util.scanner

我有以下方法

```
 public static int modeChooser(){
    int choice = 0;
    Scanner kb = new Scanner(System.in);
    while(choice == 0){
        try {
        choice = kb.nextInt();  
        } catch (Exception e) {
            continue;
        }
        if(choice < 1 || choice > 5){
            continue;
        }
    }

    return choice;
} 
```

目标是只允许用户输入 1、2、3、4 或 5；如果用户键入一个字符串或一个太高/太低的数字，该方法应该重新启动，直到我有正确的 int。

以下是流程的示例：

用户类型：1 -> 一切正常 用户类型：saddj -> 方法重新启动 -> 用户类型 3 -> 一切正常

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:14:34.267

改成：

```
do {

    // read choice value

    if (choice < 1 || choice > 5) {
        // hint to user
    }

} while(choice < 1 || choice > 5); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:06:56.243

您可以将您的选择条件直接包含在 while 条件中：

```
while(choice < 1 || choice > 5){
    try {
    choice = kb.nextInt();  
    } catch (Exception e) {
        continue;
    }
} 
```

（在您当前的代码中，如果用户输入 7，则选择采用该值，while 条件变为 false，您的方法返回 7，它不应该返回）。

而不是捕获异常，您可以使用该`hasNextInt()`方法使代码更清晰：

```
public static int modeChooser() {
    int choice = 0;
    Scanner kb = new Scanner(System.in);
    while (choice < 1 || choice > 5) {
        if (!kb.hasNextInt()) {
            kb.next();
        } else {
            choice = kb.nextInt();
        }
    }

    return choice;
} 
```

如果您确实想使用递归方法，它可能如下所示：

```
public static int modeChooser() {
    Scanner kb = new Scanner(System.in);
    while (!kb.hasNextInt()) {
        kb.next();
    }

    int choice = kb.nextInt();
    return (choice >= 1 && choice <= 5) ? choice : modeChooser();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T16:08:43.957

我认为您可以简单地将支票放在`while`条件本身中，如下所示：

```
while(choice < 1 || choice > 5){
    try {
        choice = kb.nextInt();  
    } catch (Exception e) { 
       //ignore the exception and continue
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T16:10:24.927

这种方式实际上工作正常：

```
public static int modeChooser(){
    int choice = 0;
    Scanner kb = new Scanner(System.in);
    while(choice == 0){
        try {
        choice = kb.nextInt();  
        } catch (Exception e) {
            System.out.println("Sorry but you have to enter 1,2,3,4, or 5! Please try again.");
            choice = modeChooser();
        }

    }
    if(choice < 1 || choice > 5){
        System.out.println("Sorry but you have to enter 1,2,3,4, or 5! Please try again.");
        choice = modeChooser();
    }
    return choice;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-23T16:11:02.017

如果`kb.NextInt()`失败输入流中的数据仍然存在，则需要跳过它。如果您不跳过无效数据，则循环将不断尝试读取无效输入并失败，从而导致无限循环。

您可以使用`kb.next()`跳过无效输入：

```
while (true)
{
    try
    {
        choice = kb.nextInt();  
        if(choice >= 1 && choice <= 5) break;
    }
    catch (InputMismatchException e)
    {
        e.printStackTrace();
        kb.next();
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-23T16:11:21.337

```
if(choice >= 1 && choice <= 5)
    break;
else
    choice = 0; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-23T16:17:14.790

我认为最好使用`Scanner.nextLine()`and`Integer.parseInt()`方法：

```
while(choice < 1 || choice > 5){
    try {
        choice = Integer.parseInt(kb.nextLine());  
    } catch (Exception e) { 
       //...print error msg
    }
} 
```

# javascript - javascript生成的HTML标签中的Javascript函数

> ID：13532469
> 
> 赞同：2
> 
> 时间：2012-11-23T16:04:50.687
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [在其中创建一个带有 javascript 的链接](https://stackoverflow.com/questions/8647716/create-a-link-with-javascript-within-it)

我正在尝试将一个函数放入由 javascript 生成的 HTML 标记中。

我有什么：

```
<script type="text/javascript">
    var html = '';
    html += '<div><a href="#" onclick="showBlock("#idTextBlocks");">Show Text Blocks</a></div>';
</script> 
```

这`showBlock("#idTextBlocks");`是 JQuery 函数，它获取单击链接后需要显示的组件的 ID。

```
function showBlock(id) {
    $(id).show('slow');
} 
```

问题是它不起作用。它生成为：

```
<a #idtextblocks");"="" onclick="showBlock(" href="#">Show Text Blocks</a> 
```

我试图将引号更改为`'`sing:`onclick="showBlock('#idTextBlocks');`但这只是破坏了我所有的 javascript。

所以问题是如果标签本身是用javascript生成的，如何正确地将函数传递给HTML`<a>`标签的属性？`onclick`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:07:20.263

您需要使用单引号和双引号的组合

改变

```
onclick="showBlock("#idTextBlocks");" 
```

到

```
onclick="showBlock('#idTextBlocks');" 
```

您可以像这样访问函数中所需的元素，而不是将 id 传递给函数，

```
function showBlock() {
    $('#idTextBlocks').show('slow');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:09:09.340

### 用于`&quot;`此：

我遇到了同样的问题，并通过替换来修复它`"`，`&quot;`这比使用更安全`\"`。

```
<script type="text/javascript">
    var html = '';
    html += '<div><a href="#" onclick="showBlock(&quot;#idTextBlocks&quot;);">Show Text Blocks</a></div>';
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T16:12:27.117

无论如何，您都在使用 jQuery：

```
var $content = $('<div/>')
  .append('<a/>', {
    href: '#',
    click: function() { showBlock('#idTextBlocks'); },
    text: 'Show Text Block'
  }); 
```

`$content`现在你可以在任何你喜欢的地方追加/前置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T16:10:18.573

试试这个：

```
<script type="text/javascript">
    var html = '<div><a href="#" onclick="javascript:showBlock(\'#idTextBlocks\');">Show Text Blocks</a></div>';
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T16:18:46.173

```
html = '<div><a href="#" onclick="showBlock("#idTextBlocks");">Show Text Blocks</a></div>'; 
```

尝试在 html 变量中插入值时删除 + 运算符，因为您刚刚将 html 声明为空字符串，尤其是文本字符串，所以它没有意义。（+= 运算符最常用于将值添加到先前的值，例如

```
a = 1; 
a += 2; 
alert(a) //alerts 3 
```

# javascript - 如何使用 jquery 将项目从一个列表移动到多个其他列表？

> ID：13532475
> 
> 赞同：0
> 
> 时间：2012-11-23T16:05:32.313
> 
> 标签：javascript, jquery, web

这是我的问题。我想要一个脚本，它从`<ul>`列表中获取前十个项目并将它们移动到 list1，然后获取接下来的十个并将它们移动到第二个，第三个相同。我尝试使用它来做到这一点，`jQuery.each()`但它不起作用。

```
<html>
<body>
    <ul class="list">
        <li>1</li>
        <li>2</li>
        <li>3</li>
    </ul>
    <ul class="list1"></ul>
    <ul class="list2"></ul>
    <ul class="list3"></ul>
</body>
</html> 
```

这是一些javascript。这是一个固定的工作。

```
function SortCats(ul){
var array = [];
//var lis = $("#CatNavi li");
//for (var i = 0; lis.length; i++){
//  array.push(lis[i].html());
//  lis[i].hide();
//}
var $altlis = $("#CatNavi li");

var $cat1 = $(".supercat1");
var $cat2 = $(".supercat2");
var $cat3 = $(".supercat3");

$altlis.each(function(index){
alert("Shit happens");
    if (index < 10){
        $cat1.append($(this));
        alert("Shit happens");
    }
    else if (20 >= index > 10){
        $cat2.append($(this));
    }
    else if (index > 20){
        $cat3.append($(this));
    }
});
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:13:55.997

您想将主列表的前十项（带有 class `list`）移动到另一个带有 class`list1`的列表，接下来的十个到带有 class 的列表`list2`等等？

我提出这样的解决方案：

```
$("ul.list li").each(function(i) {
   var iList = Math.floor(i / 10) + 1;
   $("ul.list" + iList).append($("<li>" + $(this).html() + "</li>"));
}) 
```

# python - 如何在 Fedora 17 x86_64 中安装 PIL？

> ID：13532476
> 
> 赞同：1
> 
> 时间：2012-11-23T16:05:35.247
> 
> 标签：python, linux, gcc, fedora

我正在我的 Fedora 17 中安装 PIL

但是当我设置它时，我得到了以下两个错误：

```
/bin/ld: skipping incompatible /usr/lib/libz.so when searching for -lz
/bin/ld: skipping incompatible /usr/lib/gcc/x86_64-redhat-linux/4.7.2/../../../libz.so when searching for -lz
/bin/ld: skipping incompatible /lib/libz.so when searching for -lz
/bin/ld: skipping incompatible /usr/lib/libz.so when searching for -lz
/bin/ld: cannot find -lz
/bin/ld: skipping incompatible /usr/lib/libpthread.so when searching for -lpthread
collect2: error: ld returned 1 exit status
error: command 'gcc' failed with exit status 1 
```

我检查了我的 gcc 和 python-devel，它们都是最新的。有人说可能和我的x86_64 lib有关，所以我尝试安装lib32z-devel，但是yum无法安装。

任何身体都可以帮忙吗？提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T16:21:05.657

您需要安装`zlib-devel`才能链接到 zlib。

话虽如此，除非您有特殊原因从源代码构建 PIL，否则我建议您`python-imaging`像这样使用 yum 安装：

```
sudo yum install -y python-imaging 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-24T05:10:56.773

确保安装了 python-devel 和 zlib-devel

安装 easy_install 或 pip 然后 sudo easy_install Pillow 或 sudo pip install Pillow

Pillow 是 python 成像库的一个分支 [https://pypi.python.org/pypi/Pillow/2.3.0](https://pypi.python.org/pypi/Pillow/2.3.0) [http://pillow.readthedocs.org/en/latest/](http://pillow.readthedocs.org/en/latest/)

如上所述安装适用于 windows、linux（甚至在 raspberrypi 上）

# javascript - 在 nodejs 中遇到 Promise 问题

> ID：13532478
> 
> 赞同：1
> 
> 时间：2012-11-23T16:05:44.140
> 
> 标签：javascript, node.js, promise

我正在尝试将 promise 与 nodejs 一起使用（我正在尝试使用 node-promise 包）；但是，没有任何成功。请看下面的代码：

```
var express = require('express'),
    request = require('request'),
    promise = require('node-promise');

app.get('/promise', function(req, res) {
    var length = -1;

    new promise.Promise(request(
        {uri: "http://www.bing.com"},
        function (error, response, body) {
            if (error && response.statusCode !== 200) {
                console.log("An error occurred when connected to the web site");
                return;
            }

            console.log("I'll return: " + body.length);
            length = body.length;
        }
    )).then(function(result) {
        console.log("This is what I got: " + length);
        console.log("Done!");
    });

    res.end();
}); 
```

上述代码的输出`I'll return: 35857`只是，它不去该`then`部分。

我将代码更改为：

```
app.get('/promise', function(req, res) {
    var length = -1;

    promise.when(
        request(
            {uri: "http://www.bing.com"},
            function (error, response, body) {
                if (error && response.statusCode !== 200) {
                    console.log("An error occurred when connected to the web site");
                    return;
                }

                console.log("I'll return: " + body.length);
                length = body.length;
            }
        ),
        function(result) {
            console.log("This is what I got: " + length);
            console.log("Done!");
        },
        function(error) {
            console.log(error);
        }
    );

    res.end();
}); 
```

这次的输出是`This is what I got: -1`……`Done!`看起来这次没有调用“承诺”。

所以：

*   需要做什么来修复上面的代码？显然我做得不对:)
*   当我做承诺时，节点承诺是“要走的路”，还是有更好的方法/包？即更简单，更适合生产。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T10:21:24.913

试试[jquery-deferred-for-node](https://github.com/jaubourg/jquery-deferred-for-node)。

我不是专家，但我知道这个库往往受到同时工作在服务器端和客户端的程序员的青睐。

即使你还不知道 jQuery 的 Deferreds，走这条路的好处是：

*   文档非常好（它包含指向 jQuery 文档的链接），尽管您可能很难找到特定于 Node.js 的示例。

*   方法是可链接的。

*   jQuery`Callbacks`也包括在内。

*   当有一天你需要在客户端做异步的东西时，几乎没有什么需要重新学习的——概念是相同的，语法也几乎是相同的。请参阅上面超链接的 github 页面中的“通信”部分。

## 编辑

我不是 node.js 的人，所以我在这里猜测，但根据您上面的代码，您可能需要考虑使用 jquery-deferred-for-node 进行以下操作：

```
var express = require('express'),
    request = require('request'),
    Deferred = require('JQDeferred');

function fetch(uri, goodCodes) {
    goodCodes = (!goodCodes) ? [200] : goodCodes;

    var dfrd = Deferred(); // A Deferred to be resolved/rejected in response to the `request()`.
    request(uri, function(error, response, body) {
        if (!error) {
            var isGood = false;

            // Loop to test response.statusCode against `goodCodes`.
            for (var i = 0; i < goodCodes.length; i++) {
                if (response.statusCode == goodCodes[i]) {
                    isGood = true;
                    break;
                }
            }

            if (isGood) {
                dfrd.resolve(response.statusCode, body);
            } else {
                dfrd.reject(response.statusCode, "An invalid response was received from " + uri);
            }
        } else {
            dfrd.reject(response.statusCode, "An error occurred attempting to connect to " + uri);
        }
    });

    // Make promise derived from dfrd available to "consumer".
    return dfrd.promise();
};

//...

app.get('/promise', function(req, resp) {
    fetch("http://www.bing.com").done(function(statusCode, result) {
        console.log("Done! This is what I got: " + result.length);
    }).fail(function(statusCode, message) {
        console.log("Error (" + statusCode + "): " + message);
    });
    resp.end();
}; 
```

在这里，我尝试编写一个通用实用程序来获取资源，以便可以在外部处理异步响应（或错误）。我认为这大致与您试图实现的目标一致。

出于兴趣，console.log() 消息以 node.js 结尾在哪里？

## 编辑 2

*上面，我已经给出`Deferred`了初始资本，这是构造函数的惯例*

使用 jQuery Deferreds，必须有任意数量的方法来连续地 fetch()。下面的方法保持`fetch()`原样，并引入`fetch_()`作为其前端。可能有更简单的方法，但这允许`fetch()`保持通用实用程序，在功能上等同于客户端`jQuery.ajax()`。

```
function fetch_(uri){
    return function(){
        return fetch(uri, [200]).then(function(statusCode, result){
            console.log("Done! This is what I got: " + result.length);
        },function(statusCode, message){
            console.log("Error (" + statusCode + "): " + message);
        });
    };
} 
```

请注意，函数`fetch()`返回一个函数。它必须是这样的，因为在哪里`fetch()`被调用，我们想要一个未执行的函数，而不是（还）该函数的结果。

现在让我们假设一组 uris 可用。这可以是硬编码或动态构建的——无论应用程序需要什么。

```
var uris = [
    'http://xxx.example.com',
    'http://yyy.example.com',
    'http://zzz.example.com'
]; 
```

现在，`fetch_()`可以调用多种方式：

```
//v1\. To call `resp.end()` when the fetching process starts.
app.get('/promise', function(req, resp) {
    fetch_(uris[0])().then(fetch_(uris[1])).then(fetch_(uris[2]));
    resp.end();
});

//v2\. To call `resp.end()` when the fetching process has finished.
app.get('/promise', function(req, resp){
    fetch_(uris[0])().then(fetch_(uris[1])).then(fetch_(uris[2])).always(resp.end);
});

//v3\. As v2 but building a `.then()` chain of any (unknown) length.
app.get('/promise', function(req, resp){
    var dfrd = Deferred().resolve();//
    $.each(uris, function(i, uri){
        dfrd = dfrd.then(fetch_(uri));
    });
    dfrd = dfrd.always(resp.end);
}); 
```

*未经测试*

我对v1和v2更有信心。v3 可能工作。

v2 和 v3 都应该给出完全相同的行为，但 v3 可以泛化为任意数量的 uri。

一切都可能需要调试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-19T19:59:14.900

我建议使用 Q：[https](https://github.com/kriskowal/q) ://github.com/kriskowal/q 。我相信它被其他框架内部使用（如 jQuery 延迟实现）。

我相信文档是“好的”；语法与其他承诺实现一致......并且它有一个节点适配器。

所以你的延迟风格方法：

```
var deferred = Q.defer();
FS.readFile("foo.txt", "utf-8", function (err, res) {
    if (!err) {
        deferred.resolve(res);
    } else {
        deferred.reject(err);
    }
});
return deferred.promise; 
```

可以更简洁地写成：

```
var deferred = Q.defer();
FS.readFile("foo.txt", "utf-8", deferred.makeNodeResolver());
return deferred.promise; 
```

# android - 当声音以线程结束时如何更改imageView

> ID：13532479
> 
> 赞同：4
> 
> 时间：2012-11-23T16:05:47.280
> 
> 标签：android

我需要在声音结束时更改 ImageView ，但是当我尝试使用线程来使用它来冻结屏幕时，应用程序会关闭；

```
mp = MediaPlayer.create(this, R.raw.ave_maria);
    mp.start();
    im = (ImageView) findViewById(R.id.imag1);

    Thread thread = new Thread() {
        public void run() {

            while (mp.isPlaying()) {

            }
            im.setImageResource(R.drawable.primeiro_misterio_gozoso07);
        }
    };
    thread.start(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T16:10:38.620

在 mp 对象上使用 OnCompletionListener：

```
mp.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
            @Override
            public void onCompletion(MediaPlayer mp) {

            // SET THE BACKGROUND HERE
            }
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T16:09:25.693

您应该将代码与线程 UI 同步。

```
mp = MediaPlayer.create(this, R.raw.ave_maria);
    mp.start();
    im = (ImageView) findViewById(R.id.imag1);

    Thread thread = new Thread() {
        public void run() {

            while (mp.isPlaying()) {

            }
            //YouActivity 
            YouActivity.this.runOnUiThread(new Runnable() {

            public void run() {
               im.setImageResource(R.drawable.primeiro_misterio_gozoso07);

            }
    });

        }
    };
    thread.start(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T16:14:27.073

您不能从后台线程更改 UI。MediaPlayer 还提供了一个[OnCompletionListener](http://developer.android.com/reference/android/media/MediaPlayer.OnCompletionListener.html)接口，您可能应该使用它而不是 while 循环。事实上，如果您使用 onCompletionListener，您甚至不必将其放在自己的线程上，因此您不必担心如何更改 UI。

像这样的东西应该可以正常工作：

```
mp.setOnCompletionListner(new OnCompletionListner() {
    public void onCompletion(MediaPlayer m){
        im.setImageResource(R.drawable.primeiro_misterio_gozoso07);
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T16:10:13.607

您可以使用 AsyncTask，它是 Android 中一个非常有用的类，让您可以覆盖 3 种方法（onPreExecute、doInBackground 和 onPostExecute）。

您可以在声音播放期间使用 doInBackground 并使用 onPostExecute 设置图像。

更好的是，您可以使用 onPreExecute 来显示一些不错的东西，例如进度对话框或类似的东西。

对于 AsyncTask，请参见：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# sql - 如何在 sql 语句中创建 PLSQL 函数和错误

> ID：13532482
> 
> 赞同：0
> 
> 时间：2012-11-23T16:06:00.983
> 
> 标签：sql, oracle, plsql

嗨专家我需要实现一个 PL/SQL 函数 HIGHTRIP(LICENSENUM)，它找到由驾驶执照号码标识的驾驶员执行的最长行程（表 DRIVER 中的 LNUM 属性和函数中的参数 LICENSENUM 参数）。我还需要显示不执行任何行程的司机。

这就是我到目前为止所做的。

```
SELECT DRIVER.LNUM AS LICENSE_NO,
COUNT(TRIP.TNUM) AS TOTAL_NO_TRIPS
FROM DRIVER
LEFT OUTER JOIN TRIP
ON DRIVER.LNUM = TRIP.LNUM
INNER JOIN TRIPLEG
ON TRIP.TNUM = TRIPLEG.TNUM
GROUP BY DRIVER.LNUM
ORDER BY DRIVER.LNUM 
```

然而，上述声明并未显示未出行的 abt 司机。

不确定如何将语句转换为满足上述条件的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T10:24:10.580

> “然而，上面的声明并没有显示没有出行的司机。”

没有任何行程的司机在 TRIPLEG 中不会有任何记录。因此，您在该表上的 INNER JOIN 将覆盖 DRIVER 和 TRIP 之间的 OUTER JOIN，从而过滤掉留在家里的司机。

你需要做的是这样的：

```
SELECT DRIVER.LNUM AS LICENSE_NO,
       TRIPS.TOTAL_NO_TRIPS
FROM DRIVER
LEFT OUTER JOIN ( SELECT TRIP.LNUM,
                         COUNT(TRIP.TNUM)  AS TOTAL_NO_TRIPS
                  FROM TRIP
                       INNER JOIN TRIPLEG
                       ON TRIP.TNUM = TRIPLEG.TNUM
                       GROUP BY TRIP.LNUM ) TRIPS
    ON DRIVER.LNUM = TRIPS.LNUM
ORDER BY DRIVER.LNUM 
/ 
```

您还想要学习如何在代码中使用*小写字母*。完全用大写字母编写的程序被 COBOL 淘汰了，因为它们太难读了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:58:57.667

好吧，我建议您拆分您的需求，从最简单的部分开始构建，而不是先尝试编写整个查询。您的查询返回`TRIPLEG`表中给定驱动程序的行数，这似乎不能满足您的要求。我还建议您查看[PL/SQL 文档](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/toc.htm)，尤其是[CREATE FUNCTION 语法](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/function.htm#i34368)和一些[示例](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/subprograms.htm#CIHBEGEG)。

例如，我会在以下子任务中分解您的问题：

1.  一名司机的行程长度。如果我错了，请纠正我，但如果我要列出所有行程及其相关长度，这将是：

    ```
    SELECT t.tnum, COUNT(*) length
      FROM trip t
      JOIN tripleg tl ON t.tnum = tl.tnum
     WHERE t.lnum = :LNUM
     GROUP BY t.tnum 
    ```

2.  选择这些行程中最长的：

    ```
    SELECT tnum
      FROM (SELECT t.tnum, COUNT(*) length
               FROM trip t
               JOIN tripleg tl ON t.tnum = tl.tnum
              WHERE t.lnum = :LNUM
              GROUP BY t.tnum
              ORDER BY COUNT(*) DESC)
       WHERE rownum = 1 
    ```

3.  编写一个返回此结果的函数：

    ```
    CREATE OR REPLACE FUNCTION hightrip (p_lnum trip.lnum%type) 
       RETURN trip.tnum%type IS
       l_result trip.tnum%type;
    BEGIN
       SELECT tnum
         INTO l_result
         FROM (SELECT t.tnum, COUNT(*) length
                  FROM trip t
                  JOIN tripleg tl ON t.tnum = tl.tnum
                 WHERE t.lnum = p_lnum
                 GROUP BY t.tnum
                 ORDER BY COUNT(*) DESC)
          WHERE rownum = 1;
       RETURN l_result;
    END hightrip ; 
    ```

4.  在您的 SELECT 上使用此功能：

    ```
    SELECT d.*, hightrip(d.lnum)
      FROM driver d; 
    ```

当从没有行程的司机调用该函数时，该`HIGHTRIP`函数将产生`NO_DATA_FOUND`异常。`PL/SQL`但是，此类异常被视为`NULL`来自 SQL，因此您可以按原样使用上述查询。

# python - 哪个pairwise() 实现？

> ID：13532487
> 
> 赞同：5
> 
> 时间：2012-11-23T16:06:21.520
> 
> 标签：python, iteration

的文档`itertools`提供了一个函数的[配方](http://docs.python.org/2/library/itertools.html#recipes)`pairwise()`，我在下面稍微修改了它，以便它`(last_item, None)`作为最终对返回：

```
from itertools import tee, izip_longest

def pairwise_tee(iterable):
    a, b = tee(iterable)
    next(b, None)
    return izip_longest(a, b) 
```

但是，在我看来，使用`tee()`可能是矫枉过正（考虑到它仅用于提供一个前瞻步骤），所以我尝试编写一个避免它的替代方案：

```
def pairwise_zed(iterator):
    a = next(iterator)
    for b in iterator:
        yield a, b
        a = b
    yield a, None 
```

**注意：**碰巧我知道我的输入将是我的用例的迭代器；我知道上面的函数不适用于常规迭代。顺便说一句，接受迭代器的要求也是我不使用类似`izip_longest(iterable, iterable[1:])`的原因。

在 Python 2.7.3 中测试这两个函数的速度得到了以下结果：

```
>>> import random, string, timeit
>>> for length in range(0, 61, 10):
...     text = "".join(random.choice(string.ascii_letters) for n in range(length))
...     for variant in "tee", "zed":
...         test_case = "list(pairwise_%s(iter('%s')))" % (variant, text)
...         setup = "from __main__ import pairwise_%s" % variant
...         result = timeit.repeat(test_case, setup=setup, number=100000)
...         print "%2d %s %r" % (length, variant, result)
...     print
... 
 0 tee [0.4337780475616455, 0.42563915252685547, 0.42760396003723145]
 0 zed [0.21209311485290527, 0.21059393882751465, 0.21039700508117676]

10 tee [0.4933490753173828, 0.4958930015563965, 0.4938509464263916]
10 zed [0.32074403762817383, 0.32239794731140137, 0.32340312004089355]

20 tee [0.6139161586761475, 0.6109561920166016, 0.6153261661529541]
20 zed [0.49281787872314453, 0.49651598930358887, 0.4942781925201416]

30 tee [0.7470319271087646, 0.7446520328521729, 0.7463529109954834]
30 zed [0.7085139751434326, 0.7165200710296631, 0.7171430587768555]

40 tee [0.8083810806274414, 0.8031280040740967, 0.8049719333648682]
40 zed [0.8273730278015137, 0.8248250484466553, 0.8298079967498779]

50 tee [0.8745720386505127, 0.9205660820007324, 0.878741979598999]
50 zed [0.9760301113128662, 0.9776301383972168, 0.978381872177124]

60 tee [0.9913749694824219, 0.9922418594360352, 0.9938201904296875]
60 zed [1.1071209907531738, 1.1063809394836426, 1.1069209575653076] 
```

...因此，当有大约 40 个项目时，它`pairwise_tee()`开始表现出色。`pairwise_zed()`就我而言，这很好 - 平均而言，我的输入可能低于该阈值。

我的问题是：我应该使用哪个？`pairwise_zed()`看起来它会快一点（而且在我看来更容易理解），但`pairwise_tee()`由于取自官方文档（我可以在评论中链接到），可以将其视为“规范”实现，并且适用于任何可迭代的 - 这不是目前要考虑的，但我想可能会在以后。

如果迭代器在函数外部受到干扰，我也想知道潜在的陷阱，例如

```
for a, b in pairwise(iterator):
    # do something
    q = next(iterator) 
```

...但据我所知，在这种情况`pairwise_zed()`下`pairwise_tee()`表现相同（当然，首先这样做是一件非常愚蠢的事情）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:26:07.813

itertools`tee`实现对于那些有使用 itertools 经验的人来说是惯用的，尽管我很想使用`islice`而不是`next`推进领先的迭代器。

您的版本的一个缺点是，由于您的状态存储在局部变量中，因此不太容易将其扩展到*n*次迭代；我很想使用双端队列：

```
def pairwise_deque(iterator, n=2):
    it = chain(iterator, repeat(None, n - 1))
    d = collections.deque(islice(it, n - 1), maxlen=n)
    for a in it:
      d.append(a)
      yield tuple(d) 
```

`iter`一个有用的习惯用法是调用`iterator`参数；这是确保您的函数适用于任何可迭代对象的简单方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:12:06.607

这是一个主观问题；两个版本都很好。

我会使用`tee`，因为它对我来说看起来更简单：我知道做什么`tee`，所以第一个很明显，而第二个我必须考虑一下在`a`每个循环结束时覆盖的顺序。时间足够小，可能无关紧要，但你是判断的。

关于您的其他问题，来自[`tee`文档](http://docs.python.org/2/library/itertools.html#itertools.tee)：

> 一旦`tee()`进行了拆分，原始的可迭代对象就不应在其他任何地方使用；否则，在不通知 tee 对象的情况下，iterable 可能会被推进。

# sql - 从一个类型中只获取一行

> ID：13532489
> 
> 赞同：2
> 
> 时间：2012-11-23T16:06:23.920
> 
> 标签：sql, db2, distinct

我有一张桌子**票**和另一张桌子**日志**。**ticket**中的每一行都有很多日志。我想知道某个字符串是否在某个日志中，然后从**票证**中获取一个寄存器，无论哪个都没有关系，因为我只想每张**票**获得一行。这是我目前所拥有的：

```
SELECT ticket.id,ticket.description,ticket.owner 
FROM ticket
JOIN log
ON (log.ticketid=ticket.id)
where log.description LIKE '%someparameter%' 
```

在这种情况下我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:08:12.757

您可以尝试使用 SQL 限制选项吗？

```
SELECT ticket.id,ticket.description,ticket.owner 
FROM ticket
JOIN log
ON (log.ticketid=ticket.id)
where log.description LIKE '%someparameter%'
LIMIT 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:50:40.663

```
SELECT
  *
FROM
  ticket
WHERE
  EXISTS (SELECT *
            FROM log
           WHERE log.ticketid = ticket.id
             AND log.description LIKE '%someparameter%' 
```

或者...

```
SELECT
  ticket.id, ticket.description, ticket.owner 
FROM
  ticket
INNER JOIN
  log
    ON (log.ticketid=ticket.id)
WHERE
  log.description LIKE '%someparameter%'
GROUP BY
  ticket.id, ticket.description, ticket.owner 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T18:24:04.643

通常的 DB2 等价于 LIMIT 1 是 FETCH FIRST 1 ROWS ONLY：

```
SELECT ticket.id,ticket.description,ticket.owner 
FROM ticket
JOIN log
ON (log.ticketid=ticket.id)
where log.description LIKE '%someparameter%'
FETCH FIRST 1 ROWS ONLY 
```

您还可以通过以下方式启用 LIMIT 语法：

```
db2set DB2_COMPATIBILITY_VECTOR=4000 
```

或者：

```
db2set DB2_COMPATIBILITY_VECTOR=MYS 
```

# html - 这样写html语句的目的是什么？

> ID：13532491
> 
> 赞同：0
> 
> 时间：2012-11-23T16:06:31.357
> 
> 标签：html, comments, rendering

![在此处输入图像描述](../Images/aa2406834453082ef8607e0e008e6d99.png)

以上是html源码。

![在此处输入图像描述](../Images/b167142b7b038f7cbebd02aede1fa630.png)

这是相应的渲染文本。

我假设这`<!-- -->`是用于评论。为什么在示例中使用空注释？为什么用分开的字母代替单个单词*aiken*？

编辑：这是源页面[https://cs.stanford.edu/faculty](https://cs.stanford.edu/faculty)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:15:06.077

### 可能的原因：避免收集电子邮件地址。

正如[约翰](https://stackoverflow.com/users/250259/john-conde)在评论中所说，一件事是绕过搜索引擎和恶意引擎，它们会收集电子邮件地址，因为它是一个电子邮件列。

看看这个：[垃圾邮件发送者如何收集电子邮件地址？](http://www.private.org.il/harvest.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:17:30.933

**可能的原因：服务器端代码生成。**

这可能是由服务器应用程序生成的，该应用程序有时会在每个字母中添加信息，例如在源代码中带有服务器生成的注释的“字母排名”，有时由程序员出于调试目的而完成。在这种情况下，不存在任何信息，因此输出仅以空注释结束。

# c++ - std::map，自定义比较器的设计约束

> ID：13532492
> 
> 赞同：1
> 
> 时间：2012-11-23T16:06:31.830
> 
> 标签：c++, map, comparator

我一直在尝试为 std::map 容器定义一个自定义比较器。

问题是：我可以中继 == 和 != 运算符还是会破坏严格的弱顺序？我是否被迫使用 operator < ？

（一和二类确实正确定义了 operator!= 和 operator==）

```
typedef std::pair<One, Two> MapKey_t;
class cmp
{
    bool operator()(const MapKey_t& left, const MapKey_t& right) const
    { return left.first != right.first && right.first == right.second; }
}

typedef std::map<MapKey_t, Three*, cmp> MyMap_t; 
```

由于左右切换不会改变比较器的返回值，这会起作用吗？

我并不真正关心如何将项目分类到容器中，但我不希望重复项成为其中的一部分。

**更新**：

我可以使用内存地址来获得严格的弱排序吗？

```
class cmp
{
    bool operator()(const MapKey_t& left, const MapKey_t& right) const
    { 
        if(left.first == right.first)
            if(left.second != right.second)
                return false; // This represents for me, functionally, a duplicate
            else
                // Can't use operator < there since left.second equals right.second but
                // functionally for me, this is not a duplicate and should be stored
                // what about memory address strict weak ordering ?
                return &left < &right;
        else
            return left.first < right.first; // There I can use operator <
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T16:11:05.330

您不能依赖自一致的等于或不等于，因为它们没有建立严格的弱排序。如果切换左右参数，比较器返回值**应该会改变。**map 必须能够建立元素的排序，而不仅仅是能够区分两个元素是否相等。

非常重要的是，`A < B`是真的，然后`B < A`是假的。此外，如果`A < B`和`B < C`都为真，那么`A < C`也为真。

如果您不想或不能为您的类型建立严格的弱排序，那么您可以使用不需要它的映射：¹，这是一个哈希映射。但是，这将要求您提供散列函数和相等比较。它还要求您的编译器支持 C++11。[`std::unordered_map`](http://en.cppreference.com/w/cpp/container/unordered_map)

¹ *正如@JohnDibling 在评论中指出的那样，`std::unordered_map`不幸的是被命名了。应该是`std::hash_map`，但显然该名称可能与`hash_maps`其他库发生冲突。在任何情况下，我们的目的都不是要有一张无序的地图，而是要有一张具有恒定时间查找的地图。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T16:12:57.433

您可能不关心地图中的事物是如何排序的，但地图确实如此。您上面提供的代码似乎没有正确实现严格的弱排序。正如您已经注意到的那样，`operator()`在所有情况下左右切换都不会改变结果，您的函数没有实现严格的弱排序。

您不必`operator<`直接实现比较器，但您必须确保如果`operator()(A,B)`返回`true`，则`operator()(B,A)`不会也返回`true`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T16:11:00.167

这是不可接受的，字符串弱排序意味着`A < B`并且`B < A`不应同时为真。`std::map`依靠它来建立键的顺序和相等性

# ios - ios：图层显示在其托管视图之外

> ID：13532493
> 
> 赞同：1
> 
> 时间：2012-11-23T16:06:33.077
> 
> 标签：ios, uiview, calayer

我已经阅读了 Apple Core Animation 文档。它说

```
Core Animation 没有提供在窗口中实际显示图层的方法，它们必须由视图托管。当与视图配对时，视图必须为底层图层提供事件处理，而图层则提供内容的显示。
```

但是我有一个问题，如下图所示：蓝色矩形是一个UIView，名为blueView，灰色的是一个图层，它是blueView.layer的子图层。blueView.frame 为 {0,0}{320,180}。灰色层的位置是{100,190}。因为 blueView 托管的是灰色层，所以我认为灰色层应该显示在 blueView 区域，因为我猜 blueView 是灰色层的画布。然而，事实上是在blueView之外显示了灰色层，为什么呢？

![在此处输入图像描述](../Images/0e1a2cdba41a5d8ab8f73f09e6f3554e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:18:18.430

出于性能原因，默认情况下“clipsToBounds”属性设置为 NO。这意味着无论是在父视图内部还是外部，都会绘制所有子视图/子图层。

# azure - Azure 和直播

> ID：13532494
> 
> 赞同：3
> 
> 时间：2012-11-23T16:06:40.440
> 
> 标签：azure, streaming, media, live, smooth

我正在尝试使用 Azure 制作实时视频流，但我真的不知道我应该先尝试什么。

首先，有一个网站，上面有最新版本的 Flowplayer。

现在我需要知道如何从我的网络摄像头制作流视频到 Azure（我需要什么样的软件）？我正在尝试使用 Expression Encoder 4 Pro（但它不想将视频流式传输到 Azure Blob）。下一步我需要知道我应该在 Azure 上做什么？我的意思是一些设置，也许我应该创建一个带有 IIS 角色的 VM，或者只使用 Blob？以及如何制作？

最后一步是如何设置 Flowplayer 以从 Azure 获取流式视频？

谢谢你的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T20:24:14.173

您真正需要的是两个 Web 服务器，第一个将充当“接收器端点以接收编码的实时流”，第二个 Web 服务器将实时内容作为“发布端点”分发到您的 SL 或 HTML 5 视频播放器，即流播放器。

您可以使用 Windows Azure 云服务（作为 Web 角色）或 Windows Azure 虚拟机 (IaaS)。我更喜欢 Windows Azure 虚拟机，因为我可以更多地控制在 Azure VM 中的 IIS 上设置 IIS 平滑媒体服务器，然后是一个 Web 角色，我将仅限于使用启动任务可以配置的内容。

对于 Windows Azure Web 角色，**[此处](http://azlivestreaming.codeplex.com/documentation)**解释了实时流式传输的概念，值得一看并理解它，因为您将在使用 Visual Studio 时在应用程序中完成大部分工作。

如果您决定选择 Windows Azure 虚拟机，您将直接在 Windows Server 上进行大部分配置，这相对容易。首先，您只需了解如何在 Windows Server 中设置**[IIS Live Smooth Streaming](http://www.iis.net/learn/media/live-smooth-streaming/getting-started-with-iis-live-smooth-streaming)**，您可以在本地计算机上或直接在运行 Windows Server 和 IIS 的 Windows Azure 虚拟机上进行。您还可以查看**[这篇](http://blogs.msdn.com/b/brunoterkaly/archive/2011/10/16/leveraging-windows-azure-to-provide-highly-scalable-streaming-video-content-windows-media-services-building-your-own-netflix-streaming-server-or-tv-web-channel.aspx)**文章以了解有关这方面的更多信息。

上述两种解决方案**都不**需要您在满足您要求的 Azure Blob 上存储任何内容，并且 IIS 实时流确实支持 HTML 5 视频播放，因此您可以使用 FlowPlayer 播放内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-18T10:02:17.363

您现在可以使用 Windows azure 媒体服务[http://www.windowsazure.com/en-us/solutions/media/](http://www.windowsazure.com/en-us/solutions/media/)

它允许我们上传视频并将其转换为流畅的流媒体，也可以在 html5 播放器上播放。

希望能帮助到你！

谢谢。

莫希特查布拉

# java - 非静态方法不能从静态上下文中引用

> ID：13532498
> 
> 赞同：-3
> 
> 时间：2012-11-23T16:07:00.520
> 
> 标签：java

每当我尝试在 main 中调用一个方法时，它都会给我错误

> 不能从静态上下文中引用非静态方法

我尝试在 main 中创建对象并将它们作为参数发送给方法，但它也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:09:42.727

```
public class Foo {
    public static void main(String[] args) {
        Foo foo = new Foo();
        foo.print();
    }
    public void print() {
        System.out.println("Hello");
    }   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:07:57.383

您需要一个**类的实例**才能从静态方法**访问（调用）非****静态方法**。非静态方法或实例方法仅限于类的实例。

以下是描述它的简单示例：

```
class Test {
public void nonStaticMethod() {
}
public static void main(String[] args) {
Test t = new Test(); //you need to create an instance of class Test to access non-static methods from static metho
t.nonStaticMethod();
} 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T16:09:18.673

`main`是一种静态方法。`public static void main(String[] args)`.

从静态方法或块任何其他静态方法以及静态实例都是可访问的。如果您想访问非静态方法或实例，则必须创建对象并通过引用进行访问。

```
public class Test{
    public static void main(String[] args){
        print();// static method call
        Test test = new Test();
        test.print();// non static method call
    }
    public void print() {
        System.out.println("Hello non static");
    }
    public static void print() {
        System.out.println("Hello static");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T16:08:58.183

创建对象时会实例化常规方法，但这不是`static`方法所必需的。说你在一个`static`方法中，不能保证非静态方法已经被实例化（即可能没有`Object`创建），所以编译器不允许它。

# ruby-on-rails-3.2 - 文件未上传错误 parse_save_from_excel Rails

> ID：13532499
> 
> 赞同：1
> 
> 时间：2012-11-23T16:07:02.983
> 
> 标签：ruby-on-rails-3.2, uploadify, spreadsheet

我正在尝试获取[https://github.com/jalagrange/excel_test_app/](https://github.com/jalagrange/excel_test_app/)

但文件不上传。我正在尝试修复以下错误消息

```
Errno::EBADF (Bad file descriptor - C:/Sites/ExcelTestApp/public/excel_uploaded_
files/contacts.xls):
  app/controllers/people_controller.rb:129:in `parse_save_from_excel'
  app/middleware/flash_session_cookie_middleware.rb:19:in `call'
  app/middleware/flash_session_cookie_middleware.rb:19:in `call' 
```

people_controler.rb

```
def parse_save_from_excel
    test_file = params[:excel_file]
    file = FileUploader.new
    file.store!(test_file)
    book = Spreadsheet.open "#{file.store_path}"
    sheet1 = book.worksheet 0
    @people = []
    sheet1.each 1 do |row|
      p = Person.new
      p.first_name = row[0]
      p.last_name = row[1]
      p.age = row[2]
      @people << p
    end
    file.remove!
  end 
```

但是，我不明白...

flash_session_cookie_middleware.rb

```
require 'rack/utils'

class FlashSessionCookieMiddleware
  def initialize(app, session_key = '_session_id')
    @app = app
    @session_key = session_key
  end

  def call(env)
    if env['HTTP_USER_AGENT'] =~ /^(Adobe|Shockwave) Flash/
      req = Rack::Request.new(env)
      env['HTTP_COOKIE'] = [ @session_key,
                             req.params[@session_key] ]
                           .join('=').freeze unless req.params[@session_key].nil?
      env['HTTP_ACCEPT'] = "#{req.params['_http_accept']}"
                           .freeze unless req.params['_http_accept'].nil?
    end

    @app.call(env)
  end
end 
```

# c# - 在 Windows 应用商店应用程序中淡入/淡出 TextBlock [XAML/C#]

> ID：13532501
> 
> 赞同：7
> 
> 时间：2012-11-23T16:07:09.613
> 
> 标签：c#, xaml, animation, windows-8, visual-studio-2012

当我在 Windows Store 应用程序中加载表单时，有人可以解释我如何向文本块添加淡入和淡出动画吗？我尝试了 WPF 方法，但没有用...谢谢 :)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T16:59:01.957

不确定这是否是您正在寻找的（或“WPF 方法”不起作用），但使用此资源：

```
<Page.Resources>
    <Storyboard x:Name="Storyboard1">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="textBlock">
            <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
            <EasingDoubleKeyFrame KeyTime="0:0:4" Value="1"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
</Page.Resources> 
```

从你那里调用`OnNavigatedTo`会得到一个淡入效果（这里是在一个名为 textBlock 的特定实例上）。显然，你可以根据自己的喜好调整持续时间和缓动功能 - 并且可能泛化以在各种控件中使用。

```
var f = this.Resources["Storyboard1"] as Storyboard;
if (f != null) f.Begin(); 
```

# ios - 为什么 Titanium textField 中的 leftButton（或 rightButton）不显示？

> ID：13532508
> 
> 赞同：0
> 
> 时间：2012-11-23T16:07:30.753
> 
> 标签：ios, uitextfield, titanium-mobile

我为此苦苦挣扎了一段时间。似乎是一个半错误。

如果您将 leftButton 或 rightButton 添加到 textField 中，如下所示：

```
var leftButton = Ti.UI.createButton({
    image: 'someImage.png'
})
var textField = Ti.UI.createTextField({

    leftButton: leftButton,
    leftButtonMode: Ti.UI.INPUT_BUTTONMODE_ALWAYS,
    leftButtonPadding: 100

}) 
```

...那么您将看不到您的按钮。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T06:51:02.070

此代码可能存在 2 个问题。1-检查您分配给按钮的图像路径..？（高度，宽度）用于测试目的尝试使用任何系统按钮，看看它是否出现。？

```
var leftButton = Titanium.UI.createButton({
    style:Titanium.UI.iPhone.SystemButton.DISCLOSURE
}); 
```

2-秒的问题可能是左键的填充尝试在没有填充的情况下使用它，然后看看会发生什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-17T11:25:26.370

```
var win = Titanium.UI.createWindow({
    title:"Configuring text field and text area keyboard types",
    backgroundColor:"#347AA9",
    exitOnClose:true
});

//These buttons will appear within the text field
var clearButton = Titanium.UI.createButton({
    title:"Clear",
    height:24,
    width:52
});

var submitButton = Titanium.UI.createButton({
    title:"Submit",
    height:24,
    width:60
});

var textField = Titanium.UI.createTextField({
    top:"25%",
    height:35,
    width:600,
    backgroundColor:"#ffffff",
    borderStyle:Titanium.UI.INPUT_BORDERSTYLE_ROUNDED,
    hintText:"Type something",
    keyboardType:Titanium.UI.KEYBOARD_DEFAULT,
    leftButton:clearButton,
    rightButton:submitButton
});

clearButton.addEventListener("click", function(e){
    //Clear the value of the text field
    textField.value = "";
});

submitButton.addEventListener("click", function(e){
    //Pretend to submit the value of the text field
    //Be sure that you've typed something in!
    if(textField.value != ""){
        alert(textField.value); 
    }else{
        alert("Enter some text");
    }
});

//Add an event listener to the window that allows for the keyboard or input keys to be hidden if the user taps outside a text field
//Note: each text field to be blurred would be added below
win.addEventListener("click", function(e){
    textField.blur(); // Cause the text field to lose focus, thereby hiding the keyboard (if visible)
});

win.add(textField);

win.open(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T16:07:30.753

问题出在 leftButtonMode 属性中。给它任何值，按钮就不会显示。如果您不使用此属性，按钮将正常显示。

leftButton 的 padding 属性不是问题。但是，如果您在 rightButton 上使用它，它可能会将您的按钮扔到屏幕外。我也尝试过负值，但没有成功。

还要注意 leftButton 和 rightButton 选项在 Android 上不起作用。

# windows-7 - 在关闭最后一个文件之前获取批处理文件以打开下一个文件

> ID：13532512
> 
> 赞同：2
> 
> 时间：2012-11-23T16:07:57.440
> 
> 标签：windows-7, batch-file

我以前从未发生过这种情况，而且我之前使用过几十个批处理文件，所以我很难过。我正在 Windows 7 上执行批处理。

我的批处理文件内容如下：

```
"C:\Users\MYOB\Desktop\ISSP Project\Learning Objectives.docx"    
"c:\users\MYOB\desktop\comp\unit2.pdf"    
"C:\Users\MYOB\Desktop\course.bat" 
```

我想要的是打开所有三个文件。我得到的行为是第一个文件将打开，命令提示符窗口将保持打开状态，显示执行行的文本可见，并且在我关闭刚刚打开的文件之前，下一个文件不会打开。

这种行为似乎与 PDF 文件特别相关，我可以一次打开 100 个任何其他文件类型，但对于 pdf，它等待我关闭第一个文件。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:12:23.720

你可以`start`这样使用

```
start "" "C:\Users\MYOB\Desktop\ISSP Project\Learning Objectives.docx"    
start "" "c:\users\MYOB\desktop\comp\unit2.pdf"    
start "" "C:\Users\MYOB\Desktop\course.bat" 
```

尽管最后 2 个空格的引号不是绝对必要的，但如果您在路径中添加更多包含空格的内容，它将避免您被抓到。

# jsf - JSF2 页面加载缓慢

> ID：13532524
> 
> 赞同：0
> 
> 时间：2012-11-23T16:09:21.847
> 
> 标签：jsf, jsf-2, rendering, loading

我正在使用 JSF2 webapp。当我在不同页面之间导航时，它们通常加载速度很快；小于 100 毫秒。但有时，没有明显的原因，它需要几秒钟。

我一直在尝试找出何时发生这种情况的一些共同点，但无论页面如何，无论我之前是否访问过该页面多次，它都会发生。另外，在页面加载缓慢后，下次我加载它时，它会再次加载一段时间。

这一切似乎都是随机发生的。

我试图找出应用程序的哪一部分需要时间来执行其任务。我已经或多或少地对我能想到的所有事情进行了计时，而不是数据库调用，我的类中的逻辑或类似的东西。相反，查看chrome的“网络”图，它似乎是对时间窃贼的页面的初始调用。

查看 Chrome 的“网络”图，可以看出在这些情况下，第一次通话的延迟是几秒钟。

如果这是由于我自己的错误代码造成的，我至少可以计时并找出我犯错误的地方。看到这似乎发生在我自己的代码之前，我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:41:17.050

这可能不是问题的实际原因，但我注意到我的互联网连接时断时续，即使我正在运行本地服务器，这似乎也会影响应用程序。

如果我向应用程序发出请求并且 Internet 连接中断，则请求的页面将不会加载，并且一旦连接恢复，页面就会加载。

我根本不认为这会影响应用程序，因为服务器是本地的，我可以停用互联网连接并仍然访问应用程序。

# java - 如何在 Eclipse Java 调试器中跟踪变量的值

> ID：13532526
> 
> 赞同：3
> 
> 时间：2012-11-23T16:09:23.217
> 
> 标签：java, eclipse, debugging

我想在 Eclipse 调试器中跟踪布尔（不是布尔）变量的值。

我需要知道它什么时候发生变化，为此，我需要在所有执行过程中跟踪它的价值；不仅在范围内。

`myClass`更具体地说：我有一个带有布尔成员变量的类（我们称之为`isAvailable`. 我的程序实例化了 4 或 5 个`myClass`对象。我期望在执行结束时`isAvailable`，我所有对象的值都设置为`true`. 与我的预期相反，其中一个`myClass`对象已`isAvailable`设置为 false。我需要知道哪些（很多）方法设置`isAvailable`为 false。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T17:02:49.600

您可以在成员字段上设置观察点。观察点就像一个断点，当访问或修改字段时暂停执行（您可以配置要停止的条件）。请参阅[http://www.vogella.com/articles/EclipseDebugging/article.html#advanced_watchpoint](http://www.vogella.com/articles/EclipseDebugging/article.html#advanced_watchpoint)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T16:15:00.457

您可以访问该课程所在的代码吗？

不要使用变量使用 setter 和 getter 来访问它，然后只需在 setter 上放置一个断点。

如果您只需要知道它何时更改，请放置一个条件断点并让表达式类似于：

```
available != this.available 
```

假设您的设置器具有以下格式：

```
public void setAvailable(boolean available){
    this.available = available;
} 
```

设置断点后，您可以通过右键单击断点符号来获得条件断点。

这是关于条件断点的常见问题解答： [http ://wiki.eclipse.org/FAQ_How_do_I_set_a_conditional_breakpoint%3F](http://wiki.eclipse.org/FAQ_How_do_I_set_a_conditional_breakpoint%3F)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T16:14:07.357

在为 设置值的方法中放置一个断点`isAvailable`。

当断点被命中时，您将有可能检查整个执行堆栈。您还可以检查对象并确定涉及 4 个或 5 个实例中的哪一个。

# php - Codeigniter activerecord 选择空到一个虚拟列

> ID：13532529
> 
> 赞同：2
> 
> 时间：2012-11-23T16:09:42.133
> 
> 标签：php, mysql, codeigniter, activerecord, dummy-data

我想为选择添加一个额外的列以进行格式化。问题是当我这样做时

```
$this->db->select("NULL as ExtraColumn1") 
```

codeigniter 将 NULL 视为列，因此当它生成查询时，它类似于

```
SELECT `NULL` AS ExtraColumn1 ... 
```

这当然会返回数据库错误。当我尝试时也会发生同样的情况

```
$this->db->select(" '' as ExtraColumn1") 
```

有什么方法可以使用activerecord吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T16:10:49.637

告诉 CodeIgniter 不要将字段包装在刻度中。您可以通过`false`作为第二个参数传递来做到这一点`select()`：

```
 $this->db->select("NULL as ExtraColumn1", false); 
```

从[手册](http://codeigniter.com/user_guide/database/active_record.html#select)：

> $this->db->select() 接受可选的第二个参数。如果您将其设置为 FALSE，CodeIgniter 将不会尝试使用反引号保护您的字段或表名。如果您需要复合选择语句，这很有用。

# python - Python stats：如何将其写入（人类可读的）文件

> ID：13532531
> 
> 赞同：24
> 
> 时间：2012-11-23T16:09:42.243
> 
> 标签：python, file-io, profiling

我正在使用 Python 的热点分析器：[http ://docs.python.org/2/library/hotshot.html](http://docs.python.org/2/library/hotshot.html)

它显示了如何打印统计信息：

```
stats.print_stats(20) 
```

但是我如何将其放入文件中？我不确定如何获取这些信息，因此我可以使用 write() 将其写入文件。

编辑：

我想要以这种方式打印的同样易于阅读的结果：

```
stats = hotshot.stats.load("stones.prof")
stats.strip_dirs()
stats.sort_stats('time', 'calls')
stats.print_stats(20) 
```

所以它看起来像这样：

```
ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1    3.295    3.295   10.090   10.090 pystone.py:79(Proc0) 
```

（所以当我打开stones.prof时，它看起来不像）

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-05-08T17:34:25.100

Stats 采用可选的“流”参数。只需打开一个文件并将打开的文件对象传递给 Stats 构造函数，如下所示。从那时起，任何对 print_stats() 的调用都将输出到您传递给构造函数的流中。希望这可以帮助。:)

```
with open('path/to/output', 'w') as stream:
    stats = pstats.Stats('path/to/input', stream=stream)
    stats.print_stats() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-13T19:25:12.303

输出重定向怎么样？

```
import sys
import pstats
sys.stdout = open('readable.profile', 'w')
p = pstats.Stats('input.profile')
p.print_stats() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T09:27:03.360

我最终重写了 print_stats() 函数，首先从 pstats.py 复制它。它返回一个字符串，然后可以将其写入文件。我没有测试每个 if-else 循环，只是它在我需要它的示例中有效。我把原来的行注释掉了。尽管该函数不再使用真正的“自我”，但我已将变量名称保持不变。

```
stats = hotshot.stats.load("stones.prof")
stats.strip_dirs()
stats.sort_stats('time', 'calls')
readable_str = xprint_stats(stats, 20)

import pstats
def xprint_stats(self, *amount):
    x = ""
    for filename in self.files:
        x += " " + filename
    #if self.files: print >> self.stream
    # ?
    indent = ' ' * 8
    for func in self.top_level:
        #print >> self.stream, indent, xfunc_get_function_name(func)
        x += indent + pstats.func_get_function_name(func)

    #print >> self.stream, indent, self.total_calls, "function calls",
    x +=  indent + str(self.total_calls) + " function calls" + " "
    if self.total_calls != self.prim_calls:
        #print >> self.stream, "(%d primitive calls)" % self.prim_calls,
        x += "(%d primitive calls)" % self.prim_calls + " "
    #print >> self.stream, "in %.3f seconds" % self.total_tt
    #print >> self.stream
    x +=  "in %.3f seconds" % self.total_tt + "\n"
    #width, list = stats.get_print_list(amount)
    msg, width, list = xget_print_list(stats, amount)
    x += msg

    if list:
        #self.print_title()
        x += "\n" + '   ncalls  tottime  percall  cumtime  percall filename:lineno(function)'
        x += "\n"
        for func in list:
            #self.print_line(func)
            x +=  xprint_line(self, func) + "\n"
#        print >> self.stream
#        print >> self.stream
    #return self
    return x

def xprint_line(self, func):  
    x = ""
    cc, nc, tt, ct, callers = self.stats[func]
    c = str(nc)
    if nc != cc:
        c = c + '/' + str(cc)
#    print >> self.stream, c.rjust(9),
#    print >> self.stream, f8(tt),
    x +=  c.rjust(9) + " "
    x +=  pstats.f8(tt) + " "
    if nc == 0:
        #print >> self.stream, ' '*8,
       x +=  ' '*8 
    else:
        #print >> self.stream, f8(float(tt)/nc),
        x +=  pstats.f8(float(tt)/nc) + " "
    #print >> self.stream, f8(ct),
    x +=  pstats.f8(ct) + " "
    if cc == 0:
        #print >> self.stream, ' '*8,
        x +=  ' '*8
    else:
        #print >> self.stream, f8(float(ct)/cc),
        x +=   pstats.f8(float(ct)/cc) + " "
    #print >> self.stream, func_std_string(func)
    x +=  pstats.func_std_string(func) + " "
    return x

def xget_print_list(self, sel_list):
    width = self.max_name_len
    if self.fcn_list:
        stat_list = self.fcn_list[:]
        msg = "   Ordered by: " + self.sort_type + '\n'
    else:
        stat_list = self.stats.keys()
        msg = "   Random listing order was used\n"

    for selection in sel_list:
        stat_list, msg = self.eval_print_amount(selection, stat_list, msg)

    count = len(stat_list)

    if not stat_list:
        return 0, stat_list
    #print >> self.stream, msg
    if count < len(self.stats):
        width = 0
        for func in stat_list:
            if  len(pstats.func_std_string(func)) > width:
                width = len(pstats.func_std_string(func))
    #return width+2, stat_list
    return msg, width+2, stat_list 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-25T17:22:27.853

您可以使用该库：pstats_print2list [https://pypi.python.org/pypi/pstats_print2list](https://pypi.python.org/pypi/pstats_print2list)

`pip install pstats_print2list` 和用法：

```
from pstats_print2list import get_pstats_print2list, print_pstats_list
fname_stats = 'my_profiling_out.stats'
pstats_list = get_pstats_print2list(
    os.path.expanduser(fname_stats),
    filter_fnames=['myfile1.py', 'myfile2.py', 'root_path1'],
    exclude_fnames=['dontshow.py', 'path_dont_show'],
    sort='cumulative',
    limit=5,
)
print_pstats_list(pstats_list) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-06T09:50:27.240

对于那些寻找另一种解决方案的人，我们可以将字符串数据放入 txt 文件。下面的代码将使用两个函数将两个数字相加，然后制作 Profile 数据，最后将其写入 out.txt 文件。

### 主文件

```
import cProfile
import time
import pstats
from io import StringIO

def add_slow(a, b):
    time.sleep(0.5)
    return a+b

def add_fast(a, b):
    return a+b

prof = cProfile.Profile()

def main_func():
    arr = []
    prof.enable()
    for i in range(10):
        if i%2==0:
            arr.append(add_slow(i,i))
        else:
            arr.append(add_fast(i,i))
    prof.disable()
    #prof.print_stats(sort='time')
    prof.dump_stats("main_funcs.prof")
    return arr

main_func()
stream = StringIO();
stats = pstats.Stats("main_funcs.prof", stream=stream); 
stats.print_stats()
stream.seek(0)
print(16*'=',"RESULTS",16*'=')
data = stream.read()
print(data)
myText = open('out.txt', 'w')
myText.write(data)
myText.close() 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-11-23T16:15:26.153

> [`stats.dump_stats(path/to/file)`](http://docs.python.org/2/library/profile.html#pstats.Stats.dump_stats)

# php - PHP 中静态方法的生命周期

> ID：13532535
> 
> 赞同：0
> 
> 时间：2012-11-23T16:10:16.513
> 
> 标签：php

我有一个类，我在其中实现了一个数组属性。我想在该属性中设置几个对象。它将在请求流中多次完成，因此它被声明为静态。它不是一个单例类。

当我第二次向它添加一些东西时，该类中的属性是否会保留其早期的值？ *（添加是通过静态方法完成的，如果这改变了任何东西）*

这个例子：

```
/* file1.php */
Foo::add('value1');
include 'file2.php';

/* file2.php */
...
Foo::add('value2'); 
```

这是 的定义`Foo`：

```
class Foo {
   public static $bar = [];
   public static function add($value)
   {
      Foo::$bar[] = $value;
   }
} 
```

这是一个好习惯吗？单身在这里更好吗？有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:14:04.797

是的。`include()`and语句本质上是将引用文件的`require()`内容转储到语句所在的位置。您可以将其全部视为一个脚本。

您可以通过添加`var_dump(Foo::bar);`到脚本末尾来自己测试您的问题。

*仅当您只希望类实例化/初始化一次*时，才真正需要使用单例模式。如果您希望在脚本中包含其他实例，那么您将希望将其保留为普通类并开始研究如何做您想做的事情。即：[通过引用传递](http://php.net/manual/en/language.references.pass.php)。

# jquery - jquery divelement 在滚动动作上重复动画

> ID：13532542
> 
> 赞同：0
> 
> 时间：2012-11-23T16:10:47.093
> 
> 标签：jquery, scroll, jquery-animate, fadein, repeat

我有这个功能：

```
$(window).scroll(function(){
    if ($(this).scrollTop() > 100) {
        $('.scrollup').fadeIn('slow', function() {
            $('.cartinfo').animate({'right': '+=46px'}, 'slow');
        });
    } else {
        $('.scrollup').fadeOut('slow', function() {
            $('.cartinfo').animate({'right': '-=46px'}, 'slow');
        });
    }
}); 
```

如果向上滚动淡入，则带有类的 div 应该加上 +46px，淡出时应该加上 -46。

但它会在我所做的每个滚动动作上触发动画。

您对此有解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:21:34.623

现在，您将`fade`and`animate`调用绑定到每个滚动操作。您需要弄清楚您希望它们何时触发，因为每个滚动操作显然都不是正确的时间。

一种解决方案是，您可以在触发新动画之前检查元素当前是否正在动画，使用[这个](https://stackoverflow.com/questions/724911/how-do-i-find-out-with-jquery-if-an-element-is-being-animated)类似的问题作为指导。

# java - Android 日历重复事件的结束日期/时间错误

> ID：13532549
> 
> 赞同：1
> 
> 时间：2012-11-23T16:11:04.823
> 
> 标签：java, android, android-intent, google-calendar-api

这是我查看从 ListActivity 中选择的事件的代码（`events`是包含所有这些事件的 ArrayList）：

```
Uri viewUri = Uri.parse("content://com.android.calendar/events/" + events.get(position).id);
Intent l_intent = new Intent(Intent.ACTION_VIEW);
l_intent.putExtra("beginTime", Long.parseLong(events.get(position).startTime));
l_intent.putExtra("endTime", Long.parseLong(events.get(position).endTime));
startActivity(l_intent); 
```

此代码适用于除重复事件之外的所有事件。对于任何重复发生的事件，endTime 返回为 null，从而导致程序崩溃。有谁知道如何解决这个问题？还有其他我应该通过的额外内容吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T13:23:50.047

beginTime 和 endTime 可以为 0/null，因为您从错误的数据库中获取它们，当然是从*事件*数据库中获取的。您应该改用*实例*数据库（例如：SDK 8 上的“content://com.android.calendar/instances/when/”）。

在*实例*数据库中，您将获得所有“真实”事件：在那里，每个重复事件都有所需的实例数，并具有正确的开始和结束时间戳；并且其他事件也是可见的。您只需阅读这些字段 - event_id、begin、end - 并使用它们来打开您的 Intent。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T16:26:53.947

在处理日历事件时，我发现 calendar.db 中的 events 表存储了您使用过的正常事件的信息。（我猜你使用 startTime 作为 Dtstart 和 endTime 作为 Dtend）

但在 Recurrence 事件的情况下，Dtend 将为空。因此，请改为使用 lastDate 列，因为该列永远不会为空。它在重复事件和正常事件的情况下都可以很好地工作。

但是，如果您需要有关重复事件的更多信息，请按照@GeH 的建议使用实例表（例如每个事件的确切开始和结束时间）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T16:28:16.663

我认为您可能需要`null`在解析之前进行检查：

```
long endTime = 0L;//use some default value
if( events.get(position).endTime != null)
     endTime = Long.parseLong(events.get(position).endTime);
}
l_intent.putExtra("endTime", endTime ); 
```

# javascript - Jquery 使用选择值更改脚本标签的 src

> ID：13532551
> 
> 赞同：1
> 
> 时间：2012-11-23T16:11:14.973
> 
> 标签：javascript, jquery

> **我需要更改标签中 src 的值** ：

```
<script type='text/javascript' src='gray.js'></script> 
```

为此，我使用了一个组合框：

```
<select id="chartTheme">
   <option value="dark-blue">Dark Blue</option>
   <option value="gray">Gray</option>
</select> 
```

当我选择并单击刷新按钮时，如何使其使用 Jquery 函数？

刷新按钮的来源：

```
<input type="image" name="commit" src="../icons/refresh.png" onClick="javascript:updateGraph()"></input> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:26:46.073

您可以`$.getScript()`用于此目的。它将一个新脚本加载到页面中并运行其中的代码。

```
function updateGraph()
{
    var sel = $('#chartTheme').val();

    $.getScript(sel + '.js');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:22:00.330

试试这个：

```
$('#chartTheme').change(function () {
    var optionVal = $(this).val();
    console.log(optionVal);
    updateGraph();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T17:21:44.547

我认为这应该是这样的：

```
$('input[name="commit"]').click(function(){
    var srcExt = $('#chartTheme').val();
    $('<script'+' type="text/javascript"'+' src='+ srcExt +'></'+'script>').appendTo('body');
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T17:31:17.100

```
$('#chartTheme').change(function () {
    var optionVal = $(this).val();
    var miSrc = "someSrc";
    $('input.someClass').attr('src', miSrc);
    updateGraph();
}); 
```

# android - 如何使用 Android 从 Web 服务获取响应

> ID：13532554
> 
> 赞同：3
> 
> 时间：2012-11-23T16:11:27.303
> 
> 标签：android, web-services

嗨，我尝试使用 Android 从 Web 服务读取任何数据，但每次尝试都遇到问题

今天我尝试从 3schools 网站阅读 Web 服务

使用本准则

```
package com.example.lo2i03;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.TextView;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
//import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

public class MainActivity extends Activity {

    private static String SOAP_ACTION = "http://tempuri.org/CelsiusToFahrenheit";
    private static String NAMESPACE = "http://tempuri.org/";
    private static String METHOD_NAME = "CelsiusToFahrenheit";
    private static String URL = "http://www.w3schools.com/webservices/tempconvert.asmx?WSDL";
    TextView tv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
         tv = (TextView)findViewById(R.id.txt);
         SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);             
         request.addProperty("Celsius","32"); 
         SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER12);
         envelope.setOutputSoapObject(request);
         envelope.dotNet = true;
         try
         {
               HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);          
               androidHttpTransport.call(SOAP_ACTION, envelope);             
               SoapObject result = (SoapObject)envelope.getResponse();
               tv.setText(result.getProperty(0).toString());
         }
         catch (Exception e) 
         {
              tv.setText("Error");
         }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

知道我添加了清单访问 Internet 的权限

## 它直接进入一个捕获块......

清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.lo2i03"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.lo2i03.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
        <uses-permission android:name="android.permission.INTERNET"></uses-permission>
</manifest> 
```

* * *

安卓版本：4.2 - 4.2

* * *

## LogCat 错误看起来像

```
11-24 01:28:29.065: E/Trace(13408): error opening trace file: No such file or directory (2)
11-24 01:28:29.195: D/AndroidRuntime(13408): Shutting down VM
11-24 01:28:29.195: W/dalvikvm(13408): threadid=1: thread exiting with uncaught exception (group=0x412862a0)
11-24 01:28:29.195: E/AndroidRuntime(13408): FATAL EXCEPTION: main
11-24 01:28:29.195: E/AndroidRuntime(13408): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.lo2i03/com.example.lo2i03.MainActivity}: android.os.NetworkOnMainThreadException
11-24 01:28:29.195: E/AndroidRuntime(13408):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at android.app.ActivityThread.access$600(ActivityThread.java:140)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at android.os.Looper.loop(Looper.java:137)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at android.app.ActivityThread.main(ActivityThread.java:4898)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at java.lang.reflect.Method.invokeNative(Native Method)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at java.lang.reflect.Method.invoke(Method.java:511)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1008)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:775)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at dalvik.system.NativeStart.main(Native Method)
11-24 01:28:29.195: E/AndroidRuntime(13408): Caused by: android.os.NetworkOnMainThreadException
11-24 01:28:29.195: E/AndroidRuntime(13408):    at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1118)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at java.net.InetAddress.getAllByName(InetAddress.java:214)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at org.ksoap2.transport.ServiceConnectionSE.connect(ServiceConnectionSE.java:76)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:146)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:95)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at com.example.lo2i03.MainActivity.onCreate(MainActivity.java:35)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at android.app.Activity.performCreate(Activity.java:5191)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
11-24 01:28:29.195: E/AndroidRuntime(13408):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)
11-24 01:28:29.195: E/AndroidRuntime(13408):    ... 11 more 
```

* * *

新的 LOGCAT (1.0)

```
11-24 16:28:28.850: E/Trace(25195): error opening trace file: No such file or directory (2)
11-24 16:28:28.995: D/libEGL(25195): loaded /system/lib/egl/libEGL_mali.so
11-24 16:28:28.995: D/libEGL(25195): loaded /system/lib/egl/libGLESv1_CM_mali.so
11-24 16:28:29.000: D/libEGL(25195): loaded /system/lib/egl/libGLESv2_mali.so
11-24 16:28:29.000: D/(25195): Device driver API match
11-24 16:28:29.000: D/(25195): Device driver API version: 10
11-24 16:28:29.000: D/(25195): User space API version: 10 
11-24 16:28:29.000: D/(25195): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Wed Sep 12 17:53:53 KST 2012 
11-24 16:28:29.030: D/OpenGLRenderer(25195): Enabling debug mode 0
11-24 16:28:31.215: D/dalvikvm(25195): GC_CONCURRENT freed 214K, 10% free 12330K/13575K, paused 13ms+13ms, total 40ms
11-24 16:28:39.615: W/IInputConnectionWrapper(25195): getSelectedText on inactive InputConnection
11-24 16:28:39.615: W/IInputConnectionWrapper(25195): setComposingText on inactive InputConnection
11-24 16:28:39.615: W/IInputConnectionWrapper(25195): getExtractedText on inactive InputConnection 
```

了解我使用 (WiFi) 访问互联网的知识。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T23:21:25.560

NetworkOnMainThreadException 意味着您正在 UI 线程中运行 http 请求代码。

尝试这样的事情：

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
         tv = (TextView)findViewById(R.id.txt);
         final SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);             
         request.addProperty("Celsius","32"); 
         final SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER12);
         envelope.setOutputSoapObject(request);
         envelope.dotNet = true;
         new AsyncTask<Void, Void, Boolean>() {
            SoapObject obj;

            @Override
            protected Boolean doInBackground(Void... params) {
                   //here you can do your background network job
                try
                 {
                       HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);          
                       androidHttpTransport.call(SOAP_ACTION, envelope);             
                       obj = (SoapObject)envelope.getResponse();

                       return true;
                 }
                 catch (Exception e) 
                 {
                     e.printStackTrace();   
                         return false;                    
                 }
            }
            @Override
            protected void onPostExecute(Boolean result) {
             //here you can do your UI job
                if (!result) 
                    tv.setText("Error");
                else 
                    tv.setText(obj.getProperty(0).toString());
                super.onPostExecute(result);
            }
        }.execute();

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T18:57:46.630

尝试：

```
 SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope. dotNet= true;
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    try {
        androidHttpTransport.call(SOAP_ACTION, envelope);                    
        SoapPrimitive result = (SoapPrimitive) envelope.getResponse();          
        String r = result.toString();
        return r;
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

如果您需要返回对象或数组列表，我可以发布解决方案...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T10:28:54.790

从肥皂网络服务获取对象：

```
 SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope. dotNet= true;
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    try {
        androidHttpTransport.call(SOAP_VERATENDIMENTO, envelope);                    
        SoapObject result = (SoapObject) envelope.getResponse();            
        YourClass yourClass = new YourClass();
        if (result == null){
            return null;
        } else {
            yourClass.setName(result.getProperty("name").toString());
            yourClass.setEmail(result.getProperty("email").toString());
            return yourClass;               
        }                       
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }               
    return null; 
```

返回 arraylist 做：

```
 SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope. dotNet= true;
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    try {
        androidHttpTransport.call(SOAP_VERMENSAGENS, envelope);                    
        SoapObject result = (SoapObject) envelope.getResponse();            

        List<YourClassObject> yourList = new ArrayList<YourClassObject>();
        if (result == null){
            return null;
        } else {
            for(int i =0; i < result.getPropertyCount(); i++){
                SoapObject soap = (SoapObject) result.getProperty(i);
                YourClassObject yourClass = new YourClassObject();
                yourClass.setName(soap.getProperty("name").toString()));
                yourClass.setEmail(soap.getProperty("email").toString()));
                yourList.add(yourClass);
            }
            return yourList;
        }                       
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (XmlPullParserException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }               
    return null; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-14T07:51:59.650

在清单文件中添加对 Internet 的权限

```
 <uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

然后在您的活动中，您在哪里运行您的 http 请求，在 setContentView 之前添加此行，如下所示

```
 setContentView(R.layout.activity_profile);
        if (android.os.Build.VERSION.SDK_INT > 9) {
            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
            StrictMode.setThreadPolicy(policy);
        } 
```

# ubuntu - Amazon EC2 - 最后一个命令错误

> ID：13532556
> 
> 赞同：10
> 
> 时间：2012-11-23T16:11:36.857
> 
> 标签：ubuntu, amazon-ec2, ubuntu-12.04

我刚刚获得了一个带有 Ubuntu 12.04 的 Amazon EC2 微型实例。问题是`last`命令不起作用...

错误信息是：

```
last: /var/log/wtmp: No such file or directory
Perhaps this file was removed by the operator to prevent logging last info. 
```

提前致谢 ！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-23T21:33:26.643

`/var/log/`您很可能过于小心地清理了文件夹中的系统日志。这不是什么大问题要解决。

**步骤 1：使用以下命令重新创建文件**

```
sudo touch /var/log/wtmp 
```

**第 2 步：设置适当的权限**

```
sudo chown root:utmp /var/log/wtmp
sudo chmod 0664 /var/log/wtmp 
```

**后期编辑：**

评论中的问题：

> 我很确定我没有删除那个特定的，这可能是入侵的迹象

该文件是linux命令[last](http://unixhelp.ed.ac.uk/CGI/man-cgi?last)使用的日志文件

> 显示自该文件创建以来所有登录（和退出）用户的列表

当然 - 如果我是入侵者并且我想删除我访问的任何迹象，我可能会从该日志文件中删除我的登录名，但很可能我不会删除整个文件，因为这将是入侵的迹象。如果我不在乎，只想抹去我的痕迹，我可能会毁掉整台机器。

缺少原因的更可能原因在[James Turnbull 的 Hardening Linux](http://books.google.de/books?id=PyqjvNNltqYC&pg=PA43&lpg=PA43&dq=/var/log/wtmp+gone&source=bl&ots=XDnF7wUz9S&sig=1Iva1Xb0lbAFPKzqoelOnzmPlPA&hl=de&sa=X&ei=ByMQUa7BJs75sgacooG4DA&ved=0CFcQ6AEwBDgU#v=onepage&q=%2Fvar%2Flog%2Fwtmp%20gone&f=false)一书中描述，当时谈到`last`和`lastb`

> 要开始收集填充这些命令的输出所需的数据，您需要创建几个文件来保存数据。**一些发行版会自动创建这些文件，但其他发行版则需要手动创建它们。**

我不是法医专家，所以我无法告诉您如何检测入侵，也无法确定您不是黑客的目标，但我个人认为所描述的原因可能更现实。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-19T08:17:11.727

您可能还想包含 btmp。

```
touch /var/log/wtmp
chmod 0664 /var/log/wtmp
chown root:utmp /var/log/wtmp

touch /var/log/btmp
chmod 0664 /var/log/btmp
chown root:utmp /var/log/btmp 
```

# c# - 不能通过委托传递错误

> ID：13532561
> 
> 赞同：-6
> 
> 时间：2012-11-23T16:11:59.573
> 
> 标签：c#, .net

不能通过委托传递错误...

**错误：**

```
Object reference not set to an instance of an object. 
```

**代码：**

```
 RssReader.GetRssItems(IsUsePlainText,
                                  url, ShowImages,
                                  items =>
                                  {
                                      if (items.Any())
                                      {
                                          DataRSS.AddRange(items);
                                      }
                                  }, error => {

                                      var s = error.Message; // Nothing is go here... :(
                                  }
                                            , OnFinally);

public static void GetRssItems(bool isUsePlainText, string rssFeedUrl, bool showImages, 
            Action<IEnumerable<RssFeedItem>> onGetRssItemsCompleted = null,
            Action<Exception> onError = null, Action onFinally = null)
{

  var webClient = new WebClient();

  webClient.OpenReadCompleted += delegate(object sender, OpenReadCompletedEventArgs e)
  {
     try
     {
        if (e.Error != null) // report error
        {
            if (onError != null)
            {
                 onError(e.Error);
            }
            return;
         }

         var stream = e.Result;
         var response = XmlReader.Create(stream); 
         var feeds = SyndicationFeed.Load(response); // When something is wrong here an exception occurs

         // do other stuff...

}
 catch (Exception ex)
 {
   onError(ex); // ERROR HAPPENS HERE.... "Object reference not set to an instance of an object."
   return;

 }
 finally
 {
   if (onFinally != null)
   {
      onFinally();
   }
} 
```

更新：

![在此处输入图像描述](../Images/e06deffb3575d5819e6dc2395cac7fe6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:13:12.897

听起来`onError`是空的。

改成：

```
if (onError != null) onError(ex); 
```

或者，如果调用者未能传入委托，则执行一些其他操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T16:14:22.033

执行与第一次调用操作时相同的空检查：

```
catch (Exception ex)
 { 
    if (onError != null)
        onError(ex); 
   return;    
 } 
```

如果您想避免空检查 -`Action`在您的方法顶部附加虚拟处理程序以委托：

```
onError += (e) => {}; 
```

# android - 为什么 Eclipse ADT 布局这么难用？

> ID：13532563
> 
> 赞同：0
> 
> 时间：2012-11-23T16:12:20.837
> 
> 标签：android, eclipse

我制作了一个Android应用程序。并在布局上放置一些按钮和进度条。但是这些元件的位置很难调整。当我拖动它们时，它们会移动到一些狂野的地方。我不知道其他人是否遇到过同样的问题。而我无法理解的是，当我重新布局组件时，我发现button1现在具有button2的功能，而button2具有button3的功能......谁遇到了同样的问题？你能告诉我为什么和你的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:18:56.980

有些人的难度不能轻易比较。这取决于很多因素，其中最重要的因素之一是您的专业知识。如果你习惯了某样东西，然后你会突然改用完全不同的东西，你会发现这很难使用，即使它通常更容易使用。

关于 android ADT 布局，我同意你的观点，即图形界面不太好用（特别是如果你来自 iPhone）。

我可以建议您直接使用 XML 并仅将图形界面用于创建按钮、文本等基本操作。

使用 XML，一开始会有点困难，但是一旦熟悉了，就可以将限制推得更高。

我不知道这是否有帮助，但这是我的观点。（+1 你，有趣的问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:17:18.770

图形布局有时表现得不可预测。我的解决方案是使用屏幕右侧窗格中的大纲并手动设置所有参数，而不是使用“拖放方法”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T16:29:15.023

我同意 Marcin 的观点，即拖放编辑器有时会以意想不到的方式运行。我通常使用它来实现粗略的布局，然后在 xml 中进行微调。

供参考 - 用于在 xml 中创建输入控件的 Android 文档：

> [http://developer.android.com/guide/topics/ui/controls.html](http://developer.android.com/guide/topics/ui/controls.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T17:09:46.090

我不同意 Tom Hard 的观点，那时我们在 Eclipse 中没有一个布局插件，必须手动编写所有布局。实际发生的是 ADT 中仍然存在许多错误。

我的建议是努力研究布局，并在发生错误时通过代码对其进行编辑。

# dns - Nginx + dns 设置

> ID：13532565
> 
> 赞同：3
> 
> 时间：2012-11-23T16:12:24.317
> 
> 标签：dns, nginx

我有 www.exampledomain1.com、www.exampledomain2.com，我在 VPS IP：11.22.333.444（示例）和 nginx 上构建站点。

我做了什么：

对于 www.exampledomain1.com ： DNS 设置：

```
Type    Host                    IP
 A     www.exampledomain1.com   11.22.333.444 
```

Nginx 设置（短）：

```
server{
       server_name  www.exampledomain1.com;
} 
```

对于 www.exampledomain2.com ： DNS 设置：

```
Type    Host                    IP
 A      www.exampledomain2.com  11.22.333.444 
```

Nginx 设置（短）：

```
server{
       server_name  www.exampledomain2.com;
} 
```

我的想法是：当 www.exampledomain1.com 在浏览器中触发时，我的 nginx 正在接收“主机”（server_name www.exampledomain.com），然后从正确的根目录启动我的网站。我做错了什么？

# php - 创建一个被调用的类的新实例而不是父类

> ID：13532576
> 
> 赞同：2
> 
> 时间：2012-11-23T16:12:54.770
> 
> 标签：php, inheritance, static

当方法在父类中时，如何返回被调用类的实例。

例如。在下面的示例中，如何返回`B`if 我调用的实例`B::foo();`？

```
abstract class A
{
    public static function foo()
    {
        $instance = new A(); // I want this to return a new instance of child class.
             ... Do things with instance ...
        return $instance;
    }
}

class B extends A
{
}

class C extends A
{
}

B::foo(); // Return an instance of B, not of the parent class.
C::foo(); // Return an instance of C, not of the parent class. 
```

我知道我可以这样做，但是有没有更简洁的方法：

```
abstract class A
{
    abstract static function getInstance();

    public static function foo()
    {
        $instance = $this->getInstance(); // I want this to return a new instance of child class.
             ... Do things with instance ...
        return $instance;
    }
}

class B extends A
{
    public static function getInstance() {
        return new B();
    }
}

class C extends A
{
    public static function getInstance() {
        return new C();
    }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-23T16:17:33.990

```
$instance = new static; 
```

您正在寻找[后期静态绑定](http://php.net/manual/en/language.oop5.late-static-bindings.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T16:16:55.150

[http://www.php.net/manual/en/function.get-called-class.php](http://www.php.net/manual/en/function.get-called-class.php)

```
<?php

class foo {
    static public function test() {
        var_dump(get_called_class());
    }
}

class bar extends foo {
}

foo::test();
bar::test();

?> 
```

结果

```
string(3) "foo"
string(3) "bar" 
```

所以你的功能将是：

```
public static function foo()
{
    $className = get_called_class();
    $instance = new $className(); 
    return $instance;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T16:19:12.063

所有你需要的是 ：

```
abstract class A {
    public static function foo() {
        $instance = new static();
        return $instance ;
    }
} 
```

或者

```
abstract class A {
    public static function foo() {
        $name = get_called_class() ;
        $instance = new $name;
        return $instance ;
    }
} 
```

# wolfram-mathematica - 使用 Mathematica 登录到安全网站

> ID：13532581
> 
> 赞同：2
> 
> 时间：2012-11-23T16:13:12.503
> 
> 标签：wolfram-mathematica

有谁知道如何使用 Mathematica 访问安全网站？我正在尝试使用 Mathematica 的内置浏览器登录并访问某些需要用户登录才能访问的网页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T01:14:34.233

[升级到](http://www.wolfram.com/mathematica/new-in-9/full-range-of-web-access-support/)今天发布的 Mathematica 9，支持`"Password"`新[`URLFetch`函数](http://reference.wolfram.com/mathematica/ref/URLFetch.html)中的一个选项。

# groovy - 比较groovy中的null和数字

> ID：13532582
> 
> 赞同：9
> 
> 时间：2012-11-23T16:13:24.200
> 
> 标签：groovy

为什么在 Groovy 中以下是正确的？

```
0 > null 
```

它是由选择还是仅仅是 compareTo 实现的结果？

我正在使用 Groovy 2.0.5。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-23T16:19:57.590

在 Groovy`null`中是最低的元素，所以一切都是`> null`

```
assert                    'tim' > null
assert                        0 > null
assert                       -1 > null
assert Double.NEGATIVE_INFINITY > null 
```

这意味着这样的事情可以工作：

```
[ 1, null, 3 ].sort() 
```

否则会发生什么？如果你想让它工作，你必须说*“null 比任何东西都低”*或*“null 比任何东西都高”* ......

Groovy 选择了前者

# php - 在 PHP 中使用 simplexml_load_string 时，锚标记被剥离到节点中

> ID：13532586
> 
> 赞同：1
> 
> 时间：2012-11-23T16:13:33.997
> 
> 标签：php, xml, simplexml

我试图在使用 simplexml_load_string 时获取节点的值。我得到节点的值很好，但由于某种原因，标签中包含的锚标签被完全剥离，并且没有显示出来。

这是xml：

```
<MessageAfterVoting>Thanks for voting! Here is a link to a page: <a href="/poll/result.html" >clickhere</a></MessageAfterVoting> 
```

当我使用 simplexml_load_string 访问此节点时（MessageAfterVoting）。我只得到文字

```
Thanks for voting! Here is a link to a page: 
```

我这样调用 simplexml_load_string ：

```
$PresentationContent = simplexml_load_string($pollXML); 
```

有人对解决方法有任何想法吗？最好不要使用 CDATA？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:23:10.210

如果您不能使用 CDATA，那么您可以使用 html 实体。将 < 和 > 更改为 < 和> 代码。

但是 CDATA 是正确的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T17:12:01.583

试试这个功能：

```
function SimpleXmlElementAsString($simpleXmlElement)
{           
    $innerXML= '';
    foreach (dom_import_simplexml($simpleXmlElement)->childNodes as $child)
    {
        $innerXML .= $child->ownerDocument->saveXML( $child );
    }
    return $innerXML;
} 
```

所以你会像这样使用它：

```
$xml = simplexml_load_string($pollXML);
$MessageAfterVoting = $xml->MessageAfterVoting;
$PresentationContent = SimpleXmlElementAsString($MessageAfterVoting); 
```

# javascript - 试图让多个灯箱在 javascript 中工作

> ID：13532588
> 
> 赞同：0
> 
> 时间：2012-11-23T16:14:03.033
> 
> 标签：javascript, html, lightbox

我一直在关注 JS 灯箱的教程，但我并不完全理解如何在多个 div 上使用它。

我想要的是同一个灯箱，但我希望里面的内容根据我按下的按钮/链接而有所不同。

任何帮助，将不胜感激。我将在下面发布相关的片段。

HTML：

```
<ul id="portfolioitems">        
    <li><a href="#1" rel="nofollow" id="1"><img src="images/digitaltattoo.jpg"><div>Digital Tattoo</div></a></li>
    <li><a href="#2" rel="nofollow" id="2"><img src="images/flashgame.jpg"><div>Flash Game - Deserted</div></a></li>
    <li><a href="#3" rel="nofollow" id="3"><img src="images/photos.jpg"><div>Photography</div></a></li>
    <li><a href="#4" rel="nofollow" id="4"><img src="images/bumper.jpg"><div>Video Bumper</div></a></li>
    <li><a href="#5" rel="nofollow" id="5"><img src="images/fbfanaticism.jpg"><div>Facebook Fanaticism</div></a></li>
    <li><a href="#6" rel="nofollow" id="6"><img src="images/oldwebsite.jpg"><div>Business Card Website</div></a></li>
    </ul> 
```

```
<div id="1">

    <div class="contentwindowwrapper">

        <div class="contentwindow">

            <div class="contentwindowclose">x</div>

            4365786

        </div>

    </div>

</div>

<div id="2">

    <div class="contentwindowwrapper">

        <div class="contentwindow">

            <div class="contentwindowclose">x</div>

            reerrhr

        </div>

    </div>

</div> 
```

JS：

```
$(document).ready(function(){

            var divnumber = $(this).attr("href");

            $('#1').click(function(){
                $('.contentwindowwrapper, .contentwindow').animate({'opacity':'1.00'}, 100, 'linear');
                $('.contentwindow').animate({'opacity':'1.00'}, 100, 'linear');
                $('#1, .contentwindowwrapper, .contentwindow').css('display', 'block');
                $('.contentwindowwrapper, .contentwindow').css('z-index', '1'); 
            });

            $('#2').click(function(){
                $('.contentwindowwrapper, .contentwindow').animate({'opacity':'1.00'}, 100, 'linear');
                $('.contentwindow').animate({'opacity':'1.00'}, 100, 'linear');
                $('#2, .contentwindowwrapper, .contentwindow').css('display', 'block');
                $('.contentwindowwrapper, .contentwindow').css('z-index', '1'); 
            });

            $('.contentwindowclose').click(function(){
                close_contentwindow();
            });

            $('.contentwindowwrapper').click(function(){
                close_contentwindow();
            });

        });

        function close_contentwindow()
        {
            $('.contentwindowwrapper, .contentwindow').animate({'opacity':'0'}, 100, 'linear', function(){
                $('.contentwindowwrapper, .contentwindow').css('display', 'none');
                $('.contentwindowwrapper, .contentwindow').css('z-index', '-1');
            });
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:55:21.983

No question, but hey here's an answer. This one is working but comes without any styling.

A simple jQuery lightbox plugin:

```
jQuery.fn.myLightbox = function() {

    return this.each( function() {

        var lightboxContentLink = jQuery( this ).attr( 'href' );
        if( jQuery( lightboxContentLink ).length ) {
            /* get contents from another element with ID lightboxContentLink */
            var lightboxContent = jQuery( lightboxContentLink );
        }
        else {
            /**
             * @todo implement loading from URL
             */
            var lightboxContent = 'some URL content';
        }

        var windowWrapper = jQuery( '<div class="contentwindowwrapper" />' );
        var window = jQuery( '<div class="contentwindow" />' );
        var windowHandle = jQuery( '<div class="contentwindowclose">close</div>' );

        /* close popup on handle click */
        windowHandle.click( function( event ) {
            windowWrapper.hide();
        } );

        /* add content and window handle to popup */
        window.append( lightboxContent, windowHandle );

        /* wrap window with wrapper */
        windowWrapper.append( window );
        windowWrapper.hide();

        /* insert new popup into DOM */
        jQuery( 'body' ).append( windowWrapper );

        jQuery( this ).click( function( event ) {

            /* don't follow link */
            event.preventDefault();

            /* close any popups that are still open */
            jQuery( '.contentwindowwrapper' ).hide();

            /* fade-in popup */
            windowWrapper.show( 300 );

        } );

    } );

}; 
```

The required HTML: (complete)

```
<ul id="portfolioitems">
    <li><a href="#c1">Open C1</a></li>
    <li><a href="#c2">Open C2</a></li>
    <li><a href="#c3">Open C3</a></li>
</ul>

<div id="c1">This is the content for popup C1.</div>
<div id="c2">This is the content for popup C2.</div>
<div id="c3">This is the content for popup C3.</div> 
```

The call/setup (jQuery again):

```
jQuery( document ).ready( function( $ ) {

    $( '#portfolioitems a[href]' ).myLightbox();

} ); 
```

# android - Android：ksoap2 请求从标签中删除命名空间

> ID：13532596
> 
> 赞同：1
> 
> 时间：2012-11-23T16:14:30.053
> 
> 标签：android, ksoap

我正在使用 KSOAP，它创建了以下请求有效负载：-

```
<v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" xmlns:v="http://schemas.xmlsoap.org/soap/envelope/">
   <v:Header/>
   <v:Body>
      <n0:ZmobileExecuteReport id="o0" c:root="1" xmlns:n0="urn:sap-com:document:sap:soap:functions:mc-style">
         <Function>EXE</Function>
         <Parameters i:type="n0:Parameters">
            <n0:item>
               <Selname>P_AUART</Selname>
               <Kind>P</Kind>
               <Sign>I</Sign>
               <Option>EQ</Option>
               <Low>Z1</Low>
               <High>Z2</High>
            </n0:item>
         </Parameters>
         <Repid>ZSIMPLE_REPORT0</Repid>
      </n0:ZmobileExecuteReport>
   </v:Body>
</v:Envelope> 
```

仅当元素“item”的值为而不是

我使用了语句信封.implicitTypes = true; 它抑制了正在定义的“类型”属性，但我仍然遇到这个问题。

有没有人以前遇到过这个问题并且能够解决它。

我正在使用 KSOAP2 2.5.8 版本。

这就是我构建请求的方式： -

```
SoapObject parameters = new SoapObject(NAMESPACE, "Parameters");
SoapObject item = new SoapObject("NAMESPAC", "item");

item.addProperty("Selname", "P_AUART");
item.addProperty("Kind", "P");
item.addProperty("Sign", "I");
item.addProperty("Option", "EQ");
item.addProperty("Low", "A1");
item.addProperty("High", "A2");

parameters.addSoapObject(item); 
```

谢谢

马丁

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T19:23:38.370

我通过这样做修复了它： -

```
SoapObject parameters = new SoapObject(NAMESPACE, "Parameters");
SoapObject item = new SoapObject("", "item"); 
```

从子节点中删除 NAMESPACE 修复了它。

我还应该提到它是当我在 SAP ABAP 堆栈上调用 web 服务时。

# jquery - 通过 ajax 请求移动文件（几乎需要使用 Jquery.ajax() 选项）

> ID：13532602
> 
> 赞同：0
> 
> 时间：2012-11-23T16:15:01.053
> 
> 标签：jquery, ajax, cakephp-2.1

当用户单击链接时，我想将文件从一个文件夹移动到另一个文件夹（通过 ajax）

php 移动文件工作正常，但 ajax 部分似乎没有工作。

**在 JS 脚本中调用的 Ajax：**

```
 function moveFiles() {
        $.ajax({
            url: "http://localhost/website/controller/moveFiles",
        });
    } 
```

**(蛋糕)PHP函数**

```
public function moveTmpFiles() {
    $source = new Folder(WWW_ROOT . "uploadify/tmpFiles");
    $unsavedFiles = new Folder(WWW_ROOT . "uploadify/unsavedFiles");
        $this->moveFiles($source->path, $destination_path->path);
} 
```

**查询函数**

```
$( "#element" ).click(function(event){
    event.preventDefault();
    moveTmpFiles();
    $( "#myDialog" ).dialog( "open" );
}); 
```

我想我应该为 $.ajax 调用添加更多选项，但**这里真正的问题是：**

**jquery ajax 调用上的哪些选项是使其工作所必需的？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:20:16.307

你有一个名为的 JS 函数`moveFiles()`，你正在调用`moveTmpFiles();`它，它是 PHP 函数。

如下更改您的 jQuery 函数。

```
$( "#element" ).click(function(event){
    event.preventDefault();
    moveFiles();
    $( "#myDialog" ).dialog( "open" );
}); 
```

*作为旁注，不要使用绝对路径。当您将应用程序移至生产服务器时，您必须更改代码中的所有 URL。*

# vb.net - 如何模拟鼠标点击？

> ID：13532604
> 
> 赞同：2
> 
> 时间：2012-11-23T16:15:10.647
> 
> 标签：vb.net, mouse, simulate

我想知道如何使用 VB.NET 创建一种自动点击器。

我基本上会预先定义点击坐标和点击，我猜因为我希望不止一次定期发生，所以点击必须被延迟分开，会发生在应用程序窗口之外（我读到这涉及额外的系统挂钩？ ）。

我能找到的唯一代码与应用程序窗口上的点击有关，这不是我要找的。

**简而言之：**我想单击应用程序窗口上的一个按钮，这将在某些预定义的屏幕坐标上启动多次单击。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T02:19:26.830

请参阅 social.msdn 上的此讨论：[在程序中模拟鼠标单击](http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/e79d4501-b3d9-4e37-9b70-966105e09ab1/)。

使用 winapi `SetCursorPos`:`GetCursorPos`和`mouse_event`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T22:22:33.133

我相信您需要 P/Invoke 进入 Windows 来完成此操作。

看看[SendInput](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T03:40:59.200

如果您正在使用自动化程序，该程序有一些 tabindex 以进行相关控制。那么您可以使用；

```
SendKeys.Send("{TAB}");
SendKeys.Send("{ENTER}"); 
```

在桌面应用程序上更准确

# ajax - ExtJS4 AJAX 请求是跨域的

> ID：13532611
> 
> 赞同：0
> 
> 时间：2012-11-23T16:15:34.593
> 
> 标签：ajax, extjs, extjs4, cross-domain

我正在尝试发布到侦听不同端口的服务器，但 FireFox 坚持发送 OPTIONS 请求，因为显然我没有使用正确的 URL。如何在没有 FireFox 认为请求可能是跨域并发送 OPTIONS 的情况下 POST 到 localhost:8161？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T03:55:31.250

在这里你有一个答案：

[如何通过 JavaScript 发送跨域 POST 请求？](https://stackoverflow.com/questions/298745/how-do-i-send-a-cross-domain-post-request-via-javascript)

以更好的方式详细说明它并不容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T20:28:59.557

您可以添加 src 包含具有不同端口的 url 的 iframe

# codeigniter - 使用 Codeigniter 提交 Ajax 表单 - 站点挂起 + 500 错误

> ID：13532614
> 
> 赞同：0
> 
> 时间：2012-11-23T16:15:54.283
> 
> 标签：codeigniter, codeigniter-2

所以我很确定我的问题不在于 ajax 函数，因为它之前有效。我相信问题来自实际模型。所以我会发布这个......它似乎很长，我可能做错了什么，所以让我们从那里开始......

好的，所以如果我从模型中删除以下代码，则 ajax 表单会按应有的方式提交。没有问题。但是如果我把这段代码留在那儿，所发生的只是加载图标会出现，不会消失，页面也不会转移到下一步。我得到了一个`Failed to load resource: the server responded with a status of 500 (Internal Server Error)`指向我的模型的东西。

有什么突出的吗？

```
// Add or update campaign on database
public function add_campaign() 
{        
    // grab campaign session data
    $id = $this -> session -> userdata('user_name');
    $campaign = $this -> session -> userdata('campaign_name');
    $website = $this -> session -> userdata('campaign_user_website');
    $headline = $this -> session -> userdata('campaign_headline');
    $bar_color = $this -> session -> userdata('campaign_bar_color');
    $head_color = $this -> session -> userdata('campaign_head_color');
    $main_color = $this -> session -> userdata('campaign_main_color');
    $thanks_msg = $this -> session -> userdata('campaign_thanks');        

    //grab scorecard options
    $email_q = $this -> input -> post('email');
    $brand_q = $this -> input -> post('brand');
    $design_q = $this -> input -> post('design');
    $usability_q = $this -> input -> post('usability');
    $support_q = $this -> input -> post('support');
    $service_q = $this -> input -> post('service');
    $recommend_q = $this -> input -> post('recommend');
    $suggestion_q = $this -> input -> post('suggestion');
    $comments_q = $this -> input -> post('comments');

    $created =  date('Y-m-d H:i:s');        

    // insert OR if campaign already exists, update the campaign values and date modified
    $this -> db -> query("
        INSERT INTO campaigns (id, campaign, website, headline, bar_color, head_color, main_color, thanks_msg, email_q, brand_q, design_q, usability_q, support_q, service_q, recommend_q, suggestion_q, comments_q, created)
        VALUES ('$id', '$campaign', '$website', '$headline', '$bar_color', '$head_color', '$main_color', '$thanks_msg', '$email_q', '$brand_q', '$design_q', '$usability_q', '$support_q', '$service_q', '$recommend_q' '$suggestion_q', '$comments_q', '$created',)
        ON DUPLICATE KEY UPDATE campaign='$campaign', modified='$created'
        ");
} 
```

**为需要的人提供更多信息**

控制器功能：

```
public function embed_step()
{
    //Create campaign on database       
    $this -> build_model -> add_campaign();     

    $data['embed_view'] = 'partials/embed'; // display view

    if ($this -> input -> post('ajax')) // is 'ajax' variable from jQuery function exists, load:
    {

        $this -> load -> view($data['embed_view'], $data); 
        //$this->session->unset_userdata('user_url'); // kill session data          
    }
} 
```

AJAX 功能（部分）：

```
 var score_options = {
        email: $('.email_score').val(),
        brand: $('.brand_score').val(),
        design: $('.design_score').val(),
        usability: $('.usability_score').val(),
        support: $('.support_score').val(),
        service: $('.service_score').val(),
        recommend: $('.recommend_score').val(),
        suggestion: $('.suggestion_score').val(),
        comments: $('.comments_score').val(),
        ajax : '1' // needed for controller, to verify that request is ajax
    };

    //display ajax loader animation
    $('#loading').show();

    $.ajax({
        url : 'ajax/embed_step',
        type : 'POST',
        data : score_options,
        success : function(msg) {
            $('.wizardContent').html(msg);
            // output success in this container             
            $.scrollTo(0, 500);
            // scroll to top on success 
            $('#loading').hide();
            // hide loading icon
        }
    });

    return false; 
```

**查看输入示例（全部相同，减去名称和类别等）**

```
<!-- Scorecard options -->
<div class="scordOption roundtop">
    <div class="checkicon"><input type="checkbox" name="email" class="email_score" value="1"></div>
    <div class="scoreOptionTxt">What is your email address?</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T18:06:05.933

你能在你的ajax调用中试试这个吗？

```
var _ajax_url = "<?php echo site_url('ajax/embed_step'); ?>";

 url : _ajax_url 
```

也试试这个**.htaccess**，对我来说它适用于许多主机：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

# javascript - 使用 jQuery 检测第一个焦点/触摸到 HTML 表单字段

> ID：13532617
> 
> 赞同：0
> 
> 时间：2012-11-23T16:16:07.650
> 
> 标签：javascript, jquery, html, css, mouseenter

我在使用 iPad 时遇到了我的应用程序问题。

对于我使用 jQuery 将事件绑定到表单元素的特定表单，我有一个“工具提示”，当您将鼠标悬停在表单字段上或将焦点放在它上面时，它会显示，这在桌面上运行良好。然而，在 iPad（和其他触控设备毫无疑问）上，第一次点击/点击/触摸到该字段被检测为`mouseenter`，所以这一切只是显示工具提示。

但是，我希望这允许在第一次触摸时将数据输入到字段中，而不是像刚才那样进行第二次。换句话说，我希望它在 iPad 上的行为与在桌面上的行为相同，即显示工具提示并允许数据输入。

我是否必须检测设备并将 a 欺骗`mouseenter`为 a`click`或类似的东西？

```
// Attach focus and blur events to form elements
bindFocusAndBlurOnFormElements($('INPUT:text, INPUT:password, TEXTAREA, SELECT'), false);

function bindFocusAndBlurOnFormElements(elems) {
   elems.each(function(){
      if ($(this).next().hasClass('tool_tip')) {
         $(this).bind('mouseenter mouseleave focus blur', function(e){
            alert(e.type); 
            if (e.type=='mouseenter' || e.type=='focus') {
                // show the tool tip      
            } else {
               // hide the tool tip
            }
         });
       }    
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:19:10.967

### 在某处读过：

> 另一种方法可能是使用 CSS 媒体查询并仅将某些样式用于较小的屏幕/移动设备，这些设备最有可能具有触摸/点击功能。因此，如果您通过 CSS 有一些特定的样式，并且从 jQuery 中检查这些元素的移动设备样式属性，您可以挂钩到它们以编写您的移动特定代码。
> 
> 更多信息：[http ://www.forabeautifulweb.com/blog/about/hardboiled_css3_media_queries/](http://www.forabeautifulweb.com/blog/about/hardboiled_css3_media_queries/)

另一个来源：

> [Modernizr](http://www.modernizr.com/)是一种在任何站点上进行各种特征检测的出色、轻量级的方法。
> 
> 它只是将类添加到每个功能的 html 元素。

然后，您可以在 CSS 和 JS 中轻松定位这些功能。例如：

```
html.touch div {
    width: 480px;
}

html.no-touch div {
    width: auto;
} 
```

和 Javascript（jQuery 示例）：

```
$('html.touch #popup').hide(); 
```

### 资料来源：

1.  [使用 Javascript 检测触摸屏设备](https://stackoverflow.com/questions/3974827/detecting-touch-screen-devices-with-javascript)
2.  [javascript生成的HTML标签中的Javascript函数](https://stackoverflow.com/questions/13532469/javascript-function-in-html-tag-generated-by-javascript)

# excel - excel中具有相同订单ID的合计值

> ID：13532619
> 
> 赞同：0
> 
> 时间：2012-11-23T16:16:13.433
> 
> 标签：excel, excel-formula, vba

我有一个大的 excel 电子表格（其中包括）以下列

```
orderId   price
222       50.00
222       52.60
223       44.00
223       60.00
224       20.00
225       40.00 
```

有没有办法将 orderId 显示为唯一行，其中包含该 ID 下所有价格的**总和****？**所以这个例子会导致

 **```
orderId   price
222       102.60
223       104.00
224       20.00
225       40.00 
```

如有必要，我很乐意创建一个宏来完成这项工作（我有 VB 知识，但多年没有使用它，而且我以前从未将它应用到 excel 中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T15:27:54.510

除非我误解了您的要求，否则这很容易通过数据透视表解决。

插入 -> Pviot 表

设置如下

![数据透视表](../Images/b78b5a3281e86f203472830dfd822cd8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T13:37:20.307

虽然它不是 VBA 解决方案，但您可以复制并粘贴订单 ID 列，然后使用 Excel 功能区中的“删除重复项”来制作唯一列表。然后在每个条目的右侧，只需输入 =SUMIF(A:A, C1, B:B)，其中 A:AI 假设是订单 ID 列，C1 是唯一列表中的第一个条目，而 B:B i假设是值所在的位置。

=SUMIF（你要查看的范围是多少？，你要找什么？，你要加起来的值在哪里？）

对于 VBA，您可以花哨并使用字典对象，只需输入您在对象 id 列中找到的每个唯一值，如果存在，则只需将总计添加到该条目的值中。最后，只需使用 .keys 和 .items 即可输出列表。:)**

# ruby-on-rails - 了解 Ruby on Rails send(:include

> ID：13532620
> 
> 赞同：4
> 
> 时间：2012-11-23T16:16:15.143
> 
> 标签：ruby-on-rails, activerecord

我正在尝试开发一个[Redmine](http://www.redmine.org/)插件，我开始阅读[文档](http://www.redmine.org/projects/redmine/wiki/Plugin_Tutorial)，并学习了很多 Ruby 和很多 Ruby on Rails。（我是 PHP/Python/js 人）

然后我开始浏览其他插件，我发现[了这段代码](https://github.com/9thport/redmine_extend_permissions/blob/master/init.rb)。我找不到足够的信息来完全理解这行代码的工作原理：

```
Issue.send(:include, RedmineRequireIssueAllowedToChangeAssignee::Patches::IssuePatch) 
```

我知道在 IssuePatch 内部有一些要覆盖或添加到问题类的东西。

然后我[发现了这个](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)，解释了send的使用，这让我很困惑，为什么不只使用Issue.include？

主要问题是：这个方法在哪里`include`定义，它有什么作用？

更新：[相关问题](https://stackoverflow.com/questions/2328984/rails-extending-activerecordbase/2330533#2330533)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T16:28:13.067

你不能仅仅`include`因为它是一个私有方法，所以你使用`send`它来规避 ruby​​ 可见性控制。`send`您可以调用任何方法，甚至是私有方法（如本例所示）。

> 这个方法在哪里定义，它有什么作用？

它被定义为[Module#include](http://www.ruby-doc.org/core-1.9.3/Module.html#method-i-include)，并且当使用模块作为参数调用时，它将该模块的所有实例方法附加到接收器（在您的情况下是`Issue`类）。这是 Ruby 中一个非常非常常见的习语。

# wpf - 在 WPF 中重新着色给定的 DrawingImage（在代码中）

> ID：13532625
> 
> 赞同：1
> 
> 时间：2012-11-23T16:16:25.667
> 
> 标签：wpf, colors, drawing

我有一个 DrawingImage，它是由宏伟的[Svg2Xaml 插件](http://svg2xaml.codeplex.com)从 SVG 转换而来的。通过这种方式，我可以让用户轻松定义我的应用程序中某些元素的视觉效果。

在某些用例中，我想为给定的 DrawingImage 重新着色。最简单的情况是使其成为灰度。

有没有一种方法可以递归地遍历所有元素，获取它们的颜色并将其切换到它们的灰度对应项？或者 - 例如 - 在整个图像上使用“过滤器”之类的东西？

我在 WPF 方面并没有真正的经验，但如果能做到这一点，我的工作会容易得多。

我最好的选择是什么？

此外，DrawingImage 使用矢量图形也很重要，所以我不想对图像进行像素化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T14:26:11.860

将我的评论转换为答案：

对于制作视觉灰度的具体案例，你可能想看看[Shader Effect Library](http://wpffx.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T18:10:46.997

你可能需要查看 WPF**资源字典**，并使用**DynamicResource**

```
<ResourceDictionary 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Color x:Key="FrontColor">White</Color>

    <SolidColorBrush x:Key="Foreground" Color="{DynamicResource FrontColor}" />
</ResourceDictionary> 
```

# c - C - 当输入超过 fgets 限额时程序退出

> ID：13532626
> 
> 赞同：1
> 
> 时间：2012-11-23T16:16:29.440
> 
> 标签：c, passwords, exit, fgets

我有以下用 C 编写的程序：

这个程序的主要问题是，如果在使用 fgets() 函数时输入超过 80 个字符，程序就会立即退出。其他代码被执行，但是它不等待用户按下回车。它就像简单地忽略了最后的 getchar。

请问我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:18:53.980

如果用户输入的长度超过可以读取的 79 个字符`fgets`（`stdin`它最多可以读取比其大小参数少一个，因为它以 0 终止缓冲区），剩余的输入将留在输入缓冲区中，因此`getchar()`at结束立即成功。

为避免这种情况，如果输入太长，您需要清除输入缓冲区。

问题是如果输入足够短，你不知道是否清除缓冲区。所以检查你是否真的读入了换行符`fgets`，

```
int len = strlen(password);
if (password[len-1] == '\n') {
    // got a newline, all input read, overwrite newline
    password[len-1] = 0;
} else {
    // no newline, input too long, clear buffer
    int ch;
    while ((ch = getchar()) != EOF && ch != '\n');
    if (ch == EOF) {
        // input error, stdin closed or corrupted, what now?
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:19:08.370

检查是否读取了换行符`fgets()`，如果没有跳过输入，直到遇到换行符：

```
if (0 == strrchr(password, '\n'))
{
    /* Skip until new-line. */
    int c;
    while (EOF != (c = getchar()) && '\n' != c);
} 
```

否则调用`getchar()`将读取`fgets()`未读取的内容。

# javascript - 从 Twitter API 格式化数据

> ID：13532627
> 
> 赞同：-1
> 
> 时间：2012-11-23T16:16:48.097
> 
> 标签：javascript, twitter

我已经阻止显示 Twitter 句柄的关注数量。效果很好。唯一的问题是，有 11,000 多个追随者，而且 API 没有输入逗号。我将如何合并 JavaScript 来格式化数字，使其看起来不错？

这是我正在使用的推特代码：

```
$(function(){
$.ajax({
   url: 'http://api.twitter.com/1/users/show.json',
   data: {screen_name: 'handle'},
   dataType: 'jsonp',
   success: function(data) {
        $('#followers').html(data.followers_count);
   }
});
}); 
```

* * *

感谢 neiker 提供解决方案的帮助！

```
function numberWithCommas(x) {
        return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    $.ajax({
       url: 'http://api.twitter.com/1/users/show.json',
       data: {screen_name: 'handle'},
       dataType: 'jsonp',
       success: function(data) {
            $('#followers').html(numberWithCommas(data.followers_count));
       }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T17:42:39.897

```
 function numberWithCommas(x) {
        return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    $.ajax({
       url: 'http://api.twitter.com/1/users/show.json',
       data: {screen_name: 'handle'},
       dataType: 'jsonp',
       success: function(data) {
            $('#followers').html(numberWithCommas(data.followers_count));
       }
    }); 
```

# python - 在生产中引发 ValidationError 时出现 500 内部服务器错误

> ID：13532630
> 
> 赞同：1
> 
> 时间：2012-11-23T16:17:06.820
> 
> 标签：python, django, django-forms

我会尽量保持简单。我有一个自定义字段：

```
class CharExactLengthField(CharField):
    """ FormField to represent a CharField with an exact Length
    """
    def __init__(self, length=None, required=True, widget=None, label=None,
                 initial=None):
        self.length = length
        CharField.__init__(self, max_length=length, required=required,
                                 widget=widget, label=label, initial=initial)
    def clean(self, value):
        """ Clean for CharExactLengthField
        """
        super(CharExactLengthField, self).clean(value)
        if not self.required and value in EMPTY_VALUES:
            return None
        if self.length != len(value):
            raise ValidationError(
                'Require exactly %i characters' % self.length)
        return value 
```

该字段以多种形式使用，但在此特定形式中，我只是测试该字段是否为空，因此它将回退到`super(CharExactLengthField, self).clean(value)`. 在开发中对此进行测试时，我得到了正常的结果`This field is required`：

![在此处输入图像描述](../Images/29ab33e226eaa16d3d2fd223c8704a73.png)

当我在生产中测试相同的东西时，我得到`Internal Server Error`：

```
ValidationError at /test/test/1/
[u'This field is required.']

Request Method: POST
Request URL:    http://smo/test/test/1/
Exception Type: ValidationError
Exception Value:    [u'This field is required.']
Exception Location: /usr/local/lib/python2.5/site-packages/django/newforms/fields.py in clean, line 78 
```

有什么理由会发生这种情况吗？为什么`ValidationError`仅在生产中引发内部服务器错误？

**笔记：**

如果您还没有注意到，这是 Django **0.96.5**

# regex - 查找和替换文件中的所有日期

> ID：13532631
> 
> 赞同：3
> 
> 时间：2012-11-23T16:17:07.613
> 
> 标签：regex, perl

我有以下文件：

```
 20120127.221500.std|MT:63|ST:1.|ON:ABT.N|DRT:U|SEQ:862461707
      80 Bezahlt        : 55.04
      81 Bezahlt_Umsatz : 200
     281 Bezahlt_Zeit   : 22:00:02
     752 Quelle         : CTS OTC
      83 Umsatz_gesamt  : 5639295
     621 VWAP           : 54.984104
      26 Zeit           : 22:00:05

    20120127.232408.std|MT:63|ST:1.|ON:ABT.N|DRT:U|SEQ:862507497
      41 Schluss        : 55.02
     120 Schluss_Datum  : 27.01.2012

    20120128.011558.std|MT:63|ST:1.|ON:ABT.N|DRT:U|SEQ:862559511
      25 Datum          : 28.01.2012
      26 Zeit           : 01:01:30 
```

我希望找到所有日期（即 27.01.2012、28.01.2012）并用今天的日期替换最新的日期（即 28.01.2012）。我希望用旧日期替换所有旧日期。我给你举个例子，因为我认为你最多能理解我。假设今天是 21.11.2012。我希望将 28.01.2012 替换为 21.11.2012，将 27.01.2012 替换为 20.11.2012。如果有 26.01.2012 我想用 19.11.2012 替换它。

任何人都可以给我线索我该怎么做？

也许一些提示算法应该是什么样子？我很想用 perl 来做。

我的问题是如何确定最早的日期。我从以下内容开始：

```
 open F ,"<$file";
    my $content = do{local $/;<F> };
    if ($content =~ /BOERSEN : [N|Q]/)
    {
      $content =~ /(\d\d\.\d\d\.\d\d\d\d)/;
      my $d = $1;
      my ($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime(time);
      $year+= 1900;
      $mon +=1;
      $mon = sprintf("%02d", $mon);
      $content =~ s/(\d\d)\.\d\d\.\d\d\d\d/$1\.$mon\.$year/msgi;
      my @d = split (/\./, $d);
      $d = $d[2].$d[1];
      $content =~ s/$d(\d\d)/$year$mon$1/msgi;
    } 
```

但这并不是我真正想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T17:01:12.143

我胡闹了一下，想出了这个。它需要先读取完整的输入，然后才能工作。

```
#!/usr/bin/perl
use strict; use warnings;
use DateTime;
use DateTime::Format::Strptime;

my $text = <<'TEXT';
foo 27.01.2012 27-01-2012
foo 28.01.2012 28-01-2012
foo 26.01.2012 26-01-2012
bar 10.07.2011 10-07-2011
TEXT

# Formatter to make DateTime objects
my $strp = DateTime::Format::Strptime->new(
    pattern   => '%d.%m.%Y',
);
my $today = DateTime->today; # we need that to calculate

# Get all the dates from the input and turn them into DateTime objects
my %dates = map { $_ => $strp->parse_datetime($_) }
    $text =~ m/(\d{2}\.\d{2}.\d{4})/gm;

# Determine the latest date (the one nearest to today) and clone it
my $max_date = (sort { DateTime->compare( @dates{$a, $b} ) } keys %dates )[-1];
$max_date = $dates{$max_date}->clone;

foreach my $date ( keys %dates ) {
    # The new value needs to have the same "distance" to today as the old one
    # had to the highest date from the input

    # Do that calculation and format it
    my $new_date = $strp->format_datetime(
        $today - ($max_date - $dates{$date}));
    # Needs \Q and \E because there are '.' in the date
    $text =~ s/\Q$date\E/$new_date/g;
} 
```

这是输出：

```
foo 22.11.2012 27-01-2012
foo 23.11.2012 28-01-2012
foo 21.11.2012 26-01-2012
bar 05.05.2012 10-07-2011 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T22:24:34.930

该[`Time::Piece`](https://metacpan.org/module/Time%3a%3aPiece)模块满足此目的，它是核心模块，因此不需要安装。

该程序获取当前日期和时间，然后通过将其格式化为`%d.%m.%Y`字符串并将其读回，将时间字段设置为零。然后它打开并读取日志文件，查看所有日期并找到最新的日期。计算文件中的最新日期与当前日期之间的差值，并将文件倒回到开头并再次读取。这一次，每个日期都添加了计算出的增量，并在输出中替换了字符串。

```
use strict;
use warnings;

use Time::Piece ();
use Fcntl ':seek';

my $today = Time::Piece->new;
$today = Time::Piece->strptime($today->dmy('.'), '%d.%m.%Y');

open my $fh, '<', 'logfile.txt' or die $!;

my $latest = 0;

while (<$fh>) {
  if ( /:\s*(\d\d\.\d\d\.\d\d\d\d)/ ) {
    my $date = Time::Piece->strptime($1, '%d.%m.%Y');
    $latest = $date if $date > $latest;
  }
}

my $delta = $today - $latest;
seek $fh, 0, SEEK_SET;

while (<$fh>) {

  s{:\s*\K(\d\d\.\d\d\.\d\d\d\d)}{
    my $date = Time::Piece->strptime($1, '%d.%m.%Y');
    $date += $delta;
    $date->dmy('.');
  }eg;

  print;
} 
```

**输出**

```
20120127.221500.std|MT:63|ST:1.|ON:ABT.N|DRT:U|SEQ:862461707
  80 Bezahlt        : 55.04
  81 Bezahlt_Umsatz : 200
 281 Bezahlt_Zeit   : 22:00:02
 752 Quelle         : CTS OTC
  83 Umsatz_gesamt  : 5639295
 621 VWAP           : 54.984104
  26 Zeit           : 22:00:05

20120127.232408.std|MT:63|ST:1.|ON:ABT.N|DRT:U|SEQ:862507497
  41 Schluss        : 55.02
 120 Schluss_Datum  : 22.11.2012

20120128.011558.std|MT:63|ST:1.|ON:ABT.N|DRT:U|SEQ:862559511
  25 Datum          : 23.11.2012
  26 Zeit           : 01:01:30 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T16:27:31.243

[CPAN](http://search.cpan.org/)上有*很多*日期和时间模块。

*   [约会时间](http://search.cpan.org/perldoc?DateTime)
*   [日期::Manip](http://search.cpan.org/perldoc?Date%3a%3aManip)
*   [日期::计算](http://search.cpan.org/perldoc?Date%3a%3aCalc)
*   和成千上万的演员...

您将需要找到一个可以轻松地将 N 天添加到日期的人。`mktime`使用和`strftime`来自[POSIX](http://perldoc.perl.org/POSIX.html)模块和`strptime`来自[POSIX::strptime](http://search.cpan.org/perldoc?POSIX%3a%3astrptime)模块可能就足够了。

您需要通过指定要成为当前日期的“旧日期”来确定 N。您以天为单位计算两个日期（旧日期和当前日期）之间的差异，给您一个整数值 N。然后对于每个日期行，提取日期部分，添加 N 天，并重写日期部分与新的假日期。

* * *

您询问确定“最古老”的日期。您显示的格式基于 ISO 8601，这意味着可以将诸如 20120127 之类的字符串排序为字符串或数字以给出日期顺序。您似乎也有一个日志文件；在此类文件中，第一个日期通常是最旧的，最后一个日期是最新的，因为它们是按单调递增的时间顺序顺序写入的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T17:11:06.510

以下是操作文件的一些指针：

```
open F ,"<$file";
my $content = do{local $/;<F> };
close(F);

my $DATE_RE = qr/((\dd)\.(\d\d)\.(\d\d\d\d))/;
my %jdate;
# Find all of the dates and convert them to date ordinals
while ($content =~ m/$DATE_RE/g) {
  $jdate{$1} ||= jdate($2, $3, $4);
}

# find the most recent date
my $latest;
for my $d (keys %jdate) {
  if (!$latest || $jdate{$latest} < $jdate{$d}) {
    $latest = $d
  }
}

# for each date $d, determine what to replace it with
my %replacement;
for my $d (keys %jdate) {
  $replacement{$d} = ...your code here...
}

# Replace all of the dates
$content =~ s/$DATE_RE/$replacement{$1}/ge;

# done! 
```

关键是`jdate(...)`将日-月-年转换为整数的函数。CPAN 上有很多模块可以做到这一点 - 例如`Time::JulianDay`。

要确定日期替换，您可以使用`inverse_julian_day()`将儒略日序数转换为日-月-年三元组的函数，例如：

```
my ($y, $m, $d) = inverse_julian_day( $today_jd - ($jdate{$latest} - $jdate{$d}) );
$replacement{$d} = sprintf("%02d.%02d.%04", $d, $m, $y); 
```

# javascript - 使用 jquery 防止 onclick 执行

> ID：13532632
> 
> 赞同：2
> 
> 时间：2012-11-23T16:17:12.187
> 
> 标签：javascript, jquery

更新

html代码：

```
<input type="textbox" id="textbox" value="">
<input type="button" id="btn" value="Validate" onclick="document.write('VALIDATION PASSED')" />​ 
```

JS代码：

```
$(document).ready(function() {
    $("#btn").click(function() {
        if ($("#textbox").val().length == 0) {
            alert("Validation error");        
            return false;
        }
    }).prop("onclick", null );
})​ 
```

我已经更新了我的代码。所以问题是，第一次点击后我的 onclick 事件停止工作。我该如何解决？

PS请不要更改html代码。我有一些理由要问这个问题，但是请你只用javascript来做吗？我意识到这可能不是最简单的方法，但我的应用程序存在一些技术限制。

谢谢！

JSFiddle [http://jsfiddle.net/B5GWx/12/](http://jsfiddle.net/B5GWx/12/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T16:18:51.797

```
$(document).ready(function() {
    $("#btn").click(function() {
        alert("Want to show only this message");        
        return false;
    }).prop("onclick", null );
})​ 
```

[http://jsfiddle.net/B5GWx/5/](http://jsfiddle.net/B5GWx/5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T16:20:58.363

您不能可靠地跨浏览器使用 DOM2 处理程序来阻止 DOM0 处理程序运行。

但是，您*可以*做的是完全删除 DOM0 处理程序：

```
$(document).ready(function() {
    var btn = $("#btn");
    btn.click(function() {
        alert("Want to show only this message");        
        return false;
    });
    btn[0].onclick = null;   // <==== Here
})​; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T16:30:21.167

只需**删除 DOM 处理程序**就可以完成这项工作。不需要`return false;`或 `e.preventDefault();`

```
$(document).ready(function() {
    $("#btn").click(function(e) {
        alert("Want to show only this message");        
    }).prop("onclick", null );
})​ 
```

[演示](http://jsfiddle.net/B5GWx/9/)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-11-23T16:18:31.860

您正在寻找[preventDefault](http://api.jquery.com/event.preventDefault/)

> **说明：**如果调用该方法，则不会触发事件的默认动作。

```
$(document).ready(function() {
    $("#btn").click(function(e) {
        alert("Want to show only this message");        
        e.preventDefault();
    })
})​ 
```

# php - 在 CodeIgniter 中重命名文件

> ID：13532633
> 
> 赞同：1
> 
> 时间：2012-11-23T16:17:13.487
> 
> 标签：php, codeigniter, codeigniter-url

我`1353683037.jpg`在 tmp 文件夹中有一个文件，如下所示：

```
C:\xampp\htdocs\ci_project\public\images\tmp\1353683037.jpg 
```

我需要将此文件重命名为：

```
C:\xampp\htdocs\ci_project\public\images\main\1353683037.jpg 
```

为此，我做了以下工作：

```
$file = '1353683037.jpg';
$dir = './public/images/';
rename($dir.'tmp\'. $file, $dir.'main\'. $file); 
```

我收到来自服务器的以下回复：

```
A PHP Error was encountered

Severity: Warning

Message: rename(./public/images/tmp/1353683037.jpg,../public/images/main/1353683037.jpg) [function.rename]: The system cannot find the path specified. (code: 3)

Filename: controllers/test.php

Line Number: 1 
```

可能是什么问题？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T18:30:45.000

您的代码无法正常工作有两个可能的原因：

**首先**- 您在目录路径中使用反斜杠。反斜杠正在转义一些字符，包括 and 之后的单`tmp`引号`main`。即使您的 Windows 环境使用反斜杠，您也应该使用正向。

* * *

**第二**- 您的路径可能不正确。与其使用相对路径，不如尝试使用绝对路径。

常量（在 index.php 中设置）`FCPATH`将为您提供基本 CodeIgniter 目录的服务器路径。

因此，我们应该能够将您的代码修改为以下内容：

```
$file = $file = '1353683037.jpg';

$oldDir = FCPATH . 'public/images/tmp/';
$newDir = FCPATH . 'public/images/main/';

rename($oldDir.$file, $newDir.$file); 
```

如果此代码不起作用，您可能在 CodeIgniter 的 index.php 文件中错误地设置了 FCPATH。如果不正确，则应将其更改为正确的路径，即`/xampp/htdocs/ci_project/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:56:21.467

it depends from - are you running this commands from codeigniter instanse or from simple php script. in 1st case, usually, folder where ci looking files is public - its site / and path to file is images/tmp/1353683037.jpg

in 2 case path will be correct if for example /var/www/public/... and you script in /var/www/ because ./ in path means that in current directory where is public dir

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-12-17T11:42:36.630

利用

```
$this->config->item('base_url') 
```

而不是 FCPATH

# emacs - 在服务器上自动备份 emacs 文件编辑

> ID：13532637
> 
> 赞同：2
> 
> 时间：2012-11-23T16:17:21.550
> 
> 标签：emacs, backup, cluster-computing

我在远程集群（Linux 操作系统）上有一个大型 C++ 代码库。当我需要在我的家用计算机（Ubuntu OS）上处理这些代码时，我会尝试通过 X windows 上的 emacs 访问这些代码。然而，X 窗口连接非常缓慢，使得编辑过程很痛苦。所以我有时会在本地驱动器和远程集群之间手动移动文件来编辑文件。我的问题是：有没有办法配置我的本地 emacs，这样当我在本地空间中编辑文件时，它会自动备份到可以编译的集群中？

**更新：1**

我安装了 TRAMP，它适用于可以直接连接的服务器。但是，我也有服务器，只有在我激活 VPN 时才能连接。如何向 TRAMP 提供 VPN 信息以连接到该服务器？

我遇到的另一个问题是如何在 TRAMP 等待来自远程 shell 的提示时停止它，而不必杀死整个 emacs 缓冲区。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:30:12.323

这通常是[TRAMP](http://www.gnu.org/software/tramp/)有用的用例。

不要使用 SSH 连接到服务器并使用 X 转发打开 Emacs，而是在您的机器上运行 Emacs 并使用 TRAMP 远程打开您的文件。例如：

`C-x``C-f``/ssh:user@host:/remote/path/to/the/file``RET`

这样，您的 Emacs 进程在本地运行，但所有文件操作（例如保存、恢复、...）都转发到服务器，并且从 TRAMP 缓冲区发出的所有 shell 命令也在远程服务器上运行（这包括`M-x compile`）

* * *

**更新：1**

当 TRAMP 挂起等待远程 shell 提示时（由于我仍然不清楚的原因，这往往会经常发生），我通常会终止底层`ssh`进程（`htop`使用树状视图是执行此操作的好工具）。TRAMP 注意到这一点并自动重新生成已终止的进程以恢复操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T16:28:50.537

在远程服务器的控制台中运行 Emacs 不是更容易吗？所有 Emacs 功能都可以通过键盘访问，一旦您习惯了组合键，它通常会运行得更快。

这样，您将比转发 X 会话运行得更快 - 在控制台中运行是 Emacs 的设计目的。

作为额外的奖励 - 如果您习惯使用 Gnu 屏幕 - [http://www.gnu.org/software/screen/](http://www.gnu.org/software/screen/) 您可以在连接断开时完全恢复会话。事实上，使用屏幕，您可以在一天结束时关闭您的笔记本电脑 - 第二天通过 SSH 登录并完全恢复前一天的所有“屏幕”。这将包括任何打开的编辑器、调试会话等。

Gnu screen 在 Debian 和可能大多数 Linux 发行版上作为一个包提供。

# wpf - MultiDataTrigger 与 AlternationIndex

> ID：13532638
> 
> 赞同：4
> 
> 时间：2012-11-23T16:17:26.707
> 
> 标签：wpf, xaml

我有一个 ListView 声明为：

```
<ListView x:Name="Tree"
      ItemsSource="{Binding ElementName=This, Path=Some.Path.Values}"
      AlternationCount="2"
      ScrollViewer.CanContentScroll="False"> 
```

和定义为的样式

```
<UserControl.Resources>
<Style TargetType="ListViewItem">
    <Style.Resources>
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="SteelBlue"/>
        <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Gray"/>
    </Style.Resources>
    <Style.Triggers>
        <Trigger Property="ItemsControl.AlternationIndex" Value="0">
            <Setter Property="Background" Value="White" />
        </Trigger>
        <Trigger Property="ItemsControl.AlternationIndex" Value="1">
            <Setter Property="Background" Value="GhostWhite" />
        </Trigger>
    </Style.Triggers>
    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
    <Setter Property="VerticalContentAlignment" Value="Top" />
    <EventSetter Event="Loaded" Handler="ContinueLoading" />
</Style> 
```

这种组合产生了最初的期望行为，即交替背景高光的行为。新的期望行为是根据给定 ListView 项的属性值更改背景颜色；因此，`Style.Triggers`已更改为

```
<Style.Triggers>
    <Trigger Property="ItemsControl.AlternationIndex" Value="0">
        <Setter Property="Background" Value="White" />
    </Trigger>
    <Trigger Property="ItemsControl.AlternationIndex" Value="1">
        <Setter Property="Background" Value="GhostWhite" />
    </Trigger>
    <MultiDataTrigger>
        <MultiDataTrigger.Conditions>
            <Condition Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContentPresenter}}, Path=(ItemsControl.AlternationIndex)}" Value="0"/>
            <Condition Binding="{Binding Converter={x:Static controls:Converters.ObjectType}}" Value="{x:Type client:DocumentEntryTypeA}" />
        </MultiDataTrigger.Conditions>
        <Setter Property="Background" Value="{Binding Converter={x:Static controls:Converters.LightColor}, UpdateSourceTrigger=PropertyChanged, Path=Status}" />
    </MultiDataTrigger>
    <MultiDataTrigger>
        <MultiDataTrigger.Conditions>
            <Condition Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ContentPresenter}}, Path=(ItemsControl.AlternationIndex)}" Value="1"/>
            <Condition Binding="{Binding Converter={x:Static controls:Converters.ObjectType}}" Value="{x:Type client:DocumentEntryTypeA}" />
        </MultiDataTrigger.Conditions>
        <Setter Property="Background" Value="{Binding Converter={x:Static controls:Converters.DarkColor}, UpdateSourceTrigger=PropertyChanged, Path=Status}" />
    </MultiDataTrigger>
</Style.Triggers>
</UserControl.Resources> 
```

`ObjectType`Converter 检查元素是否属于给定类；和转换`LightColor`器`DarkColor`根据`Status`属性的值生成选定的背景值。

这段代码的问题是我使用的绑定似乎总是产生一个`AlternationIndex`值'0'，即 Converter LightColor 用于每个条目。除了上面的代码，我还尝试了以下绑定，结果相同：

```
<Condition Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ItemsControl}, Path=AlternationIndex}" Value="0"/>
<Condition Binding="{Binding RelativeSource={RelativeSource AncestorType={x:Type ListView}}, Path=(ItemsControl.AlternationIndex)}" Value="0"/> 
```

根据我见过的示例，大多数解决方案都没有将样式与对象分开；在我的情况下，样式是在`UserControl.Resources`. 但是，由于使用触发器工作正常，我不确定为什么 DataTrigger 不能，或者需要什么才能使其工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T16:49:21.697

您的第一个条件`MultiDataTrigger`找到最新的`ContentPresenter`，并尝试绑定到`ContentPresenter.ItemsControl.AlternationIndex`，并且`ItemsControl.AlternationIndex`不是 的有效属性`ContentPresenter`。

尝试将其更改为，`RelativeSource={RelativeSource Self}`以便您将绑定到`ItemsControl.AlternationIndex`当前对象的

# ssh - 使用 init.d 在 ubuntu 中通过脚本启动虚拟框

> ID：13532642
> 
> 赞同：0
> 
> 时间：2012-11-23T16:17:33.830
> 
> 标签：ssh, nginx, virtual-machine, sh, autorun

使用Oracle的UBUNTU和Virtal Box，并使用这个脚本在Virtual Box中启动nginx，并把它放在Virtual box里面`~/init.d`

```
#!/bin/bash
### BEGIN INIT INFO
# Provides:          Testinit
# Required-Start:    
# Required-Stop:     
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Start daemon at boot time
# Description:       Enable service provided by daemon.
### END INIT INFO

#
RETVAL=0;

start() {
CurrentTime=$(date +%d/%m/%Y"-"%I:%M:%S)
./usr/local/nginx/sbin/nginx
echo "Current Time:"$CurrentTime>>/home/server/Desktop/NginxLogs.txt
echo "!Starting nginx!" >>/home/server/Desktop/NginxLogs.txt 
```

像这样，我想编写自动脚本（setup.sh 文件）并将该脚本放在我系统内的所有虚拟盒子中，例如 8 个虚拟盒子，并且在所有虚拟盒子中都安装了 NGINX。

现在，当我想更改 setup.sh 中的某些内容时，我遇到了问题，我必须访问每个虚拟机，或者通过我的主机上的 SSH 与每个虚拟机通信。我正在考虑编写另一个脚本（例如：Update.sh），并且在该脚本中，我们提供了一个文件路径，该文件在主机中保存并最近编辑（例如：DummySetup.sh）。

一旦我运行该脚本，保存在每个虚拟机中的所有 setup.sh 文件都应该更新更改或将内容替换为 DummySetup.sh 的内容。希望这是可能的事情。帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:23:33.797

当您做一些非常基本的事情时，推送脚本可能是您最好的选择。但是，如果您要在各种 vbox 上更新越来越多的脚本/配置等，您可能需要查看 Puppet。

# c# - LINQ with SUM for TimeSpan, GROUP 和 JOIN for EF

> ID：13532643
> 
> 赞同：-1
> 
> 时间：2012-11-23T16:18:04.943
> 
> 标签：c#, linq, entity-framework

在我的 EF 模型中： ![在此处输入图像描述](../Images/bfb7163895b270c1a36c7466a8b9c47b.png)

我提出这样的看法：

![在此处输入图像描述](../Images/43b9da445e8e84017ea93d96820aff76.png)

使用以下 LINQ 查询（在您的帮助下）：

```
var query = ctx.data.ToList().OrderBy(d => d.Time).
     GroupBy(d => d.Members.StepId).
     SelectMany(g => g.Select((d, place) => new { Time = d.Time, Members = d.Members, PlaceInStep = place + 1 })).
     GroupBy(d => d.Members.TeamId).
     Select(g => new 
     {
         TeamId = g.Key, 
         Name = g.Select(d => d.Members.Teams.TeamName).First(),  
         Members = g.Select(d => new {Time = d.Time, PlaceInStep = d.PlaceInStep, MemberName = d.Members.MemberName}),                    
         TotalTime = g.Aggregate(new TimeSpan(), (sum, nextData) => sum.Add(nextData.Time))
     }); 
```

但我有两个问题：

**1\. 如果同一步骤中的 2 名成员（例如 35 岁之前）具有相同的时间（最多毫秒），则他们必须具有相同的位置**

**2\. 在结果中的成员子集合中，我想按 StepId 排列成员并显示 StepName。**

如何修改此查询？谢谢。

**编辑1：**

我想拿一些这个：

![在此处输入图像描述](../Images/e92123de5ae0128e74e650c081cccbd1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T19:55:26.093

SQL Query 计算正确的成员位置：

```
select *, DENSE_RANK() over (partition by StepId order by Time)
from Members m
join Data d on m.MemberId =d.MemberId 
```

linq 等效于现有的 linq 查询：

```
var query = context.Data.ToList()
    .OrderBy(d=>d.Time)
    .GroupBy(d => d.Members.StepId)
    .SelectMany(g => 
        g.OrderBy(d => d.Time)
        .GroupBy(d => d.Time)
        .SelectMany((x, place) => 
            x.Select(d => new { Time = d.Time, Members = d.Members, PlaceInStep = place + 1 })))
    .GroupBy(d => d.Members.TeamId)
    .Select(g => new
    {
        TeamId = g.Key,
        Name = g.Select(d => d.Members.Teams.TeamName).First(),
        Members = g.Select(d => 
            new 
            { 
                Time = d.Time, 
                PlaceInStep = d.PlaceInStep, 
                MemberName = d.Members.MemberName, 
                StepName = d.Members.Steps.StepName, 
                StepId = d.Members.Steps.StepId 
            }).OrderBy(x=>x.StepId),
        TotalTime = g.Aggregate(new TimeSpan(), (sum, nextData) => sum.Add(nextData.Time))
    }); 
```

# node.js - 全局安装 NodejS 应用程序

> ID：13532644
> 
> 赞同：0
> 
> 时间：2012-11-23T16:18:08.660
> 
> 标签：node.js, npm

从 NPM 安装 Node 模块真的很容易：

```
sudo npm install -g ModuleName 
```

但是如何在同一台机器上的 Node 应用程序代码中做同样的事情呢？
如何在全球范围内安装？我希望能够在不输入完整路径且不将其发布到 NPM 的情况下执行它。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-06T14:51:25.180

谢谢乍得，这是正确的。我可以进入应用程序并运行 sudo npm install -g。

# silverlight - 使用浏览器 http 堆栈的 Silverlight 应用程序尝试从服务器响应中读取自定义 http 标头

> ID：13532645
> 
> 赞同：0
> 
> 时间：2012-11-23T16:18:15.120
> 
> 标签：silverlight, clienthttpstack

我正在开发一个使用浏览器 HTTP 堆栈与服务器通信的 silverlight 应用程序（restful 服务）。当服务器响应来自此应用程序的请求时，它使用自定义 HTTP 标头为客户端提供额外信息。

不幸的是，我们无法在 silverlight 应用程序中提取这些自定义标头。似乎自定义标头已被浏览器 HTTP 堆栈删除，然后我们才能处理它们。

这是一个已知的问题？我们可以做些什么来读取这些自定义 HTTP 标头字段吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:08:41.627

根据文档，自定义响应标头仅在客户端 HTTP 堆栈中受支持：

[如何：指定浏览器或客户端 HTTP 处理](http://msdn.microsoft.com/en-us/library/dd920295%28v=vs.95%29.aspx)

# php - 我们可以只用 PHP 做一个增量计数器吗？

> ID：13532649
> 
> 赞同：0
> 
> 时间：2012-11-23T16:18:33.973
> 
> 标签：php

我想知道是否可以在没有 javascript 的情况下更新 echo ？

例如

```
<?php
for ($i = 1; $i < 100; $i++){
    echo $i;
}
?> 
```

但它只会在不添加另一行的情况下更新数字，直到 100 为止。这是可能的还是只有使用 javascript 才能实现。

我需要输出一个计数器来了解目前正在处理多少文件，例如

> 45 页，共 100 页

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:20:38.600

没有。仅限客户端（例如 JavaScript）。因为如果你想在不重新加载页面的情况下实现这一点，那么如果 PHP 在来自浏览器的请求到来时启动，那么如何涉及 PHP？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:21:21.533

PHP 是一种服务器端语言。该脚本被请求、执行，*然后*发送到客户端。

JavaScript 仅在客户端执行。这意味着它可以向 PHP 脚本发送请求，但总是会返回脚本的结果。

唯一的选择是[AJAX 请求](http://en.wikipedia.org/wiki/Ajax_%28programming%29)。基本上，您编写一个一次移动一个文件的 PHP 脚本。JavaScript 处理从 1 到 100 的循环，并使用不同的参数向 PHP 脚本发送 100 个同步请求。然后，您可以跟踪进度并更新 HTML 页面上的 DOM 元素。

[jQuery 有一个很好的 .ajax() 函数](http://api.jquery.com/jQuery.ajax/)可以帮助你入门。下面是一个简单的例子。它不会马上工作，但你可以在它的基础上让它工作。

**PHP**

```
<?php
    $file = $_POST['file'];
    $destination = $_POST['destination'];
    // Move the stuff!
?> 
```

**JavaScript**

```
var files = ['test.txt', 'test2.txt' /* ... */], /* Your list of files... */
    destination = '/path/to/send/to/the/php/script/';

for(var i = 0; i < files.length; i ++){
    $.ajax({
        async: false,
        url: 'script_to_move_files.php',
        data: { file: files[i], destination: destination },
        success: function(){
            /* File moved! Update a progress bar or something... */
        },
        error: function(){
            /* File wasn't moved successfully... */
        }
    });
} 
```

# php - 将 2 个子表与父表连接起来，不重复

> ID：13532650
> 
> 赞同：8
> 
> 时间：2012-11-23T16:18:35.113
> 
> 标签：php, mysql, sorting, join

## 问题

我有 3 个表：人员、电话和电子邮件。每个人都有一个唯一的 ID，每个人可以有多个号码或多个电子邮件。

**简化后看起来像这样：**

```
 +---------+----------+
    | ID      | Name     |
    +---------+----------+
    | 5000003 | Amy      |
    | 5000004 | George   |
    | 5000005 | John     |
    | 5000008 | Steven   |
    | 8000009 | Ashley   |
    +---------+----------+

    +---------+-----------------+
    | ID      | Number          |
    +---------+-----------------+
    | 5000005 | 5551234         |
    | 5000005 | 5154324         |
    | 5000008 | 2487312         |
    | 8000009 | 7134584         |
    | 5000008 | 8451384         |
    +---------+-----------------+

+---------+------------------------------+
| ID      | Email                        |
+---------+------------------------------+
| 5000005 | Smithley@goodmail.com.com    |
| 5000005 | Smithley.j@gmail.com         |
| 5000008 | Smithley@gmail.com           |
| 5000008 | tech@goodmail.com            |
| 5000008 | feler@campus.uni.com         |
| 8000009 | Ashley.hill86@gmail.com      |
| 5000004 | georgestanko@hotmail.com     |
+---------+------------------------------+ 
```

**我正在尝试将它们连接在一起而不会重复。当我尝试只加入与人的电子邮件或仅与人的电话时，它的效果很好。**

```
SELECT People.Name, People.ID, Phones.Number
    FROM People 
    LEFT OUTER JOIN Phones ON People.ID=Phones.ID 
    ORDER BY Name, ID, Number;
+----------+---------+-----------------+
| Name     | ID      | Number          |
+----------+---------+-----------------+
| Steven   | 5000008 | 8451384         |
| Steven   | 5000008 | 24887312        |
| John     | 5000005 | 5551234         |
| John     | 5000005 | 5154324         |
| George   | 5000004 | NULL            |
| Ashley   | 8000009 | 7134584         |
| Amy      | 5000003 | NULL            |
+----------+---------+-----------------+

SELECT People.Name, People.ID, Emails.Email
    FROM People 
    LEFT OUTER JOIN Emails ON People.ID=Emails.ID 
    ORDER BY Name, ID, Email;
+----------+---------+------------------------------+
| Name     | ID      | Email                        |
+----------+---------+------------------------------+
| Steven   | 5000008 | Smithley@gmail.com           |
| Steven   | 5000008 | tech@goodmail.com            |
| Steven   | 5000008 | feler@campus.uni.com         |
| John     | 5000005 | Smithley@goodmail.com.com    |
| John     | 5000005 | Smithley.j@gmail.com         |
| George   | 5000004 | georgestanko@hotmail.com     |
| Ashley   | 8000009 | Ashley.hill86@gmail.com      |
| Amy      | 5000003 | NULL                         |
+----------+---------+------------------------------+ 
```

**但是，当我尝试在 People 上加入电子邮件和电话时 - 我得到了这个：**

```
SELECT People.Name, People.ID, Phones.Number, Emails.Email
    FROM People 
    LEFT OUTER JOIN Phones ON People.ID = Phones.ID
    LEFT OUTER JOIN Emails ON People.ID = Emails.ID 
    ORDER BY Name, ID, Number, Email;

+----------+---------+-----------------+------------------------------+
| Name     | ID      | Number          | Email                        |
+----------+---------+-----------------+------------------------------+
| Steven   | 5000008 | 8451384         | feler@campus.uni.com         |
| Steven   | 5000008 | 8451384         | Smithley@gmail.com           |
| Steven   | 5000008 | 8451384         | tech@goodmail.com            |
| Steven   | 5000008 | 24887312        | feler@campus.uni.com         |
| Steven   | 5000008 | 24887312        | Smithley@gmail.com           |
| Steven   | 5000008 | 24887312        | tech@goodmail.com            |
| John     | 5000005 | 5551234         | Smithley@goodmail.com        |
| John     | 5000005 | 5551234         | Smithley.j@gmail.com         |
| John     | 5000005 | 5154324         | Smithley@goodmail.com        |
| John     | 5000005 | 5154324         | Smithley.j@gmail.com         |
| George   | 5000004 | NULL            | georgestanko@hotmail.com     |
| Ashley   | 8000009 | 7134584         | Ashley.hill86@gmail.com      |
| Amy      | 5000003 | NULL            | NULL                         |
+----------+---------+-----------------+------------------------------+ 
```

会发生什么 - 如果一个人有 2 个号码，他的所有电子邮件都会显示两次（它们无法排序！这意味着它们不能被 @last 删除）

## 我想要的是：

底线，与@last一起玩，我想以这样的方式结束，但如果我不以正确的方式排列 ORDER 列，@last 将不起作用 - 这似乎是一个大问题..Orderin the电子邮件栏。因为从上面的例子看：

Steven 有 2 个电话号码和 3 个电子邮件。每封电子邮件都会出现带有数字的 JOIN 电子邮件 - 因此无法排序的重复值（SORT BY 不适用于它们）。

```
**THIS IS WHAT I WANT**
+----------+---------+-----------------+------------------------------+
| Name     | ID      | Number          | Email                        |
+----------+---------+-----------------+------------------------------+
| Steven   | 5000008 | 8451384         | feler@campus.uni.com         |
|          |         | 24887312        | Smithley@gmail.com           |
|          |         |                 | tech@goodmail.com            |
| John     | 5000005 | 5551234         | Smithley@goodmail.com        |
|          |         | 5154324         | Smithley.j@gmail.com         |
| George   | 5000004 | NULL            | georgestanko@hotmail.com     |
| Ashley   | 8000009 | 7134584         | Ashley.hill86@gmail.com      |
| Amy      | 5000003 | NULL            | NULL                         |
+----------+---------+-----------------+------------------------------+ 
```

现在有人告诉我，最好将电子邮件和号码放在分开的表格中，因为一个人可以有很多电子邮件。那么，如果这是一件很常见的事情，那么有什么不简单的解决方案呢？

我也会对 PHP 解决方案感到满意。

## 我现在知道该怎么做，满足它，但不那么漂亮。

如果我使用 GROUP_CONTACT 执行此操作，我会得到令人满意的结果，但它看起来并不那么漂亮：我不能在它旁边放置“电子邮件类型 = 工作”。

```
 SELECT People.Ime,  
    GROUP_CONCAT(DISTINCT Phones.Number),  
    GROUP_CONCAT(DISTINCT Emails.Email)  
    FROM People 
    LEFT OUTER JOIN Phones ON People.ID=Phones.ID
    LEFT OUTER JOIN Emails ON People.ID=Emails.ID
    GROUP BY Name;
+----------+----------------------------------------------+---------------------------------------------------------------------+
| Name     | GROUP_CONCAT(DISTINCT Phones.Number)         | GROUP_CONCAT(DISTINCT Emails.Email)                                 |
+----------+----------------------------------------------+---------------------------------------------------------------------+
| Steven   | 8451384,24887312                             | Smithley@gmail.com,tech@goodmail.com,feler@campus.uni.com           |
| John     | 5551234,5154324                              | Smithley@goodmail.com,Smithley.j@gmail.com                          |
| George   | NULL                                         | georgestanko@hotmail.com                                            |
| Ashley   | 7134584                                      | Ashley.hill86@gmail.com                                             |
| Amy      | NULL                                         | NULL                                                                |
+----------+----------------------------------------------+---------------------------------------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:41:24.730

如果我理解正确，您还需要将其他字段与电子邮件相关联（例如：类型）。

使用 group_concat 您可以将电子邮件类型添加到结果中，在我的示例中为“;” 将*邮件*与*类型*分开，“，”将结果分开。

```
SELECT u.name,  
    GROUP_CONCAT( distinct p.phone),  
    GROUP_CONCAT( distinct 'mail=',e.mail,';type=' ,type)  
    FROM people u
    LEFT OUTER JOIN phone p ON u.id=p.id
    LEFT OUTER JOIN mail e ON u.id=e.id
    GROUP BY u.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T17:02:01.627

你想要的根本不是你想要的，如果这有任何意义的话......你实际上不能用你的数据库输出以编程方式做任何事情，你需要用它做一些事情（除非你只是在运行一个查询直接在您的数据库上）。

既然您说“我也会对 PHP 解决方案感到满意”。...您真正想要的是类似于 PHP“用户”对象的东西，例如（这当然是假设的）：

```
<?php

class User {

  private $_id;
  private $_telNos = array();
  private $_emails = array();

  public function __construct($iUserId = null, $oDatabaseAbstractionObject = null) {
    if(!is_null($iUserId)) $this->setId($iUserId);
    if(!is_null($oDatabaseConnectionObject)) $this->load($iUserId, $oDatabaseAbstractionObject);
  }

  public setId($iUserId) {
    $this->_id = (int) $iUserId;
  }

  public getId() {
    return $this->_id;
  }

  /* telephone and email setters and getters */

  public function load($iUserId, $oDatabaseAbstractionObject) {
    /* error trapping - for example if $iUserId is null */

    $this->setTelNos($oDatabaseAbstractionObject->readTelNos($iUserId));
    $this->setEmails($oDatabaseAbstractionObject->readEmails(iUserId));
  }
}

?> 
```

然后，您的数据库抽象对象只需要执行一些非常简单的查询来读取您的用户、用户电子邮件和电话号码表，并将结果作为数组返回，然后您可以将其直接放入您的 PHP 对象中。例如：

```
<?php

/**
 * this implements a database connection object as a private class member
 */
class DBUser {

  private $_conn;

  /* constructor other functionality */

  /**
   * method to pass an SQL query to the database and return an array of results
   */
  public function readTelNos($iUserId) {
    return $this->_conn->read("SELECT `number` from `tel` WHERE `user_id` = " . (int) $iUserId);
  }

}
?> 
```

这将您的问题分解为更小、更容易处理的问题，并将它们全部包装在漂亮的 PHP 对象中，然后您可以实际使用这些对象。

您的用户对象将有一个列表，如果电话号码和电子邮件可以通过类似的方式轻松检索，`$oUser->getEmails();`并且如果它们存储为对象内的关联数组，您甚至可以通过“标签”检索它们`$oUser->getEmail('work');`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-20T12:30:23.443

首先创建临时表名称 temp_tb 而不是插入记录。然后使用 Row_Number() 进行分区并删除多次列出的所有记录。就像受到打击一样。

```
 Insert into temp_tb SELECT People.Name, People.ID, Phones.Number, Emails.Email
    FROM People 
    LEFT OUTER JOIN Phones ON People.ID = Phones.ID
   LEFT OUTER JOIN Emails ON People.ID = Emails.ID 
   ORDER BY Name, ID, Number, Email;
   SELECT * from temp_tb 
    With A as
  (
 select People.Name, People.ID, Phones.Number, Emails.Email ROW_NUMBER() 
  OVER (Partition by ID ORDER BY Fee_temp.Name) As Number from temp_tb 
 )
 DELETE FROM A WHERE Number>1
 SELECT * FROM temp_tb 
```

希望它可以帮助你。

# php - 显示具有不同状态的多个项目

> ID：13532657
> 
> 赞同：0
> 
> 时间：2012-11-23T16:18:54.527
> 
> 标签：php

我不知道如何在网上搜索答案，我不确定如何解释问题，所以如果不清楚或之前被问过，我很抱歉。

这是交易：我需要显示一些具有不同状态的项目（有“未回答”、“讨论中”和“已回答”）。现在发生的情况是显示未回答的问题，正在讨论的问题显示正确的文本，但已回答问题的文本与“讨论中”相同。当其中一个问题从“未回答”移至“讨论中”时，将显示“已回答”问题的正确文本。当没有“未回答”的问题时，该项目的文本是正确的。但是其他项目得到的文本与“未回答”相同，并且应该在“讨论中”中显示的问题不可见。

有人知道我能做些什么来解决这个问题吗？我会在下面放一些代码。谢谢！！！

overzicht.php

```
<?php 
session_start();
if(!isset($_SESSION['views']))
{
    header('Location: index.php');
}
else
{
    $feedback = "";
    try
    {
        include_once('classes/question.class.php');
        $oQuestion = new Question();
        $oQuestionsUnanswered = $oQuestion->getQuestionsUnanswered();
        $oQuestionsInDiscussion = $oQuestion->getQuestionsInDiscussion();
        $oQuestionsAnswered = $oQuestion->getQuestionsAnswered();
    }
    catch(Exception $e)
    {
        $feedback = $e->getMessage();
    }
}
?> 
```

显示不同的项目（对于其他 2 个状态重复两次，使用其他变量，例如 $oQuestionsAnswered）：

```
<h3>Vragen onbeantwoord:</h3>
        <div id="questionUnanswered">
        <?php
            if(isset($oQuestionsUnanswered))
            {
                $unanswered_details = "";
                while($arr_unanswered = mysqli_fetch_array($oQuestionsUnanswered))
                {
                    $unanswered_details .= "<div class='head'>";
                    $unanswered_details .= "<div class='titel'>";
                    $unanswered_details .= "<a href='full_topic.php?id=".$arr_unanswered['bericht_id']."'>".$arr_unanswered['bericht_titel']."</a></div>";
                    $unanswered_details .= "<div class='datum'>" . $arr_unanswered['bericht_datum'] . "</div></div>";
                }
                echo $unanswered_details;
                }
            else
            {
                echo $feedback;
            }
        ?>
        </div> 
```

question.class.php（对于其他 2 个也重复）

```
public function getQuestionsUnanswered()
    {
        include('connection.class.php');
        $sql = "SELECT *
                FROM tblbericht
                WHERE fk_status_id = 3;";
        $result = $conn->query($sql);
        if($result->num_rows!=0)
        {
            return $result;
        }
        else
        {
            throw new Exception("Er zijn momenteel nog geen onbeantwoorde vragen");
        }
        mysqli_close($conn);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T18:12:59.753

IMO您犯了一个大错误，您将查询时刻与获取时刻分开，因此您可以创建一个问题对象数组，而不是在页面内使用它。

这是改编后的代码**草稿：**

```
public function getQuestionsUnanswered()
    {
        include('connection.class.php');
        $sql = "SELECT *
                FROM tblbericht
                WHERE fk_status_id = 3;";
        $result = $conn->query($sql);

        $_rv =array()
        if($result->num_rows!=0)
        {
                while($arr = mysqli_fetch_array($result))
                {
                    $_rv[] = new QuestionBean($arr);                    
                }

        }
        else
        {
            throw new Exception("Er zijn momenteel nog geen onbeantwoorde vragen");
        }
        mysqli_close($conn);
        return $_rv
    } 
```

然后

```
<h3>Vragen onbeantwoord:</h3>
        <div id="questionUnanswered">
        <?php
            if(count($oQuestionsUnanswered))
            {
                $unanswered_details = "";
                foreach( $oQuestionsUnanswered as $bean)
                {
                    $unanswered_details .= "<div class='head'>";
                    $unanswered_details .= "<div class='titel'>";
                    $unanswered_details .= "<a href='full_topic.php?id=".$bean->bericht_id."'>".$bean->bericht_titel."</a></div>";
                    $unanswered_details .= "<div class='datum'>" . $bean->bericht_datum . "</div></div>";
                }
                echo $unanswered_details;
                }
            else
            {
                echo $feedback;
            }
        ?>

</div> 
```

当然，您可以使用 1 个类对所有类型的问题进行优化，并使用 1 个函数使用参数来选择您需要的哪种问题。

问题的类型将是 QuestionBean 的一个参数。

QuestionBean 是一个 Bean :)

作为 bean，我的意思是一个“简单”的数据对象，其中每个属性都有一个 getter 和 setter 或者是公共的。

我使用 __constructor 作为初始化器和一个名为 populate 的函数：

```
class simpleBean{
  public $id;
  public function __construct($params){
    // some logic as need
  }

  // simple populate
  public function populate($params){
    $valid =  get_class_vars ( self );
    foreach($params as $k => $v){
      if(!isset($valid[$k]){
        // if this key has no attrib matchig I skip it
        continue;
      }
      $this->$k = $v;
    }
  }
}

class QuestionBean extend simpleBean{
  public $attr1;
  public function __construct($params){
    // may be I've some common logic in parent
    parent::__construc($params);

    // 
    $this->populate($params);
  } 
} 
```

现在之后

```
 while($arr = mysqli_fetch_array($result))
            {
                $_rv[] = new QuestionBean($arr);                    
            } 
```

您将拥有一个 bean 数组 ($rv)，每个 bean 都是查询的单个结果行，但它是一个对象，这比一个愚蠢的数组要好得多。

# html - 如何使按钮均匀拉伸以填充容器 （就像一个带有单元格的表格行）

> ID：13532660
> 
> 赞同：6
> 
> 时间：2012-11-23T16:19:01.737
> 
> 标签：html, css, button, fluid-layout

假设我有一个`<div>`带有一些按钮的容器：

```
<div class="cont">
    <div class="button">Button 1</div>
    <div class="button">Button 2</div>
    <div class="button">Button 3</div>
    <div class="button">Button 4</div>
    <div style="clear:both"></div>
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

并为此分配了一些CSS：

```
.cont{
    background:#0F0;
    width:400px;
    height:40px;
    line-height:40px;
}
.button{
    background:#F00;
    float:left;
    height:inherit;
    line-height:inherit;
} 
```

背景颜色只是为了让我可以看到我在做什么。我想知道是否有一种无 JavaScript 的方法可以使所有按钮`<div>`的拉伸（宽度相等）到父级`<div>`，我希望它们使用父级自动获取宽度`<div>`。所以，是的，我可以将`.button`宽度设置为 25%，因为其中有 4 个，但如果我添加更多按钮，我希望它们自动获得新宽度。

我希望我能很好地解释自己，我确实环顾四周，但找不到任何适合这一点的东西。我可以在 CSS 中执行此操作还是 JS 工作？

[JSFiddle在这里。](http://jsfiddle.net/zanjr/1/)

谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-23T16:22:16.820

它可以用`display: table;`和来完成`display: table-cell;`

我知道表格带来的不好的含义，但您没有使用表格标记，您只是在制作 div 之`act`类的表格。

[在此处](http://jsfiddle.net/zanjr/2/)查看演示

```
<div class="cont">
    <div class="button">Button 1</div>
    <div class="button">Button 2</div>
    <div class="button">Button 3</div>
    <div class="button">Button 4</div>
</div>​

.cont{
    background:#0F0;
    width:400px;
    height:40px;
    line-height:40px;
    display: table;
}
.button{
    background:#F00;
    display: table-cell;
}
​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T16:28:28.457

这是 CSS[弹性盒子模型](http://www.w3.org/TR/css3-flexbox/)的完美用例。

[HTML5 Rocks](http://www.html5rocks.com/en/tutorials/flexbox/quick/)对此有很好的介绍。

这需要供应商前缀，旧浏览器不支持。[Flexie](http://flexiejs.com)是旧浏览器的polyfill。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-08T12:14:57.950

我发现 HTML 按钮有点奇怪，例如“text-align: center”会改变按钮在 div 中的位置，而“margin: auto”不会。而且，更改按钮的大小会使其样式不同（在 Chrome 中）。

另一种解决方案可能是制作一个可点击的 div，这样您还可以设置按钮的样式，以确定它在跨浏览器中的外观。(HTML5)

```
<a href="http://example.com">
  <div>
     anything
  </div>
</a> 
```

参考：[https ://css-tricks.com/snippets/jquery/make-entire-div-clickable/](https://css-tricks.com/snippets/jquery/make-entire-div-clickable/)

# python - 下标 itertools.repeat

> ID：13532671
> 
> 赞同：2
> 
> 时间：2012-11-23T16:19:58.260
> 
> 标签：python, python-3.x, itertools

鉴于`range`对象是可下标的，为什么`itertools.repeat`对象不能下标？

```
In [10]: range(3, 10)[3]
Out[10]: 6

In [11]: import itertools as it

In [12]: it.repeat(5)[3]
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-12-1ef74480e0a7> in <module>()
----> 1 it.repeat(5)[3]

TypeError: 'itertools.repeat' object is not subscriptable 
```

**请注意，范围对象和 itertools.repeat 对象是 Python 3 的一部分。**

我会比较喜欢：

```
class repeat_(itertools.repeat):
    def __init__(self, object_, times=None):
        super().__init__(object_, times)

        self.object_ = object_
        self.times = times

    def __reversed__(self):
        return self

    def __getitem__(self, key):
        return self.object_

    def __contains__(self, key):
        return key == self.object_

    def __len__(self):
        if self.times is None:
            raise ValueError
        return self.times 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T16:32:48.770

`repeat`只是一遍又一遍地产生相同的对象。我不确定它实际上会为你做什么下标......你最好打电话给`next(repeat_object)`. 也许您正在考虑`cycle`（就像我最初阅读您的问题时所做的那样）？

令人惊奇的`itertools`是，它试图尽可能地懒惰地运行。鉴于此，如果您将生成器表达式传递给 ，您期望会发生`itertools.cycle`什么？ `cycle`没有**办法**知道你传递的对象的长度，而不是把整个东西转换成一个元组并查询。这样做可能会在许多其他地方破坏 API（现在您在为重复对象下标时消耗您的迭代），或者它会通过不必要的方式占用更多的中间存储`itertools.tee`- 这是`itertools`试图避免的。按照目前的实施，`cycle`在一个巨大的生成器表达式上，你不能希望在内存中保存它（只要你实际上没有迭代所有元素），但如果你试图在一个大索引处下标它就不会如此.

最后，顾名思义，`itertools`是一个用于创建`iterable`对象的库。因此，没有理由期望这些对象是可下标的。`subscripttools`（毕竟它没有被调用:)。

作为旁注，您可以使用`itertools.islice`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:22:01.753

[itertool.repeat()](http://docs.python.org/2/library/itertools.html#itertools.repeat)方法返回一个迭代器，而不是一个列表，就像`range`函数一样。所以，你不能在上面下标。

这是文档中的内容：-

> 制作一个反复返回对象的迭代器。除非指定了 times 参数，否则无限期运行。

从[范围的文档中](http://docs.python.org/2/tutorial/controlflow.html)： -

> 如果您确实需要遍历一系列数字，内置函数 range() 会派上用场。它生成包含算术级数的列表

* * *

在*Python 3*中，不同之处在于，`range()`创建了一个`Generator`对象。*Python 2*中的哪个`xrange`函数做了。

# android - Android 运行应用程序内存使用情况

> ID：13532672
> 
> 赞同：4
> 
> 时间：2012-11-23T16:20:07.740
> 
> 标签：android, memory-management, out-of-memory

我们可以在 Elipse 内存分析工具（在 DDMS 视图中）中看到的堆使用量（已分配）与此处显示的 Android 设备上同一应用程序的内存使用量大小有什么区别？：

**设置**->**应用程序**->**运行**

即使我积极地尝试通过在不需要对象时立即将对象设为 null 来保留内存，但后一个数字（运行应用程序屏幕上的内存使用量大小）只会不断增加，我的应用程序最终由于 OutOfMemoryError 而崩溃。然而，前者向我表明我的体型在合理范围内。我也经常调用 System.gc()。两者有区别吗？为什么会出现差异？关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:52:49.007

我所知道的两者之间最大的区别是垃圾收集的范围。

正常的垃圾收集，包括`System.gc()`，收集一些垃圾，然后停止。摆脱所有东西并不是彻底清除堆。那就是尽量减少垃圾收集对 CPU 的影响。

但是，为 MAT 准备的堆转储实际上是一个完整的 GC。

您的症状表明您分配内存的速度比 GC 回收它的速度要快。对此的主要解决方案是尝试分配更少的内存，或者减少分配它的频率。例如，在可能的情况下，重用对象、位图缓冲区等，而不是试图让 GC 清理旧的东西并随时分配新的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T17:00:43.683

如果内存从未被释放，听起来你的应用程序某处有内存泄漏。这意味着您在某处维护对正在重新创建的大对象（如 Activity 或位图）的强引用，这就是调用 System.gc() 没有任何区别的原因。

我建议从 google IO 2011 观看以下有关[android 内存管理](http://www.youtube.com/watch?v=_CruQY55HOk)的内容。它让您知道如何使用 eclipse 内存分析器工具，该工具对于调试此类错误非常有用

# cakephp - CakePHP - 无法通过 SMTP 发送电子邮件

> ID：13532674
> 
> 赞同：1
> 
> 时间：2012-11-23T16:20:08.413
> 
> 标签：cakephp

用这个把我的头发拉出来。

当我在本地机器上开发这个 cakephp (2.2) 应用程序时，我可以使用 smtp 通过 gmail 发送电子邮件而没有问题。从那以后，我将它部署到 1and1 服务器上，但我无法再发送。更令人沮丧的是，我似乎无法从蛋糕中获得任何体面的调试信息。

继承人的代码：

```
if($fu['name']) {              

            $url = Router::url('/admin/', true );
            $ms = $url;
            $ms = wordwrap($ms,1000);

           //============Email================//
           // SMTP Options
           $this->Email->smtpOptions = array(
               'port'=>'465',
               'timeout'=>'30',
               'host' => 'ssl://smtp.gmail.com',
               'username'=>'myemail@gmail.com',
               'password'=>'password'
                 );
           $this->Email->template = 'newExpenseClaim';
           $this->Email->from    = 'Expense Tracker <myemail@email.co.uk>';
           $this->Email->to      = 'myemail@fakeemail.com'; 
           $this->Email->subject = 'New Expense Claim Submitted - Please Review';
           $this->Email->sendAs = 'both';

           $this->Email->delivery = 'smtp';

           // Set username & url in email
           $this->set('user', $fu['name']);
           $this->set('ms', $ms);
           //$this->Email->send();

           if(!$this->Email->send()) {
                CakeLog::write('debug', $this->Email->smtpError);
            }

           $this->set('smtp_errors', $this->Email->smtpError);

           //============EndEmail=============//   
        } 
```

每次失败时我都会收到以下调试信息（打印在屏幕上，调试日志中没有任何内容，这非常令人讨厌）。

```
 Connection refused

Error: An Internal Error Has Occurred.
Stack Trace

    CORE/Cake/Network/Email/SmtpTransport.php line 95 → CakeSocket->connect()
    CORE/Cake/Network/Email/SmtpTransport.php line 60 → SmtpTransport->_connect()
    CORE/Cake/Network/Email/CakeEmail.php line 1059 → SmtpTransport->send(CakeEmail)
    CORE/Cake/Controller/Component/EmailComponent.php line 345 → CakeEmail->send(null)
    APP/Controller/ExpenseClaimsController.php line 236 → EmailComponent->send()
    APP/Controller/ExpenseClaimsController.php line 278 → ExpenseClaimsController->notifyAdminsOfNewClaims()
    [internal function] → ExpenseClaimsController->add()
    CORE/Cake/Controller/Controller.php line 485 → ReflectionMethod->invokeArgs(ExpenseClaimsController, array)
    CORE/Cake/Routing/Dispatcher.php line 186 → Controller->invokeAction(CakeRequest)
    CORE/Cake/Routing/Dispatcher.php line 161 → Dispatcher->_invoke(ExpenseClaimsController, CakeRequest, CakeResponse)
    APP/webroot/index.php line 92 → Dispatcher->dispatch(CakeRequest, CakeResponse) 
```

任何人都可以帮忙吗？提前致谢

** 使用包装器和 soctet 信息更新 **

这些是我从这些函数返回的包装器和套接字：

包装：

```
array(
    (int) 0 => 'https',
    (int) 1 => 'ftps',
    (int) 2 => 'compress.zlib',
    (int) 3 => 'compress.bzip2',
    (int) 4 => 'php',
    (int) 5 => 'file',
    (int) 6 => 'data',
    (int) 7 => 'http',
    (int) 8 => 'ftp',
    (int) 9 => 'zip'
) 
```

插座

```
array(
    (int) 0 => 'tcp',
    (int) 1 => 'udp',
    (int) 2 => 'unix',
    (int) 3 => 'udg',
    (int) 4 => 'ssl',
    (int) 5 => 'sslv3',
    (int) 6 => 'sslv2',
    (int) 7 => 'tls'
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:29:19.200

首先，您应该检查您的主机支持的传出连接。简单检查类似

`echo implode("", file("http://google.com"));`

其次，您应该检查哪些 PHP 支持 SSL 连接，并且它具有 SSL 流包装器。我现在不记得你如何检查它了。但是通过关键字在谷歌中搜索：PHP 流包装器 SSL

# adfs - 与 ADFS、azure ACS 交互

> ID：13532679
> 
> 赞同：0
> 
> 时间：2012-11-23T16:20:48.943
> 
> 标签：adfs

这是可能的还是我完全错了？

考虑我们有这种情况：一个网站（web1）托管在一台服务器上，另一个托管在不同的服务器上（比如说 web2）。这两个应用程序都有登录/注册。现在我想允许来自 web2 的用户访问 web1。例如，在 web2 上注册的用户转到 web1 站点并尝试使用用户名：“web2/username”和密码：“somePassword”登录。现在我的 web1 应用程序需要检查该用户是否存在于 web2 用户列表中。

现在我设法使用 Azure ACS（使用 Google/live 帐户登录）制作了一些东西，但我不想使用 ACS。我想要的是我的应用程序与 web2 ADFS 交互（我不确定这是否可能，或者即使 ADFS 可以以这种方式使用）并确定尝试登录 web1 的用户是否实际上已在 web2 上注册。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T19:23:26.010

对的，这是可能的。这是基本的“单点登录”方案。这两个网站都将依赖“STS”来验证用户身份。ADFS 和 ACS 是“STS”的示例。

STS 通常是一个独立的实体。它不属于 web1 或 web2。在网站上使用的库（假设基于 .NET 的应用程序）是 WIF（Windows Identity Foundation），它将为您处理所有身份验证请求和令牌解析。

您可以使用 ADFS，但您的所有用户都必须针对 Active Directory 进行身份验证。

我建议您阅读[此介绍](http://msdn.microsoft.com/en-us/library/ff359108.aspx)和[有关 SSO 的这一章](http://msdn.microsoft.com/en-us/library/ff359102.aspx)。

# r - slam 软件包安装失败并出现 make 错误

> ID：13532682
> 
> 赞同：6
> 
> 时间：2012-11-23T16:21:04.780
> 
> 标签：r, linker

我正在尝试安装 slam 软件包，但它似乎在我的系统上失败了。我正在运行 ubuntu 12.04。我认为这是缺少库或其他东西，所以我安装了一些与 liblas 匹配的库，但没有骰子。

```
* installing *source* package ‘slam’ ...
** package ‘slam’ successfully unpacked and MD5 sums checked
** libs
gcc -std=gnu99 -I/usr/share/R/include -DNDEBUG      -fpic  -O3 -pipe  -g  -c grouped.c -o grouped.o
gcc -std=gnu99 -I/usr/share/R/include -DNDEBUG      -fpic  -O3 -pipe  -g  -c sparse.c -o sparse.o
gcc -std=gnu99 -I/usr/share/R/include -DNDEBUG      -fpic  -O3 -pipe  -g  -c util.c -o util.o
gcc -std=gnu99 -shared -o slam.so grouped.o sparse.o util.o -lblas -lgfortran -lm -lquadmath -L/usr/lib/R/lib -lR
/usr/bin/ld: cannot find -lblas
collect2: ld returned 1 exit status
make: *** [slam.so] Error 1
ERROR: compilation failed for package ‘slam’
* removing ‘/home/brandon/.R/i686-pc-linux-gnu-library/2.15/slam’ 
```

我试过了：

```
sudo apt-get install liblas1 liblas-bin liblas-dev 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T16:45:04.063

您的系统可能有问题。尝试`/usr/lib/libblas.*`在安装了 OpenBLAS 软件包的 Ubuntu 12.04 服务器上遵循以下命令：

```
edd@max:~$ ls -log /usr/lib/libblas.* /etc/alternatives/libblas*                                                                                                                                                                 
lrwxrwxrwx 1 36 Jun 15 09:41 /etc/alternatives/libblas.a -> /usr/lib/openblas-base/libopenblas.a
lrwxrwxrwx 1 37 Jun 15 09:41 /etc/alternatives/libblas.so -> /usr/lib/openblas-base/libopenblas.so
lrwxrwxrwx 1 39 Jun 15 09:41 /etc/alternatives/libblas.so.3gf -> /usr/lib/openblas-base/libopenblas.so.0
lrwxrwxrwx 1 27 May  9  2012 /usr/lib/libblas.a -> /etc/alternatives/libblas.a
lrwxrwxrwx 1 28 May  9  2012 /usr/lib/libblas.so -> /etc/alternatives/libblas.so
lrwxrwxrwx 1 32 May  9  2012 /usr/lib/libblas.so.3gf -> /etc/alternatives/libblas.so.3gf
edd@max:~$ 
```

你应该有类似的东西，尽管你已经安装了基本的 blas。

# ruby-on-rails - 未初始化的常量 Mail::Ruby19

> ID：13532685
> 
> 赞同：2
> 
> 时间：2012-11-23T16:21:15.417
> 
> 标签：ruby-on-rails, ruby, actionmailer

嗨，聪明的头脑，我在尝试运行此代码时遇到了这个问题。想不通。希望有人可以提供帮助。

这是用于“忘记密码”的重置邮件。

编辑：我已经尝试重新启动应用程序几次。这不是导致问题的原因。

用户型号：

```
validations up here...

def generate_token(column)
  begin
    self[column] = SecureRandom.urlsafe_base64
  end while User.exists?(column => self[column])
end

def send_password_reset
  generate_token(:password_reset_token)
  self.password_reset_sent_at = Time.zone.now
  save!
  UserMailer.deliver_password_reset(self)
end 
```

密码重置控制器：

```
def create
  user = User.find_by_email(params[:email])
  user.send_password_reset if user
  redirect_to signin_path, :notice => "Email sent with instructions."
end 
```

用户邮件：

```
class UserMailer < ActionMailer::Base
  default from: "noreply@mysite.com"

  def password_reset(user)
    @user = user
    mail(:to => user.email, :subject => "Eventalist - Password Reset.")
  end
end 
```

错误：

```
uninitialized constant Mail::Ruby19

app/mailers/user_mailer.rb:1:in `<top (required)>'
app/models/user.rb:19:in `send_password_reset'
app/controllers/password_resets_controller.rb:7:in `create'

This error occurred while loading the following files:
 mail 
```

任何帮助表示赞赏。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T05:23:29.030

总结评论中的答案，以便从“未回答”过滤器中删除此问题：

根据[Shamir K](https://stackoverflow.com/users/1780238/shamir-k)， UserMailer 语法可能是可疑的。这是一个公平的观察——请注意此处原始海报使用的源材料：

[RailsCast #274：记住我并重置密码](http://railscasts.com/episodes/274-remember-me-reset-password)

话虽如此，[最初的发帖](https://stackoverflow.com/users/1664133/theo-felippe)人后来澄清说他的问题是由于缺少一些配置造成的：

> 这是一个错误。由于某种原因，当我生成邮件时，rails 变得懒惰并且忘记了它通常所做的一些配置。现在一切都好。谢谢

# ios - 在 iOS 中查看 UITabViewController 之外的好方法

> ID：13532687
> 
> 赞同：0
> 
> 时间：2012-11-23T16:21:24.063
> 
> 标签：ios, ads

大约一年后，我才刚刚回到 iOS 开发中，并且正在寻找一种在 UITabViewController 视图上方或下方拥有单个视图的方法。我们的想法是在整个应用程序中使用一个广告视图，而不是在每个选项卡上使用一个。广告视图的不断重新初始化似乎会产生很多开销，因此始终坚持一个似乎更有效。

我已经搜索过这个但没有找到很多东西，所以即使是有用的链接也会受到赞赏。

在此先感谢，杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:31:06.970

如何创建一个父视图控制器并且每个视图控制器都从该父视图控制器继承？父视图控制器具有广告视图或表格视图，因此每个子视图控制器也将具有这两个视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:59:26.450

我在这里看到了几种方法：

1.  由于您在应用程序的委托中设置视图层次结构，我建议创建一个单独的`UIViewController`并从您的应用程序委托中管理它。这样您就可以在主 UIWindow 中显示/隐藏它，而无需做太多工作。

2.  您可以子类`UITabBarController`化并在可见视图控制器中显示广告。这是更多的工作，但你的应用架构可以说是更干净，因为你的应用代理不会被与广告相关的代码弄得一团糟。

3.  另一种选择是查看一个`UIViewController`类别，您可以在其中管理添加相关代码。不一定是最干净的，但它可以将广告排除在您的应用程序委托和标签栏控制器之外。（您可以通过运行时级别调用和关联对象将广告视图添加为类别属性，但这会变得混乱。）

如果是我，我可能会采用第一种方法，但我可以支持其他两种方法中的任何一种，因为广告视图并不需要它自己的视图控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T00:00:29.080

好的，在花了一些时间尝试为此创建和管理客户视图控制器后，我偶然发现了 Apple 在 iOS 5 中添加的容器视图控制器功能。我不需要支持 iOS 4 或更早版本，所以这对我很有用。这里有一个很好的描述（不幸的是作者从来没有用教程写过第 2 部分）：

[容器视图控制器描述](http://invasivecode.tumblr.com/post/12383262201/container-view-controllers-part-i-one-of-the)

这里有一个不错的教程：

[容器视图控制器教程](http://www.cocoanetics.com/2012/04/containing-viewcontrollers/)

在这两者之间，我能够使用容器视图控制器中包含的 AdViewController 和 BodyViewController (TabBarController) 创建一个良好的设置。这为我提供了我需要的所有功能（至少到目前为止）。

# java - 如何找到连接假值二维数组边界的真值路径

> ID：13532690
> 
> 赞同：1
> 
> 时间：2012-11-23T16:21:43.517
> 
> 标签：java, algorithm

我需要遍历布尔值的二维数组，从上边框到下边框，并确定完全由`true`值组成的路径。在这一点上，我尝试了许多不同的技术，但我没有取得任何进展。有人可以帮我吗？

这是一个例子：

```
false true  true  false false false
false true  false false false false
false true  true  false false false
false false true  false false false 
```

我需要找到一种方法来确定`true`沿边界的值，然后找到一种方法来遍历`true`值的路径。

```
#..###
#.####
#..###
##.### 
```

在这一点上，我已经开始使用算法。我曾想过遍历列并搜索一个`true`值，将行增加一个然后搜索最后一行，但我不知道如何处理第一列和最后一列。

问题的第一部分是确定`true`值沿边界的位置。第二部分是找到`true`值的路径并记录它们的坐标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T17:11:06.027

这可以通过简单的试错算法来解决。从上到下的要求很好，因为您知道您必须从数组的第一行开始，所以您所要做的就是在该行中搜索`true`要开始的值。

找到`true`后，查看它的相邻单元格。（确切地说，哪些相邻的单元格取决于对角线是否计数以及您的路径是否可以像水槽下的疏水管一样向上弯曲。）

![在此处输入图像描述](../Images/03d05b2a3a9a319ec1d5d4a4862b827b.png)

（图片来自[维基百科](http://en.wikipedia.org/wiki/File:Vattenlaas.png)）

如果您找到另一个包含 的单元格`true`，则该单元格将成为您的“当前”单元格，然后您查看*它的*邻居。继续这样做，直到到达`true`最后一行的单元格。或者，如果您没有找到任何`true`邻居，则返回上一个单元格并继续其邻居。

这样做的一种方法是使用递归和很少的代码。只是做类似的事情

```
// pseudocode only
for(Cell foo : all cells in top row)
    checkCell(foo);

boolean checkCell(Cell current) {
    if(current == false)
        return false;

    if(current == true && current.isInLastRow == true)
        return true;

    // if we reach here, the cell is true but we're not done
    for(Cell foo : all valid neighbors of this cell except the "parent")
        return checkCell(foo);
} 
```

另一种方式使用更多内存，但也更有效。创建第二个数组，其大小与原始数组相同。当您测试原始数组中的单元格时，请在新数组中标记其对应的单元格。然后，当您测试邻居时，检查新数组以查看您是否已经去过给定的邻居。如果有，请跳过它，因为它不会导致成功（您知道这一点是因为如果可以的话，您已经完成并返回）。`true`如果数组包含很多彼此相邻的值，这可以为您节省大量时间，例如

```
F T T T F
F T T T F
F T T T F
F T T T F
F T T T F 
```

编辑：
我错过了您的更新评论，该评论说您需要记录路径中单元格的坐标。没问题：只需创建[一堆](http://en.wikipedia.org/wiki/Stack_%28abstract_data_type%29)[`Point`对象](http://docs.oracle.com/javase/6/docs/api/java/awt/Point.html)记录您去过的地方。如果你最终走错了路，每次你“回到一个级别”时，只需从堆栈中弹出一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T18:40:58.627

您可以将其转换为图形并运行寻路算法。

将每个矩阵条目变成图上的一个节点。对于位于矩阵的每个`true`节点`[i,j]`，将其连接到具有值的最接近的四个相邻条目中的每一个`true`，即，`[i+/-1, j]`每当`[i, j+/-1]`这样的条目为真时，都将其连接到条目。这些都是图上的所有且唯一的边。然后在位于顶部边界的所有节点上运行 Dijkstra 算法[http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm 。](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)只要有这样的路径，就会`true`返回每个节点对之间的最短路径。`true`

# asp.net - 我需要一个特定的方法来每天在早上 7 点、下午 2 点和晚上 9 点调用自己 3 次，我需要 Web 服务吗？我该怎么称呼它？

> ID：13532691
> 
> 赞同：0
> 
> 时间：2012-11-23T16:21:45.887
> 
> 标签：asp.net, vb.net, web-services

我读到建议使用常规 Windows 服务，或者您可以从任务计划程序开始的控制台应用程序，这里的问题是我将无法访问服务器，更不用说在我的网站之后自己配置它了已经启动，所以我们想出了建立一个可以在特定时间自动完成工作的 Web 服务的想法，我已经创建了一个 Web 服务，但是我不知道如何让它自动化，所以到目前为止，这只是我的网站调用 Web 服务方法，这完全没用，因为我可以从网站本身做到这一点。

这是 VS 的示例表单，我可以从我自己的代码中调用它，但它没有任何作用。

```
<WebMethod()> _
 Public Function HelloWorld() As String
  Return "Hello World"
 End Function 
```

所以假设这是我需要的，我怎么能让它自动化呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:38:23.183

如果您需要一些解决方案，可以在配置的时间运行一些例程并通过 http 提供对自身的访问，您可以：

1.  做一个网络服务，
2.  使用 Quartz.NET [http://quartznet.sourceforge.net/](http://quartznet.sourceforge.net/)来安排例程，
3.  使用 WCF 自托管提供 HTTP 访问

# actionscript-3 - Stage3D 可以在所有其他对象后面绘制对象，而不管实际距离如何？

> ID：13532692
> 
> 赞同：2
> 
> 时间：2012-11-23T16:21:53.070
> 
> 标签：actionscript-3, stage3d, depth-testing

我正在 Stage3D 中制作一个 3D 空间游戏，并希望在所有其他对象后面绘制一个星域。我认为我遇到的问题是所涉及的距离非常高。如果我的星星真的比其他物体更远，我必须将它们缩放到无法正确渲染的程度 - 超过一定尺寸时，脸部似乎会闪烁。这也发生在我的行星网格上，当缩放到必要的大小（12000-100000 个单位）时。我在平面纹理上渲染星星，指向相机。只要它们没有放大太多，它们就可以渲染得很好，尽管显然在更远的其他物体面前。我尝试过各种深度测试模式（Context3DCompareMode.LESS，Context3DCompareMode. GREATER 和所有其他）结合在 z 缓冲区中包含和排除网格，只有当星星出现的位置不存在其他像素时才能渲染星星，没有运气。有谁知道我如何实现这一点 - 或者，更好的是，知道为什么，超过一定尺寸的网格不能正确渲染？是否有我不知道的任意上限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T17:11:18.217

我不知道 Stage3D，我在这里说的是 OpenGL 语言，但是绘制背景/天空盒的常用方法是近距离绘制背景，不远，先绘制背景，然后禁用深度缓冲区写入同时正在绘制背景（如果它本身不需要深度缓冲）或在绘制背景之后和常规场景之前*清除深度缓冲区。*

您的行星闪烁可能是由于缺乏深度缓冲分辨率；如果是这样，您必须在

1.  将物体拉近相机，
2.  将相机平截头体*靠近平面*移动得更远或更靠近*平面*（这将增加整个场景的深度缓冲区分辨率），或者
3.  在互斥深度范围内多次渲染场景（这称为*深度剥离*）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T15:03:43.340

你应该使用八哥。它可以工作

[http://www.adobe.com/devnet/flashplayer/articles/away3d-starling-interoperation.html](http://www.adobe.com/devnet/flashplayer/articles/away3d-starling-interoperation.html) http://www.flare3d.com/blog/2012/07/24/flare3d-2-5-starling-integration /

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T07:21:37.653

您必须查看投影和顶点着色器输出是如何完成的。顶点着色器输出有四个分量：x,y,z,w。由此计算像素坐标：

x' = x/w

y' = y/w

z' = z/w

z' 是最终在 z 缓冲区中的内容。因此，只需将 z = w*value 放在顶点着色器的末尾，您就可以输出任何常量值。只需输入 value = .999 即可！您的常规深度较少测试将起作用。

# python - 解析自定义文件格式python的技巧

> ID：13532700
> 
> 赞同：0
> 
> 时间：2012-11-23T16:22:12.953
> 
> 标签：python, parsing

我开发了一个自定义系统来模拟网络活动，例如下载文件等。我还有一个自定义文件格式可以输入这个系统。我希望将这个用 perl 编写的旧系统更改为 python 中的新系统。但首先我必须以某种方式解析文件。

我想解析文件中的某些字段，例如`[settings]`我对系统有任何争论的地方。我还有一个`[macro]`部分是重要内容（步骤等）的开始。

我遇到的麻烦是解析这些部分让我的系统以不同且更简单的格式将其写出（我有数千个这些文件，我只想编写一个生成器来获取旧文件并以新格式写入新文件）。

旧格式：

```
[settings]
email_to=people
special_websurf_processing=1
period_0_1_only=1
crc_recheck=0

[macro]
%::WebSurfRules =
    (
    'Step1' =>
        {
        action                  => 'NAVIGATE',
        inputstring             => 'http://www.tda-sgft.com/TdaWeb/jsp/fondos/Fondos.tda',
        },
    'Step2' =>
        {
        action        => 'CLICK_REFERENCE',
        matchtype     => 'OUTER',
        matchstring   => 'phHttpDest->\{\'FirstClick\'\}',
        pass          => 'phHttpDest->\{\'Step2Pass\'\}',
        },
    'Step3' =>
        {
        action        => 'CLICK_REFERENCE',
        matchtype     => 'OUTER',
        matchstring   => 'phHttpDest->\{\'SecondClick\'\}',
        },
    'Step4' =>
        {
        action        => 'CLICK_REFERENCE',
        matchtype     => 'OUTER',
        matchstring   => 'phHttpDest->\{\'DealClick\'\}',
        accept_multi_match  => 'ANY_TOP_FIRST',
        },
    'Step5' =>
        {
        action        => 'CLICK_REFERENCE',
        matchtype     => 'INNER',
        matchstring   => 'phHttpDest->\{\'LinkClick2\'\}',
        fail          => 'Step6',
    #    accept_multi_match  => 'ANY_TOP_LAST',
        },
    'Step6' =>
        {
        action        => 'CLICK_REFERENCE',
        matchtype     => 'INNER',
        matchstring   => 'phHttpDest->\{\'DocClick\'\}',
        },
    'Step7' =>
        {
        action                  => 'CLICK_DOWNLOAD_OK',
        },
    );

[data]
Print WebAddress______________  Destination_________________________________________________ FirstClick_________________ SecondClick________________    DealClick_________________________   LinkClick2________________________  DocClick___________________________________ PayInterval   DueDay  Step2Pass__________     QaRule_________________________________________________________________________________________________________________
0     http://www.tda-sgft.com/  d:\\$YYYYMM{$n}\\raw\\remit\\wl\\CXPEN1_apl.pdf              Mortgage Loan               ABS                            Caixa Penedes 1 TDA                  MAINPAGE - FAIL                     Fund´s Allocation                           q1                    Step3                   qa_regexp=Report D?d?ate\\s+\\d\\d\/$MM{$n}\/$YYYY{$n}
0     http://www.tda-sgft.com/  d:\\$YYYYMM{$n}\\raw\\remit\\wl\\CXPEN1_bond.pdf             Mortgage Loan               ABS                            Caixa Penedes 1 TDA                  MAINPAGE - FAIL                     Investors information on Payment Date       q1                    Step3                   qa_regexp=PAYMENT DATE:\\s+$aCAPMONTHNAMES[$MM{$n}-1].+$YYYY{$n}
0     http://www.tda-sgft.com/  d:\\$YYYYMM{$n}\\raw\\remit\\wl\\CXPEN1_bond.pdf             Mortgage Loan               ABS                            Caixa Penedes 1 TDA                  MAINPAGE - FAIL                     Investors information on Payment Date       q1                    Step3                   qa_regexp=PAYMENT DATE:\\s+$aCAPSHORTMONTHNAMES[$MM{$n}-1] \\d\\d.+? ?.? $YYYY{$n}
0     http://www.tda-sgft.com/  d:\\$YYYYMM{$n}\\raw\\remit\\wl\\CXPEN1_bond.pdf             Mortgage Loan               ABS                            Caixa Penedes 1 TDA                  MAINPAGE - FAIL                     Investors information on Payment Date       q1                    Step3                   qa_regexp=PAYMENT DATE:\\s+$aCAPMONTHNAMESSPANISH[$MM{$n}-1] \\d\\d.+? ?.? $YYYY{$n} 
```

我希望它吐出什么：

```
[settings]
email_to=people
special_websurf_processing=1
period_0_1_only=1
crc_recheck=0
[macro]
%::WebSurfRules =
    (
    '1'     => 'NAVIGATE,phHttpDest->\{\'WebAddress\'\}', 
    '2'     => 'CLICK_REFERENCE,phHttpDest->\{\'FirstClick\'\}',                                                         
    '3'     => 'CLICK_REFERENCE,phHttpDest->\{\'SecondClick\'\}',                                 
    '4'     => 'CLICK_REFERENCE,phHttpDest->\{\'DealClick\'\}',
    '5'     => 'CLICK_REFERENCE,phHttpDest->\{\'LinkClick2\'\}',                     
    '6'     => 'CLICK_REFERENCE,phHttpDest->\{\'DocClick\'\}',           
    );

[data]
Print WebAddress______________  Destination_________________________________________________ FirstClick_________________ SecondClick________________    DealClick_________________________   LinkClick2________________________  DocClick___________________________________ PayInterval   DueDay  Step2Pass__________     QaRule_________________________________________________________________________________________________________________
0     http://www.tda-sgft.com/  d:\\$YYYYMM{$n}\\raw\\remit\\wl\\CXPEN1_apl.pdf              Mortgage Loan               ABS                            Caixa Penedes 1 TDA                  MAINPAGE - FAIL                     Fund´s Allocation                           q1                    Step3                   qa_regexp=Report D?d?ate\\s+\\d\\d\/$MM{$n}\/$YYYY{$n}
0     http://www.tda-sgft.com/  d:\\$YYYYMM{$n}\\raw\\remit\\wl\\CXPEN1_bond.pdf             Mortgage Loan               ABS                            Caixa Penedes 1 TDA                  MAINPAGE - FAIL                     Investors information on Payment Date       q1                    Step3                   qa_regexp=PAYMENT DATE:\\s+$aCAPMONTHNAMES[$MM{$n}-1].+$YYYY{$n}
0     http://www.tda-sgft.com/  d:\\$YYYYMM{$n}\\raw\\remit\\wl\\CXPEN1_bond.pdf             Mortgage Loan               ABS                            Caixa Penedes 1 TDA                  MAINPAGE - FAIL                     Investors information on Payment Date       q1                    Step3                   qa_regexp=PAYMENT DATE:\\s+$aCAPSHORTMONTHNAMES[$MM{$n}-1] \\d\\d.+? ?.? $YYYY{$n}
0     http://www.tda-sgft.com/  d:\\$YYYYMM{$n}\\raw\\remit\\wl\\CXPEN1_bond.pdf             Mortgage Loan               ABS                            Caixa Penedes 1 TDA                  MAINPAGE - FAIL                     Investors information on Payment Date       q1                    Step3                   qa_regexp=PAYMENT DATE:\\s+$aCAPMONTHNAMESSPANISH[$MM{$n}-1] \\d\\d.+? ?.? $YYYY{$n} 
```

每次点击 phHttpDest 和操作都与该`[data]`部分的标题相关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T17:49:04.470

因此，一种方法是使用一组正则表达式替换来创建新格式的文件。我没有完全理解你的格式规则，所以我通常实现了整个事情，但有一些差异。您必须进入并进行一些调整以对其进行微调。output.txt 文件是使用您的示例作为 input.txt 时生成的文件

**代码**

```
import re
data = open('input.txt').read()
data = re.sub(r"    'Step([0-9]+)' =>\s+{\s+action\s+=> ", r"    '\1'     => ", data)
data = re.sub(r"',\s+pass\s+[^,]+,", "", data)
data = re.sub(r"',\s+accept_multi_match\s+[^,]+,", "", data)
data = re.sub(r"\n +#.*\n", "\n", data)
data = re.sub(r"',\s+fail\s+[^,]+,", "", data)
data = re.sub(r"',\s+matchtype\s+[^,]+,", "", data)
data = re.sub(r"',\s+inputstring\s+=> '", ",", data)
data = re.sub(r"\s+matchstring\s+=> '", ",", data)
data = re.sub(r"\n        },", "',", data)
open('output.txt', 'w').write(data) 
```

**输出.txt**

```
[settings]
email_to=people
special_websurf_processing=1
period_0_1_only=1
crc_recheck=0

[macro]
%::WebSurfRules =
    (
    '1'     => 'NAVIGATE,http://www.tda-sgft.com/TdaWeb/jsp/fondos/Fondos.tda',',
    '2'     => 'CLICK_REFERENCE,phHttpDest->\{\'FirstClick\'\}',
    '3'     => 'CLICK_REFERENCE,phHttpDest->\{\'SecondClick\'\}',',
    '4'     => 'CLICK_REFERENCE,phHttpDest->\{\'DealClick\'\}',
    '5'     => 'CLICK_REFERENCE,phHttpDest->\{\'LinkClick2\'\}',
    '6'     => 'CLICK_REFERENCE,phHttpDest->\{\'DocClick\'\}',',
    '7'     => 'CLICK_DOWNLOAD_OK',',
    );

... 
```

# css - Wordpress 中的图片导航菜单

> ID：13532702
> 
> 赞同：1
> 
> 时间：2012-11-23T16:22:20.657
> 
> 标签：css, wordpress, menu, image, nav

我会向你寻求帮助，因为我找不到这个问题的解决方案太久了。

是否有一些简单的方法可以用css来用一些图标替换wordpress菜单中的文本？[我需要在http://www.monetaria.cz](http://www.monetaria.cz)的主菜单中插入图片。我尝试在菜单项的规范中使用类，对于擦除文本我使用了 text-indent bud 它解决了这个问题

[https://picasaweb.google.com/lh/photo/idGdXrE_x3LLDWvJQ-doyKHTNTSbdw6n6xqWnRyE6B8?feat=directlink](https://picasaweb.google.com/lh/photo/idGdXrE_x3LLDWvJQ-doyKHTNTSbdw6n6xqWnRyE6B8?feat=directlink)

非常感谢，

约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-19T19:33:43.597

您可以将 HTML 直接添加到菜单项中，WP 会正确呈现它，所以如果您添加类似这样的内容

```
<img src="source.jpg" /> 
```

进入`Label`自定义链接的字段并输入您希望菜单项进入该字段的任何链接`URL`，然后 WP 会将`<img>`标签呈现为图像并将其包装在指向您指定 URL 的链接中

# c# - 寻找一种将字符串列表转换为有效列表的干净方法 在 C# 中

> ID：13532704
> 
> 赞同：6
> 
> 时间：2012-11-23T16:22:22.767
> 
> 标签：c#, c#-4.0

我希望找到一种更好的方法（也许有一个很好的 linq 表达式）将像“41,42x,43”这样的字符串列表转换为有效的 long 列表。下面的代码有效，但感觉很难看。

```
string addressBookEntryIds = "41,42x,43";
var ids = addressBookEntryIds.Split(new[] {',', ';'}, StringSplitOptions.RemoveEmptyEntries);
var addressBookEntryIdList =new List<long>();
foreach (var rec in ids)
{
    long val;
    if (Int64.TryParse(rec, out val))
    {
        addressBookEntryIdList.Add(val);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T16:37:02.070

```
string addressBookEntryIds = "41,42x,43";

Func<string, long?> safeParse = (s) => {
            long val;
            if (Int64.TryParse(s, out val))
            {
                return val;
            }
            return null;    
};

var longs = (from s in addressBookEntryIds.Split(new[] {',', ';'}, StringSplitOptions.RemoveEmptyEntries)
            let cand = safeParse(s)
            where cand.HasValue
            select cand.Value).ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T16:25:50.247

使用正则表达式

```
var list = Regex.Matches(@"41,42x,43", @"\d+").Cast<Match>().Select(x => Convert.ToInt64(x.Value)).ToList(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-25T00:31:03.673

这是另一个 LINQ 版本：

```
String addressBookEntryIds = "41,42x,43";
Int64 val = 0;

addressBookEntryIds
  .Split(new[] {',', ';'}, StringSplitOptions.RemoveEmptyEntries)
  .Where(id => Int64.TryParse(id, out val))
  .Select(id => val)
  .ToList() 
```

如果您更喜欢查询表达式，可以使用：

```
from id in addressBookEntryIds.Split(new[] {',', ';'}, StringSplitOptions.RemoveEmptyEntries)
where Int64.TryParse(id, out val)
select val 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T16:34:11.140

好吧，这是一个 LINQ 版本，但它并没有那么丑陋！

```
string addressBookEntryIds = "41,42x,43";
var ids = addressBookEntryIds.Split(new[] { ',', ';' }, StringSplitOptions.RemoveEmptyEntries);

Int64 converted;    // Working value used within the select
IEnumerable<Int64> values = ids.Select(x => new
{
    Success = Int64.TryParse(x, out converted),
    Value = converted
}).Where(x => x.Success)
  .Select(x => x.Value); 
```

此解决方案与安德森解决方案之间的区别在于`TryParse`每个条目仅调用一次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T16:31:37.663

只是您的代码的派生，非常多余（使用 TryParse 然后再次解析），但我认为它有效：

```
addressBookEntryIds.Split(new[] { ',', ';' }, StringSplitOptions.RemoveEmptyEntries)
                   .Where(id => 
                   {
                       long val;
                       return Int64.TryParse(id, out val);
                   })
                   .Select(id => Int64.Parse(id)); 
```

# c# - Visual Studio 可以等到我下线再向我展示问题吗？

> ID：13532705
> 
> 赞同：4
> 
> 时间：2012-11-23T16:22:22.687
> 
> 标签：c#, visual-studio-2010, editor

我喜欢（几乎）关于语法错误和未使用变量等的即时反馈。但我发现在我输入时突出显示和取消突出显示内容会分散注意力。有没有办法让该功能保持打开状态，但让它等到我下线检查它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:56:48.457

As far as I know, it's not possible.

What you can do is disable the real-time semantic error highlighting, so as to get semantic errors reported only when you compile. You can also get rid entirely of error highlighting.

Both options are under `Tools > Options > Text editors > C# > Advanced`.

# c# - MVC 4 IntelliSense 在 Visual Studio 2010 的 Razor 中不起作用

> ID：13532711
> 
> 赞同：3
> 
> 时间：2012-11-23T16:22:43.993
> 
> 标签：c#, visual-studio-2010, razor, asp.net-mvc-4, intellisense

我正在使用带有 ASP.NET MVC4 的 Visual Studio 2010，并且 IntelliSense for Razor 语法在应用程序的视图中对我不起作用。

我能做些什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T16:37:37.467

也引用自

[http://sebnilsson.com/1091244048/making-mvc-3-razor-intellisense-work-after-installing-mvc-4-beta/](http://sebnilsson.com/1091244048/making-mvc-3-razor-intellisense-work-after-installing-mvc-4-beta/)

> 安装 MVC 4 Beta 后，IntelliSense 会在 Visual Studio 2010 中的 MVC 3 应用程序中中断 Razor 视图。这在发行说明中有所说明，但通常没有人阅读这些内容。
> 
> 这次问题的解决方案实际上列在那些发行说明中。您需要在 web.config 中明确说明引用的版本号。
> 
> 添加新的 appSettings-entry 以明确说明要使用的网页版本：

```
 <appSettings>
     <add key="webpages:Version" value="1.0.0.0"/>
     <!-- ... --> 
 </appSettings> 
```

> 然后您必须编辑您的 .csproj 文件，您需要在其中找到对 System.Web.WebPages 和 System.Web.Helpers 的引用，并确保它们具有明确的版本号，如下所示：

例如：

```
<Reference Include="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL"/>  

<Reference Include="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" /> 
```

--

> 希望这将在 MVC 4 的最终版本中得到解决，或者可能是对 Razor v1 中版本的引用在 MVC 3 项目中过于松散。

还有一个类似的问题 [MVC 3 Visual Studio 2010 Razor Model intellisense not working](https://stackoverflow.com/questions/10075821/mvc-3-visual-studio-2010-razor-model-intellisense-not-working)

此外，您可能需要安装[VS 2010 SP1](http://www.microsoft.com/en-us/download/details.aspx?id=23691)。

**编辑**：

另请参阅此页面上的***必需更新***
[http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253815](http://www.asp.net/whitepapers/mvc4-release-notes#_Toc303253815)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-23T21:25:01.267

我的问题是在 Views\web.config 中我引用了旧版本的 mvc。（我将我的项目从 V3 迁移到 V4）我更新了版本并重新启动，我现在有了智能感知

# python - Windows 多处理

> ID：13532712
> 
> 赞同：2
> 
> 时间：2012-11-23T16:22:50.990
> 
> 标签：python, windows, multiprocessing

正如我发现的那样，在多处理方面，Windows 有点像猪，我对此有疑问。

pydoc 声明您应该[在使用 multiprocessing 时保护 Windows 应用程序的入口点](http://docs.python.org/2/library/multiprocessing.html#windows)。

这是否仅意味着创建新进程的代码？

例如

## 脚本 1

```
import multiprocessing

def somemethod():
    while True:
        print 'do stuff'

# this will need protecting
p = multiprocessing.Process(target=somemethod).start()

# this wont
if __name__ == '__main__':
    p = multiprocessing.Process(target=somemethod).start() 
```

在此脚本中，您需要将其包装在 if **main**中，因为生成进程的行。 **但如果你有呢？**

## 脚本 2

**文件1.py**

```
import file2
if __name__ == '__main__':
    p = Aclass().start() 
```

**文件2.py**

```
import multiprocessing
ITEM = 0
def method1():
    print 'method1'

method1()

class Aclass(multiprocessing.Process):
    def __init__(self):
        print 'Aclass'
        super(Aclass, self).__init__()

    def run(self):
        print 'stuff' 
```

**在这种情况下需要保护什么？** **如果文件 2 中有 if __main__ 会发生什么，如果正在创建进程，其中的代码会被执行吗？**

*注意：我知道代码不会编译。这只是一个例子。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T17:55:06.450

> pydoc 声明您应该在使用多处理时保护 Windows 应用程序的入口点。

我的解释不同：文档说明

> 新的 Python 解释器可以安全地导入主模块，而不会导致意外的副作用（例如启动新进程）。

因此，导入您的模块 ( `import mymodule`) 不应创建新进程。也就是说，您可以通过使用

```
if __name__ == '__main__':
    ... 
```

因为 ... 中的代码只会在您的程序作为主程序运行时运行，也就是说，当您这样做时

```
python mymodule.py 
```

或者当您将其作为可执行文件运行时，而不是当您运行`import`文件时。

因此，要回答您关于 的问题`file2`：不，您不需要保护，因为在`import file2`.

另外，如果你放一个`if __name__ == '__main__'`in `file2.py`，它不会运行，因为它`file2`是导入的，而不是作为主程序执行的。

**编辑：** [这](https://stackoverflow.com/questions/2697640/multiprocessing-bomb)是一个示例，说明当您不保护创建进程的代码时会发生什么：它可能只是循环并创建大量进程。

# asp.net-mvc - 尝试将 JSON.stringify 对象发布到 aspnet mvc 控制器 - 错误请求

> ID：13532715
> 
> 赞同：0
> 
> 时间：2012-11-23T16:23:30.377
> 
> 标签：asp.net-mvc, json, jquery, bad-request, iis-8

我正在尝试发布存储在隐藏字段中的 JS 对象：

```
$("#hdnArr").val(JSON.stringify(arr));

<pre>

    $.ajax({
                url: form.action,
                type: 'POST',
                data: $(form).serialize(),
                success: function (result) {
                   //
                },
                error: function (xhr, textStatus, exceptionThrown) {
                   //
                }
            });

</pre> 
```

在本地它工作正常，但在生产服务器（带有 IIS 8 的 Windows 2012 服务器）中，它返回错误请求错误。使用 Firebug，我检查了我的隐藏值是这样的：

```
hdnArr=%5B%7B%22Type%22%3A%22%22%2C%22TypeB%22%3A%22%22%2C%22TypeC%22%3A%22%22%2C%22TypeD%22%3A%22%22%7D%5D 
```

这个问题基本上是`%`性格。我怎样才能让我的服务器接受这个字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:43:10.500

好的，我可以解决这个问题，只需将托管管道从应用程序池切换到经典模式。

# objectify - Objectify - 如何使用指向不存在实体的父键创建子实体

> ID：13532717
> 
> 赞同：2
> 
> 时间：2012-11-23T16:23:43.580
> 
> 标签：objectify

鉴于在 Objectify 中，实体组不是由类定义的，而是由实例定义的，并且您可以使用指向不存在实体的父 Key 创建子实体，您将如何做到这一点？（我正在寻找一个简单的例子。上面的陈述来自 Objectify 文档，我很困惑。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:12:10.873

只需创建一个具有任意 id 的 Key。一个简单的例子：

```
class Foo {
    @Parent Key<Par> parent;
    @Id Long id;
    // ...constructors, etc
}

// Create a parent key for which an entity may or may not exist, doesn't matter
Key<Par> parent = Key.create(Par.class, 123L);

Foo foo = new Foo(parent, someId);
ofy().save().entity(foo).now(); 
```

# html - 在元素之前使用而不是在元素中包装元素有什么好处？

> ID：13532719
> 
> 赞同：1
> 
> 时间：2012-11-23T16:23:52.830
> 
> 标签：html, css, fonts, icons, font-face

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:43:31.367

我能想到的唯一优点就是`<i>`写起来更短（而不是通过网络发送，因为 gzip 不太关心它的 i 或跨度为 20 个字母的类），并且它与其他标记不同。它就像图标的自制标签。

但是没有任何其他语义价值`<i>`。

> i 元素代表一段文本以另一种声音或语气，或以其他方式偏离正常散文，例如分类名称、技术术语、来自另一种语言的惯用短语、思想、船名或其他一些散文，其典型的印刷表示是斜体。

[http://www.w3.org/International/questions/qa-b-and-i-tags/](http://www.w3.org/International/questions/qa-b-and-i-tags/)

那么它是语义的吗？不，但没有人在乎，没什么大不了的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:43:45.623

[这里提到](https://stackoverflow.com/questions/1652099/just-noticed-the-i-tag-on-twitter-did-they-make-that-up/10230076#10230076)的一点可能是一个原因 - 节省字节..

对我来说它很容易使用..

# javascript - 从输入字段附加到 a.href id

> ID：13532722
> 
> 赞同：1
> 
> 时间：2012-11-23T16:24:01.890
> 
> 标签：javascript, jquery, forms, hyperlink

我正在尝试向带有 id 的链接附加一个从输入文本字段输入的值。我来了这么远搜索stackoverflow，但id不起作用！

```
<script type="text/javascript">
 jQuery(function(){
   $("#txt_name").keypress(function() {
     var value = $("#txt_name").val();
     });
   $("a#coupon_link").attr("href", function(i) {
      return href + '&discount_code='.text(value); 
      });
});
</script> 
```

这就是 html 的样子

```
<form>
  <fieldset>
    <input id="txt_name" type="text" value="discount" />
  </fieldset>
</form>
<a id="coupon_link" href="https://www.e-junkie.com/ecom/gb.php?c=cart&i=XXXXXX&cl=YYYYYY&ejc=2" target="ej_ejc" class="ec_ejc_thkbx" onClick="javascript:return EJEJC_lc(this);"><img src="http://www.e-junkie.com/ej/ej_add_to_cart.gif" border="0" alt="Add to Cart"/></a> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:32:21.983

你可能是这个意思：

```
$(function() {
   $("#coupon_link").on('click', function(e) {
      e.preventDefault(); // apparently not needed
      location.href = $(this).attr('href') + '&discount_code=' + encodeURIComponent($('#txt_name').val());
   });
}); 
```

您不必更新`#txt_name`on keypress 的值；您只需在按下链接时使用该值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T16:27:42.663

像这样修复您的代码：

```
$(function(){
   $("#txt_name").keypress(function() {
     var value = $("#txt_name").val();
     var link = $("#coupon_link");
     var originalHref = link.attr('originalHref');
     if (!originalHref) {
          originalHref = link.attr("href");
          link.attr("originalHref", originalHref)
     }
     link.attr("href", originalHref + '&discount_code='+value);
   });
}); 
```

有几点需要注意：

*   当您通过 ID 定位元素时，切勿向选择器添加任何内容
*   您的值变量不在同一范围内
*   的返回`val`可以直接拼接，不用尝试改成文本
*   在您的情况下，您不需要将函数传递给 attr
*   您正在尝试使 href 随每次击键而增长。这是一个坏主意。我提出的解决方案是保留原来的href
*   如果您不确定原始 href 是否还有一些参数（即有“？”），您应该对其进行测试（我让您这样做）

总体而言，更清洁的解决方案不是更改链接，而是在单击链接时构建 href：

```
$("#coupon_link").click(function(e) {
   location = this.href + '&discount_code=' + $('#txt_name').val();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T16:27:03.723

不确定是否理解，但它看起来像是一个范围问题，试试这个 javascript：

```
<script type="text/javascript">
 jQuery(function(){
   var value = 0;
   $("#txt_name").keypress(function() {
       value = $("#txt_name").val();
       $("a#coupon_link").attr("href", function(i) {
          return href + '&discount_code=' + encodeURIComponent(value); 
        });
    });
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T16:27:51.040

您可能需要在按下某个键时更改 href，而不仅仅是在页面加载时。为此，您必须在 keyup 函数中替换 href，如下所示：

```
$(function(){
    var link = $("a#coupon_link");
    link.data('href', link.attr("href"));

    $("#txt_name").on('keyup', function() {
        link.attr("href", link.data('href') + '&discount_code='+ this.value); 
    });
}); 
```

为了不附加`&discount_code=***`多次，您需要将原始 href 存储在某处，例如数据属性中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T16:28:17.567

我认为你需要这个：

```
<script type="text/javascript">
 $(function(){
   $("#txt_name").keypress(function() {
     var value = $("#txt_name").val();
      $("a#coupon_link").attr("href",href+'&discount_code='+value.toString);
    });

});
</script> 
```

看看`href` 不知道你在哪里有那个 var，如果需要，请删除它

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-23T16:30:43.273

试试这个：

```
jQuery(function(){
    $("#txt_name").keypress(function() {
        var value = $("#txt_name").val();
        $("a#coupon_link").attr("href", '&discount_code=' + String(value));
    });
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-23T16:33:38.157

这不起作用，因为在触发按键事件之前调用函数时未更改 href。考虑用 blur 替换 keypress 并在调用 blur() 时更新 href

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-06T08:59:28.797

这对我有用，可以从输入字段中获取值并将其附加到使用 jquery 的现有链接中。

```
$('#qty').on('keyup', function() {
           var theQty = 0;
           theQty = $("#qty").val();
           var oldHref=$("a#buybtn").attr("href");
            $("a#buybtn").attr("href",oldHref+ '&qty=' + String(theQty));

}); 
```

# node.js - 如何在猫鼬中为属性设置自定义设置器？

> ID：13532723
> 
> 赞同：3
> 
> 时间：2012-11-23T16:24:18.083
> 
> 标签：node.js, mongoose

在我捍卫了类似的模式之后，如何为模式属性定义设置器

```
var User = new Schema({email:String}) 
```

如何为该`email`属性定义 setter，例如：

```
User.email.setter(function ...) 
```

?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T16:58:59.783

我找到了解决方案。自定义属性可以设置为

```
User.path("email", {
    set: function(email) {
        return email
    }
}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-08T16:49:45.860

对于那些来到这里寻找自定义设置器的人，文档对此保持沉默，但可以使用 Schema`set`和`get`属性：

```
mongoose.Schema({ email: { type: String, get: val => `Email me at ${val}` } }) 
```

如果有人可以将我链接到文档中涵盖的位置，我会很乐意添加链接。

# jsf - 从 Xml 创建 JSF：可能吗？

> ID：13532724
> 
> 赞同：0
> 
> 时间：2012-11-23T16:24:18.597
> 
> 标签：jsf

是否可以从 XML 文件创建 JSF 页面？例如，我制作了一个 XML 文件，其中包含我想要在 jsf 页面上创建和显示的组件，在加载时，解析 xml 并创建组件并显示。要么是不可能的，是否有替代解决方案（更好的方法）来做到这一点？

# java - 用于跨程序复制/粘贴的用户定义字符串

> ID：13532725
> 
> 赞同：1
> 
> 时间：2012-11-23T16:24:23.553
> 
> 标签：java, copy, paste

我正在尝试构建一个程序，用用户定义的快捷方式补充和替换 Windows 快捷方式。目前，我正在构建一个复制/粘贴功能，但不知道如何将复制的对象移动到我以外的程序中。我尝试使用 Robot 类根据字符串中特定索引处的值来模拟按键，但这不允许我传递 VKEY 常量以外的变量。

在程序之间复制和粘贴文本的方法需要什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:51:14.843

如果您考虑使用 JavaFX：有一个 Clipboard 类，它声称可以获取系统剪贴板，但我没有尝试过它是否适用于（非 JavaFX）应用程序：

[http://docs.oracle.com/javafx/2/api/javafx/scene/input/Clipboard.html](http://docs.oracle.com/javafx/2/api/javafx/scene/input/Clipboard.html)

**编辑：**

还有一个基于 AWT 的剪贴板：[http ://docs.oracle.com/javase/7/docs/api/java/awt/datatransfer/Clipboard.html](http://docs.oracle.com/javase/7/docs/api/java/awt/datatransfer/Clipboard.html)

# path - cmake 和“CMakeLists.txt”文件继承

> ID：13532726
> 
> 赞同：0
> 
> 时间：2012-11-23T16:24:40.040
> 
> 标签：path, cmake

我对cmake有这个问题：

在顶层 CMakeLists.txt 中：

```
set(MY_INCLUDE_DIR "/path/to/dir") 
```

在较低级别的 CMakeLists.txt 中：

```
include_directories(${MY_INCLUDE_DIR}) 
```

GCC 通过 make 命令返回一个“没有这样的文件或目录”，相对于包含位于`MY_INCLUDE_DIR`.
但是，如果我在指定包含目录的同一较低级别文件中移动设置行，一切都很好。

在文档中清楚地写道，较低级别的文件继承了较高级别的文件。

我的文件有什么问题？

谢谢。

# qt - 尝试在 Blackberry Cascades 10 Beta 3 SDK（C++、QT、QML）中打开相机

> ID：13532727
> 
> 赞同：0
> 
> 时间：2012-11-23T16:24:43.567
> 
> 标签：qt, camera, qml, blackberry-simulator, blackberry-cascades

我正在尝试在 Blackberry Cascades 10 Beta 3 SDK（C++、QT、QML）中打开相机，然后在打开后对其进行响应。我正在使用 Dev Alpha Simulator，并且在尝试打开它后，我不断收到错误“上下文：无法找到 ID 为 ### 的目标节点”（连续多次，其中 ### 是某个数字）。这可能是因为我没有可供模拟器使用的实际相机（我正在尝试查看是否可以为相机编写部分功能 - 然后在我实际上有一个可供黑莓使用的相机时实现全部功能） ，还是我必须在 QML 文档中添加一些内容？

这是导致此问题的代码：

（在构造函数中）：

```
cameraContainer_ = root->findChild<Container*>("cameraContainer); 
```

（在打开相机的代码中）：

```
bb::cascades::multimedia::Camera camera(cameraContainer_);
connect(&camera, SIGNAL(cameraOpened()), this, SLOT(onCameraOpened());
camera.open()
qDebug() << "opening camera..." 
```

（在相机打开后的插槽中）：

```
void MyCamera::onCameraOpened(){
    qDebug() << "camera has opened";
    disconnect(&camera, SIGNAL(cameraOpened()), this, SLOT(onCameraOpened());
} 
```

（插槽在类声明中定义，类派生自 QObject 并使用 QObject 宏）：

```
#ifndef MY_CAMERA_H
#define MY_CAMERA_H

#include <QObject>

class MyCamera : public QObject {
Q_OBJECT

//... inbetween lines of code

private slots:
    void onCameraOpened();
//...
}

#endif 
```

我在控制台中得到的只是：

正在打开相机... 上下文：找不到 ID 为 644 的目标节点 上下文：找不到 ID 为 644 的目标节点 上下文：找不到 ID 为 644 的目标节点 上下文：找不到 ID 为 644 的目标节点 上下文：找不到id 为 644 的目标节点 上下文：找不到 id 为 644 的目标节点 上下文：找不到 id 为 644 的目标节点 上下文：找不到 id 为 644 的目标节点 上下文：找不到 id 为 644 的目标节点 上下文：找不到id 为 644 的目标节点 上下文：找不到 id 为 644 的目标节点 上下文：找不到 id 为 644 的目标节点 上下文：找不到 id 为 644 的目标节点 上下文：找不到 id 为 644 的目标节点 上下文：找不到id 为 644 的目标节点上下文：找不到 id 为 644 的目标节点上下文：找不到 ID 为 644 的目标节点上下文： 找不到 ID 为 644 的目标节点上下文： 找不到 ID 为 644 的目标节点上下文： 找不到 ID 为 644 的目标节点上下文： 找不到 ID 为 644 的目标节点上下文：找不到 ID 为 644 的目标节点上下文： 找不到 ID 为 644 的目标节点上下文： 找不到 ID 为 644 的目标节点上下文： 找不到 ID 为 644 的目标节点上下文： 找不到 ID 为 644 的目标节点上下文：找不到 ID 为 644 的目标节点上下文： 找不到 ID 为 644 的目标节点上下文： 找不到 ID 为 644 的目标节点上下文： 找不到 ID 为 644 的目标节点上下文： 找不到 ID 为 644 的目标节点上下文：找不到 ID 为 644 的目标节点上下文： 找不到 ID 为 644 的目标节点上下文：找不到 id 为 644 的目标节点

（有时该数字与 644 不同，但通常非常接近该数字）。

我还在 bar-descriptor.xml 下添加了这些行

```
<permission system="true">run_native</permission> 
```

他们是：

```
<permission>use_camera</permission>
<permission>access_shared</permission>
<permission>record_audio</permission> 
```

如果有人知道如何解决这个问题 - 将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T20:37:07.283

模拟器不支持相机，我想这可能是你的问题。如果您想更加确定，请尝试从 GitHub 加载现有的相机示例之一，例如[https://github.com/blackberry/Cascades-Samples/tree/master/photobomber](https://github.com/blackberry/Cascades-Samples/tree/master/photobomber)并查看您是否遇到类似问题.

# aop - 在 RavenDb 中拦截对象创建

> ID：13532730
> 
> 赞同：2
> 
> 时间：2012-11-23T16:25:10.437
> 
> 标签：aop, json.net, ravendb

我正在尝试在从 RavenDB 加载的对象上运行一些代码，并且我需要在对象已加载其属性值之后立即执行此操作。

我尝试使用 CustomCreationConverter 并覆盖 ReadJson 来拦截反序列化过程，但是我可以访问的对象具有所有属性集，除了我需要的属性：Id。为了做到这一点，我可以在其他地方插入管道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T17:40:50.763

您看不到 ID 的原因是它不是文档的一部分，它在元数据中为`@id`.

如果你想拦截客户端，你可以注册一个自定义的*Conversion Listener*。创建一个实现`IDocumentConversionListener`并注册它的类`documentStore.RegisterListener()`。在该`DocumentToEntity`方法中，您可以运行您的自定义逻辑。一般来说，Listeners 文档缺乏，但还有另一个主题也使用它们： [http ://ravendb.net/kb/16/using-optimistic-concurrency-in-real-world-scenarios](http://ravendb.net/kb/16/using-optimistic-concurrency-in-real-world-scenarios)

另一种选择是添加一个在服务器端拦截的包。为此，您将使用[Read Trigger](http://ravendb.net/docs/server/extending/triggers/read)。

# cassandra - Cassandra 使用 YCSB 进行基准测试

> ID：13532732
> 
> 赞同：-1
> 
> 时间：2012-11-23T16:25:29.267
> 
> 标签：cassandra, benchmarking, ycsb

YCSB 0.1.4 可以用来评估 Cassandra 1.1.6 的性能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T17:26:11.607

在惠普，我们已经在 HP ProLiant Gen8s 上试用了 Cassandra 1.1.6 和 YCSB 0.1.4。我无法分享结果，但问题仅仅是“它是否有效”，而答案是“确定”。但是我们没有使用 YCSB-Cassandra 驱动程序。我们更改了 YCSB-JDBC 驱动程序——因为 CQL 的存在，现在它是可能的。我们不得不更改 YCSB 的 JdbcDBClient.java 源代码中的几行，因为 CQL 需要一个用于 INSERT 的列列表，并且因为我们必须忽略 INSERT 的错误返回。

# asp.net-mvc-3 - 为什么 RedirectToAction 没有效果

> ID：13532733
> 
> 赞同：0
> 
> 时间：2012-11-23T16:25:32.847
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

当调用带有条形码参数的方法时，RedirectToAction 完全没有任何作用。我可以看到它确实返回到 URL 中的那个路由，但是模型没有刷新并且它显示陈旧的数据。

在 SQL Server 分析器中，我可以看到没有进行调用以拉回新数据。

我怎样才能强迫这种情况发生？

顺便说一句，对：的调用`public ActionResult SRScanItem(string barcode)`本身就是来自另一个控制器的 RedirectToAction 的结果。

`RedirectToAction("SRPickCollectionItems")`我在同一个控制器的其他地方有几个调用，这些都工作正常。

知道可能是什么原因造成的吗？

```
public ActionResult SRPickCollectionItems()
{
    IEnumerable<ISRPickingItemSummary> items = 
        SRPickingItemsViewModel.
        GetDisplayableChunk(ApplicationState.CollectionId.ToString(),
                            ApplicationState.AssistantNumber);

    return View(items);            
}

public ActionResult SRScanItem(string barcode)
{
    DataLayer.Instance.AddStockroomFoundItem(barcode, ApplicationState.CollectionId, ApplicationState.AssistantNumber);
    return RedirectToAction("SRPickCollectionItems");   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:41:15.823

也许重定向将转到缓存页面。

你能试着用 SRPickCollectionItems 来装饰吗

```
[OutputCache(Duration = 0)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T09:00:54.607

您似乎没有返回 post 方法，只有 get ，因此除非您通过 actionlink 或链接标记在 get 调用中将条形码作为查询字符串参数发送，否则如何调用带有 Redirect 的方法并不明显.

通常你会有两个名为 SRPickCollectionItems 的方法。Get 方法（您已经拥有）加载视图，而 post 方法（您缺少）处理回发。post方法将是......

```
[HttpPost]
public ActionResult SRPickCollectionItemsstring barcode){
    DataLayer.Instance.AddStockroomFoundItem(barcode, ApplicationState.CollectionId,              ApplicationState.AssistantNumber);
    return RedirectToAction("SRPickCollectionItems");   
} 
```

# cocoa - 在停靠图标上方显示 NSPopover

> ID：13532735
> 
> 赞同：0
> 
> 时间：2012-11-23T16:25:36.363
> 
> 标签：cocoa, appkit, nspopover

如何在我的应用程序的停靠图标上方显示 NSPopover？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T09:53:48.920

根据您的应用程序是否正在运行，有两种方法可以自定义停靠菜单。请参阅 Apple 文档以在此处打开时对其进行自定义：

[http://developer.apple.com/library/mac/#documentation/Carbon/Conceptual/customizing_docktile/docktasks_cocoa/docktasks_cocoa.html#//apple_ref/doc/uid/TP30000986-CH3-SW1](http://developer.apple.com/library/mac/#documentation/Carbon/Conceptual/customizing_docktile/docktasks_cocoa/docktasks_cocoa.html#//apple_ref/doc/uid/TP30000986-CH3-SW1)

总而言之，您基本上在主应用程序的 XIB 或情节提要中提供了一个菜单，其中包含您要添加到停靠菜单的额外菜单选项。

要在应用程序未运行时自定义 Dock 图标的菜单，请参阅此处的指南：

[http://developer.apple.com/library/mac/#documentation/Carbon/Conceptual/customizing_docktile/CreatingaDockTilePlug-in/CreatingaDockTilePlug-in.html](http://developer.apple.com/library/mac/#documentation/Carbon/Conceptual/customizing_docktile/CreatingaDockTilePlug-in/CreatingaDockTilePlug-in.html)

基本上，您需要创建一个插件，然后将其放入应用程序的资源文件夹中。这与原始方法非常相似，但在 Finder 的停靠进程中执行。

# c# - Web 自定义控件数据的存储位置

> ID：13532737
> 
> 赞同：3
> 
> 时间：2012-11-23T16:25:38.423
> 
> 标签：c#, asp.net, viewstate

我正在创建一个扩展 WebControl 的自定义控件。此 Web 控件允许使用者在标记中定义列的集合，如下所示：

```
<Custom:CustomGrid>
<Columns>
    <Custom:DataColumn HeaderText="FirstName" />
    <Custom:DataColumn HeaderText="LastName" />
</Columns> 
```

并将 IEnumerable 放在 DataSource 属性中，然后将其呈现到表中。该控件还允许分页。DataSource 中的 IEnumerable 是完整列表，我一次显示列表的一页。我已经将当前页面、每页的行数等保存到视图状态。我是否也应该将完整列表放入视图状态？也许会话？这个列表可能会变得有点庞大。也许使用随机密钥保存在会话中，该密钥保存在视图状态中？这里的最佳做法是什么？

**编辑：**我认为强制 IEnumerable 中的所有类型都可序列化是不正确的。这公平吗？那么我需要将数据源复制到其他数据结构中进行序列化吗？

**编辑 2：**即使我确实使用基本控件而不是实现 RenderChildControls，我也需要实现 CreateChildControls，但我仍然需要将数据保存在某个地方，还是我错过了基类的要点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:07:54.697

事实上，并不是所有的`IEnumerable`实例都是可序列化的。

如果查询运行起来很便宜，我不会保留整个数据集，而只是针对不同的页面或排序顺序的更改再次运行查询。

如果您将数据置于视图状态中，您最终会得到巨大的页面。如果您没有很多用户，会话状态可能是可以接受的，但是具有大量用户的大型数据集将无法很好地扩展。如果我将一百万行绑定到您的控件怎么办？或者，如果您的控件用于转发器并在页面上显示 100 次怎么办？

你确定你需要持久化数据吗？这不是过早优化是吗？

请记住，您的控件是一个 UI 组件。视图状态应该包含足够的信息来维持 UI 状态。状态更改（例如：切换到不同的结果页面）是您的控件应将责任转交给数据源的事情。

看看好旧的`GridView`。它会显示你给它的东西并记住它。如果您正在使用分页，那么它会引发一个事件，说“用户已更改页面；给我第 x 页数据”。对我来说，这是 UI 控件的最佳实践。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T18:43:46.500

为了实现数据绑定控制，最好使用旨在执行此类任务的基类。例如，在 ASP.NET 中存在 CompositeDataboundControl，它可以用作实现自定义数据绑定控件的基类。我可以建议查看以下 Dino Esposito 文章：http: [//msdn.microsoft.com/en-us/library/aa479016.aspx](http://msdn.microsoft.com/en-us/library/aa479016.aspx)。

基本上，如果您创建像 ASP.NET gridview 这样的控件，那么它将值存储在视图状态中。更清楚地说，它是创建在视图状态中保存分配值的 DataRow 控件的数量。在回发期间，它重新创建相同数量的行，并从视图状态恢复值。如果您将仅保存数据源，例如在会话中不使用视图状态，那么您将需要在每次回发期间将数据重新绑定到您的网格。因此，如果您创建类似于 gridview 的服务器控件，那么 Dino Esposito 帖子中描述的方法将非常有用，因为它展示了如何创建类似于 ASP.NET Server GridView 控件的控件。

# arrays - 确定对象是否有尺寸

> ID：13532745
> 
> 赞同：0
> 
> 时间：2012-11-23T16:26:20.960
> 
> 标签：arrays, vb.net, collections

如何判断一个对象是否有尺寸

```
Dim ASD as new ArrayList
ASD.add("hello")
ASD.add("World")
Dim Question as boolean = ASD.GetType.IsArray 
```

然后 Question will = false 但我需要认识到它有维度。不仅适用于 ArrayList，而且适用于可以存储多个对象的任何类型的集合。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:35:56.540

可能你的意思不是“维度”？因为只有数组有维度。任何集合类型都有一个 count 属性来确定里面的元素数量。

```
 Dim asd As New ArrayList
    asd.Add("foo")
    asd.Add("bar")
    Dim elements = asd.Count 
```

顺便说一句：不要使用 Arraylist，因为它有点过时了。例如，请改用 List(of T)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:41:15.707

试试这个：

```
 Dim Question As Boolean = If(ASD.Count > 0, True, False) 
```

# jquery - jQuery悬停一个div

> ID：13532752
> 
> 赞同：1
> 
> 时间：2012-11-23T16:26:59.223
> 
> 标签：jquery, html, css

我对 jQuery 相当陌生，我真的无法理解这一点。

我正在尝试选择`<a href="contact"><div id="res">Reserveren</div></a>`.

这是我的 jQuery 代码：

```
 $(document).ready(function() {

 $('#res').hover(
    function () {
    $(this).animate({backgroundColor: "#fff" });
    },
    function () {
    $(this).animate({backgroundColor: "#000" });
    }

  }); 
```

但是，没有任何效果。它根本没有改变任何东西......我做错了什么？

在此先感谢，巴特

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T16:32:15.433

如果不使用[合适的插件](https://github.com/jquery/jquery-color/)或[jQuery UI 库](http://jqueryui.com/)，jQuery 不会*也不能*动画。`color`

但是，您可以使用类名来利用 CSS 过渡：

```
$('#res').hover(
    function () {
        $(this).addClass('animating');
    },
    function () {
        $(this).removeClass('animating');
    }); 
```

使用以下 CSS：

```
#res { /* default styles */
    background-color: #000;
    -moz-transition: background-color 1s linear;
    -ms-transition: background-color 1s linear;
    -o-transition: background-color 1s linear;
    -webkit-transition: background-color 1s linear;
    transition: background-color 1s linear;
}

#res.animating, /* hovered-class/animating styles */
.animating {
    background-color: #fff;
    -moz-transition: background-color 1s linear;
    -ms-transition: background-color 1s linear;
    -o-transition: background-color 1s linear;
    -webkit-transition: background-color 1s linear;
    transition: background-color 1s linear;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ZnG8C/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T16:38:00.917

片段有很多问题

*   悬停功能没有右括号。
*   *backgroundColor*不是一个属性。你会给`background-color`
*   jquery 不支持彩色动画，请查看 jquery ui 以获得对 [http://jqueryui.com/animate/的支持](http://jqueryui.com/animate/)

    ```
    $(document).ready(function() {
         $('#res').hover(
            function () {
                $(this).animate({"font-size": "90px" });
            },
            function () {
                $(this).animate({"font-size" : "12px" });
            }
        );
    }); 
    ```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T16:41:30.663

```
$(document).ready(function() {
   $('#res').hover(
    function () {
        $(this).css('background-color' ,'#fff');
    },
    function () {
      $(this).css('background-color' ,'#000');
  })
}); 
```

或使用这个插件： http: [//www.bitstorm.org/jquery/color-animation/](http://www.bitstorm.org/jquery/color-animation/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T16:29:04.317

删除动画

```
$('#res').hover(
    function () {
        $(this).css("background","#fff");
    },
    function () {
        $(this).css("background","#000");
    }
); 
```

更好的是更改选择器的类

```
$('#res').hover(
    function () {
        $(this).addClass("on");
    },
    function () {
        $(this).removeClass("on");
    }
); 
```

# vb.net - VB - 使用 XPath 读取 XML 的问题

> ID：13532753
> 
> 赞同：1
> 
> 时间：2012-11-23T16:27:00.497
> 
> 标签：vb.net, xpath

我目前正在尝试从传递给我的方法的文件路径中读取 XML 节点。

```
Public Function ReadXMLForIsite(xmlFileName As String)
    Dim IsitePath As String
    Dim doc As New XPathDocument(xmlFileName)
    Dim nav As XPathNavigator
    Dim iter As XPathNodeIterator

    nav = doc.CreateNavigator
    iter = nav.Select("GovTalkMessage/Header") 'Node name
    'Loop through the records in that node
    While iter.MoveNext
        Dim lstNav As XPathNavigator
        'Get the data we need from the node
        Dim iterNews As XPathNodeIterator
        lstNav = iter.Current
        iterNews = lstNav.SelectDescendants(XPathNodeType.Element, False)
        'Loop through the child nodes
        While iterNews.MoveNext
            Debug.WriteLine(iterNews.Current.Name & ": " & iterNews.Current.Value)
        End While
    End While

    Return IsitePath
End Function 
```

每次我运行此方法（即使使用不同的节点名称）时，变量“iter”都会指出“调试器显示代理是一种类型，不能用作表达式”。这发生在 while 语句之前，因此不会进入。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:35:19.793

尝试将您的加载`Xml`到`XDocument`.

```
Dim xdoc As XDocument = XDocument.Load("X:\Jacob.Freeman\RTI\TestXML\0001R.xml")
Dim headerNode = xdoc.Descendants.First(Function(x) x.Name.LocalName = "Header")
For Each desc In headerNode.Descendants()
  Console.WriteLine(desc.Name.LocalName + ":" + desc.Value)
Next
Console.ReadLine() 
```

# java - Eclipse用java折叠

> ID：13532755
> 
> 赞同：0
> 
> 时间：2012-11-23T16:27:04.863
> 
> 标签：java, eclipse, folding, code-folding

如果我在编写 public 并自动按空格时尝试在两个折叠的方法之间编写一个方法，则在 java 折叠文件中使用 eclipse，ide 会在下面的方法中折叠 public 一词。

```
State initial 
   - public methodA()
   - public methodC()

Step 1:
   - public methodA()
     public 
   - public methodC()

Eclipse bug
   - public methodA()
   - public methodC() //Error because public is declared twice! 
```

如果我更快地编写该方法，则不会出现问题。任何形式来避免这种奇怪的行为而不禁用代码折叠？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T17:33:52.327

除了禁用折叠之外，你真的只有几件事可以做。即使您刚刚键入的“public”被折叠到以下方法中，它仍然存在于文本中，并且光标仍然位于最后一个字母之后。你可以：

*   继续输入，公众将变得可见，之前折叠的以下方法也是如此。不过，这将通过格式化。
*   按 Enter。这会将您移至下一行并展开以下方法，但它会将您输入的代码与下一个方法分开。您在“公共”之后的下一行，但格式保持良好。只需输入退格键，光标就会回到正确的位置，您可以从那里继续输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T03:49:40.623

我所做的是在要插入代码的位置之前展开方法。然后它实际上并没有将新文本折叠到以前的（折叠的）方法中。但最简单的方法可能是不折叠代码并使用大纲视图在文件中导航。

# sitecore - 将时事通讯页面嵌入页面模板

> ID：13532756
> 
> 赞同：1
> 
> 时间：2012-11-23T16:27:09.580
> 
> 标签：sitecore, sitecore6, sitecore-ecm

我已经了解了如何在 CMS 网站上可视化时事通讯。

要求：

*   建立时事通讯
*   允许用户在其浏览器上可视化时事通讯
*   CMS 网站的时事通讯页面部分。
*   CMS 页面是相同的 - 标题/导航菜单 .... + 将更改的主要内容（一页将是简单的文本/另一页将显示文章，另一页将显示时事通讯）

我做了什么：

*   我已经通过 ECM 模块构建了一个时事通讯。时事通讯已正确发送到组。（发送时事通讯，时事通讯已移至发送/2012/11 文件夹）。
*   当用户点击链接“查看时事通讯进入在线模式时，他们会被正确地重定向到在线页面。

正如要求中提到的，我需要在网页中查看时事通讯。主要内容应参考newsletter.aspx。

我的假设是使用一种布局并通过一个参数（如 OnlineMode = true）我会显示页眉或不显示。在 Outlook 上，不会显示标题，一旦用户单击以在 CMS 上可视化新闻稿，标题和菜单就会显示。

或者，我是否必须将时事通讯页面引用到另一个布局（将包含标题和菜单）？-> 将 newsletter.aspx 映射到占位符 MainContent ？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:54:39.887

`Util.IsMessageBodyRequest()`返回`false`一个通常的网页请求。它返回`true`一个“消息”请求。您可以在控件（子布局）中使用它。

# android - android应用程序长时间运行时挂起

> ID：13532757
> 
> 赞同：2
> 
> 时间：2012-11-23T16:27:19.527
> 
> 标签：android, standby

我有一个 Android 应用程序，它监听一个端口并根据它听到的内容更新屏幕。这完美无缺。当我让应用程序运行 20-30 分钟时，就会出现问题。在此期间，屏幕会因为省电（显示）而变黑。在此之后，应用程序要么变得无响应，要么完全挂起。我怀疑是不是内存泄漏。无法弄清楚如何调试此问题。任何指针？TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:29:01.960

可能有一些变量丢失了，尝试使用 和 方法保存和恢复您的 Activity 的`onSaveInstanceState()`状态`onRestoreInstanceState()`。

检查[https://stackoverflow.com/a/151940/1434631](https://stackoverflow.com/a/151940/1434631)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:35:41.963

我正在为 android 构建一个小部件，同样的事情也发生在我身上。我认为问题在于进程被破坏并不时重新启动，然后您的所有变量都失去了价值。您应该使用内容提供者来存储它们，然后在丢失时获取它们。

# meteor - 在每个 Meteor.autosubscribe 中订阅多个发布还是一个？

> ID：13532759
> 
> 赞同：1
> 
> 时间：2012-11-23T16:27:23.163
> 
> 标签：meteor

这是正确的做法？

```
Meteor.autosubscribe ->
    session1 = Session.get 'session1'
    session2 = Session.get 'session2'
    session3 = Session.get 'session3'
    Meteor.subscribie 'collection1', session1
    Meteor.subscribie 'collection2', session2
    Meteor.subscribie 'collection3', session3 
```

或者

```
Meteor.autosubscribe ->
    session1 = Session.get 'session1'
    Meteor.subscribie 'collection1'

Meteor.autosubscribe ->
    session2 = Session.get 'session2'
    Meteor.subscribie 'collection2'

Meteor.autosubscribe ->
    session3 = Session.get 'session3'
    Meteor.subscribie 'collection3' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:43:35.847

因为第一个示例将在 1 个 Session 更改时撕毁所有订阅。这是个坏主意。因此，第二个示例将是执行此操作的首选方式。

# javascript - 如何 在 JavaScript 中找到换行符并替换为元素？

> ID：13532761
> 
> 赞同：9
> 
> 时间：2012-11-23T16:27:40.447
> 
> 标签：javascript, search, line, break

我正在尝试使用 javascript 查找和替换文本中的换行符。

以下作品。它将字符 a 替换为字符 z。

```
var text = "aasdfasdf";
text= text.replace(/a/g,"z");
alert(text); 
```

以下基于此和其他留言板上的其他帖子没有。基本上javascript不会触发：

```
var text = "aasdfasdf";
text= text.replace(/\n/g,"z");
alert(text); 
```

...这是许多建议它应该起作用的帖子之一。

[JavaScript：如何向 HTML 文本区域添加换行符？](https://stackoverflow.com/questions/863779/textarea-line-breaks-javascript)

顺便说一句，以下内容在 Firefox 中也不适用于我：

```
text = text.replace(/\n\r?/g, '<br />'); or
text = text.replace("\n", '<br />'); 
```

注意：我意识到文本变量中没有换行符。我只是使用一个简单的字符串进行测试。

谁能看到可能出了什么问题，或者告诉我一种真正可行的方法。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-23T16:30:19.407

我会通过处理`\r\n`（序列），然后处理`\r`并`\n`通过字符类来覆盖我的赌注，如下所示：

```
text = text.replace(/\r\n/g, '<br />').replace(/[\r\n]/g, '<br />'); 
```

第一次替换将序列`\r\n`变为`<br />`. 第二个替换用字符串替换自己找到的任何`\r`或字符。`\n`

更多关于 JavaScript 中的正则表达式的[信息](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T16:41:30.757

要处理 Windows 换行符，请尝试

```
text = text.replace(/\r\n/g, '<br />').replace(/[\r\n]/g, '<br />'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T16:51:42.030

ECMAScript 将字符串中的换行符标准化为“\n\r”，而 DOM 将字符串中的换行符标准化为“\n”。这两种操作系统都与这些格式无关：

*   窗户 - CRLF
*   Unix-LF
*   旧 Mac - CR

完成此任务的正确方法取决于您接收字符串的方式以及将其写出的方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-21T19:17:07.813

两种类型的行尾的另一种解决方案

```
str.replace(new RegExp('\r?\n','g'), '<br />'); 
```

# c# - Monodroid 设计器缺少设备配置

> ID：13532768
> 
> 赞同：3
> 
> 时间：2012-11-23T16:28:03.660
> 
> 标签：c#, android, xamarin.android, xamarin

Monodroid 设计师一直工作到昨天，现在它丢失了设备配置的预配置列表，我不知道如何找回它们。在此发生之前，我认为可能与此相关的唯一系统更改是我尝试更新 Android SDK 和平台工具，这可能曾经失败过一次，但重试了，现在它们都更新好了。也许这让 monodroid 设计师松了这些配置。我打开 Monodevelop，设计师也想念它们。有没有人看到这种情况发生或知道如何恢复它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T23:15:28.380

更新后我也遇到了这种情况。

您需要完全卸载 Android SDK 和 Mono for Android 并重新安装它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T11:51:48.483

更新到适用于 Android 4.4.38 的 Mono

# primefaces - Primefaces 售货亭

> ID：13532778
> 
> 赞同：1
> 
> 时间：2012-11-23T16:28:57.427
> 
> 标签：primefaces, var

我正在使用 Mysql 数据库，我的页面上有一些输入字段，根据用户输入，我需要在我的数据库中搜索相应的记录。

记录格式：

KioskId Location TransactionId UserName 1 Nashik 1001 Sumit 2 Pune 1002 Ankita

对于上述记录，我宣布了一类

结果VO.java

```
public class ResultVO{
private Long kioskId;
private Long transactionId;
private String location;
private Long userName;

} 
```

我的实现

在托管 bean

## 算盘MB.java

```
public class AbacusMB{
private List<ResultVO>recordVOList;
public void searchRecord(){
//Mysql query

Which will give me result set

for(i=0;i<resultset.size;i++){
ResultVO record=new ResultVO();

record.setkioskId(resultSet.getLong(0));
//in this way i will set all the properties of this vo
and add this object to list which is used to display records in dataTable
recordVOList.add(record);

}
} 
```

* * *

搜索.xhtml

```
<p:dataTable value=#{abacusMB.recordVOList} var=record>
<p:column headerText="Kiosk Location">
<h:outputText value=record.location>
<p:column headerText="Transaction Id">
<h:outputText value=record.transactionId>
</p:dataTable> 
```

* * *

但是在屏幕上根据记录的数量添加行但不显示值???????????????????

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T19:56:42.450

您忘记对每条记录使用 EL 表示法。

```
 <h:outputText value="#{record.location}"/>

<h:outputText value="#{record.transactionId}"/> 
```

另外，请确保关闭所有标签。

# python - 字段的python装饰器

> ID：13532780
> 
> 赞同：6
> 
> 时间：2012-11-23T16:29:01.307
> 
> 标签：python, design-patterns, decorator

我知道没有这样的事情。这就是为什么我正在寻找一些不错的等价物。有这个类：

```
class MyClass:
   a = 5
   b  = "foo"
   c = False 
```

我想将字段 a 和 b 组合在一起，以便能够以某种方式仅迭代来自该组的成员。所以最好有某种现场装饰器，比如：

```
class MyClass:
   @bar
   a = 5
   @bar
   b  = "foo"
   c = False 
```

并且有一些像 myDir(MyClass, 'bar') 这样会返回 ('a', 'b') 的函数。

到目前为止，我们有哪些选择？1\. 按特殊约定命名这些字段，例如“a_bar”、“b_bar”——但不幸的是我不能这样做。2\. 将名称列表作为另一个类成员 - 我想让这个分组属性接近属性，所以我不喜欢这种方法。3.我可以创建从整数和字符串继承的类，并添加另一个基类，如“Group”，然后检查类型，而不是将 5 分配给“a”和“foo”，这样我就必须生成这个类每次我有新的类型，所以我也不喜欢这个解决方案。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T16:52:39.347

装饰器只是函数调用的语法糖，因此要将装饰器应用于属性，您只需在初始化程序上调用它：

```
a = bar(5) 
```

在您的情况下，您可以创建实现描述符协议的对象：

```
class GroupedAttribute(object):
    def __init__(self, group, obj):
        self.group = group
        self.obj = obj
    def __get__(self, obj, owner):
        return self.obj
    def __set__(self, obj, value):
        self.obj = value 
```

为了优雅，您可以为属性组编写一个类：

```
class GroupedAttribute(object):
    def __init__(self, group, obj):
        self.group = group
        self.obj = obj
    def __get__(self, obj, owner):
        return self.obj
    def __set__(self, obj, value):
        self.obj = value

class AttributeGroup(object):
    def __call__(self, obj):
        return GroupedAttribute(self, obj)
    def __get__(self, obj, owner):
        return BoundAttributeGroup(self, obj, owner)

class BoundAttributeGroup(object):
    def __init__(self, group, obj, owner):
        self.group = group
        self.obj = obj
        self.owner = owner
    def __dir__(self):
        items = dir(self.owner if self.obj is None else self.obj)
        return [item for item in items if
                getattr(self.owner.__dict__.get(item, None),
                        'group', None) is self.group] 
```

用法：

```
class MyClass(object):
    bar = AttributeGroup()
    a = bar(5)
    b = bar("foo")
    c = False
dir(MyClass.bar)    # ['a', 'b'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:40:02.677

如果您想保留变量名称以供以后参考，您可以使用字典。因此，您的对象内的这段代码......

```
self.dict_bar_props = {}

self.dict_bar_props["a"] = 5
self.dict_bar_props["b"] = "foo"
self.dict_bar_props["c"] = False 
```

...当您稍后访问对象的属性时会给您这个结果：

```
objectName = myObject()
objectName.dict_bar_props["a"]
>> 5 
```

如果您想将变量名称完全分开，但稍后根据定义的命名约定找到它们，那么您可以使用一些 hacky，它只返回以“bar_”为前缀的变量名称，例如：

```
import re
varnames = dir(objectName)
list_of_property_names    = [ a for a in varnames if re.match("bar_", a) ] 
```

# c++ - 为什么我可以在私有类型上使用 auto ？

> ID：13532784
> 
> 赞同：148
> 
> 时间：2012-11-23T16:29:16.300
> 
> 标签：c++, c++11, auto, private-members

我对以下代码编译和运行感到惊讶（vc2012 & gcc4.7.2）

```
class Foo {
    struct Bar { int i; };
public:
    Bar Baz() { return Bar(); }
};

int main() {
    Foo f;
    // Foo::Bar b = f.Baz();  // error
    auto b = f.Baz();         // ok
    std::cout << b.i;
} 
```

这段代码编译是否正确？为什么它是正确的？为什么我可以`auto`在私有类型上使用，而我不能使用它的名称（如预期的那样）？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-11-23T16:32:37.470

在大多数情况下，规则`auto`与模板类型推导相同。发布的示例的工作原理与您可以将私有类型的对象传递给模板函数的原因相同：

```
template <typename T>
void fun(T t) {}

int main() {
    Foo f;
    fun(f.Baz());         // ok
} 
```

你问，为什么我们可以将私有类型的对象传递给模板函数？因为只有类型的名称是不可访问的。该类型本身仍然可用，这就是为什么您可以将其返回给客户端代码的原因。

* * *

## 回答 #2

> 赞同：112
> 
> 时间：2012-11-23T16:36:57.903

访问控制应用于**名称**。与标准中的此示例进行比较：

```
class A {
  class B { };
public:
  typedef B BB;
};

void f() {
  A::BB x; // OK, typedef name A::BB is public
  A::B y; // access error, A::B is private
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-05-02T09:29:39.517

chill和R. Martinho Fernandes都已经很好地回答了这个问题。

我就是不能放弃用哈利波特类比回答问题的机会：

```
class Wizard
{
private:
    class LordVoldemort
    {
        void avada_kedavra()
        {
            // scary stuff
        }
    };
public:
    using HeWhoMustNotBeNamed = LordVoldemort;

    friend class Harry;
};

class Harry : Wizard
{
public:
    Wizard::LordVoldemort;
};

int main()
{
    Wizard::HeWhoMustNotBeNamed tom; // OK
    // Wizard::LordVoldemort not_allowed; // Not OK
    Harry::LordVoldemort im_not_scared; // OK
    return 0;
} 
```

[https://ideone.com/I5q7gw](https://ideone.com/I5q7gw)

感谢昆汀提醒我哈利的漏洞。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-02-18T02:56:59.310

为了添加其他（好的）答案，这里有一个来自 C++98 的例子，它说明这个问题真的`auto`与

```
class Foo {
  struct Bar { int i; };
public:
  Bar Baz() { return Bar(); }
  void Qaz(Bar) {}
};

int main() {
  Foo f;
  f.Qaz(f.Baz()); // Ok
  // Foo::Bar x = f.Baz();
  // f.Qaz(x);
  // Error: error: ‘struct Foo::Bar’ is private
} 
```

不禁止使用私有类型，它只是命名类型。例如，在所有版本的 C++ 中，都可以创建该类型的未命名临时对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-19T22:21:58.057

对于其他来到这里并需要解决方法的人（例如，声明一个接受私有类型的函数），这就是我所做的：

```
void Func(decltype(Foo().Baz()) param) {...} 
```

# asp.net - 网络标记，评论似乎不起作用

> ID：13532788
> 
> 赞同：1
> 
> 时间：2012-11-23T16:29:30.727
> 
> 标签：asp.net, visual-studio-2010, internet-explorer-9, markup

我在本地运行一个网站，它运行良好。这些页面出现在 IE9 的本地 Intranet 区域中。一位客户说他们遇到了一些 javascript 控件无法正常工作的问题。他们正在查看它的互联网区域，我猜它受到更多限制。我想从 Visual Studio 2010 运行我的网站，但让页面出现在 Internet 区域中，以便我可以复制问题。我读到使用 Microsoft 网站上定义的“网络标记”评论将允许我这样做。下面显示的是我的母版页的顶部。“”行应该可以解决问题，但是当我右键单击 IE 并选择属性时，页面总是出现在 Intranet 区域中。我从 Visual Studio 运行它，并且该站点托管在 IIS 中。我应该更改任何其他设置吗？

```
<%@ Master Language="C#" AutoEventWireup="true" Inherits="xpThemed" Codebehind="xpThemed.master.cs" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<!-- saved from url=(0014)about:internet -->

<html xmlns="http://www.w3.org/1999/xhtml" >    
<head runat="server">
.
.
etc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T17:00:35.873

“ [Web 标记](http://msdn.microsoft.com/en-us/library/ms537628%28v=vs.85%29.aspx)”仅适用于从本地文件系统加载的页面，不适用于从本地 Web 服务器提供的页面。

如果您需要强制页面在 Internet 区域中加载，您可以关闭 Intranet 区域设置中的“自动检测”选项，或者使用计算机的[FQDN](http://en.wikipedia.org/wiki/Fully_qualified_domain_name)加载页面。

# c++ - 指向我的 Inventory.h 中的向量时出错

> ID：13532790
> 
> 赞同：0
> 
> 时间：2012-11-23T16:29:41.793
> 
> 标签：c++, vector, header

嘿，我试图在inventory.h中找到我的向量，这样我就拥有了主要的所有向量功能，比如push_back、pop等......而不是输入所有的函数，比如pop、push，我想要一个指针来工作但我得到了错误。任何人都可以帮助我并告诉我我是否走在正确的道路上。

提前致谢。

这是我的代码：

**库存.h**

```
//-------------------------------------------------------------------------------
//  Inventory.h
//-------------------------------------------------------------------------------

#ifndef INVENTORY_H
#define INVENTORY_H
#include <string>
#include <vector>

using namespace std; 
class Inventory 
{
public:
    //Constructor
    Inventory();

    //Methods.
    string add(string item);
    void displayInventory();
    void showInventory();
    //vector<string> &GetContainer();
private:
    //Data members
   vector<string> inventory;
   vector<string>::iterator myIterator;
   vector<string>::const_iterator iter;
    };

#endif //INVENTORY_H 
```

**库存.cpp**

```
#include "Inventory.h"
#include <iostream>
#include <vector>   //  To enable the use of the vector class.
#include <string>

using namespace std;

Inventory::Inventory()
{

}

string Inventory :: add(string item)
{
inventory.push_back(item);
return item;
}

void Inventory:: showInventory()
{
char input[80];
    cin >> input;
    char inventoryRequest[] = "i";
    int invent = strcmp (input,inventoryRequest);
    //compare the player input to inventoryRequest (i) to see if they want to look at inventory.
    if(invent == 0)
    {
        displayInventory();
    }

}
void Inventory:: displayInventory()
{
//vector<string> inventory;
    cout<< "You have " << inventory.size() << " items.\n";
    cout << "\n******Inventory******";
    cout<< "\nYour items:\n";
    for (int i= 0; i< inventory.size(); ++i)
        cout<< inventory[i] << endl;
} 
```

**主文件**

```
int main()
{
inventory.GetContainer().push_back("Stone");
} 
```

**以下是错误：**

```
Error   2   error LNK2019: unresolved external symbol "public: class std::vector<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::allocator<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > > > & __thiscall Inventory::GetContainer(void)" (?GetContainer@Inventory@@QAEAAV?$vector@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@V?$allocator@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@2@@std@@XZ) referenced in function _main   C:\Users\Conor\Documents\College\DKIT - Year 2 - Repeat\DKIT - Year 2 - Semester 1 - Repeat\Games Programming\MaroonedCA2\MaroonedCA2\Main.obj  MaroonedCA2
Error   3   error LNK1120: 1 unresolved externals   C:\Users\Conor\Documents\College\DKIT - Year 2 - Repeat\DKIT - Year 2 - Semester 1 - Repeat\Games Programming\MaroonedCA2\Debug\MaroonedCA2.exe MaroonedCA2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:32:35.987

看起来`Inventors::GetContainer()`缺少实现。你必须把它放在`.cpp`文件中，或者在`Inventory`类声明中内联。

在`.cpp`文件中：

```
vector<string>& Inventory::GetContainer() { return inventory; } 
```

尽管要小心，但您正在公开一个私有数据成员。如果您打算这样做，不妨将成员公开。这样，您就不会幻想自己拥有某种形式的封装。

# java - 为什么不允许在 Java 实例初始化块中抛出异常？

> ID：13532794
> 
> 赞同：13
> 
> 时间：2012-11-23T16:30:11.727
> 
> 标签：java

当我尝试在实例初始化（不是类初始化）块中抛出异常时，我收到错误：

```
initializer must be able to complete normally 
```

为什么尽管 Java 自己做却不允许呢？

下面的示例创建四个类。由于 ArithmeticException ，类`A`在实例化期间失败。这可以使用`catch`. 同样`B`失败并出现 NullPointerException。但是当我尝试自己抛出 NullPointerException 时`C`，程序无法编译。当我尝试定义我自己的 RuntimeException 时，我得到了同样的错误`D`。所以：

我怎样才能像 Java 本身那样做呢？

```
// -*- compile-command: "javac expr.java && java expr"; -*-

class expr
{
    class A
    {
        int y;
        {{ y = 0 / 0; }}
    }

    class B
    {
        Integer x = null;
        int y;
        {{ y = x.intValue(); }}
    }

    class C
    {
        {{ throw new NullPointerException(); }}
    }

    class Rex extends RuntimeException {}

    class D
    {
        {{ throw new Rex(); }}
    }

    void run ()
    {
        try { A a = new A(); }
        catch (Exception e) { System.out.println (e); }

        try { B b = new B(); }
        catch (Exception e) { System.out.println (e); }

        try { C c = new C(); }
        catch (Exception e) { System.out.println (e); }

        try { D d = new D(); }
        catch (Exception e) { System.out.println (e); }
    }

    public static void main (String argv[])
    {
        expr e = new expr();
        e.run();
    }
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-23T16:33:46.363

> 初始化程序必须能够正常完成

意味着必须有一个不抛出异常的可能的代码路径。您的示例无条件抛出，因此被拒绝。在其他示例中，静态分析还不足以确定它们在所有情况下也都抛出。

例如，

```
public class StaticThrow {
    static int foo = 0;
    {{ if (Math.sin(3) < 0.5) { throw new ArithmeticException("Heya"); } else { foo = 3; } }}
    public static void main(String[] args) {
        StaticThrow t = new StaticThrow();
        System.out.println(StaticThrow.foo);
    }
} 
```

编译，并在运行时抛出

```
Exception in thread "main" java.lang.ArithmeticException: Heya
        at StaticThrow.<init>(StaticThrow.java:3)
        at StaticThrow.main(StaticThrow.java:5) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T16:32:59.933

Java 被设计为具有最少的功能，并且只有在有充分理由这样做时才会增加复杂性。Java 不问；为什么不呢，它问；我真的需要支持吗？（即使那样有时也不会；）

初始化程序块的代码必须插入到每个构造函数中，具有编译器知道无法正常完成的块，编译器发现难以为其生成代码。

可以使编译器编译此代码，但它不太可能有任何用处。

* * *

在这种特定情况下它对您没有帮助，但知道这一点很有用......

必须声明已检查的异常，并且无法在静态或实例初始化程序块中声明已检查的异常。

相反，您可以捕获并处理或包装已检查的异常。（或使用技巧，重新抛出它）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-23T16:49:15.137

您实际上可以在初始化块中抛出异常，但如果您的异常是已检查的，则必须使用“throws”关键字标记所有构造函数。

如果你的异常总是被抛出，你会得到一个编译错误，但这样的事情是完全合法的：

类Foo {

```
{{
    if(1 == 1) {
        throw new Exception();
    }
}}

public Foo() throws Exception {

} 
```

}

希望这可以澄清一些事情。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-23T16:41:42.657

```
{ throw new Rex(); } 
```

这意味着实例将永远不会被正确初始化。应该有一些条件可以正确初始化实例。例如

```
{ if(true) { throw new Rex(); } } //It doesn't complain here 
```

* * *

如果抛出的异常是检查异常，则必须将其添加到构造函数的`throws`子句中。例如

```
public class MyObject {
    { 
        //...
            throw new Exception();
        //...
    }

    public MyObject() throws Exception {

    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-23T16:57:24.467

来自[http://www.artima.com/designtechniques/initializationP.html](http://www.artima.com/designtechniques/initializationP.html)

> 实例初始化程序中的代码可能不会返回。除了匿名内部类的情况外，只有在类中每个构造函数的 throws 子句中显式声明了已检查的异常时，实例初始化程序才能抛出已检查的异常。另一方面，匿名内部类中的实例初始化器可以抛出任何异常。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-24T12:41:21.610

Java 语言规范 (Java SE 7)的[第 8.6 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.6-100)对此进行了介绍。

> 如果实例初始化程序无法正常完成（[第 14.21 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.21)），则为编译时错误。

14.21 定义了不可达的含义。特别注意

> 如果 S 之前的语句可以正常完成，则非空块中不是 switch 块的所有其他语句 S 都是可访问的。

和

> break、continue、return 或 throw 语句无法正常完成。

更复杂的分析是可能的（并且仍然会产生警告），但这些是一组易于理解、始终如一地实施并且不会特别限制语言未来发展的规则。

那么为什么我们要拒绝带有（肯定）无法访问语句的程序呢？因为它们几乎肯定代表错误（在完成的代码中）。（`if`语句的行为特别支持狡猾的条件编译。）

没有任何无法访问的语句，那么为什么实例初始化程序必须能够正常完成（不是构造函数支持不可实例化类的要求）？因为这需要 Java 不做的非本地分析，以保持相当简单，并且可能会删除一条语句，或者只是在维护期间重新排列代码顺序。

可能值得注意的是，一些观点认为 Java 被这种相对简单的分析以及定义分配规则过于复杂。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-23T18:45:11.007

这将导致其余的语句显然无法访问，Java 试图禁止这些语句。

# php - 修复编译 magento 错误

> ID：13532795
> 
> 赞同：3
> 
> 时间：2012-11-23T16:30:14.850
> 
> 标签：php, magento

我想启用 magento 编译，但是当我启用它时，我看到以下错误：

> 警告：include_once(.../includes/src/Mage_Core_functions.php) [function.include-once]：无法打开流：第 36 行 .../app/Mage.php 中没有此类文件或目录
> 
> 警告：include_once () [function.include]：在 . ../app/Mage.php 在第 36 行
> 
> 警告：include_once(.../includes/src/Varien_Autoload.php) [function.include-once]：无法打开流：第 37 行的 /.../app/Mage.php 中没有此类文件或目录
> 
> 警告： include_once() [function.include]：在 .第 37 行的 ../app/Mage.php
> 
> 致命错误：第 53 行的 .../app/Mage.php 中找不到类“Varien_Autoload”

任何人都可以帮我修复它们吗？我希望启用编译。在互联网上，这个问题的每个答案都是禁用编译。我希望启用编译。仅供参考，我的 magento 版本是 1.7.0.0

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-24T09:03:12.320

您是否更改了目录的访问权限`/includes`？因为，编译后，编译好的源代码就在`/includes/src`目录下！

```
$ chmod o+w includes includes/config.php

# if its not work, do following
$ chmod -R 777 includes/ 
```

**修改：** 要关闭编译模式，打开文件`includes/config.php`并注释掉以下行：

```
define(’COMPILER_INCLUDE_PATH’, dirname(__FILE__).DIRECTORY_SEPARATOR.’src’); 
#define(’COMPILER_COLLECT_PATH’, dirname(__FILE__).DIRECTORY_SEPARATOR.’stat’); 
```

至

```
#define(’COMPILER_INCLUDE_PATH’, dirname(__FILE__).DIRECTORY_SEPARATOR.’src’);
#define(’COMPILER_COLLECT_PATH’, dirname(__FILE__).DIRECTORY_SEPARATOR.’stat’); 
```

如果要启用编译模式，请转到管理部分按“运行编译”按钮。

**摘要：** 我猜，你在编译过程之前忘记设置目录权限，所以编译过程没有创建编译源代码目录！

**备注：** 编译过程可能会让人头疼。在每次代码修改时，您应该重新编译或相反，您应该在修改或扩展安装之前禁用编译。一些扩展对此有麻烦。这就是为什么这么多人不想在这个选项中使用。此外，在 Magento 的 v2.0 中，编译过程下降，不再可用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T10:20:05.350

像 Oğuz Çelikdemir 推荐的那样停用编译器，然后单击“开始编译过程”（或类似的东西。在德语中是“Kompilierungsvorgang starten”）。这会启动编译过程，而不是仅仅“激活”它。这对我有用。

# c# - 加载多个大型 ADO.NET DataTables/DataReaders - 性能改进

> ID：13532800
> 
> 赞同：1
> 
> 时间：2012-11-23T16:30:36.783
> 
> 标签：c#, sql-server, vb.net, ado.net

我需要将多个 sql 语句从 SQL Server 加载到 DataTables 中。大多数语句返回大约 10.000 到 100.000 条记录，每条记录最多需要几秒钟的时间来加载。我的猜测是，这仅仅是由于需要推送的数据量。声明本身不需要太多时间来处理。

所以我尝试使用 Parallel.For() 来并行加载数据，希望整体处理时间会减少。我确实获得了 10% 的性能提升，但这还不够。一个原因可能是我的机器只是一个双核，因此限制了这里的好处。不过，将部署该程序的服务器有 16 个内核。

我的问题是，我如何才能进一步提高性能？使用异步数据服务查询会是比 PLINQ 更好的解决方案（BeginExecute 等）吗？或者也许其他一些方法？

SQl 服务器在同一台机器上运行。在部署服务器上也是如此。

编辑：我使用 DataReader 而不是 DataTable 运行了一些测试。这已经将加载时间减少了大约 50%。伟大的！我仍然想知道如果使用多处理器机器，使用 BeginExecute 进行并行处理是否会改善整体加载时间。有人有这方面的经验吗？感谢您对此的任何帮助！

更新：我发现处理 sql 语句消耗了大约一半的加载时间。在 SQL Server Management Studio 中，这些语句只花费了一小部分时间，但不知何故，它们通过 ADO.NET 花费了更长的时间。因此，通过使用 DataReaders 而不是加载 DataTables 并调整 sql 语句，我已经降低了大约 25% 的初始加载时间。使用 Parallel.For() 在并行线程中加载 DataReader 并没有改进。所以现在我对结果很满意，就这样吧。也许当我们更新到 .NET 4.5 时，我会尝试加载异步 DataReader。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T17:29:00.730

> 我的猜测是，这仅仅是由于需要推送的数据量。

不，这是由于使用了 SLOW 框架。在我的一个应用程序中，我在不到 5 秒的时间内将近一百万行放入字典中。数据表很慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T20:57:33.670

你必须改变问题的性质。老实说，每个请求谁需要查看 10.000 到 100.000 条记录？我认为没有人。

您需要考虑处理分页，在您的情况下，分页应该在 sql server 上完成。为了清楚起见，假设您有一个名为“GetRecords”的存储过程。修改此存储过程以接受页面参数并仅返回与特定页面相关的数据（假设仅 100 条记录）和总页数。内部应用程序只显示这 100 条记录（它们会飞）并处理选定的页面索引。

希望这会有所帮助，最好的问候！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T17:08:22.903

您是否经常需要加载这些请求？如果是这样，为什么不使用分布式缓存？

# ocaml - OCaml 中的 Trie 数据结构

> ID：13532802
> 
> 赞同：4
> 
> 时间：2012-11-23T16:30:45.083
> 
> 标签：ocaml, trie

我正在尝试在 OCaml中构建一个[trie ：](http://en.wikipedia.org/wiki/Trie)

```
type ('a, 'b) trie = Nil | Cons of 'a * 'b option * ('a, 'b) trie list;;

(* find place to insert key in a list of tries *)
let rec findInsert key x  =
    match x with
    [] -> Nil
    | x::xs -> let Cons(k, _, _) = x in 
        if key = k then x else findInsert key xs;;

(* inser pair in a trie *)
let rec insert ( key, value ) trie =
    match trie with
    Nil -> Cons(key, value, [])
    | t -> let Cons(k, v, trieList) = t and
        subTree = insert (key, value) (findInsert key trieList) and
        newSubTree = subTree::trieList in
        Cons(k, v, newSubTree);; 
```

但这给了我以下错误：

```
val findInsert : 'a -> ('a, 'b) trie list -> ('a, 'b) trie = <fun>
File "trie.ml", line 15, characters 54-62:
Error: Unbound value trieList 
```

编辑:: 多亏了 Virgile，我现在有了一个可以编译的程序：

```
(* insert pair in a trie *)
let rec insert ( key, value ) trie =
    match trie with
    Nil -> Cons(key, value, [])
    | t -> 
        let Cons(k, v, trieList) = t in
            let subTree = insert (key, value) (findInsert key trieList) in
            Cons(k, v, subTree::trieList);; 
```

但是当我尝试运行它时，我得到了这个：

```
# let t  = Cons(3, Some 4, []);;
val t : (int, int) trie = Cons (3, Some 4, [])
# insert (4, Some 5) t;;
Error: This expression has type (int, int) trie/1017
   but an expression was expected of type (int, int) trie/1260 
```

这些数字代表什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T16:38:18.837

您不应该使用`let x = ... and y = ... in`when `y`depends on `x`，因为由唯一绑定的所有标识符`let`都应该同时定义。改为使用`let x = ... in let y = ... in`，以确保`x`在定义`y`. 在你的情况下，这变成：

```
let Cons(k, v, trieList) = t in
let subTree = insert (key, value) (findInsert key trieList) in ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-25T21:13:43.167

在使用顶层时，如果你定义了两次相同的类型，ocaml 会看到两种类型，而不仅仅是一种。由于您的两种类型具有相同的名称`trie`，因此它们被重命名为`trie/1017`和`trie/1260`。如果您重新编译类型声明，则必须重新编译依赖此类型的所有其他声明，以便它们使用新类型而不是旧类型。

其他备注：你不应该写

```
match foo with
| a -> let PATTERN = a in 
```

你应该改用这个：

```
match foo with
| PATTERN -> 
```

# ruby-on-rails - 在 Rails 中验证 URL 域

> ID：13532803
> 
> 赞同：0
> 
> 时间：2012-11-23T16:30:59.653
> 
> 标签：ruby-on-rails, regex, validation, url

我想验证一个 URL，所以我搜索并找到[了这个](https://stackoverflow.com/questions/1128168/validation-for-url-domain-using-regex-rails)

Brian Ray 在他的帖子中说

“@Tate 的回答对于完整的 URL 来说是很好的，但是如果你想验证一个域列，你不想允许他的正则表达式允许的额外 URL 位（例如，你绝对不想允许带有路径的 URL到一个文件）。

所以我删除了正则表达式的协议、端口、文件路径和查询字符串部分，结果如下："

我完全不明白他说了什么。URL如何成为文件的路径？什么是“域列”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T08:46:39.083

一个 URL 由几个部分组成。如果您有一个非常精致的 URL，例如：

```
http://www.example.com:1234/path/to/file.html?key1=value1&key2=value2 
```

零件是：

*   协议：http://
*   主机名：www
*   域名：example.com
*   端口：1234
*   文件路径：path/to/file.html
*   查询字符串：key1=value1&key2=value2

唯一不能省略的部分是协议（但许多程序允许默认为 http://）和主机名。每个部分对其中的合法字符都有自己的要求。更糟糕的是，并非所有 Web 服务器都同意这些要求。因此，您唯一可以在不进行实际连接并查看它是否失败的情况下检查的是联系 Web 服务器所需的部分。这只是协议、主机和域名以及端口。这些都是不区分大小写的（其余的可能不区分）。我不确定主机或域名中的有效字符是什么，但这也是名称服务器可能不符合规范的地方。

简而言之，检查 URL 是否有效的唯一方法是尝试与其建立连接。如果您的程序使用一些魔法来拒绝 URL（或电子邮件地址），那么有些人会因此而讨厌您和/或他们的互联网提供商（因为即使您的检查遵循规范，某些主机或域名也不会这样做）。

至于您的问题，URL 如何引用本地文件，有一个特殊的协议：`file://`. 由于路径也必须以 / 开头，这会导致 URL 像`file:///home/user/file.html`，所以开头有三个斜杠。

# c++ - 用 lambda 迭代 std::vector 不想用 remove_if 删除

> ID：13532815
> 
> 赞同：2
> 
> 时间：2012-11-23T16:32:12.820
> 
> 标签：c++, vector, c++11, lambda, remove-if

`remove_if`使用on时，我对 lambda 表达式有一个小问题`std::vector`

我有以下一段代码：

```
 std::remove_if( openList.begin(), openList.end(), 
        [&](BoardNode& i){
            std::cout<< i.getCoordinates() << std::endl;
            std::cout<< currentNode.getCoordinates() << std::endl;
            return i.getCoordinates() == currentNode.getCoordinates(); }
        ); 
```

这没有编译器错误，但从上述语句返回 true 的元素不会从向量中删除；

我被打印在屏幕上，例如

```
[5,5]
[5,5] 
```

但`openList`仍保持原样。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T16:49:02.563

`std::remove_if`不会从向量中删除任何内容，因为它无权访问它。相反，它将您要保留的元素移动到范围的开头，使剩余的元素处于有效但未指定的状态，并返回新的结尾。

您可以使用“erase-remove”习语从向量中实际擦除它们：

```
openList.erase(
    std::remove_if( 
        openList.begin(), 
        openList.end(), 
        [&](BoardNode& i){return i.getCoordinates() == currentNode.getCoordinates();}),
    openList.end()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T16:48:24.657

我认为您打算从向量中*删除项目。*但是您所做的并**不会** *真正*从向量中删除项目，这使您认为 lambda 不起作用。您需要将`erase()`成员函数与`std::remove`.

换句话说，您必须[`erase-remove idiom`](http://en.wikipedia.org/wiki/Erase-remove_idiom)用作：

```
v.erase(std::remove_if(v.begin(), v.end(), your-lambda-goes-here), v.end()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T16:49:29.213

> 删除是通过移动范围内的元素以覆盖要擦除的元素来完成的。范围的新旧两端之间的元素具有未指定的值。返回范围新端的迭代器。保留元素的相对顺序。

[http://en.cppreference.com/w/cpp/algorithm/remove](http://en.cppreference.com/w/cpp/algorithm/remove)

另外，请检查该链接上的示例。

# parsing - 如何解析依赖父母信息的子节点？

> ID：13532818
> 
> 赞同：2
> 
> 时间：2012-11-23T16:32:19.057
> 
> 标签：parsing, compiler-construction, bison, yacc

如果我像这样在 Yacc/Bison 中编写语法文件：

```
Module
    :ModuleName "=" Functions
      { $$ = Builder::concat($1, $2, ","); }

Functions
    :Functions Function
      { $$ = Builder::concat($1, $2, ","); }
    | Function
      { $$ = $1; }

Function
    : DEF ID ARGS BODY
      {
          /** Lacks module name to do name mangling for the function **/
          /** How can I obtain the "parent" node's module name here ?? **/
          module_name = ; //????

          $$ = Builder::def_function(module_name, $ID, $ARGS, $BODY); 
      } 
```

这个解析器应该解析这样的代码：

```
main_module:
    def funA (a,b,c) { ... } 
```

在我的 AST 中，名称“funA”应重命名为`main_module.funA`. `Function`但是在解析器处理节点时我无法获取模块的信息！

是否有任何 Yacc/Bison 设施可以帮助我处理这个问题，或者我应该改变我的解析风格以避免这种尴尬的情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T18:23:53.080

有一个`bison`功能，但正如[手册](http://www.gnu.org/software/bison/manual/html_node/Actions.html#Actions)所说，请谨慎使用：

> `$N`在与当前规则匹配的标记和分组*之前*`N`，允许使用零或负值来引用堆栈上的标记和分组。这是一种非常危险的做法，要可靠地使用它，您必须确定应用规则的上下文。这是您可以可靠地使用它的情况：

 *```
 foo:      expr bar '+' expr  { ... }
         | expr bar '-' expr  { ... }
         ;

 bar:      /* empty */
         { previous_expr = $0; }
         ; 
```

> 只要仅以`bar`此处所示的方式使用，总是`$0`指.`expr``bar``foo`

更清楚地说，您可以使用中间规则操作 (in `Module`) 将模块名称推送到名称堆栈上（这必须是解析上下文的一部分）。然后，您将在规则末尾弹出堆栈。

有关中间规则操作的更多信息和示例，请参阅[手册](http://www.gnu.org/software/bison/manual/bison.html#Mid_002dRule-Actions)。*

# iphone - 动画 self.view.window.frame 变化

> ID：13532822
> 
> 赞同：0
> 
> 时间：2012-11-23T16:32:37.830
> 
> 标签：iphone, ios, xcode, cocoa-touch

我正在使用带有块的动画，并且我正在尝试对我的主窗口框架的更改进行动画处理。这是我的代码：

```
[UIView animateWithDuration:0.3f animations:^{
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
            self.view.window.frame = CGRectMake(0.0f, -20.0f, self.view.window.frame.size.width, self.view.window.frame.size.height+20);
}]; 
```

然而，它不像 self.view.frame 改变或其他东西那样动画。这只是没有动画的普通废话。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T18:30:37.627

这是错误的，窗口在 FRAME 和 Bounds 中是固定的，你不能移动窗口，它的顶部根容器并且具有恒定的大小，你应该只像这样平移和转换你的视图。

```
[UIView animateWithDuration:0.3f animations:^{
            [UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
            self.view.frame = CGRectMake(0.0f, -20.0f, self.view.frame.size.width, self.view.frame.size.height+20);
}]; 
```

# android - 更快的图像处理

> ID：13532824
> 
> 赞同：3
> 
> 时间：2012-11-23T16:32:51.500
> 
> 标签：android

有人可以建议我一个库，它可以在不将图像完全加载到内存中的情况下进行缩放、裁剪、旋转等最简单的操作吗？

情况：我需要从一个非常大的尺寸缩小图像，但缩小的图像仍然太大而无法在内存中分配（如果我们使用标准的android工具）。由于只需要上传缩小版，所以想到了通过原生库进行缩放，通过FileInputStream上传。

我尝试使用 ImageMagic 并且它可以完成工作，但是性能很差（也许有一种方法可以加快速度？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:36:36.437

可能想查看[适用于 Android 的 OpenCV](http://opencv.org/platforms/android.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T17:07:16.703

您可以通过将图像拉入内存来使用原始 Android 位图功能，但允许 Android 在加载图像之前对其进行采样。

例如：

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inSampleSize = 2;
Bitmap myBitmap = BitmapFactory.decodeStream(inputstream,null,options); 
```

这会将您的位图加载到内存中，内存占用是完整图像的一半。您可以尝试更改**inSampleSize**以使其更适合您的应用程序。

您还可以即时计算样本大小，如果您知道目标的最终图像大小，则可以在将图像加载到内存之前获取图像的当前文件大小，并使用等式*inSampleSize = OriginalSize计算样本大小/必需尺寸*。虽然样本大小最好在它是 2 的幂时使用，因此您可以对此进行调整。

编辑：这里有一个很好的例子[https://stackoverflow.com/a/823966/637545](https://stackoverflow.com/a/823966/637545)

# java - 使用 cucumber-jvm 在 SharedDriver 中未触发注释

> ID：13532825
> 
> 赞同：5
> 
> 时间：2012-11-23T16:32:55.817
> 
> 标签：java, selenium, annotations, webdriver, cucumber-jvm

这让我发疯了。我正在使用 cucumber-jvm 运行一个测试框架并试图让它截取屏幕截图。我查看了提供的 java-webbit-websockets-selenium 示例，并实现了使用 SharedDriver 模块调用我的 webdriver 的相同方法。出于某种原因，我的 @Before 和 @After 方法没有被调用（我已经在其中放置了 print 语句）。任何人都可以解释一下吗？

共享驱动程序：

```
package com.connectors;

import cucumber.api.java.After;
import cucumber.api.java.Before;
import cucumber.api.Scenario;
import org.openqa.selenium.Dimension;
import org.openqa.selenium.OutputType;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebDriverException;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.firefox.FirefoxProfile;
import org.openqa.selenium.support.events.EventFiringWebDriver;

import java.util.concurrent.TimeUnit;

public class SharedDriver extends EventFiringWebDriver {

    private static final WebDriver REAL_DRIVER = new FirefoxDriver();

        private static final Thread CLOSE_THREAD = new Thread() {
            @Override
            public void run() {
                REAL_DRIVER.close();
            }
        };

        static {
            Runtime.getRuntime().addShutdownHook(CLOSE_THREAD);
        }

        public SharedDriver() {
            super(REAL_DRIVER);
            REAL_DRIVER.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
            REAL_DRIVER.manage().window().setSize(new Dimension(1200,800));
            System.err.println("DRIVER");
        }

        @Override
        public void close() {
            if(Thread.currentThread() != CLOSE_THREAD) {
                throw new UnsupportedOperationException("You shouldn't close this WebDriver. It's shared and will close when the JVM exits.");
            }
            super.close();
        }

        @Before()
        public void deleteAllCookies() {
            manage().deleteAllCookies();
            System.err.println("BEFORE");
        }

        @After
        public void embedScreenshot(Scenario scenario) {
            System.err.println("AFTER");
            try {
                byte[] screenshot = getScreenshotAs(OutputType.BYTES);
                scenario.embed(screenshot, "image/png");
            } catch (WebDriverException somePlatformsDontSupportScreenshots) {
                System.err.println(somePlatformsDontSupportScreenshots.getMessage());
            }
        }

    } 
```

步骤文件：

```
package com.tests;

import com.connectors.BrowserDriverHelper;
import com.connectors.SharedDriver;
import com.connectors.FunctionLibrary;

import cucumber.api.Scenario;
import cucumber.api.java.After;
import cucumber.api.java.Before;
import cucumber.api.java.en.And;
import cucumber.api.java.en.Given;
import cucumber.api.java.en.Then;
import cucumber.api.java.en.When;
import cucumber.runtime.PendingException;
import org.openqa.selenium.*;

import java.io.File;
import java.util.List;
import java.util.concurrent.TimeUnit;
import static org.junit.Assert.*;
import org.openqa.selenium.OutputType;
import org.openqa.selenium.support.events.EventFiringWebDriver;

/**
 * Created with IntelliJ IDEA.
 * User: stuartalexander
 * Date: 23/11/12
 * Time: 15:18
 * To change this template use File | Settings | File Templates.
 */
public class addComponentsST {
    String reportName;
    String baseUrl = BrowserDriverHelper.getBaseUrl();
    private final WebDriver driver;

    public addComponentsST(SharedDriver driver){
        this.driver = driver;
        driver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);
    }

    @Given("^I have navigated to the \"([^\"]*)\" of a \"([^\"]*)\"$")
    public void I_have_navigated_to_the_of_a(String arg1, String arg2) throws Throwable {
        // Express the Regexp above with the code you wish you had
        assertEquals(1,2);
        throw new PendingException();
    } 
```

CukeRunner：

```
package com.tests;

import org.junit.runner.RunWith;

import cucumber.api.junit.Cucumber;

@RunWith(Cucumber.class)
@Cucumber.Options(tags = {"@wip"}, format = { "pretty","html:target/cucumber","json:c:/program files (x86)/jenkins/jobs/cucumber tests/workspace/target/cucumber.json" }, features = "src/resources/com/features")
public class RunCukesIT {
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T17:21:31.987

放入`SharedDriver`与 相同的包中`RunCukesIT`，即`com.tests`。

当使用 JUnit 运行器时，胶水变成了单元测试包（这里`com.tests`），这是 cucumber-jvm 将“扫描”类以查找注释的地方。

# linux - 如何使用 bash 有效计算 CPU 利用率？

> ID：13532828
> 
> 赞同：3
> 
> 时间：2012-11-23T16:33:10.030
> 
> 标签：linux, bash, ubuntu, cpu, utilization

我正在尝试使用 bash 计算单个 CPU、Ubuntu 系统的整体 CPU 利用率。我需要我正在制作的系统监控脚本的总体 CPU 使用百分比。问题是，当我使用以下代码时，CPU 利用率百分比始终相同：

```
top -n 1 | grep "Cpu" 
```

我发现的另一种方法是使用以下代码：

```
read cpu a b c previdle rest < /proc/stat
prevtotal=$((a+b+c+previdle))
sleep 0.5
read cpu a b c idle rest < /proc/stat
total=$((a+b+c+idle))
CPU=$((100*( (total-prevtotal) - (idle-previdle) ) / (total-prevtotal) ))
echo $CPU 
```

这段代码的问题是我不知道它是否完全准确。我有几个问题...首先为什么第一个代码会失败？第二，第二个代码可靠吗？如果不是，我可以使用什么代码来可靠地读取系统的整体 CPU 利用率？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-24T23:24:46.333

您的代码正在丢弃可能影响 CPU 利用率的 IO 等待时间。您可以参考以下链接查看每个 /proc/stat/ 条目对应的内容：

[http://man7.org/linux/man-pages/man5/proc.5.html](http://man7.org/linux/man-pages/man5/proc.5.html)

总体 CPU 利用率可以通过以下公式计算：

CPU_Util = (用户+系统+nice+softirq+steal)/(用户+系统+nice+softirq+steal+idle+iowait)

一个简单的 bash 脚本可以计算超过 50 毫秒的 CPU 利用率：

```
#!/system/bin/sh

# Read /proc/stat file
read cpu user nice system idle iowait irq softirq steal guest< /proc/stat

cpu_active_prev=$((user+system+nice+softirq+steal))
cpu_total_prev=$((user+system+nice+softirq+steal+idle+iowait))

usleep 50000

read cpu user nice system idle iowait irq softirq steal guest< /proc/stat

cpu_active_cur=$((user+system+nice+softirq+steal))
cpu_total_cur=$((user+system+nice+softirq+steal+idle+iowait))

cpu_util=$((100*( cpu_active_cur-cpu_active_prev ) / (cpu_total_cur-cpu_total_prev) ))

echo $cpu_util 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:43:20.443

sysstat 包中提供的 mpstat 相当不错

您必须使用 apt-get 安装 sysstat

# xml-parsing - 使用 CROSS APPLY 时使用参数值解析 XML

> ID：13532829
> 
> 赞同：1
> 
> 时间：2012-11-23T16:33:18.350
> 
> 标签：xml-parsing

我有以下 SQL 来解析存储在 SQL Server 表中的 XML 数据类型：

```
SELECT
   N.C.value('CustomerID[1]', 'int') value   
FROM dbo.t_xml_input
CROSS APPLY xmlcol.nodes('/Root/Customers') N(C); 
```

我想参数化节点、值和定义变量，以便我可以在游标中使用相同的 SQL 从 XML 中提取不同的数据项，例如：

```
SELECT
   N.C.value('@para1', '@para2') value   
FROM dbo.t_xml_input
CROSS APPLY xmlcol.nodes('@para3') N(C); 
```

@para 值将存储在一个表中，我将检索并循环访问该表。

这完全有可能吗？如果是的话，正确的语法是什么？

谢谢。

# html - 将格式化文本存储在数据库中以便稍后输出的好方法

> ID：13532831
> 
> 赞同：0
> 
> 时间：2012-11-23T16:33:24.853
> 
> 标签：html, mysql, css

我为我的网站撰写新闻，并将其格式化如下：

```
[h1]News[h1]
[red]Happy New Year[/red]
[white]Happy New Year[/white] 
```

新闻按原样存储在 MySQL 数据库中。然后当它被我的网站调用时，一个函数将每个代码转换为 HTML 格式。

```
[h1][/h1] = <h1></h1>
[red][/red] = <font color=red></font> 
```

很长一段时间以来我对这种方法并不满意，但现在这种代码对于 HTML5 来说已经过时了。而不是使用我应该将它添加到 CSS 中。

我是 PHP、MySQL、CSS、HTML 的初学者……真的，但我正在尝试和学习。

所以，我需要的是这个问题的最佳解决方案。

我正在考虑创建一个 CSS 规则，例如：

```
span.news-red { color=red }
span.news-white { color=white } 
```

然后他们进入红色文本的代码等......

这是一个有效的解决方案还是只是一个姑息的办法？

谢谢你。

# 编辑

我有这两个功能来转换我的文本格式以便为访问者输出。

1st = 将 [white-text][/white-text] 转换为

```
$string = preg_replace("/\[white-text\](\S+?)\[\/white-text\]/si","<font color=white>\\1</font>", $string); 
```

2nd - 将 [url][/url] 转换为

```
$string = preg_replace("/\[url\](\S+?)\[\/url\]/si","<a href=\"http://\\1\" target=\"_blank\">\\1</a>", $string); 
```

问题： WHITE-TEXT - 它只改变一个单词短语的颜色。

URL - 它工作正常，但我希望能够在 URL 的可读部分写入任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:36:10.013

通常，您希望拥有通用的文​​本样式。向他们描述你为什么要做你正在做的事情。如果我是你，我会给它们命名为它们在数据库中的内容。然后假设您认为红色只是一种可怕的颜色选择。您总是可以很容易地将其更改为不同的，只需编辑 CSS。

不知道你为什么选择红色，我不能给你太多答案，除了尝试使用与你选择红色的原因相关的 css 名称，而不是你一开始在做什么。

# java - 将 .jar 文件从我的系统复制到磁盘 - 是否有适用于 .jar 项目和非 .jar 项目的通用解决方案？

> ID：13532834
> 
> 赞同：0
> 
> 时间：2012-11-23T16:33:34.667
> 
> 标签：java, eclipse, jar

我当前的项目有一个包含依赖项的文件夹，即 .jar 文件。我想知道是否可以将这些 .jar 文件中的任何一个复制到我的磁盘上。

我目前正在将此项目开发为标准 Eclipse Java 项目，但有一天我也想将此项目部署为 .jar 文件，因此该解决方案必须同时适用于目前和未来的情况也是。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T19:35:42.323

![如何导出罐子](../Images/101638fd3864edd1150e946e61ebe86a.png)

我认为这就是你所追求的：Eclipse 有一个导出功能，它还将使用过的库 jar 打包到导出的 jar 中。

File->Export->Runnable Jar file -> Package Required library into generated JAR

# database - 将 xoops 评论转换为 Wordpress

> ID：13532836
> 
> 赞同：0
> 
> 时间：2012-11-23T16:33:38.407
> 
> 标签：database, wordpress, migration

我必须将 Xoops 项目转换为 Wordpress 项目。现在我在将 Xoops 评论转换为 Wordpress 时遇到问题。我知道存储评论的表是表“xoopscomments”，但我不知道它的字段的含义，我搜索了很多，没有发现任何关于它的信息。只是关于“XoopsComment”类。

有人知道吗？这是表的架构：

```
CREATE TABLE `xoops_xoopscomments` (
  `com_id` mediumint(8) unsigned NOT NULL auto_increment,
  `com_pid` mediumint(8) unsigned NOT NULL default '0',
  `com_rootid` mediumint(8) unsigned NOT NULL default '0',
  `com_modid` smallint(5) unsigned NOT NULL default '0',
  `com_itemid` mediumint(8) unsigned NOT NULL default '0',
  `com_icon` varchar(25) collate latin1_general_ci NOT NULL default '',
  `com_created` int(10) unsigned NOT NULL default '0',
  `com_modified` int(10) unsigned NOT NULL default '0',
  `com_uid` mediumint(8) unsigned NOT NULL default '0',
  `com_ip` varchar(15) collate latin1_general_ci NOT NULL default '',
  `com_title` varchar(255) collate latin1_general_ci NOT NULL default '',
  `com_text` text collate latin1_general_ci,
  `com_sig` tinyint(1) unsigned NOT NULL default '0',
  `com_status` tinyint(1) unsigned NOT NULL default '0',
  `com_exparams` varchar(255) collate latin1_general_ci NOT NULL default '',
  `dohtml` tinyint(1) unsigned NOT NULL default '0',
  `dosmiley` tinyint(1) unsigned NOT NULL default '0',
  `doxcode` tinyint(1) unsigned NOT NULL default '0',
  `doimage` tinyint(1) unsigned NOT NULL default '0',
  `dobr` tinyint(1) unsigned NOT NULL default '0',
  PRIMARY KEY  (`com_id`),
  KEY `com_pid` (`com_pid`),
  KEY `com_itemid` (`com_itemid`),
  KEY `com_uid` (`com_uid`),
  KEY `com_title` (`com_title`(40))
) ENGINE=MyISAM AUTO_INCREMENT=19443 DEFAULT CHARSET=latin1 COLLATE=latin1_general_ci; 
```

提前致谢！;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:44:09.807

您只需要这些字段：

1.  com_itemid（帖子 ID）
2.  com_uid ( 用户 ID )
3.  com_text（评论文本）
4.  com_status ( 状态 )
5.  com_created ( 日期 )

然后从表中获取用户信息（`uname`，`email`），而不是将所有数据插入 Wordpress表：`com_uid``users``wp_comments`

*   comment_post_ID
*   评论作者（用户名）
*   comment_author_email
*   评论内容
*   评论批准
*   评论日期

# web - 高度 = 100%，缩放时，高度不是 100%，而是可滚动的。如何？

> ID：13532844
> 
> 赞同：1
> 
> 时间：2012-11-23T16:33:56.490
> 
> 标签：web, height, scrollable

也许是一个棘手的.. 或者也许很容易！

我正在创建一个在每个设备、移动设备或台式机上大小相对相等的网站。我正在使用 html { height=100%; } 为了它。

问题是：当缩放=100% 时，站点看起来不错，但是当您在桌面上放大时（除了 safari），站点停留在高度=100%。

我希望在网站缩放时，网站可以滚动，从而使外观更平滑，因为并非所有内容都彼此狭窄，而是分散，就像网站在缩放 = 100% 时一样。

该网站目前处于以下状态： http: [//prototyping.iscs.nl/](http://prototyping.iscs.nl/)

看看，放大，你会看到我的问题。

我希望有人知道如何解决这个问题！

也许让它成为一整列，当缩放“超过”100％时，让它可滚动？

提前致谢！

# php - 调用公共子方法时自动调用父类的__call？

> ID：13532847
> 
> 赞同：1
> 
> 时间：2012-11-23T16:34:09.890
> 
> 标签：php, magic-methods

我有以下代码：

```
class A
{
    public function __call($method, $args)
    {
        echo 'Hello';
    }
}

class B extends A
{
    public function test()
    {
        echo 'Hello world';
    }
}

$b = new B();
b->test(); //outputs 'Hello world'; 
```

现在，当调用 test() 时，输出是：Hello world。但我希望它首先回显：Hello world，然后我想回显：Hello of the parent 而无需在 A 类中声明测试方法。

我该如何解决这个问题？

编辑：

对不起，也许我不够清楚，对我来自荷兰的糟糕英语感到抱歉，我想要的是当一个孩子的方法被调用时，父类得到被调用的孩子方法的名称。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T16:36:20.293

__call 是一个重载函数。这意味着当没有定义公共函数时将被调用！！！

所以要打招呼，只需调用任何其他未定义的函数

```
$b = new B();
b->notAFunction(); 
```

只会给你打招呼。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:37:27.790

你可以`parent::test()`这样称呼：

```
class B extends A {

    public function test()
    {
        echo 'Hello world';
        parent::test();
    }
} 
```

输出：

```
Hello WorldHello 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-23T16:39:52.007

您可以将 __call 重命名为 test 并在子测试开始时调用 parent::test() 。

没有办法自动执行此操作。

还要指出，如果你用两个下划线命名 __call，访问修饰符应该是私有的，而 _call 是受保护的。

# ios - 想要转换为 AFNetworking 并且必须设置 setReachabilityStatusChangeBlock 来处理可达性并在不可达时返回新的控制器

> ID：13532851
> 
> 赞同：0
> 
> 时间：2012-11-23T16:34:30.950
> 
> 标签：ios, ios5, afnetworking

第一次使用 AFNetworking（也是一个兼职的 iOS 开发人员）并且有一个快速的问题（和非常基本的问题）。我们如何使用 setReachabilityStatusChangeBlock？我们有一个名为 ApiClient 的单例类，它可以进行所有调用。

我认为理想情况下我们希望在通用方法中设置它以返回单例。我看到这个[AFNetworking (AFJSONRequestOperation) 转换为 AFHTTPClient](https://stackoverflow.com/questions/9411364/afnetworking-afjsonrequestoperation-convert-to-afhttpclient)但老实说，我只是不知道我们在哪里/如何调用这个方法。

其次，我想返回一个不可访问的控制器（或提供一种将其“重定向”到不可访问的控制器的方法）。我该怎么做？

提前谢谢

# javascript - 可以在dom中重新排序iframe吗？

> ID：13532853
> 
> 赞同：3
> 
> 时间：2012-11-23T16:34:44.183
> 
> 标签：javascript, dom, iframe

我有一个页面，其中有几个动态创建的 iframe 都在一个 div 中。我想在该 div 中动态重新排序它们而不刷新它们和/或丢失它们的 contentWindow。

如果我尝试 insertBefore 这不起作用，我最终会丢失我试图移动的 iframe 的内容。

有没有一种方法可以做到这一点，而不需要绝对位置并且必须设置顶部和左侧？如果可能的话，为了简单起见，我仍然希望能够使用相对定位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:55:20.403

唯一想到的方法是设置一个等于 iframe 的 contentWindow / contentDocument 的变量。然后使用任何您想要重新定位或删除它并创建一个新的方法，然后将它的 contentWindow / contentDocument 设置为您之前存储的变量。

* * *

PS我是一个业余iframer，所以请随时告诉我这个想法是否愚蠢，但请不要害怕。

# c# - 类没有实现接口，代码仍然可以编译

> ID：13532854
> 
> 赞同：0
> 
> 时间：2012-11-23T16:34:46.723
> 
> 标签：c#, interface

我需要创建一个实现 IBindingList 的自定义集合，以便能够将它与来自第 3 方的自定义控件绑定。我遇到的另一个问题是我必须使该集合线程安全，因为我同时从多个线程手动插入项目。

无论如何，我`BindingList<T>`在课堂上使用 a 作为字段，以免过多地重新发明轮子。所以我的课看起来像：

```
class ThreadSaveBindingCollection<T> : IEnumerable<T>, IBindingList
{
    BindingList<T> collection;
    object _lock = new object();

    // constructors
    public ThreadSaveBindingCollection(IEnumerable<T> initialCollection)
    {
        if (initialCollection == null)
            collection = new BindingList<T>();
        else                            
            collection = new BindingList<T>(new List<T>(initialCollection));                                 
    }
    public ThreadSaveBindingCollection() : this(null)
    {            
    }   

    // Todo: Implement interfaces using collection to do the work    
} 
```

注意我缺少实现接口 IEnumerable 和 IBinding 列表。**我计划让该领域`collection`处理这些问题，因为它也实现了这些接口**。所以我让 Visual Studio 显式地实现接口并用`throw new NotImplementedException()`字段`collection`实现替换，最终得到如下结果：

![在此处输入图像描述](../Images/4d1e368d3df1d86bc1bc90c5cde37a91.png)

## 现在的问题是

**如果集合声称实现 IBindingList，为什么我不能在字段集合上调用方法 AddIndex！？**

![在此处输入图像描述](../Images/e7bcc45527d61b7037ec6a84068ee165.png)

**我无法对几种方法做同样的事情**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:38:28.590

它由 明确实现`BindingList`，您需要将您的引用`collection`转换`IBindingList`为使用它：

```
(collection as IBindingList).AddIndex(property); 
```

[http://msdn.microsoft.com/en-us/library/ms132679.aspx](http://msdn.microsoft.com/en-us/library/ms132679.aspx)

[进一步阅读](http://msdn.microsoft.com/en-us/library/aa288461%28v=vs.71%29.aspx)。

通过接口本身的引用显式实现和访问的要点是解决命名冲突，其中双方创建两个具有相同方法签名的单独接口 - 它允许您在实现两个接口的同时消除方法的歧义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:39:00.647

这是因为它是接口的显式实现，而不是隐式实现。这意味着您必须通过接口而不是类型本身来调用它。例如：

```
((IBindingList)collection).AddIndex(property); 
```

有关显式接口实现的更多信息，请参见[此处。](http://msdn.microsoft.com/en-us/library/ms173157.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T16:39:51.993

`BindingList`显式实现`IBindingList`，所以你需要做

```
(collection as IBindingList).AddIndex(property); 
```

# semantic-web - 微数据 - 使用 schema.org 的组织、企业或品牌标记的 itemid / 全局标识符约定

> ID：13532857
> 
> 赞同：1
> 
> 时间：2012-11-23T16:35:13.367
> 
> 标签：semantic-web, semantic-markup, schema.org

我的问题如下：在使用微数据和 schema.org 标记组织、企业或品牌时，我应该使用官方网页 URL 作为全局标识符吗？有没有更好的参考资料可供我使用（例如电影或演员的 IMDB）？

我想知道是否推荐了任何标准、约定或惯例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T07:28:46.433

最好使用某种受控词汇（例如[VIAF](http://en.wikipedia.org/wiki/Virtual_International_Authority_File "虚拟国际规范文件")）来唯一标识相关组织。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T18:54:36.103

标识符的选择是 REST 解释的一部分。[http://www.infoq.com/articles/rest-introduction](http://www.infoq.com/articles/rest-introduction)

仔细检查第一个原则（对于**约定**），尽管它是在更广泛的资源方面而不是特定于 org/biz/brand。[REST](http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm)是开启这一趋势的主题。微格式相应地使用了`rel="profile"`链接标签。该概念在[http://purl.org/](http://purl.org/)上得到了进一步扩展，因此，例如，如果 IMDB 像 W3C 一样切换到 W3，那么将来这将对您现在正在制作的应用程序的影响降到最低。在[http://www.w3.org/2011/rdfa-context/rdfa-1.1.html](http://www.w3.org/2011/rdfa-context/rdfa-1.1.html)的简介中可以看到 RDFa Dublin Core vocab 对此的使用。

（供**参考**）这些配置文件可能会更好地服务于服务于公众或开放计划（例如学术支持）的应用程序，但是当出于商业目的运营站点时，考虑到确定的各种法律问题，构建特定于应用程序的“自定义”配置文件，应该可靠地执行使用 PURL，可能有利于建立可信的声誉。

最后，WHATWG 认为前缀过于高级，而且 HTML5 仅适用于新手，因此微数据中不再支持 W3 的 XHTML xmlns/RDFa 前缀。这迫使我们重用带有微数据语法的 schema.org business/org/brand 资源的长格式 URL。然后，“自定义”配置文件在从任务完成的地方提取时仅用作善意，否则由于混淆，内容中可能会出现比实际预期更多的项目。

好消息是，Google 支持将 schema.org 用作 RDFa 语法中的词汇。因此，将 RDFa 视为源自 W3 规范的已经“活”的标准，根据应用程序的（非）商业性质，为范围命名空间定义 PURL，显示前缀的配置文件和语法（**官方网页**或替代**IRI** s ) 根据目标处理器是要走的路。目前除了模式之外没有任何词汇被处理为微数据，除了谷歌之外，任何人都不支持 RDFa 中的模式！

# parallel-processing - 同一块中的扭曲如何发散

> ID：13532858
> 
> 赞同：1
> 
> 时间：2012-11-23T16:35:14.503
> 
> 标签：parallel-processing, cuda, synchronization, gpu

我有点困惑 Warps 是如何发散并需要通过`__syncthreads()`函数同步的。Block 中的所有元素都以 SIMT 方式处理相同的代码。他们怎么可能不同步？它与调度程序有关吗？不同的经线是否有不同的计算时间？为什么使用时会有开销`__syncthreads()`？

假设我们在一个区块中有 12 个不同的 Warp，其中 3 个已经完成了他们的工作。所以现在有空闲，其他扭曲得到了他们的计算时间。还是他们仍然有计算时间来执行该`__syncthreads()`功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T17:00:53.597

首先让我们小心术语。由于代码中的控制结构（if、while 等），warp分歧是指*单个 warp*中的线程采用不同的执行路径。您的问题确实与 warp 和 warp 调度有关。

尽管 SIMT 模型可能建议*所有*线程都以同步方式执行，但事实并非如此。首先，不同块内的线程是完全独立的。它们可以以任何顺序执行。对于您关于同一块内线程的问题，让我们首先观察一个块最多可以有 1024 个（或更多）线程，但是今天的 SM（SM 或 SMX 是 GPU 内处理线程块的“引擎”）没有没有 1024 个 cuda 内核，因此理论上 SM 甚至不可能以锁步执行线程块的所有线程。请注意，单个线程块在单个 SM 上执行，*而不是*同时跨所有（或多个）SM。所以即使一台机器总共有 512 个或更多的 cuda 内核，它们也不能全部用于处理单个线程块的线程，因为单个线程块在单个 SM 上执行。（这样做的一个原因是，线程块中的所有线程都可以访问特定于 SM 的资源，例如共享内存。）

那么会发生什么？事实证明，每个 SM 都有一个 warp 调度程序。*Warp*只不过是 32 个线程的集合，它们被组合在一起、一起调度并一起执行。如果一个线程块有 1024 个线程，那么它有 32 个线程，每个线程 32 个线程。现在，例如，在 Fermi 上，一个 SM 有 32 个 CUDA 核心，因此考虑一个 SM 以同步方式执行扭曲是合理的（*即*在费米上会发生什么）。通过锁步，我的意思是（忽略经线发散的情况，以及指令级并行性的某些方面，我试图在这里保持简单的解释......）在前一条指令之前没有执行经线中的指令已被warp中的所有线程执行。因此，Fermi SM 实际上只能在任何给定时刻执行线程块中的一个扭曲。该线程块中的所有其他经线都已排队，准备就绪，等待。

现在，当一个 warp 的执行由于任何原因停止时，warp 调度程序可以自由地将该 warp 移出并带入另一个准备就绪的 warp（这个新的 warp 甚至可能不是来自同一个线程块，但我离题了。）希望现在你可以看到如果一个线程块中有超过 32 个线程，并不是所有的线程实际上都在锁步中执行。一些经线在其他经线之前进行。

这种行为通常是可取的，除非它不是。有时您不希望线程块中的*任何*线程超过某个点，直到满足某个条件。这是`__syncthreads()`为了什么。例如，您可能正在将数据从全局复制到共享内存，并且您不希望在正确填充共享内存之前开始任何线程块数据处理。 `__syncthreads()`确保所有线程都有机会复制它们的数据元素，然后任何线程可以继续越过障碍，并且可能开始对现在驻留在共享内存中的数据进行计算。

开销有`__syncthreads()`两种口味。首先，处理与此内置函数相关的机器级指令的成本非常低。其次，`__syncthreads()`通常会强制 warp 调度程序和 SM 对线程块中的所有 warp 进行洗牌，直到每个 warp 遇到障碍。如果这有用，那就太好了。但是，如果不需要，那么您就是在花时间做一些不需要的事情。因此，建议不要随意散布`__syncthreads()`您的代码。在需要的地方谨慎使用它。如果您可以设计出一种不像其他算法那样使用它的算法，那么该算法可能会更好（更快）。

# xml - XE2 XML 数据绑定向导生成的类中定义的 IXMLComponentList 在哪里？

> ID：13532861
> 
> 赞同：1
> 
> 时间：2012-11-23T16:35:31.160
> 
> 标签：xml, delphi, amazon

我在 XE2 上使用 XML 数据绑定向导从亚马逊 MWS XSD 文件生成类。不知何故，由于我无法编译，似乎缺少了一些东西，我得到了很多这样的错误：

```
[DCC Error] OrderAdjustment.pas(504): E2003 Undeclared identifier: 'IXMLComponentList' 
```

我尝试构建的 XSD 是： [https ://images-na.ssl-images-amazon.com/images/G/01/rainier/help/xsd/release_4_1/OrderAdjustment.xsd](https://images-na.ssl-images-amazon.com/images/G/01/rainier/help/xsd/release_4_1/OrderAdjustment.xsd)

IXMLComponentList 似乎不是内置 Delphi 对象的一部分，因为我在帮助文件中没有看到对它的引用。

我难住了。请帮忙。

谢谢你。

P。

# objective-c - 在 Objective-C 中定义私有变量的最佳方法

> ID：13532862
> 
> 赞同：36
> 
> 时间：2012-11-23T16:35:36.377
> 
> 标签：objective-c

我想在 MyClass.m 文件中定义私有实例变量。在我看来，有两种方法可以做到这一点：

1.  使用类扩展

    ```
    @interface HelloViewController ()
    {
         int value;
    } 
    ```

2.  在@implementation 部分定义

    ```
    @implementation HelloViewController
    {
        int value;
    } 
    ```

哪个更好？

我认为最近苹果的编码风格是使用类扩展？

例如，由“主从应用程序模板”生成的 MasterViewController.m

```
@interface MasterViewController () {
    NSMutableArray *_objects;
}
@end 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-11-23T16:46:13.960

执行此操作的“现代 Objective-C”方法是在您的实现块中声明它们，如下所示：

```
@implementation ClassName {
    int privateInteger;
    MyObject *privateObject;
}

// method implementations etc...

@end 
```

**有关更多详细信息，请参阅我之前的[这篇](https://stackoverflow.com/questions/12632285/declaration-definition-of-variables-locations-in-objectivec/12632467#12632467)文章。**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-23T16:43:26.263

```
@interface HelloViewController ()
{
    @private     //optional, this is old style
    int vale;
} 
```

> 但是，如果您正在创建一个库，理论上没有人会知道您没有在头文件中声明的任何方法。

复制自：[如何制作真正的私有实例变量？](https://stackoverflow.com/questions/1262463/how-to-make-a-real-private-instance-variable)

* * *

> 在@implementation 中声明实例变量是Obj-C 的最新功能，这就是为什么您在@interface 中看到很多带有它们的代码的原因——别无选择。
> 
> 如果您使用的编译器支持在声明它们的实现中声明实例变量，那么可能是最好的默认值 - 只有在需要其他人访问它们时才将它们放在接口中。
> 
> 在实现中声明的实例变量是隐式隐藏的（实际上是私有的）并且可见性不能更改 - @public、@protected 和 @private 不会产生编译器错误（至少对于当前的 Clang）但会被忽略。

复制自：[@interface 或 @implementation 中的私有 ivar](https://stackoverflow.com/questions/8840884/private-ivar-in-interface-or-implementation)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-10T00:40:56.410

在我看来，最好的方法是将其定义为私有属性，您可以在实现中将其作为字段或属性访问，优点是您可以通过 self 以及 _fieldName 语法访问它们，这在某些情况下很方便。

```
@interface SignUpController ()
@property ViewHeaderView*header; //private properties/fields
@property UITextField*activeField;
@property CGFloat keyboardHeight;
@end

@implementation SignUpController {

}

@end 
```

# opengl - opengl阴影错误

> ID：13532863
> 
> 赞同：0
> 
> 时间：2012-11-23T16:35:38.527
> 
> 标签：opengl

我正在尝试在opengl中绘制阴影以及红皮书中的配方[http://www.glprogramming.com/red/chapter14.html#name15](http://www.glprogramming.com/red/chapter14.html#name15)

简单地开始，我将在原点放置投射阴影的光。

我将相机放在 x,y,z = 0,1,0 沿 -ve y 轴“向下”看。

我在 y = 0.1 处画了一个 0.1 x 0.1 的正方形

```
float mx,pz,elevation;
mx = pz = elevation = 0.1;
glBegin( GL_QUADS );
glVertex3f( mx, elevation, pz);
glVertex3f( mx, elevation, pz+0.1);
glVertex3f( mx+0.1, elevation, pz+0.1);
glVertex3f( mx+0.1, elevation, pz);
glEnd(); 
```

如预期的那样显示：

![在此处输入图像描述](../Images/040c44e28b15162f1d6332d282ec2009.png)

现在我在 y = 0.5 处定义一个“地平面”（即大约在正方形和相机之间的中间位置。根据红皮书中的配方（如果我理解正确的话），阴影矩阵应该是：

```
// shadow matrix
GLfloat shadow[] = { 
    0.5,0,0,0,
    0, 0.5,0,0,
    0,0, 0.5,0,
    0,1,0,0 }; 
```

所以我添加

```
glMatrixMode (GL_MODELVIEW);
glLoadIdentity();
glMultMatrixf( shadow ); 
```

我期待在地平面上看到正方形的阴影——一个稍大的正方形。相反，我得到了一个完美的空白。

我的错误是什么？

（我已经尝试过在阴影矩阵的值和渲染正方形的高度上翻转符号的所有组合。所有这些都给我空白。）

（我也尝试用单位矩阵替换阴影矩阵 - 原来的正方形重新出现。所以这似乎排除了一个愚蠢的编码错误 - 阴影矩阵有问题。）

也许一些代数会有所帮助？

任意地平面：

一个 。x + b 。y + c 。y + d = 0

从任何光到任何顶点的向量

```
x = lx + m . ( vx - lx )
y = ly + m . ( vy - ly )
z = lz + m . ( vz - lz ) 
```

求解 m

m = - (a.lx + b.ly + c.lz + d) / (a.vx -a.lx + b.vy -b.ly + c.vz -c.lx)

现在把光放在原点

```
m = -d / ( a . vx + b . vy + c . vz )

x = m . vx
y = m . vy
z = m . vz 
```

现在将地平面放置在 y = 0.5

```
m = 0.5 / vy

x = 0.5 . vx / vy
y = 0.5
z = 0.5 . vz / vy 
```

这应该是顶点 v 的阴影撞击地面的点。事实上，手动计算这些点并将它们插入 opengl 会得到预期的显示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T16:55:01.480

好的，找到了！

[http://www.glprogramming.com/red/chapter14.html#name15](http://www.glprogramming.com/red/chapter14.html#name15)上的 opengl 红皮书指出阴影矩阵是

{-d,0,0,0, 0,-d,0,0, 0,0,-d,0, a,b,c,0 }

这不起作用。

但是，这样做：

{-d,0,0,a, 0,-d,0,b, 0,0,-d,c, 0,0,0,0 }

# regex - 如何使用 sed 保留匹配的第一个实例

> ID：13532867
> 
> 赞同：3
> 
> 时间：2012-11-23T16:35:56.780
> 
> 标签：regex, sed, sh

我在数据中有一组标记并希望去掉尾随`".[0-9]"`，但是我无法弄清楚如何正确引用正则表达式。第一场比赛应该全部由 the`.`和第二个 the`.`和一个数字组成。我打算保留第一场比赛。

```
data="thing thing__aaa.0 thing__bbb.3 thing__ccc.5 other_aaa other_bbb other_ccc.5"
data=`echo $data | sed s/\([a-zA-Z0-9_]+\)\(\.[0-9]\)/\1/g`
echo $data 
```

实际输出：

```
thing thing__aaa.0 thing__bbb.3 thing__ccc.5 other_aaa other_bbb other_ccc.5 
```

期望的输出：

```
thing thing__aaa thing__bbb thing__ccc other_aaa other_bbb other_ccc 
```

这个想法是 unquoted`([a-zA-Z0-9_]+)`是第一个匹配组，并且`(\.[0-9])`匹配`.number`. 应该用`\1`第一组替换两组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:42:53.283

刚刚怎么样

```
echo $data | sed 's/\.[0-9]//g' 
```

或者如果 number 可能包含更多数字，则

```
echo $data | sed 's/\.[0-9]\+//g' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:50:14.110

看起来您只想删除表单的所有字符串`\.[0-9]`。那么为什么不这样做：

```
sed 's/\.[0-9]+\b//g' 
```

（这依赖于 gnu sed`\b`和`+`扩展。对于其他 sed，您可以执行以下操作：

```
sed 's/\.[0-9][0-9]*\( \|$\)/\1/g' 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-23T17:08:01.243

我通常不鼓励使用特定于 shell 的扩展，但如果你使用 bash，你可能会很乐意使用数组：

```
bash$ data=(thing thing__aaa.0 thing__bbb.3)
bash$ echo "${data[@]%.[0-9]*}" 
```

请注意，这还将删除并非全为数字的扩展名（即`foo.34bb`），但可能足以满足您的需要。）

# javascript - 使用 jQuery 进行背景更改不起作用

> ID：13532872
> 
> 赞同：0
> 
> 时间：2012-11-23T16:36:29.887
> 
> 标签：javascript, jquery, jquery-ui

我有一个菜单，它使用 jQuery 插件来更改主页上 div 的内容，直到这里一切似乎都工作正常，从这里我只想用每个内容更改网站的背景图像。

我的页面中有以下标记：

```
<nav>
  <ul>
    <a id="home" href="/" class="switcher">
      <li class="link">Home</li>
    </a>
    <a id="wid" class="switcher">
      <li>Content One</li>
    </a>
    <a id="srv" class="switcher">
      <li>Content Two</li>
    </a>
    <a id="cnt" class="switcher">
      <li>Content three</li>
    </a>
  </ul>
</nav> 
```

我在我的 js 文件中编写了以下 jQuery 代码：

```
$("nav a").click(function () {
    $('body').css('background-image', 'url(../../Content/img/ ' + (this).id + '.jpg)').fadeIn('fast');
}); 
```

但这整件事不起作用，我已经搜索过了，但从这些信息中我认为我的代码没问题，当然不是。那里有一些愚蠢的错误，但我就是想不通，如果有人能为我指出这一点，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:38:23.817

你应该做

```
$(function(){
    $("nav a").click(function() {
        $('body')
          .css('background-image', 'url(../../Content/img/' + (this).id + '.jpg)')
          .fadeIn('fast');
    });
}); 
```

所以你只是忘记了 Document Ready 部分：

```
$(function(){

//put your code here

}); 
```

# ravendb - 如何将多个计数字段检索到单个用户报告中？

> ID：13532874
> 
> 赞同：1
> 
> 时间：2012-11-23T16:36:35.893
> 
> 标签：ravendb

假设我有这样的`User`课程：

```
public class User
{
   public string Id {get; set;}
   public string Name {get; set;}
} 
```

每个用户可以是导师、被指导者或两者兼而有之。这由一个`Relationship`类表示：

```
public class Relationship
{
   public string MentorId {get; set;} // This is a User.Id
   public string MenteeId {get; set;} // This is another User.Id
} 
```

现在我想生成一个报告，列出我的所有用户，并包含一个名为的字段`Mentor Count`和另一个名为`Mentee Count`. 为了实现这一点，我创建了一个`UserReportDTO`类来保存我的报告数据。

```
public class UserReportDTO
{
   public string Name {get; set;}
   public string MentorCount {get; set;}
   public string MenteeCount {get; set;}
} 
```

然后我查询我的 RavenDB 以获取所有列表`Users`并将其转换为`UserReportDTO`实例列表。

**用户服务**

```
public List<UserReportDTO> GetReportChunk(
    IDocumentSession db,
    int skip = 0,
    int take = 1024)
{
    return db.Query<User>()
            .OrderBy(u => u.Id)
            .Skip(skip)
            .Take(take)
            .ToList()
            .Select(user =>
                new UserReportDTO
                {
                    Name = user.Name,
                    MentorCount = // What goes here?
                    MenteeCount = // What goes here?
                })
            .ToList();
} 
```

如您所见，我正在努力找出检索`MentorCount`and`MenteeCount`值的最佳方法。我已经编写了一些我认为应该完成工作的 Map/Reduce 索引，但我不确定如何使用它们来实现我想要的结果。

**问题**

将多个聚合字段包含到单个查询中的最佳方法是什么？

* * *

**编辑 1**

@Matt Johnson：我已经实现了你的索引（见末尾），现在有一个有效的报告查询，如果有人感兴趣，它看起来像这样：

**工作用户报表查询**

```
public List<UserDTO> GetReportChunk(IDocumentSession db, Claim claim, int skip = 0, int take = 1024)
{
    var results = new List<UserDTO>();
    db.Query<RavenIndexes.Users_WithRelationships.Result, RavenIndexes.Users_WithRelationships>()
        .Include(o => o.UserId)
        .Where(x => x.Claims.Any(c => c == claim.ToString()))
        .OrderBy(x => x.UserId)
        .Skip(skip)
        .Take(take)
        .ToList()
        .ForEach(p =>
            {
                var user = db.Load<User>(p.UserId);
                results.Add(new UserDTO
                {
                        UserName = user.UserName,
                        Email = user.Email,
                        // Lots of other User properties
                        MentorCount = p.MentorCount.ToString(),
                        MenteeCount = p.MenteeCount.ToString()
                });
            });

    return results;
} 
```

**多图索引**

```
public class Users_WithRelationships :
        AbstractMultiMapIndexCreationTask<Users_WithRelationships.Result>
{
    public class Result
    {
        public string UserId { get; set; }
        public string[] Claims { get; set; }
        public int MentorCount { get; set; }
        public int MenteeCount { get; set; }
    }

    public Users_WithRelationships()
    {
        AddMap<User>(users => users.Select(user => new
        {
                UserId = user.Id,
                user.Claims,
                MentorCount = 0,
                MenteeCount = 0
        }));

        AddMap<Relationship>(relationships => relationships.Select(relationship => new
        {
                UserId = relationship.MentorId,
                Claims = (string[]) null,
                MentorCount = 0,
                MenteeCount = 1
        }));

        AddMap<Relationship>(relationships => relationships.Select(relationship => new
        {
                UserId = relationship.MenteeId,
                Claims = (string[]) null,
                MentorCount = 1,
                MenteeCount = 0
        }));

        Reduce = results => results.GroupBy(result => result.UserId).Select(g => new
        {
                UserId = g.Key,
                Claims = g.Select(x => x.Claims).FirstOrDefault(x => x != null),
                MentorCount = g.Sum(x => x.MentorCount),
                MenteeCount = g.Sum(x => x.MenteeCount)
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T18:29:29.130

使用已经与用户保存关系数据的模型可能会更好地为您服务。这可能看起来像：

```
public class User
{
  public string Id { get; set; }
  public string Name { get; set; }
  public string[] MentorUserIds { get; set; }
  public string[] MenteeUserIds { get; set; }
} 
```

*但是*，如果您想坚持使用您描述的模型，解决方案是摆脱多个单独的索引并创建一个包含您需要的数据的单个多地图索引。

```
public class Users_WithRelationships
           : AbstractMultiMapIndexCreationTask<Users_WithRelationships.Result>
{
  public class Result
  {
    public string UserId { get; set; }
    public string Name { get; set; }
    public int MentorCount { get; set; }
    public int MenteeCount { get; set; }
  }

  public Users_WithRelationships()
  {
    AddMap<User>(users => from user in users
                          select new
                          {
                            UserId = user.Id,
                            Name = user.Name,
                            MentorCount = 0,
                            MenteeCount = 0
                          });

    AddMap<Relationship>(relationships => from relationship in relationships
                                          select new
                                          {
                                            UserId = relationship.MentorId,
                                            Name = (string)null,
                                            MentorCount = 1,
                                            MenteeCount = 0
                                          });

    AddMap<Relationship>(relationships => from relationship in relationships
                                          select new
                                          {
                                            UserId = relationship.MenteeId,
                                            Name = (string)null,
                                            MentorCount = 0,
                                            MenteeCount = 1
                                          });

    Reduce = results => 
                from result in results
                group result by result.UserId
                into g
                select new
                {
                  UserId = g.Key,
                  Name = g.Select(x => x.Name).FirstOrDefault(x => x != null),
                  MentorCount = g.Sum(x => x.MentorCount),
                  MenteeCount = g.Sum(x => x.MenteeCount)
                };
  }
} 
```

`GetReportChunk`然后，如果您仍想投影自定义 DTO，则可以更新您的方法以查询一个索引。

```
return db.Query<Users_WithRelationships.Result, Users_WithRelationships>()
                 .OrderBy(x => x.UserId)
                 .Skip(skip)
                 .Take(take)
                 .Select(x =>
                         new UserReportDTO
                         {
                             Name = x.Name,
                             MentorCount = x.MentorCount,
                             MenteeCount = x.MenteeCount,
                         })
                 .ToList(); 
```

# php - 我如何编写一个算法来使用 php $_SESSION 将购物车中的总*数量相乘？

> ID：13532876
> 
> 赞同：-2
> 
> 时间：2012-11-23T16:36:48.423
> 
> 标签：php, session

我正在编写一个购物车并将我的数据存储在 $_SESSION 数组中，但想计算一个总数。在它下面是我认为可以做到这一点的代码，但它返回“1”而不是总数！

> `$total = array($_SESSION['qty'],$_SESSION['pr']);`

/* 我会给你更多的代码...谢谢你的帮助！！这是我的 php 购物车的代码：

```
<?php 
```

> function item_list() { if(isset($_SESSION['qty'])){ $total = array($_SESSION['qty'],$_SESSION['pr']);

```
 foreach($_SESSION['qty'] as $key => $value)
    {?>
        <tr>
    <td align="center"><?php echo $_SESSION['item'][$key]; ?></td>
    <td align="center"><?php echo $value; ?></td>
    <td align="center"><?php echo $_SESSION['pr'][$key]; ?></td>
    <td align="center"><?php echo array_product($total); ?>
    </tr><?php 
    }
} 
```

> }
> 
> session_start();
> 
> if(isset($_POST['clear']) && ($_POST['clear'] == 'clear')) { session_destroy(); 未设置（$_SESSION['数量']）；未设置（$_SESSION['item']）；未设置（$_SESSION['pr']）；未设置（$_POST['数量']）；未设置（$_POST['item']）；未设置（$_POST['pr']）；}
> 
> if(!isset($_SESSION['qty'])) $_SESSION['qty'] = array(); if(!isset($_SESSION['item'])) $_SESSION['item'] = array(); if(!isset($_SESSION['pr'])) $_SESSION['pr'] = array();
> 
> 如果（isset（$_POST['数量']））{

```
foreach($_POST['qty'] as $value)
{
    if(!$value == '') array_push($_SESSION['qty'], filter_var($value, 
```

> FILTER_SANITIZE_SPECIAL_CHARS)); } foreach($_POST['item'] as $key => $value) { if(!$_POST['qty'][$key] == '') array_push($_SESSION['item'], filter_var( $value, FILTER_SANITIZE_SPECIAL_CHARS)); } foreach($_POST['pr'] as $key => $value) { if(!$_POST['qty'][$key] == '') array_push($_SESSION['pr'], filter_var( $value, FILTER_SANITIZE_SPECIAL_CHARS)); }
> }
> 
> ?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:44:45.660

这是构建购物车的一种奇怪方式，但以下是使用该结构的方法：

```
foreach($_SESSION['qty'] as $key => $value)
{
    $total = $_SESSION['qty'][$key] * $_SESSION['pr'][$key];
?>
    <tr>
<td align="center"><?php echo $_SESSION['item'][$key]; ?></td>
<td align="center"><?php echo $value; ?></td>
<td align="center"><?php echo $_SESSION['pr'][$key]; ?></td>
<td align="center"><?php echo $total; ?>
</tr><?php 
} 
```

如果您想获得购物车的所有数量和成本的总和：

```
function getTotals()
{
    $total = array('qty' => 0, 'price' => 0);

    foreach($_SESSION['qty'] as $key => $qty)
    {
        $total['qty'] += $qty;
        $total['price'] += ($_SESSION['pr'][$key] * $qty)
    }

    return $total;
}

$total = getTotals();

echo $total['qty']; // output the total quantity of items
echo $total['price']; // output the total cost for all items and quantity 
```

不过，我会推荐一个更好的结构，例如：

```
$_SESSION['cart']['items'] = array(
    array(
        'name' => 'Screwdriver',
        'price' => 5,
        'qty' => 2,
    ),
    array(
        'name' => 'Hammer',
        'price' => 10,
        'qty' => 1,
    )
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:45:33.480

根据您的购物车数组，它不能容纳多个产品，您必须像这样使用多维数组

```
$_SESSION['cart_items'] = array(
                array( "qty"=>5, "item"=>"tshirt", "pr"=>50.20), 
                array( "qty"=>2, "item"=>"Cell Phone", "pr"=>50.20),
                array( "qty"=>7, "item"=>"", "pr"=>50.20),      
               ) 
```

然后你可以这样写你的代码

```
function item_list()    
{

    foreach($_SESSION['cart_items'] as $item_array)
    {?>
        <tr>
    <td align="center">Item:<?php echo $item_array['item']; ?></td>
    <td align="center">Qty: <?php echo $item_array['qty']; ?></td>
    <td align="center">Price :<?php echo $item_array['pr']; ?></td>
    <td align="center">Total : <?php echo $item_array['qty'] * $item_array['pr']; ?>
    </tr><?php 
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T00:01:45.157

您应该为自己创建一个`Card`能够从`$_SESSION`超全局导入/导出数据的类（或其他一些数组，如果您模拟它进行测试，测试`$_SESSION`可以是 akward），它能够轻松处理您的数据结构并可以计算总数， 也：

```
$cart = new Cart();
$cart->importFromArray($_SESSION);
// or:
$cart->importFromArray($_SESSION['cart']);

// later on:
$total = $cart->getTotal();

// somewhere else:
$cart->addItem(...);
...
$_SESSION['cart'] = $cart->exportToArray(); 
```

这将允许您随着时间的推移更轻松地更改代码。

# jquery - 使用 jquery autocomplete 自动显示命题

> ID：13532877
> 
> 赞同：0
> 
> 时间：2012-11-23T16:36:50.087
> 
> 标签：jquery, autocomplete

我从 jquery ui 实现了自动完成功能，它可以工作。唯一的问题是我必须按下向下箭头才能看到命题，我希望它能够自动完成。这可能吗 ？

到目前为止我的自动完成代码

```
function autoCompletion() {
        var splitUrl = document.URL.split('recherche');
        $.ajax({
            type: "POST",
            url: splitUrl[0] + "recherche/autocomplete",
            data: "auto="+$("#ville").val()
                  +"&academie_id="+$("#academie_id").val(),
            success: function(retour){
                var tags = retour.split(',');
            $("#ville").autocomplete({
                source: function( request, response ) {
                var matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( request.term ), "i" );
                response( $.grep( tags, function( item ){
                    return matcher.test( item );
                }) );
            },
            minLength: 1
            });
            }
        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:50:53.940

如果您有文本输入并执行以下操作：

```
$("#input_id").autocomplete({source: "search.php", minLength: 2, select: function(event,  ui){
    //do something here if needed after a element is select from the list. 
}); 
```

它应该可以工作，你只需要`search.php`返回信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T02:40:00.837

自动完成初始化的顺序应该是相反的。自动完成组件的初始化应该只发生一次，当页面加载时，查询应该自动执行。见附代码：

```
 $( "#ville" ).autocomplete({
        source: function( request, response ) {
           // Put your ajax request here
           // Put your ajax request here
           $.ajax({
               type: "POST",
               url: splitUrl[0] + "recherche/autocomplete",
               data: "auto="+$("#ville").val()
                     +"&academie_id="+$("#academie_id").val(),
               success: function(your_data){
                   // Call jquery callback
                   response( your_transformed_data );
               }
           });    
        }
  }); 
```

# html - 冻结 HTML 表格列的宽度

> ID：13532887
> 
> 赞同：1
> 
> 时间：2012-11-23T16:37:27.733
> 
> 标签：html, css, fixed

我正在尝试制作一个带有固定列的表格，并且我正在遵循这个示例：

[http://jsfiddle.net/emn13/YMvk9/](http://jsfiddle.net/emn13/YMvk9/)

容器：

```
 div { 
            width: 600px; 
            overflow-x:scroll;  
            margin-left:5em; 
            overflow-y:visible;
            padding-bottom:1px;
        } 
```

固定列：

```
.headcol {
            position:absolute; 
            width:5em; 
            left:0;
            top:auto;
            border-right: 0px none black; 
            border-top-width:3px; /*only relevant for first row*/
            margin-top:-3px; /*compensate for top border*/
        } 
```

问题是如果容器有一个固定的高度，比如 100px，固定的列会保持它的默认高度而不附加到滚动条上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:49:29.220

尝试添加一个额外的容器，您可以将其设置为相对定位。

```
div#container{
    position:relative;
    height:100px;
    overflow:scroll;
} 
```

您可以在下面的示例中看到固定行与其余行垂直滚动。

[http://jsfiddle.net/VRNsX/](http://jsfiddle.net/VRNsX/)

如果你不反对一点 jQuery，这是我制定的另一种方法：

```
$('#tbl').scroll(function(e) {
    var self = this;
    $('.headcol').each(function() {
        $(this).css({
            'top': ($(this).index('.headcol') * $(this).outerHeight() + 3) - $(self).scrollTop()
        });
    });
}); 
```

[http://jsfiddle.net/YMvk9/786/](http://jsfiddle.net/YMvk9/786/)

# javascript - 多个 HTML DOM - 解析和传输数据

> ID：13532890
> 
> 赞同：1
> 
> 时间：2012-11-23T16:37:55.280
> 
> 标签：javascript, jquery, ajax, dom, replace

我正在使用 jQuery 通过 Ajax 请求完整的 HTML5 文档。我希望能够解析它们并将元素传输到我的主页 DOM，理想情况下适用于所有主要浏览器，包括移动设备。我不想创建 iframe，因为我希望该过程尽可能快。使用 Chrome 和 Firefox，我可以执行以下操作：

```
var contents = $(document.createElement('html'));
contents[0].innerHTML = data; // data : HTML document string 
```

这将创建一个适当的文档，有点令人惊讶，只是没有文档类型。然而，在 IE9 中，可能不会使用 innerHTML 来设置元素的内容`html`。我尝试执行以下操作，但没有任何运气：

1.  创建一个 DOM，打开它，写入它并关闭它。问题：在 上`doc.open`，IE9 抛出一个名为`Unspecified error.`.

    ```
    var doc = document.implementation.createHTMLDocument('');
    doc.open();
    doc.write(data);
    doc.close(); 
    ```

2.  创建一个 ActiveX DOM。这一次，结果更好，但在文档之间传输/复制元素时 IE9 崩溃。不好，因为没有 IE8 支持（adoptNode / importNode 支持）。

    ```
    var doc = new ActiveXObject('htmlfile'); 
    doc.open();
    doc.write(data);
    doc.close();
    contents = $(doc.documentElement);
    document.adoptNode(contents); 
    ```

我正在考虑递归地重新创建元素，而不是在我的文档之间传输它们，但这似乎是一项昂贵的任务，因为我可以有很多节点要传输。我喜欢我的最后一个 ActiveX 示例，因为它很可能在 IE8 和更早版本中工作（至少用于解析）。

对此有什么想法吗？同样，我不仅需要能够解析`head`and `body`，而且还需要能够将这些新元素附加到我的主 dom 中。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T02:12:00.410

回答我自己的问题...为了解决我的问题，我使用了帖子中提到的所有解决方案，如果浏览器抛出错误，则使用 try/catch 块（哦，我们多么爱你 IE！）。以下适用于 IE8、IE9、Chrome 23、Firefox 17、iOS 4 和 5、Android 3 和 4。我还没有测试过 Android 2.1-2.3 和 IE7。

```
var contents = $('');
try {
  contents = $(document.createElement('html'));
  contents[0].innerHTML = data;
}
catch(e) {
  try {
    var doc = document.implementation.createHTMLDocument('');
    doc.open();
    doc.write(data);
    doc.close();
    contents = $(doc.documentElement);
  }
  catch(e) {
    var doc = new ActiveXObject('htmlfile'); 
    doc.open();
    doc.write(data);
    doc.close();
    contents = $(doc.documentElement);
  }
} 
```

此时我们可以使用 jQuery 查找元素。将它们转移到不同的 DOM 会产生一些问题。有几种方法可以做到这一点，但它们尚未得到广泛支持（importNode 和采用节点）和/或有问题。鉴于我们的选择器字符串称为“选择器”，下面我重新创建了找到的元素并将它们附加到“.someDiv”。

```
var fnd = contents.find(selector);
if(fnd.length) {
  var newSelection = $('');
  fnd.each(function() {
    var n       = document.createElement(this.tagName);
    var attr    = $(this).prop('attributes');
    n.innerHTML = this.innerHTML;
    $.each(attr,function() { $(n).attr(this.name, this.value); });
    newSelection.push(n);
  });
  $('.someDiv').append(newSelection);
}; 
```

# c# - 我尝试使用 EXT.NET 2.0 将文件上传到服务器

> ID：13532891
> 
> 赞同：1
> 
> 时间：2012-11-23T16:37:56.863
> 
> 标签：c#, asp.net, file-upload, ext.net

我正在尝试借助 EXT.NET 2.0 版将文件上传到服务器

在我的情况下：我写在

```
<ext:FileUploadField ID="FileUploadField1" runat="server" Width="300"><DirectEvents> 

</DirectEvents></ext:FileUploadField> 
```

`<FileSelected OnEvent="FileUploadField_FileSelected" IsUpload="true" />` 在FileSelected 不可用时给我错误

我的代码：

```
<%@ Page Language="C#" %>

<%@ Register Assembly="Ext.Net" Namespace="Ext.Net" TagPrefix="ext" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Ext.NET Example</title>
</head>
<body>
    <form runat="server">
        <ext:ResourceManager runat="server" />
        <ext:FileUploadField ID="FileUploadField1" runat="server" Width="300">
            <DirectEvents>
                <FileSelected OnEvent="FileUploadField_FileSelected" IsUpload="true" />
            </DirectEvents>
        </ext:FileUploadField>
    </form>
</body>
</html> 
```

我的 C# 代码：在此 SaveAs 选项中无效，其生成错误：

```
protected void FileUploadField_FileSelected(object sender, DirectEventArgs e)
    {
        this.FileUploadField1.SaveAs(@"D:\video1.mp4");
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T07:24:10.563

试试这个：

```
<%@ Page Language="C#" %>

<%@ Register Assembly="Ext.Net" Namespace="Ext.Net" TagPrefix="ext" %>
<script runat="server">
    protected void FileUploadField_FileSelected(object sender, DirectEventArgs e) {
        if (this.FileUploadField1.HasFile)
        {
            HttpPostedFile file = FileUploadField1.PostedFile;
            file.SaveAs(@"d:\" + file.FileName);
        } 
    }
</script>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Ext.NET Example</title>
</head>
<body>
    <form runat="server">
        <ext:ResourceManager runat="server" SourceFormatting="True" ScriptMode="Debug" />
        <ext:FileUploadField ID="FileUploadField1" runat="server" Width="300">
            <DirectEvents>
                <Change OnEvent="FileUploadField_FileSelected" IsUpload="true"></Change>
            </DirectEvents>
        </ext:FileUploadField>
    </form>
</body>
</html> 
```

# css - CSS覆盖div没有拉伸到文档高度

> ID：13532894
> 
> 赞同：1
> 
> 时间：2012-11-23T16:38:11.770
> 
> 标签：css

我有一个使用 JavaScript 附加到文档的覆盖元素。这是它的样式声明：

```
#overlay_mask {
    display: none;
    position: absolute; 
    top: 0; 
    left: 0; 
    z-index: 9999;
    width: 100%;
    height: 100%;
    background-color: #000000;
} 
```

它的大小正确地延伸到窗口的高度，但是当用户滚动时，覆盖不会跟随。

和元素设置为`html`; 和。覆盖是文档的第一个孩子。`body``width: 100%``height: 100%`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T16:40:27.017

你可以试试`position:fixed;`。叠加层仍将仅拉伸到您的窗口大小，但即使用户滚动，它也会保持原位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:39:52.883

### 要以百分比形式使用高度：

1.  设置文档类型。

    ```
    <!doctype html> 
    ```

2.  确保你已经给了父级和`html`, css`height`的百分比。

    ```
    html, body {
      width: 100%;
      height: 100%;
    } 
    ```

    > 仅当父元素具有定义的高度时，即不是`auto`. 如果它有`100%`高度，那么也必须定义父级的父级高度。这可以一直到`html`根元素。

# c++ - Boost 单元测试似乎跳过了应该执行的代码

> ID：13532895
> 
> 赞同：-1
> 
> 时间：2012-11-23T16:38:12.850
> 
> 标签：c++, unit-testing, boost

下面的 Boost 测试似乎没有像我预期的那样工作。断点显示其中的代码`BOOST_AUTO_TEST_CASE(...)`没有运行（但`BOOST_AUTO_TEST_CASE(..)`运行正常）。怎么了？

### UT_Math.cpp

```
#include "../UTest/UT_Math.h"
#include <iostream>

BOOST_AUTO_TEST_CASE(testUTMath)
{
    UTMath test;
    cout << "UTMath is started" << endl;
    test.Test1();
    cout << "Test1 is completed" << endl;
} 
```

### UT_Math.h

```
#include "../Math/Math.h"
#define BOOST_TEST_MODULE UTMathTest
#include <boost/test/unit_test.hpp>

class UTMath 
{
public:
   void Test1()
   {
      BOOST_REQUIRE(1==1);
   }
}; 
```

PS：应该使用哪些指令在 Normal/UnitTest 模式之间切换（对于 Windows 和 Unix）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T17:40:25.113

删除`main()`功能已解决问题

# fortran - Fortran中DIMENSION CLIPG(1)语句的概念理解

> ID：13532900
> 
> 赞同：2
> 
> 时间：2012-11-23T16:38:22.287
> 
> 标签：fortran

在处理一些遗留代码时，我发现了以下 Fortran 函数声明。下面的代码片段显示了函数声明和参数声明。我相信 Fortran 是一种不区分大小写的语言。

```
 SUBROUTINE CLIP2G (fcut,TIME,NUMS,NUMG,CLIPG,CLIPGL,CLIPGR,MODE,PHZ)

      real fcut, TIME,
      integer NUMS, NUMG
      DIMENSION CLIPG(1)
      REAL clipgr(1),clipgl(1)
      INTEGER MODE
      LOGICAL PHZ 
```

声明的含义是什么`DIMENSION CLIPG(1)`？

我找到了该语句的相当简洁解释的[链接](http://www.fortran.com/F77_std/rjcnf-8.html)，但主要作为 C/C++ 程序员，我发现这个概念有点难以理解。注意后面如何`REAL clipgr(1), clipgl(1)`跟一个括号`(1)`。这是一个长度 = 1 且类型为 的数组`REAL`吗？

Stack Overflow 上还有其他一些链接，但即使在下面链接的帖子中给出的类似 C 的语法中，我也不确定其含义。

[Fortran 函数说明](https://stackoverflow.com/questions/10174092/fortran-function-explanation)

也许`DIMENSION CLIPG(1)`相当于`REAL CLIPG`声明？最接近的 C 语言等价物是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T17:31:20.890

`DIMENSION`用于向编译器指示该变量是一个数组。在这种情况下，`DIMENSION CLIPG(1)`声明`CLIPG`为一个元素的数组。它也被隐式类型为 be `REAL`，因此等效声明为：

```
REAL CLIPG(1) 
```

等效的 C 构造将是

```
..., float clipg[1], ... 
```

* * *

请注意，这*可能*并不意味着它`CLIPG`实际上是一个只有一个元素的数组。它也可以用作（一种非常糟糕的）方式来向编译器解释`CLIPG`一个可变大小的数组（例如，您可以使用 5 个元素的数组调用此子例程一次，然后再次使用 50000 个元素的数组调用此子例程）。它被声明为只有一个元素，因此编译器知道它是一个数组，但是如果实际参数是一个更大的数组，它可能会被访问​​到超出其末尾的方式。这是一个非常糟糕的做法，但您会发现它在许多非常古老的 Fortran 代码中使用。

FORTRAN 77 提供了另一种描述此类数组的方法：

```
REAL CLIPG(*) 
```

或者

```
DIMENSION CLIPG(*) 
```

这样的数组称为假定大小数组。只有虚拟例程参数可以声明为假定大小的数组，并且只有数组的最后一维可以省略，例如

```
DIMENSION CLIPG2D(10,*) 
```

（但不是`DIMENSION CLIPG2D(*,10)`）

这意味着它`CLIPG2D`是一个`something x 10`矩阵（Fortran 按列存储矩阵），并且`something`可能会有所不同。每当使用假定大小的数组时，还必须明确地向例程提供省略维度的大小。

在 C 语言中，可以使用`float clipg[]`or `float *clipg`。

# java - .reverse() 不适用于 jython 中多维数组的一行？

> ID：13532903
> 
> 赞同：2
> 
> 时间：2012-11-23T16:38:25.910
> 
> 标签：java, jython, python

我最近一直在玩 Jython，我发现了一些奇怪的东西。我确定我在这里遗漏了一些明显的东西，但是有人可以向我解释为什么 .reverse() 不适用于多维数组的单行吗？

输入是使用 PythonInterpreter.set() 从 Java 传入的

当我执行以下 python 代码时...

```
#Integer[][] input
print(input[0])
input[0].reverse()
print(input[0]) 
```

我得到以下输出，其中的值没有被反转。

```
array(java.lang.Integer, [0, 1, 1, 1, 1])
array(java.lang.Integer, [0, 1, 1, 1, 1]) 
```

虽然如果我在一维数组上执行 reverse() ......

```
#Integer[] input;
print(input)
input.reverse()
print(input) 
```

结果如我所料。

```
array(java.lang.Integer, [0, 1, 1, 1, 1])
array(java.lang.Integer, [1, 1, 1, 1, 0]) 
```

同样，如果我将 input[0] 复制到它自己的变量中，然后反转，它也可以按预期工作。

```
#Integer[][] input
print(input[0])
tmp = input[0]
tmp.reverse()
input[0] = tmp
print(input[0]) 
```

我也得到了我期望的结果。

```
array(java.lang.Integer, [0, 1, 1, 1, 1])
array(java.lang.Integer, [1, 1, 1, 1, 0]) 
```

我也得到了预期的结果......

```
#Integer[][] input
print(input[0])
input[0] = input[::-1]
print(input[0]) 
```

- -编辑 - -

在这些情况下， .insert() 似乎也无法采取行动......

```
#Integer[][] input
print(input[0])
input[0].insert(0,123)
print(input[0]) 
```

生产...

```
array(java.lang.Integer, [0, 1, 1, 1, 1])
array(java.lang.Integer, [0, 1, 1, 1, 1]) 
```

.append() 和 .pop() 也是如此。我觉得这适用于许多（如果不是全部）列表函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T18:35:59.153

访问`input[0]`（以及任何其他索引）可能会创建一个包含数据副本的一维数组，而不是您所期望的数据视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T18:02:06.960

我的猜测是，当您使用 Integer[][] 输入时，您会创建一个不可变数据的表（可变）。因此，虽然您可以修改列表，但不能修改该列表中包含的对象。因此，所有需要修改数组的方法（追加、弹出、反向）都不起作用。

# svn - 你可以强制颠覆创建一个文件，然后忽略内容吗？

> ID：13532904
> 
> 赞同：2
> 
> 时间：2012-11-23T16:38:27.090
> 
> 标签：svn

我们的应用程序中有一个开发设置文件，它需要放在某个位置，但内容因机器而异。

我们想要做的是向存储库提交文件的“基本”版本，任何人都可以签出，但 subversion 会忽略对文件的更改，以防止其他人重新签入。这样的事情可能吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T18:25:58.230

## 一些解决方案

*   仅限 Windows 的 TortoiseSVN 解决方案（你没有提到你的客户端工具）

使用提交时忽略更改列表 TSVN 功能（是的，**在每个客户端上**）

*   锁定文件

虽然没有广泛使用，但 Subversion 中仍然存在锁定模型（而不是分支合并）。您可以提交和锁定（并且永远不会解锁）您的文件。如果在特殊的“locker”用户下进行锁定，任何人都无法误破锁定

* * *

**关于妄想狂言的权利**

*   Mercurial 作为 SVN 客户端

`hg ci -X filename`将从提交的变更集中排除版本化文件名，即使文件名已更改，ci -X 也可以定义为常用 ci 的替换别名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T17:09:20.657

我担心这是不可能的。

通常，该过程是创建具有不同扩展名和`svn ignore`正常扩展名的文件的“分发”版本。在新结帐时，您必须手动将“dist”文件复制到其最终名称。

我经常将它用于我的 makefile 配置：

*   makefile.conf.dist -- 提交的基本版本
*   makefile.conf -- 构建系统读取的实际文件，未提交

如果您可以接受这对于单台机器，请查看[此问题](https://stackoverflow.com/questions/895548/subversion-ignore-modifications-to-a-file-locally-on-one-client-only)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T17:42:27.877

我碰巧有一个[预提交钩子](https://github.com/qazwart/SVN-Precommit-Kitchen-Sink-Hook)，可以完全按照您的意愿行事。您可以对其进行设置，因此只有您才能对此文件进行更改。它还可以确保文件具有正确的属性设置，甚至可以根据文件名称完全禁止新文件。

它需要所有 Unix 和 Linux 发行版以及 Mac 附带的 Perl。您还可以获得适用于 Windows 的 Perl。该钩子不需要非标准的 Perl 模块。但是，它可以使用 Net::LDAP（一个可选模块），因此您可以根据您的 LDAP 组设置权限（例如，如果您使用 Windows Active Directory）。

# javascript - 如何将变量 img src 插入到 javascript 函数中（谷歌地图 api）

> ID：13532907
> 
> 赞同：1
> 
> 时间：2012-11-23T16:38:38.650
> 
> 标签：javascript, google-maps-api-3, src

我正在使用[此答案](https://stackoverflow.com/a/11802989/1836786)中的代码为谷歌地图制作切换图例。我希望图例上的每个项目都有自己的图标。我已经定义了图标的 url 以及图层名称和 kml url。

我已将其插入到功能代码中：

```
<img src='dummy.png' id='icons'> 
```

并添加了以下方法：

```
document.getElementById("icons").src = kml[prop].icon 
```

它似乎不起作用，因为只显示了第一个图标，而且它是错误的图标。

我哪里错了？完整代码如下：

```
 <html>
<head>

 <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>

  <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
      ul
{
list-style: none;
margin: 0;
padding: 0;
}

    </style>

<script type="text/javascript">

var map;

// lets define some vars to make things easier later
var kml = {
    a: {
        name: "MPLS/STPL",
        url: "https://maps.google.com/maps/ms?authuser=0&vps=5&ie=UTF8&msa=0&output=kml&msid=212971981154994583939.0004b06640255267e038c",
        icon: "http://img89.imageshack.us/img89/4149/blueiconvib.png"
    },
    b: {
        name: "Bicycling Tour Routes",
        url: "https://maps.google.com/maps/ms?authuser=0&vps=4&ie=UTF8&msa=0&output=kml&msid=212971981154994583939.0004902a1824bbc8c0fe9",
        icon: "http://img201.imageshack.us/img201/6075/greenicon.png"
    }
// keep adding more if ye like 
};

// initialize our goo
function initializeMap() {
    var options = {
        center: new google.maps.LatLng(44.9812, -93.2687),
        zoom: 13,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), options);

    createTogglers();
};

google.maps.event.addDomListener(window, 'load', initializeMap);

// the important function... kml[id].xxxxx refers back to the top 
function toggleKML(checked, id) {

    if (checked) {

        var layer = new google.maps.KmlLayer(kml[id].url, {
            preserveViewport: true,
            suppressInfoWindows: true 
        });
        // store kml as obj
        kml[id].obj = layer;
        kml[id].obj.setMap(map);
    }
    else {
        kml[id].obj.setMap(null);
        delete kml[id].obj;
    }

};

// create the controls dynamically because it's easier, really
function createTogglers() {

    var html = "<form><ul>";
    for (var prop in kml) {
        html += "<li id=\"selector-" + prop + "\"><img src='dummy.png' id='icons'><input type='checkbox' id='" + prop + "'" +
        " onclick='highlight(this,\"selector-" + prop + "\"); toggleKML(this.checked, this.id)' \/>" +
        kml[prop].name + "<\/li>";
    }
    html += "<li class='control'><a href='#' onclick='removeAll();return false;'>" +
    "Remove all layers<\/a><\/li>" + 
    "<\/ul><\/form>";

    document.getElementById("toggle_box").innerHTML = html;
    document.getElementById("icons").src = kml[prop].icon
};

// easy way to remove all objects
function removeAll() {
    for (var prop in kml) {
        if (kml[prop].obj) {
            kml[prop].obj.setMap(null);
            delete kml[prop].obj;
        }

    }
};

// Append Class on Select
function highlight(box, listitem) {
    var selected = 'selected';
    var normal = 'normal';
    document.getElementById(listitem).className = (box.checked ? selected: normal);
};

function startup() { 
// for example, this toggles kml b on load and updates the menu selector
var checkit = document.getElementById('b');
checkit.checked = true;
toggleKML(checkit, 'b');
highlight(checkit, 'selector1');
 }

</script>

<style type="text/css">
.selected { font-weight: bold; }
</style>

</head>
<body onload="startup()">
<div id="map_canvas" style="width: 100%; height: 600px;"></div>
<div id="toggle_box" style="position: absolute; top: 100px; right: 20px; padding: 10px; background: #fff; z-index: 5; "></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T17:01:18.260

ID 在文档中必须是唯一的。

从函数 createTogglers() 中删除这一行：

```
document.getElementById("icons").src = kml[prop].icon 
```

并在循环内分配 src 属性：

```
for (var prop in kml) {
        html += "<li id=\"selector-" + prop + "\"><img src='"+kml[prop].icon+"' id='icons'>xxx<input type='checkbox' id='" + prop + "'" +
        " onclick='highlight(this,\"selector-" + prop + "\"); toggleKML(this.checked, this.id)' \/>" +
        kml[prop].name + "<\/li>";
    } 
```

# nuget - 更新默认的 nuget 包

> ID：13532909
> 
> 赞同：2
> 
> 时间：2012-11-23T16:38:50.713
> 
> 标签：nuget, nuget-package

我了解如何在解决方案中更新包，但我的问题是如何更新默认包。IE：当我创建一个新的解决方案时，它已经是最新版本，而不必每次开始一个新项目时都不必去“管理解决方案的包”并更新。

例如：如果我创建一个新的 MVC4 项目，正在安装 jQuery 1.7.1。1.8.2 从 9 月开始发布。我想默认安装 1.8.2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T20:26:50.047

您可以通过修改默认项目模板来更改这些。你可以在这里找到它们：

> C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\ProjectTemplates\

例如，可以在此处找到使用 Razor 语法的 MVC4 Web 应用程序模板：

> C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\ProjectTemplates\CSharp\Web\1033\MvcWebApplicationProjectTemplatev4.0.cshtml

在此文件夹中，只需修改 .vstemplate XML 文件内容，在本例中：

> MvcWebApplicationProjectTemplate.11.cshtml.vstemplate

查找名为*packages*的部分并将包版本修改为您想要的版本。该部分如下所示：

```
<WizardData>
        <packages repository="registry" keyName="AspNetMvc4VS11" isPreunzipped="true">
            <package id="EntityFramework" version="5.0.0" skipAssemblyReferences="true" />
            <package id="jQuery" version="1.7.1.1" />
... 
```

还要确保更新 Scripts 文件夹中的 _references.js 文件，并确保具有所需版本的包在以下位置可用：

> C:\Program 文件 (x86)\Microsoft ASP.NET\ASP.NET MVC 4\Packages

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T08:51:02.103

另一种方法是使用包管理器控制台中的更新包

[http://docs.nuget.org/docs/reference/package-manager-console-powershell-reference#Update-Package](http://docs.nuget.org/docs/reference/package-manager-console-powershell-reference#Update-Package)

# jquery - jQuery：在按键上修改输入值

> ID：13532912
> 
> 赞同：2
> 
> 时间：2012-11-23T16:39:33.080
> 
> 标签：jquery, replace, keypress

每当一个点'。在我的输入（类型=数字）字段中输入，我希望将其替换为逗号“，”。

```
$(box).find('input[type=number]').keypress(function(evt){
        if(evt.which==46){
            $(this).val($(this).val()+',');
            evt.preventDefault();
        }
    }); 
```

该事件被很好地触发，但相反，该字段完全为空。怎么了？

**编辑**

我这样做的原因是 Chrome（最新版本）与 HTML5 建议相反，在输入类型 = 数字中使用逗号并丢弃点。我目前只为 Chrome 开发，因为我暂时无法在其他地方测试我的应用程序。对此（异常？）情况的任何评论将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-25T10:35:46.343

```
$(this).val($(this).val() + ','); 
```

如果您正在键入并且总是想在文本末尾添加“，”符号，这可能会起作用。但是，如果您将光标放在文本中间然后按“。”会怎样？符号？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:55:07.433

也许您的文档还没有准备好：

```
jQuery(document).ready(function() {
  // your code
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T16:46:51.377

您的代码在 jsfiddle 上运行时似乎可以正常工作：

```
$(document).find('input').keypress(function(evt){ 
        if(evt.which==46){
            $(this).val($(this).val()+',');
            evt.preventDefault();
        }
    });​ 
```

[http://jsfiddle.net/cornel_gav/cDE3L/](http://jsfiddle.net/cornel_gav/cDE3L/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-11T15:14:10.490

要使字符替换在任何光标位置起作用，您可以绑定到 keyup 事件并替换 this.val() 中已经插入的字符。

```
$(document).on('keyup','.myField"]', function(e,i){
    if(e.keyCode==107)
    {
        var start = this.selectionStart,
            end = this.selectionEnd;
        $(this).val($(this).val().replace(/\+/,'|'));
        this.setSelectionRange(start, end);
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T16:42:57.573

我们是我的朋友，不知道为什么，似乎有用的键码是 190 而不是 110。

尝试 ：

```
$(document).ready(function(){

     $(document).find('input[type=number]').live('keydown',function(evt){
            if(evt.which == 190){
                $(this).val($(this).val()+",");
                evt.preventDefault();
            }
        });

}); 
```

这是实时预览 [http://jsfiddle.net/RTEcJ/8/](http://jsfiddle.net/RTEcJ/8/)

查看键码，您可以尝试在输入中检查您需要的键码：http: [//www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-23T16:43:40.437

您可以像这样使用子字符串：

```
str.substring(0,str.length - 1) + ',' 
```

然而，这可能不是一个理想的解决方案。

# java - 在 Java 中的 HTMLUnit 中使用非标准接口时 SSL 验证失败

> ID：13532913
> 
> 赞同：3
> 
> 时间：2012-11-23T16:39:32.227
> 
> 标签：java, ssl, htmlunit

作为前锋，这是我的第一个 Java 程序，因此对我可能犯下的任何格式化暴行表示歉意。我的单元测试程序碰壁了。我无法使用默认界面，因此我将请求设置为在不同的本地地址上发出。但是，当我这样做时，SSL 不再起作用。这是我执行程序时收到的回溯。我正在寻找某种方法来在非默认接口（在我的情况下为 eth1）上发出请求并让 SSL 工作。

```
Exception in thread "main" javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated
at sun.security.ssl.SSLSessionImpl.getPeerCertificates(SSLSessionImpl.java:371)
at org.apache.http.conn.ssl.AbstractVerifier.verify(AbstractVerifier.java:128)
at org.apache.http.conn.ssl.SSLSocketFactory.connectSocket(SSLSocketFactory.java:572)
at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:180)
at org.apache.http.impl.conn.ManagedClientConnectionImpl.open(ManagedClientConnectionImpl.java:294)
at org.apache.http.impl.client.DefaultRequestDirector.tryConnect(DefaultRequestDirector.java:640)
at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:479)
at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906)
at com.gargoylesoftware.htmlunit.HttpWebConnection.getResponse(HttpWebConnection.java:172)
at com.gargoylesoftware.htmlunit.WebClient.loadWebResponseFromWebConnection(WebClient.java:1460)
at com.gargoylesoftware.htmlunit.WebClient.loadWebResponse(WebClient.java:1379)
at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:311)
at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:380)
at com.gargoylesoftware.htmlunit.WebClient.getPage(WebClient.java:365)
at UnitTest.main(UnitTest.java:65) 
```

--

```
public class UnitTest {

  public static void main(String[] args) throws Exception {
    WebClient webClient = new WebClient(BrowserVersion.FIREFOX_10);
    webClient.setWebConnection(new HttpWebConnection(webClient) {
      @Override
      protected AbstractHttpClient createHttpClient() {
        AbstractHttpClient client = super.createHttpClient();
        try {
          HttpParams params = client.getParams();
          params.setParameter(ConnRoutePNames.LOCAL_ADDRESS, InetAddress.getByName("XXX.XXX.XXX.XXX"));
          client.setParams(params);
        }
        catch(Exception e) {
          e.printStackTrace();
        }
        return client;
      }
    });
    webClient.setThrowExceptionOnScriptError(false);
    webClient.setJavaScriptEnabled(false);
    webClient.getCookieManager().setCookiesEnabled(true);

    HtmlPage page = (HtmlPage)
    webClient.getPage("https://someencryptedpage.com"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T10:30:10.853

这是由不信任此证书的 java 密钥库引起的。

最快的解决方案是将 Webclient 设置为忽略 SSL 异常：

对于 HtmlUnit pre 2.11 版本：

```
webClient.setUseInsecureSSL(true); 
```

对于 HtmlUnit 2.11 和更新版本：

```
webClient.getOptions().setUseInsecureSSL(true); 
```

这是[HtmlUnit javadoc](http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/WebClient.html#setUseInsecureSSL%28boolean%29)：

如果由于某些原因您想要管理证书以使其受信任而不是忽略它的状态，您可以将其导入您的密钥库，但这可能需要维护，例如如果证书已更改/更新：将证书添加到密钥库。这里有一些[指示](https://stackoverflow.com/search?q=import%20keystore%20java)

# windows-phone-7 - 在 Windows Phone 7 中使用 MediaElement 播放 mp3

> ID：13532915
> 
> 赞同：0
> 
> 时间：2012-11-23T16:39:46.503
> 
> 标签：windows-phone-7, windows-phone

我正在尝试在 Windows Phone 7 中使用 MediaElement 播放 mp3。这是代码。请帮帮我，我什至没有收到错误...但是这首歌也无法播放...

```
private void button1_Click_1(object sender, RoutedEventArgs e)
    {
        mediaElement.Source = new Uri("Song.mp3", UriKind.Relative);
        if (mediaElement.CurrentState == MediaElementState.Playing)
        {
            button1.Content = "Pause";
            mediaElement.Pause();
        }
        else
        {
            button1.Content = "Play";
            mediaElement.Play();
        }
    } 
```

XAML 页面

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <MediaElement Height="201" HorizontalAlignment="Left" Margin="9,6,0,0" Name="mediaElement" VerticalAlignment="Top" Width="441" />
        <Button Content="Button" Height="72" HorizontalAlignment="Left" Margin="12,213,0,0" Name="button1" VerticalAlignment="Top" Width="438" />
    </Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:19:24.560

媒体元素需要在调用 Play() 之前加载其媒体，否则不会发生任何事情。加载媒体时会触发事件 MediaOpened。

```
myMediaElement.MediaOpened += (o, args) => myMediaElement.Play(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-09T10:11:57.070

在 XAML 中：

```
{<Grid x:Name="ContentPanel" Margin="12,160,12,0" Grid.RowSpan="2">
            <Button Content="Xaml Play" Name="button1" Click="button1_Click" />
            <MediaElement x:Name="playSound" Source="sounds/Loose.wav" AutoPlay="False" Height="0" Width="0"  /></Grid>} 
```

"

在 C# 中：

```
private void button1_Click(object sender, RoutedEventArgs e)
        {
            playSound.Play();
        } 
```

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T16:48:17.263

请确保文件的 URI 是正确的。并且 Song.mp3 需要设置为“内容”而不是“资源”文件。而且我认为您还需要在文件中设置“如果更新则复制到目标”。

# java - 如何在java中以相同的顺序洗牌两个数组

> ID：13532919
> 
> 赞同：10
> 
> 时间：2012-11-23T16:39:59.373
> 
> 标签：java, arrays, list, collections

我有两组问题和答案

```
String questions[] = {
"Q1?",
"Q2?",
"Q3?"};

String answers[] = {
    "A1?",
    "A2?",
    "A3?"}; 
```

我曾经`Collections.shuffle(Arrays.asList(questions);`对每个数组进行洗牌。我如何洗牌每个数组，以便在洗牌后它们保持相同的顺序？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-23T16:40:54.957

您可以改组一个包含索引的新数组。然后从第一个索引中获取两个数组中的元素。

```
List<Integer> indexArray = Arrays.asList(0, 1, 2);

Collections.shuffle(indexArray);

String question = questions[indexArray.get(0)];
String answer = answers[indexArray.get(0)]; 
```

* * *

当然，正如其他答案所暗示的那样，创建一个`class`包含`questions`并且`answers`将是一种更面向对象的方式。这样，与当前方法相比，您只需维护一个`List`or 。`array``3 arrays`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-23T16:49:13.953

创建一个将问题和答案放在一起的类将是一个更简单且更面向对象的解决方案：

```
class QuestionAnswerPair {
    private final String question;
    private final String answer;

    public QuestionAnswerPair(String question, String answer) {
        this.question = question;
        this.answer = answer;
    }
} 
```

进而：

```
QuestionAnswerPair[] questions = new QuestionAnswerPair[] {
    // Put questions here
};

Collections.shuffle(Arrays.asList(questions)); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-23T16:44:59.287

创建一个类`QuestionAndAnswer`并使用该类的数组。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-07-01T17:15:29.947

Java Collections 对这个问题有一个（令人惊讶的）简单的解决方案：`Collections.shuffle(Collection<?>, Random)`使用`Random`具有相同种子的种子。

```
 List<Integer> quests = Arrays.asList(1, 2, 3, 4, 5);
    List<Integer> answers = Arrays.asList(10, 20, 30, 40, 50);

    long seed = System.nanoTime();
    Collections.shuffle(quests, new Random(seed));
    Collections.shuffle(answers, new Random(seed));

    System.out.println(quests);
    System.out.println(answers); 
```

## 笔记：

*额外的优化是危险的。* **这不起作用：**

```
 long seed = System.nanoTime();
    Random rnd = new Random(seed);
    Collections.shuffle(quests, rnd);
    Collections.shuffle(answers, rnd); 
```

原贴于：[https ://stackoverflow.com/a/44863528/1506477](https://stackoverflow.com/a/44863528/1506477)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-23T16:55:23.893

您可以对具有问题/答案索引的额外整数数组进行洗牌，而不是对答案和问题进行洗牌，然后使用洗牌索引从相应的数组中提取问题和答案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-24T20:31:00.297

想法来自： [http ://www.vogella.com/tutorials/JavaAlgorithmsShuffle/article.html](http://www.vogella.com/tutorials/JavaAlgorithmsShuffle/article.html)

```
public static void shuffle2ArraysTogther(String[] a, String[] b) {
    if(a.length == b.length) {
        int n = a.length;
        Random random = new Random();
        random.nextInt();
        for (int i = 0; i < n; i++) {
            int change = i + random.nextInt(n - i);
            swap(a, i, change);
            swap(b, i, change);
        }
    }
}

private static void swap(String[] a, int i, int change) {
    String helper = a[i];
    a[i] = a[change];
    a[change] = helper;
}

private static void swap(String[] a, int i, int change) {
    String helper = a[i];
    a[i] = a[change];
    a[change] = helper;
}
String questions[] = {
    "Q1?",
    "Q2?",
    "Q3?"
};

String answers[] = {
    "A1?",
    "A2?",
    "A3?"
};
shuffle2ArraysTogther(questions, answers);
for (String i : questions) {
    System.out.println(i);
}
for (String i : answers) {
    System.out.println(i);
} 
```

# c++ - 删除指向二维数组的指针

> ID：13532920
> 
> 赞同：0
> 
> 时间：2012-11-23T16:40:02.380
> 
> 标签：c++, arrays, pointers

我有一个指向 Robot 类的二维数组的指针

```
Robot ***rob; 
```

下面是我的构造函数代码。构造函数工作正常，但现在我正在尝试构建一个析构函数来删除这个指针，它不断地让程序崩溃！

我的问题是，如何删除指向二维机器人数组的指针？

```
RobotsWorld::RobotsWorld(int x , int y)
{
    X=x;Y=y; // returns the limitation of the matrix 
    rob = new Robot**[x];
    for(int i = 0; i < x; i++)
    {
        rob[i] = new Robot*[y];

        for(int j = 0; j < y; j++)
        {
            rob[i][j] = NULL;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:50:48.487

```
// Code is not tested
for(int i = 0 ; i < x ; ++i)
{
    for(int j = 0 ; j < y ; ++j)
    {
        delete rob[i][j];
    }
    delete[] rob[i];
}
delete[] rob; 
```

顺便说一句，你为什么设置`rob[i][j] = NULL;`？

我认为应该是：`rob[i][j] = new double;`

# sas - DHMS 函数返回 00:00 小时和分钟

> ID：13532922
> 
> 赞同：0
> 
> 时间：2012-11-23T16:40:07.347
> 
> 标签：sas

DHMS 函数返回 00:00 小时和分钟。

我的日期和时间输入来自 Oracle 表，并且都是数字值。我正在尝试结合这两个值来创建日期时间值。我可以创建一个 Auth_DT (DDMONYYYY) 和 Auth_Tm (HH:MM:SS)。当我尝试使用 DHMS 创建身份验证日期时间时，小时和分钟显示为 00:00，但秒数是正确的。

感谢您对我的代码中的错误的任何帮助。
预先感谢您的任何帮助。

```
data dates;
Auth_Date = 20120915; 
Auth_Time = 23324; 
run;

Proc SQL;
Create table mark as 
Select 
AUTH_DATE, 
input(put(AUTH_DATE,8.),yymmdd8.) as AUTH_DT format=Date9\. ,
AUTH_TIME, 
input(put(AUTH_TIME,6.),hhmmss6.) as AUTH_TM format=TOD8\. ,
Input(Substr( put(Auth_Time,z6.),1,2),2.) as HR ,
Input(Substr( put(Auth_Time,z6.),3,2),2.) as MIN , 
Input(Substr( put(Auth_Time,z6.),5,2),2.) as SEC ,
DHMS((input(put(AUTH_DATE,8.),yymmdd8.))  
,HOUR(Input(Substr( put(Auth_Time,z6.),1,2),2.)) 
,MINUTE(Input(Substr( put(Auth_Time,z6.),3,2),2.)) 
,SECOND(Input(Substr( put(Auth_Time,z6.),5,2),2.))) as Auth_DTTM Format = datetime20\. 
From work.Dates;
Quit; 
```

Auth_Date AUTH_DT Auth_Time AUTH_TM HR MIN SEC Auth_DTTM 20120915 15SEP2012 23324 02:33:24 2 33 24 15SEP2012:00:00:24

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T17:17:42.360

无需深入研究您的 SQL 代码，这可能会满足您的需求：

```
data _null_;

   Auth_Date = 20120915; 
   Auth_Time = 23324; 

   /* Convert variables to SAS format */
   Auth_Date_SAS = input(put(Auth_Date,z8.),yymmdd8.);
   Auth_Time_SAS = input(put(Auth_Time,z6.),hhmmss6.);

   /* Build timestamp */
   Auth_Date_SAS_Timestamp = DHMS(Auth_Date_SAS,0,0,Auth_Time_SAS);

   put Auth_Date_SAS_Timestamp= datetime.;
run; 
```

基本上，您需要将两个变量转换为 SAS 格式。“技巧”是将时间值指定为`DHMS`函数的最后一个参数。 [请参阅文档中的最后一个示例](http://support.sas.com/documentation/cdl/en/lefunctionsref/63354/HTML/default/viewer.htm#p1b9d1kbo0czoxn1ouj1kcxwqzn1.htm)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T13:31:52.127

鲍勃的回答是解决这个问题的正确方法，IMO。要具体回答为什么您的解决方案是错误的，这是对 HOUR 函数使用错误的参数：

```
HOUR(Input(Substr( put(Auth_Time,z6.),1,2),2.)) 
```

这给了你，2:33:24，

```
HOUR(INPUT(SUBSTR('023324',1,2),2.)) 
```

所以`HOUR(INPUT('02',2.))`，或者，最后，`HOUR(2)`；

但是，HOUR 不接受“整数小时数”的参数。它从（整数秒数）或（自 1/1/1960 00:00:00 以来的整数 秒数）的参数*返回*整数小时数。`time``datetime`

因此，如果您要这样做（同样，Bob 的解决方案要简单得多，因为 SAS 将时间值存储为整数秒，而 DHMS 可以花费任意秒数，甚至是非常大的秒数），您要么需要删除 HOUR 函数，所以

```
DHMS(<date part>,input(substr(put(auth_time,z6.),1,2),2.),
     input(substr(put(auth_time,z6.),3,2),2.),
     input(substr(put(auth_time,z6.),5,2),2.))); 
```

或者使用完整的时间参数（即，正是您存储在 AUTH_TM 中的内容）和 HOUR/MINUTE/SECOND 函数，即

```
HOUR(input(put(AUTH_TIME,6.),hhmmss6.)) 
```

等等

# clang - C++ 11 代码使用 `clang++` 编译，但不能使用 `clang -x c++`

> ID：13532923
> 
> 赞同：5
> 
> 时间：2012-11-23T16:40:08.800
> 
> 标签：clang, sublimetext2, clang++

## 基本问题

我有以下代码

```
#include <iostream>
#include <cstdint>
using namespace std;
int main ()
{
  int32_t spam;
  spam=5;
  cout << "Hello World! We like " << spam << endl;
  return 0;
} 
```

当我这样做时，这编译得很好`clang++ -stdlib=libc++ cpptest.cpp`。但是，用于 Sublime Text 2 的其他出色的 SublimeClang 解析器似乎并不理解它。我认为这可能是因为它使用`clang -x c++`而不是`clang++`，并尝试使用`clang -x c++ -std=c++11 -stdlib=libc++ cpptest.cpp`（或它的各种排列）来编译我上面的代码段，但是失败了，抱怨链接器。

所以我的问题是，与 有何`clang++`不同`clang -x c++`？是否可以使用`clang -x c++`而不是编译上述代码段`clang++`？

我的机器是运行 Mountain Lion 的 2012 MacBook Air。

## 调试东西

现在回到工作岗位，我玩得更多，并比较了不同版本的详细输出。

### 打电话`clang -x c++`

当我跑步时，`clang -v -x c++ -stdlib=libc++ cpptest.cpp`我得到

```
Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin12.2.1
Thread model: posix
 "/usr/bin/clang" -cc1 -triple x86_64-apple-macosx10.8.0 -emit-obj -mrelax-all -disable-free -disable-llvm-verifier -main-file-name cpptest.cpp -pic-level 1 -mdisable-fp-elim -relaxed-aliasing -masm-verbose -munwind-tables -target-cpu core2 -target-linker-version 134.9 -v -resource-dir /usr/bin/../lib/clang/4.1 -fmodule-cache-path /var/folders/8m/b4wllzbs67d9zxcj1dd8q6912jclkf/T/clang-module-cache -stdlib=libc++ -fdeprecated-macro -fdebug-compilation-dir /Users/me/Desktop -ferror-limit 19 -fmessage-length 80 -stack-protector 1 -mstackrealign -fblocks -fobjc-runtime-has-arc -fobjc-runtime-has-weak -fobjc-dispatch-method=mixed -fobjc-default-synthesize-properties -fcxx-exceptions -fexceptions -fdiagnostics-show-option -fcolor-diagnostics -o /var/folders/8m/b4wllzbs67d9zxcj1dd8q6912jclkf/T/cpptest-1eOyZn.o -x c++ cpptest.cpp
clang -cc1 version 4.1 based upon LLVM 3.1svn default target x86_64-apple-darwin12.2.1
ignoring nonexistent directory "/usr/include/c++/v1"
#include "..." search starts here:
#include <...> search starts here:
 /usr/bin/../lib/c++/v1
 /usr/local/include
 /usr/bin/../lib/clang/4.1/include
 /usr/include
 /System/Library/Frameworks (framework directory)
 /Library/Frameworks (framework directory)
End of search list.
 "/usr/bin/ld" -demangle -dynamic -arch x86_64 -macosx_version_min 10.8.0 -o a.out /var/folders/8m/b4wllzbs67d9zxcj1dd8q6912jclkf/T/cpptest-1eOyZn.o -lSystem /usr/bin/../lib/clang/4.1/lib/darwin/libclang_rt.osx.a
Undefined symbols for architecture x86_64:
[snip]
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

### 打电话`clang++`

当我打电话时，`clang++ -v -stdlib=libc++ cpptest.cpp`我得到以下信息。

```
clang++ -v -stdlib=libc++ cpptest.cpp 
Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin12.2.1
Thread model: posix
 "/usr/bin/clang" -cc1 -triple x86_64-apple-macosx10.8.0 -emit-obj -mrelax-all -disable-free -disable-llvm-verifier -main-file-name cpptest.cpp -pic-level 1 -mdisable-fp-elim -relaxed-aliasing -masm-verbose -munwind-tables -target-cpu core2 -target-linker-version 134.9 -v -resource-dir /usr/bin/../lib/clang/4.1 -fmodule-cache-path /var/folders/8m/b4wllzbs67d9zxcj1dd8q6912jclkf/T/clang-module-cache -stdlib=libc++ -fdeprecated-macro -fdebug-compilation-dir /Users/me/Desktop -ferror-limit 19 -fmessage-length 80 -stack-protector 1 -mstackrealign -fblocks -fobjc-runtime-has-arc -fobjc-runtime-has-weak -fobjc-dispatch-method=mixed -fobjc-default-synthesize-properties -fcxx-exceptions -fexceptions -fdiagnostics-show-option -fcolor-diagnostics -o /var/folders/8m/b4wllzbs67d9zxcj1dd8q6912jclkf/T/cpptest-E7FTDV.o -x c++ cpptest.cpp
clang -cc1 version 4.1 based upon LLVM 3.1svn default target x86_64-apple-darwin12.2.1
ignoring nonexistent directory "/usr/include/c++/v1"
#include "..." search starts here:
#include <...> search starts here:
 /usr/bin/../lib/c++/v1
 /usr/local/include
 /usr/bin/../lib/clang/4.1/include
 /usr/include
 /System/Library/Frameworks (framework directory)
 /Library/Frameworks (framework directory)
End of search list.
 "/usr/bin/ld" -demangle -dynamic -arch x86_64 -macosx_version_min 10.8.0 -o a.out /var/folders/8m/b4wllzbs67d9zxcj1dd8q6912jclkf/T/cpptest-E7FTDV.o -lc++ -lSystem /usr/bin/../lib/clang/4.1/lib/darwin/libclang_rt.osx.a 
```

### 差异和解决方案？

我能找到的唯一主要区别是，当我使用标志运行 clang 时，`-x c++`标志`-lc++`不会添加到以 . 开头的行的末尾`"/usr/bin/lb"`。当我改为使用 编译时`clang -v -lc++ -x c++ -stdlib=libc++ cpptest.cpp`，一切正常。我仍然不明白`clang++`and`clang -x c++`命令到底应该有什么不同，但这似乎使我的示例程序至少可以编译，并且似乎表明这些命令与链接器做了不同的事情。

## 我的 Sublime Text 2 问题的解决方案

这整个小错误搜索开始于我试图弄清楚如何让 Sublime Text 2 停止抱怨我拥有的实际工作的代码，现在我想我已经明白了。所需要的只是按照[此处](https://github.com/quarnster/SublimeClang/issues/107)的说明并将包含设置为

```
/usr/lib/c++/v1
/usr/include/c++/4.2.1
/usr/include/c++/4.2.1/ext 
```

在`SublimeClang.sublime-settings`文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:00:18.707

你是对的。仅在链接阶段存在差异。您可以运行 clang 仅使用 -c 标志进行编译，您将获得相同的结果。

然后你添加 -lc++ 标志，两个样本都是一样的。

# android - 如何在 Android 中缩放 ImageButton 以使三个按钮排成一行？

> ID：13532924
> 
> 赞同：-2
> 
> 时间：2012-11-23T16:40:17.937
> 
> 标签：android, android-layout

我在将三个按钮添加到我的`LinearLayout`. 看起来像

![在此处输入图像描述](../Images/ed7a77ee7c49b5efbc0c7f79fb4a68c5.png)

我希望这三个按钮被缩放，以便它适合行。

我的 xml 定义是：

```
<LinearLayout 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
         android:gravity="left"
    >

    <ImageButton
     android:id="@+id/btn_select_instance"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:src="@drawable/searchid_blau"         
     android:onClick="selectInstanceAction"/>

    <ImageButton
     android:id="@+id/btn_select_from_scanner"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:src="@drawable/qr_code_blau" 
     android:onClick="selectInstanceWithScannerAction"/>

    <ImageButton
     android:id="@+id/btn_select_from_scanner"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:src="@drawable/qr_code_blau" 
     android:onClick="selectInstanceWithScannerAction"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T16:49:25.420

```
android:layout_width="0dp"
android:layout_weight=1 
```

在您的每个 ImageButton

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T16:49:13.773

首先将*weightSum*添加到 LinearLayout

```
android:weightSum="3" 
```

然后为您拥有的每个按钮添加 *layout_weight*

```
android:layout_weight="1" 
```

并将按钮宽度更改为 0dp

```
android:layout_width="0dp" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T16:50:00.880

将属性添加`android:weightSum="3"`到您的班轮布局和 ImageButton 的更改中

```
android:layout_width="0dp"
  android:layout_weight="1" 
```

仅此而已 =)

# html - 以 % 宽度和高度垂直和水平居中图像

> ID：13532932
> 
> 赞同：0
> 
> 时间：2012-11-23T16:40:57.840
> 
> 标签：html, css

我如何在垂直和水平方向以 % 宽度和高度居中 img。img 将响应屏幕分辨率，我需要它保持居中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:59:49.283

我可以通过将这个 img 放在这样的表中来解决这个问题

```
<table align="center" valign="center">
  <tr>
    <td style="text-align:center;">
      <img style="width:80%;max-width:500px;" src="logo.png"/>
    </td>
  </tr>
</table> 
```

# html - 浏览器如何处理 CSS 样式并将其应用于 DOM 元素？

> ID：13532939
> 
> 赞同：2
> 
> 时间：2012-11-23T16:41:28.147
> 
> 标签：html, css, dom

浏览器将 CSS 样式应用于 DOM 元素是否存在一致/通用的顺序？

比如box模型是：margin、border、padding和width。

浏览器处理与 box-model 顺序相同的 CSS 样式是否比列出的 CSS 样式更快：宽度、填充、边框和边距？

而且，是否有处理所有 CSS 样式的顺序的标准/规则？

编辑：我在询问浏览器应用特定 CSS 样式的特定顺序。这是一个通用标准还是每个浏览器？例如，*浏览器*是否必须先应用 z-index 才能应用背景色？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T17:15:34.243

CSS 样式将始终从上到下应用，从外部样式表开始（按照它们链接的顺序），然​​后是文档头部的样式，然后是内联样式。层次结构中后面的样式将覆盖较早出现的样式。

编辑：我需要修改我的答案。特异性也起作用。CSS 选择器定义得越明确，它的优先级就越高。具有相同特异性的选择器按照我最初所说的方式工作。

[ [http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/) ]

编辑#2：实际上有一个很好的方法来计算给定的一组选择器的特异性量，可以在这里找到：[ [http://www.htmldog.com/guides/cssadvanced/specificity/](http://www.htmldog.com/guides/cssadvanced/specificity/) ]

(id 选择器)`#foo`价值 100
(类选择器)`.bar`价值 10
(html 选择器)`html/body/p/span/div/etc`价值 1

`#foo span.bar`= 111
`html body p span`= 4
等

# clearcase - ClearCase：如何恢复/获取特定日期/基线的快照视图？

> ID：13532942
> 
> 赞同：1
> 
> 时间：2012-11-23T16:41:30.320
> 
> 标签：clearcase, clearcase-ucm

我的问题是 UCM ClearCase。几天前我犯了一个错误，显然，我已经用旧版本覆盖了相当多文件的合并结果（来自流变基）。

我想在我犯这个错误之前获得我的流的快照，以便我可以手动合并我的更改（我也有它的快照）。然后，我将结果作为新版本放入 ClearCase，一切都会恢复正常。

那么，如何获取特定日期的快照？

如果这可以帮助，在那个日期，我做了一个基线。

我绝对需要一些自动的东西，因为有数百个文件被更改，我无法手动检查它们。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:48:58.920

您可以使用具有基于时间的选择规则的非 UCM 动态视图，以便在该日期查看您的文件。

请参阅[从特定时间获取所有版本 - ClearCase UCM](https://stackoverflow.com/questions/10703227/get-all-versions-from-a-specific-time-clearcase-ucm/10703661)

然后您可以将`clearfsimport`这些文件返回到您的快照视图中，以便有效地还原您的更改。

请参阅[如何通过 cleartool 命令将文件夹中的所有文件添加到源代码管理？](https://stackoverflow.com/questions/12891096/how-to-add-all-the-files-in-a-folder-to-source-control-via-cleartool-command)

* * *

注意：如果你做了一个基线（增量或完整，没关系）代表你想看到的文件，你可以简单地：

*   在您制作所述基线的流下创建一个子流
*   在那个新的子流上重新设置它
*   `clearfsimport`从子流上的视图到您的快照视图。

# batch-file - 从 Windows 批处理文件运行 Sybase ISQL 脚本

> ID：13532945
> 
> 赞同：0
> 
> 时间：2012-11-23T16:41:40.540
> 
> 标签：batch-file, isql

我已经在这个网站以及谷歌上对此进行了广泛的研究。我创建了许多批处理文件，它们在我们的生产数据库上执行某些自动事务（备份等）。

我想通过使用接受某些参数输入的脚本进行转储来进一步简化我的结束流程。该脚本能够登录 isql 提示符但无法执行命令。

问题是 isql 提示返回但 3 个命令未执行

```
 @ECHO ***Started***
  @ECHO Enter MonthDay(MMDD)

   SET /p md=
  @ECHO  %md%

  mkdir \\10.20.1.17\arch\212%md%_banking
   set run=isql -Uuser -SORBITS -Ppass 
   %run%
   @echo dump database banking to '/media/newArch/212%md%_banking/212%md%EOD_banking.dmp' with compression=5  
   @echo dump database master to '/media/newArch/212%md%_banking/212%md%EOD_master.dmp'
   @echo go
    pause 
```

由于脚本本身使用传递的参数，我未能将它们放在单独的脚本文件中。

请给我提示和链接
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:56:06.550

我看不到您的命令如何到达 isql。

为什么不将它们回显到文件中，然后使用 "-i" 将其传递给 isql？

Windows 批处理语言很痛苦。如果您正在编写任何数量的脚本，您会发现学习一点 perl、bash 或 python 会更好。

# game-physics - 光线追踪器中景深实现的参考？

> ID：13532947
> 
> 赞同：5
> 
> 时间：2012-11-23T16:41:49.247
> 
> 标签：game-physics, raytracing

我有一个基本的光线追踪器，我想实现景深。你能推荐我可以使用的资源、书籍和代码吗？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-03T15:11:52.463

我从这个页面上的一点点信息中弄清楚了：http: [//cg.skeeology.com/depth-of-field-using-raytracing/](http://cg.skeelogy.com/depth-of-field-using-raytracing/)，特别是底部附近的图表。我想我做的和它的显示方式有点不同，但这个概念很简单。

我可以解释正在发生的事情以及如何实现它的总体思路（我会尽量简洁）。光线从任何给定点向所有方向反射（一般而言），因此它实际上不是在渲染点和您的眼睛之间传播的单条光线，而是离开渲染点并向眼睛扩展的光锥。您的眼睛/相机的镜头会倾向于弯曲这些光线，从而使锥体停止膨胀并再次开始收缩。为了使事物完全聚焦，锥体应该收缩到视网膜/框架上的一个点，但这仅适用于距镜头的一个特定距离：参考页面中的“焦平面”指示的距离（尽管我认为它实际上应该是一个以眼睛为中心的球体，而不是一个平面）。

对于焦平面前面的任何东西，光锥会更弯曲：它会聚焦到视网膜/框架前面的一个点，然后再次开始扩大，所以当它到达框架时，它不再是一个点，而是一个圆。类似地，对于焦平面后面的点，锥体弯曲较少，并且在到达框架时还没有收敛到一个点。在这两种情况下，效果是单个点是场景最终在多个像素上涂抹。

为了实现，你可以把这个想法变成头脑：不是将场景中的每个点渲染到几个像素，你可以将几个附近的点渲染到一个像素，这当然是自从“涂抹”之后真正发生的事情来自相邻点的“out”光圈最终会重叠，因此每个都对一个像素有贡献。

**所以这是我实现它的方式：**

首先，定义一个*光圈*：以您的眼睛为中心并平行于视网膜/框架的平面区域。光圈越大，景深效果越明显。孔径通常只是圆形，在这种情况下，它很容易由其半径定义。其他形状可以导致不同的照明效果。

还要定义“焦距”。我不认为这实际上是它的正确术语，但它是与眼睛的距离，事物将完全聚焦。

渲染每个像素：

1.  首先从眼睛通过像素投射出一条正常的光线到场景中。但是，您不想将其与场景中的对象相交，而是只想找到射线上与眼睛的距离等于所选焦距的点。将此点称为像素的焦点。
2.  现在在光圈上选择一个随机起点。对于圆形光圈，这很容易，您可以选择随机极角和随机半径（不大于光圈的半径）。您希望在整个光圈上均匀分布，不要试图将其偏向中心或任何东西。
3.  *通过焦点*从光圈上的选定点投射光线。请注意，它不一定会通过相同的像素，没关系。
4.  以通常的方式渲染这条射线（例如，路径追踪，或者只是找到最近的交点等）。
5.  重复步骤 2、3 和 4 几次，每次在光圈上使用不同的随机起点，但始终通过焦点投射。将所有光线的渲染颜色值相加，并将其用作该像素的值（如往常一样，必要时除以恒定衰减因子）。

当然，每个像素使用的光线越多，质量就越好。我一直在使用每像素大约 150 条光线来获得体面但不是很好的质量。你可以用更少的一口（比如 50 或 60 条光线）看到效果，但更少的光线往往会在图像中产生颗粒感，尤其是对于非常失焦的东西。您需要的光线数量还取决于光圈大小：较小的光圈不需要那么多光线，但您不会获得那么多的模糊效果。

显然，这样做会大大增加工作量，实际上是将其乘以每个像素的光线数量，因此，如果您在光线追踪器中还有任何优化要做，现在是做这件事的好时机。如果您碰巧有多个处理器可用，那么好消息是，一旦您找到像素的焦点，这将是令人尴尬的并行。

**多一点解释**

下面的图片应该让您了解正在发生的事情，以及为什么它与眼睛或相机中实际发生的事情相同。它显示了正在渲染的两个像素，一个像素用红色表示，另一个用蓝色表示。从眼睛通过每个像素延伸到焦点“平面”的虚线是您在开始时投射的光线，以确定像素的焦点。半透明锥体表示可以随机选择渲染每个像素的完整光线集（像素 1 的红色锥体，像素 2 的蓝色锥体）。请注意，由于所有光线都通过焦点，因此每个锥体都会在焦点处会聚到一个点。

锥体的重叠区域代表场景中的点，这些点最终可能会同时渲染到像素 1 和像素 2：换句话说，被抹去。由于每个锥体都是焦“平面”上的一个点，因此这里的锥体之间没有重叠，所以这个距离处的点只渲染到一个像素：它们完全聚焦。同时，您离焦“平面”越远（向前或向后），锥体展开得越多，因此在任何给定点重叠的锥体就越多。因此，非常接近或非常远的点往往会被渲染到大量不同的像素上，因此它们会非常失焦。

![用于光线追踪的 DOF 实现模型。](../Images/a84b02b417c51e89845568e3b61786b2.png)

# python - 试图解开一个元组列表然后for循环遍历列表以显示连续高分板Python中的所有元组

> ID：13532950
> 
> 赞同：0
> 
> 时间：2012-11-23T16:41:55.390
> 
> 标签：python, python-2.7

刚接触编码，只学习了一个月的 Python。

我正在解开一个文件，其中包含一个存储用户名、分数和他们完成测试的时间的元组列表。该列表最多可容纳 10 个元组，但是当我解开并使用此 for 循环时，我只能显示一个元组。我希望它连续显示它们。它可能很小，但我一无所知，无法弄清楚，所以希望有人能提供帮助。

目前这是运行时的样子：

```
_______HighScore Board_______
NAME    SCORE   TIME OF ENTRY
bill 28.02 03:27PM 23-November-2012 
```

它不显示任何其他保存的分数，所以我需要创建另一个循环来继续运行列表并打印元组吗？

代码片段如下：

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T18:34:51.553

您的评论“它会覆盖腌制列表而不是添加到它吗？” 是正确的。如果您考虑一下，它不能做任何其他事情：

open (..., 'w') 将打开一个文件进行写入，如果它已经存在，则将其截断为长度 0。换言之，先前的内容被丢弃。

pickle 将创建一个数据包，您可以将其存储或通过网络传递。在这种情况下，您将其写入打开和截断的文件。然后这个文件只包含你刚刚腌制的东西。

因此，在检索内容时，它只会看到您最后输入的内容，因为您在打开文件时删除了其余内容。

你可以做两件事。如果您打开文件进行追加（'ab' 而不是 'wb'），您可以一个接一个地写几个腌制的东西。您还应该能够逐个阅读它们。不过，我不建议这样做，除非文件打算太大以至于您不想将其全部加载到内存中。

通常，在向板添加内容时，您需要读取当前板，将项目添加到列表中，然后将生成的板写回文件（故意覆盖旧板）。

# objective-c - 带有自定义类和@property int 的奇怪东西

> ID：13532952
> 
> 赞同：0
> 
> 时间：2012-11-23T16:42:00.050
> 
> 标签：objective-c, xcode

我使用以下头文件和带有@synthesize 的正文文件创建了一个名为“card”的类。问题是当我尝试获取 typeOfCard 的值时应用程序崩溃。我傻吗？当我调试它时，检查器告诉我这个变量是一个 int 并且它告诉我正确的值，但随后应用程序崩溃并出现以下错误：

***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSArrayM idOfImage]：无法识别的选择器发送到实例 0x190f64e0”

```
#import <Foundation/Foundation.h>

enum cardType {
    hearth = 0,
    bell = 1,
    acorn = 2,
    leaf = 3
    };

@interface card : NSObject {
    int value;
    int idOfImage;
    enum cardType typeOfCard;
}

@property (assign)int value;
@property (assign)int idOfImage;
@property enum cardType typeOfCard;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:44:05.310

错误消息是正确的。我失败了一点，我尝试做 NSARRAY.idOfCard 而不是我的卡片课程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:45:48.790

try changing the following:

1) declare your enum like (tip: use capital letters for enumerators, same as with classes)

```
typedef enum {
    hearth = 0,
    bell = 1,
    acorn = 2,
    leaf = 3
} CardType; 
```

2) correct your @property line

```
@property (assign) CardType typeOfCard; 
```

3) make sure you have the `@synthesize typeOfCard;` in your .m

# css - 当主要元素需要放置在其上方时，如何让 CSS 页脚保持显示

> ID：13532953
> 
> 赞同：0
> 
> 时间：2012-11-23T16:42:01.047
> 
> 标签：css, footer, sticky-footer

我一直在尝试为我的网页创建一个页脚，该页脚将锚定到页面底部。我遇到的问题是，只要将“主要”内容设置为“TOP：0”；无论扩展多少，页脚都保留在主要内容下方。但是，一旦我将主要数据向下移动一点（例如，在我的示例中为“TOP:700px”），页脚数据就会消失在主要数据下方。

我尝试过使用“position:absolute”和“position:relative”，但无论我如何设置，除非所有主要项目都设置为“TOP:0”，否则页脚会消失。

有没有一种方法可以使页脚保持在主要内容下方，无论它在页面上的什么位置？

（原因是我有大约 5 个元素需要放置在页面上的不同位置，但要保持页脚显示）

```
<style>
body 
{
    margin:0;
    padding:0;
    height:100%;
}

table
{
    border: 5px solid #000000;
    color:#000000;
}

#Container
{
    min-height:100%;
    position:relative;
}

#Header
{
    position:absolute;
    top:0;
    width:100%;
    height:5px;
}

#main
{
    padding:10px;
    padding-top:5px;    /* Height of the Header */
    padding-bottom:200px;   /* Height of the Footer */
}

#Footer
{
    position:absolute;
    bottom:0;
    height:200px;
}

#TabOne
{
    position:relative;
    top:700px;
}

#TabFt
{

}
</style>

<div id="container">    
    <div id="header">
    </div>

    <div id="main">

        <table id="TabOne">
            <th>TABLE ONE</th>
        </table>

    </div>

    <div id="footer">
        <Table id="TabFt">
            <th>!!FOOTER SHOULD BE BELOW TABLE ONE!!</th>
        </Table>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:48:24.000

您是否尝试过添加

```
clear: both; 
```

到页脚类？

当我遇到同样的问题时，这似乎对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T12:12:31.593

我不确定这是一个答案还是只是一个“软糖”，但通过更改“top:700px;” 为表格“填充顶部：700px；” 它似乎在做我想做的事。

我确信这是错误的原因，毫无疑问，我很快就会找到。但现在它似乎正在工作。

# java - 这个视图寻呼机的视图是如何创建的？

> ID：13532954
> 
> 赞同：0
> 
> 时间：2012-11-23T16:42:05.117
> 
> 标签：java, android, android-viewpager

我正在学习 android 开发教程，[目前正在尝试了解 viewpager 类的工作原理](http://developer.android.com/training/animation/screen-slide.html#views)。我已经在[此处](http://developer.android.com/shareables/training/Animations.zip)下载了演示应用程序，并且试图了解如何创建视图集合。

我知道有一个常数 NUM_PAGES 设置生成的视图数。我希望在应用程序的入口点找到一个循环或创建价值 NUM_PAGES 个视图的东西，但我找不到任何东西——这让我发疯。

我想要解决的是如何将 5 个视图添加到 ViewPager。它是如何完成的？

这是**MainActivity.java**文件：

```
/*
 * Copyright 2012 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.example.android.animationsdemo;

import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

/**
 * The launchpad activity for this sample project. This activity launches other activities that
 * demonstrate implementations of common animations.
 */
public class MainActivity extends ListActivity {
    /**
     * This class describes an individual sample (the sample title, and the activity class that
     * demonstrates this sample).
     */
    private class Sample {
        private CharSequence title;
        private Class<? extends Activity> activityClass;

        public Sample(int titleResId, Class<? extends Activity> activityClass) {
            this.activityClass = activityClass;
            this.title = getResources().getString(titleResId);
        }

        @Override
        public String toString() {
            return title.toString();
        }
    }

    /**
     * The collection of all samples in the app. This gets instantiated in {@link
     * #onCreate(android.os.Bundle)} because the {@link Sample} constructor needs access to {@link
     * android.content.res.Resources}.
     */
    private static Sample[] mSamples;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Instantiate the list of samples.
        mSamples = new Sample[]{
                new Sample(R.string.title_crossfade, CrossfadeActivity.class),
                new Sample(R.string.title_card_flip, CardFlipActivity.class),
                new Sample(R.string.title_screen_slide, ScreenSlideActivity.class),
                new Sample(R.string.title_zoom, ZoomActivity.class),
                new Sample(R.string.title_layout_changes, LayoutChangesActivity.class),
        };

        setListAdapter(new ArrayAdapter<Sample>(this,
                android.R.layout.simple_list_item_1,
                android.R.id.text1,
                mSamples));
    }

    @Override
    protected void onListItemClick(ListView listView, View view, int position, long id) {
        // Launch the sample associated with this list position.
        startActivity(new Intent(MainActivity.this, mSamples[position].activityClass));
    }
} 
```

这是**ScreenSlideActivity.java**文件：

```
/*
 * Copyright 2012 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.example.android.animationsdemo;

import android.app.Fragment;
import android.app.FragmentManager;
import android.content.Intent;
import android.os.Bundle;
import android.support.v13.app.FragmentStatePagerAdapter;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.NavUtils;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.Menu;
import android.view.MenuItem;

/**
 * Demonstrates a "screen-slide" animation using a {@link ViewPager}. Because {@link ViewPager}
 * automatically plays such an animation when calling {@link ViewPager#setCurrentItem(int)}, there
 * isn't any animation-specific code in this sample.
 *
 * <p>This sample shows a "next" button that advances the user to the next step in a wizard,
 * animating the current screen out (to the left) and the next screen in (from the right). The
 * reverse animation is played when the user presses the "previous" button.</p>
 *
 * @see ScreenSlidePageFragment
 */
public class ScreenSlideActivity extends FragmentActivity {
    /**
     * The number of pages (wizard steps) to show in this demo.
     */
    private static final int NUM_PAGES = 5;

    /**
     * The pager widget, which handles animation and allows swiping horizontally to access previous
     * and next wizard steps.
     */
    private ViewPager mPager;

    /**
     * The pager adapter, which provides the pages to the view pager widget.
     */
    private PagerAdapter mPagerAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_screen_slide);

        // Instantiate a ViewPager and a PagerAdapter.
        mPager = (ViewPager) findViewById(R.id.pager);
        mPagerAdapter = new ScreenSlidePagerAdapter(getFragmentManager());
        mPager.setAdapter(mPagerAdapter);
        mPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
            @Override
            public void onPageSelected(int position) {
                // When changing pages, reset the action bar actions since they are dependent
                // on which page is currently active. An alternative approach is to have each
                // fragment expose actions itself (rather than the activity exposing actions),
                // but for simplicity, the activity provides the actions in this sample.
                invalidateOptionsMenu();
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);
        getMenuInflater().inflate(R.menu.activity_screen_slide, menu);

        menu.findItem(R.id.action_previous).setEnabled(mPager.getCurrentItem() > 0);

        // Add either a "next" or "finish" button to the action bar, depending on which page
        // is currently selected.
        MenuItem item = menu.add(Menu.NONE, R.id.action_next, Menu.NONE,
                (mPager.getCurrentItem() == mPagerAdapter.getCount() - 1)
                        ? R.string.action_finish
                        : R.string.action_next);
        item.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:
                // Navigate "up" the demo structure to the launchpad activity.
                // See http://developer.android.com/design/patterns/navigation.html for more.
                NavUtils.navigateUpTo(this, new Intent(this, MainActivity.class));
                return true;

            case R.id.action_previous:
                // Go to the previous step in the wizard. If there is no previous step,
                // setCurrentItem will do nothing.
                mPager.setCurrentItem(mPager.getCurrentItem() - 1);
                return true;

            case R.id.action_next:
                // Advance to the next step in the wizard. If there is no next step, setCurrentItem
                // will do nothing.
                mPager.setCurrentItem(mPager.getCurrentItem() + 1);
                return true;
        }

        return super.onOptionsItemSelected(item);
    }

    /**
     * A simple pager adapter that represents 5 {@link ScreenSlidePageFragment} objects, in
     * sequence.
     */
    private class ScreenSlidePagerAdapter extends FragmentStatePagerAdapter {
        public ScreenSlidePagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int position) {
            return ScreenSlidePageFragment.create(position);
        }

        @Override
        public int getCount() {
            return NUM_PAGES;
        }
    }
} 
```

最后，这里是 ScreenSlidePageFragment.java 文件：

```
/*
 * Copyright 2012 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.example.android.animationsdemo;

import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

/**
 * A fragment representing a single step in a wizard. The fragment shows a dummy title indicating
 * the page number, along with some dummy text.
 *
 * <p>This class is used by the {@link CardFlipActivity} and {@link
 * ScreenSlideActivity} samples.</p>
 */
public class ScreenSlidePageFragment extends Fragment {
    /**
     * The argument key for the page number this fragment represents.
     */
    public static final String ARG_PAGE = "page";

    /**
     * The fragment's page number, which is set to the argument value for {@link #ARG_PAGE}.
     */
    private int mPageNumber;

    /**
     * Factory method for this fragment class. Constructs a new fragment for the given page number.
     */
    public static ScreenSlidePageFragment create(int pageNumber) {
        ScreenSlidePageFragment fragment = new ScreenSlidePageFragment();
        Bundle args = new Bundle();
        args.putInt(ARG_PAGE, pageNumber);
        fragment.setArguments(args);
        return fragment;
    }

    public ScreenSlidePageFragment() {
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mPageNumber = getArguments().getInt(ARG_PAGE);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // Inflate the layout containing a title and body text.
        ViewGroup rootView = (ViewGroup) inflater
                .inflate(R.layout.fragment_screen_slide_page, container, false);

        // Set the title view to show the page number.
        ((TextView) rootView.findViewById(android.R.id.text1)).setText(
                getString(R.string.title_template_step, mPageNumber + 1));

        return rootView;
    }

    /**
     * Returns the page number represented by this fragment object.
     */
    public int getPageNumber() {
        return mPageNumber;
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-29T08:41:26.467

我想知道自己关于`NUM_PAHES`常量以及它的使用位置。我深入挖掘并为我的项目实现了一个带有真实数据的用例，如下所示。我为`mTranslationObjects`ArrayList 中的片段收集数据，这样我就可以获得寻呼机适配器中给定位置所需的确切对象。

```
public class TrainerActivity extends ActionBarActivity {

/**
 * The pager widget, which handles animation and allows swiping horizontally to access previous
 * and next wizard steps.
 */
private ViewPager mPager;

/**
 * The pager adapter, which provides the pages to the view pager widget.
 */
private PagerAdapter mPagerAdapter;

private List<TranslationObject> mTranslationObjects = new ArrayList<TranslationObject>();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_trainer);

    fillTrainerData();

    // Instantiate a ViewPager and a PagerAdapter.
    mPager = (VerticalViewPager) findViewById(R.id.pager);
    mPagerAdapter = new ScreenSlidePagerAdapter(getSupportFragmentManager());
    mPager.setAdapter(mPagerAdapter);
}

private void fillTrainerData() {
    // putting objects in mTranslationObjects

    ...
    ...
    ...
}

private class ScreenSlidePagerAdapter extends FragmentStatePagerAdapter {
    public ScreenSlidePagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        TrainerFragment trainerFragment = new TrainerFragment();
        Bundle bundle = new Bundle();
        bundle.putString(TrainerFragment.BUNDLE_ORIGINAL_WORD,  mTranslationObjects.get(position).originalWord);
        bundle.putString(TrainerFragment.BUNDLE_TRANSLATION,  mTranslationObjects.get(position).translation);
        bundle.putString(TrainerFragment.BUNDLE_WORD_CONTEXT,  mTranslationObjects.get(position).context);
        trainerFragment.setArguments(bundle);
        return trainerFragment;
    }

    @Override
    public int getCount() {
        return mTranslationObjects.size();
    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:47:59.117

```
 public Fragment getItem(int position) {
        return ScreenSlidePageFragment.create(position);
    } 
```

这是创建片段的地方（每个片段都包含一个视图）。

# c# - 如何计算在GridView中单击一行的次数

> ID：13532955
> 
> 赞同：-1
> 
> 时间：2012-11-23T16:42:07.057
> 
> 标签：c#, gridview, dictionary, shopping-cart

我开发了一个购物车，我需要计算在 gridview 中单击一行的次数以获得该项目的总和。

我试图弄清楚该怎么做，我尝试用字典来获取键（行）和值（计数），但我不知道如何修改字典的值。

```
static Dictionary <int, int> list = new Dictionary <int, int>();

protected void SelectedIndexChanged (object sender, EventArgs e)
{

  for(int i=0 ; i < 100 ; i++)
  {
     list.add(i,0);
  }

  foreach (var item in list)
  {
     if(item == gridview1.GridView1.SelectedRow.DataItemIndex)
        list.key[item] = newInt;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:52:49.487

好的。我认为您需要在事件处理程序之外初始化您的列表。

```
static Dictionary <int, int> list = new Dictionary <int, int>();

static YourClassName
{
  for(int i=0 ; i < 100 ; i++)
  {
     list.add(i,0);
  }
}

protected void SelectedIndexChanged (object sender, EventArgs e)
{ 
  list.[gridview1.GridView1.SelectedRow.DataItemIndex]++;
} 
```

# c# - C#中的JSON数据反序列化

> ID：13532957
> 
> 赞同：0
> 
> 时间：2012-11-23T16:42:13.200
> 
> 标签：c#, .net, json, serialization

我正在尝试反序列化我编写的 Json 格式数据代码

```
 string strJSONData = "[{ \"StatusValue\": \"Test1\", \"StatusValue1\": \"Test2\", \"StatusValue2\": \"Test3\", \"StatusValue3\": \"Test4\", \"test\": \"hibaby\"  }, { \"StatusValue\": \"aTest1\", \"StatusValue1\": \"bTest2\", \"StatusValue2\": \"cTest3\", \"StatusValue3\": \"dTest4\",\"test\": \"hibaby u\" }]";

        JavaScriptSerializer objJavaScriptSerializer = new JavaScriptSerializer();

        List<StatusValueTest> objStatus = objJavaScriptSerializer.Deserialize<List<StatusValueTest>>(strJSONData);

        foreach (StatusValueTest val in objStatus)
        {
            Label1.Text += val.StatusValue;
        }
    } 
```

和两个类：

```
public class StatusValueTest
{

public string StatusValue { get; set; }

public string StatusValue1 { get; set; }

public string StatusValue2 { get; set; }

public string StatusValue3 { get; set; }

public List<StatusList> ram { get; set; }

public StatusValueTest()
{
    ram = new List<StatusList>();
}

} 
```

和

```
public class StatusList
{
    public string test { get; set; }

    public StatusList()
    {

    }
} 
```

JSON数据：`"[{ \"StatusValue\": \"Test1\", \"StatusValue1\": \"Test2\", \"StatusValue2\": \"Test3\", \"StatusValue3\": \"Test4\", \"test\": \"hibaby\" }, { \"StatusValue\": \"aTest1\", \"StatusValue1\": \"bTest2\", \"StatusValue2\": \"cTest3\", \"StatusValue3\": \"dTest4\",\"test\": \"hibaby u\" }]";`

在 StatusValue 中，StatusValue1、StatusValue2、StatusValue3 即将到来但值未进入**测试**。我无法弄清楚为什么会发生这种情况..请在这里帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:48:34.530

你有能力修改你的 JSON 数据吗？它应该看起来更像这样：

```
[{ \"StatusValue\": \"Test1\", 
\"StatusValue1\": \"Test2\", 
\"StatusValue2\": \"Test3\", 
\"StatusValue3\": \"Test4\", 
\"ram\": {\"test"\", hibaby\"} 
}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:51:28.660

如果我做对了你的 json 看起来可能应该像下面这样

```
[{ 
"StatusValue": "Test1", 
"StatusValue1": "Test2", 
"StatusValue2": "Test3", 
"StatusValue3": "Test4", 
"ram ": 
[{
"test":"hibaby" 
},{
"test":"hibaby1" 
}]
}] 
```

# symfony - Symfony2 和 Twig：如何防止标签渲染？

> ID：13532960
> 
> 赞同：0
> 
> 时间：2012-11-23T16:42:16.737
> 
> 标签：symfony, twig

正如标题中所说。我有一个表单类型，并且必须呈现一些没有标签的字段（因为我必须将它们放入表格的单元格中）。我怎样才能做到这一点？

对于这种情况，在线文档的质量似乎非常低。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T18:51:21.630

您不需要更改默认行为..您可以轻松地在模板中仅呈现输入和标签。

```
<form>
    <table>
        <tr>
            <td>
                {{ form_label(form.fieldName) }}
            </td>
            <td>
                {{ form_errors(form.fieldName) }}
                {{ form_widget(form.fieldName) }}
            </td>
        </tr>
    </table>
</form> 
```

如果您不呈现整个表单，请不要忘记`{{ form_widget(form._token) }}`或更简单的使用`{{ form_rest(form) }}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:46:38.577

[您需要按照文档中的](http://symfony.com/doc/current/book/forms.html#form-theming)说明创建自己的“表单主题” 。您可以使用方法`form_label`，`form_errors`并`form_widget`在您想要的地方设置样式。如果您不想要标签，则不要使用该`form_label`功能，而只需使用`form_errors`and`form_widget`功能：

```
{# src/Acme/TaskBundle/Resources/views/Form/fields.html.twig #}
{% block form_row %}
{% spaceless %}
    <div class="form_row">
        {{ form_errors(form) }}
        {{ form_widget(form) }}
    </div>
{% endspaceless %}
{% endblock form_row %} 
```

# ruby-on-rails - Rails 断言的正则表达式以查看路径是否匹配

> ID：13532961
> 
> 赞同：3
> 
> 时间：2012-11-23T16:42:25.383
> 
> 标签：ruby-on-rails, ruby, regex, testing

我正在尝试为 Rails 测试做一个断言，该测试测试方法重定向到某个 URL，但是对于我的断言，该 URL 只是部分完整，因为我不完全确定完整路径是什么。因此，我正在尝试为部分路径编写断言。这就是我所拥有的，但我对正则表达式不是很好。

`assert_match /[#{PAYPAL_CONFIG["url"]}]./, @response.redirect_url`

我希望它与贝宝路径相匹配，然后是之后发生的任何事情，但我不知道如何做到这一点。当我使用此正则表达式进行匹配时，我在测试中遇到错误`empty range in char class: /[https:\/\/www.sandbox.paypal.com\/cgi-bin\/webscr?]./`我知道我的正则表达式是错误的，我试图匹配 paypal url 之后的任何内容。有人可以帮帮我吗？

*我可以看到 [] 括号充当一个或*我想要的是指定的路径以及之后的任何内容。

我已将我的断言更改为：

```
/#{PAYPAL_CONFIG["url"]}.*/ 
```

我的测试通过了，但我收到了这个警告：`WARNING: MiniTest::MINI_DIR was removed. Don't violate other's internals.`我的正则表达式是否正常？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T18:31:33.167

在将其放入正则表达式之前，您应该转义该 url。

就像是

```
/#{Regexp.escape(PAYPAL_CONFIG["url"])}/ 
```

可能会更好。

WRT你的例子，问题出`cgi-bin`在位。正则表达式引擎需要一个连字符来表示一个字符`i-b`范围，这不是一个合法的范围，因为在 i 之上和 b 之下都没有字符。

没有方括号的版本有效的原因是正则表达式引擎仅将连字符解释为括号内的一系列字符，但正则表达式本身仍然会被弄乱。

```
>> foo = "https:\/\/www.sandbox.paypal.com\/cgi-bin\/webscr?"
=> "https://www.sandbox.paypal.com/cgi-bin/webscr?"
>> /[#{foo}]/
RegexpError: empty range in char class: /[https:\/\/www.sandbox.paypal.com\/cgi-bin\/webscr?]/
from (irb):2
>> /[#{Regexp.escape(foo)}]/
=> /[https:\/\/www\.sandbox\.paypal\.com\/cgi\-bin\/webscr\?]/
>> Regexp.escape(foo)
=> "https://www\\.sandbox\\.paypal\\.com/cgi\\-bin/webscr\\?"
>> foo
=> "https://www.sandbox.paypal.com/cgi-bin/webscr?" 
```

# jquery - 底部选项卡的 jQuery 切换动画

> ID：13532963
> 
> 赞同：0
> 
> 时间：2012-11-23T16:42:48.660
> 
> 标签：jquery, animation, tabs, slide

我正在尝试构建一组从底部上升和下降的选项卡。到目前为止，这是我的 jquery 代码

```
$(document).ready(function(){ 
    $(".tab").click(function() { 
        if($(event.target).parent().css('top') == '230px')
            {$(event.target).parent().stop().animate({top:'0px'},1000);};
        if($(event.target).parent().css('top') == '0px')
            {$(event.target).parent().stop().animate({top:'230px'},1000);};
    });
}); 
```

这是我的第一次破解：http: [//jsfiddle.net/X3cbG/4/](http://jsfiddle.net/X3cbG/4/)

我的问题如下：由于我的 html，按钮 1、2 和 3 被第四个 div“覆盖”。

有谁知道如何解决这个问题？在 HTML 或 jquery 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T17:14:06.643

将您的标签 CSS 类更新为：

```
.tab {position:relative; z-index:999; width:100px; text-align:center; cursor:pointer; background:rgb(54, 25, 25); background: rgba(54, 25, 25, .5);} 
```

使用具有 999 z-index 的相对位置，这似乎解决了您提到的问题。

[演示](http://jsfiddle.net/X3cbG/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T17:32:25.820

对于jQuery：

```
 $(document).ready(function(){
  $(".tab").click(function() {
    var getId = $(this).attr('id');
    var top = $('#Sbox'+getId).css('top');
    $('.Sbox').animate({top:'230'}, 1000);
    move(getId, top);
  });
});

 function move(getId, top) {
            if(top == '0px' || top == 'auto')
            {
                $('#Sbox'+getId).animate({top:'230'}, 1000);
            }
            else if(top == '230px')
            {
                $('#Sbox'+getId).animate({top:'0'}, 1000);
            }
        } 
```

# c - C 错误

> ID：13532965
> 
> 赞同：0
> 
> 时间：2012-11-23T16:42:55.430
> 
> 标签：c, indexoutofboundsexception

```
void findWay(int column,int sum,char *array,int s,stack_t sta)
{
 if(array[s+column+2]=='0')
{ 
```

当我调试程序时，我收到一个错误，即“地址 0x53 越界”（if(maze[s+column+2]=='0') 在这一行）。为什么？

有人请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T16:44:22.540

因为`s+column+2`超出了数组的界限，所以需要为分配更多的内存`array`或者确保不要超出分配的内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T16:45:26.607

使用时`var[]`，您取消引用`*var`指针。在这里，由于 0x53 接近于零，它似乎`array`是 NULL。访问时`array[s+column+2]`，您`(s+column+2) * sizeof(*array)`加到零，这肯定会导致`0x53`.

You can verify this printing `array` value with `printf("pointer value : %p\n", array);`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T16:48:44.157

越界总是只意味着一件事，**超出了允许的边界**。因此，当您获得一个*地址*超出范围时，这意味着该*地址*在边界之外。这个边界可以通过程序、数组来定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T16:44:49.423

这意味着 的值`s+column+2`大于数组的长度。

# wcf - 如果我可以使用 ASP.net Web API，我是否需要 WCF

> ID：13532967
> 
> 赞同：2
> 
> 时间：2012-11-23T16:42:57.693
> 
> 标签：wcf, asp.net-web-api

今天我阅读了很多关于 ASP.net Web API 的内容。我是否理解正确，如果我需要一个只需要 HTTP 作为传输的 WebService，我可以使用 ASP.net API 而不需要 WCF？到目前为止，Web API 似乎比 WCF 更容易使用。

最佳托马斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T17:43:24.033

你的问题的答案基本上是肯定的。如果您 a) 只想使用 HTTP，b) 希望您的内容以 XML 或 JSON 形式返回，c) 想要使用 RESTful API 并且 d) 不需要任何高级消息传递功能，那么 Web API 是您的最佳选择。正如您所指出的，它比 WCF 更容易使用。

创建 Web 服务时，您有两个基本选项：基于 SOAP 的服务或 RESTful API。如果您使用的是基于 SOAP 的服务，您应该使用 WCF。如果您使用的是 RESTful 服务，您应该使用 Web API。您可以查看此博客文章以进一步讨论：http: [//blogs.microsoft.co.il/blogs/idof/archive/2012/03/05/wcf-or-asp-net-web-apis-my-两分钱的主题.aspx](http://blogs.microsoft.co.il/blogs/idof/archive/2012/03/05/wcf-or-asp-net-web-apis-my-two-cents-on-the-subject.aspx)

顺便说一句，您选择 SOAP 还是 REST 取决于您的具体情况。一些一般准则如下：

**有利于 SOAP 服务的因素：**

*   您只是服务的消费者，或者消费者范围有限
*   需要诸如事务、WS-Security、可靠消息传递等高级功能
*   服务必须通过 HTTP 以外的其他传输方式公开，例如 TCP、MSMQ、命名管道等。
*   要公开的功能不容易映射到实体或集合上的 CRUD 操作
*   您需要支持复杂类型的强类型
*   网络带宽问题不是问题

**支持 RESTful 服务的因素：**

*   服务必须被大量客户端（即互联网）消费
*   不需要高级功能，例如事务、WS-Security、可靠消息传递等
*   可接受的服务仅通过 HTTP 公开
*   功能很容易映射到实体或集合上的 CRUD 操作
*   您需要支持其他媒体类型，例如 JSON 或 YAML
*   网络带宽问题考虑

**编辑：** 响应您的评论，如果您使用 WCF/SOAP，您可以使用 SOAP 支持的广泛功能。这包括事务、可靠消息传递、各种消息传递模式（单向、双工等）和 WS-Security。这些标准由[OASIS 标准机构](https://www.oasis-open.org/standards)维护，通常称为 WS-*。可以在[此处](http://en.wikipedia.org/wiki/List_of_web_service_specifications)找到 WS-* 标准的列表。

如果您使用 Web API/REST，则不能使用任何 WS-* 功能。但是，仍然可以使用 IIS 和 ASP.Net 中提供的标准身份验证技术对 RESTful 服务的访问进行身份验证和授权。有关这方面的更多信息，请参阅以下链接：

[http://codebetter.com/johnvpetersen/2012/04/02/making-your-asp-net-web-apis-secure/](http://codebetter.com/johnvpetersen/2012/04/02/making-your-asp-net-web-apis-secure/)

[http://stevescodingblog.co.uk/basic-authentication-with-asp-net-webapi/](http://stevescodingblog.co.uk/basic-authentication-with-asp-net-webapi/)

以及其中一些[博客帖子](http://leastprivilege.com/2012/03/)。

# javascript - 将自定义下拉/按钮添加到 Redactor 所见即所得

> ID：13532968
> 
> 赞同：1
> 
> 时间：2012-11-23T16:42:59.007
> 
> 标签：javascript, jquery, wysiwyg, redactor

我有两个问题：

1.  我试图有一个这样的按钮：

    ```
    buttons: buttons,
    buttonsCustom: {
      sh: {
        title: 'Syntax Highlighter', 
        callback: function(){
          var html = "<pre class='brush:'></pre>";
          this.execCommand('inserthtml', html);
        }
      }
    } 
    ```

    我的按钮出现了，但是当我点击它时，它说“this”没有“execCommand”功能。它是如何工作的 ？我怎么能说“这个”是 Redactor ？你知道我的意思 ？

2.  是否可以创建一个下拉列表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T17:00:39.577

我想添加一个自定义按钮，就像在 redactor 中一样。我拿走了你的代码，并为我的目的更改了代码。它对我有用，你可以看看：

```
$(document).ready(
    function()
    {
        $('.redactor').redactor({ 
            focus: true,
            buttonsAdd: ['|', 'token'], 
            buttonsCustom: {
                token: {
                    title: 'Ajouter une variable', 
                    dropdown: {
                        header: {title: 'Entête',callback: function(obj){obj.insertHtml('%header%');}},
                        footer: {title: 'Signature',callback: function(obj){obj.insertHtml('%footer%');}},
                        last_name: {title: 'Nom',callback: function(obj){obj.insertHtml('%last_name%');}},
                        first_name: {title: 'Prénom',callback: function(obj){obj.insertHtml('%first_name%');}},
                        date: {title: 'Date',callback: function(obj){obj.insertHtml('%date%');}},
                        contract: {title: 'Contrat',callback: function(obj){obj.insertHtml('%contract%');}}
                    }
                } 
            }
        }); 
    }
); 
```

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T16:51:58.270

我自己修好了：

```
callback: function(obj){
  var html = "<pre class='brush:'></pre>";
  obj.execCommand('inserthtml', html);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T18:30:12.470

查看编辑器源代码（最新版本 8.2.6），我注意到您可以将第四个参数传递给插件 API 的`addBtn`函数来描述下拉菜单。所以，假设你想从插件内部添加一个字体大小下拉菜单：

```
RedactorPlugins.fontSize = {

    init: function(obj) {

        btnCallback = function(obj,event,key) {
            // button actions, if any
        }

        dropdown = {
            small: {
                title: 'Small'
                callback: function(obj,event,key) { //set the font size to small }
            }
            medium: {
                title: 'Medium'
                callback: function(obj,event,key) { //set the font size to medium }
            }
        }

        this.addBtn('fontSize','Change font size', btnCallback, dropdown);
    }

} 
```

# com - 使用 WinHttp.WinHttpRequest 查找检索到的二进制数据的大小

> ID：13532969
> 
> 赞同：2
> 
> 时间：2012-11-23T16:43:03.657
> 
> 标签：com, autohotkey, winhttp, winhttprequest

我最近意识到 URLDownloadToFile 使用 IE 代理设置。所以我正在寻找替代方案，发现 WinHttp.WinHttpRequest 可能有效。

似乎 ResponseBody 属性包含获取的数据，我需要将其写入文件。问题是我找不到它的字节大小。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa384106%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384106%28v=vs.85%29.aspx)有该对象的信息，但我没有找到它的相关属性。

有人能告诉我怎么做吗？

```
strURL := "http://www.mozilla.org/media/img/sandstone/buttons/firefox-large.png"
strFilePath := A_ScriptDir "\dl.jpg"

pwhr := ComObjCreate("WinHttp.WinHttpRequest.5.1")
pwhr.Open("GET", strURL) 
pwhr.Send() 

if (psfa := pwhr.ResponseBody ) {   
    oFile := FileOpen(strFilePath, "w")
    ; msgbox % ComObjType(psfa) ; 8209 
    oFile.RawWrite(psfa, strLen(psfa)) ; not working
    oFile.Close()   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T11:26:45.057

我自己找到了方法。

由于`psfa`是一个字节数组，简单的元素个数就代表了它的大小。

```
msgbox % psfa.maxindex() + 1    ; 17223 bytes for the example file. A COM array is zero-based so it needs to add one. 
```

但是，为了保存存储在安全数组中的二进制数据，使用文件对象并不成功。（可能有办法，但我找不到）相反，它`ADODB.Stream`就像一个魅力。

```
strURL := "http://www.mozilla.org/media/img/sandstone/buttons/firefox-large.png"
strFilePath := A_ScriptDir "\dl.png"
bOverWrite := true

pwhr := ComObjCreate("WinHttp.WinHttpRequest.5.1")
pwhr.Open("GET", strURL) 
pwhr.Send() 

if (psfa := pwhr.ResponseBody ) {   
    pstm := ComObjCreate("ADODB.Stream")
    pstm.Type() := 1        ; 1: binary 2: text
    pstm.Open()
    pstm.Write(psfa)
    pstm.SaveToFile(strFilePath, bOverWrite ? 2 : 1)
    pstm.Close()    
} 
```

# jquery - 如果孩子的可见性发生变化，则调整容器大小（jQuery）

> ID：13532970
> 
> 赞同：1
> 
> 时间：2012-11-23T16:43:03.843
> 
> 标签：jquery, resize, visibility

海

我对 jQuery 很陌生，我无法解决这个问题：

我有一个`#content`容器，里面有 2 个信息框。当点击信息按钮时，它们变得可见（通过切换 jQuery 功能）。

我的问题是， 的大小`#content`不会“调整大小”，我的意思是，它不会变大，所以信息框与下一个容器重叠。

我该如何预防？是否有根据内容的可见性调整容器大小的功能？

编辑：

抱歉不准确，代码如下：

* * *

```
 <div id="content">
. . .

<script type="text/javascript">
$(function(){
  $('#info_icon').on('click mouseover',(function(){
     $('#info_text').toggle("slow");
  }));
});
</script>

<script type="text/javascript">
$(function(){
  $('#project_icon').on('click mouseover',(function(){
     $('#project_text').toggle("slow");
  }));
});
</script>

  <div id="info_text" style="display:none;">
...
  </div>

  <div id="project_text" style="display: none;">  
...
  </div>
  </div> 
```

* * *

```
#content {
    background-color: #b12a28;
    padding-left: 10%;
    padding-top: 3%;
    height: auto;
}

#info_text {
    background-color: #FFF;
    opacity: 0.8;
    float: left;
    height: 40%;
    width: 25%;
    padding: 10px;
    margin-right: 3%;
    margin-bottom: 10%;
}

#project_text {
    background-color: #FFF;
    opacity: 0.8;
    float: left;
    height: 40%;
    width: 25%;
    padding: 10px;
    clear: none;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:48:58.620

第一个猜测是有一种方法可以解决这个问题，而不是使用 jQuery/javascript，而是使用 CSS，但是您的用例的细节没有说明，所以很难说。

至于用javascript做，也许这个元代码会有所帮助

```
1) Detect KeyStroke event or #content on change
2) Get the size of the various containers your are employing (e.g. $("#content").width(),height, etc)
3) Resize the #content container such that it accommodates both boxes 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:49:11.720

你有没有在css中给容器一个固定的大小？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T17:14:44.443

这听起来像是一个不需要 javascript 来修复的 CSS 问题。您可以发布链接、代码或 jsfiddle 吗？

# java - 使用没有加载功能的番石榴缓存

> ID：13532978
> 
> 赞同：38
> 
> 时间：2012-11-23T16:43:33.480
> 
> 标签：java, caching, guava

我的 java 应用程序有一个缓存，我想换出当前的缓存实现并用番石榴缓存替换它。

不幸的是，我的应用程序的缓存使用似乎与番石榴缓存的工作方式不匹配。我想要的只是能够创建一个空缓存，使用“get”方法从缓存中读取一个项目，并使用“put”方法将一个项目存储在缓存中。我不希望“get”调用尝试将项目添加到缓存中。

LoadingCache 类似乎有我需要的 get 和 put 方法。但是我无法弄清楚如何在不提供“加载”功能的情况下创建缓存。

我的第一次尝试是这样的：

```
LoadingCache<String, String> CACHE = CacheBuilder.newBuilder().build(); 
```

但这会导致此编译器错误：不兼容的类型；不存在类型变量 K1,V1 的实例，因此 Cache 符合 LoadingCache

显然我必须传入一个具有“加载”方法的 CacheLoader。

（我想我可以创建一个 CacheLoader，它有一个“加载”方法，只是抛出一个异常，但这似乎有点奇怪和低效。这是正确的做法吗？）

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-23T16:55:09.877

[`CacheBuilder.build()`](http://google.github.io/guava/releases/snapshot-jre/api/docs/com/google/common/cache/CacheBuilder.html#build--)返回一个非加载缓存。正是你想要的。只需使用

```
Cache<String, String> cache = CacheBuilder.newBuilder().build(); 
```

# regex - 意外的标记 ”;;” ocaml

> ID：13532989
> 
> 赞同：2
> 
> 时间：2012-11-23T16:44:15.583
> 
> 标签：regex, string, ocaml

这可能是愚蠢的，但我只是没有看到它。这是我的代码

```
let rec lister old fixed = 
    let paren = Str.regexp "(|)" in 
    match old with
    [] -> []
    | h::t -> if Str.string_match paren h 0 
                 then iter t ((Str.split_delim paren h)@fixed)  
              else  iter t (h::fixed) 
;;

let stl string = 
    let r = Str.regexp " " in 
    let l = lister (Str.split r string) [] 
;; 
```

错误在最后;; 我得到了意想不到的令牌“;;”。我试着修改它有点像

```
let stl string = 
    let l = lister (Str.split (Str.regexp " ") string) [] 
;; 
```

但仍然没有。我认为 lister 函数不会产生影响，但无论如何我已经包含了它。想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T16:46:48.333

您有一个不完整的 let-in 表达式：

```
let stl string = 
    let r = Str.regexp " " in 
    let l = lister (Str.split r s) [] 
```

试试这个：

```
let stl string = 
   let r = Str.regexp " " in 
   lister (Str.split r s) [] 
```

或者你可以做一些等效的事情：

```
let stl string = 
   let r = Str.regexp " " in 
   let l = lister (Str.split r s) [] in
   l 
```

查看[OCaml 文档](http://caml.inria.fr/pub/docs/manual-ocaml/expr.html)以获取更多信息。

# python - Imshow 中的日志视图

> ID：13532991
> 
> 赞同：0
> 
> 时间：2012-11-23T16:44:38.957
> 
> 标签：python

> **可能重复：**
> [imshow 中的对数 yscale](https://stackoverflow.com/questions/13478460/logarithmic-yscale-in-imshow)

在我的 imshow 视图中，我想要`y`. 喜欢的答案`yscale('log')`不是我的答案。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T16:58:46.177

Do you mean you want the yaxis to be the "log scale" of the data your are plotting in the plot? The difficulty of doing this with imshow() is that the structure in y is fundamentally linear, that is, imshow just shows *everything* as it's structured in the dataset.

A hack would be to simply copy more data into the plot in such a way that the data reflects a log distribution, so the "lower values" are weighted within the set.

Another track to take would be to try a meshgrid approach, this answer for a different question may help there:

[Python matplotlib - formatting with meshgrid for user-defined function](https://stackoverflow.com/questions/9896130/python-matplotlib-formatting-with-meshgrid-for-user-defined-function)