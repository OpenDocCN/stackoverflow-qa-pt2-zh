# StackOverflow 问答 12904000-12904999

# mysql - 多表成行显示

> ID：12904000
> 
> 赞同：0
> 
> 时间：2012-10-15T21:07:13.370
> 
> 标签：mysql, select, html-table

出于某种原因，这给了我一个错误？

```
$result = mysql_query("SELECT wpjb_job.*,
                              wpjb_category.* 
                         FROM wpjb_job , 
                              wpjb_category
                        WHERE (is_filled='0' AND is_active='1')
                          AND wpjb_job.job_category = wpjb_category.id
                          AND job_country={$countryid}
                        ORDER BY wpjb_job.job_title") or die(mysql_error()); 
```

这是错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 6 行的“ORDER BY wpjb_job.job_title”附近使用正确的语法

据我所知，我在服务器上有 mySQL 5.1。该代码仍然有效，但在表格之后给出了错误。

我将其更改为以下只是为了测试。 **现在它运行良好，但是它会两次打印表格的标题**，一次在开头，然后在结尾。更改在 $countryid 上，我现在将其设置为 '$countryid' 这没有错误

下面的代码与表格的打印

```
$joburl = "http://www.x.com/job/view/";
        $result = mysql_query("SELECT wpjb_job.*,wpjb_category.* 
                                    FROM wpjb_job , wpjb_category
                                        WHERE (is_filled='0' AND is_active='1')
                                        AND wpjb_job.job_category = wpjb_category.id
                                        AND job_country='$countryid' 
                                        ORDER BY job_title") 
                    or die(mysql_error());

        echo "<table border='1'>";
        echo "<tr> <th>Job</th> <th>Company</th> <th>Industry</th> </tr>";

// keeps getting the next row until there are no more to get

    while($row = mysql_fetch_array( $result )) {

// Print out the contents of each row into a table

        echo "<tr><td>"; 
        echo '<a href ="http://www.x.com/job/view/'.$row['job_slug'].'"> '.$row['job_title'].' </a>';
        echo "</td><td>"; 
        echo $row['company_name'];
        echo "</td><td>";
        echo $row['title'];
        echo "</td></tr>"; 
    } 
    echo "</table>";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T22:52:44.173

花括号（复杂语法）通常仅用于评估数组元素或对象属性以及其他复杂表达式（`{$array[val]}`或`{$this->object}`）。您可以从查询中删除它们。这可能会导致您的查询无法根据您的 PHP 版本和变量范围进行解释。您可以通过`echo`对查询字符串 ( `echo "SELECT {$countryid}";`) 执行检查来进行检查。

此外，[不推荐](http://www.deprecatedphp.com/mysql)`mysql_`使用函数，如果要传递用户生成的变量，则应使用函数或绑定参数。`mysqli_``PDO`

您的查询也使用隐式连接语法。在编写连接查询时应该练习显式语法（见下文）。最后，始终使用列列表而不是全选 ( `SELECT *`) 以防止不必要的开销。

```
SELECT a.col1, a.col2, b.col1
FROM wpjb_job a
INNER JOIN wpjb_category b ON b.id = a.job_category
WHERE (is_filled=0 AND is_active=1)
    AND a.job_country = $countryid
ORDER BY a.job_title 
```

# sphinx - 用于 Sphinx 重新索引的标准 CRON 作业或 Gearman/CRON？

> ID：12904005
> 
> 赞同：0
> 
> 时间：2012-10-15T21:07:34.767
> 
> 标签：sphinx, gearman

在过去的几天里，我一直在掌握 Sphinx，以便为自动完成功能的后端提供动力。感谢几个 SO 用户（BarryHunter 是最有帮助的）我现在有了一个完整的工作设置，包括几个索引、增量索引器等等。

剩下的就是决定自动化方法来运行增量重新索引并合并到核心索引。

我的意图是让增量索引每 5 分钟更新一次，核心索引/增量索引每 24 小时合并一次。

我的理解是，这是通过设置 cron 作业以最简单的形式实现的。但是，当我对它们将花费的时间量没有 100% 的信心时，我真的不喜欢运行 cron 作业。索引将快速增长，并希望避免处于不得不处理重新索引 cron 作业的位置，这些作业与研磨所有内容重叠。

出于这个原因，我发现自己正在考虑使用 gearman 来更有效地处理工作量。

我想从任何更有经验的 sphinx 用户那里知道（特别是如果他们使用 gearman 运行了类似的设置）如下：

*   对于初学者来说，这是个好主意吗？
*   这甚至是必要的吗（超过 2000 万行的索引是否需要超过 5 分钟才能完成）
*   以前从未使用过 gearman，有什么需要注意的陷阱吗？
*   使用 gearman 管理实时属性更改怎么样？为了提供即时索引删除等。值得吗？

所以实际上这是一个关于这种设置的一般建议问题，而不是一个具体的问题（我希望是允许的）。我宁愿在这里问，也不愿在接下来的 24 小时内与 gearman 交手，却发现它不是管理 sphinx 索引的好解决方案。

注意：在过去的一个小时里，我一直在搜索有关此确切设置的信息，但发现的很少。因此，我在这里询问 SO 的原因。

提前感谢您提供的任何建议。

# jquery - 变量的getjson替代方法

> ID：12904006
> 
> 赞同：2
> 
> 时间：2012-10-15T21:07:37.637
> 
> 标签：jquery, json

我制作了一个脚本，它从 json 文件中获取数据并解析它。它在网络服务器上工作。

但现在我必须找到一种解决方案，让它在本地文件 ( `file:///C:/xampp/htdocs/script/index.html`) 上运行，而不是在服务器上运行。它仅适用于 FF：

```
$.getJSON('data2.json', function(data) {   
    $.each(data.selection_form.entities, function(i,name){
        ...do something
     });
}); 
```

有任何想法吗？本地网络服务器不是解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T21:13:17.977

您可以通过为函数指定“jsonp”的数据类型来强制 jQuery 通过[JSONP加载文件。](http://en.wikipedia.org/wiki/JSONP)`$.ajax()`这将使您的浏览器创建一个`<script>`标签来加载文件，而不是依赖于 XmlHttpRequest。但是，您需要将数据包装在回调函数中。

*注意：*虽然您可以`$.getJSON(..)`通过 JSONP 加载数据，但您不能显式指定回调函数（加载静态文件需要该回调函数，因为 jQuery 使用更改回调函数名称）。

你的代码：

```
$.ajax({ 
    url: 'data2.json', 
    dataType: 'jsonp', 
    jsonpCallback: 'mycallback', 
    jsonp: false,
    success: function(data){
        $.each(data.selection_form.entities, function(i, name) {
            ... do something
        }
    }
}); 
```

请注意`jsonpCallback: 'mycallback'`，我们将把原始 data2.json 文件中的数据包装在对名为 的函数的调用中`mycallback`：

```
mycallback({ /* your data */ }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T21:33:22.400

这是另一种选择。

我们可以自己构建 JSONP，以获得一次性解决方案：

```
function mycallback(data){
    $.each(data.selection_form.entities, function(i,name){
        ...do something
    }
}

$('body').append('<script src="data2.json" type="text/javascript"></script">'); 
```

本质上，这就是 jQuery 的工作方式——但没有那么复杂。

# xcode - 如何将 com.apple.compilers.llvm.clang.1_0 检测为预处理器宏？

> ID：12904008
> 
> 赞同：-1
> 
> 时间：2012-10-15T21:07:47.857
> 
> 标签：xcode, macos, gcc, llvm

我有一些代码无法使用 xcode4.5 中默认的 llvm 编译器编译，我如何#ifdef 输出该代码？

感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T21:12:58.793

我建议您修复您的代码，您可能依赖于恰好被其他编译器接受的未定义/未指定行为。发布您的代码和错误消息，我们可以帮助您修复它。

但是，如果您坚持只治疗症状而不是原因，您可以通过从终端运行以下命令来找出编译器定义的预处理器宏：

```
# This should work for any GCC, LLVM, or Clang variant
/path/to/your/compiler -dM -E -xc /dev/null | sort 
```

从该输出中，查找指示特定编译器和版本的宏。

# c - bmake：正确使用自动变量

> ID：12904011
> 
> 赞同：5
> 
> 时间：2012-10-15T21:08:15.990
> 
> 标签：c, makefile

```
CC = gcc
CFLAGS = -std=c99 -Werror
VPATH = ./src:./include

.MAIN: libstring.so
.PHONY: clean

libstring.o: libstring.c libstring.h
    $(CC) $(CFLAGS) -c $< -I ./include -o $@

libstring.so: libstring.o
    $(CC) -fPIC -shared $< -o $@

clean:
    rm -rf ./*.o ./*.so 
```

在上面的代码片段中，我对是否`<`正确使用自动变量特别感兴趣。如果源/先决条件是 ac 源文件，则此方法有效，但对于目标文件似乎失败。

编译时，我收到错误：

```
gcc -fPIC -shared  -o libstring.so
gcc: No input files specified 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T03:58:15.367

您*确定*您使用的是 GNU make 吗？您编写的代码将按照您在 GNU make 中的预期工作。但是，其他版本的 make 不支持显式规则中的自动变量，仅支持后缀（隐式）规则。例如，如果您使用 SunOS/Solaris make，那么`$<`在显式规则上将为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T19:39:38.533

出色地。我真的不能告诉你为什么会发生这种情况，但我可以重现它，并且我有一个解决方法——至少——可以为你节省一半的工作。

我正在使用 freebsd (9.0) 并且对局部变量具有完全相同的效果，无论我使用像 $<、$@ 这样的快捷方式（不再推荐 - 请参阅手册页）还是像 ${ 这样的“长”名称。目标}。我也尝试了不同的位置，但似乎总是一个本地变量被简单地忽略了。所以，如果你使用这个语句：

```
libstring.so: libstring.o
    $(CC) -fPIC -shared libstring.o -o $@ 
```

一切都编译得很好。我目前仍在尝试，但我猜您的代码不是在 freebsd 机器上创建的，因此部分 Makefile 和项目可能带有 gnu 设置，这有点混乱。

关于我上面提到的“一个”，我在这里有一些 Makefile，其中添加另一个不同的变量（例如 $^）也会导致工作条目。像这样：

```
libstring.so: libstring.o
    $(CC) -fPIC -shared $< -o $@ $^ 
```

我还在坚持，因为我从 linux 移植了很多到 freebsd，所以也许我找到了最后一点。但我的猜测是，它不是“原始”freebsd 源代码，所以 Makefile 语法也不是。

调用***make -d A***，查看 make 命令如何处理本地变量

问候吉米

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T21:11:34.563

`$^`在这种情况下， 您可能想要。`$^`是所有先决条件的列表，而`$<`是比目标最近更改的单个先决条件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-16T04:10:18.090

我无法重现您描述的现象。您的问题陈述不完整或您的版本`make`有错误。

```
brian@hplaptop:~/src/so/mk$ echo 'int foo;' > libstring.c
brian@hplaptop:~/src/so/mk$ cat Makefile

all: libstring.so

libstring.so: libstring.o
    $(CC) -fPIC -shared $< -o $@

brian@hplaptop:~/src/so/mk$ make
cc    -c -o libstring.o libstring.c
cc -fPIC -shared libstring.o -o libstring.so
brian@hplaptop:~/src/so/mk$ make --version
GNU Make 3.81
Copyright (C) 2006  Free Software Foundation, Inc.
This is free software; see the source for copying conditions.
There is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE.

This program built for x86_64-pc-linux-gnu 
```

# asp.net-mvc - 验证错误在 asp.net mvc 中不可见 partialView

> ID：12904014
> 
> 赞同：1
> 
> 时间：2012-10-15T21:08:31.320
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我有一个带有 DropDownList 控件和文本框的部分视图。

当未选择任何内容或未输入文本时，ModelState.IsValid 为 FALSE

但是我看不到在我的属性上显示的任何验证错误。

这是为什么？我可以在 ModelState.Value.Errors 属性中看到“名称是

缺失”例如。

当我确认无效视图时，我在输出窗口中看到：

```
A first chance exception of type 'System.InvalidOperationException' occurred in System.Web.Mvc.dll
A first chance exception of type 'System.InvalidOperationException' occurred in System.Web.Mvc.dll
A first chance exception of type 'System.InvalidOperationException' occurred in System.Web.Mvc.dll

public ActionResult Edit()
{
    return LoadEditTemplates();
}

[HttpPost]
public ActionResult Update(EditTemplateListViewModel viewModel)
{
    if (ModelState.IsValid && !_templateDataProvider.TemplateExists(viewModel.Name))
    {
        Template template = Mapper.Map<EditTemplateListViewModel, Template>(viewModel);
        _templateDataProvider.UpdateTemplate(template);
        return new JsonNetResult(new { success = true });
    }

    return PartialView(viewModel);
}

private ActionResult LoadEditTemplates()
{
    var templates = _templateDataProvider.GetTemplates();
    EditTemplateListViewModel editTemplateViewModel = new EditTemplateListViewModel()
    {
        DisplayList = Mapper.Map<IEnumerable<Template>, IEnumerable<TemplateViewModel>>(templates),
    };
    return PartialView(editTemplateViewModel);
}

public class EditTemplateListViewModel
    {
        [Required(ErrorMessage = "No template selected.")]
        public int TemplateId { get; set; }

        [Required(ErrorMessage="Name is missing")]
        public string Name { get; set; }

        public IEnumerable<TemplateViewModel> DisplayList { get; set; }      
    }

@model ITMS.Web.Models.EditTemplateListViewModel

@*Remote Validation*@
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm("Update", "Template"))
{       
    @Html.ValidationSummary(false)
    @Html.DropDownListFor(x => x.TemplateId, new SelectList(Model.DisplayList, "TemplateId", "Name"), new { @class = "listviewmodel" })

    <p class="editor-label">@Html.LabelFor(model => model.Name)</p>
    <p class="editor-field">@Html.EditorFor(model => model.Name)</p>
    <p class="editor-field">@Html.ValidationMessageFor(model => model.Name)</p>   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:02:15.027

Insated Of using Html,BeginForm 使用 Ajax.BeginForm 提交您的局部视图

```
 //In partial View 

<div id="targetId">
     @using (Ajax.BeginForm("Update", "Template", new AjaxOptions { HttpMethod="POST", UpdateTargetId="targetId"}))
        {       
            @Html.ValidationSummary(false)
            @Html.DropDownListFor(x => x.TemplateId, new SelectList(Model.DisplayList, "TemplateId", "Name"), new { @class = "listviewmodel" })

            <p class="editor-label">@Html.LabelFor(model => model.Name)</p>
            <p class="editor-field">@Html.EditorFor(model => model.Name)</p>
            <p class="editor-field">@Html.ValidationMessageFor(model => model.Name)</p>   
        } 
```

部分视图的返回类型是**字符串**，因此您可以在服务器端捕获它，在 ajax 选项中，您必须指定 HttpMethod 和 UpdateTargetId 您希望在视图中显示结果的位置。这里我用 div 引用您的 Ajax.BegionForm 并给出 UpdateTargetId 是div ID，以便在发生错误时将视图附加到同一 div

在控制器中

```
[HttpPost]
public string Update(EditTemplateListViewModel viewModel)
{
    if (ModelState.IsValid && !_templateDataProvider.TemplateExists(viewModel.Name))
    {
        Template template = Mapper.Map<EditTemplateListViewModel, Template>(viewModel);
        _templateDataProvider.UpdateTemplate(template);
        return new JsonNetResult(new { success = true });
    }

    return RenderPartialViewToString("PartialViewName",viewModel);
}

protected string RenderPartialViewToString(string viewName, object model)
        {
            if (string.IsNullOrEmpty(viewName))
                viewName = ControllerContext.RouteData.GetRequiredString("action");

            ViewData.Model = model;

            using (StringWriter sw = new StringWriter())
            {
                ViewEngineResult viewResult = ViewEngines.Engines.FindPartialView(ControllerContext, viewName);
                ViewContext viewContext = new ViewContext(ControllerContext, viewResult.View, ViewData, TempData, sw);
                viewResult.View.Render(viewContext, sw);
                return sw.GetStringBuilder().ToString();
            }
        } 
```

通过将 partialViewName 和 Model 传递给 RenderPartialViewToStringit 将返回您的**RenderHtml**视图。

注意：在使用 Ajax.BeginForm 之前，请确保添加以下脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T15:36:53.087

当我从 post 操作返回数据时，我意识到 Argument cast 异常，因为我没有将数据传递给 SelectItem 列表“DisplayList”。它是空的，因此砰...

我刚刚填充了丢失的数据以重新显示视图，并且错误可见:) 哎呀......我已经介入了一次失败......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T21:43:59.650

由于服务器端代码工作正常，我建议检查所需的 JQuery 库是否已正确加载。

```
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 
```

# sql - 在 sql 中使用 JOIN 使用 id 从同一服务器中的另一个数据库获取数据

> ID：12904017
> 
> 赞同：0
> 
> 时间：2012-10-15T21:08:32.070
> 
> 标签：sql

我一直在尝试对此进行测试，但到目前为止还没有成功。我正在尝试使用用户 ID 获取用户的不同字符。这两个不同的表很简单，用户只有一个 id 和一个名称，id 是主键，字符表只有一个 id（主键）、characterName 和用户 id。我一直在尝试使用 W3schools，但是当我尝试选择第二个表时，它会引发错误。

```
 CREATE PROCEDURE searchUserCharacter
    -- Add the parameters for the stored procedure here
    @userId INT
    AS
    BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

SELECT Id,character
FROM tableUser.dbo.[user]
INNER JOIN tableUserCharacter.dbo.userCharacter
ON tableUser.dbo.[user].Id=tableUserCharacter.dbo.userCharacter.userId
    END
    GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T21:13:16.953

使用别名

```
SELECT myUsers.Id,myUserCharacters.character
FROM tableUser.dbo.[user] myUsers
INNER JOIN tableUserCharacter.dbo.userCharacter myUserCharacters
ON myUsers.Id=myUserCharacters.userId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T21:34:48.980

这是 SQL Server 吗？仔细检查您的表并确保表名和列名完全匹配。确保表确实在模式“dbo”中

如果这是在 SQL Server 中，请进入管理工作室，右键单击一个表并生成一个选择语句并运行它。确保上面的表名和列名与 select 语句中的匹配。

似乎问题就在身边

```
tableUserCharacter.dbo.userCharacter 
```

因此，在同一台服务器上，切换到数据库**tableUserCharacter**并确保这些表存在于**dbo**模式中。

# graph - 从 jqplot 中删除 x 和 y 轴线

> ID：12904023
> 
> 赞同：5
> 
> 时间：2012-10-15T21:09:00.763
> 
> 标签：graph, jqplot, bar-chart

我不想要 jqplot 上的 X 和 Y 轴线。像这样的东西![在此处输入图像描述](../Images/db15bf8a652e21fd1870fcb0a3e0600e.png)

我应该如何做到这一点。

我尝试了 jqplot 的各种选项，例如 showGrid: false 等...没有任何效果

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T09:33:43.537

试试这个选项：

```
axesDefaults: {
    rendererOptions: {
        baselineWidth: 1.5,
        drawBaseline: false
    }
},
grid: {
    drawBorder: false,
    borderWidth:0, 
    shadow:false
},
xaxis: { 
        drawMajorGridlines: false
} 
```

# cakephp - cakephp分页仅在某些列上排序

> ID：12904031
> 
> 赞同：1
> 
> 时间：2012-10-15T21:09:20.650
> 
> 标签：cakephp, pagination, cakephp-1.3

我在控制器中有以下代码。`Claim.number`我可以按除和之外的所有字段进行排序`Payer.abbr`。有人知道为什么会这样吗？

```
$this->paginate = array(
    'fields' => array(
        'PaymentException.*', 'Procedure.id', 'Procedure.cpt',
        'Procedure.expected_amount', 'Procedure.allowed_amount', 'Procedure.difference_amount',
        'Claim.id', 'Claim.number', 'Payer.abbr'
    ),
    'limit' => 50,
    'joins' => array(
        array(
            'table' => 'procedures',
            'alias' => 'Procedure',
            'conditions' => array('Procedure.id = PaymentException.procedure_id')
            ),
        array(
            'table' => 'claims',
            'alias' => 'Claim',
            'conditions' => array('Claim.id = Procedure.claim_id')
        ),
        array(
            'table' => 'payers',
            'alias' => 'Payer',
            'conditions' => array('Payer.id = Procedure.payer_id')
        ),
        array(
            'table' => 'groups',
            'alias' => 'Groups',
            'conditions' => array('Groups.id = Claim.group_id')
        ),
    array(
        'table' => 'exception_workflow_logs',
        'alias' => 'ExceptionWorkflowLog',
        'conditions' => array('ExceptionWorkflowLog.exception_id = PaymentException.id')
    )
    ),
    'conditions' => $conditions
); 
```

所有字段都已在视图中完成，例如：

`<?php echo $this->Paginator->sort('Claim', 'Claim.number'); ?>`

我在 URL 中看到它们，但它从不按`Claim.number`or排序`Payer.abbr`。我不明白为什么会这样。

在我的条件数组中，我有：

```
array
  0 => string 'Procedure.difference_amount < 0' (length=31)
  1 => string 'PaymentException.finalized IS NULL' (length=34) 
```

请注意，即使在正确排序的列上，条件数组也保持不变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T10:26:09.993

您不能同时使用连接和可包含。您将需要删除包含并使用连接或在第二个查询中获取包含的记录。

# internet-explorer-8 - SSRS Report Manager，以其他用户身份登录

> ID：12904032
> 
> 赞同：1
> 
> 时间：2012-10-15T21:09:22.820
> 
> 标签：internet-explorer-8, ssrs-2008, reportmanager

Microsoft 的报告管理器文档在这里：

[http://msdn.microsoft.com/en-us/library/ms157147(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms157147%28v=sql.105%29.aspx)

状态启动报告管理器：

> 2.在 Web 浏览器的地址栏中，键入报告管理器 URL。默认情况下，URL 是 http://{ComputerName}/reports。

使用 IE 8 登录失败，因为用户帐户显然没有正确的权限。

如果我再次尝试登录，IE 8 会继续显示错误消息。

是否有强制浏览器再次显示登录对话框？（当然没有关闭浏览器。）我确实尝试使用另一个 IE 实例，这也显示了登录失败错误。

TIA。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T16:43:17.930

这通常发生在用户没有所需权限时，
但也可能发生在具有管理权限的用户身上。

无论如何，对于第一次访问**Report Manager**，您可能需要运行浏览器`Administrator`，然后继续使用 URL。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T13:46:31.700

在各种论坛上有许多与此问题相关的讨论。为一个人解决问题的方法似乎不一定为另一个人解决问题。

这篇 Microsoft Connect 帖子对我有用：

[用户没有所需的权限。验证是否已授予足够的权限并且已解决 Windows 用户帐户控制 (UAC) 限制](http://connect.microsoft.com/SQLServer/feedback/details/622737/user-does-not-have-required-permissions-verify-that-sufficient-permissions-have-been-granted-and-windows-user-account-control-uac-restrictions-have-been-addressed)

处理“用户帐户控制 (UAC) 限制”意味着在服务器上禁用 UAC。

另外，请注意还提到了一个额外的解决方法。用户应以管理员身份运行浏览器。

# perl - 重用数据库查询结果 (Perl)

> ID：12904033
> 
> 赞同：3
> 
> 时间：2012-10-15T21:09:25.563
> 
> 标签：perl, cgi, dbi

我正在使用 Perl 填充两个 html 表（每个表都是在其自己的 Perl CGI 脚本中生成的）。我有一个运行 SQL 查询的“助手”脚本。这是一个例子（我们称之为脚本`run_sql_query.pl`）：

```
my $sql_query = "SELECT ID from TABLE where ID > 3";
our $sth = $dbh->prepare($sql_query);
$sth->execute; 
```

然后，在我的两个 Perl CGI 脚本中，我执行以下操作：

```
require 'run_sql_query.pl';

our $sth;
while (my ($table_id) = $sth->fetchrow_array) {
...
} 
```

但是，它看起来`run_sql_query.pl`运行了两次（在每个 Perl CGI 脚本中运行一次）。我怎样才能让它`run_sql_query.pl`只执行一次，然后`$sth`在两个 Perl CGI 脚本中使用相同的内容？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T21:44:38.927

如果我理解正确，您想保存查询结果，以便其他进程可以再次使用它。有几种方法可以做到这一点，都涉及设置某种缓存。

CGI 进程有单独的内存，所以你不能直接做你问的事情。更糟糕的是，它们会为每个请求启动和停止，从而浪费大量时间进行编译。但是，有很多方法可以解决这个问题。

如果您的 SQL 查询开销很大，并且数据不经常更改，您可以让数据库缓存结果。例如，这里是[MySQL 缓存](http://dev.mysql.com/doc/refman/5.5/en/query-cache.html)。这样做的好处是所有使用数据库的东西都将使用它。缺点是您的程序仍然必须获取和处理所有数据。使用它是您的查询很昂贵，但获取和处理它不是，并且您的数据不会经常更改。

另一种选择是设置一个外部缓存，例如[memcached](https://secure.wikimedia.org/wikipedia/en/wiki/Memcached)来存储结果。Memcached 基本上是您计算机上的一个服务器，用于存储大量数据。或者您甚至可以使用数据库本身来缓存处理后的 HTML 表。每个进程可以在自己计算之前检查他们想要的数据是否在缓存中。[您可以使用CHI](https://metacpan.org/module/CHI)之类的东西与之交互。优点是您可以将任何您想要的东西放入缓存中。缺点是你必须自己管理缓存（即当数据用完时删除数据），这是另一回事管理，缓存可能随时消失。

最后，您可以更改流程的运行方式。一个基本的效率提升是从简单的 CGI（它为每个请求启动、编译、运行和完成你的程序）改变为类似[FastCGI](https://metacpan.org/module/CGI::Fast)的东西，它在它自己的小服务器上运行你的程序。把它想象成`while`在你的整个程序周围放置一个循环。现在，由于您的程序没有在每个请求之间关闭，您可以将数据存储在全局变量中。`our @Table_Cache`然后，按照@foampile 的建议，将您的表格存储在其中或类似的事情是一件简单的事情。这将*为该进程*缓存它，但不会为其他进程缓存。每个不同的程序都是它自己的进程。所以`foo.cgi`不会分享`bar.cgi`. 优点是它很简单，无论如何你都应该切换到 FastCGI，而且你的 Web 服务器可能已经支持它。缺点是您需要管理缓存（即删除过时的条目），并且它不会跨进程共享。

我将从 FastCGI 开始，看看是否能解决您的性能问题。这意味着每次服务器重新启动时您将只运行每个查询*两次*，而不是每次请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T21:14:54.097

您应该在第一次遍历记录集时将查询结果提供给哈希哈希或数据结构，然后再通过或引用哈希/结构：

```
my $dataStruct;

while (my ($table_id) = $sth->fetchrow_array) { 
     my $colVal = $sth->data[...];
     $dataStruct->{$table_id}->{'col'} = $colVal;
} 
```

然后稍后您遍历 $dataStruct。如果您需要指导如何做到这一点，请告诉我。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-15T21:46:29.493

没有办法在进程（甚至线程）之间真正共享 Perl 变量。

但即使你可以，整个概念也毫无意义。数据库无法知道它正在与两个客户端对话，因此一个客户端会以某些记录结束，而另一个会以其他一些记录结束我们。

您必须两次获取数据。您可以将数据存储在某个中间位置并让两个客户端从那里获取它，但您没有表示有任何需要。

# c++ - 为什么我的函数调用与这个通用函数实现不匹配？

> ID：12904039
> 
> 赞同：1
> 
> 时间：2012-10-15T21:09:44.503
> 
> 标签：c++, templates

似乎编译器非常接近于做我想做的事（因为它把我的函数称为候选函数），但我不知道我做错了什么。

```
#include <stdio.h>
#include <stdlib.h>
#include <list>

using namespace std;

template <class U, template<class U> class T>
void AppendSorted( T<U>& l, U val )
{
  typename T<U>::reverse_iterator rt = l.rbegin();

  while( ((*rt) > val) && (rt != l.rend()) )
    rt++;

  l.insert( rt.base(), val );
}

int main( int argc, char* argv[] )
{
    list<int> foo;
    AppendSorted<int, list<int> >( foo, 5 );

    list<int>::iterator i;
    for( i = foo.begin(); i != foo.end(); i++ )
    {
        printf("%d\n",*i);
    }

    return 0;
} 
```

我得到的错误是：

```
test.cpp: In function ‘int main(int, char**)’:
test.cpp:21:43: error: no matching function for call to ‘AppendSorted(std::list<int>&, int)’
test.cpp:21:43: note: candidate is:
test.cpp:8:6: note: template<class U, template<class U> class T> void AppendSorted(T<U>&, U) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T21:21:47.183

这个签名

```
template <class U, template<class U> class T>
void AppendSorted( T<U>& l, U val ) 
```

表示将有一种具体类型 ( `class U`) 和一种模板 ( `template<class U> class T`)。

这个调用

```
AppendSorted<int, list<int> >( foo, 5 ); 
```

提供两种具体类型，`int`和`list<int>`. `list`是模板，`list<int>`是具体类型，是模板实例，但不是模板。

只需更改函数以接受集合的具体类型：

```
template <class U, class T>
void AppendSorted( T& l, U val )
{
  typename T::reverse_iterator /* or auto */ rt = l.rbegin();

  while( (rt != l.rend()) && ((*rt) > val) )
    rt++;

  l.insert( rt.base(), val );
} 
```

并让编译器推断类型参数，而不是指定它们。

```
AppendSorted( foo, 5 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T21:38:28.850

`std::list`是模板采用两个参数 - 不仅仅是一个。还有第二个默认参数。

您需要这样的模板函数来匹配列表：

```
template <class U, template<class U,class A> class T>
void AppendSorted( T<U,std::allocator<T>>& l, U val ); 
```

但是怎么样`std::set`- 它需要 3 个参数？

我不确定-也许可变参数模板会有所帮助...

但试试这个：

```
template <class U, class Container>
void AppendSorted(  Container& l, U val); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T21:42:39.090

`std::list`实际上有两个模板参数：

```
#include <stdio.h>
#include <stdlib.h>
#include <list>

using namespace std;

template <class U, template<class> class AL, template<class,class> class T> 
void AppendSorted( T<U,AL<U>>& l, U val ) {
        typename T<U,AL<U>>::reverse_iterator rt = l.rbegin();

        while( ((*rt) > val) && (rt != l.rend()) )
                rt++;

        l.insert( rt.base(), val );
}

int main( int argc, char* argv[] ) {
        list<int> foo;
        AppendSorted( foo, 5 ); 

        list<int>::iterator i; 
        for( i = foo.begin(); i != foo.end(); i++ ) {
                printf("%d\n",*i);
        }  

        return 0; 
} 
```

现在它可以编译了，但是你的代码中有逻辑错误——你有过去的迭代器。为了解决这个问题，在你的while循环中，`rend()`首先检查：

```
 while(rt != l.rend()  &&  *rt > val) 
```

# emacs - 在 Emacs 中更改 CamelCase 单词的 forward-word/backward-word/kill-word

> ID：12904043
> 
> 赞同：8
> 
> 时间：2012-10-15T21:09:56.577
> 
> 标签：emacs, syntax, intellij-idea, camelcasing

我需要能够在 Emacs 中导航和编辑骆驼大小写单词的部分内容。功能类似于 Intellij IDEA 中的驼峰。例如，我需要将字符串**BlahFooBar中的***Blah、Foo*和*Bar*标识为 3 个单独的单词，这样我就可以导航/编辑它们，就像它们是单独的单词一样。

 **我试过玩语法表

```
(modify-syntax-entry ?A ".")
(modify-syntax-entry ?F ".") 
```

这具有制作*lah、oo*和*ar*单词以及 chars B 和 F 单词分隔符的效果。所以向后导航（和向后杀词）不能按预期工作。

我需要的是基于正则表达式而不是分隔符的单词边界。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-15T21:17:06.857

`M-x``subword-mode`应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T11:47:18.693

获取 py-forward-，resp。来自 python-mode.el 的 py-backward-into-nomenclature

它适用于任何模式

[https://launchpad.net/python-mode/+下载](https://launchpad.net/python-mode/+download)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T21:16:47.840

解决方案似乎是驼峰模式。 [http://www.eecs.ucf.edu/~leavens/emacs/camelCase/camelCase-mode.html](http://www.eecs.ucf.edu/~leavens/emacs/camelCase/camelCase-mode.html)**

# java - Android - 不能让鼹鼠弹出

> ID：12904049
> 
> 赞同：1
> 
> 时间：2012-10-15T21:10:07.233
> 
> 标签：java, android, surfaceview

我正在制作一款安卓游戏。游戏是在随机时间间隔内随机出现在屏幕上不同位置的痣。

问题是我不知道如何让痣保持可见几秒钟。我`wait(1000)`在 的持有人上使用过`OnDraw()`，但这次它成为了游戏堆栈。我试图改`SurfaceView`回`View`，但随后屏幕停止刷新。

有什么建议吗？

**主要活动类**

```
public class First_Stage extends Activity implements OnTouchListener{

private AllViews allViews;
private MoleView moleView;
private PointsView pointsView;
private TimerView timerView;
private StageView stageView;
private Mole mole; 
private MoveMole moleMove;
private int points=0;
private StagePoints stagePoints;
private PointsSingelton poin;
private float x,y;
private Club club;
private ClubView clubView;
private PointsSingelton pointsCount;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    club=new Club();
    clubView = new ClubView(this, club);
    mole=new Mole();
    stageView=new StageView(this);
    moleView=new MoleView(this,mole);
    pointsView=new PointsView(this);
    timerView=new TimerView(this, "3:33");

    allViews=new AllViews(this);
    allViews.setViews(stageView, moleView, pointsView, timerView,clubView);

    setContentView(allViews);
    allViews.setOnTouchListener((View.OnTouchListener)this);

}

@Override
public boolean onTouch(View v, MotionEvent event) {
    x=event.getX();
    y=event.getY();
    moleView.setX(x);
    moleView.setY(y);

    allViews.setX(x);
    allViews.setY(y);

    if ((x<100 && x>0)&&(y>0&&y<100)){  
    points=pointsCount.getInstance().nextPoint();
    pointsView.setPoint(points);
    moleView.setBool(true);
    }

    return true;
} 
```

**所有视图类**

```
public class AllViews extends SurfaceView implements SurfaceHolder.Callback,Runnable {
private Club club;
private ClubView clubView;
private MoleView moleView;
private PointsView pointsView;
private TimerView timerView;
private StageView mainView;
private float x, y;
private Paint test;
private First_Stage first;
Thread drawThread = new Thread(this);
SurfaceHolder holder;
private Bitmap clubPic;

public AllViews(Context context) {
    super(context);
    test = new Paint();
    first = new First_Stage();
    holder = getHolder();
    holder.addCallback(this);
}

public void setViews(StageView mainView, MoleView moleView,
        PointsView pointsView, TimerView timerView,ClubView clubView)

{
    this.mainView = mainView;
    this.moleView = moleView;
    this.pointsView = pointsView;
    this.timerView = timerView;

}

@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    mainView.onDraw(canvas);
    moleView.onDraw(canvas);
    pointsView.onDraw(canvas);
    timerView.onDraw(canvas);
    clubPic=BitmapFactory.decodeResource(getResources(), R.drawable.clubdown);
    canvas.drawBitmap(clubPic, this.x-39,this.y-20, null);

}

@Override
public void run() {
    Canvas c;
    while (true) {
        c = null;

        try {
            c = holder.lockCanvas(null);

            synchronized (holder) {
                onDraw(c);

            }
        } finally {

            if (c != null) {
                holder.unlockCanvasAndPost(c);
            }

        }

    }

}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    // TODO Auto-generated method stub

}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    drawThread.start();

} 
```

**鼹鼠视图类**

```
public class MoleView extends View {
private Mole  mole;
private Bitmap molePic;
private float x,y;
private boolean bool=false;

public MoleView(Context context, Mole mole) {
  super(context);
  this.mole=mole;

    }

public boolean isBamped(){
    float xmin=mole.getX();
    float xmax=mole.getX()+60;
    float ymin=mole.getY();
    float ymax=mole.getY()+46;
    if ((this.x<xmax&&this.x>xmin)&&(this.y<ymax&&this.y>ymin)){
        return true;
    }

    return false;
}

@Override
protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub

    if (!bool){
    molePic=BitmapFactory.decodeResource(getResources(), R.drawable.nest_full_mole);
    canvas.drawBitmap(molePic, mole.getX(), mole.getY(), null);
      mole.moveMole();
    }else {
        molePic=BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
        canvas.drawBitmap(molePic, mole.getX(), mole.getY(), null);
        molePic.recycle();
    }

} 
```

**鼹鼠类**

```
public class Mole {
private float x;
private float y;
private Positions myPositions;

public Mole() {
    super();        
    myPositions=new Positions();
    this.x = myPositions.getRandomX();
    this.y = myPositions.getRandomY();
}

public float getX() {
    return x;
}
public void setX(float x) {
    this.x = x;
}
public float getY() {
    return y;
}
public void setY(float y) {
    this.y = y;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:38:18.077

我真的无法在代码中找到要将其保留在屏幕上的位置，因为仍然有很多代码，但可以这样尝试：

`Handler`在你画痣的课堂上做一个新的。之后，您可以调用该`postDelayed()`函数，您可以使用该函数在您定义的时间段内执行某些操作。其实很简单。

链接：http: [//developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

[http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

# javascript - Ext.js 中的 100% 高度 TabPanel（使用 Sencha Architect）

> ID：12904054
> 
> 赞同：0
> 
> 时间：2012-10-15T21:10:32.197
> 
> 标签：javascript, extjs, tabpanel, sencha-architect

我正在使用 Sencha Architect，但尚未弄清楚如何让我的 TabPanel 内容占用 TabPanel 所在容器的 100%。

这是我现在使用的代码：

```
Ext.define('MyApp.view.MyViewport', {
    extend: 'Ext.container.Viewport',

    layout: {
        type: 'border'
    },

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [
                {
                    xtype: 'container',
                    region: 'north',
                    height: 60
                },
                {
                    xtype: 'container',
                    region: 'center',
                    items: [
                        {
                            xtype: 'tabpanel',
                            activeTab: 0,
                            items: [
                                {
                                    xtype: 'panel',
                                    layout: {
                                        type: 'fit'
                                    },
                                    title: 'Tab 1',
                                    items: [
                                        {
                                            xtype: 'panel',
                                            title: 'My Panel'
                                        }
                                    ]
                                },
                                {
                                    xtype: 'panel',
                                    title: 'Tab 2'
                                },
                                {
                                    xtype: 'panel',
                                    title: 'Tab 3'
                                }
                            ]
                        }
                    ]
                }
            ]
        });

        me.callParent(arguments);
    }

}); 
```

我完全不知道如何实现这一点，而且我无法在 Ext.js 文档中找到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T21:30:00.080

过度嵌套。如果你有一个没有布局的容器，你往往会做错事：

```
Ext.define('Foo', {
    extend: 'Ext.container.Viewport',

    layout: 'border',

    initComponent: function() {
        var me = this;

        Ext.applyIf(me, {
            items: [{
                xtype: 'container',
                region: 'north',
                height: 60
            }, {
                region: 'center',
                xtype: 'tabpanel',
                activeTab: 0,
                items: [{
                    title: 'Tab 1',
                    html: 'Tab 1'
                }, {
                    xtype: 'panel',
                    title: 'Tab 2',
                    html: 'Tab 2'
                }, {
                    xtype: 'panel',
                    title: 'Tab 3',
                    html: 'Tab 3'
                }]
            }]
        });

        me.callParent(arguments);
    }
});

Ext.onReady(function(){
    new Foo();
}); 
```

# entity-framework - 实体框架 - TPH 查询问题

> ID：12904056
> 
> 赞同：0
> 
> 时间：2012-10-15T21:10:40.713
> 
> 标签：entity-framework, ef-code-first

我的模型看起来像这样：

```
public abstract class Parent {}

public class Child1 : Parent {}

public class Child2 : Parent {}

public class SomeEntity 
{
    public virtual Parent SomeParent { get; set; }
} 
```

我想查询 SomeEntity 类并按 SomeParent 是 Child1 的类进行过滤。我尝试编写以下 Linq 查询：

```
dbContext.Set<SomeEntity>().Where(s => s.SomeParent is Child1) 
```

当我运行此查询时，我收到以下错误：

错误 3032：从第 64 行开始映射片段时出现问题：条件成员 'Parent.DiscriminatorColumn' 的条件不是 'IsNull=False' 被映射。删除 Parent.DiscriminatorColumn 上的条件或将其从映射中删除。

难道我做错了什么？这应该工作吗？

# web-services - 基于 HTTP 上的 HMAC 或 HTTPS 上的单令牌的身份验证系统是否更昂贵？

> ID：12904059
> 
> 赞同：3
> 
> 时间：2012-10-15T21:11:01.723
> 
> 标签：web-services, security, http, cryptography, hmac

第一种情况需要为每次通信生成一个 HMAC 来标识请求，因此服务器可以重新生成它以确保客户端被授权（因为 HMAC 是用只有服务器知道的私钥加密的，并且客户端），而第二个只需要服务颁发证书（或令牌）一次，并保持几分钟-例如。15分钟-。当然，为了防止 MITM 或 Replay 攻击，它必须仅通过 SSL 发送，并具有所有后果（更多带宽和更多 CPU 要求）。

就我个人而言，我发现第一个不仅更简单而且更强大，因为每个请求都有自己独特的数据，而第二个依赖于 SSL 证书的完整性（我并不是说这很容易破解签名的 SSL 证书，但是如果有人会破坏它，所有通信都将被嗅探）。

所以我发现他们有以下优点/缺点：

*   HMAC 优点：每个请求的唯一令牌，可以真正安全地抵御 MITM 和重放攻击 - 通过使用唯一数据组成签名和时间戳 - 易于实现
*   HMAC 缺点：要求服务器为每个单独的请求工作以重新生成令牌
*   Token pro：一个令牌用于多个请求，对需要多个客户端操作的服务很有用
*   令牌缺点：所有通信都需要 SSL。

我想我需要设置一些测试来获得最终答案，但我很想听听有人是否已经有了一些知识或基于旧经验的一些技巧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T04:39:50.173

HMAC 和 PKI 旨在解决非常不同的问题。

如果您试图保护消息在传输过程中不被修改，那么 HMAC 旨在解决该问题，并将为您提供良好的服务。

如果您试图阻止消息在传输过程中被读取，那么您唯一的选择是 PKI（例如 SSL）。虽然 PKI 提供了比 HMAC 更严格的保证——毕竟，如果一个人无法阅读该消息，则很难对该消息进行有意义的修改 :)

如果您通过 PKI 传输 HMAC 使用的密钥，请注意 HMAC 不可能比 PKI 系统*更安全。*毕竟，如果你破解了 PKI，那么你就可以读取 HMAC 机密。

SSL 的大部分带宽开销都将出现在握手过程中；如果您要通过 SSL 发送任何内容，那么没有理由不通过 SSL 发送其余的通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T05:35:56.400

如果您只想通过 HTTP 对客户端进行基于密码（或基于密钥）的身份验证，则 HMAC 是更好的解决方案。在密码分析方面，现代 HMAC 比公钥算法更可靠。

在服务器端生成随机令牌的开销比执行公钥转换要少。

PS如果问题可以用对称密码学来解决，最好用对称密码学来解决。

# java - 我可以优化我的 Java 代码以替换重复的片段吗？

> ID：12904066
> 
> 赞同：0
> 
> 时间：2012-10-15T21:11:33.880
> 
> 标签：java, optimization, refactoring

我正在创建具有一些类似元素的 GUI 应用程序，因此重复代码；只有变量不同。例如，我有这样的事情：

```
lenPan2 = new JPanel();
lenPan2.setLayout(new GridBagLayout());

bTitled2 = BorderFactory.createTitledBorder(bGreyLine, "Example", TitledBorder.LEFT, TitledBorder.TOP);
lenPan2.setBorder(bTitled2);

tVllResult = new JTextField("");
tVllResult.setColumns(10);
tVllResult.setFont(defFont);
lenPan2.add(tVllResult, new GBC(10, 2, 2, 1));

String[] vllOutUnits = {"Unit 0", "Unit 1", "Unit 2", "Unit 3", "Unit 4"};
cVllOutUnit = new JComboBox<String>(vllOutUnits);
cVllOutUnit.setSelectedIndex(1);
cVllOutUnit.setPreferredSize(new Dimension(240, 25));
cVllOutUnit.setFont(defFont);
lenPan2.add(cVllOutUnit, new GBC(12, 2, 4, 1));
cVllOutUnit.addActionListener(this); 
```

在这种情况下，变量是：*lenPan2、bTitled2、tVllResult、vllOutUnits*、*cVllOutUnit*和边框标题。我可以以某种方式创建一个包含所有这些数据并且只将变量作为参数提供的方法吗？

我在想类似的事情：

```
private static insertElement(JPanel jp, BorderFactory bf, JTextField jtf, String bt, String[] vll, JComboBox cvl)
{
this.jp = jp;
this.bf = bf;
(...)

jp = new JPanel();
jp.setLayout(new GridBagLayout());

bf = BorderFactory.createTitledBorder(bGreyLine, bt, TitledBorder.LEFT, TitledBorder.TOP);
jp.setBorder(bf);
(...) 
```

调用者：

```
insertElement(lenPan2, bTitled2, tVllResult, Example, {"Unit 0", "Unit 1", "Unit 2", "Unit 3", "Unit 4"}, cVllOutUnit); 
```

它是正确的还是你会推荐任何其他方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T22:11:04.900

是的，您当然可以创建一个辅助方法来为您创建 GUI。

它会让你的代码更容易阅读吗？当然。

它会让你的代码更容易维护吗？当然。

它会让你的代码更快（即“优化”）吗？不。

# c# - 是否有一个命令来确定变量是否是定义集的一部分

> ID：12904068
> 
> 赞同：-1
> 
> 时间：2012-10-15T21:11:37.497
> 
> 标签：c#

很难说出这个问题，但例如，说我想要类似的东西：

```
int x = 5;
int z[] = {1,12,22,56};

if ((x==z[0]) || (x==z[1]) || (x==z[2]) || (x==z[3])) {
     [self fooOnYou:x]
} 
```

有没有更清洁或更优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:29:36.040

您可以使用`Contains()`在`System.Linq`命名空间中使用：

```
int x = 5;
int[] z = new {1,12,22,56};

if (z.Contains(x)) 
{
     // do your stuff here...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T21:17:10.537

C# 的答案可能是：

```
using System.linq;
...
if (z.Any(i => i == x))
{
    // Do your stuff here.
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-15T21:18:28.777

循环遍历数组。像 For(int i=0, i

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-15T21:15:48.897

我相信您正在尝试找出整数值数组中是否存在整数值。如果数组已排序，则应使用二分[搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)算法来查找该值。如果不是（并且您不想对其进行排序），则可以使用简单的 for 循环来查找所需的值：

```
int findValue(int value, int array[], int size) {

    for (int i = 0; i < size; ++i) {
        if (array[i] == value) {
            return i;
        }
    }

    return -1;
} 
```

# xcode - 下载 Mac OS 10.8 核心库

> ID：12904069
> 
> 赞同：0
> 
> 时间：2012-10-15T21:11:38.793
> 
> 标签：xcode, macos, core, updating

当我在 iMac 上使用 Xcode 4.5.1 时，它总是开始下载 Mac OS 10.8 Core Library。如果我将 MacBook Pro 与相同的 Xcode 4.5.1 一起使用，它不会下载任何内容。

我的 iMac 中的 Xcode 在过去几年中更新了几次，但我的 MacBook Pro 是新的。还有一件更奇怪的事情是，当我将 iMac 的 Xcode 从 4.5.0 更新到 4.5.1 时，它就像两个部分，一个和它说的一样大，第二个更大（1.6 Gb）更新了我的 MacBook Pro，这只是第一部分，仅此而已。这是从几分钟到一个小时左右更新的时间差异。为什么？到底是怎么回事？我过去做了什么或选择了什么来获得这个巨大的更新和所有这些下载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:02:19.080

我现在知道它是从 [http://developer.apple.com/rss/com.apple.adc.documentation.AppleOSX10_8.atom下载的文档](http://developer.apple.com/rss/com.apple.adc.documentation.AppleOSX10_8.atom)

它与首选项下的其他一些东西一起找到，下载。

# java - 如何在 Android 上的 ListView（或 ListActivity）中设置单元格的背景颜色或图像？

> ID：12904074
> 
> 赞同：2
> 
> 时间：2012-10-15T21:11:44.203
> 
> 标签：java, android, eclipse, listview, listactivity

如何在 Android 上的 ListView（或 ListActivity）中设置单元格的背景颜色或图像？

这是一个**非常**简单的 ListView，其中只有几个项目，没有其他自定义项。我不想更改文本或文本颜色或大小或类似的东西，我只想更改 ListView 中单元格的颜色或背景图像。

**在代码**（不是布局 XML）中执行此操作的最简单方法是什么？

这是我在 ListActivity 中使用的代码：

```
listitems.add("1");
listitems.add("2");
listitems.add("3");

this.getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);

setListAdapter(new ArrayAdapter<String>(
    this, 
    android.R.layout.simple_list_item_checked, 
    listitems
)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T21:29:57.793

尝试使用以下方式扩展 ArrayAdapter：

```
public static class MyAdapter extends ArrayAdapter<String>{

    ...

    @Override
    public View getView(int p, View v, ViewGroup g){
        v = super.getView(p, v, g);
        v.setBackgroundColor(0xffff0000);
        return v;
    }

} 
```

例如，这将使每个项目视图的背景变为纯红色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T21:56:39.987

感谢 newbyca 引导我朝着正确的方向前进。这是我一直在寻找的，实际上是最好的答案，因为它是最容易实现的代码：

```
setListAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_checked, listitems) {
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = super.getView(position, convertView, parent);
        //v.setBackgroundColor(0xffff0000);  // COLOR
        v.setBackgroundResource(R.drawable.plaincell); // IMAGE
        return v;
    }
}); 
```

# jquery - jQuery - 根据实际大小过滤图像

> ID：12904078
> 
> 赞同：0
> 
> 时间：2012-10-15T21:11:56.577
> 
> 标签：jquery, image, filter, dimensions, image-size

图像源拥有真实的图像尺寸（宽度/高度）。在一个`div#pics`有 5 个图像的图像中，3 个图像是 16X16，2 个图像是 2x2。两个 2x2 图像都有一个应用到它们的类，使它们成为 16x16，其他 3 个图像是 16x16。问题是，当我以这种方式过滤时：

```
var Images = $('#pics img');
var FilteredImages = Images.filter(function(){
    return ($(this).width() == 16) || ($(this).height() == 16)
}); 
```

`FilteredImages`包含所有 5 个图像，因为它考虑了使 2 个 2x2 图像为 16x16 的类。如何`FilteredImages`只保存其源图像大小（不是 css）为 16x16 的 3 个图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T21:15:39.003

我建议：

```
var Images = $('#pics img'),
    FilteredImages = Images.filter(function(){
        var that = this;
        return (that.naturalWidth == '16px') || (that.naturalHeight == '16px')
    }); 
```

参考：

*   [HTMLImageElement（`naturalHeight`和`naturalWidth`在表中）](https://developer.mozilla.org/en-US/docs/DOM/HTMLImageElement)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T21:15:48.260

```
$('#pics img[width=16][height=16]').css({border:'1px solid red'}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T21:17:36.077

您可以将图像添加到临时对象以获取其原始大小：

```
function getImgSize(imgSrc) {
  var newImg = new Image();

  newImg.onload = function() {
    var height = newImg.height;
    var width = newImg.width;
    alert ('The image size is '+width+'*'+height);
  }

  newImg.src = imgSrc; // this must be done AFTER setting onload

} 
```

在此处查看答案： [确定图像跨浏览器的原始大小？](https://stackoverflow.com/questions/1944280/determine-original-size-of-image-cross-browser)

# iphone - Facebook iOS 6 - 获取用户信息

> ID：12904079
> 
> 赞同：15
> 
> 时间：2012-10-15T21:11:57.060
> 
> 标签：iphone, objective-c, facebook, ios6

是否可以使用内置的 iOS 6 Facebook 集成来获取用户的基本信息（电子邮件地址、生日等）？我看到的所有文档/示例都使用 iOS 6 集成来简单地打开一个`SLComposeViewController`.

感谢您的时间。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-15T21:14:24.080

请查看我的示例项目。它允许您将视频上传到 Facebook，但它还包括一种获取信息的方法，您应该查看文件`ViewController.m`，在选项卡控制器中注明“Native”。

[https://bitbucket.org/danielphillips/fb-video-upload](https://bitbucket.org/danielphillips/fb-video-upload)

您将需要导入`Social`和`Accounts`框架来执行您想要的操作。您从 请求访问用户 Facebook 帐户`ACAccountStore`，如果您被授予访问权限，那么您使用此帐户创建一个`SLRequest`具有您想要的参数的，这里您想要图形对象“/me”。

特性：

```
@property (nonatomic, retain) ACAccountStore *accountStore;
@property (nonatomic, retain) ACAccount *facebookAccount; 
```

认证：

```
- (IBAction)getMeButtonTapped:(id)sender {
    if(!_accountStore)
        _accountStore = [[ACAccountStore alloc] init];

    ACAccountType *facebookTypeAccount = [_accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];

    [_accountStore requestAccessToAccountsWithType:facebookTypeAccount
                                           options:@{ACFacebookAppIdKey: @"483616868329082", ACFacebookPermissionsKey: @[@"email"]}
                                        completion:^(BOOL granted, NSError *error) {
                                            if(granted){
                                                NSArray *accounts = [_accountStore accountsWithAccountType:facebookTypeAccount];
                                                _facebookAccount = [accounts lastObject];
                                                NSLog(@"Success");

                                                [self me];
                                            }else{
                                                // ouch
                                                NSLog(@"Fail");
                                                NSLog(@"Error: %@", error);
                                            }
                                        }];
} 
```

获取“我”：

```
- (void)me{
    NSURL *meurl = [NSURL URLWithString:@"https://graph.facebook.com/me"];

    SLRequest *merequest = [SLRequest requestForServiceType:SLServiceTypeFacebook 
                                              requestMethod:SLRequestMethodGET 
                                                        URL:meurl 
                                                 parameters:nil];

    merequest.account = _facebookAccount;

    [merequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
        NSString *meDataString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

        NSLog(@"%@", meDataString);

    }];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T15:25:12.947

[https://github.com/jonasman/JNFacebook 下载](https://github.com/jonasman/JNFacebookDownload)

```
 self.facebookDownload = [JNFacebookDownload new];
 self.facebookDownload.appID = @"380637545425915";

[self.facebookDownload downloadInformation:^(NSDictionary *userInfo, NSError *error) {

    dispatch_async(dispatch_get_main_queue(), ^{

        if (error)
        {
            if (error.code == JNFacebookDownloadNoAccount)
                NSLog(@"No account");
            else if (error.code == JNFacebookDownloadNoPermissions)
                NSLog(@"No permissions");
            else if (error.code == JNFacebookDownloadNoAPPID)
                NSLog(@"No APP ID Configured");
        }
        else
        {
            self.textView.text = [userInfo description];
        }
    }); 
```

# java - Java：列表中的元素计数

> ID：12904084
> 
> 赞同：0
> 
> 时间：2012-10-15T21:12:03.050
> 
> 标签：java, list

> **可能重复：**
> [如何计算列表中元素的出现次数](https://stackoverflow.com/questions/505928/how-to-count-occurrence-of-an-element-in-a-list)

我有一个类似的列表`List<String> A={12, 12, 14, 16, 16}`。我怎样才能清楚地找到元素的数量

```
12->2
14->1
16->2 
```

通过使用类似`countElements(A,"12")`or的函数`A.count("12")`？有库还是函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T21:13:13.083

只需遍历每个并维护一个

```
Map<Integer, Integer> numberToFrequencyMap; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T21:20:25.153

[`Collections.frequency`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#frequency%28java.util.Collection%2C%20java.lang.Object%29)如果您只需要个别元素的频率，您也可以使用该方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T21:15:51.707

看一眼[`Apache Commons`](http://commons.apache.org/collections/) [`CollectionUtils#getCardinalityMap`](http://commons.apache.org/collections/api-release/org/apache/commons/collections/CollectionUtils.html#getCardinalityMap%28java.util.Collection%29)

它返回`Map<Element, Integer>`列表中每个元素的频率。

```
List<String> list = {"12", "12", "14", "16", "16"};
Map<String, Integer> frequencyMapping = CollectionUtils.getCardinalityMap(list); 
```

此外，[`CollectionUtils#cardinality`](http://commons.apache.org/collections/api-release/org/apache/commons/collections/CollectionUtils.html#cardinality%28java.lang.Object,%20java.util.Collection%29)如果要获取特定元素的计数，您还有一个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T21:20:46.110

如果您可以使用第三方依赖项，[Guava](https://code.google.com/p/guava-libraries/)有一个集合类型，称为[`Multiset`](https://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained#Multiset)：

```
Multiset<String> multiset = HashMultiset.create(list);
multiset.count("foo"); // number of occurrences of foo
multiset.elementSet(); // returns the distinct strings in the multiset as a Set
multiset.entrySet(); // returns a Set<Multiset.Entry<String>> that you can 
 // iterate over to get the strings and their counts at the same time 
```

（披露：我为 Guava 做出了贡献。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T21:36:21.130

迭代你的数字，保持计数`Map`如下：

```
 List<Integer> myNumbers= Arrays.asList(12, 12, 14, 16, 16);
    Map<Integer, Integer> countMap = new HashMap<Integer, Integer>();
    for(int i=0; i<myNumbers.size(); i++){
        Integer myNum = myNumbers.get(i);
        if(countMap.get(myNum)!= null){
             Integer currentCount = countMap.get(myNum);
             currentCount = currentCount.intValue()+1;
             countMap.put(myNum,currentCount);
        }else{
            countMap.put(myNum,1);
        }
    }

   Set<Integer> keys = countMap.keySet();
   for(Integer num: keys){
       System.out.println("Number "+num.intValue()+" count "+countMap.get(num).intValue());
   } 
```

# sql - 删除脚本 SQL Server 2008

> ID：12904087
> 
> 赞同：1
> 
> 时间：2012-10-15T21:12:07.763
> 
> 标签：sql, sql-server-2008

这是我试图解决的一种情况。我有一个装有重复项的表。发生这种情况是因为类似的行是从两个不同的来源加载的。这是在包装中处理的。

但我想删除那些重复的行。这里没有关键属性（我不能用没有PK）。这两个**来源**是克利夫兰市和俄亥俄州立大学。我有一列显示该行是从哪个源加载的（`DataSource`列）。

因此在行中它显示为`DataSource = 'Cleveland'`或`DataSource = 'OhioState'`。

下面是我坚持的示例。你们能有不同的方法来删除那些我的行似乎效果不佳吗？再次感谢伙计们..我认为我试图接近的方式甚至不正确...

```
 IF OBJECT_ID('tempdb..#Ohio') IS NOT NULL 
     BEGIN 
     DROP TABLE #Ohio
     END 

  ;WITH Oh AS 
    ( SELECT ROW_NUMBER()OVER
      (
        PARTITION by UID,ADDRESS,CITY,STATE,Zip
          ORDER BY 
            UID
       ) AS IA,UID,ADDRESS,City,State,Zip FROM F_staRes
     ) 
    SELECT * INTO #Ohio   FROM Oh WHERE IA> 1   AND  DataSource='Ohio'  

    IF OBJECT_ID('tempdb..#Clevland') IS NOT NULL 
    BEGIN 
   DROP TABLE #Clevland
   END 

    ;WITH Cle AS 
     ( SELECT ROW_NUMBER()OVER
      (
           PARTITION by UID,ADDRESS,CITY,STATE,Zip
       ORDER BY 
        UID
         ) AS CE,UID,ADDRESS,City,State,Zip FROM F_staRes
         ) 
   SELECT * INTO #Clevland   FROM Cle WHERE CE> 1  AND  DataSource!='Ohio' 

    select * from #Clevland--I want to delete this records
     Intersect 
     select * from #Ohio 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T01:52:16.147

1.  我认为关键词 INTERSECT 没有正确使用。解释如下。您可以点击链接获取详细信息。

EXCEPT 返回左侧查询中未在右侧查询中找到的任何不同值。INTERSECT 返回由 INTERSECT 操作数左侧和右侧的查询返回的任何不同值

[http://msdn.microsoft.com/zh-cn/library/ms188055.aspx](http://msdn.microsoft.com/zh-cn/library/ms188055.aspx)

1.  为了实现您的目的，您可以尝试命令合并。

    ```
    ;
    merge into #Clevland as target
    using  #Ohio as source
    on (target.UID = source.UID) -- you could add ADDRESS,City,State,Zip
    when not matched
       insert into target (UID) values (source.UID)
    ; 
    ```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T22:28:24.837

也许它会帮助你

```
;WITH cte AS
 (
  SELECT ROW_NUMBER() OVER (PARTITION BY UID, ADDRESS, City, State, Zip, DataSource ORDER BY UID) AS Dup
  FROM dbo.F_staRes
  )
DELETE cte
WHERE Dup > 1 
```

# jquery - 显示：没有字段未发布到控制器

> ID：12904088
> 
> 赞同：2
> 
> 时间：2012-10-15T21:12:11.693
> 
> 标签：jquery, asp.net-mvc-3, jquery-validate

我有一个灯箱，其中包含一堆输入元素，我使用 HTML 帮助器为创建操作设置了这些输入元素。它们是可选字段，但我确实在 jquery 验证中对它们应用了数字规则。

用户可以打开此灯箱，并根据需要填写字段，但不是必需的。它与其余数据的形式相同，但要提交，他们必须关闭此灯箱。

在提交时，不是来自灯箱的值被发布到控制器。如果我从灯箱中删除输入，它工作正常。它一定与它被隐藏有关，但为什么会发生这种情况呢？是jquery吗？我有 'voavi-ignore' 作为我的忽略类，所以它仍然应该验证这些。由于我已经有一段时间了，所以我对此感到有些困惑和精疲力尽。我页面上的其他所有内容都可以正常工作，我只是将这些新字段添加到灯箱中。

js：

```
$(document).ready(function () {
    InitTab();
    $("#caseProductions").hide();
    $(".chzn-select").chosen();
    $(".filetypes").click(OnNewVOAVIClick);
    $(".countPerCase").change(OnCaseProdChange);
    $(".caseCount").change(OnCaseProdChange);
    $(".drinkWindow").change(OnDrinkWindowChange);
    $("#lnkCaseProduction").click(OnCaseProdOpen);

    VintageUpAlert();

    $.validator.addMethod("decimalNumber", function (value, element) {
        return this.optional(element) || (!isNaN(value));
    }, "Must be a valid number");

    wineValidator = $("form").validate({
        errorPlacement: function (error, element) {
            var x = element.parent();
            error.appendTo(element.closest("td"));
        },
        ignore: ".voavignore",
        rules: {
            "Wine.VarTypeID": { min: 1 },
            "Wine.OriginID": { min: 1 },
            "Wine.AppID": { min: 1 },
            "Wine.VintageID": { min: 1 },
            "VOAVIRequest.VarType": { required: true },
            "VOAVIRequest.Origin": { required: true },
            "VOAVIRequest.App": { required: true },
            "VOAVIRequest.Vintage": { required: true },
            "Wine.CaseProduction": { digits: true },
            "Wine.AlcoholContent": { number: true,
                min: 0, max: 100
            },
            "Wine.pH": { number: true,
                min: 0, max: 7
            },
            "Wine.RS": { decimalNumber: true,
                min: 0, max: 1000
            }
        },
        messages: {
            "Wine.VarTypeID": { min: "Varietal/Type Required" },
            "Wine.OriginID": { min: "Origin Required" },
            "Wine.AppID": { min: "Appellation Required" },
            "Wine.VintageID": { min: "Vintage Required" },
            "VOAVIRequest.VarType": { required: "Varietal/Type Required" },
            "VOAVIRequest.Origin": { required: "Origin Required" },
            "VOAVIRequest.App": { required: "Appellation Required" },
            "VOAVIRequest.Vintage": { required: "Vintage Required" },
            "Wine.CaseProduction": { digits: "Please enter whole numbers only" }
        }
    });

    CaseProdValidation();
});

function CaseProdValidation() {
    $(".caseCount").rules("add", { digits: true });
} 
```

html （这只是 lightbox 其余的相当多的标记）：

```
<div class="lightbox" id="caseProductions">
    <a href="#" class="ui-icon ui-icon-circle-close closer"></a>
    <table>
        <thead>
            <tr>
                <td>
                    <h4>
                        Format</h4>
                </td>
                <td>
                    <h4>
                        Cases</h4>
                </td>
                <td>
                    <h4>
                        Bottles/Case</h4>
                </td>
                <td>
                    <h4>
                        Total Bottles</h4>
                </td>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>@Html.LabelFor(m => m.Wine.cc187ml)
                </td>
                <td>@Html.TextBoxFor(m => m.Wine.cc187ml, new { @class = "caseCount" })
                </td>
                <td>@Html.DropDownListFor(m => m.Wine.cpc187ml, new SelectList(Model.BottlesPerCase, "Key", "Value", 24), new { @class = "countPerCase" })
                </td>
                <td class="totalBottleCalc">
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.Wine.cc375ml)
                </td>
                <td>@Html.TextBoxFor(m => m.Wine.cc375ml, new { @class = "caseCount" })
                </td>
                <td>@Html.DropDownListFor(m => m.Wine.cpc375ml, new SelectList(Model.BottlesPerCase, "Key", "Value", 12), new { @class = "countPerCase" })
                </td>
                <td class="totalBottleCalc">
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.Wine.cc500ml)
                </td>
                <td>@Html.TextBoxFor(m => m.Wine.cc500ml, new { @class = "caseCount" })
                </td>
                <td>@Html.DropDownListFor(m => m.Wine.cpc500ml, new SelectList(Model.BottlesPerCase, "Key", "Value", 12), new { @class = "countPerCase" })
                </td>
                <td class="totalBottleCalc">
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.Wine.cc750ml)
                </td>
                <td>@Html.TextBoxFor(m => m.Wine.cc750ml, new { @class = "caseCount" })
                </td>
                <td>@Html.DropDownListFor(m => m.Wine.cpc750ml, new SelectList(Model.BottlesPerCase, "Key", "Value", 12), new { @class = "countPerCase" })
                </td>
                <td class="totalBottleCalc">
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.Wine.cc1p5L)
                </td>
                <td>@Html.TextBoxFor(m => m.Wine.cc1p5L, new { @class = "caseCount" })
                </td>
                <td>@Html.DropDownListFor(m => m.Wine.cpc1p5L, new SelectList(Model.BottlesPerCase, "Key", "Value", 1), new { @class = "countPerCase" })
                </td>
                <td class="totalBottleCalc">
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.Wine.cc3L)
                </td>
                <td>@Html.TextBoxFor(m => m.Wine.cc3L, new { @class = "caseCount" })
                </td>
                <td>@Html.DropDownListFor(m => m.Wine.cpc3L, new SelectList(Model.BottlesPerCase, "Key", "Value", 1), new { @class = "countPerCase" })
                </td>
                <td class="totalBottleCalc">
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.Wine.cc5L)
                </td>
                <td>@Html.TextBoxFor(m => m.Wine.cc5L, new { @class = "caseCount" })
                </td>
                <td>@Html.DropDownListFor(m => m.Wine.cpc5L, new SelectList(Model.BottlesPerCase, "Key", "Value", 1), new { @class = "countPerCase" })
                </td>
                <td class="totalBottleCalc">
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.Wine.cc6L)
                </td>
                <td>@Html.TextBoxFor(m => m.Wine.cc6L, new { @class = "caseCount" })
                </td>
                <td>@Html.DropDownListFor(m => m.Wine.cpc6L, new SelectList(Model.BottlesPerCase, "Key", "Value", 1), new { @class = "countPerCase" })
                </td>
                <td class="totalBottleCalc">
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.Wine.cc9L)
                </td>
                <td>@Html.TextBoxFor(m => m.Wine.cc9L, new { @class = "caseCount" })
                </td>
                <td>@Html.DropDownListFor(m => m.Wine.cpc9L, new SelectList(Model.BottlesPerCase, "Key", "Value", 1), new { @class = "countPerCase" })
                </td>
                <td class="totalBottleCalc">
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.Wine.cc12L)
                </td>
                <td>@Html.TextBoxFor(m => m.Wine.cc12L, new { @class = "caseCount" })
                </td>
                <td>@Html.DropDownListFor(m => m.Wine.cpc12L, new SelectList(Model.BottlesPerCase, "Key", "Value", 1), new { @class = "countPerCase" })
                </td>
                <td class="totalBottleCalc">
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.Wine.cc15L)
                </td>
                <td>@Html.TextBoxFor(m => m.Wine.cc15L, new { @class = "caseCount" })
                </td>
                <td>@Html.DropDownListFor(m => m.Wine.cpc15L, new SelectList(Model.BottlesPerCase, "Key", "Value", 1), new { @class = "countPerCase" })
                </td>
                <td class="totalBottleCalc">
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.Wine.cc18L)
                </td>
                <td>@Html.TextBoxFor(m => m.Wine.cc18L, new { @class = "caseCount" })
                </td>
                <td>@Html.DropDownListFor(m => m.Wine.cpc18L, new SelectList(Model.BottlesPerCase, "Key", "Value", 1), new { @class = "countPerCase" })
                </td>
                <td class="totalBottleCalc">
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.Wine.cc27L)
                </td>
                <td>@Html.TextBoxFor(m => m.Wine.cc27L, new { @class = "caseCount" })
                </td>
                <td>@Html.DropDownListFor(m => m.Wine.cpc27L, new SelectList(Model.BottlesPerCase, "Key", "Value", 1), new { @class = "countPerCase" })
                </td>
                <td class="totalBottleCalc">
                </td>
            </tr>
            <tr>
                <td>@Html.LabelFor(m => m.Wine.ccOther)
                </td>
                <td>@Html.TextBoxFor(m => m.Wine.ccOther, new { @class = "caseCount" })
                </td>
                <td>@Html.TextBoxFor(m => m.Wine.cpcOther, new { @class = "countPerCase" })
                </td>
                <td class="totalBottleCalc">
                </td>
            </tr>
        </tbody>
    </table>
    <div style="display: inline-block">
    <input type="button" value="Save" />
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T21:19:34.943

实际上是浏览器决定`display:none`不应该发布字段（除了`type="hidden"`那些永远不会显示的字段）。

一种广泛使用的技巧是使用定位来隐藏字段：

**CSS：**

```
input.hideThisField {
  position:absolute;
  top: -9999px;
  visibility:hidden;
} 
```

但在您的情况下，问题在于您的表单字段位于您的灯箱内，在提交表单之前（显然）已关闭。这行不通。您将不得不在表单提交时保持灯箱打开，或者在灯箱关闭后自己使用 JavaScript 提取表单内容。

我可能会选择简单地保持灯箱打开，直到表格发布）。

# vba - 如何在 MS Access 中丢弃应用程序退出时的表单内容？

> ID：12904090
> 
> 赞同：1
> 
> 时间：2012-10-15T21:12:16.610
> 
> 标签：vba, ms-access

当用户退出应用程序时，如何丢弃表单的内容？如果用户通过按钮关闭表单（例如返回主表单），可以使用`Me.Undo`. 但是，如果他关闭整个应用程序，则当前内容将输入到相应的表中，这与预期的不同。
我还尝试了关闭应用程序时都没有触发的`on Close`and事件。`on Unload`

编辑：该`on Close`事件显示出奇怪的行为。A`MsgBox`正在执行，但`Me.Undo`不知何故不起作用。（当单击 X 退出应用程序时，可能在事件之前将表单内容输入到表中？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:04:25.207

关闭表单会自动触发保存对绑定控件值的未决更改。您无法从表单卸载或关闭事件中拦截该保存操作。我能找到拦截它的唯一方法是从表单的更新和插入事件之前：

```
Dim SaveFlag As Boolean

Private Sub Form_BeforeUpdate(Cancel As Integer)
    If Me.Dirty = True And SaveFlag = False Then
        Me.Undo
    End If
End Sub 
```

在插入之前，您需要做类似的事情。而且您需要以`SaveFlag`某种方式进行管理，以便在您希望保存更改时实际保存更改。

```
Private Sub cmdSave_Click()
    SaveFlag = True
    Me.Dirty = False
    SaveFlag = False
End Sub 
```

但是，如果您想要 Access 的默认行为，例如在记录之间导航或在主窗体和子窗体之间切换焦点时自动保存更改，则此方法不适合。

如果您非常需要此功能，则可以切换到未绑定的数据控件，并且仅在您明确命令它发生时才保存它们的值。但这会增加很多额外的工作，我不知道是否值得付出努力。我很想将此视为用户教育问题。"*请注意，如果您在表单中关闭未保存更改的应用程序，则会为您保存更改。* "

# c - 错误：在 '&' 标记之前应为 ';'、',' 或 ')'

> ID：12904091
> 
> 赞同：9
> 
> 时间：2012-10-15T21:12:19.477
> 
> 标签：c, gcc, token

我在这一行的 C 头文件中收到此错误：

```
char * getFechaHora(time_t & tiempoPuro); 
```

在 C 源代码文件中，我包含头文件并为函数提供实现

```
char * getFechaHora(time_t &tiempoPuro){...} 
```

同样在我的头文件中，我正确地包含了“time.h”库。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-15T21:13:24.577

```
char * getFechaHora(time_t & tiempoPuro); 
```

这不是 C。C 没有引用 ( `&`)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-15T21:19:38.883

在 C 语言中，如果 char * getFechaHora，这是您的函数，并且两个 (time_t & tiempoPuro) 是参数，您应该将函数声明为：

```
char * getFechaHora(*type* time_t, *type* tiempoPuro); 
```

否则，如果第二个是变量，则声明为

```
char * getFechaHora(time_t *tiempoPuro); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T21:26:05.730

问题是您对`&`符号的使用。C 不支持以这种方式通过引用传递。要在 C 中完成此操作，您需要像这样传递指向变量的指针：

```
 char * getFechaHora(time_t * tiempoPuro); 
```

从技术上讲，您仍然是按值传递（传递指针的值），但它会完成相同的事情（修改函数`tiempoPuro`本地变量指向的`getFechaHora`值将更改函数本地变量的值调用自）。

参考： [按参考传递](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=/com.ibm.xlcpp8a.doc/language/ref/cplr233.htm)

# box-api - box.net v2 api 休息端点

> ID：12904093
> 
> 赞同：0
> 
> 时间：2012-10-15T21:12:41.940
> 
> 标签：box-api

这听起来可能很愚蠢的问题，但我找不到任何文件给我这个信息：

我想从 javascript 调用 v2 api。它的端点是什么，我只在 docs 中获取 cUrl。我有 auth_token 和 api_key 并想将文件上传到根文件夹。向以下 url 发布请求会给出错误：

```
https://www.box.com/api/2.0/files/content/0?api_key=<my_api_key>&auth_token=<my_auth_token> 
```

回复 ：

```
{
    "type": "error",
    "status": 401,
    "code": "invalid_authorization_header",
    "help_url": "http:\/\/developers.box.com\/docs\/#errors",
    "message": "\"Authorization\" header either missing or invalid",
    "request_id": "1208099125507c7b0670911"
} 
```

还有，v2 api是否支持JSONP。我必须做一个跨域reuest

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:05:38.087

api-key 和 auth-token 需要在 header 中发送。V2 API 不会在 GET 参数中接受它们。

我们目前不支持 JSONP，但我们将其视为 GA 后的附加组件。

您能否详细说明这如何不适用于 javascript？[其他StackOverflow](https://stackoverflow.com/questions/9481073/calling-rest-webservice-using-jquery-ajax-call-web-service-is-returning-json-s) [答案](https://stackoverflow.com/questions/9959729/javascript-to-handle-rest-json-feed)上的一些 javascript 示例 也可能有所帮助。

# mysql - SQL 查询返回几十年的最大值

> ID：12904097
> 
> 赞同：4
> 
> 时间：2012-10-15T21:12:46.407
> 
> 标签：mysql, sql

**这是使用 MYSQL** 我的问题如下。我有一个棒球数据库，在那个棒球数据库中有一个主表，其中列出了每个曾经打过球的球员。还有一个击球台，可以跟踪每个球员的击球数据。我创建了一个将这两者结合在一起的视图；因此`masterplusbatting`表。我现在想找到自棒球开始以来每十年中 HR 最高的击球手。这是我尝试过的。

```
 select f.yearID, truncate(f.yearid/10,0) as decade,f.nameFirst, f.nameLast, f.HR
    from (
    select yearID, max(HR) as HOMERS
    from masterplusbatting group by yearID
    )as x inner join masterplusbatting as f on f.yearID = x.yearId and f.HR = x.HOMERS
    group by decade 
```

您可以看到我截断了 yearID 以获取`187, 188, 189`etc 而不是`1897, 1885,`. 然后我按十年分组，认为它会给我每十年最高的值，但它没有返回正确的值。例如，它给了我 Adrian Beltre 在 2004 年的 48 HR，但每个人都知道 Barry Bonds 在 2001 年达到了 73 HR。谁能给我一些建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T21:35:51.507

```
SELECT
  Lookup.DecadeID,
  Data.*
FROM
(
  SELECT
    truncate(yearid/10,0) as decadeID,
    MAX(HR) as Homers
  FROM
    masterplusbatting
  GROUP BY
    truncate(yearid/10,0)
)
  AS lookup
INNER JOIN
  masterplusbatting AS data
    ON  data.yearid >= lookup.decadeID * 10
    AND data.yearid <  lookup.decadeID * 10 + 10
    AND data.HR     =  lookup.homers 
```

为 MySQL 编辑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T21:23:28.357

您的查询似乎聚合了错误的东西。在某个地方，我希望看到一个基于玩家的分组。

```
select truncate(mpb.yearid/10, 0) as decade, mpb.nameFirst, mpb.nameLast, sum(mpb.HR) as HRs
from masterplusbatting mpb
group by truncate(mpb.yearid/10, 0), mpb.nameFirst, mpb.nameLast 
```

这给出了每十年的本垒打总数。现在，你想要拥有最多的人。为此，我将使用`row_number()`函数和子查询：

```
select decade, nameFirst, nameLast, HRs
from (select decade, nameFirst, nameLast, HRs,
             row_number() over (partition by decade order by HRs desc) as seqnum
      from (select truncate(mpb.yearid/10, 0) as decade, mpb.nameFirst, mpb.nameLast, sum(mpb.HR) as HRs
            from masterplusbatting mpb
            group by truncate(mpb.yearid/10, 0), mpb.nameFirst, mpb.nameLast
           ) t
     ) t
where seqnum = 1
order by 1 
```

在 MySQL 等数据库中，您需要使用第二个连接来执行此操作：

```
select t.*
from (select truncate(mpb.yearid/10, 0) as decade, mpb.nameFirst, mpb.nameLast, sum(mpb.HR) as HRs
      from masterplusbatting mpb
      group by truncate(mpb.yearid/10, 0), mpb.nameFirst, mpb.nameLast
     ) t join
     (select decade, max(HRs) as maxHRs
      from (select truncate(mpb.yearid/10, 0) as decade, mpb.nameFirst, mpb.nameLast, sum(mpb.HR) as HRs
            from masterplusbatting mpb
            group by truncate(mpb.yearid/10, 0), mpb.nameFirst, mpb.nameLast
           ) t
      group by decade
     ) tsum
     on t.decade = tsum.decade and t.HRs = tsum.maxHRs
order by decade 
```

# c++ - c++实现定时回调函数

> ID：12904098
> 
> 赞同：19
> 
> 时间：2012-10-15T21:12:49.153
> 
> 标签：c++, callback, function-pointers, timing

我想在 C++ 中实现一些系统，以便我可以调用一个函数并要求在 X 毫秒内调用另一个函数。像这样的东西：

```
callfunctiontimed(25, funcName); 
```

25 是调用函数之前的毫秒数。

我想知道这是否需要多线程，然后使用一些延迟功能？除了使用函数指针之外，这样的功能如何工作？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-15T23:22:13.053

对于便携式解决方案，您可以使用 boost::asio。下面是我前段时间写的一个demo。你可以改变

```
t.expires_from_now(boost::posix_time::seconds(1)); 
```

为了适合您，您需要在 200 毫秒后进行函数调用。

```
t.expires_from_now(boost::posix_time::milliseconds(200)); 
```

下面是一个完整的工作示例。它在重复调用，但我认为只需稍作更改就可以轻松调用一次。

```
#include <iostream>
#include <boost/bind.hpp>
#include <boost/thread.hpp>
#include <boost/asio.hpp>
#include <boost/date_time/posix_time/posix_time.hpp>

using namespace boost::asio;
using namespace std;

class Deadline 
{
public:
    Deadline(deadline_timer &timer) : t(timer) {
        wait();
    }

    void timeout(const boost::system::error_code &e) {
        if (e)
            return;
        cout << "tick" << endl;
        wait();
    }

    void cancel() {
        t.cancel();
    }

private:
    void wait() {
        t.expires_from_now(boost::posix_time::seconds(1)); //repeat rate here
        t.async_wait(boost::bind(&Deadline::timeout, this, boost::asio::placeholders::error));
    }

    deadline_timer &t;
};

class CancelDeadline {
public:
    CancelDeadline(Deadline &d) :dl(d) { }
    void operator()() {
        string cancel;
        cin >> cancel;
        dl.cancel();
        return;
    }
private:
    Deadline &dl;
};

int main()
{
    io_service io;
    deadline_timer t(io);
    Deadline d(t);
    CancelDeadline cd(d);
    boost::thread thr1(cd);
    io.run();
    return 0;
}

//result:
//it keeps printing tick every second until you enter cancel and enter in the console
tick
tick
tick 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-15T21:27:45.687

您是否希望它异步执行，以便在 25 毫秒结束时执行回调而不阻塞主执行线程？如果是这样，您可以在与您实现的计时器/定时回调函数不同的线程中执行回调。

如果你不使用多线程，那么你的 main 或者 callfunctiontimed(25, funcName); 的调用函数；当你运行睡眠/睡眠时会阻塞。现在，您可以选择要实现的行为。

真正的解决方案不会像多线程那样简单。有一些事情，考虑到函数可以使用不同的超时和函数多次调用，你如何保留不同的计时器/回调信息。

一种方法是这样的：

1.  创建定时器/回调的排序列表，根据到期时间排序。
2.  在主线程和一个查看回调/定时器的线程上，称之为定时器线程。
3.  添加新回调时，将其添加到排序列表中。
4.  定时器线程可以初始化为在排序列表或头部等待最少的时间。在添加新回调时重新初始化它。会有一些数学和条件需要处理。
5.  当计时器线程完成睡眠时，它会删除并查看列表的头部并在新线程中执行函数指针。定时器线程在列表的新头部使用睡眠时间重新初始化。

    ```
    main() {
            //spawn a timer thread with pthread create 

        callfunctiontimed(25, test); 
        callfunctiontimed(35, show);
        callfunctiontimed(4,  print);
    }

    callfunctionTImed(int time, (func*)function, void*data) //
    {
        //add information to sorted list of timer and callbacks
        //re-initialize sleep_time for timer thread if needed. 
        return. 
    }
    timerThread() {
        while(1){
         sleep(sleep_time);
         //look at head of timer list, remove it, call function in a new thread   
         //adjust sleep time as per new head     
        }
    } 
    ```

希望这能说明我的意思，尽管这并不完美并且有几个问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-23T23:37:52.413

许多人在这里就此事提供了很好的答案，但我将直接解决这个问题，因为几年前我也遇到过类似的问题。我不能使用 Boost 有几个原因——我知道 Boost 在很多开源软件中都有很好的用途。此外，我真的很想*了解*计时器和回调，因为它与基于 Linux 的环境有关。所以，我自己写了。

从根本上说，我有一个`Timer`班级和一个`TimerCallback`班级。典型的回调，实现为类的继承类`TimerCallback`，将回调时要执行的操作放在`triggered ()`方法中，专门针对需要实现。

根据通常的语义，一个`Timer`对象与一个回调对象相关联，该对象可能包含执行回调所需的所有信息。计时器调度由一个环境范围的计时器 minheap 管理，该计时器必须在单独的线程/进程中维护。这个 minheap 任务只做一件事：它对将来设置的回调事件的 minheap 进行 minheap。minheap 选择下一个要触发的事件，`O(1)`并且可以将剩余的事件 minheapify`O(log n)`用于`n`计时器事件。它还可以在（[在此处](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)`O(log n)`阅读对堆的简要介绍）中插入新的计时器事件。

当定时器触发时，minheap 调度程序检查它是周期性定时器、单次定时器还是将执行特定次数的定时器。因此，计时器对象要么从 minheap 中删除，要么在下一个执行时间重新插入 minheap。如果要删除计时器对象，则将其从 minheap 中删除（但计时器对象的删除可能会或可能不会留给创建它的任务），并且堆的其余部分是 minheap-ified；即，重新排列以满足 minheap 属性。

一个工作和单元测试的实现是[here](https://github.com/SonnyRajagopalan/TimerAndCallback)，可能包含错误（摘自我的应用程序），但我认为它可能对某人有所帮助。该实现是基于多进程（`fork()`ed-process）的（并且`pthread`在主任务（进程）中也使用s），并使用POSIX共享内存和POSIX消息队列进行进程之间的通信。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-15T21:29:55.790

在 Windows 中，您有`SetTimer`- [http://msdn.microsoft.com/en-us/library/windows/desktop/ms644906(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644906(v=vs.85).aspx)

示例代码：

```
#define STRICT 1 
#include <windows.h>
#include <iostream.h>

VOID CALLBACK TimerProc(HWND hWnd, UINT nMsg, UINT nIDEvent, DWORD dwTime) 
{

  cout << "CALLBACK " << dwTime << '\n';
  cout.flush();
}

int main(int argc, char *argv[], char *envp[]) 
{
    int Counter=0;
    MSG Msg;

    UINT TimerId = SetTimer(NULL, 0, 2000, &TimerProc); //2000 milliseconds

    cout << "TimerId: " << TimerId << '\n';
   if (!TimerId)
    return 16;

   while (GetMessage(&Msg, NULL, 0, 0)) 
   {
        ++Counter;
        if (Msg.message == WM_TIMER)
        cout << "Counter: " << Counter << "; timer message\n";
        else
        cout << "Counter: " << Counter << "; message: " << Msg.message << '\n';
        DispatchMessage(&Msg);
    }

   KillTimer(NULL, TimerId);
return 0;
} 
```

# java - 画球时Android应用程序强制关闭？

> ID：12904100
> 
> 赞同：-3
> 
> 时间：2012-10-15T21:13:02.237
> 
> 标签：java, android, eclipse, logcat

我试图在屏幕上画一个球，但它强制关闭。出了点问题。

```
Ball b = new Ball();

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.ingame);
    start();
}

private void start() {
    Ball b = new Ball();
}

public void paint(Graphics g) {
    b.paint(g);
    g.setColor(Color.GREEN);
    g.fillOval(x-radius, y-radius, radius*2, radius*2);
} 
```

这是我的 LogCat：

10-15 21:02:45.492: E/dalvikvm(7847): 找不到类 'com.game.src.Ball'，引用自方法 com.jordan.bungee.bounce.Cracka。10-15 21:02:45.492: W/dalvikvm(7847): VFY: 无法解析 Lcom/jordan/bungee/bounce/Cracka 中的新实例 417 (Lcom/game/src/Ball;)；10-15 21:02:45.492: D/dalvikvm(7847): VFY: 在 0x002b 处替换操作码 0x22 10-15 21:02:45.492: D/dalvikvm(7847): VFY: Lcom/jordan 中的死代码 0x002d-0032 /蹦极/弹跳/Cracka；。()V 10-15 21:02:45.496: E/dalvikvm(7847): 找不到类 'com.game.src.Ball'，引用自方法 com.jordan.bungee.bounce.Cracka.start 10-15 21:02:45.496: W/dalvikvm(7847): VFY: 无法解析 Lcom/jordan/bungee/bounce/Cracka 中的新实例 417 (Lcom/game/src/Ball;)；

10-15 21:02:45.496: D/dalvikvm(7847): VFY: 在 0x0000 处替换操作码 0x22

10-15 21:02:45.500: D/dalvikvm(7847): VFY: Lcom/jordan/bungee/bounce/Cracka 中的死代码 0x0002-0005;.start ()V

10-15 21:02:45.500: W/dalvikvm(7847): VFY: 无法找到签名中引用的类 (Ljava/awt/Graphics;)

10-15 21:02:45.503: I/dalvikvm(7847): 找不到方法 com.game.src.Ball.paint，引用自方法 com.jordan.bungee.bounce.Cracka.paint

10-15 21:02:45.503: W/dalvikvm(7847): VFY: 无法解析虚拟方法 3021: Lcom/game/src/Ball;.paint (Ljava/awt/Graphics;)V

10-15 21:02:45.503: D/dalvikvm(7847): VFY: 在 0x0002 处替换操作码 0x6e

10-15 21:02:45.503: D/dalvikvm(7847): VFY: Lcom/jordan/bungee/bounce/Cracka 中的死代码 0x0005-001f；.paint (Ljava/awt/Graphics;)V

10-15 21:02:45.507: D/AndroidRuntime(7847): 关闭虚拟机

10-15 21:02:45.507: W/dalvikvm(7847): threadid=1: 线程退出未捕获异常 (group=0x4001e578) 10-15 21:02:45.527: E/AndroidRuntime(7847): 致命异常: main

10-15 21:02:45.527: E/AndroidRuntime(7847): java.lang.NoClassDefFoundError: com.game.src.Ball

10-15 21:02:45.527: E/AndroidRuntime(7847): at com.jordan.bungee.bounce.Cracka.(Cracka.java:22)

10-15 21:02:45.527: E/AndroidRuntime(7847): at java.lang.Class.newInstanceImpl(Native Method)

10-15 21:02:45.527: E/AndroidRuntime(7847): 在 java.lang.Class.newInstance(Class.java:1409)

10-15 21:02:45.527: E/AndroidRuntime(7847): 在 android.app.Instrumentation.newActivity(Instrumentation.java:1021)

10-15 21:02:45.527: E/AndroidRuntime(7847): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565)

10-15 21:02:45.527: E/AndroidRuntime(7847): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)

10-15 21:02:45.527: E/AndroidRuntime(7847): 在 android.app.ActivityThread.access$1500(ActivityThread.java:117)

10-15 21:02:45.527: E/AndroidRuntime(7847): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)

10-15 21:02:45.527: E/AndroidRuntime(7847): 在 android.os.Handler.dispatchMessage(Handler.java:99)

10-15 21:02:45.527: E/AndroidRuntime(7847): 在 android.os.Looper.loop(Looper.java:130)

10-15 21:02:45.527: E/AndroidRuntime(7847): 在 android.app.ActivityThread.main(ActivityThread.java:3687)

10-15 21:02:45.527: E/AndroidRuntime(7847): 在 java.lang.reflect.Method.invokeNative(Native Method)

10-15 21:02:45.527: E/AndroidRuntime(7847): 在 java.lang.reflect.Method.invoke(Method.java:507)

10-15 21:02:45.527: E/AndroidRuntime(7847): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)

10-15 21:02:45.527: E/AndroidRuntime(7847): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)

10-15 21:02:45.527: E/AndroidRuntime(7847): at dalvik.system.NativeStart.main(Native Method)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T00:22:12.320

我不确定为什么要在 start() 方法中定义局部变量 b ，因为您已经将其定义为类成员。一旦 start() 返回，您在 start() 中创建的那个将丢失。

另外：您创建的成员对象将在调用 onCreate() 之前很久就被实例化。为成功创建 Ball() 创建 Activity 时是否有足够的上下文可用？如果没有看到 Ball() 的源代码，我们无法判断。

您的 logcat 输出表明找不到 Ball 的类。你写了吗？您是否将它放在 Eclipse 可以找到它的正确目录中？

这个问题和您的后续行动似乎表明您对 Android 编程非常陌生，并且可能对 Java 很陌生。如果您是 Java 新手，我会认为这么快就尝试学习 Android 是一件好事。Android 不是适合初学者的编程环境。

也就是说，我建议您先学习一些教程来熟悉系统。然后，要编写您自己的应用程序，请找到与您正在尝试做的最相似的教程，复制它并开始进行修改。我几乎总是通过复制旧项目来开始新项目。这样，您就知道文件系统布局等可能是正确的开始它。

最后，在 Eclipse 窗口的底部，您将看到一个标有“问题”的选项卡。这对于找出问题所在非常有用。在您的情况下，关于为什么找不到 Ball 的解释可能就在那里。当然，还要检查您的控制台和 Logcat 选项卡。

# scala - 真假价值观

> ID：12904103
> 
> 赞同：6
> 
> 时间：2012-10-15T21:13:11.630
> 
> 标签：scala

在 Scala 中确定对象是真还是假的规则是什么？我找到了许多其他语言，如 Ruby、JavaScript 等，但似乎找不到 Scala 的权威列表。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-15T21:18:35.427

Scala 中没有数据类型强制转换为`Boolean`.

所以……`true`是真的，`false`也是假的。没有其他值可以用作布尔值。

没有比这更简单的了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-11T23:01:24.840

我不知道为什么以前没有人回答这个问题。@Aaron 是对的，但他的回答超出了 OP 范围。

您可以使用以下隐式转换将所有值强制为布尔值：

```
implicit def toBoolean(e: Int) = e != 0
implicit def toBoolean(e: String) = e != null && e != "false" && e != ""
  ... 
```

但你甚至可以拥有更好的东西。要使类型的行为类似于您自己的类型的 javascript：

```
trait BooleanLike[T] {
  def isTrue(e: T): Boolean
}
implicit object IntBooleanLike extends BooleanLike[Int] {
  def isTrue(e: Int) = e != 0
}
implicit object StringBooleanLike extends BooleanLike[String] {
  def isTrue(e: String) = e != null && e != ""
}

implicit class RichBooleanLike[T : BooleanLike](e: T) {
  def ||[U >: T](other: =>U): U = if(implicitly[BooleanLike[T]].isTrue(e)) e else other
  def &&(other: =>T): T = if(implicitly[BooleanLike[T]].isTrue(e)) other else e
} 
```

现在你可以在 REPL 中尝试它，它真的变得像 Javascript。

```
> 5 || 2
res0: Int = 5
> 0 || 2
res1: Int = 2
> 2 && 6
res1: Int = 6
> "" || "other string"
res2: String = "other string"
> val a: String = null; a || "other string"
a: String = null
res3: String = other string 
```

这就是我喜欢 Scala 的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T21:28:29.147

您没有找到它，因为 Scala 中不存在等效的概念，尽管您可以为自己定义类似的东西（[Scalaz](http://code.google.com/p/scalaz/)等库就是这样做的）。例如，

```
class Zero[T](v: T)

object Zero {
  implicit object EmptyString extends Zero("")
  implicit object NotANumber extends Zero(Double.NaN)
  implicit def none[T]: Zero[Option[T]] = new Zero(None)
} 
```

# asp.net-mvc - SessionSecurityTokenHandler 尝试使用 DPAPI 解密 RSA 加密 cookie 中的 SessionSecurityToken；为什么？

> ID：12904109
> 
> 赞同：8
> 
> 时间：2012-10-15T21:13:20.367
> 
> 标签：asp.net-mvc, azure, session-cookies, wif

我在 MSDN 论坛、Dominic Baier 的博客和其他来源中读到 DPAPI 在 Azure 中无法开箱即用，并且在任何类型的网络场场景中处理联合身份验证的一种方法是替换 DPAPI 转换一个使用整个场中可用的私钥，例如使用 X509 证书的 RSA 加密。我在我的 Azure MVC 应用程序中采用了这种方法并配置`SessionSecurityTokenHandler`如下：

```
FederatedAuthentication.ServiceConfigurationCreated += (sender, args) =>
    {
        var sessionTransforms = new List<CookieTransform>(new CookieTransform[]
            {
                new DeflateCookieTransform(),
                new RsaEncryptionCookieTransform(args.ServiceConfiguration.ServiceCertificate),
                new RsaSignatureCookieTransform(args.ServiceConfiguration.ServiceCertificate)
            });
        var sessionHandler = new SessionSecurityTokenHandler(sessionTransforms.AsReadOnly());
        args.ServiceConfiguration.SecurityTokenHandlers.AddOrReplace(sessionHandler);                    
    }; 
```

使用此配置，我们能够从身份提供者接收令牌并发布使用这些转换加密的安全 cookie。在 Azure 模拟器中运行，一切正常。但是，在 Azure 环境中，我们在浏览器中间歇性地看到以下错误：

```
Key not valid for use in specified state.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Security.Cryptography.CryptographicException: Key not valid for use in specified state.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[CryptographicException: Key not valid for use in specified state.
]
   System.Security.Cryptography.ProtectedData.Unprotect(Byte[] encryptedData, Byte[] optionalEntropy, DataProtectionScope scope) +577
   Microsoft.IdentityModel.Web.ProtectedDataCookieTransform.Decode(Byte[] encoded) +80

[InvalidOperationException: ID1073: A CryptographicException occurred when attempting to decrypt the cookie using the ProtectedData API (see inner exception for details). If you are using IIS 7.5, this could be due to the loadUserProfile setting on the Application Pool being set to false. ]
   Microsoft.IdentityModel.Web.ProtectedDataCookieTransform.Decode(Byte[] encoded) +433
   Microsoft.IdentityModel.Tokens.SessionSecurityTokenHandler.ApplyTransforms(Byte[] cookie, Boolean outbound) +189
   Microsoft.IdentityModel.Tokens.SessionSecurityTokenHandler.ReadToken(XmlReader reader, SecurityTokenResolver tokenResolver) +862
   Microsoft.IdentityModel.Tokens.SessionSecurityTokenHandler.ReadToken(Byte[] token, SecurityTokenResolver tokenResolver) +109
   Microsoft.IdentityModel.Web.SessionAuthenticationModule.ReadSessionTokenFromCookie(Byte[] sessionCookie) +356
   Microsoft.IdentityModel.Web.SessionAuthenticationModule.TryReadSessionTokenFromCookie(SessionSecurityToken& sessionToken) +123
   Microsoft.IdentityModel.Web.SessionAuthenticationModule.OnAuthenticateRequest(Object sender, EventArgs eventArgs) +61
   System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +80
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +270 
```

这似乎表明`SessionSecurityTokenHandler`正在尝试使用 DPAPI 解密 cookie，但为什么呢？我不是将它配置为使用上面的 RSA 吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-20T15:52:32.683

请注意，您现在可以使用[`MachineKeySessionSecurityTokenHandler`](http://msdn.microsoft.com/en-us/library/system.identitymodel.services.tokens.machinekeysessionsecuritytokenhandler.aspx)跨网络场签署和加密会话令牌。

要使用它，您需要删除默认值`SessionSecurityTokenHandler`并添加`MachineKeySessionSecurityTokenHandler`in `Web.config`：

```
<system.identityModel>
  <identityConfiguration>
    <securityTokenHandlers>
      <remove type="System.IdentityModel.Tokens.SessionSecurityTokenHandler, System.IdentityModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      <add type="System.IdentityModel.Services.Tokens.MachineKeySessionSecurityTokenHandler, System.IdentityModel.Services, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
    </securityTokenHandlers>
  </identityConfiguration>
</system.identityModel> 
```

使用`MachineKeySessionSecurityTokenHandler`配置的机器密钥，`Web.config`因此您也需要添加：

```
<system.web>
  <machineKey validationKey="..." decryptionKey="..." validation="SHA1" decryption="AES" />
</system.web> 
```

[在BrainThud](http://www.brainthud.com/cards/5218/5110/describe-the-default-mechanism-wif-uses-to-protect-session-tokens-give-one-limitation-of-this-mechanism-when-it-is-used-in-a/)上看到这个问题

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T00:21:21.003

好吧，经过大量搜索，我已经弄清楚我的问题是什么。`ServiceConfigurationCreated`在我设置`FederatedAuthentication.ServiceConfiguration`. [根据 MSDN](http://msdn.microsoft.com/en-us/library/microsoft.identitymodel.web.federatedauthentication.serviceconfigurationcreated.aspx)，“当 Web 应用程序中的第一个 HTTP 模块引用 ServiceConfiguration 时，会引发 ServiceConfigurationCreated 事件”。我将事件处理程序设置移到顶部，`Application_Start`一切正常，这意味着该事件（仅触发一次）在我设置事件处理程序之前触发。

希望这可以节省我将其运行到地面所花费的 4 个多小时。

# ios6 - 在 IOS 6 中使用情节提要以横向模式呈现 modalViewController

> ID：12904114
> 
> 赞同：1
> 
> 时间：2012-10-15T21:13:42.097
> 
> 标签：ios6, modalviewcontroller, landscape

我有一个应用程序在纵向模式下有一些视图，我想在横向模式下呈现模态视图控制器......对于 IOS 5.0 和 5.1 完美运行，在 IOS 6 中它打开 modalView 但在纵向模式下。您需要知道：我使用情节提要，并将该 VC 设置为 Landscape... 在应用程序委托中，我添加了：

```
-(NSUInteger)application:(UIApplication *)application    supportedInterfaceOrientationsForWindow:(UIWindow *)w
{return UIInterfaceOrientationMaskPortrait;} 
```

如果我添加`| UIInterfaceOrientationMaskLandscape`，我可以在其他视图中旋转应用程序。

然后对于摘要，我禁用了所有支持的界面方向。在这里我尝试设置纵向和横向左侧，效果很好，但在这种情况下，我可以将所有视图旋转到左侧并返回纵向。

在我想在横向吃午饭的 ViewCONtroller 之后，我有适用于 IOS 6 的方法：

```
-(NSUInteger)supportedInterfaceOrientations
{return UIInterfaceOrientationLandscapeLeft;}

-(BOOL)shouldAutorotate
{return YES;} 
```

当我点击按钮午餐modalView运行后，我得到这个错误：**“支持的方向与应用程序没有共同的方向，并且shouldAutorotate返回YES”**

我知道关于在该方法上返回 YES，但如果我设置为 NO，则不会发生任何事情。我想考虑一下：我的应用程序需要在 IOS 5 及更高版本上运行。

任何人都可以帮助我吗？任何建议都值得赞赏；）

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T10:42:35.920

```
- (void)viewWillAppear:(BOOL)animated {
[super viewWillAppear:animated];
[self transformView2ToLandscape];}

-(void) transformView2ToLandscape {

NSInteger rotationDirection;
UIDeviceOrientation currentOrientation = [[UIDevice currentDevice] orientation];

if(currentOrientation == UIDeviceOrientationLandscapeLeft){
    rotationDirection = 1;
}else {
    rotationDirection = -1;
}

CGAffineTransform transform = [arController.viewController.view transform];
transform = CGAffineTransformRotate(transform, degreesToRadians(rotationDirection * 90));
[arController.viewController.view setTransform: transform];} 
```

这对我来说很好。

# ruby-on-rails - 如何使用 Rails 中的 twitter Gem 从多个帐户发送推文？

> ID：12904116
> 
> 赞同：1
> 
> 时间：2012-10-15T21:13:44.817
> 
> 标签：ruby-on-rails, twitter, oauth

我有一个应用程序，它使用 Twitter 作为提供者具有 Oauth 访问权限。我还可以要求登录的用户允许在他/她的帐户中读取和写入，一旦用户授权该应用程序，我可以以用户身份发送推文，例如：

```
u = User.find(id)
u.twitter.update("Some-Status-Here") 
```

在rails控制台中......我想做的是在一个命令中以所有用户的身份发推文，但如果我尝试类似：

```
u = User.all
u.twitter.update("Some-Status-Here") 
```

我收到此错误：

```
undefined method `twitter' for #<Array:0x00000002e2f188> 
```

如何在一个命令中以所有用户的身份发推文？我究竟做错了什么？我觉得这是我缺少的一个非常基本的东西......有人可以帮助我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T21:33:47.827

该`User.all`方法返回一个用户数组，而不是单个用户。如果你想对每个用户调用一个方法，你需要遍历它。

```
users = User.all
users.each do |user|
  user.twitter.update("Some status here")
end 
```

也就是说，我不建议在不先向用户显示消息并征得他们同意的情况下更新用户的 Twitter 状态。

此外，可能有比上述更有效的方法来执行此操作，因此请注意性能和 API 命中限制。

# c++ - 如何将 ifstream 返回到刚刚在 C++ 中读取的行的开头？

> ID：12904118
> 
> 赞同：9
> 
> 时间：2012-10-15T21:13:52.050
> 
> 标签：c++, file, ifstream

在我使用 ifstream 从文件中读取一行后，有没有办法有条件地将流带回到我刚刚读取的行的开头？

```
using namespace std;
//Some code here
ifstream ifs(filename);
string line;
while(ifs >> line)
{
   //Some code here related to the line I just read

   if(someCondition == true)
   {
    //Go back to the beginning of the line just read
   }
   //More code here
} 
```

因此，如果 someCondition 为真，则在下一次 while 循环迭代期间读取的下一行将是我刚刚读取的同一行。否则，下一次 while 循环迭代将使用文件中的以下行。如果您需要进一步说明，请随时询问。提前致谢！

**更新#1**

所以我尝试了以下方法：

```
while(ifs >> line)
{
   //Some code here related to the line I just read
   int place = ifs.tellg();
   if(someCondition == true)
   {
    //Go back to the beginning of the line just read
    ifs.seekg(place);
   }
   //More code here
} 
```

但是当条件为真时，它不会再次读取同一行。整数在这里是可接受的类型吗？

**更新#2：解决方案**

我的逻辑有错误。对于任何好奇的人来说，这是我想要的更正版本：

```
int place = 0;
while(ifs >> line)
{
   //Some code here related to the line I just read

   if(someCondition == true)
   {
    //Go back to the beginning of the line just read
    ifs.seekg(place);
   }
  place = ifs.tellg();
   //More code here
} 
```

对tellg() 的调用被移到了末尾，因为您需要寻找到先前读取的行的开头。第一次我调用了tellg()，然后在流甚至改变之前调用了seekg()，这就是为什么它似乎没有改变（因为它真的没有改变）。谢谢大家的贡献。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T21:17:56.863

没有直接的方法可以说“回到最后一行的开头”。但是，您可以使用 回到您保留的位置`std::istream::tellg()`。也就是说，在阅读您要使用的行之前`tellg()`，然后`seekg()`回到该位置。

However, calling the seek functions frequently is fairly expensive, i.e., I would look at removing the requirement to read lines again.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T21:16:28.433

将 fstream 位置存储在文件中（查看文档）。

读线。

如果发生这种情况 - 转到文件中的存储位置。

你需要这个：

*   [http://en.cppreference.com/w/cpp/io/basic_istream/tellg](http://en.cppreference.com/w/cpp/io/basic_istream/tellg)

*   [http://en.cppreference.com/w/cpp/io/basic_istream/seekg](http://en.cppreference.com/w/cpp/io/basic_istream/seekg)

# reportingservices-2005 - SQL Server Reporting Services 2005 发送 2 封电子邮件

> ID：12904121
> 
> 赞同：1
> 
> 时间：2012-10-15T21:14:09.853
> 
> 标签：reportingservices-2005

大约 3 周前，我们的 SSRS 2k5 自动电子邮件订阅的所有收件人开始收到重复的报告电子邮件。看起来我们所有的自动报告都受到了影响。SSRS 似乎没有什么问题。

# algorithm - 大（O）表示法：任何人都可以验证吗？

> ID：12904122
> 
> 赞同：4
> 
> 时间：2012-10-15T21:14:10.647
> 
> 标签：algorithm, complexity-theory, pseudocode

所以我正在为我的一门计算课回答一个问题。我开发了一个算法，然后它问我算法的复杂性。我目前不太擅长确定复杂性，所以有人可以验证吗？

代码如下：

```
if( A.type is not Comparable ): return False                   // Max runs = 1
current ← A.head                                               // Max runs = 1
printedFirst ← False                                           // Max runs = 1
while( current.hasNext ):                                      // Max runs = s-1
    if ( current.value < current.next.value ):                 // Max runs = s-1 
        if ( printedFirst ): print “, “                        // Max runs = s-1
        print “(“ + current.value + “, “ + current.next.value + “)” //runs = s-1
        printedFirst ← True                                    // Max runs = s-1
    current = current.next                                     // Max runs = s-1 
```

所以我们有

```
3( 1 ) + 6(s - 1) = 3 + 6s - 6 = 6s - 3 = O( n ) 
```

正确的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T21:18:18.440

一个单独的while循环，里面只有一个if ...去O（n）。

祝你的课好运。

# c# - 获取控制台应用程序的输出并将其显示在列表框或文本框中

> ID：12904132
> 
> 赞同：0
> 
> 时间：2012-10-15T21:15:27.873
> 
> 标签：c#, windows, visual-studio, shell, command-line

如何在 C# 中运行进程（avrdude）并在进程运行时实时获取输出？

如果可能的话，avrdude 会显示进度条，我认为会用新的进度更新最后一行，如下所示：

```
Reading | ################################################## | 100% 0.01s 
```

我更喜欢 ListBox，但如果可能的话，我不会介意用 listbox 做那个进度条。

我尝试了许多解决方案，但一个不起作用，另一个无法从 WPF 移植到简单的 Windows 窗体，而我发现有效的一个被阻止了，我不得不等待进度条填满才能显示它。

也许有人知道如何获得对 C# 应用程序的所有效果的完整输出？

# c# - 当我运行 WinRT Metro 应用程序异步方法时，它是否也并行运行？

> ID：12904134
> 
> 赞同：1
> 
> 时间：2012-10-15T21:15:37.333
> 
> 标签：c#, windows-8, microsoft-metro

在查看了这个[博客阅读器教程](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/br211380.aspx)后，我注意到在一个方法中进行了 14 个异步调用。这些都是同时运行还是并行运行？如果不是，那么当发生错误时会发生什么？其余的是否连续运行，还是整个方法都停止了？

示例代码：

```
public async Task GetFeedsAsync()
        {
            Task<FeedData> feed1 =
                GetFeedAsync("http://windowsteamblog.com/windows/b/developers/atom.aspx");
            Task<FeedData> feed2 =
                GetFeedAsync("http://windowsteamblog.com/windows/b/windowsexperience/atom.aspx");
            Task<FeedData> feed3 =
                GetFeedAsync("http://windowsteamblog.com/windows/b/extremewindows/atom.aspx");
            Task<FeedData> feed4 =
                GetFeedAsync("http://windowsteamblog.com/windows/b/business/atom.aspx");
            Task<FeedData> feed5 =
                GetFeedAsync("http://windowsteamblog.com/windows/b/bloggingwindows/atom.aspx");
            Task<FeedData> feed6 =
                GetFeedAsync("http://windowsteamblog.com/windows/b/windowssecurity/atom.aspx");
            Task<FeedData> feed7 =
                GetFeedAsync("http://windowsteamblog.com/windows/b/springboard/atom.aspx");
            Task<FeedData> feed8 =
                GetFeedAsync("http://windowsteamblog.com/windows/b/windowshomeserver/atom.aspx");
            // There is no Atom feed for this blog, so we use the RSS feed.
            Task<FeedData> feed9 =
                GetFeedAsync("http://windowsteamblog.com/windows_live/b/windowslive/rss.aspx");
            Task<FeedData> feed10 =
                GetFeedAsync("http://windowsteamblog.com/windows_live/b/developer/atom.aspx");
            Task<FeedData> feed11 =
                GetFeedAsync("http://windowsteamblog.com/ie/b/ie/atom.aspx");
            Task<FeedData> feed12 =
                GetFeedAsync("http://windowsteamblog.com/windows_phone/b/wpdev/atom.aspx");
            Task<FeedData> feed13 =
                GetFeedAsync("http://windowsteamblog.com/windows_phone/b/wmdev/atom.aspx");
            Task<FeedData> feed14 =
                GetFeedAsync("http://windowsteamblog.com/windows_phone/b/windowsphone/atom.aspx");

            this.Feeds.Add(await feed1);
            this.Feeds.Add(await feed2);
            this.Feeds.Add(await feed3);
            this.Feeds.Add(await feed4);
            this.Feeds.Add(await feed5);
            this.Feeds.Add(await feed6);
            this.Feeds.Add(await feed7);
            this.Feeds.Add(await feed8);
            this.Feeds.Add(await feed9);
            this.Feeds.Add(await feed10);
            this.Feeds.Add(await feed11);
            this.Feeds.Add(await feed12);
            this.Feeds.Add(await feed13);
            this.Feeds.Add(await feed14);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:30:46.167

.NET 4.5（在 WinRT 中使用）的 HttpClient 异步 API 会在您调用 HttpClient.GetAsync 方法（或它们的 put、post delete 等。等价物）后自动启动 Web 请求任务。

这些任务是承诺。

因此，在上面的示例中，所有的任务都是并行启动的，然后线程将由第一个等待直到第一个请求返回，然后直到第二个返回，等等......

如果一个任务在等待时已经完成，那么等待指令将同步运行。

如果请求执行过程中发生错误，等待任务时会抛出异常。因此，如果您不等待您的任务，任何异常都会丢失。

# collections - 您如何覆盖 Backbone 集合（而不是模型）的同步方法？

> ID：12904140
> 
> 赞同：4
> 
> 时间：2012-10-15T21:15:49.747
> 
> 标签：collections, backbone.js, sync

我有一个文件夹树，它根据您单击的文件夹获取集合。如果用户改变主意并单击另一个文件夹，我想中止先前的提取。由于这种情况发生在项目中的多个地方，我想覆盖集合上的同步方法。我见过很多模型同步的例子，但不是集合。我还想保留查询字符串参数。官方文档指出集合也有一个同步方法，但我从未见过这样做。请指出我正确的方向。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-01T11:46:12.543

Backbone 的 Collection 同步看起来与 Model 的同步方法完全相同：

```
// Proxy `Backbone.sync` by default.
        sync: function() {
            return Backbone.sync.apply(this, arguments);
        }, 
```

那是因为两者都做同样的事情，他们只是“代理”了 Backbone.sync 方法。它们存在的原因是允许实现基于每种类型更改同步逻辑，而不必触及会影响项目中所有模型和集合的主要同步方法。

我建议为您的收藏做类似以下的事情，因为您可能不想自己模仿 Backbone 的同步逻辑，它为您做了很多事情，并且弄乱它可能会导致以后难以解决的问题。

```
var MyCollectionType = Backbone.Collection.extend({

    sync: function(method, model, options){
          //put your pre-sync logic here and call return; if you want to abort

         Backbone.Collection.prototype.sync.apply(this, arguments); //continue using backbone's collection sync 
    }
}); 
```

# ios - iPhone5 的 Xcode 限制把我搞砸了

> ID：12904142
> 
> 赞同：3
> 
> 时间：2012-10-15T21:15:56.653
> 
> 标签：ios, constraints, iphone-5, autolayout

我正在尝试做一件看起来很容易的事情，但是由于 xcode 中的新自动布局，我很难理解约束发生了什么。

我想要做的是主视图中的 2 个子视图，基本上是顶部的一个滚动视图和底部的一个 uiview，中间没有空格

在 iPhone 5 上我希望它是
400px
148px

在 iPhone 4 上：
358px
112px

每次我添加一个约束时，另一个消失或另一个不允许我改变高度
我不知道这是否可以解释或什么但欢迎任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T03:41:23.297

我讨厌 Interface Builder 中的新**AutoLayout**。我要做的第一件事就是禁用它。只需通过单击**File's Owner** > **Show File Inspector**禁用它，然后取消**选中 Use AutoLayout**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-10T07:32:54.480

我发现关于自动调整大小和大小类的问题是它们的目的是处理复杂的 UI 布局，所以：

1.  如果您正在构建的 UI 与 Apple 提供的应用程序一样简单，那么您不必使用它们就可以在所有设备上运行；
2.  如果 UI 真的很复杂，你最终会遇到很多限制，以至于最终没有人能够弄清楚什么是什么。除非在紧迫的期限内做出一些巨大的需求更改，否则没关系，那么唯一的解决方案就是随着时间的推移而工作。

使用具有固定设计的 Auto Layout 构建东西是非常愉快的，这是一种优雅的方式，一切似乎都在正确的位置，完全在你的控制之下，你根本不需要编写任何代码。但只要必须进行更改，找出所有约束之间的关系比阅读代码更难。

对于多个设备的一些非常复杂的布局，新技术可能是必须的，但我认为仍然有很多有用的应用程序只使用自动调整掩码和代码的空间。这么说可能有点丢脸，但基本上，我讨厌自动布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-09T13:11:01.520

如果您想要约束的固定高度。只需在界面构建器中选择您的元素，然后手动添加高度约束。（底部的小加号，然后是高度）。

如果您想要固定高度，只需对这些约束进行出口并操纵它们的常数值。

# ruby - RVM 在 OSX 10.8.2 上安装 Ruby for i386 而不是 x86_64

> ID：12904144
> 
> 赞同：1
> 
> 时间：2012-10-15T21:16:08.743
> 
> 标签：ruby, rvm, x86-64, i386

我在两台不同的 OSX 10.8.2 机器上安装了 Ruby/Gem/Rails。一个工作正常，另一个似乎工作，直到我尝试安装包含本机代码（如 pg）的 gem。当我做

```
gem install pg -v 0.12.2 
```

它失败并显示“找不到 PostgeSQL 客户端库 (libpq)。

如果我查看 mkmf.log，我会看到：

`have_library: checking for PQconnectdb() in -lpq... -------------------- no "gcc-4.2 -o conftest -I/Users/brian/.rvm/rubies/ruby-1.9.3-p286/include/ruby-1.9.1/i386-darwin12.2.0 -I/Users/brian/.rvm/rubies/ruby-1.9.3-p286/include/ruby-1.9.1/ruby/backward -I/Users/brian/.rvm/rubies/ruby-1.9.3-p286/include/ruby-1.9.1 -I. -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -I/usr/include -I/Users/brian/.rvm/usr/include -fno-common -pipe conftest.c -L. -L/Users/brian/.rvm/rubies/ruby-1.9.3-p286/lib -L. -L/Users/brian/.rvm/usr/lib -L/usr/local/lib -L/usr/lib -lruby.1.9.1 -lpq -lpthread -ldl -lobjc " ld: warning: ignoring file /usr/local/lib/libpq.dylib, file was built for unsupported file format ( 0xcf 0xfa 0xed 0xfe 0x 7 0x 0 0x 0 0x 1 0x 3 0x 0 0x 0 0x 0 0x 6 0x 0 0x 0 0x 0 ) which is not the architecture being linked (i386): /usr/local/lib/libpq.dylib Undefined symbols for architecture i386: "_PQconnectdb", referenced from: _t in ccLXteQk.o`

我相信这是因为被忽略的库是 64 位库（就像我想要的那样），但我的 ruby​​ 安装是 32 位的（出于某种原因）。作为证据，在我看到的工作机器上

```
~/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/x86_64-darwin12.2.0/ruby/config.h 
```

在失败的那个

```
~/.rvm/rubies/ruby-1.9.3-p194/include/ruby-1.9.1/i386-darwin12.2.0/ruby/config.h 
```

抱歉，解释太长了。我已经尝试了很多事情来尝试设置架构

```
rvm install 1.9.3 
```

正在生成这些目录。我的任何努力都没有导致“坏”机器生成与所需的 64 位二进制文​​件保持一致的包含目录。我没有故意在这些构建中设置架构，所以我现在很困惑，在“坏”机器的环境中是什么导致 ruby​​ 安装认为它应该构建 32 位二进制文​​件。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:20:54.137

你可以将你的拱形标志传递给我相信的。喜欢`gem install pg -- --arch-flags='i386'`

或任何 pg 接受的拱标志。也应该是一个标志，您可以通过它来定义拱形类型（导致它找到那个）

你也可以说`gem install pg -- --with-pg-include=/path/to/pg/include --with-pg-dir=/path/to/pg_config`

# security - Resteasy 安全、oauth、android 客户端

> ID：12904152
> 
> 赞同：1
> 
> 时间：2012-10-15T21:16:44.190
> 
> 标签：security, rest, oauth, resteasy

我正在构建一个包含服务器端组件（resteasy）和Android客户端的应用程序。在 Android 客户端中，我使用 httpclient 向服务器发出请求。

要登录 Android 客户端，我想使用 OAuth 2.0。

但我最关心的是保护服务器端。有谁知道如何保护我的应用程序的服务器端？

# c++ - 在 ostream 函数中使用 stringstream

> ID：12904155
> 
> 赞同：8
> 
> 时间：2012-10-15T21:16:51.217
> 
> 标签：c++, ostream

我正在研究`ostream`为某些数学类（矩阵、向量等）提供运算符。一位朋友注意到，`ostream`运算符的 gcc 标准库实现`std::complex`包括内部使用字符串流来格式化输出，然后将其传递给实际`ostream`：

```
///  Insertion operator for complex values.
template<typename _Tp, typename _CharT, class _Traits>
  basic_ostream<_CharT, _Traits>&
  operator<<(basic_ostream<_CharT, _Traits>& __os, const complex<_Tp>& __x)
{
  basic_ostringstream<_CharT, _Traits> __s;
  __s.flags(__os.flags());
  __s.imbue(__os.getloc());
  __s.precision(__os.precision());
  __s << '(' << __x.real() << ',' << __x.imag() << ')';
  return __os << __s.str();
} 
```

这种模式在 boost 中也可见。我们正在尝试确定这是否是值得遵循的模式。有人担心它涉及为字符串流包含一个额外的标头，并且在字符串流中需要额外的堆分配，这可能会被避免。

最合理的建议是，如果客户端需要该功能，那么他们可以创建字符串流并自己进行预传递。

谁能帮我理解为什么这会被认为是好的做法以及我是否应该采用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T21:23:13.767

考虑如果您在 ostream 上设置输出宽度，然后向其写入 std::complex 会发生什么 - 您不希望宽度仅影响第一个输出操作（即`'('`字符）

```
std::complex i(0, 1);
std::cout << std::setw(10) << std::left << i; 
```

`"(0,1)     "`这不应该打印`"(         0,1)"`

通过将整个输出形成为单个字符串，然后将其写出，输出会尊重流上设置的字段宽度和其他格式标志。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T21:26:42.540

另一个响应中引用的线程原因不会真正解决：字符串仍然可以在流缓冲区级别拆分，因为从多个线程调用时这些操作不是原子的。

但是，有两个相关的考虑因素：

1.  对于某些输出，您希望临时更改格式标志设置。例如，您想确保某个字符串使用十六进制表示法出现，对于其他十进制表示法，并且您希望将流恢复到其原始状态。
2.  更重要的是，输出的含义`width()`是整个格式化字符串至少应该占据的字符数。如果您在另一个输出运算符内部使用输出运算符，您将使第一个元素占据宽度，而不是由多个组件组成的整个字符串。例如，对于复数，实数元素将占据`width()`而不是实数元素、逗号和虚数元素的组合。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T21:22:09.723

这种模式的一个主要目的是避免保留原始流的操纵器/标志并在返回之前重置它们。[Boost.IoStateSavers](http://www.boost.org/libs/io/doc/ios_state.html)不需要这样做，所以我会说使用所述库将是一个更好的做法。

# c# - 尝试将项目和值添加到 asp.net 中的下拉列表时出错

> ID：12904157
> 
> 赞同：1
> 
> 时间：2012-10-15T21:17:06.643
> 
> 标签：c#, asp.net, dropdownbox

我正在尝试将项目和值添加到 asp.net 下拉列表控件。

```
arrEmpName = HttpContext.Current.Session["EmployeeName"].ToString();
arrEmpID = HttpContext.Current.Session["EmpID"].ToString();
char[] separator = new char[] { ',' };

string[] sEmployeeName = arrEmployeeName.Split(separator);
string[] sEmpID = arrEmpID.Split(separator);

foreach (string s in sEmployeeName)
{
    ddlEmp.Items.Add(new ListItem(sEmployeeName, sEmpID));
} 
```

我收到两条错误消息：

> 'System.Web.UI.WebControls.ListItem.ListItem(string, string)' 有一些无效参数

和

> ```
> Argument 1: cannot convert from 'string[]' to 'string' 
> ```

有什么想法会是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T21:19:16.860

您正在尝试将数组作为一个整体添加到 ListItem 值中。我怀疑他们应该被联系起来：

```
string[] sEmployeeName = arrEmployeeName.Split(separator);
string[] sEmpID = arrEmpID.Split(separator);

for (int i = 0; i < sEmployeeName.Length; i++)
{
    ddlEmp.Items.Add(new ListItem(sEmployeeName[i], sEmpID[i]));
} 
```

您可能还需要考虑检查它们的长度是否相同：

```
if (sEmployeeName.Length != sEmpID.Length)
    throw new Exception("Number of employee names does not match the number of IDs!"); 
```

编辑：如果你愿意，可以加入一些 Linq，但不是真的必要：

```
var employees = Enumerable.Zip(arrEmployeeName.Split(separator), arrEmpID.Split(separator), (name, id) => new { Name = name, ID = id } );
foreach(var employee in employees)
{
    ddlEmp.Items.Add(new ListItem(employee.Name, employee.ID));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T21:22:36.250

假设您的数组总是等长并且一对一匹配（在名称和 id 之间）：

```
for (int i = 0; i < sEmployeeName.Length; ++i)
{
    var employeeName = sEmployeeName[i];
    var employeeId = sEmpID[i];

    ddlEmp.Items.Add(new ListItem(employeeName, employeeId));
} 
```

你正在发送`arrays`。

# ruby-on-rails - 如何将 jBuilder 输出为 XML？

> ID：12904161
> 
> 赞同：0
> 
> 时间：2012-10-15T21:17:49.203
> 
> 标签：ruby-on-rails, xml, json

我希望我的模型的 XML 表示完全反映它的 JSON 表示。我使用模板设置了 jBuilder，一切运行良好。我的印象是 jBuilder 在将其编码为 JSON 字符串之前构建了一个哈希，有谁知道如何将其编码为 XML？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:37:24.357

jBuilder 有#attributes！返回要编码为 JSON 的属性的方法。那是你要找的吗？

# database - 在数据库中存储指向文件的链接

> ID：12904172
> 
> 赞同：3
> 
> 时间：2012-10-15T21:18:29.290
> 
> 标签：database, database-design, fileserver, file-organization

我正在创建一个数据库应用程序（除其他外），它允许用户上传和下载文件。这些文件存储在文件服务器上，我已经使用 PHP 脚本设置了一个 Apache HTTP 服务器来处理（即上传和下载）文件。数据库只存储文件的链接，而不是文件本身。我的问题是：我应该如何组织文件服务器上的文件？

目前，我正在根据当前日期创建一个目录结构，并使用当前日期/时间（包括毫秒）的 MD5 哈希值加上一些随机字符（即我添加“salt”）重命名文件：

```
\\yyyy\mm\dd\debb40da158040e4f3b93f9576840c07 
```

这个（上面）是存储在数据库中的链接（当然，我也将真实的文件名存储在数据库中，以便在用户下载文件时重命名文件——用户永远看不到实际的文件名）关联）。

我使用`yyyy\mm\dd`目录结构来避免性能问题（我被告知同一目录中的很多文件会减慢速度）并且我用唯一的字符串重命名文件以避免在用户上传具有相同名称的文件时发生冲突。

我想就在这种情况下处理文件存储的最佳方式获得其他意见。我已经看到一些开发人员保留文件名，但在文件信息表中附加（作为前缀）相应行的数据库 ID ---我看到了这种方法的一些优点，因为文件名是“人类可读的”并且如果数据库文件信息表被损坏或删除，您可以弄清楚这些文件是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T21:27:54.230

使用时间戳（上传日期）作为第一级目录的结构怎么样，文件内容的 md5 哈希作为第二级（文件内容的哈希确保文件是唯一的/名称独立的），上传时间戳作为第三级（使您在不同时间上传同一文件的不同版本），并且文件的实际文件名位于第 4 级。`e.g. <date timestamp>/<md5 of file contents>/<timestamp>/<filename>`

这样，您的目录结构将包含以下信息：

*   在特定日期上传的文件列表
*   独立于文件名的唯一文件
*   版本控制
*   维护文件名而无需即时更改它

文件内容 md5 哈希的缺点是，如果您有非常大的文件，则生成时会产生轻微的开销。

进一步的想法

*   如果这是一个有许多用户每天上传文件的系统并且肯定会为一年中的每一天创建 365 个目录，您可以将日期打破为以前的格式（yyyy/mm/dd 甚至只是 yyyy/date），尽管当您在目录中有大于 10k 的条目列表时性能会降低（并且在基于服务器的操作系统中大于 100k 到数百万），因此如果您在注意到任何降级之前应该给您大约 25-30 年只使用一个日期目录。

*   我相信文件内容的哈希是保证文件名独立性的方法，虽然计算内容的 md5 会增加一点开销，但与上传时间相比，它是微不足道的。例如，根据连接速度，上传 100 mb 文件需要 x 时间，上传后您只需使用 md5sum 即时计算文件内容，这将增加几秒钟（100 mb 文件需要 5-6 ) 到用户将感知到的上传时间。

*   您可以进一步使用文件内容的 md5（假设您也将其存储在数据库中）作为保护原始上传文件真实性的签名

*   在当前场景的上下文中，您实际上不需要 dir 结构中的时间戳（+salt），除非您想要对文件进行版本控制或保证没有上传以不同名称命名的相同文件（否则您最终会在同一文件内容下具有不同的文件名 md5 命名为 dir 为给定的一天）。

*   不知道为什么你会介意 md5 字符串的长度。它不会影响性能，并且 md5 非常普遍，并且很好地支持用于其他目的（例如验证文件）。但是，如果您真的想缩短长度，请查看[http://en.wikipedia.org/wiki/List_of_hash_functions](http://en.wikipedia.org/wiki/List_of_hash_functions)并选择一个 16 位或 8 位甚至 4 位的 crc 进行试验（同样取决于您的工作方式使用它，文件内容或文件名以及它们有多大）。

*   最后，另一种选择是执行`<group>/<user_id>/<filehash>/<timestamp>/<filename>`where group will be user ids 1 to`<acceptable number of entries in a dir>`，比如 10000 或更少，但您可以通过在服务器上试验有多少条目会降低性能来发现这一点，并且当达到限制时，您有一个脚本会创建一个具有相同结构的新组。通过这种方式，您可以避免重复/相似的信息（日期、年份、月份、时间戳等），您可以自己控制可接受的限制，您可以让不同的用户上传相同的文件，您可以通过 filehash 来判断文件是否已被无论文件名如何上传，您都使用时间戳进行版本控制，并且在最后的目录中只有一个文件具有其原始（或指定）名称。如果您是 FaceBook 并拥有十亿用户，您可以拥有这种结构并跨不同服务器托管目录组集群。如果您有一个拥有 1000 个用户的小型网站，您甚至不需要群组位。

# c# - WPF 画布和碰撞检测

> ID：12904173
> 
> 赞同：1
> 
> 时间：2012-10-15T21:18:31.227
> 
> 标签：c#, wpf, canvas, collision-detection

我正在尝试在父画布上随机放置多个子画布。我不希望兄弟画布重叠（或碰撞），所以我使用了一些碰撞检测。

我显然做错了什么，因为有碰撞，但我不能指望它。

我的绘图方法（每秒调用一次）

```
 private void draw(int args)
    {
        parent.Children.Clear();

        List<MyCanvas> children = fetchManyChildren(100);
        Random rand = new Random();

        foreach (MyCanvas child in children)
        {
            child.xPos = nextDouble(rand, 0, parent.ActualWidth - child.Width);
            child.yPos = nextDouble(rand, 0, parent.ActualHeight - child.Height);

            foreach (MyCanvas sibling in parent.Children)
            {
                while (child.collidesWith(sibling))
                {
                    child.xPos = nextDouble(rand, 0, parent.ActualWidth - child.Width);
                    child.yPos = nextDouble(rand, 0, parent.ActualHeight - child.Height);
                }
            }

            Canvas.SetLeft(child, child.xPos);
            Canvas.SetTop(child, child.yPos);

            parent.Children.Add(child);
        }
    } 
```

几个辅助方法：

```
 private List<MyCanvas> fetchManyChildren(int amount)
    {
        List<MyCanvas> children = new List<MyCanvas>(amount);

        Random rand = new Random();

        for (int i = 1; i <= amount; i++)
        {
            double size = nextDouble(rand, 1, MAX_SIZE);

            MyCanvas child = new MyCanvas(0, 0, size, size);

            child.Background = randomBrush(rand);

            children.Add(child);
        }

        return children;
    }

    private double nextDouble(Random rand, double min, double max)
    {
        return min + (rand.NextDouble() * (max - min));
    } 
```

一个派生自 Canvas 的类，它允许我为 Canvas 提供 x/y 位置并检查碰撞：

```
public class MyCanvas : Canvas
{
    public double xPos = 0;
    public double yPos = 0;

    public MyCanvas(double x, double y, double w, double h)
    {
        this.xPos = x;
        this.yPos = y;
        this.Width = w;
        this.Height = h;
    }

    public bool collidesWith(MyCanvas p)
    {
        double bottom = this.yPos + this.Height;
        double top = this.yPos;
        double left = this.xPos;
        double right = this.xPos + this.Width;

        return !((bottom < p.yPos) ||
                 (top > p.yPos + p.Height) ||
                 (left > p.xPos + p.Width) ||
                 (right < p.xPos));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T12:11:10.997

当您在发生碰撞时更改随机位置时，您忘记返回检查`parent.Children`...中的所有子项.

你需要类似下面的代码。

请注意，您需要小心....

您应该以某种方式更改您/我的代码以处理无法将您的孩子放置在无人居住区域的情况，即没有任何空闲空间。

当您依靠“随机”数字生成来最终找到“空闲”位置时……发现区域所需的时间和“运气”可能会使您处于需要过度或无限的情况时间量......“找到”空闲区域的更好算法将是可取的。

```
private void draw(int args)
    {
        parent.Children.Clear();

        List<MyCanvas> children = fetchManyChildren(100);
        Random rand = new Random();

        foreach (MyCanvas child in children)
        {
            while(true)
            {
                // Choose a random place on Canvas we would like to place child

                child.xPos = nextDouble(rand, 0, parent.ActualWidth - child.Width);
                child.yPos = nextDouble(rand, 0, parent.ActualHeight - child.Height);

                // Now see if it collides with ones already on Canvas

                bool bCollisionDetected = false;

                foreach (MyCanvas sibling in parent.Children)
                {
                    bCollisionDetected = child.collidesWith(sibling);

                    if (bCollisionDetected)
                        break;
                }

                if (!bCollisionDetected) // Was able to place child in free position
                    break;
            }

            Canvas.SetLeft(child, child.xPos);
            Canvas.SetTop(child, child.yPos);

            parent.Children.Add(child);
        }
    } 
```

# r - 计算元素在序列中重复的次数（在 R 中）

> ID：12904177
> 
> 赞同：7
> 
> 时间：2012-10-15T21:18:38.290
> 
> 标签：r, sequence

我有一系列事件，编码为 A、B 和 C。对于每个元素，我需要计算该元素之前重复了多少次。例如：

```
x<-c('A','A','A','B','C','C','A','B','A','C')
y<-c(0,1,2,0,0,1,0,0,0,0)
cbind(x,y)

     x   y  
[1,] "A" "0"
[2,] "A" "1"
[3,] "A" "2"
[4,] "B" "0"
[5,] "C" "0"
[6,] "C" "1"
[7,] "A" "0"
[8,] "B" "0"
[9,] "A" "0"
[10,] "C" "0" 
```

我需要从 x 生成列 y。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-15T21:20:39.217

使用`rle`和的组合`sequence`：

```
> sequence(rle(x)$lengths)-1
 [1] 0 1 2 0 0 1 0 0 0 0 
```

# java - 使用自定义 JOptionPane 按钮？int 延迟错误？

> ID：12904181
> 
> 赞同：4
> 
> 时间：2012-10-15T21:19:00.677
> 
> 标签：java, swing, joptionpane

如果这听起来像一个愚蠢的问题，我很抱歉，但我到处搜索 JOptionPane 中的自定义按钮。我遇到了如何实现特殊按钮，但我似乎无法在我的程序中使用它。

```
 int choice;
    Object[] doors = { "Door 1", "Door 2", "Door 3" };

    JFrame frame = new JFrame();

    input = "Which door do you choose?";
    choice = JOptionPane.showOptionDialog(frame, input, 
             "Doors",
             JOptionPane.DEFAULT_OPTION,
             JOptionPane.QUESTION_MESSAGE,
             null,
             doors,
             doors[2]);

    if (car == 1 && choice.equals(doors[0])) {
        open = 3; option = 2;
    } 
    if (car == 1 && choice.equals(doors[1])) {
        open = 3; option = 1;
    } 
    if (car == 1 && choice.equals(doors[2])) {
        open = 2; option = 1;
    } 
    if (car == 2 && choice.equals(doors[0])) {
        open = 3; option = 2;
    } 
    if (car == 2 && choice.equals(doors[1])) {
        open = 1; option = 3;
    } 
    if (car == 2 && choice.equals(doors[2])) {
        open = 1; option = 2;
    } 
    if (car == 3 && choice.equals(doors[0])) {
        open = 2; option = 3;
    } 
    if (car == 3 && choice.equals(doors[1])) {
        open = 1; option = 3;
    } 
    if (car == 3 && choice.equals(doors[2])) {
        open = 2; option = 1;
    } 
```

注意：这不是我的整个程序，只是有问题的方面

对话框中的选项完美显示，只是有一个错误说“不能尊重 int”。我想我使用了错误的比较，但是我该如何解决呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T21:24:16.643

您看起来正在尝试取消引用 int，您正在尝试在 int 上调用方法，选择，而您无法使用 Java 做到这一点。为什么不在你的门阵列中简单地使用选择？`doors[choice]`?

```
// first check that the JOptionPane wasn't closed by the user
if (choice != JOptionPane.CLOSED_OPTION) {
  String chosenDoor = doors[choice];
} 
```

或者在您测试汽车时使用它作为整数作为整数来测试选择。

# arrays - 如何使 Dart 中的数组（列表）元素唯一？

> ID：12904183
> 
> 赞同：6
> 
> 时间：2012-10-15T21:19:06.623
> 
> 标签：arrays, list, element, unique, dart

我需要从列表中删除**多余**的（字符串）元素。或者，也许从一开始就阻止他们进入是更好的解决方案？套装不允许重复，但它们也不能保持顺序，我需要顺序。这对我来说是一个常见问题，因此我正在寻找一种可能的语言解决方案以提高效率。

（过去我扩展了一个数组类来添加我自己的 add_unique() 方法，但这似乎是一个常见的问题，可以由语言处理，并且可能更有效。）

谢谢，

_G

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2019-08-22T12:38:36.480

使用***toset***然后***toList***

```
 var ids = [1, 4, 4, 4, 5, 6, 6];
 var distinctIds = ids.toSet().toList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T14:48:17.920

您需要一个 LinkedSet 来仅包含唯一性并保持插入顺序，但目前我们在 dart 中没有它。但是，您可以使用 LinkedHashMap 模拟 LinkedSet：

```
var input = ["apple", "orange", "cherries", "pears", "apple", "apple", "orange"];
var uniques = new LinkedHashMap<String, bool>();
for (var s in input) {
  uniques[s] = true;
}
for (var key in uniques.getKeys()) {
  print ("$key");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-10T06:22:29.283

数组对象 DART，在[https://dartpad.dev/4d3a724429bbd605f4682b7da253a16e中测试](https://dartpad.dev/4d3a724429bbd605f4682b7da253a16e)

```
void main() {
      var duplicates = [
        {"b": 1},
        {"b": 2},
        {"b": 1},
        {"b": 2}
      ];

      var resArr = [];
      duplicates.forEach((item) {
        var i = resArr.indexWhere((x) => x["b"] == item["b"]);
        if (i <= -1) {
          resArr.add({"b": item["b"]});
        }
      });
      print(resArr);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T21:39:34.560

今天，这必须手动完成。Dart 不提供保持插入顺序的集合。请注意，Dart 容器库将被修改。请访问 www.dartbug.com 并添加此功能请求。要手动执行此操作，您可以：

1）在添加之前调用 indexOf 。2）维护一个集合和一个列表。Set 可用于保持事物的唯一性，同时 List 保持顺序。

我会推荐1。

约翰

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T23:25:01.977

您可以照常使用该列表，并`cutch`如前所述手动添加您自己的方法来验证重复项和排序，如下所示。

```
import 'dart:html';

var someList = new List<String>();
String newItem = '';

void main() {
  newItem = 'item 3';  
  if(!itemExistsInList(someList, newItem)){
    someList.add(newItem);
    sortList(someList);
  }

  // expected item 3
  print(someList);

  newItem = 'item 1';
  if(!itemExistsInList(someList, newItem)){
    someList.add(newItem);
    sortList(someList);
  }

// expected item 1, item 3
  print(someList);

  newItem = 'item 3';
  if(!itemExistsInList(someList, newItem)){
    someList.add(newItem);
    sortList(someList);
  }

// expected item 1, item 3\. Same as previous as secondary item 3 was not added
  print(someList);
}

// returns true if the specified item already exists in the specified list
// otherwise false
bool itemExistsInList(List<String> list, String item){
  return list.some((v) => v.indexOf(item) != -1);
}

// sorts the list
void sortList(List<String> list){
  list.sort((a, b) => a.compareTo(b));
} 
```

不需要`sortList()`每次添加时都调用该函数，我这样做只是为了演示。只有在您真正需要时才调用它就足够了。

`.sort()`，`.some()`并在[**DART 库文档**](http://www.dartlang.org/docs/library-tour/#collections)`.indexOf`的集合部分中进行了更详细的说明[](http://www.dartlang.org/docs/library-tour/#collections)

 *** * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-09T05:10:27.507

```
**Several packages exist that expand on default the Iterable utility methods, such as flinq or darq. They add a distinct method you can call to easily get a list of unique members of a list based on some property of the members.**

import 'package:darq/darq.dart';

void main() {
  var list = [
    Data('a'),
    Data('a'),
    Data('b'),
    Data('c'),
  ];
  var distinct = list.distinct((d) => d.id).toList();
} 
```**

# scheme - 从 Scheme 表达式返回的数据类型

> ID：12904185
> 
> 赞同：1
> 
> 时间：2012-10-15T21:19:18.263
> 
> 标签：scheme

如果您为我解释这个问题，我将不胜感激。我一直在思考它很长一段时间，但无法弄清楚。我是一名自学者，这是来自 MIT's icampustutor 网站的练习。

指出以下每个过程的类型。使用符号“->”表示“映射到”，例如，过程 square 的类型为“number->number”。使用以下术语来描述数据的原始类型：数字、布尔值、字符串。

1- (define (test bar n) (if (bar n) n (test bar (+ n 2))))

2- (define (test foo bar n) (if (bar n) #t (test foo bar (+ n (foo n)))))

3- (define (test foo bar n) (if (bar n) (+ 1 (foo n)) (test foo bar (+ n 3))))

4- (lambda (ab) (+ a (如果 b 1 0)))

5- (λ (x) (λ (y) (+ xy)))

6- (lambda (xy comp) (if (comp xy) (+ x 1) (+ y 1)))

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:53:49.453

您的前三个表达式将 lambdas 绑定到符号“test”。问题是要求您从函数的使用方式以及该函数的结果如何使用来推断 foo 和 bar 的类型。这就是我从阅读该代码中得到的：

1.  (n->bn)->n

    也就是说test有两个参数，第一个是lambda，它接受一个数字并返回一个布尔值，第二个是一个数字，函数的结果是一个数字

2.  (n->n n->bn) -> b

3.  (n->n n->bn) -> n

同样对于 4,5,6，当然，除了表达式的结果是 lambda 本身，并且没有绑定到任何东西。

1.  (nb) -> n

2.  n-> (n->n)

    也就是说，这个lamba的结果是另一个lambda，它接受一个数字并返回一个数字。

3.  (nn (nn)->b) -> n

    取两个数字和一个 lambda，它取两个数字并返回一个布尔值

# ruby - Ruby - 一个代码块有效，一个给出错误？

> ID：12904193
> 
> 赞同：0
> 
> 时间：2012-10-15T21:20:07.167
> 
> 标签：ruby

此代码工作正常： -

```
def rps_tournament_winner(tournament)
    if tournament[0][0].kind_of?(String)
       puts game_winner tournament
    else 
      for i in 0..tournament.length-1
        rps_tournament_winner tournament[i]
      end
    end
end 
```

但是这段代码给了我以下错误语法错误，意外的 tIDENTIFIER，期望 kDO 或 '{' 或 '('

```
def rps_tournament_winner(tournament)
  array = []
    if tournament[0][0].kind_of?(String)
       array << game_winner tournament
    else 
      for i in 0..tournament.length-1
        rps_tournament_winner tournament[i]
      end
    end
end 
```

有人可以解释为什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:23:15.187

这是一个解析问题。使用括号来说明：

```
array << game_winner(tournament) 
```

# c - C中的高效位掩码代码

> ID：12904194
> 
> 赞同：2
> 
> 时间：2012-10-15T21:20:08.430
> 
> 标签：c, assembly, bit-manipulation, performance

由于 C 的按位运算符`&`、`|`和`~`通常也是汇编语言操作码，因此位掩码代码原则上应该非常快。

对于如何在模拟算法的内部循环中添加位掩码，我有一些选择。从本质上讲，它归结为使用一组预先封装好的掩码或使用左移和右移动态更改掩码之间的选择。

是否有特殊的技巧/技术可以使位掩码尽可能避免不必要的开销？从效率的角度来看，以下三种方法中的任何一种是否特别好/坏？

*   选项 1：循环通过预先封装的掩码数组，例如挑选特定位

    ```
    unsigned char mask[8]={0x80,0x40,0x20,0x10,0x8,0x4,0x2,0x1};
    for(i=0;i<8;i++) {
        ...
        (mask[i] & mem_data )
        ... 
    ```

    }

*   选项 2：在每次循环迭代中向下移动多个位置

    ```
    unsigned char mask=0x80;
    for(i=0;i<8;i++) {
         ...
         mem_data & (mask>>i)
         ...
    } 
    ```

*   选项 3：在每次循环迭代中精确地向下移动一个位置

    ```
    unsigned char mask=0x80;
    while(mask) {
          ...
          mem_data & mask
          mask>>=1;
          ...
    } 
    ```

**编辑：** *从示例中删除了 putchar() 所以它不会分散问题的注意力*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T21:27:22.500

位掩码常用于嵌入式世界。

并非所有处理器都可以使用变量参数进行按位移位。例如，在 MSP430 处理器上，您一次只能位移一位。该实施将求助于软件以可变数量进行转移。在这种情况下，必须避免选择 2。更一般地查看程序的汇编输出以比较最有效的解决方案。

# ruby-on-rails-3 - 为 user_id 分配 http 基本授权

> ID：12904199
> 
> 赞同：0
> 
> 时间：2012-10-15T21:20:29.493
> 
> 标签：ruby-on-rails-3

我现在在我的 API 中切换到 http 基本授权以使测试更容易，但现在我无法获得 user_id ......这是我的 ThingController 中与设计一起使用的代码：

```
 def create
    @thing = Thing.new(params[:thing])
    @thing.user_id = current_user.id
    @thing.save
    if @thing.save
      redirect_to user_path
    else
      render :new
    end
  end 
```

这现在给了我以下错误：

> 为 nil 调用 id，它会错误地为 4 - 如果你真的想要 nil 的 id，请使用 object_id

它引用了这条线

```
@thing.user_id = current_user.id 
```

我不确定如何在创建时将 user_id 分配给我的事物。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T14:11:34.143

你似乎没有得到答案。我遇到了同样的问题。我发现这个 wiki 使用 [https://github.com/plataformatec/devise/wiki/How-To:-Redirect-back-to-current-page-after-sign-in,-sign-out,-sign-up ,-更新](https://github.com/plataformatec/devise/wiki/How-To%3a-Redirect-back-to-current-page-after-sign-in,-sign-out,-sign-up,-update)
您在以下方法中声明登录名的位置

```
 def after_sign_in_path_for(resource)    
    some_class_url(session[:some_class_id])
  end 
```

这使您可以针对目标操作执行所需的操作

# actionscript-3 - 大小为 -1 的向量在没有错误处理的情况下使 Flash 播放器崩溃

> ID：12904201
> 
> 赞同：2
> 
> 时间：2012-10-15T21:20:35.020
> 
> 标签：actionscript-3, flash, vector, crash, runtime-error

我今天在 Flash player 11 中发现了一个有趣的错误。它也可能在其他版本中。如果您启用了调试跟踪，我可以立即使用一行代码使 Flash 播放器浏览器崩溃，不会引发运行时错误，并且只显示一条消息：“错误：内存不足”。

构造一个大小为 -1 的向量。

```
var vector:Vector.<int> = new Vector.<int>(-1); 
```

噗，你的整个应用程序都放弃了。数组至少会引发“超出范围”的运行时错误。这怎么不抓？由于未处理，它会导致漏洞利用吗？

还有人经历过这个吗？我在版本 11.4.31.110 和 11.2.202.235 中对其进行了测试

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T21:27:05.907

可能是因为构造函数需要一个无符号整数（只有正数）。

将 -1 转换为无符号整数会产生 4,294,967,295，这将使内存不足错误更有意义。提交错误报告可能有意义。否则，不要那样做:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T21:29:26.263

如何分配负内存？

[Vector.<T>() 构造函数](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Vector.html#Vector%28%29)需要一个 unsigned int 和 boolean 作为参数：

```
public function Vector(length:uint = 0, fixed:Boolean = false) 
```

> *   length:uint (default = 0) — Vector 的初始长度（元素数）。如果此参数大于零，则创建指定数量的 Vector 元素并使用适合基本类型的默认值填充（引用类型为 null）。
> *   fixed:Boolean (default = false) — Vector 的长度是固定的 (true) 还是可以更改的 (false)。也可以使用固定属性设置此值。

同样，访问 Vector 的`length`属性也是`uint`.

从 0 中减去 1 会导致[整数溢出](http://en.wikipedia.org/wiki/Integer_overflow)，这很可能是您的错误。

如果您尝试通过初始化为 -1 以编程方式派生状态，则应将向量设置为`null`。

# windows-7 - 使用户 dir 成为另一个驱动器的符号链接

> ID：12904206
> 
> 赞同：0
> 
> 时间：2012-10-15T21:20:53.920
> 
> 标签：windows-7, windows-7-x64

我正在用全新安装的win7构建一个全新的盒子

我在sdd上安装windows，其余的在raid上

我想将 c:\users 移动到团队中。

是否有人将 c:\users 设为另一个驱动器的符号链接。

我认为这将是最干净的方式。

不知道怎么做，因为我确信目录可能会被锁定

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:54:27.207

找到了

[http://lifehacker.com/5467758/move-the-users-directory-in-windows-7](http://lifehacker.com/5467758/move-the-users-directory-in-windows-7)

# c# - COM 集成

> ID：12904209
> 
> 赞同：0
> 
> 时间：2012-10-15T21:21:19.393
> 
> 标签：c#, com, visual-foxpro

我有一个用 C# 开发的 COM 对象，它将在 VFP 中使用。该对象可以由开发系统上的 vfp 项目加载，方法是将 c# dll 复制到 vfp 项目的主目录中，并注册它。我正在运行安装的 vfp 项目，而不是在 vfp 环境中。换句话说，我的开发系统上没有打开vfp，但是vs2010是..但是，dll项目显然没有运行。

当我移动到既没有 vfp 也没有 vs 的测试机器上，放入 dll，注册它，然后尝试运行，没有任何反应。不幸的是，vfp 中没有生成错误，我无法更改 vfp 代码。

在 COM 对象在系统上运行之前，我是否需要做一些技巧，或者 VS 可能对开发系统上的 dll 进行某种类型的注册？

感谢您提供任何帮助。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:30:27.040

这很可能是您缺少依赖项。您可以从 jscript 创建和使用对象吗？您可以在 cmd.exe 控制台中创建一个文本文件并直接在大多数版本的 windows 上运行它（使用 .js 文件扩展名保存此文本文件）；

```
var x = new ActiveXObject("YourProject.YourCOMServerName");
x.YourSimpleMethod();

WScript.Echo("done"); 
```

这将从等式中删除 VFP 并查看您的 COM DLL 是否会加载，并可能为您提供下一步查看的线索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T21:30:56.527

我也有类似的情况。我必须注册我的 COM 服务器（作为管理员）：

```
$cd <directory containing COM server>
$com.exe /regserver 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T14:13:36.210

愚蠢的问题，但测试机器上是否安装了正确的 .net 框架？可能根本与VFP无关。

可能还值得一看[http://msdn.microsoft.com/en-us/library/aa645738%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa645738%28v=vs.71%29.aspx)和[用 C# 创建 COM 自动化服务器](https://stackoverflow.com/questions/1756541/creating-a-com-automation-server-in-c-sharp)

# rss - 创建与 Flipboard 兼容的 RSS 源

> ID：12904212
> 
> 赞同：4
> 
> 时间：2012-10-15T21:21:24.170
> 
> 标签：rss, rss-reader, flipboard

有没有人设法做到这一点？

我尝试过使用.Net `SyndicationFeed`，并且尝试过最简单的静态页面。我已经阅读了关于 Flipboard 正在寻找什么的各种指南，我什至尝试了那些已发布的示例。

提要是有效的，但如果我在 Flipboard 中输入完整的 URL，它会读取提要标题并允许我添加它，但在所有情况下它都不会显示任何帖子。只是一个空的饲料。

当然，Wordpress.com 似乎工作得很好，我已经尝试从中复制输出。我开始怀疑flipboard是否需要谷歌搜索的内容或其他内容。我的内容正在开发中，所以当然没有列出 SEO，但我已经制作了一些可公开寻址的提要，但没有产生更大的影响。

这是我尝试过的最简单、有效的静态提要的示例；

```
<rss xmlns:a10="http://www.w3.org/2005/Atom" version="2.0">
  <channel>
    <title>Sample feed</title>
    <link>http://localhost:2089/rss</link>
    <description>sample description</description>
    <language>en-US</language>
    <copyright>(C) 2012</copyright>
    <item>
      <link>http://localhost:2089/rss?id=1</link>
      <title>title 1</title>
      <description><![CDATA[
        <html><body>helo world</body></html>
      ]]></description>
    </item>
  </channel>
</rss> 
```

在各种测试中使用防火墙日志我已经确认 Flipboard 没有在寻找除此（和其他示例）XML 之外的任何其他资源，但我不知道它是否会在它之前在网络上的其他地方寻找东西下载内容。

有谁知道 Flipboard 兼容的 RSS 提要或协议的关键部分？

[更新]

查看防火墙日志，Flipboard 似乎没有直接连接到资源 URL，而是通过 443 连接到 AWS，推测这些是 Flipboard 服务器，并且请求来自它们的浏览器代理。它会读取我的提要，但当 Flipboard 返回它时，它是空白的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T07:55:47.250

Flipboard[有一个页面](https://flipboard.com/rss/)，其中详细说明了他们需要什么才能使您的 RSS 提要在他们的应用程序中看起来不错。

我确实相信出于性能原因，Flipboard 从其服务器而不是直接从应用程序轮询提要，这解释了为什么您会在日志中看到 AWS IP。

# java - 我在尝试将对象项与带有数组的对象进行比较时遇到问题

> ID：12904216
> 
> 赞同：0
> 
> 时间：2012-10-15T21:21:40.163
> 
> 标签：java, object, compare

我想要做的是对象（假设对象是长类型）是否大于带有数组的对象。

带有`if( item > queArray[j]) )`点错误的行说`The operator > is undefined for argument type(s) T, T`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T21:23:11.850

该对象的类型未知`long`。所知道的只是它属于某种特定类型`T`。

将对象强制转换为 a `Long`，或者更一般地，使用该`Comparable.compareTo`方法来比较已知可比较的对象。

# c++ - 将 unsigned char* 缓冲区分配给字符串

> ID：12904221
> 
> 赞同：0
> 
> 时间：2012-10-15T21:22:01.713
> 
> 标签：c++, string, memory, char, memory-leaks

以前可能会问过这个问题，但我找不到我需要的确切内容。

我的问题是，我有一个从 web 服务下载的数据加载的缓冲区。缓冲区采用 unsigned char* 形式，最后没有 '\0'。然后我有一个 poco xml 解析器需要一个字符串。

我尝试将它分配给字符串 valgrind 发现一些丢失的数据。（见下文）

这是代码：

```
DOMParser::DOMParser(unsigned char* consatData, int consatDataSize,
    unsigned char* lagData, int lagDataSize) {

Poco::XML::DOMParser parser;
std::string consat;
consat.assign((const char*) consatData, consatDataSize);
pDoc = parser.parseString(consat);
ParseConsat();
} 
```

Poco xml 解析器确实有一个 ParseMemory ，它需要一个 const char* 和数据大小，但由于某种原因，它只是给了我分段错误。

更新：这是 valgrind 结果的一部分：

```
==11880== 12,272 bytes in 1 blocks are possibly lost in loss record 1,126 of 1,143
==11880==    at 0x402569A: operator new(unsigned int) (vg_replace_malloc.c:255)
==11880==    by 0x4491D05: std::string::_Rep::_S_create(unsigned int, unsigned int, std::allocator<char> const&) (in /usr/lib/libstdc+$
==11880==    by 0x4493F6F: std::string::_M_mutate(unsigned int, unsigned int, unsigned int) (in /usr/lib/libstdc++.so.6.0.13)
==11880==    by 0x4494109: std::string::_M_replace_safe(unsigned int, unsigned int, char const*, unsigned int) (in /usr/lib/libstdc++.$
==11880==    by 0x44941AD: std::string::assign(char const*, unsigned int) (in /usr/lib/libstdc++.so.6.0.13)
==11880==    by 0x804DE03: DOMParser::DOMParser(unsigned char*, int, unsigned char*, int) (DOMParser.cpp:27) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:51:52.123

> 我的问题是如何获取非空终止为字符串的数据

使用适当的`std::string`构造函数，如下所示：

```
std::string( (const char*) consatData, consatDataSize); 
```

几乎等效地，使用以下`.assign()`方法：

```
std::string consat;
consat.assign((const char*) consatData, consatDataSize); 
```

> 我意识到这会导致泄漏等问题。

你意识到错误。字符串数据被复制到字符串中。没有泄漏。

^(注意：有人可能会说，“*不要使用 C 风格的演员表！* ”他们可能是对的。您可能应该`reinterpret_cast<const char*>(consatData)`改用。我保留了 C 风格的转换，因为它们可以工作，并且因为您的原始代码使用它。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T21:33:49.553

这里有两个问题：首先，您的缓冲区不是以空值结尾的。第二，它的`unsigned char`而不是标准的`char`。

指向的内存`consatData`来自哪里？您是在从 Web 服务读取数据之前分配它，还是由 Web 服务分配它？另外，是`consatDataSize`缓冲区的大小，还是 Web 服务读取的字节数？

看看您是否可以分配缓冲区，以便您有空间在最后自己添加空终止符。如果您控制缓冲区的大小（也就是说，如果您自己分配它并且只要求 web 服务写入它），那么只需分配一个额外的字节并在 web 服务告诉您它有多少字节时向其写入 null书面。否则，我无法想象一个服务不会终止它自己的字符缓冲区......也许你没有给它足够的存储空间？

然后，要将其转换为字符串，请[遵循此 StackOverflow 线程](https://stackoverflow.com/questions/804123/const-unsigned-char-to-stdstring)。至少有两种建议的解决方案：创建一个`std::string`包含无符号字符（这可能会导致兼容性问题），或者将您的无符号字符转换为有符号字符并创建一个普通的 jane `std::string`。

# c - 检查 argc 的值

> ID：12904222
> 
> 赞同：-5
> 
> 时间：2012-10-15T21:22:05.700
> 
> 标签：c, argc

我对传递给程序的 argc 数量有疑问，
所以当我检查 argc 时它不等于 2 ！！
需要帮助，我该如何解决这个问题？

C 代码片段：

```
if (2 != argc) {
    fprintf(stderr, "Usage: %s <port>\n", argv[0]);
    exit(1);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T21:23:17.943

不要忘记程序名称本身也算作 arg。

`myProgram -flag variable`是`argc`一个`3`

# unit-testing - 无论我是否抛出异常，JUnit 测试都通过

> ID：12904224
> 
> 赞同：2
> 
> 时间：2012-10-15T21:22:15.557
> 
> 标签：unit-testing, testing, exception-handling, junit

我刚刚开始学习 JUnit。我试着在别处寻找这个答案，但我找不到。假设我编写了一个预期异常的 JUnit 测试方法，如下所示：（数学是我编写的类的一个实例）

```
 @Test(expected = NumberFormatException.class)
    public void testAdd_String() {
        System.out.println("testing add number to string");
        double result = math.add("lakd", "2");
    } 
```

现在对于我想测试的方法：

```
public double add(String operand1, String operand2) {
    int num1 = Integer.parseInt(operand1);
    int num2 = Integer.parseInt(operand2);
    return num1 + num2;
} 
```

当我`throws NumberFormatException`在方法头上有和它不存在时，我的测试都通过了。这是预期的行为还是 JUnit？有没有办法通过 JUnit 测试来确保 throws 子句存在于我的方法中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T01:20:27.963

添加`throws`到方法声明中只是一个警告标签，说“看，我可以随时抛出这个异常！你最好做好准备。” `throw`只有在使用语句或调用的方法使用语句时才会真正引发异常`throw`。

[`NumberFormatException`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/NumberFormatException.html)是*运行时异常*或*未经检查的异常*（的子类`RuntimeException`），因此它永远不需要在使用`throws`. 您仍然可以在 try/catch 块中捕获它，但与*检查*的异常（例如`FileNotFoundException`，它是 的子类`Exception`）不同，您不需要在方法上声明它以便抛出它。

您不需要测试一个方法是否有一个可以抛出的已检查异常——只需要测试它是否真的抛出了异常。实际上，正如您已经拥有的那样，`expected`参数 of`@Test`意味着如果您的方法停止*抛出*a `NumberFormatException`，则测试将失败，例如如果您将行更改为：

```
double result = math.add("1", "2"); 
```

如果您觉得异常是“预期的”，以至于使用您的方法的人必须有一个 try/catch 块围绕它，您应该创建自己的子类 --`Exception`但请注意，这可能会使您的方法更难以干净地使用.

# css - 为什么 em font-size 不在响应式网格上调整大小？

> ID：12904233
> 
> 赞同：8
> 
> 时间：2012-10-15T21:23:00.273
> 
> 标签：css, responsive-design, font-size, em

我创建了一个响应式网格并使用 em 作为字体大小来调整文本大小，但我不能完全理解 em 的工作原理，因为没有调整文本大小。

现场直播： [http ://www.rubytuesdaycreative.co.uk/testsite/shop.html](http://www.rubytuesdaycreative.co.uk/testsite/shop.html)

在 Ethan Marcottes 的书之后，我将正文字体设置为`font-size:100%`，然后由上面链接页面上的 cpation 中的文本制作为 2ems - 所以基本尺寸加倍......我做错了吗？它似乎根本没有改变。

[http://jsfiddle.net/jm3sK/](http://jsfiddle.net/jm3sK/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-16T11:49:33.787

我认为您正在寻找的是`@media`查询。`Em`不是一个会根据浏览器宽度调整大小的魔法子弹单元。它是一个相对单位。

如果您希望根据浏览器宽度更改任何 CSS，请使用[`@media`queries](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)。

`em`s 在这种情况下很有用，因为您只需更改一个值 ( `body{font-size}`) 即可缩放页面的所有其余部分。因为它们是相对的，而不是因为浏览器改变了。您可以一起使用这些技术。

这是一个简单的[例子](http://jsfiddle.net/b4FKY/)。调整窗口大小。

```
body{font-size:100%;}
i{font-size: 2em;}

@media screen and (min-width: 500px) {
    body{font-size: 150%;}
}

@media screen and (min-width: 700px) {
    body{font-size: 200%;}
} 
```

​</p>

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T22:05:36.213

单位是指字体的`em`大小。它根本不依赖于浏览器窗口的宽度。

[`vw`单位](https://developer.mozilla.org/en-US/docs/CSS/length)与窗口宽度有关：即视口宽度的 1/100 。但它在浏览器中的支持有限且有缺陷。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-29T11:06:57.030

虽然这是一个老问题，但我最近想出了一个解决方案。

如果将正文中的所有文本定义为百分比，然后在 document.ready 和 window.resize 上调整正文中的文本大小，则文本保持 100% 响应。

例如

```
CSS
font-size: 100%;

JavaScript
function fontResize(){
    var perc = parseInt($(window).width())/125;
    $('body').css('font-size',perc);
}

JQuery
$(document).ready(function (){
    fontResize();
});

$(window).resize(function () {
    fontResize();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-23T08:47:41.090

我认为该表非常清楚，并且很好地说明了字体无法随窗口调整大小而缩放的原因。原因是 ems、percentage 甚至 rems 都是相对于浏览器默认字体（通常是 16px）而不是浏览器窗口的度量。所以如果你写“font-size: 100%;” 就像写“字体大小：16px;” 而不是“字体大小：窗口大小的 100%”。如果你写“字体大小：200%;” 就像“字体大小：32px;” ETC...

要创建一个带有随窗口大小调整而不断缩放的字体的布局，我认为您可以使用 jquery。也许“$（window）.resize”和“.css（'font-size'，'value'）”的混合可以工作......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-10T13:56:04.813

在最近自己研究这个问题以进行响应式设计时......我遇到了这张很棒的桌子：[http ://www.hubbers.com/index.php/converting-px-into-percentage-and-em-for-relative-css -字体大小/](http://www.hubbers.com/index.php/converting-px-into-percentage-and-em-for-relative-css-font-sizes/)

它分解了表格中的像素、em 和百分比之间的转换，但更好的是，它提供了将这些从一个转换为另一个的简单公式，这对我来说非常有用，因为我正在动态确定字体大小

我同样认为，当窗口调整大小时，使字体大小百分比会迫使它们像其他元素一样重新调整大小......但这不起作用（尽管我认为应该这样做）。最后，我最终使用了 Bookcasey 所述的媒体查询以及上述公式将百分比转换回 em。

# jquery - jQuery取消绑定然后绑定

> ID：12904236
> 
> 赞同：3
> 
> 时间：2012-10-15T21:23:06.777
> 
> 标签：jquery, click, bind, unbind

我正在从这些可点击的 div 中取消绑定点击，然后想要再次启用点击。我所拥有的不起作用。有什么建议么？谢谢。

```
 $('#a, #b, #c').on('click', function(e){
        $('#a, #b, #c').unbind('click');
        // some stuff
        // bind again: 
        // this doesn't work: $('#a, #b, #c').bind('click');
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T21:29:59.440

当您尝试重新绑定时，您缺少处理程序函数`// this doesn't work: $('#a, #b, #c').bind('click');`。您需要的是如下所示，

```
$('#a, #b, #c').bind('click', clickHandlerA);

function clickHandlerA() {
   $('#a, #b, #c').unbind('click');
   // some stuff
   // bind again: 
   // this should work: 
   $('#a, #b, #c').bind('click', clickHandlerA);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T21:25:45.877

要“解除绑定”你需要使用“.off” [http://api.jquery.com/off/](http://api.jquery.com/off/)

```
$('#a, #b, #c').on('click', function(e){
    $('#a, #b, #c').off('click');
    // some stuff
    // bind again: 
    // this doesn't work: $('#a, #b, #c').bind('click');
} 
```

# javascript - 将参数从 javascript 传递给控制器

> ID：12904239
> 
> 赞同：2
> 
> 时间：2012-10-15T21:23:14.580
> 
> 标签：javascript, jquery, ruby-on-rails, controller, params

我在视图中有以下 javascript：

```
<script type="text/javascript">
    var pusher = new Pusher('<%= Pusher.key %>'); // Replace with your app key
    var channel = pusher.subscribe('choices');

    channel.bind('created', function(data) {
        var after = $('.ticket:last').attr('data-time');
        $("#tickets").append("<%=raw escape_javascript(render(@tickets, :after => " + after + ")) %>");
    });
</script> 
```

我的控制器中有以下内容：

```
@tickets  = Choice.where("choices.created_at > ?", Time.at(params[:after].to_i + 1).utc) 
```

我正在寻找一种将**after**参数从 javascript 传递到控制器的方法，例如它只返回 created_at 高于现在显示的最后一个选项的选项。

我猜这条线没有做这项工作，所以对此有一点帮助会非常有用:)

```
$("#tickets").append("<%=raw escape_javascript(render(@tickets, :after => " + after + ")) %>"); 
```

**编辑：**

我现在有以下内容，这似乎修复了将**after**变量传递给控制器​​的问题。我检查了 Firebug，可以看到响应包含最新 BET 上的数据。但视图仍然是错误的。它不会将最新的投注附加到 DIV，而是显示所有过去的投注两次，而根本没有新的投注。任何人？:)

查看文件：

```
<script type="text/javascript">
    var pusher = new Pusher('<%= Pusher.key %>'); // Replace with your app key
    var channel = pusher.subscribe('choices');

    channel.bind('created', function(data) {
        var after = $('.ticket:last').attr('data-time');

        var settings = { after: after}
        $.ajax({
            url: '/Home/Index',
            type: 'POST',
            dataType: 'json',
            data: settings,
            cache: true,
            success: function (data) {
                $("#tickets").append("<%=raw escape_javascript(render(@tickets)) %>");
                }
          });
        }
    );
</script> 
```

路线：

```
post 'Home/Index' => 'home#index' 
```

控制器（索引操作）：

```
@tickets  = Choice.betable(current_user).where("choices.created_at > ?", Time.at(params[:after].to_i + 1).utc)

respond_to do |format|
  format.json { render :json => @tickets }
  format.html
end 
```

解决方案：

经过大量试验和错误后，我最终使用了一个解决方案，在控制器中呈现 HTML，而不是在视图中的 javescript 代码中呈现。这样我就可以访问我需要的参数。

```
respond_to do |format|
  format.html      
  format.json do
    @html = render_to_string( :partial => '/choices/choice.html.erb', :locals => { :choice => @tickets} )
    render :json => { :success => true, :html => @html }
  end
end 
```

感谢 Chazt3n 的扩展帮助 :) 真的很高兴..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:27:54.090

我相信你可以通过 AJAX 发送它

```
Function sendAfter((string?) after){
 var settings = { after: after}
 $.ajax({
        url: '/Controller/Action',
        type: 'POST',
        dataType: 'json',
        data: settings,
        cache: true,
        success: function (data) {}
      });
} 
```

这将至少将您的数据传递给控制器​​只需调用该函数并将您的参数发送到您想要的任何地方

# linux - 在 Linux 上分发软件？

> ID：12904242
> 
> 赞同：5
> 
> 时间：2012-10-15T21:23:22.647
> 
> 标签：linux

我一直在通过压缩一个 .py 文件和一个带有图标的 .png 在 Linux 上分发我的 Python 软件。我觉得这一定是最糟糕的方法之一。是否有一种适用于 Linux 的“应用程序包”，相当于 Mac 上的 .app 和 Windows 上的 .exe？用户可以将单个文件放在某处并双击以在没有终端的情况下运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T21:43:11.910

感谢 sputnik 的评论：[A Small Introduction to Python Eggs](http://mrtopf.de/blog/en/a-small-introduction-to-python-eggs/)。

# delphi - 如何从 TfrxReport.OnClickObject 获取原始备忘录文本

> ID：12904248
> 
> 赞同：1
> 
> 时间：2012-10-15T21:23:50.070
> 
> 标签：delphi, onclick, fastreport

我有一个 FR4 报告，我想进行交互。报告建立在数据集中的数据之上。在设计器中，我将**[Q."NAME"]**之类的表达式放入备忘录对象中，它们在构建报告时成为数据集中的值。

我知道有一个**TfrxReport.OnClickObject**事件。但是从这个事件处理程序中，我只能获得一个备忘录文本。

所以，我的问题是如何从**TfrxReport.OnClickObject**事件处理程序中获取原始表达式（我的例子中的**[Q."NAME"] ）。**

# ios - iOS FB-sdk 3.1 - 使用不同的用户名登录

> ID：12904249
> 
> 赞同：1
> 
> 时间：2012-10-15T21:23:54.160
> 
> 标签：ios, sdk, facebook-login

我在 FB 上将测试用户添加到我的 FB 应用程序，现在我想使用测试用户的凭据从我的 iPHone 应用程序登录到 FB。但是我已经使用了自己的用户名，现在 FB 只显示«允许权限»屏幕并且总是跳过登录屏幕。

如何告诉我的应用忘记以前的登录并使用新凭据？

[编辑]

这是在模拟器上，而不是实际设备...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T21:36:15.560

在模拟器上，转到设置 -> Safari -> 清除 cookie 和数据。

这是有效的，因为在模拟器上您无法安装 fb 应用程序，因此始终通过移动 safari 执行单点登录（当 fb 未通过 ios6 配置时，听起来它不是基于您描述的行为）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T21:36:54.227

针对您的情况的快速解决方案：iOS 模拟器-> 重置内容和设置：这将清除模拟器上的 FB 令牌。

# java - Jackson XML 为容器类型全局设置元素名称

> ID：12904250
> 
> 赞同：4
> 
> 时间：2012-10-15T21:24:01.330
> 
> 标签：java, xml, xml-serialization, jackson

我将 Jackson 1.9.2 与[XML 数据格式模块](https://github.com/FasterXML/jackson-dataformat-xml)一起使用。我需要调整 Jackson 序列化数组、列表、集合的方式。

默认情况下，使用`myProperty`包含几个数字的 int 数组属性，Jackson / XML 生成以下内容：

```
<myProperty>
  <myProperty>1</myProperty>
  <myProperty>2</myProperty>
</myProperty> 
```

我需要生产的是：

```
<myProperty>
  <item>1</item>
  <item>2</item>
</myProperty> 
```

我可以使用以下组合在每个 POJO 的基础上执行此`JacksonXmlElementWrapper`操作`JacksonXmlProperty`：

```
@JacksonXmlElementWrapper(localname='myProperty')
@JacksonXmlProperty(localname='item')
public int[] myProperty; 
```

但是，此解决方案需要我手动将这些注释应用于我的 POJO 中的每个数组、列表、集合。一个更好的解决方案将允许我在全局范围内为所有数组、列表、集合类型应用一个解决方案。关于如何实施这种解决方案的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:28:57.353

您可以继承 XML 模块提供的子类`AnnotationIntrospector`，并覆盖检查的方法`@JacksonXmlElementWrapper`，并使其返回您想要的任何包装器名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T03:50:34.090

我最终创建了自己`JsonGenerator`的 XML 来为我的团队需要支持的旧格式生成 XML。

我本来希望使用 Jackson XML 数据格式模块，它提供更高的安全性、更多的测试，并且可能更快。不幸的是，我无法使用 StaxMan 的建议找到解决方案。

# bison - 如何使用 Flex 和 Bison 处理单独的编译？

> ID：12904252
> 
> 赞同：0
> 
> 时间：2012-10-15T21:24:14.363
> 
> 标签：bison, flex-lexer

有没有一种标准的方法来实现使用 Flex 和 Bison 对导入的模块进行单独编译？就我而言，当解析器在导入声明中遇到标识符时，它需要以某种方式推送当前状态并开始编译导入的模块，然后弹出状态并继续编译先前推送的模块。有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:59:22.350

您需要构建一个可重入解析器和扫描器。

Bison 有一些实验性的支持，可以用它的“纯”api 来做这件事——你把它放在`%define api.pure`.y 文件的顶部。同样，flex`%option reentrant`在它的第一部分有一个你可以用来构建一个可重入扫描器的。有关更多详细信息，请参阅[bison 文档](http://www.gnu.org/software/bison/manual/html_node/Pure-Decl.html#Pure-Decl)和[flex 文档](http://westes.github.io/flex/manual/Reentrant.html)。

# javascript - 替换特殊字符后的所有文本

> ID：12904255
> 
> 赞同：1
> 
> 时间：2012-10-15T21:24:26.200
> 
> 标签：javascript, regex, string, match

例如，我有以下字符串

`http://stackoverflow.com/questions/5518282/regex-to-find-all-text-after-delimited-string?3748374731`

我想尝试使用正则表达式将所有项目放在`?`- 所以我只剩下原始 URL 了吗？

我想用 javascript 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T21:31:18.830

```
var url="http://stackoverflow.com/questions/5518282/regex-to-find-all-text-after-delimited-string?3748374731";
var path=url.split("?")[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T21:28:38.510

试一试：

```
<? $string = 'http://stackoverflow.com/questions/5518282/regex-to-find-all-text-after-delimited-string?3748374731' ;
$string = substr ( $string , 0 , strpos ( $string , '?' ) ) ;
echo $string ;
?> 
```

更新：javascript吧？

几乎一样的事情：

```
var string = 'http://stackoverflow.com/questions/5518282/regex-to-find-all-text-after-delimited-string?3748374731' ;
string = string.substr(0,string.search('?'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T21:33:21.333

就像是...

```
function removeParams(url) {
    return url.substring(0, url.lastIndexOf('?'));
} 
```

会工作。它将 url 的子字符串从 0 到最后一个问号出现并返回它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-15T21:39:49.057

您可以在 ? 并忽略其余的，假设？只发生一次（应该是这样，url中的？应该是url编码的）

```
^[^?]+ 
```

^ 从字符串的开头匹配。[^?] 表示任何不是问号的东西。+ 表示前一个字符类 1 次或多次。

你也可以做

```
var s = "http://stackoverflow.com/questions/5518282/regex-to-find-all-text-after-delimited-string?3748374731";
var rawUrl = s.split("?")[0]; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-15T21:30:06.017

`document.location.origin+document.location.pathname`

# windows-8 - 将动态磁贴重置为默认值

> ID：12904257
> 
> 赞同：1
> 
> 时间：2012-10-15T21:24:58.690
> 
> 标签：windows-8, live-tile

应该是直截了当的，但我还是找不到。如何删除所有实时磁贴更新并从代码恢复为默认磁贴？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T21:49:14.220

使用[TileUpdater.Clear](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.notifications.tileupdater.clear.aspx)。

> 删除所有更新并将磁贴恢复为其在应用程序清单中声明的​​默认内容。

# java - Eclipse 之外的 OSGi 包

> ID：12904260
> 
> 赞同：1
> 
> 时间：2012-10-15T21:25:23.037
> 
> 标签：java, osgi, bundle, apache-felix, apache-karaf

我使用 Eclipse Indigo 使用 OSGi Java 框架开发了一些包。有一个 Main Bundle，它依赖于其他 bundle 并且具有要运行的主程序。`NoClassDefFoundError`如果我尝试在 Eclipse 中运行所有包，一切正常，但如果我将每个包保存为 JAR 并在命令行中启动 OSGi 框架，我在尝试启动主包时遇到异常。找不到的类是依赖项。捆绑包的其余部分获得状态 ACTIVE，主捆绑包刚刚解决。

我已经创建了一个包含我正在使用的所有库（mysql 连接器等...）的包，并且我将这个包导入到我需要这些库的每个包中。我不知道这是否是实现它的最佳方法。另外，我在我的应用程序中使用线程，其中一些使用来自不同包的方法，这可能是问题的根源吗？

有谁知道我能做什么？我还必须在 Apache Karaf 中安装捆绑包，我得到了相同的结果。它与每个捆绑包的起始级别有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:43:23.010

好的，我发现了问题。Eclipse`org.osgi.framework.bootdelegation`默认将参数设置为 *，但所有其他 OSGi 框架都没有。

我现在正在使用 Apache Karaf，我已经将它位于 etc/ 中的 config.properties 从默认值（org.apache.karaf.jaas.boot,sun. *,com.sun.* ,javax.transaction,javax.交易。*) 到 *. 这使它工作，但我仍在尝试识别需要加载的确切库，因为不鼓励将此参数设置为 *。

要查找更多信息：[http ://wiki.osgi.org/wiki/Why_does_Eclipse_find_javax.swing_but_not_Felix%3F](http://wiki.osgi.org/wiki/Why_does_Eclipse_find_javax.swing_but_not_Felix%3F)

谢谢，我希望这对其他人有帮助，

# c++ - 杂志订阅程序的自定义功能

> ID：12904261
> 
> 赞同：0
> 
> 时间：2012-10-15T21:25:31.440
> 
> 标签：c++

我正在做这个编程任务，让我创建一个程序，根据用户输入的月份和年份来处理杂志订阅的续订和取消通知。该程序的一部分侧重于重用旧代码（这是扩展开关的来源）。我使用重用代码而不是显示实际月份创建的函数将月份等同于一个数字（1-12，与每个月相关）。我的问题是我正在尝试制作一个单独的函数来获取数字并将其转换为月份的实际名称。这是我到目前为止所拥有的：

```
#include <iostream>
#include <string>
#include <iomanip>
#include <cstdlib>

using namespace std;

void getMonth(char first, char second, char third, int& monthNumber);
void getYear(int& yearNumber);
void convertMonthNumber(int monthNumber, string& month);

int main()
{
    char first, second, third;
    int monthNumber = 0;
    int yearNumber = 0;
    string month;    

    cout << "Subscription Evaluation Program";
    cout << endl << endl;
    getMonth(first, second, third, monthNumber);
    getYear(yearNumber);
    convertMonthNumber(monthNumber, month);

    cout << "The current date is " << month << " " << yearNumber; //Test to see if  convertMonthNumber works

    system("PAUSE");
}

void getMonth(char first, char second, char third, int& monthNumber)
{  
    cout << "Enter first letter of the current month: ";
    cin >> first;

switch(first)
{
    case 'F':
    case 'f':
        {
             int montNumber = 2;
        }
        break;
    case 'S':
    case 's':
         {
             int monthNumber = 9;
         }
        break;
    case 'O':
    case 'o':
        {
             int monthNumber = 10;
        }
        break;
    case 'N':
    case 'n':
        {
             int monthNumber = 11;
        }     
        break;
    case 'D':
    case 'd':
        {
             int monthNumber = 12;
        }
        break;
    case 'A':
    case 'a':
    {
        cout << "Enter second character of month: ";
        cin >> second;

        switch(second)
        {
            case 'P':
            case 'p':
                {
                     int monthNumber = 4;
                }
                break;
            case 'U':
            case 'u':
                {
                     int monthNumber = 8;
                }
                break;
            default:
                cout << "Unknown Month";
                cout << endl;
          }
    }
break;
case 'J':
case 'j':
{
    cout << "Enter second character of month : ";
    cin >> second;
    switch(second)
    {
        case 'A':
        case 'a':
            {
                 int monthNumber = 1;
            }
            break;
        case 'U':
        case 'u':
            cout<<"\nEnter third character: ";
            cin >> third;
            switch(third)
            {
                case 'L':
                case 'l':
                    {
                         int monthNumber = 7;
                    }    
                    break;
                case 'N':
                case 'n':
                    {
                         int monthNumber = 6;
                    }
                    break;
                default:
                    cout << "\nUnknown Month";
            }
            break;
        default:
            cout << "\nUnknown Month";
            cout << endl;
    }
    break;
    case 'M':
    case 'm':
        cout << "Enter second and third characters: ";
        cin >> second;
        cin >> third;
        switch(second)
        {
            case 'A':
            case 'a':
                {
                    switch(third)
                    {
                        case 'R':
                        case 'r':
                            {
                                 int monthNumber = 3;
                            }     
                            break;
                        case 'Y':
                        case 'y':
                            {
                                 int monthNumber = 5;
                            }    
                            break;
                        default:
                            cout << endl << "Unknown Month";
                            cout << endl;
                    }
                }
                break;
            default:
                cout << endl << "Unknown Month";
                cout << endl;
        }
    break;
    default:
        cout << endl << "Unknown Month";
        cout << endl;
        return;
    }
} 
```

}

```
void getYear(int& yearNumber)
{
    const int LOW_YEAR_LIMIT = 2012;
    const int HIGH_YEAR_LIMIT = 2017;

    do{
    cout << "Enter current year (4 digits): ";
    cin >> yearNumber;
    if (yearNumber < LOW_YEAR_LIMIT || yearNumber >= HIGH_YEAR_LIMIT){
        cout << endl;
        cout << "Invalid year. Please enter again.";
        cout << endl << endl;
        }
    }while (yearNumber < LOW_YEAR_LIMIT || yearNumber >= HIGH_YEAR_LIMIT);
    return;
}

void convertMonthNumber(int monthNumber, string& month)
{    
    if (monthNumber = 1)
        string month = January;
    else if (monthNumber = 2)
         string month = February;
    else if (monthNumber = 3)
         string month = March;
    else if (monthNumber = 4)
         string month = April;
    else if (monthNumber = 5)
         string month = May;
    else if (monthNumber = 6)
         string month = June;
    else if (monthNumber = 7)
         string month = July;
    else if (monthNumber = 8)
         string month = August;
    else if (monthNumber = 9)
         string month = September;
    else if (monthNumber = 10)
         string month = October;
    else if (monthNumber = 11)
         string month = November;
    else if (monthNumber = 12)
         string month = December;  
    return;
} 
```

所以我采纳了你的一些建议并做了这个；它没有返回一个月。

```
void convertMonthNumber(int monthNumber, string& month)
{  
    const string JANUARY = "January";
    const string FEBRUARY = "February";
    const string MARCH = "March";
    const string APRIL = "April";
    const string MAY = "May";
    const string JUNE = "June";
    const string JULY = "July";
    const string AUGUST = "August";
    const string SEPTEMBER = "September";
    const string OCTOBER = "October";
    const string NOVEMBER = "November";
    const string DECEMBER = "December";

    if (monthNumber == 1)
         month = JANUARY;
    else if (monthNumber == 2)
         month = FEBRUARY;
    else if (monthNumber == 3)
         month = MARCH;
    else if (monthNumber == 4)
         month = APRIL;
    else if (monthNumber == 5)
       month = MAY;
    else if (monthNumber == 6)
         month = JUNE;
    else if (monthNumber == 7)
         month = JULY;
    else if (monthNumber == 8)
         month = AUGUST;
    else if (monthNumber == 9)
         month = SEPTEMBER;
    else if (monthNumber == 10)
         month = OCTOBER;
    else if (monthNumber == 11)
         month = NOVEMBER;
    else if (monthNumber == 12)
         string month = DECEMBER;  
    return;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T08:14:49.863

让你的函数返回一个字符串。在函数中传递一个参数（month_num）并在函数内部声明一个本地字符串（month_name）变量并计算、分配并返回month_name。我已经给了代码几个月了，剩下的你可以填写它

```
string convertMonthNUmber(int month_num)
{
    string month_name;
    if(month_num==1)
        month_name="January";
    else if(month_num==2)
        month_name="February";
    :
    :
    :
    else 
        month_name="December";

    return month_name;
} 
```

主要使用这个函数作为

```
month=convertMonthNUmber(month_num); 
```

现在该月份将具有给定月份编号的相应月份名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T21:32:34.653

我在您的代码中看到两个问题。第一个是您在if 语句中使用`=`而不是。第二个是，您似乎正在尝试重新声明变量。由于它是通过引用传递的，因此您应该简单地重新分配它（使用而不是）。`==``convertMonthNumber``month``month = January``string month = January`

# c# - 从当前上下文推断的 T4MVC 可选参数

> ID：12904265
> 
> 赞同：2
> 
> 时间：2012-10-15T21:25:57.403
> 
> 标签：c#, asp.net-mvc, url-routing, t4mvc

[我已经在T4MVC OptionalParameter values implicitly from current context](https://stackoverflow.com/questions/11566207/t4mvc-optionalparameter-values-implied-from-current-context)中阅读了关于此的另一篇文章，并且我正在使用最新的 T4MVC (2.11.1)，它应该已经修复。我什至检查了它以确保它在那里 - 并且这是。

我仍在根据当前上下文填写可选参数。

例如：假设我有一个列表，默认情况下按一个人的姓氏排序。我可以选择按名字而不是 URL 来订购

```
http://localhost/list/stuff?orderby=firstname 
```

当我在该页面时，我想使用代码返回按名字排序：

```
@Html.ActionLink("order by last name", MVC.List.Stuff(null)) 
```

我想要的链接很简单

```
http://localhost/list/stuff 
```

没有任何参数来保持 URL 简单和简短 - 在操作中调用默认行为。但相反，**orderby**被保留并且 url 仍然是

```
http://localhost/list/stuff?orderby=firstname 
```

任何帮助都会很棒。我知道在最一般的情况下，这确实删除了查询参数——也许我确实有一个特定的情况，它没有被删除。我发现只有当我在 RenderPartial 中包含的页面中有 URL 时才会发生这种情况。

我的实际代码是

```
<li>@Html.ActionLink("Recently Updated",  MVC.Network.Ticket.List(Model.UI.AccountId, "LastModifiedDate", null, null, null, null, null))</li>
<li>@Html.ActionLink("Recently Created",  MVC.Network.Ticket.List(Model.UI.AccountId, "CreatedDate", null, null, null, null, null))</li>
<li>@Html.ActionLink("Most Severe",       MVC.Network.Ticket.List(Model.UI.AccountId, "MostSevere", null, null, null, null, null))</li>
<li>@Html.ActionLink("Previously Closed", MVC.Network.Ticket.List(Model.UI.AccountId, "LastModifiedDate", null, "Closed", null, null, null))</li> 
```

当有人单击 Previously Closed 并转到**?status=closed**时，就会出现问题。当他们单击最近更新时，我希望状态参数消失（传递了一个空值）。但是 ?status=close 保留在生成的 url 中。

任何见解将不胜感激。

**2012 年 10 月 16 日更新**

编码：

```
@html.action("Profile", MVC.Profile.Index()) 
```

生成网址：

```
http://localhost:55059/network/ticket/14441327-128b-e111-af72-0050569e0924?Controller=profile&Action=index 
```

这只发生在特定页面上。这其实挺危险的……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T16:29:01.407

从我可以从在线资源中拼凑出来的内容来看，这种行为不是归因于 T4MVC，而是归因于 MVC 框架本身。关于 T4MVC 使用哪些辅助函数的信息。在我的项目中，我刚刚切换到 vanilla MVC 语法。使用传入的匿名对象进行`routeValues`监控将使您能够显式控制查询字符串参数。执行以下操作将始终有效：

```
@Html.ActionLink("Recently Updated", "Ticket", "Network", new { Id = Model.UI.AccountId, orderby = "LastModifiedDate" }, null)) 
```

...并像这样生成 HTML：

```
<a href="http://localhost:55059/Network/Ticket/14441327-128b-e111-af72-0050569e0924?orderby=LastModifiedDate">Recently Updated</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-25T13:37:06.790

如果有人仍然面临这个问题，这是我找到的解决方案

[http://yaweriqbal.wordpress.com/2014/05/25/actionlink-passing-parameter-as-querystring/](http://yaweriqbal.wordpress.com/2014/05/25/actionlink-passing-parameter-as-querystring/)

# twitter-bootstrap - Twitter Bootstrap：在小屏幕中隐藏子菜单

> ID：12904266
> 
> 赞同：3
> 
> 时间：2012-10-15T21:26:00.160
> 
> 标签：twitter-bootstrap

如果我们有子菜单，那么它们默认是可见的，我们必须滚动和滚动。请看看我想要什么，但它适用于 Bootstrap 以前的版本。我正在研究 2.1.1，我相信它应该是 Bootstrap 中的默认功能（他们在新版本中改变了很多东西）

请看这里：

[http://jsfiddle.net/nczJF/](http://jsfiddle.net/nczJF/)

我正在寻找这样的菜单行为，其中主菜单和子菜单仅通过单击相关子菜单出现。我搜索了很多，但所有这些都是针对 Bootstraps 以前的版本。所以有人有专家建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T18:00:38.960

[http://jsfiddle.net/nczJF/39/](http://jsfiddle.net/nczJF/39/)

这使用最新版本的引导程序。唯一不同的是CSS，JS是一样的。

在 bootstrap-responsive.css 中，从以下位置删除`display: block`（不要切换为不显示）：

```
.nav-collapse .dropdown-menu {
  position: static;
  top: auto;
  left: auto;
  float: none;
  display: block; /* remove this line! */
  max-width: none;
  padding: 0;
  margin: 0 15px;
  background-color: transparent;
  border: none;
  -webkit-border-radius: 0;
     -moz-border-radius: 0;
          border-radius: 0;
  -webkit-box-shadow: none;
     -moz-box-shadow: none;
          box-shadow: none;
} 
```

在同一个文件的底部，更改`height: 0`为`height: auto`：

```
.nav-collapse,
.nav-collapse.collapse {
  height: auto; /* instead of 0 */
  overflow: hidden;
 } 
```

然后，要修复默认展开视图，请更改您的 html. 将类添加`collapsed`到折叠按钮：

```
<button type="button" class="btn btn-navbar collapsed" data-toggle="collapse" data-target=".nav-collapse"> 
```

也改变

```
<div class="nav-collapse"> 
```

到

```
<div class="nav-collapse collapse" style="height: 0px; "> 
```

编辑 JS 可能会更优雅，但这无需更改另一个文件即可工作。

我在这里推动此功能的集成：[https ://github.com/twitter/bootstrap/issues/5606](https://github.com/twitter/bootstrap/issues/5606)

# ruby - Ruby 相当于 PHP 的 $_GET

> ID：12904267
> 
> 赞同：4
> 
> 时间：2012-10-15T21:26:00.727
> 
> 标签：ruby, apache, cgi-bin

我需要在 Ruby（不是 Rails 或任何其他框架）中轻松获取像 GET 这样的请求数据的最低要求是多少？

我想避免必须使用 ruby​​ on rails 或任何其他框架来获取这些数据，所以理想的答案不会有框架依赖。

我当前的设置在 apache ( )上有一个 ruby​​ 文件 ( `script`)`cgi-bin``site.com/script`

```
#!/usr/bin/env ruby

# bare minimum to output content
puts "Content-type: text/html"
puts

puts "it works!" #works fine.

# how would I obtain request data like GET parameters here
# for a url like site.com/script?hi=there
# in PHP, I would $_GET['hi'] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T21:39:14.657

啊，使用 CGI 类解决了我的问题。

[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/cgi/rdoc/CGI.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/cgi/rdoc/CGI.html)

```
require 'cgi'

cgi = CGI.new

cgi.params.each do |key, val|
   puts key
   puts val
end 
```

所以`site.com/script?hi=there`会输出`hi\nthere`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-15T21:40:02.237

请不要在没有框架的情况下这样做。有一些像[Sinatra](http://www.sinatrarb.com/)这样的超轻量级的，它们尽可能少地确保您获得正确执行此操作所需的支持。CGI 在 1990 年代死去，现在不需要回来了。

要编写 Sinatra 应用程序，您基本上定义一个方法，然后将其部署到您的服务器。当然，您可能会抱怨*工作量*很大，但如果您没有适当的部署程序，您甚至在开始之前就遇到了麻烦。

Ruby 围绕诸如 Rack 之类的东西构建了许多基础设施，这些基础设施通过诸如[Passenger](http://www.modrails.com/)之类的模块连接到 Apache，这些模块比以往任何时候都做得更多，`cgi-bin`而且没有与之相关的所有风险。

一个典型的 Sinatra 应用程序如下所示：

```
get '/example/:id' do
  "Example #{params[:id]}!"
end 
```

它真的没什么，它最终比旧的 CGI 方式少了*很多工作。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T21:39:26.643

如果您的 Web 服务器将脚本作为[CGI](https://en.wikipedia.org/wiki/Common_Gateway_Interface)程序调用，则内容将位于`QUERY_STRING`环境变量中，可通过[`ENV`](http://ruby-doc.org/core-1.9.3/ENV.html)对象访问。如果没有框架，您将不得不将其解析为单独的名称-值对以获得类似 PHP 的`$_GET`.

因为 Ruby 是一种通用编程语言，它没有处理 HTTP 请求或 CGI 环境的核心类和方法。这就是为什么建议使用框架（例如 Ruby on Rails）来处理协议级别的解析和设置的原因。犯错的地方太多了，不值得重新发明轮子。

# php - 根据另一个表中的记录或字段中的数组保存 id

> ID：12904270
> 
> 赞同：0
> 
> 时间：2012-10-15T21:26:09.460
> 
> 标签：php, mysql, serialization, data-integrity

我正在做一些 php/mysql 工作，并开始想知道什么会更有效，什么方法会具有更好的数据完整性。

我从未使用过方法 #2，但我已经看到它在 CMS 或电子商务等系统中使用过。我经常使用#1。

示例：在我的系统中创建“任务”时，我需要为其分配 1 个或多个用户。

* * *

**方法#1** 在这种方法中，我将有一个存储task_id 和user_id 的表。我会查询此表以获取关系。

* * *

**方法#2** 在这种方法中，我将在任务表“users_assigned”中有一个列，这将存储一个序列化数组，当我需要时我会取消序列化。例如

```
$data = array('John', 'Jack', 'Jill');
// after serialization it would look like...
// a:3:{i:0;s:4:"John";i:1;s:4:"Jack";i:2;s:4:"Jill";} 
```

* * *

哪种方法最适合将此类数据存储在数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:36:00.943

如果您没有强烈的反对非规范化的理由（将重复的数据存储在序列化数组中，打破正常形式的规则），我会坚持使用单独的表。获取有点复杂，需要连接，但是您可以更好地控制数据库中的关系完整性（外键），您的数据组织得更好，定义更清晰。

查看这篇文章[http://backchannel.org/blog/friendfeed-schemaless-mysql](http://backchannel.org/blog/friendfeed-schemaless-mysql)了解非规范化的极端情况。但是，在他们的情况下，他们不会将任何其他链接数据获取到行集（在您的情况下，您可能希望在序列化数组中加入有关用户的更多信息）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T21:32:26.260

方法 2 是个坏主意。几乎可以阻止您加入表格（仍然可以，但只能使用您所做的代码来证明它可以完成而不是实际使用）。

# vb.net - 如何使用 VB.NET 将信息放入富文本框中的列中？

> ID：12904273
> 
> 赞同：0
> 
> 时间：2012-10-15T21:26:29.210
> 
> 标签：vb.net

嗨，我想在选择ComboBox中的项目时在RichTextbox中显示三列。我想显示相应的演员年份、电影名称和电影列制作的金额。这是我所拥有的：

```
Private Sub employeeComboBox_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles employeeComboBox.SelectedIndexChanged
    If employeeComboBox.SelectedItem Is "Sean Connery" Then
        historyTextBox.Text = ""
    ElseIf employeeComboBox.SelectedItem Is "George Lazenby" Then
        historyTextBox.Text = ""
    ElseIf employeeComboBox.SelectedItem Is "Roger Moore" Then
        historyTextBox.Text = ""
    ElseIf employeeComboBox.SelectedItem Is "Timothy Dalton" Then
        historyTextBox.Text = ""
    ElseIf employeeComboBox.SelectedItem Is "Pierce Brosnan" Then
        historyTextBox.Text = ""
    ElseIf employeeComboBox.SelectedItem Is "Daniel Craig" Then
        historyTextBox.Text = ""
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T01:15:42.233

```
RichTextBox1.Text = "Row1 Col1" & vbTab & " Row1 Col2" & vbTab & "Row1 Col3" & vbCrLf &
  "Row2 Col1" & vbTab & " Row2 Col2" & vbTab & "Row2 Col3" 
```

但是，我建议您使用`DataGridView`控件而不是 RichTextBox，因此您可以单击列标题以按名称、年份等进行排序。

```
Dim dtb As New DataTable
dtb.Columns.Add("Year", GetType(String))
dtb.Columns.Add("Film", GetType(String))
dtb.Columns.Add("Actor", GetType(String))
dtb.Rows.Add("2001", "Film one", "Zac Black")
dtb.Rows.Add("2002", "Film two", "Young Green")
dtb.Rows.Add("2003", "Film three", "Xerxes Snifflehauser")
DataGridView1.AllowUserToAddRows = False
DataGridView1.AllowUserToDeleteRows = False
DataGridView1.DataSource = dtb 
```

# php - 每个子 div 的 Jquery MouseOver

> ID：12904276
> 
> 赞同：1
> 
> 时间：2012-10-15T21:26:43.063
> 
> 标签：php, jquery, mouseover

这是我的 jquery 代码的一部分：

```
jQuery(document).ready(function() {
var timer, imgsrc, cnt = 1;
$('.post-image img').bind('mouseover', function() {
// if there is no timer
if (!timer) {
var $t = $(this);
var site = $(this).next('.sourcesite').val(); //$(this)>("sourcesite").html();
var dd = $(this).children('div.dd'); //$(this)>("dd"); 
// get the image src
imgsrc = $t.attr('src') //;.replace('default.jpg',''); 
imgReverse = imgsrc.split("").reverse().join(""); // get the image src
// var site="al";
if (site == 'al') {
imgSlash = imgReverse.indexOf('/');
imgDot = imgReverse.indexOf('.');
imgID1 = imgReverse.substr(imgDot + 1, imgSlash - imgDot - 1);
imgID = imgID1.split("").reverse().join("");
} /*getting image name finished for "al"*/
if (site == 'bg') {
imgSplitDot = imgReverse.split('.');
imgID = imgSplitDot[1];
}
dd.html(site);
// get the image src
imgsrc = $t.attr('src').replace(imgID + '.jpg', '');
// start a new timer
timer = setInterval(function() {
// periodically change the src
$t.attr('src', imgsrc + cnt + ".jpg");
// and adjust the counter
cnt = (cnt + 1); //% 3; // 0, 1, 2
if (cnt == 21) {
cnt = 1;
}
}, 700); // <- 1000ms = 1s
}
}).bind('mouseout', function() {
// stop rotation
if (timer) {
clearInterval(timer);
timer = null;
cnt = 0;
}
// set the default img
$(this).attr('src', imgsrc + imgID + '.jpg');
});
});​ 
```

这是我的 HTML：

```
<div class="post-image">
<a class="" href="index2.php?vid=php_id&name=name" title="php_name">
<img width="180" height="135" src="php_imgsource" class="attachment" alt="" title=""/>
</a>
<div class="sourcesite">php_sourcesite</div>
<div class="dd">0</div>
</div> 
```

将鼠标悬停在 a`div`上时，图像将一张一张地改变。示例：http: [//jsfiddle.net/YkuXt/1/](http://jsfiddle.net/YkuXt/1/)

但是我的页面中有不同的图像 src，所以我在这个 jquery 代码中使用了一个 if。我在`<div class="sourcesite"></div>`by php 代码中输入源名称，我想通过 jquery 获取 sourcesite 值并在示例中使用 if 。如果它是“al”，则某些代码部分将起作用，但如果它是“bg”，则其他部分将起作用。因为图片来源不同。并且有图像源示例：

*   样本1：[samplesites.com/img/012345677.1.jpg](http://samplesites.com/img/012345677.1.jpg)

*   样本 2：[samplesites.com/img/5.jpg](http://samplesites.com/img/012345677.1.jpg)

我需要获取图像名称，例如：“1”和“5”。找到 1 后，我将通过计时器将其 1×1 递增，并且图像将在鼠标悬停时更改。

谢谢，所有。

# sql - Excel数据透视表sql中的别名错误

> ID：12904277
> 
> 赞同：3
> 
> 时间：2012-10-15T21:26:49.333
> 
> 标签：sql, excel, postgresql, pivot-table

我正在使用 Excel 数据透视表从数据库中提取数据。当我进入 Microsoft Query 编辑 SQL 查询时，我尝试使用别名重命名数据透视表的列，但不断收到错误消息：

```
SELECT table1.column1 AS "Alias String"

SELECT table1.column1 "Alias String"

SELECT table1.column1 AS my_alias

SELECT table1.column1 my_alias 
```

所有这些都会导致“语法错误”消息。我不想只是手动重命名表中的列，因为当我刷新数据时，我写的名称会被原始 SQL 列名覆盖。我正在使用 Postgresql 8.4 和 Excel 2010。我应该使用什么语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:21:30.673

经过更多研究，我发现这实际上是 Microsoft Query 中的一个故障。 [这篇文章](http://support.microsoft.com/kb/298955) 解释了它。使用文章中描述的解决方法后，我能够重命名列标题，但带有额外的引号。这是一个真正的痛苦，但考虑到我花了多少时间和精力试图找到答案，我愿意接受额外的引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T22:11:33.537

To keep formatting when updating Excel from a SQL database, you need to change the settings in Excel. Write your query and Return Data to Excel. Then on the spreadsheet containing your data, right click, go to Table, then External Data Properties. Make sure Preserve Cell Formatting is ticked. Hope this helps.

# android - Android：分别为layout_height和layout_width指定layout_weight

> ID：12904281
> 
> 赞同：1
> 
> 时间：2012-10-15T21:27:14.417
> 
> 标签：android, layout

问题说明了一切。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T21:35:58.947

weight 属性仅对父布局的方向有意义。如果将父布局定义为水平，则权重对布局的宽度有意义。如果将垂直布局放在水平布局中，则可以为垂直布局元素分配权重，即宽度，在垂直布局中，您可以为高度的子元素定义权重。请仔细阅读：http: [//developer.android.com/reference/android/widget/LinearLayout.html#attr_android :orientation](http://developer.android.com/reference/android/widget/LinearLayout.html#attr_android:orientation)

# java - 谐波序列递归

> ID：12904284
> 
> 赞同：11
> 
> 时间：2012-10-15T21:27:33.360
> 
> 标签：java, recursion

我真的掌握了递归的窍门（或者我认为），但这个问题让我很困惑。我正在尝试返回 1 + 1/2 + 1/3 + ... + 1/n，但无论我尝试什么方法都会返回 1.0。我终其一生都无法弄清楚出了什么问题。

```
public static double harmonic(int n) {
    if(n == 1) {
        return 1;
    } else {
        return (1 / n) + (1 / harmonic(n - 1));
    }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-15T21:28:26.920

您想使用浮点除法：

```
public static double harmonic(int n) {
    if(n == 1.0) {
        return 1.0;
    } else {
        return (1.0 / n) + (1.0 / harmonic(n - 1.0));
    }
} 
```

即：`1/2`是`0`；`1/2.0`是`0.5`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-15T21:30:47.167

好吧，一方面，你不想 return `(1 / n) + (1 / harmonic(n - 1))`，但你还需要使用`double`算术：

```
public static double harmonic(int n) {
    if(n == 1) {
        return 1.0;
    } else {
        return (1.0 / n) + harmonic(n - 1);
    }
} 
```

如果您将其保留为`1 / harmonic`完全返回另一个函数：

> (1 / n) + 1 / ( 1 / (n - 1) + 1 / ( 1 / (n - 2) + 1 / (...) ) )

顺便说一句，这是一个非常令人困惑的功能，但我认为（我第三次编辑它）这次我做对了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T21:29:00.990

那是因为整数除法给出整数结果。

所以，`1/2 == 0`

您可以使用`floating-point`这样的除法：-

```
if(n == 1.0) {
    return 1.0;
} else {
    return (1.0 / n) + harmonic(n - 1); // Should be `harmonic(n - 1)`
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-15T21:29:09.313

你需要使用双打。现在，你正在做`1 / n`，这两个都是整数。将其更改为：

```
return (1.0 / n) + (1.0 / harmonic(n - 1)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-15T21:30:40.883

在除法计算中使用双打。目前，所有内容都被转换为整数，失去了您通常期望的任何浮点精度。

```
public static double harmonic(int n) {
    if (n == 1) {
        return 1;
    } else {
        return (1.0 / n) + (1.0 / harmonic(n - 1));
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-01-27T23:56:19.677

递归部分不应包括*1/harmonic(n-1)* 它应该是

```
 public static double harmonic(int n)
  {
    double harm = 0.0;
    if (n == 1) {
        return 1.0;
    }
    else {
        harm = harm + (1.0 / n) +  harmonic(n - 1);
    }
    return harm;

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-04T07:16:31.220

```
/**
 * Created by hrishikesh.mishra on 04/01/16.
 *
 * Describe a recursive algorithm
 * for computing the nth Harmonic number,
 * defined as Hn = ∑ n k=1 1/k.
 *
 */
public class HarmonicNumber {

    public static void main(String[] args) {

        System.out.println("Sum up to 1: "  + sum(1));
        System.out.println("Sum up to 2: "  + sum(2));
        System.out.println("Sum up to 3: "  + sum(3));
        System.out.println("Sum up to 4: "  + sum(4));
    }

    /**
     * Summation with recursive method.
     * @param n
     * @return
     */
    public static double sum(int n){
        if(n <= 1)
            return 1;
        else
            return ((double) 1/n) + sum(n - 1);
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-08T21:30:01.273

这是我对调和数递归的实现。

```
double harmonic(int n){

    if(n == 1)return 1;
    else return 1.0 / n + harmonic(n - 1);

} 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-11-02T16:49:32.563

```
 public static double harmonic(int n)
   {
      if (n==1)
      return 1/n;
      else return 1/n + harmonic(n-1);
   } 
```

# c# - ControlTemplate EventTrigger 未在控件初始化时触发

> ID：12904287
> 
> 赞同：1
> 
> 时间：2012-10-15T21:27:39.660
> 
> 标签：c#, .net, wpf, xaml, controltemplate

我有一个使用 EventTriggers 启动/停止动画的控件。除了第一次初始化控件时，一切正常，EventTriggers 没有被触发。我怀疑当属性更改值时它们尚未设置，因此不会触发和启动动画。

如果我在运行时更改`IsBusy`属性值，一切正常。

我究竟做错了什么？

* * *

导致问题的用法（StartEvent 被触发但 EventTrigger 似乎没有捕捉到它）：

```
 <my:BusyIndicator IsBusy="True" x:Name="testIndicator" Height="100" Width="100"/> 
```

我控制的相关代码：

```
 /// <summary>
    /// Event that starts the animation
    /// </summary>
    public static readonly RoutedEvent StartEvent;

    /// <summary>
    /// Event that stops the animation
    /// </summary>
    public static readonly RoutedEvent StopEvent;

    static BusyIndicator()
    {
        DefaultStyleKeyProperty.
            OverrideMetadata(
            typeof(BusyIndicator),
            new FrameworkPropertyMetadata(typeof(BusyIndicator))
        );

        StartEvent =
            EventManager.RegisterRoutedEvent(
            "StartEvent",
            RoutingStrategy.Direct,
            typeof(RoutedEventHandler),
            typeof(BusyIndicator));

        StopEvent =
            EventManager.RegisterRoutedEvent(
            "StopEvent",
            RoutingStrategy.Direct,
            typeof(RoutedEventHandler),
            typeof(BusyIndicator));
    }

    /// <summary>
    /// Indicates if the control is currently animated.
    /// 
    /// This is a dependency property
    /// </summary>
    public bool IsBusy
    {
        get { return (bool)GetValue(IsBusyProperty); }
        set { SetValue(IsBusyProperty, value); }
    }

    /// <summary>
    /// Identifier for the IsBusy property
    /// </summary>
    public static readonly DependencyProperty IsBusyProperty =
        DependencyProperty.Register(
            "IsBusy",
            typeof(bool),
            typeof(BusyIndicator),
            new UIPropertyMetadata(false, new PropertyChangedCallback(OnIsBusyChanged)));

    private static void OnIsBusyChanged(DependencyObject sender, DependencyPropertyChangedEventArgs inEventArgs)
    {
        bool newValue = (bool)inEventArgs.NewValue;
        if (newValue)
        {
            System.Diagnostics.Debug.WriteLine("Start");
            (sender as BusyIndicator).RaiseEvent(new RoutedEventArgs(StartEvent));
        }
        else
        {
            System.Diagnostics.Debug.WriteLine("Stop");
            (sender as BusyIndicator).RaiseEvent(new RoutedEventArgs(StopEvent));
        }
    } 
```

我的 Themes\generic.xaml 文件中的相关 XAML

```
<Storyboard x:Key="rotateAnimation">
    <DoubleAnimationUsingKeyFrames
                            BeginTime="00:00:00"
                            Storyboard.TargetName="pathCircular"
                            Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(RotateTransform.Angle)"
                            RepeatBehavior="Forever">
        <SplineDoubleKeyFrame KeyTime="00:00:00" Value="0"/>
        <SplineDoubleKeyFrame KeyTime="00:00:01" Value="360"/>
    </DoubleAnimationUsingKeyFrames>
</Storyboard>

<Style TargetType="{x:Type local:BusyIndicator}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:BusyIndicator}">
                <Grid Height="{TemplateBinding Height}"
                      Width="{TemplateBinding Width}"
                      Margin="{TemplateBinding Margin}">
                    <Path Stretch="Fill" Name="pathCircular"
                          <!-- the path being animated -->
                    </Path>
                </Grid>
                <ControlTemplate.Triggers>
                    <EventTrigger RoutedEvent="local:BusyIndicator.StopEvent">
                        <StopStoryboard BeginStoryboardName="rotateAnimation"/>
                    </EventTrigger>
                    <EventTrigger RoutedEvent="local:BusyIndicator.StartEvent">
                        <BeginStoryboard Name="rotateAnimation" Storyboard="{StaticResource rotateAnimation}"/>
                    </EventTrigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:52:19.527

如果尚未应用模板，则它不能监听事件。您需要在 OnApplyTemplate 之后保留一个标志并引发事件，**或者**对 IsBusy 属性使用 Trigger 并使用**EnterActions**和**ExitActions**。

# r - Flowstrates 和 R：以所需格式提取和重塑数据

> ID：12904294
> 
> 赞同：2
> 
> 时间：2012-10-15T21:27:55.787
> 
> 标签：r, sqlite, dataframe

我正在尝试将大型数据集转换为在[flowstrates](http://code.google.com/p/jflowmap/wiki/Flowstrates)包中进行分析所需的格式。

我目前拥有的是一个包含起点和终点的大文件（600k 行程）。

格式有点像这样：

```
tripID   Month start_pt   end_pt
1        June   1           3
2        June   1           3
3        July   1           5
4        July   1           7
5        July   1           7 
```

我需要能够生成的是一个文件，该文件具有按单位时间（比如说几个月）的行程计数，格式如下：

```
start_pt   end_pt  June July August ... December
1          3       2    0    5          9
1          5       0    1    4          4
1          7       0    2    0          0 
```

按月预先分割数据然后为每个起点-终点对生成计数很容易，但是将它们全部重新组合在一起会导致各种问题，因为每个预先分割的数据块的大小都非常不同。所以看来我需要一次对整个数据集执行此操作。

是否有任何用于进行此类处理的软件包？在 SQL 或 SQLite 之类的东西中这样做会更容易吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T22:08:32.483

您可以使用该`reshape2`软件包相当容易地做到这一点。

如果您的数据`dat`是

```
library("reshape2")
dcast(dat, start_pt+end_pt~Month, value.var="tripID", fun.aggregate=length) 
```

这为每个`start_pt`//组合`end_pt`提供了一个条目`Month`，其值是有多少案例具有该组合（该`tripID`集合的长度）。

# c++ - 矢量之间的高效转换 > 和矢量 >

> ID：12904295
> 
> 赞同：4
> 
> 时间：2012-10-15T21:27:57.307
> 
> 标签：c++, c++11

我有一堂课：

```
class X {
  vector<shared_ptr<T>> v_;

 public:
  vector<shared_ptr<const T>> getTs() { return v_; }
}; 
```

它有一个`vector`of`shared_ptr`类型`T`。出于某种原因，它需要公开一个方法来返回这个向量。但是，我不想修改向量的内容，也不想修改指向的对象。所以我需要返回一个`vector`of `shared_ptr<const T>`。

我的问题是，有没有有效的方法来实现这一目标？如果我简单地返回它，它可以工作，但它需要重建一个向量，这有点昂贵。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T22:28:08.580

你不能直接这样做——但你可以在你的容器上定义“视图”，让你做一些非常相似的事情，如果你想确保你的指针是常量：

```
boost::any_range<
  std::shared_ptr<const int>,
  boost::random_access_traversal_tag,
  std::shared_ptr<const int>,
  std::ptrdiff_t
> foo(std::vector<std::shared_ptr<int>>& v)
{
  return v;
} 
```

一个简单的变换迭代器适配器/变换范围也可以解决问题，我只是用它来说明这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T22:14:21.893

为什么不将它作为一组`iterator`s 返回呢？

```
class X {
  vector<shared_ptr<T>> v_;
  class const_iterator : std::iterator< std::bidirectional_iterator_tag, T >
  {
    vector<shared_ptr<T>>::iterator it;
    const_iterator( vector<shared_ptr<T>>::iterator& v ) :it (v) { }
    const T& operator*() { return const_cast<const T>( **it ); }
    //forward all methods
  }

   public:
  const_iterator ts_begin() { return const_iterator(v_.begin()); }
  const_iterator ts_end() { return const_iterator(v_.end()); }
}; 
```

或类似的东西？这使您可以完全控制类型及其访问方式。另外，您以后可以在不更改 api 的情况下更改类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T21:51:23.420

您是按值返回的，因此无论您返回原始的副本、向量还是向量的副本，成本都是相同的`shared_ptr<T const>`：一个内存分配和 N 个原子增量（大约）。

如果您要避免创建返回的向量（即按值返回），那么无论与模板的参数有多相关，不同的模板实例都是不相关的类型，这是不可能的。

# ruby - 为什么 rspec 给 EISDIR

> ID：12904300
> 
> 赞同：0
> 
> 时间：2012-10-15T21:28:33.917
> 
> 标签：ruby, rspec

好的，所以我正在为我的游戏方法编写一个规范......看起来像这样......

```
 def play
        #draw the board
        puts drawgrid

        #make a move
        turn = 0

        9.times do
          if turn.even?

            @player = @player_h.move_human("X", @board)
            @move = @player.to_sym
            @marker = @player_h.boardpiece

            does_move_exist(@move,@marker)
            is_a_human_win

          else

            @player = @player_c.move_computer("O", @board)
            @move = @player
            @marker = @player_c.boardpiece

            does_move_exist(@move,@marker)
            is_a_computer_win

          end

         puts drawgrid

         turn += 1

        end
      end 
```

我的规格目前看起来像这样......

```
 describe 'play method'do
        it 'draws game board to screen' do
            @game.play.should_receive(:puts) == <<-EOF.gsub(/^ {6}/, '')

          a  | |  
          ----------
          b  | |  
          ----------
          c  | |  
          ----------
            1 2 3
          EOF
        end
      end 
```

但我得到的错误是......

```
 1) Game class play method draws game board to screen
         Failure/Error: @game.play.should_receive(:puts) == <<-EOF.gsub(/^ {6}/, '')
         Errno::EISDIR:
           Is a directory - spec 
```

不知道 RSpec 告诉我什么。如何测试播放方法“放置”drawgrid？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:33:44.480

试试@game.play.should_receive(:puts).with(@game.drawgrid)

# java - 我的 ThreadPoolExecutor 是否泄漏内存？

> ID：12904305
> 
> 赞同：8
> 
> 时间：2012-10-15T21:28:44.917
> 
> 标签：java, threadpoolexecutor

我正在使用 a [`ThreadPoolExecutor`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)来运行任务。后端是 a [`SynchronousQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/SynchronousQueue.html)，所以如果 executor 已经在执行任务，它会抛出[`RejectedExecutionException`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/RejectedExecutionException.html). 这是一个简单的测试用例：

```
public class ExecutorTest {

  final static Worker worker = new Worker();

  public static void main(String[] args) {
    ThreadPoolExecutor executor = new ThreadPoolExecutor(1, 1, 0L, TimeUnit.MILLISECONDS, new SynchronousQueue<Runnable>());

    while (true) {
        try {                
            executor.execute(worker);                
        }catch (RejectedExecutionException e) {                
        }
    }        
  }

  static class Worker implements Runnable {

    private int i = 0;
    private long start = System.currentTimeMillis();

    @Override
    public void run() {
        try {
            Thread.sleep(1000);
            System.out.println(++i + " " + (System.currentTimeMillis() - start));
        } catch (InterruptedException ex) {                
        }
    }
  }
} 
```

预期的行为是：执行 worker 并在休眠一秒钟后，打印出 i（表示到目前为止执行 worker 的频率）和自 worker 创建以来的毫秒数。所以我期待：

```
1 1015 
2 2015
3 3016 
4 4017 
```

这在一段时间内工作正常，但几乎在一个小时后：

```
2919 2922196
2920 2942951
2921 2990407 
```

所以一个worker执行和下一个worker执行之间的时间是20秒（2919->2920）和38秒（2920->2921）等等。一切都变得非常缓慢，jvm 在垃圾收集上花费了大量时间。最后（几天后）我遇到了 OutOfMemoryError。

我在 64 位 Linux 机器上的 Oracle JVM 1.7.0_07 上使用 -Xmx8M 运行它（我假设效果会在更多堆空间后出现）。我会很感激任何指示，但可能我只是错过了显而易见的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:17:28.427

您可以尝试修改`ThreadPoolExecutor`实例化。您只需向构造函数添加一个参数即可使用`RejectExecutionHandler`将默默丢弃被拒绝任务的 a 。

```
public static void main(String[] args) {
  ThreadPoolExecutor executor = new ThreadPoolExecutor(1, 1, 0L, TimeUnit.MILLISECONDS, new SynchronousQueue<Runnable>(), new ThreadPoolExecutor.DiscardPolicy());

  while (true) {
    executor.execute(worker);                
  }
} 
```

因此**，如果**您的问题来自重复`RejectedExecutionException`（我认为是这样），您将避免它。

# sencha-touch - 如何在存储文件夹中使用存储定义

> ID：12904307
> 
> 赞同：0
> 
> 时间：2012-10-15T21:28:49.787
> 
> 标签：sencha-touch

我是煎茶触摸的新手。我想知道如何正确使用 sencha-touch 中的文件结构。例如，在 app 文件夹下有您的控制器、模型、配置文件、商店、视图文件夹。如果我定义一个商店，例如在商店文件夹下，我创建一个名为 search.js 的文件

```
Ext.define('Volunteer.store.search'{
    extend: 'Ext.data.Store',
    requires: ['Volunteer.model.person'],
    config:{
        model: 'Volunteer.model.person'
    }
}); 
```

我如何在不同的文件中使用这个商店？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T01:57:16.883

在 app.js 文件`stores: ['search']`和您调用的不同文件中添加您的商店`Ext.getStore('search');`。如果没有找到，则需要将 search.js 添加到 index.html

# php - 更新查询增量字段加上 1 个 codeigniter

> ID：12904308
> 
> 赞同：5
> 
> 时间：2012-10-15T21:28:57.853
> 
> 标签：php, codeigniter, codeigniter-2

尝试在我的数据库中的给定字段上增加 1 时遇到问题。我尝试了有无活动记录。

我的功能看起来像这样（在我的模型中）

```
function _set_reads($id){
$this->db->set('reads', 'reads+1', FALSE)
$this->db->where('id', $id);
$this->db->update('article');
} 
```

和

```
function _set_reads($id){
$sql = 'update article set reads=reads+1 where id=?';
$this->db->query($sql, array($id));
} 
```

在这两种情况下我都会收到相同的错误，这是以下错误消息：

```
Error Number: 1064

You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'reads+1 WHERE `id` = '15'' at line 1

UPDATE `article` SET `reads` = reads+1 WHERE `id` = '15' 
```

我正在使用最新版本的 MAMP

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-25T00:40:19.860

-- 需要小的修正

```
$this->db->where('id', $id);
$this->db->set('set_row', '`set_row`+ 1', FALSE); 
```

谢谢你

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-15T23:06:54.833

解决了：我必须改变

```
$this->db->set('reads', 'reads+1', FALSE) 
```

至

```
$this->db->set('reads', '`reads+1`', FALSE) 
```

对不起，这个帖子...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-15T23:09:49.780

**[set()](http://codeigniter.com/user_guide/database/active_record.html)**还将接受一个可选的第三个参数`($escape)`，如果设置为 ，它将防止数据被转义`FALSE`。

# haskell - 这个简单的类型定义有什么问题？（期待更多的论点......）

> ID：12904310
> 
> 赞同：11
> 
> 时间：2012-10-15T21:29:02.533
> 
> 标签：haskell

基本.hs：

```
areaCircle :: Floating -> Floating
areaCircle r = pi * r * r 
```

命令：

```
*Main> :l basic.hs 
[1 of 1] Compiling Main             ( Sheet1.hs, interpreted )

Sheet1.hs:2:15:
    Expecting one more argument to `Floating'
    In the type signature for `areaCircle':
      areaCircle :: Floating -> Floating
Failed, modules loaded: none. 
```

我看到`areaCircle :: Floating a => a -> a`按预期加载。为什么上面的版本不被接受？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-15T21:34:29.703

因为您的版本实际上并不提供类型。`Floating`是一个类型类。如果你想允许*任何*浮动，那么`Floating a => a -> a`是正确的。否则，您可以尝试`Float -> Float`或`Double -> Double`。

只是为了更充实一点：`Floating a => a -> a`不仅表示您的函数接受任何`Floating`类型，而且它返回与传递的相同类型。即使您缩小类型，这也必须是正确的。`Float -> Double`例如，如果不进行一些额外的转换，您将无法使用

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-15T21:37:51.783

`Floating`不是类型，而是类型*类*。你不能像你一样使用类型类作为类型。当您`Floating`在 Haskell 中说时，您是在断言以下类型是该类的实例。因此，例如，您可以将代码编写为

```
areaCircle :: Floating a => a -> a
areaCircle r = pi * r * r 
```

您可以非正式地阅读为：对于任何类型`a`，如果`a`是类的实例，`Floating`则`areaCircle`可以用作 from `a`to的函数`a`。

你可以把它想象`Floating`成一个形容词。它描述了类型。但是您试图将其用作名词，即。作为一种类型本身。

[http://en.wikipedia.org/wiki/Type_class](http://en.wikipedia.org/wiki/Type_class)

# iphone - 通过 UINavigationController 将整个 UIView 从一个 ViewController 传递到另一个

> ID：12904319
> 
> 赞同：5
> 
> 时间：2012-10-15T21:29:41.483
> 
> 标签：iphone, viewcontroller, navigationcontroller

这就是我正在做的 - 我有一个 UIView - 我将它从一个视图控制器传递到另一个。

当我回到第一个视图控制器时——uiview 不见了——取而代之的是一个白色的空白区域。

我正在使用 ARC - 任何想法 - 如果是因为这个或其他我想念的东西

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T21:37:41.877

如果您将 a 添加`UIView`到另一个，那么它将从以前的位置删除。您不能同时在两个地方拥有一个视图。

当您返回第一个视图控制器时，您需要将视图放回原处。或者，不要做你正在做的事情。这不是真正的 MVC。传递数据，而不是视图。

# ruby-on-rails - Precompile HTML pages in asset pipeline

> ID：12904321
> 
> 赞同：2
> 
> 时间：2012-10-15T21:29:44.133
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, asset-pipeline

I'd like to use Rails's asset pipeline to compile our custom HTTP error pages for nginx. I'd also like to use the standard Rails convention of a layout (say, `app/views/layouts/error.html.erb`) and views that render within that layout.

I found [one article describing a way to simply precompile some ERb templates](http://neovintage.blogspot.com/2012/02/precompile-static-html-pages-with-rails.html), but I'd still end up copying most of the layout code between the various templates.

I also thought about using `caches_page` in a controller and simply forcing the errors to occur during the build so that the files end up in `public`, but that seems really hacky.

Is there any way to achieve this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T01:17:57.663

I ended up going the hacky route, which wasn't as hacky as I thought.

Basically, I created a controller, routes, and templates for the errors I plan to handle:

```
# config/routes.rb
resources :errors, only: :show

# app/controllers/errors_controller.rb
class ErrorsController < ApplicationController
  layout 'errors'

  # you may need to disable various filters
  skip_before_filter :authenticate_user!

  # cache full versions of the pages we generate
  caches_page :show

  def show
    render action: params[:id]
  end
end

# app/views/errors/404.html.erb and so on
<p>404 Not Found</p> 
```

Then I created a Rake task to "visit" each of these pages, which will cause the controller to cache the page in `/public/errors`:

```
task :create_error_pages => :environment do
  session = ActionDispatch::Integration::Session.new(Rails.application)

  %w{401 404 422 ...}.each do |error|
    session.get("/errors/#{error}")
  end
end 
```

Now during deploy, I run this:

```
RAILS_ENV=production bundle exec rake assets:precompile create_error_pages 
```

to generate our static HTTP error pages.

This will work in any environment where `config.action_controller.perform_caching = true`. This is on by default in production, but not in development, so be aware.

# python - 在 s3 存储桶中搜索文件（键）需要更长的时间

> ID：12904326
> 
> 赞同：2
> 
> 时间：2012-10-15T21:29:56.320
> 
> 标签：python, amazon-s3, boto

我在 s3 存储桶中有 10000 个文件。列出所有文件需要 10 分钟。我想使用 BOTO（AWS 的 Python 接口）实现一个搜索模块，该模块根据用户输入搜索文件。有没有办法可以用更少的时间搜索特定文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T04:56:52.033

有两种方法可以实现搜索...

**案例1**。正如 john 所建议的那样 - 您可以在 list 方法中指定 s3 密钥文件的前缀。这将返回以给定前缀开头的 S3 密钥文件的结果。

**情况 2。**如果您想搜索以特定后缀结尾的 S3 密钥，或者我们可以说扩展名，那么您可以在分隔符中指定后缀。请记住，只有在您为以该字符串结尾的搜索项提供后缀的情况下，它才会为您提供正确的结果。Else 分隔符用于路径分隔符。

我会建议您使用案例 1，但如果您想使用特定后缀更快地搜索，那么您可以尝试案例 2

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T22:13:32.047

AFAIK 您能做的最好的事情是使用[命名参数](https://github.com/boto/boto/blob/develop/boto/s3/bucket.py#L216)[根据`prefix`](https://github.com/boto/boto/blob/develop/boto/s3/bucket.py#L216)文件前缀过滤结果。

# java - Java Client-Server 应用程序管道在子线程上不起作用

> ID：12904336
> 
> 赞同：1
> 
> 时间：2012-10-15T21:30:40.300
> 
> 标签：java

我有一个客户端和一个服务器。客户端在特定端口上绑定一个套接字，服务器向客户端发送回一个新端口，客户端应该在新端口号上绑定一个新套接字。

从主服务器线程开始，我启动一个线程，一旦服务器准备好并正在侦听新端口，就会向客户端发送消息，以便客户端可以尝试连接到新端口。来自子线程的管道没有将消息发送到客户端。所以客户端和服务器都只是冻结，这似乎是一个死锁，但我不确定。客户端这行代码：System.out.println("FROM SERVER:" + inMsg_rport); 没有执行。

服务器代码：

```
class server
            {
                public static void main(String argv[]) throws Exception
                {
                    String newPort;
                    ServerSocket serverSocket = null;
                    Socket clientSocket = null;
                    try
                    {
                        serverSocket = new ServerSocket(5555);
                        clientSocket = serverSocket.accept();

                        DataOutputStream serverOut =
                        new DataOutputStream(clientSocket.getOutputStream());
                        int r_port = 5556;
                        Thread appThread = new Thread(new serverApp(serverOut, r_port));
                        appThread.start();
                    }
                    catch(IOException e)
                    {
                        System.out.println(e);
                    }
                }

                static class serverApp implements Runnable
                {
                    DataOutputStream serverOut;
                    int nPort;
                    public serverApp(DataOutputStream servO, int r_port)
                    {
                        this.serverOut = servO;
                        this.nPort = r_port;
                    }
                    @Override
                    public void run()
                    {
                        ServerSocket serverSocket = null;
                        Socket clientSocket = null;

                        try
                        {
                            serverSocket = new ServerSocket(nPort);
                            serverOut.writeBytes(sr_port);
                            clientSocket = serverSocket.accept();
                        }
                        catch(IOException e)
                        {
                            System.out.println(e);
                        }
                    }
                }
            } 
```

客户端代码：

```
 class client {
                public static void main(String argv[]) throws Exception
                {
                    String serverIp = argv[0]; 
                    String msg = argv[2];
                    int port = Integer.parseInt(argv[1]);

                    Socket clientSocket = new Socket(InetAddress.getByName(serverIp), port);

                    BufferedReader clientIn =
                    new BufferedReader(new
                    InputStreamReader(clientSocket.getInputStream()));

                    String inMsg_rport = clientIn.readLine();
                    System.out.println("FROM SERVER: " + inMsg_rport);
                    int r_port = Integer.parseInt(inMsg_rport);
                    clientSocket.close();
                    System.out.println("Closed connection");

                   Socket new_clientSocket = new Socket(InetAddress.getByName(serverIp), r_port);

                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:39:14.880

`readLine()`在您的客户端中是阻塞呼叫，正在等待行尾字符

[http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#readLine](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html#readLine) ()

您没有发送行尾字符。您`DataOutputStream`在服务器中使用 a 并发送原始字节。

不要`DataOutputStream`在你的服务器中使用 a；我不认为这真的是你要找的。只需将端口号作为带有行尾字符的文本发送即可。

# android - Android + 蓝牙 (Bluecove) - 需要关闭 OutputStream 才能真正写入数据

> ID：12904341
> 
> 赞同：1
> 
> 时间：2012-10-15T21:30:54.290
> 
> 标签：android, bluetooth, bluecove

我有 Android 设备作为客户端，PC 是蓝牙服务器，使用 Bluecove 库

来自客户端的代码片段：

```
btSocket = serverBt.createRfcommSocketToServiceRecord(myUuid);
btAdapter.cancelDiscovery();
btSocket.connect();

InputStream in = btSocket.getInputStream();
OutputStream out = btSocket.getOutputStream();
OutputStreamWriter osw = new OutputStreamWriter(out);
InputStreamReader isr = new InputStreamReader(in);
osw.write(55);
osw.flush();
out.flush();
//osw.close();
logTheEvent("Stuff got written, now waiting for the response.");
int dummy = isr.read();
logTheEvent("Servers response: "+ new Integer(dummy).toString()); 
```

和服务器：

```
StreamConnectionNotifier streamConnNotifier = (StreamConnectionNotifier)Connector.open( connectionString, Connector.READ_WRITE );
StreamConnection incomingConnection=streamConnNotifier.acceptAndOpen();
InputStream in = incomingConnection.openInputStream();
OutputStream out = incomingConnection.openOutputStream();
OutputStreamWriter osw = new OutputStreamWriter(out);
InputStreamReader isr = new InputStreamReader(in);
int fromClient = isr.read();
System.out.println("Got from client " + new Integer(fromClient).toString());
osw.write(999); 
```

当**osw.close();** 在客户端未注释时，消息被传输到服务器，但是，客户端无法接收响应，抛出带有消息“套接字已关闭”的 IOException。然而，当**osw.close();** 已评论，客户端和服务器都冻结： A. 客户端挂起当然读取服务器的响应 B. 服务器挂在 streamConnNotifier.acceptAndOpen();

应该怎么做才能实现双向通信？是我的代码、PC 蓝牙堆栈或 bluecove 造成的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T21:37:47.683

蓝牙使用缓冲输出。这意味着有一个小的内存位置包含您写入流的所有数据。当此内存位置已满时，它将缓冲区数据以数据包的形式写入套接字。当您过早关闭套接字时，该缓冲区会被擦除，数据也会消失。

为了强制流写入，请尝试调用`flush()`

您可以做的其他事情是将缓冲区大小设置为非常小，以便始终写入数据。但是，如果您这样做，性能将不会很好。

不幸的是，我没有我写的所有代码，但是这里有一个基础[项目](https://github.com/pheonixblade9/Bluetooth-Device-Discovery)

# c# - 将 url 编码的 xml 发布到 url

> ID：12904346
> 
> 赞同：0
> 
> 时间：2012-10-15T21:31:21.073
> 
> 标签：c#, .net, xml

您好，我有一个字符串格式的 xml 文档，我正在尝试将其发布到 url。

```
 string xml = File.ReadAllText(Server.MapPath("~/test.txt"));
      myurl=(uri+Server.UrlEncode(xml));
       Response.Write("<a input type="hidden" name="cxml-urlencoded" value="myurl"></a>"); 
```

Response.Write 无法正常工作，因为它没有正确编写我得到红色摆动下划线开始隐藏说预期“）”任何想法如何去做？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T21:55:20.160

[试试我在这里](https://stackoverflow.com/a/12570950/298754)发布的迷你图书馆。你会像这样使用它：

```
HTTP_Post(uri, Server.UrlEncode(xml), DataType.XML) 
```

不过，我不知道它是否会处理您需要使用的特定字段名称。

# c# - 将参数传递给 Web API 模型绑定器

> ID：12904347
> 
> 赞同：2
> 
> 时间：2012-10-15T21:31:21.287
> 
> 标签：c#, asp.net-web-api, model-binding

我正在尝试创建 Web API 模型绑定器，它将绑定由 javascript 框架的网格组件发送的 URL 参数。Grid 发送指示标准页面、pageSize 和 JSON 格式的排序器、过滤器和分组器的 URL 参数。URL 字符串如下所示：

```
http://localhost/api/inventory?page=1&start=0&limit=10sort=[{"property":"partName","direction":"desc"},{"property":"partStatus","direction":"asc"}]&group=[{"property":"count","direction":"asc"}] 
```

有问题的模型是 Inventory，它具有简单的 Count (int) 属性和一个引用 Part (Part) peoperty（它又具有 Name、Status）。视图模型/dto 被展平（InventoryViewModel .Count、.PartName、.PartStatus 等）我使用[动态表达式 Api](http://nuget.org/packages/DynamicQuery)然后查询域模型，将结果映射到视图模型并将其作为 JSON 发送回。在模型绑定期间，我需要通过检查正在使用的模型和视图模型来构建表达式。

**为了保持模型绑定器可重用，我如何传递/指定正在使用的模型和视图模型类型？** 我需要它来构建有效的排序、过滤和分组表达式 注意：我不想将这些作为网格 url 参数的一部分传递！

我的一个想法是使 StoreRequest 通用（例如 StoreRequest），但我不确定模型绑定器是否或如何工作。

示例 API 控制器

```
// 1\. model binder is used to transform URL params into StoreRequest. Is there a way to "pass" types of model & view model to it?
    public HttpResponseMessage Get(StoreRequest storeRequest)
    {
            int total;
            // 2\. domain entites are then queried using StoreRequest properties and Dynamic Expression API (e.g. "Order By Part.Name DESC, Part.Status ASC")
            var inventoryItems = _inventoryService.GetAll(storeRequest.Page, out total, storeRequest.PageSize, storeRequest.SortExpression); 
            // 3\. model is then mapped to view model/dto
            var inventoryDto = _mapper.MapToDto(inventoryItems);
            // 4\. response is created and view model is wrapped into grid friendly JSON
            var response = Request.CreateResponse(HttpStatusCode.OK, inventoryDto.ToGridResult(total));
            response.Content.Headers.Expires = DateTimeOffset.UtcNow.AddMinutes(5);
            return response;
    } 
```

StoreRequestModelBinder

```
public class StoreRequestModelBinder : IModelBinder
{
    private static readonly ILog Logger = LogManager.GetCurrentClassLogger();

    public bool BindModel(HttpActionContext actionContext, ModelBindingContext bindingContext)
    {
        Logger.Debug(m => m("Testing model binder for type: {0}", bindingContext.ModelType));
        if (bindingContext.ModelType != typeof(StoreRequest))
        {
            return false;
        }
        var storeRequest = new StoreRequest();
        // ----------------------------------------------------------------
        int page;
        if (TryGetValue(bindingContext, StoreRequest.PageParameter, out page))
        {
            storeRequest.Page = page;
        }
        // ----------------------------------------------------------------
        int pageSize;
        if (TryGetValue(bindingContext, StoreRequest.PageSizeParameter, out pageSize))
        {
            storeRequest.PageSize = pageSize;
        }
        // ----------------------------------------------------------------
        string sort;
        if (TryGetValue(bindingContext, StoreRequest.SortParameter, out sort))
        {
            try
            {
                storeRequest.Sorters = JsonConvert.DeserializeObject<List<Sorter>>(sort);
                // TODO: build sort expression using model and viewModel types
            } 
            catch(Exception e)
            {
               Logger.Warn(m=>m("Unable to parse sort parameter: \"{0}\"", sort), e);
            }
        }
        // ----------------------------------------------------------------
        bindingContext.Model = storeRequest;
        return true;
    }

    private bool TryGetValue<T>(ModelBindingContext bindingContext, string key, out T result)
    {
        var valueProviderResult = bindingContext.ValueProvider.GetValue(key);
        if (valueProviderResult == null)
        {
            result = default(T);
            return false;
        }
        result = (T)valueProviderResult.ConvertTo(typeof(T));
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-22T12:09:16.777

只需更改您的控制器签名，例如

```
public HttpResponseMessage Get([ModelBinder(typeof(StoreRequestModelBinder)]StoreRequest storeRequest) 
```

问候

# android - 使用调试构建作为调试符号源

> ID：12904348
> 
> 赞同：0
> 
> 时间：2012-10-15T21:31:23.063
> 
> 标签：android, linux, android-ndk, gdb, debug-symbols

我有一个 Android NDK 库。它在设备上崩溃，给了我崩溃地址（0x80C44F3E）。我构建它的方式，代码的相关部分有调试符号。我进入的库副本`(myproject)\obj\local\armeabi`比进入`(myproject)\libs`. 我猜，它是未剥离的。

我可以使用未剥离的库将崩溃地址转换为源/行吗？具体如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T09:19:36.027

我的方法（并且有效）：是将您的库从“obj/local/armeabi/”手动复制到“libs/armeabi/”，然后创建您的 apk（使用 ant 调试）。

# javascript - Load jquery cycle on ajax loaded content

> ID：12904352
> 
> 赞同：0
> 
> 时间：2012-10-15T21:31:52.027
> 
> 标签：javascript, jquery, html, ajax

I'm trying to load the plugin Jquery Cycle on an ajax loaded content, but I get this error and it doesn't seem to work:

"[cycle] terminating; zero elements found by selector "

This is the loader.js:

```
$(document).ready(function(){

// load home when the page loads
$("#content").load("home.html", function(){
  $(this).fadeIn("slow");
});

// load artworks page
$("#artworks > a").click(function(){
    $("#content").hide();
    $("#content").load("artworks.html", function(){
        $(this).fadeIn("slow");
    });
});

    // load projects page
    $("#artworks ul li a").click(function(){
        $("#content").hide();
        $("#content").load("project.html", function(){
            $(this).fadeIn("slow");
        });
    });

    // load single project page         
    $("#project_page").live("click", function(){
        $("#content").hide();
        $("#content").load("project.html", function(){
            $(this).fadeIn("slow");
        });
    });

        // load single project page         
        $("#project_slider").live("click", function(){
            $("#content").hide();
            $("#content").load("project_inside.html", function(){
                $(this).fadeIn("slow");
            });
        });

        // back to projects page        
        $(".back").live("click", function(){
            $("#content").hide();
            $("#content").load("project.html", function(){
                $(this).fadeIn("slow");
            });
        }); 

// load prensa page
$("#prensa_nav").click(function(){
    $("#content").hide();
    $("#content").load("prensa.html", function(){
      $(this).fadeIn("slow");
    });
});

// load contacto page
$("#contacto_nav").click(function(){
    $("#content").hide();
    $("#content").load("contacto.html", function(){
      $(this).fadeIn("slow");
    });
}); 

// SIDEBAR MENU

// Add class of drop if item has sub-menu
$('ul.submenu').hide().parent('li').addClass('drop');

// open submenu
$('.drop').click(function(){
   $('.submenu',this).slideToggle();
});

//hide submenu when you click other main items            
 $('#menu>li').click(function(){
     if(!$(this).hasClass('active')){
         $('.active .submenu').slideUp();
     }
});

//hide submenu when you click other main items -diego           
 $('#menu li#prensa_nav').click(function(){
     if(!$(this).hasClass('active')){
         $('.submenu').slideUp();
     }
});

//hide submenu when you click other main items -diego           
 $('#menu li#contacto_nav').click(function(){
     if(!$(this).hasClass('active')){
         $('.submenu').slideUp();
     }
});

// active menu item    
$('#menu li').click(function(event) {
    $('#menu li').removeClass('active');
    $(this).addClass('active');      
    event.stopPropagation();
});

// active menu item -diego  
$('#menu li ul li').click(function(event) {
    $('#menu li#artworks ').addClass('active');     
    event.stopPropagation();
});  

});

$(window).load(function() {

// Slider  
$("#slideshow").css("overflow", "hidden");

$("ul#slides").cycle({
    fx: 'fade',
    pause: 1,
    prev: '#prev',
    next: '#next'
    });

$("#slideshow").hover(function() {
    $("ul#nav").fadeIn();
},

function() {
    $("ul#nav").fadeOut();
});

}); 
```

Here it's the plugin: [http://malsup.github.com/jquery.cycle.all.js](http://malsup.github.com/jquery.cycle.all.js)

How can I fix this error to load the plugin?

i'm following this tutorial where it does that way... also I did it with a clean HTML and it worked!! the problem is when I integrate it with the ajax loaded content: [http://line25.com/tutorials/build-a-simple-image-slideshow-with-jquery-cycle](http://line25.com/tutorials/build-a-simple-image-slideshow-with-jquery-cycle)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:34:50.150

Why don't you just do `$("#slides")`? You should only have one element with an ID of "slides" on your page. If you need to select multiple objects, consider using a css class and then select with `$('.class-name')`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T21:42:33.463

I think the problem is that you're trying to initialize the cycle on an empty list, before the data is loaded into the list via AJAX. You should, instead, initialize the cycle after the data is injected into the DOM as list items:

```
$('#content').load('home.html', function(){
    $("ul#slides").cycle({
        fx: 'fade',
        pause: 1,
        prev: '#prev',
        next: '#next'
    });
}); 
```

# python - Minecraft 用 Python 发送数据包时登录错误的时间过长

> ID：12904353
> 
> 赞同：0
> 
> 时间：2012-10-15T21:31:55.570
> 
> 标签：python, sockets, packet, minecraft

好的，这基本上是我的代码：

```
class Server:
    def __init__(self, addr, port, mc):
        self.mc = mc
        data = {'user': mc.user, 'password': mc.pswd, 'version': '12'}
        data = urllib.urlencode(data)
        dta = urllib.urlopen("https://login.minecraft.net", data=data).read()
        dta = dta.split(":")
        self.sessionid = dta[3]
        self.socket = socket.socket()
        self.socket.connect((addr, port))
        data = {"user": mc.user, "host": addr, "port": port}
        enc = mc.user.encode('utf-16BE')
        structfmt = '!bh'
        bytes = struct.pack(structfmt, 2, len(enc))
        bytes = bytes + enc
        self.socket.send(self.get_login_packet(mc.user, mc.pswd, addr, port))
        self.random = False
        self.world = World()
    def test(self):
        self.socket.send(self.get_chat_packet(raw_input("Enter a message: ")))
        self.disconnect(raw_input("Enter the disconnect message: "))
    def keep_alive(self):
        if self.random:
            self.socket.send(struct.pack("!bi", 0, self.random))
    def get_login_packet(self, user, password, addr, port):
        data = {"user": mc.user, "host": addr, "port": port}
        enc = mc.user.encode('utf-16BE')
        structfmt = '!bh'
        bytes = struct.pack(structfmt, 2, len(enc))
        bytes = bytes + enc
        return bytes
    def get_chat_packet(self, message):
        if len(message) > 100:
            message = message[:100]
        return struct.pack("!bs", 3, message)
    def get_disconnect_packet(self, message):
        return struct.pack("!bs", 0xFF, message)
    def disconnect(self, message):
        self.socket.send(self.get_disconnect_packet(message))
        time.sleep(0.1)
        self.socket.close() 
```

mc 是 python 中的一个 Minecraft 实例，它基本上有 4 个属性，server（上面的类）、user、pswd 和 world（现在是 None 类型）。

我不是在尝试连接到 Minecraft Classic，而是在尝试连接到付费版本。我在 Windows XP 上使用 Python 2.5。当我尝试在服务器上连接时它给我的错误是

```
[INFO] Disconnecting /127.0.0.1:2292: Took too long to log in
[INFO] /127.0.0.1:2295 lost connection 
```

Python上的错误是

```
 self.socket.send(self.get_chat_packet(raw_input("Enter a message: ")))
socket.error: (10053, 'Software caused connection abort') 
```

请告诉我为什么会发生这种情况，最好也告诉我如何解决它。谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-15T21:55:04.700

您的代码很糟糕，并且您将无法使用这样的代码以有用且相对有效的方式实现所有数据包。看看例如[mc3p](https://github.com/sadimusi/mc3p)协议是如何实现的。

现在对于您的问题，您没有随数据包发送协议版本（对于我的世界 1.3 为 39），`Handshake`数据包也没有发送，也`host`没有`port`发送。

# java - 通过for循环在Arraylist中显示对象的各个元素？

> ID：12904354
> 
> 赞同：0
> 
> 时间：2012-10-15T21:32:00.570
> 
> 标签：java, object, for-loop, arraylist

我正在尝试显示我创建的对象的各个元素。

它是一个简单的 Java 程序，允许用户添加和跟踪播放器详细信息。

在添加细节后显示细节时，我感到很困惑。这是我的代码的样子

我可以使用案例 2 创建对象并将其输入到数组列表中没有问题，但是当我尝试将其打印出来时，我想做类似的事情

```
System.out.println("Player Name" + myPlayersArrayList.PlayerName + "Player Position" + myPlayerArrayList.PlayerPosition + "Player Age" + "Player Age"); 
```

我知道这是不正确的，但我真的不知道该怎么做，如果有人可以提供任何帮助，将不胜感激。谢谢

```
System.out.println("Welcome to the Football Player database");
 System.out.print(System.getProperty("line.separator"));

     UserInput myFirstUserInput = new UserInput();
    int selection;
            ArrayList<Player> myPlayersArrayList = new ArrayList<Player>();

            while (true) {

                System.out.println("1\. View The Players");
                System.out.println("2\. Add A Player");
                System.out.println("3\. Edit A Player");
                System.out.println("4\. Delete A Player");
                System.out.println("5\. Exit ") ;
                System.out.print(System.getProperty("line.separator"));

                selection = myFirstUserInput.getInt("Please select an option");
                System.out.print(System.getProperty("line.separator"));
                switch(selection){

        case 1: 

                        if (myPlayersArrayList.isEmpty())
                                    {
                        System.out.println("No Players Have Been Entered Yet");
                        System.out.print(System.getProperty("line.separator"));
                        break;}

                        else 
                        {for(int i = 0; i < myPlayersArrayList.size(); i++){
                            System.out.println(myPlayersArrayList);

        }
                    break;

                    case 2:  {

                        String playerName,playerPos;
                        int playerAge;

                                playerName = (myFirstUserInput.getString("Enter Player name"));
                                playerPos = (myFirstUserInput.getString("Enter Player Position"));
                                playerAge = (myFirstUserInput.getInt("Enter Player Age"));   

                                myPlayersArrayList.add(new Player(playerName, playerPos, playerAge));   ;
                                                        break;
                    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T21:35:00.817

您需要使用索引来访问单个元素：-

```
for(int i = 0; i < myPlayersArrayList.size(); i++){
    System.out.println(myPlayersArrayList.get(i));
} 
```

然后你可以在你的类中覆盖`toString()`方法`Player`

```
public String toString() {
    return playerName + " : " + playerAge + " : " + playerPosition;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T21:33:46.780

> 我可以使用案例 2 创建对象并将其输入到数组列表中没有问题，但是当我尝试将其打印出来时，我想做类似的事情

```
System.out.println("Player Name" + myPlayersArrayList.PlayerName + "Player Position" + myPlayerArrayList.PlayerPosition + "Player Age" + "Player Age"); 
```

> 我知道这是不正确的，但我真的不知道该怎么做，如果有人可以提供任何帮助，将不胜感激。谢谢

* * *

只需覆盖`toString()`方法即可获得所需的输出

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T22:41:33.713

A`List`是元素的集合。提供了许多有用的`List`方法来管理它，`add`, `remove`, `set`, `indexOf`,`contains`最重要的是，在这种情况下，`get`.

为了操作列表中的元素，您首先需要从列表中“获取”或检索它。

`List`are [`Iterable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html)，这意味着您不需要使用索引`for`循环来访问各种成员（除非索引很重要）。

所以你可以做...

```
for(int i = 0; i < myPlayersArrayList.size(); i++){
    Player player = myPlayersArrayList.get(i);
    // display results
} 
```

或者

```
for (Player player : myPlayersArrayList) {
    // display results
} 
```

要显示`Player`对象的内容，您可以执行许多不同的操作...

您可以简单地显示的各种属性`Player`（我无权访问您的`Player`类，所以我猜测它的属性）

```
System.out.println("Player Name: " + player.PlayerName + "; Player Position: " + player.PlayerPosition + "Player Age: " + player.PlayerAge); 
```

或者您可以编写一个“格式化程序”方法。这对类来说可能是静态的，`Player`也可能是实用程序类的一部分，具体取决于您的需要

```
System.out.println(PlayerUtils.format(player)); // Format the player properties as you see fit 
```

或者，正如已经建议的那样，您可以`toString`覆盖`Player`

```
System.out.println(player); 
```

所有这些方法都有优点和缺点。

我倾向于将诊断信息放入我的`toString`方法中，这通常对向用户显示没有用处。格式化程序对其他开发人员来说并不总是显而易见的（除非他们有充分的文档记录；））。

您将需要选择对您和您的需求最有用的那些。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-14T11:38:09.917

您还可以`forEach`在 Java 8 中使用：

```
List<String> myPlayersArrayList = new ArrayList<>();
myPlayersArrayList.stream().forEach((player) -> {
    System.out.println("Player: " + player); //Override toString() in Player class
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T21:40:17.843

您也可以使用“for-each”循环。这是语法：

```
for(Class object : collectionOfObjects){
    //this will loop through the list for you and
    //now you can access each object in the list 
    //using object.property or object.method()
}

//using your example
for(Player player: myPlayersArrayList){
    System.out.println(player); //requires override of toString() method

    //or you could use
    System.out.println(player.getName());
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-15T21:42:33.430

如果您只想在添加后立即显示数据，您可以声明一个 Player 引用并使其指向您添加到列表中的对象，如下所示：

```
Player p = new Player(playerName, playerPos, playerAge);
myPlayersArrayList.add(p);
System.out.println("Player Name" + p.PlayerName + "Player Position" + p.PlayerPosition + "Player Age" + p.playerAge); 
```

然而，直接访问对象的属性在 OOP 环境中是非常不受欢迎的，因此您应该通过 get 方法检索它们。例如，要获取玩家姓名，这就足够了：

```
public String getPlayerName(){
    return playerName;
} 
```

如果你想稍后打印数据，也许你应该看看迭代器模式。

# xaml - Windows 8 应用程序。后退按钮不起作用

> ID：12904355
> 
> 赞同：1
> 
> 时间：2012-10-15T21:32:02.113
> 
> 标签：xaml, windows-8, microsoft-metro

我正在使用带有应用程序名称和后退按钮的新项目基本模板。它正在“空白”项目中使用。

但是，后退按钮不响应触摸事件。

以下是生成的代码。后退按钮就消失了。

```
<Button x:Name="backButton" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}" Click="GoBack"/> 
```

我什至尝试制作自己的 Click Handle 并尝试自己导航。

```
this.Frame.Navigate(typeof(MainPage)); 
```

但是，这也不起作用。可能是由于自动生成的东西，因为我可以自己创建一个按钮并将其连接起来（所以我真的很想坚持使用模板）。

请问有什么想法吗？

编辑：我觉得很奇怪，导航都没有工作。在钻了一些之后，它似乎是 LayoutAwarePage 的东西。我在这里遗漏了一些东西。将发布更新。

编辑：对此感到抱歉。我重新添加了事件单击侦听器（我必须删除该复制）。但是，这仍然不能解决我的问题。我尝试将后退按钮设置为“GoBack”功能，当您按下后退按钮时，它就会消失。我还尝试创建自己的方法并尝试自己导航，但仍然没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-16T01:14:10.197

您需要`Click`按钮上的事件处理程序。`Click="GoBack"`

```
<Button x:Name="backButton" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}"/> 
```

`GoBack`功能可用，`LayoutAwarePage`其中很可能是您页面的基类，如果不确定的话。`LayoutAwarePage`类驻留在里面`Project\Common`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-16T00:43:18.810

从我看到的 XAML 标记中，没有`Click`与按钮绑定的事件处理程序，因此除非您将其挂接到一个，否则不会执行任何操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-16T16:07:25.270

您不需要编写任何自己的代码来启用后退按钮，因为它会自动绑定到底层导航框架。如果后退堆栈中有要导航到的页面，则后退按钮将被启用。

从我所见，您所缺少的是，如果您在添加的基本页面上启动应用程序，则导航框架的后台堆栈中没有任何内容可供您导航到。

我使用以下步骤测试了您的场景：

1.  我使用空白应用模板创建了一个新的 C#/XAML Windows 应用商店应用。
2.  然后添加了一个新的基本页面 (BasicPage1.xaml)。
3.  打开 MainPage.xaml，并在页面中添加了一个 Button。
4.  双击该按钮，并将以下代码添加到单击事件处理程序：

    this.Frame.Navigate(typeof(BasicPage1));

运行项目，后退按钮按预期工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-16T16:48:49.853

好吧，这种方法似乎从 Basic 页面获取代码。您能否确认您是从 LayoutAwarePage 继承而不是从 Page 继承？否则 GoBack 不会以这种方式实现。此外，如果您首先没有从该页面导航，则无法从另一个页面导航。最后（这里只是集思广益），如果您通过设置 Frame 本身而不是页面（在以前的位置）到达此页面，则无法返回。这将清除导航历史记录。

而且，你能确认这不起作用吗？

```
this.Frame.GoBack(); 
```

祝你好运！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-11T09:09:50.237

我让我的后退按钮是这样的：

XAML 代码。在这种情况下，LoginPage.xaml。

`<Button x:Name="ButtonGoBack" Click="ButtonGoBack_OnClick" Style="{StaticResource NavigationBackButtonNormalStyle}"/>`

LoginPage.xaml.cs 中的 C# 代码

```
private void ButtonGoBack_OnClick(object sender, RoutedEventArgs e)
    {
        this.Frame.GoBack();
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-08T00:08:20.667

我刚遇到和弗兰克一样的问题。我发现我的问题是我重写了 OnNavigatedTo 处理程序，而没有调用基类的 (LayoutAwarePage) 处理程序。这意味着 LayoutAwarePage 没有设置它在 OnNavigatedFrom 处理程序中使用的 _pageKey 成员变量。

希望这可以帮助其他有同样问题的人。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-08T23:16:38.563

这也发生在我身上。我知道我的代码没有任何改变，所以我检查了项目属性。在 Common Properties->References 我注意到一个异常，有一些资源从未存在过，（我在那个项目中应该拥有的只是用于 Windows RunTime 的 SQLite）。然后我删除了不需要的资源并修复了导航问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-06-19T12:44:38.333

如果你用过

```
Frame.SetNavigationState("1,0"); 
```

您删除了后退堆栈条目，因此后退按钮将不起作用。

# c - libsndfile Windows 7

> ID：12904357
> 
> 赞同：2
> 
> 时间：2012-10-15T21:32:10.193
> 
> 标签：c, dll

我正在尝试使用 MinGW 在 Windows 7 机器上编译 C 程序。现在我不得不承认，我一开始并没有太多的 C 经验，而且由于不是一个非常熟练的 Windows 用户，情况更加复杂。

该程序附带了一个make文件，但由于我收到错误消息而卡住了：

> 找不到 -lsndfile

我发现 sndfile 是一个用于读取 .wav 文件等的声音库。[我从http://www.mega-nerd.com/libsndfile](http://www.mega-nerd.com/libsndfile)下载了库并运行了它附带的安装程序可执行文件。这会将一些头文件和其他垃圾放在 C 驱动器上的 Programs 文件夹中。

我将头文件复制到 MinGW 目录下的 include 文件夹中，这将许多早期错误减少到您在上面看到的错误。我想我需要在某个地方放置一个 .dll 文件，但不确定在哪里。

如果需要，我可以提供更多细节，因为我不太确定问题出在哪里。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:53:05.087

您必须将可链接库文件（.a、.lib 或 .dll）与其他（MinGW 默认提供）一起放置。

# php - Drupal：使用自定义 tpl 和变量创建块（渲染数组）

> ID：12904365
> 
> 赞同：0
> 
> 时间：2012-10-15T21:33:01.393
> 
> 标签：php, drupal, drupal-7

## 目标：

*   我想创建一个块。
*   我希望块有一个 tpl 文件。
*   我想将一个数组传递给 tpl，以便轻松编辑“我不知道 php”。

在 tpl 我想：

```
print render($content['something']); 
```

...而不是一次打印（渲染）整个内容：

```
print $content; 
```

## 到目前为止的方法：

*   实施 hook_block_info。
*   实现 hook_block_view 并将 $block['content'] 设置为返回可渲染数组的函数。
*   创建正确的 block_ .tpl 文件并打印 $content['something']。
*   错误 ：（

现在，我可以通过实现 hook_theme 来完成这项工作，但我希望只使用默认的 block_.tpl。难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T21:48:56.247

在 .tpl 你可以这样做：

```
print render($elements['something']); 
```

小！

# django - 使用replace生成javascript代码，django

> ID：12904369
> 
> 赞同：0
> 
> 时间：2012-10-15T21:33:30.133
> 
> 标签：django, replace, highcharts

我想在我的 django 网站上使用 highcharts，但它需要一个复杂的 javascript 代码，如下所示。所以我想在我的python代码中获取这个脚本并替换适当的部分，然后将它写在我的模板中，第一个问题是，对于不了解javascript的人来说，这是一种转储方式吗？我可以读得很艰难。

第二个问题是，为什么我不能替换这个字符串。可以说这个字符串是这样的变量。

lineChartsTemplate = """

...

...

"""

如果我尝试去做

lineChartsTemplate .replace('dataCategory', dataCategory)

它基本上应该用我的 dataCategory 变量更改 dataCategory 文本，但没有这样的运气。

我需要这里的指导。谢谢。

```
$(function () { 
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        type: 'bar'
    },
    xAxis: {
        categories: dataCategory
    },
    yAxis: {   
    },
    legend: {
        layout: 'vertical',
        floating: true,
        backgroundColor: '#FFFFFF',
        align: 'right',
        verticalAlign: 'top',
        y: 60,
        x: -60
    },
    tooltip: {
        formatter: function() {
            return '<b>'+ this.series.name +'</b><br/>'+
                this.x +': '+ this.y;
        }
    },
    plotOptions: {
    },
    series: [{
        data: dataList ,      
        name : 'Satışlar'}]
});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T22:05:33.717

我认为你能做的最好的就是使用 django 模板系统来实现你需要的那种替换。

如果你在你的模板中加入这样的东西。

```
$(function () { 
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        type: 'bar'
    },
    xAxis: {
        categories: {{ dataCategory }}
    },
    yAxis: {   
    },
    legend: {
        layout: 'vertical',
        floating: true,
        backgroundColor: '#FFFFFF',
        align: 'right',
        verticalAlign: 'top',
        y: 60,
        x: -60
    },
    tooltip: {
        formatter: function() {
            return '<b>'+ this.series.name +'</b><br/>'+
                this.x +': '+ this.y;
        }
    },
    plotOptions: {
    },
    series: [{
        data: dataList ,      
        name : 'Satışlar'}]
});
}); 
```

然后你可以用类似的东西替换 dataCategory

```
return render_to_response(
    "template_with_embedded_js",
    {'dataCategory': dataCategory},
    RequestContext(request)) 
```

# cqrs - 事件溯源：在更新模型之前或之后写入事件

> ID：12904371
> 
> 赞同：0
> 
> 时间：2012-10-15T21:33:37.327
> 
> 标签：cqrs, event-sourcing

我正在推理事件溯源，并且经常遇到先有鸡还是先有蛋的问题。将不胜感激有关如何对此进行推理的一些提示。

如果我执行所有 I/O 绑定处理异步（即写入事件日志），那么我如何处理，有时甚至检测失败？

我正在使用 Akka Actors，因此每个事件/消息的处理都是顺序的。我目前没有任何数据库，而是将所有事件保存在事件日志中，然后将所有事件的聚合状态保存在内存中的模型中。查询都是针对这个模型的，你可以认为它是一个缓存。

例子

创建新用户：

1.  验证用户在模型中不存在
2.  将事件持久化到日志
3.  更新模型（在内存中）

如果第 3 步中断，我仍然坚持我的活动，以便以后重播。如果第 2 步中断，我也可以优雅地处理它。

这很好，*但是由于第 2 步是 I/O 绑定的，我认为我应该在单独的参与者中执行 I/O 以释放第一个参与者进行查询*：

在允许查询的同时更新用户（A0 = 前端/GUI 参与者，A1 = 处理器参与者，A2 = IO 参与者，E = 事件总线）。

1.  (A0->E->A1) 发布事件以更新用户“U1”。验证用户“U1”是否存在于模型中
2.  （A1->A2）将事件持久化到日志（单独的参与者）
3.  (A0->E->A1->A0) 查询用户 'U1' 个人资料
4.  (A2->A1) 事件现在持续更新模型
5.  (A0->E->A1->A0) 查询用户“U1”个人资料（现在返回新数据）

这很吸引人，因为查询可以在 I/O 以自己的节奏进行的同时进行处理。

但是现在我可以给自己造成各种问题，我可以将两个不兼容的命令（删除然后更新）持久化到事件日志中，并在以后重播时崩溃，因为我在持久化事件之前进行了验证然后更新模型。

我的目标是围绕我的模型进行简单的推理（因为 Actor 按单线程顺序处理消息），但在查询时不等待 I/O 绑定更新。我觉得我正在建模一个数据库，这本身可能是一个问题。

如果事情不清楚，请写评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T02:06:30.467

异步 I/O 可以与事务更新共存。如果你在命令之后发送一个“ACK”或“NACK”，那么你就可以了解它是否发生了。在分布式或真正异步的模型中，“NACK”很可能来自显式故障和超时。

# sql-server-2008 - 删除 where 子句然后添加回来时的执行计划优化

> ID：12904376
> 
> 赞同：0
> 
> 时间：2012-10-15T21:34:00.333
> 
> 标签：sql-server-2008, sql-optimization, sql-execution-plan

我有一个使用表值函数的存储过程，该函数在 9 秒内执行。如果我更改表值函数并删除 where 子句，则存储过程将在 3 秒内执行。如果我添加 where 子句，查询仍会在 3 秒内执行。

我查看了执行计划，似乎在删除 where 子句后，执行计划包括并行性，并且我的 2 个表的扫描计数从 50000 和 65000 下降到 5 和 3。添加 where 子句后回来，优化的执行计划仍然运行，除非我运行 DBCC FREEPROCCACHE。

问题 1\. 为什么只有在我第一次删除 where 子句时，SQL Server 才会开始对两个查询都使用优化的执行计划？

1.  有没有办法强制 SQL Server 使用这个执行计划？

此外，这是一个参数化的一体式查询，它在 where 子句中使用 (Parameter is null or Parameter)，我认为这对性能不利。

```
RETURNS TABLE 
AS
RETURN 
(
SELECT  TOP (@PageNumber * @PageSize)
                CASE
                    WHEN @SortOrder = 'Expensive' THEN ROW_NUMBER()     OVER (ORDER BY SellingPrice DESC)
                WHEN @SortOrder = 'Inexpensive' THEN ROW_NUMBER() OVER (ORDER BY SellingPrice ASC)                  
                WHEN @SortOrder = 'LowMiles' THEN ROW_NUMBER() OVER (ORDER BY Mileage ASC)
                WHEN @SortOrder = 'HighMiles' THEN ROW_NUMBER() OVER (ORDER BY Mileage DESC)
                WHEN @SortOrder = 'Closest' THEN ROW_NUMBER() OVER (ORDER BY P1.Distance ASC)       
                WHEN @SortOrder = 'Newest' THEN ROW_NUMBER() OVER (ORDER BY [Year] DESC)    
                WHEN @SortOrder = 'Oldest' THEN ROW_NUMBER() OVER (ORDER BY [Year] ASC)                     
                ELSE ROW_NUMBER() OVER (ORDER BY InventoryID ASC)
            END as rn,
            P1.InventoryID,
            P1.SellingPrice,
            P1.Distance,
            P1.Mileage,
            Count(*) OVER () RESULT_COUNT,
            dimCarStatus.[year]
    FROM    (SELECT InventoryID, SellingPrice, Zip.Distance, Mileage, ColorKey, CarStatusKey, CarKey FROM facInventory
                JOIN @ZipCodes Zip
                ON   Zip.DealerKey = facInventory.DealerKey) as P1
    JOIN    dimColor
            ON dimColor.ColorKey = P1.ColorKey
    JOIN    dimCarStatus
            ON dimCarStatus.CarStatusKey = P1.CarStatusKey  
    JOIN    dimCar
            ON dimCar.CarKey = P1.CarKey                        
    WHERE
            (@ExteriorColor is NULL OR dimColor.ExteriorColor like @ExteriorColor) AND
            (@InteriorColor is NULL OR dimColor.InteriorColor like @InteriorColor) AND
            (@Condition is NULL OR dimCarStatus.Condition like @Condition) AND
            (@Year is NULL OR dimCarStatus.[Year] like @Year) AND
            (@Certified is NULL OR dimCarStatus.Certified like @Certified) AND
            (@Make is NULL OR dimCar.Make like @Make) AND
            (@ModelCategory is NULL OR dimCar.ModelCategory like @ModelCategory) AND    
            (@Model is NULL OR dimCar.Model like @Model) AND
            (@Trim is NULL OR dimCar.Trim like @Trim) AND
            (@BodyType is NULL OR dimCar.BodyType like @BodyType) AND
            (@VehicleTypeCode is NULL OR dimCar.VehicleTypeCode like @VehicleTypeCode) AND
            (@MinPrice is NULL OR P1.SellingPrice >= @MinPrice) AND
            (@MaxPrice is NULL OR P1.SellingPrice < @MaxPrice) AND
            (@Mileage is NULL OR P1.Mileage < @Mileage)
    ORDER   BY
            CASE
                WHEN @SortOrder = 'Expensive' THEN -SellingPrice
                WHEN @SortOrder = 'Inexpensive' THEN SellingPrice 
                WHEN @SortOrder = 'LowMiles' THEN Mileage
                WHEN @SortOrder = 'HighMiles' THEN -Mileage
                WHEN @SortOrder = 'Closest' THEN P1.Distance        
                WHEN @SortOrder = 'Newest' THEN -[YEAR]
                WHEN @SortOrder = 'Oldest' THEN [YEAR]                  
                ELSE InventoryID 
            END
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T13:35:41.460

问题1：SQL server 仍然继续使用没有where 子句的执行计划valid for statement。基本上 SQL Server 认为 where 子句不存在。

问题 2：使用 OPTION (USE PLAN N'') 文章：[http ://technet.microsoft.com/en-us/library/cc917694.aspx](http://technet.microsoft.com/en-us/library/cc917694.aspx)

个人推荐：

1.  更改查询，使您至少拥有一个强制过滤器并将其编入索引。或者
2.  将其更改为动态，并动态应用过滤器。文章：http: [//msdn.microsoft.com/en-us/library/ms188001.aspx](http://msdn.microsoft.com/en-us/library/ms188001.aspx)

希望这可以帮助。

# haskell - Haskell 中的 SOAP Web 服务？

> ID：12904377
> 
> 赞同：33
> 
> 时间：2012-10-15T21:34:10.460
> 
> 标签：haskell, soap, wsdl, rpc

我必须编写一堆小型 Web 服务。它们必须由 WSDL 定义并通过 SOAP-RPC 工作，以便与现有的工作流引擎和服务注册框架一起工作。但是，我可以在我选择的服务堆栈/平台上为它们提供服务。

我目前正在用 Java 编写它们，而且还不错。但我想如果我能够在 Haskell 中编写这些服务，我的生活可能会更轻松。在谷歌上搜索，似乎曾几何时，其他人也有同样的想法，并开始了一个名为“HAIFA”的项目。但是，看起来 HAIFA 已经好几年没有维护了，而且我找不到任何其他框架支持将用 Haskell 编写的服务提供为 SOAP Web 服务。

有谁知道任何其他允许我使用 Haskell 轻松编写基于 SOAP 的 Web 服务的框架？

如果没有，是否有人手动完成此操作（即，使用来自 hackage 的 XML 库来处理传入的soap-rpc 请求，并创建符合soap-rpc 的回复）？做起来难吗？有什么陷阱吗？值得付出努力吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T17:33:10.323

由于现在 HAIFA 已死，因此 Haskell 中没有等效的 SOAP Web 服务框架。所以我建议你使用一些框架。可能是 Yesod + shoap 会合适。我认为 Haskell 中 SOAP WS 框架领域的这种趋势是因为平滑过渡到 REST/JSON 技术。也可能这两篇文章对你有用 [http://www.cin.ufpe.br/~haskell/hwsproxygen/files/HWSProxyGen.pdf](http://www.cin.ufpe.br/~haskell/hwsproxygen/files/HWSProxyGen.pdf) 和 [http://www.jofcis.com/publishedpapers/2010_6_9_2859_2867.pdf](http://www.jofcis.com/publishedpapers/2010_6_9_2859_2867.pdf)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-31T23:35:54.463

如果您只需要发送普通的 XML/SOAP 消息，那么您可能只需要打开连接并读/写 Aeson。但是如果 SOAP 服务需要 WS-Security、WS-Addressing 等支持，最好还是使用现有的框架。例如：[https ://metro.java.net/](https://metro.java.net/)

免责声明：我参与了 Metro。

不过，在 Haskell 中有一个 SOAP 框架会很棒。

# .net - Entity Framework 当前是否支持 Where 子句中的自定义函数？

> ID：12904378
> 
> 赞同：0
> 
> 时间：2012-10-15T21:34:11.347
> 
> 标签：.net, entity-framework

`where`实体框架目前支持 SSDL 中定义的表值函数和自定义函数，但我在子句中找不到任何将其用作条件的示例。

例子：

```
var query = this.db.People;
query = query.Where(p => FullText.ContainsInName(p.Id, "George")); 
```

在此示例中，`ContainsInName`是我希望在`where`查询子句中执行的自定义函数。

是否支持？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T21:39:19.353

它不支持这样的功能。也就是说，如果您只是想查看是否`p.Id`在您发送的某个字符串中，您可以这样做：

`query.Where(p => "George".Contains(p.Id));`

注意`String.Contains`取一个`string`or`char`来比较。如果`p.Id`是`int`，您可以这样做：

`query.Where(p => "George".Contains(p.Id.ToString()));`

这将在数​​据库级别运行查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T03:44:10.350

1.  找出你的模式命名空间。在 XML 编辑器中打开 .edmx，您会在顶部找到类似这样的内容

    ```
    `<Schema Namespace="My.Project.Name.Store" Alias="Self" Provider="System.Data.SqlClient" ProviderManifestToken="2008" xmlns:store="http://schemas... 
    ```

2.  将您的函数导入架构。

3.  使用静态函数创建静态类

    ```
    public static class FullText
    {
        [EdmFunction("My.Project.Name.Store", "ContainsInName")]
        public static bool ContainsInName(int Id, string Name)
        {
            throw new NotImplementedException("You can only call this method as part of a LINQ expression");
        }
    } 
    ```

然后像在你的例子中一样使用它:)

不确定在`where`子句中使用表值函数。

# jquery - 检查 URL 中的重复项

> ID：12904383
> 
> 赞同：0
> 
> 时间：2012-10-15T21:34:35.413
> 
> 标签：jquery, duplicates

> **可能重复：**
> [检查 URL 是否包含我已经点击的链接的 href](https://stackoverflow.com/questions/12903961/check-if-url-contains-href-of-link-i-already-clicked)

我的一些 URLS 导致了这个：

```
mydomain.com/t-shirts+white+white 
```

有没有办法过滤掉？？？

查询：

```
$('#coll-filter li a').one('click', function () {
  jQuery(this).attr("href", window.location.href  + '+' +$(this).attr('href'));
    jQuery('#coll-filter li a').each(function() { 
       if (window.location.href.indexOf($(this).attr('href')) != -1) {
             alert("no")
         }

    });

 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:48:42.817

这将删除重复的过滤器：

```
function removeDupFilters(str) {
    var pos = str.search(/\/.*?$/), path, items, map = {}, i;
    if (pos !== -1) {
        path = str.substr(pos + 1);
        items = path.split("+");
        for (i = 0; i < items.length; i++) {
            map[items[i]] = true;
        }
        items = [];
        for (i in map) {
            items.push(i);
        }
        return str.substr(0, pos + 1) + items.join("+");
    }
    return str;
} 
```

工作演示：http: [//jsfiddle.net/jfriend00/ntb8f/](http://jsfiddle.net/jfriend00/ntb8f/)

在您的代码中使用它，它将是：

```
$('#coll-filter li a').one('click', function (e) {
    var url = removeDupFilters(window.location.href + '+' + $(this).attr('href'));
    if (url !== window.location.href) {
        // go to the new URL
        window.location.href = url;
    }
    e.preventDefault();
}); 
```

或者，您可以直接检查当前 URL，而不使用这样的函数：

```
$('#coll-filter li a').one('click', function (e) {
    var filter = $(this).attr('href');
    var re = new RegExp("/|\\+" + filter + "$|\\+", "i");
    if (!re.test(window.location.href)) {
        // go to the new URL
        window.location.href = window.location.href + "+" + filter;
    }
    e.preventDefault();
}); 
```

# servicehost - 需要根据数据库信息设置服务行为的自定义ServiceHost

> ID：12904388
> 
> 赞同：1
> 
> 时间：2012-10-15T21:34:47.253
> 
> 标签：servicehost

我创建了一个自定义服务主机并且覆盖`ApplyConfiguration()`效果很好，但我找不到添加服务行为的方法。
所有服务模型都从配置文件中删除，并从数据库中获取设置。
端点工作得很好。
服务行为是一种痛苦。我试图添加一个`ServiceBehaviorElement`，`System.ServiceModel.Configuration.BehaviorsSection`但它是只读的，我无法解决这个问题。
我尝试只将行为添加到`servicehost.Description`，但我无法在其中添加完整的行为元素，一个具有 Name 属性的元素，并且我可以在其中添加一组行为。

任何帮助都会很棒。

# asp.net - 如何使用 ASP.NET 复选框隐藏 div？

> ID：12904394
> 
> 赞同：1
> 
> 时间：2012-10-15T21:35:07.047
> 
> 标签：asp.net, html, checkbox, hide

我正在尝试将方法分配给复选框标记上的事件，如下所示：

```
 OnCheckedChanged="ShowDiv" 
```

但是，我一点也不成功。怎么做？这是我的方法：

```
 public void ShowDiv(object sender, System.EventArgs e) 
    {
        var div = FindControl("ListaEmOutrosDocumentos") as HtmlGenericControl;
        var checkbox = FindControl("Principal") as CheckBox;

        if(checkbox.Checked == true)
        {
            div.Style.Clear();
            div.Style.Add("display","block");
        }
        else
        {
            div.Style.Clear();
            div.Style.Add("display","none");
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T21:39:47.023

您可能会考虑使用 ASP.NET`Panel`控件而不是`div`. 这将具有您可以设置的 Visible 属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T21:45:28.793

我这样做了，它奏效了。

```
<div id="ListaEmOutrosDocumentos" runat="server">
            <asp:CheckBox runat="server" ID="Principal" AutoPostBack="True" OnCheckedChanged="ShowDiv"/>
        </div> 
```

代码背后

```
public void ShowDiv(object sender, System.EventArgs e)
    {
        var div = ListaEmOutrosDocumentos as HtmlGenericControl;
        var checkbox = sender as CheckBox;

        if (checkbox.Checked == true)
        {
            div.Style.Clear();
            div.Style.Add("display", "block");
        }
        else
        {
            div.Style.Clear();
            div.Style.Add("display", "none");
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T04:42:44.167

仅使用服务器端代码的快速方法

象素

```
<div id="myDiv" runat="server" style="height:200px;width:100px;background-color:Blue"></div>
<asp:CheckBox ID="chkShowHideDiv" runat="server" AutoPostBack="True" 
    oncheckedchanged="chkShowHideDiv_CheckedChanged" Text="Hide Div"  /> 
```

背后的代码

```
 protected void chkShowHideDiv_CheckedChanged(object sender, EventArgs e)
{
    myDiv.Visible = chkShowHideDiv.Checked ? false : true;
} 
```

# c# - 在 Windows 8 Metro 应用程序中取消转义 HTML 字符串

> ID：12904395
> 
> 赞同：2
> 
> 时间：2012-10-15T21:35:14.203
> 
> 标签：c#, windows-8, html-parsing

如何在 Windows 8 Metro 应用程序中取消转义 HTML 字符串。

对于我可以使用的常规 C# 应用程序`HttpUtility.HtmlDecode`，但 Metro/Windows RT 框架中没有该类。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T21:42:35.187

您可以使用 `System.Net.WebUtility.HtmlDecode`

# mysql - 当我只想要值 9 时，mysql_fetch_row 返回 Array9

> ID：12904397
> 
> 赞同：-2
> 
> 时间：2012-10-15T21:35:35.310
> 
> 标签：mysql

我试图只使用 mysql_fetch_row 获取计数值，但回显是 Array9，而我只想要 9。

```
 <?php
          $result = mysql_query("SELECT * FROM `product_category` ORDER BY `product_category_name`");
          while($row = mysql_fetch_array($result)) {

              echo '
              <li  class="ui-shadow" data-count-theme="d">
              <a href="' . $row['product_category_ref_page'] . '.php" data-icon="arrow-r" data-iconpos="right">' . $row['product_category_name'] . '</a><span class="ui-li-count">' . 

                $number = mysql_fetch_row(mysql_query("SELECT COUNT(`category_id`) FROM `products_has_product_category` WHERE `category_id`=" . $row['product_category_id'] . ""));
                echo $number[0];

              '</span></li>';
          }

        ?> 
```

将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T23:34:56.463

只是想在另一篇文章中发布我由 Michael Berkowski 给出的解决方案，希望对其他人有所帮助！感谢 Kickstart 为我指明了正确的方向！

```
<?php
          $result = mysql_query("
                        SELECT
                        a.product_category_id, a.product_category_name, a.product_category_ref_page,
                        catcount
                        FROM
                        product_category a
                        LEFT JOIN (
                        SELECT category_id, COUNT(*)  AS catcount
                        FROM products_has_product_category 
                        GROUP BY category_id
                        ) subcount ON a.product_category_id = subcount.category_id
                    ");
          while($row = mysql_fetch_array($result)) {

              echo '
              <li  class="ui-shadow" data-count-theme="d">
              <a href="' . $row['product_category_ref_page'] . '.php" data-icon="arrow-r" data-iconpos="right">' . $row['product_category_name'] . '</a><span class="ui-li-count">' . $row['catcount'] . '</span></li>';
          }

        ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T21:48:28.710

不需要嵌套查询。可以通过 JOIN 来完成，如下所示：-

```
 SELECT a.*, COUNT(b.category_id) AS CatCount
    FROM `product_category` a
    LEFT OUTER JOIN `products_has_product_category` b
    ON a.product_category_id = b.category_id
GROUP BY a.id, a.someothercolumn, a.etc 
```

# axis2 - 用于自定义对象列表的 wsdl2java 代码生成

> ID：12904399
> 
> 赞同：0
> 
> 时间：2012-10-15T21:35:45.390
> 
> 标签：axis2, wsdl2java

我想知道工具“wsdl2java”（Axis2）是否能够生成支持获取自定义对象列表的存根。

例如，如果我有一个具有以下方法的 WS：

```
public List<Device> getDevices(){
//...
} 
```

`Device`自定义类在哪里...

这个工具可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T12:10:33.800

因此，我将 Web 服务的返回数据类型更改为数组：

[http://www.ibm.com/developerworks/webservices/library/ws-tip-coding/index.html](http://www.ibm.com/developerworks/webservices/library/ws-tip-coding/index.html)

而且我必须对生成的存根（我使用 ADB）做一些更改（一些命名空间）......我改变了它，因为它给了我一个`ADBException: Unexpected subelement ...`

# wolfram-mathematica - Mathematica 导出为 avi 向前播放，然后向后播放

> ID：12904400
> 
> 赞同：1
> 
> 时间：2012-10-15T21:35:50.870
> 
> 标签：wolfram-mathematica

我正在对八颗行星的重力场进行建模，并尝试将生成的 ContourPlot 导出为 .avi 文件。问题是 .avi 会向前和向后播放动画，即使我明确告诉 Animate AnimationDirection->Forward。有人知道任何解决方案吗？这是有问题的代码：

```
gfield = Animate[
  ContourPlot[
   Sqrt[Fgravplanets[x, y, t][[1]]^2 + Fgravplanets[x, y, t][[2]]^2],
   {x, -1.5 rp["Neptune"], 1.5 rp["Neptune"]}, {y, -1.5 rp["Neptune"],
     1.5 rp["Neptune"]},
   PlotRange -> {0, 10},
   Mesh -> None,
   ImageSize -> Medium,
   AxesLabel -> {"x", "y", "Fgrav"},
   ColorFunction -> Hue,
   PlotPoints -> 20,
   Contours -> 20
   ],
  {t, 0, 365*24*3600*10, 365*24*3600/10},
  AnimationDirection -> Forward,
  AnimationRate -> 365*24*3600/5
  ]
Export["gfield.avi", gfield] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:37:13.883

只需替换`Animate`为`Table`：

```
gfield = Table[
   ContourPlot[
   Sqrt[Fgravplanets[x, y, t][[1]]^2 + Fgravplanets[x, y, t][[2]]^2],
   {x, -1.5 rp["Neptune"], 1.5 rp["Neptune"]}, {y, -1.5 rp["Neptune"],
    1.5 rp["Neptune"]},
   PlotRange -> {0, 10},
   Mesh -> None,
   ImageSize -> Medium,
   AxesLabel -> {"x", "y", "Fgrav"},
   ColorFunction -> Hue,
   PlotPoints -> 20,
   Contours -> 20
   ],
 {t, 0, 365*24*3600*10, 365*24*3600/10}];

Export["gfield.avi", gfield] 
```

对于图形列表，导出为 .avi 可以正常工作。您可能需要调整`Table`迭代器中的步长以实现所需的帧速率。

# jquery - jqueryui 对话框 - 第二个对话框自动关闭

> ID：12904403
> 
> 赞同：0
> 
> 时间：2012-10-15T21:35:54.517
> 
> 标签：jquery, jquery-ui-dialog

概述：定义了一个基本的 jqueryui 对话框，稍后使用注入的标记按需打开。

问题：第一个示例有效，但第二个（看似相似）无效。它们打开的顺序没有区别。即使我先打开非工作的，它也不起作用。我会很感激第二双眼睛，看看我是否做了一些明显迟钝的事情。

注意：这些是来自大型代码字段的片段，因此请不要检查匹配的括号。除了被星号包围的第二个 jqueryui 对话框外，所有代码都在工作。Ajax 返回正确的数据等。第二个对话框上方的警报甚至可以工作，但该对话框永远不会显示（代码中有或没有警报）。

第二个对话框调用在 ajax 回调函数中。我是否需要以某种方式使用 .on() 方法将返回的数据绑定到#alert div？（我不应该这样想……至少应该显示 div ——一个空的 dlg 框——不是吗？）如果是这样，那会是什么样子？

HTML：

```
<div id="alert" title="Alert"></div> 
```

JAVASCRIPT：

```
$(function() {
    $( '#alert' ).dialog({
        autoOpen:false,
    });

$(document).on('click', '.mledit', function(event) {
    //company_id is actually the user_id
    var user_id = this.id.split( 'editcopro_' )[1];
    $.ajax({
        type: "POST",
        url: "ajax/ax_all_ajax_fns.php",
        data: 'request=edit_company_data&user_id='+user_id,
        success:function(data){
            $('#co_label').html(data);
            $('#co_label').dialog({
                autoOpen: true,
                height: 600,
                width: 800,
                modal: true,
                buttons: 
                    {
                    //***************************************
                    //******** THIS WORKS *******************
                        Test: function() {
                            $( '#alert' ).html( 'Hello there' );
                            $( '#alert' ).dialog( 'open' );
                            return false;
                    //***************************************
                        },
                //... etc ...
    $.ajax({
        type: "POST",
        url: "ajax/ax_all_ajax_fns.php",
        data: 'request=index_list_contacts_for_client&user_id=' + user_id,
        success: function(data) {
            $('#contact_table').html(data);
            var tbl = $('#injected_table_of_contacts');

                $(this).dialog({
                    autoOpen: false,
                    height: 400,
                    width: 600,
                    modal: true,
                    buttons: 
                        {
                            Okay: function() {
                                $.ajax({
                                    type: "POST",
                                    url: "ajax/ax_all_ajax_fns.php",
                                    data: 'request=update_edited_contact_data&contact_id='+contact_id+'&fn='+fn+'&ln='+ln+'&em='+em+'&cp='+cp,
                                    success: function(data) {
                                        alert(data);
                                    //**********************************
                                    //***** THIS DOES NOT: *************
                                        $( '#alert' ).html( data );
                                        $( '#alert' ).dialog( 'open' );
                                    //**********************************
                                        window.location = '' //THIS LINE AUTO-CLOSES THE DLG!;
                                    }
                                });
                                $( this ).dialog( "close" );
                            } //END ELSE
                        },
                        Cancel: function() {
                            $( this ).dialog( "close" );
                            window.location = '';
                        }
                    } /*,
                    //IMPORTANT DISCOVERY: Having this close section AUTO-CLOSES the prev dialog popup!
                    close: function() {
                        //alert('here i am');
                        window.location = 'index.php';
                    }*/
            })
        }
    });

});
/*********** >Snip< *************/ 
```

完整的代码是巨大的（r），所以我已经为这个问题剪掉了必要的部分。请不要太仔细地寻找匹配的括号等。 alert() 工作正常，它只是 .dialog() 调用 - 只是第二个调用 - 早期的工作正常（包括来自内部的对话框调用对话）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:51:34.247

解决了。请参阅代码中我评论解决方案的两个地方。谁来敲门？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T21:40:57.543

最重要的是，您是否只是忘记关闭 ajax 调用？

```
}}); 
```

# javascript - 如何使用带有 3 个参数的 ext.extend 将 extjs 3 代码迁移到 extjs 4

> ID：12904404
> 
> 赞同：0
> 
> 时间：2012-10-15T21:35:57.057
> 
> 标签：javascript, extjs, extjs4

我已通读迁移指南，并且了解如何迁移 Ext.extend 以执行以下操作：

```
namespace.newClass = Ext.extend(Ext.Panel,overrides); 
```

一个人如何迁移看起来像这样的东西（我经常这样做并且很常见）：

```
namespace.newClass = function(arguments){
Do some stuff;
};
Ext.extend(namespace.newClass,Ext.Panel,overrides); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T22:38:11.270

像这样的东西：

```
Ext.define('MyApp.foo.MyClass', {
    extend: 'MyApp.bar.OtherClass',

    constructor: function(){
        // Call parent ctor if required
        this.callParent(arguments);            
    },

    otherMethod: function() {

    }
}); 
```

# ios - popViewController 的完成块

> ID：12904410
> 
> 赞同：127
> 
> 时间：2012-10-15T21:36:31.177
> 
> 标签：ios, cocoa-touch, uiview, uiviewcontroller, uiviewanimation

使用 关闭模态视图控制器`dismissViewController`时，可以选择提供完成块。是否有类似的等价物`popViewController`？

完成参数非常方便。例如，我可以使用它来推迟从 tableview 中删除一行，直到模态框离开屏幕，让用户看到行动画。从推送视图控制器返回时，我想要同样的机会。

我试过放置`popViewController`一个`UIView`动画块，在那里我可以访问一个完成块。但是，这会对弹出的视图产生一些不需要的副作用。

如果没有这样的方法可用，有什么解决方法？

* * *

## 回答 #1

> 赞同：216
> 
> 时间：2014-12-01T13:56:14.243

我知道两年前已经接受了一个答案，但是这个答案是不完整的。

> 开箱即用没有办法做你想做的事

这在技术上是正确的，因为`UINavigationController`API 没有为此提供任何选项。但是，通过使用 CoreAnimation 框架，可以将完成块添加到底层动画：

```
[CATransaction begin];
[CATransaction setCompletionBlock:^{
    // handle completion here
}];

[self.navigationController popViewControllerAnimated:YES];

[CATransaction commit]; 
```

一旦使用的动画`popViewControllerAnimated:`结束，就会调用完成块。此功能从 iOS 4 开始可用。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2016-04-23T10:51:31.677

Swift 5 版本 - 就像一个魅力。基于[这个答案](https://stackoverflow.com/a/35064909/1503855)

```
extension UINavigationController {
    func pushViewController(viewController: UIViewController, animated: Bool, completion: @escaping () -> Void) {
        pushViewController(viewController, animated: animated)

        if animated, let coordinator = transitionCoordinator {
            coordinator.animate(alongsideTransition: nil) { _ in
                completion()
            }
        } else {
            completion()
        }
    }

    func popViewController(animated: Bool, completion: @escaping () -> Void) {
        popViewController(animated: animated)

        if animated, let coordinator = transitionCoordinator {
            coordinator.animate(alongsideTransition: nil) { _ in
                completion()
            }
        } else {
            completion()
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2015-01-30T09:14:41.047

我制作了一个`Swift`带有**@JorisKluivers**答案的扩展版本。

`push`这将在和的动画完成后调用完成闭包`pop`。

```
extension UINavigationController {
    func popViewControllerWithHandler(completion: ()->()) {
        CATransaction.begin()
        CATransaction.setCompletionBlock(completion)
        self.popViewControllerAnimated(true)
        CATransaction.commit()
    }
    func pushViewController(viewController: UIViewController, completion: ()->()) {
        CATransaction.begin()
        CATransaction.setCompletionBlock(completion)
        self.pushViewController(viewController, animated: true)
        CATransaction.commit()
    }
} 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2018-09-14T15:45:26.057

**斯威夫特 4.1**

```
extension UINavigationController {
func pushToViewController(_ viewController: UIViewController, animated:Bool = true, completion: @escaping ()->()) {
    CATransaction.begin()
    CATransaction.setCompletionBlock(completion)
    self.pushViewController(viewController, animated: animated)
    CATransaction.commit()
}

func popViewController(animated:Bool = true, completion: @escaping ()->()) {
    CATransaction.begin()
    CATransaction.setCompletionBlock(completion)
    self.popViewController(animated: animated)
    CATransaction.commit()
}

func popToViewController(_ viewController: UIViewController, animated:Bool = true, completion: @escaping ()->()) {
    CATransaction.begin()
    CATransaction.setCompletionBlock(completion)
    self.popToViewController(viewController, animated: animated)
    CATransaction.commit()
}

func popToRootViewController(animated:Bool = true, completion: @escaping ()->()) {
    CATransaction.begin()
    CATransaction.setCompletionBlock(completion)
    self.popToRootViewController(animated: animated)
    CATransaction.commit()
}
} 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2013-12-13T11:48:02.523

我遇到过同样的问题。而且因为我必须在多个场合使用它，并且在完成块链中，我在 UINavigationController 子类中创建了这个通用解决方案：

```
- (void) navigationController:(UINavigationController *) navigationController didShowViewController:(UIViewController *) viewController animated:(BOOL) animated {
    if (_completion) {
        dispatch_async(dispatch_get_main_queue(),
        ^{
            _completion();
            _completion = nil;
         });
    }
}

- (UIViewController *) popViewControllerAnimated:(BOOL) animated completion:(void (^)()) completion {
    _completion = completion;
    return [super popViewControllerAnimated:animated];
} 
```

假设

```
@interface NavigationController : UINavigationController <UINavigationControllerDelegate> 
```

和

```
@implementation NavigationController {
    void (^_completion)();
} 
```

和

```
- (id) initWithRootViewController:(UIViewController *) rootViewController {
    self = [super initWithRootViewController:rootViewController];
    if (self) {
        self.delegate = self;
    }
    return self;
} 
```

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2018-05-25T15:50:30.767

根据@HotJard 的回答，当您只需要几行代码时。快捷方便。

**斯威夫特 4**：

```
_ = self.navigationController?.popViewController(animated: true)
self.navigationController?.transitionCoordinator.animate(alongsideTransition: nil) { _ in
    doWhatIWantAfterContollerHasPopped()
} 
```

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2012-10-15T21:39:44.063

没有办法做你想要的开箱即用。即没有用于从导航堆栈弹出视图控制器的完成块的方法。

我要做的是将逻辑放入`viewDidAppear`. 当视图完成出现在屏幕上时，将调用它。视图控制器出现的所有不同场景都会调用它，但这应该没问题。

或者您可以使用该`UINavigationControllerDelegate`方法`navigationController:didShowViewController:animated:`做类似的事情。这在导航控制器完成推送或弹出视图控制器时调用。

* * *

## 回答 #8

> 赞同：15
> 
> 时间：2016-09-06T14:51:48.170

正确使用或不使用动画，还包括`popToRootViewController`：

```
 // updated for Swift 3.0
extension UINavigationController {

  private func doAfterAnimatingTransition(animated: Bool, completion: @escaping (() -> Void)) {
    if let coordinator = transitionCoordinator, animated {
      coordinator.animate(alongsideTransition: nil, completion: { _ in
        completion()
      })
    } else {
      DispatchQueue.main.async {
        completion()
      }
    }
  }

  func pushViewController(viewController: UIViewController, animated: Bool, completion: @escaping (() ->     Void)) {
    pushViewController(viewController, animated: animated)
    doAfterAnimatingTransition(animated: animated, completion: completion)
  }

  func popViewController(animated: Bool, completion: @escaping (() -> Void)) {
    popViewController(animated: animated)
    doAfterAnimatingTransition(animated: animated, completion: completion)
  }

  func popToRootViewController(animated: Bool, completion: @escaping (() -> Void)) {
    popToRootViewController(animated: animated)
    doAfterAnimatingTransition(animated: animated, completion: completion)
  }
} 
```

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2018-05-18T17:07:34.110

# 对于 2018 年...

如果你有这个...

```
 navigationController?.popViewController(animated: false)
    // I want this to happen next, help! ->
    nextStep() 
```

你想添加一个完成......

```
 CATransaction.begin()
    navigationController?.popViewController(animated: true)
    CATransaction.setCompletionBlock({ [weak self] in
       self?.nextStep() })
    CATransaction.commit() 
```

就这么简单。

# 贴心提示...

方便的`popToViewController`通话也是如此。

一个典型的事情是你有一个由无数屏幕组成的入职堆栈。最终完成后，您会一直回到“基本”屏幕，然后最终启动应用程序。

所以在“基地”画面，去“一路回来”，`popToViewController(self`

```
func onboardingStackFinallyComplete() {

    CATransaction.begin()
    navigationController?.popToViewController(self, animated: false)
    CATransaction.setCompletionBlock({ [weak self] in
        guard let self = self else { return }
        .. actually launch the main part of the app
    })
    CATransaction.commit()
} 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2018-06-19T09:30:10.613

根据[这个答案](https://stackoverflow.com/a/36809827/2019384)清理了**Swift 4**版本。

```
extension UINavigationController {
    func pushViewController(_ viewController: UIViewController, animated: Bool, completion: @escaping () -> Void) {
        self.pushViewController(viewController, animated: animated)
        self.callCompletion(animated: animated, completion: completion)
    }

    func popViewController(animated: Bool, completion: @escaping () -> Void) -> UIViewController? {
        let viewController = self.popViewController(animated: animated)
        self.callCompletion(animated: animated, completion: completion)
        return viewController
    }

    private func callCompletion(animated: Bool, completion: @escaping () -> Void) {
        if animated, let coordinator = self.transitionCoordinator {
            coordinator.animate(alongsideTransition: nil) { _ in
                completion()
            }
        } else {
            completion()
        }
    }
} 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2012-10-15T21:51:51.300

在呈现的视图控制器上调用 viewDidDisappear 方法之后调用完成块，因此将代码放入弹出视图控制器的 viewDidDisappear 方法应该与完成块一样工作。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2016-11-09T08:06:27.747

Swift 3 答案，感谢这个答案：[https ://stackoverflow.com/a/28232570/3412567](https://stackoverflow.com/a/28232570/3412567)

```
 //MARK:UINavigationController Extension
extension UINavigationController {
    //Same function as "popViewController", but allow us to know when this function ends
    func popViewControllerWithHandler(completion: @escaping ()->()) {
        CATransaction.begin()
        CATransaction.setCompletionBlock(completion)
        self.popViewController(animated: true)
        CATransaction.commit()
    }
    func pushViewController(viewController: UIViewController, completion: @escaping ()->()) {
        CATransaction.begin()
        CATransaction.setCompletionBlock(completion)
        self.pushViewController(viewController, animated: true)
        CATransaction.commit()
    }
} 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2018-06-17T20:08:57.350

带有可选 viewController 参数的 Swift 4 版本可以弹出到特定的参数。

```
extension UINavigationController {
    func pushViewController(viewController: UIViewController, animated: 
        Bool, completion: @escaping () -> ()) {

        pushViewController(viewController, animated: animated)

        if let coordinator = transitionCoordinator, animated {
            coordinator.animate(alongsideTransition: nil) { _ in
                completion()
            }
        } else {
            completion()
        }
}

func popViewController(viewController: UIViewController? = nil, 
    animated: Bool, completion: @escaping () -> ()) {
        if let viewController = viewController {
            popToViewController(viewController, animated: animated)
        } else {
            popViewController(animated: animated)
        }

        if let coordinator = transitionCoordinator, animated {
            coordinator.animate(alongsideTransition: nil) { _ in
                completion()
            }
        } else {
            completion()
        }
    }
} 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2020-02-06T08:34:17.173

**2020 Swift 5.1 方式**

此解决方案保证在 popViewController 完全完成后执行完成。您可以通过在 NavigationController 上完成另一个操作来测试它：在上面的所有其他解决方案中， UINavigationController 仍然忙于 popViewController 操作并且没有响应。

```
public class NavigationController: UINavigationController, UINavigationControllerDelegate
{
    private var completion: (() -> Void)?

    override init(rootViewController: UIViewController) {
        super.init(rootViewController: rootViewController)
        delegate = self
    }

    required init?(coder aDecoder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    public override func navigationController(_ navigationController: UINavigationController, didShow viewController: UIViewController, animated: Bool)
    {
        if self.completion != nil {
            DispatchQueue.main.async(execute: {
                self.completion?()
                self.completion = nil
            })
        }
    }

    func popViewController(animated: Bool, completion: @escaping () -> Void) -> UIViewController?
    {
        self.completion = completion
        return super.popViewController(animated: animated)
    }
} 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2021-04-06T00:36:41.523

请参考 Swifty & SDK-like 方式的最新版本（5.1），

```
extension UINavigationController {
    func popViewController(animated: Bool, completion: (() -> ())? = nil) {
        CATransaction.begin()
        CATransaction.setCompletionBlock(completion)
        popViewController(animated: animated)
        CATransaction.commit()
    }
    func pushViewController(_ viewController: UIViewController, animated: Bool, completion: (() -> ())? = nil) {
        CATransaction.begin()
        CATransaction.setCompletionBlock(completion)
        pushViewController(viewController, animated: animated)
        CATransaction.commit()
    }
} 
```

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2016-02-15T23:33:41.103

有一个名为[UINavigationControllerWithCompletionBlock](https://github.com/leverdeterre/UINavigationControllerWithCompletionBlock)的 pod ，它在 UINavigationController 上推送和弹出时添加了对完成块的支持。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2018-01-04T21:42:55.283

在您的代码中使用下一个扩展：（Swift 4）

```
import UIKit

extension UINavigationController {

    func popViewController(animated: Bool = true, completion: @escaping () -> Void) {
        CATransaction.begin()
        CATransaction.setCompletionBlock(completion)
        popViewController(animated: animated)
        CATransaction.commit()
    }

    func pushViewController(_ viewController: UIViewController, animated: Bool = true, completion: @escaping () -> Void) {
        CATransaction.begin()
        CATransaction.setCompletionBlock(completion)
        pushViewController(viewController, animated: animated)
        CATransaction.commit()
    }
} 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2015-11-27T12:15:18.423

为了完整起见，我制作了一个可供使用的 Objective-C 类别：

```
// UINavigationController+CompletionBlock.h

#import <UIKit/UIKit.h>

@interface UINavigationController (CompletionBlock)

- (UIViewController *)popViewControllerAnimated:(BOOL)animated completion:(void (^)()) completion;

@end 
```

```
// UINavigationController+CompletionBlock.m

#import "UINavigationController+CompletionBlock.h"

@implementation UINavigationController (CompletionBlock)

- (UIViewController *)popViewControllerAnimated:(BOOL)animated completion:(void (^)()) completion {
    [CATransaction begin];
    [CATransaction setCompletionBlock:^{
        completion();
    }];

    UIViewController *vc = [self popViewControllerAnimated:animated];

    [CATransaction commit];

    return vc;
}

@end 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2015-12-27T01:34:26.250

我使用块精确地实现了这一点。我希望我的获取结果控制器显示模式视图添加的行，只有在它完全离开屏幕后，用户才能看到发生的变化。在为负责显示模态视图控制器的 segue 做准备时，我设置了当模态消失时要执行的块。在模态视图控制器中，我覆盖 viewDidDissapear 然后调用该块。我只是在模式将要出现时开始更新，并在模式消失时结束更新，但那是因为我使用的是 NSFetchedResultsController 但是你可以在块内做任何你喜欢的事情。

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
    if([segue.identifier isEqualToString:@"addPassword"]){

        UINavigationController* nav = (UINavigationController*)segue.destinationViewController;
        AddPasswordViewController* v = (AddPasswordViewController*)nav.topViewController;

...

        // makes row appear after modal is away.
        [self.tableView beginUpdates];
        [v setViewDidDissapear:^(BOOL animated) {
            [self.tableView endUpdates];
        }];
    }
}

@interface AddPasswordViewController : UITableViewController<UITextFieldDelegate>

...

@property (nonatomic, copy, nullable) void (^viewDidDissapear)(BOOL animated);

@end

@implementation AddPasswordViewController{

...

-(void)viewDidDisappear:(BOOL)animated{
    [super viewDidDisappear:animated];
    if(self.viewDidDissapear){
        self.viewDidDissapear(animated);
    }
}

@end 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-05-28T10:09:20.793

我认为 viewDidDisappear(_ animated: Bool) 函数可以对此有所帮助。当视图完全消失时，它将被调用。

```
override func viewDidDisappear(_ animated: Bool) {
    super.viewDidDisappear(animated)
    //do the stuff here
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-09-30T05:48:15.237

**2021 年，斯威夫特 5**

```
extension UINavigationController {
func pushViewController(viewController: UIViewController, animated: Bool, completion: @escaping() -> ()) {
    pushViewController(viewController, animated: animated)

    if let coordinator = transitionCoordinator, animated {
        coordinator.animate(alongsideTransition: nil) { _ in
            completion()
        }
    } else {
        completion()
    }
}

func popViewController(animated: Bool, completion: @escaping() -> ()) {
    popViewController(animated: animated)

    if let coordinator = transitionCoordinator, animated {
        coordinator.animate(alongsideTransition: nil) { _ in
            completion()
        }
    } else {
        completion()
    }
}
} 
```

# c# - x64 机器中的“类未注册”错误

> ID：12904412
> 
> 赞同：3
> 
> 时间：2012-10-15T21:36:42.790
> 
> 标签：c#, dll, com, interop, windows-7-x64

将我的应用程序部署到 Win7 x64 机器时出现问题。我引用了几个较旧的 32 位 dll，无法重新编译为 x64。我的开发机器是 x86，所以它们在这里工作正常。在所有运行 x64 的客户端机器中，我收到以下消息：

> “类未注册（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)）
> 
> 在 System.Windows.Forms.UnsafeNativeMethods.CoCreateInstance（Guid& clsid，对象 >punkOuter，Int32 上下文，Guid& iid）
> 
> System.Windows.Forms.AxHost.CreateWithLicense（字符串许可证，Guid clsid）

我尝试在 Visual Studio 2010 中将所有目标平台更改为 x86，但无济于事。我还尝试通过在“AppdData\Local\Apps\2.0...”安装文件夹中使用 regsvr32 在客户端计算机中注册 dll，但出现错误：“模块“Module.dll”已加载，但入口点-找不到点 DllRegisterServer。” 对于每个引用的 dll。甚至尝试使用干净的 x64 机器，但没有。

这些是冲突的 dll（与 Lead Tools 多媒体库相关）：

> AxInterop.LTMMLib.dll
> 
> AxInterop.MSComctlLib.dll
> 
> AxInterop.MSComDlg.dll

（与windows media player winforms控件相关）：

> AxInterop.WMPLib.dll

我在网上查了很多解决方案，但似乎都没有。非常感谢任何输入:)

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T15:07:25.990

正如评论中所指出的，Windows 媒体库不是问题的根源。按照 Hans Passant 的建议，在客户端机器上手动安装了 LEADTools (x86) 并解决了问题。

感谢大家的有益评论。我无法将评论标记为答案，但这是引用：

> 不应注册 AxInterop 文件。您正在使用可能没有安装在目标机器上的 ActiveX 控件。LTMMLib 来自 Lead Technologies，使用供应商的 >recommend 安装程序。MSComctlLib 和 MSComDlg 是古老的 VB6 控件，最好>完全停止使用它们并用做同样事情的 .NET 类代替。WMPLib > 不会有问题。

# python - Google App Engine Search API 执行基于位置的搜索

> ID：12904413
> 
> 赞同：2
> 
> 时间：2012-10-15T21:36:51.143
> 
> 标签：python, google-app-engine, geolocation, geocoding, gae-search

我一直在尝试在 Google App Engine 上找到通过 GPS 坐标搜索模型的最佳选项。那里似乎有一些不错的选择，例如 GeoModel（已过时），但新的 Search API 似乎是最新的并且提供了很多功能。这当然是因为一旦离开实验区，它可能会在 1000 次搜索后变得昂贵。

我在浏览文档并创建一个连贯的完整示例以能够使用搜索 API 按位置搜索时遇到了麻烦，我想知道是否有人愿意分享或创建示例以帮助使此过程多一点直截了当。我了解如何创建实际的地理搜索查询，但我不清楚如何将其与文档的构建和索引结合在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:45:16.843

我不知道任何具体显示地理的示例，但过程非常相似。您可以索引包含`GeoField`s 的文档，每个文档都有 a`latitude`和 a `longitude`。然后，当您构建查询时，您可以：

*   通过使用查询来限制结果与固定点的距离`distance(my_geo_field, geopoint(41, 65)) < 100`
*   使用排序表达式按距点的距离排序`distance(my_geo_field, geopoint(55, -20))`
*   使用`FieldExpression`like根据点之间的距离计算表达式`distance(my_geo_field, geopoint(10, -30))`

它们的工作原理与任何其他字段非常相似，只是您可以`distance`在查询和表达式语言中使用该函数。如果您有任何具体问题，请随时在此处提问。

# c# - 如果我查询 SQL Server VarBinary(MAX) 列，整个文件是否会加载到内存中？

> ID：12904416
> 
> 赞同：4
> 
> 时间：2012-10-15T21:37:17.107
> 
> 标签：c#, sql-server, entity-framework, varbinary

我的应用程序使用的是 SQL Server 2008，我们需要为用户添加功能，以便可以选择将任何大小的文件保存到数据库表中。我已经设置了类似于这种格式的表格：

*   FileStorageID - `int (indentity PK)`（这也是不同表的外键）
*   文件数据 -`varbinary(max)`
*   文件名 -`varchar(1000)`

该`FileStorage`表与另一个表具有零对一的关系`Documentation`。这个想法是用户可以编写一些文本，上传文件，或两者兼而有之。

此表如下所示：

*   DocumentationID - `int (identity PK`, FK 到“IrrelevantInterestingObject”表）
*   文本 -`varchar(max)`
*   FileStorageID -`int (FK`到前面提到的 FileStorage 表）

我的问题是：当我`Documentation`使用 Entity Framework 5 查询表时，数据库中存在一个文件，整个文件是否会存储在内存中？如果是，那么在出现明显的性能问题之前合理的阈值是多少？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T22:08:07.817

如果您查询`Documentation`表，则不会加载相关`FileStorage`表中的数据，直到您通过急切、显式或延迟加载加载关系。一旦您使用任何此类方法或`FileStorage`直接查询`FileData`，每个检索到的记录都会被加载到内存中。

# c# - Request.IsLocal 替代方案？

> ID：12904417
> 
> 赞同：4
> 
> 时间：2012-10-15T21:37:19.680
> 
> 标签：c#, asp.net-mvc, model-view-controller

据我了解，[Request.IsLocal](http://msdn.microsoft.com/en-us/library/system.web.httprequest.islocal.aspx)在两种情况下返回 true。如果请求发起者的 IP 地址是 127.0.0.1，或者请求的 IP 地址与服务器的 IP 地址相同。

我在一个由 cron 任务（使用绝对 URL）定期调用的页面上使用它。不幸的是，这个 cron 作业与页面在同一台服务器上运行，这意味着 IsLocal 总是返回 true。

理想情况下，我需要一个函数，如果我在本地主机上，它*只会返回 true。*如何在 ASP.NET MVC 环境中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T21:51:08.303

您可以查看`Request.Url`MVC 中的属性，但您至少需要检查 127.0.0.1、localhost 和 ::1。如果您只想请求访问权限，您还可以使用 UrlRewrite 做很多事情。如果它返回真/假，你不会说你想做什么，但假设这是你想做的事情之一，看看 UrlRewrite。这篇文章中也有很多有用的信息；

[如何将页面访问仅限于本地主机？](https://stackoverflow.com/questions/11879500/how-to-limit-page-access-only-to-localhost/11885883#11885883)

# python - 在python中生成代码模板的最佳工具

> ID：12904424
> 
> 赞同：-3
> 
> 时间：2012-10-15T21:37:51.583
> 
> 标签：python

我们用 Python 开发了一个系统，可以加载我们公司其他人制作的“插件”。有几种类型的插件，但在一个类型中，代码模板总是相同的。

我想知道是否有一个简单的 Python 工具可以创建插件的骨架。该工具必须：

1.  使用骨架文件创建一个目录（可能进行一些模板替换）。
2.  在其中创建一个 git 存储库。
3.  在公司的中央 git 存储库中创建一个远程存储库（通过 ssh）。
4.  将远程存储库添加为本地存储库的源。
5.  自动将骨架文件提交到远程存储库。

谷歌搜索，我发现最好的工具是 Paste，但它似乎有点矫枉过正，因为它是一个完整的 WSGI 工具。是否有另一种工具，可能更专门用于这项任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T21:45:55.440

AFAIK 你必须自己写。

从第 1 点的基本 git 存储库开始。从那里克隆/分支以进行下一步。在步骤 2-5 中使用[织物](http://docs.fabfile.org/en/1.4.3/)。

# c++ - 除法停止为负数工作

> ID：12904425
> 
> 赞同：0
> 
> 时间：2012-10-15T21:38:03.020
> 
> 标签：c++

我让它显示红利，这样人们就可以毫不费力地破译代码。它工作过一次，但后来我不知道我做了什么让它停止工作。它非常适用于正整数。它应该显示与用户输入相关的数字。

```
#include <iostream>                                        // Necessary header
using namespace std;

int main()
{
   signed int Input, Divisor, Dividend, MSD;

   cout << "Input:";
   cin >> Input;

   Divisor = 1;
   Dividend = Input;
   if (Input < 0)
   {
       Dividend *= -1;
       cout << "minus ";
   }

   cout << Dividend;
   while (Dividend > 9)
   {
       Divisor = Divisor * 10;
       Dividend = Dividend / 10;
   }

   while (Divisor != 0)
   {
       MSD = Input / Divisor;
       switch (MSD)
       {
           case 0:
           cout << "zero ";
           break;
           case 1:
           cout << "one ";
           break;
           case 2:
           cout << "two ";
           break;
           case 3:
           cout << "three ";
           break;
           case 4:
           cout << "four ";
           break;
           case 5:
           cout << "five ";
           break;
           case 6:
           cout << "six ";
           break;
           case 7:
           cout << "seven ";
           break;
           case 8:
           cout << "eight ";
           break;
           case 9:
           cout << "nine ";
           break;
       }
    Input = Input - (MSD * Divisor);
    Divisor /= 10;
   }
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T21:42:02.487

改变

```
if (Input < 0)
{
    Dividend *= -1;
    cout << "minus ";
} 
```

到

```
if (Input < 0)
{
    Input *= -1;
    cout << "minus ";
} 
```

但真的，你调试了吗？:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T21:42:09.687

我认为您的代码不适用于负数。看看这一行：

```
while (Divisor != 0) {
    MSD = Input / Divisor;
    // switch statement
} 
```

如果用户为 输入负值`Input`，则在您的 switch 语句中不会遇到任何大小写。我相信您要确保使用 的绝对值`Input`，而不是用户输入的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T00:21:24.473

作品！谢谢。

```
#include <iostream>                                        // Necessary header
using namespace std;
const int DIV = 10;                                        // Avoid Magic Numbers
const int REM = 9;

int main()
{
   signed int Input, Divisor, Dividend, MSD;               // Signed because negative values need to be read

   cout << "Input:";
   cin >> Input;
   cout << "Output: ";

   if (Input < 0)                                          // If the input is negative, make it positive
   {
      Input = -Input;
      cout << "minus ";
   }

   Divisor = 1;                                            // Initialize Divisor to 1
   Dividend = Input;                                       // Dividend is equal to input number
   while (Dividend > REM)
   {
      Divisor *= DIV;
      Dividend /= DIV;
   }

   while (Divisor != 0)                                    // While the Divisor is not 0
   {
      MSD = Input / Divisor;                               // The most significant digit is obtained
      switch (MSD)
      {
         case 0:                                           // Multiple cases to print all digits 0 to 9
            cout << "zero ";
            break;
         case 1:
            cout << "one ";
            break;
         case 2:
            cout << "two ";
            break;
         case 3:
            cout << "three ";
            break;
         case 4:
            cout << "four ";
            break;
         case 5:
            cout << "five ";
            break;
         case 6:
            cout << "six ";
            break;
         case 7:
            cout << "seven ";
            break;
         case 8:
            cout << "eight ";
            break;
         case 9:
            cout << "nine ";
            break;
      }
      Input -= MSD * Divisor;                              // Change input so next digit can be obtained
      Divisor /= DIV;
   }
   return 0;
}                                                          // End main method 
```

# javascript - 如何在特定时间后限制日期选择器上的日期？

> ID：12904426
> 
> 赞同：0
> 
> 时间：2012-10-15T21:38:04.263
> 
> 标签：javascript, jquery, date, time, datepicker

目前我在这里有这段代码：

```
<script type="text/javascript" src="catalog/view/javascript/jquery/ui/jquery-ui-timepicker-addon.js"></script> 
<script type="text/javascript"><!--
if ($.browser.msie && $.browser.version == 6) {
    $('.date, .datetime, .time').bgIframe();
}

$('.date').datepicker({dateFormat: 'D M dd, yy', minDate:2, beforeShowDay: $.datepicker.noWeekends});
$('.datetime').datetimepicker({
    dateFormat: 'yy-mm-dd',
    timeFormat: 'h:m'
});
$('.time').timepicker({timeFormat: 'h:m'});
//--></script> 
```

它很好用，因为我想添加一件事。

我使用日期选择器，以便我的客户可以选择他们可以取件的日期。

我希望它在美国东部标准时间下午 5.30 后的两天内清空。

所以在星期一下午 1 点我只能选择星期三以后。如果是周一下午 6 点，我只能从周四开始订购。

有谁知道如何做到这一点？我无法从 API 网站上完全弄清楚。

非常感谢

彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T21:41:23.887

根据文档：http: [//jqueryui.com/datepicker/#min-max](http://jqueryui.com/datepicker/#min-max)

您可以`minDate: 2`根据现在的时间进行设置。

```
var min = 1;
var currentTime = new Date();
if (currentTime.getHours() >=17 && currentTime.getMinutes() >=30){
    min = 2;
} 
```

然后`min`传入`minDate`.

但是，正如ahren 指出的那样，这将是用户的时间，而不是您的时间。如果你想找到时区并从那里调整，你可以使用`getTimeZoneOffset` [http://www.w3schools.com/jsref/jsref_gettimezoneoffset.asp](http://www.w3schools.com/jsref/jsref_gettimezoneoffset.asp)

# eclipse - 与 Eclipse 合并时的树冲突

> ID：12904432
> 
> 赞同：2
> 
> 时间：2012-10-15T21:38:41.753
> 
> 标签：eclipse, svn, merge

我有一个存储库，我在其中创建了一个分支，该分支今天已经完成了开发。但是主干上发生了一些变化，所以我必须将主干合并到分支中，然后继续该过程。

首先，我尝试在 eclipse 上使用 reintegrate 功能，但出现错误：

```
Merge operation failed
svn: Retrieval of mergeinfo unsupported by 'http://192.168.0.1/svn/gestaoconfig'" 
```

然后我尝试使用应该正常的主选项卡（URL），但不知何故所有文件都标记为冲突，并且在主干上所做的更改没有出现在本地开发中。差异显示完全相同的文件。

我试过附上eclipse的预览消息，但我做不到。

> 我的环境：
> 
> 本地开发：ubuntu 12，使用 eclipse helios，带有 svn，版本 1.6.17 (r1128011)。
> 
> 存储库服务器：fedora 12，带有 svn，版本 1.6.9 (r901367)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:22:02.770

作为一种解决方法，您可能需要分别检查主干和分支，并检查是否可行进行手动差异和合并。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T12:12:51.143

```
Merge operation failed
svn: Retrieval of mergeinfo unsupported by 'http://192.168.0.1/svn/gestaoconfig'" 
```

这意味着您的服务器至少不是 1.5 版。我强烈建议升级您的服务器，因为在此修订之前的合并非常危险，因为它们必须完全手动处理。

但是，重新集成*合并*是为您在功能分支上工作并希望将其重新集成到主干或另一个分支中的情况而设计的。您不应继续在重新集成的分支上工作（请参阅[此处](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.basicmerging.html#svn.branchemerge.basicmerging.reintegrate)）。

在您的情况下，您可能只需要正常的合并。如果您没有删除/重命名/移动主干或分支中的任何文件/文件夹，那么您的树冲突可能来自源或目标合并路径中的错误（例如，您没有在 url 中指定`/trunk`or ）`/branches/mybranch`

# java - 线程和创建对象

> ID：12904433
> 
> 赞同：1
> 
> 时间：2012-10-15T21:38:44.923
> 
> 标签：java, multithreading, redundancy

我正在尝试了解线程并在互联网上找到一些示例。这是一个每 3 秒输出“hello, world”的 java 类。但我有一种感觉，关于创建 Runable 对象的部分是多余的。

而不是写

```
Runnable r = new Runnable(){ public void run(){...some actions...}}; 
```

我可以将方法`run()`放在其他地方以便于阅读吗？

这就是我所拥有的：

```
public class TickTock extends Thread {
    public static void main (String[] arg){
        Runnable r = new Runnable(){
            public void run(){
                try{
                    while (true) {
                        Thread.sleep(3000);
                        System.out.println("Hello, world!");
                    }
                } catch (InterruptedException iex) {
                    System.err.println("Message printer interrupted");
                }
            }
        };
      Thread thr = new Thread(r);
      thr.start();
} 
```

这就是我想要完成的

```
public static void main (String[] arg){ 
          Runnable r = new Runnable() //so no run() method here, 
                                  //but where should I put run()
          Thread thr = new Thread(r);
          thr.start();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T21:41:15.703

> 我可以将方法 run() 放在其他地方以便于阅读吗？

是的，您可以像这样创建自己的可运行文件

```
public class CustomRunnable implements Runnable{
// put run here
} 
```

进而

```
Runnable r = new CustomRunnable () ;
Thread thr = new Thread(r); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T21:41:03.667

从[Java 线程教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/runthread.html)中，您可以使用稍微不同的样式：

```
public class HelloRunnable implements Runnable {

    public void run() {
        System.out.println("Hello from a thread!");
    }

    public static void main(String args[]) {
        (new Thread(new HelloRunnable())).start();
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T21:45:00.970

只需将您的匿名`Runnable`类设为内部静态类，如下所示：

```
public class TickTock {

    public static void main (String[] arg){
        Thread thr = new Thread(new MyRunnable());
        thr.start();
    }

    private static class MyRunnable implements Runnable {

        public void run(){
            try{
                while (true) {
                    Thread.sleep(3000);
                    System.out.println("Hello, world!");
                }
            } catch (InterruptedException iex) {
                System.err.println("Message printer interrupted");
            }
        }
    }
} 
```

或者由于`TickTock`已经在您的示例代码中扩展`Thread`，您可以重写它的`run`方法：

```
public class TickTock extends Thread {

    public static void main (String[] arg){
        Thread thr = new TickTock();
        thr.start();
    }

    @Override
    public void run(){
        try{
            while (true) {
                Thread.sleep(3000);
                System.out.println("Hello, world!");
            }
        } catch (InterruptedException iex) {
            System.err.println("Message printer interrupted");
        }
    }
} 
```

# visual-studio - DeviceIoControl 返回 ERROR_INVALID_USER_BUFFER

> ID：12904446
> 
> 赞同：2
> 
> 时间：2012-10-15T21:40:06.860
> 
> 标签：visual-studio, bluetooth, visual-studio-2012, ioctl, 32feet

我正在尝试使用 DeviceIoControl 调用[IOCTL_BTH_GET_LOCAL_INFO](http://msdn.microsoft.com/en-us/library/windows/hardware/ff536684%28v=vs.85%29.aspx)，我相信它可以完成（根据[蓝牙配置文件驱动程序 IOCTLs](http://msdn.microsoft.com/en-us/library/windows/hardware/hh450829%28v=vs.85%29.aspx)）。

我在使用 Visual Studio 2012（可能使用默认配置）的 Windows 7 x64 上。

句柄具有有效值（我删除了验证代码），但 DeviceIoControl 始终返回 ERROR_INVALID_USER_BUFFER（错误 1784）。

这是代码：

```
int main() {

    BTH_LOCAL_RADIO_INFO buffer;
    BOOL fStatus;
    HANDLE h;
    DWORD returned = 0;

    h = CreateFile(
        TEXT("\\\\.\\BthPan"), 
        GENERIC_READ | GENERIC_WRITE ,
        FILE_SHARE_READ | FILE_SHARE_WRITE,
        NULL, 
        OPEN_EXISTING,
        0,
        NULL);

    fStatus = DeviceIoControl(
            h, 
            IOCTL_BTH_GET_LOCAL_INFO,
            NULL, 0,
            (LPVOID)&buffer, sizeof(BTH_LOCAL_RADIO_INFO),
            &returned,
            (LPOVERLAPPED) NULL
            );   
(...) 
```

经过一番研究，我尝试了以下解决方案：

1.  将结构包对齐更改为 1/4/8 字节（使用 VS 选项）；
2.  使用 8 字节对齐的值（后来我发现这已经发生了，即使数据类型小于 8 字节）。一段时间后，我在某处读到 DeviceIoControl 为您处理错位问题，因此可能无需担心。

上述所有解决方案都失败了。你觉得它是什么？VS 有很多针对 Win32 的配置，但是以前从来没有给我带来过问题（虽然是第一次使用 IOCTL）。

我已经在 32feet.NET 上看到了其中的一些代码，所以这可能只是我的一个错误（我看不出有任何区别）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T07:46:11.553

您发送`IOCTL_BTH_GET_LOCAL_INFO`到错误的设备（蓝牙个人局域网而不是蓝牙无线电）。

因此，我建议您使用[`BluetoothFindFirstRadio`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa362786%28v=vs.85%29.aspx),[`BluetoothFindNextRadio`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa362790%28v=vs.85%29.aspx)并[`BluetoothFindRadioClose`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa362792%28v=vs.85%29.aspx)简单地遍历本地蓝牙无线电，而不是为它们猜测正确的 DOS 设备名称。

# gwt - GWT JSNI 从嵌套的 Javascript 函数调用 Java 实例方法

> ID：12904449
> 
> 赞同：1
> 
> 时间：2012-10-15T21:40:31.737
> 
> 标签：gwt, tinymce, jsni

我有一个所见即所得编辑器（TinyMCE）的简单包装器。我正在使用 JSNI 从 Javascript 调用 Java 实例方法 (onClick)。然而，无论创建它的编辑器如何，Java onClick 方法总是在同一个 Java 实例（最后一个创建的）上被调用。

```
 private SimplePanel panel;
        private TextArea ta;
        private String id;

        public TinyMCE(AbstractTinyMCEConfiguration config) {       
            id = HTMLPanel.createUniqueId();
            ta = new TextArea();
            ta.getElement().setId(id);
                panel = new SimplePanel();
            panel.add(ta);
            initWidget(panel);
            init(config);
        }

        protected native void init(AbstractTinyMCEConfiguration conf) /*-{
            var ins = this;
            $wnd.tinyMCE.init({
                    // General options
                    mode : conf.@com.chip.tinymce.client.AbstractTinyMCEConfiguration::getMode()(),
                    setup : function(ed) {
                        ed.onClick.add(function(ed,e) { 
                            alert(ed.id);
                            ins.@com.chip.tinymce.client.TinyMCE::onClick(Lcom/google/gwt/dom/client/NativeEvent;)(e);
                        }); 
                    }
                }); 
        }-*/;

        private void onClick(NativeEvent e) {
            GWT.log("onClick " + id);
            ClickEvent.fireNativeEvent(e, this);
        } 
```

我不确定是否可以从另一个函数内的 Javascript 函数调用 Java 方法。也许这解释了我的问题......或者我错过了一些东西。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T23:26:16.803

我认为 TinyMCE 为所有编辑器提供了一个共享配置，这就是问题所在。

如果共享配置，将配置交给构造函数可能没有多大意义......

为什么不添加一个将 id 映射回 Java 实例的静态映射，例如

```
 // ....
    private static Map<String, TinyMCE> idMap = new HashMap<String, TinyMCE>();

    public TinyMCE() {       
        // ...
        idMap.put(id, this);
    }

    // call this from Javascript with (ed.id, e)
    private static void onClick(String id, NativeEvent e) {
      idMap.get(id).onClick(e);
    } 
```

# c - 如何访问在另一个结构中定义的结构变量？

> ID：12904452
> 
> 赞同：0
> 
> 时间：2012-10-15T21:41:00.707
> 
> 标签：c

我有以下结构

```
typedef struct List_Node {
     struct File_Descriptor *data;
     char *key;
    struct List_Node *next;
}List_Node; 
```

现在我在两个结构中都插入了一些值，并且想要访问 File_descriptor 类型的数据。这个怎么做？

我试过这个

```
struct List_Node *ln1;
printf("%s", ln1.File_Descriptor->data); 
```

但它给出了错误

```
error: request for member ‘error: File_Descriptor’ in something not a structure or union` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T21:43:14.653

你只想：

```
struct List_Node *ln1;
printf("%s", ln1->data); 
```

`struct File_Descriptor`是类型。`data`是结构成员名称。

尽管`printf`格式看起来完全错误。不知道你想在那里做什么。`%s`是字符串，`data`当然看起来不像字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T21:45:14.317

我相信您将类型名称与变量名称混淆了。为了访问结构的`data`成员`List_Node`，您使用以下内容：

```
struct List_Node *ln1; // initialize this
printf("%s", ln1->data); 
```

不要忘记，`ln1`在取消引用之前，您首先必须初始化指针以指向有效的内存位置。

# vb.net - 四舍五入到最接近的 5000

> ID：12904454
> 
> 赞同：0
> 
> 时间：2012-10-15T21:41:03.163
> 
> 标签：vb.net

我如何在 vb.net 中四舍五入到最接近的 5000。不能使用 math.round 因为它给出了错误。我正在微软 exel 中寻找类似 mround() 的东西。

```
 Math.round(43333 * 34, 5000) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T21:47:05.433

尝试

```
Math.Round(43000 / 5000) * 5000 
```

如：

```
For Each x In New Single() {2499, 2501, 7000, 21000, 43000, 99000}
    Console.WriteLine(String.Format( _
            "Rounding {0,7:N0} to the nearest 5,000: {1,7:N0}", _
            x, _
            Math.Round(x / 5000) * 5000) _
        )
Next

Console.ReadKey(True) 
```

输出：

```
Rounding   2,499 to the nearest 5,000:       0
Rounding   2,501 to the nearest 5,000:   5,000
Rounding   7,000 to the nearest 5,000:   5,000
Rounding  21,000 to the nearest 5,000:  20,000
Rounding  43,000 to the nearest 5,000:  45,000
Rounding  99,000 to the nearest 5,000: 100,000 
```

我要补充一点，默认的舍入行为[`Math.Round`](http://msdn.microsoft.com/en-us/library/as4h66hd.aspx)是[`MidpointRounding.ToEven`](http://msdn.microsoft.com/en-us/library/system.midpointrounding.aspx)文档描述为“*当一个数字介于两个其他数字之间时，它会向最接近的偶数四舍五入。* ”这意味着`0.5`可能会四舍五入`0`或`1`根据情况（其中是处理统计数据时的期望行为）。要更改此行为，您可以将`MidpointRounding.AwayFromZero`其作为第二个参数传递，该参数的行为将与您在学校所教的一样（`0.5`始终舍入为`1`，`-0.5`始终舍入为`-1`）。

# c# - 我怎样才能看到我的代码在汇编级别发生了什么？

> ID：12904458
> 
> 赞同：-1
> 
> 时间：2012-10-15T21:41:12.143
> 
> 标签：c#, assembly

> **可能重复：**[从 C# 代码中](https://stackoverflow.com/questions/9247222/generating-assembly-from-c-sharp-code)
> [检索 JIT 输出生成程序集？](https://stackoverflow.com/questions/6928442/retrieve-jit-output)

我开始学习汇编了！

我想知道是否可以看到我的代码的汇编`c#`代码？

例如，如果我有：

```
int i; 
```

我怎样才能：

1.  看汇编代码？
2.  在汇编代码中准确识别它的作用是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T23:00:35.807

使用调试器查看抖动生成的机器代码。开始调试并单步执行或设置断点。右键单击编辑器窗口，选择 Go To Disassembly。或者使用调试 + Windows + 反汇编。您要使用的其他调试窗口是寄存器和内存，它们显示原始 cpu 寄存器和内存视图。右键单击寄存器窗口以将寄存器添加到视图中。

您在那里看到的汇编代码有一些怪癖。所有代码都从地址 0 开始，它不显示实际地址，因为由于抖动，这是完全不可预测的。但这也会导致一个错误，CALL 指令的目标地址是错误的。而且您通常希望看到优化的代码，因为那是用户机器上实际运行的代码。切换到 Release 构建并使用 Tools + Options，Debugging，General，取消选中“Suppress JIT optimization on module load”选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T21:45:24.310

汇编代码通常只在 JIT 时编写，因此查看它的最佳位置，特别是如果您想了解它，是查看 VS 调试器。

[http://msdn.microsoft.com/en-us/library/a3cwf295.aspx](http://msdn.microsoft.com/en-us/library/a3cwf295.aspx)

如果您指的是 IL（中间语言），这不是汇编语言，而是存储在您的 EXE 或 DLL 中。一个很好的查看工具是 ILSpy。

[http://ilspy.net/](http://ilspy.net/)

# android - 找不到类 XMPP org.jivesoftware.smack.packet.Message

> ID：12904463
> 
> 赞同：1
> 
> 时间：2012-10-15T21:41:37.807
> 
> 标签：android, xmpp

[我从Davanum](http://davanum.wordpress.com/2008/12/29/updated-xmpp-client-for-android/)下载了 XMPP 项目的示例代码。但是当我调试它时，它给了我一个日志错误“找不到类 XMPP org.jivesoftware.smack.packet.Message”，即使我已经添加了所有 smack jar。

我在这条线上得到了例外。

```
ConnectionConfiguration connConfig =
            new ConnectionConfiguration(host, Integer.parseInt(port), service);
XMPPConnection connection = new XMPPConnection(connConfig); 
```

例外是`InvocationTargetException.<init>(Throwable) line: 50`

请帮助我，谢谢！

# api - 如何代表卖家使用亚马逊产品广告 API

> ID：12904465
> 
> 赞同：2
> 
> 时间：2012-10-15T21:41:59.900
> 
> 标签：api, amazon, product, ads

场景：我有一个拥有亚马逊账户的用户。他们有一个他们想在（亚马逊附属公司）上做广告的网站。他们已经注册并注册了亚马逊产品广告 API 的账户。他们有他们的访问 ID 和访问密码，我可以成功地使用他们的访问密钥来查找项目

但是我知道使用用户的访问令牌不是最佳实践，我让他们使用我自己的访问密钥创建一个单独的用户，通过亚马逊的身份访问管理控制台创建。但是，当我使用它们向亚马逊查询它返回的商品时

“您的 AccessKey Id 未注册 Product Advertising API。请使用在[https://affiliate-program.amazon.com/gp/flex/advertising/api/sign-in.html](https://affiliate-program.amazon.com/gp/flex/advertising/api/sign-in.html)注册后获得的 AccessKey Id 。”

有没有办法使用我的 IAM 系统中的访问令牌以某种方式链接到用户的注册帐户（已经可以访问产品 API）？

注意：创建的用户在用户策略中被授予完全管理员访问权限，但亚马逊仍然要求用户访问密钥 ID 专门注册到产品广告 API

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T01:08:56.047

似乎与我刚刚花了 2 周时间解决的问题相似。亚马逊在 API 帐户后面发生了一些奇怪的事情。

我怀疑您的问题（如果您还没有弄清楚）是您绑定到产品 API 代码的 ID 与亚马逊为该 ID 激活的任何内容都不匹配（反之亦然）。

* * *

我有多个帐户问题。

我的公司有 2 个帐户 - 自 1998 年以来我们一直拥有的印刷书籍的寄售帐户（亚马逊优势） - 用于网站展示广告和销售链接的广告帐户（亚马逊协会）

两个帐户的登录方式相同——但使用不同的 URL。没问题。

亚马逊为 Web 服务 (API) 登录提供了一个 URL。他们不检查您是否已经登录（就像我登录我的广告帐户一样）。他们不保留当前的登录信息；他们只是为 AWS 部分提供了另一个单独的登录框。

这就是造成问题的原因。

我使用我的凭据登录。我的仪表板显示我已注册 API 服务。我检索了产品 API 代码。他们没有工作。为什么？亚马逊链接到这些 API 代码的帐户是我的印刷书籍帐户。他们没有激活它以用于产品 API / 广告服务。（即使它显示为活动，它不是......）

解决方案：

我更改了我的登录——手动分离帐户——一个用于广告/AWS 登录，一个用于我的印刷书籍帐户。两个帐户都处于活动状态，并且都显示为已注册产品 API 服务，并且似乎都在工作。实际上，只有一个有效。

测试：

关闭所有浏览器后，我打开了 AWS 登录页面。这一次，我使用刚刚为广告帐户创建的新凭据登录。

我获得了产品 API 代码（与我的寄售帐户不同）。这些代码处于活动状态并提供有效的 API 连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-15T10:52:29.233

我从[aws论坛](https://forums.aws.amazon.com/thread.jspa?threadID=151500)得到了答案，它有效..

“因此，感谢内部传奇人物的帮助，找到了一个解决方案，为我解决了这个问题。在 AWS 管理控制台中，导航到您姓名下拉菜单下的“安全凭证”（[https://console.aws.amazon.com/ iam/home?#security_credential](https://console.aws.amazon.com/iam/home?#security_credential)）。在“访问密钥”下，您可以看到您的根访问密钥（分配给您的根用户的密钥是在您注册产品广告 API 时创建的）。如果您有 2 个，删除一个，然后生成一个新的。它将向您显示正确的 AWS 密钥和秘密密钥。这些与正确的关联标签配对应该可以让您访问 API。

我可能是在散布谣言，但不要相信你可以将 IAM 管理面板下的用户和组挂钩到产品广告 API 中......”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-30T04:09:35.050

我有同样的问题。我删除了有问题的帐户，转储了我的缓存。完全重新开始。问题解决了。

# matlab - 时移信号的互相关计算

> ID：12904469
> 
> 赞同：1
> 
> 时间：2012-10-15T21:42:14.513
> 
> 标签：matlab, signal-processing

有 2 个信号 A(t)、B(t) 代表输出功率。A是延时输出。如何实现这个公式

```
 Cross_cor(delay)=[A(t + delay) − <A(t)>]*[B(t) − <B(t)>] / {[A(t)-<A(t)]^2 * [B(t)-<B(t)]^2} ^2 
```

1.  我不明白分子意味着什么？
2.  如何绘制彩色地图或类似冲浪图的东西，从而可以用不同的颜色看到不同的区域。
3.  如何获得作为延迟移位时间函数的互相关图（延迟 X 轴，Y 轴上的 Cross_corr），以便可视化峰值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:15:21.167

我会说 [X] 是 X 的平均值：

> R(dt) = [(A(t + dt) - [A(t)]) * (B(t) - [B(t)])]/(std(A) * std(B))

分子采用两个函数 A(t) 和 B(t) 并将它们居中，这就是减去平均值的作用。我可以创建两个新函数，让这一切看起来更容易一些：

> C(t) = A(t) - [A(t)] D(t) = B(t) - [B(t)]

然后：

> R(dt) = [C(t + dt) * D(t)]/(std(C) * std(D))

现在我将这两个函数相乘并取平均值。如果这两个函数彼此精确地移动，这将是 1，这意味着正相关。

您可以通过执行以下操作在 Matlab 中执行此操作：

```
a = randn(1,50);
b = randn(1,50);

x1 = mean((a - mean(a)) .* (b - mean(b)))/(std(a) * std(b)) 
```

这给了我在 dt = 0 的交叉点，对于另一个 dt 做：

```
x2 = mean((a(2:50) - mean(a(2:50))) .* (b(1:49) - mean(b(1:49))))/(std(a) * std(b)) 
```

# django - 将 manage.py 指向特定的 PostegreSQL 模式

> ID：12904471
> 
> 赞同：3
> 
> 时间：2012-10-15T21:42:28.043
> 
> 标签：django, postgresql, psycopg2, django-postgresql

如何告诉 manage.py 在特定的 PostgreSQL 模式中运行？

我的数据库被分成多个模式，每个客户端/部署一个，以保持数据分离。

但是，似乎 Django 并没有真正很好地支持模式。如何使用 manage.py 为特定模式生成模型等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T22:05:35.943

您可以将默认模式分配给数据库用户，或者 - 准确地说 - 将模式搜索*路径*分配给用户。如果该路径仅包含一个模式，则您有效地为用户设置了默认模式。

然后沿路径查找任何不合格的对象名称（表、视图、函数...）。不合格的 CREATE 语句将在搜索路径的第一个模式中创建对象。

所以你需要做的就是改变 Django 用来连接数据库的用户：

```
alter user django_user set search_path to the_one_schema;
commit; 
```

之后，例如 a`create table foo`将在 schema 中创建表`the_one_schema`。

您需要注销然后再次登录以使更改“活动”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T21:31:12.447

以下是最终奏效的方法：

我编写了一个新的 manage.py 命令，它是我想要识别模式的命令（syncdb、migrate、changepassword）的包装器，并通过以下方式手动选择模式：

```
from django.db import connection
cursor = connection.cursor()
cursor.execute('SET search_path TO ' + my_little_schema) 
```

# sql - Charindex 更新声明问题

> ID：12904479
> 
> 赞同：1
> 
> 时间：2012-10-15T21:42:38.460
> 
> 标签：sql, tsql, indexing, sql-update, insert-update

先感谢您！我在 SQL Server 2008 R2 中工作。

我想要做的是我有一个文本类型列，它有一个名字和姓氏，然后显示一个 ^，我想要做的是捕获导致 ^ 的文本（所以本质上是名字和姓氏）和将其附加到同一个表中另一列（而不是替换）的最底部。

我试过使用 charindex 但我只是收到索引号，我似乎无法在 ^ 出现之前捕获文本，我只是得到了 ^ 的位置，而且我很难附加这个文本块到同一个表中的另一个文本类型列。为此，我一直在尝试 updatetext 功能，但它似乎不起作用。到目前为止，我已经放弃了我尝试过的东西，因为我在任何地方都没有错误。

总而言之：

我需要在文本数据类型列的开头捕获文本，直到它到达 ^ 符号

将该文本保存到某种变量中。

放置（追加），连同轻微的添加，到另一个文本数据类型列。

看起来应该很简单，但我遇到了困难，如果可能，请提出建议。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T21:48:37.243

CharIndex 为您提供您正在寻找的字符的数字位置。您需要在另一个函数（如 LEFT 或 RIGHT）中使用它来获取所需的子字符串。这是在 ^ 字符之前获取字段第一部分的方式：

```
SELECT LEFT(SomeField, CharIndex('^', SomeField) - 1) 
```

（您减去一个以从子字符串中排除 ^。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T22:00:35.560

`^`首先，让我们找到in的起始位置`col1`：

```
CHARINDEX('^', col1) 
```

然后，我们将`LEFT`通过指定要返回的字符数来使用返回列的左侧部分。但是，由于`^`是在起始位置，我们需要减去 1。

```
LEFT(col1, CHARINDEX('^', col1) - 1) 
```

然后，我们使用`+`( `CONCAT`in 2012+) 将另一列 ( `col2`) 连接到此：

```
col2 + LEFT(col1, CHARINDEX('^', col1) - 1) 
```

如果需要添加其他内容，可以使用加号分隔字符串值：

```
'Hello' + ' ' + 'World' 
```

最后的声明可能类似于：

```
SELECT col2 + LEFT(col1, CHARINDEX('^', col1) - 1) AS col 
```

**更新**

如果有些值没有`^`，则需要一条`CASE`语句来防止收到*“传递给 LEFT 或 SUBSTRING 函数的长度参数无效”*错误：

```
SELECT
  CASE
    WHEN CHARINDEX('^', col1) > 0
      THEN LEFT(col1, CHARINDEX('^', col1) - 1)
    ELSE col1
  END AS col 
```

# zend-framework - Zend_Db_Table 和 db->select 在控制器或模型中

> ID：12904483
> 
> 赞同：1
> 
> 时间：2012-10-15T21:43:04.690
> 
> 标签：zend-framework, model, controller, zend-db-table

我对 Zend 有点困惑。许多例子展示了控制器中 Zend_db_Table 的使用。但是根据我对 MVC 的了解，关于 DB 的任何内容都应该包含在模型中。现在 Zend 是由 PHP 团队创建和维护的，我真的不知道该怎么想，所以我不问就遵循规则。

这是我现在放入控制器中的代码类型的示例。

感谢任何可以澄清我的疑问的人。

```
$filter = $this->_getParam('filter', array());
$order_by = $this->_getParam('order_by', 'last_name');
$order = $this->_getParam('order', 'ASC');

// Select
$db = Zend_Db_Table::getDefaultAdapter();
$select = $db->select('*')->from('contact_address');

// Filter / Where
$where = array();
if(isset($filter['id']) AND $filter['id'] != ""){                                   $select->where('id = ?' , $filter['id']); }
if(isset($filter['title']) AND $filter['title'] != ""){                             $select->where('CONCAT(first_name, " ", last_name) LIKE ?', $filter['title'] . '%'); }
if(isset($filter['phone']) AND preg_match_all('/\d/', $filter['phone'], $matches)){ $select->where('phone LIKE ?', implode('', $matches[0]) . '%'); }
if(isset($filter['email']) AND $filter['email'] != ""){                             $select->where('email LIKE ?', $filter['email'] . '%'); }
if(isset($filter['published']) AND $filter['published'] != ""){                     $select->where('published = ?', $filter['published']); }
else{                                                                               $select->where('published >= 0'); }

// Order
$select->order($order_by . ' ' . $order);
$select->order('last_name ASC');

// Pagination
$paginator = Zend_Paginator::factory($select);
$paginator->setCurrentPageNumber($this->_getParam('page', 1));
$paginator->setItemCountPerPage($_SESSION['LIMIT_PER_PAGE']); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T06:07:55.740

这是来自 zend 大师[http://www.slideshare.net/weierophinney/architecting-your-models](http://www.slideshare.net/weierophinney/architecting-your-models)的关于 Zend 中模型部分的漂亮幻灯片。我花了一段时间才完全理解 Zend 是如何看待 MVC 的。我们更进一步，引入了用于模块间通信的服务层[如何在 Zend Framework 中实现服务层？](https://stackoverflow.com/questions/2458195/how-to-implement-service-layer-in-zend-framework)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T02:48:10.143

是的，您认为与 Db 的大部分交互都应该进入模型是正确的。

但有时易用性和简单性可能会使在控制器本身中运行一些查询更加可行。

但是，您希望您的代码如何完全是您的选择。

让我们以您给出的示例为例。你这样做的方式似乎很好，如果你在相应的模型中创建一个方法并使用你获得的参数调用它并从那里返回 $select 变量，你可以实现它。

希望能帮助到你。

# vb.net - 在 LINQ 查询选择语句中使用 .ToString

> ID：12904484
> 
> 赞同：3
> 
> 时间：2012-10-15T21:43:04.700
> 
> 标签：vb.net, linq, linq-to-entities

我有以下 LINQ 到实体查询*（使用 odp.net）*：

```
暗查询 = 来自 X.VIEW 中的 Elemento
            其中 Elemento.code = "10"
            使用 {Elemento.code, .Time = Elemento.Time.ToString("HH:mm")} 选择新建
查询.ToList()

```

`ToList()`并且代码在该方法上引发异常：

`LINQ to Entities does not recognize the method 'System.String ToString()'`

我已经阅读了所有关于此的内容，但还没有找到一个简单的解决方法。

* * *

Lazyberezovsky 有正确的答案，我之前无法让它工作，因为我正在这样做：

```
昏暗查询 =（来自 X.VIEW 中的 Elemento
            其中 Elemento.code = "10"
            使用 {Elemento.code, Elemento.Time}).ToList 选择新建
Dim query2 = from elemento in query
        选择新的 {elemento.code, TIME = elemento.Time.ToString("HH:mm")}

暗淡的结果 = query2.ToList()

```

但这不起作用，显然你必须一步完成。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T21:50:44.373

您可以将 DateTime 转换为内存中的字符串。只需`ToList`在转换时间之前拨打电话：

在 C# 中：

```
var query = from Elemento in X.VIEW
            where Elemento.code == "10"
            select new { Elemento.code, Elemento.Time };

var result = query.ToList() // now you are in-memory
                  .Select(x => new { x.code, Time = x.Time.ToString("HH:mm") }); 
```

在 VB.Net 中：

```
Dim query = From Elemento In X.VIEW
    Where Elemento.code = "10"
    Select New With {Elemento.code, Elemento.Time}

Dim result = query.ToList() _
    .Select(Function(x) New With {x.code, .Time = x.Time.ToString("HH:mm")}) 
```

顺便说一句，你为什么要选择`Elemento.code`结果，如果你在 where 运算符中按它过滤（它总是等于“10”）。

# jquery - 触发带有链接的jquery ui对话框

> ID：12904485
> 
> 赞同：0
> 
> 时间：2012-10-15T21:43:06.503
> 
> 标签：jquery, jquery-ui, hyperlink, jquery-ui-dialog

我正在尝试使用链接触发 jQuery UI 对话框。这是链接：

```
<a href="#" id="mydialog">Open the dialog</a> 
```

这是页面前面的javascript：

```
$(document).ready(function() {
    var $mydialog = $('<div></div>')
        .html('dialog body')
        .dialog({
            autoOpen: false,
            title: 'dialog title'
        });
    $('#mydialog').click(function() {
        $mydialog.dialog('open');
    });
}); 
```

在使用分配了适当 ID 的按钮时，此 javascript 以前对我有用，但它不适用于链接。此外，我无法弄清楚如何停止链接重定向到 href 指定的地址（在点击处理程序中设置 return false 不起作用）。

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:45:38.387

我认为您的代码不适用于`a`标签，因为它们正在执行默认行为。基本上，页面在对话框打开之前就在移动。让它停止`event.preventDefault()`。请注意`function`也已`event`通过。

```
$('#mydialog').click(function(event) {
    event.preventDefault();
    $mydialog.dialog('open');
}); 
```

# php - 如何找到包含在另一个 php 文件中的 php 文件的相对路径？

> ID：12904489
> 
> 赞同：0
> 
> 时间：2012-10-15T21:43:21.643
> 
> 标签：php

首先，如果这个问题已经得到解答，我想道歉，我正在寻找两天没有运气。

这是我的设置：

我有 2 个 php 文件，位于 2 个不同的文件夹中：

AAA/1.php AAA/BBB/CCC/2.php

“2.php”包含在“1.php”中。

由于我需要在几个不同的文件夹中使用“2.php”，因此我需要它能够知道他在哪个文件夹中进行了本地化。所以在“2.php”中我应该有一些代码，比如：

```
 $directory = [whatever code I need to know where I am]; 
```

所以在上面的例子中，相对路径应该是：BBB/CCC

我尝试了几个我发现的函数和编码，但我只能获得“1.php”的完整服务器路径。

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T21:46:38.417

我相信你正在寻找的是`dirname(__FILE__);`

请参阅[PHP：魔术常数](http://php.net/manual/en/language.constants.predefined.php)和[`dirname()`](http://php.net/dirname)更多信息。

> `__FILE__` 文件的完整路径和文件名。如果在包含中使用，则返回包含文件的名称。自 PHP 4.0.2 起， **FILE**始终包含一个绝对路径，其中符号链接已解析，而在旧版本中，它在某些情况下包含相对路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T21:48:50.117

您可以使用文档根目录作为路径的开始，这样您就不必担心它了。

例如

```
$_SERVER['DOCUMENT_ROOT'].'/AAA/1.php' 
```

和

```
$_SERVER['DOCUMENT_ROOT'].'/AAA/BBB/CCC/2.php' 
```

只要您的 php.ini 配置没有太大变化，无论您身在何处都应该可以工作。

或者您可以使用[basename()](http://www.php.net/manual/en/function.basename.php)、[dirname()的组合](http://php.net/dirname)

# vim - 将 vim 中的 grep 搜索限制为与当前文件具有相同扩展名的文件

> ID：12904490
> 
> 赞同：2
> 
> 时间：2012-10-15T21:43:22.563
> 
> 标签：vim, grep, keymapping

我正在尝试制作一个键映射，它将 grep 光标下的单词。这是我到目前为止所拥有的：

```
map <Leader>g :grep -r '<C-R><C-W>' ./<CR><CR>:cw<CR> 
```

我希望它只查找我当前正在处理的类型的文件（例如，在 .coffee 文件中进行 grepping 不会列出 .js 文件）。使用 grep，您可以执行以下操作（例如）：

```
grep -r --include='*.coffee' 'whatever' ./ 
```

仅搜索具有特定扩展名的文件。为此，我需要当前文件的扩展名。那么，获取当前文件扩展名的最简单方法是什么？

如果有更好的方法来完成这项任务，那也很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T22:15:07.257

当然，就在我放弃并询问SO之后，我想通了......

```
map <Leader>g :grep -r --include='*.<C-R>=expand('%:e')<CR>' '<C-R><C-W>' ./<CR><CR>:cw<CR> 
```

expand() 返回有关当前缓冲区的各种信息。查看 :help expand() 了解详情。

在这种情况下，expand('%:e') 返回当前文件的扩展名。

在命令行模式下，<CR>=some_function()<CR> 将在命令行中插入 some_function() 的结果。

# flash - 如何从 Flash 中的 MovieClips 中获取多边形？

> ID：12904491
> 
> 赞同：4
> 
> 时间：2012-10-15T21:43:22.330
> 
> 标签：flash, actionscript, movieclip

我有一个读取 swf 并通过其中的影片剪辑的动作脚本。

影片剪辑应该是简单的形状。我想将这些影片剪辑中的数据转换为多边形。换句话说，我想要一系列代表影片剪辑形状的坐标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T22:40:00.310

没有简单的方法可以做到这一点。将形状绘制到舞台后，您可以访问的唯一图形信息是渲染的像素位图；所有矢量信息都丢失了。

要将形状转换为多边形，您必须分析存储在 SWF 文件中的 ActionScript 字节代码（查找并提取包含矢量绘图信息的字节，并使用它在代码中重新创建形状），或者使用颜色位图中的信息以跟踪形状（您可能会猜到，这永远不会完全准确）。

无论哪种方式，这都不是一项简单的任务。

# iphone - 从 CIImage 获取 UIImage 无法正常工作

> ID：12904492
> 
> 赞同：5
> 
> 时间：2012-10-15T21:43:25.230
> 
> 标签：iphone, uiimage, core-image, cgimageref, ciimage

我无法从 CIImage 获取 UIImage。下面的代码行在 iOS6 上运行良好：（输出图像是 CIImage）

```
self.imageView = [UIImage imageWithCIImage:outputImage]; 
```

或者

```
[self.imageView setImage:[UIImage imageWithCIImage:outputImage]]; 
```

当我在运行 iOS 5 的设备上运行同一行代码时，imageView 为空白。如果我记录 UIImage 的 size 属性，它是正确的，但图像永远不会显示在屏幕上。

当我使用 CGImageRef（如下所示）时，它在两种设备上都可以正常工作，但是当我进行堆镜头分析时，它会导致巨大的内存增长。

```
context = [CIContext contextWithOptions:nil];
CGImageRef ref = [context createCGImage:outputImage fromRect:outputImage.extent];
self.imageView.image = [UIImage imageWithCGImage:ref scale:1.0 orientation:UIImageOrientationUp];
CGImageRelease(ref); 
```

有谁知道为什么 UIImage imageWithCIImage 不起作用？根据 UIImage 类参考，它应该适用于 iOS5 及更高版本。另外，为什么使用 CGImageRef 会导致如此巨大的堆增长？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T22:10:10.147

On iOS 5.0, `-imageWithCIImage:` never seemed to work properly, and we were told to use the `-createCGImage:fromRect:` approach you describe above in order to render the Core Image filter chain to a raster output.

As you see, the downside to this is that `-createCGImage:fromRect:` creates a new CGImageRef at the size of your target image, and the bitmap at its heart is passed on to your new UIImage. This probably means that you have at least two full bitmaps representing your final filtered frame in memory at one point, which could cause quite a spike if these are large images.

It appears that `-imageWithCIImage:` has been fixed in iOS 6.0 (Core Image has had a lot of improvements made from 5.0 to 6.0). While I can only speculate as to why it doesn't lead to this memory spike, I bet it's due to the use of a texture cache to share memory between the output OpenGL ES texture from the filtering process and the final bitmap that's stored in your UIImage. I do this in my GPUImage framework to cut down on memory consumption when filtering large images, and it would make sense for Core Image to do the same. Again, this is just speculation.

Unfortunately, it looks like you'll need to do a little version testing here and fall back to the old way of getting output from CIImages if you want to support iOS 5.0 with your application.

# asp.net-mvc - 如何将数据从多个控制器返回到视图？

> ID：12904494
> 
> 赞同：0
> 
> 时间：2012-10-15T21:43:31.337
> 
> 标签：asp.net-mvc, ef-code-first

这一定是一种常见的情况，也许我只是在搜索错误的术语......

我有一个使用 EF Code First 的 ASP.NET MVC 项目。

我有一个用于电子邮件类型的对象/表/控制器（例如家庭、工作、学校）。对象很简单，只有一个 ID 和一个 Name 字段。这使得管理各种电子邮件类型变得容易。

我有另一个用于电子邮件的对象/表/控制器。它有一个 ID、名称（例如 bob@me.com）和 EmailType 属性。

在创建新电子邮件的视图中，我有一个文本框来输入电子邮件地址。我还需要在此处放置一个下拉列表，以便可以选择 EmailType 并将其分配给电子邮件。我认为这是非常标准的东西。

所以...在我的 EmailController 中，**Create()**函数只返回一个 View()。

**我还需要返回数据来填充 EmailType 下拉列表。**

我该如何做到这一点？

（注意：我想我可以使用 JQuery/AJAX 来提取这些数据，我也可以将其填充到 ViewBag 或类似的东西中，但似乎应该有更直接的方法？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T22:00:07.840

根据我的经验，严格为每个实体设置一个控制器是徒劳的。也就是说，控制器操作可以而且应该能够与不止一种类型的实体一起使用。我认为在这种情况下最好的选择是将用于检索 EmailTypes 列表的代码抽象为服务类，然后从`EmailController.Create()`和`EmailTypesController.Index()`.

然后，您可以将该属性添加`IList<SelectListItem> EmailTypes { get; set; }`到操作视图的 ViewModel `EmailController.Create()`。

# javascript - 检查 isNan 是否处于某个条件

> ID：12904495
> 
> 赞同：0
> 
> 时间：2012-10-15T21:43:38.533
> 
> 标签：javascript

我正在做一些 JavaScript 自学，试图检查 n 是否不是阶乘函数的第三个 if 中的数字，但我无法让它工作。任何帮助，将不胜感激

```
var factorial = function(n) {
    // Update so that all tests pass
    if (n > 20) {
        return undefined;
    }
    if (n === 1) {
        return 1;
    }
    if(isNan(n)){
        return undefined;
    }
    return n * factorial(n-1);
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T21:47:48.647

`isNaN()`有两个大写`N`的s。

# sql-server - 用于从包含模板和不同数量项目的表中读取的连接类型？

> ID：12904498
> 
> 赞同：0
> 
> 时间：2012-10-15T21:43:57.140
> 
> 标签：sql-server, join

我有两张表，一张包含问题（被认为是“模板”）：

```
|QuestionID|QuestionText      |
|----------|------------------|
|1         |What is your name?|
|2         |What is your age? |
|-----------------------------| 
```

还有一个包含这些问题的答案，由一个单独的客户 ID 值键入：

```
|CustID    |QuestionID|Answer |
|----------|------------------|
|1000      |1         |John   |
|1000      |2         |22     |
|2000      |1         |Alice  |
|-----------------------------| 
```

如您所见，客户 #1000 回答了问题 1 和 2，客户 #2000 只回答了问题 1。

我需要由客户将这些加载到网页上的网格中，我想我只需在模板和答案表之间进行左外连接即可获得如下内容：

```
|CustID    |QuestionID|Answer |
|----------|------------------|
|2000      |1         |Alice  |
|2000      |2         |<null> |
|-----------------------------| 
```

因此，在这种情况下，cust #2000 将返回`Answer`问题 #2 的列为空，并且应用程序将知道需要回答它。这是我尝试过的 SQL 的一个示例，但无论我使用多少个`OUTER`等组合，我都无法让它与单个查询一起使用：`LEFT``JOIN`

```
select 
    q.QuestionID,
    q.QuestionText,
    a.CustID,
    a.Answer,
from 
    SurveyAnswers a  
        full outer join SurveyQuestions q
        on a.QuestionID = q.QuestionID
    where 
        a.CustID = @CustomerID 
```

基本上我需要表中的*所有*记录，以及与 CustomerID 匹配的任何记录中`SurveyQuestions`的列值。`Answer``SurveyAnswers`

相反，我只得到一个`SurveyAnswers`有答案的记录，因此是匹配的（我猜？）在`SurveyQuestions`. 我的 SQL-fu 不强。

我也试过`UNION`和朋友们，但两张桌子有不同的结构，所以效果不太好。

我当然可以分别提取问题和答案，并在我的 C# 代码中进行“合并”，但我想看看是否可以直接从存储过程中进行。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T22:21:33.413

您遇到的问题是，在对不匹配的行（示例中的问题 2）进行外连接之后，不匹配表（SurveyAnswers）的该行的所有列的值都为 NULL。这包括 CustId 列。稍后执行的 WHERE 会看到 NULL = @CustomerId 并排除该行。要解决这个问题，您需要将条件移动到连接子句中。因此，如果存在这样的答案，您需要向 SQL Server 询问所有问题以及“@CustomerId”给出的每个问题的答案。您的查询要求（所有问题及其所有答案），但仅返回“@CustomerId”回答的那些记录。

```
SELECT 
    q.QuestionID,
    q.QuestionText,
    a.CustID,
    a.Answer,
FROM 
    SurveyAnswers a  
        RIGHT outer join SurveyQuestions q
        on a.QuestionID = q.QuestionID
    AND
        a.CustID = @CustomerID; 
```

应该做的伎俩。

# css - 绝对内部相对溢出即

> ID：12904500
> 
> 赞同：0
> 
> 时间：2012-10-15T21:44:01.053
> 
> 标签：css, internet-explorer, css-position

下面的代码有一个输入字段，它位于绝对定位的 div 内部，该 div 位于相对位置 div 的内部。这应该是一些 CSS 技巧。还有另一个带有溢出的潜水，以便内容滚动。在 IE 9 中，输入栏几乎像固定位置元素一样浮动。它在 Firefox 中没有这种行为。我有这个复杂的 jquery 小部件，它有一个类似的问题，我刚刚将它分解成一个更简单的形式来尝试解决它。

## 测试

```
 <div style="position:relative">

    <span style="position:absolute;top:0">
      some input <input>
    </span>
  </div>
 <br>
 some numbers

   1 <br>

   2 <br>

   3 <br>

   4 <br>

   5 <br>

   6 <br>

   7 <br>

   8 <br>

   9 <br>

   10 <br>

   11 <br>

   12 <br>

   13 <br>

   14 <br>

   15 <br>

   16 <br>

   17 <br>

   18 <br>

   19 <br>

   20 <br>

   21 <br>

   22 <br>

   23 <br>

   24 <br>

   25 <br>

   26 <br>

   27 <br>

   28 <br>

   29 <br>

   30 <br>

   31 <br>

   32 <br>

   33 <br>

   34 <br>

   35 <br>

   36 <br>

   37 <br>

   38 <br>

   39 <br>

   40 <br>

   41 <br>

   42 <br>

   43 <br>

   44 <br>

   45 <br>

   46 <br>

   47 <br>

   48 <br>

   49 <br>

   50 <br>

   51 <br>

   52 <br>

   53 <br>

   54 <br>

   55 <br>

   56 <br>

   57 <br>

   58 <br>

   59 <br>

   60 <br>

   61 <br>

   62 <br>

   63 <br>

   64 <br>

   65 <br>

   66 <br>

   67 <br>

   68 <br>

   69 <br>

   70 <br>

   71 <br>

   72 <br>

   73 <br>

   74 <br>

   75 <br>

   76 <br>

   77 <br>

   78 <br>

   79 <br>

   80 <br>

   81 <br>

   82 <br>

   83 <br>

   84 <br>

   85 <br>

   86 <br>

   87 <br>

   88 <br>

   89 <br>

   90 <br>

   91 <br>

   92 <br>

   93 <br>

   94 <br>

   95 <br>

   96 <br>

   97 <br>

   98 <br>

   99 <br>

   100 <br>

</div>   
</div>

    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:48:12.527

我不相信您实际上正在使用您提供的代码，因为您的 3 个结束标签没有开始标签。

您正在对内联元素应用绝对定位。

尝试将“display:block”添加到您的跨度中，并且不要忘记添加一个左值。

# java - Java 日期解析器关闭两年

> ID：12904501
> 
> 赞同：3
> 
> 时间：2012-10-15T21:44:04.220
> 
> 标签：java, date

我真的不知道从哪里开始调试这个。

代码：

```
String date = "Mon, 15 Oct 2012 20:32:12 +0000 (GMT)";

        SimpleDateFormat format = new SimpleDateFormat("EEE, dd MMM yyyy HH:MM:ss Z");

        try {
            Date date2 = format.parse(date);
            System.err.println("parsed: " + date2);
        }
        catch (ParseException e) {
            System.err.println("Failed to parse: " + format);
        } 
```

输出：

```
parsed: Fri Aug 15 16:00:12 EDT 2014 
```

为什么这要推迟两年零两个月？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T21:44:47.730

使用小`mm`几分钟

```
EEE, dd MMM yyyy HH:mm:ss Z 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T21:47:53.987

Jigar Joshi 已经回答了主要问题 - 但只是提示设置`DateFormat.setLenient(false)`（请参阅[JavaDoc](http://docs.oracle.com/javase/6/docs/api/java/text/DateFormat.html#setLenient%28boolean%29)）将避免很多这样的解析问题，因为格式不会默默地接受无意义的值。

第二个提示（因为我最近有这点）是始终使用 am 和 pm 时间戳测试您的 DateFormats，因为它很容易混淆格式（12 小时`hh`和`HH`24 小时格式）。否则，您会发现您的测试数据工作正常，但实际数据失败并出现令人困惑的错误。

# scala - 如何从 Scala API for List 解释 :::？

> ID：12904505
> 
> 赞同：1
> 
> 时间：2012-10-15T21:44:44.927
> 
> 标签：scala

我正在尝试`:::`使用`List`. 好的，在 REPL 中输入两个列表并查看发生了什么之后，我知道它现在在做什么。但是 ::: 方法的 API 定义很难阅读和理解。我只是通过阅读它“返回”来“得到它”。

```
def :::[B >: A](prefix: List[B]): List[B]
    Adds the elements of a given list in front of this list.
    prefix  The list elements to prepend.
    returns list resulting from the concatenation of the given list prefix and this list.
    Example:  List(1, 2) ::: List(3, 4) = List(3, 4).:::(List(1, 2)) = List(1, 2, 3, 4) 
```

特别是这部分是什么意思：`[B >: A](prefix: List[B])`。我的意思是我能够通过阅读方法返回的内容并使用它来理解方法返回的内容。对于未来，我希望能够阅读不同方法的 API 并尝试理解所有内容。这就是我问这个问题的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T21:53:55.513

`[B >: A]`意味着该方法是泛型的，并且采用一个称为的类型参数`B`，该参数必须是`A`. `(prefix : List[B])`意味着它需要一个名为`prefix`type 的实际参数`List[B]`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T22:21:36.557

如果不是为了子类型，这将被编写`def :::(prefix: List[A]): List[A]`，那么`[B >: A]`只是让你，比如说，将 a 前缀`List[Animal]`到 a 上`List[Cat]`，得到一个更大的`List[Animal]`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T09:51:01.960

这两个答案都是正确的。您只需要记住这`A`是您当前列表的类型参数，并且`B`是您提供给的列表的类型参数`:::`

如果你还没有信心，可以试试自己定义的List

```
 class MyList[+A]{
    def :::[B >: A](prefix: MyList[B]): MyList[B] = new MyList[B]()
  }

  class Animal
  class Dog extends Animal
  class Pig extends Animal
  class Rock 
```

现在您可以在 REPL 中进行测试：

```
scala>  new MyList[Dog]
res0: Test.AkkaTest.MyList[Test.AkkaTest.Dog] = Test.AkkaTest$MyList@190a0d51

scala>  new MyList[Pig]
res1: Test.AkkaTest.MyList[Test.AkkaTest.Pig] = Test.AkkaTest$MyList@1db5d2b2

scala>  res0:::res1
res2: Test.AkkaTest.MyList[Test.AkkaTest.Animal] = Test.AkkaTest$MyList@25927275

scala>  new MyList[Rock]
res3: Test.AkkaTest.MyList[Test.AkkaTest.Rock] = Test.AkkaTest$MyList@49f85a86

scala>  res3:::res0
res4: Test.AkkaTest.MyList[ScalaObject] = Test.AkkaTest$MyList@42130c2

scala>  res0:::res3
res5: Test.AkkaTest.MyList[ScalaObject] = Test.AkkaTest$MyList@6f24d504 
```

所以你应该知道 ::: 连接两个列表并创建一个泛型类型是第一个共同祖先的列表。这是因为类型列表是协变的，所以例如你可能会认为，在 res3 和 res0 的情况下，编译器会执行以下操作：

*   A 是 Rock B 是 Dog，B 不是 A 的父类，也许我应该抛出编译器错误？
*   但由于 MyList 是协变的，MyList[Dog] 是 MyList[ScalaObject] 的子类。
*   酷，ScalaObject 是 Rock 的父类，所以我将创建一个 ScalaObject 列表

# php - WordPress主题未正确显示图像

> ID：12904512
> 
> 赞同：0
> 
> 时间：2012-10-15T21:45:14.607
> 
> 标签：php, html, css, wordpress, wordpress-theming

我正在开发 108.179.217.161，这是一个自定义 WordPress 主题，我在主页上设置了一个滑块。但是，在每个单独的页面上，我想使用特色图像作为实际的主图像，并且只使用主页上的旋转器。

我正在使用带有旋转器小部件的小部件区域以及 if 语句来区分页面是否不是主页，但是图像无法正确呈现。请参阅 108.179.217.161/contact-us/。

下面是我的代码：

```
<div id="slider" style="position:relative;height:679px;width:100%;">
<!--<img width=1228 src="<?php bloginfo(template_url)?>/images/room-slider.png" alt="" style="position:absolute;z-index:-20;width:100%;height:679px;"/>-->
<div style="position:absolute;z-index:-20;width:100%;height:679px;overflow:hidden;">
<?php if (is_page('Home')) {?>
<?php if (!function_exists('dynamic_sidebar') || !dynamic_sidebar('Rotator')) : ?>
[ do default stuff if no widgets ]
<?php endif; ?>
<? } else {
    $thumb = get_post_meta($post->ID,'_thumbnail_id',false);
    $thumb = wp_get_attachment_image_src($thumb[0], 'header', false);
    $thumb = $thumb[0];
echo "<img src='$thumb' alt='' style='position:relative;z-index:1;width:1621px;height:679px;'";
}?>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T22:21:40.673

棘手的业务那些 wordpress 附件！

首先，您在 wp_get_attachment_image_src 调用中调用“标题”图像大小。您是否在 functions.php 文件中定义了此自定义图像大小？

接下来，确保在您的媒体页面上，这些文件实际上已附加到您的帖子或页面。我假设您上面的代码处于循环中？否则，您需要告诉 wordpress 您在哪个页面/帖子上。请参阅 wp_query。

接下来，您能否确认如果 if() 语句检测到非主页，您可以回显“NON HOME PAGE”或类似内容，因此您知道该函数本身有效吗？

最后，我必须检查一下，但我想当你打电话时：

```
$thumb = get_post_meta($post->ID,'_thumbnail_id',false); 
```

然后将下一行中的返回值称为：

```
$thumb[0] 
```

我不确定你是否从 get_post_meta 得到一个关联数组。根据 Codex，他们说“此函数返回自定义字段的值”。

但是关于 wp_get_attachment 调用，Codex 说：“返回具有图像属性的数组”。所以你在这里引用返回的数组是正确的。

所以我建议的重写是：

```
$myID = get_post_meta($post->ID,'_thumbnail_id',false);
$myPic = wp_get_attachment_image_src($myID, 'header', false);
$thumb = $myPic[0]; 
```

希望对您有所帮助-稍后我会回来查看您是否有任何进展

瑞克

# javascript - JavaScript 图表趋势线（区域背景颜色）和倒置的 y 轴

> ID：12904517
> 
> 赞同：1
> 
> 时间：2012-10-15T21:45:31.770
> 
> 标签：javascript, graph, trendline

我需要一个跨浏览器/平台的两个系列折线图/图表。我们曾经有 fusionchart，但由于一些已知的限制，我们想使用 jqplot 之类的东西。

目标靠近附加图像，除了 1 件事：y 系列值应该倒置（不是从 110 到 -10，而是从 -10 到 110）。我不知道如何在 jqplot 中做到这一点。

总结一下，我们需要：

*   两个系列折线图
*   y系列从最小值到最大值（**不知道**）
*   带有（区域背景颜色）的趋势线，右侧带有“严重损失”、“中度损失”和“轻度损失”等标签。（**不知道**）

使用哪个 JavaScript 图形无所谓，只要满足以上 3 个要求即可

![示例图](../Images/27509c35b76c61f5d2715e0571814b35.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T08:23:29.233

对不起，伙计们，我终于弄清楚了如何使用[flot](http://www.flotcharts.org/)。

*   两个系列折线图
*   y系列从最小值到最大值（**带有yaxis的transform和inverseTransform函数**）
*   带有（区域背景颜色）的趋势线，右侧带有“严重损失”、“中度损失”和“轻度损失”等标签。（**有标记，虽然没有标记的标签，但我可以尝试破解它**）

# objective-c - 用数据填充 NSArray

> ID：12904520
> 
> 赞同：0
> 
> 时间：2012-10-15T21:45:41.807
> 
> 标签：objective-c, ios, nsmutablearray, nsarray, image-gallery

我想在选择一行后填充一个数组。现在我想使用一个函数填充一个数组。情况就是这样。我有一个显示专辑标题的表格视图。当您选择一行时，您会使用 FGallery 库显示所有图片。这是我填充数组的函数。

```
- (NSMutableArray *)getAllPicturesOfAlbumId: (int)AlbumId
{
    NSLog(@"tot hier");
    _picturesForAlbum = [[NSMutableArray alloc]init];
    NSArray *results = [[NSArray alloc]init];
    //picture_Url = @"";
    NSLog(@"tot hier");
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"whichAlbum.album_id == %d", AlbumId];
    [request setEntity:[NSEntityDescription entityForName:@"Picture" inManagedObjectContext:self.genkDatabase.managedObjectContext]];
    [request setPredicate:predicate];
    NSError *error = nil;
    NSLog(@"tot hier");
    results = [self.genkDatabase.managedObjectContext executeFetchRequest:request error:&error];
    if (results == nil) {
        // handle errors
        NSLog(@"geen resultaten");
    } else if (results.count == 0) {
        // nothing found
        NSLog(@"0 resultaten");
    } else {
        for(int i = 0; i < results.count ; i++){
           // NSLog(@"%@",[results valueForKey:@"url"]);
            [_picturesForAlbum addObject: [results valueForKey:@"url"]];
        }
    }

    return _picturesForAlbum;
} 
```

这是我的 FGallery 方法。

```
- (int)numberOfPhotosForPhotoGallery:(FGalleryViewController *)gallery
{
     return [networkImages count];

}

- (FGalleryPhotoSourceType)photoGallery:(FGalleryViewController *)gallery sourceTypeForPhotoAtIndex:(NSUInteger)index
{
     return FGalleryPhotoSourceTypeNetwork;
}

- (NSString*)photoGallery:(FGalleryViewController *)gallery urlForPhotoSize:(FGalleryPhotoSize)size atIndex:(NSUInteger)index {
    return [networkImages objectAtIndex:index];
} 
```

这就是我在 didSelectRowAtIndexPath 中所做的

```
networkImages = [[NSArray alloc] initWithArray:[self getAllPicturesOfAlbumId:indexPath.row]];
networkGallery = [[FGalleryViewController alloc] initWithPhotoSource:self];
[self.navigationController pushViewController:networkGallery animated:YES]; 
```

出于某种原因，我的networkImages被填充了几次，它从方法“getAllPicturesOfAlbumId”返回的数组因此我认为我收到以下错误。

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayI length]: unrecognized selector sent to instance 0xa15d090' 
```

有人知道问题是什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T22:03:10.187

对数组调用 valueForKey 会返回一个包含该键的所有值的数组。因此，在 getAllPicturesOfAlbumId 方法中，您不应该循环遍历结果，只需返回 [results valueForKey:@"URL"]（因此甚至不需要创建 _picturesForAlbum 数组）。

# php - 如何使用 CodeIgniter 让 $_POST 方法在子域上工作？

> ID：12904521
> 
> 赞同：0
> 
> 时间：2012-10-15T21:45:41.710
> 
> 标签：php, codeigniter, mod-rewrite, post

正如我的标题所说， $ _POST 方法在我的 CodeIgniter 安装中无法正常工作。发布表单时，这些值不会遵循。

**奇怪的事情 1：** 它在我的具有**完全相同代码**的“非子域”网站上运行良好。

**奇怪的事情2：** 在路径中添加“/index.php/”时有效。但是，我还没有在我的其他网站上这样做。但是我在两个站点上都使用了 .htaccess，甚至这些文件看起来都一模一样。这是代码：

```
#php_value default_charset UTF-8

RewriteEngine on

RewriteCond $1 !^(index\.php|assets|img|swf|xml|robots\.txt|css|js|favicon.ico|robots.txt|404.html)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

那么，如何让表单帖子在子域上的 CodeIgniter 安装上正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:27:34.330

您的基本网址设置为什么？

当有人访问没有子域`subdomain.mysite.com`的表单时，很可能会发生这种情况`mysite.com`。

试试这个（你很可能摆脱所有那些额外的重写规则）：

`$config['base_url'] = 'http://' . $_SERVER['HTTP_HOST'] . '/site-folder-if-any/';`

我在发送带有子域的 $_POST 数据时成功使用了它

这也将确保生成的所有链接`site_url(), form_open(), etc.`都具有正确的 url。

# php - 使用 Jquery 克隆表输出并在弹出窗口中显示

> ID：12904522
> 
> 赞同：0
> 
> 时间：2012-10-15T21:45:52.257
> 
> 标签：php, jquery

这可能相当简单。我有一个用 php/mysql 动态生成的表，比如说；

```
<table id="mytable">
<tr><td>1</td><td>2</td><td>3</td></tr>
<tr><td>4</td><td>5</td><td>6</td></tr>
<tr><td>7</td><td>8</td><td>9</td></tr>
</table> 
```

我想复制这个表的整个html，这样我就可以在php的另一个页面上显示它。我该怎么做呢？我可以以某种方式将 html 存储在 php 会话中吗？

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T22:31:39.203

使用 ajax 更容易将任何类型的数据发送到其他页面或文件

```
<input type='text' id='myfield' />
$.ajax({
    url: 'myOtherFile.php',
    type: 'post',
    data: 'myvar='+ $('#myfield').val(),
    success: function(answerData){
         $('#whereIlikeputMydata').html(answerData);
    }
}); 
```

所以你所有的数据和连接功能都在像这样的其他文件中

```
$data=$_POST['myvar'];
 #do all operations with your var $data and print it
echo $myResult; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T21:55:50.770

是的，这是可能的。

要直接回答您的问题，您可以使用[jQuery 的 html 方法](http://api.jquery.com/html/)获取表格的内容：

`var myTabelContents = $('#mytable').html();`

然后将其注入另一个 html 元素，我们会说*mytable2*，其中：

`$('#mytable2').html(myTableContents);`.

这将需要在页面中生成弹出窗口，而无需用户实际离开您所在的页面。 *（离开页面会破坏存储在 javascript 内存中的对象）。*

有一些方法可以在本地保存这些数据，以便可以通过利用 HTML5 或将信息保存到 cookie 或 PHP 会话在后续页面上查看。

但是，根据您所描述的，在我看来，这听起来像是在 PHP 中最好使用*include*或*require*处理的解决方案。在 PHP 中，您可以将任何文件的内容包含到任何其他文件中。我会考虑将您的表格保存到外部文件，例如*mytable.template.php*。然后，您可以使用 include 语句将该表包含在任意数量的页面上。例如：

**在page1.php ..**

`include 'mytable.template.php';`

[请务必在此处阅读](http://www.w3schools.com/php/php_includes.asp)*include*和*require*之间的区别。

# javascript - 如何使浏览器在比网站更宽的图像上居中

> ID：12904527
> 
> 赞同：4
> 
> 时间：2012-10-15T21:46:29.603
> 
> 标签：javascript, css

我的网站宽 900 像素。我有一张我想运行更宽的图像，1300 像素，但仍位于页面的中心。目前，当我在浏览器中打开页面时，我位于图像的左侧。我可以 ctrl+鼠标滚轮缩小并让它更接近我的目标。但我不希望网站查看者必须这样做。我怎样才能合理地轻松解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:42:08.743

我相信您最好的选择是使用一些 JavaScript 将图像从`<img>`标签转换为背景图像：

```
<div class="wide-image"><img src="..."></div> 
```

使用 jQuery 的 JavaScript（但您可以在没有它/使用其他工具的情况下轻松做到这一点）：

```
​​$(function() {
    $('.wide-image').each(function() {
        var $div = $(this),
            $img = $div.find('img:first');

        // Transform normal image into background image
        $div.css('background', 'url(' + $img.attr('src') + ') no-repeat center center');

        // Adjust the <div>s height to fit the image's height
        $div.height($img.height());        

        // Hide the original image
        $img.hide();
    });
});​ 
```

​ 演示：http: [//jsfiddle.net/NBKsm/](http://jsfiddle.net/NBKsm/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T21:49:09.567

你的意思是居中背景图像？

`background-position: center 0`

这应该可以工作，因为它可以接受中心值：[http ://reference.sitepoint.com/css/background-position](http://reference.sitepoint.com/css/background-position)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T23:18:45.917

试试这个：

```
margin : 0px auto; 
```

在您的 img 所在的 div 类中使用此 css 代码。

# jsf - 如何更新基于主要面孔日历上的选定日期以呈现/隐藏面板内容

> ID：12904529
> 
> 赞同：0
> 
> 时间：2012-10-15T21:46:38.493
> 
> 标签：jsf, calendar, primefaces

我有一个组件，用户可以选择设置任何日期甚至为空，但是当日期不为空时，它应该呈现一个面板以允许其他选项。但是，日期没有得到更新，并且始终为空，因此它永远不会呈现面板。在这方面需要帮助。下面是我的代码：

```
 <p:calendar id="dt"
                    value="#{user.deadline}"
                    pattern="MM/dd/yyyy"                        
                    showOn="button"
                    mindate="#{userr.minDate}">
            <f:validator validatorId = "dateValidator"/>
            <f:attribute name="minDate" value="#{user.minDate}" />

            <p:ajax event="dateSelect" listener="#{user.updateDeadlineDate}" update=":userForm:userReminderForm"/>
        </p:calendar>

        <p:panel id= "myPanel" rendered="#{user.getDeadline != null}">
         .. some component that needs user.deadline

        </p:panel> 
```

我的 bean 的片段：

```
 public Date getDeadline() {
    return deadline;
     }

public void setDeadline(Date deadline) {
    this.deadline=deadline;
      }
 public void updateDeadlineDate(DateSelectEvent event) {

    this.setDeadline(event.getDate());

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T13:43:55.820

几件事：

*   而不是使用`#{user.getDeadline}`你可以使用`#{user.deadline}`.
*   这`f:attribute name="minDate"`是`p:calendar mindate="#{userr.minDate}"`删除任何一个的副本。
*   有一个默认验证器`p:calendar`，除非您要进行特殊验证，否则请删除`<f:validator>`.
*   bean 必须至少是视图范围的（不是请求范围的）才能工作。

此问题的一个非常常见的原因是更新目标设置错误。请使用萤火虫或某种元素检查在您的浏览器中检查为面板的父级设置的 id。

使用该属性时要记住的一点`rendered`是该元素对客户端不可见。您必须指示客户端更新未渲染元素的父级。（看来你已经在这样做了。）

如果日历和面板的形式相同，则可以`@form`用作目标。这样做将更新元素的形式。（这可能是你想要的。）

```
<p:calendar id="dt"
        value="#{user.deadline}"
        pattern="MM/dd/yyyy"                        
        showOn="button"
        mindate="#{userr.minDate}">
    <p:ajax event="dateSelect" listener="#{user.updateDeadlineDate}" update="@form"/>
</p:calendar>

<p:panel id= "myPanel" rendered="#{user.getDeadline != null}">
    .. some component that needs user.deadline
</p:panel> 
```

奖励：[单击此处获取更方便的更新目标](http://www.primefaces.org/showcase/ui/pprPartialTree.jsf)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T04:56:06.100

首先，您的更新目标可能是错误的（嵌套表单`:userForm:userReminderForm`在 HTML/JSF 中无效），也许您想要这样做`update=":userForm"`（因为您不能像[siebz0r](https://stackoverflow.com/users/704616/siebz0r)指出的那样直接更新面板）：

```
<p:ajax event="dateSelect" listener="#{user.updateDeadlineDate}" update=":userForm"/>

<p:panel id= "myPanel" rendered="#{user.deadline != null}">
     .. some component that needs user.deadline

</p:panel> 
```

这`getDeadline`是不必要的，当您引用支持 bean 属性时，只需使用它们的名称，如`deadline`.

请注意，您可以使用日历组件的验证器，因此您可以避免附加`<f:validator validatorId = "dateValidator"/>`标签。

在这种情况下，您的`<f:attribute name="minDate" value="#{user.minDate}" />`标签可能是不必要的。如果您想将您`deadline`的值设置为`minDate`（因为它们在同一个 bean 中），只需执行以下操作：

```
public void updateDeadlineDate(DateSelectEvent event) {
    mindDate = event.getDate()
    this.setDeadline(mindDate);
} 
```

并删除`<f:attribute name="minDate" value="#{user.minDate}" />`.

最后我会`empty`在属性中使用关键字`rendered`而不是`!= null`：`rendered="#{not empty user.deadline}"`

# mysql - 如何在 MySQL 中的多个参数表中搜索？

> ID：12904536
> 
> 赞同：0
> 
> 时间：2012-10-15T21:47:02.967
> 
> 标签：mysql

所以有一个与“报价”相关的参数表。参数表如下所示：

*   offer_id
*   参数名称
*   参数值

表条目如下所示：

> 报价 ID | 参数名称 | 参数值
> 
> 1 | 价格 | 100
> 
> 1 | 宽度 | 150
> 
> 1 | 身高 | 200
> 
> 1 | 地点 | 剩下
> 
> 1 | 地点 | 对
> 
> 2 | 价格 | 300
> 
> 2 | 宽度 | 150
> 
> 2 | 身高 | 200

现在我想在这个表中使用 MySQL 查询执行搜索，其中

*   **价格**大于*80**小于*120 _
*   **宽度**等于150 *_*
*   **高度**等于200 *_*
*   **地方**是左*还是*右*_*

预期结果：

*   **报价 ID = 1**

MySQL 查询会是什么样子？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:58:25.727

像这样的东西： -

```
SELECT *
FROM offers a
INNER JOIN offers b ON a.offerid = b.offerid
INNER JOIN offers c ON b.offerid = c.offerid
INNER JOIN offers d ON c.offerid = d.offerid
WHERE a.parameter_name = 'price'
AND b.parameter_name = 'width'
AND c.parameter_name = 'height'
AND d.parameter_name = 'place'
AND a.parameter_value BETWEEN 80 AND 120
AND b.parameter_value = '150'
AND c.parameter_value = '200'
AND d.parameter_value IN ('left','right') 
```

请注意，这有时会返回多行（即 1 的 id 会多次返回）。如果需要，可以使用 DISTINCT 删除它。取决于如何使用数据。

# c++ - C++/SFML 中的平滑动量减速？

> ID：12904539
> 
> 赞同：2
> 
> 时间：2012-10-15T21:47:15.093
> 
> 标签：c++, math, vector, sfml

我正在用 C++ 和 SFML 制作一个“小行星”游戏，我想知道平滑的动量减速和加速。在最初的游戏中，当你向一个方向移动时，你会建立“动量”，当按钮被按住时它会增加，当你松开按钮时它会减少。我已经开始了我自己的版本。目前我有一个`sf::Vector2f`包含船的动力。它可以是消极的或积极的。问题是，我无法正确实现减速（我什至还没有尝试过加速）。我尝试了以下方法；

```
if (plr.momentum.x < 0) {
    plr.momentum.x++;
}
if (plr.momentum.x > 0) {
    plr.momentum.x--;
}
if (plr.momentum.y < 0) {
    plr.momentum.y++;
}
if (plr.momentum.y > 0) {
    plr.momentum.y--;
} 
```

这样，移动后，玩家会慢慢拖到窗口的左上角（坐标0,0）。我认为这是因为浮点数可以是，例如 0.05，满足“超过 0”的 if 语句。从这里，它需要一个，使它成为一个负数。下一个 if 语句向它添加一个，并且不断循环。负`x`动量使您向左移动，负`y`动量使您向上移动，反之亦然。我想知道平滑减速和加速背后的方法。

如果您想/想知道，我使用以下代码根据其动量移动播放器；

```
playerSprite.move(plr.momentum); 
```

如果你对 SFML 不熟悉，`sf::Vector2f`有一个`.x`and `.y`，在`.move`of中使用`sf::Sprite playerSprite`。`.move`相对于当前位置移动玩家；因此，如果玩家在 (5,0)，而您这样做`player.move(sf::Vector2f(-1,0))`，他们的坐标将是 (4,0)。

**编辑**：作为朋友的建议，我现在有以下减速代码。减速效果很好，但是在减速之后，它又开始向左上方移动。这是什么原因造成的？

```
if (plr.xSlowdown < 0.f) {
    plr.xSlowdown += 0.1f;
}
if (plr.xSlowdown > 0.f) {
    plr.xSlowdown -= 0.1f;
}
if (plr.ySlowdown < 0.f) {
    plr.ySlowdown += 0.1f;
}
if (plr.ySlowdown > 0.f) {
    plr.ySlowdown -= 0.1f;
}

plr.xMomentum = floor(plr.xSlowdown);
plr.yMomentum = floor(plr.ySlowdown); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:16:47.537

如果你想让你的飞船在推进器关闭时减速，你应该增加阻力。

阻力根据速度施加力：最简单的方法是`F = -K v`为阻力系数做`K`。因此，如果您的船的动量存储在`plr.xMomentum`和中`plr.yMomentum`，您的程序将是：

```
// note:  "dt" is your timestep;
//   if you don't have one, just choose some small value for "fraction", like 0.005
float fraction = drag_coefficient_K * dt;
plr.xMomentum -= fraction * plr.xMomentum;
plr.yMomentum -= fraction * plr.yMomentum; 
```

加速将基于你的飞船的方向：

```
// note: "orientation" is the angle of your spaceship;
//   the units of orientation are determined by "angle_scale",
//   which should be chosen such that "angle_in_radians" is in radians...
float angle_in_radians = angle_scale * orientation;
float thrust_per_timestep = thrust_value * dt;
plr.xMomentum += thrust_per_timestep * cos(angle_in_radians);
plr.yMomentum += thrust_per_timestep * sin(angle_in_radians); 
```

阻力和推力的结合有效地限制了您可以达到的速度（至少没有重力辅助或其他东西......）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T22:04:09.550

你想要的是物理。非常简单的物理学：F=ma。

你需要有一些关于加速度、速度和位置的概念。用户输入指示加速度。加速度改变速度，速度改变位置。

旁白：减速和加速之间没有区别。他们都是加速。

# c++ - 静态常量类成员

> ID：12904540
> 
> 赞同：6
> 
> 时间：2012-10-15T21:47:18.230
> 
> 标签：c++, static, global-variables, constants

我需要在整个程序中引用各种常量。我一直在使用静态 const 类成员，而不是使用全局变量：

```
class Human
{
public:
    static const int HANDS = 2;
    static const int FINGERS = 10;
}; 
```

问题是我需要从 XML 数据文件中读取值。我知道我可以用一个函数初始化一个静态成员：

```
const int Human::HANDS = ReadDataFromFile(); 
```

由于只能在同一个编译单元中预测初始化的顺序，所以我必须将它们全部定义在同一个 CPP 文件中。这不是一个真正的问题，但它会有点混乱。

真正的问题是，我的 ReadDataFromFile() 函数中的所有内容都需要在我的代码有机会运行之前准备好使用。例如，我有一个 XML 类，它通常处理从文件中读取 XML 数据。但是，在这种情况下我不能使用它，因为静态成员在我的 XML 类对象构建之前就已经初始化了。

除了随处可见的随机全局变量之外，还有更好的方法来组织常量吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T21:54:02.543

当您尝试初始化变量时，您需要读取您的 XML 文件。`static`但是，您可以使用函数内的对象来获取它：

```
XMLData const& access_config_file() {
    static XMLData data = readXMLData();
    return data;
} 
```

然后，您可以`access_config_file()`从需要访问它的任何地方引用并提取值。变量在第`static`一次调用函数时被初始化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T22:17:02.983

使您的 XML 类对象也成为此类中的静态成员。IE，

```
class Human
{
public:
    static XMLReader x;
    static const int HANDS;
    static const int FINGERS;
}; 
```

然后在实现文件中，提供这些静态成员的定义，即

```
XMLReader Human::x();
const int Human::HANDS= x.ReadDataFromFile();
const int Human::FINGERS =x.ReadDataFromFile(); 
```

# php - 如何从我的安装程序将数据发送到 php 文件？

> ID：12904542
> 
> 赞同：1
> 
> 时间：2012-10-15T21:47:39.070
> 
> 标签：php, nsis

我正在尝试在我的 NSIS 安装程序上验证用户密码，因此我将发送到我的编码 php 脚本以比较值。它似乎根本没有与 php 脚本交互。我相信我的问题可能出在 PHP 中。

```
<?php
include ("Encryption.php");
$data = $_POST;
$a = new encryption_class();
$encryption = //encryption code;
?>

<html><head>

<title> - </title></head>
<body>
    <? echo $data ?> <br>
    <? echo $encryption;?>

</body>
</html> 
```

当我尝试使用 post 方法将信息从安装程序发送到 php 脚本时，我觉得我错过了一些东西。

抱歉……这是 NSIS 电话

```
 Section
    SetOutPath $DOCUMENTS/
    StrCpy $1 "userpass"
    #text files for reading and writing with the post command
    File "pass.txt"
    File "encrypt.txt"

    #write the user variable to the pass.txt file
    ClearErrors
    FileOpen $0 pass.txt w
    IfErrors done
    FileWrite $0 "$1"
    FileClose $0
done:
    FileOpen $3 encrypt.txt w
    inetc::post $0 /FILE "http://mywebserver/installer_get_pass.php" $3 /END

SectionEnd 
```

我还没有完成脚本，但是当我打开应该写入输出的 txt 文件时，它是空白的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T01:03:49.680

`inetc::post $0`将（关闭！）文件句柄传递给插件。参数`$3`类似的问题，尝试使用路径：

```
...
done:
StrCpy $0 "$documens\pass.txt"
StrCpy $3 "$documens\encoded.txt"
inetc::post $0 /FILE "http://mywebserver/installer_get_pass.php" $3 /END 
```

# ruby-on-rails - 无法为 railscast #102 自动完成创建虚拟属性

> ID：12904546
> 
> 赞同：0
> 
> 时间：2012-10-15T21:47:54.423
> 
> 标签：ruby-on-rails, autocomplete, mass-assignment

我无法理解我做错了什么。

我正在遵循修订后的 railscast #102 的指示。

我有模型文章：

```
 belongs_to :category

   def category_name
      category.try(:name)
   end  

   def category_name=(name)
    self.category = Category.find_by_name(name)
   end 
```

类别.rb：

```
 has_many :articles 
```

Create_categories 迁移：

```
 def change
    create_table :categories do |t|
    t.string :name
    t.timestamps
   end
  end 
```

创建文章：

```
 def change
  create_table :articles do |t|
  t.string :name
  t.text :content
  t.integer :category_id
  t.timestamps
   end
 end 
```

和来自_form的代码：

```
 <div class="field">
    <%= f.label :category_name %><br />
   <%= f.text_field :category_name %>
  </div> 
```

提交后我得到这个错误：

```
 Can't mass-assign protected attribute :category_name 
```

**编辑**

```
 def create
@article = Article.new(params[:article])

respond_to do |format|
  if @article.save
    format.html { redirect_to @article, notice: 'Article was successfully created.' }

  else
    format.html { render action: "new" }
  end
end
end 
```

我的日志：

```
 Started PUT "/articles/4" for 127.0.0.1 at 2012-10-16 00:59:44 +0300
   Processing by ArticlesController#update as HTML
   Parameters: {"utf8"=>"тЬУ", "authenticity_token"=>"YDPlS//tXg6Adl1npEEyNNBMZI0
   a7hW8bV5XFPmRre4=", "article"=>{"name"=>"112312", "category_name"=>"asdasd"}, "c
   ommit"=>"Update Article", "id"=>"4"}
    ←[1m←[35mArticle Load (0.0ms)←[0m  SELECT "articles".* FROM "articles" WHERE "
   articles"."id" = ? LIMIT 1  [["id", "4"]]
   ←[1m←[36m (0.0ms)←[0m  ←[1mbegin transaction←[0m
   ←[1m←[35mCategory Load (0.0ms)←[0m  SELECT "categories".* FROM "categories" 
 WHERE "categories"."name" = 'asdasd' LIMIT 1
  ←[1m←[36m (0.0ms)←[0m  ←[1mcommit transaction←[0m

  Redirected to http://127.0.0.1:3000/articles/4
  Completed 302 Found in 16ms (ActiveRecord: 0.0ms) 
```

所以它似乎正在节省，但我认为它没有：

```
 <p>
  <b>Category:</b>
  <%= @article.category %>
 </p> 
```

给我空白空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T21:50:01.223

要使这条线正常工作`<%= f.text_field :category_name %>`，请将此线添加到`Article`模型中

```
attr_accessible :category_name 
```

如果您已经尝试过，请确保在调用迁移后重新启动 Web 服务器。

# cmake - 如何将此共享库添加到我的 CMakeLists.txt？

> ID：12904550
> 
> 赞同：0
> 
> 时间：2012-10-15T21:48:26.717
> 
> 标签：cmake, ubuntu-12.04, ros

我几乎通读了所有库链接教程，但没有一个适用于我的具体问题。

我有一个名为 VSCOM_API_TEST 的文件夹，其中包含以下文件和文件夹：

`VSCOM_API_TEST/CMakeLists.txt
VSCOM_API_TEST/include/vs_can_api.h
VSCOM_API_TEST/include/startup.h
VSCOM_API_TEST/lib/libvs_can_api.so
VSCOM_API_TEST/lib/libvs_can_api.a
VSCOM_API_TEST/src/startup.cpp`

启动是我想要包含库的可执行文件。

而且我的程序找不到库函数的问题：

`CMakeFiles/startup.dir/src/startup.o: In function main: /home/max/fuerte_workspace/sandbox/VSCOM_API_TEST/src/startup.cpp:6: undefined reference to VSCAN_Open`

**CMakeLists.txt**

```
cmake_minimum_required(VERSION 2.4.6)
include($ENV{ROS_ROOT}/core/rosbuild/rosbuild.cmake)

rosbuild_init()

#set the default path for built executables to the "bin" directory
set(EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin)
#set the default path for built libraries to the "lib" directory
set(LIBRARY_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/lib)

#common commands for building c++ executables and libraries
rosbuild_add_library(${PROJECT_NAME} lib/libvs_can_api.a)
SET_TARGET_PROPERTIES(${PROJECT_NAME} PROPERTIES LINKER_LANGUAGE C)
rosbuild_add_executable(startup src/startup.cpp)
#target_link_libraries(startup ${PROJECT_NAME}) 
```

**启动.cpp**

```
// ROS includes
#include <ros/ros.h>
#include <vs_can_api.h>
int main(int argc, char** argv)
{
VSCAN_HANDLE handle = VSCAN_Open("192.168.5.10:23", VSCAN_MODE_NORMAL);

VSCAN_API_VERSION *version;
VSCAN_STATUS status;
VSCAN_HWPARAM *hwParams;

// API Version
status = VSCAN_Ioctl(handle, VSCAN_IOCTL_GET_API_VERSION, &version);

//HW Version
status = VSCAN_Ioctl(handle, VSCAN_IOCTL_GET_HWPARAM, &hwParams);

} 
```

那么如何添加预编译库呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:19:46.400

我根本不熟悉 rosbuild，但以下几点可能会有所帮助：

*   将构建的 exe 和库的输出路径更改为源代码树的一部分是不常见的。您可能想删除这些`set(EXECUTABLE/LIBRARY_ ...)`行。
*   [`rosbuild_add_library`](http://www.ros.org/wiki/rosbuild/CMakeLists#rosbuild_add_library)是 CMake[`add_library`](http://www.cmake.org/cmake/help/v2.8.9/cmake.html#command%3aadd_library)命令的包装器，不打算与已编译的库一起使用。相反，它将用于定义创建库所需的源。这一行也应该删除。
*   设置`LINKER_LANGUAGE`to`C`可能是不必要的，`CXX`无论如何都应该这样做。
*   [`target_link_libraries`](http://www.cmake.org/cmake/help/v2.8.9/cmake.html#command%3atarget_link_libraries) *是*您要用来链接到已编译库的命令。但是，您需要提供库的完整路径作为第二个参数。

所以（没有测试过）我建议你试试下面的 CMakelists.txt

```
cmake_minimum_required(VERSION 2.4.6)
include($ENV{ROS_ROOT}/core/rosbuild/rosbuild.cmake)
rosbuild_init()
rosbuild_add_executable(startup src/startup.cpp)
target_link_libraries(startup ${CMAKE_CURRENT_LIST_DIR}/lib/libvs_can_api.a) 
```

# java - 用于匹配文本中名称的数据结构

> ID：12904556
> 
> 赞同：0
> 
> 时间：2012-10-15T21:48:51.210
> 
> 标签：java, python, string-matching, information-retrieval

我想查找在文本文件中引用的名称。作者可以有任意数量的姓名和头衔。仅当所有名称都匹配时才找到匹配项（例如，一个名为“John Doe”的人在仅包含“John”的文本中不匹配

我现在解决它的方法是将名称拆分为标记并将第一个标记存储在 HashSet 中，并以小写字符串作为键。每个令牌都包含一组名称中的下一个令牌，依此类推。

这会导致大量增加开销的 HashSet 对象。我认为有更好的方法来处理这个问题？如果可能的话，我更喜欢图书馆，但任何事情都会有所帮助

如果那里有好的解决方案，我愿意切换到 Python。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T21:58:27.687

你可以只使用正则表达式吗？根据文本文件，您可能需要使用多行匹配，如下所示。

```
 Pattern p = Pattern.compile("John\\s+Doe", Pattern.MULTILINE);
    Matcher m = p.matcher("I am looking for John \nDoe, I am.");        
    System.out.println(m.find()); 
```

您也可以使用命令行实用程序来执行此操作`pcregrep`- 请参阅此[相关问题](https://stackoverflow.com/questions/2686147/how-to-find-patterns-across-multiple-lines-using-grep)。

**更新：**为了解决存储名称的问题，用于存储相关字符串的内存高效结构是[Trie](http://en.wikipedia.org/wiki/Trie)，它可能有用 - 可能有很多免费实现，尽管 Java 标准库中没有据我所知。另请参阅[此问题](https://stackoverflow.com/questions/7983906/is-there-a-trie-in-java)以及[此](https://stackoverflow.com/questions/623892/where-do-i-find-a-standard-trie-based-map-implementation-in-java)问题以获取一些建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T22:19:35.227

据我了解您的问题，您必须存储每个作者的任意姓名列表，并有效地匹配它们。

我假设您已经解决了解析名称、删除“Dr”等非必要/可选部分以及保留“von”和“de”等粒子的问题。您的规范化名称必须是固定大小写的字符串序列（小写可以，但我会坚持使用大写或标题大小写）。

现在， a `List<String>`or`String[]`将作为`HashMap`包含其他详细信息的 a 的键。恐怕这不会很好，因为两者都是可变的，而且我不确定他们的`hashCode()`方法是否适合这种情况。

所以我想出了这样的事情：

```
class AuthorName(object) {
  private String[] parts;
  public AuthorName(String... name_parts) {
    assert name_parts.length > 0;
    parts = name_parts;
  }

  @Override
  public int hashCode() {
    // hashCode() that only depends on name parts
    int result = 0;
    for (int i=0; i < parts.length; i+=1) result ^= part.hashCode();
    return result;
  }
}

Map<AuthorName, ...> authors = new HashMap<AuthorName, ...>();
authors.put(new AuthorName('John', 'Doe'), ...);
assert authors.get(new AuthorName('John', 'Doe')) != 0 
```

这并不能解决许多可能的问题，例如“Joe Random User”、“Joe R User”和“JR User”是同一个人。这应该在不同的层面上解决。

如果您更详细地说明您的情况，并举一两个例子，答案可能会更好。

您可能还对图书馆规范作者姓名的方式感兴趣。人们使用[精心设计的](http://informationr.net/ir/9-4/paper192.html) [方案](http://www.asis.org/Conferences/AM09/open-proceedings/papers/18.xml)来匹配名称。

# c - 在 C 中检查 argc 的值

> ID：12904559
> 
> 赞同：0
> 
> 时间：2012-10-15T21:48:57.663
> 
> 标签：c, ubuntu, argc

> **可能重复：**
> [检查 argc 的值](https://stackoverflow.com/questions/12904222/checking-value-of-argc)

我将坚持使用套接字编程，这是我在 linux-ubuntu 上开发的简单的套接字编程 C 代码，但是由于表示端口的 argc 值，代码不起作用并在第一个 if 条件下退出。我需要帮助：）

```
#include <sys/types.h>
#include <sys/socket.h>
#include <netdb.h>
#include <string.h>
#include <stdio.h>
const char APRESSMESSAGE[] = "APRESS - For Professionals, By Professionals!\n";

int main(int argc, char *argv[]) {
int simpleSocket = 0;
int simplePort = 0;
int returnStatus = 0;
struct sockaddr_in simpleServer;

if (2 != argc) {
    fprintf(stderr, "Usage: %s <port>\n", argv[0]);
    exit(1);
}
simpleSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
printf("%i\n", simpleSocket);
if (simpleSocket <= -1) {
    fprintf(stderr, "Could not create a socket!\n");
    exit(1);
} else {
    fprintf(stderr, "Socket created!\n");
}
/* retrieve the port number for listening */
simplePort = atoi(argv[1]);
/* set up the address structure */
/* use INADDR_ANY to bind to all local addresses
 */
puts("test1");
bzero(&simpleServer, sizeof(simpleServer));
simpleServer.sin_family = AF_INET;
simpleServer.sin_addr.s_addr = htonl(INADDR_ANY);
simpleServer.sin_port = htons(simplePort);
/*
 bind to the address and port with our socket
 */
returnStatus = bind(simpleSocket, (struct sockaddr *) &simpleServer,
        sizeof(simpleServer));
if (returnStatus == 0) {
    fprintf(stderr, "Bind completed!\n");
} else {
    fprintf(stderr, "Could not bind to address!\n");
    close(simpleSocket);
    exit(1);
}
/* let's listen on the socket for connections */
returnStatus = listen(simpleSocket, 5);
if (returnStatus == -1) {
    fprintf(stderr, "Cannot listen on socket!\n");
    close(simpleSocket);
    exit(1);
}
while (1) {
    struct sockaddr_in clientName = { 0 };
    int simpleChildSocket = 0;
    int clientNameLength = sizeof(clientName);
    /* wait here */
    simpleChildSocket = accept(simpleSocket,
            (struct sockaddr *) &clientName, &clientNameLength);
    if (simpleChildSocket == -1) {
        fprintf(stderr, "Cannot accept connections!\n");
        close(simpleSocket);
        exit(1);
    }
    /* handle the new connection request
     */
    /* write out our message to the client */
    write(simpleChildSocket, APRESSMESSAGE, strlen(APRESSMESSAGE));
    close(simpleChildSocket);
}
close(simpleSocket);
return 0; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T21:53:18.037

我不确定您要问什么，但我相信您对`if`检查传递给程序的参数数量的语句如何工作感到困惑。从命令行，如果用户运行：

```
myprogram 
```

的值`argv`将会是 1。另一方面，如果你运行`{"myprogram"}`：`argc`

```
myprogram 23 
```

的值`argv`将是 2。我认为您在运行程序时根本没有为端口号传递适当的参数。`{"myprogram", "23"}``argc`

# python - 在 django 中安全地存储加密凭据

> ID：12904560
> 
> 赞同：12
> 
> 时间：2012-10-15T21:49:09.070
> 
> 标签：python, django, security, encryption, credentials

我正在开发一个 python/django 应用程序，其中包括将数据同步到各种其他服务，包括 samba 共享、ssh(scp) 服务器、Google 应用程序等。因此，它需要存储凭据以访问这些服务。我认为将它们存储为未加密字段将是一个坏主意，因为 SQL 注入攻击可以检索凭据。所以我需要在存储之前加密信用 - 有没有可靠的库来实现这一点？

一旦凭据被加密，它们需要在可用之前被解密。我的应用程序有两个用例：

*   一种是交互式的——在这种情况下，用户将提供密码来解锁凭据。
*   另一种是自动同步 - 这是由 cron 作业或类似作业启动的。为了最大程度地降低此处的漏洞利用风险，我应该将密码保存在哪里？

或者我应该采取不同的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-05-31T19:01:16.783

我有同样的问题，过去几天一直在研究这个问题。@Rostislav 提出的解决方案非常好，但它不完整且有点过时。

## 关于算法层

首先，有一个新的密码学库，恰如其分地称为[Cryptography](https://cryptography.io)。使用这个库而不是 PyCrypto 有很多理由，但吸引我的主要理由是：

*   一个核心目标是让你无法自爆。例如，它没有像 MD2 这样严重过时的哈希算法*。*
*   有强大的机构支持
*   在各种平台上持续集成的 500,000 次测试！
*   他们的文档网站有更好的 SSL 配置（[接近完美的 A+ 分数](https://www.ssllabs.com/ssltest/analyze.html?d=cryptography.io)而不是[平庸的 B 等级](https://www.ssllabs.com/ssltest/analyze.html?d=dlitz.net)）
*   他们有漏洞披露政策。

您可以阅读更多关于[在 LWN 上创建新库的原因](https://lwn.net/Articles/595790/)。

其次，另一个答案建议使用 SHA1 作为加密密钥。[SHA1 非常脆弱并且越来越弱](https://konklone.com/post/why-google-is-hurrying-the-web-to-kill-sha-1#an-attack-on-sha-1-feels-plenty-viable-to-me)。SHA1 的替代品是 SHA2，最重要的是，您应该真正使用[bcrypt](https://en.wikipedia.org/wiki/Bcrypt)或[PBKDF2](https://en.wikipedia.org/wiki/PBKDF2)对哈希进行加盐并拉伸它。盐渍对于防止[彩虹表](https://en.wikipedia.org/wiki/Rainbow_table)很重要，而拉伸是防止暴力破解的重要保护。

（Bcrypt 测试较少，但设计用于使用大量内存，而 PBKDF2 设计速度较慢，NIST 推荐使用。在我的实现中，我使用 PBKDF2。如果您想了解更多差异，[请阅读此内容](https://security.stackexchange.com/questions/4781/do-any-security-experts-recommend-bcrypt-for-password-storage)。）

对于 CBC 模式下的加密，应该使用 128 位密钥的 AES，如上所述——这并没有改变，尽管它现在被汇总到一个[名为 Fernet](https://cryptography.io/en/latest/fernet/)的规范中。初始化向量将在此库中自动为您生成，因此您可以放心地忘记这一点。

## 关于密钥生成和存储层

如果可以的话，其他答案非常正确，建议您需要仔细考虑密钥处理并选择 OAuth 之类的东西。但是假设这是不可能的（它不在我的实现中），您有两个用例：Cron 作业和交互式。

cron 作业用例归结为您需要将密钥保存在安全的地方并使用它来运行 cron 作业。我没有研究过这个，所以我不会在这里发表意见。我认为有很多好方法可以做到这一点，但我不知道最简单的方法。

对于交互式用例，您需要做的是收集用户密码，使用该密码生成密钥，然后使用该密钥解密存储的凭据。

## 带回家

以下是我将如何使用 Cryptography 库完成上述所有操作：

```
from cryptography.fernet import Fernet
from cryptography.hazmat.primitives.hashes import SHA256
from cryptography.hazmat.primitives.kdf.pbkdf2 import PBKDF2HMAC
from cryptography.hazmat.backends import default_backend

secret = "Some secret"

# Generate a salt for use in the PBKDF2 hash
salt = base64.b64encode(os.urandom(12))  # Recommended method from cryptography.io
# Set up the hashing algo
kdf = PBKDF2HMAC(
    algorithm=SHA256(),
    length=32,
    salt=str(salt),
    iterations=100000,  # This stretches the hash against brute forcing
    backend=default_backend(),  # Typically this is OpenSSL
)
# Derive a binary hash and encode it with base 64 encoding
hashed_pwd = base64.b64encode(kdf.derive(user_pwd))

# Set up AES in CBC mode using the hash as the key
f = Fernet(hashed_pwd)
encrypted_secret = f.encrypt(secret)

# Store the safe inputs in the DB, but do NOT include a hash of the 
# user's password, as that is the key to the encryption! Only store 
# the salt, the algo and the number of iterations.
db.store(
    user='some-user', 
    secret=encrypted_secret,
    algo='pbkdf2_sha256', 
    iterations='100000', 
    salt=salt
) 
```

然后解密看起来像：

```
# Get the data back from your database
encrypted_secret, algo, iterations, salt = db.get('some-user')

# Set up the Key Derivation Formula (PBKDF2)
kdf = PBKDF2HMAC(
    algorithm=SHA256(),
    length=32,
    salt=str(salt),
    iterations=int(iterations),
    backend=default_backend(),
)
# Generate the key from the user's password
key = base64.b64encode(kdf.derive(user_pwd))

# Set up the AES encryption again, using the key
f = Fernet(key)

# Decrypt the secret!
secret = f.decrypt(encrypted_secret)
print("  Your secret is: %s" % secret) 
```

## 攻击？

假设您的数据库已泄露到 Internet。攻击者能做什么？好吧，我们用于加密的密钥采用了用户加盐密码的第 100,000 个 SHA256 哈希值。我们将盐和我们的加密算法存储在您的数据库中。因此，攻击者必须：

*   尝试暴力破解：将盐与所有可能的密码结合起来，并对其进行 100,000 次哈希。取该哈希并尝试将其作为解密密钥。攻击者必须进行 100,000 次哈希才能尝试一个密码。这基本上是不可能的。
*   直接尝试所有可能的哈希作为解密密钥。这基本上是不可能的。
*   尝试使用预先计算的哈希值的彩虹表？不，不是在涉及随机盐时。

我认为这非常可靠。

然而，还有一件事需要考虑。PBKDF2 的设计速度很慢。它*需要*大量的 CPU 时间。这意味着如果用户有办法生成 PBKDF2 哈希值，那么您将面临 DDOS 攻击。为此做好准备。

## 后记

综上所述，我认为有些图书馆会为你做一些事情。[谷歌搜索django encrypted field 之](https://www.google.com/search?q=django+encrypted+field)类的东西。我不能对这些实现做出任何承诺，但也许你会了解其他人是如何做到这一点的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T07:12:10.663

首先在服务器上存储足以登录多个系统的凭据看起来像是一场噩梦。无论加密如何，服务器上的妥协代码都会泄露它们。

您应该只存储执行任务所需的凭据（即文件同步）。对于服务器，您应该考虑使用像[RSync](http://rsync.samba.org/)这样的同步服务器，对于 Google，使用[OAuth](https://developers.google.com/accounts/docs/OAuth2)等协议。这样，如果您的服务器受到威胁，这只会泄露数据而不是对系统的访问。

接下来是加密这些凭据。对于密码学，我建议您使用[PYCrypto](https://www.dlitz.net/software/pycrypto/)。

对于您将在密码学中使用的所有随机数，请通过 Crypto.Random（或其他一些强大的方法）生成它们，以确保它们足够强大。

您不应使用相同的密钥加密不同的凭据。我推荐的方法是这样的：

1.  你的服务器应该有它的主密钥**M**（来自 /dev/random）。将其存储在 root 拥有的文件中，并且只能由 root 读取。
2.  当您的服务器以 root 权限启动时，它会将文件读入内存，并在为客户端提供服务之前删除它的权限。这是 Web 服务器和其他恶魔的正常做法。
3.  当您要编写新凭证（或更新现有凭证）时，会生成一个随机块**S**。取前半部分并计算散列**K=H(S [1] ,M)**。那将是您的加密密钥。
4.  使用 CBC 模式加密您的数据。从**S** **[2]**获取**初始化向量 (IV)**。
5.  将**S**与加密数据一起存储。

当您需要解密时，只需取出**S**创建**K**并使用相同的 IV 解密。

对于哈希，我建议使用 SHA1，对于加密——AES。散列和对称密码足够快，因此使用更大的密钥大小不会受到伤害。

这个方案在某些地方有点过头了，但这不会有什么坏处。

但请再次记住，存储凭据的最佳方式不是存储凭据，当您必须时，请使用允许您完成任务的最低权限的凭据。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-15T22:10:51.243

也许您可以通过创建以下内容来依赖多用户方案：

*   运行 Django 的用户（例如`django`）*没有*访问凭证的权限
*   具有这些权限的用户（例如`sync`）。

他们都可以在`django`组中，以允许他们访问应用程序。之后，制作一个`manage.py sync-external`同步您想要的内容的脚本（例如 Django 命令，例如 ）。

这样，`django`用户将可以访问应用程序和同步脚本，但*不能*访问凭据，因为只有`sync`用户可以。如果有人试图在没有凭据的情况下运行该脚本，那当然会导致错误。

在我看来，依赖 Linux 权限模型是一个“好主意”，但我不是安全专家，所以请记住这一点。如果有人对以上内容有什么要说的，请不要犹豫！

# php - 如何跟踪 Facebook 分享

> ID：12904562
> 
> 赞同：2
> 
> 时间：2012-10-15T21:49:10.037
> 
> 标签：php, facebook

我有以下代码允许人们在他们的 Facebook 上分享链接

```
<div class="fb_share">
    <a name="fb_share" type="button" share_url="http://www.handybook.com"
        href="http://www.facebook.com/sharer.php">Share us on Facebook</a>
    <script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share"
        type="text/javascript"></script>
</div> 
```

我如何追踪某人在分享链接后是否真的分享了链接？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:54:29.913

您可以选择加入[Gigya](http://www.gigya.com/share-plugin/)以促进和跟踪共享，不仅在 FB 上，而且在其他社交网络上也是如此。

我从事的项目可以很好地达到目的。

# mysql - 使用 Md5 唯一键对表进行 Mysql 分区

> ID：12904563
> 
> 赞同：1
> 
> 时间：2012-10-15T21:49:12.410
> 
> 标签：mysql, unique, partitioning

我在几百万行的大表上制作分区时遇到问题。

```
CREATE TABLE  `searcheg`.`pages` (
  `urlId` int(9) NOT NULL AUTO_INCREMENT,
  `url` varchar(1024) COLLATE utf8_unicode_ci NOT NULL DEFAULT '',
  `urlhash` binary(16) NOT NULL,<< MD5 unhex.
  PRIMARY KEY (`urlId`),
  UNIQUE KEY `urlhash` (`urlhash`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci; 
```

我该如何分区？`urlhash`必须是唯一的，因为我需要插入大量行并检查重复。由于分区必须包含所有唯一列并且不能是非整数值。分区的一个原因是减少 .ibd 以获得更易于管理的大小，因为它增长超过 50G，我想拆分它们。urlID 作为主键是为了防止每次插入时行重新排序。urlhash 是唯一的，以防止重复输入。我正在寻找某种方法来拆分表而不必删除主键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T01:21:52.187

如果您使用的是 MySQL v5.5，那么您可以使用新[`PARTITION BY RANGE COLUMNS`](http://dev.mysql.com/doc/refman/5.5/en/partitioning-columns-range.html)选项。如果您可以删除冗余`urlID`列并定义`usrhash`为主键，那么您的表定义可能如下所示：

```
CREATE TABLE pages (
  url VARCHAR(1024) NOT NULL,
  urlhash BINARY(16) NOT NULL,
  PRIMARY KEY (urlhash)
)
PARTITION BY RANGE COLUMNS (urlhash) (
  PARTITION p0 VALUES LESS THAN ('j'),
  PARTITION p1 VALUES LESS THAN ('r'),  -- split in as many ranges as you wish
  PARTITION p2 VALUES LESS THAN (MAXVALUE)
) ; 
```

如果`urlID`需要（例如框架），那么我不知道，因为主键或唯一索引“必须包括表的分区函数中的所有列”......

# ios - 如何支持具有动态类型标识符但具有特定扩展名的文件？

> ID：12904564
> 
> 赞同：1
> 
> 时间：2012-10-15T21:49:12.890
> 
> 标签：ios, uti

我希望我的应用程序支持现有文件类型的“打开方式”功能。

但是，这种文件类型没有 UTI。

我在终端中为它运行了**mdls ，结果如下：**

```
kMDItemContentType             = "dyn.ah62d4rv4ge80c25t"

kMDItemContentTypeTree         = (
    "public.data",
    "public.item"
) 
```

鉴于该信息，我添加到我的 plist 中：

```
<key>CFBundleDocumentTypes</key>
    <array>
        <dict>
            <key>CFBundleTypeExtensions</key>
            <array>
                <string>extension</string>
            </array>
            <key>LSHandlerRank</key>
            <string>Alternate</string>
            <key>CFBundleTypeRole</key>
            <string>Viewer</string>
            <key>LSItemContentTypes</key>
            <array>
                <string>public.data</string>
                <string>public.item</string>
            </array>
        </dict>
    </array> 
```

但是，这似乎忽略了“扩展名”并为任何数据文件启用“打开方式”。

有什么办法可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T22:21:44.670

您可以在 Info.plist 中定义 UTI。如果这是为了扩展您自己的创作，请制作一个并将其放在“Exported Type UTIs”下。如果它用于已知类型的文件但 UTI 不为人所知，则可以将其放在 Info.plist 的“导入类型 UTI”部分下。无论哪种情况，您现在都可以在文档类型部分引用此 UTI。

# google-app-engine - 带有 Eclipse 的谷歌应用引擎

> ID：12904567
> 
> 赞同：1
> 
> 时间：2012-10-15T21:49:23.610
> 
> 标签：google-app-engine, google-plugin-eclipse

尝试在 Eclipse 插件的帮助下使用 google appengine。我创建了测试应用程序（Eclipse 工具栏上的 Google 按钮 -> 新建 Web 应用程序项目），然后尝试对其进行一些简单的更改以检查其工作方式并遇到问题。我试着做一个简单的彩票（用户输入六个数字，然后应用程序生成一些随机的六个数字序列，用户得到他的输入和结果之间的匹配数）。它在本地服务器上正常工作（仅在 Firefox 中。Chrome、Opera 和 Explorer 需要一些 gwt 插件。这让我想知道，我认为一切都应该在没有任何额外努力的情况下工作），但是当用户发送数据到谷歌云成功部署后服务器，他得到这个错误：

* * *

尝试联系服务器时出错。请检查您的网络连接，然后重试。

* * *

我的应用程序的链接是 da7x-app.appspot.com

我不认为问题出在代码中，因为在本地服务器应用程序上工作正常。也许解决方案很明显，但我是新手，无法弄清楚。我试图搜索类似我的问题及其解决方案，但没有找到任何东西，因此不胜感激。

# android - 如何在内容更改时收听 xml 文件并更新视图？安卓

> ID：12904568
> 
> 赞同：0
> 
> 时间：2012-10-15T21:49:26.950
> 
> 标签：android, xml

现在我有一个从互联网读取 xml 文件的应用程序，如何收听这个文件并在服务器端内容发生更改时通知用户？这样用户就不需要按刷新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T21:54:44.670

尝试使用`AlarmManager`类和`setRepeating`方法。
它将帮助您创建用于读取 xml 文件的重复操作。看到[这个](http://developer.android.com/reference/android/app/AlarmManager.html#setRepeating%28int,%20long,%20long,%20android.app.PendingIntent%29)

# asp.net - 从 .ascx 动态加载 ListView 模板

> ID：12904570
> 
> 赞同：4
> 
> 时间：2012-10-15T21:49:50.570
> 
> 标签：asp.net, listview, itemtemplate

我使用这篇[http://blogs.msdn.com/b/mikeormond/archive/2008/07/26/dynamically-loading-listview-templates.aspx](http://blogs.msdn.com/b/mikeormond/archive/2008/07/26/dynamically-loading-listview-templates.aspx)文章作为动态加载模板的示例（来自 .ascx 文件）。

这是作者代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {

        ListView1.LayoutCreated += new EventHandler(ListView1_LayoutCreated);
        ListView1.LayoutTemplate = LoadTemplate("LayoutTemplate.ascx");
        ListView1.ItemTemplate = LoadTemplate("ItemTemplate.ascx");
    }

    void ListView1_LayoutCreated(object sender, EventArgs e)
    {
        //remove the layout template
        ListView1.Controls.RemoveAt(0);

        //recreate it
        Control newLayoutContainer = new Control();
        ListView1.LayoutTemplate.InstantiateIn(newLayoutContainer);
        var userControl = newLayoutContainer.Controls[0];
        userControl.ID = "MyLayout";
        ListView1.Controls.Add(newLayoutContainer);
    } 
```

它给出了错误：

**必须在 ListView 'ListView1' 上定义 ItemTemplate。**

回发后。

怎么了？我应该在每次回发 ( [http://forums.asp.net/p/1305569/2558209.aspx](http://forums.asp.net/p/1305569/2558209.aspx) ) 时创建 ListView 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T23:08:29.283

要解决您的问题，请执行以下操作：

```
<script runat="server">

   protected void ListView_Init(object sender, EventArgs e)
    {

         ListView1.ItemTemplate = LoadTemplate("ItemTemplate2.ascx");

    }

</script>

<asp:ListView ....   OnInit="ListView_Init"> 
```

# jsf - p:ajax 没有调用 bean 方法

> ID：12904573
> 
> 赞同：0
> 
> 时间：2012-10-15T21:50:27.120
> 
> 标签：jsf, listener, selectonemenu

我有一个简单的表单，它应该在我的 Login-Bean 中调用 countryChanged() 方法。

```
<h:form id="languageForm">
    <p:selectOneMenu value="#{login.locale}" var="locale" effect="fold">
        <p:ajax listener="#{login.countryChanged}" />
        <f:selectItem itemLabel="#{gui.LANGUAGE}" itemValue=""></f:selectItem>  
        <f:selectItems value="#{login.locales}" var="locales" itemLabel="#{locales.displayLanguage}" itemValue="#{locales}" />                  
         <p:column><h:graphicImage library="images" name="flags/#{locale.country}.png" /></p:column>
         <p:column>#{locale.displayName}</p:column>
    </p:selectOneMenu>
</h:form>

<h:form id="loginForm">
<h:panelGrid columns="2" title="Flexicon Login">
    <h:outputLabel for="login">#{gui.LOGIN}</h:outputLabel>
    <h:inputText id="login" required="true" value="#{loginControl.login}" label=""></h:inputText>
    <h:outputLabel for="password">#{gui.PASSWORD}</h:outputLabel>
    <h:inputSecret id="password" value="#{loginControl.password}"></h:inputSecret>
</h:panelGrid>
<p:messages></p:messages>
<h:commandButton value="#{gui.BTN_LOGIN}" action="#{loginControl.login}"></h:commandButton>
</h:form> 
```

登录豆

```
@ManagedBean(name="login")
@SessionScoped
public class LoginControl implements Serializable {
private static final long serialVersionUID = 5887191233181008116L;
private String login;
private String password;
private Locale locale;
private List<Locale> locales; 

public LoginControl(){

}

public String getLogin() {
    return login;
}

public void setLogin(String login) {
    this.login = login;
}

public String getPassword() {
    return password;
}

public void setPassword(String password) {
    this.password = password;
}

public Locale getLocale() {
    if(locale==null){
        locale = FacesContext.getCurrentInstance().getViewRoot().getLocale();
    }
    return locale;
}

public void setLocale(Locale locale) {
    //FacesContext.getCurrentInstance().getViewRoot().setLocale(locale);
    this.locale = locale;
}

public List<Locale> getLocales() {
    if(locales==null){
        Logger.getLogger(LoginControl.class).info("initializing locales...");
        locales = new ArrayList<Locale>();
        locales.add(Locale.GERMANY);
        locales.add(Locale.UK);
        locales.add(Locale.FRANCE);
    }
    return locales;
}

public void setLocales(List<Locale> locales) {
    this.locales = locales;
}

public void countryChanged(){
    FacesContext.getCurrentInstance().getViewRoot().setLocale(getLocale());
}   
} 
```

我遵循了 stackoverflow 中已经讨论过的几个建议。但不知何故，它不想工作。有人能看出错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:17:06.917

你有一个转换错误。如果您注意服务器日志，您会注意到有关排队但未显示的面孔消息的警告。您应该`<p:messages autoUpdate="true"/>`改为在提交期间自动更新它，以便任何转换/验证错误消息都将正确显示在 UI 中。

您的具体问题是因为您试图将非标准 Java 对象类型设置`java.util.Locale`为项目值。JSF/EL 没有内置的转换器/强制转换，就像它对`String`,`Number`和`Boolean`.

您有 2 个选项来解决此问题：

1.  使用`String`而不是作为项目值并在侦听器方法中围绕提交的字符串进行`Locale`重构。`Locale`

    ```
    <p:selectOneMenu value="#{login.language}" ...>
        <f:selectItems itemValue="#{locales.language}" />                  
        ...
    </p:selectOneMenu> 
    ```

    和

    ```
    private String language;

    public void countryChanged() {
        Locale locale = new Locale(language);
        // ...
    } 
    ```

    * * *

2.  `Locale`创建在（在模型中）和`String`（在 HTML 中）之间转换的自定义转换器。

    ```
    @FacesConverter(forClass=Locale.class)
    public class LocaleConverter implements Converter {
        // Implement accordingly.
    } 
    ```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T19:08:50.677

您缺少触发 ajax 请求的客户端事件。

试试这个：**event="change"**

```
<h:form>
   <p:selectOneMenu>
       <p:ajax event="change" listener="#{bean.action}" />
       <f:selectItem itemLabel="foo" itemValue="0"/>
       <f:selectItem itemLabel="bar" itemValue="1"/>
   </p:selectOneMenu>
</h:form> 
```

# android - Android 键盘锁自动禁用

> ID：12904575
> 
> 赞同：3
> 
> 时间：2012-10-15T21:50:32.420
> 
> 标签：android, keyguardlock

我正在开发一个应用程序，它将替换 android 设备的默认锁定屏幕（滑动解锁）。我已通过禁用键盘保护管理器并使用广播接收器显示我的活动以实现屏幕关闭和屏幕开启意图，从而成功地做到了这一点。现在，问题是当我出于任何原因再次设置默认屏幕锁定时，我的应用程序不会禁用键盘保护，除非我强制关闭它并再次启动它。任何帮助，将不胜感激。

# c# - 如何使用我得到的 WSDL 文件？

> ID：12904576
> 
> 赞同：3
> 
> 时间：2012-10-15T21:50:36.713
> 
> 标签：c#, visual-studio-2010, wcf, wsdl

> **可能重复：**
> [如何使用 WSDL 文件创建 WCF 服务（不拨打电话）](https://stackoverflow.com/questions/950150/how-to-use-a-wsdl-file-to-create-a-wcf-service-not-make-a-call)

我需要在我的应用程序中使用 Web 服务。

我有一个用于 Web 服务的 WSDL，但我不知道如何使用它或如何调用并将信息发送到 Web 服务方法。

有人可以在这里帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T22:32:38.740

请参阅[http://msdn.microsoft.com/en-us/library/ms181854%28VS.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms181854%28VS.90%29.aspx) “从 WSDL 文件创建 .NET Web 服务提供程序端点”。

# forms - Spring MVC 表单：选择在 POST 操作中不返回对象

> ID：12904582
> 
> 赞同：5
> 
> 时间：2012-10-15T21:50:48.367
> 
> 标签：forms, spring, jsp, post, annotations

我有一个关于从用于填充选择表单的列表中检索对象的问题。

控制器：

```
@RequestMapping(value="listStaffMembers", method=RequestMethod.GET) 
public String listStaffMembers(Model model){        

    model.addAttribute("staffList", this.personManager.getAllStaff());      

    Person person = new Person();
    model.addAttribute("staffMember", person);

    model.addAttribute("staffListSize", this.personManager.getAllStaff().size());

    for (Person persons : this.personManager.getAllStaff())
        System.out.println("Query  Name:" + persons.getName() + "   Id:"+persons.getId());      

    return "staffList";
} 
```

未接收 Person 对象的控制器：

```
@RequestMapping(value="staffMemberCRUD", 
        method=RequestMethod.POST)
    //ModelAndView
public String staffMemberCRUD(@ModelAttribute("staffMember")Person person, Model model){    
    if(person!=null){

        model.addAttribute("staffMember", person);
        String name = person.getName();
        int id = person.getId();
        System.out.println("id:    "+ id);
        System.out.println("name:  "+ name);

    return "staffForm";
    }else{
        System.out.println("Person not saved, no entry, throwing null pointer exception");
        throw new NullPointerException();
    }
} 
```

人物类：

```
@Entity(name="STAFF")
@NamedQuery(name="staffDetails.byId", query="from STAFF")// where userId = ?, then use position 0, then value 
 public class Person {
    @Id
    @GeneratedValue(strategy=GenerationType.AUTO)
    private int id;

    @Column(name="NAME")
    private String name;

    public int getId() {
            return id;
    }

    public void setId(int id) {
            this.id = id;
    }

    public String getName() {
            return name;
    }

    public void setName(String name) {
            this.name = name;
    }

    public Person(int personId, String name){
            setId(personId);
            setName(name);
    }

    public Person(String name){
            setName(name);
    }

    public Person(int Id){
            setId(Id);
    }

    public Person(){

    }
} 
```

下面的表单如何检索对象，id 出现在 person 的 name 变量中，尽管没有 id 值。

```
<FORM ACTION="staffMemberCRUD" METHOD=POST ><!-- onSubmit="return dropdown(this.gourl) -->
<table>
<tr>
<td>
<select name="staffMember">
        <option value="">Choose</option>
    <c:forEach items="${staffList}" var="prod">
        <option value ="${prod.id}"><c:out value="${prod.id}"></c:out><c:out value="${prod.name}"></c:out></option>
    </c:forEach>
</select>   
</td>    
</tr>
</table>
<INPUT TYPE=SUBMIT VALUE="Go">
</FORM> 
```

Person 类还用于使用休眠填充数据库，这会混淆问题吗？

在测试 listStaffMembers 下拉列表时，它只是当前不起作用的帖子。我已经为此查看了 Spring 文档，它让我走到了这一步，非常感谢任何帮助，因为到目前为止这已经花费了我 3 天的时间，但没有任何积极的结果。非常感谢，院长

```
Latest Update: 
```

更新了表单：选择，请注意选择路径现在发布“id”，以及正确的表单：表单标签，POST 后下一个视图中的人员对象现在填充了一个 id 字段，这比之前提到的要少再次从数据库中找到它们：

```
<form:form action="staffMemberCRUD" commandName="staffMember"><!-- onSubmit="return dropdown(this.gourl) -->
<table>
<tr>
<td>
    <form:select path="id">
        <form:option value="-1">Select your Staff Member</form:option>
        <form:options items="${staffList}" itemLabel="name" itemValue="id" />
    </form:select>  
</td>    
</tr>
</table>
<INPUT TYPE=SUBMIT VALUE="Go">
</form:form> 
```

我知道 PropertyEditor 仍然是前进的方向，当这种情况发生时我会再次更新。

# sql - 两个表之间的返回有多关系如何在聚合中具有多于一行？

> ID：12904587
> 
> 赞同：0
> 
> 时间：2012-10-15T21:51:12.190
> 
> 标签：sql, oracle, count, group-by, having

我正在尝试在两个表之间编写一条 SQL 语句，其中两个表之间存在多向关系，并且仅返回具有多个关系的行。我可能会说得很糟糕，所以这里是例子。

假设表 A 有一个列“key_a”，它是表 A 的主键。表 B 有两列。第一列称为“key_b”，它是表 B 的主键，第二列称为“key_a”，它是与“A.has_a”相关的外键。已实现应用程序逻辑，以确保虽然表 A 中的行条目可以与表 B 中的 0 到 n 行有关系，但表 B 中的行与表 A 中的一行正好有关系。

如何编写一个 SQL 查询，该查询将返回“A.key_a”中的行条目，在表 B 中有不止一行通过“B.key_a”列映射到它的关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T22:00:47.280

```
SELECT key_a, a.<<other columns>>, COUNT( b.key_b )
  FROM table_a a
       JOIN table_b b USING (key_a)
 GROUP BY key_a, a.<<other columns>>
HAVING COUNT( b.key_b ) > 1 
```

将为您提供`table_a`中存在多个匹配行的数据`table_b`。如果您只对获取`key_a`具有多行的值`table_b`而不是从中获取所有数据感兴趣，`table_a`则可以完全删除对的引用，`table_a`然后只执行`GROUP BY`and `HAVING`on `table_b`。

# jquery - jQuery的滑入/滑出切换

> ID：12904590
> 
> 赞同：0
> 
> 时间：2012-10-15T21:51:39.460
> 
> 标签：jquery, toggle

我正在尝试使用 jQuery 创建一个滑出 div。当图片悬停在上面时，应该会滑出一个 div，部分覆盖照片（其中包含信息）。

我已经把 Javascript 放在一起，但我似乎无法让它工作。

该信息是`display:none`但应该在图像悬停时显示（应该从右侧滑出）

[http://jsfiddle.net/aHRzv/](http://jsfiddle.net/aHRzv/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T22:33:25.740

这是一种方法：

```
$("#snoodLink").hover(
    function() {
        $('#snoodInfo').animate({
            left: 0,
            right: 0
        }, 500);
    }, function() {
        $('#snoodInfo').animate({
            left: '-100%',
            right: '100%'
        }, 500);
    });​ 
```

它使用以下 CSS：

```
.product {
    /* ensures the positioned text element isn't
       visible before sliding in/after sliding out */
    overflow: hidden;
}
#snoodInfo {
    position: absolute;
    top: 0;
    left: -100%;
    right: 100%;
    width: 100%;
    background-color: rgba(255,255,255, 0.5);
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/aHRzv/8/)。

顺便说一句，这可以通过 CSS 来完成（旧版 IE 可以优雅地降级）：

```
.product {
    position: relative;
    overflow: hidden;
    /* following just center the image/element
       absolutely not necessary */
    width: 50%;
    margin: 1em auto;
}

.product img {
    width: 100%;
}
/* this is the #snoodInfo element, given a class
   insead of id, to make it more generic */
.info {
    position: absolute;
    top: 0;
    left: -100%;
    right: 100%;
    width: 100%;
    /* to enforce the fade-in/fade-out */
    color: transparent;
    background-color: transparent;
    /* trying to cover as many browsers
       as possible, omitting early/old IE
       but filters could (probably) be used */
    -webkit-transition: all 1.5s linear;
    -moz-transition: all 1.5s linear;
    -ms-transition: all 1.5s linear;
    -o-transition: all 1.5s linear;
    transition: all 1.5s linear;
}

.product:hover .info {
    left: 0%;
    right: 0%;
    color: #000;
    background-color: #fff;
    background-color: rgba(215,50,50,0.8);
    -webkit-transition: all 1.5s linear;
    -moz-transition: all 1.5s linear;
    -ms-transition: all 1.5s linear;
    -o-transition: all 1.5s linear;
    transition: all 1.5s linear;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/aHRzv/9/)。

# javascript - 从单独的文件访问 $.fn.extend 方法

> ID：12904591
> 
> 赞同：0
> 
> 时间：2012-10-15T21:51:40.677
> 
> 标签：javascript, jquery, extend

需要从另一个页面访问一个方法。似乎应该有类似 $("#selectedClip").setValue(4,4);

```
(function($) {
$.fn.extend({
    spinit: function(options) {
        var settings = $.extend({ min: 0, max: 100, initValue: 0, callback: null, stepInc: 1, pageInc: 10, width: 50, height: 15, btnWidth: 10, mask: '' }, options);
        return this.each(function() {
            var UP = 38;
            var DOWN = 40;
            var PAGEUP = 33;
            var PAGEDOWN = 34;
            var mouseCaptured = false;
            var mouseIn = false;
            var interval; 
```

...........

```
function setValue(a, b) {
                if (a >= settings.min && a <= settings.max) {
                    value = b;
                    //this is for editVideo php. Probably will break code in other page
                    spinnerChange(value);
                } el.val(value);
            } 
```

以上是我需要在这个文件之外调用的方法。帮助！！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T22:44:08.407

您有几种选择来执行此操作，但基本上您必须将您的公共代码（setValue 函数）隔离在一个单独的 javascript 文件（我们将其命名为 common.js）中，然后您可以执行以下任何操作：

*   始终在所有 html 文件中包含 common.js 的难以维护的解决方案
*   使用[jquery.getScript](http://api.jquery.com/jQuery.getScript/)方法加载 common.js，[这里的这个答案](https://stackoverflow.com/a/912713/678156)展示了一个很好的例子，如果尚未加载，如何加载 TinyMCE
*   也许你可以使用[这个插件](http://archive.plugins.jquery.com/project/require)（我之前没有测试过）。

就个人而言，我推荐 jquery.getScript 方法。

# android - Android：可以为样式使用别名（类似于布局别名）吗？

> ID：12904592
> 
> 赞同：2
> 
> 时间：2012-10-15T21:51:43.530
> 
> 标签：android, xml, styles

最近我发现了[布局别名](http://developer.android.com/training/multiscreen/screensizes.html#TaskUseAliasFilters)。

样式是否存在相同的东西？

例如，如果 my_page.xml 使用 normal_style，我是否可以设置别名，以便当设备具有 xlarge 屏幕时使用 xlarge_style（我**不必**复制 my_page.xml）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T22:29:02.997

你可以这样做：

```
<style name="alias" parent="original"></style> 
```

这应该会产生一种新样式，它具有与原始样式不同的名称但具有相同的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T00:22:56.587

@CommonsWare 评论的回答：

有两个`styles.xml`文件，一个在下面`res/values/`，一个在`res/values-xlarge/`. 每个`styles.xml`文件都定义了同名的样式（例如：MyStyle）。然后Android会根据屏幕大小选择合适的样式。

# html - 如何在一个 td 中对齐多个文本行

> ID：12904595
> 
> 赞同：4
> 
> 时间：2012-10-15T21:51:53.140
> 
> 标签：html, alignment, html-table

我需要在 TD 中有几个元素，并且这个 td 大小最多为表格的 %50，并且每一行都应该向左对齐，但最大的文本应该“接触”表格的右侧。

```
<table width="100%" cellpadding="0" cellspacing="0">
    <tbody>
        <tr>
            <td style="line-height: 20px; width: 49%;">
            <span style=" color: #FF00FF !important; font-size: 12pt; font-weight: bold;">Text First Cell
            </span>
            </td>
            <td style="width: 50%; text-align: right;">
            <span name="span1" style="float: left; width: 100%;">
            <span style="font-family: Arial !important; color: #FF00FF ; font-size: 12pt; font-weight: bold;">Text1 Second Cell Larger Text </span> 
            </span>
            <span name="span2" style="width: 100%; float: left;">
                <span style="font-family: Arial ; color: #FF00FF ; font-size: 12pt; font-weight: bold;"> Text2 Second Cell
                </span>
            </span>
            </td>
        </tr>
    </tbody>
</table> 
```

我几乎可以做到这一点，但我无法将文本“Text1 Second Cell Larger Text”和“Text2 Second Cell”左对齐。

有任何想法吗？另外，如果有更好的方法可以做到这一点，我很想知道！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T18:48:34.370

我刚刚学会了如何做到这一点：

```
.myDiv {
    float: right;
}
.span1{
    display: block;
}

<div class="myDiv">
<span name="span1" class="span1" >
<span style="font-family: Arial !important; color: #FF00FF ; font-size: 12pt; font-weight: bold;">Text1 Second Cell Larger Text </span> 
</span>
<span name="span2" class="span2">
<span style="font-family: Arial ; color: #FF00FF ; font-size: 12pt; font-weight: bold;"> Text2 Second Cell</span>
</span>
</div> 
```

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T01:18:09.653

我猜你在对齐文本时遇到问题，因为在同一个单元格中。我的建议是在表格中创建多个单元格，这样会更容易。

## 例子：

```
<table border=0 width=546 style='table-layout:fixed'>
    <col width=67>
    <col width=75>
    <col width=41>

       <tr>

            <td width="147" rowspan="2"><span style="line-height: 20px; width: 49%;"> 
            <span style=" color: #FF00FF !important; font-size: 12pt; font-weight:bold;">
            Text First Cell </span> </span></td>

           <td width="389"><div align="right">
           <span style="font-family: Arial !important; color: #FF00FF ; 
           font-size: 12pt; font-weight: bold;">
           Text1 Second Cell Larger Text </span></div></td>
       </tr>

       <tr>

          <td><span style="font-family: Arial ; color: #FF00FF ;
          font-size: 12pt; font-weight:  bold;">
          Text2 Second Cell </span></td>

      </tr>
      </table> 
```

# python - Python中的二进制搜索，无限循环？

> ID：12904596
> 
> 赞同：0
> 
> 时间：2012-10-15T21:51:57.463
> 
> 标签：python, binary

我在在线课程（Python 入门）中遇到了一些问题。从本质上讲，我们被告知在给定余额和年利率的情况下，使用二分搜索来找到每月清除债务的最低固定付款（四舍五入到最接近的 0.01 美元）。我的解决方案在上传到他们的在线评分器时，只给了我这个错误：

“运行您的解决方案时出现问题。我们无法运行您的解决方案。”

我可能处于无限循环中吗？如果是这样，我不太明白怎么做。原始代码贴在下面。感谢大家花时间阅读本文！

```
MonthlyInterestRate = annualInterestRate/12
month = 1
LB = balance/12
UB = balance*(2.7/12)
check = balance
while abs(balance) > 10:
    payment = (LB + UB)/2
    while month <= 12:
        balance = (balance - payment)*(1 + MonthlyInterestRate)
        month = month + 1
    if balance > 10:
        LB = payment
        balance = check
    elif balance < -10:
        UB = payment
        balance = check
    else:
        print('Lowest Payment: ' + str(payment))
        break 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T22:16:29.113

似乎可能的罪魁祸首是您从未在内部 while 循环之后重置月份的值。也就是说，一旦 inner 执行了一次，它将永远不会再次执行。这意味着 balance 的值不会改变，你将陷入无限循环。

由于您只使用月份来迭代一定次数，因此您应该将内部循环更改为

```
for m in range(month):
    balance = (balance - payment)*(1 + MonthlyInterestRate) 
```

编辑：

从头开始，只是玩弄你的函数，如果起始余额大于 13，它似乎很快会收敛。如果余额小于 10，那么你的函数会减少余额，所以它肯定不会终止。如果余额小于 13，那么它似乎在 1 次迭代中终止。

我用不同的年利率测试了这个函数，它对结果完全没有影响。收敛数似乎约为起始余额的 90%。这是一个无聊的功能。

# javascript - jQuery表格行添加停止

> ID：12904598
> 
> 赞同：1
> 
> 时间：2012-10-15T21:52:15.087
> 
> 标签：javascript, jquery

每次单击时，查看链接都会不断向表中添加行。我需要停止它。我在一个 JavaScript 数组中有 2 个对象，它们由 GetVıewData 传递给 prıntfeed 函数。当我单击每个视图链接时，它会添加 2 行，这很合适。再次单击后，它又增加了 2 个，依此类推。我怎样才能停止这个功能？

```
$(document).ready(function() {
   $(".anch").click(function(e) {           
    GetViewData(trID);
});

function GetViewData(pid) {
var data = [ {"FeedID":"10", "TranslateText": "test"}, {"FeedID":"11", "TranslateText": "test"}];           

$.each(data, function (i, item) {
         printFeed(div, item,TableID );
 });

function printFeed(div,item,tableName) {        
        var iTableName = "#" + tableName;
        var newRow = $("<tr><td>test</td></tr>");
        $(iTableName).append(newRow);

    }  

<a class="anch">view</a>  
<div id="ajaxDiv-1">
    <table id="Table2">
        <tr><td>test</td></tr>
    </table>
</div>  
<a class="anch">view</a> 
<div id="ajaxDiv-1">
    <table id="Table3">
        <tr><td>test</td></tr>
    </table>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T21:56:04.477

所以你希望用户只能点击一次按钮？

如果是这样，您可以使用 jQuery .one 函数。[http://api.jquery.com/one/](http://api.jquery.com/one/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T00:33:30.760

多种方式，包括使用`one()`以前发布的。这具有处理程序将工作一次且仅一次的限制。

您可以使用条件语句来查看是否需要在处理程序中运行代码。

```
var ctr=0;

$(selector).click(function(){
   if( ctr < 3){
      /* run code*/
   }
   ctr++;
}); 
```

`unbind()`或者您可以使用或删除处理程序`off()`

```
if( myFavoriteColor === 'Green'){
   $(selector).unbind('click')
} 
```

或者

```
$(selector).click(function(){
   if( ctr < 3){
      /* run code*/
   }else{
       $(this).unbind('click')
   }
   ctr++;
}); 
```

# javascript - 使用 javascript 控制 CFINCLUDE 文件

> ID：12904602
> 
> 赞同：2
> 
> 时间：2012-10-15T21:52:44.963
> 
> 标签：javascript, jquery, coldfusion, coldfusion-9

我正在尝试使用 javascript 控制 cfinclude 标记，以前从未这样做过，我不确定是否可以开始。

这是我的代码：

```
<form name="form" id="form" action="survey_sounding_geo.cfm" method="post">
   <input type="hidden" name="isPost" value="1" />
   <select name="format" id="format" onChange="showDiv(this.value);">
      <option value="SurveyList" <cfif format eq 'SurveyList'>selected</cfif>>List surveys</option>
      <option value="testimonial"<cfif format eq 'testimonial'>selected</cfif>>List Testimonials</option>
      <option value="html_lsbg"<cfif format eq 'html_lsbg'>selected</cfif>>List Survey Ratings by Group</option>
      <option value="excel1"<cfif format eq 'excel1'>selected</cfif>>Export Survey Summary</option>
      <option value="excel_esd"<cfif format eq 'excel_esd'>selected</cfif>>Export Survey Details</option>
      <option value="excel_esc"<cfif format eq 'excel_esc'>selected</cfif>>Export Survey Comments</option>
   </select>
   <input type="button" name="btn_1" value="Generate" onClick="submitForm();">
</form> 
```

这是我的 js 代码：

```
function submitForm()
{
        document.form.submit();

        var res = document.getElementById('format').value;

        if(res ==  'testimonial'){
        $("#test").html('<cfinclude template="Report_testimonials.cfm">');
        }
        if(res == 'SurveyList'){
        $("#test").html('<cfinclude template="Report_SurveyList.cfm">');
        }
        if(res ==  'excel1'){
        $("#test").html('<cfinclude template="Report_ExcelSummaryExport.cfm">');
        }
        if(res ==  'html_lsbg'){
        $("#test").html('<cfinclude template="Report_SummaryList.cfm">');
        }
        if(res ==  'excel_esd'){
        $("#test").html('<cfinclude template="Report_ExcelDetailExport.cfm">');
        }
        if(res ==  'excel_esc'){
        $("#test").html('<cfinclude template="Report_ExcelCommentsExport.cfm">');
        }

} 
```

Anf 这就是我输出整个内容的方式：

```
<div id="test"></div> 
```

我的问题是，由于某种原因，cfinclude 文件似乎在我提交表单之前尝试运行，这会导致包含文件中的随机错误，因为我实际显示它们时应该传递的值。

如果我从选项中删除 cfinclude 代码并将其替换为随机字母/单词，它就可以正常工作并且输出正确的值。

这是我的原始代码：

```
<cfif isDefined('isPost')>

    <cfif form.format eq 'testimonial'>
        <cfinclude template="Report_testimonials.cfm">
    <cfelseif form.format eq 'SurveyList'>
        <cfinclude template="Report_SurveyList.cfm">
    <cfelseif form.format eq 'excel1'>
        <cfinclude template="Report_ExcelSummaryExport.cfm">        
    <cfelseif form.format eq 'html_lsbg'>
        <cfinclude template="Report_SummaryList.cfm">
    <cfelseif form.format eq 'excel_esd'>
        <cfinclude template="Report_ExcelDetailExport.cfm">

    <cfelse>
        <cfinclude template="Report_ExcelCommentsExport.cfm">
    </cfif>
</cfif> 
```

当我选择一个在页面上输出 html 的选项时，它会卡在页面上，然后当我选择一个 excel 选项（在 excel 文件中下载相同的输出）时，它仍然显示以前的 html 代码。当我更改格式时，我需要清除该输出。

此代码下载我选择的 excel 文件。每当此代码运行时，我都需要清除屏幕上的 html 输出

```
<cfif SurveyCommentsData.recordcount gt 0>
     <cfcontent type="application/msexcel">
       <cfheader name="content-disposition" value="attachment;filename=report.xls">
       <cfoutput>#report#</cfoutput>
<cfelse>
     Sorry no records found.
</cfif> 
```

这是我修改后的代码：

```
function submitForm()
{

        var res = document.getElementById('format').value;

        if(res ==  'testimonial'){
        $("#test").load("Report_testimonials.cfm");

        }
        if(res == 'SurveyList'){
        $("#test").load("Report_SurveyList.cfm");

        }
        if(res ==  'excel1'){
        $("#test").load("Report_ExcelSummaryExport.cfm");
       $("#test").empty();
        }
        if(res ==  'html_lsbg'){
        $("#test").load("Report_SummaryList.cfm");

        }
        if(res ==  'excel_esd'){
        $("#test").load("Report_ExcelDetailExport.cfm");
 $("#test").empty();
        }
        if(res ==  'excel_esc'){
        $("#test").load("Report_ExcelCommentsExport.cfm");
 $("#test").empty();
        }

        submit();

} 
```

这并没有给我任何错误，但它会导致整个事情停止工作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-15T22:43:55.847

您将要使用 AJAX 来完成此操作。您在 JS 中遇到错误的原因`<cfinclude>`是因为 CF 在代码接近 JavaScript 之前正在评估该代码。

最简单的方法是更换你的

`$("#test").html('<cfinclude template="Report_testimonials.cfm">')`

像这样：

`$("#test").load("Report_testimonials.cfm");`

这将向服务器发送一个 AJAX 请求以获取 CF 模板，然后将返回的 HTML 放入您的`#test`div 中。

您的路径可能不同，因此您可能需要稍微调整一下传递给[`load`](http://api.jquery.com/load/)方法的模板名称。这将需要您运行 JS 的模板的相对路径。

**编辑**：关于您修改后的代码 - 您有两个选项，具体取决于您是在对 Excel 模板进行 AJAX 调用*之前*还是*之后清空 div。*如果您想在拨打电话之前清空它，只需将您的移动`$("#test").empty()`到 AJAX 调用上方。如果您想在收到响应后清空它，可以将回调传递给该`load`方法：

```
$("#test").load("Report_ExcelSummaryReport.cfm", function() {
    $("#test").empty();
}); 
```

# javascript - 关于如何为多个 DOM 元素设置动画的建议

> ID：12904603
> 
> 赞同：0
> 
> 时间：2012-10-15T21:52:50.960
> 
> 标签：javascript, jquery

我有多个`<li>`包含多个`<div>`元素的元素。其中一些具有 的起始`display`属性`none`。
基于鼠标交互，我想显示或隐藏一些`<div>`元素。

CSS 过渡不能过渡显示更改。并且将高度和不透明度设置为 0 并不是一个好主意，一些元素有输入或按钮。

所以下一步是使用 JavaScript 制作动画。我正在使用 jQuery。

我的问题是需要隐藏或并行显示的元素。由于 DOM 结构，我不能只隐藏或显示父元素，因为某些元素将被隐藏而其他元素将被显示。

所以我的问题是，如何有效地处理多个元素上的多个并行动画（主要是淡入淡出和幻灯片），同时保持代码的清洁和可维护性以及尽可能好的性能。

一个标记示例，其中 div 元素需要显示或隐藏：

```
<ul>
    <li>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </li>
    <li>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </li>
    <li>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </li>
</ul> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:57:10.427

您可以为要一起显示和隐藏的每组元素分配相同的类。如果这听起来不熟悉，您可能需要花一些时间来熟悉这个概念。这应该让你开始：[http ://api.jquery.com/hide/](http://api.jquery.com/hide/)

```
<div class="first-class"></div>
<div class="second-class"></div>
<div class="third-class"></div>
<div class="first-class"></div>
<div class="third-class"></div>
<div class="second-class"></div> 
```

# rest - 泽西资源过滤器不转发请求

> ID：12904605
> 
> 赞同：1
> 
> 时间：2012-10-15T21:53:14.017
> 
> 标签：rest, resources, filter, jersey

我正在开发 Jersey 实现，其中我的要求是验证和验证请求正文并将其转发到 REST 资源。

验证和验证在注册过滤器中工作正常，但用于转发。请求未转发到 REST 资源。我无法弄清楚我错过了什么。这是我的配置和代码

web.xml

```
<init-param>
    <param-name>com.sun.jersey.spi.container.ResourceFilters</param-name>
    <param-value>com.level3.messaging.producer.auth.PubRequestFilterFactory</param-value>
</init-param> 
```

我的资源过滤器工厂

```
@Component
@Provider
public class PubRequestFilterFactory implements
    ResourceFilterFactory {

    @Autowired
    PublisherRequestFilter publisherRequestFilter;

    @Override
    public List<ResourceFilter> create(AbstractMethod am) {
    return Collections
        .<ResourceFilter> singletonList(publisherRequestFilter);
    }

} 
```

我的资源过滤器实现

```
@Component
@Provider
public class PublisherRequestFilter implements ResourceFilter {      

    @Override
    public ContainerRequestFilter getRequestFilter() {

    return new ContainerRequestFilter() {
        /**
         * Checks if the incoming request is appropriate for the request
         * body. If not throws a web application exception
         */
        @Override
        public ContainerRequest filter(ContainerRequest request) {
         // returned request is not gettting forwared.
                            // I was able to debug thru request
        return request;
        }
    };
    }

    @Override
    public ContainerResponseFilter getResponseFilter() {
    return null;
    }

} 
```

我的 REST 资源实现

```
@Component
@Produces("application/xml")
@Path("publish")
@Scope("singleton")
public class Publisher extends MessageResource {     

    @POST
    @Path("event")
    @Consumes("application/xml")
    @Produces("application/xml")
    public ProducerResourceResponseWrapper publishEvent(Event event) {
        super.message = event;
        final Long startTime = System.currentTimeMillis();
        init(MessagePattern.Event.name());
        publishMessage(startTime);
        return responseWrapper;
    }

    private void publishMessage(Long startTime) {
    String errorMessage = null;
    try {
        final MessageDelegator eventDelegator = new MessageDelegator(
            publisherResourcesDO);
        eventDelegator.delegate();
        if (publisherResourcesDO.getErrorDO() != null) {
        throw new ErrorHandler(publisherResourcesDO.getErrorDO());
        }
        buildResponse(startTime);
    } catch (final Exception e) {
        errorMessage = e.getMessage();
        handleException(e);
    } finally {
        auditMessage(startTime, errorMessage);
    }

    } 
} 
```

# emacs - 在 org 模式下重新归档列表项

> ID：12904610
> 
> 赞同：4
> 
> 时间：2012-10-15T21:53:27.993
> 
> 标签：emacs, org-mode

我一直在尝试改进我的 org-fu，我的任务之一是重新归档列表项。出于各种原因，我通常更喜欢使用列表项（主要是 - 考虑到我的任务量，不要乱扔我的 CONTENT 视图，并且有一个真实的大纲）。

但是，唉，当我尝试重新填写使用捕获系统创建的列表项时，我收到一个错误 - 我不允许这样做，因为它“没有意义”。

有没有办法覆盖这种行为？

编辑：ATM 我只设法重新归档条目（即标题），然后将它们手动转换为列表项。我认为有比这更好的解决方案...

我在 org-capture.el 中找到了这个函数：

```
(defun org-capture-refile ()
  "Finalize the current capture and then refile the entry.
Refiling is done from the base buffer, because the indirect buffer is then
already gone.  Any prefix argument will be passed to the refile command."
  (interactive)
  (unless (eq (org-capture-get :type 'local) 'entry)
    (error
     "Refiling from a capture buffer makes only sense for `entry'-type templates"))
  (let ((pos (point))
    (base (buffer-base-buffer (current-buffer)))
    (org-refile-for-capture t))
    (org-capture-finalize)
    (save-window-excursion
      (with-current-buffer (or base (current-buffer))
    (save-excursion
      (save-restriction
        (widen)
        (goto-char pos)
        (call-interactively 'org-refile))))))) 
```

如何删除部分`(unless (eq (org-capture-get :type 'local) 'entry)`使其生效？

## 编辑：23.10.12

到目前为止，我设法让它工作：

```
(defun narrow-and-reveal ()
    "Narrow and reveal all content"
    (org-narrow-to-subtree)
    (org-show-subtree)
    )
(defun widen-and-outline ()
    "Widen and move to beginning of file"
    (widen)
    (beginning-of-buffer)
    (org-overview)
    (org-content)
    )
(defun org-goto-symbol ()
  "Will navigate to the symbol at the current point of the cursor"
  (widen-and-outline)
  (interactive)
  (let ((current-prefix-arg 4)) ;; emulate C-u
    (call-interactively 'org-refile)) ;; invoke org-refile interactively
  (narrow-and-reveal)
  )
(defun custom-org-prompt-headline ()
  (org-goto-symbol) ;; invoke org-refile interactively
  (end-of-buffer))
(setq org-capture-templates`(
    ("t" "ToDo" item (file+function (concat org-directory "ToDo.org") custom-org-prompt-headline)))) 
```

但在输入列表项本身之前，它会提示我输入文件中的部分，我觉得这有点让人分心。我只想选择重新归档列表项。我无法想象它应该那么难实现..是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-14T06:34:04.217

在浏览了邮件列表档案之后，到目前为止我找到的最佳解决方案是`org-refile-active-region-within-subtree`选项。它使 refile 能够移动任意文本区域，但它 refile 还在`org-toggle-heading`移动它之前将该文本转换为标题（使用 ）。

所以至少文本被移动了，但它可能不是你想要的 100%（它不再是一个列表）。虽然它可能是一个很好的起点，但可以寻找更好的解决方案。也许通过`org-toggle-heading`在文本移动后运行。

这是内联文档：

> 非零意味着也重新归档子树中的活动区域。
> 
> 默认情况下，如果区域不包含一组子树，则 `org-refile' 不允许重新归档区域，但有时这样做可能很方便：在这种情况下，区域的第一行在之前转换为标题重新归档。

我在这个线程中找到了它 - [http://lists.gnu.org/archive/html/emacs-orgmode/2011-08/msg00535.html](http://lists.gnu.org/archive/html/emacs-orgmode/2011-08/msg00535.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T16:32:46.740

确实，有**一个**更好的方法：为什么不使用[捕获模板](http://orgmode.org/manual/Capture-templates.html)？

基本上，你只需要定义你喜欢的模板，比如：

```
(setq org-capture-templates
 '(("t" "something" item (file+olp "~/path/to/you/file.org" "Header" "Subheader")
        "- %?\n  %i")
   ("n" "notes" checkitem (file+olp "~/somewhere/notes.org" "Notes")
        "- [ ] %?\n"))) 
```

然后，在使用时，调用（如果您遵循[标准自定义](http://orgmode.org/manual/Setting-up-capture.html#Setting-up-capture)`(M-x) org-capture`，则绑定），在**已经是列表项**模板中输入您的注释，然后您就完成了！`C-c``c`**`C-c``C-c`**

 **所有细节都在[手册](http://orgmode.org/manual/Capture.html#Capture)中（[设置语法](http://orgmode.org/manual/Template-elements.html#Template-elements)，[自动扩展元素](http://orgmode.org/manual/Template-expansion.html#Template-expansion)......）**

# c++ - 二维数组未正确初始化

> ID：12904613
> 
> 赞同：0
> 
> 时间：2012-10-15T21:53:44.793
> 
> 标签：c++, arrays

简单的一行代码停止编译，有什么问题？

```
char *words[256] = new char[numOfWords][256];

array must be initialized with a brace-enclosed initializer 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T21:59:35.203

您声明了一个包含 256 个指针的数组，指向`char`. 错误消息很清楚 - 数组需要使用大括号括起来的初始化程序进行初始化。因此，如果您想保留您的声明，请执行以下操作：

```
char* words[256] = { new char[wordlength], ... };
       //   ^^^ this is effectively your numOfWords 
```

或者，您可以完全省略初始化并稍后分配单个元素，例如在循环中。请注意，如果您动态分配元素，您也有责任正确删除它们。

如果你想要一个指向 256 `char`s 数组的数组的指针，那么这个：

```
char (*words)[256] = new char[numOfWords][256]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T22:01:46.200

当你声明一个二维数组时，可以把它简单地想象成一个指向其他数组的指针数组。因此，要执行您的要求：

```
char *words[] = new char*[256];
for (int i = 0; i < 256; ++i) {
    words[i] = new char[numOfWords];
} 
```

# article - Schema.org 文章页面上的文章微数据和文章的所有链接

> ID：12904619
> 
> 赞同：4
> 
> 时间：2012-10-15T21:53:59.693
> 
> 标签：article, microdata, schema.org

我有用 schema.org 微数据标记的文章页面，例如以下（简化）：

```
<div itemscope itemtype="http://schema.org/Article">
    <div itemprop="name">My Article Title</div>
    <div>by <span itemprop="author">John Doe</span></div>
    <meta itemprop="url" content="/link/to/my-article" />
    <div itemprop="articleBody">Article body goes here.</div>
</div> 
```

我有各种页面链接到这些文章页面，例如按年和月分段的存档页面、标签页面、搜索结果等。在所有这些具有文章链接的页面上，我是否还应该添加 schema.org 标记，例如这个：

```
<div itemscope itemtype="http://schema.org/Article">
    <a itemprop="url" href="/link/to/my-article"><span itemprop="name">My Article Title</span></a>
</div> 
```

或者这是否被搜索引擎所反对和/或惩罚？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-29T18:54:40.693

这是 schema.org 中的推荐做法，您应该在每个链接中的 url 属性指向包含特定架构项的另一个页面，*而不*需要包含在特定架构项页面上的任何额外信息。例如，对于文章集合列表中的每个链接：

```
<div itemscope itemtype="http://schema.org/Article">
    <a itemprop="url" href="/link/to/my-article">My Article Title</a>
</div>
<div itemscope itemtype="http://schema.org/Article">
    <a itemprop="url" href="/link/to/another-article">Another Article Title</a>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T04:01:41.730

我认为它根本不会被搜索引擎所反对。请记住，微数据不会**直接**影响您的 SEO。微数据可能会在一定程度上*间接*影响您的 SEO。

微数据的目的是创建“丰富的片段”，使您的链接在 SERPS（搜索结果）中看起来更漂亮和“更易于点击”，从而最终用户更有可能访问您的网站或文章。

换句话说，带有微数据的 SERP 可能看起来像（没有 href 代码）：

```
Rbeezi's Articles Inc.
Welcome to Rbeezi's Articles.  Please read through <a href="link.html" 
itemscope="url">Article # 1</a>.  You may also find it very useful to read through <a 
href="link.html" itemscope="url">Article 2</a> for more information on oceanography. 
```

这个**丰富的片段**比仅仅拥有你的标题和一堆混乱的元关键字等更专业和用户友好得多（元数据几乎已经过时了，但你明白了）。所以 SE 可能会让你在 SERPS 中脱颖而出——这似乎是一种会持续下去的趋势。我能想到的使用微数据的唯一缺点是，最终用户可能只会点击文章链接，如果是外部网站，他们将不会访问您的网站。

但总而言之，如果有人在 5 年前告诉你社交媒体是未来的潮流，而你忽略了它，你可能会后悔。似乎 Google 和 Bing/Yahoo 都在使用 schema.org，这就是我将其纳入公司网站的原因。话虽如此，我认为您的语法没有任何问题，而且我认为搜索引擎根本不会反对它；如果有的话，这将是有益的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-21T21:57:19.287

试试这个，它对我的​​侧边栏很有用。

```
<ul class="pagination" role="navigation" itemscope="" itemtype="https://schema.org/WebPageElement, https://schema.org/ItemList">
                <li class="active" itemprop="additionalType" itemscope="" itemtype="https://www.schema.org/SiteNavigationElement, https://schema.org/itemListElement">
                <a class="more" href="index.php" itemprop="url">
                <span itemprop="name">page 1</span>
                </a>
                </li>
                <li itemprop="additionalType" itemscope="" itemtype="https://www.schema.org/SiteNavigationElement, https://schema.org/itemListElement">
                <a rel="next" class="more" href="page2.php" itemprop="url">
                <span itemprop="name">page 2</span>
                </a>
                </li>
                <li itemprop="additionalType" itemscope="" itemtype="https://www.schema.org/SiteNavigationElement, https://schema.org/itemListElement">
                <a  class="more" href="page3.php" itemprop="url">
                <span itemprop="name">page 3</span>
                </a>
                </li>
                <li itemprop="additionalType" itemscope="" itemtype="https://www.schema.org/SiteNavigationElement, https://schema.org/itemListElement">
                <a class="more next" href="page2.php" itemprop="url">
                <span itemprop="name">page 4</span>
                </a>
                </li>
            </ul> 
```

# c++ - 快速内存访问有什么技巧吗？

> ID：12904621
> 
> 赞同：1
> 
> 时间：2012-10-15T21:54:04.523
> 
> 标签：c++, performance, memory, pointers

我对 C++ 编程世界很陌生，很抱歉我的业余问题：

我在主存储器（一维数组）中存储了一大块数据，我需要经常访问那里的一些数据，我这样做的方法是：

```
float *x=new float[20];//array to store x;
int *indlistforx=new int[20];//array to store the index of x;
float *databank=new float[100000000];//a huge array to store data

/... fill data to databank.../

for (int i=0;i<N;i++)//where N is a very large number;
 {
  /... write index to indlistforx.../
  getdatafromdatabank(x, indlistforx, databank);
  //Based on the index provided by indlistforx, read data from databank then pass them to x

  /...do something with x.../
  }; 
```

是否有任何有效/快速的方法来访问这些数据（x 的索引未对齐，并且不可能对齐）？

提前谢谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T23:23:21.257

你还没有真正展示你是如何访问你的数据库的，所以这都是非常推测的：

*   是`indlistforx`数据库中 20 个索引的列表，所以您正在执行 20 次随机访问？

    *   这些指数的步幅是多少：它们是连续的、靠近的还是随机的？
    *   如果它们是连续的或靠近在一起，对它们进行排序可能会有所帮助（因此您按升序读取以改进预取，并将来自同一缓存行的读取分组在一起）
*   不同组的 20 个指数跳了多少？它们可以重叠吗？

    *   如果它们不能重叠，那么您的数据库被有效地划分为一些块大小，那么在不同的处理器上处理每个分区可能会增加您可以使用的有效缓存量（如果您有多个处理器）
    *   如果请求可以重叠，如果数据库是只读的，则同时运行它们仍然可以工作。如果有任何东西写入数据库，这将成为缓存抖动的秘诀
*   您能否在更高级别重新排序访问以获得更好的缓存行为：更顺序、更好的空间或时间参考局部性？

    *   这与我的第一个建议基本相同，但高于单个`indlistforx`请求的级别
    *   同样，考虑重新排序它们以有效地划分数据库并尝试多处理器的想法

* * *

如果没有看到所有代码（或有代表性的示例，我知道即使这可能太大了），很难深入了解更多细节。

但是，有一种通用技术可能会奏效……它也可能如此重量级，以至于实施成本超过了节省。

*   让您的`getfromdatabank`回报成为未来/承诺/无论如何，而不是同步完成（或 20 个期货的向量，如果这不是太细粒度的话）
*   尝试并行调度大量这些异步请求，或者在单独的线程中（访问期货将是一个阻塞操作），或者使用事件循环来处理诸如显式协同程序之类的完成
*   有一个专用线程聚合来自多个请求的所有数据库访问，并对它们重新排序以获得更好的缓存性能

仅当额外的同步开销主要由改进的读取性能支配，并且您可以有效地并行运行许多查询时，这才有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T23:00:20.200

由于需要初始化浮点数，因此您确实应该使用 std::vector<>，它并不慢，像这样构造和填充：

```
std::vector< float > databank( 100000000, 0.0f ); 
```

有几个加速选项：

1）如果有相当大的键（索引）重用，那么您可以使用某种缓存或记忆策略。看有关示例，[http://www.boost.org/doc/libs/1_51_0/libs/flyweight/doc/index.html 。](http://www.boost.org/doc/libs/1_51_0/libs/flyweight/doc/index.html)

2) 您可以使用 std::async() 将处理拆分为多个线程。

3）确保您的编译器已打开并正在使用 simd 指令（x86 上的 sse）。如果不通过使用编译器内在函数强制使用 simd。这将允许近 4 倍的改进。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T23:54:13.953

问题不在于你如何代表你的`databank`. 问题是你如何使用它。在短时间内随机访问您的分散广泛的部分`databank`会扼杀您的表现。你`getdatafromdatabank(x, indlistforx, databank)`几乎`indlistforx`可以保证性能不佳。由此启用的随机访问`indlistforx`会带来显着的性能损失。如果随机访问是绝对必要的，因为使用你的算法如何`databank`工作，那只是你必须付出的代价。

如果您可以修改您的算法，以便它们访问您的`databank`. 更改`getdatafromdatabank`以便您仅指定第一个索引（要加载到的元素的索引`x[0]`），而不是 20 个索引的数组。

`x`大小为 20是否有原因？如果您勉强保留输出数组和1 级缓存`x`的相关块，您将获得最佳性能。如果大小超过此最佳大小`databank`，性能将开始下降，并且可能会显着下降。`x`

# java - 传统线程是否有类似于 onPreExecute 和 onPostExecute 的东西？

> ID：12904622
> 
> 赞同：3
> 
> 时间：2012-10-15T21:54:09.287
> 
> 标签：java, android, multithreading, android-asynctask

为了这个问题，我正在使用`AsyncTask`并且只是切换到使用传统的原因不值得讨论。`Thread`

我可以做些什么来在线程启动之前和之后执行某些操作，类似于 onPre/PostExecute 的功能？

例如，假设我想在线程开始之前显示一个加载圆圈，并在它结束时将其关闭。我该怎么做？

对于执行后位，我正在使用 thread.join() ，它似乎可以解决问题。我不确定这是否是解决方法，或者如何在执行前做一些事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T22:13:59.117

> 我可以做些什么来在线程启动之前和之后执行某些操作，类似于 onPre/PostExecute 的功能？

`onPreExecute()`-> 在调用你的之前执行`start()`的语句`Thread`

`onPostExecute()`-> 调用`runOnUiThread()`, 或`post()`a `View`, 从您的`Thread`, 提供`Runnable`要在主应用程序线程上执行的a

> 我该怎么做？

理想情况下，你不会。进度对话框很烂。在你的 UI 中的某个地方放置一个进度指示器（例如，操作栏、标题栏），并禁用在你的线程运行时用户无法安全执行的一些操作。

话虽如此，您可能会`DialogFragment`在执行线程之前显示，然后在线程通过上述机制完成后删除片段。

> 对于执行后位，我正在使用 thread.join() ，它似乎可以解决问题。

伊克。这将阻塞你所在的任何线程，如果那是主应用程序线程，那真的很糟糕。

* * *

**更新**

示例`runOnUiThread()`：

```
new Thread() {
  public void run() {
    // do cool stuff
    runOnUiThread(new Runnable() {
      public void run() {
        // do other cool stuff quickly on the main application thread
      }
    );
  }
}).start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T06:01:27.630

锁存器（例如 CountDownLatch）可能是另一种有用的方法。

```
public class TestHarness {
public long timeTasks(int nThreads, final Runnable task)
        throws InterruptedException {
    final CountDownLatch startGate = new CountDownLatch(1);
    final CountDownLatch endGate = new CountDownLatch(nThreads);

    for (int i = 0; i < nThreads; i++) {
        Thread t = new Thread() {
            public void run() {
                try {
                    startGate.await();
                    try {
                        task.run();
                    } finally {
                        endGate.countDown();
                    }
                } catch (InterruptedException ignored) { }
            }
        };
        t.start();
    }

    long start = System.nanoTime();
    startGate.countDown();
    endGate.await();
    long end = System.nanoTime();
    return end-start;
} 
```

}

# scala - 如何将 ValueChangedListeners 添加到 Scaladin 中的 Slider？

> ID：12904625
> 
> 赞同：1
> 
> 时间：2012-10-15T21:54:34.387
> 
> 标签：scala, vaadin

我不知道如何在我的应用程序中向 Slider 添加监听器。我有水平滑块。根据糟糕的 Scaladin 文档，应该有一些方法，如 addListener、addValueChanged 侦听器或类似的东西。以下是它在 Scaladin 1.0 示例中的外观：

```
button.addListener(_ => doSomething())
layout.addLayoutClickListener(event => handleLayoutClick(event))
table.addItemClickListener(event => tableItemClicked(event)) 
```

我找不到这样的东西。这可能是因为我使用的是 Scaladin 2.0 我发现的唯一东西是 valueChangeListeners。它混合了具有 += 运算符的 ListenersTrait。因此，我希望这样的事情应该起作用：

```
val revisionsNumberSlider = new HorizontalSlider {
    min = 1
    max = revisionsTodayLeft(true)
    resolution = 0
    value = 32
    width = (200 px)
    valueChangeListeners += (event => sliderChanged(event))
}

def sliderChanged(event: ValueChangeEvent) {
    revisionsNumberLabel.value = event.property.value
} 
```

不幸的是，它不起作用。它编译但sliderChanged 方法不执行。我在里面设置了一个断点。有人知道如何将此功能附加到滑块吗？我会很感激帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T19:55:09.377

问题是我没有设置立即=真。

```
val revisionsNumberSlider = new HorizontalSlider {
    min = 1
    max = revisionsTodayLeft(true)
    resolution = 0
    value = 32
    width = (200 px)
    valueChangeListeners += (event => sliderChanged(event))
    immediate = true
} 
```

# javascript - jQuery：我如何设置一个带有 preventdefault 和一个没有的“a”标签？

> ID：12904629
> 
> 赞同：0
> 
> 时间：2012-10-15T21:54:59.750
> 
> 标签：javascript, jquery

我有 1 个链接围绕着另一个这样的链接：

```
<a href="#" class="video-link">
  <a href="#" class="not-video-link">link</a>
</a> 
```

使用 jQuery，我找到了一个可以将表格转换为 iframe 的函数，如下所示：

```
$(".video-link").live("click", function (e) {
    e.preventDefault();
    // Capture the link's HREF attribute in a variable. 
    var youtubeLink = $(this).attr('href');
    var youtubeDiv = $(this).attr('id');

    // Set the HTML (the content) of the "video destination div" 
    // to = your iframe, including the youtubeLink
    // that the user original saved into this node.

    $('#' + youtubeDiv + '').html('<iframe style="margin-left:-12px; margin-right:-12px;" frameborder="0" height="234" src="' + youtubeLink + '&autoplay=1" title="YouTube video player" width="418"></iframe>');
}); 
```

它工作正常，但我需要让另一个“a”标签正常工作。

第二个链接有`class="not-video-link"`，我希望它可以正常打开链接。

这是整个盒子：

```
 echo '<br />
        <div id="the-video-destination-div'.$id.'"  class="video-link" href="'.youtubelink(tolink($youtubevid)).'">
        <table style="background-color:#EDEFF4; font-size:11px; border:1px solid #ccc;">
        <tr><td><a ><img style="cursor:pointer;" align="left" src="'.$video_thumbnail.'" width="152px" height="114px" /></a></td>
        <td style="vertical-align:top; width:199px; padding:5px; cursor:default; " ><font style="color: #3B5998; text-decoration:none; font-weight: bold;"><font class="youtube-title"><a id="not-video-link" style="cursor:pointer;" href1="http://www.youtube.com/watch?v='.youtubetitle($wallrow["youtubevid"]).'" target="_blank">'.$video_title.'</a></font></font><font class="link-host"><br /><a href="http://www.youtube.com">www.youtube.com</a><br /><br />'.substr($video_description,0,149).'...</font></td></tr>
        </table></div><br />'; 
```

我现在已经从 div 更改为 div 标签内的 href attr 。那是非法的吗？

我找到了解决问题的方法。

```
 $("a#not-video-link").click(function () {
                var youtubeLink1 = $(this).attr('href1');
                      window.open(youtubeLink1);
                      event.stopImmediatePropagation();

                    });

            $(".video-link").live("click", function(e) {
                    e.preventDefault();

                  // Capture the link's HREF attribute in a variable.
                  var youtubeLink = $(this).attr('href');
                  var youtubeDiv = $(this).attr('id');

                  // Set the HTML (the content) of the "video destination div" to = your iframe, including the youtubeLink that the user original saved into this node.
                  $('#' + youtubeDiv + '').html('<iframe style="margin-left:-12px; margin-right:-12px;" frameborder="0" height="234" src="' + youtubeLink + '&autoplay=1" title="YouTube video player" width="418"></iframe>');
                }); 
```

这会使链接停止另一个链接以启动，反之亦然。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T22:06:32.930

嵌套链接是不允许的，只是被认为是无效的结构。

[http://www.w3.org/TR/html401/struct/links.html#h-12.2.2](http://www.w3.org/TR/html401/struct/links.html#h-12.2.2)

> **12.2.2 嵌套链接是非法的**
> 
> A 元素定义的链接和锚点不得嵌套；A 元素不得包含任何其他 A 元素。
> 
> 由于 DTD 将 LINK 元素定义为空，因此 LINK 元素也不能嵌套。

既然是这种情况，浏览器不会将它们呈现为嵌套的。它只会在下面创建两个不同的链接（见证明/图片）。

```
<a href="#" class="video-link">
  <a href="#" class="not-video-link">link</a>
</a> 
```

**证明： http:** [//jsfiddle.net/H44jE/](http://jsfiddle.net/H44jE/) [点击检查并点击链接]

此外，该结构在不同的浏览器上看起来也不同..

![在此处输入图像描述](../Images/bb444123f2bb07e37f8160592d891202.png)

**注意：**我不确定你在尝试什么.. 但正如 flec 提到的，你应该寻找其他选择..

> @Thayer 不，你没有。由于您使用的是 preventDefault 您可以将点击事件附加到任何 html-tag

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T22:00:49.190

如何将它们保持为一个链接并在单击处理程序上进行所有处理？

这样，您将拥有两个世界中最好的一个有效的 HTML 并实现您想要的。例如（基于我对问题的理解）：

```
<a href="#" class="video-link" data-otherHref="#">
  link
</a> 
```

并使用 jquery：

```
$(".video-link").live("click", function (e) {
    e.preventDefault();

    // Capture the link's HREF attribute in a variable. 
    var youtubeLink = $(this).attr('href');
    var youtubeDiv = $(this).attr('id');

    // Set the HTML (the content) of the "video destination div" 
    // to = your iframe, including the youtubeLink
    // that the user original saved into this node.

    $('#' + youtubeDiv + '').html('<iframe style="margin-left:-12px; margin-right:-12px;" frameborder="0" height="234" src="' + youtubeLink + '&autoplay=1" title="YouTube video player" width="418"></iframe>');

    // Here do whatever you want for the second link 
    var otherLink = $(this).data('otherHref');
}); 
```

# arm - Beaglebone 上的 Jazelle

> ID：12904635
> 
> 赞同：10
> 
> 时间：2012-10-15T21:55:35.493
> 
> 标签：arm, cortex-a8, jazelle

我需要在我的 Beaglebone 上的 Linux 上运行 Java 应用程序。我知道 ARM 内核确实支持 Jazelle 技术以在硬件中执行 Java 字节码。无论如何，我不清楚利用这项技术需要什么。我需要以某种方式“激活” Jazelle 吗？我需要一个能识别 Jazelle 的 Java 虚拟机吗？部署和运行利用 Jazelle 技术的 Java 软件的流程是什么？使用 Jazelle 是否需要许可证？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T22:52:25.937

Jazelle 是 ARM 架构中的一种执行模式，它“为 Java 虚拟机 (JVM) 执行字节码的硬件加速提供架构支持”——*引用自 ARM 架构手册*。

看起来 Jazelle 也有两种口味；DBX 和 RCT。以下文字来自*Cortex-A 系列程序员指南 (v3)。*

> > **2.2.2 Jazelle**
> > **Jazelle-DBX**（直接字节码执行）在 ARMv5TEJ 中被引入以加速 Java 性能，同时节省功耗。此后，内存可用性的提高和即时 (JIT) 编译器的改进相结合，降低了其在应用处理器中的价值。因此，许多 ARMv7-A 处理器没有实现这种硬件加速。
> > 
> > Jazelle-DBX 最适合在内存非常有限的系统（例如，功能手机或低成本嵌入式使用）中提供高性能 Java。**在当今的系统中，它主要用于向后兼容。**
> > 
> > **2.2.3 Thumb 执行环境 (ThumbEE)**
> > 在 ARMv7-A 中引入和要求，ThumbEE 有时被称为**Jazelle-RCT** （运行时编译目标）。它涉及对 Thumb 指令集的微小更改，使其成为在受控环境中运行时生成的代码的更好目标（例如，通过 Java、Dalvik、C#、Python 或 Perl 等托管语言）。ThumbEE 旨在供即时 (JIT) 或提前 (AOT) 编译器使用，它可以减少重新编译代码的代码大小。托管代码的编译超出了本文档的范围。

据我所知，Jazelle-DBX 的大部分用途是在 Java Card 实现中，您确实希望通过微型芯片提供大量性能。这个真正受限的域可以通过直接在 cpu 上执行字节码来利用一些额外的提升。

然而，与 Java 在典型桌面上首次亮相时相比，大多数现代**嵌入式**系统（如 Beaglebone）已经拥有更多的内存和 CPU 能力，这使得 Jazelle-DBX 不再必要。这主要是因为您将 JIT 编译到本机主机。（JIT 实现对于 Java Card 来说太大了。）

ThumbEE / Jazelle-RCT 的用处也值得怀疑。引用[android-porting 讨论](https://groups.google.com/d/topic/android-porting/oDgGxepdz_k/discussion)：

> > 通过所有这些来获得免费的空指针检查没有多大意义。

总而言之，我不知道任何使用 Jazelle 风格的 Java VM 实现，包括 Android 的 Dalvik。如果我必须在嵌入式设备上运行**Java ，我会选择：**[Dalvik](https://github.com/android/platform_dalvik)、[JamVM](http://jamvm.sourceforge.net/)或[Java SE Embedded](http://www.oracle.com/technetwork/java/embedded/overview/javase/index.html)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-16T05:17:09.063

您需要访问[http://infocenter.arm.com](http://infocenter.arm.com)。beaglebone 使用的是 ARMv7 的 Cortex-A8。在左侧的 Cortex-A 系列处理器下，Cortex-A8 获得最新的手册 r3v2 (rev 3.2)。在 ARM Architecture 下展开 Reference Manuals，您需要 ARMv7-AR（问题 C 是撰写本文时最新的）。

将这些信息用于我的示例

[http://github.com/dwelch67/beaglebone_samples](http://github.com/dwelch67/beaglebone_samples)

我的 beaglebone 节目中的功能示例：

```
12345678                                                                        
Hello World!                                                                    
413FC082                                                                        
410330C3                                                                        
00000000                                                                        
00001131                                                                        
00000011                                                                        
00000000                                                                        
00000000                                                                        
00000000                                                                        
00000002                                                                        
13112111                                                                        
00000000                                                                        
00000000                                                                        
00000002                                                                        
12345678 
```

所以这似乎是一个 r3p2 (rev 3.2) 核心。正如手册所说，支持 ThumbEE、Jazelle、拇指和 ARM。

现在令人困惑的是ti网站上的TRM，ARM trm都说支持Jazelle，直到你关注这个：

Jazelle 扩展

Cortex-A8 处理器提供了 Jazelle 扩展的简单实现。这意味着处理器不会加速任何字节码的执行，所有字节码都由软件例程执行。

在 Jazelle 扩展的实施中：

不支持 Jazelle 状态

BXJ 指令的行为类似于 BX 指令。

这告诉我们一些事情。这是否真的意味着该处理器中没有 Jazelle 硬件，尽管其他地方说它是？

它还向我们展示了运行 jazelle 代码你 bxj 到达那里就像你 bx 在手臂和拇指模式之间切换。所以我试了一下：

```
.globl bxjtest
bxjtest:
    ldr r0,=skip
    bxj r0
    mov r0,#1
    bx lr
skip:
    mov r0,#2
    bx lr 
```

看起来汇编器实现了 bxj

```
82000064 <bxjtest>:
82000064:   e59f0044    ldr r0, [pc, #68]   ; 820000b0 <GET32+0x8>
82000068:   e12fff20    bxj r0
8200006c:   e3a00001    mov r0, #1
82000070:   e12fff1e    bx  lr

82000074 <skip>:
82000074:   e3a00002    mov r0, #2
82000078:   e12fff1e    bx  lr 
```

但代码从该地址的 arm 指令返回 2。不知道这是否意味着什么，也许您还需要做其他事情才能让 Jazelle 工作。我得到的印象是那里真的没有 jazelle 核心，我得到的印象是你去购买软件库。

Jazelle 文档似乎是您必须联系 ARM 才能访问的那种。所以我不知道如何实际使用它。

在 ARM 中进一步阅读。ID_ISAR1 寄存器显示为 1，表示

0b0001

添加 BXJ 指令和 PSR 中的 J 位。

此设置可能表示 Jazelle 扩展的简单实现。

然后，ID_PFR0 寄存器的 ARM ARM 描述比 TRM 包含更多信息，它说

Jazelle 扩展的一个简单实现由值 0b0001 指示。

0b0001 是我们在该寄存器中为该字段读取的内容。

我挖掘得越多，这似乎是一个“微不足道的实现”，这对我来说意味着“不存在”。JMCR 寄存器显示，如果它是一个简单的实现，那么读取应该返回为零（RAZ），写入应该被忽略（WI），它们是，我写了一个，读回它是一个零。即便如此，我尝试了 BXJ 指令，它仍然执行 arm 代码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-08T02:56:57.977

基本上，作为产品供应商，您从 ARM 获得许可（付费）在 Jazelle 技术上启用和运行您的代码的能力。费用将基于预测数量、实际结果等。我不熟悉实际的价格水平。当进入/退出 Java 代码时，需要某些代码片段将 CPU 切换到不执行字节代码。除非您为特权付费，因为设备供应商 Jazelle 无法运行并且可以被悄悄忽略。第一代 Jazelle 解决了在 RAM 空间受限的系统上快速执行 Java 的需求，在此之前，字节码解释器是唯一可用的选项。JIT 需要 RAM 进行编译，早期的手机通过减小内存大小来优化低成本。一些最早的音乐手机使用 Jazelle 来提高 MIDlet 执行性能，但在随后的产品中，内存很快就可以适应各种多媒体智能手机级别的功能。然后，JIT 编译器变得可行，并且在整体性能方面实际上表现出色。Jazelle 在大多数情况下只是将字节码映射到机器码中的二进制文件，可以说“不能比字节码运行得更快”。虽然 JIT 有时可以将特定系列的字节码序列映射到有效的本机代码，该本机代码运行速度比基于一次一个单独的字节码操作更快。所以早期的 Jazelle 模式不再真正有用了。RAM 的增长使 JIT 更加可行。Jazelle 在大多数情况下只是将字节码映射到机器码中的二进制文件，可以说“不能比字节码运行得更快”。虽然 JIT 有时可以将特定系列的字节码序列映射到有效的本机代码，该本机代码运行速度比基于一次一个单独的字节码操作更快。所以早期的 Jazelle 模式不再真正有用了。RAM 的增长使 JIT 更加可行。Jazelle 在大多数情况下只是将字节码映射到机器码中的二进制文件，可以说“不能比字节码运行得更快”。虽然 JIT 有时可以将特定系列的字节码序列映射到有效的本机代码，该本机代码运行速度比基于一次一个单独的字节码操作更快。所以早期的 Jazelle 模式不再真正有用了。RAM 的增长使 JIT 更加可行。

# jquery - 带有验证插件问题的“非常简单的内容滑块”。

> ID：12904636
> 
> 赞同：1
> 
> 时间：2012-10-15T21:55:40.970
> 
> 标签：jquery, html, jquery-plugins, slider, jquery-validate

所以我正在使用这个 jquery 内容滑块插件：[滑块](http://tympanus.net/codrops/2010/04/28/pretty-simple-content-slider-with-jquery-and-css3/)。而且我还在使用 jquery 验证器插件。所以我在内容滑块上有一个选项卡来更改您的密码。问题是当您没有正确输入内容时，验证器的消息不会出现。这是内容滑块的 jquery：

```
$(function() {
    var current = 1;

    var iterate     = function(){
        var i = parseInt(current+1);
        var lis = $('#rotmenu').children('li').size();
        if(i>lis) i = 1;
        display($('#rotmenu li:nth-child('+i+')'));
    }
    display($('#rotmenu li:first'));
    var slidetime = setInterval(iterate,90000);

    $('#rotmenu li').bind('click',function(e){
        clearTimeout(slidetime);
        display($(this));
        e.preventDefault();
    });

    function display(elem){
        var $this   = elem;
        var repeat  = false;
        if(current == parseInt($this.index() + 1))
            repeat = true;

        if(!repeat)
            $this.parent().find('li:nth-child('+current+') a').stop(true,true).animate({'marginRight':'-20px'},300,function(){
                $(this).animate({'opacity':'0.7'},700);
            });

        current = parseInt($this.index() + 1);

        var elem = $('a',$this);

            elem.stop(true,true).animate({'marginRight':'0px','opacity':'1.0'},300);

        var info_elem = elem.next();
        $('#rot1 .heading').animate({'left':'-420px'}, 500,'easeOutCirc',function(){
            $('h1',$(this)).html(info_elem.find('.info_heading').html());
            $(this).animate({'left':'0px'},400,'easeInOutQuad');
        });

        $('#rot1 .description').animate({'bottom':'-270px'},500,'easeOutCirc',function(){
            $('p',$(this)).html(info_elem.find('.info_description').html());
            $(this).animate({'bottom':'0px'},400,'easeInOutQuad');
        })
        $('#rot1').prepend(
        $('<img/>',{
            style   :   'opacity:0',
            className : 'bg'
        }).load(
        function(){
            $(this).animate({'opacity':'1'},600);
            $('#rot1 img:first').next().animate({'opacity':'0'},700,function(){
                $(this).remove();
            });
        }
    ).attr('src','Images/'+info_elem.find('.info_image').html()).attr('width','800').attr('height','300')
    );
    }
}); 
```

以及内容滑块的 html

```
<div id="content">
    <a class="back" href=""></a>

    <div class="rotator">
        <ul id="rotmenu">
            <li>
                <a href="rot2">Password</a>
                <div style="display:none;">
                    <div class="info_image">2.jpg</div>
                    <div class="info_heading"></div>
                    <div class="info_description">
                        <form id="change_Pass" action="" method="post">
                            Current Password<span style="color:red;">*</span><input type="password" id="change_password" name="change_password"><br>
                            New Password<span style="color:red;">*</span><input type="password" id="new_password" name="new_password"><br>
                            Verify Password<span style="color:red;">*</span><input type="password" id="verify_password" name="verify_password"><br>
                            <input type="submit" value="Submit">
                        </form>
                    </div>
                </div>
            </li>
        </ul>
        <div id="rot1">
            <img src="" width="800" height="300" class="bg" alt=""/>
            <div class="heading">
                <!--<h1></h1>-->
            </div>
            <div class="description">
                <p></p>
            </div>    
        </div>
    </div>
</div> 
```

现在这是验证器的 jquery：

```
jQuery.validator.addMethod("passw", function(value, element) { 
    return this.optional(element) || /^(?=.*[\W])(?=.*[\d])(?=.*[A-Z]).{8,}$/.test(value);
}, jQuery.format("Please enter a valid password"));

$("#change_Pass").validate({
    onkeyup: false,
    errorClass: "req_mess",
    rules: {
        change_password: {
            required: true,
        },
        new_password: {
            required: true,
            passw: true,
        },
        verify_password: {
            required: true,
            equalTo: "#new_password",
        }
    },
    messages: {
        change_password: {
            required: "Please enter your current password",
        },
        new_password: {
            required: "Please enter a new password",
        },
        verify_password: {
            required: "Please enter a password that is a minimum of 8 characters and containers 1 upper case, 1 symbol, and 1 number",
            equalTo: "Your passwords did not match",
        }
    }
}); 
```

验证器适用于其他形式没问题，所以我认为这是此内容滑块显示信息的方式，这`$('p',$(this)).html(...)`可能会混淆验证器的消息。要不要，我真的不知道。我只知道当您不输入正则表达式后的密码时，它不会显示错误消息。我知道密码的正则表达式有效，因为它在其他形式上验证得很好。那么关于什么是错的以及如何解决它的任何想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T00:39:14.703

尝试这个：

替换这一行：

```
$('p',$(this)).html(info_elem.find('.info_description').html()); 
```

用这些：

```
$('p',$(this)).html();
var elements = info_elem.find('.info_description').detach();
$('p',$(this)).append(elements); 
```

您的表单已定义验证选项，并通过验证插件应用事件处理程序。问题是当您的代码仅复制表单的 HTML（作为文本）时。使用 detach() 删除实际的 dom 节点并将这些（完成验证事件）附加到您的滑块。

注意：我首先尝试使用 clone(true) 而不是 detach，但它似乎没有正确复制验证。

编辑：这个的一个问题是，当下一次迭代发生时，分离的表单会丢失，除非它被放回去。一个简单的解决方法是将表单（元素 var）存储在一个全局变量中，并将其附加到下一次迭代之前它来自的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T00:32:14.187

这可能是一个更容易/更好的解决方法。

在这一行之后：

```
$('p',$(this)).html(info_elem.find('.info_description').html()); 
```

添加这行代码，用于在刚刚添加到上一行滑块的表单上设置验证：

```
setupPasswordValidate('#rot1 .description #changePass'); 
```

因此，您还需要将验证代码放入这样的函数中：

```
function setupPasswordValidate(selector)
  $(element).validate({
    onkeyup: false,
    errorClass: "req_mess",
    rules: {
        change_password: {
            required: true
        },
        new_password: {
            required: true,
            passw: true
        },
        verify_password: {
            required: true,
            equalTo: selector + " #new_password"
        }
    },
    messages: {
        change_password: {
            required: "Please enter your current password"
        },
        new_password: {
            required: "Please enter a new password"
        },
        verify_password: {
            required: "Please enter a password that is a minimum of 8 characters and containers 1 upper case, 1 symbol, and 1 number",
            equalTo: "Your passwords did not match"
        }
    }
  });
} 
```

`html()`每次用于复制表单内容时都需要设置表单验证。获取内容`html()`不会复制事件，这些是对表单进行验证所必需的。

# java - java.io.IOException: error=2, 没有这样的文件或目录

> ID：12904640
> 
> 赞同：8
> 
> 时间：2012-10-15T21:55:53.447
> 
> 标签：java

我正在尝试使用 Runtime.getrunTime().exec 从另一个 java 程序运行一个 java 程序

代码 ：

```
String java_home = System.getenv("JAVA_HOME");
 String[] command = {""+java_home+"/bin/java -cp -cp /sc/sug/p-lib/*  Tdesigner -cd /pr -in ing.rsp -out /scratch/sug/ng.pla -ad -stopO "};
                try {
                    proc = Runtime.getRuntime().exec(command);
                    proc.waitFor();
                    int exitCode = proc.exitValue();
                } catch (IOException e) {
                        e.printStackTrace();
                } catch (InterruptedException e) {
                        e.printStackTrace();
                } 
```

它给了我以下错误：

```
 java.io.IOException: Cannot run program "/net/sl/sc/jdk6/bin/java -cp /sc/sug/p-lib/*  Tdesigner -cd /pr -in ing.rsp -out /scratch/sug/ng.pla -ad -stopOnError ": java.io.IOException: error=2, No such file or directory
            at java.lang.ProcessBuilder.start(ProcessBuilder.java:460)
            at java.lang.Runtime.exec(Runtime.java:593)
            at java.lang.Runtime.exec(Runtime.java:466) 
```

谁能帮我解决这个问题。是不是我需要使用 -cp 添加单个 jar 文件而不是设置目录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T22:17:22.563

尝试`-cp`从命令字符串数组中删除多余的部分并在数组中使用单个标记：

```
String[] command = { java_home + "/bin/java", "-cp",
   "/sc/sug/p-lib/*", "Tdesigner", "-cd", "/pr", "-in", "ing.rsp",
   "-out", "/scratch/sug/ng.pla", "-ad", "-stopO" }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T22:02:48.243

如果您使用 exec(String[]) 您必须在单独的数组元素中提供命令及其参数，而不是像您所做的那样全部合二为一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-17T18:58:50.850

我使用斯卡拉。这是我的代码：

```
Runtime.getRuntime.exec(Array("/bin/bash", "-c", #your_command)).waitFor() 
```

我认为对于使用 java 的其他人来说很容易理解。

# zend-framework - ZF Bootstrap 类的 _init 方法中的 return 有什么作用？

> ID：12904641
> 
> 赞同：1
> 
> 时间：2012-10-15T21:56:03.563
> 
> 标签：zend-framework, zend-application, zend-app-bootstrap

这是[ZF 手册](http://framework.zend.com/manual/1.12/en/zend.application.quick-start.html#zend.application.quick-start.resources)`_init`中的方法示例。最后有命令：`Zend_Bootstrap``return`

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
    protected function _initView()
    {
        // Initialize view
        $view = new Zend_View();
        $view->doctype('XHTML1_STRICT');
        $view->headTitle('My First Zend Framework Application');

        // Add it to the ViewRenderer
        $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper(
            'ViewRenderer'
        );
        $viewRenderer->setView($view);

        // Return it, so that it can be stored by the bootstrap
        return $view;    // Why return is here?
    }
} 
```

> 可以由引导程序存储

为什么要回来？引导程序将其存储在哪里，为什么？什么对象调用这个方法，谁得到结果？如果不返回会发生什么？

**更新：**

在可用资源插件页面[的关于部分中`View`](http://framework.zend.com/manual/1.12/en/zend.application.available-resources.html#zend.application.available-resources.view)，它们显示了以下启动方式`Zend_View`：

> 配置选项是每个[Zend_View 选项](http://framework.zend.com/manual/1.12/en/zend.view.introduction.html#zend.view.introduction.options)。
> 
> **Example #22 示例视图资源配置**
> 
> 下面是一个示例 INI 片段，展示了如何配置视图资源。
> 
> **resources.view** .encoding = "UTF-8"
> 
> **resources.view** .basePath = APPLICATION_PATH "/views/"

`View`从`application.ini`文件以及他们在 Zend_Application 快速入门页面中编写的所有其他资源开始这种方式似乎既方便又合理。但同时在同一个 Zend_Application 快速启动页面上，他们说`View`必须从以下位置启动`Bootstrap`：

> 现在，我们将添加一个自定义视图资源。初始化视图时，我们需要设置 HTML DocType 和标题的默认值，以便在 HTML 头部中使用。这可以通过编辑 Bootstrap 类来添加一个方法来完成：

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
    protected function _initView()
    {
        // Initialize view
        $view = new Zend_View();
        $view->doctype('XHTML1_STRICT');     // the same operations, I can set this in application.ini
        $view->headTitle('My First Zend Framework Application');   // and this too

        // Add it to the ViewRenderer
        $viewRenderer = Zend_Controller_Action_HelperBroker::getStaticHelper(
            'ViewRenderer'
        );
        $viewRenderer->setView($view);

        // Return it, so that it can be stored by the bootstrap
        return $view;
    }
} 
```

并且事件与其他资源更有趣，`Request`例如[这里](http://framework.zend.com/manual/1.12/en/zend.application.theory-of-operation.html#zend.application.theory-of-operation.bootstrap.dependency-tracking)：

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
    protected function _initRequest()
    {
        // Ensure the front controller is initialized

        $this->bootstrap('FrontController');   // why to initialized FC here if it is going to be initialized in application.ini anyway like resource.frontController.etc?

        // Retrieve the front controller from the bootstrap registry
        $front = $this->getResource('FrontController');

        $request = new Zend_Controller_Request_Http();
        $request->setBaseUrl('/foo');
        $front->setRequest($request);

        // Ensure the request is stored in the bootstrap registry
        return $request;
    }
} 
```

因此，他们似乎提供了以这种或那种方式启动资源的选择。但是哪一个是正确的呢？为什么他们混合它们？哪个更好用？

事实上，我可以`FC`从我的以下内容中删除所有这些行`application.ini`：

```
resources.frontController.baseUrl = // some base url
resources.frontController.defaultModule = "Default"
resources.frontController.params.displayExceptions = 1 
```

并像这样重写它：

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
    {
        protected function _initFrontController()
        {

            $this->bootstrap('FrontController');
            $front = $this->getResource('FrontController');
            $front->set ...  
            $front->set ...   // and here I set all necessary options

            return $front;
        }
    } 
```

`application.ini`way 和way 和有什么不一样`_initResource`？这种差异是否意味着工作中的严重问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T02:32:15.603

尽管经过一段时间阅读 zend 手册后您会得到答案。不过我会尽量回答你的问题。

1.为什么要退货？

虽然没有必要返回也不是强制性的。返回只用于将
变量存储在 zend 容器中，通常是 Zend 注册表。这个存储的变量可以由你在任何需要的地方访问。如果你不' t return 它会产生的唯一区别是您将无法在任何地方获取变量。在编写答案时在zend手册上找到以下内容。它肯定会有所帮助。

例如，考虑一个基本视图资源：

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap
{
    protected function _initView()
    {
        $view = new Zend_View();
        // more initialization...

        return $view;
    }
}
You can then check for it and/or fetch it as follows:

// Using the has/getResource() pair:
if ($bootstrap->hasResource('view')) {
    $view = $bootstrap->getResource('view');
}

// Via the container:
$container = $bootstrap->getContainer();
if (isset($container->view)) {
    $view = $container->view;
} 
```

2.引导程序将其存储在哪里，为什么？

我认为第一个回答了这个问题。

3.什么对象调用这个方法，谁得到结果？

Application 对象通常（在最开始时）调用引导程序，您也可以通过该对象调用各个资源方法。但是如果您在调用引导方法时没有指定任何参数，所有资源方法（例如 _initView()、_initRouters()）都将被执行。

4.如果不返回会怎样。

我认为由 1 回答。

这几乎包含了您正在寻找的所有答案。 [http://framework.zend.com/manual/1.12/en/zend.application.theory-of-operation.html](http://framework.zend.com/manual/1.12/en/zend.application.theory-of-operation.html)

希望能帮助到你。

更新：

看到你的更新..实际上我认为这是一个选择问题。

您想在哪里定义资源取决于您。

一直在从事一个项目，其中仅在 application.ini 文件中定义了基本资源，并且大部分资源都是从引导程序加载的...

再次是您的选择，但是在使用引导程序加载资源时您会感到舒适和灵活。（例如，定义自定义路线等）。

这就是我的感觉。

# ruby-on-rails - 带有 EC2 SauceConnect SSH 隧道的 Heroku 调度程序

> ID：12904643
> 
> 赞同：0
> 
> 时间：2012-10-15T21:56:05.317
> 
> 标签：ruby-on-rails, heroku, ssh, capybara, saucelabs

我们的测试设置有一些独特的情况。基本上我想做的是让 Heroku 以预定的时间间隔使用 Sauce Connect 运行我们的集成测试。Sauce Connect 需要在运行测试之前打开 SSH 隧道，所以我试图让 SSH 隧道在 Amazon EC2 实例上运行。我一直在本地测试它，我的脚本可以成功连接到 EC2，远程启动 SSH 隧道，然后开始在我的本地机器上运行测试。但是，当我登录 Sauce Labs 并查看正在执行的浏览器测试的视频时，每个测试都返回 404 连接被拒绝。当我在 EC2 实例上检查“netstat -an”时，我可以看到与 Sauce Labs 的 SSH 连接已成功建立，但由于某种原因它可以“ t 似乎使用远程 SSH 隧道成功运行测试。有没有人遇到过这个问题，或者可能对为什么这会给出它给出的错误有所了解？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-08T15:41:10.073

我不知道这是否解决了您的特定问题，但这里有一个在 Heroku 上设置隧道的详细配方：[来自 Heroku 的 SSH 隧道](https://stackoverflow.com/questions/21575582/ssh-tunneling-from-heroku/27361295#27361295)。

我在设置隧道时发现的最大挑战是让 ssh 不提示用户输入的状态。

# javascript - 如何使用 jQuery 的 .data() 函数访问元素的原型？

> ID：12904646
> 
> 赞同：1
> 
> 时间：2012-10-15T21:56:14.733
> 
> 标签：javascript, jquery, prototype

我正在尝试通过 jQuery 的`.data()`函数访问 html 元素的原型。到目前为止，我很困惑。

这是我的代码：

```
// start prototype definition for myWidget
var myWidget = function() { 
    console.log('my widget is alive.');
    return this; 
};

myWidget.prototype.chosenSelect = [];

myWidget.prototype.init = function() {
    this.chosenSelect = $('#chooseMe');

    // test 1
    console.log(this.chosenSelect.data());

    // test 2
    console.log(this.chosenSelect.data('chosen'));

    // test3
    console.log(this.chosenSelect.data('Chosen'));

    // test4
    var chosenObject = this.chosenSelect.data();
    console.log(chosenObject.chosen);
}; 
```

上面的测试 1 返回一个我可以使用 Chrome 开发工具查看的对象。该对象如下所示：

```
Object
    chosen: Chosen
        changeCallbacks: Array[0]
        etc
        etc
        etc 
```

我想访问该`chosen`数据对象中的对象。但测试 2 到 4 都返回`undefined`。我可能做错了什么？

## 编辑

原型正在从另一个库添加到元素中。这是分配发生的摘录：

```
Chosen.prototype.init = function(select, zidx, isIE7) {
this.select = select;
this.select.data('chosen', this); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:55:36.543

您可以按如下方式访问数据对象。这是一个工作[示例](http://jsfiddle.net/qJJkL/1/)。

```
// Set some data on the widget.
jQuery.data($('#chooseMe')[0], "Chosen", {chosen: "Hello!"});

var myWidget = function() {
    console.log('my widget is alive.');
    return this;
};

myWidget.prototype.chosenSelect = [];

myWidget.prototype.init = function() {
    this.chosenSelect = $('#chooseMe')[0];

    // test 1
    console.log(jQuery.data(this.chosenSelect));

    // test 2
    console.log(jQuery.data(this.chosenSelect, "Chosen"));

    // test3
    console.log(jQuery.data(this.chosenSelect, "Chosen").chosen);

    // test4
    var chosenObject = jQuery.data(this.chosenSelect, "Chosen");
    console.log(chosenObject.chosen);
};

myWidget.prototype.init(); 
```

# java - View 类中的 Android 倒计时

> ID：12904651
> 
> 赞同：1
> 
> 时间：2012-10-15T21:56:55.323
> 
> 标签：java, android, view, countdown, ondraw

我试图让一个圆圈在 3 秒后出现并在 3 秒后消失。

```
public class TestView extends View{

public TestView(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

@Override
protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub
    super.onDraw(canvas);
    canvas.drawColor(Color.RED);

    Paint circle = new Paint();
    circle.setColor(Color.BLUE);

    CountDownTimer count = new CountDownTimer(3000, 1000) {

        public void onTick(long millisUntilFinished) {

        }

        public void onFinish() {

            CountDownTimer count = new CountDownTimer(3000, 1000) {

                public void onTick(long millisUntilFinished) {
                    canvas.drawCircle(100, 100, 40, circle);

                }

                public void onFinish() {

                }

             }.start();

        }

     }.start();

} 
```

这种方式是完成这项任务的好方法吗？但他让我把画布和绘画作为最终作品。我应该如何删除这个圈子？

# mysql - 为数据库服务器配置 Quartz

> ID：12904653
> 
> 赞同：0
> 
> 时间：2012-10-15T21:57:01.430
> 
> 标签：mysql, sql-server, postgresql, quartz-scheduler

我正在使用 Quartz 调度程序版本 1.5.2，调度存储在 MSSQL 数据库中。Quartz 以集群模式运行，具有以下属性 -

```
org.quartz.jobStore.selectWithLockSQL = select lock_name from qrtz_locks with (updlock,rowlock) where lock_name=? 
```

工作正常..到目前为止！如果我需要跨不同数据库提供功能 - Postgres、MySQL、Oracle；上述属性需要更改。

我将如何重写查询以在所有数据库中运行？或者有没有其他方法可以实现轻松便携？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T17:09:42.487

查看[`org.quartz.jobStore.driverDelegateClass`](http://quartz-scheduler.org/documentation/quartz-2.1.x/configuration/ConfigJobStoreTX)属性：

> 驱动程序代表了解不同数据库系统的特定“方言”。[...]

Quartz 支持开箱即用的以下数据库（方言）：

*   微软SQL

*   PostgreSQL

*   网络逻辑

*   甲骨文

*   云景

*   DB2（v6、v7、v8）

*   数据库

*   点基

*   赛贝斯

我知道它也成功地与 H2 和 MySQL 一起使用。

# javascript - 为什么 jQueryUI 不能运行？

> ID：12904657
> 
> 赞同：0
> 
> 时间：2012-10-15T21:57:29.197
> 
> 标签：javascript, jquery, jquery-ui

这适用于已经安装了 jQuery 核心的 WP 安装，如下所示：

```
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js?ver=1.3.2'></script> 
```

我想利用：

[http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.24/jquery-ui.min.js](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.24/jquery-ui.min.js)

我试过像这样将它加载到正文中：

```
<div id="diag1">Step1</div>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.24/jquery-ui.min.js">

  alert("I'm alive"); // nope it's dead
  jQuery("#diag1").dialog({modal: true});

</script> 
```

即使我在页面中发出警报，这也无济于事。

我试过了

*   将脚本链接也放在页面的顶部。
*   安装一个我知道使用 jqueryui 的 3rd 方插件，这什么也没做。

我已验证

*   当我转到查看->源时，jqueryui 在 jquery 之后加载
*   jqueryui 与 jquery 兼容

我还可以做些什么？

我知道 wordpress 有一个用于加载脚本的自定义 php 函数，但我不知道它的作用或它如何影响脚本的可用性。我试过用它，还是不行。

[http://codex.wordpress.org/Function_Reference/wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)

我只想使用 jQueryUI 开发一个模式。最后，这就是我想要做的所有事情：

对于本网站：

www.papermepress.com

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T21:58:43.473

您不应该在脚本块之间放置任何内容，因为您需要关闭对 jQuery UI 的引用。所以....

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.24/jquery-ui.min.js"> 
```

应该

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.24/jquery-ui.min.js"></script>
<script type="text/javascript">

  alert("I'm alive"); // nope it's dead
  jQuery("#diag1").dialog({modal: true});

</script> 
```

# java - Java - 字符串中的字符替换

> ID：12904666
> 
> 赞同：1
> 
> 时间：2012-10-15T21:59:17.757
> 
> 标签：java

我在替换字符串中的字符时遇到了一些麻烦。该代码可以很好地删除连字符和句点，但是对于字母“e”，它会删除“test”中的“e”，并且它还会转换字符串末尾的三个“e”。有谁知道为什么会这样？

```
 String str = "This is a test string, 12345! -12e3.0 eee";
    for(int i = 0; i < str.length(); i++) {
        if((str.charAt(i) == '-') && (Character.isDigit(str.charAt(i+1)))) {
            str = str.replace(str.charAt(i), '*');
        }

        if((str.charAt(i) == 'e') && (Character.isDigit(str.charAt(i+1)))) {
            str = str.replace(str.charAt(i), '*');
        }

        if((str.charAt(i) == '.') && (Character.isDigit(str.charAt(i+1)))) {
            str = str.replace(str.charAt(i), '*');
        }
    }
    str = str.replaceAll("[1234567890]", "*");
    System.out.println(str); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T22:05:18.473

在每种情况下，该`if`部分只是查找是否应该替换字符......但是然后替换本身：

```
str = str.replace(str.charAt(i), '*') 
```

*...对整个字符串*执行替换。

最简单的解决方法可能是将其转换为一个字符数组以开始，一次替换一个字符，然后为其余字符创建一个字符串：

```
char[] chars = str.toCharArray();
for (int i = 0; i < chars.length - 1; i++) {
    if (chars[i] == '-' && Character.isDigit(chars[i + 1])) {
        chars[i] = '*';
    }
    // Similarly for the other two
}
String newString = new String(chars); 
```

或者为了避免重复，将中间部分替换为：

```
for (int i = 0; i < chars.length - 1; i++) {
    if (Character.isDigit(chars[i + 1]) &&
        (chars[i] == '-' || chars[i] == 'e' || chars[i] == '.')) {
        chars[i] = '*';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T22:07:06.227

`str.replace(str.charAt(i), '*');`将替换所有字符。 [Javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28char,%20char%29)

您可以使用 StringBuilder 替换字符串中的特定字符。请查看此问题和答案。

[替换字符串中特定索引处的字符？](https://stackoverflow.com/questions/6952363/java-replace-a-character-at-a-specific-index-in-a-string/6952379#6952379)

# javascript - 带有引导程序和 django 的异步表单

> ID：12904669
> 
> 赞同：3
> 
> 时间：2012-10-15T21:59:28.537
> 
> 标签：javascript, ajax, django, twitter-bootstrap

所以我试图使这种形式异步。理想情况下，我使用此表单添加单位，然后动态更新表格。我不希望整个页面刷新。我对 javascript 不是很好，我可以使用一些指针来说明正在发生的事情：

发生了一些我不想发生的事情：

1.  整个页面令人耳目一新
2.  request.is_ajax() 是假的。

大多数情况下，我只是想了解发生了什么，但问题是，如何更改以下内容以解决上述两个问题？（如果它们是问题，那根本就是问题。）

下面的一些代码取自这个问题：

[如何在 twitter 引导模式窗口中插入 django 表单？](https://stackoverflow.com/questions/9979622/how-do-i-insert-a-django-form-in-twitter-bootstrap-modal-window?rq=1)

作为记录，我在 request.POST 中看到帖子很好，我只想让它异步工作，这就是我的问题与上面的不同之处。

```
{% block scripts %}
<script type="text/javascript">
    $(document).ready(function() {
        modalConnect();
    });
</script>

<script type="text/javascript">
$( document ).ajaxStop( function() {
    modalConnect();
});
</script>

<script type="text/javascript">
    function modalConnect()
        {
            //unbind the click event. If not done we will end up with multiple click event bindings, since binding is done after each ajax call.
            $(".editItem").unbind('click');
            //bind the click event
            $(".editItem").click(function(ev) { // for each edit item <a>
                ev.preventDefault(); // prevent navigation
                var url = this.href; //get the href from the <a> element
                $.get(url, function(results){
                  //get the form
                  var itemForm = $("#ajax_form_modal_result", results);
                  //get the update URL
                  var formUpdateURLDiv = $("#formUpdateURL", results);
                  //get the inner html of the div
                  var formUpdateURL = formUpdateURLDiv.html();
                  //update the dom with the received form
                  $('#inventory').html(itemForm);
                  //show the bootstrap modal
                  $("#inventory").modal('show');
                  $(document).ready(function () {
                     //bind the form to an ajax call. ajax call will be set to the received update url
                     submitItemModalFormBind(formUpdateURL);
                  });
                }, "html");
                return false; // prevent the click propagation
            })
        }
</script>

<script type="text/javascript">
       function submitItemModalFormBind(url){
         //bind the form. prevent default behavior and submit form via ajax instead
         $('#ajax_form_modal_result').submit(function(ev){
             $.ajax({
                type: "POST",
                url: url,
                data: $(this).serialize(),
                success:function(response, textStatus, jqXHR){
                     var form = $("#ajax_form_modal_result_div", response);
                     //form is returned if it is not valid. update modal with returned form
                     //change this "if" to check for a specific return code which should be set in the view
                     if (form.html()) {
                        console.log('Form was invalid and was returned');
                        //update modal div
                         $('#ajax_form_modal_result_div').html(form);
                         $("#inventory").modal('show');
                      }
                      //form is not returned if form submission succeeded
                      else{
                        //update the entire document with the response received since we received a entire success page and we want to reload the entire page

                        //sort by modified date descending

                        //var notificationDiv = $("#notification", response);
                        //$('#notification').html(notificationDiv.html());
                        console.log('Form was valid and was not returned');
                        $("#inventory").modal('hide');
                        }
                },
                error: function (request, status, error) {
                            var div = $("ajax_form_modal_result_div", request.responseText);
                            $('#ajax_form_modal_result_div').html(div);
                            //implement proper error handling
                            console.log("failure");
                            console.log(request.responseText);
                        }
                    });
                    return false;
                });
              }
</script>

{% endblock %}

{% block content %}

<div class="row">
    <div class="span8 offset4">
        <div class="row">
            <div class="span3">
                <h1>
                Acquisitions
                </h1>
            </div>
            <div class="span3 offset2">
                <h1>
                <a id="editItem" href="#inventory" role="button" class="icon-plus-sign" data-toggle="modal"></a>
                Add Units
                </h1>
            </div>
        </div>
        <table class="table table-hover table-striped">
            <thead>
                <tr>
                    <th>
                    lolcats
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                    lolcats
                    </td>
                </tr>
                    <tr>
                    <td>
                    test
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

    <div class="modal hide fade" id="inventory" >
<form id="#ajax_form_modal_result" class="well" method="post" action="">
 <div id="ajax_form_modal_result_div">

    <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3>Add units</h3>
    </div>
    <div class="modal-body">
        {% csrf_token %}
         {{inventory.as_p}}

    </div>
    <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <input class="btn btn-primary" type="submit" value="Save" />

    </div>

   </div>
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T22:39:26.727

由于缺乏 JS 经验，当我开始使用 Django 时，我在 AJAX 方面遇到了可怕的困难。

我将为您提供一个用于添加选项和显示选项的 aync 表单示例。

我的模板模态代码如下，它可以与正在呈现的表单而不是我的懒惰硬编码 html 一起工作。

```
 <div class="modal" id="AddOptions" style="display:none;">
  <div class="modal-header">
    <button class="close" data-dismiss="modal">X</button>
    <h3>Add Options</h3>
  </div>
  <div class="modal-body">

<form id="OptionForm" action="." method='POST'>
  <div id="OptionValueError" class="control-group">
  <span class="help-inline"></span><br>
  <br>Value&nbsp;<input type="text" name="OptionValue" id="id_OptionValue" /><br>Label&nbsp;<input type="text" name="OptionLabel" id="id_OptionLabel"/><input type="hidden" name="VariableID">
  </div>
<div id="divid_OptionTable">
<table class="table table-condensed" id="OptionTable">
<thead>
  <th>Value</th>
  <th colspan="2">Label</th>
</thead>
<tbody>
</tbody>
</table>
</div>
</div>
  <div class="modal-footer">
  <input type="submit" class="btn btn-primary" value="Add">&nbsp;<button type="reset" class="btn">Reset</button>
</form>
  </div>
</div> 
```

接下来，确保您有以下内容来处理 CSRF 令牌问题。

```
<script type="text/javascript"> 
jQuery(document).ajaxSend(function(event, xhr, settings) {
    function getCookie(name) {
        var cookieValue = null;
        if (document.cookie && document.cookie != '') {
            var cookies = document.cookie.split(';');
            for (var i = 0; i < cookies.length; i++) {
                var cookie = jQuery.trim(cookies[i]);
                // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) == (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    function sameOrigin(url) {
        // url could be relative or scheme relative or absolute
        var host = document.location.host; // host + port
        var protocol = document.location.protocol;
        var sr_origin = '//' + host;
        var origin = protocol + sr_origin;
        // Allow absolute or scheme relative URLs to same origin
        return (url == origin || url.slice(0, origin.length + 1) == origin + '/') ||
            (url == sr_origin || url.slice(0, sr_origin.length + 1) == sr_origin + '/') ||
            // or any other URL that isn't scheme relative or absolute i.e relative.
            !(/^(\/\/|http:|https:).*/.test(url));
    }
    function safeMethod(method) {
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }

    if (!safeMethod(settings.type) && sameOrigin(settings.url)) {
        xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
    }
});
</script> 
```

其次，这是使用 jQuery 的基本 AJAX POST 的样子。请注意，它是基于防止我们模式中的表单的默认提交行为。成功后，我将新添加的值附加到表中。在捕获表单的过程中添加值会不那么麻烦，但我希望确保在添加到表格之前所有内容都已保存和处理。

```
 $(document).ready(function() {
   $("#OptionForm").submit(function(event){
       event.preventDefault();
       $.ajax({
            type:"POST",
            url:"{% url builder.views.addoption %}",
            data: {VariableID: $('input:hidden[name=VariableID]').val(), OptionLabel: $('input:text[name=OptionLabel]').val(), OptionValue: $('input:text[name=OptionValue]').val()},
            success: function(data){
            console.log(data['OptionID']);
            $("#OptionValueError").removeClass("error");  
            $("#OptionValueError span").text("");  
            $("#OptionValueError span").removeClass("error");
            $('#OptionTable > tbody:last').append('<tr id=Option_'+data['OptionID']+'><td>'+data['OptionValue']+'</td><td>'+data['OptionLabel']+'</td><td><a href="#" onClick="deleteOption('+data['OptionID']+')"><i class="icon icon-remove"></i></a>');
            $('input:text[name=OptionValue]').val('');
            $('input:text[name=OptionLabel]').val('');
            }
          });
       });
    }); 
```

最后，您只需要捕获此 AJAX 请求的视图，如下所示。

```
def addoption(request):
    if request.is_ajax():
        OptionValue = int(request.POST['OptionValue'])
        OptionLabel = request.POST['OptionLabel']
        VariableID = int(request.POST['VariableID'])
        getVar = Variable.objects.get(id=VariableID)
        newOption = Option(VariableID=getVar,
                Value=OptionValue,
                Label=OptionLabel)
        newOption.save()
        response = {'OptionValue': OptionValue, 'OptionLabel': OptionLabel, 'OptionID': newOption.id}
        json = simplejson.dumps(response)
        return HttpResponse(json, mimetype="text/json")
    else:
        pass 
```

我们正在 json 序列化的响应字典是作为数据反馈的，随后用于将值附加到表中。所有这些都无需重新加载主页。

希望这个例子有所帮助。如果您还有问题，请告诉我。

京东

# matlab - 从 MATLAB 发布输出，包括由 OPEN 命令打开的 PDF 文件

> ID：12904672
> 
> 赞同：1
> 
> 时间：2012-10-15T21:59:35.557
> 
> 标签：matlab, pdf, file-io, output, publish

我在 MATLAB 中有一个代码，可以计算一些值、打印图形并打开文档 PDF。

`Publish`能够`disp`轻松捕获输出和图形。但是，使用函数文件打开的 PDF 文件`open('My.pdf')`不会被发布者捕获。

发布者使用 html 格式。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T22:05:24.557

否——PDF 在单独的应用程序中打开，Matlab 不会将其包含在发布操作中。

作为一个组合，您可以自己制作屏幕截图，然后使用`imread`and显示它`image`。

# php - 多个子目录站点保护和身份验证（不是 .htpasswd）

> ID：12904674
> 
> 赞同：0
> 
> 时间：2012-10-15T21:59:39.567
> 
> 标签：php, mysql, apache, authentication, webserver

我想保护子目录中的多个站点。最好的方法是管理用户以及他们可以访问哪些站点，并显示一个不错的登录站点。即：站点/mysite1 站点/mysite2

请随时提出问题。我知道可能有很多解决方案。

# ruby-on-rails - Accepts_nested_attributes_for 用于 STI 模型

> ID：12904678
> 
> 赞同：0
> 
> 时间：2012-10-15T22:00:16.350
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-attributes, thinking-sphinx, sti

这是我当前的模型结构

```
class Customer < ActiveRecord::Base
  self.inheritance_column = 'customer_type'

  has_one :contact
  accepts_nested_attributes_for :contact
end

class Vendor < Customer

  has_many :domains
  accepts_nested_attributes_for :domains
end

class Club < Customer
end 
```

当我为供应商创建表单时

```
= form_for @vendor do |f|
  = f.fields_for :contact do |c|
    ....
  = f.fields_for :domains do |d|
    ... 
```

它正确呈现。没有域名的俱乐部也是如此。现在，当我编辑它并单击供应商的更新时，它给了我以下错误

```
NoMethodError: undefined method `[]' for nil:NilClass
[GEM_ROOT]/gems/activerecord-3.2.0/lib/active_record/nested_attributes.rb:327:in `assign_nested_attributes_for_one_to_one_association'
[GEM_ROOT]/gems/activerecord-3.2.0/lib/active_record/nested_attributes.rb:288:in `contact_attributes='
[GEM_ROOT]/gems/activerecord-3.2.0/lib/active_record/attribute_assignment.rb:94:in `block in assign_attributes'
[GEM_ROOT]/gems/activerecord-3.2.0/lib/active_record/attribute_assignment.rb:93:in `each'
[GEM_ROOT]/gems/activerecord-3.2.0/lib/active_record/attribute_assignment.rb:93:in `assign_attributes'
[GEM_ROOT]/gems/activerecord-3.2.0/lib/active_record/persistence.rb:212:in `block in update_attributes'
[GEM_ROOT]/gems/activerecord-3.2.0/lib/active_record/transactions.rb:295:in `block in with_transaction_returning_status'
[GEM_ROOT]/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/database_statements.rb:190:in `transaction'
[GEM_ROOT]/gems/activerecord-3.2.0/lib/active_record/transactions.rb:208:in `transaction'
[GEM_ROOT]/gems/activerecord-3.2.0/lib/active_record/transactions.rb:293:in `with_transaction_returning_status'
[GEM_ROOT]/gems/activerecord-3.2.0/lib/active_record/persistence.rb:211:in `update_attributes'
app/controllers/vendors_controller.rb:34:in `update'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
[GEM_ROOT]/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:514:in `block in _run__551367052__process_action__739945711__callbacks'
[GEM_ROOT]/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:215:in `block in _conditional_callback_around_1211'
[GEM_ROOT]/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:326:in `around'
[GEM_ROOT]/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:310:in `_callback_around_13'
[GEM_ROOT]/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:214:in `_conditional_callback_around_1211'
[GEM_ROOT]/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:403:in `_run__551367052__process_action__739945711__callbacks'
[GEM_ROOT]/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
[GEM_ROOT]/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
[GEM_ROOT]/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
[GEM_ROOT]/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
[GEM_ROOT]/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
[GEM_ROOT]/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
[GEM_ROOT]/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
[GEM_ROOT]/gems/journey-1.0.0/lib/journey/router.rb:60:in `block in call'
[GEM_ROOT]/gems/journey-1.0.0/lib/journey/router.rb:48:in `each'
[GEM_ROOT]/gems/journey-1.0.0/lib/journey/router.rb:48:in `call'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
[GEM_ROOT]/gems/sass-3.1.12/lib/sass/plugin/rack.rb:54:in `call'
[GEM_ROOT]/gems/warden-1.1.1/lib/warden/manager.rb:35:in `block in call'
[GEM_ROOT]/gems/warden-1.1.1/lib/warden/manager.rb:34:in `catch'
[GEM_ROOT]/gems/warden-1.1.1/lib/warden/manager.rb:34:in `call'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
[GEM_ROOT]/gems/rack-1.4.1/lib/rack/etag.rb:23:in `call'
[GEM_ROOT]/gems/rack-1.4.1/lib/rack/conditionalget.rb:35:in `call'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
[GEM_ROOT]/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
[GEM_ROOT]/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
[GEM_ROOT]/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
[GEM_ROOT]/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
[GEM_ROOT]/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__575954635__call__637953697__callbacks'
[GEM_ROOT]/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
[GEM_ROOT]/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
[GEM_ROOT]/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
[GEM_ROOT]/gems/rack-1.4.1/lib/rack/sendfile.rb:102:in `call'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
[GEM_ROOT]/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
[GEM_ROOT]/gems/railties-3.2.0/lib/rails/rack/logger.rb:14:in `block in call'
[GEM_ROOT]/gems/activesupport-3.2.0/lib/active_support/tagged_logging.rb:25:in `tagged'
[GEM_ROOT]/gems/railties-3.2.0/lib/rails/rack/logger.rb:14:in `call'
[GEM_ROOT]/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
[GEM_ROOT]/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
[GEM_ROOT]/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
[GEM_ROOT]/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
[GEM_ROOT]/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
[GEM_ROOT]/gems/rack-cache-1.1/lib/rack/cache/context.rb:132:in `forward'
[GEM_ROOT]/gems/rack-cache-1.1/lib/rack/cache/context.rb:139:in `pass'
[GEM_ROOT]/gems/rack-cache-1.1/lib/rack/cache/context.rb:151:in `invalidate'
[GEM_ROOT]/gems/rack-cache-1.1/lib/rack/cache/context.rb:70:in `call!'
[GEM_ROOT]/gems/rack-cache-1.1/lib/rack/cache/context.rb:50:in `call'
[GEM_ROOT]/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
[GEM_ROOT]/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
[GEM_ROOT]/gems/railties-3.2.0/lib/rails/railtie/configurable.rb:30:in `method_missing'
[GEM_ROOT]/gems/passenger-3.0.11/lib/phusion_passenger/rack/request_handler.rb:96:in `process_request'
[GEM_ROOT]/gems/passenger-3.0.11/lib/phusion_passenger/abstract_request_handler.rb:513:in `accept_and_process_next_request'
[GEM_ROOT]/gems/passenger-3.0.11/lib/phusion_passenger/abstract_request_handler.rb:274:in `main_loop'
[GEM_ROOT]/gems/passenger-3.0.11/lib/phusion_passenger/rack/application_spawner.rb:206:in `start_request_handler'
[GEM_ROOT]/gems/passenger-3.0.11/lib/phusion_passenger/rack/application_spawner.rb:171:in `block in handle_spawn_application'
[GEM_ROOT]/gems/passenger-3.0.11/lib/phusion_passenger/utils.rb:479:in `safe_fork'
[GEM_ROOT]/gems/passenger-3.0.11/lib/phusion_passenger/rack/application_spawner.rb:166:in `handle_spawn_application'
[GEM_ROOT]/gems/passenger-3.0.11/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
[GEM_ROOT]/gems/passenger-3.0.11/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
[GEM_ROOT]/gems/passenger-3.0.11/lib/phusion_passenger/abstract_server.rb:180:in `start'
[GEM_ROOT]/gems/passenger-3.0.11/lib/phusion_passenger/rack/application_spawner.rb:129:in `start'
[GEM_ROOT]/gems/passenger-3.0.11/lib/phusion_passenger/spawn_manager.rb:253:in `block (2 levels) in spawn_rack_application'
[GEM_ROOT]/gems/passenger-3.0.11/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
[GEM_ROOT]/gems/passenger-3.0.11/lib/phusion_passenger/spawn_manager.rb:246:in `block in spawn_rack_application'
[GEM_ROOT]/gems/passenger-3.0.11/lib/phusion_passenger/abstract_server_collection.rb:82:in `block in synchronize'
:
[GEM_ROOT]/gems/passenger-3.0.11/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
[GEM_ROOT]/gems/passenger-3.0.11/lib/phusion_passenger/spawn_manager.rb:244:in `spawn_rack_application'
[GEM_ROOT]/gems/passenger-3.0.11/lib/phusion_passenger/spawn_manager.rb:137:in `spawn_application'
[GEM_ROOT]/gems/passenger-3.0.11/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
[GEM_ROOT]/gems/passenger-3.0.11/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
[GEM_ROOT]/gems/passenger-3.0.11/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
[GEM_ROOT]/gems/passenger-3.0.11/helper-scripts/passenger-spawn-server:99:in `&lt;main&gt;' 
```

如果我采用`domains`关联并将其转移到客户中，它工作正常......但它似乎确实喜欢在子模型中拥有这种关联。

我做错了什么还是这是一个特殊的错误？

**更新：**我们最近在应用程序中安装了thinking sphinx。它也可能与此有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:15:09.830

我们找到了解决办法。问题是我们`define_index`在关联定义之后但在`accepts_nested_attributes_for`定义之前添加了块。我们将其移至所有内容下方，现在一切正常。

# php - 图片在本地上传正常，但在服务器上无法加载网页，因为服务器没有发送数据

> ID：12904680
> 
> 赞同：0
> 
> 时间：2012-10-15T22:00:27.660
> 
> 标签：php, webserver, image-uploading

我有 php 文件上传模块
适用于任何大小的图像
，但是当我将它上传到服务器时
，它仍然可以处理大约 1MB 的小图像，
但对于大文件，chrome
显示无法加载网页，因为服务器没有发送数据。
在其他浏览器中大致相同，
而且也需要很长时间
我还过滤了 max_size 并设置为 5MB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T22:10:58.693

You have to increase *two* php settings: `upload_max_filesize` and `post_max_size`

Depending on your php version the settings might have slightly different names.

# c++ - CreateSymbolicLink 相当于“mklink /J”？

> ID：12904681
> 
> 赞同：2
> 
> 时间：2012-10-15T22:00:31.240
> 
> 标签：c++, winapi, windows-7

如果没有管理员权限，我知道我可以在命令行中创建符号链接：

mklink /J LinkPath OriginalResourcePath

在 C++ 中，我尝试使用 CreateSymbolicLink；但是，我收到错误“客户未持有所需的特权”。有没有办法在没有管理员权限的情况下为目录创建符号链接/连接，相当于 mklink /j？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T10:00:44.877

您正在创建`mklink /j`的不是符号链接。它是一个 NTFS 结点。您可以创建没有管理员权限的联结，但您需要`SeCreateSymbolicLinkPrivilege`创建一个符号链接。默认情况下，只有管理员令牌具有`SeCreateSymbolicLinkPrivilege`.

因此，您需要创建一个联结。这篇代码项目文章向您展示了如何做到这一点：http: [//www.codeproject.com/Articles/194/Windows-2000-Junction-Points](http://www.codeproject.com/Articles/194/Windows-2000-Junction-Points)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T02:46:43.547

是的，有可能。[`Junction`](http://technet.microsoft.com/en-us/sysinternals/bb896768)并且 GnuWin32[`ln`](http://gnuwin32.sourceforge.net/packages/coreutils.htm)在 Windows 上运行良好，我一直使用它们而没有提升。

但适用常规文件系统访问检查。您的程序必须对目录具有写入权限才能创建链接。

# .htaccess - 机器人的 htaccess 301 重定向

> ID：12904684
> 
> 赞同：2
> 
> 时间：2012-10-15T22:00:42.270
> 
> 标签：.htaccess, mod-rewrite, redirect, rewrite

我需要 .httaccess 重写规则方面的帮助。我的一位客户说：“网站 abc.com 应该仅将来自 google、bing 和 yahoo 搜索引擎机器人的流量（带有 301 重定向）发送到 cba.com，否则显示 index.html（它是一个白页），即如果 Google 机器人正在爬行abc.com 它应该看到重定向到 bcd.com 而不是真实内容”。

这可能吗？

```
RewriteEngine On 
RewriteCond %{HTTP_USER_AGENT} Googlebot [OR]
RewriteCond %{HTTP_USER_AGENT} msnbot [OR]
RewriteCond %{HTTP_USER_AGENT} Slurp
RewriteRule ^(.*)$ http://bcd.com/$1 [L,R=301] 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T22:11:44.650

您可以在此处获取用户代理列表：[http ://www.user-agents.org/](http://www.user-agents.org/)

但是你所拥有的应该工作。您可以为主机名添加额外的检查：

```
RewriteEngine On 
RewriteCond %{HTTP_HOST} abc.com$ [NC]
RewriteCond %{HTTP_USER_AGENT} Googlebot [OR]
RewriteCond %{HTTP_USER_AGENT} msnbot [OR]
RewriteCond %{HTTP_USER_AGENT} Slurp
RewriteRule ^(.*)$ http://bcd.com/$1 [L,R=301] 
```

这些规则在一个空白的 htaccess 文件中对我有用。这是我的要求：

```
GET /something HTTP/1.1
Host: abc.com
User-Agent: Mozilla/5.0 (compatible; Googlebot/2.1; http://www.google.com/bot.html) 
```

这是阿帕奇的回应：

```
HTTP/1.1 301 Moved Permanently
Date: Mon, 15 Oct 2012 22:10:55 GMT
Server: Apache
Location: http://bcd.com/something
Content-Length: 289
Content-Type: text/html; charset=iso-8859-1 
```

# eclipse - Eclipse 动态 Web 项目的 jsp 文件的 url 是什么？

> ID：12904688
> 
> 赞同：1
> 
> 时间：2012-10-15T22:01:05.120
> 
> 标签：eclipse, jsp, configuration, web

我在 Eclipse 中添加了一个动态 Web 项目，并且可以访问 WebContent 文件夹中的静态 HTML 文件和资源。我已将我的 JSP 文件放在 WebConent\WEB-INF

这工作正常：“http://localhost:8080/HelloWorld/index.htm”

这告诉我找不到资源：“http://localhost:8080/HelloWorld/Logon.jsp”

我没有定义任何 JSP servlet 映射。我有默认的 web.xml，其中只有欢迎文件。我右键单击项目名称并选择在服务器上调试以运行应用程序。

更新：我取得了一些成功。我将以下内容添加到 Eclipse 项目的 web.xml（在 WebContent\WEB-INF 文件夹中）。只有当 Test.jsp 在 WebContent 文件夹中而不是在 WebContent\WEB-INF 文件夹中时，Test.jsp 才能作为“http://localhost:8080/HelloWorld/Test.jsp”工作。

```
 <servlet>
   <servlet-name>jsp</servlet-name>
   <servlet-class>org.apache.jasper.servlet.JspServlet</servlet-class>
   <init-param>
       <param-name>fork</param-name>
       <param-value>false</param-value>
   </init-param>
   <init-param>
       <param-name>xpoweredBy</param-name>
       <param-value>false</param-value>
   </init-param>
   <init-param>
        <param-name>logVerbosityLevel</param-name>
        <param-value>WARNING</param-value>
   </init-param>
   <load-on-startup>3</load-on-startup> 
```

```
 <servlet-mapping>
    <servlet-name>jsp</servlet-name>
    <url-pattern>*.jsp</url-pattern>
   </servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T00:13:33.843

中的文件`/WEB-INF`不可公开访问。该文件夹用于配置文件、模板文件、标记文件、包含文件、MVC 视图文件等。基本上所有*不*应该被最终用户*直接*访问的东西，而无需首先调用一些主 JSP 文件或前端控制器 servlet。

只需将它们放在`/WEB-INF`文件夹之外，在公共网络内容中。

### 也可以看看：

*   [在WEB-INF下移动资源](https://stackoverflow.com/questions/12088103/moving-resources-under-web-inf)

* * *

不要忘记`JspServlet`从您的`web.xml`. 它根本没有解决具体问题。更重要的是，它真的不属于你的 webapp 的`web.xml`. 它已经在 servletcontainer 自己定义`web.xml`（如果是 Tomcat，您可以在其`/conf`文件夹中找到它。`JspServlet`在您的 webapp 中注册`web.xml`只会使您的 webapp 不可移植。它将无法在与 Tomcat 不同的 servletcontainer 上运行。

# entity-framework - EF 5 Code First 迁移批量 SQL 数据播种

> ID：12904692
> 
> 赞同：10
> 
> 时间：2012-10-15T22:01:20.490
> 
> 标签：entity-framework, ef-code-first, entity-framework-migrations

我将 EF5 与 MVC4 一起使用。问题是我的数据库中有大量数据，这些数据已经从旧数据库导入。我想在模型更改时加载该数据的种子。我的问题是如何播种数据库中已经存在的大量数据？

```
internal sealed class Configuration : MigrationsConfiguration<VoiceLab.Models.EFDataContext>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = true;
    }

    protected override void Seed(VoiceLab.Models.EFDataContext context)
    {
     //what to do here to seed thousands or records that are already in db
    }

} 
```

谢谢，

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-16T08:27:35.090

以下是仅通过在种子方法中提供 .sql 文件来为批量数据播种的方法。

```
public class AppContextInitializer : CreateDatabaseIfNotExists<AppContext>
{
    protected override void Seed(AppContext context)
    {
        var sqlFiles = Directory.GetFiles(AppDomain.CurrentDomain.BaseDirectory, "*.sql").OrderBy(x => x);
        foreach (string file in sqlFiles)
        {
            context.Database.ExecuteSqlCommand(File.ReadAllText(file));
        }

        base.Seed(context);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T18:02:42.130

基于代码的迁移是模型更改后现有数据库（手动数据库更新）的推荐方法。您可以在包命令行窗口中通过 PowerShell 执行此操作。这样，现有数据将被保留。

如果您是使用源代码控制的开发人员团队的一员，您应该使用纯自动迁移或纯基于代码的迁移。考虑到在团队环境中使用基于代码的迁移的自动迁移的局限性，建议使用。

[http://msdn.microsoft.com/en-us/data/jj591621](http://msdn.microsoft.com/en-us/data/jj591621)

[http://elegantcode.com/2012/04/12/entity-framework-migrations-tips/](http://elegantcode.com/2012/04/12/entity-framework-migrations-tips/)

```
internal sealed class Configuration : MigrationsConfiguration<DataContext>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = false;

        // if model changes involve data lose
        AutomaticMigrationDataLossAllowed = true;

    }

    protected override void Seed(DataContext context)
    {
     //seed only when creating or new database
    }

} 
```

# android - Shell - 将android设备放入数组

> ID：12904693
> 
> 赞同：0
> 
> 时间：2012-10-15T22:01:22.503
> 
> 标签：android, bash, shell, sh

我是 shell 脚本的新手，我正在尝试将所有 android 设备放入一个数组中，但是当函数完成时我的数组是空的。

```
#!/bin/bash

declare -a arr
let i=0

MyMethod(){
  adb devices | while read line #get devices list
  do
    if [ ! "$line" == "" ] && [ `echo $line | awk '{print $2}'` == "device" ]
    then
      device=`echo $line | awk '{print $1}'`
      echo "Add $device"
      arr[$i]="$device"
      let i=$i+1
    fi
  done

echo "In MyMethod: ${arr[*]}"
}

################# The main loop of the function call #################

MyMethod
echo "Not in themethod: ${arr[*]}" 
```

`arr`- 是空的，我做错了什么？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:14:58.043

您可能的问题是管道命令会导致它在子 shell 中运行，并且在那里更改的变量不会传播到父 shell。你的解决方案可能是这样的：

```
adb devices > devices.txt
while read line; do
    [...]
done < devices.txt 
```

我们将输出保存到中间文件中，然后加载到`while`循环中，或者使用 bash 的语法将命令输出存储到中间临时文件中：

```
while read line; do
    [...]
done < <(adb devices) 
```

所以脚本变成了：

```
#!/bin/bash

declare -a arr
let i=0

MyMethod(){
  while read line #get devices list
  do
    if [ -n "$line" ] && [ "`echo $line | awk '{print $2}'`" == "device" ]
    then
      device="`echo $line | awk '{print $1}'`"
      echo "Add $device"
      arr[i]="$device" # $ is optional
      let i=$i+1
    fi
  done < <(adb devices)

echo "In MyMethod: ${arr[*]}"
}

################# The main loop of the function call #################

MyMethod
echo "Not in themethod: ${arr[*]}" 
```

一些额外的观察：

1.  为避免错误，我建议您将反引号括在双引号中。
2.  美元是可选的`arr[$i]=`
3.  There is a specific test for empty strings: `[ -z "$str" ]` checks if string is empty (zero-length) and `[ -n "$str"]` checks if it isn't

Hope this helps =)

# python - 我使用 Deepcopy 错了吗？

> ID：12904694
> 
> 赞同：0
> 
> 时间：2012-10-15T22:01:38.847
> 
> 标签：python, copy

我有一个具有列表作为其属性之一的类：

```
class Hello(object):
    stuff
    self.List = [True, False, True False] 
```

我想将该列表的副本传递到一个元组中，这样我就可以在引用该列表的先前副本的同时更改该列表。我执行以下操作：

```
def getStartState(self):
    copiedList = copy.deepcopy(self.cornerList)
    fullState = (self.startingPosition[0], self.startingPosition[1], tuple(copiedList))
    return fullState 
```

我收到一条错误消息，告诉我副本不是全局变量。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:41:35.170

我认为这里有几个问题。

首先，您的错误可能是因为您没有导入`copy`模块。这是一个简单的解决方法。就在`import copy`文件的顶部。

第二个问题是不需要`deepcopy`像`bool`s 这样的不可变对象列表。由于列表的成员不能原地更改，任何`copy.copy(List)`,`list(List)`或`List[:]`都可以正常工作。仅当存在嵌套的可变结构时才需要深度复制。

最后，没有必要为了从副本中创建一个元组而复制一个列表。元组是不可变的，不会修改它们的源序列，所以你可以让你的`getStartState`方法更简单：

```
def getStartState(self):
    return (self.startingPosition[0], self.startingPosition[1],
            tuple(self.cornerList)) 
```

# ruby-on-rails - 捆绑安装错误：源不包含任何版本的

> ID：12904695
> 
> 赞同：26
> 
> 时间：2012-10-15T22:01:44.513
> 
> 标签：ruby-on-rails, plugins, rubygems

我的 gem 文件包含：

```
gem "breadcrumb", :git => "git@github.com:mjacobus/Breadcrumb.git"

gem "simple_menu", :git => "git@github.com:mjacobus/simple_menu.git" 
```

第一个 gem 按预期安装，但第二个失败。

```
Updating git@github.com:mjacobus/simple_menu.git
Fetching gem metadata from https://rubygems.org/........
Could not find gem 'simple_menu (>= 0) ruby' in git@github.com:mjacobus/simple_menu.git (at master).
Source does not contain any versions of 'simple_menu (>= 0) ruby' 
```

类似的帖子指出缺少 .gemspec 文件，但该文件存在。[https://github.com/mjacobus/simple_menu/blob/master/simple_menu.gemspec](https://github.com/mjacobus/simple_menu/blob/master/simple_menu.gemspec)

我可能正在做一些别人的眼睛可以看到的愚蠢的事情。

# 编辑

我将 repo 克隆到 vendor/plugins 文件夹并更改了我的 Gemfile

```
gem "simple_menu", :path => "vendor/plugins/simple_menu" 
```

捆绑安装问题现在出现错误：

```
bundle install
Fetching gem metadata from https://rubygems.org/.......
Could not find gem 'simple_menu (>= 0) ruby' in source at vendor/plugins/simple_menu.
Source does not contain any versions of 'simple_menu (>= 0) ruby' 
```

# 编辑 2

我知道这是一个愚蠢的错误。宝石名称不正确。

[https://github.com/mjacobus/simple_menu/commit/1afca04b08a084dafb9bdf6e595a2bb9a7b7a55f](https://github.com/mjacobus/simple_menu/commit/1afca04b08a084dafb9bdf6e595a2bb9a7b7a55f)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-08-06T20:22:09.093

正如马塞洛所说，我遇到了同样的错误，这是一件愚蠢的事情：

宝石规格文件

```
Gem::Specification.new do |s|
 s.name = 'niche_wir_theme' 
 .... 
```

宝石文件（包括）

```
gem 'niche-wir-theme', :git => 
.... 
```

正如您在我的 gemspec 中看到的那样，我使用 ("_") 下划线命名，而在我的 gemfile 中，我试图用 "-" (破折号) 来调用它...

(palmface) 所以只需注意名称符号，您在 gemspec 文件中声明的符号与您在另一个项目的 gem 文件中用于调用的符号可能不同

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-10-16T18:36:23.333

我在 Rails 4.2 中遇到了类似的问题。就我而言，这是另一个愚蠢的错误。看来，如果您在 gemspec 文件的注释中留下“TODO”或“FIXME”，它将拒绝该 gem 并抛出相同的错误。请务必阅读 bundle 命令的输出。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-09T23:37:09.033

gemspec 文件名为**simplemenu.gemspec**而不是**simple_menu.gemspec**。

# android - UDP数据包似乎被android 4.1阻止了

> ID：12904703
> 
> 赞同：3
> 
> 时间：2012-10-15T22:02:51.110
> 
> 标签：android, udp, android-4.2-jelly-bean

我已经寻找了几个小时，但没有找到任何解决方案。

我有一个 UDP 服务器正在侦听特定端口 (5000)，该端口在 Android 3.2、4.0.3 或 4.0.4 上运行良好。最近在升级到android 4.1的手机上试了一下，好像收不到UDP包。

确实，我用 AVD Emulator 重现了同样的问题：当然，我进行了强制重定向（redir add udp 5000:5000）以使其在 android 4.0.3 下成功运行。它在 4.0.3 模拟器中工作正常，但 4.1 模拟器没有收到任何 UDP 数据包。

因为这一切，我不能认为这是一个代码问题。

我很沮丧，不明白为什么它不在 android 4.1 上运行。我找不到任何理由......

有人可以帮助我吗？是否有任何我不知道的特定于 android 4.1 的限制？

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T03:56:23.743

几个月来我一直在为此苦苦挣扎。今天我在我的索尼 Xperia P 上做了一个便携式热点，并将设备连接到它的 WiFi，而不是我的固定线路路由器。瞧！运行 Jelly Bean 的 Nexus 7 现在接收每个 UDP 数据包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T05:06:03.903

似乎问题是由于您应该使用的策略。在 4.0.3 中，您似乎需要将 udp 发送数据包放入线程中。所以只需创建一个线程并将所有步骤放入其中并启动它。

# c++ - C ++中列表中的多态性

> ID：12904704
> 
> 赞同：2
> 
> 时间：2012-10-15T22:03:01.517
> 
> 标签：c++, list, opengl, polymorphism

我正在使用 OpenGL 和 C++ 编写一个基本的图形场景编辑器，这是上下文：

*   我有一个 Drawable 类，它是抽象的，只有一个纯虚函数 draw()。我使用这个类就像一个java接口。

*   许多类继承自 Drawable 并重新实现 draw()。

*   一个场景类，其中包含指向可绘制对象的指针列表。

*   我在其中创建不同的 Drawable 对象并将它们添加到列表中的 main.cpp。

我有这个问题：

*   在 main.cpp 中创建的对象不断超出范围，因此创建它们并使用引用的对象执行添加函数并不容易。（只是一直保持一个没有有效指针的列表）。

*   一个苦乐参半的解决方案是使用 new 创建这些新对象，并让 Scene 类在列表被销毁时删除列表中的指针，或者以某种方式在 main.cpp 中删除它们。

我真的不喜欢这样，所以我想问一下是否有一些方法可以在 add 函数中复制对象，然后将副本存储在列表中，这不是问题，因为复制的对象很快就会被删除。在该函数中，我不知道我参加的是 Drawable 的哪个子类。我不能直接复制 Drawable 对象，因为 Drawable 是一个抽象类，不能用 new 来制作 Drawable 对象。只想拥有一个包含不同对象的列表，这些对象都可以执行 draw()。我留下一些代码以防万一：

```
class Drawable {
public:
    virtual void draw() = 0;

    virtual ~Drawable() = 0 {}
};

class Figure : public Drawable {
private:
    list<Point, allocator<Point>> _points;
    int _type;

public:
    ...

    void draw() {
        ...
    }   
};

class Scene : public Drawable {
private:
    list<Drawable*, allocator<Drawable*>> _drawables;
    ...

public:
    ...

    void add(Drawable* drawable) {
        _drawables.push_back(drawable);
    }

    ~Scene() {
        for(iterDrawable it = _drawables.begin(); it != _drawables.end(); ++it)
        delete (*it);
    }

    void draw() {
        for(iterDrawable it = _drawables.begin(); it != _drawables.end(); ++it)
            (*it)->draw();
    }   
};

main.cpp
...
void display() {
    ...

    Figure* square = new Figure(GL_POLYGON);

    square->add(Point(xSquare, ySquare));
    square->add(Point(xSquare + squareWidth, ySquare));
    square->add(Point(xSquare + squareWidth, ySquare + squareHeight));
    square->add(Point(xSquare, ySquare + squareHeight));

    cScene.add(square);
    cScene.draw();

    ...
}
... 
```

我希望我解释得充分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T22:20:58.710

您要使用的是 boost ptr 容器：

```
boost::ptr_list<Drawable>   drawlables;

/// STUFF

drawlables.add(new Square); 
```

boost ptr 容器（优于智能指针容器）的优点是容器使对元素的访问看起来像对象（而不是指针）。这使得将它们与标准算法一起使用变得微不足道。

ptr 容器拥有插入到容器中的任何指针的所有权，因此涵盖了内存管理。所有其他位置都应该从容器中传递一个引用。

```
drawlables[0].draw();

// or drawl all of them
for_each(drawlables.begin(), drawlables.end(), std::mem_fun(&drawlables::draw)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T22:53:30.910

1.  `Drawable`必须有一个虚拟析构函数。
2.  您必须制定某种对象所有权政策。换句话说，对于您分配的每个对象，您必须非常清楚地了解如何处理该对象。这就是在 C++ 中做事的方式，而不是 Java。当您分配对象以添加到场景*中时，场景对象是否成为组件的最终所有者*？如果是这样，那么场景`delete`在它自己消失之前（即在析构函数中）必须拥有它的组件列表。如果场景对象不是拥有者，而仅仅是一个用户，那么谁是拥有者？你能保证所有者的寿命比所有用户都长吗？如果不是，所有者将如何将所有权传递给下一个所有者？如果你要复制一个对象，你必须为原件*和*副本决定这个问题。
3.  `shared_ptr`像and这样的花哨的东西`ptr_list`很好而且花花公子，但我建议先学习基础知识。重要的是要了解为什么需要`shared_ptr`和`ptr_list`需要，他们声称要解决哪些问题，以及从 30000 英尺看他们的解决方案是什么样的。获得这种理解的最好方法是偶然发现并尝试解决其中一些问题。
4.  `Drawable`必须有一个虚拟析构函数。
5.  如果你想多态地复制对象，那么你需要一个多态函数来进行复制。您必须自己为每个派生类编写一个，就像`draw()`为每个派生类编写一样。这种函数的普遍接受的名称是`clone`. 对于每个类`Foo`，`clone`看起来像这样：所有类

    `virtual Foo* clone() {`
        `return new Foo(*this);`
    `}`

    的版本`clone`看起来几乎相同，但是您必须手动编写它们中的每一个。请注意，这是使用的复制构造函数，如果拥有任何其他对象，或者以其他方式具有非平凡的复制操作，则`Foo`必须自己编写该构造​​函数。`Foo`
6.  我有没有提到`Drawable`必须有一个虚拟析构函数？

# visual-studio-2010 - Visual Studio 通用用户库

> ID：12904707
> 
> 赞同：2
> 
> 时间：2012-10-15T22:03:17.680
> 
> 标签：visual-studio-2010, visual-studio

如何为自己创建一个可以在所有 Visual Studio 项目中轻松使用的库？基本上我希望有一些类似于使用总是出现的系统并且调试和发布版本都被正确使用的东西。

本质上，我不想为了能够使用这些库而做任何事情。我只是想开始一个项目并使用它们......就像使用内置库一样（最多可能添加 using 语句）。

事实上，我还希望将库项目添加到当前解决方案中，这样我就可以即时修改它而无需打开新实例。

该库将仅包含实用程序帮助函数，以使我的生活更轻松，我不想花时间在我创建的每个项目上安装它们只是为了使用它们，并且不想花很多时间当我想更新图书馆。

应该不会太难。也许创建库解决方案，使用自定义构建事件......以及某种类型的自定义 vs 脚本来将解决方案、引用和使用语句添加到当前项目？

# r - 如何在不改变大小的情况下将元素附加到向量？

> ID：12904709
> 
> 赞同：0
> 
> 时间：2012-10-15T22:03:21.153
> 
> 标签：r, vector, for-loop, append

我想在不改变长度的情况下将元素添加到向量中。在每个 for 循环之后，向量应该只包含 500 行（1 列）。这是我到目前为止所拥有的。

```
# initialize the vector
values<- vector(mode = "integer", length= 500)

for (i in 1:500) {
values<-append(values, 2i, after = i-1)
} 
```

所以`values`向量应该包含以下元素：`2,4,6,8,10, ... 998, 1000`

append 函数的问题是，如果我向向量添加一个元素，它会将向量的长度更改为 1。所以在 for 循环结束时，`value`向量的长度将是 1000 而不是 500，并且包含元素：`2,4,6,8, ... , 998, 1000, 0,0,0 [followed by zeros]`.

是否有另一个 R 函数可以满足我的期望，或者有什么方法可以修复上面的代码？

非常感谢任何帮助或建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T22:13:08.257

若干问题

*   向量只有长度，没有行和列
*   对于 2 次 i，`2i`不是您要查找的 r 代码，而是您想要的`2*i`，`2i`会给您复数`0+2i`。
*   您正在寻找功能``[``（**提取或替换对象的部分**）

`2,4,6,...,998,1000`如果是这样，您是否只是想创建一个向量

```
values <- seq(2,1000,by=2) 
```

将工作。

`append`将追加，因此（根据定义`R`，以及英语）创建一个比原始向量更长的向量。

让您的循环按预期工作

```
# initialize a vector of 0's
values <- rep(0L, 500)

for (i in 1:500) {
  # replace the ith element with 2i
  values[i] <- 2*i
} 
```

对于一个数组

```
values <- array(rep(0L,500), dim = c(500,1))

 for (i in 1:500) {
  # replace the ith element in the first column with 2i
  values[i,1] <- 2*i
 } 
```

查看`?`[``有关如何提取或替换向量、列表、数组、data.frames 等元素的详细信息

如果你想要一个 500 行 1 列的矩阵`2,4,6,8,...998,1000`

```
values <- matrix(seq(2,1000,by=2), nrow = 500) 
```

# html - div溢出？

> ID：12904710
> 
> 赞同：0
> 
> 时间：2012-10-15T22:03:23.263
> 
> 标签：html, css, web

我已经创建了一个三栏背景类型的东西，正如我之前在我的第一个问题中描述的那样：[如何使用 CSS 创建三栏网站背景？](https://stackoverflow.com/questions/12903474/how-to-create-a-three-column-website-background-using-css). 无论如何，我的工作大部分都是这样成功的：

我有一个 id 为 centercolumn 的 div，包含我所有页面的内容（页眉、内容、页脚等）：

```
<html>
    <body>
        <div id="centercolumn">
            <!-- content -->
        </div>
    </body>
</html> 
```

然后，在 CSS 中，我有以下设置（仅显示相关代码）：

```
body {
    background-image: url('theimagetobetiledalongthesides.png');
}

#centercolumn {
    position: absolute;
    top: 0;
    bottom: 0;
    right: 0;
    left: 0;

    margin-left: auto;
    margin-right: auto;

    width: 760px;

    background-image: url('theimagetobetiledalongthemiddlecontentcolumn.png');
} 
```

本质上，body 为整个页面提供了背景，然后 centercolumn div 位于其之上并一直延伸到页面下方，并具有不同的背景图像。这给出了具有三列的外观：中间一列用于内容，两列在侧面。

我相信我遇到的问题是`overflow`centercolumn div 的属性。在我测试过的任何浏览器（Chrome、Firefox、IE、Opera 和 Safari）上，中心栏最初一直到页面底部（应该如此）。当我垂直调整页面大小，使其更小/更短时，一旦我到达实际内容（即文本），页面/浏览器的侧面就会出现一个滚动条（就像通常那样）。但是，当我向下滚动以查看其余内容时，就好像 centercolumn div 并没有一直向下： centercolumn 的不同背景图像在中途停止（正好是浏览器底部之前的位置我向下滚动）。我的文本用完了 centercolumn 背景图像，并出现在正文的背景图像上。

当我将 centercolumn div 上的溢出设置为`scroll`并开始调整页面大小时，它工作正常（div 似乎一直向下 - centercolumn 背景图像不会被切断），但它会产生相当丑陋的效果滚动条实际上​​出现在中间内容列的一侧，而不是浏览器的一侧。

我该怎么做才能让中间内容列的不同背景图像一直向下，而不会在我垂直调整浏览器窗口大小时导致滚动条出现在中间列的一侧？

*编辑：*[http://jsfiddle.net/dDfkC/1/](http://jsfiddle.net/dDfkC/1/)上的 JSFiddle 示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T22:20:42.597

你可以尝试这样的事情：

```
#centercolumn {
    position: absolute;
    top: 0;
    min-height:100%;

    margin: auto;

    width: 760px;
    background-repeat: repeat-x;
    background-image: url('theimagetobetiledalongthemiddlecontentcolumn.png');
} 
```

可能会更好地查看您拥有的示例以及您想要实现的目标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T22:20:57.617

您正在使用 position:absolute，这是错误的，您想使用相对定位然后 margin:0 auto; 将此列居中。

你需要做的是设置它

```
#centercolumn {
    position:relative;
    margin: 0 auto;
    width:760px;
    background-image: url(whatever);
    background-repeat: both;
} 
```

如果你想让它扩展到页面底部，不管你有多少内容：

```
body, html {
    height:100%;
} 
```

并添加到上面

```
#centercolumn {
    min-height: 100%;
} 
```

和一个真正的基本 CSS 重置：

```
* {
    margin:0;
    padding:0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T22:24:22.907

您可以对左右列使用固定定位，对主列使用静态定位，如this [jsfiddle](http://jsfiddle.net/dDfkC/2/)

# php - 使用 PHP 表单更新 MySQL

> ID：12904711
> 
> 赞同：0
> 
> 时间：2012-10-15T22:03:26.947
> 
> 标签：php, mysql

我有一个 PHP 脚本，我写的更新用户是 MySQL 数据库，但它不会更新。但是它确实说成功这是脚本。

```
//This is the list script
//Index.php script

<?php
$host="localhost"; // Host name
$username="username"; // Mysql username
$password="password"; // Mysql password
$db_name="database"; // Database name
$tbl_name="users"; // Table name

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$sql="SELECT * FROM $tbl_name";
$result=mysql_query($sql);
?>

<table width="400" border="0" cellspacing="1" cellpadding="0">
<tr>
<td>
<table width="400" border="1" cellspacing="0" cellpadding="3">
<tr>
<td colspan="4"><strong>Users</strong> </td>
</tr>

<tr>
<td align="center"><strong>Username</strong></td>
<td align="center"><strong>Role</strong></td>
<td align="center"><strong>Channels</strong></td>
<td align="center"><strong>EMail</strong></td>
<td align="center"><strong>Update</strong></td>
<td align="center"><strong>Delete</strong></td>
</tr>

 <?php
 while($rows=mysql_fetch_array($result)){
 ?>

<tr>
<td><?php echo $rows['Username']; ?></td>
<td><?php echo $rows['Role']; ?></td>
<td><?php echo $rows['Channels']; ?></td>
<td><?php echo $rows['EMail']; ?></td>

<td align="center"><a href="update.php?id=<?php echo $rows['ID']; ?>">Update</a></td>
<td align="center"><a href="delete_ac.php?id=<?php echo $rows['ID']; ?>">Delete</a>  
</td>
</tr>

<?php
}
?>

</table>
</td>
</tr>
</table>

<?php
mysql_close();
?> 
```

这是获取用户 ID 并允许更新用户的更新用户脚本
。update.php 脚本

```
<?php
$host="localhost"; // Host name
$username="username"; // Mysql username
$password="password"; // Mysql password
$db_name="database"; // Database name
$tbl_name="users"; // Table name
// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

// get value of id that sent from address bar
$id=$_GET['id'];

// Retrieve data from database
$sql="SELECT * FROM $tbl_name WHERE id='$id'";
$result=mysql_query($sql);

$rows=mysql_fetch_array($result);
?>

<table width="400" border="0" cellspacing="10" cellpadding="0">
<tr>
<form name="form1" method="post" action="update_ac.php">
<td>
<table width="100%" border="10" cellspacing="1" cellpadding="10">

<tr>
<td colspan="3"><strong>Update User</strong> </td>
</tr>
<center>
<tr>
<td align="center"><strong>Username</strong></td>
<td align="center"><strong>Password</strong></td>
<td align="center"><strong>Role</strong></td>
<td align="center"><strong>Channels</strong></td>
<td align="center"><strong>EMail</strong></td>
</tr>
</center>
<tr>
<td align="center">
<input name="username" type="text" id="Username" value="<?php echo 
$rows['Username'];   
?>" size="15">
</td>

<td align="center">
<input name="password" type="Password" id="Password" value="<?php echo      
$rows['Password']; ?>" size="15">
</td>

<td>
<input name="role" type="text" id="Role" value="<?php echo $rows['Role']; ?>" size="1">
</td>

<td>
<input name="channels" type="text" id="Channels" value="<?php echo $rows['Channels']; 
?>" size="10">
</td>

<td>
<input name="EMail" type="text" id="EMail" value="<?php echo $rows['EMail']; ?>"  
size="25">
</td>

<tr>
<td>
<input name="id" type="hidden" id="ID" value="<?php echo $rows['ID']; ?>">
</td>
<td align="center">
<input type="submit" name="Submit" value="Submit">
</td>

</tr>
</table>
</td>
</form>
</tr>
</table>

<?php
// close connection
mysql_close();
?> 
```

这是执行更新的脚本我认为我的问题是这个脚本
在这里但不确定在哪里。我相信我可能会错过一个while循环。

update_ac.php 脚本

```
<?php
$host="localhost"; // Host name
$username="username"; // Mysql username
$password="password"; // Mysql password
$db_name="database"; // Database name
$tbl_name="users"; // Table name
// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$id = $_POST['ID'];
$Username = $_POST['Username'];
$Password = $_POST['Password'];
$Role = $_POST['Role'];
$Channels = $_POST['Channels'];
$EMail = $_POST['EMail'];

// update data in mysql database
$sql = "UPDATE $tbl_name SET Username='$Username', Password='$Password',    
Role='$Role', Channels='$Channels', EMail='$EMail' WHERE id='$id'";
$result = mysql_query($sql);

// if successfully updated.
if($result)
{

echo "Successful";
echo "<BR>";
echo "<a href='index.php'>View result</a>";

}

else
{
echo "ERROR";
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T22:09:07.320

You should sanitize your data before doing the update, plus what the commentor said about mysqli or PDO, but if you change the query line to `$result = mysql_query($sql) or die(mysql_error());` it will tell you what's going wrong.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T22:13:57.213

除了在其他答案中已经做出的所有重要考虑之外，现在关于脚本中的实际错误，似乎在您的`update.php`脚本中，您有一个提交按钮：

```
<input type="submit" name="Submit" value="Submit"> 
```

但我没有看到您将它包含在`<form>`元素中，您需要将所有`<input>`元素包含在表单标签中，以便您可以将它们发送到目标脚本。像这样的东西：

```
<form method="POST" action="update_ac.php">
// HERE ALL YOUR INPUT ELEMENTS
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T22:17:49.290

mysql_query 只有在查询失败时才会返回 FALSE。在您的情况下，查询可能没有失败，但仅更改了 0 行，请检查 mysql_affected_rows() （在这种情况下，该脚本不应报告成功）。[请参阅http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)上的文档

# jquery - jqgrid - 在分组中展开全部/折叠全部

> ID：12904718
> 
> 赞同：1
> 
> 时间：2012-10-15T22:04:32.763
> 
> 标签：jquery, jqgrid

有没有办法我们可以在 jqgrid 中为分组功能实现展开全部/折叠所有功能？据我了解，设置 groupingCollapse: true 会折叠数据，但我想让它动态化，可能是单击放置在网格内的 +/- 图标。提前感谢您的任何建议/帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T22:15:06.593

我想你会在[旧答案中找到你的问题的答案](https://stackoverflow.com/a/8369526/315935)。答案的主要思想是使用jqGrid`sortnames[0]`参数的属性。`groupingView`它是一个数组，其中的元素可用于构造分组标题的 id，并且可以使用`groupingToggle`方法来折叠或展开分组标题。您可以通过这种方式展开或折叠所有组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-20T18:44:54.400

这是特定于 jqgrid 的特定版本的，它扩展了所有层，但它是如此简短和甜蜜，我无法抗拒发布它。

```
function expandAll() {
    $("#myGrid .ui-icon-circlesmall-plus").trigger("click");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T21:26:52.017

使用 Oleg 的回答/建议和 Jqgrid4.4.1，这就是我所做的。当您想在单击某个按钮时展开/折叠所有行时，此方法有效...

```
function expandCollapseGroups(expandAll) {
    var $grid = $("#grid");
    var idPrefix =$grid[0].id + "ghead_0_", trspans;
    var groups =$grid[0].p.groupingView.groups;
    if ($grid[0].p.grouping) {
        for (var index = 0; index < groups.length; index++) {
            if (expandAll) {
                trspans = $("#" + idPrefix + index + " span.tree-wrap-" +$grid[0].p.direction + "." +$grid[0].p.groupingView.plusicon);
            } else {
                trspans = $("#" + idPrefix + index + " span.tree-wrap-" +$grid[0].p.direction + "." +$grid[0].p.groupingView.minusicon);
            }
                if (trspans.length > 0) {
                $grid.jqGrid('groupingToggle', idPrefix + index);
        }   
        }
    } 
} 
```

# cakephp - 对同一个夹具使用不同的数据集

> ID：12904720
> 
> 赞同：2
> 
> 时间：2012-10-15T22:04:54.090
> 
> 标签：cakephp, fixtures

我有一个外壳，它可以发送电子邮件来更新一个人的帐户状态。为了编制今天需要接收这封电子邮件的人员列表，我有一个方法可以执行适当的`find('all')`查询并返回收件人列表。我想对该方法进行单元测试，以确保正确生成此列表。

但是，现在我有两个单元测试，具体取决于我的 Person 夹具 - 我的 Person 模型的测试和这个 shell 测试。来自 Person 模型测试的额外混乱使得准备一个专注于我的 shell 测试的数据集变得很尴尬。测试已经完成——如果我改变一个的数据集，我可能会破坏另一个。

我可以根据上下文轻松为同一个夹具定义单独的数据集吗？我可以为单独的测试创建单独的夹具吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T02:09:18.463

您可以创建任意数量的灯具。您可以使用以下声明选择您的 TestCase 加载哪些夹具`public $fixtures = array('app.Fixture1', 'app.Ficture2', etc...);`。

您可以从默认数据库连接中导入表信息，以便为同一模型（即 PersonFixture1、PersonFixture2）创建多个夹具。 [http://book.cakephp.org/2.0/en/development/testing.html#importing-table-information-and-records](http://book.cakephp.org/2.0/en/development/testing.html#importing-table-information-and-records)

此外，您可以覆盖固定装置的 init 方法以动态加载记录数据（即更改时间戳）。
[http://book.cakephp.org/2.0/en/development/testing.html#dynamic-data-and-fixtures](http://book.cakephp.org/2.0/en/development/testing.html#dynamic-data-and-fixtures)

希望这可以帮助。

# c# - 是否有充分的理由在 Program.cs/main 中编写代码而不是使用类？

> ID：12904724
> 
> 赞同：28
> 
> 时间：2012-10-15T22:05:17.553
> 
> 标签：c#, main

我正在开发一个相当大的应用程序和我的技术主管，但我在某些事情上并没有意见一致。

其中之一是关于控制台应用程序。这些应用程序正在从 shell 脚本移植到 C#。其中一些脚本相当大（转换后的代码为 300-400 行），并执行 I/O、电子邮件和数据库访问等操作。

对于这些脚本中的每一个，我都创建了一个类。每个类都有一个 Run 方法，该方法调用其中的任何方法/操作。在 Program.cs/main 中，我创建了一个该类的对象并调用 Run。Program.cs 包含 4-5 行代码。干净简单。

我的技术主管想要摆脱脚本类，只将所有内容都放在 program.cs 的主要方法中。他的理由是它的方式太令人困惑了。

这样做感觉很尴尬，因为类不再可重用/可打包到类库中，而不必摆弄 main 方法。

单元测试似乎不受影响，因为您可以实例化 Program.cs 本身，但同样......这感觉很笨拙。以我没有看到的方式这样做有什么好处吗？我的方式有什么好处吗？在您的 main 方法中处理大型应用程序和内容时，是否有一般做法？

感谢您的时间。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-15T22:09:08.163

> It feels awkward having to do it this way as the class no longer becomes reusable/package-able into a class library without having to fiddle with the main method.

It doesn't *have* to be that way.

For example, each of your scripts could still have the same structure it does, but *also* have a `private static void Main(string[] args)` method. (It could be non-private if you want - it all depends on your needs.)

That way it's standalone (can be compiled as a single input to a single output then run) which can occasionally be handy, but could *also* be used as part of a class library. The presence of a `Main` method in no way *prevents* the class being used from other classes, after all.

It's not clear whether you've got *one* `Program.cs` file or one per script. If you've got one per script, each of which is just 4-5 lines, that does seem *somewhat* pointless.

Now this certainly wouldn't be how I'd normally structure a large application - but if the point is to have several "scripts" each of which *can* be run standalone, then giving each class a `Main` method doesn't seem too bad.

In fact, what I often do for *demo* purposes is have several classes with `Main` methods in a single project, then have a separate entry point (which *is* in `Program.cs`) which uses reflection to find all the others and then allows the user/presenter to choose which one to run.

If all your code makes sense to have in a single class, then having a tiny extra entry method doesn't seem such a problem. If it's *actually* a case of too much code for a single class *regardless* of where the entry point is, that's a different matter. (So if you stuck to having a single `ScriptClass` when actually you should give different tasks to different classes, that would be bad too.) Likewise if he really is insisting on all the code being in a single *method*, that's definitely a problem for testing and maintainability.

I suggest you set the entry point disagreement aside for the moment: work out the cleanest way to structure everything *else* about the code, and then it really doesn't matter whether the `Main` method goes in `Program.cs` or within another class.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T22:23:44.037

老实说，我认为您正在为自己创造工作。我无法从您描述中的细节中看出 - 但如果 shell 脚本一直在工作，为什么要在显然不需要结构的地方构建它？

你说模块化和重新打包到外部库是你需要做的事情——我会反驳“为什么？” （这就是我所说的额外工作）。

如果您在单个文件中创建一组简单的方法 - 那就是一个文件！根据定义，它会更容易处理多个项目等。

也就是说——除非有更多细节，否则很难知道我们在说什么。如果它是“发送夜间报告并向这些人发送电子邮件” - 是的，这不需要类库和大量模块化。运行一个方法，你就完成了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-15T22:48:46.610

您确实知道控制台应用程序的入口点是可配置的，对吧？

我的首选方法是：

```
class MeaningfullyNamedProgram { 
    public static void Main(string[] args) {
        var program = new MeaningfullyNamedProgram(args);
        program.Run();
    }

    public MeaningfullyNamedProgram(string[] args) { 
    }

    public Run() {
        // well structured, broken-out code follows 
    }
} 
```

将项目的入口点指向 MeaningfullyNamedProgram.Main

*注意：我将把它作为练习留给读者，但您可以使用泛型为此创建一个基类，并为自己节省一些输入。*

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-15T22:08:37.220

Your tech lead needs a good talking to! Putting everything into the Program.cs is not the way forward.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-15T22:10:41.937

Well, his way is conceptually simpler, in that it's how programs were written before the subroutine was invented ....

Your way is better: it supports reusability and would be easier to modify and to debug.

The only other justification I can think of for his way was that if it was taking significantly longer for you to do it your way than it would be to do it his way. But that's a case of short-term thinking on his part. Your way will stand the test of time better.

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-15T22:11:11.070

Your tech lead is wrong. The method you propose is a lot more reasonable -- it allows for the consolidation of different scripts easily. Each script having its own `Main` method can get clunky, especially if you are planning on having an application that can run several of these at a time.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-15T22:10:39.693

Splitting the logic out into a separate class (or classes) is the way to go. Putting it all into one spot violates the principles of SOLID and DRY design. You're definitely on the right track with your approach.

The more you keep your classes focused on single roles the easier your life will be for maintenance and testing.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-15T22:13:33.143

如果该功能可以通过控制台程序以外的其他方式使用，那么您当然应该将它们保存在一个模型良好的类库中。考虑到关注点最初是分开的，通过使用封装的功能来处理命令行参数来节省几行代码是没有意义的。恕我直言，也许您的技术主管应该为您找到更有成效的任务。

# android - 滚动视图内的 ViewPager 不起作用

> ID：12904730
> 
> 赞同：1
> 
> 时间：2012-10-15T22:05:31.997
> 
> 标签：android, touch, scrollview, android-viewpager, fragment

我有一个 ScrollView 的 ViewPager inisde，而 ViewPager 不能正常工作。我知道，这个问题很相似，我用谷歌搜索并阅读了一些解决方案。此外，在 ScrollView 后面我有一些堆叠的片段。我[在 ScrollView 触摸处理](https://stackoverflow.com/questions/2646028/android-horizontalscrollview-within-scrollview-touch-handling)（扩展 viewpager 和滚动视图）中尝试了这个 Horizo​​ntalScrollView，它工作得更好，但并不完美。我认为堆叠的片段正在捕获 Touch 事件。

有人有这个问题吗？谢谢

编辑：我添加代码。

## 自定义滚动视图：

```
public class ScrollViewS extends ScrollView {
    /* THIS COMMENT CODE IS THE OTHER SOLUTION
    private GestureDetector mGestureDetector;
    View.OnTouchListener mGestureListener;

    public ScrollViewS(Context context, AttributeSet attrs) {
        super(context, attrs);
        mGestureDetector = new GestureDetector(context, new YScrollDetector());
        setFadingEdgeLength(0);
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        return super.onInterceptTouchEvent(ev) && mGestureDetector.onTouchEvent(ev);
    }

    // Return false if we're scrolling in the x direction  
    class YScrollDetector extends SimpleOnGestureListener {
        @Override
        public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {
            if(Math.abs(distanceY) > Math.abs(distanceX)) {
                return true;
            }
            return false;
        }
    }
    */
    private float xDistance, yDistance, lastX, lastY;

    public ScrollViewS(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) {
        switch (ev.getAction()) {
            case MotionEvent.ACTION_DOWN:
                xDistance = yDistance = 0f;
                lastX = ev.getX();
                lastY = ev.getY();
                break;
            case MotionEvent.ACTION_MOVE:
                final float curX = ev.getX();
                final float curY = ev.getY();
                xDistance += Math.abs(curX - lastX);
                yDistance += Math.abs(curY - lastY);
                lastX = curX;
                lastY = curY;
                if(xDistance > yDistance)
                    return false;
        }

        return super.onInterceptTouchEvent(ev);
    }
} 
```

## ViewPager 代码：

```
public class ViewPagerS extends ViewPager {

    public ViewPagerS(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public boolean onInterceptTouchEvent(MotionEvent ev) {
        // Tell our parent to stop intercepting our events!
        boolean ret = super.onInterceptTouchEvent(ev);
        if (ret) {
            getParent().requestDisallowInterceptTouchEvent(true);
        }
        return ret;
    }
} 
```

## XML 是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/fondoapp"
    android:orientation="vertical" >

    <com.geo.sov.customviews.ScrollViewS
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/borde_redondeado"
        android:id="@+id/scrollview_fragmentaccounts"
         >

       <LinearLayout
            android:id="@+id/x"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_horizontal"
            android:layout_margin="5dp"
            android:orientation="vertical" 
        >

            <TextView
                android:id="@+id/title_accounts"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:textColor="#000000"
                android:textSize="14dp"
                android:textStyle="bold" />

            <com.geo.sov.customviews.ViewPagerS
                android:id="@+id/pager"
                android:layout_width="wrap_content"
                android:layout_height="95dp"
                android:background="#FFFFFFFF" /> 

            <com.viewpagerindicator.CirclePageIndicator
                android:id="@+id/indicator"
                android:layout_width="fill_parent"
                android:layout_height="20dp"
                android:padding="10dip"
                app:pageColor="#88FF0000"
                app:radius="3dp"
                app:strokeColor="#FF666666"
                app:strokeWidth="1dp" />

(........) 
```

当我启动我的应用程序时，我有一个片段，如果用户登录正确，可以使用以下代码对其进行更改：

```
FragmentManager fragmentManager = getFragmentManager();
FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();

Fragment f = new AccountsFragment();

fragmentTransaction.add(R.id.fragment, f);
fragmentTransaction.commit(); 
```

我用片段试验了一些问题。当我更改为 AccountsFragments 时，如果我在空白处触摸，触摸事件将传递给登录片段。我认为scrollview和viewpager是正确的，问题是它们拦截事件的片段。

# magento - 为magento中的每个类别页面添加不同的滑块

> ID：12904737
> 
> 赞同：2
> 
> 时间：2012-10-15T22:06:04.043
> 
> 标签：magento

基本上我在 Magento 中有 3 个类别页面，分别是男士、女士和配饰

现在我通过编辑 customtheme/template/catalog/category/ **view.phtml添加了一个 nivo-slider**

我删除了这些部分：

```
<?php
$_helper    = $this->helper('catalog/output');
$_category  = $this->getCurrentCategory();
$_imgHtml   = '';
if ($_imgUrl = $_category->getImageUrl()) {
    $_imgHtml = '<p class="category-image"><img src="'.$_imgUrl.'" alt="'.$this->htmlEscape($_category->getName()).'" title="'.$this->htmlEscape($_category->getName()).'" /></p>';
    $_imgHtml = $_helper->categoryAttribute($_category, $_imgHtml, 'image');
} 
```

?>

```
<?php if($_imgUrl): ?>
     <?php echo $_imgHtml ?>
<?php endif; ?> 
```

然后插入 nivo-slider

```
<div class="slider-wrapper theme-dark">
<div id="slider" class="nivoSlider">
    <img src="<?php echo $this->getSkinUrl('images/banner1.jpg') ?>" alt="" /> 
    <img src="<?php echo $this->getSkinUrl('images/banner2.png') ?>" alt="" /> 
    <img src="<?php echo $this->getSkinUrl('images/banner3.jpg') ?>" alt="" /> 
    <img src="<?php echo $this->getSkinUrl('images/banner4.png') ?>" alt="" />
</div> 
```

但现在我的问题是我想要每个类别页面有一个不同的滑块或类似的默认值，其中每个页面的图像都会更改，但只有一个滑块。就像当我转到男士类别时，当我转到女士类别时，它会加载带有男士衬衫图像和女士产品图像的 html 滑块。我通常可以通过编辑每个 html 页面在 html 中做到这一点，但 magento 是不同的。我还认为 magento 管理员会像主页一样接受代码，但事实并非如此，它只允许您上传该类别所需的图像。

我不擅长解释，但是如果这有助于解释我想要实现的目标，请看一下，它不是正确的代码，但请帮助我构建它

```
<?php
$_category = $this->getCurrentCategory();
$_accessories = (code for nivoslider accessories a link to an external phtml file)
$_mens = (code for nivoslider mens a link to an external phtml file)
$_womens = (code for nivoslider womens or a link to an external phtml file)

if ($_category == accessories) 
    {
    echo $_accessories;
    }
    elseif ($_category == mens) 
    {
    echo $_mens;
    }
    else
    {
    echo $_women;
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T22:15:29.427

您可以使用静态块来实现这一点。在 head 部分添加 Javascript/Jquery（图像滑块代码）并在网站上的任何位置调用它。

使用静态块将数据提供给 Jquery。之后只需转到您的类别->显示设置->选择 cms 块或使用自定义设计。看看这个链接

[http://benfrain.com/magento-how-to-add-a-jquery-image-and-content-carousel/](http://benfrain.com/magento-how-to-add-a-jquery-image-and-content-carousel/)

# asp.net - 在 azure 上发布后无法运行 webapi

> ID：12904741
> 
> 赞同：0
> 
> 时间：2012-10-15T22:06:30.740
> 
> 标签：asp.net, azure, asp.net-web-api

我已经为我的应用程序创建了一个 asp webapi 来连接数据库。在本地主机上开发时一切正常。但是在发布之后，除了主页之外什么都没有。发布后我的路由似乎不起作用

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "sd/{controller}/{action}"
        );

        routes.MapHttpRoute(
            name: "ParamApi",
            routeTemplate: "sd/{controller}/{action}/{param}",
            defaults: new { param = RouteParameter.Optional }
        );

        routes.MapHttpRoute(
            name: "GuestApi",
            routeTemplate: "sd/{controller}/{action}/{username}/{password}/",
            defaults: new
            {
                username = UrlParameter.Optional,
                password = UrlParameter.Optional
            }
        );

        routes.MapHttpRoute(
            name: "BriefcasePutApi",
            routeTemplate: "sd/{controller}/{action}/{id}/{value}/{owner}",
            defaults: new { 
                id = RouteParameter.Optional,
                value = RouteParameter.Optional,
                owner = RouteParameter.Optional
            }
        );

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    }
} 
```

发布后唯一起作用的是带有 name 的路由`Default`。其余的都不是。我收到这样的错误：

```
Server Error in '/' Application.

Runtime Error
Description: An application error occurred on the server. The current custom error settings for this application prevent the details of the application error from being viewed remotely (for security reasons). It could, however, be viewed by browsers running on the local server machine.\r\n

 Details: To enable the details of this specific error message to be viewable on remote machines, please create a <customErrors> tag within a "web.config" configuration file located in the root directory of the current web application. This <customErrors> tag should then have its "mode" attribute set to "Off".` 
```

当我调用 url 时出现此错误：`http://domain.com/sd/content/get`

在我的本地主机上它工作得很好，但在发布后不能在天蓝色上

我可能错了，这是路由问题，但我不知道还能去哪里看。

我在 .NET 4.5 中创建了项目，但之后我发现我还不能在 azure 上使用它，所以我将它转换为 4.0

**更新** 好的。与控制器快速检查后，我得到空白页。没有错误：/

检查是我的操作返回整数“2”。所以我知道这个问题不是由一些正在运行的代码引起的。但是现在我没有错误，什么也没有。只是空白页

奇怪的事情：Firefox 返回空白页面，但 Internet Explorer 返回错误 500

* * *

**在下面回答**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T09:45:48.363

我发现了问题！

我已经从 .NET 4.5 回滚到 .NET 4.0，但 Entity Framework 没有从 5.0 回滚到 4.3.1，所以我必须手动卸载 v 5.0，然后从 NuGet 安装 4.3.1。之后一切开始工作！

# c++ - QT 小部件指针

> ID：12904746
> 
> 赞同：0
> 
> 时间：2012-10-15T22:06:49.487
> 
> 标签：c++, qt, class, widget, qwidget

我对 QT 相当陌生，并且正在努力获得一个基本的绘画示例。我正在创建一个游戏，我在我的主游戏控制器中实例化一个小部件。我想将它传递给多个不同的对象，以便每个对象都可以拥有自己的paintEvent 并相应地绘制其对象。（即，角色会单独绘画，风景等）

这是我的“动画对象”标题：

```
class Animated_object: public QWidget {

    public:
        Animated_object(char * _image_url, QWidget * window);
        ~Animated_object();

    protected:
        QImage * get_image();//this will return the image for this object
        QRect * get_rectangle();//this will return the rectangle of coordinates for this point

    protected:
        virtual void paintEvent(QPaintEvent * event) = 0;
        virtual void set_image(char * _image_url) = 0;

    protected:
        QWidget * window;
        char * image_url;//this is the imageurl
        QImage * image;
        QRect * rectangle;

}; 
```

我的动画对象构造函数：

```
Animated_object::Animated_object(char * _image_url, QWidget * _window) : QWidget(_window) {....} 
```

这是我的角色标题（角色继承自动画对象）

```
class Character : public Animated_object {

    public:
        Character(QWidget * _window);   
        ~Character();
        void operator()();//this is the operator for the character class -- this is responsible for running the character
        void set_image(char * _image_url) {};
        void paintEvent(QPaintEvent * event);

}; 
```

我通过向构造函数传递我的主小部件指针来实例化一个字符。所以我有另一个可以调用多个字符的类，它们都会绘制到同一个小部件（希望如此）。

我的角色paintEvent看起来像这样：

```
void Character::paintEvent(QPaintEvent * event) {

    QPainter painter(this);//pass it in window to ensure that it is painting on the correct widget!

    cout << "PAINT EVENT " << endl;
    QFont font("Courier", 15, QFont::DemiBold);
    QFontMetrics fm(font);
    int textWidth = fm.width("Game Over");

    painter.setFont(font);

    painter.translate(QPoint(50, 50));
    painter.drawText(10, 10, "Game Over");

} 
```

它正在被调用，（我使用 std::cout 来测试它）但没有画任何东西......

最后，这里是调用我的主要小部件的地方。

```
Hill_hopper::Hill_hopper(): Game(500,500, "Hill Hopper") {

    Character * character = new Character(window);

    window->show();
    application->exec();

} 
```

这是游戏构造函数：

```
Game::Game(int _height, int _width, char * title): height(_height), width(_width) {

    int counter = 0;
    char ** args;

    application = new QApplication(counter, args);

    window = new QWidget();

    desktop = QApplication::desktop();

    this->set_parameters(title);

} 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:43:31.723

看起来您的标题中缺少 Q_OBJECT 宏。尽管无论如何都调用它可能不是问题。

无论如何，我建议你使用 Qt Creator 来创建新类，它会为你创建 .h 和 .cpp 文件骨架，避免忘记这样的东西。

对于快速更新的游戏，您可能应该只有*一个*游戏区域小部件，您可以在其中绘制所有移动的东西。如果您只绘制 QPixMaps（没有直接的文本或线条绘制，首先将文本片段转换为 QPixmaps），那么只需将小部件转换为 QGLWidget 即可非常快速地旋转和缩放 QPixMap“精灵”，而无需自己编写任何 OpenGL 代码。但是如果建议的 QGraphicsView 足够快，那么如果对您有用，它会做很多事情，您应该先尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T22:13:27.560

您应该使用为这种想法设计的[QGraphicsView小部件。](http://doc.qt.digia.com/qt/qgraphicsview.html)在 QGraphicsView 的场景（[QGraphicsScene](http://doc.qt.digia.com/qt/qgraphicsscene.html)）中，您可以直接添加小部件。内置系统将管理您的小部件并在需要时触发绘制事件。此外，您还有很多有用的功能可以查找、移动等您的小部件。

# javascript - GWT DND 更改 DataTransfer 图像或光标

> ID：12904748
> 
> 赞同：2
> 
> 时间：2012-10-15T22:06:57.100
> 
> 标签：javascript, gwt, drag-and-drop

例如，当您转到此页面时：[http](http://grooveshark.com/#!/search?q=stackoverflow) ://grooveshark.com/#!/search?q=stackoverflow然后开始拖动任何歌曲，您会得到这种不错的拖放行为：

![拖动开始](../Images/4a3a4f41c395f62aee25fb235f0b2544.png)

然后，在拖放过程中，当您悬停接受拖放的区域时，光标下的图像会更改以显示可以拖放：

![拖过去](../Images/2e6ebca33ed24d446f6ab1989e0da071.png)

有没有机会让这种东西一起工作`GWT`？

我为一些文本制作了一个虚拟小部件，并且在拖动开始后更改 DragImage 似乎不起作用。我也试过改变光标，但没有成功

```
@Override
        public void onDragOver(DragOverEvent event) {
            dragIndicator.setInnerText("CAN DROP !");
            event.getDataTransfer().setDragImage(dragIndicator,
                    10, 10);
        } 
```

拥有拖放功能很好，但正如我在这里看到的[http://allen-sauer.com/com.allen_sauer.gwt.dnd.demo.DragDropDemo/DragDropDemo.html#BinExample](http://allen-sauer.com/com.allen_sauer.gwt.dnd.demo.DragDropDemo/DragDropDemo.html#BinExample)我们只能修改悬停的元素。**我错了吗 ？**

**编辑**

在阅读 W3C（[http://dev.w3.org/html5/spec/dnd.html#the-drag-data-store](http://dev.w3.org/html5/spec/dnd.html#the-drag-data-store)）后，我遇到了这个问题：

> dropEffect 属性控制在拖放操作期间向用户提供的拖放反馈。创建 DataTransfer 对象时，dropEffect 属性设置为字符串值。在获取时，它必须返回其当前值。设置时，如果新值是“none”、“copy”、“link”或“move”之一，则必须将属性的当前值设置为新值。其他值必须忽略。

但是，我在 GWT 代码中没有找到类似的东西，也许我会使用 JSNI 尝试它（必须检查它是否是标准）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T22:44:52.857

好的，我已经设法使用 JSNI 在悬停期间更改光标（仅在 FF 15 中测试）。**这远非完整和正确。**

```
public class MonWidget extends Widget implements HasAllDragAndDropHandlers {

private DivElement mainDiv;

public MonWidget()
{
    mainDiv = Document.get().createDivElement();

    SpanElement span1 = Document.get().createSpanElement();
    span1.setInnerText("span1");
    span1.setDraggable(Element.DRAGGABLE_TRUE);
    span1.getStyle().setBackgroundColor("red");

    SpanElement span2 = Document.get().createSpanElement();
    span2.setInnerText("span2");
    span2.setDraggable(Element.DRAGGABLE_TRUE);
    span2.getStyle().setBackgroundColor("blue");    

    mainDiv.appendChild(span1);
    mainDiv.appendChild(span2);

    setElement(mainDiv);

    this.addDragStartHandler(new DragStartHandler() {
        public void onDragStart(DragStartEvent event) {

            Element element = Element.as(event.getNativeEvent().getEventTarget());
            event.setData("text", "some data");
            event.getDataTransfer().setDragImage(element,
                    10, 10);        
        }
    });

    this.addDragOverHandler(new DragOverHandler() {

        @Override
        public void onDragOver(DragOverEvent event) {
            setEffet(event.getNativeEvent(),"copy");
            //setEffet(event.getNativeEvent(),"link");
            // THIS do not seems to work - setEffet(event.getNativeEvent(),"move");
            event.stopPropagation();
        }
    });
}
.... 
```

和 JSNI 方法：

```
public final native void setEffet(NativeEvent e, String effect) /*-{
     var dt = e.dataTransfer;
     dt.dropEffect = effect;
  }-*/; 
```

# java - Google App Engine Blobstore 上传文件并获取路径

> ID：12904759
> 
> 赞同：0
> 
> 时间：2012-10-15T22:08:15.753
> 
> 标签：java, google-app-engine, blob, blobstore

我成功测试了 Blobstore 上传[教程](https://developers.google.com/appengine/docs/java/blobstore/overview)。但它使用服务方法来查看文件。我找不到任何方法来获取文件路径。通常在 php 中，当我们上传文件时，我们会获取文件路径，因此我们可以将该文件嵌入到 html 中。我怎样才能在 BlobStore 中做到这一点。我在 stackoverflow 和 google 上搜索，我可以找到 python 示例，但我找不到 java 的任何示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-16T00:40:46.603

正如您在教程示例中看到的：

```
res.sendRedirect("/serve?blob-key=" + blobKey.getKeyString()); 
```

您必须在 HTML 页面中创建一个链接，如下所示：

```
<a> href="/serve?blob_key=.... blob_key_of_this_blob ....>Serving the BLOB</a> 
```

# delphi - 使用多个 catch 块捕获重新引发的异常？

> ID：12904761
> 
> 赞同：3
> 
> 时间：2012-10-15T22:08:25.537
> 
> 标签：delphi, delphi-2010

我正在捕获异常，并且对于该类中的特定异常类和错误代码，我会进行一些自定义处理。对于所有其他异常，我想使用通用错误处理程序。像这样：

```
on E:EADSDatabaseError  do
  begin
    case E.ACEErrorCode of
      5132: 
        begin
        //Custom handling
        end;    
      else
        begin
          raise;
        end;
    end;
  end;
on E:Exception do
  begin
    //usual handling
  end; 
```

对于原始错误中的大多数代码，我想使用通用错误处理程序。但是，重新提高它似乎不允许触发更通用的异常类处理程序。（我不确定我会期望它。我以前从未做过这种事情。）

我最好的选择是有两个`try/excepts`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T22:26:33.107

我可以看到 3 种可能的解决方案，

*   你说的，两个尝试除了块
*   将您通常的处理代码放入一个过程中，并从两个地方调用它
*   像这样的东西

    ```
    on E:Exception do
    begin
      if ( e is EADSDatabaseError ) and
         ( EADSDatabaseError(e).ACEErrorCode = 5132 then
      begin
        //Custom handling
      end else
      begin
       //usual handling
      end;
    end; 
    ```

在这种情况下，我会使用第三个。

# javascript - How to request publish_stream permission using javascript SDK?

> ID：12904762
> 
> 赞同：2
> 
> 时间：2012-10-15T22:08:27.523
> 
> 标签：javascript, facebook, facebook-javascript-sdk

When I call FB.login() with 'publish_stream' as the requested permission, i.e

```
FB.login( handleLogin, {scope: 'publish_stream'}  ); 
```

In the dialog that opens, it only says I'm requesting their basic information, and says nothing about the stream_publish permission.

Is this how its expected to work, and when the user clicks accept, he would give this permission, or do I need to then open a second dialog to request this permission somehow? Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T22:42:24.433

扩展权限，包括`publish_stream`显示在对话框的第二页上 - 如果用户没有使用您的应用程序，他们必须接受您请求的基本权限（包括您的应用程序发布的项目的隐私选项），然后是第二个页面出现要求扩展权限

# ios - Drawing a bezier curve between a set of given points

> ID：12904767
> 
> 赞同：13
> 
> 时间：2012-10-15T22:08:43.197
> 
> 标签：ios, bezier, uibezierpath

What is the best way to draw a bezier curve, in iOS application, that passes through a set of given points

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-04-26T10:19:36.983

例如，可以通过查看[BEMSimpleLineGraph GitHub 项目](https://github.com/Boris-Em/BEMSimpleLineGraph)来实现更通用的方法（有关更多信息，请参见此处：[bemsimplelinegraph](/questions/tagged/bemsimplelinegraph "显示标记为“bemsimplelinegraph”的问题")）。在这里，我提取了一种通过给定点列表绘制贝塞尔曲线的方法。

头文件（BezierLine.h）：

```
#import <Foundation/Foundation.h>
#import <UIKit/UIKit.h>
#import <CoreGraphics/CoreGraphics.h>

@interface BezierLine : NSObject

/*
 Draws a bezier curved line on the given context
 with points: Array of CGPoint values
 */
-(void) drawBezierCurveInContext:(CGContextRef)context withPoints:(NSArray*)points lineColor:(UIColor*)color lineWidth:(CGFloat)lineWidth;

@end 
```

实现（BezierLine.m）：

```
#import "BezierLine.h"

@implementation BezierLine

-(void) drawBezierCurveInContext:(CGContextRef)context withPoints:(NSArray*)points lineColor:(UIColor*)color lineWidth:(CGFloat)lineWidth {
    if (points.count < 2) return;

    CGPoint CP1;
    CGPoint CP2;

    // LINE
    UIBezierPath *line = [UIBezierPath bezierPath];

    CGPoint p0;
    CGPoint p1;
    CGPoint p2;
    CGPoint p3;
    CGFloat tensionBezier1 = 0.3;
    CGFloat tensionBezier2 = 0.3;

    CGPoint previousPoint1;
    CGPoint previousPoint2;

    [line moveToPoint:[[points objectAtIndex:0] CGPointValue]];

    for (int i = 0; i < points.count - 1; i++) {
        p1 = [[points objectAtIndex:i] CGPointValue];
        p2 = [[points objectAtIndex:i + 1] CGPointValue];

        const CGFloat maxTension = 1.0f / 3.0f;
        tensionBezier1 = maxTension;
        tensionBezier2 = maxTension;

        if (i > 0) { // Exception for first line because there is no previous point
            p0 = previousPoint1;
            if (p2.y - p1.y == p1.y - p0.y) tensionBezier1 = 0;
        } else {
            tensionBezier1 = 0;
            p0 = p1;
        }

        if (i < points.count - 2) { // Exception for last line because there is no next point
            p3 = [[points objectAtIndex:i + 2] CGPointValue];
            if (p3.y - p2.y == p2.y - p1.y) tensionBezier2 = 0;
        } else {
            p3 = p2;
            tensionBezier2 = 0;
        }

        // The tension should never exceed 0.3
        if (tensionBezier1 > maxTension) tensionBezier1 = maxTension;
        if (tensionBezier2 > maxTension) tensionBezier2 = maxTension;

        // First control point
        CP1 = CGPointMake(p1.x + (p2.x - p1.x)/3,
                          p1.y - (p1.y - p2.y)/3 - (p0.y - p1.y)*tensionBezier1);

        // Second control point
        CP2 = CGPointMake(p1.x + 2*(p2.x - p1.x)/3,
                          (p1.y - 2*(p1.y - p2.y)/3) + (p2.y - p3.y)*tensionBezier2);

        [line addCurveToPoint:p2 controlPoint1:CP1 controlPoint2:CP2];

        previousPoint1 = p1;
        previousPoint2 = p2;
    }

    CGContextSetAllowsAntialiasing(context, YES);
    CGContextSetStrokeColorWithColor(context, color.CGColor);
    CGContextSetLineWidth(context, lineWidth);
    CGContextAddPath(context, line.CGPath);
    CGContextDrawPath(context, kCGPathStroke);
}

@end 
```

例如，您可以通过使用 UIGraphicsBeginImageContext 创建图像上下文并使用 UIGraphicsGetCurrentContext() 检索上下文来使用它。

否则，您可能需要更改代码并将生成的路径分配给 CALayer 并将其添加到 UIView。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-09T22:02:46.883

我知道这可能为时已晚，但仅适用于正在寻找正确答案的任何人。而不是使用 addLineToPoint 来绘制直线。您可以使用 addCurveToPoint 来绘制曲线。例如

```
[bezierPath moveToPoint:CGPointMake(0, 0)];
[bezierPath addCurveToPoint:CGPointMake(40, 100) 
              controlPoint1:CGPointMake(20, 0) 
              controlPoint2:CGPointMake(20, 100)];
[bezierPath addCurveToPoint:CGPointMake(80, 50) 
              controlPoint1:CGPointMake(60, 100) 
              controlPoint2:CGPointMake(60, 50)];

// and you may don't want to close the path
// [bezierPath closePath]; 
```

选择曲线的控制点完全取决于您。我只是使用 x = last_point_x + 20; y = last_point_y 用于控制点一，x = current_point_x - 20；y = current_point_y;

并且您可能希望使用其他值而不是 20，因为您可能有不同的曲线段宽度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T22:20:36.383

您可以轻松地在网上搜索一些有关如何创建贝塞尔曲线的示例。我找到了这个简短的[例子](http://soulwithmobiletechnology.blogspot.fr/2011/05/uibezierpath-tutorial-for-iphone-sdk-40.html)。

例如，您可以使用以下代码片段创建闭合贝塞尔曲线：

```
UIBezierPath* path = [UIBezierPath bezierPath];

[path moveToPoint:pt1];
[path addLineToPoint:pt2];
[path addLineToPoint:pt3];

[path closePath]; 
```

我希望它会作为一个起点有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-05T11:23:35.707

请试试这个。

```
UIImageView *waterLevel = [[UIImageView alloc] initWithFrame:CGRectMake(0,0,200,200)];
UIGraphicsBeginImageContext(waterLevel.frame.size);
[waterLevel.image drawAtPoint:CGPointZero];
//define BezierPath
UIBezierPath *bezierPath = [UIBezierPath bezierPath];

// Set the starting point of the shape.
[bezierPath moveToPoint:CGPointMake(0, 0)];

[bezierPath addLineToPoint:CGPointMake(waterLevel.frame.size.width, 0)];
[bezierPath addLineToPoint:CGPointMake(waterLevel.frame.size.width, waterLevel.frame.size.height)];
[bezierPath addLineToPoint:CGPointMake(0, waterLevel.frame.size.height)];
[bezierPath closePath];

bezierPath.lineWidth = 15;
//set the stoke color
[[UIColor blackColor] setStroke];
//draw the path
[bezierPath stroke];

// Add to the current Graphic context
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextAddPath(context,bezierPath.CGPath);
waterLevel.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

[self.view addSubview:waterLevel]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-24T14:41:09.863

`CGPointFromString`使用以下方法可以提高效率：

```
 NSArray *pointArray = @[@"{3.0,2.5}",@"{100.0,30.2}", @"{100.0,200.0}", @"{3.0,200.0}"];

// draw the path
UIBezierPath *aPath = [UIBezierPath bezierPath];
for (NSString *pointString in pointArray) {
    if ([pointArray indexOfObject:pointString] == 0)
        [aPath moveToPoint:CGPointFromString(pointString)];
    else
        [aPath addLineToPoint:CGPointFromString(pointString)];
}
[aPath closePath]; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-05T07:17:33.767

```
UIBezierPath *aPath = [UIBezierPath bezierPath];

// Set the starting point of the shape.
[aPath moveToPoint:CGPointMake(100.0, 0.0)];

// Draw the lines.
[aPath addLineToPoint:CGPointMake(200.0, 40.0)];
[aPath addLineToPoint:CGPointMake(160, 140)];
[aPath addLineToPoint:CGPointMake(40.0, 140)];
[aPath addLineToPoint:CGPointMake(0.0, 40.0)];
[aPath closePath]; 
```

# css - 指定不影响时尚风格的@-moz-document 的网址

> ID：12904773
> 
> 赞同：5
> 
> 时间：2012-10-15T22:09:13.803
> 
> 标签：css, stylish

`@-moz-document url-prefix(http://)`使用时尚，您可以使用例如指定域。

这适用于所有 URL。有没有办法指定您*不*希望样式影响哪些 URL？这意味着您可以拥有一个全局样式表，该样式表会影响除指定 URL 之外的所有内容，在该 URL 中您要使用另一个样式表。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T22:40:24.280

这可能会变得棘手，但可以做到。
来自 Stylish 文档：[“将样式应用于特定站点”](https://github.com/JasonBarnabe/stylish/wiki/Applying-styles-to-specific-sites)：

```
@-moz-document regexp('(?!http://www\.example\.com).*') {
    /* CSS rules here.*/
} 
```

将对所有 URL 激活，但以 . 开头的 URL 除外`http://www.example.com`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-10T10:47:48.383

我的解决方案

```
@-moz-document regexp("^((?!(domain1\.com|domain2\.fr)).)*")
{
   ...YOUR CSS...
} 
```

# javascript - jQuery bind click event to id that has increasing number on every page refresh

> ID：12904774
> 
> 赞同：1
> 
> 时间：2012-10-15T22:09:14.630
> 
> 标签：javascript, jquery, sharepoint

Here's what I have. A SharePoint 2010 custom view in a list web part. I have 6 categories and 4 sub-categories. Items do not have to have sub-category but do have to have a category.

The view shows the a blank sub-category witha number next to it. I'm trying to bind a click event to all of them but the ID increases on every page refresh. The base ID is titl[0-9]**[0-9]*. Then there is another ID underneath that I want to check as well, it is titl[0-9]*_[0-9]*1*.

So I've tried using the [regex selector for jQuery](http://james.padolsey.com/javascript/regex-selector-for-jquery/) and it doesn't bind correctly. It finds the object but doesn't bind correctly.

I need it to bind to the id and then be able to trigger the onclick event of the next tbody which is the 1_. Then check if the text of it is " " and if so hide the tbody.

My code:

```
$(":regex(id,titl[0-9]*-[0-9]_) td a").bind('click', function(){
  var parent = $(this);
  var child = $(this).next("tbody");
  var grandchild = $(this).next("tbody td a");
  //alert(parent + " | " + child + " | " + grandchild ); //always return undefined??
  // Everything below works if I can get the IDs correct for child and grandchild
  if($(grandchild).css('display')!='none'){
    $(grandchild).click();

    if($(grandchild).text()==" "){
      $(child).hide();
    };
  };
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:03:11.587

我强烈建议您重新考虑您的 ID - 它们应该是一致的，真的。

如果您绝对必须使用变量 ID，您可以在选择器中使用“id”属性，就像使用任何其他属性一样：

```
// Any element, ID starts with "titl"
$('[id^="titl"]') 
```

要捕获并重新使用它，我**真的**建议您对您的 ID 做错了什么。然而，为了完整性（尽管我不能强调你应该尽量避免使用它），基于此的东西应该是一个好的（哈哈，是的）起点

```
// Long-winded messy hideous foul code
var $title = $('[id^="titl"]'),
    title = $title.length && $title.eq(0).attr('id');
if (title !== 0)
{
    $('#' + title + ' #' + title + '1 td a').html('Ow.');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T02:20:17.793

如果您可以控制身份，我同意重新考虑您的身份。即使您不这样做，StartsWith 选择器也会为您提供所有更高级别的元素，并且您可以遍历到较低级别的元素。请记住，链接选择器意味着您可以匹配 id 中的相似*模式*，而无需关注实际*值*。

另一个注意事项：我从来不需要使用 jQuery 进行正则表达式匹配。类似 CSS3 的选择器功能太强大了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T23:02:52.227

我不确定我是否明白这一点，但您可以定位任何以 开头`titl`的 ID，然后在函数内以许多其他方式根据 ID 进行过滤：

```
$('[id^="titl["]').on('click', function() {
    var check = this.id.charAt(10) == '_', //tenth character is underscore ?
        parent = $(this),
        child = $(this).next("tbody"),
        grandchild = $(this).next("tbody td a");

    if (check) {
        //element matching second selectortype clicked
    }else{
        if (grandchild.is(':visible')){
            grandchild.trigger('click');
            if (grandchild.text()==" ") child.hide();
        }
    }
}); 
```

# jquery - jQuery 不会改变 css 颜色值...有时

> ID：12904777
> 
> 赞同：0
> 
> 时间：2012-10-15T22:10:07.220
> 
> 标签：jquery, css, html, jquery-ui

我遇到的问题是我正在构建一种幻灯片，并且在特定行为之后，突出显示的代码（将幻灯片编号的颜色从绿色更改为红色）新幻灯片不起作用，即使它在所有情况下都有效其他情况。

我的示例位于此[链接](http://freshmarketstores.com/promotions/test1.html)供您查看。让幻灯片播放 5 张幻灯片。一切正常（显示幻灯片时数字突出显示）。当您单击一个数字时，它仍然有效，然后在 8 秒暂停后将继续播放幻灯片。现在，当您单击“新鲜出炉”文本并再次单击“新闻和事件”文本时，就会出现问题。应该发生的情况是幻灯片应该从幻灯片 1 开始（数字 1 为红色），但数字 1 保持绿色。当幻灯片改变时，数字 2 保持绿色。幻灯片再次更改，3 保持绿色。幻灯片再次更改，4 变为红色。与幻灯片 5 相同。

我已经挖掘了我的知识，并准备把我剩下的头发扯掉。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T22:18:37.397

您的示例有一些断开的链接，对于初学者，请尝试修复 jquery UI 的 URL，您拥有 10.2.24.111/js/jquery-ui-1.9.0.custom.min.js 和 10.2.24.111/css/smoothness/jquery -ui-1.9.0.custom.css。

我弄清楚为什么链接不适用于 1-3 并且适用于 4 和 5。

这是因为您的每张幻灯片的 ID 都是 id="1"、id="2" 等，一旦加载第二张幻灯片（只有 3 张幻灯片），现在页面上有两个幻灯片相同的 ID 为 1、2 和 3。

所以解决方法是像这样更改每个链接：

```
<a href="#theFeeds" class="promoNav" id="1">1</a> 
```

要有这样的前缀：

```
<a href="#theFeeds" class="promoNav" id="feeds_1">1</a> 
```

因此，您不会在同一页面上有重复的 ID。

# asp.net-mvc-3 - ASP.NET MVC 3 下拉绑定

> ID：12904784
> 
> 赞同：0
> 
> 时间：2012-10-15T22:10:52.180
> 
> 标签：asp.net-mvc-3, data-binding, razor

在将模型与集合绑定到视图期间，我遇到了下一个索引器语法。

这是我所拥有的：

```
public class CustomerModel
{
    public List<Customer> Customers { get; set; }
}

public class Customer
{
    public int Id { get; set; }
    public string Name { get; set; }
    public ImportAction ImportAction { get; set; }
}

public enum ImportAction
{
    Skip,
    Add,
    Merge
} 
```

我的观点：

```
@using (Html.BeginForm("Edit", "Home"))
{
    var index = 0;
    foreach (var customer in Model.Customers)
    {
        <span>Name: @customer.Name</span>
        @Html.DropDownListFor(x => x.Customers[index].ImportAction, customer.ImportAction.ToListItems())
        index++;
    }
    <button type="submit">
        Submit</button>
} 
```

如何避免这种**[index]**用法？还有其他正确的语法吗？看看，没有它就`@Html.DropDownListFor`无法工作并在回发时更新我的​​模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:55:52.487

您可以使用循环变量“客户”，如下所示：

```
@Html.DropDownListFor(x => customer.ImportAction) 
```

# java - 验证正斜杠

> ID：12904796
> 
> 赞同：-1
> 
> 时间：2012-10-15T22:12:08.990
> 
> 标签：java

我正在介绍 Java 课程，我们必须制作一个命理程序。除了完成数据验证之外，我什么都有。我们必须验证输入的日期是否正确，包括正斜杠。我尝试使用

```
 if(slash1 !< /)
    continue; 
```

因为它是在一个while语句中，如果有什么不正确的话，让整个事情重复。它总是告诉我使用正斜杠是无效的。有人可以指出如何解决这个问题的方向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T22:17:26.397

在您发布更多代码和示例数据之前，有点难以提供帮助 - 您发布的内容不是有效的 Java ...

您只有`!<`，这不是 Java 中的有效运算符`!=`。

您在代码中也有一个纯文本`/`，这不是合法的 Java - 您必须引用它`"/"`或`'/'`使其合法`String`或`char`文字。

如果要将某些内容与诸如“/”之类的字符串进行比较，则需要使用`.equals()`or`.contains()`或类似的方法。不要尝试使用`==`or来比较字符串，`!=`否则您会得到[令人困惑的结果](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)。

验证字符串模式的一种有效方法是使用正则表达式 - 请参阅有关此主题的[Java 教程。](http://docs.oracle.com/javase/tutorial/essential/regex/)

另一种方法（对于日期）是为您想要的模式定义一个[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)。

希望有帮助...

# python - What is the scope of the variable "a"?

> ID：12904799
> 
> 赞同：2
> 
> 时间：2012-10-15T22:12:31.123
> 
> 标签：python

> **Possible Duplicate:**
> [Python variable scope question](https://stackoverflow.com/questions/370357/python-variable-scope-question)

The Python Manual defines the scope as:

> A scope defines the visibility of a name within a block. If a local variable is defined in a block, its scope includes that block. If the definition occurs in a function block, the scope extends to any blocks contained within the defining one, unless a contained block introduces a different binding for the name.

I have this program:

```
import random
def f():
  a = "Is the scope static?"
  if random.randint(0, 1) == 1:
    del a
  print a 
```

There is a 50% chance that the print will fail:

```
>>> f()
Is the scope static?
>>> f()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 5, in f
UnboundLocalError: local variable 'a' referenced before assignment 
```

By that, I think that there is a 50% chance that the print statement is outside the scope of 'a', but I can be wrong. What is the "correct" interpretation of scope in Python? Is the scope of a variable in Python defined statically? What is the scope of the variable "a"?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-15T23:00:20.027

名称的范围`a`是整个函数`f`，并且是纯静态的。说“有 50% 的可能性 print 语句超出了范围`a`”是完全不正确的。“不在范围内”并不是名称查找失败的唯一原因。

请注意您从此函数中得到的错误：

```
>>> def foo():
...   print a
... 
>>> foo()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in foo
NameError: global name 'a' is not defined 
```

这与您在函数执行时遇到的错误不同`del a`。在我的`foo`,`a`的本地范围内没有定义`foo`，所以名称查找继续到全局范围，在那里`a`也没有找到，所以我们得到一个关于没有全局的异常`a`。

您得到的错误清楚地表明 Python 知道该名称`a`是`f`. 但是它没有任何价值，因为您删除了它。（通常这只会发生，因为您在写入之前尝试读取局部变量，这就是错误消息按原样措辞的原因）

还要注意这种情况：

```
a = 3
>>> def bar():
...   a = 1
...   del a
...   print a
... 
>>> bar()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 4, in bar
UnboundLocalError: local variable 'a' referenced before assignment 
```

Python 抱怨本地`a`没有值。如果`a`根本不在本地范围内，它将在`a`全局范围内查找并找到`3`：

```
>>> a = 8
>>> def baz():
...   print a
... 
>>> baz()
8 
```

这与您`del`从全局范围内获得的行为不同：

```
>>> a = 12
>>> del a
>>> print a
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'a' is not defined 
```

在这里，您会遇到一个异常，就好像`a`从未存在过一样。差异的原因是*因为*函数的本地范围是*静态*的。如果函数包含对名称的赋值，则该名称的局部范围是整个函数体¹。即使在第一次赋值之前，或者在你习惯于`del`摆脱它之后，在该函数中查找该名称将尝试获取局部变量的值。

* * *

¹除非名称已被声明`global`或`nonlocal`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T22:17:20.033

Python遵循`LEGB`规则：

```
L: Local          # Current def
E: Enclosing      # Any enclosing def
G: Global         # Globals
B: Built-in       # Built-ins 
```

所以对于你的问题是`L`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T22:18:44.667

只有类、函数和模块在 Python 中提供范围`if`，`while`而其他循环/分支结构不提供。

从[文档](http://docs.python.org/tutorial/classes.html#python-scopes-and-namespaces)：

范围是*静态确定*但*动态使用*的。在执行期间的任何时候，至少有三个嵌套作用域的命名空间可以直接访问：

```
the innermost scope, which is searched first, contains the local names
the scopes of any enclosing functions, which are searched starting with the nearest enclosing scope, contains non-local, but also non-global names
the next-to-last scope contains the current module’s global names
the outermost scope (searched last) is the namespace containing built-in names 
```

在您的代码中，您`a`在本地命名空间中定义并删除它。`del`在分支中使用`if`与在函数的其他地方使用它没有任何不同。

# c# - Oracle Dependency（通知），如何侵入？

> ID：12904800
> 
> 赞同：1
> 
> 时间：2012-10-15T22:12:45.213
> 
> 标签：c#, oracle, notifications, odp.net

我计划在生产环境中使用 Oracle 依赖项通知（ODP.Net）来更新缓存在 SQL Server 上的几个表。

我的理解是这在 oracle 数据库中没有侵入性，我假设 Oracle 只是在订阅的表上广播提交，并且不费心保证消费者收到通知；因此我认为它不包含任何服务器资源。

尽管我已经在 CRUD 操作最少的测试环境中对此进行了测试，但在实际环境中 CRUDS 的频率要高得多。依赖关系通知是否会保留服务器资源，直到所有待处理的通知都由客户端提供服务？

# c# - 无法让 MSMQ 正常工作

> ID：12904803
> 
> 赞同：2
> 
> 时间：2012-10-15T22:13:09.707
> 
> 标签：c#, msmq

我正在尝试在同一域内的两台不同机器上的两个服务之间设置 msmq 通信。

机器是主要 - 次要情况。

我需要能够从主节点发送和清除，并从辅助节点接收

我似乎找不到允许这样做的设置。我有一个设置，其中队列存在于辅助节点上，主节点可以发送，辅助节点可以接收，但我无法根据需要从主节点清除。我相信这是由于队列是私人和远程的。

所以我试图扭转局面。我将队列放在主队列上，但后来我无法发送到私有本地队列，所以我将它们公开，现在我无法让辅助队列找到远程公共队列。

```
if (!MessageQueue.Exists(queueName))
 {
      //log they don't exist and exit
      throw new Exception("One or more of the required queues do not exist");
 }

syncQ = new MessageQueue(queueName){Formatter = new XmlMessageFormatter(new Type[] {typeof (String)})};

if (machineState == MachineState.Primary)
{
     syncQ.SetPermissions(ASPConfiguration.SyncUser, MessageQueueAccessRights.FullControl, AccessControlEntryType.Allow);

     syncQ.Purge();
} 
```

主要 = ".\nw"

次要 = "FormatName:Direct=OS:CACTEST-WS-D\nw"

只要我能做我需要的事情，队列对我来说是私人的还是公共的并不重要。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T07:39:50.353

回答您的疑问：

> 我有一个设置，其中队列存在于辅助节点上，主节点可以发送，辅助节点可以接收，但我无法根据需要从主节点清除。

您拥有的初始设置，以及辅助队列和主发送到辅助队列是正确的配置。不确定为什么您无法从主队列中清除辅助队列。这可能只是队列权限的一个简单案例。尝试授予在主服务器上运行的服务帐户的完全控制权。

> 所以我试图扭转局面。我将队列放在主节点上，但后来我无法发送到私有本地队列

再次，不确定这是为什么。你收到什么错误？您可以[启用 MSMQ 跟踪](http://technet.microsoft.com/en-us/library/cc730882.aspx)，这将为您提供两台机器上的任何传输错误。无论如何，这不是正确的配置。最好*发送 remote-receive local*。

> 主要 = ".\nw"

在所有情况下都最好使用完全格式化的 msmq 地址以避免解决问题。

> 队列对我来说是私人的还是公共的并不重要

嗯，这真的很重要。公共队列适用于具有高容量、集群和/或路由要求的企业级配置，无论如何您必须将它们注册到活动目录才能使其正常工作。如果您只想将东西从一个地方发送到另一个地方，请始终使用私人队列。

我的建议是恢复初始设置并专注于远程清除工作。

# jquery - Jquery 滑块 - 在页面的多个位置显示滑块的值

> ID：12904804
> 
> 赞同：0
> 
> 时间：2012-10-15T22:13:13.613
> 
> 标签：jquery, slider, jquery-slider

我有一个网页，用户使用滑块来选择他想购买的商品的数量。

根据在滑块中选择的数量，将显示一个带有总价的 unqie div。现在我想添加另一个具有相同 id 的 div，我将在其中显示数量 + 一个“立即购买 [数量]”按钮。

如何让 2 个具有相同 id 的 div 同时显示？我相信这是不可能的 - 但也许有解决办法？它不需要是 2 个 div，也可以是“2”或“1 和 1”。

所以，总结一下。我想在网页上的几个位置显示 jquery 滑块值。我怎样才能做到这一点？

这是我使用的滑块： **[jsFiddle DEMO](http://jsfiddle.net/tobbecokta/Uum8j)**

问候，
托拜厄斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T22:15:28.817

您不能使用两个 ID，为了实现您的目标您应该使用类。

伊斯特德

```
<div id="1" class="colors"... 
```

采用

```
<div id="1" class="colors v1"... 
```

在这种情况下`v1`是您的身份证明

如果你有两个元素与 jquery 具有相同的类，你可以像使用它们一样`$('.v1').show()`

根据您的代码，它看起来像

```
 $('#range-start').change(function() {
        $('.colors').hide();
        $('.v' + $(this).val()).show(); //#-> .v
    }); 
```

而且您的 div 必须具有 v1 ... v10 类

在这里***[看到jsfiddle](http://jsfiddle.net/Uum8j/14/)***

# android - 使用 ADB 跟踪应用程序的网络统计信息 (netstats)

> ID：12904809
> 
> 赞同：19
> 
> 时间：2012-10-15T22:13:40.633
> 
> 标签：android, adb, netstat

我觉得这是可能的，我只是不太确定信息保存在哪里。

我想获取特定应用程序的上/下统计信息，但我想使用 ADB 而不是 Wireshark 或 netty 来完成。

我知道我可以看到 vmData 使用

```
adb shell
cd proc
cd pid#
cat status 
```

我知道我可以看到 netstats 使用：

```
ADB Shell dumpsys netstats details full 
```

这给了我这些结果：

```
Dev stats:

  Pending bytes: 1410076

  Complete history:

  ident=[[type=MOBILE, subType=COMBINED, subscriberId=310260...]] uid=-1 set=ALL tag=0x0
NetworkStatsHistory: bucketDuration=3600000
  bucketStart=1349211600000 activeTime=3600000 rxBytes=19656154 rxPackets=16897 txBytes=615620 txPackets=8084 operations=0
  bucketStart=1349215200000 activeTime=3600000 rxBytes=28854708 rxPackets=23363 txBytes=1037409 txPackets=12206 operations=0
  bucketStart=1349218800000 activeTime=3600000 rxBytes=1839274 rxPackets=1565 txBytes=89791 txPackets=914 operations=0
  bucketStart=1349222400000 activeTime=3600000 rxBytes=17421 rxPackets=88 txBytes=18376 txPackets=95 operations=0
  bucketStart=1349226000000 activeTime=3600000 rxBytes=506966 rxPackets=788 txBytes=96491 txPackets=859 operations=0 
```

不幸的是，这看起来像是一个不区分应用程序的组合 netstat。

所以我的问题是，有没有办法通过唯一的 PID# 或应用程序名称查看网络流量，只需使用命令提示符？

* * *

*编辑*

* * *

好吧，我取得了一些进展

使用此代码

```
 adb shell cat proc/1638(thePID)/net/dev > C:\netstats.txt 
```

我可以得到这些信息：

```
Inter-|   Receive                                                |  Transmit
 face |bytes    packets errs drop fifo frame compressed multicast|bytes    packets errs drop fifo colls carrier compressed
lo:        3564      28    0    0    0     0          0         0     3564      28    0    0    0     0       0          0
dummy0:       0       0    0    0    0     0          0         0        0       0    0    0    0     0       0          0
rmnet0: 117062940  191775  0    0    0     0          0         0 19344640  177574    0    0    0     0       0          0
rmnet1: 2925492    5450    0    0    0     0          0         0  1448544    5664    0    0    0     0       0          0
rmnet2:       0       0    0    0    0     0          0         0        0       0    0    0    0     0       0          0
rmnet3:       0       0    0    0    0     0          0         0        0       0    0    0    0     0       0          0
rmnet4:       0       0    0    0    0     0          0         0        0       0    0    0    0     0       0          0
rmnet5:       0       0    0    0    0     0          0         0        0       0    0    0    0     0       0          0
rmnet6:       0       0    0    0    0     0          0         0        0       0    0    0    0     0       0          0
rmnet7:       0       0    0    0    0     0          0         0        0       0    0    0    0     0       0          0
  sit0:       0       0    0    0    0     0          0         0        0       0    0    0    0     0       0          0
  vip0:       0       0    0    0    0     0          0         0        0       0    0    0    0     0       0          0 
```

不幸的是，在使用 android 市场上的“网络使用”之类的程序仔细检查了这些数字后，我发现这些数字是整个设备的上下总数。

所以它仍然让我想知道，“网络使用”和“备件”等程序是如何/从哪里获取信息的？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-17T17:05:08.173

好吧，我弄清楚了“备件”和“网络使用”从哪里获取信息。

```
adb shell cat proc/uid_stat/(uid#)/tcp_rcv
adb shell cat proc/uid_stat/(uid#)/tcp_snd 
```

我看到他们如何做的问题是，这仅考虑 TCP 的使用，而不考虑 UDP 的使用。

计算总 tx_bytes 和 rx_bytes 的唯一方法是通过此命令。

```
adb shell cat /proc/net/xt_qtaguid/stats 
```

或者如果您想将其转换为文本文件并更轻松地查看它。

```
adb shell cat /proc/net/xt_qtaguid/stats > C:\Netstats.txt 
```

这给了你一些看起来像这样的东西：

```
------ QTAGUID STATS INFO (su root cat /proc/net/xt_qtaguid/stats) ------

idx iface acct_tag_hex uid_tag_int cnt_set rx_bytes rx_packets tx_bytes tx_packets     rx_tcp_bytes rx_tcp_packets rx_udp_bytes rx_udp_packets rx_other_bytes   rx_other_packets tx_tcp_bytes tx_tcp_packets tx_udp_bytes tx_udp_packets tx_other_bytes tx_other_packets
2 rmnet0 0x0 0 0 18393 326 8506 166 10889 267 7504 59 0 0 4180 101 3397 54 929 11
3 rmnet0 0x0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
4 rmnet0 0x0 1000 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
5 rmnet0 0x0 1000 1 7181 14 1834 19 7023 12 158 2 0 0 1616 16 218 3 0 0
6 rmnet0 0x0 10001 0 5723 19 3162 26 5723 19 0 0 0 0 3162 26 0 0 0 0
7 rmnet0 0x0 10001 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
8 rmnet0 0x0 10007 0 1895740 1570 44556 898 1895740 1570 0 0 0 0 44556 898 0 0 0 0
9 rmnet0 0x0 10007 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
10 rmnet0 0x0 10019 0 5319 12 2546 14 5319 12 0 0 0 0 2546 14 0 0 0 0
11 rmnet0 0x0 10019 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
12 rmnet0 0x0 10026 0 6866 19 2846 24 6866 19 0 0 0 0 2846 24 0 0 0 0
13 rmnet0 0x0 10026 1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
```

第四个标签（1000、10001 等）是 UID 号。找出哪个应用程序属于哪个 UID 号的最简单方法是：

```
adb shell dumpsys package > C:\apps.txt 
```

转到“Package：”部分，然后在标记为“userid =”的进程名称之后的第一行。

现在阅读上面的图表，您想知道的主要两个数字是（rx_bytes）中的第 6 个数字和（tx_bytes）中的第 8 个数字。对于任何特定的应用程序，这两个数字应该是所有输入和输出字节的准确描述。

享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-21T00:41:18.000

在 Nefarii 的评论中添加一个片段，找出特定应用程序（例如 com.example.myapp）的 UID 的最简单方法是：

`adb shell dumpsys package com.example.myapp | grep userId=`

# glew - OpenGL/glew 未解析的外部符号

> ID：12904810
> 
> 赞同：9
> 
> 时间：2012-10-15T22:13:45.093
> 
> 标签：glew, unresolved-external

我遇到了 glew 和链接器错误的问题。我有：

1.  将 glew32.dll 和 glew32d.dll 放入系统，System32 和 SysWOW64
2.  将 glew.h 放在 GL 文件夹中
3.  将 glew32.lib、glew32d.lib、glew32s.lib 放入 Lib 文件夹
4.  将 glew32.lib、glew32d.lib、glew32s.lib、glut32.lib、opengl32.lib 放在附加依赖项中
5.  将 GLEW_STATIC 放入预处理器定义中

但是，我仍然收到以下错误：

```
1>project2.obj : error LNK2001: unresolved external symbol ___glewGetProgramInfoLog
1>project2.obj : error LNK2001: unresolved external symbol ___glewGetShaderInfoLog
1>project2.obj : error LNK2001: unresolved external symbol ___glewGetProgramiv
1>project2.obj : error LNK2001: unresolved external symbol ___glewGetShaderiv
1>project2.obj : error LNK2001: unresolved external symbol ___glewIsShader
1>project2.obj : error LNK2001: unresolved external symbol ___glewGetUniformLocation
1>project2.obj : error LNK2001: unresolved external symbol ___glewLinkProgram
1>project2.obj : error LNK2001: unresolved external symbol ___glewAttachShader
1>project2.obj : error LNK2001: unresolved external symbol ___glewCreateProgram
1>project2.obj : error LNK2001: unresolved external symbol ___glewCompileShader
1>project2.obj : error LNK2001: unresolved external symbol ___glewShaderSource
1>project2.obj : error LNK2001: unresolved external symbol ___glewCreateShader
1>project2.obj : error LNK2001: unresolved external symbol ___glewEnableVertexAttribArray
1>project2.obj : error LNK2001: unresolved external symbol ___glewVertexAttribPointer
1>project2.obj : error LNK2001: unresolved external symbol ___glewBufferData
1>project2.obj : error LNK2001: unresolved external symbol ___glewBindBuffer
1>project2.obj : error LNK2001: unresolved external symbol ___glewGenBuffers
1>project2.obj : error LNK2001: unresolved external symbol ___glewBindVertexArray
1>project2.obj : error LNK2001: unresolved external symbol ___glewGenVertexArrays
1>project2.obj : error LNK2001: unresolved external symbol ___glewUniformMatrix3fv
1>project2.obj : error LNK2001: unresolved external symbol ___glewUniformMatrix4fv
1>project2.obj : error LNK2001: unresolved external symbol ___glewUniform3f
1>project2.obj : error LNK2001: unresolved external symbol ___glewUniform1f
1>project2.obj : error LNK2001: unresolved external symbol ___glewUseProgram 
```

我有什么明显的遗漏吗？还有什么我可以尝试的吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-12-08T04:00:00.937

如果您使用的是静态库`glew32s.lib`，则需要定义预处理器标志`GLEW_STATIC`以便解析符号。

您可以在源代码中执行此操作

```
#define GLEW_STATIC 
```

或将其添加到项目的预处理器指令中

```
Project Properties > C/C++ > Preprocessor > Preprocessor Definitions 
```

[![展示预处理器位置的图像，位置：项目属性 > C/C++ > 预处理器 > 预处理器定义](../Images/08182d9f8911dc7f3b876fe62a113af5.png)](https://i.stack.imgur.com/IAFzS.png)

如果之后您仍然有未解析的外部符号，[您可能还需要添加`opengl32.lib`作为链接器的附加依赖项。](https://stackoverflow.com/questions/41033808/glew-linking-issues-cannot-find-imp-glgetintegerv)

如果在那之后您仍然有关于 glew 的未解析符号，请确保您实际上已将其`.lib`添加到链接器搜索的库目录中。您可以将其添加到

```
Project Properties > Linker > General > Additional Library Directories 
```

[![在此处输入图像描述](../Images/c5a99d92cff812088fc33497b86eca64.png)](https://i.stack.imgur.com/f9MsC.png)

# ruby-on-rails - 设计：重新发送确认邮件时，更改闪信

> ID：12904811
> 
> 赞同：4
> 
> 时间：2012-10-15T22:13:48.693
> 
> 标签：ruby-on-rails, devise

我正在设置设计，以便用户无需确认其电子邮件地址即可登录并使用该网站，类似于此[问题](https://stackoverflow.com/questions/5957827/devise-soft-email-confirmation)。但是，除非用户确认，否则该网站上有一些功能是用户无法使用的。

好没问题。我可以检查一下`current_user.confirmed?`。如果他们没有被确认，我可以在页面上放一个按钮让他们请求再次发送确认。

我遇到的问题是，当他们在登录时执行此操作时，他们在结果页面上看到的闪存消息是“您已经登录”。这并不理想 - 我只想发布确认已发送的消息。

我开始尝试找出`Devise::ConfirmationController`要覆盖的方法以及覆盖的方法，但我希望有人已经这样做了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T16:35:21.273

flash 显示“您已经登录”的原因是因为用户被重定向到`new_session_path`该`after_resending_confirmation_instructions_path_for`方法。我将覆盖此方法以检查他们是否已登录。如果已登录，则不要重定向到`new_session_path`，设置您的 Flash 消息并重定向到另一个页面。

通过将其放入来覆盖确认控制器`controllers/users/confirmations_controller.rb`

```
class Users::ConfirmationsController < Devise::ConfirmationsController

  protected

  def after_resending_confirmation_instructions_path_for(resource_name)
    if signed_in?
      flash[:notice] = "New message here" #this is optional since devise already sets the flash message
      root_path
    else
      new_session_path(resource_name)
    end
  end
end 
```

将您的确认控制器添加到路由->

```
devise_for :users, :controllers => {:confirmations => 'users/confirmations' } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T05:42:00.170

我认为它应该看起来像这样：

```
module Devise
  module ConfirmationsController
    extend ActiveSupport::Concern

    included do
      alias_method_chain :show, :new_flash
    end

    def show_with_new_flash
      # do some stuff
      flash[:notice] = "New message goes here"
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T18:29:05.677

我正在使用 Devise 3.1.0，这种情况有一种不同的方法，而不是在投票最多的答案中描述的 after_resending_confirmation_instructions_path_for。我像这样修改了我的：

```
class Users::ConfirmationsController < Devise::ConfirmationsController

  protected

  def after_confirmation_path_for(resource_name, resource)
    if signed_in?
      set_flash_message(:notice, :confirmed)
      root_path
    elsif Devise.allow_insecure_sign_in_after_confirmation
      after_sign_in_path_for(resource)
    else
      new_session_path(resource_name)
    end
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T17:19:09.217

可以编辑

config/locales/devise.en.yml 在行更相关：

```
failure:
  already_authenticated: 'You are already signed in.' 
```

或者您可以在添加了 Flash 消息的视图中执行此操作

```
<%=content_tag :div, msg, id: "flash_#{name}" unless msg.blank? or msg == "You are already signed in."%> 
```

# java - 我如何弄清楚如何调试这个？HttpResponse

> ID：12904818
> 
> 赞同：2
> 
> 时间：2012-10-15T22:14:28.100
> 
> 标签：java, android, json, debugging, google-places-api

我正在尝试从 googleplaces api 的结果中创建一个 json 对象。但是一行代码给我带来了很多问题。我的问题是我到底是如何找到问题所在的。我似乎无法捕捉到正确的异常（尽管我是调试的菜鸟）。我传入的网址具有以下值： [https://maps.googleapis.com/maps/api/place/search/json?location=34.7,-86.5&radius=16000&types=food&name=mcdonalds&sensor=true&key=(myApiCodeWhichImNOTPostingHere](https://maps.googleapis.com/maps/api/place/search/json?location=34.7,-86.5&radius=16000&types=food&name=mcdonalds&sensor=true&key=(myApiCodeWhichImNOTPostingHere) )

^我确实有正确的 apicode，并且该链接在 android 端有效。

这是有问题的方法（突出显示的是导致问题的行）。

```
 public static JSONObject getTheJSON(String url){
                        JSONObject json=null;
                        try{
                            DefaultHttpClient myHttpClient = new DefaultHttpClient();
                            HttpPost myHttpPost = new HttpPost(url);

            //this line below is giving me problems (jumps streight to the catch Exception)
                            HttpResponse response = myHttpClient.execute(myHttpPost); 
            //this line above is giving me problems(jumps streight to the catch Exception)

                            String data = EntityUtils.toString(response.getEntity());
                            json= new JSONObject(data);
                        //parse the JSONObject
                           } catch (UnsupportedEncodingException e){e.printStackTrace();}
                             catch (ClientProtocolException e){e.printStackTrace();}
                             catch (IOException e){e.printStackTrace();}
                             catch (JSONException e) {e.printStackTrace();}
                             catch (NullPointerException e){ Log.e("My APP", "exception: " + e.getMessage());}

    /* jumps to line below (skips the other catch exceptions)
 the log reads "null" since i use the "getMessage()" so thats not useful*/  

                     catch (Exception e ) { Log.e("My APP", "exception: " + e.getMessage());}
                            return json;  // returning the JSON object

                } 
```

（编辑）：这是 logcat。我想我连接到工厂客户端错误

```
10-16 21:11:30.105: E/My APP(980): exception
10-16 21:11:30.345: E/MapActivity(980): Couldn't get connection factory client 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T22:17:26.447

您可能需要检查您的 SSL 设置。您正在调用 https:// 网址

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T22:25:02.293

而不是使用`e.getMessage()`，使用`e.printStackTrace()`（在`Log.e()`方法之外，但在`catch`子句内），这样您就可以追踪真正的问题是什么。如果您没有从中得到更明智的结果，请在此处发布堆栈跟踪。

编辑（见评论）：

我的 LogCat（没有过滤器）总是以正确的方式显示堆栈跟踪，但经过一番搜索后，情况似乎并非总是如此： [请参阅这个 SO question。](https://stackoverflow.com/questions/8217500/how-to-print-stacktrace-for-an-exception-android)

您应该在该方法中使用三个（！）参数`Log.e`。例子：

```
Log.e("My APP", "exception", e); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T22:49:59.807

我在 Eclipse 中运行了你的代码，它运行良好，给了我一个有效的响应。我认为这可能与 SSL 有关。您可以通过执行启用 SSL 调试`-Djavax.net.debug=all`

启用 SSL 调试后可以粘贴输出日志吗？

# jquery - 从内存中删除图像标签

> ID：12904819
> 
> 赞同：1
> 
> 时间：2012-10-15T22:14:45.010
> 
> 标签：jquery

我看过一些代码来检查是否加载了 div 上的背景图像。他们正在做的是将一个 img 标签添加到内存中，但将其存储在一个变量中，并使用它来查看图像是否通过加载事件加载。我的问题是 $img 标签是否保留在内存中，以及在调用加载事件时如何删除该标签。

```
 var $div = $('div'),
  bg = $div.css('background-image');
  if (bg) {
    var src = bg.replace(/(^url\()|(\)$|[\"\'])/g, ''),
      $img = $('<img>').attr('src', src).on('load', function() {
        // do something, maybe:
        $div.fadeIn();
      });
  }
}); 
```

[我从这篇文章中得到了上面的代码](https://stackoverflow.com/questions/5057990/how-can-i-check-if-a-background-image-is-loaded)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T22:25:17.507

[您可以使用remove()](http://api.jquery.com/remove/)删除元素。在您的情况下，新创建的`<img>`元素缓存在`$img`变量中。因此，当您想删除它时，只需执行以下操作：

```
$img.remove(); 
```

要从内存中释放变量，您可以使用：

```
delete $img; 
```

尽管如果变量范围不是全局的，那么这并不是真正必要的，因为 javascript 垃圾收集器会为您处理这些问题。

此外[load()](http://api.jquery.com/load-event/)已被弃用且跨浏览器不可靠，因此不鼓励使用它。来自 jQuery 文档：

> **与图像一起使用时加载事件的注意事项**
> 
> 开发人员尝试使用 .load() 快捷方式解决的一个常见挑战是在图像（或图像集合）完全加载时执行一个函数。应该注意几个已知的警告。这些是：
> 
> • 它不能始终如一地工作，也不可靠地跨浏览器
> • 如果图像src 设置为与以前相同的src，它不会在WebKit 中正确触发
> • 它不能正确地在DOM 树中冒泡
> • 可以停止触发已经存在于浏览器缓存中的图像

加载的一种替代方法是[这个插件](https://gist.github.com/797120/7176db676f1e0e20d7c23933f9fc655c2f120c58)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T22:53:37.033

## 将其留在垃圾收集器上，否则

只需设置`$img`变量`null`，例如

```
$img=null; 
```

实际上`$img.remove();`不会像某人在评论中提到的那样做，而且您也不必担心，因为 javascript [Garbage Collector](http://docstore.mik.ua/orelly/webprog/jscript/ch11_03.htm)会为您做这件事，并且`delete`只有在您声明没有`var`关键字的变量时才会起作用。在这种情况下，`$img=null`只是使变量成为空`null`对象。

[使用 null](http://jsfiddle.net/qe4nx/)的示例和[使用 .remove()](http://jsfiddle.net/qe4nx/1/)的示例。

# grails - “呈现为 JSON” 将 JSON 显示为文本，而不是按预期将其返回给 AJAX 调用

> ID：12904820
> 
> 赞同：0
> 
> 时间：2012-10-15T22:14:47.353
> 
> 标签：grails, spring-security

我正在导航`index`到`MyController`. 页面上的一些代码正在对in`index`进行 AJAX 调用。我希望操作将一些数据作为 JSON 返回到我的 AJAX 调用，以便我可以对数据客户端做一些事情，但不是像我想要的那样将数据作为 JSON 返回，而是将数据显示为文本。`myAction``MyController``myAction`

我的 Grails 控制器示例：

```
class MyController {
    def index() {
        render( view: "myView" )
    }

    def myAction {
        def mapOfStuff = [ "foo": "foo", "bar": "bar" ]
        render mapOfStuff as JSON
    }
} 
```

我的 JavaScript 示例：

```
$( function() {
    function callMyAction() {
        $.ajax({
            dataType: 'json',
            url: base_url + '/myController/myAction',
            success: function( data ) {
                $(function() {
                    if( data.foo ) {
                        alert( data.foo );
                    }
                    if( data.bar ) {
                        alert( data.bar );
                    }
                });
            }
        });
    }
}); 
```

我期望的是我的页面将呈现，然后我的 JavaScript 将被调用，然后将显示两个警报。相反，JSON 数组在我的浏览器窗口中显示为文本：

```
{"foo":"foo","bar":"bar"} 
```

此时，我的地址栏中 URL 的最后一段是`myAction`而不是`index`. 现在，如果我手动输入索引页面的 URL 并按刷新，一切都会按预期工作。

我有六个 AJAX 调用，我以完全相同的方式进行调用，但没有一个有问题。这里有什么交易？

**更新＃1：**

我注意到了一些事情。当我在操作中设置一个断点并在`index`操作中设置`MyController`另一个`myAction`断点时`myAction`，`index`即使我正在导航到`index`. 事实上，`index`动作中的断点永远不会被击中。这显然更接近我的问题的根本原因，但为什么会发生呢？

**更新#2：**

我正在使用 Spring Security，我注意到即使我将默认 URL 设置为...

```
grails.plugins.springsecurity.successHandler.defaultTargetUrl = '/myController' 
```

...登录时，“索引”操作中的断点`MyController`从未被击中，但`myView`已正确呈现。Spring Security 在做什么样的黑魔法，它可以在不通过我的控制器的情况下加载我的视图？

**更新#3：**

我找到了解决这个问题的方法，问题是 Spring Security 在后台做了一些奇怪的事情。所以我只是添加`alwaysUseDefault`到我的配置中并将其设置为 true，如下所示：

```
grails.plugins.springsecurity.successHandler.alwaysUseDefault = true 
```

现在我击中了在断点被击中之前的`index`动作中设置的断点，正如我所期望的那样。不幸的是，这个解决方案并不是最优的，因为用户现在总是被重定向到登录后，即使他们试图导航到不同的页面。`MyController``myAction``defaultTargetUrl`

虽然这种解决方案解决了我的问题，但它提出了一个问题，Spring Security 是如何重定向到我的`defaultTargetUrl`，它是这样设置的......

```
grails.plugins.springsecurity.successHandler.defaultTargetUrl = '/myController' 
```

...没有经过的`index`动作`MyController`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T22:47:34.957

尝试使用：

```
def mapOfStuff = [ foo: "foo", bar:"bar"] 
```

而不是将键用作 Groovy 字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T13:31:17.410

IIRC，不要`render mapOfStuff as JSON`，但是`return mapOfStuff as JSON`。它将为响应分配适当的内容类型标头。

`render()`只是一个返回 a 的函数，`String`它被渲染为`text/html`，因为 Grails 无法检测到其中的内容。`JSON`类型 OTOH 以适当的内容类型呈现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-17T13:06:13.887

明确设置适当的**响应标头。**

```
render(contentType: "text/json") {  
  def mapOfStuff = [ "foo": "foo", "bar": "bar" ]
} 
```

# c# - 对另一个子查询使用查询内的集合

> ID：12904821
> 
> 赞同：0
> 
> 时间：2012-10-15T22:14:58.367
> 
> 标签：c#, linq-to-sql

我正在写这样的查询：

```
var TheQuery = (from t in MyDC.Table1
                where ....
                select new SomeContainerModel()
                {
                    Collection1 = (from t2 in MyDC.Table2
                                   ....
                                   select new SomeModel()
                                   {
                                       SomeID = t2.SomeID
                                   }

                     Collection2 = (from x in Collection1
                                    from t3 in MyDC.Table3
                                    where x.SomeID == t3.SomeOtherID 
```

我想要做的是将 的结果`Collection1`用作`Collection2`.

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T22:18:13.107

您可以使用`let`关键字为子查询结果引入新的范围变量。

```
var theQuery = (from t in MyDC.Table1
                let subQuery = (from t2 in MyDC.Table2
                                ...
                                select new SomeModel() { SomeID = t2.SomeID })
                where ....                
                select new SomeContainerModel()
                {
                    Collection1 = subQuery,
                    Collection2 = (from x in subQuery
                                    from t3 in MyDC.Table3
                                    where x.SomeID == t3.SomeOtherID)
                }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T22:38:08.283

问题是 Collection1 与 Collection2 不兼容。您将 Collection1 转换为模型，并且无法再转换为 SQL。

我建议您将查询视为 IQuerable。直到最后，当您需要物理执行它并检索数据时。

将每个查询想象为 Transact-SQL 脚本，即使您将其与 MyDC.Table3 连接起来，您实际上也只是添加了一个子查询，例如：

```
SELECT * 
FROM Table3 a,
FROM (SELECT * FROM Table2 WHERE....) as SubQuery 
WHERE a.SomeID == SubQuery.SomeOtherID 
```

因此，请尝试使用匿名类型而不是 SomeModel();

# mysql - 这个 MySQL 查询有什么问题（#1064）？

> ID：12904828
> 
> 赞同：0
> 
> 时间：2012-10-15T22:16:07.383
> 
> 标签：mysql

请谁能告诉我这个 MySQL 查询有什么问题

```
SELECT count(items.id) AS numrows 
FROM items, subcategories 
WHERE items.`base_school` = 'UNN' 
    AND items.subcategory = subcategories.id 
    AND subcategories.parent_category = 3 
JOIN `item_images` 
    ON items.id=`item_images`.`item_id` 
```

它不断抛出这个错误：

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'JOIN `item_images`ON items.id=附近使用的正确语法`item_images`。`item_id`' 在第 1 行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T22:18:58.863

您的`WHERE`子句位置错误，试试这个：

```
SELECT count(items.id) AS numrows 
FROM items
INNER JOIN subcategories 
    ON items.subcategory = subcategories.id 
INNER JOIN item_images 
    ON items.id=item_images.item_id
WHERE items.base_school = 'UNN' 
    AND subcategories.parent_category = 3 
```

# mysql - SQL 插入已提交但在下一个请求中未找到？

> ID：12904829
> 
> 赞同：3
> 
> 时间：2012-10-15T22:16:10.660
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, activerecord, amazon-rds

我在输出“提交的请求令牌 xx”的 RequestToken 模型中放置了一个 after_commit 回调。您可以在我下面包含的日志中看到，令牌记录已提交，并且下一个请求对象上的查找说找不到它。该问题间歇性发生，如果我刷新页面，则找到记录并且请求通过。

**环境** AWS EC2 + RDS、Ubuntu 10.04、Rails 3.2.8、MySQL2 0.3.11 gem、apache2 2.2.14、phusion 乘客 3.0.11

有没有人见过这个？有什么建议么？

```
Committed Request Token S8j311QckvEjnDftNW0e7FPHsavGWTelONcsE3X1
  Rendered text template (0.0ms)
Completed 200 OK in 28ms (Views: 0.6ms | ActiveRecord: 21.8ms | Sphinx: 0.0ms)

Started GET "/oauth/authorize?oauth_token=S8j311QckvEjnDftNW0e7FPHsavGWTelONcsE3X1" for 96.236.148.63 at 2012-10-15 22:07:32 +0000
Processing by OauthController#authorize as HTML
  Parameters: {"oauth_token"=>"S8j311QckvEjnDftNW0e7FPHsavGWTelONcsE3X1"}
Completed 500 Internal Server Error in 5ms

ActiveRecord::RecordNotFound (Couldn't find RequestToken with token = S8j311QckvEjnDftNW0e7FPHsavGWTelONcsE3X1): 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:56:29.380

200不代表它得救了。可能验证失败。

# html - 如何在 UIWebview 的目录（js、图像、css）中加载本地 html 资产？(iOS)

> ID：12904830
> 
> 赞同：3
> 
> 时间：2012-10-15T22:16:13.560
> 
> 标签：html, ios, uiwebview, bundle, local

具体来说——如何在不更改原始 HTML 内容（删除目录）的情况下从它们各自的目录（images/、css/、js/）加载所有资产？

我正在使用此代码将 index.html 加载到 UIWebview 中：

```
NSURL *url = [[NSBundle mainBundle] URLForResource:@"index" withExtension:@"html"];
NSString *html = [NSString stringWithContentsOfURL:url encoding:NSUTF8StringEncoding error:nil];

NSString *path = [[NSBundle mainBundle] bundlePath];
NSURL *baseURL = [NSURL fileURLWithPath:path];

[webView loadHTMLString:html baseURL:baseURL]; 
```

然后我的html看起来像这样：

```
...
<link rel="stylesheet" type="text/css" href="css/main.css" />
<script type="text/javascript" src="js/classes.js"></script>
<script type="text/javascript" src="js/animate.js"></script>
etc... 
```

如果我删除 js/、css/ 和 images/，一切正常，因为 iOS 认为一切都在我的包的根目录中。但是，这意味着我不能跨项目使用相同的代码而不将其全部转储到一个目录中（蹩脚）。我的工程师无法处理这种混乱。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T22:24:05.580

简单：当您将文件夹添加到 Xcode 时，请确保将它们添加为文件夹引用。

![](../Images/37e129b309f643d3120c2f8397751574.png)

然后它们将作为文件夹添加到 .app 包中：

![](../Images/f7c1f2fa24e7d5315c156f8e1d319e98.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T22:24:39.293

你应该能够做到这一点。需要注意的重要一点是如何将文件添加到您的项目中。通过 Xcode 添加文件时，请确保选中“为任何添加的文件夹创建文件夹引用”，而不是“为任何添加的文件夹创建组”。

[参考](https://stackoverflow.com/questions/7334640/get-path-to-subdirectory-in-resources-folder)

# ruby-on-rails-3 - 如何使我的插件在 Rails 3.2.8 中的“供应商”以外的位置工作？

> ID：12904831
> 
> 赞同：0
> 
> 时间：2012-10-15T22:16:17.727
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2, ruby-on-rails-plugins

我按照一些我无法再次找到的说明将我的插件移动到“lib”目录。

所以我现在有这个结构：

```
/lib
/lib/plugins
/lib/plugins/plugin1
/lib/plugins/plugin1/lib
/lib/plugins/plugin1/lib/plugin1.rb 
```

我在我的`application.rb`：

```
config.autoload_paths += %W(#{config.root}/lib #{config.root}/lib/plugins) 
```

但这行不通。我究竟做错了什么？

更新：

丢弃`plugins`路径的一部分并将插件目录直接放入也不起作用。每个插件都有一个`init.rb`基本上也需要主库的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T22:39:34.443

我不确定[这些是否是您遵循的说明](http://code.coneybeare.net/how-to-convert-simple-rails-23-style-plugins)，但您可能希望插件文件夹本身位于以下根目录`lib`：

```
/lib
/lib/plugin1
/lib/plugin1/plugin1.rb 
```

您可能还需要一个初始化程序：`config/initializers/plugin1.rb`.

如果这没有帮助，请发布更多信息，说明您期望看到的内容以及它为什么不起作用。

# javascript - 如何使用Javascript检查html中的父元素是否是特定的标记名（例如跨度）

> ID：12904834
> 
> 赞同：10
> 
> 时间：2012-10-15T22:17:00.097
> 
> 标签：javascript, html

我需要检查父元素是否是跨度。我如何使用 Javascript（不是 JQuery）来做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-15T22:19:04.357

```
element.parentNode.tagName.toLowerCase() == 'span' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T22:19:19.753

```
var elem = document.getElementById("myElement"),
    isParentSpan = elem.parentNode.tagName === "span";

alert( isParentSpan ); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-15T22:22:08.617

请记住 .nodeName 返回一个大写字符串（有一些例外）。比较时 toLowerCase() 是最安全的。

http://ejohn.org/blog/nodename-case-sensitive/

```
var el = document.getElementById('test'),
    parent = el.parentElement || el.parentNode,
    parentType = el.parentElement.nodeName.toLowerCase();

if ( 'span' === parentType ) {
    alert('Parent is a span!');
} 
```

[http://jsfiddle.net/TT6jr/](http://jsfiddle.net/TT6jr/)

# awk - 处理两个文件时在 AWK 中使用数组

> ID：12904836
> 
> 赞同：2
> 
> 时间：2012-10-15T22:17:18.323
> 
> 标签：awk

我有两个文件，我使用下面的代码将它们基于密钥合并

```
file1
-------------------------------
1      a      t      p      bbb  
2      b      c      f      aaa  
3      d      y      u      bbb  
2      b      c      f      aaa  
2      u      g      t      ccc  
2      b      j      h      ccc

file2
--------------------------------
1   11   bbb  
2   22   ccc  
3   33   aaa  
4   44   aaa 
```

我使用下面的代码合并了这两个基于文件的密钥

```
awk 'NR==FNR{a[$3]=$0;next;}{for(x in a){if(x==$5) print $1,$2,$3,$4,a[x]}; 
```

我的问题是如何在变量或数组中保存 $2 的 file2 并在 a[x] 之后再次打印。
我想要的结果是：

```
1 a t p 1   11  bbb  11  
2 b c f 3   33  aaa  33  
2 b c f 4   44  aaa  44  
3 d y u 1   11  bbb  11  
2 b c f 3   33  aaa  33  
2 b c f 4   44  aaa  44  
2 u g t 2   22  ccc  22  
2 b j h 2   22  ccc  22 
```

如您所见，前 7 列是我的合并代码的结果。我需要将最后一列（a[x] 的字段 2）添加到我的结果中。

重要的：

我的下一个问题是如果我有 .awk 文件，我如何使用一些 bash 脚本代码（如（`| column -t`）或将结果发送到文件（`awk... > result.txt`）？我总是在命令提示符下使用这些代码。我可以在 .awk 文件的代码中使用它们吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T23:16:55.613

您当前的脚本是：

```
awk 'NR==FNR { a[$3]=$0; next }
             { for (x in a) { if (x==$5) print $1,$2,$3,$4,a[x] } }' 
```

（实际上，原版缺少第二个模式/动作对的第二个右括号。）

似乎您在处理`file2`之前先处理`file1`。

您不应该需要第二个代码中的循环。通过在第一阶段使用拆分来保持所需的值，您可以让自己的生活更轻松：

```
awk 'NR==FNR { c1[$3] = $1; c2[$3] = $2; next }
             { print $1, $2, $3, $4, c1[$5], c2[$5], $5, c2[$5] }' 
```

您可以对其进行升级以检查`c1[$5]`和是否`c2[$5]`已定义，如果未定义，则可能会跳过该行。

给定您的输入文件，输出为：

```
1 a t p 1 11 bbb 11
2 b c f 4 44 aaa 44
3 d y u 1 11 bbb 11
2 b c f 4 44 aaa 44
2 u g t 2 22 ccc 22
2 b j h 2 22 ccc 22 
```

给予或采用列间距，这就是所要求的。列间距可以通过使用`printf`而不是来固定`print`，或者将 OFS 设置为制表符，或者...

第1 列和第 2 列的`c1`and`c2`符号对于两列是可以的。如果您需要更多，那么您可能应该使用 2D 数组表示法：

```
awk 'NR==FNR { for (i = 1; i <= NF; i++) col[i,$3] = $i; next }
             { print $1, $2, $3, $4, col[1,$5], col[2,$5], $5, col[2,$5] }' 
```

这会产生与以前相同的输出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T23:21:39.670

只需将所有的添加`file2`到一个数组中，并使用`split`来保存您想要的位：

```
awk 'FNR==NR { two[$0]++; next } { for (i in two) { split(i, one); if (one[3] == $NF) print $1,$2,$3,$4, i, one[2] } }' file2 file1 
```

结果：

```
1 a t p 1   11   bbb   11
2 b c f 3   33   aaa   33
2 b c f 4   44   aaa   44
3 d y u 1   11   bbb   11
2 b c f 3   33   aaa   33
2 b c f 4   44   aaa   44
2 u g t 2   22   ccc   22
2 b j h 2   22   ccc   22 
```

关于你的最后一个问题；您还可以在`awk`. 这是一个管道示例`column -t`：

内容`script.awk`：

```
FNR==NR { 
    two[$0]++
    next
}

{
    for (i in two) {
        split(i, one)
        if (one[3] == $NF) { 
            print $1,$2,$3,$4, i, one[2] | "column -t"
        }
    }
} 
```

像这样运行：`awk -f script.awk file2 file1`

***编辑：***

将以下内容添加到您的 shell 脚本中：

```
results=$(awk '

    FNR==NR {
        two[$0]++
        next
    }

    {
        for (i in two) {
            split(i, one)
            if (one[3] == $NF) {
                print $1,$2,$3,$4, i, one[2] | "column -t"
            }
        }
    }
' $1 $2)

echo "$results" 
```

像这样运行：

```
./script.sh file2.txt file1.txt 
```

结果：

```
1  a  t  p  1  11  bbb  11
2  b  c  f  3  33  aaa  33
2  b  c  f  4  44  aaa  44
3  d  y  u  1  11  bbb  11
2  b  c  f  3  33  aaa  33
2  b  c  f  4  44  aaa  44
2  u  g  t  2  22  ccc  22
2  b  j  h  2  22  ccc  22 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T22:30:20.797

要实现您的要求，请在处理第一个文件的整行之后保存第二个字段，使用`a[$3]=$0 OFS $2`. 对于您的第二个问题，`awk`有一个变量来分隔输出中的字段，它是`OFS`，为其分配一个制表符并使用它。你的脚本会是这样的：

```
awk '
    BEGIN { OFS = "\t"; } 
    NR==FNR{
        a[$3]=$0 OFS $2;
        next;
    }
    {
        for(x in a){
            if(x==$5) print $1,$2,$3,$4,a[x]
        } 
    }
' file2 file1 
```

这会产生：

```
1       a       t       p       1   11   bbb    11
2       b       c       f       4   44   aaa    44
3       d       y       u       1   11   bbb    11
2       b       c       f       4   44   aaa    44
2       u       g       t       2   22   ccc    22                                                                                                                                                                                           
2       b       j       h       2   22   ccc    22 
```

# ruby-on-rails - has_many through:、多态和自引用

> ID：12904839
> 
> 赞同：1
> 
> 时间：2012-10-15T22:17:21.390
> 
> 标签：ruby-on-rails, activerecord, polymorphic-associations

我有一个包含三个模型的标记系统：`Person (People)`、`Tag`和`Tagging`。

我希望能够同时标记人员和标签（所以标记标签）

`Person`和的模型`Tagging`似乎是正确的：

```
class Person < ActiveRecord::Base

 #associations
 has_many :taggings, as: :taggable
 has_many :tags, through: :taggings

end

class Tagging < ActiveRecord::Base

 attr_accessible :taggable_id, :taggable_type

 #associations
  belongs_to :tag
  belongs_to :taggable, polymorphic: true

 end 
```

所以我能够做到`<Person_instance>.tags`并获得正确的标签。

问题来自标签。我尝试了以下方法：

```
class Tag < ActiveRecord::Base
  attr_accessible :name

  has_many :taggings
  has_many :tags, through: :taggings, source: :taggable, source_type: :'Tag'

  has_many :people, through: :taggings, source: :taggable, source_type: :'Person'

end 
```

使用此设置，标签仍然能够标记其他标签，但模型会翻转标记了哪个标签。例如，如果我正在搜索 Tag.id == 10 的标签，那么 SQL 应该搜索 taggable_id = 10，而不是 tag_id，如下所示：

```
Tag.find(10).tags
Tag Load (0.4ms)  SELECT `tags`.* FROM `tags` WHERE `tags`.`id` = 10 LIMIT 1
Tag Load (0.4ms)  SELECT `tags`.* FROM `tags` INNER JOIN 
 `taggings` ON `tags`.`id` = `taggings`.`taggable_id` 
  WHERE `taggings`.`tag_id` = 10 AND `taggings`.`taggable_type` = 'Tag' 
```

这适用于 Person，其中 SQL 搜索`taggable_id`：

```
Person.find(:last).tags
Person Load (0.4ms)  SELECT `people`.* FROM `people` ORDER BY `people`.`id` DESC LIMIT 1
Tag Load (0.4ms)  SELECT `tags`.* FROM `tags` INNER JOIN `taggings` ON 
 `tags`.`id` = `taggings`.`tag_id` WHERE `taggings`.`taggable_id` = 3 
 AND   `taggings`.`taggable_type` = 'Person' 
```

关于如何标记标签的想法将不胜感激！谢谢你。

# c - 如何在使用 XCB 启动新应用程序时获取事件

> ID：12904844
> 
> 赞同：3
> 
> 时间：2012-10-15T22:17:25.907
> 
> 标签：c, events, x11, window-managers, xcb

我正在尝试制作一个非常简单的窗口管理器用于学习目的。我正在使用`C`和`xcb`图书馆。如果启动了新应用程序，我正在尝试引发事件。

现在，我创建了一个根窗口，我可以在其中接收鼠标和键盘事件。我还在窗口顶部画了一个彩色条。当我按下回车键时，xterm 将使用 fork 和 execvp 启动。这一切都很好。

当 xterm（或我认为的任何应用程序）启动时，它会绘制在条形图的顶部（x = 0，y = 0）。我想将它移低一点（x = 0，y = 16）。我想我知道如何移动窗口，使用`xcb_configure_window`. 但我不知道如何为新启动的应用程序获取事件。

**编辑：**
经过一番折腾，我得出以下结论：
如果我像这样创建父窗口：

```
xcb_window_t window_root = screen->root;
uint32_t mask = 0;    
uint32_t values[2];
mask = XCB_CW_EVENT_MASK;
values[0] = XCB_EVENT_MASK_SUBSTRUCTURE_NOTIFY;
xcb_change_window_attributes_checked(connection, window_root, mask, values);
xcb_flush(connection); 
```

当我生成一个新终端时，我将收到 XCB_CREATE_NOTIFY。但是，我无法在屏幕上绘制任何内容，因为我没有“订阅”该`XCB_EVENT_MASK_EXPOSE`事件。如果我将 values[0] 行更改为：

```
values[0] = XCB_EVENT_MASK_SUBSTRUCTURE_NOTIFY | XCB_EVENT_MASK_EXPOSURE; 
```

我仍然会收到创建事件，但是程序启动后不会立即调用公开事件，因此我的条不会被绘制。不过，一旦我启动一个新终端，它就会得到一个暴露事件，但我的初始绘图不会发生。

我创建父窗口的旧方法是：

```
xcb_window_t window = xcb_generate_id(connection);
uint32_t mask = XCB_CW_BACK_PIXEL | XCB_CW_EVENT_MASK;
uint32_t values[2] = {screen->white_pixel, XCB_EVENT_MASK_EXPOSURE | XCB_EVENT_MASK_SUBSTRUCTURE_NOTIFY };
xcb_create_window(connection, 0, window, screen->root, 0, 0, screen->width_in_pixels, screen->height_in_pixels, 0, XCB_WINDOW_CLASS_INPUT_OUTPUT, screen->root_visual, mask, values);
xcb_map_window(connection, window); 
```

这将绘制一个白色背景并绘制我的彩色条，因为它会立即获得 XCB_EVENT_MASK_EXPOSURE 事件。但它不会得到 XCB_CREATE_NOTIFY 事件。

那么获取 XCB_CREATE_NOTIFY 事件和 XCB_EVENT_MASK_EXPOSURE 事件的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T09:58:16.823

我很傻，我修好了！

我以为我只有在启动新终端后才会得到暴露事件。但是在进入事件循环之前我什至从未画过我的栏和背景，我只在我的`XCB_EXPOSE`循环中画了它们。所以当一个新的终端启动时，expose 事件会被调用，我的栏和背景就会出现。

现在我也将绘图函数放在了我的事件循环之前，一切正常。我不知道这是否是正确/最佳的方法，但为了将来参考，请使用以下内容创建您的根屏幕：

```
xcb_window_t window_root = screen->root;
uint32_t mask = 0;    
uint32_t values[2];
mask = XCB_CW_EVENT_MASK;
values[0] = XCB_EVENT_MASK_SUBSTRUCTURE_NOTIFY;
xcb_change_window_attributes_checked(connection, window_root, mask, values);
xcb_flush(connection); 
```

您将获得公开事件，并且新启动的程序将出现在`XCB_CREATE_NOTIFY`事件中。

# node.js - 在 Socket.io 中禁用特定套接字的输出

> ID：12904847
> 
> 赞同：1
> 
> 时间：2012-10-15T22:17:53.577
> 
> 标签：node.js, socket.io

我有一组 Socket.IO 套接字。对于其中的一些，我永远不想发射，但我希望能够使用 .broadcast() 或 io.sockets.emit() 之类的东西。我还想从这些套接字接收信息。

有没有办法禁用某些套接字的输出，或者我是否需要存储活动套接字列表并手动遍历它们以模拟广播。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-05T13:23:23.290

当套接字连接时，你应该将他加入特定的房间，socket.join('roomname')，然后你可以发送 io.sockets.to('roomname').emit()，如果由于某种原因你没有希望特定套接字从该房间获取数据，您始终可以通过 socket.leave('roomname') 从特定房间删除该套接字

# javascript - 在子悬停时更改父 CSS

> ID：12904848
> 
> 赞同：2
> 
> 时间：2012-10-15T22:17:58.853
> 
> 标签：javascript, jquery, html, css

我在这个论坛上看了很多，只能找到与我的问题相反的内容，换句话说，我正在寻找如何在子 div 悬停时更改父 div 的背景，我只能找到如何更改子div，当父级悬停时。

我有 1 个带有内部提交按钮的父 div：

```
<div class="ugd_ele_normal_base">
  <input name="ugd_1" type="submit" class="ugd_ele_normal"/>
</div><!--end ugd_ele_normal_base--> 
```

我想要的是当提交按钮悬停时，父 css 更改背景。

我尝试了几件事，但似乎没有任何效果。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T22:23:59.613

我会为此使用 jQuery 和 CSS：

CSS

```
.black {
     background-color: #000000;
} 
```

jQuery

```
$(function() {
   $('.ugd_ele_normal').hover( function(){
      $(this).parent().addClass("black");
   },
   function(){
      $(this).parent().removeClass("black");
   });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T22:22:07.303

```
$('input.ugd_ele_normal').on({
    mouseenter: function() {
        $(this).parent().css('background', 'url(/folder/image1.jpg)');
    },
    mouseleave: function() {
        $(this).parent().css('background', 'url(/folder/image2.jpg)');
    }
}); 
```

或短（ER）版本：

```
$('input.ugd_ele_normal').on('mouseenter mouseleave', function(e) {
     $(this).parent()
            .css('background-color', e.type=='mouseenter'?'url(/folder/image1.jpg)':'url(/folder/image2.jpg)');
}); 
```

并检索旧图像：

```
var bgImg = $('input.ugd_ele_normal').css('background-image'),
    hvImg = 'url(/folder/image2.jpg)';

$('input.ugd_ele_normal').on('mouseenter mouseleave', function(e) {
     $(this).parent()
            .css('background-image', e.type=='mouseenter'?hvImg:bgImg);
}); 
```

或使用类：

```
.hoverClass {background: url(/folder/image2.jpg);} 
```

-

```
$('input.ugd_ele_normal').on('mouseenter mouseleave', function() {
   $(this).toggleClass('hoverClass');
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T22:23:51.857

你可以这样做。

```
$("#ugd_1").hover(function(){
   $(this).parent().css("background","red");
},
 function(){
      $(this).parent().css("background","none");
 }); 
```

​​现场演示：

[http://jsfiddle.net/Z4QDC/2/](http://jsfiddle.net/Z4QDC/2/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T22:31:21.280

我会定义一些 jquery 来做到这一点，并使用自定义类。

```
//when the document is loaded, execute the following code
$(document).read(function(){

//on this elements hover, ...
$('.ugd_ele_normal').hover( function(){
    //we add the class black to the parent on hover
  $(this).parent().addClass("black");
},
function(){
   //and remove it on exit hover.
   $(this).parent().removeClass("black");
});
}); 
```

可以在这里看到实际操作：http: [//jsfiddle.net/xBuyC/](http://jsfiddle.net/xBuyC/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T22:20:41.043

尝试：

```
$('input[name="ugd_1"]').hover(function() {
    $(this).parent().css('background-color', 'COLOR');
}); 
```

希望能帮助到你。

# r - 使用 ggplot2 的 geom_bar() 查询 - R

> ID：12904850
> 
> 赞同：6
> 
> 时间：2012-10-15T22:18:17.023
> 
> 标签：r, ggplot2

我有一个类似的数据框如下：

```
mapDF <- structure(list(var = c(11L, 3L, 4L, 15L, 19L, 17L, 1L), approvals = c(10.5233545765422, 
67.9809421770218, 9.66394835013545, 2.93736399165075, 3.36787205222721, 
4.0168261757783, 1.50969267664431)), .Names = c("var", "approvals"
), row.names = c(NA, -7L), class = "data.frame") 
```

当我尝试使用上面的数据框创建条形图时：

```
gplot <- ggplot(mapDF, aes(x= mapDF[1], y= mapDF[2])) + geom_bar() 
```

..我收到以下消息，但RStudio 的“绘图”部分**没有显示任何内容：**

```
Don't know how to automatically pick scale for object of type data.frame. Defaulting to continuous
Don't know how to automatically pick scale for object of type data.frame. Defaulting to continuous
Error: stat_bin requires the following missing aesthetics: x 
```

谁能指出我的错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-15T22:34:30.063

将@joran 的评论转化为答案：

```
ggplot(mapDF, aes(x=var, y=approvals)) + geom_bar(stat="identity") 
```

# asp.net-mvc - mvc3 路由优先级/点参数问题

> ID：12904852
> 
> 赞同：0
> 
> 时间：2012-10-15T22:18:41.413
> 
> 标签：asp.net-mvc, routing

我定义了以下路线：

```
context.MapRoute("routeCreate", "{aval}/anArea/aController/Create/{val.Id}", new { action = "Create", controller = "aController" }); 
```

在定义以下包罗万象的路线之前，哪些功能是：

```
context.MapRoute("catchallCreate", "{aval}/anArea/{controller}/Create/", new { action = "Create"}); 
```

路由由以下方式调用：

```
RedirectToAction("Create", new {val.Id}); 
```

结果 URL 转到 ?Id=1 而不是 /1，它似乎没有选择“val”。部分了。

我认为使用 {val.Id} 可能存在问题，因为我无法使用该参数语法创建约束。

更新：

也许我仍然缺少一些东西，定义了以下路线我仍然看到解决方案 ?Id=1 而不是 /1

```
public override void RegisterArea(AreaRegistrationContext context)
    {
        context.Routes.Add(
            new Route(
                "{aval}/anArea/aController/Create/{val.Id}",
                new RouteValueDictionary()
                    {
                        { "action", "Create" },
                        { "controller", "aController" },
                        { "val.Id", UrlParameter.Optional }
                    },
                null,
                new RouteValueDictionary() { { "area", "anArea" } },
                new MvcRouteHandler()));
// catchall
context.MapRoute("Create", "{aVal}/anArea/{controller}/Create", new { action = "Create" }); 
```

即使删除了 Optional 它也不起作用。第一条路线仅在删除全部内容时才有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T22:31:37.133

定义路由的顺序[很重要](http://weblogs.asp.net/scottgu/archive/2007/12/03/asp-net-mvc-framework-part-2-url-routing.aspx)。所以你需要定义`catchallCreate`after `routeCreate`。

您可能会考虑的另一件事是将 val.Id 定义为可选：

```
routes.Add(new Route("{aval}/anArea/aController/Create/{val.Id}",
                     new RouteValueDictionary()
                         {
                             {"action", "Create"},
                             {"controller", "aController"},
                             {"val.Id", UrlParameter.Optional}
                         },
                     new MvcRouteHandler())); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-10T23:45:59.137

我最近遇到了类似的情况，这是我在所有搜索中能找到的最接近的东西。

我的问题更多是由于尝试为我的虚线参数提供默认值而导致的。对我有用的是以下内容：

```
context.MapRoute("routeCreate", 
                 "{aval}/anArea/aController/Create/{val.Id}",
                 new 
                 {
                    action = "Create",
                    controller = "aController"
                 });

var route = (Route)context.Routes["routeCreate"];
route.Defaults.add("val.Id", UrlParameter.Optional); 
```

由于其他控制器在其他区域共享相同的名称，[另一个答案的](https://stackoverflow.com/a/12904955/1441014)路由创建方法对我不起作用。

是的，这将使[史蒂夫](https://stackoverflow.com/a/12904955/1441014)建议的包罗万象的路线变得不必要。

# c# - 用 MySQL 数据填充 Datagridview

> ID：12904854
> 
> 赞同：5
> 
> 时间：2012-10-15T22:18:49.283
> 
> 标签：c#, mysql, datagridview

我尝试了几次让它工作，但它只是没有用 mysql 数据填充 datagridview，这是我的代码：

```
string connectionString = "SERVER=localhost;DATABASE=shootsource;UID=root;PASSWORD=;";
        string sql = "SELECT * FROM characters";
        MySqlConnection connection = new MySqlConnection(connectionString);
        connection.Open();
        sCommand = new MySqlCommand(sql, connection);
        sAdapter = new MySqlDataAdapter(sCommand);
        sBuilder = new MySqlCommandBuilder(sAdapter);
        sDs = new DataSet();
        sAdapter.Fill(sDs, "characters");
        sTable = sDs.Tables["characters"];
        connection.Close();
        dataGridView1.DataSource = sDs.Tables["characters"];
        dataGridView1.ReadOnly = true;
        dataGridView1.SelectionMode = DataGridViewSelectionMode.FullRowSelect; 
```

它仅显示 mysql 表“字符”中的列：id、名称、时间等...我如何从数据库中填充它？

这是问题的图像：

![在此处输入图像描述](../Images/c760e66c519efd0502d7907ae26285fc.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-08-12T16:55:30.107

```
 private void MySQL_ToDatagridview()
    {
        //VarribleKeeper.MySQLConnectionString = your connection string
       //info being your table name
        MySqlConnection mysqlCon = new  

        MySqlConnection(VarribleKeeper.MySQLConnectionString);
        mysqlCon.Open();

        MySqlDataAdapter MyDA = new MySqlDataAdapter();
        string sqlSelectAll = "SELECT * from info";
        MyDA.SelectCommand = new MySqlCommand(sqlSelectAll, mysqlCon);

        DataTable table = new DataTable();
        MyDA.Fill(table);

        BindingSource bSource = new BindingSource();
        bSource.DataSource = table;

        dataGridView1.DataSource = bSource;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T22:53:35.507

设置 DataSource 后，您需要执行 DataBind

```
dataGridView1.DataBind(); 
```

# python - 如何有效地将字符串与一组通配符字符串匹配？

> ID：12904860
> 
> 赞同：4
> 
> 时间：2012-10-15T22:19:32.527
> 
> 标签：python

我正在寻找一种将单个字符串与一组通配符字符串进行匹配的解决方案。例如

```
>>> match("ab", ["a*", "b*", "*", "c", "*b"])
["a*", "*", "*b"] 
```

输出的顺序并不重要。

我将有大约 10^4 个通配符字符串进行匹配，并且我将进行大约 10^9 个匹配调用。这意味着我可能不得不像这样重写我的代码：

```
>>> matcher = prepare(["a*", "b*", "*", "c", "*b"]
>>> for line in lines: yield matcher.match("ab")
["a*", "*", "*b"] 
```

我已经开始用 Python 编写一个处理通配符的 trie 实现，我只需要正确处理这些极端情况。尽管如此，我还是很想听听；**你会如何解决这个问题？是否有任何 Python 库可以让我更快地解决这个问题？**

到目前为止的一些见解：

*   命名 (Python, re) 正则表达式在这里对我没有帮助，因为它们只会返回一个匹配项。
*   [pyparsing](http://pyparsing.wikispaces.com/)似乎是一个很棒的库，但是文档很少，而且在我看来，它不支持匹配多个模式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T05:09:49.293

您可以在 Aho-Corasick 算法实现（或类似算法）的帮助下使用[re2 库](http://code.google.com/p/re2/)`FilteredRE2`中的类。来自[re2 文档](http://swtch.com/~rsc/regexp/regexp3.html)：

> *必需的子字符串。*假设您有一种有效的方法来检查字符串列表中的哪些作为子字符串出现在大文本中（例如，您可能实现了 Aho-Corasick 算法），但现在您的用户也希望能够高效地进行正则表达式搜索. 正则表达式中通常包含较大的文字字符串；如果可以识别它们，则可以将它们输入到字符串搜索器中，然后可以使用字符串搜索器的结果来过滤所需的正则表达式搜索集。FilteredRE2 类实现了这种分析。给定一个正则表达式列表，它遍历正则表达式来计算一个涉及文字字符串的布尔表达式，然后返回字符串列表。例如，FilteredRE2 将 (hello|hi)world[az]+foo 转换为布尔表达式“(helloworld OR hiworld) AND foo”并返回这三个字符串。给定多个正则表达式，FilteredRE2 将每个表达式转换为布尔表达式并返回所有涉及的字符串。然后，在被告知存在哪些字符串之后，FilteredRE2 可以评估每个表达式以识别可能存在的正则表达式集。这种过滤可以显着减少实际正则表达式搜索的次数。FilteredRE2 可以评估每个表达式以识别可能存在的正则表达式集。这种过滤可以显着减少实际正则表达式搜索的次数。FilteredRE2 可以评估每个表达式以识别可能存在的正则表达式集。这种过滤可以显着减少实际正则表达式搜索的次数。
> 
> 这些分析的可行性主要取决于其输入的简单性。第一个使用 DFA 形式，而第二个使用已解析的正则表达式 (Regexp*)。如果 RE2 在其正则表达式中允许非正则特征，这种分析会更加复杂（甚至可能是不可能的）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-15T22:21:44.553

似乎[Aho-Corasick 算法](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)会起作用。[esmre](http://code.google.com/p/esmre/)似乎在做我正在寻找的东西。我从[这个问题](https://stackoverflow.com/questions/7049894/how-to-efficiently-match-an-input-string-against-several-regular-expressions-at)中得到了这个信息。

# selenium - Playframework selenium 自动测试调试

> ID：12904864
> 
> 赞同：1
> 
> 时间：2012-10-15T22:19:49.680
> 
> 标签：selenium, playframework, playframework-1.x

我正在开发一个 play 1 应用程序并使用 selenium 对其进行测试。在某些情况下，当浏览器中的正常测试（播放测试）成功时，播放自动测试会失败。这可能是由于 js/ajax 的不同行为，或者我这边的开发错误。

有没有办法获得更多关于无头浏览器中发生的事情的反馈？例如，assertTitle 确实提供了一些反馈，因为在测试结果 HTML 中显示了找到的标题。

有没有办法在给定点获得完整的响应，或者任何其他有用的反馈来调试应用程序和测试用例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:27:35.980

如果你能提供更多关于你的测试中所有事情都失败的细节，提供一些你正在编写的代码示例，那就更好了。

即使我在播放自动测试中运行硒测试时遇到了很多问题，你也可以参考这个链接来了解我们的问题[播放自动测试问题](https://groups.google.com/forum/?fromgroups=#!topic/play-framework/1fnGj4Lwm5I)

调试 selenium 测试的最佳方法是使用 echo 并查看它返回的结果。

# clojure - 如何在 Clojure 项目中安装依赖项

> ID：12904865
> 
> 赞同：12
> 
> 时间：2012-10-15T22:19:58.150
> 
> 标签：clojure, seesaw

这是一个菜鸟问题，所以如果我冒犯了某人，我很抱歉。

但是如何在 *nix 计算机上安装跷跷板？是的，我已经阅读了 README.MD 文件，但是 project.clj 如何知道在哪里可以找到库 jar（例如跷跷板）？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-15T23:37:49.097

编辑 project.clj 并将依赖项（项目标识信息和版本的向量）添加到 project.clj 中的 :dependencies 向量中。

依赖声明如下所示：您可以通过在[http://clojars.org](http://clojars.org)`[seesaw "1.4.2"]`上搜索跷跷板找到它。

您的项目文件至少应类似于：

```
 (defproject my-awesome-gui-application "0.1.0-SNAPSHOT"
  :description "FIXME: write description"
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [seesaw "1.4.2"]]) 
```

如果您使用的是更新版本的 leiningen，您可以键入`lein deps :tree`以查看您的依赖关系树。换句话说，您可以看到实际使用了哪些库，即。您声明的那些及其传递依赖项。

```
 $ lein deps :tree
 [org.clojure/clojure "1.4.0"]
 [seesaw "1.4.2"]
   [com.jgoodies/forms "1.2.1"]
   [com.miglayout/miglayout "3.7.4"]
   [j18n "1.0.1"]
   [org.fife.ui/rsyntaxtextarea "2.0.3"]
   [org.swinglabs.swingx/swingx-core "1.6.3"]
     [org.swinglabs.swingx/swingx-action "1.6.3"]
     [org.swinglabs.swingx/swingx-autocomplete "1.6.3"]
       [org.swinglabs.swingx/swingx-common "1.6.3"]
     [org.swinglabs.swingx/swingx-painters "1.6.3"]
     [org.swinglabs.swingx/swingx-plaf "1.6.3"] 
```

如果您使用的是旧版本的 leiningen，请键入`lein deps`并查看 ./libs 以查看获取了哪些 jar（新版本的 lein 更智能，并且直接使用 ~/.m2 中的 jar，而不是将它们复制到您的项目中。目录~/.m2 是您本地 Maven 存储库的位置。Leiningen 处理 Maven 并下载您指定的所有依赖项，因此您不必直接担心 Maven。）

我在 ~/.m2 中提到了 Maven 和您的本地 maven 存储库。运气好的话，您可能根本不需要考虑 Maven（除了浏览 maven Central 以查找 Java 库以粘贴在 project.clj 中），但有时您可能会怀疑 jar 已损坏或其他原因这种效果，很高兴知道您可以通过删除 .m2 存储库来消除该状态。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-15T22:27:58.550

project.clj 文件指定[leiningen](https://github.com/technomancy/leiningen)的项目配置。

Leiningen 下载并安装 project.clj 文件中指定的依赖项并启动项目/运行 repl 进程/将项目编译为 java jar/其他。请参阅上面的链接。简而言之，leiningen 是您的基本操作系统和基本的基于 java 的 clojure 运行时/编译器之间最流行的粘合剂。

通常，您不必安装任何 clojure 库（甚至是 clojure）。除非您需要额外的库来开发/调试当前项目（通常不需要），否则您只需安装 leiningen，leiningen 将为您要运行的项目安装依赖项。

更具体地说：leiningen 通过委托给[maven](http://maven.apache.org/)获取其下载位置/安装说明，这是一个非常*有趣*的项目。但如果你的时间很宝贵，可能不值得仔细研究。

# android - 是否有带有标题的容器的库存小部件？

> ID：12904875
> 
> 赞同：0
> 
> 时间：2012-10-15T22:21:24.290
> 
> 标签：android, android-widget

请参阅下面的屏幕截图。

是否有一些系统（库存）“部分”小部件，我可以在其中设置子小部件和标题，Android 将设置其他所有内容（事实标题为粗体，背景中有额外颜色）或者这是定制的，例如，通过将文本框定期放入海军蓝中，按照逻辑上的节节要求？

![3 个部分可见](../Images/591cc6b8dfde9fd386cf5abc57a7ed75.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T09:40:29.467

这些是 的子类`PreferencesActivity`，提供这些子标题。

# php - F5后如何保存页面状态

> ID：12904876
> 
> 赞同：1
> 
> 时间：2012-10-15T22:21:30.047
> 
> 标签：php, javascript

按 F5 后如何保存页面状态。（使用 php 或 javascript）

我有这个页面，如果我按下按钮 1，div 1 就会消失，如果你再次按下 div 1，它会重新出现。按钮 2 具有相同的功能。有什么方法可以让我按下按钮 1（或按钮 2）消失 div，然后如果我按下 F5 继续隐藏 div1（或 div2），？？

```
<input type="submit" id="button1" name="button1" value="ID1"><br/>

    <div id="div1" name="div1"/> 
    <b>Hello1</b><br>
    <img src="pic1.png" height="100px" width="100px" /> 
    </div>
<input type="submit" id="button2" name="button2" value="ID2"><br/>

    <div id="div2" name="div2"/> 
    <b>Hello2</b><br>
    <img src="pic2.png" height="100px" width="100px" /> 
    </div>
<script>
 $(document).ready(function(){
        $("#button1").toggle(function(){
            $("#div1").hide();
        }, 
        function(){
            $("#div1").show();
        });
    });
    //
    $(document).ready(function(){
        $("#button2").toggle(function(){
            $("#div2").hide();
        }, 
        function(){
            $("#div2").show();
        });
    });
</script> 
```

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T22:25:30.407

那么 Cookies 可以完成保存最后一个状态等的技巧。如果您不确定 html5 在所有浏览器上都可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-15T22:24:02.873

一种方法是为此使用 HTML5 历史记录。

```
var state = { div1: true, div2: false };
history.pushState(state, 'Page', 'mypage/10'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T13:03:10.253

本地存储

当你想在本地保存大量数据时，你还有另一个机会——使用本地存储（从 HTML5 开始）。您可以直接使用 JavaScript 或使用可用的 jQuery 插件之一来完成。

例如，使用 totalStorage：

```
 var scores = new Array();
scores.push({'name':'A', points:10});
scores.push({'name':'B', points:20});
scores.push({'name':'C', points:0});
$.totalStorage('scores', scores); 
```

# javascript - 通过动态操作在 Javascript 中获取 Oracle Apex 项目值

> ID：12904879
> 
> 赞同：0
> 
> 时间：2012-10-15T22:21:40.293
> 
> 标签：javascript, oracle-apex

我正在尝试从动态操作中获取 Oracle Apex 页面项目的价值。但是当我尝试将它的值分配给 javascript 变量时出现了一些错误。我试过使用：

```
var posisi = $v(‘P1_NAME’); 
```

但它让我给出“意外的标识符”错误。

然后，我尝试使用：

```
var posisi=document.getElementById( 'P1_NAME' ).value; 
```

它没有给出任何错误，但是值是“未定义”。为了确保，我显示 P1_NAME 并且它有一个值。

有什么建议吗？

# c# - 从 C# 发布隐藏字段和值

> ID：12904885
> 
> 赞同：0
> 
> 时间：2012-10-15T22:22:04.960
> 
> 标签：c#, .net, xml, cxml

嗨，我正在尝试在 c# 中实现以下目标，我想将 xml 数据发布到 cxml-urlencoded 是隐藏字段的 url。

```
<FORM METHOD=POST ACTION=<%= url%>>
<INPUT TYPE=HIDDEN NAME="cxml-urlencoded" VALUE="<% CreateCXML toUser,
fromUser, buyerCookie, unitPrice, supPartId, supPartAuxId, desc%>">
<INPUT TYPE=SUBMIT value=BUY>
</FORM> 
```

我试过这样做

```
string  myurl=(uri+Server.UrlEncode(str1));
      Response.Write(@"<a input type=""hidden"" name=""cxml-urlencoded"" value=""myurl""></a>"); 
      Response.Close(); 
```

任何想法如何最好地去做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T22:29:33.167

在页面中插入一个 HiddenField 服务器控件

```
<asp:HiddenField runat="server" ID="hdXML"/> 
```

并将后面代码中隐藏字段中的值设置为

```
hdXml.Value = CreateCXML(toUser, fromUser, buyerCookie, unitPrice, supPartId, supPartAuxId, desc); 
```

确保您声明了 CreateCXML 函数并返回字符串。

# windows - 重新命名一套 Windows 产品

> ID：12904892
> 
> 赞同：1
> 
> 时间：2012-10-15T22:22:57.603
> 
> 标签：windows, branding

我有一套想要重新命名的 Windows 产品。有些是 DLL，有些是 EXE。有些是 C++，有些是基于 .NET。

品牌信息的类型主要是字符串，但有时可能包括图像。

我想到了几种方法，但没有一个跳出来：

*   使用编译器指令：使用不同的预处理器定义构建相同的项目
*   二进制补丁：构建程序集后，使用工具注入适当的信息
*   抽象品牌：针对 IbrandingProvider 对应用程序进行编码，并在 DLL 中实现提供程序
*   本地修改元数据文件：使用适当的信息在自动构建过程中对所有 AssemblyInfo.cs / *.rc 执行本地编辑，并为每个品牌构建

我们的 10 种产品都有这个问题，每个产品都有两个知名品牌。

还有其他方法可以考虑吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T22:55:12.823

如果这些是作为 Windows Installer 程序包（.msi 文件）提供给客户的 Windows 应用程序，您可以开发一个基本的、品牌中立的程序包，然后可以接收提供品牌的“重大升级”。msi[主要升级](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/da946739-9efc-4bf0-8a9a-6f6ead3c4a34)会更改 ProductCode 并有效地将产品更改为另一种产品。如果您提供包含基本和升级的[多包安装](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/c4a0f4d8-818d-4e60-908b-adaa2a54de95)，您的客户将只有一个 .msi 包要安装。

# c# - 使用 C# 在谷歌地图上画线

> ID：12904894
> 
> 赞同：-6
> 
> 时间：2012-10-15T22:23:35.300
> 
> 标签：c#, javascript, asp.net, google-maps, google-maps-api-3

我正在使用 C# 使用 Google MAP 集成。现在我想创建屏幕线功能。简而言之，我只想在 Google Map 上的点击事件上的两点之间进行绘制。

如果您需要详细说明问题，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T03:21:16.687

以下是使用 Javascript API v3 的方法：

[https://developers.google.com/maps/documentation/javascript/overlays#Polylines](https://developers.google.com/maps/documentation/javascript/overlays#Polylines)

但听起来您可能正在使用某种在 C# 中为您执行此操作的控件。我猜是因为你没有提供更多关于你使用什么来创建地图的信息，但是让我们假设你正在使用：

[http://googlemap.codeplex.com/](http://googlemap.codeplex.com/)

（这是一个很棒的用于 WebForms 的 Google Maps 控件）。此控件有一个折线扩展器，可以满足您的需要，位于此处：

[http://googlemap.codeplex.com/wikipage?title=GoogleMap%20Control%206.0&referringTitle=Documentation](http://googlemap.codeplex.com/wikipage?title=GoogleMap%20Control%206.0&referringTitle=Documentation)

可在此处下载：

[http://googlemap.codeplex.com/wikipage?title=GooglePolyline6](http://googlemap.codeplex.com/wikipage?title=GooglePolyline6)

在他们的文档中有关于 PolyLine 类的信息：

[http://googlemap.artembg.com/docs/](http://googlemap.artembg.com/docs/)

如果这不能回答您的问题，请提供有关您正在使用的 Google 地图实施的更多信息。

# apache - 如何从 Ant 构建脚本中排除名称相似的文件？

> ID：12904896
> 
> 赞同：1
> 
> 时间：2012-10-15T22:23:49.493
> 
> 标签：apache, ant, build, build.xml

我正在通过 ant 构建脚本将 LESS 转换为 CSS。如果我之前没有转换过该文件，我只想转换 LESS 文件。

如何检查 CSS 文件的一个文件夹，然后从文件集中排除该 LESS 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:37:54.933

您没有说明如何转换文件，但假设您有一个在文件集上运行的转换任务，您需要一个[依赖选择器](http://ant.apache.org/manual/Types/selectors.html#dependselect)，如下所示：

```
<fileset dir="less">
    <include name="**/*.less" />
    <depend targetdir="css">
        <globmapper from="*.less" to="*.css" />
    </depend>
</fileset> 
```

这将仅包括目录下`less`没有相应 .css 文件的`css`目录下的 .less 文件。此外，如果 .less 文件比相应的 .css 文件更新，它将包含在文件集中进行转换。

# android - 使用 Spongy Castle 设置 SSLContext

> ID：12904904
> 
> 赞同：1
> 
> 时间：2012-10-15T22:24:32.880
> 
> 标签：android, ssl, bouncycastle, spongycastle

如何使用 Spongy Castle 使用 TLS 设置 SSLContext？我在网上搜索，但找不到任何好的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T15:25:15.773

这实际上是做不到的，因为 Bouncy Castle 和扩展的 Spongy Castle 不附带 JSSE 提供程序。使用平台默认版本（不要指定提供者）。当您需要系统 JCE 提供程序中未包含的特定算法时，请显式指定 SC 提供程序。

# vba - 动态 IF 语句

> ID：12904908
> 
> 赞同：1
> 
> 时间：2012-10-15T22:24:41.873
> 
> 标签：vba, excel

有没有办法在 Excel VBA 中构建动态 if 语句？基本上我正在尝试创建一个参数化计算，用户将能够输入不同的变量，即

变量 1 “变量 2” “变量 3”

在这种情况下，变量 1 是单元格引用 变量 2 将是 = 或 < 或 > 等变量 2 将是单元格引用

因此，我的 If 语句将是 If variable1 variable2 variable3 then "y" else "n"

当我在代码中尝试时

```
 If FinalvaluesArray(ArrayRow, 5) & SRCBook.Sheets("Filter Parameters").Cells(2, 4).Value & SRCBook.Sheets("Filter Parameters").Cells(2, 3).Value Then wbNew.Sheets("Output Table").Range(ResultString) = "Y" Else wbNew.Sheets("Output Table").Range(ResultString) = N" 
```

它似乎没有正确评估表达式，但似乎总是返回一个真值。反正有没有建立这样的功能？

我首先尝试将表达式构建为字符串，并且代码如下：

```
EvaluateFunction = FinalvaluesArray(ArrayRow, 5) & SRCBook.Sheets("Filter Parameters").Cells(2, 4).Value & SRCBook.Sheets("Filter Parameters").Cells(2, 3).Value

If EvaluateFunction= true Then "Y" Else "N" 
```

但这也没有用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T22:32:40.513

如果您相信变量的来源，那么您可以简单地做

```
If Application.Evaluate(FinalvaluesArray(ArrayRow, 5) & SRCBook.Sheets("Filter Parameters").Cells(2, 4).Value & SRCBook.Sheets("Filter Parameters").Cells(2, 3).Value) Then
    ....
End If 
```

否则这可能会运行任意代码，因此您可能需要在执行此操作之前检查这些值是否为数字和/或运算符。

# haskell - 如果库需要不同版本的 `base` 怎么办？

> ID：12904909
> 
> 赞同：5
> 
> 时间：2012-10-15T22:24:56.733
> 
> 标签：haskell, cabal

我正在尝试安装需要与我安装的版本不同的基础版本的软件包（我有`4.6.0.0`，他们需要`< 4.6`）。如何在我的系统上安装这些？

编辑：这些包实际上需要较旧的包才能构建，而不仅仅是 .cabal 约束。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T22:38:56.413

由于您无法重新安装`base`，因此在更新之前安装这些软件包的唯一方法是获取源代码，

```
cabal unpack foo 
```

然后编辑`foo.cabal`，更改那里的上限`base`，增加包版本（附加 a `.1`）以便在安装其他包时`cabal`不会认为它已损坏，因为`.cabal`它知道的文件（来自包索引）说它需要不同的版本,`base`和

```
cabal install 
```

从你解压到的目录。

由于 base-4.6 有一些重大变化；和超类已从 中删除，并且`Eq`不再作为超类，可能需要通过添加来修复代码，或添加某些函数的约束以使包编译。`Show``Num``Bits``Num``Eq``Show``Num`

这很不方便，但要在几周内使用最新的 GHC 版本来更新自己的价格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T22:32:10.810

如果您只想让您的程序之一依赖这些软件包，您可以`cabal-dev`使用`cabal`. 前者将包的本地副本安装`cabal-dev`在当前目录的路径中。要安装它，只需运行：

```
cabal install cabal-dev 
```

为了可移植性，您可以在 makefile 中添加类似这样的内容：

```
CABAL ?= cabal

build :
    $(CABAL) build --builddir=$(BUILD_PATH) 
```

然后在您的 Bash 设置中：

```
CABAL=cabal-dev
export CABAL 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-16T02:37:57.243

如果一个包与您当前拥有的基础不兼容（即仅更改约束是不够的），您唯一的选择是自己移植该包或使用提供正确版本基础的旧 ghc。

不过，您可能需要先与包维护者联系。一个开发分支可能已经支持你需要的东西，他们只需要一点刺激就可以发布它。

# python - 如何使用 python/matplotlib 为 3d 绘图设置“相机位置”？

> ID：12904912
> 
> 赞同：166
> 
> 时间：2012-10-15T22:25:18.163
> 
> 标签：python, matplotlib, mplot3d

我正在学习如何使用 mplot3d 生成漂亮的 3d 数据图，到目前为止我很高兴。我现在想做的是一个旋转表面的小动画。为此，我需要为 3D 投影设置相机位置。我想这一定是可能的，因为在交互式使用 matplotlib 时可以使用鼠标旋转表面。但是我怎样才能从脚本中做到这一点？我在 mpl_toolkits.mplot3d.proj3d 中发现了很多转换，但我不知道如何将它们用于我的目的，也没有找到任何我想要做的例子。

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2012-10-15T23:31:00.633

通过“相机位置”，听起来您想要调整用于查看 3D 绘图的仰角和方位角。您可以使用 进行设置[`ax.view_init`](https://matplotlib.org/stable/api/_as_gen/mpl_toolkits.mplot3d.axes3d.Axes3D.html?highlight=view_init#mpl_toolkits.mplot3d.axes3d.Axes3D.view_init)。我使用下面的脚本首先创建了绘图，然后我确定了一个好的海拔，或者`elev`，从中查看我的绘图。然后我调整了方位角，或者`azim`，以改变我的绘图周围的完整 360 度，在每个实例中保存图形（并在保存绘图时注意哪个方位角）。对于更复杂的相机平移，您可以调整仰角和角度以达到所需的效果。

```
 from mpl_toolkits.mplot3d import Axes3D
    ax = Axes3D(fig)
    ax.scatter(xx,yy,zz, marker='o', s=20, c="goldenrod", alpha=0.6)
    for ii in xrange(0,360,1):
        ax.view_init(elev=10., azim=ii)
        savefig("movie%d.png" % ii) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-09-15T23:25:25.227

将相机位置应用到新绘图会很方便。所以我绘图，然后用鼠标改变距离来移动绘图。然后尝试复制视图，包括另一个图上的距离。我发现 axx.ax.get_axes() 为我提供了一个带有旧 .azim 和 .elev 的对象。

在 Python 中...

```
axx=ax1.get_axes()
azm=axx.azim
ele=axx.elev
dst=axx.dist       # ALWAYS GIVES 10
#dst=ax1.axes.dist # ALWAYS GIVES 10
#dst=ax1.dist      # ALWAYS GIVES 10 
```

后来的3d图...

```
ax2.view_init(elev=ele, azim=azm) #Works!
ax2.dist=dst                       # works but always 10 from axx 
```

编辑 1... 好的，相机位置是关于 .dist 值的错误思考方式。它作为整个图形的一种 hackey 标量乘数，位于一切之上。

这适用于视图的放大/缩放：

```
xlm=ax1.get_xlim3d() #These are two tupples
ylm=ax1.get_ylim3d() #we use them in the next
zlm=ax1.get_zlim3d() #graph to reproduce the magnification from mousing
axx=ax1.get_axes()
azm=axx.azim
ele=axx.elev 
```

后期图...

```
ax2.view_init(elev=ele, azim=azm) #Reproduce view
ax2.set_xlim3d(xlm[0],xlm[1])     #Reproduce magnification
ax2.set_ylim3d(ylm[0],ylm[1])     #...
ax2.set_zlim3d(zlm[0],zlm[1])     #... 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2020-11-15T20:22:33.857

**最小的例子变化`azim`，`dist`和`elev`**

向解释的内容添加一些简单的示例图像：[https ://stackoverflow.com/a/12905458/895245](https://stackoverflow.com/a/12905458/895245)

这是我的测试程序：

```
#!/usr/bin/env python3

import sys

import matplotlib.pyplot as plt
from matplotlib import cm
from matplotlib.ticker import LinearLocator, FormatStrFormatter
import numpy as np

fig = plt.figure()
ax = fig.gca(projection='3d')

if len(sys.argv) > 1:
    azim = int(sys.argv[1])
else:
    azim = None
if len(sys.argv) > 2:
    dist = int(sys.argv[2])
else:
    dist = None
if len(sys.argv) > 3:
    elev = int(sys.argv[3])
else:
    elev = None

# Make data.
X = np.arange(-5, 6, 1)
Y = np.arange(-5, 6, 1)
X, Y = np.meshgrid(X, Y)
Z = X**2

# Plot the surface.
surf = ax.plot_surface(X, Y, Z, linewidth=0, antialiased=False)

# Labels.
ax.set_xlabel('x')
ax.set_ylabel('y')
ax.set_zlabel('z')

if azim is not None:
    ax.azim = azim
if dist is not None:
    ax.dist = dist
if elev is not None:
    ax.elev = elev

print('ax.azim = {}'.format(ax.azim))
print('ax.dist = {}'.format(ax.dist))
print('ax.elev = {}'.format(ax.elev))

plt.savefig(
    'main_{}_{}_{}.png'.format(ax.azim, ax.dist, ax.elev),
    format='png',
    bbox_inches='tight'
) 
```

不带参数运行它会给出默认值：

```
ax.azim = -60
ax.dist = 10
ax.elev = 30 
```

main_-60_10_30.png

[![在此处输入图像描述](../Images/8530aa9dd0d83e283a945c9e7e3aa463.png)](https://i.stack.imgur.com/powCp.png)

**各不相同`azim`**

方位角是围绕 z 轴的旋转，例如：

*   0 表示“从 +x 看”
*   90 表示“从 +y 看”

main_-60_10_30.png

[![在此处输入图像描述](../Images/8530aa9dd0d83e283a945c9e7e3aa463.png)](https://i.stack.imgur.com/powCp.png)

main_0_10_30.png

[![在此处输入图像描述](../Images/c9fa596b0ea63429cc6c6131bf5c7328.png)](https://i.stack.imgur.com/603Oy.png)

main_60_10_30.png

[![在此处输入图像描述](../Images/4ef298d33b189efbe97e10cfa09ef274.png)](https://i.stack.imgur.com/YL67g.png)

**各不相同`dist`**

`dist`似乎是数据坐标中与中心可见点的距离。

main_-60_10_30.png

[![在此处输入图像描述](../Images/8530aa9dd0d83e283a945c9e7e3aa463.png)](https://i.stack.imgur.com/powCp.png)

main_-60_5_30.png

[![在此处输入图像描述](../Images/1b0033a880e61ea25d517b8e84869c4d.png)](https://i.stack.imgur.com/UP8PB.png)

main_-60_20_-30.png

[![在此处输入图像描述](../Images/c347f60d02d34a55a6b4c9f8fb793a9b.png)](https://i.stack.imgur.com/cCN1J.png)

**各不相同`elev`**

由此我们了解到，这`elev`是眼睛和 xy 平面之间的角度。

main_-60_10_60.png

[![在此处输入图像描述](../Images/3a41cc81d3868c1c17725846c09511d8.png)](https://i.stack.imgur.com/xu6Pg.png)

main_-60_10_30.png

[![在此处输入图像描述](../Images/8530aa9dd0d83e283a945c9e7e3aa463.png)](https://i.stack.imgur.com/powCp.png)

main_-60_10_0.png

[![在此处输入图像描述](../Images/88b2afe6107d740c13ee7eb6424acc72.png)](https://i.stack.imgur.com/JJIqa.png)

main_-60_10_-30.png

[![在此处输入图像描述](../Images/0c1a1fe1f4b3d672ecb520820be7eff5.png)](https://i.stack.imgur.com/lBLg3.png)

在 matpotlib==3.2.2 上测试。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-08-19T12:04:38.810

尝试以下代码找到最佳相机位置

# 使用 if 子句中提到的键盘键移动绘图的视角

*使用**print**获取相机位置*

```
def move_view(event):
    ax.autoscale(enable=False, axis='both') 
    koef = 8
    zkoef = (ax.get_zbound()[0] - ax.get_zbound()[1]) / koef
    xkoef = (ax.get_xbound()[0] - ax.get_xbound()[1]) / koef
    ykoef = (ax.get_ybound()[0] - ax.get_ybound()[1]) / koef
    ## Map an motion to keyboard shortcuts
    if event.key == "ctrl+down":
        ax.set_ybound(ax.get_ybound()[0] + xkoef, ax.get_ybound()[1] + xkoef)
    if event.key == "ctrl+up":
        ax.set_ybound(ax.get_ybound()[0] - xkoef, ax.get_ybound()[1] - xkoef)
    if event.key == "ctrl+right":
        ax.set_xbound(ax.get_xbound()[0] + ykoef, ax.get_xbound()[1] + ykoef)
    if event.key == "ctrl+left":
        ax.set_xbound(ax.get_xbound()[0] - ykoef, ax.get_xbound()[1] - ykoef)
    if event.key == "down":
        ax.set_zbound(ax.get_zbound()[0] - zkoef, ax.get_zbound()[1] - zkoef)
    if event.key == "up":
        ax.set_zbound(ax.get_zbound()[0] + zkoef, ax.get_zbound()[1] + zkoef)
    # zoom option
    if event.key == "alt+up":
        ax.set_xbound(ax.get_xbound()[0]*0.90, ax.get_xbound()[1]*0.90)
        ax.set_ybound(ax.get_ybound()[0]*0.90, ax.get_ybound()[1]*0.90)
        ax.set_zbound(ax.get_zbound()[0]*0.90, ax.get_zbound()[1]*0.90)
    if event.key == "alt+down":
        ax.set_xbound(ax.get_xbound()[0]*1.10, ax.get_xbound()[1]*1.10)
        ax.set_ybound(ax.get_ybound()[0]*1.10, ax.get_ybound()[1]*1.10)
        ax.set_zbound(ax.get_zbound()[0]*1.10, ax.get_zbound()[1]*1.10)

    # Rotational movement
    elev=ax.elev
    azim=ax.azim
    if event.key == "shift+up":
        elev+=10
    if event.key == "shift+down":
        elev-=10
    if event.key == "shift+right":
        azim+=10
    if event.key == "shift+left":
        azim-=10

    ax.view_init(elev= elev, azim = azim)

    # print which ever variable you want 

    ax.figure.canvas.draw()

fig.canvas.mpl_connect("key_press_event", move_view)

plt.show() 
```

# ios - 为 iPad 3 优化图像绘制

> ID：12904917
> 
> 赞同：0
> 
> 时间：2012-10-15T22:25:40.157
> 
> 标签：ios, image, optimization, retina-display, ipad-3

我正在尝试找到在 iPad 3 上的 iOS 中绘制图像的最优化方法。我正在为我在我的应用程序中实现的第三方版本的coverflow 生成反射。反射是使用 NSOperationQueue 创建的，然后在主线程中通过 UIImageView 添加。因为当您滚动浏览图像时，coverflow 部分已经在使用动画资源，因此添加的每个新图像都会在滚动中出现一点“弹出”，这让应用程序感觉有点迟钝/故障。在 iPad 1 和 2 上进行测试，动画非常流畅，看起来很棒。

如何进一步优化绘图以避免这种情况。任何想法表示赞赏。我一直在研究“平铺”反射，以便一次呈现一点反射，但我不确定最好的方法是什么。

下面是绘图代码：

```
 UIImage *mask = [UIImage imageWithContentsOfFile:[[NSBundle mainBundle]pathForResource:@"3.0-Carousel-Ref-Mask.jpg" ofType:nil]];
    //
    UIImage *image = [UIImage imageWithContentsOfFile:[[NSBundle mainBundle]pathForResource:self.name ofType: nil]];
    UIGraphicsBeginImageContextWithOptions(mask.size, NO, [[UIScreen mainScreen]scale]);
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextTranslateCTM(ctx, 0.0, mask.size.height);
    CGContextScaleCTM(ctx, 1.f, -1.f);

    [image drawInRect:CGRectMake(0.f, -mask.size.height, image.size.width, image.size.height)];
    UIImage *flippedImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    CGImageRef maskRef = mask.CGImage;
    CGImageRef maskCreate = CGImageMaskCreate(CGImageGetWidth(maskRef),
                                              CGImageGetHeight(maskRef),
                                              CGImageGetBitsPerComponent(maskRef),
                                              CGImageGetBitsPerPixel(maskRef),
                                              CGImageGetBytesPerRow(maskRef),
                                              CGImageGetDataProvider(maskRef), NULL, false);
    CGImageRef masked = CGImageCreateWithMask([flippedImage CGImage], maskCreate);

    CGImageRelease(maskCreate);

    UIImage *maskedImage = [UIImage imageWithCGImage:masked scale:[[UIScreen mainScreen]scale] orientation:UIImageOrientationUp];
    CGImageRelease(masked);

    if (maskedImage) {
        [mainView performSelectorOnMainThread:@selector(imageDidLoad:)
                                             withObject:[NSArray arrayWithObjects:maskedImage, endView, nil]
                                          waitUntilDone:YES];
    } else
        NSLog(@"Unable to find sample image: %@", self.name); 
```

遮罩只是我用来遮罩图像的渐变 png。另外，如果我只是在屏幕外绘制但不添加它，则几乎没有任何滞后。滞后来自于在主线程上实际添加它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:53:56.957

因此，在花费大量时间研究这个问题并尝试不同的方法（并在 Instruments 中使用“时间”分析器花费了很长时间）之后，我发现延迟来自图像在主线程上的图像解码显示。通过使用所有 CoreGraphics 调用在后台解码，我能够将时间缩短一半。这还不够好。

我进一步发现，由于透明度或 alpha 像素，在我的代码中创建的反射需要很长时间才能显示。因此，我在上下文中绘制了它，并用纯黑色填充了上下文。然后我使视图本身透明而不是图像。这将它在主线程上花费的时间减少了 83%——任务完成

# android - Android SlidingDrawer 手柄按钮并不总是在单击时打开抽屉

> ID：12904919
> 
> 赞同：2
> 
> 时间：2012-10-15T22:26:06.510
> 
> 标签：android, imageview, slidingdrawer

我的布局中有一个slidingDrawer 实现，对于句柄，我使用的是ImageView。

现在一切正常，但有时（经常）当我点击我的手柄图像时，它并不总是一次打开（或关闭）抽屉。我必须多次触摸手柄才能打开/关闭它。

**我已经尝试将android:** focusable和**android:** focusableInTouchMode 设置为**false**来设置和测试slidingDrawer 以及 Button Image。这看起来像父母的某些焦点正在覆盖 clild 或其他东西。

我也尝试用 ImageView 替换按钮图像，结果仍然相同。

如果我在这里遗漏了一些重要的东西，请帮助并告诉我？

编辑：以下是我的代码片段

```
 <SlidingDrawer
            android:id="@+id/drawer"
            android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom"
    android:allowSingleTap="true"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:content="@+id/layout"
    android:handle="@+id/handle" >

    <ImageButton
        android:id="@+id/handle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:clickable="false"
        android:focusable="false"
        android:focusableInTouchMode="false">
    </ImageButton> 
```

谢谢

# c# - 将参数映射到服务堆栈中被忽略的属性？

> ID：12904920
> 
> 赞同：1
> 
> 时间：2012-10-15T22:26:12.247
> 
> 标签：c#, web-services, rest, servicestack

我有一个数据库实体，例如：-

```
public class DBThing
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

Id 映射到数据库主键。然后我有一个服务 DTO，例如：-

```
public class Thing
{
    [IgnoreDataMember]
    public int Id { get; set; }
    public string Identity { get; set; }
    public string Name { get; set; }
} 
```

此处的 Identity 字段包含一个 REST 友好的 ID，如`/things/1`，由 DB Id 制成。我不得不称它为与 Id 不同的东西，因为我正在使用 TranslateTo，`DBThing`如果字符串`Id`是，它会从 Thing 中断，`""`并且它会尝试映射到 int Id，例如当 a`POST`发生时。

我遇到的问题是我的路线`[Route("/things/{Id}", "PUT")]`失败，说它在 Thing 上找不到 Id 属性。如果我`[IgnoreDataMember]`从课堂上删除它工作正常。我可以想象为什么会这样（在内部使用带有 ServiceStack 序列化的共享代码？）但我不知道如何解决这个问题。如果可能的话，我不希望将内部数据库数字 ID 序列化到 Web 服务。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:16:03.490

您可以使用`int? Id`which 如果它为 null，则默认情况下它不会在 JSON / JSV 序列化器中序列化。

# silverlight - Silverlight 复制单元格内容

> ID：12904928
> 
> 赞同：0
> 
> 时间：2012-10-15T22:27:14.747
> 
> 标签：silverlight, silverlight-5.0

我需要允许用户能够从 DataGrid（Silverlight SDK）复制单元格内容。

目前，Datagrid 通过代码绑定到数据。

记录被加载到 ObservableCollection，然后到 PagedCollectionView，最后被设置为 Dataggrid 的 ItemsSource

我面临的问题是当我改变

> IsReadOnly = "假"

对于 Datagrid，用户可以复制单元格的内容。但是，如果他们错误地对单元格进行了任何小的更改，则更改会自动提交，这是上升的异常，因为记录是只读的。

所以我想要实现的只是让用户能够复制单元格内容，但仍将其保持为只读。

我不介意缓存记录是否在客户端发生更改，但只是不想允许将更改提交给服务并引发不必要的异常..

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T23:19:00.620

您可以使用包含只读文本框的 sdk:DataGridTemplateColumn 为每列创建一个模板。

```
<sdk:DataGrid>
  <sdk:DataGrid.Columns>
    <sdk:DataGridTemplateColumn Header="My Header" Width="80">
      <sdk:DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
           <TextBox BorderBrush="Transparent" Text="{Binding Path=MyProperty}" Height="25" HorizontalAlignment="Stretch" IsReadOnly="True"/>
        </DataTemplate>
      </sdk:DataGridTemplateColumn.CellTemplate>
    </sdk:DataGridTemplateColumn>
  </sdk:DataGrid.Columns>
</sdk:DataGrid> 
```

然后，您应该能够从单元格中复制出来。

# java - 速度模板是否适合评估条件？

> ID：12904931
> 
> 赞同：0
> 
> 时间：2012-10-15T22:27:50.753
> 
> 标签：java, map, velocity

我正在考虑将一些条件外部化而不是在 java 中实现它们，以便以后可以根据需要轻松更改它们。

例如，我需要检查给定映射中是否存在某些键，以及映射中某些键的值是否等于某个值。

我正在考虑使用 spring 的表达式语言，但由于我们已经在使用速度模板，我认为它可能是一个很好的候选者。

任何想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T04:32:11.533

您可以轻松地使用速度的#if/#else、#foreach 和其他条件功能来执行业务逻辑，作为速度模板渲染的一部分。

但是，出于多种原因，我通常会尝试将业务逻辑与速度渲染分开：

*   复杂性：Velocity 模板可能变得难以阅读，尤其是当目标输出本身需要复杂的结果布局时。如果您将额外的业务逻辑添加到组合中，那么
    其他人很快就会变得无法阅读（或者在
    几个月不经常看它之后的自己）

*   可测试性：测试 Velocity 模板更难，更好地支持 Java 代码的单元/集成测试

*   功能：Velocity 在设计上并不是一门完整的编程语言，所以你迟早会错过一些东西，而且宏根本不是一个函数，例如默认情况下变量具有全局范围，......你一定会遇到其中的一些如果你让你的模板又大又复杂。

# sharepoint - 更改 SharePoint 库 URL

> ID：12904944
> 
> 赞同：24
> 
> 时间：2012-10-15T22:29:34.247
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-designer, sharepoint-list

如何更改 SharePoint 库的 URI？根据谷歌搜索，大多数人说在 Designer 中更改库的名称（通过右键单击->重命名）会导致 URI 更改，但它只是更改我的名称。

我正在使用 SharePoint 2010 Foundation，这些是我要遵循的步骤：

1.  在 Designer 中，导航到列表和库
2.  右键单击库 - >重命名
3.  请注意名称更改
4.  注意 URI 没有改变

这是我发现声称这有效的资源之一：

[更改共享点库上的 URL 拼写/大小写](https://stackoverflow.com/questions/6986792/change-url-spelling-case-on-sharepoint-library)

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-16T14:15:18.593

在 SharePoint Designer 中，只需导航到所有文件导航节点（不是列表和库节点），在那里找到您的文档库 -> 右键单击​​库 -> 重命名。

URI 会改变。

*编辑：*

![在此处输入图像描述](../Images/6a13269f4c7bad4b7ebb20b2433c3ea5.png)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-06-12T05:42:04.350

至少在 SharePoint 2010 中，可以更改库 URL，而无需使用 SharePoint Designer。

只需通过“所有网站内容”访问图书馆。在图书馆内选择功能区“图书馆”选项卡。然后选择“使用资源管理器打开”。这将在 Windows 资源管理器窗口中打开您的 SharePoint 库。向上导航一个文件夹，您将看到作为文件夹的库列表。根据您希望 URL 的外观重命名所需库的文件夹名称。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-09T16:01:55.323

解决方案：

谢谢！我发现上面建议的 SharePoint Designer 解决方案运行良好！

以下是我采取的步骤：

1.  按照上述说明在 SharePoint Designer 中打开列表，选择导航节点下的所有文件（靠近底部）
2.  出现了一堆文件夹 - 我选择了名为“列表”的文件夹。
3.  从这里，它将显示列表名称和显示名称。通过右键单击更改列表（第一列）的实际名称，重命名。这将更新网址。您可能希望将其与您的显示名称相匹配。
4.  当您返回您的站点时，列表的导航链接可能仍会转到旧 URL。要更新此内容，请在浏览器中输入新网址，转到列表设置 > 标题、描述和导航。只需点击保存按钮，无需进行任何更改。导航链接现已更新。

请注意：如果您要更新项目站点的列表 url 和名称（来自 Project Server），请不要重命名风险、问题列表。这些必须保留，Project Server 才能正常运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-15T19:36:51.753

感谢您提供此解决方案。我只有设计师权限，但仍然能够在浏览器中更改列表 URL（不是 Sharepoint Designer，并且必须是 IE 才能启用在资源管理器中打开）。脚步：

1.  转到站点内容并在站点中打开文档库
2.  单击库功能区选项卡，然后选择在资源管理器中打开选项
3.  在目录结构中向上单击一级 - 应该有一个名为“列表”的目录 - 打开
4.  您的列表应该在那里右键单击并重命名。

我很惊讶系统允许我这样做（它没有让我删除我需要删除的同一个 DL 中的文档），但经过一段时间的测试，URL 更改似乎已经成立。

最后 - 您可能需要重新解析一些视图和覆盖，因为它们可能不会自动与新的列表位置级联。

干杯，罗斯

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-28T19:58:16.310

我已在“站点对象”部分 -->“所有文件”选项中更改了 SharePoint Designer 2010 中的库 URL。然后我在左窗格中选择了正确的库并按 F2（更改名称，就像在 Windows 中一样）并为我工作。我希望这对某人有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-16T07:44:15.663

您不能更改文档库 URL，只能更改名称。如果你想有一个新的 URL：

1.  创建具有良好 URL 的新文档库
2.  将所有文档从旧文档库批量导入到新文档库

警告 ：

*   所有新导入的文档都将使用导入过程中使用的用户名进行标记
*   所有日期时间字段都将重新初始化

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-22T09:43:55.717

我只是 SharePoint 在线平台的网站集管理员。powershell 和 sharepoint 设计器的使用不在我的访问范围内，所以我唯一的选择是“在资源管理器中打开”。我尝试了网上看到的步骤，但没有得到结果。当我看到 ragmaxone 的脚步时，我有了一个想法。然后我采取了以下步骤：

1.  我复制了没有文档库的 url，例如“ [http://MyServer/MySite/MyDocLib/](http://MyServer/MySite/MyDocLib/)是文档库的 URL，但我复制了” [http://MyServer/MySite/](http://MyServer/MySite/)。

2.  接下来我在经典 SPOnline 中打开了文档库，因为我使用的是现代 SPonline。

3.  然后我用复制的 URL 替换了路径地址，并将我的所有文档库都视为文件夹。

4.  右键单击感兴趣的文档库，并在 Windows 中完成重命名，我回到我的文档库，发现页面未找到。（别担心！有些东西已经改变了）。

5.  然后我去了平台的主页，导航到有问题的文档库，看到它已经被重命名了，并且 URL 也对应了新的名称。

感谢您的所有回答和帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-20T09:12:51.700

在 Designer 中转到“所有文件”-> 然后搜索“列表”文件夹，然后您可以找到您的列表右键单击它重命名它并繁荣。从左侧菜单转到列表和库选项卡只会更改列表的标题。因此，请转到所有文件并按照步骤操作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-06-22T06:03:29.493

我没有安装 Sharepoint Developper，也无法安装。我需要更改列表而不是库的地址，因此“在资源管理器中打开”对我不起作用（仅获得“在 Access 中打开”和“在项目中打开”）。

我自己打开资源管理器并粘贴 URL“ [http://MyServer/MySite/](http://MyServer/MySite/) ”（也可以是“ [http://MyServer/MySite/MyPage/](http://MyServer/MySite/MyPage/) ”）。我得到了你通过 Sharepoint Designer 获得的“所有文件”。

就我而言，我必须转到“列表”并更改我想要更改名称的列表的文件夹名称。

接下来我必须从“列表属性”中更改列表的名称（以更改列表的可见名称）

# objective-c - 如何在 iOS 5 中连续拍摄两张照片

> ID：12904945
> 
> 赞同：0
> 
> 时间：2012-10-15T22:29:40.207
> 
> 标签：objective-c, ios5, camera

我是 iOS 和 Objective C 的新手，我正在尝试设计一些需要连续拍摄两张照片（并保存它们）的东西，并且刚刚学会了如何在 iOS 5 中使用相机，所以我想知道如何实现类似的东西。我需要能够打开相机，拍照，保存，然后再次自动跟随相机拍摄另一张照片

PD 我一直在用这个来使用相机：

```
- (void) useCamera
{
if ([UIImagePickerController isSourceTypeAvailable:
     UIImagePickerControllerSourceTypeCamera])
{
    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    imagePicker.delegate = self;
    imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
    imagePicker.mediaTypes = [NSArray arrayWithObjects:(NSString *) kUTTypeImage,nil];
    imagePicker.allowsEditing = NO;
    [self presentModalViewController:imagePicker animated:YES];        
    newMedia = YES;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T23:40:28.107

提示：使用 AVCaptureDevice、AVCaptureDeviceInput、AVCaptureStillImageOutput、AVCaptureSession。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T01:43:50.830

这 2 个链接可能会有所帮助。我自己对 iOS 编程还很陌生，但这看起来很有希望

[iPhone被编程一次能多快拍两张照片？](https://stackoverflow.com/questions/10163944/how-fast-can-iphone-to-be-programmed-take-2-pictures-at-one-time)

[iPhone SDK 4 AVFoundation - 如何正确使用 captureStillImageAsynchronouslyFromConnection？](https://stackoverflow.com/questions/3847140/iphone-sdk-4-avfoundation-how-to-use-capturestillimageasynchronouslyfromconnec)