# StackOverflow 问答 14710000-14710999

# php - 使用 Amazon Elastic Beanstalk 部署 symfony2.1 应用程序

> ID：14710001
> 
> 赞同：1
> 
> 时间：2013-02-05T14:37:09.117
> 
> 标签：php, amazon-web-services, symfony-2.1, composer-php, amazon-elastic-beanstalk

我在 Amazon 中有一个环境（容器类型：运行 PHP 5.4 的 64 位 Amazon Linux），我按照以下说明部署 Symfony2 应用程序：[http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_PHP_symfony2.html](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_PHP_symfony2.html)。

一切正常，但我的问题是亚马逊在我部署时会自动更新和下载我的项目（composer.json）的依赖项，但我不希望出现这个问题，因为某些更新可能会使应用程序崩溃，我想控制它。

有选择吗？我正在考虑从我的 gitignore 文件中删除供应商文件夹（更新：我试过这个但没有用，:-()...这应该有效？哪个是最好的方法？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T16:32:48.960

您可以使用 Composer 控制下载的版本。

[http://getcomposer.org/doc/01-basic-usage.md#package-versions](http://getcomposer.org/doc/01-basic-usage.md#package-versions)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-27T14:39:45.597

它`composer.phar install`在每次部署时运行。如果您将 composer.lock 文件放入您的存储库并且不更改它，则不会在您的服务器上安装任何内容。除此之外，如果你想更新你的依赖项，首先将它们安装在你的本地/部署机器上，如果一切正常，也推送你的 composer.lock 文件。

# php - 文件（图像）不会上传

> ID：14710002
> 
> 赞同：0
> 
> 时间：2013-02-05T14:37:10.257
> 
> 标签：php, file-upload

我正在尝试在 if/elseif 语句中上传图片。我将 $_FILES 作为函数参数传递，因为 print_r 输出 array() 我认为传递有效。还是我创建的逻辑有问题？有人能指出来吗？提前致谢！

```
<?php
    require_once('../resources/library/admin.class.php');
    $obj_admin = new admin();
    echo $obj_admin->product_list;
    echo '<h1>inventory list</h1></br>';
    $obj_admin->displayList();
    $obj_admin->editData();
    $obj_admin->deleteData();

                            $add[] = '<form name="invent" method="post" action="index.php?res=resources&adm=admin&page=inventory.php" class="ínvent">';
                                    $add[] = '<fieldset>';
                                        $add[] = '<legend>Add products</legend>';
                                            $add[] = "<label for='name'>name</label>";
                                            $add[] = "<input type='text' name='user' value='Grachten' />";
                                        $add[] = '</br>';
                                            $add[] = "<label for='price'>price</label>";
                                            $add[] = "<input type='number' name='price' value='150'  />";
                                        $add[] = '</br>';
                                            $add[] = "<label for='description'>description</label>";
                                            $add[] = "<textarea name='description' rows='10' cols= '80'>Its the best!</textarea>";
                                        $add[] = '</br>';
                                            $add[] = "<label for='img'>img</label>";
                                            $add[] = "<input name='image' accept='image/jpeg' type='file' value='files'>";
                                        $add[] = '</br>';
                                        $add[] ="<input type='submit' name='submit'/>";
                                    $add[] = '</fieldset>';
                                    $add[] = '</form>';
                                    echo implode($add);

    if(isset($_POST['submit']))
    {
        $name = $_POST['user'];
        $price = $_POST['price'];
        $description = $_POST['description'];
                   $obj_admin->addData($name, $price, $description, $_FILES);

    } 
```

```
 function addData($name, $price, $description, $files)
                    {

                                    if(!empty($name) || !empty($price) || !empty($description))
                                    {
                                           if($sql = $this->db->prepare("SELECT * FROM products WHERE name= ? LIMIT 1"))
                                            {
                                                $sql->bind_param('s', $name);
                                                $sql->execute();
                                                $sql->store_result();
                                                $sql->fetch();
                                                $numrows = $sql->num_rows;
                                                print_r($numrows);
                                            }
                                            else
                                            {
                                                echo "something is wrong";
                                            }
                                            if($numrows>0)
                                            {
                                                        echo 'duplicate, go to <a href="index.php?res=resources&adm=admin&page=inventory.php">same page</a>';
                                            }
                                            else
                                            {
                                                if($insert = $this->db->prepare("INSERT INTO products (name, price, description) VALUES(?, ?, ?)"))
                                                {

                                                            $insert->bind_param('sds', $name, $price, $description);
                                                            $insert->execute();
                                                }
                                                //The uploaden image is sent to temp map
                                                elseif(isset($files['image']['size'])<=2048000)
                                                {

                                                    if ($files["image"]["error"] > 0)
                                                    {
                                                            echo "Return Code: " . $files["image"]["error"] . "<br />";
                                                    }
                                                    else
                                                    {
                                                            $uploaddir = "C:/xampp/htdocs/webshop/public/img/content";
                                                            $moved = move_uploaded_file($files['image']['tmp_name'], $uploaddir/$files['image']);
                                                            if($moved)
                                                            {
                                                                echo "succes";
                                                            }
                                                            else
                                                            {
                                                                echo "failure";
                                                            }
                                                    }

                                                        //Shows where its stored
                                                        echo "Stored in: " . "C:/xampp/htdocs/webshop/public/img/content/" . $files["file"]["name"];

                                                }
                                                else
                                                {
                                                            echo "didnt inserted the damn thing!";
                                                }
                                            }

                                        }

                                        print_r($files);

                            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:43:49.570

将 enctype="multipart/form-data" 添加到表单标签中，您可以通过 var_dump($_FILES) 检查这是否是问题，在您的情况下将为空

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:40:43.153

添加`enctype='multipart/form-data'`到您的`<form>`标签。

这允许将文件作为表单数据的一部分包含在内，缺少这很可能`$_FILES`是空的原因。

# c# - Infragistics UltraGrid 中的超链接单元格

> ID：14710003
> 
> 赞同：1
> 
> 时间：2013-02-05T14:37:22.083
> 
> 标签：c#, winforms, infragistics, ultrawingrid

我有一个`UltraGrid`绑定到`DataTable`具有两列（键、值）的 a 。我在 DataTable 中添加了 10 行，现在第 11 行的 Value 列中有一个 URL。URL 值添加得很好，但它不像超链接那样工作。要将其作为超链接工作，我需要如何将此行添加到 UltraGrid 中？我的代码：

```
DataTable dt = new DataTable();
dt.Columns.Add("Key", typeof(string));
dt.Columns.Add("Value", typeof(string));
ultraGrid.DataSource = dt;

foreach (KeyValuePair<string, string> kvp in dictionary)
{
    dt.Rows.Add(kvp.Key, kvp.Value);
}

// Adding the row which has the URL value.
string url = "SomeURL";
Uri hyperLink = new Uri(url);
dt.Rows.Add("Click this", hyperLink); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T20:20:50.310

虽然 U1199880 给出的答案指向一个部分正确的解决方案，但将该样式应用于整个列时存在问题。列中的每个单元格都将被视为一个链接。

相反，您需要拦截`InitializeRow`事件并检查当前行的当前单元格是否是有效的 URI。然后将单元格 Style 属性更改为 ColumnStyle.URL

```
private void grd_InitializeRow(object sender, InitializeRowEventArgs e)
{
    if (e.ReInitialize == false)
    {
        UltraGridColumn c = e.Row.Band.Columns["Value"];
        string link = e.Row.GetCellValue(c).ToString();
        if (Uri.IsWellFormedUriString(link, UriKind.Absolute))
            e.Row.Cells["Value"].Style = Infragistics.Win.UltraWinGrid.ColumnStyle.URL;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:54:44.753

当您定义网格列时，使用 type: `Infragistics.Win.UltraWinGrid.ColumnStyle.URL`作为列类型。

然后网格将`CellLinkClicked`在您的代码中引发一个事件。

# python - 邻接矩阵中的 Dijkstra 算法

> ID：14710005
> 
> 赞同：3
> 
> 时间：2013-02-05T14:37:23.143
> 
> 标签：python, graph, matrix, dijkstra

我有一个由二维数组表示的有向无环图的邻接矩阵：

```
[[0, 4, 3, 0]
 [0, 0, 0, 1]
 [0, 3, 0, 1]
 [2, 0, 0, 0]] 
```

是否有可以在此数据类型上运行 Dijkstra 算法的 Python 模块或快速代码片段？Python 食谱使用我相信的优先级字典，但我真的很想将它保存在二维数组中。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T14:47:45.040

[networkx](https://networkx.org/)可能适合您的需求：

```
import networkx as nx
import numpy as np
A = np.array([[0, 4, 3, 0],
              [0, 0, 0, 1],
              [0, 3, 0, 1],
              [2, 0, 0, 0]])
G = nx.from_numpy_matrix(A, create_using=nx.DiGraph())
print(nx.dijkstra_path(G, 0, 1)) 
```

另请参阅：[networkx.dijkstra_path](https://networkx.org/documentation/stable/reference/algorithms/generated/networkx.algorithms.shortest_paths.weighted.dijkstra_path.html)

# r - 使用命名列表作为索引来对字符串向量进行子集化

> ID：14710008
> 
> 赞同：3
> 
> 时间：2013-02-05T14:37:32.777
> 
> 标签：r, vector, mapping

我有一长串需要根据预先指定的映射转换为数字的字符串。我已将此映射放入命名列表中，因此可以获得单个元素，但我不知道如何将其应用于向量

例如：

```
> X <- c("a", "b", "b", "a", "c")
> M <- list(a = 11, b = 22, c = 33)
> M[["a"]]
[1] 11
> M[[X]]
Error in M[[X]] : recursive indexing failed at level 2
> sapply(X, M)
Error in get(as.character(FUN), mode = "function", envir = envir) : 
  object 'M' of mode 'function' was not found 
```

这里的正确方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T14:40:58.027

另一种类似的方法：

```
R> unlist(M[X])
 a  b  b  a  c 
11 22 22 11 33 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T14:40:33.270

您只需要对代码进行一些小的更改：

*   使用命名向量而不是命名列表（这是可选的 - 命名列表也可以）
*   但更重要的是，使用单括号`[`而不是双括号`[[`。单括号匹配向量，而双括号匹配单个元素。

像这样：

```
M <- c(a = 11, b = 22, c = 33)
X <- c("a", "b", "b", "a", "c")

unname(M[X])
[1] 11 22 22 11 33 
```

# qt - Qt::AlignVCenter 在 QTextTable 上不起作用

> ID：14710012
> 
> 赞同：1
> 
> 时间：2013-02-05T14:37:33.863
> 
> 标签：qt, qt4, alignment, qt5

我创建了 QTextTable：

```
QTextDocument *document=new QTextDocument(this);
QTextCursor cursor(document);
cursor.movePosition(QTextCursor::Start);

QTextTableCellFormat cellFormat;
cellFormat.setLeftPadding(7);
cellFormat.setRightPadding(7);

QBrush blackBrush(Qt::SolidPattern);
QTextTableFormat tableFormat;
tableFormat.setAlignment(Qt::AlignCenter);
tableFormat.setBorderBrush(blackBrush);
tableFormat.setBorder(0.5);
tableFormat.setCellSpacing(0);
tableFormat.setBorderStyle(QTextFrameFormat::BorderStyle_Solid);
tableFormat.setWidth(QTextLength(QTextLength::PercentageLength, 100));
QTextTable *table = cursor.insertTable(10,10,tableFormat);

QTextBlockFormat centerAlignment;
centerAlignment.setAlignment(Qt::AlignCenter);

table->mergeCells(0,0,10,5);
cursor = table->cellAt(0, 0).firstCursorPosition();
cursor.setBlockFormat(centerAlignment);
cursor.insertText("text"); 
```

我想在单元格的中间垂直和水平地写文本但是我的文本在水平的中间但它不在垂直的中间。Qt::AlignVCenter 和 Qt::AlignBottom 也不起作用。我试过这个答案[https://stackoverflow.com/a/10329809/1997790](https://stackoverflow.com/a/10329809/1997790)但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:05:44.413

您可以尝试使用 QTextCharFormat::setVerticalAlignment()，如下所示：

```
QTextTableCell   cell = table->cellAt(0, 0);
QTextCharFormat  cellFormat = cell.format();

cellFormat.setVerticalAlignment(QTextCharFormat::AlignMiddle);
cell.setFormat(cellFormat); 
```

如果这不起作用，您可能想尝试使用[样式表](http://qt-project.org/doc/qt-4.8/stylesheet-examples.html#customizing-qtableview)来自定义表格。

# delphi - 用 Delphi 处理按键鼠标

> ID：14710019
> 
> 赞同：1
> 
> 时间：2013-02-05T14:38:01.407
> 
> 标签：delphi, mouseevent, keystroke

> **可能重复：**
> [如何在 Delphi 中检测前进和后退鼠标按钮事件？](https://stackoverflow.com/questions/2458730/how-to-detect-forward-and-back-mouse-button-events-in-delphi)

我有一个带有上一个和下一个按钮的鼠标，可以在任何浏览器和文件浏览器上使用。

我想在我的 Delphi 应用程序中处理“上一个按钮”的事件。

有人已经这样做了吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:08:16.743

Craig Peterson 给出了解决方案。

```
type
  TMyForm = class(TForm)
  private
    procedure WMAppCommand(var Msg: TMessage); message WM_APPCOMMAND;
  end;

procedure TMyForm.WMAppCommand(var Msg: TMessage);
begin
  case GET_APPCOMMAND_LPARAM(Msg.LParam) of
    APPCOMMAND_BROWSER_BACKWARD:
    begin
      // Do "go back" code
      Msg.Result := 1;
    end;
  end;
end; 
```

# javascript - 使用 div-Elements 可视化逻辑顺序

> ID：14710021
> 
> 赞同：0
> 
> 时间：2013-02-05T14:38:02.927
> 
> 标签：javascript, jquery, asp.net-mvc-4

我正在寻找一个`Javascript`-Library/`jQuery-AddIn`或 Helper 脚本，*以*按逻辑顺序定位 div 链。IE：

```
A  --- > B
^  --- > C ---> D  ---> E
|                       |   
------------------------- 
```

想象这些字母也`div`包含一些其他元素。目标是传递顺序和`html`元素，并且定位将是自动的。

有人知道这个任务的组件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:16:54.253

我发现`jsPlump`哪个可以处理这个特定的任务。这是一个图书馆`jQuery`，你可以[在这里](http://jsplumb.org/jquery/anchorDemo.html#)`MooTools`下载。`YUI3`

# php - 复制的 WordPress 网站现在“空白”？

> ID：14710029
> 
> 赞同：1
> 
> 时间：2013-02-05T14:38:28.883
> 
> 标签：php, wordpress

我刚刚将一个站点复制到一个新的开发子域以进行一些更改。副本很顺利。我使用了 rsync 并且所有文件都已就位。我转储了数据库内容并加载了它们。

此外，我修改了 wp-config.php，使其具有：

```
define('WP_HOME','http://www.dev.newdomain.tld');
define('WP_SITEURL','http://www.dev.newdomain.tld');
// Just trying to catch any error info:
define('WP_DEBUG', true);
define('WP_DEBUG_LOG', true);
define('WP_DEBUG_DISPLAY', false);
@ini_set('display_errors',0);
define('SCRIPT_DEBUG', true); 
```

帖子、插件、用户等都在 wp 管理界面上显示得很好，但是**前端**没有显示任何内容。

如果我从 wp 管理员修改一篇文章，它编辑得很好，但是当我尝试查看一篇文章时，我在浏览器中得到以下信息：

```
Not Found

The requested URL /path-to-article/ was not found on this server.

Additionally, a 404 Not Found error was encountered while trying to use an ErrorDocument to handle the request. 
```

在我的 apache error.log 中有以下内容：

```
[Tue Feb 05 05:50:07 2013] [error] [client xxx.xxx.xxx.xxx] File does not exist: /home/username/dev.domain.tld/path-to-post
[Tue Feb 05 05:50:07 2013] [error] [client xxx.xxx.xxx.xxx] File does not exist: /home/username/dev.domain.tld/missing.html 
```

这部分让我相信这可能是 apache 的 .htaccess 发生的事情，但看起来还不错：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

是的，我已经禁用了所有插件，看看那里是否会发生什么。此外，将主题更改为默认的“Twenty Twelve”也无济于事。

此外，在查看生成的页面源时，html 中根本没有内容。

我所看到的只是网络浏览器访问日志中对根/站点资源的单一访问，没有伴随其他资源（文件、图像等）

当我似乎陷入僵局，日志中没有任何错误时，这里会发生什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-05T14:54:17.347

检查您的数据库。Wordpress 将许多 URL 存储为绝对 URL，这就是您可能遇到问题的原因。

# opencv - 对于 Bag-Of-Words，Dense SIFT 是否比 SIFT 更好？

> ID：14710031
> 
> 赞同：3
> 
> 时间：2013-02-05T14:38:30.587
> 
> 标签：opencv, computer-vision, classification, feature-extraction

我正在使用 OpenCV 实现一个词袋图像分类器。最初，我测试了在 SURF 关键点中提取的 SURF 描述符。我听说 Dense SIFT（或 PHOW）描述符可以更好地用于我的目的，所以我也尝试了它们。

令我惊讶的是，他们的表现要差得多，实际上差了将近 10 倍。我可能做错了什么？我正在使用来自 OpenCV 的 DenseFeatureDetector 来获取关键点。我从 9 层中提取每个图像大约 5000 个描述符，并将它们聚集成 500 个簇。

我应该尝试 VLFeat 库中的 PHOW 描述符吗？我也不能在 OpenCV 的 SVM 实现中使用卡方内核，这在许多论文中都是推荐的。这对分类器质量至关重要，我应该尝试另一个库吗？

另一个问题是尺度不变性，我怀疑它可能会受到密集特征提取的影响。我对吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T15:31:49.607

这取决于问题。您应该尝试不同的技术，以了解解决问题的最佳技术。当您需要对任何类型的场景进行分类时，通常使用 PHOW 非常有用。你应该知道 PHOW 与 Dense SIFT 有点不同。几年前我用过vlfeat PHOW，看到代码，它只是调用了不同大小的dense sift，并进行了一些平滑处理。这可能是能够保持规模不变的一条线索。同样在我的实验中，我使用了 libsvm，结果直方图交集对我来说是最好的。默认情况下，卡方和直方图交叉核不包含在 libsvm 和 OpenCV SVM（基于 libsvm）中。你是决定是否应该尝试它们的人。我可以告诉你，RBF 内核达到了接近 90% 的准确率，无论直方图相交达到 93%，和卡方 91%。但这些结果是在我的具体实验中得出的。您应该从带有自动调整参数的 RBF 开始，看看它是否足够。

总结这一切取决于你的具体实验。但是如果你使用 Dense SIFT，也许你可以尝试增加集群的数量，并以不同的规模调用 Dense SIFT（我推荐你使用 PHOW 方式）。

编辑：我在看 OpenCV DenseSift，也许你可以从

```
m_detector=new DenseFeatureDetector(4, 4, 1.5); 
```

知道 vlfeat PHOW 使用 [4 6 8 10] 作为 bin 大小。

# mysql - 如何为 Schema 类提供 DBIx 搜索方法的附加参数

> ID：14710034
> 
> 赞同：0
> 
> 时间：2013-02-05T14:38:32.283
> 
> 标签：mysql, perl, catalyst, dbix-class

我在 Catalyst 项目中向我的 Schema 添加了新关系：

```
__PACKAGE__->has_many(
    'messageslog' => "myproject::Schema::Result::MessagesLog",
    sub {
    my $args = shift;
    return {
        "$args->{foreign_alias}.from" => "$args->{self_alias}.msisdn",
        "$args->{foreign_alias}.service_id" => "3",
        "$args->{foreign_alias}.date_time" => {between => ["2013-01-01 00:00:00", "2013-   01-05 23:59:59"]}
        };
    }
); 
```

当我提出要求时：

```
$c->model('DB::TableClass')->search({})->hashref_array; 
```

它完美地工作。

但我需要像这样插入搜索参数：

```
__PACKAGE__->has_many(
    'messageslog' => "myproject::Schema::Result::MessagesLog",
    sub {
    my $args = shift;
    return {
        "$args->{foreign_alias}.from" => "$args->{self_alias}.msisdn",
        "$args->{foreign_alias}.service_id" => "$args->{params}->{id}",
        "$args->{foreign_alias}.date_time" => {between => $args->{params}->{dates}}
        };
    }
);
$c->model('DB::TableClass')->search({}, {
    join => 'messageslog',
    -params => {id => 3, dates => ["2013-01-01 00:00:00", "2013-01-05 23:59:59"]}
})->hashref_array; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:52:01.643

通过向 ResultSet 添加方法而不是关系，请参阅[Cookbook/Predefined-searches](https://metacpan.org/module/FREW/DBIx-Class-0.08205/lib/DBIx/Class/Manual/Cookbook.pod#Predefined-searches)。

# wpf - WPF TreeView 绑定到复杂模型

> ID：14710035
> 
> 赞同：0
> 
> 时间：2013-02-05T14:38:32.973
> 
> 标签：wpf, mvvm, binding, treeview

我已经开始学习WPF。我选择构建简单的 ItemStructureCreator。
我也在使用 MVVM 模式。
我实现了一些类，并且遇到了将其正确绑定到我的 TreeView 的问题。

![这是我的班级诊断](../Images/d53278d52b515fa055a2d9383a9c27f7.png)

现在我希望我的 StructureManagerView 具有与我的结构相关联的 TreeView 控件。
我试图像这样绑定它：

```
 <TreeView Name="tree" DataContext="{Binding MainItem}" Grid.Column="0" Background="Beige">
        <TreeView.ItemTemplate>
            <HierarchicalDataTemplate ItemsSource="{Binding Item.Children}">
                <TextBlock Text="{Binding Item.Code}" HorizontalAlignment="Stretch"/>
            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate> 
    </TreeView> 
```

或者像这样（我认为这是错误的，因为`ItemsSource`属性需要收集）：

```
 <TreeView Name="tree" ItemsSource="{Binding MainItem}" Grid.Column="0" Background="Beige">
        <TreeView.ItemTemplate>
            <HierarchicalDataTemplate ItemsSource="{Binding Item.Children}">
                <TextBlock Text="{Binding Item.Code}" HorizontalAlignment="Stretch"/>
            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate> 
    </TreeView> 
```

你能帮我`Bindigs`正确设置吗？

问候，德米特里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:15:07.680

将我的评论转换为答案：

TreeView 没有“主要项目”的概念。

您应该绑定 TreeView 本身的 ItemsSource 属性。

`ItemsSource="{Binding MainItem}"`

应该替换为

`ItemsSource="{Binding MainItems}"`

其中 MainItems 是一个 IEnumerable

# vbscript - VBScript 扑克游戏——我有什么牌？

> ID：14710039
> 
> 赞同：1
> 
> 时间：2013-02-05T14:38:37.507
> 
> 标签：vbscript, poker

我正在做的奇怪的小项目。在你回答之前，是的，我知道 vbscript 可能是最糟糕的语言。

我需要帮助确定每个玩家拥有什么。每张卡都有一个唯一的数字（我将其“翻译”成它的扑克价值，旁边有一个♥♦♣♠）。例如：

```
A♥ = 0
2♥ = 1
3♥ = 2
... 
```

等等。我需要帮助确定我的手是什么。我想了几个办法。第一个是使用每个卡值之间的增量。例如，顺子是：

```
n
n +/- (1+ (13 * (0 or 1 or 2 or 3)))
n +/- (2 + (13 * (0 or 1 or 2 or 3 )))
... 
```

等等。例如卡片 3、3+1+0、3+2+13、3+3+(13*3)、3+4+(13*2)

会给我：4♥ 5♥ 6♦ 7♠ 8♣</p>

我的问题是，我应该尝试为此使用正则表达式吗？在不硬编码每只手的情况下，告诉计算机他有哪只手的最佳方法是什么？

**编辑：这里的完整代码：[https ://codereview.stackexchange.com/questions/21338/how-to-tell-the-npc-what-hand-it-has](https://codereview.stackexchange.com/questions/21338/how-to-tell-the-npc-what-hand-it-has)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T20:33:30.703

扑克牌都取决于牌的相对等级和/或花色。

我建议编写一些实用函数，从确定等级和花色开始。

因此，您的代表中的一张牌是`int`从 0..51 开始的。以下是一些有用的功能（伪代码）：

```
// returns rank 0..12, where 0 = Ace, 12 = King
getRank(card) {
    return card % 13;
}

// returns suit 0..3, where 0 = Heart, 1 = Diamond, 2 = Club, 3 = Spade
getSuit(card) {
    return card / 13;  // or floor(card / 13) if lang not using floored division
} 
```

现在您可以获得一组牌的等级和花色，您可以编写一些实用程序来处理它们。

```
// sort and return the list of cards ordered by rank
orderByRank(cards) {
    // ranked = []
    // for each card in cards:
    //   get the rank
    //   insert into ranked list in correct place
}

// given a ranked set of cards return highest number of identical ranks
getMaxSameRank(ranked) {
    duplicates = {}  // map / hashtable
    for each rank in ranked {
        duplicates[rank] += 1
    }
    return max(duplicates.vals())
}

// count the number of cards of same suit
getSameSuitCount(cards) {
    suitCounts = {} // a map or hashtable if possible
    // for each card in cards:
    //   suitCounts{getSuit(card)} += 1
    // return max suit count (highest value of suitCounts)
} 
```

您将需要更多实用函数，但有了这些，您现在可以寻找同花或顺子：

```
isFlush(cards) {
    if (getSameSuitCount(cards) == 5) {
        return true
    }
    return false
}

isStraight(cards) {
    ranked = orderByRank(cards)
    return ranked[4] - ranked[0] == 3 && getMaxSameRank(ranked) == 1     
}

isStraightFlush(cards) {
    return isFlush(cards) && isStraight(cards)
} 
```

等等。

一般来说，你需要对照可能的牌检查每手牌，从最好的开始，一直到高牌。在实践中，您将需要更多的东西来区分平局（两名玩家有满堂彩，获胜者是排名较高的三人满堂彩）。因此，您需要存储更多信息来对两只手牌进行排名，例如起脚牌。

```
// simplistic version
getHandRanking(cards) {
  if (isStraightFlush()) return STRAIGHT_FLUSH
  if (isQuads()) return QUADS
  ...
  if (isHighCard) return HIGH_CARD
}

getWinner(handA, handB) {
  return max(getHandRanking(handA), getHandRanking(handB))
} 
```

那将是我的一般方法。有大量关于扑克手牌排名算法的信息。您可能会喜欢 Peter Norvig 的 Udacity[计算机程序设计课程中的第 1 单元：赢得扑克牌](https://www.udacity.com/course/cs212)

# c++ - 带有重载的宏扩展

> ID：14710043
> 
> 赞同：3
> 
> 时间：2013-02-05T14:38:47.247
> 
> 标签：c++, macros

有没有办法继续使用可变数量的参数的重载？

具体示例如下：

```
// Third party class
class ABC
{
public:
    void addValue(int);
    void addValue(float);
    void addValue(string);
    void execute(); // Any number of add values can be called before the execute
}; 
```

目前，当我想为此类的对象添加值时，我必须执行以下操作： ABC *obj = new ABC(); obj->addValue(2.0); obj->addValue("字符串"); 对象->执行（）；

有没有办法在客户端代码中我可以在 1 行中完成所有 addValues？

我尝试使用如下宏，但随后我必须为每个参数数量定义一个宏：

```
#define ADD_1_VALUES_TO_CLASS_ABC(obj, val1) { \
    obj->addValue(val1) }
#define ADD_2_VALUES_TO_CLASS_ABC(obj, val1, val2) { \
    obj->addValue(val1); obj->addValue(val2) }
#define ADD_3_VALUES_TO_CLASS_ABC(obj, val1, val2, val3) { \
    obj->addValue(val1) ; obj->addValue(val2); obj->addValue(val3) } 
```

是否有一些通用的方法来定义 MACRO ADD_N_VALUES_TO_CLASS_ABC 并将其称为

```
ABC *obj = new ABC();
MACRO ADD_N_VALUES_TO_CLASS_ABC(obj, "String", 1.0, 4);
MACRO ADD_N_VALUES_TO_CLASS_ABC(obj, 1, 2.0, "String", 4.0, 3); 
```

此外，如果我使用可变数量的参数 va_args，我会丢失调用重载函数所需的类型信息吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:00:52.017

在兼容的 C++11 编译器上，您可以使用可变参数模板来实现：

```
template<typename T>
void addValues(ABC& obj, T&& t)
{
    obj.addValue(forward<T>(t));
}

template<typename T, typename... Ts>
void addValues(ABC& obj, T&& t, Ts&&... ts)
{
    obj.addValue(forward<T>(t));
    addValues(obj, forward<Ts>(ts)...);
} 
```

这是你将如何使用它：

```
ABC a;
add_values(a, 3, "hello", 4.5f); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T19:45:58.590

既然您说您使用的是 g++ 4.1.2 版（相当旧），显然 C++11 不是一个选项。幸运的是，您不需要它！可以使用可变参数宏，但更简单、更优雅的 C++ 解决方案是像 cout 一样思考，然后执行以下操作：

```
class AddTo {
  ABC *abc;
  public:
  AddTo(ABC *abc) : abc(abc) { }
  template<class T>
  const AddTo& operator<<(const T& val) const {
    abc->addValue(val);
    return *this;
  }
}; 
```

然后你可以像这样使用它：

```
ABC *obj = new ABC();
AddTo(obj) << 1 << 2.0 << "String" << 4.0 << 3; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:58:59.607

使用称为可变参数模板的 C++11 功能（在 GCC 4.3 版本中可用），您可以添加以下成员函数：

```
void addValues(){}; // Base case.

template<class H, class... T>
void addValues(H&& head, T&&... tail)
{
    addValue(std::forward<H>(head));
    addValues(std::forward<T>(tail)...);
} 
```

**示例用法：**

```
addValues(1, 2.0, "String", 4.0, 3); 
```

相当于

```
addValue(1); addValue(2.0); addValue("String"); addValue(4.0); addValue(3); 
```

# javascript - 画布图像调整大小 / scew / dnd

> ID：14710047
> 
> 赞同：7
> 
> 时间：2013-02-05T14:39:02.503
> 
> 标签：javascript, canvas, three.js, webgl

我正在尝试构建一个人们可以上传图像的应用程序，我想让人们可以拖动图像的角落并扭曲它。但我不知道从哪里开始，也找不到任何例子。

我在 Flash 中有一个示例：[http](http://configurator.cando.eu/popup.html)
://configurator.cando.eu/popup.html - 单击“Cando Stijlkamer”
- 单击 6 个背景中的 1 个
- 在顶部选择第 2 步“Kies uw deur”
- 双击门，然后在底部再做一次。
- 现在你可以拖动角落了。

示例图片： ![扭曲图像](../Images/f8f5cba33dcf7b46f20b7245b4104ed9.png)

任何人都知道如何使这成为可能？

**更新**
开始为 webGL 使用 ThreeJS，在我得到一个立方体的那一刻，可以使它透视、缩放和旋转它。但角落不会灵活。

**更新 2**
创建了一个带有可拖动角的自定义几何图形。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T02:54:08.897

我可以向您展示如何在 Flash 中轻松实现此效果。但是，如果您需要使用 HTML5，我建议使用[https://github.com/edankwan/PerspectiveTransform.js](https://github.com/edankwan/PerspectiveTransform.js)而不是 Canvas 元素。

# php - mod_rewrite 不会让我加载 .php 文件（但任何其他文件）？

> ID：14710051
> 
> 赞同：0
> 
> 时间：2013-02-05T14:39:11.233
> 
> 标签：php, file, .htaccess, mod-rewrite, internal

这个 .htaccess 文件似乎可以在大约 15 个不同的网络主机上完成它应该做的事情，除了一个。除包含文件夹“wwwdocs”的 url:s 之外的所有内容都应由 /index.php 处理

即使在这个网络主机上一切正常，除了它不会让我在 wwwdocs 文件夹中加载 .php 文件（其他任何东西：.css、.js、.jpg、.png 等等，在 wwwdocs/ 及其子文件夹）。

网络主机的支持告诉我“*你得到一个重定向循环，Apache 在 10 次迭代后终止”*，但没有给我任何关于如何解决这个问题的线索，除了“可能使用`END`而不是`L`at `RewriteRule ^(.*)wwwdocs/(.*)$ /wwwdocs/$2 [L]`”（虽然没有工作）。

尝试在 wwwdocs/ 或其子文件夹中加载任何 .php 文件将导致**500 Internal Server Error**。

知道我在这里做错了什么吗？：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    Options +FollowSymLinks

    RewriteCond %{request_uri} !^/wwwdocs
    RewriteCond %{request_uri} !^/index\.php$
    RewriteRule ^(.*)wwwdocs/(.*)$ /wwwdocs/$2 [L]

    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f 
    RewriteRule ^(.*)$ /index.php?url=$1 [QSA,L]
</IfModule> 
```

# wordpress - 在 80 以外的端口上运行 Wordpress

> ID：14710053
> 
> 赞同：3
> 
> 时间：2013-02-05T14:39:13.423
> 
> 标签：wordpress, wamp

我在端口 1024 上运行 apache，并且 WAMP 服务器运行良好。但是当我尝试在 localhost:1024 运行 Wordpress 时，安装将无法正常工作。

我已经尝试了我能想到的一切，但我无法让它运行。有人遇到过这个问题吗？

谢谢丹尼尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-19T23:47:24.740

您必须编辑文件 wp-config.php 并更改以下内容：

```
define('WP_HOME','http://localhost:1024/');
define('WP_SITEURL','http://localhost:1024/'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T12:57:10.690

Wordpress 将在运行 apache 的任何端口上本地运行（我每天使用各种端口作为测试服务器）

用类似的东西制作一个 index.php

```
<?php phpinfo(); ?> 
```

并测试是否可以显示页面。如果页面未显示，则说明您的 apache 设置配置错误。（检查 /etc/apache2/sites-available/default）

# javascript - 模态关闭按钮

> ID：14710055
> 
> 赞同：1
> 
> 时间：2013-02-05T14:39:15.400
> 
> 标签：javascript, jquery, asp.net

我有一个在 class="modal" 中的 div，我在 jQuery 中编写了一个函数，当我按下“esc”时会关闭这个 div：

```
$(document).keypress(function (e) {
    if (e.keyCode == 27) {
        if ($('.modal:visible > .icon32').length) $('.modal:visible > .icon32')[0].click();
    }
}); 
```

在 Firefox 中一切正常，但在 chrome 中却没有，是什么导致了这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:42:03.313

我观察到按键也有 IE 的问题。改用**keydown**事件。keydown 事件在按下键时发生。在该按键事件发生后立即发生。当您释放键 keyup 事件时发生。

```
$(document).keydown(function (e) {
    if (e.keyCode == 27) {
        if ($('.modal:visible > .icon32').length) $('.modal:visible > .icon32')[0].click();
    }
}); 
```

# sql-server - 如何在没有配置文件的情况下使用 BCP 选择要导入的特定列？

> ID：14710060
> 
> 赞同：0
> 
> 时间：2013-02-05T14:39:35.843
> 
> 标签：sql-server, bcp

我正在使用 BCP 命令在 SQL Server 2005 中通过配置文件导入。所以：

```
EXEC master..xp_cmdshell 'BCP database.dbo.table in d:\folder\foo.csv -f d:\folder\configuration.xml -c -t, -T -F 2 ' 
```

我想导入某些列而不必使用配置文件“configuration.xml”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:48:10.700

你为什么不尝试通过查询...

它产生数据......然后你将它传递给你的表......

```
INSERT INTO tablename
    SELECT * FROM
    OPENROWSET ('MSDASQL', 'Driver={Microsoft Text Driver (*.txt; *.csv)};DBQ=D:\sam;', 'SELECT name,id from sam.csv'); 
```

# http - 将表单 POST 与查询字符串结合起来是否有效？

> ID：14710061
> 
> 赞同：34
> 
> 时间：2013-02-05T14:39:35.983
> 
> 标签：http, post, query-string

我知道，例如，在大多数 MVC 框架中，查询字符串参数和表单参数都可用于处理代码，并且通常合并为一组参数（通常以 POST 为优先）。但是，根据 HTTP 规范这样做是否有效？假设您要发布到：

```
http://1.2.3.4/MyApplication/Books?bookCode=1234 
```

...并提交一些更新，例如更改图书代码为 1234 的图书名称，您可能希望处理代码同时考虑`bookCode`查询字符串参数和带有更新图书信息的 POSTed 表单参数。这是有效的，这是一个好主意吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-05T14:59:06.300

> 根据 HTTP 规范是否有效？

[是](http://www.w3.org/Protocols/rfc2616/rfc2616.html)的。

[这是这些规范中定义的 URL](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.2)的一般语法

```
http_URL = "http:" "//" host [ ":" port ] [ abs_path [ "?" query ]] 
```

http_URL 的形式没有额外的限制。特别是，使用的[http 方法](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9)（即POST、GET、PUT、HEAD、...）对http URL 格式没有任何限制。

使用 GET 方法时：服务器可以认为请求体是空的。

使用 POST 方法时：服务器必须处理请求正文。

> 这是个好主意吗 ？

这取决于你需要做什么。我建议你这个[链接](http://www.w3.org/2001/tag/doc/whenToUseGet.html)解释 GET 和 POST 背后的想法。

我认为在某些情况下，在 url 的*查询*部分中始终包含一些参数（例如用户语言）会很方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:25:14.827

*我知道，例如，在大多数 MVC 框架中，查询字符串参数和表单参数都可用于处理代码，并且通常合并为一组参数（通常以 POST 为优先）。*

任何有能力的框架都应该支持这一点。

*这有效吗*

是的。HTTP 中的 POST 方法对使用的 URI 没有任何限制。

*这是个好主意吗？*

显然不是，如果您要使用的框架仍然受到挑战。否则，这取决于你想要完成什么。主要用例（将数据子集重定向到新的 POST 目标）已被[浏览器实现不可挽回地破坏](http://www.alanflavell.org.uk/www/post-redirect.html)（所有这些都机械地遵循 Mosaic/Netscape 的破坏领先地位），因此这里的考虑主要是理论上的。

# java - 将字节数组转换为具有等效字节数的字符串

> ID：14710063
> 
> 赞同：0
> 
> 时间：2013-02-05T14:39:40.350
> 
> 标签：java, android, arrays, string, byte

是否可以将字节数组转换为字符串，但字符串的长度与数组中的字节数完全相同？如果我使用以下内容：

```
byte[] data; // Fill it with data
data.toString(); 
```

字符串的长度与数组的长度不同。我相信这是因为 Java 和/或 Android 考虑了某种默认编码。数组中的值也可以是负数。从理论上讲，应该可以将任何字节转换为某个字符。我想我需要弄清楚如何指定为每个字符生成固定单字节宽度的编码。

**编辑：**

我尝试了以下但没有奏效：

```
byte[] textArray; // Fill this with some text.
String textString = new String(textArray, "ASCII"); 
textArray = textString.getBytes("ASCII"); // textArray ends up with different data. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:43:46.807

您可以使用 String 构造函数`String(byte[] data)`从字节数组创建字符串。如果还想指定字符集，可以使用`String(byte[] data, Charset charset)`构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-31T07:04:11.873

这应该可以正常工作！

```
public static byte[] stringToByteArray(String pStringValue){
    int length= pStringValue.length();
    byte[] bytes = new byte[length];

    for(int index=0; index<length; index++){
        char ch= pStringValue.charAt(index);
        bytes[index]= (byte)ch;
    }

    return bytes;
} 
```

从 JDK 1.6 开始：

您还可以使用：

**stringValue.getBytes()**将返回一个字节数组。

在传递**NULL 字符串**的情况下，您需要通过**抛出 nullPointerException 或在方法本身内部处理它来处理它**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T00:43:11.063

尝试使用`US-ASCII`或`ISO-8859-1`代替`ASCII`. ASCII 不是 Java 或 Android 的内置字符编码，但其中之一是。它们保证为单字节编码，但需要注意的是，不在字符集中的字符将被静默截断。

# c# - 在更新c#时从另一个线程枚举Observable Collection

> ID：14710067
> 
> 赞同：0
> 
> 时间：2013-02-05T14:39:55.483
> 
> 标签：c#, multithreading, observablecollection

我有一个 Observable 集合类型的属性，它返回另一个属性集合。当我通过访问它来枚举另一个类的属性时，我得到集合被修改异常。我尝试锁定该属性，但它似乎不起作用。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:01:51.007

您应该确保 ObservableCollection 是从 UI 线程枚举结束编辑的。为此，请像这样使用它：

```
Application.Current.Dispatcher.BeginInvoke(new Action(() =>
{
    MyCollection.Add(new Item());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:03:21.530

除非其他人也对同一对象进行锁定，否则锁定对象不会做**任何事情。**如果您绝对必须从后台线程访问此集合，那么您应该确保枚举集合的线程和修改集合的线程都锁定相同的对象。

它也被认为是锁定专用锁定对象而不是公共可访问对象的良好做法，例如

```
public class MyClass
{
    private object _mylock = new object();
    private ObservableCollection<string> _myCollection = new ObservableCollection<string>();

    public void DoEnumerate()
    {
        lock (_mylock)
        {
            foreach (var item in _myCollection)
            {
                // Do something
            }
        }
    }

    public void Modify()
    {
        lock (_mylock)
        {
            // Modify the collection here
        }
    }
} 
```

如果您正在编写 GUI 应用程序，那么通常最好只在 UI 线程上修改集合 - 如果您需要对集合进行一些后台处理，则考虑在 UI 线程上获取集合的副本（例如数组）然后后台线程对其进行处理。

# php - Yii 保存了许多 MANY_MANY 关系

> ID：14710068
> 
> 赞同：0
> 
> 时间：2013-02-05T14:40:00.343
> 
> 标签：php, forms, activerecord, yii, many-to-many

# 信息

我在保存具有许多 MANY_MANY 关系的模型时遇到了一些问题。我有一个页面，您可以在其中添加产品属性以及产品属性级别。我现在要做的是在产品的更新页面上添加对此的支持。因此，当我进入更新页面时，我将看到所有产品属性，并且对于每个产品属性，都会有一个下拉列表，其中包含该特定产品属性的相关产品属性级别。

# 数据库

**产品**

*   ID
*   ETC

**产品属性**

*   ID
*   ETC

**产品属性级别**

*   ID
*   product_attribute_id ## FK
*   ETC

**ProductProductAttributeLevel** -- 这是数据透视表

*   product_id ## FK PK
*   product_attribute_level_id ## FK PK

# 活动记录

产品：

```
class Product extends S360ActiveRecord {

    public function behaviors() {
        return array('CAdvancedArBehavior' => array(
            'class' => 'application.extensions.CAdvancedArBehavior')
        );
    }

    public function rules() {
        return array(
            array('attributeLevels', 'safe'),
        );
    }

    public function relations() {
        return array(
            'attributeLevels' => array(self::MANY_MANY,
                'ProductAttributeLevel',
                'product_product_attribute_level(product_id,product_attribute_level_id)'
            ),
        );
    }

} 
```

产品属性：

```
class ProductAttribute extends S360ActiveRecord {

    public function relations() {
        return array(
            'levels' => array(self::HAS_MANY, 'ProductAttributeLevel', 'product_attribute_id'),
        );
    }

} 
```

产品属性级别：

```
class ProductAttributeLevel extends S360ActiveRecord {

    public function relations() {
        return array(
            'productAttribute' => array(self::BELONGS_TO, 'ProductAttribute', 'product_attribute_id'),
            'products' => array(self::MANY_MANY, 'Product', 'product_product_attribute_level(product_attribute_level_id,product_id)'),
        );
    }
} 
```

ProductProductAttributeLevel:

```
class ProductProductAttributeLevel extends S360ActiveRecord {

    public function relations()
    {
        return array(
            'productAttributeLevel' => array(self::BELONGS_TO, 'ProductAttributeLevel', 'product_attribute_level_id'),
            'product' => array(self::BELONGS_TO, 'Product', 'product_id'),
        );
    }

} 
```

我的 ProductController 更新产品的方法如下所示：

```
public function actionUpdate($id) {

    $model = $this->loadModel($id);
    $this->performAjaxValidation($model);

    if (isset($_POST['Product'])) {
        $model->attributes = $_POST['Product'];

        if ($model->save()) {
            $this->redirect(array('index'));
        }
    }

  $this->render('update', array('model' => $model));

} 
```

我的表单视图中的相关部分：

```
<?php 
    $form=$this->beginWidget('S360ActiveForm', array(
        'id' => 'product-form',
        'enableAjaxValidation' => true,
    )); 
?>

<?php $attributes = ProductAttribute::model()->findAllByAttributes(array('survey_id' => $model->parent_id)); if ($attributes): ?>
<div class="span6">
    <?php foreach ($attributes as $attribute) {
        echo $form->dropDownListRow($model, 'attributeLevels',
            CMap::mergeArray(
                array('0' => Yii::t('backend','No attribute level')),
                CHtml::listData($attribute->levels, 'id', 'label')
            ),
            array('class' => 'span5')
        );
    }?>
</div>
<?php endif; ?> 
```

# 问题

我得到这个 CDBException：

> CDbCommand 未能执行 SQL 语句：SQLSTATE[23000]：完整性约束违规：1452 无法添加或更新子行：外键约束失败（`product_product_attribute_level`，CONSTRAINT `product_product_attribute_level_ibfk_2`FOREIGN KEY ( `product_attribute_level_id`) REFERENCES `product_attribute_level`( `id`) ON DELE）。执行的 SQL 语句是： insert into product_product_attribute_level (product_id, product_attribute_level_id) values ('5', '0')

问题是，虽然 ID 为“0”的 product_attribute_level 不存在，但 ID 从“1”开始。我将如何更改它以使其插入正确的 ID 号？

# 我想要的例子

假设我有 2 个产品属性；属性 1 和属性 2。Attribute1 具有产品属性级别 Attribute1_Level1 和 Attribute1_Level2。Attribute2 具有产品属性级别 Attribute2_Level1、Attribute2_Level2 和 Attribute2_Level3。

当我进入我的产品编辑/更新页面时，我想看到这个： [属性 http://img201.imageshack.us/img201/9252/screenshot20130207at103.png](http://img201.imageshack.us/img201/9252/screenshot20130207at103.png) [Attribute2 Dropdown http://img405.imageshack.us/img405 /9252/screenshot20130207at103.png](http://img405.imageshack.us/img405/9252/screenshot20130207at103.png)[![属性 1 下拉菜单](../Images/79f4dbef908ce1ad05a9d5c1d5dd2364.png)](https://i.stack.imgur.com/AVVZ6.png)

产品属于调查。产品属性也属于调查，因此获取产品*可以*拥有的所有产品属性很容易：

```
$attributes = ProductAttribute::model()->findAllByAttributes(array('survey_id' => $product->survey_id)); 
```

在此之后，我需要获取属于每个属性的所有产品属性级别，这也很容易：

```
foreach ($attributes as $attribute) {

    echo $form->dropDownList($attribute, 'label',
        CHtml::listData($attribute->levels, 'id', 'label'),
        $htmlOptions
    );

} 
```

问题是如何将它与产品连接起来，并根据我从不同下拉列表中选择的内容相应地更新其“$product->attributeLevels”关系。$product->attributeLevels 应该是 ProductAttributeLevel 的列表，并且应该通过表“product_product_attribute_level”存储。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:49:41.623

当然，您是从下拉列表中选择的？因为如果不是，您确实在发送“0”

```
<?php foreach ($attributes as $attribute) {
        echo $form->dropDownListRow($model, 'attributeLevels',
            CMap::mergeArray(
                // **HERE**
                array('0' => Yii::t('backend','No attribute level')),
                CHtml::listData($attribute->levels, 'id', 'label')
            ),
            array('class' => 'span5')
        );
    }?> 
```

如果您想要的是将不代表记录的第一个选项作为第一个选项，则有两个选项，使用文档中的[dropDownList](http://www.yiiframework.com/doc/api/1.1/CHtml#dropDownList-detail)`prompt`或`empty`属性：

> *   prompt：字符串，指定显示为第一个列表选项的提示文本。它的值为空。请注意，提示文本不会是 HTML 编码的。
>     
>     
> *   empty：字符串，指定空选对应的文本。它的值为空。'empty' 选项也可以是一个值-标签对数组。每对将用于在开始时呈现一个列表选项。请注意，文本标签不会进行 HTML 编码。

现在，您需要一个属性级别的下拉列表，但您希望它们保存在产品上。因此迭代属性，获取其级别，但将它们保存在产品上，如下所示：

```
<?php foreach ($attributes as $i => $attribute) {
        echo $form->dropDownListRow($product, "[$i]attributeLevels",
            CHtml::listData($attribute->levels, 'id', 'label'),
            array('class' => 'span5', 'prompt' => 'No attribute level')
        );
    }?> 
```

现在要将它们保存在您的产品上，请在您的控制器中执行此操作：

```
public function actionUpdate($id) {

  $model = $this->loadModel($id);
  $this->performAjaxValidation($model);

  if (isset($_POST['Product'])) {
    $attrLevels = $_POST['Product']['attributeLevels'];
    unset($_POST['Product']['attributeLevels']);
    $model->attributes = $_POST['Product'];

    if( $model->save() ) {
      $valid=true;
      foreach($attrLevels as $i=>$attrLevel)
      {
        $pivot = new ProductProductAttributeLevel;
        $pivot->product_id = $model->id;
        $pivot->product_attribute_level_id = $attrLevel;
        $valid=$item->save() && $valid;
      }
      if($valid){
        $this->redirect(array('index'));
      }
    }
  }

  $this->render('update', array('model' => $model));

} 
```

*免责声明：复制/粘贴可能不起作用，但你明白了*

# javascript - 我的按钮的 settimeout 触发器未加载

> ID：14710070
> 
> 赞同：0
> 
> 时间：2013-02-05T14:40:11.233
> 
> 标签：javascript

我有一个按钮，我在页面加载后自动点击什么。我使用了 setTimeout 但它似乎不起作用。怎么了？它在stackoverflow中的其他类似帖子中起作用，这是我从中得到这个想法的地方，但由于某些未知的原因对我来说在我的代码中不起作用

```
 $(document).ready(function() {
                    jQuery(function($){
                        // The variable jcrop_api will hold a reference to the
                        // Jcrop API once Jcrop is instantiated.
                        var jcrop_api;

                        initJcrop();

                        // The function is pretty simple
                        function initJcrop()//{{{
                        {

                          // Invoke Jcrop in typical fashion
                          $('#target').Jcrop({
                            onRelease: releaseCheck,

                          },function(){

                            jcrop_api = this;
                            // Setup and dipslay the interface for "enabled"
                            $('#can_move').attr('checked','checked');

                          });

                        };
                        function releaseCheck()
                        {
                          jcrop_api.setOptions({ allowSelect: true });
                          $('#can_click').attr('checked',false);
                        };

                        $('#setSelect').click(function(e) {
                          // Sets a random selection
                          jcrop_api.setSelect([0,0,400,118]);
                        });

                      });
         setTimeout(function() {
            $('#setSelect').trigger('click');
        },10);
    });

<button id="setSelect">setSelect</button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:48:11.860

异步顺序可能存在问题：

例如。在设置处理程序`setTimeout`之前弹出`click`，或者可能在设置`click`处理程序之后但在设置之前弹出`jcrop_api`。请注意，仅仅因为一行低于另一行并不意味着它稍后会执行 - 因为您无法控制何时调用初始化的回调`jcrop_api`。

添加`console.log`行可能有助于调试此问题并查看代码是否按您计划的顺序执行。

要修复事情的顺序，您可以仅在初始化 jcrop_api 后设置点击处理程序，并仅在设置点击处理程序后设置超时（也许您根本不需要超时）。

# php - PHPExcel异常：公式错误：意外，

> ID：14710071
> 
> 赞同：1
> 
> 时间：2013-02-05T14:40:13.563
> 
> 标签：php, phpexcel

显然，当 PHPExcel 尝试解析公式时，我遇到了这个问题`'=_xlfn.LOGNORM.INV(1-$AB2,$AW$6,$AX$6)'`

关于为什么会发生这种情况的任何想法？如果逗号`,`不是函数参数分隔符，那是什么？

编辑

根据：[http ://www.excelfunctions.net/Excel-Lognorm-Inv-Function.html](http://www.excelfunctions.net/Excel-Lognorm-Inv-Function.html)

lognorm.inv 基本上只是 loginv 的别名。所以我尝试添加：

```
'LOGNORM.INV' => array('category' => PHPExcel_Calculation_Function::CATEGORY_STATISTICAL,
'functionCall' => 'PHPExcel_Calculation_Statistical::LOGINV',
'argumentCount' => '3' 
```

到 Calculations.php，但这似乎会导致相同的错误。那么还有其他的行动路线吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T14:45:19.920

更有可能是它未能将 _xlfn.LOGNORM.INV 识别为有效函数，但抛出了一个令人困惑的异常...... Docs 文件夹包含所有已识别函数名称的列表，以及它们是否受支持PHPExcel... 和 =_xlfn.LOGNORM.INV 未在此处列出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:44:47.077

您的问题中几乎没有可以给您答案的信息。

但是，我尝试了[谷歌搜索](http://goo.gl/83IPh)，发现[了这个](http://phpexcel.codeplex.com/discussions/255425)。也许它可以帮助您调试。

# css - CKEditor 中的图像边距

> ID：14710084
> 
> 赞同：1
> 
> 时间：2013-02-05T14:40:46.810
> 
> 标签：css, image, ckeditor

图像属性对话框具有`HSpace`和`VSpace`设置。当我转到高级选项卡时，我可以看到它实际上是在设置边距样式。我希望能够单独设置每个边距。例如，右对齐的图像将具有左右边距，但没有上边距或右边距。有没有办法允许单独设置四个边距中的每一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:55:26.230

使用 CSS 优于内联样式。您可以使用 CK 的样式表创建自己的样式并将它们应用于您的图像。请注意，CK 有一个单独的样式表用于编辑器本身以及一个用于编辑器窗格的内容。

# c# - LINQ to Objects 查询忽略层次结构中的空对象

> ID：14710088
> 
> 赞同：-1
> 
> 时间：2013-02-05T14:41:01.907
> 
> 标签：c#, .net, linq

我想使用 LINQ-to-objects 来查询几个层次的对象集合，以提取一个值。例如，给定一个 Entity 对象，如果标志设置为 1，我想获取 emailAddress 字符串，否则为 null：

```
 Entity.CommunicationCollection.Communication.CommunicationDetail.EmailAddress 
```

CommunicationDetail 如下所示：

```
 public class CommunicationDetail
 {
     public int Flag;
     public string EmailAddress;
 } 
```

我提出的查询如下所示：

```
 string email = Entity.CommunicationCollection.FirstOrDefault(x => x.Communication.CommunicationDetail.Flag == 1).EmailAddress; 
```

这样做的问题是层次结构中的任何空对象都会导致空引用异常。有没有办法构造查询以某种方式忽略空值，而不首先检查每个对象？（上面是一个简化的例子，我正在做的项目中的嵌套要深得多。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T14:46:56.933

好吧，您要么必须检查所有内容，要么使用`??`默认值，这仍然很尴尬。我怀疑你想要类似的东西：

```
var email = Entity.CommunicationCollection
                  .Where(x => x.Communication != null &&
                              x.Communication.CommunicationDetail != null &&
                              x.Communication.CommunicationDetail.Flag == 1)
                  .Select(x => x.Communication.CommunicationDetail.EmailAddress)
                  .FirstOrDefault(); 
```

请注意，`email`仍然可以`null`在这里...

显然，如果`x.Communication`永远不能为空，或者`x.Communication.CommunicationDetail`永远不能为空，您可以删除这些检查 - 目前尚不清楚您的模型中什么可以为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:47:02.743

我强烈建议使用称为 IsNull 或 IsNotNull 之类的通用方法创建一个类，并允许它采用任何对象类型并检查对象是否为空。这将使您不必对正在查询的每个对象进行单独的验证

```
public class NullChecker where T : class
{
    public static bool IsNotNull<T>(default(T) type)
    {
        return type != null;
    }
} 
```

# iphone - 拒绝后提交 iOS 二进制文件

> ID：14710091
> 
> 赞同：2
> 
> 时间：2013-02-05T14:41:17.887
> 
> 标签：iphone, ios, app-store-connect

我最近提交了我的应用程序，但由于错误而被拒绝。我已经解决了这个问题，但在应用程序审查期间我也实施了新的东西。现在我可以上传具有这些新功能的二进制文件，还是应该提交旧版本的无错误版本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T14:42:20.083

审查将（就目前所知）基本上重新开始。因此，没有理由不提交您应用的最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:56:57.847

Apple 测试了您的应用程序并拒绝了它，因为它有一些错误。Apple 只是测试您的应用程序，他们不会停止更新您的应用程序。因此，您可以更新您的应用程序。

但是请确保在实现新功能后，应用程序不应该被新的错误包围，因为苹果会一步一步地重新测试你的应用程序，如果他们发现新的错误他们会拒绝它。

# java - 严重：无法初始化 Jenkins

> ID：14710095
> 
> 赞同：4
> 
> 时间：2013-02-05T14:41:23.973
> 
> 标签：java, jenkins

我已经在我的 Linux 上安装了 jenkins，但是当我尝试启动服务器时出现以下错误，如下图所示。（请注意，我也使用 --httpport 更改了端口。）

我的电脑上安装了最新版本的 java。

谁能告诉我是什么导致了以下问题？

```
pcadmin@IMSEZ-D0137:~/Desktop$ java -jar jenkins.war --httpPort=9000
Running from: jenkins.war
webroot: $user.home/.jenkins
05-Feb-2013 8:04:10 p.m. winstone.Logger logInternal
INFO: Beginning extraction from war file
05-Feb-2013 8:04:11 p.m. hudson.WebAppMain contextInitialized
SEVERE: Failed to initialize Jenkins
java.lang.ExceptionInInitializerError
   at java.lang.Class.initializeClass(libgcj.so.10)
   at hudson.WebAppMain.installLogger(WebAppMain.java:253)
   at hudson.WebAppMain.contextInitialized(WebAppMain.java:104)
   at winstone.WebAppConfiguration.<init>(WebAppConfiguration.java:876)
   at winstone.HostConfiguration.initWebApp(HostConfiguration.java:129)
   at winstone.HostConfiguration.<init>(HostConfiguration.java:71)
   at winstone.HostGroup.initHost(HostGroup.java:87)
   at winstone.HostGroup.<init>(HostGroup.java:47)
   at winstone.Launcher.<init>(Launcher.java:177)
   at winstone.Launcher.main(Launcher.java:384)
   at java.lang.reflect.Method.invoke(libgcj.so.10)
   at Main._main(Main.java:273)
   at Main.main(Main.java:98)
Caused by: java.lang.NullPointerException
   at com.thoughtworks.xstream.core.JVM.isOpenJDK(JVM.java:72)
   at com.thoughtworks.xstream.core.JVM.canUseSun14ReflectionProvider(JVM.java:198)
   at com.thoughtworks.xstream.core.JVM.bestReflectionProvider(JVM.java:175)
   at com.thoughtworks.xstream.XStream.<init>(XStream.java:431)
   at com.thoughtworks.xstream.XStream.<init>(XStream.java:385)
   at com.thoughtworks.xstream.XStream.<init>(XStream.java:323)
   at hudson.util.XStream2.<init>(XStream2.java:78)
   at jenkins.model.Jenkins.<clinit>(Jenkins.java:3763)
   at java.lang.Class.initializeClass(libgcj.so.10)
   ...12 more
05-Feb-2013 8:04:11 p.m. winstone.Logger logInternal
SEVERE: Error during context startup for webapp webapp
java.lang.ExceptionInInitializerError
   at java.lang.Class.initializeClass(libgcj.so.10)
   at hudson.WebAppMain.installLogger(WebAppMain.java:253)
   at hudson.WebAppMain.contextInitialized(WebAppMain.java:104)
   at winstone.WebAppConfiguration.<init>(WebAppConfiguration.java:876)
   at winstone.HostConfiguration.initWebApp(HostConfiguration.java:129)
   at winstone.HostConfiguration.<init>(HostConfiguration.java:71)
   at winstone.HostGroup.initHost(HostGroup.java:87)
   at winstone.HostGroup.<init>(HostGroup.java:47)
   at winstone.Launcher.<init>(Launcher.java:177)
   at winstone.Launcher.main(Launcher.java:384)
   at java.lang.reflect.Method.invoke(libgcj.so.10)
   at Main._main(Main.java:273)
   at Main.main(Main.java:98)
Caused by: java.lang.NullPointerException
   at com.thoughtworks.xstream.core.JVM.isOpenJDK(JVM.java:72)
   at com.thoughtworks.xstream.core.JVM.canUseSun14ReflectionProvider(JVM.java:198)
   at com.thoughtworks.xstream.core.JVM.bestReflectionProvider(JVM.java:175)
   at com.thoughtworks.xstream.XStream.<init>(XStream.java:431)
   at com.thoughtworks.xstream.XStream.<init>(XStream.java:385)
   at com.thoughtworks.xstream.XStream.<init>(XStream.java:323)
   at hudson.util.XStream2.<init>(XStream2.java:78)
   at jenkins.model.Jenkins.<clinit>(Jenkins.java:3763)
   at java.lang.Class.initializeClass(libgcj.so.10)
   ...12 more
05-Feb-2013 8:04:16 p.m. winstone.Logger logInternal
INFO: HTTP Listener started: port=9000
05-Feb-2013 8:04:16 p.m. winstone.Logger logInternal
INFO: AJP13 Listener started: port=8009
05-Feb-2013 8:04:16 p.m. winstone.Logger logInternal
SEVERE: Error during servlet context shutdown
java.lang.NoClassDefFoundError: jenkins.model.Jenkins
   at java.lang.Class.initializeClass(libgcj.so.10)
   at hudson.WebAppMain.contextDestroyed(WebAppMain.java:336)
   at winstone.WebAppConfiguration.destroy(WebAppConfiguration.java:1167)
   at winstone.HostConfiguration.destroyWebApp(HostConfiguration.java:148)
   at winstone.HostConfiguration.destroy(HostConfiguration.java:156)
   at winstone.HostGroup.destroy(HostGroup.java:77)
   at winstone.Launcher.shutdown(Launcher.java:337)
   at winstone.Launcher.<init>(Launcher.java:199)
   at winstone.Launcher.main(Launcher.java:384)
   at java.lang.reflect.Method.invoke(libgcj.so.10)
   at Main._main(Main.java:273)
   at Main.main(Main.java:98)
05-Feb-2013 8:04:16 p.m. winstone.Logger logInternal
INFO: Winstone shutdown successfully
05-Feb-2013 8:04:16 p.m. winstone.Logger logInternal
SEVERE: Container startup failed
java.io.IOException: Failed to start a listener: winstone.ssl.HttpsListener
   at winstone.Launcher.spawnListener(Launcher.java:229)
   at winstone.Launcher.<init>(Launcher.java:185)
   at winstone.Launcher.main(Launcher.java:384)
   at java.lang.reflect.Method.invoke(libgcj.so.10)
   at Main._main(Main.java:273)
   at Main.main(Main.java:98)
Caused by: java.lang.NoClassDefFoundError: winstone.ssl.HttpsListener
   at java.lang.Class.initializeClass(libgcj.so.10)
   at java.lang.Class.forName(libgcj.so.10)
   at java.lang.Class.forName(libgcj.so.10)
   at winstone.Launcher.spawnListener(Launcher.java:213)
   ...5 more
Caused by: java.lang.ClassNotFoundException: sun.security.util.DerValue not found in java.net.URLClassLoader{urls=[file:/tmp/winstonev2gtdejar], parent=gnu.gcj.runtime.SystemClassLoader{urls=[file:jenkins.war], parent=gnu.gcj.runtime.ExtensionClassLoader{urls=[], parent=null}}}
   at java.net.URLClassLoader.findClass(libgcj.so.10)
   at java.lang.ClassLoader.loadClass(libgcj.so.10)
   at java.lang.ClassLoader.loadClass(libgcj.so.10)
   at java.lang.Class.initializeClass(libgcj.so.10) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T15:12:08.813

这是一份类似的报告：[https ://groups.google.com/forum/#!msg/jenkinsci-users/BqQxg8AByXY/-Rs3rmWKWYYJ](https://groups.google.com/forum/#!msg/jenkinsci-users/BqQxg8AByXY/-Rs3rmWKWYYJ)

根据最初的回应，这是使用“gcj”的原因。解决方案是使用 OpenJDK 或 Oracle JDK。

# regex - 这个正则表达式会在字符串中找到括号/括号中的术语吗？

> ID：14710097
> 
> 赞同：0
> 
> 时间：2013-02-05T14:41:31.840
> 
> 标签：regex, string, powershell, special-characters

考虑： `"\[|\(phone\)\]"`

我们正在构建一个元数据字段，并且需要标记包含术语“ `phone`”的文件名。不存在大小写标准，所以我可以看到混合或单一大小写（`phone` `Phone` `PHONE`等）的任何变化。可能有也可能没有空格来描述单词；有时有下划线——所以我不能使用单词边界。在**所有**情况下，单词`phone`都包含在方括号`[]`或圆括号中`()`。

我尝试为 Powershell 脚本构建的正则表达式将查找`[`或`(`后跟不区分大小写`photo`并以`]`or结尾的模式`)`。

`"\[|\(phone\)\]"` <-- 这就是我在这里得到的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:46:48.163

Powershell 使用 .NET 正则表达式，因此它[支持](http://msdn.microsoft.com/en-us/library/az24scfc.aspx#miscellaneous_constructs). `(?i)`但事实证明，Powershell`-match`和`-replace`,默认情况`-imatch`下不`-ireplace`区分[大小写](http://www.regular-expressions.info/powershell.html)。所以正则表达式不必太复杂：

```
\[phone\]|\(phone\) 
```

它将匹配文本，例如：`[phone]`或`(PhONe)`

请注意，正则表达式非常具体。`()`在这种情况下， or`[]`和之间不允许有空格`phone`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:47:48.317

我会通过接受两种可能的解决方案之一来做到这一点，

```
\[phone\]|\(phone\) 
```

这样，您匹配 (phone) 或 [phone]，但不匹配 [phone) 和 (photo]。

但是，您必须设置一个标志以匹配不区分大小写的内容。例如，在 Javascript 中，您可以在分隔符后面添加一个 i，例如 /[phone]|(phone)/i

# asp.net - 两个 dll 中都存在“ModelClientValidationRule”类型

> ID：14710099
> 
> 赞同：15
> 
> 时间：2013-02-05T14:41:40.600
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, visual-studio-2010, visual-studio-2012

我下载了[用asp.net mvc3 **Visual Studio 2010编写的示例源代码**](http://andrey.moveax.ru/file.axd?file=mvc3-in-depth%2f12-custom-clientside-validation%2fMVCDemo-Part12.zip)

**通过Visual Studio 2012**打开解决方案文件。它将源代码转换为 2012 并打开解决方案。

当我构建解决方案时出现错误：

> 错误 1 ​​类型“System.Web.Mvc.ModelClientValidationRule”存在于“c:\Program Files (x86)\Microsoft ASP.NET\ASP.NET MVC 3\Assemblies\System.Web.Mvc.dll”和“c”中:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v2.0\Assemblies\System.Web.WebPages.dll' C:\studyCode\MVCDemo-Part12\MVCDemo-Part12\MVCDemo\Attributes\验证\EqualAttribute.cs 54 28 MVCDemo

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-05T14:41:40.600

只需从解决方案参考中删除**System.Web.WebPages**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-07T09:24:42.823

这个答案也可以解决您的问题：

1.  在根 Web.config 文件中，使用键 webPages:Version 和值 1.0.0.0 添加一个新条目。

    ```
    <appSettings>
    <add key="webpages:Version" value="1.0.0.0"/>
    <add key="webpages:Version" value="1.0.0.0"/>
    <add key="ClientValidationEnabled" value="true"/>
    <add key="UnobtrusiveJavaScriptEnabled" value="true"/>
    </appSettings> 
    ```

`2.In Solution Explorer, right-click the project name and then select Unload Project. Then right-click the name again and select Edit ProjectName.csproj.`

`3.Locate the following assembly references:`

```
 <Reference Include="System.Web.WebPages"/>
    <Reference Include="System.Web.Helpers" /> 
```

将它们替换为以下内容：

```
<Reference Include="System.Web.WebPages, Version=1.0.0.0,
Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL "/>
<Reference Include="System.Web.Helpers, Version=1.0.0.0,
Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL "/> 
```

4.保存更改，关闭您正在编辑的项目 (.csproj) 文件，然后右键单击该项目并选择重新加载。

参考：[http ://forums.asp.net/t/1723108.aspx/1](http://forums.asp.net/t/1723108.aspx/1)

也可以试试：[http ://www.asp.net/learn/whitepapers/mvc4-release-notes#_Toc303253815](http://www.asp.net/learn/whitepapers/mvc4-release-notes#_Toc303253815)

**或者你也可以试试这个**

编辑：

```
ProjectName.csproj 
```

改变

```
<Reference Include="System.Web.WebPages"/> 
```

到

```
<Reference Include="System.Web.WebPages, Version=1.0.0.0,
Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL "/><br/><br/> 
```

*注意：此[问题的可能重复项](https://stackoverflow.com/questions/8512021/build-errors-system-web-mvc-modelclientvalidationrule-conflicts/9551791#9551791)*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-16T23:02:05.973

右键单击VS2010中的项目名称。单击“添加可部署的依赖项”。重建

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-11T15:50:28.037

[http://www.asp.net/whitepapers/mvc4-release-notes](http://www.asp.net/whitepapers/mvc4-release-notes)

从 MVC 3 升级到 MVC 4 时，请参阅此链接以及已知错误：

按照步骤操作，您应该会在几分钟内启动并运行。

仅供参考 - 如果您从网上下载了一个 zip 文件，请右键单击该文件，单击“属性”并在解压缩之前选择“取消阻止”，否则您会感到痛苦。

我添加了***注释***——其余部分来自上面引用的站点，在从 MVC3 升级到 4 时存在已知错误：

***********自动升级******* ***** 将 ASP.NET MVC 3 项目升级到 ASP.NET MVC 4 ASP.NET MVC 4 可以与 ASP.NET MVC 3 并排安装在同一台计算机上，这使您可以灵活地选择何时升级 ASP .NET MVC 3 应用程序到 ASP.NET MVC 4。*****

 *****最简单的升级方法是创建一个新的 ASP.NET MVC 4 项目并将现有 MVC 3 项目中的所有视图、控制器、代码和内容文件复制到新项目中，然后更新新项目中的程序集引用匹配您正在使用的任何非 MVC 模板包含的程序集。如果您对 MVC 3 项目中的 Web.config 文件进行了更改，则还必须将这些更改合并到 MVC 4 项目中的 Web.config 文件中。

***********手动升级******* *** ***** 要将现有的 ASP.NET MVC 3 应用程序手动升级到版本 4，请执行以下操作：*****

 *****在项目中的所有 Web.config 文件中（项目根目录中有一个，Views 文件夹中有一个，项目中每个区域的 Views 文件夹中有一个），替换以下文本的每个实例（注意：在使用 Visual Studio 2012 创建的项目中找不到 System.Web.WebPages，Version=1.0.0.0）：System.Web.Mvc，Version=3.0.0.0 System.Web.WebPages，Version=1.0.0.0 System.Web.Helpers ，版本=1.0.0.0 System.Web.WebPages.Razor，版本=1.0.0.0

带有以下相应文本：

```
System.Web.Mvc, Version=4.0.0.0
System.Web.WebPages, Version=2.0.0.0
System.Web.Helpers, Version=2.0.0.0
System.Web.WebPages.Razor, Version=2.0.0.0 
```

****注意 - “网页：版本”根本不在我的设置中......我只添加了“PreserveLoginUrl”行*****

 **在根 Web.config 文件中，将 webPages:Version 元素更新为“2.0.0.0”并添加一个值为“true”的新 PreserveLoginUrl 键：

在解决方案资源管理器中，右键单击引用并选择管理 NuGet 包。在左侧窗格中，选择 Online\NuGet 官方包源，然后更新以下内容：ASP.NET MVC 4（可选）jQuery、jQuery Validation 和 jQuery UI（可选）实体框架（可选）Modernizr

****这是我必须去让它我的版本工作.... ******

 **在解决方案资源管理器中，右键单击项目名称，然后选择卸载项目。然后再次右键单击该名称并选择 Edit ProjectName.csproj。找到 ProjectTypeGuids 元素并将 {E53F8FEA-EAE0-44A6-8774-FFD645390401} 替换为 {E3E379DF-F4C6-4180-9B81-6769533ABE47}。保存更改，关闭您正在编辑的项目 (.csproj) 文件，右键单击该项目，然后选择重新加载项目。如果项目引用了使用以前版本的 ASP.NET MVC 编译的任何第三方库，请打开根 Web.config 文件并在配置部分下添加以下三个 bindingRedirect 元素：

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="System.Web.Helpers" 
           publicKeyToken="31bf3856ad364e35" />
      <bindingRedirect oldVersion="1.0.0.0" newVersion="2.0.0.0"/>
    </dependentAssembly>
    <dependentAssembly>
      <assemblyIdentity name="System.Web.Mvc" 
           publicKeyToken="31bf3856ad364e35" />
      <bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="4.0.0.0"/>
    </dependentAssembly>
    <dependentAssembly>
      <assemblyIdentity name="System.Web.WebPages" 
           publicKeyToken="31bf3856ad364e35" />
      <bindingRedirect oldVersion="1.0.0.0" newVersion="2.0.0.0"/>
    </dependentAssembly>
  </assemblyBinding>
</runtime>
</configuration> 
```

快乐编码

丹·B。**************

# java - 通过调用另一个线程来停止线程的执行

> ID：14710100
> 
> 赞同：0
> 
> 时间：2013-02-05T14:41:41.040
> 
> 标签：java, multithreading

我有一个监视键盘和鼠标输入的线程。当用户单击我程序中的按钮时，它会激活该线程，然后当用户输入特定组合时，它会在下面的示例代码中调用方法 test()。所以很明显，线程在这个 test() 方法中时不能监视我的输入，所以 spacePressed 永远不会变成真的，因为这个线程在完成之前不能调用它的另一个方法。

```
 public void test()
{
    spacePressed = false; 
    while(!spacePressed)
    {
        pasteAtCursorLocation("Test");
        sleepy(1000);
    }
} 
```

那么我可以创建另一个线程来监视输入，并且当按下空格时，它会返回 true 到特定的函数调用。所以它会做我想要的吗？

```
public void test()
{
    SpaceWatcher sw = new SpaceWatcher();
    sw.start();
    while(!sw.SpacePressed())
    {
        pasteAtCursorLocation("Test");
        sleepy(1000);
    }
} 
```

但这会经常调用 SpaceWatcher 吗？那就是 space watch 是否有足够的时间在空间输入调用之间观察输入？

编辑： pasteAtCursorLocation 就像它说的那样，困倦地调用 Thread.sleep(ms)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:57:02.823

也许您应该将该`test()`方法移动到一个新线程并`spacePressed`从事件处理程序中操作共享字段。

这样，您将拥有一个后台线程，它会发挥一些作用，直到变量变为 false 并且事件处理程序由操作系统驱动。

请注意，使用线程监视键盘和鼠标通常不是一个好主意；操作系统发送给您的事件已经是异步的。在一个特殊的线程中等待他们就像两次做同样的事情。

而是使用响应事件处理程序发送的“事件”的工作线程。[查看队列](http://tutorials.jenkov.com/java-util-concurrent/blockingqueue.html)。

事件处理程序：

```
if( spaceWasPressed( keyboardEvent ) ) {
    queue.put( new SpaceWasPressed() );
} 
```

工作线程：

```
while( queue.poll( 1, TimeUnit.SECONDS ) == null ) {
    pasteAtCursorLocation("Test");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:59:49.810

睡眠 1000 毫秒对于计算机来说是一个非常非常长的时间，因此在这之间有足够的时间来做其他事情。该`SpacePressed()`函数只会返回一个布尔值，这是一件非常便宜的事情。

您的方式是正确的方式（当事情变得比您正在做的事情更复杂时，还有很多其他方式）让线程对他人做出反应。`spacePressed`但是在线程之间共享数据（在这种情况下）时，您必须牢记同步。它们需要同步。这可以通过使用[synchronized](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)关键字来完成。另一种选择是声明`spacePressed` [volatile](http://www.ibm.com/developerworks/java/library/j-jtp06197)，这只能在非常特殊的情况下使用（例如仅更改一次的单个标志，或者如果您不在乎是否错过了 true-false-true 更改）。

# xpath - XPath 1.0：选择所有具有给定父节点的子节点，如果父节点没有这样的子节点，则选择空？

> ID：14710106
> 
> 赞同：2
> 
> 时间：2013-02-05T14:42:00.693
> 
> 标签：xpath, vtd-xml

使用 XPath 1.0 和下面的 XML，我如何选择所有具有“b”父级的“c”节点，如果“b”父级没有“c”节点，则选择“”，即`{"c1", "", "c3"}`作为结果节点-设置（按文档顺序）？

我正在使用 VTD-XML 2.11 (Java)，我正在寻找一个 XPath 评估，它将返回上述结果而无需循环。

```
<a>
  <b>
    <c>c1</c>
  </b>
  <b/>
  <b>
    <c>c3</c>
  </b>
</a> 
```

我浏览了问题并找到了一些有趣的指针，例如 Oliver Becker 的方法，但到目前为止我还没有找到解决方案。

任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:53:50.657

您使用什么来评估这些 XPath？我想不出一个很好的方法，但是根据您使用的内容，选择所有`b`s，遍历它们，并为每个使用 c 的值或空白值可能很容易。

这不是一个好方法，但它适用于您的示例输入：

```
//b/c | //b[not(*)] | //b[not(c) and *]/text() 
```

解释是：

*   选择`c`a下的所有s`b`
*   `b`如果元素没有子元素，则选择它们本身
*   `b`选择任何没有`c`子节点的 s 的第一个文本节点。

假设任何`b`带有子元素的元素都至少有一个文本节点并且其中的第一个将完全是空白，这将起作用。

使用 XSLT 进行验证：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="/">
    <root>
      <xsl:for-each select="//b/c | //b[not(*)] | //b[not(c) and *]/text()[1]">
        <item>
          <xsl:value-of select="."/>
        </item>
      </xsl:for-each>
    </root>
  </xsl:template>
</xsl:stylesheet> 
```

在示例输入上运行时的输出：

```
<root>
  <item>c1</item>
  <item></item>
  <item>c3</item>
</root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:15:13.607

像这样的东西？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;
using System.Xml.XPath;
using System.IO;

namespace Xpath
{
    class Program
    {
        static void Main(string[] args)
        {

            string xml = @"<a>
              <b>
                <c>c1</c>
              </b>
              <b/>
              <b>
                <c>c3</c>
              </b>
              <b>x</b>
            </a>";

            XmlDocument doc = new XmlDocument();
            doc.LoadXml(xml);

            string xpath = "//b/c/text()|//b[count(child::*) = 0]|//b[count(child::*) = 0]/text()";

            StringReader stringReader = new StringReader(xml);
            XmlReader xmlReader = XmlReader.Create(stringReader);

            XPathDocument xpathDoc = new XPathDocument(xmlReader);

            XPathNavigator xpathNav = xpathDoc.CreateNavigator();
            XPathNodeIterator xpathIter = xpathNav.Select(xpath);

            foreach (XPathNavigator navigator in xpathIter)
            {
                if (navigator.ValueType == typeof(string))
                {
                    Console.WriteLine("'" + navigator.Value + "'");
                }
            }
        }
    }
} 
```

输出是：

```
'c1'
''
'c3'
'x' 
```

# mysql - MySQL选择内连接和联合

> ID：14710107
> 
> 赞同：0
> 
> 时间：2013-02-05T14:42:01.957
> 
> 标签：mysql, sql, union, inner-join

我有这两张桌子。我有当前玩家 id_player，我想从这个玩家 (id_player) 和他的对手信息中选择所有游戏。当前玩家和对手玩家连接到相同的 id_game。或者

![表](../Images/f6c893b0e72a6247b4aced7c06db916a.png)

```
table game:`id_game` (...)
table game_player:`id_game_player, id_player, id_game`(...) 
```

> “给我所有与当前玩家和他的对手分开的游戏信息，并加入他们游戏的信息（按游戏分组）”

结果为：

```
 +---player game info
game1 |
      +---opponent game info

      +---player game info
game2 |
      +---opponent1 game info

      +---player game info
game2 |
      +---opponent2 game info 
```

谁能为我提供 MySQL 解决方案？

谢谢

* * *

编辑：我尝试使用此代码，但我不确定这是最快的方式（在哪里），有没有办法像上面那样对结果进行分组？

```
SELECT * FROM game_player
    JOIN `game` ON game.id_game = game_player.id_game
    WHERE game_player.id_game
    IN (
    SELECT game_player.id_game
    FROM `game_player`
    WHERE game_player.id_player =2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:50:56.817

*试试这个*

```
SET @player_ID = 0;                  -- <<== the playerID
SELECT  a.*, b.*, 'player' Status         -- this is the first part of the union
FROM    game a                            -- which gets all the game of
        INNER JOIN game_player b          -- the selected player and its info
            ON a.id_game = b.id_game
WHERE   id_player = @player_ID 
UNION ALL
SELECT  d.*, c.*, 'opponent' status
FROM    game_player c
        INNER JOIN
        (
            SELECT  a.*
            FROM    game aa
                    INNER JOIN game_player bb
                        ON aa.id_game = bb.id_game
            WHERE   bb.id_player = @player_ID
        ) d ON c.id_game = d.id_game AND c.id_player <> @player_ID
ORDER   BY id_game, status 
```

# maven - Maven 配置文件：maven-antrun-plugin & maven-war-plugin 交互

> ID：14710112
> 
> 赞同：0
> 
> 时间：2013-02-05T14:42:06.527
> 
> 标签：maven, maven-profiles, maven-antrun-plugin

我有一个`Spring framework`项目，其中包含以下三个文件`src/main/webapp/WEB-INF`：

```
project.propterties
project-servlet.xml
project-security.xml 
```

在构建的情况下，我正在尝试`maven profiles`按如下方式“注入”上述文件：`prod`

```
 <profile>
        <id>prod-build</id>
        <build>
            <plugins>
                <plugin>
                    <artifactId>maven-antrun-plugin</artifactId>
                    <version>1.7</version>
                    <executions>
                        <execution>
                            <phase>prepare-package</phase>
                            <goals>
                                <goal>run</goal>
                            </goals>
                            <configuration>
                                <target>
                                    <delete
                                        file="${project.build.directory}/${project.build.finalName}/WEB-INF/project.properties" />
                                    <copy file="src/main/config/prod/project.properties"
                                        tofile="${project.build.directory}/${project.build.finalName}/WEB-INF/project.properties" />
                                </target>
                            </configuration>
                        </execution>
                    </executions>
                </plugin>
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-war-plugin</artifactId>
                    <version>2.3</version>
                </plugin>
            </plugins>
            <resources>
                <resource>
                    <directory>src/main/resources/prod</directory>
                </resource>
            </resources>
        </build>
    </profile> 
```

问题是`maven-antrun-plugin`当有机会运行时，`war`已经打包好了。蚂蚁`<target>`确实运行并进行了适当的更改，但为时已晚。

命令行：

```
$ mvn -Pprod-build clean install 
```

mvn 输出：

```
 [INFO] --- maven-antrun-plugin:1.7:run (default) @ FocusMVN ---
[INFO] Executing tasks

main:
     [copy] Copying 1 file to J:\work\workspace\FocusMVN\target\myproject\WEB-INF
[INFO] Executed tasks
[INFO] 
[INFO] --- maven-war-plugin:2.3:war (default-war) @ FocusMVN ---
[INFO] Packaging webapp
[INFO] Assembling webapp [FocusMVN] in [J:\work\workspace\FocusMVN\target\myproject]
[INFO] Processing war project
[INFO] Copying webapp resources [J:\work\workspace\FocusMVN\src\main\webapp]
[INFO] Webapp assembled in [3198 msecs]
[INFO] Building war: J:\work\workspace\FocusMVN\target\myproject.war
[INFO] 
[INFO] --- maven-install-plugin:2.3.1:install (default-install) @ FocusMVN ---
[INFO] Installing J:\work\workspace\FocusMVN\target\myproject.war to C:\Users\mansoork\.m2\repository\ca\utoronto\med\dc\FocusMVN\0.0.1-SNAPSHOT\FocusMVN-0.0.1-SNAPSHOT.war
[INFO] Installing J:\work\workspace\FocusMVN\pom.xml to C:\Users\mansoork\.m2\repository\ca\utoronto\med\dc\FocusMVN\0.0.1-SNAPSHOT\FocusMVN-0.0.1-SNAPSHOT.pom
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------ 
```

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:48:43.673

在*阶段*使用*prepare-package*而不是*package*。

而不是*maven-antrun-plugin*尝试使用*copy-maven-plugin*

```
<plugin>
            <groupId>com.github.goldin</groupId>
            <artifactId>copy-maven-plugin</artifactId>
            <version>0.2.5</version>
            <executions>
                <execution>
                    <id>create-archive</id>
                    <phase>prepare-package</phase>
                    <goals>
                        <goal>copy</goal>
                    </goals>
                    <configuration>
                        <resources>
                            <resource>
                            <targetPath>${basedir}/target/</targetPath>
                            <directory>${basedir}/src/main/webapp/WEB-INF</directory>
                            <includes>
                                <include>**/project*</include>
                            </includes>
                            </resource>
                        </resources>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T16:05:07.490

你注意到这条线了吗

```
[INFO] Copying webapp resources [J:\work\workspace\FocusMVN\src\main\webapp] 
```

这是怎么回事 ？

The `maven-war-plugin` copy the content of `src/main/webapp` (which contains your *dev* `project.properties`) to the war. And while doing this it replace the one just copied by the ant task.

What you can try is to exclude the `project.properties` from the fileset copied by the maven-war-plugin (since it was already copied by your ant task.)

```
<plugin>
    <artifactId>maven-war-plugin</artifactId>
    <version>2.3</version>     
    <configuration>
       <warSourceExcludes>WEB-INF/project.propterties</warSourceExcludes>
    </configuration>
</plugin> 
```

[reference](http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html#warSourceExcludes)

# git - Cygwin git 显示已提交的更改

> ID：14710115
> 
> 赞同：1
> 
> 时间：2013-02-05T14:42:10.863
> 
> 标签：git, version-control, cygwin

我正在使用 git wit cygwin，我也通过 NetBeans 使用 git。我遇到的问题是当我使用 NetBeans 提交更改的文件时，当我`git status`在 cygwin 中运行时，git 仍然向我显示已经提交的更改。不知何故，cygwin 上的 git 版本不同步。有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:00:35.350

我对 phpstorm 和 git bash 有同样的问题。我的问题是 phpstorm 自动将新文件添加到 git，但在 git bash 中它们没有添加。

在您的情况下：当您使用 netbeans 创建新文件时，它会自动将它们添加到 git，但 cygwin 不会。这就是为什么在 cygwin 和 netbeans 中有不同状态的原因。

仅将 netbeans 或 cygwin 用于 git 命令会容易得多。其他方式您必须`git add -A`在 cygwin 中执行，以便将新文件添加到 git。

# ruby-on-rails - 在 Rails 上创建模式的任务顺序

> ID：14710116
> 
> 赞同：0
> 
> 时间：2013-02-05T14:42:11.193
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

所以我有一些我应该在我的 rails 项目中创建的表的架构，想要确保这是这样做的正确方法：

*   **1：**我可以`rails generate model`用来创建初步架构

*   **2：**然后我应该去模型并手动输入我需要的更多依赖项，比如外键、某些字段上的验证器等

*   **3：**去Route.rb，排除我不需要的路由。（它是应用程序的服务部分，基于我主要只需要 GET 的要求）。

*   **4：**转到控制器，我需要它们只是为了返回 json，所以我应该为此修改它们，添加一些 ActiveRecord 代码来处理我在模型中拥有的一对多表。

还有什么我想念的吗？或更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:20:36.460

大部分是正确的，但有几点：

*   当您使用创建模型的其余部分时，您可以将外键添加到表中`rails generate model`。然后，您需要在模型文件（即或）中创建*关联。*您还需要创建一个使该键成为索引的迁移（出于速度目的）。正如您在评论中所说，您始终可以使用迁移调整和编辑模型，只要您再次运行即可。`belongs_to``has_many``db:migrate`

*   运行时既不会创建路由也不会创建控制器`rails generate model`。这些仅与模型一起生成，仅在您创建**脚手架**（即`rails generate scaffold`）时创建。`rails generate controller`如果您不使用脚手架，您需要自己手动添加路由，并且可以运行（或只是自己创建文件）。

# c# - 使用 Timer 在 C# 中更新 UI

> ID：14710117
> 
> 赞同：0
> 
> 时间：2013-02-05T14:42:12.053
> 
> 标签：c#, winforms, visual-studio-2010, user-interface, timer

我正在努力使我的应用程序从串行端口读取数据并更新 UI 上的仪表更有效，我想就处理 UI 更改的代码征求一些建议。我设置了一个计时器来检查发送到 COM 端口的数据，另一个计时器使用从 COM 端口接收的变量更新 UI。基本上正在发生的事情是我正在旋转仪表。这是我处理图形的代码...

```
void timer_Tick(object sender, EventArgs e) //Timer regulates how often the gauge is     updated on the UI
{
    if (pictureBox1.Image != null)
        pictureBox1.Image.Dispose(); // dispose old image (you might consider reusing it rather than making a new one each frame)

    Point test = new Point((int)_xCor, (int)_yCor);
    Image img = new Bitmap(400, 400); // The box tht contains the image <--- Play around with this more
    pictureBox1.Image = img; // Setting the img Image to the pictureBox class?

    Graphics g = Graphics.FromImage(pictureBox1.Image); // G represents a drawing surface
    Matrix mm1 = new Matrix();
    //
    mm1.RotateAt((float)(90 + (((12.5 * state) - 20.95) * 6)), new Point((int)_xrotate, (int)_yrotate), MatrixOrder.Append);
    GraphicsPath gp = new GraphicsPath();
    g.Transform = mm1; // transform the graphics object so the image is rotated
    g.DrawImage(imgpic, test); // if the image needs to be behind the path, draw it beforehand
    mm1.Dispose();// prevent possible memory leaks
    gp.Dispose();// prevent possible memory leaks
    g.Dispose(); // prevent possible memory leaks
    pictureBox1.Refresh();
} 
```

我想知道是否有更有效的方法可以在屏幕上旋转图像。我觉得必须有，但我想不通。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:05:22.000

这是我第二次为 winforms 问题提供 WPF 解决方案。

只需将我的代码复制并粘贴到文件 -> 新项目 -> WPF 应用程序中，然后自己查看结果。

还要看看这段代码有多简单（我使用的是随机值，所以你可以删除它并根据你的需要调整它）。

我使用的绘图（`<Path/>`XAML 中的部分）对于 Gauge 来说是不够的。我刚刚画了那个路径，我懒得创建一个新的。您应该创建一个新绘图（我建议使用 Expression Blend）。但是您可以看到正在应用的旋转以及它的工作速度。

```
using System;
using System.Threading;
using System.Windows;
using System.ComponentModel;

namespace WpfApplication4
{
    public partial class Window2
    {
        public Window2()
        {
            InitializeComponent();
            DataContext = new ViewModel();
        }
    }

    public class ViewModel: INotifyPropertyChanged
    {
        private double _value;
        public double Value
        {
            get { return _value; }
            set
            {
                _value = value;
                NotifyPropertyChange("Value");
            }
        }

        private int _speed = 100;
        public int Speed
        {
            get { return _speed; }
            set
            {
                _speed = value;
                NotifyPropertyChange("Speed");
                Timer.Change(0, value);
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;

        public void NotifyPropertyChange(string propertyName)
        {
            if (PropertyChanged != null)
                PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }

        private System.Threading.Timer Timer;

        public ViewModel()
        {
            Rnd = new Random();
            Timer = new Timer(x => Timer_Tick(), null, 0, Speed);
        }

        private void Timer_Tick()
        {
            Application.Current.Dispatcher.BeginInvoke((Action) (NewValue));
        }

        private Random Rnd;
        private void NewValue()
        {
            Value = Value + (Rnd.Next(20) - 10);
        }
    }
} 
```

XAML：

```
<Window x:Class="WpfApplication4.Window2"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Window2" WindowState="Maximized">
    <DockPanel>
        <StackPanel DockPanel.Dock="Top">
            <TextBlock Text="Delay (MS):" Margin="2"/>
            <Slider Width="200" Minimum="100" SmallChange="1" LargeChange="10" Maximum="1500" Value="{Binding Speed}" Margin="2"/>
            <TextBlock Text="Current Value:" Margin="2"/>
            <TextBox Text="{Binding Value}" Margin="2"/>
        </StackPanel>

        <Path Data="M0.95991516,0.5 L73.257382,1.866724 90.763535,1.866724 90.763535,90.822725 66.430534,90.822725 66.430534,26.075016 0.5,24.828653 z" Fill="#FF506077" RenderTransformOrigin="0.861209625003783,0.507482926584064" Stretch="Fill" Stroke="Black">
            <Path.LayoutTransform>
                <TransformGroup>
                    <ScaleTransform ScaleY="1" ScaleX="-1"/>
                    <SkewTransform AngleY="0" AngleX="0"/>
                    <RotateTransform Angle="{Binding Value}" x:Name="Rotation"/>
                    <TranslateTransform/>
                </TransformGroup>
            </Path.LayoutTransform>
        </Path>
    </DockPanel>
</Window> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:52:49.740

很难回答您的问题，因为您对图像“更有效”旋转的要求非常模糊。我不确定您所说的效率是否更高：

*   更好的性能;
*   更少的内存使用；
*   或者只是更少或更优雅的代码

无论如何，除非您正在谈论使代码比我能想出的唯一事情更“优雅”，否则您可以并且可能应该重新使用相同的图像/位图。而不是每次都创建一个新的，你可以清除你正在使用的那个并重新绘制你的图像。

您可能还想检查用于更新 UI 的计时器的刷新率。大约 24 - 30 fps 的帧速率应该足够了。在这种情况下，任何更多的东西都是多余的，它只会浪费 CPU 周期。

您还应该启用双缓冲以防止闪烁。

**编辑**

根据您的评论，听起来问题不在于性能，而是 COM 端口计时器和 UI 计时器的间隔之间存在差异。听起来更新 UI 的计时器运行速度不够快，无法检测到更改。您的间隔是多少？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T14:54:46.413

看起来您正在 Windows 窗体中执行此操作？采用：

[Graphics.RotateTransform](http://msdn.microsoft.com/en-us/library/a0z3f662.aspx)

但是，如果我可以谦虚地建议，如果您正在尝试以图形方式做任何非常有趣的事情，那么升级到 WPF 可能是值得的投资。Windows 窗体依赖于非硬件加速的旧 GDI api（与基于 DirectX 的 WPF 不同），使其成为任何类型严重图形的糟糕平台。无论您使用 winforms 获得多么“高效”，您都永远无法与硬件加速支持的任何东西竞争。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T15:25:03.550

使用 GDI+ 旋转位图会很慢。您可能实现的最大性能提升是停止为此目的使用位图，而只需使用 GDI+ 矢量图形自定义绘制您的仪表。如果适用，您仍然可以使用位图作为背景并使用矢量图形绘制仪表的针。这将比旋转位图快几个数量级。

接下来我要考虑的是，将图片框与动态位图（即不断变化）结合使用是否真的是正确的方法；每次更新时，图片框可能都会对您的位图进行额外处理，这实际上只是浪费了周期。为什么不自己将位图绘制到屏幕上呢？此外，请确保使用正确的像素格式创建位图以获得最佳绘图性能 (PArgb32bpp)。

最后，除非您的输入数据是不断变化的值流，否则我会考虑完全放弃计时器，而仅在需要重绘屏幕时使用 BeginInvoke 向您的 UI 线程发出信号。您当前的解决方案可能会在计时器滴答之间遭受不必要的延迟，并且可能会比必要的更频繁地重绘仪表。

# c - 乱序解析 C 家族语言

> ID：14710118
> 
> 赞同：4
> 
> 时间：2013-02-05T14:42:14.773
> 
> 标签：c, parsing, compiler-construction, programming-languages

C 是严格按顺序解析的，即一切都必须在使用前声明；特别是，类型必须在这些类型的变量之前声明。这是有道理的，因为如果您不知道类型的名称是什么，而类型的名称不是什么，则语法将是模棱两可的，例如`a * b`取决于是否`a`命名了一个类型。

另一方面，一些 C 系列语言具有放松这种限制的理想特性（从而消除了对头文件的手动处理）。我正在为 C 超集语言编写一个解析器，该语言旨在同样放松该限制，所以现在我需要弄清楚如何去做。

我想到的一种方法是做两次传球。第一遍遍历所有内容，利用顶层的所有内容都必须是声明而不是声明的事实，并选择所有类型。在这个阶段，函数体没有被检查，只是作为由匹配的大括号分隔的标记流被拾取。第二遍解析函数体。函数中的局部声明必须是有序的，但这并不是真正的问题。

这种方法有没有我没有想到的绊脚石？

C++、Java、C# 等的编译器通常如何处理那些不需要按顺序声明的语言部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:45:08.100

您不必在解析时进行名称解析。首先，如果您正在设计一种“类 C”语言（而不是新的 C 实现），您可以定义您的语法，以便声明、表达式、方法等在语法中都是明确的。然后解析顺序无关紧要。（这也可以通过将预处理器以结构化的方式集成到语言中来解决预处理器疾病）。

如果您坚持使用类似 C 的语法，您可以使用能够容忍歧义的解析器，例如，[乐于处理 "x*y;"](https://stackoverflow.com/questions/243383/why-cant-c-be-parsed-with-a-lr1-parser/1004737#1004737) 并将其作为表达式和声明保存，直到它获得更多数据。在极端情况下，只需将此视为基于约束的解决方案。C 和 C++ 坚持首先知道定义，因为最初编译器的内存空间非常有限，您不能只保留所有内容；这不再是真的。解析时不必坚持知道答案。

我们在 DMS Software Reengineering Toolkit 中为此使用 GLR 解析器，并且非常高兴能够很好地解析 C 和 C++11。我们解析*后*做名称解析；这隔离了解析和名称解析，使前端更清洁、更易于管理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:49:29.753

C++**确实**需要按顺序声明。

请记住，C 和 C++ 是完全不同的球赛。他们正在使用非常古老的链接器技术（C 因为它**是**古老的，C++ 因为它几乎和 C 链接器一样古老并且兼容）。两者都导致直接在 CPU 上运行的二进制文件，没有运行时支持可言。

Java 和 C# 有很多改进的链接器可以依赖，并且有一个庞大的运行时支持系统可以使用。

两者各有利弊。C/C++ 方法的缺点之一是必须在编译时解决所有问题，因为在运行时应用程序是独立的。优点是一切都在编译时解决，因此在运行时应用程序可以不理会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:47:28.973

几乎所有的编译器都会做两遍。另一种方法是允许在语法本身中声明变量，这会使语法更难手动解析，但无需第二遍。

# android - Android 位置管理器每次返回相同的 GPS 坐标

> ID：14710121
> 
> 赞同：4
> 
> 时间：2013-02-05T14:42:29.623
> 
> 标签：android, gps, locationmanager, location-provider

我正在创建一个应用程序来将手机位置发送到我的服务器。我遇到的问题是，每次我启动应用程序时，手机都会给我完全相同的 gps 坐标。当我重新启动它时，坐标可能会改变，但是在发送第一个坐标后，它会发送一次相同的坐标，直到重新启动应用程序。

代码：

```
// Contructor etc

public class LocationASYNC extends AsyncTask<Activity, String, Void> {
    private MainActivity m;
    private LocationManager locationManager;
    private Criteria c;

    public LocationASYNC(MainActivity m) {
        this.m = m;
        locationManager = (LocationManager) m
                .getSystemService(Context.LOCATION_SERVICE);
        c = new Criteria();
        c.setAccuracy(Criteria.ACCURACY_FINE);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
                3000, 0, m);
    }

// Code for finding best location provider and returning location
    private Location findBestLocation() {

            Location location = locationManager
                    .getLastKnownLocation(locationManager.getBestProvider(c, true));

            Log.v("location",
                    "provider: " + locationManager.getBestProvider(c, true));
            // Check if location is null
            if (location != null) {
                Log.v("location", "provider not null");
                // Test if location is more than 100 seconds old
                if (location.getTime() < (System.currentTimeMillis() - 100000)) {
                    Log.v("location", "provider is old(GPS)");
                    // Use network if location is more than 100 seconds (99% chance
                    // location will be gps)
                    location = locationManager
                            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                    // Check if network location is more then 100 seconds
                    Log.v("location", "provider: " + location.getProvider());
                    if (location.getTime() < (System.currentTimeMillis() - 100000)) {
                        // Return null if all location data is old
                        Log.v("location", "provider is old (INT)");
                        return null;
                    }
                }
                // Return location if one is less than 100 seconds old
                return location;
            }
            // return null if no location is found
            return null;
        }

This is the output i get from logcat:

02-05 15:31:59.670: V/location(29659): provider: network
02-05 15:31:59.675: V/location(29659): lat: 60.3935485 lon: 5.3114676 time: 1360074627953 acc: 28.757
02-05 15:32:02.685: V/location(29659): provider: gps
02-05 15:32:02.685: V/location(29659): provider not null
02-05 15:32:02.685: V/location(29659): provider is old(GPS)
02-05 15:32:02.690: V/location(29659): provider: network
02-05 15:32:02.690: V/location(29659): lat: 60.3935485 lon: 5.3114676 time: 1360074627953 acc: 28.757
02-05 15:32:05.700: V/location(29659): provider: gps
02-05 15:32:05.700: V/location(29659): provider not null
02-05 15:32:05.705: V/location(29659): provider is old(GPS)
02-05 15:32:05.710: V/location(29659): provider: network
02-05 15:32:05.710: V/location(29659): lat: 60.3935485 lon: 5.3114676 time: 1360074627953 acc: 28.757
02-05 15:32:08.720: V/location(29659): provider: gps
02-05 15:32:08.720: V/location(29659): provider not null
02-05 15:32:08.720: V/location(29659): provider is old(GPS)
02-05 15:32:08.725: V/location(29659): provider: network
02-05 15:32:08.725: V/location(29659): provider is old (INT) 
```

每个日志猫帖子的纬度和经度都相同，时间（自 1980 年左右以来的毫秒）也是相同的。

似乎我的应用程序获得了一次位置，并且没有尝试再次获得该位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-10T02:15:59.123

尝试检查您的设备上是否启用了 GPS，或者设备是否支持 GPS。

# wpf - WPF 使用内容调整 DataGrid 的大小

> ID：14710131
> 
> 赞同：1
> 
> 时间：2013-02-05T14:42:51.103
> 
> 标签：wpf, datagrid, wpf-controls

所以到目前为止我看到的所有问题都是关于将列调整为内容的大小，但我想调整整个控件的大小 - 数据网格本身 - 并将宽度（和高度）更改为列的宽度（和高度） - 基本上这样右侧/下方没有浪费的空间。因此，当然，如果数据比数据网格的当前大小更宽（或更高），那么我不希望它扩大 - 只在需要时缩小。是否有内置的东西，或者我必须以编程方式计算每列的实际宽度？

例如，如果我创建一个 dataGrid 并将其设置为 Width=200; - 但内容结果只占用 150px 的宽度，我希望 dataGrid 然后调整为 150px 宽。当然，网格将是只读的，用户将无法调整列的大小，因此它只需要在填充时执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T10:02:51.260

你为什么不只在那个数据网格中`width/height="Auto"`设置 and 设置`MinWidth`and呢？`MinHeight`

# java - 电子邮件意图问题。无法选择电子邮件选项

> ID：14710138
> 
> 赞同：0
> 
> 时间：2013-02-05T14:43:03.333
> 
> 标签：java, android, android-intent

更新：

管理对gmail的加载进行排序。

现在，当加载意图时，我无法设置 gmail 的“收件人”、“主题”和“消息”字段。

显示我的电子邮件布局的屏幕截图：

![在此处输入图像描述](../Images/97668c59fffa2b4c7a720a8764bc4aaa.png)

显示已加载 gmail 意图的屏幕截图。但是没有从传递的详细信息中设置字段。

![在此处输入图像描述](../Images/82e4a682e108e25f11075ebc21ee3334.png)

代码：

```
@Override
public void onClick(View sendEmailClick) {

    Intent sendEmailIntent = new Intent(Intent.ACTION_SEND); 
    sendEmailIntent.setType("plain/text");
       sendEmailIntent.putExtra(Intent.EXTRA_EMAIL, emailAdd);  
       sendEmailIntent.putExtra(Intent.EXTRA_SUBJECT, emailSub); 
       sendEmailIntent.putExtra(Intent.EXTRA_TEXT, emailMess); 
       startActivity(Intent.createChooser(sendEmailIntent, "Send email"));

       //startActivity(Intent.createChooser(sendEmailIntent, "Send email..."));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:45:51.210

如果默认电子邮件客户端没有帐户，则不应为`Intent.ACTION_SEND`. 确保您已将帐户添加到应用程序并尝试再次发送您的电子邮件。如前所述，使用`"text/plain"`as 类型。

[根据我在短时间内可以找到的信息：](https://android.googlesource.com/platform/packages/apps/Email/+/5da9e7359fa4530c700d6db6eab565d5efd7be4c/AndroidManifest.xml)

```
<activity
            android:name=".activity.MessageCompose"
            android:label="@string/compose_title"
            android:enabled="false"
            android:theme="@android:style/Theme.Holo.Light"
            > 
```

compose Activity 默认不启用，添加帐户后应启用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:46:54.387

您也可以在没有外部应用程序的情况下发送电子邮件：

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);

String[] recipients = new String[]{"my@email.com", "",};

emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, recipients);

emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "Test");

emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, "This is email's message");

emailIntent.setType("text/plain");

startActivity(Intent.createChooser(emailIntent, "Send mail..."));

finish(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:50:20.920

```
try {
    final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
    emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{recipient});
    emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, subject);
    emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, message);
    emailIntent.setType("plain/text");
    startActivity(Intent.createChooser(emailIntent, "Send email"));
} catch (ActivityNotFoundException e) {
    Log.i("app name", "Unable to send email");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T16:36:47.623

设法得到第二部分ti这个排序。您需要将其作为字符串数组传递给 Gmail，而不仅仅是纯字符串。希望这将在未来解决其他人的问题！

# php - 在 Google 地图中，有没有办法显示固定在角落的框信息？

> ID：14710142
> 
> 赞同：0
> 
> 时间：2013-02-05T14:43:20.323
> 
> 标签：php, javascript, google-maps, google-maps-api-3

我有个问题。我当前的 php 项目为用户提供了谷歌地图。此地图由 javascript 脚本管理。

现在的问题：我需要在这张地图中插入一个包含地图信息的信息框。这个盒子必须固定在角落里，而不是贴在地图的某个点上。

但是在 v3 API 中，我看不到任何东西可以做到这一点。

这些 API 可以吗？

谢谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:57:26.850

使用[API的](https://developers.google.com/maps/documentation/javascript/reference)**控件**部分来创建您的信息框并将其添加到地图中。有关示例，请参阅[自定义控件](https://developers.google.com/maps/documentation/javascript/examples/control-custom)示例。您可以将任何您想要的内容放在一个 div 中，然后将其放在地图上的[ControlPosition](https://developers.google.com/maps/documentation/javascript/reference#ControlPosition)类型之一中。

# cocos2d-iphone - 如何平滑滚动CCLayer？

> ID：14710148
> 
> 赞同：1
> 
> 时间：2013-02-05T14:43:40.213
> 
> 标签：cocos2d-iphone, ccscrolllayer

我想通过触摸来滚动我的地图。你能告诉我如何达到它的基本概念吗？这是我丑陋的简单代码。只需通过每次触摸移动来修改图层的位置。它有效，但它并不可爱。

```
.h
CGPoint *touchBegin;
CGPoint *touchmove;

.m

    -(BOOL) ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event {

    CGPoint touchLocation = [touch locationInView:[touch view]];
    touchLocation = [[CCDirector sharedDirector]
                     convertToGL:touchLocation];
    touchBegin=new CGPoint(touchLocation);
}

  -(void) ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event {
        CGPoint touchLocation = [touch locationInView:[touch view]];
        touchLocation =
        [[CCDirector sharedDirector] convertToGL:touchLocation];
        touchmove = new CGPoint(touchLocation);
        [self setPosition:ccp(self.position.x/100-(touchBegin->x-touchmove->x),self.position.y/100.0f)];
        delete touchmove;
            touchmove=NULL;
}

-(void) ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event {
        if (touchBegin)
        {
            delete touchBegin;
            touchBegin=NULL;
        }

        if (touchmove)
        {
            delete touchmove;
            touchmove=NULL;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:35:58.640

试试 CCScrollLayer 扩展。[这是链接](https://github.com/cocos2d/cocos2d-iphone-extensions/tree/master/Extensions/CCScrollLayer)

« 首先将这两个文件添加到您的项目中

« 在你的场景中导入 CCScrollLayer.h

« 在场景的 init 方法中构造每一层并将其传递给 CCScrollLayer 类

更多细节参考 cocos2d-iphone-extensions 中的 CCScrollLayerTestLayer.m

# python - 在客户端和服务器之间共享模型代码文件

> ID：14710150
> 
> 赞同：1
> 
> 时间：2013-02-05T14:43:47.530
> 
> 标签：python, python-2.7, sqlalchemy, flask-sqlalchemy

我正在开发两个 Python 烧瓶应用程序：一个是 API 服务器，通过 flask-sqlalchemy 与数据库绑定，另一个是用户和 API 服务器之间的无数据库 Web 前端。

我想重用模型代码，例如，如果我在 apiserver 中定义了一个“House”对象，那么在某种程度上重用相同的代码来在前端服务器中定义相同的对象。

我想要实现的是，假设我将属性“windows of windows”添加到“House”对象，只执行一次并在我的数据库模型中进行此更改，在 apiserver 和 webfrontend 之间交换 JSON 代码以及网络前端的输出。

我想到的一些可能的方法是：

*   在某种程度上自动从初始共享模型派生 SQLAlchemy 数据库模型。
*   在非数据库代码中按原样使用 SQLAlchemy 模型，因此即使后面没有数据库，我也可以使用对象。

有没有人尝试过这些方法中的任何一种？有任何想法吗 ？

# jqplot - jqplot pieChart 切片中的 textColor

> ID：14710151
> 
> 赞同：0
> 
> 时间：2013-02-05T14:43:48.780
> 
> 标签：jqplot, pie-chart

我正在尝试将 jqplot pieCharts 的 textColor 更改为 #ffffff，因为深色切片正在吃掉它的标签。我没有找到办法做到这一点。有任何想法吗？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T03:14:15.840

只需覆盖CSS

HTML

```
<div id="pieChart"></div> 
```

CSS

```
#pieChart{
    width: 400px;
    height: 400px;
    color:#ffffff;
} 
```

[**JSFIDDLE 演示**](http://jsfiddle.net/NYewy/247/)

# python - 为什么 exec() 在 python 上针对低于 -5 分配不同的 id？

> ID：14710153
> 
> 赞同：1
> 
> 时间：2013-02-05T14:43:59.617
> 
> 标签：python, exec

这是python代码。

```
for e in range(-10, 10):
    exec('x=%d'% e)
    exec('y=%d'% e)
    print e, id(x), id(y), x is y 
```

我预计打印语句只显示 Trues。但事实并非如此。在 -5 下，显示 False。

结果是

```
-10 38832080 38832056 False
-9 38832032 38832080 False
-8 38832056 38832032 False
-7 38832080 38832056 False
-6 38832032 38832080 False
-5 30857416 30857416 True
-4 30857392 30857392 True
-3 30857368 30857368 True
-2 30857344 30857344 True
-1 30857320 30857320 True
0 30857296 30857296 True
1 30857272 30857272 True
2 30857248 30857248 True
3 30857224 30857224 True
4 30857200 30857200 True
5 30857176 30857176 True
6 30857152 30857152 True
7 30857128 30857128 True
8 30857104 30857104 True
9 30857080 30857080 True 
```

为什么exec在-5下分别为x和y分配不同的id？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:45:00.070

这是一个 cpython 实现细节。您应该使用`==`来检查整数是否相同。令人惊讶的是，cpython 实际上返回`True`了一些整数：

```
x = -5
y = -5
print x is y  #suprisingly prints `True` with cpython 
```

这是因为 cpython“实习生”小整数是为了提高效率——它可以做到这一点，因为整数是不可变的类型。它也对字符串做同样的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:47:23.653

CPython 缓存 -5 到 256 之间的小整数。参见[PyInt_FromLong](http://docs.python.org/2/c-api/int.html#PyInt_FromLong)：

> 当前的实现为 -5 到 256 之间的所有整数保留一个整数对象数组，当您在该范围内创建一个 int 时，您实际上只是取回了对现有对象的引用。

# php - 通过数组发送数据

> ID：14710156
> 
> 赞同：0
> 
> 时间：2013-02-05T14:44:03.990
> 
> 标签：php, jquery, ajax, arrays

我想通过数组发送数据这个发射器代码：

```
<script type="text/javascript">
    $(function() {
        $(".cat_button").click(function() {
                var element = $(this);
                var test = $("#cou").val();
                var test2 = $("#category2").val();
                var data = [
                    {data:test},
                    {data:test2}
                ];    

                if(test=='' || test2=='.....')
                {
                    alert("fill data");
                }
                else
                {
                    $("#flash").show();
                    $("#flash").fadeIn(400).html('<img src="http://tiggin.com/ajax-loader.gif" align="absmiddle">&nbsp;<span class="loading">Loading...</span>');

                    $.ajax({
                        type: "POST",
                        url: "insert2.php",
                        data: {data: data},
                        cache: false,
                        success: function(response){
                            console.log(response);
                        }
                    });
                }

                return false;
        });
    });
</script> 
```

此代码接收：

```
print_r($_POST['data']); // dumps an array

$course = $_POST['data'][0]['data'];
$category = $_POST['data'][1]['data'];
$insert_new_cou = mysql_query("insert into course (name,cat_id) values ('$course','$category')") or die($insert_new_cou."<br/><br/>".mysql_error()); 
```

但是告诉我以下错误：

> 不能将字符串偏移量用作数组

我认为使用 Jtgson 的解决方案但我不知道如何使用它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:53:27.533

它可以通过 JSON 编码您的对象数组来完成。在`$.ajax`通话中：

```
...
url: "insert2.php",
data: {data: JSON.stringify(data)},
... 
```

在 PHP 端，用于`json_decode()`从 JSON 字符串中获取对象数组：

```
$data = json_decode($_POST['data']);

$course = $data[0]->data;
$category = $data[1]->data; 
```

# jquery - 用 jquery 只更改 div 内的最后一个 div 类？

> ID：14710160
> 
> 赞同：1
> 
> 时间：2013-02-05T14:44:17.360
> 
> 标签：jquery, html

我需要帮助:) 我有一个 Div，在这个 Div 中有许多其他 Div 的一个类。我只需要更改 Div 中的最后一个 Div 类：

```
 <div id='main'>

    <div class='inside'></div>
    <div class='inside'></div>
    <div class='inside'></div>    <- Only this to be changed?

    </div> 
```

我有一个 jQuery 函数，可以搜索主 div 中的每个 div：

```
 $('#main').find('.inside').each(function() {

    alert($(this).attr('class'));

    }); 
```

这确实有效，但是当我尝试仅更改最后一个 Div 类时，它会更改主 Div 内所有 Div 的类。是否可以只更改最后一个内部类 Div？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:45:02.240

您可以使用[`.last`](http://api.jquery.com/last/)：

```
$('#main .inside').last().addClass(....); 
```

[jQuery 文档](http://api.jquery.com/)非常广泛，花一点时间阅读它是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:45:09.773

要更改 css，请使用 .css

```
$('#main .inside:last').css('width','100'); 
```

# ruby-on-rails - 在 RefnineryCms 前端切换语言环境的链接

> ID：14710164
> 
> 赞同：1
> 
> 时间：2013-02-05T14:44:23.507
> 
> 标签：ruby-on-rails, ruby-on-rails-3, locale, refinerycms

我正在使用带有 Rails 3.2.10 和 refinerycms 2.0.9 的 RefineryCms。

我想在每个页面上显示带有切换页面语言链接的标志。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:23:51.503

我用过这样的东西：

```
= link_to image_tag(national_flag),refinery.url_for(:locale => nation_locale) 
```

如果您已经安装了`i18n`RefineryCMS 的 gem。

# windows-phone-7 - 如何使用 ConvertPlaceToLonLat 获取经度和纬度

> ID：14710180
> 
> 赞同：1
> 
> 时间：2013-02-05T14:45:06.837
> 
> 标签：windows-phone-7, latitude-longitude

如何获取[此服务参考](http://msrmaps.com/TerraService2.asmx)`latitude`的and `longitude`values form`ConvertPlaceToLonLat`方法

# google-maps-api-3 - 获取一个经纬度5米以外的经纬度

> ID：14710184
> 
> 赞同：1
> 
> 时间：2013-02-05T14:45:21.633
> 
> 标签：google-maps-api-3, location

> **可能重复：**
> [谷歌地图 API V3 - 完全相同的位置上的多个标记](https://stackoverflow.com/questions/3548920/google-maps-api-v3-multiple-markers-on-exact-same-spot)

我有一个位置的纬度和经度，我将在该点上绘制许多标记。如何防止标记重叠？说离每个标记 5 米。

# java - de.congrace.exp4j 在 CustomFunction 的多个参数上失败

> ID：14710187
> 
> 赞同：1
> 
> 时间：2013-02-05T14:45:26.217
> 
> 标签：java

我正在尝试添加一个自定义函数，将数字求和到 ExpressionBuilder 这是java代码：

```
package com.sapiens.bdms.drools.exe.helper.FuncServiceTrial;

import com.sapiens.bdms.drools.exe.helper.Functions;
import de.congrace.exp4j.*;

import java.util.ArrayList;
import java.util.Collection;

public class FormulaInterpreter {

    public double interpret(String formula) throws UnparsableExpressionException, UnknownFunctionException, InvalidCustomFunctionException {
        Collection<CustomFunction> customFunctions = new ArrayList<CustomFunction>();
        customFunctions.add(new CustomFunction("SUM") {
            @Override
            public double applyFunction(double[] doubles) {
                Double res = 0.0;
                for (double aDouble : doubles) {
                    res += aDouble;
                }
                return res;
            }
        });
        Calculable calc = (Calculable) new ExpressionBuilder(formula).withCustomFunctions(customFunctions).build();
        return calc.calculate();
    }

    public static void main(String[] args) throws UnknownFunctionException, UnparsableExpressionException, InvalidCustomFunctionException {
        FormulaInterpreter formulaInterpreter = new FormulaInterpreter();
        double res = formulaInterpreter.interpret("SUM(2,4,4)");
        System.out.println(res);
    }
} 
```

但它打印出“2”而不是 10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T15:57:32.237

你能试试这个构造函数告诉 exp4j 你的函数应该有多少个参数：

`new CustomFunction("SUM",3)`

如 API 文档中所述：[http ://www.objecthunter.net/exp4j/apidocs/de/congrace/exp4j/CustomFunction.html](http://www.objecthunter.net/exp4j/apidocs/de/congrace/exp4j/CustomFunction.html)

这是一个有效的 JUnit 测试用例：

```
@Test
public void testCustomFunction21() throws Exception {
    CustomFunction sumFunc = new CustomFunction("SUM",3) {
        @Override
        public double applyFunction(double[] doubles) {
            Double res = 0.0;
            for (double aDouble : doubles) {
                res += aDouble;
            }
            return res;
        }
    };
    Calculable calc = (Calculable) new ExpressionBuilder("SUM(2,4,4)").withCustomFunction(sumFunc).build();
    assertTrue(10d == calc.calculate());
} 
```

希望这可以帮助，

坦率

# .net - EF 4.3+ 连接字符串初始化

> ID：14710191
> 
> 赞同：0
> 
> 时间：2013-02-05T14:45:31.443
> 
> 标签：.net, entity-framework, database-connection

我正在创建一个示例性的简单应用程序，它使用 Code First EF 和迁移。我有一个上下文对象，如果尚不存在使用 defaultConnectionFactory 的数据库，它会为自己创建一个数据库。我想知道如何覆盖这些设置，以控制数据库名称。即使我注释掉 defaultConnectionFactory 并放置连接字符串，我仍然得到相同的旧数据库名称。为什么？

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=5.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>

  <!--<entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework>-->

  <connectionStrings>
    <add name="MigrationsDemoConnection" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=MigrationsDemo;Integrated Security=true" providerName="System.Data.SqlClient" />
  </connectionStrings>  

</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:44:32.973

数据库名称在连接字符串中。我假设您的上下文有一个以“MigrationsDemoConnection”作为参数的[构造函数。](http://msdn.microsoft.com/en-us/library/gg679467%28v=vs.103%29.aspx)所以它使用数据库名称“MigrationsDemo”。连接字符串是更改数据库名称的地方。

您还可以使用完整的连接字符串作为参数来构建您的上下文。您可以从配置文件中获取连接字符串并更改其数据库名称，最好使用[`SqlConnectionStringBuilder`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnectionstringbuilder.aspx).

# java - jnlp 无法启动 swt 应用程序

> ID：14710194
> 
> 赞同：1
> 
> 时间：2013-02-05T14:45:37.673
> 
> 标签：java, eclipse, swt, jnlp

我正在尝试通过 jnlp 运行应用程序我正在尝试在本地测试 jnlp 文件，然后再尝试在某些服务器上部署我的应用程序。correrspondind 平台的所有 swt 库都是自签名的，并且与 jnlp 文件位于同一目录中。我的应用程序 jmf.jar 和 jl1.0.1 所需的其他 jar 也在这里。我将它们称为

```
<resources>
    <java version="1.5" />
    <jar href="MyBaran.jar"/>
    <nativelib href="jl1.0.1.jar" download="eager"/>
    <nativelib href="jmf.jar" download ="eager"/>   
</resources> 
```

我的主要应用程序 jar(MyBaran.jar) 具有以下结构

```
MyBaran.jar  
-com  
--game  
---Main.class  
---Game.class  
...
---Character.class
-images  
--test.jpg  
--sound.wav  
...  
--forrest.mid  
-META-INF  
--MANIFEST.MF  
--...    
-.project  
-.classpath 
```

我使用 eclipse 导出 -> jar 文件工具生成它所以我的应用程序没有在 windows 上启动 java 问 sequrity 问题，我接受它下载一些 jars 这里是来自跟踪文件的输出

```
CacheEntry[file:/H:/Program Files/Java/jdk1.7.0_13/bin/swt-win32-windows-x86.jar]:     updateAvailable=false,lastModified=Mon Feb 04 17:48:22 GMT+03:00 2013,length=2048373  
CacheEntry[file:/H:/Program Files/Java/jdk1.7.0_13/bin/jmf.jar]: updateAvailable=false,lastModified=Tue Feb 05 10:32:17 GMT+03:00 2013,length=1969383  
CacheEntry[file:/H:/Program Files/Java/jdk1.7.0_13/bin/MyBaran.jar]:   updateAvailable=false,lastModified=Tue Feb 05 13:59:24 GMT+03:00 2013,length=5924842  
CacheEntry[file:/H:/Program Files/Java/jdk1.7.0_13/bin/jl1.0.1.jar]:   updateAvailable=false,lastModified=Tue Feb 05 10:31:30 GMT+03:00 2013,length=112570 
```

所以看起来它加载了 swt jar
，但我仍然无法启动我的应用程序，所以我应该使用 eclipse 生成可运行的 jar 文件，其中所有的库都打包在 jar 中。那么在这种情况下我该如何编写jnlp文件

这是我当前的 jnlp 文件

```
<?xml version="1.0" encoding="utf-8"?>  
<jnlp spec="1.5" href="mybaran.jnlp">  
<information>
    <title>Garbage Collector Game</title>  
    <vendor>Java Tester</vendor>  
    <homepage href="" />  
    <description>Garbage Collector Game</description>  
    <description>Garbage Collector Game</description>   
</information>
<security>
    <all-permissions />
</security>

<resources>
    <java version="1.5" />
    <jar href="MyBaran.jar"/>
    <nativelib href="jl1.0.1.jar" download="eager"/>
    <nativelib href="jmf.jar" download ="eager"/>   
</resources>

<resources os="Windows" arch="x86">
    <jar href="swt-win32-windows-x86.jar" />
</resources>

<resources os="Windows" arch="x86_64">
    <jar href="swt-win32-windows-x86_64.jar" />
</resources>

<resources os="Windows" arch="amd64">   
    <jar href="swt-win32-windows-x86_64.jar" />
</resources>

<resources os="Linux" arch="x86_64">
    <jar href="swt-gtk-linux-x86_64.jar" />
</resources>

<resources os="Linux" arch="amd64">
    <jar href="swt-gtk-linux-x86_64.jar" />
</resources>

<resources os="Linux" arch="x86">
    <jar href="swt-gtk-linux-x86.jar" />
</resources>

<resources os="Mac" arch="x86_64">
    <jar href="swt-cocoa-mac-x86_64.jar" />
</resources>

<resources os="Mac" arch="amd64">
    <jar href="swt-cocoa-mac-x86_64.jar" />
</resources>

<resources os="Mac" arch="x86">
    <jar href="swt-cocoa-mac-x86.jar" />
</resources>

<application-desc main-class="com.game.Main"/>
</jnlp> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:00:44.893

1）您可以使用Andrew [Thomphson](http://pscode.org/janela/)的 JaNeLa 来验证您的 jnlp 文件。

2)`<java version="1.5" />`

可能需要更改为

```
<j2se version="1.6+" href="http://java.sun.com/products/autodl/j2se"/> 
```

它在每个教程中。

3)`<nativelib href="jl1.0.1.jar" download="eager"/>`

我不确定，但我认为`nativelib`是针对 C 库的，请尝试将其更改为`jar`

`download="eager"`是默认值，所以指定没有意义

4）“所以我应该用eclipse生成可运行的jar文件，所有的库都打包在jar中”

不，这不是 jnlp 小程序应该部署的方式。

[JNLP 文件语法](http://docs.oracle.com/javase/6/docs/technotes/guides/javaws/developersguide/syntax.html)

[部署 Java Web Start 应用程序](http://docs.oracle.com/javase/tutorial/deployment/webstart/deploying.html)

# php - 为什么带有 mysqli 的面向对象的 PHP 比过程方法更好？

> ID：14710195
> 
> 赞同：30
> 
> 时间：2013-02-05T14:45:40.867
> 
> 标签：php, object, mysqli, procedural-programming

直到最近，我一直在使用 mysql* 的程序方法。现在我想转向 mysqli 和面向对象的方法。许多在线资源和书籍指出，即使在 PHP 的情况下，OOP 也比程序性更好。在浏览了一些在线教程之后，我编写了一个连接数据库并选择一个值的小程序。我想知道为什么面向对象的方法更好？另外，这是编写 OO php 网页的正确方法吗？

面向对象的方法

```
$host = "localhost";
$username = "root";
$password = "";
$dbname = "compdb";

@ $db = new mysqli($host, $username, $password, $dbname);

if(mysqli_connect_errno())
{
    die("Connection could not be established");
}

$query = "SELECT company_id FROM company_basic_details WHERE company_name = 'ABC'";
$result = $db->query($query);

$total_num_rows = $result->num_rows;

echo "The Results Are : <br>";

while($row = $result->fetch_array())
{
    echo $row['company_id'];
}
?> 
```

程序方法

```
<?php

$host = "localhost";
$username = "root";
$password = "";
$dbname = "compdb";

@ $db = mysqli_connect($host, $username, $password, $dbname);

if(mysqli_connect_errno())
{
    die("Connection could not be established");
}

$query = "SELECT company_id FROM company_basic_details WHERE company_name = 'ABC'";
$result = mysqli_query($db, $query);

$total_num_rows = mysqli_num_rows($result);

echo "The Results Are : <br>";

while($row = mysqli_fetch_array($result))
{
    echo $row['company_id'];
}
?> 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-05T14:55:50.873

主要原因是PHP正朝着OO编程的方向稳步前进。

`mysqli_xxx()`使用函数而不是 OOP 等价物并没有错。就代码而言，它完全相同。

唯一的问题是，就人们认为编写良好的 PHP 代码而言，您将越来越落后于曲线。

值得注意的是，被认为是 PHP 中大多数 DB 代码的理想选择的 PDO 库是纯 OOP 的。它没有程序界面。在过去的几个版本中，大多数其他新特性也没有添加到 PHP 中。如果你想充分利用 PHP，无论如何你都需要了解 OOP。

为您的数据库创建扩展类的能力也很重要——如下所示：

```
class myDB extends mysqli {
     .... your own stuff here to extend and improve the base mysqli class
} 
```

当然，您可以使用过程代码实现相同的目标，但它不如 OOP 方式简洁。当然，只有当你真的想扩展这个类时，这才是相关的。

然而，作为第一步，从`mysql_xxx()`到移动`mysqli_xxx()`是一个很好的开始。将整个方式转移到使用 OOP 接口会更好，但只是切换到 mysqli 函数是一个好的开始。

一开始就使用过程式接口肯定会让旧`mysql_xx()`功能的过渡更容易，所以如果一开始切换到OOP接口太过跳跃，不要觉得你必须一次性完成。从转换为过程`mysqli`函数开始，然后切换到 OOP 方法；两个跳跃本身都不会那么大。

# regex - 使用 sed 在匹配的子字符串中查找和替换

> ID：14710196
> 
> 赞同：0
> 
> 时间：2013-02-05T14:45:44.423
> 
> 标签：regex, sed

我想`sed`用来处理一个属性文件，例如：

```
java.home=/usr/bin/java
groovy-home=/usr/lib/groovy
workspace.home=/build/me/my-workspace 
```

我想用 's 替换`.`'s 和`-`' `_`s 但仅限于`=`'s 标记。输出将是

```
java_home=/usr/bin/java
groovy_home=/usr/lib/groovy
workspace_home=/build/me/my-workspace 
```

我尝试了各种方法，包括使用地址，但我一直失败。有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:55:45.240

**在这种情况下， awk**让生活更轻松：

```
awk -F= -vOFS="=" '{gsub(/[.-]/,"_",$1)}1' file 
```

干得好：

```
kent$  echo "java.home=/usr/bin/java
groovy-home=/usr/lib/groovy
workspace.home=/build/me/my-workspace"|awk -F= -vOFS="=" '{gsub(/[.-]/,"_",$1)}1'
java_home=/usr/bin/java
groovy_home=/usr/lib/groovy
workspace_home=/build/me/my-workspace 
```

如果您真的想使用 sed ( **gnu sed** )

```
sed -r 's/([^=]*)(.*)/echo -n \1 \|sed -r "s:[-.]:_:g"; echo -n \2/ge' file 
```

同样的例子：

```
kent$  echo "java.home=/usr/bin/java
groovy-home=/usr/lib/groovy
workspace.home=/build/me/my-workspace"|sed -r 's/([^=]*)(.*)/echo -n \1 \|sed -r "s:[-.]:_:g"; echo -n \2/ge'
java_home=/usr/bin/java
groovy_home=/usr/lib/groovy
workspace_home=/build/me/my-workspace 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T14:57:09.630

关于什么...

```
$ echo foo.bar=/bla/bla-bla | sed -e 's/\([^-.]*\)[-.]\([^-.]*=.*\)/\1_\2/'
foo_bar=/bla/bla-bla 
```

但是，这不适用于左侧有超过 1 个点或破折号的情况。我将不得不进一步考虑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T18:54:46.440

这适用于行中任意数量的点和连字符，并且**不需要**GNU sed：

```
sed 'h; s/.*=//; x; s/=.*//; s/[.-]/_/g; G; s/\n/=/'  < data 
```

就是这样：

*   h：在保持空间中保存该行的副本
*   s：丢弃模式空间中等号之前的所有内容
*   x：交换模式并保持
*   s：吹走`=`模式中的所有内容
*   s：用下划线替换点和连字符
*   G：加入模式并用换行符保持
*   s：用等号替换换行符，将它们全部粘在一起

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-06T07:52:28.270

使用 sed 的其他方式

```
sed -re 's/(.*)([.-])(.*)=(.*)/\1_\3=\4/g' temp.txt 
```

输出

```
java_home=/usr/bin/java
groovy_home=/usr/lib/groovy
workspace_home=/build/me/my-workspace 
```

`.-`如果左侧有多个，那么这个

```
sed -re ':a; s/^([^.-]+)([\.-])(.*)=/\1_\3=/1;t a' temp.txt 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T15:24:48.753

这可能对您有用（GNU sed）：

```
sed -r 's/=/\n&/;h;y/-./__/;G;s/\n.*\n//' file 
```

[“你等了好久才等公共汽车……”](https://stackoverflow.com/questions/14696606/substitute-characters-between-specific-strings)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T14:56:33.087

在这种情况下，我会使用`AWK`而不是`sed`：

```
awk -F"=" '{gsub("\\.|-","_",$1); print $1"="$2;}' <file.properties> 
```

输出：

```
java_home/usr/bin/java
groovy_home/usr/lib/groovy
workspace_home/build/me/my-workspace 
```

# php - MySQLi - 执行查询的正确方法？

> ID：14710200
> 
> 赞同：0
> 
> 时间：2013-02-05T14:45:54.190
> 
> 标签：php, mysqli

首先，这是我第一次接触 MySQLi... 听说 MySQLi 比较好，但是每次我写一些代码，我都得到

> 致命错误：在非对象上调用成员函数 bind_param()

我的代码是这样的：

```
<?php
/* Create a new mysqli object with database connection parameters */
$m = new mysqli('localhost', 'root', '', 'mysqlisample');
if(mysqli_connect_errno()) {
echo "Connection Failed: " . mysqli_connect_errno();
exit();
}
$ida=1;
$statement = $m->prepare("SELECT * FROM post WHERE `id` =  ?");
$statement->bind_param("i",$ida);
$id = 0;
$post_title = '';
$post_content = '';
$statement->bind_result($id,$post_title,$post_content);
$statement->execute();
while ($statement->fetch()){
echo $id.' '.$post_title.' '.$post_content.'\n'; //These variables will get the values of the current row
}
?> 
```

这只是我在某处读到的许多代码示例之一，但是它们都不起作用。

执行 MySQLi 查询并打印结果的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:56:12.907

我在阅读 OReilly 的书时解决了这个问题，该书使用的是旧的 mysql_stuff 并且没有一个示例有效。显然你需要为你的表修改它:) 但它适用于我拥有的表。这将适用于准备好的陈述：

```
<?php

//this file is just where my db info is, you can use the literal values
require 'login.php';

$db = new mysqli($db_hostname, $db_username, $db_password, $db_database);
$stmt = $db->stmt_init();
$data = array("Emily Bronte", "Wuthering Heights", "Classic Fiction", "1847", "9780553212587");

if($stmt->prepare("INSERT INTO classics(author, title, category, year, isbn) VALUES(?,?,?,?,?)"))
{
    $stmt->bind_param('sssss', $data[0], $data[1], $data[2], $data[3], $data[4]);
    $stmt->execute();
    $stmt->close();
}

?> 
```

这将适用于查询：

```
<?php
require_once 'login.php';
$dbt = new mysqli($db_hostname, $db_username, $db_password, $db_database);
if ($dbt->connect_errno) 
    die("Unable to connect to MySQL: " . $dbt->connect_errno);

$results = $dbt->query("SELECT * FROM cats");

if (!$results) 
    die ("Database access failed: " . $db->error);

$dbt->close();

echo "<table><tr> <th>Id</th> <th>Family</th>
<th>Name</th><th>Age</th></tr>";

for ($j = 0 ; $j < $results->num_rows ; ++$j)
{
    $row = $results->fetch_row();
    echo "<tr>";
    for ($k = 0 ; $k < sizeof($row) ; ++$k) 
        echo "<td>$row[$k]</td>";
    echo "</tr>";
}
echo "</table>";

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:51:30.250

问题是`$statement->bind_param("i",$ida);`返回`false`，所以你不能调用该`bind_param`方法`false`

见： http: [//php.net/manual/de/mysqli.prepare.php](http://php.net/manual/de/mysqli.prepare.php)

尝试：

```
mysqli_stmt_bind_param($statement, "i", $ida); 
```

代替：

```
$statement->bind_param("i",$ida); 
```

# javascript - JQuery ajax() 完成/失败回调未在状态 200 时返回

> ID：14710207
> 
> 赞同：2
> 
> 时间：2013-02-05T14:46:12.837
> 
> 标签：javascript, jquery, servlets

我正在尝试使用 JQuery 将表单数据发布到远程 servlet。我可以看到服务器接收到数据并返回状态代码 200 和响应字符串“{result: 'success'}” 但是 ajax 调用没有返回 done 或 fail 函数（如果我添加一个 always 函数比我看到它被调用）这是客户端的代码片段：

`

```
var dataParams = 'email='+email+'&password='+password;
var url = 'http://127.0.0.1:8888/signup';

var jxhr = $.ajax({
  type : "POST",
  url : url,
  data : dataParams,// serializes the form's elements.
  dataType: "json",
  done: function() {
     console.log("done!");
     hideSignUp();
     showThankYou(); },
  fail: function() {
     console.log("fail!");
      }
  }); 
```

`

好像我错过了一些东西，但似乎找不到什么。请注意，我使用的是 JQuery 1.8.3，因此不推荐使用成功。有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T14:51:17.757

尝试：

```
var url = "http://127.0.0.1:8888/signup";
var jxhr = $.ajax({
  type : "POST",
  url : url,
  data : dataParams,// serializes the form's elements.
  dataType: "json"
  }).done(function() {
     console.log("done!");
     hideSignUp();
     showThankYou(); 
  }).fail(function(jqXHR, textStatus) {
     console.log(textStatus);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-04T16:33:20.477

尝试链接您的回调，而不是将它们设置为对象字段：

```
 $.ajax({
  type : "POST",
  url : url,
  data : dataParams,// serializes the form's elements.
  dataType: "json"
  }).done(function (xhrResponse) {
    console.log("done!");
    hideSignUp();
    showThankYou();
  }).fail(function (xhrResponse, textStatus) {
    console.log(textStatus);
  }).always( function () {
    console.log("I'm done with this.");
  }); 
```

通过链接你的回调，你保证执行至少一个（完整的）。

# node.js - 这是泄漏内存吗？

> ID：14710208
> 
> 赞同：3
> 
> 时间：2013-02-05T14:46:13.440
> 
> 标签：node.js, memory-leaks, kue

我的代码正在泄漏内存。几个小时后，它会填满整个内存并崩溃。我在这里简化了我的代码，有人能判断这是否看起来像泄漏吗？谢谢。

```
var request = require('request').forever(), // as per [1]
    async = require('async'),
    kue = require('kue'),
    jobs = kue.createQueue(),
    pool = { maxSockets: 1 };

function main (job, done) {
    async.series(
        [function (callback) {
            var req = request({url: job.data.URL1, pool: pool}, function (err, resp, body) {
                //stuff...
                callback(err);
            });
        },
        function (callback) {
            var req = request({url: job.data.URL2}, function (err, resp, body) {
                //stuff...
                callback(err);
            });
        }
        ],
        function (err) {
            //stuff...
            done();
        }
    );

}

jobs.process('job_name', function (job, done) {  //many jobs with 'job_name' in the queue
    main (job, done);
}); 
```

[1] [https://groups.google.com/d/msg/nodejs/ZI6WnDgwwV0/sFm4QKK7ODEJ](https://groups.google.com/d/msg/nodejs/ZI6WnDgwwV0/sFm4QKK7ODEJ)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-04T22:44:08.113

我不认为你的代码是罪魁祸首。我在使用 kue 时遇到了同样的问题，为了确保我没有做错任何事情，我做了一个像这样的超级简单的工人：

```
var Redis       = require('redis'),
    kue         = require('kue'),
    config      = require("../../config/local.js"),
    redisClient = Redis.createClient(config.redis),
    jobs        = kue.createQueue({ redis : config.redis });

jobs.process('testjobs', function processJob(job, done, error) {
    console.log(job.data, error);
    done();
}); 
```

运行这段代码让我意识到那是泄漏的那个。解决方法是使用[pm2](https://github.com/Unitech/pm2)，如果内存达到上限，这个人将运行您的程序并重新启动它，我正在使用[JSON App Declaration](https://github.com/Unitech/PM2/blob/development/ADVANCED_README.md#json-app-declaration)来配置在重新启动进程之前允许的最大内存量。

```
{
  "apps" : [
    {
      "name": "test_worker",
      "script": "test.js",
      "instances": 1,
      "max_restarts": 10,
      "max_memory_restart" : "10M",
      "ignore_watch": [
        "[\\/\\\\]\\./",
        "node_modules"
      ],
      "merge_logs": true,
      "exec_interpreter": "node",
      "exec_mode": "fork_mode"
    }
  ]
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-04T17:16:05.950

如果听起来，作业被添加到队列中的速度比它们被拉出的速度要快，那么你会看到你的内存使用量增加了。这不完全是内存泄漏。这是 Kue 如何提供[工作级别事件](https://github.com/Automattic/kue#job-events)的一部分。

默认情况下，Kue 会挂在内存中的作业上，直到作业完成或失败。它这样做是为了在创建作业的进程中触发作业级事件（例如`start`、`progress`、`complete`、`failed`）。

这意味着当前队列中的所有作业也都存在于创建它们的进程的内存中（假设没有应用程序重新启动）。只要队列没有得到备份，你就不会看到内存增长。但是，如果队列备份内存增长，有时会令人担忧。

该怎么办？如果您关闭作业级事件，Kue 将不会在作业入队后挂起。您可以使用以下`jobEvents`标志全局执行此操作：

```
 kue.createQueue({jobEvents: false}); 
```

或者您可以使用作业的方法打开或关闭每个作业的作业级事件`events`：

```
var job = queue.create('test').events(false).save(); 
```

如果您根本不需要响应工作事件，这些都可以工作。但是，如果您确实需要为作业处理事件，则可以使用[队列级事件](https://github.com/Automattic/kue#queue-events)。由于作业不在内存中，因此您需要从 redis 中获取作业才能对其进行任何操作：

```
queue.on('job complete', function(id, result){
  kue.Job.get(id, function(err, job){
    // do something with the job
  });
}); 
```

# tidesdk - 如何在潮汐dk 中显示 webkit 检查器

> ID：14710209
> 
> 赞同：0
> 
> 时间：2013-02-05T14:46:13.893
> 
> 标签：tidesdk

当我尝试右键单击并在潮汐SDK 中显示 webkit 开发人员工具时，没有任何反应，没有出现上下文菜单。这也不行？？

```
$(".inspect").bind("click", function() {
    try {
        Ti.UI.currentWindow.showInspector();
    } catch(e) {
        alert(e.toString());
    }
}) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T07:10:08.950

Web 检查器/开发人员工具控制台仅在您使用*TideSDK Developer的***Launch App**时工作（在您的应用程序开发期间）。**在将Package 与 Runtime**一起使用后执行打包的应用程序后，检查器不会启用。这可能是问题吗？

 **** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T21:31:41.027

请注意，您还应该能够在调试模式下运行您的 Tide 应用程序。例如

```
myAppBuiltByTide.exe --debug
```

在调试模式下运行：

1.  除了您的应用程序窗口外，还打开调试控制台，以及
2.  启用“显示检查器”右键单击选项***

# django - 你如何在外部 IP 上托管 Django 的开发服务器？

> ID：14710210
> 
> 赞同：2
> 
> 时间：2013-02-05T14:46:16.620
> 
> 标签：django, web-development-server

基本上，我的内部 IP 被我的互联网服务提供商的外部 IP 所掩盖。所以，我的内部 IP 只能在我的 Intranet 内部访问。我想让内部网外部的用户也可以访问我的开发服务器，该服务器托管在我系统上的 0.0.0.0:8000 上。我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:25:40.033

查看 github 上的 localtunnel，它完全符合您的要求。

[https://github.com/progrium/localtunnel](https://github.com/progrium/localtunnel)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:16:49.167

如果你愿意走那么远，你可以使用**反向 SSH 隧道**：
在亚马逊的 AWS 上打开一个免费的微型 linux 实例并创建一个反向 SSH 隧道，将服务器上的端口 80 重定向到你的机器。

这是一个很酷的解决方案，用于测试目的和低流量使用......

你可以在这里阅读更多信息：
[http ://www.techrepublic.com/article/setting-up-a-reverse-ssh-tunnel/5779944](http://www.techrepublic.com/article/setting-up-a-reverse-ssh-tunnel/5779944)

# python - 子类化字典和嵌套字典

> ID：14710213
> 
> 赞同：0
> 
> 时间：2013-02-05T14:46:38.540
> 
> 标签：python, dictionary, python-2.7, overriding, subclass

我有一个嵌套字典，我想将其转换为以下子类：

```
class SubDict(dict):
    def __getattr__(self, attr):
        if attr in self.keys():
            return self.get(attr) 
```

如果我这样做了，它对基本 dict 很有用：

```
my_nested_dict = SubDict(my_nested_dict) 
```

但我也需要将嵌套的那些转换为 SubDict。我怎么能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:49:52.180

您需要递归嵌套字典并递归转换它们：

```
class SubDict(dict):
    def __init__(self, *args, **kw):
        super(SubDict, self).__init__(*args, **kw)
        for key, value in self.iteritems():
            if isinstance(value, dict):
                self[key] = SubDict(value) 
```

你有没有仔细研究[`collections.defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)过？你可以很容易地从头开始创建一棵树：

```
import defaultdict

def Tree(): return defaultdict(tree) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:50:03.553

如果您的`SubDict`班级除了您在此处展示的内容外什么都不做，这是`defaultdict` [Harold Cooper 在 Github 上的文档](https://gist.github.com/hrldcpr/2012250)：

```
def tree(): return defaultdict(tree) 
```

# sql - 在 PostgreSql 中选择 For Update 语句

> ID：14710214
> 
> 赞同：9
> 
> 时间：2013-02-05T14:46:39.833
> 
> 标签：sql, postgresql

我想选择表记录中的字段并仅更新其中一个字段。我能怎么做？

我试试这个：

```
SELECT v.idvideo, v.title 
FROM video v  WHERE v.schedulingflag IS FALSE AND v.errorflag IS FALSE 
ORDER BY v.idvideo  LIMIT 1 FOR UPDATE ;

UPDATE video  SET schedulingflag = true; 
```

但是通过这种方式，它在所有记录中设置字段“schedulingflag”为真！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-05T14:53:02.247

该`SELECT FOR UPDATE`语法告诉 PG 您将更新这些记录并锁定它们以防止并发访问。但是，您仍然需要发出适当的`UPDATE`调用来更改您锁定的特定记录。

在这种情况下，只需`WHERE`在您的 中使用相同的子句`UPDATE`，例如：

```
UPDATE video  SET schedulingflag = true 
WHERE schedulingflag IS FALSE AND errorflag IS FALSE; 
```

# asp.net - 调用 Web 服务的 Asp.net 异步页面不使用 Visual Studio Web 参考

> ID：14710215
> 
> 赞同：0
> 
> 时间：2013-02-05T14:46:43.303
> 
> 标签：asp.net, web-services, asynchronous

我需要在不使用使用 Visual Studio 创建的 webreference 的情况下调用 web 服务，我必须使用 http web 请求我有soap请求：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:pos="http://posting.ws.rpg.snamretegas.it/">
   <soapenv:Header/>
      <soapenv:Body>
         <pos:postAllReports>

            <report_name>REPORT_SWITCH</report_name>

            <report_date></report_date>

            <i_ambiente>ITG1</i_ambiente>

            <i_taxidOpco>TEST_YF1</i_taxidOpco>
         </pos:postAllReports>
      </soapenv:Body>
   </soapenv:Envelope> 
```

这是asp页面背后的代码：

```
using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Data.OracleClient;

public partial class PubreportControl : System.Web.UI.Page 
{   
   private DB_Utility dbu;
   protected double size = 1;
   private string connectionString;
   private OracleConnection connection;
   private OracleCommand processNumQuery;
   private int indexdropitem;
   private int coloreriga = 1;

   protected void Page_Load(object sender, EventArgs e)
   {

    if (!IsPostBack)
    {
        Session["CONNECTSTRING"] = Request["CONNECTSTRING"];

        if (Session["CONNECTSTRING"] == null)
        {
            Response.Redirect("sessionup.asp?type=Pubreport");
        }

        connectionString = Session["CONNECTSTRING"].ToString();

        if (connectionString.IndexOf("DSN=") >= 0)
        {
            Comuni.Utility util = new Utility();
            connectionString = util.ConnStr(connectionString);
            Session["CONNECTSTRING"] = connectionString;
        }
        connection = new OracleConnection(connectionString);
        connection.Open();
        dbu = new DB_Utility(Session["CONNECTSTRING"].ToString());

    }
    else
    {
        connectionString = Session["CONNECTSTRING"].ToString();
        if (connectionString.IndexOf("DSN=") >= 0)
        {
            Comuni.Utility util = new Utility();
            connectionString = util.ConnStr(connectionString);
            Session["CONNECTSTRING"] = connectionString;
        }
        connection = new OracleConnection(connectionString);
        connection.Open();
        dbu = new DB_Utility(Session["CONNECTSTRING"].ToString());
    }

    if (!IsPostBack)
    {
            processNumQuery = new OracleCommand("select distinct nome_report from rpg_notification",connection);
            OracleDataReader reader = processNumQuery.ExecuteReader();

            while (reader.Read())
            {
                dropdownlist1.Items.Insert(0, new ListItem(reader.GetString(0), reader.GetString(0)));
            }
            reader.Close();

    }
    if(Request["txtSchedDate"] == null)
    {
         DateTime daDate = DateTime.Today;
         txtSchedDate.Text = daDate.ToString("dd/MM/yyyy");
    }
    else
    {
         txtSchedDate.Text = Request["txtSchedDate"];
         gwreportpub.DataSource = getDatiFromDb();
         gwreportpub.DataBind();

        DateTime schedDate = Convert.ToDateTime(Request["txtSchedDate"]);
        string reportname = dropdownlist1.SelectedItem.Text; 
        object[] WSMethodArguments = new object[3];
        WSMethodArguments[0] = reportname;
        WSMethodArguments[1] = schedDate.ToUniversalTime().ToString("s");
        WSMethodArguments[2] = "ITG1";
        PageAsyncTask task = new PageAsyncTask(
        new BeginEventHandler(BeginAsyncOperation),
        new EndEventHandler(EndAsyncOperation),
        new EndEventHandler(TimeoutAsyncOperation),
        WSMethodArguments
        );
        RegisterAsyncTask(task);
    }

   }

   protected void Button1_Click(object sender, EventArgs e)
   {

    //Response.Write("ciao " + dropdownlist1.SelectedIndex + " - " + dropdownlist1.SelectedItem.Text + " - " + dropdownlist1.Items[dropdownlist1.SelectedIndex].Text + " - " + Request["txtSchedDate"] + " - ");

    //ThreadPool.QueueUserWorkItem(new WaitCallback(callWebService),new object[] {"http://172.19.241.235:9001/snam-rpg-ws/ReportPosting","ReportPosting","postAllReports",WSMethodArguments});  

    gwreportpub.DataSource = getDatiFromDb();
    gwreportpub.DataBind();
    gwreportpub.Visible = true;
    if (gwreportpub.Rows.Count == 0)
    {   
            tbnotif.Text = "Non vi sono report pubblicati";
            tbnotif.Visible = true;
    }
    else{
        tbnotif.Visible = true;
        tbnotif.Text = "Tabella dei Report Pubblicati: ";
    }
    return;

   }
   void TimeoutAsyncOperation(IAsyncResult ar)
   {
    Response.Write("Pubblicazione Timeout");
   }
   IAsyncResult BeginAsyncOperation (object sender, EventArgs e, 
    AsyncCallback cb, object state)
    {

    object[] array = state as object[];

    HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(@"http://172.19.241.235:9001/snam-rpg-ws/ReportPosting"); 
    webRequest.Headers.Add(@"SOAP:Action"); 
    webRequest.ContentType = "text/xml;charset=\"utf-8\""; 
    webRequest.Accept = "text/xml"; 
    webRequest.Method = "POST"; 

    HttpWebRequest request = webRequest;
    XmlDocument soapEnvelopeXml = new XmlDocument();
    soapEnvelopeXml.LoadXml("<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:pos=\"http://posting.ws.rpg.snamretegas.it/\"><soapenv:Header/><soapenv:Body><pos:postAllReports><report_name> " + array[0] +" </report_name> <report_date> " + array[1] + "</report_date> <i_ambiente> " + array[2] + "</i_ambiente> <i_taxidOpco></i_taxidOpco></pos:postAllReports></soapenv:Body></soapenv:Envelope>");

    using (Stream stream = request.GetRequestStream()) 
    { 
        soapEnvelopeXml.Save(stream); 
    }

    using (WebResponse response = request.GetResponse())
    {
        using (StreamReader rd = new StreamReader(response.GetResponseStream())) 
        { 
            string soapResult = rd.ReadToEnd();

        } 
    }

    SampleMethodCaller smd = new SampleMethodCaller(SampleClass.SampleMethod);
    IAsyncResult result = smd.BeginInvoke(null, null);
    return result;
    //return callWebService(new object[] {"http://172.19.241.235:9001/snam-rpg-ws/ReportPosting","ReportPosting","postAllReports",state});

}
public delegate bool SampleMethodCaller();

void EndAsyncOperation(IAsyncResult ar)
{
    Response.Write("Pubblicazione Terminata");
}

protected void Page_PreRenderComplete(object sender, EventArgs e)
{

}

   public DataSet getDatiFromDb()
   {
        OracleDataAdapter adapter = new OracleDataAdapter();
        OracleCommand orclc = new OracleCommand("select pubblicato, nome_report, data_report, md5 from rpg_notification where pubblicato = :flag and data_report <= TO_DATE(:repdate,'DD/MM/YYYY') and nome_report = :nome",this.connection);
        orclc.Parameters.Add(new OracleParameter(":flag", OracleType.VarChar));
        orclc.Parameters.Add(new OracleParameter(":nome", OracleType.VarChar));
        orclc.Parameters.Add(new OracleParameter(":repdate", OracleType.VarChar));
        orclc.Parameters[":flag"].Value = "Y";
        orclc.Parameters[":nome"].Value = dropdownlist1.SelectedItem.Text;
        orclc.Parameters[":repdate"].Value = Request["txtSchedDate"].ToString();

        adapter.SelectCommand = orclc;

        DataSet dt = new DataSet("rpg_notification");   
        adapter.Fill(dt,"rpg_notification");
        return dt;
   }
    protected void GridView1_PageIndexChanging(object sender,
GridViewPageEventArgs e)
    {
    gwreportpub.PageIndex = e.NewPageIndex;
    gwreportpub.DataBind();
    }
   protected void coloraRighe(object sender, GridViewRowEventArgs e)
    {
    if (e.Row.RowType==DataControlRowType.Header)
    {
        e.Row.BackColor = Color.Ivory;
    }

    else if (coloreriga == 2)
    {
        e.Row.BackColor = Color.LightYellow;
        coloreriga = 1;
    }
    else
    {
        e.Row.BackColor = Color.WhiteSmoke;
        coloreriga = 2;
    }
    }

}

public class SampleClass
    {
        public static bool SampleMethod()
        {

        return true;
        }

    } 
```

请你能告诉我为什么它不调用 Ws 吗？？？

请问我该如何调试这个？？？你看到代码有问题？？

我也对异步模式感到疯狂

最后是asp页面：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Pubreport.aspx.cs"
Inherits="PubreportControl" Title="Untitled Page"  Async="true" %> 
```

```
 <html xmlns="http://www.w3.org/1999/xhtml" >

  <script language="javascript" type="text/javascript">
     var size = 0;
     var id= 0;

  function add_gif() {
    document.getElementById("Label1").style.display = "none";       
         show_image("./wait.gif", 300,15, "Running");
 }

 function show_image(src, width, height, alt) {
    var img = document.createElement("img");
    img.src = src;
    img.width = width;
    img.height = height;
    img.alt = alt;
    document.getElementById("divUpload").style.display="inline";
    var div = document.getElementById("divUpload");
    div.appendChild(img);
 }

 function show_table() {
    document.getElementById("tbnotification").style.display="block";
 }

 </script>

 <head id="Head1" runat="server">
     <title>Pubblicazione Report</title>
<link rel="stylesheet" type="text/css" href="../controls/SnapIn.css" />
     <link rel="stylesheet" type="text/css" href="../controls/lsi18n.css" />

     <script type="text/javascript" src="../cust_batchrequest/calendario/prototype.js"></script>

     <script type="text/javascript" src="../cust_batchrequest/calendario/scriptaculous.js">     </script>

<script type="text/javascript" src="../cust_batchrequest/calendario/datepicker.js"></script>

     <link rel="stylesheet" type="text/css" href="../cust_batchrequest/calendario/datepicker.css" />

<style type="text/css">
    .errorMessage
    {
        color: #8B0000;
        text-align: center;
    }
    .confirmMessage
    {
        color: #006400;
        text-align: center;
    }
    .datebox
    {
        text-align:center;
    }
</style>
<style type="text/css"> 
    .CCSListBox 
    { 
        width: 200px; 
    }
</style>    
 </head>

 <body style="margin-left: 20%; margin-right: 20%">

<form id="form1" runat="server">
<table class="SnapIn" style="text-align: center; height: 100%; border: 0; background-color: #FFFFFF; width: 100%;
    border: 3px solid #6699CC" cellpadding="0" cellspacing="0">
    <tr class="ToolsRow">
        <td class="Title" style="white-space: nowrap; width=20%">
            Pubblicazione Report
        </td>
        <td style="width: 80%; text-align: right">

        </td>
    </tr>
    <tr style="height: 5%">
        <td colspan="2">
            &nbsp;
        </td>
    </tr>
    <tr style="text-align: center;">

    </tr>
    <tr style="height: 15%">
        <td colspan="2">
            &nbsp;
        </td>
    </tr>
    <tr>

        <td style="text-align: center" colspan="2"> 
        <div style="text-align:center">
             <b>Scegliere il nome del report *  </b>  &nbsp;
             <asp:DropDownList id="dropdownlist1" style="width:250px;" runat="server"></asp:DropDownList>
            <br />
            <br /> 
            <br /> 
            <b>Scegliere la data del report </b>  &nbsp; 
            <asp:TextBox runat="server" ID="txtSchedDate" name="txtSchedDate" type="text" cssclass="datebox" style="height:20px;" ReadOnly="true"/>
            <br />
            <br />
            <br />
            <asp:Button ID="Button1" runat="server" Text="Pubblica" OnClientClick="show_table();" OnCommand="Button1_Click" />
            <br />
            <br />
            <br />
            <br />
            <asp:Label ID="Label1" Font-Names="Arial" Font-Size="15px" runat="server" ForeColor="Red" Font-Bold="True" Text=""></asp:Label>
            <div id="divUpload" style="display:none">
            <div  style="width:200pt;;text-align:center;">Pubblicando...</div>
            </div>
        </div>
        </td>
    <br/>
    </tr>

    <tr>
        <td colspan="2" style="text-align: center">

            <br />
            &nbsp;
        </td>
    </tr>

    <tr>
        <td colspan="2" style="text-align: center">
            <br />
            &nbsp;
            <table width="100%" id="tbnotification" class="Stripy" style="display:block;">
            <tr>
                <tr>
                <td colspan="2" style="text-align: center">
                <asp:Label ID="tbnotif" runat="server" ReadOnly="True" Text="" >
                </asp:Label>
                </td>
                </tr>
               <tr>
               <td>

                <asp:GridView ID="gwreportpub" runat="server" CellPadding="5" BorderStyle="Solid" OnRowDataBound="coloraRighe" AllowPaging="true" PageSize="15" OnPageIndexChanging="GridView1_PageIndexChanging" style="border: 1px solid black;">
                 </asp:gridview>
               </td>
               </tr>
            </tr>
        </table>
        </td>
    </tr>

</table>
</form>
<script type="text/javascript"> 
    var dpck_1 = new DatePicker({ relative: 'txtSchedDate', language: 'it' });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:03:31.567

好的，在java中做了一个外部客户端，我确实生成了一个调用webservice的jar，在我这样做之后调用了aspx页面内的webserice：

```
 System.Diagnostics.Process proc = new System.Diagnostics.Process();
        proc.StartInfo.RedirectStandardOutput = true;
        proc.StartInfo.RedirectStandardError = true;
        proc.StartInfo.UseShellExecute = false;
        proc.StartInfo.FileName = "\"" + System.Web.HttpContext.Current.Server.MapPath(".") + "\\"  + "ConsoleApp.jar" + "\"" ;

        if(datarepo != "")
        proc.StartInfo.Arguments = "\""+connectionString +"\"" + " " +"\"" +reportname+"\""  + " " +"\"" +datarepo+"\""  + " " +"\"" +opco+"\""  + " " + "\"" +ambienteParm+"\"";
        else
        proc.StartInfo.Arguments = "\""+connectionString +"\"" + " " +"\"" +reportname+"\""  + " " +"\"" + "\""  + " " +"\"" +opco+"\""  + " " + "\"" +ambienteParm+"\"";

        proc.Start();
        proc.WaitForExit();
        //string result = proc.StandardOutput.ReadToEnd();
        //Response.Write(result + " - "  + proc.ExitCode);
        proc.Close(); 
```

谢谢大家。

# javascript - Javascript剥离URL上的点

> ID：14710216
> 
> 赞同：1
> 
> 时间：2013-02-05T14:46:46.933
> 
> 标签：javascript, jquery, smarty, sugarcrm

我正在尝试向 url 发送一个 get 请求，它从 form.phone_work.value 中剥离点的脚本应该在那里获取电话号码。

这是一个聪明的模板。我想我也必须将 php 放在 {} 中，我在数组 'javascript' => 'MYCODEHERE' 我认为逗号也会造成问题，因为 md5($_SESSION['asynchronous_key']) 在里面数组中的引用。

这是非工作代码：

```
'javascript' => '<script type="text/javascript">
var host = "http://localhost/";
var currentUserPhone = "sip2000";
var session = "<? echo md5($_SESSION['.asynchronous_key.']); ?>";

function invoke_call(v) {
  if(confirm("Are you sure you want to call:"+v)) {
var callback = { 
  success: function(o) {}
    }
var connectionObject = YAHOO.util.Connect.asyncRequest ("GET",  
   host+"/scripts/call_api.php?"+
   "dest="+encodeURIComponent(v)+
   "&ext="+currentUserPhone+
   "&key="+session, 
   callback);
 }
} 
```

'

我知道 form.phone_work.value 有效，因为我在调用此脚本的按钮上使用它。电话号码显示在确认框中。

```
<input title="call" accessKey="{$MOD.LBL_SERVICES_BUTTON_KEY}" type="button" class="button" 
         onClick="invoke_call(form.phone_work.value)" name="call" value="Call Office"> 
```

这是正在生成的 URL。您可以看到它没有解析 phone_work 的 dest=

```
http://localhost/scripts/call_api.php?dest=phone_workvalue&ext=&key=3989 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T03:17:04.793

如图所示的代码已经过编辑，是工作代码。问题最终是会话被缓存，因为这是一个聪明的模板。我为此特定视图禁用了缓存以纠正问题。

# c# - StreamReader 因目录错误而失败？

> ID：14710218
> 
> 赞同：2
> 
> 时间：2013-02-05T14:46:51.730
> 
> 标签：c#, asp.net

我正在尝试从我的 Web 应用程序的 App_Data 文件夹中加载一个文件：

```
 KezMenu kmenu = new KezMenu("~/App_Data/Menu.xml"); 
```

但由于某种原因，这导致 MSVC 试图在一个奇怪的区域找到它：

```
Could not find a part of the path 'C:\Program Files (x86)\Common Files\Microsoft Shared\DevServer\10.0\~\App_Data\Menu.xml'. 
```

我不明白为什么它指向这里而不是我的项目目录。

我必须怎么做才能让它工作？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T14:48:43.497

听起来像是`KezMenu`在期待*您*（而不是它）担心虚拟路径与物理路径。尝试：

```
KezMenu kmenu = new KezMenu(
    HttpContext.Current.Server.MapPath("~/App_Data/Menu.xml")); 
```

或者

```
KezMenu kmenu = new KezMenu(Server.MapPath("~/App_Data/Menu.xml")); 
```

如果您已经有`Server`房产。

# python - python matplotlib dash-dot-dot - 如何？

> ID：14710221
> 
> 赞同：37
> 
> 时间：2013-02-05T14:46:59.693
> 
> 标签：python, matplotlib, linestyle

我正在使用 python 和 matplotlib 来生成图形输出。
有没有一种简单的方法来生成点划线样式？
我知道`'--'`、`'-.'`和`':'`选项。不幸的是，`'-..'`不会导致点划线。
我查看了`set_dashes`命令，但这似乎控制了破折号的长度和两个相邻破折号之间的空间。
一种选择可能是在彼此之上绘制两条线；一种是虚线，虚线之间有足够的空间 - 一种是虚线，与虚线一样大的点宽且间隔开，因此每个虚线之间有两个点。我不怀疑这是可以做到的，我只是希望有一种更简单的方法。
我是否忽略了一个选项？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-02-05T14:58:57.810

您可以定义[自定义破折号](http://matplotlib.org/1.2.1/examples/pylab_examples/dash_control.html)：

```
import matplotlib.pyplot as plt

line, = plt.plot([1,5,2,4], '-')
line.set_dashes([8, 4, 2, 4, 2, 4]) 
plt.show() 
```

![在此处输入图像描述](../Images/3f2d64835d6584dccad6b955cf5eb76a.png)

`[8, 4, 2, 4, 2, 4]`方法

*   8 分，（破折号）
*   扣4分，
*   2 点，（点）
*   扣4分，
*   2 点，（点）
*   减4分。

* * *

@Achim 指出您还可以指定`dashes`参数：

```
plt.plot([1,5,2,4], '-', dashes=[8, 4, 2, 4, 2, 4])
plt.show() 
```

产生与上图相同的结果。

# android - ViewPager 上的 MotionEvents

> ID：14710224
> 
> 赞同：0
> 
> 时间：2013-02-05T14:47:09.723
> 
> 标签：android, android-viewpager

我有一个 ViewPager 显示一些媒体（视频、图像和文本片段）。对于图像，当您点击图像时，应该会出现一个文本。对于视频，点击显示媒体控件。

问题是，对于图像（我自己实现了 onTouch 事件）和 videoView（它具有媒体控件的内部手势管理），当我滑动到下一页或上一页时，点击事件被带到片段，并且文本显示在图像中，并且媒体控件显示（即使不再显示视频，它们甚至会保留）。

我怎样才能避免这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:27:09.983

发现如果你有一个`ViewPager`in a`ScrollView`并且你希望它始终保持焦点，当你触摸它并且`ScrollView`永远不会获得焦点时，这就是这样做的。

```
mViewPager = (ViewPager)findViewById(R.id.pager);
mViewPager.setAdapter(adapter);
mViewPager.setOnTouchListener(new View.OnTouchListener() {
   @Override
   public boolean onTouch(View v, MotionEvent event) {
      mViewPager.getParent().requestDisallowInterceptTouchEvent(true);
      return false;
   }
}); 
```

# linux - 什么时候调用 pthread_attr_destroy 是安全的？

> ID：14710232
> 
> 赞同：11
> 
> 时间：2013-02-05T14:47:34.263
> 
> 标签：linux, pthreads, detach

我在 Linux 上使用 pthread。从文档中，我不清楚何时可以安全地调用`pthread_attr_destroy`我用来创建新线程的属性？我可以在`pthread_create`返回后立即执行，还是必须等到线程加入或分离？

在此先感谢，克里斯托夫

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-05T14:55:30.030

线程属性被复制到 中`pthread_create`，所以它应该在`pthread_create`调用后被销毁。

[需要在这里http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_create.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_create.html)之间阅读：

> 如果 attr 指定的属性稍后被修改，线程的属性不受影响。

# ios - iOS 应用内购买和订阅：测试

> ID：14710240
> 
> 赞同：3
> 
> 时间：2013-02-05T14:48:06.120
> 
> 标签：ios, in-app-purchase, subscription

我的一所大学实施了每月自动更新的 iOS 应用内购买。我正在接管代码库并想测试它是否正常工作。我知道采购工作很顺利，但我担心的是自动续订。

我已经设置了一个测试用户并阅读了在沙盒模式下说的 Apple 文档，在沙盒中一个月是 5 分钟。

但是 5 分钟后我没有收到 Apple 的任何回复？我是不是该？

在 AppDelegate 我有

```
 inAppPurchase = [TFInAppPurchase new];
[[SKPaymentQueue defaultQueue] addTransactionObserver:inAppPurchase];
[inAppPurchase updateAvailableProductsCache]; 
```

我期待 5 分钟后，它会触发通知或什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-05T15:37:45.737

在[iTunes 开发指南](https://developer.apple.com/library/content/documentation/LanguagesUtilities/Conceptual/iTunesConnectInAppPurchase_Guide/Chapters/TestingInAppPurchases.html#//apple_ref/doc/uid/TP40013727-CH4-SW5)中，列出了沙盒模式下自动续订订阅的持续时间：

> **沙盒测试您的应用内购买**
> 
> 您需要先在沙盒环境中测试您的应用内购买，然后再将其提交给 Apple 审核。在尝试使用沙盒环境之前，您必须先从您的测试设备设置中注销您的 iTunes Store 帐户。如果您错误地使用您的 test-user-account 凭据登录到您的测试设备上的生产环境（而不是登录到您的测试环境），您的帐户凭据将失效并且不能再次用作测试帐户。有关如何在测试帐户使用过程中避免错误的更多详细信息，请参阅“使用测试用户帐户”。</p>
> 
> 在沙盒环境中测试自动更新的应用内购买订阅时，将压缩持续时间以允许更简化的测试。此外，沙盒订阅最多只能自动续订 6 次。订阅自动续订 6 次后，将不再在沙盒中续订。压缩的持续时间如下：

```
 Actual duration      Sandbox duration
   1 week               3 minutes 
   1 month              5 minutes
   2 months             10 minutes 
   3 months             15 minutes 
   6 months             30 minutes 
   1 year               1 hour 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T09:37:02.917

没有通知。您自己跟踪它（持续时间）。您会收到带有您保存的原始交易的收据。使用它来验证（可能在每次启动时）用户的订阅仍然有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-18T06:34:40.763

苹果不会生成任何通知。您必须使用 nsuserdefaults 或钥匙串将配方保存在服务器或设备上。您必须自己跟踪持续时间。通过计算将相关产品标识符与每个应用内购买收据的产品标识符进行比较。如果有匹配的收据，则验证成功。否则，验证失败。

验证成功后，您的应用程序将启用购买的功能——例如，通过下载内容或添加功能。当验证失败时，您的应用程序根本不会启用该功能。

# sql - 如何在 BigQuery 中查找没有活动的时段

> ID：14710243
> 
> 赞同：1
> 
> 时间：2013-02-05T14:48:10.550
> 
> 标签：sql, join, group-by, google-bigquery, having-clause

我在 BigQuery 中有一个包含某种类型活动的表，现在只有大约 40Mb 的数据。活动日期存储在其中一个字段中（格式为 YYYY-MM-DD HH:MM:SS 的字符串）。我需要找到方法来确定运行合理时间的不活动时间段（具有一些预定义的阈值）。

我构建的查询已经运行了一个小时。这里是：

```
SELECT t1.date, MIN(PARSE_UTC_USEC(t1.date) - PARSE_UTC_USEC(t2.date)) AS mintime 
FROM logs t1
JOIN (SELECT date, http_error FROM logs) t2 ON t1.http_error = t2.http_error
WHERE PARSE_UTC_USEC(t1.date) > PARSE_UTC_USEC(t2.date)
GROUP BY t1.date
HAVING mintime > 1000; 
```

想法是： 1\. 将表与自身进行 decart 乘法（http_error 是几乎从不改变值的字段，所以它可以解决问题） 2\. 只取 date1 > date2 的对 3\. 取每个 date1 date2 的最小差异 4。在此最小差异大于阈值的情况下限制选择。

我承认我使用的真正查询是修复无效数据的负担（这增加了额外的操作）。但我真的需要更好的主意来做到这一点。我很高兴听到其他想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T17:07:16.567

我不知道您正在寻找的不活动粒度，但为什么不尝试按您的时间戳进行分桶，然后计算每个桶中活动的相对频率：

```
SELECT
  UTC_USEC_TO_HOUR(PARSE_UTC_USEC(timestamp_usec)) AS hour_bucket,
  COUNT(*) as activity_count
GROUP BY
  hour_bucket
ORDER BY
  activity_count ASC; 
```

# c# - 反射 C# - GetType() 返回 Null

> ID：14710245
> 
> 赞同：0
> 
> 时间：2013-02-05T14:48:12.733
> 
> 标签：c#, reflection, null

> **可能重复：**
> [Type.GetType(“namespace.abClassName”) 返回 null](https://stackoverflow.com/questions/1825147/type-gettypenamespace-a-b-classname-returns-null)

我正在尝试接收对象的类型，如下所示：

```
Type type = typeof(Namespace1.SubFolder.Class);
Type type2 = Type.GetType("Namespace1.SubFolder.Class"); 
```

为什么 type2 被返回为 null 而 type 被按预期返回？我希望最终从用户选择的字符串值创建一个类。

# java - 为什么编译失败？

> ID：14710246
> 
> 赞同：0
> 
> 时间：2013-02-05T14:48:16.900
> 
> 标签：java

为什么在这种情况下编译失败？

这是怎么回事？:`Employee`调用`default constructor of Person`的构造函数，仅此而已。

![在此处输入图像描述](../Images/038041b27d1acfdaeb32515469ea403f.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T14:50:11.357

由于您的超类构造函数没有定义无参数默认构造函数，因此您应该从子类构造函数显式调用超类的 1-args 构造函数。因此答案是第 18 行的**D**编译错误

要修复代码：

```
public Employee(String id){
super("pass person name");
//rest of the code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:54:07.087

我想你可能会假设 Person 有一个默认的构造函数。如果没有声明的构造函数，编译器只会插入一个默认构造函数。如果你想让 Person 有一个无参数的构造函数，你需要声明一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T15:07:59.277

在构造 Employee 时，需要在 Person 中调用构造函数。默认情况下，编译器将调用默认构造函数（不带参数），但在这种情况下，Person 中不存在它（编译器仅在不存在其他构造函数时才创建默认构造函数）。

您必须在 Employee 构造函数的第一行调用 Person 的具体构造函数，或者在 Person 中定义一个默认构造函数。

# java - 使用 Java https 错误上传到 Imgur v3

> ID：14710247
> 
> 赞同：5
> 
> 时间：2013-02-05T14:48:22.873
> 
> 标签：java, post, https, imgur

我目前正在尝试使用他们当前的 API v3 上传到 imgur，但是我不断收到错误消息

> 错误：javax.net.ssl.SSLException：证书中的主机名不匹配：api.imgur.com！= imgur.com OR imgur.com

该错误是不言自明的，所以我想我会尝试使用 http，但我使用 imgur 得到错误代码 400。我不确定这是否意味着我尝试上传的方式是错误的，或者 Imgur 是否不喜欢 SSL 连接。

下面是我连接到 Imgur 的代码模块：

```
public String Imgur (String imageDir, String clientID) {
    //create needed strings
    String address = "https://api.imgur.com/3/image";

    //Create HTTPClient and post
    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost(address);

    //create base64 image
    BufferedImage image = null;
    File file = new File(imageDir);

    try {
        //read image
        image = ImageIO.read(file);
        ByteArrayOutputStream byteArray = new ByteArrayOutputStream();
        ImageIO.write(image, "png", byteArray);
        byte[] byteImage = byteArray.toByteArray();
        String dataImage = new Base64().encodeAsString(byteImage);

        //add header
        post.addHeader("Authorization", "Client-ID" + clientID);
        //add image
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
        nameValuePairs.add(new BasicNameValuePair("image", dataImage));
        post.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        //execute
        HttpResponse response = client.execute(post);

        //read response
        BufferedReader rd = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        String all = null;

        //loop through response
        while (rd.readLine() != null) {
            all = all + " : " + rd.readLine(); 
        }

        return all;

    }
    catch (Exception e){
        return "error: " + e.toString();
    }
} 
```

我希望有人可以帮助找到上述代码中的错误或解释如何解决当前的 HTTPS 问题，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T00:18:40.353

看起来证书中的域名与您正在访问的域名不匹配，因此 SSL 按预期失败。您可以告诉 HttpClient 忽略证书问题并建立连接。有关详细信息，请参阅此[stackoverflow 答案](https://stackoverflow.com/a/2703233/1818625)。

# google-app-engine - AppEngine NDB 缓存 - 对新版本的代码无效？

> ID：14710249
> 
> 赞同：0
> 
> 时间：2013-02-05T14:48:26.177
> 
> 标签：google-app-engine, caching

部署新应用程序版本时，AppEngine 上的 NDB 是否会自动刷新或以其他方式使缓存项失效？如果模型被修改，那么从基于旧模型定义的缓存中提取数据似乎是不好的。

（在使用 NDB 之前，当我自己缓存所有项目时，我会通过使用应用程序版本 ID 作为 memcache 键的一部分来确保不会在版本之间保留 memcached 项目）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:28:07.533

Afaik ndb 不会自动执行此操作（但我不知道您的应用程序的新版本是否会获得新的 memcache 实例，我们从来没有遇到过问题）。但是您始终可以从仪表板手动刷新内存缓存。

如果你喜欢实验，ndb.context 中有属性“_memcache_prefix”，它可能会做你想做的事，但目前官方不支持改变它。

另请注意，更改模型不会更改您的数据库。所以无论如何你都会从数据库中提取基于旧模型的数据。它只是应用于您的模型，为缺少的属性填充默认值。

# xml - XSLT - 从另一个 XML 获取 xml

> ID：14710253
> 
> 赞同：0
> 
> 时间：2013-02-05T14:48:34.537
> 
> 标签：xml, xslt

我需要使用 XSLT fron 字段在另一个中提取一个 xml。

```
<?xml version="1.0" encoding="UTF-8" ?> 
<ns:JDBC_SELECT xmlns:ns="namepace/nt">
<row>
<KEY>19</KEY> 
<QUEUE_TYPE>2</QUEUE_TYPE> 
<EVENT_STATUS>0</EVENT_STATUS> 
<EVENT_TYPE>New Work Package Request</EVENT_TYPE> 
<CONTENT><?xml version="1.0" encoding="utf-8" standalone="yes"?><event xmlns:ns="namespace/nt" reference="0000000000" source="NBA" target="SAP" timestamp="2013-02-04T14:32:01.836+00:00" type="New Work Package Request" version="1.0" id="19"><new-work-package-request-event><work-order-id>11</work-order-id><personnel-id>ra_a</personnel-id><request-timestamp>2013-02-04T14:32:01.836+00:00</request-timestamp><new-notification-request><type>Z2</type><requirement-code>RI0D</requirement-code><main-work-centre>0102</main-work-centre><planner-group>L00</planner-group><functional-location-id>1024</functional-location-id><short-text>SET UP/REMOVE ISOLATION RUN</short-text><long-text>SET UP/REMOVE ISOLATION RUN, 1024, NORTON FOXLEY (PRV) NORTON FOXLEY Nightline Increase: (l/h)</long-text><personnel-resp-id>12157</personnel-resp-id><cost-centre>3600</cost-centre></new-notification-request><new-work-order-request><type>ZPM2</type></new-work-order-request></new-work-package-request-event></event></CONTENT> 
</row>
</ns:JDBC_SELECT> 
```

* * *

```
<xsl:transform xmlns:xsl="namespace/nt" version="1.0">
  <xslutput method="xml"/>
  <xsl:template match="/">
    <xsl:copy-of select="//CONTENT"/>
  </xsl:template>
</xsl:transform> 
```

但不是运气。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:57:51.177

XML 无效 - 它不能包含第二个

```
<?xml version="1.0" encoding="utf-8"?> 
```

元素内的声明。因为它不会加载。

XSLT 中也存在问题 - 名称空间必须是`http://www.w3.org/1999/XSL/Transform`：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="/">
      <xsl:copy-of select="//CONTENT"/>
    </xsl:template>

</xsl:stylesheet> 
```

去掉`<?xml....>`XML 中的第二个声明后，上面的 XSLT 就可以工作了，产生以下输出：

```
<?xml version="1.0" encoding="utf-8"?>
<CONTENT xmlns:ns="namepace/nt">
  <event reference="0000000000" source="NBA" target="SAP" timestamp="2013-02-04T14:32:01.836+00:00" type="New Work Package Request" version="1.0" id="19" xmlns:ns="namespace/nt">
    <new-work-package-request-event>
      <work-order-id>11</work-order-id>
      <personnel-id>ra_a</personnel-id>
      <request-timestamp>2013-02-04T14:32:01.836+00:00</request-timestamp>
      <new-notification-request>
        <type>Z2</type>
        <requirement-code>RI0D</requirement-code>
        <main-work-centre>0102</main-work-centre>
        <planner-group>L00</planner-group>
        <functional-location-id>1024</functional-location-id>
        <short-text>SET UP/REMOVE ISOLATION RUN</short-text>
        <long-text>SET UP/REMOVE ISOLATION RUN, 1024, NORTON FOXLEY (PRV) NORTON FOXLEY Nightline Increase: (l/h)</long-text>
        <personnel-resp-id>12157</personnel-resp-id>
        <cost-centre>3600</cost-centre>
      </new-notification-request>
      <new-work-order-request>
        <type>ZPM2</type>
      </new-work-order-request>
    </new-work-package-request-event>
  </event>
</CONTENT> 
```

# cron - 每天凌晨 2:30 运行 cron 作业

> ID：14710257
> 
> 赞同：350
> 
> 时间：2013-02-05T14:48:45.567
> 
> 标签：cron, crontab

如何将 cron 作业配置为每晚 2:30 运行？我知道如何让它在 2 点运行，但不是 2:30。

* * *

## 回答 #1

> 赞同：580
> 
> 时间：2013-02-05T14:51:36.160

```
crontab -e 
```

添加：

```
30 2 * * * /your/command 
```

* * *

## 回答 #2

> 赞同：174
> 
> 时间：2016-02-21T08:17:26.327

1.  编辑：

    ```
    crontab -e 
    ```

2.  添加这个命令行：

    ```
    30 2 * * * /your/command 
    ```

    *   crontab 格式：

        > MIN HOUR DOM MON DOW CMD

    *   格式含义和允许值：
    *   `MIN Minute field 0 to 59`
    *   `HOUR Hour field 0 to 23`
    *   `DOM Day of Month 1-31`
    *   `MON Month field 1-12`
    *   `DOW Day Of Week 0-6`
    *   `CMD Command Any command to be executed.`
3.  使用最新数据重新启动 cron：

    ```
    service crond restart 
    ```

* * *

## 回答 #3

> 赞同：76
> 
> 时间：2016-08-12T09:56:49.780

如其他答案所示，使用的语法是：

```
 30 2 * * * /your/command
# ^  ^
# |   hour
# minute 
```

遵循 crontab 标准格式：

```
 +---------------- minute (0 - 59)
 |  +------------- hour (0 - 23)
 |  |  +---------- day of month (1 - 31)
 |  |  |  +------- month (1 - 12)
 |  |  |  |  +---- day of week (0 - 6) (Sunday=0 or 7)
 |  |  |  |  |
 *  *  *  *  *  command to be executed 
```

[使用crontab.guru](http://crontab.guru/)检查 crontab 表达式也很有用。

表达式被添加到`crontab`using 中`crontab -e`。完成后，保存并退出（如果您使用的是`vi`，则键入即可`:x`）。使用此工具的好处是，如果您编写了无效命令，您可能会在表单上收到消息提示：

```
$ crontab -e
crontab: installing new crontab
"/tmp/crontab.tNt1NL/crontab":7: bad minute
errors in crontab file, can't install.
Do you want to retry the same edit? (y/n) 
```

如果您对 crontab 没有运行还有其他问题，您可以检查[调试 crontab](https://stackoverflow.com/tags/crontab/info)或[为什么 crontab 没有执行我的 PHP 脚本？](https://stackoverflow.com/a/17362250/1983854).

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-04-01T01:54:55.350

编写 cron 的一种简单方法是使用在线 cron[生成器](http://crontab-generator.org/) ，它将为您生成行。需要注意的一件事是，如果您希望每天（不仅仅是工作日）运行它，您需要突出显示所有的日子。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-01T13:42:20.760

作为上述所有出色答案的补充，请查看[https://crontab.guru/](https://crontab.guru/) - 一个有用的在线资源，用于检查您的 crontab 语法。

你得到的是你所指定的人类可读的表示。

请参阅以下示例：

*   [30 2 * * *](https://crontab.guru/#30_2_*_*_*) (这个问题的答案)
*   [@日常](https://crontab.guru/#@daily)
*   [59 23 31 12 *](https://crontab.guru/#59_23_31_12_*)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-06T13:45:42.790

30 2 * * * wget [https://www.yoursite.com/your_function_name](https://www.yoursite.com/your_function_name)

第一部分用于设置 cron 作业，下一部分用于调用您的函数。

# html - 如何通过标记实现以下列表布局？

> ID：14710262
> 
> 赞同：0
> 
> 时间：2013-02-05T14:49:10.347
> 
> 标签：html, list, css, html-lists

> **可能重复：**
> [在 ol 项目 html 上实现子编号](https://stackoverflow.com/questions/2058564/achieving-sub-numbering-on-ol-items-html)

我试图通过使用无序列表来实现这样的目标：

**1\. 标题**

目标：这里有一些文字......

     1.1 选项1
     1.2 选项2
     1.3 选项3

**2\. 标题**

目标：这里有一些文字......

     2.1 选项1
     2.2 选项2
     2.3选项3

* * *

我尝试使用`list-style: decimal;`，但只能实现 1、2、3 等数字，而我需要它们的格式为 1.2 、 1.3 ... 2.1 、2.3 等。这也可以通过使用一个无序列表来实现，还是我需要使用几个?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:51:16.067

我认为这是不可能的。在这里查看所有`list-style`可能的类型[http://www.w3schools.com/Css/tryit.asp?filename=trycss_list-style-type_all](http://www.w3schools.com/Css/tryit.asp?filename=trycss_list-style-type_all)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:56:24.617

在我的一个项目中，我使用了这段代码（[演示](http://www.codepen.io/yardenst/pen/KDcLI)）

（我不记得我从哪里得到它，但它有效）

```
ol{ 
    counter-reset: listing ;
}
li { 
    display: block ;
}
li:before { 
    content: counters(listing, ".") " "; 
    counter-increment: listing ;
} 
```

当然，此方法使您可以控制许多其他事情：您可以使用该`content`属性随意自定义计数器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T15:29:48.050

我认为css中的计数器属性可能存在浏览器兼容性问题。

为什么不使用jquery？

```
<style type="text/css">
ul
{
    list-style-type: none;
}
</style>    

<ul>
    <li>option 1</li>
    <li>option 2</li>
    <li>option 3</li>
</ul>

<script>
var num = 1.0;
$( "li" ).each(function( index ) {
    var text = $(this).text();
     index++;

     list = num + (index / 10);

     $(this).html(list + " . " + text);

});
</script> 
```

# c# - 插入语句 c# 中的 OledbCommandBuilder 语法错误？

> ID：14710263
> 
> 赞同：-1
> 
> 时间：2013-02-05T14:49:14.413
> 
> 标签：c#, ms-access, dataset, oledb

我知道这个问题已经被问了一百次了，我都看过了，不知道出了什么问题。这是访问中的表：

```
tbl_Slip

SlipNo*,
EmpID,
ScaleID,
Month-Year,
RaiseBasic,
OtherDed,
Tax,
Arrears,
Notes, 
```

除了 Month-Year 和 Notes 是文本之外，所有字段都是整数类型。

现在是 C# 部分：这是我使用的代码。我试图找出错误，所以制作了一个带有硬编码值的按钮。

（oledbConnection 工作正常。我用它在表单上显示数据）

这个函数我用来链接到 tbl_Slip。

```
 private void linkToSlip()
    {
        con.Open();

        string sqlRecords = "Select * FROM tbl_Slip ORDER BY SlipNo";
        SlipDA = new OleDbDataAdapter(sqlRecords, con);
        SlipDA.Fill(SlipDS, "Slip");

        // Primary key so DataTable.Rows.Find[] can be used
        SlipDS.Tables["Slip"].PrimaryKey = new DataColumn[] { SlipDS.Tables["Slip"].Columns["SlipNo"] };
        maxSlipRows = SlipDS.Tables["Slip"].Rows.Count;

        dataGrid_Slip.DataSource = SlipDS;
        dataGrid_Slip.DataMember = "Slip";

        con.Close();
    } 
```

这是表单加载部分：

```
 private void frm_Slip_Load(object sender, EventArgs e)
    {
        SlipDS = new DataSet();
        createcon();
        linkToSlip();
    } 
```

（createcon 是我用来连接数据库的函数）

这是按钮代码：

```
 private void button1_Click(object sender, EventArgs e)
    {
        OleDbCommandBuilder saveCB = new OleDbCommandBuilder(SlipDA);

        DataRow dR = SlipDS.Tables["Slip"].NewRow();

        dR[0] = Convert.ToInt32("2");
        dR[1] = Convert.ToInt32("1");
        dR[2] = Convert.ToInt32("1");
        dR[3] = "January-2013";
        dR[4] = Convert.ToInt32("15");
        dR[5] = Convert.ToInt32("20");
        dR[6] = Convert.ToInt32("2");
        dR[7] = Convert.ToInt32("223");
        dR[8] = "notes";

        SlipDS.Tables["Slip"].Rows.Add(dR);
        saveCB.DataAdapter.Update(SlipDS.Tables["Slip"]);
        maxSlipRows++;
    } 
```

当我按下按钮时，给出的错误是

**INSERT INTO 语句中的语法错误。**

我无法弄清楚是什么问题。我检查了重复，我检查了数据是否保存在 SlipDS.Tables["Slip"] (IT WAS) 中。我想不出别的了。

怎么了 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T03:17:43.400

我敢打赌，无效命令的问题是您的字段名称中有一个连字符，并且可能没有正确创建并被解释为

```
insert into tbl_Slip ( EmpID, ScaleID, Month-Year, ... 
```

有空格和/或连字符的列是个坏主意。是的，数据库允许这样做，但您不必仅仅因为可以就自取其辱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:02:51.657

快速回答：不要使用`OleDbCommandBuilder`. `OleDbCommand`手动创建`INSERT INTO ... (...) VALUES (...)`并使用参数化查询。然后，适当地添加参数。

您必须向我们展示该`INSERT`声明，以便我们知道它有什么问题。

# php - php将换行符的单引号转换为双引号

> ID：14710264
> 
> 赞同：3
> 
> 时间：2013-02-05T14:49:23.570
> 
> 标签：php, newline

我有一个来自语言文件的字符串，其中包含带有当前语言文本的字符串。

```
$str = 'blabla\n\nmore blabla'; 
```

$str 将在 \n 必须是换行符的文本区域中使用如果我将它放在双引号内，这将有效。

问题是 $str 总是用单引号引起来。我一直在谷歌搜索和搜索这个网站。有很多类似的问题，但我没有设法找到解决方案。

如何将我的单引号字符串（带有文字“\n”）转换为双引号字符串（其中“\n”转换为换行符）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T14:52:01.623

$str = str_replace('\n', "\n", $str);

# php - 将 Laravel 移出 docroot 会给我 php 的 chdir() 和 path('sys') 带来问题

> ID：14710272
> 
> 赞同：0
> 
> 时间：2013-02-05T14:49:42.010
> 
> 标签：php, path, laravel, laravel-3

我在一个实时网站上使用 Laravel 3 已经有一段时间了，并决定将应用程序移到 docroot 之外，删除 public_html 文件夹，并将 public 文件夹符号链接到 public_html 文件夹。我在这里遵循[了解决方案 1](http://forums.laravel.io/viewtopic.php?pid=10022#p10022)。

完成后，我的网站已停止加载，出现 500 错误。当我检查 public/error_log 中的错误日志时，出现以下消息：

```
[05-Feb-2013 08:07:25] PHP Warning:  chdir() [<a href='function.chdir'>function.chdir</a>]: No such file or directory (errno 2) in /home4/indieweb/indiewebseries/paths.php on line 62
[05-Feb-2013 08:07:25] PHP Fatal error:  require() [<a href='function.require'>function.require</a>]: Failed opening required '/home4/indieweb/indiewebseries/public/laravel/laravel.php' (include_path='.:/usr/lib64/php:/usr/lib/php:/usr/share/pear') in /home4/indieweb/indiewebseries/public/index.php on line 34 
```

仅供参考：

```
// paths.php on line 62:
chdir(__DIR__);

// index.php line 34:
require path('sys').'laravel.php'; 
```

有任何想法吗？

编辑：我尝试了@TheShiftExchange 的建议，将所有内容移到了 docroot 之外，并将 public 重命名为 public_html。我现在得到这些 php 错误：

```
[07-Feb-2013 05:38:25] PHP Warning:  chdir() [<a href='function.chdir'>function.chdir</a>]: No such file or directory (errno 2) in /home4/indieweb/paths.php on line 62
[07-Feb-2013 05:38:25] PHP Fatal error:  require() [<a href='function.require'>function.require</a>]: Failed opening required '/home4/indieweb/public_html/laravel/laravel.php' (include_path='.:/usr/lib64/php:/usr/lib/php:/usr/share/pear') in /home4/indieweb/public_html/index.php on line 34 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T14:07:31.537

我找到了解决方案。事实证明，我所有的问题都无关紧要。出于某种原因，我的主机帐户中的 PHP 设置被重置，我所要做的就是将 PHP 版本切换回 5.4 以修复所有问题。

# html - 一个元素上的双边框 - 纯 css - 没有包装 div

> ID：14710274
> 
> 赞同：0
> 
> 时间：2013-02-05T14:49:53.303
> 
> 标签：html, css

我正在尝试仅使用一个元素来实现以下效果，我想删除包装器 div。

[http://codepen.io/anon/pen/kdvex](http://codepen.io/anon/pen/kdvex)

通过使用嵌入的阴影和边框，我几乎达到了预期的效果。但是弯曲的边框看起来有点不对劲。看看蓝色位的边缘，看看我的意思。

[http://codepen.io/anon/pen/uLKjl](http://codepen.io/anon/pen/uLKjl)

有人可以改进吗？甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:03:44.570

我添加了一个使用伪元素后模拟边框的元素。
[http://codepen.io/anon/pen/FxemK](http://codepen.io/anon/pen/FxemK)

```
.btn.blue {
  z-index:2;
  position:relative
}

.btn.blue:after {content:"."; position: absolute; left:0; top:0; width:99.6%; height: 24px; background:none; z-index:1; border:2px solid white; 
-webkit-border-radius: 7px;
-moz-border-radius: 7px;
-ms-border-radius: 7px;
-o-border-radius: 7px;
border-radius: 7px;} 
```

第二个答案：[http ://codepen.io/anon/pen/FxemK](http://codepen.io/anon/pen/FxemK)

```
.btn.blue {
  z-index:2;
  position:relative; line-height:100%;
}  

    .btn.blue:after {content:"."; position: absolute; left:0; top:0; 
  width:99.6%; background:none; z-index:1; border:2.2px solid white; 
  line-height:133%; 
    -webkit-border-radius: 7px;
    -moz-border-radius: 7px;
    -ms-border-radius: 7px;
    -o-border-radius: 7px;
    border-radius: 7px;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:36:05.923

跟进 Cadence96 对第二个边框使用伪选择器的建议：

[http://codepen.io/anon/pen/zdcne](http://codepen.io/anon/pen/zdcne)

# coffeescript - CoffeeScript 提高效率

> ID：14710275
> 
> 赞同：3
> 
> 时间：2013-02-05T14:49:59.050
> 
> 标签：coffeescript

我有一个 CoffeeScript 代码

```
for y in [coY - limit .. coY + limit]
    for x in [coX - limit .. coX + limit] 
```

我一直在寻找如何提高代码速度的方法，并找到了它编译成的内容：

```
for (y = _i = _ref = coY - limit, _ref1 = coY + limit; _ref <= _ref1 ? _i <= _ref1 : _i >= _ref1; y = _ref <= _ref1 ? ++_i : --_i) {
  for (x = _j = _ref2 = coX - limit, _ref3 = coX + limit; _ref2 <= _ref3 ? _j <= _ref3 : _j >= _ref3; x = _ref2 <= _ref3 ? ++_j : --_j) { 
```

当我用自己的 JavaScript 替换它时

```
for(y = coY - limit; y <= coY + limit; y++) {
    for(x = coX - limit; x <= coX + limit; x++) { 
```

我已经测量出脚本明显更快（从 25 到 15 毫秒）。我可以以某种方式强制 CoffeeScript 编译成类似于我的代码吗？还是有其他解决方案？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T21:26:37.273

假设您的循环总是从较小的数字变为较大的数字，您可以使用`by 1`：

```
for y in [coY - limit .. coY + limit] by 1
    for x in [coX - limit .. coX + limit] by 1 
```

编译为：

```
for (y = _i = _ref = coY - limit, _ref1 = coY + limit; _i <= _ref1; y = _i += 1) {
  for (x = _j = _ref2 = coX - limit, _ref3 = coX + limit; _j <= _ref3; x = _j += 1) { 
```

这不是**HEAPS**更好，但可能有点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T19:16:56.300

我不知道伙计，您编辑中的代码为我编译为此：

```
// Generated by CoffeeScript 1.4.0
var x, y, _i, _j, _ref, _ref1, _ref2, _ref3;

for (y = _i = _ref = coY - limit, _ref1 = coY + limit; _i <= _ref1; y = _i += 1) {
  for (x = _j = _ref2 = coX - limit, _ref3 = coX + limit; _j <= _ref3; x = _j += 1) {
  }
} 
```

要完全按照您的要求获得它，您可能只需要实际用 JavaScript 编写它。幸运的是，CoffeeScript 具有将文字 JS 插入 CS 文件的语法。如果用反引号 (`) 包围 JS，CS 编译器会将其包含在输出中，但不会以任何方式更改反引号中的内容。

这是一个例子：

```
console.log "regular coffeescript"

#surround inline JS with backticks, like so:
`for(y = coY - limit; y <= coY + limit; y++) {
  for(x = coX - limit; x <= coX + limit; x++) {
    console.log('inline JS!');
  }
}`

console.log "continue writing regular CS after" 
```

来源：[http ://coffeescript.org/#embedded](http://coffeescript.org/#embedded)

# sharepoint - SharePoint - eChat - 是否可以在 SharePoint 中创建实时问答

> ID：14710280
> 
> 赞同：0
> 
> 时间：2013-02-05T14:50:18.170
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007

我需要在 sharepoint 中创建实时问答会话。

要求是人们发布问题并由领导回答问题。让所有人都能看到领导者的所有回应。

有没有办法在 SharePoint 中做到这一点，如果有，怎么做？

我对sharepoint开发人员的了解并不强。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:56:49.863

这取决于你的情况是什么“不强”。如果没有编码技能，您可以使用子列表功能。创建名为“问题”和“答案”的列表，并跟进教程：

[http://www.epmpartners.com.au/blog/sharepoint-list-parent-child-relationship-eg-creating-list-b-items-from-list-a/](http://www.epmpartners.com.au/blog/sharepoint-list-parent-child-relationship-e-g-creating-list-b-items-from-list-a/)

# javascript - Rangy：如何获取使用 Highlighter 模块创建的 span 元素？

> ID：14710290
> 
> 赞同：4
> 
> 时间：2013-02-05T14:50:44.053
> 
> 标签：javascript, rangy

我正在使用 Rangy 中提供的[荧光笔模块](https://code.google.com/p/rangy/wiki/HighlighterModule)，它在为所选文本创建高亮显示时效果很好。

在对 html 的更改方面，选定的文本将替换为 span 标签，例如如下所示：

```
the selected text is <span class="highlight">replaced by a span tag</span> like the 
```

我想要做的是在创建 span 元素后获取它的引用，这样我就可以用它做一些其他的事情。如何才能做到这一点？

请注意，其他地方可能有其他带或不带高亮标签的跨度，因此无法使用这些跨度找到它。

我必须为所选文本创建突出显示的代码的重要部分是：

```
var highlighter = null;
var cssApplier = null;

rangy.init();
cssApplier = rangy.createCssClassApplier("highlight", { normalize: true });
highlighter = rangy.createHighlighter(document, "TextRange");
highlighter.addClassApplier(cssApplier);

var selection = rangy.getSelection();
highlighter.highlightSelection("highlight", selection); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T19:19:08.830

我正在等待@TimDown 用工作代码更新他的答案。但是由于他没有这样做，所以我会自己发布一些（基于他的回答）。

假设选择仍然有效，以下函数将返回一个已创建的突出显示元素数组：

```
function GetAllCreatedElements(selection) {
    var nodes = selection.getRangeAt(0).getNodes(false, function (el) {
        return el.parentNode && el.parentNode.className == "highlight";
    });

    var spans = [];

    for (var i = 0; i < nodes.length; i++) {
        spans.push(nodes[i].parentNode);
    }
    return spans;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T16:03:59.567

不能保证只会`<span>`创建一个元素：如果选择跨越元素边界，则可以创建多个跨度。

无论如何，由于选择被保留，您可以使用`getNodes()`选择范围的方法来获取跨度：

```
var spans = selection.getRangeAt(0).getNodes([1], function(el) {
    return el.tagName == "SPAN" && el.className == "highlight";
}); 
```

# javascript - javascript 表单验证中的可访问性

> ID：14710292
> 
> 赞同：6
> 
> 时间：2013-02-05T14:50:44.603
> 
> 标签：javascript, ajax, forms, validation, accessibility

这是我试图解决的盲人社区的一个重要问题。我如何告诉盲人访问者用户名已被使用？

我当前的设置并不重要，但对于示例情况，我目前有一个 Jquery 实现，它根据 ajax 上的 php 脚本检查用户输入，该脚本返回一个 json，然后我将其显示在屏幕上的错误字段中。非常基本，超出了我的问题范围，因为它运行良好。

但如果我是盲人，我不会注意到用户名 Batman 已被占用或不能包含空格，而且我的密码至少需要 7 个字符。

或者，在没有 javascript 的情况下提交表单后，错误会在错误登录页面上列出——它很笨重，但可以工作。更好的更动态的解决方案和支持将是最佳的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T16:46:28.697

作为一个屏幕阅读器用户，我通常只是填写整个表单，提交它，如果它不起作用，我会查找错误文本。为了在提交整个表单之前通知盲人用户无效数据，请查看以下测试页面 d 部分中的 aria-live="assertive" 选项场景。 [http://www.accessibleculture.org/articles/2011/02/aria-alert/](http://www.accessibleculture.org/articles/2011/02/aria-alert/) 在所有测试用例中，d 部分是唯一一个在 Firefox 18.0.1 和 Jaws 13.0 下对我有用的测试。由于某种原因，警报选项不起作用。您可以使用 assertive 选项来通知用户出现问题。

# java - 在对象内导航数组，Android Java

> ID：14710293
> 
> 赞同：0
> 
> 时间：2013-02-05T14:50:53.473
> 
> 标签：java, android, json

我在下面有以下 JSON 对象，我想知道如何获取 MediaUrl 的结果。我找到了很多关于如何解析数组或对象的教程，但我找不到任何关于如何在对象内部循环数组的内容。

```
{
"d": {
    "results": [
        {
            "__metadata": {
                "uri": "https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Image?Query='Acanthurus achilles'&Adult='Strict'&ImageFilters='Size:Small+Aspect:Square'&Market='en-US'&$skip=0&$top=1",
                "type": "ImageResult"
            },
            "ID": "17866c98-31f2-4488-9512-e47785301117",
            "Title": "acanthurus achilles acanthuridae poissons chirurgiens",
            "MediaUrl": "http://www.aquariophilie62.fr/images/poissons-recifal/thumbs/Acanthurus-achilles-.jpg",
            "SourceUrl": "http://www.aquariophilie62.fr/fiches-poissons-recifaux/",
            "DisplayUrl": "www.aquariophilie62.fr/fiches-poissons-recifaux",
            "Width": "100",
            "Height": "100",
            "FileSize": "19633",
            "ContentType": "image/jpeg",
            "Thumbnail": {
                "__metadata": {
                    "type": "Bing.Thumbnail"
                },
                "MediaUrl": "http://ts2.mm.bing.net/th?id=H.4820238373750001&pid=15.1",
                "ContentType": "image/jpg",
                "Width": "100",
                "Height": "100",
                "FileSize": "2509"
            }
        },
        {
            "__metadata": {
                "uri": "https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Image?Query='Acanthurus achilles'&Adult='Strict'&ImageFilters='Size:Small+Aspect:Square'&Market='en-US'&$skip=1&$top=1",
                "type": "ImageResult"
            },
            "ID": "e2a96fba-f8b2-4212-8477-1bf36131d61c",
            "Title": "100x100px-LS-8c425bd7_47876-000676_Acanthurus_achilles.jpg",
            "MediaUrl": "http://cdn.saltwaterfish.com/8/8c/100x100px-LS-8c425bd7_47876-000676_Acanthurus_achilles.jpg",
            "SourceUrl": "http://forums.saltwaterfish.com/t/346818/humu-humu-trigger-shrimps",
            "DisplayUrl": "forums.saltwaterfish.com/t/346818/humu-humu-trigger-shrimps",
            "Width": "100",
            "Height": "100",
            "FileSize": "8185",
            "ContentType": "image/jpeg",
            "Thumbnail": {
                "__metadata": {
                    "type": "Bing.Thumbnail"
                },
                "MediaUrl": "http://ts2.mm.bing.net/th?id=H.4781768365638869&pid=15.1",
                "ContentType": "image/jpg",
                "Width": "100",
                "Height": "100",
                "FileSize": "2234"
            }
        },
        {
            "__metadata": {
                "uri": "https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Image?Query='Acanthurus achilles'&Adult='Strict'&ImageFilters='Size:Small+Aspect:Square'&Market='en-US'&$skip=2&$top=1",
                "type": "ImageResult"
            },
            "ID": "11d79168-8fd1-49d9-9d06-c54208cecf28",
            "Title": "acanthurus bahianus acanthuridae poissons chirurgiens",
            "MediaUrl": "http://www.aquariophilie62.fr/images/poissons-recifal/thumbs/Acanthurus-bahianus-.jpg",
            "SourceUrl": "http://www.aquariophilie62.fr/fiches-poissons-recifaux/",
            "DisplayUrl": "www.aquariophilie62.fr/fiches-poissons-recifaux",
            "Width": "100",
            "Height": "100",
            "FileSize": "19105",
            "ContentType": "image/jpeg",
            "Thumbnail": {
                "__metadata": {
                    "type": "Bing.Thumbnail"
                },
                "MediaUrl": "http://ts2.mm.bing.net/th?id=H.4820238373749985&pid=15.1",
                "ContentType": "image/jpg",
                "Width": "100",
                "Height": "100",
                "FileSize": "2373"
            }
        }
    ],
    "__next": "https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Image?Query='Acanthurus%20achilles'&Adult='Strict'&ImageFilters='Size:Small+Aspect:Square'&Market='en-US'&$skip=3&$top=3"
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:11:46.127

假设`obj`是解析posted String得到的一个JSONObject

“结果”是您从对象中获取的 JSONArray 的关键

```
JSONArray results = obj.getJSONObject("d").getJSONArray("results") 
```

JSONArray 为您可能遇到的每种数据类型提供了 get*(int index)。

在您的情况下，“结果”是 JSONObject 的数组。您可以使用以下方法循环遍历它：

```
for (int i = 0; i < results.length(); i++) {
    JSONObject oneResult = results.getJSONObject(i);
} 
```

一旦你有了 JSONObject，MediaUrl 就只有一个 getString("MediaUrl") 了......

# ember.js - 使用 Ember.js 为每个模型添加额外的 url 参数

> ID：14710296
> 
> 赞同：3
> 
> 时间：2013-02-05T14:50:58.383
> 
> 标签：ember.js, ember-data

我有两个模型：

```
App.Providers = DS.Model.extend({    
    name: DS.attr('string'),
    description: DS.attr('string'),
    logo: DS.attr('string'),
    products: DS.hasMany('App.Products')
});

App.Products = DS.Model.extend({    
    name: DS.attr('string'),
    description: DS.attr('string')
    provider: DS.belongsTo('App.Providers'), 
}); 
```

他们都使用同一个适配器。但是，对于 Products 模型，我想在 url 中附加一个额外的 url 参数（api 键）。如何扩展适配器（或序列化器？）来实现这一点？

所以只是给你一个例子，当我想为提供者做一个 GET 时：

```
http://example.com/ap1/v1/providers/ 
```

对于产品：

```
http://example.com/ap1/v1/products/?api_key=1234 
```

我知道我可以添加这个，`App.Products.find({api_key=1234})`但是当我这样做时会出现问题：

```
var providers = App.Providers.find(1);
providers.get('products'); 
```

编辑：我试图覆盖适配器中的 buildURL 方法，但这不是很方便，因为我只想为某些模型附加 api_key 参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T16:54:51.373

您应该创建第二个适配器来覆盖 buildURL 方法。然后为应该使用 api 密钥的任何类型注册该适配器。

```
apiAdapter = originalAdapter.extend({
  buildURL: ....
}));

Store.registerAdapter(App.Providers, apiAdatper); 
```

有关每种类型适配器的更多详细信息，请参阅此帖子：[如何使用 DS.Store.registerAdapter](https://stackoverflow.com/questions/13267434/how-to-use-ds-store-registeradapter)

# codeigniter - Codeigniter select_max 并返回其他行字段

> ID：14710311
> 
> 赞同：0
> 
> 时间：2013-02-05T14:52:04.783
> 
> 标签：codeigniter

我正在尝试选择特定项目的最高出价金额，并从找到最高出价的行中返回更多信息。

目前我有

```
 $item_id = $this->input->post('item_id');
    $this->db->from('bids');
    $this->db->where('item_id', $item_id);
    $this->db->where('outbid_alert', '1');
    $this->db->select_max('bid_amount');
    $query = $this->db->get();
    return $query->result(); 
```

这将返回该项目的最高出价，这就是我所得到的。从该行获取其余字段的最佳方法是什么？运行另一个查询或使用子查询？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:10:53.257

如果要从最高的行返回字段`bid_amount`，只需`ORDER BY bid_amount`选择第一行。

```
$item_id = $this->input->post('item_id');

$this->db->from('bids');
$this->db->where('item_id', $item_id);
$this->db->where('outbid_alert', '1');

$this->db->select('*');

$this->db->order_by('bid_amount', 'DESC');
$this->db->limit(1);

$query = $this->db->get();
return $query->result(); 
```

# .htaccess - .htaccess 从子文件夹重定向到域名

> ID：14710314
> 
> 赞同：9
> 
> 时间：2013-02-05T14:52:13.813
> 
> 标签：.htaccess, redirect, root, subdirectory

[我在子文件夹 ( http://mydomain.com/subfolder/index.php](http://mydomain.com/subfolder/index.php) )中有网站内容，现在我将所有内容复制到根文件夹 ( [http://mydomain.com/index.php](http://mydomain.com/index.php) )。

我想使用 .htaccess 将所有为旧页面添加书签的访问者重定向到新内容（至少到新的 index.php）。

这个对吗：

```
RewriteEngine on
RewriteRule /subfolder/^(.*)$ http://mydomain.com [R=301,L] 
```

?

我应该将 .htaccess 文件放在子文件夹还是根文件夹中？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-05T14:55:37.520

将以下内容`.htaccess`放入`/`（您的 index.php 所在的位置）应该可以解决问题：

```
RewriteEngine on
RewriteRule ^subfolder/(.*)$ /$1 [R=301,L] 
```

或者您可以将以下内容`.htaccess`放入`/subfolder`：

```
RewriteEngine On
RewriteRule ^(.*)$ /$1 [R=301,L] 
```

请注意，`()`周围`.*`和`$1`重定向`/subfolder/someFile.php`到`/someFile.php`. 如果您跳过它，所有内容都会`/subfolder`重定向到`/`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-04T09:20:06.327

这可以解决问题：

```
RedirectMatch 301 ^/subfolder$ http://yourdomain.tld/ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-30T09:17:31.757

*感谢评论中的[@mariusnn](https://stackoverflow.com/users/1419036/mariusnn)，我能够解决这个问题。*

* * *

❌ 不工作：.htaccess 从子文件夹重定向到域名

```
RewriteEngine on

RewriteRule ^subfolder/(.*)$ /$1 [R=301,L] 
```

✅[工作](https://stackoverflow.com/questions/14710314/htaccess-redirect-from-subfolder-to-domain-name/14710380)：.htaccess 重定向整个子域“/subdomain/”和文件“/subdomain/file_01.php”被重定向到域名“example.com”

```
RewriteEngine on

RewriteRule ^subfolder/.*$ / [R=301,L] 
```

*请注意，`()`周围`.*`和`$1`重定向`/subfolder/someFile.php`到`/someFile.php`. 如果您跳过它，所有内容都会`/subfolder`重定向到`/`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-06T06:24:54.747

尝试：

```
RewriteEngine On
RewriteRule ^subfolder/index.php$ /index.php[NC,L,R] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-31T01:55:27.173

在这里尝试了所有答案。这对我有用：

```
RewriteEngine on
RewriteBase /
RewriteRule ^subfolder/(.*)$ /$1 [R=302,NC,L] 
```

在您验证更改后更改`R=302`为。`R=301`

# c - 如果以下代码中没有“volatile”关键字，编译器可以执行哪些优化？

> ID：14710318
> 
> 赞同：5
> 
> 时间：2013-02-05T14:52:22.207
> 
> 标签：c, embedded, volatile

以下是运行 Barrelfish 操作系统时使 Pandaboard 上的 LED 闪烁的一些代码。`gpio_oe`我的问题是，如果从and的定义中删除了 'volatile' 关键字，为什么 LED 不闪烁`gpio_dataout`。

```
static volatile uint32_t *gpio_oe = (uint32_t *)(GPIO_BASE + 0x0134);
static volatile uint32_t *gpio_dataout = (uint32_t *)(GPIO_BASE + 0x013C);

void led_flash
{
    // Enable output
    *gpio_oe &= (~(1 << 8));

    // Toggle LED on and off till eternity
    while(true)
    {
      *gpio_dataout ^= (1 << 8);  // Set means LED on; Clear means LED off
       time_delay();  // To give blinking effect
    }
} 
```

我知道如果变量的值可以通过程序外部的源自发更改，则需要使用 volatile。但我在这里看不到这样的案例。编译器执行了哪些优化，使整个 while 循环闪烁 LED 变得毫无意义？这种优化背后的逻辑是什么，即。这种优化有意义的合法案例？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T14:56:28.597

您还需要`volatile`强制执行内存写入和生成的代码访问`volatile`变量的顺序。使用常规变量，编译器可能会决定写入是不必要的，要么丢弃它们，要么只保留最后一个。

**从评论中移出：**如果编译器没有看到对变量的读取，它可能什么也不写，它甚至可能删除该变量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T20:04:20.370

据编译器所知，值`*gpio_oe`和`*gpio_dataout`被***写入但从不被读取***。对于普通数据存储器，这种访问模式是完全冗余的，因此可以优化。***对于已读取但从未写入***的位置也是如此。

然而，对于*内存映射 I/O*，访问“内存”位置会产生编译器不知道的*副作用。*声明位置`volatile`告诉编译器必须完全按照代码描述的方式显式访问该位置。

与内存映射 I/O 一样，在不同线程（例如 RTOS 任务或中断处理程序）之间共享内存时也会出现类似的问题，因为该语言同样不知道这些上下文。

Embedded.com 在许多文章中涵盖了该主题：

*   [volatile关键字简介](http://www.embedded.com/electronics-blogs/beginner-s-corner/4023801/Introduction-to-the-Volatile-Keyword)- Nigel Jones
*   [准确放置挥发物](http://www.embedded.com/electronics-blogs/programming-pointers/4025609/Place-volatile-accurately)- Dan Saks
*   [结合 C 的 volatile 和 const 关键字](http://www.embedded.com/electronics-blogs/barr-code/4236917/Combining-C-s-volatile-and-const-keywords)- Michael Barr

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-05T15:36:30.837

您正在尝试直接访问硬件寄存器，因此您希望每次访问都进入内存总线，而不是像普通变量一样停留在寄存器中。Volatile 将告诉编译器强制该变量的所有使用进入或来自内存总线。您仍然有数据缓存的问题，但这是一个单独的主题。

编辑：

会发生什么是在您的无限循环中，编译器可以将该变量优化为在寄存器中，这意味着永远不会进入内存总线，这意味着永远不会更改 gpio，这意味着 LED 不会闪烁。如果您删除易失性，编译然后反汇编（或编译为asm，我发现通过反汇编二进制文件更容易阅读），这应该很容易看到。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T14:56:07.757

`volatile`阻止编译器优化对变量的读取和写入，没有它，编译器假定值永远不会改变，并且可以替换一个循环，其中通过一次调用读取标志，或者如果以后不使用变量，则删除写入，请参阅此问题：

[为什么在 C 中需要 volatile？](https://stackoverflow.com/questions/246127/why-is-volatile-needed-in-c)

# combobox - 剑道组合框在启用和禁用时出现错误

> ID：14710319
> 
> 赞同：0
> 
> 时间：2013-02-05T14:52:23.480
> 
> 标签：combobox, kendo-ui

我正在使用剑道组合框。我写了下面的代码来启用和禁用组合框

```
 function enableDisableFrameworkAndAltFrameworkVersion(platformVersion) {

        var comboBox = $("#selFrameworkVersion").data("kendoComboBox");

        if (platformVersion === 1 ) {
            comboBox.enable(false);

        }
    } 
```

但是这段代码给我的错误是“Uncaught TypeError: Cannot call method 'enable' of undefined”

请帮忙。提前致谢。

[现在我在禁用剑道组合](http://rniemeyer.github.com/knockout-kendo/web/ComboBox.html)下面的这个链接上遵循了一个例子

所以现在我更改了我的 html 中的代码并将启用的参数添加到剑道组合框，如下所示

```
<input  id="selFrameworkVersion" data-bind="kendoComboBox: { dataTextField: 'Name', dataValueField: 'Id', data:  $root.versionListByProductType, value:  $root.editFrameworkVersion, enabled: enableFrameWorkCombo} /> 
```

在我的视图模型中，我声明了一个可观察对象，如下所示

```
self.enableFrameWorkCombo = ko.observable(true); 
```

然后改变我的功能如下

```
function enableDisableFrameworkAndAltFrameworkVersion(platformVersion) {

    var comboBox = $("#selFrameworkVersion").data("kendoComboBox");

    if (platformVersion === 1 ) {
        $('#multiAltVersion').attr("disabled", true);
        //comboBox.enable(false);
        self.enableFrameWorkCombo(false);
        return;
    }
    else if (platformVersion === 2 || platformVersion === 3) {
        //comboBox.enable(true);
        self.enableFrameWorkCombo(true);
        $('#multiAltVersion').attr("disabled", true);
    }
    else {
        //comboBox.enable(true);
        self.enableFrameWorkCombo(true);
        $('#multiAltVersion').attr("disabled", false);
    }
} 
```

现在它给了我错误

```
Uncaught Error: Unable to parse bindings.
Message: ReferenceError: enableFrameWorkCombo is not defined;
Bindings value: kendoComboBox: { dataTextField: 'Name', dataValueField: 'Id', data: $root.versionListByProductType, value:  $root.editFrameworkVersion, enabled: enableFrameWorkCombo, optionsCaption: 'Please select Version...' } 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T23:17:05.580

执行时显示的事实`"Uncaught TypeError: Cannot call method 'enable' of undefined "`：

```
function enableDisableFrameworkAndAltFrameworkVersion(platformVersion) {
    var comboBox = $("#selFrameworkVersion").data("kendoComboBox");
    if (platformVersion === 1 ) {
        comboBox.enable(false);
    }
} 
```

意思`comboBox`是`undefined`。由于它是计算的结果，`$("#selFrameworkVersion").data("kendoComboBox")`意味着有一个带有 id 的 HTML 元素，`selFrameworkVersion`但它不是`kendoComboBox`.

请检查当您调用此函数时，`kendoComboBox`是否已实际初始化。

**编辑：**

以下示例（在[http://jsfiddle.net/OnaBai/qtaAS/](http://jsfiddle.net/OnaBai/qtaAS/)上运行）使用上述功能启用/禁用 ComboBox...

```
function enableDisableFrameworkAndAltFrameworkVersion(platformVersion) {
        var comboBox = $("#selFrameworkVersion").data("kendoComboBox");
        console.log("combobox", comboBox);
        if (platformVersion === 1) {
            comboBox.enable(false);
        } else {
            comboBox.enable(true);
        }
    }

    var viewModel = kendo.observable({
        data                : [
            { "Id": 1, "Name": "node1" },
            { "Id": 2, "Name": "node2" },
            { "Id": 3, "Name": "node3" },
            { "Id": 4, "Name": "node4" },
            { "Id": 5, "Name": "node5" }
        ],
        enableFrameWorkCombo: function () {
            alert("hello");
        }
    });

    $("#disable").on("click", function () {
        enableDisableFrameworkAndAltFrameworkVersion(1);
    });
    $("#enable").on("click", function () {
        enableDisableFrameworkAndAltFrameworkVersion(2);
    });

    kendo.bind($("#selFrameworkVersion"), viewModel); 
```

HTML是：

```
<div><a href="#" id="disable" class="k-button">Disable</a></div>
<div><a href="#" id="enable" class="k-button">Enable</a></div>

<input id="selFrameworkVersion"
       data-role="combobox"
       data-text-field="Name"
       data-value-field="Id"
       value="2"
       data-bind="source : data, enabled: enableFrameWorkCombo"/> 
```

# css - 文本叠加 - 显示在错误的位置

> ID：14710320
> 
> 赞同：0
> 
> 时间：2013-02-05T14:52:28.727
> 
> 标签：css, google-maps, google-maps-markers

我已经实施了这个[问题](https://stackoverflow.com/questions/3953922/is-it-possible-to-write-custom-text-on-google-maps-api-v3)的公认答案。当我运行 html 文件时，我在 Google 地图标记上书写的文本显示在错误的位置（请参阅图片 error.png）。谁能帮我在标记上准确显示文本？

![在此处输入图像描述](../Images/f7bd1174863760b1f1e2d08a25fcd90f.png)

![在此处输入图像描述](../Images/879677dd275f52ae494310218324ca90.png)

标记.html

```
 <html><head>
<title> Hi </title>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">

            function TxtOverlay(pos, txt, cls, map){

                this.pos = pos;
                this.txt_ = txt;
                this.cls_ = cls;
                this.map_ = map;
                this.div_ = null;
                this.setMap(map);
            }

            TxtOverlay.prototype = new google.maps.OverlayView();
            TxtOverlay.prototype.onAdd = function(){
                var div = document.createElement('DIV');
                div.className = this.cls_;
                div.innerHTML = this.txt_;                
                var overlayProjection = this.getProjection();
                var position = overlayProjection.fromLatLngToDivPixel(this.pos);
                div.style.left = ( position.x) + 'px';
                div.style.top = ( position.y)+ 'px';                
                var panes = this.getPanes();
                panes.floatPane.appendChild(div);
            }
            TxtOverlay.prototype.draw = function(){
                var overlayProjection = this.getProjection();
                var position = overlayProjection.fromLatLngToDivPixel(this.pos);
                var div = this.div_;
                div.style.left = ( position.x) + 'px';
                div.style.top = ( position.y)+ 'px';
            }

            TxtOverlay.prototype.onRemove = function(){
                this.div_.parentNode.removeChild(this.div_);
                this.div_ = null;
            }
            TxtOverlay.prototype.hide = function(){
                if (this.div_) {
                    this.div_.style.visibility = "hidden";
                }
            }
            TxtOverlay.prototype.show = function(){
                if (this.div_) {
                    this.div_.style.visibility = "visible";
                }
            }
            TxtOverlay.prototype.toggle = function(){
                if (this.div_) {
                    if (this.div_.style.visibility == "hidden") {
                        this.show();
                    }
                    else {
                        this.hide();
                    }
                }
            }

            TxtOverlay.prototype.toggleDOM = function(){
                if (this.getMap()) {
                    this.setMap(null);
                }
                else {
                    this.setMap(this.map_);
                }
            }

            var map;
            function init(){
                var latlng = new google.maps.LatLng(37.90695894, -122.07920128);
                var myOptions = {
                    zoom: 4,
                    center: latlng,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };
                map = new google.maps.Map(document.getElementById("map"), myOptions);
                var marker = new google.maps.Marker({
                    position: latlng,
                    map: map,
                    title: "Hello World!",
                    icon:"./bluepin.PNG"
                });
                customTxt = "<div>1</div>"
                txt = new TxtOverlay(latlng,customTxt,"customBox",map )
            }
        </script>
        <style>
            .customBox {                                
                background: AARRGGBB;
                border: 1px;
                color:#ffffff;
                position: relative;
            }
        </style>
    </head>
    <body onload="init()">
        <div id="map" style="width: 600px; height: 600px;">
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:21:33.940

您需要偏移 div 以便它出现在标记上。(-5, -30) 的偏移量适用于此标记和数字“1”。

```
 function TxtOverlay(pos, txt, cls, map, offset){

            this.pos = pos;
            this.txt_ = txt;
            this.cls_ = cls;
            this.map_ = map;
            this.offset_ = offset;
            this.div_ = null;
            this.setMap(map);
        }

        TxtOverlay.prototype.onAdd = function(){
            var div = document.createElement('DIV');
            div.className = this.cls_;
            div.innerHTML = this.txt_;                
            this.div_ = div;
            var overlayProjection = this.getProjection();
            var position = overlayProjection.fromLatLngToDivPixel(this.pos);
            div.style.left = ( position.x + this.offset_.x) + 'px';
            div.style.top = ( position.y + this.offset_.y)+ 'px';                
            var panes = this.getPanes();
            panes.floatPane.appendChild(div);
        }
        TxtOverlay.prototype.draw = function(){
            var overlayProjection = this.getProjection();
            var position = overlayProjection.fromLatLngToDivPixel(this.pos);
            var div = this.div_;
            div.style.left = ( position.x + this.offset_.x) + 'px';
            div.style.top = ( position.y + this.offset_.y)+ 'px';                
        }

        txt = new TxtOverlay(latlng,customTxt,"customBox",map,new google.maps.Point(-5,-30) ) 
```

[例子](http://www.geocodezip.com/v3_simpleMap_SOlabelledMarker2a.html)

您还可以查看[MarkerWithLabel 实用程序库](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerwithlabel/docs/reference.html)

[例子](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerwithlabel/examples/lettered.html)

# ruby-on-rails - Rails：访问模型层中的嵌套参数

> ID：14710321
> 
> 赞同：0
> 
> 时间：2013-02-05T14:52:30.297
> 
> 标签：ruby-on-rails, model, callback, params

我有一个接受嵌套参数的模型：

```
class Publication < ActiveRecord::Base
  attr_accessible :authors_attributes, :title

  has_many :authors
  accepts_nested_attributes_for :authors
end 
```

在`before_create`回调中，我想检查是否存在具有相同标题和作者的另一个出版物。回调看起来像这样：

```
def find_duplicate
  Publication.where(self.instance_values["attributes"].except("id", "created_at",
    "updated_at")).each do |publication|
      if publication.author_names.sort == @authors
        return publication
      end
  end
end 
```

问题是，我不知道如何获得`@authors`. 我假设我可以以与 类似的方式检索参数`self.instance_values["author_attributes"]`，但结果为零。我还能如何访问参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T19:14:15.327

You should have 'authors' as an accessor that's built with the has_many. So, instead of @authors, you would simply use 'authors' or 'self.authors' to get the (non persisted) author objects that are about to be created. Try something like:

```
Publication.where(self.instance_values["attributes"].except("id", "created_at",
    "updated_at")).each do |publication|
      if publication.authors.collect{|a| a.name}.sort == self.authors.collect{|a| a.name}.sort
        return publication
      end
  end 
```

There are likely better more efficient ways to compare author names here, but this is the clearest way to explain and keep with your paradigm.

# c++ - 捕获构造函数异常的 RAII 方法

> ID：14710322
> 
> 赞同：9
> 
> 时间：2013-02-05T14:52:32.210
> 
> 标签：c++, exception, constructor, raii

我有一个可以在其构造函数中引发异常的类。如何在 try/catch 块中声明该类的实例，同时仍使其在正确的范围内可用？

```
try { MyClass lMyObject; }
catch (const std::exception& e) { /* Handle constructor exception */ }

lMyObject.DoSomething(); // lMyObject not in scope! 
```

[在尊重RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)习语的同时，是否有其他方法可以做到这一点？

我不希望使用`init()`两阶段施工的方法。我唯一能想到的另一件事是：

```
MyClass* lMyObject;

try { lMyObject = new MyClass(); }
catch (const std::exception& e) { /* Handle constructor exception */ }

std::shared_ptr<MyClass> lMyObjectPtr(lMyObject);
lMyObjectPtr->DoSomething(); 
```

工作正常，但我对范围和指针间接中的原始指针不满意。这只是另一个 C++ 疣吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T15:02:02.743

如果构造函数抛出，则意味着对象无法初始化，因此无法开始存在。

```
MyClass* lMyObject;
try { lMyObject = new MyClass(); }
catch (std::exception e) { /* Handle constructor exception */ } 
```

在上面如果构造函数抛出异常，`lMyObject`则保持未初始化，换句话说，指针包含一个不确定的值。

有关详细说明，请参阅经典的[构造函数失败：](http://www.gotw.ca/gotw/066.htm)

> 我们可以将 C++ 构造函数模型总结如下：
> 
> 任何一个：
> 
> (a) 构造函数通过到达其结束或返回语句正常返回，并且对象存在。
> 
> 或者：
> 
> (b) 构造函数通过发出异常退出，对象不仅现在不存在，而且从未存在过。
> 
> 没有其他可能性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T15:43:02.230

编写代码的最佳方法是：-

```
MyClass lMyObject; 
lMyObject.DoSomething(); 
```

没有尝试、捕获或指针。

如果构造函数抛出，则 DoSomething 不能被调用。这是正确的：如果构造函数抛出，那么对象永远不会被构造。

而且，重要的是，不要捕获（甚至捕获/重新抛出）异常，除非您对它们有建设性的意义。让异常发挥它们的作用，直到知道如何处理它们的东西可以发挥作用为止。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T15:34:09.547

Constructors are for putting an object into a consistent state and establishing class invariants. Allowing an exception to escape a constructor means that something in that constructor has failed to complete, so now the object is in some unknown weird state (which may include resource leaks now too). Since the object's constructor has not completed, the compiler will not cause it's destructor to be invoked either. Perhaps what you're looking for is to catch the exception inside the constructor. Assuming it's not rethrown, this would cause the constructor to complete execution, and the object is now fully-formed.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T15:07:09.380

你不需要使用`shared_ptr`，使用`unique_ptr`：

```
std::unique_ptr<MyClass> pMyObject;
try { pMyObject.reset(new MyClass()); }
catch (std::exception &e) { /* Handle constructor exception */ throw; }
MyClass &lMyObject = *pMyObject;

lMyObject.DoSomething(); 
```

显然，您有责任确保程序在`catch`没有初始化`pMyObject`或退出函数（例如 via`return`或`throw`）的情况下不会通过该块。

如果可用，您可以使用 Boost.Optional 来避免使用堆内存：

```
boost::optional<MyClass> oMyObject;
try { oMyObject.reset(MyClass()); }
catch (std::exception &e) { /* Handle constructor exception */ throw; }
MyClass &lMyObject = *oMyObject;

lMyObject.DoSomething(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-05T15:23:20.693

您可以设置 MyClass 的复制构造函数来接受垃圾输入，从而有效地使用您的对象声明声明一个指针。然后您可以在 try 块中[手动调用](https://stackoverflow.com/a/2494478/415551)默认构造函数：

```
MyClass lMyObject(null); // calls copy constructor
try {
    new (lMyObject) MyClass(); // calls normal constructor
}
catch (const std::exception& e) { /* Handle constructor exception */ }

lMyObject.DoSomething(); 
```

# seo - Robots.txt 中的多个用户代理

> ID：14710324
> 
> 赞同：8
> 
> 时间：2013-02-05T14:52:44.017
> 
> 标签：seo, robots.txt

在 robots.txt 文件中，我有以下部分

```
User-Agent: Bot1
Disallow: /A

User-Agent: Bot2
Disallow: /B

User-Agent: *
Disallow: /C 
```

声明`Disallow:c`对 Bot1 和 Bot2 可见吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T18:37:51.007

**tl;dr：**不，Bot1 和 Bot2 会愉快地爬行以`C`.

每个机器人最多只遵守[一条记录（块）](https://stackoverflow.com/a/24661543/1591669)。

### 原始规格

在[原始规范](http://www.robotstxt.org/orig.html)中它说：

> 如果值为“*”，则该记录描述了未匹配任何其他记录的任何机器人的默认访问策略。

### 已过期的 RFC 草案

最初的规范，包括一些补充（如`Allow`）成为 RFC 的草案，但从未被接受/发布。在[3.2.1 的 User-agent 行](http://www.robotstxt.org/norobots-rfc.txt)中它说：

> 机器人必须遵守 /robots.txt 中包含 User-Agent 行的第一条记录，该行的值包含机器人的名称标记作为子字符串。名称比较不区分大小写。如果不存在这样的记录，它应该服从带有“*”值的用户代理行的第一条记录，如果存在的话。如果没有记录满足任一条件，或者根本不存在任何记录，则访问是无限制的。

所以它证实了原始规范的解释。

### 实现

例如，谷歌[给出了一个](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449)似乎遵循规范的例子：

> robots.txt 文件中的每个部分都是独立的，并不建立在前面的部分之上。例如：
> 
> ```
> User-agent: *
> Disallow: /folder1/
> 
> User-Agent: Googlebot
> Disallow: /folder2/ 
> ```
> 
> 在此示例中，只有与 Googlebot 匹配的 URL`/folder2/`是不允许的。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-06T10:36:13.897

如果机器人遵守 robots.txt 文件，是的，该语句将可见，因此它们将无法抓取 /c。

用户代理后的通配符 (*) 表示所有用户代理。

但是请记住，并非所有机器人都遵守 robots.txt

# c# - 如何通过 C# 打印动态创建的 HTML？

> ID：14710327
> 
> 赞同：-1
> 
> 时间：2013-02-05T14:52:48.607
> 
> 标签：c#, asp.net, webforms

我在表单上生成了 HTML。如果单击一个按钮，则会生成 HTML，并且当前放置在一个 ASP 文本框中，其中只有文本

```
<!doctype html><html>....</html> 
```

我想自动打印这个 HTML（包括仅用于生成的正文的样式）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:36:36.657

要打印您的代码，您需要做几件事

1.  告诉浏览器要打印什么，[这里有一些想法](https://stackoverflow.com/questions/468881/print-div-id-printarea-div-only)，或者创建一个只包含要打印的东西的新窗口。
2.  找到一种显示纯代码的方法，例如使用`<pre>`标签或提到的 CodeMirror
3.  启动打印对话框，一个简单的 javascript 基本上类似于`window.print()`

不会有*自动*打印（除非你用一些黑魔法来瞄准 IE），因为在网络上允许这样做是很疯狂的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:12:26.120

我希望我能正确理解你的问题。[CodeMirror](http://codemirror.net/)是您可能想尝试的。它用颜色显示和格式化 HTML 文本。

[http://codemirror.net/mode/htmlmixed/index.html](http://codemirror.net/mode/htmlmixed/index.html)

![在此处输入图像描述](../Images/65258767abf5811aeb872244cb7cfaef.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T16:57:17.100

您需要使用 Javascript 触发打印请求，但您可以使用 C# 将其设置为关闭（查看[ClientScriptManager](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.aspx)的用法）。

该`window.print()`功能是您所需要的。

您可能想要限制您打印[的内容，请查看此 SO 帖子](https://stackoverflow.com/questions/1071962/how-to-print-part-of-rendered-html-page-in-javascript)以获取想法。

# java - 使用迭代器时如何确定最后一个元素？

> ID：14710329
> 
> 赞同：7
> 
> 时间：2013-02-05T14:53:00.687
> 
> 标签：java, iterator

我喜欢使用带有迭代器原理的 for 循环，比如

```
for(String s : collectionWithStrings)
    System.out.println(s + ", "); 
```

问题：如何确定当前元素是否是最后一个？

使用这样的自己的索引`int = 0; i < collection.size(); i++`是可能的`i == collection.size() - 1`，但不是很好。对于上面的示例，是否也可以使用迭代器确定最后一个元素？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T14:55:21.793

实际上，该[`Iterator#hasNext`](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html#hasNext%28%29)方法返回一个布尔值，确定迭代器是否将使用该`next`方法返回另一个元素。

您的迭代可以这样放置：

```
Iterator<String> iterator = collectionWithString.iterator();
while(iterator.hasNext()) {
    String current = iterator.next();
    // if you invoke iterator.hasNext() again you can know if there is a next element
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T14:55:29.953

只需使用[`hasNext`](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html#hasNext%28%29)方法。

```
if(!iterator.hasNext()) {
    // this is the last element
} 
```

通常，我们使用`Iterator`如下迭代：

```
while(iterator.hasNext()) {
    Object obj = iterator.next();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T14:55:26.287

在不维护自己的计数器的情况下，使用[增强的 for 循环是不可能的。](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)老实说，这是我选择使用哪种类型的 for 循环时的一个决定性因素。

使用 an 时`Iterator`，可以访问在[`hasNext()`](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html#hasNext%28%29)处理最后一个元素时将返回 false 的方法。

# sql-server - 共享文件夹的 OPENROWSET BULK 权限

> ID：14710332
> 
> 赞同：2
> 
> 时间：2013-02-05T14:53:04.443
> 
> 标签：sql-server, sql-server-2008, sql-server-2008-r2, bulk-load, network-security

## 客观的

使用 OPENROWSET 功能在针对文本文件的查询中加入数据。

## 错误

利用@gbn 在[这个问题](https://stackoverflow.com/questions/4562911/using-input-from-a-text-file-for-where-clause)上的答案，我试图像 OP 一样打开一个行集；虽然文件的格式有点不同。但是，我在尝试访问共享文件夹时遇到以下错误：

> 消息 4861，第 16 层，状态 1，第 1 行
> 
> 无法批量加载，因为无法打开文件“\MACHINENAME\Share\EC04.txt”。操作系统错误代码 5（拒绝访问。）。

## 背景

请理解，我**没有**也**将无法**访问 SQL 服务器，因此我**无法**在其中放置文件。

该文件位于 Windows 7 x64 机器上。

该文件夹已与`Read/Write`共享`Everyone`。

## 问题

有人可以帮助我了解我需要提供哪些其他安全性以允许 SQL 服务器访问此文件夹？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T15:03:06.697

*如果*您以 SQL 登录名登录，那么您必须为此登录[创建一个凭据，并且此凭据必须具有足够的权限来读取共享。](http://msdn.microsoft.com/en-us/library/ms190703.aspx)

*如果*您以 Windows 登录名登录，则必须为 SQL Server 服务帐户启用 Kerberos 约束委派。

现在，您似乎正在使用 Windows 登录，并且由于模拟上下文无法通过“双跳”，身份验证解析为 ANONYMOUS LOGON，它不是每个人的成员，因此访问被拒绝。这一切正是预期的行为。请咨询您的网络管理员，了解如何为针对您所需共享的 SQL Server 服务帐户设置约束委派。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-24T14:24:44.407

我遇到了同样的问题，这是由使用 SQL DNS-Alias 引起的。使用 Servername\Instance 它工作，使用 ServerAlias\Instance 我得到`Operating system error code 5(Access is denied.).`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-18T13:02:43.263

SQL Server 2017 需要这些步骤才能`OPENROWSET ('Microsoft.ACE.OLEDB.16.0','Excel 12.0;..)`使用共享文件夹（UNC 文件共享）：

1.  安装[Microsoft Access 数据库引擎 2016 Redistributable](https://www.microsoft.com/en-us/download/details.aspx?id=54920)
2.  [在 Active Directory 中配置服务主体名称 (SPN)](https://www.alexandreviot.net/2014/09/30/sql-server-could-not-register-the-service-principal-name-spn/)（因为我们使用 Kerberos 身份验证）：
    1.  配置`Computer object`安全权限（数据库服务器的）
    2.  配置`Service account`安全权限（运行 SQL-server 进程的用户）
    3.  检查 SQL Server 日志中的消息，如：SQL Server 网络接口库已成功注册 SQL Server 服务的服务主体名称 (SPN) [MSSQLSvc/SRV-DB-01.domain.local:58089]。
3.  允许[`Ad Hoc Distributed Queries`](https://stackoverflow.com/a/14544245/4049371)

> `EXEC sp_configure 'show advanced options', 1 RECONFIGURE GO EXEC sp_configure 'ad hoc distributed queries', 1 RECONFIGURE GO`

4.  [`AllowInProcess`](https://www.sqlservercentral.com/articles/setting-up-linked-servers-with-an-out-of-process-oledb-provider)使用和配置驱动程序“Microsoft.ACE.OLEDB.16”`DynamicParameters`

> `USE [master] GO EXEC master.dbo.sp_MSset_oledb_prop N'Microsoft.ACE.OLEDB.16.0', N'AllowInProcess', 1 GO EXEC master.dbo.sp_MSset_oledb_prop N'Microsoft.ACE.OLEDB.16.0', N'DynamicParameters', 1 GO`

5.  因为我们启用`AllowInProcess`了 ，所以服务帐户**和**实际用户必须对 Temp-Folder 具有修改权限`C:\Users\service-account\AppData\Local\Temp`。否则，您可能会收到*提供商报告的意外灾难性故障*。
6.  确保您对 UNC 共享本身具有适当的权限。
7.  重新启动服务器以确保应用了 AD 和临时文件夹权限的所有更改！
8.  使用实际的 Database-Server-Name 进行连接。不要使用 SQL 别名。

# php - 将用户活动保存到文本文件

> ID：14710337
> 
> 赞同：0
> 
> 时间：2013-02-05T14:53:13.203
> 
> 标签：php

在 PHP 中，我想将消息保存到文本文件并使用 php 读取日志文件。

这是我到目前为止所拥有的：

```
function LogUserActivity($LogFile, $Activity){
    $UserIp = $_SERVER['REMOTE_ADDR'];
    $TimeRef = date('d-m-Y H:i T');

    $Handle = fopen($LogFile, 'a');
    $Data = $UserIp.'|'.$TimeRef.'|'.$Activity.'~';
    fwrite($Handle, $Data);
    fclose($Handle);
}

function ReadUserActivity($LogFile){
    global $log;
    $LogFile = file_get_contents($LogFile);
    $ExplodedLogFile = explode("~", $LogFile);
    $ArrayNum = count($ExplodedLogFile);

    $i = 0;
    while ( $i <= $ArrayNum ){
        $log[$i] = explode("|", $ExplodedLogFile[$i]);
        $i++;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:07:43.583

我建议使用 mySQL 数据库：

[http://www.thesitewizard.com/faqs/what-is-mysql-database.shtml](http://www.thesitewizard.com/faqs/what-is-mysql-database.shtml)

但是，如果您坚持使用它，这里有一些注释可以帮助您理解..

```
<?php
//create file ($LogFile -> filename, $Activity -> type of activity)
function LogUserActivity($LogFile, $Activity){
    //get user's ip
    $UserIp = $_SERVER['REMOTE_ADDR'];
    //get time
    $TimeRef = date('d-m-Y H:i T');
    //create file
    $Handle = fopen($LogFile, 'a');
    //file contents
    $Data = $UserIp.'|'.$TimeRef.'|'.$Activity.'~';
    //write data to file
    fwrite($Handle, $Data);
    //close file
    fclose($Handle);
}

//read data from file ($LogFile -> filename)
function ReadUserActivity($LogFile){
    //variable for storing data on file
    global $log;
    //function to get log file's data
    $LogFile = file_get_contents($LogFile);
    //separate each entry and put it in an array
    $ExplodedLogFile = explode("~", $LogFile);
    //determine number of logs
    $ArrayNum = count($ExplodedLogFile);
    //incrementable variable
    $i = 0;
    //loop to search through logs
    while ( $i <= $ArrayNum ){
        //separate each log into the three parts it has and put them in an array inside the main array
        $log[$i] = explode("|", $ExplodedLogFile[$i]);
        //incrememnt i
        $i++;
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:03:04.827

在每个脚本的开头调用`LogUserActivity`，将您要写入的文件和一些消息传递给您自己。例如：

```
<?php
include('the-file-where-you-put-these-functions.php');
LogUserActivity('/tmp/example.log', 'Porkchop sandwitches!');
// the rest of your script
?> 
```

调用脚本中的另一个函数来检查日志。它将设置 $log 变量，然后您可以根据需要打印出来。

**或者只使用这个单一的衬垫：**

```
<?php
file_put_contents("/tmp/stuff.txt", "penguins", FILE_APPEND); 
?> 
```

# javascript - 垂直网格/表格布局Javascript

> ID：14710340
> 
> 赞同：0
> 
> 时间：2013-02-05T14:53:18.447
> 
> 标签：javascript, jquery, asp.net-mvc-3

我需要垂直而不是水平显示一些 JSON 数据：

列 1：值 1

列 2：值 2

等等。

这些值来自数据库，我需要能够滚动浏览从数据库返回的记录。

这是针对使用 C# 的 MVC3 应用程序，我愿意接受任何可能的解决方案。

更新：

虽然下面的内容并不完全是我所需要的，但它让我走上了使用数据透视表的正确道路，这是我以前没有想到的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:15:14.733

如果你想使用 linq，你可以这样转换：

```
var pivotTable = from m in db.table
                 select new
                 {
                     Column1 = (from t1 in m
                               where t1.Field == "column1"
                               select t1.Value,

                     Column2 = (from t2 in m
                               where t2.Field == "column2"
                               select t2.Value
                 };

Json(pivotTable, JsonRequestBehavior.AllowGet) 
```

第一眼：

```
-----------------
  Field | Value |
-----------------
column1 |    14 |
column2 |    34 |
column1 |    14 |
column2 |    36 |
column1 |    18 |
column2 |    34 | 
```

linq查询后

```
Column1 | Column2 |
-------------------
     14 |      34 |
     14 |      36 |
     18 |      34 | 
```

# c++ - 如何在类中声明此函数

> ID：14710345
> 
> 赞同：0
> 
> 时间：2013-02-05T14:53:35.197
> 
> 标签：c++

我试图在下面的这个函数中添加到我的班级

```
vector<string> &split(const string &s, char delim, vector<string> &elems) {

    stringstream ss(s);

    string item;

    while(getline(ss, item, delim)) {

        elems.push_back(item);

    }

    return elems;

}

vector<string> split(const string &s, char delim) {

    vector<string> elems;

    return split(s, delim, elems);

} 
```

下面是我的类文件

```
#ifndef LOGIN_H  
#define LOGIN_H

#include <string>
#include <fstream>
#include <sstream>
#include <vector>
#include <iostream>

using namespace std;

    class Login
    {

    private:
    ifstream infile;
    string sLine,username,password;
    stringstream ss;
    int counter,logCounter;
    bool verify,end;

    public:
    Login();
    Login(string,string);
    bool loginValidate(string,string);
    };

    Login::Login()
    {

    }

    Login::Login(string user,string pass)
    {
    username=user;
    password=pass;
    }

    bool Login::loginValidate(string user,string pass)
    {
    bool result,verify;
    result=false;

    /* Begin Read account File */
    infile.open("account.txt");

    if(infile.is_open())
    {
    while (infile.good())
    {
    getline(infile, sLine);

    if(sLine!="")
    {
    //do vector split
    vector<string> x = split(sLine,':');

    x.clear();

    }//end if sLine

    }//end while loop
    }//end if

    infile.close();

    return result;

    }//end function loginValidate

    #endif 
```

我正在尝试在登录的 loginValidate 函数中使用 split 函数 - 登录类，但我尝试在上面的登录验证中声明它，我收到一些错误，例如

```
 user1@ubuntu:~/yes222/New folder$ g++ test.cpp login.cpp -o main
    /tmp/ccv6uiN1.o: In function `split(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, char, std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >&)':
    login.cpp:(.text+0x0): multiple definition of `split(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, char, std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >&)'
    /tmp/ccCcz7T2.o:test.cpp:(.text+0x0): first defined here
    /tmp/ccv6uiN1.o: In function `split(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, char)':
    login.cpp:(.text+0xe9): multiple definition of `split(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, char)'
    /tmp/ccCcz7T2.o:test.cpp:(.text+0xe9): first defined here
    collect2: ld returned 1 exit status
    user1@ubuntu:~/yes222/New folder$ g++ test.cpp login.cpp -o main
    login.cpp: In member function ‘bool Login::loginValidate(std::string, std::string)’: 
```

**谁能指导我。谢谢！**

以前我只是在一个主类中使用所有函数，但现在我试图将登录部分拆分到另一个类，因此我在那个类中使用这个函数时遇到了问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:52:36.040

**登录.h**

```
#ifndef __LOGIN__
#define __LOGIN__

#include <fstream>
#include <sstream>
#include <iostream>
#include <vector>
#include <string>

class Login
{

    private:
        std::ifstream       infile;
        std::string         sLine,username,password;
        std::stringstream   ss;
        int                 counter,logCounter;
        bool                verify,end;

    public:
                                    Login(void);
                                    Login(std::string, std::string);
        bool                        loginValidate(std::string, std::string);
        std::vector<std::string>    split(const std::string& s, char delim);
        std::vector<std::string>&   split(const std::string& s, char delim, std::vector<std::string>& elems);
};

#endif 
```

**登录.cpp**

```
#include <login.h>

Login::Login(void)
{

}

Login::Login(std::string user, std::string pass)
{
    username = user;
    password = pass;
}

bool
Login::loginValidate(std::string user, std::string pass)
{
    bool    result,verify;

    result = false;
    infile.open("account.txt");
    if (infile.is_open())
    {
        while (infile.good())
        {
            getline(infile, sLine);
            if (sLine != "")
            {
                std::vector<std::string> x = split(sLine,':');
                x.clear();
            }
        }
    }
    infile.close();
    return result;

}

std::vector<std::string>&
Login::split(const std::string& s, char delim, std::vector<std::string>& elems)
{
    std::stringstream   ss(s);
    std::string         item;

    while (getline(ss, item, delim))
        elems.push_back(item);
    return elems;
}

std::vector<std::string>
Login::split(const std::string& s, char delim)
{
    std::vector<std::string>    elems;

    return split(s, delim, elems);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T14:58:56.080

发生这种情况是因为您在标头中定义了此函数，而不是在源代码中。将函数定义移至内联`cpp` **或**将其标记为内联

# asp.net - 将 ASP.NET 应用程序拆分为两个应用程序 - 处理共享页面/用户控件/脚本

> ID：14710346
> 
> 赞同：5
> 
> 时间：2013-02-05T14:53:44.180
> 
> 标签：asp.net, svn, split, linked-list

我有一个大型 ASP.NET 应用程序（旧版），它实际上（功能上）由两个门户组成。所以我需要将它分成两个独立的应用程序，以简化每个应用程序的开发。

当然，两者之间有共同的特点。其中一些位于 DAL 和 BL 中，这不是问题 - 所有这些代码都是独立的项目，它们组成了两个应用程序中要引用的程序集。

但问题在于一些页面、大量用户控件、一些 css 和 javascript 文件，它们在两个“门户”（应用程序）之间共享。

我想就如何处理它们征求一些建议。我主要关心的是避免重复，所以理想情况下它们应该放在一个地方，并被两个应用程序使用。

首先，我尝试将文件从一个项目添加到另一个作为链接文件。虽然这适用于代码文件（它们被内置到它们链接到的项目中），但它不适用于 aspx / ascx 或 css / javascript / images。如果我首先发布（如果标记为内容，它们会在发布期间被复制），但我不能在开发期间一直这样做，并且在从源代码调试/运行应用程序时找不到此类文件（sincve，显然，当人们正在寻找其中任何一个时，链接文件实际上在应用程序文件树中并不可用。

另一个想法是创建预构建事件，并从一个公共位置复制所有共享文件。例如，我创建了一个 Common 项目，并将所有在应用程序之间共享、按文件夹组织的文件以及在预构建时我执行一个`xcopy`.

另一个想法是让所有共享文件成为我`svn:external`在两个项目中引用的 SVN 存储库的一部分。

不过都看我的小麻烦。有没有人有类似的情况？你是怎么处理的？

对我的任何建议有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:26:35.323

您至少有两个选择：

*   通过虚拟目录共享：[https ://stackoverflow.com/a/13724316/1236044](https://stackoverflow.com/a/13724316/1236044)
*   创建用户控件库：[https ://stackoverflow.com/a/640526/1236044](https://stackoverflow.com/a/640526/1236044)

对于 css、js、图像等资源，虚拟目录方法似乎很简单。我也倾向于喜欢它来共享用户控件。

库方法应该需要更多的工作，但从长远来看将确保控件的更好的可重用性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-10T22:03:45.847

本周我遇到了一个相同的问题，css 和 javascript 文件在三个遗留项目中重复了三次。

我从两个项目中删除了文件，并将它们替换为第一个项目的链接文件，但是当我运行网站时，我在属于这两个项目的页面中缺少 css 和 javascript 文件的 404 错误。

因此，我只是将 nuget 包[“MSBuild.WebApplication.CopyContentLinkedFiles”](https://www.nuget.org/packages/MSBuild.WebApplication.CopyContentLinkedFiles/)添加到我的解决方案中，一切正常 - 这两个项目的 css 和 javascript 文件部署得很好，我的 404 错误消失了。

我没有任何共享的 .aspx / .ascx 文件，但我想它也适用于他们。

另请参阅此[问题/答案](https://stackoverflow.com/questions/4166975/add-as-link-for-javascript-files-returning-404-in-debug)。

# c++ - c++时差函数是否计算夏令时？

> ID：14710347
> 
> 赞同：3
> 
> 时间：2013-02-05T14:54:03.187
> 
> 标签：c++, time.h

如果我使用 C++ 时差 (timediff) 函数来计算 2 次之间的差异，而后面的时间是在日光节约的时间更改之后，返回的差异会计算这一点。

例如，我有 23:00 的时间和 11:00 的时间。时间在这个时间中间发生变化，即向前一小时。

我会得到 12 小时还是 11 小时的差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:58:23.337

函数是`difftime`，不是`timediff`。它需要两个 `time_t`作为参数；`time_t`通常代表 UTC，而不是特定的本地时间，因此不会出现夏令时问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:59:25.570

是的你将会。在 Y2k 的日子里，我不得不在 Visual Studio 6 中处理它。然后他们更改了使代码无效的 DST 规则。

如果你看到一个向前一小时的神秘跳跃，然后向后一小时，它就是 DST 在 RTL 中抬起丑陋的头。

# php - PHP file_exists() 与 htaccess -f 条件的性能

> ID：14710352
> 
> 赞同：-1
> 
> 时间：2013-02-05T14:54:14.180
> 
> 标签：php, performance, file, .htaccess, exists

如果它们存在于子目录中，我想重定向到静态 html 文件。

我想知道一个小的 php 脚本作为 htaccess RewriteCond 是否会更高效。

有人对此有经验吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:57:19.580

通过 mode_rewrite（在 httpd.conf 或 .htaccess 中）执行此操作将比通过 PHP 脚本执行此操作更有效。

想一想，在 PHP 中执行此操作将需要 Apache 加载 mod_php 模块，然后将调用 PHP 解释器并编译并执行您的 PHP 脚本。如果您在 .htaccess 本身中处理它，则可以跳过所有这些。

# .net - EntityFramework 集合属性是否需要设置器

> ID：14710355
> 
> 赞同：5
> 
> 时间：2013-02-05T14:54:17.270
> 
> 标签：.net, entity-framework, setter, navigation-properties

使用 EntityFramwork（代码优先）建模 1-n 关系的常用方法是使用虚拟集合属性，例如：

```
class Project {
  public virtual ICollection<Remark> Remarks { get; set; }
}

class Remark {
  public virtual int ProjectId { get; set; }
  public virtual Project Project {get; set; }
} 
```

由于`Remarks`收藏是最初`null`的，我采取以下方法

```
 private ICollection<Remark> _remarks;
  public virtual ICollection<Remark> {
    get {
      if (_remarks == null)
        _remarks = new List<Remark>();
      return _remark;
    }
    set {
       _remarks = value;
    }
  } 
```

为了`Remarks.Add`在新创建`Project`的对象上使用该方法，而无需显式设置属性。

Afaik EF 内部派生自我的类并覆盖虚拟导航属性以支持延迟加载。

我的问题：我需要定义集合属性的*设置器吗？*英孚需要吗？我宁愿只公开 getter 并让类在内部管理集合。

*编辑*意外我只是在发布我的帖子后才注意到这个[相关问题](https://stackoverflow.com/questions/11191103/entity-framework-read-only-collections)，所以也许它只是一个重复......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T18:21:24.667

实体框架可以处理私有成员。您可以为该属性提供一个私有设置器：

```
private ICollection<Remark> _remarks;
public virtual ICollection<Remark> Remarks
{
    get { return _remarks ?? (_remarks = new HashSet<Remark>()); }
    private set { _remarks = value; }
} 
```

你甚至可以完全省略 setter。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-30T05:12:11.800

据我所知，EF Core 也不需要 setter。

`virtual`如果您使用延迟加载，则确实需要。否则你也可以省略它。

# visual-studio - 使用 Visual Studio 2012 安装Shield 2008 Pro

> ID：14710360
> 
> 赞同：0
> 
> 时间：2013-02-05T14:54:38.837
> 
> 标签：visual-studio, 64-bit, installshield

我有一个旧版本的 InstallShield 2008 Pro，它与我的 Visual Studio 2008 Pro 32 位应用程序部署完美配合。

我正在向 Visual Studio 2012 迁移应用程序到 x64。

我无法从 flexira 网站上找到有关 InstallShield 2008 的太多信息。在 InstallShield 方面的经验接近 0 时，我有几个关于部署的问题 -

1.  InstallShield 2008 是否足以满足具有 x64 升级的 Visual Studio 2012。

2.  我是否需要升级到 InstallShield 2012 或者最好查看像 WiX 这样的开放/免费项目。

欢迎在这方面提出任何其他意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T13:07:33.740

对于受支持的 InstallShield 与 Visual Studio 2012 的集成，您将需要 InstallShield 2012 Spring 或更高版本。集成让您可以使用项目输出组；如果您愿意不使用这些，则可以在 Visual Studio 之外使用 InstallShield，主要关心的是您需要支持哪些版本的 Windows 以及如何干净。

# java - Java slick 基于状态的游戏 - 状态返回空点错误

> ID：14710361
> 
> 赞同：2
> 
> 时间：2013-02-05T14:54:40.207
> 
> 标签：java, slick2d, states

我正在尝试使用 java slick 创建一个基于基本状态的游戏。我的 3 个阶段工作正常，但由于某种原因，其他 5 个阶段在我调用 get state 方法时会导致空点异常。所有状态都以相同的方式初始化并添加到游戏中，Load 游戏（工作状态之一）的实际代码与所有损坏的状态完全相同，只是减去了类名。我已经研究了一天左右，但不知道，任何帮助都会很棒。谢谢。

这是我的游戏类的代码 - 包含我的主要方法

```
package javagame.states;

import org.newdawn.slick.AppGameContainer;
import org.newdawn.slick.GameContainer;
import org.newdawn.slick.SlickException;
import org.newdawn.slick.state.StateBasedGame;

public class Game extends StateBasedGame{

public static final String gamename = "An OOP Adventure";
public static final int menu = 0;
public static final int play = 1;
public static final int new_game = 2;
public static final int load_game = 3;
public static final int char_select = 4;
public static final int item_found = 5;
public static final int monster_fight = 6;
public static final int inventory = 7;

public Game(String gamename){
  super(gamename);
  this.addState(new Menu(menu));
  this.addState(new Play(play));
  this.addState(new Newgame(new_game));
  this.addState(new Loadgame(load_game));
  this.addState(new Charselect(char_select));
  this.addState(new Itemfound(item_found));
  this.addState(new Monsterfight(monster_fight));
  this.addState(new Inventory(inventory));

}
/*
 */
public void initStatesList(GameContainer gc) throws SlickException{
   this.getState(menu).init(gc, this);
   this.getState(play).init(gc, this);
   this.getState(load_game).init(gc, this);

   //broken states
   this.getState(new_game).init(gc, this);
   this.getState(item_found).init(gc, this);
   this.getState(char_select).init(gc, this);
   this.getState(monster_fight).init(gc, this);
   this.getState(inventory).init(gc, this);
   //end broken states
   this.enterState(menu);
}

public static void main(String[] args) {
   AppGameContainer appgc;
   try{
      appgc = new AppGameContainer(new Game(gamename));
      appgc.setDisplayMode(640, 360, false);
      appgc.start();
   }catch(SlickException e){
      e.printStackTrace();
   }
}

} 
```

这是所有损坏的类的代码：

```
 package javagame.states;

 import org.newdawn.slick.GameContainer;
 import org.newdawn.slick.Graphics;
 import org.newdawn.slick.SlickException;
 import org.newdawn.slick.state.BasicGameState;
 import org.newdawn.slick.state.StateBasedGame;

 public class Newgame extends BasicGameState{

    public Newgame(int state){
    }

    public void init(GameContainer gc, StateBasedGame sbg) throws SlickException{

    }

    public void render(GameContainer gc, StateBasedGame sbg, Graphics g) throws SlickException{

    }

    public void update(GameContainer gc, StateBasedGame sbg, int delta) throws SlickException{

    }

    public int getID(){
       return 3;
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:17:03.763

> 加载游戏（工作状态之一）的代码与所有损坏的代码完全相同，减去类名

所有损坏的状态类和 Loadgame 类返回`getID() == 3`。仅在`Game`构造函数`Loadgame`中注册为状态`id == 3`- 其他人被忽略，因此从未注册。然后在`initStatesList()`其他状态类中找不到，因为没有使用 .id 之类的 id 注册的状态`4, 5, 6, 7`。

修复所有损坏的状态类（包括 Loadgame），如下所示：

公共类 Newgame 扩展 BasicGameState{ 私有 int 状态；// !!!

```
public Newgame(int state){
    this.state = state; // !!!
}

...

public int getID(){
   return this.state; // !!!
} 
```

}

# java - 从文本文件读取时显示符号 'ï»¿'

> ID：14710366
> 
> 赞同：2
> 
> 时间：2013-02-05T14:54:50.017
> 
> 标签：java, byte-order-mark

使用与此处相同的项目和文本文件：[Java.NullPointerException null（再次）](https://stackoverflow.com/questions/14632258/java-nullpointerexception-null-again/)程序正在输出数据，但带有`ï»¿`. 把你放在图片中：

> 该程序是一个电话簿，忽略第一个“代码”块，查看该链接上的第二个“代码”块，即带有条目的文本文件。程序按应有的方式输出它们，但它仅`ï»¿`在从文本文件读取的条目的开头给出。

关于如何删除它的任何帮助？我正在使用带有文件阅读器的缓冲阅读器。先谢谢了。

*   文本文件编码：UTF-8
*   使用 Java 7
*   Windows 7的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T14:58:39.967

文本文件中的读取是否使用带有 BOM 的 UTF-8？它看起来像 BOM 标志：“ï»¿” [http://en.wikipedia.org/wiki/Byte_order_mark](http://en.wikipedia.org/wiki/Byte_order_mark)

你在运行Windows吗？Notepad++ 应该能够转换。如果使用 linux 或 VI(M) 你可以使用 ":set nobomb"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:03:21.103

我想你的输入文件是用[UTF-8 编码的 BOM](http://en.wikipedia.org/wiki/Byte_order_mark#UTF-8)。

您可以在没有 BOM 的情况下保存输入文件，也可以在 Java 中处理。

在这里可能想要做的事情是使用具有适当编码的[InputStreamReader 。](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/InputStreamReader.html)可悲的是，这是不可能的。问题是，Java[假定](http://docs.oracle.com/javase/1.5.0/docs/api/java/nio/charset/Charset.html)UTF-8 编码文件没有 BOM，因此您必须手动处理这种情况。

一个快速的技巧是检查文件的前三个字节是否为`0xEF, 0xBB, 0xBF`，如果是，则忽略它们。

有关更复杂的示例，请查看[此答案](https://stackoverflow.com/a/1835529/1071311)`UnicodeBOMInputStream`中的类。

# vb.net - 使用 DotNetZip 库抓取 X 数量的文件和 Zip

> ID：14710367
> 
> 赞同：1
> 
> 时间：2013-02-05T14:54:55.103
> 
> 标签：vb.net, counter, dotnetzip

所以我使用[DotNetZip 库](http://dotnetzip.codeplex.com/)已经有一段时间了，它工作得很好，直到昨天我最大化了 zipfile 的大小。在任何一天，我都需要压缩 PDF 并将它们传输到仅接受 zip 文件的 SFTP 站点。PDF 的数量从几百、几千到超过 10K 不等。昨天 DotNetZip 进程中断时，我有大约 24K PDF。有一种方法可以使用 DotNetZip 库拆分 zip 文件，但由于某种原因，SFTP 服务器上使用的系统无法处理拆分的 zip 文件。

抓取 5K（或任何其他数量的文件）、压缩、删除这些文件并抓取另一个 5K、压缩、删除并重复该过程直到压缩所有文件的最佳方法是什么？

这是我当前的压缩过程代码...

```
 Dim PathToPDFs As String = "C:\Temp" 'PDF LOCATION
        Using Zip As ZipFile = New ZipFile()
            Zip.AddSelectedFiles("(name = *.pdf)", PathToPDFs, "", True)
            Zip.CompressionMethod = CompressionMethod.Deflate
            Zip.CompressionLevel = Ionic.Zlib.CompressionLevel.BestCompression
            Zip.Save("C:\Temp\Zipfile.zip")
        End Using 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T15:44:41.557

尝试首先枚举所有文件，获取 FileInfo 列表，然后循环遍历它们，并每 5K（或无论您的批处理大小）创建 ZIP 文件。您不需要删除任何内容，只需在内存中保留一个批处理 id，这样您的 zip 文件名就会从中派生（即`pdf_batch_01.zip`）。

因此，当达到批量大小时，您将`Save`创建一个新的`ZipFile`，并继续在循环中添加文件。不要忘记在最后一个文件中也“提交”（最后一批很可能是不完整的）。总而言之，当达到批量大小或处理最后一个条目（的变体`i=FileCount-1`）时，您“提交”。

# python - 多次调用脚本时获取单个实例

> ID：14710368
> 
> 赞同：0
> 
> 时间：2013-02-05T14:54:56.037
> 
> 标签：python, selenium, singleton

您将如何在第一次调用脚本时创建一个实例`webdriver`，然后在下一次检索相同的实例？像这样的伪代码：

```
from selenium import webdriver

thisScript = FIXME

if thisScript.isRunning():
    driver = thisScript.driver

else:        
    driver = webdriver.Firefox()

driver.get("http://www.example.com") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T23:58:12.243

最好的选择似乎是设置一个服务器/客户端系统，我想它可以使用 selenium 服务器来完成，但我最终编写了自己的代码，如下所示：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-
# This script takes a html file name as argument to start the
# selenium webdriver. It will start a server the first time it's run.
# If called again, it will then check if the server is running
# and restart it if neccessary. This prevents from having to restart
# the browser when running tests from different scripts by facilitating
# the running instance of selenium.

import socket, threading, time, commands, os

from selenium import webdriver

dirPath = "/path/to/dir"
fileUri = "/path/to/file"

class ThreadServer(threading.Thread):
    def __init__(self, port=None, host=None):
        threading.Thread.__init__(self)

        self.host = host if host != None else "localhost"
        self.port = port if port != None else self.getFreePort()

        self.driver = webdriver.Firefox()

    def getFreePort(self):
        sock = socket.socket()
        sock.bind(('', 0))

        port = sock.getsockname()[1]

        sock.close()

        return port

    def run(self):
        server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        server.bind((self.host, self.port))

        port = server.getsockname()[1]
        print 'Server started successfully {0}'.format(port)

        server.listen(1)
        conn, addr = server.accept()

        while 1:
            try:
                fileUrl = conn.recv(4096)

            except socket.error:
                server.listen(1)
                conn, addr = server.accept()
                continue

            if not fileUrl:
                server.listen(1)
                conn, addr = server.accept()

            else:
                self.driver.get(fileUrl)

host = '127.0.0.1'
port = 44164

if dirPath == "/path/to/dir":
    fileUrl = 'http://localhost/{0}'.format(fileUri.lstrip(dirPath))

    try:
        sock = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
        sock.settimeout(3.0)
        sock.connect((host, port))

    except socket.error:
        threadServer = ThreadServer(port)
        threadServer.start()

        time.sleep(3)

        sock = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
        sock.settimeout(3.0)
        sock.connect((host, port))

    try:
        sock.send(fileUrl)

    except socket.error:
        raise

    else:
        sock.close() 
```

# dart - 控制台 Dart 应用程序的 Sqlite 实现

> ID：14710376
> 
> 赞同：3
> 
> 时间：2013-02-05T14:55:28.367
> 
> 标签：dart

我想在 dart 中测试 sqlite，但是我能找到的唯一实现是 Sam McCall 在 Github 上的，但是它已经过时了。虽然我可以尝试更新它，但我对 Dart 还不是很熟悉。

我还阅读了但无法确认 VM 中提供了 sqlite 访问，但仅适用于非 html 程序。我读到的引用说“可能存在其他问题，因为 Dart 可执行文件现在包含 sqlite 库，作为 NSS（来自 Mozilla 的网络安全服务）的一部分，用于在 dart:io 中实现安全套接字。” . 正如我所说，我不确定这是否正确。

我想将 sqlite 与“dart:html”一起使用，而“dart.io”不能与“dart.html”一起使用，但是在控制台应用程序中使用它是一个开始。

虽然 dart 提供 indexed_db，但我不认为它可以替代 sql。此外，虽然数据库访问可能主要被认为是服务器端的需求，但显然客户端也有需求（例如，离线时等）。

还有可能会出现转换为 js 的问题，但这不是我关心的问题。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T00:38:46.790

正如 Ladislav 所提到的，您不能将 sqlite 与 dart:html 一起使用，因为基于浏览器的应用程序只能访问浏览器平台提供的内容。

WebSQL 基本上是 Sqlite。它仍然存在，在移动设备上得到很好的支持，但规范已经死了。如果这是您想要的，它应该可以正常工作。

对于命令行 Dart，您可能需要查看 SqlJocky，它是 Dart 命令行 VM 的 MySQL 驱动程序。在这里查看：[https ://github.com/jamesots/sqljocky](https://github.com/jamesots/sqljocky)

希望有帮助！

# jquery - 减少像素和尺寸保持完整的图像

> ID：14710379
> 
> 赞同：0
> 
> 时间：2013-02-05T14:55:36.523
> 
> 标签：jquery, performance

我制作了一个个人资料页面，它运行良好。我的问题是，当设置大尺寸（`eg: 2950px X 2904px`）的个人资料图片时，jquery 变慢（即动画）并且`css`鼠标指针悬停但移动正常。

任何人都可以提出任何解决方案来使 jquery 速度正常。

无论如何要保持相同的像素并以相同的速度加载jquery？

我尝试了具有相同像素但尺寸较小（`eg: 130kb`）的图像，但没有运气！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:14:11.853

无论用户上传的图像尺寸如何，您都应该有一个服务器端图像处理系统来生成个人资料图像大小。然后，您提供调整大小的图像，而不是用户上传的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:11:07.897

由于我假设您没有以完整的像素数显示整个图像，因此您可以做的是使用隐藏`canvas`元素作为便笺簿将原始图像绘制为缩放。然后从画布 ( `toDataUrl`) 中获取实际图像并将其用作图像元素的 src。

# wpf - 组合框中项目的条件格式

> ID：14710381
> 
> 赞同：1
> 
> 时间：2013-02-05T14:55:40.873
> 
> 标签：wpf, xaml, combobox, viewmodel, wpfdatagrid

目前我在一个团队中构建一个包含来自视图模型的数据的数据网格。我们使用的是响应式 UI，数据网格中的每个“行”都由一个继承自“ReactiveObject”的视图模型类表示。

我感兴趣的视图模型中有 2 个属性可以填充每行中的组合框。*PossibleScales*和*DefaultScale*的集合。*PossibleScales*被加载到组合框中，DefaultScale*用于*将 selecteditem 设置为*DefaultScale*。*DefaultScale*始终包含在DefaultScale*集合*中。我想要实现的是组合框中的任何非默认比例都以斜体格式格式化。所以我创建了一个调用*IMultiValueConverter*的样式。所以，我需要给这个 IMultiValueConverter 2 个参数，即当前比例（来自 PossibleScales 和 DefaultScale.

这是我们必须用可能的比例列表中的所有项目填充组合框的 XAML（我对 EditingElementStyle 有相同的）：

```
<DataGridComboBoxColumn.ElementStyle>
   <Style TargetType="ComboBox">
       <Setter Property="ItemsSource" Value="{Binding Path=PossibleScales}"  />
       <Setter Property="ItemContainerStyle" Value="{StaticResource Measeurementscale}"></Setter>
   </Style>
</DataGridComboBoxColumn.ElementStyle> 
```

Measeurementscale *StaticResource*被定义为控件资源部分中的样式**。**

 *```
<Style x:Key="Measeurementscale" TargetType="ComboBoxItem">
    <Setter Property="FontStyle">
       <Setter.Value>
          <MultiBinding Converter="{StaticResource NonDefaultScaleToItalicConverter}">
              <Binding RelativeSource="{RelativeSource Self}" Path="DataContext"/>
          </MultiBinding>
       </Setter.Value>
    </Setter>
</Style> 
```

如您所见，comboboxitem 的当前值被传递给**IMultiValueConverter**，这很好。但现在我想知道如何将 DefaultScale（它是 viewmodel 的一个属性并定义为控件的 DataContext）也传递给这个转换器。我无法做到这一点。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:06:25.283

您可以使用`FindAncestor`获取设置此数据上下文的父控件并绑定到它。例如：

```
<Binding RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=ComboBox}"
         Path="DataContext.DefaultScale" /> 
```*

# vb.net - 如何获取属于 Active Directory 中某个组的用户？

> ID：14710383
> 
> 赞同：0
> 
> 时间：2013-02-05T14:55:48.190
> 
> 标签：vb.net, active-directory, ldap

我有一个下拉列表，我试图用属于 Active Directory 中某个组的用户来填充。

组名为 OverRiders，8 人是该组的成员。可以添加更多成员。

我有以下下拉列表，但我运行代码，下拉列表为空白。

我究竟做错了什么？

请看代码：

```
 Private Sub FillDropdown()
    Dim oroot As DirectoryEntry = New DirectoryEntry("LDAP://CN=OverRiders,OU=Departments,DC=domain,DC=com")
Dim osearcher As DirectorySearcher = New DirectorySearcher(oroot)
Dim oresult As SearchResultCollection
Dim result As SearchResult
Dim list As New List(Of String)

    osearcher.Filter = "(&(objectCategory=group)(cn={0}))"
    ' search filter; only display emp with firstname / lastname pair
    osearcher.PropertiesToLoad.Add("name") ' member
    oresult = osearcher.FindAll()

    For Each result In oresult
        If Not result.GetDirectoryEntry.Properties("name").Value Is Nothing Then
            list.Add(result.GetDirectoryEntry.Properties("name").Value.ToString())
            Call list.Sort()
        End If
Next
emplist.DataSource = list
emplist.DataBind()

End Sub 
```

我已经能够确认该组确实存在并且组名有效。非常感谢提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:08:45.280

改变：

```
Dim oroot As DirectoryEntry = New DirectoryEntry("LDAP://CN=OverRiders,OU=Departments,DC=domain,DC=com") 
```

到

```
Dim oroot As DirectoryEntry = New DirectoryEntry("LDAP://DC=domain,DC=com") 
```

还有这个：

```
osearcher.Filter = "(&(objectCategory=group)(cn={0}))" 
```

对此：

```
osearcher.Filter = "(&(objectCategory=user)(memberOf=CN=overRiders,OU=Departments,DC=domain,DC=com)‌​)" 
```

其他一切都保持不变。

希望它可以帮助别人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-09T01:48:51.980

我知道这是一个老问题，但在类似情况下这对我有用：

```
 Dim UsersInGroup As New Collection()

    Dim de As New DirectoryEntry("LDAP://[Domain]")

    Dim MemberSearcher As New DirectorySearcher

    With MemberSearcher
        .SearchRoot = de
        .Filter = "(&(ObjectClass=Group)(CN=" & Group & "))"
        .PropertiesToLoad.Add("Member")
    End With

    Dim mySearchResults As SearchResult = MemberSearcher.FindOne()

    For Each User In mySearchResults.Properties("Member")
        UsersInGroup.Add(User)
    Next 
```

# android - 如何将位图大小调整为最大可用大小？

> ID：14710386
> 
> 赞同：3
> 
> 时间：2013-02-05T14:55:56.753
> 
> 标签：android, bitmap, image-resizing

我有非常大的位图图像。我的来源

```
BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f), null, o);

            // The new size we want to scale to
            final int REQUIRED_WIDTH = 1000;
            final int REQUIRED_HIGHT = 500;
            // Find the correct scale value. It should be the power of 2.
            int scale = 1;
            while (o.outWidth / scale / 2 >= REQUIRED_WIDTH
                    && o.outHeight / scale / 2 >= REQUIRED_HIGHT)
                scale *= 2;

            // Decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize = scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2); 
```

我想正确调整图像大小，我需要将图像大小调整为**最大**可用大小

例如

我下载的图像尺寸为 4000x4000 像素，我的手机支持 2000x1500 像素尺寸我需要**知道尺寸如何支持我的手机**？然后我将图像大小调整为 2000x1500（例如）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:05:06.347

在这里，您可以将位图大小调整为最大 avaliabe 大小：

```
public void onClick() //for example 
{
/*
Getting screen diemesions
*/
WindowManager w = getWindowManager();
        Display d = w.getDefaultDisplay();
        int width = d.getWidth();
        int height = d.getHeight(); 
// "bigging" bitmap
Bitmap nowa = getResizedBitmap(yourbitmap, width, height);
}

public Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth) {

int width = bm.getWidth();

int height = bm.getHeight();

float scaleWidth = ((float) newWidth) / width;

float scaleHeight = ((float) newHeight) / height;

// create a matrix for the manipulation

Matrix matrix = new Matrix();

// resize the bit map

matrix.postScale(scaleWidth, scaleHeight);

// recreate the new Bitmap

Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, false);

return resizedBitmap;

} 
```

我希望我有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-26T14:10:30.183

不是那么完美，但这是我的解决方案，

有趣的 setScaleImageWithConstraint（位图：位图）：位图 {

```
 val maxWidth = 500 //max Height Constraint
        val maxHeight = 500 //max Width Constraint

        var width = bitmap.width
        var height = bitmap.height

        if (width > maxWidth || height > maxHeight) {
            //If Image is still Large than allowed W/H Half the Size
            val quarterWidth = ((width / 2).toFloat() + (width / 3).toFloat()).toInt()
            val quarterHeight = ((height / 2).toFloat() + (height / 3).toFloat()).toInt()
            val scaledBitmap = Bitmap.createScaledBitmap(bitmap, quarterWidth, quarterHeight, false)
            //Recursive Call to Resize and return Resized One
            return setScaleImageWithConstraint(scaledBitmap)
        } else {
            //This will be executed when Image is not violating the Constraints
            return bitmap
        }
    } 
```

递归减小位图 1 四分之一大小，直到达到允许的高度和高度。

# node.js - nodejs中的jquery-url

> ID：14710387
> 
> 赞同：3
> 
> 时间：2013-02-05T14:55:57.630
> 
> 标签：node.js, npm

我正在尝试将一些使用 jquery-url 的 js 代码移植到 nodejs 中。

jquery-url 用于以这种方式获取给定 URL 的主机名：

```
var host = $.url(url).attr('host'); 
```

我的问题是，是否有 jquery-url 的 npm 包？如果没有，现有的包有这个功能吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T15:17:03.060

Node.js 已经有这个构建。请参阅[节点文档](http://nodejs.org/docs/latest/api/url.html "节点文档")。

例如：

```
var url = require("url");
var host = url.parse('http://user:pass@host.com:8080/p/a/t/h?query=string#hash').host;
console.log(host); 
```

# linq - 按页面大小检索记录

> ID：14710388
> 
> 赞同：0
> 
> 时间：2013-02-05T14:55:58.440
> 
> 标签：linq, sql-server-2008, entity-framework, c#-4.0

如果我使用普通查询，我有一个大表，它有一个超时异常。所以我想选择前1000个然后输出，下一步是从1001到2000检索并记录它等等。

我不确定如何在查询中添加参数。

```
int pageNumer = 0;
var query = DBContext.MyTable.Where(c=>c.FacilityID == facilityID)
 .OrderBy(c=>c.FilePath)
 .Skip(pageNumer*1000)
 .Take(1000);

foreach(var x in query)
{
     // Console.WriteLine(x.Name);
}
   // I want pageNumber is incremented until it goes to the bottom of the table.
   // I don't know how many records in the table. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:56:39.317

试试这个：

```
int pageNumber = 0;
bool hasHitEnd = false;

while (!hasHitEnd)
{
   var query = DBContext.MyTable.Where(c=>c.FacilityID == facilityID)
    .OrderBy(c=>c.FilePath)
    .Skip(pageNumber*1000)
    .Take(1000);

   foreach(var x in query)
   {
        // Do something
   }

   if (query.Count < 1000)
   {
      hasHitEnd = true;
   }

   pageNumber++;
} 
```

# networking - 保留的 MAC 地址（有些是分配的？）

> ID：14710389
> 
> 赞同：10
> 
> 时间：2013-02-05T14:55:58.753
> 
> 标签：networking, ethernet, mac-address

我正在尝试列出所有保留的、不存在的、不应使用的、仅应在本地使用的 MAC 地址等。（就像[Wikipedia](http://en.wikipedia.org/wiki/Reserved_IP_addresses)上的保留 IP 地址列表一样，但对于 MAC。）基本上，我想遍历交换机中的所有 MAC 地址并过滤掉“真实”地址。

[此页面](http://www.iana.org/assignments/ethernet-numbers/ethernet-numbers.xml)建议保留所有以 00-00-5E 或 01-00-5E 开头的地址，但是当[我查找它们时](http://www.base64online.com/mac_address.php?mac=00:00:5E)，似乎 00-00-5E 也分配给了信息科学研究所（加利福尼亚大学的一部分）。

所以2个问题：

1）有什么地方可以找到保留的MAC地址列表吗？

2) 00-00-5E 怎么了？仅保留该范围的一部分，还是出于某种原因将其分配给 ISI？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-01T16:39:24.147

我最近自己也在研究这个。我相信 IANA（您在其中一个链接中提到的）会给出最权威的答案：[IANA 以太网号码分配](http://www.iana.org/assignments/ethernet-numbers/ethernet-numbers.xml)

我不认为这意味着这些地址永远无法使用。根据[RFC5342](https://www.rfc-editor.org/rfc/rfc5342)第 2.1 节

“从 00-00-5E-00-00-00 到 00-00-5E-00-00-FF 的 2**8 个单播标识符是保留的，需要 IESG 批准才能分配（参见第 5.1 节）。”

所以基本上，您似乎需要 IESG（互联网工程指导小组）的特别许可才能获得该范围内的地址，我想 ISI 已经以某种方式获得了这个地址。

RFC5342 的第 2.1 节处理 48 位 MAC 标识符和 OUI，它没有提及任何严格禁止或永久保留的地址范围，据我所知。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-06-20T16:57:18.423

根据[RFC 5342](https://www.rfc-editor.org/rfc/rfc5342)保留以下 OUI ：

1.  OUI 01:00:5E:(00:00:00-7f:ff:ff) - 用于 IPV4 组播和 MLPS 组播。

2.  OUI 00:00:5E:(00:01:00 – 00:01:FF) - 用于虚拟路由器冗余协议 (VRRP) IPV4

3.  OUI 00:00:5E:(00:02:00 – 00:02:FF) - 用于虚拟路由器冗余协议 (VRRP) IPV6

4.  OUI 33:33:00 – 33:33:FF - 为 IPV6 多播保留

5.  OUI CF:00:00 – CF:FF:FF - IANA 为 PPP（点对点协议）保留

6.  OUI 00:00:5E (00:00:00 - 00:00:FF) - 需要 IESG 批准才能分配。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-25T09:49:29.017

我自己正在调查这个..我知道自从帖子活跃以来已经有一段时间了..但我发现这些可以在本地使用：

*   x2-xx-xx-xx-xx-xx
*   x6-xx-xx-xx-xx-xx
*   xA-xx-xx-xx-xx-xx
*   xE-xx-xx-xx-xx-xx

来源：[https ://honeywellaidc.force.com/supportppr/s/article/Locally-Administered-MAC-addresses](https://honeywellaidc.force.com/supportppr/s/article/Locally-Administered-MAC-addresses)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-23T08:44:35.523

MAC 地址的注册机构是[IEEE](https://standards.ieee.org/products-services/regauth/oui/index.html)。它分发 OUI（组织唯一标识符），为您提供三字节前缀和 2^24 个地址，收费（目前为 2 995 美元）。您还可以获得相应多播的权限，这些多播具有第一个字节集的最低位的前缀。例如，00:80:C2 分配给 IEEE 802.1 委员会，该委员会使用 01:08:C2:00:00:00 作为生成树。

因此，实际上并没有保留地址的列表。有一个已分配的 OUI 列表，除非买方为隐私支付了（很多）额外费用。您可以使用任何可以自由设置本地位的地址。一小部分多播地址具有重要意义，因为 IEEE、Cisco、IANA 等重量级人物为它们分配了意义。从 IEEE 注册的角度来看，这些块没有特别的意义（可能除了那些它已经分配给自己的块）。

现在，01-00-5E 范围是如何最终分配给信息科学研究所的？简单的答案是他们为此付出了代价。所以，真正的问题应该是“互联网如何使用分配给 ISI 的部分范围？”。答案是 IANA 过去是在 ISI 的办公室运行的：具体来说，IANA 是传奇人物[Jon Postel](https://en.wikipedia.org/wiki/Jon_Postel)

底线：你有点傻。您可以区分本地地址和多播地址，并尝试将分配的单播地址绑定到供应商块。并且您可能可以对知名的多播地址做更多的事情，但只能通过跟踪各个供应商的文档（IANA 显然是一个重要的文档，但仅对 2^22 个可用块中的 1 个具有确定性）。最好的起点之一可能是 Wireshark 代码库。

# angularjs - 从内部指令将参数传递给 ngChange 事件调用

> ID：14710392
> 
> 赞同：13
> 
> 时间：2013-02-05T14:56:02.293
> 
> 标签：angularjs, angularjs-directive

我有一个接受`ng-change`属性的指令：

```
<radio-buttons options="optionsList" 
               ng-model="myModel" 
               ng-change="myCallback($event)"></radio-buttons> 
```

我在控制器中定义了一个函数，`myCallback`如下所示：

```
$scope.myCallback = function(e) {
    console.log("Callback from controller");   
    console.log(e);
} 
```

以下函数 select 存在于我的`radioButton`指令中。我需要在 select 函数的指令中定义何时执行 ngChange 回调：

```
function select(scope, val) {
    if (!scope.disabled && scope.selectedValue != val) {
        scope.selectedValue = val;
        scope.model = val;

        scope.callback.call();
    }
} 
```

我遇到的问题是，当我在指令的函数中`$event`执行时，参数`myCallback`没有传递。`myCallback``select`

小提琴： http: [//jsfiddle.net/dkrotts/BtrZH/7/](http://jsfiddle.net/dkrotts/BtrZH/7/)更新：http: [//jsfiddle.net/dkrotts/BtrZH/8/](http://jsfiddle.net/dkrotts/BtrZH/8/)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T03:52:21.050

如果您想控制何时调用 ng-change 的处理程序，我认为最简单的方法是完全删除 ng-change - 您可以直接从 ng-click 回调中调用控制器函数。

我认为这可以实现您想要的功能：

[http://jsfiddle.net/BtrZH/11/](http://jsfiddle.net/BtrZH/11/)

如果需要，您可以从单击中捕获事件对象：

```
ng-click="select(scope, option.value, $event)" 
```

然后您可以在需要时调用控制器函数：

```
function select(scope, val, $event) {
    if (!scope.disabled && scope.selectedValue != val) {
        scope.selectedValue = val;
        scope.model = val;
        scope.$parent.myCallback($event);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-11T12:38:15.053

您必须像这样在回调中传递参数：

```
callback({parametername: value}); 
```

您必须将参数名称与**HTML中声明的名称相匹配**

在你的情况下：

```
callback({$event: val}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-02T15:21:08.797

以下看起来不太好，但会起作用（它会创建另一个变量`$event`并通过 传递它`ng-change`）：

```
ng-click="$event = $event" ng-change="myCallback($event)" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-16T18:37:10.930

要将值传递给控制器​​，请使用具有与模板上定义的接收器参数对应的键的对象调用它。

例如

元素

```
<my-element change="myFunction(value, id, event)"></my-element> 
```

呼叫者

```
{
   "restrict" : ...,
   "scope" : {
       "change" : "&"
    },
   "controller" : function($scope){
       this.someEventHandler = function($event){

          // called here
          scope.change({
              "value" : "somevalue",
              "id" : "someid",
              "event" : $event
          });

       }
   }
} 
```

父控制器接收器

```
$scope.myFunction = function(v, i, e){
   // do stuff
} 
```

REF：[从内部指令将参数传递给 ngChange 事件调用](https://stackoverflow.com/questions/14710392/passing-arguments-to-ngchange-event-call-from-inside-directive)

# qt - 按钮上的按下效果似乎不起作用

> ID：14710393
> 
> 赞同：-3
> 
> 时间：2013-02-05T14:56:02.310
> 
> 标签：qt, qml, meego

//MainPage.qml

```
 Button{
        id: pushI
        text: qsTr("录音")
        //onClicked: label.visible = true
        MouseArea
        {
            anchors.fill: parent
            MyItem { id: inputA}
            onPressed:
            {
                inputA.on_pressed()//my c++ class method
            }
            onReleased:
            {
                inputA.on_released()//my c++ class method
            }

        }
    } 
```

$onClicked$ 属性可以，但是我有新闻发布流程，怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T03:26:47.693

我很懒

```
 Button{
        id: button
        state: "RELEASED"
        text: qsTr("录音")
        MouseArea
        {
            anchors.fill: parent
            MyItem { id: inputA}
            onPressed:
            {
                inputA.on_pressed()
                button.state = "PRESSED"
            }
            onReleased:
            {
                inputA.on_released()
                button.state = "RELEASED"
            }
        }
        states: [
        State {
        name: "PRESSED"
        PropertyChanges { target: button; checked: true}
        },
        State {
        name: "RELEASED"
        PropertyChanges { target: button; checked: false}
        }
        ]
    } 
```

# xslt - 需要用三个字符的月份格式化 dateTime 对象

> ID：14710395
> 
> 赞同：1
> 
> 时间：2013-02-05T14:56:05.710
> 
> 标签：xslt

这是我的 xslt 声明：

```
<xsl:value-of select="format-dateTime(current-dateTime(), '[D01]-[MN, *-3]-[Y0001] [H01]:[m01]:[s01]')"/> 
```

这是产生：

“2013 年 2 月 5 日 09:40:09”

这几乎就是我想要的。我需要将月份限制为三个字符（即“FEB”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-16T17:52:55.870

删除“[MN, *-3]”中的空格

我对此有类似的问题，并且修复了它。

# javascript - 这个javascript是如何工作的？

> ID：14710396
> 
> 赞同：0
> 
> 时间：2013-02-05T14:56:05.740
> 
> 标签：javascript, jquery, jquery-load, jquery-post

我是一个 javascript 菜鸟，我不明白为什么会这样：

```
$().load('/my/url/', {my:data, more:data}, jsFunc());

function jsFunc()
{
    $("#myid").val("yep");
} 
```

但不是这个：

```
$().load('/my/url/', {my:data, more:data}, function() {jsFunc()});

function jsFunc()
{
    $("#myid").val("yep");
} 
```

我尝试了 $.ajax 而不是 $.load ，结果相同。我会将响应数据传递给 jsFunc()，这就是为什么我需要在函数内部使用 jsFunc()。我确定这很简单，我只是对 javascript 不是很有经验。谢谢。

再次感谢所有帮助。我决定使用 $.post ，因为它最适合这种情况，但现在我遇到了响应数据问题。我的代码如下所示：

```
$.post('/my/url/', {my:data, more:data}, function(data) {
    var strung = JSON.stringify(data)
    var parse = jQuery.parseJSON(strung)
    console.log(parse.some);}, 'json'); 
```

我正在登录控制台以查看现在返回的内容，当我看到记录的正确值时，我将添加回调。我从 jQuery api 页面获得的过程，但它只会记录`undefined`. 当我更改`parse.some`为`parse`控制台日志将显示对象，我可以选择一个元素并查看正确的键：值对。任何帮助都会很甜蜜。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T15:09:37.130

两者都不起作用。第一个似乎有效，因为您`jsFunc`立即调用该函数，它不会等待任何响应。

如果您使用`$()`并使用该`load`方法创建一个空的 jQuery 对象，它不会调用服务器，因为没有可以放置结果的元素。

要指定回调函数，您可以使用函数的名称：

```
$('#someElement').load('/my/url/', {my:data, more:data}, jsFunc); 
```

或函数表达式：

```
$('#someElement').load('/my/url/', {my:data, more:data}, function() { jsFunc(); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:05:10.797

第一个代码块将简单地调用 jsFunc() 并将结果作为参数返回给 load(..) 方法，这很奇怪，因为该参数应该是在加载完成时触发的回调函数，但这有效吗？回调语法更符合第二个示例（我相信您所说的那个不起作用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T15:24:08.457

回答我的第二部分：

我返回的 JSON 数据由许多对象组成，因此我必须指定索引和键来获取要返回的值。

# c++ - 删除指针的后果

> ID：14710398
> 
> 赞同：3
> 
> 时间：2013-02-05T14:56:11.177
> 
> 标签：c++, memory-management

```
Object *p = new Object();
delete p; 
```

当我删除 p 时，堆上的对象分配被删除。但是 p 本身到底发生了什么？它是否从堆栈中删除？还是它仍然在堆栈中并且仍然包含先前保存对象的内存地址？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T14:57:20.183

`p`仍在堆栈中，并保存`Object`您刚刚删除的地址。您可以自由重用`p`，将其指定为指向其他分配的数据或`NULL`/ `nullptr`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T14:59:40.027

`p`是一个变量，对。所以它的生命周期是在编译时确定的，而不是在运行时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:58:46.003

你在这里得到的东西叫做[悬空指针](http://en.wikipedia.org/wiki/Dangling_pointer)——一个你通常会不惜一切代价避免的怪物。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T14:59:43.423

当你执行`delete p`. 所指向的内存`p`被删除。

> `delete`~= 析构函数 + 释放

这里`delete`只是一个说明内存被释放的*术语。*对操作系统的内存总量或变量`p`本身没有影响。`p`仍然指向现在被系统回收的内存，因此成为一个*悬空指针*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T15:01:03.733

指针变量仍然存在，但它的值被渲染为无效 - 除了分配另一个有效指针或空指针之外，对其进行任何操作都会产生未定义的行为。[不能保证指针值不变](https://stackoverflow.com/q/5002055/57428)。

# javascript - 滑出 div，如果 div 已打开且其他点击，则滑出并滑入新的

> ID：14710401
> 
> 赞同：0
> 
> 时间：2013-02-05T14:56:23.993
> 
> 标签：javascript, jquery, css

希望您可以在这里为两个部分提供帮助。

一个是帮助我意识到如何在 jQuery 的最佳实践方面更有效地缩短/提高我的代码的效率。

另一个是扩展我的代码 - 我单击以滑出 div（使用动画/左），但我在页面上有很多迭代。我所追求的是，​​如果一个 div 被点击并滑出，另一个被点击，打开的 div 滑回来，新的 div 滑出。等等。希望这是有道理的。

jQuery

```
$('.each-brew.ale').toggle(function() {       
  $('.each-brew-content.ale').animate({ left: '0' }, 1000);
  $('.each-brew-content.ale').css('display','block');
}, function() {       
  $('.each-brew-content.ale').animate({ left: '-100%' }, 1000);
  $('.each-brew-content.ale').css('display','none');
});
$('.each-brew.bramling').toggle(function() {       
  $('.each-brew-content.bramling').animate({ left: '0' }, 1000);
  $('.each-brew-content.bramling').css('display','block');
}, function() {       
  $('.each-brew-content.bramling').animate({ left: '-100%' }, 1000);
  $('.each-brew-content.bramling').css('display','none');
});
$('.each-brew.bullet').toggle(function() {       
  $('.each-brew-content.bullet').animate({ left: '0' }, 1000);
  $('.each-brew-content.bullet').css('display','block');
}, function() {       
  $('.each-brew-content.bullet').animate({ left: '-100%' }, 1000);
  $('.each-brew-content.bullet').css('display','none');
});
$('.each-brew.miami-weisse').toggle(function() {       
  $('.each-brew-content.miami-weisse').animate({ left: '0' }, 1000);
  $('.each-brew-content.miami-weisse').css('display','block');
}, function() {       
  $('.each-brew-content.miami-weisse').animate({ left: '-100%' }, 1000);
  $('.each-brew-content.miami-weisse').css('display','none');
}); 
```

HTML

```
<div class="row">
    <div class="four columns first-margin-offset">
        <div class="each-brew-container delay-1">
                                        <div class="each-brew ale">
                <span class="each-brew-title">Ale<span class="each-brew-description">South Pacific Best Bitter</span></span>
                </div>
                <div class="each-brew-separator"></div>
                                        <div class="each-brew bramling">
                <span class="each-brew-title">Bramling<span class="each-brew-description">English Hop Golden Ale</span></span>
                </div>
                <div class="each-brew-separator"></div>
                                        <div class="each-brew bullet">
                <span class="each-brew-title">Bullet<span class="each-brew-description">Original IPA</span></span>
                </div>
                <div class="each-brew-separator"></div>
                                        <div class="each-brew miami-weisse">
                <span class="each-brew-title">Miami Weisse<span class="each-brew-description">American Hopped Wheat Beer</span></span>
                </div>
                <div class="each-brew-separator"></div>
                    </div>
    </div>
            <div class="each-brew-content ale">
        <div class="three columns first-margin-offset">

                        <div class="each-brew-image"><img width="327" height="511" src="ale-clip-01.png" class="attachment-brew-standard" alt="ale-clip-01" /></div>        </div>
        <div class="three columns first-margin-offset">
            <div class="default-content-area content-area ale-content">
                <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.</p>
            </div>
        </div>
    </div>
            <div class="each-brew-content bramling">
        <div class="three columns first-margin-offset">

                        <div class="each-brew-image"><img width="326" height="511" src="bramling.png" class="attachment-brew-standard" alt="bramling" /></div>      </div>
        <div class="three columns first-margin-offset">
            <div class="default-content-area content-area bramling-content">
                <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.</p>
            </div>
        </div>
    </div>
            <div class="each-brew-content bullet">
        <div class="three columns first-margin-offset">

                        <div class="each-brew-image"><img width="327" height="511" src="bullet.png" class="attachment-brew-standard" alt="bullet" /></div>      </div>
        <div class="three columns first-margin-offset">
            <div class="default-content-area content-area bullet-content">
                <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.</p>
            </div>
        </div>
    </div>
            <div class="each-brew-content miami-weisse">
        <div class="three columns first-margin-offset">

                        <div class="each-brew-image"><img width="326" height="511" src="miami-weisse.png" class="attachment-brew-standard" alt="miami-weisse" /></div>      </div>
        <div class="three columns first-margin-offset">
            <div class="default-content-area content-area miami-weisse-content">
                <p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi.</p>
        </div>
    </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:06:03.957

1）只需循环它：

```
 var animateClasses = ['ale', 'brambling', 'bullet', 'miami-weisse'];
   for (var i=0; i<animateClasses.length; i++) {
      (function(animCls) { 
      $('.each-brew.'+animCls).toggle(function() {       
         $('.each-brew-content.'+animCls).show().animate({ left: '0' }, 1000);
      }, function() {       
           $('.each-brew-content.'+animCls)
                  .animate({ left: '-100%' }, 1000, function() { $(this).hide()});  // hide the element in the animation on-complete callback  
      });
      })(animateClasses[i]);  //  self calling anonymous function
   } 
```

2）保持一个全局变量保存最后一次点击的div。在覆盖它之前，如果它不为空，则对其进行返回动画。例如：

```
var lastClicked = null;
var animateClasses = ['ale', 'brambling', 'bullet', 'miami-weisse'];
   for (var i=0; i<animateClasses.length; i++) {
      (function(animCls) { 
      $('.each-brew.'+animCls).toggle(function() {
    if (lastClicked && lastClicked != this) {
        // animate it back
        $(lastClicked).trigger('click');
    }
    lastClicked = this;
    // continue with handler as before 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:46:40.913

这就是我最终得到的结果——结合使用@Iftah 的代码：

```
var lastClicked = null;
var animateClasses = ['ale', 'bramling', 'bullet', 'miami-weisse'];
   for (var i=0; i<animateClasses.length; i++) {
      (function(animCls) { 
      $('.each-brew.'+animCls).toggle(function() {
    if (lastClicked && lastClicked != this) {
        // animate it back
        $(lastClicked).trigger('click');
    }
    lastClicked = this;
    $('.each-brew-content.'+animCls).show().animate({ left: '0' }, 1000).css('position','inherit');
      }, function() {       
           $('.each-brew-content.'+animCls)
                  .animate({ left: '-33.3333%' }, 1000, function() { $(this).hide()})  // hide the element in the animation on-complete callback
                  .css('position','relative'); 
      });
      })(animateClasses[i]);  //  self calling anonymous function
   } 
```

只是需要延迟新项目的到来......

# javascript - 通过基本 JavaScript 而非 jQuery 或 AJAX 刷新/更新 DIV

> ID：14710404
> 
> 赞同：-2
> 
> 时间：2013-02-05T14:56:29.610
> 
> 标签：javascript

首先，我**不**希望我的代码在**jQuery 或 AJAX**中！我希望它使用纯 JavaScript。我知道随着 OOP 的发展，jQuery 和 AJAX 更快更好，但我只知道一点 JavaScript，并且想在继续使用 AJAX 和 jQuery 等更高版本之前学习如何在基本 JavaScript 中执行以下操作。

所以任何可以为我完成这项工作的人都感谢:)

* * *

我想要做的不是刷新整个页面/窗口，我只想让ID为**#tips的****DIV**用来自外部（“tips.txt”）文件的内容进行刷新/更新。我正在尝试学习如何在基本的 JS 中做到这一点，而不是使用最新的方法，这样我就可以从底层学习并逐步向上。

 **再次感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:01:15.093

AJAX 可以是纯 JavaScript。这与 jQuery 无关。使用 jQuery，发出请求更容易，因为它是一个 JavaScript 框架。 [http://www.seifi.org/javascript/simple-ajax-request-response-javascript.html](http://www.seifi.org/javascript/simple-ajax-request-response-javascript.html)**

# jquery - MVC - 在网格中转换为不显眼的 jquery

> ID：14710407
> 
> 赞同：1
> 
> 时间：2013-02-05T14:56:47.697
> 
> 标签：jquery, asp.net-mvc

下面是一个有效的编辑器模板，但需要改进。具体来说，该复选框有一个 onclick 事件，并调用了一个 javascript 函数；

AdministratorFlagClickFunc(employeeId)

我应该做的是在脚本中指定一个 click() 事件。但是，鉴于模板是网格的一部分，并且我需要识别每一行上复选框的 id 以及相关参数，我该怎么做？

```
@model UserLineViewModel
<tr>
    <td>
        @Html.DisplayFor(x => x.Employee.Forename)
    </td>
    <td>
        @Html.DisplayFor(x => x.Employee.Surname)
    </td>
    <td>
        @Html.DisplayFor(x => x.UserScd.Created)
    </td>
    <td style="text-align: center;">
        @Html.CheckBoxFor(x => x.UserScd.AdminFlag,
                    new { id = "checkBoxAdministratorFlag", 
                        onclick = "AdministratorFlagClickFunc(" + Model.UserScd.EmployeeId + ")" })
    </td>
    <td>
        @Ajax.ActionLink("Remove", "Delete", new { id=Model.UserScd.EmployeeId  }, new AjaxOptions()
                { 
                    OnSuccess="refreshPostback"   
                    , Confirm="Are you sure that you want to remove this person?"
                    , HttpMethod = "post"
                })
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:14:21.167

问题是您想将点击处理程序移出标记并进入脚本？您可以通过 css 类附加处理程序（不是 id，因为每个页面应该是唯一的）并通过隐藏元素获取 emp id：

标记：

```
<td style="text-align: center;">@Html.CheckBoxFor(x => x.UserScd.AdminFlag, new { class = "checkBoxAdministratorFlag"})@Html.HiddenFor(Model.UserScd.EmployeeId) </td> 
```

脚本：

```
$('.checkboxAdministratorFlag').click(function() {

    var empId = $(this).next('input').val();
    //....

}); 
```

# javascript - 使用 javascript 将 SVG 文档从字符串添加到 SVG 文档

> ID：14710408
> 
> 赞同：0
> 
> 时间：2013-02-05T14:56:48.063
> 
> 标签：javascript, dom, svg, internet-explorer-9

我需要在调用函数时将节点添加到 html 页面上的 svg 文件中`pinta(strSVG)`。此 SVG 文件嵌入在`<object>`标签上的 html 页面中

SVG 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11-flat-20030114.dtd">
<svg xmlns="http://www.w3.org/2000/svg"  xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" height="100%" width="100%" onload="inicia(evt)" >

<script type="text/ecmascript"><![CDATA[      

parent.pinta=pinta

function inicia(event){
    SVGDocument =  event.target.ownerDocument;                                 
}

function pinta(strSVG){
    xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
    xmlDoc.async=false;
    xmlDoc.loadXML(strSVG);
    var newNode=xmlDoc.element;
    SVGDocument.getElementById('grafico1').appendChild(newNode);
}
]]></script>
<svg y="" width="" height="" id="grafico1"/>
<svg y="500" width="" height="" id="grafico2"/>
<g id="tip_Cuadro"/>
<g id="tip_texto"/>
</svg> 
```

返回无效参数

对 pinta(strSVG) 的调用在网页 HTML 上：

```
var object = document.getElementById('tbl27svg');
var svgdoc = object.contentDocument;
if (svgdoc && svgdoc.defaultView)
    svgwin = svgdoc.defaultView;
    else if (object.window)
        svgwin = object.window;
       else try {
        svgwin = object.getWindow();
      }
  catch(exception) {
    alert('The DocumentView interface is not supported\r\n' +
          'Non-W3C methods of obtaining "window" also failed');
  }
svgwin.pinta(str); 
```

str 包含完整的 svg 文档：

```
"<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">" ...... 
```

问题是 pinta 无法接收 srtSVG。srtSVG 在 pinta(srtSVG) 函数上未定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:43:54.907

我想你想要

```
var doc = new DOMParser().parseFromString(xmlDoc.documentElement, 'application/xml');

document.getElementById('grafico1').appendChild(
 document.getElementById('grafico1').ownerDocument.importNode(doc.documentElement, true)); 
```

newNode 不是单个元素，它是一个完整的文档，可能包含许多元素，而 appendChild 仅用于通过其标签名称添加单个元素。

# mysql - 如何获得具有相同截止标记的行集？

> ID：14710409
> 
> 赞同：0
> 
> 时间：2013-02-05T14:56:50.983
> 
> 标签：mysql, sql

```
Name      Age      Cut-off
--------------------------
Ram       22        89.50
Ganesh    22        66.00
Sam       22        92.00
Albert    22        89.50
Kannan    22        65.45   
John      22        66.00 
```

> 在上表中，Ram 和 Albert 以及 Ganesh 和 John 具有相同的截止值。我怎样才能得到所有这些行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T14:58:33.137

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT `Cut-off`, COUNT(*) totalCOunt
            FROM    tableName
            GROUP   BY `Cut-off`
            HAVING  COUNT(*) > 1
        ) b ON a.`Cut-off` = b.`Cut-off` 
```

为了获得更快的性能，请添加一个`INDEX`on 列`Cut-off`

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/966aa/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:06:44.147

这是一种方法：

```
select *
from t
where exists (select 1 from t t2 where t2.cutoff = t.cutoff and t2.name <> t.name) 
```

# c# - 已构建 dll 后更新 DLL 元数据

> ID：14710412
> 
> 赞同：2
> 
> 时间：2013-02-05T14:56:53.820
> 
> 标签：c#, dll

我很好奇是否有办法在编译后更改托管 DLL 的元数据（例如产品名称）。我知道这个问题：[Change Assembly Version in a compiled .NET assembly](https://stackoverflow.com/questions/398170/change-assembly-version-in-a-compiled-net-assembly)，他们提到使用 ILMerge 通过将 IL 合并到自身的克隆中来更新版本号，但是在查看 ILMerge 命令行标志时，我不认为ILMerge 支持其他属性。

我想这样做的原因是我有一个部署结构，我有一个构建用于许多客户。我想在打包期间使用客户端名称标记部署的 dll，以便我可以判断 dll 是否在客户端之间复制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:02:57.720

我自己之前就想过这个问题。我想，由于程序集非常易于使用，因此您可以将用户生成的内容存储在程序用完的程序集内似乎是合乎逻辑的。

这种推理的问题在于，这意味着有人可以在最终用户没有意识到的情况下有效地更改 DLL 的内容（这是多少病毒起作用）——正如您可以想象的那样，这是一个巨大的安全问题。如果对程序集进行数字签名，那么它会更加安全/可靠，以便您知道是否/何时有人篡改了程序集。

但是，如果您想在构建程序集*之前*进行微小的更改，您可以尝试查看 CodeDom（用于更改代码结构）或 Reflection.Emit（用于直接使用“IL”构建程序集）。

# authorization - 如何在 CKAN v2.0 中将数据集设为私有

> ID：14710422
> 
> 赞同：2
> 
> 时间：2013-02-05T14:57:24.803
> 
> 标签：authorization, ckan

我在运行 CKAN v2.0（测试版）的 CKAN 安装中创建了一个数据集，并希望将数据集设为私有（即仅对我可见，并且可能对我的组织组中的其他一些人可见）。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:17:51.807

测试版尚未发布，但当前位于[http://preview.ckan.org](http://preview.ckan.org)的功能允许您按以下组织限制，对于您也是其成员的组织中的数据集：

在数据集的编辑页面中，从“可见性”下拉菜单中选择“私有”。然后它只能被组织中的其他用户看到。

# llvm - llvm 字符串中真正的 \0A\00 是什么

> ID：14710427
> 
> 赞同：3
> 
> 时间：2013-02-05T14:57:49.013
> 
> 标签：llvm

我只是 llvm 汇编的初学者，我喜欢就我不确定的一切提出问题。

我只是在看 hello world 程序和 @str = internal constant [13 x i8] c"hello world\0A\00"

我不明白后缀是什么意思 \0A\00 我尝试阅读它，但它最终在输出中没有换行符但是如果我只有 \0A 换行符又回来了......我觉得 \00 是没用……是真的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T15:18:17.710

在 LLVM IR 语法中，后跟两个十六进制字符的反斜杠表示一个字符，其[ASCII 值](http://en.wikipedia.org/wiki/ASCII)与这两个字符定义的值相同。

在这种情况下，这些字符是索引 10 (0xA) 处的字符 - 这是一个换行符 - 以及索引 0 处的字符，称为“null”，用于终止许多不同系统中的字符串。在 C 行语言中，这些将被写为`\n`and `\0` （或只是 0），并`\0`隐式添加到 C 中的文字字符串的末尾（但不是在 LLVM IR 中）。

换句话说，你看到的字符串等同`"hello world\n"`于 C 中的字符串。

注意：尽管*可以*使用非空终止的字符串，但它非常不健康，并且许多内置字符串操作会对这些字符串产生[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)。不要省略空终止。

# jquery - 使用 jquery 在 iframe 之外引用标签

> ID：14710430
> 
> 赞同：0
> 
> 时间：2013-02-05T14:58:02.980
> 
> 标签：jquery, iframe

结构是

```
<tr rel="param1">
<td>
    <iframe>
       <body>
         <input type="input"/>

        </body>

   </iframe>
</td></tr> 
```

现在我想从 iFrame 内的输入标签中获取 tr 的引用。我试过了`$("input").closest('tr')`。但这不起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:07:29.043

在一个 iframe 中代表另一个内部的一个完整的新页面。您无法轻松访问父元素。但是您也可以在 iFrame 中加载 JQuery，以便在那里使用可用的方法，并且您可以使用 Javascript 之类的

```
parent.document.getElementById('....'); 
```

或者

```
parent.$("input").closest('tr') // acces directly parents JQuery, not tested maybe working... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:13:35.153

不允许 IFrame 中的内容访问 IFrame 之外的内容。这可以保护外部网站免受远程代码执行风格的攻击。

# jquery - jquery手风琴中的图像放大

> ID：14710435
> 
> 赞同：0
> 
> 时间：2013-02-05T14:58:18.423
> 
> 标签：jquery, accordion, image-enlarge

我正在尝试用 jquery 创建一个手风琴。现在我遇到了一个问题，那就是无法弄清楚如何放大单独幻灯片的图像。如果单击第一篇文章，它会起作用，但是当您单击下一篇文章时，第一篇文章的图像会保持放大尺寸。这是我的jQuery代码：

```
$(document).ready(function() {

        $(function () {
        $(".news").siblings("span").click(function () {
            $(".news").slideUp(200, function() {

                $(this).siblings(".news").toggle(500);

            });

            $(this).siblings(".news").toggle(500);
                $('#test').addClass('article').siblings('#headline').removeClass('article');

        });
    });

}); 
```

这是我的整个代码[DEMO](http://jsfiddle.net/rb7MK/)。希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:15:13.313

有效 HTML 的主要规则之一，afaik 是不要对多个元素使用相同的 ID。（[http://www.w3schools.com/tags/att_global_id.asp](http://www.w3schools.com/tags/att_global_id.asp)）

除此之外，使用正确的选择器很容易解决您的问题：

```
$('.foto').removeClass('article');
$(this).children('.foto').addClass('article'); 
```

见这里：http: [//jsfiddle.net/rb7MK/4/](http://jsfiddle.net/rb7MK/4/)

# wpf - WPF ListBox ContentPresenter.ContentTemplate 什么都不是

> ID：14710441
> 
> 赞同：1
> 
> 时间：2013-02-05T14:58:45.300
> 
> 标签：wpf, vb.net

我得到了这个带有 contextMenu 的简单 ListBox：

```
<ListBox BorderThickness="1" BorderBrush="Gray" SelectionChanged="TableList_SelectionChanged"   Grid.Column="0" x:Name="TableList">

            <ListBox.ContextMenu>
                <ContextMenu>
                    <MenuItem Click="MenuItem_Click"  Header="Ajouter"/>
                    <MenuItem Click="MenuItem_Click_1" Header="Supprimer"/>
                </ContextMenu>
            </ListBox.ContextMenu>

            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <Image Name="Image" Height="12px" Width="12px" Source="Apply.gif">
                            <Image.Margin>
                                <Thickness Right="10"></Thickness>
                            </Image.Margin>
                        </Image>
                        <TextBlock Text="{Binding Path=Content}" />
                    </StackPanel>
                </DataTemplate>
             </ListBox.ItemTemplate>

        </ListBox> 
```

我正在尝试从上下文菜单操作（任何操作）的处理程序中检索所选 ListBoxItem 中的“图像”控件。所以处理程序是：

```
 'Dim ListBox As ListBox = DirectCast(sender.Parent, System.Windows.Controls.ContextMenu).PlacementTarget
    Dim ListBox As ListBox = Me.TableList
    Dim myListBoxItem As ListBoxItem = CType(ListBox.ItemContainerGenerator.ContainerFromItem(ListBox.Items.CurrentItem), ListBoxItem)

    ' Getting the ContentPresenter of myListBoxItem
    Dim myContentPresenter As ContentPresenter = FindVisualChild(Of ContentPresenter)(ListBox)

    ' Finding textBlock from the DataTemplate that is set on that ContentPresenter
    Dim myDataTemplate As DataTemplate = myContentPresenter.ContentTemplate 
```

根据这个[链接](http://msdn.microsoft.com/en-us/library/system.windows.frameworktemplate.findname.aspx)表单 MSDN，我可以从 DataTemplate 调用“findName”方法。但是变量“myDataTemplate”什么都没有……

我究竟做错了什么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T15:08:03.690

在这一行中，您将获得 ListBox 而不是 ListBoxItem 的内容演示者：

将 myContentPresenter 调暗为 ContentPresenter = FindVisualChild(Of ContentPresenter)(ListBox)

# .net - 在 PowerShell 中使用 System.Net.WebClient 访问带有 SAN 证书的 HTTPS URL

> ID：14710449
> 
> 赞同：6
> 
> 时间：2013-02-05T14:59:06.070
> 
> 标签：.net, powershell, webclient, powershell-2.0, powershell-3.0

这里有点奇怪的问题。我们使用的脚本是：

```
$username = "itrpo"
$url = "https://homepages.domain.com/cgi-bin/checkperms.cgi?user=$username"
$homepagesUser = "REMOVED"
$homepagesPass = "REMOVED"
$webclient = New-Object System.Net.WebClient
$webclient.Credentials = new-object System.Net.NetworkCredential($homepagesUser, $homepagesPass)
$result = $webclient.DownloadString($url) 
```

从我的桌面（Windows 8，使用 .NET v4.0.30319 的 PowerShell v3）运行它时，它可以工作。从服务器（Windows Server 2008 R2、PowerShell v2 使用 .NET v2.0.50727）运行它时，它不会。最终它挂起并返回错误：使用“1”参数调用“DownloadString”的异常：“操作已超时”

使用 NetMon，我设法确定在服务器上它未能执行任何 TLS 客户端密钥交换。

homepages.domain.com 的 SSL 证书实际上是一个 SAN 证书，homepages 是实际服务器名称的别名（我们称之为 servera.domain.com）。当我在脚本中更改 $url 以使用实际的服务器名称时：

```
$url = "https://servera.domain.com/cgi-bin/checkperms.cgi?user=$username" 
```

...它起作用了，但这并不理想（如果将服务移动到另一台机器上，脚本将中断）。

似乎 PowerShell v2 (.NET v2) 的 SAN 证书有问题？支持这一点的进一步证据是，我们将上述样式脚本用于另一个具有标准 SSL 证书的服务器，它可以正常通信。

可能是由于使用的 WebClient 类的差异造成的吗？这是 .NET v2 下的文档：http: [//msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.80%29.aspx) 以及 .NET 下的文档v4：http: [//msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.100%29.aspx)

我对编程知之甚少，无法真正正确解释上述文档（或者知道我是否走在正确的轨道上）。

理想情况下，我们希望该脚本在 PowerShell v2 和 .NET v2 下运行，而无需升级或强制 PowerShell 使用 .NET v4。如果我的怀疑是正确的，是否有参数我们可以指定/修改脚本以“修复”这个问题的方法？

非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T18:03:52.333

我的预感是，这与 PowerShell 版本（或一般的底层平台细节）相关性较小，而与证书和 HTTPS 握手更相关。可能在识别证书中嵌入的备用主题名称方面有所改进，但测试它的一种简单方法是将这行 PowerShell 添加到您的脚本中：

```
[System.Net.ServicePointManager]::ServerCertificateValidationCallback = { $true } 
```

这将导致所有证书都被接受 - 无论它们是否受信任、是否过期等。这是一个大锤子，在生产环境中使用它是不明智的，但它可能有助于诊断什么它在您的设置中进行。

您可以在 MSDN 页面上查看有关[ServerCertificateValidationCallback](http://msdn.microsoft.com/en-us/library/system.net.security.remotecertificatevalidationcallback.aspx)的更多信息，包括它传递给委托的参数。理论上，您可以将您在该服务器上使用的证书列入白名单，并为该服务器返回 true。

# python - 使用 numpy 检测形状以获取人的图像

> ID：14710451
> 
> 赞同：1
> 
> 时间：2013-02-05T14:59:16.410
> 
> 标签：python, numpy, scipy, python-imaging-library

我正在尝试不使用`opencv`.

*   我正在过滤图像以查找图像的边缘。

*   为了清晰起见，我正在加宽图像的边缘。

*   我想识别图像中的形状，例如面部的圆形或识别眼睛的形状，例如圆形或方形。

是否有任何代码或教程可帮助我检测图像中的形状，主要是一群人或一张人的照片？

我不想用`opencv`这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-21T11:30:26.927

嗯，霍夫变换 (HT) 是检测形状的最常用方法之一（如果这是您想在人脸检测代码中采用的方法）。

可以仅使用 numpy 从头开始​​编写代码，或者，如果您想采用更简单的方法，可以查看 scikit-image [Circular and Elliptical Hough Transforms](http://scikit-image.org/docs/dev/auto_examples/edges/plot_circular_elliptical_hough_transform.html)

它可能不会像opencv那样快或广泛（就处理选项而言），但它应该足够了。

# javascript - Knockout 如何限制表单的哪个部分可见

> ID：14710453
> 
> 赞同：0
> 
> 时间：2013-02-05T14:59:18.250
> 
> 标签：javascript, knockout.js

在一个游戏论坛上，有人请求一种“生成”咒语的方法。这可能会让您感到困惑，但这就是他们需要“生成”咒语的原因。此游戏（Topia Online）中的所有法术都必须由用户编码。（或从其他用户处购买）。因此，任何不擅长编码的人都不会拥有良好的自定义咒语。我在这里做了一个简单的应用程序[（JSFiddle）](http://jsfiddle.net/NovaPlasm/BHg8J/)

它接受用户输入的咒语类型（火、水等），然后显示该类型独有的咒语形式。在 IRC 聊天中（游戏开发者）告诉我要使我的代码更小，使用 Knockout。我没有使用淘汰赛，我想知道这里是否有人可以给我一个示例/链接，说明当用户在上一个下拉列表中选择特定选项时如何显示自定义下拉列表。例如：

这是页面上显示的唯一下拉列表：

|-选择拼写-|

假设用户选择火作为他的咒语。现在页面看起来像这样：

|火|

|-选择拼写形式-|

并且上述下拉列表的选项是

|消防子弹 - 第 1 层| |火球 - 第 2 层| |防火墙 - 第 3 层|

仅当用户选择火时，我如何才能使特定的 Select Form of Spell 下拉菜单出现？（如果他们选择水，它会显示另一种自定义形式的法术，与地球、空气等相同），使用 KnockOut？

谢谢，如果这以任何方式令人困惑，我们深表歉意。如果您有任何问题，请发表评论

如果 JSFiddle 起作用了，我还有以下 HTML 代码：

```
<select size="1" id="Spell" title="" name="Spell">
<option value="">-Select Your Spell Type-</option>
<option value="fire">Fire</option>
<option value="lightning">Lightning</option>
<option value="plasma">Plasma</option>
<option value="water">Water</option>
<option value="earth">Earth</option>
<option value="air">Air</option>
</select>
<div class="container">
<div class="fire">
    <select class="second-level-select">
        <option value="">-Select The Form of the Spell-</option>
        <option value="fireForm1">Fire Bullet - Tier 1</option>
        <option value="fireForm2">Fire Ball - Tier 2</option>
        <option value="fireForm3">Fire Wall - Tier 3</option>
    </select>
</div>
<div class="lightning">
    <select class="second-level-select">
        <option value="">-Select The Form of the Spell-</option>
        <option value="lightningForm1">Electrified Bullet - Tier 1</option>
        <option value="lightningForm2">Smite - Tier 2</option>
        <option value="lightningForm3">Electrified Rain - Tier 3</option>
    </select>
</div>
<div class="plasma">
    <select class="second-level-select">
        <option value="">-Select The Form of the Spell-</option>
        <option value="plasmaForm1">Plasma Bullet - Tier 1</option>
        <option value="plasmaForm2">Ball o' Plasma - Tier 2</option>
        <option value="plasmaForm3">Wall of Plasma - Tier 3</option>
    </select>
</div>
<div class="water">
    <select class="second-level-select">
        <option value="">-Select The Form of the Spell-</option>
        <option value="waterForm1">Water Shove - Tier 1</option>
        <option value="waterForm2">Water Fountain - Tier 2</option>
        <option value="waterForm3">Tsunami - Tier 3</option>
    </select>
</div>
<div class="earth">
    <select class="second-level-select">
        <option value="">-Select The Form of the Spell-</option>
        <option value="earthForm1">Rock Bullet - Tier 1</option>
        <option value="earthForm2">Ball of Rock - Tier 2</option>
        <option value="earthForm3">Avalanche - Tier 3</option>
    </select>
</div>
<div class="air">
    <select class="second-level-select">
        <option value="">-Select The Form of the Spell-</option>
        <option value="airForm1">Air Blast - Tier 1</option>
        <option value="airForm2">Levitate - Tier 2</option>
        <option value="airForm3">Funnel Cloud - Tier 3</option>
    </select>
</div>
</div>
    <div class="second-level-container">
<div class="fireForm1">Code will be here for Fire Bullet</div>
<div class="fireForm2">Code will be here for Fire Ball</div>
<div class="fireForm3">Code will be here for Fire Wall</div>
<div class="lightningForm1">Code will be here for Electrified Bullet</div>
<div class="lightningForm2">Code will be here for Smite</div>
<div class="lightningForm3">Code will be here for Electrified Rain</div>
<div class="plasmaForm1">Code will be here for Plasma Bullet</div>
<div class="plasmaForm2">Code will be here for Ball o' Plasma</div>
<div class="plasmaForm3">Code will be here for Plasma Wall</div>
<div class="waterForm1">Code will be here for Water Shove</div>
<div class="waterForm2">Code will be here for Water Fountain</div>
<div class="waterForm3">Code will be here for Tsunami</div>
<div class="earthForm1">Code will be here for Rock Bullet</div>
<div class="earthForm2">Code will be here for Ball of Rock</div>
<div class="earthForm3">Code will be here for Avalanche</div>
<div class="airForm1">Code will be here for Air Blast</div>
<div class="airForm2">Code will be here for Levitate</div>
<div class="airForm3">Code will be here for Funnel Cloud</div> 
```

下面的JS代码：

```
$(document).ready(function () {
$('#Spell').bind('change', function () {
    var elements = $('div.container').children().hide(); // hide all the elements
    var value = $(this).val();

    if (value.length) { // if somethings' selected
        elements.filter('.' + value).show(); // show the ones we want
    }
}).trigger('change');

$('.second-level-select').bind('change', function () {
    var elements = $('div.second-level-container').children().hide(); // hide all the elements
    var value = $(this).val();

    if (value.length) { // if somethings' selected
        elements.filter('.' + value).show(); // show the ones we want
    }
}).trigger('change');
}); 
```

# java - Axis2如何限制一个Web服务

> ID：14710455
> 
> 赞同：1
> 
> 时间：2013-02-05T14:59:37.517
> 
> 标签：java, web-services, axis2

我有两个网络服务。我用于移动应用程序以从数据库中选择/更新数据的一种。我被要求为第三方编写另一个 Web 服务，以从我们的数据库中收集公共数据。我不希望我的第一个服务公开。如果我将我的 Web 服务的链接提供给任何人，他们也可以看到我的其他 Web 服务 例如，

[http://server.mydomain.com/axis2/services/WebService?wsdl](http://server.mydomain.com/axis2/services/WebService?wsdl)

任何人都可以使用列出我的所有服务

[http://server.mydomain.com/axis2/services/listService](http://server.mydomain.com/axis2/services/listService)

有没有办法让我向公众隐藏我的一项服务？

任何的想法？？？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:20:24.363

基本 URL 相同，因此，是的，用户可以看到所有服务。但这并不意味着他们也可以访问它。您可以通过设置一些身份验证/授权来限制访问。

但如果你不想让人们知道它。我建议最好把它放在一个单独的 Axis 引擎中。让你的网址变得不一样。

# android - 如何检查 MediaPlayer 是否已发布（）？

> ID：14710456
> 
> 赞同：5
> 
> 时间：2013-02-05T14:59:39.280
> 
> 标签：android

我想检查 MediaPlayer 是否已发布 - 如何检查？我发现 isPlaying 生成异常而不是 false - 如何以简单的方式执行它很复杂。

```
 mediaPlayer = new MediaPlayer();
    mediaPlayer.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {
        @Override
        public void onCompletion(MediaPlayer mp) {
            mediaPlayer.release();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T15:06:12.353

我认为没有办法通过 MediaPlayer 类本身来做到这一点。

`true`最简单的做法是在创建和重置时设置为全局变量。它设置为`false`发布。

```
boolean mIsPlayerRelease = true;

mediaPlayer = MediaPlayer.create(myContext, soundId); // ready to play
mIsPlayerRelease = false;

....
mediaPlayer.reset();   // ready to play again
mIsPlayerRelease = false;

....

mediaPlayer.release(); // can't be played until release.
mIsPlayerRelease = true; 
```

**编辑：**

您可以通过将创建放在 an 中`AsyncTask`并在完成时设置变量来解决阻塞问题。

```
private class MediaCreator extends AsyncTask<Integer, Void, Boolean> {

   WeakReference<Context> mCtx;

   public MediaCreator(Context ctx) {
      mCtx = new WeakReference(ctx);
   }

   @Override
   protected Boolean doInBackgroind(Integer.... params) {
      final Context ctx = mCtx.get();
      if(ctx == null || params == null || params.length == 0) {
         return false;
      }

      mediaPlayer = MediaPlayer.create(ctx, params[0];
   }

   @Override
   protected void onPostExecute(Boolean success) {
      if(success) {
          mIsPlayerRelease = false;
      } else {
          mIsPlayerRelease = true;
      }
   }
} 
```

您可以将此类放在正在处理的任何类中`mediaPlayer`。开始它

```
MediaCreator creator = new MediaCreator(myContext);
creator.execute(R.id.mySoundId); 
```

该方法`doInBackground`将在单独的线程上创建和缓冲媒体播放器。它将在创建后返回，`onPostExecute()`并将在主线程上调用，`false`如果创建了播放器，则将布尔值设置为。

# java - setText("test") 正在冻结 UI

> ID：14710458
> 
> 赞同：0
> 
> 时间：2013-02-05T14:59:41.323
> 
> 标签：java, android

我不明白

我有一个后台线程，它获取 cpu 负载，然后将其设置为文本视图

问题是执行 setText() 方法时 UI 冻结了一秒钟，当滚动浏览 ui 的其他元素时我能感觉到它

```
Runnable runnable = new Runnable() {
        @Override
        public void run() {
            while(thread) {
                try {
                    RandomAccessFile reader = new RandomAccessFile("/proc/stat", "r");
                    String load = reader.readLine();

                    String[] toks = load.split(" ");

                    long idle1 = Long.parseLong(toks[5]);
                    long cpu1 = Long.parseLong(toks[2]) + Long.parseLong(toks[3]) + Long.parseLong(toks[4])
                        + Long.parseLong(toks[6]) + Long.parseLong(toks[7]) + Long.parseLong(toks[8]);

                    try {
                        Thread.sleep(360);
                    } catch (Exception e) {
                        }

                    reader.seek(0);
                    load = reader.readLine();
                    reader.close();

                    toks = load.split(" ");

                    long idle2 = Long.parseLong(toks[5]);
                    long cpu2 = Long.parseLong(toks[2]) + Long.parseLong(toks[3]) + Long.parseLong(toks[4])
                        + Long.parseLong(toks[6]) + Long.parseLong(toks[7]) + Long.parseLong(toks[8]);

                    fLoad =  (float)(cpu2 - cpu1) / ((cpu2 + idle2) - (cpu1 + idle1));

                } catch (IOException ex) {
                        }
                final int load =(int) (fLoad*100);
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                }
                mHandler.post(new Runnable() {
                        @Override
                        public void run() {

                            setCpuLoad(load);
                        }
                    });
            }
        }
    };
    new Thread(runnable).start();
} 
```

.

```
 private final void setCpuLoad(int load){
    cpuLoad.setProgress(load);
    cpuLoadTxt.setText(load+"%");
} 
```

我尝试了很多东西，最终发现问题出在 setText() 中，因为当我评论它时 UI 很流畅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:11:30.647

签出您在哪个线程中创建处理程序。您应该在主 (UI) 线程上执行此操作。

# jquery - 来自带有 JQuery 的网格数据源的 KendoUI 图表数据源不会呈现

> ID：14710461
> 
> 赞同：0
> 
> 时间：2013-02-05T14:59:45.653
> 
> 标签：jquery, kendo-ui, grid, datasource, kendo-chart

我要做的是根据我页面上 KendoUI crid 的内容动态呈现图表。这发生在网格的 DataBound 事件中。当我尝试下面的代码时，似乎 gchart 的空间是在页面上分配的，但没有任何 rnders。我可以通过 Firebug 看到数据源数据在图表中。我还可以看到图表的图例将呈现但没有图表。我应该提到，没有模型传递给这个图表。此外，我尝试对测试数据进行硬编码并将我的数据源设置为该数据源，但仍然没有渲染图表。

```
function onDataBound(arg) {
    gridDataSource = arg.sender.dataSource;
    if (gridDataSource.group().length > 0) {

        var theChart = $("#chart").data("kendoChart");

        theChart.options.series[0].field = "VALVAL_ALT_CMB_AMT";
        theChart.options.series[0].categoryField = "RCD_NUM";
        theChart.options.series[0].data = gridDataSource._data;
        theChart.refresh();

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:55:01.143

我找到了问题的答案——我不能只将数据源从网格设置到图表。我需要首先创建一个新的数据源，然后将其中的数据属性设置为网格中的数据......然后在图表上设置数据源，它就可以工作了

# android - 使用意图将位图从一个活动发送到另一个活动时，为什么 Xoom 会崩溃？

> ID：14710465
> 
> 赞同：0
> 
> 时间：2013-02-05T15:00:06.967
> 
> 标签：android, bitmap, xoom

在我的应用程序中，我截取当前屏幕的屏幕截图（使用`view.getDrawingCache`）并使用意图将其作为位图发送到另一个活动。

我已经在 Galaxy Note 1、HTC one v 和 Motorolla Xoom mz 604 平板电脑（10.1"）上进行了测试。在前两个设备上，代码工作正常。但在 Xoom 平板电脑上，代码不起作用：平板电脑开始等待很长一段时间，然后应用程序崩溃。

这背后的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:09:00.010

我客人的问题是因为`OutOfMemoryError: bitmap size exceeds VM budget`

为了摆脱这个问题，您可以尝试创建一个静态变量，然后在第二个活动中访问，而不是将位图发送到意图中。

**或者**

您可以将位图保存在内部存储器中，并在第二个活动中发送该位图的路径。

因此，请发布更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:10:09.617

屏幕截图的位图在平板电脑上可能会变得非常大，因为屏幕分辨率可能更高。问题可能是内存问题。为了克服这个问题，您可以将位图写入临时文件并将文件的路径发送到活动。

或者，如果您要启动的活动在同一个应用程序中，您可以使用全局变量来保存位图。

# java - MyEclipse 中的一些格式

> ID：14710468
> 
> 赞同：0
> 
> 时间：2013-02-05T15:00:15.177
> 
> 标签：java, eclipse, code-formatting

我使用 MyEclipse 在 JAVA 上制作项目。当我在 MyEclipse 中创建一个新类时，它会以这种格式创建该类：

```
class  A {

} 
```

IE; 它将“{”放在放置“A 类”的同一行中。但我想要这种格式：

```
class A
{

} 
```

我知道这无关紧要。但如果可以发生，对我来说会更舒服。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:07:03.483

1.  导航到`Window`> `Preferences`> `Java`> `Code Style`>`Formatter`
2.  点击`New...`按钮
3.  输入“个人资料名称”
4.  点击`OK`按钮
5.  选择`Braces`选项卡
6.  对于“类或接口声明”下拉菜单，选择`Next line`
7.  点击`OK`按钮
8.  点击`OK`按钮

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:04:44.213

您可以在 Window -> Preferences-> Java -> Code Style -> Formatter 中编辑此行为

# ruby-on-rails - 使用 rails runner 的未定义方法

> ID：14710469
> 
> 赞同：6
> 
> 时间：2013-02-05T15:00:23.340
> 
> 标签：ruby-on-rails, ruby-on-rails-3, whenever, runner

[我随时](https://github.com/javan/whenever)都在使用 gem ，但我的跑步者指令无法正常工作。

我收到此错误：

```
/Users/bl0b/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.11/lib/rails/commands/runner.rb:53:in `eval': undefined method `run' for #<Class:0x007f97d88744a8> (NoMethodError)
    from (eval):1:in `<top (required)>'
    from /Users/bl0b/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.11/lib/rails/commands/runner.rb:53:in `eval'
    from /Users/bl0b/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.11/lib/rails/commands/runner.rb:53:in `<top (required)>'
    from /Users/bl0b/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.11/lib/rails/commands.rb:64:in `require'
    from /Users/bl0b/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.11/lib/rails/commands.rb:64:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

我的代码中有以下代码`shedule.rb`：

```
set :environment, 'development' 

     every 1.minutes do
       runner "Crawler.run", :output => '/Users/bl0b/Projects/crawler/cron.log'  
     end 
```

在我的`app/models/crawler.rb`我有以下代码：

```
class Crawler < ActiveRecord::Base

  def run
    puts "toto"
  end

end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T15:02:38.633

您试图在 上调用类方法`Crawler`，但该方法被定义为实例方法。要使您的方法成为类方法，您可以像这样定义它：

```
def self.run
  puts "toto"
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T05:46:02.057

您可以这样做，如果您不需要将该方法作为类的 self 方法。

```
 every 1.minutes do
   runner "Crawler.new.run", :output => '/Users/bl0b/Projects/crawler/cron.log'  
 end 
```

# c++ - NSClassFromString 等效于 BlackBerry-10

> ID：14710471
> 
> 赞同：1
> 
> 时间：2013-02-05T15:00:34.920
> 
> 标签：c++, ios, blackberry-10

[iOS 的NSClassFromString](http://cocoadev.com/wiki/NSClassFromString)是否在 BlackBerry 10 SDK 中具有等效项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:49:13.460

你不能在 C++ 中原生地做到这一点，C++ 是一种相当静态的语言，它没有 Objective-C 所具有的运行时功能。如果您使用模板机制将所有类名称映射到实例，则可以通过一些硬移植来实现。这在“ [Is there a way to instantiate objects from a string contains their class name?](https://stackoverflow.com/questions/582331/is-there-a-way-to-instantiate-objects-from-a-string-holding-their-class-name) ”中有所描述。

至于BB10 SDK，基于它是Java的假设，这**是**可能的。

```
Class myClassName = Class.forName("ClassName");
ClassName myInstance = myClassName.newInstance(); 
```

**更新：** BB10 SDK 是 C++，因此除了上面提到的之外，没有本地方法可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T12:47:13.930

`NSClassFromString`是的，只要您使用 Qt 元类型系统，就有一个等价物。

您需要使用`Q_DECLARE_METATYPE`宏和`qRegisterMetaType`：

```
class UserClass : public Superclass {
    ...
}

Q_DECLARE_METATYPE(UserClass)

int main(int argc, char *argv[]) {
    qRegisterMetaType<UserClass>("UserClass");

    ....
} 
```

然后您可以使用以下代码创建您的类的实例：

```
int id = QMetaType::type("UserClass");
UserClass *instance = (UserClass*)(QMetaType::construct(id)); 
```

我猜想这种创建对象的方法也被 QML 使用，例如在*attachObjects*部分。

# service - 如何禁用或限制对 opensso / openam 身份服务的访问

> ID：14710474
> 
> 赞同：0
> 
> 时间：2013-02-05T15:00:40.350
> 
> 标签：service, identity, openam, opensso

我想知道如何禁用对 /identityservices/* 和其他 opensso / openam servlet 的访问。

问题是我为强身份验证编写了自己的身份验证模块。/identityservices/* 允许仅使用用户名和密码获取 token.id 的事实在我的情况下不够安全，我想禁用它。

我想我可以通过更改 opensso / openam web.xml 来禁用它，但我想知道是否有任何“更智能”的方法可以做到这一点。

有什么建议吗？感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T04:41:02.793

从 OpenAM 的角度来看，没有其他方法。当然，您可以使用不允许请求这些 URL 的反向代理来“保护”OpenAM。

如果您禁用基于模块的身份验证并且没有允许用户名/密码身份验证的身份验证链，则无论如何可能都不是问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-14T13:21:27.663

OpenAM 文档提到了另一种“最小化 OpenAM 暴露”的方法：分布式身份验证服务。更多信息在这里： http: [//openam.forgerock.org/openam-documentation/openam-doc-source/doc/install-guide/index/chap-install-das.html](http://openam.forgerock.org/openam-documentation/openam-doc-source/doc/install-guide/index/chap-install-das.html)

# .net - 超过 MaxStringContentLength？

> ID：14710476
> 
> 赞同：0
> 
> 时间：2013-02-05T15:00:42.593
> 
> 标签：.net, xml, web-services, asmx

我有一些 .asmx Web 服务，作为 .NET 4.5 上的服务参考导入。

他们下载一个 XML 字符串，然后我尝试使用`XmlDocument`.

好吧，现在我收到此错误：*读取 XML 数据时已超出最大字符串内容长度配额 (8192)。可以通过更改创建 XML 阅读器时使用的 XmlDictionaryReaderQuotas 对象的 MaxStringContentLength 属性来增加此配额*

我该如何解决这个问题？我在 Visual Studio 2010 上，试过[这个](http://geekswithblogs.net/niemguy/archive/2007/12/11/wcf-maxstringcontentlength-maxbuffersize-and-maxreceivedmessagesize.aspx)，但是是 WCF，我找不到那个区域。

在调用 Web 服务的函数之前尝试添加此代码：

```
XmlDictionaryReaderQuotas myConf = new XmlDictionaryReaderQuotas();
myConf.MaxStringContentLength = 202400; 
```

但没有任何改变！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:47:22.493

您必须从配置或创建绑定时更改 MaxStringContentLength。除此之外，它在服务器和客户端上必须相同。如果不是，您可以发送它，但不能接收内容。

# r - 漂亮的波浪号 ~ 来自 R 块和 knitr？

> ID：14710477
> 
> 赞同：7
> 
> 时间：2013-02-05T15:00:42.893
> 
> 标签：r, latex, knitr, pdflatex, typesetting

我在代码块中有一个线性模型，我想在 LaTeX 中很好地显示它。模型调用采用带有波浪号的标准形式 ~ 在 LaTeX 中排版非常糟糕。

```
\documentclass{article}
\begin{document}
<<>>=
lm(Sepal.Width ~ Sepal.Length, data = iris)
@
\end{document} 
```

代码被编织`knitr::knit(mwe.Rnw)`，然后通过 PDFLaTeX 运行。

在 LaTeX 中制作漂亮的波浪线非常烦人，让 knitr 制作它们看起来并不容易，更容易。对 .tex 文件的检查`knit`表明代码被放入了三个环境中，其中`\begin{alltt} ... \end{alltt}`一个是有趣的。但是该软件包`alltt`没有为特殊字符的特殊排版提供任何快速修复。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T15:00:42.893

这个解决方案的灵感来自[yihui 关于 hooks 的示例](https://github.com/yihui/knitr-examples/blob/master/072-latex-reference.Rnw)、[这篇文章](https://tex.stackexchange.com/questions/9363/how-does-one-insert-a-backslash-or-a-tilde-into-latex)和我的好友 RJ。

```
\documentclass{article}
\usepackage{xspace}
\newcommand{\mytilde}{\lower.80ex\hbox{\char`\~}\xspace}
\begin{document}
<<setup, include=FALSE>>=
library(knitr)
hook_source = knit_hooks$get('source')
knit_hooks$set(source = function(x, options) {
  txt = hook_source(x, options)
  # extend the default source hook
  gsub('~', '\\\\mytilde', txt)
})
@
<<results = "hide">>=
lm(Sepal.Width ~ Sepal.Length, data = iris)
@
\end{document} 
```

它还定义了`\mytilde`一般使用的命令。例如，R 代码的内嵌示例：“ `in the form \texttt{response~\mytilde~predictors} ...`”。

该软件包`xspace`不是严格必需的（只要您`xspace`在 newcommand 中删除），但会使该命令更好用。

# jquery - jQuery Colorbox 幻灯片显示不同的内容

> ID：14710485
> 
> 赞同：2
> 
> 时间：2013-02-05T15:01:03.580
> 
> 标签：jquery, slideshow, colorbox

我正在使用 jQuery Colorbox [ [http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox) ] 来制作幻灯片。我似乎无法弄清楚如何让它适用于不同的内容（图像、视频、iframe、内联元素等）

```
<p><a class="image" href="ohoopee1.jpg" rel="slideshow">An image</a></p> 
<p><a class="video" href=""http://www.youtube.com/embed/617ANIA5Rqs?rel=0&amp;wmode=transparent" rel="slideshow">a Youtube video - should be iframed</a></p> 
<p><a class="page" href="http://stackoverflow.com" rel="slideshow">a page, should be iframed.</a></p> 
<p><a class="image" href="ohoopee2.jpg" rel="slideshow">Another image</a></p> 
```

在此示例中，有图像和 iframe。如果我使用

```
<script>
$("a[rel="slideshow"]").colorbox({slideshow:true});
</script> 
```

youtube 和 iframe 不显示（无法加载内容）

我测试了另一种方法，它有效，但它首先显示所有图像，然后是视频（不按顺序）。像这样：

```
<script>
  var $slideshow = $('.image').colorbox({...}); 
  $slideshow.push ( $('video').colorbox({iframe:true, ...})); 
  $slideshow.eq(0).click();
</script> 
```

请记住，我需要他们按顺序展示，我们将不胜感激，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T13:49:22.663

您可以在元素上使用 rel 属性（就像您目前拥有的一样），但我建议您使用 colorbox 的 rel 属性。你可以这样做：

```
$('.image').colorbox({rel:'slideshow', slideshow:true});
$('.iframe, .video').colorbox({iframe:true, width:500, height:500 rel:'slideshow', slideshow:true}); 
```

您需要分别指定图像和 iframe 的设置，但它们需要具有相同的 rel 属性值，以便插件知道它们应该组合在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:39:36.167

它可能无法正常工作，因为：

```
<script>
$("a[rel="slideshow"]").colorbox({slideshow:true});
</script> 
```

如果您注意，您应该注意到您的引号不正确，这应该会给您一个解析错误。

更改为以下内容：

```
<script>
$('a[rel="slideshow"]').colorbox({slideshow:true});
</script> 
```

注意选择器开头和结尾的单引号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T17:58:08.877

如果您查看文档，请`.colorbox({slideshow:true})`设置带有自动幻灯片的图片库

# ruby - VSphere 和雾

> ID：14710487
> 
> 赞同：1
> 
> 时间：2013-02-05T15:01:14.137
> 
> 标签：ruby, fog, vsphere

尝试并尝试使用 vsphere 提供程序在雾 1.9 中做一些非常简单的事情。那里的小文档中的示例对我不起作用。

我想列出一个文件夹中的所有虚拟机。简单吧？

试过...

```
credentials = {
    :provider => "vsphere",
    :vsphere_username => user,
    :vsphere_password=> pass,
    :vsphere_server => "vc_name",
    :vsphere_ssl    => true,
    :vsphere_expected_pubkey_hash => "1466f20c1b3f990a2a018dc2ca22a79fc2d0284ab4aac534c47blah"
}

compute = Fog::Compute.new(credentials)
vms = compute.servers.all('folder' => '/Datacenters/Ewl/Self-Service')

pp vms 
```

这将连接并搅动并返回数据中心中的所有虚拟机，而不仅仅是文件夹。Grr。

我在文件夹变量上尝试了很多变体，例如

```
vms = compute.servers.all('folder' => '/Hosts & Clusters/Ewl1_vm/Self-Service')
vms = compute.servers.all('folder' => 'Self-Service')
vms = compute.servers.all('folder' => 'Self-Service','datacenter' => 'Ewl') 
```

但所有人都做同样的事情。

我已经完成了代码，但它并没有真正帮助我。

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T21:24:54.820

如果我了解您的数据中心和文件夹名称是什么，那么简单的方法是：

```
vms = compute.list_virtual_machines(datacenter: 'Ewl', folder: 'Self-Service') 
```

.servers.all 过滤器中的“文件夹”假设应该可以工作，但是您一定会发现隐藏路径、超过 1 个数据中心等的惊喜。

# c++ - 使用 live555 渲染 RTSP H.264 视频流

> ID：14710493
> 
> 赞同：1
> 
> 时间：2013-02-05T15:01:22.300
> 
> 标签：c++, h.264, live555

我很欣赏使用 Live555 库将实时流呈现到屏幕的示例。显然它很简单，但看到它完成而不是简单地阅读“它很简单”真的会有所帮助！gmane[网站](http://comments.gmane.org/gmane.comp.multimedia.live555.devel/9109)指出：

“更新（副本）“testRTSPClient”代码以使其渲染视频数据非常简单：您只需更改“DummySink”类，以便*它*进行渲染（或调用解码器库进行渲染） ). 特别是，您将更改“afterGettingFrame()”函数的实现 - 在第 479 行。就是这样！

（实际上，对于 H.264 视频，您可能还需要做一件事。H.264 流具有带外配置信息（SPS 和 PPS NAL 单元），您可能需要将这些信息提供给解码器对其进行初始化。要获取此信息，请调用“MediaSubsession::fmtp_spropparametersets()”（在视频“子会话”对象上）。这将为您提供（ASCII）字符串。然后您可以将其传递给“parseSPropParameterSets() ", 为你的解码器生成二进制 NAL 单元。) "

PS：我正在使用visual studio和windows

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:14:08.563

我在以前的工作中做过类似的事情。诀窍是使用 DirectShow 进行渲染。基本上，live555 本身不会解码或渲染任何东西，您需要某种 h264 解码器以及视频表面。幸运的是，DirectShow 两者都提供，但需要大量编程才能开始工作。

live555 仅提供流式传输机制，这意味着它将从网络或文件源获取 NAL 数据包（如果您愿意，可以使用 h264 数据包）并将其推送到“DummySink”，您仍然需要解码（将 NAL 单元转换为位图）和渲染（将位图绘制到屏幕上）。这不是 live555 将为您做的事情，但其他库可以，例如 ffmpeg，但我没有设法让它工作，所以我们转向 DirectShow 解决方案。也就是说，“MS DTV-DVD 解码器”非常有用，可以使用我们正在使用的芯片组提供的一些硬件加速（自动）。live555 的另一个有用特性是它将处理诸如 RTSP 之类的控制协议来处理流的 PLAY/STOP/PAUSE 请求。

编辑：由于您正在搜索代码，我找到了一个开源的[DirectShow 过滤器，它为您使用 live555](http://sourceforge.net/projects/rtspdirectshow/forums/forum/968387/topic/3336346)。您应该能够使用 GraphStudio 或 GraphEdit 之类的工具来运行它。最终，您可以学习如何[在 c++ 中创建 DirectShow 图形](http://msdn.microsoft.com/en-us/library/windows/desktop/dd390351%28v=vs.85%29.aspx)。这实际上并不是很复杂，因为已经存在大量示例。最困难的部分是创建过滤器，但解码器和渲染器已经为您准备好了，我已经为您提供了 Source filter 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-20T15:31:50.053

[视频处理项目](http://sourceforge.net/projects/videoprocessing/)中提供了另一个在 Windows 上使用 live555 的代码示例。像 Eric 的建议一样，它使用 DirectShow（这是 Windows pre MediaFoundation 上的标准方式。使用 live 的代码可以在[这里](http://sourceforge.net/p/videoprocessing/code/HEAD/tree/trunk/videoprocessing/Source/Filters/DirectShow/RtspSourceFilter/RtspClientSessionManager.cpp)找到。

如果您使用的是 Windows 7，则有一个内置的 H.264 解码器，当您渲染图形时，它将被插入到媒体管道中。在早期版本的 Windows 上，您必须安装自己的 H.264 解码器过滤器。

免责声明：我是视频处理项目的作者之一。

# php - Codeigniter 路由和 REST 服务器

> ID：14710509
> 
> 赞同：4
> 
> 时间：2013-02-05T15:02:27.523
> 
> 标签：php, codeigniter, rest, codeigniter-routing, codeigniter-restserver

我正在尝试为我的 API 实现以下 URL（我正在使用 Codeigniter 和 Phil Sturgeon 的[REST 服务器库](https://github.com/philsturgeon/codeigniter-restserver)）：

```
/players            -> refers to index method in the players controller
/players/rookies    -> refers to rookies method in the players controller 
```

我不希望 URL 有一个尾随的“索引”

```
/players/index 
```

当我像这样定义路由时，这根本没有问题：

```
$route['players'] = 'players/index'; 
```

一切都按预期工作。

我的问题是我需要额外的 URL 段，如下所示：

```
/players/rookies/limit/10/offset/5/key/abcdef 
```

上面的示例有效，但以下示例无效：

```
/players/limit/10/offset/5/key/abcdef 
```

我收到以下错误：`{"status":false,"error":"Unknown method."}` 显然我的控制器中没有`limit`方法。

如何设置我的 routes.php 配置文件以使这些 URL 正常工作？

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T18:59:02.633

```
//www.mysite.com/players
$route['players'] = 'players/index_get';//initial call to players index

//www.mysite.com/players/rookies
/** overrides the above **/
$route['players/(:any)'] = 'players/index_get/$1';//Changing defaults index

//www.mysite.com/players/rookies/10/4
/** overrides the above **/
$route['players/(:any)/(:num)/(:num)'] = 'players/index_get/$1/$2/$3';//Changing type,limit,offset

//All routes that are similar, like above that follow the previous, override the preceding one. 

//www.mysite.com/players/create
//overrides $route['players/(:any)']
$route['players/create'] = 'players/index_post';

class Players extends REST_Controller
{
    public $player_types = array();

    public function __construct(){
       $this->player_types = array(
          'rookies', 'seniors'
       );//manual assign or pull from db
    }
    /**
     * Index
     * $_GET
    **/
    public function index_get($type='rookies',$offset=0, $limit=0)//some defaults to show on initial call
    {
        // www.mysite.com/players/rookies
        // $route['players/(:any)'] = 'players/index_get/$1';
        // First uri segment, check to see if its a valid player 'type'

        if(!in_array(strtolower($type), $this->player_types)){
             //redirect ?
             return;
        }
    }
    /**
     * Index
     * $_POST
    **/
    public function index_post()
    {
        // Create a new player
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:42:50.987

gregory，正如你所说的“/players 指的是玩家控制器中的索引方法”，这意味着如果你的路由是干净的，你不需要有 $route['players'] = 'players/index' 。

您可以拥有任意数量的段，并获取 URI 类以在脚本中区分它们。这意味着这个 URL “/players/rookies/limit/10/offset/5/key/abcdef” 默认应该指向你的玩家控制器，rookies() 方法。以下是获取细分的方法：

```
function rookies () {
    //$this->uri->segment (1); would return 'players' or 'limit'
    //$this->uri->segment (8); would return 'abcdef' or false
} 
```

除了 /players/limit 工作：

```
function limit () {
    $this->rookies();
} 
```

**编辑 1**

这是另一种方法：

路由规则：

```
$route['/players/rookies/limit/(:num)/offset/(:num)/key/(:any)'] = "players/get"
$route['/players/limit/(:num)/offset/(:num)/key/(:any)'] = "players/get" 
```

在控制器中

```
function get () {
    //work with segments
} 
```

# couchdb - 如何确保已复制和复制器 couchdb 同步？

> ID：14710512
> 
> 赞同：0
> 
> 时间：2013-02-05T15:02:39.707
> 
> 标签：couchdb, replication

Couchdb 在 server1 上运行，并且在 server2 上设置连续复制，这将与 server1 同步。我正在编写一个脚本，它将验证两台服务器上的 couchdb 数据库是否同步。

我无法使用每个数据库的 doc_count 进行验证，因为它不会考虑数据库的每个文档中的单个文件。所以，我想使用两个数据库的 update_seq ，但是两个数据库的 update_seq 是不同的。常见的观察是 update_seq 在复制数据库中较少。

无论如何（或任何属性）我可以验证复制器和复制的 couchdb 上的数据库是否同步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:41:13.807

看看这个线程： [http ://comments.gmane.org/gmane.comp.db.couchdb.user/8802](http://comments.gmane.org/gmane.comp.db.couchdb.user/8802)

使用 HTTP 代理查看复制流量会更有意义。使用提琴手或查尔斯。

您会看到本地数据库正在查看 /_active_tasks，您可以看到文档是如何复制的，并更好地了解如何监控状态。

# php - 仅显示部分文件缩略图

> ID：14710513
> 
> 赞同：0
> 
> 时间：2013-02-05T15:02:39.580
> 
> 标签：php, javascript, html, css

我正在使用一切正常将一些文件导入文件夹，并且所有文件都正常插入，但是当我尝试在浏览器上显示这些文件的缩略图时，问题就开始了。在这种情况下，只有一些文件可以完美显示，而其他文件则显示为空矩形！虽然所有文件都位于同一个文件夹中！我进行了更多调查，并意识到其原始来源（在计算机上）接近文件夹路径的图像正在完美显示，而其他图像则没有。

例如，我的文件夹位于：c://xampp/htdocs/test/folder 我已将所有图片放在文件夹中，但仅显示最初在 c://xampp/htdocs/test 上可用的图像，而不是其他。

请帮我

编码：

```
 $images=array();  
    $dir_handler = opendir('test/folder') or die("Unable to open $path");  
    $i=0;    
    while($file = readdir($dir_handler))
    {            
    if(is_dir($file)) 
    continue;        
    else if($file != '.' && $file != '..' && $file != 'index.php')
    {                    
    $images[$i]=$file;
    $i++;     
    }       
    }      
    sort($images);

    for($i=0; $i<sizeof($images); $i++) 
    {              

    echo "<a href=".chr(34).$path.$images[$i].chr(34)."><img style='border:1px solid #666666; width:100px;height:100px; margin: 10px;' src='".$images[$i]."'/></a>";

    }        closedir($dir); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:06:54.690

我认为您的图像 src 路径应该是`src='folder/".$images[$i]."'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:33:39.527

在这种情况下，使用 SPL 的 Directory 迭代器可能更有帮助。

在此代码示例中，我假设您的路径是“测试/文件夹”——其中包含图像和 index.php 文件。

```
$path = 'test/folder';
foreach (new DirectoryIterator($path) as $fileInfo) {
    if ($fileInfo->isFile() && $fileInfo->getFilename() != 'index.php') {
        $image = "{$path}/{$fileInfo->getFilename()}";
        echo "<a href='{$image}'><img src='{$image}'></a>"; // style as appropriate
    }
} 
```

这会在您的路径上创建一个新的 DirectoryIterator。然后，如果结果确实是一个文件，而不是名为 index.php，则变量 $image 将填充路径和文件名。echo 语句具有示例代码的较短版本，用于输出 a/img 标记组合。

# c# - 在应用程序运行时启动进程并更新配置文件。

> ID：14710514
> 
> 赞同：0
> 
> 时间：2013-02-05T15:02:40.817
> 
> 标签：c#, .net

在我的应用程序中，我使用以下代码通过 app.config 的代码启动一个进程

```
Process proc = Process.Start(@"c:\windows\system32\notepad.exe"); 
```

比我在运行它时必须更改 app.config 文件两到三次。我想知道怎么做，所以我不需要停止和更改 app.config 文件，而是重新启动该过程。

我有在另一篇文章中看到的以下代码。

```
// Load the app.config file
XmlDocument xml = new XmlDocument();
xml.Load(AppDomain.CurrentDomain.SetupInformation.ConfigurationFile);

// Do whatever you need, like modifying the appSettings section

// Save the new setting
xml.Save(AppDomain.CurrentDomain.SetupInformation.ConfigurationFile); 
```

我想知道最后一行是否保存了进程仍在运行时正在完成的新设置？还是需要重新启动流程？我的目标是我不需要继续重新启动该过程。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:14:43.327

所以在 WCF 中，app.config 的目的是让*管理员*能够对服务进行更改，而无需重新编译代码（他们通常不知道如何做，或者没有工具去做）。如果您正在编写代码，则无需更改 app.config 文件，因为您是程序作者。

请记住，如果您只是想在不同的地址（绑定或您拥有什么）重新托管，那么只需关闭服务并在代码中重新启动它，例如：

[WCF 自托管服务 - C# 中的端点](https://stackoverflow.com/questions/2807525/wcf-self-host-service-endpoints-in-c-sharp)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:14:50.303

如果不想重启子进程，则需要使用进程间通信（IPC）技术来通知子进程需要刷新它的app.config。您如何做到这一点在一定程度上取决于您的应用程序的规模以及您将从 IPC 链接中获得多少使用。

请参阅[此 SO 帖子](https://stackoverflow.com/q/528652/424963)以讨论 C# 中最简单的 IPC 使用。[这篇文章](https://stackoverflow.com/q/6973854/424963)是您需要在子进程中调用以更新它的 app.config 的代码

**编辑：**

我找到了一篇更好的帖子来解释[进程间通信的其他选项](https://stackoverflow.com/q/50153/424963)。

# c# - 在 Windows phone 8 应用程序中更改 Panaroma 的标题

> ID：14710523
> 
> 赞同：1
> 
> 时间：2013-02-05T15:03:07.973
> 
> 标签：c#, xaml, windows-mobile

我正在制作 Windows 手机应用程序，它是一个全景应用程序。我想更改应用程序标题的字体颜色和样式。我使用了包括“文本块”然后自定义文本块的字体样式的技术。但它没有奏效。

怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T16:46:24.903

您要更改全景图的标题模板：

```
<controls:panorama title="my application" titletemplate="{StaticResource SmallPanoramaTitle}"> 
```

这是模板：

```
 <application.resources>
            <datatemplate x:key="SmallPanoramaTitle">
                <contentpresenter>
                    <textblock text="{Binding}" fontsize="50" margin="0,70,0,0" />
                </contentpresenter>
            </datatemplate>
    </application.resources> 
```

这将使您完全改变标题的外观。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-04T10:47:52.443

在 VS2012 中，我需要使用正确的大小写来设置 VB.NET：

```
<phone:Panorama Title="my application" TitleTemplate="{StaticResource SmallPanoramaTitle}"> 
```

并在 App.xaml 文件中

```
<Application.Resources>
    <DataTemplate x:Key="SmallPanoramaTitle">
        <ContentPresenter>
            <TextBlock Text="{Binding}" FontSize="50" Margin="0,70,0,0" />
        </ContentPresenter>
    </DataTemplate>
</Application.Resources> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T15:13:49.713

如果这是你想要做的： ![在此处输入图像描述](../Images/1e53e89ac9301839a2d568e7a387bfff.png)

您只需要更改全景元素的样式。

这是上图的代码

```
 <Grid x:Name="LayoutRoot">
    <Grid.Resources>
        <Style TargetType="phone:Panorama">
            <Setter Property="Foreground" Value="red"/>
        </Style>
    </Grid.Resources>
    <phone:Panorama Title="my application">
    </phone:Panorama>
</Grid> 
```

如果您不知道如何创建样式，请创建当前元素样式的副本并根据自己的喜好进行编辑。我在这里为另一个 SO 用户写了一篇[博客文章](http://www.irisclasson.com/2012/07/22/example-winrtmetro-app-how-to-edit-default-template-in-visual-studio-2012-and-blend/)，如何做到这一点:)

希望这可以帮助！

# c# - Webapi中的TcpListener使用C#

> ID：14710526
> 
> 赞同：-2
> 
> 时间：2013-02-05T15:03:21.223
> 
> 标签：c#, asp.net-web-api, tcplistener

是否有任何关于在 webapi 项目中运行线程的示例代码或启动文档。我有第 1 组客户端设备并希望它们（第 1 组）使用 tcp 通信与 webapi 通信，并有第 2 组客户端设备并希望它们（第 2 组）使用 http get/posts 与 webapi 通信。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:06:56.353

我强烈反对你这样做。WebApi 项目（自托管除外）由 IIS 应用程序池控制。这意味着项目可以随时关闭/重新启动。

换句话说：您不能保证您的 TCP 侦听器一直在 IIS 项目中运行。

这听起来更像是您想使用 WebSockets 与您的用户进行通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:20:47.000

你真的，真的需要它吗？如果您正在 ASP.NET Web 中寻找“实时”功能，您应该查看 SignalR

[http://signalr.net/](http://signalr.net/)

但是，在另一篇文章中说，在 IIS 下打开一个 tcp 侦听器是一个非常糟糕的主意。

# python - python - 如何从导入的模块实时重定向STDOUT到python中的Tkinter Text Widget？

> ID：14710529
> 
> 赞同：5
> 
> 时间：2013-02-05T15:03:21.017
> 
> 标签：python, redirect, printing, tkinter, stdout

我正在尝试使用 Windows 7 上的 Python 2.7.2 实时将标准输出重定向到 Tkinter Text 小部件。在下面的代码中，我打算每 2 秒在 Text 小部件中出现一个打印语句。相反，发生的是所有 3 行

```
Received sleep-command
Going to sleep for 2 s
Just woke up 
```

一旦 sleep() 和 mod1.main() 都被评估过，就会同时出现。

令人惊讶的是（至少对我而言）当我不重定向标准输出时问题就消失了。也就是说，如果我注释掉该行

```
sys.stdout = StdoutRedirector(outputPanel) 
```

IDLE 实时显示打印语句。有人可以向我解释一下并提出解决方法吗？提前致谢！

这是我的示例代码：

mod1.py

```
import time
import sys

def main():
    print('Going to sleep for 2 s')
    time.sleep(2)
    print('Just woke up') 
```

text_GUI.py

```
from Tkinter import *
import sys
import time
import mod1

old_stdout = sys.stdout

class StdoutRedirector(object):

    def __init__(self, text_area):
        self.text_area = text_area

    def write(self, str):
        self.text_area.insert(END, str)
        self.text_area.see(END)

def sleep():
    print('Received sleep-command')
    time.sleep(2)
    mod1.main()

root = Tk()

# Textbox
outputPanel = Text(root, wrap='word', height = 11, width=50)
outputPanel.grid(column=0, row=0, columnspan = 2, sticky='NSWE', padx=5, pady=5)
sys.stdout = StdoutRedirector(outputPanel)

# Sleep button
sleepBtn = Button(root, text='Sleep', command=sleep)
sleepBtn.grid(row=1, column=1, sticky='E', padx=5, pady=5)

root.mainloop()

sys.stdout = old_stdout 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T15:18:36.713

`sleepBtn.update_idletasks()`在每个`time.sleep(2)`命令之前调用。否则，在睡眠过程结束之前，视图将不会更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-09T12:06:35.267

我创建了一个类，它将标准输出写入调用复制到 tkinter 小部件，无论是标签还是文本。在 Python3.3.1/WindowsXp 上为我工作：

[https://stackoverflow.com/a/16460878/2334951](https://stackoverflow.com/a/16460878/2334951)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-28T10:56:58.677

而不是`sleepBtn.update_idletasks()`，这可能是一个更简洁的解决方案：

放在 `self.text_area.update_idletasks()` 前面 `self.text_area.insert(END, str)`

# gwt - BigInteger 作为 GWT 模型实体中的值持有者

> ID：14710530
> 
> 赞同：0
> 
> 时间：2013-02-05T15:03:35.320
> 
> 标签：gwt, biginteger, gwt-rpc

在大多数情况下，我在模型类中使用 BigInteger 只是为了存储和显示值，没有任何数学运算。这样做的原因（而不是使用字符串）是为了避免转换，因为我使用的服务使用 BigIntegers 操作。BigInteger 的 GWT 实现看起来太重了，所以问题是使用 String 类型更改属性并在服务器端进行转换是否合理。或者它没有区别，因为我不使用客户端上的值进行操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:01:21.537

首先使用 BigInteger 是明智的。只有当观察到的性能影响可以追溯到 BigInteger 处于 pojo 中时，您才需要考虑替代策略。避免事先进行微优化。

还要确保您了解 GWT 中的 BigInteger 支持以及针对该功能记录的错误 - [http://code.google.com/p/google-web-toolkit/issues/list?can=2&q=BIgInteger](http://code.google.com/p/google-web-toolkit/issues/list?can=2&q=BIgInteger)

# html - 将 XML 转换为具有太多未知数的 html 表

> ID：14710531
> 
> 赞同：0
> 
> 时间：2013-02-05T15:03:35.383
> 
> 标签：html, xml, xslt, html-table

我有一个非常大的 XML 文件的摘录，其中包含很多未知数。这个 XML 文件包含许多概念组，每个概念组可以包含不同数量的语言组/语言，而这些语言组/语言又可以包含不同数量的术语。

```
<mtf>
  <conceptGrp>
    <concept>1</concept>

    <languageGrp>
      <language lang="DE" type="Deutsch"/>

      <termGrp>
        <term>Abbildung</term>
      </termGrp>
    </languageGrp>

    <languageGrp>
      <language lang="PL" type="Polnisch"/>

      <termGrp>
        <term>ilustracja</term>
      </termGrp>
    </languageGrp>

    <languageGrp>
      <language lang="RU" type="Russisch"/>

      <termGrp>
        <term>иллюстрация</term>
      </termGrp>

      <termGrp>
        <term>рисунок</term>
      </termGrp>
    </languageGrp>

    <languageGrp>
      <language lang="CS" type="Tschechisch"/>

      <termGrp>
        <term>vyobrazení</term>

        <descripGrp>
          <descrip type="Autor">MK</descrip>
        </descripGrp>
      </termGrp>
    </languageGrp>
  </conceptGrp>
</mtf> 
```

我需要一个 html 表来满足这些不同的可能性。表格的形式应该是：

对于每种语言（无论有多少）单独一行，对于每个术语单独一行 - 如下所示：重要的是，如果有超过 1 个术语，则将它们视为同义词并显示在与下面的例子。

```
Concept Deutsch Polnisch    Russisch    Tschechisch

1   Abbildung   ilustracja  иллюстрация vyobrazení

1                           рисунок 
```

我的问题：有时第一个 languageGrp 有多个术语，有时第三个，......我试图将 conceptGrps 组合在一起，并且采用复杂的方式没有问题-）这是我的版本，但我必须适应它每个新文件，因为我永远不知道有多少种语言、术语……可能有。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" encoding="utf-8" indent="yes"/>
<xsl:template match="mtf">
  <html>
  <body>
  <h2>Terminologie</h2>
  <xsl:apply-templates/>
  </body>
  </html> 
</xsl:template> 

<xsl:template match="conceptGrp">
<xsl:for-each select=".">
<table>

<tr> <!--Zeile 1-->
<td>Konzept-ID</td>
<xsl:for-each select="languageGrp">
<td><xsl:value-of select="language/@type"/></td> <!--Spalte2-->
</xsl:for-each>
</tr>

<tr> <!--Zeile 2-->
<td><xsl:value-of select="concept"/></td> <!--Spalte1-->
<xsl:for-each select="languageGrp//termGrp[1]">
<td><xsl:value-of select="term"/></td> <!--Spalte2-->
</xsl:for-each>
</tr>

<xsl:if test="languageGrp//termGrp[2]">
<tr>
<td><xsl:value-of select="concept"/></td>
<td><xsl:value-of select="languageGrp[1]//termGrp[2]/term"/></td>
<td><xsl:value-of select="languageGrp[2]//termGrp[2]/term"/></td>
<td><xsl:value-of select="languageGrp[3]//termGrp[2]/term"/></td>
<td><xsl:value-of select="languageGrp[4]//termGrp[2]/term"/></td>
</tr>
</xsl:if>

</table>
</xsl:for-each>
</xsl:template>

</xsl:stylesheet> 
```

有人能以更优雅、更全球化的方式推动我吗？这将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:09:20.667

这是我能想到的最好的设计，但我认为它可以满足您的一切需求：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" encoding="utf-8" indent="yes"/>
  <xsl:key name="kLang" match="languageGrp" use="language/@lang" />
  <xsl:variable name="uniqueLangs"
                select="/mtf/conceptGrp/languageGrp
                  [generate-id() =  generate-id(key('kLang', language/@lang)[1])]" />

  <xsl:template match="mtf">
    <html>
      <body>
        <h2>Terminologie</h2>
        <table>
          <tr>
            <!--Zeile 1-->
            <td>Konzept-ID</td>
            <xsl:apply-templates select="$uniqueLangs" mode="header"/>
          </tr>
          <xsl:apply-templates select="conceptGrp" />
        </table>
      </body>
    </html>
  </xsl:template>

  <xsl:template match="languageGrp" mode="header">
    <td>
      <xsl:value-of select="language/@type"/>
    </td>
  </xsl:template>

  <xsl:template match="conceptGrp">
    <xsl:apply-templates select="languageGrp" mode="maxGroup">
      <xsl:sort select="count(termGrp)" order="descending" data-type="number"/>
    </xsl:apply-templates>
  </xsl:template>

  <xsl:template match="languageGrp" mode="maxGroup">
    <!-- Only use the first group out of the sorting (most termGrps) -->
    <xsl:if test="position() = 1">
      <xsl:apply-templates select="termGrp" />
    </xsl:if>
  </xsl:template>

  <xsl:template match="termGrp">
    <xsl:variable name="pos" select="position()" />
    <xsl:variable name="currConcept" select="../.." />
    <tr>
      <td>
        <xsl:value-of select="$currConcept/concept"/>
      </td>
      <!-- Iterate through all of the distinct languages -->
      <xsl:for-each select="$uniqueLangs">
        <td>
          <!-- Get the term for the current language and position,
                 within the current concept -->
          <xsl:value-of 
            select="$currConcept/languageGrp
                       [language/@lang = current()/language/@lang]
                          /termGrp[$pos]/term"/>
        </td>
      </xsl:for-each>
    </tr>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<html>
  <body>
    <h2>Terminologie</h2>
    <table>
      <tr>
        <td>Konzept-ID</td>
        <td>Deutsch</td>
        <td>Polnisch</td>
        <td>Russisch</td>
        <td>Tschechisch</td>
      </tr>
      <tr>
        <td>1</td>
        <td>Abbildung</td>
        <td>ilustracja</td>
        <td>иллюстрация</td>
        <td>vyobrazení</td>
      </tr>
      <tr>
        <td>1</td>
        <td></td>
        <td></td>
        <td>рисунок</td>
        <td></td>
      </tr>
    </table>
  </body>
</html> 
```

您最初的尝试看起来像是将每个概念放在一个单独的表格中，但这是故意的吗？您是希望每个概念在一个不同的表中只包含该概念的语言，还是在一个表中包含所有可用语言的所有概念？

# python - 使用 pylab 编辑创建的图形

> ID：14710532
> 
> 赞同：1
> 
> 时间：2013-02-05T15:03:36.580
> 
> 标签：python, matlab, matplotlib, figures

在 MATLAB 中，如果需要，您可以编辑图形文件 (.fig) - 是否有使用 pylab 的类似功能？

我可以创建我需要的图像，但它以 .png 的形式出现，我无法控制 - 如果我可以稍微编辑它（例如将图例移到一边，或修改标签）会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:05:24.340

如果你想保存你的情节并稍后编辑它，你应该尝试这个 [线程中给出的提示](https://stackoverflow.com/questions/4348733/saving-interactive-matplotlib-figures)

如果您的绘图在 [I]python shell 中仍然处于活动状态，您可以编辑所有属性并重新绘制。以下示例用于在检查后将图例从默认位置移动到右上角。

```
In [51]: import numpy as np

In [52]: import pylab as pl

In [53]: v = np.arange(10)

In [54]: pl.figure(1)
Out[54]: <matplotlib.figure.Figure at 0x253a250>

In [55]: # if needed, use pl.figure(1) again to make it active

In [56]: pl.plot(v)
Out[56]: [<matplotlib.lines.Line2D at 0x456a450>]

In [60]: pl.legend('v')
Out[60]: <matplotlib.legend.Legend at 0x4591150>

In [61]: pl.show(block=False)

In [62]: # keyword block=False to issue further commands

In [63]: pl.legend('v',loc=2)
Out[63]: <matplotlib.legend.Legend at 0x45962d0>

In [64]: pl.show(block=False)

In [67]: # now the legend is in the upper right corner 
```

# templates - 在 Symfony2 中覆盖 FOS UserBundle（也使用 Fr3d ldap 包）

> ID：14710533
> 
> 赞同：0
> 
> 时间：2013-02-05T15:03:43.927
> 
> 标签：templates, authentication, symfony, twig, fosuserbundle

因为我想覆盖 Symfony2 中 FOS UserBundle 的模板，所以我正在尝试调整我的自定义 UserBundle。

我制作了模板（并遵循与 FOS 捆绑包完全相同的结构），并为每个控制器制作了一个“空”扩展。

但是，一旦我激活覆盖，清除缓存并尝试登录，就会出现错误，我不明白为什么。错误内容如下：

> 在“FOSUserBundle:Security:login.html.twig”中呈现模板（“路由“登录”不存在。”）期间引发了异常。

这是我自己的 SecurityController 例如：

```
<?php

namespace R\Bundle\UserBundle\Controller;

use Symfony\Component\HttpFoundation\RedirectResponse;
use FOS\UserBundle\Controller\SecurityController as BaseController;

class SecurityController extends BaseController
{ } 
```

通过激活覆盖（在清除缓存之前），我的意思是取消注释这一行：

```
<?php

namespace R\Bundle\UserBundle;

use Symfony\Component\HttpKernel\Bundle\Bundle;

class RUserBundle extends Bundle
{
 public function getParent()
 {
    return 'FOSUserBundle'; <-- this line activates or deactivates the override
 }
} 
```

我自己的 UserBundle 中的 login.html.twig 模板应该覆盖 FOS UserBundle 中的模板，它仍然是原始模板的精确副本（如果覆盖未激活，则该模板可以正常工作）。

我假设我也需要以某种方式覆盖路由文件，但是如果我将它们复制到我的自定义 UserBundle 中，错误仍然存​​在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:06:09.730

路线`login`不包括在内。您需要包含它，请参见[步骤 6](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/index.md)：

```
# app/config/routing.yml
fos_user_security:
    resource: "@FOSUserBundle/Resources/config/routing/security.xml" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:57:09.573

该错误实际上是完全不同的：

错误地调用了一个树枝片段（在复杂的模板层次结构中），它仍然包含一个旧的路径名。由于此路径称为登录，因此我确信该错误与我新激活的 UserBundle 有关。所以 Symfony2 将我指向了一个完全错误的位置；在附近的任何地方都找不到错误；）

# sql - 选择最早来的员工

> ID：14710538
> 
> 赞同：0
> 
> 时间：2013-02-05T15:03:57.393
> 
> 标签：sql, oracle

我有以下问题：

> 为每个地点城市选择最早来的员工，显示地点城市和即将到来的日期

我试过关注一个

```
select  e.hiredate  as LOC,d.loc  as COMDATE
from    emp e, dept  d
where   e.hiredate in (
    select  min(e.hiredate) 
    from  emp e
    group by d.loc
) 
```

它显示以下结果

```
17-DEC-80   NEW YORK
17-DEC-80   DALLAS
17-DEC-80   CHICAGO
17-DEC-80   BOSTON 
```

但问题是只有一个 17-DEC-80，所以这意味着它会重复自己，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:05:34.513

结果是来自 的产品`cross join`，您需要提供表之间的关系。前任

```
SELECT  e.hiredate AS LOC,
        d.loc AS COMDATE
FROM    emp e
        INNER JOIN dept d 
            ON e.deptno = d.deptno
WHERE   e.hiredate IN 
        (
            SELECT min(e.hiredate)
            FROM emp e
            GROUP BY d.loc
        ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:12:38.520

如果您需要选择其他字段以及雇用日期/位置，您可以使用`rank()`分析：

```
select *
  from (select e.*, d.loc, rank() over (partition by d.loc order by e.hiredate) rnk
          from emp e
               inner join dept d
                       on d.deptno = e.deptno
       )
 where rnk = 1; 
```

如果您只需要雇用日期和位置，那么只需使用`min()`

```
select min(e.hiredate), d.loc
  from emp e
       inner join dept d
               on d.deptno = e.deptno
 group by d.loc; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T15:13:30.633

您的查询中有交叉联接或笛卡尔积，因为未联接 emp 和 dept 表。JW 的第一个查询的简单版本。并且别名不正确......：

```
select  e.hiredate  as LOC,d.loc  as COMDATE
 from    scott.emp e, scott.dept  d
 where e.deptno= d.deptno -- Cartesian if you not join --
 and e.hiredate in (
     select  min(e.hiredate) 
      from  scott.emp e
      group by d.loc
   )
  / 
```

# javascript - 在 javascript 中使用函数更新 Primefaces 组件值

> ID：14710539
> 
> 赞同：1
> 
> 时间：2013-02-05T15:04:01.423
> 
> 标签：javascript, html, jsf, primefaces

我想更新我的组件值 evry 10 keyup ，所以我编写了以下代码：

```
<h:body>
   //***************************JAVAScript function**************
<SCRIPT LANGUAGE="JavaScript">
 function fnc(){
                length=document.getElementById("aa").value.length;
                 if(length == 10)
                                {
                        document.getElementById("aa").value ="";

                                }

                } 
```

```
<ui:composition template="commonLayout.xhtml">

    <ui:define name="content">
        <section id="main" class="column">
        <h4 class="alert_info">Scannez les bonbonnes puis cliquez sur
            enregistrer :</h4>
        <div class="Saut20px">

            <h:form id="form">
                <p:panel id="panel" header="Register">

                    <br />
                    <p:focus context="panel" />
                    <p:growl id="msgs"></p:growl>

                    <h:outputLabel value="Code Barre :" />

  //*****************call function in onComplete******
   <p:inputText id="aa" value="#{bonBonneManagedBean.sel}">
                        <p:ajax event="keyup" update="koko msgs" oncomplete="fnc()"
                            listener="#{bonBonneManagedBean.ajouterSelected(bonBonneManagedBean.sel)}" />
                    </p:inputText> 
```

但是电话打不通，如果你能帮我找到错误，提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:24:17.793

尝试使用 inputtext 组件的 onkeyup 属性；

```
 <p:inputText id="aa" onkeyup="fnc()" value="#{bonBonneManagedBean.sel}"> 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:02:19.100

您在这里几乎没有问题。首先你的评论，它们可能只存在于这个问题中，而不是代码中，所以我不会谈论它们。

正如**BalusC**所写，您正在使用某种奇怪的脚本标签定义形式我必须承认我从未见过这样的东西。另一方面，您正在使用`section`标签，据我所知，它是 HTML5 标签，并准备好它不适用于不支持 HTML5 的浏览器。

您创建了将在输入字段上的每个事件上调用的 AJAX 事件`keyup`......好吧，这将是很多请求。我建议你避免这种情况。

您的具体问题是您尝试查找 id 为**aa**的元素，但我必须说没有这样的元素。JSF 连接来自命名容器的 ID，因此您的输入将具有这样的 id `form:aa`，如果周围页面中有更多命名容器，则可能还会有更多的 id。您可以检查页面生成的 HTML 代码，并查看输入组件的真实 ID。在另一种情况下，您可以执行以下操作：

```
<p:inputText id="aa" onkeyup="fnc(this)" value="#{bonBonneManagedBean.sel}"/> 
```

使用此解决方案删除`ajax`标签。

并将您的更改`fnc`为：

```
function fnc(inputComponent)
{
  length = inputComponent.value.length;
  if(length == 10)
  {
    inputComponent.value = "";
  }
 } 
```

最后，我真的认为你在玩 JSF 和 JavaScript，我真的看不出这有什么用处。

# kendo-ui - 从 JSON Kendo UI Data 生成多个图表

> ID：14710540
> 
> 赞同：1
> 
> 时间：2013-02-05T15:04:02.600
> 
> 标签：kendo-ui, kendo-dataviz

我有一个 JSON 结果，它返回我想要显示的数据，但问题是它都出现在一个图表上。我想遍历 JSON 并为每个项目生成一个图表（按问题分组的 JSON 对象）

这是 JSON 结构：

```
[{"Question":"At which location is your work based?","OptionTitles": ["opt1","opt2"],"OptionCounts":[2,2]},

{"Question":"In which business unit do you work?","OptionTitles":["opt1","opt2","opt3","opt4"],"OptionCounts":[1,1,1,1]}] 
```

所以对于这些问题对象中的每一个我想显示一个单独的剑道图表，知道如何实现这一点吗？

图表代码：

```
 $("#chartBar").kendoChart({
            theme: "metro",
            dataSource: {
                transport: {
                    read: {
                        url: '/urlToData',
                        dataType: 'json'
                    }
                }
            },
            seriesDefaults: {
              type:"bar"  
            },
            series: [{ name: "OptionTitles[0]", field: "OptionCounts[0]" }],

            categoryAxis: {
              field: "OptionTitles[0]"  
            },
            tooltip: { visible: true },
        }); 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T22:19:30.597

我需要遍历 json，为每个要绑定的图表创建一个新对象

# entity-framework - 如何从实体中删除代理

> ID：14710544
> 
> 赞同：0
> 
> 时间：2013-02-05T15:04:31.243
> 
> 标签：entity-framework, session, proxy

我需要将用户设置（如地址、访问权限等）存储在会话/缓存中，以便通过基本控制器（MVC 项目）访问它们。

当我尝试`User.Address`从会话中到达时，可以想象它说：

> ObjectContext 实例已被释放，不能再用于需要连接的操作。

地址是用户实体的导航属性。

我不想使用 DTO。

有什么解决方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:13:39.993

我同意格特的观点，但我更喜欢这样写。（用于编译时错误检查）

```
public User GetUser(int userId)
{
    using (var db = new MyContext())
    {
        return db.Users.Include( p => p.Address).Single(u => u == userId);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:51:14.373

当您从数据库中获取用户时，您必须`Include`提供地址。例如，像这样的东西（在存储库或服务中）：

```
public User GetUser(int userId)
{
    using (var db = new MyContext())
    {
        return db.Users.Include("Address").Single(u => u == userId);
    }
} 
```

# python - 无法下载原生 Google Drive 文档的 HTML

> ID：14710545
> 
> 赞同：2
> 
> 时间：2013-02-05T15:04:36.853
> 
> 标签：python, google-drive-api, google-api-python-client

我尝试使用此 python 函数下载 Google Drive 文档（使用 Drive 应用程序）。它每次都跳到`# The file doesn't have any content stored on Drive`零件。

```
def download_file(service, drive_file):
  """Download a file's content.

  Args:
    service: Drive API service instance.
    drive_file: Drive File instance.

  Returns:
    File's content if successful, None otherwise.
  """
  download_url = drive_file.get('downloadUrl')
  if download_url:
    resp, content = service._http.request(download_url)
    if resp.status == 200:
      print 'Status: %s' % resp
      return content
    else:
      print 'An error occurred: %s' % resp
      return None
  else:
    # The file doesn't have any content stored on Drive.
    return None 
```

但是我从来没有得到 GDrive 文档的 HTML 内容。我的 mime 设置（HTML Mime 类型）有问题还是应该使用其他 API 函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:33:38.477

您需要导出 Google Doc，而不是下载它。检查[用于导出文件的 Google Drive 文档](https://developers.google.com/drive/manage-downloads#downloading_google_documents)，您需要将您的 URL 替换为以下内容：

```
download_url = file['exportLinks']['text/html'] 
```

# ruby-on-rails - SQLite3::ConstraintException：约束失败：

> ID：14710551
> 
> 赞同：2
> 
> 时间：2013-02-05T15:05:04.820
> 
> 标签：ruby-on-rails, database, ruby-on-rails-3, rails-activerecord

我正在尝试学习 Ruby on Rails，但遇到了需要帮助的问题。我想要做的是用表格创建一个“项目经理”，但是当我填写表格并点击提交时，会显示以下错误：

```
ActiveRecord::StatementInvalid in ProjectsController#create

SQLite3::ConstraintException: constraint failed: INSERT INTO "projects" ("created_at", "description", "end_date", "start_date", "title", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?, ?, ?)

Rails.root: /Applications/XAMPP/xamppfiles/htdocs/IDV450-labb1

Application Trace | Framework Trace | Full Trace
app/controllers/projects_controller.rb:14:in `create' 
```

**项目负责人：**

```
1\.   class ProjectsController < ApplicationController
2.
3\.      def index
4\.        @projects = Project.all
5\.      end
6.
7\.      def new
8\.        @project = Project.new
9\.      end
10.
11\.     def create
12\.       @project = Project.new(params[:project].merge(:user_id => current_user.id))
13.
14\.       if @project.save
15\.         redirect_to projects_path
16\.       else
17\.         render :action => "new"
18\.       end
19\.     end
20\.   end 
```

**项目模型：**

```
class Project < ActiveRecord::Base
    has_and_belongs_to_many :users
    belongs_to :ticket

    attr_accessible :user_id, :title, :description, :start_date, :end_date
end 
```

**新项目的视图：**

```
<%= form_for @project do |f| %>
    <div class="text_field">
        <%= f.label :title%>
        <%= f.text_field :title%>
    </div>
    <div class="text_field">
        <%= f.label :description%>
        <%= f.text_field :description%>
    </div>
    <div class="dropdown">
        <%= f.label :start_date%>
        <%= date_select :start_date, :startdate %>
    </div>
    <div class="dropdown">
        <%= f.label :end_date%>
        <%= date_select :end_date, :enddate %>
    </div>
    <div class="select">
        <%= f.label :title%>
    </div>
    <div class="submit">
        <%= f.submit "Save" %>
    </div>
<% end %> 
```

**数据库模型：**

```
Project:
    - id: int
    - user_id: int
    - title: varchar(50)
    - description: varchar(500)
    - start_date: date
    - end_date: date
    - created_at: datetime
    - updated_at: datetime 
```

**发送的请求参数：**

```
{"utf8"=>"✓",
 "authenticity_token"=>"CrFUjpsRCEWRprSmKtOk4nBxsxrwaII1WKLDWMQWuUI=",
 "project"=>{"title"=>"Foo project",
 "description"=>"A little description"},
 "start_date"=>{"start_date(1i)"=>"2013",
 "start_date(2i)"=>"2",
 "start_date(3i)"=>"7"},
 "end_date"=>{"end_date(1i)"=>"2014",
 "end_date(2i)"=>"3",
 "end_date(3i)"=>"12"},
 "commit"=>"Spara"} 
```

它真的没有说问题是什么，但是当它尝试保存到数据库时它发生在第 14 行。如果我在种子中创建一个项目，它就可以工作！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T13:46:27.457

也许您对项目模型或项目表（可以在 schema.rb 文件中看到）进行了一些验证，但失败了

或者您可以尝试通过从模型中删除所有属性并尝试创建对象来逐步检查创建项目模型

尝试打印 @project 对象并查看其创建时使用的值

你应该使用保存！而不是保存

希望能帮助到你..

:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T20:53:36.233

你的桌子上有什么索引？您要么违反了非空约束（缺少数据），要么违反了唯一性约束（正在插入记录中的重复数据）。

# javascript - dat.gui 如何用代码隐藏菜单

> ID：14710559
> 
> 赞同：9
> 
> 时间：2013-02-05T15:05:25.430
> 
> 标签：javascript, dat.gui

我使用 dat.gui 为我的 Three.js 应用程序制作了一个菜单。它工作正常，我还发现按 h 键可以隐藏使用 dat.gui 创建的菜单。我的问题是如何使菜单直接从代码中出现/消失？

```
 var gui = new dat.GUI();
 gui.add(text, 'message');
 gui.add(text, 'speed', -5, 5);

 gui.??? 
```

我尝试使用 DOMElement hide 的属性，它可以工作，但我想要一种独特的方式来处理这个函数。有函数调用吗？我注意到与击键相关的 JavaScript 事件通过库中的绑定与范围相关。但是这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-20T05:27:48.283

我遇到了同样的问题并通过以下方式解决了它：

```
var gui = new dat.GUI();
dat.GUI.toggleHide(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-15T16:40:03.047

你可以试试

```
var gui = new dat.GUI();
 //... your logic here
gui.__proto__.constructor.toggleHide() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-19T17:06:43.570

你和我一直在寻找的是

```
var gui = new dat.GUI();
// to toggle it closed
gui.closed = true;
// to toggle it open again
gui.closed = false; 
```

我从第*2104 行*[的源代码](https://raw.githubusercontent.com/dataarts/dat.gui/master/build/dat.gui.js)中得到了这个，内部函数**open**和**close** 正是这样做的。

 *****gui 会即时对值的变化做出反应（您可以从控制台重新分配 gui.close 以查看它的运行情况）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-12T11:47:35.540

截至最新版本：

gui.close();

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T12:49:01.127

Ok 找到了解决办法，在 dat.GUI 的原型中加入如下函数：

```
 dat.GUI.prototype.removeFolder = function(name) {
    var folder = this.__folders[name];
    if (!folder) {
      return;
    }
    folder.close();
    this.__ul.removeChild(folder.domElement.parentNode);
    delete this.__folders[name];
    this.onResize();
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-29T08:14:55.223

我建议：

```
$(gui.domElement).attr("hidden", true); 
```

因为它还可以防止点击。`toggleHide()`仍然可以单击它。只需关闭它就会有机会重新打开。

为我工作，因为我不希望用户重新打开它；）

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-02-14T03:27:54.813

您可以在 gui domElement 中的第一个 ul 标记上切换“关闭”类。

如果您使用 JQuery，请执行以下操作：

```
var gui = new dat.GUI();
$(gui.domElement).find(">ul").toggleClass("closed"); 
```*****

# jquery - 单击文档时获取事件的父 div

> ID：14710568
> 
> 赞同：0
> 
> 时间：2013-02-05T15:05:46.173
> 
> 标签：jquery, html, css, dom

我的网站上有一个标题，标题有一个“按钮”，它有一个图标和一些文本。当您单击此“按钮”时，它将通过切换类的可见性来显示或隐藏页面上的额外菜单。

```
<div id="header_wrapper">
    <div id="header_area">
        <a class="noSelect" href="#">
            <div id="favuorites_header_wrapper" class="header_item">
                <div id="favuorites_header_font" class="noSelect">Open Menue</div>
                <div id="favuorites_header_icon" class="noSelect"></div>
            </div>
        </a>   
    </div>
    <div id="hidden_favuorite_area_wrapper">
        <div id="hidden_favuorite_area">Your personal area</div>
    </div>
</div>
<div id="content_wrapper">foo</div> 
```

现在，当您在标题或菜单区域之外单击时，我想再次隐藏此菜单。

我试过

```
$(document).click(function(event){
    if(event.target.id =="content_wrapper"){
        // hide
    }
}); 
```

但是 event.target.id 只返回 clicket 元素的 ID，而不是父元素。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:14:11.230

你可以这样做：

```
 if ($(event.target).is('#content_wrapper *')) {
    // click somewhere inside content wrapper
  } 
```

为了安全起见，您可能需要检查包装器本身：

```
 if ($(event.target).closest('#content_wrapper').length) {
    // click in the wrapper, or on the wrapper itself
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:17:00.793

一种方法是停止元素内点击事件的传播。

```
$(document).click(function(event){
  // hide
});

$("#header_wrapper, #menu_wrapper").click(function(e){
    e.stopPropagation();
}); 
```

这将阻止事件冒泡超出这些元素。这样，在`#header_wrapper`or内的任何点击`#menu_wrapper`（或任何你的菜单被调用）都不会触发文档的处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T15:16:26.687

您可以在单击按钮时绑定一个事件，并在单击不在标题内的内容时取消绑定它。

.parent() 函数接受一个选择器。这样你就可以检查一个元素是否在另一个元素中。

```
$(function() {
    // The selector of the button that gets pressed
    $('#favuorites_header_font').on('click', function() {

        // Insert your [toggle to visible] code here

        $(document.body).on('click.hidemenu', function(event) {
            // Check if the clicked element is outside the header
            if( $(event.target).parent('#header_area').length === 0 ) {
                // Its outside, unbind the (namespaced, to not destroy other code) event.
                $(document.body).off('click.hidemenu');

                // And insert your [toggle to hidden] code here
            }
        });
    });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T15:22:54.793

试试这个

```
$(document).click(function(event){
 el=event.target.id;
 if($("#"+el).parent().get(0).id=="content_wrapper"){
   //hide
}

}); 
```

# ruby-on-rails-3 - 将 Sprockets 的 `depend_on` 指令指向非资产文件

> ID：14710569
> 
> 赞同：8
> 
> 时间：2013-02-05T15:05:59.590
> 
> 标签：ruby-on-rails-3, asset-pipeline, sprockets

我有一个`app/assets/javascripts/moufa.js.erb`文件，其中填充了文件中的值`config/moufa.yml`。我想使用`depend_on`sprockets 指令，以便每次更改 yaml 文件时，它都会重新编译 js 文件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-11T19:16:54.830

我们能够通过添加一个新指令来解决这个问题。该指令（将其放在 config/initializers/sprockets.rb 中）添加了对 config/ 目录中文件的依赖：

```
class Sprockets::DirectiveProcessor
  def process_depend_on_config_directive(file)
    path = File.expand_path(file, "#{Rails.root}/config")
    context.depend_on(path)
  end
end 
```

# css - 将所有较少的文件编译到一个样式表中？

> ID：14710570
> 
> 赞同：4
> 
> 时间：2013-02-05T15:06:00.433
> 
> 标签：css, less

我正在使用 simpless，我将项目拖入其中并将所有较少的文件定位到 styles.css

问题是当编译较少的样式表时，它们只是相互编写而不是合并在一起。编译时有没有办法将它们全部合并到 styles.css 中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T15:10:58.893

您必须创建一个导入子文件的 master less 文件。主文件将导入子文件：

```
@import "myfile1.less";
@import "myfile2.less"; 
```

进入编译器，您只需传递 master 的less 文件。

希望这会有所帮助// ph

# java - 如何提取列表中特定属性的所有元素？

> ID：14710574
> 
> 赞同：5
> 
> 时间：2013-02-05T15:06:10.560
> 
> 标签：java, collections

我怎样才能最好地获得以下结构的所有“名称”字符串元素：

```
class Foo {
    List<Bar> bars;
}

class Bar {
    private String name;
    private int age;
} 
```

我的方法是：

```
List<String> names = new ArrayList<String>();

for (Bar bar : foo.getBars()) {
    names.add(bar.getName());
} 
```

这可能有效，但在java中没有什么东西。`Collections`我可以这样写： `Collections.getAll(foo.getBars(), "name");`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T22:18:51.523

如果您使用[Eclipse Collections](https://www.eclipse.org/collections/)并更改 getBars() 以返回 MutableList 或类似的东西，您可以编写：

```
MutableList<String> names = foo.getBars().collect(new Function<Bar, String>()
{
    public String valueOf(Bar bar)
    {
        return bar.getName();
    }
}); 
```

如果将函数提取为 Bar 上的常数，则它缩短为：

```
MutableList<String> names = foo.getBars().collect(Bar.TO_NAME); 
```

使用 Java 8 lambda，您根本不需要 Function。

```
MutableList<String> names = foo.getBars().collect(Bar::getName); 
```

如果无法更改 getBars() 的返回类型，则可以将其包装在 ListAdapter 中。

```
MutableList<String> names = ListAdapter.adapt(foo.getBars()).collect(Bar.TO_NAME); 
```

**注意：**我是 Eclipse 集合的提交者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:10:44.500

有点提供谷歌番石榴

```
List<String> names = new ArrayList(Collections2.transform(foo.getBars(), new Function<Bar,String>() {
    String apply(Bar bar) {
        return bar.getName()
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-21T22:14:20.993

使用 Java 8：

```
List<String> names =        
    foo.getBars().stream().map(Bar::getName).collect(Collectors.toList()); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-05T15:12:18.217

你有什么理由不能使用谷歌集合框架提供的 MultiMap 吗？

[多重地图](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)

这将允许具有多个键值的映射。

所以你可以有一个重复的键（不像哈希图）并返回该键的所有值

然后只需在关联的 Map 上调用 get，这将与您预期的“getAll”示例相同的实现

> 得到
> 
> Collection get(@Nullable K key) 返回与某个键关联的所有值的集合视图。如果 multimap 中没有映射具有提供的键，则返回一个空集合。对返回集合的更改将更新底层多图，反之亦然。
> 
> 参数： key - 在 multimap 中搜索的键 返回： 键映射到的值的集合

# awk - 如何从文件中获取搜索 ID (awk)

> ID：14710576
> 
> 赞同：0
> 
> 时间：2013-02-05T15:06:12.570
> 
> 标签：awk, grep

我有一个文件（file1），其中包含一些 ID，例如 ns:m.050fh（每行一个 ID，我不能在这里使用正则表达式）。

我需要打印出第二个文件（file2，csv，由制表符分隔）中的行，其中第二个文件的第一列 = 第一个文件中的某个 ID。

awk 或 grep 可以吗？

类似的东西（伪代码）：

```
 awk -F'\t' '$1 == $(file1)' file2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:08:00.150

试试这个：

```
awk -F'\t' 'NR==FNR{a[$0];next} $1 in a' file1 file2 
```

file1 是 ID 文件。

上面的行将打印 file2 中的所有行，其中 id 存在于 file1 中。

# visual-c++ - 错误 lnk2026：模块对 safeseh 图像不安全

> ID：14710577
> 
> 赞同：51
> 
> 时间：2013-02-05T15:06:22.227
> 
> 标签：visual-c++, unsafe

构建示例可视 C++ 项目时出现此错误。首先我下载了​​ 3 个示例项目，都解决了相同的问题，打印出所有小于 N 的素数（您可能知道这些示例项目？）。我构建了纯C项目没有任何问题。但是当我尝试构建一个基于程序集的项目时，我得到了这个错误。

谢谢你。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2014-03-13T02:34:00.733

在 Visual Studio 2012 速成版中：

```
Right-click on your project ->
Properties -> 
Configuration Properties ->
Linker ->
Advanced and changed "Image Has Safe Exception Handlers" to "No (/SAFESEH:NO)" 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2015-02-10T22:36:56.447

[`/SAFESEH:NO`链接器设置](https://msdn.microsoft.com/en-us/library/9a89h429.aspx)的图片值 0x3e8 个字：

![在此处输入图像描述](../Images/85d5c88fa8ac60a99a4d6ddc05428a67.png)

**或者**，您可以告诉 MASM 保证该对象不包含异常处理程序，或者任何异常处理程序都使用 .SAFESEH 定义，*如果您知道这对您的汇编代码是正确的*：

![在此处输入图像描述](../Images/5b982c846833e6c6aa505c6b21559f57.png)

这将允许您保持`/SAFESEH`启用项目的链接。但它是正确的吗？你在做保证！确保或使用第一个选项。

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2013-02-05T15:21:11.110

```
Try to disable SAFESEH. 
```

来自规范：/SAFESEH 已指定，但模块与安全异常处理功能不兼容。

# core-data - CoreData：删除所有元素后 managedObjectContext 上的奇怪元素

> ID：14710586
> 
> 赞同：1
> 
> 时间：2013-02-05T15:06:56.893
> 
> 标签：core-data, managedobjectcontext

我在获取时遇到了麻烦。使用 sql 编辑器检查，我可以看到具有两个字段（整数位置和字符串 weburl）的表 web 在获取之前为空。但是，在获取之后：

```
NSArray * arrwebs = [managedObjectContext 
                             executeFetchRequest:allwebs error:&error]; 
```

它有一个元素：

```
"Error: (null)
2013-02-05 15:01:39.001 Assignment3-1[36607:c07] arrWwebs has 1 elements
2013-02-05 15:01:39.001 Assignment3-1[36607:c07] Postition: 0" 
```

arrwebs 不应该是空的吗？在此之前我已经删除了元素（通过编程方式和通过 sql 编辑器）；

代码如下：

```
-(void) logElements
{
    AppDelegate *delegate = [[UIApplication sharedApplication] delegate];    
    NSManagedObjectContext *managedObjectContext = delegate.managedObjectContext;
    NSManagedObject  *newWebs;

    newWebs = [NSEntityDescription insertNewObjectForEntityForName:@"Webs" inManagedObjectContext:managedObjectContext];

    NSFetchRequest * allwebs = [[NSFetchRequest alloc] init];
    [allwebs setEntity:[NSEntityDescription entityForName:@"Webs" inManagedObjectContext:managedObjectContext]];
    [allwebs setIncludesPropertyValues:NO]; //only fetch the managedObjectID

    NSError *error = nil;
    NSArray * arrwebs = [managedObjectContext executeFetchRequest:allwebs error:&error];

    NSLog(@"Error: %@", [error localizedDescription]);
    NSLog(@"arrWwebs has %d elements", [arrwebs count]);

    for (NSManagedObject * info in arrwebs) {
        //[managedObjectContext deleteObject:webobject];
        NSLog(@"Postition: %@", [info valueForKey:@"position"]);
        NSLog(@"URL: %@", [info valueForKey:@"weburl"]);
    }

    if (![managedObjectContext save:&error]) {
        NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
    }    
} 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:12:42.043

您将`Webs`对象插入为`newWebs`. 所以结果是意料之中的。

# ios - iOS 6 中的定位服务不工作

> ID：14710591
> 
> 赞同：0
> 
> 时间：2013-02-05T15:07:07.437
> 
> 标签：ios, objective-c, cocoa-touch, cocoa

```
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation{
    static int i=0;
    if([self getCurrentLocation]==nil){
        i++;
        if(i>3){
            [[self locationManager] stopUpdatingLocation];
            useMyLocation = NO;
            [self locationUpdated];
        }
    }else{
        [self locationUpdated];
    }
}

- (void)alertView:(UIAlertView *)anAlertView clickedButtonAtIndex:(NSInteger)buttonIndex{
if(buttonIndex==1){
    self.useMyLocation = YES;
    [[self locationManager] startUpdatingLocation];
}else{ // buttonIndex==0
    self.useMyLocation = NO;
    [self locationUpdated];
} 
```

}

这是 ios 4 和 5 中的工作代码。我的问题是我无法获得在 ios 6 中工作的位置。该应用程序甚至不征求用户的许可。阅读后这是我迄今为止尝试过的：

*   CFBundleDisplayName 解决方案。我的 plist 中已经有了 CFBundleDisplayName。我尝试删除它并再次添加它 - 不行。

*   将 Location Manager 的属性 pausesLocationUpdatesAutomatically 设置为 NO，如下所示：

...

```
- (CLLocationManager *)locationManager{
        if (locationManager != nil){
            return locationManager;
        }   
        CLLocationManager *tmp = [[CLLocationManager alloc] init];
        tmp.pausesLocationUpdatesAutomatically = NO;  //!@#
        [self setLocationManager:tmp];
        [tmp release];
        [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
        [locationManager setDelegate:self];
        return locationManager;
    } 
```

我也读过`locationManager:didUpdateLocations:`，我不知道如何在代码中实现它，我也不确定这是否是解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:10:38.847

你有没有启动过位置管理器？

```
[locationManager startUpdatingLocation]; 
```

# python - Python MySQL 连接。在虚拟机上运行

> ID：14710600
> 
> 赞同：1
> 
> 时间：2013-02-05T15:07:40.463
> 
> 标签：python, mysql, virtual-machine, mysql-python

我正在尝试建立与使用 python 在本地运行的 MySQL 的连接。我使用以下代码

```
import MySQLdb
db = MySQLdb.connect("localhost","username","password","dbname") 
```

我正在使用虚拟机，并且在 VM 上同时运行 Python 和 MySQL。我无法建立联系。

我得到这个错误

```
OperationalError: (2003, "Can't connect to MySQL server on 'localhost' (10061)") 
```

我尝试提供虚拟机的 IP 地址来代替 localhost，但仍然无法正常工作。我也尝试指定端口号。连接是否不同，因为它在 VM 上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:14:44.483

当您尝试从命令行直接连接到 mysql 数据库时，它可以工作吗？

你的虚拟机运行的是什么操作系统？如果它是 Unix，那么是否有 mysqld 进程正在运行？

无论如何，这可能与 Python 无关。您的代码片段看起来不错。您只需要解决连接问题。查看此页面以了解有关如何找到此问题根源的详细信息。

[http://dev.mysql.com/doc/refman/5.5/en/can-not-connect-to-server.html](http://dev.mysql.com/doc/refman/5.5/en/can-not-connect-to-server.html)

我希望这个对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:42:40.153

假设您的客户端和 mysql 服务器与您所说的在同一台机器上并且 mysql 服务器正在运行，您可以尝试以下操作

在您的`my.cnf`哪个主要`/etc/mysql/my.cnf`在 linux 中或检查您在 windows 上的 mysql 安装以找到`my.cnf`

查找`bind-address`指令并将 IP 地址设置为您的 VM 主机。如果在 linux 上，您可以使用`ifconfig`或`ipconfig`在 windows 上查看您的 VM ip

`skip-networking`如果还没有允许远程客户端，您也可以尝试注释掉行

重启mysqld

`/etc/init.d/mysqld restart`在基于 debian 的发行版上，`service mysqld restart`用于 Redhat 或在 Windows 上重新启动 mysql 服务

# php - php://input中的数据不等于解析后放入$_POST的数据

> ID：14710608
> 
> 赞同：3
> 
> 时间：2013-02-05T15:08:01.587
> 
> 标签：php, environment-variables

我正在解决 Wordpress 中的这个奇怪的错误，我不知道 wordpress 是如何工作的，但我跑了一个小时试图找出问题所在，看看问题的根源来自哪里。

原来的问题是事情没有更新，因为 $_POST 没有被请求的数据。

在我从浏览器访问的文件顶部，在任何其他代码之前，我执行了以下操作：

```
echo file_get_contents("php://input");
print_r($_POST); exit(); 
```

我看到 wordpress 使用 $_POST 作为一个包罗万象的全局变量并写入它。我想也许 wordpress 将数据踢出某个地方，但我找不到。无论如何，这在文件的顶部，在其他任何事情发生之前。我认为在此之前甚至不可能修改变量

的输出是

```
widget-text%5B3%5D%5Btitle%5D=Test&widget-text%5B3%5D%5Btext%5D=THISISATEST&sidebar=sidebar-1&sidebar-1_position=1&sidebar-2_position=&sidebar-3_position=&sidebar-4_position=&sidebar-5_position=&savewidget=Save+Widget&widget-id=text-3&id_base=text&multi_number=3&_wpnonce=36852083b6&_wp_http_referer=%2Fwp-admin%2Fwidgets.php%3Fmessage%3D0%26editwidget%3Dtext-3%26sidebar%3Dsidebar-1%26key%3D0
Array
(
    [widget-text] => Array
        (
            [3] => Array
                (
                    [title] => Test
                )

        )

    [sidebar] => sidebar-1
    [sidebar-1_position] => 1
    [sidebar-2_position] => 
    [sidebar-3_position] => 
    [sidebar-4_position] => 
    [sidebar-5_position] => 
    [savewidget] => Save Widget
    [widget-id] => text-3
    [id_base] => text
    [multi_number] => 3
    [_wpnonce] => 36852083b6
    [_wp_http_referer] => /wp-admin/widgets.php?message=0&editwidget=text-3&sidebar=sidebar-1&key=0
) 
```

url_decoded：

```
widget-text[3][title]=Test&widget-text[3][text]=THISISATEST&sidebar=sidebar-1&sidebar-1_position=1&sidebar-2_position=&sidebar-3_position=&sidebar-4_position=&sidebar-5_position=&savewidget=Save Widget&widget-id=text-3&id_base=text&multi_number=3&_wpnonce=36852083b6&_wp_http_referer=/wp-admin/widgets.php?message=0&editwidget=text-3&sidebar=sidebar-1&key=0Array 
```

请注意原始数据中的`widget-text[3][text]=THISISATEST`存在方式。但是`$_POST['widget-text']['3']['text']`是未定义的。

我查看了phpinfo，找不到任何相关设置。我在 PHP 版本 5.3.8、Apache 2 上，我在 AWS 上运行 suse。

有人对如何使 $_POST 正确解析原始数据有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:50:08.287

这确实很奇怪。可能是 PHP 中的错误或配置/扩展问题。

1.  尝试更改配置变量`max_input_nesting_level`, `max_input_vars`, `max_input_time`. 如果您不确定值，请尝试使用默认值。检查[PHP 文档页面](http://php.net/manual/en/info.configuration.php)以查找默认值及其含义。

2.  如果您正在运行`suhosin`扩展程序，请尝试禁用它并查看它是否有帮助。此外，所有`suhosin.post.*` [配置键](http://www.hardened-php.net/suhosin/configuration.html#suhosin.post.max_array_depth)看起来都很有趣。

3.  谷歌搜索揭示了类似的问题：[一](https://stackoverflow.com/questions/12684449/php-post-array-variables-are-truncated)，[二](https://stackoverflow.com/questions/5077969/php-some-post-values-missing-but-are-present-in-php-input)。

4.  尝试通过`$_REQUEST`-`$_REQUEST['widget-text']['3']['text']`

无论如何，经过一番谷歌搜索，这似乎发生在 PHP 5.3.8 中。所以升级可能是另一种选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-14T14:57:54.647

是的，只需这样做：

```
parse_str( urldecode( file_get_contents("php://input") ), $result );

var_dump( $result ); 
```

# php - 将变量定义为函数的一部分

> ID：14710614
> 
> 赞同：1
> 
> 时间：2013-02-05T15:08:16.313
> 
> 标签：php, function, variables

我在将变量设置为函数的一部分时遇到了麻烦，我确定它的语法比什么都重要，我试图做的是使用 if/else 语句并作为它的一部分，返回一个变量 $Bname。

但我不确定如何设置它。

我的功能如下

```
 function bestPriceFunc($var1, $var2) {
      if ($var1 < $var2) {
          return $var1;
          $Bname = 'will';
          return $Bname;

      } else {
          return $var2;
          $Bname = 'Lad';
          return $Bname;
      }
  } 
```

这是正确的方法还是我可以写`return $Bname = 'Lad';`。我都试过了，但是当我加载页面时我得到一个未定义的变量错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T15:13:07.940

每个函数只能使用一次 return，因为它在第一次执行时终止函数。

尝试以下操作，或者如果您不需要返回 $var1 和 $var2，只需删除这些行。

```
<?php
function bestPriceFunc($var1, $var2) {
    if ($var1 < $var2) {
        $Bname = 'will';
        return array($var1, $Bname);

    } else {
        $Bname = 'Lad';
        return array($var2, $Bname);
    }
}

$var = bestPriceFunc(3, 4);
$bnameoutput = $var[1];
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:13:19.657

当您尝试使用该`$Bname`变量时，您会收到未定义的错误，因为您已经在返回`$var1`and `$var2`。

return 语句结束函数。一旦你点击`return $var1;`或`return $var2`函数结束并返回指定的变量。为了返回`$Bname`变量，您需要摆脱其他返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T15:14:46.037

一旦返回`$var;`函数执行结束，这意味着其余代码将被忽略，因此`$Bname`未设置。

每个函数中还有两个“return”，我建议对函数的工作原理有一个了解

# apache - 301 重定向 .htaccess 中的 URL

> ID：14710616
> 
> 赞同：0
> 
> 时间：2013-02-05T15:08:16.610
> 
> 标签：apache, .htaccess, redirect

这是有问题的网址

```
/?L=inkspot.topic&id=82255&page=22 
```

我需要将其重定向到网站的主页。

显然，id 和 page 是变量。我不擅长 .htaccess 301 重定向，因此非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:12:01.480

像这样的东西应该工作

```
//301 Redirect 
RedirectMatch  /?L=inkspot.topic&id=(.+)&page=(.+) http://www.google.ca/$1/$2  [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:12:50.270

在做了一些研究之后，似乎将参数传递给重定向是按如下方式完成的。我从来不需要以这种方式重写，所以这对我来说是新的......

```
RewriteCond %{QUERY_STRING} ^L=inkspot.topic$ [NC]
RewriteCond %{QUERY_STRING} ^id=([0-9]+)$
RewriteCond %{QUERY_STRING} ^page=([0-9]+)$
RewriteRule ^.*$ /index.html/%1/%2/%3 [R=301,L] 
```

# php - Laravel 4 类加载和外观

> ID：14710617
> 
> 赞同：4
> 
> 时间：2013-02-05T15:08:23.240
> 
> 标签：php, laravel, laravel-4

我想知道 Laravel 如何通过 Facades 进行类加载。

我遇到了[这个答案](https://stackoverflow.com/a/14348858/1365918)，说`DB`别名/外观类加载了代码

这里`/vendor/laravel/framework/src/Illuminate/Database/Connection.php`

我尝试遵循答案中给出的建议并遵循 index.php 中的代码，但无法理解`DB`Facade 是如何加载`Connection`类的。

我也有些困惑，因为答案说`Connection`类已加载，但该类没有`connection`方法。然而文档说，我已经能够使用连接方法，例如，

`DB::connection('my-connection-name');` [这是此文档的链接](http://four.laravel.com/docs/database#accessing-connections)

我想知道这一切都映射在哪里以及加载是如何发生的。我猜作曲家已经自动化了映射，但是当我的应用程序启动时它实际发生在哪里？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-05T15:46:22.837

当您使用静态 DB 调用时，Laravel 使用[Illuminate\Support\Facade](https://github.com/illuminate/support/blob/master/Facades/Facade.php)中的 Facade 类提供的机制。调用魔术方法 __callStatic 并检索由[DB 外观](https://github.com/illuminate/support/blob/master/Facades/DB.php)（此处为 db）提供的“原始”类。

Facade.php 中的第 54 行显示它使用 $app 变量（它是静态的，在 Illuminate\Foundation start.php 文件中提供）来获取在 App 容器中注册为 DB 的对象。

```
return static::$resolvedInstance[$name] = static::$app[$name]; 
```

$app['db'] 在[数据库服务提供者](https://github.com/illuminate/database/blob/master/DatabaseServiceProvider.php)中注册。

啊，你可以使用 DB 而不是 Illuminate\Support\Facades\DB 因为别名是在应用程序配置文件中创建的。

我希望这能帮到您 ：）

# jquery-mobile - jquery mobile 奇怪的东西

> ID：14710620
> 
> 赞同：0
> 
> 时间：2013-02-05T15:08:38.383
> 
> 标签：jquery-mobile, galleria

我刚刚编写了我的第一个非常基本的 Jquery Mobile 网站，它只有两页。

第二页（可能是第一页）使用有自己的 js 文件的 Galleria 幻灯片。

发生的非常奇怪的事情是，如果我先加载第 2 页，它运行得非常好。但是，如果我运行第 1 页，然后单击第 2 页的链接，它会挂在第 1 页上，并且有一个 js 控制台错误，说 Galleria 未定义。通过在第 1 页中包含 Galleria js 文件，我克服了错误，然后一切正常。

所以问题是我为什么需要这样做？当然，除了链接之外，这两个页面没有任何联系。对这种奇怪行为有任何想法/想法/解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:12:04.680

这不是一个奇怪的行为，这正是 jQuery Mobile 的工作方式。事实上，jQM 在加载第一页后，使用 AJAX 加载其他页面并将它们的主体注入到第一页中。如果您想验证这一事实，请使用 DOM 检查器。也就是说，`<head>`其他页面的部分永远不会加载。要解决这个问题，您必须在您使用的每个文件中包含 Galleria 库或使用 PHP 之类的东西`include`（更好）。

# javascript - 无法设置属性“innerHTML”的值：对象为空或未定义

> ID：14710629
> 
> 赞同：2
> 
> 时间：2013-02-05T15:09:16.733
> 
> 标签：javascript, jquery, html, ajax, dom

当我尝试将这些结果显示到我的页面中的函数时，它会返回一个错误。错误：无法设置属性“innerHTML”的值：对象为空或未定义

脚本有效，它们不是我的。我从网上找到的工作示例中得到它们。

EDITEDL：我确实改变了它，但仍然得到同样的错误

```
<!DOCTYPE html>
<html>
<head>
    <style>
        #header {
            font-size: 5em;
        }
    </style>

    <script type="text/javascript">

        function updateclock() {
            var currentTime = new Date();

            var currentHours = currentTime.getHours();
            var currentMinutes = currentTime.getMinutes();
            var currentSeconds = currentTime.getSeconds();

            // Pad the minutes and seconds with leading zeros, if required
            currentMinutes = (currentMinutes < 10 ? "0" : "") + currentMinutes;
            currentSeconds = (currentSeconds < 10 ? "0" : "") + currentSeconds;

            // Choose either "AM" or "PM" as appropriate
            var timeOfDay = (currentHours < 12) ? "AM" : "PM";

            // Convert the hours component to 12-hour format if needed
            currentHours = (currentHours > 12) ? currentHours - 12 : currentHours;

            // Convert an hours component of "0" to "12"
            currentHours = (currentHours == 0) ? 12 : currentHours;

            // Update the time display
            document.getElementById("clock").innerHTML = (currentHours + ":" + currentMinutes + ":" + currentSeconds + " " + timeOfDay);
        }

        function updatedate() {

            var d_names = new Array("Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday");

            var m_names = new Array("January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December");

            var d = new Date();
            var curr_day = d.getDay();
            var curr_date = d.getDate();
            var sup = "";
            if (curr_date == 1 || curr_date == 21 || curr_date == 31) {
                sup = "st";
            }
            else if (curr_date == 2 || curr_date == 22) {
                sup = "nd";
            }
            else if (curr_date == 3 || curr_date == 23) {
                sup = "rd";
            }
            else {
                sup = "th";
            }
            var curr_month = d.getMonth();
            var curr_year = d.getFullYear();

            document.getElementById("date").innerHTML = (d_names[curr_day] + " " + curr_date + "<SUP>" + sup + "</SUP> " + m_names[curr_month] + " " + curr_year);

        }

        updateclock();
        setInterval(updateclock, 1000);

        updatedate();
        setInterval(updatedate, 1000);

    </script>

</head>
<body>
    <table>
        <tr>
            <td>

            </td>
            <td style="text-align=center" id =header>

            </td>
            <td>
                <span id="date">&nbsp;</span>
                <span id="clock">&nbsp;</span>
            </td>
        </tr>
    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:16:15.240

问题是您的初始`updateclock()`和`updatedate()`函数在 DOM 准备好之前被调用。这样想：

1.  您的浏览器会加载该页面。
2.  它命中`<script>`标签并开始运行 JavaScript。
3.  它会尝试运行您的函数并从 DOM（即`document.getElementById("date")`）中获取项目。此元素尚未加载，因此它返回 null。如果对象不存在，则无法调用`.innerHTML`它。

要解决此问题，您必须在加载时运行脚本。在 jQuery 中，这是：

```
$(function() {
    updateclock();
    setInterval(updateclock, 1000);

    updatedate();
    setInterval(updatedate, 1000);
} 
```

否则，您可以将它们放在一个函数中，然后将`onload="functionName()"`属性添加到 body 标记中。

此外，正如其他人所提到的，您应该删除`#`ID 中的 s。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T15:10:31.423

代替

```
document.getElementById("#date")
//And
document.getElementById("#clock") 
```

和

```
document.getElementById("date")
//And
document.getElementById("clock") 
```

`getElementById`不需要标签 ( `#`)，这是 CSS 选择器用来指定它是`id`您正在寻找的东西。
（就像句号（`.`）用于类）

此外，从您的 HTML 中删除主题标签：

```
<span id="date">&nbsp;</span>
<span id="clock">&nbsp;</span> 
```

代替：

```
<span id="#date">&nbsp;</span>
<span id="#clock">&nbsp;</span> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T15:15:46.633

首先，去掉#中的

```
document.getElementById("date") 
```

您不在 jQuery 中，而是在纯 javascript 中。

然后，当你打电话

```
 updatedate();
    setInterval(updatedate, 1000); 
```

HTML 代码尚未初始化。

您应该在一个事件上调用它，例如在正文中的 onLoad ：

```
<body onLoad="updatedate();setInterval(updatedate, 1000);"> 
```

或者获取您想要运行的所有代码并将其放入一个函数中：

```
function runAtStart()
{
        // Put here all the code you want to launch when page loaded
        updateclock();
        setInterval(updateclock, 1000);
} 
```

然后添加到标记：

```
<body onLoad="runAtStart();"> 
```

最后一个想法，也许更好，将函数调用放在正文末尾的脚本中（所有 HTML 代码都将被初始化）：

```
<body>
<table>
    <tr>
        <td>

        </td>
        <td style="text-align=center" id =header>

        </td>
        <td>
            <span id="date">&nbsp;</span>
            <span id="clock">&nbsp;</span>
        </td>
    </tr>
</table>
<script language="javascript>
    updatedate();
    setInterval(updatedate, 1000);    </script>
</body> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T15:46:26.867

好吧，您尝试更新尚未创建的对象...

测试只需将javascript移到表格下方..

```
<table>
    <tr>
        <td>

        </td>
        <td style="text-align=center" id =header>

        </td>
        <td>
            <div id="date">&nbsp;</div>
            <div id="clock">&nbsp;</div>
        </td>
    </tr>
</table>
<script type="text/javascript">

    function updateclock() {
        var currentTime = new Date();

        var currentHours = currentTime.getHours();
        var currentMinutes = currentTime.getMinutes();
        var currentSeconds = currentTime.getSeconds();

        // Pad the minutes and seconds with leading zeros, if required
        currentMinutes = (currentMinutes < 10 ? "0" : "") + currentMinutes;
        currentSeconds = (currentSeconds < 10 ? "0" : "") + currentSeconds;

        // Choose either "AM" or "PM" as appropriate
        var timeOfDay = (currentHours < 12) ? "AM" : "PM";

        // Convert the hours component to 12-hour format if needed
        currentHours = (currentHours > 12) ? currentHours - 12 : currentHours;

        // Convert an hours component of "0" to "12"
        currentHours = (currentHours == 0) ? 12 : currentHours;

        // Update the time display
        document.getElementById("clock").innerHTML = (currentHours + ":" + currentMinutes + ":" + currentSeconds + " " + timeOfDay);
    }

    function updatedate() {

        var d_names = new Array("Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday");

        var m_names = new Array("January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December");

        var d = new Date();
        var curr_day = d.getDay();
        var curr_date = d.getDate();
        var sup = "";
        if (curr_date == 1 || curr_date == 21 || curr_date == 31) {
            sup = "st";
        }
        else if (curr_date == 2 || curr_date == 22) {
            sup = "nd";
        }
        else if (curr_date == 3 || curr_date == 23) {
            sup = "rd";
        }
        else {
            sup = "th";
        }
        var curr_month = d.getMonth();
        var curr_year = d.getFullYear();

        document.getElementById("date").innerHTML = (d_names[curr_day] + " " + curr_date + "<SUP>" + sup + "</SUP> " + m_names[curr_month] + " " + curr_year);

    }

    updateclock();
    setInterval(updateclock, 1000);

    updatedate();
    setInterval(updatedate, 1000);

</script> 
```

它会起作用。（好吧，我删除了 # 因为公平 DOM id 必须以字母开头）因为我假设您想将脚本保留在标题中，因此您必须对其进行编辑以包含在 DOM 完全构建后调用的 onLoad 函数。

[编辑] 该死的太慢了；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-23T10:06:19.693

我认为给出的任何解决方案都与错误消息无关。关键词是**“未定义”**。这是因为存在对“innerHTML”元素（“日期”和“时钟”）的前向引用，即这些元素是在 JS 尝试使用“getElementById()”访问它们之后定义的。因此，脚本必须遵循 id="{element}" 或 'getElementById()' 必须在整个页面（包括这些元素的定义）被读取后调用的函数中使用，例如通过按钮。

# maven - 在maven中读取属性文件

> ID：14710630
> 
> 赞同：1
> 
> 时间：2013-02-05T15:09:19.417
> 
> 标签：maven, plugins, pom.xml

我将以下代码添加到我的 pom.xml 以使用以下配置从外部属性文件中读取属性：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>properties-maven-plugin</artifactId>
    <version>1.0-alpha-2</version>
    <executions>
      <execution>
        <phase>initialize</phase>
        <goals>
          <goal>read-project-properties</goal>
        </goals>
        <configuration>
          <files>
            <file>..\maven.properties</file>
          </files>
        </configuration>
      </execution>
    </executions>
</plugin> 
```

在我的 maven.properties 文件中，我有以下内容：

> aspectj-maven-plugin.version=1.4
> 
> 版本-maven-plugin.version=2.0

我`${versions-maven-plugin.version}`在 pom.xml 中使用

```
<plugin>
  <groupId>org.codehaus.mojo</groupId>
  <artifactId>versions-maven-plugin</artifactId>
  <version>${versions-maven-plugin.version}</version>
  <configuration>
    <rulesUri>url</rulesUri>
    <includesList>com.package:*</includesList>
  </configuration>
</plugin> 
```

`mvn clean install`但是当我在包上运行说插件版本无效时会抛出异常。为什么会发生这种情况？

注意： pom.xml 和 mave.properties 都在同一个文件夹中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T15:19:16.083

原因很简单：为了能够读取 的配置`properties-maven-plugin`，Maven 还必须解析所有其他插件——它在实际启动插件之前不知道插件做了什么。

当它这样做时，它注意到它没有所有必要的版本。这个验证步骤在第一个插件被实例化之前很久就发生了。

结论：你的方法行不通。您可以做的是将属性放入 POM，然后将它们从那里提取到属性文件中（例如使用[maven-resources-plugin](http://maven.apache.org/plugins/maven-resources-plugin/)）。

# mysql - MYSQL：如果一个连接行匹配条件，则排除几行

> ID：14710632
> 
> 赞同：4
> 
> 时间：2013-02-05T15:09:30.963
> 
> 标签：mysql, sql, drupal

我有两张桌子。一种是用户，它有 uid 和 name 字段。另一个表是 users_roles，其中有字段 uid 和 rid（角色 id）。

我想检索没有任何一组提供的角色的用户列表。

例如：

```
uid | name
----------
1   | BOB
2   | DAVE
3   | JOHN 
```

用户角色：

```
uid | rid
---------
1   | 1
1   | 2
1   | 3
2   | 1
3   | 1 
```

我希望能够只查询没有特定套路的用户。例如，排除 rids 2 和 3 的查询应该返回 DAVE 和 JOHN，或者排除 rids (1,3) 的查询应该返回 nobody。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-05T15:19:33.833

使用反连接模式的查询有时是最有效的：

```
SELECT u.uid
     , u.name
  FROM users u
  LEFT
  JOIN users_roles r
    ON r.uid = u.uid
   AND r.rid IN (2,3)
 WHERE r.uid IS NULL 
```

反连接模式是执行 LEFT [outer] JOIN`user_roles`表以拉回所有匹配的行，并从中获取`users`没有匹配行的行。“技巧”是在 WHERE 子句中使用谓词排除所有匹配的行，该谓词从用户中消除所有匹配的行。

使用 NOT EXISTS 相关子查询可以获得等效的结果集：

```
SELECT u.uid
     , u.name
  FROM users u
 WHERE NOT EXISTS 
       ( SELECT 1 
           FROM users_roles r
          WHERE r.uid = u.uid
            AND r.rid IN (2,3)
       ) 
```

另一种方法是使用 a `NOT IN`，尽管有时效率较低。性能取决于许多因素。优化器可以为每个查询生成不同的执行计划。

无论如何，为了获得最佳性能，您需要一个 index ...`ON users_roles (uid)`或`ON users_roles (uid,rid)`.

* * *

## 跟进：

在我的 MySQL 5.1.34 服务器上进行的性能测试表明，反连接查询的速度几乎是等效的 NOT EXISTS 和 NOT IN 查询的两倍。（1.091 秒对比 2.066 秒和 2.020 秒）

```
-- setup and populate test tables
CREATE TABLE t_users
( uid    INT UNSIGNED NOT NULL PRIMARY KEY
, `name` VARCHAR(50)
) ENGINE=INNODB DEFAULT CHARSET=latin1 ;

CREATE TABLE t_users_roles
( uid INT UNSIGNED NOT NULL
, rid INT UNSIGNED NOT NULL
, PRIMARY KEY (uid,rid)
) ENGINE=INNODB DEFAULT CHARSET=latin1;

ALTER TABLE t_users_roles ADD CONSTRAINT FK_t_users_roles_t_users FOREIGN KEY (uid) REFERENCES t_users (uid);

CREATE INDEX t_users_ix1 ON t_users (uid,`name`);

CREATE INDEX t_users_roles_ix1 ON t_users_roles (rid,uid);

INSERT INTO t_users (uid,`name`)
SELECT d.d*100000+e.d*10000+u.d*1000+h.d*100+t.d*10+o.d+1 AS uid
     , CONCAT('NAME',LPAD(d.d*100000+e.d*10000+u.d*1000+h.d*100+t.d*10+o.d+1,8,'-')) AS `name`
  FROM (SELECT 0 AS d UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) o
  JOIN (SELECT 0 AS d UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) t
  JOIN (SELECT 0 AS d UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) h
  JOIN (SELECT 0 AS d UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) u
  JOIN (SELECT 0 AS d UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) e
  JOIN (SELECT 0 AS d UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) d 
;

-- 1000000 row(s) affected.

INSERT INTO t_users_roles (uid,rid)
SELECT d.d*100000+e.d*10000+u.d*1000+h.d*100+t.d*10+o.d+1 AS uid
     , r.rid
  FROM (SELECT 1 AS rid UNION ALL SELECT 2 UNION ALL SELECT 3) r
 CROSS
  JOIN (SELECT 0 AS d UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) o
  JOIN (SELECT 0 AS d UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) t
  JOIN (SELECT 0 AS d UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) h
  JOIN (SELECT 0 AS d UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) u
  JOIN (SELECT 0 AS d UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) e
  JOIN (SELECT 0 AS d UNION ALL SELECT 1 UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 UNION ALL SELECT 9) d
 WHERE (d.d*100000+e.d*10000+u.d*1000+h.d*100+t.d*10+o.d+1) % 100000 <> 0
;
-- 2999970 row(s) affected

OPTIMIZE TABLE t_users;
OPTIMIZE TABLE t_users_roles;

SHOW STATUS LIKE 'Qcache_hits' ;
-- Variable_name  Value    
-- -------------  ---------
-- Qcache_hits    1117342  

SHOW VARIABLES LIKE 'version' ; 
-- Variable_name  Value       
-- -------------  ------------
-- version        5.1.53-log

-- table size from the file system
$ du -sh DATA/test/t_users*.ibd
72M     DATA/test/t_users.ibd
133M    DATA/test/t_users_roles.ibd

-- anti-join query
SELECT SQL_NO_CACHE u.uid
     , u.name
  FROM t_users u
  LEFT
  JOIN t_users_roles r
    ON r.uid = u.uid
   AND r.rid IN (2,3)
 WHERE r.uid IS NULL ;

-- Exec: 1.095 sec
-- Exec: 1.090 sec
-- Exec: 1.091 sec
-- Exec: 1.087 sec
-- Exec: 1.090 sec
-- avg 5 executions: 1.091 sec    

-- not exists query
SELECT SQL_NO_CACHE u.uid
     , u.name
  FROM t_users u
 WHERE NOT EXISTS
       ( SELECT 1
           FROM t_users_roles r
          WHERE r.uid = u.uid
            AND r.rid IN (2,3)
       ) ;

-- Exec: 2.071 sec
-- Exec: 2.066 sec
-- Exec: 2.059 sec
-- Exec: 2.065 sec
-- Exec: 2.070 sec
-- avg 5 executions: 2.066 sec

-- not in query
SELECT SQL_NO_CACHE u.uid
     , u.name
  FROM t_users u
 WHERE u.uid NOT IN
       ( SELECT r.uid
           FROM t_users_roles r
          WHERE r.uid IS NOT NULL
            AND r.rid IN (2,3)
       ) ;

-- Exec: 2.022 sec 
-- Exec: 2.023 sec 
-- Exec: 2.014 sec
-- Exec: 2.026 sec
-- Exec: 2.016 sec
-- avg 5 executions: 2.020 sec

SHOW STATUS LIKE 'Qcache_hits' ;
-- Variable_name  Value    
-- -------------  ---------
-- Qcache_hits    1117342  

EXPLAIN output for three statements:

-- ANTI JOIN
id  select_type         table   type            possible_keys              key          key_len  ref       rows   filtered  Extra                                 
--  ------------------  ------  --------------  -------------------------  -----------  -------  -----  -------  --------  ------------------------------------
 1  SIMPLE              u       index                                      t_users_ix1  57              1000423    100.00  Using index
 1  SIMPLE              r       ref             PRIMARY,t_users_roles_ix1  PRIMARY      4        u.uid        1    100.00  Using where; Using index; Not exists

-- NOT EXISTS
id  select_type         table   type            possible_keys              key          key_len  ref       rows  filtered  Extra                     
--  ------------------  ------  --------------  -------------------------  -----------  -------  -----  -------  --------  --------------------------
 1  PRIMARY             u       index                                      t_users_ix1  57              1000423    100.00  Using where; Using index
 2  DEPENDENT SUBQUERY  r       ref             PRIMARY,t_users_roles_ix1  PRIMARY      4        u.uid        1    100.00  Using where; Using index

-- NOT IN
id  select_type         table   type            possible_keys              key          key_len  ref        rows  filtered  Extra                     
--  ------------------  ------  --------------  -------------------------  -----------  -------  ------  -------  --------  --------------------------
 1  PRIMARY             u       index                                      t_users_ix1  57               1000423    100.00  Using where; Using index
 2  DEPENDENT SUBQUERY  r       index_subquery  PRIMARY,t_users_roles_ix1  PRIMARY      4        func          1    100.00  Using index; Using where 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:12:35.887

您正在寻找 NOT IN 查询：

[MySQL“不在”查询](https://stackoverflow.com/questions/1519272/mysql-not-in-query)

```
SELECT name 
FROM users 
WHERE uid NOT IN (SELECT uid FROM Users_roles WHERE rid = 2 OR rid = 3) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T15:14:06.300

该查询将为您提供所有姓名的完整列表以及他们的缺失`rid`。

```
SELECT  a.*, b.rid
FROM    users a CROSS JOIN
        (SELECT DISTINCT rid FROM users_roles) b
        LEFT JOIN USERS_ROLES c
            ON a.uid = c.uid AND 
                b.rid = c.rid
WHERE   c.rid IS NULL
        -- AND other conditions 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/c6f9f/4)

# scala - Scala注册mixin构造函数结果不变

> ID：14710633
> 
> 赞同：5
> 
> 时间：2013-02-05T15:09:32.893
> 
> 标签：scala, immutability, mixins

我想以编程方式将 mixins 中发送的值绑定到一个实例，我想知道是否有比隐藏的可变对象更不可变的方法来做到这一点。我主要想将它用于注册表。我目前的方法在构建后并不是严格不可变的，有什么建议吗？

```
trait Numbers {
  lazy val values = holding
  private var holding = Set.empty[Int]
  protected def includes(i:Int) {
    holding += i
  }
}

trait Odd extends Numbers{
  includes(1)
  includes(3)
  includes(5)
  includes(7)
  includes(9)
}

trait Even extends Numbers {
  includes(2)
  includes(4)
  includes(6)
  includes(8)
} 
```

这给出了我想要的结果

```
val n = new Odd with Even
println(n.values)

Set(5, 1, 6, 9, 2, 7, 3, 8, 4) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T16:35:28.687

方法覆盖怎么样？然后，您可以在特征线性化中引用“超级”对象，

```
trait Numbers {
  def holding = Vector[Int]()
  lazy val values = holding
}

trait Odd extends Numbers {
  override def holding = super.holding ++ Vector(1,3,5)
}

trait Even extends Numbers {
  override def holding = super.holding ++ Vector(0,2,4)
}

(new Odd with Even).values // Vector(1, 3, 5, 0, 2, 4)
(new Even with Odd).values // Vector(0, 2, 4, 1, 3, 5) 
```

# c - 使用系统调用在 c 中实现 grep

> ID：14710638
> 
> 赞同：0
> 
> 时间：2013-02-05T15:09:43.510
> 
> 标签：c, grep, system-calls

```
#include<stdio.h>
#include<unistd.h>
#include<stdlib.h>
#include <sys/types.h> 
#include <sys/stat.h>
#include <unistd.h>
#include<string.h>
#include <fcntl.h>

void match_pattern(char *argv[])
{
    int fd,r,j=0;
    char temp,line[100];
    if((fd=open(argv[2],O_RDONLY)) != -1)
    {
        while((r=read(fd,&temp,sizeof(char)))!= 0)
        {
            if(temp!='\n')
            {
                line[j]=temp;
                j++;
            }
            else
            {
                if(strstr(line,argv[1])!=NULL)
                    printf("%s\n",line);
                memset(line,0,sizeof(line));
                j=0;
            }

        }
    }   
}

main(int argc,char *argv[])
{
    struct stat stt;
    if(argc==3)
    {
        if(stat(argv[2],&stt)==0)
            match_pattern(argv);
        else 
        {
            perror("stat()");
            exit(1);
        }
    }
} 
```

文件内容：

```
arunds ghh
sdf
hi
hello dude
am arun 
```

我的输出：

```
./mygrep arun file
arunds ghh
am arun 
```

我得到正确的输出

文件内容：

```
arun arundfdf arun
arunds ghh
sdf 
```

我的输出：

```
./mygrep arun file
arun arundfdf arun �5
arunds ghh 
```

我不知道为什么会打印一些不需要的字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:13:24.450

你永远不会 NULL 终止你的`line`缓冲区，所以它会在结束后溢出。在声明变量`memset`后也运行调用。`line`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:19:43.790

您需要空终止，`line`但为什么一次读取一个字符？您可以读取整行，`fgets()`这些行将为您终止缓冲区：

```
while (fgets(line, sizeof(line), file)) {
   if (strstr(line, argv[1])) {
    ...
   }
} 
```

这也将确保您不会溢出您分配的 100 字节缓冲区。

# oracle - 将 MVC4 与 Oracle 数据库一起使用

> ID：14710641
> 
> 赞同：2
> 
> 时间：2013-02-05T15:09:56.217
> 
> 标签：oracle, asp.net-mvc-4, simplemembership

在使用 SQL 服务器时，我已经成功地使用了 mvc4 simplemembership 提供程序。

但是现在我需要使用 Oracle 做同样的事情。除了下面这个链接

[http://www.mattjcowan.com/funcoding/2012/11/10/simplemembershipprovider-in-mvc4-for-mysql-oracle-and-more-with-llblgen/](http://www.mattjcowan.com/funcoding/2012/11/10/simplemembershipprovider-in-mvc4-for-mysql-oracle-and-more-with-llblgen/)

我找不到更多关于如何做到这一点的信息，甚至如果可能的话。

目前它在尝试初始化数据库连接时失败。

我在 webconfig 中使用的连接字符串如下

```
<connectionStrings>
<add name="MembershipOracle" connectionString="data  source=data******com/data0****.com;password=Co***password;persist security info=True;user id=hereIzMyID" providerName="Oracle.DataAccess.Client" />
<add name="CoreEntitiesOracle" connectionString="metadata=res://*/CoreEntities.csdl|res://*/CoreEntities.ssdl|res://*/CoreEntities.msl;provider=Oracle.DataAccess.Client;provider connection string=&quot;data source=data********com/data******.com;password=password;persist security info=True;user id=UserIDHere&quot;" providerName="System.Data.EntityClient" />
</connectionStrings> 
```

我对 mvc 和 dotnet 等世界很陌生，所以任何建议都会很有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T14:07:07.943

我通过使用 Devart 库实现了这一点。Devart 支持 MVC 4 for Oracle 的 SimpleMembership Provider。您需要购买 dotConnet for Oracle Professional。它将公开 Devart.Data.Oracle.Web，它是 WebMatrix.WebData 的替代品。在您的操作过滤器“InitializeSimpleMembershipAttribute.cs”中，只需将 WebMatrix 切换到 Devart 并让您的解决方案启动并运行。

# ios - 有没有办法获取有关视频应用中正在播放的视频的信息？

> ID：14710642
> 
> 赞同：0
> 
> 时间：2013-02-05T15:10:02.757
> 
> 标签：ios, video, notifications, itunes

我知道出于许可原因，Apple 不允许访问通过 iTunes 购买的电影。换句话说，我无法在我开发的通过 iTunes 购买的应用程序中播放电影。

我想知道的是 Apple 的视频应用程序是否会发送有关当前正在播放的视频的通知？更好的是，它是否提供有关电影实时状态的信息？为了澄清，我想在我正在开发的一个单独的应用程序中接收这些信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:27:17.343

这可能是不可能的，因为当您离开视频应用程序时，当前正在播放的视频会暂停。

# c# - 改进签名控件的面板 OnMouseMove 方法的性能

> ID：14710643
> 
> 赞同：1
> 
> 时间：2013-02-05T15:10:05.287
> 
> 标签：c#, .net, winforms, c#-2.0

我有一个 Windows Mobile 应用程序（C#，.Net framework 2），它的代码库现在也被用于在 Windows 7 和 Windows 8 上运行。我们为这个应用程序编写的控件之一是一个涂鸦控件，它允许用户捕获签名。此控件在 Windows Mobile 上运行良好，可用于很好地捕获签名。然而，在 Windows 上，`OnMouseMove`面板控件的覆盖方法太慢，或者很少调用，并且签名变得非常“块状”。因此，例如，如果您尝试捕获一个圆，在 Windows Mobile 上您会得到一个合理的圆，但在 Windows 上您最终会得到一个正方形，因为`mousemove`调用的频率不够高。这是`OnMouseMove`面板的覆盖方法：

```
protected override void OnMouseMove(MouseEventArgs e)
{
    base.OnMouseMove(e);
    if (!_captureMouseCoordinates) { return; }
    LineToDraw line = new LineToDraw();
    line.StartX = _lastMouseCoordinates.X;
    line.StartY = _lastMouseCoordinates.Y;
    line.EndX = e.X;
    line.EndY = e.Y;
    _points.Add(line);
    _graphicsHandle.DrawLine(_scribblePen, line.StartX, line.StartY, line.EndX, line.EndY);            
    // Refresh rectangle for the line drawn
    Point leftCorner = new Point();
    Size rectangleSize = new Size();
    // Case 1: line down, right
    if (line.StartX <= line.EndX && line.StartY <= line.EndY) 
    {
        leftCorner.X = line.StartX;
        leftCorner.Y = line.StartY;
    }
    // Case 2: Line up, right
    if (line.StartX <= line.EndX && line.StartY >= line.EndY) 
    {
         leftCorner.X = line.StartX;
         leftCorner.Y = line.EndY;
    }
    // Case 3: Line up, left
    if (line.StartX >= line.EndX && line.StartY >= line.EndY) 
    {
        leftCorner.X = line.EndX;
        leftCorner.Y = line.EndY;
    }
    // Case 4: Line down, left
    if (line.StartX >= line.EndX && line.StartY <= line.EndY) 
    {
        leftCorner.X = line.EndX;
        leftCorner.Y = line.StartY;
    }
    rectangleSize.Height = Math.Abs(line.EndY-line.StartY)+1;
    rectangleSize.Width = Math.Abs(line.EndX-line.StartX)+1;
    // save last mouse co-ordinates
    _lastMouseCoordinates.X = line.EndX;
    _lastMouseCoordinates.Y = line.EndY;
    Invalidate(new Rectangle(leftCorner.X,leftCorner.Y, rectangleSize.Width, rectangleSize.Height));
} 
```

上面代码中的 _captureMouseCoordinates 布尔成员变量是在“mousedown”事件处理程序上设置的。

我注意到，如果我在此方法中注释掉无效并且仅使签名无效`mouseup`，那么签名会更加平滑，但是在绘制签名时您不会看到签名。有没有人知道我如何才能让这个签名控件表现得更好，以便它产生的签名更平滑，但仍然能够在绘制线条时向用户提供反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:34:50.470

I don't know where _graphicsHandle is - but you should generally never save Graphics objects. Let all rendering be in Invalidate().

Create two collections:

```
List<Point> _currentStroke
List<List<Point>> _allStrokes 
```

MouseMove:

```
_currentStroke.Add(e.Location) 
```

MouseUp

```
 _allStrokes.Add(_currentStroke) 
```

On each OnPaint

```
 foreach(var stroke in _allStrokes)
       {g.DrawLines(pen, stroke.ToArray());}
   if(_currentStroke.Count > 1)
       g.DrawLines(pen, _currentStroke) 
```

(Obviously add all supporting code).

You should have no performance issues.

# sql - VB.NET 在 PL/SQL 中将空 SQL 日期作为时间传递

> ID：14710653
> 
> 赞同：1
> 
> 时间：2013-02-05T15:10:39.130
> 
> 标签：sql, vb.net, plsql

我正在编写一个 VB.NET 应用程序，它将数据从 MS SQL 数据库表移动到 Oracle 数据库表。

MS SQL DB 中的记录具有空日期。Oracle db 表列设置为允许空值。当我运行 VB.NET 应用程序并单步执行该应用程序时，一切正常，直到记录为空日期。VB.NET 将空日期显示为“12:00 AM”，没有日期，只有时间。

我得到的 Oracle 错误是：ORA-01847: day of month must be between 1 and last day of month

这是从 MS SQL DB 中提取日期的 SQL：

```
convert(varchar(10),DATE_COLUMN,101) end as 'DATE_COLUMN' 
```

这是我用于插入 Oracle DB 的 PL/SQL：

```
to_date('" & tmp_DATE_COLUMN & "','mm/dd/yyyy') 
```

![在此处输入图像描述](../Images/ed153ebb37307aa685e88cfa979f4b5e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:21:07.670

看起来你的`tmp_something_DATE`变量是 type `Date`。问题是它不能将`NULL/Nothing`值存储在`Date`变量中。如果您尝试将 a 分配`Date`给 Nothing，它实际上是分配给`Date.MinValue`，等于`#12:00:00 AM#`。您需要`Nullable(Of Date)`或`DataTable`直接使用列值。

# php - 我的 .htaccess 中的 RewriteRule 命令不起作用

> ID：14710659
> 
> 赞同：0
> 
> 时间：2013-02-05T15:10:46.783
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting, cpanel

我最近买了一个 php 网站，它使用 .htaccess 中的 RewriteRule 来重定向 url，例如 domain.com/login 被重定向到 domain.com/login.php 或 /register 到 /register.php 等等。这些是我的 .htaccess 文件的内容：

```
options -multiviews
<IfModule mod_rewrite.c>
RewriteEngine On 
RewriteBase /
RewriteRule ^users$ users.php
RewriteRule ^login$ login.php
RewriteRule ^logout$ logout.php
RewriteRule ^log_out$ log_out.php
RewriteRule ^forgot$ forgot.php
RewriteRule ^manage_gigs$ manage_gigs.php
RewriteRule ^manage_orders$ manage_orders.php
RewriteRule ^new$ new.php
RewriteRule ^suggestions$ index.php
RewriteRule ^search$ search.php
RewriteRule ^edit$ edit.php
RewriteRule ^edit_extra$ edit_extra.php
RewriteRule ^bookmark$ bookmark.php
RewriteRule ^bookmarks$ bookmarks.php
RewriteRule ^settings$ settings.php
RewriteRule ^balance$ balance.php
RewriteRule ^order$ order.php
RewriteRule ^orders$ orders.php
RewriteRule ^inbox$ inbox.php
RewriteRule ^conversations/([^/.]*)?$ conversations.php?u=$1&%{QUERY_STRING}
RewriteRule ^upload$ upload.php
RewriteRule ^check_new$ check_new.php
RewriteRule ^spam$ spam.php
RewriteRule ^thank_you$ thank_you.php
RewriteRule ^track$ track.php
RewriteRule ^send_track$ send_track.php
RewriteRule ^confirmemail$ confirmemail.php
RewriteRule ^rss$ rss.php
RewriteRule ^terms_of_service$ terms_of_service.php
RewriteRule ^privacy_policy$ privacy_policy.php
RewriteRule ^about$ about.php
RewriteRule ^contact$ contact.php
RewriteRule ^advertising$ advertising.php
RewriteRule ^signup$ signup.php
RewriteRule ^forgotpassword$ forgotpassword.php
RewriteRule ^feature$ feature.php
RewriteRule ^feature_success$ feature_success.php
RewriteRule ^purchases$ purchases.php
RewriteRule ^suggested$ suggested.php
RewriteRule ^mysuggestions$ mysuggestions.php
RewriteRule ^myreferrals$ myreferrals.php
RewriteRule ^levels$ levels.php
RewriteRule ^categories/([^/.]+)?$ cat.php?cid=$1&%{QUERY_STRING}
RewriteRule ^user/([^/.]+)?$ user.php?uname=$1&%{QUERY_STRING}
RewriteRule ^tags/([^/.]+)/([^/.]+)?$ tags.php?cid=$1&tag=$2&%{QUERY_STRING}
RewriteRule ^([^/.]+)/([^/.]+)/([^/.]*)?$ view.php?title=$1&id=$2&%{QUERY_STRING}
</IfModule>
<IfModule mod_security.c> 
   # Turn off mod_security filtering. 
   SecFilterEngine Off 

   # The below probably isn't needed, 
   # but better safe than sorry. 
   SecFilterScanPOST Off 
</IfModule> 
```

但是单击任何链接会导致 404 错误（找不到页面），因为没有重定向 url。我正在使用cpanel。我是否必须激活某些功能才能使其工作？这里可能有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:30:27.807

您似乎没有启用重写规则。

1.  打开`httpd.conf`;

2.  找到`mod_rewrite.so`提到的那条线；

3.  去掉`#`前面的标签（ ）；

4.  重新启动您的网络服务器；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T18:50:41.430

更改 `RewriteBase /` 方式 `RewriteBase / Your folder /`

# c# - Windows 8 Metro Style 应用程序 - 编辑 Word 文档

> ID：14710662
> 
> 赞同：1
> 
> 时间：2013-02-05T15:11:01.567
> 
> 标签：c#, windows-8, microsoft-metro, windows-store-apps, .doc

我正在尝试在 W8 Metro 应用程序中读/写一个单词（.docx）。对于普通的 .NET 应用程序，有许多库，但其中没有一个可用于 Windows 应用商店应用程序（例如，RT 应用程序不支持 Open XML SDK 2.5）。

唯一可行的方法是通过使用[Windows.Data.Xml.Dom](http://msdn.microsoft.com/en-us/library/windows/apps/br240819.aspx)的 xml 文档，这将是很多工作。有没有人使用 Windows.Data.Xml.Dom（或任何其他库）访问过 Word 文档并想分享他的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T06:02:48.853

我没有任何第一手经验，但在回到原始 XML 处理之前，我会先看看以下两种选择：

*   您最好的选择可能是[Syncfusion 的 DocIO](http://www.syncfusion.com/products/winrt/controls)。它不是免费的，但考虑到它可以为您节省多少工作量，价格真的很合理。甚至还有免费的测试版。
*   Chris Klug 为 Silverlight 创建了一个简单的[OpenXML 库](http://chris.59north.com/post/OpenXML-2b-Silverlight-using-a-little-library.aspx)。您可以检查它是否满足您的需求，然后尝试将其移植到 WinRT，因为源可用。

# android - 如何将 Android 应用程序连接到静态 IP 地址

> ID：14710663
> 
> 赞同：0
> 
> 时间：2013-02-05T15:11:05.430
> 
> 标签：android, wifi, ip-address, connect

我正在尝试开发一个需要通过 wifi 连接到另一台设备的应用程序。我知道另一台设备的 IP 地址，但是当我尝试连接它时，我无法连接。

```
private static String getUrl(String direccion) throws ConnectException{

    try {
        URL u = new URL("http://192.168.1.216");

        HttpURLConnection co = (HttpURLConnection) u.openConnection();
        BufferedReader reader = new BufferedReader(new InputStreamReader(co.getInputStream()));
        String line;

        while ((line = reader.readLine()) != null) 
            //buffer.append(line);
            System.out.println(line);

         reader.close();
         co.disconnect();
         System.out.println("######InputStream CORRECTA... "+u);

         return line;
    } catch (MalformedURLException e) {
        throw new ConnectException();

    } catch (java.net.ConnectException e){
        throw e;

    } catch (IOException e) {
        throw new ConnectException();
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:23:42.110

您还需要指定这些：

```
 co.setRequestMethod("GET");
      co.setDoOutput(true);
      co.connect(); 
```

因此，试试这个：

```
private static String getUrl(String direccion) throws ConnectException {
    try {
        URL u = new URL("http://192.168.1.216");

        HttpURLConnection co = (HttpURLConnection) u.openConnection();
        co.setRequestMethod("GET");
        co.setDoOutput(true);
        co.connect();
        BufferedReader reader = new BufferedReader(new InputStreamReader(co.getInputStream()));
        String line;

        while ((line = reader.readLine()) != null) 
            //buffer.append(line);
            System.out.println(line);

            reader.close();
            co.disconnect();
            System.out.println("######InputStream CORRECTA... "+u);

            return line;
    } catch (MalformedURLException e) {
        throw new ConnectException();

    } catch (java.net.ConnectException e){
        throw e;

    } catch (IOException e) {
        throw new ConnectException();
    } 
} 
```

# sql - Oracle Sub-select 耗时较长

> ID：14710665
> 
> 赞同：0
> 
> 时间：2013-02-05T15:11:08.883
> 
> 标签：sql, performance, oracle, optimization

我有一个包含两级子选择的 SQL 查询。这需要太多时间。

查询如下：

```
 select * from DALDBO.V_COUNTRY_DERIV_SUMMARY_XREF
    where calculation_context_key = 130205268077
    and DERIV_POSITION_KEY in 
          (select ctry_risk_derivs_psn_key 
            from DALDBO.V_COUNTRY_DERIV_PSN
            where calculation_context_key = 130111216755 
            --and ctry_risk_derivs_psn_key = 76296412
            and CREDIT_PRODUCT_TYPE = 'SWP OP'
            and CALC_OBLIGOR_COUNTRY_OF_ASSETS in 
                (select ctry_cd 
                 from DALDBO.V_PSN_COUNTRY
                 where calculation_context_key = 130134216755 
                --and ctry_risk_derivs_psn_key = 76296412
                )
           ) 
```

这些桌子很大！有没有可用的优化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T08:25:09.270

首先，您可以使用内部连接（而不是子选择）编写此查询吗？

```
select  A.* 
from    DALDBO.V_COUNTRY_DERIV_SUMMARY_XREF a, 
    DALDBO.V_COUNTRY_DERIV_PSN b,
    DALDBO.V_PSN_COUNTRY c
where   calculation_context_key = 130205268077
and a.DERIV_POSITION_KEY = b.ctry_risk_derivs_psn_key 
and b.calculation_context_key = 130111216755 
--and   b.ctry_risk_derivs_psn_key = 76296412
and b.CREDIT_PRODUCT_TYPE = 'SWP OP'
and     b.CALC_OBLIGOR_COUNTRY_OF_ASSETS = c.ctry_cd 
and c.calculation_context_key = 130134216755 
--and   c.ctry_risk_derivs_psn_key = 76296412 
```

其次，最佳实践表明，当您不从子选择中的表中查询任何数据时，最好使用 EXISTS 而不是 IN。新版本的 oracle 会自动将整个事情重写为内部连接。

最后，在不了解您的数据和您正在尝试做什么的情况下，我建议您尽可能少地尝试使用视图 - 如果您可以查询下属表，那将是最好的，您可能会立即看到性能提升.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:28:30.073

在不了解您的表或视图定义、索引等的情况下，我将首先查看子选择并确保它们以最佳方式执行。我还想知道每个子选择返回了多少值，因为这会影响性能。

compute_context_key 如何用于从 V_COUNTRY_DERIV_PSN 和 V_PSN_COUNTRY 检索行？是最优的执行计划吗？

如何在 V_COUNTRY_DERIV_SUMMARY_XREF 中使用 DERIV_POSITION_KEY 和 CALC_OBLIGOR_COUNTRY_OF_ASSETS 来检索行？再次，查看解释计划。

# r - 将 ggplot 与 ddply 相结合

> ID：14710671
> 
> 赞同：2
> 
> 时间：2013-02-05T15:11:26.990
> 
> 标签：r, ggplot2, plyr

我有`test.data`如下示例数据。

```
income  expend  id
9142.7  1576.2  1
23648.75 2595   2
9014.25 156 1
4670.4  604.4   3
6691.4  3654.4  3
14425.2 66  2
8563.45 1976.2  2
2392    6   1
7915.95 619.2   3
4424.2  504.2   2 
```

我首先`ddply`用来获取每个 id 的平均收入和支出

```
library(plyr)
group<-ddply(test.data, .id,summarize, income.mean=mean(income),expend.mean=mean(expend)) 
```

现在，我使用 plot 函数来`ggplot2`绘制`income.mean and expend.mean``id.`

```
library (ggplot2)
plot.income<-qplot(id,income.mean,data=group)
plot.expend<-qplot(id,expend.mean,data=group) 
```

虽然上面的代码运行没有任何错误，但我正在寻找在 ddply 中组合 qplot 函数的有效方法，反之亦然。另外，如果我需要结合这两个图，我该怎么做？

谢谢 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T15:41:10.587

我认为你想要得到的是需要从“qplot”函数切换到“ggplot”函数。在“ddply”函数中包含图形函数不会很漂亮，反之亦然。你最好将它们分开，所以我将只专注于组合图表。有两种好的（在我看来）方法可以做到这一点：

**选项 1**：只需在同一个 'ggplot' 对象上将两个绘图作为单独的几何图形。这不是两个很难做到的，并且像这样工作：

```
ggplot(group) + geom_point(aes(x=id, y=income.mean), colour="red") + geom_point(aes(x=id, y=expend.mean), colour="blue") 
```

这是一个快速的选项，可以用最少的计算完成工作。但是，它要求您为每列指定一个新几何。在您的示例数据中，这不是问题，但在许多情况下，您希望使用代码执行此操作，而不是手动执行此操作。

**选项 2**：重塑您的数据以将两个集合组合在一个图中。然后，我们可以通过变量着色来指定分组

```
library(reshape2)
plot_Data <- melt(group, id="id")

# Output of plot_Data
#   id    variable     value
# 1  1 income.mean  6849.650
# 2  2 income.mean 12765.400
# 3  3 income.mean  6425.917
# 4  1 expend.mean   579.400
# 5  2 expend.mean  1285.350
# 6  3 expend.mean  1626.000

ggplot(plot_Data, aes(x=id, y=value, col=variable)) + geom_point() 
```

![图表示例](../Images/b075f410cb23734bdf3a262cbd7aef3a.png)

这种方法的缺点是我们要进行更多的计算，因此处理大型复杂数据帧可能会变得很慢。然而，优势（这是巨大的）是我们不必知道我们正在绘制的数据框中存在哪些列。一切都在没有我们干预的情况下进行分类、着色和绘制，因此我们可以灵活地将其用于任何事情。

您应该能够从这里进行调整以满足您的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T15:37:29.823

要结合这两个图，我必须将数据`reshape2`包放入`melt`数据中：

```
library(ggplot2)
library(plyr)
library(reshape2)

test.data <- read.table(text="income  expend  id
                 9142.7  1576.2  1
                 23648.75 2595   2
                 9014.25 156 1
                 4670.4  604.4   3
                 6691.4  3654.4  3
                 14425.2 66  2
                 8563.45 1976.2  2
                 2392    6   1
                 7915.95 619.2   3
                 4424.2  504.2   2", header=TRUE)

qplot(data=melt(ddply(test.data, .(id), colwise(mean)), id.vars="id"), x=id, y=value, colour=variable) 
```

![在此处输入图像描述](../Images/d6022174bfea4c9395326e3e80880876.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T15:38:58.323

好吧，您的问题不是很精确，因为我们不知道您到底想做什么。但这里有一个猜测：

```
d <- read.table(textConnection("income  expend  id
9142.7  1576.2  1
23648.75 2595   2
9014.25 156 1
4670.4  604.4   3
6691.4  3654.4  3
14425.2 66  2
8563.45 1976.2  2
2392    6   1
7915.95 619.2   3
4424.2  504.2   2"), header=TRUE)

library(reshape2)
d2 <- melt(d, id.var="id")
ggplot(data=d2, aes(x=id,y=value)) + stat_summary(fun.y="mean", geom="bar") + facet_grid(.~variable) 
```

会给 ：

![在此处输入图像描述](../Images/858136eb214ac85dc71a8cf4a2408e00.png)

# colors - 做什么 意思是？

> ID：14710674
> 
> 赞同：5
> 
> 时间：2013-02-05T15:11:40.663
> 
> 标签：colors, standards, openxml, spreadsheet, ecma

我有一个由 Excel 2007 创建的文档：

```
<fileVersion appName="xl" lastEdited="4" lowestEdited="4" rupBuild="4506" codeName="{B7FE6334-C1A2-E50D-BD3D-5F4D41BBC2E3}"/> 
```

...在字体定义中包含以下颜色`xl/styles.xml`：

```
<color indexed="81"/> 
```

我从 ECMA 标准中了解到`<indexedColors>`，`xl/styles.xml`如果有这样的集合，这个颜色索引是指其中的集合，否则它是指标准中显示的默认调色板。我的问题是这个文档不包含任何`<indexedColors>`元素，默认调色板只有66个条目，所以我不知道81指的是什么。还有人吗？

有趣的是，谷歌搜索`color indexed="81"`返回了一些包含相同内容的示例 OpenXML 片段，但可惜没有解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T20:33:21.260

[MSDN 文档](http://msdn.microsoft.com/en-us/library/documentformat.openxml.spreadsheet.color.aspx)将OpenXML`indexed`中类的属性指定为：`Color`

```
Indexed color value. Only used for backwards compatibility. References a color in indexedColors.
The possible values for this attribute are defined by the W3C XML Schema unsignedInt datatype. 
```

它是更大的[DocumentFormat.OpenXml.Spreadsheet](http://msdn.microsoft.com/en-us/library/cc840243.aspx)命名空间的一部分。

您描述的文件是通过包含 81 值的源代码构建的。它可能看起来像这个[Java 代码](http://social.msdn.microsoft.com/Forums/pl/oxmlsdk/thread/40a95862-9adc-492d-a046-97a5e6e20260)，从一个不相关的颜色索引中定义了一个带有 81U 的 Color() 实例。

如果您需要找出原因，我会在 MSDN 上创建一个帐户并回复 Jack9999 的帖子，询问他为什么使用该值。我猜这是他的一个错误，熟悉一个单独的并且可能与 JAVA 相关的颜色索引。

Excel - 无法识别它 - 只是使用它们的默认注释颜色值。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-25T17:45:18.960

索引 0x51 是系统工具提示文本颜色。（即 ::GetSysColor(COLOR_INFOTEXT) ）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-28T20:21:38.877

NECRO 回答：来自 Vincent Tan 的*SpreadsheetOpenXmlFromScratch*：

> 对于颜色，如果您正在处理 DocumentFormat.OpenXml.Color 类，则有 3 种设置颜色值的方法：
> 
> *   索引颜色
> *   RGB 颜色
> *   主题色
> 
> Color 类有一个名为 Auto 的属性。我没有找到它的用途，您可能可以忽略它。如果您在任何情况下都不设置，Excel 不会因错误而窒息……</p>
> 
> 索引颜色是为了向后兼容，所以我不会教你怎么做。基本上，它是存储在电子表格样式表中的调色板的索引值。我们将在下一章处理 Stylesheet 类。您可以自行探索 IndexedColors 类，它是 Colors 类的子类，而 Colors 类又是 Stylesheet 的子类。

# android - 未解决的包含： 日食安卓

> ID：14710677
> 
> 赞同：-1
> 
> 时间：2013-02-05T15:11:51.810
> 
> 标签：android, c++, eclipse

为什么不在我的 NDK algoritmh.h 中？？？？我怎样才能使我的 std::Sort ???? 一维数组

/---------------------------------------------------- --------- 解决了第二个问题:: 和 2\. 问题：我的其他代码开始说这个错误:) 解决了！

```
 Multiple markers at this line
- call of overloaded 'log(int)' is 
 ambiguous
- candidates are: 
```

在这段代码中：

```
 int m = (int) (log (524288) / log (2)); 
```

好的，这已解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:31:09.997

`std::log`具有接受`float`或`double`作为`long double`参数的重载。编译器不知道您要的是哪个函数。

尝试：

```
int m = (int) (log (524288.) / log (2.)); 
```

请注意，参数 to`log()`是 now `double`，而不是`int`。

# c# - 我想在地址栏中隐藏 URL

> ID：14710680
> 
> 赞同：0
> 
> 时间：2013-02-05T15:11:59.503
> 
> 标签：c#, javascript, html, iframe

我想显示 webpath 中提供的报告（pdf）假设`(http://myservre/reports/myrepoft.pdf)`。目前，它正在像这样通过 IFrame 显示。

```
strReportPDFFile = "`http://myservre/reports/myrepoft.pdf`"

<IFRAME frameborder="1" onload="onchangestate()" src="" id="ifrmShowReport" frameborder="0" height="100%" width="100%" marginwidth="0"    align="top" style="overflow: none;overflow-x: auto;display:none"></IFRAME>

document.getElementById("formContainer").style.display = "block";
document.getElementById("ifrmShowReport").style.display = "block";
document.getElementById("ifrmShowReport").src = strReportPDFFile; 
```

URL 显示在我想隐藏 URL 的地址栏中。是否可以 ？如果没有，请提出一些更好的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:39:34.263

我认为您提出问题的主要原因（隐藏 PDF 文件的 URL）是出于安全问题。例如，您的服务器上有一些 PDF 文件必须仅从目标受众而不是所有人发送和阅读。

我给你一些关于如何实现这个意图的基本提示：

*   将 PDF 文件放在网络服务器的公共根目录之外
*   实现一个服务器端脚本：
    *   检查用户是否已通过身份验证并有权获取文件
    *   获取一些参数来检索正确的文件
    *   使用此服务器端脚本内容处置提供文件（作为附件，发送正确的 Mime-Type 和“虚构”URL）

由于您将 C# 放在问题标签中，因此我在使用 C# 添加内容配置到标题中向您介绍： Response.AddHeader("content-disposition", @"attachment;filename=""MyFile.pdf""");

然后，您可以在任何您希望的地方显示您的 pdf：空白页、iframe ... 可以肯定的是，您不会找到仅使用 HTML/Javascript 的解决方案，对于中级互联网用户来说，这不是容易避免的解决方案之一。

# algorithm - 部分填充多边形网格的算法

> ID：14710682
> 
> 赞同：9
> 
> 时间：2013-02-05T15:12:01.450
> 
> 标签：algorithm, 3d, geometry, simulation, theory

**概述：**
我有一个由 3D 多边形网格表示的简单塑料沙箱。在将特定量的水倒入沙箱后，我需要能够确定水位。

*   倒水时，水从上方均匀分布
*   没有流体模拟，水倒得很慢
*   它需要快速

**问题：**
我可以使用什么样的技术/算法来解决这个问题？

![表示简单沙箱的多边形网格](../Images/ddef9b0acd44071354e8ddd17f2592cb.png)

我不是在寻找可以执行此操作的程序或类似程序，只是算法-我将执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:16:34.920

只是一个想法：

首先，您计算所有鞍点。离散莫尔斯理论或拓扑持久性等工具*可能*在这里很有用，但我对它们知之甚少，无法确定。接下来，您迭代所有鞍点，从最低点开始，并计算水开始穿过该点的时间点。这是两个相邻盆地的较浅盆地（就体积与表面积而言）达到与该鞍点高度相匹配的水平的时间。从那时起，倾倒在该表面上的水将流向另一个盆地，并改为增加其水位，直到两个盆地达到相等的水位。之后，它们将被视为一个单独的盆地。在此过程中，您可能必须更正到达其他鞍点的时间，因为与盆地相关的区域会发生变化。您按时间增加的顺序进行迭代，而不是增加高度（例如 使用带有减少键操作的堆）。一旦最后一对盆的高度相等，就完成了；之后只剩下一个盆地。

总体而言，这为您提供了一系列“有趣”的时间，其中事情发生了根本性的变化。在这两者之间，问题将更加局部，因为您只需考虑单个盆地的形状即可计算其水位。在这个局部问题中，您*知道*该盆地中包含的水量，因此您可以例如使用二分法来找到合适的水位。相邻的“有趣”时间可能会为您的二等分提供有用的终点。

要计算三角形多面体的[体积](http://en.wikipedia.org/wiki/Tetrahedron#Volume)，可以使用 3D 版本的[鞋带公式](https://en.wikipedia.org/wiki/Shoelace_formula)：对于每个三角形，取其三个顶点并计算它们的行列式。将它们加起来除以 6，就得到了封闭空间的体积。确保所有三角形的方向一致，即全部从内部看或全部从外面看。选择决定整体标志，试试看哪个是哪个。

请注意，您的问题可能需要细化：当盆地中的水位达到*完全相同高度的*两个鞍点时，水流向哪里？我猜，如果没有流体模拟，这并没有很好的定义。你可以争辩说它应该在所有相邻的盆地之间平均分配。您可能会争辩说，这种情况不太可能发生在真实数据中，因此可以任意选择一个邻居，这意味着这个鞍点的高度比其他鞍点的高度要小得多。或者你可以想出一些其他的解决方案。如果您对此案例感兴趣，那么您可能需要澄清您的期望。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T17:06:16.510

一个简单的解决方案浮现在脑海中：通过不同高度的水进行二进制搜索，计算所含水的体积。即从沙箱深度D的水高度的上估计开始。请注意，由于**沙子是多孔**的，因此最大体积将是装满水的盒子；在我们假设的后院里，任何更多的水都会喷回到草丛中。另请注意，这意味着您无需担心解决方案中的鞍点或多个水位；同样，我们假设这里是普通的多孔沙子，而不是由岩石构成的山脉。计算高度 D 所含的水量。如果它在您的近似阈值内，则退出。否则，用不同的高度调整你的估计，然后重复。

请注意，对于任何给定的三角形沙子，计算沙子表面上方的水量很容易。它是三棱柱的体积加上与沙子接触的四面体的体积：

![水量](../Images/fe33d6fc938463e1192ea15650051bed.png)

请注意，沙线以下的水量将类似地计算，但体积会更小，因为它的一部分将被沙子占据。我建议在互联网上搜索典型的沙子含气量或持水量。或者任何短语都会返回一个理智的结果。另请注意，如果沙子高于吃水线，则某些三角形的沙子上方的水可能为零。

一旦您获得了网格的单个三角形的沙线上方和下方的水量，您只需遍历所有三角形以获得给定高度下整个沙箱的总体积。

请注意，这是一个非常愚蠢的算法，但我怀疑与试图做任何更聪明的花哨的 schmancier 算法相比，它会有不错的性能。请记住，这只是每个三角形的少量乘法和求和，并且带有少量`if`语句或其他流控制的盲循环往往会快速执行，因为处理器可以很好地流水线化。

如果您有一个高度详细的沙箱网格，并且希望将计算推入多个核心，则此方法可以轻松并行化，而不是在每个三角形上循环。或者保留循环，并将不同的高度推入每个核心。或者是其他东西; 我将并行化和加速作为练习留给读者。

# asp.net-mvc-4 - 在常规 MVC 项目中使用微风而不是水疗中心

> ID：14710688
> 
> 赞同：5
> 
> 时间：2013-02-05T15:12:19.250
> 
> 标签：asp.net-mvc-4, breeze

微风是一个很棒的图书馆。由于项目复杂性，我不想使用 spa 模板。有没有办法可以在常规的 .net mvc4 项目中使用微风？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T05:16:57.237

我们很快就会发布对它的支持 - 直接在 ASP.NET MVC 和 Visual Studio 中。敬请关注...！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T17:14:50.513

当然，只需从一个空的 .net MVC4 项目开始，然后运行“基本”微风 nuget 包（没有说“示例”的包）。

# c# - ColorTranslator.ToHtml() 返回字符串问题

> ID：14710698
> 
> 赞同：5
> 
> 时间：2013-02-05T15:12:34.140
> 
> 标签：c#

我需要颜色的十六进制字符串，所以我使用`ColorTranslator.ToHtml()`返回颜色字符串十六进制的属性。

如果我选择随机颜色，它会返回“ **#FFF0B6** ”等。但是，如果我选择系统定义的颜色，例如它会在字符串中`Color.Black`返回“ **Black ”。**

我需要字符串中的十六进制颜色代码，无论它们是否在系统中定义。有什么建议么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-05T15:17:33.513

我发现这种扩展方法对我很有效：

```
public static string ToHexValue(this Color color)
{
   return "#" + color.R.ToString("X2") + 
                color.G.ToString("X2") + 
                color.B.ToString("X2");
} 
```

[根据 MSDN](http://msdn.microsoft.com/en-us/library/system.drawing.colortranslator.tohtml.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)，这确实`ColorTranslator.ToHtml()`是打算做的。

# jquery - 如何正确订购验证检查

> ID：14710703
> 
> 赞同：-1
> 
> 时间：2013-02-05T15:12:47.447
> 
> 标签：jquery

只是对我的验证有一点问题。我想要发生的是，我想通过在底部显示验证消息来检查是否首先添加了所有行，说明我还有很多问题。只有当所有问题都已添加并且验证已通过时，它才会显示每个单独问题的验证，例如请选择至少一个答案或您选择的答案少于所需数量。

目前它正在以相反的方式进行操作，例如它声明我需要选择至少一个答案，然后当它被排序时，它声明我需要添加其余的问题。

```
function validation() {

    var marks = parseInt($("#total-weight").text());
    var _qid = "";
    var _msg = "";

    var maxQuestions = <? php echo(int) $_SESSION['textQuestion']; ?> ;
    var questionsAdded = $('tr.optionAndAnswer').length;

    var alertValidation = "";
    // Note, this is just so it's declared...
    $("tr.optionAndAnswer").each(function () {

        _qid = $("td.qid", this).text();
        _msg = "You have errors on Question Number: " + _qid + "\n";

        $(".numberAnswerTxtRow", this).each(function () {
            var currenttotal = $(this).closest('.optionAndAnswer').find('.answerBtnsOn').length;

            if ($(this).val() == 0) {
                alertValidation += "\n\u2022 You have not selected an answer, please select at least one answer\n";
            } else if (currenttotal < $(this).val()) {
                alertValidation += "\n\u2022 You have selected less answers than the required amount\n";
            }

            if (alertValidation != "") {
                return false; //Stop the each loop 
            }
        });

    });

    if (alertValidation == "") {
        if (questionsAdded < maxQuestions) {
            _msg = '';
            alertValidation = ("You Have Not Added in All of Your Questions \n\n\u2022 You have " + (maxQuestions - questionsAdded) + " Questions Remaining:");
        }
    }

    if (alertValidation != "") {
        alert(_msg + alertValidation);
        return false;
    }

    return true;
} 
```

**下面是整个代码**- 在下面的代码中，它不会显示其他验证消息，直到首先通过剩余验证的问题数。像我提到的唯一问题是其中的验证`$(".numberAnswerTxtRow",this).each(function() {`也是其他包含 else if 的函数中唯一的函数：

```
function validation() {

    var marks = parseInt($("#total-weight").text());
    var _qid = "";
    var _msg = "";

    var maxQuestions = <? php echo(int) $_SESSION['textQuestion']; ?> ;
    var questionsAdded = $('tr.optionAndAnswer').length;

    var alertValidation = "";
    // Note, this is just so it's declared...
    $("tr.optionAndAnswer").each(function () {

        _qid = $("td.qid", this).text();
        _msg = "You have errors on Question Number: " + _qid + "\n";

        $(".textAreaQuestion", this).each(function () {

            if (!this.value || this.value.length < 5) {
                alertValidation += "\n\u2022 You have not entered a valid Question\n";
            }

            if (alertValidation != "") {
                return false; //Stop the each loop 
            }
        });

        $(".numberAnswerTxtRow", this).each(function () {

            var currenttotal = $(this).closest('.optionAndAnswer').find('.answerBtnsOn').length;

            if ($(this).val() == 0) {
                alertValidation += "\n\u2022 You have not selected an answer, please select at least one answer\n";
            } else if (currenttotal < $(this).val()) {
                alertValidation += "\n\u2022 You have selected less answers than the required amount\n";
            }

            if (alertValidation != "") {
                return false; //Stop the each loop 
            }

        });

        $(".txtWeightRow", this).each(function () {

            if (!this.value) {
                alertValidation += "\n\u2022 Please enter in a figure for Number of Marks for this Question\n";
            }

            if (alertValidation != "") {
                return false; //Stop the each loop 
            }
        });

        if (alertValidation != "") {
            return false;
        }
    });

    if (alertValidation == "") {

        if (questionsAdded < maxQuestions) {
            _msg = '';
            alertValidation = ("You Have Not Added in All of Your Questions \n\n\u2022 You have " + (maxQuestions - questionsAdded) + " Questions Remaining:");
        }

    }

    if (alertValidation != "") {
        alert(_msg + alertValidation);
        return false;
    }

    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:23:46.557

如果我解决了你的问题，这就是你必须做的：

```
$questions = array();

while ($selectedstudentanswerstmt->fetch()) {

    //Check if the student data exist.
    if (!isset($questions[$detailsStudentId])) {
        $questions[$detailsStudentId] = array(
            'studentalias' => $detailsStudentAlias,
            'studentforename' => $detailsStudentForename,
            'studentsurname' => $detailsStudentSurname,
            'questions' => array();
        );
    }

    $questions[$detailsStudentId]['questions'][$detailsQuestionId] = array(
        'questionno'=>$detailsQuestionNo,
        'content'=>$detailsQuestionContent,
        'optiontype'=>$detailsOptionType,
        'noofanswers'=>$detailsNoofAnswers,
        'answer'=>$detailsAnswer,
        'replytype'=>$detailsReplyType,
        'questionmarks'=>$detailsQuestionMarks,
        'studentanswer'=>$detailsStudentAnswer,
        'responsetime'=>$detailsResponseTime,
        'mouseclick'=>$detailsMouseClick,
        'studentmark'=>$detailsStudentMark
    );

} 
```

然后你可以很容易地迭代数组：

```
foreach ($questions as $studentId => $studentData) {
    echo $studentData['studentAlias'].' - '.$studentData['studentforename'].' '.$studentData['studentsurname'].'<br/>';

    foreach ($studentData['questions'] as $questionId => $questionData) {
        echo '<strong>'.$questionData['questionno'].': '.$questionData['content'].'<br/>';
        echo $questionData['optiontype'].' - '.$questionData['noofanswers'].' - '.$questionData['answer'].' - '.$questionData['replytype'].' - '.$questionData['questionmarks'].'<br/>';
        echo $questionData['studentanswer'].' - '.$questionData['responsetime'].' - '.$questionData['mouseclick'].' - '.$questionData['studentmark'].'<br/>';
    }
} 
```

这是你要找的吗？

# python - Python os.listDir 在某些文件夹上抛出“WindowsError：[错误 5] 访问被拒绝：”

> ID：14710708
> 
> 赞同：1
> 
> 时间：2013-02-05T15:13:12.227
> 
> 标签：python, windows, file, operating-system

基本上我有一个用 Python 2.6 编写的 FileExplorer 类。效果很好，我可以浏览驱动器、文件夹等。但是，当我到达特定文件夹*'C:\Documents and Settings* /.*'*，我的脚本所基于的 os.listdir 时，会引发此错误：

**WindowsError：[错误 5] 访问被拒绝：'C:\Documents and Settings/ *。*'**

这是为什么？是因为这个文件夹是只读的吗？或者它是 Windows 正在保护的东西，我的脚本无法访问？！

这是有问题的代码（第 3 行）：

```
def listChildDirs(self):
    list = []
    for item in os.listdir(self.path):
        if item!=None and\
            os.path.isdir(os.path.join(self.path, item)):
            print item
            list.append(item)
        #endif
    #endfor
    return list 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T15:37:47.033

在 Vista 和更高版本中，C:\Documents and Settings 是一个联结，而不是一个真正的目录。

你甚至不能`dir`在其中做一个直线。

```
C:\Windows\System32>dir "c:\Documents and Settings"
 Volume in drive C is OS
 Volume Serial Number is 762E-5F95

 Directory of c:\Documents and Settings

File Not Found 
```

可悲的是，使用`os.path.isdir()`，它会返回`True`

```
>>> import os
>>> os.path.isdir(r'C:\Documents and Settings')
True 
```

您可以查看这些在 Windows 中处理符号链接的答案。

*   [在 Python 中创建 NTFS 连接](https://stackoverflow.com/questions/1143260/create-ntfs-junction-point-in-python)
*   [windows中的符号链接](https://stackoverflow.com/questions/1447575/symlinks-on-windows/7924557#7924557)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:26:26.423

这可能是目录访问的权限设置，甚至目录不存在。您可以以管理员身份运行脚本（即访问所有内容）或尝试以下操作：

```
def listChildDirs(self):
    list = []
    if not os.path.isdir(self.path):
        print "%s is not a real directory!" % self.path
        return list
    try:
        for item in os.listdir(self.path):
            if item!=None and\
                os.path.isdir(os.path.join(self.path, item)):
                print item
                list.append(item)
            #endif
        #endfor
    except WindowsError:
        print "Oops - we're not allowed to list %s" % self.path
    return list 
```

顺便说一句，你听说过[`os.walk`](http://docs.python.org/2/library/os.html#os.walk)吗？看起来这可能是您要实现的目标的捷径。

# postgresql - 如何在 PostgreSQL 中将子查询作为布尔列反馈？

> ID：14710709
> 
> 赞同：3
> 
> 时间：2013-02-05T15:13:13.333
> 
> 标签：postgresql, subquery

我们将帐户信息存储在 PostgreSQL 数据库中。

帐户在“accounts”表中，组在“grp”表中，它们由“account_grp”表绑定在一起，该表将 account_id 映射到 grp_id。

我正在尝试制作一个查询，它会给我一个视图，让我搜索一个组的成员是否是另一个组的成员，即我想要视图中有一个“is_in_foobar_group”列，所以我可以`SELECT * FROM my_view WHERE grp_id = 1234;`回来

```
username | is_in_foobar_group | grp_id 
---------+--------------------+-------
bob      | true               | 1234
alice    | false              | 1234 
```

foob​​ar 位是硬编码的，不需要更改。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T16:33:40.927

更简单、更快、更方便：

```
WITH x AS (SELECT 1234 AS foobar)  -- optional, to enter value only once
SELECT a.username
      ,EXISTS (
         SELECT 1 FROM account_grp g 
         WHERE  g.account_id = a.account_id
         AND    g.grp_id = x.foobar
         ) AS is_in_foobar_group
      ,x.foobar AS grp_id
FROM  accounts a, x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:49:23.983

也许使用 EXISTS 运算符会有所帮助： [http ://www.postgresql.org/docs/9.2/static/functions-subquery.html#FUNCTIONS-SUBQUERY-EXISTS](http://www.postgresql.org/docs/9.2/static/functions-subquery.html#FUNCTIONS-SUBQUERY-EXISTS)

我不确定您是否可以在 SELECT 语句中使用它，而且我没有 PostgreSQL 实例来检查它。在最坏的情况下，您必须执行 2 个查询，例如：

```
SELECT username, true, grp_id 
FROM accounts a INNER JOIN account_grp g1 on a.account_id = g.account_id
WHERE EXIST (SELECT 1 FROM account_grp g2 
    WHERE g2.account_id = a.account_id and g2.grp_id = [foobar])
UNION
SELECT username, false, grp_id 
FROM accounts a INNER JOIN account_grp g1 on a.account_id = g.account_id
WHERE NOT EXIST (SELECT 1 FROM account_grp g2 
    WHERE g2.account_id = a.account_id and g2.grp_id = [foobar]) 
```

# jquery - 在jQuery中创建第n个li的字符串

> ID：14710714
> 
> 赞同：1
> 
> 时间：2013-02-05T15:13:24.693
> 
> 标签：jquery, html-lists, css-selectors

如何创建每个 3rd li 的字符串，导致

```
black,red,blue 
```

由此：

```
<div id="container">
    <ul>
        <li>shirt</li>
        <li>x-large</li>
        <li>black</li>
        <li>9.99</li>
    </ul>
    <ul>
        <li>pants</li>
        <li>large</li>
        <li>red</li>
        <li>19.99</li>
    </ul>
    <ul>
        <li>shoes</li>
        <li>medium</li>
        <li>blue</li>
        <li>9.99</li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T15:14:44.243

尝试如下，

```
$(function () {
   var result = [];
   $('#container ul').find('li:eq(2)').each(function () {
      result.push($(this).text());
   });

   result.join();

}); 
```

**演示：http:** [//jsfiddle.net/BxJbH/](http://jsfiddle.net/BxJbH/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T15:15:32.503

您可以使用`nth-child(3)`来获取所有第三个孩子的元素：

```
var colors = [];
$("#container").find('li:nth-child(3)').text(function (_, text) {
    colors.push(text);
});
console.log(colors.join(',')); 
```

[http://jsfiddle.net/ExplosionPIlls/CfrWX/1/](http://jsfiddle.net/ExplosionPIlls/CfrWX/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T15:16:08.757

`+=`您可以使用数组来连接字符串，而不是使用数组：

```
myString = "";
$('ul li:nth-child(3)').each(function(){
    myString += ","+$(this).text();
})
console.log(myString.substring(1));
// returns 'black,red,blue' 
```

[http://jsfiddle.net/phtMx/](http://jsfiddle.net/phtMx/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T15:27:52.500

```
var concatenated = $.map($('li:nth-child(3)'), function(a, i) {
    return $(a).html();
}).join(',') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T15:27:01.310

就像其他答案所说，使用[nth-child](http://api.jquery.com/nth-child-selector/)选择器：

```
$(function(){
    var strings = $('#container').find('li:nth-child(3)').map(function(){
        return $(this).text();
    }).get().join(', ');
    $('#result').text(strings);
}); 
```

演示 - [http://jsbin.com/efavor/2/edit](http://jsbin.com/efavor/2/edit)

# pascal - 在 Pascal 中调用方法

> ID：14710723
> 
> 赞同：0
> 
> 时间：2013-02-05T15:13:53.103
> 
> 标签：pascal, invoke

我面临以下问题：

我的主要编程语言是带有 Qt4 库的 C++，但现在我必须编写一个 Pascal Wrapper，它应该可以在 Pascal 中使用 C DLL 的功能。现在我想让从任何指针调用方法成为可能。但是我找不到调用方法的 Pascal 方法。我想要 QT 中的 QMetaObject::invokeMethod 方法。我得到以下代码：

```
unit CgPConnect;

//{$mode objfpc}{$H+}
{$mode delphi}

interface

    uses
        Classes, SysUtils, dynlibs;

    type

        Callback = Record
          var callbackObject: Pointer;
          var objectFunction: string;
        end;

        CallbackObject = Record
          var objectName: string;
          var callback: Callback;
        end;

        MutableObject = Object
          var name: string;
          var state: string;
          var properties: array of VariantMap;
          var annotations: array of VariantMap;
        end;

        PConnect = Class
            constructor create(connectorPath: string);
            destructor destroy;

            private
                var hostactionCallbacks: array of CallbackObject;
                var mConnectorPath: string;
                var mConnectorLibrary: TLibHandle;
                function loadConnectorLibrary: Boolean;

            public
                procedure registerCallbackForHostaction(objectName, objectFunction: string; callbackObject: pointer);
                procedure callHostactionCallback(receivedObject :MutableObject);

                var mLibraryLoaded: Boolean;
        end;

    implementation

    constructor PConnect.create(connectorPath: string);
    begin
        mConnectorPath:= connectorPath;
        mLibraryLoaded:= false;
        //Eventuell noch slash hinzufügen
        mLibraryLoaded:= loadConnectorLibrary;
    end;

    destructor PConnect.destroy;
    begin
        UnloadLibrary(mConnectorLibrary);
    end;

    procedure PConnect.registerCallbackForHostaction(objectName, objectFunction: string; callbackObject: pointer);
    var c: Callback;
    var callbackCount: integer;
    begin
        if mLibraryLoaded = true then
        begin
            c.callbackObject:= callbackObject;
            c.objectFunction:= objectFunction;
            callbackCount:= Length(hostactionCallbacks)+1;
            SetLength(hostactionCallbacks, callbackCount);
            hostactionCallbacks[callbackCount].objectName:= objectName;
            hostactionCallbacks[callbackCount].callback:= c;
        end;
    end;

    procedure PConnect.callHostactionCallback(receivedObject :MutableObject);
    var receivedObjectName, objectFunction: string;
    var i, count: integer;
    var callbackObject: pointer;
    begin
        if mLibraryLoaded = true then
        begin
            receivedObjectName:= receivedObject.name;
            count:= Length(hostactionCallbacks);
            for i:=0 to count do
            begin
                if hostactionCallbacks[i].objectName = receivedObjectName
                begin
                    objectFunction:= hostactionCallbacks[i].callback.objectFunction;
                    callbackObject:= hostactionCallbacks[i].callback.callbackObject;
                    if callbackObject <> 0 then
                        //INVOKE METHOD (objectFunction) OF OBJECT (callbackObject)
                end;
            end;
        end;
    end;
end. 
```

我会很高兴得到一个快速的答案:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:02:56.323

您不能直接和可移植地从 Pascal 调用 C++ 方法。如果您的回调函数是一个 C++ 对象，请忘记它。

否则填充一个 TMethod 对象并将其转换为正确的“对象过程”声明。不要忘记调用约定。

对于更奇怪的解决方案，您可能需要查看 (RemObjects') Pascalscript。

Ps 这与您甚至无法从另一个 C++ 编译器可靠地调用 C++ 方法相同。它本身不是 Pascal vs C++。

# java - Spring找不到注解生成的bean

> ID：14710725
> 
> 赞同：0
> 
> 时间：2013-02-05T15:14:04.107
> 
> 标签：java, spring, inversion-of-control, spring-3

我想从我的 spring 上下文中检索属于某个类（或子类）的所有 bean。但这仅检测由 xml 专门定义的 bean。由注解定义的 Bean，例如`@Service`此处未检测到。（尽管在应用程序内部，它们被完美地检测、初始化和自动装配）。

```
GenericXmlApplicationContext ctx = new GenericXmlApplicationContext("*-context.xml");
Map<String, DataUpdater> beans = ctx.getBeansOfType(MyClass.class, true, true);
// why are beans missing? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:26:03.840

抱歉，一些愚蠢的错误...我没有正确加载我的 xml 文件，但是作为某些后台进程实例化的 bean 正在使用正确的文件创建并行 xml 上下文。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-05T15:24:06.120

我见过类似的问题，但我从来没有`getBeansOfType()`正常工作。我的解决方案：

```
@Autowired
public void setMyClasses( List<MyClass> beans ) {
    ...
} 
```

Spring 会以某种方式收集列表并注入它。如果不需要知道何时注入列表，也可以将其作为字段注入：

```
@Autowired
private List<MyClass> beans; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T15:24:07.913

您还必须在

```
AnnotationConfigApplicationContext 
```

如果要在 XmlContext 和 AnnotationContext 中搜索，必须将它们与

```
 @ImportResource("classpath:xmlcontext.xml") 
```

在带注释的配置中

或者你可以尝试实现`ApplicationContextAware`接口并在它提供的上下文中搜索。

# asp.net - 如何在 iis 7 上更改 uploadaheadsize

> ID：14710739
> 
> 赞同：0
> 
> 时间：2013-02-05T15:14:45.357
> 
> 标签：asp.net, iis, iis-7, windows-server-2008

我有一个用 asp net mvc 4（IIS 7 和 windows server 2008）开发的应用程序，它有一个上传系统。

问题是对于大文件，我会收到 413 http 错误。

我正在尝试设置uploadaheadsize，但在任何地方都找不到。

尝试过角色和功能以及在应用程序池中。有人可以指导我完成这个配置设置吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T10:30:26.303

我找到了解决方案。

刚刚添加：

```
<security>
  <requestFiltering>
    <requestLimits maxAllowedContentLength="524288000"/>
  </requestFiltering>
</security> 
```

在我的 web.config 中！

**编辑1：**

此外，我在 www.iis.net 上发现了以下有用信息：

> requestLimits 元素指定对 Web 服务器处理的 HTTP 请求的限制。这些限制包括请求的最大大小、最大 URL 长度和查询字符串的最大长度。此外，该元素可以在元素中包含一组用户定义的 HTTP 标头限制，这允许您在 HTTP 标头上定义自定义设置。

参考：[http ://www.iis.net/configreference/system.webserver/security/requestfiltering/requestlimits](http://www.iis.net/configreference/system.webserver/security/requestfiltering/requestlimits)

# java - 如何在java中选择合适的数组来存储XML数据

> ID：14710742
> 
> 赞同：0
> 
> 时间：2013-02-05T15:14:51.273
> 
> 标签：java, arrays, multidimensional-array, associative-array

我是 Java 新手，并尝试创建一个编目程序作为开始练习。我已经制作了界面，我可以`JComboBox`按照我想要的方式用标题填充首字母，但我的问题在于存储其余数据，以便可以根据`JComboBox`.

我的 xml 看起来像这样：

```
<Movies>
<Movie>
    <Title></Title>
        <Studio></Studio>
    <Director></Director>
    <Actors></Actors>
    <Rating></Rating>
    <Stars></Stars>
    <Review></Review>
    <Synopsis></Synopsis>
    <Genre></Genre>
</Movie>
</Movies> 
```

具有多种电影元素。我想将每部电影的数据存储在某种形式的数组中，这样当用户从 JComboBox 中选择一个标题时，我就可以用适当的数据填充其余的表单字段。但我无法决定一个好的数组类型来做到这一点。在我看来，我需要某种看起来像这样的数组：

```
Array<"Title1" -> "Title", "Studio", ....;
      "Title2" -> "Title", "Studio", ...;
       and so on...> 
```

我一直在研究不同的数组，如,`Hashmaps`和maps 但这些似乎都没有我想的那样。`ArrayLists``Multi-Dimensional String Arrays`

我非常感谢您对此的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T15:22:37.943

为什么不创建一个`Movie`包含 Title、Directory、Actor 等字段的类？然后，您可以拥有一个包含所有电影的列表。

如果电影可以通过名字唯一识别，你可以把它们放在一个HashMap中，以电影的名字为键，`Movie`对象为值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:25:54.040

我认为 HashMap 或 HashTable 足以满足您的规范。

您可以使用字符串作为键（Title1、Title2 等）。您可以使用 ArrayList 作为值（Title、Studio 等...）

```
String key = "Title1";

List<String> value = new ArrayList<String>();
value.add("Title");
value.add("Studio");

Map<String, Arraylist> myMap = new HashMap<String,ArrayList>();
myMap.put(key,value); 
```

# android - 如何在 android google map v2 中的两个地理编码之间绘制道路方向？

> ID：14710744
> 
> 赞同：19
> 
> 时间：2013-02-05T15:14:56.747
> 
> 标签：android, google-maps

我想在 android 中绘制道路方向，如下图所示。我尝试使用折线，但这会在两个 LatLngs 之间绘制一条直线。我怎样才能像谷歌地图一样实现这一点。提前致谢。![在此处输入图像描述](../Images/152ba9e5bdbcfac2c632f7d81912ebc4.png)

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-05-01T09:46:19.130

创建一个名为“DirectionsJSONParser”的类

```
public class DirectionsJSONParser {

public List<List<HashMap<String,String>>> parse(JSONObject jObject){

    List<List<HashMap<String, String>>> routes = new ArrayList<List<HashMap<String,String>>>() ;
    JSONArray jRoutes = null;
    JSONArray jLegs = null;
    JSONArray jSteps = null;

    try {

        jRoutes = jObject.getJSONArray("routes");

        for(int i=0;i<jRoutes.length();i++){
            jLegs = ( (JSONObject)jRoutes.get(i)).getJSONArray("legs");
            List path = new ArrayList<HashMap<String, String>>();

            for(int j=0;j<jLegs.length();j++){
                jSteps = ( (JSONObject)jLegs.get(j)).getJSONArray("steps");

                for(int k=0;k<jSteps.length();k++){
                    String polyline = "";
                    polyline = (String)((JSONObject)((JSONObject)jSteps.get(k)).get("polyline")).get("points");
                    List<LatLng> list = decodePoly(polyline);

                    for(int l=0;l<list.size();l++){
                        HashMap<String, String> hm = new HashMap<String, String>();
                        hm.put("lat", Double.toString(((LatLng)list.get(l)).latitude) );
                        hm.put("lng", Double.toString(((LatLng)list.get(l)).longitude) );
                        path.add(hm);
                    }
                }
                routes.add(path);
            }
        }

    } catch (JSONException e) {
        e.printStackTrace();
    }catch (Exception e){
    }
    return routes;
}

private List<LatLng> decodePoly(String encoded) {

    List<LatLng> poly = new ArrayList<LatLng>();
    int index = 0, len = encoded.length();
    int lat = 0, lng = 0;

    while (index < len) {
        int b, shift = 0, result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lat += dlat;

        shift = 0;
        result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lng += dlng;

        LatLng p = new LatLng((((double) lat / 1E5)),
                             (((double) lng / 1E5)));
        poly.add(p);
    }
    return poly;
}} 
```

* * *

## 在主要活动中

```
public class MainActivity extends FragmentActivity {

GoogleMap map;
ArrayList<LatLng> markerPoints;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Initializing array List
    markerPoints = new ArrayList<LatLng>();

    // Getting reference to SupportMapFragment of the activity_main
    SupportMapFragment fm = (SupportMapFragment)getSupportFragmentManager().findFragmentById(R.id.map);

    // Getting Map for the SupportMapFragment
    map = fm.getMap();

    map.setMyLocationEnabled(true);

    map.setOnMapClickListener(new OnMapClickListener() {

        @Override
        public void onMapClick(LatLng point) {

            if(markerPoints.size()>1){
                markerPoints.clear();
                map.clear();
            }

            markerPoints.add(point);

            MarkerOptions options = new MarkerOptions();

            options.position(point);

             if(markerPoints.size()==1){
                   options.icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_GREEN));
            }else if(markerPoints.size()==2){
                options.icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_RED));
            }

            map.addMarker(options);

            if(markerPoints.size() >= 2){
                LatLng origin = markerPoints.get(0);
                LatLng dest = markerPoints.get(1);

                String url = getDirectionsUrl(origin, dest);

                DownloadTask downloadTask = new DownloadTask();

                downloadTask.execute(url);
            }
        }
    });
}

private String getDirectionsUrl(LatLng origin,LatLng dest){

    // Origin of route
    String str_origin = "origin="+origin.latitude+","+origin.longitude;

    // Destination of route
    String str_dest = "destination="+dest.latitude+","+dest.longitude;

    // Sensor enabled
    String sensor = "sensor=false";

    // Building the parameters to the web service
    String parameters = str_origin+"&"+str_dest+"&"+sensor;

    // Output format
    String output = "json";

    String url = "https://maps.googleapis.com/maps/api/directions/"+output+"?"+parameters;

    return url;
}

private String downloadUrl(String strUrl) throws IOException{
    String data = "";
    InputStream iStream = null;
    HttpURLConnection urlConnection = null;
    try{
        URL url = new URL(strUrl);

        urlConnection = (HttpURLConnection) url.openConnection();

        // Connecting to url
        urlConnection.connect();

        // Reading data from url
        iStream = urlConnection.getInputStream();

        BufferedReader br = new BufferedReader(new InputStreamReader(iStream));

        StringBuffer sb  = new StringBuffer();

        String line = "";
        while( ( line = br.readLine())  != null){
            sb.append(line);
        }

        data = sb.toString();

        br.close();

    }catch(Exception e){
        Log.d("Exception while downloading url", e.toString());
    }finally{
        iStream.close();
        urlConnection.disconnect();
    }
    return data;
}

// Fetches data from url passed
private class DownloadTask extends AsyncTask<String, Void, String>{

    // Downloading data in non-ui thread
    @Override
    protected String doInBackground(String... url) {

        // For storing data from web service
        String data = "";

        try{
            // Fetching the data from web service
            data = downloadUrl(url[0]);
        }catch(Exception e){
            Log.d("Background Task",e.toString());
        }
        return data;
    }

    // Executes in UI thread, after the execution of
    // doInBackground()
    @Override
    protected void onPostExecute(String result) {
        super.onPostExecute(result);

        ParserTask parserTask = new ParserTask();

        // Invokes the thread for parsing the JSON data
        parserTask.execute(result);
    }
}

private class ParserTask extends AsyncTask<String, Integer, List<List<HashMap<String,String>>> {

    @Override
    protected List<List<HashMap<String, String>>> doInBackground(String... jsonData) {

        JSONObject jObject;
        List<List<HashMap<String, String>>> routes = null;

        try{
            jObject = new JSONObject(jsonData[0]);
            DirectionsJSONParser parser = new DirectionsJSONParser();

            // Starts parsing data
            routes = parser.parse(jObject);
        }catch(Exception e){
            e.printStackTrace();
        }
        return routes;
    }

    @Override
    protected void onPostExecute(List<List<HashMap<String, String>>> result) {
        ArrayList<LatLng> points = null;
        PolylineOptions lineOptions = null;
        MarkerOptions markerOptions = new MarkerOptions();

        // Traversing through all the routes
        for(int i=0;i<result.size();i++){
            points = new ArrayList<LatLng>();
            lineOptions = new PolylineOptions();

            // Fetching i-th route
            List<HashMap<String, String>> path = result.get(i);

            // Fetching all the points in i-th route
            for(int j=0;j<path.size();j++){
                HashMap<String,String> point = path.get(j);

                double lat = Double.parseDouble(point.get("lat"));
                double lng = Double.parseDouble(point.get("lng"));
                LatLng position = new LatLng(lat, lng);

                points.add(position);
            }

            // Adding all the points in the route to LineOptions
            lineOptions.addAll(points);
            lineOptions.width(2);
            lineOptions.color(Color.RED);
        }

        // Drawing polyline in the Google Map for the i-th route
        map.addPolyline(lineOptions);
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-11-20T09:30:54.563

您可以使用此功能在预装的 Google NavigationApp 中显示方向

```
 public void showDirections(double lat, double lng, double lat1, double lng1) {

        final Intent intent = new
                Intent(Intent.ACTION_VIEW, Uri.parse("http://maps.google.com/maps?" +
                "saddr=" + lat + "," + lng + "&daddr=" + lat1 + "," +
                lng1));
        intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
        startActivity(intent);

    } 
```

# vba - 使用 VBA 在 Word 2010 页眉中插入两个字段

> ID：14710750
> 
> 赞同：2
> 
> 时间：2013-02-05T15:15:17.713
> 
> 标签：vba, header, field, word-2010

我正在尝试在页眉中插入两个字段。我可以在当前选择中插入它们（参见下面的代码），但我不希望在插入字段之前不必选择页眉。这可以做到吗？

```
Sub insertFields()
    Selection.Fields.Add Range:=Selection.Range, Type:=wdFieldEmpty, Text:="DOCPROPERTY LastSavedTime ", PreserveFormatting:=True
    Selection.Fields.Add Range:=Selection.Range, Type:=wdFieldEmpty, Text:="FileName", PreserveFormatting:=True
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T20:15:57.717

如果您指定文档的部分以放置字段以及标题的类型（或） `wdHeaderFooterPrimary`，您可以使用以下代码：`wdHeaderFooterFirstPage``wdHeaderFooterEvenPages`

```
Dim myRange As Range
Set myRange = ActiveDocument.Sections(1).Headers(wdHeaderFooterPrimary).Range
ActiveDocument.Fields.Add Range:=myRange, Type:=wdFieldEmpty, Text:="DOCPROPERTY LastSavedTime ", PreserveFormatting:=True 
```

**回应评论的附加信息**

您可以使用将`Collapse`插入点放置在范围的开始或结束位置的方法在标题中插入多个字段。添加适当的附加代码以插入空格、格式或回车：

```
myRange.Collapse wdCollapseEnd
ActiveDocument.Fields.Add Range:=myRange, Type:=wdFieldEmpty, Text:="FileName", PreserveFormatting:=True 
```

# ruby-on-rails-3 - Rspec2 嵌套资源中断重定向

> ID：14710751
> 
> 赞同：0
> 
> 时间：2013-02-05T15:15:19.313
> 
> 标签：ruby-on-rails-3, rspec2, rspec-rails

我正在尝试为我的嵌套 autolinks_controller 编写 Rspec 测试。但是，我的创建操作后的重定向被破坏。成功创建自动链接后，我希望被重定向到特定网站中的自动链接（因此，website_autolink_path）。我的控制器规格如下所示：

```
describe "POST create when params[:website_id] are present" do
  before(:each) do
    @website = create(:website)
    @autolink = attributes_for(:website_autolink, website_id: @website.id)
  end

  context "with valid attributes and params[:website_id] are present" do
        it "saved the autolink in the database" do
            expect{
                post :create, website_id: @website, autolink: attributes_for(:website_autolink)
            }.to change(Autolink, :count).by(1)
        end

        it "redirects to the 'index' page" do
            post :create, website_autolink: @autolink, website_id: @website
            response.should redirect_to website_autolink_path
        end
    end
end 
```

此行不起作用：

```
response.should redirect_to website_autolink_path 
```

给我错误信息：

```
ActionController::RoutingError:
   No route matches {:action=>"show", :controller=>"autolinks"} 
```

我的工厂是这样的：

自动链接：

```
FactoryGirl.define do
  factory :website_autolink do
    name "MyName"
    url "http://www.myurl.nl"
    association :website
  end 
end 
```

网站：

```
FactoryGirl.define do
  factory :website do
    name "Test"
    domain "http://www.test.nl"
  end 
end 
```

我的自动链接控制器：

```
def create
    if params[:website_id].present?
        @website = Website.find(params[:website_id])
        @autolink = @website.autolinks.create(params[:autolink])
    else
        @autolink = Autolink.new(params[:autolink])
    end

    respond_to do |format|
        if @autolink.save
            if params[:website_id].present?
                format.html { redirect_to [@website, @autolink], notice: "Autolink is met succes aangemaakt." }
            else
                format.html { redirect_to autolinks_path, notice: "Autolink is met succes aangemaakt." }
            end
            format.json { head :no_content }
        else
            format.html { render action: "new" }
            format.json { render json: @autolink.errors, status: :unprocessable_entity }
         end
    end
end 
```

在我的控制器中，以下行是我想使用 Rspec 模拟的行：

```
format.html { redirect_to [@website, @autolink], notice: "Autolink is met succes aangemaakt." } 
```

在我的本地主机中，一切正常，但是为这个嵌套路由编写实际测试让我很困扰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:39:53.917

我刚刚找到了解决我的问题的方法。我的创建操作的控制器规范现在如下所示：

```
describe "POST create when params[:website_id] are present" do
  context "with valid attributes and params[:website_id] are present" do
    before(:each) do
        @website = create(:website)
        @autolink = attributes_for(:website_autolink, website: @website)
      end

        it "saved the autolink in the database" do
            expect{
                post :create, autolink: @autolink, website_id: @website.id
            }.to change(Autolink, :count).by(1)
        end

        it "redirects to the 'index' page" do
            post :create, autolink: @autolink, website_id: @website.id
            response.should redirect_to website_autolink_path(@website, assigns(:autolink))
        end
    end
end 
```

我只需要分配我的自动链接才能重定向到嵌套路径。没有它，我的自动链接的 id 就找不到了。

# java - Twitter Future 超时不适用于整个 flatMap 链

> ID：14710753
> 
> 赞同：6
> 
> 时间：2013-02-05T15:15:27.543
> 
> 标签：java, scala, twitter, future, finagle

我正在使用 Twitter Finagle 编写一个服务器端程序。我不使用完整的 Twitter 服务器堆栈，只使用启用异步处理的部分（如 Future、Function 等）。我希望 Future 对象有超时，所以我写了这个：

```
Future<String> future = Future.value(some_input).flatMap(time_consuming_function1);
future.get(Duration.apply(5, TimeUnit.SECONDS)); 
```

`time_consuming_function1`运行超过 5 秒。但是`future`5 秒后没有超时，它一直等到`time_consuming_function1`完成。

我认为这是因为`future.get(timeout)`只关心`future`创建需要多长时间，而不是整个运营链。有没有办法让整个操作链超时？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:18:21.883

基本上，如果您在满意的 Future 上调用 map/flatMap，代码会立即执行。

在您的示例中，当您调用时，您会立即满足您的未来`Future.value(some_input)`，因此 flatMap 会立即执行代码，并且调用`get`不需要等待任何东西。此外，一切都发生在一个线程中。更合适的用法是这样的：

```
import scala.concurrent.ops._
import com.twitter.conversions.time._
import com.twitter.util.{Future,Promise}

val p = new Promise[String]
val longOp = (s: String) => { 
  val p = new Promise[String]
  spawn { Thread.sleep(5000); p.setValue("Received: " + s) }
  p 
}
val both = p flatMap longOp
both.get(1 second)  // p is not complete, so longOp hasn't been called yet, so this will fail
p.setValue("test")  // we set p, but we have to wait for longOp to complete
both.get(1 second)  // this fails because longOp isn't done
both.get(5 seconds)  // this will succeed 
```

# c# - EF Code First MigrateDatabaseToLatestVersion 接受来自配置的连接字符串名称

> ID：14710758
> 
> 赞同：15
> 
> 时间：2013-02-05T15:15:36.707
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-migrations

在我的项目中尝试实施 EF 迁移时，我被困在一个地方。

EF Code First MigrateDatabaseToLatestVersion 接受来自配置的连接字符串名称。

在我的情况下，数据库名称在运行时被知道（用户从下拉列表中选择它）。就像 DbContext 在其构造函数中接受 ConnectionString 或 connectionString Name 一样，“MigrateDatabaseToLatestVersion”不接受相同的

> ```
> System.Data.Entity.Database.SetInitializer
> (new MigrateDatabaseToLatestVersion<SrcDbContext, SRC.DomainModel.ORMapping.Migrations.Configuration>(connString)); 
> ```

有没有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-23T07:30:20.357

谢谢你们。我确实从 codeplex 签出了 EF 代码，并在理解他们的源代码后继承了我自己的类。这是我选择的解决方案：-

```
public class MigrateDbToLatestInitializerConnString<TContext, TMigrationsConfiguration> : IDatabaseInitializer<TContext>
        where TContext : DbContext
        where TMigrationsConfiguration : DbMigrationsConfiguration<TContext>, new()
    {
        private readonly DbMigrationsConfiguration config;

        /// <summary>
        ///     Initializes a new instance of the MigrateDatabaseToLatestVersion class.
        /// </summary>
        public MigrateDbToLatestInitializerConnString()
        {
            config = new TMigrationsConfiguration();
        }

        /// <summary>
        ///     Initializes a new instance of the MigrateDatabaseToLatestVersion class that will
        ///     use a specific connection string from the configuration file to connect to
        ///     the database to perform the migration.
        /// </summary>
        /// <param name="connectionString"> connection string to use for migration. </param>
        public MigrateDbToLatestInitializerConnString(string connectionString)
        {
            config = new TMigrationsConfiguration
                          {
                              TargetDatabase = new DbConnectionInfo(connectionString, "System.Data.SqlClient")
                          };
        }

        public void InitializeDatabase(TContext context)
        {
            if (context == null)
            {
                throw new ArgumentException("Context passed to InitializeDatabase can not be null");
            }

            var migrator = new DbMigrator(config);

            migrator.Update();
        }
    }

 public static class DatabaseHelper
    {
        /// <summary>
        /// This method will create data base for given parameters supplied by caller.
        /// </summary>
        /// <param name="serverName">Name of the server where database has to be created</param>
        /// <param name="databaseName">Name of database</param>
        /// <param name="userName">SQL user name</param>
        /// <param name="password">SQL password</param>
        /// <returns>void</returns>
        public static bool CreateDb(string serverName, string databaseName, string userName, string password)
        {
            bool integratedSecurity = !(!string.IsNullOrEmpty(userName) || !string.IsNullOrEmpty(password));

            var builder = new System.Data.SqlClient.SqlConnectionStringBuilder
                {
                    DataSource = serverName,
                    UserID = userName,
                    Password = password,
                    InitialCatalog = databaseName,
                    IntegratedSecurity = integratedSecurity,
                };

            var db = new SrcDbContext(builder.ConnectionString);

            var dbInitializer = new MigrateDbToLatestInitializerConnString<SrcDbContext, SRC.DomainModel.ORMapping.Migrations.Configuration>(builder.ConnectionString);

            //following uses strategy to "CreateIfNotExist<>"
            dbInitializer.InitializeDatabase(db);

            return true;

        }
    } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-06-02T12:11:55.210

您可以使*MigrateDatabaseToLatestVersion*初始化程序使用最初触发迁移的上下文所使用的连接字符串。这是通过将**useSuppliedContext: true**传递给 MigrateDatabaseToLatestVersion 构造函数来完成的，如[文档中所述](https://msdn.microsoft.com/en-us/library/dn744368(v=vs.113).aspx)。在你的情况下：

```
Database.SetInitializer(new MigrateDatabaseToLatestVersion<SrcDbContext, SRC.DomainModel.ORMapping.Migrations.Configuration>(useSuppliedContext: true)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T06:57:38.773

这是在什么背景下运行的？网站或桌面应用程序？

在网站下，这样做不是一个好主意。针对上下文类型设置的数据库初始化策略。因此具有相同类型上下文的不同连接字符串将覆盖彼此的初始化策略。

如果是桌面应用程序，可能包含一个额外的实用程序来在数据库之间切换？

无论哪种方式，我都不建议这样做，但如果你真的想做你提到的事情，看起来你必须破解它。

```
 using (var context = new DbContext("<Your connection string right in here>"))
    {
        var constructors = typeof (DbMigrator).GetConstructors(BindingFlags.Instance | BindingFlags.NonPublic);
        var hackedDbMigrator = constructors[0].Invoke(new object[] { new Configuration(), context }) as DbMigrator;
        hackedDbMigrator.Update();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T07:00:43.693

这是迁移调用带有参数的 DbContext 派生类的问题。一旦解决了这个问题，它应该可以工作。有关示例解决方案，请参见此处。 [EntityFramework 代码优先自定义连接字符串和迁移](https://stackoverflow.com/questions/15504465/entityframework-code-first-custom-connection-string-and-migrations/16133150#16133150)

# java - 从文件的有效负载中获取文档？

> ID：14710762
> 
> 赞同：0
> 
> 时间：2013-02-05T15:15:46.687
> 
> 标签：java, spring, spring-integration

我有有效载荷`Message<File>`。如何`org.w3c.dom.Document`从 Message 中获取类型？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:37:24.463

```
<int:transformer input-channel="foo" output-channel="bar" 
    expression="T(javax.xml.parsers.DocumentBuilderFactory).newInstance().newDocumentBuilder().parse(payload)" /> 
```

# c - 带符号短的 14 位左对齐二进制补码

> ID：14710764
> 
> 赞同：3
> 
> 时间：2013-02-05T15:15:54.323
> 
> 标签：c, types, bit-shift, twos-complement

我有两个字节包含一个 14 位左对齐[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)值，我需要将其转换为有符号短值（我猜是从 -8192 到 +8191？）

最快的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T15:28:43.340

只需除以 4。

（注意，右移会导致实现/未定义的行为。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:44:22.757

便携式解决方案：

```
short convert(unsigned char hi, unsigned char lo)
{
  int s = (hi << 6) | (lo >> 2);
  if (s >= 8192)
    s -= 16384;
  return s;
} 
```

# android - 将参数从活动传递到服务中的线程

> ID：14710765
> 
> 赞同：2
> 
> 时间：2013-02-05T15:15:55.547
> 
> 标签：android, service, android-activity, parameter-passing

我有一个启动服务的活动，例如我的状态`MyService`是：

```
Intent intent1 = new Intent(this, MyService.class);
startService(intent1); 
```

在我的服务中，我创建了一个线程并运行它。这是我的代码的一部分：

```
public class MyService extends Service {
...
@Override
public void onStart(Intent intent, int startid) {
    Thread mythread= new Thread() {
        @Override
        public void run() {
            while(true)
            {
              ...
            }
        }
    };
    mythread.start();
} 
```

}

现在，`while(true)`我不想使用`while(a)`，而是`a`从我的活动传递到此服务的参数。请注意，我的活动与我的服务不同。如何才能做到这一点？请使用一些代码显示具体示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:36:32.303

您可以通过绑定来访问您的服务。编辑您的服务类，使其返回一个 IBinder onBind()

```
public class MyService extends Service {

    private static final String TAG = MyService.class.getSimpleName();
    private final IBinder binder = new ServiceBinder();
    private boolean a;

    @Override
    public IBinder onBind( Intent intent ) {

        return binder;
    }

    @Override
    public int onStartCommand( Intent intent, int flags, int startId ) {

        return super.onStartCommand( intent, flags, startId );
    }

    @Override
    public void onCreate() {

        super.onCreate();
    }

    public class ServiceBinder extends Binder {

        public MyService getService() {

            return MyService.this;
        }
    }

    public void setA(boolean a) {

        this.a = a;
    }
} 
```

现在在您的活动中，您需要处理与服务的绑定和解除绑定。在此示例中，无论您是否绑定，该服务都会一直存在。如果这不是您想要的功能，您可以不调用`startService(...)`：

```
public class MyActivity extends Activity {

    //...
    private MyService myService;
    private boolean bound;

    @Override    
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        Intent intent = new Intent( this, MyService.class );
        startService( intent );
        doBindService();
    }

    private final ServiceConnection serviceConnection = new ServiceConnection() {

        public void onServiceConnected( ComponentName className, IBinder service ) {

            myService = ( (MyService.ServiceBinder) service ).getService();
            bound = true;
        }

        public void onServiceDisconnected( ComponentName className ) {

            myService = null;
            bound = false;
        }
    };

    void doBindService() {

        boolean bound = bindService( new Intent( this, MyService.class ), serviceConnection, Context.BIND_AUTO_CREATE );
        if ( bound ) {

            Log.d( TAG, "Successfully bound to service" );
        }
        else {

            Log.d( TAG, "Failed to bind service" );
        }
    }

    void doUnbindService() {

        unbindService( serviceConnection );
    }
} 
```

现在您在活动中引用了绑定服务，您只需调用`myService.setA(true)`即可设置参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:23:29.333

而不是调用 start service 使用**bindService**，它允许您访问服务对象。

这是有关它的详细主题[Android Doc](http://developer.android.com/guide/components/bound-services.html)

一旦您的活动绑定到您的服务，您就可以从您的活动中调用服务中的任何方法。你可以这样做：

```
.... Activity Code
          mService.stopThread();

..... Service Code
         public void stopThread(){
             a = false;
         } 
```

**这是我的做法**：

在您尝试连接到服务时的活动中：

```
 Intent serviceIntent = new Intent(this, MyService.class);
    bindService(serviceIntent, serviceConnection, BIND_AUTO_CREATE);

private ServiceConnection serviceConnection  = new ServiceConnection(){

    @Override
    public void onServiceConnected(ComponentName arg0, IBinder arg1) {
        mService = (MyService) ((MyService.LocalBinder) arg1)
                .getService();

    }

    @Override
    public void onServiceDisconnected(ComponentName arg0) {
        // TODO Auto-generated method stub
    }

}; 
```

在我的服务中：我添加了这个成员

```
private LocalBinder mBinder;

    protected void onCreate(Bundle bundle) {
               super.onCreate(bundle);
               mBinde = new LocalBinder();
         } 
```

和这个类：

```
public class LocalBinder extends Binder {
    public MyService getService() {
        // Return this instance of LocalService so clients can call public
        // methods
        return MyService.this;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T15:40:09.807

简单使用

```
Intent intent1 = new Intent(this, MyService.class);
intent1.putExtra("key",value);
startService(intent1); 
```

并在使用中检索它

```
 a = intent.getStringExtra("key");// or Int, ArrayList whatever 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-05T16:12:58.350

我认为服务绑定对于您的情况来说太过分了，因为您在活动和服务之间进行了简单的交互。

如建议的那样，您可以使用传递参数`startService`。另一种解决方案，是使用LocalBroadcast，[这里是一个例子](https://stackoverflow.com/questions/8802157/how-to-use-localbroadcastmanager)

关于您的线程，您可能需要在服务中将其定义为单独的类而*不是*匿名类，例如：

```
class MyThread extends Thread{
   private boolean a = true;
   public void setA(boolean a){
      this.a = a;
   }
   public void run() {
        while(a)
        {
          ...
        }
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T15:40:48.213

如果我正确理解了这个问题，这就是您需要的：

在活动类中，在调用 startService() 之前，添加以下行：

```
intent1.putExtra("keyName","keyValue"); 
```

在服务中，在 onStartCommand() 中：

```
Bundle extras = intent.getExtras();
String param = extras.getString("keyName"); 
```

param 将保存您的参数。

# xslt - XSL 中的自然大小写排序？

> ID：14710767
> 
> 赞同：1
> 
> 时间：2013-02-05T15:16:06.207
> 
> 标签：xslt, xpath

是否有可能在 XSL 中进行自然案例排序，以及如何实现？

例如，给定以下 XML 片段：

```
<items>
  <item>A 24</item>
  <item>B 12</item>
  <item>B 11</item>
  <item>C 10</item>
  <item>A 1</item>
  <item>B 2</item>
</item> 
```

如何对输出进行排序，以便获得如下元素列表？

```
<ul>
  <li>A 1</li>
  <li>A 24</li>
  <li>B 2</li>
  <li>B 11</li>
  <li>B 12</li>
  <li>C 10</li>
</ul> 
```

**编辑：**我对可以使用任意字符串的解决方案特别感兴趣，例如。那些不遵循通用模式的模式，类似于 PHP 的[natsort](http://www.php.net/manual/en/function.natsort.php)的工作方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:39:08.730

您可以使用多个`xsl:sort`s：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="/items">
    <ul>
      <xsl:apply-templates select="item">
        <xsl:sort select="substring-before(., ' ')" />
        <xsl:sort select="substring-after(., ' ')" data-type="number" />
      </xsl:apply-templates>
    </ul>
  </xsl:template>

  <xsl:template match="item">
    <li>
      <xsl:value-of select="."/>
    </li>
  </xsl:template>
</xsl:stylesheet> 
```

在您的示例输入上运行时，这会产生：

```
<ul>
  <li>A 1</li>
  <li>A 24</li>
  <li>B 2</li>
  <li>B 11</li>
  <li>B 12</li>
  <li>C 10</li>
</ul> 
```

更彻底（通用）的自然排序需要更复杂的方法。Dimitre Novatchev 在 Stack Overflow 上提供[了 XSLT 1.0 方法](https://stackoverflow.com/a/8352114/1945651)，另一个站点似乎有[XSLT 2.0 方法](http://www.mhonarc.org/archive/html/xsl-list/2011-03/msg00003.html)。两者都太长了，不值得在这里复制，所以请在这些链接中寻找它们。

# php - 在 mssql 表中插入网页

> ID：14710768
> 
> 赞同：0
> 
> 时间：2013-02-05T15:16:07.253
> 
> 标签：php, html, text

我想在表格中插入网页（文本格式）

当我进行查询时，它给了我一个错误。但是当我删除网页（在字符串中）时，它可以工作。变量是 $comment 之一。消息的行是文本（不是 varchar(255)）

```
$query_insert = "INSERT INTO [".$project."_spec].[IsMessage] (project, message, note) VALUES('".$project."', '".$comment."', '".$note."')";
       mssql_query($query_insert) or die(mssql_get_last_message() . "[ " . $query_insert . " ]"); 
```

有没有办法将 HTML 转换为文本？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:09:34.110

您正在通过向查询中注入具有随机内容的变量来动态构建 SQL 代码：

```
$query_insert = "INSERT INTO ... VALUES('".$project."', '".$comment."', '".$note."')";
                                           ^^^^^^^^        ^^^^^^^^        ^^^^^ 
```

这样，在您无意中构建无效查询之前不会花费很长时间：

```
$project = "Foo";
$comment = "It isn't ready yet";
$note = "See John's notes";
$query_insert = "INSERT INTO ... VALUES('".$project."', '".$comment."', '".$note."')";
var_dump($query_insert);
// string(71) "INSERT INTO ... VALUES('Foo', 'It isn't ready yet', 'See John's notes')"
                                             ^      ^
                                Start string |      | End string... oops 
```

我没有使用旧的 MSSQL 扩展，所以我不知道你应该如何解决这个问题（显然，你不能！）但是有一个[用户评论提出了一个自定义函数](http://www.php.net/manual/en/function.mssql-query.php#70078)。你应该挂断`stripslashes()`电话，但其余的看起来是正确的（没有实际测试过）。

如果您碰巧使用 Windows 并且更改还为时不晚，则较新的[SQLSRV](http://www.php.net/manual/en/book.sqlsrv.php)提供了更好的功能集。

# list - Kendo UI 网格数据和列表 （演变为DataTable）

> ID：14710770
> 
> 赞同：-1
> 
> 时间：2013-02-05T15:16:13.540
> 
> 标签：list, datagrid, kendo-ui

我正在使用 Kendo UI，但遇到了一些麻烦...

我想使用 Grid 来显示数据。

我有一个带有 DLL 的列表，我的 DLL 可以工作，我可以拥有所有信息，我已经对其进行了测试。如何使用列表中的数据（每个日志都有一个类型 (Message-Error ...) ，一个 at (02/05/2013 15:00) 和一个 Message("Hi I"ma message")） ?

感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:10:40.937

这是我的类来解析我的 XML。

```
public class Read
{
    /// <summary>
    /// Cette fonction va lire un fichier XML
    /// et renvoyer une liste de log
    /// </summary>
    /// <param name="path">Chemin du fichier</param>
    /// <returns>On retourne la liste de logs</returns>
    public static List<Log> loadXML(string path)
    {
        // On crée une nouvelle instance d'une liste de log
        List<Log> liste = new List<Log>();

        /* On créer un using pour rendre la fermeture de notre flux implicite
         * à l'intérieur duquel on déclare un reader qui réalisera notre traitement
         * tant qu'il y aura quelque chose à lire
         */
        XDocument doc = XDocument.Load(path);

        var logResults = (from log in doc.Descendants("log")
                          select log).ToList();

        foreach (XElement addLog in logResults)
        {
            string dateCreation = addLog.Attribute("at").Value;
            TYPE typeLog = affectationType(addLog.Attribute("type").Value);
            string message = addLog.Value;
            string stack = null;

            if(addLog.Element("stack")!=null)
                stack = addLog.Element("stack").Value;

            liste.Add(new Log(DateTime.Parse(dateCreation),typeLog,message,stack));
        }

        // Et on retourne finalement la liste
        return liste;
    } 
```

每个日志就像

```
public class Log
{
    /// <summary>
    /// Permet de savoir à quelle heure le log a été créé
    /// </summary>
    internal DateTime at;

    /// <summary>
    /// Permet de connaître le type du log
    /// Cette variable est du type enum <c>TYPE</c>
    /// </summary>
    internal TYPE type;

    /// <summary>
    /// Message de base que possède n'importe quel log
    /// </summary>
    internal string exceptionMessage;

    /// <summary>
    /// S'il s'agit d'une exception, il y aura un stack d'exception
    /// </summary>
    internal string stackException;

    /// <summary>
    /// Message de l'InnerException liée
    /// </summary>
    internal string innerMessage;

    /// <summary>
    /// Stack de l'InnerException
    /// </summary>
    internal string stackInner; 
```

我的 XML 就像

```
 <?xml version="1.0" encoding="utf-8"?>
<logs>
  <log at="05/02/2013 15:07:00" type="Message">Test</log>
  <log at="05/02/2013 15:07:00" type="Exception">It's an exception <stack> an its stack</stack></log>
</logs> 
```

我想显示类似的东西

```
 AT                 TYPE          MESSAGE          STACK
05/02/2013 15:07:00    MESSAGE          Test              /
05/02/2013 15:07:00    EXCEPTION       It's an ...      And its stack 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T13:43:45.800

尽管有列表，但我使用 DataTable 解决了我的问题。此外，我删除了我的日志类，因为她终于没用了

我在我的控制器中加载了我的数据表，并且可以轻松地显示它！

如果有人需要信息，请不要犹豫

# file-upload - Apache commons 文件上传损坏文件

> ID：14710774
> 
> 赞同：0
> 
> 时间：2013-02-05T15:16:27.937
> 
> 标签：file-upload, apache-commons-fileupload

我有一个应该处理上传文件的 servlet。Apache 通用文件上传库用于此目的。

问题是文件损坏了。看起来符号“~”被替换为“？” 在文件中。

这里我的html表单是：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title></title>
</head>
<body>

<FORM action="http://localhost:8081/wihome-connector-bpm/bpmFileUpload"
      enctype="multipart/form-data"
      method="post">

        What files are you sending?
        <INPUT type="file" name="uploadedFiles"><BR>

        <INPUT type="submit" value="Send">

        <INPUT type="reset">

</FORM>

</body>
</html> 
```

这就是 servlet：

```
public class FileUploadServlet extends HttpServlet {

    private static final Log LOG = LogFactory.getLog(FileUploadServlet.class);

    /**
     * {@inheritDoc}
     */
    @Override
    protected void doPost(final HttpServletRequest request, final HttpServletResponse response) throws ServletException, IOException {

        try {
            boolean isMultipart = ServletFileUpload.isMultipartContent(request);
            if (isMultipart) {
                FileItemFactory factory = new DiskFileItemFactory();
                ServletFileUpload upload = new ServletFileUpload(factory);

                List items = upload.parseRequest(request);

                Iterator iter = items.iterator();
                while (iter.hasNext()) {
                    FileItem item = (FileItem) iter.next();
                    if (!item.isFormField()) {
                        LOG.info("Uploading file: " + item.getName());
                        byte[] fileContents = IOUtils.toByteArray(item.getInputStream());
                        //...
                    }
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

} 
```

我正在尝试上传图片![在此处输入图像描述](../Images/003c1ee483bbe40f08ad9bc07d7de779.png)

但相反，我明白了：

![在此处输入图像描述](../Images/5be86cd46d6f7a1516a0b41399ec901c.png)

你能帮我么？可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:42:26.737

好的，过滤器有问题。项目有一个过滤器，它在它丰富的 servlet 之前破坏了请求。

# python - Python sorting : sub strings

> ID：14710778
> 
> 赞同：1
> 
> 时间：2013-02-05T15:16:39.667
> 
> 标签：python, sorting, python-2.7

In Python

```
s= "ABCC"
n = len(s)
sorted(set([s[a:b] for a in range(n) for b in range(a+1,n+2)]) 
```

gives me, alphabetically sorted sub strings with out repetitions

```
['A', 'AB', 'ABC', 'ABCC', 'B', 'BC', 'BCC', 'C', 'CC'] 
```

How can I further sort it by length of sub string.

```
['A', 'B', 'C', 'AB', 'BC', 'CC', 'ABC', 'BCC', 'ABCC'] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T15:19:05.623

simple,

```
sorted(set(s[a:b] for a in range(n) for b in range(a+1,n+1)),
       key=lambda x:(len(x),x)) 
```

This creates a key by which the comparison is done. First it compares the string lengths to determine the order. If the strings have the same length, the tie-breaker is the string contents.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T15:23:29.517

This is your solution:

```
s= "ABCC"
n = len(s)
sorted(sorted(set([s[a:b] for a in range(n) for b in range(a+1,n+2)])),key=len) 
```

# php - 当与 Symfony Components BinaryFileResponse 类一起使用时，为什么 XSendfile 会发出间歇性的乱码响应？

> ID：14710780
> 
> 赞同：2
> 
> 时间：2013-02-05T15:16:51.630
> 
> 标签：php, apache2, x-sendfile, symfony-components

**背景**

我的应用程序的部分职责是以受控方式处理对静态资源（CSS、JavaScript、图像）的请求。基于一些应用程序逻辑，它会从选择的不同文件中返回一个，这些文件可能在不同时间在该 URL 上提供给不同的用户。因此，这些是静态文件，但以动态方式交付。

该应用程序基于 Symfony 组件，这些静态文件的服务由`BinaryFileResponse`类处理。

引导代码调用该`trustXSendfileTypeHeader`方法：

```
\Symfony\Component\HttpFoundation\BinaryFileResponse::trustXSendfileTypeHeader(); 
```

应用程序使用一些基于配置的内部逻辑以及检测和使用`apache_get_modules()`来确定可用性。如果[XSendfile](https://tn123.org/mod_xsendfile/)可用并且配置说要使用它，它会设置`X-Sendfile-Type`标题：

```
if ($useHeader === true) {
    $request->headers->set('X-Sendfile-Type', $header);
}
$response = new BinaryFileResponse($filename); 
```

**问题**

当我将配置设置为从不使用 XSendfile 或通过 PHP 内置 Web 服务器运行此程序时，显然不支持 XSendfile，一切都很完美。

当我使用 XSendfile 时，它​​也可以工作——大多数时候。

每隔一段时间，通常如果我快速连续按 f5 键 3-4 次，“某事”就会冒出来，我得到一个乱码的响应。例如，这应该是一个 JavaScript 文件（从 Firebug 中“Net”下的“Response”选项卡复制）：

> hxYîãx��HTTP/1.1 200 OK 日期：2013 年 2 月 5 日星期二 14:49:10 GMT 服务器：Apache/2.2.22 (Ubuntu) X-Powered-By：PHP/5.4.6-1ubuntu1.1 缓存控制：公共上次修改时间：星期二，2013 年 1 月 29 日 13:33:23 GMT 接受范围：字节内容传输编码：二进制 ETag：“10426f-9f6-0”变化：接受编码内容编码：gzip 内容长度: 1011 Keep-Alive: timeout=5, max=98 Connection: Keep-Alive Content-Type: application/javascript
> 
> ������VmoÛ6þ,ÿkÀ²ãIý°~q [Üt] XÑt¶H¤@Rv¼Àÿ}w(YS `ÀØ2yïå¹*¾Á>¯¥¥,è) Æ^Ât¸BaÆ\éjgäjí Î&ð*¸Åí¸tY!³Ç$Óe"jÞ![#,n®®oï®A¨þ¸þù××Þ©¼¼ôÇêÚd¹49mv°ÔrtBÖ^;WÍÓÔg´Y¥´FéôÁR9o°35Îà^º­´N=UÐè­Eµ¢XE¸íÒ%ª°¨Úò7¬KñT¾{;£ÈrTnß³étUè{QÀÃ§Ín·:'üJëQÍÄËZeNjOàyÕÁ:#3wö~4Òét1ù$µ`eN)RD| ¶FTØJ·ß½¥¨¸õGç >9TyÜxzgl-J:) b«9ûAQ½KX `É!yÐÓ] óÆÎ@W¡?¢vún­·7j©ÿ¢ðõÖGEÁy\ºp¤÷cKxf?ï*¼Éç0^ïîÌÇ°ñDQ¸mYJ|4t¾ñæËÛ¯Å ¨6:çøp(}þÑò|LÂ;Õ(#v¹* /[¨U|xª æ]ÍyìjµòÛ¯p?4sI¥"v÷ôp|uQ4ò4&Ï·$eÒc¸ xo%7Ôi´2ñx;`TuÙj23 áÊ%Ä§¿¹lÌwÀS.&ÏØß7¸}ó ZXzå k2'Zdùè �¦ºû-Ù[Ó²ÿU(¯¤¥=pÃjô¾ç]]Øhhô²× ÙãÚÍ4¨[!Õ}'Òþ^Ð�ûxÿ@+ÚVÞ~áÌáy?d aíD¹·U×ÃÚ] õ5íÃø¨o÷ÂAvUÆmÍaày`¦ä©A?mL[-}®(ÿË d°öò¬}Ç¢ ³Çp1À^6%0 hTô^ts´ÞíWô fO¶ö¢ÎNÜæ·HîUôÔ¶±ÌCµsxh.9åçi Û·_ÈÞØ_ÄãY_Ö}G<ì°ý2wÔ¿aw8/þù\ã±þ"0C oÂh'tE¶À¤¥7I½éßRt. s?á^d|k/Æ)wRw÷cG¿<Þ ¼´°/^ø*Ê¤AVZ×y¿zÅÎª¥[²Õ1ò_Vµæï_YXÁÕö ��YXÁÕö ��

注意响应正文中标头的存在，其余部分显然不是 JavaScript。开头也有一些虚假字符，这可能是导致标题被推到正文的原因。我试图确定此内容是否是 gzip 压缩的结果，但我还不能确认。（另请参阅下面的更新）

**问题**

首先，`BinaryFileResponse`甚至是用于提供文本（非二进制）文件的正确类吗？该类的文档只说“BinaryFileResponse 表示传递文件的 HTTP 响应”。这不是很详细，但它并没有说明它专门用于“二进制”文件。但是这个名字有它自己的含义，为什么 Fabien 不直接调用这个类`FileResponse`呢？

其次，更重要的是，这可能是什么原因造成的？我不认为这是浏览器问题，因为它在 Firefox 和 Chrome 中都是可重复的。这是 XSendfile 模块或`BinaryFileResponse`类中的错误吗？（我可能认为它不是前者，因为我之前以更“原始”的方式使用它，而不是通过 Symfony 组件，没有这样的问题）。

有没有其他人经历过这个？知道我应该从哪里开始寻找追踪吗？我已经查看了`BinaryResponseFile`源代码，但它对 XSendfile 的作用并不大，只是设置了相关的标头并阻止了响应正文中的内容，据我所知。

**更新**

我刚刚注意到关于这些乱码响应的一些事情：

1.  根本没有发送实际的标头，即在 Firebug 的“标头”选项卡上，对于乱码响应，它只列出请求标头，甚至不显示响应标头的标题。
2.  即使我在 PHP 中的 Response 上设置了一些自定义标头，该标头也根本不会出现在乱码响应中（作为标头或响应正文中），但是对于未损坏的响应，自定义标头会正确显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T12:10:55.687

首先，让我说我对这个 Apache 模块没有任何经验，但我会尝试引导您完成一般的错误推断：

您应该检查是否可以更可靠地重现它。虽然网络浏览器可能可以尝试一下，但您应该尝试`curl`多次执行请求，例如使用 bash `for`-loop。

```
for i in `seq 1 5`; do curl -v http://localhost/xsendfile-url; done 
```

设置了标头并且在实际 HTTP 标头之前有一些奇怪的字符的事实使`Connection: Keep-Alive`我相信您将无法通过单独的`curl`调用重现此问题，因为它每次都会打开一个新连接。所以试试这个来检查这是否会给你带来奇怪的行为（curl 默认情况下保持活动状态）：

```
curl -v http://localhost/xsendfile-url http://localhost/xsendfile-url http://localhost/xsendfile-url 
```

使用它，您可以转到[项目 github 问题](https://github.com/nmaier/mod_xsendfile/issues)页面并报告您的发现。他们很可能会在那里帮助您告诉您为什么 mod_xsendfile 的行为方式或您发现了错误。

# hadoop - 伪分布式：需要更改映射器节点的数量

> ID：14710784
> 
> 赞同：0
> 
> 时间：2013-02-05T15:17:05.570
> 
> 标签：hadoop, mapreduce, mappers

我正在使用 Intel(R) Core(TM)2 Duo 处理器。我已经在伪分布式模式下安装了 hadoop。我编写了一个需要 50 个映射器节点的程序。是否可以在伪分布式模式下拥有 50 个映射器节点，或者我将被限制为 4 个节点（2 * 核心数）。我尝试将“mapred.tasktracker.map.tasks.maximum”设置为 50，但并发性没有变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T20:11:42.927

map 和 reduce 任务的最大数量取决于集群中任务跟踪器的数量以及使用属性`mapreduce.tasktracker.map.tasks.maximum`和定义的每个节点的最大 map/reduce 任务数量`mapreduce.tasktracker.reduce.tasks.maximum`。

我假设您的 map reduce 作业在默认块大小配置中需要 50 个 map 任务。作业所需的映射任务数量取决于已处理数据的 InputSplit 数量。当然，您不应该依赖于所需地图任务的数量或无论如何在您的程序中定义此限制。这会影响地图缩减作业的缩放。

一种选择是将映射器任务的最大数量设置为 50。可用映射器任务的数量应该在作业跟踪器 Web ui 的集群摘要部分中可见。但是，由于您的处理器只有两个内核，您应该重新考虑，同时启动 50 个映射器是否会对您的 map reduce 作业的性能产生任何积极影响。

# java - 从引用 ID 获取对象

> ID：14710785
> 
> 赞同：0
> 
> 时间：2013-02-05T15:17:09.247
> 
> 标签：java

是否可以从他的参考 ID 中获取对象？

我得到一个字符串列表，其中包含一个对象的引用 ID，例如：

> com.test.test.business.model.Gamma@20

如何从此引用 id 中获取对象？

它只是一个字符串，不能投射到对象本身

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T15:22:44.027

您所看到的称为对象的默认[toString](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString%28%29)。它是它所属的类的 FQCN（完全限定的类名）和对象的 hashCode 的合并。

引用 toString 的 JavaDoc：

> Object 类的 toString 方法返回一个字符串，该字符串由对象作为其实例的类的名称、at 符号字符“@”和对象哈希码的无符号十六进制表示形式组成。换句话说，此方法返回一个等于以下值的字符串：
> 
> ```
>  getClass().getName() + '@' + Integer.toHexString(hashCode()) 
> ```

简而言之，您无法使用此*引用 id*获取对象。

我们可以覆盖`toString`以提供更易于阅读的输出。看看下面的两个类，有和没有`toString`。尝试执行 main 方法并比较两个打印语句的输出。

```
class Person {
    private String name;

    @Override
    public String toString() {
        return "Person [name=" + this.name + "]";
    }
}

class Address {
    private String town;
}

public class Test {
    public static void main(String... args) {
        Person person = new Person();
        Address address = new Address();

        System.out.println("Person is : " + person);
        System.out.println("Address is : " + address);
    }
} 
```

但是，如果您真的在寻找一种方法来持久化对象并在稍后阶段恢复它们，那么您应该阅读[Serialization](http://en.wikipedia.org/wiki/Serialization#Java)。

# python - “列表”对象不可在十进制列表上调用

> ID：14710786
> 
> 赞同：0
> 
> 时间：2013-02-05T15:17:10.533
> 
> 标签：python, list, python-2.7, fatal-error

`'list' object is not callable`当我`sum`反对一个`Decimal`列表时，我得到了。请参阅下面的命令行会话。

```
>>> sys.version_info
sys.version_info(major=2, minor=7, micro=3, releaselevel='final', serial=0)
>>> d = map(Decimal, u'0.97 + .03'.split('+'))
>>> d
[Decimal('0.97'), Decimal('0.03')]
>>> sum(d)
Traceback (most recent call last):
  File "<console>", line 1, in <module>
TypeError: 'list' object is not callable 
```

我正在使用 python `2.7.3`。这里的预期输出`sum(d)`是`1.00`

我看到它的工作方式如 Python 网站中所述。[http://docs.python.org/2/library/decimal.html#quick-start-tutorial](http://docs.python.org/2/library/decimal.html#quick-start-tutorial)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T15:23:51.300

我怀疑您`sum`的列表类型代码中早先调用了一个局部变量，这就是您收到此错误的原因。在 python 中，您可以重新绑定任何内置函数。您仍然可以`sum`使用该`__builtin__`模块调用内置函数。

```
>>> sum = [] # override builtin sum function
>>> from decimal import Decimal
>>> d = map(Decimal, ['0.97', '0.03'])
>>> sum(d)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'list' object is not callable
>>> __builtins__.sum(d)
Decimal('1.00') 
```

但是，我建议不要在内置函数或类型之后命名局部变量。捕获这些错误的一个好方法是在您的代码上运行[pylint](http://pypi.python.org/pypi/pylint) Python 静态代码检查器。一些编辑器或 IDE 允许与 pylint 轻松集成。

# c# - 如何在单个 MessageBox 中显示 foreach 循环的所有迭代？

> ID：14710787
> 
> 赞同：1
> 
> 时间：2013-02-05T15:17:21.543
> 
> 标签：c#, foreach, messagebox

正如您从下面的注释代码中看到的那样，我正在尝试在消息框内的文件夹中显示每个文件的名称和校验和。问题是这会为每个文件弹出一个单独的消息框，而不是在一个窗口中显示它们。我意识到我需要将 MessageBox.Show() 行移到 foreach 循环之外，但是它只显示最后一个文件而不是所有文件。

在一个消息框中显示所有文件的代码是什么？

```
// for each file in selected folder, print out its name and MD5 checksum value
   foreach (string file in Directory.GetFiles(folderBrowserDialog1.SelectedPath))
   {
       using (var md5 = MD5.Create())
       {
           using (var stream = File.OpenRead(file))
           {
               checksum = BitConverter.ToString(md5.ComputeHash(stream)).Replace("-", "").ToLower();
               MessageBox.Show(file + ": " + checksum);
           }
       }
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T15:19:36.317

使用[StringBuilder](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)，然后在每次迭代期间将文件/校验和附加到 stringbuilder 对象，然后调用`MessageBox.Show()`stringbuilder 对象，例如：

```
StringBuilder s = new StringBuilder();
foreach (string file in Directory.GetFiles(folderBrowserDialog1.SelectedPath))
{
    using (var md5 = MD5.Create())
    {
        using (var stream = File.OpenRead(file))
        {
            checksum = BitConverter.ToString(md5.ComputeHash(stream)).Replace("-", "").ToLower();
            s.AppendLine(file + ": " + checksum);
        }
    }
}
MessageBox.Show(s.ToString()); 
```

或使用：

```
s.AppendFormat("{0}: {1}", file, checksum).AppendLine(); 
```

在循环内部避免为循环的每次迭代创建新字符串的开销 **归功于 Destrictor* *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:20:07.637

最简单的方法是创建一个 List 变量并添加要显示的每个字符串。在 foreach 循环之后添加一行： `MessageBox.Show(string.Join(Environment.NewLine,MyList.ToArray()));` 这应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T15:23:04.490

如何`string foo = "";`在循环之前声明一个字符串变量，并将这行代码添加到循环内部：

```
foo += file + ": " + checksum + System.Environment.NewLine; 
```

并且，在循环之后：

```
MessageBox.Show(foo); 
```

# c++ - 使用 Cocos2d-x 和 Xcode 进行单元测试

> ID：14710788
> 
> 赞同：0
> 
> 时间：2013-02-05T15:17:22.730
> 
> 标签：c++, xcode, unit-testing, cocos2d-x

嘿，我目前正在使用 cocos2d-X 开发我的第一个应用程序。我想使用单元测试框架对其进行测试。我尝试使用 googletest 但并没有走得太远，因为它一直在抛出错误。有没有人找到一个好的教程或知道如何实现？我不介意使用与 googletest 不同的框架。任何输入都受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T08:45:22.827

我终于让它与 Xcode 内置的测试框架一起工作：

要设置环境，请将“Cococa Touch Unit Testing Bundle”作为新目标添加到您的项目中。确保 cocos-2dx 的库文件现在也以您的测试文件为目标。只需浏览到您的项目文件夹，重新添加它们并选择两个项目作为它们的目标。接下来，将所需的二进制文件与“构建阶段”下的库链接。

它应该包括： • CoreGraphics • AV Foundation • AudioToolbox • OpenAL • OpenGLES • CoreData • Libsqlite3 • QuartzCore • SenTestingKit • UIKitFramework • Libcurl（单击“+”时可能不会自动出现，只需在项目文件夹中搜索并手动添加）

在“构建设置”下更改以下内容：

• 仅构建活动架构：是 • iOS 部署目标：iOS 5.0 • 条带样式：所有符号 • 跳过安装：否 • 其他链接器标志：-lxml2 –lz • 强制生成包信息：是 • 添加（不要删除任何现有的路径）到框架搜索路径：“$(SYSTEM_APPS_DIR)/Xcode.app/Contents/Developer/Library/Frameworks” •“符号默认隐藏”：调试：否/发布：是 • C++ 语言方言：编译器默认 • C++ 标准库：编译器默认值 • Objective-C ARC：否 • 空循环体：否 • 未初始化变量：否 • 重复方法定义：否

现在将 cocos2d-X 头文件导入到您的单元测试文件中。单元测试的 .m 文件类型必须更改为 Objective-C++ Source。
您现在应该能够测试您的代码。

# ios - iCarousel 问题

> ID：14710791
> 
> 赞同：0
> 
> 时间：2013-02-05T15:17:31.347
> 
> 标签：ios, icarousel

我正在尝试使用以下代码将 iCarousel 添加到现有项目中，但出现此错误：`MemberCatalog[14990:1a903] -[MainViewController carousel:viewForItemAtIndex:reusingView:]: unrecognized selector sent to instance 0xa0589b0.`

iCarousel.m 中抛出错误的行是：`view = [_dataSource carousel:self viewForItemAtIndex:index reusingView:[self dequeueItemView]];`

任何帮助都会非常感激。

```
carouselItems = [NSArray arrayWithObjects:
         [UIImage imageNamed:@"iLibrary+Featured_AM-RAH.png"],
         [UIImage imageNamed:@"iLibrary+Featured_CCA.png"],
         [UIImage imageNamed:@"iLibrary+Featured_GI-PA.png"],
         nil];

// Initialize and configure the carousel
    carousel = [[iCarousel alloc] initWithFrame:self.view.bounds];
    carousel.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
    carousel.type = iCarouselTypeCoverFlow2;
carousel.delegate = self;
carousel.dataSource = self;

    [self.view addSubview:carousel]; 
```

* * *

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index
{
    UIImage *image = [carouselItems objectAtIndex:index];
    UIButton *button = [[[UIButton alloc] initWithFrame:CGRectMake(0, 0, image.size.width, image.size.height)] autorelease];
    [button setBackgroundImage:image forState:UIControlStateNormal];
    [button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    button.titleLabel.font = [button.titleLabel.font fontWithSize:50];
    button.tag=index;
    return button;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:23:39.340

您正在实现一个`-carousel:viewForItemAtIndex:`方法，但视图需要一个`-carousel:viewForItemAtIndex:reusingView:`方法。

你需要用`reusingView:(UIView *)view`参数更新你的方法，你会没事的。您还应该使用该可重用视图，而不是分配越来越多的视图，但这是另一回事。

# github - 我可以在 Github API 中查询我的存储库配额吗？

> ID：14710795
> 
> 赞同：0
> 
> 时间：2013-02-05T15:17:45.057
> 
> 标签：github, github-api, quota

我正在开发一个创建私有 Github 存储库（除其他外）的应用程序。每隔一段时间，我们的私人回购就会超出配额。

我想知道在进行将失败的 API 调用*之前我们还剩下多少存储库。*

可以使用 Github API 完成吗？[我在文档](http://developer.github.com/v3/repos/)中找不到任何内容，但这并不意味着不可能:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:57:51.060

aendt，我对私有配额不太熟悉，但是当 API 返回对`/user`. 这将告诉您您有什么计划，并会告诉您允许多少`private_repos`。有了这些信息以及`/user`告诉您当前拥有多少私人回购的信息，您应该能够弄清楚。

再说一次，您可以使用[`github3.py`](http://github3py.rtfd.org)并且您将拥有带有 plan 属性的 User 对象，并且可以如上所述将这两者一起使用。

**免责声明**我是 github3.py 的作者。

# c# - 使用静态数据返回不同值的线程

> ID：14710799
> 
> 赞同：2
> 
> 时间：2013-02-05T15:17:58.147
> 
> 标签：c#, multithreading, loops, thread-state

我正在制作一个在提取数据的大目录上运行的工具，并为每个语言代码（目录中的第一级文件）启动一个线程。我添加了一个循环，该循环阻止线程添加到数据库中，直到所有线程都完成为止，因为没有它，该工具将陷入死锁。但是，在测试此数据时，即使测试数据是静态的，数据库也会存储错误数量的语言。例如，我有 67 种语言，但我的数据库中只有 48 种。我认为问题可能是我在线程停止之前停止程序继续运行的循环可能会被破坏，即。它在所有线程停止之前将文件添加到数据库，从而在此过程中丢失语言。我想没有人遇到过类似的问题或知道解决此问题的方法吗？谢谢。

```
 //get the languages from the folders
        string[] filePaths = Directory.GetDirectories(rootDirectory);
        for (int i = 0; i < filePaths.Length; i++)
        {
            string LCID = filePaths[i].Split('\\').Last();
            Console.WriteLine(LCID);
            //go through files in each folder and sub-folder with threads
            Thread t1 = new Thread(() => new HBScanner(new DirectoryInfo(filePaths[i - 1])).HBscan());
            t1.Start();
            threads.Add(t1);
        }

        // wait for all threads to complete before proceeding
        foreach (Thread thread in threads)
        {
            while (thread.ThreadState != ThreadState.Stopped)
            {
                //wait
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T16:00:44.360

首先也是最重要的：制作路径的本地副本并将其传递给线程而不是for循环变量。[关闭循环变量被认为是有害的。](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)

我不知道为什么你会得到一个索引超出范围异常，但你也可以通过使用`foreach`-loop 来避免这种情况。

```
//get the languages from the folders
string[] filePaths = Directory.GetDirectories(rootDirectory);
foreach(string filePath in filePaths)
{
    Console.WriteLine(filePath.Split('\\').Last());

    string tmpPath = filePath; // <-- local copy

    //go through files in each folder and sub-folder with threads
    Thread t1 = new Thread(() => new HBScanner(new DirectoryInfo(tmpPath)).HBscan());
    t1.Start();
    threads.Add(t1);
} 
```

第二：[在线程上](https://stackoverflow.com/questions/2281926/c-sharp-waiting-for-multiple-threads-to-finish)[使用`Join`](https://stackoverflow.com/questions/2281926/c-sharp-waiting-for-multiple-threads-to-finish)而不是使用一些自定义等待代码。

```
// wait for all threads to complete before proceeding
foreach (Thread thread in threads)
{
    thread.Join();
} 
```

最后，确保数据库没有争用。如果没有有关其`HBScanner`作用的更多信息，就很难说其他可能导致此问题的原因。

# c# - 如何解决在我的游戏中继承 2 个抽象类的问题？

> ID：14710800
> 
> 赞同：4
> 
> 时间：2013-02-05T15:18:02.060
> 
> 标签：c#, inheritance, abstract

我的问题在于继承可玩角色的属性。我有一个名为 Being 的抽象类，它声明所有继承类都需要包含诸如力量、敏捷等属性。玩家需要选择一个种族，例如将力量从 0 提高到 10 的兽人。然后玩家需要选择一个类，例如蛮力，可为英雄的力量增加 7 点。据我所知，我会被我的 Hero 类继承 2 个抽象类所困扰吗？这是我的 Orc 课程的摘录：

```
public abstract class Orc:Being
{
     private int _strength = 10;

     //Another question, is it okay to declare an abstract property in my base abstract
     //class to force the inheriting class Orc to override the property? I wanted to 
     //find a way to force subclasses to have strength attributes

     public override int Strength
     {
            get {return _strength;}
            set {_strength = value;}
     }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T15:22:21.760

您可以使用组合作为多重继承的解决方案：

这个答案在这里解释得最好：[https ://stackoverflow.com/a/178368/340128](https://stackoverflow.com/a/178368/340128)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T15:24:04.677

如果你的抽象类只有抽象属性，你可以把它变成一个接口。这迫使实现类提供实现，并且您可以实现任意数量的接口。

否则，我会看一下[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)或[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)。两者都使用组合作为继承的替代方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-05T15:25:11.283

[组件模式](http://gameprogrammingpatterns.com/component.html)可能是您正在寻找的。

你可以让众生包含一个种族成分和一个职业成分（即场），并使力量场getter返回种族力量加值+职业力量加值的总和。

# sql - 用另一个 Execute@ 执行 @

> ID：14710801
> 
> 赞同：0
> 
> 时间：2013-02-05T15:18:07.690
> 
> 标签：sql, sql-server, execute

我怎样才能使这项工作？我希望能够根据变量是 0 还是 1 来更新 @result0，然后将其放入另一个 set@，然后调用 @result。##tempz 表确实存在。但是，当我运行它时，它只会给我：（受影响的 125 行）

```
DECLARE @result nvarchar(max),@result0 nvarchar(max)
SET @showstore = 1
SET @showcashier = 0
SET @showregister = 0
SET @showdate = 0  

set @result = 'select '+@result0+' from ##tempz'
set @result0 = 'Amex,[Gift Card],Debit,[Off Line C.Card],[Str Cr],[House Acct],Cash,Rebate,[C.Card],VIP,Discover,[Check],MasterCard,[Visa/MC]'

If @showstore = 1
    begin
        set @result0 = 'StoreID,' + @result0
    end
If @showcashier = 1
    begin
        set @result0 = 'Cashier,' + @result0
    end
If @showregister = 1
    begin
        set @result0 = 'Register,' + @result0
    end
If @showdate = 1
    begin
        set @result0 = 'Date,' + @result0
    end
execute(@result) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:22:20.717

`@result`毕竟，您应该在最后一行设置值`IF..ELSE`：

```
DECLARE @result nvarchar(max),@result0 nvarchar(max)
SET @showstore = 1
SET @showcashier = 0
SET @showregister = 0
SET @showdate = 0  

set @result0 = 'Amex,[Gift Card],Debit,[Off Line C.Card],[Str Cr],[House Acct],Cash,Rebate,[C.Card],VIP,Discover,[Check],MasterCard,[Visa/MC]'

If @showstore = 1
    begin
        set @result0 = 'StoreID,' + @result0
    end
If @showcashier = 1
    begin
        set @result0 = 'Cashier,' + @result0
    end
If @showregister = 1
    begin
        set @result0 = 'Register,' + @result0
    end
If @showdate = 1
    begin
        set @result0 = 'Date,' + @result0
    end
set @result = 'select '+@result0+' from ##tempz'
execute(@result) 
```

# sql - 可以在 JDBC 的常规/准备语句中安全地使用“Case statement”吗？

> ID：14710806
> 
> 赞同：3
> 
> 时间：2013-02-05T15:18:17.540
> 
> 标签：sql, jdbc, case

在我们的软件中，我们使用 Postgresql 作为具有 JDBC3 驱动程序类型的数据库。我们的 JDBC 语句使用包含“Case statement”的 SQL。

如果我们切换到另一个驱动程序或数据库，此代码是否有效：

例子：

```
SELECT r.routineid, 
       r.routinetypeid, 
       CASE WHEN (pc.version=20 and pc.parentid>0) 
            THEN CASE WHEN (r.processed='t') 
                      THEN pc.processed ELSE r.processed 
                 END 
            ELSE r.processed 
       END AS processed, 
       CASE WHEN (r.version=2 and r.parentid>0) 
            THEN (SELECT m_req 
                    FROM routine 
                   WHERE routineid=r.parentid
                 ) 
            ELSE r.m_req 
       END AS m_req, 
       r.version 
  FROM (SELECT * 
          FROM routine 
         WHERE routinetypeid in (11,12) 
           AND (fbroutineid='130' OR fbroutineid='806')
       ) AS r 
       LEFT JOIN 
       routine pc 
       ON r.routineid=pc.parentid 
ORDER BY r.routinetypeid; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T17:04:57.247

该`case`语句是标准 SQL，几乎所有数据库都支持——Oracle（最旧的版本除外）、MySQL、SQL Server、DB2、Postgres 和所有 Postgres 衍生产品。我很容易想到的一个例外是 MS Access，但我还是建议您避免这种情况。

因此，如果您关心的是不同数据库引擎的兼容性，那么您应该对 case 语句保持安全。

您的查询在语句中有一个嵌套选择`case`。不同的数据库会更好或更差地处理这个问题——我猜 Postgres 的情况更糟。

您可以通过加入汇总表来解决此问题：

```
routine rparent
on rparent.routineid = r.parentid 
```

然后使用`rparent.mreq`而不是子查询。

# c# - 如何在 C# 中为特定方法创建包装类

> ID：14710809
> 
> 赞同：-1
> 
> 时间：2013-02-05T15:18:29.630
> 
> 标签：c#, wrapper

我需要为包含以下代码的类创建一个包装器。

```
PDDocument pdfDoc = PDDocument.load("C:\\Users\\Pictures\\Fillable.pdf");
PDDocumentCatalog docCatalog = pdfDoc.getDocumentCatalog();
PDAcroForm acroForm = docCatalog.getAcroForm();
PDField field = acroForm.getField("last");
field.setValue("c#");
pdfDoc.save("C:\\Users\\Pictures\\Fillable.pdf");
pdfDoc.close(); 
```

我已经创建了两个包装类，但我对接下来的步骤有点困惑。

```
public class c_PDFdocu
{
    private PDDocument PD;

    public c_PDFdocu(string PDFPath)
    {
        PD = PDDocument.load(PDFPath);

    }
    public c_documentcatalog getDocumentCatalog()
    {

        return new c_documentcatalog(PD);
    }
}

public class c_documentcatalog
{
    private PDDocumentCatalog PDFDocCat;
    public c_documentcatalog(PDDocument PDFDoc)
    {
        PDFDocCat = PDFDoc.getDocumentCatalog();
    }

    public c_PDAcroForm getAcroForm()
    {
        return new c_PDAcroForm(PDFDocCat);
    }
}  

public class c_PDAcroForm
{
    private PDAcroForm acroForm;
    public c_PDAcroForm(PDDocumentCatalog docCatalog)
    {
        acroForm = docCatalog.getAcroForm();
    }
} 
```

如何为剩余的语句创建一个包装类？

我需要将值传递到`getField`. 它的用户视角类似于 setvalue。它属于相同的变量名`field`。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:32:38.780

您要做的基本上是创建一个“立面”。外观（或包装器）本质上是一些代码，它们采用困难、挑剔的代码并使其更易于使用。

在您的情况下，创建一个类更有意义，其中构造函数获取您需要的信息（例如**path**），然后创建在类本身内部完成所有困难的工作。例如：

```
class PDFdoc
{
   String path;
   PDDocument pdfDoc;
   PDDocumentCatalog docCatalog; 
   PDAcroForm acroForm; 
   PDField field;

   public PDFdoc(String path)
   {
      this.path = path;
      this.pdfDoc = PDDocument.load(path);
      this.docCatalog = pdfDoc.getDocumentCatalog();
      this.acroForm = docCatalog.getAcroForm();
      this.field = acroForm.getField("last");

      this.field.setValue("c#");
   }

   public Save()
   {
      this.pdfDoc.save(path);
   }

   public Close()
   {
      this.pdfDoc.close();
   }
} 
```

现在，当您想保存时，只需调用它`PDFdoc.Save`，`PDFDoc.close`它就会为您处理所有工作。关键在于，Facade*通过将一个类封装（“包装”）在另一个具有更易于使用的接口的类中，隐藏了有关一个类如何工作的所有困难细节*。

# unity3d - 显示精确的剩余时间

> ID：14710813
> 
> 赞同：0
> 
> 时间：2013-02-05T15:18:42.110
> 
> 标签：unity3d, countdowntimer, unityscript

我有以下代码，我想添加 miliSeconds var，以便显示如下内容：

分 : 秒 : miliSeconds

2：35：98

Time.time 是从应用程序开始经过的时间，每帧都会调用更新函数。

```
var startTime:float;
var timeRemaining:float;

var minutes:int;
var seconds:int;
var miliSeconds:int;
var timeStr:String;

function Start () {
    startTime = 130.0;
}

function Update () {
    timeRemaining = startTime - Time.time;

    minutes = timeRemaining / 60;
    seconds = timeRemaining % 60;
    //miliSeconds = ?
    timeStr = minutes.ToString()+":"+seconds.ToString("D2");

    guiText.text = timeStr;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:32:08.597

如果我正确理解您要执行的操作，请尝试以下代码：

```
var startTime:float;
var timeRemaining:float;

var minutes:int;
var seconds:int;
var miliSeconds:int;
var timeStr:String;

function Start () {
    startTime = 130.0;
}

function Update () {
    timeRemaining = startTime - Time.time;

    minutes = timeRemaining / 60;
    seconds = timeRemaining;        
    miliSeconds = timeRemaining * 1000;

    seconds -= minutes*60;
    miliSeconds -= seconds*1000;

    timeStr = minutes.ToString()+":"+seconds.ToString("D2")+":"+miliSeconds.ToString();

    guiText.text = timeStr;
} 
```

# api - 使用 Microsoft Office API 将 Word 文档中的“Shift-Enter”换行符替换为“Enter”

> ID：14710814
> 
> 赞同：8
> 
> 时间：2013-02-05T15:18:46.907
> 
> 标签：api, ms-word, ms-office, line-breaks

我有许多将转换为 HTML 的 word 文档。要求将word文档中的段落转换为`<p>`元素。

在使用 Microsoft Office API 的 SaveAs 方法将文档转换为 HTML 进行一些测试后，我意识到带有手动换行符的段落（由“Shift-Enter”中断）不能放在单独的`<p>`元素中，而是将段落分组在同一个`<p>`元素中。

为了将它们分开，我一直在尝试在进行转换之前用“Enter”/回车替换“Shift-Enter”换行符。但是，我找不到合适的方法来进行换行符替换工作。我已经尝试过 SaveAs 方法中的 WdLineEndingType 参数，但它似乎对这个问题无效。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-02-01T22:56:21.770

对于那些在 MS Word 中查找的人：使用 Control-H {查找和替换]。

查找特殊字符：手动换行符（^l，小写 L）

替换为：段落标记 (^p)

Replace All 将完成整个文档。

**编辑**：更改为小写字符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T01:49:38.160

ms-word office API 在 Range 对象中提供了一个查找功能，可以搜索和替换字符串。

以下代码是用回车符（“^p”）查找手动换行符（“^l”）。

```
Range r = oDoc.Content;
r.WholeStory();
r.Find.Execute("^l", ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, "^p", WdReplace.wdReplaceAll); 
```

然后使用 SaveAs 将 word 文档转换为 HTML，它将正确地将每一行放置在`<p>`元素中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-22T04:57:43.633

段落标记（段落标记）

^p（在“使用通配符”选项打开时在“查找内容”框中不起作用），或 ^13

# jquery - 如何比较两个字符串数组并在jquery中获取字符串值？

> ID：14710816
> 
> 赞同：0
> 
> 时间：2013-02-05T15:18:48.327
> 
> 标签：jquery, string

我正在使用 jQuery，我需要比较两个字符串数组，如下所示：

```
var A = ['dada','adad','a','s','rrrrrrrr'];

var B = ['dada','adad','a','s'];
C = []; 
```

我需要比较这两个字符串数组，我需要得到差异，即比较后的'rrrrrr'值。

```
$.each(A, function (i, e) {
     if ($.inArray(e, B) == -1) C.push(e);
); 
alert(C); 
```

我的输出是：

```
C= r,r,r,r,r,r,r,r,r,r 
```

但是，我期望这个输出：

```
C=rrrrrrrrrr 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:22:10.983

```
function exclusive(a,b){
    var c = [];

    $.each(a, function(){
        var self = this.toString();

        if(b.indexOf(self) === -1){
            c.push(self);
        }
    });

    return c;
} 
```

例子：

```
var A = ['dada','adad','a','s','rrrrrrrr'];

var B = ['dada','adad','a','s'];

exclusive(A,B) 
```

> [“rrrrrrrr”]

# string - 对于 file1.txt 中的每个字符串，检查它是否存在于 file2.txt 然后做一些事情

> ID：14710818
> 
> 赞同：-1
> 
> 时间：2013-02-05T15:18:53.833
> 
> 标签：string, shell

我有两个 txt 文件，file1.txt 和 file2.txt。它们的每一行都有一个字符串。file1.txt 中的字符串是唯一的（无重复），file2.txt 中的字符串也是如此。这些文件有不同数量的字符串。

```
file1.txt                 file2.txt

FFF                       AAA
GGG                       BBB 
ZZZ                       CCC
                          ZZZ 
```

我想比较这些文件，以便对于 file1.txt 中的每个字符串，如果它存在于 file2.txt 中就可以了。如果不是，则将该字符串写入另一个文件（file3.txt）

在此示例中，file3.txt 将是：

```
file3.txt

FFF
GGG 
```

我想使用命令外壳，执行以下操作：

```
cat file1.txt | while read a; do something on file2.txt ... 
```

但这不是强制性的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:24:37.960

请参阅 grep 的手册页，特别是 -f 选项。

```
grep -vf file2.txt file1.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:24:19.410

您最好的选择是从文件 2 中读取输入，将其放入排序列表（或者甚至更好的是平衡搜索树），然后当您从文件 1 中读取每一行时，遍历树或进行二分搜索列表中查找字符串是否存在。

这个想法是您希望进行一次处理以使允许值列表尽可能易于检查。将它们放在二叉搜索树中意味着您首先将其与列表 2 中间（按字母顺序）的单词进行比较，如果它在它之前，则采用左分支（其中包含在您刚刚比较的单词之前的单词到，或者如果它来了，你只需要看看正确的分支。

类似地，如果使用列表，您可以查看列表中间的单词，然后可以在每次迭代时从考虑中删除剩余列表的一半。这意味着您只需执行 log n 步来检查 List1 中的每个单词与 list2 中的 n 个单词。

# c# - 如何在 ASP.NET Web API 中对后台任务进行排队

> ID：14710822
> 
> 赞同：18
> 
> 时间：2013-02-05T15:19:07.567
> 
> 标签：c#, asp.net-web-api, queue

我有一个 webapi，旨在以队列方式处理报告。应用程序采取的步骤如下：

*   接收内容
*   将内容映射到对象并将其放入队列
*   轮询队列中的待处理项目
*   一次处理一个队列中的项目

我正在考虑使用实体框架来创建排队项目的数据库，例如：

```
public class EFBatchItem
{
    [Key]
    public string BatchId { get; set; }
    public DateTime DateCreated { get; set; }
    public DateTime DateCompleted { get; set; }
    public string BatchItem { get; set; }
    public BatchStatus Status { get; set; }
} 
```

我的问题 - 有没有更有效的方法，使用 NServiceBus、BlockingCollection 或 ConcurrentQeueue，而不是不断地轮询数据库并一一取出待处理的项目？我以前没有使用过队列。

一种想法是创建一个任务队列，并在一个单独的线程上处理所有待处理的任务。有点类似于[用线程处理队列的最有效方法，](https://stackoverflow.com/questions/6203836/most-efficient-way-to-process-a-queue-with-threads)但我想确保我走的是最有效的路线。

编辑：我在这里遇到的一个大问题是向用户显示进度的最佳方式。一旦用户提交内容，他就会被带到一个新页面，并可以通过批次标识符查看状态。为了通知用户，是否需要 MSMQ 或 NServiceBus？这似乎是请求/确认/推送范式的变体？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-05T16:20:39.537

恕我直言，您的 ASP.NET Web API 应用程序不应自行运行这些后台任务。它应该只负责接收请求，将其放入队列（如您所指示）并返回指示接收消息成功或失败的响应。对于这种方法，您可以使用各种消息传递系统，例如[RabbitMQ 。](http://www.rabbitmq.com/)

至于通知，您有几个选择。您可以有一个端点，客户端可以检查处理是否完成。或者，您可以提供客户端可以订阅的流式 API 端点。这样，客户端不必轮询服务器；服务器可以通知已连接的客户端。ASP.NET Web API 有一个很好的方法来做到这一点。以下博客文章解释了如何：

*   [使用 ASP.NET Web API 和 Knockout.js 的原生 HTML5 推送通知](http://www.strathweb.com/2012/05/native-html5-push-notifications-with-asp-net-web-api-and-knockout-js/)

您还可以考虑将[SignalR](https://github.com/SignalR/SignalR)用于此类服务器到客户端的通知。

ASP.NET Web API 应用程序难以执行后台任务的原因是您有责任保持 AppDomain 处于活动状态。这很麻烦，尤其是当您在 IIS 下托管时。以下博客文章很好地解释了我的意思：

*   [从 ASP.NET 请求中提前返回](http://blog.stephencleary.com/2012/12/returning-early-from-aspnet-requests.html)
*   [在 ASP.NET 中实现重复后台任务的危险](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-17T13:30:19.470

这是一个 NuGet 包，名为 HangFire - [https://github.com/HangfireIO/Hangfire](https://github.com/HangfireIO/Hangfire)。这些任务甚至在 apppool 回收之后仍然存在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-18T10:59:57.520

我喜欢@Todd 的解决方案。只是为了完整起见，但还有另一个选项尚未提及：

```
HostingEnvironment.QueueBackgroundWorkItem(cancellationToken =>
{
    // Some long-running job
}); 
```

笔记：

“当 ASP.NET 必须回收时，它会通知后台工作（通过设置 CancellationToken），然后最多等待 30 秒以完成工作。如果后台工作没有在该时间范围内完成，则工作会神秘消失。”

并避免在此处使用带有注入 DbContext 的服务方法，因为这不起作用。

资料来源： [MariusSchulz](https://blog.mariusschulz.com/2014/05/07/scheduling-background-jobs-from-an-asp-net-application-in-net-4-5-2)和 [StephenCleary](http://blog.stephencleary.com/2014/06/fire-and-forget-on-asp-net.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-26T07:50:08.160

如果你使用 Asp.net Core，你可以使用[IHostService](https://docs.microsoft.com/en-us/dotnet/standard/microservices-architecture/multi-container-microservice-net-applications/background-tasks-with-ihostedservice)。

# javascript - 如何在 OpenLayers 中获取地图上显示的所有功能？

> ID：14710824
> 
> 赞同：1
> 
> 时间：2013-02-05T15:19:13.653
> 
> 标签：javascript, openlayers

有没有办法从地图上可见的 OpenLayers 矢量图层中获取所有要素？

例如，如果图层有 100 个特征，但在我所处的缩放级别，目前我只能看到其中的 20 个特征。

有没有办法以编程方式获取地图上的可见特征？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:42:12.817

OL2 解决方案，我在 2013 年的回答：

看看`onScreen`OpenLayers的方法：

[http://dev.openlayers.org/docs/files/OpenLayers/Marker-js.html#OpenLayers.Marker.onScreen](http://dev.openlayers.org/docs/files/OpenLayers/Marker-js.html#OpenLayers.Marker.onScreen)

OL3解决方案：

[从 Openlayers 3 视口获取所有功能](https://stackoverflow.com/questions/38785940/get-all-features-from-the-openlayers-3-viewport?rq=1)

# sql - 聚合函数 SUM 返回不同的值

> ID：14710833
> 
> 赞同：1
> 
> 时间：2013-02-05T15:19:37.170
> 
> 标签：sql, sql-server, sum, aggregate-functions

我有以下示例数据库架构

[http://i.stack.imgur.com/EKNxY.jpg](https://i.stack.imgur.com/EKNxY.jpg)

![在此处输入图像描述](../Images/60b112733bbffbf42ea3299e1dd491c9.png)

我想要：
**A）所有销售，按用户分组。
B) 折扣，按用户分组。**

我正在使用以下查询：
**FOR A：**

```
 SELECT u.UserID, u.UserName, Sum(d.Quantity * i.Price) AS 'Sales'
FROM OrderDetails d
INNER JOIN Orders o ON o.OrderID = d.OrderID
INNER JOIN Item i ON i.ItemID = d.ItemID
INNER JOIN [User] u ON u.UserID = o.UserID
GROUP BY u.UserID, u.UserName 
```

**结果：** 用户 ID 用户名 销售
1 Mobeen 11060
2 收银员 25960

**对于 B：**

```
 SELECT u.UserID, u.UserName, Sum(r.DiscountAmount) AS Discounts
FROM Receipt r
INNER JOIN Orders o ON o.OrderID = r.OrderID
INNER JOIN [User] u ON u.UserID = o.UserID
GROUP BY u.UserID, u.UserName 
```

**结果：** 用户 ID 用户名折扣
1 Mobeen 50
2 Cashier 310

但是然后我决定将这两个查询结合起来，但现在的问题是**我得到了不同的结果。** 查询如下：

```
 SELECT u.UserID,
    u.UserName,
    Sum(d.Quantity * i.Price) AS 'Sales',
    Sum(r.DiscountAmount) AS 'Discounts'
FROM OrderDetails d
INNER JOIN Orders o ON o.OrderID = d.OrderID
INNER JOIN Item i ON i.ItemID = d.ItemID
INNER JOIN [User] u ON u.UserID = o.UserID
INNER JOIN Receipt r ON r.OrderID = o.OrderID
GROUP BY u.UserID, u.UserName 
```

**结果：** UserID UserName Sales Discounts
1 Mobeen 2270 50
2 Cashier 25760 430

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T15:24:53.813

问题是您正在沿多个维度求和。如果要组合它们，请使用子查询：

```
select s.userID, s.userName, s.Sales, d.Discounts
from (SELECT u.UserID, u.UserName, Sum(d.Quantity * i.Price) AS 'Sales'
      FROM OrderDetails d
           INNER JOIN Orders o ON o.OrderID = d.OrderID
           INNER JOIN Item i ON i.ItemID = d.ItemID
           INNER JOIN [User] u ON u.UserID = o.UserID
           GROUP BY u.UserID, u.UserName
     ) s join
     (SELECT u.UserID, u.UserName, Sum(r.DiscountAmount) AS Discounts
      FROM Receipt r
           INNER JOIN Orders o ON o.OrderID = r.OrderID
           INNER JOIN [User] u ON u.UserID = o.UserID
       GROUP BY u.UserID, u.UserName
     ) d
     on s.userId = d.userId and s.userName = d.userName 
```

我认为正在发生的事情是您将每个项目的收据记录相乘。在使用联接天真地汇集数据时，您需要非常小心。对于这样的聚合，子查询是你的朋友。

如果您需要获取所有行（即，两边可能不匹配），请将连接切换为 a`full outer join`并使用：

```
select coalesce(s.userId, d.userId) as userId, coalesce(s.userName, d.userName) as userName, . . . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:28:51.763

收据的内部连接可能是排除某些订单（并非所有订单都有收据，对）和重复计算其他订单（一个订单可能有很多收据？）

# javascript - 在 Backbone JS 中保持跨页面重新加载的会话

> ID：14710837
> 
> 赞同：2
> 
> 时间：2013-02-05T15:19:59.247
> 
> 标签：javascript, rest, backbone.js, session-cookies

我正在使用一个 API，它在登录时不返回 cookie，但只返回一个 auth_token 作为 json 响应的一部分。

基本 URL 提供了主干js 应用程序。说[http://www.webiyo.com/](http://www.webiyo.com/)并默认显示登录页面。

即使用户刷新了backbonejs应用程序中的页面，我也想保持用户会话。

问题是我的 API 不返回会话 cookie aka auth_token cookie（它只是在响应 json 中返回一个 auth_token，需要在查询字符串中的所有后续调用上传递）

那么在这种情况下，我可以自己设置一个 javascript cookie 来使用backbonejs 在浏览器端跟踪用户会话吗？如果是的话怎么办？

我一直在参考

[http://whatcodecraves.com/articles/2012/01/11/backbonejs-sessions-and-authentication](http://whatcodecraves.com/articles/2012/01/11/backbonejs-sessions-and-authentication)但它假设 http cookie“auth_token”在登录成功时直接从服务器发送到浏览器，这与我的情况不同，其中“ auth_token" 是登录成功时 json 响应的一部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-06T11:42:03.853

根据您所描述的，`auth_token`在浏览器的会话 cookie 中存储似乎是要走的路。

Backbone.js 不支持 cookie 操作。但是，您可以使用 jQuery 插件/编写自己的 cookie 操纵器来处理此问题。

假设您正在使用`jquery-cookie`（[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)），这里有一个关于如何实现此目的的示例（它也在他们的 Wiki 上！）：

```
$.cookie('auth_token', authTokenValue); 
```

对于您与之交互的 API，取决于它们如何接受`auth_token`，您可能需要在 Backbone.Model 之上创建一个 BaseModel 来`auth_token`自动处理使用。

例如，如果 API 希望您将`auth_token`QueryString 的一部分传递给您，则需要重写`Backbone.Model.url()`函数：

```
var BaseModel = Backbone.Model.extend({
url: function() {
        var base = _.result(this, 'urlRoot') || _.result(this.collection, 'url') || urlError();
        if (this.isNew()) return base + '?' + $.cookie('auth_token');
        return base + (base.charAt(base.length - 1) === '/' ? '' : '/') + encodeURIComponent(this.id) + '?' + $.cookie('auth_token');
    }
});

var EntityModel = BaseModel.extend({ ... }); 
```

因此，您如何覆盖 Backbone.Model 取决于 API 端点的期望。

如果遵循[这](http://whatcodecraves.com/articles/2012/01/11/backbonejs-sessions-and-authentication)是您的最终目标，您可以做几件事：

```
App.Models.Session = Backbone.Model.extend
  defaults:
    access_token: null,
    user_id: null

  initialize: ->
    @load()

  authenticated: ->
    Boolean(@get("auth_token"))

  login: (email, password, options)->
    # make an AJAX call to the authentication API
    # once returned, call @save(...) with auth_token that you got back.
    # options is there to facilitate that, if you want to pass in an onAuthencated or onNotAuthenticated callbacks, you can.

  # Saves session information to cookie
  save: (auth_token)->
    $.cookie('auth_token', auth_token)

  # Loads session information from cookie
  load: ->
    @set
      access_token: $.cookie('auth_token')

App.start = ->
  @session = new App.Models.Session()
  if @session.authenticated()
    # redirect to user page
  else
    # launch a login form
    # call @session.login(email, password) 
```

作为旁注，除了使用`option`@login（电子邮件，密码，选项）中的参数，您还可以触发一个事件，例如`@trigger('authenticated')`从模型中，让视图/应用程序知道用户现在已通过身份验证。

# c# - WriteableBitmap 内存泄漏？

> ID：14710838
> 
> 赞同：20
> 
> 时间：2013-02-05T15:20:01.337
> 
> 标签：c#, windows-phone, writeablebitmap, live-tile

我正在使用下面的代码创建一个基于 UI 元素的动态磁贴。`uiElement`它在 a 上渲染`WriteableBitmap`，保存位图 + 返回文件名。此方法在 Windows Phone 后台任务代理中运行，我遇到了内存限制。

```
private string CreateLiveTileImage(Canvas uiElement, int width, int heigth)
{
   var wbmp = new WriteableBitmap(width, heigth);
   try
   {
      wbmp.Render(uiElement, null);
      wbmp.Invalidate();

      var tileImageName = _liveTileStoreLocation;
      using (var stream = new IsolatedStorageFileStream(tileImageName, FileMode.Create, FileAccess.Write, IsolatedStorageFile.GetUserStoreForApplication()))
      {
         wbmp.SaveJpeg(stream, width, heigth, 0, 100);
         stream.Close();
      }

      uiElement = null;
      wbmp = null;
      GC.Collect();
      return "isostore:" + tileImageName;
   }
   catch (Exception exception)
   {
      // ...
   }
   return null;
} 
```

**我做了一些测试，问题是：这种方法泄漏内存，但我不知道为什么/在哪里？！**

我还进行了一些测试运行 - 在第一次运行此方法之前：

```
Microsoft.Phone.Info.DeviceStatus.ApplicationCurrentMemoryUsage
7.249.920 Bytes 
```

没关系，因为附加了调试器，它使用大约 2 MB 内存。

再次运行此方法（在调试器中再次设置回运行方法）：

```
Microsoft.Phone.Info.DeviceStatus.ApplicationCurrentMemoryUsage
8851456  long +  40960
Microsoft.Phone.Info.DeviceStatus.ApplicationCurrentMemoryUsage
8892416  long + 245760
Microsoft.Phone.Info.DeviceStatus.ApplicationCurrentMemoryUsage
9138176  long + 143360
Microsoft.Phone.Info.DeviceStatus.ApplicationCurrentMemoryUsage
9281536  long + 151552
Microsoft.Phone.Info.DeviceStatus.ApplicationCurrentMemoryUsage
9433088  long + 143360
Microsoft.Phone.Info.DeviceStatus.ApplicationCurrentMemoryUsage
9576448  long + 139264
Microsoft.Phone.Info.DeviceStatus.ApplicationCurrentMemoryUsage
9715712  long + 139264
Microsoft.Phone.Info.DeviceStatus.ApplicationCurrentMemoryUsage
9859072  long + 143360
Microsoft.Phone.Info.DeviceStatus.ApplicationCurrentMemoryUsage
10006528 long + 147456 
```

因此，此方法使用的内存会增加。

但为什么？在我看来，没有任何引用可以阻止对象被收集。

**2013 年 5 月 4 日更新**

你好，

谢谢你的所有回答！正如建议的那样，我减少了代码+最终能够在几行代码中重现该问题。

```
void Main()
{
   for (int i = 0; i < 100; i++)
   {
      CreateImage();
   }
}

private void CreateImage()
{
   var rectangle = CreateRectangle();
   var writeableBitmap = new WriteableBitmap(rectangle, rectangle.RenderTransform);

   rectangle = null;
   writeableBitmap = null;
   GC.Collect();
}

private Rectangle CreateRectangle()
{
   var solidColorBrush = new SolidColorBrush(Colors.Blue);
   var rectangle = new Rectangle
   {
   Width = 1000,
   Height = 1000,
   Fill = solidColorBrush  // !!! THIS causes that the image writeableBitmap never gets garbage collected
   };

   return rectangle;
} 
```

启动应用程序后：ApplicationCurrentMemoryUsage:"11 681 792 Bytes"

1 次迭代 - ApplicationCurrentMemoryUsage：“28 090 368 字节”

5 次迭代 - ApplicationCurrentMemoryUsage：“77 111 296 字节”

20 次迭代 - ApplicationCurrentMemoryUsage：“260 378 624 字节”

**23 次迭代后：内存不足异常。** Ln.: var writeableBitmap = new WriteableBitmap(rectangle, rectangle.RenderTransform);

仅通过注释掉“Fill = solidColorBrush”行，CreateImage() 方法被调用了 100 次，没有任何问题 - 在第 100 次迭代之后，内存使用量约为“16 064 512 字节”。

**所以看来问题是刷子！** 当用于填充 UI 元素时，然后此 UI 元素在可写位图上呈现，该位图永远不会被垃圾收集。

当然，这在我看来毫无意义。刷子超出范围，所以它也应该被垃圾收集！（使用后将画笔设置为 null 并没有改变任何东西）

我的许多 UI 元素都使用画笔进行填充，所以我不能简单地删除画笔的使用。你怎么看这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-30T13:53:11.123

问题是 rectangle.RenderTransform 是一个对象的实例，如果您将 writableBitmap 设置为 null，那么 rectangle.RenderTransform 对象仍然存在并将矩形保存在内存中......所以解决方案是编辑代码如下：

```
private void CreateImage()
{
   var rectangle = CreateRectangle();
   var writeableBitmap = new WriteableBitmap(rectangle, rectangle.RenderTransform);

   rectangle.RenderTransform = null; //and your memory would be happy ;)
   rectangle = null;
   writeableBitmap = null;
   GC.Collect();
} 
```

看内存截图...

前：

![没有将 rectangle.RenderTransform 设置为 null 的内存](../Images/0d02ed371dbf6e92cda366c3b12d422a.png)

后：

![将 rectangle.RenderTransform 设置为 null 的内存](../Images/2149b7d94fc3dfbc1171eb675136d563.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T10:59:45.310

您可以将可写位图图像宽度 X 高度的大小限制为更小的尺寸，因为当您增加其大小时会占用更多内存，因此您可以首先限制其初始大小，然后保存为原始平铺大小的 jpeg

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-13T04:47:03.523

在 taskagent 中将 uielement 转换为 writeablebitmap 时出现相同的异常。只是尝试了很多次。我发现一个解决方案得到了工作。

```
wbmp.SaveJpeg(stream, width, heigth, 0, 60); 
```

当您将 uielement 保存到流时，您可以将质量更改为 60。它很好地减少了内存使用。你可以试试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T20:45:00.007

你在 try catch 中的 finally 应该是 wbmp = null 来开始。

您正在渲染它，这意味着您将该对象附加到外部（函数）列表。因此，没有多少 GC.Collect 会真正收集它，因为它仍在“播放中”。

将 uielement 源设置为 null，这可能会摆脱 GC 忽略它的附加引用。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-24T02:20:17.897

试着把这部分：

```
 uiElement = null;
      wbmp = null;
      GC.Collect(); 
```

to **finally**子句；

# c# - 通过foreach循环在ASP.Net中制作下拉列表

> ID：14710841
> 
> 赞同：3
> 
> 时间：2013-02-05T15:20:12.490
> 
> 标签：c#, asp.net, drop-down-menu, for-loop

我们可以使用以下语法在 asp.net 组件中创建下拉列表

```
 <asp:DropDownList ID="test" runat="server">
      <asp:ListItem Text="1" Value="1"></asp:ListItem>
 </asp:DropDownList> 
```

如果我们希望我们的组合框包含 1 到 1000，有没有办法用 foreach 循环填充它，而不是手动添加 1000 项？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T15:23:16.737

是的，您可以通过`ListItems`编程方式添加：

```
for(int i=1; i<=1000; i++)
{
    ListItem item = new ListItem(i.ToString(), i.ToString());
    test.Items.Add(item);
} 
```

[`ListItemCollection.Add`](http://msdn.microsoft.com/en-us/library/e7s6873c.aspx)

您还可以使用此 linq 查询并将其用作数据源：

```
var source = Enumerable.Range(1, 1000)
    .Select(i => new { Text= i.ToString(), Value=i.ToString() });
test.DataSource = source;
test.DataTextField = "Text";
test.DataValueField = "Value";
test.DataBind(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:23:46.353

当然，在您的代码隐藏中：

```
if (!Page.IsPostBack)
{
    // Populate DropDownList
    for (int i = 1; i < 1001; i++)
    {
        ListItem li = new ListItem(i.ToString(),i.ToString());
        test.Items.Add(li);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T15:25:51.123

将下拉列表直接绑定到数字集合怎么样？

```
IEnumerable<int> numbers = Enumerable.Range(1, 1000);
test.DataSource = numbers;
test.DataBind(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T15:23:18.913

```
 for( int i=1;i<=100;i++)
 {
    ListItem li=new ListIem(i.ToString(),i.ToString());
    test.Items.add(li);
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T15:24:26.473

这是一些伪代码：

```
for (int i = 0; i < 1000; i++)
{
    ListItem item = new ListItem();
    item.Text = i.ToString();
    test.Items.Add(item);
} 
```

您将必须准确了解如何创建 ListItem 并使用值填充它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T15:26:42.703

很基础的代码...

```
if(!Page.IsPostBack)
{
  for (int i = 1; i <= 1000; i++)
  {
    test.Items.Add(new ListItem(i.ToString(), i.ToString()));
  }
} 
```

# c++ - 通用模板非类型参数

> ID：14710842
> 
> 赞同：5
> 
> 时间：2013-02-05T15:20:15.150
> 
> 标签：c++, templates

我希望我的类接收非类型模板参数，但我不想指定非类型参数的类型。我可以通过写来做到这一点：

```
template<class Type, Type param>
class A
{}; 
```

然后可以按如下方式使用：

```
A<int,3> a; 
```

这是多余的，因为一旦我知道了，`param = 3`我就知道了`Type = int`。有没有什么方法可以编写这样的代码，以便以下所有行编译和实例化不同的类型？

```
A<3> a;
A<3.0> b;
A<3.0f> c; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T15:22:34.187

不，那是做不到的。所有非类型模板实参的类型都必须在形参中定义，并且永远不能从使用中推断出来，即编译器分析实参时`Type`需要*知道*`Type param`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:38:17.183

如果`A`是函数对象，您可以将函数模板成员放在常规类中

```
class A  
{  
public: 
    template<class Type> 
    void operator()(Type param) { }  
}; 
```

或将类模板包装在函数模板中

```
template<class Type> 
class A  
{  
public: 
    void operator()(Type param) { }  
};

template<class Type>
void fun(Type param) 
{ 
    A<Type>()(param); 
} 
```

并将其称为`A()(3)`或`fun(3)`将推断`Type`为`int`，其他类似。这是因为函数模板确实推导出了它们的参数，但对于类模板则不然。因此，如果您将类模板`A`用于函数对象以外的其他目的，则需要指定其参数。

# php - 使用动态下标设置多维数组

> ID：14710847
> 
> 赞同：0
> 
> 时间：2013-02-05T15:20:38.353
> 
> 标签：php

我想找到一种在具有动态下标的多维数组中设置值的方法。让我举一个非常简单的例子：

```
$deep['foo'] = array();
$deep['foo']['bar'] = "Elvis has left the building";
$meta = array( 'foo','bar' );
$super_meta = "[{$meta[0]}][{$meta[1]}]";
echo "\nWhere is Elvis? " . $deep[$meta[0]][$meta[1]] . ". Are we sure?\n";
echo "\nWhere is Elvis? " . $deep{$super_meta} . ".\n\n"; 
```

在这个例子中，第一条回波线`Elvis has left the building`按照我们的预期打印，但在第二条回波线中，直到运行时我们才知道`$meta`我们要在结构中深入多少层。为了让我的梦想成真，我拼命尝试添加了`$deep{$super_meta}`命令。没有错误，但它会导致一个空字符串。该死。

随着我的梦想破灭，我希望有人可以再次接我并向我展示众所周知的“PHP之光”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:28:15.400

您需要从整个数组 ( `$deep`) 开始，然后遍历其中的元素，`$meta`并为每个元素提取一个更深的嵌套数组。试试这个：

```
$result = $deep;
foreach ($meta as $elem) {
    $result = $result[$elem];
}
echo $result;
// outputs "Elvis has left the building" 
```

请注意，这不包括任何错误检查。如果任何元素不存在，它将返回一个大错误。你可以很容易地处理这个：

```
$result = $deep;
foreach ($meta as $elem) {
    if (array_key_exists($elem, $result)) {
        $result = $result[$elem];
    } else {
        // Handle error in some way, maybe throw an exception
    }
} 
```

# asp.net - 是否可以从 asp .net 页面启动 .xlsm 文件？

> ID：14710848
> 
> 赞同：0
> 
> 时间：2013-02-05T15:20:39.013
> 
> 标签：asp.net, epplus

我需要从 asp .net (VB) 页面中启动一个 .xlsm 文件。我尝试了很多东西，包括 EPPlus，但似乎没有任何效果。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:10:49.953

好的！因此，在敲了两天的键盘之后，这就是有效的方法，我将代码添加到 OnClientClick 事件中，如下所示，它启动了该死的 .xlsm 文件！

OnClientClick="javascript: MyObject = new ActiveXObject('WScript.Shell'); MyObject.Run('file:///C:/MacroEnabledFile.xlsm')"

# compiler-construction - 让 GNU C 编译器在 iOS 6.x 上运行

> ID：14710849
> 
> 赞同：11
> 
> 时间：2013-02-05T15:20:39.623
> 
> 标签：compiler-construction, ios6, terminal, gnu, jailbreak

我有一台越狱 (evasi0n) 第四代 iPad，带有 iOS 6.1 固件。

通过 Cydia，我安装了移动终端，版本 520-2。
然后，按照[本](http://iklive.org/cc-compiling-on-ios/)教程，我下载并安装了 CSU、Link Identification Editor、LibGCC、GCC 和 Headers/Libraries。

在安装过程中没有任何问题。

教程和项目分别更新到 2012 年 2 月 15 日和 2012 年 2 月 18 日，所以它们在 iOS 5.x 之前都可以正常工作（我已经在我的 iPhone 4S、iOS 5.1.1 上测试了该程序并且它可以工作，所以我可以在设备上编译和执行C代码）

但是在移动终端中，在 iPad (iOS 6.1) 上，当我输入

> $ gcc

我明白了

> 非法指令：4

这些天我搜索了很多，但我在 iOS 6.x 上找不到任何关于 GCC 的信息，因为最近一次关于该问题的[讨论](http://www.freeyourapple.com/download-libgcc-e-gnu-c-compiler-gcc-anche-per-iphone-ios-5-1-1-repo/)是在 2012 年 10 月 12 日更新的，而从 2 月 4 日开始可以进行 evasi0n 越狱程序， 2013 年。

谢谢你的帮助。

**更新**

似乎（从答案中）问题与 iOS 6.x 固件无关，而与 iPhone 5 和 iPad 第 4 代上的 A6/A6X 芯片有关。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T16:38:39.737

某些软件必须在支持 ARMv7s 的情况下重新构建。海合会就是其中之一。

要使用 ARMv7 重新编译，您必须使用该`-arch ARMv7`选项运行 gcc 并使用最新的 SDK（6.0 或 6.1，我认为它不适用于旧的 SDK 版本，但您可以尝试）。接下来，使用创建一个胖二进制文件[`lipo`](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/lipo.1.html)，使其适用于多种架构。

[官方*iphone-gcc-full*页面中的这个问题] ( [http://code.google.com/p/iphone-gcc-full/issues/detail?id=6](http://code.google.com/p/iphone-gcc-full/issues/detail?id=6) )

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T18:20:34.023

我的 cydia 项目的一些用户也有同样的“非法指令 4”问题。他们有 iPad4 和 iPhone5（都是 evasi0n 越狱的 iOS 6.1）。

我用交叉编译器 arm-apple-darwin gcc/g++ version 4.2.1 编译它。

我总是使用 CFLAGS='-O2 -mthumb'。

关于我无法访问 Apple A6/A6X 芯片 iOS 设备（iPad4、iPhone5），我无法测试任何东西 :-(

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T16:26:08.387

请从以下链接获取适用于 iPhone 5 的新 GCC。 [下载](https://code.google.com/p/apiexplorer/downloads/detail?name=iphone-gcc_4.2-20080604-1-8p_iphoneos-arm.deb&can=2&q=)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-04T18:42:23.223

试试 CppCode ios 应用程序 - C/C++ IDE 和编译器。无需越狱，无需互联网连接，免费(mium) [http://www.cppcode.info](http://www.cppcode.info)

# javascript - 拖动多个元素时的jQuery可排序错误

> ID：14710850
> 
> 赞同：0
> 
> 时间：2013-02-05T15:20:43.387
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-sortable, jquery-ui-droppable

在多个列表上使用 sortable() 有一个错误，我无法摆脱。通过将以下内容添加到开始功能，我可以拖动多个项目：

```
 e.item.siblings(".selected").appendTo(e.item); 
```

但是现在，当您不在放置区域的顶部时，占位符会随我拖动的项目一起出现。我可以直观地看到拖动元素内的占位符。如果我在这一点上放下它，它们就会消失。我尝试使用以下方法修复它：

```
 e.item.siblings(".selected").not('.placeholder').appendTo(e.item); 
```

在这个小提琴中，问题非常明显。

[http://jsfiddle.net/mstefanko/kxBUG/](http://jsfiddle.net/mstefanko/kxBUG/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:47:11.233

我认为有一个 jQueryUI 扩展可以满足您的需求。

你可以在那里搜索一些答案。可以在[这里找到](https://github.com/iamvery/jquery.multisortable)

# android - 在列表视图中设置 TextView 文本颜色会在滚动时为随机文本视图提供颜色？

> ID：14710852
> 
> 赞同：1
> 
> 时间：2013-02-05T15:20:49.470
> 
> 标签：android, listview

在我不滚动之前一切正常。只要我向下滚动其他 TextView 就会随机获取颜色。这是我的代码。

```
 public View getView(final int position, View convertView, ViewGroup parent) {
        //  ViewHolder holder = null;
          View row = convertView;
          if(row==null){
           LayoutInflater inflater=getLayoutInflater();
           row=inflater.inflate(R.layout.prices_list, parent, false);
          }

         item = (TextView)row.findViewById(R.id.textView1);
         item.setText(items[position]);
         price = (TextView)row.findViewById(R.id.textView2);
         price.setText(prices[position]);         
         cprice=(Button)row.findViewById(R.id.button1);
         cprice.setTag(position);
         cprice.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

    RelativeLayout rl = (RelativeLayout)v.getParent();
        TextView tv1=(TextView)rl.findViewById(R.id.textView1);
        TextView tv2=(TextView)rl.findViewById(R.id.textView2);
        create(tv2.getText().toString(),tv2,tv1.getText().toString(),position);

            }
        });

          return row;
         }

        }
create function:
public void create(String price, final TextView tv1,final String item,final int position)
    {

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Update Prices");
    builder.setMessage("Current Price "+price);

     // Use an EditText view to get user input.
     final EditText input = new EditText(this);

     builder.setView(input);

    builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int whichButton) {
             uvalue = input.getText().toString();

             tv1.setText(uvalue);

            item_value[count]=uvalue;
            prices[position]=uvalue;
            item_name[count]=item;
            updated[count]=tv1;

             DBAdapter dbAdapter = DBAdapter.getDBAdapterInstance(getApplicationContext());
            try {
                dbAdapter.createDataBase();
            } catch (IOException e) {
            }
            dbAdapter.openDataBase();
            try {
                String query = "UPDATE Prices SET Price="+item_value[count]+" where Item_Name='"+item_name[count]+"'";
            Log.i("TAG","Query executed");
            Cursor c = dbAdapter.selectRecordsFromDB(query, null);

            ContentValues cv= new ContentValues();
            cv.put("Price", item_value[count]);
            Log.i("TAG","value to be updated is"+item_value[count]);
            Log.i("TAG","Item  to be updated is"+item_name[count]);
        boolean c1= dbAdapter.updateRecordInDB("Prices", cv, "Item_Name='"+item_name[count]+"'", null);
            count++;
            if(c1)
                tv1.setTextColor(Color.YELLOW);

                }
            catch (Exception e) {
                e.printStackTrace();
            }
            dbAdapter.close();

        }
    });

    builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {

        }
        });
    builder.show();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:26:04.990

您应该在 onCreateView 方法中重置 TextView 颜色

```
tv1.setColor(Color.Black) 
```

将使每个 ceil 变为黑色，除了点击（它们将是黄色的）

这一切都是因为 ListView 中的 ceil 被重用了。

**升级版：**

```
price = (TextView)row.findViewById(R.id.textView2);
         price.setText(prices[position]);        

if (itemShouldBeYellow(position)){
    price.setColor(Color.Yellow); 
} else {
    price.setColor(Color.Black); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:27:34.783

我认为你的问题可能是这一行：

```
updated[count]=tv1; 
```

您能否验证所有更改为黄色的文本视图都是从更新后的数组中填充的？

# actionscript-3 - as3 列出所有可用的打印机

> ID：14710858
> 
> 赞同：0
> 
> 时间：2013-02-05T15:21:09.847
> 
> 标签：actionscript-3

我想列出所有可用的打印机。我找到了这个答案： [As3 List down the Printers that available in the system](https://stackoverflow.com/questions/8221646/as3-list-down-the-printers-that-available-in-the-system) 但这不起作用，我收到此错误：

错误：通过静态类型 Class 的引用访问可能未定义的属性打印机。

这是我的来源：

```
package  
{
import flash.display.Sprite;
import flash.printing.PrintJob;
import flash.external.ExternalInterface;

public class gethwinfo extends Sprite
{

    public function gethwinfo() 
    {
        ExternalInterface.call('getPrinter', getPrinterList());
    }

    public function getPrinterList():Array
    {
        var printerList:Vector.<String> = PrintJob.printers;
        var deviceNames:Array = [];

        if (printerList)
        {
            for (var i:int = 0; i < printerList.length; i++)
            {
                deviceNames.push(printerList[i]);
            }
        } else
        {
            deviceNames.push("No Printers");
        }

        deviceNames.sort();
        return deviceNames;
    }   
}
} 
```

错误表示属性打印机未定义，尽管此属性列在参考中：http: [//help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/printing/PrintJob.html#printers](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/printing/PrintJob.html#printers)

在编译器选项中将严格模式设置为 true 时出现此错误。当我将它设置为 false 时，构建成功，但是当我调用这个 flash 对象时，它进入 else 分支，我得到字符串“No Printers”，这不应该是，因为我的机器上有 6 个打印机服务可用。

我希望你能给我一个提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:27:42.687

它仅在 AIR 中可用。这就是为什么 AIR 图标在 as-reference 中位于它旁边的原因。

# javascript - “hasClass”和“is”之间的区别？另外，替代返回 Jquery 元素？

> ID：14710860
> 
> 赞同：1
> 
> 时间：2013-02-05T15:21:10.667
> 
> 标签：javascript, jquery, html, filter

> **可能重复：**
> [jQuery .hasClass() 与 .is()](https://stackoverflow.com/questions/4901553/jquery-hasclass-vs-is)

HTML 代码：

```
<div class="results">
    <div class="table">
        <form class="tr" action="#" method="post">
            <div class="td">
                <input class="datepicker" type="text">
            </div>
            <div class="td">
                <input class="datepicker" type="text">
            </div>
            <div class="td">
                <input type="text">
            </div>
        </form>
    </div>
</div> 
```

JS代码：

```
$('.results').find('input:text').each(function(){
    var element = $(this);
    var b = element.hasClass('.datepicker');
    var c = element.is('.datepicker');
} 
```

我的问题：

'is' 和 'hasClass' 应该在找到包含类“datepicker”的元素时都返回 true，对吗？

不知何故，它不是。'hasClass' 返回 false，而 'is' 返回 true。

此外，我一直在寻找一种解决方案来进行一些链接 jquery 调用。但是 'hasClass' 和 'is' 都只返回一个布尔值。是否有一个返回 $(Jquery) 元素的 JQuery 函数，所以我可以做这样的事情？我已经尝试过“过滤”功能，但似乎不起作用。

```
element.SomeFunctionToDigUpAnElementWithClass('datepicker').DoSomeCoolStuff(); 
```

==================================================== ===============

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T15:23:06.367

`hasClass`当然，没有点，因为它是一个类名。`is`另一方面，任何选择器。

```
element.hasClass('datepicker'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-05T15:23:48.893

`hasClass()`更具体和更快的操作。is() 允许您选择更广泛的范围，例如您可以`is(':checked')`

[http://jsperf.com/hasclass-vs-is-so](http://jsperf.com/hasclass-vs-is-so)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T15:30:05.713

要保持链接，您需要修改选择器：

```
$('.results').find('input:text.datepicker').doSomething(); 
```

或者`each`如果您需要将特定参数传递给每个输入元素的下一个函数：

```
$('.results').find('input:text.datepicker').each(function(){
    doSomething();
}); 
```

如果您需要为没有 datepicker 类集的输入做一些事情，请使用`:not`选择器：

```
$('.results').find('input:text:not(.datepicker)').doSomething(); 
```

甚至没有`find`：

```
$('.results input:text.datepicker').doSomething(); 
```

# php - cURL 错误 (58): 无法设置私钥文件: '/var/www/work/xml/keys/client.pem' 类型 PEM

> ID：14710865
> 
> 赞同：3
> 
> 时间：2013-02-05T15:21:33.053
> 
> 标签：php, ssl, curl, openssl, libcurl

我在使用私钥和公钥连接到服务器时收到此错误。

**cURL 错误 (58): 无法设置私钥文件: '/var/www/work/xml/keys/client.pem' 类型 PEM**

我的私钥包含密钥和证书。它也有密码。

我当前的代码在这里：

```
 $url="https://example.website.com";

    $pemfile = "/var/www/work/xml/keys/server.pem";
    $keyfile = "/var/www/work/xml/keys/client.pem";

    $requestXml = file_get_contents("net.xml");

    $ch = curl_init(); 
    curl_setopt($ch, CURLOPT_URL, $url); 
    curl_setopt($ch, CURLOPT_HTTP_VERSION, 1.1); 
    curl_setopt($ch, CURLOPT_PORT, 443); 
    curl_setopt($ch, CURLOPT_PROTOCOLS, CURLPROTO_HTTPS);

    curl_setopt($ch, CURLOPT_VERBOSE, 1); 
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0); 

    curl_setopt($ch, CURLOPT_FAILONERROR, 0); 

    curl_setopt($ch, CURLOPT_SSLCERT, $pemfile); 
    curl_setopt($ch, CURLOPT_SSLCERTTYPE, 'PEM'); 
    curl_setopt($ch, CURLOPT_SSLCERTPASSWD, 'PASSWORD'); 

    curl_setopt($ch, CURLOPT_SSLKEY, $keyfile); 
    curl_setopt($ch, CURLOPT_SSLKEYPASSWD, "PASSWORD");

    curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: text/xml'));
    curl_setopt($ch, CURLOPT_POSTFIELDS, $requestXml);

    $data = curl_exec($ch);
    $curl_errno = curl_errno($ch);
    $curl_error = curl_error($ch);

    if ($curl_errno > 0) 
    {
        echo "cURL Error ($curl_errno): $curl_error\n";
    }
    else 
    {
        header("Content-Type: text/xml");
        print_r($data);
    }

    curl_close($ch); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:31:10.533

看来您的脚本无法`$keyfile`正确访问该文件。您可能需要仔细检查您的脚本（或进程）是否具有正确的权限，或修改文件权限。

# symfony - PHPStorm 没有显示 Symfony2 学说实体的关系

> ID：14710870
> 
> 赞同：0
> 
> 时间：2013-02-05T15:22:03.017
> 
> 标签：symfony, doctrine-orm, data-modeling, phpstorm

我正在使用 PHPStorm 5 和 Symfony2 Doctrine2 实体。我正在使用注释来指定关系。

当我尝试生成所有捆绑包和实体的图表时，它只显示所有单个类/实体的图表，但没有实体之间的关系。

我认为这是 PHPStorm 支持的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T15:44:47.183

据我所知，phpstorm 生成的图表只显示了类扩展了另一个类或实现了接口。

它看起来像这样：

![在此处输入图像描述](../Images/b98d67332a05149f31c0c70829b03919.png)

PhpStorm 5 中的新功能是 symfony2 支持，例如。您可以在 IDE 之外运行 symfony2`app/console`工具，它支持 MVC 项目视图，但这与图表无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T15:34:48.757

试试[ORM 设计器](http://www.orm-designer.com/)。它完全支持 Doctrine2 ORM，它可以生成您项目的完整图表（对象、关系和所有）。您还可以在可视化环境中编辑模式并自动生成模式文件。

# c++ - CAD 系统用户界面的决策表示例

> ID：14710875
> 
> 赞同：2
> 
> 时间：2013-02-05T15:22:13.940
> 
> 标签：c++, coding-style

我想将简单 CAD 系统的用户界面放在决策表中。但我担心如何将这些东西放在桌子上。

首先，有一个当前模式（CurMode）可以是：移动、旋转、删除

接下来，有这样的鼠标动作：

OnLButtonDown OnLButtonUp OnRButtonDown OnRButtonUp OnMButtonDown OnMButtonUp OnMouseMove

也许对当前鼠标光标下的对象有一个附加测试，比如这个 ObjectUnderMouse (true/False)

有了这些和其他参数，我想决定以下规则：

如果 Mode 为 Delete 且对象位于鼠标下方且按下 OnLButtonDown，则删除该对象。

如果按下 MButtonUp (MouseWheel)，则缩放 + 如果按下 MButtonDown (MouseWheel)，则缩放 -

如果 Mode 是 Move 并且对象在鼠标下方并且 OnLButtonDown 被按下，则将对象放入缓冲区中。如果 Mode 为 Move 且 OnLButtonDown 且对象在 Buffer 和 OnMouseMove 动作，则移动对象

...... 等等。

你明白这个场景吗？

我在 Google 上搜索了很多，看到了非常简单的 DT，但是如何将这作为一个具有数百个参数、状态、模式和 UI 操作的大型 CAD 系统的良好开端。

为这样的 CAD 系统服务的决策表的最佳设计是什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T07:06:33.833

Statestep ( [http://statestep.com](http://statestep.com) ) 可能是您正在寻找的。网站上给出的示例是针对用户界面的，并且描述了它在一个非常大的系统中的使用（包含数百万种可能性的规则的决策表）。有 C 的代码生成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:40:22.960

感谢您的回复。我将仔细研究 statestep（我们不使用 QT）。但总的来说，我在决定我的 cad 系统的哪个部分是条件、动作、条件替代等来定义像 wiki 这样的决策表时遇到问题。[维基决策表](http://en.wikipedia.org/wiki/Decision_table)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-03T17:49:44.397

我有一个类似的决策过程要实施，这就是我想出的。大概可以改写更美，不过那是另外一个话题了！

您还可以将 if 语句中的布尔值对齐，使其始终位于相同的列上，使其看起来更像一张表。

```
////////////////////////////////////////////////////////////////////////////////
EditToolMode *EditTool::decideToolMode()
{   
    bool const isLongPress = (m_lastReleaseTime - m_lastPressTime) > sm_longPressThreshold;
    bool const isMouseMoved = (m_startCoords.get() - m_currentCoords.get()).norm() > sm_movedMouseThreshold;
    bool const isOnPoint = m_closestPoint.is_initialized() && (m_closestPointDistance2d < sm_onPointThreshold);
    bool const isOnEdge = m_selectedPolyline.is_initialized();
    bool const isOngoingSelection = !m_ongoingSelection.empty();
    bool const isEndEdit = m_editChronology == END_EDIT;
    bool const isOnOngoingSelection = isPointOnOngoingSelection(m_ongoingSelection, m_closestPoint);

    if (isOngoingSelection && isOnPoint && isOnOngoingSelection)
    {
        return new ...;
    }

    if (isOngoingSelection && !isMouseMoved && !isOnEdge)
    {
        return new ...;
    }

    if (!isMouseMoved && !isOnEdge && isEndEdit)
    {
        return new ...;
    }

    if (!isMouseMoved && isOnPoint && isLongPress)
    {
        return new ...;
    }

    if (!isMouseMoved && isOnEdge && isLongPress)
    {
        return new ...;
    }

    if (isMouseMoved)
    {
        return new ...;
    }

    return nullptr;
} 
```

# java - 垃圾收集的工作

> ID：14710880
> 
> 赞同：0
> 
> 时间：2013-02-05T15:22:26.670
> 
> 标签：java, garbage-collection

在这里，我对垃圾收集有一个 Java 疑问：

```
protected class Robocop {
Integer weight = 200;

Robocop attent(Robocop rb) {
rb = null;
return rb;
}
public static void main(String[] args) {
System.out.println("indeed the solution is behind the corner);

Robocop rb1 = new Robocop();

Robocop rb2 = new Robocop();

Robocop rb3 = rb1.attent(rb2);

rb1 = null;

}
} 
```

你认为有多少对象将符合 GC 条件？

我对此的看法是 4 个对象被垃圾收集 rb3、rb1 和相关的整数包装器实例变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:26:57.503

在您的方法中，您也可以返回`null`，因为您获得了引用的副本作为方法的参数，而不是原始引用本身。因此，您不能在您的方法中修改原始参考。您只能修改此引用所指的对象。

在 main 的末尾，有 2 个对象符合 GC 条件：一个`Robocop`（其中一个`Integer`）。

main 完成后，JVM 将关闭（在您的情况下）并且不会发生 GC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:29:36.733

最好使用分析器进行尝试，该分析器可以在任何给定时间显示对象的确切数量。看起来您的代码中有错字。您可能的意思是`Robocop rb3 = rb1.attent(r2);` 假设这就是您的意思，rb2 将有资格进行 GC，然后 rb1 也将有资格，因为它们指向 null。
所以答案是2。

# c# - DataGrid 的 SelectedItem

> ID：14710884
> 
> 赞同：3
> 
> 时间：2013-02-05T15:22:34.883
> 
> 标签：c#, wpf, wpf-controls, wpfdatagrid

我正在为主机监控应用程序开发用户界面，该应用程序已经在数据库级别进行监控。我在我的 UI 上显示了 2 个数据网格，它们将在运行时填充。这两个数据网格通过 HostID 连接（HostID 是 LogDatagrid 中的外键）。

第一个数据网格显示主机列表及其状态（正在运行或已停止）。当用户想详细了解状态时，我想显示相应 HostID 的日志状态。当用户在 HostDatagrid 中选择主机 ID 时，如何实现这一点？我添加了我的 XAML 和我的 UI 屏幕截图。

![用户界面设计](../Images/02f91d6e99bd84f21c3a00e17ac13302.png)

XAML

```
 <DataGrid DataContext="{Binding Path=HostData,NotifyOnTargetUpdated=True,Mode=OneWay}" 
    AutoGenerateColumns="False" Name="hostDatagrid" Margin="171,32,235,230">
    <DataGrid.Columns>
    <DataGridTextColumn Header="Host" Width="auto" Binding="{Binding HostID}" />
     <DataGridTextColumn Header="Status" Width="auto" Binding="{Binding HostStatus}"/> 
     </DataGrid.Columns>
  </DataGrid>
 <DataGrid DataContext="{Binding Path=LogData,NotifyOnTargetUpdated=True,Mode=OneWay}"
   AutoGenerateColumns="False" Name="LogDatagrid" Margin="103,108,102,145">
    <DataGrid.Columns>
    <DataGridTextColumn Header="Host ID" Width="auto"  Binding="{Binding HostID}" />
    <DataGridTextColumn Header="Logs" Width="auto"  Binding="{Binding LogID}" />
    <DataGridTextColumn Header="Log Path" Width="auto"  Binding="{Binding LogPath}"/>
    <DataGridTextColumn Header="Date" Width="auto"  Binding="{Binding Date}"/>
    <DataGridTextColumn Header="Last Activity" Width="auto"  Binding="{Binding LastActivity}"/>
  </DataGrid.Columns> 
```

LogFile 模型背后的代码：

```
 public LogFileModel()
    {

    }
    private int _hostID;
    public int HostID
    {
        get { return _hostID; }
        set { _hostID= value; OnpropertyChanged("HostID"); }
    }

    private string _logid;
    public string LogID
    {
        get { return _logid; }
        set { _logid= value; OnpropertyChanged("LogID"); }
    }

    private string _logpath;
    public string LogPath
    {
        get { return _logPath; }
        set { _logPath = value; OnpropertyChanged("LogPath"); }
    }

    private DateTime _date;
    public DateTime Date;
    {
        get { return _date; }
        set { _date= value; OnpropertyChanged("Date"); }
    }

    private bool _activity;
    public bool LastActivity
    {
        get { return _activity; }
        set { _activity= value; OnpropertyChanged("LastActivity"); }
    } 
```

LogFile ViewModel 背后的代码：

```
 LogModel _myModel = new LogModel();
    private ObservableCollection<LogFileModel> _logFileData = new  ObservableCollection<LogFileModel>();
    public ObservableCollection<LogFileModel> LogFileData
    {
        get { return _logFileData; }
        set { _logFileData = value; OnPropertyChanged("LogFileData"); }
    }
   public LogFileViewModel()
    {
        initializeload();
        timer.Tick += new EventHandler(timer_Tick);
        timer.Interval = new TimeSpan(0, 0, 3);
        timer.Start();
    }

    ~LogFileViewModel()
    {
        Dispose(false);
    }

    protected virtual void Dispose(bool disposing)
    {
        if (!disposed)
        {
            if (disposing)
            {
                timer.Stop();
                timer.Tick -= new EventHandler(timer_Tick);
            }
            disposed = true;
        }
    }

    private void timer_Tick(object sender, EventArgs e)
    {
        try
        {
            LogFileData.Clear();
            initializeload();
        }
        catch (Exception ex)
        {
            timer.Stop();
            Console.WriteLine(ex.Message);

        }
    }

    private void initializeload()
    {
        try
        {
            DataTable table = _myModel.getData();

            for (int i = 0; i < table.Rows.Count; ++i)
                LogFileData.Add(new LogFileModel
                {
                   HostID= Convert.ToInt32(table.Rows[i][0]),
                   LogID = table.Rows[i][1].ToString(),
                   LogPath = table.Rows[i][2].ToString(),
                   Date = Convert.ToDateTime(table.Rows[i][3]),
                   LastAcivity= table.Rows[i][4].ToString(),                   
                });
        }

        catch (Exception e)
        {
            Console.WriteLine(e.Message);
        }
    }
    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string propertyname)
    {
        var handler = PropertyChanged;
        if (handler != null)
            handler(this, new PropertyChangedEventArgs(propertyname));
    }

    public class LogModel
    {
        public DataTable getData()
        {
            DataTable ndt = new DataTable();
            SqlConnection sqlcon = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);
            sqlcon.Open();
            SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM [LocalDB].[dbo].[LogFiles]", sqlcon);
            da.Fill(ndt);
            da.Dispose();
            sqlcon.Close();
            return ndt;
        }
    }
} 
```

}

对于主机模型和视图模型，我也遵循了相同的模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:40:19.930

您的代码视图模型中必须包含以下内容

一个 SelectedItem，它将在第一个 DataGrid 中保存所选项目。包含所有主机的集合 HostData。一个空集合 Log Data，它将显示特定主机的日志

```
//populate with all your hosts and this will bind to your first datagrid
private ObservableCollection<HostModel> _hostData= new ObservableCollection<Host>();

public ObservableCollection<HostModel> HostData
{
    get { return _hostData; }
    set { _hostData= value; OnPropertyChanged("HostData"); }
}

//populate with all the logs for the selected item and bind this to your second datagrid
private ObservableCollection<LogFileModel> _logFileData = new ObservableCollection<LogFileModel>();

public ObservableCollection<LogFileModel> LogFileData
{
    get { return _logFileData; }
    set { _logFileData = value; OnPropertyChanged("LogFileData"); }
}

//when the user selects an item in the first datagrid this property will hold the value
//so you will bind it to the selected item property of your first datagrid
private Host _selectedHost; //initialise to avoid null issues

public HostModelSelectedHost
{
    get{ return _selectedItem; } 
    set 
    {
        //call a method to populate you second collection
        _selectedHost = value;
        logFileData = GetLogsForSelectedHost(_selectedHost);
        OnPropertyChanged("SelectedHost");
    { 
}

//the method for populating your second collection could look like this
private ObservableCollection<LogFileModel> GetLogsForSelectedHost(_selectedHost)
{
    ObservableCollection<LogFileModel> filteredLogs = new ObservableCollection<LogFileModel>;

    filteredLogs = //fill the collection with all the logs that match the host ID of
                   //your selected item
    return filteredLogs ;
} 
```

从您的代码中我不确定哪个类是哪个，但我希望上面的代码可以向您展示这样做的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:34:42.927

做这样的事情：

在您的主数据模型中创建一个名为 search 的方法。Search 有一个查询来搜索您的其他数据库，该数据库保存数据日志并返回数据表。然后为您的主机状态数据网格添加一个 CellClick 侦听器方法，并执行如下操作。我希望我不明白你需要什么。

```
private void hostDatagrid_CellClick(object sender, DataGridViewCellEventArgs e)
    {
        string cellValue = hostDatagrid[e.ColumnIndex,e.RowIndex].Value.ToString();
        LogFileViewModel logFileViewModel = new LogFileViewModel();
        DataTable table = logFileViewModel.search(cellValue);
        BindingSource bs = new BindingSource();
        bs.DataSource = table;
        logDataGrid.Datasource = table;
        logDataGrid.Update();
        logDataGrid.Refresh();
    }

   // and add this method to  LogFileViewModel

 public DataTable Search(string hostID)
    {
        DataTable ndt = new DataTable();
        SqlConnection sqlcon = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnectionString"].ConnectionString);
        sqlcon.Open();
        SqlDataAdapter da = new SqlDataAdapter("SELECT * FROM whatever WHERE hostid ="+hostID, sqlcon);
        da.Fill(ndt);
        da.Dispose();
        sqlcon.Close();
        return ndt;

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T15:47:38.023

1）从您的 ViewModel 中绑定您`SelectedItem`的属性`Host``Host` `DataGrid`

```
SelectedItem = {Binding SelectedHost, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged} 
```

2）假设 LogData 是一个 ObservableCollection，在`SelectedHost`属性的设置器中，更新 LogData 以显示`Host`.

```
public Host SelectedHost {
    get;
    set {
        SelectedHost = value;
        UpdateLogData();
        OnPropertyChanged("SelectedHost");
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T15:32:28.170

您必须将所选时间绑定到视图模型中的对象，并且每当此值更改时，您都可以更改集合 LogData 以显示您想要的内容。

# jquery - 带有用于编辑的模式的数据表。是否可以？

> ID：14710889
> 
> 赞同：0
> 
> 时间：2013-02-05T15:22:53.227
> 
> 标签：jquery, twitter-bootstrap, datatables, modal-dialog

我有一个 DataTable（从远程服务器获取数据），并且在每个单元格中我都有可以弹出一个模式的鼠标悬停链接（所有链接都是相同的）。问题是我无法传递行的唯一 ID 和单元格的数据。有什么方法可以让我的代码在我点击的那一行理解吗？

```
<!doctype html>
<html lang="tr">
 <head>
    <meta charset="utf-8">
    <link href="http://127.0.0.1/HCAWebApp/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <title>Binalar</title>

        <style type="text/css" title="currentStyle">
            /* Twitter Bootstrap temalı tablo için */

            div.dataTables_length label {
                float: left;
                text-align: left;
            }

            div.dataTables_length select {
                width: 75px;
            }

            div.dataTables_filter label {
                float: right;
            }

            div.dataTables_info {
                padding-top: 8px;
            }

            div.dataTables_paginate {
                float: right;
                margin: 0;
            }

            table.table {
                clear: both;
                margin-bottom: 6px !important;
                max-width: none !important;
            }

            table.table thead .sorting, table.table thead .sorting_asc, table.table thead .sorting_desc, table.table thead .sorting_asc_disabled, table.table thead .sorting_desc_disabled {
                cursor: pointer;
                *cursor: hand;
            }

            table.table thead .sorting {
                background: url('../images/sort_both.png') no-repeat center right;
            }
            table.table thead .sorting_asc {
                background: url('../images/sort_asc.png') no-repeat center right;
            }
            table.table thead .sorting_desc {
                background: url('../images/sort_desc.png') no-repeat center right;
            }

            table.table thead .sorting_asc_disabled {
                background: url('../images/sort_asc_disabled.png') no-repeat center right;
            }
            table.table thead .sorting_desc_disabled {
                background: url('../images/sort_desc_disabled.png') no-repeat center right;
            }

            table.dataTable th:active {
                outline: none;
            }

            /* Scrolling */
            div.dataTables_scrollHead table {
                margin-bottom: 0 !important;
                border-bottom-left-radius: 0;
                border-bottom-right-radius: 0;
            }

            div.dataTables_scrollHead table thead tr:last-child th:first-child, div.dataTables_scrollHead table thead tr:last-child td:first-child {
                border-bottom-left-radius: 0 !important;
                border-bottom-right-radius: 0 !important;
            }

            div.dataTables_scrollBody table {
                border-top: none;
                margin-bottom: 0 !important;
            }

            div.dataTables_scrollBody tbody tr:first-child th, div.dataTables_scrollBody tbody tr:first-child td {
                border-top: none;
            }

            div.dataTables_scrollFoot table {
                border-top: none;
            }

            /*
             * TableTools styles
             */
            .table tbody tr.active td, .table tbody tr.active th {
                background-color: #08C;
                color: white;
            }

            .table tbody tr.active:hover td, .table tbody tr.active:hover th {
                background-color: #0075b0 !important;
            }

            .table-striped tbody tr.active:nth-child(odd) td, .table-striped tbody tr.active:nth-child(odd) th {
                background-color: #017ebc;
            }

            table.DTTT_selectable tbody tr {
                cursor: pointer;
                *cursor: hand;
            }

            div.DTTT .btn {
                color: #333 !important;
                font-size: 12px;
            }

            div.DTTT .btn:hover {
                text-decoration: none !important;
            }

            ul.DTTT_dropdown.dropdown-menu a {
                color: #333 !important; /* needed only when demo_page.css is included */
            }

            ul.DTTT_dropdown.dropdown-menu li:hover a {
                background-color: #0088cc;
                color: white !important;
            }

            /* TableTools information display */
            div.DTTT_print_info.modal {
                height: 150px;
                margin-top: -75px;
                text-align: center;
            }

            div.DTTT_print_info h6 {
                font-weight: normal;
                font-size: 28px;
                line-height: 28px;
                margin: 1em;
            }

            div.DTTT_print_info p {
                font-size: 14px;
                line-height: 20px;
            }

            /*
             * FixedColumns styles
             */
            div.DTFC_LeftHeadWrapper table, div.DTFC_LeftFootWrapper table, table.DTFC_Cloned tr.even {
                background-color: white;
            }

            div.DTFC_LeftHeadWrapper table {
                margin-bottom: 0 !important;
                border-top-right-radius: 0 !important;
                border-bottom-left-radius: 0 !important;
                border-bottom-right-radius: 0 !important;
            }

            div.DTFC_LeftHeadWrapper table thead tr:last-child th:first-child, div.DTFC_LeftHeadWrapper table thead tr:last-child td:first-child {
                border-bottom-left-radius: 0 !important;
                border-bottom-right-radius: 0 !important;
            }

            div.DTFC_LeftBodyWrapper table {
                border-top: none;
                margin-bottom: 0 !important;
            }

            div.DTFC_LeftBodyWrapper tbody tr:first-child th, div.DTFC_LeftBodyWrapper tbody tr:first-child td {
                border-top: none;
            }

            div.DTFC_LeftFootWrapper table {
                border-top: none;
            }

        </style>

    <script src="http://127.0.0.1/HCAWebApp/DataTables-1.9.4/media/js/jquery.js"></script>
    <script type="text/javascript" language="javascript" src="http://127.0.0.1/HCAWebApp/DataTables-1.9.4/media/js/jquery.dataTables.js"></script>

    <style>
        body {
            padding: 15px 30px;
        }
        .alignleft {
            float: left;
            vertical-align: text-bottom;
        }
        .alignright {
            float: right;
            vertical-align: text-bottom;
        }
        td {
            width: 6%
        }
        input {
            width: 80px;
        }
    </style>

        <script type="text/javascript" charset="utf-8">
            /* Set the defaults for DataTables initialisation */
            $.extend(true, $.fn.dataTable.defaults, {
                "sDom" : "<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",
                "sPaginationType" : "bootstrap",
                "oLanguage" : {
                    "sLengthMenu" : "_MENU_ records per page"
                }
            });

            /* Default class modification */
            $.extend($.fn.dataTableExt.oStdClasses, {
                "sWrapper" : "dataTables_wrapper form-inline"
            });

            /* API method to get paging information */
            $.fn.dataTableExt.oApi.fnPagingInfo = function(oSettings) {
                return {
                    "iStart" : oSettings._iDisplayStart,
                    "iEnd" : oSettings.fnDisplayEnd(),
                    "iLength" : oSettings._iDisplayLength,
                    "iTotal" : oSettings.fnRecordsTotal(),
                    "iFilteredTotal" : oSettings.fnRecordsDisplay(),
                    "iPage" : oSettings._iDisplayLength === -1 ? 0 : Math.ceil(oSettings._iDisplayStart / oSettings._iDisplayLength),
                    "iTotalPages" : oSettings._iDisplayLength === -1 ? 0 : Math.ceil(oSettings.fnRecordsDisplay() / oSettings._iDisplayLength)
                };
            };

            /* Bootstrap style pagination control */
            $.extend($.fn.dataTableExt.oPagination, {
                "bootstrap" : {
                    "fnInit" : function(oSettings, nPaging, fnDraw) {
                        var oLang = oSettings.oLanguage.oPaginate;
                        var fnClickHandler = function(e) {
                            e.preventDefault();
                            if (oSettings.oApi._fnPageChange(oSettings, e.data.action)) {
                                fnDraw(oSettings);
                            }
                        };

                        $(nPaging).addClass('pagination').append('<ul>' + '<li class="prev disabled"><a href="#">&larr; ' + oLang.sPrevious + '</a></li>' + '<li class="next disabled"><a href="#">' + oLang.sNext + ' &rarr; </a></li>' + '</ul>');
                        var els = $('a', nPaging);
                        $(els[0]).bind('click.DT', {
                            action : "previous"
                        }, fnClickHandler);
                        $(els[1]).bind('click.DT', {
                            action : "next"
                        }, fnClickHandler);
                    },

                    "fnUpdate" : function(oSettings, fnDraw) {
                        var iListLength = 5;
                        var oPaging = oSettings.oInstance.fnPagingInfo();
                        var an = oSettings.aanFeatures.p;
                        var i, ien, j, sClass, iStart, iEnd, iHalf = Math.floor(iListLength / 2);

                        if (oPaging.iTotalPages < iListLength) {
                            iStart = 1;
                            iEnd = oPaging.iTotalPages;
                        } else if (oPaging.iPage <= iHalf) {
                            iStart = 1;
                            iEnd = iListLength;
                        } else if (oPaging.iPage >= (oPaging.iTotalPages - iHalf)) {
                            iStart = oPaging.iTotalPages - iListLength + 1;
                            iEnd = oPaging.iTotalPages;
                        } else {
                            iStart = oPaging.iPage - iHalf + 1;
                            iEnd = iStart + iListLength - 1;
                        }

                        for ( i = 0, ien = an.length; i < ien; i++) {
                            // Remove the middle elements
                            $('li:gt(0)', an[i]).filter(':not(:last)').remove();

                            // Add the new list items and their event handlers
                            for ( j = iStart; j <= iEnd; j++) {
                                sClass = (j == oPaging.iPage + 1) ? 'class="active"' : '';
                                $('<li ' + sClass + '><a href="#">' + j + '</a></li>').insertBefore($('li:last', an[i])[0]).bind('click', function(e) {
                                    e.preventDefault();
                                    oSettings._iDisplayStart = (parseInt($('a', this).text(), 10) - 1) * oPaging.iLength;
                                    fnDraw(oSettings);
                                });
                            }

                            // Add / remove disabled classes from the static elements
                            if (oPaging.iPage === 0) {
                                $('li:first', an[i]).addClass('disabled');
                            } else {
                                $('li:first', an[i]).removeClass('disabled');
                            }

                            if (oPaging.iPage === oPaging.iTotalPages - 1 || oPaging.iTotalPages === 0) {
                                $('li:last', an[i]).addClass('disabled');
                            } else {
                                $('li:last', an[i]).removeClass('disabled');
                            }
                        }
                    }
                }
            });

            /*
             * TableTools Bootstrap compatibility
             * Required TableTools 2.1+
             */
            if ($.fn.DataTable.TableTools) {
                // Set the classes that TableTools uses to something suitable for Bootstrap
                $.extend(true, $.fn.DataTable.TableTools.classes, {
                    "container" : "DTTT btn-group",
                    "buttons" : {
                        "normal" : "btn",
                        "disabled" : "disabled"
                    },
                    "collection" : {
                        "container" : "DTTT_dropdown dropdown-menu",
                        "buttons" : {
                            "normal" : "",
                            "disabled" : "disabled"
                        }
                    },
                    "print" : {
                        "info" : "DTTT_print_info modal"
                    },
                    "select" : {
                        "row" : "active"
                    }
                });

                // Have the collection use a bootstrap compatible dropdown
                $.extend(true, $.fn.DataTable.TableTools.DEFAULTS.oTags, {
                    "collection" : {
                        "container" : "ul",
                        "button" : "li",
                        "liner" : "a"
                    }
                });
            }

            /* Table initialisation */
            var asInitVals = new Array();
            $(document).ready(function() {
                var oTable = $('#binalar').dataTable({
                    "sDom" : "<'row-fluid'<'span6'l><'span6'f>r>t<'row-fluid'<'span6'i><'span6'p>>",
                    "sPaginationType" : "bootstrap",
                    "sAjaxSource" : "../index.php/getbuildings",

                    "aoColumnDefs" : [{
                        "sClass" : "binaadi",
                        "aTargets" : [0]
                    }, {
                        "sClass" : "cihazlar",
                        "aTargets" : [2]
                    }, {
                        "sClass" : "veriyukle",
                        "aTargets" : [3]
                    }, {
                        "sClass" : "goruntule",
                        "aTargets" : [4]
                    }],

                    "oLanguage" : {
                        "sLengthMenu" : "_MENU_ records per page",
                        "sSearch" : "Search all columns:"
                    },

                });

                $("tfoot input").keyup(function() {
                    /* Filter on the column (the index) of this element */
                    oTable.fnFilter(this.value, $("tfoot input").index(this));
                });

                /*
                 * Support functions to provide a little bit of 'user friendlyness' to the textboxes in
                 * the footer
                 */
                $("tfoot input").each(function(i) {
                    asInitVals[i] = this.value;
                });

                $("tfoot input").focus(function() {
                    if (this.className == "search_init") {
                        this.className = "";
                        this.value = "";
                    }
                });

                $("tfoot input").blur(function(i) {
                    if (this.value == "") {
                        this.className = "search_init";
                        this.value = asInitVals[$("tfoot input").index(this)];
                    }
                });

            });

        </script>

<script>
    jQuery(document).ready(function() {
        jQuery('#binalar').on('mouseenter', '.binaadi', function() {
            $(this).append($("<span style='font-size:80%;'> <a data-toggle='modal' data-id='001122' title='Add this item' class='open-AddBookDialog' href='#addBookDialog'>Düzenle</a> | <a href='#'>Sil</a></span>"));
        });
        jQuery('#binalar').on('mouseleave', '.binaadi', function() {
            $(this).find("span:last").remove();
        });
        jQuery('#binalar').on('mouseenter', '.cihazlar', function() {
            $(this).append($("<span style='font-size:80%;'> <a href='#'>Cihazlar</a></span>"));
        });
        jQuery('#binalar').on('mouseleave', '.cihazlar', function() {
            $(this).find("span:last").remove();
        });
        jQuery('#binalar').on('mouseenter', '.veriyukle', function() {
            $(this).append($("<span style='font-size:80%;'> <a href='#'>Veri Yükle</a></span>"));
        });
        jQuery('#binalar').on('mouseleave', '.veriyukle', function() {
            $(this).find("span:last").remove();
        });
        jQuery('#binalar').on('mouseenter', '.goruntule', function() {
            $(this).append($("<span style='font-size:80%;'> <a href='#'>Görüntüle</a></span>"));
        });
        jQuery('#binalar').on('mouseleave', '.goruntule', function() {
            $(this).find("span:last").remove();
        });
    }); 
</script>

<script>
    // modallar için

    jQuery(document).ready(function() {
        jQuery(document).on("click", ".open-AddBookDialog", function() {
            var myBookId = $(this).data('id');
            $(".modal-body #bookId").val(myBookId);
            $('#addBookDialog').modal('show');
        });

    }); 
</script>

</head>
<body>               <div class="navbar">
              <div class="navbar-inner">
                <div class="container">
                  <a class="btn btn-navbar" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                  </a>
                  <div class="nav-collapse collapse navbar-responsive-collapse">
                    <ul class="nav">
                    <li class='active'><a href="binalar">Binalar</a></li>
                    <li ><a href="cihazlar">Cihazlar</a></li>
                    <li ><a href="kullanicilar">Kullanıcılar</a></li>
                    <li ><a href="gruplar">Gruplar</a></li>

                    </ul>
                    <ul class="nav pull-right">
                      <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">test <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                          <li><a href="#">Veritronik</a></li>
                          <li><a href="#">Seller</a></li>
                          <li class="divider"></li>
                          <li><a href="kullanicilar/logout">Çıkış</a></li>
                        </ul>
                      </li>
                    </ul>
                  </div><!-- /.nav-collapse -->
                </div>
              </div><!-- /navbar-inner -->
            </div><!-- /navbar --><div class='fdfg'>
    <div id="baslik">
        <h1 style="margin-bottom:-15px" class="alignleft">Binalar</h1>
        <!-- @formatter:on -->
                <h3 style="margin-bottom:-15px" class="alignright">+ Bina Ekleme</h3>       <!-- @formatter:off -->
    </div>
    <div style="clear: both;"></div>
    <hr>

    <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="binalar">
        <thead>
            <tr>
                <th>Adı</th>
                <th>Bina Yetkilisi</th>
                <th>Ölçüm Tipi</th>
                <th>Faturalama Periyodu</th>
                <th>Şehir</th>
                <th>Bölge</th>
                <th>Bina ID</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td colspan="7" class="dataTables_empty">Veriler sunucudan yükleniyor.</td>
            </tr>
        </tbody>

        <tfoot>
            <tr>
                <th>
                <input type="text" name="search_engine" value="Adı" class="search_init" />
                </th>
                <th>
                <input type="text" name="search_browser" value="Bina Yetkilisi" class="search_init" />
                </th>
                <th>
                <input type="text" name="search_engine" value="Ölçüm Tipi" class="search_init" />
                </th>
                <th>
                <input type="text" name="search_engine" value="Faturalama Periyodu" class="search_init" />
                </th>
                <th>
                <input type="text" name="search_engine" value="Şehir" class="search_init" />
                </th>
                <th>
                <input type="text" name="search_engine" value="Bölge" class="search_init" />
                </th>
                <th>
                <input type="text" name="search_engine" value="Bina ID" class="search_init" />
                </th>
            </tr>
        </tfoot>

    </table>

</div>

<div class="modal hide" id="addBookDialog">
    <div class="modal-header">
        <button class="close" data-dismiss="modal">
            ×
        </button>
        <h3>Modal header</h3>
    </div>
    <div class="modal-body">
        <p>
            some content
        </p>
        <input type="text" name="bookId" id="bookId" value=""/>
    </div>
</div>

<script src="../bootstrap/js/bootstrap.min.js"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:54:48.660

如果您将鼠标悬停链接作为 onclick 函数调用而不是直接链接运行，则可以在函数内部使用 $(this) 来获取警告单击处理程序的对象，然后使用它来填充模态和/或 jquery/javascript 中的字段变量。它不一定是世界上最优雅的答案，但它应该让您访问/​​保留您需要的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T12:27:42.360

我已经用 jQuery 和 AJAX 做到了这一点。我的表格的第一列是一个复选框。复选框的名称属性值是来自 WordPress 的帖子 ID，它是 MySQL 中生成的唯一 ID。基本上它是数据库中的表行 ID。

我使用您可以修改给我们的代码。on('click') 从新的单元格/列中获取 ID，然后您可以打开一个模式并在新的表单字段中设置 ID，如果您需要发布，或者使用 AJAX从您的数据库中获取信息到模态中。

```
$(function () {

$('#datatable2').on('switch-change', '.make-switch', function (e) {
    var postid = $(this).find('input').attr('name');

            $.ajax({
            url: 'http://www.example.com/json.php',
            type: 'POST',
            data: {post_id: postid},
            success: function (result) {
              alert("Data was saved");
              console.log(result);
              //location.reload();
            }
        }); 
    console.log(postid);
}); 
```

# fabricjs - Fabricjs 文本对象 fontSize 单位

> ID：14710891
> 
> 赞同：3
> 
> 时间：2013-02-05T15:22:55.203
> 
> 标签：fabricjs

在对代码进行了一些挖掘之后，我意识到fabricjs Text 对象的fontSize 是在PIXELS 中测量的。在我的项目中，有时我需要使用点而不是像素。

当指定单位时，我在代码中只找到一个地方，这个片段：

```
 /**
 * @private
 * @method _getFontDeclaration
 */
_getFontDeclaration: function() {
  return [
    this.fontStyle,
    this.fontWeight,
    this.fontSize + 'px',
    (fabric.isLikelyNode ? ('"' + this.fontFamily + '"') : this.fontFamily)
  ].join(' ');
} 
```

`px`如果我将' '替换为''，我会打破依赖关系（基于此字段的任何度量特定计算）`pt`吗？

ps：文档中没有关于**fabric.Text**对象的fontSize单位/指标的信息，很高兴添加它以节省其他人的时间......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-12T22:23:52.770

最近添加了一个“parseUnit”方法。

您可以按如下方式定义 setFontSize 函数：

```
fabric.Text.prototype.setFontSize = function(size) {
  this.fontSize = fabric.util.parseUnit(size);
  return this;
} 
```

在fabricjs中，DPI设置为96（可以更改），'pt'以这种方式转换：

```
return number * fabric.DPI / 72 
```

这样你就可以使用'mm', 'cm', 'in', 'pt', 'pc', 'em'

# sql-server-2008 - 返回多个 sql 查询结果 - C#

> ID：14710903
> 
> 赞同：0
> 
> 时间：2013-02-05T15:23:29.230
> 
> 标签：sql-server-2008, c#-3.0

我有以下运行大约 20 个 sql 查询的方法。将结果返回给客户的最佳方式是什么？

```
public int Results()
{
    using (var conn = GetConnection())
            using (var cmd = new SqlCommand())
            {
                cmd.Connection = conn;
                cmd.CommandType = CommandType.Text;
                cmd.CommandText = @"SELECT TOP 1 stdent_number from Students";

                conn.Open();
                var result = (int)cmd.ExecuteScalar();

                cmd.CommandText = @"SELECT TOP 1 class_number from Classes";
        var number = (int)cmd.ExecuteScalar();

                cmd.CommandText = @"SELECT TOP 1 table from Tables";
        var table = (int)cmd.ExecuteScalar();

                cmd.CommandText = @"SELECT TOP 1 suite from Suites";
        var suite = (int)cmd.ExecuteScalar();

                 .....
                //I want to return result, number, table and suite so they can be populated on client
        //What is the best way to return? Should I create IEnumerable and add values to it and return
        //as IEnumerable or should these be returned all separately or as a dictionary?
        //Also this is just an example in real time I have at least 15 values from sql queries that I       //want to return

            }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:28:41.367

如果我正确理解了您的问题，您需要如何通过此功能将所有成功的查询数据传递回您的客户。我建议您创建自己的类（DTO 的 [数据传输对象]）以将多个信息从您的函数传递给客户端。而不是使用 Int 函数的返回类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:36:40.963

如果您不想创建 proc，请尝试如下

将所有查询传递给字符串变量，如下所示...

```
string sql = "SELECT TOP 1 stdent_number from Students; SELECT TOP 1 class_number from Classes; SELECT TOP 1 table from Tables; SELECT TOP 1 suite from Suites"; 
```

之后尝试如下..

```
using (SqlConnection conn = new SqlConnection(connection))
{
    var result,number,table;
    conn.Open();
            Cmd = new SqlCommand(sql, conn);
            SqlDataReader sqlReader = Cmd.ExecuteReader();
            while (sqlReader.Read())
            {
                result = dr[0].ToString();
            }

            sqlReader.NextResult();

            while (sqlReader.Read())
            {
                number = dr[0].ToString();
            }

            sqlReader.NextResult();

            while (sqlReader.Read())
            {
                table = dr[0].ToString();
            }

            sqlReader.Close();
            Cmd.Dispose();
            conn.Close();
} 
```

也试试这个链接：[返回多个集合](http://www.java2s.com/Tutorial/CSharp/0560__ADO.Net/ExecutingaQueryThatReturnsMultipleResultSetswithSqlDataReader.htm)

# asp.net - postbackurl 和 response.redirect 之间有性能差异吗？

> ID：14710905
> 
> 赞同：1
> 
> 时间：2013-02-05T15:23:30.567
> 
> 标签：asp.net, response.redirect, postbackurl

我刚刚创建了一个需要更新的页面，其中包含多个文档。可以从页面上的菜单中选择每个文档。

我通常会将其包装在多视图 + 更新面板中，但是我还需要更新 url 以反映所选文档。

目前我已经使用不同的 postbackurl 完成了此操作（因此没有更新面板），但这意味着在单击后退按钮时显示令人讨厌的“Firefox 需要重新发送...2 消息。

我可以改为从按钮事件重定向。这将具有相同的效果，但没有消息。

我的问题是 postbackurl 方法是否比重定向提供任何显着优势。我所说的优势是指性能。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:32:03.567

`Response.Redirect`是一个简单的`HTTP 302`，因此在性能方面它可能“更快”和“更轻”。

`PostBackURL`更新表单的动作，`ViewState`与其他`Page`对象保持一致。因此，由于延迟增加，技术上性能更慢，体积更大。

如果您想避免重新发布，那么最容易使用 Response.Redirect。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:40:30.250

让我们考虑两种情况：

*   没有 postbackurl，带重定向：客户端提交表单，服务器发出重定向，客户端向最终 url 发出 get 请求并获取内容

*   postbackurl : 客户端提交表单到 postbackurl 并获取内容

    第二种情况在性能方面更好（没有网络往返来获取和遵循重定向）

但是重定向在发出获取请求这一事实中具有一些优势。（没有重新加载或重新发布问题）

无论如何，我想知道为什么您不能只使用`HyperLink`with`NavigateUrl`来获取您的内容。

# javascript - 函数和对象中的闭包

> ID：14710906
> 
> 赞同：1
> 
> 时间：2013-02-05T15:23:29.937
> 
> 标签：javascript, closures

下面的片段完全一样。第一：

```
var obj_button = {
    clicked: 1,
    click: function() {
        console.log(clicked);
    }
}; 
```

第二个：

```
var Func_button = function() {
    var clicked = 1;
    this.click = function() {
        console.log(clicked);
    }
} 
```

但是当我想使用闭包时，第一种方法失败了：

```
func = new Func_button();
func.click(); // OK - works fine, outputs 1
obj_button.click(); // FAIL - he don't know what is "clicked" 
```

所以我的问题是：为什么在第一种方法中，方法 click() 无法看到“点击”参数。闭包不应该覆盖这个参数（就像在第二个例子中一样）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T15:25:31.593

不，因为`clicked`在第一个实例中是在对象范围内，而在第二个实例中是在函数范围内。 `this.click = function`也在函数范围内，但内容`click: function () {`在不同的范围内。

要使第一个示例正常工作，您可以使用：

```
console.log(this.clicked); 
```

如果您重写第二个示例，您也可以看到相同的行为：

```
var Func_button = function() {
    this.clicked = 1;
    this.click = function() {
        console.log(clicked);
    };
} 
```

现在，`func.clicked`将返回`1`，但调用`func.click()`将导致相同的错误。

# jquery - IE 中奇怪的 jQuery 加载问题

> ID：14710907
> 
> 赞同：0
> 
> 时间：2013-02-05T15:23:40.017
> 
> 标签：jquery

当我的小部件加载以加载依赖项时，我正在使用以下代码：我的小部件已加载到其他页面上，因此可能会出现 jQuery 冲突，这就是我使用以下方法来避免这种情况的原因。（在除 IE 之外的所有浏览器中都能完美运行）

```
function ScriptLoadHandler(load) {
    var self = this;
    self.loaded = false;
    self.load = function () {
        if (!self.loaded) {
            load();
            self.loaded = true;
        }
    };
}

function loadScript(scriptURL, afterLoad) {
    var newScript = document.createElement('script');
    newScript.src = scriptURL;
    newScript.type = 'text/javascript';
    document.getElementsByTagName('head')[0].appendChild(newScript);

    if (typeof afterLoad === "function") {
        afterLoad = new ScriptLoadHandler(afterLoad);
        newScript.onreadystatechange = afterLoad.load;
        newScript.onload = afterLoad.load;
    }
}

loadScript('http://code.jquery.com/jquery-1.8.3.js', function () {
    loadScript('http://code.jquery.com/ui/1.9.2/jquery-ui.js', function () {
            // Load all of our $ dependancies before calling noConflict
            js13 = jQuery.noConflict(true);
            main(); // this is the main application function
    });
}); 
```

但是在 IE 中我收到以下错误：

```
SCRIPT5009: 'jQuery' is undefined 
jquery-ui.js, line 6 character 1

SCRIPT5009: 'jQuery' is undefined 
jquery.cookie.js, line 14 character 3

SCRIPT438: Object doesn't support property or method 'cookie' 
widgetTest.js, line 107 character 6 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T21:42:01.610

[请参阅本页](http://msdn.microsoft.com/en-us/library/ie/hh180173%28v=vs.85%29.aspx)底部的代码

# java - 客户端找不到 {} 的调度方法

> ID：14710917
> 
> 赞同：2
> 
> 时间：2013-02-05T15:23:57.993
> 
> 标签：java, web-services, soap, wsdl

我有这个示例代码：

```
 private static final String endpoint = "https://www.***.**:443/WSEndUser?wsdl";

    public static void main(String[] args) throws SOAPException {
        SOAPMessage message = MessageFactory.newInstance().createMessage();
        SOAPHeader header = message.getSOAPHeader();
        header.detachNode();
/*
        SOAPEnvelope envelope = message.getSOAPPart().getEnvelope();
        envelope.setAttribute("namespace","namespaceUrl");
*/
        SOAPBody body = message.getSOAPBody();
        QName bodyName = new QName("getVServers");
        SOAPBodyElement bodyElement = body.addBodyElement(bodyName);
        SOAPElement symbol = bodyElement.addChildElement("loginName");
        symbol.addTextNode("my login name");
        symbol = bodyElement.addChildElement("password");
        symbol.addTextNode("my password");

        SOAPConnection connection = SOAPConnectionFactory.newInstance().createConnection();
        SOAPMessage response = connection.call(message, endpoint);
        connection.close();

        SOAPBody responseBody = response.getSOAPBody();
        SOAPBodyElement responseElement = (SOAPBodyElement)responseBody.getChildElements().next();
        SOAPElement returnElement = (SOAPElement)responseElement.getChildElements().next();
        if(responseBody.getFault()!=null){
            System.out.println("1) " + returnElement.getValue()+" "+responseBody.getFault().getFaultString());
        } else {
            System.out.println("2) " + returnElement.getValue());
        }
    } 
```

我得到了这个错误：

> 1) S:Client 找不到 {}getVServers 的调度方法

但我知道该方法存在......有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T16:10:17.873

如果您仍有问题，请也发布 WSDL。

1) Web 服务调用失败，因为它找不到`getVServers`使用命名空间`{}`（空命名空间）调用的方法。

您的请求类似于：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
    <SOAP-ENV:Body>
        <getVServers>
            <loginName>my login name</loginName>
            <password>my password</password>
        </getVServers>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

getVServers 位于默认命名空间上。它应该是这样的，命名空间应该`targetNamespace`来自您的 WSDL 定义：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
    <SOAP-ENV:Body>
        <ns:getVServers xmlns:ns="http://your-namespace-from-wsdl.com">
            <loginName>my login name</loginName>
            <password>my password</password>
        </ns:getVServers>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

要添加命名空间，请更改创建 bodyName 的方式：

```
QName bodyName = new QName("http://your-namespace-from-wsdl.com", "getVServers", "ns"); 
```

如果在您的 XML Schema 上设置或如果在您的元素上存在，则可能需要加上前缀`loginName`。`password``elementFormDefault="qualified"``form="qualified"`

2) 我认为您的 URL 端点不应包含 ?wsdl。

3) 您正在尝试连接到 HTTPS 网络服务。确保相应地设置您的证书和 DefaultSSLFactory。

# python - 搜索特定字符串的目录

> ID：14710918
> 
> 赞同：13
> 
> 时间：2013-02-05T15:24:01.687
> 
> 标签：python, file, directory

我正在尝试搜索一个充满头文件的特定目录，并查看每个头文件，如果任何文件中有一个字符串“struct”，我只想让程序打印哪个文件有它。

到目前为止我有这个，但它不能正常工作，你能帮我弄清楚吗：

```
import glob
import os
os.chdir( "C:/headers" )
for files in glob.glob( "*.h" ):
    f = open( files, 'r' )
    for line in f:
        if "struct" in line:
            print( f ) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-05T15:33:59.747

您似乎对文件名感兴趣，而不是行，所以我们可以通过读取整个文件并搜索来加快速度：

```
...
for file in glob.glob('*.h'):
    with open(file) as f:
        contents = f.read()
    if 'struct' in contents:
        print file 
```

使用该`with`构造可确保正确关闭文件。f.read() 函数读取整个文件。

### 更新

由于原贴说他的代码没有打印，我建议插入一个调试行：

```
...
for file in glob.glob('*.h'):
    print 'DEBUG: file=>{0}<'.format(file)
    with open(file) as f:
        contents = f.read()
    if 'struct' in contents:
        print file 
```

如果您没有看到任何以“DEBUG:”开头的行，那么您的 glob() 返回了一个空列表。这意味着您进入了错误的目录。检查目录的拼写以及目录的内容。

如果您看到“DEBUG:”行，但没有看到预期的输出，则您的文件中可能没有任何“结构”。首先 cd 到目录检查这种情况，然后发出以下 DOS 命令：

```
find "struct" *.h 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:27:59.847

当我最终测试它时，这有效：

```
for files in glob.glob( "*.h" ):
    f = open( files, 'r' )
    file_contents = f.read()
    if "struct" in file_contents:
            print f.name
    f.close() 
```

确保您 print `f.name`，否则您正在打印文件对象，而不是文件本身的名称。

# python - MessageDialog 没有关闭

> ID：14710919
> 
> 赞同：1
> 
> 时间：2013-02-05T15:24:03.193
> 
> 标签：python, messagedialog

我有一个带有 wx.dirPicker 控件的 Python 应用程序，可以手动更改它，我需要确保在运行我的代码之前选择的路径存在。为此，我正在使用这个：

```
def m_dirPicker1OnUpdateUI( self, event ):
        src_directory = self.m_dirPicker1.GetTextCtrlValue()
        if os.path.exists(src_directory)==False:
                      dlg = wx.MessageDialog( self, "The specified path doesn't exist", "Warning", wx.ICON_ERROR | wx.ICON_EXCLAMATION )
                      dlg.ShowModal()    
                      #print(dlg.GetReturnCode())
                      if dlg.GetReturnCode() == 0:
                          self.Destroy() 
```

它工作正常，检测路径是否存在。

但是，当路径不存在时，会出现消息对话框，但在按下 OK 按钮后我无法关闭它，我不明白为什么。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:58:09.333

我的第一种方法是：每次有人手动更改 wx.dirpicker 路径时，我需要确保该路径存在，因为我的应用程序会将报告文件导出到该路径。

后来我决定只在有人按下“创建报告”按钮时检查路径。为此，我使用以下代码：

```
try: 
    if src_directory = self.m_dirPicker1.GetTextCtrlValue():
         if os.path.exists(src_directory)==False:
         dlg = wx.MessageDialog( self, "The specified path doesn't exist", "Warning", wx.ICON_EXCLAMATION)
         dlg.ShowModal()
    else:
         #run my code to create report file in src_directory path 

except:
     create report_error file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:00:00.920

我认为你应该在“self.Destroy()”之前调用“dlg.Destroy()”：

```
result = dlg.ShowModal()    
dlg.Destroy()
if result == 0:
    self.Destroy() 
```

# java - 从 .Net 异步使用 Java Web 服务

> ID：14710925
> 
> 赞同：0
> 
> 时间：2013-02-05T15:24:17.687
> 
> 标签：java, .net, web-services, asynchronous

是否可以从 .NET 客户端（使用 c#）**异步**使用 Java Web 服务（实际上它是由 softwareAG 的 WebMethods 构建的 ）？

我不知道这个java WS是否支持异步，我们不能编辑它，所以我们能做的是在客户端（.net）上进行调整

提前感谢您的洞察力

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:30:51.883

任何能够发出适当 HTTP 请求的客户端都可以使用 Web 服务，无论其实现方式如何。因此，如果 Web 服务是基于 SOAP 的，您的 .NET 客户端只需要连接并发布适当的 XML。这很容易做到。

我不清楚你所说的异步是什么意思。

如果服务被编写为异步的，则意味着它会立即返回响应和允许客户端返回并检查响应的机制。您应该与服务所有者核实。

您的客户当然可以自由地以异步方式调用服务。长期以来，代表们一直是 .NET 的一部分。我相信[现代成语](http://msdn.microsoft.com/en-us/library/ms228969.aspx)使用异步事件。

# haskell - Is spoon unsafe in Haskell?

> ID：14710928
> 
> 赞同：37
> 
> 时间：2013-02-05T15:24:19.773
> 
> 标签：haskell

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-05T22:41:37.637

There is one tricky point where, if you use it, doing what seems like an innocent refactor can change the behavior of a program. Without any bells and whistles, it is this:

```
f h x = h x
isJust (spoon (f undefined)) --> True 
```

but doing perhaps the most common haskell transformation in the book, eta contraction, to `f`, gives

```
f h = h
isJust (spoon (f undefined)) --> False 
```

Eta contraction is already not semantics preserving because of the existence of `seq`; but without spoon eta contraction can only change a terminating program into an error; with spoon eta contraction can change a terminating program into a different terminating program.

Formally, the way `spoon` is unsafe is that it is [non-monotone on domains](http://en.wikibooks.org/wiki/Haskell/Denotational_semantics) (and hence so can be functions defined in terms of it); whereas without `spoon` every function is monotone. So *technically* you lose that useful property of formal reasoning.

Coming up with a real-life example of when this would be important is left as an exercise for the reader (read: I think it is very unlikely to matter in real life -- *unless* you start abusing it; e.g. using `undefined` the way Java programmers use `null`)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-05T16:00:41.183

You can't write `unsafeCoerce` with `spoon`, if that's what you're getting at. It is precisely as unsound as it looks, and violates Haskell semantics precisely as much as it appears to. However, you can't use it to create a segfault or anything of the like.

However, by violating Haskell semantics, it *does* make code harder to reason about in general, and also, e.g. a `safeHead` with spoon is necessarily going to be less efficient than a `safeHead` written directly.

# css - 用 Sass 编译 2 个 css 文件

> ID：14710934
> 
> 赞同：1
> 
> 时间：2013-02-05T15:24:35.800
> 
> 标签：css, ruby, sass

每次保存 style.sass 文件时，我都想编译两个 .css 文件

例如 ：

style.dev.css 用于使用这些选项进行开发：

```
sass_options = {:debug_info => true} 
```

和 style.css 使用这些选项进行生产：

```
sass_options = {:debug_info => false}
output_style = :compressed
line_comments = false 
```

目标是在我的本地机器上有一个 firesass 就绪的 css 文件和 svn 上的压缩版本。目前，每次我想在 svn 上提交我的更改时，我都必须编辑 config.rb。

可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:57:19.273

首先，正如**bookcasey**已经提到的，您不应该将编译后的 CSS 存储在版本控制中。

要部署前端，请使用 git hooks：[Automatically Recompile SASS on Deployment Using Git Hooks](http://stevegrunwell.com/blog/recompile-sass-upon-deployment-using-git-hooks)。

其次，您建议的解决方案不会解决每次编辑配置的麻烦。它只是代替编辑`config.rb`，您必须编辑您的 HTML 以加载必要的 CSS 文件。

但是有一个方便的解决方法。

1）修改你`config.rb`的使用`environment`标志：

```
if environment == :development
  sass_options  = {:debug_info => false}
  output_style  = :compressed
  line_comments = false
else
  sass_options  = {:debug_info => true}
end 
```

2) 为开发环境编译 SASS，`compass compile -e development`为生产环境编译 vanilla `compass compile`。

耶！

# c++ - 在基类之间移动语义

> ID：14710939
> 
> 赞同：0
> 
> 时间：2013-02-05T15:24:56.340
> 
> 标签：c++, c++11, move-semantics

我们有这些课程：

```
struct Intermediate : public std::array<double,3> {};

struct Vector3 : public Intermediate
{
   // ........more ctors.........

   // Modified move constructor (base class)
   Vector3(std::array<double,3> &&v) { ??????? }

   // ........more functionality...........
}; 
```

“修改后的”移动构造函数是否像原始移动构造函数一样？

如何实现构造函数？除了 std::array::swap 还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:30:20.743

你可以这样做：

```
Vector3(std::array<double,3> &&v)
{ static_cast<std::array<double,3>&>(*this) = std::move(v); } 
```

此移动分配`v`给基类`this`

但是那个移动构造函数似乎毫无意义。当你`move`一个数组时，`double`它无论如何都会做一个副本。`double`没有移动语义，只有复制语义，并且`array<double,N>`直接在其中包含数组，因此无法将其移动到另一个对象。

# smtp - JavaMail 网络卡顿

> ID：14710940
> 
> 赞同：0
> 
> 时间：2013-02-05T15:24:58.790
> 
> 标签：smtp, jakarta-mail, network-protocols

我一直在查看示例 JavaMail 发送和几个邮件服务器之间的网络聊天，并发现它会产生一些额外的聊天。代码示例也可以在互联网上找到

```
package example;

import java.util.Properties;

import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public class Sender {
    public static void main(String[] args) {
        Properties props = new Properties();
        //props.put("mail.smtp.host", "localhost");     // local james 
        props.put("mail.smtp.port", "25");
        props.put("mail.smtp.from", "misterunsub@localhost");
        props.put("mail.smtp.sendpartial", "false");
        props.put("mail.smtp.ehlo", "false");
        props.put("mail.debug", "true");

        Session session = Session.getInstance(props,null);

        try {
            Message message = new MimeMessage(session);
            //message.setFrom(new InternetAddress("misterunsub@localhost"));
            message.addHeader("List-Unsubscribe", "<mailto:list-manager@localhost?subject=Unsubscribe>");
            message.setSubject("Fancy mail from Unsub");
            message.setText("Dear Mail Crawler,"
                + "\n\nNo spam to my email, please!");
            message.saveChanges();
            InternetAddress[] alice = InternetAddress.parse("alice@localhost");
            Transport t = session.getTransport("smtp");
            t.connect();
            t.sendMessage(message, alice);
        } catch (MessagingException e) {
            throw new RuntimeException(e);
        }
    }
} 
```

我已经在我的本地主机上设置了 James 来接收流量。（注意 james 也使用 JavaMail 发送/转发邮件，但问题与 JavaMail 有关），James 将发送委托给 JavaMail。因此也表现出问题。但上面的示例足以证明我所看到的。

流量在wireshark中看起来像这样

```
 >> HELO localhost  
    << 250 localhost Hello localhost (127.0.0.1 [127.0.0.1])  
    >> MAIL FROM:<misterunsub@localhost>  
    << 250 2.1.0 Sender <misterunsub@localhost> OK  
    >> RCPT TO:<alice@localhost>  
    << 250 2.1.5 Recipient <alice@localhost> OK  
    >> RSET  
    << 250 2.0.0 OK  
    >> RSET  
    << 250 2.0.0 OK  
    >> MAIL FROM:<misterunsub@localhost>  
    << 250 2.1.0 Sender <misterunsub@localhost> OK  
    >> RCPT TO:<alice@localhost>  
    << 250 2.1.5 Recipient <alice@localhost> OK  
    >> DATA  
    << 354 ok send data ending with <CRLF>.<CRLF>  
    >> this is data  
    >> .  
    << 250 2.6.0 Message recieved  
    >> QUIT  
    << 221 2.0.0 localhost Service closing transmission channel 
```

通信的奇怪之处在于第一个“MAIL FROM：”、“RCPT TO：”、“RSET”和“RSET”，尤其是 RSET RSET，它会导致大量开销。

有人知道如何避免这种情况吗？有人可以确认这种行为吗？

* * *

**更新** 问题似乎与 Windows 上的 vpn 使用或环回/本地主机通信有关。Linux 根本没有这个问题。比尔香农建议使用防病毒或防火墙，很可能就是这样。因为防病毒软件确实注意到了流量。

感谢比尔的及时回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T18:58:19.243

在这些情况下，JavaMail 不应发出 RSET。您使用的是什么版本的 JavaMail？JavaMail 的调试输出显示了什么？

# android - 带有 ImageButton 的 Android 布局与其他元素重叠

> ID：14710943
> 
> 赞同：3
> 
> 时间：2013-02-05T15:25:06.387
> 
> 标签：android, android-layout, android-widget, xamarin.android

我正在尝试偏移一个按钮并将其位置设置为使其看起来悬挂在其他元素上。我正在寻找的可以在这张图片中看到......注意图片按钮，它是我的 xml 中的 id ibLoginButton，红色箭头指向的地方：

![在此处输入图像描述](../Images/25994fc9b9efe79eeeb37810cc76e24f.png)

这是我的布局的 xml，但我不知道如何使 ibLoginButton 具有这种效果。我需要以编程方式执行此操作吗？如果是这样，怎么做？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/db1_root"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <RelativeLayout
        style="@style/TitleBar"
        android:layout_height="54dp">
        <ImageView
            android:id="@+id/ivLoginPicture"
            android:contentDescription="@string/description_logo"
            android:src="@drawable/MDSLogoForLoginTrans"
            android:background="#ffffffff"
            android:layout_width="32dp"
            android:layout_height="44dp"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_centerVertical="true" />
        <TextView
            android:id="@+id/tvLoginName"
            android:text="Dr. Dentist"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:layout_width="230.5dp"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@+id/ivLoginPicture"
            android:layout_centerVertical="true" />
        <ImageButton
            android:id="@+id/ibLogout"
            android:src="@drawable/logoutButton"
            android:layout_width="80dp"
            android:layout_height="38dp"
            android:layout_gravity="center_vertical"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:scaleType="fitXY"
            android:paddingTop="0dp"
            android:paddingRight="0dp"
            android:paddingBottom="0dp"
            android:paddingLeft="0dp" />
        <ImageButton
            android:src="@android:drawable/ic_menu_gallery"
            android:layout_width="50dp"
            android:layout_height="50dp"
            android:id="@+id/ibLoginButton"
            android:layout_centerVertical="true"
            android:layout_centerHorizontal="true" />
    </RelativeLayout>
    <LinearLayout
        android:id="@+id/HomePage"
        android:layout_weight="1"
        android:background="@drawable/home_background"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <GridView
            android:id="@+id/Grid"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:columnWidth="90dp"
            android:numColumns="auto_fit"
            android:listSelector="@android:color/transparent"
            android:verticalSpacing="10dp"
            android:horizontalSpacing="10dp"
            android:stretchMode="columnWidth"
            android:gravity="center"
            android:scrollbars="vertical" />
    </LinearLayout>
    <WebView
        android:layout_width="fill_parent"
        android:layout_height="100dip"
        android:layout_alignParentBottom="true"
        android:background="@drawable/gradientNews"
        android:id="@+id/webView1" />
</LinearLayout> 
```

任何有Android布局知识的人请阐明一下！我难住了。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T15:33:24.020

几个需要做的改变

*   需要把顶部`LinearLayout`变成一个`RelativeLayout`.
*   需要将`ibLoginButton`按钮移到其外部`RelativeLayout`
*   `ibLoginButton`需要在它覆盖的两个区域之后，因为`RelativeLayout`'s 底部的项目被绘制在顶部。

完整的示例代码将为您提供所需的内容（在 Eclipse 的图形布局预览中看起来不错）。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/db1_root"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <RelativeLayout
        style="@style/TitleBar"
        android:id="@+id/first_relative"
        android:layout_width="wrap_content"
        android:layout_height="54dp" >

        <ImageView
            android:id="@+id/ivLoginPicture"
            android:contentDescription="@string/description_logo"
            android:src="@drawable/MDSLogoForLoginTrans"
            android:background="#ffffffff"
            android:layout_width="32dp"
            android:layout_height="44dp"
            android:layout_gravity="center_vertical"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="5dp"
            android:layout_centerVertical="true" />
        <ImageButton
            android:id="@+id/ibLogout"
            android:src="@drawable/logoutButton"
            android:layout_width="80dp"
            android:layout_height="38dp"
            android:layout_gravity="center_vertical"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:scaleType="fitXY"
            android:paddingTop="0dp"
            android:paddingRight="0dp"
            android:paddingBottom="0dp"
            android:paddingLeft="0dp" />

        <TextView
            android:id="@+id/tvLoginName"
            android:layout_width="230.5dp"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toLeftOf="@+id/ibLogout"
            android:text="Dr. Dentist"
            android:textAppearance="?android:attr/textAppearanceMedium" />

    </RelativeLayout>
    <LinearLayout
        android:id="@+id/HomePage"
        android:layout_weight="1"
        android:background="@drawable/home_background"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@id/first_relative">

        <GridView
            android:id="@+id/Grid"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:columnWidth="90dp"
            android:gravity="center"
            android:horizontalSpacing="10dp"
            android:listSelector="@android:color/transparent"
            android:numColumns="auto_fit"
            android:scrollbars="vertical"
            android:stretchMode="columnWidth"
            android:verticalSpacing="10dp" >
        </GridView>

    </LinearLayout>
    <WebView
        android:layout_width="fill_parent"
        android:layout_height="100dip"
        android:layout_alignParentBottom="true"
        android:background="@drawable/gradientNews"
        android:id="@+id/webView1" />

    <ImageButton
        android:id="@+id/ibLoginButton"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="22dp"
        android:src="@android:drawable/ic_menu_gallery" />

</RelativeLayout> 
```

顺便说一句，应该可以只使用一个相对布局。出于性能原因，使用最少数量的容器是最佳实践。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:31:01.790

尝试在标题栏和主页之间放置

```
<View android:layout_width="40dp" 
      android:layout_height="40dp" 
      layout_gravity="center_horizontally" 
      layout_margin_top="-20dp" background="ef0"/> 
```

这里的想法是负边距

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-05T15:32:08.760

水平居中，然后调整边距。你知道 topbar 的高度，你可以设置 44 的上边距 - 图像高度的一半

# ios - 在 phonegap iOS 项目中添加自定义 URL 架构

> ID：14710945
> 
> 赞同：0
> 
> 时间：2013-02-05T15:25:19.643
> 
> 标签：ios, cordova

我在我的 iOS 项目中使用 phonegap 1.4。我正在尝试使用自定义 url 架构从其他应用程序打开我的应用程序。我在 .plist 文件中添加了以下键：

```
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleURLName</key>
        <string>com.cams.myapp</string>
        <key>CFBundleURLSchemes</key>
        <string>myApp</string>
    </dict>
</array> 
```

完成修改后，我`<a href="myApp://">Open myApp</a>`在我的其他应用程序中添加并尝试打开 myapp。但是当我点击“Open myApp”时，什么也没有发生。

phonegap 是否支持自定义 url 架构或者我做错了什么。请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T04:37:53.353

我的自定义 URL 在一个数组中。这是一个示例：

```
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleURLName</key>
        <string>com.cams.myapp</string>
        <key>CFBundleURLSchemes</key>
        <array>
            <string>myApp</string>
        </array>
    </dict>
</array> 
```

您应该使用属性编辑器来编辑此文件并获取正确的格式。

![在此处输入图像描述](../Images/f93123c590f8700c545bdef9461c324d.png)

# arrays - 用数组搜索并替换字符串中的单词

> ID：14710947
> 
> 赞同：0
> 
> 时间：2013-02-05T15:25:24.993
> 
> 标签：arrays, preg-replace, preg-match-all

我想扫描一段并用另一个词替换其中的针。例如

```
$needles = array('head', 'limbs', 'trunk');
$to_replace = "this";
$haystack = "Main parts of human body is head, Limbs and Trunk"; 
```

需要最终输出

```
Main part of human body is this, this and this 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:35:47.013

假设您使用的是 PHP，您可以尝试[`str_ireplace`](http://www.php.net/manual/en/function.str-ireplace.php).

```
$needles = array('head', 'limbs', 'trunk');
$to_replace = "this";
$haystack = "Main parts of human body is head, Limbs and Trunk";
echo str_ireplace($needles, $to_replace, $haystack); // prints "Main parts of human body is this, this and this" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:57:18.267

使用 preg_replace ：

```
$needles = array('head', 'limbs', 'trunk');
$pattern = '/' . implode('|', $needles) . '/i';
$to_replace = "this";
$haystack = "Main parts of human body is head, Limbs and Trunk";

echo preg_replace($pattern, $to_replace, $haystack); 
```

# linux - linux网络驱动的问题

> ID：14710953
> 
> 赞同：0
> 
> 时间：2013-02-05T15:25:41.590
> 
> 标签：linux, linux-kernel, linux-device-driver, modem

我在为水声调制解调器开发 Linux 驱动程序时遇到了一些麻烦。我项目的总体思路是将 IPv6 引入水下网络。预期的结果是水下传感器网络可以从任何典型的互联网设备访问。为了实现和实现我的目标，我必须为调制解调器提供一个驱动程序，以便我可以使用 Linux 内核提供的路由协议。但是，由于水下通信和典型射频通信的差异，我必须对数据包进行一些处理，包括分片、报头压缩和网状路由。但是所有这些过程都应该是透明的，并且调制解调器应该用作任何其他网络接口。

调制解调器可以通过串口与计算机通信。但是我必须使用pl2303 USB转串口转换器来连接它。另外，驱动调制解调器的设备不仅是计算机，还有一个叫做 Gumstix 的嵌入式 Linux 系统。我尝试了几种不同的方法来做到这一点，但我无法实现我的最终目标。

第一个解决方案是制作一个纯用户模式驱动程序。它可以很容易处理，但我无法创建像 eth0 这样的接口，也无法通过它 ping 通。更糟糕的是，我必须自己实现所有 IPv6 标准，我认为这实际上是在浪费时间。

第二种解决方案是制作纯内核模式驱动程序。优点是我可以利用现有的代码来处理 IPv6 和上层的东西，我可以有一个漂亮的界面。但不建议在内核模式下将串口作为文件打开。尽管我尝试过这样做，但我总是收到一些垃圾字节。

后来我尝试了第三种解决方案。我制作了一个从串行端口发送和接收的守护程序，并使用网络链接套接字与内核中的驱动程序进行通信。我想知道有没有司机这样做。但是如果任何用户想要使用我的驱动程序，他们必须为他们的设备编译并手动启动它。此外，进程间通信不可靠，我不知道内核是否收到了我的数据包。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T03:54:01.143

对于您的第一个解决方案，您可以考虑使用“tap”驱动程序。请参阅`Documentation/networking/tuntap.txt`内核源代码以获取完整的详细信息，但基本思想是您创建一个“tap”网络接口，内核堆栈想要通过该接口发送的任何以太网数据包实际上都会传递到您的用户空间进程；同样，您的用户空间进程可以将数据包注入到 tap 接口，内核会将它们视为已被网络堆栈接收。这将解决您能够将用户空间网络实现粘合到主内核堆栈中的问题。

但是，在内核中实现所有内容也应该是可行的。这毕竟本质上是 PPP 或 SLIP 实现所做的：它们创建了一个通过串行接口运行的网络接口。这里的关键概念是“*线路规则*”——而不是试图在内核驱动程序中打开串行接口，您需要一些用户空间控制来打开然后设置线路规则。您应该能够在主线内核中的 PPP 或 IrDA 之类的东西上对此进行建模（我相信在网上搜索“linux line 纪律”会得到一些关于编写的文档）。

# proxy - 使用代理 IP 从带有 PEAR 库的 Gmail SMTP 发送批量电子邮件

> ID：14710960
> 
> 赞同：0
> 
> 时间：2013-02-05T15:26:08.160
> 
> 标签：proxy, smtp, gmail, ip, block

我们有多个 gmail 和 yahoo 帐户（每个大约 10 个）。我们使用它们使用 Gmail 和 Yahoo SMTP 发送电子邮件。每天发送一定数量的电子邮件后，（gmail 和雅虎）都会阻止我们的电子邮件帐户。不是 1 或 2 个帐户，而是所有 10 个帐户 - 一起。

我们正在使用 PHP PEAR 库。我确信 gmail 和 yahoo 有办法找出我们的服务器 IP，它们会阻止所有从该 IP 发送请求的电子邮件。有没有办法在这里使用代理 IP，以便 gmail/yahoo 不知道请求来自 1 个 IP？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:02:36.447

在这里，您试图欺骗 gmail 和 yahoo，他们不会允许您这样做。他们是电子邮件解决方案的大师，所以不要尝试非法方法并浪费您的时间。

# asp.net - ASP.NET SmtpClient 注意事项

> ID：14710961
> 
> 赞同：1
> 
> 时间：2013-02-05T15:26:09.910
> 
> 标签：asp.net, iis-7, smtpclient

我们目前正在从我们的两个负载平衡的 Web 服务器发送电子邮件，这些服务器连接到一个单独的 MailEnable 服务器，我们希望停用该服务器。我们希望两个 Web 服务器都使用 Smtp 服务/IIS/.net SmtpClient 发送自己的电子邮件。我已经设置并配置了所有东西，它工作正常，但是除了我需要考虑的基本配置之外还有什么其他的吗？一些具体的例子：

*   我最初尝试使用 Amazon SES，但这对我们来说不是一个好的解决方案。让 Smtp 服务处理电子邮件到我仍然应该考虑使用 3rd 方服务的程度是否存在任何巨大的缺陷？

*   我们的网络服务器在处理器、RAM、带宽等方面都有不错的规格，但是如果 Smtp 服务每天发送 100-500 封电子邮件，它会消耗大量资源吗？

*   当我使用 Amazon SES 时，他们给了我 1 条 TXT 记录和 3 条 CNAME (DKIM) 记录来输入我们的 DNS 记录。这些是否需要，如果需要，我如何自己生成它们？我阅读了一些有关格式化标准的文档，但我并不真正了解第 1 步是什么，至于如何弄清楚这些值应该是什么。

*   3rd 方服务的幕后是否有任何事情发生，无论是其 Amazon SES、MailEnable、Exchange 等，就 Smtp 服务/IIS 无法处理的垃圾邮件控制、排队等而言？

我也将不胜感激您可以分享的任何其他建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:49:14.513

*   并不真地。与任何服务一样，它取决于您与任务相关的能力和资源与可用服务提供商的能力。除了足够的服务器资源和带宽外，管理当然也是可靠性和安全性的考虑因素。例如：
    *   您可能希望确保错误或服务停止不会被忽视。正确处理未发送或发送迟到并导致混乱的消息 - 不好。
    *   您应该能够确保您适当地禁止/限制远程连接和中继。
*   不，每台服务器每天 100-500 封电子邮件不应消耗大量资源。
*   至于DNS记录：
    *   对于您的域内消息，它们可能是不必要的。
    *   如果您想在这些邮件的标题（即 CNAME 记录）中使用友好的邮件专用主机名，请在我对您的第一点的回复中权衡它与您的能力和资源（即您是否有 DNS 服务器和某人谁知道如何处理它）。如果服务器位于 Active Directory 域中，AD 可能已经提供了可解析的（如果不是特定于邮件的）主机名；但标头中的裸 IP 地址不会伤害任何人。
    *   我个人还没有遇到需要带有域内消息的 DKIM（即 TXT 记录），并且怀疑您是否需要它。
    *   对于发送给外部收件人的域间邮件，DNS 调整可能更重要。如果您碰巧有一个公共 DNS 服务器并且有人知道如何处理它，请考虑在其中添加适当的记录；如果没有，请考虑让您的 ISP 或专门的 DNS 提供商处理它​​。
*   如果您接受入站邮件，垃圾邮件将是一个问题。根据我在出站邮件服务方面的经验，在使用营销和交易电子邮件的大容量 B2C 情况下，优势更为重要——例如，建立邮件主机声誉和适当的 DNS 配置，以帮助避免邮件被拒绝或被错误标记为垃圾邮件、邮件模板等。

# c# - 如何在我的 MSProject 项目上设置日历属性？

> ID：14710968
> 
> 赞同：1
> 
> 时间：2013-02-05T15:26:29.517
> 
> 标签：c#, interop, ms-project

我有一个 MSProject 项目，我想更改正在使用的日历。问题是我找不到这个属性。

在这里我展示我的代码：

```
Microsoft.Office.Interop.MSProject.Application app = new Microsoft.Office.Interop.MSProject.Application();

 app.FileOpenEx(
                Server.MapPath("") + "\\sample.mpp",
                false,
                Type.Missing,
                Type.Missing,
                Type.Missing,
                Type.Missing,
                Type.Missing,
                Type.Missing,
                Type.Missing,
                Type.Missing,
                Type.Missing,
                PjPoolOpen.pjPoolReadWrite,
                Type.Missing,
                Type.Missing,
                Type.Missing,
                Type.Missing,
                Type.Missing);
                pj=app.ActiveProject;

//"proyecto" is an entity
//app.GlobalBaseCalendars has all calendars
                foreach (Microsoft.Office.Interop.MSProject.Calendar calendar in app.GlobalBaseCalendars)
                {
                    if (calendar.Name == "Noche")
                    {
                        pj.Calendar.index? GUID? ...= // All properties are read-only
                    }
                } 
```

如何设置 的值`pj.Calendar`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T19:11:05.273

这是项目属性是只读的许多情况之一，设置它的方法是使用应用程序的方法：

```
app.ProjectSummaryInfo(
                       Type.Missing,
                       Type.Missing,
                       Type.Missing,
                       Type.Missing,
                       Type.Missing,
                       Type.Missing,
                       Type.Missing,
                       Type.Missing,
                       Type.Missing,
                       Type.Missing,
                       Type.Missing,
                       Type.Missing,
                       "Noche",
                       Type.Missing,
                       Type.Missing,
                       Type.Missing); 
```

# c# - 英孚。在没有 DbContext 的实体上调用验证

> ID：14710969
> 
> 赞同：2
> 
> 时间：2013-02-05T15:26:33.670
> 
> 标签：c#, entity-framework, unit-testing, validation

`Validate(..)`不使用就可以打电话`DbContext`吗？

我想在`Unit Tests`.

如果我`TryValidateObject(..)`在我的`Contract`对象上使用 - 只`User`调用属性的验证，但不调用`Validate(..)`

这是我的实体的代码：

```
[Table("Contract")]

public class Contract : IValidatableObject
{
   [Required(ErrorMessage = "UserAccount is required")]
   public virtual UserAccount User
   {
      get;
      set;
   }

   public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
   {
      ...
   }

   ...
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-05T15:48:33.733

是的，您需要调用 **Validator.TryValidateObject(SomeObject,...)**
这是一个示例 [http://odetocode.com/blogs/scott/archive/2011/06/29/manual-validation-with-data-annotations。 aspx](http://odetocode.com/blogs/scott/archive/2011/06/29/manual-validation-with-data-annotations.aspx)

……多汁的是……

```
 var vc = new ValidationContext(theObject, null, null);
        var vResults = new List<ValidationResult>();
        var isValid = Validator.TryValidateObject(theObject, vc, vResults, true);
        // isValid has  bool result, the actual results are in vResults.... 
```

让我更好地解释一下，在验证器调用验证例程之前，您需要使所有注释都有效，这里我添加了一个测试程序来说明最有可能出现的问题

```
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
namespace ValidationDemo
{
class Program
{
    static void Main(string[] args)
    {
        var ord = new Order();
        // If this isnt present, the validate doesnt get called since the Annotation are INVALID so why check further...
        ord.Code = "SomeValue";   // If this isnt present, the validate doesnt get called since the Annotation are INVALID so why check further...
        var vc = new ValidationContext(ord, null, null);
        var vResults = new List<ValidationResult>();    // teh results are here
        var isValid = Validator.TryValidateObject(ord, vc, vResults, true);    // the true false result
        System.Console.WriteLine(isValid.ToString());
        System.Console.ReadKey();
    }
}
public class Order : IValidatableObject
{
    public int Id { get; set; }
    [Required]
    public string Code { get; set; }
    public   IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        var vResult = new List<ValidationResult>(); 
        if (Code != "FooBar") // the test conditions here
        {
            {
                var memberList = new List<string> { "Code" }; // The
                var err = new ValidationResult("Invalid Code", memberList);
                vResult.Add(err);
            }
        }
        return vResult;
    }
} 
```

}

# php - VirtualBox Windows 来宾共享文件夹的 PHP 权限

> ID：14710973
> 
> 赞同：0
> 
> 时间：2013-02-05T15:26:43.137
> 
> 标签：php, windows, batch-file, virtualbox

我有一个 PHP 网站，其后端批处理/CRON 作业经常运行并处理照片。Web 和数据库服务器以及 RAID 存储是 Fedora 14 盒子，照片软件在存储服务器上的 Windows 7 VirtualBox 中运行。

存储阵列作为共享文件夹加载，并在网络位置下显示为 E:\。

PHP exec 命令通过 PHP-CLI 每分钟运行一次，如下所示：

```
exec("C:\\service\\photo_edit.exe --input-file E:\\photos\\photo_example.jpg --effect crossprocess --output-file E:\\photos\\user\\finished_example.jpg") 
```

直接在命令行中运行命令有效。问题是，PHP 似乎根本无法使用 E:\，即使我可以通过命令提示符访问它。我还必须将 Windows 保留在 VirtualBox 中，因为我有更多的服务可以编辑文件并在 Linux 中运行。

我需要 PHP 才能在 Windows 内的 Web 存储上处理这些文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:32:24.860

这不是权限问题。映射到驱动器号的网络共享是每个用户的设置。Apache 运行的用户没有将该共享映射为`E:`.

替代方案包括：

1.  使用 UNC 语法：`\\vboxsvr\whatever`
2.  映射当前 Apache 用户的驱动器 (LOCAL_SYSTEM?) —[似乎不可能](https://stackoverflow.com/questions/182750/map-a-network-drive-to-be-used-by-a-service)
3.  更改 Apache 服务运行的用户

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:28:48.127

PHP是否有访问权限`E:\`？请记住，当您运行命令时，您可能是管理员。另一方面，PHP 可能以较低的权限运行。

# html - 在 IE 中显示网页时出错

> ID：14710975
> 
> 赞同：0
> 
> 时间：2013-02-05T15:26:53.367
> 
> 标签：html, css

我在一个网站上工作，但是当我在 IE 上运行它时出现问题。有两个带有数据的选项卡。在 IE 中，当我切换到其他选项卡时，它会在页面下方显示一些空间，这可能是因为与其他选项卡相比，第一个选项卡包含更多数据。在其他浏览器中，页面会自行刷新和调整，但在 IE 中无法正常工作。

登录页面； [http://demo.datasoft.ca/Remityourway/RYWLogin.aspx](http://demo.datasoft.ca/Remityourway/RYWLogin.aspx)
with,
USERNAME:karim.amin@datasoft.com.pk
PASSWORD: 123
Go to MANAGE ACCOUNTS > PAYEE,
有两个标签 Swift Details 和 Payee Details, 你可以单击收款人详细信息以查看问题。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T15:49:19.070

回复：freefaller：我会点击它，我无所畏惧！

看起来问题是由您的代码引起的：

```
<a id="accoundBalance" href="javascript:panelSwiftVisible()" class="tabbtn">Swift Details</a> 
```

该功能`panelSwiftvisible()`似乎设置了可见性，这将影响页面的其他元素。相反，将您的功能更改为设置元素：

```
display: none; 
```

代替：

```
visibility: invisible; 
```

看看这是否适合你。

# vb.net - 从存储过程查询中获取特定行的最佳方法

> ID：14710978
> 
> 赞同：0
> 
> 时间：2013-02-05T15:26:59.827
> 
> 标签：vb.net, string, stored-procedures, csv

我正在构建一个 Web 应用程序，其中主要有多项选择题和一些简短的答案。同样，所有答案都通过存储过程放入数据库中，然后使用不同的过程进行提取和更正。虽然简短回答问题包含在查询中，但它们没有打印到页面上，相反，我将它们也存储在会话变量中并打印在它们各自的文本框中，问题是审阅者在会话中无法再看到它们超时。所以我想知道如何在 VB.net 中从查询中提取特定行，然后从那里使用它。

这就是我目前拥有的

```
 Dim P2Ans As String
    P2Ans = Session("Part2")
    Dim Part2Txt As New ArrayList(P2Ans.Split("|"c))
    Normal.Text = Part2Txt(0)
    Normal2.Text = Part2Txt(1)
    Normal3.Text = Part2Txt(2) 
```

我想要的是这样的

```
 Dim P2Ans As String
    P2Ans = Select.Tables(Answers).Where("QuestionID =X") 'from there take the answer out of the column "Question Answer"

    Dim Part2Txt As New ArrayList(P2Ans.Split("|"c))
    Normal.Text = Part2Txt(0)
    Normal2.Text = Part2Txt(1)
    Normal3.Text = Part2Txt(2) 
```

我不知道这是否可行或最佳实践，所以任何建议都会很棒。

我的回答：像这样

```
 Dim queryString As String = "SELECT questionAnswer FROM Submissions where   submissionid =" + SID + "and questionNumber = 1"
        Using connection As New SqlConnection(My.Settings.ConnString)
            Dim command As New SqlCommand(queryString, connection)
            connection.Open()
            Dim reader As SqlDataReader = command.ExecuteReader() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:31:08.967

您可以使用 SqlCommand 对象，将查询传递给它（即 SELECT answer FROM answers WHERE questionid = 'x'），然后使用 SqlDataReader 检索答案并将其保存到变量和/或表单上的控件中。

# java - Android，从 sqlite 检索数据并显示在自定义列表中的正确方法

> ID：14710983
> 
> 赞同：0
> 
> 时间：2013-02-05T15:27:27.630
> 
> 标签：java, android, sqlite, listview, listactivity

**编辑： ((ArrayAdapter) getListAdapter()).notifyDataSetChanged(); 不起作用-我认为刷新整个列表而不是仅添加新条目是一个问题，但我不确定-如果是这样，我该怎么做？**

从我的 sqlite 数据库中检索数据并将其显示在 listactivity 中的正确方法是什么？我的代码（有点）但在第一次运行后没有正确刷新列表数据如下。我需要发生的是：

*   ListActivity 加载显示的数据库内容（在从我也编写的 REST API 获取之后）
*   用户按下刷新按钮，新故事会出现在列表顶部，而用户不会丢失其在列表中的当前位置

任何帮助将不胜感激！

```
public void populateStoryList() {

    List<StoryItem> stories = datasource.getAllStoryItems();  

    if ( firstrun == true ) {
        adapter = new StoryAdapter(this, stories);
        setListAdapter(adapter);
        firstrun = false;
    } else {
        // DON'T KNOW WHAT TO DO HERE
    }

    setProgressBarIndeterminateVisibility(false);
} 
```

而getAllStoryItems()函数如下：

```
public List<StoryItem> getAllStoryItems() {
List<StoryItem> storyList = new ArrayList<StoryItem>();

Cursor cursor = database.query(StoriesTable.TABLE_STORIES,
        allColumns, null, null, null, null, StoriesTable.COLUMN_DATE_APPROVED+" DESC");

cursor.moveToFirst();
while (!cursor.isAfterLast()) {
    StoryItem story = cursorToStoryItem(cursor);
    storyList.add(story);
    cursor.moveToNext();
}
// Make sure to close the cursor
cursor.close();
return storyList;
} 
```

和 StoryAdapter：

```
import java.util.List;

import android.app.Activity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

@SuppressWarnings("rawtypes")
public class StoryAdapter extends ArrayAdapter {
    private final Activity activity;
    private final List stories;

    @SuppressWarnings("unchecked")
    public StoryAdapter(Activity activity, List objects) {
        super(activity, R.layout.story_row , objects);
        this.activity = activity;
        this.stories = objects;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View rowView = convertView;
        StoryAdapterView sView = null;

        if(rowView == null)
        {
            // Get a new instance of the row layout view
            LayoutInflater inflater = activity.getLayoutInflater();
            rowView = inflater.inflate(R.layout.story_row, null);

            // Hold the view objects in an object,
            // so they don't need to be re-fetched
            sView = new StoryAdapterView();
            sView.title = (TextView) rowView.findViewById(R.id.title);
            sView.story = (TextView) rowView.findViewById(R.id.story);

            // Cache the view objects in the tag,
            // so they can be re-accessed later
            rowView.setTag(sView);
        } else {
            sView = (StoryAdapterView) rowView.getTag();
        }

        // Transfer the stock data from the data object
        // to the view objects
        StoryItem currentStock = (StoryItem) stories.get(position);
        sView.title.setText(currentStock.getStoryTitle());
        sView.story.setText(currentStock.getStoryText());

        return rowView;
    }

    protected static class StoryAdapterView {
        protected TextView title;
        protected TextView story;
    }
} 
```

最后是 StoryItem：

```
public class StoryItem {
    private String dateApproved;
    private String storyTitle;
    private String storyText;
    private long storyId;
    private long storyOnlineId;

    public StoryItem() {}

    public StoryItem(String storyTitle, String storyText, String dateApproved, long storyId, long storyOnlineId) {
        this.storyTitle = storyTitle;
        this.storyText = storyText;
        this.dateApproved = dateApproved;
        this.storyId = storyId;
        this.storyOnlineId = storyOnlineId;
    }

    public long getId() {
        return storyId;
    }

    public void setId(long id) {
        this.storyId = id;
    }

    public long getOnlineId() {
        return storyOnlineId;
    }

    public void setOnlineId(long online_id) {
        this.storyOnlineId = online_id;
    }

    public void setStoryTitle(String storyTitle) {
        this.storyTitle = storyTitle;
    }
    public String getStoryTitle() {
        return storyTitle;
    }
    public void setStoryText(String storyText) {
        this.storyText = storyText;
    }
    public String getStoryText() {
        return storyText;
    }
    public void setDateApproved(String dateApproved) {
        this.dateApproved = dateApproved;
    }
    public String getDateApproved() {
        return dateApproved;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:59:18.133

`firstRun`变量的目的是什么？我确定它应该被删除，然后一切都会正常工作。

我也会像这样重写你的方法：

```
public void populateStoryList() {
    setProgressBarIndeterminateVisibility(true);

    if (this.adapter == null) {
        // first time, because adapter = null
        List<StoryItem> stories = datasource.getAllStoryItems();  
        this.adapter = new StoryAdapter(this, stories);
        setListAdapter(this.adapter);
    } else {
        List<StoryItem> newStories = datasource.getOnlyNewStoryItems(); 
        for (StoryItem story : newStories) {
            this.adapter.insert(story, 0);
        }
        // of course you can clear all items and replace them entirely, but it is not good for performance, so I don't recommend to use the commented code
        //List<StoryItem> stories = datasource.getAllStoryItems();  
        //this.adapter.clear();
        //for (StoryItem story : stories) {
        //    this.adapter.add(story);
        //}
    }

    setProgressBarIndeterminateVisibility(false);
} 
```

您必须编写方法`getOnlyNewStoryItems`。

很明显，该`notifyDataSetChanged`方法不起作用，您在这里不需要它。它仅用于重绘现有项目而不更改它们，而您想添加新项目并更改列表的结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:32:34.457

```
else {
   getListAdapter().notifyDataSetChanged();
} 
```

# android - 在 Android 中搜索

> ID：14710985
> 
> 赞同：2
> 
> 时间：2013-02-05T15:27:36.377
> 
> 标签：android, search, android-emulator, full-text-search, listactivity

我有一个应用程序，我希望在其中添加搜索功能，我正在尝试按照中的说明实现，`developer.android`但是当我在模拟器中单击搜索时，活动没有启动，有什么问题？

1.  `SearchActivity.java`

    ```
    public class SearchActivity extends ListActivity 
    {
      public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
       handleIntent(getIntent());
    }

     @Override
     public void onNewIntent(Intent intent) {
       super.onNewIntent(intent);
       setIntent(intent);
       handleIntent(intent);
     }

     public void onListItemClick(ListView l,
       View v, int position, long id) {
        // call detail activity for clicked entry
     }

     private void handleIntent(Intent intent) {
      if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
      String query =intent.getStringExtra(SearchManager.QUERY);
       doSearch(query);
     }
    }
      private void doSearch(String queryStr) {
        // get a Cursor, prepare the ListAdapter
        // and set it
     }
    } 
    ```

2.  `xml/searchable.xml`

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <searchable xmlns:android="http://schemas.android.com/apk/res/android"
        android:label="@string/app_name"
        android:hint="@string/srchHint"
        android:inputType="textCapCharacters">
    </searchable> 
    ```

3.  `AndroidManifest.xml`（下面的代码不显示其他活动）

    ```
    <application>
         <!-- other actvities -->
          <activity android:label="@string/app_name" android:launchMode="singleTop" 
                 android:name=".SearchActivity">
            <intent-filter>
                <action android:name="android.intent.action.SEARCH" />
          </intent-filter>
            <meta-data android:name="android.app.searchable" android:resource="@xml/searchable" />
         </activity>
    </application> 
    ```

**已经尝试过的事情：**

**1.**在 StackOverflow 上查看类似的问题及其解决方案

**2.**看看[grokkingandroid](http://www.grokkingandroid.com/android-tutorial-adding-search-to-your-apps/)和[edumobile](http://www.edumobile.org/android/android-programming-tutorials/search-interface/)的教程，它们对我的问题没有帮助。

**3.**花时间在 chat.stackoverflow 上询问人们

**问题/疑问**

**1.**好的，我有`doSearch()`方法，但是如何准确地触发查询以及如何显示来自 db 的结果（以一个小 db 显示示例，**如果可以**的话），如何填充结果。

**2.**当我在模拟器中点击搜索时，搜索活动没有启动。

**3.**具体要记住什么，在设计搜索时除了这些`developer.android`东西，其他很多时候网站没有告诉的细节。

**4.**如何执行全文搜索，我在 上阅读过`developer.android`，如何让我的 db 能够拥有 FTS

***PS：我是学习android的新手，所以如果有菜鸟的错误，请多多包涵，不要跳过步骤。***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:16:06.520

因此，搜索是决定应用程序实际可用性的关键因素，并提供必要的用户增强功能

**1.**这是处理搜索最简单的方法之一

```
private void handleIntent(Intent intent) { 
      if (Intent.ACTION_SEARCH.equals(intent.getAction())) { 
         String query = 
               intent.getStringExtra(SearchManager.QUERY); 
         doSearch(query); 
      } 
   }    

   private void doSearch(String queryStr) 
       { 
       // get a Cursor/ArrayList, prepare the ListAdapter
       // and set it
       //helper.getSearchRecords(queryStr);//helper is a SQLiteOpenHelper Object
       //set it to adapter or get return result and proceed as you wish
       //personally i prefer ArrayAdapter
       ListView lstResult=(ListView)findViewById(R.id.lstVwResult);
       lstResult.setAdapter(null);
    SearchAdapter adapter=new SearchAdapter(getApplicationContext(), R.id.txvPersonId, helper.getSearchRecords(queryStr));
        lstResult.setAdapter(adapter);
   } 
```

**2.** SearchActivity 没有启动的原因也是`<meta-data>`需要在activity之外定义的，像这样

```
<application>
<activity android:label="@string/app_name" android:launchMode="singleTop" 
                 android:name=".SearchActivity">
            <intent-filter>
                <action android:name="android.intent.action.SEARCH" />
            </intent-filter>
            <meta-data android:name="android.app.searchable"  android:resource="@xml/searchable" />
</activity>

<!--define metadata outside activity in application tag-->
<meta-data android:name="android.app.default_searchable" android:value=".SearchActivity" /> 
```

**3.**要记住的关键事项之一，为什么要向应用程序添加搜索功能，它是联系人应用程序，单击检索结果会显示特定联系人的更多详细信息，但对于餐厅应用程序，它将显示详细信息在餐厅详细信息的地方，作为开发人员，您应该开发它来满足用户需求并增强用户体验。

**4.**对于拥有`Full-Text Search`，并不总是必要的，这完全取决于您希望如何向数据库查询结果，您将考虑哪些字段以及它们与您的应用程序的主要目的有何相关性，

更多参考

*   [Sqlite.org](http://www.sqlite.org/fts3.html)（它是 [FTS](http://en.wikipedia.org/wiki/Full_text_search)的“HOW and What”中最广泛的文章）。
*   [blog.andresteingress](http://blog.andresteingress.com/2011/09/30/android-quick-tip-using-sqlite-fts-tables/) (FTS with android 教程)。
*   [哦，赖利](http://answers.oreilly.com/topic/1955-how-to-use-full-text-search-in-sqlite/)。

# jquery - jQuery slideDown slideUp按钮

> ID：14710986
> 
> 赞同：0
> 
> 时间：2013-02-05T15:27:36.647
> 
> 标签：jquery, button, slidedown, slideup

我有一个可以展开和折叠元素的脚本 - 我添加了折叠/展开所有项目。但是，如果部署了一个成员并单击全部展开-它将最小化/向上滑动

如何编写代码以最小化和最大化展开或折叠的元素？

```
<script type=\"text/javascript\"> 
$(document).ready(function ($){
        $('.splLink').click(function(){  
            $(this).parent().children('div.splCont').slideToggle('normal');

            if ( $(this).hasClass('active') ) {
                $(this).parent('.cat-root').removeClass('active-h2');
                $(this).removeClass('active');
                $(this).parent('.name').removeClass('active-name');
                }
            else {
                $(this).parent('.cat-root').addClass('active-h2');
                $(this).addClass('active');
                $(this).parent('.name').addClass('active-name');
                }
            return false;
        });

});
        function showAll(){

            $('.splLink').parent().children('div.splCont').slideToggle('normal');

            if ( $('.splLink').hasClass('active') ) {

                $('.splLink').parent('.cat-root').removeClass('active-h2');
                $('.splLink').removeClass('active');
                $('.splLink').parent('.name').removeClass('active-name');
                $('.btn').html('Развернуть');
                }
            else {

                $('.splLink').parent('.cat-root').addClass('active-h2');
                $('.splLink').addClass('active');
                $('.splLink').parent('.name').addClass('active-name');
                $('.btn').html('Свернуть');
                }

            return false;
            }

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:26:48.717

```
if ($("div.splCont:visible").length > $("div.splCont:hidden").length) {
  $('.splLink').parent().children('div.splCont').slideUp('normal');
} else {
  $('.splLink').parent().children('div.splCont').slideDown('normal');
} 
```

如果可见元素的数量大于隐藏的数量，那么一切都会向上滑动并被折叠。否则，一切都会滑下来并显示出来。

# php - 如何为多个页面制作计数器

> ID：14710989
> 
> 赞同：1
> 
> 时间：2013-02-05T15:27:47.690
> 
> 标签：php, mysql, codeigniter

我为我的一个页面做了一个计数器，如下所示：

```
$this->db->query("UPDATE viewcounter SET `view` = `view`+1 WHERE pagename = 'http://local.login.com/main/article_view/24' ");

            $sql  = $this->db->query("SELECT * FROM viewcounter WHERE id = id");
            foreach ( $sql->result_array() as $row )
                {       
                    $id = $row["id"];
                    $pagename = $row["pagename"];
                    $view = $row["view"];
            } echo 'SOMETHING'; 
```

正如您所注意到的，我有一个带有 id、pagename 和视图的表。当我访问该页面时，它会在视图中添加一个。问题是：我怎样才能使它工作，比如说，20 页？我不想添加

`pagename = "http://local.login.com/main/article_view/24"`

和

`pagename = "http://local.login.com/main/article_view/25"`

因为我不喜欢那样。

我被困帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T15:38:48.043

以下可能是您正在寻找的。您可以更改`$i<20`为您想要运行的任何迭代次数（即`$i<100`），并且您可以更改`24+$i`为从您想要的任何次数开始（即`1332+$i`）

```
for($i=0; $i<20; $i++){
    $this->db->query("UPDATE viewcounter SET `view` = `view`+1 WHERE pagename = 'http://local.login.com/main/article_view/".(24+$i)."' ");
}

            $sql  = $this->db->query("SELECT * FROM viewcounter WHERE id = id");
            foreach ( $sql->result_array() as $row )
                {       
                    $id = $row["id"];
                    $pagename = $row["pagename"];
                    $view = $row["view"];
            } echo 'SOMETHING'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:42:57.980

为什么在进入 php 页面时不运行代码？然后您不必传递参数，您可以使用以下方法获取您的网址：

> $url = $_SERVER['REQUEST_URI']

如果这就是你的意思？

# c++ - 如何使用 css 在 QStackedWidget 中更改 QWidget 的背景颜色？

> ID：14710990
> 
> 赞同：0
> 
> 时间：2013-02-05T15:27:48.330
> 
> 标签：c++, css, qt, user-interface

如何使用 Qt css 在 QStackedWidget 中更改 QWidget 的背景颜色？

```
ProjectPage* p = new ProjectPage(this);
ui.stackedWidget->addWidget(p); 
```

My`ProjectPage`是`QWidget`在 Qt 设计器中定制的。目前我尝试在设计器中更改背景颜色`ProjectPage`，但未能奏效。这是一个失败，因为在我的应用程序中显示的背景颜色是我`QWidget`使用 css 设置的默认颜色，唯一的例外是我的所有标签和按钮`ProjectPage`都改变了颜色。

我目前无法找到`QstackedWidget`css 文档。

* * *

**注意：**背景图像工作正常，我正在探索这与我为所有 QWidgets 设置默认图像有关的可能性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T19:55:10.787

```
setStyleSheet ("YourQWidgetBasedPageClass#nameOfYourPageWidget {background: white;}"); 
```

如果您要覆盖该`paintEvent`自定义小部件类，请记住在您的实现中的某处调用默认值`QWidget::paintEvent`，否则 css 将不会启动

请注意，仅当您要选择特定小部件时，才需要使用 # 名称。此外，颜色可以是任何 html 样式名称：白色、红色、紫色等...以及#XXXXXX 样式颜色或使用 RGB(...)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:31:42.390

我的问题是由使用下面的 css 代码引起的。

```
QWidget {
    background-image: url(:/texture.png);
} 
```

通过定义默认纹理，您设置的所有背景颜色都隐藏在该纹理后面。

解决方案是从默认纹理中删除`QWidget`或加载具有所需颜色的新纹理。

# sql - 如何从 oracle 数据库中检索最后更新的记录？

> ID：14710992
> 
> 赞同：0
> 
> 时间：2013-02-05T15:27:49.893
> 
> 标签：sql, oracle

我想检索已从 Oracle 数据库中的表中更新的最后 20 行，而不使用 order by then rownum 函数，例如

```
select * 
  from EMP 
 order by last_Updated 
 where rownum < 20 
```

这个查询需要很多时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T15:31:39.420

您发布的查询没有按照您的想法执行。该查询将获取 20 个任意行，然后按`last_updated`列排序。如果您想要最近的 20 行，则需要`ORDER BY last_updated`在嵌套查询中，然后`rownum`在外部查询中应用谓词。

```
SELECT *
  FROM (SELECT *
          FROM emp
         ORDER BY last_updated desc)
 WHERE rownum <= 20 
```

假设它`last_updated`被索引，那应该是一个非常有效的查询。您应该能够对`last_updated`索引进行最小/最大扫描，然后`count stopkey`只获取前 20 行。如果您对此查询的性能有疑问，您将获得什么样的查询计划？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T15:30:06.687

尝试改用 Rownum() 并按 update_date desc 排序 where rownum() <=20...